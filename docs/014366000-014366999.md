# StackOverflow 问答 14366000-14366999

# java - DTO 和 DAO 概念和 MVC

> ID：14366001
> 
> 赞同：163
> 
> 时间：2013-01-16T19:15:42.707
> 
> 标签：java, swing, model-view-controller, user-interface, javabeans

1) 我们为什么使用`DTO`and `DAO`，以及我们应该在什么时候使用它们。我正在开发一个`GUI`用于插入、编辑、删除数据的 Java 软件。但是我正在努力区分`DTO/DAO`and `Model`, `View`, `Controller`(MVC) Structure？它们是否相似，在通过 Java 与数据库交互时更好用`GUI`。

2）我真的很好奇的一件事是在一个班级`view`上是否是一种好习惯。`Controller`如果我们考虑一下`Netbeans`，您可以创建`GUI`框架类并将组件添加`JButton`到框架上，双击按钮将带您到`actionListener`方法（控制器），该方法似乎在框架中，数据将显示给用户（视图） . 所以他们在同一个班。那么这是否完全违背了这个概念？

[这](http://www.youtube.com/watch?v=Iwwznm9XSME)就是我所说的

在一个类中拥有视图和控制器的坏习惯？

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2013-01-16T19:40:44.490

`DTO`是**Data Transfer Object**的缩写，因此它用于在应用程序的类和模块之间传输数据。

*   `DTO`应该只包含数据、getter、setter 和构造函数的私有字段。
*   `DTO`不建议在此类类中添加业务逻辑方法，但添加一些 util 方法是可以的。

`DAO`是**Data Access Object**的缩写，因此它应该封装用于在数据存储（数据库、文件系统等）中检索、保存和更新数据的逻辑。

以下是 DAO 和 DTO 接口的示例：

```
interface PersonDTO {
    String getName();
    void setName(String name);
    //.....
}

interface PersonDAO {
    PersonDTO findById(long id);
    void save(PersonDTO person);
    //.....
} 
```

这`MVC`是一个更广泛的模式。DTO/DAO 将成为 MVC 模式中的模型。
它告诉您如何组织整个应用程序，而不仅仅是负责数据检索的部分。

至于第二个问题，如果您有一个小型应用程序，那完全可以，但是，如果您想遵循 MVC 模式，**最好有一个单独的控制器**，它将在单独的类中包含框架的业务逻辑并从事件处理程序向该控制器发送消息。
这会将您的业务逻辑与视图分开。

# sql - SQL Server JOIN 缺少 NULL 值

> ID：14366004
> 
> 赞同：88
> 
> 时间：2013-01-16T19:15:57.037
> 
> 标签：sql, sql-server

假设我有以下 2 个表：

```
 Table1:                                Table2:
Col1:      Col2:     Col3:             Col1:       Col2:       Col4:
a          b         c                 a           b           d
e          <null>    f                 e           <null>      g
h          i         j                 h           i           k
l          <null>    m                 l           <null>      n
o          <null>    p                 o           <null>      q 
```

现在，我想将这些表加入`Col1`并`Col2`带回整个集合，如下所示：

```
 Result:
Col1:      Col2:     Col3:     Col4:
a          b         c         d
e          <null>    f         g
h          i         j         k
l          <null>    m         n
o          <null>    p         q 
```

所以，我尝试了一个类似的 SQL：

```
SELECT Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4
FROM Table1 INNER JOIN Table2
ON Table1.Col1 = Table2.Col1 
AND Table1.Col2 = Table2.Col2 
```

但它与 中的`NULL`值不匹配`Col2`，所以我最终得到：

```
 Result:
Col1:      Col2:     Col3:     Col4:
a          b         c         d
h          i         j         k 
```

我怎样才能得到我正在寻找的结果？

谢谢！

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-01-16T19:17:20.833

您可以明确说明连接：

```
SELECT Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4
FROM Table1 INNER JOIN
     Table2
      ON (Table1.Col1 = Table2.Col1 or Table1.Col1 is NULL and Table2.Col1 is NULL) AND
         (Table1.Col2 = Table2.Col2 or Table1.Col2 is NULL and Table2.Col2 is NULL) 
```

在实践中，我更有可能`coalesce()`在连接条件中使用：

```
SELECT Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4
FROM Table1 INNER JOIN
     Table2
     ON (coalesce(Table1.Col1, '') = coalesce(Table2.Col1, '')) AND
        (coalesce(Table1.Col2, '') = coalesce(Table2.Col2, '')) 
```

Where`''`将是不在任何一个表中的值。

只是一个警告。在大多数数据库中，使用这些结构中的任何一个都会阻止使用索引。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-07-15T19:38:11.047

使用左外连接而不是内连接来包含带有 NULLS 的行。

```
SELECT Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4
FROM Table1 LEFT OUTER JOIN 
    Table2 ON Table1.Col1 = Table2.Col1 
    AND Table1.Col2 = Table2.Col2 
```

有关详细信息，请参阅此处：[http ://technet.microsoft.com/en-us/library/ms190409(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms190409(v=sql.105).aspx)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-16T19:17:27.260

尝试使用`ISNULL`功能：

```
SELECT Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4
FROM Table1 
INNER JOIN Table2
   ON Table1.Col1 = Table2.Col1 
   AND ISNULL(Table1.Col2, 'ZZZZ') = ISNULL(Table2.Col2,'ZZZZ') 
```

表中`'ZZZZ'`永远不会出现一些任意值。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-01-16T19:19:56.133

肮脏而快速的破解：

```
SELECT Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4
FROM Table1 INNER JOIN Table2 ON Table1.Col1 = Table2.Col1
 AND ((Table1.Col2 = Table2.Col2) OR (Table1.Col2 IS NULL AND Table2.Col2 IS NULL)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-04T13:20:08.637

你可以像那样映射

```
select * from tableA a
join tableB b on isnull(a.colID,'') = isnull(b.colId,'') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-09T08:13:37.020

由于某种原因，我无法让它与外部连接一起工作。

所以我用：

```
SELECT * from t1 where not Id in (SELECT DISTINCT t2.id from t2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-17T12:46:37.907

尝试在连接中使用附加条件：

```
SELECT Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4
FROM Table1 
INNER JOIN Table2
ON (Table1.Col1 = Table2.Col1 
    OR (Table1.Col1 IS NULL AND Table2.Col1 IS NULL)
   ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-27T10:19:46.440

一些 SQL 实现有一个特殊的 Null 安全相等运算符。

例如雪花有[EQUAL_NULL](https://docs.snowflake.com/en/sql-reference/functions/equal_null.html)所以你可以做

```
SELECT 
  Table1.Col1, Table1.Col2, Table1.Col3, Table2.Col4 
FROM 
  Table1 
  INNER JOIN Table2 ON EQUAL_NULL(Table1.Col1, Table2.Col1) 
  AND EQUAL_NULL(Table1.Col2, Table2.Col2) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-07T16:05:20.413

```
declare @Table1 as Table(Col1 varchar(1),Col2 varchar(1), Col3 varchar(1))
declare @Table2 as Table(Col1 varchar(1),Col2 varchar(1), Col4 varchar(1))
insert into @Table1
values('a',          'b',     'c'),
('e',          null,    'f'), 
('h',          'i'  ,   'j'), 
('l',          null  ,  'm'), 
('o',          null  ,  'p') 
insert into @Table2
values('a',          'b',     'd'),
('e',          null,    'g'), 
('h',          'i'  ,   'k'), 
('l',          null  ,  'n'), 
('o',          null  ,  'q') 

select * from @Table1 tbl1
join @Table2 tbl2
on tbl1.Col1 =tbl2.Col1
and isnull(tbl1.Col2,0) =isnull(tbl2.Col2,0) 
```

输出：

```
 Col1   Col2    Col3    Col1    Col2    Col4
 a      b       c       a       b       d
 e      NULL    f       e       NULL    g
 h      i       j       h       i       k
 l      NULL    m       l       NULL    n
 o      NULL    p       o       NULL    q 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-08-03T07:17:07.347

唯一正确的答案是不要连接具有空值的列。这会很快导致不受欢迎的行为。

例如 isnull(b.colId,''): 如果数据中有空字符串会怎样？连接可能是重复的行，我猜在这种情况下不打算这样做。

# c# - 在 C# winform 中使用谷歌翻译器在 winform 中翻译一些字符串

> ID：14366005
> 
> 赞同：0
> 
> 时间：2013-01-16T19:15:58.980
> 
> 标签：c#, winforms, html-agility-pack, google-translate

我想在我的 winform 应用程序中翻译一个字符串。我想从谷歌翻译器翻译这个。所以我的方法是使用“HtmlAgilityPack”的抓取html方法。使用 HTMLAgilityPack 我想在我的 winform 中将翻译后的字符串显示为标签。我用谷歌搜索但我没有这样做。我该怎么做？？？N:B: 我不想使用 google 翻译器 api 而不是这个我喜欢这样：

```
using HtmlAgilityPack; 
........
var webGet = new HtmlWeb();
var document = webGet.Load(
"http://translate.google.com/#en/bn/this%20is%20my%20string");
 var node = document.DocumentNode.SelectNodes(
"//span[@class='short_text' and @id='result_box']");
 if (node != null)
    {
  foreach (var xx in node)
   {
    x = xx.InnerText;
    MessageBox.Show(x);
   }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:17:07.993

看看[这个片段](http://forum.codecall.net/topic/64790-c-translator-using-google-api/#axzz2IASiLc9n)，了解如何使用 Google API 进行翻译。

# java - JavaCV 训练文本文件模式中的 FaceRecognition.java

> ID：14366012
> 
> 赞同：1
> 
> 时间：2013-01-16T19:16:25.197
> 
> 标签：java, android, opencv, javacv, face-recognition

我目前正在运行示例代码 FaceRecognition.java，方法是使用[此处](https://github.com/danieljonker/PersonFinder/blob/master/Person%20finder/src/danie/jonker/personfinder/FaceRecognition.java)找到的代码。

图像训练文本文件的示例采用以下格式：

```
1 myName /sdcard/FaceDB/s1/myName1.jpg
1 myName /sdcard/FaceDB/s1/myName2.jpg
1 myName /sdcard/FaceDB/s1/myName3.jpg
1 myName /sdcard/FaceDB/s1/myName4.jpg
2 otherName /sdcard/FaceDB/s2/otherName1.jpg
2 otherName /sdcard/FaceDB/s2/otherName2.jpg
2 otherName /sdcard/FaceDB/s2/otherName3.jpg
2 otherName /sdcard/FaceDB/s2/otherName4.jpg 
```

我想知道这是怎么做到的，这背后的解释是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:55:33.383

我想向您指出这篇文章[http://www.shervinemami.info/faceRecognition.html](http://www.shervinemami.info/faceRecognition.html)它确实解释了您想知道的一切。代码是用 C/C++ 编写的，但我希望它不会太难理解。

该文件仅遵循以下格式：

```
<person no.> <person name> <location of the the person's face image> 
```

您实际上可以创建自己的格式。它是关于您的程序如何找到和读取这些输入图像的设计。

# iphone - 在设备上运行时 CFMutableAttributedString 崩溃 (EXC_BAD_ACCESS)

> ID：14366016
> 
> 赞同：2
> 
> 时间：2013-01-16T19:16:38.910
> 
> 标签：iphone, ios, objective-c, ipad

我有以下代码：

```
NSString *name = @"some text goes in here";

        CFStringRef string =  (__bridge CFStringRef) self.highlightItem_.comment;
        CFMutableAttributedStringRef comment = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);
        CFAttributedStringReplaceString (comment ,CFRangeMake(0, 0), string);

        CGColorRef blue =[UIColor colorWithRed:128/255.f green:203/255.f blue:255/255.f alpha:1.0].CGColor;
        CGColorRef gray =[UIColor colorWithWhite:153/255.f alpha:1.0].CGColor;

        CFAttributedStringSetAttribute(comment, CFRangeMake(0, [name length]),kCTForegroundColorAttributeName, blue);
        CFAttributedStringSetAttribute(comment, CFRangeMake([name length],  [self.highlightItem_.comment length] - [name length]),kCTForegroundColorAttributeName, gray);

        CTFontRef nameFont = CTFontCreateWithName((__bridge CFStringRef)kProximaNovaBold, 15.0f, nil);
        CFAttributedStringSetAttribute(comment,CFRangeMake(0, [name length]),kCTFontAttributeName,nameFont);

        CTFontRef commentFont = CTFontCreateWithName((__bridge CFStringRef)kProximaNova, 15.0f, nil);
        CFAttributedStringSetAttribute(comment, CFRangeMake([name length],  [self.highlightItem_.comment length] - [name length]),kCTFontAttributeName,commentFont);

        CGContextSaveGState(context);
        CGRect captionFrame = CGRectMake(0, 0, rect.size.width - 80, commentHeight);
        CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(comment);
        CGMutablePathRef captionFramePath = CGPathCreateMutable();
        CGPathAddRect(captionFramePath, NULL, captionFrame);

        CTFrameRef mainCaptionFrame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), captionFramePath, NULL);

        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetTextMatrix(context, CGAffineTransformIdentity);
        CGContextTranslateCTM(context, 70, self.imageHeight_ + commentHeight + 20);
        CGContextScaleCTM(context, 1.0, -1.0);

        CTFrameDraw(mainCaptionFrame, context);
        CGContextRestoreGState(context);

        CFRelease(framesetter);
        CGPathRelease(captionFramePath); 
```

我不知道为什么当我在模拟器上运行它时一切正常，但是当我在设备上运行它时，它在这条线上崩溃：

```
CFAttributedStringSetAttribute(comment, CFRangeMake(0, [name length]),kCTForegroundColorAttributeName, blue); 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:02:16.663

所以问题是我没有保留我的CGColor。如果我把 CGColorRetain 然后它工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:31:10.443

不应该

```
CFMutableAttributedStringRef comment = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);
CFAttributedStringReplaceString (comment ,CFRangeMake(0, 0), string); 
```

读

```
CFMutableAttributedStringRef comment = CFAttributedStringCreateMutable(
    kCFAllocatorDefault, 
    CFAttributedStringGetLength(string));
CFAttributedStringReplaceString(comment,
    CFRangeMake(0, CFAttributedStringGetLength(string)), 
    string); 
```

?

# c++ - 将用于串行通信的消息存储为 C++ 可行解决方案中的成员变量？

> ID：14366020
> 
> 赞同：2
> 
> 时间：2013-01-16T19:16:42.967
> 
> 标签：c++, oop, serial-port

我正在从一些主要与 USB 串行通信有关的简单 C 函数创建一些 C++ 库。我正在用 Visual Studio 2010 编写它，目的是移植到 mac 和 linux。

我目前有一个 SerialCommunication 类和一个 PumpComm 子类。目前，有一个 C 函数用于 CreateMessage(uint8 msg[])、SendMessage(uint8 msg[])、ReadSerial(uint8 readmsg[]) 等。

我的问题是：将 msg[] 更改为成员变量而不是函数参数有什么缺点吗？（伪代码）：

```
int main() 
{
    SerialPort sp;
    sp.OpenSerial("COM19");
    sp.CreateMessage("Messagetosend1234");
    sp.SendMsg();
}

class SerialPort 
{
private:
    uint8 msg[];

public:
    int32 OpenSerial();
    int32 CreateMessage(uint8 msg[]);

} 
```

我看到的优点包括：1）msg显然由它将发送到的串口拥有，2）msg的范围是串口的范围，3）msg的实现可以隐藏（当我添加了getter/setter）..所以基本上是OOP的优势。我对 c++ 和 OOP 还很陌生，所以我可能会遗漏一些东西，尤其是在串行通信方面。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:52:31.353

消息是 COM 通道的一部分吗？我会说你*通过*频道发送消息。您的设计将“如何”（渠道）与“什么”（消息）紧密结合。此外，您在代码中隐式添加了许多状态依赖项——例如，您必须在调用 SendMsg 之前调用 CreateMessage。

总而言之，有些事情可能会适得其反：

*   如果您需要从多个线程访问通道
*   如果您的消息超过一个字节缓冲区
*   如果您重构代码并错误地交换了一些调用

因此，我会保留消息和通道两个单独的类：

```
class Message {
private:
  uint8 *buffer;
  size_t length;

public:
  Message(uint8 *buf, size_t len) : buffer(buf), length(len) { }

  size_t getLength() const { return length; }
  const uint8 *getData() const { return buffer; }
};

class SerialPort 
{
public:
    int32 OpenSerial();
    int32 SendMsg(const Message& msg);

} 
```

# mysql - 将数据从 HBase 导出到 MySql

> ID：14366022
> 
> 赞同：0
> 
> 时间：2013-01-16T19:16:49.707
> 
> 标签：mysql, hbase

我正在使用 HBase 0.92.1-cdh4.1.2。我在 HBase [大小约 10GB] 中有近 100 个表。我想将所有数据导出到 MYSQL。我认为 sqoop 不是一个可行的选择，因为它主要用于从 sql-nosql 数据库中导出。另一个选项是将 HBase 数据作为平面文件导出到本地文件系统，并使用 mysqlimport 选项将数据转储到 mysql ！

无论如何，我们可以直接将数据转储到mysql而不是导出为平面文件吗？

# vb.net - 如何将两个图片框放入图片框数组中

> ID：14366025
> 
> 赞同：0
> 
> 时间：2013-01-16T19:16:58.160
> 
> 标签：vb.net, visual-studio-2010, picturebox

我正在用visual basic编写一个程序（在windows窗体应用程序模式下），我在这个程序中有两个图片框，我希望它们是一个数组，比如`p[0]`and `p[1]`，在visual basic中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:38:57.470

你可以制作一个你想要的任何东西的数组，包括一个 PictureBoxes 数组......很久没有使用 VB.Net，但如果我没记错语法：

```
Imports System.Windows.Forms

....

Dim arr As System.Windows.Forms.PictureBox() = New PictureBox(2) {}
arr(0) = New PictureBox()
arr(1) = New PictureBox() 
```

# r - 在由 rgl 包 plot3d 构建的球体上具有名称

> ID：14366028
> 
> 赞同：3
> 
> 时间：2013-01-16T19:17:09.330
> 
> 标签：r, plot, rgl

有没有办法在 R 中使用 plot3d(rgl) 构建 3d 图形时显示名称，因为当我有许多球体要绘制在同一个坐标上时，很难找到球体属于哪个条目。例如，我有数据：

```
 x   y   z
A   0.1 -0.5    3.2
B   -1.1    1.2 0.8
C   2.0 2.1 0.6
......

plot3d(data,type="s",radius=0.025) 
```

但是，我希望在图表上显示名称 A、B、C，因为它更容易观察。或者仅当我将鼠标放在一个特定球体上时才显示名称。我尝试过使用不同的颜色，但是当我有 20 个球体时，它似乎会用完颜色或颜色太接近而无法区分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:32:02.800

`text3d()`库中有一个函数`rgl`可用于在绘图中绘制文本。此示例显示如何将行名称绘制为文本。

```
plot3d(data,type="s",radius=0.025)
text3d(data$x,data$y,data$z,text=rownames(data)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-02T02:01:56.137

您还可以结合使用`text3d`with`identify3d()`来识别要与鼠标交互标记的点

# c++ - C++ shared_ptr 指针访问冲突

> ID：14366029
> 
> 赞同：0
> 
> 时间：2013-01-16T19:17:13.097
> 
> 标签：c++, pointers, virtual, shared-ptr, base

我正在使用`shared_ptr<Base>`某种带有派生类的树列表。但是当我的树被破坏时，我会遇到指针访问冲突。

我的代码看起来像这样，此外，这实际上类似于我的运行时错误：

```
#include <iostream>
#include <memory>
#include <vector>

class Base;
typedef std::shared_ptr<Base> pBase;
class Derived;

class Base {
public:        
    std::vector<pBase> children;

    pBase parent;

    Base() {}
    virtual ~Base() {}

    virtual void doSomething() {}
    void add(pBase i);
};

class Derived : public Base {
    void doSomething() {
        // Do something...
    }
};

void Base::add(pBase i) {
    i->parent = pBase(this);
    children.push_back(i);
}

int main() {
    pBase tree = pBase(new Derived());
    pBase child(new Derived());
    child->add(pBase(new Derived()));
    tree->add(child);
} 
```

此外，当我将以下行添加到`Base::~Base`： std::cout << "destruct" << name << std::endl;

并实现一个名为 name 的 std::string ，`Base`其中每个实例都不同，我可以看到析构函数被多次调用（因为`Base::parent`我认为是引用）。那当然触发了我的错误，但我仍然不明白它为什么会发生，因为`shared_ptr<Base>`预计会在实际销毁它之前计算它的引用！！？

我希望有人能告诉我我做错了什么！但更重要的是，我该如何解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:23:40.373

在 add() 中查看这一行

```
i->parent = pBase(this); 
```

每次调用 add 时，都会创建一个*新*的指向`this`. 这些共享指针是分开的——也就是说，它们*不像*你想象的那样“共享”。所以，当你第一次删除一个孩子时，它的父母会被删除（因为它是一个共享指针）。因此，您的代码爆炸了。

尝试（作为开始）使 parent 成为一个普通的哑指针。

```
Base *parent; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T19:49:05.870

只是添加到其他人的答案：在行中做你想做的事情的规范方法

```
i->parent = pBase(this); 
```

是使用[`std::enable_shared_from_this`](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this). 你

1.  `Base`从中衍生

    ```
    class Base : std::enable_shared_from_this<Base> { 
    ```

2.  确保每个`Base`实例都归`std::shared_ptr`. 在您的情况下没关系，因为您在表达式中创建对象，例如

    ```
    pBase child(new Derived()); 
    ```

3.  当你想要`shared_from_this()`一个. 然后有问题的行将变为`this``std::shared_ptr`

    ```
    i->parent = shared_from_this(); 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T19:23:39.920

这里

```
i->parent = pBase(this); 
```

您从一个普通的旧指针创建一个智能指针，该指针指向您没有直接从 new 获得的对象。永远不要这样做。

正如@Roddy 解释的那样，您会获得带有单独引用计数器的单独智能指针对象。一个指针的两个引用计数器将不起作用。

在您的情况下，正如@Roddy 建议的那样，将 parent 设为普通指针可能是可以的。这样，您就不会遇到循环引用的麻烦。只要确保您在删除父级后永远不会访问父级指针。如果您将所有子项与父项一起删除，则没有问题（这会自动发生，除非您在其他地方存储更多指向它们的智能指针）

如果要初始化智能指针，基本上有两种选择： 在每个接口中使用智能指针。不幸的是，这不适用于“this”，因为这是一个隐式参数。您需要在一个额外的参数中手动将您已经创建的智能指针传递给该方法。像这样：

```
tree->add(tree, child); 
```

这有点难看，所以您可能需要考虑将“添加”作为静态方法，这样您就不需要两次传递父级。

另一种选择：使用另一种智能指针，如 boost::intrusive_ptr，您可以将引用计数存储在指针中。这样，即使您只有一个像“this”这样的哑指针，您也可以找到引用计数。

编辑：下面@jpalecek 的答案更好。使用那个。塞巴斯蒂安。

# vba - 如何将字节数组保存到 VBA 中的文件中

> ID：14366033
> 
> 赞同：3
> 
> 时间：2013-01-16T19:17:18.057
> 
> 标签：vba

我正在尝试从服务器下载文件。我有 VBA 代码，它调用 C# Web 服务并获取字节数组。我现在想弄清楚，如何将字节数组写入文件我的本地机器通过 VBA 代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T19:31:04.753

```
open "output.bin" for binary access write as #1
lWritePos=1
put #1, lWritePos, vData
close #1 
```

[http://www.visualbasic.happycodings.com/Files_Directories_Drives/code52.html](http://www.visualbasic.happycodings.com/Files_Directories_Drives/code52.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-11T20:36:21.780

vData 需要定义为`Dim vData() as byte`. 转换（图像）编码字符串（在此答案中链接到它）的 decodeBase64 函数返回一个字节数组，如果将其传递回一个变体，则结果数据文件将不会打开。

# string - 从 Prolog 中的字符串中删除空格

> ID：14366036
> 
> 赞同：3
> 
> 时间：2013-01-16T19:17:21.997
> 
> 标签：string, parsing, prolog, whitespace, dcg

我在 Prolog 中编写了解析器。我还没说完。它是代码的一部分。下一步是杀死字符串中的所有空格。

```
parse(Source, Tree) :-  kill_whitespace(Source, CleanInput), % remove whitespaces
                        actual_parse(CleanInput, Tree).

actual_parse(CleanInput, Tree):- phrase(expr(Tree),CleanInput).

expr(Ast) --> term(Ast1), expr_(Ast1,Ast).
expr_(Acc,Ast) --> " + ", !, term(Ast2), expr_(plus(Acc,Ast2), Ast).
expr_(Acc,Ast) --> " - ", !, term(Ast2), expr_(minus(Acc,Ast2), Ast).
expr_(Acc,Acc) --> [].

term(Ast) --> factor(Ast1), term_(Ast1,Ast).
term_(Acc,Ast) --> " * ", !, factor(Ast2), term_(mul(Acc,Ast2),Ast).
term_(Acc,Ast) --> " ** ", !, factor(Ast2), term_(pol(Acc,Ast2),Ast).
term_(Acc,Acc) --> [].

factor(Ast) --> "(", !, expr(Ast), ")".
factor(D)--> [X], { X >= 48 , X=<57 , D is X-48 }.
factor(id(N,E)) --> "x", factor(N), ":=", expr(E), ";". 
```

例如：

```
?- parse("x2:=4",T).
    T = id(2, 4) 
```

真的！但是，当我写：

```
?- parse("x2 := 4",T).
false. 
```

它也必须是真的，它应该是一个过滤器：`kill_whitespace(Source, CleanInput)`.

不同的解决方案效率低下。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:31:35.537

[好吧，简单的方法是解析字符串并使用过滤谓词](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29)删除空格/只保留非空格。但这需要第二次解析。

解决它的另一种方法是使用您自己的谓词来“获取”字符，
即`foo --> "a".`变成`foo --> get("a").`where`get//1`是这样的：

```
get(X) --> [X].
get(X) --> whitespace, get(X). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:28:20.780

我通常会在可能出现空间的地方放置一个“跳过”非终端。这种跳过通常会丢弃评论以及任何其他“无趣”的文本。

为了尽可能简单：

```
% discard any number of spaces
s --> "" ; " ", s. 
```

我更喜欢一个短名称，以保持语法简洁。还要丢弃换行符等：

```
s --> "" ; (" ";"\t";"\n";"\r"), s. 
```

一个“风格”说明：而不是

```
parse(Source, Tree) :-
   expr(Tree, Source, []). 
```

你可以考虑

```
parse(Source, Tree) :-
   phrase(expr(Tree), Source). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:04:06.947

编写解析器的常用方法是分两个阶段编写：

第一阶段进行*词法分析*并产生一个*标记*流。此时丢弃对解析不重要的空格和其他“标记”（例如，注释）。

第二阶段自己进行*解析*，检查词法分析器生成的标记列表。

# c# - 无法访问我刚刚创建的课程

> ID：14366042
> 
> 赞同：0
> 
> 时间：2013-01-16T19:17:32.933
> 
> 标签：c#, oop, class

我希望这是一个简单的问题。我正在用 C# 构建一个简单的控制台应用程序。我有一堂课：

```
using System;
using Filter;

public class Params
{
    public string key;
    public bool distinct;
    public List<string> fields;
    public string filter;
    public int limit;
    public int skip;
    public bool total;
    public List<Tuple<string, GroupType>> group;
    public List<Tuple<string, OrderType>> order;

    public Params()
    {
        key = "";
        distinct = false;
        fields = new List<string>();
        filter = "";
        group = new List<Tuple<string, GroupType>>();
        limit = 0;
        order = new List<Tuple<string, OrderType>>();
        skip = 0;
        total = false;
    }

    public void AddGroup(string field, GroupType type)
    {
        group.Add(new Tuple<string, GroupType>(field, type));
    }

    public void AddOrder(string field, OrderType type)
    {
        order.Add(new Tuple<string, OrderType>(field, type));
    }
} 
```

我的程序 .cs 类是：

```
namespace csharpExample
{
    class Program
    {
        public static void Main(string[] args)
        {
            Params p = new Params();
            Console.WriteLine("Test");
        }
    }
} 
```

我想在调用 Main() 的 program.cs 类中使用 Params。我想我可以简单地使用上面的参数。我也尝试过使用参数；这两个都是 VS 中的错误，因为它找不到指令。我也尝试添加我自己的命名空间：namespace MyNameSpace; 在我的 Params 课上。当我这样做时，我仍然无法使用 MyNameSpace；声明，因为它找不到它。

我只想将一堆函数提取到一个可以重用的类中。创建这个类后如何调用它？

- 感谢感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:19:33.090

如果要访问 Main 函数中的 Params 对象，只需在顶部`Params p = new Params ();`的函数中添加即可。`Main`

您的问题很可能是 Main 是静态的，这意味着它无法访问它之外的其他非静态的东西。如果您在 Program 类中声明了 Params，除非您将其设为静态，否则无法在 Main 中访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:23:06.833

您是在谈论调用构造函数还是正在设置的属性？您可以将类设置在基类的顶部，然后调用它的实例。但由于它是一个静态类，您可能应该在 main 中使用辅助方法。

```
namespace Example
{
    public class Program
    {
        Params p = new Params();

        string writefromParams()  // I exist just to give the string back from params with a nonstatic method
        {
            return p.key;
        }

        static void Main(string[] args)
        {
            Program p2 = new Program();  // set up a new instance of this very class

            Console.WriteLine(p2.writefromParams());  // get non static method from class

            Console.ReadLine();
        }
    }
} 
```

# javascript - 从 RequireJS 获取路径

> ID：14366045
> 
> 赞同：1
> 
> 时间：2013-01-16T19:17:53.250
> 
> 标签：javascript, requirejs

假设我有一组通过 Require 加载的路径...

```
var paths = ['libs/one','libs/two','libs/three']; 
```

我正在将它们传递给 require ......

```
require(paths, function(){

    for (var i=0, max=arguments.length; i<max; i++){
        someObject[CURRENT_PATH] = arguments[i];
    }

}); 
```

有没有办法获取路径`function(){ ... }`以便我可以使用它们？我可以遍历参数，但它只是给了我的内容`define()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:41:13.593

在这种情况下，您似乎想要：

```
someObject[paths[i]] = arguments[i]; 
```

您可以像往常一样包装代码以避免任何全局范围：

```
(function() {
    var paths  = ['libs/one','libs/two','libs/three'];

    require(paths, function () {

        for (var i = 0; i < arguments.length; i++) {
            someObject[paths[i]] = arguments[i];
        }    
    });
})(); 
```

# c++ - 在opengl中为由立方体制成的模型制作动画

> ID：14366046
> 
> 赞同：1
> 
> 时间：2013-01-16T19:18:01.607
> 
> 标签：c++, opengl, animation, 3d

我正在尝试为类似于此处的模型制作动画：[http](http://wollay.blogspot.com/2012/09/new-cube-world-video.html) ://wollay.blogspot.com/2012/09/new-cube-world-video.html 。它由立方体组成，分为几个部分：头部、身体、手臂和腿。我对动画没有经验。我将如何使用 opengl 创建类似于该视频中看到的步行动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:22:32.117

如果你想做“简单”的动画（就像很死板一样）。随着时间的推移，您可以简单地通过简单地改变运动速度来围绕与身体的连接点旋转腿和手臂。例如，在您的计时器功能或空闲功能中，您检查已经过去了多少时间，并基于此将零件的旋转设置为某个数字，直到它以弧线的另一种方式向后摆动的某个点。

如果您想要更复杂的东西，最好在 3D 建模工具中制作动画和创建模型，该工具也允许您创建动画。尝试编写更复杂的动画可能很困难。

对于初学者，你总是可以只做简单的刚性摆动动画，也许可以尝试以编程方式添加更多运动，例如一些左右摇摆的手臂，如果你已经做过来回摆动和一些基本的空闲动画，这很简单。

# c - bind() 失败并出现 Windows 套接字错误 10049

> ID：14366048
> 
> 赞同：2
> 
> 时间：2013-01-16T19:18:09.427
> 
> 标签：c, windows, sockets, bind

我尝试使用 IPv6 和 UDP 在 C 中制作客户端/服务器程序。当程序绑定套接字时，它返回 WSAError 10049。我知道这是地址名称的问题，但看不出是什么问题。我希望有人能帮帮忙。

```
struct sockaddr_in6 server, client;
SOCKET sock;
char buffer[BUFFERSIZE];
LPTSTR recvBuff[1024];
DWORD recvBuffLen = 1024UL;
int len = sizeof(client);

WORD wVersionRequested;
WSADATA wsaData;
wVersionRequested = MAKEWORD(1,1);
WSAStartup(wVersionRequested, &wsaData);

sock = socket(AF_INET6, SOCK_DGRAM, 0);
if (sock < 0)
    error("Fehler beim Anlegen des Sockets");

server.sin6_family = AF_INET6;
server.sin6_port = htons(6000);
server.sin6_addr = in6addr_any;

if (bind(sock, (struct sockaddr *) &server, sizeof(server)) == -1)
    error("Fehler beim binden des Sockets"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:46:42.647

在您可以使用该`sockaddr_in6`结构之前，您必须将`memset`其归零：

```
 memset(server, 0, sizeof(struct sockaddr_in6)); 
```

原因是该`struct sockaddr_in6`结构包含您未初始化的其他字段（例如`sin6_scope_id`）并且可能包含垃圾。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T19:49:15.543

[这通常是由于尝试绑定到对本地计算机无效的地址所致。](https://msdn.microsoft.com/en-us/library/windows/desktop/ms740668(v=vs.85).aspx).

你应该`PF_INET`在这里使用而不是`AF_INET`. 它们具有相同的值，但您没有`AF`在此处指定地址族，而是指定了协议族`PF`。这只是一个风格推荐。

我建议`memset`将以下数组、结构归零：

```
struct sockaddr_in6 server, client;
SOCKET sock;
char buffer[BUFFERSIZE];
LPTSTR recvBuff[1024]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-18T07:43:42.690

我遇到了同样的错误。

[@askMish 的回答](https://msdn.microsoft.com/en-us/library/windows/desktop/ms740668(v=vs.85).aspx)非常正确。我一开始并不理解，但最终我发现了。

> 这通常是由于尝试绑定到对本地计算机无效的地址造成的。

通常我们的计算机在某个网关下。

如果我们运行`ipconfig`，我们会发现 IP 地址是 192.168.something。

这就是我们可以用来在代码中绑定的 IP。

而其他应该与公共 IP 连接（如果你可以上网，你肯定有一个。）比如 47.93.something 如果他们与你在同一个局域网中。

您需要在网关处找到该 IP（可能是您家人的路由）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-09T13:33:33.453

`bind()`在 Windows 下调用时，我遇到了相同的错误代码。

我的原因与最初的海报代码中的原因不同，但我想其他人会犯和我一样的错误：

`inet_addr()`我使用-function生成了我希望服务器在本地绑定的本地地址。我以这种方式将此结果分配给本地地址结构`struct sockaddr_in localaddr`：

`localaddr.sin_addr.s_addr = htonl(inaddr);`

但是`inet_addr()`已经以字节网络顺序返回地址，因此`htonl(inaddr)`我的代码中的调用错误并导致错误 10049：

```
SOCKET tcpsock_bindlisten(unsigned short port, const char* bindaddr)
{
    SOCKET srvsock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

    unsigned long inaddr = bindaddr ? inet_addr(bindaddr) : INADDR_ANY;

    struct sockaddr_in localaddr;
    memset(&localaddr, 0, sizeof(struct sockaddr_in));
    localaddr.sin_family        = AF_INET;
    localaddr.sin_port          = htons(port);  

    // ERROR HERE! address returned from inet_addr is already in network-byte-order!
    localaddr.sin_addr.s_addr   = htonl(inaddr); 

    // CORRECT THIS WAY:
    localaddr.sin_addr.s_addr   = inaddr;   

    if (bind(srvsock, (struct sockaddr *) &localaddr, sizeof(localaddr)) != 0)
    {
        print_socketerror("tcpsock bind()");
        return INVALID_SOCKET;
    }

    if (listen(srvsock, SVRSOCK_BACKLOG) != 0)
    {
        print_socketerror("tcpsock listen()");
        return INVALID_SOCKET;
    }

    return srvsock;
} 
```

`bind()`当使用“所有本地接口”（ ）调用时`INADDR_ANY`，它起作用了，因为这个巧合`INADDR_ANY == htonl(INADDR_ANY)`：

```
int main()
{
    ...
    // this works for this special case:
    SOCKET svrsock1 = tcpsock_bindlisten(4444, NULL); 

    // did not work!
    SOCKET svrsock2 = tcpsock_bindlisten(5555, "192.168.0.123"); 
} 
```

# macos - NSTextField 点击链接颜色

> ID：14366054
> 
> 赞同：2
> 
> 时间：2013-01-16T19:18:29.703
> 
> 标签：macos, cocoa, nstextfield, appkit, nsattributedstring

我有一个`NSTextField`包含一个`NSAttributedString`本身包含一个可点击链接的内容。

我已经根据自己的样式更改了链接的颜色，但是当我单击它时，它会变成蓝色并带有下划线。我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:54:33.093

似乎我不是唯一一个遇到这个问题的人，并且有一个方便的类来解决它：

[https://github.com/laevandus/NSTextFieldHyperlinks](https://github.com/laevandus/NSTextFieldHyperlinks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:11:22.337

[这个](http://developer.apple.com/library/mac/#qa/qa1487/_index.html)( `http://developer.apple.com/library/mac/#qa/qa1487/_index.html`) 可以帮助你。它将向您展示如何设置/更改蓝色链接颜色和 underlineAttribute。您还可以查看NSTextView的方法`-linkTextAttributes`和方法。`-setLinkTextAttributes:`

# c# - 如何根据结构图中的最后一个接口注册具体类

> ID：14366055
> 
> 赞同：1
> 
> 时间：2013-01-16T19:18:35.837
> 
> 标签：c#, structuremap

我有以下接口和

```
public interface IHandleAService : IHandleDomainService
public interface IHandleBService : IHandleDomainService

public class AService : IHandleAService
public class BService : IHandleBService 
```

如何在 StructureMap 中基于 IHandleDomainService 接口扫描和注册所有这些具体类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:05:02.270

这对我有用：

```
ObjectFactory.Initialize(c => c.Scan(scan =>
{
    scan.TheCallingAssembly();
    scan.AddAllTypesOf<IHandleDomainService>();
})); 
```

# vb.net - 组织重构代码

> ID：14366057
> 
> 赞同：1
> 
> 时间：2013-01-16T19:18:41.683
> 
> 标签：vb.net, design-patterns

请看下面的代码：

```
public class Vehicle
  'Not very well designed.  Contains properties and functions/subs for cars, buses, tractors, planes, drivers etc.
end class 
```

我想重构代码，以便有一个超类（车辆）和许多子类。在处理更高优先级的工作时，我想这样做。

如果我创建新类，那么将有两个车辆类，即重构车辆和旧车辆。我相信最好的方法是为重构代码创建一个新的命名空间，例如 company.app.businesslogiclayer.automobiles.refactoredcode、company.app.datalogiclayer.automobiles.refactoredcode。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:23:07.067

我认为您可以将现有的类视为子类，因为它已经具有一些特定于类的功能，然后查看[Extract Superclass](http://www.refactoring.com/catalog/extractSuperclass.html)重构。在这里，您将创建新的超类，然后将公共特征从子类移动到超类。

![在此处输入图像描述](../Images/521a66c6993836368f2dc3000fab8d61.png)

[Refactoring for Visual Basic](http://books.google.com/books?id=vRxAnRb3mb4C&pg=PA352&lpg=PA352&dq=refactor+extract+superclass+vb&source=bl&ots=_oxrxktqYy&sig=Dmt2-ALJ3SXEBM5GTqeNaKWyTeQ&hl=en&sa=X&ei=LP72UOboEY788QSy0YHIBw&ved=0CFIQ6AEwBA#v=onepage&q=refactor%20extract%20superclass%20vb&f=false)有一个很好的关于提取超类的部分，您可能会觉得很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:26:31.923

注意**不要过度使用继承**。“Driver”让我觉得你真的想用作曲来做。车辆有司机。类似地，使用组合可以更好地处理其他事情，例如 。例如，您可以拥有一辆时速为 200 公里的汽车，而一辆时速为 300 公里的汽车。真的不想为此开设不同的课程。如果你有更复杂的东西，你可以有一个简单的 int 值或一个 EngineBehaviour 类。（关键字：**策略模式**）也确保不要在你的对象中实例化这样的复合对象，而是注入它们（关键字：**依赖注入**）。

# c# - 有问题的 ADIF 记录

> ID：14366060
> 
> 赞同：1
> 
> 时间：2013-01-16T19:18:56.227
> 
> 标签：c#, regex

[ADIF](http://www.adif.org/adif227.htm)是 HAM Operator Radio 的 LOG 标准。

```
<EOR> 
```

表示记录的结束。我将一个 ADIF 文件拆分为多条记录

以下记录导致问题。

```
<CALL:6>SV2JAO<QSO_DATE:8:D>20101001<TIME_ON:4>1736<BAND:3>30M<MODE:5>PSK31<RST_SENT:3>599<RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E<QSLMSG:62>TNX QSO, 73 FROM GREECE <pse paper qsl card for my collection> 
```

这是使用正则表达式将文件拆分为多个记录的代码。

```
string[] x = Regex.Split(record.Replace("\n", "").Replace("\r", ""), @"<(.*?):.*?>([^<\t\n\r\f\v]+)").Where(S => !string.IsNullOrEmpty(S)).ToArray();

var dic = new Dictionary<string, string>();
for (int i = 0; i < x.Length; i++)
{
    dic.Add(x[i].ToLower(), x[i + 1]);
    i++;
} 
```

这是 < 和 > 内部 ADIF 单元的问题`<TAG:lenghtOfValue>Value`

以下是样本记录。

```
<CALL:6>RK3DXB<QSO_DATE:8:D>20100926<TIME_ON:4>1334<BAND:3>30M<MODE:5>PSK31<RST_SENT:3>599<RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E

<CALL:6>EA1BRD<QSO_DATE:8:D>20100926<TIME_ON:4>1334<BAND:3>30M<MODE:5>PSK31<RST_SENT:3>599<RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E

<CALL:6>UV5EHT<QSO_DATE:8:D>20100926<TIME_ON:4>1334<BAND:3>30M<MODE:5>PSK31<RST_SENT:3>599<RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E

<CALL:5>G4MKI<QSO_DATE:8:D>20100926<TIME_ON:4>1536<BAND:3>30M<MODE:5>PSK31<RST_SENT:4>599 <RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E<QSLMSG:22>73, thanks for the QSO

<CALL:6>EA1BRD<QSO_DATE:8:D>20100926<TIME_ON:4>1636<BAND:3>30M<MODE:5>PSK31<RST_SENT:3>599<RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E<QSLMSG:19>TNX For QSO TU 73!.

<CALL:5>F5PEZ<QSO_DATE:8:D>20100926<TIME_ON:4>1705<BAND:3>30M<MODE:5>PSK31<RST_SENT:3>599<RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E<QSLMSG:29>Tnx for the QSO best 73 Andre

<CALL:6>UA3LSX<QSO_DATE:8:D>20100926<TIME_ON:4>1749<BAND:3>30M<MODE:5>PSK31<RST_SENT:3>599<RST_RCVD:0><QSL_SENT:1>Y<QSL_SENT_VIA:1>E<QSLMSG:19>TNX For QSO TU 73!. 
```

如何修改我的代码或正则表达式来解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:56:22.020

解决了 ：

```
 // workaround to prevent from '< something >'  inner ADIF Cell
            string[] x = Regex.Split(record.Replace("\n", "").Replace("\r", ""), @"<([^:]+):\d+[^>]*>").ToArray();
            List<string> l = new List<string>(x);
            l.RemoveAt(0);
            x = l.ToArray(); 
```

# python - Python：如何访问列表中具有特定键值的字典

> ID：14366061
> 
> 赞同：3
> 
> 时间：2013-01-16T19:18:58.177
> 
> 标签：python, list, dictionary, key

我有一个字典列表：

```
[
{"START":"Denver", "END":"Chicago", "Num":0},
{"START":"Dallas", "END":"Houston", "Num":3},
{"START":"Virginia", "END":"Boston", "Num":1},
{"START":"Washington", "END":"Maine", "Num":7}
] 
```

如何访问此列表中`"START":"Virginia", "END":"Boston"`以大多数 Python 方式具有的字典？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T19:24:11.177

最 Pythonic 的方式可能是列表推导：

```
[ d for d in dict_list if d["START"] == "Virginia" and d["END"] == "Boston" ] 
```

正如 mgilson 指出的那样，如果您假设列表中只有一个项目具有该对位置，则可以使用`next`相同的生成器表达式，而不是括号。这将只返回匹配的字典，而不是包含它的单项列表：

```
trip = next( d for d in dict_list 
               if d["START"] == "Virginia" and d["END"] == "Boston" ) 
```

无论哪种方式，结果都引用了与原始列表相同的 dict 对象，因此您可以进行更改：

```
trip["Num"] = trip["Num"] + 1 
```

当通过原始列表访问时，这些更改将在那里：

```
print(dict_list[2]["Num"])    # 2 
```

正如 Ashwini Chaudhary 在他的回答中指出的那样，您的搜索本身可能被指定为字典。在这种情况下，`if`生成器表达式中的条件略有不同，但逻辑是相同的：

```
search = { "START": "Virginia", "END": "Boston" }
trip = next(d for d in dict_list if all(i in d.items() for i in search.items())) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:24:15.763

使用：`all()`_`dict.items()`

```
In [66]: lis=[                                      
   ....: {"START":"Denver", "END":"Chicago", "Num":0},
   ....: {"START":"Dallas", "END":"Houston", "Num":3},
   ....: {"START":"Virginia", "END":"Boston", "Num":1},
   ....: {"START":"Washington", "END":"Maine", "Num":7}
   ....: ]

In [67]: for x in lis:                              
   ....:         if all(y in x.items() for y in search.items()):
   ....:                 x['Num']="foobar"        #change Num here
   ....:         

In [68]: lis
Out[68]: 
[{'END': 'Chicago', 'Num': 0, 'START': 'Denver'},
 {'END': 'Houston', 'Num': 3, 'START': 'Dallas'},
 {'END': 'Boston', 'Num': 'foobar', 'START': 'Virginia'},
 {'END': 'Maine', 'Num': 7, 'START': 'Washington'}] 
```

使用`list comprehension`：

```
In [58]: [x for x in lis if all(y in x.items() for y in search.items())]
Out[58]: [{'END': 'Boston', 'Num': 1, 'START': 'Virginia'}] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T19:44:02.657

如果您要进行多次搜索，并且您知道每对位置只有一个字典，您可以从列表中创建一个字典，如下所示：

```
d = dict(((x['START'], x['END']), x) for x in list_of_dicts) 
```

然后像这样在新的字典中进行查找：

```
found_dict = d[('Virginia', 'Chicago')] 
```

您可以根据`found_dict`需要进行更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T19:25:47.010

如果每个项目都是唯一的，那么您可以这样做：

```
def get_dict(items, start, end):
    for dict in items:
        if dict['START'] == start and dict['END'] == end:
            return dict 
```

进而：

```
>>> items = [
    {"START":"Denver", "END":"Chicago", "Num":0},
    {"START":"Dallas", "END":"Houston", "Num":3},
    {"START":"Virginia", "END":"Boston", "Num":1},
    {"START":"Washington", "END":"Maine", "Num":7}
]
>>> get_dict(items, 'Virginia', 'Boston')
{"START":"Virginia", "END":"Boston", "Num":1} 
```

这很简单，但为了完整起见，我想我会发布它。

# c# - P/Invoke [In, Out] 属性对于编组数组是可选的吗？

> ID：14366066
> 
> 赞同：11
> 
> 时间：2013-01-16T19:19:21.483
> 
> 标签：c#, c++, arrays, attributes, pinvoke

假设有一个具有如下所示纯 C 接口的本机函数，从本机 DLL 导出：

```
// NativeDll.cpp

extern "C" void __stdcall FillArray(
    int fillValue, 
    int count, 
    int* data)
{
    // Assume parameters are OK...

    // Fill the array
    for (int i = 0; i < count; i++)
    {
        data[i] = fillValue;
    }
} 
```

以下 P/Invoke 工作正常（使用 VS2010 SP1 测试）：

```
[DllImport("NativeDll.dll", CallingConvention=CallingConvention.StdCall)]
public static extern void FillArray(
    int fillValue,
    int count,
    [In, Out] int[] data
); 
```

以及这个 P/Invoke，与上面相同，但*没有***`[In, Out]`属性**：

```
[DllImport("NativeDll.dll", CallingConvention=CallingConvention.StdCall)]
public static extern void FillArray(
    int fillValue,
    int count,
    int[] data
); 
```

那么，这些`[In, Out]`属性对于编组数组是**可选的吗？**如果有的话，他们的目的是什么？可以在我们的 P/Invoke 声明中省略它们吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T19:39:43.990

不，它们不是*完全*可选的。它只是偶然地起作用。然而，这是一个非常常见的事故。它之所以有效，是因为数组实际上并没有被封送。pinvoke marshaller 发现 C# 数组已经与本机数组兼容，因此跳过创建它的副本的步骤。它只是固定数组并将指针传递给本机代码。

这当然是非常高效的，并且您将不可避免地得到结果，因为本机代码直接写入数组元素。所以 [In] 和 [Out] 属性都不重要。

如果数组元素类型不是那么简单，它会变得更加模糊。识别不可 blittable 的结构或类类型的元素类型或编组后其布局不匹配的元素类型并不容易，因此 pinvoke 编组*器*必须制作数组的副本。尤其是布局不兼容可能**很难**识别，因为托管布局是不可发现的。并且可以根据使用的抖动进行更改。例如，它可能在x86中工作，例如x64，选择Anycpu时令人讨厌。让它将修改后的副本复制回 C# 数组**确实**需要 [Out]。

不知道该建议什么，除了没有人因为在声明中明确而被解雇。当数组元素类型不简单时，也许你应该总是明确的，这样你就不会发生意外。

# c - 用于计数位集的内核宏

> ID：14366069
> 
> 赞同：2
> 
> 时间：2013-01-16T19:19:32.620
> 
> 标签：c, linux-kernel, bit-manipulation, linux-device-driver, device-driver

是否有一个标准的 Linux 内核位操作宏，它返回 unsigned long 中设置的位数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:23:34.473

您可以使用：

`hweight_long`

作用于`include/linux/bitops.h`

Othwerwise Linux 内核`gcc`与 GNU 扩展一起使用，并且`gcc`还提供了这些内置函数：

> 内置函数： int __builtin_popcount (unsigned int x) 返回 x 中 1 的位数。
> 
> 内置函数：int __builtin_popcountl (unsigned long) 类似于__builtin_popcount，只是参数类型是unsigned long。

[http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:23:46.113

由于您在标签中包含了 C 。您可以使用`C`代码来确定[此处指出的](https://stackoverflow.com/a/2709523/1952879)

[https://stackoverflow.com/a/2709523/1952879](https://stackoverflow.com/a/2709523/1952879)

# opengl-es - glFramebufferTexture2D() 之后 glReadPixels() 的结果

> ID：14366073
> 
> 赞同：3
> 
> 时间：2013-01-16T19:19:46.783
> 
> 标签：opengl-es, opengl-es-2.0, gpgpu

我成功地在我的代码中使用 FBO 作为渲染目标。但是我不清楚当我这样做时我可以期待什么结果：

```
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,
                       GL_TEXTURE_2D, someRgbaTexture, 0);
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, *someRgbaBuffer); 
```

在 OpenGL ES 2.0 中（假设 FBO 是 GL_FRAMEBUFFER_COMPLETE）。

我的目标是获取`someRgbaTexture`. 桌面 OpenGL 具有用于此目的的 glGetTexImage() 函数，但它在 ES 中不存在。

设置`someRgbaTexture`为读取纹理，然后在另一个 FBO 目标中执行屏幕填充纹理四边形，然后回读肯定可以解决问题，但我想避免额外的传递。

因此：调用后帧缓冲区的内容是否等于纹理的内容，`glFramebufferTexture2D()`或者该调用是否意味着任何未来的渲染操作都将针对指定的纹理？
如果是后者：如果我的渲染操作只写入一个像素或什么都不写入会发生什么？对内容的保证是什么`someRgbaTexture`然后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-21T07:54:17.020

这看起来完全合法，并且应该为您提供纹理的内容作为`glReadPixels()`.

在 ES 2.0 规范的第 114 页，在 的解释中`glFramebufferTexture2D()`，描述包括：

> 纹理对象的状态没有改变

这意味着，如果纹理先前具有明确定义的内容，那么它在 之后仍然具有该内容`glFramebufferTexture2D()`。由于它现在是当前帧缓冲区的颜色缓冲区，其内容将被`glReadPixels()`.

# asp.net-mvc - Telerik 远程虚拟化 (Kendo Grid)

> ID：14366081
> 
> 赞同：3
> 
> 时间：2013-01-16T19:20:10.467
> 
> 标签：asp.net-mvc, telerik, telerik-grid, telerik-mvc, kendo-grid

我有一个关于 Telerik 网格在作为无限滚动操作的一部分获取数据后如何在内部存储数据的问题。我正在使用远程虚拟化模式并通过 Ajax 调用获取新记录。

我可以通过以下方式访问当前绑定到网格的数据集：

```
$("#Grid").data().kendoGrid.dataSource.view() 
```

正如预期的那样，网格发出 Ajax 请求以请求新页面，但它似乎将先前页面的数据存储在某个对象中。有没有办法通过cient side API 访问该对象？意思是我可以查看网格请求的所有页面（不仅仅是当前页面）的所有数据吗？

我还注意到，网格在滚动期间通常会发出两次相同的 Ajax 请求（对于相同的页码）。有没有办法防止这种情况，因为重复请求似乎返回与前一个相同的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:28:01.010

所有数据都存储在内部**_ranges**数组中称为“范围”的数据块中。

您可以像这样循环浏览所有加载的数据：

```
var chunks = $('#gridName').data().kendoGrid.dataSource._ranges
for(var i=0;i<chunks.length;i++){
    for(var j=0;j<chunks[i].data.length;j++){
        console.log(chunks[i].data[j])
    }
} 
```

关于多个相同的请求 - 我认为这已得到解决，如果它尚未在**最新的内部版本**中修复，它应该在最近的版本中。

# magento - 是否可以在不加载模型的情况下更新模型？

> ID：14366085
> 
> 赞同：2
> 
> 时间：2013-01-16T19:20:21.070
> 
> 标签：magento

我想在不实际加载整个客户模型的情况下更新客户。这是我当前的代码：

```
$customer = Mage::getModel('customer/customer')->load($customerId, 'entity_id');
$customer->setEmail('test@email.com');
$customer->save(); 
```

是否可以在不先加载模型的情况下更新模型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T19:24:03.690

只要定义了模型的 ID，下面的代码应该可以正常工作，但是它会丢失对象先前的数据。

## 插入

```
$customer = Mage::getModel('customer/customer');
$customer->setEmail('test@email.com');
$customer->save();
// will create a customer with an email set to `test@email.com`
// everything else will either be default or null 
```

## 更新补水

```
$customer = Mage::getModel('customer/customer')->load($customerId, 'entity_id');
// this step is also known as `hydration` because the model is like
// a sponge in the watter, it sucks in the values
$customer->setEmail('test@email.com');
$customer->save();
// will update a customer and only ovewrite its email to `test@email.com`
// everything else will be as it was before the save 
```

## 更新不补水

```
$customer = Mage::getModel('customer/customer');
$customer->setId($customerId);
$customer->setEmail('test@email.com');
$customer->save();
// will replace all of the values present on the initial customer with
// an email set to `test@email.com`and everything else set to be default or null 
```

## 更新单个属性

原理是可以通过指定entity_id、attribute_code/attribute_id和值来设置属性值。

```
/* still looking for a usage snippet */

/* defined in `Mage_Eav_Model_Entity_Abstract` */
protected function _setAttributeValue($object, $valueRow)
{
    $attribute = $this->getAttribute($valueRow['attribute_id']);
    if($attribute) {
        $attributeCode = $attribute->getAttributeCode();
        $object->setData($attributeCode, $valueRow['value']);
        $attribute->getBackend()->setEntityValueId($object, $valueRow['value_id']);
    }

    return $this;
} 
```

这显然没有前面提到的负面影响。

# ios - 如何从框架中查看应用程序构建设置

> ID：14366092
> 
> 赞同：0
> 
> 时间：2013-01-16T19:21:06.363
> 
> 标签：ios, frameworks, build-settings

我已经建立了一个框架来公开它并与其他项目一起使用。它具有内置日志。所以我试图让应用程序开发人员（想要使用我的框架）能够在框架中启用/禁用日志。我考虑的最好方法是他可以将预处理器宏定义添加到应用程序的构建设置中，例如：

```
ENABLE_FRAMEWORK_LOGS = 1 
```

所以我可以做这样的事情：

```
#ifdef ENABLE_FRAMEWORK_LOGS
    NSLog(12345);
#endif 
```

但我有一个问题：我的框架在应用程序的构建设置中没有看到预定义的宏，它只能在框架的构建设置中看到预定义的宏

所以我的问题是：有可能吗？如果不是 - 正确的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:44:17.387

如果您正在发布您的源代码，并且您相信用户只会将您的源代码放入他们的项目中，那么您可以使用预处理器宏，因为您的源代码将在他们构建他们的应用程序时被编译。

但是，如果您将已编译的框架发布给公众，那么您不能使用预处理器宏，因为它们仅在编译时使用。您必须能够允许用户通过对您的框架的 API 调用将其关闭，或者让您的框架能够读取配置文件/plist。

# sql - 删除除一行以外的整个表

> ID：14366093
> 
> 赞同：5
> 
> 时间：2013-01-16T19:21:06.473
> 
> 标签：sql, postgresql, optimization, sql-delete

假设我有一个包含 200k+ 行的表的数据库。
该表有一个 id 为 1800 的固定元组。元组序列的其余部分从 300k+ 开始。
我需要清理这张表，删除所有记录而不删除 id 为 1800 的一个寄存器。我想出了 3 种类型的查询，我可以运行：

```
DELETE FROM table WHERE id > 1800
DELETE FROM table WHERE id <> 1800
DELETE FROM table WHERE id NOT IN (1800) 
```

我感觉第一个比其他更快，但我不确定，因为所有其他数据的 id 都大于 1800。

其中哪一个更快，为什么？另外，如果有一种更快的方法可以删除除无法删除的记录之外的记录，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T19:24:58.103

大多数数据库中最快的方法是：

1.  将id为1800的记录选择到临时表中
2.  删除原始表
3.  将临时表中的数据复制到全表中

诚然，由于触发器、约束和权限，这可能是不可能的。在许多数据库中，您可以通过修改 (2) 来截断表而不是删除它来做类似的事情。

至于您最初的问题，实际删除行和与之关联的数据的开销将主导查询。你如何进行比较无关紧要。

示例代码

```
create temp table saved as
    select * from t where id = 1800

truncate table t

insert into t
    select * from saved 
```

我不确定临时表的 Postgres 命名约定，但这就是想法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T19:25:27.983

只要它们影响相同的记录，它们就会具有相似的性能。

前者使用索引搜索而不是更有效的全表扫描的可能性很小，但可以忽略不计。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T19:36:22.433

如果您无法将 ID 移动到新表中，您可能需要尝试分组或批量删除。有时，处理包含大量记录的事务不是最快的。包含的任何数据库 oracle 和 microsoft 数据库产品都是这种情况。

```
BEGIN TRANSACTION;
DELETE FROM table WHERE id >= 0 and  id < 20000 and id != 1800;
COMMIT TRANSACTION;
BEGIN TRANSACTION;
DELETE FROM table WHERE id >= 20000 and  id < 40000 and id != 1800;
COMMIT TRANSACTION;
etc
etc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-02T19:20:12.903

如果您只想保存最后一条记录并删除所有其他记录，您可以使用以下对我有用的查询

```
delete from public.table_name
WHERE lastrun_ts < (
   select MAX(lastrun_ts)
   FROM public.table_name
   ORDER BY MAX(lastrun_ts) DESC
   ); 
```

# javascript - 将两个 JSON 字符串化值组合到 JSON 对象中

> ID：14366097
> 
> 赞同：0
> 
> 时间：2013-01-16T19:21:12.290
> 
> 标签：javascript, jquery, json

我不确定我的标题是否正确，但我目前有一个可重复的表单，它可以将 JSON 字符串化，另一个正常的输入会将 JSON 字符串化，所以当点击克隆时，第二个输入被克隆，当点击提交时我在控制台中获取以下值是：

```
{"dependant1":[{"name":"daniel"}],"dependant2":[{"name":"allen"}]}
{"mainmember":[{"name":"steve"}]} 
```

我怎样才能将两者结合起来得到：

```
{"mainmember": [{"name": "steve"}],"dependant1": [{"name": "daniel"}],"dependant2": [{"name": "allen"}]} 
```

这是一个 jsFiddle：http: [//jsfiddle.net/dawidvdh/uhJ7w/](http://jsfiddle.net/dawidvdh/uhJ7w/)

和代码：

jQuery：

```
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var input_groups = ["group-1"];
var group;
var name_input_groups = ["name-group-1"];
var values;
var name_fields=[0];
var name_input = "<input class='name' name='name' type='text' />";
jQuery(document).ready(function(e) {
    jQuery(name_fields).each(function() {
        jQuery(name_input).appendTo('#name-group-1');
    });
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        var oldId = g_counter;
        g_counter++;
        var id_newDiv = 'group-'+ g_counter;
        currentdep ='dependant-'+g_counter;
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', 'dependant-'+g_counter);
        var name_newDiv = 'name-group-'+ g_counter;
        $clonedDiv.find('#name-group-1').attr('id',"name-group-" + g_counter );
        $clonedDiv.find('input[type="text"]').val('');
        $clonedDiv.insertAfter("#dependant-" + oldId);
        name_input_groups.push(name_newDiv);
        input_groups.push(id_newDiv);
    }

var result = {};
var dependants;
var mainmember;
var main_result = {};
var dep_counter = 0;
jQuery('#submit').click(function(){
    jQuery('.dependant').each(function(k, v){
        dep_counter++
        dependants = {};
        result['dependant'+dep_counter] = [dependants];
        dependants['name'] = $(v).find('.name').val();
    });
    jQuery('.main-member').each(function(k, v){
        mainmember  = {}
        mainmember['name'] = $(v).find('.main_name').val();
        main_result['mainmember'] = [mainmember];
    });
    var jsonData = JSON.stringify(result);
    var mainData = JSON.stringify(main_result);

    console.log(jsonData);
    console.log(mainData);

    jQuery.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        data: {parameters: jsonData}
    });
});
//submit function
}); 
```

然后是html

```
<div id="main-member" class="main-member">
    <div id="label">full name:</div>                <input class="main_name" />
</div>
<div id="dependant-1" class="dependant">
    <div id="label">full name:</div>            <div id="name-group-1"></div>
</div>
<button id="clone">Add a Dependant</button>
<button id="submit">submit</button> 
```

而且他们必须在那里拥有自己的每个循环才能与其余代码一起工作。

提前致谢 ：）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:28:52.340

只是不要使用两个不同的变量`result`和`main_result`，而只使用一个。

如果您单独需要它们，请将它们的所有属性复制到您正在字符串化的新空对象上。您可以[`jQuery.extend`](http://api.jquery.com/jQuery.extend/)为此使用：

```
var jsonData = JSON.stringify($.extend({}, result, main_result)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:24:12.737

[`jQuery.extend`](http://api.jquery.com/jQuery.extend/)可以做到，

```
var theData = $.extend({}, result, main_result, true);

...
data: { parameters: JSON.stringify(theData) },
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T19:24:21.060

使用[`$.extend`](http://api.jquery.com/jQuery.extend/).

```
var jsonData = JSON.stringify($.extend({}, result, main_result)); 
```

文档：

> **`jQuery.extend( target [, object1 ] [, objectN ] )`**
> 
> **返回**：对象
> 
> **描述**：将两个或多个对象的内容合并到第一个对象中。

* * *

最佳情况下，您应该使用单个对象。

```
var data = {};
jQuery('.dependant').each(function(k, v){
    dep_counter++
    data['dependant' + dep_counter] = [{
      name: $(v).find('.name').val()
    }];
});
jQuery('.main-member').each(function(k, v){
    data['mainmember'] = [{
      name: $(v).find('.main_name').val()
    }];
});
...
jQuery.ajax({
    ...
    data: { parameters: data }
    ...
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T19:25:54.163

我认为您正在寻找 jQuery 的扩展

```
console.log(jsonData);
console.log(mainData);

jQuery.ajax({
    type: "POST",
    url: "mail.php",
    dataType: "json",
    data: {parameters: jQuery.extend(mainData, jsonData)}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T19:28:57.020

无需构建两个单独的对象，只需构建一个

```
 jQuery('.dependant').each(function(k, v){
        dep_counter++
        dependants = {};
        result['dependant'+dep_counter] = [dependants];
        dependants['name'] = $(v).find('.name').val();
    });
    jQuery('.main-member').each(function(k, v){
        mainmember  = {}
        mainmember['name'] = $(v).find('.main_name').val();
        result['mainmember'] = [mainmember];
    }); 
```

[**演示**](http://jsfiddle.net/mowglisanu/uhJ7w/1/)

# django - Django - 到 Tables2 的字典列表

> ID：14366098
> 
> 赞同：2
> 
> 时间：2013-01-16T19:21:22.337
> 
> 标签：django, list, dictionary, django-tables2

恐怕我是 Django 的新手。

我有一个字典列表，我想用它来填充[Tables2](http://django-tables2.readthedocs.org/en/latest/#populating-a-table-with-data)表。我不知道如何调整字典列表以在 Table2 中工作 :( 该网站建议：

```
import django_tables2 as tables

data = [
    {"name": "Bradley"},
    {"name": "Stevie"},
]

class NameTable(tables.Table):
    name = tables.Column()

table = NameTable(data) 
```

我想不通！此外，我将使用此视图处理许多不同的数据集，因此我的键将更改视图。

这是字典列表的示例（请注意，以下两个字典具有相同的键；这总是在每个视图中发生；只是在不同的视图中会有不同的键集）：

```
[{'trial2_click': u'left', 'timeStored': datetime.time(13, 35, 5), 'runOnWhatHardware': u'bla', 'id': 1L, 'timeStart': datetime.datetime(2012, 11, 2, 12, 54, 58, tzinfo=<UTC>), 'trial1_RT': 234.1, 'approxDurationInSeconds': 123L, 'timeZone': u'UTC', 'expt_id': 2L, 'trial1_click': u'right', 'trial2_RT': 2340L}, {'trial2_click': u'left', 'timeStored': datetime.time(13, 39, 15), 'runOnWhatHardware': u'bla', 'id': 2L, 'timeStart': datetime.datetime(2012, 11, 2, 12, 54, 58, tzinfo=<UTC>), 'trial1_RT': 234.1, 'approxDurationInSeconds': 123L, 'timeZone': u'UTC', 'expt_id': 2L, 'trial1_click': u'right', 'trial2_RT': 2340L}, {'trial2_click': u'left', 'timeStored': datetime.time(15, 32, 59), 'runOnWhatHardware': u'bla', 'id': 3L, 'timeStart': datetime.datetime(2012, 11, 2, 12, 54, 58, tzinfo=<UTC>), 'trial1_RT': 234.1, 'approxDurationInSeconds': 123L, 'timeZone': u'UTC', 'expt_id': 4L, 'trial1_click': u'right', 'trial2_RT': 2340L}] 
```

非常感谢任何人的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:37:20.987

解决我自己的问题，我在[这里](http://dynamic-models.readthedocs.org/en/latest/topics/model.html#topics-model)找到了一种在运行时动态创建类的方法：

> 定义动态模型工厂 允许我们创建动态类的基本原则是内置函数 type()。而不是在 Python 中定义类的常规语法：
> 
> class Person(object): name = "Julia" type() 函数可用于创建相同的类，以下是使用内置 type() 的类的外观：
> 
> Person = type("Person", (object,), {'name': "Julia"}) 使用 type() 意味着您可以以编程方式确定组成类的属性的数量和名称。

和我的工作代码：

```
 def getTable(table_name):
    cursor = connection.cursor()
    try:
        cursor.execute("""SELECT * FROM %s,%s;""" %(table_name,'subscription_exptinfo')) # want autoincrement key?
        exptData = dictfetchall(cursor)
    except Exception, e:
        ''      

    attrs = {}
    cols=exptData[0]

    for item in cols:
        attrs[str(item)] = tables.Column()

    myTable = type('myTable', (tables.Table,), attrs)        

    return myTable(exptData)

def dictfetchall(cursor):
    "Returns all rows from a cursor as a dict"
    desc = cursor.description
    return [
        dict(zip([col[0] for col in desc], row))
        for row in cursor.fetchall()
    ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:20:58.333

`Table`为要显示的每种类型的表创建一个子类。按*类型*我的意思是*set-of-columns*。例如：

```
import datetime
import django_tables2 as tables

[
    {'trial2_click': u'left', 'timeStored': datetime.time(13, 35, 5), 'runOnWhatHardware': u'bla', 'id': 1L, 'timeStart': datetime.datetime(2012, 11, 2, 12, 54, 58), 'trial1_RT': 234.1, 'approxDurationInSeconds': 123L, 'timeZone': u'UTC', 'expt_id': 2L, 'trial1_click': u'right', 'trial2_RT': 2340L},
    {'trial2_click': u'left', 'timeStored': datetime.time(13, 39, 15), 'runOnWhatHardware': u'bla', 'id': 2L, 'timeStart': datetime.datetime(2012, 11, 2, 12, 54, 58), 'trial1_RT': 234.1, 'approxDurationInSeconds': 123L, 'timeZone': u'UTC', 'expt_id': 2L, 'trial1_click': u'right', 'trial2_RT': 2340L},
    {'trial2_click': u'left', 'timeStored': datetime.time(15, 32, 59), 'runOnWhatHardware': u'bla', 'id': 3L, 'timeStart': datetime.datetime(2012, 11, 2, 12, 54, 58), 'trial1_RT': 234.1, 'approxDurationInSeconds': 123L, 'timeZone': u'UTC', 'expt_id': 4L, 'trial1_click': u'right', 'trial2_RT': 2340L}
]

class TrialTable(tables.Table):
    trial2_click = tables.Column()
    timeStored = tables.TimeColumn()
    runOnWhatHardware = tables.Column()
    timeStart = tables.DateTimeColumn()
    trial1_RT = tables.Column()
    approxDurationInSeconds = tables.Column()
    timeZone = tables.Column()
    expt_id = tables.Column()
    trial1_click = tables.Column()
    trial2_RT = tables.Column() 
```

# c++ - 加快 Boyer-Moore-Horspool 字符串搜索的实现

> ID：14366119
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:22:56.157
> 
> 标签：c++, algorithm, implementation, string-search, boyer-moore

我在 C++ 中实现 BMH 算法时遇到了一些麻烦。

这是代码：

```
#define Nm 2000005
int D[256];
char To[Nm],P[Nm],*T;
int Tl,Pl;
int cont;
void initialize_Lenght()
{
    Tl=strlen(To);
    Pl=strlen(P);
    T=To;
}
void compute_D()
{
    for(int i=0;i<256;i++)
        D[i]=Pl;
    for(int i=0;i<Pl;i++)
        D[P[i]]=Pl-i;
}
void Boyer_Moore()
{
    int i;

    while ( Tl>=Pl )    
    {
        for(i=Pl-1;T[i]==P[i]&&i>=0;i--)
            if(i==0)
            {
                if(cont<1000)
                    v[cont]=(T-To); // I also have to store the first 1000 values 
                cont++;
            }
            Tl -= D[T[i+1]];
            T += D[T[i+1]];
    }
} 
```

它适用于大多数示例，但有一些示例不起作用（到目前为止，我发现只有从不同来源下载的大量测试）。

我想知道我在哪里/做错了什么（我真的不想要代码）。

**编辑：**由于评论

您知道如何在不实现完整的 Boyer-Moore 版本的情况下使该算法运行得更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:39:47.317

测试顺序

```
for(i=Pl-1;T[i]==P[i]&&i>=0;i--) 
```

是错的。完全匹配后，您在检查索引是否可接受之前`T[-1]`进行比较。`P[-1]`

如果最后一个模式字符出现不匹配，

```
Tl -= D[T[i+1]];
T += D[T[i+1]]; 
```

根据不需要存在的字符跳过（如果模式结尾与文本结尾对齐）。

# arrays - 在 Ruby 中对组合进行排序

> ID：14366126
> 
> 赞同：4
> 
> 时间：2013-01-16T19:23:14.643
> 
> 标签：arrays, ruby, sorting, combinations

我正在尝试根据球队的 id 创建一个赛季的赛程表。有20支球队，每周，任何一支球队只能打一场。因此，对于第一周，固定装置将是 (1, 2), (3, 4), (5, 6), ..., (19, 20)。然后是第二周，(1, 3), (2, 4), (5, 7), ..., (18, 20)。

是否有某种公式可以让我轻松解决固定装置？也许组合不是在这里使用的最佳选择。解决这个问题的最佳方法是什么？

```
class FixtutreGenerator
   a = Array(1..20)
   i = 0

  while i < a.combination(2).to_a.length
    print a.combination(2).to_a[i]
    i = i + 20
 end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T20:55:36.700

听起来您正在尝试在循环赛中安排球队。维基百科描述了一种您可以使用的算法 - 请参阅[http://en.wikipedia.org/wiki/Round-robin_tournament#Scheduling_algorithm](http://en.wikipedia.org/wiki/Round-robin_tournament#Scheduling_algorithm)。

下面实现了打印每周配对的算法：

```
teams = Array(1..20)
fixed_team = teams.shift   #The fixed competitor described in the algorithm
teams.length.times do |i|

    #Create the two groups listed in the algorithm
    teams = teams.rotate
    week_teams = teams.dup.unshift(fixed_team) 
    first_group, second_group = week_teams.each_slice(week_teams.length/2).to_a
    second_group.reverse!
    weeks_pairings = first_group.zip(second_group)

    #Output the week's pairings
    puts "Week #{i + 1}: #{weeks_pairings}"
end 

#Output:
#=> Week 1: [[1, 2], [3, 20], [4, 19], [5, 18], [6, 17], [7, 16], [8, 15], [9, 14], [10, 13], [11, 12]]
#=> Week 2: [[1, 3], [4, 2], [5, 20], [6, 19], [7, 18], [8, 17], [9, 16], [10, 15], [11, 14], [12, 13]]
#=> etc 
```

# javascript - 试图弄清楚如何在 Chrome 中解析 IE 的 document.frames["someframe"].function

> ID：14366127
> 
> 赞同：1
> 
> 时间：2013-01-16T19:23:23.977
> 
> 标签：javascript, jquery, internet-explorer, google-chrome

我有一些适用于 IE 的代码。

```
try{
   top.document.frames["myFrame"].compare();
}catch(err){
   alert("This is not executed.");
} 
```

这在 Chrome 中不起作用。我应该如何解决？我在想你可以做一些事情，比如

```
top.document.frames["myFrame"].compare() || /*google chrome variant*/ ; 
```

谢谢帮！:)

哦，我正在做的是选择框架“myFrame”并在所述框架内执行一个功能。

编辑：添加 jQuery 作为标签，因为可能也有办法做到这一点

**编辑：** -我的示例中捕获的错误是：

```
TypeError:  Cannot read property of "myFrame" of undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:50:11.523

执行此操作的标准方法是：

```
window.frames["yourFrame"].yourFunction(); 
```

# chromium - 强烈命名/签署 Berkelium-Sharp 组件

> ID：14366139
> 
> 赞同：0
> 
> 时间：2013-01-16T19:23:45.460
> 
> 标签：chromium, strongname, assembly-signing, berkelium

我需要使用签名代码中的 Berkelium-Sharp。有谁知道我可以在哪里下载一个强命名的程序集？

有没有人正在阅读这个目前正在成功编译 Berkelium-Sharp 并且可以为我编译一个强命名的 dll。

我知道我可以自己做，但编译它似乎需要完整的 Chomium 源代码，我不确定我是否还需要编译所有这些，以及 Berkelium 本身。这是一个我宁愿不继续的线程，因为我可以看到日子正在瓦解。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:22:51.763

berkelium-sharp 构建说明说明您可以使用预构建的二进制 Berkelium SDK：[http](http://code.google.com/p/berkelium-sharp/source/browse/trunk/BUILDING.txt) ://code.google.com/p/berkelium-sharp/source/browse/trunk/BUILDING.txt 。所以你不需要构建所有的 Chromium，甚至不需要构建 Berkelium。您只需要修改 berkelium-sharp Visual Studio 项目以生成强名称程序集（提供适当的签名设置，例如私钥）并构建 berkelium-sharp。这是可行的，因为 berkelium-sharp 只提供了封装/替换本地 C++ 类并可以与本地版本交互的托管类。

# javascript - 从子窗口获取值的问题

> ID：14366142
> 
> 赞同：1
> 
> 时间：2013-01-16T19:24:00.990
> 
> 标签：javascript, asp.net-mvc

我关闭了一个花哨的盒子，想用我从花哨控制器获得的参数重定向到其他页面。但是当我关闭花哨的盒子时，它说我不能使用这些参数值错误是：CS0103：名称“CID”不存在于当前背景

这是我的代码

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var CSec = @Html.Raw(Json.Encode(TempData["Clientseckey"]));
        var CID =  @Html.Raw(Json.Encode(TempData["ClientID"]));
        parent.closeFancybox(); 
        var csec1 =  @Html.Raw(Json.Encode(TempData["Clientseckey"]));
        var url = '@Url.Action("NewAPIForm", "Developer", new { clientID = CID }, new { clientkey = CSec1  })';
        parent.location.href = url;
    });

</script> 
```

CS0103：当前上下文中不存在名称“CID”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:30:33.047

您遇到的范围问题是因为`CID`您尝试将其用作服务器端变量的 javascript 变量。

所以不要`new {clientId = CID}`尝试`new { clientId = Html.Raw(Json.Encode(TempDate["Clientseckey"]))}`

或者将 CID 放在服务器端变量中：

```
@{
  var CID2 = Html.Raw(Json.Encode(TempDate["Clientseckey"]));
} 
```

（我称它为 CID2 以便在下面更容易发现差异）然后在 JS 中你可以做

```
<script type="text/javascript">
    $(document).ready(function () {
        var CSec = @Html.Raw(Json.Encode(TempData["Clientseckey"]));
        var CID =  @CID2;
        parent.closeFancybox(); 
        var csec1 =  @Html.Raw(Json.Encode(TempData["Clientseckey"]));
        var url = '@Url.Action("NewAPIForm", "Developer", new { clientID = CID2 }, new { clientkey = CSec1  })';
        parent.location.href = url;
    });
</script> 
```

# jquery-ui - 禁用和启用 jquery UI droppable 不起作用

> ID：14366148
> 
> 赞同：1
> 
> 时间：2013-01-16T19:24:14.250
> 
> 标签：jquery-ui, droppable

我正在尝试制作一个 div，当它包含一个可放置元素时，您将无法在其上放置另一个元素，但是当可拖动元素被删除时 - 你可以。我用

```
$("#trash").droppable({
    out: function() {
        $( this ).droppable( "option", "disabled", false );
    },
    drop: function( event, ui ) {
        $( this ).droppable( "option", "disabled", true );
    }
}); 
```

但是`#trash`在我将 droppable 移出后它仍然被禁用，我不明白为什么。 [http://jsfiddle.net/vMQVy/38/](http://jsfiddle.net/vMQVy/38/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:52:00.770

进行以下更改`$("#items").droppable()`：

```
$("#items").droppable({
        drop: function( event, ui ) {
            $("#trash").droppable( "option", "disabled", false );
        }
}); 
```

演示：http: [//jsfiddle.net/vMQVy/40/](http://jsfiddle.net/vMQVy/40/)

希望这会有所帮助，如果您有任何问题，请告诉我！

# ios - 从中心 UIImageView 缩放

> ID：14366151
> 
> 赞同：1
> 
> 时间：2013-01-16T19:24:21.597
> 
> 标签：ios, uiimageview, scaling

所以我一直在寻找这个解决方案，并没有看到任何我正在寻找的东西。这个问题似乎是正确的想法，但答案不起作用：[Here](https://stackoverflow.com/questions/5716971)。我觉得有一个我找不到的超级简单的答案。

无论如何，我有一个 UIImageView 并且当我尝试使用

```
[UIView animateWithDuration:0.5
                 animations:^
         {
             uv.transform = CGAffineTransformMakeScale(1.1,1.1);
         }
                 completion:^(BOOL finished)
         {
             [UIView animateWithDuration:0.5
                              animations:^
                              {
                                  uv.transform = CGAffineTransformMakeScale(1.0,1.0);
                              }];
         }
]; 
```

图像从左上角缩放（即向下和向右延伸）。我希望它向各个方向延伸，而不仅仅是两个方向。我认为这与`bounds`,`center`或其他一些`UIImageView`特征有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:27:18.500

在动画之前和动画中设置 view.center。

# .net - 删除列表视图中的项目

> ID：14366153
> 
> 赞同：0
> 
> 时间：2013-01-16T19:24:25.567
> 
> 标签：.net, vb.net, listview, listviewitem

这似乎很容易，但我现在对此有疑问。

我想要做的是在列表视图的第二列中查找特定条目，然后如果找到该特定条目，则删除找到该条目的行。

这是我的代码：

```
 Dim lvSubItems As ListViewItem.ListViewSubItem

      For Each lvSubItems In lvConnectedClients.Items(lvConnectedClients.Items.Count - 1).SubItems

            If lvSubItems.Text = CType(clientSocket.Client.RemoteEndPoint, IPEndPoint).Address.ToString Then

                  ' This is not the correct way.
                  lvConnectedClients.Items.Remove(lvSubItems)

            End If

      Next 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:16:47.437

我认为你在正确的轨道上，下面对我有用（添加“作为 ListViewItem”）。让我知道。

```
For Each li As ListViewItem In ListView1.Items

        If li.Text = "test 7" Then

        ListView1.Items.Remove(li)

        End If

Next 
```

我创建项目的代码：

```
Dim i As Integer = 0

    For i = 0 To 9

        Dim li As New ListViewItem("test " & i)

        ListView1.Items.Add(li)

    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:25:16.843

```
 For Each lvSubItems As Object In ListView1.Items
            If lvSubItems.Text = "test" Then
                ListView1.Items.Remove(lvSubItems)
            End If
 Next 
```

或者

```
For Each lvSubItems As ListViewItem In ListView1.Items

        If lvSubItems.SubItems(1).Text = "1" Then
            ListView1.Items.Remove(lvSubItems)
        End If
    Next
End Sub 
```

# dependency-injection - 如何让 ninject 基于工厂参数-> 命名空间路径进行绑定？

> ID：14366154
> 
> 赞同：1
> 
> 时间：2013-01-16T19:24:28.887
> 
> 标签：dependency-injection, inversion-of-control, ninject, ninject-extensions

我正在使用来自 NuGet 的 Ninject 3.0.1.10 和 ninject.extensions.factory 3.0.1.0 - 在“真实”场景中，我也将使用 ninject.extensions.conventions（而不是手动绑定 IFoo），但我想将其排除在外以尝试简化问题。

我有一个 IFoo 接口和它的多个实现，每个实现都在一个子命名空间和名为 Gen1 和 Gen2 的子文件夹下。我有一个 IFooFactory 接口，其目的是它根据指定的参数（字符串、枚举等）返回一个 IFoo。

我在这个例子中使用枚举只是为了让它更清楚 - 我最初制作了一个字符串版本，但感觉像传递一个更任意的参数（如字符串）的反对意见只会混淆这个问题。

```
public enum ImplementationGeneration
{
    Gen1,
    Gen2,
    Gen3,
}

public interface IFoo
{
    void DoStuff();
}

public interface IFooFactory
{
    IFoo CreateFoo(ImplementationGeneration implementationGeneration);
}

namespace SomeRootNamespace.Gen1
{
    public class Foo : IFoo
    {
        public void DoStuff()
        {
            Console.WriteLine("Doing Type1 stuff");
        }
    }
}

namespace SomeRootNamespace.Gen2
{
    public class Foo : IFoo
    {
        public void DoStuff()
        {
            Console.WriteLine("Doing Type2 stuff");
        }
    }
} 
```

现在，我知道让消费者“选择”这样的实现是一种理想情况下不存在的耦合形式，但恕我直言，它与 Ninject 已经支持的命名绑定具有相同级别的耦合。我想避免将属性添加到实现中，并且在工厂接口中使用 GetGen1 / GetGen2 / etc 方法非常适合这一点，因为我最终会通过某个开关将输入映射到要调用的方法来违反 OCP （或手动使用反射）

如果可能的话，我现在宁愿避免的完整/工作代码在这里：[https ://gist.github.com/4549677](https://gist.github.com/4549677)

它使用两种方法：

1.  手动工厂实现违反了 OCP 并通过了 enum 上的开关
2.  使用带有 IInstanceProvider 实例的工厂扩展（子类 StandardInstanceProvider 以覆盖 GetInstance）。

第二种方法似乎“接近”让这个工作的“正确方法”，但是 1）它保持对内核的引用以完成它的工作，这可能是一个坏主意，并且 2）因为在调用期间搜索所有 IFoo 绑定时，我在 IFoo 绑定中找不到具体类型，它当前执行 GetAll，因此它实例化的实例比此场景所需的实例多 N-1 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:08:15.920

好吧，我发现至少比上面的更好。

毕竟它使用命名绑定，[ninject.extensions.conventions](https://github.com/ninject/ninject.extensions.conventions)用于根据名称空间的最后部分命名所有绑定。这最终会将名称附加到许多不需要它的绑定（对于给定接口只有一个实现可用的绑定），尽管将名称附加到这些绑定不会导致它们的使用出现任何问题（至少在我的测试中） ）。

如果由于某种原因这对于将来遇到此问题的人来说是一个问题，您可以在通过约定设置绑定的代码中更具体 - 例如，如果最后一个命名空间部分位于特定的集合或匹配特定的模式。

```
kernel.Bind(x => x
    .FromThisAssembly()
    .SelectAllClasses()
    .BindAllInterfaces()
    .Configure((binding, concreteType) =>
    {
        var concreteNamespace = concreteType.Namespace ?? String.Empty;
        var lastNamespacePart = concreteNamespace.Split('.').Last();
        binding.Named(lastNamespacePart);
    })
); 
```

然后它使用[UseFirstArgumentAsNameInstanceProvider](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface%3a-Referencing-Named-Bindings)根据工厂方法的第一个参数查找绑定名称（因此您不必为 GetGen1、GetGen2 等设置单独的方法）。我只是将 GetName 覆盖更改为 ToString，因为我传递的是枚举而不是实际的字符串，但除此之外它与链接的 wiki 页面中的相同。

```
public class UseFirstArgumentAsNameInstanceProvider : StandardInstanceProvider
{
    protected override string GetName(System.Reflection.MethodInfo methodInfo, object[] arguments)
    {
        return arguments[0].ToString();
    }

    protected override ConstructorArgument[] GetConstructorArguments(System.Reflection.MethodInfo methodInfo, object[] arguments)
    {
        return base.GetConstructorArguments(methodInfo, arguments).Skip(1).ToArray();
    }
} 
```

我将暂时搁置这个问题，以防万一有不同/更好的选择可用，但至少这看起来是合理的并且没有任何明显的[OCP](http://en.wikipedia.org/wiki/Open/closed_principle)问题。:)

# firefox - 如果画布大于 255x220，为什么 FPS 会下降？

> ID：14366155
> 
> 赞同：3
> 
> 时间：2013-01-16T19:24:29.890
> 
> 标签：firefox, html5-canvas

我发现 HTML5 画布有一个奇怪的现象。我的帧速率低于预期，但仅在 Firefox 中，并且仅在一台计算机上（但不是在我测试的另一台计算机上）。奇怪的是，如果我将画布尺寸减小到 255x250 或更小，Firefox 的性能与其他浏览器相似。如果我在宽度上再增加一个像素，FPS 会迅速下降到三分之一。

我制作了一个 jsPerf 来演示这个问题： http: [//jsperf.com/critical-canvas-size](http://jsperf.com/critical-canvas-size) （确保灰色矩形在屏幕上。如果没有，我让测试失败，因为我发现它改变了结果如果您不小心滚动离开。）

所有四个测试用例都与大多数系统上的大多数浏览器非常相似，但在这台装有 Firefox 17 的 PC 上，我看到以下内容：

![在此处输入图像描述](../Images/0932d72fc4d3d5b32ee4b28f08190ed7.png)

有问题的 PC 运行的是较旧的 Red Hat Linux，我猜它可能没有硬件加速支持（从操作系统方面）。

那么，这可能是什么原因呢？我可以在我的代码中做些什么来规避这个问题吗？（例如，我一直在考虑使用几张小画布而不是一张大画布。）

* * *

编辑：这是一个独立的 html 文件[，它存在问题](https://dl-web.dropbox.com/get/Public/web/jsfiddle/tiles_test_251.html?w=AABbwN00-D_gbHnd4yXxukqbPzumtbAf671CufK4Bw8L7A)，而[一个不存在](https://dl-web.dropbox.com/get/Public/web/jsfiddle/tiles_test_250.html?w=AADveBbhaESeH49N7j3NRlHsilRA8LDX-yIYBKtPJMuMLw)。唯一的区别是画布的宽度，251 vs. 250。（你可以注释掉微调器动画，这只是为了让问题可见。另外请原谅FPS计时器的准确性，它的实现很简单。）

250px 版本获得大约 60 FPS，实际上它似乎被封顶了。您可以增加`numIterations`变量以使框架函数绘制多个图块。我可以达到 numIterations = 100 或 120000 块/秒，同时仍然具有不错的帧速率。然而，即使 numIterations = 1，251px 版本也给了我低于 20 或低于 1000 块/秒的帧速率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T20:19:09.057

我实际上看到了类似的行为。我相信这是当您越过 65776 像素障碍时 -> 而不是您所期望的 65536。

我还不知道*为什么*会这样，但它可能是浏览器内部的某种内部数据结构或数据类型问题（可能它使用散列并且需要在那时增长表）。你的测试在我的 chrome 浏览器上实际上是无效的——它没有表​​现出同样的性能下降。

我写了一些测试用例 [http://jsperf.com/pixel-count-matters/2](http://jsperf.com/pixel-count-matters/2) 和 [http://jsperf.com/magic-canvas/2](http://jsperf.com/magic-canvas/2)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:27:19.987

这是有道理的，因为绘制到画布和清除画布是昂贵的方法；如果您有一个较小的画布并`clearRect`在每个动画步骤中调用它，那么它将比运行完全相同代码的较大画布执行得更好。最好的办法是优化你的绘制方法*，只清除每一帧的变化*。一旦你这样做了，你会注意到性能提升；[本文](http://www.html5rocks.com/en/tutorials/canvas/performance/)将帮助您提高性能的其他领域。

我也在使用画布进行开发，发现在大多数情况下，基于 WebKit 的浏览器通常比 Gecko 更快地处理画布操作。

# css - Font Awesome 不起作用，图标显示为正方形

> ID：14366158
> 
> 赞同：253
> 
> 时间：2013-01-16T19:24:38.697
> 
> 标签：css, html, twitter-bootstrap, font-awesome

所以我正在尝试制作一个营销页面的原型，我正在使用 Bootstrap 和新的 Font Awesome 文件。问题是当我尝试使用图标时，页面上呈现的所有内容都是一个大正方形。

这是我在头部包含文件的方式：

```
<head>
        <title>Page Title</title>
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/bootstrap-responsive.css">
        <link rel="stylesheet" href="css/font-awesome.css">
        <link rel="stylesheet" href="css/app.css">
        <!--[if IE 7]>
            <link rel="stylesheet" href="css/font-awesome-ie7.min.css">
        <![endif]-->
</head> 
```

这是我尝试使用图标的示例：

```
<i class="icon-camera-retro"></i> 
```

但是所有这些都呈现在一个大正方形中。有谁知道会发生什么？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2014-02-16T20:19:01.607

您必须有 2 个类，`fa`该类和标识所需图标的类`fa-twitter`、`fa-search`等……

```
<!-- Wrong -->
<i class="fa-search"></i>    

<!-- Correct -->
<i class="fa fa-search"></i> 
```

* * *

## 回答 #2

> 赞同：156
> 
> 时间：2013-01-16T19:29:50.200

根据[文档](http://fortawesome.github.com/Font-Awesome/#integration)（第 3 步），您需要修改提供的 CSS 文件以指向您网站上的字体位置。

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2014-09-17T09:21:35.983

用这个

```
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"> 
```

我在使用 Amazon Cloudfront CDN 时遇到了类似的问题，但在我开始从 maxcdn 加载它后它得到了解决

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2014-06-12T17:56:29.970

**检查以确保您没有无意中更改**图标上的字体系列。如果您已将 .fa 项目的字体系列更改为：FontAwesome，则该图标将不会显示。它总是愚蠢而渺小的。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-01-16T19:35:32.770

如果您使用的是 LESS 或 SASS，请打开 font-awesome.less/sass 文件并编辑`@fa-font-path: "../font";`指向实际字体的路径变量：

```
@fa-font-path: "../font";

@font-face {
  font-family: 'FontAwesome';
  src: url('@{fa-font-path}/fontawesome-webfont.eot?v=3.0.1');
  src: url('@{fa-font-path}/fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-opentype'),
    url('@{fa-font-path}/fontawesome-webfont.woff?v=3.0.1') format('woff'),
    url('@{fa-font-path}/fontawesome-webfont.ttf?v=3.0.1') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

与 CSS 相同，除了您在 @font-face 声明块中编辑路径：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('your/path/fontawesome-webfont.eot?v=3.0.1');
  src: url('your/path/fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-opentype'),
    url('your/path/fontawesome-webfont.woff?v=3.0.1') format('woff'),
    url('your/path/fontawesome-webfont.ttf?v=3.0.1') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2015-11-25T14:53:25.137

打开你的 font-awesome.css 有如下代码：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('../fonts/fontawesome-webfont.eot?v=4.5.0');
  src: url('../fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'), url('../fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'), url('../fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'), url('../fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'), url('../fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

你必须有这样的文件夹：

```
font awesome -> css
             -> fonts 
```

或最简单的方法：

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2015-05-07T10:19:10.043

我正在使用[这里](https://stackoverflow.com/a/24923640/2218697)提到的**maxcdn 作品**`Font Awesome 4.3.0`的链接，

 **但是**在您的服务器中托管**将字体和 CSS 放在同一个文件夹中对我有用，就像这样

![在此处输入图像描述](../Images/1198f66b331aeb1d5c2a283ec863417f.png)

然后只需链接CSS：

```
<link href="~/fonts/font-awesome.min.css" rel="stylesheet" /> 
```

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2018-05-02T10:34:58.807

你必须有2个班级，`fas`班级和`fa-*`班级。请参阅文档中的[基本使用：](https://fontawesome.com/how-to-use/on-the-web/referencing-icons/basic-use)

> 该`fa`前缀在版本 5 中已被弃用。新的默认值是`fas`纯色样式和`fab`品牌样式。

```
// Correct (version >= 5)
<i class="fas fa-search"></i>    

// Wrong (version < 5)
<i class="fa fa-search"></i> 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2015-04-08T07:23:00.820

我试图用以前的一些解决方案来解决同样的问题，但它们在我的情况下不起作用。最后，我在 HEAD 中添加了这两行，它起作用了：

```
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<link rel="stylesheet" href="http://fortawesome.github.io/Font-Awesome/assets/font-awesome/css/font-awesome.css"> 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2019-11-15T02:36:55.850

如果您使用的是 5.* 或更高版本，那么您必须使用

> all.css 或 all.min.css

包含 fontawesome.css 不起作用，因为它没有引用**webfonts**文件夹，也没有引用 @font-face 或 font-family

您可以通过在 fontawesome.css 或 fontawesome.min.css 中搜索 font-family 属性的代码来检查这一点

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2018-08-06T09:32:49.267

我遇到了这个问题并仔细完成了每一步......即使我已经使用 FA 很长时间了......然后我意识到我的邮件 css 文件中有这一行：

```
* {
font-family: Arial !important;
} 
```

愚蠢的错误，但这可能会在未来提示某人！

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2015-04-21T19:11:42.467

我有这个问题。问题是我有一个字体系列 CSS 样式，其中 !important 覆盖了 fontawesome 字体。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2013-03-25T09:37:36.620

如果您正在使用**Maven**和**Apache Wicket**，还请检查以下内容，以尝试解决 Font-Awesome 和未加载图标的问题：

例如，如果您将文件放置在以下文件结构中

```
/src
 /main
  /java
   /your
    /package
     /css
      font-awesome.css
     /font
      fontawesome-webfont.eot
      fontawesome-webfont.svg
      fontawesome-webfont.svgz
      fontawesome-webfont.ttf
      fontawesome-webfont.woff 
```

**检查 1)**您是否正确使用了 Package Resource Guard 以允许正确加载字体文件？

您的类中扩展 WebApplication 的示例：

```
@Override
public void init() {
    super.init();   
    get().getResourceSettings().setPackageResourceGuard(new PackageResourceGuard());

} 
```

**检查 2)**在确保所有字体都正确传输到 Web 浏览器后，检查实际传输到 Web 浏览器的内容，即字体文件的完整性是否发生了变化？使用例如 Firefox 和 DiffDog 的 Web Developer Toolbar（用于文件比较）比较源目录中的文件和传输到 Web 浏览器的文件。

特别是如果您使用 Maven，请注意资源过滤。不要过滤包含 /font 文件的文件夹 - 否则它们将被损坏。

pom.xml 中的示例

```
<build>
    <finalName>Your project</finalName>
    <resources>
        <resource>
            <filtering>true</filtering>
            <directory>src/main/resources</directory>
        </resource>
        <resource>
            <filtering>false</filtering>
            <directory>src/main/java</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>
</build> 
```

在上面的示例中，我们没有过滤包含 css 和字体文件的文件夹 src/main/java。

有关过滤二进制数据的更多信息，另请参阅文档：

[http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)

特别是文档警告：“*警告：*不要过滤具有二进制内容的文件，如图像！这很可能会导致输出损坏。如果您同时拥有文本文件和二进制文件作为资源，则需要声明两个互斥的资源集。第一个资源集定义要过滤的文件，而另一个资源集定义要复制的文件不变..."

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2018-12-27T19:02:19.473

截至 2018 年 12 月，我发现使用 bootstrapcdn 上托管的稳定版本 4.7.0 而不是[他们网站上的 font-awesome 5.xx cdn](https://fontawesome.com/start)更容易——因为每次他们升级次要版本时，以前的版本都会中断。

```
<link media="all" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
```

图标是一样的：

```
<i class="fa fa-facebook"></i> 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2019-05-03T22:43:21.383

`font-weight: 900;`

我对 Font Awesome 5 有一个不同的问题。对于 FontAwesome 图标，默认字体粗细应该是 900，但对于 span 和 i 标签，我将它改写为 400。当我纠正它时，它就起作用了。

这是他们的 Github 页面中的问题参考，[https://github.com/FortAwesome/Font-Awesome/issues/11946](https://github.com/FortAwesome/Font-Awesome/issues/11946)

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2013-01-18T01:32:17.947

这在新版本 3.0 中应该会简单得多。最简单的方法是指向 Bootstrap CDN：[http ://www.bootstrapcdn.com/?v=01042013155511#tab_fontawesome](http://www.bootstrapcdn.com/?v=01042013155511#tab_fontawesome)

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2015-07-28T14:50:49.897

您必须将标题**Access-Control-Allow-Origin**返回到*****用于您的字体文件

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-05-23T08:21:26.250

如果您的服务器是 IIS，请务必添加正确的 MIME 以提供 .woff 文件扩展名。正确的 MIME 是`application/octet-stream`

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-09-04T08:37:58.967

在努力寻找解决方案并且没有找到有用的官方文档之后，这为我解决了这个问题：

1.  下载 Fontawesome.zip。我正在使用版本 5.10.2，我从这里得到它[https://fontawesome.com/download](https://fontawesome.com/download)
2.  zip文件里面有几个文件夹。你只需要css和webfonts文件夹 [![在此处输入图像描述](../Images/eeefcbb87fc12b1cf4fede9ba32a5917.png)](https://i.stack.imgur.com/KCVGU.png)

    3.  在您的 web 项目中创建 2 个文件夹，并将它们命名为 css 和 webfonts。 [![在此处输入图像描述](../Images/45b9088b845b4c83ca0247efb4f36b0f.png)](https://i.stack.imgur.com/j0GRA.png)

这些名称是强制性的。现在将 css 和 webfonts 的内容从 zip 复制到项目中的相应文件夹中。就这样！

小心字体太棒了！令人敬畏的是让用户的事情变得简单！

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2019-11-09T21:42:58.533

我在使用 yarn 下载 font awesome 5 时遇到了同样的问题，我添加了 min.css 文件**和**all.js 文件。

希望这可以帮助某人

```
<link  rel="stylesheet"   href="node_modules/@fortawesome/fontawesome-free/css/fontawesome.min.css">
<script src="node_modules/@fortawesome/fontawesome-free/js/all.js" charset="utf-8"></script> 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-09-21T08:42:48.150

您的字体路径可能不正确，因此 css 无法加载字体并渲染图标，因此您需要提供附加字体的搁浅路径。

```
@font-face { 
font-family: "FontAwesome";
src: url("fonts/fontawesome-webfont.eot");
} 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-09-21T08:48:51.077

使用这个`<i class="fa fa-camera-retro" ></i>`你还没有定义 fa 类

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-08-13T19:29:31.610

从版本 5 开始，如果您从该站点下载了包：

[https://fontawesome.com/download](https://fontawesome.com/download)

字体位于 all.css 和 all.min.css 文件中。

这是您现在使用最新版本的参考资料（替换为您的文件夹）：

```
<link href="/MyProject/Content/fontawesome-free-5.10.1-web/css/all.min.css" rel="stylesheet"> 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-11-01T18:59:09.300

我已从 3.2.1 更改为 4.0.1，文件夹是字体，现在称为字体。

```
src: url('../font/fontawesome-webfont.eot?v=3.2.1');

src: url('../fonts/fontawesome-webfont.eot?v=4.0.1'); 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2014-09-03T00:40:46.090

我使用[Official Font Awesome SASS Ruby Gem](https://github.com/FortAwesome/font-awesome-sass)并通过将以下行添加到我的 application.css.scss 来修复错误

```
@import "font-awesome-sprockets"; 
```

解释：

> font-awesome-sprockets 文件包括 sprockets assest 帮助器 Sass 函数，用于查找字体文件的正确路径。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2015-08-11T17:43:20.103

如果您使用 sass 并已导入 main.scss `@import '../vendor/font-awesome/scss/font-awesome.scss';`

该错误可能来自在其相对路径中查找字体文件的 font-awesome.scss 文件。

所以**记得**覆盖 $fa-font-path 变量： `$fa-font-path: "https://netdna.bootstrapcdn.com/font-awesome/4.3.0/fonts" !default;`

像这样不需要在 index.html 中添加 CDN

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-01-30T08:09:13.113

仔细检查 fontawesome-all.css 文件 - 在最底部会有一个指向 webfonts 文件夹的路径。我的里面有“../webfonts”格式，这意味着css文件将从它所在的位置向上查找1级。由于我所有的 css 文件都在 css 文件夹中，并且我将字体添加到同一个文件夹中，所以这不起作用。

只需将您的字体文件夹向上移动一个级别，一切都应该很好:)

使用 Font Awesome 5.0 测试

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2018-06-12T11:36:57.427

与上层阶级一起使用

```
<div class="container">
  <i class="fa fa-facebook"></i>
</div> 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2020-01-31T16:45:09.167

/css/all.css 文件包含核心样式以及使用 Font Awesome 时需要的所有图标样式。/webfonts 文件夹包含上述 CSS 引用和依赖的所有字体文件。

将整个 /webfonts 文件夹和 /css/all.css 复制到项目的静态资产目录中（或者您希望保留前端资产或供应商资料的任何位置）。

将复制的 /css/all.css 文件的引用添加到要在其上使用 Font Awesome 的每个模板或页面中。

只需访问 - [https://fontawesome.com/how-to-use/on-the-web/setup/hosting-font-awesome-yourself](https://fontawesome.com/how-to-use/on-the-web/setup/hosting-font-awesome-yourself) 你会得到答案。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2020-03-10T18:56:33.410

必须以这种方式工作

1.  确保你在页面顶部链接了 [fontawesome cdn fontawesome cdn](http://link%20rel=%22stylesheet%22%20href=%22https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css%22)

2.  确保 .fa 类没有被赋予另一个 font-family 属性。通常，当我们为页面中的所有标签指定样式时，就会发生这种情况。像这样

```
* {
  font-family: Arial;
}
```

而是使用这个

```
*:not(.fa){
  font-family: Arial;
}
```

3.  确保你在 fontawesome 网站上输入了准确的类名。复制并粘贴以确保。

```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<i class="fa fa-home"></i>
```

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2020-04-14T18:50:34.877

使用（免费）Font Awesome 5 版本，有一个小细节对我来说很难弄清楚，我没有注意它：

```
Style   Availability    Style Prefix    Example Rendering
Solid   Free            fas             <i class="fas fa-camera"></i>
Brands  Free            fab             <i class="fab fa-font-awesome"></i> 
```

（从[文档](https://fontawesome.com/how-to-use/on-the-web/referencing-icons/basic-use)中提取）

有了这个引用，**品牌**图标如`fa-twitter`or`fa-react`需要与 class 一起使用，**`fab`**而**所有其他**（免费）图标需要与 class 一起使用**`fas`**。这很容易监督。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2021-04-16T19:10:07.303

经过 5 个多小时的挣扎后，我找到了导致问题的原因。

1.  使用 FontAwesome 5 您应该使用 fa **s**（注意末尾的“s”）：

```
<i class="fas fa-camera"></i>
```

2.  我使用的是“常规”字体，这显然是在这个版本中付费的——我切换到“纯色”，一切都开始正常工作了。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2014-03-28T20:00:07.170

使用绝对路径而不是相对路径为我解决了这个问题。我使用的是相对路径（请参见下面的第一个示例），但这不起作用。我通过控制台检查，发现服务器返回 404，找不到文件。

**相对路径导致 404：**

```
@font-face { 
font-family: "FontAwesome";
src: url("../fonts/fontawesome-webfont.eot?v=4.0.3");
} 
```

**绝对路径解决了它跨浏览器：**

```
@font-face { 
font-family: "FontAwesome";
src: url("http://www.mysite.com/fonts/fontawesome-webfont.eot?v=4.0.3");
} 
```

除非你必须这样做，否则我不建议这样做，但它对我有用。当然，您应该对 font-awesome.css 文件中的所有字体格式重复此操作。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2015-10-17T19:54:06.070

它对我不起作用，因为我`Allow from none`的 apache 配置中有根目录的指令。这是我如何让它工作的...

我的目录结构：

```
root/
root/font-awesome/4.4.0/css/font-awesome.min.css
root/font-awesome/4.4.0/fonts/fontawesome-webfont.*
root/dir1/index.html 
```

我的 index.html 有：

```
<link rel="stylesheet" href="../font-awesome/4.4.0/css/font-awesome.min.css"> 
```

我选择继续禁止访问我的根目录，而是在我的 apache 配置中为 root/font-awesome/ 添加了另一个目录条目

```
<Directory "/path/root/font-awesome/">
    Allow from all
</Directory> 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2015-12-18T22:50:35.723

我的问题是添加

```
<link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css"> 
```

在一个里面

```
<!-- build:css assets/styles/main.css -->
<!-- endbuild --> 
```

标签

我把它放在标签外面来修复它。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-09-25T15:29:11.633

为我解决了这个问题（在我的 Windows 7 机器上）是解密我的项目目录。在测试您的网站时，最初会出现多少视觉和功能故障，这真是太疯狂了。只需进入命令提示符并运行：

```
attrib -R %PROJECT_PATH%\*.* /S
cipher /a /d /s:%PROJECT_PATH% 
```

...其中 %PROJECT_PATH% 是存储代码的目录的完整路径名。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2018-04-03T12:55:35.583

现在在 fontawesome 5 中，您可以通过 Https 交付缓存版本的 JS。

```
<script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl" crossorigin="anonymous"></script> 
```

[有关https://fontawesome.com/get-started/svg-with-js](https://fontawesome.com/get-started/svg-with-js)的更多信息

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2018-08-08T11:25:24.920

我尝试了上面的一些建议但没有成功。

我使用 NuGeT 包。是（*出于某种原因*）多个命名版本（*font-awesome、fontawesome、font.awesome 等*）

对于它的价值：我删除了所有安装的版本，然后只安装了最新版本的**font.awesome**。**font.awesome**无需调整或配置任何东西即可工作。

我假设其他命名版本中缺少许多东西。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2019-01-07T14:07:34.633

这么多答案，所以我为我添加了我的工作（如果您不使用 PRO，请更改名称）：在 _typography.less

```
//
//  Common
//  _____________________________________________

& when (@media-common = true) {
  .lib-font-face(
    @family-name: @font-family-name__fontawsomeregular,
    @font-path: '@{baseDir}fonts/webfonts/fa-regular-400',
    @font-weight: 400,
    @font-style: normal
  );
  .lib-font-face(
    @family-name: @font-family-name__fontawsomelight,
    @font-path: '@{baseDir}fonts/webfonts/fa-light-300',
    @font-weight: 300,
    @font-style: normal
   );
  .lib-font-face(
    @family-name: @font-family-name__fontawsomebrands,
    @font-path: '@{baseDir}fonts/webfonts/fa-brands-400',
    @font-weight: normal,
    @font-style: normal
  );
  .lib-font-face(
    @family-name: @font-family-name__fontawsomesolid,
    @font-path: '@{baseDir}fonts/webfonts/fa-solid-900',
    @font-weight: 900,
    @font-style: normal
  );
} 
```

在 _theme.less

```
@import '../includes/fontawesome/fontawesome.less';
@fa-font-path: '@{baseDir}fonts/webfonts';

//  Fonts
@font-family-name__fontawsomeregular: 'Font Awesome 5 Pro';
@font-family-name__fontawsomelight: 'Font Awesome 5 Pro';
@font-family-name__fontawsomebrands: 'Font Awesome 5 Brands';
@font-family-name__fontawsomesolid: 'Font Awesome 5 Pro'; 
```

和使用示例：

```
 .my-newclass:before{
     content: '\f002';
     display: inline-block;
     float: left;
     font-family:  @font-family-name__fontawsomelight;
     font-size: 16px;
} 
```

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2019-03-16T05:46:16.463

请加

```
@import 'https://****.net/*********/font-awesome.min.css';
@font-face {
    font-family: 'FontAwesome';
    src: url('https://****.net/*********/FontAwesome.otf');
    src: url('https://****.net/*********/FontAwesome.otf?#iefix')
} 
```

这是您的 css 顶部，正确下载并链接 css 和字体，问题是由于 FontAwesome 未正确加载。

谢谢

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2019-06-21T11:47:42.370

如果您`font-awesome`通过包管理器（[yarn](https://yarnpkg.com/en/package/font-awesome)或[npm](https://www.npmjs.com/package/font-awesome)）安装，请注意安装了哪个版本。`font-awesome`或者，如果您很久以前就已经安装了，请检查安装的版本。

本质上，通过包管理器安装的版本可能落后于[https://fontawesome.com/](https://fontawesome.com/)网站上显示的版本。因此，就像今天（21.06.2019）一样，包管理器将安装**v4.7.0**作为最新版本，但网站将指向引用**v5.***的文档。

解决方案，访问记录`v4.7.0` [https://fontawesome.com/v4.7.0](https://fontawesome.com/v4.7.0)图标的网站，复制适当的图标，例如`<i class="fa fa-sign-in" aria-hidden="true"></i>`并将其合并到您的 html 中。更多上下文可以在[这里](https://stackoverflow.com/questions/24922833/fontawesome-icons-not-showing-why/56702714#56702714)找到。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2020-01-15T08:51:05.667

如果 MIME TYPE 已经具有 .woff 和 .woff2 文件类型，但仍然给出 HTTP-404 错误，请检查请求过滤。如果这是限制性的，请将这些文件类型添加为允许服务，它应该可以工作。看看这个！

* * *

## 回答 #43

> 赞同：-1
> 
> 时间：2014-02-25T23:38:56.697

我今天找到了一个解决方案，它是：

1.  [从他们的 Github页面](https://github.com/FortAwesome/Font-Awesome)下载整个项目
2.  [然后按照他们页面](http://fortawesome.github.io/Font-Awesome/get-started/)上默认 CSS 部分下的其余步骤，将目录移动到您的项目中，并在 .html 文件的 HEAD 部分中添加链接

他们的文档的问题在于，他们没有指定一个链接，您应该从哪里获得整个字体真棒项目的副本以放入您的项目中。**

# hardware - if-else 的 else 块对不同的条件有不同的作用

> ID：14366159
> 
> 赞同：0
> 
> 时间：2013-01-16T19:24:46.440
> 
> 标签：hardware, verilog, fpga, hdl

我正在使用 if else 块编写一个简单的移位寄存器。我注意到当控制信号是`control = 2'b00`（意味着它保留默认值）时，else 块可以正常工作，但是当我给出控制值`control = 2'b11`时，它开始向右移动，这不是我想要的。

为什么 else 块有选择性地工作？即使两者都`control = 2'b00`落在`control = 2'b11`其他情况下？

代码和截图如下：

```
module shift(
input clock,
input reset,
input [1:0] control,
input in,
output [7:0] out
);

reg [7:0] r_reg, r_next; //a 7 bit shift register which will be output as is, this can be changed to any size

always @ (posedge clock or posedge reset)
begin
    if(reset)
        r_reg <= 0;
    else
        r_reg <= r_next;
end

always @ (*)

begin

if(control[0]) //shift right
    r_next = {in, r_reg[7:1]};

else if(control[1]) //shift left
    r_next = {r_reg[6:0], in};

else
    r_next = r_reg; //default state stays the same

end

assign out = r_reg;

endmodule 
```

![在此处输入图像描述](../Images/95ab5e98cad32f36bdc9df78f048726b.png)

编辑：

```
if(right) //shift right
    r_next = {in, r_reg[7:1]};

else if(left) //shift left
    r_next = {r_reg[6:0], in};

else if((~right & ~left) || (right & left))
    r_next = r_reg; //default state stays the same 
```

以上也不起作用..但我用案例修复了它。

```
case(control)
    2'b01: r_next = {in, r_reg[7:1]};
    2'b10: r_next = {r_reg[6:0], in};
    default: r_next = r_reg; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:27:27.847

非常简单：它根本不属于 else 情况。

您的第一个条件仅查看低位（匹配 b'd1），因此 b'01 和 b'11 都右移。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:27:51.450

`control[0]`是`1`你输入的时候`11`，所以我认为它按预期工作。你需要一个更强的条件才能让它按照你想要的方式工作：

```
if (control == 2'b01)          // shift right
    r_next = {in, r_reg[7:1]};

else if (control == 2'b10)     // shift left
    r_next = {r_reg[6:0], in};

else                           // default state stays the same
    r_next = r_reg; 
```

# windows-8 - Visual Studio 2012：未解析的外部符号 _BluetoothFindFirstRadio

> ID：14366160
> 
> 赞同：2
> 
> 时间：2013-01-16T19:24:49.017
> 
> 标签：windows-8, linker, visual-studio-2012, bluetooth, lnk2019

我正在尝试在 Win32 控制台应用程序项目中使用一些蓝牙功能（ [http://msdn.microsoft.com/en-us/library/windows/desktop/aa362927(v=vs.85).aspx ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362927%28v=vs.85%29.aspx)包含相关标头后，我在编译期间收到如下链接器错误：

```
Error   1   error LNK2019: unresolved external symbol _BluetoothFindFirstRadio@8 referenced in function _wmain 
```

我一直假设我未能链接到 Windows 8 SDK。打开项目属性，我的目标框架是 .NET 4.0，我无法更改，也没有可以添加的引用。

我可能完全不在基地。如何解决此编译错误？

![在此处输入图像描述](../Images/297ff201b67556d5cdc9965068eaf594.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:44:00.340

由于您正在编译本机代码 (Win32)，因此添加引用不会像在 C#/.NET 中那样工作。你需要做的是；

*   在您的项目中选择“属性”。
*   展开“配置属性”。
*   展开“链接器”。
*   选择“输入”。
*   将“Bthprops.lib”添加到“附加依赖项”。

[BluetoothFindFirstRadio 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362786(v=vs.85).aspx)中根据需要提到了 Bthprops.lib 。

编译，一切都应该很好。

# android - 谷歌地图视图投影区域监听器

> ID：14366165
> 
> 赞同：1
> 
> 时间：2013-01-16T19:25:07.953
> 
> 标签：android, listener, projection

有一个谷歌地图视图和投影圈区。如果用户继续在投影圈内移动，则应该弹出消息框，以便我需要侦听器和投影实现。

我不知道我必须使用哪个听众。如果你帮助我，我很感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:27:27.210

试试我认为对你有用的距离：[distanceBetween](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)

你可以使用 Runnable 来实现你的监听器：

```
 private Handler handler = new Handler();
  public static final int circleCheckingDelay = 1000; // in ms

  private Runnable circleChecker = new Runnable()
  {
      public void run()
      {
          float distance= getDistance(GeoPoint p1, GeoPoint p2);
          if(distance < ...)
          {
            //do something
          }
          handler.removeCallbacks(circleChecker);
          handler.postDelayed(circleChecker, circleCheckingDelay);
      }
  }; 
```

在您的 mapActivity 中添加以下函数：

简历：

```
 handler.postDelayed(circleChecker, circleCheckingDelay); 
```

暂停：

```
 handler.removeCallbacks(circleChecker); 
```

也检查这个链接： [如何找到两个地理点之间的距离？](https://stackoverflow.com/questions/5936912/how-to-find-the-distance-between-two-geopoints)

例如获取距离的函数：

```
public float getDistance(GeoPoint p1, GeoPoint p2) {
    double lat1 = ((double)p1.getLatitudeE6()) / 1e6;
    double lng1 = ((double)p1.getLongitudeE6()) / 1e6;
    double lat2 = ((double)p2.getLatitudeE6()) / 1e6;
    double lng2 = ((double)p2.getLongitudeE6()) / 1e6;
    float [] dist = new float[1];
    Location.distanceBetween(lat1, lng1, lat2, lng2, dist);
    return dist[0];
} 
```

# algorithm - 图中的循环

> ID：14366167
> 
> 赞同：1
> 
> 时间：2013-01-16T19:25:14.083
> 
> 标签：algorithm

这是来自 Codeforces PC 的问题，可以在[此处](http://codeforces.com/contest/263/problem/D)查看。

> 你有一个无向图 G，由 n 个节点组成。我们将考虑由从 1 到 n 的整数索引的图的节点。我们知道图 G 的每个节点都通过边与该图的至少 k 个其他节点相连。你的任务是在给定的图中找到一个长度至少为 k + 1 的简单循环。
> 
> 图 G 中长度为 d (d > 1) 的简单循环是一系列不同的图节点 v1、v2、...、vd，这样节点 v1 和 vd 通过图的边连接，对于任何整数也是如此i (1 ≤ i < d) 节点 vi 和 vi + 1 由图的边连接。输入
> 
> 第一行包含三个整数 n, m, k (3 ≤ n, m ≤ 105; 2 ≤ k ≤ n - 1)——图的节点数，图的边数和下限图节点的度数。接下来的 m 行包含整数对。第 i 行包含整数 ai, bi (1 ≤ ai, bi ≤ n; ai ≠ bi) — 由第 i 条边连接的图节点的索引。
> 
> 保证给定的图不包含任何多重边或自环。保证图的每个节点通过边与图的至少 k 个其他节点相连。输出
> 
> 在第一行打印整数 r (r ≥ k + 1) — 找到的循环的长度。在下一行打印 r 个不同的整数 v1, v2, ..., vr (1 ≤ vi ≤ n) — 找到的简单循环。
> 
> 可以保证答案存在。如果有多个正确答案，您可以打印其中任何一个。
> 
> 输入：
> 
> 3 3 2 1 2 2 3 3 1
> 
> 输出：
> 
> 3 1 2 3

**我的方法：**

我使用了 DFS，但超出了时间限制（TLE）。不知道如何快速做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:01:12.727

我认为如果您确保搜索永远不会回溯，则使用每个节点的邻居列表的 DFS 应该满足时间限制。

DFS的基本思想是访问任何尚未访问过的节点并进行递归。

一旦我们到达一个节点 x，我们就不能递归了，比如说，它的所有邻居都已经被访问过。由于问题陈述，它必须至少有 k 个邻居。

通过返回最先遇到的邻居节点，形成一个长度为 k+1 的循环。

我们可以通过将访问节点的递归深度存储在数组中来轻松确定首先遇到哪个节点。

## 解释

假设我们已经到达节点 x，其邻居 a、b、c、d 都已经被访问过。

这意味着我们必须找到一条看起来像这样的路径：

开始->...->a->..->b->..->c->..->d->..->x

所以通过从 x 到 a 的循环，我们有一个至少长度为 k+1 的循环。（k 因为我们有 k 个邻居 a,b,c,d 和 +1 因为我们还包括节点 x。）

# perl - 来自非 perl 程序员

> ID：14366168
> 
> 赞同：0
> 
> 时间：2013-01-16T19:25:15.233
> 
> 标签：perl

任何 perl 专家都可以帮助我理解这个 perl 代码块

```
 $a=18;
$b=55;
$c=16;
$d=88;
$mtk = {
    'A'     => [$a, $b],
     'M'   => [$c, $d]

    }; 
```

这本字典是否包含字符和配对以及如何访问键和值非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T19:37:28.400

`$a`, `$b`, `$c`, 和`$d`是[标量](http://perldoc.perl.org/perldata.html#Scalar-values)。`$mtk`是对[arrayrefs 哈希的](http://perldoc.perl.org/perldsc.html#HASHES-OF-ARRAYS)[引用](http://perldoc.perl.org/perlref.html)。您可以像这样访问它：

```
print $mtk->{A}[0]; ## 18 
```

如果您刚刚开始使用此代码并为之苦苦挣扎，我建议您阅读《 [*Learning Perl 》一书。*](http://shop.oreilly.com/product/0636920018452.do)

[perldoc perlreftut](http://perldoc.perl.org/perlreftut.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:46:10.870

这是将数组引用作为值的哈希引用。下面是一个遍历代码：

```
for my $key (sort keys %$mtk) {
    print "Current key is $key\n";
    for my $val (@{ $mtk->{$key} }) {
        print "... and one of value is $val\n";
    }
} 
```

输出将是

```
Current key is A
... and one of value is 18
... and one of value is 55
Current key is M
... and one of value is 16
... and one of value is 88 
```

# c# - 我们可以使用 LINQ 或其他东西在 WPF 中聚合和分组吗？

> ID：14366170
> 
> 赞同：2
> 
> 时间：2013-01-16T19:25:19.000
> 
> 标签：c#, wpf, linq

我有以下数据结构：列出 myOrders

因此，它是基于今天收到的订单的数据列表（见下文）（因此，如果不同的人多次购买相同的商品，您可以复制）。

```
Data
{
  string itemName
  double itemQuantiy
  string partName
  double partQuantity
} 
```

例如，填充后的列表如下所示：

```
 itemName   itemQuantity   partName   partQuantity
  A          1              alpha      5
  A          1              beta       2
  A          1              delta      100
  B          1              alpha      17
  B          1              gamma      2000
  A          2              alpha      10
  A          2              beta       4
  A          2              delta      200 
```

从上表中可以看出，项目 A 有 3 个部分（alpha、beta、delta），项目 B 有两个部分（alpha、gamma），都有各自的数量，在这个例子中，项目 A 被订购了两次（前 3 行是 1 个单位 A 的第一个订单，2 个单位 A 的最后 3 行）。

我需要将此呈现给用户，但它应该按项目分组，并且应该汇总数量。

最终结果（向用户显示在屏幕上）应如下所示：

```
 itemName   itemQuantity   partName   partQuantity
  A          3              alpha      15
                            beta       6
                            delta      300
  B          1              alpha      17
                            gamma      2000 
```

这可以使用 LINQ 之类的东西或者 WPF 中的东西来完成吗？（或您可能建议的任何其他方式 - 我现在不知所措）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:37:26.730

这是Linq的方式。

```
List<Data> myOrders = GetList();

IEnumerable<Data> groupingQuery = myOrders
  .GroupBy(data => new { data.itemName, data.partName } )
  .Select(g => new Data()
  {
    itemName = g.Key.itemName,
    partName = g.Key.partName,
    itemQuantity = g.Sum(x => x.itemQuantity),
    partQuantity = g.Sum(x => x.partQuantity)
  })
  .OrderBy(data => data.itemName)
  .ThenBy(data => data.partName); 
```

* * *

或者您可以将数据转换为项目和部件......

```
List<Item> items = (
  from data in myOrders
  group data by data.itemName into itemGroup
  let partGroups = itemGroup.GroupBy(x => x.partName)
  select new Item()
  {
    itemName = itemGroup.Key,
    itemQuantity = partGroups.Min(partGroup => partGroup.Sum(x => x.itemQuantity)),
    Parts = (
      from partGroup in partgroups
      select new Part() { partName = partGroup.Key, partQuantity = partGroup.Sum(x => x.partQuantity) }
    ).ToList();
  }).ToList(); 
```

* * *

这里有一些可能不一致的数据，这使得这种分组更加困难。

```
itemName   itemQuantity   partName   partQuantity
A          1              alpha      5
A          2              beta       2
A          1              delta      100 
```

我有 1 A 还是 2 A？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:30:02.523

您可以使用 LINQ GroupBy 方法（[http://msdn.microsoft.com/ru-ru/library/system.linq.enumerable.groupby.aspx](http://msdn.microsoft.com/ru-ru/library/system.linq.enumerable.groupby.aspx)）

像这样的东西：

```
List<Data> data = ...;
var groupedItems = data.GroupBy(d => d.itemName); 
```

对于 WPF，您可以使用分组功能（ItemsControl.GroupStyle 等，例如对于数据网格：[http](http://wpftutorial.net/DataGrid.html#grouping) ://wpftutorial.net/DataGrid.html#grouping您可以 google 查找更多教程）

# actionscript-3 - AS3 Juming/Gravity 问题

> ID：14366171
> 
> 赞同：0
> 
> 时间：2013-01-16T19:25:23.197
> 
> 标签：actionscript-3, movieclip, gravity

我遇到的问题是我不知道如何让角色停止跳跃。

例如，当我不断地击中空间时，它会不停地跳跃。当我按下空格键时，我希望它跳跃，而当 MC 跳跃时，我想禁用空格键（或者如果可能的话，你也可以告诉我如何禁用`MouseEvents`），以便在空中时 MC 只能跳跃一次。

```
var gravity = 0.8;
var floor = 251;
player.y = floor;
player.speedY = 0;
player.impulsion = 10;
stage.addEventListener(Event.ENTER_FRAME, enterframe);
function enterframe(e:Event) {
    player.speedY += gravity;
    player.y += player.speedY;
    if(player.y > floor) {
        player.speedY = 0;
        player.y = floor

    }

}
stage.addEventListener(KeyboardEvent.KEY_DOWN, space);
function space(e:KeyboardEvent) {
    if(e.keyCode == Keyboard.SPACE) {
        player.speedY = -player.impulsion
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:42:26.930

我通常只有一个像“ `onFloor`”这样的布尔变量，当图层着陆时设置为真，当他们跳跃时设置为假。然后只有在他们跳的时候才让他们跳`onFloor`。所以在这里我在你的内部将它设置为 true `if(player.y > floor)`，在之后设置为 false `if(e.keyCode == Keyboard.SPACE && onFloor)`：

```
var gravity = 0.8;
var floor = 251;
var onFloor:Boolean = false;

player.y = floor;
player.speedY = 0;
player.impulsion = 10;
stage.addEventListener(Event.ENTER_FRAME, enterframe);
function enterframe(e:Event) {
    player.speedY += gravity;
    player.y += player.speedY;
    if(player.y > floor) {
        player.speedY = 0;
        player.y = floor;
        onFloor = true;
    }

}
stage.addEventListener(KeyboardEvent.KEY_DOWN, space);
function space(e:KeyboardEvent) {
    if(e.keyCode == Keyboard.SPACE && onFloor) {
        player.speedY = -player.impulsion;
        onFloor = false;
    }
} 
```

# javascript - 阿贾克斯。从 javascript 到 asp.cs 的字符串

> ID：14366177
> 
> 赞同：0
> 
> 时间：2013-01-16T19:25:45.020
> 
> 标签：javascript, asp.net, ajax

使用 ajax 将数据从 javascript 传递到 asp.cs 的问题。它不起作用。我想传递一个带有列表框结果的字符串。怎么了？谢谢

```
 public static bool AddNewItem(string name, string surname, int age)
    {

    return true;      
   } 

   <input type="submit"  value="OK" id="enter" runat="server" onclick="submitAjax()" />

      function submitAjax() {
     var listBox = document.getElementById('SubCat');
     var i;
     var str=listBox.options[0].text;

     for(i=1;i<listBox.options.length;i++)
     str=","+listBox.options[i].text;

       $.ajax({
        type: 'POST',
        url: 'RicercaAdvForn.aspx/AddNewItem',
        data: '{str}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            if (msg.d) {
                alert("Successfully added new item");
            }
        },
        error: function () {
            alert("Error! Try again...");
        }
      } );

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:27:57.517

您必须单独传递参数。

```
data: {name: 'someName', surname: 'someSurName', age: 20} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:31:43.567

`data: '{str}',`会将字符串文字“{str}”传递给您的代码 - 可能不是您的意思。尝试使用[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)代替：

```
$.ajax({
    ...
    data: JSON.stringify({ parameterName: str }),
    ... 
```

`parameterName`您的代码背后的方法所期望的参数名称在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:32:22.223

尝试使用

```
data: {str}, 
```

不是

```
data: '{str}', 
```

但是最好使用@Marcus Recck 响应。

问候。

# visual-studio-2010 - 将警告视为错误无效

> ID：14366181
> 
> 赞同：8
> 
> 时间：2013-01-16T19:25:57.237
> 
> 标签：visual-studio-2010, code-analysis, compiler-warnings, fxcop

在 Visual Studio 的项目设置中，我将“将警告视为错误”设置为“全部”。警告级别设置为 4。我通过故意引入违反 CA1305 的代码对此进行了测试，但它成功构建（和重建），返回警告。我所期望的是构建会失败并且会返回一个错误。我的理解错了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T23:43:54.610

代码分析使用不同的机制将警告视为错误。要这样处理代码分析警告，请将新的代码分析规则集添加到您的解决方案中。为此，请右键单击您的解决方案并选择“添加新项目...”。搜索“规则集”并选择添加新的“代码分析规则集”。给它任何你想要的名字。

![添加新规则集](../Images/56dff301be93da6186391d3a8539edaf.png)

在规则集编辑器中，选择要包含在项目中的规则并将它们设置为错误。您可以选择将哪些规则视为错误以及将哪些规则视为警告。

![选择您的规则并设置为错误](../Images/037afd3491f69994d17c8777b12fab37.png)

在代码分析规则集属性窗口中设置规则集的名称并**保存**。然后打开`Analyze->Configure Code Analysis for Solution`菜单项。

![设置名称并应用于解决方案](../Images/fe0ce81648fb2fe7091a7d3eb3d90598.png)

为您的项目选择“作为错误”规则集并应用。

![选择为错误规则集并应用](../Images/6a401b1a84e318edbdaaea154eb711cb.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-20T15:51:22.183

您可以在您的 csproj 文件中使用“CodeAnalysisTreatWarningsAsErrors”属性，如下所述：

[http://blogs.msdn.com/b/codeanalysis/archive/2007/08/08/_24002800_codeanalysistreatwarningaserrors_2900_-msbuild-property.aspx](http://blogs.msdn.com/b/codeanalysis/archive/2007/08/08/_24002800_codeanalysistreatwarningaserrors_2900_-msbuild-property.aspx)

> 对于 Visual Studio 2008，我们添加了一个新的 MSBuild 属性，使您可以轻松地将所有代码分析警告视为构建错误。例如，如果您想在夜间团队构建期间强制触发任何代码分析规则来中断构建，而无需为每个规则单独设置，这可能很有用。
> 
> 要使用，只需将属性添加到项目文件（或公共目标文件）并将其设置为 true：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="12.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
    <PropertyGroup>
        [...]
        <!-- either here -->
        <CodeAnalysisTreatWarningsAsErrors>true</CodeAnalysisTreatWarningsAsErrors>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
        [...]
        <!-- or here ... -->
        <CodeAnalysisTreatWarningsAsErrors>true</CodeAnalysisTreatWarningsAsErrors>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
        [...]
        <!-- and here -->
        <CodeAnalysisTreatWarningsAsErrors>true</CodeAnalysisTreatWarningsAsErrors>
    </PropertyGroup>
    [...]
</Project> 
```

这可以与 with 结合使用`<StyleCopTreatErrorsAsWarnings>false</StyleCopTreatErrorsAsWarnings>`，这将对 StyleCop 警告产生相同的效果。

# language-agnostic - HACK 和 UNDONE 注释标签的使用

> ID：14366182
> 
> 赞同：17
> 
> 时间：2013-01-16T19:26:03.543
> 
> 标签：language-agnostic, coding-style, documentation, tags

许多软件工程师都熟悉特殊注释“标签”的使用，这些注释“标签”可以添加到他们的代码注释中，用于搜索、自动任务跟踪等。其中一些最受欢迎的是 FIXME、TODO、UNDONE 和 HACK。

我对 HACK 和 UNDONE 标签的使用有点困惑。请帮帮忙？

*显示 FIXME 和 TODO 之间基本区别的奖励积分*

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-16T19:32:53.237

我的理解：

*   TODO：需要做的事情。这可能是稍后添加的功能，或者表明某些东西是存根并且需要实现。

*   FIXME：TODO 标记的子类，表示有*问题*需要*修复*。

**   UNDONE：指示更改是回滚或撤消其他更改的注释。此评论通常会指出删除的内容和原因。

    *   HACK：一些东西，通常是一段奇怪的或非正统的代码，被添加来解决一些特定的问题。这些通常不是“优雅”的解决方案，但仍然可以使该死的事情发挥作用。通常，您会看到这些以解决框架中的错误或其他意外行为。此外，如果不是为了注释，注释代码的目的通常会不清楚。* 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T17:04:42.833

UNDONE 对我来说意味着该方法没有完成，尽管没有内部代码，它通常会返回数据类型

我想说这个是因为有些人认为这是一种颠倒，我不会用这些评论污染代码，并且感觉很多其他人可能会使用 UNDONE 来表示和我一样的意思

这是一个自由的规则集，但它是一个很棒的系统

```
public int SomeCalculation(int Input)
{
  return 0; //UNDONE
}

public bool SomeCheck()
{
  return false; //UNDONE
} 
```*

# c++ - 有没有办法定义“备用”字符串终止符（除了空终止符，\0）

> ID：14366183
> 
> 赞同：1
> 
> 时间：2013-01-16T19:26:06.580
> 
> 标签：c++, c, string, performance, null-terminated

我不一定想这样做，但我很好奇。在 C/C++ 中，除了 null 终止符之外，还有*其他*方法可以定义字符串终止符吗？例如，是否可以这样写，

```
char* str = "123456|ABCDEF";

char* foo = str;
char* bar = strstr(str, "|") + 1;

// do something here to define '|' as a terminator

std::cout << foo << std::endl;
std::cout << bar << std::endl;

// undo pipe-as-terminator definition 
```

并获得输出，

```
123456
ABCDEF 
```

?

如果不可能，那么有*没有*办法获得指向缓冲区部分的指针，*而无需*分配/复制内存，也*无需*修改缓冲区，*即将*s覆盖`|`为`\0`s？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:31:18.757

您可以编写一个字符串引用包装器，其中包含指向子字符串和大小的指针，然后使用`write`而不是`operator<<`：

```
// Sketch
struct StringRef {
    const char* start;
    std::size_t length;
    // add code to initialize the object out of the substring
};
std::ostream& operator<<(std::ostream& o, const StringRef& s) {
   return o.write(s.start,s.length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:44:23.243

我不认为你可以，因为这条规则是在编译器内部硬构建的。事实上，编译器在您声明的每个字符串常量的末尾都包含了 null-trminator，方法是使用程序集 '.asciz' 指令。所以除非你修改gcc的源代码，我认为你不能。我真的不知道其他编译器，例如 MSVC。对于 Clang，我不知道是否有办法这样做，这需要调查。作为替代方案，您可以通过艰难的方式将每个字符串输入为 const char message[] = { 'H','e','l','l','o',' ', '！'，'|' };

但我想指出，如果编译器施加这种限制，那是有充分理由的。例如，想象一个您从用户那里获取输入文本的程序。如果用户输入'|'怎么办 在他的文字中？选择空字符的原因是用户无法输入此字符（因为它不是可打印字符集的一部分，而且我不知道任何键盘包括“空”键. 至少，你应该取另一个字符作为空终止符，但不要取一个容易输入的字符。

否则，我对操作系统开发感兴趣，人们喜欢重新发明轮子，而且我已经看到有人尝试使用另一种技术：为每个字符串加上长度，允许在字符串中嵌入空字符，以及提供恒定时间的 strlen() 操作。此外，C#/.NET 字符串是以长度为前缀和以空值结尾的，尽管我并不真正看到它的兴趣......

在我更精确之前，我想知道您正在使用哪个编译器，以及您在编程中的“水平”（只是不要告诉您您不会理解的事情）x）

干杯，摘要

# pdf - 怎么打印成这样的效果，裁切后是A5大小的书？

> ID：14366185
> 
> 赞同：0
> 
> 时间：2013-01-16T19:26:17.050
> 
> 标签：pdf, printing

我有一个 pdf，它是 A4 大小，一页一页，一本小书（实际上是一本长期刊论文）。我想把它打印出来，让它看起来像一本小书。但是这本书的大小应该是 A5。我的打印机里没有 A5 纸，所以我想在 A4 上以某种方式双面打印，然后将它们切成两半，这样我就可以将它们组合成一本 A5 大小的书。

任何想法如何在 pdf 阅读器中进行这种打印？或者有什么软件可以用？或者如果在 Linux 上，任何人都知道如何编写脚本来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:43:37.907

Adobe Reader 具有“小册子打印”功能。 [看看 Adob​​e 网站。](http://helpx.adobe.com/acrobat/kb/print-booklets-acrobat-reader.html)

# python - SQLAlchemy - 使用关系按行类型进行过滤

> ID：14366186
> 
> 赞同：2
> 
> 时间：2013-01-16T19:26:24.120
> 
> 标签：python, sqlalchemy, relationships

下面是一个伪多对多表结构，假设客户订购了一个活动。我理想地希望能够实现的是通过使用不同的关系名称进行隐式查询和设置。

例如（假设**初始化**代码创建了关联对象）

```
order=order()
order.events.corporate.name = "Big Corp" 
```

这会将 event.type（枚举）设置为“corporate”，将 event.name 设置为“Big Corp”。相似地。

```
print session.query(Order).filter(order.events.corporate.name == "Big Corp") 
```

这只会找到具有关联 event.type = "corporate" 的事件记录。（简单的例子，没有必要，但你明白了）

同样，使用 order.events.personal.name 将设置/查询 event.type = "personal" 的相应记录

非常感谢您帮助理解实现此功能的最佳方式。

```
Base = declarative_base()

class Order(Base):
    __tablename__ = 'order'
    id                  = Column(Integer, primary_key=True)
    event_id            = Column(Integer, ForeignKey('events.id'))

    events = relationship("Events")

class Events(Base):
    __tablename__ = 'events'
    order_id            = Column(Integer, ForeignKey('order.id'), primary_key=True)
    event_id            = Column(Integer, ForeignKey('event.id'), primary_key=True)

    corporate = relationship("Event")
    personal  = relationship("Event")
    event     = relationship("Event")

class Event(Base):
    __tablename__ = 'event'
    id                  = Column(Integer, primary_key=True)
    type                = Column(Enum('corporate', 'personal', name='enum_ev_type'))
    name                = Column(String(32)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:39:00.587

SQLAlchemy 不理解在过滤器中使用关系的情况。在你的例子`order.events.corporate`中。

我在尝试这样做时遇到以下异常：

```
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Order.events has an attribute 'corporate' 
```

我建议考虑使用[SQL Alchemy 关系文档页面中描述的](http://docs.sqlalchemy.org/en/latest/orm/relationships.html)[AssociationObject](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#association-object)模式。

所以查询将是：

```
session.query(Order).filter(and_(EventsAssoc.type=="corporate",Event.name=="Big Corporation")) 
```

查看完整示例如何定义模式和创建对象。

```
from sqlalchemy import *
from sqlalchemy import create_engine, orm
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship

metadata = MetaData()
Base = declarative_base()
Base.metadata = metadata

class Event(Base):
    __tablename__ = 'event'
    id                  = Column(Integer, Sequence("event_seq"), primary_key=True)
    name                = Column(String(32))
    def __repr__(self):
        return "%s(name=\"%s\",id=\"%s\")" % (self.__class__.__name__,self.name,self.id)

class EventsAssoc(Base):
    __tablename__ = 'events'
    id                  = Column(Integer, Sequence("events_seq"), primary_key=True)
    left_id = Column(Integer, ForeignKey('order.id'))
    right_id = Column(Integer, ForeignKey('event.id'))

#    order_id            = Column(Integer, ForeignKey('order.id'), primary_key=True)
#    event_id            = Column(Integer, ForeignKey('event.id'), primary_key=True)
    type                 = Column(Enum('corporate', 'personal', name='enum_ev_type'))

    event = relationship(Event, backref="order_assocs")

    def __repr__(self):
        return "%s(events=%r,id=\"%s\")" % (self.__class__.__name__,self.event,self.id)

class Order(Base):
    __tablename__ = 'order'
    id                  = Column(Integer, Sequence("order_seq"), primary_key=True)
    name = Column(String(127))
    events = relationship(EventsAssoc)
    def __repr__(self):
        return "%s(name=\"%s\",id=\"%s\")" % (self.__class__.__name__,self.name,self.id)

db = create_engine('sqlite:////temp/test_assoc.db',echo=True)

#making sure we are working with a fresh database
metadata.drop_all(db)
metadata.create_all(db)

sm = orm.sessionmaker(bind=db, autoflush=True, autocommit=True, expire_on_commit=True)
session = orm.scoped_session(sm)

o = Order(name="order1")
ea_corp = EventsAssoc(type="corporate")
ea_corp.event = Event(name="Big Corporation")

ea_pers = EventsAssoc(type="personal")
ea_pers.event = Event(name="Person")

o.events.append(ea_corp)
o.events.append(ea_pers)
session.add(o)
session.flush()

query = session.query(Order).filter(and_(EventsAssoc.type=="corporate",Event.name=="Big Corporation"))

for order in query.all():
    print order
    print order.events 
```

这是 sqlalchemy 生成的查询：

```
SELECT "order".id AS order_id, "order".name AS order_name 
FROM "order", events, event 
WHERE events.type = ? AND event.name = ?
('corporate', 'Big Corporation') 
```

PS 为了增强关联对象模式，以便直接访问 EventsAssoc 对象是可选的，SQLAlchemy 提供了[关联代理扩展](http://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html)

# eclipse - 抑制 Eclipse 中的红线

> ID：14366188
> 
> 赞同：0
> 
> 时间：2013-01-16T19:26:26.160
> 
> 标签：eclipse

在运行 Eclipse 程序时，我得到了一些红线（很可能是日志）。谁能告诉我如何压制他们。我试图谷歌它，但找不到解决方案。

![在此处输入图像描述](../Images/660772d3c204c3a487dd95e15316692e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:57:08.600

默认情况下，如果程序使用`System.out.*`方法写入标准输出，则 Eclipse 中的输出为黑色。对于 stderr ( `System.err.*`)，Eclipse 使用红色。你是说你不想看到打印到stderr的东西吗？我不确定这是否是一个明智的主意...

顺便说一句，控制台的设置由 Window -> Preferences -> Run/Debug -> Console 控制。

# iphone - 如何获取由子精灵组成的CCSprite的高度和宽度（Cocos2D）

> ID：14366189
> 
> 赞同：2
> 
> 时间：2013-01-16T19:26:30.157
> 
> 标签：iphone, xcode, cocos2d-iphone, ccsprite

我有这样的东西

```
CCSprite *rootSprite = [CCSprite node];
CCSprite *subSpriteOne = [CCSprite spriteWithFile:@"sprite1.png"];
subSpriteOne.position = ccp(10, 10);
[rootSprite addChild:subSpriteOne];
CCSprite *subSpriteTwo = [CCSprite spriteWithFile:@"sprite2.png"];
subSpriteTwo.position = ccp(100, 100);
[rootSprite addChild:subSpriteTwo]; 
```

我的问题是属性 rootSprite.size.height 和 rootSprite.size.width 都返回 0.0。有没有办法让 rootSprite 返回节点及其子节点在屏幕上占用的实际高度和宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:30:25.937

您可以这样做，但您必须自己进行计算。标准内容大小属性返回精灵纹理的大小，但由于您的精灵没有纹理，它的大小为 0。

所以你会怎么做？好吧，您将不得不编写自己的方法来查看精灵的每个孩子，并考虑它们的大小和与根精灵位置的偏移量。如果您不知道要向根添加多少精灵，这可能会有点复杂，但是您可以编写一个一般情况。

```
-(CGSize) getSizeOfRootSprite:(CCSprite*)root
{
    float minX = 0;
    float minY = 0;
    float maxX = root->getContentSize().width;
    float maxY = root->getContentSize().height;
    for (CCSprite *child in root.children)
    {
        CGPoint pos = child.position;
        CGSize size = child.contentSize;
        if (pos.x - size.width/2 < minX) minX = pos.x - size.width/2;
        if (pos.y - size.height/2 < minY) minY = pos.y - size.height/2;
        if (pos.x + size.width/2 > maxX) maxX = pos.x + size.width/2;
        if (pos.y + size.height/2 > maxY) maxY = posY + size.height/2;
    }
    return CGSizeMake(maxX - minX, maxY - minY);
} 
```

换句话说，您必须检查每个子精灵并检查其大小如何影响根精灵的整体大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:34:10.743

是的，你可以获得 CCSprite 对象的高度和宽度。尝试这个：

```
CCSprite *subSpriteOne = [CCSprite spriteWithFile:@"sprite1.png"];

int height = [subSpriteOne boundingBox].size.height;
int width= [subSpriteOne boundingBox].size.width; 
```

它解决了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:20:40.497

cocos2d-iphone 论坛上的这个帖子有一个解决方案[。](http://www.cocos2d-iphone.org/forum/topic/688)本质上只是遍历 node.children 数组并更新父级的 contentSize

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T05:51:12.187

您可以将以下内容用于精灵的高度和宽度

sprite.getContentSize().height; sprite.getContentSize().width;

# business-intelligence - 在 DAX 中使用 RELATED 函数和 USERELATIONSHIP

> ID：14366192
> 
> 赞同：6
> 
> 时间：2013-01-16T19:26:38.173
> 
> 标签：business-intelligence, tabular, dax

我正在尝试使用“相关”函数从我的 BISM 模型中的另一个表中提取一个字段。由于有许多表与 People 表有关系，因此只有一个关系处于活动状态，其余关系处于非活动状态。在这种情况下，关系是非活动的，据我所知，我将使用“USERELATIONSHIP”函数来指定要使用的关系。根据我在这里找到的：[http](http://connect.microsoft.com/SQLServer/feedback/details/730493/powerpivot-dax-method-related-does-not-work-if-key-is-inactive) ://connect.microsoft.com/SQLServer/feedback/details/730493/powerpivot-dax-method-related-does-not-work-if-key-is-inactive 我想我可以做这个：

```
=CALCULATE(RELATED(People[FullName]]),USERELATIONSHIP(Def[OwnerID],People[PersonID])) 
```

但我得到了错误：

> 列“People[FullName]”要么不存在，要么与当前上下文中可用的任何表都没有关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:41:29.267

这是使用 AdventureWorksDW 数据集的示例...

```
EVALUATE(
    CALCULATETABLE(
        ADDCOLUMNS(
            'Internet Sales'
            ,"Order Calendar Year"
                ,CALCULATE(VALUES('Date'[Calendar Year]))
            ,"Ship Calendar Year"
                ,CALCULATE(
                    VALUES('Date'[Calendar Year])
                    ,FILTER(
                         'Date'
                        ,'Date'[DateKey] = 'Internet Sales'[ShipDateKey]
                    )
                )
            ,"Due Calendar Year"
                ,CALCULATE(
                     VALUES('Date'[Calendar Year])
                    ,FILTER(
                         'Date'
                        ,'Date'[DateKey] = 'Internet Sales'[DueDateKey]
                    )
                )
        )
    )
) 
```

此代码为 Internet Sales 表中的每个日期从 Date 表中提取 Calendar Year 到 Internet Sales 表：

*   订单日期（有效关系）
*   截止日期（非活动关系）
*   发货日期（非活动关系）

**编辑**：更正了第一反应（上图）...这里很好地说明了为什么 USERRELATIONSHIP 在这个场景中不起作用：[linky](http://javierguillen.wordpress.com/2012/03/05/userelationship-and-direction-of-context-propagation/) *

下面的 LOOKUPVALUE 也可以：

```
=LOOKUPVALUE(
     People[FullName]
    ,People[PersonID]
    ,FollowUps[OwnerID]
) 
```

# if-statement - If 语句的最大数量？

> ID：14366196
> 
> 赞同：0
> 
> 时间：2013-01-16T19:27:03.537
> 
> 标签：if-statement, statements

所以我对java很陌生。我一直在搞乱一些使用扫描仪测试用户输入的 if 语句。当我运行程序时，四个 if 语句中有三个起作用。第四次作为第三次运行......我不知道这是为什么。这是我的代码。希望大家给点建议。

```
 import java.io.*;
    import java.util.Scanner;

    public class TestFile5
    {
        public static void main(String[] args) throws IOException
    {
    //Have two choices? Simple and complicated?  Simple example = input (X) input.  Complicated = below
    Scanner user_input = new Scanner(System.in);

    System.out.println("Choose calculation type: Long or Short");

    String choicetype;
    System.out.print("Type: ");
    choicetype = user_input.next();

    String selection;
    if(choicetype.equals("Long"))
    {
        System.out.println("Selection: Long");
        System.out.println(" ");

        System.out.println("This is a calculator");
        System.out.println("First select type of function");
        System.out.println("1: Addition");
        System.out.println("2: Subtraction");
        System.out.println("3: Multiplication");
        System.out.println("4: Division");

        System.out.print("Selection: ");
        selection = user_input.next();

        if(selection.equals("Addition"))
        {
            System.out.println("Enter two numbers to add");
            int first_number;
            System.out.print("1: ");
            first_number = user_input.nextInt();
            int second_number;
            System.out.print("2: ");
            second_number = user_input.nextInt();

            System.out.println(first_number + second_number);

            System.exit(0);
        }
        if(selection.equals("Subtraction"))
        {
            System.out.println("Enter two numbers to subtract");
            int first_number;
            System.out.print("1: ");
            first_number = user_input.nextInt();
            int second_number;
            System.out.print("2: ");
            second_number = user_input.nextInt();

            System.out.println(first_number - second_number);

            System.exit(0);
        }
        if(selection.equals("Multiplication"));
        {
            System.out.println("Enter two numbers to multiply");
            int first_number;
            System.out.print("1: ");
            first_number = user_input.nextInt();
            int second_number;
            System.out.print("2: ");
            second_number = user_input.nextInt();

            System.out.println(first_number * second_number);

            System.exit(0);
        }
        //Does Not work.  Trys to multiply
        if(selection.equals("Division"))
        {
            System.out.println("Enter two numbers to divide");
            int first_number;
            System.out.print("1: ");
            first_number = user_input.nextInt();
            int second_number;
            System.out.print("2: ");
            second_number = user_input.nextInt();

            System.out.print("Answer: ");
            System.out.print(first_number / second_number);

            System.exit(0);
        }
    }
    if(choicetype.equals("Short"))
    {
        System.out.println("Selection: Short");
        System.out.println("");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:31:15.530

要回答这个问题 - 您可以实施的 if 语句没有最大数量。

我怀疑您的代码无法正常工作，因为存在以下错误：

```
if(selection.equals("Multiplication")); 
```

不应该有“;” 那里 - 它终止 if 语句并导致在上述 ifs 不正确的所有情况下执行乘法块（感谢 System.exit(0) - 如果程序在每个“ifs”中都没有退出，由于此错误，每次选择任何选项时都会执行乘法代码块）。

* * *

边注：

此外，值得注意的是 else ifs，甚至是 switch 语句，可能更适合这段代码。

当你有一堆“ifs”时，如果有多个 case 为真，它们都会执行。如果它是一个“if”，然后是“else ifs” - 链中只有一个会执行。

这是关于 switch 语句的快速教程，另一个可行的选择：

[http://www.homeandlearn.co.uk/java/java_switch_statements.html](http://www.homeandlearn.co.uk/java/java_switch_statements.html)

此外，如果一行代码在所有块之间共享，最好将该行放在所有场景的末尾。例如，System.exit(0) 发生在四个 if 中的每一个的末尾 - 为了减少冗余，最好将该行向下移动到这些选项的底部 - 就在“Division”的“}”之后案子。只是一个很好的练习，不是必需的。

# javascript - Soundmanager Inline Player 的调用停止

> ID：14366199
> 
> 赞同：0
> 
> 时间：2013-01-16T19:27:12.307
> 
> 标签：javascript

请帮忙！我不是最有经验的编码员，我正在尝试为我的 Soundmanager Inline mp3 制作一个手动停止按钮。我已经尝试了很多东西，但不知道如何访问 inlineplayer.js 来呼叫停止。

我在页面上的 div 中使用此代码：

```
 <link rel="stylesheet" type="text/css" href="http://www.synapseunrest.com/soundmanager/demo/play-mp3-links/css/inlineplayer.css" />
  <link rel="stylesheet" type="text/css" href="http://www.synapseunrest.com/soundmanager/demo/flashblock/flashblock.css" />
  <script type="text/javascript" src="http://www.synapseunrest.com/soundmanager/script/soundmanager2.js"> </script>
  <script type="text/javascript" src="http://www.synapseunrest.com/soundmanager/demo/play-mp3-links/script/inlineplayer.js" > </script>

<div id="sm2-container">
    <!-- SM2 flash goes here -->
</div>

<ul class="graphic">
  <li><a href="mp3/Centre for Indigenous Theatre.mp3">Centre for Indigenous Theatre</a></li>
  <li><a href="mp3/Fallen Angel.mp3">Fallen Angel</a></li>
  <li><a href="mp3/D'bi Young.mp3">D'bi Young</a></li>
  <li><a href="mp3/Haircuts.mp3">Haircuts By Kids</a></li>
  <li><a href="mp3/Hamlet.mp3">Hamlet</a></li>
  <li><a href="mp3/Kudelka.mp3">Kudelka</a></li>
  <li><a href="mp3/Lost Lyrics.mp3">Lost Lyrics</a></li>
  <li><a href="mp3/Next Sex.mp3">Next Sex</a></li>
  <li><a href="mp3/R Murray Shafer.mp3">R Murray Shaffer</a></li>
  <li><a href="mp3/Sarajevo.mp3">Sarajevo</a></li>
  <li><a href="mp3/Tallis Choir.mp3">Tallis Choir</a></li>
  <li><a href="mp3/Tallis.mp3" id="sound">Tallis</a></li>
   <li><a href="mp3/TDT Hidden Cameras.mp3" id="sound">TDT & the Hidden Cameras</a></li>
    <li><a href="mp3/The Real McCoy.mp3" id="sound">The Real McCoy</a></li>
    <li><a href="mp3/Final Fantasy.mp3" id="sound">Final Fantasy</a></li>

  </ul> 
```

最终，当我隐藏包含 div 时，我想停止这个播放器。我不知道如何从我的主页中调用另一个文档（inlineplayer.js）中的 javascript。我正在寻找诸如 soundmanager.stopSound() 之类的东西，我可以将其附加到我的显示/隐藏 div 操作中，或者甚至只是制作一个 STOP 按钮，它将杀死来自该播放器的所有声音。

我将此播放器基于此模板：[http ://www.schillmania.com/projects/soundmanager2/demo/play-mp3-links/](http://www.schillmania.com/projects/soundmanager2/demo/play-mp3-links/)

我有一种感觉，我应该从这里打电话：[http ://www.synapseunrest.com/soundmanager/demo/play-mp3-links/script/inlineplayer.js](http://www.synapseunrest.com/soundmanager/demo/play-mp3-links/script/inlineplayer.js)

但我不知道该怎么做！请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T15:13:27.943

由于您嵌入了*“inlineplayer.js”* ，因此在全局范围内应该有一个名为*“inlinePlayer”的 javascript 对象。*您可以在 hide-div 函数中使用该行：

```
inlinePlayer.stopSound(inlinePlayer.lastSound); 
```

甚至更好 - 检查对象是否存在以及是否播放了声音：

```
if(inlinePlayer){
    if(inlinePlayer.lastSound){
        inlinePlayer.stopSound(inlinePlayer.lastSound);
    }
} 
```

# javascript - 动态 div 工作但不显示数据

> ID：14366219
> 
> 赞同：0
> 
> 时间：2013-01-16T19:28:06.067
> 
> 标签：javascript, sqlite, dom

谁能告诉我我在这里做错了什么？在 htmlStr=theName 行之后的控制台日志上，我得到了在表单中输入的名称，保存在数据库中，然后查询回来。但是，最后页面中没有显示任何结果。我已经测试了 div 附加并且它正在工作。HTML

```
 <input id="allUsers" type="button" value="All users" onClick="queryDB();"> 
```

Javascript

```
 function queryDB() {
    var sqlStr = "SELECT * FROM USERS ORDER BY id ASC";
    console.log("SQL: " + sqlStr);
    db.transaction(function(tx) {
      tx.executeSql(sqlStr, [], querySuccess, onQueryFailure);
    }, onSqlError, onSqlSuccess);
    console.log("Leaving queryDB");
  }

      function querySuccess(tx, results) {
  console.log('You are in querysuccess');
  console.log(results);
  if (results.rows.length == 0) {
    $("#showUsers").html("No data");
    return false;
  }
  var htmlStr="";
  var theID;
  var theName;
  var thePhoto;
  var len = results.rows.length;
  console.log(len);
    for(var i = 0; i < len; i++){
        theID = results.rows.item(i).id;
        console.log(theID);
        theName = results.rows.item(i).username;
            htmlStr += theName;
        console.log(theName);
        thePhoto = results.rows.item(i).imagepath;
        console.log(thePhoto);
        var userDiv = document.createElement("div");//Create the div
        userDiv.innerHTML=htmlStr;
        document.getElementById('showUsers').appendChild(userDiv);//append it to the document
        userDiv.style.display = 'block';            
    };
} 
```

# jquery - 选项：选择不工作 jquery 1.9

> ID：14366220
> 
> 赞同：6
> 
> 时间：2013-01-16T19:28:06.863
> 
> 标签：jquery

以下：

```
 $("select option:contains(fish)").attr('selected', true); 
```

在 jQuery 1.9 以下的任何东西中都可以很好地工作，但在 jQuery 1.9+ 中根本不起作用。我一直在搜索有关任何更改的任何文档，但没有找到任何东西。

知道如何让这段代码与新的 jquery 一起工作吗？

此处示例（默认为 jQuery 1.4）：http: [//jsfiddle.net/reigel/TZmEw/](http://jsfiddle.net/reigel/TZmEw/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T19:32:36.823

在 jquery 1.9 中使用 Prop api 而不是 attr。

```
$("select option:contains(fish)").prop('selected', 'selected'); 
```

或者

```
 $("select option:contains(fish)").prop('selected', true); 
```

原因：jQuery 1.6 引入了用于在节点上设置或获取属性的 .prop() 方法，并且不推荐使用 .attr() 来设置属性。但是，直到 1.9 的版本继续支持在特定情况下使用 .attr()。当使用区分属性和属性的选择器时，这种以向后兼容性为名的行为会导致混淆。

来源：http: [//jquery.com/upgrade-guide/1.9/#changes-of-note-in-jquery-1-9](http://jquery.com/upgrade-guide/1.9/#changes-of-note-in-jquery-1-9)

在 Attr Api 中提到：**从 jQuery 1.6 开始， .attr() 方法为尚未设置的属性返回 undefined。此外，.attr() 不应用于普通对象、数组、窗口或文档。要检索和更改 DOM 属性，请使用 .prop() 方法。**

来源：[http ://api.jquery.com/attr/#entry-longdesc](http://api.jquery.com/attr/#entry-longdesc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:30:45.513

```
$("select option:contains(fish)").attr('selected', 'selected'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:34:02.810

请参阅关于 1.9 [的主题的 jQuery 文档。](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)`.attr`vs.`.prop`可能会令人困惑，因为我知道没有特定的方法可以知道“属性”是什么。出于所有意图和目的，在更改用户有能力更改的值时..尤其是布尔值，您应该使用`.prop`

一个例外是输入的值——你应该使用`.val`它。`.val`同样，使用设置元素值可能更好`<select>`- 在您的情况下不容易做到，但它会更准确。

> jQuery 1.6 引入了 .prop() 方法来设置或获取节点上的属性，并且不推荐使用 .attr() 来设置属性。但是，直到 1.9 的版本继续支持在特定情况下使用 .attr()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T19:41:40.003

试试这个

```
$("select option").removeAttr('selected').filter(":contains(fish)").attr('selected', true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T19:29:59.027

由于 jQuery `1.6`，您应该使用`prop`：

```
$("select option:contains(fish)").prop('selected', true); 
```

在 jQuery`1.6.1`中，他们将此功能重新引入该`attr`方法，以实现向后兼容性（人们抱怨）。`1.9` [他们再次将其删除](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)，因为此功能已被弃用足够长的时间。

# c# - 是否可以将一个巨大的 WebForms 网站迁移到 MVC？

> ID：14366232
> 
> 赞同：4
> 
> 时间：2013-01-16T19:28:59.797
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, webforms

这是一个完整的大学网站。

一些旧页面是经典的 ASP，所有较新的页面都是带有 C# 代码隐藏的 ASP.NET。我们现在正在运行 ASP.NET 4，因此我们将迁移到 MVC 3。

所以，一些问题；

*   我们该如何迁移这个网站？我已经阅读了一些内容，似乎可以同时执行 MVC 和 Web 表单，但这有多安全？

*   文件夹结构....我们的很大。而且很复杂。考虑到我们庞大的设置，混合设置的安全性如何？

*   是不是真的值得吗？我最近一直在研究和阅读 MVC 并将其用于个人网站，但这将是一个巨大的变化。

*   有人可以将我链接到大型 MVC 项目的一些示例（带有源代码！）以供参考吗？我很想看看源头。

*   这种改变需要多长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:34:34.993

这基本上相当于对网站的完全重写。少一点就是糖衣的努力。即使你重用所有的网页并且几乎没有使用 MVC 框架的任何功能，单单回归测试就相当于一个完整的项目。

如果您决定重新编写您的应用程序，这是值得的。如果你要重做它，MVC 将是一个不错的方法，否则 - 我不羡慕你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:46:39.903

这个问题很模糊！是的，这是可能的。让应用程序架构师完成当前站点并制定将其转换为 MVC 的计划。不过，我认为混合方法是一个非常糟糕的主意。两者之间的界限往往很粗糙，如果您现有的员工习惯于网络表单，您将不可避免地“泄漏”网络表单实践到您的 MVC 站点中。承诺改变或根本不这样做。

这种改变值得吗？也许！远离经典的 asp 是一个不错的选择，所以有一点赞成。想到的其他事情：您当前网站的痛点是什么？不稳定吗？您的经典 asp 是否陷入大量包含文件中？网站的模块化程度如何？你觉得你的员工可以接受 MVC 培训吗？您需要什么样的预算才能进行过渡？什么样的时间线？如果失败，您的组织将损失多少钱？多少可信度？如果你失败了，你会为你的竞争对手创造什么样的机会？

# django - 如何允许工作人员在 heroku 上为我的 python/django 应用程序运行 ffmpeg 命令？

> ID：14366233
> 
> 赞同：1
> 
> 时间：2013-01-16T19:29:01.633
> 
> 标签：django, heroku, ffmpeg, django-celery, redistogo

几周以来，我一直试图弄清楚这一点。我之前问过一个类似的问题[，](https://stackoverflow.com/questions/14283021/how-to-use-django-celery-rq-worker-to-execute-a-video-filetype-conversion-ffm)但我从来没有得到任何答复。我真的无法在任何地方找到任何好的文档。我需要做的就是在从表单上传文件时使用工作人员（不在乎安装了 django-celery 和 rq 的工作人员）将文件转换为 flv。我能够在本地轻松完成这项工作，但一个多星期后，无论我尝试了什么，我都无法让它发挥作用。我尝试为 celery 添加 tasks.py 文件，或为 rq 添加 worker.py 文件，但我不知道还需要做什么（如果有的话），例如在我的 settings.py 或 Procfile 中。我的 procfile 看起来像：

```
web: gunicorn lftv.wsgi -b 0.0.0.0:$PORT
celeryd: celery -A tasks worker --loglevel=info
worker: python worker.py 
```

我的 requirements.txt 显示了我已安装的内容，如下所示：

```
Django==1.4.3
Logbook==0.4.1
amqp==1.0.6
anyjson==0.3.3
billiard==2.7.3.19
boto==2.6.0
celery==3.0.13
celery-with-redis==3.0
distribute==0.6.31
dj-database-url==0.2.1
django-celery==3.0.11
django-s3-folder-storage==0.1
django-storages==1.1.6
gunicorn==0.16.1
kombu==2.5.4
pil==1.1.7
psycopg2==2.4.5
python-dateutil==1.5
pytz==2012j
redis==2.7.2
requests==1.1.0
rq==0.3.2
six==1.2.0
times==0.6 
```

我的 settings.py 中唯一相关的内容如下：

```
BROKER_BACKEND = 'django'
BROKER_URL = #For this I copy/pasted the code from my redistogo add-on from heroku. Not sure if correct
BROKER_TRANSPORT_OPTIONS = {'visibility_timeout': 1800} 
```

在不占用太多空间的情况下，我的 tasks.py 看起来像这样：

```
import subprocess

@task
def ffmpeg_conversion(input_file):
    converted_file = subprocess.call(input_file)
    return converted_file 
```

我使用 S3 存储我的静态和媒体文件，并且上传工作（将上传添加到我的存储桶），但是无论我尝试什么转换都不会。有没有适合初学者的好教程？我遵循了 heroku redis 教程、celery 文档、rq 文档以及我能找到的任何其他内容，并让示例正常工作，但工作人员不会从我的角度执行命令。例如，我尝试过的许多事情之一：

```
...
ffmpeg = "ffmpeg -i %s -acodec mp3 -ar 22050 -f flv -s 320x240 %s" % (sourcefile, targetfile)
ffmpegresult = ffmpeg_conversion.delay(ffmpeg)
... 
```

或使用 rq

```
...
q = Queue(connection=conn)
result = q.enqueue(ffmpeg_conversion, ffmpeg)
... 
```

我似乎应该很简单，但是我完全是自学成才，从未部署过任何项目，而且似乎没有任何好的文档或教程可用于我正在尝试做的事情。我无法判断我是否完全脱离并完全错过了一些重要的东西或相对接近于让它发挥作用。我真的很感激任何输入，这让我发疯。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:58:59.947

I'm trying to do something similar and I don't think you need to create a worker. Why not use a custom build pack, such as [https://github.com/integricho/heroku-buildpack-python-ffmpeg](https://github.com/integricho/heroku-buildpack-python-ffmpeg). If you had ffpmeg installed at the OS level, you could then issue video transformation commands from python itself, without the need for a separate worker.

Hope that helps ?

# php - 将消息 TTL 设置为一小时 RabbitMQ

> ID：14366235
> 
> 赞同：5
> 
> 时间：2013-01-16T19:29:09.577
> 
> 标签：php, symfony, rabbitmq, amqp, ttl

如何设置消息 TTL（不是队列）

*   交换（交换发送到多个队列）
*   消息（发布消息时）
*   队列（在队列本身上，但同样这是消息 TTL，而不是队列 TTL）

我正在运行 RabbitMQ 3.x、Symfony 2.1.x 和[RabbitMqBundle](https://github.com/videlalvaro/RabbitMqBundle)。

我试过的：

*   当我从 RabbitMQ Admin UI 创建队列时设置消息 TTL

我将消息属性设置为`'x-message-ttl' => 3600000`. 在 RabbitMQ 配置中，它看起来像这样：

```
{
    "name": "blah_queue",
    "vhost": "foobar",
    "durable": true,
    "auto_delete": false,
    "arguments": {
            'x-message-ttl' => 3600000
    }
}, 
```

这是我得到的错误：

```
PRECONDITION_FAILED - inequivalent arg 'x-message-ttl'for queue 
```

我尝试在 config.yml ( symfony / [https://github.com/videlalvaro/RabbitMqBundle](https://github.com/videlalvaro/RabbitMqBundle) / README )中设置

这给捆绑包使用的 AMQP 库带来了一堆错误。

我尝试修改 AMQP 库本身以允许`x-message-ttl`消息属性，但出现异常`Error sending data`。

有没有人使用 RabbitMQBundle 设置消息 TTL？

```
queue_options:    {name: 'blah_queue', arguments: {'x-message-ttl' => 3600000}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:06:06.827

```
queue_options:    {name: 'blah_queue', arguments: {'x-message-ttl' : ['I', '3600000']}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T14:15:02.730

**I can set the queue message time to live from the rabbitmq management console like this:**

1.  I'm using RabbitMQ 3.1.5 on Fedora Linux, visit this in the browser:

    [http://your_rabbitmq_server.com:15672](http://your_rabbitmq_server.com:15672)

2.  Click "Queues" tab and scroll down to where it says: "Add a new queue"

3.  Under the subsection: "Add a new queue", fill out these text boxes:

    ```
    Virtual host:             /
    Name:                     myqueue1
    Durability:               Durable
    Auto delete:              No
    Message TTL:     
    Auto expire: 
    Max length: 
    Dead letter exchange:
    Dead letter routing key: 

    Argument key      = x-message-ttl
    Argument value    = 3600000
    Argument datatype = number 
    ```

4.  Click OK to save it.

Now I could consume from the queue and the message will still be there for the specified time.

# php - 如何区分正确和错误的答案

> ID：14366236
> 
> 赞同：1
> 
> 时间：2013-01-16T19:29:11.370
> 
> 标签：php

如果选项类型是字母，下面的代码将正确的字母和错误的字母分开。例如，如果选项类型是 AD 并且正确的字母是 B，那么它使用`$wrong`变量从 ABCD 中删除 B，使其成为`$incorrect_ans`变量的 ACD。

现在我想做的是，如果选项类型是`Yes or No`，正确答案是`Yes`，那么它应该分开`Yes`，`Yes, No`以便我可以`No`在`incorrect_ans`变量中显示。问题是目前它没有拆分这两个选项，因此当在这个例子中`No`应该不正确时，它会将这个答案显示为不正确的答案。但是如何才能做到这一点呢？

我也希望同样适用于`True or False`选项。正如我提到的，我的代码适用于字母答案，而不是`Yes or No`or `True or False`。

下面是代码：

```
$specialOptionTypes = array(
     'Yes or No'     => array('Yes', 'No'),
     'True or False' => array('True', 'False')
);

while ($stmt->fetch()) {
    // Do this for each row:
    if (array_key_exists($dbOptionType, $specialOptionTypes)) {
        $options = $specialOptionTypes[$dbOptionType];
    } else if (preg_match('/^([A-Z])-([A-Z])$/', $dbOptionType, $match)) {
        $options = range($match[1], $match[2]);
    } else {
        // issue warning about unrecognized option type
        $options = array();
    }
    $right = $dbAnswer; // $right = 'True';
    $wrong = array_diff($options, $right);
    $incorrect_ans[] = $wrong;
} 
```

**更新：**

如果我在数据库中有这些数据

问题表：

```
QuestionId QuestionNo OptionId
11          1         3
12          2         26 
```

Option_Table 表：

```
OptionId OptionType
1        A-C
2        A-D
3        A-E

..............

26       Yes or No 
```

答案表：

```
AnswerId Answer QustionId
1        A      11
2        C      11
3        Yes    12 
```

好的，对于问题 1（仔细查看表格），选项类型 ($OptionType) 的`A-E`含义是使用以下代码：

```
(preg_match('/^([A-Z])-([A-Z])$/', $dbOptionType, $match)) {
        $options = range($match[1], $match[2]); 
```

它显示这些选项`A B C D E`。

现在问题 1 的正确答案是 A 和 C（使用`$right = $dbAnswer;`）。因此，使用以下方法将正确答案与错误答案分开：

$wrong = array_diff($options, $right);

然后我们留下了不正确的答案 as `B D E`。这些使用以下方法存储在数组中：

```
$incorrect_ans[] = $wrong; 
```

我遇到的问题是，这不适用于问题 2 中`Yes or No`的选项。错误答案是问题 2 `No`，正确答案是`Yes`问题 2，但它不会拆分`Yes`，`No`因为它将它们都显示为错误答案。这是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:41:56.470

稍微更新一下你的代码

```
$right = array($dbAnswer); // $right = array('True');
$incorrect_ans[] = array_diff( $options, $right ); 
```

`array_diff`需要两个参数都是数组。您还可以`var_dump`确保`$option`变量包含正确的数据。当然，最终的`$incorrect_ans`数组可以同时包含“是”和“否”，因为每一个都是在您获取每一行时添加的。**的每个**元素都包含**它所解析的问题**`$incorrect_ans`的错误答案。我认为您应该使用问题 ID 作为键 ob the ，而不仅仅是使用默认的数字键。**`$incorrect_ans`**

# sql - SQL Server查询只返回一个值而不是返回多个值

> ID：14366242
> 
> 赞同：1
> 
> 时间：2013-01-16T19:29:26.660
> 
> 标签：sql, sql-server-2008

我有以下查询返回所选用户的电子邮件 ID 的逗号分隔列表。

```
CREATE TABLE TEST
(
    ID INT PRIMARY KEY,
    FIRSTNAME VARCHAR(30) NOT NULL,
    LASTNAME VARCHAR(30) NOT NULL,
    EMAIL VARCHAR(50)
)

INSERT INTO TEST VALUES (1, 'Tom', 'Lew', 'tom@hotmail.com')
INSERT INTO TEST VALUES (2, 'Tom', 'Lew', 'tom@hotmail.com')
INSERT INTO TEST VALUES (3, 'Jack', 'Stan', 'jstan@hotmail.com')
INSERT INTO TEST VALUES (4, 'Tom', 'Reed', 'tomreed@hotmail.com')
INSERT INTO TEST VALUES (5, 'Tom', 'Reed', 'tomr@hotmail.com')
INSERT INTO TEST VALUES (6, 'Tom', 'Reed', 'treed@hotmail.com')

DECLARE @result VARCHAR(MAX)

    SELECT @result = COALESCE(@result + ',', '') + [EMAIL]
    FROM [TEST]
    WHERE [FirstName] = 'Tom' AND [LastName] = 'Reed'

    SELECT @result 
```

我需要修改查询，使其仅返回一个值 - 如果只有一个电子邮件 ID 与“Tom Reed”关联，则返回一个电子邮件 ID - 如果为“Tom Reed”找到多个电子邮件 ID，则为字符串“多个”

我不知何故能够得到想要的结果，但不确定性能。在实际场景中，该表将有数千条记录，并将连接到其他表。

```
SELECT
    DISTINCT
    CASE 
        WHEN CNT = 1 THEN EMAIL
        ELSE 'MULTIPLE'
    END
FROM (SELECT 
    ID, EMAIL,
    COUNT(*) OVER() CNT
    FROM TEST
    WHERE [FirstName] = 'Tom' AND [LastName] = 'Reed') T 
```

对不起，如果主题行和内容不匹配。不确定描述。

**期望的结果：**

1.  如果询问“汤姆·里德”

    ```
    Output: Multiple 
    ```

2.  如果询问“汤姆·卢”

    ```
    Output: Multiple 
    ```

3.  如果询问“杰克·斯坦”

    ```
    Output: jstan@hotmail.com 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:31:21.477

我认为这会起作用（未经测试）：

```
SELECT DISTINCT
    FirstName, 
    LastName,  
    CASE 
      WHEN COUNT(Email) OVER (PARTITION BY FirstName,LastName) = 1 
      THEN Email 
      ELSE 'Multiple' END
FROM Test 
```

如果您只需要传入参数中的单词：

```
SELECT DISTINCT
    CASE 
      WHEN COUNT(Email) OVER (PARTITION BY FirstName,LastName) = 1 
      THEN Email 
      ELSE 'Multiple' END
FROM Test
WHERE FirstName = 'Tom' 
   AND LastName = 'Reed' 
```

这应该返回电子邮件或单词 Multiple。

# openssl - 在自定义cert_verify_callback中获取服务器发送的openssl x509证书链

> ID：14366244
> 
> 赞同：4
> 
> 时间：2013-01-16T19:29:39.777
> 
> 标签：openssl, certificate, x509, schannel

我正在考虑使用使用 Windows 系统存储（通过[SSL_CTX_set_cert_verify_callback](http://www.openssl.org/docs/ssl/SSL_CTX_set_cert_verify_callback.html)）的一个覆盖默认证书验证过程。该应用程序是一个 Web 客户端，我需要接受添加到系统存储区的公司范围的自签名证书。

一旦我有一个（可能不完整的）链，我

*   创建一个内存中的 WinCrypt 存储，
*   将服务器提供的链（最终证书除外）添加到其中
*   使用 WinCrypt 从临时存储和系统存储中构建完整的链
*   使用 WinCrypt 验证链（从 SSL 对象传递 servername 值）

但是[X509_STORE_CTX_get1_chain()](http://www.openssl.org/docs/crypto/X509_STORE_CTX_get_error.html)返回可信链，它只有在[X509_verify_cert()](http://www.openssl.org/docs/crypto/X509_verify_cert.html)运行后才可用。

我需要的是 X509_STORE_CTX::untrusted （它只有握手的证书），但它显然不是通过 API 导出的。

我可以将最终证书传递给 WinCrypt，但这意味着下载我想避免的中间证书。

我的问题是，我在做一些倒退的事情吗？我应该让 openssl 构建链并进行验证，然后使用 WinCrypt 重做吗？这似乎很恶心。我可以添加一个 X509_STORE_CTX_get_untrusted() 函数并重建 libeay32.dll，但我宁愿不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:53:49.743

据我所知，**默认**验证功能是**X509_verify_cert**。如果您没有设置自己的验证回调（使用`SSL_CTX_set_cert_verify_callback`），则会调用此函数。它在**crypto/x509/x509_vfy.c**中定义。我建议您查看此函数的源代码，以确定您应该做什么来说服 OpenSSL 进行协作（例如正确返回错误代码）。

我希望这会有所帮助。

PS看起来你是对的：有访问器函数`X509_STORE_CTX::untrusted`，所以它可能是OpenSSL的“私有”东西。在`X509_verify_cert`this 变量中只是直接访问。

# vb.net - 长 StringBuilder 的自动清理？

> ID：14366245
> 
> 赞同：2
> 
> 时间：2013-01-16T19:29:46.113
> 
> 标签：vb.net, visual-studio, resharper, stringbuilder

我正在使用`StringBuilder.Append()`VB.NET 中的方法创建一个大型 SQL 语句。我想将整个 SQL 语句放在一个`Append()`块中，并使用某种功能自动创建许多`Append()`块来清理代码。

`Append()`我正在使用 Visual Studio 2008 和 ReSharper 7，但除了手动添加块外，我找不到任何方法。ReSharper 的代码清理出人意料地没有帮助。

这可能吗？

编辑进一步澄清：

我希望能够编写一个长的 Append() 并让 IDE 或某些插件将其分成几个 Appends() 以达到审美目的。

例如：

```
Dim sql As New StringBuilder

sql.Append("SELECT Condition1 AS ""THIS_NAME"", Condition2 AS ""THIS_OTHER_NAME"", Condition3 AS ""ANOTHER_NAME"", Condition4 AS ""ANOTHER_NAME"", Condition5 AS ""THIS_NAME"" FROM MY_TABLE WHERE Condition1 = 'ThisValue' AND Condition2 = 'ThisOtherValue' AND Condition3 = 'ThisOtherValue' AND Condition4 = 'AnotherValue' AND Condition5 = 'SomeOtherValue'") 
```

上面的 Append() 很长，可读性不是很好。但是，将 SQL 语句拆分为多个 Append 块时，有时很难使所有语法都正确。我想要一些插件将其转换为以下内容：

```
sql.Append("SELECT Condition1 AS ""THIS_NAME"",")
sql.Append(" Condition2 AS ""THIS_OTHER_NAME"",")
sql.Append(" Condition3 AS ""ANOTHER_NAME"",")
sql.Append(" Condition4 AS ""ANOTHER_NAME"",")
sql.Append(" Condition5 AS ""THIS_NAME"",")
sql.Append(" FROM MY_TABLE"",")
sql.Append(" WHERE Condition1 = 'ThisValue'") 
```

....等等.. 它不必以这种方式精确格式化，只需将其分成几个 Append 语句的分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:32:34.287

The answer to your question is: "No, there's no R# ability for this."

However if this is purely for formatting, a much more appropriate solution is to have your [String literals be spread across multiple lines](http://msdn.microsoft.com/en-us/library/5chcthbw%28v=vs.80%29.aspx).

You don't want to pollute your code with a dozen method calls to achieve the same thing.

```
 sql.Append("SELECT Condition1 as ""THIS_NAME""," & _
               " Condition2 as ""THIS_OTHER_NAME""," & _
               " Condition3 AS ""ANOTHER_NAME"",") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:44:09.093

我认为我不完全理解您的问题，但在这里您可以添加任意数量的 SQL 语句......

```
 Dim SQLBuilder As New System.Text.StringBuilder

   SQLBuilder.Append("YOUR SQL STATEMENT") 
```

现在我不确定你在清理代码中添加许多附加块是什么意思？您能否更详细地解释一下，以便我们为您提供帮助？

我想说如果你想清除 StringBuilder 你可以在再次填充之前清空它......

```
 SQLBuilder.Remove(0, SQLBuilder.Length) 
```

如果你所做的只是创建一个语句，为什么不声明一个字符串变量来保存这个语句呢？见下文...

```
 Dim strSQLQuery As String = "YOUR STATEMENT" 
```

然后你可以在你想要的地方使用它并随时设置它......

谢谢！

# salesforce - Salesforce.com：用户无法编辑他添加到他不拥有的帐户的注释

> ID：14366246
> 
> 赞同：0
> 
> 时间：2013-01-16T19:29:48.030
> 
> 标签：salesforce, user-permissions

我有一个用户正在尝试编辑他在他不拥有的帐户中创建的注释。他收到以下错误：

权限不足 您没有执行您请求的操作所需的访问级别。如果需要访问，请联系记录的所有者或您的管理员。

任何帮助是极大的赞赏。

干杯! 隆美尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:17:19.580

您必须授予用户编辑此特定帐户的权限。通过[共享]按钮或（硬核）共享规则（或者如果是偶然的），只需给他“修改所有数据”；）

与任何 Master-Detail 情况一样，您需要能够与父母合作，这会以某种方式级联到子记录。

[https://help.salesforce.com/apex/HTViewHelpDoc?id=notes.htm&language=en_US](https://help.salesforce.com/apex/HTViewHelpDoc?id=notes.htm&language=en_US)

> 除非您也有权编辑与其关联的记录，否则您无法编辑便笺或附件。
> 
> 要删除笔记或附件，您必须是笔记或附件的所有者或拥有“修改所有数据”权限的管理员。笔记所有权由所有者字段确定。附件所有权由 created by 字段确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:08:02.233

查看帐户所有者的用户详细信息。添加了想要将注释更新为“默认客户团队”成员的用户由于他是内部销售代表，因此他的团队角色是内部销售代表这样，每次帐户所有者创建一个全新帐户时，用户将自动添加要编辑的注释。

还必须检查两个复选框：

*   自动将我的默认客户团队添加到我创建的客户或转移给我的客户
*   使用这些成员更新客户团队

再次感谢眼霜！

干杯! 隆美尔

# jquery - 防止固定位置导航栏重叠粘性页脚

> ID：14366249
> 
> 赞同：1
> 
> 时间：2013-01-16T19:29:50.357
> 
> 标签：jquery, css

我希望导航栏粘在视口的底部，但要防止它与固定高度的粘性页脚重叠。

标记如下：

```
<div id="wrap">
  <div id="main"></div>
</div>
<div id="footer"></div>
<div id="command-bar"></div> 
```

并且 CSS 是按照[cssstickyfooter.com](http://cssstickyfooter.com)的。

[您可以在http://jsfiddle.net/z2C5S/2/](http://jsfiddle.net/z2C5S/2/)看到一个示例。

### 更新

使用下面的 JavaScript 越来越接近，当非常缓慢地向上滚动时似乎有点重叠（[http://jsfiddle.net/z2C5S/16](http://jsfiddle.net/z2C5S/16)）

```
$(function () {

  var setCommandBarPosition = function () {
    var footerOffset = $("#footer").offset().top;
    var scrollTop = $(window).scrollTop();
    var windowHeight = $(window).height();

    var weOverlappedFooter = ((windowHeight + scrollTop) >= (footerOffset + 40)); // + the height of the command bar

    $("p").html("Overlapped: " + weOverlappedFooter);

    if (weOverlappedFooter) {
      $("#command-bar").removeClass("affix-bottom");
    } else {
      $("#command-bar").addClass("affix-bottom");
    }
  };

  $(window).scroll(function () {
    setCommandBarPosition();
  });

  setCommandBarPosition();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:33:10.903

这是我的解决方案：

[http://jsfiddle.net/z2C5S/14/](http://jsfiddle.net/z2C5S/14/)

基本上，添加一个看起来像主导航栏的辅助导航栏并将其放在页脚内。在主导航上方为页脚提供一个 z-index，因此当您向下滚动时，页脚和辅助导航会覆盖主导航。

```
<div id="wrap">
    <div id="main"></div>
</div>

<div id="footer">
    <div id="second-command"></div>
</div>
<div id="command-bar"></div>

* {
    margin:0;
    padding:0;
}
html, body {
    height: 100%;
}
#wrap {
    min-height: 100%;
}
#main {
    overflow:auto;
    min-height: 800px
}
/* must be same height as the footer */
#footer {
    position: relative;
    margin-top: -180px;
    /* negative value of footer height */
    height: 180px;
    clear:both;
    background-color: #999;
    z-index:2;
}
/*Opera Fix*/
body:before {
    /* thanks to Maleika (Kohoutec)*/
    content:"";
    height:100%;
    float:left;
    width:0;
    margin-top:-32767px;
    /* thank you Erik J - negate effect of float*/
}

#command-bar {
   position: fixed;
   bottom: 0px;
   left: 0;
   right: 0;
   height: 40px;
   background-color: #000;
   z-index:1;
}

#second-command {
  height:40px;
  width:100%;
  background-color:blue;
} 
```

是的，有一小部分你会看到一个重叠，但这是我在 CSS 中知道的最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:02:28.530

我最终能够达到预期的效果。

我必须更改我的标记，以便命令栏位于主包装器 div 内。这样一来，在较小的页面上（无需滚动），命令栏将位于 div 的顶部，而不会强制滚动条。

```
<div id="wrap">
  <div id="command-bar">
    <p></p>
  </div>
  <div id="main"></div>
</div>
<div id="footer"></div> 
```

以下代码负责根据页面的滚动位置调整命令栏位置。本质上，我们正在检查滚动时视口是否与页脚重叠：

```
$(function () {

  var setCommandBarPosition = function () {
    var footerOffset = $("#footer").offset().top,
        scrollTop = $(window).scrollTop(),
        windowHeight = $(window).height(),
        commandBarHeight = $("#command-bar").height(),
        weOverlappedFooter = ((windowHeight + scrollTop - commandBarHeight) >= footerOffset);

    $("p").html("Overlapped: " + weOverlappedFooter);

    if (weOverlappedFooter) {
      $("#command-bar").removeClass("affix-bottom");
    } else {
      $("#command-bar").addClass("affix-bottom");
    }
  };

  $(window).scroll(function () {
    setCommandBarPosition();
  });

  setCommandBarPosition();
}); 
```

除了标准的粘性页脚 CSS 之外，我们确保在到达页脚时命令栏设置为绝对：

```
#command-bar {
  bottom: 180px;
  height: 40px;
  width: 100%;
  background-color: black;
  position: absolute;
  z-index: 1;
}
p {
  color: white;
}
#command-bar.affix-bottom {
  position: fixed;
  bottom: 0;
} 
```

[在http://jsfiddle.net/benfosterdev/TKMaa](http://jsfiddle.net/benfosterdev/TKMaa)工作演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T18:14:39.470

@BenFoster 的回答对我来说不太奏效，weOverlappedFooter 从来都不是真的（可能是因为我在 CSS 中用“top：”而不是“bottom”定位了左栏）。

对于 webOverlapped 计算，我使用了以下内容：

```
 footerOffset = $("footer").offset().top
    commandBarTop = 30; // had to copy this value from css, not completely DRY solution
    commandBarBottom = $("#command-bar").outerHeight( true)+navBarTop+$(window).scrollTop();
    weOverlappedFooter = ((commandBarBottom) >= footerOffset); 
```

对于 CSS

```
affix-bottom {
    position:absolute;
    top:initial;
    bottom:40px;
} 
```

否则，我使用了上面 Ben 的其余解决方案。

# ldap - 所有关于使用 ldap 服务器的 liferay 配置

> ID：14366256
> 
> 赞同：1
> 
> 时间：2013-01-16T19:30:07.657
> 
> 标签：ldap, liferay-6

我是liferay的新手。我想用 liferay 6.1 GA 2 配置 LDAP 服务器。有人可以告诉我我必须遵循的步骤吗？我只知道如何在我的本地机器上设置 liferay，但我不知道进一步的程序。任何帮助都会被挪用。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:41:46.360

实际上，我首先需要做很多事情：

1.  设置 LDAP 服务器（除非您需要连接到现有服务器）
2.  花一些时间了解 LDAP 绑定机制（有不同的模式，如匿名绑定、与管理员绑定和搜索 etch）
3.  安装一些软件来浏览LDAP目录
4.  想想你将拥有什么样的身份验证程序。您要将用户导出到 LDAP 吗？你也要进口吗？用户能否从 protal 更改他们的密码？如果 LDAP 身份验证失败，是否会使用门户网站的密码对其进行身份验证
5.  了解 liferay 的 LDAP 特定参数的含义。有些参数是从portal-ext.properties 设置的，而其他一些参数是由门户管理员的控制台（门户设置/身份验证）定义的。您必须考虑Liferay 的用户和用户组属性如何与LDAP 的属性相匹配
6.  考虑到 Liferay 在 LDAP 上的错误。许多版本在引入新错误的同时修复了一些错误
7.  逐步配置 Liferay 以与 LDAP 绑定。检查和测试 LDAP 服务器绑定、用户和用户组扫描。测试其他场景（导入用户、从 protal 注册创建一个新用户、在 LDAP 服务器关闭的情况下进行身份验证等）

一般来说，不要急于跳入，花点时间学习，因为它会节省你很多时间

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T06:10:19.640

你应该看看[Liferay 用户指南](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide)，有一个部分解释了[LDAP 设置](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/ldap)。

这篇博文也可能会有所帮助：[http ://www.opensourceforlife.com/2012/05/liferay-61-ldap-config-from-portal.html](http://www.opensourceforlife.com/2012/05/liferay-61-ldap-config-from-portal.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T16:11:53.617

导出密码到 LDAP 存在问题：

*   [https://issues.liferay.com/browse/LPS-43045](https://issues.liferay.com/browse/LPS-43045)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T15:45:25.377

如果密码未加密地存储在 Liferay 的数据库中，则存在一个关于密码仅在 LDAP 中更新的公开错误：[创建用户时在 LDAP 中导出用户密码](http://issues.liferay.com/browse/LPS-4608 "LPS-4608")

# matlab - Matlab“for循环”创建矩阵

> ID：14366258
> 
> 赞同：2
> 
> 时间：2013-01-16T19:30:10.823
> 
> 标签：matlab, loops, for-loop, matrix

我有一个相当大的向量，名为`blender`. 我已经提取了大于（不相关）的`n`元素。现在我的困难如下：`blender``x`

我正在尝试创建一个 ( `21 x n`) 矩阵，其中搅拌机的每个元素加上之前的 10 个东西，以及之后的 10 个东西。

```
element=find(blender >= 120); 
```

我一直在尝试以下变体：

```
for i=element(1:end)
    Matrix(i)= Matrix(blender(i-10:i+10));
end 
```

然后我想在按 Enter 时绘制矩阵的一列。第二部分我可以稍后弄清楚，但我会感谢一些帮助制作矩阵

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:40:28.773

首先，您可以使用数组的“逻辑索引”，它使用逻辑表达式来处理您的向量。，`blender = [2, 302, 35, 199, 781, 312, 8]`它可能看起来像这样：

```
>> b_hi = blender(blender>=120)
b_hi =
       302  199  781  312 
```

其次，您可以像 in 那样连接数组`b_padded = [1, 2, b_hi, 3, 4]`。如果`b_hi`是列向量，您将使用分号而不是逗号。

第三，有一个函数`reshape`允许您将结果向量转换为矩阵。`doc reshape`会告诉你细节。例如，要`b_padded`变成一个 2×4 矩阵，

```
>> b_matrix = reshape(b_padded, 4, 2)
b_matrix =
           1   302   781     3
           2   199   312     4 
```

会做。这意味着您可以在没有任何 for 循环的情况下完成所有工作。请注意，转置 的结果`reshape(b_padded, 2, 4)`将为您提供另一个可能的 2×4 矩阵。您通过 获得矩阵的转`A`置`A'`。你会发现你想要哪一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:36:46.877

您需要创建一个新矩阵，并使用两个索引，以便 Matlab 知道它正在分配给 2D 矩阵中的列。

```
NewMatrix = zeros(21, length(element));
for i = 1:length(element)
    k = element(i);
    NewMatrix(:,i)= Matrix(blender(k-10:k+10));
end 
```

# function - 脚本中的 MATLAB 函数语法？

> ID：14366259
> 
> 赞同：1
> 
> 时间：2013-01-16T19:30:12.773
> 
> 标签：function, matlab, syntax

在我的脚本中声明函数时遇到一些问题：

%读取原始音频数据

```
refData = wavread('file1.wav');
userData = wavread('file2.wav'); 

% I want to continue writing my "main" function here, and call the below functions

%%%%%%%%%%%%%
% Functions %
%%%%%%%%%%%%%

%Vector x
function preEmphasis(x)
    alpha = 0.95;
    len = length(x);
    for i=1:len
        x_i = x(i);
        x_iMinus1 = x(i-1);
        x(i) = x_i - alpha*x_iMinus1;
    end
end

%Vector x
function normalization(x)
    maxVal = max(abs(x));
    x = x / maxVal;
end

%Vector x; numFrames, frameSize: integers; stepSize: percentage (float, 0.2 -> 0.5 for example)
function Ymatrix = createYmatrix(x, numFrames, frameSize, stepSize)
        Ymatrix = zeros(numFrames, frameSize);
        for i=1:numFrames
            for j=1:frameSize
                Ymatrix(i,j) = x(stepSize*i + j);
            end
        end
end 
```

“函数”和“结束”这两个词以红色突出显示为“解析错误”。我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:32:20.570

您不能在主脚本中声明函数。[您必须创建一个外部 m 文件并在其中实现您的功能，就像官方文档](http://www.mathworks.com/help/matlab/learn_matlab/scripts-and-functions.html?s_tid=doc_12b#f4-25176)中所说的那样：

> 任何非[匿名](http://www.mathworks.com/help/matlab/matlab_prog/anonymous-functions.html?s_tid=doc_12b)函数都必须在文件中定义。

（为了清楚起见，脚本不接受输入参数或返回输出参数）。

但是，您可以在函数 m 文件中声明局部函数。[在官方文档](http://www.mathworks.com/help/matlab/ref/function.html)中阅读有关函数声明的更多信息。

**编辑：**如果您正在寻找一种完全避免函数 m 文件的方法，您可以参考@natan 的答案。他将您的函数实现为[匿名函数](http://www.mathworks.com/help/matlab/matlab_prog/anonymous-functions.html?s_tid=doc_12b)，*可以*在脚本文件中声明。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:17:06.850

除了 Eitan 提到的之外，这里是如何在您的情况下实现匿名函数，请注意代码矢量化是必须的。例如，在您的情况下，`normalization`您可以编写：

```
normalization = @(x) x./max(abs(x)); 
```

然后像使用函数一样使用它，`y=normalization(x)`

对于`preEmphasis`：

```
preEmphasis= @(x) [x(1) x(2:end)-0.95*x(1:end-1)]; 
```

您当前的代码对此案有一个错误，`i=1`因此我将其解释为`for=2:len`；

的解决方案`Ymatrix`有点难看（没有投入太多时间很好地对其进行矢量化），但它应该可以工作：

```
Ymatrix = @(x, numFrames, frameSize, stepSize) ...
          ones(1,numFrames)'*x(1+stepSize:stepSize+frameSize)+...
          meshgrid(0:stepSize:stepSize*numFrames-1,ones(1,frameSize))'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T02:42:22.650

只需将您的脚本变成一个函数；那么您可以使用本地和嵌套函数。使用返回值，或者`assignin`如果您需要将值返回到基础或调用者的工作区。

# c# - 为什么我会收到异常“System.StackOverflowException”？

> ID：14366263
> 
> 赞同：0
> 
> 时间：2013-01-16T19:30:34.160
> 
> 标签：c#, asp.net

我有这个代码。代码从表格、表格内容、一些文本框和其他东西中获取了一些值。当我单击提交按钮时，我得到一个值并输入“st”（输入班级学生）并输入数据库。但它向我显示列表属性“ **get** {....}”中的异常“System.StackOverflowException”

```
 public StudentManager()
            : base(ConfigurationManager.ConnectionStrings["con"].ConnectionString)
    {

    }
        public override void Add(Student entity)
        {
           //add to database 
        }

        protected void submitButton_Click(object sender, EventArgs e)
        {
            Student st = new Student();
            st.id = Convert.ToInt32(IdTextBox.Text);
            st.AVG = Convert.ToDouble(AVGTextBox.Text);
            st.date = dateCalendar.TodaysDate;
            st.educationInfo = educationInfoTextBox.Text;
            faculty fa = new faculty();
            fa.id = Convert.ToInt32(facultyDropDownList.SelectedValue);
            st.faculty = fa;
            st.fatherName = fatherNameTextBox.Text;
            st.fName = fNameTextBox.Text;
            st.lName = lNameTextBox.Text;
            st.motherName = motherNameTextBox.Text;
            st.password = passwordTextBox.Text;
            st.personalInfo = personalInfoTextBox.Text;
            StudentManager sm = new StudentManager();
            sm.Add(st);
        }
 public class Student 
    {
        public int id { get; set; }

        public faculty faculty { get; set; }
        public double AVG { get; set; }
        public DateTime date { get; set; }
        public string educationInfo { get; set; }
        public string fatherName { get; set; }
        public string fName { get; set; }
        public string lName { get; set; }
        public string motherName { get; set; }
        public string password { get; set; }
        public string personalInfo { get; set; }
        private List<SqlParameter> Attributes;
        public List<SqlParameter> attributes
        {
            get
            {
                Attributes = new List<SqlParameter>();
                SqlParameter sp = new SqlParameter();
                attributes.Add(new SqlParameter("id",this.id));
                attributes.Add(new SqlParameter("faculty", this.faculty));
                attributes.Add(new SqlParameter("AVG", this.AVG));
                attributes.Add(new SqlParameter("date", date));
                attributes.Add(new SqlParameter("educationInfo",educationInfo));
                attributes.Add(new SqlParameter("fatherName", fatherName));
                attributes.Add(new SqlParameter("lName", lName));
                attributes.Add(new SqlParameter("motherName", motherName));
                attributes.Add(new SqlParameter("password", password));
                attributes.Add(new SqlParameter("personalInfo", personalInfo));
                return Attributes;
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:35:44.977

您的`attributes_Get`方法正在递归调用自身。

将其更改为：

```
 // this should be a Get() method, not a property.
    public List<SqlParameter> GetAttributes()
    {
        attributes = new List<SqlParameter>();
        SqlParameter sp = new SqlParameter();
        attributes.Add(new SqlParameter("id",this.id));
        attributes.Add(new SqlParameter("faculty", this.faculty));
        attributes.Add(new SqlParameter("AVG", this.AVG));
        attributes.Add(new SqlParameter("date", date));
        attributes.Add(new SqlParameter("educationInfo",educationInfo));
        attributes.Add(new SqlParameter("fatherName", fatherName));
        attributes.Add(new SqlParameter("lName", lName));
        attributes.Add(new SqlParameter("motherName", motherName));
        attributes.Add(new SqlParameter("password", password));
        attributes.Add(new SqlParameter("personalInfo", personalInfo));
        return attributes;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:32:44.653

这是因为你类中的属性进行递归调用。

```
public List<SqlParameter> attributes
        {
            get
            {
                Attributes = new List<SqlParameter>();
                SqlParameter sp = new SqlParameter();
                attributes.Add(new SqlParameter("id",this.id));
                attributes.Add(new SqlParameter("faculty", this.faculty));
                attributes.Add(new SqlParameter("AVG", this.AVG));
                attributes.Add(new SqlParameter("date", date));
                attributes.Add(new SqlParameter("educationInfo",educationInfo));
                attributes.Add(new SqlParameter("fatherName", fatherName));
                attributes.Add(new SqlParameter("lName", lName));
                attributes.Add(new SqlParameter("motherName", motherName));
                attributes.Add(new SqlParameter("password", password));
                attributes.Add(new SqlParameter("personalInfo", personalInfo));
                return Attributes;
            } 
```

为了解决这个问题，我觉得将它转换为方法而不是使用属性会更好。可以这样做：

```
public List<SqlParameter> GetAttributes()
{
    //replace your code here to get attributes
    List<SqlParameter> attributes = new List<SqlParameter>();
    SqlParameter sp = new SqlParameter();
    attributes.Add(new SqlParameter("id", this.id));
    attributes.Add(new SqlParameter("faculty", this.faculty));
    attributes.Add(new SqlParameter("AVG", this.AVG));
    attributes.Add(new SqlParameter("date", date));
    attributes.Add(new SqlParameter("educationInfo", educationInfo));
    attributes.Add(new SqlParameter("fatherName", fatherName));
    attributes.Add(new SqlParameter("lName", lName));
    attributes.Add(new SqlParameter("motherName", motherName));
    attributes.Add(new SqlParameter("password", password));
    attributes.Add(new SqlParameter("personalInfo", personalInfo));
    return attributes;
} 
```

`private List<SqlParameter> Attributes;`从您的代码中删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:40:36.213

因为当您的代码调用此属性时：

```
 public List<SqlParameter> attributes
    {
        get
        {
            Attributes = new List<SqlParameter>();
            SqlParameter sp = new SqlParameter();
            attributes.Add(new SqlParameter("id",this.id));
            attributes.Add(new SqlParameter("faculty", this.faculty));
            attributes.Add(new SqlParameter("AVG", this.AVG));
            attributes.Add(new SqlParameter("date", date));
            attributes.Add(new SqlParameter("educationInfo",educationInfo));
            attributes.Add(new SqlParameter("fatherName", fatherName));
            attributes.Add(new SqlParameter("lName", lName));
            attributes.Add(new SqlParameter("motherName", motherName));
            attributes.Add(new SqlParameter("password", password));
            attributes.Add(new SqlParameter("personalInfo", personalInfo));
            return Attributes;
        }

    } 
```

并且它到达`attributes.Add()`行它再次调用此属性进行递归调用，因此使用另一个变量名，即

```
 public List<SqlParameter> attributes
    {
        get
        {
            var myAttributes= new List<SqlParameter>();
            SqlParameter sp = new SqlParameter();
            myAttributes.Add(new SqlParameter("id",this.id));
            myAttributes.Add(new SqlParameter("faculty", this.faculty));
            myAttributes.Add(new SqlParameter("AVG", this.AVG));
            myAttributes.Add(new SqlParameter("date", date));
            myAttributes.Add(new SqlParameter("educationInfo",educationInfo));
            myAttributes.Add(new SqlParameter("fatherName", fatherName));
            myAttributes.Add(new SqlParameter("lName", lName));
            myAttributes.Add(new SqlParameter("motherName", motherName));
            myAttributes.Add(new SqlParameter("password", password));
            myAttributes.Add(new SqlParameter("personalInfo", personalInfo));
            return myAttributes;
        }

    } 
```

# iphone - iphone和显示器：内联

> ID：14366265
> 
> 赞同：0
> 
> 时间：2013-01-16T19:30:42.180
> 
> 标签：iphone, ios, css

在运行 iOS6 的 iPhone4 上测试网站时，我遇到了一个奇怪的显示问题。

出于某种原因，iPhone 忽略了显示：inline；单击父链接时的规则。我一直在使用 Safari 开发人员工具浏览测试站点，并且切换类名称按预期工作。

我正在使用这段 javascript 来切换 div 上的类名：

```
$('.toggle').click(function() {
$(this).toggleClass('toggle');
$(this).toggleClass('toggle_open');
}); 
```

标记如下所示：

```
<div class="toggle">
  <a href="#" class="level1"><span>Parent</span></a> 
    <div>
       <a href="#"><span>Child 1</span></a>
       <a href="#"><span>Child 2</span></a>
       <a href="#"><span>Child 3</span></a>
    </div>
</div> 
```

CSS：

```
div.toggle div { display: none; }
div.toggle, div.toggle_open  { display: inline; } 
```

如果我将 display: inline 更改为 inline-block 它可以工作。如果我完全删除 display: inline 它可以工作，但会导致浏览器出现显示问题。我想使用 display: inline; 因此，如果需要，我的标记内容会显示在 1 行或 2 行。

我知道我可以使用 modinizer 为“触摸”和“无触摸”创建规则，但这对于可能是我的代码创建的错误的东西来说似乎太过分了:)

我做了什么让移动版 Safari 感到不安？

# sql-server - SQL 服务器查询运行速度极慢

> ID：14366269
> 
> 赞同：1
> 
> 时间：2013-01-16T19:30:56.517
> 
> 标签：sql-server, query-optimization

以下查询用于在商业智能仪表板中创建饼图。查询运行并返回正确的数据，但是速度非常慢（大约 36 秒）。谁能看到优化此查询的方法？

```
SELECT 
Name,
Date,
Severity,
PMissing

FROM
(
SELECT
Name,
Date,
Severity,
PMissing,

DENSE_RANK() OVER (PARTITION BY Name ORDER BY ate DESC) AS Rnk

FROM PctbyP

WHERE (Name like '%front-%'
OR Name like '%back-%'
OR Name like '%ap-%'
OR Name like '%mps-%'
OR Name like '%mg-%')
)t
WHERE rnk=1
AND PMissing != '0' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:37:10.980

以 %pattern% 形式对文本列进行模式匹配会强制扫描与外部 WHERE 条件匹配的所有记录（如果 Name 上有索引，则无论如何都不能使用它）。

我会冒险猜测您的 WHERE 标准不是很有选择性，这意味着正在扫描表中的大量行以查看它们是否符合 LIKE 标准。

如果我的假设是正确的，您可能会看到使用全文搜索而不是 LIKE 来显着提高性能

[http://msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

> 针对大量非结构化文本数据的 LIKE 查询比针对相同数据的等效全文查询要慢得多。对数百万行文本数据的 LIKE 查询可能需要几分钟才能返回；而对于相同的数据，全文查询可能只需要几秒钟或更短的时间，具体取决于返回的行数。

[http://msdn.microsoft.com/en-us/library/ms142571.aspx#like](http://msdn.microsoft.com/en-us/library/ms142571.aspx#like)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:38:42.190

创建索引视图：

```
CREATE VIEW
        V_PctbyP_Name
WITH SCHEMABINDING
AS
SELECT  Name, COUNT_BIG(*) AS Cnt
FROM    dbo.PctbyP
GROUP BY
        Name

CREATE UNIQUE CLUSTERED INDEX
        UX_V_PctbyP_Name
ON      V_PctbyP_Name (Name) 
```

，然后在表上创建索引：

```
CREATE INDEX
        IX_PctbyP_Name_Date
ON      PctbyP (Name, [Date]) 
```

，然后使用此查询：

```
SELECT  pa.*
FROM    V_PctbyP_Name vp
CROSS APPLY
        (
        SELECT  TOP 1 WITH TIES
                Name, [Date], Severity, PMissing
        FROM    PctbyP p
        WHERE   p.Name = vp.Name
        ORDER BY
                [Date] DESC
        ) pa
WHERE   (
        vp.Name LIKE '%front-%'
        OR
        vp.Name LIKE '%back-%'
        OR
        vp.Name LIKE '%ap-%'
        OR
        vp.Name LIKE '%mps-%'
        OR
        vp.Name LIKE '%mg-%'
        )
        AND pa.PMissing <> '0' 
```

# ajax - Phonegap 升级中断了 Ajax 调用

> ID：14366277
> 
> 赞同：1
> 
> 时间：2013-01-16T19:31:10.083
> 
> 标签：ajax, cordova

我最近将我使用的 PhoneGap 版本从 0.9.5 更新到了 Cordova-1.7.0。自从升级以来，我不再能够通过来自 Android 设备的 Ajax 调用将数据发布到我的服务器，尽管它在浏览器中运行良好。

返回的 jqXHR 状态代码为 0 - 表示网络处理存在问题，但我能够从服务器检索数据而没有任何问题。

在 0.9.5 和 1.7.0 之间将数据发布到服务器的方式是否发生了变化？

我的ajax调用如下：

```
 $.ajax({
                type: "POST",
                url: "https://"+serverUrl + "process.php",
                data: {data:passData, key:appKey},
                crossDomain: true,
                cache: false,
                dataType: "text",
                timeout: 5000,
                success: onSuccess,
                error: onError
            });                 

            function onError(jqXHR, exception) {
                if (jqXHR.status === 0) {
                    alert('Not connect.\n Verify Network.');
                } else if (jqXHR.status == 404) {
                    alert('Requested page not found. [404]');
                } else if (jqXHR.status == 500) {
                    alert('Internal Server Error [500].');
                } else if (exception === 'parsererror') {
                    alert('Requested JSON parse failed.');
                } else if (exception === 'timeout') {
                    alert('Time out error.');
                } else if (exception === 'abort') {
                    alert('Ajax request aborted.');
                } else {
                    alert('Uncaught Error.\n' + jqXHR.responseText);
                }

                showAlert("Failed to transmit, saved for re-transmital.", "Alert", 1);
}

function onSuccess(data){
 alert('successfully transmitted');
} 
```

**更新** 在我的通话中添加了“async：false”并且它有效。请参阅下面的更新代码：

```
$.ajax({
                type: "POST",
                url: "https://"+serverUrl + "process.php",
                data: {data:passData, key:appKey},
                crossDomain: true,
                cache: false,
async: false,
                dataType: "text",
                timeout: 5000,
                success: onSuccess,
                error: onError
            }); 
```

# ios - Objective-C IOS Xcode：无法修改 NSMutableArray 中的对象

> ID：14366281
> 
> 赞同：1
> 
> 时间：2013-01-16T19:31:17.747
> 
> 标签：ios, objective-c, xcode, nsmutablearray

我的问题是我有一个类型为 的类属性`NSMutableArray`，如我的头文件中所定义，但是当我尝试修改其中一个数组元素（an `NSDictionary`）时，我收到以下运行时错误：

> 2013-01-16 14:17:20.993 债务[5674:c07] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFArray replaceObjectAtIndex:withObject:]: 发送到不可变对象的变异方法”

标头声明：

```
//  BudgetViewController.h

#import <UIKit/UIKit.h>

@interface BudgetViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
- (IBAction)afterTaxIncomeEditingDidEnd:(id)sender;
@property (strong, nonatomic) NSMutableArray *budgetArray;
@property (strong, nonatomic) IBOutlet UITextField *afterTaxIncome;
@property (strong, nonatomic) IBOutlet UITableView *budgetTableView;

@end 
```

产生错误的方法：

```
-(void)applyCCCSWeights
{
    NSMutableDictionary *valueDict;
    NSString *newAmount;

    for (id budgetElement in [self budgetArray]) {
        valueDict = [[NSMutableDictionary alloc] initWithDictionary:budgetElement];
        newAmount = [NSString stringWithFormat:@"%0.2f", [[self afterTaxIncome].text floatValue] * [[budgetElement objectForKey:@"cccs_weight"] floatValue]];
        [valueDict setValue:newAmount forKeyPath:@"amount"];

        [[self budgetArray] replaceObjectAtIndex:0 withObject:valueDict];
        NSLog(@"%0.2f (%0.2f)", [[budgetElement objectForKey:@"amount"] floatValue], [[self afterTaxIncome].text floatValue] * [[budgetElement objectForKey:@"cccs_weight"] floatValue]);
    }

    [self.budgetTableView reloadData];
} 
```

// 注意`replaceObjectAtIndex:0`上面只是一个占位符。这将替换为正确的索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:33:16.623

`budgetArray`肯定是不可变的，你必须创建它是可变的。

可能你正在做这样的事情：

```
budgetArray= [NSArray arraWithObjects; obj1, obj2, nil]; 
```

并忽略编译器警告。使其可变：

```
budgetArray= [[NSMutableArray alloc]init]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T19:54:37.077

我相当确定您不能在枚举期间更改可变对象。

这个 SO 问题可能会有所帮助：[在快速枚举问题期间设置对象](https://stackoverflow.com/questions/7693892/setting-an-object-during-fast-enumeration-problems)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:57:12.873

在您的 init 方法中，输入以下内容：

```
budgetArray = [[NSMutableArray alloc] init]; 
```

另外，为什么不使用字典和数组字面量语法呢？

```
-(void)applyCCCSWeights {
    NSMutableDictionary *valueDict;
    NSString *newAmount;

    for (NSDictionary *budgetElement in [self budgetArray]) {
        valueDict = [budgetElement mutableCopy];
        newAmount = [NSString stringWithFormat:@"%0.2f", [[self afterTaxIncome].text floatValue] * [budgetElement[@"cccs_weight"] floatValue]];
        valueDict[@"amount"] = newAmount;

        _budgetArray[0] = valueDict;
        NSLog(@"%0.2f (%0.2f)", [budgetElement[@"amount"] floatValue], [[self afterTaxIncome].text floatValue] * [budgetElement[@"cccs_weight"] floatValue]);
    }

    [self.budgetTableView reloadData];
} 
```

请注意`[[self budgetArray] replaceObjectAtIndex:0 withObject:valueDict];`

变成：`_budgetArray[0] = valueDict;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T00:03:55.070

在对数组进行快速迭代时，您无法更改数组。另一方面，这完全没有必要。该代码绝对低效：只需制作数组 NSMutableDictionaries 的元素，然后直接更改字典，而不是创建副本然后更改副本中的元素。

稍后注意到您使用 NSJSONSerialization；看flag，不要盲目传0。

# android - Google Maps API V2 示例代码中的 @Override 错误

> ID：14366283
> 
> 赞同：3
> 
> 时间：2013-01-16T19:31:18.340
> 
> 标签：android, eclipse, google-maps, google-maps-api-2

我想运行 Google Maps API V2 的示例代码。我遵循了[这些](https://developers.google.com/maps/documentation/android/intro?hl=de#sample_code)步骤，但出现了问题。我在大多数活动中都遇到了编译器错误。

> 错误：LocationSourceDemoActivity.LongPressLocationSource 类型的方法 activate(LocationSource.OnLocationChangedListener) 必须覆盖超类方法

在以下代码中，这些方法出现错误：

```
public void activate(OnLocationChangedListener listener)
public void deactivate()
public void onMapLongClick(LatLng point) 
```

代码：

```
package com.example.mapdemo;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapLongClickListener;
import com.google.android.gms.maps.LocationSource;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;

import android.app.Activity;
import android.location.Location;
import android.os.Bundle;

/**
 * This shows how to use a custom location source.
 */
public class LocationSourceDemoActivity extends android.support.v4.app.FragmentActivity {
    /**
     * A {@link LocationSource} which reports a new location whenever a user long presses the map at
     * the point at which a user long pressed the map.
     */
    private static class LongPressLocationSource implements LocationSource, OnMapLongClickListener {
        private OnLocationChangedListener mListener;
    /**
     * Flag to keep track of the activity's lifecycle. This is not strictly necessary in this
     * case because onMapLongPress events don't occur while the activity containing the map is
     * paused but is included to demonstrate best practices (e.g., if a background service were
     * to be used).
     */
    private boolean mPaused;

    @Override
    public void activate(OnLocationChangedListener listener) {
        mListener = listener;
    }

    @Override
    public void deactivate() {
        mListener = null;
    }

    @Override
    public void onMapLongClick(LatLng point) {
        if (mListener != null && !mPaused) {
            Location location = new Location("LongPressLocationProvider");
            location.setLatitude(point.latitude);
            location.setLongitude(point.longitude);
            location.setAccuracy(100);
            mListener.onLocationChanged(location);
        }
    }

    public void onPause() {
        mPaused = true;
    }

    public void onResume() {
        mPaused = false;
    }

}

private LongPressLocationSource mLocationSource;

private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.basic_demo);

    mLocationSource = new LongPressLocationSource();

    setUpMapIfNeeded();
}

@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();

    mLocationSource.onResume();
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    mMap.setLocationSource(mLocationSource);
    mMap.setOnMapLongClickListener(mLocationSource);
    mMap.setMyLocationEnabled(true);
}

@Override
protected void onPause() {
    super.onPause();
    mLocationSource.onPause();
}
} 
```

我附上了图书馆，我没有跳过谷歌指南中的一步。我希望你们中的某个人可以帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:50:01.040

您使用符合 java 1.6 的编译器吗？注释的用法`@Override`在 1.5 和 1.6 中是不同的（见[这个答案](https://stackoverflow.com/a/987992/620338)）。

右键单击您的项目节点，选择“属性”-->“Java 编译器”-->“编译器合规性级别”应为 1.6。

# asp.net-mvc - 为什么 POST 操作中的 DropDown 值为 Null？

> ID：14366284
> 
> 赞同：0
> 
> 时间：2013-01-16T19:31:19.790
> 
> 标签：asp.net-mvc, http-post, html.dropdownlistfor

下面是视图：

```
<%@ Page Title="" Language="C#" 
         MasterPageFile="~/Views/Shared/Site.Master" 
         Inherits="System.Web.Mvc.ViewPage<MvcApplication1.Models.Index>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Contact
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <% using (Html.BeginForm())
    {%>
         <%=Html.DropDownListFor(x => x.SelectedFavColor, Model.DropDownItems)%>
         <%= Html.ValidationMessageFor(x=> x.SelectedFavColor) %>
         <input type="submit" value="submit" />
    <%} %>
</asp:Content> 
```

下面提到的是模型：

```
namespace MvcApplication1.Models
{
    public class Index
    {
        [Range(0, 1000, ErrorMessage = "hello")]
        public int SelectedFavColor { get; set; }

        public IEnumerable<SelectListItem> DropDownItems { get; set; }
    }

    public class Colors
    {
        public int ColorID { get; set; }
        public string ColorName { get; set; }
    }
} 
```

我在视图中传递了一些下拉值。下面是控制器动作：

```
public ActionResult Contact()
{
    List<MvcApplication1.Models.Colors> l = new List<Models.Colors>();
    l.Add(new Models.Colors { ColorName = "-1", ColorID = -1 });
    l.Add(new Models.Colors { ColorName = "a", ColorID = 0 });
    l.Add(new Models.Colors { ColorName = "b", ColorID = 2 });
    l.Add(new Models.Colors { ColorName = "c", ColorID = 3 });
    l.Add(new Models.Colors { ColorName = "d", ColorID = 4 });
    l.Add(new Models.Colors { ColorName = "e", ColorID = 4 });
    l.Add(new Models.Colors { ColorName = "f", ColorID = 4 });

    var model = new MvcApplication1.Models.Index
    {
        DropDownItems = l.Select(i => new SelectListItem 
                { 
                      Text = i.ColorName, 
                      Value = i.ColorID.ToString() 
                })
    };
    ViewData["records"] = model.DropDownItems;
    return View(model);
}

[HttpPost]
public ActionResult Contact(Index posted, FormCollection collection)
{
    posted.SelectedFavColor = Convert.ToInt16(collection["SelectedFavColor"]);
    return View(posted);
} 
```

为什么 POST 操作中的 DropDown 值为 Null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:40:13.737

DropDown 的值为 null 的简单原因是因为它们没有与表单一起发送（发布）（您可以使用 Firebug Firefox 扩展轻松检查它）。您将需要再次收集（重新填充）下拉列表的值以查看这些值。

*建议：*

不要在 POST 之后立即返回视图。ASP-MVC 应用程序中的典型模式是 Post-Redirect-Get。它将帮助您避免不必要的表单重新发布（例如在浏览器刷新按钮上） -[我为什么要使用 PRG](http://www.aspnetmvcninja.com/controllers/why-you-should-use-post-redirect-get)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:37:01.960

这`DropDownItems`是`null`因为它没有`POST`以您的形式编辑。您仅使用以下内容创建一个下拉菜单：`Html.DropDownListFor(x => x.SelectedFavColor, Model.DropDownItems)`，这不足以发布集合。

然而，发布一个集合相当棘手。但你可以调查[一下](http://weblogs.asp.net/nmarun/archive/2010/03/13/asp-net-mvc-2-model-binding-for-a-collection.aspx)。

最后一件事：您已经拥有集合（因为您将它传递给`View`），所以从技术上讲，您甚至不需要将`POST`它返回给服务器。

# java - 在java中匹配带有空格正则表达式的单词

> ID：14366289
> 
> 赞同：2
> 
> 时间：2013-01-16T19:31:31.427
> 
> 标签：java, regex

这个很简单，但似乎难倒我。

我有以下文本行：

```
for        months to 
```

我正在尝试将其与以下正则表达式匹配：

```
for\s*months\s*to 
```

我将这个正则表达式读为：

1.  必须有“为”字
2.  后跟任意大小的空间
3.  后跟“月”字
4.  后跟任意大小的空间
5.  后面跟着一个“to”字

对我来说，这应该匹配，但它不匹配。谁能看到我可能出错的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:37:03.867

这是因为尾随空格。

试试这个：

```
 Pattern p = Pattern.compile("for\\s*months\\s*to\\s*");
    Matcher m = p.matcher("for        months to   ");
    System.out.println(m.matches()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:33:38.210

您很可能有前面或后面的空格。使用`String.matches(String regex)`你必须匹配*整个*字符串。

尝试`"\\s*for\\s+months\\s+to\\s*"`

# spring - Spring中一个简单的切入点表达式

> ID：14366291
> 
> 赞同：1
> 
> 时间：2013-01-16T19:31:34.347
> 
> 标签：spring, spring-security, pointcut

我正在使用具有相同版本的 Spring 框架的 Spring security 3.2.0。Spring security 在我的项目中运行良好。为了保护我的 DAO 类（和其他）中的方法，我想使用以下*切入点*方法（在`spring-security.xml`文件中）。

```
<global-method-security>
    <protect-pointcut expression="execution(*controller.*.*(..))" access="ROLE_ADMIN"/>
</global-method-security> 
```

我希望指定的切入点表达式能够保护包内所有类中的所有方法，`controller`并且只能由具有`ROLE_ADMIN`指定权限的用户访问。

但是当我尝试使用这个表达式时，该过程在保存我的`spring-security.xml`文件时终止，并出现以下异常。

> PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'pointcutMap' 抛出异常；嵌套异常是 java.lang.IllegalArgumentException：切入点格式不正确：期望在字符位置 26 处执行“名称模式”（*控制器*。*（..））^

我正在尝试遵循*3.4.1**元素*部分的*使用保护切入点添加安全切入点中的*[参考文档](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#ns-global-method)中指定的方法。**`<global-method-security>`**

 *在这种情况下，正确的表达式语法是什么？

* * *

**编辑：**

使用保护切入点添加安全切入点

保护切入点的使用特别强大，因为它允许您通过简单的声明将安全性应用于许多 bean。考虑以下示例：

```
<global-method-security>
    <protect-pointcut expression="execution(* com.mycompany.*Service.*(..))" access="ROLE_USER"/>
</global-method-security> 
```

这将保护在应用程序上下文中声明的类在`com.mycompany`包中且类名以“Service”结尾的所有 bean 方法。只有具有该`ROLE_USER`角色的用户才能调用这些方法。与 URL 匹配一样，最具体的匹配必须在切入点列表中排在第一位，因为将使用第一个匹配表达式。安全注释优先于切入点。

**复制并粘贴参考文档中解释的部分**（因为有人可能会发现滚动文档很乏味）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:53:38.227

试试这个表达式：

```
<protect-pointcut expression="execution(* your.package.controller.*.*(..))" access="ROLE_ADMIN"/> 
```*

# jquery - 缓存通过 ajax 加载的 jQuery UI 选项卡内容？

> ID：14366293
> 
> 赞同：1
> 
> 时间：2013-01-16T19:31:37.837
> 
> 标签：jquery, ajax, jquery-ui

我在我的 Web 应用程序中使用 jQuery UI 选项卡，并且我正在通过 ajax 从外部 HTML 文件加载选项卡内容。这里的一个缺点是在选项卡之间切换时将清除任何用户输入。是否可以在这种情况下启用缓存以保留用户输入？我尝试`cache:true`从[jQuery 站点](http://jqueryui.com/tabs/#ajax)添加示例：

```
 $(function() {
    $("#tabs")
        .tabs(
            {
                cache: true,
                beforeLoad : function(event, ui) {
                    ui.jqXHR
                        .error(function() {
                            ui.panel
                                .html("Couldn't load this tab. We'll try to fix this as soon as possible.");
                        });
                }
            });
    }); 
```

但是当我从一个选项卡切换到另一个选项卡然后再返回时，我收到“无法加载此选项卡。我们会尽快解决此问题。” 错误。

我将不胜感激任何帮助。

# sharepoint - 如何使用 powershell 更新具有多个值的 SharePoint 企业关键字？

> ID：14366296
> 
> 赞同：0
> 
> 时间：2013-01-16T19:31:46.020
> 
> 标签：sharepoint, powershell

我正在尝试编写一个 powershell 脚本，该脚本查看用户定义的变量并更新列表中与该值匹配的每个项目的企业关键字。

例如，假设您在 SP 中有一个页面，其中包含托管元数据关键字：new、fresh、clean 我想要一个脚本来询问用户他们想要换出什么关键字。因此，用户可以将变量指定为：fresh，将另一个变量指定为：fresher，它将使用关键字fresher 将任何项目更新为fresher。

这是我以前使用过的，但现在不起作用，因为有多个值：

```
Add-PSSnapin Microsoft.SharePoint.PowerShell -EA SilentlyContinue
$webURL = <MY SP URL>
$listName = <MY LIST NAME>
$web = Get-SPWeb $webURL
$list = $web.Lists[$listName]
$listitems = $list.items 
$session = Get-SPTaxonomySession -Site $web.Site
$termStore = $session.TermStores["Managed Metadata Service"]
$group = $termStore.Groups["Resources"]
$termset = $group.TermSets["Wiki Categories"]
$terms = $termSet.GetTerms(100)
$wiki1 = read-host "Enter the wiki category you want to update"
$wiki2 = read-host "Enter the replacement wiki category"

$term = $terms | ?{$_.name -eq $wiki2}

Foreach($item in $listitems) 
{$wiki = $item["Wiki Categories"]
    if($wiki.label -eq $term) 
    { 
        $spitem = [Microsoft.SharePoint.SPListItem]$item;
    $taxfield = [Microsoft.SharePoint.Taxonomy.TaxonomyField]$spitem.Fields["Wiki Categories"]
        $taxfield.SetFieldValue($spitem, $term)

    $spitem.Update() 
    $spitem.File.Publish("True")
    } 
} 
```

我很确定问题出在这一行：

```
$term = $terms | ?{$_.name -eq $wiki2} 
```

而这一行：

```
$taxfield.SetFieldValue($spitem, $term) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:26:15.490

问题是您将[TermCollection](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.taxonomy.termcollection_members.aspx) ($term) 传递给[SetFieldValue](http://msdn.microsoft.com/en-us/library/ee589605.aspx)，您应该在其中传递[TaxonomyFieldValueCollection](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.taxonomy.taxonomyfieldvaluecollection.aspx)。

您可以像这样转换它们：

```
$taxfield = $spitem.Fields["Wiki Categories"]

$tfvc = new-object -typename Microsoft.SharePoint.Taxonomy.TaxonomyFieldValueCollection -argumentlist $taxfield;

foreach($t in $ term)
{
   $tfv = new-object -typename Microsoft.SharePoint.Taxonomy.TaxonomyFieldValue -argumentlist $taxfield
   $tfv.TermGuid = $t.Id
   $tfv.Label = $t.Name
   $tfvc.Add($tfv)
}
...
$taxfield.SetFieldValue($spitem, $tfvc) 
```

# javascript - 水平相邻的两个 svg

> ID：14366298
> 
> 赞同：1
> 
> 时间：2013-01-16T19:32:00.353
> 
> 标签：javascript, html, d3.js

是否可以有多个水平相邻的 SVG。我知道当您在 D3 中附加 SVG 时，它会附加在前一个 SVG 的下方。但是现在我在页面的一半上有前一个 SVG，我想将这个 SVG 从前一个 SVG 的下方翻译到前一个 SVG 的右侧。我尝试在第二个 svg 上使用 transform-->translate 属性，但它不起作用：

```
var secondSVG= d3.select("#div1").append("svg").attr("width",960).attr("transform"),"translate(500, -500)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:06:07.920

不久前我想做类似的事情，但我最终决定使用一个带有两个内部 g 元素的单个 svg 元素，其中一个转换到右侧。[你可以在这里](http://hyperphor.com/election/scatterstates.html)看到最终的成品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:54:55.213

在 Chrome 24、IE10 和 FF17 中，这个[jsFiddle](http://jsfiddle.net/Hbj8G/)按预期工作。关键似乎是设置`width`和`height`样式表属性。

HTML：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="190" id="svg1">
  <polygon points="100,10 40,180 190,60 10,60 160,180"
  style="fill:lime;stroke:purple;stroke-width:5;fill-rule:evenodd;">
</svg>
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="190" id="svg2">
  <polygon points="100,10 40,180 190,60 10,60 160,180"
  style="fill:lime;stroke:purple;stroke-width:5;fill-rule:evenodd;">
</svg> 
```

CSS：

```
svg
{
  width: 190px;
  height: 190px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T13:00:37.777

总体思路：将每个 SVG 包装在一个显示为 inline-block 的 div 元素中。无论如何，这适用于我个人喜欢的以下方法。

*   将 SVG 的宽度和高度属性设置为 100%。
*   “内部影响”：用 viewBox 属性指定绘图区域的大小（SVG中元素的单位，如圆，与之相关）；这通常与 preserveAspectRatio 属性一起使用。
    [https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox)
    [https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio)
*   “外部影响”：SVG 将适应其容器的大小。根据您的意愿设置样式（宽度和/或高度）。当然你需要足够的水平空间。

最小的例子：

```
<div style="display: inline-block; width: 42%">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-80 -45 160 90" preserveAspectRatio="xMinYMin meet">
<circle cx="0" cy="0" r="39">
</svg>
</div>
<!-- Just a copy from above. Right of (not below) the previous SVG. -->
<div style="display: inline-block; width: 42%">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-80 -45 160 90" preserveAspectRatio="xMinYMin meet">
<circle cx="0" cy="0" r="39">
</svg>
</div> 
```

# jquery - 带有禁用项目的连接可排序列表

> ID：14366300
> 
> 赞同：0
> 
> 时间：2013-01-16T19:32:01.987
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable

我使用[这个](http://farhadi.ir/projects/html5sortable/)短列表，我想使用两个连接的可排序列表和禁用项目。

不幸的是它不起作用。谁能帮我？

```
<section>
    <h1>Connected Sortable Lists</h1>
    <ul id="sortable4" class="connected sortable list">
        <li>Item 1
        <li>Item 2

    </ul>
    <ul id="sortable5" class="connected sortable list">
        <li class="disabled">Item 21
        <li class="highlight">Item 22

    </ul>
</section>

<script>
    $(function() {      
        $('#sortable5').sortable({
            items: ':not(.disabled)'
        });

        $('#sortable4, #sortable5').sortable({
            connectWith: '.connected'
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:06:50.963

如果要使用两个函数，可以定义如下

```
$('#sortable4').sortable({
        connectWith: '#sortable5',
        items: ':not(.disabled)'
    });

$('#sortable5').sortable({
        connectWith: '#sortable4',
        items: ':not(.disabled)'
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:12:42.830

```
<script>
$('ul.sortable').sortable().bind(
    'sortupdate', function() {                      
        var dataIDList = $('ul.sortable li').map(
            function(){ 
                return $(this).attr("data-id");
            }
        ).get().join(",");

        $.post(
            'sort_save.php',{ idlist: dataIDList }, function(data){
                alert('ok!' + data); 
            }
        );
    }
);      

$(function() {      
    $('#sortable4, #sortable5').sortable({
        connectWith: '.connected',
        items: ':not(.disabled)'
    });
}); </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:41:09.953

正如我在上面的评论中提到的，我相信你只需要一个`sortable`功能。所以它可能应该这样工作：

```
<script>
    $(function() {      
        $('#sortable4, #sortable5').sortable({
            connectWith: '.connected',
            items: ':not(.disabled)'
        });
    });
</script> 
```

# sql-server - 从出生/死亡表计算人口表

> ID：14366301
> 
> 赞同：0
> 
> 时间：2013-01-16T19:32:10.607
> 
> 标签：sql-server, tsql

我有一个表格，如下所示，列出了人们及其出生和死亡年份（9999 表示一个活着的人）。

```
person | born | died
1      | 2001 | 9999
2      | 2002 | 2003
3      | 2002 | 2008
4      | 2004 | 2009
5      | 2005 | 9999
6      | 2010 | 2012 
```

我想计算多年来的人口。对于上面显示的示例，输出将如下所示。行末的活着的人列表仅用于演示目的，我的输出中不需要它。

```
year | population
2001 | 1                  (1)
2002 | 3                  (1,2,3)
2003 | 2                  (1,3)
2004 | 3                  (1,3,4)
2005 | 4                  (1,3,4,5)
2006 | 4                  (1,3,4,5)
2007 | 4                  (1,3,4,5)
2008 | 3                  (1,4,5)
2009 | 2                  (1,5)
2010 | 3                  (1,5,6)
2011 | 3                  (1,5,6)
2012 | 2                  (1,5) 
```

我能够编写一个 C# 程序并循环遍历原始表中的每一行，并增加出生年份和死亡年份之间的每一年的人口计数。但是，我需要完全在 TSQL 脚本中完成。我是 TSQL 新手。我该怎么做？如果已经讨论过类似的问题，请指出我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:42:13.677

```
DECLARE @t TABLE(person INT, born INT, died INT);

INSERT @t VALUES
(1,2001,9999),
(2,2002,2003),
(3,2002,2008),
(4,2004,2009),
(5,2005,9999),
(6,2010,2012);

DECLARE @start INT, @end INT;

SELECT @start = 2001, @end = 2012;

;WITH n(y) AS 
(
  SELECT TOP (@end - @start + 1) 
    @start - 1 + ROW_NUMBER() OVER (ORDER BY [object_id])
  FROM sys.all_objects
)
SELECT 
  [year] = n.y, 
  population = SUM(CASE WHEN n.y >= t.born AND n.y < t.died THEN 1 ELSE 0 END) 
FROM n CROSS JOIN @t AS t GROUP BY n.y; 
```

结果：

```
year    population
----    ----
2001    1
2002    3
2003    2
2004    3
2005    4
2006    4
2007    4
2008    3
2009    2
2010    3
2011    3
2012    2 
```

FWIW 我刚刚开始了一个关于这件事的博客系列：

[http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-1](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-1)

# c# - 仅使用自动建议创建一个 dataGridColumn

> ID：14366304
> 
> 赞同：0
> 
> 时间：2013-01-16T19:32:22.977
> 
> 标签：c#, sql, datagridview

我正在为杂货店或商店制作一个**c# 项目。**在那里我有一个**数据网格**，我在其中对单元格进行了编程以自动建议并且它工作正常。

只有一个问题。我希望数据网格中的一列（例如条形码列）成为仅具有自动建议功能的文本框，而不是所有列。

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    var source = new AutoCompleteStringCollection();
    string cnn = (@"Data Source=TaLy-PC;Initial Catalog=dbMarketi;Integrated Security=True;Pooling=False");
    SqlConnection connection = new SqlConnection(cnn.ToString());
    SqlCommand command = new SqlCommand("Select Barcode FROM tblDepo", connection);

    try
    {
        connection.Open();
        {
            SqlDataReader drd = command.ExecuteReader();
            while (drd.Read())
            {
                // this.comboBoxEx1.Items.Add(drd.GetString(0).ToString());
                source.AddRange(new string[] { drd.GetString(0).ToString() });
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message.ToString());
    }
    connection.Close();

    TextBox dgvEditBox = e.Control as TextBox;
    if (dgvEditBox != null)
    {
        dgvEditBox.AutoCompleteMode = AutoCompleteMode.Suggest;
        dgvEditBox.AutoCompleteCustomSource = source;
        dgvEditBox.AutoCompleteSource = AutoCompleteSource.CustomSource;
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:47:28.820

这是一个建议，尝试将您`AutoCompleteStringCollection`和您对条形码的查询分开`Products`。

```
private AutoCompleteStringCollection source  = new AutoCompleteStringCollection();

            private void loadAutoCompleteStringCollection();
            {
                string cnn = (@"Data Source=TaLy-PC;Initial Catalog=dbMarketi;Integrated Security=True;Pooling=False");
                source.Clear();
                SqlConnection connection = new SqlConnection(cnn.ToString());
                SqlCommand command = new SqlCommand("Select Barcode FROM tblDepo", connection);

                try
                {
                    connection.Open();
                    {
                        SqlDataReader drd = command.ExecuteReader();
                        while (drd.Read())
                        {
                            // this.comboBoxEx1.Items.Add(drd.GetString(0).ToString());
                            source.AddRange(new string[] { drd.GetString(0).ToString() });
                        }
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message.ToString());
                }
                finally
                {
                    connection.Close();
                }
            }

            private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
            {
                TextBox dgvEditBox = e.Control as TextBox;
                if (dataGridView1.CurrentCell.ColumnIndex == 1)
                {
                    if (dgvEditBox != null)
                    {
                        dgvEditBox.AutoCompleteMode = AutoCompleteMode.Suggest;
                        dgvEditBox.AutoCompleteCustomSource = source;
                        dgvEditBox.AutoCompleteSource = AutoCompleteSource.CustomSource;
                    }
                }
            }

            //If you want to reload the AutoCompleteStringCollection
            private void button1_Click(object sender, System.EventArgs e)
            {
                loadAutoCompleteStringCollection();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:28:43.557

您的代码几乎是正确的。

我要纠正你的代码是用你的 EditingControlShowing Eventhandler 你基本上说，将任何列视为文本框。

如果您只想将一个特定列视为文本框，请运行检查，如下所示：-

```
 // EditingCOntrol Showing

    If(datagridview.CurrentCell.ColumnIndex == 1)
    {
        TextBox dgvEditBox = e.Control as TextBox;
        if (dgvEditBox != null)
        {
            dgvEditBox.AutoCompleteMode = AutoCompleteMode.Suggest;
            dgvEditBox.AutoCompleteCustomSource = source;
            dgvEditBox.AutoCompleteSource = AutoCompleteSource.CustomSource;
        }
    }

// public Object 

 public AutoCompleteStringCollection source = new AutoCompleteStringCollection(); 
```

# javascript - 移动设备上的 Facebook Like 和 Google+1 按钮

> ID：14366306
> 
> 赞同：0
> 
> 时间：2013-01-16T19:32:40.847
> 
> 标签：javascript, html, facebook, facebook-like, google-plus

我刚刚在我的网站上添加了 Facebook Like 和 Google+1 按钮，它们都可以在台式机上正常工作。但是，在手机上，我对它们都有问题。Facebook Like 按钮在点击时会消失，而 Google 按钮会重定向到 Gmail 登录，但登录时我只会看到一个永无止境的加载屏幕。

这是我的相关代码：

```
 <div id="fb-root"></div>
<script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <a href="https://twitter.com/share" class="twitter-share-button" data-url="myurl" data-text="Check out this site">Tweet</a>
              <br />
                <g:plusone size="medium" href="myurl"></g:plusone>
                <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>
           <br />
              <div style="padding-bottom:10px;" class="fb-like" data-href="myurl" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false"></div>

    <script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {lang: 'en-US'}
</script> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:14:25.880

Google+ +1 按钮支持移动网络浏览器，但仅支持 +1 操作，不支持其他共享操作。我登录没有问题，看到加载屏幕，它消失了，我被带回你的网站，我点击了 +1。您现在应该看到计数为 2。我在 Android 上使用了 Chrome。我确实在 iOS 上的 Chrome 上遇到了加载问题。但是，在发生这种情况的地方，我认为您的代码没有问题，看起来不错。我相信这是谷歌方面的问题。

# ruby-on-rails-3 - Mercury 编辑器 (0.9.0) 无法在 Rails 3.2.11 中保存更改

> ID：14366307
> 
> 赞同：2
> 
> 时间：2013-01-16T19:32:42.300
> 
> 标签：ruby-on-rails-3, mercury-editor

我正在将水星添加到一个简单的博客应用程序中，并想使用最新版本，但我无法获得它来保存更新。这是我的代码：

宝石文件：

```
gem 'rails', '3.2.11'
gem "thin", "~> 1.3.1"
gem 'mercury-rails'
gem 'paperclip'

group :development do
  gem 'taps'
  gem "nifty-generators"
  gem 'sqlite3'
end

gem 'jquery-rails' 
```

blogs_controller.rb：

```
 def update
    @blog = Blog.find(params[:id])
    if @blog.update_attributes(params[:blog])
      redirect_to @blog
    else
      render 'edit'
    end
  end

  def mercury_update
    blog = Blog.find(params[:id])
    blog.content         = params[:content][:blogContent][:value]
    blog.save!
    render text: ""
  end 
```

博客.rb：

```
class Blog < ActiveRecord::Base
  attr_accessible :title, :content, :author
end 
```

路线.rb：

```
 Mercury::Engine.routes
  mount Mercury::Engine => '/'
  root :to => "pages#home"

  namespace :mercury do
    resources :images
  end

  resources :blogs do
    member { post :mercury_update }
  end 
```

水星.html.erb

```
 <body>
    <script type="text/javascript">
      // Set to the url that you want to save any given page to, leave null for default handling.
      var saveUrl = null;

      // Instantiate the PageEditor
      new Mercury.PageEditor(saveUrl, {
        saveStyle:  'form', // 'form', or 'json' (default json)
        saveMethod: null, // 'PUT', or 'POST', (create, vs. update -- default PUT)
        visible:    true  // boolean - if the interface should start visible or not
      });
    </script>
  </body> 
```

博客/show.html.erb：

```
 <div id="blogFull" class="rounded-corners-mild">

 <div id="blogTitle">
   <h1 style="font-size:150%; text-align:center; " class="mercury-region" ><%= @blog.title%></h1>
  </div>

  <div data-mercury="full" id="blogContent" class="mercury-region">
    <%= raw @blog.content %>
  </div><br />
  <%= link_to "mercury", "/editor" + "/blogs" + "/#{@blog.id}", :class => 'bestButton',  
          id: "edit_link", data: {save_url: mercury_update_blog_path(@blog)} %> 
```

添加到：mercury.js：

```
jQuery(window).on('mercury:ready', function() {
        var saveUrl = $("#edit_link").data("save-url");
        Mercury.saveUrl = saveUrl;
});
Mercury.on('saved', function() {
        window.location.href = window.location.href.replace(/\/editor\//i, '/');
}); 
```

我也试过这个：到mercury.js：

```
 onload: function() {
    //Mercury.PageEditor.prototype.iframeSrc = function(url) { return '/testing'; }
    Mercury.on('ready', function() {
      var link = $('#mercury_iframe').contents().find('#edit_link');
      Mercury.saveUrl = link.data('save-url');
      link.hide();
    });

    Mercury.on('saved', function() {
      window.location.href = window.location.href.replace(/\/editor\//i, '/');
    });
  } 
```

都没有奏效。两者都让我去找编辑，并允许我编辑。我还不能保存任何更改。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:17:28.890

对我来说，我遇到了“mercuryInstance”无法使用上述解决方案的问题。我确实让它与添加到mercury.js末尾的这个javascript一起工作：

```
 jQuery(window).on('mercury:ready', function() {
        var link = $('#edit_link');
        Mercury.saveUrl =link.attr('data-save-url');
        link.hide();
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T21:37:54.713

尝试保存时是否收到错误消息？它说什么？如果它说它无法保存但 URL 正确，您需要检查您的日志文件。

我在设置正确的 saveUrl 并将以下内容添加到mercury.js 时遇到问题，为我修复了它；

```
onload: function() {
    Mercury.on('ready', function() {
        var link = $('#mercury_iframe').contents().find('#edit_link');
        console.log("mercury ready ready", link);
        mercuryInstance.saveUrl = link.data('save-url');
        link.hide();
    });

    Mercury.on('saved', function() {
        window.location.href = window.location.href.replace(/\/editor\//i, '/');
    });
} 
```

[在 RailsCasts 上](http://railscasts.com/episodes/296-mercury-editor?view=comments#comment_157744)的这个线程中找到它。

编辑：

我注意到您的代码中还有其他内容。您为 POST 操作创建了一个路由。在mercury.html.erb 中，saveMethod 默认设置为“PUT”。将 saveMethod 更改为“POST”。

# java - 使类只能从特定类实例化

> ID：14366312
> 
> 赞同：3
> 
> 时间：2013-01-16T19:33:01.213
> 
> 标签：java, class, modifier

假设我有 3 个课程 `class1`，`class2`并且`class3`.

我怎样才能让它`class1`只能由`class2`( `class1 object = new class1()`) 实例化，但不能由 class3 或任何其他类实例化？

我认为它应该与修饰符一起使用，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:43:43.740

我想将您的课程重命名为`Friend`,`Shy`和`Stranger`. `Friend`应该能够创造，`Shy`但`Stranger`不应该能够。

此代码将编译：

```
package com.sandbox;

public class Friend {

    public void createShy() {
        Shy shy = new Shy();
    }

    private static class Shy {

    }

} 
```

但是这段代码不会：

```
package com.sandbox;

public class Stranger {

    public void createShy() {
        Friend.Shy shy = new Friend.Shy();
    }

} 
```

此外，如果我们创建一个名为 的新类`FriendsChild`，这**也不会**编译：

```
package com.sandbox;

public class FriendsChild extends Friend {

    public void childCreateShy() {
        Shy shy = new Shy();
    }

} 
```

当您考虑它时，这种命名约定是有意义的。仅仅因为我是某人的朋友并不意味着我的孩子认识他们。

请注意，所有这些类都在同一个包中。据我所知，这是您正在寻找的场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:37:43.880

除了使构造函数受保护之外的另一个选择：

*   将`class1`构造函数设为私有
*   创建一个公共静态工厂方法，该方法需要一个有效的实例`class2`才能返回一个实例`class1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:38:41.947

使 class1 成为 class2 的内部类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T19:35:31.410

**更新**

制作`protected`构造函数并将符合条件的类放在同一个包中，如果您希望包外的任何类来构造此实例，那么您需要`ClassA`在此示例中扩展该类，

如果你限制它然后去`default`访问说明符

```
package com.somthing.a;
public class ClassA {

    ClassA() {
        super();
        // TODO Auto-generated constructor stub
    }
}

package com.something.a;
public class ClassB {
    public static void main(String[] args) {
        new ClassA();//valid
    }
}

package com.something.c;
public class ClassC {
    public static void main(String[] args) {
        new ClassA();// invalid
    }
} 
```

# http - 为什么浏览器不能缓存带有 Cache-Control HTTP 标头的资源？

> ID：14366313
> 
> 赞同：1
> 
> 时间：2013-01-16T19:33:08.110
> 
> 标签：http, caching, header, http-headers

我已经阅读了 HTTP 的所有缓存文档，这是我文件的标题： 编辑：我现在正在使用 amazon S3 来查看它是否有帮助，但仍然是同样的问题！这里是请求和响应>我错过了什么？即使响应要求浏览器缓存文件，它也没有！我检查了谷歌浏览器缓存，文件不存在。

```
Request URL:https://s3-sa-east-1.amazonaws.com/combo-combat-release/WebPlayer.unity3d
Request Method:GET
Status Code:200 OK

**Request Headers**
GET /combo-combat-release/WebPlayer.unity3d HTTP/1.1
Host: s3-sa-east-1.amazonaws.com
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Accept-Language: es,en-US;q=0.8,en;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

**Response Headers**
HTTP/1.1 200 OK
x-amz-id-2: xu/RKgR4Xt6G3jQ1qkdO5rzd4TlngDYYERZ+bbGlalitJFMDjAgiLAoP4GXhmkeo
x-amz-request-id: 6A9389D16407D28D
Date: Wed, 16 Jan 2013 22:42:26 GMT
Cache-Control: max-age=2592000, public, must-revalidate
Last-Modified: Wed, 16 Jan 2013 22:29:55 GMT
ETag: "0f8d22257da9fcae61f21fd30b7a1fd4"
Accept-Ranges: bytes
Content-Type: application/octet-stream
Content-Length: 39222189
Server: AmazonS3 
```

但是浏览器不会缓存文件。每次发送请求并从头开​​始传输所有数据（200 OK 而不是 304）。:(

文件大小为 37.4 MB

关于可能出错的任何提示？

谢谢，
曼努埃尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:53:37.423

尝试使用 HTTP 1.1 而不是 1.0。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)状态：

*Note that HTTP/1.0 caches might not implement Cache-Control and might only implement Pragma: no-cache*

# ios - UINavigationItem 标题

> ID：14366320
> 
> 赞同：1
> 
> 时间：2013-01-16T19:33:37.320
> 
> 标签：ios, objective-c, properties, title, uinavigationitem

尝试修改 UINavigationItem 中的标题

```
// this modify the title
self.navigationItem.title    = @"Any title";
// this does not
navigationItem.title    = @"Any title"; 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:39:51.817

`navigationItem`不是它正在使用的对象。是使用 a和 a`self.navigationItem`时按需创建的只读属性。您当然可以创建自定义，但在标准设置中通常不赞成这样做，您不需要这样做。`UIViewController``UINavigationController``UINavigationItem``UINavigationController`

至于`self.title`，它只是一个捷径`self.navigationItem.title`。快捷方式的原因是它可以在必要时用于其他容器类型的其他地方，包括您自己的自定义容器。

如果你解构正在发生的事情。很可能会发生这种情况，如果您访问一个基本的 UINavigationController 会加载导航项，则加载您的标题：

```
- (UINavigationItem)navigationItem
{
    if (!_navigationItem) {
        _navigationItem = [[UINavigationItem alloc] initWithTitle:self.title];
    }

    return _navigationItem;
} 
```

您可以在此处阅读有关 Apple 的更多信息：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp /UIViewController/navigationItem](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/navigationItem)

# jquery - 错误 jquery-ui 可拖动无法读取属性“msie”

> ID：14366322
> 
> 赞同：16
> 
> 时间：2013-01-16T19:33:55.053
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我在工作**jquery-ui draggable**时遇到了一些麻烦。我将与您分享我的解决方案，这是最好的解决方案吗？

我只是在开始真正的工作之前插入它来测试。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"></script> 
```

和

```
 $('img').draggable(); 
```

喜欢这里：http: [//jsbin.com/eqowet/2/](http://jsbin.com/eqowet/2/)

但我得到一个错误：

> 错误：未捕获的类型错误：无法读取未定义的属性“msie”。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-19T01:44:24.220

msie 是[jQuery.browser](http://api.jquery.com/jQuery.browser/)属性上的标志

[jQuery.browser](http://api.jquery.com/jQuery.browser/)自 1.3 版以来已被弃用，并在 jQuery 1.9.0 中被删除

由于您使用的是最新版本的托管 jQuery，因此您的库已自动升级到 1.9.0，因此出现错误。

正如您已经意识到的，恢复到 1.8.3（或更早版本）可以解决问题；然而，真正的解决方案是停止使用[jQuery.browser](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T19:33:55.053

我尝试了很多示例，但都不起作用，只是同样的消息，我意识到版本 1.8.24 与上一个 jQuery 版本不兼容。我已经改变了它，瞧，现在正在工作。

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

喜欢这里：http: [//jsbin.com/eqowet/3/](http://jsbin.com/eqowet/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T16:47:41.730

您可以使用 migrate.js 来获得兼容性

[http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T02:00:23.267

对于旧版本的 jquery mobile，我收到此错误。如果您使用的是旧的 JQM，则需要更新。如果你在 Rails 上，你可以使用 jquery [https://github.com/tscolari/jquery-mobile-rails](https://github.com/tscolari/jquery-mobile-rails)

如果您现在使用 rails gem，请务必获取 1.3 beta 1 来获得此修复：

```
gem 'jquery_mobile_rails', "~> 1.3.b1" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-11T10:18:31.630

“可排序”出现同样的错误。所以，确保所有依赖的脚本都包括在内，也应该是正确的顺序。

```
jquery.min.js
jquery.ui.core.js
jquery.ui.sortable.min.js 
```

例如，要使其在 Joomla 上运行，您可以这样做：

```
$doc =& JFactory::getDocument();
$doc->addScript('/media/jui/js/jquery.min.js');
$doc->addScript('/media/jui/js/jquery.ui.core.js');
$doc->addScript('/media/jui/js/jquery.ui.sortable.min.js'); 
```

# c - 我需要使用 C 的合并原则递归地从列表中删除重复项

> ID：14366323
> 
> 赞同：0
> 
> 时间：2013-01-16T19:33:55.463
> 
> 标签：c, recursion, merge, duplicate-removal

我试试这个：

```
 void
    remove_duplicate(List l, int p, int r){
        if(p<r){
            int q =(r+p)/2;
            remove_duplicate(l,p,q);
            remove_duplicate(l,q+1,r);
            merge_(l,p,q,r);
        }
    }

    void
    merge_(List lst, int p, int q, int r){
        int i = p;
        int j=q+1;
        int l = r;
        link lp = retNode(lst,p);
        link lq = retNode(lst,q+1);
        while(i<=q){
            j=q+1;
            while(j<=l){
                if(lp->item==lq->item){remNode(lst,j);j--;l--;}
                j++;lq=lq->next;}
                i++;lp = lp->next;}
    } 
```

但是当我删除一个元素然后不起作用时，“子列表”的大小会变小，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:29:21.323

这种递归方法不会很好地工作，因为正如您所发现的，当您从数组中删除项目时，您必须将所有内容向下移动。这将弄乱父递归调用列表中的偏移量。

您可以修改调用，`merge`以便参数是指针，并且如果调整列表大小，它们会更新为新值。然后你还必须以`remove_duplicates`同样的方式返回这些值。这可能很繁琐，但是如果您要更改列表的大小，那么我看不到任何其他方法-递归链中的父调用需要知道它们的边界已通过内部调用从删除项目中更改名单。只需记住在将指针传入的值传递给下一个调用之前获取它们的副本，否则您将一直拥有指向相同变量的指针，这将使事情变得非常糟糕。

但是，您真的需要使用递归方法吗？我不认为它是最简单或最有效的方法——在这种情况下，迭代方法可能更容易实现。

您似乎正在使用链表，因此迭代方法可能如下所示：

```
void remove_duplicates(ListItem *items)
{
    while (items) {
        ListItem *current = items;
        while (current->next) {
            if (current->next->item == items->item) {
                current->next = current->next->next;
            } else {
                current = current->next;
            }
        }
        items = items->next;
    }
} 
```

我假设您的列表`next`在此示例中由 NULL 指针终止，但它也应该很容易适应长度有界的列表。我还假设它只是单链接的——双向链接列表的基本方法是相似的，但当然你需要更新下一个和上一个指针。

# jinja2 - 文件大小格式过滤器不起作用？

> ID：14366325
> 
> 赞同：2
> 
> 时间：2013-01-16T19:34:02.243
> 
> 标签：jinja2

我试图简单地将字节大小呈现为以人类可读格式描述它的字符串：

```
$ python -c "import jinja2 ; print jinja2.Template(\"{{ bytes|filesizeformat }}\").render(bytes=1572864)"
0.0 MB 
```

不幸的是，我总是得到`0.0 MB`结果。为什么我没有得到真正的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:45:23.647

`filesizeformat`过滤器已在[2.7 版中修复](https://github.com/mitsuhiko/jinja2/blob/master/CHANGES)

但是，修复非常简单，只涉及两行代码，您可以自己实现。见[这里](https://github.com/mitsuhiko/jinja2/commit/7d268bef0e8f3f12c0acb90f30d67726a3e3f261)。

# android - Jsoup，连接与否

> ID：14366327
> 
> 赞同：0
> 
> 时间：2013-01-16T19:34:02.697
> 
> 标签：android, jsoup, cas

我必须将 Jsoup 连接到一个 url，你可以在代码中找到它

```
public class MainActivity extends Activity {
private static final String LOG_TAG = "debugger";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    downloadThread.start(); 

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

Thread downloadThread = new Thread() {                     
    public void run() {                                    

        try {    
            Log.i(LOG_TAG,"Beginning");
            Response res = Jsoup
                    .connect("https://cas.scolastance.com/cas-auvergne/login?service=http://clg-cosne-d-allier.entauvergne.fr/sco/Modules/Accueil/Accueil.aspx")
                    .data("username", "myuser", "password", "mypass")
                    .data("submit", "SE CONNECTER") 
                    .method(Method.POST)
                    .execute();    
            Log.i(LOG_TAG,res.toString()); 

        } catch (IOException e) {                          
            e.printStackTrace();                           
        }                                                  
    }                                                      
};                                                         

} 
```

回应是：

```
org.jsoup.helper.httpConnection$response@41577a10 
```

这是否意味着连接正常？我是开发的初学者，对不起。谢谢回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:37:30.917

尝试这个：

```
res.statusCode(); 
```

您将获得响应的状态码。

在这里查看更多信息：http: [//jsoup.org/apidocs/org/jsoup/Connection.Response.html#statusCode](http://jsoup.org/apidocs/org/jsoup/Connection.Response.html#statusCode) ()

您也可以尝试显示`res.body();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:00:03.020

其实Jsoup是没有连接的。所以我尝试了这种方式：

```
 //First connection, to read the key
            Document doc = Jsoup.connect("https://cas.scolastance.com/cas-auvergne/login?service=http://clg-cosne-d-allier.entauvergne.fr/sco/Modules/Accueil/Accueil.aspx").get();
            String key ="";
            Element keyInput = doc.select("input[name=lt]").first();
            key = keyInput.attr("value");
            System.out.println("received value : " + key);

            //Second connection to post the data  
            Log.i(LOG_TAG,"Connecting ....");
            Response res = Jsoup
                    .connect("https://cas.scolastance.com/cas-auvergne/login?service=http://clg-cosne-d-allier.entauvergne.fr/sco/Modules/Accueil/Accueil.aspx")
                    .data("username", "myuser", "password", "mypass")

                    .data("lt", key) 
                    .data("_eventId", "submit") 
                    .data("submit", "SE CONNECTER") 
                    .method(Method.POST)
                    .execute(); 

            int statusCode = res.statusCode();
            String body = res.body().toString();
            System.out.println("received code : " + statusCode);
            System.out.println("received body : " + body); 
```

但显示的主体仍然是“登录”主体，而不是“连接”主体。

# java - JTextField 验证

> ID：14366330
> 
> 赞同：3
> 
> 时间：2013-01-16T19:34:16.320
> 
> 标签：java, swing, validation, jtextfield

我为 JTextField 编写了自己的 InputVerifier，它工作正常。现在我想在用户单击按钮时对此文本字段进行“强制”验证。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:38:06.313

作为答案添加为@JarekMazur 说它解决了问题。

重申我的评论：

+1 @MadProgrammer 获取文档

请参阅[这个](https://stackoverflow.com/questions/13563042/programmatically-trigger-a-key-events-in-a-jtextfield/13563314#13563314)类似的问题/答案。它展示了如何使用class 和以编程方式触发`JTextField` `enter`按键，尽管我认为您只需要后者。`Robot`[`requestFocusInWindow()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#requestFocusInWindow%28%29)

尝试`JTextField`使用 改变焦点[`requestFocusInWindow()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#requestFocusInWindow%28%29)。

`JTextField`为了触发该`Input Verifier` [`shouldYieldFocus`](http://docs.oracle.com/javase/7/docs/api/javax/swing/InputVerifier.html#shouldYieldFocus%28javax.swing.JComponent%29)方法，您最初会请求关注和而不是另一个组件。

# oracle11g - Oracle 用逗号分隔值组合列

> ID：14366331
> 
> 赞同：0
> 
> 时间：2013-01-16T19:34:22.743
> 
> 标签：oracle11g

我有一个表，每行的值如“1,2,3,4,5,6,7”

```
ID Value
101  5,6,7
201  8,9,3
301  3,4,5 
```

值列值是其他表 B 表 B 的外键

```
5 A
6 C
7 N 
```

有什么办法可以在一个查询中将这两个表连接在一起？我想通过 101 并获取 ACN 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:21:32.577

如果您的模型如图所示，是这样的吗？

```
select a.id, listagg(new_value, ',') within group (order by new_value) new_value
  from a 
       inner join b 
               on ','||a.value||',' like '%,'|| b.value ||',%'
 group by a.id 
```

[http://www.sqlfiddle.com/#!4/74e46/1](http://www.sqlfiddle.com/#!4/74e46/1)

# python - 从字典中删除特殊字符

> ID：14366332
> 
> 赞同：1
> 
> 时间：2013-01-16T19:34:29.467
> 
> 标签：python, dictionary

我正在尝试从 python 字典中删除所有 \r\n 。最简单的方法是什么。我的字典现在看起来像这样-

```
 {'': '34.8\r\n', 
  'Mozzarella di Giovanni\r\n': '34.8\r\n', 
   'Queso Cabrales\r\n': '14\r\n', 
   'Singaporean Hokkien Fried Mee\r\n': '9.8\r\n'
} 
```

**编辑**：这是我正在尝试的 -

```
for key, values in productDictionary.items() :
    key.strip()
    values.strip()
    key.strip('"\"r')
    key.strip('\\n')
    values.strip('\\r\\n')
print productDictionary 
```

而且输出还是一样的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T19:36:37.847

使用字典理解：

```
clean_dict = {key.strip(): item.strip() for key, item in my_dict.items()} 
```

该`strip()`函数从字符串的前后删除换行符、空格和制表符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T19:36:24.927

你可以使用`str.strip()`：

`str.strip()`当不带参数使用时，去除所有类型的前导和尾随空格。

```
>>> productDictionary={'': '34.8\r\n', 
  'Mozzarella di Giovanni\r\n': '34.8\r\n', 
   'Queso Cabrales\r\n': '14\r\n', 
   'Singaporean Hokkien Fried Mee\r\n': '9.8\r\n'
}

>>> productDictionary=dict(map(str.strip,x) for x in productDictionary.items()) 
>>> print productDictionary
>>>
{'': '34.8',
 'Mozzarella di Giovanni': '34.8',
 'Queso Cabrales': '14',
 'Singaporean Hokkien Fried Mee': '9.8'} 
```

`help()`上`str.strip()`

> S.strip([chars]) -> 字符串或 unicode
> 
> 返回删除了前导和尾随空格的字符串 S 的副本。如果给出了 chars 而不是 None，则改为删除 chars 中的字符。如果 chars 是 unicode，则 S 将在剥离前转换为 unicode

# ruby-on-rails - 如何在rails中暂停和恢复delayed_job任务

> ID：14366335
> 
> 赞同：3
> 
> 时间：2013-01-16T19:34:37.373
> 
> 标签：ruby-on-rails, delayed-job

有什么办法可以暂停和恢复rails中delayed_job的长任务。就我而言，一项任务是使用 twilio 发送数百条短信。我想允许我的用户暂停和恢复短信发送进度。是否可以？请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:00:55.310

不幸的是，没有内置的方法可以使用delayed_job 暂停和恢复作业。请参阅以下 GitHub 问题：[https ://github.com/collectiveidea/delayed_job/issues/58](https://github.com/collectiveidea/delayed_job/issues/58)

这并不是说您无法通过额外的工作来完成此任务。你可以让你定期检查你的数据库，看看它是否应该在继续之前等待。定义如何完成“等待”是另一回事。很有可能，您最好的选择是为“暂停”操作设计一种方法来停止当前作业并保存其状态。然后“恢复”将启动另一个工作，该工作会从中断的地方继续。

# php - 在 PHP switch 语句中使用未经处理的用户输入的危险

> ID：14366341
> 
> 赞同：0
> 
> 时间：2013-01-16T19:34:54.853
> 
> 标签：php

在 switch 语句中使用未经处理的用户输入是否有任何顾虑？谢谢

```
switch($_GET['userInput']) {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:36:14.820

除此之外，您的 switch 语句可能无法正常工作，不，这没有任何安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:36:18.493

你永远不应该在野外接受一个变量，而不首先以某种方式、形状或形式对其进行消毒，无论它的用途是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:37:44.187

选择语句本身没有危险，**但是**根据您在其中放入的内容，您的情况很可能存在（如果您不清理/控制您的输入，文件创建/写入/操作和数据库处理都可能非常危险）。

# c++ - c++方法参数类引用

> ID：14366343
> 
> 赞同：0
> 
> 时间：2013-01-16T19:35:08.303
> 
> 标签：c++

我很抱歉问这样一个新手问题。这是我的问题：

```
MyClass* c = new MyClass("test");
method(c);//error cannot convert MyClass* to MyClass 
```

定义 ：

```
method(MyClass c); 
```

我也应该定义吗？

```
method(MyClass* c); 
```

我不想复制代码，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:43:11.743

您显然是一名 Java 程序员！首先，您需要执行以下操作：

```
MyClass* c = new MyClass("test"); 
```

请注意，这`c`是一个“指向”的指针`MyClass`——这是必要的，因为`new`表达式为您提供了一个指向动态分配对象的指针。

现在，要将其传递给带`MyClass`参数的函数，您需要取消引用指针。也就是说，您将执行以下操作：

```
method(*c); 
```

请注意，由于该函数采用`MyClass`值（而不是引用），因此该对象将被复制到您的函数中。里面的`MyClass`对象`method`将是您之前分配的对象的副本。参数的类型完全取决于您希望函数执行和传达的内容。相反，如果您想要对对象的引用，以便修改函数内部的对象将修改函数`c`外部的对象，您需要您的函数接受一个`MyClass&`参数 - 对`MyClass`.

如果您要让参数为 type `MyClass*`，那么您可以简单地执行以下操作：

```
method(c); 
```

这将为您提供与传递引用类似的语义，因为指针`c`将被复制到函数中，但指针引用的对象仍将是动态分配的`MyClass`对象。也就是说，如果在你修改的函数内部`*d`，指向的对象`c`也会被修改。

像这样传递原始指针通常不是一个很好的方法。该函数必须明确检查指针是否为空，否则您的程序可能会在某些情况下崩溃。如果您想要传递引用语义，请使用引用类型 - 这就是它们的用途。

但是，最好不要一开始就动态分配`MyClass`对象。我猜你之所以使用它只是`new`因为你在 Java 中做了很多。在 C++ 中，`new`表达式用于*动态分配*对象。通常，您不想动态分配对象。使用自动存储持续时间创建它是非常好的，您可以这样做：

```
MyClass c("test");
method(c); 
```

除非您有充分的理由，否则在 C++ 中避免指针和动态分配被认为是非常好的做法。它只会导致您编写更复杂的代码，并为错误和错误留出更多空间。事实上，你给出的代码已经有问题了，因为你没有`delete c;`. 当您按照我刚才的建议进行操作时，您无需显式删除任何内容，因为对象超出范围时将被销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:38:08.910

```
MyClass *c = new MyClass("test");

method(*c); 
```

如果您定义了类似的方法，它会起作用`method(MyClass c)`

但是如果你定义你的方法，比如`method(MyClass *c);`

那么应该是

```
MyClass *c = new MyClass("test");
method(c); 
```

这两种选择会产生后果，具体取决于您要对已创建的对象执行的操作。

# intersystems - 将数据发送到 XDS 存储库

> ID：14366348
> 
> 赞同：1
> 
> 时间：2013-01-16T19:35:34.180
> 
> 标签：intersystems, intersystems-ensemble

所以我试图弄清楚 Intersystems 有多少功能可以将数据发送到 XDS 存储库。特别是使用基本的 Ensemble 包（无 HSF）假设它不是 Intersystems 提供的，而是一个外部 XDS 存储库。

有没有一种内置的方法来发送一个大的 blob 并将 ebRim 包裹在那个 blob 周围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:05:41.437

正如您在[http://www.intersystemsbenelux.com/media/media_manager/pdf/1398.pdf](http://www.intersystemsbenelux.com/media/media_manager/pdf/1398.pdf)所看到的，Ensemble 本身并不支持 ebRIM，但它确实支持 XML 和 XML 模式。也许您可以组装一个 XML 并使用它来包装您的 blob 内容。

您可以通过 XDS 系统提供的任何协议（xDBC、SOAP、文件系统等）发送它。[查看http://docs.intersystems.com/ens20122/csp/docbook/DocBook.UI.Page.cls](http://docs.intersystems.com/ens20122/csp/docbook/DocBook.UI.Page.cls)的“Ensemble Interoperability”和“Ensemble Adapter and Gateway Guides”部分中列出的项目以获取完整列表连接选项。

问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:19:30.970

有具有 XDS 连接性的 healthshare 基础产品

在 google 群组上查看这个很好的答案[https://groups.google.com/forum/m/?fromgroups#!topic/Ensemble-in-Healthcare/h7R300H68KQ](https://groups.google.com/forum/m/?fromgroups#!topic/Ensemble-in-Healthcare/h7R300H68KQ)

或者健康分享他们网站的一部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:59:57.953

`HSF (HealthShare Foundation)`用于查询和检索以及提供和注册操作的 XDS.b 连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T20:57:50.937

好的，所以我重新阅读了您的问题并为您提供了答案。我认为您想说的是您拥有 Ensemble，而不是 HSF，并且您仍然希望能够发送文件（XDS 提供和注册）。

我对开源集成进行了一些测试，偶然发现了他们的一个示例通道，它正在提供并注册直接到端点的 SOAP 调用。

基本上，相应地构建所需的肥皂信封，然后使用 MTOM 将 PDF 或文档发送到存储库。

这就是 HealthShare 赚钱的原因，它封装了需要发送到端点的所有手动构建的对象。

无论如何，Mirth频道目的地的截图让您了解：

[http://www.integrationrequired.com/wp-content/uploads/2013/02/Capture.PNG](http://www.integrationrequired.com/wp-content/uploads/2013/02/Capture.PNG)

# asterisk - QueueMetrics、qLoader 和 Asterisk 无法正确对话

> ID：14366349
> 
> 赞同：0
> 
> 时间：2013-01-16T19:35:39.373
> 
> 标签：asterisk

我有 2 台服务器，一台安装了 QueueMetrics，另一台安装了 Asterisk 和 qLoader。这两个服务器都能够相互通信并来回传递数据。我遇到的问题是，在将代理添加到队列时，Queuemetrics 或 Asterisk 服务器都没有识别出正在添加代理。我可以打电话到队列中，并在 QM 中看到它被实时提供给队列。当我尝试将代理添加到队列时，QM 说正在添加代理。添加代理后观看实时监视器时，代理永远不会显示为已登录。我也检查了 MySQL 数据库，它也从未显示代理已登录。在这一点上我不确定是什么导致了问题，以及是否是代理不是

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:31:31.487

QueueMetrics 使用两个不同的通道与服务器一起工作：它通过 qloader 从 queue_log 读取数据（这对您有用），并使用 AMI 和自定义 Asterisk 拨号计划来执行登录代理等操作。

您可以通过 DbTester 工具测试 AMI 以及是否包含拨号方案 - 请参阅[http://queuemetrics.com/manuals/QM_UserManual-chunked/ar01s20.html#DBTEST](http://queuemetrics.com/manuals/QM_UserManual-chunked/ar01s20.html#DBTEST) - 请注意，您可能需要编辑提供的拨号方案以匹配频道名称的格式。Qm 非常灵活，但您需要告诉它您的环境是如何设置的。

或者在尝试登录代理时保持 Asterisk CLI 打开，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:23:22.700

我认为您需要阅读有关队列设置的内容并检查您的设置。例如本书：[http ://cdn.oreilly.com/books/9780596510480.pdf](http://cdn.oreilly.com/books/9780596510480.pdf)

不幸的是，如果不查看配置和调试，就无法对您的安装进行故障排除。

# java - 如何从 Python 中的可执行 jar 中捕获信息？

> ID：14366352
> 
> 赞同：1
> 
> 时间：2013-01-16T19:35:53.820
> 
> 标签：java, python

我有一个可执行的 jar，它将一些信息打印到屏幕上。我想从输出中捕获一个特定的数字，即成本。例如，有一行“Cost = 10”，当我运行 jar 文件 N 次时，我想有一个成本列表。我想用 python 脚本自动化这个过程，但由于我是 Python 新手，我不知道在 Python 脚本中从 stdout 中提取一些数据的最佳方法。完成这项任务的最佳方法是什么？

```
def wrapper(*args):
    process = Popen(list(args), stdout=subprocess.PIPE)
    process.communicate()
    return process

linkFileList = [ join(linkDir,f) for f in listdir(linkDir) if isfile(join(linkDir,f)) ]
nodeFileList = [ join(nodeDir,f) for f in listdir(nodeDir) if isfile(join(nodeDir,f)) ]
pairFileList = [ join(pairDir,f) for f in listdir(pairDir) if isfile(join(pairDir,f)) ]
size = len(linkFileList)
for count in range(0, size):
    x = wrapper('java', '-jar', 'C:\\Users\\fatma\\Documents\\workspace\\HeuristicRunnable.jar', nodeFileList[count], linkFileList[count], pairFileList[count]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:47:52.550

你很近。你想这样做：

```
def wrapper(*args):
    process = Popen(list(args), stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    stdout, stderr = process.communicate()
    return stdout, stderr 
```

变量`stdout`和`stderr`将是与 jar 中的 stdout 和 stderr 的输出相对应的简单字符串。我真的不认为`process`一旦你使用了这个变量，你就不能对它做任何事情，所以返回它真的没有多大意义。

（我还包括了获取 stderr 所需的代码，以防万一也被证明是有用的）

# tcp - 网络错误（Tcp 错误）

> ID：14366353
> 
> 赞同：0
> 
> 时间：2013-01-16T19:35:54.377
> 
> 标签：tcp, hadoop

我在需要代理设置才能访问互联网的网络中。我有一个奇怪的问题。

互联网运行良好。但是当我收到此错误时，这是​​一个特定的实例：

```
Network Error (tcp_error) 

A communication error occurred: "Operation timed out"
The Web Server may be down, too busy, or experiencing other problems preventing it from responding to requests. You may wish to try again at a later time.

For assistance, contact your network support team. 
```

当我在本地模式下使用 hadoop 时会发生这种情况。我可以访问 UI 界面。我可以看到正在运行的作业。但是当我尝试查看每个任务的日志时.. 我无法访问这些日志。

```
UI--> job-->map--> task--> all <-- this is where the error is.. 
```

有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:11:57.497

不确定您的 tcp 操作到底是什么，或者关于 Hadoop 或您的代理设置，但如果您可以可靠地重复错误，并且每次测试时超时错误发生的时间大致相同，并且该时间大约为分钟，我的猜测是你在服务器上有一个真正的处理延迟（可能是由某处阻塞引起的），但不一定。

# datastage - DS 安装错误

> ID：14366356
> 
> 赞同：0
> 
> 时间：2013-01-16T19:36:01.270
> 
> 标签：datastage

我正在尝试安装 DS 服务器并且我收到以下错误

FAILED: CDIPR2079I: 确保用户 xmeta_user 可以连接到主机上端口号的数据库，并具有创建表、创建视图、创建索引和创建触发器权限。解决方法：确保用户xmeta_user可以连接到主机上的数据库端口号，并具有创建表、创建视图、创建索引和创建触发器权限。

你能告诉我我必须做什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T14:41:59.420

请参阅这些技术说明：

[http://www-01.ibm.com/support/docview.wss?uid=swg21606320](http://www-01.ibm.com/support/docview.wss?uid=swg21606320)

[http://www-01.ibm.com/support/docview.wss?uid=swg21514883](http://www-01.ibm.com/support/docview.wss?uid=swg21514883)

# c - 花栗鼠和代码块未定义的参考错误

> ID：14366364
> 
> 赞同：0
> 
> 时间：2013-01-16T19:36:25.363
> 
> 标签：c, codeblocks, chipmunk

我使用代码块项目文件构建了花栗鼠并已链接到 libchipmunk.a 文件，但在尝试构建 hello world 示例文件时仍然出现 1 个错误。

对“cpBodySetPos”的未定义引用

任何机构都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:11:04.983

如果您没有在链接器选项卡中正确链接 libchipmunk.a 文件，或者如果它是旧版本的花栗鼠，则生成的`libchipmunk.a`文件不包含`cpBodySetPos()`.

要链接`libchipmunk.a`文件：

*   打开项目文件。
*   然后右键单击项目（从左窗格）并单击“构建选项”。
*   在窗口中，左侧应该有，Release，Debug。
*   选择您的项目名称，然后单击“链接器”选项卡。
*   从那里，将库添加到链接库中。
*   如果您使用的是 windows，则必须手动查找库，或者在 linux 中，只需键入“chipmunk”，gcc/ld 将为您完成其余的工作。

另请参阅[此链接](http://code.google.com/p/chipmunk-freebasic/source/browse/trunk/support/README.txt?r=109)以了解您`libchipmunk.a`是否为代码块和最新版本的花栗鼠正确生成文件。

# magento - 在 Magento Extension 中创建类别和子类别

> ID：14366367
> 
> 赞同：1
> 
> 时间：2013-01-16T19:36:29.953
> 
> 标签：magento, magento-1.7, categories

我是 Magento 扩展开发的新手，想知道从扩展中创建类别和子类别的最佳方式是什么。我正在研究的扩展是同步来自 ERP 系统的产品数据。该扩展使用系统->配置对话框运行，该对话框保存连接到服务器的数据（用户/密码/等）。现在我想知道，是通过 Ajax 请求连接还是使用 Soap 调用更好。在这种情况下，对于大约 700 个产品，Ajax 似乎非常慢。所以你有什么建议？

此外，我在创建类别和子类别方面有点卡住。有没有简单的方法来做到这一点。我发现了一些关于创建类别的东西，然后使用 ->move() 函数。此外，我想知道类别的“路径”对于创建子类别是否必不可少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:02:25.200

您应该使用 magento 模型：

使用子类别创建类别：

```
/**
 * After installation system has two categories: root one with ID:1 and Default category with ID:2
 */
/** @var $category1 Mage_Catalog_Model_Category */
$category1 = Mage::getModel('catalog/category');
$category1->setName('Category 1')
    ->setParentId(2)
    ->setLevel(2)
    ->setAvailableSortBy('name')
    ->setDefaultSortBy('name')
    ->setIsActive(true)
    ->setPosition(1)
    ->save();

/** @var $category2 Mage_Catalog_Model_Category */
$category2 = Mage::getModel('catalog/category');
$category2->setName('Category 1.1')
    ->setParentId($category1->getId()) // set parent category which was created above
    ->setLevel(3)
    ->setAvailableSortBy('name')
    ->setDefaultSortBy('name')
    ->setIsActive(true)
    ->setIsAnchor(true)
    ->setPosition(1)
    ->save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:11:50.593

```
public static function addCatalogCategory($item, $id, $storeId = 0) {
    /*
     * resource for checking category exists
     * http://fishpig.co.uk/blog/load-a-category-or-product-by-an-attribute.html
     */
    $categories = Mage::getResourceModel('catalog/category_collection');
    // Select which fields to load into the category
    // * will load all fields but it is possible to pass an array of
    // select fields to load
    $categories->addAttributeToSelect('*');
    // Ensure the category is active
    $categories->addAttributeToFilter('is_active', 1);
    // Add Name filter
    $categories->addAttributeToFilter('name', $item->GROUP_NAME);
    // Limit the collection to 1 result
    $categories->setCurPage(1)->setPageSize(1);
    // Load the collection
    $categories->load();

    if ($categories->getFirstItem()->getId()) {
        $category = $categories->getFirstItem();
        return $category->getId();
    }

    /* get category object model */
    $category = Mage::getModel('catalog/category');
    $category->setStoreId($storeId);
    $data = array();
    /* if the node is root */
    if (Heliumv_Synchronization_Helper_Data::xml_attribute($item, 'type') == 'root') {
        $data['category']['parent'] = 2; // 2 top level id
    } else {
        /* is node/leaf */
        $data['category']['parent'] = $id;
    }

    $data['general']['path'] = $item->PARENT_ID;
    $data['general']['name'] = $item->GROUP_NAME;
    $data['general']['meta_title'] = "";
    $data['general']['meta_description'] = "";
    $data['general']['is_active'] = "1";
    $data['general']['url_key'] = "";
    $data['general']['display_mode'] = "PRODUCTS";
    $data['general']['is_anchor'] = 0;

    /* add data to category model */
    $category->addData($data['general']);

    if (!$category->getId()) {
        $parentId = $data['category']['parent'];
        if (!$parentId) {
            if ($storeId) {
                $parentId = Mage::app()->getStore($storeId)->getRootCategoryId();
            } else {
                $parentId = Mage_Catalog_Model_Category::TREE_ROOT_ID;
            }
        }
        $parentCategory = Mage::getModel('catalog/category')->load($parentId);
        $category->setPath($parentCategory->getPath());
    }

    $category->setAttributeSetId($category->getDefaultAttributeSetId());

    try {
        $category->save();

        return $category->getId();
    } catch (Exception $e) {
        echo Mage::log($e->getMessage());
    }
} 
```

我希望这可以帮助别人。干杯

# javascript - 为什么不在 jQuery 中使用媒体查询？

> ID：14366379
> 
> 赞同：0
> 
> 时间：2013-01-16T19:37:04.733
> 
> 标签：javascript

我正在尝试使用 jQuery 进行媒体查询，但无法正常工作。

```
 if ((screen.width>=20) || (screen.width<300)){
        width="190"; //Adjust the width of the image
        height="170"; //Adjust the height of the image
    }
    if ((screen.width>=300) || (screen.width<350)){
        width="240"; height="200";
    }
    if ((screen.width>=351) || (screen.width<400)){
        width="280"; height="220";
    }
    if ((screen.width>=401) || (screen.width<599)){
        width="320"; height="240";
    }
    if ((screen.width>=600) || (screen.width<757)){
        width="440";  height="320";
    }
    if ((screen.width>=758) || (screen.width<899)){
        width="320"; height="240";
    } 
```

加载插件时调用代码，因为添加了新内容。这是一个单页应用程序。无需刷新浏览器即可加载内容。我需要将媒体查询与 jquery 一起使用，因为`width`和`height`是插件的变量。

任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:56:04.627

这是你想要的吗？

```
 if ((window.innerWidth>=20) || (window.innerWidth<300)){
        width="190"; //Adjust the width of the image
        height="170"; //Adjust the height of the image
    }
    if ((window.innerWidth>=300) || (window.innerWidth<350)){
        width="240"; height="200";
    }
    if ((window.innerWidth>=351) || (window.innerWidth<400)){
        width="280"; height="220";
    }
    if ((window.innerWidth>=401) || (window.innerWidth<599)){
        width="320"; height="240";
    }
    if ((window.innerWidth>=600) || (window.innerWidth<757)){
        width="440";  height="320";
    }
    if ((window.innerWidth>=758) || (window.innerWidth<899)){
        width="320"; height="240";
    } 
```

# c# - RavenDB - 子实体包括

> ID：14366381
> 
> 赞同：1
> 
> 时间：2013-01-16T19:37:08.750
> 
> 标签：c#, ravendb

我以前曾看过这个问题，但从未得到解决 - 原始海报并不是很清楚，所以我再次尝试更清楚一点。

鉴于以下模拟结构...

```
public class Container {
    public string Id { get; set; }
    public List<Entity> Entities { get; set; }
}

public class Entity {
    public string Id { get; set; }
    public List<string> Sub_Entities { get; set; }
}

public class Sub_Entity {
    public string Id { get; set; }
    public List<string> Sub_Entities { get; set; }
} 
```

这意味着 Sub_Entity 永远不会被非规范化，因此它的相关 Id 不存在于实际的 JSON 对象上，所以我最终得到了这样的对象。

=======“容器/1”=======

```
{
    "Entities" : [
        {
            "Id" : "entities/1",
            "Sub_Entities" : [
                "sub_entities/1",
                "sub_entities/2",
                "sub_entities/3"
            ]
        }
    ]
} 
```

=======“sub_entities/1”=======

```
{
    "Sub_Entities" : [
        "sub_entities/4",
        "sub_entities/5",
        "sub_entities/6"
    ]
} 
```

=======“sub_entities/2”=======

```
{
    "Sub_Entities" : [
        "sub_entities/7",
        "sub_entities/8",
        "sub_entities/9"
    ]
} 
```

=======“sub_entities/3”=======

```
{
    "Sub_Entities" : [
        "sub_entities/10",
        "sub_entities/11",
        "sub_entities/12"
    ]
} 
```

现在我想真正优化从数据库中提取所有内容的方式。所以我首先将 sub_entities 包含在初始容器中。

我已经这样做了：

```
var container = DocumentSession
    .Include("Entities,Id")
    .Include("Entities,Sub_Entities")
    .Load<Container>("containers/1"); 
```

我还使用谓词通过以下方式完成了它。

```
var container = DocumentSession
    .Include<Container>(n => n.Entities.SelectMany( y => y.Id ) )
    .Include<Container>(n => n.Entities.SelectMany( y => y.Sub_Entities ))
    .Load<Container>("containers/1"); 
```

这让我在一个请求中获得了初始的 sub_entities 集，但是我可以做些什么来更深入地查询以确保嵌套的 sub_entities 可以包含在同一个请求中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T05:26:21.483

这是 Google Groups 邮件列表中的特定[主题](https://groups.google.com/forum/#!searchin/ravendb/Sub_Entities/ravendb/DymfX7PXo3M/t2zk78jqJ90J)。

Ayende 还在该线程中提到了他的[一篇博客文章，他在其中介绍了这个概念。](http://ayende.com/blog/156321/tertiary-includes-in-ravendb)

# c++ - 如何读取将像素表示为无符号整数的 char 数组

> ID：14366382
> 
> 赞同：1
> 
> 时间：2013-01-16T19:37:09.727
> 
> 标签：c++, casting

我正在编写一个 C++ 命令行应用程序，它将 Haar 变换应用于 bmp 图像的像素。我已经成功地提取了标题信息并确定了像素的字节数组大小。用文件中的像素数据填充 char[pixelHeight][rowSizeInBytes] 后，我将每个像素（我正在使用的 bmp 的 24 位）读入一个向量。它正在我的机器上运行，但我想知道我将表示像素的 char 数组转换为 unsigned int 的实现是否安全和/或惯用的 C++ 方式。我假设一个小端架构。

```
unsigned char pixelData[infoHeader->pixelHeight][rowSize];
fseek(pFile, basicHeader->pixelDataOffset, SEEK_SET);
fread(&pixelData, pixelArraySize, 1, pFile);

for(int row = 0; row < infoHeader->pixelHeight; row++)
{
    for(int i = 0; i < rowSize; i = i + 3)
    {
        unsigned char blue = pixelData[row][i];
        unsigned char green = pixelData[row][i + 1];
        unsigned char red = pixelData[row][i + 2];

        char vals[4];
        vals[0] = blue;
        vals[1] = green;
        vals[2] = red;
        vals[3] = '\0';

        unsigned int pixelVal = *((unsigned int *)vals);

        pixelVec.push_back(pixelVal);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:44:25.583

不，这是单调的。您应该按照您的意思编写代码，而不是依赖系统的字节序。例如：

```
 unsigned int pixelVal = static_cast<unsigned int>(blue) |
     (static_cast<unsigned int>(green) << 8) |
     (static_cast<unsigned int>(red) << 16); 
```

这假设您的意图是获取具有无符号整数的特定值的向量。如果您的意图是获取具有特定字节的向量，则应使用字节大小结构的向量，而不是无符号整数。

# c# - WCF：如何反序列化具有不同名称空间的 SOAP 消息的参数？

> ID：14366386
> 
> 赞同：1
> 
> 时间：2013-01-16T19:37:14.190
> 
> 标签：c#, wcf, soap

我是 WCF 和 Stackoverflow 的新手。我正在尝试处理来自现有客户端的 SOAP (1.2) 请求。消息如下：

```

```
<s:Body>
  <ns1:MyMethod>
    <ns1:Parameter1> A string value </ns1:Parameter1>
    <ns2:Parameter2> Another string value </ns2:Parameter2>
  </ns1:MyMethod>
</s:Body> 
```

这是我的服务器端代码：

```

```
[SerivceContract(Namespace = "ns1...")]
public class IMyService
{
    [OperationContract(Action="http://the action url")]
    void MyMethod(string Parameter1, string Parameter2);
} 
```

我可以正确反序列化“Parameter1”，但“Parameter2”始终为空。我想这是因为不同的命名空间（ns1 vs ns2）。有什么帮助吗？

            回答 #1

赞同：0

时间：2013-01-17T09:28:34.073

必须创建一个服务来满足客户端已经发送的请求是非常不寻常的。

这就像试图购买一台支持 15 年旧打印机驱动程序的新计算机。

解决方案：只需购买一台新打印机。

客户端应该使用服务，而不是相反。

欣赏这不会直接回答您的问题，并且可能超出解决方案的范围。

            回答 #2

赞同：0

时间：2017-08-25T22:00:44.500

这是一个古老的问题，但在试图找到类似问题的答案时我偶然发现了它。反序列化 Parameter1 而不是 Parameter2 的原因可能是因为这两个字段都没有命名空间定义，因此它们从父级 (MyMethod) 继承了命名空间。这也在[这个](https://stackoverflow.com/questions/31440352/wcf-xml-deserialization-is-being-very-picky-about-namespaces-and-aliases/45871292#45871292)线程上进行了解释。对于当前情况，您需要使用自定义 XmlSerializerFormat 并将 ns2 命名空间添加到 Param2：

```
[ServiceContract(Namespace = "http://ns1.com")]
[XmlSerializerFormat]
public interface IOpenInvoiceInterface
{
    [OperationContract]
    MyMethod Test(MyMethod req);
}

public class MyMethod
{
    [MessageBodyMember]
    public string Param1 { get; set; }

    [MessageBodyMember(Namespace = "http://ns2.com")]
    public string Param2 { get; set; }
} 
```

使用此设置，以下调用将按预期反序列化：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://ns1.com" xmlns:ns2="http://ns2.com">
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <ns1:MyMethod >
        <ns1:Param1>abc</ns1:Param1>
        <ns2:Param2>cde</ns2:Param2>
    </ns1:MyMethod>
  </s:Body>
</s:Envelope> 
```

```

```

# arrays - 检查 Bash 数组中是否存在元素

> ID：14366390
> 
> 赞同：81
> 
> 时间：2013-01-16T19:37:27.317
> 
> 标签：arrays, bash, shell, search

我想知道是否有一种有效的方法来检查 Bash 中的数组中是否存在元素？我正在寻找类似于我可以在 Python 中执行的操作，例如：

```
arr = ['a','b','c','d']

if 'd' in arr:
    do your thing
else:
    do something 
```

我已经看到在 Bash 4+ 中使用 bash 的关联数组的解决方案，但我想知道是否还有其他解决方案。

请理解，我知道简单的解决方案是在数组中迭代，但我不希望这样。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-16T20:37:30.827

你可以这样做：

```
if [[ " ${arr[*]} " == *" d "* ]]; then
    echo "arr contains d"
fi 
```

例如，如果您查找“a b”，这将给出误报——该子字符串在连接的字符串中，但不是作为数组元素。无论您选择什么分隔符，都会出现这种困境。

最安全的方法是遍历数组，直到找到元素：

```
array_contains () {
    local seeking=$1; shift
    local in=1
    for element; do
        if [[ $element == "$seeking" ]]; then
            in=0
            break
        fi
    done
    return $in
}

arr=(a b c "d e" f g)
array_contains "a b" "${arr[@]}" && echo yes || echo no    # no
array_contains "d e" "${arr[@]}" && echo yes || echo no    # yes 
```

这是一个“更干净”的版本，您只需传递数组名称，而不是其所有元素

```
array_contains2 () { 
    local array="$1[@]"
    local seeking=$2
    local in=1
    for element in "${!array}"; do
        if [[ $element == "$seeking" ]]; then
            in=0
            break
        fi
    done
    return $in
}

array_contains2 arr "a b"  && echo yes || echo no    # no
array_contains2 arr "d e"  && echo yes || echo no    # yes 
```

* * *

对于*关联数组*，有一种非常简洁的方法可以测试数组是否包含给定的*键*：`-v`运算符

```
$ declare -A arr=( [foo]=bar [baz]=qux )
$ [[ -v arr[foo] ]] && echo yes || echo no
yes
$ [[ -v arr[bar] ]] && echo yes || echo no
no 
```

请参阅手册中的[6.4 Bash 条件表达式](https://www.gnu.org/software/bash/manual/bash.html#Bash-Conditional-Expressions)。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-16T19:58:54.567

除了明显的警告之外，如果您的阵列实际上与上面的阵列一样，您可以这样做

```
if [[ ${arr[*]} =~ d ]]
then
  do your thing
else
  do something
fi 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-12-30T12:04:29.373

1）初始化数组`arr`并添加元素

2) 设置要搜索的变量`SEARCH_STRING`

3）检查您的数组是否包含元素

```
arr=()
arr+=('a')
arr+=('b')
arr+=('c')

SEARCH_STRING='b'

if [[ " ${arr[*]} " == *"$SEARCH_STRING"* ]];
then
    echo "YES, your arr contains $SEARCH_STRING"
else
    echo "NO, your arr does not contain $SEARCH_STRING"
fi 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-12-03T12:45:52.427

如果数组元素不包含空格，另一种（可能更易读）解决方案是：

```
if echo ${arr[@]} | grep -q -w "d"; then 
    echo "is in array"
else 
    echo "is not in array"
fi 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-01T14:25:45.930

```
array=("word" "two words") # let's look for "two words" 
```

## 使用`grep`和`printf`：

```
(printf '%s\n' "${array[@]}" | grep -x -q "two words") && <run_your_if_found_command_here> 
```

## 使用`for`：

```
(for e in "${array[@]}"; do [[ "$e" == "two words" ]] && exit 0; done; exit 1) && <run_your_if_found_command_here> 
```

*对于 not_found 结果添加`|| <run_your_if_notfound_command_here>`*

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-04T05:50:43.843

由于 bash 没有内置的*值* `in` *数组*运算符，并且`=~`运算符或`[[ "${array[@]" == *"${item}"* ]]`符号让我感到困惑，我通常`grep`与 here-string 结合使用：

```
colors=('black' 'blue' 'light green')
if grep -q 'black' <<< "${colors[@]}"
then
    echo 'match'
fi 
```

**但是请注意**，当要搜索的项目完全包含但不等于另一个项目时，这会遇到与许多其他答案相同的误报问题：

```
if grep -q 'green' <<< "${colors[@]}"
then
    echo 'should not match, but does'
fi 
```

如果这对您的用例来说是个问题，您可能无法绕过数组循环：

```
for color in "${colors[@]}"
do
    if [ "${color}" = 'green' ]
    then
        echo "should not match and won't"
        break
    fi
done

for color in "${colors[@]}"
do
    if [ "${color}" = 'light green' ]
    then
        echo 'match'
        break
    fi
done 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-26T02:52:47.220

就计算时间而言，这是另一种可能比迭代更快的方法。没有把握。这个想法是将数组转换为字符串，截断它，并获取新数组的大小。

例如，要查找“d”的索引：

```
arr=(a b c d)    
temp=`echo ${arr[@]}`
temp=( ${temp%%d*} )
index=${#temp[@]} 
```

你可以把它变成一个函数，比如：

```
get-index() {

    Item=$1
    Array="$2[@]"

    ArgArray=( ${!Array} )
    NewArray=( ${!Array%%${Item}*} )

    Index=${#NewArray[@]}

    [[ ${#ArgArray[@]} == ${#NewArray[@]} ]] && echo -1 || echo $Index

} 
```

然后你可以打电话：

```
get-index d arr 
```

它会回显 3，它可以分配为：

```
index=`get-index d arr` 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-13T19:13:11.987

FWIW，这是我使用的：

```
expr "${arr[*]}" : ".*\<$item\>" 
```

这适用于任何数组项或搜索目标中没有分隔符的情况。我不需要为我的应用程序解决一般情况。

# jquery - 为什么backbone.js视图中的标签将所有模型属性呈现到自身中

> ID：14366393
> 
> 赞同：3
> 
> 时间：2013-01-16T19:37:31.900
> 
> 标签：jquery, backbone.js, handlebars.js

我正在使用backbone.js，我试图了解我是否做错了什么，或者这是主干应该如何表现。

我正在构建一个表格，因为我有 2 个模板，第一个模板是`<thead>`与问题无关的所有容器和信息。

然后我将项目集合呈现为行。有了这个观点：

> ```
>  MYAPP.Menu.ItemView = Backbone.View.extend({
>     tagName: 'tr',      
>     template: template('menu-item'),
>     initialize : function(modelItem) {
>     this.model = modelItem;
>     this.model.on('all', this.render, this);
>     },
>     render : function() {
>         var html = this.template(this.model.toJSON());
>         this.$el.html(html);
>         return this;
>     }
> }); 
> ```

这是菜单项的模板：

> ```
>  <script type="text/x-mustache-template" id="menu-item-template">
>             <td>{{title}}</td>
>             <td>{{description}}</td>
>             <td>{{price}}</td>
>             <td>{{status}}</td>
>             <td></td>
>     </script> 
> ```

我在`<tbody>`标签内得到的输出是这样的：

> ```
>  <tr id="1" title="title1" price="price1">
>             <td>title1</td>
>             <td></td>
>             <td>price1</td>
>             <td></td>
>             <td></td>
>     </tr> 
> ```

等等。 **那么问题来了**

为什么所有数据都存储在`<tr>`标签内作为属性？我不想要那个。为什么会在那里？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T20:18:35.673

您很可能像这样初始化您的视图：

```
new MYAPP.Menu.ItemView(someModel); 
```

`options`这是不正确的，正确的方法是使用 key在对象中传递模型`model`：

```
new MYAPP.Menu.ItemView({model:someModel}); 
```

模型属性被设置为元素属性的事实只是命名中的一个不幸的巧合。在内部`Backbone.Model`将其值存储在名为 的属性中`attributes`。`Backbone.View`另一方面，接受`attributes`在 options 参数中调用的选项，并将其复制到`View.attributes`，然后将它们设置为根元素的属性。

有一些特殊属性会自动复制到视图中：`id`、`cssClass`、 和`el`，仅举几例。因为模型只是一个对象，所以调用相当于，这会导致您看到的奇怪效果。`model``collection``new View(model)``new View({id:id, attributes:attributes, ...})`

因此，查看您的构造函数代码，它应该如下所示：

```
initialize : function(options) {
   this.model = options.model;
   this.model.on('all', this.render, this);
} 
```

但是因为 Backbone 负责为您设置一些 View 的选项，包括`model`，所以严格来说，您甚至不需要设置`this.model`：

```
initialize : function(options) {
   this.model.on('all', this.render, this);
} 
```

# sql - 如何在单独的列中显示位置结构

> ID：14366399
> 
> 赞同：1
> 
> 时间：2013-01-16T19:37:52.327
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有下`Location`表

```
ID  Name       ParentID
-----------------------
1   TopLevel   NULL
2   Region 1   1
3   Fleet 1    2
4   Fleet 2    2 
```

我最近刚刚完成了一个递归 CTE 的编写，以分层方式显示这个结构：

```
TopLevel
-Region 1
--Fleet 1
--Fleet 2 
```

我现在需要编写一个查询以列层次格式返回此结构：

```
Level1     Level2   Level3  Level4  Level5  Level6
Top Level
Top Level  Region 1 Fleet 1
Top Level  REgion 1 Fleet 2 
```

一个位置的最大深度是 9。我将如何实现这一点？我试图使用递归 CTE 并以此为基础，但我认为这不会奏效。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:51:31.587

这是完成输出的一种方法，使用递归 CTE 硬编码来填充多达 9 级的层次结构（您需要根据需要将表/列引用更改为真实对象名称，并且您可能需要`varchar(50)`如果列的实际类型`name`比这更宽，则增加）：

```
with cte as (
  select id, 1 as level,
    name as level1,
    cast(null as varchar(50)) as level2,
    cast(null as varchar(50)) as level3,
    cast(null as varchar(50)) as level4,
    cast(null as varchar(50)) as level5,
    cast(null as varchar(50)) as level6,
    cast(null as varchar(50)) as level7,
    cast(null as varchar(50)) as level8,
    cast(null as varchar(50)) as level9
  from table1 t
  where parentid is null

  union all

  select t.id, cte.level + 1 as level,
    case when level = 0 then t.name else cte.level1 end as level1,
    case when level = 1 then t.name else cte.level2 end as level2,
    case when level = 2 then t.name else cte.level3 end as level3,
    case when level = 3 then t.name else cte.level4 end as level4,
    case when level = 4 then t.name else cte.level5 end as level5,
    case when level = 5 then t.name else cte.level6 end as level6,
    case when level = 6 then t.name else cte.level7 end as level7,
    case when level = 7 then t.name else cte.level8 end as level8,
    case when level = 8 then t.name else cte.level9 end as level9
  from table1 t
  inner join cte on cte.id = t.parentid
)
select * from cte; 
```

样本输出：

```
| ID | LEVEL |   LEVEL1 |   LEVEL2 |  LEVEL3 | LEVEL4 | LEVEL5 | LEVEL6 | LEVEL7 | LEVEL8 | LEVEL9 |
----------------------------------------------------------------------------------------------------
|  1 |     1 | TopLevel |   (null) |  (null) | (null) | (null) | (null) | (null) | (null) | (null) |
|  2 |     2 | TopLevel | Region 1 |  (null) | (null) | (null) | (null) | (null) | (null) | (null) |
|  3 |     3 | TopLevel | Region 1 | Fleet 1 | (null) | (null) | (null) | (null) | (null) | (null) |
|  4 |     3 | TopLevel | Region 1 | Fleet 2 | (null) | (null) | (null) | (null) | (null) | (null) | 
```

演示：[http ://www.sqlfiddle.com/#!6/0bd5d/14](http://www.sqlfiddle.com/#!6/0bd5d/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:53:51.400

我可以看到使用 9 个 UNION 语句，因此您可能会获得所需的输出，但它不会很漂亮。

这里有 3 个级别（您应该能够相应地添加）：

```
SELECT Name as Level1, '' as Level2, '' as Level3
FROM Location
WHERE ParentId IS NULL
UNION
SELECT L1.Name as Level1, L2.Name as Level2, '' as Level3
FROM Location L1
JOIN Location L2 
    ON L1.Id = L2.ParentId 
    AND L1.ParentId IS NULL
UNION
SELECT L1.Name as Level1, L2.Name as Level2, L3.Name as Level3
FROM Location L1
JOIN Location L2 
    ON L1.Id = L2.ParentId 
    AND L1.ParentId IS NULL
JOIN Location L3 
    ON L2.Id = L3.ParentId 
    AND L1.ParentId IS NULL 
```

依此类推，为每个后续级别添加更多表到联接。似乎可能有更好/更简单的方法，只是我能想到的唯一方法。

这是[小提琴](http://www.sqlfiddle.com/#!6/a33b1/1)。

# python - 使用 python 的 re 模块正确解析字符串文字

> ID：14366401
> 
> 赞同：4
> 
> 时间：2013-01-16T19:38:03.653
> 
> 标签：python, regex

我正在尝试为我用 Python 编写的 javascript 预处理器添加一些轻量级的降价支持。

大多数情况下它都在工作，但有时我使用的正则表达式有点奇怪，我认为它与原始字符串和转义序列有关。

正则表达式是：`(?<!\\)\"[^\"]+\"`

是的，我知道它只匹配以字符开头的`"`字符串。然而，这个项目是出于好奇而诞生的，所以我现在可以忍受它。

分解它：

```
(?<\\)\"    # The group should begin with a quotation mark that is not escaped
[^\"]+      # and match any number of at least one character that is not a quotation mark (this is the biggest problem, I know)
\"          # and end at the first quotation mark it finds 
```

话虽如此，我（显然）开始遇到这样的问题：

`"This is a string with an \"escaped quote\" inside it"`

我不太确定如何说“除了引号之外的所有内容，除非该标记被转义”。我试过：

```
([^\"]|\\\")+     # a group of anything but a quote or an escaped quote 
```

，但这会导致非常奇怪的结果。

我已经做好充分准备听到我将这一切都错了。为简单起见，假设此正则表达式将始终以双引号 ( `"`) 开头和结尾，以避免在混合中添加另一个元素。我真的很想了解我到目前为止所拥有的。

感谢您的任何帮助。

**编辑**

作为对正则表达式的测试，我正在尝试使用以下代码（使用下面的 unutbu 模式）在缩小的 jQuery 脚本中查找所有字符串文字：

```
STRLIT = r'''(?x)   # verbose mode
    (?<!\\)    # not preceded by a backslash
    "          # a literal double-quote
    .*?        # non-greedy 1-or-more characters
    (?<!\\)    # not preceded by a backslash
    "          # a literal double-quote
    ''' 
f = open("jquery.min.js","r")
jq = f.read()
f.close()
literals = re.findall(STRLIT,jq) 
```

下面的答案几乎解决了所有问题。确实出现的情况是在 jquery 自己的正则表达式中，这是一个非常边缘的情况。该解决方案不再将有效的 javascript 错误识别为降价链接，这才是真正的目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T20:08:56.990

我想我第一次看到这个想法是在... Jinja2 的源代码？后来移植到Mako身上。

```
r'''(\"\"\"|\'\'\'|\"|\')((?<!\\)\\\1|.)*?\1''' 
```

执行以下操作：

*   `(\"\"\"|\'\'\'|\"|\')`匹配 Python 的开头引号，因为这恰好取自用于解析 Python 的代码。您可能不需要所有这些报价类型。
*   `((?<!\\)\\\1|.)`匹配：一个匹配的引号，只被转义一次，或者任何其他字符。所以`\\"`仍然会被识别为字符串的结尾。
*   `*?`非贪婪地匹配尽可能多的那些。
*   而且`\1`只是结束语。

唉，`\\\"`仍然会被错误地检测为字符串的结尾。（模板引擎只使用它来检查是否有*字符串*，而不是提取它。）这是一个非常不适合正则表达式的问题；没有在 Perl 中做一些疯狂的事情，你可以在正则表达式中嵌入真正的代码，我不确定即使使用 PCRE 也是可能的。虽然我很想被证明是错误的。:) 杀手锏`(?<!...)`必须是*constant-length*，但您要检查在结束引号之前是否有*偶数个反斜杠。*

如果你想得到这个正确的，而不仅仅是大部分正确的，你可能必须使用一个真正的解析器。看看[parsley](http://pypi.python.org/pypi/Parsley)、[pyparsing](http://pyparsing.wikispaces.com/)或[任何这些工具](http://nedbatchelder.com/text/python-parsers.html)。

编辑：顺便说一句，没有必要检查*开头*引号之前没有反斜杠。这不是 JS（或 Python）中字符串之外的有效语法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T19:46:29.277

也许使用两个负面的看法：

```
import re

text = r'''"This is a string with an \"escaped quote\" inside it". While ""===r?+r:wt.test(r)?st.parseJSON(r)    :r}catch(o){}st.data(e,n,r)}else r=t}return r}function s(e){var t;for(t in e)if(("data" '''

for match in (re.findall(r'''(?x)   # verbose mode
    (?<!\\)    # not preceded by a backslash
    "          # a literal double-quote
    .*?        # 1-or-more characters
    (?<!\\)    # not preceded by a backslash
    "          # a literal double-quote
    ''', text)):
    print(match) 
```

产量

```
"This is a string with an \"escaped quote\" inside it"
""
"data" 
```

中的问号`.+?`使模式不贪婪。非贪婪导致模式在遇到第一个未转义的双引号时匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T03:58:50.660

使用python，正确的正则表达式匹配双引号字符串是：

**模式 = r'"(\.|[^"])*"'**

它描述了以 " 开头和结尾的字符串。对于两个双引号内的每个字符，它要么是转义字符，要么是任何字符期望 "。

unutbu 的 ansever 错误，因为对于有效字符串“\\\\”，该模式无法匹配。

# iphone - 如何使用“OR”和“AND”创建复合谓词

> ID：14366403
> 
> 赞同：2
> 
> 时间：2013-01-16T19:38:04.003
> 
> 标签：iphone, ios

我获取了以下 3 个类别，但想添加一个“AND”谓词来缩小“标记”所在的结果。

```
NSMutableArray *questionNumberArray=[[NSMutableArray alloc] init];

// Fetch questions
NSManagedObjectContext *context = self.document.managedObjectContext;
NSFetchRequest *fetchRequest =
[[NSFetchRequest alloc] initWithEntityName:@"Questions"];

//building the predicate with selected category
NSMutableArray *parr = [NSMutableArray array];

if ([cat0str length]){
    [parr addObject:[NSPredicate predicateWithFormat:@"question.category CONTAINS[c] %@",cat0str]];
}
if ([cat1str length]){
    [parr addObject:[NSPredicate predicateWithFormat:@"question.category CONTAINS[c] %@",cat1str]];
}
if ([cat2str length]){
    [parr addObject:[NSPredicate predicateWithFormat:@"question.category CONTAINS[c] %@",cat2str]];
}

NSPredicate *compoundPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:parr];

[fetchRequest setPredicate:compoundPredicate]; 
```

* * *

```
 NSPredicate *markPredicate =[NSPredicate predicateWithFormat:@"question.mark == 1"];
} 
```

//我想做这样的事情：

```
NSPredicate *finalPredicate = [compoundPredicate && markPredicate];

[fetchRequest setPredicate:finalPredicate]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:46:50.510

这是你想要的？

```
NSPredicate *finalPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:
         [NSArray arrayWithObjects:compoundPredicate, markPredicate, nil]]; 
```

或者，对容器文字使用“现代 Objective-C”语法：

```
NSPredicate *finalPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:
                                     @[compoundPredicate, markPredicate]]; 
```

# r - 确定 ghostscript 版本

> ID：14366406
> 
> 赞同：4
> 
> 时间：2013-01-16T19:38:11.310
> 
> 标签：r

我曾经写过一篇关于将 graphis 与外部程序结合起来的博客，并收到了一位读者（-单击此处-）关于完全在 R 中使用 ghostscript 实现这一点的精彩评论，[如下](http://trinkerrstuff.wordpress.com/2012/10/08/splitting-and-combining-r-pdf-visuals/#comment-133)所示。我最近一直在使用它，并想与他人分享。我想修改它以使功能更直观，检测 ghostscript 类型是我想做但做不到的一个 mod。unix 与 windows 很容易通过`.Platform`. 症结在于我挣扎的Windows 32 vs. 64。

如何使用 R 检测正在运行的 ghostscript 版本（gswin32c 或 gswin64c）？仅仅看计算机的规格是不够的，因为我在 Win 64 机器上运行 gswin32c。这个想法是完全删除 os 参数或将其设置为`NULL`并让函数尝试访问此信息。

```
mergePDF <- function(infiles, outfile, os = "UNIX") {
    version <- switch(os,
        UNIX = "gs",
        Win32 = "gswin32c",
        Win64 = "gswin64c")
    pre = " -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile="
    system(paste(paste(version, pre, outfile, sep = ""), infiles, collapse = " "))
}

pdf("file1.pdf", width = 10, height = 8)
plot(1:10, col="red", pch = 19)
dev.off()

pdf("file2.pdf", width = 16, height = 8)
plot(1:10)
dev.off()

mergePDF("file1.pdf file2.pdf", "mergefromR.pdf", "Win32") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:04:14.217

泰勒，伙计。我是否已经从 Stack Ove- ***R*** -flow同行降级为您博客的“读者”？或者那是一种促销活动；）

这对我来说有点骇人听闻，但应该可以完成工作。将此添加为函数的前几行并删除 os 参数：

```
testme <- c(UNIX = "gs -version", 
            Win32 = "gswin32c -version", 
            Win64 = "gswin64c -version")
os <- names(which(sapply(testme, system) == 0)) 
```

我使用了这个`-version`开关，这样 R 就不会尝试不必要地加载 Ghostscript。

在我的 Ubuntu 系统上，当我运行它`os`时，按预期返回 ，`UNIX`而在我安装了 32 位版本 Ghostscript 的 Windows 系统上，它返回`Win32`. 在运行 32 位 GS 的 64 位机器上试一试，然后告诉我它是如何工作的。

* * *

### 更新

在阅读 和 的帮助页面后`system()`，`system2()`我了解了`Sys.which()`，这似乎正是您正在寻找的。这是在我的 Ubuntu 系统上运行的：

```
Sys.which(c("gs", "gswin32c", "gswin64c"))
#            gs      gswin32c      gswin64c 
# "/usr/bin/gs"            ""            "" 
names(which(Sys.which(c("gs", "gswin32c", "gswin64c")) != ""))
# [1] "gs" 
```

`mergePDF()`因此，可以在函数中完全跳过操作系统规范：

```
mergePDF <- function(infiles, outfile) {
  gsversion <- names(which(Sys.which(c("gs", "gswin32c", "gswin64c")) != ""))
  pre = " -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile="
  system(paste(paste(gsversion, pre, outfile, sep = ""), infiles, collapse = " "))
} 
```

你可能想做一些错误检查。例如，如果 的长度`gsversion`> 1 或为 0，您可能希望停止该功能并提示用户安装 Ghostscript 或验证其 Ghostscript 版本。

# java - 如何获取 Android 中对象的内存大小或性能基准？

> ID：14366410
> 
> 赞同：12
> 
> 时间：2013-01-16T19:38:40.503
> 
> 标签：java, android, oop

长话短说，我想针对该类测试我的 android.os.Bundle 类的克隆实现，看看哪个更好。我已经知道我的版本可能会更糟，但我想知道*会*更糟。是否有任何适用于 Android 的基准测试工具可用于查看哪个对象在内存中更大和/或需要更多处理时间来存储/检索值？

TL;博士：

我查看了 android.os.Bundle 类的源代码，我不喜欢它如何存储和返回对象。它只是将它们存储在 a 中`HashMap<String, Object>`，然后使用 ClassLoader转换为所请求对象的类（如`getString()`或）。`getInt()`我觉得这或任何与此相关的类转换都违反了类型安全并在编程级别引入了歧义，这是静态类型旨在防止的，不是吗？

我想创建一个类似的数据容器类，它不会违反类型安全并且不会引入歧义。逻辑上简单但显然效率低下的方法是为我要存储的每个类都有一个 Map 。

我决定的是一个单一`HashMap<String, Integer>`的，其中包含我要存储的每个类的各种列表的键索引映射。例如，调用`getString(String key)`将从映射中获取与该键关联的整数索引（如果存在），然后尝试获取关联中该索引处的对象`ArrayList<String>`。

这里唯一的歧义是返回`null`（该类的列表中不存在索引）或正确类的错误对象（存在映射索引但使用该键存储的原始对象在另一个列表中） ，这确实是程序员的责任去检查。

此类对象只是临时容器，用于以标准化方式将数据从一个地方传送到另一个地方。他们不打算留下来。它们的使用方式也与 Bundle 不同，尽管我想要一个像这样的统一数据容器的部分原因是能够轻松地转换为 a `Bundle`、`JSONObject`、`ContentValues`or`Cursor`和返回。

或许真正的问题是：选角真的有那么糟糕吗，还是我会竭尽全力避免它？我想好的编程确实是在这两种情况下避免歧义的唯一方法。

更新：

看起来 Bundle 仅在从 Parcel 中解包时才使用 Classloader，但它会在每次 put() 调用时调用 unparcel()。检索时，它只是转换为方法返回的类型，在 try-catch 块中为`ClassCastException`. 这可能是最简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:53:05.753

> 是否有任何适用于 Android 的基准测试工具可用于查看哪个对象在内存中更大和/或需要更多处理时间来存储/检索值？

是的，Android 为开发者提供了很多很棒的工具，建议去了解它们。在这里你有一个好的开始的官方文档[链接](http://developer.android.com/tools/debugging/ddms.html)。

假设您在 Eclipse 中，切换到 DDMS 透视图。

现在，这些视图应该有助于您测量内存：

*   **分配跟踪器。**你可以看到哪些对象占用了多少内存。在运行期间，您必须按“开始跟踪”按钮，然后按“获取分配”按钮。
*   **堆。**您可以看到从堆中占用了多少内存。

**要分析您的应用程序，请使用Traceview**查看瓶颈等。为了方便地从 Eclipse 打开**线程**视图调用它，并在运行程序时单击带有红色圆圈的按钮，例如“记录按钮”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-04T15:42:10.987

如果可以使您的对象可序列化（通过实现可序列化接口）。然后运行以下代码。它检查您的对象占用了多少字节：

```
private byte[] getBytes(Object o) {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutput out = null;
    try {
        out = new ObjectOutputStream(bos);
        out.writeObject(o);
        return bos.toByteArray();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (out != null) {
                out.close();
            }
        } catch (IOException ex) {
            // ignore close exception
        }
        try {
            bos.close();
        } catch (IOException ex) {
            // ignore close exception
        }
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T19:48:21.070

> 是否有任何适用于 Android 的基准测试工具，我可以使用它来查看哪个对象在内存中更大

垫。

> 和/或需要更多处理时间来存储/检索值？

跟踪视图。

> 我觉得这或任何与此相关的类转换都违反了类型安全并在编程级别引入了歧义，这是静态类型旨在防止的，不是吗？

静态类型就像调味料。多少是正确的取决于品尝者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T19:52:58.140

我也会推荐 MAT（内存分析工具），但有一些警告。知道图像之类的东西在某些版本中不存储在堆内存中，例如，在蜂窝之前，图像存储在本机内存中。因此，检查内存可能不是一直都很准确，但我会在你的情况下推荐它。

# ruby-on-rails - Rails form_for 嵌套资源重定向错误

> ID：14366412
> 
> 赞同：0
> 
> 时间：2013-01-16T19:38:41.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-resources

我有`Package` `belongs_to` `Shop`。在我的应用程序中，用户可以为他们的商店创建包。我已经让“创建包”工作，但如果我尝试保存而不输入任何内容，重定向似乎会出错。

```
# package.rb
belongs_to :shop
validates_presence_of :name, :price, :description

# controller
def new
  @shop = current_user.shop
  @package = Package.new
end

def create
  @package = current_user.shop.packages.build(params[:package])
  @package.currency = current_user.shop.currency
  if @package.save
    flash[:success] = 'Package added.'
    redirect_to shop_path(current_user.shop)
  else
    render 'new'
  end
end

# routes.rb
resources :shops, except: [:destroy] do
  resources :packages
end

# new.html.erb
<%= form_for [@shop, @package] do |f| %> 
```

这是错误：

```
NoMethodError in Packages#create
undefined method `packages_path' for #<#<Class:0x007fab67191580>:0x007fab634ad7b8>

Extracted source (around line #6):
5:
6:   <%= form_for [@shop, @package] do |f| %> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:42:03.223

这将是因为@shop 为零。路径是多态的，这意味着它将从两个数组值生成路径的方法。如果第一个是nil，它会认为它只是一个包路径。

`form_for [@package.shop, @package]`会修复它。或者，在路由中，您可以在顶层公开路由以处理创建。

```
resources :packages, :only => :create 
```

我会选择第一个选择，因此如果出现错误，该 url 看起来与“新”大致相同。

# javascript - 如何重新投影图层（使用 GeoServer 和 OpenLayers）以覆盖在谷歌地图上

> ID：14366417
> 
> 赞同：4
> 
> 时间：2013-01-16T19:39:00.603
> 
> 标签：javascript, openlayers, reprojection-error

我正在使用 OpenLayers 编写代码。在这段代码中，我想以不同的缩放级别显示不同的图层。直到这里，一切正常。当我尝试将谷歌地图添加为基础层时，我的问题就开始了。我的图层的投影系统与 Google 图层不一致，因此应重新投影。我尝试使用 Proj4js.transform 方法，但没有成功。我的图层位于 EPSG:3006（瑞典），而 Google 图层位于 EPSG:900913。以下代码导致投影层向右移动。这意味着重新投影没有正常工作。请让我知道我的代码有什么问题。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>OpenLayers map preview</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <!-- Import OL CSS, auto import does not work with our minified OL.js build -->
    <link rel="stylesheet" type="text/css" href="http://gisl.nateko.lu.se:8088/geoserver/openlayers/theme/default/style.css">
    <!-- add here more css definition libraries-->

         <!-- Basic CSS definitions -->
    <style type="text/css">
        body {
            font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
            font-size: small;
        }
        /* Toolbar styles */
        #toolbar {
            position: relative;
            padding-bottom: 0.5em;
            display: none;
        }
        /* The map and the location bar */
        #map {
            clear: both;
            position: relative;
            width: 337px;
            height: 512px;
            border: 2px solid black;
        }            
        #wrapper {
            width: 337px;
            height: 50px;                           
        }            
        #location {
            float: right;
            font-family: Arial, Verdana, sans-serif; 
            font-size: 12px; 
            color: #483D8B;
            background-color: white;
        }            
        #scale {
            float:left;
            font-family: Arial, Verdana, sans-serif; 
            font-size: 12px; 
            color: #483D8B;
            background-color: white;
        }
        #nodelist{
            font-family: Arial, Verdana, sans-serif; 
            font-size: 14px; 
            color: #000000;
            font-style: normal;
            background-color: white;
        }
    </style>
    <!-- Import OpenLayers, reduced, wms read only version -->
    <script type="text/javascript" src="http://www.openlayers.org/api/OpenLayers.js"></script>      
    <!-- add here more js libraries -->

    <script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
    <script src ='proj4js/lib/proj4js-combined.js'></script>
    <script src ='proj4js/lib/deprecated.js'></script>

    <script defer="defer" type="text/javascript">
        var map;
        var untiled;
        var tiled;
        var pureCoverage = false;
        // pink tile avoidance
        OpenLayers.IMAGE_RELOAD_ATTEMPTS = 5;

        // make OL compute scale according to WMS spec
        OpenLayers.DOTS_PER_INCH = 25.4 / 0.28;

        function init(){

            format = 'image/png';

            var options = {
                controls: [],
                projection: new OpenLayers.Projection('EPSG:900916'),
                displayProjection: new OpenLayers.Projection('EPSG:4326'),
                maxExtent: new OpenLayers.Bounds(           
                -20037508, -20037508,20037508, 20037508.34),
                //modify parameter
                maxResolution: 5000,
                //modify parameter
                //setting zoom levels
                numZoomLevels:15,
                units: 'm',

            };
            map = new OpenLayers.Map('map', options);
            // setup tiled layer

                var gphy = new OpenLayers.Layer.Google(
                "Google Physical",
                {type: google.maps.MapTypeId.TERRAIN, numZoomLevels: 15, sphericalMercator:true}
                // used to be {type: G_PHYSICAL_MAP}
                );
                var gmap = new OpenLayers.Layer.Google(
                    "Google Streets", // the default
                    {numZoomLevels: 15, sphericalMercator:true}
                    // default type, no change needed here
                );
                var ghyb = new OpenLayers.Layer.Google(
                    "Google Hybrid",
                    {type: google.maps.MapTypeId.HYBRID, numZoomLevels: 15, sphericalMercator:true}
                    // used to be {type: G_HYBRID_MAP, numZoomLevels: 20}
                );
                var gsat = new OpenLayers.Layer.Google(
                    "Google Satellite",
                    {type: google.maps.MapTypeId.SATELLITE, 
                    numZoomLevels: 15, 
                    sphericalMercator:true

                    }
                    // used to be {type: G_SATELLITE_MAP, numZoomLevels: 22}
                );

            //add controls here
                map.addControl(new OpenLayers.Control.LayerSwitcher());
                map.addControl(new OpenLayers.Control.LayerSwitcher());
                map.addControl(new OpenLayers.Control.PanZoomBar());
                zf= new OpenLayers.Control.ZoomToMaxExtent({title:"Zoom to max extent"});
                // create a panel to locate the zoom extent button & add the panel to the map
                // use the code to create the button from ZoomToMaxExtent.js
                var panel= new OpenLayers.Control.Panel({defaultControl:zf});       
                panel.addControls([zf]);
                map.addControl(panel);
                map.addControl(new OpenLayers.Control.Navigation());
                map.addControl(new OpenLayers.Control.Scale($('scale')));
            //end add controls

            layer2 = new OpenLayers.Layer.WMS( 
                "Gr2LundKom:districts","http://gisl.nateko.lu.se:8080/geoserver/wms", 
                {
                    projection: map.displayProjection,
                    height: '600',
                    width: '800',
                    layers: 'Gr2LundKom:districts',
                    styles: '',
                    srs:'EPSG:3006',
                    format: format,
                    tiled: 'true',
                    transparent: 'true',

                }, 
                {
                    buffer: 0,
                    displayOutsideMaxExtent: true,
                    isBaseLayer: false,
                    reproject: true
                });
                Proj4js.defs["EPSG:3006"] = "+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs";
                Proj4js.defs["EPSG:4326"] = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs";
                var src = new OpenLayers.Projection('EPSG:3006');
                var dst =  new OpenLayers.Projection('EPSG:4326');
                Proj4js.transform(src, dst, layer2); 
                layer2.projection=dst;                  

            layer3 = new OpenLayers.Layer.WMS( 
                "Gr2LundKom:public_buildings,other_buildings,roads_all,Public_Libraries",
                "http://gisl.nateko.lu.se:8080/geoserver/wms",
                {
                    projection: map.displayProjection,
                    height: '600',
                    width: '800',
                    layers: "Gr2LundKom:public_buildings,other_buildings,roads_all,Public_Libraries",
                    transparent: "true", 
                    styles: '',
                    srs:'EPSG:3006',
                    format: format,
                    tiled: 'true',
                    transparent: 'true'
                }, 
                {
                    buffer: 0,
                    displayOutsideMaxExtent: true,
                    isBaseLayer: false,
                    reproject: true                     
                });
                Proj4js.transform(src, dst, layer3);
                layer3.projection=dst;                  

            map.addLayers([gsat,gphy,gmap,ghyb,layer2]);
            //map.setCenter(new OpenLayers.LonLat(1335967.698, 6179172.362), 22);
            map.zoomToExtent(new OpenLayers.Bounds(         
                -20037508, -20037508,20037508, 20037508.34));

            // change the dislapy layers with the chandge of scale
            map.events.register('zoomend', this, function (event) {
            var zLevel = map.getZoom();     
                if( zLevel == 1 || zLevel == 2 || zLevel == 3  )
                {
                    layer3.setVisibility(false);
                    layer2.setVisibility(true);
                }
                if( zLevel == 4 || zLevel == 5 || zLevel == 6)
                {
                    layer2.setVisibility(false);
                    layer3.setVisibility(true);
                    map.addLayers([gsat,gphy,gmap,ghyb,layer3]);
                }

                });

        }

    </script>
    </head>     
<body onload="init()">
    Map viewer using Geoserver and MapLayers
    <br><br>

        <div id="map">
        </div>
        <br>
        <div id="wrapper">
            <div id="location">location</div>
            <br>
            <div id="scale">
            </div>
        </div>

        <br>
        <div id="nodelist" >
            --> Click on the map to get feature info
        </div>
 </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:19:35.343

好吧，我知道这是一种解决方法，但是我看到您使用 geoserver，因此您可以将 geoserver 中的图层转换为 google mercator（您应该使用代码 EPSG:3857，因为我记得 EPSG:900916 对我不起作用） . 我也在这个问题上苦苦挣扎，这是唯一对我有帮助的事情。然而，这个问题只有在你使用 wms、wfs 层时才会出现，你可以轻松地进行转换。

而且我认为你不应该尝试在 EPSG:4326 中可视化所有内容，而是在 google mercator 中可视化。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T18:01:40.530

我想你这里有一个错字，应该是 EPSG:900913 而不是 EPSG:900916，因为它是用数字表示的 google (900913)

# winapi - 具有重叠同级和 WM_EX_TRANSPARENT 的不正确绘图

> ID：14366418
> 
> 赞同：0
> 
> 时间：2013-01-16T19:39:06.343
> 
> 标签：winapi, drawing

我有一个问题，当一个窗口在另一个具有 WS_EX_TRANSPARENT 样式的窗口下方更新时，重叠的子窗口没有正确绘制。

父窗口有两个子窗口，W1 和 W2，它们与 W1 在 z 顺序中高于 W2 重叠。W1 具有扩展样式 WS_EX_TRANSPARENT。问题是，当 W2 在其客户区域中绘制时（我正在通过使 W2 无效来测试），W2 完全绘制在 W1 的重叠部分上。如果重绘父级，则两个重叠的子级都以正确的顺序绘制。

当在 W2 上设置 WS_CLIPSIBLINGS 并且从 W1 中删除 WS_EX_TRANSPARENT 时，子窗口被正确绘制。如果 W2 的客户区在这种情况下无效，它会绘制但不会覆盖被 W1 遮挡的部分。

WS_EX_TRANSPARENT 被使用是因为第一个子窗口被用作第二个子窗口的覆盖，我想避免鼠标点击被覆盖阻止。

有没有办法使用 WS_EX_TRANSPARENT 样式正确绘制重叠窗口，或者我可以使用某种解决方法获得相同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:37:55.253

WS_EX_TRANSPARENT 不稳定。[知识库文章](http://support.microsoft.com/kb/92526)有一个逃避，“我们实际上并不支持透明窗口”。但是没有解释操作，SDK也没有，[Raymond Chen](http://blogs.msdn.com/b/oldnewthing/archive/2012/12/17/10378525.aspx)也没有。我被咬过太多次，所以不要再使用它了。

但我*认为*规则是，当上层窗口需要绘制以确保设置背景像素时，它会先让覆盖的窗口绘制。因此，使 W1 无效也会使 W2 无效，然后正常的 Z 顺序绘制会处理这些事情。忽略不可避免的闪烁问题。但不是相反，使覆盖的窗口无效不会强制重新绘制上面的窗口。在你的情况下有点挂断。

不管我的猜测如何，在您的情况下应该有效的解决方法是在您使 W2 无效时也使 W1 无效。或者当 W1 与 W2 完全重叠时使 W1 无效。希望有效，祝你好运。

# scala - 为什么 Array.fill 采用隐式 scala.reflect.ClassManifest？

> ID：14366419
> 
> 赞同：1
> 
> 时间：2013-01-16T19:39:14.703
> 
> 标签：scala, reflection

所以我正在尝试用 Scala编写一个[战斗代码播放器。](http://www.battlecode.org/contestants/releases/)在战斗代码中，某些类是不允许的，如果您尝试访问它们，则会出现运行时异常。当我使用[Array.fill](http://www.scala-lang.org/api/current/index.html#scala.Array%24)函数时，我从战斗代码服务器收到一条消息，说`[java] Illegal class: scala/reflect/Manifest$`. 这是违规行：

```
val g_score = Array.fill[Int](rc.getMapWidth(), rc.getMapHeight())(0) 
```

`ClassManifest`该方法采用具有以下文档的隐式参数：

```
A ClassManifest[T] is an opaque descriptor for type T. It is used by the compiler
to preserve information necessary for instantiating Arrays in those cases where
the element type is unknown at compile time. 
```

但我在编译时确实知道数组元素的类型，如上所示，我明确声明它们将是`Int`. 有没有办法避免这种情况？要解决方法，我编写了自己的`Array.fill`. 这似乎是一个黑客。顺便说一句，Scala 有真正的二维数组吗？ `Array.fill`似乎返回一个`Array[Array[T]]`这是我发现自己写的唯一方法。这似乎也不优雅。

编辑：使用 Scala 2.9.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:58:09.637

有关背景信息，请参阅此相关问题：[什么是 Scala 中的清单以及何时需要它？](https://stackoverflow.com/questions/3213510/what-is-a-manifest-in-scala-and-when-do-you-need-it). 在这个答案中，您将找到一个解释，为什么数组需要清单。

简而言之：尽管 JVM 使用类型擦除，但数组是一个例外，需要一个清单。由于您可以编译代码，因此找到了该清单（清单始终可用于正确的类型）。您的错误发生在运行时。

我不知道 Battlecode 服务器的详细信息，但有两种可能性：要么您正在使用二进制**不兼容**的 Scala 版本运行编译的类（主要版本不同，例如使用 Scala 2.9 编译，而服务器使用 2.10）。或者服务器在其类路径中甚至没有**scala-library.jar 。**

正如评论中所说，清单在 Scala 2.10 中已弃用，并由`ClassTag`.

* * *

**编辑**：所以似乎类加载器人为地限制了允许的类。我的建议是：添加一个辅助 Java 类。您可以轻松混合 Java 和 Scala 代码。如果只是关于`Int`-`Array`实例化，您可以提供如下内容：

```
public static class Helper {
    public static int[][] makeArray(int d1, int d2) { return new int[d1][d2](); }
} 
```

（希望这是有效的java代码，有点生疏）

另外，您是否尝试过使用 来创建外部数组`new Array[Array[Int]](d1)`，然后迭代以创建内部数组？

# javascript - 如何使用现有的 JavaScript 显示/隐藏文本区域？

> ID：14366420
> 
> 赞同：-4
> 
> 时间：2013-01-16T19:39:15.343
> 
> 标签：javascript, jquery, html

在我的 HTML 中使用现有 JavaScript 时遇到了挑战。我的 HTML 是两个单选按钮和元素“textarea”。When one radiobutton is selected (button: No) the textarea has to be shown and when the other (button: Yes) is selected it has to be hidden.

```
<span><input type="radio" name="feedback" id="Yes" value="Yes"><label for="Yes">Yes</label></span>
<span><input type="radio" name="feedback" id="No" value="No"><label for="No">No</label></span>

<div class="">
  <h5>lorem ipsum da lore</h5>
  <textarea>Lorem ipsum da lore</textarea>
</div> 
```

我必须使用以下 JavaScript 来实现预期的效果。我对 JavaScript 还很陌生，所以我希望有人能解释下 JavaScript 代码的最佳方法是什么：

```
 $("input.kpn-bh-hideShow").change(function(){
    var id1 = $(this).attr('class').split(' ')[1];
    var id2 = $(this).attr('class').split(' ')[2];

    if(id1 && id2){
        $('#' + id1)
            .hide()
            .find('input, select')
            .attr("disabled","disabled");

        $('#' + id2)
            .show()
            .find('input, select')
            .filter(":visible")
            .removeAttr("disabled");
    }else{
        $('#' + id1)
            .hide()
            .find('input, select')
            .attr("disabled","disabled");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:22:27.803

```
 **check out this code for this ** 
    <form name="f">
     <input type="radio" id="a" name="a"/>
     <input type="radio" id="b" name="a" />
     <textarea>here is a textarea</textarea>

    </form>
<script type="text/javascript">
//A link for the jquery library must be added here
$("#a").onclick(function (){
$("textarea").css("display","none");

});
$("#b").onclick(function (){
$("textarea").css("display","block");
});
</script> 
```

# java - 捆绑包 XYZ 无法解析。原因：缺少约束：Import-Package：ABC；无头 RCP 独立版本中的 version="1.0.0" 错误

> ID：14366421
> 
> 赞同：13
> 
> 时间：2013-01-16T19:39:30.023
> 
> 标签：java, eclipse, eclipse-rcp, headless-rcp

我正在研究[独立的无头 RCP](http://www.developertesting.com/archives/month200508/20050823-HeadlessHelloWorldInEclipse.html)。当我在 Eclipse IDE 中执行应用程序和产品时，它可以正常工作，但是当我导出并执行它时，我在日志文件中得到了这个错误。

![在此处输入图像描述](../Images/cc2f63aa5ac9eac571bfb614757a7ffd.png)

```
!ENTRY org.eclipse.equinox.ds 4 0 2013-01-16 13:27:59.132
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: The bundle "org.eclipse.equinox.ds_1.4.0.v20120522-1841 [3]" could not be resolved. Reason: Missing Constraint: Import-Package: org.eclipse.equinox.internal.util.event; version="1.0.0"
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1332)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1316)
...

!ENTRY org.eclipse.equinox.ds 4 0 2013-01-16 13:28:00.901
!MESSAGE [SCR] Exception while activating instance org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngineManager@6b8d6157 of component org.eclipse.e4.ui.css.swt.theme  
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442) 
```

参考[这篇文章](http://www.eclipsezone.com/eclipse/forums/t99010.html)，我了解到我有一个更新版本的插件，没有它的依赖项，并且运行时路径有问题。但是，我不确定究竟是什么导致了这个错误。

可能有什么问题？为什么只有当我作为独立执行它时才会出现此错误？

## 添加

我有 build.properties 文件

```
output.. = bin/
bin.includes = META-INF/,\
               plugin.xml,\
               .
source.. = src/ 
```

这是 MANIFEST.MF 文件

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Refactorer
Bundle-SymbolicName: edu.utexas.seal.refactorer;singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: edu.utexas.seal.refactorer.Activator
Bundle-Vendor: PROSSEEK
Bundle-RequiredExecutionEnvironment: J2SE-1.5
Bundle-ActivationPolicy: lazy
Require-Bundle: org.eclipse.core.runtime;bundle-version="3.8.0",
 org.eclipse.jdt;bundle-version="3.8.0",
 org.eclipse.jdt.core;bundle-version="3.8.2",
 org.eclipse.core.resources;bundle-version="3.8.1",
 org.eclipse.text;bundle-version="3.5.200",
 org.eclipse.jdt.ui;bundle-version="3.8.1",
 org.eclipse.jdt.core.manipulation;bundle-version="1.5.0",
 org.eclipse.ltk.ui.refactoring;bundle-version="3.7.0",
 org.eclipse.jdt.core.manipulation;bundle-version="1.5.0",
 org.eclipse.ltk.core.refactoring;bundle-version="3.6.0",
 org.eclipse.jface.text;bundle-version="3.8.1",
 org.eclipse.core.expressions;bundle-version="3.4.401",
 org.eclipse.core.externaltools;bundle-version="1.0.100",
 org.eclipse.jface;bundle-version="3.8.101",
 edu.utexas.seal.utilities;bundle-version="1.0.0",
 org.eclipse.core.filebuffers;bundle-version="3.5.200"
Bundle-ClassPath: .
Export-Package: edu.utexas.seal.refactorer 
```

我只有一项：“。” 在捆绑类路径中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T21:16:34.680

## 缺少 org.eclipse.equinox.util

我首先重新编译了项目，然后从日志文件中的投诉中检查了我是否拥有所有必需的插件，然后我发现我缺少`org.eclipse.equinox.util`，我想它应该是自动包含的。包含之后，一些错误就消失了，我发现我还有两个错误。

![在此处输入图像描述](../Images/f54674f847b9cfe2b1c258c3ad3da39f.png)

## 执行环境问题

我将“执行环境”设置为 JavaSE-1.5，这是一个问题，因为 Java 无法识别 @Override 导致“必须覆盖超类方法”错误。

![在此处输入图像描述](../Images/80258ccc574efdd2d21dbff60c6bb0aa.png) ![在此处输入图像描述](../Images/5e1d206c9fc1c8f3de723793f0d2d07b.png)

我从这个网站得到了提示。

[将项目导入 Eclipse 后出现“必须覆盖超类方法”错误](https://stackoverflow.com/questions/1678122/must-override-a-superclass-method-errors-after-importing-a-project-into-eclips)

## 运行时级别

我还不得不更改`/ECLIPSE/configuration/config.ini`文件。

```
osgi.bundles=org.eclipse.equinox.common@2:start,org.eclipse.update.configurator@3:
start,org.eclipse.equinox.ds@3 <-- (From 2 to 3) 
:start,org.eclipse.core.runtime@start 
```

我不知道它是否是eclipse错误，我从[这个网站](http://www.eclipse.org/forums/index.php/m/517868/)得到了提示。

## 我发现一些有用的提示

*   `-consoleLog`真的很有用，因为我不必一直打开日志文件。
*   [这篇文章](http://www.eclipsezone.com/eclipse/forums/t99010.html)给了我一些解决问题的方向。
*   我想一旦 eclipse RCP 作为产品在 eclipse IDE 上运行，我们应该可以使用独立的 RCP。如果不是，那么问题应该是在 IDE 和独立版本之间产生差异的配置问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T10:44:17.137

也可以通过额外的依赖配置将丢失的包直接添加到失败的包中：

```
<plugin>
<groupId>org.eclipse.tycho</groupId>
<artifactId>target-platform-configuration</artifactId>
<version>${tycho.version}</version>
<configuration>
  <dependency-resolution>
   <extraRequirements>
    <requirement>
     <type>eclipse-plugin</type>
     <id>org.eclipse.jface.text</id>
     <versionRange>0.0.0</versionRange>
   </requirement>
  </extraRequirements>
 </dependency-resolution>
</configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T12:13:00.923

您需要将其添加到您的 feature.xml 文件中。添加相同内容后，清理项目并尝试重新构建。我相信这将解决这个问题。

# javascript - 无法使用 jQuery 获取或设置 div 的 css

> ID：14366423
> 
> 赞同：0
> 
> 时间：2013-01-16T19:39:47.823
> 
> 标签：javascript, jquery, html, css, dom

我有以下 html 对象

```
<div class="dataTables_filter" id="DataTables_Table_2_filter"><label>Sök: <input type="text" aria-controls="DataTables_Table_2"></label></div> 
```

现在我想以交互方式操作这个 css 以按照我想要的方式定位它。

当我尝试

```
$('#DataTables_Table_2_filter').css({"float":"left"}) 
```

什么也没有发生，当我试图提醒它当前的 css 时

```
alert( $('#DataTables_Table_2_filter').css('float') ); 
```

我只是在我的警报框中得到“未定义”。

如果我做

```
alert( $('#DataTables_Table_2_filter') 
```

我在警报框中收到“对象对象”。

这怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:43:58.903

您可能在准备好之前访问元素，请使用[document.ready()](http://api.jquery.com/ready/)，因为您的代码 id 有效

**[现场演示](http://jsfiddle.net/rajaadil/dsrnP/)**

```
<div class="dataTables_filter" id="DataTables_Table_2_filter"><label>Sök: <input type="text" aria-controls="DataTables_Table_2"></label></div>

$(document.ready(function(){
   $('#DataTables_Table_2_filter').css({"float":"left"});
   alert( $('#DataTables_Table_2_filter').css('float') );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:47:08.353

尝试这个

```
$('#DataTables_Table_2_filter').on('click', function(){
  alert( $('#DataTables_Table_2_filter').css('float') );
}); 
```

一个看到这个[例子](http://jsfiddle.net/qKdQW/)

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:48:25.653

可能是你在这个代码块之外有一些冲突的 ID 问题，因为它[在这个演示中工作正常](http://jsfiddle.net/yjPYv/)

html:

```
<div class="dataTables_filter" id="DataTables_Table_2_filter">
      <label>Sök: <input type="text" aria-controls="DataTables_Table_2"/></label>
</div> 
```

jQuery：

```
$('#DataTables_Table_2_filter').css({"float":"left"});
alert( $('#DataTables_Table_2_filter').css('float') ); 
```

# php - 强制下载 mp4 文件

> ID：14366424
> 
> 赞同：2
> 
> 时间：2013-01-16T19:39:51.053
> 
> 标签：php, youtube, file-get-contents, readfile

我想强制用户下载 youtube 视频。例如[这个](http://goo.gl/zNUlV)网址。我下载了视频，我可以播放原始视频，但即使视频的长度/大小相同，我在 force_downloaded 时也无法播放。

```
function force_download($file,$video_url)
{

  $video_data = file_get_contents($video_url);
  file_put_contents($file, $video_data);

  if(isset($file) && file_exists($file))
  {
    header('Content-length: ' .  filesize($file));
    header('Content-type: application/octet-stream');
    header('Content-Disposition: attachment; filename= "' . $file . '"');

    readfile($file);
  }
}

force_download('youtube.mp4',$video_url); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T19:42:20.510

如果你可以使用htaccess ...

```
<FilesMatch "\.(mp4|MP4)">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

我也使用它来强制下载 PDF。效果很好！

这是另一个关于使用 PHP 强制下载的堆栈问题...与我上面写的 htaccess 基本相同。将内容处置设置为附件是关键。

[如何使用 PHP 强制文件下载](https://stackoverflow.com/questions/7263923/how-to-force-file-download-with-php)

编辑： hrmm ......但是你已经做了类似的事情，但它不起作用......看看你是否可以让 htaccess 与你正在尝试做的事情一起工作我猜。

# silverlight - 在 Visual Studio 2010/2012 中找不到画笔

> ID：14366427
> 
> 赞同：0
> 
> 时间：2013-01-16T19:39:53.160
> 
> 标签：silverlight, drawingbrush

我必须首先提到我以前从未使用过silverlight。我目前正在开始一个项目，我需要使用 DrawingBrush ...解决 我在 Visual Studio 2012 中开发的[这个任务，有时在 2010 年，项目是 Silverlight5 这是我需要 DrawingBrush 的上下文](https://stackoverflow.com/questions/14324355/reveal-a-picture-covered-with-a-solid-color)

```
<Image Source="Images/image.png">
            <Image.OpacityMask>
                <DrawingBrush>
                    ...
                </DrawingBrush>
            </Image.OpacityMask>
 </Image> 
```

问题是我找不到使用 DrawingBrush ......它没有找到它的参考。Intellisense 说：“命名空间‘System.Windows.Media’中不存在类型或命名空间名称‘DrawingBrush’（您是否缺少程序集引用？）”

我是否必须包含某些内容或添加对我的项目的特定引用才能使用 DrawingBrush？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:17:34.027

我建议你以不同的方式来做。

将此图像转换为WriteableBitmap（像素信息）作为WB1。将另一个 WriteableBitmap 作为具有黑色像素的相同大小字段的 WB2。

将 WB2 渲染为图像。现在，只要需要，您就可以将特定像素从 WB1 复制到 WB2 并显示修改后的 WB2。

以下项目/示例代码将帮助您学习使用 WritableBitmap。您只需要从这个项目中学习以下内容。

1.  如何从图像中读取像素信息。
2.  如何修改这些像素信息
3.  以及如何将修改后的像素信息显示为图像

示例代码：[http ://code.msdn.microsoft.com/CSSL3WriteableBitmap-960deef6](http://code.msdn.microsoft.com/CSSL3WriteableBitmap-960deef6)

这个项目支持 Silverlight 3。所以它肯定会在 Silverlight 5 中得到支持。

希望这可以帮助！

# elasticsearch - 无法使用动态模板映射在 couchdb 上创建弹性搜索河

> ID：14366429
> 
> 赞同：0
> 
> 时间：2013-01-16T19:39:56.013
> 
> 标签：elasticsearch

当我尝试使用动态模板来指定映射以便将对象以外的所有内容都视为字符串时，河流会失败。

示例 - 我尝试首先为我的数据库清除所有以前的索引和河流 - tempTest。

```
curl -XDELETE 'localhost:9200/_river/tempTest/'

curl -XDELETE 'localhost:9200/tempTest/'

curl -XPUT localhost:9200/tempTest -d '{
    "mappings": {
        "tempTest": {
            "dynamic_templates" : [
                {
                    "template_obj" : {
                        "match" : "*",
                        "match_mapping_type" : "object",
                        "mapping" : {
                            "type" : "object"
                        }
                    }
                },
                {
                    "template_str" : {
                        "match" : "*",
                        "mapping" : {
                            "type" : "string"
                        }
                    }
                }            
            ]
        }
    }
}'

curl -XPUT 'localhost:9200/_river/tempTest/_meta' -d '{
    "type" : "tempTest",
        "couchdb" : {
            "host" : "localhost",
            "port" : 5984,
            "db" : "tempTest",
            "filter" : null
            },
        "index" : {
            "index" : "tempTest",
            "type" : "tempTest",
            "bulk_size" : "100",
            "bulk_timeout" : "10ms"
            }
}' 
```

执行此操作后，我在 elasticsearch 错误日志中收到以下错误日志。

```
[2013-01-16 13:52:33,500][WARN ][river                    ] [Starsmore, Jonothon] failed to create river [tempTest][tempTest]
org.elasticsearch.common.settings.NoClassSettingsException: Failed to load class with value [tempTest]
    at org.elasticsearch.river.RiverModule.loadTypeModule(RiverModule.java:86)
    at org.elasticsearch.river.RiverModule.spawnModules(RiverModule.java:57)
    at org.elasticsearch.common.inject.ModulesBuilder.add(ModulesBuilder.java:44)
    at org.elasticsearch.river.RiversService.createRiver(RiversService.java:135)
    at org.elasticsearch.river.RiversService$ApplyRivers$2.onResponse(RiversService.java:270)
    at org.elasticsearch.river.RiversService$ApplyRivers$2.onResponse(RiversService.java:264)
    at org.elasticsearch.action.support.TransportAction$ThreadedActionListener$1.run(TransportAction.java:86)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.ClassNotFoundException: pirates
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at org.elasticsearch.river.RiverModule.loadTypeModule(RiverModule.java:72)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:45:49.183

河流类型必须是`couchdb`. 试试这个：

```
curl -XPUT 'localhost:9200/_river/tempTest/_meta' -d '{
    "type": "couchdb",
    "couchdb": {
        "host": "localhost",
        "port": 5984,
        "db": "tempTest",
        "filter": null
    },
    "index": {
        "index": "tempTest",
        "type": "tempTest",
        "bulk_size": "100",
        "bulk_timeout": "10ms"
    }
}
' 
```

# ios - 来自 NSArray 的 NSString

> ID：14366431
> 
> 赞同：5
> 
> 时间：2013-01-16T19:40:04.250
> 
> 标签：ios, objective-c, xcode, nsstring, nsarray

我正在尝试从 Array 创建一个字符串。但是，它应该如何生成是有条件的，如下所述。

```
NSArray *array=[NSArray arrayWithObjects:@"Hello",@"World",nil];
[array componentsJoinedByString:@","]; 
```

这将输出：Hello,World。

但是，如果第一个项目是空的，那么有没有办法接收唯一的第二个。

1.  你好，@"" => 你好
2.  @"" , 世界 => 世界
3.  你好，世界 => 你好，世界

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T20:00:12.963

另一种方法是获取数组的可变副本并删除无效对象。可能是这样的：

```
NSMutableArray *array = [[NSArray arrayWithObjects:@"",@"World",nil] mutableCopy];
[array removeObject:@""]; // Remove empty strings
[array removeObject:[NSNull null]]; // Or nulls maybe

NSLog(@"%@", [array componentsJoinedByString:@","]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:45:03.740

您不能将`nil`值存储在`NSArray`^*中，因此答案是“否”。您需要自己迭代数组，跟踪是否需要添加逗号。

```
NSMutableString *res = [NSMutableString string];
BOOL first = YES;
for(id item in array) {
    if (id == [NSNull null]) continue;
    // You can optionally check for item to be an empty string here
    if (!first) {
        [res appendString:@", "];
    } else {
        first = NO;
    }
    [res appendFormat:@"%@", item];
} 
```

* * *

^* `nil` NS 集合中的值用`NSNull`对象表示。

# vb.net - VB.NET 中的模块变量何时实例化？

> ID：14366432
> 
> 赞同：2
> 
> 时间：2013-01-16T19:40:07.167
> 
> 标签：vb.net, global-variables

我想知道在程序的生命周期中，模块中的变量将被初始化，如下例所示：

```
Module Helper
    Friend m_Settings As New UserSettings()

    Sub Foo()
        '...
    End Sub

    Sub Bar()
        '...
    End Sub

End Module

Public Class UserSettings
    Public Property UserName As String
    Public Property PrefServer As Integer

    Public Sub New()
        '...
    End Sub

    Public Sub LoadSettings()
        '...
    End Sub
End Class 
```

什么时候`m_Settings`初始化？我可以在构造函数中设置一个断点`UserSettings`并查看调用堆栈，但我在那里看到“外部代码”，但这并没有告诉我很多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T21:01:04.307

CLR 不直接支持 VB.NET 模块，它要求所有方法和变量都是类型的一部分。所以 VB.NET 编译器实际上会在后台生成一个*类*。您在模块中编写的所有函数都成为该类的静态方法。您在模块中声明的所有变量都成为该类的静态字段。

在您的模块中初始化的任何变量都会导致生成静态构造函数。并且初始化代码被移动到这个构造函数中。

现在应用 CLR 规则：只要抖动触及此类的*任何成员，CLR 就会运行静态构造函数。*然后初始化所有模块变量。这也是您在调用堆栈上看到 [external code] 的原因，调用源自 CLR 内部。

很少有这样的问题，CLR 中的静态构造函数保证非常强大。关于唯一棘手的事故是导致抛出异常的变量初始化程序。那是胆量开始显现的时候。堆栈跟踪非常神秘，因为它显示了源代码中不存在的代码。实际抛出的异常是TypeInitializationException，很迷，因为你没有写任何类型，你需要查看它的InnerException才能找到真正的原因。

# java - 获取数组时出错

> ID：14366433
> 
> 赞同：0
> 
> 时间：2013-01-16T19:40:07.027
> 
> 标签：java, arrays

我的程序是：

```
public class CO2FootPrintTester {
  public static void main(String[] args) {

    //declaration of variables 

    int[] numberOfPeople = new int[5];
    numberOfPeople[0] = 3;
    numberOfPeople[1] = 6;
    numberOfPeople[2] = 2;
    numberOfPeople[3] = 10;
    numberOfPeople[4] = 1;

    double[] avgElecBill = new double[5];
    avgElecBill[0] = 227.29;
    avgElecBill[1] = 213.28;
    avgElecBill[2] = 234.78;
    avgElecBill[3] = 256.04;
    avgElecBill[4] = 221.96;

    for (int counter = 0; counter <= 5; counter++) {
      int totalAverageElectricBill = 0;
      totalAverageElectricBill += avgElecBill[counter];
      int averageElectricBill = totalAverageElectricBill / 5;
    }

    boolean[] cans = new boolean[5];
    cans[0] = true;
    cans[1] = false;
    cans[2] = true;
    cans[3] = false;
    cans[4] = true;

    boolean[] glass = new boolean[5];
    glass[0] = true;
    glass[1] = false;
    glass[2] = true;
    glass[3] = false;
    glass[4] = true;

    boolean[] plastic = new boolean[5];
    plastic[0] = true;
    plastic[1] = true;
    plastic[2] = false;
    plastic[3] = false;
    plastic[4] = true;

    boolean[] paper = new boolean[5];
    paper[0] = true;
    paper[1] = false;
    paper[2] = true;
    paper[3] = false;
    paper[4] = true;

    int[] numLights = new int[5];
    numLights[0] = 9;
    numLights[1] = 3;
    numLights[2] = 5;
    numLights[3] = 1;
    numLights[4] = 8;

    for (int counter = 0; counter <= 5; counter++) {
      int[] lightsTotal = new int[5];
      lightsTotal[counter] += numLights[counter];
    }

    int[] gas = new int[5];
    gas[0] = 2604;
    gas[1] = 3029;
    gas[2] = 1745;
    gas[3] = 3590;
    gas[4] = 1362;

    for (int counter = 0; counter <= 5; counter++) {
      int gasTotal = 0;
      gasTotal += gas[counter];
    }

    double[] avgElecPrice = new double[5];
    avgElecPrice[0] = .084;
    avgElecPrice[1] = .081;
    avgElecPrice[2] = .085;
    avgElecPrice[3] = .084;
    avgElecPrice[4] = .086;

    for (int counter = 0; counter <= 5; counter++) {
      int totalAverageElectricPrice = 0;
      totalAverageElectricPrice += avgElecPrice[counter];
      int averageElecPrice = 0;
      averageElecPrice = totalAverageElectricPrice / 5;
    }

    double[] gasFootprint = new double[5];
    double[] electricityEmissions = new double[5];
    double[] emissionReductions = new double[5];
    double[] grossWasteEmission = new double[5];

    //call methods
    for (int counter = 0; counter <= 4; counter++) {

      gasFootprint[counter] = CO2Footprint.calculateGasEmissions(gas);
      electricityEmissions[counter] = CO2Footprint.calculateElectricityEmissions(averageElectricBill, averageElecPrice);
      emissionReductions[counter] = CO2Footprint.calcNetWasteReduction(cans, plastic, glass, paper, grossWasteEmission, numberOfPeople);
      grossWasteEmission[counter] = CO2Footprint.calcGrossWasteEmission(numberOfPeople);
    }

    //print results

    System.out.println("|               Pounds of CO2             |      Pounds of CO2         |                       |");
    System.out.println("|               Emmited from              |      Reduced from          |                       |");
    System.out.println("|   Gas   |      Electricity  |   Waste   |   Recycling  |  New Bulbs  |    CO2 Footprint      |");

  }
} 
```

我在以下两行遇到问题：

```
gasFootprint[counter] = CO2Footprint.calculateGasEmissions(gas);

grossWasteEmission[counter] = CO2Footprint.calcGrossWasteEmission(numberOfPeople); 
```

第 1 行：它说 required `double`found `void`。

`calcGrossWasteEmission(int[])`第 2 行：不能从静态上下文引用非静态方法。需要`double`找到`void`。

我不知道为什么它说我需要`double`。我认为它已经是一个`double`.

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:43:35.970

我必须看到 CO2Footprint 类才能确定，但​​我猜 calculateGassEmissions(gas) 是一种`public void`方法而不是`public double`

另外我必须假设它`calcGrossWasteEmission`是一个实例方法而不是一个静态方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:41:38.907

```
gasFootprint[counter] = CO2Footprint.calculateGasEmissions(gas); 
```

似乎`calculateGasEmissions`om`CO2Footprint`不是静态方法。

如果是这种情况，那么您需要实例化`CO2Footprint`类并调用`calculateGasEmissions`该实例。

例如：

```
CO2Footprint co2Instance = new CO2Footprint();
co2Instance.calculateGasEmissions(gas); 
```

第二题：

数组索引从 0 开始，因此，您的`for`循环将通过`ArrayIndexOutofBoundsException`.

```
 for (int counter = 0; counter <=5; counter++) 
```

应该：

```
 for (int counter = 0; counter <5; counter++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:41:40.567

```
for (int counter = 0; counter <=5; counter++) 
```

这应该是：

```
for (int counter = 0; counter < 5; counter++) 
```

因为在大小为 5 的数组中没有索引 5（即数组从 0 开始）。

# html - 添加®到

> ID：14366436
> 
> 赞同：1
> 
> 时间：2013-01-16T19:40:18.937
> 
> 标签：html, jsf, jsf-2

我想将 HTML `<sup>&#174;</sup>`（即^®）添加到`<h:outputText>`，但出现异常。

```
<h:outputText value="&lt;<sup &#174;/>&gt;" escape="false" /> 
```

什么是不正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:56:05.723

你根本不需要`<h:outputText>`。您可以在 JSF 页面中写下 HTML 普通香草。

例如

```
<p>#{bean.productName}<sup>&#174;</sup></p> 
```

### 也可以看看：

*   [是否建议对所有内容都使用 h:outputText ？](https://stackoverflow.com/questions/5539894/is-it-suggested-to-use-houtputtext-for-everything/5540859#5540859)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:51:45.863

您不能在 xhtml 代码中使用`<`符号`>`。你的价值不应该是这样的：

```
<h:outputText value="&lt;sup&gt;&#174;&lt;sup/&gt;" escape="false"/> 
```

# php - zf1：尝试添加导航菜单

> ID：14366437
> 
> 赞同：0
> 
> 时间：2013-01-16T19:40:19.990
> 
> 标签：php, zend-framework

我正在按照此视频[教程](http://www.zendcasts.com/zend_navigation-dynamically-creating-a-menu-a-sitemap-and-breadcrumbs/2009/06/)添加导航菜单。

所以我只是添加到我`Bootstrap.php`的功能，它在视频的开头（`_initNavigation()`）说，所以现在是这样的：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

    protected function _initRequest()
    {
        require_once 'Zend/Loader.php';
        Zend_Loader::loadClass('Zend_Translate');
        $translate = new Zend_Translate('array', APPLICATION_PATH . '/languages', null, array('scan' => Zend_Translate::LOCALE_FILENAME));

        $translate->setLocale('en');
        Zend_Registry::set('Zend_Translate', $translate);
    }

    protected function _initNavigation()
    {
        $this->bootstrap('layout');
        $layout = $this->getResource('layout');
        $view = $layout->getView();
        $config = new Zend_Config_Xml('/home/tirengarfio/workspace/contractlink/contractlink/wwwAPP/configs/navigation.xml', 'nav');

        $navigation = new Zend_Navigation($config);
        $view->navigation($navigation);
    }
} 
```

但在那之后我收到了这个错误：

> 致命错误：在第 336 行的 /home/tirengarfio/workspace/contractlink/contractlink/library/Zend/Controller/Plugin/Broker.php 中，未捕获的异常 'Zend_Loader_PluginLoader_Exception' 带有消息 'Plugin by name 'Language'

`initNavigation()`该错误与我创建的帮助程序有关，但在文件中添加函数之前我没有收到该错误`Bootstrap.php`。所以我认为错误可能是因为新函数..有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:27:39.370

它可以删除这一行：

```
require_once 'Zend/Loader.php'; 
```

# java - Android Sqlite 一个数据库中的多个表

> ID：14366445
> 
> 赞同：1
> 
> 时间：2013-01-16T19:40:54.577
> 
> 标签：java, android, sqlite

一个快速的问题，伙计们，

目前我的数据库中有一个表，我总共需要 6 个。这仅仅是为其他 5 个表声明我的列名变量然后在 onCreate 方法中添加 5 个创建语句的情况吗？这显然意味着我可以将所有数据库处理集中在一个类中。

我已经对此进行了一些研究，但只是想确保我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:44:32.630

简短的回答是肯定的——您可以根据需要在一个 SQLite 数据库中创建任意数量的表。

# java - php重新声明函数，就像在java中一样

> ID：14366448
> 
> 赞同：2
> 
> 时间：2013-01-16T19:41:30.257
> 
> 标签：java, php, overloading, redeclare

> **可能重复：**
> [php函数重载](https://stackoverflow.com/questions/4697705/php-function-overloading)

我想重新声明这样的函数：

```
class Name{
    function a(){ something; }
    function a($param1){ something; }
} 
```

但它返回

```
Fatal error: Cannot redeclare Name::a() 
```

在java中它只是工作。我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:42:35.557

使用默认参数：

```
class Name{
    function a($param1=null){ something; }
} 
```

如果没有参数传递给`Name::a()`它，它将分配一个 $param1 的值为`null`. 所以基本上传递该参数成为可选的。如果你需要知道它是否有值，你可以做一个简单的检查：

```
if (!is_null($param1))
{
 //do something
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:42:41.747

您不会重新声明函数。相反，您可以通过为其分配默认值来使参数成为可选。像这样：

```
function a($param1 = null){ something; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T19:46:13.303

函数参数不能唯一标识一个函数。在 Java 中，参数是严格定义的。这允许编译器知道您正在调用哪个函数。

但是，在 PHP 中，情况并非如此。

```
function a()
{
    $args = func_get_args();
    foreach($args as $value)
    {
        echo $value;
    }
} 
```

可以创建没有定义参数的函数，但仍向其传递参数。

> 一个（“你好”，“世界”）

会输出

> 你好世界

因此，PHP 无法区分 a() 和 a($arg)。因此，a() 已经定义好了。

PHP 程序员有不同的实践来处理这个单一的函数问题。

您可以使用默认值定义参数。

> a($arg = '你好世界');

您可以传递混合变量类型。

```
 function a($mixed)
 {
     if(is_bool($mixed))
     {
         .....
     }
     if(is_string($mixed))
     {
         .....
     }
 } 
```

我的偏好是使用具有默认值的数组。它更加灵活。

```
 function a($options=array())
 {
       $default = array('setting'=>true);
       $options = array_merge($default,$options);
       ....
 }

 a(array('setting'=>false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T19:43:40.980

不幸的是，PHP 不像 Java 那样支持方法重载。在这里看看这个解决方案：[PHP函数重载](https://stackoverflow.com/questions/4697705/php-function-overloading)
是`func_get_args()`要走的路：

# jquery - 干扰 Javascript 的 Jquery 选项卡

> ID：14366455
> 
> 赞同：0
> 
> 时间：2013-01-16T19:41:50.347
> 
> 标签：jquery, jquery-tabs

我正在尝试让页面上的所有图像在新窗口中打开。然而，由于某种原因，jQuery 的“tabs”方法阻止了代码工作。tabs 方法在为此页面拉入的外部 js 文件中调用，并且是必需的。该页面也没有调用 tabs 方法。我用于测试页面的代码如下。我可以做些什么来使链接代码在不删除标签的情况下工作吗？

```
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script>
$().ready(function(){
    $(".tabs").tabs();
    $("a").click(function(event){
        alert("ALERT");
        var temp=$(this).attr("href").split(".");
        if (temp[temp.length-1]=="jpg"||temp[temp.length-1]=="jpeg"){
            window.open("http://www.google.com");
        }
    });
});
</script>
</head>
<body>
<a href="http://www.google.com.au/logos/2013/cecilia_may_gibbs_136th_birthday-1016005-hp.jpg">This should go to google</a><br />
<a href="http://library.uis.edu">This should not go to google</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:43:42.337

`.tabs()`是 jQueryUI 的一部分，你没有包含在你的页面中，因此它失败了。

# r - 来自 SQL 的 CASE-WHEN 的 R 版本

> ID：14366464
> 
> 赞同：1
> 
> 时间：2013-01-16T19:42:18.800
> 
> 标签：r, switch-statement, if-statement

我正在寻找一种在 R 中完成类似于 SQL 中的 CASE - WHEN 功能的方法。有一个与收入范围相关的变量，我需要创建两个新变量，其值为该范围的最小值和最大值。下面的代码不完全是 R 也不完全是 SQL，而是中间的东西。希望很清楚我想要做什么。

> if (INCOME_CD == "A") {
> income.min <- 1000
> income.max <- 14999
> } else if (INCOME_CD == "B") {
> income.min <- 15000
> income.max <- 24999
> 。
> .
> } 其他 {
> 收入.min <- 99999
> 收入.max <- 999999
> }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:49:20.657

您可以使用`switch`

这里最后一个值是默认值

```
switch (INCOME_CD , 
        A= list(income.min = 1000,income.max = 14999),
        B =list(income.min = 15000, income.max = 24999),
        list(income.min = 99999,income.max = 999999)) 
```

例如

```
INCOME_CD <- 'A' 
```

上面的代码返回

```
$income.min
[1] 1000
$income.max
[1] 14999 
```

**编辑对 OP 的说明**

通常我们在函数中使用这段代码。

```
get.income <- function(INCOME_CD){
switch (INCOME_CD , 
        A= list(income.min = 1000,income.max = 14999),
        B =list(income.min = 15000, income.max = 24999),
        list(income.min = 99999,income.max = 999999))
}

> get.income('A')
$income.min
[1] 1000

$income.max
[1] 14999

> get.income('B')
$income.min
[1] 15000

$income.max
[1] 24999

> get.income('C')
$income.min
[1] 99999

$income.max
[1] 999999 
```

# jquery - 选择链接目标

> ID：14366466
> 
> 赞同：0
> 
> 时间：2013-01-16T19:42:22.623
> 
> 标签：jquery, scrolltop

我有一个指向页面锚点的六个链接的列表，我想为它们设置滚动动画。

HTML：

```
<div id="nav">
<table>
<tbody>
<tr>
<td><a href="#one">One</a></td>
<td><a href="#two">Two</a></td>
<td><a href="#three">Three</a></td>
</tr>
<tr>
<td><a href="#four">Four</a></td>
<td><a href="#five">Five</a></td>
<td><a href="#six">Six</a></td>
</tr>
</tbody>
</table>
</div> 
```

jQuery：

```
jQuery(document).ready(function ($) {

$("#nav a").click(function(){

// Disable the default behaviour when a user clicks an empty anchor link.
 // (The page jumps to the top instead of // animating)
 event.preventDefault();

// Animate the scrolling motion.
 $("html, body").animate({
scrollTop:this.attr('target').offset().top
 },"slow");
});

}); 
```

这不起作用，我收到一条错误消息：

```
Uncaught TypeError: Object http://url/#one has no method 'attr' 
```

所以很明显我需要重写这一行：

```
scrollTop:this.attr('target').offset().top 
```

但是如何选择链接的目标以找到偏移量，以便设置滚动高度？

解决方案：

最终的答案是有一些地方出错了，可能最值得注意的是下面指出的缺少的 $。这是我决定使用的代码：

```
$("#nav a").click(function(){

// Disable the default behaviour when a user clicks an empty anchor link.
 // (The page jumps to the top instead of // animating)
 event.preventDefault();

// Animate the scrolling motion.
 $("html, body").animate({
scrollTop:($("[name='"+ (this.hash).replace('#', '') +"']").offset().top)
 },"slow");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:43:35.207

您收到该错误的原因是您没有将元素包装在 jQuery 中（您的代码中也有其他错误）。

但是，这甚至都不需要。您想将`href`属性的内容用作 ID 选择器：

```
$("html, body").animate({
    scrollTop: $(this.href).offset().top
}, "slow"); 
```

# ios - Echoprint 无法识别一首歌曲

> ID：14366473
> 
> 赞同：1
> 
> 时间：2013-01-16T19:42:39.090
> 
> 标签：ios, audio-fingerprinting, shazam

> Echoprint “聆听”手机或计算机上的音频，以确定它是什么歌曲。它的速度非常快且准确度非常高，以至于它可以识别非常嘈杂的原始版本或在移动设备上录制的带有大量外部来源干扰的版本。

我编译了网站上提供的 iOS 示例。到现在为止还挺好。遗憾的是，Echoprint 无法通过 iPhone 的麦克风识别任何歌曲（录制时间长达 1 分钟）。

另一方面，它*能够*通过直接从 iPhone 的媒体库“上传”歌曲来识别歌曲。

任何想法，可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T05:49:17.887

回声打印不适用于无线工作。至少没有给定的配置。您可以调整代码，专注于匹配函数 (best_match)，以获得无线配置的一些结果。实际的 best_match 函数仅在它非常接近参考时才会返回一首歌曲，而用手机麦克风录制的歌曲不会发生这种情况。还可以考虑录制更长的片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T12:47:39.110

我认为问题在于录制歌曲的采样率。如果它是 8 kHz，它可能不会工作；它必须至少为 11 kHz。

# html - 我在正在研究的 ASPX 页面中看到的这个看起来很奇怪的混淆 HTML 代码是什么？

> ID：14366479
> 
> 赞同：0
> 
> 时间：2013-01-16T19:43:16.927
> 
> 标签：html, asp.net

> **可能重复：**
> [__VIEWSTATE 持有什么？](https://stackoverflow.com/questions/1350216/what-does-the-viewstate-hold)

我正在研究我公司网站的代码，我看到以下内容：

![在此处输入图像描述](../Images/91f7882220ce61f4aec208fb8a65ed6f.png)

基本上，代码是这样的：

```
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUJNDI3MDEyMjc1D2QWAmYPZBYCZg9kFgICAw9kFgoCGw8WAh4LXyFJdGVtQ291bnQCBBYIZg9kFgJmDxUEBk1hbmFnZQxTdXJ2ZXlzLmFzcHgOZGlzcGxheTpibG9jaztnPHN0cm9uZyBjbGFzcz0nY2FwdGlvbic+TUFOQUdFPC9zdHJvbmc+PGJyLz48c3Ryb25nIGNsYXNzPSdzdWItY2FwdGlvbic+Q3JlYXRlIGFuZCBSdW4gU3VydmV5czwvc3Ryb25nPmQCAQ9kFgJmDxUEBlN1cHBseRhTdXBwbGllcl9TdXJ2ZXkuYXNweD9tPTIOZGlzcGxheTpibG9jaztoPHN0cm9uZyBjbGFzcz0nY2FwdGlvbic+U1VQUExZPC9zdHJvbmc+PGJyLz48c3Ryb25nIGNsYXNzPSdzdWItY2FwdGlvbic+TW9uaXRvciBhbmQgU2VsbCBTYW1wbGU8L3N0cm9uZz5kAgIPZBYCZg8VBANCaWQ1aHR0cDovL3N0YWdpbmcuc2FtcGxpY2lvLnVzL0Z1bGNydW0vTGV2ZXJhZ2UvQmlkL0xpc3QOZGlzcGxheTpibG9jaztkPHN0cm9uZyBjbGFzcz0nY2FwdGlvbic+QklEPC9zdHJvbmc+PGJyLz48c3Ryb25nIGNsYXNzPSdzdWItY2FwdGlvbic+Q3JlYXRlIGFuZCBNYW5hZ2UgQmlkczwvc3Ryb25nPmQCAw9kFgJmDxUEDlJlcG9ydHMtQWN0aXZlFURhdGFBbmFseXNpcy5hc3B4P209NA5kaXNwbGF5OmJsb2NrO3A8c3Ryb25nIGNsYXNzPSdjYXB0aW9uJz5SRVBPUlQ8L3N0cm9uZz48YnIvPjxzdHJvbmcgY2xhc3M9J3N1Yi1jYXB0aW9uJz5BbmFseXplIFRyYWZmaWMgYW5kIFN1cnZleSBEYXRhPC9zdHJvbmc+ZAIdD2QWBAIBDw8WAh4EVGV4dAUGYWF6emFtZGQCAw8PFgIeC05hdmlnYXRlVXJsBUBDaGFuZ2VQYXNzd29yZC5hc3B4P1VzZXJTSUQ9QjgyRjkyQTktNTA1Mi00MzUyLTgyNjUtN0NCNTgwQ0Y3NDdDZGQCHw8WAh4HVmlzaWJsZWdkAiEPZBYEAgEPFgIfAAICFgRmD2QWAgIBDxYCHgVjbGFzcwUfdGFiIGNvcm5lci1ibGFjay10YWIgdGFiLWFjdGl2ZRYCZg8VAhVEYXRhQW5hbHlzaXMuYXNweD9tPTQLUnVuIFN1cnZleXNkAgEPZBYCAgEPFgIfBAUUdGFiIGNvcm5lci1ibGFjay10YWIWAmYPFQIVRGF0YUFuYWx5c2lzLmFzcHg/bT01Dk1vbml0b3IgU2FtcGxlZAIDDxYCHwACBBYIZg9kFgICAQ8WAh8EBRR0YWIgY29ybmVyLWJsYWNrLXRhYhYCZg8VAhFQcm9qZWN0cy5hc3B4P209NAhQcm9qZWN0c2QCAQ9kFgICAQ8WAh8EBRR0YWIgY29ybmVyLWJsYWNrLXRhYhYCZg8VAgxDbGllbnRzLmFzcHgHQ2xpZW50c2QCAg9kFgICAQ8WAh8EBRR0YWIgY29ybmVyLWJsYWNrLXRhYhYCZg8VAhJTdXBwbGllcnMuYXNweD9tPTQJU3VwcGxpZXJzZAIDD2QWAgIBDxYCHwQFFHRhYiBjb3JuZXItYmxhY2stdGFiFgJmDxUCDlVzZXJzLmFzcHg/bT00BVVzZXJzZAIjD2QWBAITDxYCHglpbm5lcmh0bWwFCUNvbXBsZXRlc2QCFQ9kF....... ETC... ETC. ... VURrv" />
</div> 
```

为什么会有人这样做？这和混淆有什么关系吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:44:58.030

这些隐藏字段保存事件和视图状态数据，以支持 Web 表单中的服务器端工作。

[TRULY Undstanding ViewState](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)会让你开始学习——这是一篇相当老的文章，但无论如何都很好。另外两个隐藏字段用于管理服务器端事件。

我还建议阅读[理解 JavaScript __doPostBack 函数](http://aspalliance.com/articleViewer.aspx?aId=895&pId=-1)。

# c# - 在 C# 中使用 Drush Site-Install

> ID：14366489
> 
> 赞同：1
> 
> 时间：2013-01-16T16:54:02.283
> 
> 标签：c#, drupal, drush

我正在尝试使用 C# 中的 Drush 进行 Drupal 站点安装，作为使用 MSI 的完整 Windows Server 站点安装的一部分。我正在使用的 Drush 命令如下。

```
C:\ProgramData\Drush\Drush.bat -y si application_name --db-url=sqlsrv://admin_name:password(local)\SQLEXPRESS:/database_name --account-name=admin --account-mail=name@test.com --account-pass=Password1234 --site-mail="admin@company.com" --site-name="Site Name" install_configure_form.site_default_country=GB install_configure_form.date_default_timezone="Europe/London" 
```

当在工作目录（inetpub\application_name）中从 cmd.exe 运行时，这非常有效。

当将上述内容放入代码并在安装期间执行时会出现问题，并且总是导致以下错误（每次使用不同的文件名）。

> 无法解压 C:\ProgramData\Drush\lib\druFD63.tmp.gz

用于执行该命令的 C# 代码如下：

```
public static ActionResult Drush_Configuration(Session session)
    {       
        string strArgs = "-y si application_name --db-url=sqlsrv://admin_name:password(local)\SQLEXPRESS:/database_name --account-name=admin --account-mail=name@test.com --account-pass=Password1234 --site-mail="admin@company.com" --site-name="Site Name" install_configure_form.site_default_country=GB install_configure_form.date_default_timezone="Europe/London";
        string strExeCmd = @"C:\ProgramData\Drush\Drush.bat ";
        strExeCmd = strExeCmd + strArgs;
        string strLocation = @"C:\inetpub\application_name";

        session.Log("Starting Drush Configuration");
        session.Log("Command line is: " + strExeCmd + " " + strArgs);

        int exitCode;
        ProcessStartInfo processInfo;
        Process process;
        try
        {
            processInfo = new ProcessStartInfo("cmd.exe", "/c " + strExeCmd);
            processInfo.WorkingDirectory = strLocation;
            processInfo.WindowStyle = ProcessWindowStyle.Normal;
            processInfo.CreateNoWindow = true;
            processInfo.UseShellExecute = false;
            // *** Redirect the output ***
            processInfo.RedirectStandardError = true;
            processInfo.RedirectStandardOutput = true;

            process = Process.Start(processInfo);
            process.WaitForExit();

            // *** Read the streams ***
            string output = process.StandardOutput.ReadToEnd();
            string error = process.StandardError.ReadToEnd();

            exitCode = process.ExitCode;

            session.Log("output>>" + (String.IsNullOrEmpty(output) ? "(none)" : output));
            session.Log("error>>" + (String.IsNullOrEmpty(error) ? "(none)" : error));
            session.Log("ExitCode: " + exitCode.ToString(), "ExecuteCommand");
            process.Close();
        }
        catch (Exception e)
        {
            session.Log("Error: " + e);
            return ActionResult.Failure;
        }

        session.Log("Drush Configuration completed successfully");
        return ActionResult.Success;
    } 
```

如上所述，这总是会导致“无法解压缩”错误。

有没有人使用过 c# 在 Drush 中运行 Site-Install？有谁知道为什么以这种方式执行时可能会失败？

任何想法或建议将不胜感激。

我正在使用 Drush-5.8-2012-12-10-Installer-v1.0.20、Drupal 7 和 Windows Server 2008 R2 x64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:05:48.140

此问题的原因是环境变量。Drush MSI 安装程序设置在 MSI 机器上下文中无法识别的用户路径环境变量。
因此，通过将 Drush、GnuWin32 和 PHP 的系统路径变量添加到站点安装 MSI，可以以编程方式安装站点。

# c# - 创建一个简单的 c# dll 并从 ruby 访问它

> ID：14366491
> 
> 赞同：3
> 
> 时间：2013-01-16T19:43:59.917
> 
> 标签：c#, ruby, winapi, dll

我正在尝试制作我的第一个 c# dll。我希望能够使用 win32API 从 ruby​​ 调用它的方法/函数。我制作了这个dll：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ClassLibrary1
{
    public class Class1
    {

        public int PropA = 10;

        public void Multiply(Int32 myFactor)
        {
            PropA *= myFactor;

        }
    }
} 
```

我用 Visual Studio 2010 编译它并得到了我的 ClassLibrary1.dll 文件。

现在对于红宝石部分，我尝试了这个：

```
f = "c:/path_to_file/ClassLibrary1.dll"
mult = Win32API.new(f,"Multiply",["I"],"I") 
```

但是，我收到以下错误：

```
Error: #<RuntimeError: (eval):0:in `initialize': GetProcAddress: Multiply or MultiplyA 
```

老实说，我从未创建过 dll，也没有使用 c# 的经验。我只是想开始。我之前通过 win32API 使用了许多 dll 和 Ruby（主要是 user32）。

我猜我的dll不行？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:06:48.210

要像在 Win32 上下文中那样使用 DLL 中的函数，这些函数需要从 DLL 中导出可见。这些函数通常带有标记，`dllexport`并将显示在 DLL 的导出表中。您可以使用诸如[dumpbin (MSDN)](http://msdn.microsoft.com/en-us/library/c1h23y6c%28v=vs.110%29.aspx)之类的实用程序来验证 user32 和其他 Win32 DLL 是否执行此操作。

[dllexport, dllimport @ MSDN](http://msdn.microsoft.com/en-us/library/vstudio/3y1sfaz2.aspx)

不幸的是，.NET 没有立即支持使函数导出可见，仅支持通过[DllImport (MSDN)](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)属性引入此类函数。

COM 是从非 .NET 环境使用 .NET 编写的代码的最简单方法，但如果您必须使用较低级别的绑定，您可以使用 C、C++/CLI 或任何其他语言和框架组合制作中间 DLL可以将导出标头写入 dll，以调用您的 .NET 代码。

此外，还有几篇关于通过编译后自动化或其他变通方法实现这一点的文章，这里有一些供您参考。

[如何自动将 .NET 函数导出到非托管程序 @ CodeProject](http://www.codeproject.com/Articles/16310/How-to-Automate-Exporting-NET-Function-to-Unmanage)

[不受管理的出口@Google 协作平台](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)

[DllExport - 为纯 .NET 程序集提供 C 样式的导出](https://launchpad.net/dllexport)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:47:01.133

无需做任何额外的事情，创建的 DLL 是一个旨在在 .Net 运行时（CLR）内运行的程序集。

您可以按照相关问题中的描述通过 Com 公开它：[Can Ruby import a .NET dll?](https://stackoverflow.com/questions/265879/can-ruby-import-a-net-dll) 哪一个

# jquery - 使用 Animate 的 JQuery 更改类

> ID：14366496
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:44:13.977
> 
> 标签：jquery

我正在制作一个侧边菜单，当您单击选项卡时会弹出该菜单。我已经到了不知道如何继续的地步，我需要标签 div 上的类在单击时更改为“sideopen”。我已经尝试过`attr();`，我也尝试过`removeClass();`，`addClass();`但无济于事。

这是 JSFiddle 上的代码：http: [//jsfiddle.net/bGKvR/](http://jsfiddle.net/bGKvR/)

另外，我是 JS/JQuery 的新手，因此非常感谢任何有关清理代码的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:50:27.973

我只是看过它，但你应该考虑学习基本的编程。

```
$(".sideclosed").click(function () {
  var $this = $(this);
  $('#sidepanel, #sidepaneltab').animate({
    left: ($this.hasClass("open") ? '-' : '+') + '=200' // if it should open use '+' else use '-'
  }, 1000);
  // now toggle open class
  $this.toggleClass("open");
}); 
```

也在这里[小提琴](http://jsfiddle.net/bGKvR/6/)！

# ms-access-2007 - Access 2007，为什么我的子表单页眉和页脚在表单视图中不可见？

> ID：14366498
> 
> 赞同：2
> 
> 时间：2013-01-16T19:44:21.400
> 
> 标签：ms-access-2007

令人尴尬的是，我想我在这里遗漏了一些相当简单的东西，但我似乎无法弄清楚这一点。我希望计算字段出现在子表单页眉或页脚中，但我什至看不到它。

我检查了子表单的属性表设置，它清楚地指出：“表单标题--可见。显示时间--总是”。

感谢在这个不必要的令人沮丧的事情上的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-06T19:18:46.267

当您右键单击详细信息时，请确保您选择了表单页眉/页脚，而不是页眉/页脚

[![在此处输入图像描述](../Images/99346efc01bd03d9aaad7e5c5930b27c.png)](https://i.stack.imgur.com/Z0P0v.png)

不是 OP 的问题，但这可能会帮助像我这样的其他新手。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T20:05:22.030

确保您选择了合适的默认视图，例如单一或连续形式。

![表单视图](../Images/029fe2122735e6eb3a64b210daf70b6d.png)

# c# - 是什么阻止了 TPL 启动另一个线程

> ID：14366502
> 
> 赞同：-3
> 
> 时间：2013-01-16T19:44:37.390
> 
> 标签：c#, task-parallel-library

使用命令模式返回仅休眠 5 秒的任务，完成 3 个任务的总数约为 15 秒。

我在做什么阻止这段代码“并行”执行？

**调用代码**

```
 var timer = new Stopwatch();

        timer.Start();

        var task = CommandExecutor.ExecuteCommand(new Fake());
        var task2 = CommandExecutor.ExecuteCommand(new Fake());
        var task3 = CommandExecutor.ExecuteCommand(new Fake());

        Task.WaitAll(new Task[]
        {
            task, task2, task3
        });

        timer.Stop();

        Debug.Print("{0}ms for {1},{2},{3} records", timer.ElapsedMilliseconds, task.Result.Count, task2.Result.Count(), task3.Result.Count()); 
```

**正在执行的命令**

```
public class Fake : Command<Task<Dictionary<string, string[]>>>
{
    public override string ToString()
    {
        return string.Format("Fake");
    }

    protected override void Execute()
    {
        new System.Threading.ManualResetEvent(false).WaitOne(5000);

        Result = Task.Factory.StartNew(() => new Dictionary<string, string[]>());
    }
} 
```

**命令抽象**

```
public abstract class Command
{
    public void Run()
    {
        try
        {
            var timer = new Stopwatch();
            timer.Start();
            //Debug.Print("{0}-{1}", ToString(), "Executing");
            Execute();
            timer.Stop();
            Debug.Print("{0}-{1} Duration: {2}ms", ToString(), "Done", timer.ElapsedMilliseconds.ToString(CultureInfo.InvariantCulture));             
        }
        catch (Exception ex)
        {
            Debug.Print("Error processing task:" + ToString(), ex);
        }
    }

    public abstract override string ToString();

    protected abstract void Execute();
}

/// <summary>
/// A command with a return value
/// </summary>
/// <typeparam name="T"></typeparam>
public abstract class Command<T> : Command
{
    public T Result { get; protected set; }

    public T GetResult()
    {
        Run();
        return Result;
    }
} 
```

**命令执行者**

```
public class CommandExecutor
{
    /// <summary>
    ///     Executes the command.
    /// </summary>
    /// <param name="cmd">The CMD.</param>
    public static void ExecuteCommand(Command cmd)
    {
        cmd.Run();
    }

    /// <summary>
    ///     Executes the command for commands with a result.
    /// </summary>
    /// <typeparam name="TResult">The type of the result.</typeparam>
    /// <param name="cmd">The CMD.</param>
    /// <returns></returns>
    public static TResult ExecuteCommand<TResult>(Command<TResult> cmd)
    {
        ExecuteCommand((Command) cmd);

        return cmd.Result;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:55:06.653

问题是您不是在实际`Task`对象中等待，而是在创建任务的方法中等待它实际提供该任务：

```
protected override void Execute()
{
    new System.Threading.ManualResetEvent(false).WaitOne(5000);

    Result = Task.Factory.StartNew(() => new Dictionary<string, string[]>());
} 
```

应该改为：

```
protected override void Execute()
{
    Result = Task.Factory.StartNew(() =>
    {
        new System.Threading.ManualResetEvent(false).WaitOne(5000);
        return new Dictionary<string, string[]>();
    });
} 
```

# c# - 如何从目录和文件名的字符串中仅获取文件名？

> ID：14366506
> 
> 赞同：-4
> 
> 时间：2013-01-16T19:44:57.327
> 
> 标签：c#

编码：

'Files' 是 a`List<string>`而 _indx 是`int`.

```
label22.Text = files[_indx]; 
```

例如在“文件”中`index[0]`我有这个字符串：

```
D:\New folder (45)\converted.avi_Automatic\Lightning 0 Length 2 [91 - 93]\000091.bmp 
```

但是在 label22.Text 中，我希望它只显示“000091.bmp”而不显示目录路径的其余部分。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:47:08.637

使用[`Path.GetFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)：

```
label22.Text = Path.GetFileName(files[_indx]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:46:36.973

我相信您正在寻找`Path.GetFileName()`：

```
label22.Text = Path.GetFileName(files[_indx]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:47:30.347

`Path.GetFileName(fileName)`返回没有目录的文件名。

取自[http://msdn.microsoft.com/en-us/library/system.io.path.getfilename(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T19:47:13.970

最简单的方法是

```
Path.GetFileName(files[_indx]); 
```

# r - 更多条件下的比较

> ID：14366508
> 
> 赞同：2
> 
> 时间：2013-01-16T19:44:58.200
> 
> 标签：r, subset, lapply

根据我的最后一个问题，我有一个新的归属问题。编辑我的帖子并在那里询问并等待一周后，我想再次在这里尝试。

这次有一个更好的例子：

```
Equip<- c(1,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,6,6,6)
Notif <-c(1,1,3,4,2,2,2,5,6,7,9,9,15,10,11,12,13,14,16,17,18,19)
rank <- c(1,1,2,3,1,1,1,1,2,3,1,1,2,1,2,3,1,2,3,4,5,6)
Component <- c("Ventil","Motor","Ventil","Ventil","Vergaser","Vergaser","Bremse",
"Lichtmaschine","Bremse","Lichtmaschine","Bremse","Motor","Lichtmaschine",
"Bremse","Bremse","Motor","Vergaser","Motor","Vergaser","Motor",
"Vergaser","Motor")    

df <- data.frame(Equip,Notif,rank,Component) 
```

`Equip`是我的主题和`rank`实际访问次数。`Component`是必须寻找的主题。

我想要这样的输出：

如果 an`Equip(subject)`被访问了 2 次（`rank`1 和 2），请使用 1&2 查找所有`Equip`s `rank`，如果有任何`Component`被认为是第一次和第二次。

如果 an被所有s`Equip(subject)`访问 3 次（ 1 ,2 和 3 ） ，如果有任何列表 3 次，例如 1, 1, Motor, 1, 2, Motor, 1, 3, Motor`rank``Equip``Component``Equip``rank``Component``Equip``rank``Component``Equip``rank``Component`

输出应具有 的名称`Component`，例如 True "Motor"

我有一个代码，但是有了这个，我可以比较第 1 次和第 2 次访问，第 2 次和第 3 次访问等等（我不能再次与等级分开，比如装备 2 等级，装备 3 等级等等在）

代码是这样的：

```
a <- lapply(split(df,df$Equip),function(x){      
ll <- split(x,x$rank)                    
 if(length(ll)>1 )
ii <- intersect(ll[[1]]$Component,ll[[2]]$Component ) ## test intersection
  else 
   ii <- NA
 c(length(ii)> 0 && !is.na(ii),ii)                                              
})
b <- unlist(a)
c <- table(b,b)
rowSums(c) 
```

希望你能帮助我。请询问是否有任何问题。

根据您关于输出的问题以及您的解决方案，

```
 Equip Component   V1 idx
1:     1    Ventil  TRUE   3
2:     2        NA  False  1
3:     3        NA  False  3
4:     4        NA  FALSE  2
5:     5        NA  FALSE  3
6:     6        NA  FALSE  6 
```

类似的东西，但如果它更容易，则不一定需要 Equip 和 idx

装备 2 个等级：

```
TRUE          FALSE
  0             1 
```

装备 3 个等级：

```
TRUE          FALSE
 1              2 
```

装备 6 个等级：

```
TRUE          FALSE
 0              1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:05:52.223

这是我认为您会感兴趣的输出。它使用`data.table`.

`data.table`首先，我们从您的`data.frame df`with中创建一个，`keys = Equip, Component`如下所示。

```
require(data.table) # load package
# then create the data.table with keys as specified above
# Check that both these columns are already sorted out for you!
dt <- data.table(df, key=c("Equip", "Component")) 
```

其次，我们创建一个函数，该函数将为给定的排名查询（2、3 等）提供所需的输出

```
this.check <- function(idx) {
    chk <- seq(1, idx)
    o <- subset(dt[, all(chk %in% rank), by=c("Equip", "Component")], V1 == TRUE)
    if (nrow(o) > 0) o[, idx:=idx]
} 
```

这是做什么的？让我们为`rank=1,2`. 我们通过以下方式运行：

```
> this.check(2)
# output
   Equip Component   V1 idx
1:     1    Ventil TRUE   2
2:     5    Bremse TRUE   2 
```

这告诉您对于`Equip = 1 and 5`，分别有`Components = Ventil and Bremse`with `rank = 1 and 2`（用 idx=2 表示）。你也得到了专栏`V1 = TRUE`，尽管我，正如@Carl 已经指出的那样，不理解这个的必要性。如果需要，可以使用更改此输出的列名`setnames`

第三，我们使用这个函数来查询`ranks=1,2`，然后`ranks=1,2,3`..等等。这可以通过`lapply`如下简单的方式完成：

```
# Let's run the function for idx = 2 to 6\. 
# This will check from rank = 1,2 until rank=1,2,3,4,5,6
o <- lapply(2:6, function(idx) {
    this.check(idx)
})
> o
[[1]]
   Equip Component   V1 idx
1:     1    Ventil TRUE   2
2:     5    Bremse TRUE   2

[[2]]
   Equip Component   V1 idx
1:     1    Ventil TRUE   3

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL 
```

它表明 for`rank=1,2`和`rank=1,2,3`你有一些`Component`. 对于其他人来说，什么都没有= `NULL`。

最后，我们可以将`bind`所有这些一起使用`rbind`来获得一个`data.table`，如下所示：

```
o <- do.call(rbind, o)
> o
   Equip Component   V1 idx
1:     1    Ventil TRUE   2
2:     5    Bremse TRUE   2
3:     1    Ventil TRUE   3 
```

在这里，`idx=2`是`Component`满足的`rank=1,2`，`idx=3`是满足的`rank=1,2,3`。

**把它们放在一起：**

```
this.check <- function(idx) {
    chk <- seq(1, idx)
    o <- subset(dt[, all(chk %in% rank), by=c("Equip", "Component")], V1 == TRUE)
    if (nrow(o) > 0) o[, idx:=idx]
}

o <- do.call(rbind, lapply(2:6, function(idx) {
    this.check(idx)
})) 
```

我希望这有帮助。

**编辑：（**经过一系列评论交流，这是我提出的新解决方案。我希望这就是你所追求的。）

```
require(data.table)
dt <- data.table(df, key=c("Equip", "Component"))
dt[, `:=`(e.max=max(rank)), by=Equip]
dt[, `:=`(ec.max=max(rank)), by=c("Equip", "Component")]
setkey(dt, "e.max", "ec.max")
this.check <- function(idx) {
    t1 <- dt[J(idx,idx)]
    t2 <- t1[, identical(as.numeric(seq_len(idx)), as.numeric(rank)), 
              by=c("Equip", "Component")]
    o <- table(t2$V1)
    if (length(o) == 1) 
        o <- c(o, "TRUE"=0)
    o <- c("idx"=idx, o)
}
o <- do.call(rbind, lapply(2:6, function(idx) this.check(idx)))

> o
#      idx FALSE TRUE
# [1,]   2     1    0
# [2,]   3     2    1
# [3,]   4     1    0
# [4,]   5     1    0
# [5,]   6     1    0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:30:24.210

如果我将您的数据按列排列为

```
foo<-cbind(Equip,Notif, rank, Component)
eqp<-1 # later, loop over all values
foo[c( which(  foo[,1]==eqp & (foo[,3]==1 | foo[,3]==2) ) ),4]
[1] "Ventil" "Motor"  "Ventil" 
```

将这些结果输入`table`并提取 count ==2 的项目

显然，任何出现两次的项目都是您想要的。
这不是我推荐使用的答案，因为类似的工具`ddply`会`aggregate`更干净地做到这一点，但我想确保这是你所追求的答案，假设循环遍历`eqp`原始`Equip`.

# python - 返回列表中匹配条件的第一项

> ID：14366511
> 
> 赞同：23
> 
> 时间：2013-01-16T19:45:13.337
> 
> 标签：python

我有一个功能。`matchCondition(a)`，它接受一个整数并返回 True 或 False。

我有一个 10 个整数的列表。`matchCondition`我想返回列表中返回 True的第一个项目（与原始列表的顺序相同） 。

尽可能像 Python 一样。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-16T19:45:57.373

```
next(x for x in lst if matchCondition(x)) 
```

`StopIteration`应该可以，但是如果列表中没有任何元素匹配，它将引发。您可以通过提供第二个参数来抑制它`next`：

```
next((x for x in lst if matchCondition(x)), None) 
```

`None`如果没有匹配项，它将返回。

演示：

```
>>> next(x for x in range(10) if x == 7)  #This is a silly way to write 7 ...
7
>>> next(x for x in range(10) if x == 11)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> next((x for x in range(10) if x == 7), None)
7
>>> print next((x for x in range(10) if x == 11), None)
None 
```

* * *

最后，为了完整起见，如果您想要列表中匹配的*所有*项目，这就是内置`filter`函数的用途：

```
all_matching = filter(matchCondition,lst) 
```

在 python2.x 中，这返回一个列表，但在 python3.x 中，它返回一个可迭代对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T19:47:08.447

使用`break`语句：

```
for x in lis:
  if matchCondition(x):
     print x
     break            #condition met now break out of the loop 
```

现在`x`包含您想要的项目。

**证明：**

```
>>> for x in xrange(10):
   ....:     if x==5:
   ....:         break
   ....:         

>>> x
>>> 5 
```

# ember.js - 如何从 Ember 的后端检索模型的“hasmany”关系？

> ID：14366513
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:45:22.180
> 
> 标签：ember.js, ember-data

我在 Ember 和 Rails 应用程序中定义了两个模型：

```
App.Library = DS.Model.create({
  books: DS.hasMany('App.Book')
});
App.Book = DS.Model.create({
  library: DS.belongsTo('App.Library')
}); 
```

在后端，我为每个图书馆有几本书，我想检索这些书，但是当我这样做时没有后端调用（图书馆对象是正确的并且有一个与其背面的 id 匹配的 id -结尾）：

```
var libraryBooks = library.get("books"); 
```

我期待对我的 rails API 进行后端调用，以便获取该特定图书馆的所有书籍，但我只是在`Ember.OrderedSet`没有后端调用的情况下得到空的。

我从 Ember 开始，所以也许这不正确，如果是这种情况，如果您只有模型的 id，那么直接从后端检索给定模型的“hasmany”的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-18T13:05:21.527

`.find()`会让 ember 做一个请求。

```
App.Library.find(1/* the id of the library*/).get('books'); 
```

我想这将是一个请求`/librarys/1`。您可以像这样配置复数：

```
DS.RESTAdapter.configure("plurals", {
    library: "libraries"
}); 
```

现在请求将是`/libraries/1`

您也可以通过图书馆获得书籍：

```
App.Book.find({library: 1}); 
```

`library: 1`你必须在后端处理自己。emberdata 将其作为查询字符串发送。像这样：`/books?library=1`

看看[这里](http://emberjs.com/guides/models/)有一些关于 ember-data 的文档

# java - 增加一个unicode字符？

> ID：14366515
> 
> 赞同：2
> 
> 时间：2013-01-16T19:45:31.553
> 
> 标签：java, unicode

我正在尝试在我的 Java 代码中打印一些印地语数字（Unicode 范围：0966 - 096F）。
打印与`index`被递增的 a相关联`for loop`。一些示例代码：

```
for(int i = 0; i < 10; i++) {
  System.out.println(/* I need the Hindi numbers from 0-9 printed here (value of i in each iteration but in Hindi));
} 
```

我试过这样做：

```
System.out.println("\u0966" + i); 
```

不用说，这是行不通的。我的问题是：
1\. 如何增加以 Unicode 表示的数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:47:20.537

```
for(int i = 0; i < 10; i++) {
  System.out.println((char)(0x966+i));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:48:44.747

尝试

```
 for (int i = 0; i < 10; i++) {
        System.out.println((char) ('\u0966' + i));
    } 
```

# java - 快速修复 - 向扩展 org.eclipse.ui.ide.markerResolution 添加属性

> ID：14366516
> 
> 赞同：1
> 
> 时间：2013-01-16T19:45:32.633
> 
> 标签：java, eclipse-rcp

我正在我的 RCP 应用程序中实现 QuickFix。

我添加了 org.eclipse.ui.ide.markerResolution 并创建了一个实现 IMarkerResolutionGenerator2 接口的类。

```
public class MyResolutionGenerator implements
    IMarkerResolutionGenerator2 {

    @Override
    public IMarkerResolution[] getResolutions(IMarker marker) {
        ....
    }

    @Override
    public boolean hasResolutions(IMarker marker) {
        return true;
    }
} 
```

我还制定了决议，一切正常。

当我向扩展点 org.eclipse.ui.ide.markerResolution 添加属性时，问题视图中的快速修复选项总是被禁用。

```
<extension
  point="org.eclipse.ui.ide.markerResolution">
    <markerResolutionGenerator
        class="com.priyank.visual.quickfix.MyResolutionGenerator"
        markerType="com.priyank.test.model_marker">
        <attribute
            name="test"
            value="testdata">
        </attribute>
</markerResolutionGenerator> 
```

没有任何异常抛出，但我无法弄清楚它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:46:17.503

我得到了解决方案。错误只是在我的最后。

添加的属性必须存在于标记中。标记 com.priyank.test.model_marker 不存在属性添加测试，因此来自 MarkerHelpRegistry 的 hasResolution 返回 false :)

# c++ - 这个奇数程序有什么问题？

> ID：14366517
> 
> 赞同：-3
> 
> 时间：2013-01-16T19:45:37.497
> 
> 标签：c++, c

我想知道一个数字是否是奇数。我想比较 LSB 而不是使用模数。

```
int main(int argc, char*argv[])
{
    if ( argc >1 ) {
        if ( atoi(argv[1]) & 0x1 == 1 ) 
            printf ("odd num \n");
    }
    return 0;
}

# ./odd 2
# ./odd 3
odd num 
# ./odd 22
# ./odd 23
# ./odd 33
odd num 
# ./odd 43
# ./odd 52
odd num 
# file odd
odd: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0x56f7eb1e7a35762bd8b786eefb5516a14549fc1f, not stripped 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:47:01.413

您将数字与数字表示混淆了。这个程序的输入是一个像“22”（十进制数字“2”重复两次）这样的数字的表示，而不是像二十二这样的数字（二十一之后的那个）。告诉编译器假装它是一个数字是行不通的。

```
 if ( *(unsigned int*)argv[1] & 0x1 == 1 ) 
```

因为`argv[1]`是指向字符串的指针，所以告诉编译器假装它是指向无符号整数的指针会给你带来垃圾。

您可能想要`atoi(argv[1])`，它将表示十进制形式的数字的字符串转换为它表示的数字。

# javascript - 如果用户尝试离开网页，如何提示用户未保存的更改

> ID：14366518
> 
> 赞同：1
> 
> 时间：2013-01-16T19:45:38.403
> 
> 标签：javascript, jquery, forms, events

> **可能重复：**
> [如何阻止页面在 JS 中卸载（导航）？](https://stackoverflow.com/questions/1299452/how-do-i-stop-a-page-from-unloading-navigating-away-in-js)
> [离开网页时提示用户未保存的更改](https://stackoverflow.com/questions/1299662/prompt-user-for-unsaved-changes-when-leaving-webpage)

我有一个我在dreamweaver 中设计的只包含文本字段的php 表单，它一次从我的数据库中检索一条记录。我在此页面上还有一个“更新记录”按钮，单击该按钮可使用对表单中的数据所做的任何更改来更新数据库记录。我希望如果用户以某种方式编辑表单数据并尝试在不单击“更新记录”按钮的情况下离开页面，系统会提示他们该页面包含未保存的更改，并且会要求他们验证是否要离开或不（如果可能的话，也许通过一些javasript）。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:13:30.610

[`onbeforeunload`](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)在导航实际开始之前触发，您可以使用一种相当独特的方法停止导航：只需返回您希望在对话框中显示的字符串，浏览器就会询问用户是否*真的*想离开页面。

如果不返回字符串，浏览器将继续正常导航。例如，您可以使用此行为仅在用户有未保存的更改时才显示提示。

```
window.onbeforeunload = function(e) {
    if (unsavedChanges) return 'Dialog text here.';
}; 
```

您只能通过返回字符串并让浏览器提示来停止导航。在和 中调用`alert`或`confirm`实际上是被禁止的，你无法真正停止导航。`onbeforeunload``onunload`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:06:25.150

将卸载方法与 jquery 的“on” api 一起使用。

```
 var flag = true; // set this var according to your use.
 $(window).on('beforeunload', function(){
     if(flag) {
        return "It looks like you have input you haven't submitted."
      }
 }); 
```

# java - 异常捕获：java.sql.SQLException：不正确的整数值：

> ID：14366519
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:45:39.870
> 
> 标签：java, mysql, sql

**错误：**

> 捕获的异常：java.sql.SQLException：不正确的整数值：'[Ljava.lang.String;@26fd19c6' for column 'dedId' at row 1 无法连接数据库

**程序**：

```
public void updateDeduction(int empId, String[] dedId, String dedName, String dedDate, String dedAmount) throws SQLException{
    stmt = conn.createStatement();
    String updateString="INSERT INTO deductions (empId,dedId,dedName,dedDate,dedAmount) VALUES (";
    updateString +="'"+empId+"', ";
    updateString +="'"+dedId+"', "; 
    updateString +="'"+dedName+"', ";
    updateString +="'"+dedAmount+"', ";
    updateString +="CURDATE())" ;
    stmt.executeUpdate(updateString); 
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:36:37.680

参数`dedid`是一个字符串*数组*。当你执行

```
updateString +="'"+dedId+"', "; 
```

它被转换为字符串`[Ljava.lang.String;@26fd19c6`。

您需要弄清楚要使用哪些数组元素。

正如其他人所评论的那样，通过像这样连接用户提供的文本来构建语句是通过[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)被黑客入侵的可靠方法。您应该使用`PreparedStatement`占位符，即

```
INSERT INTO deductions (empId,dedId,dedName,dedDate,dedAmount) VALUES (?,?,?,?,?) 
```

# ruby-on-rails-3 - Rake::TestTask 没有运行 minitest 文件

> ID：14366523
> 
> 赞同：3
> 
> 时间：2013-01-16T19:46:00.133
> 
> 标签：ruby-on-rails-3, rake-task, minitest

我正在为我的一个项目使用 minitest，但我似乎无法让 Rake TestTask 实际运行这些文件。

```
require 'rake'
require 'rake/testtask'

task :mytest do
  Rake::TestTask.new do |t|
    t.test_files = Dir.glob('test/model/*_test.rb')
    t.verbose = true
    puts t.inspect
    puts '-------------------------------------'
  end
end 
```

当我运行此任务时`rake mytest`，我得到以下输出：

```
projects@webdev-local:/home/projects/framework# rake mytest
#<Rake::TestTask:0x00000001775050 @name=:test, @libs=["lib"], @pattern=nil,  
@options=nil, @test_files=["test/model/page_model_test.rb", 
"test/model/widget_model_test.rb"], @verbose=true, @warning=false, @loader=:rake, 
@ruby_opts=[]>
------------------------------------- 
```

如您所见，该任务找到了文件，但它从未真正运行它们。我怎样才能让它运行这些文件？

使用 Rails 3.2.8 和 ruby​​ 1.9.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:17:20.287

因此，您可能需要检查两件事：

1) 确保您使用的是`minitest-rails`gem

它添加了许多我们想要和需要的测试运行器任务。

[https://github.com/blowmage/minitest-rails](https://github.com/blowmage/minitest-rails)

2) 你的`minitest_helper.rb`文件的内容 (a la `spec_helper.rb`)

你应该有一些你在所有测试中都需要的帮助文件。确保它看起来像这样：

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)

require "minitest/autorun"
require "minitest/rails"

class ActiveSupport::TestCase
  fixtures :all
end 
```

* * *

现在您已经完成了该设置，您可以按如下方式运行所有测试：

```
bundle exec rake test
bundle exec rake minitest # alias for test
bundle exec rake minitest:models

# ... etc ... 
```

# ruby-on-rails - RSpec：在每个上下文之后刷新表/销毁对象

> ID：14366524
> 
> 赞同：14
> 
> 时间：2013-01-16T19:46:08.607
> 
> 标签：ruby-on-rails, ruby, rspec, rspec2, rspec-rails

你如何删除你创建的对象（在数据库和内存中）

*   每次测试后
*   在每个上下文之后？（在上下文中，相互构建测试可能是有意义的）

有没有一种方法可以自动执行此操作？

我有以下问题：

每个测试都将条目保存到数据库中。然后下一个测试取决于这些条目。即使我想构建依赖于其他测试的测试，我也做不到，因为测试执行的顺序是不可控的。

工厂.rb：

```
sequence(:name) { |n| "purchaser #{n}" } 
```

组织规范.rb：

```
context "when no supplier exists" do
  it "finds no associated suppliers" do
    purchaser = create(:organization_purchaser)                
    purchaser.partners.empty?.should == true
  end
end

context "when one supplier exists" do
  it "finds one associated suppliers" do
    purchaser = create(:organization_purchaser)      
    supplier = create(:organization_supplier)
    partnership = create(:partnership, organization: purchaser, partner: supplier)         
    purchaser.partners.last.name.should == "purchaser 1"
  end
end

context "when two suppliers exist" do        
  it "finds two associated suppliers" do
    purchaser = create(:organization_purchaser)      
    2.times do |i|
      supplier = create(:organization_supplier)
      partnership = create(:partnership, organization: purchaser, partner: supplier) 
    end    
    purchaser.partners.last.name.should == "purchaser 2"
  end
end 
```

RSpec 输出：

```
Organization
  #suppliers_for_purchaser
    responds
    when no supplier exists
      finds no associated suppliers
    when two suppliers exist
      finds two associated suppliers
    when one supplier exists
      finds one associated suppliers (FAILED - 1)

Failures:

1) Organization#suppliers_for_purchaser when one supplier exists finds one associated suppliers
 Failure/Error: purchaser.partners.last.name.should == "purchaser 1"
   expected: "purchaser 1"
        got: "purchaser 3" (using ==) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T20:13:54.230

您应该使用[数据库清理器](https://github.com/bmabey/database_cleaner)

您所要做的就是将以下代码添加到您的 Rspec 配置文件中`spec_helper.rb`

```
config.before(:suite) do
  DatabaseCleaner.strategy = :transaction
  DatabaseCleaner.clean_with(:truncation)
end

config.before(:each) do
  DatabaseCleaner.start
end

config.after(:each) do
  DatabaseCleaner.clean
end 
```

**更新**

从 Rails 5.1 开始，如果您使用，则不需要`config.use_transactional_tests`

[https://github.com/rails/rails/pull/19282](https://github.com/rails/rails/pull/19282)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T19:51:21.833

您是否尝试添加 before 方法？

```
describe MyController do

before(:each) do
  User.delete_all
  MyOtherModel.delete_all
  ...
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T20:00:09.977

我认为您的问题更像是如何重置工厂女孩序列？那些没有存储在数据库中，即使你删除所有你仍然会遇到问题。在测试这样的东西时，我发现覆盖工厂女孩序列更容易..

```
it "finds one associated suppliers" do
    purchaser = create(:organization_purchaser)      
    supplier = create(:organization_supplier , name: "My First Supplier")
    partnership = create(:partnership, organization: purchaser, partner: supplier)         
    purchaser.partners.last.name.should == "My First Supplier"
  end 
```

你可能做的其他事情是

```
it "finds one associated suppliers" do
        purchaser = create(:organization_purchaser)      
        supplier = create(:organization_supplier)
        partnership = create(:partnership, organization: purchaser, partner: supplier)         
        purchaser.partners.last.should == supplier 
      end 
```

甚至

```
it "finds one associated suppliers" do
        purchaser = create(:organization_purchaser)      
        supplier = create(:organization_supplier)
        partnership = create(:partnership, organization: purchaser, partner: supplier)         
        purchaser.partners.last.name.should == supplier.name
      end 
```

# javascript - 为使用多个值单击的横幅配置 webtrends 报告

> ID：14366529
> 
> 赞同：0
> 
> 时间：2013-01-16T19:46:14.413
> 
> 标签：javascript, webtrends

如果你们能帮我配置管理部分，我将不胜感激。

单击横幅时，将调用以下函数

```
 dcsMultiTrack('DCSext.Carousel','Home','WT.ti','Home',
 'WT.pc','Banner;Position','WT.pn_sku',tempPC,'WT.tx_u',
 tempQuantity,'WT.tx_s',tempQuantity); 
```

如何设置报告以在三列报告中显示结果，显示轮播的位置、点击的横幅和横幅的位置？

我不想使用尺寸，因为它会产生一个向下钻取视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T21:19:31.093

首先，创建一个正在侦听自定义查询参数的维度。为简单起见：param1、param2、param3 - 每个参数都有一个维度。确保每个维度都在同一个组中 - 以便在下一步中轻松找到。

其次，为您为每个自定义参数创建的每个维度创建一个报告。

第三，创建自定义向下钻取维度。

第四，创建使用向下钻取维度的报表

那是管理方面，这里是帮助将参数发送到 webtrends 的代码。

```
$("#someBtn").bind("mousedown", function(){ 
```

使用 mousedown 侦听器来避免 Firefox 和 Webtrends 的已知问题。

```
var mT7 = setTimeout("myWebtrendsFunction()", 50); 
```

为什么要设置超时，因为 Firefox 有一个 Webtrends 的已知问题，当用户点击时可能会导致用户转到另一个页面。避免出现“NS_ERROR”“Aborted”问题。

```
var myWebtrendsFunction = function(){
tempZ[0] = $("#yourElem").val();
if($("#yourElem").val() == "Enter your zip code" || $("#yourElem").val() == "Enter your Zip code" || $("#yourElem").val() == "Enter Zip code" || $("#yourElem").val() == "Enter your Zip code" || $("#yourElem").val() == "Enter Zip code" || $("#yourElem").val() == ""){

}else{
    var wtArgs = ['WT.dcs_id', 'dcsidhere', 'DCSext.param1', varArray[varArray.length-2], 'DCSext.param2', varArray[varArray.length-1], 'DCSext.param3', tempZ[0]];
    dcsMultiTrack.apply(this, wtArgs);
} 
```

}

param1、param2、param3 是您在三个维度中创建的自定义查询参数。

希望对某人有所帮助，这是 webtrends 9

# resize - 使用 jedit 拆分窗格在一个系统上按比例调整大小，而不是在另一个系统上

> ID：14366530
> 
> 赞同：1
> 
> 时间：2013-01-16T19:46:28.323
> 
> 标签：resize, window, jedit

我在两个 Ubuntu 系统（12.4、10.4）上使用 JEdit，并且遇到垂直拆分窗口的问题。

当我调整整个 JEdit 窗口的大小时，两个并排拆分窗格在一个系统 (10.4) 上按比例调整大小，但在另一个系统上，左窗格保持固定大小，对整个窗口宽度的所有更改仅应用于右窗格.

两者都是 JEdit v 4.4.2，都只有插件：jdiff 和 buffertabs。

是否有打开权重或比例调整大小的设置？

谢谢！

更新：这似乎与 JDiff 插件有关。打开然后关闭 jdiff 'dual diff' 后，比例调整大小停止工作。JDiff 使面板设置为相同的大小；当您关闭双差异时，原始比例会恢复，但比例调整大小会被破坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T14:02:40.093

这确实似乎是 JDiff 插件中的一个错误，它更改了 SplitPane 的某些属性，并且如果之前已经存在拆分，则不会恢复它。也许它毕竟不应该更改该属性，而是使用相同的设置进行比例调整。您应该将此报告给插件错误跟踪器：[https](https://sourceforge.net/tracker/?func=browse&group_id=588&atid=565475) : //sourceforge.net/tracker/?func=browse&group_id=588&atid=565475 作为一种解决方法，您可以取消拆分并重新拆分窗口，然后再次正确设置 SplitPane。

# html - 两个带有 addthis 的推特关注按钮，一个额外的推特关注按钮

> ID：14366531
> 
> 赞同：0
> 
> 时间：2013-01-16T19:46:29.230
> 
> 标签：html, css, twitter, addthis

昨天，一个额外的 twitter 关注按钮开始出现在网站的 AddThis 部分，因此有两个相同的 twitter 关注按钮。AddThis 将按钮放入 JavaScript。这一定是一个 AddThis 或 Twitter 错误，因为在 html 的 addthis 部分中只有一个 twitter 链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:46:29.230

今天它似乎已经修复，但这可能在未来有用。我通过隐藏第二个 Twitter 关注按钮来修复它：

```
iframe.twitter-follow-button + iframe.twitter-follow-button { display: none; } 
```

# firebase - authClient 不工作

> ID：14366533
> 
> 赞同：0
> 
> 时间：2013-01-16T19:46:29.383
> 
> 标签：firebase

我无法让 FireFeed 或我自己的应用程序与 auth 一起使用，我遵循了此文档。我复制了规则并添加了密钥，给出了什么？示例： http: [//flx.me/firefeed/](http://flx.me/firefeed/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:45:13.190

使用 Firebase 简单登录 / authClient 功能时要检查的一种方法是您是否在帐户中配置了正确的应用程序域。您将用于托管您的应用程序并从中发出身份验证请求的任何域都应在 Forge 的“应用程序域”部分中进行配置（通过将您的 Firebase URL 放在浏览器中来获取此处）。对于您的应用程序，您的域应包括`flx.me`.

# magento - Magento 1.11.1 EE cli-install 崩溃 - 法师/报告重复安装脚本

> ID：14366541
> 
> 赞同：0
> 
> 时间：2013-01-16T19:46:40.340
> 
> 标签：magento

我正在尝试从命令行安装 Magento 1.11.1 EE。安装在某些时候崩溃并引发以下错误：

```
ERROR: Error in file: "/app/code/core/Mage/Reports/data/reports_setup/data-install-1.6.0.0.php"
A page URL key for specified store already exists. 
```

查看源代码，我发现有 3 个脚本在做同样的事情：

/app/code/core/Mage/Reports/sql/reports_setup/mysql4-install-0.7.1.php（初始脚本）/app/code/core/Mage/Reports/sql/reports_setup/mysql4-upgrade-0.7.0 -0.7.1.php (??? 基本上和上面做的一样，但是如果存在 DROP TABLE) **/app/code/core/Mage/Reports/data/reports_setup/data-install-1.6.0.0.php**

对此的解决方法是删除（当然是通过补丁）其中一个脚本（最好是最后一个），但我试图了解这是应该存在的东西还是只是一个愚蠢的错误。

如果您没有打开代码，您可以参考以下链接：http: [//www.magentodocs.org/1.7.0.2/d5/dde/_reports_2data_2reports__setup_2data-install-1_86_80_80_8php_source.php](http://www.magentodocs.org/1.7.0.2/d5/dde/_reports_2data_2reports__setup_2data-install-1_86_80_80_8php_source.php)

# django - Django登录随机停止工作

> ID：14366542
> 
> 赞同：2
> 
> 时间：2013-01-16T19:46:41.533
> 
> 标签：django, https, nginx, gevent, gunicorn

环境：

*   姜戈 1.42
*   Nginx
*   Gunicorn + gevent
*   HTTPS

会话存储是默认的

由于某些原因，登录在不同操作系统/浏览器上的某些客户端无故停止工作。Auth 正在通过，但重定向后 user.is_authenticated 再次为 False。我认为，这个问题与客户无关。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:07:36.627

听起来 Django 用户会话以某种方式搞砸了。尝试切换您的[会话引擎](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-SESSION_ENGINE)并确保您的会话引擎没有运行[虚拟缓存后端](https://docs.djangoproject.com/en/dev/topics/cache/#dummy-caching-for-development)。如果它正在运行缓存引擎，请确保您的缓存没有以某种方式重新启动/刷新。最后，尝试使用[cookie 会话后端](https://docs.djangoproject.com/en/dev/topics/http/sessions/#using-cookie-based-sessions)。

# list - 连接两个字符串以形成 TCL 中的文件名

> ID：14366549
> 
> 赞同：1
> 
> 时间：2013-01-16T19:47:04.237
> 
> 标签：list, join, tcl

我不能让它工作。

```
set dut xyz
set fname [join {$dut "-CE"} ""] 
```

但这有效：

```
set fname [join {xyz "-CE"} ""] 
```

我希望 fname 为“xyz-CE”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:55:11.787

尝试以下

```
set dut xyz
set fname ${dut}-CE 
```

正常的单词连接不需要`join`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:52:55.000

AS glenn 说大括号不支持变量替换，所以用这样的双引号将它分组

```
set dut xyz
set fname [join "$dut -CE" ""] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T08:52:38.727

尝试

```
set dut xyz
eval set fname [join {$dut "-CE"} ""] 
```

它给

```
xyz-CE 
```

# javascript - 将反向数组保存到javascript中的变量

> ID：14366556
> 
> 赞同：11
> 
> 时间：2013-01-16T19:47:14.080
> 
> 标签：javascript, arrays, reverse

我有一组颜色，我希望选择反转。我有一个切换功能，它基本上根据数组为元素着色。如果我抛出一个反向变量，那么它会反转，但它会反转全局变量而不是局部变量。

```
var inc_colors = ['#000','#333','#888']; //global inc_colors

function toggleLegendColors(reverse){
  var reverse = reverse || false;
  var colors = inc_colors; //local colors
  if(reverse) colors.reverse(); //reverses inc_colors array as well as colors
  ...
} 
```

如何在不更改全局数组的情况下获得反转的全局数组？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-01-25T17:16:17.957

您现在也可以使用 es6 扩展运算符来做到这一点：

```
let colors = [ ...inc_colors ].reverse() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-16T20:26:43.243

由于没有人真正解释您遇到问题的原因，因此我将其添加到混合中。

当您将 javascript 中的数组或对象分配给变量时，它会分配对该数组/对象的引用。它不会复制数组/对象。因此，您将拥有两个变量，它们都指向同一个数组/对象，并且修改任何一个都会影响另一个（因为它们都指向同一个底层数据）。

所以，当你有这个时：

```
var inc_colors = ['#000','#333','#888']; //global inc_colors
var colors = inc_colors; //local colors 
```

您现在所拥有的只是两个变量，它们都指向完全相同的数据。修改其中一个，相同的结果将通过另一个变量显示，因为它们指向相同的基础数据。

如果您想制作副本，则必须明确制作副本（javascript 不会自动为您完成）。对于数组，制作浅拷贝的最简单方法是这样的：

```
var newColors = Array.prototype.slice.call(inc_colors); 
```

因此，在您的确切代码中，您可以像这样应用该副本：

```
var inc_colors = ['#000','#333','#888']; //global inc_colors

function toggleLegendColors(reverse){
  var reverse = reverse || false;
  var colors = Array.prototype.slice.call(inc_colors);  //local copy of the colors array
  if(reverse) colors.reverse(); //reverses inc_colors array as well as colors
  ...
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-16T19:48:44.143

只需使用[`Array.slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)（安全方式）制作数组的副本：

```
var colors = Array.prototype.slice.call(inc_colors); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-07-03T21:18:49.207

您可能会考虑的干净简单的方法，但涉及创建数组的新实例是

```
var arr_reverse=arr.slice(0).reverse(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T20:00:45.733

简单的解决方案：

```
var inc_colors = ['#000','#333','#888']; //global inc_colors

function toggleLegendColors(reverse) {
  var colors = (inc_colors instanceof Array) ? inc_colors : [];
  colors = (!reverse) ? inc_colors.slice() : inc_colors.slice().reverse();
  // ...
} 
```

# java - 使用 Spring 配置添加额外的包以扫描到实体管理器？

> ID：14366558
> 
> 赞同：4
> 
> 时间：2013-01-16T19:47:17.433
> 
> 标签：java, spring, jpa, spring-batch, entitymanager

我有一个 Spring Batch 应用程序，它具有通常每个批处理作业都会引用的 Spring 上下文配置。这样每个批处理作业都使用相同的实体管理器。

批处理上下文.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:batch="http://www.springframework.org/schema/batch"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <!-- ... -->

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="myPersistenceUnit" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
        <property name="packagesToScan" value="com.example.domain" />
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
                <prop key="hibernate.cache.provider_class"> org.hibernate.cache.EhCacheProvider</prop>
                <prop key="hibernate.max_fetch_depth">3</prop>
                <prop key="hibernate.jdbc.fetch_size">100</prop>
                <prop key="hibernate.jbc.batch_size">1000</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.use_sql_comments">false</prop>
            </props>
        </property>
    </bean>

    <!-- ... -->

</beans> 
```

现在在我的特定批处理作业上下文（称为 ExampleBatch.xml）中，我想添加另一个包以扫描到已定义的 entityManagerFactory bean。这可能吗？

ExampleBatch.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:batch="http://www.springframework.org/schema/batch"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd">

    <!-- ... -->    

    <import resource="classpath:batch-context.xml" />

    <bean id="entityManagerFactoryWithExtraPackages"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        parent="entityManagerFactory">

        <!-- How do I override the packagesToScan property on the already defined entityManagerFactory bean?-->
        <property 
            name="packagesToScan" 
            value ="com.example.domain,com.example.domain.abstraction"
        />
    </bean>

    <!-- ... -->

</beans> 
```

我现在的方式行不通，因为它抱怨“ `No unique bean of type [javax.persistence.EntityManagerFactory] is defined: expected single bean but found 2`”

试图覆盖“packagesToScan”属性是在这种情况下采取的正确方法吗？有没有更好的方法来完成这种行为？

**编辑：**

我能够使用该功能完成我需要的`property-override`工作。下面是我使用的更新后的 ExampleBatch.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:batch="http://www.springframework.org/schema/batch"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd">

    <!-- ... -->    

    <import resource="classpath:batch-context.xml" />

    <context:property-override properties-ref="entityManagerOverride"/>

    <bean id="entityManagerOverride"
        class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="properties">
            <util:properties>
                <prop key="entityManagerFactory.packagesToScan">com.example.domain,com.example.batch.module.domain</prop>
            </util:properties>
        </property>
    </bean>

    <!-- ... -->

</beans> 
```

到目前为止，Spring 并没有对我大喊这是一个无效的配置。尚未确定这是否真的产生了预期的结果。

**编辑2：**

属性覆盖方法似乎不够用。这是一个有效的配置，但在运行时检查实体管理器后，如下所示：

```
for (EntityType<?> entity : manager.getMetamodel().getEntities()) {
    String name = entity.getName();
    System.out.println(name);
} 
```

它仅包含来自 com.example.domain 包的实体。

有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:19:39.297

你现在拥有它的方式，你真的定义了两个单独的 bean - 一个被调用`entityManagerFactory`，另一个被调用`entityManagerFactoryWithExtraPackages`。

有几种方法可以解决您的要求：

1.  只需摆脱其中一个 bean - 将定义合并为一个。我只是想这不是你的选择，否则你不会问。

2.  将其定义`entityManagerFactory`为抽象，然后无论如何您最终都会拥有一个 bean。

3.  使用属性覆盖机制。这适合您无法控制“顶级”bean 的场景，尽管您想要重新配置（字面上覆盖其属性的值）在那里定义的 bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-12T06:25:59.417

只需替换这个：

```
<property 
        name="packagesToScan" 
        value ="com.example.domain,com.example.domain.abstraction"/> 
```

有了这个：

```
<property name="packagesToScan">
     <array>
          <value>com.example.domain</value>
          <value>com.example.domain.abstraction</value>
     </array>
 </property> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:15:31.217

如果它适合您的包裹组织，您可以尝试

```
<property name="packagesToScan" value="com.example.domain.*" /> 
```

在您的 batch-context.xml 中，您的 ExampleBatch.xml 不再需要“覆盖”父级。

另一种挖掘方式是使用占位符；在 batch-context.xml 中，您将使用：

```
<property name="packagesToScan" value="${packageList}" /> 
```

而在 ExampleBatch.xml 中，您将使用适当的值声明占位符，如下所示：[http ://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/](http://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/)

# mysql - Sql Select into array - 列有分隔符

> ID：14366562
> 
> 赞同：0
> 
> 时间：2013-01-16T19:47:21.850
> 
> 标签：mysql

我的数据库中有一个包含以下数据的列（是的，我知道多个名称由一些随机字符分隔是错误的）

“约翰·库萨克 | 坦迪·牛顿 | 切瓦特尔·埃加福特”

我希望能够将这些人分成一个数组以供以后使用，甚至只是能够像下面这样显示它们会有所帮助

```
John Cusack
Thandie Newton
Chiwetel Ejiofor 
```

任何想法请提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:53:29.840

正如您所说，在 RDBMS 中存储分隔列表*确实*不是[一个好主意](https://stackoverflow.com/a/3653574)；但是，您可以使用 MySQL 的字符串操作函数[`SUBSTRING_INDEX()`](http://dev.mysql.com/doc/en/string-functions.html#function_substring-index)来获得所需的结果（MySQL 没有数组类型，所以我假设您只是想拆分数据）：

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(my_column, '|', 1), -1),
       SUBSTRING_INDEX(SUBSTRING_INDEX(my_column, '|', 2), -1),
       SUBSTRING_INDEX(SUBSTRING_INDEX(my_column, '|', 3), -1)
FROM   my_table 
```

请注意，实际上不需要为`SUBSTRING_INDEX()`列表的第一个和最后一个元素调用两次，但我认为这样做可以提供更多信息，以便更清楚地看到其他元素的模式。

如果您愿意，您*可以*构建一个存储过程，循环遍历字符串，使用每个找到的元素填充一个临时表——但这与“良好实践”相去甚远，几乎可以肯定不值得进一步深入研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:22:07.373

你可以试试这个。

```
 select substring_index(substring_index('a|b|c|h', '|',@r:=@r+1),'|',-1) zxz
from (select @r:=0) x,
(select 'x' xx union select 'v' xx union select 'z' xx  union select 'p' xx) z; 
```

结果看起来像

```
----
|zxz|
-----
|a   |
------
|b   |
------
|c   |
------
|h   |
------ 
```

位于此处：[Mysql](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html) 并稍作修改。

请记住：联合语句的“计数”必须与您的分隔符相同。

亲切的问候

# regex - Apache htaccess 重定向目录和一些内容

> ID：14366571
> 
> 赞同：0
> 
> 时间：2013-01-16T19:47:40.120
> 
> 标签：regex, apache, .htaccess, redirect

我目前正在尝试让 Apache 将对目录或其内容的任何请求重定向到单个文件。有问题的目录是`/press`. 这恰好包含网站上其他页面正在使用的多个图像。我想重定向`/press`并`/press/*`允许`/press-materials/`完成任何图像请求（例如/press/logo.png）。我尝试了一些解决方案并获得了重定向工作的一个方面，但它不符合其他标准。

当谈到 Apache 和 REGEX（我明知需要处理的东西）时，我是一个新手，所以这可能是一个简单的修复。

这是将 /press 重定向到 /press-materials 但 /press/filename 返回 404 错误的 htaccess 调用。

```
RewriteRule ^press/$ /press-materials/ [R,L] 
```

6小时后，这就是我所得到的。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:03:50.850

假设您希望允许对实际存在于`/press`（如`/press/logo.png`）中的文件的所有请求：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^press/.* /press-materials/ [R,L] 
```

只有在没有`/press`请求现有文件时才执行重写。

仅允许特定文件类型（例如，仅`*.jpg`, `*.png`, `*.gif`）并且仅当它们存在于`/press`目录中但不存在于子目录中时的另一种解决方案：

```
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_URI} !^/press/[^\/]+\.(png|jpg|gif)$
RewriteRule ^press/.* /press-materials/ [R,L] 
```

更多关于重写条件的信息可以在[这里](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)找到。

# ios - 为通用 iOS 应用创建视图控制器

> ID：14366573
> 
> 赞同：1
> 
> 时间：2013-01-16T19:47:49.073
> 
> 标签：ios, xcode, xib, ios-universal-app

**更新 0**

暂且不回答这个问题。

我想我已经找到了问题的一部分。

当我尝试将它创建的自动生成的 .xib 文件重命名`_`为 use时，XCode 再次中止`~`。Xcode 在中止时似乎至少破坏了一个 .xib 文件，并且该文件包含应用程序所需的最小视图或窗口对象。尽管丢失的 .xib 文件已从 Finder 中消失，但它仍显示在导航器中。

所以现在，我将不理会这些`_`文件，然后再试一次，但不要使用我之前得到的建议。

**更新 0**

按照此处的建议更改了以下代码，我的 xib 遇到了[问题。](https://stackoverflow.com/questions/14341605/) 我怀疑问题来自将 xib 名称更改为使用 '~' 而不是 '_' 并且无法修改引用 xib 名称的相应代码。

问题也可能是我有以下 4 个文件名，这可能会让 Xcode 感到困惑？

BSViewController.h/.m

BSViewController~iPhone.xib

BSViewController~iPad.xib

原始代码**是**.

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[BSViewController alloc] initWithNibName:@"BSViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[BSViewController alloc] initWithNibName:@"BSViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

修改后的代码（包括额外的）**是**.

```
#import "BSAppDelegate.h"

#import "BSViewController.h"
@implementation BSAppDelegate
@synthesize window;
@synthesize viewController;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[BSViewController alloc] initWithNibName:@"BSViewController" bundle:nil];
    [self.window addSubview:viewController.view];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

BSAppDelegate.h 紧随其后。

```
#import <UIKit/UIKit.h>

@class BSApp;
@class BSViewController;
@interface BSAppDelegate : NSObject <UIApplicationDelegate>{
    UIWindow *window;
    BSViewController *viewController;
}
@property (retain, nonatomic) IBOutlet UIWindow *window;
@property (retain, nonatomic) IBOutlet BSViewController *viewController;
@end 
```

BSViewController.h 紧随其后。

```
#import <UIKit/UIKit.h>

@interface BSViewController : UIViewController<UIImagePickerControllerDelegate, UINavigationControllerDelegate> {
    UIImage *workingImage;
    IBOutlet UIImageView *imageView;
}

@property (nonatomic, retain) UIImage *workingImage;
@property (nonatomic, retain) IBOutlet UIImageView *imageView;

+ (BOOL)isCameraDeviceAvailable;
- (IBAction) chooseImage:(id) sender;
- (IBAction) grayscale:(id) sender;

@end 
```

BSViewController.m 紧随其后。

```
#import "BSViewController.h"

@interface BSViewController ()

@end

@implementation BSViewController

@synthesize imageView;
@synthesize workingImage;

+(BOOL)isCameraDeviceAvailable
{
    BOOL isCameraAvailable=NO;
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        if([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront] )
            isCameraAvailable = YES;
    }
    return isCameraAvailable;
}

- (IBAction) chooseImage:(id) sender {
    [self.view addSubview: self.imageView];
    UIImage* testCard = [UIImage imageNamed:@"ipad 7D.JPG"];
    CGImageRef num = CGImageCreateWithImageInRect([testCard CGImage],CGRectMake(532, 0, 104, 104));
    UIGraphicsBeginImageContext(CGSizeMake( 250,650));
    CGContextRef con = UIGraphicsGetCurrentContext();
    CGContextDrawImage(con, CGRectMake(0, 0, 13, 13) ,num);
    UIImage* im = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    CGImageRelease(num);
}
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    self.workingImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    [imageView setImage:self.workingImage];
    [picker dismissViewControllerAnimated:YES completion:nil];
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.imageView = nil;
}
- (void)dealloc {
    [workingImage release];
    [imageView release];
    [super dealloc];
}

@end 
```

我正在使用 Xcode 4.5.2 并为 iOS 6 设计。

在我的`BSViewController~iPad.xib`中，我添加了一个“ViewController”对象，单击该对象会产生 2 个 Outlets：“searchDisplayController”和“view”。没有“视图”顶级对象；当我尝试将“+”拖到“文件所有者”时，我没有得到任何结果，可能也不应该得到结果。

在我的`BSViewController~iPhone.xib`我已经有一个“窗口”对象，不知道这是否好或需要添加到〜iPad.xib（但我不知道如何）。

# c++ - boost::range::join 用于多个范围

> ID：14366576
> 
> 赞同：16
> 
> 时间：2013-01-16T19:48:05.047
> 
> 标签：c++, boost, join, range

我想做以下事情：

```
std::vector<int> a = {1,2,3}, b = {4,5,6}, c = {7,8,9};

for(auto&& i : join(a,b,c)) {
  i += 1
  std::cout << i;  // -> 2345678910
} 
```

我尝试使用`boost::range::join`，这很好用：

```
auto r = boost::join(a,b);
for(auto&& i : boost::join(r,c)) {
  i += 1;
  std::cout << i;  // -> 2345678910
} 
```

链接连接，读取操作工作：

```
for(auto&& i : boost::join(boost::join(a,b),c))
  std::cout << i;  // -> 123456789 
```

但是，写作不起作用：

```
for(auto&& i : boost::join(boost::join(a,b),c)) {
  i += 1; // Fails  :(
  std::cout << i;  
} 
```

我的可变连接有同样的问题，即适用于阅读但不适用于写作：

```
template<class C> C&& join(C&& c) { return c; }

template<class C, class D, class... Args>
auto join(C&& c, D&& d, Args&&... args)
-> decltype(boost::join(boost::join(std::forward<C>(c), std::forward<D>(d)),
                     join(std::forward<Args>(args)...))) {
return boost::join(boost::join(std::forward<C>(c), std::forward<D>(d)),
                     join(std::forward<Args>(args)...));
} 
```

Mehrdad 在评论中给出了解决方案

```
template<class C>
auto join(C&& c)
-> decltype(boost::make_iterator_range(std::begin(c),std::end(c))) {
return boost::make_iterator_range(std::begin(c),std::end(c));
}

template<class C, class D, class... Args>
auto join(C&& c, D&& d, Args&&... args)
-> decltype(boost::join(boost::join(boost::make_iterator_range(std::begin(c),std::end(c)),
                                 boost::make_iterator_range(std::begin(d),std::end(d))),
                     join(std::forward<Args>(args)...))) {
  return boost::join(boost::join(boost::make_iterator_range(std::begin(c),std::end(c)),
                                 boost::make_iterator_range(std::begin(d),std::end(d))),
                     join(std::forward<Args>(args)...));
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T20:08:12.270

boost::join有[两个重载](http://www.boost.org/doc/libs/1_46_1/libs/range/doc/html/range/reference/utilities/join.html)

```
template<typename SinglePassRange1, typename SinglePassRange2>
joined_range<const SinglePassRange1, const SinglePassRange2>
join(const SinglePassRange1& rng1, const SinglePassRange2& rng2)

template<typename SinglePassRange1, typename SinglePassRange2>
joined_range<SinglePassRange1, SinglePassRange2>
join(SinglePassRange1& rng1, SinglePassRange2& rng2); 
```

当你这样做时

```
for(auto&& i : boost::join(boost::join(a,b), c)) {
           //  ^^^^        ^^^^ temporary here
           //   ||
           //  calls the const ref overload 
```

你得到一个临时的`joined_range`，因为它们只能绑定到 const 引用，所以选择了第一个重载，它返回一个不允许修改的范围。

如果您避免使用临时人员，则可以解决此问题：

```
#include <boost/range.hpp>
#include <boost/range/join.hpp>

int main()
{
    std::vector<int> a = {1,2,3}, b = {4,5,6}, c = {7,8,9};
    auto range = boost::join(a,b);

    for(int& i : boost::join(range,c)) {
        i += 1;
        std::cout << i;
    }
} 
```

[现场演示。](http://liveworkspace.org/code/2FmWe4%240)

我没有调查你的可变参数函数，但问题可能很相似。

# java - 正则表达式忽略不同行上两个字符之间的字符

> ID：14366577
> 
> 赞同：0
> 
> 时间：2013-01-16T19:48:17.717
> 
> 标签：java, .net, regex

嗨，我正在尝试获取一些值，跳过该行的其余值，然后获取下一行，但前提是它是某种模式。所以我的数据就像

```
($ Amount)Tj 1 0 0 1 18.4 369.8 Tm
 (12/30)Tj 1 0 0 1 84.7 369.8 Tm
 (CLUBZONE.COM TICKETS USA VANCOUVER BC)Tj 1 0 0 1 449.5 369.8 Tm
 (-165.00)Tj 1 0 0 1 18.4 356.8 Tm
 (01/05)Tj 1 0 0 1 84.7 356.8 Tm 
```

我想抓住`(12/30)(CLUBZONE.COM TICKETS USA VANCOUVER BC)(-165.00)`

我应该匹配日期，然后是换行符之前的所有内容，下一行的下一步？我现在想省略括号之外的东西我只有这个

```
[\(][0-1][1-9]/[1-3][0-9][\)] 
```

*请注意，数据在每个之后都以新行的形式出现`Tm`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:21:56.190

`(?<value>\(.*\))`符合你的例子。下面是对应的代码`C#`

```
private IList<string> GetValues(string input)
{
    const string pattern = @"(?<value>\(.*\))";
    var regex = new Regex(pattern);
    var values = new List<string>();

    foreach (Match match in regex.Matches(input))
    {
        values.Add(match.Groups["value"].Value.ToString());
    }

    return values;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:11:42.680

我在 RegexBuddy 中为 PCRE 构建了这个正则表达式，带有点匹配换行符：

```
^.*?(\(\d{1,2}/\d{1,2}\)).*?(\(.*?\)).*?(\(-?\d+\.\d{2}\)).*$ 
```

那么替换是：

```
$1$2$3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:15:27.813

```
(\([0-1][1-9]/[1-3][0-9]\))(?:Tj[\d\s\.]*Tm)\s*(\(.*\))(?:Tj[\d\s\.]*Tm)\s*(\([-\d\.]*\)) 
```

快速而肮脏，仅在 Visual REGEXP 中测试，但这应该得到你想要的，在匹配 1 到 3 中。

# c - 为什么要改变结构大小，改变可执行文件的大小？

> ID：14366582
> 
> 赞同：2
> 
> 时间：2013-01-16T19:48:39.113
> 
> 标签：c, linux, size, executable

我正在调试的非常奇怪的问题，目前不知所措，所以我想看看是否有人有任何想法/想法。

在我的代码库中的一个 char 驱动程序中有一个定义（这是 uCLinux 发行版中的许多驱动程序之一）：

```
#define MAX_BUFSIZE 500 
```

当我这样构建时，我会看到输出包大小：

```
-rw-rw-r-- 1 mike users 1720620 Jan 16 11:00 gcl-kernel.pkg 
```

当我将定义更改为 1000 并重建时：

```
#define MAX_BUFSIZE 1000

-rw-rw-r-- 1 mike users 2359596 Jan 16 11:17 gcl-kernel.pkg 
```

整体内核映像大大增加。那`#define`是***唯一***的变化。AFAIK，这应该在运行时改变了可执行文件的 RAM 大小，它不应该对可执行文件的大小做任何事情。

所以我的问题：

*谁能想到修改结构会改变最终图像大小的任何原因？*

* * *

如果您关心其他分析/信息：

我在头文件中定义的一个结构中跟踪了它的使用情况：

```
typedef struct {
    int head;
    int tail;
    int status;
    int active;
    void * dev[MAX_BUFSIZE];
    char free[MAX_BUFSIZE];
    canmsg_t data[MAX_BUFSIZE];
    int count;
} msg_fifo_t; 
```

每当我更改任何这些数组的大小时，可执行文件的大小都会发生变化。每当这种类型的新对象在代码中出现或被删除时，可执行文件的大小就会发生变化，例如：

```
extern msg_fifo_t Tx_Bufx[];
extern msg_fifo_t Rx_Buf[]; 
```

则具有不同的输出可执行文件大小：

```
extern msg_fifo_t Tx_Bufx[];
//extern msg_fifo_t Rx_Buf[]; 
```

我已经尝试过，但似乎无法在我的 x86 系统上创建此问题的较小版本来调试问题，它必须与环境有关。（为 uCLinux 2.4 内核构建冷火工具链）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:57:22.453

如果结构的“实例”已被声明为`static`，它将在二进制文件的[.BSS](http://en.wikipedia.org/wiki/.bss)段或[.DATA](http://en.wikipedia.org/wiki/Data_segment)段中分配，具体取决于它是否为 0 初始化。如果是这种情况，由于您将数组的大小加倍，这将增加最终的二进制大小。

# sql - 什么 SQL 查询会产生这些结果？

> ID：14366588
> 
> 赞同：1
> 
> 时间：2013-01-16T19:49:12.777
> 
> 标签：sql, sql-server-2008, tsql, pivot

鉴于此数据：

```
Name       Property   Value
---------- ---------- ----------
Bob        Hair       Red       
Bob        Eyes       Blue      
Fred       Hair       Brown     
Fred       Height     Tall 
```

产生这些结果需要什么 SQL？

```
Property   Bob        Fred
---------- ---------- ----------
Hair       Red        Brown     
Eyes       Blue             
Height                Tall 
```

我正在使用 SQL Server 2008，但一个通用的解决方案会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:59:35.423

您没有指定您正在使用什么 RDBMS，但这是一个*pivot*。您可以在所有数据库中使用聚合函数和`CASE`表达式：

```
select property,
  max(case when name='Bob' then value else '' end) Bob,
  max(case when name='Fred' then value else '' end) Fred
from yourtable
group by property 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/50ce5/3)

如果您使用的是具有`PIVOT`函数的数据库（SQL Server 2005+/Oracle 11g+），那么您的代码将类似于以下内容：

```
select *
from
(
  select property, name, value
  from yourtable
) src
pivot
(
  max(value)
  for name in (Bob, Fred)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/50ce5/5)

如果您提前知道名称值，则上述查询效果很好，但如果您不知道，那么您将需要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(name) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT property,' + @cols + ' from 
             (
                select property, name, value
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for name in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/50ce5/7)

这三个都将产生相同的结果：

```
| PROPERTY |  BOB |  FRED |
---------------------------
|     Eyes | Blue |       |
|     Hair |  Red | Brown |
|   Height |      |  Tall | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:53:25.720

这是老式的方法，当然假设每个 (Name, Property) 都是唯一的：

```
SELECT Properties.Property, Bob.Value, Fred.Value
FROM
(
SELECT DISTINCT Property
FROM myTable
) Properties
LEFT OUTER JOIN
(
SELECT Property, Value
FROM myTable
WHERE Name = 'Bob'
) Bob ON Properties.Property = Bob.Property
LEFT OUTER JOIN
(
SELECT Property, Value
FROM myTable
WHERE Name = 'Fred'
) Fred ON Properties.Property = Fred.Property 
```

当然，只有提前知道这些列，您才能这样做。如果您不这样做，您可以创建和执行动态 SQL，但这并非没有问题。

根据您的 RDBMS，您可以改用数据透视查询，这将简化语法（或者如果您有未知人数/姓名的人，则可以使用）

# f# - 柯里化和多重积分

> ID：14366591
> 
> 赞同：6
> 
> 时间：2013-01-16T19:49:20.430
> 
> 标签：f#, functional-programming, numerical-methods, currying

我有兴趣学习一种优雅的方法来使用函数式编程语言中的柯里化来对多个积分进行数值评估。我选择的语言是 F#。

如果我想`f(x,y,z)=8xyz`在区域上积分，`[0,1]x[0,1]x[0,1]`我首先写下微分形式的三重积分`8xyz dx dy dz`。在某种意义上，这是三个有序参数的函数： a `(float -> float -> float -> float)`。

`4xy dx dy`我取第一个积分，问题归结为on的二重积分`[0,1]x[0,1]`。从概念上讲，我们已经将函数柯里化为`(float -> float -> float)`.

在第二个积分之后，我需要在单位区间上取`2x dx`a的积分。`(float -> float)`

在三个积分之后，我得到了结果，数字`1.0`。

忽略数值积分的优化，我怎么能简洁地执行这个？我想写一些类似的东西：

```
let diffForm = (fun x y z -> 8 * x * y * z)

let result =
    diffForm
    |> Integrate 0.0 1.0
    |> Integrate 0.0 1.0
    |> Integrate 0.0 1.0 
```

如果可能不切实际，这是可行的吗？我喜欢这样的想法，即这将在数学上捕捉到正在发生的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:08:03.877

> 我喜欢这样的想法，即这将在数学上捕捉到正在发生的事情。

恐怕您的前提是错误的：管道运算符通过一系列函数将值线程化，并且与函数组合密切相关。*然而，在n*维域上积分类似于*n*嵌套循环，即在您的情况下类似于

```
for x in x_grid_nodes do
    for y in y_grid_nodes do
        for z in z_grid_nodes do
            integral <- integral + ... // details depend on integration scheme 
```

您无法轻松地将其映射到对某个`Integrate`函数的三个独立调用链，因此组合`integrate x1 x2 >> integrate y1 y2 >> integrate z1 z2`实际上*不是*您在集成时所做的`f`。这就是为什么 Tomas 的解决方案——如果我理解正确（我对此不确定......）——本质上是在隐式定义的 3D 网格上评估您的函数并将其传递给集成函数。我怀疑这与您最初的问题一样接近。

您没有要求，但如果您确实想在实践中评估*n*维积分，请查看 Monte Carlo 积分，它避免了另一个通常称为“维度诅咒”的问题，即所需的数量使用经典积分方案，样本点随*n呈指数增长。*

***更新***

您可以实现迭代集成，但不能使用单个`integrate`函数，因为要集成的函数的类型对于集成的每个步骤都不同（即每个步骤将*n*元函数转换为 ( *n* - 1) 元函数):

```
let f = fun x y z -> 8.0 * x * y * z

// numerically integrate f on [x1, x2]
let trapRule f x1 x2 = (x2 - x1) * (f x1 + f x2) / 2.0 

// uniform step size for simplicity
let h = 0.1

// integrate an unary function f on a given discrete grid
let integrate grid f =
    let mutable integral = 0.0
    for x1, x2 in Seq.zip grid (Seq.skip 1 grid) do
        integral <- integral + trapRule f x1 x2
    integral

// integrate a 3-ary function f with respect to its last argument
let integrate3 lower upper f =
    let grid = seq { lower .. h .. upper }
    fun x y -> integrate grid (f x y)

// integrate a 2-ary function f with respect to its last argument
let integrate2 lower upper f =
    let grid = seq { lower .. h .. upper }
    fun x -> integrate grid (f x)

// integrate an unary function f on [lower, upper]
let integrate1 lower upper f =
    integrate (seq { lower .. h .. upper }) f 
```

使用您的示例功能`f`

```
f |> integrate3 0.0 1.0 |> integrate2 0.0 1.0 |> integrate1 0.0 1.0 
```

产生 1.0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T00:56:26.343

我不完全确定您将如何以正常方式实现此功能，因此这可能无法完全解决问题，但这里有一些想法。

要进行数值积分，您将（我认为？）需要在管道中调用`diffForm`指定的各个点调用原始函数`Integrate`- 但实际上您需要在范围的乘积处调用它 - 所以如果我想要要仅在边界处调用它，我仍然需要调用 2x2x2 次以涵盖所有可能的组合（`diffForm 0 0 0`、`diffForm 0 0 1`等`diffForm 0 1 0`），然后对您获得的 8 个结果进行一些计算。

以下示例（至少）显示了如何编写类似的代码来调用具有您指定的参数值的所有组合的指定函数。

这个想法是使用可以多次调用的*延续（所以当我们得到一个函数时，我们可以在多个不同的点重复调用它）。*

```
// Our original function
let diffForm x y z = 8.0 * x * y * z

// At the first step, we just pass the function to a continuation 'k' (once)
let diffFormK k = k diffForm

// This function takes a function that returns function via a continuation
// (like diffFormK) and it fixes the first argument of the function
// to 'lo' and 'hi' and calls its own continuation with both options
let range lo hi func k = 
  // When called for the first time, 'f' will be your 'diffForm'
  // and here we call it twice with 'lo' and 'hi' and pass the 
  // two results (float -> float -> float) to the next in the pipeline
  func (fun f -> k (f lo)) 
  func (fun f -> k (f hi)) 

// At the end, we end up with a function that takes a continuation
// and it calls the continuation with all combinations of results
// (This is where you need to do something tricky to aggregate the results :-))
let integrate result =
  result (printfn "%f")

// Now, we pass our function to 'range' for every argument and
// then pass the result to 'integrate' which just prints all results
let result =
    diffFormK
    |> range 0.0 1.0
    |> range 0.0 1.0
    |> range 0.0 1.0
    |> integrate 
```

这可能很令人困惑（因为延续需要很长时间才能习惯），但也许您（或这里的其他人？）可以找到一种方法将第一次尝试变成真正的数值积分:-)

# python - wxpython：如何访问放置在 wx.Sizer 对象中的对象？

> ID：14366594
> 
> 赞同：2
> 
> 时间：2013-01-16T19:49:21.757
> 
> 标签：python, wxpython

在重构会话期间，我将很多 gui 代码放入了直接将数据插入 wx.Sizer 对象的小函数中。

例如，这个小功能：

```
def buildStatusDisplay(self, status_disp, flag):
    grid = wx.FlexGridSizer(cols=1, hgap=5, vgap=0)
    font = wx.Font(8, wx.DEFAULT, wx.NORMAL, wx.LIGHT, False, 'Segoe UI')
    for option in status_disp:
        left = wx.StaticText(self, -1, option)
        left.SetFont(font)
        grid.Add(left, 0, flag=flag)
    return grid 
```

因此，它使用一次性创建所有 StaticText 对象`left`，然后返回`FlexGrid`. 但是，我需要根据用户输入更新 StaticText 对象中的一些标签，但是，我不确定如何访问它们。

我已经遍历了从函数返回的 sizer，但是我没有看到任何与可以让我引用组成 sizer 的对象的方式相关的东西。

```
for i in dir(sizer):
    print i 

>>Add
>>AddF
>>AddGrowableCol
>>AddGrowableRow
>>AddItem
>>AddMany
>>AddSizer
>>AddSpacer
>>AddStretchSpacer
>>AddWindow
>>CalcMin
>>CalcRowsCols
>>Children
>>ClassName
>>Clear
>>ColWidths
>>Cols
>>ComputeFittingCli
>>ComputeFittingWin
>>ContainingWindow
>>DeleteWindows
>>Destroy
>>Detach
>>Fit
>>FitInside
>>FlexibleDirection
>>GetChildren
>>GetClassName
>>GetColWidths
>>GetCols
>>GetContainingWind
>>GetFlexibleDirect
>>GetHGap
>>GetItem
>>GetItemIndex
>>GetMinSize
>>GetMinSizeTuple
>>GetNonFlexibleGro
>>GetPosition
>>GetPositionTuple
>>GetRowHeights
>>GetRows
>>GetSize
>>GetSizeTuple
>>GetVGap
>>HGap
>>Hide
>>Insert
>>InsertF
>>InsertItem
>>InsertSizer
>>InsertSpacer
>>InsertStretchSpac
>>InsertWindow
>>IsSameAs
>>IsShown
>>Layout
>>MinSize
>>NonFlexibleGrowMo
>>Position
>>Prepend
>>PrependF
>>PrependItem
>>PrependSizer
>>PrependSpacer
>>PrependStretchSpa
>>PrependWindow
>>RecalcSizes
>>Remove
>>RemoveGrowableCol
>>RemoveGrowableRow
>>RemovePos
>>RemoveSizer
>>RemoveWindow
>>Replace
>>RowHeights
>>Rows
>>SetCols
>>SetContainingWind
>>SetDimension
>>SetFlexibleDirect
>>SetHGap
>>SetItemMinSize
>>SetMinSize
>>SetNonFlexibleGro
>>SetRows
>>SetSizeHints
>>SetVGap
>>SetVirtualSizeHin
>>Show
>>ShowItems
>>Size
>>VGap
>>_ReplaceItem
>>_ReplaceSizer
>>_ReplaceWin
>>_SetItemMinSize
>>__class__
>>__del__
>>__delattr__
>>__dict__
>>__doc__
>>__format__
>>__getattribute__
>>__hash__
>>__init__
>>__module__
>>__new__
>>__reduce__
>>__reduce_ex__
>>__repr__
>>__setattr__
>>__sizeof__
>>__str__
>>__subclasshook__
>>__swig_destroy__
>>__weakref__
>>_setOORInfo 
```

`GetChildren()`仅返回`SizerItems`似乎也不包含对基础对象的任何引用。

任何人都知道如何访问sizer内部的东西？我想我可以稍微扩展一下函数，然后返回对象列表以及大小调整器，或者简单地转储函数并将标识符保留给我需要在 main 中修改的对象……但是……我的 gui 代码已经够意大利面了。如果我能避免它，我愿意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:05:31.590

在 上`wx.SizerItem`，有一个`GetWindow`正是它给你的。用于`IsWindow`检查是否有可用的“窗口”。所有底层对象都继承自`wx.Window`，这就是您想要的。

这是一个例子，`obj`是一个`wx.Frame`对象：

```
>>> obj
<main.views.Main; proxy of <Swig Object of type 'wxFrame *' at 0x7fbaa1c70820> >
>>> obj.Sizer
<wx._core.BoxSizer; proxy of <Swig Object of type 'wxBoxSizer *' at 0x7fba9c9d48d0> >
>>> obj.Sizer.Children
wxSizerItemList: [<wx._core.SizerItem; proxy of <Swig Object of type 'wxSizerItem *' at 0x7fbaa1c21630> >, <wx._core.SizerItem; proxy of <Swig Object of type 'wxSizerItem *' at 0x7fbaa1c7faf0> >]
>>> obj.Sizer.Children[0]
<wx._core.SizerItem; proxy of <Swig Object of type 'wxSizerItem *' at 0x7fbaa1c21630> >
>>> obj.Sizer.Children[0].Window
<wx._windows.Panel; proxy of <Swig Object of type 'wxPanel *' at 0x7fba9c9d4d10> > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:56:09.330

几个月前我实际上回答了这样的问题：[wxPython: How to get sizer from wx.StaticText?](https://stackoverflow.com/questions/12031522/wxpython-how-to-get-sizer-from-wx-statictext)

基本上，您只需要执行以下操作：

```
children = self.sizer.GetChildren()

for child in children:
    widget = child.GetWindow()
    print widget
    if isinstance(widget, wx.TextCtrl):
        widget.Clear() 
```

在这种情况下，您可以看到我只是在检查 wx.TextCtrl，但您可以检查您喜欢的任何小部件。我还在我的[博客](http://www.blog.pythonlibrary.org/2012/08/24/wxpython-how-to-get-children-widgets-from-a-sizer/)上写了一篇关于这个主题的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-12T12:11:26.737

可能已经在其他一些地方引用过，但找不到它所以放在这里......

在子创建期间使用`name`参数还有另一种方法，即：

```
left = wx.StaticText(self, -1, option, name='StaticTextChild') 
```

然后可以直接引用/更改子项，而无需 Sizer 引用。

```
staticTextChild = wx.FindWindowByName('StaticTextChild')
staticTextChild.SetLabel('new label:') 
```

此方法在此示例中可能无法直接使用，因为您需要确保唯一的子名称才能访问它们。你会怎么做取决于你。

# installshield - InstallShield 2012 - 添加快捷方式到开始屏幕

> ID：14366596
> 
> 赞同：2
> 
> 时间：2013-01-16T19:49:26.417
> 
> 标签：installshield

我正在使用 InstallShield 2012 Pro，我想在 Windows 8 开始屏幕上为我的程序创建一个快捷方式。我应该把我的快捷方式放在哪里？

我将快捷方式放在“程序菜单”文件夹中，但它不起作用，这是我放置快捷方式的屏幕截图。 ![在此处输入图像描述](../Images/427d3fd2b138e6b0641a74ec67e8cb12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:22:39.913

之前出现在开始菜单中的任何地方（可能除了“启动”文件夹）都将被展平到 Windows 8 开始屏幕中。所以把你的快捷方式放在下面的某个地方`ProgramMenuFolder`，你就可以开始了。我建议仍然遵循通常的约定，以便它显示在`[ProgramMenuFolder]\Company Name\Program Name`带有开始菜单的机器上，因为即使您将程序限制为 Windows 8 及更高版本，也无法预测 Microsoft 下一步将采用哪种方式。

# asp.net-mvc - ModelState.IsValid 为 Ok 模型返回 false

> ID：14366597
> 
> 赞同：0
> 
> 时间：2013-01-16T19:49:35.090
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4

我正在使用这个 ViewModel：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using CardNumbers.Objects;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel;

using DataAnnotationsExtensions;
using System.ComponentModel.DataAnnotations.Schema;

namespace CardNumbers.Models
{
    public class ClientViewModel
    {
        public Client Client { get; set; }

        [Key]
        [Editable(false)]
        [Column("ClientId", TypeName = "int")]
        public virtual int? ClientId
        {
            get
            {
                if (Client == null)
                    return null;
                else
                    return Client.Id;
            }

            set { Client.Id = value ?? 0; }
        }
        [Required]
        [DisplayName("Client No")]
        [UIHint("Number")]
        [Column("client_no", TypeName = "smallint")]
        [Remote("doesClientNoExist", "Client", HttpMethod = "POST",
            AdditionalFields = "ClientId",
            ErrorMessage = "Client Number already exists. Please enter a different Client Number.")]
        public virtual Int16 Number
        {
            get
            {
                if (Client == null)
                    return 0;
                else
                    return Client.Number;
            }

            set { Client.Number = value; }
        }

        [Required]
        [Column("client_name", TypeName = "varchar")]
        [DisplayName("Client Name")]
        [MaxLength(30, ErrorMessage = "Client Name should not be longer than 30 characters")]
        [MinLength(3, ErrorMessage = "Client Name is too short")]
        [Remote("doesClientNameExist", "Client", HttpMethod = "POST", AdditionalFields = "ClientId",
            ErrorMessage = "Client Name already exists. Please enter a different Client Name.")]
        public virtual string Name
        {
            get
            {
                if (Client == null)
                    return "";
                else 
                    return Client.Name;            
            }

            set { Client.Name = value; }
        }

        public int id { get; set; }
    }
} 
```

我必须通过模型的公共属性公开两个客户端属性的原因是我正在尝试使用 RemoteValidator。无论如何，我输入了必填字段名称和编号，然后尝试保存模型，它返回 ModelState.IsValid false。我怎样才能看到有什么问题？我正在尝试使用 jquery 模态对话框，因此重新加载不是很简单。

提前致谢。

# sql - 基于属性解析具有多个同名元素的OpenXML

> ID：14366601
> 
> 赞同：0
> 
> 时间：2013-01-16T19:49:58.690
> 
> 标签：sql, openxml

与此[问题](https://stackoverflow.com/questions/8013036/parsing-openxml-with-multiple-elements-of-the-same-name)类似，但我需要根据特定属性进行解析。如何根据属性值只选择一个同名元素？

```
DECLARE @doc int
EXEC sp_xml_preparedocument @doc OUTPUT, N'
<rootnode>
  <group>
    <id>1</id>
     <anothernode lang="de">first string</anothernode>
     <anothernode lang="en">second string</anothernode>
  </group>
  <group>
    <id>1</id>
     <anothernode lang="en">I</anothernode>
     <anothernode lang="de">Ich</anothernode>
  </group>
</rootnode>'

SELECT *
FROM OPENXML (@doc, 'rootnode/group')
WITH
(
    id int 'id',
    anothernode  varchar(30) 'anothernode'
)

EXEC sp_xml_removedocument @doc 
```

结果是：

```
1   first string
2   Ich 
```

我需要：

```
1   second string
2   I 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:53:59.823

经过一些黑客攻击后，我发现通过执行以下 SELECT 可以得到正确的结果：

```
SELECT *
FROM OPENXML (@doc, 'rootnode/group')
WITH
(
    id int 'id',
    anothernode  varchar(30) 'anothernode[@lang="en"]'
) 
```

结果是：

```
1   second string
2   I 
```

主要区别是`[@lang="en"]`，它选择特定的属性值。

# widget - CodeMirror - addWidget 的用途是什么以及如何使用它？

> ID：14366604
> 
> 赞同：8
> 
> 时间：2013-01-16T19:50:04.713
> 
> 标签：widget, codemirror

我想对 CodeMirror 做一些扩展。addWidget 方法似乎是一个很有希望的起点。该文件指出

> addWidget(pos, node, scrollIntoView) 将节点（应该是绝对定位的 DOM 节点）放入编辑器，位于给定 {line, ch} 位置的正下方。当 scrollIntoView 为 true 时，编辑器将确保整个节点可见（如果可能）。要再次删除小部件，只需使用 DOM 方法（将其移动到其他地方，或在其父级上调用 removeChild）。

我真的不明白这意味着什么或我会用它做什么。我在 CodeMirror 代码库或谷歌的其他任何地方都找不到它的用法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:57:12.027

您需要传递一个 html 节点和一个位置以及一个布尔值

```
// create a node
var htmlNode =document.createElement("h1");
var text =  document.createTextNode("Text or whatever");
htmlNode.appendChild(text)

// call this after you initialized the editor.
// the position must be like this {ch: YourCharecterNumber, line: YourLineNumber}
editor.addWidget({ch:30 , line: 1},htmlNode, true) 
```

# java - 如何检查（在网站上）系统上是否安装了 Java（*不是*在浏览器中）

> ID：14366608
> 
> 赞同：0
> 
> 时间：2013-01-16T19:50:24.730
> 
> 标签：java, javascript, html, version

我有一个 Java 桌面应用程序和一个用户可以下载 .jar 文件的网站。

我想在网站上有一个按钮，用户可以单击该按钮来检查应用程序是否可以在他的计算机上运行（即他的系统上是否安装了正确版本的 Java）。

请注意，我不是要检查*浏览器中是否启用了*Java （就像 deployJava.js 会做的那样），而是检查它是否安装*在他的系统上*。

我的用户不是很精通技术，我希望尽可能简单。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:53:52.960

没有办法通过 JavaScript 做到这一点。更好的解决方案是使用系统特定的 jar 启动器来检查是否安装了 Java，然后安装/启动 java 程序或输出错误消息。

# android - Android WallpaperManager 将位图缩放得太小

> ID：14366609
> 
> 赞同：2
> 
> 时间：2013-01-16T19:50:27.833
> 
> 标签：android, bitmap, scale, center, wallpaper

WallpaperManager 在某些设备上将壁纸缩放得太小。我使用了以下代码。

```
 Bitmap srcBitmap = .....
    WallpaperManager wm = WallpaperManager
                .getInstance(getApplicationContext());
    int height = wm.getDesiredMinimumHeight();
    int width = wm.getDesiredMinimumWidth();
    wm.setBitmap(Bitmap.createScaledBitmap(srcBitmap, width , height , true); 
```

在带有 android 4.0.4 的 Galaxy Note 上，壁纸会填满全屏。但是在具有 2.3 的 Galaxy s2 上，壁纸仅填充屏幕中央的一个小矩形。

问候，

mp5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:39:58.230

问题是在某些设备`wm.getDesiredMinimumHeight();`上`wm.getDesiredMinimumWidth();`返回-1。所以`Bitmap.createScaledBitmap(srcBitmap, width , height , true);`失败了，使用了原来的大小`srcBitmap`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T20:44:14.683

这将适合您的位图宽度和高度的屏幕

```
 WallpaperManager wallmanage = (WallpaperManager) getSystemService(WALLPAPER_SERVICE);
wallmanager.setBitmap(bitmap);
wallmanager.suggestDesiredDimensions(w, h);

where w = bitmap.getWidth();  
and   h = bitmap.getHeight(); 
```

# sql - ForeignKey null=True 时 Django 慢查询

> ID：14366612
> 
> 赞同：5
> 
> 时间：2013-01-16T19:50:39.683
> 
> 标签：sql, django, postgresql, foreign-keys

我在我的 Django 模型中设置`null=True`了一个`ForeignKey`字段，现在当我查询该模型时，它慢了大约 10 倍。（我正在使用`select_related()`）

在更改前后查看我的 Postgres 日志可以找到原因的线索：

*   **在**设置之前`null=True`，生成的 SQL 是带有几个内部连接的单个 select 语句。
*   **设置**后**`null=True`，生成的 SQL 会忽略其中一个连接，而后跟数千个相同的 select 语句。**

 **所以这是经典的**n+1**查询问题，[在解决此](https://code.djangoproject.com/ticket/3665)问题之前，如何`null=True`在`ForeignKey`不影响性能的情况下设置字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:00:02.077

您可以通过[原始查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)来解决这个问题。查看在通过查询而不是使用“顶级 django ORM”放置`null=True`和执行之前生成的查询。`raw`故障是由于 ORM 不是 Postgres 服务器，因此您可以避免直接运行 SQL 代码的无用代码生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T14:41:47.187

从官方文档来看，就是`select_related()`方法的限制，[这里是详细的](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#prefetch-related)。

但是您可以在 中指定相关字段`select_relate()`，例如

```
modelA.objects.select_related('ModelAForeignKeyName__RelatedModelFeildName') 
```**

# android - 使用蓝牙启动应用程序

> ID：14366613
> 
> 赞同：0
> 
> 时间：2013-01-16T19:50:50.563
> 
> 标签：android, bluetooth

我正在开发一个 android 应用程序，该应用程序需要能够在收到另一部手机的蓝牙消息后在一部手机上切换设置。我需要知道如何制作，以便在收到消息时打开我的应用程序以处理请求。与 nfc 标签的工作方式类似，您可以使用它启动应用程序，然后读取标签上的数据。我需要能够启动我的应用程序，然后读取蓝牙消息中的数据。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:58:51.757

该消息无法直接启动应用程序，您必须设计一个后台服务来监听蓝牙消息并触发应用程序。

此外，您可以在启动时使用广播接收器启动此服务

# jakarta-ee - Java EE 中的@Cacheable

> ID：14366614
> 
> 赞同：3
> 
> 时间：2013-01-16T19:50:55.830
> 
> 标签：jakarta-ee, caching, interceptor

Spring 框架有一个非常好的`@Cacheable`注解。`@Interceptors`有没有办法通过使用ehCache在 Java EE 应用程序中重现此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:44:20.243

有 JSR-107，标准化 Java 缓存 API。这计划包含在 Java EE 7 中，但根据最新公告将不会及时发布。

无论如何，我在 2012 年 12 月尝试了[参考实现](https://github.com/jsr107)，在应用了两个小的拉取请求并在本地构建它之后，它对我来说运行良好。不过，我没有尝试使用 ehCache。

有一些注释适用于 CDI。

# php - 开源购物车/结帐系统，如 FoxyCart

> ID：14366616
> 
> 赞同：1
> 
> 时间：2013-01-16T19:50:58.947
> 
> 标签：php, web, e-commerce, shopping-cart

我正在寻找像 FoxyCart 这样的开源购物车结账系统。这里的想法是我正在寻找购物车和结帐，而*不是*带有 CMS 的购物车。我有自己喜欢的 CMS，我不希望我的产品由我的购物车管理。

我对任何编程语言都持开放态度。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T11:48:32.540

到目前为止，还没有任何独立的 Cart + Checkout 开源系统可以解决 FoxyCart 的要求。

您将不得不围绕现有的电子商务平台或 DIY 寻找工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T22:06:20.553

虽然不是开源[的 Moltin](https://molt.in)可能值得研究，但您可以使用您需要的任何组件。但是，它需要一些额外的工作来与您的 CMS 和前端集成。

# mysql - InnoDB 独特的约束减慢插入速度

> ID：14366618
> 
> 赞同：1
> 
> 时间：2013-01-16T19:51:07.220
> 
> 标签：mysql, performance, insert, innodb, unique-constraint

嘿伙计们，所以我一直在努力解决我的 Innodb 中的一个问题。我正在设计的数据库是为容纳 .com 和 .net 下列出的所有域而构建的。我从文件中读取这些内容，然后每周将它们输入数据库。你可以猜到会有很多记录。我现在计算了接近 1.06 亿个 .com 和 1400 万个 .net（估计），为了防止域的重复记录，我在域名列和第二个 TLDid 上设置了唯一约束。当我每周进行更新时，插入需要 5-6 天。在没有数据的初始构建中，我获得了常规的插入速度，直到我以 2500 万开始插入，然后它才真正开始变慢。

我改变了我的 innodb_buffer_pool_size=6000M 没有太大的变化。在大约 3 小时开始变慢之前，我能够插入多达 4500 万次。

我已经阅读了很多性能文章并更改了更多设置：

innodb_thread_concurrency=18

innodb_lock_wait_timeout = 50

innodb_file_per_table = 1

innodb_read_io_threads=3000（默认为 64）

innodb_write_io_threads=7000（默认为 64）

innodb_io_capacity=10000

innodb_flush_log_at_trx_commit = 2

我的插入速度仍然很慢：

表格如下所示：

```
 -- Dumping structure for table domains.domains
    CREATE TABLE IF NOT EXISTS `domains` (
      `DomainID` bigint(19) unsigned NOT NULL AUTO_INCREMENT,
      `DomainName` varchar(100) DEFAULT NULL,
      `TLDid` int(5) unsigned DEFAULT '1',
      `FirstSeen` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
      `LastUpdated` timestamp NULL DEFAULT NULL,
      PRIMARY KEY (`DomainID`),
      UNIQUE KEY `UNIQUE DOMAIN INDEX` (`TLDid`,`DomainName`),
      KEY `TIMESTAMP INDEX` (`LastUpdated`,`FirstSeen`),
      KEY `TLD INDEX` (`TLDid`),
      KEY `DOMAIN NAME INDEX` (`DomainName`)
    ) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

TLDid 是 1 或 2，但它表示域的扩展，例如“Test.com”将存储为 DomainName：Test TLDid 1。“Test.net”将存储为 DomainName：Test TLDid：2。

我的问题是如何优化这个表，它有 1.3 亿条记录和 2 个需要在插入之前检查的唯一约束的记录，这样它就不会减慢表的速度，需要 14 天才能更新新记录和当前记录？

多谢你们

# iphone - ios 6 如何在本地添加 facebook like 按钮？

> ID：14366625
> 
> 赞同：1
> 
> 时间：2013-01-16T19:51:35.317
> 
> 标签：iphone, ios, facebook, ipad, facebook-like

你们中的任何人都知道如何在 iOS 应用程序中原生地实现 facebook 吗？我想实现像 normla IUbutton 这样的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T07:46:11.320

最近FB通过他们的SDK打开了这个

看一下这个

[https://developers.facebook.com/docs/ios/like-button/](https://developers.facebook.com/docs/ios/like-button/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:00:17.887

您可能会发现这很有用。前几天我正在寻找它，但还没有机会实施。

[http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

简而言之，我不相信有办法使用本机 UIbutton 来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:27:57.863

目前无法在本地执行此操作。最快的方法是加载一个 web 视图，然后导航到您想要的页面。

# php - 无需 Try and Catch 即可获取 PDO 错误

> ID：14366628
> 
> 赞同：0
> 
> 时间：2013-01-16T19:51:55.203
> 
> 标签：php, mysql, pdo, try-catch

希望我能以一种有意义的方式说这句话。

我正在学习 PDO，我想在 footer.php 文件中编写某种代码来检查页面中的 PDO 错误。

换句话说，我想将错误模式设置为 ERRMODE_SILENT 并在页面末尾获取所有 PDO 错误，而无需将 try 和 catch 添加到每个查询中。

我不确定这是否可能，也不确定如何谷歌搜索。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:54:40.700

关于错误报告你需要知道的 3 件事

1.  大多数时候错误对应用程序来说是致命的，继续下去是没有用的。
    在这种情况下，没有要执行的页面或页面底部，而是要显示一个通用的 503 错误页面。
    要以这种方式处理错误 - 只需将一个应用程序范围的 try-catch 块放在脚本的最顶部和最底部，并设置适当的异常处理程序。
2.  有些错误不是致命的。要捕获这些，您必须将不那么重要的代码包装到本地 try-catch 中，捕获错误然后继续执行。
3.  而不是页面底部，您必须在*错误日志*中收集所有错误 为此设置适当的错误处理程序

# android - 构建 Android ndk 时出现此错误

> ID：14366630
> 
> 赞同：0
> 
> 时间：2013-01-16T19:52:06.373
> 
> 标签：android, android-ndk

```
jni/../external/libjpeg/jidctfst.S: Assembler messages:
jni/../external/libjpeg/jidctfst.S:66: Error: missing ')'
jni/../external/libjpeg/jidctfst.S:66: Error: garbage following instruction -- 'pld (r2,#0)'
jni/../external/libjpeg/jidctfst.S:259: Error: missing ')'
jni/../external/libjpeg/jidctfst.S:259: Error: garbage following instruction -- 'pld (sp,#32)'
jni/../external/libjpeg/jidctfst.S:271: Error: missing ')'
jni/../external/libjpeg/jidctfst.S:271: Error: garbage following instruction -- 'pld (ip,#32)'
make: *** [obj/local/armeabi/objs/jpeg/jidctfst.o] Error 1 
```

谁能帮我解决这个错误消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T05:49:33.500

尝试将 PLD 指令后面的括号更改为括号。也就是改变

```
PLD (xx xx) 
```

至

```
PLD [xx xx] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T18:40:42.503

取消注释Android.mk的ANDROID_JPEG_NO_ASSEMBLER行，是这样的：

```
# temp fix until we understand why this broke cnn.com
#ANDROID_JPEG_NO_ASSEMBLER := true 
```

去做：

```
# temp fix until we understand why this broke cnn.com
ANDROID_JPEG_NO_ASSEMBLER := true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:33:02.290

尝试使用 Cygwin 在 Windows 上编译 Android 很痛苦。按照 XDA-Developers.com 上的指南在 Ubuntu Linux 下编译 android，就像在 Windows Cygwin 环境中一样简单，并且运行良好:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T20:33:14.510

我有同样的错误，一些解决方案说将 PLD 从 UPPERCASE 更改为小写，例如从`"PLD"`to `"pld"`。

# javascript - 仅在最后一行询问删除确认

> ID：14366631
> 
> 赞同：0
> 
> 时间：2013-01-16T19:52:13.477
> 
> 标签：javascript, jsf, facelets, delete-row

在我的 JSF 应用程序中，我必须从员工表中删除包含其他详细信息的行。我可以删除视图中的行，但我只想在最后一行删除时有一个删除确认对话框。

我已经使用 JavaScript 实现了它，但是每次删除都会弹出它。

现在，我只想要最后一行，我可以通过托管 bean 检查它是否是最后一行，但是如何在视图中实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:17:30.617

在您的托管 bean 类中删除逻辑检查表大小之前。

```
 if(table.size == 1){
    popup = true;
   } 
```

编写另一个在单击弹出窗口确定按钮时将调用的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:02:46.030

您可以使用[`rows`](https://developer.mozilla.org/en-US/docs/DOM/table.rows)HTML DOM`<table>`元素的属性将所有行作为一个数组获取，您可以在该数组上调用该`length`属性以了解长度。

所以，总而言之，这应该做：

```
<h:form id="form">
    <h:dataTable id="table" ...>
        <h:column>
            <h:commandButton value="delete" ...
                onclick="if (document.getElementById('form:table').rows.length == 1) return confirm('Are you sure?')" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:34:49.487

如果您在视图中显示表格，您可以使用您的`js`来检查当您单击删除按钮或删除时表格中是否只有 1 行。

为此，您需要您的 html 元素具有有意义的名称，您可以在 jsf 中通过使用`id`视图中的属性来实现这一点。然后，您可以找到该表`$(#table-id)`并查看它有多少行。

# apache - 修改 apache web 服务器的流程

> ID：14366633
> 
> 赞同：1
> 
> 时间：2013-01-16T19:52:18.713
> 
> 标签：apache, gstreamer

我正在使用`gstreamer`. 为此，我将多媒体文件（ogg、mp4）存储在我的 apache htdocs 目录中。然后我可以`gstreamer`使用以下管道命令对它们进行解码：

```
gst-launch souphttpsrc location=http://localhost/data/ ! oggdemux ! vorbisdec ! audioconverter ! autoaudiosink 
```

为了模拟重负载网络连接中包的丢失。如果可以配置`Apache`Web 服务器的流量以删除一些特定的 paquets（例如来自 ogg 或 mp4）或减慢流量，我会感到很困惑？

我需要做什么才能存档。

我正在使用`Apache 2`安装在`xampp`.

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:19:34.317

[最后它在这里](https://stackoverflow.com/questions/614795/simulate-delayed-and-dropped-packets-on-linux)得到了另一个问题的答案。执行此操作的不是 Web 服务器，而是系统，在我的情况下，Linux 将使用命令执行此操作`tc`

```
sudo tc qdisc change dev eth0 root netem loss 0.1%| 
```

例如

# android - 带有标签和菜单项的 Android 应用

> ID：14366639
> 
> 赞同：0
> 
> 时间：2013-01-16T19:52:51.163
> 
> 标签：android, menu, tabs, android-actionbar, android-tabs

我正在尝试实现具有特定视图的应用程序。它需要在顶部有一个水平栏，其中包含应用程序图标以及其他按钮和微调器。这些项目必须是静态的，并且应该出现在应用程序的每个页面上。该水平条下方将是一个选项卡式组件，选项卡在页面底部是水平的。我还可以使用 Tabbed 组件顶部的选项卡来实现所需的行为。每个选项卡显然会更改选项卡框架内显示的片段。

我正在开发一个使用 ActionBar 和菜单选项的实现。但是，我无法让菜单选项（我的按钮和微调器）显示在选项卡上方。而且我不确定菜单选项是否是正确的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:30:44.440

傻我！答案就在那里。我只需要重新打开标题栏（只有没有标题），菜单选项就会出现在标题栏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:36:49.417

请记住，此功能在很大程度上取决于您拥有的 android 版本和设备型号。

较旧的手机有一个菜单按钮，它会显示相同的菜单，就像一些现代手机（如 Galaxy SIII）一样，因此，请务必在任何地方进行测试，以便了解最终用户的实际体验。

# c# - 将文件保存在临时目录中是否被认为是好的/可接受的做法？

> ID：14366646
> 
> 赞同：4
> 
> 时间：2013-01-16T19:53:07.137
> 
> 标签：c#, file-io, filesystems, isolatedstorage

我正在使用 C# 3.5 开发一个 WinForms 应用程序。我需要临时保存文件。我们只是说，为了争论，这是在用户查看应用程序上的特定选项卡时的一小段时间。用户离开选项卡后，我可以自由删除此文件。每次用户导航到选项卡（通常只进行一次）时，都会创建文件（使用 GUID 名称）。

回答我的问题 - 将文件保存到临时目录是否被认为是一种好习惯？我将使用以下逻辑：

```
Path.GetTempFileName(); 
```

我的意图是创建文件并保留它而不删除它。我在这里假设 Windows 操作系统会根据剩余可用空间的百分比每隔一段时间清理临时目录。

**注意：**我曾考虑使用*IsolatedStorage*选项来创建文件并在我完成使用它时手动删除文件，即当用户离开选项卡时。但是，它并不顺利，因为我需要获取文件的绝对或相对路径，并且在与隔离存储交互时这似乎不是一个直接/安全的家务活。我的观点是，它的设计初衷就是不允许这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:59:01.777

我经常写临时文件。在我谦虚的观点中，关键是通过删除不需要的临时文件来清理自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:14:49.750

在我看来，当您不需要临时文件时，实际删除它们是一种更好的做法。考虑[Path.GetTempFileName() 方法](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)中的以下注释：

> 如果 GetTempFileName 方法用于创建超过 65535 个文件而不删除以前的临时文件，它将引发 IOException。
> 
> 如果没有唯一的临时文件名可用，GetTempFileName 方法将引发 IOException。要解决此错误，请删除所有不需要的临时文件。

此外，您应该注意以下适用于 Windows 7 和 Windows Server 2008 R2的[修补程序。](http://support.microsoft.com/kb/982613/en-us?wa=wsignin1.0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T20:07:13.150

在临时目录中创建临时文件很好。使用完毕后清理任何临时文件被认为是一种很好的做法。

请记住，临时文件不应长期保存您需要的任何数据（定义为跨用户会话）。“长期”需要的数据示例是用户设置或保存的数据文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:11:20.133

继续并保存在那里，但完成后清理（关闭程序）。将它们保留到最后也允许重复使用。

# javascript - 如何使用 jQuery 临时禁用导航链接

> ID：14366647
> 
> 赞同：0
> 
> 时间：2013-01-16T19:53:09.383
> 
> 标签：javascript, jquery, navigation, click

我还在学习一些关于 javascript/jquery 的知识并遇到了困难。我发布的每一篇文章似乎都使这个过程过于复杂，除非它确实需要所有额外的代码。

这就是我正在做的事情：

*   使用滑动菜单和静态子菜单创建垂直导航菜单
*   使用带有 DL、DT 和 DD 的 HTML (5) 布局
*   导航菜单使用次要 CSS 进行样式设置
*   导航菜单使用 jQuery (1.8.3)

我的一切都按我想要的方式工作，但是因为我很挑剔，所以我想在展开菜单后暂时禁用链接。如果我尝试单击已展开的菜单，它会向上滑动然后再向下滑动。我想做的是让它在它已经展开的情况下不会对点击做出反应。

导航菜单的 HTML：

```
<dl class="nav2">
  <dt><a href="#">Thing1</a></dt>
    <dd>
        <ul>
            <li><a href="#">Test Def1</a></li>
            <li><a href="#">Test Def2</a><li>
            <li><a href="#">Test Def3</a></li>
        </ul>
    </dd>
  <dt><a href="#">Thing2</a></dt>
    <dd>
        <ul>
            <li><a href="#">Test Def4</a></li>
            <li><a href="#">Test Def5</a><li>
            <li><a href="#">Test Def6</a></li>
        </ul>
    </dd>
  <dt><a href="#">Thing3</a></dt>
    <dd>
        <ul>
            <li><a href="#">Test Def7</a></li>
            <li><a href="#">Test Def8</a><li>
            <li><a href="#">Test Def9</a></li>
        </ul>
    </dd>
</dl> 
```

导航菜单的 jQuery：

```
$(document).ready(function() {
  $("dd:not(:first)").hide();
  $("dt a").click(function() {
    /* was thinking the added code would go here, but I could be wrong */
    $("dd:visible").slideUp("fast");
    $(this).parent().next().slideDown("fast");
    return false;
  });
}); 
```

我用 bind 和 one 尝试了一些东西，但是由于我对编写 js/jquery 的困惑，我没有找到我的窍门。有没有可能这样说：

```
$(this:active).unbind("click"); 
```

或者

```
if ($(this).active(function() {
  $(this).unbind("click");
} else {
  $(this).bind("click");
)}; 
```

我知道我可能很遥远，但我正在努力。有什么方法可以将其更改为 javascript/jQuery 吗？

```
When the DT A is clicked -
  make THIS DT / DT A not clickable;
  When THIS DT / DT A is no longer expanded or visible -
  make THIS DT / DT A clickable; 
```

感谢高峰。对不起，如果这是在某个地方发现的。我遇到的每篇文章都开始将这个微小的变化扩展为几行代码，无论是攻击 CSS，还是比似乎需要的 javascript/jQuery 更长，或者两者兼而有之。我只是真的想尽量保持它的包含和简单（如果可能的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:09:50.227

您不想禁用单击（通过禁用锚点或取消绑定事件）。当前选择单击的元素时，您不希望执行操作。这样做：

```
$(document).ready(function() {
    var active = $("dd:first");
    $("dd").not(active).hide();
    $("dt a").click(function() {
        var dd = $(this).parent().next();
        if (! dd.is(active)) {
            active.slideUp("fast");
            active = dd.slideDown("fast");
        }
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:18:29.503

您可以向已单击的链接添加一个临时类，然后在事件触发的任何操作完成后将其删除。每次单击链接时使用 hasClass 测试该类，如果是，则不执行任何操作，如果不执行，则执行某些操作。我在这里回答了一个类似的问题：

[暂时禁止 jQuery 事件处理](https://stackoverflow.com/questions/1809275/suppress-jquery-event-handling-temporarily/10722988#10722988)

以下是它如何与您的代码一起使用（我相信，虽然可能需要修改以满足您的需要）：

```
$(document).ready(function() {
  $("dd:not(:first)").hide();
  $("dt a").click(function(e) {

    // Prevent link from doing default action
    e.preventDefault();

    if ($(this).hasClass('fired') == false) {

        // Add 'fired' class to disable link
        $(this).addClass('fired');

        // Do some stuff
        $("dd:visible").slideUp("fast");
        $(this).parent().next().slideDown("fast");

        // Remove 'fired' class to re-enable the link
        // You may need to do this in a call back function
        // If you are animating something
        $(this).removeClass('fired');

    }

    // Use preventDefault instead of this
    /*return false;*/
  });
}); 
```

# youtube - 如何从 YouTube 获取频道 ID？

> ID：14366648
> 
> 赞同：121
> 
> 时间：2013-01-16T19:53:10.197
> 
> 标签：youtube, youtube-api

我正在尝试使用**YouTube Data API V3**从我的频道中检索数据。
为此，我需要我的频道 ID。
我试图从我的 YouTube 帐户中找到我的频道 ID，但都失败了。
如果有人给我一个小费，我会非常高兴。

**这是我用来检索数据的 URL：**

> [https://www.googleapis.com/youtube/v3/channels](https://www.googleapis.com/youtube/v3/channels)？**id** =fjTOrCPnAblTngWAzpnlMA& **key** ={YOUR_API_KEY}&part=snippet,contentDetails,statistics

**ID**用于通道 ID，而key**则**用我的 Google API 控制台生成的 API KEY 替换 {YOUR_API_KEY}。

**我的频道 ID 不是：**
- klauskkpm
- klausmachado
- klausmachado@gmail.com
- fjTOrCPnAblTngWAzpnlMA

我的频道是：[http ://www.youtube.com/user/klauskkpm](http://www.youtube.com/user/klauskkpm)

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-05-01T20:52:43.840

要获取频道 ID，您可以查看频道页面的源代码并找到`data-channel-external-id="UCjXfkj5iapKHJrhYfAF9ZGg"`或`"externalId":"UCjXfkj5iapKHJrhYfAF9ZGg"`。

`UCjXfkj5iapKHJrhYfAF9ZGg`将是您要查找的频道 ID。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-01-17T12:18:37.767

一个简单的答案是，您的 YouTube 频道 ID 是**UC** + {YOUR_ACCOUNT_ID}。要确定您的 YouTube 频道 ID 或 YouTube 帐户 ID，请在[设置页面访问](https://www.youtube.com/account)[高级设置](https://www.youtube.com/account_advanced)

如果您想知道任何频道的 YouTube 频道 ID，您可以使用@mjlescano 提供的[解决方案。](https://stackoverflow.com/a/18665812/1984885)

```
https://www.googleapis.com/youtube/v3/channels?key={YOUR_API_KEY}&forUsername={USER_NAME}&part=id 
```

如果这可能有任何帮助，一些用户将其标记为已在[此处](https://stackoverflow.com/questions/13593769/retrieve-youtube-channel-info-for-vanity-channel)的另一个主题中解决。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-03-10T16:03:07.070

该网站从其 URL 中找到一个 YouTube 频道 ID：

**[https://commentpicker.com/youtube-channel-id.php](https://commentpicker.com/youtube-channel-id.php)**

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2013-09-06T20:07:45.663

您可以使用过滤器“forUsername”获取带有用户名（在您的情况下为“klauskkpm”）的频道 ID，如下所示：

```
https://www.googleapis.com/youtube/v3/channels?key={YOUR_API_KEY}&forUsername=klauskkpm&part=id 
```

更多信息在这里：[https ://developers.google.com/youtube/v3/docs/channels/list](https://developers.google.com/youtube/v3/docs/channels/list)

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2018-06-25T05:36:32.393

例如，在任何带有“用户”网址的频道页面上`http://www.youtube.com/user/klauskkpm`，无需 API 调用，从 YouTube 用户界面单击频道的视频（在其“视频”选项卡中），然后单击视频上的频道名称。然后，您可以使用其“频道”网址访问该页面，例如`https://www.youtube.com/channel/UCfjTOrCPnAblTngWAzpnlMA`。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2018-09-26T21:13:16.810

我刚刚找到了查找任何 YouTube 频道的频道 ID 的最简单方法！

第 1 步：播放该频道的视频。

第 2 步：单击该视频下的频道名称。

第三步：查看浏览器地址栏。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-04-11T21:44:30.003

通过没有 API 的频道 url 获取 youtube 频道 ID的**替代方法：**

```
function get_youtube_channel_ID($url){
  $html = file_get_contents($url);
  preg_match("'<meta itemprop=\"channelId\" content=\"(.*?)\"'si", $html, $match);
  if($match && $match[1])
    return $match[1];
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-07-14T05:20:55.873

如果您登录优游网站并选择“我的频道”，则非常容易获得当前 youtube 版本的频道 ID

[![我的频道](../Images/e889201283a65e8862c8e1c0b2b16140.png)](https://i.stack.imgur.com/jnPqy.jpg)

您的频道 ID 将显示在浏览器的地址栏上 [![频道编号](../Images/d82026d1e28c1939f5523a64280129e3.png)](https://i.stack.imgur.com/y8l7m.jpg)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-06-21T06:16:36.293

*2021 年 6 月*版。

1.  右键单击并查看页面源代码。
2.  搜索`"externalId"`，值如下。

资料来源：[丹尼尔](/users/43465/daniel)2017 年的[评论](https://stackoverflow.com/questions/14366648/how-can-i-get-a-channel-id-from-youtube/68063136#comment79675683_16326307)。

替代方案：在控制台中运行此 JavaScript：

```
ytInitialData.metadata.channelMetadataRenderer.externalId 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-03-27T12:02:00.383

[https://www.youtube.com/account_advanced](https://www.youtube.com/account_advanced)现在提供频道和用户 ID。另请参阅[https://developers.google.com/youtube/v3/guides/working_with_channel_ids](https://developers.google.com/youtube/v3/guides/working_with_channel_ids)。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-01-16T17:52:40.580

2017 年更新：[Henry 的回答](https://stackoverflow.com/a/16326307/1171596)可能有点离题。如果您`data-channel-external-id`在源代码中查找，您可能会发现多个 ID，并且只有第**一次**出现实际上是正确的。取而代之的是`channel_id`使用`<link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.youtube.com/feeds/videos.xml?channel_id=<VALUE_HERE">`。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-03-19T09:33:17.150

获取频道 ID

例如：Apple 频道 ID

[![在此处输入图像描述](../Images/edeab6f83d0a97800145cfb572f8ad03.png)](https://i.stack.imgur.com/0n9r2.png)

选择该频道中的任何视频

[![在此处输入图像描述](../Images/133e22765be128a215c1559796b6e8f3.png)](https://i.stack.imgur.com/EgauZ.png)

选择 iPhone - 分享照片（视频）

现在点击视频底部的频道名称**Apple 。**

[![在此处输入图像描述](../Images/80bb35afd0d0cd50955f5b0b37963a77.png)](https://i.stack.imgur.com/CfD8D.png)

现在您将在浏览器 url 中获得频道 ID

[![在此处输入图像描述](../Images/8ad70cd171278663f94d47e4fed21998.png)](https://i.stack.imgur.com/AOGkz.png)

这是 Apple 频道 ID：UCE_M8A5yxnLfW0KghEeajjw

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-01-21T05:59:53.990

要获取频道 ID，您可以执行以下请求，该请求会为您提供频道 ID 和播放列表 ID。

[https://www.googleapis.com/youtube/v3/channels?part=contentDetails%2C+statistics%2Csnippet&mine=true&key=](https://www.googleapis.com/youtube/v3/channels?part=contentDetails%2C+statistics%2Csnippet&mine=true&key=) {YOUR_API_KEY}

**mine**参数表示当前授权用户

正如您所说，频道 ID 以您在登录时获得的**UC+{您的帐户 ID}**为前缀，您也可以在不请求上述网址的情况下使用此 ID，您可以使用您的谷歌 ID 直接调用频道 API，只需加上**UC前缀**

[https://www.googleapis.com/youtube/v3/channels?part=contentDetails%2C+statistics%2Csnippet&id=UC](https://www.googleapis.com/youtube/v3/channels?part=contentDetails%2C+statistics%2Csnippet&id=UC) {your account id}&key={YOUR_API_KEY}

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-24T22:01:41.943

`UC[-_0-9A-Za-z]{21}[AQgw]`尝试在源代码中搜索正则表达式。即使频道在 URL 中包含非 ASCII 字符，也会显示此 ID：

[![在此处输入图像描述](../Images/bda9f582864bd61d81fb8b3f9f679cb9.png)](https://i.stack.imgur.com/TEO0v.png)

这是 Midnight Commander 的内部查看器/编辑器的屏幕截图，它具有正则表达式搜索：

[![在此处输入图像描述](../Images/790245cf914148bc0bab09998b58cf8e.png)](https://i.stack.imgur.com/xPv6U.png)

# meteor - Meteor：仅将特定子目录中的 .html 加载到页面中

> ID：14366649
> 
> 赞同：2
> 
> 时间：2013-01-16T19:53:16.500
> 
> 标签：meteor

我正在尝试使用 Meteor、Meteor Router 和 Bootstrap 创建一个用于快速原型制作的简单项目。

**这是目录结构**

```
meteor-prototypes/
|
|--- .meteor/
|--- prototypes/
|    |
|    |--- example/
|         |
|         |--- example.coffee
|         |--- example.css
|         |--- example-index.html
|         |--- example-more.html
|
|--- prototypes.coffee
|--- index.html
|--- smart.json
|--- smart.lock 
```

该`example`文件夹代表一个原型，可在 (例如) 处访问`http://localhost:3000/prototypes/example/`。理想情况下，您只需复制`example/`一个新名称（例如 new-example）并访问`http://localhost:3000/prototypes/new-example/`.

这样做的问题是 Meteor 默认情况下会在整个项目目录中搜索 HTML 文件并将它们全部加载。我需要做的是根据 URL（通过 Meteor 路由器）检查我们正在查看的原型，并仅加载该文件夹中的 .html 文件（例如`example/`）。

**有没有办法告诉 Meteor 只加载特定子目录中的 .html 文件？或者另一种方式来实现这一点？**

**对于那些好奇或有帮助的人，以下是上面目录结构中提到的每个文件包含的内容：**

**索引.html**

```
<head>
  <title>desktime-prototypes</title>
</head>

<body>
  {{ renderPage }}
</body>

<template name="home">
    <h1>We have the following prototypes available:</h1>

    <ul>
        <li><a href="/example/">Example</a></li>
    </ul>
</template> 
```

**原型.咖啡**

```
if (Meteor.isClient)

  Meteor.Router.add
    '': 'home'

    '/:prototype': (params) ->
      return params

    '/:prototype/:page': (params) ->
      return params[1]

if (Meteor.isServer)
  Meteor.startup ->
    # code to run on server at startup 
```

**/prototypes/example.coffee**

```
if Meteor.isClient
  Template.example.greeting = ->
    return "Welcome to prototypes."

  Template.example.rendered = ->
    # This function will fire when this specific template gets rendered,
    # Great place to fire jQuery plugins, or anything else that needs
    # to happen when the DOM is ready.

  Template.example.events
    'click input' : ->
      # template data, if any, is available in 'this'
      alert 'Button clicked!' 
```

**原型/示例/example-index.html**

```
<template name="example">
    <h1>Welcome to the example prototype!</h1>

    {{> example-more }}
</template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:32:14.123

好问题......两件事：

**(1)** `meteor-router`当前缺少您需要的服务器端渲染（[尽管它很接近](https://github.com/tmeasday/meteor-router#server-side-routing)）。

**(2)** HTML 文件名与路由系统*完全无关。*就加载顺序而言，它们所在的文件夹很重要，但名称与您期望的路径不匹配。

要实现您要查找的内容，您可以 (1) 使用应用程序中的链接进行路由，但不要更改地址栏中的 URL 并期望它能够正常工作，以及 (2) 更改各种 html 的模板名称/prototypes 文件夹中的文件以匹配您要演示的原型。下面是一个例子：

HTML：

```
<body>
    <h1>All Prototypes</h1>
    {{>proto}}
    <div>
        {{renderPage}}
    </div>
</body>

<template name="landing">
    LANDING
</template>

<template name="proto">
   {{#each items}}
        <a href="/prototypes/{{id}}">{{name}}</a>
    {{/each}}
</template> 
```

Javascript：

```
if (Meteor.isClient) {
    Meteor.startup(function () {
        Meteor.Router.to("/landing");
    });
    Meteor.Router.add({
        '/landing': 'landing',
        '/prototypes/:page': function (proto) {
            return proto;
        }
    });
    Template.proto.items = function () {
        return [{ name: "Prototype 1", id: "prototype1" }, { name: "Prototype 2", id: "prototype2" }];
    };
} 
```

原型 1 HTML：

```
<template name="prototype1">
    <h1>Prototype 1</h1>
</template> 
```

原型 2 HTML：

```
<template name="prototype2">
    <h1>Prototype 2</h1>
</template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:03:38.600

您是否有理由在一个 Meteor 项目中使用多个原型？他们共享代码吗？如果没有，为什么不每个原型只使用一个 Meteor 项目呢？然后你可以做的是自己创建一个命令行工具来执行类似的操作

```
meteor_proto example1
meteor_proto example2 
```

它创建 Meteor 项目，但只是用您想要的文件预先填充它们（您可以创建理想的原型项目并将其放在某个地方，然后在执行`meteor create`命令或其他操作后让您的命令行复制该文件夹的内容）。

实际上，这对 Meteor 来说是一个很好的默认功能。

# java - 像 Date 的已弃用 String 构造函数一样解析的 SimpleDateFormat 模式是什么？

> ID：14366655
> 
> 赞同：3
> 
> 时间：2013-01-16T19:53:42.537
> 
> 标签：java

我有一些看起来像`"Sat May 12 04:46:05 EDT 2012"`当前正在由`java.util.Date`'s 的[`Date(String s)`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28java.lang.String%29)构造函数解析的代码。但是，现在我在 IDE 中收到警告，因为它说它已被弃用并且 JavaDoc 说：

> 已弃用。从 JDK 1.1 版开始，由 DateFormat.parse(String s) 取代。

我尝试使用`SimpleDateFormatter`但默认格式化程序导致异常，所以我想尝试使用模式，但是像 String 构造函数那样解析的模式是什么？

* * *

注意：这与其他类似问题不同，因为它专门询问替换已弃用（和流行）的构造函数，而不仅仅是请求帮助解析任意日期字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:53:42.537

该模式是`EEE MMM d hh:mm:ss zzz YYYY`您可以使用`new SimpleDateFormat("EEE MMM d hh:mm:ss zzz YYYY")`.

所以像这样的代码

> 日期 d = new Date("2012 年 5 月 12 日星期六 04:46:05 EDT");

可以改写为：

```
DateFormat df = new SimpleDateFormat( "EEE MMM d hh:mm:ss z YYYY" );
Date d = df.parse( "Sat May 12 04:46:05 EDT 2012" ); 
```

* * *

**编辑：**从[`java.util.Date.parse(String s)`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#parse%28java.lang.String%29)JavaDoc 事实证明，该方法`accepts many syntaxes;`不会为您将遇到的所有调用提供*单一*匹配模式。可能需要使用来自[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html).

# javascript - 取消只读按钮“点击动画”

> ID：14366659
> 
> 赞同：0
> 
> 时间：2013-01-16T19:53:56.090
> 
> 标签：javascript, html, css

我想取消只读输入的“点击动画”（让它们表现得像禁用按钮，我不使用禁用按钮，因为我可以为 IE 设置样式）。

也许有一种方法可以在单击（鼠标按下）时为提交/按钮设置 css 样式。

我的意思类似于悬停css：

```
input[readonly] { color: blue } 
input[readonly]:hover { color: red }
input[readonly]:mouseover { color: green } 
```

我更喜欢基于 css2 的解决方案或基于 javascript 的解决方案，而不是 css3 解决方案。

预先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:47:41.883

嗨使用：活动课程，这将解决您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:55:13.677

您要查找的伪类是`:active`.

顺便说一句，IE10 支持禁用元素的任意样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:58:33.583

试试这个：

```
input[readonly]{ color: blue } 
input[readonly]:hover { color: red }
input[readonly]:active { color: green } 
```

# android - 简单的地图视图不起作用

> ID：14366663
> 
> 赞同：0
> 
> 时间：2013-01-16T19:54:00.977
> 
> 标签：android

创建简单的谷歌地图视图时遇到问题。您可以在下面找到我的代码：

清单：

```
<uses-sdk
    android:minSdkVersion="8"/>
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyB0zPyFFyQ_sCVmMjj6pgNqvqKg3zHGMSs"/>

    <activity
        android:name="com.example.maptest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <category android:name="android.intent.category.EMBED"/>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
           <uses-library android:name="com.google.android.maps"/>
</application> 
```

在 Java 文件中：

```
public class MainActivity extends MapActivity {

private MapView mapView; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mapView = (MapView)findViewById(R.id.map); 
}

@Override
protected boolean isRouteDisplayed() {
// TODO Auto-generated method stub
return false;
}

} 
```

在 XML 文件中：

```
<com.google.android.maps.MapView
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:apiKey="AIzaSyB0zPyFFyQ_sCVmMjj6pgNqvqKg3zHGMSs"
    android:clickable="true" >
</com.google.android.maps.MapView> 
```

结果是一个启动应用程序，女巫只显示灰色区域而不是地图，但角落里有典型的谷歌图标。

我知道最常见的问题是 API 密钥不正确，但我经常检查它并且密钥是正确的。也许有人有建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:55:48.377

问题是您使用 V2 API 的密钥（从清单中的注释判断），但您的实现使用 V1 API。您基本上在这里混合了两个 API 版本。V1 API 需要适当的 V1 API 密钥作为 XML 布局中的属性放置`MapView`。V2 API 要求将密钥放在清单中，就像您所做的那样。此外，V2 API 还需要将各种其他内容添加到清单中。

当您使用 V1 API 时，您需要获取 V1 API 密钥（您可以在 4 月之前这样做，因为它已被弃用）。或者，切换到使用 V2 API，显然你会被鼓励这样做（但要注意它需要更高版本的 OpenGL 版本，而某些 2.2 设备不支持）。

我建议您密切关注 V2 API 教程：[V2 Maps API](https://developers.google.com/maps/documentation/android/intro)

# asp.net - ASP.NET SQL 查询查找 MAX 值

> ID：14366666
> 
> 赞同：0
> 
> 时间：2013-01-16T19:54:10.630
> 
> 标签：asp.net, sql, visual-studio-2010

我想从我的 ASP.NET 页面 (vb) 中触发一个 SQL 查询，该查询的作用是从列中查找最大值，然后返回该值并将其放入网页中的标签中。

目前我不知道触发 SQL 命令然后返回值，非常感谢对我的代码进行更正。

```
Dim Con As New SqlConnection
        Dim SQL As String
        Con.ConnectionString = "Data Source=WCRDUSMJEMPR9\SQLEXPRESS;Initial Catalog=MicroDB;Integrated Security=True"
        Con.Open()
        SQL = "SELECT MAX(ID_ControlCharts) FROM ControlCharts"
        Label123.Text = SQL 
```

上面的代码不起作用，我知道我需要执行查询但是我完全迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:56:35.247

```
Dim com as SqlCommand = Con.CreateCommand
Label123.Text = com.ExecuteScalar(SQL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:59:20.593

您需要创建 sql 命令和调用`executescalar`方法。

前任：

```
Dim Con As New SqlConnection
Dim SQL As String
Con.ConnectionString = "Data Source=WCRDUSMJEMPR9\SQLEXPRESS;Initial
    Catalog=MicroDB;Integrated Security=True"
Con.Open()
Dim cmd as new SQLCommand(sql,Con)
Dim obj = cmd.ExecuteScalar()
if(obj!=null)
 Label123.Text = obj.ToString()
end if

Con.Close() 
```

# c++ - 删除列表、python 样式和 c++ 样式中的项目

> ID：14366668
> 
> 赞同：1
> 
> 时间：2013-01-16T19:54:16.627
> 
> 标签：c++, python

我一直在努力学习 python 并以某种方式想出了以下代码：

```
for item in list:
    while list.count(item)!=1:
        list.remove(item) 
```

我想知道这种编码是否可以在 C++ 中完成。（使用 for 循环的列表长度同时减小其大小）如果没有，谁能告诉我为什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:15:17.537

我不是一个大的 Python 程序员，但上面的代码似乎从列表中删除了重复项。这是一个 C++ 等价物：

```
list.sort();
list.unique(); 
```

至于在迭代列表时修改列表，您也可以这样做。这是一个例子：

```
for (auto it = list.begin(), eit = list.end(); it != eit; ) {
    if (std::count(it, eit, *it) > 1)
        it = list.erase(it);
    else
        ++it;
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:03:00.397

在 C++ 中，您可以从标准库的各种算法中组合出类似的东西，查看 remove()、find()，但是，您的算法的编写方式看起来像 O(n^2) 复杂度。对列表进行排序然后扫描它以将每个值之一放入一个新列表中具有 O(n log n) 复杂度，但会破坏顺序。

通常，对于 Python 和 C++，将元素复制或移动到临时容器然后与原始容器交换比就地修改原始容器更好。这更容易正确，因为您不会踩到自己的脚（请参阅 delnan 的评论），并且速度更快，因为它避免了重复的重新分配和复制对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:03:36.007

这就是我的做法。

```
//If we will not delete an element of the list
for (std::list<MyType>::iterator it = MyList.begin(); it != MyList.end();++it)
{
   //my operation here
}

//If we will delete an element of the list
for (std::list<MyType>::iterator it = MyList.begin(); it != MyList.end();)
{
std::list<MyType>::iterator itt = it;
++itt;
MyList.erase(it);
it = itt;
} 
```

您可以使用列表的大小，但它无法与 [it] 相提并论，因为 [it]。

std:: 数据类的某些特性作为设计决定启用或禁用。当然，您可以创建自己的函数 MyList[int i]，但由于列表的性质，它会导致很大的速度 gimp。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:23:40.917

在 C++ 中，您可以在某些情况下在迭代容器时从容器中删除元素。这取决于容器和您要执行的操作。

目前，在不同的答案中对您的代码片段有不同的解释。我的解释是，您要删除列表中多次存在的所有元素。

这是 C++ 中的解决方案：它首先计算另一个容器 (std::map) 中的元素，然后从列表中删除适当的元素。

```
#include <list>
#include <map>
#include <algorithm>
#include <iostream>

int main() {

  std::list<int> li { 0, 1, 2, 3, 4, 5, 1, 2, 3, 2, 2 };

  // Create count map: element -> count 
  std::map<int, int> cm;
  std::for_each( li.begin(), li.end(), [&cm](int i) { ++cm[i]; } );

  // Remove all elements from list with count > 1
  std::for_each( cm.begin(), cm.end(), 
         [&li](std::pair<const int, int> const p) { 
       if( p.second > 1) {
         li.remove( p.first );
       }
    } );

  // Output all elements from remaining list
  std::for_each( li.begin(), li.end(), 
         [](int i) { std::cout << i << std::endl; } );

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T20:34:36.687

我不知道 Python，但有人在评论中说列表等同于 C++ 向量并且它没有排序，所以这里......

```
std::vector<int> v{1, 2, 2, 2, 3, 3, 2, 2, 1};

v.erase(std::unique(v.begin(), v.end()), v.end()); 
```

`v`包含`{1, 2, 3, 2, 1}`在此代码之后。如果目标是删除所有重复项（不仅仅是连续重复项），则必须首先对向量进行排序：`std::sort(v.begin(), v.end());`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T20:47:45.237

`std::vector`是 C++ 中与 Python 最相似的容器，这是`list`在迭代向量时修改向量的正确方法：

```
template <typename T>
void dedupe(std::vector<T> &vec) {
    for (std::vector<T>::iterator it = vec.begin(); it != vec.end(); ) {
        if (std::count(vev.begin(), vec.end(), *it) != 1) {
            it = vec.erase(it);
        } else {
            ++it;
        }
    }
} 
```

这不一定是最有效的重复数据删除方法，但它确实有效。

> 为 for 循环使用列表长度，同时减小其大小

如果您坚持使用长度而不是`end()`，那么您可以使用索引而不是迭代器：

```
template <typename T>
void dedupe(std::vector<T> &vec) {
    for (std::vector<T>::size_type pos = 0; pos != vec.size(); ) {
        if (std::count(vec.begin(), vec.end(), vec[pos]) != 1) {
            vec.erase(vec.begin() + pos);
        } else {
            ++pos;
        }
    }
} 
```

顺便说一句，我假设您的 Python 代码的目的是删除所有重复项，并且事实并非如此，这是一个错误。例如输入`[2,2,1,3,3,1,2,3]`、输出`[1,1,2,3]`。如果您所说的是您的意思，那么将您的代码直接翻译为 C++ 是：

```
template <typename T>
void dedupe(std::vector<T> &vec) {
    for (std::vector<T>::size_type pos = 0; pos < vec.size(); ++pos) {
        T item = vec[pos];
        while (std::count(vec.begin(), vec.end(), item) != 1) {
            vec.erase(std::find(vec.begin(), vec.end(), item));
        }
    }
} 
```

# javascript - 用 html 替换文本。jQuery

> ID：14366669
> 
> 赞同：0
> 
> 时间：2013-01-16T19:54:21.887
> 
> 标签：javascript, jquery

我正在尝试用 html 标签替换文本。我正在使用这段代码：

```
 $('p').each(function () {
    $(this).text($(this).text().replace(/(http:\/\/.+?)(\s|$)/g, function(text, link) {
               return '<a href="'+ link +'" target="blank">'+ link +'</a>';
            }).replace(/(www\..+?)(\s|$)/g, function(text, link) {
               return '<a href="http://'+ link +'" target="blank">'+ link +'</a>';
                })
            );  
        }); 
```

但问题是它不是用html替换文本，而是用另一个文本。

例如：

```
 www.google.com 
```

变为（仍在文本中）：

```
 <a href="http://www.google.fr" target="blank">www.google.fr</a> 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:55:54.340

```
$(this).text(...) 
```

您正在设置元素的**文本**。

要设置 HTML，请调用`.html()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:00:32.337

使用`.html()`：

```
 $('p').each(function () {
    $(this).html($(this).text().replace(/(http:\/\/.+?)(\s|$)/g, function(text, link) {
               return '<a href="'+ link +'" target="blank">'+ link +'</a>';
            }).replace(/(www\..+?)(\s|$)/g, function(text, link) {
               return '<a href="http://'+ link +'" target="blank">'+ link +'</a>';
                })
            );  
        }); 
```

[工作演示](http://jsfiddle.net/Sjy6g/)

# jsf - 如何在 h:outputText 中显示标签和值

> ID：14366670
> 
> 赞同：0
> 
> 时间：2013-01-16T19:54:23.020
> 
> 标签：jsf, jsf-2

在这种情况下，我想显示数据中心 ID 和数据中心名称 1000 和 DC1。

我制作了这个复杂的 JSF 代码，但事实证明我无法将 id 显示为值，将数据中心名称显示为标签。像这样的东西：

```
<f:selectItems value="#{ZoneProfileTabGeneralController.listDatacenters}" var="datacenters" itemValue="#{datacenters.datacenterid}" itemLabel="#{datacenters.datacentername} - #{datacenters.datacenterid}" /> 
```

这是我做的测试。

```
<h:outputText value="#{ZoneProfileTabGeneralController.DatacenterNameId(ud.datacenterId)} - #{ud.datacenterId}" 
```

有什么方法可以将 id 显示为隐藏值并将名称显示为标签。但是当我提交 JSF 页面以仅发回数据中心 ID 时？

***编辑***

```
<tr>
    <td>Datacenter ID</td>
    <td>
        <h:outputText value="#{ud.datacenterId}"
                      rendered="#{not ZoneProfileTabGeneralController.editable}" />
        <h:selectOneMenu value="#{ud.datacenterId}" label="#{ZoneProfileTabGeneralController.DatacenterNameId(ud.datacenterId)} - #{ud.datacenterId}" rendered="#{ZoneProfileTabGeneralController.editable}">
            <f:selectItems value="#{ZoneProfileTabGeneralController.listDatacenters}" var="datacenters" itemValue="#{datacenters.datacenterid}" itemLabel="#{datacenters.datacentername} - #{datacenters.datacenterid}" />
        </h:selectOneMenu>
    </td>
</tr> 
```

# php - 返回给定周的所有记录

> ID：14366671
> 
> 赞同：0
> 
> 时间：2013-01-16T19:54:30.200
> 
> 标签：php, mysql

我希望返回 2012 年第 5 周的所有记录。例如，以下查询将提供正确的记录，但是效率非常低，因为必须为每一行计算 WEEK() 和 YEAR() 并且索引不能用过的。我希望应该使用 BETWEEN，但我不确定我会怎么做。我还需要为给定的月份和季度做类似的事情，理想情况下可以使用类似的解决方案。如果需要，我可以用 PHP 补充 SQL。谢谢

```
SELECT * FROM myTable WHERE WEEK(dateColumn)=5 AND YEAR(dateColumn)=2012; 
```

编辑 - 以下已添加到补充评论中

***********测试数据******* **********

 *****```
SELECT * FROM projects_sell WHERE award_date BETWEEN '2012-04-01' AND '2012-04-08' 
```

0.55236601829529

```
SELECT * FROM projects_sell WHERE YEAR(award_date)=2012 AND WEEK(award_date)=5 
```

0.52925586700439

```
SELECT * FROM projects_sell WHERE award_date > STR_TO_DATE('1,5,2012', '%w,%v,%Y') AND award_date < STR_TO_DATE('0,5,2012', '%w,%v,%Y') 
```

0.69798302650452

***********测试脚本******* **********

 *****```
//$sql ="SELECT * FROM projects_sell WHERE award_date BETWEEN '2012-04-01' AND '2012-04-08'";
//$sql ="SELECT * FROM projects_sell WHERE YEAR(award_date)=2012 AND WEEK(award_date)=5";
$sql ="SELECT * FROM projects_sell WHERE award_date > STR_TO_DATE('1,5,2012', '%w,%v,%Y') AND award_date < STR_TO_DATE('0,5,2012', '%w,%v,%Y')";

$current_time=microtime(true);
for ($i=1; $i<=1000; $i++)
{
    $stmt = db::db()->query($sql);
    $rs = $stmt->fetchAll(PDO::FETCH_ASSOC);
}
echo($sql.'<br>'.(microtime(true)-$current_time).'<br>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:57:08.570

使用`STR_TO_DATE`您可以创建一周的第一天和最后一天。然后使用`BETWEEN`or 日期算术来查找日期：

```
WHERE dateColumn > STR_TO_DATE('1,5,2012', '%w,%v,%Y') 
               AND dateColumn < STR_TO_DATE('0,5,2012', '%w,%v,%Y') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:57:46.680

您可以计算出第五周的开始日期和结束日期，并根据 BETWEEN 运算符进行过滤

```
SELECT * FROM Table1 WHERE T.Date1 BETWEEN '01-29-2012 00:00:00' AND '02-04-2012 00:00:00' 
```**********

# javascript - 如何改进这个 WebGL / GLSL 图像下采样着色器

> ID：14366672
> 
> 赞同：13
> 
> 时间：2013-01-16T19:54:33.740
> 
> 标签：javascript, glsl, webgl

我正在使用 WebGL 在我正在开发的应用程序中快速调整图像客户端的大小。我编写了一个 GLSL 着色器，它对我正在缩小的图像执行简单的双线性过滤。

它在大多数情况下都可以正常工作，但在许多情况下调整大小非常大，例如从 2048x2048 图像缩小到 110x110 以生成缩略图。在这些情况下，质量很差而且太模糊。

我当前的 GLSL 着色器如下：

```
uniform float textureSizeWidth;\
uniform float textureSizeHeight;\
uniform float texelSizeX;\
uniform float texelSizeY;\
varying mediump vec2 texCoord;\
uniform sampler2D texture;\
\
vec4 tex2DBiLinear( sampler2D textureSampler_i, vec2 texCoord_i )\
{\
    vec4 p0q0 = texture2D(textureSampler_i, texCoord_i);\
    vec4 p1q0 = texture2D(textureSampler_i, texCoord_i + vec2(texelSizeX, 0));\
\
    vec4 p0q1 = texture2D(textureSampler_i, texCoord_i + vec2(0, texelSizeY));\
    vec4 p1q1 = texture2D(textureSampler_i, texCoord_i + vec2(texelSizeX , texelSizeY));\
\
    float a = fract( texCoord_i.x * textureSizeWidth );\
\
    vec4 pInterp_q0 = mix( p0q0, p1q0, a );\
    vec4 pInterp_q1 = mix( p0q1, p1q1, a );\
\
    float b = fract( texCoord_i.y * textureSizeHeight );\
    return mix( pInterp_q0, pInterp_q1, b );\
}\
void main() { \
\
    gl_FragColor = tex2DBiLinear(texture,texCoord);\
}'); 
```

TexelsizeX 和 TexelsizeY 分别只是（1.0 / 纹理宽度）和高度......

我想实现更高质量的过滤技术，理想情况下是 [Lancosz][1] 过滤器，它应该会产生更好的结果，但我似乎无法理解如何使用 GLSL 实现算法，因为我对 WebGL 非常陌生，并且GLSL 一般。

有人能指出我正确的方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T21:26:18.343

如果您正在寻找 Lanczos 重采样，以下是我在开源 GPUImage 库中使用的着色器程序：

顶点着色器：

```
 attribute vec4 position;
 attribute vec2 inputTextureCoordinate;

 uniform float texelWidthOffset;
 uniform float texelHeightOffset;

 varying vec2 centerTextureCoordinate;
 varying vec2 oneStepLeftTextureCoordinate;
 varying vec2 twoStepsLeftTextureCoordinate;
 varying vec2 threeStepsLeftTextureCoordinate;
 varying vec2 fourStepsLeftTextureCoordinate;
 varying vec2 oneStepRightTextureCoordinate;
 varying vec2 twoStepsRightTextureCoordinate;
 varying vec2 threeStepsRightTextureCoordinate;
 varying vec2 fourStepsRightTextureCoordinate;

 void main()
 {
     gl_Position = position;

     vec2 firstOffset = vec2(texelWidthOffset, texelHeightOffset);
     vec2 secondOffset = vec2(2.0 * texelWidthOffset, 2.0 * texelHeightOffset);
     vec2 thirdOffset = vec2(3.0 * texelWidthOffset, 3.0 * texelHeightOffset);
     vec2 fourthOffset = vec2(4.0 * texelWidthOffset, 4.0 * texelHeightOffset);

     centerTextureCoordinate = inputTextureCoordinate;
     oneStepLeftTextureCoordinate = inputTextureCoordinate - firstOffset;
     twoStepsLeftTextureCoordinate = inputTextureCoordinate - secondOffset;
     threeStepsLeftTextureCoordinate = inputTextureCoordinate - thirdOffset;
     fourStepsLeftTextureCoordinate = inputTextureCoordinate - fourthOffset;
     oneStepRightTextureCoordinate = inputTextureCoordinate + firstOffset;
     twoStepsRightTextureCoordinate = inputTextureCoordinate + secondOffset;
     threeStepsRightTextureCoordinate = inputTextureCoordinate + thirdOffset;
     fourStepsRightTextureCoordinate = inputTextureCoordinate + fourthOffset;
 } 
```

片段着色器：

```
 precision highp float;

 uniform sampler2D inputImageTexture;

 varying vec2 centerTextureCoordinate;
 varying vec2 oneStepLeftTextureCoordinate;
 varying vec2 twoStepsLeftTextureCoordinate;
 varying vec2 threeStepsLeftTextureCoordinate;
 varying vec2 fourStepsLeftTextureCoordinate;
 varying vec2 oneStepRightTextureCoordinate;
 varying vec2 twoStepsRightTextureCoordinate;
 varying vec2 threeStepsRightTextureCoordinate;
 varying vec2 fourStepsRightTextureCoordinate;

 // sinc(x) * sinc(x/a) = (a * sin(pi * x) * sin(pi * x / a)) / (pi^2 * x^2)
 // Assuming a Lanczos constant of 2.0, and scaling values to max out at x = +/- 1.5

 void main()
 {
     lowp vec4 fragmentColor = texture2D(inputImageTexture, centerTextureCoordinate) * 0.38026;

     fragmentColor += texture2D(inputImageTexture, oneStepLeftTextureCoordinate) * 0.27667;
     fragmentColor += texture2D(inputImageTexture, oneStepRightTextureCoordinate) * 0.27667;

     fragmentColor += texture2D(inputImageTexture, twoStepsLeftTextureCoordinate) * 0.08074;
     fragmentColor += texture2D(inputImageTexture, twoStepsRightTextureCoordinate) * 0.08074;

     fragmentColor += texture2D(inputImageTexture, threeStepsLeftTextureCoordinate) * -0.02612;
     fragmentColor += texture2D(inputImageTexture, threeStepsRightTextureCoordinate) * -0.02612;

     fragmentColor += texture2D(inputImageTexture, fourStepsLeftTextureCoordinate) * -0.02143;
     fragmentColor += texture2D(inputImageTexture, fourStepsRightTextureCoordinate) * -0.02143;

     gl_FragColor = fragmentColor;
 } 
```

这分两次应用，第一次执行水平下采样，第二次执行垂直下采样。和制服交替设置为 0.0 和图像中单个像素的宽度分数或高度分数`texelWidthOffset`。`texelHeightOffset`

我在顶点着色器中硬计算了纹素偏移，因为这避免了我所针对的移动设备上的依赖纹理读取，从而显着提高了性能。不过，这有点冗长。

此 Lanczos 重采样的结果：

![兰佐斯](../Images/f5359fc71b87294affe8526348cc4276.png)

正常双线性下采样：

![双线性](../Images/dbb990499fccf28fa9aa3c27e470007d.png)

最近邻下采样：

![最近的邻居](../Images/261d80bb109f12592b84e1de5bc7e61f.png)

# reporting-services - SSRS 2008 R2 图表 - 隐藏空白以获取返回 0 的系列值

> ID：14366677
> 
> 赞同：0
> 
> 时间：2013-01-16T19:55:05.943
> 
> 标签：reporting-services, charts, ssrs-2008-r2

我需要删除不返回值的条（或系列）的空白。

我发布的图表没有返回 4 月、5 月、6 月、9 月、11 月或 12 月的值，因此每个月都有差距。我想隐藏这些差距并让现有的条形图并排显示。

我尝试在 Visibility 属性（在 Series 属性下）下每个月添加一个条件语句，但没有运气。例子：

```
=iif(isnothing(sum(fields!jan.Value)), true, false) 
```

任何帮助，将不胜感激。

![SSRS 2008 R2 柱形图][1](../Images/6b429952f78e0f934fdbdd972f2a85b3.png) ![1]: [http://i.stack.imgur.com/ZrSXN.png](https://i.stack.imgur.com/ZrSXN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:52:02.447

您不能在图表级别和/或类别组级别过滤掉数据。然后它不会被包含在图表的渲染中。您可以过滤 Sum(field) = 0 或您正在使用的任何适当的聚合。

# java - 使用 Spring 和 Maven 设置 Hibernate 时出现 EntityManagerFactory 错误

> ID：14366679
> 
> 赞同：0
> 
> 时间：2013-01-16T19:55:10.857
> 
> 标签：java, spring, hibernate, maven, jpa

我正在尝试将 Spring 3.2、Maven 3 项目配置为使用 Hibernate 4.1，但我的 Persistence.xml 和/或 entityManagerFactory 似乎存在问题。

我正在尝试遵循 JPA 规范。

当我运行应用程序时，我收到以下错误：

[见底部]

我对可能出现的问题有一些想法，但不知道如何解决可能出现的问题或可能不会出现的问题。首先，我不确定我是否在 persistence.xml 文件中正确配置了 hibernate.connection.url 属性。（在资源/META-INF 中。）“jdbc:oracle:thin:@PC55555.oururl.com:1521:psychos”psychos 是 SID，但模式名称是 Daredevils。此外，属性“hibernate.hbm2ddl.auto”是否适用于 Oracle 11g？

这是我的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="MyPersistence"
        transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
        <property name="dialect" value="org.hibernate.dialect.OracleDialect" />
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.driver.OracleDriver" />
            <property name="hibernate.connection.url"
                value="jdbc:oracle:thin:@PC55555.oururl.com:1521:psychos" />

            <property name="hibernate.connection.username" value="theusername" />
            <property name="hibernate.connection.password" value="thepassword" />
            <property name="hibernate.hbm2ddl.auto" value="create" />
        </properties>
    </persistence-unit>
</persistence> 
```

就 Hibernate 的 spring 配置而言，这是我的 hibernate-context.xml 文件（在我的基本 spring 配置 xml 文件中导入）。当 entityManagerFactory 声明其持久性单元属性时，似乎引发了错误，所以我认为这里的内容没有问题。

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- Set up as per http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/ -->

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
              http://www.springframework.org/schema/jdbc
              http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd">

<!-- Add JPA support -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="MyPersistence" />
         <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
    </property>
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />

      <property name="url" value="jdbc:oracle:thin:@PC55555.oururl.com:1521:psychos"/>

      <property name="username" value="theusername"/>
      <property name="password" value="thepassword"/>
    </bean>

    <!-- Add Transaction support -->
    <bean id="transactionManager"
        class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"
        lazy-init="false" />

</beans> 
```

以防万一你需要它，这里是项目使用的相关 POM 依赖项：

```
 <!-- Spring dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
        <scope>runtime</scope>
    </dependency>

    <!-- Database and ORM dependencies -->

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${org.hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <!-- Oracle back-end support (acquired through internal repository) -->
    <dependency>
  <groupId>com.oracle</groupId>
  <artifactId>ojdbc6</artifactId>
  <version>11.2.0.3-INTERNAL</version>
</dependency>

</dependencies> 
```

我真的很感激任何帮助！

尽可能多的堆栈跟踪：

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/spring/hibernate-context.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: NikeChallengesPersistence] Unable to build EntityManagerFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:519)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:331)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:747)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:265)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:492)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:293)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
    at org.eclipse.jetty.server.Server.doStart(Server.java:277)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:523)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: NikeChallengesPersistence] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:286)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 59 more
Caused by: org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:97)
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:67)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:170)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:77)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2283)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2279)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1748)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
    ... 65 more

2013-01-16 11:37:06.340:WARN:/:unavailable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/spring/hibernate-context.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: NikeChallengesPersistence] Unable to build EntityManagerFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:519)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:331)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:747)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:265)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:492)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:293)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
    at org.eclipse.jetty.server.Server.doStart(Server.java:277)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:523)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
javax.persistence.PersistenceException: [PersistenceUnit: NikeChallengesPersistence] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:286)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:519)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:331)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:747)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:265)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:492)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:293)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
    at org.eclipse.jetty.server.Server.doStart(Server.java:277)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:523)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:20:38.143

首先，确保连接设置正确。如果`pyschos`是sid，只要端口和服务器等其他属性正常，就应该找到它。oracle JDBC url 应遵循以下语法：

> jdbc:oracle:thin:[USER/PASSWORD]@[HOST][:PORT]:SID

还要确保将`DareDevils`其用作具有适当密码的用户名。

其次，我认为您不需要配置 a，`JpaVendorAdapter`因为您依赖 persistence.xml 文件来定义持久性提供程序`<provider>org.hibernate.ejb.HibernatePersistence</provider>`，这会将实体管理器配置更改为：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="MyPersistence" />
</bean> 
```

Oracle 确实支持`hibernate.hbm2ddl.auto`.

您可能还想查看我博客中描述如何设置 Spring Data 项目的视频教程，其中包含如何为实体管理器创建配置的说明：http: [//tothought.cloudfoundry.com/post/3](http://tothought.cloudfoundry.com/post/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:06:15.177

该属性称为*hibernate.dialect*，而不仅仅是*dialect*。这至少应该让你通过这个初始异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:05:00.407

蹩脚的修复，但我切换到使用基于 Java 的 spring 配置，当我首先不需要 persistence.xml 或任何 xml 配置时，我能够让它正常工作！

# php - 系统提示我在网站打开时下载我的页面

> ID：14366682
> 
> 赞同：1
> 
> 时间：2013-01-16T19:55:13.607
> 
> 标签：php, wordpress, apache

我正在尝试访问我的 wordpress 网站，几天前它还在工作，现在我收到了下载页面的提示。

![在此处输入图像描述](../Images/18b953d27234946751b2a5559bf185dc.png)

我已按照许多网站上的说明尝试解决此问题，但似乎没有任何效果。我尝试通过[http://www.honeytechblog.com/how-to-fix-applicationx-httpd-php-trouble-in-getting-php-to-parse/更改 .htaccess 文件](http://www.honeytechblog.com/how-to-fix-applicationx-httpd-php-trouble-in-getting-php-to-parse/)

那没有用。我尝试打电话给我的托管公司，以确保他们说启用了 PHP。我清除了浏览器缓存。我打开了它提示我下载的文件，里面就是这个

```
<?php
/**
 * Front to the WordPress application. This file doesn't do anything, but loads
 * wp-blog-header.php which does and tells WordPress to load the theme.
 *
 * @package WordPress
 */

/**
 * Tells WordPress to load the WordPress theme and output it.
 *
 * @var bool
 */
define('WP_USE_THEMES', true);

/** Loads the WordPress Environment and Template */
require('./wp-blog-header.php');
?> 
```

为了测试以确保 PHP 确实在工作，制作了一个简单的小型 index.php，它与 THIS IS A TEST 相呼应，并且运行良好。所以我想这与Wordpress有关。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:55:56.657

尝试在 .htaccess 文件中显式设置 PHP5：

```
AddHandler x-httpd-php5 .php 
```

或使用 CGI

```
AddHandler x-httpd-php5-cgi .php 
```

启用 php4 而不是启用 php5 会出现同样的问题：[http ://wordpress.org/support/topic/browser-tries-to-download-php-file](http://wordpress.org/support/topic/browser-tries-to-download-php-file)

这只是一个猜测，因为我不知道主机或任何东西。但这至少可以解释为什么前一种解决方案没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-25T01:21:23.060

1.  **将您的.htaccess**文件编辑为**.htaccess_old。**
2.  **删除浏览器的缓存**并重新启动浏览器。
3.  输入您的网站。

# paypal - 信用卡额度在范围内

> ID：14366683
> 
> 赞同：1
> 
> 时间：2013-01-16T19:55:13.720
> 
> 标签：paypal, authorize.net

使用 Authorize.net SIM API 或 Paypal NVP - 有没有办法：

1.接受信用卡
2.检查是否有效
3.收到退货通知我卡可以处理购买金额。
4.不交易

我正在寻找术语或 API 方法来查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:56:06.153

是的，它被称为仅授权或仅授权。使用 Authorize.Net，您可以使用他们的 AIM API。

# python - Python基于测试的类关系分析？

> ID：14366684
> 
> 赞同：0
> 
> 时间：2013-01-16T19:55:22.540
> 
> 标签：python, tdd, uml, reverse-engineering

是一个工具，如果我有 100% 的源代码测试覆盖率，它会运行测试，分析那里的类之间的关系，并给我一个 UML 图作为输出（或者我可能转换为 UML 的其他形式）？

# ruby - 为什么我在查看 Sinatra 表单时会收到“Errno::ENOENT: No such file or directory”？

> ID：14366687
> 
> 赞同：2
> 
> 时间：2013-01-16T19:55:23.013
> 
> 标签：ruby, forms, error-handling, terminal, sinatra

我正在尝试遵循本教程： http:
[//net.tutsplus.com/tutorials/ruby/singing-with-sinatra/](http://net.tutsplus.com/tutorials/ruby/singing-with-sinatra/)

卡在“我们还将使用“<strong>视图文件”，它允许我们将视图的标记拆分为单独的文件。“

我的 basics.rb 文件运行良好。

**我的文件存储如下：**

```
Desktop/RubyForm/basics.rb
Desktop/RubyForm/view/form.erb 
```

然而，现在当我去的时候 `http://localhost:9393/form`，我受到了以下的欢迎：

```
Errno::EIO at /form 
Input/output error - <STDERR> file: lint.rb location: write line: 398
sinatra.error   
Errno::ENOENT: No such file or directory - 
  /Users/HelenasMac/Desktop/views/form.erb 
```

**更新！:**
运行 ruby​​ basics.rb 并转到`http://localhost:4567/form`. 但是，在我运行 "shotgun basics.rb" 之后，我必须转到 `http://localhost:9393/form`，这时表单没有出现。

我究竟做错了什么？免责声明：超级初学者到 ruby​​ 并使用终端。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:06:09.460

如果您无法开始`shotgun`工作，那么[重新加载 Sinatra 的新推荐方法似乎是`rerun`](http://www.sinatrarb.com/faq.html#reloading).

要使用它：

```
> gem install rerun
> cd /Users/HelenasMac/Desktop/RubyForm
> rerun ruby basics.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:26:03.353

### 显式设置视图目录

除非您对视图使用内联模板，否则`enable :inline_templates`如果默认值不适合您，您可能需要显式定义模板目录。文档[描述了如何设置您的视图目录](http://www.sinatrarb.com/configuration.html)，如下所示：

> :views - 查看模板目录
> 
> 一个字符串，指定视图模板所在的目录。默认情况下，这被假定为应用程序根目录中名为“views”的目录（参见 :root 设置）。在应用程序的根目录中指定替代目录名称的最佳方法是使用引用 :root 设置的延迟值：
> 
> 设置 :views, Proc.new { File.join(root, "templates") }

您可能还需要显式设置**:root**，并确保**:root**和**:views**在您当前的工作目录中都有意义。

# r - 在数据框列中提取部分日期

> ID：14366688
> 
> 赞同：3
> 
> 时间：2013-01-16T19:55:26.763
> 
> 标签：r, quantmod, posixct

提前感谢您的帮助。我正在使用 quantmod 包中的 getQuote 函数，它返回以下数据框：

![在此处输入图像描述](../Images/59b9f00cf91aa30e8402a65b6602c13a.png)

有没有办法修改第一列中的所有日期以排除时间戳，同时保留数据框结构？我只想要第一列中的“YYYY-MM-DD”。我知道如果它是日期向量，我会使用 substr(df[,1],1,10)。我还研究了 apply 函数：apply(df[,1],1,substr,1,10)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:25:52.917

另一个尚未提及的选项：

```
tt <- getQuote("AAPL")
trunc(tt[,1], units='days') 
```

这将返回 中的日期`POSIXlt`。`as.POSIXct`如果你愿意，你可以把它包起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:08:29.013

使用`?strptime`

```
tt <- getQuote("AAPL")
tt[,1]
[1] "2013-01-16 02:52:00 CET"
as.POSIXct(strptime(tt[,1],format ='%Y-%m-%d')) ## as.POSIXct because strptime returns POSIXlt
[1] "2013-01-16 CET" 
```

**编辑**

您可以使用 POSIXct 的格式参数，但您需要先将 tt[,1] 转换为字符。

```
as.POSIXct(as.character(tt[,1]),format ='%Y-%m-%d')
[1] "2013-01-16 CET" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T20:15:06.200

我会这样做`lubridate`

```
library(plyr)
library(lubridate)

tickers <- c("AAPL","AAJX","ABR")
df <- ldply(tickers, getQuote)
rownames(df) <- tickers

df[,"Trade Time"] <- paste(year(df[,"Trade Time"]),month(df[,"Trade Time"]),day(df[,"Trade Time"]),sep="-") 
```

打印日期可能有一种更优雅的方式，但这是我首先想到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T01:00:01.933

您可以只使用 gsub。无需转换数据类型。

```
tt <- getQuote("AAPL")
tt[, 'Trade Time']<- gsub(" [0-9]{2}:[0-9]{2}:[0-9]{2}", "", tt[, 'Trade Time']) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T09:19:23.180

它可以很简单：

```
tt[,1]=as.Date(tt[,1]) 
```

（其中 tt 是`tt <- getQuote("AAPL")`，如替代答案所示）

逗号前的空格表示“*执行所有行*”，逗号后的 1 表示“*对（仅）第一列进行操作*”。

我更喜欢这个解决方案，因为它为您提供了一个 Date 对象，如果您试图剥离时间戳，它必须正是您想要的。

agstudy 的回答给你一个*带有 timezone*的日期，当你第一次在不同的时区运行你的脚本时，这会咬你。（顺便说一句：由于我的测试代码中有一个微妙的时区假设，我在圣诞节期间在英国运行单元测试套件时遇到了一些回归。）

# css - CSS 对齐方式

> ID：14366691
> 
> 赞同：-2
> 
> 时间：2013-01-16T19:55:32.670
> 
> 标签：css

> **可能重复：**
> [在 <div> 中格式化 <li> 元素](https://stackoverflow.com/questions/14365217/formatting-an-li-element-within-a-div)

facebook 和 twitter 元素没有对齐。我希望它们完美地定位，一个在另一个之上。请问你能帮忙吗？

这是我的代码：

```
#floating-box {
width: 65px;
height:auto;
background-color: #484848;
margin: 54px 10px 0px 623px;
position:absolute;
z-index:1;
text-align: justify;
border-top: 1px solid #000;
border-left: 1px solid #000;
border-bottom: 1px solid #000;
border-right: 1px solid #484848;
 }
.social {
position : relative;
list-style-type : none;
margin-left: 2px;
}

.social li a {
float: left;
padding: 1px 5px 5px 0px;
margin: 0px 0px 3px 0px;
display: inline;
} 
```

使用此 CSS 的 HTML 是：-

```
<div id="floating-box">
<img src="likeusnow.jpg" />
<ul class="social"><!-- Facebook Like/Share Button -->
<li><a name="fb_share" type="box_count" rel="nofollow"          share_url="http://www.mysite.com"></a> 
 </li>

<li>
<a href="https://twitter.com/share" rel="nofollow" class="twitter-share-button" data- url="http://www.mysite.com" data-lang="en" data-count="vertical">Tweet</a>
</li>

 </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:01:55.810

试试`display: inline-block;`吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:47:07.293

好的，我对此做了很多假设。

**假设**

1.  您正在使用垂直 Facebook 分享（已被弃用，因此我正在使用 Facebook Like 按钮进行演示）
2.  您正在使用风格相似的 Twitter 分享，也使用垂直计数。
3.  这应该是一个在屏幕中间弹出的模态对话框。
4.  图片“likeusnow.jpg”只是文字“Like Us Now”

我会浮动`<li>`元素而不是`<a>`'s. 样式化`<a>`'s 无关紧要，因为它们的内容是`<iframe>`. 给你带来麻烦的是 div 的固定宽度。虽然按钮应该向左浮动，但没有足够的空间，Twitter 按钮被撞到了 Facebook 按钮的下方。

CSS：

```
#floating-box {
  position:absolute;
  background-color: #484848;
  margin: 54px 10px 0px 623px;
  z-index:1;
  text-align: justify;
  border: 1px solid #000;
  border-right: 1px solid #484848;
  padding: 15px;
}

.social {
  position: relative;
  list-style: none;
  margin-left: 2px;
  padding: 0;
}

.social li {
  float:left;
  margin-left: 10px;
} 
```

我使用 jsFiddle 做了一个演示，并[在此处](http://jsfiddle.net/4ua5K/)插入了占位符 Facebook Like 和 Twitter Share 插件。

# loadrunner - 使用 Web(HTML/HTTP) 协议和应用程序需要我单击一个按钮才能提交表单

> ID：14366693
> 
> 赞同：0
> 
> 时间：2013-01-16T19:55:48.540
> 
> 标签：loadrunner

我有一个已经运行良好的现有脚本很长一段时间，现在看来应用程序的流程已经改变。

现在应用程序显示一个部分填写的表格（填写的字段不可编辑），我需要填写缺失的值，单击继续，然后再次单击继续。

现在，loadrunner 不会记录/注册第一次单击继续按钮，而第二次单击实际上会提交表单。

我尝试了各种选项，包括使用 Web（单击和脚本）录制，但没有成功，尝试单击图像/链接（第一个继续），但没有成功。

现在我不确定下一步该怎么做，希望这里的专家能够提供帮助。

...代码....

```
test_Funds()
{

lr_start_transaction("Login_test");

web_add_cookie("cust_xl=en; DOMAIN={test_Funds_2_p_env}");

web_add_cookie("login_date=2011-12-02%2001%3A43%3A36; DOMAIN={test_Funds_2_p_env}");

web_reg_find("Text=\r\n"
    "\t\t\r\n"
    "\t\t\t\r\n"
    "\t\t\t\r\n"
    "\t\t\t\tTest\r\n"
    "\t\t\t\r\n"
    "\t\t\r\n"
    "\t",
    LAST);

web_url("{test_Funds_2_p_env}",
    "URL=https://{test_Funds_2_p_env}/",
    "Resource=0",
    "RecContentType=text/html",
    "Referer=",
    "Snapshot=t1.inf",
    "Mode=HTML",
    EXTRARES,
        URLs....
    LAST);

lr_think_time(5);

web_submit_data("login",
    "Action=https://{test_Funds_2_p_env}/login",
    "Method=POST",
    "RecContentType=text/plain",
    "Referer=https://{test_Funds_2_p_env}/",
    "Snapshot=t2.inf",
    "Mode=HTML",
    ITEMDATA,
    "Name=action", "Value=login_user", ENDITEM,
    "Name=username", "Value={test_Funds_2_p_username}", ENDITEM,
    "Name=password", "Value={test_Funds_2_p_password}", ENDITEM,
    LAST);

lr_end_transaction("Login_test", LR_AUTO);

web_reg_find("Text=\r\n"
    "\t\t\r\n"
    "\t\t\t\r\n"
    "\t\t\t\r\n"
    "\t\t\t\ttest\r\n"
    "\t\t\t\r\n"
    "\t\t\r\n"
    "\t",
    LAST);

web_add_cookie("login_date=2011-12-02%2001%3A47%3A43; DOMAIN={test_Funds_2_p_env}");

web_url("{test_Funds_2_p_env}_2",
    "URL=https://{test_Funds_2_p_env}/",
    "Resource=0",
    "RecContentType=text/html",
    "Referer=",
    "Snapshot=t3.inf",
    "Mode=HTML",
    EXTRARES,
    urls...
    LAST);

web_reg_find("Text=Text",
    LAST);

lr_think_time(10);

web_reg_save_param_ex(
    "ParamName=p_uniqueid",
    "LB=\"unique_id\" value=\"",
    "RB=\">",
    SEARCH_FILTERS,
    LAST);

web_reg_save_param_ex(
    "ParamName=p_uid",
    "LB='uid', ",
    "RB=)",
    SEARCH_FILTERS,
    LAST);

lr_think_time(10);
web_reg_save_param_ex(
    "ParamName=cpm_id",
    "LB=\"cpm_id\" value=\"",
    "RB=\"",
    SEARCH_FILTERS,
    LAST);

lr_start_transaction("Clicking on Open link");

web_link("Open",
    "Text=Open",
    "Snapshot=t4.inf",
    EXTRARES,
    urls....
    LAST);

web_reg_find("Text=test",
    LAST);

lr_end_transaction("Clicking on Open link", LR_AUTO);

lr_start_transaction("Form_Submit");

web_submit_data("portal",
    "Action=https://{test_Funds_2_p_env}/test",
    "Method=POST",
    "RecContentType=text/html",
    "Referer=https://{test_Funds_2_p_env}/test?action=GoOpenChoose",
    "Snapshot=t5.inf",
    "Mode=HTML",
    ITEMDATA,
    "Name=txn_type", "Value=TWIN", ENDITEM,
    "Name=txn_type_source", "Value=", ENDITEM,
    "Name=cpm_id", "Value={cpm_id}", ENDITEM,
    "Name=cpm", "Value=test", ENDITEM,
    "Name=unique_id", "Value={p_uniqueid}", ENDITEM,
    "Name=vals_changed", "Value=1", ENDITEM,
    "Name=wtd_amount", "Value={test_Funds_2_p_wtd_amt}", ENDITEM,
    "Name=transit_no", "Value={test_Funds_2_p_transit_no}", ENDITEM,
    "Name=institution_no", "Value={test_Funds_2_p_inst_no}", ENDITEM,
    "Name=account_no", "Value={test_Funds_2_p_acct_no}", ENDITEM,
    "Name=confirm_account_no", "Value={test_Funds_2_p_confirm_acct_no}", ENDITEM,
    "Name=amount", "Value={test_Funds_2_p_wtd_amt}", ENDITEM,
    "Name=password", "Value={test_Funds_2_p_password}", ENDITEM,
    "Name=action", "Value=Dotest", ENDITEM,
    "Name=uid", "Value={p_uid}", ENDITEM,
    EXTRARES,
    urls....
    LAST);

lr_end_transaction("Form_Submit", LR_AUTO);

lr_free_parameter("p_uniqueid");
lr_free_parameter("p_uid");

lr_think_time(10);

lr_start_transaction("Logout_User");

web_link("FRANÇAIS",
    "Text=FRANÇAIS",
    "Snapshot=t6.inf",
    EXTRARES,
    URLs...
    LAST);

lr_end_transaction("Logout_test", LR_AUTO); 
```

返回0；}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:39:25.603

a) 这是否涉及验证码？

b) 对于有问题的部分，您是否尝试过 URL 模式或 web_custom_request()？

c) 一旦你可以记录，你是在处理所有的动态数据还是与自相关规则有关？（我注意到脚本中有一些需要从动态角度处理的静态数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:55:18.247

我能够解决问题，有一个代码在与其余数据一起提交时将提交表单而不要求确认。

由于某种原因，我在上一个网页中找到了此代码，该代码在录制时没有被捕获。我找到了代码，将其关联起来，现在当我提交请求时，它会遇到任何问题。

# scala - 调用缺少参数的构造函数

> ID：14366697
> 
> 赞同：2
> 
> 时间：2013-01-16T19:55:58.443
> 
> 标签：scala, properties, constructor

我刚刚开始使用 Scala，想知道是否可以创建一个具有默认值的不可变属性的类，并且我们可以在构造函数中启动传递任何属性值：

因此，例如在 JavaScript 中，以下是可能的（最终结果不会是不可变的，但您会明白的）：

```
var myObj = function(params){
    this.a = params.a || 'default a';
    this.b = params.b || 'default b';
    this.c = params.c || 'default c';
};

new myObj({c:'override c', b:'override b'}); 
```

我会用默认值和新的 b 和 c 属性构造我的新对象...正如您所看到的，这里的构造函数以任何顺序接受任意数量的对象属性。

所以在 Scala 中举一个非常简单的例子：

```
case class Customer(
    val id: Long = 0,
    val name: String = ""
) 
```

我知道我可以这样做：

```
val customer = Customer(0, "company") 
```

但我想这样做：

```
val customer = Customer{ name = "company" } 
```

所以我最终不会有 50 个构造函数。

可能吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T20:00:27.330

您不需要像在 javascript 中那样传递哈希值，只需将值分配给构造函数中的参数即可。这称为“命名参数”，如下所示：`Customer(name = "Peter")`

# sql-server - “数据转换错误”与 BULK INSERT

> ID：14366701
> 
> 赞同：1
> 
> 时间：2013-01-16T19:56:15.733
> 
> 标签：sql-server, sql-server-2008, bulkinsert

我正在尝试使用批量插入命令将一些数据导入 SQL Server——

这是我得到的错误 -

```
Bulk load data conversion error (type mismatch or invalid character for the specified codepage) for row 1, column 6 (NClaims). 
```

现在，我创建了一个测试文件，其中只有一行可以成功导入的数据——

```
00000005^^18360810^408^30^0 
```

但是，当我再添加 2 行数据（与上面的行非常相似）时，我收到了上面给出的错误消息。这些是另外两行数据——

```
00000003^^18360801^142^42^0
00000004^^18360000^142^10^0 
```

正如您所看到的，似乎没有任何区别（就上述 2 行的数据长度或数据类型而言，与之前给出的单行相比）......那么为什么我会收到这个错误？我如何解决它？

编辑 -

这是我正在执行的命令——

```
BULK INSERT GooglePatentsIndividualDec2012.dbo.patent
FROM 'C:\Arvind Google Patents Data\patents\1patents_test.csv'
WITH ( FIELDTERMINATOR = '^', ROWTERMINATOR='\n'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:56:32.703

要有耐心，做实验，一次排除一件事。例如：

1.  删除第三行并检查一切是否正常。
2.  如果是，则返回此行，但更改`10^0`为`42^0`，再次检查。
3.  重复第 2 步，将所有数据更改为第 2 行中的值，这没问题。

您将找到导致错误的数据。

# vb.net - 我是否正确实现了这个插入排序？

> ID：14366704
> 
> 赞同：1
> 
> 时间：2013-01-16T19:56:32.203
> 
> 标签：vb.net, insertion-sort

我有几个线程，其中包含正在处理的对象队列，而另一个线程从各种输入中读取并创建这些对象。某些对象必须由特定线程处理，而其他对象可以由任何空闲线程处理（因此不为所有对象使用一个队列的原因），但我仍然希望保持负载合理平衡。我有一个包含每个线程使用的所有 ConcurrentQueues 的数组，我想根据它们的计数对它们进行排序。由于大多数情况下队列几乎都已排序，因此插入排序在这里会表现良好。

（编辑：对于那些询问的人，我正在写我自己的，因为根据[http://msdn.microsoft.com/en-us/library/6tf1f0bc(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6tf1f0bc(v=vs.100).aspx) “此方法使用 QuickSort 算法， " 我想要一个插入排序)

我使用[http://en.literateprograms.org/Insertion_sort_(Visual_Basic_.NET](http://en.literateprograms.org/Insertion_sort_(Visual_Basic_.NET) ) 帮助我，但我并不真正相信自己。这看起来正确吗？

```
 Dim i As Integer = 0

        While (i < MaxThreads)

            Dim j As Integer = i - 1
            Dim v As Concurrent.BlockingCollection(Of BufferEntry) = ThreadQueues(i)

            While (j > -1)
                If (ThreadQueues(j).Count <= v.Count) Then Exit While
                ThreadQueues(j + i) = ThreadQueues(j)

                j -= 1
            End While

            ThreadQueues(j + 1) = v

            i += 1
        End While 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T06:06:09.953

整体看起来还不错，但我觉得这条线

```
ThreadQueues(j + i) = ThreadQueues(j) 
```

应该

```
ThreadQueues(j + 1) = ThreadQueues(j) 
```

# mysql - 如何从 MySql 中选择相似的字符串值？

> ID：14366705
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:56:33.517
> 
> 标签：mysql, database

我有一个包含以下列的表格“问题”：

1.  ID（主键）
2.  标题（问题主题/标题）
3.  正文（问题详情）

现在说如果用户在问一个问题，并且一旦他完成了他的标题，我实际上会触发一个事件来获取类似于这个标题的问题。

现在我如何将用户的输入（标题）与问题表中的现有标题相匹配并取出类似的标题？

我正在使用 MySql 数据库。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:10:22.173

也许是 Levenshtein 距离？

```
CREATE FUNCTION levenshtein( s1 VARCHAR(255), s2 VARCHAR(255) ) 
  RETURNS INT 
  DETERMINISTIC 
  BEGIN 
    DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT; 
    DECLARE s1_char CHAR; 
    -- max strlen=255 
    DECLARE cv0, cv1 VARBINARY(256); 
    SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0; 
    IF s1 = s2 THEN 
      RETURN 0; 
    ELSEIF s1_len = 0 THEN 
      RETURN s2_len; 
    ELSEIF s2_len = 0 THEN 
      RETURN s1_len; 
    ELSE 
      WHILE j <= s2_len DO 
        SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1; 
      END WHILE; 
      WHILE i <= s1_len DO 
        SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1; 
        WHILE j <= s2_len DO 
          SET c = c + 1; 
          IF s1_char = SUBSTRING(s2, j, 1) THEN  
            SET cost = 0; ELSE SET cost = 1; 
          END IF; 
          SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost; 
          IF c > c_temp THEN SET c = c_temp; END IF; 
            SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1; 
            IF c > c_temp THEN  
              SET c = c_temp;  
            END IF; 
            SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1; 
        END WHILE; 
        SET cv1 = cv0, i = i + 1; 
      END WHILE; 
    END IF; 
    RETURN c; 
  END; 
```

辅助功能：

```
CREATE FUNCTION levenshtein_ratio( s1 VARCHAR(255), s2 VARCHAR(255) ) 
  RETURNS INT 
  DETERMINISTIC 
  BEGIN 
    DECLARE s1_len, s2_len, max_len INT; 
    SET s1_len = LENGTH(s1), s2_len = LENGTH(s2); 
    IF s1_len > s2_len THEN  
      SET max_len = s1_len;  
    ELSE  
      SET max_len = s2_len;  
    END IF; 
    RETURN ROUND((1 - LEVENSHTEIN(s1, s2) / max_len) * 100); 
  END; 
```

（来自[http://www.artfulsoftware.com/infotree/queries.php#552](http://www.artfulsoftware.com/infotree/queries.php#552)），常见的mysql查询

或者您可以使用带有大量通配符的“LIKE”，这样会更简单

```
 SELECT title FROM yourTable WHERE title LIKE '%yourTitle%'; 
```

如果你也认为身体是相关的，

```
 SELECT title FROm yourTable WHERE body LIKE '%yourTitle%'; 
```

# c# - 当用户选择文本时，将自定义项添加到右键菜单

> ID：14366708
> 
> 赞同：2
> 
> 时间：2013-01-16T19:56:37.403
> 
> 标签：c#, .net, windows

我想在用户选择一些文本并右键单击时出现的菜单中添加一个自定义菜单项。我搜索了很多，但没有得到任何答案。也许我没有输入正确的关键字。

1.  是否有可能做到这一点？
2.  如果这是可能的，我想在用户选择文本时对 Windows 中的所有应用程序执行此操作。是否有一种通用的方法来做到这一点，或者必须编写特定于应用程序的代码？

我正在使用 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:58:20.353

我认为您不能在所有 Windows 应用程序中普遍做到这一点。但当然可以在您自己的应用程序中使用弹出菜单进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:09:52.703

通用方式基本上是编写“自定义外壳扩展”。CodeProject 上有一篇关于如何执行此操作的文章。

![自定义外壳扩展](../Images/c10600b1555980d90353bf9bb6c0ec55.png)

[http://www.codeproject.com/Articles/174369/How-to-Write-Windows-Shell-Extension-with-NET-Lang](http://www.codeproject.com/Articles/174369/How-to-Write-Windows-Shell-Extension-with-NET-Lang)

另一种方法是将其构建到您的应用程序中。例如，您可能有一个文本编辑器，并且您想要突出显示一个单词并获得该单词的定义。为此，您需要实现一个上下文菜单。CodeReview.StackExchange 详细介绍了非常基本的概念。

[https://codereview.stackexchange.com/questions/3983/c-programatically-creating-context-menu](https://codereview.stackexchange.com/questions/3983/c-programatically-creating-context-menu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:00:49.450

我还尝试了一种将项目添加到标准 ContextMenu 的方法，但失败了。在我看来，唯一的解决方案是将 TextBox 的 ContextMenuStrip 属性设置为 ContextMenuStrip 类的实例，并同时实现标准和自定义菜单项。很容易模仿标准操作，因为 TextBox 类提供了所有必需的方法：剪切、复制、粘贴、全选。

# knockout.js - 如何计时 knockoutjs 更新？

> ID：14366710
> 
> 赞同：0
> 
> 时间：2013-01-16T19:56:43.440
> 
> 标签：knockout.js

我正在使用带有延迟更新插件的 knockoutjs 2.2。我通过 Ajax 从服务器加载大量数据，并用它来实例化一堆对象（比如大约 5K 个对象，每个对象都有六个属性），其中一些然后以 HTML 呈现。整个过程需要 10-20 秒，但我不确定时间都去哪儿了，也不知道淘汰赛是否在做不应该做的额外工作。

JSON结构的传递和创建比较快；我添加了计时调用来衡量从 JSON 数据创建数据图的过程。我现在想做的是测量 knockoutJS 计算`ko.computed`值和应用绑定所需的时间。我怎么做？是什么触发了更新（在填充视图模型时已被推迟），我如何将它括起来以测量它花了多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:22:51.063

您可以创建一个记录时间的自定义绑定。这是一个例子：http: [//jsfiddle.net/mbest/WTYhs/](http://jsfiddle.net/mbest/WTYhs/)

```
var startTime = new Date().getTime();
ko.bindingHandlers.logTime = {
  reset: function() {
    startTime = new Date().getTime();
  },
  init: function(element, valueAccessor) {
    var value = valueAccessor();
    console.log(value.msg + ' init: ' + (new Date().getTime() - startTime) + ' ms');
  },
  update: function(element, valueAccessor) {
    var value = valueAccessor();
    if (typeof value.track == 'function')
      value.track();
    console.log(value.msg + ' update: ' + (new Date().getTime() - startTime) + ' ms');
  }
}; 
```

# java - 第一个动画完成后如何开始第二个动画

> ID：14366711
> 
> 赞同：0
> 
> 时间：2013-01-16T19:56:56.290
> 
> 标签：java, android, xml, animation

我为两个图像创建了两个动画，它工作正常，但我希望在第一个动画完成时开始第二个动画。

编码：

```
package com.example.animatest;

import android.app.Activity;
import android.os.Bundle;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;

public class animation001 extends Activity {

    private ImageView image1;
    private ImageView image2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        image1 = (ImageView) findViewById(R.id.imageView1);
        image2 = (ImageView) findViewById(R.id.imageView2);

        final Animation animTranslate1 = AnimationUtils.loadAnimation(this,
                R.anim.translate);
        final Animation animTranslate2 = AnimationUtils.loadAnimation(this,
                R.anim.translate2);

        image1.startAnimation(animTranslate1);
        image2.startAnimation(animTranslate2);

    }

} 
```

这是第一个动画 xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator">
    <translate
        android:fromXDelta="-100%p"
        android:toXDelta="0"
        android:duration="1500"
        android:repeatCount="0"
        android:repeatMode="reverse" />
</set> 
```

这是第二个动画 xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator">
    <translate
        android:fromYDelta="-100%p"
        android:toYDelta="0"
        android:duration="25000"
        android:repeatCount="0"
        android:repeatMode="reverse" />
</set> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:14:13.837

你可以这样做，它对我有用。

只需`AnimationListener`在您的**活动中实施**

```
public class animation001 extends Activity implements AnimationListener {
    .........
} 
```

遵循本[**教程**](http://www.techrepublic.com/blog/app-builder/how-to-use-android-animation-listeners/1227)，它可以帮助您更好地实现**Animation**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:12:50.260

1.  创建`AnimationListener`并实施`public void onAnimationEnd(Animation animation)`.
2.  将此设置`AnimationListener`为您的第一个动画`Animation.setAnimationListener()`
3.  开始你的第二个动画`AnimationListener.onAnimationEnd()`

# python - 使用python删除“（）”

> ID：14366713
> 
> 赞同：-3
> 
> 时间：2013-01-16T19:57:05.933
> 
> 标签：python

我正在尝试使用 python 从文本文件中删除“（）”。

我的输入行如下所示：

```
 N1B N 1.2620(4) 0.3320(4) 0.0049(7) 
```

我想：

```
N 1.2620 0.3320 0.0049 
```

基本上不想要任何被括号包裹的数字，并且想要丢弃第一列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:00:20.227

使用正则表达式`re`：

```
>>> import re
>>> s = 'N1B N 1.2620(4) 0.3320(4) 0.0049(7)'
>>> re.sub('\(.*?\)', '', s)
'N1B N 1.2620 0.3320 0.0049' 
```

`?`标志是为了让你正则表达式变得*懒惰*。没有它你会得到：

```
>>> re.sub('\(.*\)', '', s)
'N1B N 1.2620' 
```

如果您只想删除*数字*，请使用`\d`insted of `.`：

```
>>> s = 'N1B N 1.2620(spam) 0.3320(4) 0.0049(7)'
>>> re.sub('\(\d*?\)', '', s)
'N1B N 1.2620(spam) 0.3320 0.0049' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:02:38.230

或者，不使用惰性量词，您可以使用

```
re.sub('\([^)]*\)', '', s) 
```

此外，要删除第一列，只需使用

```
re.sub('^[^ ]+ ', '', s) 
```

# arrays - MongoDB - 通过整数数组搜索文档

> ID：14366719
> 
> 赞同：7
> 
> 时间：2013-01-16T19:57:27.890
> 
> 标签：arrays, mongodb

我需要检索在数组中至少包含一个值的文档。我的文档结构是：

```
{ "_id": 3, 
"username": "111111", 
"name": "XPTO 1", 
"codes": [ 2, 4, 5 ], 
"available": true }

{ "_id": 4, 
"username": "22222", 
"name": "XPTO 2", 
"codes": [ 3, 5 ], 
"available": true } 
```

我需要通过“代码”进行查找，如果我搜索值“5”，我需要检索在其数组中包含该值的所有文档。

我尝试使用#elemMatch，但没有成功...

```
db.user.find({codes: {"$elemMatch": {codes: [2,8]}}}, {"codes":1}) 
```

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T20:01:10.270

您可以检查数组中的值，就像比较某些字段的值一样。所以，你需要这样做，而不使用 $elemMatch： -

1.  如果要检查数组是否包含单个值 5：-

    ```
    db.user.find({codes: 5}, {codes:1}) 
    ```

    这将返回所有文档，其中`codes`数组包含`5`.

2.  如果要检查数组是否包含给定值集中的值：-

    ```
    db.user.find({codes: {$in: [2, 8]}}, {codes:1}) 
    ```

    这将返回包含 2 或 8 的数组的文档

3.  如果要检查数组是否包含列表中的所有值：-

    ```
    db.user.find({codes: {$all: [2, 5]}}, {codes:1}) 
    ```

    这将返回包含 2 和 5 的数组的所有文档。

# ios - CDAudioManager (cocos2d, ios) 如何混合游戏音乐和背景音乐，让它们同时播放

> ID：14366722
> 
> 赞同：0
> 
> 时间：2013-01-16T19:57:42.330
> 
> 标签：ios, cocos2d-iphone

我在 iOs 游戏中使用 CDAudioManager 和 Cocos2d。我需要同时播放 iOs 播放器音乐和游戏音乐以及音效。这两种模式都不适合我，因为它们要么关闭背景音乐，要么关闭游戏音乐。

这是我想要得到的：

1.  ipod 播放器音乐播放，启动游戏。ipod、游戏音乐和效果一起播放。恢复后，所有频道都应该像恢复前一样工作。
2.  ipod 播放器音乐未播放，启动游戏。游戏音乐和效果播放。以及简历之后。

    ```
    kAMM_FxOnly,                    //!Other apps will be able to play audio
    ---ipod music plays, game effects play. game music doesn't play.
    kAMM_FxPlusMusic,               //!Only this app will play audio
    ---ipod music doesnt play
    kAMM_FxPlusMusicIfNoOtherAudio
    ---ipod music plays, game music doesnt play. 
    ```

在我尝试过的所有模式中，ipod 音乐在最小化后不会恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:17:31.050

我有 99% 的把握这是不可能的。如果 iPod 播放器正在播放音乐，而您播放游戏音乐，它将停止 iPod 播放器。反之亦然。

我个人从未见过（听说过）这样做的应用程序，游戏开发人员的普遍关注更多是在播放 iPod 音乐时不中断它——这意味着如何检测 iPod 音乐是否正在播放以防止播放和打断 iPod 音乐的游戏音乐（因此会惹恼用户）。

# iphone - 如何避免使用ARC在Cocos2d中出现“子已经添加。不能再次添加”？

> ID：14366724
> 
> 赞同：2
> 
> 时间：2013-01-16T19:57:51.187
> 
> 标签：iphone, objective-c, cocos2d-iphone

我在 Cocos2d 中的一个项目在这里遭受痛苦。我创建了一个小项目来隔离我的“误解”的核心。

下面是一个非常简单的代码，它创建了两个独立的场景并假装重用了第一个场景的孩子。我在使用 ARC 的项目中使用 cocos2d v2。

```
CCLabelTTF *label = [CCLabelTTF labelWithString:@"Hello ARC World" fontName:@"Marker Felt" fontSize:64];

CCScene *scene1 =  [HelloWorldLayer scene];
CCScene *scene2 =  [HelloWorldLayer2 scene];

[director_ pushScene: scene1];

// I add my label to the main layer of my scene1.
[[scene1 getChildByTag:1] addChild:label];
//I reset my own scene1 pointer to make sure only the director points to it.
//scene1 = nil;
// I replace the scene, and hope that the old scene1 will be killed by cocos
[director_ replaceScene: scene2];
// When I want to reuse my "label" object, I get the "child already added..." exception
[[scene2 getChildByTag:2] addChild:label]; 
```

为什么这是错误的？我已经读过我不应该与 RemoveAllChildren 之类的东西混在一起，因为 replaceScene 应该为我完成所有的工作。我在这里假设一些根本错误的事情吗？是否严格禁止不同场景之间的物体重复使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:35:25.527

正如其他人已经指出的那样，一个节点只能有一个父节点。让我指出实际的误解。这是您的代码：

```
CCScene *scene1 =  [HelloWorldLayer scene];
CCScene *scene2 =  [HelloWorldLayer2 scene]; 
```

您创建了两个对象scene1 和scene2。它们将保留在范围内，直到当前方法结束。这是您问题的关键。

```
[director_ pushScene: scene1];
[[scene1 getChildByTag:1] addChild:label]; 
```

从 cocos2d 的角度来看，scene1 对象现在是活动场景。您已将标签对象添加为子对象。

```
[director_ replaceScene: scene2]; 
```

scene2 对象不是 cocos2d 中的活动场景。但是，scene1 对象仍然在范围内（当前方法的本地范围），因此直到当前代码块退出（即方法返回）后才会释放它。

```
[[scene2 getChildByTag:2] addChild:label]; 
```

在这里，您尝试将标签作为子节点添加到已经是场景 1 中的子节点的场景 2。砰！并且有充分的理由。

假设您使用的是 ARC，您可能想尝试以下操作：

```
{
    CCScene *scene1 =  [HelloWorldLayer scene];
    [director_ pushScene: scene1];
    [[scene1 getChildByTag:1] addChild:label];
}
{
    CCScene *scene2 =  [HelloWorldLayer2 scene];
    [director_ replaceScene: scene2];
    [[scene2 getChildByTag:2] addChild:label];
} 
```

通过添加额外的代码块，应该在运行 replaceScene 时释放 scene1 对象。为什么？因为 scene1 仅在第一个代码块的范围内，所以在第二个代码块中，scene1 变量已经超出范围，并且 ARC 知道它可以从内存中释放，假设 cocos2d 在 replaceScene 方法期间也删除了对 scene1 的所有强引用。

最后一个假设是我不确定的，因为 cocos2d 本身不使用 ARC，因此由于 cocos2d 的自动释放工作方式，在 replaceScene 之后，scene1 对象可能会继续存在。最迟会在下一帧开始之前释放 scene1 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:02:30.163

cocos 对象只能有一个父对象。当您尝试将其添加到场景 2 中时，“标签”对象已经有一个父对象（场景 1 的标签为 1 的子对象）。如果这是您的意图，您应该为场景 2 创建标签对象的另一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:34:03.640

这里实际发生的是它`scene1`没有被释放，因为它仍然被 ARC 保留。

孩子的父母还是给`nil`里面的`CCNode dealloc`方法。如果场景永远不会被释放，那么孩子的父母仍然是场景1，它很高兴存在。

当您将标签添加到 scene2 时，您会因`child.parent == nil`.

这不是 cocos2d 或 ARC 的错误。正是您编写代码的方式导致了这种情况。像这样重用 CCNode 通常不是一个好主意。

# java - 如何处理@AttributeOverrides 上的@Type

> ID：14366726
> 
> 赞同：3
> 
> 时间：2013-01-16T19:57:51.947
> 
> 标签：java, hibernate, jpa

假设您有这样的`@Embeddable`映射：

```
@Embeddable
public class Wheel {
  @Column(name = "COLOR")
  @Type(type = "my.package.ColorUserType")
  private Color theColor;
} 
```

你尝试像这样使用它：

```
@Entity
@Table(name = "CAR")
public class Car {
  @Embedded
  @AttributeOverride(
    column = @Column(name = "STEERING_WHEEL_COLOR")
    name = "theColor"
  )
  private Wheel steeringWheel;
} 
```

当我这样做时，我会`org.hibernate.MappingException: Could not determine type for: my.package.Color`在启动时获得巨大的脂肪。

那么有没有办法覆盖类型或确保它使用定义的类型，`@Embeddable`因为在使用时它显然没有被保留`@AttributeOverride`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:31:18.393

看起来这无法完成，因为它不是`Basic`类型映射。来源：[Java 6 API - AttributeOverride](http://docs.oracle.com/javaee/6/api/javax/persistence/AttributeOverride.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T21:25:23.570

`AttributeConverter`在这个答案中写一个[https://stackoverflow.com/a/35758475/572380](https://stackoverflow.com/a/35758475/572380)解决了我的问题。

# sql-server - 从可能包含多个的表中选择最“重要”的行

> ID：14366730
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:58:13.827
> 
> 标签：sql-server

我有一个类似的表：

```
incident_id    action    action_date
-----------    ------    -----------
    1            A        2012-12-01
    2            A        2012-12-01
    2            Z        2012-12-02
    3            A        2012-12-03
    3            Z        2012-12-04
    3            G        2012-12-05 
```

在真实表中还有更多操作，日期是日期时间。

这是我想要的结果：

```
incident_id    color
-----------    -----
    1          GREEN
    2          RED
    3          BLUE 
```

我不知道如何做到这一点，我一般对 SQL 很薄弱。

哎呀，抱歉没有解释颜色。好的，如果事件具有操作 A，则其为绿色。动作 B 胜过 A，然后颜色变为红色。动作 C 再次胜过其他动作，颜色为蓝色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:07:39.207

您可以加入一个（永久或派生的）表，该表将等级映射到操作并找到`MAX`

```
WITH Actions(action, priority)
     AS (SELECT 'A', 1  UNION ALL
         SELECT 'Z', 2 UNION ALL
         SELECT 'G', 3)
SELECT Y.incident_id,
       CASE MAX(A.priority)
         WHEN 1 THEN 'GREEN'
         WHEN 2 THEN 'RED'
         WHEN 3 THEN 'BLUE'
       END
FROM   YourTable Y
       JOIN Actions A
         ON A.action = Y.action
GROUP  BY Y.incident_id 
```

# ruby - 运行我的第一个 RSpec 测试，有没有办法只打印错误而没有回溯？

> ID：14366731
> 
> 赞同：2
> 
> 时间：2013-01-16T19:58:19.027
> 
> 标签：ruby, rspec

我正在在线查看本教程： [https ://www.relishapp.com/rspec/docs/gettingstarted](https://www.relishapp.com/rspec/docs/gettingstarted)

```
# game_spec.rb
describe Game do
  describe "#score" do
    it "returns 0 for all gutter game" do
      game = Game.new
      20.times { game.roll(0) }
      game.score.should == 0
   end
 end
end 
```

运行第一个示例，我注意到他们列出的错误消息比我看到的要短得多。在我的终端上，堆栈跟踪太长了，它会从顶部滚动。有没有办法缩短错误消息/堆栈输出以使其适合？

```
/testspec/game_spec.rb:3:in `<top (required)>': uninitialized constant Game (NameError)
from /.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load'
from /.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
from /.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
from /.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
from /.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22:in `run'
from /.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:80:in `run'
from /.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

我从那里的目录列表中删除了我的家庭目录。是否可以将详细程度简化为 NameError 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:13:53.033

正如我在评论中猜测的那样，您的配置/安装存在错误。

```
`require': cannot load such file -- ./game 
```

Ruby 找不到那个文件。确保您有正确的文件，然后再次运行测试。

# jquery - jQuery Datatables bSearchable 过滤输入值

> ID：14366743
> 
> 赞同：0
> 
> 时间：2013-01-16T19:58:57.567
> 
> 标签：jquery, datatables

好的，所以我有一个非常标准的动态数据表，但我似乎无法让搜索框根据输入或选择框的值进行过滤。

```
oTable = $('#itemTable').dataTable({
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "sDom": '<""f>t<"F"lp>',
            "aoColumns": [
                { "sWidth": "45px", "bSearchable": false},
                { "sWidth": "150px"}, // <input type="text">
                { "sWidth": "150px"}, // <select>
                { "sWidth": "150px"}, // <select>
                { "sWidth": "125px"}, // <input type="text">
                { "sWidth": "75px", "bSearchable": false},
                { "sWidth": "75px", "bSearchable": false},
                { "sWidth": "75px", "bSearchable": false},
                { "sWidth": "75px", "bSearchable": false},
                { "sWidth": "75px", "bSearchable": false}
            ], 
```

如何获取数据表以根据文本框的值和/或选择框的当前选定值过滤搜索结果？

我找到了这个[jQuery DataTables - 包含文本字段的列的自定义过滤器，](https://stackoverflow.com/questions/13043458/jquery-datatables-custom-filter-for-column-that-contains-text-field)但我似乎无法让它为我工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:34:30.260

我设法使用 jquery 数据表的[jquery-datatables-column-filter 插件](https://code.google.com/p/jquery-datatables-column-filter/)使它工作

一旦包含，您就可以添加`.columnFilter()`到您的数据表中。关于这个插件的重要部分是您可以正常使用数据表“aoColumns”并且`.columnFilter()`只是覆盖特定列，我只是包含其他数据表设置来显示这一点，请参见下面的示例：

```
var asInitVals = new Array();

$(document).ready(function() {
    var oTable = $('#myTable').dataTable( {
        "bPaginate": true,
        "fnDrawCallback":function(){$('.edit').editable(function(value, settings) { 
                            hasBeenEdited(this);
                            return(value);
                         }, { 
                            type    : 'text',
                            submit  : 'OK'
                        });},

        "oLanguage": {
            "sSearch": "Search all columns:",
        },
        "aoColumns": [
                        { "bSortable": true ,"bSearchable": true},
                        { "bSearchable": true},
                        {"bSortable": true ,  "bSearchable" : true}, 
                        {"bSearchable": true }, 
                        {"bSearchable": true }, 
                        { },
                        { }
                    ]
    } ).columnFilter({"aoColumns":[{ type: "select", values: [ 'Value 1', 'Value 2', 'Value 3']  },
         null,
         null,
         null,
         null,
         null,
         null]});
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T13:03:48.563

可以使用aoColumns中的mRender属性来指定选择框的选中值进行过滤

```
"mRender": function ( data, type, full ) {
    if (type === "filter")
    {
          node = $.parseHTML(data);
          var val = $(node).find("select option:selected").text();                     
              return val;
    }
    return data;
} 
```

# vb.net - 数据集到 Excel - VB.NET

> ID：14366744
> 
> 赞同：0
> 
> 时间：2013-01-16T19:58:59.793
> 
> 标签：vb.net, winforms

我想这个问题已经在互联网上出现了很多。我已经经历了很多，但仍然遇到这个问题我的要求是将数据集表之一保存到 Excel 文件中。我在 Dataset.Table 对象中有我需要的所有数据。互联网上的很多代码都在讨论遍历列和行并将其分配给 Excel 文件中的单元格。我能够做到这一点，但这并不能解决问题，因为几千行的大型数据集需要 5 分钟以上的时间来执行并获得输出。还有其他有效的方法吗？感谢任何输入，因为每一点信息对我都很有用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:01:33.210

您可以创建一个 CSV 文件，然后用 excel 打开它并在 excel 中转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:07:36.830

如果我理解正确，你想从“数据集”做一个 excel 文件。您可以尝试使用 CSV（http://en.wikipedia.org/wiki/Comma-separated_values）；CSV 的格式非常简单。为了性能，在内存中存储尽可能多的数据，最后写入文件，否则如果每次从数据集中读取一行时都写入文件，则需要更长的时间。确保您的文件以 .csv 的扩展名结尾，否则 MS excel 将无法打开它。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:16:13.443

使用 GemBox 电子表格库 (http://gemboxsoftware.com/)。它可以满足您的需要。他们也有免费版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:41:23.243

[EPPlus](http://epplus.codeplex.com/)是一款免费、非常快速且功能强大的 Excel 工具，适用于 Visual Studio 使用，并且可以做任何你想做的事情——它们具有使用该功能将数据表直接输出到 Excel 的`LoadFromDataTable()`功能。

# android - ViewPager 可拖动

> ID：14366746
> 
> 赞同：0
> 
> 时间：2013-01-16T19:59:01.697
> 
> 标签：android, android-viewpager

我想在`ViewPager`未下载图像时锁定拖动 这是我活动的片段：

```
 pager = (ViewPager)super.findViewById(R.id.viewpager_menu);

    FragmentManager fm = getSupportFragmentManager();   
    Log.d(TAG, "ViewPager adapter created");
    mPagerAdapter  = new MyPagerAdapter(fm);
    pager.setAdapter(mPagerAdapter); 
```

在某些情况下如何禁止用户拖动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:29:25.220

推荐你使用完美的安卓图片工具——[通用图片加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

然后你需要创建你自己的类扩展 ViewPager thms[当](http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html) 你的图像被下载时，只需将*启用*值更改为 true。通用图像加载器有一些通知您图像下载过程的侦听器，您可以使用 onLoadingComplete() 方法再次设置您的寻呼机可滑动。

```
imageLoader.displayImage(imageUrl, imageView, options, new ImageLoadingListener() {
    @Override
    public void onLoadingStarted() {
       spinner.show();
    }
    @Override
    public void onLoadingFailed(FailReason failReason) {
        spinner.hide();
    }
    @Override
    public void onLoadingComplete(Bitmap loadedImage) {
        spinner.hide();

    }
    @Override
    public void onLoadingCancelled() {
        // Do nothing
    } 
```

});

# php - MediaWiki python 端口？

> ID：14366750
> 
> 赞同：2
> 
> 时间：2013-01-16T19:59:17.547
> 
> 标签：php, python, mediawiki, wiki

我正在尝试为我们的开发团队设置一个内部 wiki。看起来 mediawiki 是这样做的事实上的手段。

虽然我可能能够使用 PHP 进行设置 - 我很好奇是否有 mediawiki 的 python 端口或类似的框架。

我对 PHP 非常熟悉，并且非常乐意使用它——但我们的大多数开发人员更喜欢 python。我认为运行 python wiki 会很好。

这只是一个好奇心 - 而不是一个严重的问题。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:04:40.783

事实上的 Python wiki 应用程序是[MoinMoin](http://moinmo.in/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:05:41.547

似乎有 Python wiki（其中[MoinMoin](http://moinmo.in/)可能是最常用的 - Apache、Debian、Ubuntu 似乎都在使用它）。

然而，没有 Python MediaWiki 端口——据我所知，唯一的 MediaWiki“端口”是 JAMWiki（一个 Java 端口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:08:31.837

不，MediaWiki 没有 Python 端口。

请记住，您的开发人员将*使用*wiki，而不是为其开发。很可能他们都不需要查看应用程序的内部结构，因此编写它的语言是无关紧要的。

# ios - 应用程序在 iPhone 上运行良好；iPad模拟器只给出黑屏

> ID：14366754
> 
> 赞同：0
> 
> 时间：2013-01-16T19:59:30.243
> 
> 标签：ios, xcode, ios-simulator

这是我的应用程序委托的 applicationDidLaunch 方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
[self.window makeKeyAndVisible];

                //This hides the status bar throughout the app.

[UIApplication sharedApplication].statusBarHidden=YES;

NSMutableArray *tabItems = [[NSMutableArray alloc] initWithCapacity:5];

GHHaikuViewController *hvc = [[GHHaikuViewController alloc] init];
hvc.tabBarItem.title = @"Home";
hvc.tabBarItem.image = [UIImage imageNamed:@"53-house.png"];
[tabItems addObject:hvc];

GHComposeViewController *cvc = [[GHComposeViewController alloc] init];
cvc.tabBarItem.title = @"Compose";
cvc.tabBarItem.image = [UIImage imageNamed:@"216-compose.png"];
[tabItems addObject:cvc];

GHWebViewController *wvc = [[GHWebViewController alloc] init];
wvc.tabBarItem.title = @"Buy";
wvc.tabBarItem.image = [UIImage imageNamed:@"80-shopping-cart.png"];
[tabItems addObject:wvc];

GHFeedback *fvc = [[GHFeedback alloc] init];
fvc.tabBarItem.title = @"Feedback";
fvc.tabBarItem.image = [UIImage imageNamed:@"18-envelope.png"];
[tabItems addObject:fvc];

GHSettingsViewController *svc = [[GHSettingsViewController alloc] init];
svc.tabBarItem.title = @"Settings";
svc.tabBarItem.image = [UIImage imageNamed:@"20-gear-2.png"];
[tabItems addObject:svc];

UITabBarController *tbc = [[UITabBarController alloc] init];
tbc.viewControllers = tabItems;
self.window.rootViewController = tbc;

return YES;
} 
```

这是`viewDidLoad`第一个视图控制器，为清楚起见进行了简化：

```
-(void)viewDidLoad {
[super viewDidLoad];
self.view.backgroundColor = [UIColor whiteColor];
background.backgroundColor = [UIColor whiteColor];
[self.view addSubview:background];
NSLog(@"View loaded.");
} 
```

在 iPhone 上一切正常。在 iPad（或至少模拟器）上，“查看已加载”日志，但不是白屏，而是黑屏。早些时候我在玩 iPad 的故事板，但我已经删除了它，我认为我删除了所有文件，现在一切都从代码运行。我已经清理了项目。我在看什么？

**编辑：** 这是 Xcode 中目标摘要的截图。

![在此处输入图像描述](../Images/a6651f80a4f4ee7993ac165c28d16a68.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:17:17.663

如果您不使用主故事板或 xib，则需要创建`UIWindow`in 代码：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:15:40.190

确保在项目设置中清除了 iPad 的情节提要。删除情节提要时，IMO Xcode 不会删除该条目。您应该只在那里配置 iPhone 的情节提要。

# objective-c - XCODE 4.5 - 预期标识符... (UIWebView) - iPhone

> ID：14366755
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:59:31.990
> 
> 标签：objective-c, cocoa-touch

**视图控制器 h：**

```
@interface ViewController : UIViewController

{
IBOutlet UIWebView *WebView1;
IBOutlet UIWebView *WebView2;
IBOutlet UIWebView *WebView3;
IBOutlet UIWebView *WebView4;
IBOutlet UIWebView *WebView5;
}

@end 
```

**视图控制器 m：**

```
#import "ViewController.h"

@interface UIViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];

NSURL *myURL1 = [NSURL URLWithString:[@"http:://www.youtube.com"]];
                NSURLRequest *MyRequest1 = [NSURLRequest requestWithURL:myURL1];
                [WebView1 loadRequest:MyRequest1];

NSURL *myURL2 = [NSURL URLWithString:[@"http:://www.gmail.com"]];
                NSURLRequest *MyRequest2 = [NSURLRequest requestWithURL:myURL2];
                [WebView2 loadRequest:MyRequest2];

NSURL *myURL3 = [NSURL URLWithString:[@"http:://www.soundcloud.com"]];
                NSURLRequest *MyRequest3 = [NSURLRequest requestWithURL:myURL3];
                [WebView3 loadRequest:MyRequest3];

NSURL *myURL4 = [NSURL URLWithString:[@"http:://www.socialblade.com"]];
                NSURLRequest *MyRequest4 = [NSURLRequest requestWithURL:myURL4];
                [WebView4 loadRequest:MyRequest4];

NSURL *myURL5 = [NSURL URLWithString:[@"http:://www.fullscreen.net"]];
                NSURLRequest *MyRequest5 = [NSURLRequest requestWithURL:myURL5];
                [WebView5 loadRequest:MyRequest5];
}

@end 
```

**说明：**

错误出现在每个链接“]”上。我哪里错了？而且我无法将我的插座链接/连接到选项卡中设置的 UIWebView。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:01:48.513

这很简单。您不需要 [] 在每个字符串周围。将其 URL 更改为以下内容：

SURL *myURL4 = [NSURL URLWithString:@"http:://www.socialblade.com"; NSURLRequest *MyRequest4 = [NSURLRequest requestWithURL:myURL4]; [WebView4 加载请求：MyRequest4]；

那应该解决它。如果没有，请告诉我。

## 编辑

此外，您错误地声明了您的属性，这导致您无法连接它们。您应该像这样声明您的 webView：

视图控制器 h：

```
@interface ViewController : UIViewController

@property (assign) IBOutlet UIWebView *WebView1;
@property (assign) IBOutlet UIWebView *WebView2;
@property (assign) IBOutlet UIWebView *WebView3;
@property (assign) IBOutlet UIWebView *WebView4;
@property (assign) IBOutlet UIWebView *WebView5;

@end 
```

然后你必须在你的 .m 视图控制器 m 中合成它们：

```
#import "ViewController.h"

@interface UIViewController ()

@end

@implementation ViewController
@synthesize WebView1;
@synthesize WebView2;
@synthesize WebView3;
@synthesize WebView4;
@synthesize WebView5; 
```

合成后，您可以照常调用它们。:)

# sql - 如何使用“OR”条件连接到表？

> ID：14366759
> 
> 赞同：1
> 
> 时间：2013-01-16T19:59:42.387
> 
> 标签：sql, sql-server-2008, tsql, join, inner-join

我有一条似乎无法解决的 SQL 语句……我不确定如何对我的联接执行“或”。事实上，我什至不确定我是否应该加入...这是我目前所拥有的：

```
SELECT o.* FROM dbo.Orders o
    INNER JOIN dbo.Transactions t1 ON t1.OrderId = o.OrderId
                                  AND t1.Code = 'TX33'
    INNER JOIN dbo.Transactions t2 ON t2.OrderId = o.OrderId
                                  AND t2.Code = 'TX34'
WHERE o.PurchaseDate NOT NULL 
```

我还没有运行这个，但我认为这会让我得到所有具有购买日期的订单，这些订单也有 TX33 和 TX34 交易。没有这两项交易的任何订单都不会显示（由于 INNER JOIN）。我坚持的部分是：

我还需要能够确保订单还包含：

*   TX35 和 TX36
*   TX37
*   TX38 和 TX39

只有这些附加条件之一是必要的。我知道我不能简单地 INNER JOIN 因为这意味着它必须在那里。如果我进行常规 JOIN，如果“OR”条件之一本身不是“AND”条件（我不确定如何`TX35 AND TX36`作为一个 JOIN 条件，也不知道`TX38 AND TX39`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:05:39.003

选择逻辑需要在`WHERE`子句中。也许是这样的：

```
SELECT o.* FROM dbo.Orders AS o, dbo.Transactions AS t1, dbo.Transactions AS t2
WHERE t1.OrderId = o.OrderId AND t2.OrderId = o.OrderId
AND o.PurchaseDate NOT NULL
AND (
  (t1.Code = 'TX33' AND t2.Code = 'TX34') OR 
  (t1.Code = 'TX35' AND t2.Code = 'TX36') OR 
  (t1.Code = 'TX37') OR 
  (t1.Code = 'TX38' AND t2.Code = 'TX39') 
) 
```

如果您需要四个独立的选择标准，您将需要对`JOIN`表进行四次，例如：

```
SELECT o.* FROM dbo.Orders AS o, dbo.Transactions AS t1, dbo.Transactions AS t2
WHERE t1.OrderId = o.OrderId AND t2.OrderId = o.OrderId 
AND t3.OrderId = o.OrderId AND t4.OrderId = o.OrderId
AND o.PurchaseDate NOT NULL
AND (t1.Code = 'TX33' AND t2.Code = 'TX34')
AND ( 
  (t3.Code = 'TX35' AND t4.Code = 'TX36') OR 
  (t3.Code = 'TX37') OR 
  (t3.Code = 'TX38' AND t4.Code = 'TX39') 
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:38:49.660

```
SELECT o.* 
FROM dbo.Orders o
WHERE EXISTS ( SELECT *   FROM dbo.Transactions t1 
               WHERE t1.OrderId = o.OrderId   AND t1.Code = 'TX33'
             )
  AND EXISTS ( SELECT *   FROM dbo.Transactions t2 
               WHERE t2.OrderId = o.OrderId   AND t2.Code = 'TX34'
             )
  AND
    (     EXISTS ( SELECT *   FROM dbo.Transactions t1 
                   WHERE t1.OrderId = o.OrderId   AND t1.Code = 'TX35'
                 )
      AND EXISTS ( SELECT *   FROM dbo.Transactions t2 
                   WHERE t2.OrderId = o.OrderId   AND t2.Code = 'TX36'

    OR  EXISTS ( SELECT *   FROM dbo.Transactions t 
                 WHERE t.OrderId = o.OrderId    AND t.Code = 'TX37'
               )

    OR    EXISTS ( SELECT *   FROM dbo.Transactions t1 
                   WHERE t1.OrderId = o.OrderId   AND t1.Code = 'TX38'
                 )
      AND EXISTS ( SELECT *   FROM dbo.Transactions t2 
                   WHERE t2.OrderId = o.OrderId   AND t2.Code = 'TX39'
                 )
    ) ; 
```

* * *

你也可以这样写：

```
SELECT o.* 
FROM dbo.Orders o
  JOIN
    ( SELECT OrderId
      FROM dbo.Transactions
      WHERE Code IN ('TX33', 'TX34', 'TX35', 'TX36', 'TX37', 'TX38', 'TX39')
      GROUP BY OrderId
      HAVING COUNT(DISTINCT CASE WHEN Code = 'TX33' THEN Code END) = 1
         AND COUNT(DISTINCT CASE WHEN Code = 'TX34' THEN Code END) = 1
         AND ( COUNT(DISTINCT 
                     CASE WHEN Code IN ('TX35', 'TX36') THEN Code END) = 2
            OR COUNT(DISTINCT CASE WHEN Code = 'TX37' THEN Code END) = 1
            OR COUNT(DISTINCT 
                     CASE WHEN Code IN ('TX38', 'TX39') THEN Code END) = 2
             ) 
    ) t
    ON t.OrderId = o.OrderId ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T20:24:02.183

您可以在`ON`子句中包含复杂的条件。使用 a`LEFT OUTER JOIN`允许您处理子句中的奇数情况 (TX37) `WHERE`。

请注意，子句`R`中的引用`WHERE`必须处理 NULL 以避免将外连接转换为内连接。

```
select L.*
  from dbo.Orders as L left outer join
    dbo.Orders as R on R.OrderId = L.OrderId and (
      ( L.Code = 'TX33' and R.Code = 'TX34' ) or
      ( L.Code = 'TX35' and R.Code = 'TX36' ) or
      ( L.Code = 'TX38' and R.Code = 'TX39' ) )
  where L.PurchaseDate is not NULL and ( L.Code = 'TX37' or R.Code is not NULL ) 
```

如果您真的只想要包含 TX33、TX34**和**一个或多个其他模式的订单，那么它会稍微复杂一些。使用`group by L.OrderId`with a`count( L.OrderId )`可以让您找到在模式中有两个或多个匹配的订单。它开始接近这样的事情：

```
declare @Orders as Table ( Id Int Identity, OrderId Int, Code VarChar(4), PurchaseDate Date )
insert into @Orders ( OrderId, Code, PurchaseDate ) values
  ( 1, 'TX37', GetDate() ),
  ( 2, 'TX37', GetDate() ), ( 2, 'FOO', GetDate() ),
  ( 3, 'TX33', GetDate() ), ( 3, 'TX34', GetDate() ),
  ( 4, 'TX33', GetDate() ), ( 4, 'TX34', GetDate() ), ( 4, 'TX37', GetDate() ),
  ( 5, 'TX33', GetDate() ), ( 5, 'TX34', GetDate() ), ( 5, 'TX35', GetDate() ),
    ( 5, 'TX36', GetDate() ),
  ( 6, 'TX33', GetDate() ), ( 6, 'TX34', GetDate() ), ( 6, 'TX35', GetDate() ),
    ( 6, 'TX36', GetDate() ), ( 6, 'TX37', GetDate() ),
  ( 7, 'TX38', GetDate() ), ( 7, 'TX39', GetDate() ), ( 7, 'TX35', GetDate() ),
    ( 7, 'TX36', GetDate() ), ( 7, 'TX37', GetDate() )

select * from (
  select L.OrderId,
    Max( case when L.Code = 'TX33' and R.Code = 'TX34' then 1 else 0 end ) as Mandatory,
    Count( L.OrderId ) as Matches
    from @Orders as L left outer join
      @Orders as R on R.OrderId = L.OrderId and (
        ( L.Code = 'TX33' and R.Code = 'TX34' ) or
        ( L.Code = 'TX35' and R.Code = 'TX36' ) or
        ( L.Code = 'TX38' and R.Code = 'TX39' ) )
    where L.PurchaseDate is not NULL and ( L.Code = 'TX37' or R.Code is not NULL )
    group by L.OrderId ) as Arnold
  where Mandatory = 1 and Matches > 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T20:03:55.227

在摆弄了一段时间之后，我想我已经通过以下查询实现了您的目标：

```
SELECT * FROM (
    SELECT o.*, t3.Code as t3 FROM dbo.Orders o
        INNER JOIN dbo.Transactions t1 ON t1.OrderId = o.OrderId
                                      AND t1.Code = 'TX33'
        INNER JOIN dbo.Transactions t2 ON t2.OrderId = o.OrderId
                                      AND t2.Code = 'TX34'
        INNER JOIN dbo.Transactions t3 ON t3.OrderId = o.OrderId
                                      AND (
                                           t3.Code = 'TX35' OR 
                                           t3.Code = 'TX37' OR
                                           t3.Code = 'TX38'
                                          )
    ) WHERE t3 = 'TX37'
        OR (t3 = 'TX36' AND EXISTS (SELECT t.Code FROM dbo.Transactions t WHERE t.OrderId = o.OrderId AND t.Code = 'TX36'))
        OR (t3 = 'TX38' AND EXISTS (SELECT t.Code FROM dbo.Transactions t WHERE t.OrderId = o.OrderId AND t.Code = 'TX39')) 
```

内部`SELECT`应仅返回与代码为 TX34、TX35 和 TX35、TX37 或 TX38 的交易相关联的订单。我们在结果中保留了最后一段代码的副本。

然后我们必须进一步缩小列表的范围，保留第三个代码为 TX37（不需要更多条件）的订单或具有与其关联的剩余代码的订单。

我认为这种方法应该比在不首先过滤它的情况下加入事务表四次执行得更好：它应该需要`O*(T+T+T)*(T+T) = 6*O*T^2`迭代，而四次未过滤连接方法需要`O*T*T*T*T = O*T^4`迭代。

# sql-server-2005 - 列的大小会影响写入速度吗？

> ID：14366760
> 
> 赞同：0
> 
> 时间：2013-01-16T19:59:43.553
> 
> 标签：sql-server-2005, ssis

我的意思不仅仅是数据本身的大小。我目前正在为从生产到测试的简单刷新创建 SSIS 包。我有两张表，一张是 2.5GB，另一张是 1.5GB。2.5GB 的表有几十万行并且正常刷新。但是，另一个表只有 8,000 行，但是最初创建此表和系统的人决定使用它来存储 PDF 文件（导致一列的数据量相当可笑），我无法将其移动，尽管它实际上包含的数据比另一个表少。

如果确实如此，是否有更好的方法来刷新表格？

# python - PyUnit - 如何对某个输入运行进入无限循环的方法进行单元测试？

> ID：14366761
> 
> 赞同：3
> 
> 时间：2013-01-16T20:00:02.150
> 
> 标签：python, unit-testing, timeout, infinite-loop, python-unittest

2011 年的一篇帖子为 NUnit 回答了这个问题： [如何对某个输入运行陷入无限循环的方法进行单元测试？](https://stackoverflow.com/questions/5959343/how-to-unit-test-a-method-that-runs-into-an-infinite-loop-for-some-input/5968281#5968281)

PyUnit 中是否有类似的 TimeoutAttribute 可以以相同的方式使用？

我进行了一些搜索并找到了“持续时间”，但这似乎不一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T04:06:29.400

pyunit 本身似乎没有任何东西，但是作为一种解决方法，您可以自己滚动。这是使用多处理包的方法。

```
from functools import wraps
from multiprocessing import Process

class TimeoutError(Exception):
    pass

def timeout(seconds=5, error_message="Timeout"):
    def decorator(func):
        def wrapper(*args, **kwargs):
            process = Process(None, func, None, args, kwargs)
            process.start()
            process.join(seconds)
            if process.is_alive():
                process.terminate()
                raise TimeoutError(error_message)

        return wraps(func)(wrapper)
    return decorator 
```

以下是如何使用它的示例：

```
import time

@timeout()
def test_timeout(a, b, c):
    time.sleep(1)

@timeout(1)
def test_timeout2():
    time.sleep(2)

if __name__ == '__main__':
    test_timeout(1, 2, 3)

    test_value = False
    try:
        test_timeout2()
    except TimeoutError as e:
        test_value = True

    assert test_value 
```

# jquery - Jquery滚动到div，自定义位置？

> ID：14366762
> 
> 赞同：0
> 
> 时间：2013-01-16T20:00:04.583
> 
> 标签：jquery, scroll

所以我使用这个脚本滚动到 JQuery 中的一个 div：

```
jQuery(document).ready(function($) {

$(".scroll").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 800);
});
}); 
```

问题是当它滚动到一个 div 时，标题（比如前 20px）是隐藏的，因为在我的页面上实现了一个标题顶部栏 div。我将如何控制滚动使其提前停止以便您可以查看整个 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T12:49:24.900

尝试使用

```
$('html, body').animate({scrollTop:$('#your_custom_position_id').position().top}, SPEED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:04:43.727

使用您已有的同一行：

```
$('html,body').animate({scrollTop:$(this.hash).offset().top}, 800); 
```

你只需要发挥`scrollTop`价值。例如

```
$('html,body').animate({scrollTop:$(this.hash).offset().top - 50}, 800); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:03:48.010

您可以添加标题的大小，使其停止在该位置。

```
jQuery(document).ready(function($) {

  $(".scroll").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top+20}, 800);
  });
}); 
```

# org-mode - org-export-as-latex 添加斜杠

> ID：14366770
> 
> 赞同：1
> 
> 时间：2013-01-16T20:00:27.157
> 
> 标签：org-mode

鉴于此文件：

```
#+title: test

some words.

/some emphasis/.

 /some emphasis/.

/emphasis/. 
```

`org-export-as-latex`(emacs 23.4.1; Org-mode 6.33x) 产生这个：

```
[...]
some words.

\emph{some emphasis\}.

 \emph{some emphasis}.

\emph{emphasis}.
[...] 
```

因此编译失败。如果我`*some emphasis*`在标记多于一个单词的地方使用并开始新行，情况也是如此。这是一个已知问题吗？

**更新：**

这似乎是 emacs 23.4.1 的 org-mode（版本 6.33x）的问题，至少从 Ubuntu 12.10 的存储库中安装。使用 emacs 24.1.1（和 7.8.11），问题就消失了。...所以这个问题对我来说已经结束了，但对于仍在使用 emacs < 24.1.1 的人来说，也许还有一个解决方案

# android - 使用 ADB 查找设备

> ID：14366772
> 
> 赞同：0
> 
> 时间：2013-01-16T20:00:31.057
> 
> 标签：android, adb

我通过 Verizon 有一个 LG Lucid (Andriod 4.0.4) 并试图让我的应用程序在它上面运行。我正在使用 WinXP Pro。ADB 的版本是 Android Debug Bridge 版本 1.0.31。在手机上，我打开了 USB 调试选项，然后安装并重新启动了 PC 和。

`C:\adt-bundle-windows-x86\sdk\platform-tools>adb devices List of devices attached`

`C:\adt-bundle-windows-x86\sdk\platform-tools>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:28:53.630

在 nexus 设备中，我选择 ptp 而不是 mtp USB 连接并 adb 查看我的设备

# javascript - Raphael.svg 在 IE9 中返回 false

> ID：14366775
> 
> 赞同：0
> 
> 时间：2013-01-16T20:00:43.720
> 
> 标签：javascript, raphael

微软表示，“对于 Internet Explorer 9，微软很自豪地引入了对基本 SVG 功能集的支持。Internet Explorer 9 中的 SVG 支持基于 SVG 1.1（第二版）规范推荐（针对桌面浏览器）。” (http://msdn.microsoft.com/en-us/ie/hh410107.aspx)

Raphael.svg 在 IE9 中返回 false。Raphael 文档声明 Raphael.svg 是“如果浏览器支持 SVG，则为 true”。

那么IE9实际上是用VML渲染还是什么？无论 IE9 在做什么，它都会让我的 Raphael 动画感到窒息，而所有其他浏览器都在流畅地运行它。

是的，Chrome Frame 是一种可能的解决方案，但也有随之而来的困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:00:02.267

解决方案是使用 HTML5 文档类型。

`<!DOCTYPE html>`

# java - 如何在不暂停整个程序的情况下暂停方法？

> ID：14366777
> 
> 赞同：2
> 
> 时间：2013-01-16T20:00:47.150
> 
> 标签：java, time, timeout, sleep

所以我正在编写一个程序，它可以对一名球员播放黑白棋/黑白棋。我写了一个方法来制作片段翻转的简短动画-

```
public void flip(int row, int col, Graphics window)
{
Color a;
if (pieces[row][col]==1)
    a = Color.black;
else
    a = Color.white;
for ( int size = 90; size>0; size-=2)
{
    try { Thread.sleep(11,1111); } catch (InterruptedException exc){}
    window.setColor(new Color( 0, 100, 0 ));
    window.fillRect(row*100+3, col*100+3, 94, 94);
    window.setColor(a);
    window.fillOval(row*100 + 5, col*100+5+(90-size)/2, 90, size);
}
if (a==Color.black)
    a=Color.white;
else
    a=Color.black;
for ( int size = 0; size<90; size+=2)
{
    try { Thread.sleep(11,1111); } catch (InterruptedException exc){}
    window.setColor(new Color( 0, 100, 0 ));
    window.fillRect(row*100+3, col*100+3, 94, 94);
    window.setColor(a);
    window.fillOval(row*100 + 5, col*100+5+(90-size)/2, 90, size);
}
} 
```

它工作得很好而且看起来很棒，但问题是由于 thread.sleep 暂停了整个程序，它一次只能翻转一个。我可以做些什么来暂停该方法而不中断程序的其余部分吗？

谢谢大家。新线程工作，但现在我有一个不同的问题。翻转方法中的三个 setcolor 方法正在混淆。我认为这是因为一些线程将颜色设置为绿色，一些设置为黑色，一些设置为白色。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:03:40.553

您应该在从主程序创建的专用线程中运行此方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T20:07:01.373

在这种情况下，您应该`flip`单独运行。`Thread`最简单的例子：

```
Thread t = new Thread(new Runnable() {
    public void run() {
        flip();
    }
});
t.start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T20:07:47.230

您的目标是异步编程：安排一个`javax.swing.Timer`，每次触发时，执行一个动画步骤。这将是 GUI 程序的惯用方式；在循环中休眠并在每个步骤中使用的单独线程的方法`invokeLater`也将起作用，但不太优雅，因为它使用更多系统资源（另一个主要只是休眠的线程）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T20:07:23.110

您需要创建一个单独的线程来处理动画。该线程可以调用`Thread#sleep`，因为`Thread#sleep`不会暂停“整个程序”，而只会暂停当前线程。在动画的每一步，它都应该改变一些状态，指示片断翻转动画的当前阶段，然后请求重绘。

# php - 如何从基于数组的函数中分离 appendChild 并从其函数外部调用它？

> ID：14366778
> 
> 赞同：0
> 
> 时间：2013-01-16T20:00:48.653
> 
> 标签：php, javascript, arrays, dynamic, appendchild

好的，希望这有点道理。我在使用 php 发现的文件夹中有不断变化的图像数量。然后将找到的图像作为位置和给定文件夹中找到的文件总数的变量传递给我的 javascript。

制作了一个由各种图像位置组成的数组，然后用于创建附加到现有 div 的新图像。

问题是如何分离函数的 appendChild 部分，以便在构建完整数组后调用它，而不是附加每次迭代。这样做的希望是在集合正在组装时显示加载 gif，一旦完成，将数组作为一个整体附加到文档中，而不是在加载每个文件时。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
enter code here`<HTML>
<HEAD>
<TITLE>Use PHP in HTML files</TITLE>
<?php
$dir = "images/";
$dh = opendir($dir);
while (false !== ($filename = readdir($dh))) {
$files[] = $filename;

$filecount = count($files);
}

uasort ( $files , function ($a, $b) {
        return strnatcmp($a,$b); // or other function/code
    }
);
print_r($files);

?>
<script language="javascript" type="text/javascript">

function map(id){
var photos = [];
var test = <?php echo json_encode($files); ?>;
var elements = <?php echo $filecount ?>;
for (i=0;i<=elements;i++){
photos[i] = new Array("images/" + test[i]);
image = new Image();
image.setAttribute("class", "container");
image.setAttribute("id", photos[i]);
image.src = photos[i];

image = document.getElementById("container").appendChild(image);
}

alert(elements);

}
</SCRIPT>
<style type="text/css">
.container {
position: absolute;
height: 664px;
width: 1024px;
left: 0;
top: 125px
}
#loadingBar {
position: absolute;
top: 30%;
left: 30%;
z-index: 100;
}
</style>
</HEAD>

<BODY>
<button id="lower_level" onclick="map(this)">Click This Confused Button</button>
<div id="container"></div>
</BODY>
</HTML> 
```

很抱歉很难理解变量名。随意砍掉你想要的代码。只需解释为什么事情会改变！此外，php 代码正在创建两个我不理解的元素“。” 和 ”..”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:52:20.927

元素“。” “..”表示当前目录和父目录。

在函数的开头，您可以隐藏 div：

```
document.getElementById("container").setAttribute("style","display:none"); 
```

并添加你的加载 gif。

运行后，您隐藏您的 gif 和显示 div。

...

```
function map(id){
document.getElementById("container").setAttribute("style","display:none");

var photos = [];
var test = ;
var elements = ;

for (i=0;i<elements;i++){

if(test[i] '.' || test[i]'..')
continue;
photos[i] = new Array("../myProject/web/uploads/images/" + test[i]);
image = new Image();
image.setAttribute("class", "container");
image.setAttribute("id", photos[i]);
image.src = photos[i];

image = document.getElementById("container").appendChild(image);
}

alert(elements);
document.getElementById("container").setAttribute("style","display:block");
} 
```

...

# php - 连接两台服务器传递数据

> ID：14366781
> 
> 赞同：-2
> 
> 时间：2013-01-16T20:00:55.653
> 
> 标签：php, licensing, connect, transfer

我想为我的 php 脚本创建一个简单的保护系统。

我的计划是两个硬编码一个允许代码片段执行的变量。

如果我有一个带有域和许可证密钥的数据库，我想要某种系统。他们的密钥将在管理面板中输入，然后每次有人访问该站点时，都会执行 php 代码并将密钥与域一起发送。我服务器上的脚本将检查这两个变量是否匹配并返回“VALID”或“ERROR”。如果它返回 VALID，则客户端上的代码将被执行。如果它返回“错误”，则会显示某种广告或错误消息。

在这个时候，我真的可以编写任何东西，但服务器之间的连接。我想我不能使用某种 $_GET 或 $_POST 因为我不想要任何类型的重定向。我无法直接连接到数据库，因为这将是一个很大的安全问题。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T20:05:39.813

好吧，问题在于如果客户可以看到它——他们可以修改它。

但是，您可以只使用

```
$result = file_get_contents('http://mywebsite.com/check.php?license=' . $license);
if(trim(strtolower($result)) == 'valid') {
    // it's valid
} else {
    // display ad
} 
```

或者您可以使用 cURL。

# powershell - 如何使用 Powershell 将复制和重命名命令合并为一个？

> ID：14366783
> 
> 赞同：2
> 
> 时间：2013-01-16T20:01:04.540
> 
> 标签：powershell

目前我正在使用 PS 从基于 CSV 文件的网络位置复制文件，然后我使用相同数据的变体重命名它们。这要求我运行两个单独的命令。

如何将这些命令合并为一个？

复制：

```
import-csv C:\TEST\test.csv | foreach {copy-item -path $_.npath -destination 'C:\TEST\'} 
```

粘贴：

```
import-csv C:\TEST\test.csv | foreach {rename-item -path $_.lpath -newname $_.newalias} 
```

请注意，每种情况下的 -path 触发器都指的是一个单独的变量头，npath 与 lpath 对应于网络文件位置，然后是手动输入的本地文件位置。

同样，我如何将此变量连接到常量数据。如果我有一个代表文件名和另一个**路径的变量****fn** ，理论上我可以这样做：

 **```
foreach {rename-item -path 'C:\TEST\' + $_.fn 
```

或者：

```
foreach {rename-item -path $_.path + $_.fn 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:04:25.493

只需附加两个命令

```
import-csv C:\TEST\test.csv | foreach {copy-item -path $_.npath -destination 'C:\TEST\';rename-item -path $_.lpath -newname $_.newalias  } 
```

对于您的第二个问题，有很多方法可以附加字符串

```
C:(...)WindowsPowerShell>$data = "bob"

C:(...)WindowsPowerShell>echo "this is a $data"

C:(...)WindowsPowerShell>$concat = "hi" + " george"

C:(...)WindowsPowerShell>$concat
hi george

C:(...)WindowsPowerShell>[string]::Format("{0} {1}","string 1","string 2")
string 1 string 2 
```**

# windows - ProcDump 转储错误的线程

> ID：14366786
> 
> 赞同：1
> 
> 时间：2013-01-16T20:01:16.937
> 
> 标签：windows, debugging, windbg, procdump

看起来 ProcDump 转储了错误线程的事后转储。使 ProcDump 成为 JIT 调试器：

```
C:\>procdump -ma -i c:\mydumps 
```

做了一个测试程序C++ MFC：

```
int* ptr = 0;
switch(message) {
...
case IDM_CRASH:
   *ptr = 23;
   break;
... 
```

从（ProcDumpTest.exe 程序的）菜单中选择 Crash 项，应用程序崩溃并进行转储。然而，转储显示 (windbg) 一个堆栈和一个意外线程的指令指针 (eip = 7c90e514)。如何获取发生错误的线程的堆栈跟踪？

```
00400000 - 004a0000 ProdDumpTest.exe
07c90000 - 07c9b000 ntdll.dll 
```

在更严重的情况下遇到了同样的问题。谢谢你的帮助！G更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:14:44.763

在 .reload /f 命令之后，!analyze -v 显示了正确的信息。谢谢您的帮助。

# php - 是否可以下载到页面html？

> ID：14366789
> 
> 赞同：-3
> 
> 时间：2013-01-16T20:01:33.100
> 
> 标签：php, jquery, html, download, progress-bar

是否可以使用 jQuery 或 pPHP 在页面 HTML 中而不是在浏览器中下载文件？

顺便说一句，有一个进度条向我们显示百分比。

我知道 Facebook 使用这个系统上传（相册照片）。

谢谢。

像这样的东西：

[![](../Images/f377915932b2635b9304893e270daba2.png)](https://i.stack.imgur.com/JEzdM.jpg)

不在这样的浏览器中：

[http://f.cl.ly/items/0D3I13472m103j2x2J1N/Capture%20d%E2%80%99%C3%A9cran%202013-01-16%20%C3%A0%2021.05.17.png](http://f.cl.ly/items/0D3I13472m103j2x2J1N/Capture%20d%E2%80%99%C3%A9cran%202013-01-16%20%C3%A0%2021.05.17.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:07:51.543

不，这不可能，也不应该。用户不希望您在错误的页面特定 JavaScript 应用程序中管理他们的下载。用户希望他们的下载在浏览器的下载屏幕上的一个地方进行管理，那里已经有进度条。除非您有特殊的理由，否则让您的页面偏离*所有其他页面*的公认方式通常是一个非常糟糕的主意。

在上传的情况下，添加带有进度条的特定页面上传器有利于用户体验。在下载的情况下，绝对*没有人*希望特定的网站为您提供特定的下载 UI。

# java - 用 zxing 编码和解码随机字节数组

> ID：14366792
> 
> 赞同：2
> 
> 时间：2013-01-16T20:01:38.280
> 
> 标签：java, android, qr-code, zxing

我正在尝试使用 QR 码传输字节数组，因此为了测试，我决定生成一个随机字节数组，将其编码为 QR 码，然后对其进行解码。我使用 ISO-8859-1 将字节数组转换为字符串 st 它在传输时不会丢失数据：

对于编码器端：

```
byte []buffer = new byte[11];
com.google.zxing.Writer writer = new QRCodeWriter();
Random randomGenerator = new Random();
    for(int i=0;i<=10;i++){
        buffer[i]=(byte) randomGenerator.nextInt(254);
    }
   // Log.i("time1","original: "+Arrays.toString(buffer));
    String decoded = null;
    try {
        decoded = new String(buffer, "ISO-8859-1");
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        result=writer.encode(decoded, BarcodeFormat.QR_CODE, 500, 500);
    } catch (WriterException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

这样我已经将字节数组转换为二维码，没有问题。但对于接收方：

```
LuminanceSource source = new PlanarYUVLuminanceSource(data,640,480,0,0,640,480,false);
bmtobedecoded = new BinaryBitmap(new HybridBinarizer(source));
Map<DecodeHintType,Object> mp=new HashMap<DecodeHintType, Object>();

mp.put(DecodeHintType.TRY_HARDER, true);
try {
    result= qrr.decode(bmtobedecoded,mp);
} catch (NotFoundException e) {
    Log.i("123","not found");
    e.printStackTrace();
} catch (ChecksumException e) {
    Log.i("123","checksum");
    e.printStackTrace();
} catch (FormatException e) {
    Log.i("123","format");
    e.printStackTrace();
} 
```

我试图解码生成的二维码，但它抛出了 NotFoundException。有人可以帮我解决这个问题吗？

**更新 1**：我确认解码器与普通 QR 完美配合，我还添加了 DecodeHintType.try_harder 但仍然不好。

**更新 2**：为了澄清，下面是我在字节数组和字符串之间进行转换的操作：

```
Random randomGenerator = new Random();
for(int i=0;i<=10;i++){
    buffer[i]=(byte) randomGenerator.nextInt(254);
}
Log.i("time1","original: "+Arrays.toString(buffer));
String decoded = null;
try {
    decoded = new String(buffer, "ISO-8859-1");
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
Log.i("time1","encoded string:" + decoded);
BitMatrix result=null;
try {
    result=qw.encode(decoded, BarcodeFormat.QR_CODE, 500, 500);
} catch (WriterException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}
iv.setImageBitmap(encodematrix(result));
byte[] encoded = null;
try {
    encoded = decoded.getBytes("ISO-8859-1");
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
Log.i("time1","result byte array:" + java.util.Arrays.toString(encoded)); 
```

如果你运行这个，你可以很容易地看到你最终可以得到完全相同的数组。我对此没有任何问题。

**更新 3**：我也尝试使用 UTF-8 对其进行编码，但它会丢失数据，因此它不能用于编码器。

**更新 4**：刚刚添加：

```
Map<DecodeHintType,Object> mp=new HashMap<DecodeHintType, Object>();
mp.put(DecodeHintType.CHARACTER_SET, "ISO-8859-1"); 
```

在解码器中，仍然抛出异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:47:03.737

尝试`PURE_BARCODE`模式作为检测提示。奇怪的是，当图像只是一个纯合成图像时，发现者模式的误报检测是一个更大的问题。启发式假设一张照片没有这些问题。在这种替代模式下，它可以利用知道它是纯图像而不是照片的优势，并且速度更快，并且永远不会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-04T23:39:37.797

要在二维码中存储二进制数据，您必须克服两个问题。

1.  ISO-8859-1 不允许 00-1F 和 7F-9F 范围内的字节。由于您使用的是随机生成器，因此您只需检查随机生成的字节是否适合此值并重新生成它，直到获得适合此范围的随机字节。如果您仍然需要对这些字节进行编码，则可以将数组编码为 Base-64 字符串或十六进制字符串。如果是十六进制字符串，它将以字母数字模式存储在 QR 码中，而不是 8 位模式。

2.  由于您尝试将二进制数据存储在 QR 码中，因此您必须仅依靠自己的扫描仪来处理此二进制数据，并且您需要确保您的扫描仪不使用启发式方法来自动确定字符编码等. 大多数 QR 解码器使用启发式方法来检测所使用的字符集。这些启发式可能会检测到 ISO-8859-1 以外的字符集，因此无法正确显示您的二进制数据。一些扫描仪使用启发式方法来检测字符集，即使该字符集是由 QR 码内的 ECI 可选扩展明确给出的。

因此，仅使用 US-ASCII（例如，在将其传递给 QR 码生成器之前以 Base64 编码的二进制数据）是针对启发式的 QR 码的最安全选择。这也将克服另一个复杂性：ISO-8859-1 不是 2000 年发布的早期 QR 码标准 (ISO/IEC 18004:2000) 中的默认编码。该标准确实根据 JIS X 0201（JIS8 也称为 ISO-2022-JP）指定了 8 位拉丁/假名字符集作为 8 位模式的默认编码，而 2005 年发布的更新标准确实将默认设置更改为ISO-8859-1。

如果您将缓冲区作为十六进制字符串存储在 QR 码中，这肯定会禁用所有启发式算法，并且不会产生比 Base-64 更大的 QR 码，因为字母数字模式下的每个字符在 QR 码流中仅占用 6 位.

# python - 在 Django 模板中使用字典格式化翻译字符串的好方法？

> ID：14366793
> 
> 赞同：1
> 
> 时间：2013-01-16T20:01:45.127
> 
> 标签：python, django, django-templates

我使用的是 Django 1.3，所以我不能对自定义标签使用键值参数。我知道过滤器格式字符串，但无论如何它不能使用键值参数。所以目标是使用这个：

```
_("s %(x)s") % {'x': 'hey'} 
```

但是在模板中。

目前我正在使用手写的自定义标签：

```
{% format_dict _("...") 'one' obj.one 'two' obj.two %} 
```

我想知道，是否有任何内置功能可以在不编写任何自定义标签的情况下使用它？也许一些内置标签可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:40:15.883

过滤器字符串格式可以使用键和值。你可以做：

```
d = { 'key': 'value' } 
```

在您的模板中：

```
{{ d¦stringformat:"Example: (key)s" }} 
```

# svn - 如何使用SVN管理网站？

> ID：14366796
> 
> 赞同：0
> 
> 时间：2013-01-16T20:01:55.453
> 
> 标签：svn, version-control

我们的 Web 服务器上有一个 4Gb 的数据。

我们考虑使用 Subversion (SVN) 来提高可靠性并消除我们网站（4 Gb，主要是图像、Flash 和视频）和我们开发的其他网站上的数据丢失。

我在我们的主站点上使用 SVN 的想法如下：

*   为我们直接编辑的这些文件（例如 .html 文件、.pl 和 .pm 文件等）提供单独的 SVN 存储库
*   有第二个 SVN 存储库来存储我们主站点的整个 4 Gb 转储，作为复杂的备份手段（在错误恢复的情况下能够与以后的更改合并）。
*   为我们开发的其他网站提供更多 SVN 存储库。

我问：

*   对于 4 Gb 版本，SVN 是否足够快且可扩展？提交需要多长时间？
*   在我们的网站上为所有数据和代码设置两个单独的存储库是个好主意吗？
*   您能否为我们提供一个（可能是 Bash 或 Perl）脚本来帮助我们根据请求更新服务器的 httpdocs/？
*   拥有两台 Web 服务器，一台运行 HEAD 用于调试，另一台运行稳定的分支用于外部 Internet 会怎样？
*   如何轻松管理我们在服务器上托管的多个站点的多个 SVN 存储库？（有小费吗？）
*   如何使用 SVN 管理数据库 (MySQL) 备份？

**补充**：我们不需要存储二进制文件的增量。大多数情况下，我们服务器上的二进制文件不会改变。但是我们需要一个快速的方法来确定二进制文件是否发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:34:50.357

# Subversion 不是常规备份和备份策略的替代品或竞争对手！！！

你必须使用正确的方式（tm）中的**每一个工具！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:18:32.513

SVN 擅长源代码控制（这是它的设计目的）。任何源代码控制系统也是如此，您要求它管理的非源代码越多，您期望的满意度就越低。

Maven 存储库擅长二进制代码管理（这是它的设计目的）。您基本上可以签入任何特定文件（具有最小的“maven 项目结构”），然后 Maven 可以提供它来满足其他项目可能具有的“依赖关系”。

也许是一个 SVN 签入的 Maven 项目，用于源代码（又名 HTML / Javascript / CSS / 等）的东西，以及 Maven 项目中二进制文件（图像、视频、PDF 等）的依赖关系？然后您将有一个如下所示的部署过程：

1.  结帐到构建位置，( `svn checkout`)
2.  建立网站（`mvn install`，这将吸收依赖的二进制文件）
3.  将网站打包（`mvn package`可能是 zip 文件或 tar.gz）。
4.  （稍后）部署网站（`mvn deploy`可能根据活动配置文件（生产、开发）部署到不同的位置）

无论你做什么，都要避免以下反模式，它们会给你带来比你想象的更多的悲痛：

1.  不要直接结帐到要部署的 Web 服务器。
2.  不要跳过网站的打包，否则将变得难以/无法回滚（甚至无法确保完全部署）。
3.  不要期望在实时目录中开发网站。习惯于开发站点、构建站点、在本地部署它（Maven 可以使这变得简单），然后检查您的更改（如果它看起来不错）。

尝试重新设计您的站点以允许部署到任何机器/目录位置，以便在上线之前在验证服务器/位置“启动站点”。Maven 提供了“配置文件”，可以帮助分离实时站点和通用开发人员站点。请记住要*避免*Maven`site`目标，因为这*不是*您正在开发的产品，而是用于跟踪产品进度/质量的*管理产品（您开发的网站）。*

最终使用 SVN / Maven，您可以在 Jenkins 服务器中为您执行“主线”构建。稍后您可以添加 Selenium 服务器以进行自动化集成测试，并利用持续部署实践，但每次只需一小步。选择这条路还不错，但是除非您已经对这些工具有所了解，否则您可能需要学习一些东西。

# html - 如何在 grails 中将 ag:textArea 的内容设置为 HTML（格式化文本，而不是代码）

> ID：14366798
> 
> 赞同：0
> 
> 时间：2013-01-16T20:01:59.013
> 
> 标签：html, grails, formatting, textarea, gsp

我有一个小的 grails 应用程序，正在编写中。

在一个动作中，显示，“show.gsp”页面被调用，其中是一个文本区域：

如'value'所示，该值是一些格式化的文本（即HTML），例如：

```
<p>Writing some html </p>
<p>we can <strong>bold</strong> it</p>
<p>and <em>italic</em> it</p>
<p>and send it!</p>
<p>sean</p>
<p> </p> 
```

## 但是，而不是显示为：

写一些html 

我们可以**加粗**

和*斜体*它

并发送！

肖恩

* * *

HTML 显示为代码（我假设 html 被转义，即使我设置了属性 escapeHtml="false"。

或者，我有错吗？我还能如何将 HTML 作为格式化文本插入到 textArea 中？

谢谢！

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:23:00.083

使用 textarea 你不能。尝试使用所见即所得的编辑器，如[CKEditor](http://grails.org/plugin/ckeditor)

# shell - 如何在子文件夹上获取 git 存储库 URL

> ID：14366800
> 
> 赞同：0
> 
> 时间：2013-01-16T20:02:02.927
> 
> 标签：shell

我有以下文件夹结构：

```
FolderA
-FolderA1 (child of FolderA), and 
-FolderA2 (child of FolderA) 
```

现在，文件夹 A1 和 A2 是 git 存储库。当我处于文件夹级别时，我正在编写一个脚本来获取两个文件夹的 git 存储库 URL。

我试过类似的东西：

```
cd FolderA

git remote -v | awk -F ' ' '{ print $2 }' | sort -u | cd FolderA1

git remote -v FolderA1\ | awk -F ' ' '{ print $2 }' | sort -u 
```

但这似乎不起作用。知道如何获取 FolderA1 / Folder A2 的 URL 吗？

在此先感谢 RKS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:06:06.443

就个人而言，我会这样做（需要 bash 4 来支持关联数组）：

```
get_subdir_urls() {
  local oldwd subdir url idx
  [[ $1 ]] && { oldwd=$PWD; cd "$1"; }
  for subdir in */.git; do
    (
     declare -A urls
     cd "${subdir%.git}" && \
       while read _ url _; do
         urls[$url]="${subdir%.git}"
       done < <(git remote -v)
     for idx in "${!urls[@]}"; do
       printf '%s\t%s\n' "${urls[$idx]}" "$idx"
     done
    )
  done
  [[ $1 ]] && cd "$oldwd"
}

# usage:
get_subdir_urls FolderA 
```

# php - 点击时设置 PHP cookie

> ID：14366808
> 
> 赞同：4
> 
> 时间：2013-01-16T20:02:43.063
> 
> 标签：php, cookies

所以我宁愿不为此使用 JS/jQuery - 但我似乎无法让它工作。

我有一个链接`<a href="?hideupdates=hide">Hide Updates</a>`，我试图用它来设置一个 cookie。

```
if($_GET['hideupdates'] == 'hide'){
    setcookie("HideUpdates", "hide", time()+60*60*24*5, "/", $vars->networkSite);
} 
```

它“有效”，但我必须点击链接两次。

* * *

从“ **site.com** ”我可以`var_dump()`得到 cookie，它就出现了`NULL`

现在我点击链接并转到“ **site.com?hideupdates=hide”，cookie**仍然出现`NULL`

但是，当我再次单击该链接时，从“ **site.com?hideupdates=hide** ” - THEN cookie 又回来了`hide`。

我错过了什么吗？还是我“必须”为此使用 JS/jQuery？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T20:04:37.307

`setcookie`不影响当前请求。为此，您还需要手动设置相关`$_COOKIE`变量：

```
setcookie("HideUpdates",$_COOKIE['HideUpdates'] = "hide", time()+60*60*24*5, "/", $vars->networkSite); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T20:19:45.037

**唯一的方法是 JS 或 jQuery**，因为正如其他人所说，cookie 不会影响当前页面请求。

您需要用于 jQuery 解决方案的[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)。**部分服务器 jquery.cookie.js 有问题**（解决方法是重命名文件 Eg: jquery.cook.js）

**jquery cookie插件的使用**

创建会话 cookie：

```
 $.cookie('the_cookie', 'the_value'); 
```

创建过期 cookie，从那时起 7 天：

```
 $.cookie('the_cookie', 'the_value', { expires: 7 }); 
```

创建过期 cookie，在整个站点中有效：

```
 $.cookie('the_cookie', 'the_value', { expires: 7, path: '/' }); 
```

读取 cookie：

```
 $.cookie('the_cookie'); // => "the_value"
 $.cookie('not_existing'); // => undefined 
```

阅读所有可用的 cookie：

```
 $.cookie(); // => { "the_cookie": "the_value", "...remaining": "cookies" } 
```

删除 cookie：

```
 // Returns true when cookie was found, false when no cookie was found...
 $.removeCookie('the_cookie'); 
```

// 与写入 cookie 时相同的路径...

```
 $.removeCookie('the_cookie', { path: '/' }); 
```

**你可以试试localStorage。它适用于 Chrome、FF 和 IE9 及更高版本。**我们不支持 IE7-10！万岁！

IE8 的 localStorage 存在一些问题。

脚本必须在 $(document).ready(function() {});

```
$(document).ready(function() {
   $("#btnClick").click(function(e) {
      e.preventDefault();
      localStorage.setItem('cookieName', 'cookie_value');
  window.href.location = "your_new_page.php";   
   });

   //On the same page or other page

   if (localStorage.getItem('cookieName')){
      //do here what you want

   }else{
      //do something else

   }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T20:04:16.963

Cookie 直到设置好并发送新的页面请求后才会启动。这是因为 cookie 是与页面请求一起发送的，它们只是不会神奇地出现在服务器上。

您的解决方案是在设置 cookie 后进行页面刷新。

# android - 根据意图给定的标识符向活动添加不同的片段

> ID：14366809
> 
> 赞同：2
> 
> 时间：2013-01-16T20:02:43.423
> 
> 标签：android, android-layout, android-fragments

我正在开发一个应用程序，`layout-small-portrait`我想在布局中启动包含在单个“容器活动”中的不同片段，名为`SingleActivity`. 我将在布局等方面以不同的方式处理这个问题`layout-land`，`layout-large`但这与我的问题无关。

我有一个活动`MainActivity`，顾名思义，它是我的应用程序的主要活动（启动器）。这最初将包含一个`ListFragment`供用户按下的不同项目。

基于用户按下的项目将启动，其内容将对应于与该项目相关`SingleActivity`的特定内容。`Fragment`我的问题从这里开始。当用户按下一个项目时，我有一个对我想要显示的相应片段的引用`SingleFragment`。如下图所示：

```
 String tag = myFragmentReference.getTag();
  Intent i = new Intent(this, SingleActivity.class);
  i.putExtra(SingleActivity.CONST_TAG, tag);
  startActivity(i); 
```

活动成功启动。在`SingleActivity`我有以下`onCreate()`方法：

```
...

// Retrieve the fragment tag from the intent
String tag = getIntent().getStringExtra(CONST_TAG);
Fragment fragment = getSupportFragmentManager().findFragmentByTag(tag);

if(fragment == null) {
    // always end up here, this is my problem.
}

FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.fragmentContainer, fragment);
ft.commit();

... 
```

`fragment`我怀疑总是这样的事实`null`是因为片段还没有被充气。如果我是对的，我需要做的是在片段膨胀之前定义片段的标签，以便它可以通过`findFragmentByTag()`. 那可能吗？

如果有任何不清楚的地方，请告诉我。

我期待听到一些好主意！如果有更好或更聪明的方法来实现这一点，我很想听听你的想法！谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:57:08.240

由于您要跳转到另一个活动，因此它将有自己的 Fragment BackStack，并且该 Fragment 将不存在。

您将不得不按照以下方式对新活动中的片段进行膨胀：

```
String tag = intent.getStringExtra(CONST_TAG);

    if (getSupportFragmentManager().findFragmentByTag(tag) == null) {
        Fragment fragment = Fragment.instantiate(this, tag, extras);
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.fragmentContainer, fragment, tag);
        ft.commit();
    } 
```

标记字符串需要具有片段的包位置，例如“com.android.myprojectname.myfragment”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:32:58.563

首先使用 SlidingMenu 库：[https](https://github.com/jfeinstein10/SlidingMenu) ://github.com/jfeinstein10/SlidingMenu 这将对您有所帮助，并且您的应用程序会更酷，这是我可以帮助您制作所需内容的唯一方法，这是代码：

**这是您的 MainActivity：**

我将尝试解释此示例代码，并根据您的需要使用。

**这是您的BehindContent (SlidingMenu) 的ListFragment：**

```
public class ColorMenuFragment extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.list, null);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        String[] colors = getResources().getStringArray(R.array.color_names);
        ArrayAdapter<String> colorAdapter = new ArrayAdapter<String>(getActivity(), 
                android.R.layout.simple_list_item_1, android.R.id.text1, colors);
        setListAdapter(colorAdapter);
//This array is only to fill SlidingMenu with a Simple String Color.
//I used MergeAdapter from Commonsware to create a very nice SlidingMenu.
    }

    @Override
    public void onListItemClick(ListView lv, View v, int position, long id) {
//This switch case is a listener to select wish item user have been selected,  so it Call
//ColorFragment, you can change to Task1Fragment, Task2Fragment, Task3Fragment.
        Fragment newContent = null;
        switch (position) {
        case 0:
            newContent = new ColorFragment(R.color.red);
            break;
        case 1:
            newContent = new ColorFragment(R.color.green);
            break;
        case 2:
            newContent = new ColorFragment(R.color.blue);
            break;
        case 3:
            newContent = new ColorFragment(android.R.color.white);
            break;
        case 4:
            newContent = new ColorFragment(android.R.color.black);
            break;
        }
        if (newContent != null)
            switchFragment(newContent);
    }

    // the meat of switching the above fragment
    private void switchFragment(Fragment fragment) {
        if (getActivity() == null)
            return;

        if (getActivity() instanceof FragmentChangeActivity) {
            FragmentChangeActivity fca = (FragmentChangeActivity) getActivity();
            fca.switchContent(fragment);
        } else if (getActivity() instanceof ResponsiveUIActivity) {
            ResponsiveUIActivity ra = (ResponsiveUIActivity) getActivity();
            ra.switchContent(fragment);
        }
    }

} 
```

**这是您的 BaseActivity 类：**

它没有滑动，我可以理解，你不需要这个。

```
public class FragmentChangeActivity extends BaseActivity {

    private Fragment mContent;

    public FragmentChangeActivity() {
        super(R.string.changing_fragments);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // set the Above View
        if (savedInstanceState != null)
            mContent = getSupportFragmentManager().getFragment(savedInstanceState, "mContent");
        if (mContent == null)
            mContent = new ColorFragment(R.color.red);  

        // set the Above View
            //This will be the first AboveView
        setContentView(R.layout.content_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, mContent)
        .commit();

        // set the Behind View
            //This is the SlidingMenu
        setBehindContentView(R.layout.menu_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame, new ColorMenuFragment())
        .commit();

        // customize the SlidingMenu
            //This is opcional
        getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        getSupportFragmentManager().putFragment(outState, "mContent", mContent);
    }

    public void switchContent(Fragment fragment) {
            // the meat of switching fragment
        mContent = fragment;
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, fragment)
        .commit();
        getSlidingMenu().showContent();
    }

} 
```

好的，所以如果您想将 ColorFragment 更改为其他任何内容，请执行以下操作：

**首先，选择您要使用的项目：**

```
case 0:
                newContent = new ColorFragment(R.color.red);
                break; 
```

**到：**

```
case 0:
            newContent = new ArrayListFragment();
            break; 
```

我只是做了一个arraylist，它只是一个简单的例子，你可以做很多事情，然后你可以阅读Fragment来学习如何做不同的事情。

```
public class ArrayListFragment extends ListFragment {

@Override                               
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            setListAdapter(new ArrayAdapter<String>(getActivity(),
                    android.R.layout.simple_list_item_1, Listnames.TITLES)); 
```

//Listnames 是一个带有 String[] TITLES 的类；

}

```
 @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            Log.i("FragmentList2", "Item clicked: " + id);

            String item = (String) getListAdapter().getItem(position);
        Toast.makeText(getActivity(), item, Toast.LENGTH_LONG).show();

        }

    } 
```

如您所见，它可以根据用户按下的 ListFragment (MainActivity) 中的哪个项目显示不同的片段。

好吧，如果您误解了什么，请告诉我。

# ios - 在关闭视图控制器时写入或读取 NSUserDefaults 并因 Exc 错误访问而崩溃

> ID：14366812
> 
> 赞同：0
> 
> 时间：2013-01-16T20:02:59.773
> 
> 标签：ios, objective-c, xcode, nsuserdefaults

在关闭 modalView 时，我将更改保存`NSUserDefaults`并在方法中同步它们`"saveinUserDeaultsObjects"`。

现在，重复这个过程两次会导致 exc bad access 崩溃。（即呈现和解散）。

`viewcontroller`但是，如果我使用执行选择器在 1 秒延迟后关闭，则应用程序可以正常工作。

我能从中推断出什么？- 我认为`NSUserdefaults`在传递的对象被释放时写需要一些时间。如果是这样的情况如何处理？

```
- (void)dismissViewController {
    [Utils  saveinUserDeaultsObjects:self.sortVlaue Forkey:@"SortByValue"];
    [Utils  saveinUserDeaultsObjects:self.state Forkey:@"State"];
    [Utils  saveinUserDeaultsObjects:self.topic Forkey:@"AOPString"];
    [self dismissViewControllerAnimated:YES completion:^{}];
} 
```

谢谢你。

**更新**

```
+ (void)saveinUserDeaultsObjects:(NSString )valueObject Forkey:(NSString)key { 
    //NSLog(@"SaveUseref for key: %@ object: %@",key, valueObject); 

    NSUserDefaults *userPreferences = [NSUserDefaults standardUserDefaults]; 
   [userPreferences setObject:valueObject forKey:key]; 
   [userPreferences synchronize]; 
} 
```

**更新 2**

```
+ (NSString )retriveFromUserDeaultsStringForkey:(NSString)key {
    NSUserDefaults *userPreferences = [NSUserDefaults standardUserDefaults]; 
    NSString *value = nil; 
    if (userPreferences) value = (NSString *)[userPreferences objectForKey:key]; 
    return value; 
} 
```

它偶尔显示的崩溃是在读取上面的“值”对象时。主要是 EXC 错误访问，malloc 堆栈跟踪是：

```
12: 0x1c0b85f in -[CFXPreferencesPropertyListSourceSynchronizer createPlistFromDisk] 
13: 0x1bdfc56 in -[CFXPreferencesPropertyListSourceSynchronizer synchronizeAlready] 
```

# asp.net - 如何将 SlickUpload 6 AJAX 配置为不需要文件

> ID：14366813
> 
> 赞同：3
> 
> 时间：2013-01-16T20:03:04.783
> 
> 标签：asp.net, configuration, slickupload

我一直在试图弄清楚如何使当前的 SlickUpload 6.1.7 以一种不需要某人包含文件的形式运行良好。我们希望它是可选的。此表格供人们与我们联系，我们希望为他们提供包含附件的选项，而不是要求它。如果您上传文件，它可以工作，但是如果您不上传任何文件，表单将不会提交。

我们正在尝试将 Ajax 版本与内存流一起使用，但“AspNetAjaxCs-VS2010”示例代码并没有多大帮助……文档很少，示例之间几乎没有一致性，因此很难理解它的确切含义一切正常。（至少对我来说）他们被收购了，新的所有者公司几乎不理会人们，除非他们为此付出代价，这并不酷。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:29:06.867

您可以使用 div 来检测页面内的放置。这样你只能在用户真正需要它时激活它，或者当用户实际选择要上传的东西时，比如触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:51:11.700

我不确定我是否理解您的问题，但如果是这样，听起来您已经有了一个表格，如果有要上传的文件，您想使用 SlickUpload 来上传*文件*。您使用的是 CustomUploadStreamProvider 表单吗？

# algorithm - 算法：在直线上的M个村庄中分配N个火车站

> ID：14366814
> 
> 赞同：1
> 
> 时间：2013-01-16T20:03:20.787
> 
> 标签：algorithm, optimization, dynamic-programming

我有下一个我很难解决的问题。

我有一条直线，上面有 M 个村庄的列表。我需要在这些村庄分配N个火车站，这样一个村庄到火车站的**平均**距离就会最小化。例子：

村庄：-----1-------------2--3----------4--5------------ -6----------7--- 我们有 3 个火车站。

尝试使用动态编程，但无法做到。任何人都可以提出解决这个问题的方法吗？（除了尝试所有选项的明显方式）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:27:46.503

我假设，对于每个村庄，您只关心从该村庄到特定火车站的距离，而不是所有火车站。因此，如果您可以在每个村庄放置一个火车站，那么即使村庄相隔数千英里，“村庄到火车站的平均距离”也会为零，因此从一个村庄到另一个火车站的距离一个不同的村庄会很大。

如果您有一组必须使用同一个火车站的村庄，那么该火车站的最佳位置是村庄线的中间位置（如果村庄的数量是奇数）或中间两个村庄之间的任何位置线（如果村庄的数量是偶数）。这是因为如果火车站在其他任何地方，将其移向中线将缩短与该组中大多数村庄的距离，而只会增加与少数村庄的距离。

因此，解决这个问题的一个简单方法是计算出如何将 M 个村庄分成 N 个相邻的村庄组，每组由一个火车站提供服务，位于中间的村庄，或组中两个最中心村庄之间的任何地方。

这是一个动态规划问题，您沿着村庄线工作，在村庄 k 计算将这 k 个村庄分成 j 组的最佳方式，以及该最佳方式的成本。您可以通过检查每个 i 从最后 i 个村庄创建一个组的成本并加上从前 k - i 个村庄创建 j-1 个组的成本来做到这一点。

如果您真的是指每个村庄和每个火车站之间的平均距离，请注意您可以一次处理一个火车站，因为一个火车站的位置不会影响定位另一个火车站的成本。然后，如果有偶数个村庄，那么您会在中间建有 N 个火车站，或者沿着两个中央村庄之间的地带放置 - 这真的没有意义。

# vb.net - 引用变量包含命名空间

> ID：14366815
> 
> 赞同：0
> 
> 时间：2013-01-16T20:03:30.973
> 
> 标签：vb.net, design-patterns

我正在尝试遵循这篇文章的回答者的建议：[DataAccess 项目中类的命名约定是什么？](https://stackoverflow.com/questions/1955875/whats-the-naming-convention-for-classes-in-the-dataaccess-project)(jdk)。

请看下面的代码：

```
'Form1.vb
Imports WindowsApplication1.BusinessLogicLayerShared

Public Class Form1

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim IPerson As IPerson
        IPerson = New BusinessLogicLayer.Person()
        Dim name As String = IPerson.getName()
    End Sub
End Class

'Person.vb
Imports WindowsApplication1.BusinessLogicLayerShared

Namespace BusinessLogicLayer
    Public Class Person
        Implements IPerson

        Private IPerson As DataLogicLayerShared.IPerson

        Public Function getName() As String Implements IPerson.getName
            IPerson = New DataLogicLayer.Person
            getName = IPerson.getName
        End Function
    End Class
End Namespace

Namespace BusinessLogicLayerShared
    Public Interface IPerson
        Function getName() As String
    End Interface
End Namespace

'Person.vb
Imports WindowsApplication1.DataLogicLayerShared
Namespace DataLogicLayer

    Public Class Person
        Implements IPerson

        Public Function getName() As String Implements IPerson.getName
            'Connect to database and get name
            Return "Ian"
        End Function

        Public Function getAge() Implements IPerson.getAge

        End Function
    End Class
End Namespace

Namespace DataLogicLayerShared
    Public Interface IPerson
        Function getName() As String
        Function getAge()
    End Interface
End Namespace 
```

客户端（表单）调用业务逻辑层，业务逻辑层调用数据逻辑层。名称（字符串）从数据逻辑层传递到业​​务逻辑层并返回给客户端。

我不喜欢在引用接口时必须指定名称空间，例如 Private IPerson As DataLogicLayerShared.IPerson。我应该在参考中指定命名空间还是可以修改我采用的模式以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:35:13.523

您应该能够`Imports DataLogicLayerShared`在源文件的顶部添加。这将使您不必使用命名空间完全限定每个类。

[您可以在此处](http://visualbasic.about.com/od/usingvbnet/a/ref_ns.htm)了解有关 VB .NET 引用和命名空间的更多信息

**更新：**如果您在不同的命名空间中有多个具有相同名称的类或接口，则必须通过在上面的示例中添加命名空间来限定您正在使用的类。

在您的情况下，您可能不需要在同一个源文件中包含业务层和数据层类。您的代码应该调用服务（业务逻辑）层，而后者又调用数据层。

# sql - SQL 获取月度和周度数据

> ID：14366816
> 
> 赞同：1
> 
> 时间：2013-01-16T20:03:32.377
> 
> 标签：sql, sql-server-2008, datediff, dateadd, sql-date-functions

我正在写一个查询，以提供本周、本月和今年（3 个单独的列）在一周至今、本月至今和年初至今的规模上售出的产品数量，例如今天它将显示自星期一以来售出的产品，从每月的第一天和第一年开始，随着时间的推移，这将在接下来的每个星期、月份和年份继续，去年还有 3 个具有相同逻辑的其他列。我需要的是帮助使用 DATEADD 或 DATEDIFF 获取日期查询（例如（DATEADD（分钟，-15，GETDATE（）））。

非常感谢，我也在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:20:49.020

这是一些未经测试的代码，可能会被优化，但应该让你朝着正确的方向前进。这使用`PIVOT`操作将您的行转换为列。

```
SELECT WeekCount, MonthCount, YearCount
FROM
(
SELECT ProductId, 
    CASE
        WHEN ProductSoldDate >= DATEADD(dd, 1 - DATEPART(dw, GETDATE()), GETDATE())
        THEN 'WeekCount'
        WHEN ProductSoldDate >= DATEADD(mm, DATEDIFF(mm,0,GETDATE()), 0)
        THEN 'MonthCount'
        WHEN ProductSoldDate >= DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0)
        THEN 'YearCount'
    END as lbl
FROM Products 
) ProductSales
PIVOT
(
COUNT(ProductId)
FOR lbl IN ([WeekCount], [MonthCount], [YearCount])
) t 
```

这是[SQL 小提琴](http://www.sqlfiddle.com/#!3/a5c64/15)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:12:23.163

**使用 DATEADD 函数**

在某些情况下，您可能希望将时间间隔添加到 DATETIME 或 SMALLDATETIME 值或减去时间间隔。例如，您可能需要从特定日期添加或减去一个月。您可以使用 DATEADD 函数来执行此计算。该函数采用以下语法：

> DATEADD（日期/时间部分，数字，日期）

例子：

```
SELECT OrderDate, DATEADD(mm, 3, OrderDate) AS NewDate
FROM Sales.Orders
WHERE OrderID = 1001 
```

**使用 DATEDIFF 函数**

DATEDIFF 函数计算两个日期之间的时间间隔，并返回一个表示该间隔的整数。该函数采用以下语法：

> DATEDIFF（日期/时间部分，开始日期，结束日期）

例子：

```
SELECT OrderDate, DelivDate,
    DATEDIFF(hh, OrderDate, DelivDate) AS HoursDiff
    FROM Sales.Orders
    WHERE OrderID = 1002 
```

# ssl - WSO2 - 服务器的证书不受信任

> ID：14366820
> 
> 赞同：2
> 
> 时间：2013-01-16T20:03:44.420
> 
> 标签：ssl, certificate, ssl-certificate, wso2

我正在使用从 WSO2 网站下载的二进制文件设置我的开发环境。

我遇到了一个与 SSL 证书相关的问题，它阻止我从我的 Ruby 脚本中调用一些 URI。我怎样才能解决这种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:45:56.697

您是否尝试将 SSL 证书安装到存储库/资源/安全中的客户端信任库中？

# qt - 有没有办法在新进程中打开 QTabBar 上的新选项卡？

> ID：14366833
> 
> 赞同：1
> 
> 时间：2013-01-16T20:04:33.923
> 
> 标签：qt, python-2.7, pyqt4

我有一个`QtGui.QTabBar`在我的应用程序中使用的对象。用户交互可以打开（或关闭）附加选项卡以运行各种 python 模块。我想让它们中的每一个都在自己的进程中运行，以确保运行时间更长/CPU 密集型模块不会阻塞简单的模块。

选项卡之间不需要交互。唯一需要的是父（现有）应用程序知道选项卡何时关闭并确保子进程正确终止的方法。我打算使用 Pythons[多处理](http://docs.python.org/2/library/multiprocessing.html)模块来处理这个问题。

有没有办法在`QTabBar`打开的单独进程中创建一个新选项卡？如果是这样，怎么做？我已经用谷歌搜索了“ [qtabbar 单独的进程](https://www.google.com/search?q=qtabbar%20seperate%20processes)”和类似的东西，但是如果可能的话，我还没有找到任何可以告诉我一种或另一种方式的东西。

我正在使用 Python 2.7.3、PyQt 和 Qt 4.9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:14:13.050

您不能在新进程中运行选项卡。任何选项卡都只是一个小部件，所有 GUI 都在主应用程序线程中运行。但是您可以将 GUI 与应用程序的业务逻辑分开。对于单个选项卡，您可以拥有一个小部件本身和一个可以在另一个线程中运行并处理繁重计算的控制器。然后，您可以使用信号/插槽机制连接您的选项卡及其控制器。

# windows - Windows 如何跟踪应用程序窗口布局，以及如何重置它？

> ID：14366838
> 
> 赞同：0
> 
> 时间：2013-01-16T20:05:00.377
> 
> 标签：windows, winforms

我刚刚从公司的 git repo 中提取了一段代码，第一次运行时，组件的布局很尴尬。虽然软件运行不正常，但我意识到源代码显示了具有该初始布局的窗口。这是一个用C#编写的windows窗体应用程序，我的开发机器是Windows 7

我通过移动东西手动更改了布局，并终止了调试会话。现在，当我再次开始调试/执行时，会出现带有我配置的布局的窗口。我没有安装这个程序或任何东西，但 windows 会记住这个窗口的布局，我无法向团队的其他成员描述或演示初始布局。清理解决方案，重建等没有帮助。我可以删除本地存储库并从头开始做所有事情，但这不是解决方案，只是一个烦人的解决方案。

这些信息保存在哪里，如何重置？

Ps：通过谷歌搜索解决方案又是一场噩梦，因为除了“windows layout history”之类的关键字我想不出...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:14:03.120

编写自定义代码来保持窗口布局（位置、大小）和拆分面板（或网格列大小）等控件的布局并不少见。通常这样做是为了向最终用户呈现最后知道的布局。Windows 不为此任务提供预先构建的解决方案，因为可能会出现意想不到的后果（考虑更改屏幕分辨率，然后将窗口恢复到现在的屏幕外位置）。

我确信是您的应用程序在某处写入/保留了恢复其最后一个“布局”所需的信息

# drupal - 通过 Drupal 7 中的“Nice Menus”选项卡的 508 合规性问题

> ID：14366839
> 
> 赞同：1
> 
> 时间：2013-01-16T20:05:06.653
> 
> 标签：drupal, drupal-modules, section508

我在 Drupal 7 中创建了一个自定义主题。我在其中添加了“漂亮的菜单”模块。在此过程中的某个地方，我失去了在主页上的弹出菜单中进行选项卡的能力（为了符合 508 标准）。任何人都可以向我建议我需要在 Drupal 7 的（标准）“漂亮菜单”模块中查看的文件或我需要在我的自定义页面中查看的代码。TPL 或 CSS 以修复通过我的页面菜单进行选项卡的能力链接？

我试图使用 Drupal 7 的标准“漂亮菜单”模块搜索有关 508 合规性问题的任何背景，但似乎大多数使用它的人没有将 508 作为主要关注点，在线上没有太多背景这个问题（我可以找到）。

由于我的项目规则，我无法发布源代码。提前致谢！

# javascript - 从同一域上的父窗口访问 iframe 中的 JavaScript 变量

> ID：14366841
> 
> 赞同：10
> 
> 时间：2013-01-16T20:05:28.717
> 
> 标签：javascript, jquery, iframe

我对 JavaScript 相当陌生，我正在尝试从嵌入式 iframe 中获取变量的值。我已经诉诸基本测试以确保我得到正确的方法......

我已经尝试了常见的建议，一切都返回“未定义”。我想在 onclick 事件中使用该变量。

在 iframe 内容中，我剥离了所有内容，仅用于测试：

```
<script>
var test = "test";
</script> 
```

在父窗口中我已经这样做了：

```
<iframe src="iframe.html" id="iframe" width="200" height="100"></iframe>

<script>
var myVar = window.frames[0].window.test;
</script>
<a href="#" onclick='alert(myVar)' id="link">Click</a> 
```

我已经尝试过这里建议的选项：[从嵌入式 iframe 中获取全局变量](https://stackoverflow.com/questions/6035673/grab-global-variable-from-an-embedded-iframe)

我所做的一切都返回未定义......我在做一些根本错误的事情吗？

提前致谢..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T20:14:56.707

`<iframe>`当仍在加载时，您已经在执行脚本，所以它`test`是`undefined`. 要么等待 iframe 的`load`事件，要么在点击时获取变量：

```
<iframe src="iframe.html" id="iframe" width="200" height="100"></iframe>

<script>
var myFrame = window.frames[0].window;
</script>
<a href="#" onclick='alert(myFrame.test)' id="link">Click</a> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T20:15:08.877

在访问之前，您显然没有等待加载框架的内容`myVar`。`<script>`执行此操作时，可能尚未获取或执行框架中的元素。

尝试延迟变量分配，直到帧的内容完全加载：

```
<iframe src="iframe.html" id="iframe" onload="frameLoaded();" width="200" height="100"></iframe>

<script>
    var myVar;
    function frameLoaded() {
        myVar = window.frames[0].window.test;
    }
</script> 
```

顺便说一句，由于您的问题被标记为[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")，我建议您编写如下内容：

```
<iframe src="iframe.html" id="iframe" width="200" height="100"></iframe>

<script>
    $("#iframe").on("load", function() {
        var myVar = this.window.test;
        $("#link").on("click", function() {
            alert(myVar);
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T20:24:54.783

尝试使用这个

```
 <iframe src="iframe.html" id="iframe" onload="loader()" width="200" height="100">    </iframe>

<script>
    var myVar
    function loader(){
        myVar = window.frames[0].window.test;
    }
</script>
<a href="#" onclick='alert(myVar)' id="link">Click</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T20:48:37.320

在备用解决方案中，我只想指出，当您使用 jquery onload 事件处理函数并且想要访问 jquery“this”对象时，您必须使用 $(this.attr) 表示法。

# c# - 搜索字符串谷歌

> ID：14366843
> 
> 赞同：1
> 
> 时间：2013-01-16T20:05:37.073
> 
> 标签：c#, search

如何在 Google 中输入搜索字符串，然后查看它得到了多少结果？我试过这样做：

```
string uri = "http://google.com/search?q=" + stringsToSearchFor[0];
string response = wc.UploadString (uri, stringsToSearchFor[0]);
Console.WriteLine ("Response: " + response);
Console.ReadKey (true); 
```

我认为字符串响应会获取相关信息，例如有多少结果，但是当我运行程序时，我收到此错误消息：远程服务器返回错误：（503）服务器不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:08:38.607

[我认为使用Google API](https://developers.google.com/custom-search/v1/using_rest?hl=de)更舒适、更容易。

在那里你得到字符串的结果。不再需要过滤输入/网页的信息。

如果您真的想通过获取 html 编码页面来做到这一点，请使用

```
var response = new WebClient().DownloadString("https://www.google.com/search?q="+mySearchString); 
```

在使用 WebClient 类之前，您必须导入命名空间：

```
using System.Net; 
```

但要记住：

如果搜索字符串包含空格，您必须将它们替换为 '%20'。

为此，请使用`String.Replace`-Function。

```
searchString.Replace(" ","%20"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:13:47.310

改变

```
string uri = "http://google.com/search?q=" + stringsToSearchFor[0];
string response = wc.UploadString (uri, stringsToSearchFor[0]); 
```

至

```
string uri = "http://google.com/search?q=" + WebUtility.UrlEncode(stringsToSearchFor[0]);
string response = wc.DownloadString(uri); 
```

它会工作......

# html - 灵活宽度扩展导航的 CSS 问题

> ID：14366847
> 
> 赞同：0
> 
> 时间：2013-01-16T20:05:39.767
> 
> 标签：html, css, responsive-design

我正在开发一个宽度灵活且需要扩展导航来显示类别的网站，例如在[http://www.backcountry.com/](http://www.backcountry.com/)上，但灵活且具有三个级别而不是两个级别。

问题是，如果我将大小更改为 % 而不是设置像素宽度，则它只是其上方父 li 的 100%，而不是整个导航栏的 100%。

标记在这里：http: [//jsfiddle.net/lfischer/L6CGj/](http://jsfiddle.net/lfischer/L6CGj/)但这是一个简化版本：

```
<div id="nav">
<ul>
  <li><a href="">Primary</a>
    <ul>
      <li><a href="">Secondary</a>
        <div class="tertiary_nav">
          <ul>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
          </ul>
          <ul>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
          </ul>  
        </div>
      </li>
      <li><a href="">Secondary</a>
         <div class="tertiary_nav">
          <ul>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
          </ul>
          <ul>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
            <li><a href="">Tertiary</a></li>
          </ul>  
        </div>  
      </li>
    </ul>  
  </li>
</ul>
</div> 
```

CSS：

```
/* primary nav */
#nav { position: relative; }
#nav > ul { list-style: none; margin: 0 3%; padding: 0; float: left; width: 94%; }
#nav > ul > li { float: left; padding: 0; margin: 0; position: relative; }
#nav > ul > li a { display: block;  }

/* simple drop down */
#nav > ul > li > ul { position: absolute; margin: 0; padding: 0 0 0.5em 0; display: none; z-index: 9999; list-style: none; }
#nav > ul > li > ul > li { clear: left; position: relative; width: 200px; padding: 0;}
#nav > ul > li > ul > li a { padding: 0.3em 1em; line-height: 1.1em;  }
#nav > ul > li > ul > li ul { list-style: none; }

/* extended drop down second level */
#nav > ul > li.extended_sub_nav { position: inherit; }
#nav > ul > li.extended_sub_nav > ul { position: absolute; left: 3%; margin: 0; padding: 0; z-index: 9999; list-style: none; width: 94%; height: 2.6em; display: block;}
#nav > ul > li.extended_sub_nav > ul > li { float: left; clear: none; width: auto; padding: 0; position: inherit;}
#nav > ul > li.extended_sub_nav > ul > li > a { padding: 0.5em 0.8em; line-height: 1.5em;  }

/* extended drop down third level */
#nav > ul > li.extended_sub_nav > ul > li .tertiary_nav { width: 950px; float: left; position: absolute; padding: 1em 3% 1em; display: block; }
#nav > ul > li.extended_sub_nav > ul > li  ul { /*display:none*/ ; width: 18%; float: left; padding: 0 0 0.5em 5%; margin: 0 1% 0.5em 1%; list-style: none; min-height: 8em; }
#nav > ul > li.extended_sub_nav > ul > li  ul a { padding: 0.1em 0; }
#nav > ul > li.extended_sub_nav > ul > li  a:hover { text-decoration: underline }
#nav > ul > li.extended_sub_nav > ul > li  ul li { padding: 0; }

#nav ul > li:hover > ul, #nav > ul > li.extended_sub_nav > ul > li:hover  ul, #nav > ul > li.extended_sub_nav > ul > li:hover .tertiary_nav { display: block; } 
```

三级 ul 的宽度为 18%，用于创建列和一些显示：为了便于测试，没有编辑或注释掉任何内容。

# java - SWT Shell 中的嵌入式 JEditorPane

> ID：14366853
> 
> 赞同：0
> 
> 时间：2013-01-16T20:06:13.200
> 
> 标签：java, swing, swt, swt-awt

我试图将 JEditorPane 嵌入到 SWT Shell 中但没有成功。JEdi​​torPane 没有出现，我不明白为什么。

```
import java.awt.Color;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import javax.swing.JEditorPane;
import javax.swing.JScrollPane;
import javax.swing.text.BadLocationException;
import javax.swing.text.rtf.RTFEditorKit;

import org.eclipse.swt.SWT;
import org.eclipse.swt.awt.SWT_AWT;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Menu;
import org.eclipse.swt.widgets.MenuItem;
import org.eclipse.swt.widgets.Shell;

public class EmbeddedRtf {

   public static void main(String args[]) {
      final Display display = new Display();
      final Shell shell = new Shell(display);
      shell.setText("Rtf editor");

  Menu mb = new Menu(shell, SWT.BAR);
  MenuItem fileItem = new MenuItem(mb, SWT.CASCADE);
  fileItem.setText("&File");
  Menu fileMenu = new Menu(shell, SWT.DROP_DOWN);
  fileItem.setMenu(fileMenu);
  MenuItem exitItem = new MenuItem(fileMenu, SWT.PUSH);
  exitItem.setText("&Exit\tCtrl+X");
  exitItem.setAccelerator(SWT.CONTROL + 'X');
  MenuItem aboutItem = new MenuItem(fileMenu, SWT.PUSH);
  aboutItem.setText("&About\tCtrl+A");
  aboutItem.setAccelerator(SWT.CONTROL + 'A');
  shell.setMenuBar(mb);

  Composite rtfComposite = new Composite(shell, SWT.EMBEDDED);

  java.awt.Frame frame = SWT_AWT.new_Frame(rtfComposite);
  java.awt.Panel panel = new java.awt.Panel(new java.awt.FlowLayout());
  frame.add(panel);

  // Create an RTF editor window
  RTFEditorKit rtf = new RTFEditorKit();
  JEditorPane editor = new JEditorPane();
  editor.setEditorKit(rtf);
  editor.setBackground(Color.white);

  // This text could be big so add a scroll pane
  JScrollPane scroller = new JScrollPane();
  scroller.getViewport().add(editor);
  panel.add(scroller);

  // Load an RTF file into the editor
  try {
     FileInputStream fi = new FileInputStream("test.rtf");
     rtf.read(fi, editor.getDocument(), 0);
  } catch (FileNotFoundException e) {
     System.out.println("File not found");
  } catch (IOException e) {
     System.out.println("I/O error");
  } catch (BadLocationException e) {
  }

  shell.open();
  while (!shell.isDisposed()) {
     if (!display.readAndDispatch())
        display.sleep();
  }
  display.dispose();
   }
} 
```

我还做了一个只使用swing组件的小程序，出现了JEditorPane，但是当我将它嵌入到shell中时，它没有出现。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:53:15.727

您需要在您的外壳上设置一个布局，以便复合显示。使用这样的东西：

```
shell.setLayout(new FillLayout()); 
```

# java - Spring3依赖注入不适用于mule

> ID：14366855
> 
> 赞同：3
> 
> 时间：2013-01-16T20:06:15.590
> 
> 标签：java, spring, hibernate, mule, mule-studio

我无法在 CustomerServiceImpl 服务类的引用变量中注入 customerDao 对象。

这是我的 mule_flow.mflow 文件

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
    xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
    xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">

<flow name="helloService" doc:name="helloService">
<http:inbound-endpoint exchange-pattern="request-response"
address="http://localhost:8081/hello" doc:name="HTTP" />
<cxf:simple-service serviceClass="com.proj.pos.demo.HelloWorld"
doc:name="SOAP" />
<component class="com.proj.pos.demo.ServiceAImplService"
doc:name="Java" />
</flow>

<flow name="addCustomer" doc:name="addCustomer">
<http:inbound-endpoint exchange-pattern="request-response"
address="http://localhost:8081/pos/addCustomer" doc:name="HTTP" />
<cxf:simple-service serviceClass="com.proj.pos.webservice.interfac.CustomerService"
doc:name="SOAP" />
<component class="com.proj.pos.webservice.implementation.CustomerServiceImpl"
doc:name="Java" />
</flow>

<spring:beans>
 <spring:import resource="classpath:spring-mule.xml"/>
</spring:beans>
</mule> 
```

这是我的 Spring-mule.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd" >

        <bean id="datasource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="oracle.jdbc.OracleDriver" />
<property name="url" value="jdbc:oracle:thin:@localhost:1521:xe" />
<property name="username" value="test" />
<property name="password" value="test" />
</bean> 

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="datasource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
                <prop key="hibernate.connection.release_mode">auto</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

     <bean id="customerDao" class="com.proj.pos.dao.implementation.CustomerDaoImpl">
    <property name="sessionFactory">
    <ref local="sessionFactory"/>
    </property>
    </bean>

    <bean id="customerService" scope="prototype" class="com.proj.pos.webservice.implementation.CustomerServiceImpl">
    <property name="customerDao" >
    <ref local="customerDao"/>
    </property>
    </bean>
 </beans> 
```

这是我的 CustomerServiceImpl.java

```
package com.proj.pos.webservice.implementation;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import com.proj.pos.dao.interfac.CustomerDao;
import com.proj.pos.entity.Customer;
import com.proj.pos.webservice.interfac.CustomerService;
@WebService(endpointInterface = "com.proj.pos.webservice.interfac.CustomerService",
        serviceName = "CustomerService")
public class CustomerServiceImpl implements CustomerService {

    public CustomerDao getCustomerDao() {
        return customerDao;
    }
    public void setCustomerDao(CustomerDao customerDao) {
        this.customerDao = customerDao;
    }
    @Autowired
    private CustomerDao customerDao;//not getting populated.tried removing autowired as well.
    @Transactional
    @WebMethod(operationName="addCustomer")
    @WebResult(name="addCustomerResult")  
    @Override
    public Customer addCustomer(@WebParam(name="customerId")long customerId,@WebParam(name="fname")String fname,@WebParam(name="lname")String lname,@WebParam(name="age")long age,@WebParam(name="dateOfBirth")String dateOfBirth,@WebParam(name="address")String address) {
        Customer customer=new Customer(customerId, fname, lname, age, dateOfBirth, address);
        customer.setCustomerId(customerDao.persist(customer));//throws NUllPointerException here as customerDao is null..
         return customer;
    }

} 
```

知道为什么 DI 不工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:06:57.950

你可能错过了几件事：

1.  您应该扫描您希望 spring 查找注释类的包。在您的情况下，您应该将以下 xml 片段添加到您的 mule 配置中`<context:component-scan base-package="com.proj.pos.webservice" />`
2.  您应该将组件声明为弹簧对象而不是组件，因此您应该替换`<component class="com.proj.pos.webservice.implementation.CustomerServiceImpl" doc:name="Java" />`为`<component><spring-object bean="customerService"/></component>`

# javascript - Primefaces 和 Javascript

> ID：14366861
> 
> 赞同：0
> 
> 时间：2013-01-16T20:06:35.653
> 
> 标签：javascript, spring, primefaces

在我的用户界面中，我有一些 javascript：

```
<ui:define name="myheaderIncludes">
    <script type="text/javascript">  
        function sayhi() {
            alert('hi');
  }
    </script>  
</ui:define> 
```

从表单中，我使用一个对话框来弹出文件导入。

```
<p:dialog id="abc" header="Import" widgetVar="dlgabc" modal="false" 
              height="125" width="580" appendToBody="true" hideEffect="fade"> 
```

我正在尝试从对话框表单中调用 javascript - 为了测试我添加了一个按钮：

```
<p:button value="Test" id="start" type="button" onclick="sayhi();"  widgetVar="startButton1"/> 
```

无论出于何种原因，sayhi() 都不会被调用。有什么想法/意见吗？
提前致谢

# jquery - jQuery easyui 在同一个打开的选项卡中加载链接（从它被点击的地方）

> ID：14366863
> 
> 赞同：0
> 
> 时间：2013-01-16T20:06:41.937
> 
> 标签：jquery, tabs, jquery-ui-tabs

很抱歉问这个问题，我是 jquery 的新手，但是我无法让它工作。我有一个使用 jeasyui 的应用程序，它使用左侧的树，从 json 文件构建。

当用户根据来自 json 的 URL 参数单击树的节点时，会打开一个新选项卡。到目前为止一切顺利。选项卡包含一些链接，我的问题是，当单击该链接时，它总是加载到一个新窗口中。我想要实现的是从标签中加载的页面打开链接，在同一个打开的标签中，从它被点击的地方。

为了从树中动态添加选项卡，我使用以下内容：

```
<script type="text/javascript"> 
$(function(){   
 $('#tree_menu').tree({    
    animate:true,    
    <!--checking what it was clicked form tree--!>
     onClick: function open1(node){
            <!--if exists, select it--!>
                    if ($('#tabs').tabs('exists',node.text)){
                        $('#tabs').tabs('select', node.text);
                    <!--if not open it--!>
                    } else {
                            $('#tabs').tabs('add',{
                                title: node.text,
                                    closable:true, 
                                    href:node.url,
                                tools:[{  
                            iconCls:'icon-mini-refresh',  
                            handler:function(){  
                            alert('refresh');  
                    }  
                    }]

                    });
                    }
        }
    });     
}); 
</script> 
```

这是html代码：

```
 <div data-options="region:'west',split:true" title="Main Menu" style="width:250px;">
        <div class="easyui-accordion" data-options="fit:true,border:false">

            <div title="Tree:" style="padding-top:10px;">
                    <ul id="tree_menu" class="easyui-tree" data-options="url:'../layout/tree_data1.json',animate:true,dnd:true"></ul>
            </div>

            <div title="Tips&Tricks" style="padding:10px">
                Tips&Tricks
            </div>
        </div>
    </div>

    <div data-options="region:'center'"> 
        <div id="tabs" class="easyui-tabs" data-options="fit:true,border:false,plain:true" style="padding-top:5px">
            <div title="About" data-options="href:'../layout/_content.html'" iconCls="icon-ok" closable="true" style="padding:10px"></div>
    </div>
</div> 
```

我可以找到一种方法，在选项卡中嵌入 iframe，但这不是我想要的，因为我想使用选项卡的嵌入功能/方法，以及 easyui 所具有的不错的预加载器。

拜托，有人可以帮我一些有效的代码吗？已经2天多了，因为我尝试没有成功。:(

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:25:44.400

你试过这个吗？

```
$('#example').tabs({
load: function(event, ui) {
$('a', ui.panel).live('click', function() {
    $(ui.panel).load(this.href);
    return false;
});
}
}); 
```

# python - 从刚刚创建的模型实例中检索数字 ID

> ID：14366868
> 
> 赞同：1
> 
> 时间：2013-01-16T20:06:55.877
> 
> 标签：python, google-app-engine, google-cloud-datastore

来自谷歌文档：

“模型实例的键包括实例的实体类型以及唯一标识符。标识符可以是键名称字符串，由应用程序在创建实例时显式分配，也可以是整数数字 ID，由 App Engine 在实例被写入（放置）到数据存储区。”

所以在这个例子中：

```
name = "John"
idd = 11
person = Person(name, idd)
person.put() 
```

如何获得“由 App Engine 自动分配的整数 ID”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:10:05.157

如果您使用 ndb put() 返回新密钥...调用密钥上的 id 函数：

```
name = "John"
idd = 11
person = Person(name, idd)
new_key = person.put()
auto_assigned_id = new_key.id() 
```

来自[https://developers.google.com/appengine/docs/python/ndb/entities](https://developers.google.com/appengine/docs/python/ndb/entities)：

> 要将对象作为持久实体存储在 Datastore 中，请使用 put() 方法。这将返回一个用于稍后从数据存储中检索实体的密钥：
> 
> `sandy_key = sandy.put()`

和：

[https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_id](https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:10:45.540

你试过

```
print person.id() 
```

或者如果您提供了唯一标识符

```
print person.id_or_name() 
```

put() 方法也返回密钥

```
key = person.put() 
```

# facebook - 在 Appcelerator Titanium 中进行 Facebook 单点登录时出现“无法打开页面”错误

> ID：14366875
> 
> 赞同：1
> 
> 时间：2013-01-16T20:07:21.770
> 
> 标签：facebook, appcelerator, appcelerator-mobile

我在我的 appcelerator Titan 应用程序中设置了一个视图，与用于 facebook 登录的厨房水槽演示中的视图几乎相同。我想对 IOS 使用单点登录：

```
//LoginView Component Constructor
function LoginView() {
    //create object instance, a parasitic subclass of Observable
    var self = Ti.UI.createView();
        // APP ID BELOW IS CHANGED FOR DEMO PURPOSES
    Titanium.Facebook.appid = "111111111111111";
    Titanium.Facebook.permissions = ['email', 'publish_actions'];
        // ENABLE SINGLE SIGN ON
    Titanium.Facebook.forceDialogAuth = false;

    self.add(Titanium.Facebook.createLoginButton({
        style:Ti.Facebook.BUTTON_STYLE_WIDE,
        bottom:30
    }));

    return self;
}

module.exports = LoginView; 
```

单击登录按钮时，它成功地在 safari 中打开了 facebook 登录对话框，然后我登录了。然后，当它试图将我带回应用程序时，我收到错误消息：

> **无法打开页面**Safari 无法打开页面，因为地址无效

非常相似的代码在厨房水槽应用程序中正常工作，并且禁用单点登录使通过 facebook 登录在我的应用程序中正常工作。

我在 Facebook 应用程序中的所有设置是：Facebook 登录 - 已启用

我错过了设置中的任何内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:07:02.090

弄清楚了：

在我的 facebook 应用程序设置中（在 developers.facebook.com 上），我将捆绑包 ID 设置为与 Appcelerator 中的应用程序相同的 ID。

[基于问答：](http://developer.appcelerator.com/question/137876/how-to-use-facebook-single-sign-on)

将 build/iphone/ 中的 Info.plist 复制到应用程序的根目录中。

将app下的xml元素fb111111111111111添加到Info.plist：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>com.mycompany.app</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>app</string>
            <string>fb111111111111111</string>
        </array>
    </dict>
</array> 
```

其中111111111111111改为app的id

# php - PHP 扩展（在 C++ 中）函数中的 pthread_create 永远不会返回

> ID：14366886
> 
> 赞同：0
> 
> 时间：2013-01-16T20:07:55.100
> 
> 标签：php, c++, linux, multithreading

我的 c++ 库在代码中的某处使用 pthread_create 创建一个线程。在独立应用程序中使用我的库效果很好，但是在 PHP 扩展中使用它时。该函数永远不会返回。

```
void* threadloop(void * param)
{
    zend_printf("B\n");
}
PHP_FUNCTION(create_thread)
{
    pthread_t othread;
    pthread_create (&othread, NULL, threadloop, NULL);
    zend_printf("A\n");
} 
```

“B”从不打印。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:24:23.530

尝试这样的事情：

```
void* threadloop(void * param)
{
  zend_printf("B\n");
}
PHP_FUNCTION(create_thread)
{
  pthread_t othread;
  auto result = pthread_create (&othread, NULL, threadloop, NULL);
  if (result != 0)
    zend_printf("Error!\n");
  zend_printf("A\n");
  void* result = nullptr;
  auto result2 = pthread_join( othread, &result );
  if (result2 != 0)
    zend_printf("Error2!\n");
} 
```

我在其中获取了您的代码，添加了一些简单的错误处理，并加入了生成的线程以确保它已完成。

我使用了上面的一些 C++11 特性（`auto`特别`nullptr`是），如果你的编译器不支持它们，替换它们应该很容易（你的返回值类型是`pthread_create`什么？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:22:44.070

您在新创建的线程打印和进程终止之间存在竞争条件。您需要某种同步，例如在允许进程终止之前加入线程。（使用`sleep`可以演示问题，但永远不要`sleep`用作线程同步的一种形式。）

# c# - 如何在表单的命令提示符中使用 Outlook 开关？

> ID：14366887
> 
> 赞同：0
> 
> 时间：2013-01-16T20:08:07.203
> 
> 标签：c#, string, command-line, outlook, switch-statement

我正在尝试创建一个程序，该程序将使用 Outlook 开关创建一个预先填充了详细信息的新 Outlook 消息。

如果我在命令提示符下，以下将成功创建一条新的空白消息。

```
"C:\Program Files (x86)\Microsoft Office\Office14\OUTLOOK.EXE" /c ipm.note 
```

我在这里找到了几篇关于如何在 c# 中使用命令提示符的帖子，并试图让这个相同的 switch 命令从 c# 运行，但它在命令提示符框中给出了一个错误，闪烁：`ipm.note is not recognized as an internal or external command, operable program or batch file.`

我知道 ipm.note 对开关是正确的，但显然在 C# 代码中传递它时它遗漏了什么？可能是转义字符？这是我正在使用的代码。

`System.Diagnostics.Process.Start("CMD.exe", "\"C:\\Program Files (x86)\\Microsoft Office\\Office14\\OUTLOOK.EXE\" /c ipm.note");`

同样关于这一点，我希望能够使用 @ 符号，因此我不必转义每个特殊字符，但我不知道您是否可以使用它并在字符串中添加引号，例如：

`string temp = @""C:\Program Files (x86)\Microsoft Office\Office14\OUTLOOK.EXE" /c ipm.note"` 在上面，第一组引号打开和关闭，然后直到下一组引号不被视为字符串的一部分。

非常感谢有关这两种情况的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:42:23.780

您还需要将 /c 开关传递给 cmd.exe。试试这个：

```
Process.Start("cmd.exe", @"/c """"C:\Program Files (x86)\Microsoft Office\Office14\OUTLOOK.EXE"" /c ipm.note"""); 
```

但是，直接运行 outlook.exe 并避免很多参数问题实际上要好得多：

```
Process.Start(@"C:\Program Files (x86)\Microsoft Office\Office14\OUTLOOK.EXE", "/c ipm.note"); 
```

关于您关于以 @ 字符为前缀的字符串的问题，这些字符串被称为逐字字符串文字。您可以在其中一个中包含一个双引号，方法是像我在代码片段中那样使用两个双引号。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-09-11T08:48:50.337

```
System.Diagnostics.Process.Start(@"C:\Program Files (x86)\Microsoft Office\Office15\OUTLOOK.EXE", @"/a C:\Users\Abu18saud.Abu18saud-PC.001\Documents\file_hml.pdf /m username@gmail.com /c ipm.note"); 
```

# windows - 编写 .bat 文件以在特定日期更改用户密码

> ID：14366888
> 
> 赞同：1
> 
> 时间：2013-01-16T20:08:09.420
> 
> 标签：windows, batch-file, passwords, cmd

嗨，我想记住如何编写 .bat 文件以在特定日期运行以自动更改用户密码。我试过的方法是。@echo off date \t (如果系统日期是 01/07/13) 转到第 15 行 (如果系统日期是 01/22/13) 转到第 16 行 (如果系统日期是 02/05/13) 转到第 16 行17（如果系统日期是 02/17/13）转到第 18 行（如果系统日期是 02/27/13）转到第 19 行

网络用户用户密码网络用户用户密码3网络用户用户密码4网络用户用户密码5网络用户用户密码6

谁能帮我吗

好的，我需要更多帮助，我已经尝试了这两种方法，但我似乎无法让它工作，任何人都可以帮助我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:51:26.337

您可以将其缩短为

```
if %date%==01/07/13 net user user password 
```

这比`goto`每个人都有一个标签和一个标签要短得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:02:03.987

您应该`gotos`与标签一起使用。

标签是用`:LABELNAME`. 戈托斯是`goto :LABELNAME`。

使用[此方法](http://www.tech-recipes.com/rx/956/windows-batch-file-bat-to-get-current-date-in-mmddyyyy-format/)获取日期 - 调整它以返回所需格式的日期。采用：

```
if %date%=="date/to/test" goto :LINE15

rem ...

:LINE15
net user user password2 
```

此外，在每次*密码更改*后和*主程序*（带有测试）后使用`exit`或`goto :EOF`结束批处理文件。如果不是，程序将“通过”每条语句并多次更改密码，直到它变得——显然是不可取的。**`if``net user``password6`**

 **希望这可以帮助！！**

# ios5 - 如何从我的 NSDirectory 中获取数据（不仅仅是属性错字）？

> ID：14366891
> 
> 赞同：1
> 
> 时间：2013-01-16T20:08:26.313
> 
> 标签：ios5, nsdictionary

我想念一些简单的东西，但是已经好几天没有解决这个问题了。甚至开始创建一个“解决方法”只是为了暂时解决它，但仍然想以“正确”的方式解决这个问题。有什么建议么？谢谢！

.

**问题：**

似乎缺少 Adealer 类（获取错误“-[Adealer objectAtIndex:]: unrecognized selector sent to instance 0x8c5f8b0”），但我将 Adealer.h 导入到这个“detailsVC”。**但这不仅仅是将属性命名错误的简单错误**（`objectForKey:@"CustName"`而不是“custname”等 - 对此进行了很多测试）。

此外，我有类似的“listVC”，其中没有像 Adealer 这样的类，它们也以相同的方式将数据传输到相同的“detailsVC”，它们工作得很好！然后我只需通过以下调用获取数据；

```
self.labelRestName.text = [restDetails objectForKey:@"CustName"]; 
```

**概述：**

我有一个创建数据并显示列表的 tableViewController“listVC”，然后是一个 ViewController“detailsVC”来显示详细信息。数据（“listVC”中的选定行对象通过序列和“destVC.restGPSTransfer”（NSDictionary）传输。数据在“detailsVC”中正常到达，在终端中看起来像这样；

```
dealerName = Uppsala Centrum Test
dealerAdressStreet = Dragarbrunnsgatan 55
dealerAdressZip = 75320
dealerAdressCity = Uppsala
dealerLongitude = 17.63893
dealerLatitude = 59.85856
dealerDistance2 = 8586398.000000
etc 
```

.

**跟随数据：**

“列表VC”

1) 首先通过 AFNetworking json 对象从 web 获取数据到 NSMutableArray “restFeed” - 好的。

2）然后在这个循环中创建我自己的数据到 NSMutableArray 到 NSMutableArray “updatedDealers” - 好的；

```
 NSMutableArray *updatedDealers = [[NSMutableArray alloc]init];
        while (i+1 < [_restFeed count]) {
          i++;

    // Get dealer position function here        
    // Get distance function here

    // Then create my own data here (also #imported Adealer to "listVC";
            Adealer *theDealer = [[Adealer alloc]init];

    theDealer.dealerName = [[_restFeed objectAtIndex:i]objectForKey:@"CustName"];
    theDealer.dealerLongitude = [[_restFeed objectAtIndex:i]objectForKey:@"long"];
    theDealer.dealerLatitude = [[_restFeed objectAtIndex:i]objectForKey:@"lat"];
    theDealer.dealerDistance2 = theDistance;
    // etc...

    // Check if data ok
    NSLog(@"theDealer = %@",[theDealer description]);

    // Don't add dealer object without positiondata to the new array
    if (![theDealer.dealerLatitude isEqualToString:@""]) {          
        [updatedDealers addObject:theDealer];
    } 
```

3）然后我使用 NSSortdescriptor 将 NSMutableArray "updatedDealers" 中的经销商排序为距离顺序，最后创建新的 NSMutableArray "restFeed"；`@synthesize dealerFeed = _dealerFeed;`（在“listVC”中也做了“ ”）-好的。

```
 _dealerFeed = [NSMutableArray arrayWithArray:sortedContestArray]; 
```

4）用这个数组填充一些tableViewCells，它工作得很好 - 好的。；

```
 cell.cellDealerName.text = [NSString stringWithFormat:@"%@",[[_dealerFeed objectAtIndex:indexPath.row]dealerName]]; 
```

5) 在函数 didSelectRowAtIndexPath 中使用“detailsVC”的 NSDictionary “restGPSTransfer”传输选定的对象 - 好的；

```
 destVC.restGPSTransfer = [_dealerFeed objectAtIndex:myIndexPath.row]; 
```

“详细信息”：

6）数据似乎可以正常传输（本帖顶部），但是在尝试调用数据时；

```
 self.labelRestName.text = [restGPSTransfer objectForKey:@"dealerName"]; 
```

我收到此错误并且应用程序崩溃：“-[Adealer objectAtIndex:]: unrecognized selector sent to instance 0x8c5f8b0”。

**又做了一些测试...**

试图验证结构 + 它是 NSDictionary“restGPSTransfer”的键和属性，但使用描述只让我到目前为止。并没有解决我的问题，我仍然得到“无法识别的选择器”错误。它可能已经成为字典或其他东西中的字典吗？

构造了这个简单的 if-test 来查看属性是否真的存在。但我必须“手动”检查每个属性。可能有一种更聪明的方法来检查 NSDictionary / NSArray 的漏洞？

```
if ([restGPSTransfer objectForKey:@"dealerName"]) {
    NSLog(@"= YES! key exists.");
} else {
    NSLog(@"= Nope! key don't exists");
} 
```

感谢您对此的任何帮助:-)

.

**更新 Adealer 类文件；**

经销商.h

```
#import <Foundation/Foundation.h>

@interface Adealer : NSObject
@property (nonatomic, retain) NSString * dealerName;        
@property (nonatomic, retain) NSString * dealerAdressCity;
@property (nonatomic, retain) NSString * dealerAdressStreet;
@property (nonatomic, retain) NSString * dealerAdressZip;   
@property (nonatomic, retain) NSNumber * dealerID;
@property (nonatomic, retain) NSString * dealerImages;      
@property (nonatomic, retain) NSString * dealerLogo;        
@property (nonatomic, retain) NSString * dealerMail;        
@property (nonatomic, retain) NSString * dealerProducts;    
@property (nonatomic, retain) NSString * dealerTel;         
@property (nonatomic, retain) NSString * dealerText;    
@property (nonatomic, retain) NSString * dealerWeb; 
@property (nonatomic, retain) NSString * dealerLongitude;   
@property (nonatomic, retain) NSString * dealerLatitude;    
@property (nonatomic, retain) NSString *dealerDistance; 
@property float dealerDistance2;
@end 
```

经销商.m

```
#import "Adealer.h"
@implementation Adealer
@synthesize dealerAdressCity, dealerAdressStreet, dealerAdressZip, dealerID, dealerImages, dealerLogo;
@synthesize dealerMail, dealerName, dealerProducts, dealerTel, dealerText, dealerWeb;
@synthesize dealerLongitude, dealerLatitude, dealerDistance,dealerDistance2;
- (NSString *)description {
// Added extension of description

NSMutableString *string = [NSMutableString string];

[string appendString:@"\ntheDealer object and it's properties:\n"];

[string appendFormat:@"dealerName = %@\n", dealerName];
[string appendFormat:@"dealerAdressStreet = %@\n", dealerAdressStreet];
[string appendFormat:@"dealerAdressZip = %@\n", dealerAdressZip];
[string appendFormat:@"dealerAdressCity = %@\n", dealerAdressCity];

[string appendFormat:@"dealerTel = %@\n", dealerTel];
[string appendFormat:@"dealerMail = %@\n", dealerMail];
[string appendFormat:@"dealerWeb = %@\n", dealerWeb];

[string appendFormat:@"dealerLogo = %@\n", dealerLogo];
[string appendFormat:@"dealerImages = %@\n", dealerImages];
[string appendFormat:@"dealerText = %@\n", dealerText];
[string appendFormat:@"dealerProducts = %@\n", dealerProducts];

[string appendFormat:@"dealerLongitude = %@\n", dealerLongitude];
[string appendFormat:@"dealerLatitude = %@\n", dealerLatitude];
[string appendFormat:@"dealerDistance = %@\n", dealerDistance];
[string appendFormat:@"dealerDistance2 = %f\n\n", dealerDistance2];
return string;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:19:18.227

**解决了！** 如果其他人需要，请在此处发布。

**解决方案**

在我的“detailsVC”中，我首先做了这个 iVar 声明；

。H：

```
Adealer *theDealer;
@property (nonatomic, retain) Adealer *theDealer; 
```

米：

```
@synthesize theDealer; 
```

然后在我的“listVC”中，我这样做是为了将 Adealer 对象及其属性转移到“detailsVC”（请记住，Adealer 对象已经在前面描述的“循环”中获得了它的属性）；

而不是我之前的；

```
destVC.restGPSTransfer = [_dealerFeed objectAtIndex:myIndexPath.row]; 
```

我把它改成了；

```
destVC.theDealer = [_dealerFeed objectAtIndex:myIndexPath.row]; 
```

为了在“detailsVC”中实际显示和检查转移的属性，我现在可以简单地调用它来获取经销商名称（或任何其他属性）；

```
self.labelRestName.text = theDealer.dealerName;
NSLog(@"theDealer.name = %@",theDealer.dealerName); 
```

效果很好！祝大家编码愉快！

# python - 在 python 烧瓶中为 url 定义路由，以任何但不是单独的数字结尾

> ID：14366894
> 
> 赞同：0
> 
> 时间：2013-01-16T20:08:31.610
> 
> 标签：python, regex, flask, routes

这是我的python代码

```
@app.route("/<regex('.*\/([0-9]+)'):param>/")
def go_to(param):
    return param 
```

我正在使用 Flask Framework。上面的路由只允许以数字结尾的 url 来访问`go_to`函数。如何为 url 以外的任何内容定义路由`numbers alone`。例如`www.example.com/asd/ase/vi89`属于数字单独类别，同样 `www.example.com/as/er/_67io`也属于该类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:25:28.843

如果您希望您的网址以数字结尾，请在正则表达式的末尾放置一个结束标记 ('$')。

# jquery - 将 X 放在元素上以从中删除元素 列表

> ID：14366897
> 
> 赞同：0
> 
> 时间：2013-01-16T20:08:37.147
> 
> 标签：jquery, html, jquery-ui, user-interface

目前，这就是我所拥有的

![在此处输入图像描述](../Images/cf0d9e2467acf476c7d681ce029659bc.png)

目前，可以拖放元素（目前，如果它被拖放到指定区域，则没有监听器捕获）

**HTML**

```
<div class='left'>
<ul id="sortable">
    <li class="ui-state-highlight"></li>
    <li class="ui-state-highlight"></li>
    <li class="ui-state-highlight"></li>
</ul>
</div> 
```

**查询**

```
<script>
    $(function() {
        $( "#sortable" ).sortable({
          items: "li:not(.ui-state-highlight)",
          placeholder: "ui-state-highlight"
        });
        $( "#sortable" ).disableSelection();
    });
  </script> 
```

理想情况下，我想拥有这个。

![在此处输入图像描述](../Images/10480443547f76560d78ba4dc6f42cfe.png)

A）有人可以指出我如何在元素末尾放置 X 的正确方向，以便用户可以单击 X 将其从列表中删除。

B) 或者，向我展示如何将不需要的元素拖放到列表区域之外以将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:16:06.963

你必须自己做一些造型。但这里有一个例子：

```
# Example HTML
<div class='left'>
<ul id="sortable">
    <li class="ui-state-highlight" id="num1"><span></span></li>
    <li class="ui-state-highlight" id="num2"><span></span></li>
    <li class="ui-state-highlight" id="num3"><span></span></li>
</ul>
</div>

#Example CSS (you will have to do some styling yourself. You could for example use an image for the x or something)
#sortable .ui-state-highlight span {
    position: absolute;
    left: 2px;
    height: 10px;
    width: 10px;
    background-color: white;
}

# Untested, but this should be corret (tho, untested)
$('#sortable').on('click','.ui-state-highlight span',function () {
    $(this).parent().remove();
}); 
```

# jquery - 提交处理程序不起作用

> ID：14366899
> 
> 赞同：0
> 
> 时间：2013-01-16T20:08:48.007
> 
> 标签：jquery, jquery-validate

我在下面使用的代码正在正确验证，但在字段有效时未提交：

```
<script>
  $(document).ready(function(){
    $("#verifyformDesktop").validate({
   errorContainer: "#messageBox1, #messageBox2",
   errorLabelContainer: "#messageBox1 ul",
   wrapper: "li", debug:true,
   submitHandler: function(form) {
     form.submit();
   }
 })
});
</script>

<form name="verifyformDesktop" id="verifyformDesktop" action="php/verify.php" method="post">
...
<input type="submit" name="submit" id="submit" value="ENTER"> 
```

也许提交处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:15:09.117

`debug: true,`从您的`.validate()`选项中删除。

它仅用于测试和阻止`submit`.

> **debug：**启用调试模式。如果为真，则不提交表单...

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

**工作演示：**

[http://jsfiddle.net/FHAV2/](http://jsfiddle.net/FHAV2/)

你也不需要声明一个`submitHandler:`函数......

```
submitHandler: function(form) {
    form.submit();
} 
```

...因为这只是您将其排除在外时的默认插件行为。

但是，如果您需要做其他事情，那么它是正确的......

```
submitHandler: function(form) {
    // do some other stuff before submit
    form.submit();
} 
```

# sql - 合并后选择查询不起作用

> ID：14366901
> 
> 赞同：1
> 
> 时间：2013-01-16T20:08:49.910
> 
> 标签：sql, sql-server, sql-server-2008, merge

我正在执行以下步骤：

*   合并语句。如果值不存在，merge 语句会将值插入到视图中。
*   选择stmt。选择我插入的记录

但是选择查询返回空白。示例代码如下：

```
declare @now AS DATETIME = GETUTCDATE(),
        @uuid AS INT = 1;

MERGE A.V_Table AS T
(
  Select 
     A1,
     A2
  FROM B.Table
)S
on T.A1 = T1.A1
   and T.A2 = T1.A2
when not matched by target then
insert
(
  A1,
  A2,
  UpdateUUID,
  UpdateTimeStamp
)
values
(
 s.a1,
 s.a2,
 @uuid,
@now
);

select *
from A.V_Table
where updateuUid = @uuid and UpdateTimeStamp = @now; 
```

如果我打印出@now 和@uuid 的值并在选择查询中使用这些值，则返回记录。但不是当它像上面那样执行时。

知道为什么会这样吗？选择查询不是只有在合并完成后才运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-13T13:50:22.900

您所缺少的只是合并过程后的“GO”关键字：

```
declare @now AS DATETIME = GETUTCDATE(),
        @uuid AS INT = 1;

MERGE A.V_Table AS T
(
  Select 
     A1,
     A2
  FROM B.Table
)S
on T.A1 = T1.A1
   and T.A2 = T1.A2
when not matched by target then
insert
(
  A1,
  A2,
  UpdateUUID,
  UpdateTimeStamp
)
values
(
 s.a1,
 s.a2,
 @uuid,
@now
); 
GO

select *
from A.V_Table
where updateuUid = @uuid and UpdateTimeStamp = @now; 
```

# batch-file - 如何创建启动自定义 CMD 的 .bat 文件，并在其中运行脚本？

> ID：14366902
> 
> 赞同：0
> 
> 时间：2013-01-16T20:08:49.587
> 
> 标签：batch-file, automation, build-automation, cmd

我想在.bat 中制作一个自动化程序。该程序需要运行一个命令。但是，该命令必须从自定义 CMD 运行。

如果我打开常规 CMD，我将执行的命令：

1.  C:\Hardware\bin\StartCustomCMD.bat init（这是我要输入的第一件事。它会启动自定义 CMD。）
2.  bb autobuild（这是我要输入的第二件事。命令进入自定义 CMD）

您可能会说我没有编写这些脚本。我正在尝试在 Windows Scheduler 中进行设置，以便脚本每天自动运行。关于我该怎么做的任何帮助？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:57:26.557

为自己创建一个新的批处理文件，并将其他内容嵌入其中，然后运行它。

```
@echo off
call C:\Hardware\bin\StartCustomCMD.bat
bb autobuild 
```

如果`bb`它本身是一个批处理文件，那么`call`也可以使用它。什么`call`是执行另一个批处理文件，然后继续处理。如果您不使用`call`，当您从另一个运行一个批处理文件时，后者会“接管”并且调用者不会继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T17:01:08.473

为此，您可以使用 timeout 和 goto 命令。超时等待一段时间（以秒为单位），但可以在顶层打开 cmd 时按任意键跳过。如果您可以看到 cmd，请在桌面上按其图标，直到您看不到它为止。然后使用 goto 命令可以转到第一行。所以这将是你的脚本：

```
:start
C:\Hardware\bin\StartCustomCMD.bat init  
bb autobuild  
timeout 86400
goto start 
```

您已经知道前两个命令的作用，但是`timeout 86400`恰好等了一天，然后`goto start`命令转到第一个命令，以便重复。如果您需要添加更多命令，请将它们放在`timeout 86400`命令上方。

# c# - AutoMapper：将模型中的 IList 映射到 viewModel 中的 IEnumerable

> ID：14366906
> 
> 赞同：0
> 
> 时间：2013-01-16T20:09:06.133
> 
> 标签：c#, asp.net, asp.net-mvc-3, automapper

是否可以将 Group 中的 IList 映射到 GroupViewModel 中的 IEnumerable？

**模型**

```
public class Group
{
    public string Name { get; set; }
    public virtual IList<Permission> Permissions
    {
        get { return _permissoes ?? (_permissions = new List<Permission>()); }
        set { Permissoes.Clear(); _permissions = value; }
    }
}

public class Permission
{
    public long Id { get; set; }
    public string Name { get; set; }
} 
```

**视图模型**

```
public class GroupViewModel
{
    public string Name { get; set; }
    public IEnumerable<PermissionViewModel> Permissions { get; set; }
}

public class PermissionViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:27:42.667

就那么简单：

```
var grp = new Group {Permissions = new List<Permission>{new Permission{Name="Permission 1"}, 
                                                       {new Permission{Name="Permission 2"}}}};

Mapper.CreateMap<Permission, PermissionViewModel>();

Mapper.CreateMap<Group, GroupViewModel>();

var result = Mapper.Map<GroupViewModel>(grp); 
```

# apache-flex - Flex/AIR/Actionscript/Mobile File.writeObject/readObject 始终生成 null 且不生成错误

> ID：14366911
> 
> 赞同：0
> 
> 时间：2013-01-16T20:09:28.117
> 
> 标签：apache-flex, actionscript, filestream

我已经尝试了几天，只是为了在我的项目中获得一个简单的 writeObject/readObject 功能。无论我做什么，结果都是，a）创建了一个文件，并且 b）当我尝试重新读取该文件时，它是**null**。

我的项目针对 iPad 设备上的 iOS，但这个精简版针对 iPad 的 AIR 模拟器。

我之前已经注册和跟踪了每个可用的事件，但它们从未完成任何事情，所以为了保持问题简单，我删除了它们。

即使我使用带有单个字符串属性集的通用对象而不是我的值对象，它仍然会读回（并且我假设，写出）为**null**。

这是我的跟踪返回，后跟项目中使用的代码：

```
[SWF] PictureToolsOnTheMoveMakeItDev.swf - 2,644,533 bytes after decompression
PictureToolsOnTheMoveMakeItDev FUNCTION creationCompleteHandler
    file.resolvePath(filename).nativePath: C:\Users\cepelc\AppData\Roaming\org.PictureTools.Apps.PictureToolsOnTheMoveMakeItDev.debug\Local Store\User00100\Photos\00100-1358359285139.PTotmImageVO
PictureToolsOnTheMoveMakeItDev FUNCTION saveImageToLibrary
FileSerializer FUNCTION writeObjectToFile()
    FileStream.open(write) TRY
    FileStream.open(write) FINALLY
    FileStream.writeObject(ptotmImageVO) TRY
    FileStream.writeObject(ptotmImageVO) FINALLY
    FileStream.close()
PictureToolsOnTheMoveMakeItDev FUNCTION readImageFromLibrary
FileSerializer FUNCTION readObjectFromFile(C:\Users\cepelc\AppData\Roaming\org.PictureTools.Apps.PictureToolsOnTheMoveMakeItDev.debug\Local Store\User00100\Photos\00100-1358359285139.PTotmImageVO)
    file.exists: true
    FileStream.open(read) TRY
    FileStream.open(read) FINALLY
    FileStream.readObject() TRY
    FileStream.readObject() FINALLY
    FileStream.close()
    FileSerializer FUNCTION readObjectFromFile -- ptotmImageVO -- null
    ptotmImageVO: null
[Unload SWF] PictureToolsOnTheMoveMakeItDev.swf 
```

下面是我的应用程序 MXML：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="240"
               xmlns:c="components.*"
               creationComplete="creationCompleteHandler()">
    <s:layout>
        <s:VerticalLayout verticalAlign="middle" horizontalAlign="center" />
    </s:layout>

    <fx:Script>
        <![CDATA[
            import classes.FileSerializer;
            import vo.PTotmImageVO;

            private var ptotmImageVO:PTotmImageVO;
            private var fileSerializer:FileSerializer = new FileSerializer();
            private var file:File = File.applicationStorageDirectory;
            private var filename:String;

            protected function creationCompleteHandler():void
            {
                trace("PictureToolsOnTheMoveMakeItDev FUNCTION creationCompleteHandler");             

                ptotmImageVO = new PTotmImageVO();
                ptotmImageVO.userid = "00100";
                ptotmImageVO.description = "TestPuppyBunnyThingy";
                ptotmImageVO.timestamp = new Date().getTime();
                ptotmImageVO.type = "PictureTools - On The Move - Photo Entity";

                filename = ptotmImageVO.userid+"-"+ptotmImageVO.timestamp+".PTotmImageVO";

                file = file.resolvePath("User00100");

                if(file.exists && !file.isDirectory)
                {
                    file.deleteFile();
                }
                file.createDirectory();

                file = file.resolvePath("Photos");

                if(file.exists && !file.isDirectory)
                {
                    file.deleteFile();
                }
                file.createDirectory();

                trace("    file.resolvePath(filename).nativePath: "+file.resolvePath(filename).nativePath);

                saveImageToLibrary();
            } // end FUNCTION creationCompleteHandler

            protected function saveImageToLibrary():void
            {                               
                trace("PictureToolsOnTheMoveMakeItDev FUNCTION saveImageToLibrary");

                fileSerializer.writeObjectToFile(ptotmImageVO, file.resolvePath(filename).nativePath);        

                readImageFromLibrary();             
            } // end FUNCTION saveImageToLibrary

            protected function readImageFromLibrary():void
            {               
                trace("PictureToolsOnTheMoveMakeItDev FUNCTION readImageFromLibrary");

                ptotmImageVO = fileSerializer.readObjectFromFile(file.resolvePath(filename).nativePath) as PTotmImageVO;
                trace("    ptotmImageVO: "+ptotmImageVO);                   
            } // End FUNCTION readImageFromLibrary

        ]]>
    </fx:Script>

</s:Application> 
```

FileSerializer.as 类

```
package classes
{
    import flash.errors.IOError;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;

    import vo.PTotmImageVO;

    public class FileSerializer
    {
        private var fileStream:FileStream = new FileStream();
        private var file:File;

        public function FileSerializer()
        {

        } // End CONSTRUCTOR FileSerializer

        public function writeObjectToFile(ptotmImageVO:PTotmImageVO, fname:String):void
        {
            trace("FileSerializer FUNCTION writeObjectToFile()");
            file = new File(fname);

            try
            {
                trace("    FileStream.open(write) TRY");
                fileStream.open(file, FileMode.WRITE);
            }
            catch (e:SecurityError)
            {
                trace("    FileStream.open(write) CATCH SecurityError "+e);
            }
            finally
            {
                trace("    FileStream.open(write) FINALLY");
            }

            try
            {
                trace("    FileStream.writeObject(ptotmImageVO) TRY");
                fileStream.writeObject(ptotmImageVO);
            }
            catch (e:IOError)
            {
                trace("    FileStream.writeObject(ptotmImageVO) CATCH IOError "+e);
            }           
            finally
            {
                trace("    FileStream.writeObject(ptotmImageVO) FINALLY");
            }

            fileStream.close();
            trace("    FileStream.close()");

        } // End FUNCTION writeObjectToFile

        public function readObjectFromFile(fname:String):PTotmImageVO
        {
            trace("FileSerializer FUNCTION readObjectFromFile("+fname+")");

            var ptotmImageVO:PTotmImageVO;

            file = file.resolvePath(fname);

            trace("    file.exists: "+file.exists);

            if(file.exists)
            {
                try
                {
                    fileStream.open(file, FileMode.READ);
                    trace("    FileStream.open(read) TRY");
                }
                catch (e:SecurityError)
                {
                    trace("    FileStream.open(read) CATCH SecurityError "+e);
                }
                finally
                {
                    trace("    FileStream.open(read) FINALLY");
                }

                try
                {
                    trace("    FileStream.readObject() TRY");
                    ptotmImageVO = fileStream.readObject() as PTotmImageVO;
                }
                catch (e:IOError)
                {
                    trace("    FileStream.readObject() CATCH IOError "+e);
                }           
                finally
                {
                    trace("    FileStream.readObject() FINALLY");
                }

                fileStream.close();
                trace("    FileStream.close()");
                trace("    FileSerializer FUNCTION readObjectFromFile -- ptotmImageVO -- "+ptotmImageVO);

                return ptotmImageVO;
            }
            else
            {
                return null;
            }
        } // End FUNCTION readObjectFromFile

    } // End CLASS FileSerializer

} // End PACKAGE classes 
```

PTotmImageVO.as 值对象

```
package vo
{
    import flash.display.BitmapData;

    [remoteClass(alias="PTotmImageVO")]

    public class PTotmImageVO
    {
        public var userid:String;
        public var thumbnail:BitmapData;
        public var image:BitmapData;
        public var timestamp:Number;
        public var description:String;
        public var type:String;

        public function PTotmImageVO()
        {

        } // End Constructor PTotmImageVO
    } // End Class PTotmImageVO
} // End Package vo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:57:00.963

解决。Metadata 标记是 [RemoteClass... 而不是 [remoteClass，如我开始工作的示例代码中所示。由于编译器不检查这些标签，并且制作您自己的标签在技术上并不是错误，因此 - 永远 - 不会有任何诊断数据可以工作。

# python - 即使文件存在，脚本也无法识别文件

> ID：14366912
> 
> 赞同：0
> 
> 时间：2013-01-16T20:09:30.767
> 
> 标签：python

我正在尝试使用以下代码从根目录打开一个文件“test_msm8974.sh”，即使该文件存在我仍然收到以下错误，是否有更好的方法来实现这个或关于为什么脚本不存在的建议找到了吗？

```
try:
    with open("test_" + target + ".sh") as f: pass
    copy("test_" + target + ".sh", BUILD_ROOT_DIR)
except IOError as e:
    print "test_" + target + ".sh" + " file missing"
    raise 
```

即使文件存在，我也会不断收到以下错误

```
Traceback (most recent call last):
  File "g2g_integration.py", line 612, in <module>
    main()
  File "g2g_integration.py", line 430, in main
    with open("test_" + target + ".sh") as f: pass
IOError: [Errno 2] No such file or directory: 'test_msm8974.sh' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:15:43.500

的输出是`os.getcwd()`什么？它和你的目标文件是同一个目录吗？

总的来说，我更喜欢使用`os.path.exists`and `os.path.isfile`(etc) 而不是尝试打开文件。此外，您的代码中有很多重复的`"test_" + target + ".sh"`. 您应该将其保存在变量中。

# sql-server - SSIS 中的奇怪问题与 WITH RESULTS SET 返回错误的列数

> ID：14366913
> 
> 赞同：1
> 
> 时间：2013-01-16T20:09:32.910
> 
> 标签：sql-server, tsql, ssis, sql-server-2012

所以我在 SQL Server 中有一个存储过程。我已将其代码（针对此问题）简化为：

```
CREATE PROCEDURE dbo.DimensionLookup as
BEGIN
select DimensionID, DimensionField from DimensionTable
inner join Reference on Reference.ID = DimensionTable.ReferenceID
END 
```

在 SQL Server 2012 上的 SSIS 中，我有一个带有以下源命令的查找组件：

```
EXECUTE dbo.DimensionLookup WITH RESULT SETS (
(DimensionID int,  DimensionField nvarchar(700) )
) 
```

当我在 BIDS 中以预览模式运行此过程时，它会正确返回两列。当我在 BIDS 中运行包时，它运行正常。

但是当我将它部署到 SSIS 目录（数据库所在的同一台服务器）时，将它指向相同的数据源等 - 它失败并显示以下消息：

> *EXECUTE 语句失败，因为它的 WITH RESULT SETS 子句为结果集编号 1 指定了 2 列，但该语句在运行时发送了 3 列。*

到目前为止尝试的步骤：

**在结果集中添加第三列**- 我得到一个不同的错误，VS_NEEDSNEWMETADATA - 这是有道理的，证明没有第三列。

**SQL Profiler** - 我看到了这个：

```
exec sp_prepare @p1 output,NULL,N'EXECUTE dbo.DimensionLookup WITH RESULT SETS ((
DimensionID int,  DimensionField nvarchar(700)))',1
SET FMTONLY ON exec sp_execute 1 SET FMTONLY OFF 
```

所以它正在尝试使用 FMTONLY 来获取结果集数据......不用说，运行 SET FMTONLY ON 然后自己在 SSMS 中运行命令会产生......只有两列。

**SET NOTCOUNT ON** - 没有任何改变。

所以，另外两件有趣的事情：

1.  我将它部署到我的本地 SQL 2012 安装中，它工作正常，连接相同等。所以它可能是服务器/数据库配置。不知道它是什么，我没有安装开发服务器，我自己的安装几乎是通过香草点击。

    1.  也许是最有趣的事情。如果我从过程的语句中删除连接，那么它就变成了

    从 DimensionTable 中选择 DimensionID、DimensionField

它回到只在结果集中发送 2 列！因此，添加一个连接，而不添加任何额外的输出列，将结果集增加到 3 列。即使我再添加 6 个连接，也只有 3 列。所以一个猜测是它的某种元数据列只有在有连接时才会被激活。

无论如何，正如你可以想象的那样，这让我有点发疯。我有一个解决方法将数据加载到临时表中并返回它，但为什么这不起作用？什么额外的列被发回？为什么只有当我添加连接时？

呸！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:32:56.440

所以所有的功劳归功于 billinkc：原因是因为一个补丁。

在版本 11.0.2100.60 中，使用旧的*SET FMTONLY*方法收集 SSIS 查找 SQL 命令元数据。不幸的是，这在 2012 年不起作用，因为[SET FMTONLY 上的在线图书条目有帮助](http://msdn.microsoft.com/en-us/library/ms173839.aspx)地指出：

> 请勿使用此功能。此功能已被 sp_describe_first_result_set 取代。

可惜他们没有听从自己的建议！

这已从版本 11.0.2218.0 开始修补。**使用sp_describe_first_result_set**系统存储过程正确收集元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T15:52:10.320

如果 SSIS 中指定的 WITH 结果集识别出比被调用的存储过程返回的列多，则可能会发生这种情况。检查您的存储过程并确保您具有正确数量的输出列作为 WITH 结果集。

# html - 如何将一个元素移近另一个元素。CSS

> ID：14366915
> 
> 赞同：0
> 
> 时间：2013-01-16T20:09:39.690
> 
> 标签：html, css

我的 CSS 只需要一点帮助：正如你在这里看到的[http://jsfiddle.net/5crwu/](http://jsfiddle.net/5crwu/)`span`我在元素和元素之间有一些空间`ul`，但我找不到如何抬起`ul`，更接近`span`. 我以为`margin: 0;`会这样做，但看起来我错过了一些东西。

```
.app-technologies {
    width: 200px;
    padding-left: 10px;
    border: 1px solid black;
}

.app-technologies span {
    position: relative;
    display: block;
    left: 0;
    font-size: 17px;
    margin: 0;
    border: 1px solid black;
}

.app-technologies ul{
    list-style: circle;
    padding-left: 18px;
    margin-top: 0;
    border: 1px solid black;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:16:58.067

如果你不想删除`<br>`，你可以给你的和负边距。这将是`margin:0px 0px -20px 0px;`

跨度上的负下边距会将其拉起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:14:40.790

我刚刚在 SPAN 之后删除了 BR，并从 span styledef 中删除了“位置：相对”。没有更多的空间。

# javascript - 如何使用 HTML 文本输入来设置 JavaScript 变量？

> ID：14366916
> 
> 赞同：0
> 
> 时间：2013-01-16T20:09:41.303
> 
> 标签：javascript, html

我正在尝试在设置 JavaScript 变量的网页上设置一个文本输入框，但我似乎无法弄清楚。谷歌没有帮助，我从搜索中发现如何使用 javascript 设置输入框的文本，这与我需要的相反。

这是我所拥有的：

```
window.onload = function() {

  document.getElementById('submitButton').onclick = function() {
        var searchterm;

        searchterm = "error";

    searchterm = document.getElementById("searchbox");

  };
}; 
```

我希望这段代码做什么：每当我点击“submitButton”时获取ID为“searchbox”的输入框的内容并将其用作变量“searchterm”，并使用新变量再次运行我的所有代码。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:12:02.560

您需要`value`从搜索框中获取。尝试这样的事情：

```
document.getElementById('submitButton').onclick = function() {
    var searchterm = "error";
    searchterm = document.getElementById("searchbox").value;
}; 
```

如果您需要`searchterm`在 onclick 函数范围之外使用变量，只需将`var searchterm`声明移到该函数之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:13:29.147

首先，如果要使用`searchterm`，必须将其移出功能范围。接下来只需为其赋值：

`searchterm = document.getElementById("searchbox").value;`

所以最终的代码是：

```
var searchterm; //<-- if you want to make the variable accessible outside the function
window.onload = function() {

  document.getElementById('submitButton').onclick = function() {
        //var searchterm;

        searchterm = "error";

    searchterm = document.getElementById("searchbox").value;

  };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:15:05.600

```
document.getElementById('submitButton').onclick = function() {
  window.searchterm = document.getElementById("searchbox").value;
} 
```

我使用 window 对象将其分配为全局变量（实际上不建议这样做），因此您可以从代码中的任何位置访问它。

现在您可以像这样访问您的变量：

```
var something = window.searchterm; 
```

# .net - 中止长时间运行方法

> ID：14366917
> 
> 赞同：1
> 
> 时间：2013-01-16T20:09:44.737
> 
> 标签：.net, abort

这是一个循环

有时 aPdf.Save 需要几分钟。

我想将时间限制设置为 60 秒。
如果需要更长的时间，只需设置 succUpdate = false; 并继续

```
try
{
    aPdf = new Aspose.Pdf.Document(docPathIn);
    // aPdf.Save will just hang some times and not throw an exception
    // if is runs more than 60 seconds I would like to give up and move to the next document
    aPdf.Save(MyDirOut + nativeXPSnew, Aspose.Pdf.SaveFormat.Xps);
    succUpdate = true;
}
catch (Exception Ex)
{
    Debug.WriteLine(Ex.Message);
    succUpdate = true;
}
finally
{
    aPdf = null;
} 
```

# java - 如果 IOException 关闭流的 DataInputStream

> ID：14366924
> 
> 赞同：1
> 
> 时间：2013-01-16T20:10:01.430
> 
> 标签：java, datainputstream

在所有示例中，每个人都可以找到如下代码：

```
DataInputStream inputStream = null;
try {
    inputStream = new DataInputStream( new FileInputStream("file.data"));
    int i = inputStream.readInt();
    inputStream.close();
} catch (FileNotFoundException e) { 
    //print message File not found
} catch (IOException e) { e.printStackTrace() } 
```

当这段代码遇到`FileNotFound`异常时，`inputStream`没有打开，所以不需要关闭。

但是为什么当`IOException`我在那个 catch 块中遇到时我看不到`inputStream.close()`。当输入数据异常抛出时，此操作会自动执行吗？因为如果程序输入有问题，这意味着流已经打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:11:42.207

```
DataInputStream inputStream = null;
try {
    inputStream = new DataInputStream( new FileInputStream("file.data"));
    int i = inputStream.readInt();
} catch (FileNotFoundException e) { 
  //print message File not found
} catch (IOException e) { 
  e.printStackTrace();
} finally{
  if(null!=inputStream)
    inputStream.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:12:50.770

不，关闭操作不会自动调用。`try-with-resources`为此，Java 7 中引入了以下用途：

```
try (DataInputStream inputStream = new DataInputStream( new FileInputStream("file.data"))) {
    int i = inputStream.readInt();
} catch (Exception e) { e.printStackTrace() } 
```

**UPD：**说明：`DataInputStream`实现`AutoCloseable`接口。这意味着，在构造`try-with-resources`Java 时会自动调用隐藏的 finally 块中的`close()`方法。`inputStream`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T20:14:13.493

即使文件未找到异常发生蒸汽是打开的，你也只需要再次关闭它。

您应该始终在 try catch 中添加 finally 块并关闭流。如果出现异常，finally 将始终执行

```
 finally {
            if(reader != null){
                try {
                    reader.close();
                } catch (IOException e) {
                    //do something clever with the exception
                }
            }
            System.out.println("--- File End ---");
        } 
```

# javascript - 添加输入隐藏字段值的方法

> ID：14366926
> 
> 赞同：1
> 
> 时间：2013-01-16T20:10:18.757
> 
> 标签：javascript, jsf-2

根据 inputHidden 字段的值，应在 javascript 端执行某些功能。

```
<h:inputHidden id="onlyCaseSensitive" value="#{testBean.isPageAllowed()}"/> 
```

执行 javascript 后，应用程序抛出错误 Property not qritable Illegal Syntax for Set Operation

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:18:03.270

您的值`h:inputHidde`应该指向带有 getter 和 setter 的支持 bean 的属性。因此，可能当您提交页面时，访问 setter 字段时出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:21:51.773

> *应用程序抛出错误 Property not writable Illegal Syntax for Set Operation*

您的 EL 表达式`#{}`无效。它必须评估为值表达式，而不是方法表达式。不可能对给定的方法表达式执行 setter 方法调用，但在提交 JSF 表单时这是必需的。您需要删除`is`前缀和那些括号以使其成为有效的值表达式。

```
<h:inputHidden id="onlyCaseSensitive" value="#{testBean.pageAllowed}"/> 
```

这需要一个`public boolean isPageAllowed()`getter方法和一个`public void setPageAllowed(boolean pageAllowed)`setter方法。

* * *

如果您*实际上*只需要将 JSF 托管 bean 属性用作 JavaScript 变量，那么您根本不应该将其呈现为隐藏输入，而只需让 JSF 呈现一个完整的 JavaScript 变量，而无需弄乱隐藏输入和HTML DOM 遍历。

例如

```
<script>
    var onlyCaseSensitive = #{testBean.pageAllowed};
</script> 
```

这将在 JSF 生成的 HTML 输出中结束，如下所示（右键单击页面并*查看源代码*以查看它）：

```
<script>
    var onlyCaseSensitive = true;
</script> 
```

# php - 如何在 php 中使用 glob() 只返回文件名

> ID：14366928
> 
> 赞同：29
> 
> 时间：2013-01-16T20:10:20.460
> 
> 标签：php, yii

我怎样才能返回文件名。$image 正在打印绝对路径名？

```
<?php
$directory = Yii::getPathOfAlias('webroot').'/uploads/';
$images = glob($directory . "*.{jpg,JPG,jpeg,JPEG,png,PNG}", GLOB_BRACE);
 foreach($images as $image)
   echo $image
?> 
```

我想要的只是特定目录中的文件名而不是绝对名称。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-16T20:11:51.997

使用 php 的[基本名称](http://php.net/manual/en/function.basename.php)

> 返回路径的尾随名称组件

```
<?php
$directory = Yii::getPathOfAlias('webroot').'/uploads/';
$images = glob($directory . "*.{jpg,JPG,jpeg,JPEG,png,PNG}", GLOB_BRACE);
 foreach($images as $image)
   echo basename($image);
?> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-16T20:57:09.467

代替`basename`，您可以在 glob 之前使用 chdir，因此结果不包含路径，例如：

```
<?php
$directory = Yii::getPathOfAlias('webroot').'/uploads/';
chdir($directory); // probably add some error handling around this
$images = glob("*.{jpg,JPG,jpeg,JPEG,png,PNG}", GLOB_BRACE);
 foreach($images as $image)
   echo $image;
?> 
```

这可能会快一点，但除非您有大量文件，否则不会有任何显着差异

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-01-26T16:38:40.573

单线：

```
$images = array_map('basename', glob($directory . "*.{jpg,JPG,jpeg,JPEG,png,PNG}", GLOB_BRACE)); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-01-16T20:12:05.647

利用`basename()`

```
echo basename($image); 
```

您还可以像这样删除扩展名：

```
echo basename($image, '.php'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-16T20:12:10.003

看看路径信息

[http://php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)

很有帮助的功能

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-03T11:58:44.827

如果您对更改工作目录的意外后果感到紧张，您可以`getcwd()`在更改之前存储当前目录，然后在您完成该目录中需要执行的所有操作后，只需使用该值切换回来。

```
 <?php
  $directory = Yii::getPathOfAlias('webroot').'/uploads/';
  $working_dir = getcwd();
  chdir($directory);
  $files = glob("*.{jpg,JPG,jpeg,JPEG,png,PNG}", GLOB_BRACE);
  chdir($working_dir);
  ?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-19T13:32:54.847

示例仅提取文件名并转换为新的文件名宽度扩展数组。

```
$dir =  get_stylesheet_directory();//some dir - example of getting full path dir in wordpress
$filesPath = array_filter(glob($dir . '/images/*.*'), 'is_file');

$files = array();       
foreach ($filesPath as $file) 
{
   array_push($files, basename($file));
} 
```

# java - 使用 maven 构建 Fest 时出现 ClassNotFound 错误

> ID：14366930
> 
> 赞同：2
> 
> 时间：2013-01-16T20:10:22.010
> 
> 标签：java, maven, fest

想试试 fest 2.x 分支。我对 maven 不熟悉，但是我从[github](https://github.com/alexruiz/fest-assert-2.x)下载了 fest ，它给了我一个 pom.xml，所以我用 maven 运行`mvn install`，并得到以下信息：

```
[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building FEST Fluent Assertions (Core) 2.0M9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ fest-assert-core ---
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ fest-assert-core ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/sbarnum/Java/fest-assert-2.x-master/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.5.1:compile (default-compile) @ fest-assert-core ---
[INFO] Compiling 180 source files to /Users/sbarnum/Java/fest-assert-2.x-master/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /Users/sbarnum/Java/fest-assert-2.x-master/src/main/java/org/fest/assertions/internal/Numbers.java:[31,17] cannot find symbol
symbol  : class Comparison
location: class org.fest.assertions.internal.Numbers<NUMBER>
[ERROR] /Users/sbarnum/Java/fest-assert-2.x-master/src/main/java/org/fest/assertions/error/ShouldContain.java:[38,6] cannot find symbol
symbol  : class Comparison
location: class org.fest.assertions.error.ShouldContain
[ERROR] /Users/sbarnum/Java/fest-assert-2.x-master/src/main/java/org/fest/assertions/error/ShouldContain.java:[53,73] cannot find symbol
symbol  : class Comparison
location: class org.fest.assertions.error.ShouldContain 
```

我错过了什么？我只要求一个可下载的 .jar 是不是忘恩负义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:21:11.590

我认为，根据他们[CI 服务器](https://fest.ci.cloudbees.com/)的输出，他们的构建当前已损坏，并且自 12 月 15 日以来已损坏。所以你什么也没做，他们只是在他们的仓库中破坏了代码。

[您可以在](https://fest.ci.cloudbees.com/job/fest%20assert/org.easytesting%24fest-assert-core/)“最后成功的工件”下从他们的 CI 服务器中拉出最后一个成功构建的 jar

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:13:36.127

Fest 当前构建非常不稳定，因为 Alex（Fest 创建者）正在进行重大重构。他推动他未完成的工作能够继续工作，因此破坏了构建。我不知道这个重构什么时候完成。

话虽如此，使用 Fest 的常用方法是从 maven 中央仓库获取最新版本（使用 maven、gradle、ivy ....）。

**[您甚至可以直接从那里](http://search.maven.org/#artifactdetails%7Corg.easytesting%7Cfest-assert-core%7C2.0M8%7Cjar)**的 maven 中央仓库下载 jar ，不过我建议使用可以下载传递依赖项的构建工具。

干杯，

Joel Costigliola（音乐节提交者）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:31:35.090

> 我只要求一个可下载的 .jar 是不是忘恩负义？

No, it isn't ungrateful to ask for a precompiled binary; but, if you are downloading source code and compiling, then you are picking the wrong item.

Perhaps they didn't release a precompiled binary, in which case I feel for you. Basically this build is obviously broken for reasons that closely resemble "They started changing stuff but didn't finish the job", and you may either attempt to pull from an earlier snapshot of the repository, or fix the "whatever" that they didn't get around to.

Assuming that you don't care about the code, can you find the binaries you seek amongst [http://code.google.com/p/fest/downloads/list](http://code.google.com/p/fest/downloads/list)?

# android - 如何在 android 中以编程方式检索我自己的 app-uri？

> ID：14366932
> 
> 赞同：0
> 
> 时间：2013-01-16T20:10:34.313
> 
> 标签：android, uri

有没有办法通过上下文文件或包管理器来获取它？已经搜索过但没有找到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:27:10.967

只需在您的上下文中调用[getPackageName() 即可。](http://developer.android.com/reference/android/content/Context.html#getPackageName%28%29)您可以在任何 Activity、Service 或基本上从[Context](http://developer.android.com/reference/android/content/Context.html)继承的任何东西中调用它。

除此之外，如果你想在没有上下文的地方访问它，只需创建一个单独的类来保存这样的预知值：

```
public class MyConstants {
    public static final String PACKAGE_NAME = "com.my.package";
} 
```

然后`MyConstants.PACKAGE_NAME`在您需要的任何地方使用它在您的应用程序中的任何地方访问它。

# cross-platform - 跨平台库的灵活目录结构？

> ID：14366936
> 
> 赞同：3
> 
> 时间：2013-01-16T20:10:46.653
> 
> 标签：cross-platform, build-process, directory-structure

我正在寻求有关如何为跨平台库设计灵活且符合逻辑的目录结构的建议。该库旨在可移植到多个类 UNIX 操作系统*和*一些处理器架构，具有以下标准：

*   特定于操作系统的代码；
*   特定于 CPU 的代码；
*   特定于操作系统*和*CPU 的代码；
*   当存在专门的实现时，能够覆盖某些文件；
*   移植时要访问的地方很少。

我相信将这些问题交给一个有能力的构建系统是明智的，但我不想冒险让目录结构在这个过程中变得复杂。值得注意的是，将会有相当多的文件，其中可能有三分之一将是特定于操作系统或 CPU 的，或两者兼而有之。

到目前为止，这是我想出的：

```
bin/
doc/
include/
    ports/
        {linux,freebsd,openbsd,...}/
            {amd64,x86,arm,...}/
                ...
    <shared code>
src/
    ports/
         {linux,freebsd,openbsd,...}/
            {amd64,x86,arm,...}/
                ...
    <shared code> 
```

安装这个库时，最好复制标题以允许更漂亮的代码，例如：`#include <bits/abi.h>`这可能是`linux-amd64`.

解决这种潜在混乱的优雅方法是什么？

# android - 使用 Facebook 应用程序的 Android facebook 身份验证

> ID：14366937
> 
> 赞同：0
> 
> 时间：2013-01-16T20:10:56.747
> 
> 标签：android, facebook

如何使用已安装的 Facebook 应用程序以静默方式授权发布消息？我的意思是我已经看到了很多带有授权对话框的例子，但是是否可以使用已安装的 facebook 应用程序来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:59:30.703

好的，似乎这是一个错误或不知道是什么。这对我有用：

```
public void loginToFacebook() {
mPrefs = getPreferences(MODE_PRIVATE);
String access_token = mPrefs.getString("access_token", null);
long expires = mPrefs.getLong("access_expires", 0);

if (access_token != null) {
    facebook.setAccessToken(access_token);
}

if (expires != 0) {
    facebook.setAccessExpires(expires);
}

if (!facebook.isSessionValid()) {
    facebook.authorize(this,
            new String[] { "email", "publish_stream" },
            new DialogListener() {

                @Override
                public void onCancel() {
                    // Function to handle cancel event
                }

                @Override
                public void onComplete(Bundle values) {
                    // Function to handle complete event
                    // Edit Preferences and update facebook acess_token
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token",
                            facebook.getAccessToken());
                    editor.putLong("access_expires",
                            facebook.getAccessExpires());
                    editor.commit();
                }

                @Override
                public void onError(DialogError error) {
                    // Function to handle error

                }

                @Override
                public void onFacebookError(FacebookError fberror) {
                    // Function to handle Facebook errors

                }

            });
}
} 
```

从这里：[http ://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

# svn - 用于 VS2012 的 Ankhsvn 插件未获取一些 dll 更改

> ID：14366938
> 
> 赞同：2
> 
> 时间：2013-01-16T20:11:03.063
> 
> 标签：svn, visual-studio-2012, ankhsvn

我有一个在源代码控制（颠覆）下有几个项目的解决方案。

当我构建解决方案时，我的项目中的 dll 被转储到网站项目的 /bin 中，AnkhSVN 获取大多数 dll 的更改，但有些显示为未更改，我必须手动右键单击它们并选择“添加to Pending Changes”选项，以便能够提交它们。

工作副本资源管理器显示 dll 已更改（旁边的红色方块），但它们不在“待更改”窗口中。

有关解决此行为的方法的任何想法？

ps 我对“不要版本 dll”类型的反馈不感兴趣。

# vbscript - 根据文件名 VBscript 中的匹配时间戳移动文件

> ID：14366941
> 
> 赞同：0
> 
> 时间：2013-01-16T20:11:17.713
> 
> 标签：vbscript

所以我需要一些帮助，我还是 vbscript 的新手。我有一个包含 100 多个不同类型文件的目录，但只想将具有正确时间戳的文件移动到另一个目录。

文件的命名约定如下：stuff-11012013-042567.txt，我只想移动具有匹配时间戳的文件。

我已经按如下方式启动了我的脚本，但我坚持如何查找和匹配文件名中的特定字符串，我是否必须将匹配结果设置为变量才能一次移动所有文件？

```
'Create file object system and declare to variable
 Set objFSO=CreateObject("Scripting.FileSystemObject")
'Get source and destination folders, set source and destination folder paths to variables
Set sfldr=objFSO.getFolder("in")
Set dfldr=objFSO.getFolder("out")

'Check to see if source folder Exists
If objFSO.FolderExists("in\") Then

   'Check to see if there are existing files on destination folder
   If dFldr.files.count = 0 Then

     If sfldr.files.count < 6 then
        msgbox("Need more files!")
     ElseIf sfldr.files.count > 6 then
        msgbox("Too many files, please double check for consistency")
     Else

         'Enter loop to move all files from source directory to destination directory
          for each file in sfldr.files
              objFSO.MoveFile "in\*", "out"
          Next
     End If
  Else
    msgbox("Files already Exists on Destination Folder. Please Check files!")
  End If
Else
    msgbox("Source path does not exist")
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:16:01.123

在您的`For`循环中，您将需要检查每个文件的名称并决定如何处理它。

如果时间戳总是在文件名中的相同位置，您可以使用该`Mid()`功能。如果位置不同，您可以使用`Instr()`.

# sql - 在 SQL Server 中查找相关性

> ID：14366943
> 
> 赞同：0
> 
> 时间：2013-01-16T20:11:30.757
> 
> 标签：sql, sql-server-2008

只想知道以下是否可以在 SQL Server 中完全完成

我有一个表，它有 3 列 - `SENTENCE ID (PK)`，`SENTENCE`（任意长度的字符串），`PATTERNS`（这些是在 中找到的 2 或 3 个单词模式`SENTENCE`）。

我需要找到所有不同`PATTERNS`的相互之间的相关性。

如果我在外部进行（使用 python 和 ODBC），我需要执行以下步骤

对于每个不同的模式

1.  获取 PATTERN 的计数
2.  查找所有具有该 PATTERN 的句子 ID
3.  获取上述句子 ID 中出现的所有 PATTERNS 的计数
4.  在 step3 中将当前 PATTERN 及其计数（作为列）附加到表中。
5.  继续将上表作为行附加到结果表中

下一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:41:26.700

让我假设 PATTERN 遵循`like`表达式的形式。而且，您只想计算一个句子的模式一次。

如果是这样，您可以执行以下操作。获取所有句子和模式之间的匹配：

```
with sp as (
       select s.sentenceID, p.pattern, count(*) over (partition by p.pattern) as NumSentences
       from Sentences s join
            Patterns p
            on s.sentence like p.pattern
     )
select sp1.pattern, sp2.pattern,
       sp1.pattern as Pattern1Count, sp2.pattern as Pattern2Count,
       count(*) as BothCount
from sp sp1 join
     sp sp2
     on sp1.pattern < sp2.pattern    -- <= if you want counts for a single pattern
group by sp1.pattern, sp2.pattern 
```

您没有明确说明您想要什么样的输出，但这应该足够了。

因此，通过一些合理的假设，您可以在 SQL 中执行此操作。

# .net - ADO.NET 透明代理来分离读写？

> ID：14366944
> 
> 赞同：1
> 
> 时间：2013-01-16T20:11:31.383
> 
> 标签：.net, ado.net, master-slave, read-write, broker

我想在不修改应用程序代码的情况下分离我的 .NET 应用程序执行的数据库读取和写入。

是否有商业或开源产品，可以作为虚拟“SQL Server”端点工作，同时执行代理/代理的功能，与实际的 SQL Server 通信？

然后我会通过修改连接字符串将我的应用程序指向这样的代理，然后它会根据其对 ADO.NET 或 TDS 协议或其他东西的了解将读取和写入路由到相应的 SQL Server。我知道甲骨文/Java世界中存在这样的东西，但微软世界中有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T20:33:32.873

SQL Server 具有称为“可用性组侦听器”的功能，听起来与您在此处寻找的非常相似。它在 MSDN ( [http://msdn.microsoft.com/en-us/library/hh213417.aspx](http://msdn.microsoft.com/en-us/library/hh213417.aspx) ) 上有很好的记录。

这是文档的摘录，听起来像是您想要的功能：

> 可用性组的主数据库处理传入的只读路由请求，并尝试查找连接到主副本并配置为只读路由的联机只读副本。客户端从主副本服务器接收回连接信息并连接到识别的只读副本。

请注意，此功能是特定于 SQL Server 的，一般不适用于任何 ADO.NET 提供程序；由于您的问题同时提到了 ADO.NET 和 SQL Server，我不确定这是否能解决您的问题。

# java - 使用 JSESSION ID 或 Authentication 访问 JSON

> ID：14366945
> 
> 赞同：1
> 
> 时间：2013-01-16T20:11:35.867
> 
> 标签：java, json, authentication, apache-httpclient-4.x, jsessionid

我在 Eclipse 中创建了一个简单的 Java 项目（不是动态 Web 项目）。

我希望能够访问返回一些 JSON 值的 Web URL。

我可以使用 HttpClient 和所有这些访问 URL，但我无法验证我的会话，这是我访问 JSON 数据所必需的。如果您未通过身份验证，则 URL 会将您重定向到登录页面。

我尝试了多种验证会话的方法，但似乎都不起作用——我总是得到登录页面的 HTML 数据而不是 JSON。

我还注意到 JSESSION ID 被传递到请求标头中，但我似乎无法弄清楚如何创建 JSESSION ID 以及如何将其传递到 GET 请求中。

所以基本上，我可以通过两种方式解决这个问题：

1.  验证我的会话，然后访问 URL 以获取 JSON
2.  创建一个 JSESSION ID 并将其传递给 GET 请求以获取 JSON

有人知道该怎么做吗？

最终，我想使用从 JSON 收集的数据进行一些 Selenium 测试，所以我需要在动态 Web 项目（在 Eclipse 中）中完成所有这些工作，还是可以在常规 Java 项目中完成所有这些工作？

* * *

## 尝试 1

```
URL url = new URL(_url);

InputStream ins = url.openConnection().getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(ins));
StringBuilder builder = new StringBuilder();

for (String line = null; (line = reader.readLine()) != null;) {
    builder.append(line).append("\n");
}

System.out.println("RESPONSE:\n\n" + builder);

JSONTokener tokener = new JSONTokener(builder.toString());
JSONArray finalResult = new JSONArray(tokener);

System.out.println("JSON:\n\n" + finalResult.toString()); 
```

## 尝试 1 结果

我最终打印出登录页面的 HTML 代码，然后收到以下错误消息，因为页面上没有 JSON：

```
Exception in thread "main" org.json.JSONException: A JSONArray text must start with '[' at character 1 
```

* * *

## 尝试 2

我还尝试了[Oracle 的 Http Authentication](http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-auth.html)页面中的代码：

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.Authenticator;
import java.net.PasswordAuthentication;
import java.net.URL;

public class RunHttpSpnego {

    static final String kuser = "username"; // your account name
    static final String kpass = "password"; // your password for the account

    static class MyAuthenticator extends Authenticator {
        public PasswordAuthentication getPasswordAuthentication() {
            // I haven't checked getRequestingScheme() here, since for NTLM
            // and Negotiate, the usrname and password are all the same.
            System.err.println("Feeding username and password for " + getRequestingScheme());
            return (new PasswordAuthentication(kuser, kpass.toCharArray()));
        }
    }

    public static void main(String[] args) throws Exception {
        Authenticator.setDefault(new MyAuthenticator());
        URL url = new URL(args[0]);
        InputStream ins = url.openConnection().getInputStream();
        BufferedReader reader = new BufferedReader(new InputStreamReader(ins));
        String str;
        while((str = reader.readLine()) != null)
            System.out.println(str);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:19:57.040

当您登录时，服务器会在您的浏览器中使用响应中的 Set-Cookie 标头将会话 ID 设置为 cookie。

```
Set-Cookie: name=value
Set-Cookie: name2=value2; Expires=Wed, 09-Jun-2021 10:18:14 GMT 
```

然后，浏览器在请求标头中将这个 cookie 与每个后续请求一起提供给服务器。

```
Cookie: name=value; name2=value2 
```

HttpClient 可以为你做这个管理，就像浏览器一样。见[http://hc.apache.org/httpclient-3.x/cookies.html](http://hc.apache.org/httpclient-3.x/cookies.html) 那么你首先告诉 HttpClient 浏览登录页面，它会获取你的 cookie 并在随后的请求中发送它沿着。

您也可以自行处理并手动设置 cookie。在 HttpClient 3 中，这看起来像这样：

```
HttpMethod method = new GetMethod();
method.getParams().setCookiePolicy(CookiePolicy.IGNORE_COOKIES);
method.setRequestHeader("Cookie", "special-cookie=value"); 
```

如何在 HttpClient 4 中设置 cookie 可以在这里找到：[Apache HttpClient 4.0.3 - how do I set cookie with sessionID for POST request](https://stackoverflow.com/questions/4166129/apache-httpclient-4-0-3-how-do-i-set-cookie-with-sessionid-for-post-request)

或者您可以将其降低一点并添加完整的标题。

```
HttpGet httpget = new HttpGet(url); 
httpget.addHeader("Cookie", "JSESSIONID=..."); 
```

# grails - GORM 关系映射

> ID：14366946
> 
> 赞同：0
> 
> 时间：2013-01-16T20:11:40.533
> 
> 标签：grails, grails-orm

我有两个域类。A`request`应该映射到一个`color`. `color`域有 3 个不同的选项黄色、红色、绿色（稍后可能会有更多选项（条目））。因此，当用户保存一个新的时，`request`我希望它与其中一个相关联`colors`。在`request` `_form`I'm going to have yellow, red, green 中的一个`select`选项中`Colors.list()`。注意：这是我的真实模型的一个过度简化的示例。

**问题：**

*   我应该使用哪个映射关联？（我希望每个都`request`与一个相关联`color`）

*   当我从表单中获得输入时，我`color`将如何存储？`request`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:21:06.033

为了保持颜色，您有几个选择：

1.  `color`如果是用户提供的，或者不是来自预定义的集合，则将其保存为字符串。
2.  为您预期拥有的每个颜色值使用或创建一个枚举。如果您仅有的三种颜色是黄色、红色和绿色，那么这绝对是您更好的选择。

然后，在域上，您只需要使用 name 定义一个字段（您的枚举类型或字符串）`color`，它将作为 varchar 保存在数据库中。

在您的控制器中，当请求来自表单时，它将存储在`params`对象中，以您为字段提供的名称，即`params.yourColor`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:35:29.470

因此，您的选择框选项应该将颜色的 id 作为值。如果颜色域类称为颜色，则请求域类将简单地具有一个`Color color`，如果您使用数据绑定，只要您的选择框的名称是`color`. 如果您不使用数据绑定：

`new Request(...color: Color.get(params.nameOfSelectBox))`

# ruby-on-rails - 在设计代码中的哪里用“ActiveSupport::SecureRandom”替换“SecureRandom”？

> ID：14366949
> 
> 赞同：0
> 
> 时间：2013-01-16T20:11:48.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用 Windows 机器并使用 Ruby 1.9.3 和 Rails 3.2，我刚刚安装了 Devise gem 进行身份验证。

当我尝试使用以前注册的用户登录时，出现以下错误：

```
NameError in Devise::SessionsController#create

uninitialized constant ActiveSupport::SecureRandom 
```

谷歌搜索，我读到这是由于 Rails 3.2 中不推荐使用“ActiveSupport”，解决方案是将代码中“ActiveSupport:SecureRandom”的每次出现都替换为“SecureRandom”。

我一直在寻找那串代码（“ActiveSupport:SecureRandom”），但一直找不到。它在哪里？在哪个文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:46:53.377

您可以将此代码放在 devise.rb 的顶部

```
ActiveSupport::SecureRandom = SecureRandom 
```

为我工作

# php - 使用 PHP 为 web flash 视频播放器提供大型 mp4 文件

> ID：14366952
> 
> 赞同：0
> 
> 时间：2013-01-16T20:11:54.700
> 
> 标签：php

我在任何地方都找不到任何解决方案。

我有一个文件，它为 Flash 播放器输出一个 mp4 文件，如下所示：

`^^^/stream/NtPXRMmGjJd47423`

我有这个 /stream 的代码，如下所示：

```
^^^
$file = str_replace('/','\\',DOC_ROOT_STREAM."/".$path);

header('Last-Modified: Thu, 23 Sep 2010 02:00:02 GMT');
header('Content-Length: ' . filesize($file));
header('Connection: close');
header('Content-Type: video/mp4');

readfile($file);
exit; 
```

这适用于小文件，但不适用于大文件。

我检查了，网址是正确的。

我尝试改变`memory limit`，`time limit`但它没有帮助。

PS 我不能使用 Apache`xsendfile`等模块。

我需要一个解决方案，`readfile()`这样它就不会开始在内存中加载文件，然后将其发送到闪存以再次读取它，然后开始流式传输。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:17:07.883

尝试这个：

```
$handle = fopen($file, "rb");
while (!feof($handle)) {
  echo fread($handle, 32 * 1024);
}
fclose($handle); 
```

`readfile()`将尝试将文件的全部内容加载到内存中。`fread()`相反，您可以一次读取一小块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:27:15.023

另一个可能导致 PHP 提供的大文件出现问题的事情是，浏览器倾向于只下载文件的一部分，然后再返回以获取更多内容，以避免在可能不需要时一次下载所有内容，有看看[https://stackoverflow.com/a/4451376/1951649](https://stackoverflow.com/a/4451376/1951649) - 这将使您的 php 应用程序处理这些请求

# c# - 以编程方式应用 powerpoint 主题

> ID：14366954
> 
> 赞同：1
> 
> 时间：2013-01-16T20:11:58.673
> 
> 标签：c#, powerpoint

我正在制作一个**C# 应用程序**，我创建了**powerpoint 演示文稿**。我希望以编程方式**将主题应用于我的演示文稿。**我使用以下代码获得了主题列表。但是我怎样才能将它们应用到一个活跃的演示文稿中呢？

```
String programfilesPath = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);
String msOfficePath = "Microsoft Office\\Document Themes 14";
String fullPath = Path.Combine(programfilesPath, msOfficePath);
String[] fileEntries = Directory.GetFiles(fullPath, "*.thmx", SearchOption.TopDirectoryOnly); 
```

知道如何进行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:35:18.803

我刚刚找到了一些很好的例子：

1.  [以编程方式创建 PowerPoint](http://www.free-power-point-templates.com/articles/create-powerpoint-ppt-programmatically-using-c/)
2.  [应用主题 PowerPoint 2010](http://msdn.microsoft.com/en-us/library/hh297633%28v=office.14%29)

当*结合这两个指南*时，这一切都归结为

```
using PowerPoint = Microsoft.Office.Interop.PowerPoint;
using Core = Microsoft.Office.Core;
// ...

// create application object
PowerPoint.Application pptApplication = new PowerPoint.Application();

PowerPoint.Slides slides;
PowerPoint._Slide slide;
PowerPoint.TextRange objText;

// Create the Presentation File
PowerPoint.Presentation pptPresentation = pptApplication.Presentations.Add(Core.MsoTriState.msoTrue);

// APPLY THEME - for example Clarity.thmx or 
// anything within Microsoft Office\Document Themes 14    
pptPresentation.ApplyTheme(@"C:\Program Files (x86)\Microsoft Office\Document Themes 14\Clarity.thmx");

PowerPoint.CustomLayout customLayout = pptPresentation.SlideMaster.CustomLayouts[PowerPoint.PpSlideLayout.ppLayoutText];

// Create new Slide
slides = pptPresentation.Slides;
slide = slides.AddSlide(1, customLayout);

// Add title, modify content and so on ...
objText = slide.Shapes[1].TextFrame.TextRange;
objText.Text = "hello world";
objText.Font.Name = "Verdana";

pptPresentation.SaveAs(@"c:\yourPPT.pptx", PowerPoint.PpSaveAsFileType.ppSaveAsDefault, Core.MsoTriState.msoTrue);

pptPresentation.Close();
pptApplication.Quit();
GC.Collect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:34:56.403

找到了我正在寻找的答案，我正在分享完整的代码以帮助他人

```
using Microsoft.Office.Interop.PowerPoint;

String programfilesPath = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);
String msOfficePath = "Microsoft Office\\Document Themes 14";
String fullPath = Path.Combine(programfilesPath, msOfficePath);
String themePresentationPath = fullPath + "\\" + Waveform.thmx"; 
// You can change this Waveform.thmx file to any other theme file to apply other theme.

Application pptApplication = new Application();
Presentation pptPresentation = pptApplication.Presentations.Add(Microsoft.Office.Core.MsoTriState.msoTrue);

pptPresentation.ApplyTemplate(themePresentationPath); 
```

# vb.net - 仅执行一次某些语句（vb.net）

> ID：14366959
> 
> 赞同：1
> 
> 时间：2013-01-16T20:12:23.030
> 
> 标签：vb.net

我有一个问题，我可以在第一次应用程序执行时只执行一次语句吗？可以在没有注册密钥或安装程序的情况下完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:31:57.610

只需在 App.Config 中存储一个值

```
<appSettings>
<add key="HasExecuted" value ="0"/> 
```

在代码中：

```
If Convert.ToBoolean(ConfigurationManager.AppSettings("HasExecuted")) = False Then
'Do something only once
End If 
```

这是保存/更新 AppConfig 的指南：[在运行时更新 app.config system.net 设置](https://stackoverflow.com/questions/980440/update-app-config-system-net-setting-at-runtime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:29:15.127

由于您没有解释为什么您不想/不能使用任何“通用”方法来存储应用程序的状态参数，因此我假设它是出于反盗版目的。

* * *

我想这一切都取决于你想去的深度。

所以，这是我对我开发的几个商业应用程序所做的事情（主要但不限于防止盗版）：

*   使用您自己的专有算法加密原始可执行文件（也许，在您的情况下不是必需的）
*   创建一个启动器应用程序，它可以解密和执行您的应用程序
*   在启动器中实现一种机制来修改原始应用程序的某些区域，这些区域不影响其执行（提示：元数据/资源/等...）
*   保存修改后的代码

然后程序的后续执行可以通过“检测”此类更改来轻松检测“参数/值/设置”。

同样，这是为应用程序存储启动参数（或状态）的一种非常复杂且相当模糊的方法，但同样，根据您要查找的内容，这是一种非常安全和有效的方法。

* * *

这是一个演示此方法“基础知识”的示例：[HiddenParams](http://xfx.net/stackoverflow/HiddenParams.zip)

# java - 意图未定义

> ID：14366963
> 
> 赞同：0
> 
> 时间：2013-01-16T20:12:35.637
> 
> 标签：java, android, eclipse

所以我知道 my`Intent`是未定义的，与此类的构造函数有关，但我对 Java 太陌生，无法找出问题所在，也许你能帮忙？

```
serviceIntent = new Intent(this, myPlayService.class); 
```

编码：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    podcastPlayerLayout = inflater.inflate(R.layout.activity_podcast_player, container, false);

    try {
        serviceIntent = new Intent(this, myPlayService.class);

        // --- set up seekbar intent for broadcasting new position to service ---
        intent = new Intent(BROADCAST_SEEKBAR);

        initViews();
        setListeners();
    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getApplicationContext(),
                e.getClass().getName() + " " + e.getMessage(),
                Toast.LENGTH_LONG).show();
    }

   //Adding Listener to button
     streamSetButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            fileStreamAdress = streamSetButton.getText().toString();

            playPauseButtonClicked();
        }
    });

     playPauseButton.setOnClickListener(new View.OnClickListener() {

         @Override
         public void onClick(View v) {
             // TODO Auto-generated method stub

            fileStreamAdress = streamSetButton.getText().toString();

             playPauseButtonClicked();
         }

     });

    // Inflate the layout for this fragment
    return podcastPlayerLayout;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:15:04.803

我猜`this`是指适配器而不是上下文。尝试：

```
serviceIntent = new Intent(getApplicationContext(), myPlayService.class); 
```

或者

```
serviceIntent = new Intent(MainActivity.this, myPlayService.class);
// Where MainActivity is the Activity class's name 
```

原因是 Activity 是 Context 的子类，而 Adapters 不是...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:14:53.610

> 意图未定义

当变量未在作用域（或）类型中对编译器不明确时，您将收到这些错误。

```
serviceIntent = new Intent(BROADCAST_SEEKBAR); 
```

在这一行中，您没有输入变量`intent`。

它应该是这样的

```
Intent serviceIntent = new Intent(BROADCAST_SEEKBAR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:17:12.487

确保你有：

```
import android.content.Intent; 
```

在您的导入中，变量`intent`和`serviceIntent`声明为类变量或局部变量，例如：

```
Intent intent, serviceIntent; 
```

另外，请确保您使用的是正确的上下文。在您的情况下，`this`可能不是您想要的。尝试：

```
serviceIntent = new Intent(MyActivity.this, myPlayService.class); //OR
serviceIntent = new Intent(getBaseContext(), myPlayService.class); //OR
serviceIntent = new Intent(getApplicationContext(), myPlayService.class); 
```

# css - 表单提交后未加载 CSS - jQuery Mobile

> ID：14366964
> 
> 赞同：0
> 
> 时间：2013-01-16T20:12:44.513
> 
> 标签：css, jquery-mobile, forms, multipage

我有一个 HTML 表单，提交时会加载结果页面。

当我使用锚标记链接到相同的结果页面时，我可以使用其中一个`rel="external"`或`data-ajax="false"`强制完全刷新页面并重新加载相关页面 CSS。

从提交表单加载的页面是否有等价物？我目前没有使用 jQuery 提交表单。

**笔记：**

除了@peterm 的回答，我最初尝试但没有成功，我在表单的操作字符串 ( `action="results.php?type=search"`) 上附加了一个参数，我将它移到了表单内的隐藏输入元素中：

```
<input type="hidden" name="type" value="search" /> 
```

这样做之后，它对我来说非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:16:26.127

您可以`data-ajax="false"`在`form`元素上使用。

根据[jQuery Mobile 文档](http://jquerymobile.com/test/docs/forms/forms-sample.html)

> 要提交没有 Ajax 的表单，您可以全局禁用 Ajax 表单处理，或者通过 data-ajax="false" 属性执行表单。target 属性（如 target="_blank" ）在表单上也受到尊重，并且在表单提交时默认由浏览器处理该目标。请注意，与锚点不同的是，表单上不允许使用 rel 属性。

# jquery - 根据子 div 的数量添加类

> ID：14366967
> 
> 赞同：0
> 
> 时间：2013-01-16T20:13:06.227
> 
> 标签：jquery, addclass

我有一个父 div，其中将动态添加 2 到 4 个子 div。我需要计算子 div，然后根据子的数量向父 div 添加一个类。

```
<div id="parent">
   <div class="child">content</div>
   <div class="child">content</div>
   ...
</div> 
```

基本上，我需要用jquery来表示：

如果有 4 个子 div，则将类“.four”添加​​到父 div。

如果有 3 个子 div，则将类“.three”添加到父 div。

如果有 2 个子 div，则将类“.two”添加到父 div。

我想我需要使用 .length()，但我不知道如何将它们放在一起。我非常感谢任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:15:53.350

一种方法：

```
$('#parent').removeClass().addClass(function(){
    return ["none", "one", "two", "three", "four"]
       [$(this).children('.child').length];
}); 
```

# php - Jquery php mysql不附加分页

> ID：14366970
> 
> 赞同：0
> 
> 时间：2013-01-16T20:13:16.197
> 
> 标签：php, javascript, jquery, mysql

我展示了我的代码，以便他们可以帮助我，我正在尝试做一个购物车，其中产品来自列表，然后生成一个表，其中每一行都是一条记录（从 mysql 数据库访问）。

当您单击记录时，我已经设法做我需要的事情，通过 jQuery ajax 发送 GET A 模型表单。问题：如果您使用列表分页工作正常，但如果我走一个位于下面页面上的地方，我会导致矢量咨询并重新启动索引。我显示代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Listado de Productos</title>
 <script language="javascript" type="text/javascript" src="js/jquery-1.8.3.js">          </script>
 <script type="text/javascript">
$(document).ready(function() {    
    $("#paginar").live("click", function(){
    $("#contenido").html("<div align='center'><img src='imgs/cargando.gif'/></div>");
        var pagina=$(this).attr("data");
        var cadena="pagina="+pagina;

        $.ajax({
                    type:"GET",
                    url:"listar_busqueda.php",
                    data:cadena,
                    success:function(data)
                    {
                            $("#contenido").fadeIn(1000).html(data);
                    }
                });
        });
});  
  </script>

  <link href="css/tablecloth.css" rel="stylesheet" type="text/css" media="screen" />

  <script type="text/javascript">
  $(function() {
    /* For zebra striping */
    $("table tr:nth-child(odd)").addClass("odd-row");
    /* For cell text alignment */
    $("table td:first-child, table th:first-child").addClass("first");
    /* For removing the last border */
    $("table td:last-child, table th:last-child").addClass("last");
  });
 </script>

 <!-- script para manejar los click en los productos y sumarlos a la tabla --->
 <script>
 var total = 0;
 $(document).ready(function() { 

      $('#form').submit(function(event){ //en el evento submit del fomulario
          event.preventDefault();  //detenemos el comportamiento por default

          var url = $(this).attr('action');  //la url del action del formulario
          var datos = $(this).serialize(); // los datos del formulario
          $.ajax({
            type: 'GET',
            url: url,
            data: datos,
            dataType: 'json',                //data format   
            success: function(data)          //on recieve of reply
                {
                    var prodid = data[0];              //get id
                    var prodnom = data[1];           //get name
                    var proddesc = data[2];              //get id
                    var precioV = data[3];           //get name
                    var stock = data[4];           //get name
                    var cant2 = parseFloat(precioV).toFixed(2)

                    if(data == 0)
                      alert("El artículo ingresado no existe en la base de datos"); 
                         else
                            $('#tabla').append("<tr><td>"+prodid+"</td>"+"<td>"+prodnom+"</td>"+"<td>"+proddesc+"</td>"+"<td>"+precioV+"</td>"+"<td>"+stock+"</td>"+"<td>"+parseFloat(cant2).toFixed(2)+"</td>"+"</tr>")

                           total=parseFloat(total)+cant2;                   
                  } 

           });

      });   

    });
   </script>   
  </head>

  <body>
  <h2>Listado de Productos</h2>
  <table id="tabla" width="100%" border="1">
 <tr bgcolor="#F3FCB4">
<td>Codigo de producto</td>
<td>Descripcion</td>
<td>Rubro</td>
<td>Precio</td>
<td>Cantidad</td>
<td>Importe</td>
</tr>
</table>

<div id="contenido"><?php require("proces.php"); ?></div>
</body>
</html> 
```

/////proces.php

```
<?php

include("conexion.php");

$consulta_cantidad=mysql_query("SELECT * FROM productos",$conexion);
$resultados_cantidad=mysql_num_rows($consulta_cantidad);

if ($resultados_cantidad>0)
{
$filas_pagina=10;
$numero_pagina=1;

if(isset($_GET["pagina"]))
{
    sleep(1);
    $numero_pagina=$_GET["pagina"];
}

$campo_de_inicio=($numero_pagina-1)*$filas_pagina;
$total_registros=ceil($resultados_cantidad/$filas_pagina);

echo "<table align='center'>";
echo "<tr>";
    echo "<td>Codigo</td>";
    echo "<td>Nombre de producto</td>";
    echo "<td>Precio</td>";
    echo "<td>Stock</td>";
    echo "<td>Proveedor</td>";
    echo "<td>Accion</td>";
echo "</tr>";

$consulta=mysql_query("SELECT id,nombre,precio,stock,proveedor,id_cat FROM productos LIMIT $campo_de_inicio, $filas_pagina",$conexion);
while ($resultados=mysql_fetch_array($consulta))
{       
    echo "<tr>";
        echo "<td>".$resultados["id"]."</td>";
        echo "<td>".$resultados["nombre"]."</td>";
        echo "<td>".$resultados["precio"]."</td>";
        echo "<td>".$resultados["stock"]."</td>";
        echo "<td>".$resultados["proveedor"]."</td>";
   print '<td>';          
   print '<form name="form" id="form" action="proces.php">';
   print '<input name="car" type="submit"  value="C">';
   print '<input name="cant" type="text" id="cant" value="1" size="2">';
   print '<input name="id" type="hidden" id="id" value="'.$resultados['id'].'" size="2" >';
   print '</form>';
    echo "</tr>";
}

echo "</table>";

echo "<br/>";
echo "<hr/>";

if ($total_registros>1)
{
    echo "<div align='center'>";

    if ($numero_pagina!=1)
        echo "<a id='paginar' data='".($numero_pagina-1)."'>Anterior</a> ";

        for ($i=1;$i<=$total_registros;$i++)
        {
            if($numero_pagina==$i)
            {
                echo "<a>".$i."</a> ";
            }
            else
            {
                echo "<a id='paginar' data='".$i."'>".$i."</a> ";
            }
        }

    if($numero_pagina!=$total_registros)
    {
        echo "<a id='paginar' data='".($numero_pagina+1)."'>Siguiente</a>";

    }

    echo "</div>";
    }
    }

    ?> 
```

///产品mysql

```
-- Estructura de tabla para la tabla `productos`

CREATE TABLE IF NOT EXISTS `productos` (
`id` int(6) NOT NULL AUTO_INCREMENT,
`nombre` varchar(50) NOT NULL,
`desc` varchar(200) NOT NULL,
`precio` decimal(5,2) NOT NULL,
`stock` int(6) NOT NULL,
  `proveedor` varchar(100) NOT NULL,
`id_cat` int(3) NOT NULL,
PRIMARY KEY (`id`),
KEY `id_cat` (`id_cat`),
KEY `id_cat_2` (`id_cat`),
KEY `id_cat_3` (`id_cat`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1539 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:27:38.987

我认为问题是因为您的变量是在 javascript 上设置的，仅此而已..您可以使用 cookie 来解决这个问题。
[这是 $.cookie](http://archive.plugins.jquery.com/project/Cookie)，它可以帮助您解决问题。
代替

```
var total = 0; 
```

它会像

```
$.cookie('total',0) 
```

每次你想修改或阅读时，就去做

```
$.cookie('total',$.cookie('total')++);  
alert('Total actual: '+$.cookie('total')); 
```

# python - virtualenv中的python模块

> ID：14366977
> 
> 赞同：3
> 
> 时间：2013-01-16T20:13:36.093
> 
> 标签：python, virtualenv

我在 virtualenv 中使用 python。我有以下模块：

`offers/couchdb.py`：

```
from couchdb.client import Server

def get_attributes():
    return [i for i in Server()['offers']]

if __name__ == "__main__":
    print get_attributes() 
```

当我从文件运行它时，我得到：

```
$ python offers/couchdb.py
Traceback (most recent call last):
  File "offers/couchdb.py", line 1, in <module>
    from couchdb.client import Server
  File "/Users/bartekkrupa/D/projects/commercial/echatka/backend/echatka/offers/couchdb.py", line 1,     in <module>
    from couchdb.client import Server
ImportError: No module named client 
```

但是当我将它粘贴到解释器中时......它可以工作：

```
$ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from couchdb.client import Server
>>> 
>>> def get_attributes():
...     return [i for i in Server()['offers']]
... 
>>> if __name__ == "__main__":
...     print get_attributes()
... 
```

从文件运行该模块的python 没有加载 couchdb 模块，但在 REPL 中运行可能是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:19:31.090

您偶然发现了一个错误特征：*相对导入*。当您说 时`from couchdb.client...`，Python 首先`offers.`会在名为`couchdb`. 它会找到一个：你正在处理的文件，`offers/couchdb.py`！

通常的解决方法是禁用这种行为，无论如何，这在 Python 3 中已经消失了。把它作为 Python 代码的第一行放在你的文件中：

```
from __future__ import absolute_import 
```

然后 Python 将假定您要从名为（您这样做）的顶级模块导入`couchdb`，而不是当前模块的兄弟。

不幸的是，在这种情况下，您直接运行该文件，Python 仍将添加`offers/`到其搜索路径中。运行打算作为模块的文件时，您可以使用以下命令运行它`-m`：

```
python -m offers.couchdb 
```

现在它应该可以工作了。

（当然，你可以不命名你的文件`couchdb.py`。但我发现以它们与之交互或包装的东西命名的模块非常有用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:20:19.030

**编辑：** 见上面 Eevee 的回答——我认为它更合适。不过，这可能对其他人有帮助（？）：

也许你没有在你的 virtualenv 中安装 couchdb？这可以解释为什么它在解释器中工作（如果解释器*不是*从 virtualenv.xml 启动的）。

要么在那里安装它，要么使用--site-packages 创建virutalenv。

# c# - 调用 Web 应用程序时出错：无法转换 System.Collections.Generic.List 到字符串[]

> ID：14366978
> 
> 赞同：0
> 
> 时间：2013-01-16T20:13:45.300
> 
> 标签：c#, asp.net, web-services, web-applications

我有一个网络服务和一个网络应用程序。
Web 服务具有以下代码：

```
List<string> listCen =new List<string>();
serviciowebclienteKmeans.ServicioWebKmeans serv = new serviciowebclienteKmeans.ServicioWebKmeans();
 serv.Parameters(element, number, out listCen); 
```

我没有输入更多不必要的细节，在我的网络应用程序中，我有以下代码

```
 public double[][] Parameters(int N_element, int N_number, out List<string> list2)
 {

 } 
```

但我收到“无法将 System.Collections.Generic.List 转换为字符串 []”的错误

有人可以解释一下原因吗，顺便说一下，我使用的是 Visual Studio 2010 Ultimate 和 C#，我忘了提到 OUT 语句中的 de web services 的预期结果之一是可能有 3 到 20 的字符串列表所以我真正需要的是字符串列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:19:05.623

因此，如果我理解正确，第一个代码片段是通过自动生成的 Web 引用类访问 Web 应用程序。那是对的吗？

尽管您的方法`List<string>`在其定义中使用了 a，但就 Web 应用程序和调用代码之间的数据传输方式而言，这与数组没有区别。`List<>`Visual Studio 以将s 视为引用类中的数组的方式解释 Web 应用程序的定义。解决方案很简单 - 只需传递一个数组：

```
string[] listCenAry;
serviciowebclienteKmeans.ServicioWebKmeans serv = new serviciowebclienteKmeans.ServicioWebKmeans();
serv.Parameters(element, number, out listCenAry);

// if you need a List<string>:
List<string> listCen = new List<string>(listCenAry); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:49:46.857

添加“服务参考”时，您可以选择指定生成的“集合类型”。默认情况下，这是 System.Array，但您可以根据需要将其更改为 System.Collections.Generic.List。添加参考时，它位于“高级”部分（左下角的按钮）。请参阅下面的屏幕截图以供参考。

![在此处输入图像描述](../Images/528ecaa848cc8215db396093f7334e24.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:19:50.973

我的猜测是，当您添加引用时，它会将`list2`参数转换为字符串数组。您可以更改服务参考设置以使用集合类型，`Generic.List`也可以仅更改客户端以使用数组：

```
string[] listCen;
serviciowebclienteKmeans.ServicioWebKmeans serv = new serviciowebclienteKmeans.ServicioWebKmeans();
serv.Parameters(element, number, out listCen); 
```

# javascript - 重用 Javascript TypedArray（例如 Uint32Array）

> ID：14366981
> 
> 赞同：0
> 
> 时间：2013-01-16T20:13:55.543
> 
> 标签：javascript, node.js, websocket

我在 Javascript 游戏中使用[类型化数组](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays)在客户端（在浏览器中运行）和服务器（运行 node.js）之间发送数据。我可以来回发送消息没有问题，但我有兴趣重用我的类型化数组，而不是每次发送消息时都创建一个新数组。

这是我的 sendMessage 代码：

```
function sendMessage(socket, data) {

    // data is JSON
    var encoded = BISON.encode(data);
    if (socket.isBinary) {
        var len = encoded.length,
            bytes = new Uint32Array(len);

        for (var i = 0; i < len; ++i) {
            bytes[i] = encoded.charCodeAt(i);
        }
    }

    if (server && socket.isBinary) {
        socket.send(bytes, { binary: true, mask: false });
    } else {
        socket.send(encoded);
    }

} 
```

这是我的 readMessage 代码：

```
function readMessage(data) {

    if (data instanceof ArrayBuffer) {
        var bytes = new Uint32Array(data);
        data = String.fromCharCode.apply(null, bytes);
    }
    var message = JSON.stringify(BISON.decode(data));
    return JSON.parse(message);
} 
```

每次发送消息时，我都会创建一个新的 Uint32Array，将其初始化为我打算发送的消息的长度。而不是每次我想为每条消息重用这个数组时都创建一个新数组。

我目前对此的想法是确定我`maxMessageSize`的并用这个长度初始化数组。`maxMessageSize`将是可以通过套接字发送的最大允许消息。

## 问题

大多数消息的大小不太可能*完全一致* `maxMessageSize`。在这些情况下，我需要用一些值（`null`？）填充消息的长度。在读取套接字另一端的值时，我怎么知道这个填充是什么时候开始的？

在写出所有这些内容时，我想到了另一个问题：这值得付出努力吗？

## 使用的库

*   [ws](https://github.com/einaros/ws)用于 node.js 中的 websockets
*   [BISON](https://github.com/BonsaiDen/BiSON.js)用于 json 的二进制编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:45:33.963

据我所知，一旦[*Uint*Array*](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/Uint32Array)构造完成，就无法更改其长度，您只能从中获取子数组。

任何填充都必须使用 32 位整数完成，如果您尝试使用`null`, ，`ToInt(null)`那么`0`您将`0`在该条目中有 a 。如果你想像这样填充，你需要传递一些长度值（数组中的第一个或最后一个条目），你需要在接收端查看它以了解何时修剪数据，这`maxMessageSize`意味着少一个。

但是，使用子数组可能是您想要的，构造您的最大长度数组，将其填充，然后用于`.subarray(0, len)`获取您想要的实际数组。我不确定这是否比每次都构建一个新的有任何优势。

# scala - 对 Slick 查询进行排序会产生一个 for 表达式

> ID：14366984
> 
> 赞同：5
> 
> 时间：2013-01-16T20:14:05.570
> 
> 标签：scala, scalaquery, slick

以下函数工作正常，但我希望它先按 parent_id 对结果进行排序，然后按顺序排序。

```
def getTree = for {
  (a, c) <- Activities leftJoin Clients on (_.id === _.id_a)
} yield (a.id, a.label, a.parent_id, a.order, c.id.?, a=c.name) 
```

我如何使用 Slick 做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T21:24:43.403

和普通收藏一样吗？

```
getTree.sortBy(r => r._3 ~ r._4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T02:02:28.823

使用 Slick 2.1，我发现它可以工作：

```
myQuery.sortBy(r => (r._3, r._4)) 
```

（通过调用`selectStatement`我的查询进行验证）

# backbone.js - 我可以使用 Backbone.ModelBinder 将选择框选项文本绑定到模型吗？

> ID：14366985
> 
> 赞同：0
> 
> 时间：2013-01-16T20:14:07.287
> 
> 标签：backbone.js, modelbinder

我在我的 Backbone 应用程序中设置了一个编辑表单，其中填充了模型数据。我目前让它在没有 ModelBinder 的情况下工作，但想切换到 ModelBinder。

我有一个选择框，其中值映射到模型中的 id，并且选定的选项文本应映射到模型上的字符串字段。用户可以选择从下拉列表中填充模型，该模型将填写 placeId 和 placeName，或者使用文本框仅填写 placeName。

我的问题是我如何得到这个 -`$("#placeName option:selected").text()`进入 placeName 选择器？

这是我的模型和绑定对象：

```
// The Place Model
App.Models.Place = Backbone.Model.extend({
    defaults: {
          placeName: "",
          placeId: ""
  }
});

// Backbone Model Binder bindings
   bindings: {
       placeName:[
           {selector: '$("#placeName option:selected").text()'}, 
           {selector: '#textInputPlaceName'}] ,
    placeId:'[name=placeName]'
} 
```

这是HTML。在 UI 中有一个用于选择下拉菜单或输入字段的复选框

```
<select id="placeName" name="placeName" class="inline">
        <option value="0" selected="selected"></option>
        <option value="444">exit 1</option>
        <option value="555">exit 2</option>
        <option value="666">exit 3</option>
</select>
<input id="textInputPlaceName" name="textInputPlaceName class="inline" disabled> 
```

这是小提琴中的相同代码：http: [//jsfiddle.net/kDBvQ/](http://jsfiddle.net/kDBvQ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:29:28.203

我最终在 modelBinder 绑定之外的函数中设置和检索值。我可能可以使用转换器，但没有它更简单。

# python - 隔离车牌号opencv

> ID：14366986
> 
> 赞同：1
> 
> 时间：2013-01-16T20:14:08.310
> 
> 标签：python, opencv

我想知道如何处理车牌的图像，以便可以将此输出与诸如 Tesseract 之类的 OCR 库一起使用。在这里，您可以看到我正在尝试处理的图像示例 [http://s13.postimage.org/knf9zvxee/vaflo.jpg](http://s13.postimage.org/knf9zvxee/vaflo.jpg)

在这种情况下，我想要得到的只是字符串“KND 486”。所以我需要把它与一切隔离开来。您可能会注意到我要查找的字符串是最大的字符串，并且由于它是来自阿根廷的车牌，它总是会出现 3 个字母，然后是 3 个数字。

如您所见，我尝试对原始图片进行二值化处理，但没有得到预期的结果。有谁知道我还应该做什么？

# struts - Struts 2：用户1登录并从另一台机器获取刚刚登录的用户的数据

> ID：14366987
> 
> 赞同：1
> 
> 时间：2013-01-16T20:14:12.153
> 
> 标签：struts, weblogic11g

我在使用 struts 2 应用程序时遇到问题。用户 1 成功登录并被重定向到某个页面。之后，用户 2 尝试从她的机器登录，她被重定向到用户 1 的登录页面。

我不确定这是 Web 容器（Web 逻辑）的问题还是我的编码中的一些问题。我无法弄清楚我可能会出错的地方以及服务器如何从另一个用户会话中提供数据。

登录操作实现了 sessionaware，我为 session Map 设置了 setter 和 getter。如果登录操作返回成功，用户将被重定向到另一个操作，该操作再次实现会话感知。

问题真的很奇怪。任何人都可以提出任何可能发生的原因。

此外，为了增加复杂性，相同的应用程序耳朵在本地也能正常工作。仅当我尝试将其部署到测试服务器时才会出现此问题。

这是拦截器代码。我不认为这是线程不安全的。

```
public class UserAuthentication extends AbstractInterceptor
{
    public UserAuthentication()
    {
    }

    public void init(){//System.out.println("init'd");
    }

    public void destroy() {System.out.println("destroyed");}

    public String intercept(ActionInvocation invocation) throws Exception
    {      
        String className = invocation.getAction().toString();
        Map OHRMS = ActionContext.getContext().getSession();

         System.out.println("EmpInfoUpd: " + new Date() + " Inside the interceptor: ");  
        System.out.println("EmpInfoUpd: " + new Date() + " Interceptor called for action: " + className); 
        System.out.println("EmpInfoUpd: " + new Date() + " Now printing the entries of session map from interceptor: " + OHRMS);

        Employee temp = (Employee)OHRMS.get("emp");
        if(temp==null)  
        { System.out.println("EmpInfoUpd: " + new Date() + " The session had no \"emp\" object. Interceptor returned \"login\" ");
            return "login";
        }
        System.out.println("EmpInfoUpd: " + new Date() + " The session had \"emp\" object with Employee name: " + temp.getFullName()+ " Interceptor returned \"login\" ");
            return invocation.invoke();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:22:29.267

我很确定这是由于拦截器不是线程安全的。

我前段时间调试了类似的东西，我在回答与您类似的问题时分享了这种经验，特别是关于如何实现线程安全拦截器：

[用户会话在 Tomcat 上搞混了](https://stackoverflow.com/questions/13619818/user-session-getting-mixed-up-on-tomcat)

希望有帮助

**编辑**

尝试改变这个：

```
Map OHRMS = ActionContext.getContext().getSession(); 
```

对此

```
Map OHRMS = invocation.getInvocationContext().getSession(); 
```

看看它在测试环境中的行为是否相同。

我在我的拦截器中以这种方式访问​​了 Session 并且从来没有遇到过问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T21:04:33.850

感谢大家的努力。问题是我对所有的 struts 页面都使用了 .html 扩展名，而测试网络服务器认为它们是静态页面。所以返回了服务的最后一页。将页面扩展名更改为.action后问题终于解决

# python - Python有条件地对数字进行四舍五入

> ID：14366992
> 
> 赞同：3
> 
> 时间：2013-01-16T20:14:17.530
> 
> 标签：python, django, numbers, rounding

今天我有一个关于在 Python 中使用条件对数字进行四舍五入的问题。

我正在做一个销售网站，我的客户希望根据将价格从美元转换为哥伦比亚比索的结果来汇总价格。例如：200 USD to COP 结果为 353990 COP，应四舍五入为 359000。

他已经实现了一个在 Excel 中发挥作用的函数：

> =IF(F4>=10000000,(ROUNDUP(F4,-6)-100000),IF(F4>=1000000,(ROUNDUP(F4,-5)-10000),IF(F4>=100000,(ROUNDUP(F4 ,-4)-1000),IF(F4>=10000,(ROUNDUP(F4,-3)-1000),IF(F4>=0,(ROUNDUP(F4,-3)))))))

我需要做完全相同的事情，但在 Python 中，我不知道该怎么做。

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:20:12.323

```
import math
roundup = lambda x: math.ceil(x/1000.0) * 1000 
```

尽管将 353990 舍入到 359000 是没有意义的。此函数会将 353990 向上舍入为 354000。

如果您想要正常舍入而不是“向上舍入”，则只需使用内置函数`round`：

```
round(x, -3) 
```

因此对于具有`roundup`与 round 相同的函数签名的泛型

```
def roundup(x, n=0):
    return math.ceil(x * (10**n)) * (10**-n) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:49:32.023

```
def round_up(value, multiple):
    return multiple * math.ceil(float(value) / multiple)

def digits(value):
    return int(math.log(value, 10)) + 1

def round_price(value):
    if value < 10000:
        return int(round_up(value, 1000))
    d = digits(value)
    new_value = int(round_up(value, 10 ** (d - 2)))
    new_value -= 10 ** (d - 3)
    return new_value 
```

# css - 垂直对齐，水平宽度相互依赖

> ID：14366993
> 
> 赞同：0
> 
> 时间：2013-01-16T20:14:26.660
> 
> 标签：css, vertical-alignment, tablecell

似乎是一个简单、直接的例子，让我很适合。这是我正在拍摄的图像：

![在此处输入图像描述](../Images/69912ca207e687bb55a5223ca676dad5.png)

这是我的 HTML

```
<div class="container">
    <div class="caption">
        <div class="label">
            Products that matter
        </div>
        <div class="content">
            <p>Mauris leo diam, convallis at rhoncus at, pellentesque ut turpis. Nullam orci velit, dignissim a suscipit et, adipiscing vel magna. Mauris leo diam.</p>
        </div>
    </div>
</div> 
```

和 CSS

```
.container {
    width: 1000px;
    margin-top: 50px;
}
.caption {
    background: rgba(255,255,255,.9);
    display: table;
    width: 100%;
    height: 66px;
}
.caption .label {
    display: table-cell;
    background: #94749c;
    color: #fff;
    font-size: 30px;
    line-height: 30px;
    font-weight: 400;
    width: auto;
    height: 66px;
    vertical-align: middle;
}
.caption .content {
    display: table-cell;
    width: auto;
    height: 66px;
    vertical-align: middle;
} 
```

我认为在纯 CSS 中实现这一点的最佳方法是使用 display: table 和 display table-cell。这样我们就可以得到适当的垂直对齐。问题是宽度。我最终想要的是适合文本长度的紫色单元格，而次要单元格线会中断。

[这是一个 JSFiddle 示例。](http://jsfiddle.net/W4yse/)

问题是，根据次要单元的长度，它会将主要单元推入并导致换行。此外，如果您缩短第二个单元格的长度，主单元格会变得太大。

在没有javascript的情况下，我想做的是让主单元格自动格式化其宽度而不换行，然后让辅助单元格根据需要填充空格和换行符。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:16:26.843

好吧，似乎 white-space: nowrap 是关键。

那很简单。

# excel - 在受保护的工作表中启用宏

> ID：14366994
> 
> 赞同：0
> 
> 时间：2013-01-16T20:14:34.617
> 
> 标签：excel, password-protection, vba

我为工作表编写了代码，每次更改数字时，如果方差大于 10%、20% 或 +20%，它就会改变颜色。所以我在“General”和“Private Sub Selection_Worksheet”上都使用了宏代码，这样每次单元格的数字发生变化时，它都会改变颜色。

我已经锁定并隐藏了一些显示公式的单元格，并编写了代码

```
 Sheets("Financials").Protect Password:="Ottawa", UserInterFaceOnly:=True 
```

在 General 和“Private Sub Selection_Worksheet”上，每次单击任何单元格时都会出现运行时错误。

我该如何解决这个问题？我只希望他们使用某些单元格并在受到保护和隐藏的同时仍然运行宏。

谢谢，

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:20:56.263

不幸的是，保护`UserInterface:=True`有点误导：如果您在保存后重新打开文件，该状态将丢失并且工作表再次受到完全保护。

因此，最好也更改代码以处理保护：

```
Private Const cStrPwd as String = "Ottawa"

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    '你检查代码是否应该运行的条件在这里，例如：
    如果 Application.Intersect(Target, Me.Range("A1:B10")) 是 Nothing 或 _
        Me.Range("B2") < 0.2 然后退出子

    Me.Unprotect 密码:=cStrPwd

    '你的代码在这里
    MsgBox "你成功了！干得好，伙计！"

    Me.Protect 密码:=cStrPwd
结束子

```