# StackOverflow 问答 15475000-15475999

# html - embed any web page

> ID：15475000
> 
> 赞同：1
> 
> 时间：2013-03-18T10:49:18.390
> 
> 标签：html, iframe, embed

i would like to embed the public view of my Google Scholar page into my personal webpage. I used the iframe tags, however the resulting box is just empty. What are the general rule where iframe tag applies?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T14:44:22.790

Short answer: you cannot, because google refuses to allow other sites to embed its pages. Actually, if you are using a debugger, it should warn you that Google is using the same origin policy on its response: Refused to display '[http://scholar.google.fr/](http://scholar.google.fr/)...' in a frame because it set 'X-Frame-Options' to 'SAMEORIGIN'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:54:35.193

想知道一切吗？按照下面的链接。 [http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

由于书签和导航，我的意见是避免使用 iframe。[以下是Iframe](https://stackoverflow.com/questions/574214/alternatives-to-iframe) 的一些替代 方案[http://icant.co.uk/articles/crossdomain-ajax-with-jquery/index.html](http://icant.co.uk/articles/crossdomain-ajax-with-jquery/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T16:35:22.480

我解决此问题的方法是将我的所有出版物从 Google Scholar 导出到 bib 文件，然后使用 bibbase.org 使用生成的 bib 文件创建出版物页面。您可以将生成的页面嵌入到您的网站中。工作正常，看起来不错。

# ruby-on-rails - NoMethodError（未找到 R 函数“get”）

> ID：15475006
> 
> 赞同：3
> 
> 时间：2013-03-18T10:49:30.287
> 
> 标签：ruby-on-rails, ruby, r, nomethoderror

我正在尝试使用 RSRuby 连接 Ruby 和 R。

在我的 application_controller 我有以下内容：

```
def InitR
    @r = RSRuby.instance
    return @r
end 
```

当我做：

```
@r = InitR() 
```

它在浏览器中引发以下内容：**R Function "get" not found**

并在控制台中显示：

```
NoMethodError (R Function "get" not found):
  app/controllers/application_controller.rb:6:in `InitR'
  app/controllers/diagnostic_controller.rb:32:in `generatePdf' 
```

正如我在一些帖子中看到的那样，我试图更改堆栈限制，但它似乎什么也没做。

## 有人知道吗？

这就是我的代码在我的 ApplicationController 中的显示方式。

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  # Make R instance available to all
  def initR
    @r = RSRuby.instance
  end

 end 
```

这是 DiagnosticController，我想在其中使用实例：

```
def generatePdf
    project = Project.find(session[:project_id])

    pdf = Prawn::Document.new

    sentence = RSentence.find_by_name("library").content.gsub("LIBRARY", "lattice")

    pdf.text sentence

    pdf.render_file project.name.to_s + ".pdf"

    @r = initR
    @r.eval_R(sentence)

    redirect_to :controller => "diagnostic", :action => "index" 
  end 
```

调用 RSRuby.instance 时引发异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:12:14.993

这里有几个问题。

1.  您在定义中使用大写字母 InitR - 应该是 initR
2.  您正在尝试将实例变量设置为自身，即 InitR 方法的内部和外部。

尝试

```
def initR
  @r = RSRuby.instance
end 
```

然后只需调用 initR，它将实例化 @r

您可以使用@r 例如访问功能`@r.wilcox_text([1,2,3],[4,5,6])`

好的，在您更新之后，initR 函数似乎已失效。设置`@r = initR`，就像说`@r = @r = RSRuby.instance`，例如你已经调用了两次。如果您想使用该功能，请将其更改为

```
def initR
  RSRuby.instance
end 
```

然后你可以打电话`@r = initR`

此外，它查看错误是否与 R 本身有关，即错误不是 Ruby 错误，而是 R 错误。您能否尝试在 rails 控制台中运行生成函数中的步骤，这可能会突出显示哪个特定步骤失败。

# php - Youtube API get video query

> ID：15475008
> 
> 赞同：0
> 
> 时间：2013-03-18T10:49:39.740
> 
> 标签：php, youtube, youtube-api

I've been reading youtube API in orde to find how could I retrieve videos and relavant data about them using a certain query. I've found this page - [https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters) where there is an example of: [https://gdata.youtube.com/feeds/api/videos?q=surfing&caption&v=2](https://gdata.youtube.com/feeds/api/videos?q=surfing&caption&v=2)

My question is where should I use my API key ? I don't see any section for this in the query above.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:07:51.277

对于 v2 API，您仅在上传视频时才需要 API 密钥。

# jquery - text area in html jumps on focus

> ID：15475010
> 
> 赞同：2
> 
> 时间：2013-03-18T10:49:47.937
> 
> 标签：jquery, css, html

i have a html tag for text area as below...

```
<div>
    <span class="l" style="padding-top: 77px">
        <textarea id="txt7" rows="3" cols="50">Lorem ipsum</textarea>
    </span>
</div> 
```

on focus i am changing border color and border width it worked fine. the problem when i do focus on that element text area box jumps on the page (means moves a little bit....)

css:

```
textarea:focus { .br; border-style: solid; .shdw; } 
```

so any work around to this plz.............

how abt using box-shawdow property .....i am not aware of using it ........so do any help there on this............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:52:18.000

这是因为当没有边界并且不预期边界会发生变化（自然）时，不考虑边界厚度。

*尝试在 CSS 中为元素未聚焦*时设置固定边框大小，并使其透明（或有效透明（即匹配背景颜色）），然后在焦点上为边框更改的所有内容就是颜色.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-20T14:22:47.927

把它扔到你的CSS中，它会留在它应该在的地方。- 希望这可以帮助。

```
#txt7{
    position:absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:02:17.897

检查[这个](http://fiddle.jshell.net/cxquE/)。

我不觉得有什么问题。一个原因可能是 css 与定义的另一个 css 冲突

```
<div> or <span> or <textarea> 
```

尝试找出是否有任何冲突的 css。

# iphone - Start application on shaking iphone

> ID：15475013
> 
> 赞同：0
> 
> 时间：2013-03-18T10:49:53.910
> 
> 标签：iphone, ios5, shake

I'm making an application were I want to start the application when user shakes his iPhone. Is this possible? Does any one knows how to detect this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:51:05.850

It’s not, at least if we’re talking about a regular app distributed through the App Store.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:55:18.053

不，它不可能使用摇动启动应用程序。

您在应用程序中使用摇动功能

# java - making changes in the lift app in eclipse

> ID：15475016
> 
> 赞同：1
> 
> 时间：2013-03-18T10:49:57.853
> 
> 标签：java, eclipse, scala, lift, scala-ide

I am working with lift webframe work integrated with eclipse. I have downloaded one sample app from github and now I'm trying to add more lines to it. If any error occured in the project, the localhost:8080 showing some errors even after I have fixed them. After making each changes I used to stop and start my server. But the error is still showing:

```
 Exception occured while processing /
  Message: java.lang.NoClassDefFoundError: Could not initialize class code.lib.DependencyFactory$
code.snippet.HelloWorld.date(HelloWorld.scala:12)
code.snippet.HelloWorld$$anonfun$howdy$1.apply(HelloWorld.scala:15)
   .......
   .......
   ....... 
```

I've tried to revert any changes made by me to initial state of example project, but without any luck.

What I can do with this?

# php - Cron Jobs Managment for large amount of users

> ID：15475019
> 
> 赞同：1
> 
> 时间：2013-03-18T10:50:10.087
> 
> 标签：php, linux, cron, cron-task

I have a service like [backupify](https://www.backupify.com/). Which Downloads data from different social media platforms, Currently i have about 2500 active users, for each user a script runs which gets data from facebook and stores them on Amazon S3, My server is Ec2 Instance on AWS.

I have entries in table like 900 entries for facebook users, There is a PHP script which runs and gets user from database table and then backups data from the facebook and then picks the next user from facebook.

Everything was fine when i was having less than 1000 users, but now i have more than 2500 users problem is that the PHP script halts, or runs for first 100 users and then halts, time out etc. I am running PHP Script fro php -q myscript.php command.

The other problem is that single user scripts takes about 65 seconds to reach the last user from the database table is may take days, so whats the best way to run parrallel on the databse table etc.

Please suggest me what is the best way to backup large amount of data for large amount of users, and i should be able to monitor the cron, somehting like a mangaer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:22:38.580

如果我没看错的话，你就有一个针对所有用户的 cron 任务，以某种频率运行，试图一次性处理每个用户的数据。

1.  您是否尝试发出[set_time_limit(0);](http://php.net/manual/en/function.set-time-limit.php) 在代码的开头？
2.  此外，如果任务需要资源，您是否考虑为每个 N 用户创建一个单独的 cron 任务（基本上模仿多线程行为；从而利用服务器的多个 CPU 内核）？
3.  将您的数据写入某种[缓存](https://stackoverflow.com/questions/126917/php-object-caching)而不是数据库，并让一个单独的任务将缓存内容提交到数据库对您来说可行吗？
4.  您是否有机会使用内存数据表（非常快）？您需要时不时地将数据库内容保存到磁盘，但是以这个价格，您可以获得快速的数据库访问。
5.  您是否可以将任务外包以将服务器作为分布式服务进行分离，并将 cron 脚本编写为它们的负载均衡器？
6.  优化您的代码也可能会有所帮助。例如（如果您还没有这样做），您可以缓冲收集的数据并在脚本末尾的单个事务中提交，这样执行流程就不会因 DB 重复 I/O 阻塞而分散。

# jbossfuse - Fuse ESB - ODE 安装

> ID：15475024
> 
> 赞同：1
> 
> 时间：2013-03-18T10:50:36.880
> 
> 标签：jbossfuse, apache-servicemix, fuseesb

在 FUSE ESB 中，我尝试使用命令 (install ode) 安装 ODE 功能，但出现如下错误。任何帮助表示赞赏

```
FuseESB:karaf@root> features:install ode
Error executing command: No feature named 'ode' with version '0.0.0' available 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:36:16.127

Fuse ESB 不再支持 Apache ODE。Apache ODE 不适用于 OSGi，它是一个没有积极维护的项目，我们不建议使用它，JBI 也已死。

该命令是正确的，它说没有名为 ode 的功能。

你可以做一个 features:list 来查看哪些功能是开箱即用的。

# matlab - 检索特定循环值的数据

> ID：15475026
> 
> 赞同：0
> 
> 时间：2013-03-18T10:50:53.213
> 
> 标签：matlab, simulation

我想知道如何实现以下目标：我有一个名为 TimeSteps 的向量（标量）。TimeSteps 根据通常设置为固定长度的向量 (nBins_max) 的长度递增（但我可能偶尔会更改它）。要声明 5 个完整的系统轮换，我将使用：

```
TimeSteps = 5*nBins_max; 
```

我想检索系统每次旋转的数据。在伪代码中，我希望实现以下目标：

```
where TimeSteps = each multiple of nBins_max
retrieve data
end 
```

我可以在我感兴趣的每个时间步数处手动设置它，但是，由于我的某些系统中的滚轮数量，这可能会很乏味并且可能容易出错！此外，时间步长在其范围内变化很大，有时为 1*nBins_max，有时为 1000*nBins_max，也许不止于此！

任何指针或一般帮助表示赞赏！谢谢阅读

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:24:45.030

在 nBins_max 的每个倍数处，模数为零：

```
where mod(TimeSteps, nBins_max)==0
    retrieve data
end 
```

希望有帮助吗？

# jboss - Remote deploy artifact to Jboss AS using JRebel

> ID：15475027
> 
> 赞同：1
> 
> 时间：2013-03-18T10:50:53.733
> 
> 标签：jboss, remote-server, jrebel

Just trying to setup remote deployment of projects to Jboss AS 4.2.1 using Jrebel.

After enabling the JRebel for my project in eclipse along with the remoting feature, it asks for the deployed app's URL in the server. How do I get to know the URL of my project so that I can mention that in the JRebel remoting section?

I thought of looking it up in the JMX console but my project jar will reside in the lib folder of the EAR that's deployed to the server, so I wasn't able to locate it there. Can anyone help me out?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:46:25.543

JRebel Remoting 需要一个面向 HTTP 的组件才能运行。它使用与 Web 容器相同的端口使用 HTTP 协议。这意味着零配置（有点）并且没有漏洞可以戳入防火墙，但缺点是它不适用于其中没有 WAR 模块的应用程序（但:)）。

我假设您的应用程序是耳朵内的 jar 文件。它所需要的只是那个耳朵里的战争模块。这场战争不需要 rebel.xml 或 rebel-remote.xml 。如果不存在，请创建 WAR。

URL 将是您必须在 Web 浏览器中输入才能访问该 Web 应用程序的地址。例如[http://example.org:8080/MyWar/](http://example.org:8080/MyWar/)

还要确保在部署的库项目中有 rebel.xml 和 rebel-remote.xml（仅仅在 Eclipse 中创建它们是不够的，这两个 xml 文件必须在服务器中结束）。

此外，您需要在远程服务器机器上安装并激活 JRebel，然后使用以下 JVM 参数启动 JBoss： -javaagent:path/to/jrebel.jar -Drebel.remoting_plugin=true 其中 path/to/jrebel.jar 指向安装的 jrebel.jar 文件

更多信息：http: [//zeroturnaround.com/software/jrebel/remoting/](http://zeroturnaround.com/software/jrebel/remoting/)

在您的情况下，EAR 的布局可能如下所示：

```
- myapp.ear
    - webapp.war
    - someEJB.jar
    - lib/
       - yourApp.jar
          - WEB-INF/classes/
             - rebel.xml
             - rebel-remote.xml

       - someOtherLib.jar 
```

--

阿内尔

JRebel 远程技术主管

# php - Sort symfony users by roles

> ID：15475028
> 
> 赞同：1
> 
> 时间：2013-03-18T10:50:55.127
> 
> 标签：php, sorting, symfony, user-interface

I have a user entity. It implements the basic user-interface.
I want to sort my users by roles and I don't know how to do it.

(it is for send a message for my admins only with a message entity who is targeting the user entity on a ManyToOne relation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:30:16.807

```
$query = $this->getDoctrine()->getEntityManager()
            ->createQuery(
                'SELECT u FROM MyBundle:User u WHERE u.roles LIKE :role'
            )->setParameter('role', '%"ROLE_MY_ADMIN"%');

$users = $query->getResult(); 
```

将工作卸载到您的数据库服务器。即使有 100,000 多条记录，此查询也不应该花很长时间才能返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:26:47.117

好吧，也许是这样：

```
// $users - users from db, collection of user entity class
$myAdmins = array();
foreach($users as $user){
    if (in_array('ROLE_ADMIN', $user->getRoles())) {
      $myAdmins[] = $user;
    }
} 
```

in`$myAdmins`拥有具有`ROLE_ADMIN`角色的用户。

# ruby - 在 Ruby DBI 中连接到远程数据库

> ID：15475033
> 
> 赞同：2
> 
> 时间：2013-03-18T10:51:02.073
> 
> 标签：ruby

如何在 ruby​​ 中连接到远程数据库？

我有一个应用程序，我需要连接到我的远程主机数据库并读取这些数据库表并映射到我的应用程序中。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:58:10.290

你的问题不完整。你没有提到哪个数据库。我假设mysql。你也应该展示你的努力。

[从http://tmtm.org/en/mysql/ruby/](http://tmtm.org/en/mysql/ruby/)安装 mysql gem

```
gem install mysql 
```

现在，在你的 ruby​​ 文件中使用它。

```
db = Mysql.new(hostname, username, password, database) 
```

例子：

```
require 'mysql'
db = Mysql.new('209.88.228.142', 'someuser', 'exceptionalpassword', 'greatdb') 
```

将服务器的 IP 或主机放在**主机名**中。其余参数不言自明。您必须在远程服务器 mysql 主机中允许您的公共 IP 地址。例如，如果你的 IP 是 209.88.228.142，你必须在你的 mysql 服务器中允许这个 IP。

有关更多详细信息，请参阅[文档](http://tmtm.org/en/mysql/ruby/)。

**允许您的 IP 在数据库服务器中。** 假设上述 IP 是您的公共 IP，您可以使用以下命令允许访问您的*greatdb数据库。*在您的数据库服务器的控制台中运行它。

```
GRANT ALL ON greatdb.* TO someuser@'209.88.228.142' IDENTIFIED BY 'exceptionalpassword'; 
```

注意：将用户名、数据库名、密码、主机/IP 替换为适合您的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:53:12.530

如果您使用的是 Rails：是的，这是可能的。对于大多数其他可能的驱动程序，请让我们知道您尝试了什么。

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: name_of_databse
  pool: 20
  username: user
  password: password
  wait_timeout: 3600
  host: name.of.server
  port: 3306 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T11:33:24.293

您还应该注意到您可能想要连接的 mysql 允许远程访问。请检查您是否可以使用 db-tool（如 squirrel）或 mysql 客户端远程连接。

通常，mysql 数据库中的用户在 CREATE USER 语句中被限制为 localhost 或特定的远程主机，如下所示：

```
CREATE USER 'monty'@'localhost' IDENTIFIED BY 'some_pass'; 
```

所以请确保远程数据库中的用户是`'monty'@'%'`或`'monty'@'yourhosthere'`

详见[mysql参考《访问控制》](http://dev.mysql.com/doc/refman/5.1/en/connection-access.html)

# c# - Executing services on multiple machines at same time

> ID：15475036
> 
> 赞同：0
> 
> 时间：2013-03-18T10:51:11.723
> 
> 标签：c#, multithreading, service

I am creating a project for Remote Monitoring Application, that consist of the service to be hosted on the individual machines. The job of the service is to collecct the information regarding CPU usage, memory usage, etc. using WMI. The service executes the scan every 15 seconds using threading. Now I want the services on each machine to be executed at exactly same time. For eg. 8.15, 8.30, 8.45\. I have written a simple logix that checks the current second count and makes the thread sleep for the time system reaches the time that falls exactly either at x.15, x.30, x.45 , etc. But implementing this itself does not assure that the value collected by the service via WMI for the same process would be at same time. For eg. CPU Usage for machine 1 and CPU Usage for machine 2 should be collected at same time so that it can be compared at run time. Same goes for other processes and metric values as well.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:45:11.257

你对“完全相同的时间”的容忍度是多少？一秒钟之内？10毫秒？

如果您的系统在同一个 LAN 上并且您的网络延迟很小，那么您可以使用[ZeroMQ](http://www.zeromq.org/bindings:clr)设置 TCP/IP 发布-订阅系统，以每 15 秒触发一次脉冲，使所有系统拍摄快照。

如果系统分布广泛，那么您可以使用以下方式查询 NTP 服务器： [How to Query an NTP Server using C#?](https://stackoverflow.com/questions/1193955/how-to-query-an-ntp-server-using-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:00:06.617

感谢您的帮助，实际上我得到了这个工作。这里应用的逻辑（由我妻子建议）。我有一个静态集合，并且有 2-3 个不同的线程运行每个线程，使用 WMI 查询从机器中检索不同的值集。现在，此数据收集每 1 秒（此时）发生一次，并插入到静态集合中。现在有另一个线程从集合中获取记录，这些记录是在时间为 15 的倍数的时间插入的。例如。第二个 % 15 = 0。现在这解决了问题。从集合中收集记录后，我从集合中删除当前时间之前收集的所有记录。我不确定这是否是最好的解决方案，但为我工作。

# c++ - 模板类和可能的性能问题

> ID：15475039
> 
> 赞同：3
> 
> 时间：2013-03-18T10:51:14.913
> 
> 标签：c++, metaprogramming, template-classes

如果我使用模板类创建 30 个不同的定义。我的问题是它会编译成 30 个二进制的实际类（二进制大小 = sizeof(template_class) x 30），尽管它们的实际代码非常相似甚至完全相同？

如果可以，并且在运行时，我的程序将加载到内存中。我遍历这 30 个实例（假设我为每个定义初始化了 1 个实例），是否会导致 cpu 指令缓存重新加载，因为它们实际上是内存中的 30 个副本，即使它们的大部分代码都是相同的？

```
 template<typename msg_policy, int id>
    class temp_class_test : public msg_policy
            //codes, methods, and members
    };

    template class temp_class_test<A_policy,1>;
    template class temp_class_test<B_policy, 2>; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:05:42.237

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:08:36.510

如果你的 30 多个类非常相似，你应该避免代码重复。例如，模板参数`id`可能只是一个存根，以区分其他相同的类。在这种情况下，您不需要为 every 重新定义类`id`，而可以简单地从实现中继承：

```
namespace implementation {
  template<typename p> class test {
    // implementation
  };
}
template<typename p, int id>
class temp_class_test : public implementation::test<p>
{
   // any additional code dependent on id
   // any non-inheritable code (constructors)
}; 
```

然后编译器将只为基类的每个方法生成一个二进制文件，并且`id`仅用于区分不同的`temp_class_test`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:17:11.470

验尸完毕。这就是为什么当我的应用程序处于压力之下时我的应用程序表现如此糟糕的原因。这是因为我的 cpu 经历了永远的缓存未命中。

# wpf - 按下按钮 - 按条件更改颜色（WPF）

> ID：15475047
> 
> 赞同：0
> 
> 时间：2013-03-18T10:51:27.197
> 
> 标签：wpf, button, pressed

我有一个按钮。当它被按下时，按钮颜色应该改变。颜色是根据特定条件选择的（例如：Ok-Grey，error-Red）。这是一个简单的任务，但我无法解决它:(。我已经尝试过。我在单击按钮之前定义了术语并将其存储在属性标签（此按钮）中。我没有为普通按钮工作。我覆盖模板按钮：

```
 <Style x:Key="SimpleButton" TargetType="{x:Type Button}">
        <Setter Property="SnapsToDevicePixels" Value="true" />
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="MinHeight" Value="23" />
        <Setter Property="MinWidth" Value="75" />
        <Setter Property="Tag" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Border x:Name="Border"
                            Background="#C0C0C0"
                            BorderBrush="#404040"
                            BorderThickness="1"
                            CornerRadius="2">
                        <ContentPresenter Margin="0,6,27,6"
                                          HorizontalAlignment="Right"
                                          VerticalAlignment="Center"
                                          RecognizesAccessKey="True" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <!-- !!!!! -->
                        <Trigger Property="IsPressed" Value="true">
                           <Setter TargetName="Border" Property="Background" Value="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource StatusToBrushConverter}}" />
                        </Trigger>                            
                        <Trigger Property="IsKeyboardFocused" Value="true">
                            <Setter TargetName="Border" Property="BorderBrush" Value="#202020" />
                        </Trigger>
                        <Trigger Property="IsDefaulted" Value="true">
                            <Setter TargetName="Border" Property="BorderBrush" Value="#202020" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter TargetName="Border" Property="Background" Value="#EEEEEE" />
                            <Setter TargetName="Border" Property="BorderBrush" Value="#AAAAAA" />
                            <Setter Property="Foreground" Value="#888888" />
                        </Trigger>                  
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

转换器只工作一次。此外，任何属性更改标记都不会启动转换器。你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:03:57.870

我可能会使用附加的依赖属性而不是标签，像这样

```
<Window x:Class="test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:test"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="local:ButtonThing.Tag2" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <ControlTemplate.Triggers>
                            <Trigger Property="local:ButtonThing.Tag2" Value="1">
                                <Setter Property="Background" Value="Red"/>
                            </Trigger>
                            <Trigger Property="local:ButtonThing.Tag2" Value="2">
                                <Setter Property="Background" Value="Blue"/>
                            </Trigger>
                        </ControlTemplate.Triggers>

                        <Grid Background="{TemplateBinding Background}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <Button local:ButtonThing.Tag2="1"/>
    </Grid>
</Window> 
```

以及背后的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace test
{
    public class ButtonThing : DependencyObject
    {
        public static object GetTag2(DependencyObject obj)
        {
            return (object)obj.GetValue(Tag2Property);
        }
        public static void SetTag2(DependencyObject obj, object value)
        {
            obj.SetValue(Tag2Property, value);
        }
        public static readonly DependencyProperty Tag2Property = DependencyProperty.RegisterAttached("Tag2", typeof(object), typeof(ButtonThing), new PropertyMetadata(null));
    }

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

# jsf-2 - JSF 设置欢迎页面

> ID：15475050
> 
> 赞同：0
> 
> 时间：2013-03-18T10:51:34.383
> 
> 标签：jsf-2

我在 web.xml 中有如下定义的欢迎页面

```
<welcome-file-list>
    <welcome-file>templates/Template.jsf</welcome-file>
  </welcome-file-list> 
```

项目的上下文根是 TestProject。当我第一次加载项目时，url 是 localhost:8080/TestProject。我在主页上有一个名为“HOME”的按钮，单击该按钮应从任何其他页面重定向到主页。现在问题出在单击此按钮时，它会重定向，但 url 变为 localhost:8080/TestProject/templates/Template.jsf。如何锁定这个？

按钮的 html 代码如下

家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:48:10.877

看来您误解了 的含义`<welcome-file>`。它无意代表主页的 URL。它旨在表示文件的唯一文件名（不包括任何物理文件夹！但允许虚拟后缀映射模式以防您使用它`/faces/*`），当请求文件夹时应由容器提供`/`，或`/foo/`, 或`/bar/baz/`, 等等。然后容器将检查文件夹是否包含指定的欢迎文件，然后将请求转发给它，否则显示 404。

我强烈建议保持简单：

```
<welcome-file>index.jsf</welcome-file> 
```

并`index.xhtml`在根文件夹中有一个，必要时还有其他文件夹。然后，要打开没有指定文件名的上下文根，只需使用

```
<a href="#{request.contextPath}/">Home</a> 
```

# makefile - 使模式规则无法识别

> ID：15475053
> 
> 赞同：0
> 
> 时间：2013-03-18T10:51:48.937
> 
> 标签：makefile, mingw

我目前正在编写一个能够编译不同目标（如调试、开发、发布）的生成文件。链接和编译规则如下所示：

```
$(DEVELOPMENT_OUT): $(subst rep,development,$(OBJS))
    g++ -o $(DEVELOPMENT_OUT) $(subst rep,development,$(OBJS))

obj/development/%.o: src/%.cpp
    g++ -c -MMD -MP -MF"$(@:%.o=%.d)" -MT"$(@:%.o=%.d)" -o "$@" "$<" 
```

现在，我得到这个输出：

```
make: *** No rule to make target 'obj/development/Main.o', needed by 'bin/Development.exe'.  Stop. 
```

但是模式规则不应该适用于 Main.o 吗？

我使用`GNU Make 3.82.90`MinGW。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:13:27.477

这里没有足够的信息来说明它为什么不起作用。如果你确定你有一个文件`src/Main.cpp`，那么 make 应该选择那个规则。cpp 文件是源文件还是生成文件？如果它是生成的，那么真正的问题可能在更低的位置，即生成发生的地方。您可以尝试使用`make -d`来查看 make 正在做什么以及它为什么不喜欢这个规则。

# sql - 如何将空表的 MAX() 视为 0 而不是 NULL

> ID：15475059
> 
> 赞同：24
> 
> 时间：2013-03-18T10:52:02.333
> 
> 标签：sql, oracle

我尝试从表中选择最大值

```
SELECT MAX(cid) FROM itemconfiguration; 
```

但是，当表`itemconfiguration`为空时，当我需要一个数字时，将对`MAX(cid)`语句进行评估。`NULL`如何处理这个并`NULL`视为 0 ？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-18T10:54:00.780

只需使用[Coalesce](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions023.htm)或[NVL](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions110.htm#i91798)来处理 NULL。

`MAX(cid)`如果为 NULL ，以下代码将返回 0

```
SELECT COALESCE(MAX(cid), 0)
FROM   itemconfiguration 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T10:58:40.440

`SELECT NVL(MAX(cid), 0) FROM itemconfiguration;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T06:50:40.040

**可以使用ISNULL**在 max 返回 null 时替换数字，

```
ISNULL(MAX(cid),0) FROM itemconfiguration; 
```

# android - Android - Worklight Hybrid 应用程序无法连接到模拟器中的服务器

> ID：15475060
> 
> 赞同：1
> 
> 时间：2013-03-18T10:52:03.957
> 
> 标签：android, ibm-mobilefirst

我创建了一个工作灯应用程序。我尝试在 android 模拟器上运行该应用程序，但出现以下错误。

```
 [http://localhost:8080/apps/services/api/MyFirstApp/android/query] Host is not responsive.
    Try to manually access the URL through the android emulator browser to verify connectivity 
```

所以我尝试在模拟器浏览器中输入相同的 url，我得到以下文本：

```
 /*-secure-
  {"WL-Authentication-Failure": {"wl_remoteDisableRealm":{"reason":"Login Failed}}} */ 
```

有人可以帮我弄这个吗？

我正在使用 Android 操作系统版本：4.2.2，API 级别：17

我自己没有更改任何应用程序设置。我正在尝试使用 URL“ [https://jazz.net/jazz/auth/j_security_check](https://jazz.net/jazz/auth/j_security_check) ”进入基本登录页面

这是我的适配器 XML：

```
<wl:adapter xmlns:wl="worklight.com/integration"; xmlns:http="worklight.com/integration/http"; xmlns:xsi="w3.org/2001/XMLSchema-instance"; name="RQMAdapter">
    <displayName>RQMAdapter</displayName> 
    <description>HTTP type Worklight Adapter for jazz server</description>
    <connectivity> 
        <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
            <protocol>https</protocol> 
            <domain>jazz.net</domain>
            </connectionPolicy>
        <loadConstraints maxConcurrentConnectionsPerNode="2" /> 
    </connectivity>

    <procedure name="loginToRQM" />
</wl:adapter> 
```

这是我的场景：我有一个需求，我需要从 jazz.net 为用户读取有关项目的信息。它们都在 Jazz 服务器上的 XML 文件中可用。我需要将它处理到移动设备上以使其在手持设备上可用......所以，现在我被告知我必须从服务器下载一些文件，所以我需要在我的应用程序上有文件 IO . 我了解到我们需要使用 Worklight 中的 Cordova 插件来编写这一部分。

请让我知道解决方案还需要什么...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:11:44.153

确保放置服务器机器的实际 IP 地址：

1.  更改`worklightServerRootURL`文件 application-descriptor.xml 中的值（位于：yourProject\apps\yourApp）
2.  构建和部署
3.  右键单击生成的Android项目>>运行方式>>运行应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:29:07.397

如果您使用的是 Worklight 5.0.5，请确保升级到 5.0.6，其中仅安装 API 级别 17 时提供修复。

至于去那个 URL，你需要解释你到底想从哪里去，以及如何......你需要更具描述性。在我看来，您似乎还没有阅读入门材料。[请做](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T18:12:04.407

我有同样的问题。

我已经通过在 WL 应用程序中使用服务器的真实 IP 地址而不是使用 localhost 来解决它：

1.  当模拟器运行您的应用程序时，按菜单按钮。
2.  选择更改您的服务器 URL
3.  删除“localhost”并使用 IP 地址。
4.  接受并重试。

这解决了我的问题。

# sql - 在具有多个主键的 SQL 上删除 double

> ID：15475064
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:52:23.260
> 
> 标签：sql, sql-server-2008-r2

我正在使用 SQL 2008 R2。我有 5 个复合主键

```
(NOID ,CODE_CLIENT,CODE_DEST,DATE_CLOTURE,DATE_CLOTUR_REEL) 
```

在我的桌子上。

我尝试使用以下语法删除双精度：

```
DELETE
FROM [LETTRE_VOIT_FINAL]
WHERE EXISTS
    (SELECT NOID ,
            CODE_CLIENT,
            CODE_DEST,
            DATE_CLOTURE,
            DATE_CLOTUR_REEL
     FROM LETTRE_VOIT_FINAL
     GROUP BY NOID ,
              CODE_CLIENT,
              CODE_DEST,
              DATE_CLOTURE,
              DATE_CLOTUR_REEL HAVING count(*) > 1) 
```

它删除了所有条目，幸运的是我已经做了备份。

在我只有 4 个复合主键之前，我添加了最后一个 DATE_CLOTUR_REEL。因为主键的值不能为空，所以我把值`getdate()`放到这个键中。因此，我不能将所有 5 个设置为复合主键，因为我有双键。所以现在，我的桌子上没有主键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:20:11.337

要从表中删除重复项：

```
;WITH cte
     AS (SELECT ROW_NUMBER() OVER (PARTITION BY NOID ,CODE_CLIENT,CODE_DEST,DATE_CLOTURE,DATE_CLOTUR_REEL
                                       ORDER BY ( SELECT 0)) RN
         FROM   LETTRE_VOIT_FINAL)
DELETE FROM cte
WHERE  RN > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:05:18.263

问题是存在语句中的子查询不以任何方式与“删除”绑定。结果是 ANY 双打的存在删除了表中的所有记录。此外，我认为您将主键弄乱了（正如其他用户所评论的那样）。无论如何，您可以使用 CTE 删除重复项：

```
WITH CTE (COl1,Col2, DuplicateCount)
AS
(
    SELECT COl1,Col2,
        ROW_NUMBER() OVER(PARTITION BY COl1,Col2 ORDER BY Col1) AS DuplicateCount
    FROM DuplicateRcordTable
)

DELETE
FROM CTE
WHERE DuplicateCount > 1 
```

# iphone - 如何在 iphone 中使用 drawrect 方法创建的圆周围创建边框

> ID：15475066
> 
> 赞同：0
> 
> 时间：2013-03-18T10:52:35.227
> 
> 标签：iphone, uiview, drawrect

嗨，在我的一个应用程序中，我在 UIView 对象上使用 drawrect 方法创建了一个圆圈。现在我担心我想为我实际使用的圆圈绘制一个高亮边框

```
 myView.layer.borderWidth =3.0;

 myView.layer.borderColor=[UIColor colorWithRed:myView.patternRed green:myView.patternGreen   blue:myView.patternBlue alpha:1.0].CGColor; 
```

但是由于这段代码，正在发生的事情是在视图周围创建了一个边框，它看起来是一个矩形，但我想在圆本身周围创建一个边框。因此，如果有人知道如何实现此功能，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:58:45.383

you have to set some radius for the corners of that view so add this line

```
myView.layer.cornerRadius=20; 
```

play with the numeric value to match your requirements

I hope it helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T17:43:52.753

```
This Works for me:

UIView *myView =[[UIView alloc]initWithFrame:CGRectMake(0,0,100,100)];
[self createRoundUIView:myView:80];

-(void)createRoundUIView:(UIView *)inputView sizeDiameter:(float)diameterSize;
{
    CGPoint saveCenter = inputView.center;
    CGRect frame = CGRectMake(inputView.frame.origin.x, inputView.frame.origin.y, diameterSize, diameterSize);
    roundedView.frame = frame;
    roundedView.layer.cornerRadius = diameterSize / 2.0;
    roundedView.center = saveCenter;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:00:00.663

尝试这个

```
myView.layer.cornerRadius = 80.0f; 
```

它会将您的视图弯曲成一个圆圈。

谢谢。

# javascript - jquery 可以操作使用 DOM 创建的临时文档吗？

> ID：15475068
> 
> 赞同：6
> 
> 时间：2013-03-18T10:52:49.917
> 
> 标签：javascript, jquery, html, dom, browser

我想要实现的是通过传递一个大的 html 字符串来操作使用 jquery 使用 DOM 创建的文档。考虑以下示例：

```
var doctype = document.implementation.createDocumentType( 'html', '', '');
var dom = document.implementation.createDocument('', 'html', doctype);
dom.documentElement.innerHTML = '<head><head><title>A title</title></head><body><div id="test">This is another div</div></body>'; 
```

这将在 dom 中创建一个新文档，其中包含提供的内容。现在我想使用 jquery 在现有的 div 中追加一个 div。

```
$('#test',dom).append('<div> A second div</div>');
console.log(dom); 
```

当我在控制台中打印结果时，'dom' 的 innerHTML 似乎没有改变。从 jquery 的 API 文档中，[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)更具体的“jQuery( selector [, context ] )” 函数应该允许这样做。

由于有人可能会争论使用控制台进行调试，因此我在下面提供了另一部分不起作用的代码：

```
$('body').append($('#test',dom)); 
```

在 chrome 和 firefox 中测试，它不适用于最新的 jquery 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:09:23.167

通过更改构造函数并使用下面的行

```
var dom = document.implementation.createHTMLDocument("Test"); 
```

而不是最初介绍的两条线

```
var doctype = document.implementation.createDocumentType( 'html', '', '');
var dom = document.implementation.createDocument('', 'html', doctype); 
```

一切正常，即使直接设置innerHTML！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:00:41.710

似乎它正在设置整个 HTML 内容`innerHTML`，这不起作用。

通过试验您的代码，您会注意到以下内容也不会产生任何结果：

```
dom.documentElement.getElementsByTagName('body') 
```

那`dom.body`就是`null`。但是，如果您要构造对象而不是仅设置`innerHTML`，则上述选择器*和*jQuery 选择器都将起作用：

```
dom.body = document.createElement('body');
dom.body.appendChild(document.createElement('div'));

console.log($('div', dom)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:35:25.973

是的，有可能。您必须创建 jQuery 的第二个实例。检查这个小提琴：http: [//jsfiddle.net/hDcUp/](http://jsfiddle.net/hDcUp/)

```
var jq2 = jQuery(dom); 
```

# angularjs - SCRIPT5022：参数“模块”不是函数，得到未定义的 angular.js，第 975 行字符 5

> ID：15475072
> 
> 赞同：9
> 
> 时间：2013-03-18T10:53:04.497
> 
> 标签：angularjs

当我加载角度相关页面时，我在 IE-8 中面临以下异常。它在其他浏览器中运行良好。有什么具体原因吗？

```
SCRIPT5022: Argument 'module' is not a function, got undefined 
angular.js, line 975 character 5 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-18T01:33:54.640

我遇到了同样的问题（在 IE < 9 上时），我花了很长时间才找到它......

```
angular.module('app', ['app.directives', 'app.filters', 'app.services', ]); 
```

请注意“app.services”后面的逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:49:11.200

当我尝试内联结束脚本标记导致 IE 无法加载我的所有脚本时，我会收到类似的错误。检查您是否有所有脚本包含的结束标签。

为了显示：

```
<script src="js/services.js"></script>
<script src="js/controllers.js"/> <!-- THIS IS A PROBLEM FOR IE -->
<script src="js/filters.js"></script>
<script src="js/directives.js"></script>
<script src="js/myApp.js"></script> 
```

在 IE9 上，这将导致：

```
SCRIPT5022: No module: myApp.filters 
angular.min.js, line 17 character 195 
```

不完全一样，但我无法在 IE8 上测试它。然而，在 Chrome 上，这非常有效。关于这一点的奇怪之处，实际上是它似乎找不到的东西，是在带有内联结尾的脚本之后的脚本中。我真的无法解释。

现在，当我像这样关闭脚本标签时：

```
<script src="js/services.js"></script>
<script src="js/controllers.js"></script> <!-- THIS WORKS -->
<script src="js/filters.js"></script>
<script src="js/directives.js"></script>
<script src="js/myApp.js"></script> 
```

它就像一个魅力。

总而言之，AngularJS 试图找到名为“module”的模块，但找不到它。可能是由于未加载的脚本。尝试找到一个关闭内联的脚本标签，并按照上面的描述结束它。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-07T09:55:28.540

可能导致这种情况的另一件事是对对象属性使用关键字。我有三个模块出现上述错误：

```
statistic.import = !statistic.import;

default: $scope.newGrid.default

$scope.data = JSON.stringify({export: exportParams}) 
```

有问题的属性是**import**、**default**和**export**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T20:31:55.310

我不知道您是否仍然遇到同样的问题，但我发现了一个可能的原因：

当您声明任何角度模块时，您必须注入一些依赖项，如下所示：

```
angular.module('MyStore', ['ng','ngRoute']); 
```

如果您需要从另一个地方调用该模块来执行任何操作，如果您尝试再次注入依赖项，您可能会不匹配......那么您必须使用它的名称来调用它，如下所示：

```
angular.module('myStore') 
```

否则你将利用你的大脑寻找解决方案。

我希望它有帮助！

# r - 'R' 没有循环的矩阵子集

> ID：15475074
> 
> 赞同：2
> 
> 时间：2013-03-18T10:53:16.917
> 
> 标签：r, for-loop, subset, apply

大约六个月前，我开始使用 R，并且在 R 方面获得了一些经验。最近，我遇到了一个关于矩阵中的子集的问题，并且希望帮助我制定更高效的解决方案。

我想做的是以下。假设我有一个矩阵和两个向量，如下所示：

```
# matrix
a <- matrix(seq(1,100,by=1),10,10)
# vector (first column of matrix a)
b <- c(2,4,5,6,7,8)
# vector (column numbers of matrix a)
c <- c(5,3,1,4,6,2) 
```

只是重申一下，

*   向量`b`是指矩阵的第一列`a`。
*   向量`c`是指矩阵的列数`a`。

我想得到`tmp99 <- a[b,c:8]`。但是，当我这样做时，我会收到以下警告消息。

```
Warning message:
In c:8 : numerical expression has 6 elements: only the 
        first used (index has to be scalar and not vector) 
```

所以，我尝试使用循环和列表来解决这个问题，我得到了我想要的解决方案。我假设有比这更省时的解决方案。我到目前为止的解决方案如下：

```
a <- matrix(seq(1,100,by=1),10,10)
b <- c(2,4,5,6,7,8)
c <- c(5,3,1,4,6,2)
tmp <- list()
for (i in 1:length(b)) tmp[[i]] <- c(a[b[i],(c[i]:8)])
tmp99 <- t(sapply(tmp, '[', 1:max(sapply(tmp, length))))
tmp99[is.na(tmp99)] <- 0 
```

我想知道的是*是否有一种方法可以避免使用循环*来实现上述目标，因为我的矩阵维度是`200000 x 200`并且因为我必须这样做很多（在我的问题中，`b`并且`c`被确定为代码的另一部分的一部分所以我不能使用绝对索引号），我想减少同样的时间。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:44:58.527

您可以尝试某种矩阵索引解决方案，像这样。目前尚不清楚它是否真的会更快。在小情况下，我认为肯定会，但在大情况下，从创建矩阵到索引所花费的开销可能比仅仅运行 for 循环要长。为了获得更好的答案，请制作一个与您的数据集相似的数据集，我们可以对其进行测试。

```
idx.in <- cbind(rep(b, 8-c+1), unlist(lapply(c, function(x) x:8)))
idx.out <- cbind(rep(seq_along(b), 8-c+1), unlist(lapply(c, function(x) 1:(8-x+1))))
tmp99 <- array(0, dim=apply(idx.out, 2, max))
tmp99[idx.out] <- a[idx.in] 
```

这是一个带有矩阵索引的版本，但它对每一行单独进行。这可能会更快，具体取决于要替换的行数和列数。您要避免的是内存不足，for 循环可以帮助解决这个问题，因为它不会同时将每个步骤的所有细节都保存在内存中。

```
out <- array(0, dim=c(length(b), 8-min(c)+1))
for(idx in seq_along(b)) {
  out[cbind(idx, 1:(8-c[idx]+1))] <- a[cbind(b[idx], c[idx]:8)]
}
out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:42:35.973

以下是使用`base`包的一种方法。可能有更好的解决方案使用`data.table`但以下工作:)

```
a <- matrix(seq(1, 100, by = 1), 10, 10)
b <- c(2, 4, 5, 6, 7, 8)
c <- c(5, 3, 1, 4, 6, 2)

res <- t(sapply(X = mapply(FUN = function(b, c) expand.grid(b, seq(from = c, to = 8)), b, c, SIMPLIFY = FALSE), FUN = function(x) {
    c(a[as.matrix(x)], rep(0, 8 - nrow(x)))
}))

res
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]   42   52   62   72    0    0    0    0
## [2,]   24   34   44   54   64   74    0    0
## [3,]    5   15   25   35   45   55   65   75
## [4,]   36   46   56   66   76    0    0    0
## [5,]   57   67   77    0    0    0    0    0
## [6,]   18   28   38   48   58   68   78    0

# Let's break it down in multiple steps.

coordinates <- mapply(FUN = function(b, c) expand.grid(b, seq(from = c, to = 8)), b, c, SIMPLIFY = FALSE)

# below sapply subsets c using each element in coordinates and pads result with additional 0s such that total 8 elements are returned.

res <- sapply(X = coordinates, FUN = function(x) {
    c(a[as.matrix(x)], rep(0, 8 - nrow(x)))
})
res
##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]   42   24    5   36   57   18
## [2,]   52   34   15   46   67   28
## [3,]   62   44   25   56   77   38
## [4,]   72   54   35   66    0   48
## [5,]    0   64   45   76    0   58
## [6,]    0   74   55    0    0   68
## [7,]    0    0   65    0    0   78
## [8,]    0    0   75    0    0    0

# you probably need result as traspose
res <- t(res)

res
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]   42   52   62   72    0    0    0    0
## [2,]   24   34   44   54   64   74    0    0
## [3,]    5   15   25   35   45   55   65   75
## [4,]   36   46   56   66   76    0    0    0
## [5,]   57   67   77    0    0    0    0    0
## [6,]   18   28   38   48   58   68   78    0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:59:46.287

```
tmp <- lapply(seq_len(length(b)),function(i) {
  res <- a[b[i],c[i]:8]
  res <- c(res,rep(0,c[i]-1))
  res
                                              })
tmp99 <- do.call("rbind",tmp)
#       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
# [1,]   42   52   62   72    0    0    0    0
# [2,]   24   34   44   54   64   74    0    0
# [3,]    5   15   25   35   45   55   65   75
# [4,]   36   46   56   66   76    0    0    0
# [5,]   57   67   77    0    0    0    0    0
# [6,]   18   28   38   48   58   68   78    0 
```

# windows-phone - 通过任何编程语言获取系统中Win CE手机的截图

> ID：15475075
> 
> 赞同：0
> 
> 时间：2013-03-18T10:53:17.793
> 
> 标签：windows-phone, screenshot

我想获取使用任何编程语言连接到我的电脑的 windows CE 或 windows 7 ,8 手机的屏幕截图。

我知道一些外部工具可用，例如 mymobiler。但我不想使用这些工具，而不是我想开发自己的工具，就像 mymobiler 一样。

任何人都可以建议我如何实现这一目标......？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:03:09.797

对于要使用的每个不同平台，您都需要不同的技术。这是因为它们以不同的方式连接到 PC。WindowsCE 通常使用 ActiveSync，Windows Phone 7 使用 Zune 软件，而 Windows Phone 8 使用不同的东西。

您使用 WinCE 设备执行此操作的方式可能会因所讨论的特定设备而异。当然，有些 WindowsCE 设备甚至没有屏幕，因此您需要小心清楚地定义您感兴趣的设备。

对于 Windows Phone 7 和 8，您还需要设备上的自定义 ROM 映像，因为从连接的 PC 访问屏幕上显示的内容的能力不包含在零售设备中包含的标准映像中。带有此类图像的设备仅适用于 Microsoft 内部的极少数人。

所有这些都会让你很难实现你的要求。可能需要一种不同的方法来实现您的最终目标。

# android - 对 gridview 图标 onclick 的发光效果

> ID：15475080
> 
> 赞同：1
> 
> 时间：2013-03-18T10:53:35.817
> 
> 标签：android, android-gridview, android-icons

我正在使用 GridView 来显示图标，现在我需要指示用户单击它会将一些发光效果应用于图标的中心。

目前我正在使用这个；

```
gridView.setSelector(android.R.color.transparent); 
```

如何以编程方式将发光效果应用于图标的中心。

# asp.net-mvc-3 - 仅隐藏 DatePicker 元素 javascript

> ID：15475082
> 
> 赞同：0
> 
> 时间：2013-03-18T10:53:38.280
> 
> 标签：asp.net-mvc-3, razor, telerik, datepicker

我使用以下代码隐藏 DataPicker 元素仅隐藏文本框不隐藏日历图像。

HTML 代码

```
 @Html.Telerik().DatePickerFor(model=>model.Dateofpublisher) 
```

jQuery

```
 $('[name="Dateofpublisher"]').hide(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:14:58.440

你不需要写 DatePickerFor。我总是这样做：

```
<input id="datepicker" name="date*" type="text" value="" /> 
```

*您的日期选择器的名称应与您提交的模型日期的名称相同。在脚本代码中只写：

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
</script> 
```

注意：应首先添加[jqueryui文件。](http://jqueryui.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:34:41.830

**HTML**

```
<div id="Date">
<input id="datepicker" name="date*" type="text" value="" />
</div> 
```

**jQuery**

```
 $(document).ready(function () {

        $("Date").hide();
}); 
```

# ios - 如何将ios“更多”按钮的文本更改为我的语言版本？

> ID：15475085
> 
> 赞同：3
> 
> 时间：2013-03-18T10:53:51.087
> 
> 标签：ios, localization, uitabbar

在我的 ios 应用程序中，我有一个包含很多按钮的标签栏。其中一些位于“更多”按钮之后。有一种方法可以将“更多”按钮的文本更改为“altro”，即我的语言中的“更多”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:02:19.720

系统提供的属性标题和图像`UITabBarItem`无法更改，如[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UITabBarItem/initWithTabBarSystemItem:tag:)所述：

> **讨论**
> 
> 此方法返回系统提供的选项卡栏项。返回项目的标题和图像属性以后无法更改。

该值将由操作系统自动本地化为正确的语言。如果您需要更改此设置，您必须自己创建项目及其功能。

# javascript - 括号内的算术运算 javascript

> ID：15475087
> 
> 赞同：1
> 
> 时间：2013-03-18T10:53:51.737
> 
> 标签：javascript, regex, math, arithmetic-expressions

嗨，请帮我解决这个问题

```
 var str = '10+20-10-2';
    var numbers = str.replace(/ /g, '').split(/[-+*\/]/g);
    var operators = str.replace(/ /g, '').split(/\d*/g);
    operators.shift();        
    var result = +numbers[0];        
    for (var i = 0; i < operators.length - 1; i++) {
        result = eval( result + operators[i] + numbers[i + 1] );
    }        
    alert(result)​; 
```

上面的代码工作正常，但是当我试图传递一些其他输入时

```
 var str = '-(1)-(-2)';
    var str = '-1-(-1)';
    var str = '(-1)-2'  ; 
```

没有得到任何结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:57:40.500

我想在你的情况下，除了 eval，你还可以使用

```
var result = parseFloat(numbers[0]); 
```

因此

```
result = eval( result + operators[i] + parseFloat(numbers[i + 1])) 
```

这更可靠一些，因为它仅在数字中的字符串真正包含数字时才有效，并且`NaN`如果它们不包含则将返回。此外，为了更加扎实，您可以走很长一段路并使用`switch`指令：

```
switch(operators[i])
{
   case "+":
   etc.
} 
```

当然，您的解决方案更优雅，但由于某些原因它不起作用，这可能会帮助您发现它。在你身上，我还会用几个`alert()`函数检查这些拆分数组的实际内容。有时正则表达式不会产生您期望的输出。

# ios - 我们可以为特定版本启用游戏中心吗？

> ID：15475088
> 
> 赞同：0
> 
> 时间：2013-03-18T10:53:55.377
> 
> 标签：ios, game-center

在通过 Game Center 进出之后，我是 Game Center 的新手。我有一些疑问，我需要你们中的任何人澄清：

1）我们可以为特定的应用程序版本启用游戏中心吗，（即）以前的应用程序版本1.0没有游戏中心功能，所以我喜欢为2.0应用程序版本启用游戏中心。所以，我的问题是，如果我为应用程序版本 2.0 启用游戏中心，它是否会影响以前的应用程序版本 1.0？

2）为什么大多数应用程序没有在他们的应用程序内提供游戏中心登录功能，而不是通过游戏中心功能登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:19:21.843

1) 是的，您可以将 Game Center 集成到下一个版本的同一个应用程序中。根本不是问题。您的用户将收到更新可用的通知，一旦他们更新他们将具有功能。如果有人不想更新，您以前的版本也可以正常工作。

2）如果您的应用程序启用了游戏中心，这意味着它必须以多种方式与其进行多次通信。例如。获得分数，更新分数，获得成就，获得排行榜和挑战。以上所有功能都需要游戏中心身份验证才能进一步进行。大多数应用程序（甚至是我创建的应用程序）都需要在启动时登录游戏中心，然后才能顺利运行。最好通过游戏中心使用登录来请求身份验证。

# jquery - jQuery隐藏所有具有相同id的元素

> ID：15475094
> 
> 赞同：18
> 
> 时间：2013-03-18T10:54:09.870
> 
> 标签：jquery

按主题，我有一些 id = "loader" 的 div。

在我的 jQuery 代码中，我有

```
 $("#loader").hide(), 
```

但它只适用于第一个 div。

我怎么能隐藏所有的div？

非常感谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-18T10:56:42.607

拥有多个具有相同 ID 的元素不是有效的 HTML。`#loader`整个页面中只能有一个 ID 为 ( ) 的元素。这就是为什么 jQuery 只隐藏第一个元素。使用类而不是 id：

```
$('.loader').hide(); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-18T10:54:45.823

html 元素的 id 应该是**唯一的**，因此您最好将类与所有元素一起使用，并使用[类选择器](http://api.jquery.com/class-selector/)将它们全部隐藏。

```
$('.className').hide(); 
```

如果您无法为它们分配公共类，例如您`can not`更改源代码，您可以使用[Attribute Equals Selector [name=”value”]](https://api.jquery.com/attribute-equals-selector/)。

```
 $("[id=loader]").hide(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-06-03T08:55:37.947

隐藏所有具有相同 ID 的项目的方法如下

```
$( "#hide" ).click(function() {
  $('div#hidden').hide();
});
```

```
<div id="hidden">ID Number 1</div>
<div id="2">ID Number 2</div>
<div id="hidden">ID Number 1</div>
<div id="2">ID Number 2</div>
<div id="hidden">ID Number 1</div>
<a href="#" id="hide">Hide Div</a>
```

希望您能从中受益。

# ios - 绘图时临时构建中的崩溃问题

> ID：15475096
> 
> 赞同：0
> 
> 时间：2013-03-18T10:54:15.387
> 
> 标签：ios, core-graphics

我在以下代码中遇到了崩溃问题（仅在 Ad-Hoc 构建中）。

```
- (void)drawPreviewInRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);

    CGColorRef strokeColor = [self.delegate.strokeColor CGColor];
    CGFloat strokeWidth = self.delegate.strokeWidth;

    CGFloat x = rect.size.width/2.0f;
    CGFloat y = rect.size.height/2.0f;
    CGPoint strokePoint = CGPointMake(x, y);

    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, strokeWidth);
    CGContextSetStrokeColorWithColor(context, strokeColor);

    CGContextMoveToPoint(context, strokePoint.x, strokePoint.y);
    CGContextAddLineToPoint(context, strokePoint.x, strokePoint.y);
    CGContextStrokePath(context);

    CGContextRestoreGState(context);
} 
```

崩溃日志显示如下图：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x10000008
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x39f535b0 objc_msgSend + 16
1   CoreGraphics                    0x3237c3ec CGColorRetain + 12
2   CoreGraphics                    0x3237c592 CGGStateSetStrokeColor + 38 
```

该代码在开发环境中运行良好（在模拟器和设备上）。有什么理论吗？我在ARC下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:50:49.740

快速猜测：`self.delegate`未设置为`nil`您的`init`which 会导致`CGColor`在随机内存位上被调用。

* * *

更详细地说：在开发构建期间，对象变量往往都设置为友好的`nil`值。当您进行发布构建时，情况并非如此。像这样的崩溃很可能是没有初始化的东西`nil`。

它几乎可以在任何地方；因为对象变量“某处”指向内存的随机位。

你可以试试 Xcode 中的分析工具，看看它是否能找到任何东西。除此之外，您必须从崩溃的对象通过其父对象向后工作，并检查所有内容是否已正确初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:02:30.917

问题在于对象保留和释放——由 ARC 处理。显然，ARC 仍然存在一些问题，特别是 UIColor -> CGColor。问题在这里解释：http: [//blog.bignerdranch.com/296-arc-gotcha-unexpectedly-short-lifetimes/](http://blog.bignerdranch.com/296-arc-gotcha-unexpectedly-short-lifetimes/)

我将以下几行更改为代码：

```
CGContextSetLineWidth(context, strokeWidth);
CGContextSetStrokeColorWithColor(context, strokeColor); 
```

对此，它现在正在工作：

```
CGContextSetLineWidth(context, self.delegate.strokeWidth);
CGContextSetStrokeColorWithColor(context, self.delegate.strokeColor.CGColor); 
```

# actionscript-3 - 完成后Flash重启功能

> ID：15475099
> 
> 赞同：1
> 
> 时间：2013-03-18T10:54:22.083
> 
> 标签：actionscript-3, flash, timer, reset

我已经制作了这个工作正常的代码 - 我的问题是最后我希望让它重新开始。

当我开始制作这个时，我的意图是，.swf 电影在结束时会循环播放——但这并没有发生。然后我想我会尝试在代码本身中创建一种“重新启动”功能，以重置计时器和字符串..我已经用谷歌搜索并自己尝试了几件事 - 但根本没有运气..

首先，我尝试重置变量 i。然后我试图删除计时器事件监听器。但没有成功。

让这段代码重新开始的最好方法是什么？

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import com.greensock.*;
import com.greensock.easing.*;

var str_one:String = 'På fredag udkommer metroXpress, som du kender den, for sidste gang... ';
var i:uint = 0;
var timer_one:Timer = new Timer(50);
timer_one.start();
timer_one.addEventListener(TimerEvent.TIMER, goTime);

var str_two:String = 'På fredag udkommer metroXpress, som du kender den, for sidste gang... Fra 2\. april bliver du mødt af en helt ny avis, med det bedste fra den gamle, tilsat en masse nyt.';
var timer_two:Timer = new Timer(50);
timer_two.addEventListener(TimerEvent.TIMER, goTime_two);

var str_three:String = 'På fredag udkommer metroXpress, som du kender den, for sidste gang... Fra 2\. april bliver du mødt af en helt ny avis, med det bedste fra den gamle, tilsat en masse nyt.Sådan vil vi skabe en endnu bedre avis til dig, der er på farten. Glæd dig – det gør vi!';
var timer_three:Timer = new Timer(50);
timer_three.addEventListener(TimerEvent.TIMER, goTime_three);

function goTime(e:TimerEvent) {
    tekstbox1_txt.appendText(str_one.charAt(i));
    i++;
    if (i>=str_one.length) {
        timer_one.stop();
        TweenLite.to(hand, 1, {y:175, onComplete:ripwhite});
        }
    }

function ripwhite():void {
    TweenLite.to(hand, 1, {y:405});
    TweenLite.to(white_mask, 1, {y:320, onComplete:fadetekst1ud});
}

function fadetekst1ud():void {
    TweenLite.to(tekstbox1_txt, 1, {alpha:0, onComplete:tekstnr2});
    }

function tekstnr2():void {
timer_two.start();
}

function goTime_two(e:TimerEvent) {
    tekstbox2_txt.appendText(str_two.charAt(i));
    i++;
    if (i>=str_two.length) {
        timer_two.stop();
        TweenLite.to(tekstbox2_txt, 1, {alpha:1, onComplete:forsinkelse});
        }
    }

function forsinkelse():void {
    TweenLite.to(tekstbox2_txt, 1, {alpha:0, onComplete:tekstnr3});
    }

function tekstnr3():void {
timer_three.start();
}

function goTime_three(e:TimerEvent) {
    tekstbox3_txt.appendText(str_three.charAt(i));
    i++;
    if (i>=str_three.length) {
        timer_three.stop();
        TweenLite.to(tekstbox3_txt, 1, {alpha:1, onComplete:sidstefunktion});
        }
    }

function sidstefunktion():void {
    TweenLite.to(tekstbox3_txt, 1, {alpha:0});
    TweenLite.to(rippedpic, 1, {alpha:0});
    } 
```

编辑：

设置重置功能然后使其循环回我的初始功能时，如下所示：

```
function nulstil():void {
    i = 0;
    TweenLite.killTweensOf(hand);
    TweenLite.killTweensOf(tekstbox1_txt);
    TweenLite.killTweensOf(tekstbox2_txt);
    TweenLite.killTweensOf(tekstbox3_txt);
    timer_one.addEventListener(TimerEvent.TIMER, goTime);
    timer_two.addEventListener(TimerEvent.TIMER, goTime_two);
    timer_two.addEventListener(TimerEvent.TIMER, goTime_three);
    TweenLite.to(white_mask, 0.1, {onComplete:goTimeAgain});
    } 
```

我在输出中得到以下信息：

ArgumentError：错误 #1063：Untitled_fla::MainTimeline/goTimeAgain() 上的参数计数不匹配。预期 1，得到 0。在 Function/ [http://adobe.com/AS3/2006/builtin::apply()](http://adobe.com/AS3/2006/builtin::apply()) at com.greensock.core::TweenCore/complete() at com.greensock::TweenLite/renderTime( ) 在 com.greensock.core::SimpleTimeline/renderTime() 在 com.greensock::TweenLite$/updateAll()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:10:43.280

我在评论中建议您使用 TimelineMax。这是我认为应该工作的完整代码。仔细注意我在哪里使用`offset`论点`append`和在哪里不使用。您需要填写`resetEverything`函数以将所有视觉元素设置为其正确的起始位置、alpha 等。

基本上这是如何工作的：`Timers`我们不使用`addCallback`TimelineMax 的功能。回调在时间轴中的“长度”为 0，因此您必须在附加回调时手动推进播放头，以及在每批回调之后添加第一个补间时（这就是我们使用 offset 参数的地方）。不过，补间确实有一个长度，因此后续调用`append`将自动将补间与时间轴的末尾对齐，就像在该点建立的那样。

在我们指定的 TimelineMax 的构造函数中`repeat : -1`，这将导致时间线永远循环。最后，我们`resetEverything`在一开始就添加了回调，这样每次时间线重新启动时，我们都可以确保所有元素都处于正确的开始位置。其余的都是完全自动的，由时间线处理。

```
import com.greensock.*;

var str_one:String = 'På fredag udkommer metroXpress, som du kender den, for sidste gang... ';
var str_two:String = 'Fra 2\. april bliver du mødt af en helt ny avis, med det bedste fra den gamle, tilsat en masse nyt.';
var str_three:String = 'Sådan vil vi skabe en endnu bedre avis til dig, der er på farten. Glæd dig – det gør vi!';

//-------- HELPER FUNCTIONS ---------//

// Set everything to start positions
function resetEverything():void {
    // Set alphas, positions, etc. 
    hand.x = <start x>;
    hand.y = <start y>;
    //
}

// Quick reusable callback
function addText(textBox:TextField, text:String):void { textBox.appendText(text); }

//-------- BUILD THE TIMELINE ---------//
var timeline:TimelineMax = new TimelineMax({repeat : -1}); //repeat = -1 --> loop forever
timeline.pause();
timeline.addCallback(resetEverything, 0);

var lng:uint = str_one.length;
var playHead:Number = 0.05;
for(var i:uint = 0; i < lng; i++) {
    timeline.addCallback(addText, playHead, [tekstbox1_txt, str_one.charAt(i)]);
    playHead += 0.05;
}
timeline.append(new TweenLite(hand, 1, {y:175}), lng * 0.05);  // !!Note the offset argument here!!
timeline.append(new TweenLite(hand, 1, {y:405}));
timeline.append(new TweenLite(white_mask, 1, {y:320}));
timeline.append(new TweenLite(tekstbox1_txt, 1, {alpha:0}));

playHead += 4;
lng = str_two.length;
for(i = 0; i < lng; i++) {
    timeline.addCallback(addText, playHead, [tekstbox2_txt, str_two.charAt(i)]);
    playHead += 0.05;
}
timeline.append(new TweenLite(tekstbox2_txt, 1, {alpha:1}), lng * 0.05); // !!Note the offset argument here!!
timeline.append(new TweenLite(tekstbox2_txt, 1, {alpha:0}));

playHead += 2;
lng = str_three.length;
for(i = 0; i < lng; i++) {
    timeline.addCallback(addText, playHead, [tekstbox3_txt, str_three.charAt(i)]);
    playHead += 0.05;
}
timeline.append(new TweenLite(tekstbox3_txt, 1, {alpha:1}), lng * 0.05); // !!Note the offset argument here!!
timeline.append(new TweenLite(tekstbox3_txt, 1, {alpha:0});
timeline.append(new TweenLite(rippedpic, 1, {alpha:0});

timeline.play(); 
```

# javascript - 从 url javascript 创建文档

> ID：15475101
> 
> 赞同：0
> 
> 时间：2013-03-18T10:54:28.773
> 
> 标签：javascript, dom

这是我尝试过的：

```
function createDocumentz() {
    var doc = document.implementation.createHTMLDocument('http://www.moviemeter.nl/film/270',null,'html');
    return doc;
} 
```

即使创建了一个文档，如果我用 Firebug 运行它，它会说主体节点没有子节点，知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:06:11.460

不，您无法通过这种方式从其他网站获取内容。

如果是这样，它将导致跨站点脚本。

由于浏览器的政策，你得到的只是一个空文档，当然它有一个空的正文。

您可以使用 Iframe 并将源设置为相同...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:08:18.047

看起来您假设您可以使用`createHTMLDocument()`从作为第一个参数传递的 URL 下载和解析 HTML 文件。事实并非如此，`createHTMLDocument()`总是会创建一个空文档。

此外，您传递给函数的参数是[`createDocument()`](https://developer.mozilla.org/en-US/docs/DOM/DOMImplementation.createDocument). `createHTMLDocument()`只接受一个参数，文档标题。但即使您使用`createDocument()`，第一个参数也是命名空间的 URI *，*而不是源文档。

不幸的是，没有办法单独使用 JavaScript 下载和操作外部网站的 HTML。您可以获得的最接近的方法是在 iframe 中显示文档。

# .net - WinCE Remove App 在启动时仍然调用 EXE

> ID：15475104
> 
> 赞同：1
> 
> 时间：2013-03-18T10:54:40.570
> 
> 标签：.net, compact-framework, windows-ce, cab

从 CE 设备卸载我的应用程序时遇到一些问题。

我的应用程序初始化 SHCreateShortcut(@"\Windows\StartUp\Daemon.lnk", "\"" + "Program Files\Daemon\Daemon.exe" + "\"");

我卸载了它，但重启后设备仍然要求运行。我收到以下消息：**无法打开文件“守护程序”。要么它没有使用受信任的证书签名，要么找不到它的组件之一。如果问题仍然存在，请尝试重新安装或恢复此文件**

我想知道是否有适当的方法来卸载应用程序，如何防止此问题发生？

我想知道卸载程序中是否有办法删除启动链接或下一个版本的安装程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:47:27.157

当然。按照您的操作方式，您的程序会创建一个快捷方式，*而不是安装程序*。因此安装程序不知道它也应该删除快捷方式，因此启动快捷方式保留在设备上，并且在每次重新启动时，系统都会尝试运行应用程序，因为它仍然链接在启动文件夹中。

您需要让安装程序创建快捷方式（并从您的应用程序中删除创建快捷方式的代码），而不是让您的程序创建快捷方式。

要让安装程序创建快捷方式，请右键单击您的 CAB 设置项目并选择“查看 > 文件系统”（可能会以不同的方式调用，因为我使用的是德语 Visual Studio，但我相信您会找到它） .

这会打开一个编辑器，您可以在其中选择文件的位置。您可以将快捷方式添加到预定义的“开始菜单”文件夹，您可以通过右键单击将其添加到文件夹树中，也可以`Windows/Startup`通过在文件夹树中创建新文件夹来手动添加。

# javascript - 在 Ckeditor 中检索剪切数据

> ID：15475113
> 
> 赞同：0
> 
> 时间：2013-03-18T10:54:55.767
> 
> 标签：javascript, ckeditor, cut

我正在寻找一种在 CKEditor 中获取剪切事件数据的方法。我正在查看发布在 github 上的源代码。但尝试在 IE8、Mozilla(Mac) 上获取数据后，使用以下 2 个示例

```
 editor.editable().on('cut', function (ev) {
        console.log(ev.dataValue);
    });

    editor.editable().on('cut', function (ev) {
        console.log(ev.data.dataValue);
    }); 
```

我无法找出不检索数据的问题。有人知道如何从 CKEditor 中的剪切事件中检索数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:42:17.920

你不能。

CKEditor 利用本机`document.execCommand`进行剪贴板操作。它不存储剪切/复制的内容，但浏览器存储。除 IE 之外的所有浏览器都不允许您操作剪贴板数据（IE 将首先显示提示）。事实上，CKEditor（几乎）与剪切过程无关。

在 IE 和 Webkit 中，您可以尝试使用[onbeforecut](http://help.dottoro.com/ljkadrvv.php)事件来监听和访问编辑器的选择`editor.getSelection()`(ie `editor.getSelection().getSelectedText()`)。

# matlab - 如何在使用邻接矩阵表示的大型网络中找到桥梁（社区连接节点）

> ID：15475116
> 
> 赞同：2
> 
> 时间：2013-03-18T10:55:03.287
> 
> 标签：matlab, search, math, graph, social-networking

我有大约 10K 到 100K 个节点的网络，这些节点都已连接。这些节点通常被分组为社区集群，这些社区与它们之间的许多边缘紧密相连，并且存在集线器等。在社区之间，有一些边缘将社区*桥接*/*连接*在一起的节点。这些数据集在邻接矩阵中

我已经尝试过光谱聚类（[Ding et al 2001](http://www.cc.gatech.edu/~mihail/D.8802readings/kdd3a.pdf)），但它在大型数据集上真的很慢，并且当存在很多歧义时似乎停止工作（桥梁不是通往另一个集群的唯一桥梁路线 - 其他社区可以充当替代代理路由）。

我尝试了一些来自[martelot](http://www.elemartelot.org/index.php/programming/cd-code)的方法，例如用于模块化优化的 Newman 算法，但没有将稳定性优化功能纳入这项工作（这可能很关键吗？）。在由随机图（ER 图）创建集群的合成数据集上，这些方法有效，但在存在嵌套层次结构的真实数据集上，结果分散。使用独立的可视化应用程序/工具，桥梁是显而易见的。

您会推荐/建议尝试哪些方法？我正在使用 MATLAB。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-20T16:11:07.833

你到底想做什么？检测社区，或它们之间的桥梁？这是两个不同的问题。一旦你有了社区，就很容易识别连接来自两个不同社区的节点的边。所以，我猜你想检测社区。

为此目的实际上有数千种方法，其中一些在 Matlab 中实现，例如您引用的那个，或[广义的 Louvain 算法](http://netwiki.amath.unc.edu/GenLouvain/GenLouvain)（也基于模块化优化）。但是，它们中的大多数都可以作为 C 或 C++ 程序使用，例如[InfoMap](http://www.tp.umu.se/~rosvall/code.html)（基于数据压缩范式）、[WalkTrap](http://www-rp.lip6.fr/~latapy/PP/walktrap.html)（使用基于随机游走的距离进行聚类）、[Markov Cluster](http://micans.org/mcl/)（模拟一些传播机制）和列表继续...

这些工具或多或少不同地形式化了社区结构的概念，当应用于同一网络时，可能会导致不同的（估计的）社区结构。当然，不同的社区也意味着不同的桥梁。所以问题是要知道如何为您的数据选择合适的方法。你似乎有*先验*关于您正在学习的网络的知识，因此您应该使用它来做出选择（而不是编程语言）。例如，即使您没有明确说明，您似乎也在寻找一种分层的社区结构：并非所有工具都能够检测到这种结构。同样，如果您认为一个节点可以同时属于多个社区，那么您应该考虑寻找重叠的社区，例如使用[CFinder](http://www.cfinder.org/)（基于 clique 渗透）。

我建议你看看这篇关于社区检测的优秀评论，你可能会发现一些有趣的信息让你可以选择一种方法：[Graphs 中的社区检测](http://arxiv.org/abs/0906.0612)。此外，从编程的角度来看，我建议您使用[igraph 库](http://igraph.sourceforge.net/)（可用于 C、R 和 Python）：它包含几个标准的社区检测工具。你可以在你的数据上试用它们，看看你会得到什么。

# java - Java 属性 - int 变为 null

> ID：15475122
> 
> 赞同：4
> 
> 时间：2013-03-18T10:55:35.027
> 
> 标签：java, properties

虽然我之前看到过类似的问题，但接受的答案似乎为不同的问题 (IMO) 提供了答案。

我刚加入一家公司，在进行任何更改/修复之前，我想确保所有测试都通过。除了一个之外，我已经修复了所有问题，我发现这是由于 Java 中的一些（对我而言）意外行为。如果我将键/值对插入到值为 int 的 Properties 对象中，我希望自动装箱发挥作用并且 getProperty 将返回一个字符串。但是，这不是发生的事情（JDK1.6） - 我得到一个空值。我在下面写了一个测试类：

```
import java.util.*;

public class hacking
{
    public static void main(String[] args)
    {
        Properties p = new Properties();
        p.put("key 1", 1);
        p.put("key 2", "1");

        String s;

        s = p.getProperty("key 1");
        System.err.println("First key: " + s);

        s = p.getProperty("key 2");
        System.err.println("Second key: " + s);
    }
} 
```

这个的输出是：

```
C:\Development\hacking>java hacking
First key: null
Second key: 1 
```

查看属性源代码，我看到：

```
public String getProperty(String key) {
    Object oval = super.get(key);
    String sval = (oval instanceof String) ? (String)oval : null;
    return ((sval == null) && (defaults != null)) ? defaults.getProperty(key) : sval;
} 
```

违规行是第二行 - 如果它不是字符串，则使用 null。我看不出为什么会期望/期望这种行为的任何原因。几乎可以肯定，代码是由比我更有能力的人编写的，所以我认为这是有充分理由的。谁能解释一下？如果我做了一些愚蠢的事情，请节省时间并告诉我！:-)

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:03:06.183

这是表单文档：“因为 Properties 继承自 Hashtable，所以 put 和 putAll 方法可以应用于 Properties 对象。强烈建议不要使用它们，因为它们允许调用者插入键或值不是字符串的条目。setProperty 方法应该代替使用。如果对包含非字符串键或值的“受损”属性对象调用 store 或 save 方法，则调用将失败。类似地，如果调用 propertyNames 或 list 方法，则调用将失败在包含非字符串键的“受损”属性对象上。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:09:13.470

我根据文档修改了您的代码以使用 setProperty 方法，它会引发编译错误

```
package com.stackoverflow.framework;
import java.util.*;

public class hacking
{
    public static void main(String[] args)
    {
        Properties p = new Properties();
        p.setProperty("key 1", 1);
        p.setProperty("key 2", "1");

        String s;

        s = p.getProperty("key 1");
        System.err.println("First key: " + s);

        s = p.getProperty("key 2");
        System.err.println("Second key: " + s);
    }
} 
```

# asp.net - 如何将提交按钮更改为更新按钮

> ID：15475124
> 
> 赞同：0
> 
> 时间：2013-03-18T10:55:41.070
> 
> 标签：asp.net, button, gridview, postback

伙计们，我有两页在第一页我有我的表单，第二页是报告页面，我的表单值存储在网格中。我现在在我的表单页面上有提交按钮，当我点击编辑链接时，我将重定向到我的表单页面，我可以在其中进行更改和更新详细信息。现在我想要的是当我单击编辑链接并移动到我的表单页面以编辑我的提交按钮更改为更新按钮时我该怎么做...

这是我的第一页代码：

    选择 TRAVELONG ONETRAVEL .UK-BSP .CA-YYZ .CA-YVR 部分 MCO 退款    

```
<div id="FirstForm" style="margin-left: 80px" runat="server">
<table class="style1">
       <tr>
           <td class="style13">
               <asp:Label ID="lblTid" runat="server" Text="TID"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbTid" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvTid" runat="server" 
                   ControlToValidate="tbTid" ErrorMessage="Enter Tid" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblUnusedTicketAmount" runat="server" 
                   Text="Unused Ticket Amount"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbUnusedTicketAmount" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvUnusedTicketAmount" runat="server" 
                   ControlToValidate="tbUnusedTicketAmount" ErrorMessage="Enter Amount" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlUnusedAmount" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style14">
               <asp:Label ID="lblPNR" runat="server" Text="PNR"></asp:Label>
           </td>
           <td class="style9">
               <asp:TextBox ID="tbPNR" runat="server"></asp:TextBox>
           </td>
           <td class="style8">
               <asp:RequiredFieldValidator ID="rfvPNR" runat="server" 
                   ControlToValidate="tbPNR" ErrorMessage="Enter PNR" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style9">
               <asp:Label ID="lblAirlinePenality" runat="server" Text="Airline Penality"></asp:Label>
           </td>
           <td class="style12">
               <asp:TextBox ID="tbAirlinePenality" runat="server"></asp:TextBox>
           </td>
           <td class="style10">
               <asp:RequiredFieldValidator ID="rfvAirlinePenality" runat="server" 
                   ControlToValidate="tbAirlinePenality" ErrorMessage="Enter Penality" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style10">
               <asp:DropDownList ID="ddlAirlinePenality" runat="server" AutoPostBack="True">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblTicketNumber" runat="server" Text="Ticket Number"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbTicketNumber" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvTicketNumber" runat="server" 
                   ControlToValidate="tbTicketNumber" ErrorMessage="Enter ESAC" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblNetRefundProcess" runat="server" Text="Net Refund Process"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbNetRefundProcess" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvNetRefundProcess" runat="server" 
                   ControlToValidate="tbNetRefundProcess" ErrorMessage="RequiredFieldValidator" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlNetRefundProcess" runat="server" AutoPostBack="True">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblESACCode" runat="server" Text="ESAC Code"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbESACCode" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvESACCode" runat="server" 
                   ControlToValidate="tbESACCode" ErrorMessage="Enter ESAC code" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblRefundableCommision" runat="server" 
                   Text="Refundable Commission"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbRefundableCommision" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvRefundableCommission" runat="server" 
                   ControlToValidate="tbRefundableCommision" ErrorMessage="RequiredFieldValidator" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlRefundableCommission" runat="server" 
                   AutoPostBack="True">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblWaiverCode" runat="server" Text="Waiver Code"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbWaiverCode" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvWaiverCode" runat="server" 
                   ControlToValidate="tbWaiverCode" ErrorMessage="Enter Waiver Code" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblCouponRefunded" runat="server" Text="Coupon Refunded"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbCouponRefund" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvCouponRefunded" runat="server" 
                   ControlToValidate="tbCouponRefund" ErrorMessage="Enter Coupon Refund" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               &nbsp;</td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="Label7" runat="server" Text="Remarks"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbRemarks" runat="server" TextMode="MultiLine"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvRemarks" runat="server" 
                   ControlToValidate="tbRemarks" ErrorMessage="Enter Remarks" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblRefundType" runat="server" Text="Refund Type"></asp:Label>
           </td>
           <td class="style11">
               <asp:DropDownList ID="ddlRefundType" runat="server">
                   <asp:ListItem>Full</asp:ListItem>
                   <asp:ListItem>Partial</asp:ListItem>
               </asp:DropDownList>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvRefundType" runat="server" 
                   ControlToValidate="ddlRefundType" ErrorMessage="Select Refund Type" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               &nbsp;</td>
       </tr>
       <tr>
           <td class="style13" colspan="7">
    <asp:Button ID="btnSubmit" runat="server" onclick="btnSubmit_Click" Text="Submit"/>
               <asp:Button ID="btnReset" runat="server" onclick="btnReset_Click" Text="Reset"/>                
           </td>
       </tr>
   </table>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
```

aspx.cs 页面代码：

```
 protected void  btnSubmit_Click(object sender, EventArgs e)
  {
    SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=Bart;Integrated Security=True");
    con.Open();

    string Portal = ddlPortal.SelectedValue;
    string TID = tbTid.Text;
    string PNR = tbPNR.Text;
    string TicketNumber = tbTicketNumber.Text;
    string ESACCode = tbESACCode.Text;
    string WaiverCode = tbWaiverCode.Text;
    string Remarks = tbRemarks.Text;
    string UnusedTicketAmount = tbUnusedTicketAmount.Text;
    string UnusedAmount = ddlUnusedAmount.SelectedValue;
    string AirlinePenality = tbAirlinePenality.Text;
    string Airline = ddlAirlinePenality.SelectedValue;
    string NetRefundProcess = tbNetRefundProcess.Text;
    string NetRefund = ddlNetRefundProcess.SelectedValue;
    string RefundableCommission = tbRefundableCommision.Text;
    string Refundable = ddlRefundableCommission.SelectedValue;
    string CouponRefunded = tbCouponRefund.Text;
    string RefundType = ddlRefundType.SelectedValue;

    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = "insert into Form3(Portal,TID,PNR,TicketNumber,ESACCode,WaiverCode,Remarks,UnusedTicketAmount,ddlUnusedAmount, AirlinePenality, ddlAirlinePenality, NetRefundProcess, ddlNetRefundProcess, RefundableCommission, ddlRefundableCommission, CouponRefunded,RefundType) values('" + Portal + "','" + TID + "','" + PNR + "','" + TicketNumber + "', '" + ESACCode + "', '" + WaiverCode + "', '" + Remarks + "','" + UnusedTicketAmount + "','" + UnusedAmount + "','" + AirlinePenality + "','" + Airline + "','" + NetRefundProcess + "','" + NetRefund + "','" + RefundableCommission + "','" + Refundable + "','" + CouponRefunded + "','" + RefundType + "')";
        cmd.Parameters.AddWithValue("@Portal", ddlPortal.SelectedIndex);
        cmd.Parameters.AddWithValue("@TID", tbTid.Text.Trim());
        cmd.Parameters.AddWithValue("@PNR", tbPNR.Text.Trim());
        cmd.Parameters.AddWithValue("@TicketNumber", tbTicketNumber.Text.Trim());
        cmd.Parameters.AddWithValue("@ESACCode", tbESACCode.Text.Trim());
        cmd.Parameters.AddWithValue("@WaiverCode", tbWaiverCode.Text.Trim());
        cmd.Parameters.AddWithValue("@Remarks", tbRemarks.Text.Trim());
        cmd.Parameters.AddWithValue("@UnusedTicketAmount", tbUnusedTicketAmount.Text.Trim());
        cmd.Parameters.AddWithValue("@ddlUnusedAmount", ddlUnusedAmount.SelectedIndex);
        cmd.Parameters.AddWithValue("@AirlinePenality", tbAirlinePenality.Text.Trim());
        cmd.Parameters.AddWithValue("@ddlAirlinePenality", ddlAirlinePenality.SelectedIndex);
        cmd.Parameters.AddWithValue("@NetRefundProcess", tbNetRefundProcess.Text.Trim());
        cmd.Parameters.AddWithValue("@ddlNetRefundProcess", ddlNetRefundProcess.SelectedIndex);
        cmd.Parameters.AddWithValue("@RefundableCommission", tbRefundableCommision.Text.Trim());
        cmd.Parameters.AddWithValue("@ddlRefundableCommission", ddlRefundableCommission.SelectedIndex);
        cmd.Parameters.AddWithValue("@CouponRefunded", tbCouponRefund.Text.Trim());
        cmd.Parameters.AddWithValue("@RefundType", ddlRefundType.SelectedIndex);
        cmd.ExecuteNonQuery();
    }
    con.Close();
    tbTid.Text = "";
    tbPNR.Text = "";
    tbTicketNumber.Text = "";
    tbESACCode.Text = "";
    tbWaiverCode.Text = "";
    tbRemarks.Text = "";
    tbRemarks.Text = "";
    tbUnusedTicketAmount.Text = "";
    tbAirlinePenality.Text = "";
    tbNetRefundProcess.Text = "";
    tbRefundableCommision.Text = "";
    tbCouponRefund.Text = "";
    lblRefundType.Text = "";
    tbTid.Focus();
} 
```

第二个报告页::

```
 <asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
    GridLines="None" AutoGenerateColumns="False" 
    onrowcommand="GridView1_RowCommand1">
    <Columns>
       <asp:TemplateField HeaderText="Query">
            <itemtemplate>
            <asp:LinkButton CommandName="cmdBind"  runat="server"  Text='<%#Eval("ID")%>' ID="ID" ToolTip='<%#Eval("ID")%>'>LinkButton
            </asp:LinkButton>                                                                   
            </itemtemplate>
            </asp:TemplateField>            
       <asp:BoundField DataField="Portal" HeaderText="Portal" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="TID" HeaderText="TID" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="PNR" HeaderText="PNR" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="TicketNumber" HeaderText="Ticket Number" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="ESACCode" HeaderText="ESACCode" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="WaiverCode" HeaderText="WaiverCode" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="Remarks" HeaderText="Remarks" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="UnusedTicketAmount" HeaderText="UnusedTicketAmount" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="ddlUnusedAmount" HeaderText="ddlUnusedAmoun" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="AirlinePenality" HeaderText="AirlinePenality" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="ddlAirlinePenality" HeaderText="ddlAirlinePenality" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="NetRefundProcess" HeaderText="NetRefundProcess" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="ddlNetRefundProcess" HeaderText="ddlNetRefundProcess" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="RefundableCommission" HeaderText="RefundableCommission" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="ddlRefundableCommission" HeaderText="ddlRefundableCommission" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="CouponRefunded" HeaderText="CouponRefunded" ItemStyle-HorizontalAlign="Center"/>
        <asp:BoundField DataField="RefundType" HeaderText="RefundType" ItemStyle-HorizontalAlign="Center"/>
    </Columns>       
        <AlternatingRowStyle BackColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView> 
```

aspx.cs 报告页面：

```
protected void Page_Load(object sender, EventArgs e)
{
    try
    {
        if (!Page.IsPostBack)
        {
            cmd = new SqlCommand("select * from Form3", con);
            da = new SqlDataAdapter(cmd);
            dt.Clear();
            con.Open();
            da.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                GridView1.DataSource = dt;
                GridView1.DataBind();
            }
            con.Close();
        }
    }
    catch (Exception ex)
    {

        Response.Write(ex.ToString());
    }

}
protected void GridView1_RowCommand1(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "cmdBind")
    {
        LinkButton lb = (LinkButton)e.CommandSource;

        Response.Redirect("Form.aspx?ID=" + lb.Text + "");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:18:41.970

您需要使用一种`State Management`技术来实现这一点。我曾经`Session`演示过。

在您有`Submit`按钮的页面上，您需要创建一个`property`像这样的按钮：

```
public string ButtonTextValue  
{
    get 
    {
        if (Session["ButtonValue"] == null)
            Session["ButtonValue"] = "Submit";

            return Convert.ToString(Session["ButtonValue"]); 
    }
    set
    {
            Session["ButtonValue"] = value;
    }
} 
```

在`pageload`同一页面上，您需要执行以下操作：

```
protected void Page_Load(object sender, EventArgs e)  
{
    if (!IsPostBack)
    {
        YourButton.Text = ButtonTextValue;
    }
} 
```

在第二页你需要这样做：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "cmdBind")
    {
        LinkButton lb = (LinkButton)e.CommandSource;
        Session["ButtonValue"] = "Update";
        Response.Redirect("Form.aspx?ID=" + lb.Text + "");              
    }
} 
```

# jakarta-ee - 从 Web 应用程序版本传递到移动版本

> ID：15475133
> 
> 赞同：0
> 
> 时间：2013-03-18T10:56:18.240
> 
> 标签：jakarta-ee, web-applications, mobile

如果您使用 Java EE 架构和技术（Spring、hibernate...）开发了一个专业的 Web 应用程序，那么它可以拥有数百万用户和一个非常大的数据库（Oracle）。

而现在你要设计和开发你的web应用的移动版，移动应用如何访问web版的业务层；

我想到了网络服务？你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:21:34.360

非常经典的用例，用于业务逻辑之上的服务层。不过要记住一些事情：

1.  注意不要编写特定于平台的调用。例如，您可能会得到这样的调用：getNextArticle(String previousUrl)。这适用于网络，但不适用于本机移动应用程序。您需要重构此调用以使其适用于两个平台。

2.  小心保持通话的规模较小。对于网络，可以发回 300kb 的有效负载。（或者可能不是？呵呵）对于移动设备，您绝对不想为一个电话发回 300kb。您需要为移动电话修剪返回对象。只是想一想。

3.  缓存，缓存，缓存，然后再缓存一些。既然你提到了数百万用户。=)

# ios - 将插入符号拖到视图边缘时如何使 UITextView 自动滚动？

> ID：15475136
> 
> 赞同：0
> 
> 时间：2013-03-18T10:56:31.150
> 
> 标签：ios, objective-c, uikit, uitextview

在 iOS 的 Notes 应用中，我在 TextView 上写了很长的文字，

然后我长按视图，调出放大镜，将其拖到屏幕底部（或键盘顶部，如果已激活），TextView 将自动向上滚动。

我该如何实现`UITextView`呢？

**我试过**

*   将 a 添加`UILongPressGestureRecognizer`到我的`UITextView`子类中，但它的操作永远不会被调用。
*   覆盖`touchesMoved:withEvent:`我的`UITextView`子类中的方法，但是在放大镜出现后不会调用此方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:43:10.713

你没有实现它；这是标准行为。

当您将放大镜拖离 UITextView 的底部或顶部时，或者当您靠近边缘时，会发生放大镜滚动，大约 10 像素？（最好在模拟器中对此进行测试，以精确控制触摸位置）。如果您的文本视图是全屏的，您可能无法拖动到视图之外的位置，并且滚动的触摸区域可能太小。

请注意，在 Notes 应用程序中，要向下滚动，您可以将放大镜拖到底部的选项卡上。要上去，您可以将其拖到标题中。只要您在视图外按住触摸，它就会滚动。

所有这一切也意味着您的视图在出现时不能移到键盘后面。当键盘出现以使滚动工作时，您需要调整 UITextView 的大小。

# java - DFC_PREFERENCE_LOAD_FAILED Failed to load per sistent preferences from null

> ID：15475140
> 
> 赞同：0
> 
> 时间：2013-03-18T10:56:36.857
> 
> 标签：java, jar, documentum

I have one documentum application , when i have created a jar of the project through eclipse by removing reference of config folder from eclipse ,

the jar is executable , in my classpath i have a value of DCTM.jar and config folder , when i was trying to run this jar through batch file ,i was getting following

exceptions

```
java.io.FileNotFoundException: dfc.properties
    at com.documentum.fc.common.impl.preferences.PreferencesManager.locateMainPersistentStore(PreferencesManager.java:357)

    at com.documentum.fc.common.impl.preferences.PreferencesManager.readPersistentProperties(PreferencesManager.java:311)

    at com.documentum.fc.common.impl.preferences.PreferencesManager.<init>(PreferencesManager.java:37)

    at com.documentum.fc.common.DfPreferences.initialize(DfPreferences.java:79)

    at com.documentum.fc.common.DfPreferences.getInstance(DfPreferences.java:58)

    at com.documentum.fc.impl.RuntimeContext.<clinit>(RuntimeContext.java:177)

    at com.documentum.fc.client.DfClient.<clinit>(DfClient.java:700)

    at com.documentum.com.DfClientX.getLocalClient(DfClientX.java:43)

    at com.impact.qtl12.documentum.services.DocumentumHandler.setIdfClient(DocumentumHandler.java:123)

    at com.impact.qtl12.documentum.services.DocumentumHandler.getDocumentumHandler(DocumentumHandler.java:154)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.<init>(QTL.java:115)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.main(QTL.java:599)

1422 [main] WARN com.documentum.fc.client.security.internal.RegistrationMgr  - [DFC_SECURITY_GR_PUBLICATION_FAILED] Publication

of DFC instance with global registry failed

DfException:: THREAD: main; MSG: [DFC_BOF_GLOBAL_REGISTRY_NOT_CONFIGURED] A global registry is not configured; ERRORCODE: ff; NE

XT: null

    at com.documentum.fc.client.security.impl.DfcIdentityPublisher.<init>(DfcIdentityPublisher.java:51)

    at com.documentum.fc.client.security.internal.RegistrationMgr.register(RegistrationMgr.java:34)

    at com.documentum.fc.impl.RuntimeContext.<clinit>(RuntimeContext.java:191)

    at com.documentum.fc.client.DfClient.<clinit>(DfClient.java:700)

    at com.documentum.com.DfClientX.getLocalClient(DfClientX.java:43)

    at com.impact.qtl12.documentum.services.DocumentumHandler.setIdfClient(DocumentumHandler.java:123)

    at com.impact.qtl12.documentum.services.DocumentumHandler.getDocumentumHandler(DocumentumHandler.java:154)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.<init>(QTL.java:115)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.main(QTL.java:599)

15:04:10,222 ERROR [main] Application - DfException Exception occurred while executing method getDocbaseList of DocumentumHandle

r class

15:04:10,222 ERROR [main] Application - [DM_DOCBROKER_E_NO_DOCBROKERS]error:  "No DocBrokers are configured"

15:04:11,879 ERROR [main] Application - QTLConnectionException Exception occurred while executing method populateAvailableDocBas

eCombo of CSVImport class

15:04:11,879 ERROR [main] Application - [DM_DOCBROKER_E_NO_DOCBROKERS]error:  "No DocBrokers are configured"

[DM_DOCBROKER_E_NO_DOCBROKERS]error:  "No DocBrokers are configured"
    at com.impact.qtl12.documentum.services.DocumentumHandler.getDocbaseList(DocumentumHandler.java:190)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.populateAvailableDocBaseCombo(QTL.java:627)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.addTargetGroup(QTL.java:264)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.createShell(QTL.java:565)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.launch(QTL.java:587)

    at com.impact.qtl12.imports.UI.CSVFile.QTL.main(QTL.java:607) 
```

But when i was trying to run the same application by specifying the address compiled main class with library folder in the same directory

the application was launched , so what is the difference between these two cases

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:05:38.293

EMC Documentum DFC 需要 dfc.properties 来查找可用的 documentum docbroker。dfc.properties 文件应该在您的类路径中。此文件的确切查找机制取决于您使用的 DFC 版本。但是将此文件放在您的类路径中应该适用于所有版本。

# java - Java：我的新对象实例化正在更改以前的对象引用

> ID：15475144
> 
> 赞同：1
> 
> 时间：2013-03-18T10:56:46.450
> 
> 标签：java, object, reference, arraylist

我试图弄清楚这里发生了什么，并希望得到任何帮助。我有一个循环，我在其中创建新对象，然后将它们添加到 ArrayList。但似乎每次通过循环时，新对象实际上也在更改先前创建的对象。我知道 ArrayList 实际上只包含对对象的引用，但我认为每次调用 new 都会创建新实例，因此每个引用都是唯一的。

这是代码：

```
void copyFields()
{
    String fruitStr = "apple red,banana yellow,orange orange,pear green,grape purple";

    String[][] fruitArray = new String[5][];
    String[] fruitPairs = fruitStr.split(",");
    int r = 0;
    for (String fruitPair : fruitPairs) 
    {
        fruitArray[r++] = fruitPair.split(" ");
    }

    ArrayList<Fruit> fruitList = new ArrayList<Fruit>();
    for (String[] f : fruitArray)
    {
        Fruit fruitObj = new Fruit(f[0],f[1]);
        fruitList.add(fruitObj);
    }
} 
```

所以最后fruitList 包含5 个对象- 都与fruitArray 中的最后一个元素相同（葡萄紫）。

您可以看到我正在尝试从包含水果/颜色对列表的字符串到二维数组，再到水果对象的 ArrayList。我可以验证每个步骤是否正常工作，直到我在调试器中观察到填充了fruitList，每次通过for循环都会更改fruitList中的所有先前对象。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:06:37.890

我已经测试了您的代码，它适用于经典`Fruit`实现：

```
public class Fruit {
    private String name;
    private String color;

    public Fruit(String name, String color) {
        this.color = color;
        this.name = name;
    }
} 
```

所以我想这些领域是`static`：

```
public class Fruit {
    private static String name;
    private static String color;

    public Fruit(String name, String color) {
        Fruit.color = color;
        Fruit.name = name;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:03:24.830

`fruitArray`如果您在应用程序的其他地方不需要中间件，则可以按如下方式简化代码：

```
String pairsStr = "apple red,banana yellow,orange orange,pear green,grape purple";
ArrayList<Fruit> fruits = new ArrayList<Fruit>();

String[] pairs = pairsStr.split(",");
for (String pairStr : pairs) {
    String[] pair = pairStr.split(" ");
    fruits.add(new Fruit(pair[0], pair[1]));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:07:43.920

我创建了以下示例并使用[compileonline](http://www.compileonline.com)对其进行了测试，没有任何问题。问题可能出在您的`Fruid`班级：

```
import java.util.ArrayList;

public class HelloWorld{
    public static void main(String []args){
        String fruitStr = "apple red,banana yellow,orange orange,pear green,grape purple";

        String[][] fruitArray = new String[5][];
        String[] fruitPairs = fruitStr.split(",");
        int r = 0;
        for (String fruitPair : fruitPairs) 
        {
            fruitArray[r++] = fruitPair.split(" ");
        }
        ArrayList<String> testList = new ArrayList<String>();
        for (String[] f : fruitArray)
        { 
            String testString = f[0] + " + " + f[1];
            System.out.println(testString);
            testList.add(testString);
        }
        for (String s: testList) {
            System.out.println(s);
        }
     }
} 
```

结果：

```
apple + red
banana + yellow
orange + orange
pear + green
grape + purple
apple + red
banana + yellow
orange + orange
pear + green
grape + purple 
```

# php - file_get_html() fetching plain text inside a div, but avoiding all other tags

> ID：15475146
> 
> 赞同：0
> 
> 时间：2013-03-18T10:57:00.313
> 
> 标签：php, html, file, get

i am using `file_get_html()` to get some external HTML, but i have a issue. I cannot seem to target text inside a div, while avoiding getting the rest of the content.

Lets say the layout is this:

```
<div class="post">
    <h1>Andromeda v1.4 – WordPress – The Beauty of Simplicity</h1>
    <div class="infos b20">
    <img class="post_img" src="/imagini/512b93babf84b.jpg" alt="Andromeda v1.4 – WordPress – The Beauty of Simplicity">
    <div style="width:610px; margin:10px 0; overflow:hidden; display:block;">
enter code here

    Andromeda is a clean theme with functional CMS and unique features. A massive pack of backend CMS options was created for this product to give you full control while creating and editing the site and its features. The main idea behind this theme was to create a something clean and simple, useful, nice looking and easy to modify.
    <p></p>
    <h6>Demo</h6>
    <code>http://themeforest.net/item/andromeda-wordpress-the-beauty-of-simplicity/107876</code>
    <h6>Download:</h6>
    <div class="link alert clearfix">
    <div class="link alert clearfix">
    <div class="link alert clearfix">
    <div class="link alert clearfix">
    <div class="link alert clearfix">
    <div class="link alert clearfix">
    <p></p>
    <ul id="social_post" class="clearfix sharingbtns">
    <div class="comments">
</div> 
```

If i do a

```
$text = $dom->find('div[class=post]');
$text = $text[0]->plaintext; 
```

I get all the content, I only want the text, inside the main div with the class post, and not all the other content.

What would be the best way to achive this?

Text and amount of other divs are variable, but the div class post, and the text will always be there, in the same position.

**EDIT:** To elaborate, i only want the text thats inside post, and has no tag

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:14:40.587

只是为了快速回答您而不检查它是否有效：

[http://simplehtmldom.sourceforge.net/manual_api.htm](http://simplehtmldom.sourceforge.net/manual_api.htm)

尝试这个：

```
 $text = $dom->find('div[class=post]');
 $text = $text[0]->innertext; 
```

或者：

```
 $text = $dom->find('div[class=post]');
 $text = $text[0]->outertext; 
```

顺便一提：

```
 <div style="width:610px; margin:10px 0; overflow:hidden; display:block;"> 
```

没有结束标签，因此您正在谈论的 DIV 内没有文本。请说清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T07:52:42.840

```
 $res = $html->find('div[class=post]',0)->plaintext; 
```

# vb.net - Extend the properties of datagridview and its cell

> ID：15475147
> 
> 赞同：0
> 
> 时间：2013-03-18T10:57:01.390
> 
> 标签：vb.net, winforms

I am working on the datagridview now days. And I have to assign some custom properties to the datagridview which I am able to do. problem comes when I want to extend the properties of the cell. for example I already have my custom textbox control which user can set the behaviour like if its numeric or alphanumeric, allow negative, allow decimals etc etc. which works fine. Now I want to include that textbox control in my extended grid. So user can set all those properties while adding columns.

First of all is it possible? If yes then any tutorial or help please.

thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:18:40.627

我不完全确定，所以你可能想继续寻找，但据我所知，你必须手动将文本框的每个属性设置为你想要的。您无法将所有单元格样式设置复制到文本框调用。

```
Public Sub funwithDGVs()
    Dim DataGridView1 As New DataGridView
    Dim DataGridViewCell1 As DataGridViewCell

    DataGridViewCell1.ForeColor = Color.Aquamarine
    DataGridView1.Item(0, 1).Style.ForeColor = DataGridViewCell1.ForeColor
    TextBox1.ForeColor = DataGridViewCell1.ForeColor

End Sub 
```

# c# - How to write a caching algorithm based on object size?

> ID：15475149
> 
> 赞同：0
> 
> 时间：2013-03-18T10:57:03.573
> 
> 标签：c#, algorithm, caching, memory-management, size

I'm trying to write a couple of caching algorithms but currently I'm stuck on an algorithm based on the size of an object in cache.

Based on the previous [questions](https://stackoverflow.com/questions/207592/getting-the-size-of-a-field-in-bytes-with-c-sharp#207605), I draw the conclusion that there is no good way to get the size of an object. So how is an algorithm based on object size supposed to work?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:03:14.550

您不能使用对象的大小来做到这一点，至少不能达到非常精确的精度。

您的选择是：

*   使用对象大小估计（例如基于序列化对象大小） - 这可能非常缓慢、低效且仅大致准确

*   使用某种计数器作为对象大小的指标，例如当你改变一个对象时，你增加或减少一个计数器来反映变化的大小

*   使用其他缓存标准，例如对象插入缓存的时间或对该对象的访问请求频率

# ios - 无法调整 viewController 的自动调整大小掩码

> ID：15475150
> 
> 赞同：0
> 
> 时间：2013-03-18T10:57:09.070
> 
> 标签：ios, objective-c, iphone-5, autoresizingmask

我正在尝试将我的应用程序调整为 iPhone 5，但遇到了一些困难。

![在此处输入图像描述](../Images/943d74be07bcf115cc7733858f9e6ac0.png)

1.  ContainerViewController 的标头（始终位于顶部）
2.  包含其他 ViewController 的 ContainerViewController
3.  侧边栏视图控制器
4.  内容视图控制器

因此，容器包含标题、侧边栏和内容视图。在内容视图中，我有 UINavigationController。我的问题是，当我使用 iPhone 5 时，它会改变所有应用程序的外观，即使我使用 Autoresizing Mask，它看起来也很糟糕，而且位置也不正确，我认为这可能是因为我创建了容器标题。

我这样设置：

![在此处输入图像描述](../Images/97d7a47cd93eb1c8c175c657191345a5.png)

这是一个将 UIScrollView 和 UIImageView 作为背景的视图示例：（注意 UIScrollView 和 UIImageView 的底部，它将它们推到视图之外。

iPhone 4：

![在此处输入图像描述](../Images/8713fce461aeecad0f786b06965983e3.png)

iphone 5：

![在此处输入图像描述](../Images/591bcb7a9d8a84a4b1fa44cfa3899551.png)

这是我第一次使用自动调整蒙版，所以请耐心等待。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:15:52.727

我不会在内心深处回答这个问题。您设置了错误的自动调整大小。以下是可行的方法。要处理 iPhone5 你只`UIViewAutoresizingFlexibleHeight`需要`autoresizingMask`

如果您想正确了解自动调整大小，请阅读[此内容](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html)

![对于容器视图](../Images/071a8fb2ace398f1af735244f1129e12.png) 对于集装箱

![对于页眉](../Images/819e2ba6f3be02d1114f4061dc2476ac.png) 对于页眉

![对于内容视图](../Images/b06c67a11c5581a41aa8e92b0df0f5df.png) 对于内容

![对于侧边栏](../Images/97f3db3c01a56ec3b590f9060a742f44.png) 对于侧栏

# sql - sql索引存储和定位行

> ID：15475157
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:57:30.733
> 
> 标签：sql, sql-server

我有一个关于一般 SQL 服务器如何存储其索引以及索引如何定位记录（行）的一般问题。在表上创建索引时，是否所有索引都存储在内存中？Sql server 启动时，是否所有索引都从磁盘加载到内存中？

另一个问题是，索引如何找到表中的行？是通过散列函数（例如找到索引）并将位置散列到磁盘上的某个位置吗？数据如何存储在磁盘中？按位置？这让我有点困惑，因为 Sql 服务器中的数据检索速度很快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:09:59.247

[聚集索引结构](http://msdn.microsoft.com/en-us/library/ms177443%28v=sql.105%29.aspx)中描述：

> 在 SQL Server 中，索引被组织为**B 树**。索引 B 树中的每一页称为索引节点。B树的顶端节点称为根节点。索引中最底层的节点称为叶节点。根节点和叶节点之间的任何索引级别统称为中间级别。在聚集索引中，叶节点包含基础表的数据页。根和中间级节点包含保存索引行的索引页。每个索引行包含一个键值和一个指向 B 树中的中间级别页面或索引叶级别中的数据行的指针。索引的每一级中的页面都链接在一个双向链表中。

[非聚集索引](http://msdn.microsoft.com/en-us/library/ms177484%28v=sql.105%29.aspx)的组织方式与 B 树类似：

> 非聚集索引与聚集索引具有相同的 B 树结构，但有以下显着差异：
> 
> *   基础表的数据行不会根据它们的非聚集键排序和存储。
> *   非聚集索引的叶层由索引页而不是数据页组成。

[B 树](http://en.wikipedia.org/wiki/B-tree)在 Wikipedia 中有描述：

> 在计算机科学中，B 树是一种树形数据结构，它保持数据的排序并允许在对数时间内进行搜索、顺序访问、插入和删除。B-tree 是二叉搜索树的推广，一个节点可以有两个以上的子节点

[Searching](http://en.wikipedia.org/wiki/B-tree#Search)主题描述了b-tree 搜索算法：

> 搜索类似于搜索二叉搜索树。从根开始，树从上到下递归遍历。在每一层，搜索选择其分隔值位于搜索值任一侧的子指针（子树）。二进制搜索通常（但不一定）在节点内使用以查找感兴趣的分离值和子树。

至于内存中的内容与磁盘上的内容，请阅读[缓冲区管理](http://msdn.microsoft.com/en-us/library/aa337525%28v=sql.105%29.aspx)：

> 缓冲区管理器管理从数据库磁盘文件读取数据或索引页到缓冲区高速缓存并将修改的页写回磁盘的功能。一个页面保留在缓冲区高速缓存中，直到缓冲区管理器需要缓冲区来读入更多数据。数据只有在被修改时才会写回磁盘。缓冲区高速缓存中的数据可以在写回磁盘之前多次修改。有关详细信息，请参阅[阅读页面](http://msdn.microsoft.com/en-us/library/ms191475%28v=sql.105%29.aspx)和[编写页面](http://msdn.microsoft.com/en-us/library/aa337560%28v=sql.105%29.aspx)。

# javascript - Adding a rounded similar to border-radius to outline

> ID：15475160
> 
> 赞同：2
> 
> 时间：2013-03-18T10:57:43.853
> 
> 标签：javascript, html, css

Using CSS3 I would like to know if there is any way to `create a rounded effect` to an `outline` property.

Maybe a CSS Hack or a JS option possible whitout using jQuery. The effect I would like to achive is similar looks like

```
border-radius: 10px; 
```

this is my code

```
.focus {
    outline:whitesmoke solid 3px; 
} 
```

I would need for webkit.

EDIT: After some research and how suggested, such property is not implemented in webkit.

# spring - 使用“in-bean”登录方法时 Spring 安全上下文中的不同主体

> ID：15475162
> 
> 赞同：4
> 
> 时间：2013-03-18T10:57:49.843
> 
> 标签：spring, spring-security, spring-3, spring-social

几天来，我一直致力于将 Facebook 与我们的应用程序集成。我已成功建立连接，现在在 Facebook 登录后，我将用户复制到我们的数据库，稍后我想**在 context 中使用我们的内部主体**。

* * *

对于 Spring 安全登录，我们用我们的类实现重载了**身份验证管理器**`UserDetailsService`。

当有人使用 facebook 登录时，他有他不知道的抽象凭据。我在我的 Facebook 登录控制器中使用了这个方法让他登录：

```
Authentication auth = new UsernamePasswordAuthenticationToken(
    profile.getId(), new Md5PasswordEncoder().encodePassword(
    profile.getEmail() + profile.getId(), null),
    (Collection<? extends GrantedAuthority>) getAuthorities(profile.getId())); 
```

* * *

**问题：**

在我使用的一些控制器中

`public String profile(Locale locale, Model model, HttpSession session, Principal principal)`然后`principal` **实际上包含不同的对象。**

*对于常规春季安全登录，其：*

`org.springframework.security.authentication.UsernamePasswordAuthenticationToken@4527d081: Principal: org.springframework.security.core.userdetails.User@586034f: Username: admin; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_ADMIN; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@21a2c: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: A5E9AB9E4AEE7486EC4B4F6133F77320; Granted Authorities: ROLE_ADMIN`

*但是在使用控制器中的方法登录后：* `org.springframework.security.authentication.UsernamePasswordAuthenticationToken@cd4699c5: Principal: 1405308431; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_CLIENT`

* * *

**问题：** 我真的不想在所有控制器中区分这些类型。为什么不一样？！当我们使用普通凭据登录时，它显然是一个用户（我的类型）对象，它只是 facebook 的一个字符串。**如何更改它，以便 facebook 登录也会在我的安全上下文中为我提供 User 对象？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:07:11.957

您需要按照本章末尾的说明设置[SignInAdapter](http://static.springsource.org/spring-social/docs/1.0.x/reference/html/signin.html#d4e851)。在该`SignInAdapter.signIn(...)`方法中，您可以从 DB 加载用户对象，然后准备身份验证对象并将其注入安全上下文持有者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:21:21.223

一开始我并没有真正得到“准备身份验证对象”，但这真的很容易；我发布此示例以供将来澄清*，也许有人会需要它*:)

```
public class FacebookAuthenticationToken extends AbstractAuthenticationToken 
{   
private final org.springframework.security.core.userdetails.UserDetails principal;
private String credentials;

public FacebookAuthenticationToken(org.springframework.security.core.userdetails.UserDetails details,FacebookProfile profile, Collection<? extends GrantedAuthority> authorities){
    super(authorities);
    this.principal = details;
    this.credentials = new Md5PasswordEncoder().encodePassword(profile.getEmail()+profile.getId(), null);
    super.setAuthenticated(true); // must use super, as we override
}

private static final long serialVersionUID = -7545290433068513777L;

public Object getCredentials() {
    return this.credentials;
}

public Object getPrincipal() {
    return this.principal;
}

} 
```

* * *

现在我明白我什至可以使用[UsernamePasswordAuthenticationToken](http://static.springsource.org/spring-security/site/docs/3.2.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html)，只需提供`Object principal`正确的类。傻我。

# knockout.js - Use Knockout 'submit' binding with child view model and inherited callback method

> ID：15475164
> 
> 赞同：0
> 
> 时间：2013-03-18T10:57:54.260
> 
> 标签：knockout.js, knockout-2.0

I'm trying to solve the following problem using Knockout JS

*   Need to bind a HTML form via "submit" binding to a child view model
*   The call back method bound to "submit" is an inherited method

The following code will explain the above scenario better. The same can be found in [this fiddle](http://jsfiddle.net/omegasilva/j6Brv/1/).

```
function MasterViewModel() {
    var self = this;
    self.employeeViewModel = new EmployeeViewModel();
};

function EmployeeViewModel () {
    var self = this;
    self.empFirstName = ko.observable();
    self.empLastName = ko.observable();
    self.employeeList = ko.observableArray([]);
};

EmployeeViewModel.prototype.addEmployee = function () {
    var self = this;
    self.employeeList.push(new Employee(self.empFirstName(), self.empLastName()));
}

function Employee(firstNameParam, lastNameParam) {
    var self = this;
    self.firstName = ko.observable(firstNameParam);
    self.lastName = ko.observable(lastNameParam);
}

ko.applyBindings(new MasterViewModel()); 
```

In HTML, I use the submit binding as shown below;

```
<form data-bind="submit: employeeViewModel.addEmployee">
</form> 
```

I've observed that always, the "this" context passed for the callback method is an instance of "MasterViewModel". I searched for a method of passing a different context with the "submit" binding, but in vain.

Is this a limitation that I'm trying to exploit, of is there a workaround?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:33:12.303

```
 <script type="text/javascript">
       var viewModel = {       
           numberOfClicks : ko.observable(0),       
           incrementClickCounter : function() {  
                 var previousCount = this.numberOfClicks(); 
                 this.numberOfClicks(previousCount + 1);    
            }  
       }; 
   </script> 
```

[http://knockoutjs.com/documentation/click-binding.html](http://knockoutjs.com/documentation/click-binding.html) 根据敲除文档，如果您还没有，您应该在脚本中定义增量 Click Counter 函数，这是您可以控制“this”值的地方

# javascript - Reading all object values in StackMob

> ID：15475171
> 
> 赞同：0
> 
> 时间：2013-03-18T10:58:16.057
> 
> 标签：javascript, json, stackmob

I've been using StackMob's fetch() function to retrieve all objects in my table, given by the fetch() method as a single `model` object. Each object has multiple attributes with corresponding values. I've then used `JSON.stringify(model)` to get this output:

```
{"0":{"attribute1":val1,"attribute2":"val2","attribute3":val3,"attribute4":"val4"},
"1":{"attribute1":val1,"attribute2":"val2","attribute3":val3,"attribute4":"val4"},
"2":{"attribute1":val1,"attribute2":"val2","attribute3":val3,"attribute4":"val4"} 
```

...and so on.

How can I print out just each of those values?

StackMob has a get() function that can be used as such:

```
var a_book = new Book({ 'title': 'The Complete Calvin and Hobbes', 'author': 'Bill Watterson' });
console.debug(a_book.get('title')); //prints out "The Complete Calvin and Hobbes" 
```

But I'm not sure how I would use it in my situation, where I'm retrieving all of the objects in my table, rather than creating a new object (as above).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:01:36.947

由于stackmob js sdk是建立在backbonejs上的，你可以声明一个集合，它可以包含你的“表”中的所有“行”，然后遍历集合以对“表”中的每个项目执行你想要的任何操作

```
var MyModel = StackMob.Model.extend({
        schemaName:'YOUR_SCHEMA_NAME'
    });

var MyCollection= StackMob.Collection.extend({
        model:MyModel
    });

var myCollection = new MyCollection();
myCollection.fetch({async: true});
myCollection.each(function(item){
                    //do something with item, maybe print
               }); 
```

# c++ - OpenCV 让用户选择打开图像

> ID：15475173
> 
> 赞同：1
> 
> 时间：2013-03-18T10:58:22.517
> 
> 标签：c++, opencv

我正在尝试在 opencv 中创建一个简单的图像处理器。到目前为止，我已经尝试使用此代码从文件中打开一组图像。

```
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main()
{
    Mat im = imread("c:/image.jpg");
    if (im.empty()) 
    {
        cout << "Cannot load image!" << endl;
        return -1;
    }
    imshow("Image", im);
    waitKey(0);
} 
```

由于这只允许打开设置的图像文件，我该如何修改它以允许用户选择图像？

这是可能的还是我只能从文件中加载一组图像？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:31:16.557

如果您希望您的程序仅在控制台中运行，请让用户输入图像文件的路径（或者可能正在使用命令行参数）。

如果你想让它成为 GUI 应用程序，（当你点击“打开文件”按钮时会出现一些花哨的窗口）那么你必须学习一些 GUI 编程。根据您的平台（Windows、Linux 等）选择一些 GUI 编程工具或选择跨平台（尝试 Qt）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:17:47.143

如果您希望用户能够浏览其计算机上的图像，您可以使用打开文件对话框。[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646829%28v=vs.85%29.aspx#open_file)找到示例。

# android - Signal Strength - asu

> ID：15475176
> 
> 赞同：0
> 
> 时间：2013-03-18T10:58:35.787
> 
> 标签：android

I have a problem regarding Signal strength value.
I want to put the signal strength value inside the onCreate function but it gives me zero value. But when I test it inside PhoneStateListener it gives me a value which is 7\. Any Idea? here is my code.

```
package com.example.activitylifecycle;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
public class ActivitySignal extends Activity {
  private static final String TAG = "ActivitySignal";
  private int signalAsu = 0;
  PhoneStateListener signalListener=new PhoneStateListener()
  {
    public void onSignalStrengthChanged(int asu)
    {
      Log.d(TAG, "SignalStrength: " + String.valueOf(asu)); // It gives me a value which is 7
      signalAsu = asu;
    }
  };

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  TelephonyManager SignalManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
  SignalManager.listen(signalListener,PhoneStateListener.LISTEN_SIGNAL_STRENGTH);
  //another log test
  Log.d(TAG, "SignalStrength: " + String.valueOf(signalAsu)); // zero value..
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:03:37.500

onCreate 已运行，并且您已在活动中将 signalAsu 设置为 0。因此，您的日志将显示为零，因为`signalAsu`尚未更改。忽略您的初始值为零，只听何时`onSignalStrengthChanged`调用，就像您处理日志一样。

# paypal - Is it mandatory to have paypal account to access existing sandbox account?

> ID：15475178
> 
> 赞同：2
> 
> 时间：2013-03-18T10:58:38.143
> 
> 标签：paypal, paypal-sandbox

I have an existing sandbox account where I have generated buttons for one of my client. But now I cannot login to my sandbox account.

I have read this thread

[Can't login to paypal sandbox](https://stackoverflow.com/questions/15461110/cant-login-to-paypal-sandbox)

1.  Go to developer.paypal.com

2.  Go to Applications

3.  Click on Sandbox accounts

4.  Choose Log In with PayPal (use your regular account - not the Sandbox one) (Optional) Import your old accounts from your former Sandbox account after the redirect to the accounts page

5.  Click on the account you want to log in to Choose "Sandbox site"
    Log in to that site using your test account

I have not got this and I don't have the **regular account** on paypal.

Anybody can help me to get my existing sandbox account?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:58:02.993

您必须使用您的 PayPal 帐户登录才能使用新的 PayPal 沙盒。

然后，您可以使用旧沙箱凭据将所有旧沙箱帐户导入新沙箱帐户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:55:18.813

*   您需要创建一个普通的 Paypal 帐户。
*   转到 developer.paypal.com 并使用新帐户登录。
*   转到应用程序 > 沙盒帐户 > 导入沙盒帐户。
*   您的旧沙盒帐户将被导入。

# c# - Decorating an enum on the EF object model with a Description attribute?

> ID：15475183
> 
> 赞同：3
> 
> 时间：2013-03-18T10:58:47.113
> 
> 标签：c#, entity-framework, entity-framework-5

I have defined an enum in my Entity Framework 5 model, which I'm using to define the type of a field on a table, e.g.

```
public enum PrivacyLevel : byte {
  Public = 1,
  FriendsOnly = 2,
  Private = 3,
} 
```

And I have a table `Publication` that has a `tinyint` field `PrivacyLevel`, which I've mapped in the EF model to use the `PrivacyLevel` type defined above, using the method described [here](https://stackoverflow.com/a/11595087/7850).

But I also want to be able to display a string description for each value of the enum. This I've done in the past for enums by decorating them with a Description attribute, e.g.

```
public enum PrivacyLevel : byte {
  [Description("Visible to everyone")]
  Public = 1,
  [Description("Only friends can view")]
  FriendsOnly = 2,
  [Description("Only I can view")]
  Private = 3,
} 
```

I've got some code that converts enums to strings by checking if they have a Description attribute, and that works well. But here, because I had to define the enum in my model, the underlying code is auto-generated, and I don't have anywhere stable to decorate them.

Any ideas for a workaround?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T15:25:07.747

不确定这是否是您所追求的，但据我了解，我会尽可能清楚，因为您有一个具体的数据库优先方法，您可以通过 AutoMapper 使用 Dto 方法将大部分实体模型抽象为 ViewModels。

使用自动映射器配置文件，您可以为各种环境和场景快速设置配置文件，以实现灵活性和适应性

所以这是给我带来问题的“枚举”

![](../Images/ca4e9ee638329ba42283ea7200fe936e.png)

这是我对此枚举的视图模型

![](../Images/b576ee20e678c0fd19f31fb0cf4f206b.png)

首先这是我的布局

![](../Images/228cb0fb7ec23fafa1567935f48230ee.png)

这是 Account 实体到 Account 视图模型的简单映射

```
public class AccountProfile : Profile
{
    protected override void Configure()
    {
        // Map from Entity object to a View Model we need or use
        // AutoMapper will automatically map any names that match it's conventions, ie properties from Entity to ViewModel have exact same name properties

        Mapper.CreateMap<Account, AccountViewModel>()
              .ForMember(model => model.CurrentPrivacy, opt => opt.MapFrom(account => (PrivacyLevelViewModel)account.PrivacyLevel));

        Mapper.CreateMap<Account, EditAccountViewModel>()
            .ForMember(model => model.SelectedPrivacyLevel, opt => opt.MapFrom(account => (PrivacyLevelViewModel) account.PrivacyLevel));

        // From our View Model Changes back to our entity

        Mapper.CreateMap<EditAccountViewModel, Account>()
              .ForMember(entity => entity.Id, opt => opt.Ignore()) // We dont change id's
              .ForMember(entity => entity.PrivacyLevel, opt => opt.MapFrom(viewModel => (PrivacyLevel)viewModel.NewSelectedPrivacyLevel));

    }

} 
```

请注意，这不一定适用于 MVC，它可以在 WPF 或其他不绑定到 Web 的应用程序中使用，但由于它是一种很好的解释方式，这就是我在此示例中使用 MVC 的原因。

当我第一次收到我的个人资料的 Http Get 请求时，我从数据库中获取实体并将我实际需要的任何内容映射到视图

```
public ActionResult Index()
{
    // Retrieve account from db
    var account = new Account() { Id = 1, Name = "Patrick", AboutMe = "I'm just another dude", ProfilePictureUrl = "", PrivacyLevel = PrivacyLevel.Private, Friends = new Collection<Account>() };
    // ViewModel abstracts the Entities and ensures behavour that only matters to the UI
    var accountViewModel = Mapper.Map<AccountViewModel>(account);

    return View(accountViewModel); // strongly typed view model
} 
```

所以我的个人资料索引视图可以使用我的枚举视图模型

![](../Images/c11c0a8d0c35bcf493b0f074e4ea484c.png)

这是输出

![](../Images/2f5838f44e0b06260ef0a9b1a1afc3b8.png)

现在，当我想更改我的隐私设置时，我可以创建一个新的 EditAccountViewModel，它允许我在下拉列表中提交一个新值

```
public class EditAccountViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string AboutMe { get; set; }
    public int NewSelectedPrivacyLevel { get; set; }
    public PrivacyLevelViewModel SelectedPrivacyLevel { get; set; }

    public SelectList PrivacyLevels
    {
        get
        {
            var items = Enum.GetValues(typeof (PrivacyLevelViewModel))
                .Cast<PrivacyLevelViewModel>()
                .Select(viewModel => new PrivacyLevelSelectItemViewModel()
                {
                    Text = viewModel.DescriptionAttr(),
                    Value = (int)viewModel,
                });

            //SelectPrivacyLevel was mapped by AutoMapper in the profile from 
            //original entity value to this viewmodel
            return new SelectList(items, "Value", "Text", (int) SelectedPrivacyLevel);
        }
    }
} 
```

![](../Images/55e9fd71d7846163c2aed25ed6888a06.png)

现在，一旦我发送了我的新更改值的帖子，有趣的部分是我如何使用更新的隐私设置修改数据库中的“真实”实体

在将表单提交回我的编辑操作时，您可以获得原始的真实数据库实体，然后如果 ViewModel 状态有效则合并更改

![](../Images/b63c48a8c3654f7fc7cdb1164fb56764.png)

AutoMapper 允许您配置 ViewModels 如何映射到实体，如果某些属性应该更改，从整数实体到视图模型的字符串值，也许您希望枚举真正成为“视图”中的字符串，并且只有枚举db，使用自动映射器，它允许您配置所有这些场景，并且通过约定，如果您的视图模型具有相同的属性名称/骆驼大小写到大写，则不需要配置“每个属性”。

![](../Images/28d70c984ccec5dc2eda17f4d8bad991.png)

最后，在您可以使用这些配置文件之前，您必须在应用程序入口点加载它们，例如 global.asax 或 Main。

AutoMapper 只需“配置”一次即可加载应用程序中定义的任何类型的配置文件。通过一些反射，您可以使用以下代码加载程序集中的所有配置文件：

```
public class AutoMapperConfig
{
    public static void RegisterConfig()
    {
        Mapper.Initialize(config => GetConfiguration(Mapper.Configuration));
    }

    private static void GetConfiguration(IConfiguration configuration)
    {
        configuration.AllowNullDestinationValues = true;
        configuration.AllowNullCollections = true;

        IEnumerable<Type> profiles = Assembly.GetExecutingAssembly().GetTypes().Where(type => typeof(Profile).IsAssignableFrom(type));

        foreach (var profile in profiles)
        {
            configuration.AddProfile(Activator.CreateInstance(profile) as Profile);
        }
    }
} 
```

我在 global.asax 中调用配置：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    AutoMapperConfig.RegisterConfig(); // AutoMapperConfig.cs
} 
```

有关如何使用 AutoMapper 以及它如何使您受益的更多信息，请参见此处：

[AutoMapper Github](https://github.com/AutoMapper/AutoMapper)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-20T14:39:26.620

最后我想出了一个更简单的解决方案：我只是使用了一个扩展方法来获取枚举的描述。这也使本地化变得更加容易，因此我可以使用资源字符串。

```
public static string Description(this PrivacyLevel level) {
  switch (level) {
    case PrivacyLevel.Public:
      return Resources.PrivacyPublic;
    case PrivacyLevel.FriendsOnly:
      return Resources.PrivacyFriendsOnly;
    case PrivacyLevel.Private:
      return Resources.PrivacyPrivate;
    default:
      throw new ArgumentOutOfRangeException("level");
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-21T16:22:02.650

其他一些想法：`byte PrivacyLevelByte`在您的 EF 课程中使用。`partial class`为您定义属性的特定模型创建附加

```
PrivacyLevel PrivacyLevelEnum
{
    get { return (PrivacyLevel)PrivacyLevelByte; }
    set { PrivacyLevelByte = (byte)value;}
} 
```

并在您的代码中定义`PrivacyLevel`枚举，而不是由 EF 设计器。这允许您处理任何属性，但仍为您提供 EF 模型上的枚举属性。

# php - Die($array['key']) 结果为“e”，而不是数组值

> ID：15475188
> 
> 赞同：-2
> 
> 时间：2013-03-18T10:59:15.780
> 
> 标签：php

我尝试使用以下命令运行 php 脚本：

```
die($postdata['entry.852552993']); 
```

$postadata 有一个名为 entry.852552993 的键。当我运行脚本时，我得到

```
e 
```

作为回应。

Print_r 渲染

```
entry.852552993=asdf&entry.369545365=asdf&entry.294310521=kristoffer%40nolgren.se&entry.1273939785=&entry.1493395350=&entry.120344222=&entry.333376545=&entry.79269841=Attending 
```

我想要的回应是`adsf`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:06:37.170

$postdata 是一个字符串。您需要将其转换为数组才能像您一样对其进行索引。

尝试这个：

```
$postdata = "entry.852552993=asdf&entry.369545365=asdf&entry.294310521=kristoffer%40nolgren.se&entry.1273939785=&entry.1493395350=&entry.120344222=&entry.333376545=&entry.79269841=Attending";

parse_str($postdata, $output);
//print_r($output);
echo $output['entry_852552993']; 
```

我发现 parse_str 将变量名中的点转换为下划线，因此`entry.85xxxxx`变为`$output['entry_85xxxxx']`

# c++ - 如何从外部参数中获取立体图像中的点

> ID：15475190
> 
> 赞同：0
> 
> 时间：2013-03-18T10:59:27.443
> 
> 标签：c++, opencv, stereo-3d

我已经校准了一对相机，知道它们的内在和外在参数。知道他们都在看平面，如果我在其中一个图像中定义了一些点，我怎样才能在另一张图像中得到这些点？

相机彼此非常接近，因此假设没有任何遮挡，两者都可以看到同一个物体。

是否有一个 openCV 函数或一组函数来执行此操作？我的观点是世界上的 Z=0。

基本上：

```
P_CAM1=(200,300) -> P_CAM2= ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:42:10.910

答案：

1.  不失真的图像。`cv::undistort`
2.  计算`P1ccdf = A^(-1)*P1`-> F=1 世界参考坐标中的 P1 点。
3.  为此计算世界参考点`Z=0`：
    *   计算世界上的光学中心坐标：Copt1=[0,0,0,1]T`Copt1w=-R1t*T1`
    *   计算 Coptw1 和 P1ccdf 之间的向量：使用一些数学 ->`V1w=R1T*P1ccdf`
    *   `Coptw1+lambda*V1w=[Pxw,Pyw,0]T`->`lambda=-cpotw(z)/V1(z)`
    *   `Coptw1+lambda*V1w=[Pxw,Pyw,0]T=P1w`
4.  保护世界点进入cam2
    *   `P1ccd2f = R2T2 *[Pxw Pyw 0 1]T`
    *   `P1ccd2f=P1ccd2f/P1ccd2f(3)`
    *   `P2=A2*P1ccd2f`

在哪里

*   `P`指点

*   `A`是[内在矩阵](http://en.wikipedia.org/wiki/Camera_resectioning)(4x4)

*   `RT`是[相机矩阵](http://en.wikipedia.org/wiki/Camera_matrix)（3x4）

# sql - SQL查询输出错误

> ID：15475191
> 
> 赞同：0
> 
> 时间：2013-03-18T10:59:33.827
> 
> 标签：sql, select, join, sql-order-by

我正在尝试制作一个 SQL 查询，它输出我的类别表中的每个类别。以及计算连接到类别的每个线程。现在，这很好，但是当我尝试添加一个新字段时，我需要在其中显示最新的线程日期时间，它出错了。

到目前为止，这是我的 SQL：

```
SELECT categories.category_name, 
       categories.category_id, 
       COUNT(threads.thread_category_id) AS 'threadCount', 
       threads.thread_datetime
FROM   categories LEFT OUTER JOIN 
       threads ON categories.category_id = threads.thread_category_id
GROUP BY categories.category_name, categories.category_id, threads.thread_datetime
ORDER BY threads.thread_datetime DESC 
```

*这导致以下结果：*

![在此处输入图像描述](../Images/85599e5618dd50cb713b8c99bc4ccacf.png)

但我真正希望它输出的是这个，还有一个字段，还有我的线程表中最新线程的 thread_datetime，基于 ORDER BY

![在此处输入图像描述](../Images/23f514bce4aaf6aac1f348aa274e0680.png)

我一直在尝试不同的 JOINS 以及许多其他资源。似乎找不到可行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:01:27.967

您可以使用`MAX()`获取每个组的最新日期。

尝试以下查询：

```
SELECT 
    categories.category_name, 
    categories.category_id, 
    COUNT(threads.thread_category_id) AS 'threadCount', 
    MAX(threads.thread_datetime)
FROM categories 
LEFT OUTER JOIN threads 
    ON categories.category_id = threads.thread_category_id
GROUP BY categories.category_name, categories.category_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:03:23.967

试试这个（已将日期时间从您的组移动到选择的聚合部分）

```
SELECT categories.category_name, categories.category_id, 
COUNT(threads.thread_category_id) AS 'threadCount', MAX(threads.thread_datetime)
FROM categories LEFT OUTER JOIN threads ON categories.category_id =     threads.thread_category_id
GROUP BY categories.category_name, categories.category_id
ORDER BY max(threads.thread_datetime) DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:04:32.193

就像是，

```
SELECT
                categories.category_name, 
                categories.category_id, 
                COUNT(threads.thread_category_id) AS 'threadCount'
    FROM 
                categories
        LEFT OUTER JOIN 
                threads 
                    ON categories.category_id = threads.thread_category_id
    GROUP BY 
                categories.category_name,
                categories.category_id
    ORDER BY 
                max(threads.thread_datetime) DESC 
```

# c# - FormatMessage 不允许？

> ID：15475194
> 
> 赞同：0
> 
> 时间：2013-03-18T10:59:36.600
> 
> 标签：c#, windows-store-apps

查看它说的[FormatMessage](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms679351%28v=vs.85%29.aspx)`Minimum supported client Windows XP [desktop apps | Windows Store apps]`的文档。

我编写了一个使用它的应用程序，并且在本地运行时运行良好。但是，当尝试验证它以提交到 Windows 应用商店时，它失败了，因为`FormatMessageA`不允许使用。

所以我的问题是，我错过了什么？是因为我在 PInvoking 吗？还是某些 API 仅允许在旁加载的应用程序中和/或用于调试目的，但不允许在真正的 Windows 应用商店应用程序中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:22:56.927

我认为答案在 FormatMessageA 的后缀“A”中。“A”表示文本的 ANSI 编码，但大多数现代应用程序使用 UNICODE。尝试改用 FormatMessageW。

# objective-c - 刷新配置文件时 Xcode 崩溃

> ID：15475196
> 
> 赞同：15
> 
> 时间：2013-03-18T10:59:37.660
> 
> 标签：objective-c, xcode, apple-push-notifications, provisioning-profile

上周我在[这里](https://stackoverflow.com/questions/15434296/xcode-crash-when-refreshing-provisioning-profiles?noredirect=1#comment21897014_15434296)发布了一个问题，我解释了为什么当我按下刷新按钮时我的 Xcode 崩溃了。然而，这个问题因离题而被关闭，但我真的不明白为什么。（Stackoverflow 应该提供有关此主题的更多信息）

但是我仍然遇到了这个问题，我无法通过推送通知运行我的应用程序，因为我认为我正在使用旧的配置文件并且我无法在没有 Xcode 崩溃的情况下刷新它们！

我已经创建了多个带有推送通知的应用程序，所以我知道过程但不断收到错误：

```
did Fail To Register For Remote Notifications With Error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0x2340a0 {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application} 
```

有谁知道为什么我的 Xcode 崩溃以及如何解决这个问题？谢谢。

如果您想结束这个问题，请发表评论，这样我就知道为什么这个问题被关闭了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T22:56:53.150

拉维是对的。这是Apple的官方解决方法：

运行 /Applications/Utilities/Terminal.app 并执行以下语句：

> mkdir ~/Library/Developer/Xcode/OldPortalDBs；mv ~/Library/Developer/Xcode/connect1.apple.com* ~/Library/Developer/Xcode/OldPortalDBs

请参阅：[Xcode 4.6.1 在与开发人员门户交互时崩溃](https://devforums.apple.com/thread/182876?tstart=0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T04:58:12.513

如果我在运行 XCode 4.6.1 之前删除了这个文件“~/Library/Developer/Xcode/connect1.apple.com 4.6.1.db”，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:26:25.530

在一些重新启动和项目清理（并手动下载！）之后，它突然与推送通知一起工作。Xcode 在刷新时仍然崩溃并报告错误。

# bash - 如何在shell脚本的while循环中检查带有通配符的文件

> ID：15475197
> 
> 赞同：2
> 
> 时间：2013-03-18T10:59:38.147
> 
> 标签：bash, shell, while-loop

我正在编写一个 bash shell 脚本，只要文件存在，我就想在其中实现睡眠序列。现在，在最简单的情况下，这类似于：

```
while [ -f fileName ]
do
echo "waiting"
sleep 1
done 
```

现在，在我的情况下，第一个问题如下：我想在文件名中使用通配符。这可以通过以下方式解决：

```
fileName="$path/$prefix*$suffix" 
while [ -f $fileName ]
    do
    echo "waiting"
    sleep 1
done 
```

但是，如果有多个文件与 fileName 匹配，则会失败

```
./testWait.sh: line 11: [: /home/nrc11/egsnrc/BEAM_TB_jaws/130318110457_s.lock: binary operator expected 
```

我该如何解决这个问题？

这是（半）特定示例：

```
#!/bin/bash -u

timeStamp="130318110457"
echo "prefix of files: $timeStamp"

beamDir=$(awk '{ print $0 }' $timeStamp/$timeStamp.beamDir)
file="$EGS_HOME$beamDir/$timeStamp*.lock" 

echo $file

while [ -f $file ]
do
    echo "waiting"
    sleep 1
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:22:36.013

您可以`grep`在扩展的通配符上使用来验证它在时间戳之后返回的不是星号：

```
while echo $file | grep "^$EGS_HOME$beamDir/$timeStamp"'[^*]' ; do
    echo "Waiting..."
    sleep 1
done 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T13:31:33.380

我对此非常了解，我很久以前就尝试过这样做，我使用了一些名为 inotify 的东西，这是 linux 中的一个包，尝试一下，它实际上让你的生活更轻松。

# caching - 什么应该用于内存Java缓存中的开源？

> ID：15475198
> 
> 赞同：0
> 
> 时间：2013-03-18T10:59:39.920
> 
> 标签：caching, in-memory, hazelcast

当缓存用于股票市场项目时，内存中的 Java 缓存应该使用什么（开源）？我使用了 hazelcast，但它消耗了太多内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:31:49.587

好吧，那里有一些不错的选择（我从未使用过榛树）。[EHCache](http://ehcache.org/)是一个非常好的选择。

虽然不是很健壮，但是一个好的基础肯定是`Guava`图书馆。或者您可以自己简单地构建一个 LRU 缓存。

如果内存是问题，您可以使用`ConcurrentHashMap`将键映射到它的`cached`值。[但是您可以使用Wea​​k Reference](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)包装该`cached`值。因此在更高的负载下，它将确保您的应用程序始终有足够的内存

# android - android从位图的arraylist转换为视频并显示它

> ID：15475199
> 
> 赞同：1
> 
> 时间：2013-03-18T10:59:42.877
> 
> 标签：android

现在的主要问题是我想在视频上添加效果我想到了将视频转换为位图添加效果然后再次返回但我无法再次将其返回到视频

任何帮助或任何其他方式在不使用 ffmpeg 的情况下添加视频效果

```
 public ArrayList<Bitmap> getFrames(Uri path) {
    try {
        bArray = new ArrayList<Bitmap>();
        bArray.clear();
        MediaMetadataRetriever mRetriever = new MediaMetadataRetriever();
        // mRetriever. setDataSource(path);
        mRetriever.setDataSource(this, path);
        for (int i = 0; i < 50; i++) {
            // time in msec 1000*i
            bArray.add(mRetriever.getFrameAtTime(10,
                    MediaMetadataRetriever.OPTION_CLOSEST));

        }
        return bArray;
    } catch (Exception e) {
        return null;
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:47:04.853

请注意微发送中的 getFrameatTime 的第一个参数。否则你仍然会得到第一帧的位图作为返回。也许您可以解码帧并像电影一样按顺序显示它们。

# web-services - OWL-S 和 Web 服务的语义相似度

> ID：15475201
> 
> 赞同：0
> 
> 时间：2013-03-18T10:59:43.683
> 
> 标签：web-services, wsdl, semantics, matching, owl

我目前正在处理 Web 服务的语义描述，更具体地说是 OWL-S。我不是手动编写注释，我使用这个工具。

我的观点不是注释本身，而是要知道 2 个 Web 服务有多接近。所以我的想法是尝试比较他们各自的 OWL-S 描述。

我正在寻找的可能是一个匹配器，一个允许我匹配两个 .owl 文件的 API（Java 或 Python）。

**更新**：这只是我的想法。如果您可以提出其他具有相同目的的建议，欢迎您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:06:20.567

你可以试试[LogMap](https://code.google.com/p/logmap-matcher/)，它是一个本体匹配的框架。您可以从[Web 界面](http://csu6325.cs.ox.ac.uk/)尝试。如有问题，您也可以直接联系该工具的作者。

# php - 通过 PHP 发送电子邮件的问题 - 配置问题

> ID：15475203
> 
> 赞同：0
> 
> 时间：2013-03-18T10:59:53.173
> 
> 标签：php, smtp

我在通过 php 发送邮件时遇到问题。我已经在 php.ini 中设置了 SMTP：

```
SMTP = xx.xxx.xxx.xx
smtp_port = 25 
```

我在 php 中发送一封包含以下代码的电子邮件：

```
// Set up parameters
$to = "xpto.87@gmail.com";
$subject = "Title";
$message = "Hello world";

// Send email
$mail = mail($to,$subject,$message);

// Inform the user
if($mail == true)
   echo "send mail";
else
   echo "dont send"; 
```

我得到了什么并且总是“不发送”，我不知道为什么。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:07:59.023

我已使用以下代码通过 GMAIL 成功从 PHP 发送电子邮件：

```
$from = "who";
$to = "to";
$subject = "subject";
$host = "ssl://smtp.gmail.com";
$port = 465;
$username = "yourusername";
$password = "yourpass";

$headers = array ('From' => $from, 'To' => $to, 'Subject' => $subject);
$smtp = Mail::factory('smtp',array ('host' => $host,
 'auth' => true,
 'port' => $port,
 'username' => $username,
 'password' => $password));

$mail = $smtp->send($to, $headers, $body); 
```

告诉我它是否适用于你的情况。

# android - android gps 通过使用 webview 或本机 api 和地图着色

> ID：15475207
> 
> 赞同：0
> 
> 时间：2013-03-18T11:00:02.323
> 
> 标签：android, webview, maps, native

大家好，我对 android GPS 和 android 地图有疑问。

1)我听说Android有webview和native API来显示地图？如果是这样，这是否意味着我在使用本机 API 时不需要互联网连接，甚至是否需要数据连接？

2）我可以改变地图的颜色让我们说道路路线它的显示像蓝色我想说让它变成红色是否可能？如果可以，请给我一些链接。

```
public class MainActivity extends Activity implements LocationListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LocationManager LocMgr = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener LocLis = this;
    LocMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, LocLis);
}

@Override
public void onLocationChanged(Location Loc) {
    Loc.getLatitude();
    Loc.getLongitude();

    Toast.makeText(getApplicationContext(), (int) Loc.getLatitude(), Toast.LENGTH_LONG).show();
}

@Override
public void onProviderDisabled(String provider) {
    Toast.makeText(getBaseContext(), "OFF", Toast.LENGTH_LONG).show();
}

@Override
public void onProviderEnabled(String provider) {
    Toast.makeText(getBaseContext(), "ON", Toast.LENGTH_LONG).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:06:24.473

事实上，您可以通过 web 和原生 api 显示地图。请参阅 webview 以下链接：* [https://developers.google.com/maps/articles/android_v3](https://developers.google.com/maps/articles/android_v3) Native 到： [https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

对于这两者，您都需要互联网连接，并且需要在 manifest.xml 中声明这一点

关于不同的颜色，请参见以下链接：* [http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

并且： [在“google maps android api v2”中更改道路颜色](https://stackoverflow.com/questions/14334389/change-roads-color-in-google-maps-android-api-v2?rq=1)

# deployment - msdeploy - 如果预同步失败，则停止在后同步中部署

> ID：15475210
> 
> 赞同：2
> 
> 时间：2013-03-18T11:00:17.043
> 
> 标签：deployment, web-deployment, msdeploy

我正在使用 msdeploy -presync 在 -postsync 部署之前在 IIS 中备份网站的当前部署，但是我最近遇到了 -presync 失败（由于缺少 dll 而引发警告）和 -postsync 继续的情况，并且覆盖了代码。

presync 和 postsync 都运行批处理文件。

显然这很糟糕，因为备份失败了，因此如果部署有错误或失败，则没有回退路线。

如果 presync 使用 msdeploy 引发警告，是否有停止 postsync 的方法？

也许这里的问题是预同步失败是作为警告而不是错误提出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T02:50:31.843

将设置为 0（成功返回代码约定）的 successReturnCodes 参数提供给预同步选项，例如：

-preSync:runCommand="你的脚本",successReturnCodes=0

更多信息请访问：[http ://technet.microsoft.com/en-us/library/ee619740(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ee619740(v=ws.10).aspx)

# iphone - uitableviewcell 上的 mpmovieplayer 控制器视图

> ID：15475211
> 
> 赞同：0
> 
> 时间：2013-03-18T11:00:39.343
> 
> 标签：iphone, ios, objective-c, uitableview, mpmovieplayercontroller

我想在 uitableviewcell 上播放视频。但点击播放器查看重启视频。我想单击视频播放器视图打开控制菜单并单击 uitableviewcell 重新启动视频。

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath{

    if (self.videoPlayer && [self.indexPath_k isEqual:indexPath]) {
        cell.imageView.userInteractionEnabled = YES;
        cell.imageView.image = [cell.imageView.image Resim_Skala:CGSizeMake(150, 100)];

        UIView *vieww = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 150, 100)];
        self.videoPlayer.view.frame = CGRectMake(0, 0, 150, 100);
        self.videoPlayer.view.userInteractionEnabled = YES;

        [vieww addSubview:self.videoPlayer.view];
        [cell.contentView addSubview:vieww];
   }else{

    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

            self.videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
           .....
           [self.videoPlayer play];
            [self.tableview reloadData];
} 
```

截屏：

[http://postimage.org/image/hafzjkjix/](http://postimage.org/image/hafzjkjix/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:02:06.747

实际上，这不是您提到的上述屏幕截图中的视频。**它实际上是该视频的缩略图，带有播放按钮**。每当您单击该单元格时，视频都会在新视图中打开。

{ .. 完全错误：默认情况下，Apple 不支持在 tableview 单元中播放视频。}

否则，您必须使用该功能创建自定义视图。

谢谢你

# php - 合并子数组以形成删除第一级的索引数组

> ID：15475213
> 
> 赞同：0
> 
> 时间：2013-03-18T11:00:40.310
> 
> 标签：php, arrays, multidimensional-array, array-merge

我有个问题。也许解决起来很简单。

有一个如下所示的数组：

```
(int) 0 => array(
    (int) 0 => array(
        'Post' => array(
            'name' => 'value'
        )
    )
),
(int) 1 => array(
    (int) 0 => array(
        'Post' => array(
            'name' => 'value'
        )
    ),
    (int) 1 => array(
        'Post' => array(
            'name' => 'value'
        )
    )
) 
```

这需要看起来像这样：

```
(int) 0 => array(
        'Post' => array(
            'name' => 'value'
        )
    )
(int) 1 => array(
        'Post' => array(
            'name' => 'value'
        )
    )
(int) 2 => array(
        'Post' => array(
            'name' => 'value'
        )
    ) 
```

`array_shift()`在那之后我直接尝试了`array_values()`，但那只给了我第一篇文章。

我假设顺序是“0, 0, 1”，所以 PHP 在第一个之后将其删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:03:42.710

```
$array = call_user_func_array('array_merge', $array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:12:06.867

这是我尝试过的..

```
 <?php
              $test = array(
                              array(array('post'=>array('name','value'))),
                              array(array('post'=>array('name','value')),array('post'=>array('name','value')),),
                           );
              print_r($test);

              $test_arr = array();

              foreach($test as $value)
              {
                 foreach($value as $subvalue)
                 {
                    $test_arr[] = $subvalue; 
                 }
              }

              print_r($test_arr);
              ?> 
```

# javascript - IE8/9 中的表单数据

> ID：15475215
> 
> 赞同：20
> 
> 时间：2013-03-18T11:00:43.387
> 
> 标签：javascript, xmlhttprequest, activexobject, form-data

我已经实现了这个脚本来使用 ajax 上传文件，它在除资源管理器之外的其他浏览器中完美运行，我注意到 IE9 和更少不支持 formData，在 IE 中有没有 formData 的替代品，我想使用干净的 javascript

```
 function doObjUploadExplorer(url, lnk_id, file, progress, success, content, frm, div_dlg, start_func){
    var file_input = null,
      frm_data = new FormData(),
      req;

    try {
        //firefox, chrome, safari etc
        req = new XMLHttpRequest();
    }

    catch (e) {
        // Internet Explorer Browsers
        req = new ActiveXObject("Microsoft.XMLHTTP");
    }

if (document.getElementById(file)) {
    file_input = document.getElementById(file);

    for (var i = 0; i < file_input.files.length; ++i) {
        frm_data.append(file, file_input.files[i]);
    }
}

req.upload.addEventListener('progress', function(e) {  //Event called while upload is in progress
    if (progress !== undefined
            && e.lengthComputable) {
        $('#' + progress).html('<font>Uploading... ' + Math.round((e.loaded / e.total) * 100) + '%</font>');
    }
});

req.upload.addEventListener('load', function(e) {  //Event called when upload is completed
    $('#' + progress).html('<font>Retrieving updated data...</font>');
});

req.upload.addEventListener('error', function(e) {  //Event called when an error is returned by the server
    alert('An error has occurred...');
});

req.addEventListener('readystatechange', function(e) {        
    if (this.readyState === 4) {
        if (this.status === 200) {
            if (content !== undefined) {
                $('#' + content).html(this.response);
            }

            if (success !== undefined) {
                showChkMark(success);
            }
        } else {
            console.log('Server replied with HTTP status: ' + this.status);
        }

        if (progress !== undefined) {
            $('#' + progress).hide();
        }

        if (div_dlg !== undefined) {
            $('#' + div_dlg).dialog('close');
        }

        $('#' + file)
        .attr('disabled', false)
        .val('');
    }
});

if (progress !== undefined) {
    $('#' + progress).show();
}

$('#' + file).attr('disabled', true);
url += (
        url.indexOf('?') === -1
        ? '?'
        : '&'
    );
url += 'lnk_id=' + lnk_id + '&file=' + file;
req.open('POST', url);
req.setRequestHeader('Cache-Control', 'no-cache');

if (start_func !== undefined) {
    start_func.apply();
    setTimeout(function() {
        req.send(frm_data);
    }, 500);
} else {
    req.send(frm_data);
}} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T12:01:45.367

IE 中的 FormData 仅受 IE10 支持，经过一些研究后，最好的解决方案（我认为）将使用 ajaxForm：[http](http://malsup.com/jquery/form/) ://malsup.com/jquery/form/在 IE8/9 中完美运行，不确定 IE7

# c# - 将子项动态添加到 WPF UserControl 并从 WinForm 处理其事件

> ID：15475224
> 
> 赞同：3
> 
> 时间：2013-03-18T11:01:15.167
> 
> 标签：c#, wpf

我有一个名为“xNavPanel”的简单 WPF userControl 包含一个面板。我使用“ElementHost”将此控件添加到 Winform 中。我有另一个名为“MainMenuButton”的 WPF 用户控件包含文本块。

来自 Winform；我在运行时动态地在“xNavPanel”中添加了许多“MainMenuButton”。我有一个方法可以遍历DataTable行和foreach行，将“MainMenuButton”添加到“xNavPanel”中，并向每个“MainMenuButton”添加一个事件处理程序。

问题是; 控件不调用处理程序！

```
public static void FillMenu(xNavPanel navPanel, DataTable Items)
{
    navPanel.MainPanel.Children.Clear(); //MainPanel is Panel inside UserControl

    MainMenuButton menuItem;
    foreach (DataRow dr in Items.Rows)
    {
        menuItem = SetMenuItem(dr);
        navPanel.MainPanel.Children.Add(menuItem);
    }
}
static MainMenuButton SetMenuItem(DataRow dr)
{
    MainMenuButton menuItem = new MainMenuButton();
    menuItem.Name = "MI_" + dr["FormName"].ToString();
    menuItem.MenuName.Text = dr["Name"].ToString(); //MenuName is TxBlock inside UserControl

    menuItem.MouseUp += new System.Windows.Input.MouseButtonEventHandler(menuItem_MouseUp);
    //menuItem.MouseUp += ((sender, e) => MessageBox.Show((sender as MainMenuButton).Name));

    return menuItem;
}
static void menuItem_MouseUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    MessageBox.Show((sender as MainMenuButton).Name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:37:59.540

我发现了问题
这个问题中的代码 100% 正常工作
，问题出在此代码中未包含的其他内容中。

# java - 所需捆绑包的状态已解决而不是活动

> ID：15475230
> 
> 赞同：0
> 
> 时间：2013-03-18T11:01:32.517
> 
> 标签：java, osgi, equinox, bnd

我有一个依赖于捆绑包 B 的捆绑包 A。当捆绑包 A 中的代码运行并从捆绑包 B 访问一个类时，捆绑包 B 的状态被解析（4）而不是活动（32）并且捆绑包 B 的激活器没有也跑。我认为捆绑 B 的清单有问题，但我不能完全发现它。

这是捆绑 B 的清单，由 bnd 生成。

```
Manifest-Version: 1.0
Export-Package: org.jboss.logging;uses:="org.osgi.framework,org.eclips
 e.equinox.log,org.jboss.logmanager,org.apache.log4j,org.slf4j.spi,org
 .slf4j";version="3.2.0.Beta1-SNAPSHOT"
Build-Timestamp: Sun, 17 Mar 2013 15:07:31 +0100
Tool: Bnd-0.0.357
Bundle-Name: JBoss Logging 3
Created-By: 1.7.0_10 (Oracle Corporation)
Bundle-Vendor: JBoss by Red Hat
Scm-Revision: 9e799bac390dbbf9c7cd55afe93dff9265fbed05
Bundle-Version: 3.2.0.Beta1-SNAPSHOT
Bnd-LastModified: 1363529254048
Bundle-ManifestVersion: 2
Bundle-Activator: org.jboss.logging.Activator
Bundle-Description: The JBoss Logging Framework
Bundle-License: http://www.apache.org/licenses/LICENSE-2.0.txt
Bundle-SymbolicName: org.jboss.logging.jboss-logging
Import-Package: org.apache.log4j;resolution:=optional,org.eclipse.equi
 nox.log;resolution:=optional;version="1.0",org.jboss.logging;version=
 "3.2",org.jboss.logmanager;resolution:=optional,org.osgi.framework;ve
 rsion="1.7",org.slf4j;resolution:=optional;version="1.6",org.slf4j.sp
 i;resolution:=optional;version="1.6"
Bundle-DocURL: http://www.jboss.org 
```

这是使用 PDE 生成的 bundle A 的清单。

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Sample-view
Bundle-SymbolicName: sample-view; singleton:=true
Bundle-Version: 1.0.0.qualifier
Require-Bundle: org.eclipse.core.runtime,
 org.eclipse.ui,
 org.jboss.logging.jboss-logging
Bundle-RequiredExecutionEnvironment: JavaSE-1.7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:21:11.987

叹。我打赌你在Equinox上运行。Eclipse 家伙以他们永恒的智慧决定不启动捆绑软件，因为担心它会使系统过载。在 Eclipse 中，尝试启动捆绑软件确实过于复杂。但是，在您的情况下，有一个简单的解决方案：OSGi 激活策略。这将在加载第一个类时启动您的包。只需添加到 B

```
Bundle-ActivationPolicy: lazy 
```

# c - 带有isdigit()验证的C数猜谜游戏

> ID：15475233
> 
> 赞同：0
> 
> 时间：2013-03-18T11:01:41.553
> 
> 标签：c, validation

我正在研究教科书中的一个挑战问题，我应该在其中生成一个 1-10 之间的随机数，让用户猜测，并使用 isdigit() 验证他们的响应。我（大部分）让程序与下面的代码一起工作。

我遇到的主要问题是使用 isdigit() 需要将输入存储为字符，然后我必须在比较之前对其进行转换，以便比较实际数字而不是数字的 ASCII 码。

所以我的问题是，由于此转换仅适用于数字 0 - 9，我如何更改代码以允许用户在生成的数字为 10 时成功猜测？或者，如果我希望游戏的范围在 1-100 之间，我将如何实现呢？如果我使用的可能范围大于 0-9，我可以不使用 isdigit() 验证输入吗？验证用户输入的更好方法是什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <time.h>

int main(void) {

  char buffer[10];
  char cGuess;
  char iNum;
  srand(time(NULL));

  iNum = (rand() % 10) + 1;

  printf("%d\n", iNum);
  printf("Please enter your guess: ");
  fgets(buffer, sizeof(buffer), stdin);
  sscanf(buffer, "%c", &cGuess);

  if (isdigit(cGuess)) 
  {
    cGuess = cGuess - '0';

    if (cGuess == iNum)
      printf("You guessed correctly!");
    else
    {
      if (cGuess > 0 && cGuess < 11)
        printf("You guessed wrong.");
      else
        printf("You did not enter a valid number.");
    }
  }
  else
    printf("You did not enter a correct number.");

return(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:19:15.967

您可以使用的返回值`scanf`来确定读取是否成功。所以，你的程序中有两条路径，读取成功和读取失败：

```
int guess;
if (scanf("%d", &guess) == 1)
{
    /* guess is read */
}
else
{
    /* guess is not read */
} 
```

在第一种情况下，您可以执行程序逻辑所说的任何事情。在这种`else`情况下，您必须弄清楚“问题是什么”以及“该怎么办”：

```
int guess;
if (scanf("%d", &guess) == 1)
{
    /* guess is read */
}
else
{
    if (feof(stdin) || ferror(stdin))
    {
        fprintf(stderr, "Unexpected end of input or I/O error\n");
        return EXIT_FAILURE;
    }
    /* if not file error, then the input wasn't a number */
    /* let's skip the current line. */
    while (!feof(stdin) && fgetc(stdin) != '\n');
} 
```

# javascript - 带有控制台示例的 signalR Web 应用程序

> ID：15475242
> 
> 赞同：0
> 
> 时间：2013-03-18T11:02:18.617
> 
> 标签：javascript, cross-domain, console-application, signalr

有没有关于如何将 SignalR 与控制台应用程序一起使用的示例？我已经阅读了 wiki，但我无法运行我的应用程序，我会告诉你我做了什么

服务器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.AspNet.SignalR;
using System.Threading.Tasks;
using System;
using Owin;
using Microsoft.AspNet.SignalR.Hubs;
using Microsoft.Owin.Hosting;

namespace SignalRChat.Server
{

    class Program
    {
        static void Main(string[] args)
        {
            string url = "http://localhost:8083";

            using (WebApplication.Start<Startup>(url)) {
                Console.WriteLine("Server running on {0}", url);
                Console.ReadLine();
            }
        }
    }

    class Startup
    {
         public void Configuration(IAppBuilder app)
         {
             app.MapHubs();
         }
    }
} 
```

集线器类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.AspNet.SignalR.Hubs;

namespace SignalRChat.Server
{
    public class ChatHub : Hub
    {
        public void Send(string message)
        {
            Clients.All.addMessage(message);
        }
    }
} 
```

客户：

```
<html>
    <head>
    <title>SignalR client</title>

    <script type="text/javascript" src="Scripts/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="Scripts/jquery.signalR-0.5.1.min.js"></script>
    <script type="text/javascript" src="http://localhost:8083/signalr/hubs"></script>

    <script type="text/javascript">
    $(function () {
        // Proxy created on the fly
        var myHub = $.connection.chatHub;
        // Start the connection
        $.connection.hub.url = 'http://localhost:8083/signalr';
        $.connection.hub.start().done(function () {
            alert("Now connected!");
        }).fail(function () {
            alert("Could not Connect!");
        });
    });
    </script>

    </head>
    <body>
        <ul id="messages"></ul>
    </body>
</html> 
```

我总是收到无法连接警报我的代码中是否有任何逻辑错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:29:20.633

请确保您在服务器和客户端上使用相同的 SignalR 版本 - 请使用 1.0 或 1.01，而不是 0.5x。

这个示例展示了如何在自托管和“它在我的机器上工作” [https://github.com/ChristianWeyer/SignalR-SimpleChat-NOUG](https://github.com/ChristianWeyer/SignalR-SimpleChat-NOUG)

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:32:20.760

我在设置跨域示例时遇到了类似的问题。这是我必须做的修复它。

**在客户端**

```
$(function () {
    var url = 'http://localhost:8083/signalr';

    // start connection on a different port
    $.connection(url).start().done(function () {
        var someHub = $.connection.someHub;

        $.connection.hub.logging = true;
        $.connection.hub.error(function () {
            console.error('An error occurred with the hub connection.');
        });

        // seems to be a bug in CORs signalR client library that
        // the URL host in the connection object is not passed through to the hub
        $.connection.hub.url = url;

        someHub.client.someFunction = function (message) {
            console.log(message);
        };

        // since you have set the `$.connection.hub.url` this now works
        $.connection.hub.start(function () {
            console.log('Connection Established.');
        });

    });
}); 
```

**在服务器端（有关更详细的服务器说明，请参见[此处）](https://github.com/SignalR/SignalR/wiki/Self-host)**

```
class Startup
{
    public void Configuration(IAppBuilder app)
    {
        // Don't forget to enable cross domaign
        app.MapHubs(new HubConfiguration { 
            EnableCrossDomain = true 
        });
    }
} 
```

# java - 如何让浏览器向本地 java 应用程序发送消息？

> ID：15475246
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:02:33.167
> 
> 标签：java, php, browser

当我单击网页上的一个按钮时，我希望浏览器向我的本地 Java 应用程序（由我自己编程）发送一条消息，该按钮也是我自己使用 php 编写的。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:10:36.213

这是错误的方式。您不会将信息从服务器发送到本地应用程序。您的本地应用程序应该从您的 Web 服务器获取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:10:43.957

本地 Java 应用程序可以实现网络服务器。那里有许多库，或者您可以使用[ServerSocket](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html) / [SSLServerSocket](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLServerSocket.html)来实现它的底层。服务器套接字应绑定到 localhost 以防止直接外部访问。

您可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)与此本地网络服务器进行通信。

特别注意身份验证，因为您访问的任何网站，都可以指示浏览器向本地网络服务器发送请求。

# image-processing - 在 Matlab 中裁剪图像感兴趣区域？

> ID：15475247
> 
> 赞同：1
> 
> 时间：2013-03-18T11:02:38.880
> 
> 标签：image-processing, matlab, matlab-cvst

Matlab 中是否有任何工具或有用的功能可用于从图像中裁剪兴趣区域。对于我的情况，我需要从图像中提取纹理区域。我可能会从中受益的有用项目是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:14:41.787

看`imcrop`和`roipoly`功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T17:45:55.510

如果您必须处理大量图像，请尝试使用计算机视觉系统工具箱中的[Training Image Labeler应用程序。](http://www.mathworks.com/help/vision/ug/label-images-for-classification-model-training.html)

# mysql - 在不使用代码服务器的情况下同时更新和转换列的值

> ID：15475248
> 
> 赞同：0
> 
> 时间：2013-03-18T11:02:42.437
> 
> 标签：mysql, sql

我有一个包含以下列的表格：

```
id   |   title  |   date
1    | Title A  | 15-06-2013
2    | Title B  | 25-06-2013
3    | Title C  | 05-07-2013
4    | Title D  | 19-09-2013 
```

现在我需要将`date`列更改为 Unix `timestamp`，所以它可以是这样的：

```
id   |   title  |   date
1    | Title A  | 1756346212
2    | Title B  | 1883216212
3    | Title C  | 1227346212
4    | Title D  | 1956436212 
```

我可以`update`在不使用代码服务器的情况下使用 SQL 语句同时处理和转换吗？作为代码服务器，我只需要这样做：

```
select each row => covert `date` to unix time stamp => update 
```

SQL语句会是这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:10:43.860

如果 date 是一个 varchar 列，并且您想将其转换为 unix 时间戳，我会这样做：

```
ALTER TABLE yourtable ADD COLUMN unixdate int;

UPDATE yourtable
SET unixdate = UNIX_TIMESTAMP(STR_TO_DATE(date, '%d-%m-%Y'));

ALTER TABLE yourtable DROP COLUMN date; 
```

请[在此处](http://sqlfiddle.com/#!2/e3680/1)查看小提琴。或者，如果你只需要一个 SELECT，你可以使用这个：

```
SELECT id, title, UNIX_TIMESTAMP(STR_TO_DATE(`date`, '%d-%m-%Y')) `date`
FROM yourtable 
```

# ios - 如何在警报通知上自动启动应用程序？

> ID：15475249
> 
> 赞同：0
> 
> 时间：2013-03-18T11:02:45.087
> 
> 标签：ios, uilocalnotification, nsnotificationcenter

我正在开发一个应用程序，它具有设置警报的功能，并且在警报时间将触发本地通知。

是否可以在没有用户交互的情况下在本地通知事件上打开应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:04:18.073

如果没有用户单击 UIAlertView 的按钮，您将无法打开应用程序。这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:05:07.870

你不能，至少不能在未越狱的手机上。正如您已经发现的，最接近的是本地通知。

# gwt - 使用 GWT 打印生成的 pdf

> ID：15475253
> 
> 赞同：1
> 
> 时间：2013-03-18T11:02:49.440
> 
> 标签：gwt, printing, jasper-reports

我可以使用 Window.open() 在新选项卡中打开生成的 jasper pdf 报告：

```
Window.open("report.pdf?traceCode=" + traceCode, "_BLANK", ""); 
```

如果我想通过单击按钮打印 pdf 文件，我应该怎么做？（Window.print() 将打印整个页面）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:14:38.850

您可以创建自己的类并单击应用程序中的打印按钮，通过使用本机打印方法，您可以调用 Window.Print()。

GWT UIObject 可用于此目的和方法，它将被转换为字符串。

```
public class NTPrint {
    /**
     * If true, use a Timer instead to print the internal frame
     */
    public static boolean USE_TIMER = true;

    /**
     * Time in seconds to wait before printing the internal frame when using Timer
     */
    public static int TIMER_DELAY = 1;

    public static native void it() /*-{ 
        $wnd.print(); 
    }-*/; 

    public static void it(String html) {
        try{
            buildFrame(html);
            if (USE_TIMER) {
                Timer timer = new Timer() {
                    public void run() {
                        printFrame();
                    }
                };
                timer.schedule(TIMER_DELAY * 1000);
            } else {
                printFrame();
            }
        }
        catch (Throwable exc) {
            CommonUtil.printStackTrace(exc);
            Window.alert(exc.getMessage());
        }
    }

    /**
     * This method will be called when you pass Widget without style.
     * @param uiObjects
     */
    public static void it( UIObject...uiObjects) { 
        StringBuffer objString= new StringBuffer();
        for(UIObject obj: uiObjects)
                objString.append(obj.toString());
            it("", objString.toString()); 
    } 
```

}

**OnClick 打印按钮，**

```
 /**
         * prints all forms
         * @param documentInfo
         */
        public static void printForms(List<FormTransaction> formTransactions, String documentInfo, List<CellTransaction> cellTransactionList, boolean isComment, Document document) {
                String style = "<link rel='styleSheet' type='text/css' href='v4workflow/css/style.css'>"
                                + "<link rel='styleSheet' type='text/css' href='v4workflow/css/gwtcontrols.css'>"
                                + "<style type='text/css' media='print'>"
                                + "@media print {"
                                + ".footerText{font-size:13px; font-weight:normal;margin-top:0px;}"
                                + ".break {page-break-after:always}"
                                + "}" + "</style>";
                List<UIObject> uiObjects = new ArrayList<UIObject>();
                NTPrintLayout printLayout = new NTPrintLayout();
                printLayout.setSelectedDocument(null);
                uiObjects.add(createHeader());
                NTPrint.it(style,uiObjects);
        }

 public static FlexTable createHeader(){
                FlexTable flexTable = new FlexTable();
                flexTable.setWidth("100%");
                return flexTable;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:24:39.853

如果该窗口包含非 HTML 页面，您将无法调用该窗口对象的 print() 方法（或任何其他方法）。

让用户[下载](https://stackoverflow.com/questions/12110090/send-a-file-from-server-to-client-in-gwt)文件。

也参考[这个](https://stackoverflow.com/questions/5382782/print-pass-a-file-reference-to-javascript-window-print-print-a-pdf-using-jav)

# android - Android背景颜色变化

> ID：15475255
> 
> 赞同：0
> 
> 时间：2013-03-18T11:03:00.837
> 
> 标签：android, android-layout

这是 XML 文件 blog.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:id="@+id/info"
    android:layout_height="wrap_content" 
    android:orientation="vertical"
    android:background="#FFFFFF">
    </LinearLayout> 
```

.java 文件

```
 super.onCreate(savedInstanceState);
        setContentView(R.layout.blog);
        View linearLayout =  findViewById(R.id.info);

        TextView valueTV = new TextView(this);
        valueTV.setText("hallo");
        valueTV.setId(5);
        valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

        ((LinearLayout) linearLayout).addView(valueTV);
    } 
```

这里我需要把整个Activity变成白色。但是在编译这个程序时，写的文本有白色背景。即“你好”字有白色背景。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:05:50.810

这是因为您`LinearLayout`在 XML 中的高度和宽度设置为`wrap_content`. 将此更改为`fill_parent`以填充整个活动。目前它只是包装`TextView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:06:18.860

改变

```
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
```

在你的 xml 中

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:07:33.330

用这个..

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:id="@+id/info"
    android:layout_height="fill_parent" 
    android:orientation="vertical"
    android:background="#FFFFFF">
    </LinearLayout> 
```

# eclipse - 如何解决在“一切都是最新的”拉取结果时推送被拒绝并被要求拉取的问题？

> ID：15475258
> 
> 赞同：12
> 
> 时间：2013-03-18T11:03:17.897
> 
> 标签：eclipse, git, egit

当我尝试将代码推送到远程存储库时，将 EGit 与 Eclipse 结合使用时，我收到一条错误消息，提示我应该首先拉取，如图[1](https://i.stack.imgur.com/dDag0.png)所示。

![尝试推送时出现错误对话框](../Images/71191788b42714a3cbde0149a87d9abc.png)

然后，当我尝试从远程存储库中提取时，我收到一条消息，指出一切都是最新的，如图[2](https://i.stack.imgur.com/LM6xE.png)所示。

![拉取后的消息对话框](../Images/120842db58c2f49305898773484fc2dd.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:50:21.813

确保：

*   您正在使用最新版本的 EGit (2.3+)
*   您在拉动之前已经隐藏/提交了所有内容（如在[此线程](http://www.eclipse.org/forums/index.php/mv/msg/367672/1014944/#msg_1014944)中）
*   您没有处于分离头模式（如“[无法使用 EGit 向上游推送](https://stackoverflow.com/a/12171567/6309)”）

* * *

[OP Krige](https://stackoverflow.com/users/334569/krige) [补充](https://stackoverflow.com/questions/15475258/how-to-fix-the-pushing-rejected-and-asked-to-pull-when-pulling-results-in-every/15476133#comment21914291_15476133)说：

> `DIRTY_WORKTREE`最后我注意到错误消息中提到了一个类文件。
> 我从文件系统中删除了该文件，进行了拉取，解决了冲突并推送。
> 现在一切似乎都很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T10:35:34.427

如果您有 DIRTY_WORKTREE 问题并且您无法删除文件（无论出于何种原因），您应该进行拉取，或者用 HEAD 替换，然后添加到 Index。这将解决冲突（假设使用合并工具），然后您应该能够提交/推送您的更改，或者再次拉取。

# objective-c - 如何使用自定义 NSButtonCell 以编程方式分配 NSButton 的子类？

> ID：15475259
> 
> 赞同：0
> 
> 时间：2013-03-18T11:03:18.463
> 
> 标签：objective-c, nsbutton, nsbuttoncell

我正在尝试创建`NSButton`that 的子类，`NSButtonCell`但我不能在代码中这样做！

这是我的 NSButonCell 子类，如果我在 IB 中创建按钮并直接在 IB 中设置他的单元格类，则效果很好：

```
#import "MyCustomCell.h"

@implementation MyCustomCell

- (void)drawImage:(NSImage*)image withFrame:(NSRect)frame inView:(NSView*)controlView
{
    NSGraphicsContext *ctx = [NSGraphicsContext currentContext];
    CGContextRef contextRef = [ctx graphicsPort];

    NSData *data = [image TIFFRepresentation];
    CGImageSourceRef source = CGImageSourceCreateWithData((CFDataRef)data, NULL);
    if(source) {
        CGImageRef imageRef = CGImageSourceCreateImageAtIndex(source, 0, NULL);
        CFRelease(source);

        CGContextSaveGState(contextRef);
        {
            NSRect rect = NSOffsetRect(frame, 0.0f, 1.0f);
            CGFloat white = [self isHighlighted] ? 0.2f : 0.35f;
            CGContextClipToMask(contextRef, NSRectToCGRect(rect), imageRef);
            [[NSColor colorWithDeviceWhite:white alpha:1.0f] setFill];
            NSRectFill(rect);
        } 
        CGContextRestoreGState(contextRef);

        CGContextSaveGState(contextRef);
        {
            NSRect rect = frame;
            CGContextClipToMask(contextRef, NSRectToCGRect(rect), imageRef);
            [[NSColor colorWithDeviceWhite:0.1f alpha:1.0f] setFill];
            NSRectFill(rect);
        } 
        CGContextRestoreGState(contextRef);        

        CFRelease(imageRef);
    }
 }

 - (void)drawBezelWithFrame:(NSRect)frame inView:(NSView *)controlView
 {
    NSGraphicsContext *ctx = [NSGraphicsContext currentContext];

    CGFloat roundedRadius = 3.0f;

    BOOL outer = YES;
    BOOL background = YES;
    BOOL stroke = YES;
    BOOL innerStroke = YES;

    if(outer) {
        [ctx saveGraphicsState];
        NSBezierPath *outerClip = [NSBezierPath bezierPathWithRoundedRect:frame   xRadius:roundedRadius yRadius:roundedRadius];
        [outerClip setClip];

        NSGradient *outerGradient = [[NSGradient alloc] initWithColorsAndLocations:
                                 [NSColor colorWithDeviceWhite:0.20f alpha:1.0f], 0.0f, 
                                 [NSColor colorWithDeviceWhite:0.21f alpha:1.0f], 1.0f, 
                                 nil];

        [outerGradient drawInRect:[outerClip bounds] angle:90.0f];
        [outerGradient release];
        [ctx restoreGraphicsState];
    }

    if(background) {
        [ctx saveGraphicsState];
        NSBezierPath *backgroundPath = [NSBezierPath bezierPathWithRoundedRect:NSInsetRect(frame, 2.0f, 2.0f) xRadius:roundedRadius yRadius:roundedRadius];
        [backgroundPath setClip];

        NSGradient *backgroundGradient = [[NSGradient alloc] initWithColorsAndLocations:
                                      [NSColor colorWithDeviceWhite:0.17f alpha:1.0f], 0.0f, 
                                      [NSColor colorWithDeviceWhite:0.20f alpha:1.0f], 0.12f, 
                                      [NSColor colorWithDeviceWhite:0.27f alpha:1.0f], 0.5f, 
                                      [NSColor colorWithDeviceWhite:0.30f alpha:1.0f], 0.5f, 
                                      [NSColor colorWithDeviceWhite:0.42f alpha:1.0f], 0.98f, 
                                      [NSColor colorWithDeviceWhite:0.50f alpha:1.0f], 1.0f, 
                                      nil];

        [backgroundGradient drawInRect:[backgroundPath bounds] angle:270.0f];
        [backgroundGradient release];
        [ctx restoreGraphicsState];
    }

    if(stroke) {
        [ctx saveGraphicsState];
        [[NSColor colorWithDeviceWhite:0.12f alpha:1.0f] setStroke];
        [[NSBezierPath bezierPathWithRoundedRect:NSInsetRect(frame, 1.5f, 1.5f) xRadius:roundedRadius yRadius:roundedRadius] stroke];
        [ctx restoreGraphicsState];
    }

    if(innerStroke) {
        [ctx saveGraphicsState];
        [[NSColor colorWithDeviceWhite:1.0f alpha:0.05f] setStroke];
        [[NSBezierPath bezierPathWithRoundedRect:NSInsetRect(frame, 2.5f, 2.5f) xRadius:roundedRadius yRadius:roundedRadius] stroke];
        [ctx restoreGraphicsState];        
    }

    if([self isHighlighted]) {
        [ctx saveGraphicsState];
        [[NSBezierPath bezierPathWithRoundedRect:NSInsetRect(frame, 2.0f, 2.0f) xRadius:roundedRadius yRadius:roundedRadius] setClip];
        [[NSColor colorWithCalibratedWhite:0.0f alpha:0.35] setFill];
        NSRectFillUsingOperation(frame, NSCompositeSourceOver);
        [ctx restoreGraphicsState];
    }
}

@end 
```

我还创建了一个`NSButton`使用它的自定义子类`NSButtonCell`

```
#import "myButton.h"
#import "MyCustomCell.h"

@implementation myButton

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        [self setCell:[[MyCustomCell alloc] init]];
        self.image = [NSImage imageNamed:@"add"];

    }

    return self;
}

@end 
```

但是当我在我的视图中创建这个按钮时，按钮的外观是默认的，而不是`NSButtonCell`子类的自定义样式。如果我在 IB 中设置单元格，一切都很好，但不是在代码中。有人有解决这个问题的想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:21:42.550

我了解如何解决问题。

调用按钮时需要设置边框样式`setBezelStyle`。使用这行代码，除了图像颠倒之外，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:18:52.560

您是否尝试过使用 cellClass 类方法？

```
+ (Class)cellClass {
    return MyCustomCell.class;
} 
```

# c# - 使用 HttpContext.Current.Session["Id"]

> ID：15475267
> 
> 赞同：3
> 
> 时间：2013-03-18T11:03:50.733
> 
> 标签：c#, web-services, session

`HttpContext.Current.Session["Id"]` 和仅使用列表来保存参数有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:04:39.543

会话可跨页面使用，另一方面，跨请求列表仅适用于一个请求。它们都可以存储对象，但它们具有不同的对象生命周期。

**编辑**：基于OP的评论

*   InProc 模式，将会话状态存储在 Web 服务器的内存中。这是默认设置。
*   StateServer 模式，它将会话状态存储在称为 ASP.NET 状态服务的单独进程中。这可确保在重新启动 Web 应用程序时保留会话状态，并且还使会话状态可用于 Web 场中的多个 Web 服务器。
*   SQLServer 模式将会话状态存储在 SQL Server 数据库中。这可确保在重新启动 Web 应用程序时保留会话状态，并且还使会话状态可用于 Web 场中的多个 Web 服务器。
*   自定义模式，可让您指定自定义存储提供程序。
*   关闭模式，禁用会话状态。[MSDN](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:04:52.173

ASP.NET 是无状态的。因此，如果您将内容存储在列表中，如果您希望该列表在该请求完成后可用，则需要将该列表保存在某处。

将每个请求视为对程序的新调用。如果您希望数据在调用中保持不变，那么您必须将其存储在某个地方。

# java - 短声音文件在 Netbeans 中播放，但不在 jar 中

> ID：15475276
> 
> 赞同：0
> 
> 时间：2013-03-18T11:04:19.450
> 
> 标签：java, audio

我正在开发一个彩票程序，该程序使用不同的间隔在循环中更新名称列表。对于每次更新，我都想播放一个简短的（300 毫秒）click.wav。当我在 Netbeans 中运行程序时，一切正常，但是当我构建 jar 时，它拒绝播放。奇怪的是，如果我通过在最后添加静音将声音延长到几秒钟，它会播放，但是时间完全关闭，它只有在循环运行 4-5 次后才开始播放。

我正在使用 thread.sleep() 来启动循环之间的暂停。虽然这可能不是最好的方法，但它肯定是最简单的，并且对于这个程序的范围无关紧要。我试过使用计时器，但声音仍然无法播放。

这是我播放 wav 文件的代码。

```
private static void play(String filename) {
    URL url = VinLotteri.class.getResource(filename);
    try {
        Clip clip = AudioSystem.getClip();
        clip.open(AudioSystem.getAudioInputStream(url));
        clip.start();
    } catch (LineUnavailableException | UnsupportedAudioFileException | IOException fail) {
    }
} 
```

这是循环代码。请忽略（或给予建设性的批评）任何与问题无关的错误代码。我只编程了几个月，所以可能有很多。

```
class StartTrekning extends SwingWorker<String, String> {

    private StartTrekning(List<String> navn, String vinner) {
    }

    @Override
    protected String doInBackground() {
        firstDraw = false;
        Random rnd = new Random();
        int v = 0;
        int vinnerID = -1;
        isRunning = true;
        int counterPluss = 0;
        int counterMinus = 0;

        int rand = rnd.nextInt(17) + 45; // Antall trekninger 45-61 
        //Setter opp ulik pause mellom hver trekning
        for (int i = rand; i > 0; i--) {
            if (i > 40) {
                v = 100;
            } else if (i > 35) {
                v = 150;
            } else if (i > 25) {
                v = 200;
            } else if (i > 20) {
                v = 250;
            } else if (i > 15) {
                v = 300;
            } else if (i > 10) {
                v = 400;
            } else if (i > 6) {
                v = 550;
            } else if (i > 3) {
                v = 800;
            } else if (i > 1) {
                v = 1200;
            } else if (i > 0 && rand > 53) {
                v = 2000;
            }

            play(click);
            vinnerID++;//Øker vinnerID, som gir index for navnelisten navn

            //"Loop-kode" (starter listen på nytt når den når slutten)
            if (vinnerID > navn.size() - 1) {
                vinnerID = 0;
            }
            vinner = navn.get(vinnerID);
            int pluss10 = vinnerID;
            int pluss9 = vinnerID;
            int pluss8 = vinnerID;
            int pluss7 = vinnerID;
            int pluss6 = vinnerID;
            int pluss5 = vinnerID;
            int pluss4 = vinnerID;
            int pluss3 = vinnerID;
            int pluss2 = vinnerID;
            int pluss1 = vinnerID;
            int minus1 = vinnerID;
            int minus2 = vinnerID;
            int minus3 = vinnerID;

            if (vinnerID > navn.size() - 11) {
                pluss10 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 10) {
                pluss9 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 9) {
                pluss8 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 8) {
                pluss7 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 7) {
                pluss6 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 6) {
                pluss5 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 5) {
                pluss4 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 4) {
                pluss3 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 3) {
                pluss2 = -10 + counterPluss;
            }
            if (vinnerID > navn.size() - 2) {
                pluss1 = -10 + counterPluss;
                counterPluss = 0;
            }
            if (vinnerID < 3) {
                minus3 = navn.size() + counterMinus;
            }
            if (vinnerID < 2) {
                minus2 = navn.size() + counterMinus;
            }
            if (vinnerID < 1) {
                minus1 = navn.size() + counterMinus;
            }
            if (vinnerID < 3) {
                counterMinus++;
            }
            if (vinnerID == 3) {
                counterMinus = 0;
            }
            if (vinnerID > navn.size() - 11) {
                counterPluss++;
            }
            //Slutt på "loop-kode"

            // Lager "rulleteksten"
            lblVinner.setText(vinner);
            lblHighlight1.setText(navn.get(minus1 - 1));
            lblHighlight2.setText(navn.get(minus2 - 2));
            lblHighlight3.setText(navn.get(minus3 - 3));
            lblHighlight7.setText(navn.get(pluss1 + 1));
            lblHighlight8.setText(navn.get(pluss2 + 2));
            lblHighlight9.setText(navn.get(pluss3 + 3));
            lblHighlight10.setText(navn.get(pluss4 + 4));
            lblHighlight11.setText(navn.get(pluss5 + 5));
            lblHighlight12.setText(navn.get(pluss6 + 6));
            lblHighlight13.setText(navn.get(pluss7 + 7));
            lblHighlight4.setText(navn.get(pluss8 + 8));
            lblHighlight5.setText(navn.get(pluss9 + 9));
            lblHighlight6.setText(navn.get(pluss10 + 10));
            try {
                Thread.sleep(v);
            } catch (InterruptedException ex) {
                Logger.getLogger(VinLotteri.class.getName()).log(Level.SEVERE, null, ex);
            }      
        }

        int rand1 = rnd.nextInt(100);
        //Legger inn en liten kunstpause
        if (rand1 < 50) {
            try {
                Thread.sleep(v);
            } catch (InterruptedException ex) {
                Logger.getLogger(VinLotteri.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
        panelVinner.append(idVinn + ". Trekning: " + vinner + "\n"); //Skriver ut vinneren
        play(fanfare);
        flashText(lblVinner, Color.WHITE, Color.BLUE, 270, 1650);
        vinnere.add(vinner); //Lager vinnerliste
        idVinn++;
        nyListe(vinnerID, vinner);
        isRunning = false;
        return null;
    } 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:13:16.527

好吧，经过（很多）更多的故障排除后，结果证明代码没有问题，尽管我仍然不知道到底出了什么问题。但我发现如果我从命令窗口运行 jar 文件，一切正常。如果我在 Windows 中双击同一个文件，就会出现声音问题。因此，它必须与文件在 Windows 中启动时的运行方式有关。

至少我现在可以通过从批处理文件或 Windows 快捷方式运行“java -jar myfile.jar”来使其在 Windows 中运行。

编辑：事实证明，在另一台计算机上运行时它工作正常。所以我的设置有些问题。我将尝试卸载并重新安装 JDK。

# css - 用于字体的 css less mixin

> ID：15475277
> 
> 赞同：1
> 
> 时间：2013-03-18T11:04:29.210
> 
> 标签：css, less

如果浏览器不支持 rem 使用 px，我正在尝试完成一个 mixin，用于基于 px 计算以 rem 为单位的字体大小。但是我有一个问题，如果我解析让我们说 16px 它将变成 value+pxpx。

主要问题是，如果我想在其他地方使用相同的变量，我不能，因为我必须在没有 px 或单位测量的情况下定义它。

如何让它传递包括单位测量在内的值并正确返回？

对于那些阅读速度很快并认为为什么不删除没有 px 的连接的人是行不通的。会变成 pxrem

```
.remCalc(@sizeValue) {
  @remValue: (@sizeValue / @font-size-base);
  font-size: ~"@{sizeValue}px";
  font-size: ~"@{remValue}rem";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:28:15.857

您可以使用[**unit()**函数](http://lesscss.org/)。

```
.remCalc(@sv) {
  @sizeValue: unit(@sv);
  @remValue: (@sizeValue / @font-size-base);
  font-size: unit(@sv,px);
  font-size: unit(@remValue,rem)";
} 
```

**例子：**

```
@sv: 10px; 
```

该功能可以剥离单元

```
unit(@sv); // 10 
```

或更改单位

```
unit(@sv,em); // 10em 
```

# java - 如何使用 lwjgl 的相机观察方向作为 z 方向

> ID：15475278
> 
> 赞同：1
> 
> 时间：2013-03-18T11:04:30.933
> 
> 标签：java, opengl, camera, positioning, lwjgl

我上周写了这台相机，一切正常，接受我不如何使用外观位置作为 Z 位置的事实。

如果你尝试一下，你会亲眼看到的。

```
import static java.lang.Math.cos;
import static java.lang.Math.sin;
import static java.lang.Math.toRadians;
import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.Sys;
import org.lwjgl.input.Keyboard;
import org.lwjgl.input.Mouse;

import org.lwjgl.util.vector.Vector3f;

public class Camera{
    private Vector3f    position    = null; //X, Y, Z position of the PandaCam
    private float       yaw         = 0.0f; //Yaw of the PandaCam
    private float       pitch       = 0.0f; //Pitch of the PandaCam

    private float dx = 0.0f, dy = 0.0f;

    private float multi = 0.005f;
    private float moveSpeed = 0.25f;
    private float mouseSensitivity = 0.02f;

    private float tDelta = getDelta();

    private long lastFrame, time;

    /**
     * Create a new PandaCam
     * default:
     * x = 0
     * y = 0
     * z = 0
     */
    public Camera(){
        position = new Vector3f(0, 0, 0);
    }

    /**
     * Create a new PandaCam
     * default:
     * z = 0
     * 
     * @param x Set the Starting X position of the camera
     * @param y Set the Starting Y position of the camera
     */
    public Camera(float x, float y){
        position = new Vector3f(x, y, 0);
    }

    /**
     * Create a new PandaCam
     * 
     * @param x Set the Starting X position of the camera
     * @param y Set the Starting Y position of the camera
     * @param z Set the Starting Z position of the camera
     */
    public Camera(float x, float y, float z){
        position = new Vector3f(x, y, z);
    }

    /**
     * Call this function every frame to update the PandaCam
     */
    public void update(){
        glLoadIdentity();

        mouseInput();
        keyboardInput();
        setPosition();
    }

    /**
     * @return Returns the delta time.
     */
    public int getDelta(){
        time = (Sys.getTime() * 1000) / Sys.getTimerResolution();
        int delta = (int) (time - lastFrame);
        lastFrame = time;

        return delta;
    }

    /**
     * Updates the PandaCam yaw
     * @param amount The amount the yaw moves. takes numbers below and above zero
     */
    public void yaw(float amount){
        yaw -= amount;
    }

    /**
     * Updates the PandaCam pitch
     * @param amount The amount the pitch moves. takes numbers below and above zero
     */
    public void pitch(float amount){
        pitch += amount;
    }

    /**
     * Moves the PandaCam forward.
     * @param distance The distance the camera move's forward
     */
    public void walkForward(float distance){
        calculatePosition(0, 0, multi * distance * 0.003f);
    }

    /**
     * Moves the PandaCam backward.
     * @param distance The distance the camera move's backward
     */
    public void walkBackwards(float distance){
        calculatePosition(0, 0, -multi * distance * 0.003f);
    }

    /**
     * Moves the PandaCam left.
     * @param distance The distance the camera move's left
     */
    public void strafeLeft(float distance){
        calculatePosition(multi * distance * 0.003f, 0, 0);
    }

    /**
     * Moves the PandaCam right.
     * @param distance The distance the camera move's right
     */
    public void strafeRight(float distance){
        calculatePosition(-multi * distance * 0.003f, 0, 0);
    }

    /**
     * Sets the PandaCam position
     * @param dx Is an amount that the PandaCam add's or subtracts from the current X
     * @param dy Is an amount that the PandaCam add's or subtracts from the current Y
     * @param dz Is an amount that the PandaCam add's or subtracts from the current Z
     */
    private void calculatePosition(float dx, float dy, float dz){
        position.x -= dx * (float) sin(toRadians(yaw - 90)) + dz * sin(toRadians(yaw));
        position.y += dy * (float) sin(toRadians(pitch - 90)) + dz * sin(toRadians(pitch));
        position.z += dx * (float) cos(toRadians(yaw - 90)) + dz * cos(toRadians(yaw));
    }    

    /**
     * Handles the keyboard input
     */
    public void keyboardInput(){
        //Move forward
        if (Keyboard.isKeyDown(Keyboard.KEY_W) || Keyboard.isKeyDown(Keyboard.KEY_UP)){
            walkForward(moveSpeed * (tDelta/10));
        }
        //Move backwards
        if (Keyboard.isKeyDown(Keyboard.KEY_S) || Keyboard.isKeyDown(Keyboard.KEY_DOWN)){
            walkBackwards(moveSpeed * (tDelta/10));
        }
        //Strafe left
        if (Keyboard.isKeyDown(Keyboard.KEY_A) || Keyboard.isKeyDown(Keyboard.KEY_LEFT)){
            strafeLeft(moveSpeed * (tDelta/10));
        }
        //Strafe right
        if (Keyboard.isKeyDown(Keyboard.KEY_D) || Keyboard.isKeyDown(Keyboard.KEY_RIGHT)){
            strafeRight(moveSpeed * (tDelta/10));
        }
    }
    /**
     * Handles mouse Input
     */
    public void mouseInput(){
        dx = Mouse.getDX();
        dy = Mouse.getDY();

        yaw(dx * mouseSensitivity);
        pitch(dy * mouseSensitivity);
    }

    /**
     * Sets the position of the PandaCam
     */
    public void setPosition(){
        //Rotate the pitch around the X axis
        glRotatef(-pitch, 1.0f, 0.0f, 0.0f);

        //Rotate the yaw around the Y axis
        glRotatef(-yaw, 0.0f, 1.0f, 0.0f);

        //translate to the position vector's location
        glTranslatef(position.x, position.y, position.z);

    }

    public float getMX(){
        return Mouse.getX();
    }
    public float getMY(){
        return Mouse.getY();
    }

    /**
     * @return The Pitch position of the PandaCam
     */
    public float getPitch(){
        return -pitch;
    }

    /**
     * @return The Yaw position of the PandaCam
     */
    public float getYaw(){
        return -yaw;
    }

    /**
     * @return The X position of the PandaCam
     */
    public float getX(){
        return position.x;
    }

    /**
     * @return The Y position of the PandaCam
     */
    public float getY(){
        return position.y;
    }

    /**
     * @return The Z position of the PandaCam
     */
    public float getZ(){
        return position.z;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:58:17.773

在 OpenGL 中，相机（视图）矩阵通常使用定义相机视图方向的 lookAt 方法构建。[这](http://www.opengl.org/archives/resources/faq/technical/lookat.cpp)是一个源，您可以在其中找到lookAt 方法实现。

或者这是我对有相机问题的人的[回答](https://stackoverflow.com/questions/14866325/opengl-3-lwjgl-lookat-matrix-confusion)，其中包括 LWJGL 查看示例代码:)

顺便说一句，如果您使用的是固定管道（似乎是这种情况），请查看：

[gluLookAt ()](http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml)

# javascript - 将 Knockout 与重复的用户控件一起使用

> ID：15475287
> 
> 赞同：1
> 
> 时间：2013-03-18T11:04:52.753
> 
> 标签：javascript, user-controls, knockout.js

我有一个包含游戏列表的网页。每个游戏都由一个用户控件呈现，其中包含一些保存游戏属性（时间、分数、玩家等）的标签。所以同一个用户控件在页面上重复了几次。数据每分钟都在变化，以支持游戏的实时共变。我希望使用淘汰赛来更新用户控件中的所有标签，但是由于每个用户控件都应该绑定到不同的游戏数据，并且用户控件不能拥有自己的视图模型，所以我不知道这种场景的最佳方法是什么. 我需要动态 ViewModel 和动态数据绑定属性之类的东西，但我找不到有关该主题的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:53:43.630

这是一个使用相同模板的[模板绑定](http://knockoutjs.com/documentation/template-binding.html)的演示。您可以在 JS 中看到数据是类型 a ，但我们在 HTML 中分别显示它们。`data``foreach``game`

**HTML**

```
<!-- ko if: favoriteGame -->
<h1>Favorite Game</h1>
<div data-bind="template: { name: 'gameTemplate', data: favoriteGame }"></div>
<!-- /ko -->

<h1>All Games</h1>
<div data-bind="template: { name: 'gameTemplate', foreach: games }"></div>

<script type="text/ko" id="gameTemplate">
<div>
    <span class="gameName" data-bind="text: name"></span>
    <span data-bind="text: publisher"></span>
    <input data-bind="value: score" />
    <button data-bind="click: $parent.favoriteGame">Favorite</button>
</div>
</script> 
```

**Javascript**

```
var Game = function(data) {
    this.name = ko.observable(data.name || "");
    this.publisher = ko.observable(data.publisher || "");
    this.score = ko.observable(data.score || 0);
};

var ViewModel = function(init) {
    var self = this;
    self.favoriteGame = ko.observable();
    self.games = ko.observableArray(ko.utils.arrayMap(init, function(g) {
        return new Game(g);
    }));
}; 
```

注意`click: $parent.favoriteGame`绑定直接选择喜欢的游戏。Knockout 将当前上下文作为第一个参数传递给函数绑定，并且由于 observable 是函数，因此这会直接更新 observable，而不需要包装函数。

[你可以在这个小提琴](http://jsfiddle.net/tyrsius/tNWvT/1/)中看看这个。它并不完全清楚你之后的位置，你的问题中没有任何代码。我希望这不会太远。

# delphi - RTL 和 VCL 内存泄漏

> ID：15475291
> 
> 赞同：2
> 
> 时间：2013-03-18T11:05:09.417
> 
> 标签：delphi, delphi-xe2, fastmm

我在*FullDebugMode*中使用 FastMM4来查找内存泄漏，我收到了很多关于`UnicodeString`, `TList`,`TParameters`等实例的投诉，如下所示：

```
A memory block has been leaked. The size is: 276
This block was allocated by thread 0x2928, and the stack trace (return addresses) at the time was:
404CFE [System][@GetMem$qqri]
408C0F [System][@NewUnicodeString$qqri]
408E40 [System][@UStrFromPWCharLen$qqrr20System.UnicodeStringpbi]
408F17 [System][InternalUStrFromPCharLen$qqrr20System.UnicodeStringpcii]
5C006B [Vcl.Themes][Themes.TUxThemeStyle.GetElementDetails$qqr27Vcl.Themes.TThemedScrollBar]
774861EF [GetWindowLongW]
74B6588B [Unknown function at DrawThemeParentBackground]
74B6586C [Unknown function at DrawThemeParentBackground]
74B6780B [Unknown function at OpenThemeData]
7748C5FE [Unknown function at gapfnScSendMessage]
77481B31 [Unknown function at PeekMessageA]

The block is currently used for an object of class: UnicodeString

A memory block has been leaked. The size is: 20    
This block was allocated by thread 0x2928, and the stack trace (return addresses) at the time was:
404CFE [System][@GetMem$qqri]
406EB3 [System][TObject.NewInstance$qqrv]
407556 [System][@ClassCreate$qqrpvzc]
406EE8 [System][TObject.$bctr$qqrv]
814DD8 [Datasnap.DBClient][Dbclient.TCustomClientDataSet.ClearActiveAggs$qqrv]
815359 [Datasnap.DBClient][Dbclient.TCustomClientDataSet.ResetAllAggs$qqro]
80D8AC [Datasnap.DBClient][Dbclient.TCustomClientDataSet.InternalOpen$qqrv]
6948D7 [Data.DB][Db.TDataSet.DoInternalOpen$qqrv]
69498F [Data.DB][Db.TDataSet.OpenCursor$qqro]
80CA87 [Datasnap.DBClient][Dbclient.TCustomClientDataSet.OpenCursor$qqro]
69484B [Data.DB][Db.TDataSet.SetActive$qqro]

The block is currently used for an object of class: TBits 
```

我目前的内存泄漏报告大约有两兆，而且它的大部分内容都是这样的。怎么了？我应该担心它们`RTL`的`VCL`内部结构和可能的内存泄漏吗？如果是，我能对他们做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T11:23:39.220

> 我是否应该担心 RTL 和 VCL 内部以及其中可能存在的内存泄漏？

可能不是。RTL/VCL 的最新版本是干净的。我没有遇到过他们的泄漏，尽管这并不是说你不会。

无论如何，您提供的报告看起来就像代码中的例行内存泄漏。当您的代码泄漏时，通常发生的情况是您创建了一个对象，然后未能销毁它。泄漏的对象可以拥有许多其他对象。它们都被 FastMM 跟踪并报告为明显的泄漏。因此，如果您创建一个包含字符串的对象，那么泄漏拥有的对象也会泄漏字符串。

# android - 重启后我的自定义日历消失了

> ID：15475298
> 
> 赞同：1
> 
> 时间：2013-03-18T11:05:25.860
> 
> 标签：android, calendar, provider, android-syncadapter

我正在编写一个应用程序以将 CalDav 和 SyncML 日历添加到日历提供程序数据库中，我可以添加它们，但我遇到了问题，因为当我重新启动时，我的日历消失了。

这是我添加日历的代码

```
private final CalendarEnvironmentProjection calEP = new CalendarEnvironmentProjection();

public long addCal(ContentResolver cr, String userName, String url,
            String accountType, String timeZone) {

        Log.v(DEBUG_TAG, "Start addCal");
        ContentValues values = new ContentValues();
        String accountName = userName + "@" + url.split("/")[2];
        Log.v(DEBUG_TAG, "Add values");
        values.put(
                this.calEP.eventProj(this.calEP.PROJECTION_SYNC_ACCOUNT_INDEX),
                accountName);
        values.put(this.calEP
                .eventProj(this.calEP.PROJECTION_SYNC_ACCOUNT_TYPE_INDEX),
                accountType);
        values.put(this.calEP.eventProj(this.calEP.PROJECTION_SYNC_NAME_INDEX),
                userName + " Calendar's");
        values.put(
                this.calEP.eventProj(this.calEP.PROJECTION_DISPLAY_NAME_INDEX),
                userName + " Calendar's");
        values.put(this.calEP.eventProj(this.calEP.PROJECTION_SYNC_ID_INDEX),
                url);
        values.put(
                this.calEP.eventProj(this.calEP.PROJECTION_SYNC_DIRTY_INDEX), 1);
        values.put(this.calEP.eventProj(this.calEP.PROJECTION_TIMEZONE_INDEX),
                timeZone);
        values.put(
                this.calEP.eventProj(this.calEP.PROJECTION_OWNER_ACCOUNT_INDEX),
                accountName);
        values.put(this.calEP
                .eventProj(this.calEP.PROJECTION_CALENDAR_ACCESS_LEVEL_INDEX),
                700);
        values.put(
                this.calEP.eventProj(this.calEP.PROJECTION_SYNC_EVENTS_INDEX),
                1);
        values.put(this.calEP
                .eventProj(this.calEP.PROJECTION_CALENDAR_COLOR_INDEX),
                Color.CYAN);

        Log.v(DEBUG_TAG, "Start insert");

        Uri creationUri = asSyncAdapter(
                Uri.parse("content://com.android.calendar/calendars"),
                accountName, accountType);
        Uri uri = cr.insert(creationUri, values);

        Log.v(DEBUG_TAG, "fin insert");
        long calID = Long.parseLong(uri.getLastPathSegment());

        Log.i(this.DEBUG_TAG, "Calendar add: " + calID);
        return calID;
    } 
```

这是我充当 syncAdapter 的代码：

```
 public CalendarDbAccessors(Context context, boolean autoInitialize) {
    super(context, autoInitialize);

}

@Override
public void onPerformSync(Account account, Bundle extras, String authority,
        ContentProviderClient provider, SyncResult syncResult) {

    Log.i(this.DEBUG_TAG, "onPerformSync()");
}

private Uri asSyncAdapter(Uri uri, String account, String accountType) {
    return uri
            .buildUpon()
            .appendQueryParameter("caller_is_syncadapter", "true")
            .appendQueryParameter(
                    this.calEP
                            .eventProj(this.calEP.PROJECTION_SYNC_ACCOUNT_INDEX),
                    account)
            .appendQueryParameter(
                    this.calEP
                            .eventProj(this.calEP.PROJECTION_SYNC_ACCOUNT_TYPE_INDEX),
                    accountType).build();
} 
```

这是我对数据库进行的投影环境：

```
public class CalendarEnvironmentProjection {
private String[] eventProj = null;
private final String DEBUG_TAG = "CalendarBD";

private static final String[] EVENT_PROJECTION_8 = new String[] {

"_id", // 0
        "_sync_account", // 1
        "_sync_account_type", // 2
        "name", // 3
        "displayName", // 4
        "_sync_id", // 5
        "_sync_dirty", // 6
        "timezone", // 7
        "ownerAccount", // 8
        "access_level", // 9
        "sync_events", // 10
        "color" // 11

};

@SuppressLint("InlinedApi")
private static final String[] EVENT_PROJECTION_14 = new String[] {

Calendars._ID, // 0
        Calendars.ACCOUNT_NAME, // 1
        Calendars.ACCOUNT_TYPE, // 2
        Calendars.NAME, // 3
        Calendars.CALENDAR_DISPLAY_NAME, // 4
        Calendars._SYNC_ID, // 5
        Calendars.DIRTY, // 6
        Calendars.CALENDAR_TIME_ZONE, // 7
        Calendars.OWNER_ACCOUNT, // 8
        Calendars.CALENDAR_ACCESS_LEVEL, // 9
        Calendars.SYNC_EVENTS, // 10
        Calendars.CALENDAR_COLOR // 11

};

// The indices for the projections arrays above.
protected final int PROJECTION_ID_INDEX = 0;
protected final int PROJECTION_SYNC_ACCOUNT_INDEX = 1;
protected final int PROJECTION_SYNC_ACCOUNT_TYPE_INDEX = 2;
protected final int PROJECTION_SYNC_NAME_INDEX = 3;
protected final int PROJECTION_DISPLAY_NAME_INDEX = 4;
protected final int PROJECTION_SYNC_ID_INDEX = 5;
protected final int PROJECTION_SYNC_DIRTY_INDEX = 6;
protected final int PROJECTION_TIMEZONE_INDEX = 7;
protected final int PROJECTION_OWNER_ACCOUNT_INDEX = 8;
protected final int PROJECTION_CALENDAR_ACCESS_LEVEL_INDEX = 9;
protected final int PROJECTION_SYNC_EVENTS_INDEX = 10;
protected final int PROJECTION_CALENDAR_COLOR_INDEX = 11;

public CalendarEnvironmentProjection() {

    if (Build.VERSION.SDK_INT >= 8 && Build.VERSION.SDK_INT < 14) {
        this.eventProj = EVENT_PROJECTION_8;
    } else if (Build.VERSION.SDK_INT >= 14) {
        this.eventProj = EVENT_PROJECTION_14;
    } else {
        Log.e(this.DEBUG_TAG, "Android version not supported !");

    }

}

protected String[] eventProj() {

    return this.eventProj;
}

protected String eventProj(int projectionIndex) {

    return this.eventProj[projectionIndex];
}} 
```

这是我添加到我的活动中的行：

```
<intent-filter>
        <action android:name="android.content.SyncAdapter" />
    </intent-filter>
    <meta-data android:name="android.content.SyncAdapter" android:resource="@xml/calendar_sync_adapter" /> 
```

这是我在 /res/xml 中的文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
   android:contentAuthority="com.android.calendar"
   android:accountType="com.google"
   android:userVisible="true"
/> 
```

# c++ - 从文件中读取和设置变量的更有效方法？

> ID：15475300
> 
> 赞同：0
> 
> 时间：2013-03-18T11:05:31.513
> 
> 标签：c++

有没有更好的方法让我从文件中读取值并相应地设置它们？我可以以某种方式从文件中读取变量名并在程序中相应地设置它吗？例如，读取 BitDepth 并将其设置为文件中所述的值？因此，我不必检查这条线是否是 BitDepth 然后将 bit_depth 设置为后面的值？

```
std::ifstream config (exec_path + "/Data/config.ini");
if (!config.good ()) SetStatus (EXIT_FAILURE);
while (!config.eof ()) {
    std::string tmp;
    std::getline (config, tmp);
    if (tmp.find ("=") != 1) {
        if (!tmp.substr (0, tmp.find (" ")).compare ("BitDepth")) {
            tmp = tmp.substr (tmp.find_last_of (" ") + 1, tmp.length ());
            bit_depth = atoi (tmp.c_str ());
        } else if (!tmp.substr (0, tmp.find (" ")).compare ("WindowWidth")) {
            tmp = tmp.substr (tmp.find_last_of (" ") + 1, tmp.length ());
            screen_width = atoi (tmp.c_str ());
        } else if (!tmp.substr (0, tmp.find (" ")).compare ("WindowHeight")) {
            tmp = tmp.substr (tmp.find_last_of (" ") + 1, tmp.length ());
            screen_height = atoi (tmp.c_str ());
        }
    }
} 
```

配置文件

```
[Display]
BitDepth = 32
WindowWidth = 853
WindowHeight = 480 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:14:51.240

您可以使用`std::map`使这种方法更加灵活。另请注意，与其检查 erturn 的值，`config.eof()`不如直接检查以下的返回值`std::getline`：

```
std::map<std::string, int> myConfig;

std::string line, key, delim;
while (std::getline(config, line))
{
    // skip empty lines:
    if (line.empty()) continue;

    // construct stream and extract tokens from it:
    std::string key, delim;
    int val;
    if (!(std::istringstream(line) >> key >> delim >> val) || delim != "=")
        break; // TODO: reading from the config failed 

    // store the new key-value config record:
    myConfig[key] = val;
} 
```

当配置行之一的解析失败时，您将如何处理这种情况取决于您：)

# php - 如何在 MySQL Php 中为多个表运行显示列查询

> ID：15475301
> 
> 赞同：1
> 
> 时间：2013-03-18T11:05:37.557
> 
> 标签：php, mysql

当我运行以下查询时，我有一个非常简单的问题

```
 SHOW COLUMNS FROM `mytable` /*Its works*/ 
```

但是当我运行这个

```
 SHOW COLUMNS FROM `mytable`, `mytable2` /*It doesnt work*/ 
```

有人可以告诉我如何在 mysql php 中运行 Show column query for Two or more than two tables

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:09:05.877

`SHOW COLUMNS`显示有关**给定表中的列的信息。**

简短的回答是否定的，但长的回答是：“是的，如果您安装了`information_schema`数据库。

**`[Information Scheme](http://dev.mysql.com/doc/refman/5.1/en/columns-table.html)`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:15:59.220

```
SELECT COLUMN_NAME FROM `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE `TABLE_SCHEMA` = 'database' 
AND (TABLE_NAME ='my_table' OR TABLE_NAME = 'my_table2') 
```

其中“数据库”是您的数据库名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:11:15.163

```
SHOW COLUMNS FROM yourtable FROM yourdb; 
```

COLUMNS 仅适用于给定的表。使用 MySQL 5 中的 info_schema 表

# ios - 无法为 iOS 编译 ffmpeg

> ID：15475302
> 
> 赞同：1
> 
> 时间：2013-03-18T11:05:39.447
> 
> 标签：ios, ffmpeg

[我正在尝试按照此处的教程](http://www.tangentsoftworks.com/blog/2012/11/12/how-to-prepare-your-mac-for-ios-development-with-ffmpeg-libraries/)为 iOS 编译 FFmpeg（对于 iPhone5，以便进行一些 RSTP 流媒体处理），但我遇到了这个错误：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc is unable to create an executable file.
C compiler test failed. 
```

在我的 config.log 文件中，我有这个：

```
BEGIN /var/folders/9g/zv_vdz7x16g1hgx9pqj57zz80000gn/T//ffconf.D3a73otQ.c
        1   int main(void){ return 0; }
END /var/folders/9g/zv_vdz7x16g1hgx9pqj57zz80000gn/T//ffconf.D3a73otQ.c
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -arch armv7 -mfpu=neon -miphoneos-version-min=6.0 -mcpu=cortex-a9 -c -o /var/folders/9g/zv_vdz7x16g1hgx9pqj57zz80000gn/T//ffconf.Wv4eZtHX.o /var/folders/9g/zv_vdz7x16g1hgx9pqj57zz80000gn/T//ffconf.D3a73otQ.c
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -miphoneos-version-min=6.0 --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -o /var/folders/9g/zv_vdz7x16g1hgx9pqj57zz80000gn/T//ffconf.y84bbrJt /var/folders/9g/zv_vdz7x16g1hgx9pqj57zz80000gn/T//ffconf.Wv4eZtHX.o
ld: library not found for -lcrt1.3.1.o
collect2: ld returned 1 exit status
C compiler test failed. 
```

我在 stackoverflow 或谷歌上发现的其他脚本有其他错误

任何的想法 ？

* * *

好的（我在mac环境上有点新），我设法通过将sdk目标修复到我拥有的最后一个sdk（6.1）来通过配置步骤，删除其他链接器标志但是“make”命令充满了错误（使用 gcc 或 arm-apple-darwin10-gcc-4.2) ：

```
In file included from ./libavutil/internal.h:113,
                 from ./libavutil/common.h:385,
                 from ./libavutil/avutil.h:238,
                 from libavdevice/version.h:28,
                 from libavdevice/avdevice.h:22,
                 from libavdevice/alldevices.c:22:
./libavutil/libm.h:53: error: static declaration of ‘cbrt’ follows non-static declaration
./libavutil/libm.h:60: error: static declaration of ‘cbrtf’ follows non-static declaration
./libavutil/libm.h:86: error: expected identifier or ‘(’ before ‘sizeof’
./libavutil/libm.h:96: error: expected identifier or ‘(’ before ‘sizeof’
./libavutil/libm.h:142: error: static declaration of ‘rint’ follows non-static declaration
./libavutil/libm.h:149: error: static declaration of ‘lrint’ follows non-static declaration
./libavutil/libm.h:156: error: static declaration of ‘lrintf’ follows non-static declaration
./libavutil/libm.h:163: error: static declaration of ‘round’ follows non-static declaration
./libavutil/libm.h:170: error: static declaration of ‘roundf’ follows non-static declaration
./libavutil/libm.h:177: error: static declaration of ‘trunc’ follows non-static declaration
./libavutil/libm.h:184: error: static declaration of ‘truncf’ follows non-static declaration
make: *** [libavdevice/alldevices.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T10:22:32.060

```
./configure --disable-doc --disable-ffmpeg --disable-ffplay --disable-ffserver --enable-cross-compile --arch=arm --target-os=darwin --cc=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc --as='/usr/local/bin/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc' --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk --cpu=cortex-a8 --extra-cflags='-arch armv7' --extra-ldflags='-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk' --enable-pic --enable-decoder=rawvideo --disable-asm 
```

您还必须关心“--as=/usr/local/bin/gas-preprocessor.pl”或“.../SDKs/iPhoneOS6.1.sdk”之类的路径，并将它们调整为您自己的路径/SDK

# javascript - 为什么 jQuery 更改事件不适用于选择选项？

> ID：15475305
> 
> 赞同：1
> 
> 时间：2013-03-18T11:05:46.483
> 
> 标签：javascript, html, events, jquery

当第一个选择元素 (id=ANSWER.TTQ.MENSYS.9.) 中的值发生更改时，以下代码应启用第二个选择元素 (id=ANSWER.TTQ.MENSYS.8.)，但它不起作用并且我已经用尽了所有我能想到的选项，包括那些已经在这个网站上建议的选项。**（注意：元素 id 必须是这些值，因此我没有使用 # 来选择它们，因为这不起作用）。**

```
$(document).ready(function() {

 $("input[id='ANSWER.TTQ.MENSYS.9.']").bind('change',function() {
   alert ('this script runs');  
   $("input[id='ANSWER.TTQ.MENSYS.8.']").removeAttr('disabled');

 });
}); 
```

如果我用按钮替换启用的选择（id=ANSWER.TTQ.MENSYS.9.），用点击事件替换更改事件；有用。那么为什么不在选择元素上使用更改事件呢？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:10:05.323

首先，您可以`id`使用`#`字符进行选择。其次，您需要转义`.`in`id`属性，否则选择器引擎将查找具有 id 的元素，该元素`ANSWER`也具有`TTQ`,`MENSYS`并且`9`作为类。试试这个：

```
$("#ANSWER\\.TTQ\\.MENSYS\\.9\\.").bind('change', function () {
    alert('this script runs');
    $("#ANSWER\\.TTQ\\.MENSYS\\.8\\.").removeAttr('disabled');
}); 
```

[**示例小提琴**](http://jsfiddle.net/cFKuG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:09:16.513

```
$(document).ready(function() {

 $("#ANSWER.TTQ.MENSYS.9.").bind('change',function() {
   alert ('this script runs');  
   $("#ANSWER.TTQ.MENSYS.8.").removeAttr('disabled');

 });
}); 
```

`select`不是`input`（即文本输入）

# mysql - Phing pdosqlexec 分段错误

> ID：15475308
> 
> 赞同：0
> 
> 时间：2013-03-18T11:05:58.837
> 
> 标签：mysql, database, dump, phing

当我尝试执行此操作时

```
<pdosqlexec 
    url="${pdo_driver}:host=${host};dbname=${db.name};" 
    userid="${mysql_user}" 
    password="${mysql_pwd}" 
    encoding="utf8" 
    onerror="abort">
    <fileset dir="./cache/mysql/">
        <include name="dump.sql"/>
    </fileset>
    <formatter type="plain" outfile="./cache/mysql/output4.txt"/>
</pdosqlexec> 
```

我遇到分段错误，dump.sql 的加载被中断。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:26:39.050

您可以尝试将**delimitertype="row"**选项添加到**pdosqlexec**。对我来说，这个解决方案有助于加载大于 4 MB 的文件

完整的使用示例

```
<pdosqlexec
    url="mysql:host=${DB_HOST};dbname=${DB_NAME}"
    userid="${DB_USER}"
    password="${DB_PASS}"
    delimitertype="row">
        <transaction src="${DB_SCHEMA_PATH}/notus-backend.sql"/>
        <formatter type="plain" outfile="${LOG_PATH}/phing.CreateTables.log"/>
</pdosqlexec> 
```

# c - 如何编写单个makefile，c文件在src，h文件在inc文件夹中？

> ID：15475310
> 
> 赞同：2
> 
> 时间：2013-03-18T11:06:10.863
> 
> 标签：c, makefile, gnu-make

我正在尝试编写一个 makefile，它应该从 src/ 中选择源代码，并从 inc/ 中选择头文件

**~/Linuz/src: 1.c, 2.c, 3.c ...**

**~/Linuz/inc: abc.h, dyz.h**

请帮我创建一个makefile，它应该可以在

**~/Linuz/some_other_dir/Makefile**

PS：尝试为我的 linux 机器编译它。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:18:25.417

```
all: my_program

%.o: ../src/%.c
    $(CC) $(CFLAGS) -I../inc/ -c -o $@ $^

my_program: 1.o 2.o 3.o 
    $(CC) $(LDFLAGS) -o $@ $^

clean:
    rm -f *.o my_program 
```

如果您将 Makefile 放在**~/Linuz/some_other_dir/**中，则以下规则

```
%.o: ../src/%.c 
```

将从文件`../src/`夹 ( **~/Linuz/src/** ) 中获取 c 文件，并在 Makefile 的同一文件夹中创建对象 (*.o) 文件。

该`-I../inc/`选项意味着 makefile 可以从`../inc/`文件夹 ( **~/Linuz/inc/** ) 中获取头文件。

该`my_program: 1.o 2.o 3.o`规则意味着 makefile 将在 Makefile 的同一目录中从目标文件创建二进制文件`1.o`，`2.o`并且`3.o`

从[制作手册](http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html#Automatic-Variables)：

> **$^** 所有先决条件的名称，它们之间有空格。对于存档成员的先决条件，仅使用命名的成员（请参阅存档）。目标对其依赖的每个其他文件只有一个先决条件，无论每个文件被列为先决条件多少次。因此，如果您为某个目标多次列出先决条件，则 $^ 的值仅包含该名称的一个副本。此列表不包含任何仅订购的先决条件；对于那些看到 `$|' 变量，下面。
> 
> **$@** 规则目标的文件名。如果目标是存档成员，则“$@”是存档文件的名称。在具有多个目标的模式规则中（请参阅模式规则简介），“$@”是导致规则配方运行的目标的名称。

# iphone - 如何在 ipad 应用程序中录制视频剪辑并将其存储在文档文件夹中

> ID：15475315
> 
> 赞同：1
> 
> 时间：2013-03-18T11:06:34.083
> 
> 标签：iphone, objective-c, ipad, video-streaming

我有培训应用程序，我希望当用户单击 recordVideo 按钮相机应该启动以录制视频时，有没有办法在 ipad 应用程序中执行此操作。我已经完成了音频录制，我需要进行视频录制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:09:17.713

试试这个 ：：

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    [self dismissViewControllerAnimated:NO completion:nil];
    NSString *type = [info objectForKey:UIImagePickerControllerMediaType];

    if ([type isEqualToString:(NSString *)kUTTypeVideo] || [type isEqualToString:(NSString *)kUTTypeMovie])
    {
        videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

        NSLog(@"found a video");

        // Code To give Name to video and store to DocumentDirectory //

        videoData = [[NSData dataWithContentsOfURL:videoURL] retain];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];

        NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormat setDateFormat:@"dd-MM-yyyy||HH:mm:SS"];
        NSDate *now = [[[NSDate alloc] init] autorelease];
        theDate = [dateFormat stringFromDate:now];

        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"Default Album"];

        if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
            [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil];

        NSString *videopath= [[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@/%@.mov",documentsDirectory,theDate]] autorelease];

        BOOL success = [videoData writeToFile:videopath atomically:NO];

        NSLog(@"Successs:::: %@", success ? @"YES" : @"NO");
        NSLog(@"video path --> %@",videopath);
    }
} 
```

希望，它会帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:30:52.283

```
//for video..
#import <MobileCoreServices/MobileCoreServices.h>
#import <AVFoundation/AVFoundation.h>
#import <MediaPlayer/Mediaplayer.h>

#import <CoreMedia/CoreMedia.h>

UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        NSArray *mediaTypes = [NSArray arrayWithObject:(NSString*)kUTTypeMovie];
        picker.mediaTypes = mediaTypes ;
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo ;

        [self presentModalViewController:picker animated:NO];

        [picker release];
    }
    else
    {
        UIAlertView *alt=[[UIAlertView alloc]initWithTitle:@"Error" message:@" Camera Facility is not available with this Device" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alt show];
        [alt release];
    } 
```

**用于保存到 Document 文件夹并保存在照片库中**

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths objectAtIndex:0];

        //for video
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        NSLog(@"video url-%@",videoURL);

        NSData *videoData = [NSData dataWithContentsOfURL:videoURL];

        NSString * videoName = [NSString stringWithFormat:@"student_%d_%d.mp4",stud_id,imgVidID];

        videoPath = [documentsDirectory stringByAppendingPathComponent:videoName];

        NSLog(@"video path-%@",videoPath);

        [videoData writeToFile:videoPath atomically:YES];

        NSString *sourcePath = [[info objectForKey:@"UIImagePickerControllerMediaURL"]relativePath];

        UISaveVideoAtPathToSavedPhotosAlbum(sourcePath,nil,nil,nil);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:12:57.443

就试一试吧 ：

```
-(void) imagePickerController: (UIImagePickerController *) picker didFinishPickingMediaWithInfo: (NSDictionary *) info 
{
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:NO];
    NSString *moviePath = [[info objectForKey: UIImagePickerControllerMediaURL] path];
    if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)){
        UISaveVideoAtPathToSavedPhotosAlbum (moviePath,self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
                }
} 

-(void)video:(NSString*)videoPath didFinishSavingWithError:(NSError*)error contextInfo:(void*)contextInfo {
 if (error) {
        [AJNotificationView showNoticeInView:self.view type:AJNotificationTypeRed title:@"Video Saving Failed" linedBackground:AJLinedBackgroundTypeAnimated hideAfter:1.0];
    }
    else{        
        NSURL *videoURl = [NSURL fileURLWithPath:videoPath];
        AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:videoURl options:nil];
        AVAssetImageGenerator *generate = [[AVAssetImageGenerator alloc]  initWithAsset:asset];
        generate.appliesPreferredTrackTransform = YES;
        NSError *err = NULL;
        CMTime time = CMTimeMake(1, 60);
        CGImageRef imgRef = [generate copyCGImageAtTime:time actualTime:NULL error:&err];

  self.strUploadVideoURL = videoPath;
        [imgPhoto setImage:[[[UIImage alloc] initWithCGImage:imgRef] autorelease]];
        intWhenPushView = 2;
        btnShare.enabled = YES;
        btnFacebookShare.enabled = YES;

CGImageRelease(imgRef);
    [generate release];
    [asset release];
    }
} 
```

# silverlight - Bamboo 上的 Silverlight 单元测试

> ID：15475326
> 
> 赞同：0
> 
> 时间：2013-03-18T11:07:03.970
> 
> 标签：silverlight, unit-testing, silverlight-4.0, bamboo

我正在使用 Microsoft.Silverlight.Testing 和 MS 测试进行 silverlight 测试。是否可以使用 Bamboo CI 服务器运行 silverlight 单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:15:01.933

我已经找到了如何做到这一点的方法。

有一个很好的项目[StatLight](http://statlight.codeplex.com/)，它允许在嵌入式容器内运行 Silverlight 单元测试。

# php - 如何记录用户点击了什么

> ID：15475328
> 
> 赞同：0
> 
> 时间：2013-03-18T11:07:11.713
> 
> 标签：php, javascript, mysql

例如，我正在寻找一个有多种选择的网站；

注意** 这些是图像，不是任何形式或输入类型

从 5 张图片中选择一张

从 3 张图片中选择一张

从 2 张图片中选择一张

从 6 张图片中选择一张

等等...

我需要做的是记录用户单击了哪个选项（图像），然后输出一条消息。

例如，如果您选择 abcd，则 msg = hello

我不知道如何记录这些数据，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:11:15.710

您可以向单击的链接添加参数。例如`<a href="page2.php?clickedImage=1"><img></a>`

在 page2.php 中，您可以使用以下方法读取该变量：

```
$_REQUEST["clickedImage"] 
```

例如：

```
<p>The clicked image is: <?php echo $_REQUEST["clickedImage"] ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:11:46.617

您可以将每个图像链接到单独的页面或重新加载当前页面并附加一个查询字符串，例如将以下内容作为链接添加到您的图像中

`<a href="page.php?set=1&image=3"><img src="set1-image3.png" /></a>`

然后，您可以使用 PHP 保存此信息，仅当 GET 字符串包含参数**image**和**set**时才进行处理，然后可以拆分出通过这种方式单击了哪个 set/image。

您还可以使用它来选择要在屏幕上显示的图像集（如果 set=1 在查询字符串中，则显示集 2 等）

使用`$_GET['set']`并且`$_GET['image']`您可以在 PHP 中非常轻松地访问这些信息。

例如你可以这样做：

```
if( isset($_GET['image']) && isset($_GET['set']) ) {

echo "You clicked image" . $_GET['image'] . " from set " . $_GET['set']; 

} 
```

那将是唯一的纯 PHP 答案。另一种方法是使用 Ajax 或 JavaScript，但我猜你的部分是用 PHP 完成的，这可能不是你想要的。

# asp.net - 如何计算客户端所有文本框的总和？

> ID：15475343
> 
> 赞同：0
> 
> 时间：2013-03-18T11:08:45.047
> 
> 标签：asp.net, parsing, c#-4.0, null

我必须在另一个文本框中显示所有文本框的总和，这是在服务器端完成的。

文本框中的值可能是任何整数或空值。

我已将文本框的“自动回发”属性设置为 true。

```
 private void TextBox2_TextChanged(object sender, EventArgs e)
    {

        if ((!string.IsNullOrEmpty(TextBox2.Text)) && (!string.IsNullOrEmpty(TextBox3.Text)))
        {
            TextBox8.Text = (Convert.ToInt32(TextBox2.Text) + Convert.ToInt32(TextBox3.Text)).ToString();
        } 

    } 
```

将此添加到cs文件后，我尝试运行该页面并显示此编译器错误

```
 'WebApplication1.c_fail.TextBox2_TextChanged(object, System.EventArgs)' is inaccessible due to its protection level
      <asp:TextBox ID="TextBox2" runat="server" AutoPostBack="True" 
       ontextchanged="TextBox2_TextChanged"></asp:TextBox> 
```

如果有人可以为这个错误提供解决方案，或者只是提供一段正确的代码来解决这种情况。如果文本框中有空值，您提供的代码段也应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:13:16.623

如果您需要在客户端执行此计算，则不得声明`TextBox`with`autopostback = true`并且您需要使用客户端脚本（例如 JavaScript）而不是将从服务器端执行的 C# 代码来解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T11:16:43.930

要在客户端执行此操作，您必须使用 Javascript 自动回发意味着您正在使用服务器端代码

# c# - 将方法作为参数传递给另一个方法

> ID：15475346
> 
> 赞同：2
> 
> 时间：2013-03-18T11:08:48.223
> 
> 标签：c#, .net, winforms, combobox, selectedindexchanged

我正在寡妇 c#.net 中开发项目。在表单中，我有超过 8 个组合框控件。当 combobox1 选择更改如下时，我会将数据加载到 combobox2。

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
     comboBox2.DataSource = DataTable;
     comboBox2.DisplayMember="Name";
     comboBox2.ValueMember = "ID";
} 
```

当我选择下面的 combobox2 时，将加载 Combobox3。

```
 private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
 {
     comboBox3.DataSource = DataTable;
     comboBox3.DisplayMember = "Age";
     comboBox3.ValueMember = "AgeCode";
 } 
```

就像我将数据加载到组合框的其余部分一样。
这里的问题是会发生错误，如果我没有检查`comboBox1_SelectedIndexChanged`方法是否加载了comboBox2。

我知道我们可以通过使用布尔变量来检查这一点，但可怕的是我们需要为所有方法保持其“真/假”状态。

所以我想以简单的方式解决这个问题是，我将使用`Add(combobox, Methodname)`方法和方法从组合框事件`Remove(combobox, method)`中添加和删除`comboBox_SelectedIndexChanged`函数。`SelectedIndexChanged`

但我无法将该方法作为参数传递。谁能告诉我如何将方法作为参数传递给我的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:26:49.027

如果您的意思是和/或然后解决方案是，则通过`method`参数`Add`和方法`Remove``comboBox1_SelectedIndexChanged``comboBox2_SelectedIndexChanged`

```
private void Add(ListControl dropDownList, EventHandler handlerMethodName)
{
   dropDownList.OnSelectedIndexChanged += handlerMethodName;
   //some logic here
}

private void Remove(ListControl dropDownList, EventHandler handlerMethodName)
{
   dropDownList.OnSelectedIndexChanged -= handlerMethodName;
   //some logic here
} 
```

请注意：它`DropDownList`在`ASP.NET`，`ComboBox`用于`WinForms`应用程序。

有关更多信息，请参阅：[MSDN - DropDownList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx)和[MSDN - ListControl.SelectedIndexChanged 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:14:27.823

我不确定您要做什么。但为什么不是 ComboBox 和方法的字典呢？

像这样：

```
var dict = Dictionary<ComboBox, Action<object, EventArgs>>();

private void Add(ComboBox c, Action<object, EventArgs>e) {
   dict[c] = e;
}

private void Remove(ComboBox c, Action<object, EventArgs> e) {
   dict.Remove(c);
} 
```

并致电::

```
private void CallHandler(ComboBox c, EventArgs e)
{
   dict[c](c, e);
} 
```

* * *

或者

```
private void AddHandler(ComboBox c, Action<object, EventArgs> e)
{
   c.SelectedIndexChanged += e;
}

private void RemoveHandler(ComboBox c, Action<object, EventArgs> e)
{
   c.SelectedIndexChanged -= e;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:27:09.560

我也不是 100% 确定您正在寻找那种解决方案，但我对您的需求的理解是以下方法：

```
public void Add(DropDownList combo, EventHandler method)
{
    combo.SelectedIndexChanged += method;
}

public void Remove(DropDownList combo, EventHandler method)
{
    combo.SelectedIndexChanged -= method;
} 
```

现在您可以定义自己的方法，该方法应该与`EventHandler`委托具有相同的签名：

```
public void MyMethod1(object sender, EventArgs e)
{} 
```

您可以通过调用上述定义的方法来注册和注销您的方法：

```
DropDownList lst = new DropDownList();
Add(lst, MyMethod1);
Remove(lst, MyMethod1); 
```

但请注意，这可能不是您问题的最佳解决方案。

# iphone - 在 iOS 系统时区中转换任何时区日期

> ID：15475348
> 
> 赞同：0
> 
> 时间：2013-03-18T11:08:53.750
> 
> 标签：iphone, ios, objective-c, ios5.1

在 iOS 中将给定日期转换为系统时区时遇到问题。

源日期：2013-03-18 03:54:18 // 其为 AM 格式目标日期应为：2013-03-18 03:30:15 //其为 PM 格式。

我怎么能得到这个？

我试过下面的代码，但也得到了错误的数据和差异。

```
NSDateFormatter *fmt = [[NSDateFormatter alloc] init];
fmt.dateFormat = @"yyyy-MM-dd HH:mm:ss";
NSLog(@"Post date::%@",postDate);
NSDate *utc = [fmt dateFromString:postDate];
fmt.timeZone = [NSTimeZone systemTimeZone];
NSString *local = [fmt stringFromDate:utc];
NSLog(@" local %@", local);

NSDate *date1 = [NSDate date];
NSString *currentDateString = [fmt stringFromDate:date1];
NSDate *currentDate = [fmt dateFromString:currentDateString];
NSUInteger flags = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit;
NSDateComponents *difference = [[NSCalendar currentCalendar] components:flags fromDate:utc toDate:currentDate options:0];
NSLog(@"difference::%d",[difference day]);
NSLog(@"difference::%d",[difference hour]);
NSLog(@"difference::%d",[difference minute]); 
```

**编辑：**输出

```
Post date::2013-03-18 03:20:09 
local 2013-03-18 03:20:09 
difference::0 
difference::13 
difference::2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:21:07.210

从...替换您的代码

```
fmt.timeZone = [NSTimeZone systemTimeZone]; 
```

像这样

```
fmt.timeZone = [NSTimeZone localTimeZone]; 
```

这对你有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:36:47.747

```
NSString *openingHour = @"15:05:35 ";
 NSDateFormatter *workingHoursFormatter = [[NSDateFormatter alloc] init]; 
        NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
        [workingHoursFormatter setTimeZone:timeZone];
        [workingHoursFormatter setDateFormat:@"HH:mm"];
        NSDate *openingTime = [workingHoursFormatter dateFromString:openingHour]; 
```

你能试试上面对我有用的代码吗，根据你的需要改变日期格式

# xcode - Zxing 'undefined symbols for architecture x86-x64' 错误

> ID：15475350
> 
> 赞同：0
> 
> 时间：2013-03-18T11:09:02.623
> 
> 标签：xcode, linker, zxing

我在我的应用程序中使用`zxing`lib `OS X`。我已经包含`zxing-objc`在我的项目中，并且只是将 zxing demo ( ) 中的代码复制粘贴`zxing-root/objc/examples/demo`到单独的`ViewController`类中。尝试编译项目时，出现以下链接器错误：

```
Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_QTCaptureDevice", referenced from:
     objc-class-ref in ScanViewController.o
  "_OBJC_CLASS_$_ZXCapture", referenced from:
      objc-class-ref in ScanViewController.o
  "_QTMediaTypeMuxed", referenced from:
      -[ScanViewController performVideoSourceScan] in ScanViewController.o
  "_QTMediaTypeVideo", referenced from:
      -[ScanViewController performVideoSourceScan] in ScanViewController.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经仔细检查了所有代码，并将我的项目属性（包括 c++ 编译器选项）与演示项目属性进行了比较，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:31:04.117

您需要将必要的框架添加到您的应用程序目标。您可以在示例应用程序中查看示例。在 Xcode 中选择目标，选择 Build Phases，然后打开 Link With Libraries 条目。您会看到它包含 QuartzCore 和 zxing-objc-framework。听起来您的项目中没有这些。

# c# - 在 Bamboo 中执行 NUnit 测试

> ID：15475352
> 
> 赞同：4
> 
> 时间：2013-03-18T11:09:03.363
> 
> 标签：c#, nunit, bamboo

如何在 Bamboo 中运行 NUnit 测试？

在 NUnit Runner 中，执行任务需要一个可执行文件，但我找不到任何示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:27:18.403

Bamboo 有一个 .net 插件。 [https://marketplace.atlassian.com/plugin/details/43168](https://marketplace.atlassian.com/plugin/details/43168)

您可以在 Atlassian 论坛上找到更多信息。

[https://answers.atlassian.com/questions/10552/question-about-running-nunit-tests](https://answers.atlassian.com/questions/10552/question-about-running-nunit-tests)

# sql-server - SSIS 记录集目标错误

> ID：15475354
> 
> 赞同：0
> 
> 时间：2013-03-18T11:09:04.750
> 
> 标签：sql-server, ssis, etl

我有一个针对 SQL Server 2012 的 SSIS 包。

我将它部署到`Stored Packages`集成服务中，然后有一个执行它的 SQL Server 代理作业。

将数据从多个表从实时数据库移动到临时数据库的包的第一部分成功执行。然后我有一个数据流任务，它使用 Recordset Destination 来收集其他记录的 ID 列表以移动到暂存数据库中。

当我通过集成服务（通过 SQL Server Management Studio）手动执行包时`Run Package`，包成功执行，运行使用记录集目标的数据流任务，但是当通过 SQL Server 代理作业运行时，我收到以下错误

> 消息以用户身份执行：xxxx。适用于 64 位的 Microsoft (R) SQL Server 执行包实用程序版本 11.0.2100.60 版权所有 (C) Microsoft Corporation。版权所有。开始时间：09:51:49 错误：2013-03-18 10:16:02.73 代码：0xC000F427 源：xxx_dataflowtask_xxx SSIS.Pipeline 描述：**要在 SQL Server Data Tools 之外运行 SSIS 包，您必须安装集成服务的记录集目标或更高。** 结束错误 DTExec：包执行返回 DTSER_FAILURE (1)。开始时间：09:51:49 结束时间：10:16:02 经过时间：1452.78 秒。包执行失败。步骤失败。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T13:12:35.487

我遇到了类似的问题，但是还有很多其他缺失的组件使我的 SSIS 包可以远程运行。完全安装 MS SQL Server（在安装过程中从功能列表中选择所有组件）解决了该问题： ![在此处输入图像描述](../Images/ccb254cecbe5c5aeae43b19b7c362760.png)

# localization - nsis 语言选择项和特殊字符

> ID：15475356
> 
> 赞同：1
> 
> 时间：2013-03-18T11:09:07.903
> 
> 标签：localization, special-characters, nsis

我正在使用 nsis - MUI 创建安装程序。当我做这样的事情时，我面临一个问题：

```
!insertmacro MUI_LANGUAGE "Czech"
!insertmacro MUI_LANGUAGE "Slovak" 
```

...在安装期间选择语言时，我得到了没有特殊字符的语言名称。

所以对于捷克语，我得到的是“Cesky”而不是“Česky”。有没有可能如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:13:43.343

MUI/LangDLL 显示的语言名称取决于 NSIS 版本：

对于官方的 NSIS 2.46，您可能可以编辑 Czech.nsh（只要您不定义 MUI_LANGDLL_ALLLANGUAGES，这应该可以正常工作，如果您这样做，那么“Č”可能会显示为其他内容。）

对于 Unicode fork，编译为 Unicode 应该没有问题。

对于 NSIS 3（如果您自己从 SVN 编译），Unicode 应该没有问题，并且 ANSI 目前仅限于 ASCII 用于语言名称。

# matlab - 防止序列化

> ID：15475363
> 
> 赞同：2
> 
> 时间：2013-03-18T11:09:28.747
> 
> 标签：matlab, serialization

我有一个 Matlab 类，其中实现序列化和反序列化会很痛苦，而且不需要。因此，我重载`saveobj`如下：

```
 function sobj = saveobj(self)
         sojb = [];
         error(['atmlab:' mfilename ':nostoring'], ...
            ['You tried to store %s %s.  Loading is impossible, ' ...
             'therefore I refuse to store.  Sorry.'], ...
             class(self), self.name);
    end 
```

不幸的是，当我对此进行测试时，Matlab 试图提供帮助并将警告变成错误（由于某种原因两次）：

```
>> save('/tmp/test.mat', 'X')
Warning: While saving an object of class 'SatDataset':
You tried to store SatDataset amsua.  Loading is impossible, therefore I refuse to store.  Sorry.
(Type "warning off atmlab:SatDataset:nostoring" to suppress this warning.) 
Warning: While saving an object of class 'SatDataset':
You tried to store SatDataset amsua.  Loading is impossible, therefore I refuse to store.  Sorry.
(Type "warning off atmlab:SatDataset:nostoring" to suppress this warning.) 
```

[我可以使用未记录的功能](http://undocumentedmatlab.com/blog/trapping-warnings-efficiently/)将警告变成错误：

```
>> warning error atmlab:SatDataset:nostoring
>> save('/tmp/test.mat', 'X')
Error using save
While saving an object of class 'SatDataset':
You tried to store SatDataset amsua.  Loading is impossible, therefore I refuse to store.  Sorry.

Unexpected error status flag encountered.  Resetting to proper state. 
```

但这并不令人满意，因为我不想依赖未记录的功能，我当然也不想强迫用户这样做。

**如何有效地抛出错误，防止用户尝试从我的类中序列化对象？**

* * *

根据要求，重现这种情况的最小示例：

```
% in TestClass.m
classdef TestClass < handle
    methods
        function sobj = saveobj(self)
            sojb = [];
            error('Unable to store %s objects', class(self));
        end
    end
end

% on the interactive prompt:

>> t = TestClass();

>> save('/tmp/fubar.mat', 't');
Warning: While saving an object of class 'TestClass':
Unable to store TestClass objects 
Warning: While saving an object of class 'TestClass':
Unable to store TestClass objects 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:53:16.687

就个人而言，我更喜欢将所有属性标记为`Transient`，并让对象有效地具有无效状态，这是保存/加载的结果。阻止 MATLAB 保存您的数据非常困难，而且您的解决方法可能会严重干扰用户的工作流程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T11:43:22.877

您的代码实际上引发了错误，您应该将您的调用替换`error()`为`warning()`

# iphone - 本地通知问题

> ID：15475365
> 
> 赞同：1
> 
> 时间：2013-03-18T11:09:38.340
> 
> 标签：iphone, ios, localnotification

我正在使用以下代码进行本地通知

```
 for (int i=0;i<newBirthDates.count;i++)
{
    NSDate *date =[Formatter1 dateFromString:[newBirthDates objectAtIndex:i ]];
    NSComparisonResult result = [date compare:todaydate];
    if(result == NSOrderedSame)
    {
        UILocalNotification *localNotif = [[UILocalNotification alloc] init];
        localNotif.fireDate = date;
        localNotif.timeZone = [NSTimeZone defaultTimeZone];
        localNotif.alertBody = @"birthdate notification";
        localNotif.alertAction = @"View";

        localNotif.soundName = UILocalNotificationDefaultSoundName;
        localNotif.applicationIconBadgeNumber = 1;
        [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    }
}
  newBirthdate is array with dates in it
  Formatter1 =MM/dd. 
```

假设 newbrithdate 中的一个日期是 18/3，所以我所做的就是将我的计算机
日期更改为 17/3 和 11.59 pm，然后我等待 1 分钟，它变成了 18/3，但我没有收到任何通知时间我的模拟器总是和我的电脑时间一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:19:49.300

您将格式化的日期字符串存储在数组中（以 MM/dd 格式）并将其转换回日期以设置通知。

让你做一个简单的检查！

```
NSDateFormatter *Formatter1 = [[NSDateFormatter alloc]init];
Formatter1.dateFormat =@"MM/dd";

NSDate *today = [NSDate date];// take current date
NSString *initialDateString =[Formatter1 stringFromDate:today]; // formatted date string(in MM/dd)

NSDate *dateFromFormatter = [Formatter1 dateFromString:initialDateString]; // Date from the formatted string(In your case taking from array)
NSString *finalDateString = [Formatter1 stringFromDate:dateFromFormatter];// formatted string from new date

// lets take a look wether both are same
NSLog(@"Initial date string: %@",initialDateString);
NSLog(@"Final date string  : %@",finalDateString);
// Both date strings are same

NSLog(@"Actual date    : %@",today);
NSLog(@"Formatted date : %@",dateFromFormatter);
//But see both dates are entirely different 
```

**输出**

初始日期字符串：03/18
最终日期字符串：03/18
实际日期：2013-03-18 12:15:45 +0000
格式化日期：2000-03-17 18:30:00 +0000

那你将如何获得通知？

# spring - Spring MVC - 重定向页面

> ID：15475366
> 
> 赞同：0
> 
> 时间：2013-03-18T11:09:42.300
> 
> 标签：spring, spring-mvc, http-redirect

我是 Spring MVC 的新手。我从登录页面开始。到目前为止，我成功地从我的数据库中预先存在的表中提取用户名、密码并在登录时验证用户。现在我想将用户（输入错误凭据的用户）重定向回相同的登录页面，并显示错误消息。

我的登录页面在“web-content”（Web-Content/index.jsp）下，成功登录后访问的页面在“WEB-INF/views/”下。但是，每当用户在 index.jsp 中输入错误的凭据时，就会重定向到带有错误消息的同一页面。

问题是视图解析器会将请求解析到（“WEB-INF/views”）下的页面。那么我如何重定向到“web-content”下的页面......请帮助。

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:01:17.183

在您的 spring 配置 xml 文件中添加 default-target-url（根据您的登录页面名称/ URL 更改登录页面）

如下所示

```
 <form-login login-page="/index" default-target-url='/homePage'
        authentication-failure-url="/index?login_error=1"
        always-use-default-target="true" /> 
```

在控制器中添加这个

```
@RequestMapping(value="/homePage", method = RequestMethod.GET)
public String printWelcome( ) {

    return "home";

} 
```

在视图文件夹中添加一个 jsp 页面，因为您有前缀为 WEB-INF/views 的视图解析器和（假设前缀为 jsp）

viewResolver 供参考

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean> 
```

# java - org.hibernate.MappingException：实体映射中的重复列

> ID：15475367
> 
> 赞同：0
> 
> 时间：2013-03-18T11:09:44.937
> 
> 标签：java, hibernate, jpa, jpa-2.0

我有以下实体类和另一个用于复合主键的类

**实体类**

```
@Entity
@Table(name = "PROJECTS")
public class Project {
private Integer SlNo;
private Long projectNo;
private Date projectDate;

@EmbeddedId
ProjectPK projectPK; 
```

**主键类**

```
public class ProjectPK implements Serializable {

private Integer SlNo;
@Column(name = "project_no", insertable = false, updatable = false)
private Long projectNo; 

public ProjectPK(){
}
// with getters and setters and equals and hashCode implementation 
```

问题是我收到以下异常

```
:org.hibernate.MappingException:Repeated column in mapping for entity
: test.Project column: projectNo (should be mapped with
insert="false" update="false") 
```

我在`Project Entity`课堂上添加了以下内容，但我得到了同样的例外

```
@Column(name = "project_no", insertable = false, updatable = false) 
```

**编辑 1**

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder();

CriteriaQuery<Long> countQ = cb.createQuery(Long.class);
Root<Project> empCount = countQ.from(Project.class);
countQ.select(cb.count(empCount));

TypedQuery<Long> countquery = entityManager.createQuery(countQ);// error in this line 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:50:19.503

为什么要两次声明`SlNo`和`projectNo`字段？只需将它们从`Project`课堂上删除，就可以了。

或者，更好的是，删除`ProjectPK`该类并将该类修改为`Project`以下内容（注意此方法仅适用于 Hibernate）：

```
@Entity
@Table(name = "PROJECTS")
public class Project implements Serializable {

  @Id
  private Integer SlNo;

  @Id
  private Long projectNo;

  private Date projectDate;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:52:42.737

要实现您想要的行为，您可以使用 @IdClass 注释，如下所示 -

[http://docs.oracle.com/javaee/5/api/javax/persistence/IdClass.html](http://docs.oracle.com/javaee/5/api/javax/persistence/IdClass.html)

这是修改后的代码 -

```
@Entity
@Table(name = "PROJECTS")
@IdClass(ProjectPK.class)
public class Project {
   @Id
   private Integer SlNo;

   @Id
   private Long projectNo;

   private Date projectDate;
}

public class ProjectPK implements Serializable {

    @Column(name="sl_no")
    private Integer SlNo;

    @Column(name = "project_no")
    private Long projectNo; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T01:43:23.360

已经有一段时间了。您的最后一个代码似乎不正确。您创建了一个复合键，但没有使用它。应如下：

```
@Entity
public class Project {

    @EmbeddedId
    private ProjectPK projectPK;
    ...

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:13:18.310

我已经通过以下方式解决了这个问题

```
@Entity
@Table(name = "PROJECTS")
public class Project {
@Column(name = "SL_NO" , insertable = false, updatable = false)
private Integer SlNo;
@Column(name = "PROJECT_NO" , insertable = false, updatable = false)
private Long projectNo;
private Date projectDate;

@EmbeddedId
ProjectPK projectPK; 
```

和主键类

```
@Embeddable
public class ProjectPK implements Serializable {
@Column(name = "SL_NO")
private Integer SlNo;
@Column(name = "PROJECT_NO")
private Long projectNo; 

//with hashCode and equals implementation 
```

# c++ - 如何将 CString 转换为 CByteArray？

> ID：15475370
> 
> 赞同：0
> 
> 时间：2013-03-18T11:09:53.143
> 
> 标签：c++, mfc, cstring

我知道转换`CByteArray`为`CString`非常简单。但是我该如何反其道而行之 - from `CString`to `CByteArray`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:36:02.870

CString 类的GetBuffer() 方法返回你需要的数组。之后，您可以使用 memcpy 或其他类似函数将其复制到 CByteArray 对象。

```
CString csData = L"someData";
CByteArray byteArr;

BYTE *pByteArray = (PBYTE)(LPCTSTR)csData.GetBuffer();
byteArr.SetSize(csData.GetLength());

memcpy(byteArr.GetData(), pByteArray, csData.GetLength()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T12:10:12.903

您需要考虑到，a 中的 1 个字符`CString`通常不是 1 个字节。

```
const size_t noBytes = sizeof(CString::XCHAR) * myString.GetLength();
byteArray.SetSize( noBytes );
std::memcpy( 
    byteArray.GetData(),
    reinterpret_cast<BYTE*>(myString.GetBuffer()), 
    noBytes ); 
```

因此，您需要考虑这是否真的是预期的行为。

# javascript - 从 children 数组中获取特定的孩子

> ID：15475372
> 
> 赞同：3
> 
> 时间：2013-03-18T11:09:58.540
> 
> 标签：javascript, arrays, children, jquery

我有一个 jQuery 数组`children`，我保存在一个变量中：

`var panels = panelsHolder.children('div');`

现在，我只想解决其中一个孩子，我知道它的索引，所以我这样做：

`panels[currentpanel].addClass('show')`

但是我收到一个错误，因为返回的对象`panels[currentpanel]`不是 jQuery 对象，而是平面 DOM 元素。所以我不得不将它转换为一个 jQuery 对象——像这样：`jQuery(panels[currentpanel])`——但必须有一种方法可以从数组中将该对象作为一个 jQuery 对象。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:11:13.780

你必须使用[eq()](http://api.jquery.com/eq/)来获取 jQuery 对象而不是 DOM，就像你现在得到的那样。

```
panels.eq(currentpanel).addClass('show') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:11:22.173

问题是，当您从中获取`currentpanel`索引时，您得到的`panels`是普通的 DOM 对象，而不是 jQuery 对象。您可以通过用 包围它来解决此问题`$()`。

```
$(panels[currentpanel]).addClass('show'); 
```

**编辑：**这看起来像是快速而肮脏的方法，因为您需要再次将对象“转换”为 jQuery 对象。[eq()](http://api.jquery.com/eq/)正如[Adil](https://stackoverflow.com/a/15475393/1156119)所建议的那样是要走的路。

```
panels.eq(currentpanel).addClass('show') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:11:53.250

你可以`.eq(index).addClass('show')`在 jQuery中使用

# google-analytics - 在第三方网站付款后在 Google Analytics 的服务器端跟踪用户

> ID：15475376
> 
> 赞同：0
> 
> 时间：2013-03-18T11:10:14.123
> 
> 标签：google-analytics, google-api-php-client

[我有一个使用 Google Analytics ( async ga.js](https://developers.google.com/analytics/devguides/collection/gajs/) )的电子商务网站，在该网站上付款是通过第三方服务（由一家法国银行）完成的，该服务不允许在其网站上使用 cookie。因此，当我的客户离开现场付款并完成交易时，我在 Google 分析中失去了她。当然，她可能会点击“返回网站”链接，但这不是 100%，远非如此。

然而，银行网站将发送交易结果的服务器到服务器确认（支付完成与否），以及许多变量。变量中有一个文本字段，它从我们的服务器发出的原始请求中返回不变。

换句话说：当用户点击支付按钮（这是一个 POST HTML 表单）时，我可以将一个文本字段（最多 3200 个字符）连同 POST 请求一起发送到银行服务器，然后他们会将该文本原封不动地传回给我的服务器（但我们不再在浏览器中）。

因此，鉴于这些参数，我如何向 Google Analytics 发送访问者已完成交易的信号（如果她已完成）？有没有更好/更简单的方法来实现这一点？

环境是 LAMP，我可以使用[Google APIs Client Library for PHP](https://code.google.com/p/google-api-php-client/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-13T12:13:54.290

您可以为每个用户创建唯一的用户 ID： https: [//support.google.com/analytics/answer/3123666?hl=en](https://support.google.com/analytics/answer/3123666?hl=en)

然后你可以使用谷歌测量协议和你需要的数据以及用户 ID： [https](https://developers.google.com/analytics/devguides/collection/protocol/v1/reference) ://developers.google.com/analytics/devguides/collection/protocol/v1/reference 使用 s2s 像素发送命中

这样，您将拥有一个特殊的用户 ID 视图 - 显示哪些用户完全完成了交易以及您添加到命中的所有其他值（例如 utm_campaign）。

# android - SharedPreferences 清除/保存

> ID：15475377
> 
> 赞同：27
> 
> 时间：2013-03-18T11:10:16.407
> 
> 标签：android, android-activity, sharedpreferences

我正在尝试做一个检查器，我想将一个值保存到 SharedPreferences 中。但我不确定它是否有效

**我为保存值所做的事情是：***

```
 SharedPreferences prefs = getSharedPreferences("PREFERENCE", MODE_PRIVATE);
    boolean firstrun = prefs.getBoolean("firstrun", true);

    db = openOrCreateDatabase("value.db", Context.MODE_PRIVATE, null); // optional CursorFactory

    if (firstrun) {
          SharedPreferences.Editor editor = prefs.edit();

          db.execSQL("CREATE TABLE startValue (ID Integer Primary Key, myValue Integer)");

          db.execSQL("INSERT INTO startValue (myValue) VALUES (2)"); 

          editor.putBoolean("firstrun", false);
          editor.apply();

           }

    // Save the state
    getSharedPreferences("PREFERENCE", MODE_PRIVATE)
        .edit()
        .putBoolean("firstrun", false)
        .commit(); 
```

**从另一个活动中清除偏好是：**

```
 try{
            db = openOrCreateDatabase("value.db", Context.MODE_PRIVATE, null); // optional CursorFactory

            db.execSQL("DROP TABLE IF EXISTS startValue");
            db.close();

            SharedPreferences preferences = getPreferences(0);
            SharedPreferences.Editor editor = preferences.edit();

            editor.remove("firstrun");
            editor.clear();
            editor.commit();

            this.finish();
        }    
        catch(SQLException ex)
        {
        //catch error here
        } 
```

**问题**

但是当我正在测试时，我看到它并没有清除偏好。我做错了什么还是？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-18T11:19:45.560

要清除 SharedPreferences 使用这个

```
SharedPreferences preferences = getSharedPreferences("PREFERENCE", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit();
editor.clear(); 
editor.commit(); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T11:27:00.707

您没有使用相同的首选项。花点时间阅读[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

在您的第一个活动中，您正在使用：

```
SharedPreferences prefs = getSharedPreferences("PREFERENCE", MODE_PRIVATE); 
```

在其他活动清理中，您仅使用：

```
SharedPreferences preferences = getPreferences(0); 
```

阅读文档：

> 检索 SharedPreferences 对象以访问此活动专用的首选项。这只是通过传入此活动的类名作为首选项名称来调用底层的 getSharedPreferences(String, int) 方法。

您需要在两个活动中使用相同的首选项名称。所以在你的第二个活动中，你做清理的地方只是使用

```
SharedPreferences preferences = getSharedPreferences("PREFERENCE", MODE_PRIVATE); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-16T13:57:18.247

**// 将字符串保存到 SharedPreferences**

```
public static void saveStringToSharedPreferences(Context mContext, String key, String value) {
    if(mContext != null) {
        SharedPreferences mSharedPreferences = mContext.getSharedPreferences("SHARED_PREFERENCES", 0);
        if(mSharedPreferences != null)
            mSharedPreferences.edit().putString(key, value).commit();
    }
} 
```

**// 从 SharedPreferences 中读取字符串**

```
public static String readStringFromSharedPreferences(Context mContext, String key) {
    if(mContext != null) {
        SharedPreferences mSharedPreferences = mContext.getSharedPreferences("SHARED_PREFERENCES", 0);
        if(mSharedPreferences != null)
            return mSharedPreferences.getString(key, null);
    }
    return null;
} 
```

**// 从 SharedPreferences 中移除**

```
public static void removeFromSharedPreferences(Context mContext, String key) {
    if (mContext != null) {
        SharedPreferences mSharedPreferences = mContext.getSharedPreferences(Constants.SHARED_PREFERENCES_NAME, 0);
        if (mSharedPreferences != null)
            mSharedPreferences.edit().remove(key).commit();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-18T13:57:22.830

您可以：

```
getSharedPreferences("PREFERENCE", 0).edit().clear().commit(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-09T09:25:26.103

删除所有首选项：

```
SharedPreferences mPrefs_delete = context.getSharedPreferences(GeneralFunctions.SETTING_SINGLE_MASTER_CHILD, Context.MODE_PRIVATE);
SharedPreferences.Editor editor_delete = mPrefs_delete.edit();
editor_delete.clear().commit(); 
```

# javascript - 将信息窗口添加到地标

> ID：15475379
> 
> 赞同：1
> 
> 时间：2013-03-18T11:10:23.673
> 
> 标签：javascript, parsing, google-maps-api-3, infowindow, marker

我正在使用 geoxml3 来解析 kml 文件。我的问题是如何从 kml 文件中提取每个地标的描述并将其放置在信息窗口中？

到目前为止，以下是我的代码：

```
function displayKml() {
        initialize();
        parser = new geoXML3.parser({
            map: map,
            processStyles: true,
            createMarker: addMyMarker,
            createOverlay: addMyOverlay
        });          
        parser.parse("Uploads/" + document.getElementById('<%= text2.ClientID %>').value); 
    }

     function addMyMarker(placemark) {
        // Marker handling code goes here
         parser.createMarker(placemark);

      }

      function addMyOverlay(groundOverlay) {
        // Overlay handling code goes here
        parser.createOverlay(groundOverlay);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:09:31.227

geoxml3 在默认的 createXXX 函数中默认为地标创建 InfoWindows。如果您覆盖它们，则必须根据需要在您的版本中创建 InfoWindows。我通常首先复制默认函数中的代码，然后适当地更改它。看起来您正在使用默认功能，所以我不确定您看到了什么行为以及为什么要这样做。GroundOverlays 没有 InfoWindows，到目前为止，您发布的所有示例 KML 文件都不包含“名称”或“描述”标签（但它们确实为我打开了 InfoWindows）。

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlB.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlB.xml)

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_emptyKMLa.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_emptyKMLa.xml)

# c# - DateBox 自定义类

> ID：15475380
> 
> 赞同：2
> 
> 时间：2013-03-18T11:10:29.080
> 
> 标签：c#, class, custom-controls

我想创建一个输入/显示日期的自定义类。问题是我在 VFP 中创建它没有问题，但在 C# 中不知道从哪里开始。在 VFP 中，我创建了一个容器类，在其中放置了一个标签，其中列出了当天的前 3 个字母，以及另外 3 个文本框类型的对象，每个对象分别代表日、月和年。每个文本框都有代码，可以按键盘上的向上箭头来增加值，然后按向下箭头来减少值。每个文本框都能够在获得焦点时变为蓝色（选择整个文本长度）。在 VFP 中存在类浏览器，它打开一个类库 (.vcx) 并允许您将类拖放到表单（自定义类）。

第一个实例有第一个制表位。当表单启动时，lcDay 对象（我的日期框类的第一个文本框）获得焦点并选择其中的所有文本。当 textbox1 (lnDay) 被填充时，它会自动将焦点放在 textbox2 (lnMonth) 上，选择里面的所有文本，依此类推。如果日期没问题（使用函数 date(year,month,day) 验证，在我的情况下，验证代码位于容器类的自定义方法中，名为“verificare”并检查 date(lnYear,lnMonth,lcDay) 是否为不为空）我调用另一个自定义方法，将橙色标签标题更改为 date() 的前三个字母。

我可以制作这样一个自定义类并在我的 C# 表单中使用它吗？

我的 VFP 类的图像：

![现有的 VFP 解决方案](../Images/edda78560f325db207aaad89a7a87ffc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:47:01.443

您需要决定要在 C# 中使用哪个用户界面框架。我猜你想创建一个桌面应用程序。您可以从 Microsoft 的 2 个最常用的框架中进行选择：

*   Windows Presentation Foundation (WPF) - 最新的框架（例如用于 Win8 Modern 应用程序）
*   Windows 窗体（System.Windows.Forms 命名空间）
*   还有其他不太受欢迎的选项（GtkSharp、Silverlight 等）

在 C# 中，您可以使用可以自定义以满足您的需求的日期选择器控件：

*   这是 WinForms [DateTimePicker的教程](http://www.dotnetperls.com/datetimepicker)
*   WPF 的[DatePicker 教程](http://www.c-sharpcorner.com/UploadFile/mahesh/wpf-datepicker/)

# internationalization - 如何将 i18n 应用于存储在数据库中的值？

> ID：15475382
> 
> 赞同：2
> 
> 时间：2013-03-18T11:10:34.780
> 
> 标签：internationalization

我正在使用带有 MVC4 和 Entity Framework 5 的 Visual Studio 2012 构建一个网站。问题是，我必须将 i18n 应用于存储在数据库中的一些值。例如，我需要一个下拉菜单，以西班牙语和英语显示就业领域（工程、健康、金融等）。

我在考虑两种不同的方法，但对我来说，它们都不是 100% 好的：

1.  在“区域”表中添加列以反映不同语言的区域名称（例如：AreaId、EnglishName、SpanishName）。这在设计方面听起来不太好，因为我很幸运只有 2 种语言，但是如果我有 100 种语言要支持呢？

2.  不要将这些区域保存在数据库中，而是将它们添加到视图中，使用 i18n 键并从资源文件中读取它们的值。这为视图添加了逻辑（我可能不得不在那里使用迭代），所以看起来也不太好。

还有什么我想念的，那会是更好的方法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:26:10.123

首先，我确实认为将 i18n 逻辑与数据库实体分开在灵活性和维护方面是一种更好的方法。

因此，为了将 i18n 与数据库分开，您可以使用枚举（这取决于您，因为它也有一些缺点），或者您可以为每个就业领域使用 i18n 变量。例如，`message.properties.en`你可以有：

```
employmentArea.engineering = Engineering
employmentArea.health = Health
employmentArea.finance = Finance 
```

出于某些原因，如果您确实需要使用数据库，您可以有一个单独的语言表，这可以解决您的问题，如下所示：

**桌子`area`**

```
id code    
-- ----    
1  eng     
2  heath   
3  finance 
```

**桌子`area_language`**

```
id area_id lang_code name
-- ------- --------- ----
1  1       en        Engineering
2  2       en        Health
3  3       en        Finance
4  1       es        Ingeniería
5  2       es        Salud
6  3       es        Financiar 
```

因此，您可以通过这种方式过滤`lang_code`. 为您的 lang_code 过滤器使用 iso 标准将对您有所帮助。

# python - Html 模板中的 Google AppEngine Blobstore 视频流

> ID：15475390
> 
> 赞同：0
> 
> 时间：2013-03-18T11:11:06.667
> 
> 标签：python, html, google-app-engine, video-streaming, blobstore

我设法从以下链接获取代码来工作。[https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App](https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App)

当我上传视频时，我设法让视频在我的浏览器上流式传输，但我的问题是如何将视频放在我的 html 模板中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:37:06.760

为了显示他们上传的视频，您可以使用[html 视频标签](http://www.html5rocks.com/en/tutorials/video/basics/)或可用的媒体播放器解决方案之一，除了精致的播放器之外，您还可以使用跨浏览器兼容性以及 Flash 后备。这是您可以使用的媒体播放器的一个很好的[列表。](http://praegnanz.de/html5video/)我已经在我的个人项目中使用了[mediaelementjs](http://mediaelementjs.com/)，我对易用性和性能稳定性感到非常满意。

# android - 从网站下载谷歌地图并从安卓应用程序显示

> ID：15475392
> 
> 赞同：1
> 
> 时间：2013-03-18T11:11:11.660
> 
> 标签：android, google-maps

我正计划构建一个 android 应用程序作为对网站的支持。该站点显示了一张地图，其中包含他们在一个领土周围安装的所有节点和链接，在本例中为西班牙。我的目标是从我的应用程序访问此地图，下载更新并从手机显示。网站上的地图是谷歌地图，安卓手机可以毫无问题地支持。有什么容易的等待吗？

我想下载地图的站点是：[http ://www.guifi.net/ca/maps](http://www.guifi.net/ca/maps)

先感谢您！

# c# - C# T-SQL 使用字符串数组创建 IN

> ID：15475399
> 
> 赞同：1
> 
> 时间：2013-03-18T11:11:23.490
> 
> 标签：c#, tsql

也许我没有正确地做某事，但我需要创建一个字符串列表来过滤一些 SQL`SELECT`查询，我能找到的只是转义单个参数值的答案。

给定这个数组：

`string[] domains = new string[] { "sec", "krn", "op", "ip" };`

我需要创建这个查询

`SELECT * FROM user_domains WHERE name IN ("sec", "krn", "op", "ip")`

**注意**：这不是一个真正的查询，但说明了这个问题的重点。

一个天真的解决方案是创建一个查询

`SELECT * FROM user_domains WHERE name IN (@p1, @p2, @p3, @p4)`

并使用格式化为的参数执行查询

```
Dictionary<string,string> inTerms = domains
     .Select((t, i) => new { Key = "p" + i, Term = t })
     .ToDictionary(item => item.Key, item => item.Term,
                   StringComparer.OrdinalIgnoreCase); 
```

还有另一种方法吗？

**更新**

使用逗号或以其他方式分隔的术语字符串执行简单的字符串比较（aka ）是否同样容易*和快速？*`index of`

前任：

`SELECT * FROM user_domains WHERE CHARINDEX(name, @terms) > 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:19:48.733

我使用一个函数来做到这一点

```
CREATE FUNCTION dbo.fnListToCol (
    @sInputList VARCHAR(8000) -- List of delimited items
  , @sDelimiter VARCHAR(2) = '|' -- delimiter that separates items
) RETURNS @List TABLE (item VARCHAR(8000))

BEGIN
DECLARE @sItem VARCHAR(8000)
WHILE CHARINDEX(@sDelimiter,@sInputList,0) <> 0
 BEGIN
 SELECT
  @sItem=RTRIM(LTRIM(SUBSTRING(@sInputList,1,CHARINDEX(@sDelimiter,@sInputList,0)-1))),
  @sInputList=RTRIM(LTRIM(SUBSTRING(@sInputList,CHARINDEX(@sDelimiter,@sInputList,0)+LEN(@sDelimiter),LEN(@sInputList))))

 IF LEN(@sItem) > 0
  INSERT INTO @List SELECT @sItem
 END

IF LEN(@sInputList) > 0
 INSERT INTO @List SELECT @sInputList -- Put the last item in
RETURN
END
GO 
```

然后在您的代码中构建一个分隔参数（例如“sec|krn”）并传递给如下过程：

```
WHERE ( ( VSSAS.Location IN ( SELECT * FROM  dbo.fnListToCol(@LocationFilter, '|') ) ) OR ( @LocationFilter IS NULL ) ) 
```

# c# - 在 C# 中拆分多个字符

> ID：15475401
> 
> 赞同：1
> 
> 时间：2013-03-18T11:11:36.670
> 
> 标签：c#

我想拆分这个字符串中的每个单词？

我写一个代码

```
String s1=" welcome to our website,thanku."
string s2= s1.Split(",-.".ToArray()); 
```

但这行不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:13:19.730

我相信您想拆分`space`,和`,`，然后尝试：`.``-`

```
string[] splitArray = s1.Split(',','-','.',' '); 
```

[string.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)返回一个字符串元素数组，而不是单个字符串元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:13:46.587

您需要将 char[] 传递给 split 函数，char[] 将保存所有将拆分字符串的字符。

```
string s2= s1.Split(",.- ".ToCharArray()); 
```

要在拆分时忽略空字符串，您可以这样做：

```
string s2= s1.Split(",.- ".ToCharArray(), StringSplitOption.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:14:45.530

如果有人能说出某些事情是*如何*不工作的，那几乎总是有帮助的。

您可以预定义字符数组（为清楚起见）：

```
var delimiters = new char[] { ',', '-' };
var results = string.Split(delimiters); 
```

然后也将结果作为数组接收（此处隐含）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T11:15:47.263

试试这个

```
String s1=" welcome to our website,thanku.";
string[] s2= s1.Split(new [] {",", "-", "."},  StringSplitOptions.RemoveEmptyEntries); 
```

# razor - 如何更改 Visual Studio 2012 Razor 颜色

> ID：15475402
> 
> 赞同：31
> 
> 时间：2013-03-18T11:11:37.370
> 
> 标签：razor, visual-studio-2012, code-formatting

我想更改 VS12 中 Razor 标签的黄色背景颜色。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-18T11:11:37.370

可选：安装颜色主题编辑器：http: [//visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)

在主题编辑器或工具 > 选项 > 环境 > 字体和颜色

搜索：“HTML 服务器端脚本”以编辑`@`和其他标签的前景和背景。

搜索：“Razor Code”以编辑 Razor 代码的背景。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-24T15:05:31.970

除了@seanjacob 提到的方式之外，如果您不想安装扩展程序只是为了更改 Razor 颜色，还有一种内置方式。这种方法显示在[**这个答案**](https://stackoverflow.com/a/4696982/718325)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-16T13:06:51.323

**Visual Studio 2017 的颜色主题编辑器**

[https://marketplace.visualstudio.com/items?itemName=VisualStudioPlatformTeam.VisualStudio2017ColorThemeEditor](https://marketplace.visualstudio.com/items?itemName=VisualStudioPlatformTeam.VisualStudio2017ColorThemeEditor)

*您可以按照与seanjacob*的帖子相同的说明进行操作

# userscripts - 在 tampermonkey(userscript) 中包含所有页面

> ID：15475404
> 
> 赞同：61
> 
> 时间：2013-03-18T11:11:43.210
> 
> 标签：userscripts, tampermonkey

我必须在 tampermonkey 中包含所有站点。这是我必须运行的脚本

```
// ==UserScript==
// @name       Phishing Blockz
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description Phishing block based on hyperlinks
// @match      http://*/*
// @run-at     document-end

var req = new XMLHttpRequest();
req.open('GET', document.location, false);
req.send(null);
var headers = req.status;
var locheader=req.getResponseHeader("Location");
alert(headers);
alert(locheader); 
```

我做错了什么吗？请帮助我在 chrome 的所有页面中运行此用户脚本

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-02T21:30:48.843

```
// @match      http://*/* 
```

***将仅匹配以http://...***开头的地址，但不匹配***https://...***例如。

如果这是您真正需要的，请使用以下内容包含***所有***地址（包括您可能保存在硬盘驱动器上的本地页面！）..

```
// @match      *://*/* 
```

注意：由于 TM2.12 中的潜在错误或未记录的功能，以下方法在撰写本文时也适用（因此很可能在未来的版本中发生变化！！）：

```
// @match      * 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-07-16T11:37:48.710

> `// @match *://*/*`

**这应该找到所有 URL。**使用*TamperMonkey/GreaseMonkey*

```
// ==UserScript==
// @name         Match Every Site
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  I will pop up on every site!!
// @author       You
// @match        *://*/*
// @grant        none
// ==/UserScript==

alert("I am working!") 
```

这可能对某些页面上的*浏览器扩展有用：*

*   [WebExtensions 匹配模式 Mozilla 文档](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns)
*   [匹配模式 Google 文档](https://developer.chrome.com/apps/match_patterns)

因此：`*://*/*`匹配所有`HTTP`,`HTTPS`和`WebSocket` **URLs**。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-02-18T21:55:17.267

做`@include`而不是`@match`工作得很好

```
// ==UserScript==
// @name       Phishing Blockz
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description Phishing block based on hyperlinks
// @include     *
// @run-at     document-end 
```

这适用于网络上的所有网站（在 TamperMonkey 中测试）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-05T16:12:07.093

真正的答案是：

```
// @match https://*/*
// @match http://*/* 
```

# sql - Grails 使用预先存在的 SQL 连接表链接表

> ID：15475409
> 
> 赞同：0
> 
> 时间：2013-03-18T11:12:00.123
> 
> 标签：sql, grails, join, groovy

我有三个表，场景，表单和一个链接表来连接两者，一个表单可以属于多个场景，一个场景可以有多个表单，链接表包含关系信息......我该怎么做在圣杯？我无法更改现有表的结构...：/

链接表的结构很简单：

```
form_id (matches PK of form table)
test_scenario_id (matches the PK on the test scenario table)
[order] (defines the order in which the forms should display) 
```

在普通的旧 SQL 中，我可以按如下方式使用连接，但不知道如何将其转换为 Groovy 语言：-

```
select lnk_scenario_form.test_scenario_id, dbo.lnk_scenario_form.[order], dbo.form.form_id
from dbo.form
JOIN lnk_scenario_form on form.form_id = lnk_scenario_form.form_id 
JOIN dbo.test_scenario on dbo.test_scenario.test_scenario_id = lnk_scenario_form.test_scenario_id
where lnk_scenario_form.test_scenario_id = SCENARIO ID
order by lnk_scenario_form.[order]; 
```

以下是我到目前为止设置的课程：-

```
class Form {

    static constraints = {
        formDesc(blank:false,maxSize:100)
        }

    static mapping = {
        table "form"
        version false
        columns{
            id column:"form_id"
            formDesc column:"description"
        }
    }

    String formDesc
} 
```

和

```
package fartframework

class TestScenario {

    static constraints = {
        testscenariodesc(blank:false, maxSize:100, unique: true)
        browser(inList:["RND","FF","CH","IE"], blank:false)
        myrelease(blank:false, maxSize:10)
        system(blank:false, maxSize:50)
        subSystem(blank:false, maxSize:50)
    }

    static mapping = {
        table "test_scenario"
        version false
        columns{
            id column:"test_scenario_id"
            testscenariodesc column:"description"
            browser column:"browser"
            myrelease column:"release"
            system column:"system"
            subSystem column:"subSystem"
        }
    }

    String testscenariodesc
    String browser
    String myrelease
    String system
    String subSystem

    String toString (){
        "${testscenariodesc}"
    }

} 
```

# .htaccess - 如何将特定文件夹从 HTTP 重定向到 HTTPS

> ID：15475410
> 
> 赞同：0
> 
> 时间：2013-03-18T11:12:01.837
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在努力仅重定向位于名为**shop**的文件夹中的电子商店。我有 2 个 htaccess 文件，一个位于域根目录（一个专用于公司网站），另一个位于 shop 文件夹中。我已经尝试了许多重写规则的变体，但我无法让它工作......

如果我将它放入商店的 htaccess 文件中，我会收到重定向循环错误：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这在两个 htaccess 文件中都没有做任何事情：

```
RewriteEngine on
RewriteCondition %{SERVER_PORT} !^443$
RewriteRule ^(.*)$ https://www.maindomain.com/order/$1 [R=301,L] 
```

当我将它放入位于文档根目录的 htaccess 文件中时，这两个都不是：

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^(subdirectory/.*)$ https://www.mydomain.com/$1 [R=301,L] 
```

注意：如果有什么不同，我也有这个重定向规则。它位于文档根目录的 htaccess 中：

```
RewriteBase /
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]
RewriteCond %{HTTP_HOST} !^rumako.cz$ [NC]
RewriteRule ^(.*)$ http://rumako.cz/$1 [L,R=301]
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

而这个在商店的 htaccess 中：

```
 RewriteEngine On
    RewriteBase /shop
    RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
    RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
    RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

请指教。感谢所有的答案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:15:51.070

您的第一条规则是正确的，您只能添加一个[`R`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)标志

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

# html - 如何让 Chrome 和 IE 正确显示阻止超链接

> ID：15475411
> 
> 赞同：1
> 
> 时间：2013-03-18T11:12:04.440
> 
> 标签：html, css, internet-explorer, google-chrome, anchor

我一直使用以下代码使 <a> 链接填充其容器的内容。chrome 和 IE 现在都显示 <a> 链接内容的大小。

我已经尝试过明确的像素高度和重要标签，但 chrome 仍然坚持使链接成为内容的大小。该链接没有内容，因此显示为 0px 高度和宽度。

**这就是我制作块超链接的方式？**

**HTML**

```
<div class="mydiv">
    <a href="#"></a>
</div> 
```

**CSS**

```
.mydiv {
    height: 50px;
    width: 50px;
    display: block;
}
.mydiv a {
    height: 100%;
    width: 100%;
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:21:23.550

你的意思是：[这个](http://fiddle.jshell.net/LXtFM/)

html:

```
<div class="abc">
  <a href="#"></a>
</div> 
```

CSS：

```
.abc {
height: 50px;
width: 50px;
display: block;
border-style:solid;
border-width:3px;
}
.div a {
height: 100%;
width: 100%;
display: block;
} 
```

只需为 div 定义一个类并根据需要链接和设置样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:30:55.237

在这里你去 - 在 Chrome 和 IE 中测试并在两者中工作：

这是HTML：

```
<div class="abc">
    <a href="http://www.google.com"></a>
</div> 
```

和CSS：

```
div.abc { display:block ;
    width:200px ;
    height:50px ;
    background:blue ;
}

.abc a { display:block ;
    width:100% ;
    height:100% ;
} 
```

您可以在 div.abc 中编辑高度和宽度，超文本链接将相应调整。

演示在这里：http: [//jsfiddle.net/PRZaX/](http://jsfiddle.net/PRZaX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:14:22.363

您应该`.`从 div 中删除 . 是类名的选择器，这里你写的是直接的风格`div`

```
div {
height: 50px;
width: 50px;
display: block; background:red
}
div a {
height: 100%;
width: 100%;
display: block;
} 
```

**[演示](http://jsfiddle.net/V6CPG/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:38:57.330

我认为您应该从 Chrome 和 IE 的版本以及您的操作系统开始，而您提供的代码片段可以作为一种魅力。

我知道，旧版本的 IE 在将锚点显示为块时存在一些问题，修复它的正确方法是设置假背景，例如：`background: url(/);`，但我很确定情况并非如此。

如果您有任何其他样式表应用于您的页面，请提供信息。

# typo3 - 列表视图中的参照完整性

> ID：15475414
> 
> 赞同：0
> 
> 时间：2013-03-18T11:12:08.743
> 
> 标签：typo3, fluid, extbase

我使用 Extension Builder 在 TYPO3 v4.5 中进行了扩展。现在我有一些没有创建/更新功能的表，因为它们不会经常更改（每月仅一次）。要更改它们，我想使用 TYPO3 中的列表视图。

那行得通，我可以创建和更新我的记录。但如果我有一条记录，它与另一条记录有关系，我可以简单地删除它。另一条记录现在具有无效值。

例如：

```
Books
_________________________
| Name        | AuthorID |
-------------------------
|Harry Potter | 1        |
-------------------------

Author
_________________________
| ID | Name              |
-------------------------
| 1  | Rowling           |
------------------------- 
```

现在，如果我删除罗琳，我的 AuthorID 字段中有“无效值”。我可以防止这种情况吗？

编辑：好的，我找到了一种可以防止这种情况的方法：我必须在 TCE 中为我的扩展使用 predb 钩子。但是如果我删除一条记录，这段代码（仅用于试验）不起作用。我以为我会得到一个名为“已删除”的数组元素，其值为 1。但它没有出现。其他数据（如果我更改信息或创建新记录）出现。

```
 /**
     * @param string $status
     * @param string $table
     * @param int $id
     * @param array $fieldArray
     * @param tce_main $tcemain
     */
    function processDatamap_postProcessFieldArray($status, $table, $id, &$fieldArray, &$tcemain) {
        $fp = fopen('../../typo3conf/ext/test/hooks/output.txt', 'w');
        for ($x = 0; $x < sizeof($fieldArray); ++$x)
        {
             fwrite($fp, "key: ".key($fieldArray)."\tvalue: ".current($fieldArray)."\n");
             next($fieldArray);
        }
        fclose($fp);
    } 
```

EDIT2：就像第一个答案中的评论一样，我可以使用 status == delete 检查typo3 是否要删除记录。但是，如果我无法更改已删除属性中的数据（因为它不在 fieldArray 中），如何防止这种情况发生？任何人的线索？

感谢阿加什·塔莫的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:46:14.177

您可以简单地覆盖存储库中的删除方法并检查是否存在对其他对象的引用。

# android - 如何从 webService 获取一些数据到我们在 android 中的 Activity../

> ID：15475418
> 
> 赞同：1
> 
> 时间：2013-03-18T11:12:32.650
> 
> 标签：android, web-services, android-activity, webview, webviewclient

我正在做一个项目，我必须通过我的 android APP 使用现有的网络服务（第三方供应商提供的支付网关）。

我的问题是付款程序完成后。我想将其数据（交易 ID 和日期）返回给活动，以便可以确认下单。`

webService 是在 webView 浏览器的帮助下使用其 loadUrl(Uri url) 方法加载的。

（鉴于我无法访问 Webservice 的代码，我怎么能将数据取回我的 Activity）。

请给我一个合适的解决方案。

编辑：

对应于支付网关 web 服务的网页已经存在，我正在通过我的 webView 加载它们。

```
Now as soon as 4 webPages are traversed and Payement procedure is done i want to send data back to the HOST Activity. 
```

# java - XMLGregorianCalendar 到 DateTime Java

> ID：15475419
> 
> 赞同：3
> 
> 时间：2013-03-18T11:12:45.297
> 
> 标签：java, datetime, jodatime

当我从 XML 获取 DateTime 时，它​​是 XMLGregorianCalendar：

```
2010-12-02T10:00:00 
```

比我制作一个看起来像这样的字符串：

```
2010-12-02 10:00:00 
```

但是当我尝试通过以下方式将其解析为可行的 DateTime (joda.datetime) 时：

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss");
DateTime dt = formatter.parseDateTime("2010-12-02 10:00:00"); 
```

它返回这个：

```
2010-12-02T10:00:00.000+01:00 
```

我希望它看起来像 String 但不是 DateTime 所以我可以使用它....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:49:55.443

The correct way to do this is using the `javax.xml.bind.DatatypeConverter` class which provides a way to create `java.util.Date` or `java.util.Calendar` from the String. You can then easily convert that to Joda time if you want to.

DatatypeConverter docs: [http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/DatatypeConverter.html](http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/DatatypeConverter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:47:36.920

我假设您要返回的日期字符串基本上是`dt.toString()`

您需要使用您创建的格式化程序来格式化日期，否则格式没有相关性。试试这个：

```
System.out.println(formatter.print(dt)); 
```

当您使用格式化程序设置日期时，它纯粹使用您定义的格式来解析字符串...这对 DateTime 对象没有任何影响，因此您在将其转换回字符串时仍然需要使用格式化程序

# java - LibGDX 闪烁

> ID：15475422
> 
> 赞同：2
> 
> 时间：2013-03-18T11:12:58.973
> 
> 标签：java, android, libgdx

我已经使用 LibGDX UI Setup 来启动一个项目。

我在实现 ApplicationListener 中唯一的东西是：

```
public void create() {      
        setScreen(new LoadingScreen(this));
} 
```

这应该触发 LoadingScreen 并且它确实如此，因为我在它的构造函数中有一个打印并且它确实显示了。我在渲染方法中有一个打印，它只显示一次，我知道这应该打印很多次，因为渲染方法每隔很短的时间就会被调用一次。

这是我在 render() 方法中的内容（除了打印）：

```
OpenGL.glClearColor(1, 0.5f, 1, 1);
OpenGL.glClear(GL10.GL_COLOR_BUFFER_BIT); 
```

在哪里`OpenGL = Gdx.graphics.getGL10();`

正如我所说，我认为渲染只被调用一次，当我执行桌面主程序时，我在屏幕上看到的是一个从粉红色到黑色闪烁的图像，以及从上到下的条形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:02:32.157

以防万一它可以帮助某人。

通过在 Game 扩展类中添加 render 方法解决了这个问题：

```
 public void render() {  
    super.render();
} 
```

现在它不会闪烁，并且每个屏幕的渲染都被一遍又一遍地调用，因为它应该发生。

# c# - 使用 Process.GetProcesses() 然后 MainWindowTitle 过滤 GUI 应用程序

> ID：15475426
> 
> 赞同：0
> 
> 时间：2013-03-18T11:13:04.120
> 
> 标签：c#, process, taskmanager

我正在尝试使用 GetProcesses 构建任务管理器的“应用程序”部分，然后使用 MainWindowTitle 来过滤 GUI 应用程序。这对我来说很好，但我现在注意到使用“MainWindowTitle”并不总是有效，因为如果应用程序处于非活动状态（这个非活动时间随机变化，但特别是在“Outlook”中发生），“MainWindowTitle”消失并变为空，因此它不会显示在我的应用程序列表中。然后，我需要单击“丢失的”应用程序才能再次显示它。我想知道如果“MainWindowTitle”属性字段处于非活动状态然后再次出现，这听起来是否正常？

我在互联网上搜索时假设此属性是过滤 GUI 应用程序的最佳方法（另一种方法是使用 EnumDesktopWindows），除非其他人遇到过我可以使用的其他东西？

先感谢您。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:25:36.543

我会用`EnumDesktopWindows`with`GetWindowThreadProcessId`这样你就可以把它们绑在一起。

# c# - 单例或静态 - 我应该使用什么？

> ID：15475427
> 
> 赞同：0
> 
> 时间：2013-03-18T11:13:04.410
> 
> 标签：c#

我不知道我应该用什么。我有3节课。`PasswordService`, `SettingsService`, `FileService`. 这些类每个都包含大约 2 个方法。这些方法正在更多的程序集中使用。现在我将它用作单例。但我不确定我是否应该这样做。我认为一个静态类就足够了。你怎么看？

**代码：**

```
public class PasswordService
{

    private PasswordService(){}

    private static PasswordService _instance;

    public static PasswordService Instance
    {
        get { return _instance ?? (_instance = new PasswordService()); }
    }

    public byte[] EncryptPassword(string password)
    {

        var protectedPass = Encoding.UTF8.GetBytes(password);
        return ProtectedData.Protect(protectedPass, null);
    }

    public string DecryptPassword(byte[] encryptedPassword)
    {
        var unprotectedPass = ProtectedData.Unprotect(encryptedPassword, null);
        return Encoding.UTF8.GetString(unprotectedPass, 0, unprotectedPass.Length);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:22:16.640

你的类中没有任何状态，所以我看不出有任何理由使用类的实例。我建议您使用静态类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:17:20.963

1 - 为这些服务创建一个单例是正确的，因为这些似乎是处理一项特定任务。

2 - 尽可能避免使用静态，因为如果您使用 TDD 并使用连续集成服务器进行自动单元测试，您将无法有效地模拟它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:20:23.390

我建议您保留 Singleton，除非您使用实例或 DI。Singleton 可以很容易地重构为实例，而静态类必须重新实现为非静态类。此外，您可以用测试假人替换实例，而替换静态实现几乎是不可能的。

例如，您可能会遇到这样一种情况，即您的程序必须`FileConfiguration`为两个不同的配置文件处理多个实例。Singleton 可以拆分为两个实例池。

我在一个 DAO 类中遇到了这个问题，它曾经是静态的并且能够连接到一个 DB。我们不得不重构它，因为一个新的需求包括在一个程序实例中支持 n>1 个数据库。

正如 Mikhail 指出的那样，仅将静态用于*真正无状态*的东西。静态字段中的配置文件或选择的密码哈希算法已经是*state*，以及我上面示例中的连接字符串 - 即使它们在运行时可能永远不会改变。

# session - YII：在注销时阻止 YII 清除会话？

> ID：15475435
> 
> 赞同：1
> 
> 时间：2013-03-18T11:13:25.193
> 
> 标签：session, yii

我目前在会话中存储用户的购物车内容。问题是，我不想要这些信息，它存储在：

```
YII::app()->session['cart'] 
```

..在用户注销时被清除。而且由于各种原因，我也不想将其存储在数据库中。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:35:54.167

使用`Yii::app()->user->logout(false)`. 它只会从会话中删除与身份验证相关的信息，并保持其他数据完好无损。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:00:00.933

你必须以某种方式保存它。但是您有另一种保存方式。

[COOKIES][http://www.yiiframework.com/doc/api/1.1/CHttpCookie]，保存在客户端。但如果使用清理cookie，它就无法检索它。

我**认为**，将其保存在数据库中。为会话创建表，并使用[序列化](http://www.php.net/manual/en/function.serialize.php)将 _SESSION 转换为字符串，当用户登录时从数据库读取会话并使用[unserialize](http://www.php.net/manual/en/function.unserialize.php)。

# java - Java：从目录中获取新文件的列表

> ID：15475437
> 
> 赞同：1
> 
> 时间：2013-03-18T11:13:31.483
> 
> 标签：java, file, file-io, monitor

我需要一个 java 程序，它可以根据需要将新添加的文件列表返回到目录。我对新文件的定义是上次检查/扫描目录时不存在的文件。

我知道有 JNotify 等库和 java 目录监视服务[http://docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。然而，据我了解，这些库实现了监听目录并在某些文件事件（添加、删除、删除等）发生时立即通知。但我需要的是一种按需将新添加的文件列表返回到目录的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:19:35.577

您可以通过维护调用者的最后请求时间戳轻松实现此目的。然后将该时间戳传递给一个 java 类，该类将扫描目录以查找在该时间戳之后创建的文件。

就像是：

```
public List<File> getNewFiles(Date lastRequestedDate)
{
//Iterate the directory for files newer than the date passed in as parameter
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:19:49.263

有不同的方法。

**方法一：文件创建日期**

您可能想要列出所有文件并检查每个文件的创建时间戳。已经有[关于这个话题的深入讨论](https://stackoverflow.com/questions/32586/how-to-discover-a-files-creation-time-with-java)。只需检查时间戳是否大于您上次检查目录时保存的时间戳。

**方法二：创建和维护文件列表**

如果您负担得起内存和时间，请在目录中创建文件列表。遍历目录并将列表中尚未包含的所有文件添加到另一个列表中。对它们做任何你需要做的事情，并将它们添加到你的主列表中。

您还应该在每次成功检查和处理文件后序列化您的主列表并将其保存到磁盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:16:47.900

您可以维护文件名列表并检查新文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T09:23:34.340

您可以在单独的文件中维护文件指针。每次需要新/旧文件时，您都可以传递到以下方法。

```
package test;

import java.io.File;
import java.io.FileFilter;
import java.io.IOException;
import java.util.Arrays;
import java.util.Date;

import org.apache.commons.io.comparator.LastModifiedFileComparator;
import org.apache.commons.io.filefilter.AgeFileFilter;

public class AgeFileFilterTest {

    public static void main(String[] args) throws IOException {
    String directoryPath = "/home/vikas";
    String fileName = "fileName";
    File directory = new File(directoryPath);

    File[] files = directory.listFiles();
    System.out.println("\nBefore ");
    displayFiles(directory, new AgeFileFilter(new File(directoryPath+FileName) , true));
    System.out.println("\nAfter " );
    displayFiles(directory, new AgeFileFilter(new File(directoryPath+FileName),false));

}

public static void displayFiles(File directory, FileFilter fileFilter) {
    File[] files = directory.listFiles(fileFilter);
    Arrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_COMPARATOR);
    for (File file : files) {
        Date lastMod = new Date(file.lastModified());
        System.out.println("File: " + file.getName() + ", Date: " + lastMod + "");
    }
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T16:31:28.643

我建议您使用 Java 目录监视服务。实施监视服务应该相当快。让它在后台运行；它将继续排队事件 - `add`, `remove`, `delete`- 当它们发生时。每当您的按需 API 需要已添加的文件列表时，您只需执行以下操作：

*   轮询到目前为止已排队的所有事件
*   遍历它们，查找`add`事件类型并创建要返回的列表
*   清除您已投票的事件，以便它们不会出现在下一次投票中（有一个`reset`API 可以执行此操作）

这种方法的好处是：

1.  *更少的问题*：您必须扫描目录并跟踪添加的文件；Java 会为您执行此操作，因此该部分不会有任何错误。
2.  *更少的内存消耗*：使用时间戳方法，您将获得自上次扫描以来已修改的文件，因此您必须保留遇到的所有文件的列表以识别已添加的文件。但是使用目录监视服务，您将不得不维护任何此类数据结构。
3.  *更好的性能*：在按需方法执行期间，您不会执行目录列表或文件名比较；您只需遍历已排队的事件并创建返回值。

# c++ - 动态字符串数组 C++

> ID：15475438
> 
> 赞同：0
> 
> 时间：2013-03-18T11:13:31.717
> 
> 标签：c++, arrays, dynamic

我创建了一个固定长度的字符串：

```
string fileRows[900]; 
```

但有时我需要超过 900 个，有时 500 个就足够了。

之后我需要用文件行填充数组：

```
...
    string sIn;
    int i = 1;

    ifstream infile;
    infile.open(szFileName);
    infile.seekg(0,ios::beg);

    while ( getline(infile,sIn ) ) // 0\. elembe kiterjesztés
    {
        fileRows[i] = sIn;
        i++;
    } 
```

如何为这个数组创建动态长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:15:54.393

使用[std::vector](http://en.cppreference.com/w/cpp/container/vector)，向量被称为动态数组：

```
#include <vector>
#include <string>

std::vector<std::string> fileRows(900); 
```

实际上，您可以为元素保留空间并调用`push_back`：

```
std::vector<std::string> fileRows;
fileRows.reserve(900);   

while (std::getline(infile, sIn))
{
   fileRows.push_back(sIn);
} 
```

# service - 寻找像 transloadit.com 这样的在线图像格式转换服务

> ID：15475444
> 
> 赞同：1
> 
> 时间：2013-03-18T11:13:51.733
> 
> 标签：service, saas

在线上有很多视频+音频转码 SaaS 服务，但没有一个提供图像格式转换和操作。

我正在寻找一种服务，它公开了用于图像转换和操作的 API（至少是基本的，例如调整大小/裁剪/旋转/缩略图生成）。如果它还允许自动将结果推送到 AWS，那就太好了。

我发现的唯一服务是[http://transloadit.com](http://transloadit.com)

看起来不错，但在我开始使用它之前，我想将价格与其他服务（如果存在）进行比较。

*请注意，我正在寻找**带有 API**的开箱即用的**图像**转换 SaaS 服务。如果它同时提供图像和视频转码 - 太好了！如果它只是用于图像，也很好。

 **任何建议将不胜感激！

谢谢。

最大限度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-18T08:09:58.700

上周末偶然发现了[imgix](http://www.imgix.com/)。[他们的文档页面](http://www.imgix.com/docs)列出了通过 URL 提供的命令示例，并且[完整的 API](http://www.imgix.com/docs/urlapi)被广泛记录。值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T23:57:18.263

我刚刚发现了类似的东西[http://cloudinary.com](http://cloudinary.com)**

# oracle - 回滚对提交的更新语句的更改

> ID：15475448
> 
> 赞同：3
> 
> 时间：2013-03-18T11:13:59.457
> 
> 标签：oracle, oracle11g, commit, rollback, flashback

我的数据库中更新了大约 1500 条记录，不幸的是，我已经提交了更改。我记得有一个选项可以回滚 oracle 11g 中的更改。

我正在使用 Toad 工具，并且运行了以下查询

```
 FLASHBACK TABLE abc  TO TIMESTAMP (SYSTIMESTAMP - INTERVAL '15' minute); 
```

收到一条警告消息，指出“由于未启用行移动，因此无法闪回表。”

您能帮我执行命令并回滚 1500 条记录上的已提交更改吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:20:19.340

要为您的表启用行移动：

```
alter table abc enable row movement; 
```

但我建议在执行任何 DML / DDL 语句之前先备份表的当前状态。

# mysql - 使用 WHERE 子句查询上一个匹配行的差异

> ID：15475449
> 
> 赞同：1
> 
> 时间：2013-03-18T11:14:01.327
> 
> 标签：mysql

要将一行与前一行进行比较，我`JOIN`将一个表与前一行`id`（主键）进行比较：

```
CREATE TABLE `tablename` (
    id INT(5) PRIMARY KEY AUTO_INCREMENT,
    data INT
);

SELECT t1.id, t1.data, t1.data-(SELECT data FROM tablename WHERE id=t1.id-1) AS diff
FROM tablename t1 LEFT JOIN tablename t2 ON t1.id = t2.id
ORDER BY diff DESC LIMIT 1; 
```

如何将其限制为仅数据的特定子集？例如，如果将一列`user VARCHAR(32)`添加到表中，我如何将查询限制为仅区分特定用户？向两个查询添加一个简单的 WHERE 子句`SELECT`将不起作用，因为整个前提取决于序列`id`s。我想我可以将数据移动到一个临时表中，但如果有一个更清洁、更有效的解决方案，那么我会使用它。

我的意图是添加一个`WHERE user='someUser'`子句，该子句的差异将仅针对特定用户，而不是整个表。

这是一个工作[sqlfiddle](http://www.sqlfiddle.com/#!2/a1bd79/1)。我想修改此查询，使其仅适用于`WHERE name='a'`，结果将是`id=9, data=305, diff=125`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:53:55.813

干得好：

```
SELECT id, data, data - COALESCE(previous, data) as diff FROM (
SELECT
t.*,
@prev AS previous,
@prev:=t.data 
FROM
tablename t
, (SELECT @prev:=NULL) var
where name = 'a'
)sq
order by diff desc
limit 1 
```

解释：

```
, (SELECT @prev:=NULL) var 
```

变量的初始化。

```
@prev AS previous,
@prev:=t.data 
```

在第一列中输出变量的当前值，在第二列中分配当前行的值。

```
COALESCE(previous, data) 
```

如果 previous 是`NULL`，则返回列数据的值。因此，没有前一行的行的差异为零。

如果您有更多问题，请随时提问。

PS：这个查询甚至可能比你必须自加入的查询更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:25:56.530

如果我正确理解您的问题，我认为您应该使用以下内容：

```
SELECT t1.id, t1.data data_curr, t2.data data_prev, t1.data - t2.data data_diff
FROM (
  SELECT t1.id, t1.data, MAX(t2.id) max_id
  FROM
    tablename t1 INNER JOIN tablename t2
    ON t1.name = t2.name
       AND t1.id > t2.id
  WHERE
    t1.name = 'a'
  GROUP BY
    t1.id, t1.data
) t1 INNER JOIN tablename t2
  ON t1.max_id = t2.id 
```

请[在此处](http://www.sqlfiddle.com/#!2/d5df4/11)查看小提琴。这是标准 SQL，应该适用于任何 DBMS。

但是，如果您只需要最后一个数据差异，则可以`LIMIT 1`在主查询中使用（按 ID DESC 排序）来获取 name='a' 的最后一个数据，然后`LIMIT 1,1`获取倒数第二个数据：

```
SELECT   id, data data_curr,
         data -
         (SELECT data FROM tablename WHERE name='a' ORDER BY id DESC LIMIT 1,1) data_diff
FROM     tablename
WHERE    name='a'
ORDER BY id DESC
LIMIT 1 
```

请看[这里](http://www.sqlfiddle.com/#!2/c7d83/1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:00:54.050

鉴于您的数据，数据字段的值似乎正在上升，并且差异应始终为正值

这应该工作

```
SELECT 
  id, 
  max(data)-min(data) as diff,
  max(data) as data
  name
FROM
  (
    SELECT
      id,
      data,
      name 
    FROM 
      tablename 
    WHERE 
      name = 'a' 
    ORDER BY
      id desc 
    LIMIT 2 
  ) t
GROUP BY 
  name 
```

[**SQLFiddle**](http://sqlfiddle.com/#!2/6507c/4)演示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T18:16:57.390

你也可以做这样的事情——尽管 tombom 的版本可以更好地扩展......

```
 SELECT a.id
      , a.data
      , a.name
      , a.data-b.data ttl
   FROM
      ( SELECT x.* 
             , COUNT(*) rank 
          FROM tablename x 
          JOIN tablename y 
            ON y.name = x.name 
           AND y.id >=x.id 
         GROUP 
            BY x.id
      ) a
   JOIN
      ( SELECT x.* 
             , COUNT(*) rank 
          FROM tablename x 
          JOIN tablename y 
            ON y.name = x.name 
           AND y.id >=x.id 
         GROUP 
            BY x.id
      ) b
     ON b.name = a.name
    AND b.rank = a.rank + 1
  WHERE a.rank = 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:18:22.207

好吧，这不是一个好习惯，但我有时会像这样加入半加入

```
SELECT
  t1.id,
  t1.data,
  t1.data- t3.data AS diff
FROM tablename t1
  LEFT JOIN tablename t2
    ON t1.id = t2.id
  LEFT JOIN tablename t3
    ON t3.data = (SELECT
            data
          FROM tablename
          WHERE id > t1.id
          LIMIT 1)
ORDER BY diff DESC
LIMIT 1; 
```

# java - 将 Maven 参数注入 Java 类

> ID：15475450
> 
> 赞同：3
> 
> 时间：2013-03-18T11:14:03.950
> 
> 标签：java, maven, code-injection

我想将 settings.xml 配置文件参数注入 Java 类。我尝试使用 maven-annotation-plugin 但值为 null。我想知道这是不是因为这个插件是为 Mojo 设计的

Setting.xml 片段

```
 <profiles>
    <profile>
      <id>APP_NAME</id>
      <properties>
        <test.email>USER_EMAIL</test.email>
        <test.password>USER_PASSWORD</test.password>
      </properties>
    </profile>
  </profiles> 
```

在班上

```
@Parameter(defaultValue = "test.email", readonly = true)
private String userEmail;

@Parameter(defaultValue = "test.password", readonly = true)
private String userPassword; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T11:20:12.703

我会`maven-resources-plugin`用来生成`.properties`文件并避免生成代码。

```
<build>
  <resources>
    <resource>
      <directory>src/main/resources</directory>
      <filtering>true</filtering>
    </resource>
  </resources>
<build> 
```

并创建文件`src/main/resources/com/example/your/file.properties`：

```
testMail = ${test.email}
propertyName = ${maven.variable.name} 
```

在Java中访问它：

```
getClass().getResourceAsStream("/com/example/your/file.properties") 
```

更进一步，您可以通过以下方式强制`test.email`属性的存在`maven-enforcer-plugin`：

```
<build>
  <plugin>
    <artifactId>maven-enforcer-plugin</artifactId>
    <executions>
      <execution>
        <id>enforce-email-properties</id>
        <goals>
          <goal>enforce</goal>
        </goals>
        <configuration>
          <rules>
            <requireProperty>
              <property>test.email</property>
              <message>
                The 'test.email' property is missing.
                It must [your free error text here]
              </message>
            </requireProperty>
          </rules>
        </configuration>
      </execution>
    </executions>
  </plugin>
</build> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:20:49.947

您可以使用 Maven 生成一个[`Properties`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)文件并将其[加载](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load%28java.io.Reader%29) 到您的 Java 类中。

# c# - 使用服务器标签在母版页上显示文本

> ID：15475453
> 
> 赞同：0
> 
> 时间：2013-03-18T11:14:19.703
> 
> 标签：c#, asp.net

我有一个母版页，其中有以下代码：

```
 <div class="Version">
        <label><%System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString();%></label>                        
    </div> 
```

但这并没有最终呈现页面上的版本信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:16:00.120

我相信你在之后缺少一个等号`<%`：

```
<div class="Version">
    <label><%=System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString();%></label>                        
</div> 
```

# php - PHP 页面上的多个表单使用 AJAX 自动提交

> ID：15475455
> 
> 赞同：0
> 
> 时间：2013-03-18T11:14:22.613
> 
> 标签：php, javascript, html

是的，我有一个在页面上运行的查询，它为数据库中的每条记录打印一个表单（这是简化的，是的，我知道 mysql_* 已被贬值）：

```
$sql = "select * from `$table1`";
    $result = mysql_query ($sql) or die(mysql_error());
    while ($row = mysql_fetch_array($result)) 
     { 
       $carid = $row["car_id"]; 
       $carnum = $row["carnum"]; 
       $carlocation = $row["carlocation"];
       $carstate = $row["carstate"];

       echo "<tr id='$carid'>";
       echo "<td>$carnum</td>";
       echo "<td><form action='' method='post' id='form$carid'>";
       echo "<select id='popup' name='ctate'>";
       echo "<option value='In-Service-Bay'>In Service Bay</option>";
       echo "<option value='Awaiting-Service'>Awaiting Service</option>";
       echo "<option value='Service-Complete'>Service Complete</option>";
       echo "</select></td>";
       echo "<select id='popup' name='clocation'>";
       echo "<option value='Carpark-1'>Carpark-1</option>";
       echo "<option value='Carpark-2'>Carpark-2</option>";
       echo "<option value='Carpark-3'>Carpark-3</option>";
       echo "</select></td>";
       echo "<td><input type='submit' name='submit' value='Submit'>";
       echo "</form></tr>";
 }
 echo "</table>"; 
```

现在我想要做的是，当其中一个下拉列表被更改时，只有该表单提交。现在我知道，为了做到这一点，我需要使用一些 JS 和 AJAX，但无论如何我都不是 javascript 程序员，形状或形式。因此，在阅读了提交表单而不刷新页面后，我想我会尝试一下：

```
 print '<script type="text/javascript">';
  print "       

  $('#form1').change(function() 
  {
    console.log('success!');
    $.ajax({ 
    type: 'post',
    url: 'process.php',
    data: $('#form1').serialize(),
    success: function() {
    }
 });
            return false;
 }); 
  </script>"; 
```

现在原则上这是可行的，当我更改 form1 中的第一条记录时，它会执行并打印“成功！” 到日志。然而，它似乎没有调用 process.php，但这不是我的主要问题。我现在想要做的是实现它，以便它适用于所有表单。请记住，页面上的表单数量每天都有很大差异。

所以我这样做了：

```
$sql = "select * from `$table1`";
    $result = mysql_query ($sql) or die(mysql_error());
    while ($row = mysql_fetch_array($result)) 
     { 
       $carid = $row["car_id"]; 
       $carnum = $row["carnum"]; 
       $carlocation = $row["carlocation"];
       $carstate = $row["carstate"];

 $formname = "#form".$carid;

 print '<script type="text/javascript">';
 print "        var cnum;";
 print "        cnum = '$formname',";
 print "        

 $(cnum).change(function() 
 {
 console.log(cnum);
  $.ajax({ 
    type: 'post',
    url: 'process.php',
    data: $(cnum).serialize(),
    success: function() {
    }
 });
 return false;
  }); 
 </script>";

       echo "<tr id='$carid'>";
       echo "<td>$carnum</td>";
       echo "<td><form action='' method='post' id='form$carid'>";
       echo "<select id='popup' name='ctate'>";
       echo "<option value='In-Service-Bay'>In Service Bay</option>";
       echo "<option value='Awaiting-Service'>Awaiting Service</option>";
       echo "<option value='Service-Complete'>Service Complete</option>";
       echo "</select></td>";
       echo "<select id='popup' name='clocation'>";
       echo "<option value='Carpark-1'>Carpark-1</option>";
       echo "<option value='Carpark-2'>Carpark-2</option>";
       echo "<option value='Carpark-3'>Carpark-3</option>";
       echo "</select></td>";
       echo "<td><input type='submit' name='submit' value='Submit'>";
       echo "</form></tr>";
 }
 echo "</table>"; 
```

然而不幸的是，它并不那么简单，因为这不起作用。我无法确定它是否尝试提交页面上的每个表单，或者它是否不起作用。如果我硬设置表单名称但将 JS 保持在循环中，它可以工作，但它会多次提交我并不特别想要的记录。

正如我所说，我不是一个 javascript 人，所以您可以给我的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:20:30.167

它应该像`#form1`在第一个示例中更改为一样简单`form`。`$('#form1')`然后，您需要将函数内部的引用更改为`$(this)`

```
$('form').change(function() 
  {
    console.log('success!');
    $.ajax({ 
        type: 'post',
        url: 'process.php',
        data: $(this).serialize(),
        success: function() {
        }
    });
    return false;
 }); 
```

通过使用`$('form')`，您将事件应用于页面上的所有表单元素。jQuery 足够聪明，可以知道哪个表单触发了事件，因此 $(this) 是对触发事件的表单的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:22:41.700

问题出在这里：

```
 echo "<td><input type='submit' name='submit' value='Submit'>"; 
```

来自[jQuery 文档](http://api.jquery.com/submit/)

> 表单及其子元素不应使用与表单属性（例如提交、长度或方法）冲突的输入名称或 ID。名称冲突可能会导致令人困惑的失败。有关规则的完整列表并检查这些问题的标记，请参阅 DOMLint。

# javafx-2 - 使用 javafx 播放视频时如何使用时间轴

> ID：15475457
> 
> 赞同：1
> 
> 时间：2013-03-18T11:14:28.330
> 
> 标签：javafx-2

我们正在使用 JavaFx MediaPlayer 播放 .mp4 格式，我的时间线有问题，我的问题是如果我们点击时间线上的任何点，它应该从那个点开始播放。为此，我使用了以下代码

```
timeSlider.setOnMouseClicked(new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEvent t) {
        mediaPlayer.seek(Duration.seconds(timeSlider.getValue()));
       }
    }); 
```

但这不能正常工作。任何人都可以帮我解决上述问题吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:34:14.253

[Oracle 提供了一个关于为 JavaFX 创建视频播放器控件](http://docs.oracle.com/javafx/2/media/playercontrol.htm)的精彩教程。

[您可以在JavaFX Ensemble](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html#SAMPLES/Media/Advanced%20Media)应用程序中看到正在运行的教程播放器。

本教程包含有关合并播放器时间线的信息。

这是来自 Ensemble 的带有时间轴的 JavaFX 视频播放器控件的屏幕截图。

![javafx媒体播放器](../Images/b9d22a074159cec0580fd6fd2e1588b2.png)

创建一个滑块来控制[MediaView](http://docs.oracle.com/javafx/2/api/javafx/scene/media/MediaView.html)位置的步骤是：

1.  创建`MediaView`和它的关联`MediaPlayer`。
2.  创建一个`Slider`来控制时间。
3.  侦听对 的更改`Slider`并根据需要更新`MediaPlayer`位置。
4.  监听`MediaPlayer`当前时间的变化，并`Slider`酌情更新。

示例中的某些时间滑块特定代码片段是：

```
// Media player
MediaPlayer mp = new MediaPlayer(new Media(MEDIA_URL));

// Time label
Label timeLabel = new Label("Time: ");
timeLabel.setMinWidth(Control.USE_PREF_SIZE);
mediaBar.getChildren().add(timeLabel);

// Time slider
timeSlider = new Slider();
HBox.setHgrow(timeSlider, Priority.ALWAYS);
timeSlider.setMinWidth(50);
timeSlider.setMaxWidth(Double.MAX_VALUE);
timeSlider.valueProperty().addListener(new InvalidationListener() {
    public void invalidated(Observable ov) {
        if (timeSlider.isValueChanging()) {
            // multiply duration by percentage calculated by slider position
            if(duration!=null) {
                mp.seek(duration.multiply(timeSlider.getValue() / 100.0));
            }
            updateValues();
       }
    }
});
....
protected void updateValues() {
    if (playTime != null && timeSlider != null && volumeSlider != null && duration != null) {
        Platform.runLater(new Runnable() {
            public void run() {
                Duration currentTime = mp.getCurrentTime();
                playTime.setText(formatTime(currentTime, duration));
                timeSlider.setDisable(duration.isUnknown());
                if (!timeSlider.isDisabled() && duration.greaterThan(Duration.ZERO) && !timeSlider.isValueChanging()) {
                    timeSlider.setValue(currentTime.divide(duration).toMillis() * 100.0);
                }
                if (!volumeSlider.isValueChanging()) {
                    volumeSlider.setValue((int) Math.round(mp.getVolume() * 100));
                }
            }
        });
    }
}
...
mp.currentTimeProperty().addListener(new ChangeListener<Duration>() {
    @Override
        public void changed(ObservableValue<? extends Duration> observable, Duration oldValue, Duration newValue) {
            updateValues();
    }
});
// and also invoke updateValues when the MediaPlayer is played, paused, etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T13:05:36.127

在滑块值失效的侦听器中，您应该检查用户最近是否按下了鼠标按钮（例如，在过去 100 毫秒内）。Scala 中的示例代码（翻译成 Java 相当简单）：

```
val timeSlider = new Slider {
  /**
   * @return true, if user was pressed mouse button within last `t` ms
   */
  def mouseWasPressedWithinLast(t: Long): Boolean =
    (System.currentTimeMillis() - lastTimeMousePressed) <= t

  private var lastTimeMousePressed = 0l

  addEventFilter(MouseEvent.MOUSE_PRESSED, (e: MouseEvent) => {
    lastTimeMousePressed = System.currentTimeMillis()
  })
}

timeSlider.valueProperty().addListener(new InvalidationListener() {
  def invalidated(ov: Observable) {
    // Position should be updated in one of the two cases:
    //   1\. if user is sliding (then isValueChanging == true), or
    //   2\. if user clicked on slider to set it to new position (has recently pressed mouse button).
    if (timeSlider.isValueChanging || timeSlider.mouseWasPressedWithinLast(100)) {
      updatePosition(timeSlider.getValue)
    }
  }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T20:03:34.367

与原始问题相关并扩展尼古拉的观点：

使用在源代码 MediaPlayer.zip 中找到的“ [http://docs.oracle.com/javafx/2/swing/media-player.htm](http://docs.oracle.com/javafx/2/swing/media-player.htm) ”中的Oracle 原始代码，该代码存在以下问题。当用户单击滑块内的按钮/旋钮小部件或旋钮外部的条形区域时，值会相应更改。然而，当媒体正在播放时，用户只能通过移动旋钮来调整播放时间位置或音量。播放视频时，滑块也会通过旋钮小部件缓慢移动。

Nikolay 的建议缓解了修复问题。应将此建议添加到两个滑块中。如果您将两个滑块都更改为下面的 YieldingSlider，即使在播放视频时以及通过单击滑块的栏或滑块的旋钮来调整滑块小部件时，您也会看到更灵敏的滑块反应。

```
class YieldingSlider extends Slider
{
    private long lastTimeMousePressed = 0;

    public YieldingSlider()
    {
        addEventFilter(MouseEvent.MOUSE_PRESSED, new EventHandler<MouseEvent>()
        {
            @Override
            public void handle(final MouseEvent event)
            {
                lastTimeMousePressed = System.currentTimeMillis();
            }
        });
    }

    public boolean mouseWasPressedWithinLast(long t)
    {
        return (System.currentTimeMillis() - lastTimeMousePressed) <= t;
    }
} 
```

# android - 为什么要多次添加 OnCreateView 子片段？

> ID：15475458
> 
> 赞同：0
> 
> 时间：2013-03-18T11:14:28.277
> 
> 标签：android, android-fragments

当第二次调用 onCreateView 时，它会添加另一个 MyFragment 实例。例如，当这个 Fragment 从回栈返回时，它会显示 MyFragment 的两个实例。为什么？我应该如何预防？

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
 View view = inflater.inflate(R.layout.announcement, null);
 FragmentTransaction fragmentTransaction = getChildFragmentManager()
            .beginTransaction();
 fragmentTransaction.add(R.id.fragmentContainer, new MyFragment());
 fragmentTransaction.commit();
 return view;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:28:42.127

FragmentTransaction 应该在 onCreate 中完成：

```
@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 FragmentTransaction fragmentTransaction = getChildFragmentManager()
        .beginTransaction();
 fragmentTransaction.add(R.id.fragmentContainer, new MyFragment());
 fragmentTransaction.commit();
} 
```

感谢 Atrix1987

# java - 如何使用 javascript 和批处理脚本运行 java 文件

> ID：15475466
> 
> 赞同：0
> 
> 时间：2013-03-18T11:15:03.553
> 
> 标签：java, javascript, batch-file

我想使用 javascript 运行 java 文件。因此借助批处理文件。当尝试遵循它给出的代码时，页面无法显示......你能尽早帮助......

```
<html>
<head>

<script type="text/javascript">
function compression(str)
{
try{
alert("welcum");
  WshShell = new ActiveXObject("WScript.Shell");
  WshShell.Run (str,1,true);}
catch(e)
{
document.write("erro has occured ");
}
}
</script>

</head>
<body>
<a href="compression('explorer file:///C:\\Documents and 

Settings\\test.bat')">batch File</a>
</body>
</html>

--------test.bat file------
@echo off
cls
javac *.java
java LzwTut
pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:22:30.100

你能试试下面的

```
<a href="compression('file://c:/test.bat');">Batch File</a> 
```

您也可以尝试在压缩功能中运行 exec insted 吗？

# python - WTForms 小数分隔符（适用于非英语应用程序）

> ID：15475467
> 
> 赞同：3
> 
> 时间：2013-03-18T11:15:06.030
> 
> 标签：python, google-app-engine, python-2.7, wtforms

对于非英语应用程序，使用 , 作为小数分隔符是很常见的。我找不到任何关于根据语言环境更改十进制格式的参考。

WTForms 可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:13:02.313

当前的[wtforms 代码](https://bitbucket.org/simplecodes/wtforms/src/acf20942487e18a1b7cbc542e9130bf0adc111b7/wtforms/fields/core.py?at=default#cl-529)使用 Python[十进制](http://docs.python.org/2/library/decimal.html)模块，但它完全忽略了有关分隔符的区域设置（事实上，文档提供了[一个构建字符串表示的示例](http://docs.python.org/2/library/decimal.html#recipes)，该示例构建了字符串表示本身）。

您可以更改其中的第 561`fields\core.py`行

`format = '%%0.%df' % self.places`

至：

`format = '%%0,%df' % self.places`

但这将是一个丑陋的补丁，我建议打开一个[问题](https://bitbucket.org/simplecodes/wtforms/issues?status=new&status=open)以正确修复它

# paypal - 贝宝支付标准，无需创建贝宝账户

> ID：15475469
> 
> 赞同：13
> 
> 时间：2013-03-18T11:15:08.067
> 
> 标签：paypal, credit-card

我想销售媒体，并选择了 PayPal Payments Standard 来做这件事。

根据[官方文件](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/buynow_buttons#id089UG0WA0BI)，买家可以在没有贝宝账户的情况下进行购买。只需输入卡号/CVC、姓名等字段即可购买。

但是，当我单击使用 Paypal 按钮编辑器创建的“立即购买”按钮时 - 它提供了两个选项：“使用我的 PayPal 帐户付款”或“创建一个 PayPal 帐户”。*如果不*创建贝宝帐户，就无法付款。

我不想强迫买家记账并填写很多字段。卡号、到期日期、CVC 以及可能的名字/姓氏 - 这是必要且足够的。如何使它成为可能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T13:49:40.407

如果您所在的国家/地区支持允许买家在没有 PayPal 账户的情况下使用信用卡付款的功能，您只需在您的账户中启用 PayPal 账户可选。

这可以通过登录您的帐户并转到您的个人资料来完成。
进入您的个人资料页面后，您需要转到您的网站付款首选项。
这可能在您的销售工具下，具体取决于您拥有的帐户类型。
进入网站支付首选项页面后，您需要将 PayPal Account Optional 设置为“ON”。然后，这将允许您的买家仅使用信用卡付款。

请记住，这仅适用于受支持的国家/地区。此外，您的电子邮件地址必须得到确认，并且您**不得**设置订阅、定期付款或计费协议。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-02T14:56:14.987

我花了一些时间在 Paypal 客户技术和商业支持方面：他们说出于安全原因，Paypal Standard 不再支持不创建 Paypal 帐户的付款。

目前，拥有它的唯一方法是使用 Paypal Express Checkout 和 Paypal Pro。

可能此功能也将从 Paypal Express Checkout 中删除

## 更新

在其他一些贝宝帐户上工作时，我发现告诉我的内容并不总是正确的。有时允许在不创建帐户的情况下付款。这取决于几个因素，例如企业帐户的年龄或进行了多少次交易。我认为最终只是商业账户的可信度问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-20T20:10:07.393

我知道这是一篇较旧的帖子，但我遇到了完全相同的情况，经过几天的搜索，我终于找到了一种解决方法，即访客结账没有出现在快速结账中。

我基本上必须创建一个 PayPal Express Checkout 应用程序。

它最终比我预期的要容易得多。以下是我遵循的步骤：

1) 我登录了我的 PayPal 帐户并在这里创建了一个 paypal 应用程序：[https](https://developer.paypal.com/developer/applications/create) ://developer.paypal.com/developer/applications/create 我保存了创建的沙箱和生产客户端 ID 值，我以后需要它们

2) 然后我将 checkout.js 脚本添加到我的结帐页面：

PayPal 建议参考他们的脚本，而不是将本地副本下载到您的项目中。

3) 接下来，我去这里帮助创建结帐页面所需的 javascript：[https](https://developer.paypal.com/demo/checkout/#/pattern/client) ://developer.paypal.com/demo/checkout/#/pattern/client ，我使用了客户端 REST，并粘贴了它进入我的结帐页面。我使用在上面的步骤 1 中创建的客户端 ID 更新了沙盒和生产客户端 ID 值。

4）我在页面上添加了一个隐藏变量：我从后面的代码中设置了包括运费在内的总计。我知道还有其他方法可以做到这一点，但我是一个习惯性的生物。:)

5）然后，而不是生成的javascript中的硬编码金额，我从隐藏的输入对象中获取金额值：amount：{total：amount.value，currency：'USD'}

现在，当客户登陆我的结帐页面时，我会显示一个漂亮的数据网格/表格，其中显示了他们的订单详细信息和运费总额。当他们点击“使用 paypal 结帐”按钮时，paypal 会为我执行一次快速结帐，然后我就完成了。

# php - PHP 用另一个服务器数据库登录？

> ID：15475470
> 
> 赞同：-3
> 
> 时间：2013-03-18T11:15:11.670
> 
> 标签：php, mysql, sql-server, login, mysqli

如何使用另一个服务器数据库登录并列出该数据库中的一些内容？

需要哪些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:18:34.420

使用 PDO，您可以在同一脚本中轻松连接到两个不同的数据库/服务器。

```
<?php
$db1 = new PDO('mysql:host='.DB_HOST.';dbname='.DB_DATABASE.';charset=utf8', DB_USER, DB_PASS);
$db2 = new PDO('mysql:host='.DB_HOST2.';dbname='.DB_DATABASE2.';charset=utf8', DB_USER2, DB_PASS2);

//Select something from database 1      
$results = $db1->query("SELECT * FROM table");

//Select something from database 2
$results2 = $db2->query("SELECT * FROM another_table"); 
```

如果您想连接到本地主机之外的服务器 - 请记住打开防火墙并添加服务器的 IP 以访问主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:22:29.110

假设您要连接到 mysql db... 检查[mysqli](http://www.php.net/manual/en/mysqli.construct.php)而不是 localhost 添加远程主机。此外，您应该检查该服务器的防火墙是否允许传入连接到 mysql 正在运行的端口，例如 3306

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T11:20:04.193

如果你用 mysql_connect 连接就做

`$con2 = mysql_connect(host,user,pass,true);`真正的结尾告诉php创建一个新资源

# ruby-on-rails - 通过关联显示 has_many 作为 Active Admin 索引中的列

> ID：15475471
> 
> 赞同：1
> 
> 时间：2013-03-18T11:15:19.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin, has-many-through

如何显示 has_many_through 关联列表，关联作为列标题，通过：值作为表行中的条目？

我有 3 个模型：

```
class Jobs 
  attr_accesor :title 

  has_many :scores 
  has_many :factors, through: :scores 
end 

class Scores 
  attr_accesor :score 

  belongs_to :job 
  belongs_to :factor 
end 

class Factor 
  attr_accesor :name 
  has_many :scores 
  has_many :jobs, through: :scores 
end 
```

我希望能够在 Jobs 索引中显示每个 Job 的一行，每个 Factor 的标题作为列标题，每个 Job 的分数作为单元格中的值。

我希望必须在`app/admin/jobs.rb`文件中做这样的事情：

```
index do |jobs|
  column :title
  jobs.scores.each do |score|
    column(score.factor.name) { |score| score.score }
  end
end 
```

并得到这样的输出：

```
Job              |  Education  |  Experience  |  Leadership  |  ...  |
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
CEO              |     600     |     720      |     580      |  ...  |
Admin Assistant  |     210     |     200      |     150      |  ...  | 
```

但是 activeadmin 似乎不喜欢这`jobs.scores.each`条线，给了我以下错误：

```
undefined method `scores' for 
#<ActiveAdmin::Views::IndexAsTable::IndexTableFor:0x00000104d1dad0> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:58:33.900

如果我正确理解您的数据，我认为这将起作用。您可以在一条线上完成所有操作，如果这不起作用，请查看地图或收集。您还可以链接每个和映射。确保您使用的是紧凑型，这样您就不会遇到零。下面我假设 score.factor.name 等于每列应该命名的内容和填写的数据。

```
索引做|工作|
  列：标题
  “教育”栏目 |job|
   job.scores.map { |分数| 如果 score.factor.name == "教育" }.compact 则得分
  结尾
  “经验”栏目做|工作|
   job.scores.map { |分数| score if score.factor.name == "经验" }.compact
  结尾
结尾

```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-19T07:33:06.120

请参阅此示例以了解 Jobs has_many 分数

```
ActiveAdmin.register Jobs do 
 index do
 :scores do |i|
   table_for i.scores do
     column do |user|
       user.scores
     end
   end
 end
 end
end 
```

这不是您问题的确切解决方案，但它是您如何做到这一点的概述..！

# php - 如果 PHP 中只有一个条目，则显示“单词”单数？

> ID：15475482
> 
> 赞同：1
> 
> 时间：2013-03-18T11:15:52.820
> 
> 标签：php

我有这样的跨度：

```
<p> <span>{{ queue_count }} </span> </p> 
```

`queue_count`有时可能包含 0 或 1 个条目，有时更多。如果 queue_count 小于或等于 1 我想显示`{{ queue_count }} entry`否则`{{ queue_count }} entries`，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:22:47.933

试试这个：

```
<p> <span>{{ queue_count }} (queue_count == 1)?'entry':'entries' </span> </p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:18:40.740

它非常简单。使用 if else 条件。

```
if(queue_count <= 1) {
   <p> <span>{{ queue_count }} entry </span> </p>
} else {
    <p> <span>{{ queue_count }} entries </span> </p>
} 
```

# c - 包含函数指针的结构，其自身作为 C 中的返回类型

> ID：15475488
> 
> 赞同：5
> 
> 时间：2013-03-18T11:16:00.803
> 
> 标签：c, struct, function-pointers

得到以下数据结构：

```
typedef struct
{
    lamp *lamp;
    unsigned char a;
    unsigned char b;
    unsigned char c;
    unsigned char d;
    unsigned char e;
    void (*func)(struct event *);
} event; 
```

结构内的最后一行应该是一个指向函数的指针，该函数返回类型为 void，并带有指向事件的指针作为参数，例如：

```
void function(event *evt); 
```

虽然，我收到以下警告消息：“它的范围只是这个定义或声明，这可能不是你想要的”。这是对还是错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T11:19:44.940

您的结构需要像这样定义：

```
typedef struct event  // <<< note the `event` tag here
{
    lamp *lamp;
    unsigned char a;
    unsigned char b;
    unsigned char c;
    unsigned char d;
    unsigned char e;
    void (*func)(struct event *);
} event;              // <<< you can still keep `event` as a typedef
                      //     which is equivalent to `struct event` 
```

# node.js - 以零停机时间升级 nodejs websocket Web 应用程序

> ID：15475489
> 
> 赞同：2
> 
> 时间：2013-03-18T11:16:09.057
> 
> 标签：node.js, websocket

使用在 Unicorn 上运行的 Rails 等无状态 Web 应用程序，Google 很容易找到有关进行零停机升级的说明。

但是，升级具有 websocket 连接的 nodejs web 应用程序的最佳实践是什么？如何在不中断的情况下继续这些 websocket 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:06:29.713

将新代码部署在不同的端口上，然后将原始端口转发到这个新实例。在会话结束之前，旧连接仍将连接到您的旧应用程序，并且所有新连接都将与新实例建立。

当您对所有用户都在新代码库上感到满意时，您可以关闭旧进程。

# objective-c - 开发设备令牌与生产设备令牌不同？

> ID：15475490
> 
> 赞同：1
> 
> 时间：2013-03-18T11:16:17.760
> 
> 标签：objective-c, certificate, push-notification

我的推送通知有问题，在开发中像魅力一样工作，但在生产中没有......我已经搜索了一个解决方案，从我所读到的似乎开发中生成的设备的设备令牌不同于从应用程序商店下载应用程序时生成的内容.. 可以吗？

发送通知的 php 脚本似乎可以正确连接并发送通知，所以我猜测问题是否仅出在我的个人设备上，因为用于发送通知的设备令牌是在我开发时生成的......

# php - 显示附加到页面的图像包含媒体库（而不是所有附件）

> ID：15475491
> 
> 赞同：1
> 
> 时间：2013-03-18T11:16:24.733
> 
> 标签：php, wordpress, gallery

我正在使用 Wordpres Bootstrap，默认情况下不显示来自画廊的图像（wp 的默认媒体库）。我只是想像默认的 WordPress 那样显示来自画廊的图像。我正在尝试一个有效的脚本，但它显示了媒体库中上传的所有图像，而不是唯一附加到单个页面的图像。从 3 天开始，我会为此发疯，但找不到解决方案！:(

```
<ul>
<?php $images = get_children('post_type=attachment&post_mime_type=image&post_parent=' . $post->ID . ' &orderby=menu_order&order=ASC');
foreach( $images as $img_id => $img_r ) :
     $thumb = wp_get_attachment_image_src( $img_id, 'thumbnail', true );
     $full = wp_get_attachment_image_src( $img_id, 'full', true ); ?>
     <li>
        <a href="<?php echo $full[0] ?>">
             <img src="<?php echo $thumb[0] ?>" alt="<?php echo get_the_title( $img_id ) ?>" title="<?php echo get_the_title( $img_id ) ?>">
        </a>
     </li>

<?php endforeach; ?>
</ul> 
```

# git - 无法使用 git checkout 将分支中的某些路径还原为另一个分支的路径

> ID：15475492
> 
> 赞同：1
> 
> 时间：2013-03-18T11:16:31.600
> 
> 标签：git

我的当前分支从另一个分支中的特定路径进行了一些更改。（有一个需要带来的依赖。）

我最初使用以下命令带来了这些更改：

```
git checkout master
git checkout -b new_branch
git checkout other_feature path/to/dependency 
```

现在我需要取消选择这种依赖关系，或者至少是它的某些方面（其中的子路径`path/to/dependency`）。

我已经运行`git diff --name-status master..new_branch path/to/dependency`，它按预期显示了差异。

但是，`git checkout master path/to/dependency`不会成功将此目录的内容还原为 master 的内容。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:43:48.250

以防万一，请尝试：

```
 git checkout --force  master path/to/dependency/subpath/to/revert
 # or:
 git checkout --ours master path/to/dependency/subpath/to/revert 
```

从[`git checkout`手册页](http://git-scm.com/docs/git-checkout)：

```
-f
--force 
```

> 切换分支时，即使索引或工作树与 HEAD 不同，也要继续。这用于丢弃本地更改。
> 
> 从索引中检出路径时，不要在未合并的条目上失败；相反，未合并的条目将被忽略。

第一个选项“--force”应该是您正在寻找的，但如果涉及合并，那么第二个选项（`--ours`不兼容`--force`）也可以提供帮助。

```
--ours
--theirs 
```

> 从索引中检出路径时，请检出阶段`#2`( `ours`) 或`#3`( `theirs`) 以获取未合并的路径。

# opencart - vqmod 为所有文件生成缓存

> ID：15475493
> 
> 赞同：1
> 
> 时间：2013-03-18T11:16:32.890
> 
> 标签：opencart

是否可以一次为 vqmod 生成所有 vqcache 文件？

我想在服务器负载低时运行此脚本一次，它将遍历所有 qmod 文件并应用所有更改，准备好并等待高负载。

这也会提醒我任何 vqmod 错误，而不必等待它们发生。

例如，当我安装/卸载扩展时，我还需要卸载 vqmod 扩展：

```
/**
 * install/uninstall vqmod files for extension
 *
 * @param string $action = install/uninstall
 */
private function _vqmodAction($action){

    $vqmod_path = str_replace("system", "vqmod", DIR_SYSTEM);

    // Clear vqmod cache
    $files = glob($vqmod_path.'vqcache/vq*');
    if ($files) {
        foreach ($files as $file) {
            if (file_exists($file)) {
                @unlink($file);
                clearstatcache();
            }
        }
    }

    // Force vqmod to re-generate cache
    global $vqmod;
    $vqmod->modCheck(DIR_SYSTEM . 'startup.php');

    // Re-name vqmod files
    $vqmod_xml_path = $vqmod_path . "xml/";
    $vqmod_files = array('file', 'file_languages', 'file_admin');
    foreach($vqmod_files as $filename){
        if($action == "uninstall"){
            $from = '.xml';
            $to = '.xml_';
        } else {
            $from = '.xml_';
            $to = '.xml';
        }
        if (file_exists($vqmod_xml_path.$filename.$from)) {
            rename($vqmod_xml_path.$filename.$from, $vqmod_xml_path.$filename.$to);
        }
    }

    return true;
} 
```

modCheck 启动.php 的原因是因为这包括所需的文件和通过 vqmod 所做的更改。这是处理这种情况的正确方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T16:50:30.840

vQmod 只要求您删除`/vqmod/mods.cache`最新版本中的文件以使其刷新。它还会在最新版本（2.3.X +）中重命名/删除/添加文件时重新生成，因此除非您有旧版本，否则这不是问题。Erdinç Çorbacı 对于 httrack 工具是正确的，但有一个例外 - 除非登录到管理区域，否则它不会为任何管理页面生成 vqcache 文件。当然，只需删除`/vqmod/vqcache/vq2-*`文件和`/vqmod/mods.cache`（如果存在）就足以强制重新生成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:53:57.720

您可以使用 httrack 等外部程序手动执行此操作。当您使用类似的应用程序抓取您的网站时，所有页面都将在您的网站访问者之前被访问。因此将创建所有缓存文件。

> [http://www.httrack.com/](http://www.httrack.com/)

你需要偶尔重复一遍吗？如果是这样，您需要制作一个自我爬行/或缓存制造商脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T10:28:00.967

我没有足够的声誉直接回复@dhaupin 的评论，希望他们能看到这一点。

我遇到了类似的问题，在这里描述：[https ://github.com/vqmod/vqmod/issues/51](https://github.com/vqmod/vqmod/issues/51)

..并想出了这个似乎可行的快速/肮脏/hacky解决方案：[https ://gist.github.com/jktoole/be9fdee2263b48194d07](https://gist.github.com/jktoole/be9fdee2263b48194d07)

您可能可以将 PHP 位修改为有助于解决您的问题的东西。

# vba - 如何将 msWord 标题转换为保留段落级别的表格

> ID：15475495
> 
> 赞同：1
> 
> 时间：2013-03-18T11:16:39.827
> 
> 标签：vba, ms-word, format

我需要将使用大纲视图开发的 Word 文档转换为表格，以保留标题级别并将它们转换为列。格式类似于：

```
========================================
Heading 1  |  Heading 2  |  Heading 3
========================================
Title 1.0  |  Title 1.1  |  Title 1.1.1
----------------------------------------
           |  Title 1.2  |  
----------------------------------------
           |  Title 1.3  |  Title 1.3.1
----------------------------------------
Title 2.0  |  Title 2.1  |  Title 2.1.1
---------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T14:54:10.173

根据要求，这是答案。

**解决方案：** 我在这里使用了代码：[从 Word 文档中获取标题，](https://stackoverflow.com/questions/274814/getting-the-headings-from-a-word-document)这是一个很好的开始 - 感谢[VonC](https://stackoverflow.com/users/6309/vonc)并对 CreateOutline 子例程做了一些修改：

```
Public Sub CreateOutline()
    Dim docOutline As Word.Document
    Dim docSource As Word.Document
    Dim rng As Word.Range

    Dim astrHeadings As Variant
    Dim strText As String
    Dim intLevel As Integer
    ' ========================================
    ' Added a static variable to retain the 
    ' last paragraph outline level
    ' ========================================
    Static intLastLevel As Integer
    ' ========================================
    Dim intItem As Integer

    Set docSource = ActiveDocument
    Set docOutline = Documents.Add
    ' Content returns only the
    ' main body of the document, not
    ' the headers and footer.
    Set rng = docOutline.Content

    astrHeadings = docSource.GetCrossReferenceItems(wdRefTypeHeading)
    For intItem = LBound(astrHeadings) To UBound(astrHeadings)
        ' Get the text and the level.
        strText = Trim$(astrHeadings(intItem))
        intLevel = GetLevel(CStr(astrHeadings(intItem)))

        ' ========================================
        ' If the paragraph level is increasing, add a tab,
        ' if decreasing add a new line, and insert the appropriate 
        ' tabs as prefix.
        ' ========================================
        If intLevel > intLastLevel Then
            strText = vbTab & strText
        Else
            strText = vbNewLine & String(intLevel, Chr(9)) & strText
        End If
        ' ========================================

        ' Add the text to the document.
        rng.InsertAfter strText
        ' Set the style of the selected range and
        ' then collapse the range for the next entry.
        ' rng.Style = "Heading " & intLevel       ' Removed the style setting
        ' ========================================
        ' Remeber the current paragraph level
        ' ========================================
        intLastLevel = intLevel
        rng.Collapse wdCollapseEnd
    Next intItem
End Sub

Private Function GetLevel(strItem As String) As Integer
    ' Return the heading level of a header from the
    ' array returned by Word.

    ' The number of leading spaces indicates the
    ' outline level (2 spaces per level: H1 has
    ' 0 spaces, H2 has 2 spaces, H3 has 4 spaces.

    Dim strTemp As String
    Dim strOriginal As String
    Dim intDiff As Integer

    ' Get rid of all trailing spaces.
    strOriginal = RTrim$(strItem)

    ' Trim leading spaces, and then compare with
    ' the original.
    strTemp = LTrim$(strOriginal)

    ' Subtract to find the number of
    ' leading spaces in the original string.
    intDiff = Len(strOriginal) - Len(strTemp)
    GetLevel = (intDiff / 2) + 1
End Function 
```

然后，我在新文档中突出显示了整个输出并将其转换为表格。我遇到的唯一问题是“空白”的第一列很容易修复，然后为标题添加了必要的格式。

希望其他人觉得这很有用。

# sql - 这个案例陈述有什么问题？获取缺少关键字错误

> ID：15475497
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:16:46.830
> 
> 标签：sql, jasper-reports

我不确定为什么下面的 case 语句会出现 Missing keyword 错误。

```
WHERE tb.BOOKED_DATE = TO_DATE($P{pFromDate}, 'dd/MM/yyyy')
AND (case when $P{pTxnStatusId} = '11' then pg.RESPONSE_CODE is Not Null else pg.RESPONSE_CODE = $P{pTxnStatusId} end) 
```

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:22:43.413

我不认为 case 语句是您想要的，您似乎正在尝试将逻辑应用于您的 where 语句。试试这个，转换为 AND 和 OR：

```
WHERE tb.BOOKED_DATE = TO_DATE($P{pFromDate}, 'dd/MM/yyyy')
AND (($P{pTxnStatusId} = '11') OR ($P{pTxnStatusId} = '0' AND pg.RESPONSE_CODE = 0)) 
```

# directory - 在同一个域上安装两个 opencart？

> ID：15475498
> 
> 赞同：1
> 
> 时间：2013-03-18T11:16:47.217
> 
> 标签：directory, installation, opencart

我有一家双语/双语 Opencart 商店。出于地理定位目的，我需要在新目录中添加新商店（我不想要子域）。我想克隆新目录中的所有商店和数据库，然后在那里进行必要的更改。可能吗？可能是新的oc安装？如何？

非常感谢乌戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:19:07.030

OpenCart 已经支持

```
Multi channel
Multi domain
Multi store
Multi currency
Multi langauge 
```

因此，您的语言和货币集或多商店可以限制为该特定语言。. 包括让商店默认为某个主题、某种货币和语言。

拥有数百个不同的 opencart 文件夹并不是一个好主意，只需创建一个新商店并添加国家、语言和货币设置。您也不需要子域。

# java - 玩！2.1 要我写scala代码

> ID：15475500
> 
> 赞同：0
> 
> 时间：2013-03-18T11:16:49.210
> 
> 标签：java, scala, playframework, playframework-2.1

我希望这是我在迁移到 Play 时遇到的最后一个错误！2.1。

`compile`我所有的控制器返回都使用命令引发错误。

```
return ok(createOrUpdate.render(Secured.getConnectedUser(), getCustomers(), User.build(user)));

[error]   required: User,scala.collection.immutable.List<User>,User
[error]   found: User,java.util.List<User>,<null> 
```

不明白为什么要玩！2.1 想让我使用scala api 而不是java api。

这是我的`build.scala`文件：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "webapp-stativiz"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      javaCore,
      javaJdbc,
      javaEbean,
      "org.mongodb" % "mongo-java-driver" % "2.10.1",
      "pdf" % "pdf_2.9.1" % "0.3",
      "commons-io" % "commons-io" % "1.3.2",
      "commons-codec" % "commons-codec" % "1.7"
    )

    val main = play.Project(appName, appVersion, appDependencies, mainLang = JAVA).settings(
          resolvers += Resolver.url("My GitHub Play Repository", url("http://www.joergviola.de/releases/"))(Resolver.ivyStylePatterns) 
    )

} 
```

**编辑 ：**

使用`run`命令我有这个例外：

```
sbt.PlayExceptions$CompilationException: Compilation error[error: method render in class createOrUpdate cannot be applied to given types;]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15$$anonfun$apply$16.apply(PlayReloader.scala:349) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15$$anonfun$apply$16.apply(PlayReloader.scala:349) ~[na:na]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15.apply(PlayReloader.scala:349) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15.apply(PlayReloader.scala:346) ~[na:na]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:na] 
```

**解决方案 ：**

删除您的项目。创建一个新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:10:09.330

scala 应该处理从 java 列表到 scala 列表的类型转换。所以我认为您可能正在查看列表类型而不是预期类型用户的 null。以下语句中的最后一个字段是否返回 null？

```
return ok(createOrUpdate.render(Secured.getConnectedUser(), getCustomers(), User.build(user)));

[error]   required: User,scala.collection.immutable.List<User>,User
[error]   found: User,java.util.List<User>,<null> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:27:01.653

`mainLang = JAVA`Play 中不再需要！2.1：对 Play 的依赖`java*`就足够了！识别您的主要应用程序语言。

您文件的其余部分似乎正确。尝试运行`play clean clean-all compile`以使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:04:36.390

解决方案是：

1.  创建一个新项目
2.  将您的文件放入（应用程序、公共...文件夹）
3.  删除旧项目

那么……这叫迁移吗？玩！2.1 是我见过的最糟糕的版本 :(

# c++ - 成员函数指针错误，增强绑定

> ID：15475501
> 
> 赞同：1
> 
> 时间：2013-03-18T11:16:52.410
> 
> 标签：c++, boost, bind

我编写了一个客户端，它在没有任何类的单个文件中连接到服务器。这显然不是一种好的编程方式，所以当代码最终按照我的意愿运行时，我使用以下 client.h 创建了 myclient 类：

```
 #include <boost/asio.hpp> 
    #include <boost/array.hpp> 
    #include <iostream> 
    #include <string> 
    #include "mtbf.h"
    #include <boost/date_time/posix_time/posix_time.hpp>

    class myclient
    {
    public:
    boost::asio::io_service io_service; 
    boost::asio::ip::tcp::resolver resolver; 
    boost::asio::ip::tcp::socket sock; 
    boost::array<char, 4096> buffer; 
    typedef boost::posix_time::time_duration duration_t;
    typedef boost::posix_time::ptime timestamp_t;
    std::vector<std::string> tokens;
    boost::system::error_code m_err_feedback;

            enum ConnectionState
        {
            WAIT_FOR_HEADER,
            WAIT_FOR_DATA,
            PACKET_COMPLETE
        };
    myclient(std::string port);
    private:
        void read_handler(const boost::system::error_code &ec, std::size_t bytes_transferred);
        void connect_handler(const boost::system::error_code &ec);
        void resolve_handler(const boost::system::error_code &ec, boost::asio::ip::tcp::resolver::iterator it);

    }; 
```

我没有写client.cpp的完整代码，但这里是错误发生的地方（构造函数）

```
 myclient::myclient(std::string port):resolver(io_service),sock(io_service)
    {
        tcp::resolver::query query("127.0.0.1", port); 
        resolver.async_resolve(query, boost::bind(&myclient::resolve_handler, this)); 
        io_service.run(); 
    } 
```

我对 c++ 相当陌生，但我知道我需要一个 boost::bind 来调用成员函数的引用

```
 resolver.async_resolve(query, boost::bind(&myclient::resolve_handler, this)); 
```

但不知何故这不太正确..我收到一个错误：

```
error   8   error C2298: 'return': Invalid procedure for an expression with pointer to memberfunction C:\projekte\libs\boost_1_53_0-VC11\boost\bind\mem_fn.hpp  342 1   client 
```

**编辑：**感谢您的回复..但似乎还有更多错误即将到来。我错过了一些微不足道的事情吗？这是来自 client.cpp 的代码（我删除了 read_handler 中的实际算法，因为它不重要）

```
 #include "client.h"
    using boost::asio::ip::tcp;

    myclient::myclient(std::string port):resolver(io_service),sock(io_service)
    {
        tcp::resolver::query query("127.0.0.1", port); 
        resolver.async_resolve(query, boost::bind(&myclient::resolve_handler, this,boost::asio::placeholders::error,boost::asio::placeholders::iterator)); 
        io_service.run(); 
    }

    void myclient::read_handler(const boost::system::error_code &ec, std::size_t bytes_transferred) 
    { 

    .
    .
    .

    } 

    void myclient::connect_handler(const boost::system::error_code &ec) 
    { 
      if (!ec) 
      { 
        sock.async_read_some(boost::asio::buffer(buffer), boost::bind(&myclient::read_handler, this,&ec)); 
      } 
    } 

    void myclient::resolve_handler(const boost::system::error_code &ec, boost::asio::ip::tcp::resolver::iterator it) 
    { 
      if (!ec) 
      { 
        sock.async_connect(*it, boost::bind(&myclient::connect_handler, this, &ec, it)); 
      } 
    } 
```

有了这个，我得到如下错误：

```
error   2   error C2825: "F": must be a class or namespace "::".    C:\projekte\libs\boost_1_53_0-VC11\boost\bind\bind.hpp  69  1   client
error   3   error C2039: 'result_type': is not an element of '`global namespace''   C:\projekte\libs\boost_1_53_0-VC11\boost\bind\bind.hpp  69  1   client 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:20:48.197

您忘记了以下参数的占位符`resolve_handler`：

```
boost::bind(&myclient::resolve_handler, this,
    boost::asio::placeholders::error, 
    boost::asio::placeholders::iterator) 
```

# javascript - 如何使用 jquery 将 var 转换为 xml 内容

> ID：15475507
> 
> 赞同：0
> 
> 时间：2013-03-18T11:17:32.317
> 
> 标签：javascript, jquery, jquery-plugins, xml-parsing, xml-serialization

我目前正在使用 Jquery，我的整个项目只需要使用 sharepoint 客户端对象模型来完成（所以我不能使用服务器端编码）。我创建了一个 xml 结构（通过将一些字符串附加在一起）并将其存储在 jquery var 变量中。现在我的变量内容看起来像这样

```
<Collection xmlns="http://schemas.microsoft.com/collection/metadata/2009"
xmlns:ui="http://schemas.microsoft.com/livelabs/pivot/collection/2009"
SchemaVersion="1" Name="listname">
    <FacetCategories>
        <FacetCategory Name="Title" Type="String" />
        <FacetCategory Name="Created By" Type="String" />
        <FacetCategory Name="Modified By" Type="String" />
    </FacetCategories>
    <Items ImgBase="http://460d87.dzc">
        <Item Id="0" Img="#0" Name="Name1" Href="http://site/1_.000">
            <Facets>
                <Facet Name="Title">
                    <String Value="Name1" />
                </Facet>
            </Facets>
        </Item>
    </Items>
</collection> 
```

我想将此变量转换为纯粹基于 jquery 的 xml 内容。我使用了 ParseXml() 方法，但我无法在 alert() 中看到输出。这个你能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:27:33.863

只需使用本机内置的 XML 解析器：

```
var parser, xml;
if (window.DOMParser) {
    parser = new DOMParser();
    xml = parser.parseFromString(str, "text/xml");
}
else { // IE
    xml = new ActiveXObject("Microsoft.XMLDOM");
    xml.async = "false";
    xml.loadXML(str);
}

var nodes = xml.getElementsByTagName('FacetCategory');

var i, l = nodes.length, items = [];
for (i = 0; i < l; i++) {
    console.log(nodes[i].getAttribute('Name'));
} 
```

[http://jsfiddle.net/QqtMa/](http://jsfiddle.net/QqtMa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:33:54.790

您的 xml 无效，您的根元素是`Collection`，但结束标记是`collection`small `c`，因此解析器失败

# php - 在 html 文本中搜索百分比匹配文本

> ID：15475508
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:17:34.560
> 
> 标签：php

有任何方法可以比较字符串并以下列方式获得结果。

**找到文本** `eg. abc = abc`

*或* **找到文本但略有不同** `eg. abc = abd`

*或* **找不到文本** `eg. abc = xyz`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:32:24.787

我想用[strip_tags()](http://php.net/manual/en/function.strip-tags.php)删除html标签，然后用[similar_text()](http://www.php.net/manual/en/function.similar-text.php)计算两个字符串之间的相似度：

```
$text = 'Test paragraph';
$html = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';

$stripped_html = strip_tags($html); // Remove html tags
similar_text($stripped_html, $text, $percentage); // Calculating ...
echo $percentage; 
```

# product - 在 prestashop 管理员的编辑产品页面中添加一个字段

> ID：15475509
> 
> 赞同：0
> 
> 时间：2013-03-18T11:17:43.000
> 
> 标签：product, prestashop

我在 prestashop 数据库的产品表中添加了一个字段“mystock”。现在我想在编辑产品页面中显示/编辑这个文件。产品更新时也会更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-27T14:04:10.893

这个适用于我的 prestashop 1.5.4

添加一个文件 Product.php 到 \override\classes 包含：

```
 <?php
    Product::$definition['fields']['mystock'] = array('type' => ObjectModel::TYPE_INT, 'validate' => 'isUnsignedInt');
    class Product extends ProductCore 
    { 
       public $mystock; 
    } 
```

...假设您需要一个字段来输入数字。

然后 3) altafhussain 的回答

不要忘记将您的字段添加到数据库中，对于数字字段：
ALTER TABLE `ps_product`ADD `mystock`INT NOT NULL;

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T07:13:37.510

此过程需要逐步解决。下面我列出了它们。

1) 打开类/Product.php。**公开 $mystock** ; 在类属性列表中，您可以在类启动后看到。

2) 在文件中，找到**public static $definition = array(** ，这将是一个长数组。找到**'fields' => array(**在里面，你会看到所有的数据库字段都放置了验证，数据类型等. 将您的 mystock 作为另一个项目放在该数组中，并像放置其他字段一样放置正确的验证和数据类型。

3) 现在打开**adminFolder/themes/default/template/controllers/products/informations.tpl**并将具有正确名称和 ID 的字段放在适当的位置。请注意，字段名称/ id 都应与数据库字段名称和我们在 Products.php 类中添加的名称相同。

就是这样，希望您了解该过程并使其发挥作用。

谢谢

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-22T15:50:02.513

我遇到了这篇文章并基于它构建了我的组件，它似乎是最干净的解决方案：http: [//nemops.com/prestashop-products-new-tabs-fields/](http://nemops.com/prestashop-products-new-tabs-fields/)基本上它描述了如何制作一个模块，它添加了多语言产品编辑页面上自定义面板中的字段..

无需编辑模板、核心文件或添加覆盖文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-10T19:15:06.710

谢谢阿尔塔夫萨因。您必须将您的字段添加到“products_shop”和“products”表中。

```
ALTER TABLE ps_product_shop ADD `mystock` int NOT NULL DEFAULT 0;
ALTER TABLE ps_product ADD `mystock` int NOT NULL DEFAULT 0; 
```

我正在使用 ps 1.6.0.6

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-07T16:55:41.390

最好的四步综合解决方案是：

1) 添加一个文件 Product.php 到 \override\classes 包含：

```
<?php
Product::$definition['fields']['mystock'] = array('type' => ObjectModel::TYPE_INT, 'validate' => 'isUnsignedInt');
class Product extends ProductCore 
{ 
   public $mystock; 
} 
```

2) 打开 adminFolder/themes/default/template/controllers/products/informations.tpl 并将具有正确名称和 ID 的字段放在适当的位置。

3) 删除文件缓存/class_index.php

4）将您的字段添加到数据库中，对于数字字段：

```
ALTER TABLE ps_product ADD mystock INT NOT NULL; 
```

[感谢 Bell418 的 1) 和 4) 以及 Altaf Hussain 的 2)]

# c# - ReferenceError：未定义事件

> ID：15475512
> 
> 赞同：1
> 
> 时间：2013-03-18T11:17:49.390
> 
> 标签：c#, jquery, asp.net-mvc-3

在我的 asp.net mvc3 页面中，我使用 jquery 来显示日历以显示添加到数据库中的事件。它在谷歌浏览器中运行良好，但在 Firefox 19.0.2 中显示以下错误

```
 <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.8.3.js")">   </script>
  <script type="text/javascript" src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-i.css">         
<link rel="stylesheet" href="../../Content/css/styleui.css" />   

   <script type="text/javascript">
        $(document).ready(function () {
            $.getJSON("/Page/dates", null, function (data) {
                var s = eval(data);
                alert(s);
                showevents(s);
            });
            function showevents(events) {
                $("#datepicker").datepicker({
                beforeShowDay: function (date) {
                    var result = [true, '', null];
                    var matching = $.grep(events, function (event) {
                        return event.Date.valueOf() === date.valueOf();
                    });
                    if (matching.length) {
                        result = [true, 'highlight', event.Title];
                    }
                    return result;
                },
                onSelect: function (dateText) {
                    var date, selectedDate = new Date(dateText), i = 0, event = null;
                    while (i < events.length && !event) {
                        date = events[i].Date;
                        if (selectedDate.valueOf() === date.valueOf()) {
                            event = events[i];
                        }
                        i++;
                    }
                    if (event) {
                        //return [true, "Highlighted", event.Title];
                        alert(event.Title);
                    }
                }
            });
        }
    });

</script> 
```

```
<div id="datepicker"> 
```

```
[16:35:16.336] ReferenceError: event is not defined @ http://code.jquery.com/jquery-1.8.3.js:579 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:11:05.730

您可能`var event;`在功能开始时丢失了`showevents`。看评论：

```
beforeShowDay: function (date) {
    var result = [true, '', null];
    var matching = $.grep(events, function (event) {
        return event.Date.valueOf() === date.valueOf();
    });
    if (matching.length) {
        // event is not defined
        result = [true, 'highlight', event.Title];
    }
    return result;
},

onSelect: function (dateText) {
    var date, selectedDate = new Date(dateText), i = 0, event = null;
    while (i < events.length && !event) {
        date = events[i].Date;
        if (selectedDate.valueOf() === date.valueOf()) {
            // event is not defined
            event = events[i];
        }
        i++;
    }
    if (event) {
        //return [true, "Highlighted", event.Title];
        // event is not defined
        alert(event.Title);
    }
} 
```

# eclipse - qunit 测试用例可以用 ecplise 编写吗？

> ID：15475516
> 
> 赞同：0
> 
> 时间：2013-03-18T11:18:03.470
> 
> 标签：eclipse, eclipse-plugin, qunit, js-test-driver

最近我给了一个带有 Eclipse 插件的 Qunit 任务。我可以找到关于用 Qunit 编写的测试用例的信息，以及使用 Quint-Adaptaer 在 JS-test runner 中为其转换和构建解决方案的信息。但我的问题是，我在 ecplise 中有没有可以在 Qunit 中编写测试用例并使用 JS-Test Runner 运行的环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:21:08.893

我想您是在询问 JavaScript 的开发工具。我建议安装 VJet。这提供了 JS 编辑器、内容辅助、导航、悬停、验证等工具。

有关更多信息，请参见此处的页面：

[http://www.eclipse.org/vjet/](http://www.eclipse.org/vjet/)

这是用于安装的更新站点：

[http://download.eclipse.org/vjet/updates-0.9](http://download.eclipse.org/vjet/updates-0.9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T00:40:24.393

如果您需要 QUnit（或其他 JavaScript 框架，如 Angular、dojo、jQuery、node 等）的高级内容辅助，我建议您[安装 tern.java](https://github.com/angelozerr/tern.java/wiki/Installation-Update-Site) 0.10.0-SNAPSHOT（今天未发布）。0.10.0 tern.java 版本提供了[对 QUnit 的支持](https://github.com/angelozerr/tern.java/wiki/Tern-&-QUnit-support)：

![QUnit完成](../Images/8823c4ea3a051eae49b639c0db8f72d5.png)

# date - 日期阿拉伯语和法语 codeigniter PHP5

> ID：15475518
> 
> 赞同：0
> 
> 时间：2013-03-18T11:18:07.277
> 
> 标签：date, arabic, setlocale

我有一个日期语言的问题，不能用阿拉伯语和法语显示它..我已经尝试了所有可能的语法，似乎 setlocale 不起作用，任何帮助将不胜感激

```
setlocale(LC_TIME, 'fr_FR.UTF8', 'fr.UTF8', 'fr_FR.UTF-8', 'fr.UTF-8');
setlocale(LC_ALL, 'fr_FR.UTF8', 'fr.UTF8', 'fr_FR.UTF-8', 'fr.UTF-8');
setlocale(LC_ALL,'fr_FR','french','French_France.1252','fr_FR.ISO8859-1','fra')
setlocale (LC_ALL, 'french');
setlocale (LC_ALL, 'fra');
setlocale(LC_ALL, 'fr_FR');
setlocale(LC_TIME, "fra");
setlocale( LC_ALL,'ar-ma' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T01:22:41.043

@Hasnae Idem我不完全明白为什么你需要它如此复杂，但在这里你是如何`setlocale`使用阿拉伯语的关键，例如对阿拉伯语字符进行排序，`أ`以`ي`确保你可以对其他语言做同样的事情，如法语

> 注意：此示例包含阿拉伯字符

```
$lang = array('هدهد','يارا', 'باسم', 'اسامة', 'جمال');
echo '<pre>'; print_r($lang); echo '</pre>';
setlocale(LC_ALL,'ar_AE.utf8');
sort($lang,SORT_LOCALE_STRING);
echo '<pre>'; print_r($lang); echo '</pre>'; 
```

# bash - 如何在丢弃不需要的部分的同时获得价值？

> ID：15475523
> 
> 赞同：0
> 
> 时间：2013-03-18T11:18:17.137
> 
> 标签：bash

我已经浏览和搜索了很长一段时间，并且尝试了几种方法，但我似乎做错了什么。

我正在从 /sys/bus/devices/w1/... 读取，其中的输出如下所示：

```
46 01 4b 46 7f ff 0a 10 85 : crc=85 YES
46 01 4b 46 7f ff 0a 10 85 t=20375 
```

我只对“20375”感兴趣（如果有人关心，它等于 20.375°C）

我用过：

```
cat /sys/bus/w1/devices/28-00000465f413/w1_slave | tr "t=" "\n" 
```

...获得该值，但我无法将其放入单独的变量中...

```
T1FILE=$(cat /sys/bus/w1/devices/28-00000465f413/w1_slave | tr "t=" "\n")
T2FILE=$(cat /sys/bus/w1/devices/28-0000046612e5/w1_slave | tr "t=" "\n") 
```

我怎样才能做到这一点？

谢谢您的帮助！我正在使用 awk 变体！

```
T1=$(awk -F'=' '/ t=/ {print $NF }' /sys/bus/w1/devices/28-00000465f413/w1_slave)
T2=$(awk -F'=' '/ t=/ {print $NF }' /sys/bus/w1/devices/28-0000046612e5/w1_slave) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:26:10.027

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")，指定`=`为字段分隔符 ( `-F`)，对于包含字符串 " `t=`" 的每一行，该行`print`上的最后一个字段 ( `$NF`)，`/sys/bus/w1/devices/28-00000465f413/w1_slave`用作输入：

```
awk -F'=' '/ t=/ { print $NF }' /sys/bus/w1/devices/28-00000465f413/w1_slave 
```

把它们放在一起：

```
T1FILE=$(awk -F'=' '/ t=/ { print $NF }' /sys/bus/w1/devices/28-00000465f413/w1_slave) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:27:54.330

试试grep：

```
grep -Po "(?<=t=)\d+" file 
```

测试：

```
kent$  echo "46 01 4b 46 7f ff 0a 10 85 : crc=85 YES
46 01 4b 46 7f ff 0a 10 85 t=20375"|grep -Po "(?<=t=)\d+"
20375 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:31:54.600

使用 awk，不需要`t=`在行尾。

```
awk '{FS="t="} /t=/ { split($2, t," "); print t[1] }' /sys/bus/w1/devices/28-00000465f413/w1_slave 
```

# html - 图像行大小

> ID：15475524
> 
> 赞同：1
> 
> 时间：2013-03-18T11:18:19.903
> 
> 标签：html, css

我正在努力获得包含正确大小的三个图像的行。这三个图像大小相同（270 像素 x 270 像素）并共享一个大小为 310 像素 x 310 像素的公共背景图像（阴影），当鼠标悬停在三个图像中的任何一个上时就会呈现。jsFiddle在这里：[jsFiddle](http://jsfiddle.net/cvh2013/5WsMr/)

我试过插入 style="height:310px;" 进入`td`标签，`tr`标签和`.center`CSS，两者都没有正确调整行的大小 - 背景阴影图像的顶部和底部被切断。

有人给我指点吗？谢谢你。

CSS：

```
.center {
text-align: center;
}

#images:hover {
background-image: url(http://ubuntuone.com/1SRrDB8i8cBtpm3Smxaz5r);
background-repeat: no-repeat;
background-position:center;     
} 
```

HTML：

```
<table style="width: 100%">
    <tr>
            <td class="center">
                <div id="images">
                <object class="images" type="image/svg+xml"
                    data="http://ubuntuone.com/5b5ZUS86nHAffWiOirDwFr">
                    <img src="http://ubuntuone.com/12qOaTGCZYzQtqFJpaGbPV" alt="" />
                </object>
                </div>
            </td>
            <td class="center">
                <div id="images">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/7Ur09JXlGVvF2GhXFbLXlx">
                    <img src="http://ubuntuone.com/54AaqhQUU8npACF2vXzKFp" alt="" />
                </object>
                </div>
            </td>
            <td class="center">
                <div id="images">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/6tkHm9c2r1eH9PMB9Nr3Ux">
                    <img src="http://ubuntuone.com/4CXw05d1dsSf9VhAIPNZf6" alt="" />
                </object>
                </div>
            </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:30:53.030

# [演示](http://jsfiddle.net/mohammadAdil/5WsMr/4/)

您的图像周围没有足够的空间来正确显示阴影。您可以通过在图像中添加一些填充来添加更多空间`div`

```
#images{
    padding:20px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:24:21.990

只需为包含图像的 div 提供适当的填充

将您的 CSS 更新`#images`为此：

```
#images
{
    padding:20px;
}
#images:hover {
    background-image: url(http://ubuntuone.com/1SRrDB8i8cBtpm3Smxaz5r);
    background-repeat: no-repeat;
    background-position:center;     
    padding:20px;
} 
```

看到这个[小提琴](http://jsfiddle.net/manishmishra256/5WsMr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:23:40.287

你有没有试过造型

```
 table td.center {
        attributes
    } 
```

在 CSS 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:28:17.153

试试这个 -

`#images{ padding:15px; }`

完美运行！

# objective-c - 如何压缩和缩小 NSImage？

> ID：15475525
> 
> 赞同：2
> 
> 时间：2013-03-18T11:18:21.940
> 
> 标签：objective-c, macos, cocoa, nsimage

这是我的压缩代码

```
NSBitmapImageRep* tmpRep = [[_image representations] objectAtIndex:0];
[tmpRep setPixelsWide:512];
[tmpRep setPixelsHigh:512];
[tmpRep setSize:NSMakeSize(SmallThumbnailWidth, SmallThumbnailHeight)];
NSDictionary* imageProps = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:0.3] forKey:NSImageCompressionFactor];
NSData* outputImageData = [tmpRep
                           representationUsingType:NSJPEGFileType properties:imageProps];
NSString* imageFilePath = [NSString stringWithFormat:@"%@/thumbnail.jpg",imagePath];
[outputImageData writeToFile:imageFilePath atomically:YES]; 
```

原图尺寸为960*960。我想将原图压缩成512*512。但是在finder中查看时输出图像的尺寸为960*960，与原图相比的位置尺寸确实被压缩了。任何人都可以告诉我为什么？谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T11:26:55.637

试试这个：

这将减少以 kbs 为单位的保存大小：

```
-(NSImage *)imageCompressedByFactor:(float)factor{
    NSBitmapImageRep *imageRep = [[NSBitmapImageRep alloc] initWithData:[self TIFFRepresentation]];
    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:factor] forKey:NSImageCompressionFactor];
    NSData *compressedData = [imageRep representationUsingType:NSJPEGFileType properties:options];
    return [[NSImage alloc] initWithData:compressedData];
} 
```

这将减小文件大小（以像素为单位）： 从*[此处](http://theocacao.com/document.page/498/)**复制*

```
@implementation NSImage (ProportionalScaling)

- (NSImage*)imageByScalingProportionallyToSize:(NSSize)targetSize{
  NSImage* sourceImage = self;
  NSImage* newImage = nil;

  if ([sourceImage isValid]){
    NSSize imageSize = [sourceImage size];
    float width  = imageSize.width;
    float height = imageSize.height;

    float targetWidth  = targetSize.width;
    float targetHeight = targetSize.height;

    float scaleFactor  = 0.0;
    float scaledWidth  = targetWidth;
    float scaledHeight = targetHeight;

    NSPoint thumbnailPoint = NSZeroPoint;

    if ( NSEqualSizes( imageSize, targetSize ) == NO )
    {

      float widthFactor  = targetWidth / width;
      float heightFactor = targetHeight / height;

      if ( widthFactor < heightFactor )
        scaleFactor = widthFactor;
      else
        scaleFactor = heightFactor;

      scaledWidth  = width  * scaleFactor;
      scaledHeight = height * scaleFactor;

      if ( widthFactor < heightFactor )
        thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;

      else if ( widthFactor > heightFactor )
        thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
    }
    newImage = [[NSImage alloc] initWithSize:targetSize];
    [newImage lockFocus];
      NSRect thumbnailRect;
      thumbnailRect.origin = thumbnailPoint;
      thumbnailRect.size.width = scaledWidth;
      thumbnailRect.size.height = scaledHeight;
      [sourceImage drawInRect: thumbnailRect
                     fromRect: NSZeroRect
                    operation: NSCompositeSourceOver
                     fraction: 1.0];
    [newImage unlockFocus];
  }
  return [newImage autorelease];
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T22:33:32.880

像这样创建一个类别方法，以增量压缩图像直到满足所需的文件大小：

```
- (NSImage*) compressUnderMegaBytes:(CGFloat)megabytes {
  CGFloat compressionRatio = 1.0;

  NSBitmapImageRep *imageRep = [[NSBitmapImageRep alloc] initWithData:[self TIFFRepresentation]];
  NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:compressionRatio] forKey:NSImageCompressionFactor];
  NSData *compressedData = [imageRep representationUsingType:NSJPEGFileType properties:options];

  while ([compressedData length]>(megabytes*1024*1024)) {
    @autoreleasepool {
      compressionRatio = compressionRatio * 0.9;
      options = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:compressionRatio] forKey:NSImageCompressionFactor];
      compressedData = [imageRep representationUsingType:NSJPEGFileType properties:options];

      // Safety check, 0.4 is a reasonable compression size, anything below will become blurry
      if (compressionRatio <= 0.4) {
        break;
      }
    }
  }
  return [[NSImage alloc] initWithData: compressedData];
} 
```

然后你可以像这样使用它：

```
NSImage *compressedImage = [myImage compressUnderMegaBytes: 0.5]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-24T05:50:09.513

级别从 0.0 到 1.0

```
func getImageQualityWithLevel(image: NSImage, level: CGFloat) -> NSImage {
    let _image = image
    var newRect: NSRect = NSMakeRect(0, 0, _image.size.width, _image.size.height)

    let imageSizeH: CGFloat = _image.size.height * level
    let imageSizeW: CGFloat = _image.size.width * level

    var newImage = NSImage(size: NSMakeSize(imageSizeW, imageSizeH))
    newImage.lockFocus()
    NSGraphicsContext.currentContext()?.imageInterpolation = NSImageInterpolation.Low

    _image.drawInRect(NSMakeRect(0, 0, imageSizeW, imageSizeH), fromRect: newRect, operation: NSCompositingOperation.CompositeSourceOver, fraction: 1)
    newImage.unlockFocus()

    return newImage
} 
```

# bash - awk 中的 OFS 问题

> ID：15475532
> 
> 赞同：2
> 
> 时间：2013-03-18T11:18:38.920
> 
> 标签：bash, awk

我有一个包含这个的字符串（字段分隔符是百分号），存储在一个名为 data 的变量中

```
201%jkhjfhn%kfhngjm%mkdfhgjdfg%mkdfhgjdfhg%mkdhfgjdhfg%kdfhgjgh%kdfgjhgfh%mkfgnhmkgfnh%k,gnhjkgfn%jkdfhngjdfng 
```

我正在尝试打印出用管道替换百分比符号的字符串，但它似乎比我想象的要硬：

```
echo ${data} | awk -F"%" 'BEGIN {OFS="|"} {print $0}' 
```

我知道我非常接近它只是不够接近。

我将该代码视为：

```
1 echo the variable value into a awk session
2 set field separator as "%"
3 set as output field separator "|"
4 print the line 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:20:30.457

试试这个 ：

```
echo "$data" | awk -F"%" 'BEGIN {OFS="|"} {$1=$1; print $0}' 
```

来自[awk 手册](http://www.gnu.org/software/gawk/manual/gawk.html#Field-Splitting-Summary)

> 最后，有时可以方便地强制 awk 使用字段和 OFS 的当前值来重建整个记录。为此，请使用看似无害的分配：
> 
> ```
> $1 = $1   # force record to be reconstituted
> print $0  # or whatever else with $0 
> ```

* * *

另一种轻量级方法仅`tr`在您搜索替代方案时使用`awk`：

```
tr '%' '|' <<< "$data" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T11:23:13.813

Sputnick 为您提供了`awk`解决方案，但您实际上根本不需要`awk`，只需使用您的 shell：

```
echo ${data//%/|} 
```

# asp.net - Danish characters are replaced in CSV

> ID：15475535
> 
> 赞同：0
> 
> 时间：2013-03-18T11:18:41.800
> 
> 标签：asp.net, utf-8, character-encoding

My code to create a CSV file that contains Danish characters

```
 Response.ClearContent();
     Response.AddHeader("content-disposition", attachment);
     Response.ContentType = "application/csv;charset=utf-8";
     Response.Charset = "utf-8";
     Response.Write(sb.ToString());
     Response.End(); 
```

Don't know why but when result CSV is created danish characters are replaced with some special characters like `??j`.Can any one give me any clue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:34:25.257

Is the source text in the StringBuilder UTF-8? If not there is a chance that .NET gets confused and writes the wrong characters. If it isn't in UTF-8 try running [Encoding.Convert](http://msdn.microsoft.com/en-us/library/kdcak6ye.aspx) before writing to the client.

# php - 使用 PHP 和 Javascript 加载数据库结果

> ID：15475538
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:18:51.723
> 
> 标签：php, javascript, database, arrays

我正在尝试在我的数据库字段的 html 表中加载。我正在使用 PHP 进行选择查询，该查询返回一个 json 以使用 javascript 将值放入表中。我的问题是，如何将数据库字段放入数组中以将其传递给 Javascript？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:33:34.850

使用[Jquery Ajax](http://api.jquery.com/jQuery.ajax/)将内容从数据库加载到您的 html 页面。在您的请求中，您只能使用 php 脚本来制作表格。

```
 <table>
 <?php
  $query = mysql_query('YOUR QUERY');
  while($row = mysql_fetch_array($query)) { ?>

     <tr><td><?php echo $row['YOUR FIELD NAME']; ?></td></tr>

  <?php } ?>
  </table> 
```

# webdriver - 使用 Spock 在 Geb 中单击按钮时出现奇怪的问题

> ID：15475541
> 
> 赞同：3
> 
> 时间：2013-03-18T11:19:04.003
> 
> 标签：webdriver, spock, geb

问题是我可以单击一个按钮，但是该按钮应该执行的过程然后只是挂起，并且不会发生。`"post"`例如，单击按钮时，该按钮应变为黑色，直到帖子加载完毕。相反，它会变黑，然后什么也没有发生。

如果手动执行，这绝不是问题，而且我也从未遇到过 Selenium/Java 的任何问题。此外，错误并非每次都发生。它一次又一次地完美运行！实在想不通为什么会这样。

这是页面定义和测试规范：

页面定义：

```
static at = { title == "HomePage" }

    static content = {

       msgBox{ $("textarea", 0) }

       postBtn{ $("a", class: "js-btn-post") }

       firstPost{ $("div.msg", 2).find("p").text() }

    } 
```

邮政规格：

```
def "make a post"() {

        given:
        at HomePage

        when:
        msgBox.click()

        and:
        msgBox.value("This is a test post")

        and:
        postBtn.click()

        then:
        waitFor(10) { firstPost == "This is a test post" }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:18:42.730

我认为这是计时器/连接的问题。尝试添加`waitFor()`到您的步骤中。阅读：[链接](http://www.gebish.org/manual/0.9.0-RC-1/javascript.html#waiting)

享受！！！

# codeigniter - 每个字段的每个规则的 CodeIgniter 自定义验证错误

> ID：15475543
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:19:06.043
> 
> 标签：codeigniter, validation, codeigniter-2, custom-errors

我正在使用 CodeIngiter 2.1，我想为每个字段的每个规则定义自定义验证错误。字段如下。

```
array(
'field' => 'firstname',
'rules' => 'required',
    'error' => 'This field cannot be empty.'
),
array(
'field' => 'email',
'rules' => 'required',
    'error' => 'The email cannot be empty.'
) 
```

但是在`CodeIgniter`一条规则中只定义了一条错误消息。那么如何覆盖那个并请提出一些解决方案来获得特定领域的不同错误。作品更受赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:28:21.377

尝试使用 CI 功能：

```
 set_message(); 
```

所有本机错误消息都位于以下语言文件中：

```
 language/english/form_validation_lang.php 
```

要设置您自己的自定义消息，您可以编辑该文件，或使用以下函数：

```
 $this->form_validation->set_message('rule', 'Error Message'); 
```

在此处了解有关[set_message的更多信息](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)

希望它会有所帮助；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-03T08:37:04.207

我最近为我的 codeigniter 3.0-dev 应用程序制作了这个自定义错误消息选项。希望这可以帮助那里的任何人。

[https://gist.github.com/abdmaster/7287962](https://gist.github.com/abdmaster/7287962)

要使用它（示例），

```
$this->form_validation->set_rules('name','Name','required|alpha',array('required' => 'Please fill the field %s .');` 
```

它将与 jamierumbelow 的[MY_Model](https://github.com/jamierumbelow/codeigniter-base-model#relationships)等基本模型一起使用。在您的模型中，您执行以下操作：

```
public $validate = array(
  'display_name'  => array(
    'field' => 'display_name',
    'label' => 'Display Name',
    'rules' => 'trim|required|xss_clean|valid_fullname|is_unique[users_model.display_name]',
    'error_msg' => array(
      'is_unique'  => 'The name in %s is already being used by someone.',
    ),
  ),
); 
```

休息是我们正常使用的方式。希望这些例子就足够了。

我没有在 v2.1.x 中尝试过，但希望这会奏效。也许必须做一些小的调整。

# sql-server-2008 - 从 sql 表中选择文件名

> ID：15475544
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:19:15.543
> 
> 标签：sql-server-2008

我的数据库中有一个 Master 表，其中包含字段

```
 Column Name       Data Type 
    ===========     =============

    Empno          varchar(10)
    Surname        varchar(10)
    ShiftDiffInd   varchar (1)
    PrevEmpGrossy  money
    NonTaxYtodate  money 
```

我想从这个表中只取这两个字段的字段名`'ShiftDiffInd' 'NonTaxYtodate'`。不是这个字段的值，所以我该怎么做

我想要我的回报 像这样

```
==============
ShiftDiffInd
NonTaxYtodate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:20:42.640

```
select
   syscolumns.name as [Column]
from 
   sysobjects, syscolumns 
where sysobjects.id = syscolumns.id
and   sysobjects.name = 'Master'
and (syscolumns.name = 'ShiftDiffInd' or syscolumns.name = 'NonTaxYtodate')
order by syscolumns.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:23:07.520

```
SELECT 'ShiftDiffInd' as ShiftDiffInd, 'NonTaxYtodate' as NonTaxYtodate , * FROM Master 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:29:46.920

```
 select column_name from INFORMATION_SCHEMA.COLUMNS
where 1=1
    and TABLE_NAME = 'Master'
    and COLUMN_NAME in ('ShiftDiffInd','NonTaxYtodate') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T11:49:14.990

我之前误解了您的问题，尝试使用以下查询，您会得到预期的结果：

```
 SELECT COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME=OBJECT_NAME(OBJECT_ID('Master'))
AND COLUMN_NAME IN ('ShiftDiffInd','NonTaxYtodate') 
```

# android - 将sqlite数据库从android项目的资产文件夹复制到首选位置时出错

> ID：15475547
> 
> 赞同：0
> 
> 时间：2013-03-18T11:19:17.790
> 
> 标签：android, android-sqlite

当我尝试从资产文件夹复制数据库时出现以下错误。

```
Error:  A fatal error has been detected by the Java Runtime Environment:

#  Internal Error (classFileParser.cpp:3470), pid=6696, tid=4792
#  Error: ShouldNotReachHere()
#
# JRE version: 7.0-b147
# Java VM: Java HotSpot(TM) 64-Bit Server VM (21.0-b17 mixed mode windows-amd64 compressed oops)
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# hs_err_pid6696.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# 
```

代码链接： [Sqlite 数据库未从资产文件夹 Android 复制](https://stackoverflow.com/questions/12713640/sqlite-database-not-copied-from-asset-folder-android)

编辑：

```
AssetManager am = getApplicationContext().getAssets();
    OutputStream os = new    FileOutputStream("/data/data/"+getPackageName+"/databases/dbname.sqlite");
    byte[] b = new byte[100];
    int r;
    InputStream is = am.open("dbname.sqlite");
    while ((r = is.read(b)) != -1) {
         os.write(b, 0, r);
   }
   is.close();
   os.close();
} 
```

我正在尝试运行此代码。此代码从 android 的资产文件夹中复制数据库。当我运行此代码时..它显示上述错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:00:20.977

上述错误是由于应用程序作为普通 java 应用程序而不是 android 应用程序运行而引起的。

只需将eclipse中项目的运行配置改为android应用即可解决上述问题。谢谢

# mysql - 如何在一个表的单列和第二个表的多行之间创建关系？

> ID：15475548
> 
> 赞同：2
> 
> 时间：2013-03-18T11:19:19.680
> 
> 标签：mysql, database, foreign-keys, relational-database

我有两张桌子：`Players`和`Characters`。每个人都`Player`可以拥有最大值。10`Character`秒。我正在寻找在这些表之间创建关系的最佳方法。我打算使用外键将列`characters`与`Players`from`id`连接`Characters`，但我不知道是否应该为每个角色创建 10 列`Players`like `character1`、`character2`、等？`character3`

我知道我可以创建具有 type 值的列`integer[]`，但是关系呢？

我希望我的问题很清楚，因为我不知道如何更好地解释它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:30:25.343

您绝对应该创建两张表，一张用于玩家，一张用于角色。Players 表将使用单独的 player_id 列或 player_name 列作为主键。如果您选择使用单独的 player_id 列，请确保将 player_name 设置为唯一。Characters 表将有一个 character_id 列、一个 player_id 或一个 player_name 列（取决于 Players 的结构），这是对 Players 表的外键引用，最后是一个 character_name 列。每个字符现在将在字符表中代表它自己的行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T11:31:37.397

您的外键应该在字符表上 - 引用 player_id。没有办法在约束中将其限制为 10 - 您必须为此编写代码或在对 createCharacter 的过程调用中进行检查，该过程调用将为您执行检查。

# php - 在 SugarCRM 中将 Country TextField 更改为 Dropdown

> ID：15475553
> 
> 赞同：7
> 
> 时间：2013-03-18T11:19:30.757
> 
> 标签：php, sugarcrm

我想将地址面板中的“国家”文本字段更改为下拉列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T18:24:59.687

**SugarCRM 6.x：**

**1) 为您的国家/地区字段创建或更新 vardef：**

自定义/扩展/模块/[MODULE_NAME]/Ext/Vardefs/custom_primary_address_country.php

```
$dictionary['<MODULE_NAME>']['fields']['primary_address_country']['comments']='Country for primary address';
$dictionary['<MODULE_NAME>']['fields']['primary_address_country']['group']='primary_address';
$dictionary['<MODULE_NAME>']['fields']['primary_address_country']['options']='countries_dom';
$dictionary['<MODULE_NAME>']['fields']['primary_address_country']['type']='enum'; 
```

**2) 复制地址字段的编辑视图模板...**

包括/SugarFields/Fields/Address/EditView.tpl

**进入 /custom 中的新目录：**

custom/include/SugarFields/Fields/[CUSTOM_TYPE_NAME]/EditView.tpl

**3）编辑模板并更改：**

```
<input type="text" name="{{$country}}" id="{{$country}}" size="{{$displayParams.size|default:30}}" {{if !empty($vardef.len)}}maxlength='{{$vardef.len}}'{{/if}} value='{$fields.{{$country}}.value}' tabindex="{{$tabindex}}"> 
```

**至：**

```
<select name="{{$country}}" width="{{$displayParams.size|default:30}}" id="{{$country}}" title="{{$vardef.help}}" tabindex="{{$tabindex}}" {{if isset($displayParams.script)}}{{$displayParams.script}}{{/if}}>
{if isset($fields.{{$country}}.value) && $fields.{{$country}}.value != ''}
 {html_options options=$fields.{{$country}}.options selected=$fields.{{$country}}.value}
{else}
 {html_options options=$fields.{{$country}}.options selected=$fields.{{$country}}.default_value}
{/if}
</select> 
```

**4) 在 custom/modules/[MODULE_NAME]/metadata/editviewdefs.php 中将“type”更改为您的新自定义类型名称。**

```
 0 => 
      array (
        'name' => 'primary_address_country',
        'hideLabel' => true,
        'type' => '<CUSTOM_TYPE_NAME>',
        'displayParams' => 
        array (
          'key' => 'primary',
          'rows' => 2,
          'cols' => 30,
          'maxlength' => 150,
        ),
        'label' => 'LBL_PRIMARY_ADDRESS_COUNTRY',
      ), 
```

**5\. 对要从文本字段更改为下拉列表的每个国家/地区字段重复步骤 1 和 4。**对于之前输入的值，您需要确保它们与“countries_dom”中的值匹配。

**在 SugarCRM 7.x 中，这更简单，您只需要执行第 1 步。**

# javascript - 在jQuery中使用AJAX从回调中访问变量

> ID：15475561
> 
> 赞同：0
> 
> 时间：2013-03-18T11:19:51.850
> 
> 标签：javascript, jquery

代码解释了一切：

```
//
// … code ...
//
$.ajax({
    dataType: "json",
    url: "foo",
    success: function(data) {
        var my_data = data;
    }
});
//
// … code ...
//
console.log(my_data); // NOT in scope 
```

我如何访问`my_data`AJAX 调用之外的内容？我读过也许需要关闭？我找不到任何我想要的例子。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:21:19.293

Ajax 是`async`调用，console.log 之后可能会触发成功，您可以从成功调用函数并将数据传递给它。

```
$.ajax({
    dataType: "json",
    url: "foo",
    success: function(data) {
        yourFun(data);
    }
});

function yourFun(data)
{
} 
```

给予功能而不是成功。

```
$.ajax({
    dataType: "json",
    url: "foo",
    success: yourFun
});

function yourFun(data)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:22:46.453

一般来说，你不会。AJAX 调用是异步的，因此不能保证`jQuery.ajax()`函数执行后立即有值；`success`在尝试使用该变量之前，您需要等到 AJAX 调用完成并执行回调。

最简单的方法是在回调中使用*该*`success`值。如果您确实需要它在外部可用，则将其设置为对所有代码可见的变量（不一定是全局的，取决于您的代码的结构），并在尝试在任何代码中使用它之前检查它是否具有值其他功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:21:49.520

定义`my_data`为如下全局，

```
var my_data;

$.ajax({
    dataType: "json",
    url: "foo",
    success: function(data) {
        my_data = data;
    }
});
//
// … code ...
//
console.log(my_data); // NOT in scope 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:21:53.210

全局声明 my_data 变量..

```
var my_data = data;

    $.ajax({
        dataType: "json",
        url: "foo",
        success: function(data) {
            my_data = data;
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:23:28.477

用作变量以访问 ajax 之外的数据`my_data`。`gloabl`

```
var my_data = '';
$.ajax({
    dataType: "json",
    url: "foo",
    success: function(data) {
        my_data = data;
    }
});

console.log(my_data); 
```

# javascript - javascript multiple keys pressed at once comes to error

> ID：15475564
> 
> 赞同：0
> 
> 时间：2013-03-18T11:20:03.130
> 
> 标签：javascript, events, keydown

```
 $(document).keydown(function(e){
    var key=e.which;
    //to prevent reversing, add the possible value of d which hinders the snake to go to desired direction
    if(key=="37"&&d!="right"){
        if(p==true){
            clearInterval(game_loop);
            game_loop=setInterval(paint,60);
            p=false;
            d="left";
        }
        else{
            d="left";
        }
    }
    else if(key=="38"&&d!="down"){
        if(p==true){
            clearInterval(game_loop);
            game_loop=setInterval(paint,60);
            p=false;
            d="up";
        }
        else{
            d="up";
        }
    }
    else if(key=="39"&&d!="left"){
        if(p==true){
            clearInterval(game_loop);
            game_loop=setInterval(paint,60);
            p=false;
            d="right";
        }
        else{
            d="right";
        }
    }
    else if(key=="40"&&d!="up"){
        if(p==true){
            clearInterval(game_loop);
            game_loop=setInterval(paint,60);
            p=false;
            d="down";
        }
        else{
            d="down";
        }
    }
    else if(key=="32"){
        if(p==false){
            clearInterval(game_loop);
            p=true;
        }
        else{
            game_loop=setInterval(paint,60);
            p=false;
        }
    }
}) 
```

this code defines my keydown for my snake,. the problem is. whenever i pressed 2 keys at the same time or if i press down and left very quickly (perhaps other combinations are also possible) the game is over.,my function that checks the collision to its own body returns true after i press 2 keys quickly like down and left..

how can it be fixeD?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:33:56.443

have you tried e.preventDefault() ..

```
$(document).keydown(function(e){
    var key=e.which;
    e.preventDefault(); 
```

# nhibernate - FluentNHibernate 和原始类型集合

> ID：15475566
> 
> 赞同：1
> 
> 时间：2013-03-18T11:20:05.237
> 
> 标签：nhibernate, fluent-nhibernate

我在使用 (Fluent)NHibernate 持久化原始类型集合时遇到问题。

这是实体和映射：

```
public class SomeOne
{
    public virtual long ID { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual Iesi.Collections.Generic.ISet<string> Foo { get; protected set; }

    public SomeOne()
    {
        Foo = new HashedSet<string>();
    }
}

    public SomeOneMap()
    {
        Id(x => x.ID).GeneratedBy.Identity();
        Map(x => x.Name);
        Map(x => x.Description);
        HasMany(x => x.Foo).Element("Code").AsSet().Not.Inverse();
        Table("SomeTypeOne");
    } 
```

但是，当我尝试保存 SomeOne 实例时，关联的 Foo 字符串会被忽略。

```
 var session = factory.OpenSession();
        var one = new SomeOne();
        one.Foo.Add("Dato");
        one.Foo.Add("Mari");
        session.Save(one); 
```

知道有什么问题吗？谢谢

更新

* * *

这是数据库模式。它是由 NH 生成的。![在此处输入图像描述](../Images/50679a33219e02c0f46b50bea22d4e77.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:03:21.310

有两种方法可以确保您收集的内容被持久化。

1.  `session.Flush();`之后调用`session.Save(one);`。这将导致 NHibernate 持久化您的集合。更多关于冲洗的信息可以在[这里](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-flushing)找到。

2.  将整个事物包装在事务中，即

    ```
    using (var session = factory.OpenSession())
    using (var transaction = session.BeginTransaction())
    {
      var one = new SomeOne();
      one.Foo.Add("Dato");
      one.Foo.Add("Mari");
      session.Save(one);
      transaction.Commit();
    } 
    ```

选项二优于选项一的原因有很多。主要优点是所有对象都在同一个事务中保存回数据库，因此如果一个插入失败，则事务将回滚并且您的数据库不会处于不一致状态。这个[问题](https://stackoverflow.com/questions/43320/nhibernate-isession-flush-where-and-when-to-use-it-and-why)的公认答案对为什么应该使用 NHibernate 的事务进行了广泛的解释。

# netty - 发送帖子请求没有框架

> ID：15475567
> 
> 赞同：0
> 
> 时间：2013-03-18T11:20:10.303
> 
> 标签：netty

```
public class ClientTestHttp {

    private final URI uri;
    private ChannelBuffer firstMessage;

    public ClientTestHttp(URI uri) {
        this.uri = uri;
    }

    public void run() {
        // Configure the client.
        ClientBootstrap bootstrap = new ClientBootstrap(
                new NioClientSocketChannelFactory(
                Executors.newCachedThreadPool(),
                Executors.newCachedThreadPool()));

        // Set up the event pipeline factory.
        bootstrap.setPipelineFactory(new ClientHttpPipeLineFactory(false));

        // Start the connection attempt.
        ChannelFuture future = bootstrap.connect(new InetSocketAddress("10.0.0.91", 8181));

        // Wait until the connection attempt succeeds or fails.
        Channel channel = future.awaitUninterruptibly().getChannel();
        if (!future.isSuccess()) {
            future.getCause().printStackTrace();
            bootstrap.releaseExternalResources();
                        return;
        }

        // Prepare the HTTP request.
        String sss =  uri.getRawPath();
        HttpRequest request = new DefaultHttpRequest(
                HttpVersion.HTTP_1_1, HttpMethod.POST, uri.toASCIIString());
        request.setHeader(HttpHeaders.Names.HOST, "10.0.0.91");
        request.setHeader(HttpHeaders.Names.CONNECTION, HttpHeaders.Values.CLOSE);

        // Set some example cookies.
        CookieEncoder httpCookieEncoder = new CookieEncoder(false);
        httpCookieEncoder.addCookie("my-cookie", "foo");
        httpCookieEncoder.addCookie("another-cookie", "bar");
        request.setHeader(HttpHeaders.Names.COOKIE, httpCookieEncoder.encode());

        request.setHeader("LAlala", "asdasdasd");

        // Send the HTTP request.
        request.addHeader("sdasd", "asdasdasdasd".getBytes());

        channel.write(request);
        System.out.println(channel.isOpen());

        // Wait for the server to close the connection.
        channel.getCloseFuture().awaitUninterruptibly();

        // Shut down executor threads to exit.
        bootstrap.releaseExternalResources();
    }

    public static void main(String[] args) throws Exception {

        URI uri = new URI("http://10.0.0.91:8181");
        new ClientTestHttp(uri).run();
    }
} 
```

嘿。我在向 netty 发送 post 请求时遇到问题。那就是问题所在：

> 警告：来自下游的意外异常。java.lang.IllegalArgumentException：空文本结论：java.lang.IllegalArgumentException：空文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:50:05.527

请参考包装中的`HttpUploadClient`示例：`org.jboss.netty.example.http.upload`

[http://netty.io/3.6/xref/org/jboss/netty/example/http/upload/package-summary.html](http://netty.io/3.6/xref/org/jboss/netty/example/http/upload/package-summary.html)

# java - 没有找到主类？

> ID：15475574
> 
> 赞同：0
> 
> 时间：2013-03-18T11:20:28.040
> 
> 标签：java, multithreading, sockets

我必须为我的大学创建一个简单的聊天，当我尝试在 NetBeans 上运行它时，它会显示：“未找到主要课程”。我不明白，我相信我确实有一个主要课程，所以谁能告诉我问题出在哪里？这是代码：

```
import java.io.* ;
import java.net.*;

public class server {
    private static ServerSocket socketservidor = null;
    private static Socket socketcliente = null;
    private static final int maxclientes = 4;
    private static final clienteThread[] hilos = new clienteThread[maxclientes];

    public static void main(String args[]) {
        int puerto = 2222;
        if (args.length < 1) {
            System.out.println("CONEXION REALIZADA CORRECTAMENTE \n"
                    + "CHAT INICIADO CORRECTAMENTE \n" + "NUM. PUERTO="
                    + puerto);
        } else {
            puerto = Integer.valueOf(args[0]).intValue();
        }

        try {
            socketservidor = new ServerSocket(puerto);
        } catch (IOException e) {
            System.out.println(e);
        }

        while (true) {
            try {
                socketcliente = socketservidor.accept();
                int i = 0;
                for (i = 0; i < maxclientes; i++) {
                    if (hilos[i] == null) {
                        (hilos[i] = new clienteThread(socketcliente, hilos))
                                .start();
                        break;
                    }
                }
                if (i == maxclientes) {
                    PrintStream oc = new PrintStream(
                            socketcliente.getOutputStream());
                    oc.println("Servidor ocupado. Vuelve a intentar más tarde");
                    oc.close();
                    socketcliente.close();
                }
            } catch (IOException e) {
                System.out.println(e);
            }
        }
    }
}

class clienteThread extends Thread {

    private PrintStream salida = null;
    private DataInputStream entrada = null;
    private int maxclientes;
    private final clienteThread[] threads;
    private Socket socketcliente = null;

    public clienteThread(Socket socketcliente, clienteThread[] threads) {
        this.socketcliente = socketcliente;
        this.threads = threads;
        maxclientes = threads.length;
    }

    public void run() {
        int maxclientes = this.maxclientes;
        clienteThread[] threads = this.threads;

        try {
            entrada = new DataInputStream(socketcliente.getInputStream());
            salida = new PrintStream(socketcliente.getOutputStream());
            salida.println("Solo nos falta saber tu nombre para empezar:");
            String nombre = entrada.readLine().trim();
            salida.println("Bienvenido a nuestro chat " + nombre + "\n"
                    + "Ya puedes chatear con otros usuarios!" + "\n"
                    + " teclea /salir para abandonar chat");
            for (int i = 0; i < maxclientes; i++) {
                if (threads[i] != null && threads[i] != this) {
                    threads[i].salida.println("***" + nombre
                            + " se ha conectado!!!***");
                }
            }
            while (true) {
                String linea = entrada.readLine();
                if (linea.startsWith("/salir")) {
                    break;
                }
                for (int i = 0; i < maxclientes; i++) {
                    if (threads[i] != null && threads[i] != this) {
                        threads[i].salida.println(">>" + nombre + ":" + linea);
                    }
                    if (threads[i] != null && threads[i] == this) {
                        threads[i].salida.println("YO:" + linea);
                    }
                }
            }
            for (int i = 0; i < maxclientes; i++) {
                if (threads[i] != null && threads[i] != this) {
                    threads[i].salida.println("***" + nombre
                            + " se ha desconectado***");
                }
            }
            salida.println("***Te has desconectado del chat***");

            for (int i = 0; i < maxclientes; i++) {
                if (threads[i] == this) {
                    threads[i] = null;
                }
            }
            entrada.close();
            salida.close();
            socketcliente.close();
        } catch (IOException e) {
            System.out.println(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:54:19.593

尝试这个。

右键单击项目文件夹，单击属性，然后从左侧菜单中选择运行。您现在将能够在右侧看到主要课程。单击浏览，然后选择服务器类。然后，当您运行项目时，错误将不存在，您的服务器将开始运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:32:55.113

您的文件名必须与您的 java 类名相同。例如，如果类名是“sever”，那么文件应该称为 server.java。我可以和 Eclipse 一起吃午饭。

# maven - 错误：包 org.jclouds.logging.slf4j.config 不存在（类 SLF4JLoggingModule ）

> ID：15475576
> 
> 赞同：1
> 
> 时间：2013-03-18T11:20:29.870
> 
> 标签：maven, slf4j, jclouds

[在示例http://www.jclouds.org/documentation/quickstart/openstack/](http://www.jclouds.org/documentation/quickstart/openstack/)中指定的导入失败：

```
import org.jclouds.logging.slf4j.config.SLF4JLoggingModule;
...
Iterable<Module> modules = ImmutableSet.<Module> of(new SLF4JLoggingModule()); 
```

依赖项是按照[http://www.jclouds.org/documentation/userguide/installation-guide/](http://www.jclouds.org/documentation/userguide/installation-guide/)的说明添加的：pom.xml：

```
...
<dependencies>
  <dependency>
    <groupId>org.jclouds</groupId>
    <artifactId>jclouds-allcompute</artifactId>
    <version>1.5.7</version>
  </dependency>
  <dependency>
    <groupId>org.jclouds</groupId>
    <artifactId>jclouds-allblobstore</artifactId>
    <version>1.5.7</version>
  </dependency>
</dependencies>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:23:23.910

**解决方案**

**1）添加**神器jclouds-slf4j的依赖（[http://mvnrepository.com/artifact/org.jclouds.driver/jclouds-slf4j/1.5.4](http://mvnrepository.com/artifact/org.jclouds.driver/jclouds-slf4j/1.5.4)）

```
<dependency>
    <groupId>org.jclouds.driver</groupId>
    <artifactId>jclouds-slf4j</artifactId>
    <version>1.5.4</version>
</dependency> 
```

**2）重建项目**

pom.xml 可能如下所示：

```
...
<dependencies>
  <dependency>
    <groupId>org.jclouds</groupId>
    <artifactId>jclouds-allcompute</artifactId>
    <version>1.5.7</version>
  </dependency>
  <dependency>
    <groupId>org.jclouds</groupId>
    <artifactId>jclouds-allblobstore</artifactId>
    <version>1.5.7</version>
  </dependency>
  <dependency>
    <groupId>org.jclouds.driver</groupId>
    <artifactId>jclouds-slf4j</artifactId>
    <version>1.5.4</version>
  </dependency>
</dependencies>
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:11:09.973

我的错。我写了那个文档。

该页面上的[Get jclouds](http://www.jclouds.org/documentation/quickstart/openstack/#install)部分之前已阅读

> 按照[使用 Apache Ant 获取二进制文件](http://www.jclouds.org/documentation/userguide/installation-guide/)的说明进行操作。

但仅链接到顶部的安装指南。它应该直接链接到[使用 Apache Ant 获取二进制文件](http://www.jclouds.org/documentation/userguide/installation-guide/#ant)部分，其中包含 jclouds-slf4j 驱动程序。

我已在安装指南中添加了锚点，因此您现在可以链接到各个部分。希望这有助于清除它。

# parsing - LL(1) Parsing -- First(A) with Recursive First Alternatives

> ID：15475579
> 
> 赞同：0
> 
> 时间：2013-03-18T11:20:30.583
> 
> 标签：parsing, compiler-construction, grammar, context-free-grammar, ll

我如何将 FIRST() 规则应用于生产，例如：

A -> AAb | 抗体 | s

其中 A 是非终结符，b,s 是终结符。

备选方案 1 和 2 的 FIRST(A) 将再次成为 A，但这会以 FIRST 的无限应用而告终，因为我需要一个终端来获取 FIRST 集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:17:03.760

要计算 FIRST 集，您通常执行*定点迭代*。也就是说，您从一小组值开始，然后迭代地重新计算第一个集合，直到集合收敛。

在这种情况下，您首先要注意产生式 A → s 意味着 FIRST(A) 必须包含 {s}。所以最初你设置 FIRST(A) = {s}。

现在，您遍历 A 的每个产生式并根据迄今为止计算的 FIRST 集的知识更新 FIRST。例如，规则

> A→AAb

意味着您应该更新 FIRST(A) 以包含 FIRST(AAb) 的所有元素。这不会导致 FIRST(A) 发生变化。然后你访问

> A → 抗体

您再次更新 FIRST(A) 以包括 FIRST(Ab)，这又是一个无操作。最后，您访问

> A → s

并且由于 FIRST(A) 已经包含 s，这不会导致任何变化。

由于在此迭代中没有任何变化，因此您最终会得到 FIRST(A) = {s}，这确实是正确的，因为从 A 开始的任何推导最终都会产生一个`s`作为其第一个字符。

有关更多信息，您可能会发现[这些讲座幻灯片](http://www.stanford.edu/class/archive/cs/cs143/cs143.1128/lectures/03/Slides03.pdf)很有用（这里是[第二部分](http://www.stanford.edu/class/archive/cs/cs143/cs143.1128/lectures/04/Slides04A.pdf)）。他们详细描述了自顶向下解析的工作原理以及如何迭代计算 FIRST 集。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T16:02:56.563

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-18T14:23:03.627

正如您已经意识到的那样，您的语法规则已经[左递归](http://en.wikipedia.org/wiki/Left_recursion)，并且 LL 解析器[无法使用左递归解析语法](http://en.wikipedia.org/wiki/LL_parser#LL.281.29_Conflicts)。

所以你需要首先摆脱左递归，然后你应该能够计算规则的第一组。

# php - OpenJS-Grid-master v2 和 mysql

> ID：15475580
> 
> 赞同：0
> 
> 时间：2013-03-18T11:20:41.303
> 
> 标签：php

我得到错误`Unknown column 'first.' in 'field list'`。我有一个名为“try”的数据库，一个名为“first”的表，其中包含字段“id(int)”和“name(char)”。它只是我用来在网格中显示其数据的示例表，但出现此错误。我已经编辑了这些默认的 html 和 ajax 文件，如下所示：

**索引.php**

```
<!DOCTYPE html>

<link rel="stylesheet" href="bootstrap/css/bootstrap.css"/>

<link rel="stylesheet" href="grid.css" title="openJsGrid"/>
<!--<link rel="stylesheet" href="jquery-ui/css/smoothness/jquery-ui-                          1.8.22.custom.css"/>-->
<script src="jquery.js" type="text/javascript"></script>
<!--<script src="jquery-ui/js/jquery-ui-1.8.22.custom.min.js" type="text/javascript">   </script>-->
<script src="root.js"></script>
<script src="grid.js"></script>

<script >
$(function() {
$(".users").grid();
});

</script>

</head>
<body>
<h2>Users</h2>
<table class="grid users" action="ajax.php">
    <tr>
                        <th col="id" type="text">ID</th>
        <th col="name" type="text">Name</th>
    </tr>
</table>

</body> 
```

**ajax.php**

```
<?php
// connect to db
mysql_connect("localhost","root","");
mysql_select_db("try");

// require our class
require_once("grid.php");
$grid = new Grid("first", array(
"save"=>true,
"delete"=>true
 ));

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T04:56:47.007

我最近通过调用辅助 php 变量遇到了这个问题，我忘记了一个单引号。我的一个脚本指向我的数据库中名为 - 字面意思 -> .field 的字段

检查主要和辅助脚本中“第一”一词周围的引号。寻找类似的东西

```
<textarea> ' . $first. (MISSING A ' HERE) </textarea> 
```

它应该是

```
<textarea>  ' . $first . '  </textarea> 
```

# android - Galaxy s4 res 文件夹

> ID：15475584
> 
> 赞同：3
> 
> 时间：2013-03-18T11:20:58.170
> 
> 标签：android, android-4.2-jelly-bean, galaxy

银河s4

屏幕：4.99 英寸，1920x1080（全高清）。

FHD 中将使用哪个 res 文件夹，应设置什么 dpi 值？

xhdpi 还是 xxhdpi？我该如何计算呢？

[我在开发者文档和screen_support](http://developer.android.com/guide/practices/screens_support.html)文章中没有找到任何信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:13:58.473

是 441 dpi，不是吗？所以几乎可以肯定是 xxhdpi，它已经在 Android 框架中得到支持。但是为什么在这个时候担心呢？假设您已经支持 xhdpi，普通用户可以检测到 xhdpi 和 xxhdpi 资产之间差异的可能性越来越小。

- 编辑 -

实际上，我会说它肯定是 xxhdpi，因为它已经与新的 HTC One（468dpi）一起使用。

# php - PHP - 解密加密密码

> ID：15475586
> 
> 赞同：1
> 
> 时间：2013-03-18T11:21:08.543
> 
> 标签：php, passwords, encryption

是否有任何可能或简单的方法来解密这部分加密？

```
$mixpw .= chr((int) ((sqrt( (ord($_POST['passwd'][$i]) << 2) * 974169 * (ord($_POST['passwd'][$i]))) >> 1) / (314.33 * 3.14)) + 2.12); 
```

由于按位移位，对我来说这似乎太复杂了。

这是加密的完整代码：

```
$mixpw = '';
$curM = 0;
for($i = 0; $i < strlen($_POST['passwd']); $i++) {
    if($curM == 0) {
        $mixpw .= ($i+2 < strlen($_POST['passwd'])) ? $_POST['passwd'][$i+2] : $_POST['passwd'][$i];
    } else if($curM == 1) {
        $mixpw .= chr((0x46+$i) % 254) . $_POST['passwd'][$i];
    } else if($curM == 2) {
        $mixpw .= ucfirst($_POST['passwd'][$i-2]);
    } else if($curM == 3) {
        $mixpw .= chr((int) ((sqrt( (ord($_POST['passwd'][$i]) << 2) * 974169 * (ord($_POST['passwd'][$i]))) >> 1) / (314.33 * 3.14)) + 2.12);
    }
    $curM = ($curM+1 > 3) ? 0 : $curM+1;
} 
```

加密密码为：**CG3ST3KT**

我设法获得了原始密码的前 3 个字母：**s3C**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:37:16.413

我想出了一个解决办法！前三个加密并不难解密。
但是为了解决第四个问题，我只是复制了加密代码并尝试猜测前三个后面的一些字符。在您获得正确的加密之前，这不会花费太长时间来猜测。
最终，此加密的密码是**s3CReT**。

# sql - 计算结果的日期时间戳

> ID：15475589
> 
> 赞同：0
> 
> 时间：2013-03-18T11:21:20.697
> 
> 标签：sql, oracle-sqldeveloper

我有一个表格，其中包含执行交易的列表`userids`和日期`stamp`时间。它如下所示：

```
UserId | Stamp   
 John11| 01/01/2013 01:15:27 
```

我想返回一个查询，显示一段时间内每个用户完成了多少交易。

我已经尝试过，`count`但由于它的时间部分`stamp`计算每个单独的毫秒而不是整体。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:25:36.323

根据您想要进行计数的方式，这样的事情应该可以工作。

对用户 ID 的每个唯一出现的 dd-mon-yyyy hh24:mi:ss 都进行计数。

```
SELECT userid
,      count(distinct TO_CHAR(stamp, 'dd-mon-yyyy hh24:mi:ss'))
FROM   MYTABLE
where  stamp > to_date('16-03-2013','DD-MM-YYYY')
group by userid 
```

现场示例：[http ://sqlfiddle.com/#!4/71241/1](http://sqlfiddle.com/#!4/71241/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:38:55.180

```
 select user_id,count(userid) cnt from table
 where stamp between to_timestamp('01-01-2013 01:15:27', 'DD-MM-YYYY HH:MI:SS') and
 to_timestamp('03-01-2013 12:15:27', 'DD-MM-YYYY HH:MI:SS') 
 group by user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:29:08.737

使用[time_to_sec](http://www.w3resource.com/mysql/date-and-time-functions/mysql-time_to_sec-function.php)函数获取实际值。

```
Select count(UserId), UserId from table where time_to_sec(stamp) between 
fromTime and toTime
-- fromTime and toTime are interval period 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:33:09.437

您的问题没有指定您想要的时间段，但这里是一个您可以适应其他时间段的月份示例：

```
SELECT 
  (DATEPART(YEAR, Stamp) * 100) + RIGHT('0' + DATEPART(MONTH, Stamp), 2) AS month_group
  ,COUNT(*) AS count
FROM MyTable
GROUP BY
  (DATEPART(YEAR, Stamp) * 100) + RIGHT('0' + DATEPART(MONTH, Stamp), 2) 
```

或仅使用一段时间；

```
SELECT 
  COUNT(*) AS count
FROM MyTable
WHERE Stamp BETWEEN ? AND ? 
```

# android - 我们如何将任何值（选定的）从对话框传递到 android 中的活动？

> ID：15475592
> 
> 赞同：0
> 
> 时间：2013-03-18T11:21:31.693
> 
> 标签：android, dialog

我需要帮助将值从自定义对话框传递到活动。我不明白我应该使用什么。我已经使用过意图，但对话框不支持意图值传递。所以任何人都可以在这里帮助我，我完全被困住了。如果你有任何基本的例子，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:25:01.700

来自谷歌文档的片段：

```
// Alert Dialog code (mostly copied from the Android docs
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Pick a color");
builder.setItems(items, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {
        myFunction(item);
    }
});
AlertDialog alert = builder.create();

// Now elsewhere in your Activity class, you would have this function
private void myFunction(int result){
    // Now the data has been "returned" (as pointed out, that's not
    // the right terminology)
} 
```

# entity-framework - WebApi OData：$filter 'any' 或 'all' 查询不起作用

> ID：15475593
> 
> 赞同：15
> 
> 时间：2013-03-18T11:21:34.143
> 
> 标签：entity-framework, asp.net-web-api, odata

首先，使用 ASP.NET WebApi 教程，我创建了一个基本的[ApiController，它通过 OData 公开一个实体框架模型](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options)。该服务用于为 OData $filter 查询返回 json。

[当我在多值属性上执行包含“任何”或“所有”查询的](http://www.odata.org/blog/2010/11/11/support-for-any-and-all)OData $filter 查询时，它会引发 ODataException

这是我尝试使用的 OData 查询

`~/api/Blogs?$filter=any(Tags,Name+eq+'csharp')`

我的 ApiController 看起来像这样：

```
public class BlogController : ApiController
{
    public BlogsController()
    {
        this.Entities = new BlogEntities();
    }

    public ContactEntities Entities { get; set; }

    [Queryable(PageSize = 25, AllowedQueryOptions = AllowedQueryOptions.All)]
    public IQueryable<Blog> Get()
    {
        return this.Entities.Blogs;
    }
} 
```

博客实体有这个合同

```
public Blog {
    public Guid ID { get; set; }
    public string Title { get; set; }
    public Tag Tags { get; set; }
}

public Tag {
    public Guid ID { get; set; }
    public string Name { get; set; }
} 
```

抛出的异常

```
ODataException: Type 'Blog' does not have a property 'Name' 
```

如您所见，我的代码中没有任何异常，一切都应该正常工作。[Microsoft ASP.NET Web API OData](http://nuget.org/packages/Microsoft.AspNet.WebApi.OData)是否可能不支持“任何”和“所有”查询？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-18T12:32:17.860

你的任何需要改变一下。尝试这样的事情：

```
~/api/Blogs?$filter=Tags/any(tag: tag/Name eq 'csharp') 
```

这是假设标签实际上返回标签的集合，而不仅仅是像上面那样的单个标签。

$inlinecount 仅支持 OData 格式的开箱即用。我在这里写了很多关于它的文章：

[Web API OData Inlinecount 不起作用](https://stackoverflow.com/questions/15422831/web-api-odata-inlinecount-not-working/15422935)

简短的回答是，您可以使用如下所示的代码使其适用于其他格式：

```
public PageResult<Customer> Get(ODataQueryOptions<Customer> queryOptions)
{
    IQueryable results = queryOptions.ApplyTo(_customers.AsQueryable());
    return new PageResult<Customer>(results as IEnumerable<Customer>, Request.GetNextPageLink(), Request.GetInlineCount());
} 
```

# angularjs - AngularJS：从模型数组拼接模型元素时，不会更新 ng-repeat 列表

> ID：15475601
> 
> 赞同：101
> 
> 时间：2013-03-18T11:21:56.840
> 
> 标签：angularjs, angularjs-directive, angularjs-scope, angularjs-ng-repeat

我有两个控制器，并通过 app.factory 函数在它们之间共享数据。

单击链接时，第一个控制器在模型数组 (pluginsDisplayed) 中添加一个小部件。小部件被推送到数组中，并且此更改反映到视图中（使用 ng-repeat 显示数组内容）：

```
<div ng-repeat="pluginD in pluginsDisplayed">
    <div k2plugin pluginname="{{pluginD.name}}" pluginid="{{pluginD.id}}"></div>
</div> 
```

该小部件建立在三个指令之上，k2plugin、remove 和 resize。remove 指令将跨度添加到 k2plugin 指令的模板。单击所述跨度时，共享数组中的右侧元素将被删除`Array.splice()`。共享数组已正确更新，但更改**未**反映在视图中。但是，当添加另一个元素时，在删除之后，视图会正确刷新，并且不会显示先前删除的元素。

我怎么了？你能解释一下为什么这不起作用吗？有没有更好的方法来做我想要用 AngularJS 做的事情？

这是我的 index.html：

```
<!doctype html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js">
        </script>
        <script src="main.js"></script>
    </head>
    <body>
        <div ng-app="livePlugins">
            <div ng-controller="pluginlistctrl">
                <span>Add one of {{pluginList.length}} plugins</span>
                <li ng-repeat="plugin in pluginList">
                    <span><a href="" ng-click="add()">{{plugin.name}}</a></span>
                </li>
            </div>
            <div ng-controller="k2ctrl">
                <div ng-repeat="pluginD in pluginsDisplayed">
                    <div k2plugin pluginname="{{pluginD.name}}" pluginid="{{pluginD.id}}"></div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

这是我的 main.js：

```
var app = angular.module ("livePlugins",[]);

app.factory('Data', function () {
    return {pluginsDisplayed: []};
});

app.controller ("pluginlistctrl", function ($scope, Data) {
    $scope.pluginList = [{name: "plugin1"}, {name:"plugin2"}, {name:"plugin3"}];
    $scope.add = function () {
        console.log ("Called add on", this.plugin.name, this.pluginList);
        var newPlugin = {};
        newPlugin.id = this.plugin.name + '_'  + (new Date()).getTime();
        newPlugin.name = this.plugin.name;
        Data.pluginsDisplayed.push (newPlugin);
    }
})

app.controller ("k2ctrl", function ($scope, Data) {
    $scope.pluginsDisplayed = Data.pluginsDisplayed;

    $scope.remove = function (element) {
        console.log ("Called remove on ", this.pluginid, element);

        var len = $scope.pluginsDisplayed.length;
        var index = -1;

        // Find the element in the array
        for (var i = 0; i < len; i += 1) {
            if ($scope.pluginsDisplayed[i].id === this.pluginid) {
                index = i;
                break;
            }
        }

        // Remove the element
        if (index !== -1) {
            console.log ("removing the element from the array, index: ", index);
            $scope.pluginsDisplayed.splice(index,1);
        }

    }
    $scope.resize = function () {
        console.log ("Called resize on ", this.pluginid);
    }
})

app.directive("k2plugin", function () {
    return {
        restrict: "A",
        scope: true,
        link: function (scope, elements, attrs) {
            console.log ("creating plugin");

            // This won't work immediately. Attribute pluginname will be undefined
            // as soon as this is called.
            scope.pluginname = "Loading...";
            scope.pluginid = attrs.pluginid;

            // Observe changes to interpolated attribute
            attrs.$observe('pluginname', function(value) {
                console.log('pluginname has changed value to ' + value);
                scope.pluginname = attrs.pluginname;
            });

            // Observe changes to interpolated attribute
            attrs.$observe('pluginid', function(value) {
                console.log('pluginid has changed value to ' + value);
                scope.pluginid = attrs.pluginid;
            });
        },
        template: "<div>{{pluginname}} <span resize>_</span> <span remove>X</span>" +
                       "<div>Plugin DIV</div>" +
                  "</div>",
        replace: true
    };
});

app.directive("remove", function () {
    return function (scope, element, attrs) {
        element.bind ("mousedown", function () {
            scope.remove(element);
        })
    };

});

app.directive("resize", function () {
    return function (scope, element, attrs) {
        element.bind ("mousedown", function () {
            scope.resize(element);
        })
    };
}); 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-18T12:19:53.020

每当您在 AngularJS 之外进行某种形式的操作时，例如使用 jQuery 进行 Ajax 调用，或者将事件绑定到您在此处的元素，您需要让 AngularJS 知道要更新自己。这是您需要做的代码更改：

```
app.directive("remove", function () {
    return function (scope, element, attrs) {
        element.bind ("mousedown", function () {
            scope.remove(element);
            scope.$apply();
        })
    };

});

app.directive("resize", function () {
    return function (scope, element, attrs) {
        element.bind ("mousedown", function () {
            scope.resize(element);
            scope.$apply();
        })
    };
}); 
```

这是关于它的文档：[https ://docs.angularjs.org/api/ng/type/$rootScope.Scope#$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-03-18T12:19:54.093

如果你`$scope.$apply();`在之后添加一个权利，`$scope.pluginsDisplayed.splice(index,1);`那么它就可以工作。

我不确定为什么会发生这种情况，但基本上当 AngularJS 不知道 $scope 已更改时，它需要手动调用 $apply 。我也是 AngularJS 的新手，所以无法更好地解释这一点。我也需要更多地研究它。

我发现[这篇很棒的文章](http://jimhoskins.com/2012/12/17/angularjs-and-apply.html)很好地解释了它。注意：我认为使用 ng-click [(docs)](http://docs.angularjs.org/api/ng.directive:ngClick)而不是绑定到“mousedown”可能会更好。我在这里编写了一个基于 AngularJS的简单应用程序（[http://avinash.me/losh](http://avinash.me/losh)，来源[http://github.com/hardfire/losh ）。](http://github.com/hardfire/losh)它不是很干净，但它可能会有所帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-04T07:56:26.157

我遇到过同样的问题。问题是因为“ng-controller”被定义了两次（在路由和 HTML 中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-16T16:21:11.373

从 ng-repeat 中删除“按索引跟踪”，它将刷新 DOM

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-13T15:25:36.487

有一个简单的方法可以做到这一点。好简单。自从我注意到

```
$scope.yourModel = []; 
```

删除您可以这样做的所有 $scope.yourModel 数组列表

```
function deleteAnObjectByKey(objects, key) {
    var clonedObjects = Object.assign({}, objects);

     for (var x in clonedObjects)
        if (clonedObjects.hasOwnProperty(x))
             if (clonedObjects[x].id == key)
                 delete clonedObjects[x];

    $scope.yourModel = clonedObjects;
} 
```

$scope.yourModel 将使用 clonedObjects 进行更新。

希望有帮助。

# html - 在 ChildBrowser 中查看本地 PDF 文件？

> ID：15475602
> 
> 赞同：0
> 
> 时间：2013-03-18T11:21:57.827
> 
> 标签：html, xcode, cordova, childbrowser

我已将 PDF 文件下载到 PhoneGap LocalFileSystem，现在正尝试在 ChildBrowser 中查看它。我就是这样做的；

```
 function viewOffline() {
        var files = pathToRoot + "/Holidays.pdf";
        window.plugins.childBrowser.showWebPage(files);
    } 
```

当我运行应用程序时，ChildBrowser 会打开，但它无法读取文件。我可以使用 .showFile 之类的东西吗？我对 ChildBrowser 真的很陌生，所以非常感谢任何帮助

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:42:06.320

我做了一个快速检查，发现您无法使用子浏览器打开 PDF 文件。您需要使用[PDFViewer 插件](https://github.com/RandyMcMillan/CDVPDFViewer)。此插件仅用于显示本地 PDF。从外部 URL 显示 PDF 时，应使用 InAppBrowser 或 ChildBrowser

# .net - 用于过滤 Observable 集合中的字符串列表的 Linq 查询

> ID：15475607
> 
> 赞同：1
> 
> 时间：2013-03-18T11:22:20.177
> 
> 标签：.net, list, observablecollection

从 Observable 集合中，我想过滤名称为 aaa、bbb、ccc、ddd、eee 的项目。这该怎么做？

```
public class Item
{
public string ItemName {get; set;}
public int ItemNumber {get; set;}
}

public ObservableCollection<Item> _items;

public List<string> searchItems = new List<string>(5);
searchItems.Add("aaa");
searchItems.Add("bbb");
searchItems.Add("ccc");
searchItems.Add("ddd");
searchItems.Add("eee"); 
```

我在 linq 中尝试了一些 .. 但我不知道如何处理列表..

```
var filteredItems = from item in _items
                    where _items.Any(x => x.ItemName == "aaa")
                    select x; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:25:48.640

您可以使用包含；

```
var filteredItems = from item in _items
                    where _items.Any(x => searchItems.Contains(x.ItemName))
                    /*select x;*/
                    select item; 
```

# java - 如何根据选择的内容显示菜单？

> ID：15475623
> 
> 赞同：-2
> 
> 时间：2013-03-18T11:22:53.723
> 
> 标签：java, swing, jcombobox, jlist, jmenuitem

在摇摆中，我如何根据从另一个菜单中选择的内容显示菜单。

例如：选择国家下拉菜单。接下来是州下拉菜单，然后是城市。

选择特定国家/地区时，显示该国家/地区的州。Also, when a state is selected, show the cities in the state.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:35:03.727

A`JMenu`可以包含`JMenuItem`&`JMenu`实例。您可能拥有它，以便主菜单包含国家/地区的菜单。每个国家/地区菜单都有针对州的菜单，然后每个州都有针对城市的 菜单*项。*

`JComboBox`OTOH 3 个实例将提供更好的用户体验。第一个是针对国家的，第二个和第三个是根据需要（按需）填充的。

# c# - 如何在中运行 SelectCommand 标签

> ID：15475626
> 
> 赞同：1
> 
> 时间：2013-03-18T11:23:02.517
> 
> 标签：c#, asp.net

我正在制作 QueryString 参数，所以我有两个 .aspx 表单。一个表单`Default.aspx`包含三个字段 SId、FirstName、LastName。当我提交值时，这些值将保存在数据库中。现在我想在网格上显示特定 SId 上的这些数据`default2.aspx`。网格通过 SqlDataSource 获取数据。所以我想在单击按钮时调用 SqlDataSource，网格应该显示特定 SId 上的数据`default2.aspx`。

**默认.aspx**：

```
<body>
  <form id="form1" runat="server">
  <div>

  </div>
<table cellpadding="2" cellspacing="5">
    <tr>
        <td>
            <asp:Label ID="lblId" runat="server" Text="SId"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tbid" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblname" runat="server" Text="FirstName"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tbfirstname" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lbllastname" runat="server" Text="LastName"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tblastname" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
        </td>
        <td>
            <asp:Button ID="btnsubmit" runat="server" Text="Submit" 
                onclick="btnsubmit_Click1" Width="102px" />
        </td>
    </tr>
</table>
<br />

</form>
</body> 
```

**默认2.aspx**：

```
<body>
<form id="form1" runat="server">
<div>

    <table cellpadding="2" cellspacing="5">
        <tr>
            <td>
                SId</td>
            <td>
                <asp:TextBox ID="tbId" runat="server"></asp:TextBox>
            </td>
        </tr>

        <tr>
            <td>
            </td>
            <td>
                <asp:Button ID="btnSearch" runat="server" Text="Search" 
                    onclick="btnSearch_Click" />
            </td>
        </tr>

    </table>  
</div>

<br />

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    AutoGenerateSelectButton="True" 
    DataSourceID="SqlDataSource1" EnableModelValidation="True" 
    onrowcommand="GridView1_RowCommand">
<Columns>

        <asp:TemplateField HeaderText="SId">
          <ItemTemplate>
           <asp:Label ID="lblSId" runat="server" Text='<%# Bind("SId") %>'></asp:Label>
           </ItemTemplate>

        </asp:TemplateField>

        <asp:TemplateField HeaderText="FirstName">
           <ItemTemplate>
          <asp:Label ID="lblFirstName" runat="server" Text='<%# Bind("FirstName")%>'>

          </asp:Label>
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="LastName">
           <ItemTemplate>
  <asp:Label ID="lblLastName" runat="server" Text='<%# Bind("LastName")%>'></asp:Label>
           </ItemTemplate>
        </asp:TemplateField>

</Columns>
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:testConnectionString %>"  
    SelectCommand="SELECT * FROM [Student] where SId = @tbId">

<SelectParameters>
        <asp:QueryStringParameter Name="SId" QueryStringField="SId" />
</SelectParameters>
</asp:SqlDataSource>
</form>
</body> 
```

我想在按钮单击时调用 SqlDataSource1 像..

**Default2.aspx.cs**：

```
 protected void btnSearch_Click(object sender, EventArgs e)
 {     
    string SId = tbId.Text;
    SqlDataSource1.DataBind();

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:30:16.970

您不需要单击按钮。在`SqlDataSource`每个帖子上执行。搜索按钮将发回一个帖子。但是你需要改变一些事情。首先，您需要正确设置参数，因此请删除此参数：

```
<asp:QueryStringParameter Name="SId" QueryStringField="SId" /> 
```

并把这个放在它的位置：

```
<asp:ControlParameter ControlID="tbId" PropertyName="Text" Name="tbId" /> 
```

现在删除所有这些代码：

```
protected void btnSearch_Click(object sender, EventArgs e)
{     
    string SId = tbId.Text;
    SqlDataSource1.DataBind();
} 
```

现在`SqlDataSource`直接与控件值相关联，因此当用户输入新控件值并单击按钮时，它将被应用并检索新数据，而无需您进行任何交互。

# c# - c#如何将一个文件夹中的所有文件复制到另一个文件夹

> ID：15475628
> 
> 赞同：-4
> 
> 时间：2013-03-18T11:23:11.597
> 
> 标签：c#, .net, copy

请让我知道如何将文件夹中的所有文件复制到 c# .net 中的另一个文件夹。

目前我正在使用：

```
int j = 1;
int k = 1;

    for (j = 1; j < 5; j++)
    {

        for (k = 1; k < 32; k++)
        {

            string sourcePath = @Desktop_location + "\Test" + k + ".log";

            if (System.IO.File.Exists(sourcePath))
            {
                File.Copy(@Desktop_location + "\\Statistics\\Server" + j + "\Test" + k + ".log", @Desktop_location + "\\Statistics\\Transfer\\test" + j + k + ".log");
                //Console.WriteLine("Test Result");
            }
            else
            {
                //Console.WriteLine("Test"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:39:07.800

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\"); 
```

请参阅[从目录中获取文件](http://www.csharp-examples.net/get-files-from-directory/)

```
string myPath = @"C:\Test";
foreach (string file in filePaths)
{
    FileInfo info = new FileInfo(file);
    if (!File.Exists(info.FullName))
    {
       File.Copy(info.FullName, newPath);
    }
} 
```

请参阅[使用 FileInfo 类](http://www.dotnetperls.com/fileinfo)，您实际上并不需要它，但它包含许多用于处理文件和文件夹的有用功能。阅读它将帮助您规划您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:31:03.387

如果你真的想复制**所有**文件，你可以这样做（复制包括目录在内的所有内容）：

```
foreach (string dirPath in Directory.GetDirectories(sourcePath, "*", SearchOption.AllDirectories))
{
    Directory.CreateDirectory(dirPath.Replace(sourcePath, destinationPath));
}

foreach (var newPath in Directory.GetFiles(sourcePath, "*.*", SearchOption.AllDirectories))
{
    File.Copy(newPath, newPath.Replace(sourcePath, destinationPath));
} 
```

# php - 使用 Java 和 PHP 的 HTTP 发布消息

> ID：15475630
> 
> 赞同：2
> 
> 时间：2013-03-18T11:23:15.510
> 
> 标签：php, android, json

我是 PHP 和 Java http 客户端的新手，我正在尝试向我的服务器上的 PHP 脚本发布消息，我尝试了以下示例：[http ://webtutsdepot.com/2011/11/15/android-tutorial-how -to-post-data-from-an-android-app-to-a-website/](http://webtutsdepot.com/2011/11/15/android-tutorial-how-to-post-data-from-an-android-app-to-a-website/)

但是我无法理解如何将 JSON 结果发送回我的 android 应用程序，以下是我正在使用的代码：

爪哇：

```
 public void send(View v)
      {
     // get the message from the message text box
     String msg = Et.getText().toString();  

     // make sure the fields are not empty
     if (msg.length()>0)
     {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://animsinc.com/query.php");
     try {
       List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
       nameValuePairs.add(new BasicNameValuePair("id", "12345"));
       nameValuePairs.add(new BasicNameValuePair("message", msg));
       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
       httpclient.execute(httppost);
       Et.setText(""); // clear text box
     } catch (ClientProtocolException e) {
         // TODO Auto-generated catch block
     } catch (IOException e) {
         // TODO Auto-generated catch block
     }

     }
     else
     {
        // display message if text fields are empty
         Toast.makeText(getBaseContext(),"All field are required",Toast.LENGTH_SHORT).show();
     }

 } 
```

PHP：

```
 <?php

       require 'phtry.php';

       $message = $_POST["message"]; 

       $query = "SELECT `surname`,`firstname` FROM `users`";

       $query1 = "SELECT * FROM  `users` WHERE id = $message";

      if ($query_run = mysql_query($query1)){
 //echo 'Success.';
 while ($query_row = mysql_fetch_assoc($query_run)){

$surname = $query_row['surname'];
$firstname = $query_row['firstname'];

}

$out [] = $query_row;
print(json_encode($out)); // If I check with my web browser I get a [false] display here

}else{
    echo 'No Success';
}

    ?> 
```

因为我是新手，所以我也想知道我做的事情是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:29:45.297

您的代码在 PHP 方面是一团糟。你不能只是回声。这将导致 JSON 解析失败。

我建议您使用 Google self 的轻量级[GSON 库](https://sites.google.com/site/gson/gson-user-guide)。您使用 POJO 类来解析 json。一旦你有了一个带有 GSON 的 POJO 类，你所要做的就是使用`HttpResponse`from your`HttpPost`来读取响应本身，如下所示：

```
 HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(URL);

        try {
            List<NameValuePair> values = new ArrayList<NameValuePair>(2);
            values.add(new BasicNameValuePair("id", "12345"));
            values.add(new BasicNameValuePair("message", "asdf");
            post.setEntity(new UrlEncodedFormEntity(values));

            HttpResponse httpresponse = client.execute(post);
            HttpEntity entity = httpresponse.getEntity();
            InputStream stream = entity.getContent();

            Gson gson = new Gson();
            Reader reader = new InputStreamReader(stream);

            Response finishresponse = gson.fromJson(reader, Response.class);
            return finishresponse;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null; 
```

就我而言，我的 POJO 类是`Response`我创建的类。

# ruby - 如何安装 ruby -augeas gem？（Ubuntu 10.04）

> ID：15475642
> 
> 赞同：2
> 
> 时间：2013-03-18T11:23:49.100
> 
> 标签：ruby, ubuntu, augeas

```
root@ubuntu10:~# gem install ruby-augeas
Fetching: ruby-augeas-0.5.0.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-augeas:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/rvm/rubies/ruby-1.9.3-p327/bin/ruby
    --with-augeas-config
    --without-augeas-config
    --with-pkg-config
    --without-pkg-config
extconf.rb:27:in `<main>': augeas-devel not installed (RuntimeError)

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ruby-augeas-0.5.0 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ruby-augeas-0.5.0/ext/augeas/gem_make.out

No idea what lib is missing....

root@ubuntu10:~# apt-get install libaugeas-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libaugeas-dev is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 108 not upgraded. 
```

我还安装了 libaugeas-dev lib ，它仍然无法正常工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-29T11:36:32.723

在 Ubuntu 12.04 上。我修复了它：

```
$ sudo apt-get install pkg-config 
```

根据以下回复：[http ://www.redhat.com/archives/augeas-devel/2009-August/msg00061.html](http://www.redhat.com/archives/augeas-devel/2009-August/msg00061.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T11:44:11.357

`augeas-devel not installed (RuntimeError)`

你应该安装它：

`sudo apt-get install libaugeas-dev`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T10:38:36.677

`gem`在 Ubuntu上安装不需要使用`ruby-augeas`，它是打包好的，所以只需使用：

```
sudo apt-get install libaugeas-ruby 
```

如果你想要最新版本的 Augeas 和 ruby​​-augeas，你可以使用[我的 PPA](https://launchpad.net/~raphink/+archive/augeas)：

```
sudo apt-add-repository ppa:raphink/augeas
sudo apt-get update
sudo apt-get install libaugeas-ruby 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:27:22.160

你可以试试`gem install ruby-augeas --pre`

# wpf - 在 UserControl.Resources 中包含资源字典无法编译

> ID：15475643
> 
> 赞同：2
> 
> 时间：2013-03-18T11:23:54.383
> 
> 标签：wpf, parsing, xaml

我有一个自定义控件，我想从另一个项目的资源字典中应用一些样式。出于某种原因，在`UserControl.Resources`失败中添加资源，但将其放入`Grid.Resources`成功；

```
<UserControl x:Class="My.Name.Space.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" d:DesignHeight="200" d:DesignWidth="300">

    <UserControl.Resources>
        <ResourceDictionary x:Key="UserControlResources">
            <!--Putting it here fails-->
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.Resources>
            <ResourceDictionary x:Key="GridResources">
                <!--Putting it here succeeds-->
            </ResourceDictionary>
        </Grid.Resources>

        <!--Control XAML-->

    </Grid>

</UserControl> 
```

我收到错误消息“当前上下文中不存在名称‘IntializeComponent’”。但是，看看自动生成的 MyUserControl.gics 文件，嘿，很快；就在那里。我究竟做错了什么？这两个声明有什么区别？

谢谢，斯特伦

# codeigniter - 添加 %20 而不是空格

> ID：15475645
> 
> 赞同：5
> 
> 时间：2013-03-18T11:24:14.587
> 
> 标签：codeigniter, urlencode, urldecode

我想这是一个小问题，但我不得不在这里问，因为我的项目不够用。当我将字符串传递给另一个控制器中的函数时，它会将空格更改为 %20 符号。我猜控制器认为字符串作为 url 传递并对其进行编码。但我不确切知道如何删除它，或者如果可能的话不要让它将空格更改为 %20。这是我使用的代码；

```
$message="The user name you provided is already in our database";
redirect('admin/add_user/'.$message); 
```

这是我收到消息的控制器功能；

```
public function add_user($message)
{
  echo $message;
} 
```

我也试过这个；

```
public function add_user()
{
  echo $this->uri->segment(3);
} 
```

但结果是一样的。这是字符串的输出；

```
The%20user%20name%20you%20provided%20is%20already%20in%20our%20database 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T11:26:14.753

试试这个：

```
public function add_user($message)
{
  echo urldecode($message);
} 
```

您可以在此处阅读有关 urldecode 的更多信息：http: [//php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:27:02.113

试试这个：

```
echo urldecode($message); 
```

因为您将消息作为 URL 的一部分传递（重定向执行新的 http 请求），所以它会自动进行 url 编码。一旦服务器收到它，您只需要对其进行解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:34:24.797

保存到数据库时使用：

```
htmlentities($variable) 
```

输出使用时：

```
echo html_entity_decode($variable, ENT_COMPAT, 'UTF-8'); 
```

# java - Android将相机图片保存到本地存储

> ID：15475656
> 
> 赞同：5
> 
> 时间：2013-03-18T11:25:21.297
> 
> 标签：java, android, camera, storage, internal

今天我要处理一件困难的事情。

我启动相机并希望将拍摄的图像直接保存到我的内部存储器中，而不是将其移动到其中。

```
 File targetDir = new File(getApplicationContext().getFilesDir()+File.separator+"PROJECTMAIN"+File.separator+"SUBFORDER");
    targetDir.mkdirs(); //create the folder if they don't exist

    File externalFile = new File(targetDir, "picturename.jpg");
    Uri imageURI = Uri.fromFile(externalFile);

    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, imageURI);
    startActivityForResult(takePictureIntent, actionCode); 
```

似乎如果我尝试将它们直接保存到内部存储中，相机会忽略我在拍照后单击“确定”按钮。我认为“内部”URI 有问题，因为如果我使用`Environment.getExternalStorageDirectory()`而不是`getApplicationContext().getFilesDir()`用于 extra_output，一切正常，但之后我必须将文件移动到内部存储中（移动过程对“getApplicationContext() .getFilesDir()")

当我拍照并按下确定按钮以继续使用内部 URI 时，相机什么也不做……我不敢相信在 Android 中存储有这么难。

有任何想法吗？也许相机只允许将图片保存到外部存储器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:47:37.277

试试下面的代码

```
File dir= context.getDir("dirname", Context.MODE_PRIVATE); //Creates Dir inside internal memory
File file= new File(dir, "filename");  //It has directory details and file name
FileOutputStream fos = new FileOutputStream(file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T06:26:11.250

对于更高版本的 Android 7.0 使用此代码，

```
<application
    ...>
    <activity>
    .... 
    </activity>
    <provider
        android:name="android.support.v4.content.FileProvider"
        android:authorities="com.your.package.fileProvider"
        android:grantUriPermissions="true"
        android:exported="false">
        <meta-data
            android:name="android.support.FILE_PROVIDER_PATHS"
            android:resource="@xml/file_paths" />
    </provider>
  </application> 
```

现在在 xml 资源文件夹中创建一个文件，

```
<?xml version="1.0" encoding="utf-8"?>
<paths>
  <external-path path="Android/data/com.your.package/" name="files_root" />
  <external-path path="." name="external_storage_root" />
</paths> 
```

然后每当用于相机意图时使用它，

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
            Uri contentUri = FileProvider.getUriForFile(getContext(), "com.your.package.fileProvider", newFile);
            intent.setDataAndType(contentUri, type);
        } else {
            intent.setDataAndType(Uri.fromFile(newFile), type);
        } 
```

# ruby - 类、模块、它们的特征类和方法查找

> ID：15475658
> 
> 赞同：5
> 
> 时间：2013-03-18T11:25:28.427
> 
> 标签：ruby, class, module, lookup, eigenclass

让我们打开类`Module`并为其添加一个方法：

```
class Module  
  def foo  
    puts "phew"  
  end  
end 
```

我可以通过这样做来调用这个方法，

```
Class.foo 
```

这是可以理解的，因为 class of `Class`is `Class`，其超类 is `Module`。所以它可以调用定义在`Module`.

![类和模块之间的关系](../Images/b28666580571459b7472886f119e8691.png)

现在，`bar`下面的方法是在 的特征类上定义`Module`的：

```
class Module  
   def self.bar  
     puts "bar"  
   end  
end 
```

但现在

```
Class.bar 
```

也有效。

有人可以解释一下如何`Class`访问`Module`eigenclass 中的方法吗？

* * *

我想我现在明白了。方法查找不像我之前解释的那样工作。当我这样做时`Class.foo`，该方法在`Class`的 eigenclass 中搜索，然后它是超类，它是`Module`eigenclass 一直到`BasicObject`的 eigenclass，此时它会转向自身（就像一条蛇吃自己的尾巴）以在`Class`(的eigenclass)`Class`的超类也是`BasicObject`如此，然后是它的 superclass `Module`，它在那里找到方法。

同样，当我这样做时`Class.bar`，方法会在 ' 的 eigenclass 中搜索`Class`，然后在`Module`' 的 eigenclass 中找到它。

当我做

```
class Class   
  def check  
    puts "class instance method"  
  end
end 
```

和

```
class Module   
  def self.check    
    puts "modules eigenclass method"     
  end    
  def check    
    puts "module instance method"   
  end     
end 
```

当我这样做时，猜测 wot 是输出：

```
Class.check 
```

这是我目前的理解： ![目前的理解](../Images/211fa83678b7144d38bead73f6f71b6f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:39:54.303

[当Andrea Singh](http://madebydna.com/all/code/2011/06/24/eigenclasses-demystified.html)的这篇博文中涉及 Eigenclasses 时，对 Ruby 的方法查找行为进行了相当全面的概述。值得注意的是，接近最后的“特征类和类继承”部分包含一个有用的查找图，可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:44:15.853

我最近写了一个相当[广泛的教程](https://github.com/kyrylo/entooru/blob/master/articles/20130322_understanding_method_lookup_in_ruby_20/en/en_understanding_method_lookup_in_ruby_20.md)，包括新的 Ruby 2.0 行为。

注意：Ruby 中使用的术语是`singleton_class`，而不是`eigenclass`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-16T10:16:18.507

我最近写了一篇关于`eigenclass`Ruby 的教程：

[在不到 5 分钟的时间内了解特征类](https://medium.com/rubycademy/understanding-the-eigenclass-in-less-than-5-minutes-dcb8ca223eb4)

# javascript - 使用 Jquery 的选项卡 UI

> ID：15475659
> 
> 赞同：0
> 
> 时间：2013-03-18T11:25:36.263
> 
> 标签：javascript, jquery, html, jquery-ui

**[http://jqueryui.com/tabs/#manipulation](http://jqueryui.com/tabs/#manipulation)**选项卡操作单击添加选项卡。但我需要在那里进行一些调整。在我单击添加选项卡后，即单击添加选项卡会创建一个 tab2..但屏幕不会将视图带到第二个选项卡。它保留在第一个选项卡中，但添加了第二个选项卡（单击后不活动）

单击添加按钮后，我需要**tab2处于活动状态...对于所有添加选项卡，此过程将继续进行。**

我需要一个例子或一种方式..因为它是我当前项目的一个亮点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:33:19.443

# javascript - Portable Firefox：在会议期间确保浏览器兼容性的好选择？

> ID：15475661
> 
> 赞同：1
> 
> 时间：2013-03-18T11:25:36.873
> 
> 标签：javascript, jquery, css, firefox, cross-browser

我正在开发一个 Web 应用程序，供用户在商务会议期间使用，该应用程序可以配备各种操作系统和浏览器配置。

应用程序界面基于 CSS 和 jQuery 库。由于无法事先完全了解用户的配置，因此需要规划易于管理的备份解决方案，以防某些用户，尤其是 Windows 用户碰巧带着旧版本参加会议的 IE 将不允许 Web 应用程序运行其所有功能。（注意：鉴于这些浏览器具有自动更新功能，我并不担心运行 Safari 的 Mac OS 用户和安装了 Firefox 或 Chrome 的 Windows 用户。）

我刚刚遇到了[Portable Firefox](http://portableapps.com/apps/internet/firefox_portable)，我认为带着一些带有 Portable Firefox 的 USB 密钥来参加会议可能是一个不错的选择，尤其是允许老 IE 用户加入，而不必经历麻烦和风险与会话开始时的浏览器安装相关联。

你确认吗？是否需要做更多的工作来确保这些“便携式 Firefox 用户”可以使用 CSS3、javascript 和 jQuery，或者我可以确定它们会默认使用吗？

干杯。

# android - 使用相同的活动，但更改显示的内容

> ID：15475662
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:25:40.740
> 
> 标签：android, optimization, swipe, code-reuse, android-assets

我正在开发一个应用程序，当加载活动时，它会在滚动视图中显示一个文本文件（.txt）。就在文本文件下方，我有两个按钮（playAnimation 和 playAudio），按下时播放相应的文件（分别为 swf 和 mp3）。

现在我想修改当前代码以使其适用于多个文件（我可以通过多个活动来做同样的事情，但这将是多余的并且不是一种好的编程方式）。我有许多文本文件及其相应的动画和音频文件。我想使用相同的代码并且只动态更改文件名（即文本、动画和音频文件的文件名）

我的 MainActivity 如下（请参阅代码中的注释。这些是要进行更改的空间）：

```
public class MainActivity extends Activity
{

    Button playAnimationButton,playAudioButton;
    MediaPlayer mp;

    Context contextObject;
    GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
        setContentView(R.layout.activity_main);

        ReadText readText=new ReadText(this);
        TextView helloTxt = (TextView)findViewById(R.id.displaytext);

        String fileName="textone";

        // code to be written for getting the current page name and storing it in the String fileName
        helloTxt.setText(readText.readTxt(fileName));

        String audioName="pg3";
        //Code to be written for getting the the current audioName
        AssetFileDescriptor afd;
        try {
            afd=getAssets().openFd(audioName + ".mp3");
            mp = new MediaPlayer();
            mp.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
            mp.prepareAsync();
        } 
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        gestureDetector = new GestureDetector(this.getApplicationContext(),new MyGestureDetector());
        View mainview = (View) findViewById(R.id.mainView);

        // Set the touch listener for the main view to be our custom gesture listener
        mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return false;
                }
                return true;
            }
        });

        playAnimationButton=(Button)findViewById(R.id.playanimation);
        playAnimationButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                mp.pause();
                Intent startAnimation=new Intent(MainActivity.this,PlayAnimationActivity.class);
                startAnimation.putExtra("SWF_NAME","a");

                // code for sending the particular animation file corresponding to the current page
                startActivity(startAnimation);
            }
        });

        playAudioButton=(Button)findViewById(R.id.playaudio);
        playAudioButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //code for dynamically sending the particular audio file associated with the current page

                if(mp.isPlaying())
                {
                    mp.pause();
                } 

                else 
                {

                    mp.start();
                }

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class MyGestureDetector extends SimpleOnGestureListener
    {

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > GlobalVariables.SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                // The Code for loading the next text file with its corresponding audio and animation on buttons.

                //  left to right  swipe
            }  else if (e2.getX() - e1.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                // The code for loading the previous text file with its corresponding audio and animation buttons.

            }

            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

    }

} 
```

非常感谢与我如何继续执行此任务有关的任何建议。

提前致谢。（有人否决了这个问题。我不介意。但至少在这样做之前说明原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:35:45.410

在活动中使用片段，您可以在同一个片段上加载尽可能多的文件。检查以下一小段代码，这将在您`onCreate()`的 Activity 中加载该片段。

```
Fragment newFragment = new YourFragment;  //Instance of your fragment
FragmentTransaction ft = getSupportFragmentManager()
                .beginTransaction();
ft.add(R.id.fragment_container, newFragment).commit(); 
```

以下代码用于加载新片段并将片段添加到堆栈。

```
void addFragmentToStack(String url) {

    mFragmentUrl = url;
    // Instantiate a new fragment.
    Fragment newFragment = new your fagment;
    // Add the fragment to the activity, pushing this transaction
    // on to the back stack.
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragment_container, newFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.addToBackStack(null);
    ft.commit();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:32:05.460

尝试使用 ListView 列出所有文件名并启动 onItemclick 侦听器。从 Override onItemclick 您可以从列表中获取文件名及其数组位置。[请参阅http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)中的以下 ListView 代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:40:07.470

我终于想出了一个办法。这是适用于我的情况的代码。我有一个根据计数维护文件名称的类。文件名根据计数动态发送到以下方法。下面的方法动态读取该文件并返回字符串并将其设置为`TextView`on swipe。左右滑动，分别递增和递减计数。为动画和声音文件维护了类似的代码。这工作顺利。

```
public String readTxt(String fileName)
        {

            try {
                InputStream is;
                is = context.getAssets().open(fileName + ".txt");
                ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

                int i;
                i = is.read();
                while (i != -1)
                {
                    byteArrayOutputStream.write(i);
                    i = is.read();
                }

                is.close();

                return byteArrayOutputStream.toString();

            } 

            catch (IOException e) 
            {
                e.printStackTrace();
            }

            return fileName;
        } 
```

欢迎更好、更有效的解决方案。现在我接受这个答案。谢谢大家的回复。

# delphi - 如何循环浏览具有相同字段数据的表？

> ID：15475665
> 
> 赞同：0
> 
> 时间：2013-03-18T11:25:41.230
> 
> 标签：delphi, delphi-7

你好，我今天运行了这段代码，但问题是当字段上有相同的数据时，它不会循环，而只是显示它过滤的第一个数据。这是代码

```
ADOTable1.First;
if ADOTable1.Locate('Last', Edit1.Text, []) then
begin
  Label1.Caption := ADOTable1.FieldByName('Last').AsString;
  Label2.Caption := ADOTable1.FieldByName('First').AsString;
  Label3.Caption := ADOTable1.FieldByName('address').AsString;
  Next;
end 
else
begin
  Label1.Caption := '';
  Label2.Caption := '';
  Label3.Caption := '';
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:54:32.270

[`Locate`](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.DB.TDataSet.Locate)在 DataSet 中找到与指定条件匹配的***第一条记录。***
如果找到记录，则该记录将成为活动/当前记录。
它不能用于定位“下一个”匹配项。您可能希望将[`Filter`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.Filter)标准与[`FindFirst`](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.DB.TDataSet.FindFirst)/一起使用，[`FindNext`](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.DB.TDataSet.FindNext)例如：

```
DataSet.Filter := 'Last = ''' + Edit1.Text + '''';
if DataSet.FindFirst then
begin
  ShowMessage('Found First!');
  while DataSet.FindNext do
  begin
    ShowMessage('Found Next!');
  end;
end; 
```

如果您想过滤所有符合您的条件的记录，只需使用：

```
DataSet.Filter := 'Last = ''' + Edit1.Text + '''';
DataSet.Filtered := True; // apply filter for the dataset 
```

现在只有那些满足过滤条件的记录在数据集中可用。
然后迭代数据集：

```
DataSet.First;
while not DataSet.Eof do
begin
  // do something with the record
  DataSet.Next;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:56:56.847

谢谢。昨晚到目前为止得到了这个代码

```
procedure TMain.Button1Click(Sender: TObject);

begin
ADOTable1.First;
while not ADOTable1.EOF do
begin
if (ADOTable1.FieldByName('Last Name').AsString = edit1.Text)
then begin
Label1.Caption := ADOTable1.FieldByName('Last Name').AsString;
Label2.Caption := ADOTable1.FieldByName('First Name').AsString;
Label3.Caption := ADOTable1.FieldByName('MI').AsString;
end;
ShowMessage('click ok for next profile');
ADOTable1.Next;
end; 
```

它可能与您给出的代码相同，但此代码搜索 db 网格上的每一行，因此每一行让我按一次确定按钮。是否可以单击一次确定，然后代码将搜索下一个匹配数据而不是而不是搜索每一行？

# scala - 坚持实施自定义控制结构

> ID：15475667
> 
> 赞同：1
> 
> 时间：2013-03-18T11:25:42.290
> 
> 标签：scala

我的任务是编写一个`repeat`可以像这样使用的自定义控制结构：

```
var i = 0
repeat {
    i = i + 1
}(i > 5) 
```

我目前有以下代码：

```
def repeat(f: => Unit): ((=> Boolean) => Unit) = {
    (x) => {
        while (x) f
    }
} 
```

运行它时，似乎 f ( `i = i + 1`) 永远不会执行。

老实说，我不完全确定当前的类型`x`是什么。这显然是不正确的，但我没有足够的知识知道从这里去哪里。

我曾经有这个：

```
def repeat(f: => Unit): ((=> Boolean) => Void) = {
    (x: (=> Boolean)) => {
        while (x) f
    }
} 
```

尽管这显然是不正确的 Scala，但我认为它更好地表明了我的意图。

很抱歉，如果我的问题有点宽泛/证明了毫不费力，但是名称参数的概念对我来说是非常新的，并且在我的书*（Scala 编程）中*没有解释超出基础知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:34:03.720

您还应该知道 Scala 支持*多个参数列表*。所以你可以

```
def compare(a: Int, b: Int)(p: (Int,Int) => Boolean) = p(a,b) 
```

然后写

```
compare(5,2)(_ > _) 
```

这种类型的策略将简化您的逻辑。

此外，你有你的比较倒退。 `i`开始于`0`，你的循环条件是`i > 5`，它不是。

一些额外的注意事项：`=> X`表示“每次需要时计算一个 X”，因此`((=> Boolean) => Unit)`需要一些可以`Boolean`根据需要计算 a 的东西（并且`i > 5`可以这样做，如果每次都执行检查，它将是）。 `(=> Boolean) => Unit`表示一个函数，它将产生`Boolean`s 的东西作为输入并且不给出输出。（好吧，严格来说，`Unit`type 是一个输出，即`()`，它是为了一致性而完成的。但它的作用与 相同`void`。）

# sql - sql查找ID并在没有找到结果时插入

> ID：15475669
> 
> 赞同：0
> 
> 时间：2013-03-18T11:25:48.697
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2008-r2, user-defined-functions

`ID`我有一个 select 语句，需要从客户名称中查找客户。如果`ID`该名称不存在，则需要在客户表中创建一条新记录。这必须作为 select 语句的一部分来完成（与运行它的应用程序相关）。

在意识到您无法从函数修改表之前，我尝试查看返回现有`ID`或新的 UDF。`ID`

知道如何做到这一点吗？

编辑：

我想我需要进一步澄清一些事情。select 语句可以并且将在每个实现的基础上发生变化。我正在寻找的是一种通用的方式来查找或创建客户 ID（该表和进行查找的需要不会改变）作为更大的选择语句的一部分。

使用 sql 的应用程序从配置文件加载 select 语句，并且已`'SELECT'`硬编码，因此没有机会在 select 等之前添加 exec。

看起来我需要的是类似的东西`'select a.1 (exec dotheLookup(name)) as customerID, a.2 FROM table`，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:54:23.537

我建议您为此创建一个存储过程。就像是

```
Create procedure customer
--parameters
AS
Begin
IF exists(Select lookup(customerName) as customerID from table)
  BEGIN
    --Your select goes here
  END 
ELSE
  BEGIN
   --Insert into customer table and return scopeidentity
   --Select goes here
  END

END 
```

更新答案：

您不能使用 select 语句执行数据操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:50:17.023

您可以在执行 SELECT 语句之前执行存储过程，运行从名称返回 ID 的函数：

```
exec CheckForCustomerByNameAndAddIDIfItDoesntExist(customerName)
declare iCustomerID int
select iCustomerID = GetCustomerIDFromName(customerName)
select a.1, a.2, iCustomerID  as customerID from table 
```

类似的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:03:02.167

可以修改数据库服务器吗？如果是这样，请添加指向本地服务器的链接服务器。

```
EXEC master.dbo.sp_addlinkedserver @server = N'LinkedLocal', @srvproduct=N'', @provider=N'SQLNCLI', @datasrc=N'LocalServerName'
 EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'LinkedLocal',@useself=N'True',@locallogin=NULL,@rmtuser=NULL,@rmtpassword=NULL 
```

然后只需运行一个 OPENQUERY 来调用一个存储过程来完成您的工作：

```
select * from OPENQUERY("LinkedLocal", 'exec Database.Schema.StoredProcedure ''Param1'', ''Param2'') 
```

# excel - 如何将记录集中的特定字段加载到组合框中

> ID：15475671
> 
> 赞同：2
> 
> 时间：2013-03-18T11:25:53.543
> 
> 标签：excel, combobox, ado, transpose, vba

我有下面的代码，它基本上通过使用转置和 Recordset .GetRows将我的记录集的第一个字段加载到我的**Emp ID组合框中。**

```
 If m_adoStaffRS.RecordCount > 0 Then
    With m_adoStaffRS
        .MoveFirst
        cboEmpID.Clear
        cboEmpID.List = Application.WorksheetFunction.Transpose(.GetRows)
        '
        .MoveFirst
        '
        ' TROUBLE HERE >>>
        cboNameSelect.List = Application.WorksheetFunction.Transpose(.GetRows(Fields = .Fields("FirstName").Value & " " & .Fields("LastName").Value))
        '
    End With
    m_lnRecordID = 0
    cboEmpID.ListIndex = 0
End If 
```

现在我想添加另一个*搜索*组合框，以使不知道 EMp ID 的用户能够按名称搜索。

所以我想从记录集中添加 firlds **FirstName, LastName**但它不起作用。

这是我在上面的代码中尝试的内容：

```
cboNameSelect.List = Application.WorksheetFunction.Transpose(.GetRows(Fields = .Fields("FirstName").Value & " " & .Fields("LastName").Value)) 
```

请问我做错了什么？

菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:39:46.577

作为*Fields*参数传递给**GetRows()**的值是错误的。根据 MSDN 文档：

> 字段
> 
> 此可选参数是一个 Variant 并指定单个字段名称或序号位置或字段名称或序号位置编号的数组。ADO 仅返回这些字段中的数据。
> 
> [http://msdn.microsoft.com/en-us/library/ee266344.aspx](http://msdn.microsoft.com/en-us/library/ee266344.aspx)

因此，必须传递一个包含两个元素的数组才能仅获得两个字段。一个代码是：

```
With m_adoStaffRS
    .MoveFirst
    Dim FullNames As Variant
    Dim FieldsToSelect(0 To 1) As Variant
    Dim i As Long

    FieldsToSelect(0) = "FirstName"
    FieldsToSelect(1) = "LastName"

    FullNames = .GetRows(Fields := FieldsToSelect)

    ' Now fill combo-box using desired format
    cboNameSelect.Clear
    For i = LBound(FullNames) To UBound(FullNames)
        cboNameSelect.AddItem FullNames(0, i) & " " & FullNames(1, i)
    Next i
End With 
```

作为旁注。在查询数据源时，提前一点执行所需的连接（名字和姓氏）通常更直接。

# haskell - Haskell：在N变量上调用两个变量的函数

> ID：15475676
> 
> 赞同：3
> 
> 时间：2013-03-18T11:26:14.187
> 
> 标签：haskell

在两个以上的变量上调用两个变量的函数的最佳方法是什么？

例如给定函数`max`

```
Prelude> :t max
max :: Ord a => a -> a -> a 
```

如果我想要最大的变量，`x,y,z`我可以调用

```
max (max x y) z 
```

但它对于大量元素来说是冗长的。

一种方法是在列表上递归执行（使用“Learn You a Haskell for Great Good”中的示例

```
maximum :: Ord x => [x] -> x; 
maximum [] = error "maximum of empty list" 
maximum (x:[]) = x
maximum (x:xs) = max x (maximum(xs)) 
```

因此，使用它我必须创建一个数组，然后创建一个这样的函数来对数组进行操作。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:48:21.127

您正在谈论的模式不是“对数组进行操作的函数”，只是一种常见的递归模式。

当然还有处理递归模式的功能，例如折叠。
然后可以将您的最大功能重新定义为，

```
maximum xs = foldl' max 0 xs -- assuming all the value are upper than 0\. 
```

如果对列表值的限制打扰您可以使用 foldl', foldl1' 的变体，它将用列表的第一个元素替换种子（0 上）。

```
maximum xs = foldl1' max xs 
```

几乎每个递归结构都是可折叠的（列表、树、图形...）。
但它们是其他递归模式，可以使用 map 或 filter 加以利用。

无论如何，关于使用折叠的递归的一个很好的介绍，关于折叠
[的普遍性和表现力的教程](http://www.cs.nott.ac.uk/~gmh/fold.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:33:45.703

只是为了补充 zurgl 的答案，Haskell 有一个用于容器的类型类[Foldable 。](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Foldable.html)有一个实用方法

```
maximum :: (Foldable t, Ord a) => t a -> a 
```

简单地定义为

```
maximum = foldr1 max 
```

因此，对于任何实现的容器类型（`Foldable`用 换句话说，如果一个数据类型在它的元素上实现了折叠操作，那么在它上面的任何聚合函数都可以用类似的方式定义。`t``a`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:25:32.287

> 在两个以上的变量上调用两个变量的函数的最佳方法是什么？

好吧，让我们看看这里。在 Racket 中，我会说使用宏。

```
#lang racket

(define-syntax apply*
  (syntax-rules ()
    [(apply* f x y)
     (f x y)]
    [(apply* f x y rest ...)
     (apply* f (f x y) rest ...)]))

(define (plus a b) (+ a b))
(apply* plus 1 2 3 4 5) ;; => 15 
```

在这里，我们认为该`apply*`形式接受两个参数的函数，并在任意长的参数列表中调用它。这将从字面上扩展`(apply* max x y z)`为`(max (max x y) z)`，允许您编写漂亮的代码并让宏扩展器将其转换为详细代码。

* * *

然而，Haskell 宏处理起来很烦人，而且相当单一。所以让我们改用一个函数。这个功能会是什么样子？

```
applyStar :: (a -> a -> a) -> [a] -> a 
```

第一个参数是一个 2-arg 函数，它接受两个相同类型的东西，并吐出一个该类型的东西。从期望的结果中我们可以看出：`max (max x y) z`，输出必须与输入的类型相同。Haskell 不允许您定义变量 arity 的函数，因此为了模拟这一点，我们编写了一个接受参数*列表*的函数，`[a]`.

停止。胡歌时间！`(a -> a -> a) -> [a] -> a`如果您在[http://haskell.org/hoogle](http://haskell.org/hoogle)搜索类型签名，那么您会发现它被调用`foldl1`并且已经为您实现。

# r - 获取 ^RUT 的报价

> ID：15475681
> 
> 赞同：0
> 
> 时间：2013-03-18T11:26:35.733
> 
> 标签：r, quantmod

我正在尝试将索引的当前报价与历史价格序列合并，以创建一个完整的时间序列。我在使用 getQuotes 时遇到了 ^RUT 索引的问题：

```
> getQuote(c("^RUT", "^GSPC"))
               Trade Time     Last Change % Change    Open    High     Low     Volume
^RUT  2013-03-16 08:05:00  952.482 -0.585   -0.06%  953.50  954.00  949.48          0
^GSPC 2013-03-15 04:35:00 1560.700 -2.530   -0.16% 1563.21 1563.62 1555.74 1426617600 
```

我在美国市场开盘前的一个星期一早上这样做。^RUT 的 3 月 16 日时间戳会在每个周末尝试与历史时间序列合并时给我带来问题，因为它将在星期六创建一天没有发生交易。从上面可以看出，^GSPC 没有问题。有什么想法可以解决或解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:20:19.803

您显然知道日期应该是什么，因此只需手动设置即可。

或者，由于您是在市场开盘前的周一早上执行此操作，因此周五数据是历史数据，因此只需使用`getSymbols`.

```
> tail(getSymbols("^RUT", from=Sys.Date()-3, auto.assign=FALSE))
           RUT.Open RUT.High RUT.Low RUT.Close RUT.Volume RUT.Adjusted
2013-03-15    953.5      954  949.48    952.48          0       952.48
> tail(getSymbols("^GSPC", from=Sys.Date()-3, auto.assign=FALSE))
           GSPC.Open GSPC.High GSPC.Low GSPC.Close GSPC.Volume GSPC.Adjusted
2013-03-15   1563.21   1563.62  1555.74     1560.7  5175850000        1560.7 
```

# image - QML如何像MacOSX dock的背景架子图像一样旋转图像

> ID：15475687
> 
> 赞同：3
> 
> 时间：2013-03-18T11:26:56.527
> 
> 标签：image, qml

MacOS Dock（以及许多此类克隆）的背景图像是 3d 透视图中的“架子”。

也就是说，如果你取一个常规矩形并让它在 3d 空间中“倒退”。

例如：[http ://www.loneblacksheep.pro/image/Download/Dock.gif](http://www.loneblacksheep.pro/image/Download/Dock.gif)

是否可以通过 QML 图像旋转来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:41:16.943

看看 QML[`Rotation`](http://qt-project.org/doc/qt-4.8/qml-rotation.html)项目。

您可以将旋转原点设置为`Rectangle`下边框中心，然后在 x 轴上旋转。

* * *

*编辑：*

```
Rectangle {
  id: myDock
  width: 500
  height: 50
  color: "red"

  transform: Rotation {

    // Transform origin is the middle point of the lower border
    origin {
      x: myDock.width / 2
      y: myDock.height
    }

    axis {x: 1; y: 0; z: 0}
    angle: 45
  }

} 
```

# c# - 正则表达式数字和小数点

> ID：15475695
> 
> 赞同：1
> 
> 时间：2013-03-18T11:27:16.353
> 
> 标签：c#, regex

你们中的任何人都可以帮助我使用正则表达式来允许这样做：

```
123.123
123.
1323.2
1.2312
1,23
123123,32
123,
123412 
```

所以总结一下：只有一个小数点，它可以是最后一个..但大多数不是第一个。

但不是这个：

```
12.323.323
1213..
12331...3123
.12313
,123132 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T11:35:11.983

这应该工作

`^\d+[\.,]?\d*$`

`^`字符串开头
`\d+`1 位或多位数字
`[\.,]?`0 或 1 位十进制或逗号
`\d*`0 位或多位数字
`$`字符串结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:34:57.350

```
\b\d+(\.|,)\d*\b 
```

意思是：

```
a word boundary
a digit one or more times
a `.` or a `,`
a digit zero or more times
a word boundary 
```

单词边界是为了防止正则表达式从数字中间匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:43:45.673

试试这个，它适用于你提到的所有情况。

(\d+)(((\.|,)\d+)|,))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-18T22:16:27.187

我对您的正则表达式的修复： (\d+)(((.|,)\d+)|,)? 添加 '？' 最后，它将适用于零值

# r - R中混合类型之间的点/内积

> ID：15475696
> 
> 赞同：0
> 
> 时间：2013-03-18T11:27:16.900
> 
> 标签：r, linear-algebra

我正在尝试在 R 中实现我自己的逻辑回归算法，但我似乎无法使矩阵乘法/点积运算符`%*%`工作。我已经尝试了很多不同的东西。下面是可以在 R 环境中运行的代码：

```
weight_a <- c(rep(1,5))
random_sample <- sample(1:NROW(iris),50)
# Delta terms for each type (starts out nonzero)
del_a <- 1;

# Dataset for part a (first 50 vs. last 100)
iris_a <- iris
iris_a$Species <- as.integer(iris_a$Species)
# Convert list to binary class
for (i in 1:NROW(iris_a$Species)) {if (iris_a$Species[i] != "1") {iris_a$Species[i] <- -1}}

while(del_a > 0.01) {
# Compute gradient
  for (k in 1:NROW(random_sample)) {
    grade_a <- -1/NROW(random_sample) * sum(iris_a$Species[random_sample[k]]*iris_a[random_sample[k],1:4]
                                        /(1+exp(iris_a$Species[random_sample[k]]*weight_a%*%iris_a[random_sample[k],1:4])))
  }
} 
```

关键部分是`weight_a%*%iris_a[random_sample[k],1:4]`，它不起作用（翻译成英文，错误是“需要矩阵或向量”）。所以我尝试了其他一些事情：

```
# Trivial case works, gives 5
rep(1,5)%*%rep(1,5)

# Gives tensor product
rep(1,5)%*%as.matrix(iris_a[random_sample[k],1:4])

# Transpose doesn't work, gives row vector and result is an error ("Improper argument").
t(t(rep(1,5)))%*%as.matrix(iris_a[random_sample[k],1:4])
# Double transpose gives column vector, but result is tensor product again
t(t(rep(1,5)))%*%as.matrix(iris_a[random_sample[k],1:4])

# Matrix context gives tensor product again
as.matrix(rep(1,5))%*%as.matrix(iris_a[random_sample[k],1:4])
# Transposing the first argument to get a row vector gives an "Improper argument" error again
t(as.matrix(rep(1,5)))%*%as.matrix(iris_a[random_sample[k],1:4]) 
```

R 应该比这更聪明（并且比 MATLAB 更好）。假设我只是做错了，那么正确的方法是什么？（我推出了自己的循环函数，但是，呃......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:35:49.180

该命令`weight_a%*%iris_a[random_sample[k],1:4]`不起作用，原因有两个：

(1) 对象的长度不同，并且 (2)`iris_a[random_sample[k],1:4]`不是数字：

```
weight_a
[1] 1 1 1 1 1 #5 values
mode(weight_a)
[1] "numeric" #ok

iris_a[random_sample[k],1:4]
   Sepal.Length Sepal.Width Petal.Length Petal.Width
74          6.1         2.8          4.7         1.2 #four values

mode(iris_a[random_sample[k],1:4])
   [1] "list" #wrong type! 
```

所以你的向量的长度不同，第二个参数也不是数字。这应该有效：

```
weight_a[-5]%*%as.numeric(iris_a[random_sample[k],1:4]) 
     [,1]
[1,] 14.8
#or you could just make weight_a<-rep(1,4) 
```

编辑：有问题的原始代码来自`0:4`，将答案更改为对应的新代码。

# intellij-idea - 如何在 IntelliJ IDEA 中用花括号包围代码？

> ID：15475697
> 
> 赞同：64
> 
> 时间：2013-03-18T11:27:17.303
> 
> 标签：intellij-idea, keyboard-shortcuts, curly-braces

如何在 IntelliJ IDEA 中用花括号包围代码？这种操作是否有任何键盘快捷键？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2016-02-28T21:43:05.920

只需按如下方式配置智能钥匙：
`IDE Settings > Editor > General > Smart Keys > Surround selection on typing quote or brace`.

[![在此处输入图像描述](../Images/c38c0324c15bc15f6ec431c689b3c872.png)](https://i.stack.imgur.com/iWpBx.png)

从 IntelliJ 内置帮助：

> 如果选中此复选框，则在键入引号、双引号或大括号时选定的文本将被这些字符包围**。**
> 
> **如果未选中**此复选框，则键入的引号、双引号或大括号将替换选择。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-03-18T11:49:58.160

是的，尝试`Ctrl`++ （环绕），然后`Alt`（大括号）。`T``A`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T10:55:17.997

只需点击以下2个步骤

1、`CTRL`++ 2 ，然后同时按`ALT`+ 。`T`
`ALT``A`

希望能帮到你。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-12T09:10:38.100

将“不带大括号的控制流语句”添加到检查设置。然后运行检查，在列表中选择它们，然后选择“应用修复'添加大括号'”。

它只是为我节省了一整天繁琐的工作！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-09T08:48:00.037

我有一个没有大括号的 if 语句，我不得不在整个文件中用大括号更新它。所以我更新了代码样式以始终为 if/else 语句添加大括号。在想法中转到：

> 设置 -> 编辑器 -> 代码样式 -> Java -> 换行和大括号（选项卡）

找到*"'If()' 语句"/"强制大括号"*并将值从**"Do not force"** (默认) 更改为**"Always"**。按下`ctrl + alt + L`以重新格式化您的文件并添加花括号。 [设置](https://i.stack.imgur.com/Pc9iC.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-11-07T00:58:18.880

您需要先创建一个实时模板。只需转到首选项并将模板添加到 html/xml![](../Images/c226bd70778fe1237149ba68b9a3a496.png)

![在此处输入图像描述](../Images/2a774c0456ef5aed0b8f225dd4dcc45d.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-02T08:05:04.913

最简单的方法是，选择您想要***的代码部分*****并按** **`Shift + [`**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-17T11:58:09.087

很简单，只要按照这张图片中的箭头，从左到右： ![带箭头的屏幕截图](../Images/0e92c58e69de0bed3e2981f99d5e84aa.png)

# c# - MVC 3图像未加载

> ID：15475703
> 
> 赞同：3
> 
> 时间：2013-03-18T11:27:36.130
> 
> 标签：c#, asp.net-mvc-3, html, razor

我的表格中有一张图片上传：

```
 @using (Html.BeginForm("Create", "Application", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Application Under Testing</legend>

        <div class="editor-label">
            Image
        </div>
        <div class="editor-field">
            @if (Model.AppDetails.Image == null)
            {
                @:None
            } else {
                <img width="400" src="@Url.Action("GetImage", "Application", new { Model.AppDetails.ID })" />   
            }
            <div>Upload new image: <input type="file" name="Image" /></div>
        </div>
     </fieldset>
     } 
```

这将提交它，并使用以下方法将其保存到数据库中：

```
 [HttpPost]
    public ActionResult Create(ApplicationViewModel vm, HttpPostedFileBase image)
    {
        if (ModelState.IsValid)
        {
            if (image != null)
            {
                vm.AppDetails.ImageMimeType = image.ContentType;
                vm.AppDetails.Image = new byte[image.ContentLength];
                image.InputStream.Read(vm.AppDetails.Image, 0, image.ContentLength);
            }

            _repository.SaveEntity<AUT>(vm.AppDetails);

            return RedirectToAction("Index");
        }

        return View(vm);
    } 
```

所以，现在我有一个操作可以从数据库中获取图像以进行显示：

```
 public FileContentResult GetImage(Guid appID)
    {
        var app = _repository.AUTs.FirstOrDefault(x => x.ID.Equals(appID));
        if (app == null)
        {
            return null;
        }

        return File(app.Image, app.ImageMimeType);
    } 
```

在我看来，我有这段代码来显示图像：

```
 <td>
        @if (item.Image == null)
        {
            @:None
        } else {
            <img width="100" src="@Url.Action("GetImage", "Application", new { item.ID })" />   
        }
    </td> 
```

网页上的输出是这样的：

```
<img width="100" src="/Validation/Application/GetImage/bd3fdb5b-8d73-48e2-a04e-1a49a73729be"> 
```

这不显示图像。编辑：我实际上检查了 Chrome 上的元素，它有 2 个错误（每个图像 1 个）说明：错误 500 内部服务器错误。它显示了getimage的url，是否值得使用完全限定的url？或者其他的东西？

所以我的猜测是，它要么没有在数据库中保存正确的数据，要么没有将数据正确读取为图像格式。或者我的代码在某个地方是错误的。

有什么想法吗？

- - 编辑 - -

我已经对此进行了单元测试，以查看是否可以检索图像。测试回来通过了。

因此，它必须与在客户端渲染它有关，因为服务器端似乎运行良好。Chrome 显示错误为：500 Internal Server Error。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:47:32.953

您是否验证过该文件实际上正在出现？我最近遇到了类似的情况，最终使用`Request.Files`它来访问发布的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:32:31.567

所以，我找到了这个问题的答案，并停止了对服务器的回调：

```
<img width="100" src="data:@item.ImageMimeType;base64,@(Convert.ToBase64String(item.Image))" /> 
```

使用它是否有任何问题，例如与旧浏览器的向后兼容性？还是有任何其他原因我不应该使用它？

这种方式意味着我不必再次查询数据库以获取图像。

# mercurial - 如何在远程存储库上运行 hg recover 命令

> ID：15475704
> 
> 赞同：5
> 
> 时间：2013-03-18T11:27:37.547
> 
> 标签：mercurial, teamcity, tortoisehg, recover

在 teamcity 中运行构建时出现以下错误。

```
Failed to collect changes, error: '"C:\Program Files\TortoiseHg\hg.exe" --config ui.interactive=False pull https://test:******@hg.myrepo.co.uk/terriff' command failed.
stdout: pulling from https://test:***@hg.myrepo.co.uk/terriff
searching for changes

stderr: abort: abandoned transaction found - run hg recover! 
```

我已经尝试删除代理机器上的构建目录，但仍然遇到同样的错误。还尝试运行 hg recover 命令，但它说存储库不是本地的。请指导如何修复此错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-02T10:33:19.647

我有同样的问题，因为`hg`存储库文件夹中缺少我的文件夹。我设法修复它在存储库`hg recover`的**缓存**版本上运行。您可以在以下目录中找到缓存的存储库：

```
..\ProgramData\JetBrains\TeamCity\system\caches\mercurial 
```

您应该会在该文件夹中看到一些名称为 like的文件夹`hg_7282240431393414416`和一个文件`map`（没有扩展名）。存在从存储库到存储在此文件中的文件夹的映射。该文件包含几行，例如：

```
https://bitbucket.org/{teamname1}/{repo1}/ = hg_7282240431393414416
https://bitbucket.org/{teamname1}/{repo2}/ = hg_7282240431393414417
https://bitbucket.org/{teamname2}/{repo3}/ = hg_7282240431393414418 
```

您必须在此文件中找到与您的存储库相对应的文件夹（*在等式符号之后*）并在相应的文件夹中`map`运行`hg recover`。运行此命令可能需要一些时间。

***请注意：****团队名称、存储库和文件夹名称仅用于演示。*

我希望它会有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-29T06:58:26.680

好的，我今天遇到了同样的问题，这就是我解决它的方法！

1.  如果您在 Windows 中运行它，请打开命令提示符。
2.  类型，

    hg recover -R "remote-path-of-your-repository"

3.  命令完成可能需要一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T22:15:25.550

我遇到了同样的问题，我通过删除 TEAMCITY 的缓存/mercurial 目录解决了这个问题。这可能不是最好的做法，但它现在正在发挥作用。HG的问题来自团队citycache的子文件夹之一......

我花了大约5个小时才理解它！该死！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T13:25:06.700

是的，该命令必须在远程主机上运行（例如，通过 shell）。

# mysql - phpmyadmin 在初始安装时无法登录（mac osx）

> ID：15475705
> 
> 赞同：1
> 
> 时间：2013-03-18T11:27:44.810
> 
> 标签：mysql, macos, phpmyadmin

我正在尝试在 MySQL 和 phpMyAdmin 上启动并运行，但在登录 phpMyAdmin 时一直遇到问题。当使用没有密码的默认用户名“root”和我通过终端设置的密码时，我得到“#2002 无法登录到 MySQL 服务器”。

这是我的 config.inc.php 文件的相关部分：

```
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = '';
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['user'] = 'admin'; //I have also tried 'root' here with no password
$cfg['Servers'][$i]['password'] = 'PASSWORD';
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

我试过的：

*   重新启动 Apache 和 MySQL*   重新安装两者*   在 /config 文件夹中创建 config.inc.php 后，在根 phpMyAdmin 文件夹中编辑 config.inc.php 。

我完全被困住了。

系统/版本详细信息：Mac OSX 10.7.5 phpMyAdmin 3.5.7 MySQL 5.5.28

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:04:00.707

如果你使用`localhost`，它将尝试通过套接字访问 mysql 。您可以尝试以下两种方法之一：

1.  更改`localhost`为`127.0.0.1`
2.  在你的 php.ini 中设置套接字 from`/var/mysql/mysql.sock`到`/tmp/mysql.sock`

您还应该进行一些完整性检查，例如通过使用您用于 phpMyAdmin 的用户名/密码连接到数据库来确保数据库已启动并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:51:51.453

尝试安装mampp或xampp ..一切都应该开箱即用..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-23T07:15:14.817

对我来说，我只是**重新启动**并按照以下步骤操作

1.  在常规选项卡中单击开始
2.  在服务选项卡中单击全部开始
3.  在网络选项卡中启用所有端口
    并在浏览器上重试

# c# - 如何使用 LINQ 返回类中集合的内容？

> ID：15475706
> 
> 赞同：0
> 
> 时间：2013-03-18T11:27:45.243
> 
> 标签：c#, linq

我有以下课程：

```
public partial class Application
{
    public Application()
    {
        this.TestAccounts = new List<TestAccount>();
    }
    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
}
public partial class TestAccount
{
    public TestAccount()
    {
        this.Subjects = new List<Subject>();
    }
    public int TestAccountId { get; set; }
    public string Name { get; set; }
    public int ApplicationId { get; set; }
} 
```

在我的代码中，我有以下返回`IQueryable<Application>`一条记录。

```
var applications = DbSet.Where(a => a.ApplicationId == applicationId) 
```

如何更改它以使其返回：`ICollection<TestAccount>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:29:04.890

当您收到一个序列`Application`并且您想要接收一个序列时`TestAccount`，可以在`TestAccounts`属性中 找到它`Application`，您应该使用`SelectMany`LINQ 方法展平您的序列。尝试使用下一个代码片段：

```
DbSet.Where(a => a.ApplicationId == applicationId)
     .SelectMany(app => app.TestAccounts)
     .ToList(); 
```

它将返回一个包含所有内容的列表，`TestAccounts`这些内容收集在您的
`IQueryable<Application>`.

`ToList`将数据带入内存并使其可分配给`ICollection<T>`接口（`List<T>`实现`ICollection<T>`）

# javascript - 如何获取点击行的id值？

> ID：15475709
> 
> 赞同：0
> 
> 时间：2013-03-18T11:27:53.527
> 
> 标签：javascript, php, html-table, onclick, row

我通过从数据库中获取值来生成一个表。我将主键值设置为行的 id 值，该行中也有按钮。单击按钮时如何获取相应的 id 值。

```
 while($pack = mysql_fetch_array($get_pack))
    {
       echo"<tr id='<php echo $pack[id];?>'>";
       echo'<td> <input name="edit_pack" type="button" value="Edit" onclick="javascript:edit_pack()"/></td>';
     }

function edit_pack()
   {
   alert("package editing")
   alert(this.id)
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:29:59.787

试试这个纯 JavaScript 解决方案：

```
function edit_pack() {
    alert(this.parentNode.parentNode.id);
} 
```

第一个`parentNode`会得到`<td>`，第二个会得到`<tr>`。然后我们得到`id`属性。

或者，如果您使用 jQuery，语法会更好一些：

```
function edit_pack() {
    alert($(this).closest('tr')[0].id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:38:09.693

尝试这个 ：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 <script>
    $(document).ready(function(){
       $("[name=edit_pack]").click(function(){
           alert($(this).parents("tr").attr('id'));
       });
    });
 </script>
<?php
       echo"<table name='test'>";
       echo"<tr id='20'>";
       echo'<td> <input name="edit_pack" type="button" value="Edit" onclick="javascript:edit_pack()"/></td>';
       echo"</tr>";
       echo"</table>";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:37:24.933

如果您不想使用 jquery，请执行以下操作：

```
 while($pack = mysql_fetch_array($get_pack))
 {
    echo"<tr id='<php echo $pack[id];?>'>";
    echo'<td> <input name="edit_pack" type="button" value="Edit" onclick="javascript:edit_pack('<?php echo $pack[id];?>')"/></td>';
 }

function edit_pack(pack_id)
{
   alert("package editing");
   alert(pack_id);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:30:19.690

尝试这个：

```
 var trid = $(this).closest('tr').attr('id'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:31:18.037

您可以将其设置为js函数的参数。

```
echo'<td> <input name="edit_pack" type="button" value="Edit" onclick="javascript:edit_pack( ' .$pack['id']. ' )"/></td>'; 
```

然后在js中

```
function edit_pack(id){ 
  alert(id);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T11:32:38.697

只需将值放在 JS 调用中

PHP

```
while($pack = mysql_fetch_array($get_pack))
{
   echo '<tr id="'.$pack[id].'">';
   echo '<td> <input name="edit_pack" type="button" value="Edit" onclick="javascript:edit_pack('.$pack[id].')"/></td>';
 } 
```

Javascript

```
function edit_pack(id) {
   alert(id);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T11:33:13.697

可能这就是你需要的

```
while($pack = mysql_fetch_array($get_pack))
{
   echo"<tr id='<php echo $pack[id];?>'>";
   echo'<td> <input parentrow_id='<php echo $pack[id];?>' name="edit_pack" type="button" value="Edit" onclick="javascript:edit_pack(this.parentrow_id)"/></td>';
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T11:46:58.490

```
 while($pack = mysql_fetch_array($get_pack)){
       echo"<tr id='$pack[id]'>";
       echo " <td> <input name='edit_pack' type='button' value='Edit' onclick='edit_pick($pack[id]);'/></td>";
        echo "</tr>";
   } 
```

您可以传递参数 JavaScript 函数

# javascript - XMLHttpRequest 无法加载 http://localhost:8081/blabla/bla/config 来源 http://localhost 不允许 Access-Control-Allow-Origin

> ID：15475718
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:28:20.063
> 
> 标签：javascript, json, google-chrome, tomcat, wamp

我在本地主机的端口 8081 上的 Tomcat 7 中运行服务器应用程序，并在 wamp 中运行客户端 js 应用程序（认为那是端口 80）。当我尝试运行它（在 chrome 中）时，我在控制台中收到此错误：

```
XMLHttpRequest cannot load http://localhost:8081/blabla/bla/config Origin http://localhost is not allowed by Access-Control-Allow-Origin 
```

有谁知道如何解决它？如果我检查单元测试和调试，代码运行良好。响应到达客户端时抛出错误

如果我只是`http://localhost:8081/blabla/bla/config`在浏览器中访问，我会在 JSON 中得到正确的响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:18:01.963

我认为你需要看看 W3C 的 CORS：http: [//www.w3.org/TR/access-control/](http://www.w3.org/TR/access-control/)

您的网站（来源）需要使用 access-control-allow-origin 响应标头来允许。您需要添加到您的服务器。

[http://www.w3.org/TR/access-control/#access-control-allow-origin-response-header](http://www.w3.org/TR/access-control/#access-control-allow-origin-response-header)

这个问题也有帮助：[Access-Control-Allow-Origin in tomcat](https://stackoverflow.com/questions/12383109/access-control-allow-origin-in-tomcat)

# c - 递归/链表

> ID：15475724
> 
> 赞同：0
> 
> 时间：2013-03-18T11:28:44.343
> 
> 标签：c, recursion, linked-list

我无法弄清楚我的插入功能有什么问题。

基本上在主函数中我要求用户输入一个整数，它应该遍历列表 RECURSIVELY 并按顺序插入数字。如果您需要其他任何东西，请告诉我。

当我打印出列表时，它只打印出 0 两次

```
In the main:
            **This is looped**
    printf("Enter the value you want to insert: ");
    scanf(" %d", &integer);
    current = insert(&head, integer);
    temp = current;

    while(temp)
    {
        printf("%d\n", temp->num);
        temp = temp->next;
    }

node* insert(node** head, int integer)
{
    node* temp = malloc(sizeof(node));
    node* temp1;
    node* new;

    if(*head == NULL)
    {
        temp->num = integer;
        temp->next = *head;
        *head = temp;
    }
    else if((*head)->num > integer)
    {
        temp = *head;
        temp1 = temp->next; //breaks the link
        temp->next = new;   //creates a new node
        new->num = integer;  //adds int
        new->next = temp1;   //links new node to previously broken node
        *head = temp;
    }

    else
        insert(&((*head)->next), integer);

    return(temp);
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:31:52.997

```
if(*head == NULL)
{
    (*head)->next == temp;
    temp->num = integer;
    temp->next = *head;
    *head = temp;
} 
```

这是错误的，将导致无效读取，因为 *head 为 NULL，因此`(*head)->next`无效。它将从 读取`NULL + offset`。哪里`offset`取决于您的`node`数据类型的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:36:13.633

```
while(temp)
{
    printf("%d\n", current->num);
    temp = temp->next;
} 
```

我想你想打印出来`temp->num`而不是`current->num`.

# macos - MacOS Slave 上 Jenkins 的 Git 插件未按预期结帐

> ID：15475725
> 
> 赞同：0
> 
> 时间：2013-03-18T11:28:46.477
> 
> 标签：macos, jenkins

我对 Jenkins 有一个小而重要的问题。我已经在 Windows 7 机器上设置了 Jenkins CI，并且还在 Mac Mini 上通过 Java WebStart 设置了从机。我在设置与 git repo 的 ssh 连接时遇到了一些问题，但我已经弄清楚了。现在我在我的 Mac Mini 上运行构建时遇到了麻烦。基本上，该作业似乎可以克隆 repo，但是当构建脚本运行时，它会找到一些文件夹作为文件：

```
cc1objplus: error: 3rdParty/sparkle/Sparkle.framework/Headers: not a directory 
```

我用 git 命令检查过，确实如此。

编辑：我已经检查了 repo 中的文件，它们是文件而不是目录。似乎 Git 插件以某种方式输出文件而不是目录。

我已经使用 git 命令进行了克隆、签出、提取、提取等操作，一切正常。我已经运行 bash 命令而不是使用 Git 插件（例如“git clone”、“git checkout”等），并且当我这样做时工作运行良好。使用 Git 插件签出 repo 时失败。

该项目在 Windows 7 上构建良好。如果我从 bash 进行，它也可以在 Mac 上构建。

更新：`git status`显示：

```
#    typechange: 3rdParty/sparkle/Sparkle.framework/Headers 
```

对于每个应该是文件夹的文件。

# c# - 如何在表单身份验证模式下在 c# Web 应用程序中使用 Windows 凭据进行身份验证

> ID：15475729
> 
> 赞同：0
> 
> 时间：2013-03-18T11:28:55.290
> 
> 标签：c#, authentication, active-directory, ldap

我正在开发一个 Web 应用程序，该应用程序必须满足以下要求：

该应用程序将需要支持对 Active Directory 和 SQL 成员资格提供程序的身份验证。如果 Actor Window Account 的当前登录的 Window Account 已经存在于数据库中，则系统显示主页并且不显示登录表单。否则，系统会显示登录表单，供用户输入用户名和密码登录。

这里的问题是：我无法获取 Windows 帐户（用户名/密码），然后基于该用户名，我将检查数据库以通过显示主页或显示登录页面继续。它如何获得用户名和密码？

请注意，在 IIS 中，系统是在**表单**身份验证下配置的，而**不是**Windows 身份验证。

网络配置：

```
<authentication mode="Forms"> 
```

我尝试了一些，例如：`WindowsIdentity.GetCurrent()`。`Environment.Name`, ...但它不起作用。

能否请你帮忙？

太谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:32:19.413

为您提供链接..希望对您有所帮助 [http://www.codeproject.com/Articles/94612/Windows-Authentication](http://www.codeproject.com/Articles/94612/Windows-Authentication)

# c++ - 强大的相机校准

> ID：15475733
> 
> 赞同：2
> 
> 时间：2013-03-18T11:29:18.297
> 
> 标签：c++, opencv, camera-calibration

我将尝试具体说明我的问题，首先我正在做一个使用相机重建 3d 图像的项目。我已经完成了相机校准，但它不是强大的遮挡，例如将物体放在棋盘上它不会检测到角落。有没有办法修改程序，或者我可以在放置物体之前使用检测到的角落，我如何使用这些角落来检测没有遮挡的角落。

我正在考虑使用代表棋盘四个角的角，显示它，然后我可以将对象放在棋盘上。

我将不胜感激如何修改或使用当前的相机校准程序来处理遮挡，即将对象放在棋盘上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:51:48.160

对于鲁棒的目标检测，编写一个可以检测更多特征的程序，然后测试是否存在足够高百分比的特征。

对于棋盘，您可以尝试找到方格之间的 112 条边，并查看它们是否对齐。如果你错过了这 112 个中的一些，也没关系。

# javascript - 在 JavaScript 中构建由“createElement”创建的 div

> ID：15475734
> 
> 赞同：0
> 
> 时间：2013-03-18T11:29:31.590
> 
> 标签：javascript, html, structure

HTML 中的 div 结构如下所示：

```
<div id="parentdiv">
     <div id="childdiv"></div>
</div> 
```

下面的代码创建了 2 个 div，但将子 div 放在父 div 旁边，而不是在其中：

```
var pardiv = document.createElement('pardiv');
pardiv.setAttribute('id', "workspace");
pardiv.innerHTML = "Hello World";
pardiv.style.background = "red";
pardiv.width = 300;
pardiv.height = 300;
document.body.appendChild(pardiv);

var childdiv = document.createElement('childdiv');
    childdiv.setAttribute('id', "childdiv");
    childdiv.innerHTML = "Hello World";
    childdiv.style.background = "yellow";
    childdiv.width = 100;
    childdiv.height = 100;
    document.body.appendChild(childdiv); 
```

如果它们是通过 JavaScript 创建的，程序员如何在 HTML 中构造 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:30:57.667

不要将 childDiv 附加到正文，而是将其附加到父元素，如下所示：

```
pardiv.appendChild(childdiv); 
```

使用它，您应该能够设置与在 HTML 中相同的结构。

# c# - IIS结合WatiN system.nullreferenceexception

> ID：15475735
> 
> 赞同：1
> 
> 时间：2013-03-18T11:29:38.967
> 
> 标签：c#, iis, watin

因此，在使用 WatiN 在 FireFox 上创建新实例时，我遇到了一些问题。

一些您可能认为重要的信息！

1.  我能够在 IIS Express 和 winform 中运行此代码。

2.  .Net 信任级别为具有管理员凭据的完整（内部）。

3.  我还将所有引用设置为 Copy Local = true （我在例外开始发生后这样做了）

错误发生在这里：

```
 public string msg(string username, string password, string msg, string group, List<string> id, bool test)
    {
        using (FireFox _FF = new FireFox())//nullreferenceexception
        {
           a lot of code
        }
    } 
```

这就是所谓的味精：

```
 else if (RadioButton1.Checked)
           {
               msgbot.SetApartmentState(ApartmentState.STA);
               msgbot.Start();
               msgbot.Join();
           }
           blocker = true;
           }
           Server.Transfer("Done.aspx", true);
       }
       protected void sendmsgtobot()
       { 
       msger.msg("username", "password", TextBox1.Text , "159347", ids , false);
    } 
```

# jenkins - 詹金斯部分“人”是空的

> ID：15475738
> 
> 赞同：1
> 
> 时间：2013-03-18T11:29:50.767
> 
> 标签：jenkins

我对詹金斯“人”部分为空有疑问。当我的项目构建时，我可以看到谁做了最新的提交等。我什至可以单击用户并更改他的设置，如电子邮件等。当我转到“人员”选项卡时，我看不到那里的任何人。

我尝试更新我的 Subversion 插件，但没有生效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:57:09.990

你误解了人的部分。您看到的是提交者列表。将在人员部分列出的人员是 Jenkins 用户，即注册到 jenkins 的人员。不是那些致力于某个项目的人。

要列出人员，请执行以下操作：

`Manage Jenkins>Configure System`

在访问控制中：安全 Relam。选择`Jenkins's own user database`

并检查`Allow users to sign up`

`Save`变化。

现在，`Manage Jenkins`您将有`Manage Users`选择权。您可以在此处创建用户。它们将在`People`页面中列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:48:02.477

看起来最新的 Jenkins 版本可能已经改变了第一个回复中显示的一些位置。尝试使用：

1.  管理 Jenkins，配置全局安全
2.  在访问控制：安全领域部分，选择“Jenkins 自己的用户数据库”的单选按钮
3.  选中“允许用户注册”复选框

然而，我们的“人物”页面仍然是空白的。我不确定为什么。

# php - 检测 XML 中的值是否存在

> ID：15475741
> 
> 赞同：0
> 
> 时间：2013-03-18T11:30:10.047
> 
> 标签：php, xml

尝试计算 XML 文件中是否存在名称以及出现多少次，有人可以帮忙吗？我已经使用了我尝试过的互联网代码的 35 版，但大多数情况下它只计算标签而不是标签之间的内容。

```
<?php

$xml = <<< XML
<Book>
<Contact>
        <Name>An Smith</Name>
</Contact>
    <Contact>
        <Name>Alex Pepper</Name>
</Contact>
    <Contact>
        <Name>Tom James</Name>
</Contact>
;
</Book>
XML;

$dom = new DOMDocument;
$dom->loadXml($xml);

// to detect, count if variable NameToFind is present
$NameToFind="Alex Pepper";

// Missing code 

echo "$NameToFind is x times present in the XML "; 
```

对您的所有评论进行了一些尝试，最后这是我需要的工作代码：

```
$xml=simplexml_load_file('book.xml'); 
$nodes= $xml->xpath("//Book/Contact[contains(.,'$NameToFind')]");
$count = count($nodes); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:38:48.970

大概是这样的：

```
$xpath = new DOMXPath($dom);
$query = '//Book/Contact/Name[. = "' . $NameToFind . '"]';
$entries = $xpath->query($query);
$count = count($entries); 
```

虽然我的 xpath 查询可能有点偏离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:48:14.453

我想这就是你所追求的。

[https://stackoverflow.com/a/10162624/736639](https://stackoverflow.com/a/10162624/736639)

另一种选择是使用 xml2array 库将 XML 转换为数组：http: [//www.bin-co.com/php/scripts/xml2array/](http://www.bin-co.com/php/scripts/xml2array/)。

```
$array = xml2array($xmlstring); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:59:43.570

```
$xml=simplexml_load_file('book.xml'); 
$nodes= $xml->xpath("//Book/Contact[contains(.,'$NameToFind')]");
$count = count($nodes); 
```

# c++ - string.find(" ") 没有找到空格

> ID：15475744
> 
> 赞同：5
> 
> 时间：2013-03-18T11:30:20.513
> 
> 标签：c++, string

我正在尝试在用户输入的字符串中查找空间。我想使用`find()`from`std::string`返回空间的位置。

如果输入是“Seattle, WA USA”，我想`find(" ", 0)`返回`8`，我该怎么做？第 8 位是 "," 后面的空格

```
string inputString = " ";
cout << "Enter String to modify" << endl;
cin >> inputString;
int spac = inputString.find(" " , 0); 
```

而是`find()`不断回归`0`。我不确定为什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:31:29.833

您没有阅读空间（`cin >> inputString`停在空白处......）。

改为使用`std::getline(std::cin, inputString)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:35:43.353

这是因为`cin`which 在第一个空格之后截断单词并​​将其存储到`inputString`：

```
string inputString;

getline(cin, inputString);

int spac = inputString.find(" " , 0);

cout << spac << endl; 
```

# javascript - 使用 indesign 中的脚本获取和设置表格中的文本元素

> ID：15475745
> 
> 赞同：1
> 
> 时间：2013-03-18T11:30:20.507
> 
> 标签：javascript, adobe-indesign

我正在寻找 indesign 脚本，但我没有找到任何关于这个主题的信息，我认为这很重要。所以这是我的问题： - 如何使用 JavaScript 修改 Indesign CS6 表格中的文本框架？

我尝试过类似这样的指令：

```
app.activeWindow.activePage.textFrames[0]; 
```

但这不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:14:36.343

页面通常有一个文本框架，其中包含一个表格。据我所知，表格必须锚定在文本框架内。如果该表中也有一个文本框，那么您将需要这样的东西来访问它：

```
var doc = app.activeDocument;

doc.pages[0].textFrames[0].tables[0].textFrames[0]; 
```

换句话说，您需要引用文本框两次。一个用于包含表格的文本框架，另一个用于表格*内*的文本框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-16T09:59:01.133

InDesign 中的表格对象不能包含 TextFrame 对象。表格确实包含单元格。单元格包含文本。Text 对象可以包含一个 TextFrame。在这种情况下，它将是锚定或内联文本框架。
因此，如果确实碰巧有一个文本框架锚定到表格内的某些文本，您可以按如下方式访问它（假设在这种情况下，用户在运行脚本之前在 UI 中选择了一个表格，并且表中的第 7 个单元格包含一个锚定文本框）：

```
app.selection[0].cells[6].texts[0].textFrames[0]; 
```

这将返回该单元格中的第一个 TextFrame。

然而，这是一个相当不寻常的情况。
将文本框架锚定到单元格通常没有什么意义，因为单元格本身可以包含所需的任何文本。

# installation - 为什么 mysetup.exe 的打开文件安全警告如此缓慢？

> ID：15475751
> 
> 赞同：1
> 
> 时间：2013-03-18T11:30:52.070
> 
> 标签：installation, inno-setup

为什么打开 mysetup.exe 需要 30 秒才能打开？
当我从资源管理器中单击 exe 并且它位于下载文件夹中时，也会发生延迟。其他文件夹没有延迟。

在 Windows 显示安全警告对话框“您要运行此文件吗？”之前会出现 30 秒延迟。- 我认为延迟与打开文件安全警告/AES 有关？

其他文件（相同大小的安装程序）会在下载后 1-2 秒内立即打开，只是这个新的 inno 打包软件（5 MB 文件大小）需要 30 秒才能打开。

mysetup.exe 文件经过数字签名 (comodo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:01:13.577

此外，30 秒是相当常见的 Internet 连接超时。因此，如果 Windows 有网络连接但没有 Internet 连接（例如，外部路由器关闭或阻止 Internet 访问），那么它可能会尝试联系 Comodo 服务器，但最终会超时。（超时的默认行为是将证书视为有效，因为假定大多数证书都是有效的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:19:23.780

这种延迟归因于 Explorer 试图验证整个可执行文件的签名。它发生在所有可执行文件上，但当大小超过几百 MB 时更为明显。出于同样的原因，它也会在某个时候停止显示图标。

由于这完全是一个资源管理器错误，因此您在 Inno Setup 中唯一可以做的就是使用该`DiskSpanning`指令将设置拆分为较小的文件。

# wpf - 应用程序要求首先在全局程序集缓存中安装程序集 Microsoft.HTMLTrans.Interface 版本

> ID：15475755
> 
> 赞同：0
> 
> 时间：2013-03-18T11:30:53.543
> 
> 标签：wpf, sharepoint, sharepoint-2007, wpf-controls, wpf-4.0

我创建了一个 WPF 应用程序。我使用 microsoft.sharepoint dll 从列表中获取一些数据。我创建了一个部署包。当我运行设置时，我收到以下错误

> 无法安装或运行应用程序。该应用程序要求首先在全局程序集缓存中安装 Microsoft.HTMLTrans.Interface 版本 12.0.0.0 的程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:56:21.580

我评论了 SharePoint 方法调用，而是使用 Sharepoint Web 服务方法访问了共享点列表。它解决了这个问题。

# lambda - lisp 中的布尔函子

> ID：15475769
> 
> 赞同：5
> 
> 时间：2013-03-18T11:31:32.067
> 
> 标签：lambda, lisp, common-lisp, functor, higher-order-functions

我发现自己处于需要将多个谓词合并为一个的情况。是否有这样做的标准方法，类似于`compliment`？

假设有几个简单的谓词（例如`is-fruit-p`,`is-red-p`等`grows-on-trees-p`）和一个对象列表，必须使用多个谓词从中过滤掉一个子集。有什么比以下更好的方法来实现这一点：

```
(remove-if #'is-fruit-p 
           (remove-if #'is-red-p 
                      (remove-if #'grows-on-trees-p list-of-objects))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:40:31.257

您确定特殊语法真的有帮助吗？考虑以下

```
(lambda (x)
  (and (is-fruit-p x)
       (or (grows-on-tree-p x)
           (is-red-p x)))) 
```

现在稍微更一般

```
(lambda (x)
  (and (is-fruit-p x)
       (or (grows-on-tree-p x)
           (eq (color x) 'red)))) 
```

或者

```
(lambda (x)
  (and (is-fruit-p x)
       (or (grows-on-tree-p x)
           (eq (color x) desired-color)))) ; desired-color captured lexical 
```

即使你为谓词建立了一个特殊的语法，你认为增加的语言复杂性值得你得到的刚性吗？例如，您要定义谓词`#'weights-exactly-five-ounces-p`吗？怎么样`#'weights-up-to-and-including-six-and-half-ounces-p`？

如果您开始需要参数谓词并为此使用 lambda 形式，那么使用组合器您将编写比不使用它更多的代码，因为`(lambda (x) ...)`每个参数项都需要包装器。更重要的是，代码也将更难**阅读**（除了必须学习一个特殊的新宏来进行谓词组合）。

IMO 如果您传入谓词并且需要将谓词传递给其他人，那么编写和/或组合器可能是有意义的......但不适用于编写您在示例中使用的代码；为此我会写

```
(remove-if (lambda (x) (or (is-fruit-p x)
                           (is-red-p x)
                           (grows-on-trees-p x)))
           list-of-objects) 
```

少写，少读，无需额外学习，参数化微不足道。

例如，假设您想要一份与您拥有的 (in `mine`) 颜色相同且重量相同或可能更重的水果列表...

```
(remove-if-not (lambda (x) (and (is-fruit-p x)
                                (eq (color x) (color mine))
                                (>= (weight x) (weight mine))))
               objects) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T21:39:51.673

[quicklisp](http://www.quicklisp.org)可安装的[alexandria](http://common-lisp.net/project/alexandria/draft/alexandria.html)库中提供了高阶函数，如`disjoin`和。`conjoin`

```
CL-USER> (ql:quickload "alexandria")
...
CL-USER> (remove-if (alexandria:disjoin #'zerop #'oddp #'minusp)
                    '(0 -1 1 -2 2))
=> (2) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T12:06:22.143

我不确定盒子里是否有这样的功能。如果您需要组合可以在编译时确定的函数，您可以编写一个宏来执行此操作。如果您必须动态检测谓词函数，您可以编写函数来执行此操作，该函数将循环抛出函数列表并累积结果直到出现错误条件。

宏可以如下所示：

```
(defmacro combine-predicates (combine-func &rest preds)
  (let ((x (gensym)))
    `(lambda (,x) (,combine-func ,@(loop for p in preds 
                      collecting `(funcall ,p ,x)))))) 
```

你可以像这样使用它

```
(remove-if (combine-predicates and 
                               #'is-fruit-p 
                               #'is-red-p 
                               #'grows-on-trees-p) obj-list) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T14:13:37.610

使用一流函数的方法：

```
(defun complement (func)
  (lambda (x) (not (funcall func x))))

(defun conjoin (pred1 pred2)
  (lambda (x) (and (funcall pred1 x) (funcall pred2 x))))

(defun disjoin (pred1 pred2)
  (lambda (x) (or (funcall pred1 x) (funcall pred2 x)))) 
```

您可以从中生产

```
(remove-if (conjoin #'is-fruit-p (conjoin #'is-red-p #'grows-on-trees-p)) list-of-objects) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T13:01:51.793

```
(let ((predicates '(zerop evenp)))
  (remove-if (lambda (item)
               (some (lambda (fn) (funcall fn item))
                     predicates))
             '(0 1 2 3 4 0 1 2 3 4))) 
```

# asp.net - 在网站中添加视频

> ID：15475771
> 
> 赞同：0
> 
> 时间：2013-03-18T11:31:37.323
> 
> 标签：asp.net, video, embed

如果我使用此代码，我在 Firefox 中看不到任何内容，但在 chrome 和资源管理器中却很好。
有人有解决这个问题的想法吗？

```
<embed id='embed1' runat="server" name='mediaPlayer' type='application/x-mplayer2'  
     pluginspage='http://microsoft.com/windows/mediaplayer/en/download/'  displaysize='4'  
     autosize='-1' bgcolor='darkblue' showcontrols='true' showtracker='-1' showdisplay='0'  
     showstatusbar='-1' videoborder3d='-1' width='500' height='405'  designtimesp='5311'   
    loop='false' src="movie.mp4" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:11:57.403

尝试这个：

[媒体播放器无法在 Firefox 中运行](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/eb75af4a-2594-4d46-8198-c311bb0deae8/)

还：

为了使 Firefox 能够呈现媒体播放器内容，您需要 Firefox 中的 Windows Media 插件：

下载 Windows Media Player Firefox 插件( [http://port25.technet.com/pages/windows-media-player-firefox-plugin-download.aspx](http://port25.technet.com/pages/windows-media-player-firefox-plugin-download.aspx) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:36:20.597

尝试这个：`type="application/x-ms-wmp"`

这支持 .wmv、.wma 等（所有 windows 格式）

.mp4 由于版权问题而备受争议。

注意：是的，您需要在浏览器中安装插件。

# java - Tib RV - 列出发布到给定主题的所有进程

> ID：15475773
> 
> 赞同：1
> 
> 时间：2013-03-18T11:31:40.660
> 
> 标签：java, tibco-rv

我们有 RV 消息系统发布和接收消息。最近升级了一些底层 jar - 这些是所有发布者和订阅者使用的序列化 jar。但是，似乎***一些***发布者仍在引用旧版本的序列化 jar，因此接收器在尝试反序列化接收到的消息时失败。

显然，重新启动这些发布者服务应该可以解决问题。但是，如何识别使用特定主题向其发送消息的**所有发布者？**必须有某种 RV 管理方式来列出所有发布到给定主题的进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T09:38:18.930

我刚刚在另一个问题上给出了类似的答案：

有一个非常棒的工具，叫做[Rai Insight](http://www.raitechnology.com/prod-rai-insight.php)

基本上它可以做的是坐在一个盒子上，静静地收听所有的多播数据，甚至实时地表示统计数据。我们用它来监控流量峰值，延迟只有几秒钟。

它可以为您提供按组播组、服务号甚至发送机划分的流量统计信息。流量峰值/平均值，重传率峰值/平均值。所有你能想到的。

它还将为您提供每个服务每个主题的信息。

# ios - 自定义 b2b 应用程序也在常规商店中

> ID：15475774
> 
> 赞同：0
> 
> 时间：2013-03-18T11:31:40.753
> 
> 标签：ios, itunes, appstore-approval, b2b

我想知道是否可以在常规 iTunes Store 中提交与自定义 B2B 商店中相同的应用程序？我们有一个应用程序，我们希望公众付费，但将其免费提供给购买了我们其他产品的人......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T22:14:14.940

简单回答是不。一旦应用程序是自定义 B2B，它始终是自定义 B2B。

但：

您可以创建一个名称稍有不同的新应用，然后将该应用提交到 AppStore。例如：

```
 Custom B2B App Name: com.yourcompany.AppName
 New App in AppStore: com.yourcompany.App-Name 
```

我不确定名称需要有多大不同，但您可以进行试验，直到找到 AppStore 将采用的名称。

# iphone - Cocos2d 背景图像在视网膜模拟器和设备上无法正确显示

> ID：15475782
> 
> 赞同：1
> 
> 时间：2013-03-18T11:32:24.210
> 
> 标签：iphone, image, ipad, background, cocos2d-iphone

我已经在 cocos2d 中实现了以下代码来显示背景图像，并且除了在 Retina 设备中之外，此代码工作正常。背景图像未正确缩放或设置。它在带有 IOS 6.0 的 iPad 2 上运行良好，但在 Retina iPad (3) 6.0 和 Retina 模拟器上运行良好。我什至尝试过来自 github 和 ray wonder -samples 的示例。所有代码都有相同的问题。有人遇到过同样的问题吗？

```
 CCSprite *bg ;
  bg =  [CCSprite spriteWithFile:@"GameBGiPad1.png"];
  bg.anchorPoint =   CGPointZero;
  [self addChild:bg z:-2]; 
```

我在下面添加了启用视网膜显示的行，还添加了名称为“GameBGiPad1-hd.png”的图像，但在添加以下代码后，它在视网膜上显示黑色背景：-

应用程序委托中还包含以下代码：-

```
if( ! [director enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported"); 
```

这两个图像都不是精灵表的一部分，而是放置在图像文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:36:24.507

Cocos2d 1.0 : 不支持 iPad 视网膜显示。

Cocos2d 2.0：使用以下命名约定。

对于 iPad 视网膜，您需要放置带有扩展名的图像 -ipadhd.png

```
 GameBG.png          - For iPhone  
   GameBG-hd.png       - For iPhone HD
   GameBG-ipad.png     - For iPad  
   GameBG-ipadhd.png   - For iPad HD
   GameBG-iphone5hd    - For iPhone5 
```

# spring - [spring]channels 属性 标签不起作用

> ID：15475786
> 
> 赞同：0
> 
> 时间：2013-03-18T11:32:37.250
> 
> 标签：spring, apache-flex, flex3, blazeds

我通过 Spring 配置 blazeDS 远程服务。我尝试覆盖远程服务的默认频道。

`<flex:remoting-destination ref="flexCustomerService" destination-id="customerService" channels="customers-channel-secure-amf, customers-channel-amf"/>`

但是在运行时我得到 flex 错误 Server.Processing：目标 'customerService' 无法通过通道 'channel-secure-amf' 访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:02:35.277

问题在于在 flex 端定义自定义 Channel 集。我在 flex-servlet.xml 中定义了所有远程服务，它不用于编译 flex。所以我只是添加了属性 channelSet 来`<mx:RemoteObject>`让 flex 知道 flex 端的自定义通道标签。

`<mx:RemoteObject id="customerService" destination="customerService" fault="dispatchFaultEvent(event)" makeObjectsBindable="true" channelSet="{customerServiceSet}"/>`

# php - 在链接末尾用一个斜杠重写规则 .htaccess

> ID：15475788
> 
> 赞同：0
> 
> 时间：2013-03-18T11:32:40.327
> 
> 标签：php, regex, apache

重写后，我需要一个斜杠来结束我网站中的所有链接。我怎么才能得到它？我需要删除所有多余的斜杠，除了 URL 末尾的斜杠。例如：

`http://www.mydomen.com/test///`应该改写为`http://www.mydomen.com/test/`

我试过这个：

```
RewriteRule ^(.+)//$ /$1 [L,R=301] 
```

但它不起作用。这样做的正确重写规则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:37:56.423

尝试`RewriteRule ^(.*)$ http://www.example.com/$1/ [L,R=301]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:42:22.210

试试这个：

```
RewriteRule ^(.*)([^/]) /$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:39:09.393

这管用吗？：

```
RewriteEngine On
RewriteRule ^(.+)/{2,}$ $1/ [L,R=301] 
```

并确保它位于`.htaccess`文件的开头。`[L]`代表_`Last`

# asp.net-mvc - 在 ASP.NET MVC 4 中缓存文件

> ID：15475789
> 
> 赞同：1
> 
> 时间：2013-03-18T11:32:45.123
> 
> 标签：asp.net-mvc

在 MVC 4 / SQL 2012 / Entity Framework 5 应用程序上，我将所有文件上传到数据库到一个表中。

然后我在 FileController 中有一个动作 Get ，如下所示：

```
public partial class FileController : Controller {
  public virtual ActionResult Get(Guid key) {
    // Get file from database and return File
  }
} 
```

在 MVC 中，对于这些文件，我有什么可用的缓存策略？

我应该使用 ETags 吗？如何？

有人可以帮我解决这个问题吗？

谢谢你，

米格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:16:06.797

我不认为使用 etags 是识别文件名的明智选择。由于使用它们有其优点和缺点，请阅读*[本文](http://www.mnot.net/blog/2007/08/07/etags)*以了解有关 etag 的更多信息。

在您的情况下，有几种方法可以缓存结果集和文件。但是你需要注意这一点，在处理缓存 ORM 对象时，通常缓存的项目要么被删除，要么在你的文件发生一些变化时不更新，你需要自己处理这部分。无论哪种方式，您都可以设置需要刷新的缓存数据的持续时间。

我还没有遇到 .NET MVC4 中用于缓存数据的内置支持，无论如何，您始终可以编写自己的自定义 API 或使用/修改现有 API 来完成所需的任务。在这种情况下，您可能会发现**[这篇文章](https://stackoverflow.com/questions/11547618/output-caching-for-an-apicontroller-mvc4-web-api)**很有帮助。至于您使用 GUID 键作为文件名的情况，没有这样的规则说明 etags 和 uid 并排运行。您始终可以以您想要的方式缓存数据。看看**[史蒂夫的博客](http://stevescodingblog.co.uk/net4-caching-with-mvc/)**，他正在使用实体框架和 MVC。

编辑：

在客户端浏览器上缓存也是一块薄冰。这完全取决于类型、持续时间、敏感度，最重要的是用户，更不用说应用程序的性能了。正如我的好朋友曾经说过的那样：“直到你饿了才吃东西”......

要在客户端浏览器中设置缓存，您可以在 asp 中执行以下操作：

从下面提到的文章的例子中：

```
<%@ OutputCache Duration='120' Location='Client' VaryByParam='none' %> 
```

“这会将缓存保存 120 秒，并且缓存的数据不应保存在服务器上，而应仅存储在客户端浏览器上。”

**[更多关于在这篇文章](http://www.codeproject.com/Articles/29899/Exploring-Caching-in-ASP-NET)**和**[这篇](http://www.codeproject.com/Articles/12097/Cache-Management-in-ASP-NET)**文章中探索缓存的内容。

# linux - 如何移动和编号文件？

> ID：15475790
> 
> 赞同：3
> 
> 时间：2013-03-18T11:32:47.593
> 
> 标签：linux, bash, while-loop, move, cat

我使用linux，bash。

我有一个目录，里面有**100 个**文件夹，每个文件夹的名称都不同。

在这 100 个文件夹中的每一个中，都有一个名为 first.bars 的文件（所以我有 100 个名为**first.bars**的文件）。尽管都命名为 first.bars，但文件实际上略有不同。

我想将所有这些文件移动到一个新文件夹并重命名/编号这些文件，以便我知道哪个文件来自哪个文件夹。所以第一个**first.bars**文件必须重命名为**001.bars**，第二个文件必须重命名为**002.bars** .. 等等。

我尝试了以下方法：

```
ls -d * >> /home/directorywiththe100folders/list.txt
cat list.txt | while read line;
do cd $line;
mv first.bars /home/newfolder 
```

这不起作用，因为我不能在一个文件夹中拥有 100 个名称相同的文件。所以我只需要知道如何重命名它们。重命名必须连接到 cat list.txt，因为第一行是包含第一个被移动和重命名的文件的文件夹。该文件将被称为 001.bars。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:37:29.717

尝试这样做：

```
$ rename 's/^.*?\./sprintf("%03d.", $c++)/e' *.bar 
```

如果您想了解有关此命令的更多信息，请参阅我之前给出的最新回复：[如何重命名以 Unix 时间戳开头的多个文件 - imapsync 问题](https://stackoverflow.com/questions/15468028/how-do-i-rename-multiple-files-beginning-with-a-unix-timestamp-imapsync-issue/15468123?noredirect=1#comment21902638_15468123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:16:47.910

如果该`rename`命令不可用，

```
for d in /home/directorywiththe100folders/*/; do
    newfile=$(printf "/home/newfolder/%d.bars" $(( c++ )) )
    mv "$d/first.bars" "$newfile"
done 
```

# android - 可视化 wifi 信号强度

> ID：15475791
> 
> 赞同：1
> 
> 时间：2013-03-18T11:32:48.877
> 
> 标签：android, android-layout, android-wifi

我能够使用 wifimanager.getScanResults() 扫描所有 wifi 网络。在下一步中，我提取了 wifi 网络的 SSID 和信号级别。

```
private List<String> showOnlySSIDAndLevel(List<ScanResult> networks) {
    List<String> networkList = new ArrayList<String>();
    for(ScanResult result : networks){
        int level = WifiManager.calculateSignalLevel(result.level, 5) + 1;
        String content = result.SSID + " \tSignal strength: " + level;
        networkList.add(content);
    }
    return networkList;
} 
```

我有一个格式的信号电平，它在 1 - 5 之间（5 是最好的信号电平）我如何使用它来获得不同 wifi 信号电平的图形表示。我找不到这个的用户界面。我是否需要为 5 个可能级别中的每一个级别提供图形，还是有其他方法？内部 Android 设置（Wifi 扫描结果）是如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:25:03.220

我认为找到了更好的选择...

```
imageView.setIcon(android.R.drawable.stat_sys_wifi_signal_<strength>) 
```

其中强度是0到4范围内的变量...

有关更多详细信息，请参阅 [http://androiddrawableexplorer.appspot.com/](http://androiddrawableexplorer.appspot.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:45:17.187

您可以使用内置的[RatingBar](http://developer.android.com/reference/android/widget/RatingBar.html)组件。您可以通过给它一个[ratingBarStyleSmall](http://developer.android.com/reference/android/R.attr.html#ratingBarStyleSmall)或[ratingBarStyleIndicator](http://developer.android.com/reference/android/R.attr.html#ratingBarStyleIndicator)样式使其只读。

# c# - c# null-coalescing operator (??) 编译器代码优化

> ID：15475792
> 
> 赞同：0
> 
> 时间：2013-03-18T11:32:49.387
> 
> 标签：c#, c#-4.0

我很好奇下一种情况下的编译器效率：

```
double total = list.Sum(x => x.Value) ?? 0; 
```

问：编译器会生成执行 Sum 函数一次或两次的代码吗？

它可以产生类似的东西：

```
double total = list.Sum(x => x.Value) == null ? 0 : (double)list.Sum(x => x.Value); 
```

或者

```
double temp = list.Sum(x => x.Value);
total = temp == null ? 0 : (double)temp; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T11:35:12.480

您的代码毫无意义，因为即使将所有空值相加也会导致 0。

```
var d = new int?[]{null,null};
d.Sum().Dump(); //0 
```

...所以`Enumerable.Sum()`永远不会产生`null`你试图防范的价值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T11:34:33.820

代码将执行`Sum`一次。这就是在语言中引入新运算符的全部意义所在。您可以通过引入具有副作用的条件并验证副作用仅应用一次来验证这一点：

```
int? x = 5;
int y = x++ ?? 100; 
```

执行此代码后，`x`is `6`， not `7`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:37:11.683

`??`运算符只适用于可空类型，不是`double`可空类型，所以这段代码不会编译。同样，`.Sum()`扩展方法永远不会`null`在这个列表中返回，它总是会返回`0`。

# css - 如何改变ol css的位置？

> ID：15475795
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:33:06.403
> 
> 标签：css, list

我想要 ol 列表项在内容中间的位置。

我的代码：

```
#block-views-credit-library-block-1 .item-lists ol {
  list-style-position: inside;
  margin: 0 15px 25px;
  list-style-type: decimal;
}
#block-views-credit-library-block-1 .item-lists ol li {
  background: url("../images/number.png") no-repeat scroll 0 0 transparent;
  color: #F9F9F9;
  font-family: arial;
  font-size: 11pt;
  font-weight: bold;
  padding: 5px 0 0 13px;
} 
```

请参阅问题图片： http: [//manjitsingh.org/sites/default/files/test.png](http://manjitsingh.org/sites/default/files/test.png) 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:02:12.707

或者您可以尝试使用：

```
top: 50%;
margin-top: -div height / 2;
position: absolute; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:42:07.357

`ol li`在你的块上使用这个 css ：

```
background-position: 0 50%; 
```

# ruby-on-rails-3 - 如何使用 activerecord 在 rails 中正确编写复杂的 where 子句？

> ID：15475800
> 
> 赞同：0
> 
> 时间：2013-03-18T11:33:16.800
> 
> 标签：ruby-on-rails-3, activerecord, where-clause

我有一个`Item`s 的数据库。每个项目`belongs_to`一个`User`。每个项目都有一个`visibility`和`status`字段。为了可搜索，项目必须满足以下规则：

```
status must be :available
  AND 
  (visibility must be :everyone
    OR
    (visibility must be :friends AND user_id must be in current_user.friends)
  ) 
```

*换句话说，您会看到所有可用和公共项目，并且您会看到朋友的“私人”项目。*

如何检索符合此条件的项目？

* * *

我尝试了以下方法：

```
class Item < ActiveRecord::Base

  belongs_to :user
  attr_accessible :description, :photo, :title, :user_id, :visibility

  #...

  scope :searchable, lambda { |user|
    where('status IN ? AND (visibility IN ? OR (visibility IN ? AND user_id IN ?))',
          [:available, :lent],
          [:everyone],
          [:friends],
          user.friends)
  }
end 
```

在我的控制器中：

```
@items = Item.searchable(current_user) 
```

但我有一个错误：

**IN 生成的子句周围没有括号**

```
ActiveRecord::StatementInvalid in Items#search

SQLite3::SQLException: near ",": syntax error: SELECT "items".* FROM "items"  WHERE (status IN 'available','lent' AND (visibility IN 'everyone' OR (visibility IN 'friends' AND user_id IN 'foo'))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:34:22.543

我个人更喜欢用 lambda 声明一个类方法而不是作用域。我认为它更容易阅读。另外，设置默认值更容易。

```
def self.with_status(statuses)
  where(status: statuses)
end

def self.visible_to_friends_of(user)
  where('visibility = ? OR (visibility = ? AND user_id IN (?))',
    'everyone',
    'friends',
    user.friends
  )
end

def self.searchable(user)
  with_status([:available, :lent]).visible_to_friends_of(user)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:48:21.083

好吧，我不知道你必须自己把括号放在`?`s 周围（正如你所说的@MurifoX）

```
scope :searchable, lambda { |user|
    where('status IN (?) AND (visibility IN (?) OR (visibility IN (?) AND user_id IN (?)))',
          [:available, :lent],
          [:everyone],
          [:friends],
          user.friends)
} 
```

如果有更好的方法来实现这种行为，我仍然是开放的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T23:09:27.383

i think you should use thinking_sphinx gem for this.

```
define_index do
indexes title
indexes description
indexes uploads.file_file_name, :as => :upload_file_name
indexes uploads.file_content_type, :as => :upload_file_content_type

has :id
has price
has user_id
has created_at
has purchase_count
has images.photo_file_size
has tags.id, :as => :tag_id, :facet => true
has tags.parent_id, :as => :tag_parent_id, :facet => true
has "state='active'", :as => :active, :type => :boolean, :facet => true
has "count(images.id) > 0", :as => :has_image, :type => :boolean
has "sum(uploads.file_file_size)", :as => :total_size, :type => :integer

where "state in ('active', 'pending')"

set_property :delta => true
set_property :morphology => 'stem_en'
set_property :min_prefix_len => 3
set_property :enable_star    => true 
```

end

to satisfy your requirements you can use has condition or where clause. you find out more on Click [here](http://pat.github.com/ts/en/)

# android - 如何将像素（手机的显示宽度）转换为毫秒（ms）？

> ID：15475802
> 
> 赞同：1
> 
> 时间：2013-03-18T11:33:21.637
> 
> 标签：android, graph, type-conversion, pixel, milliseconds

![在此处输入图像描述](../Images/7848ba40a6434af1bbb06cee1e7a377f.png)

我正在尝试使用从文件中获取的字节数组为录制的声音绘制图表，并尝试将其设置为搜索栏的背景。我已经成功绘制到上面显示的数量，但它不准确。为了获得准确的图表，我需要将像素转换为毫秒。实际上，在搜索栏中完成的最大和进度更新以毫秒为单位。但是我正在使用循环内显示宽度的像素绘制图形。所以我想如果我可以将像素转换为毫秒并在里面绘制图形毫秒可以得出一个准确的进度条（希望如此）。

那么谁能帮我将像素转换为毫秒？？？如果手机的显示宽度是480，我需要将480转换为毫秒，有什么办法吗？？帮帮我！！！

```
width=number of pixels of display width
for (int iPixel = 0; iPixel < width; iPixel++)
            { 
                   {
            int start = (int) ((float) iPixel * ((float) width));
            int end = (int) ((float) (iPixel + 1) * ((float) width));

            for (int i = start; i < end; i++) {
            //code to find the pixel to draw
            }

   //code to draw in canvas
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:55:14.170

试试这个 ：

```
total width(unit) / total file length(milliseconds) = result(unit/milliseconds) 
```

然后移动你的`result`平局`milliseconds`

**编辑**：

我的建议是：

1- 设置 SeekBar max=100；并且最小值=0；

2-使用此方法将媒体长度转换为百分比：

```
public int getProgressPercentage(long currentDuration, long totalDuration){
        Double percentage = (double) 0;

        long currentSeconds = (int) (currentDuration);
        long totalSeconds = (int) (totalDuration);

        // calculating percentage
        percentage =(((double)currentSeconds)/totalSeconds)*100;

        // return percentage
        return percentage.intValue();
    } 
```

然后在 SeekBar 中使用这个 persent`setProgress(getProgressPercentage(long currentDuration, long totalDuration));`

3-实现`OnSeekBarChangeListener`并使用它的`progress`参数来绘制你的图表：

```
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {
    // Here use int progress to draw graph. It is percent
    // Current width = 400*percent/100 = result;
    // draw until result value;
}

/**
 * When user starts moving the progress handler
 * */
@Override
public void onStartTrackingTouch(SeekBar seekBar) {}

/**
 * When user stops moving the progress hanlder
 * */
@Override
public void onStopTrackingTouch(SeekBar seekBar) {} 
```

希望这对您有所帮助。

# android - 如何处理具有调整大小和旋转功能的贴纸？

> ID：15475805
> 
> 赞同：19
> 
> 时间：2013-03-18T11:33:25.240
> 
> 标签：android, rotation, pinchzoom, image-editing

我目前正在开发一个应用程序，它允许用户在图像上添加**贴纸（帽子、头发、眼镜等）**。用户可以调整该贴纸的大小，也可以旋转该贴纸并移动。见图片。

![在此处输入图像描述](../Images/e59a19346e5ac18d6fa839f4284ede36.png)

我有贴纸，但**如何将它们放在原始图像上并移动/旋转/放大它们以调整原始图像？**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-03-02T05:53:02.463

您可以查看以下链接以获取stickerView

1.  [https://github.com/nimengbo/StickerView](https://github.com/nimengbo/StickerView)
2.  [https://github.com/kencheung4/android-StickerView](https://github.com/kencheung4/android-StickerView)
3.  [https://github.com/uptechteam/MotionViews-Android](https://github.com/uptechteam/MotionViews-Android)
4.  [https://github.com/wuapnjie/StickerView](https://github.com/wuapnjie/StickerView)
5.  [https://github.com/sangmingming/StickerView](https://github.com/sangmingming/StickerView)
6.  [https://github.com/niravkalola/Android-StickerView](https://github.com/niravkalola/Android-StickerView)
7.  [https://github.com/Kaka252/StickerView](https://github.com/Kaka252/StickerView)
8.  [https://github.com/yovenny/StickerView](https://github.com/yovenny/StickerView)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-28T09:07:09.757

I found a good result at [http://code.google.com/p/android-multitouch-controller/](http://code.google.com/p/android-multitouch-controller/). Which handles 3 in 1 facility. On Multi-Touch, you can pan your image, you can scale your image and at the same time you can also rotate your image. And you can add number of stickers as you want.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:43:40.007

要放大/缩小图像，您可以尝试以下代码：

```
yourImageView.setLayoutParams(new GridView.LayoutParams(newWidthImage, newHeightImage));
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP); 
```

希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-03T04:40:57.103

第一步：下载此链接库。 [https://github.com/nimengbo/StickerView](https://github.com/nimengbo/StickerView)

第二：（StickerView,BubblePropertyModel,StickerPropertryModel.java 这三个文件粘贴你的项目）。

第三步：在 MainActivity 文件之后的代码下方：

注意：mainlayout 是（Relativelayout 对象）

```
 final StickerView stickerView21 = new StickerView(this);
            stickerView21.setImageResource(R.drawable.fall_9);

            stickerView21.setOperationListener(new  StickerView.OperationListener() {
                @Override
                public void onDeleteClick() {
                    mViews.remove(stickerView21);
                    mainLayout.removeView(stickerView21);
                }

                @Override
                public void onEdit(StickerView stickerView)
                {

                }

                @Override
                public void onTop(StickerView stickerView) {
                    int position = mViews.indexOf(stickerView);
                    if (position == mViews.size() - 1) {
                        return;
                    }
                    StickerView stickerTemp = (StickerView) mViews.remove(position);

                    mViews.add(mViews.size(), stickerTemp);
                }
            });

            RelativeLayout.LayoutParams l11= new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
            mainLayout.addView(stickerView21, l11);
            mViews.add(stickerView21); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-07T10:52:50.303

查看他们尝试实现在箭头单击时拉伸图像并删除它的功能的 blogspot，您还可以使用手势在屏幕上移动图像。

拖放图像还可以查看 DragDropImage 的演示

您也可以下载博客中提到的源代码。

[https://stackoverflow.com/a/22908379/3034199](https://stackoverflow.com/a/22908379/3034199)

# drop-down-menu - Infragistics UltraGrid CellChange 事件

> ID：15475806
> 
> 赞同：0
> 
> 时间：2013-03-18T11:33:27.310
> 
> 标签：drop-down-menu, cell, onchange, infragistics, ultrawingrid

伙计们！

我的项目中有 ultragrid，其中一列有一个 valueList ( **dropDown** )，其中包含三个字符串项 (“Statistic”、“Full Scale”、“Manual”，运行时默认为“Statistic”)。如果我在运行时更改值（假设我在“手动”上更改），CellChange 事件会触发，但如果我想查看**eventArgs.Cell**对象的值，我会看到“统计”。而且它始终是 eventArgs.Cell 中的一个值。所以我的问题是如何改变这种情况？我应该处理一些其他事件还是只能在设计模式下更改一些超网格的属性

# ios - 使用自动布局时优雅地隐藏和显示视图

> ID：15475811
> 
> 赞同：10
> 
> 时间：2013-03-18T11:33:36.303
> 
> 标签：ios, autolayout

我认为可能有一种方法可以使用自动布局轻松隐藏和显示连续的按钮，以便可以根据可见的视图自动整齐地排列视图。

例如，假设我有两个按钮，我总是希望在框架中居中：

```
// pseudo visual format code:
|-----[star][download]-----| 
```

当我按下下载时，我现在想看到三个按钮：（按钮`pause`是否`download`重新标记；`cancel`是以前隐藏的按钮）

`|--[star][cancel][pause ]--|`

我想我也许可以让所有三个按钮始终存在，但可能会覆盖宽度以使视图在状态之间优雅地动画？我认为可能有一种更语义化的方式来实现从自动布局结构中添加和删除视图。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T17:53:05.520

我整理了一个小示例，展示了如何使用自定义 UIView 子类完成此操作。在下面的示例中，我使用了此[答案中的](https://stackoverflow.com/questions/18746929/using-auto-layout-in-uitableview-for-dynamic-cell-layouts-variable-row-heights)[AutoLayout 框架](https://github.com/smileyborg/UIView-AutoLayout)，我建议您也这样做；它使约束代码保持清晰易读。

一般的方法是，您必须保留指向键约束的指针，这些键约束将左侧按钮的后缘绑定到右侧按钮的前缘，然后使用这些指针动态添加/删除约束。通常，您不想做太多，因为性能会受到影响，但是响应用户操作的少量操作是可以的。

我的观点是这样声明的：

```
@protocol TSDownloadViewDelegate;
@interface TSDownloadView : UIView
  @property (strong, nonatomic)          id<TSDownloadViewDelegate> delegate;
@end

@protocol TSDownloadViewDelegate <NSObject>
  - (void) downloadStartedInDownloadView:(TSDownloadView*)downloadView;
  - (void) downloadPausedInDownloadView:(TSDownloadView *)downloadView;
  - (void) downloadCancelledInDownloadView:(TSDownloadView*)downloadView;
@end 
```

并像这样实现：

```
#import "UIView+AutoLayout.h"
#import "TSDownloadView.h"

static const CGFloat        kMargin                = 20.0;

@interface TSDownloadView ()

    // Our buttons
    @property (strong, nonatomic)          UIButton *   starButton;
    @property (strong, nonatomic)          UIButton *   cancelButton;
    @property (strong, nonatomic)          UIButton *   downloadButton;

    // State tracking
    @property (nonatomic)                  BOOL         downloading;
    @property (nonatomic)                  BOOL         constraintsUpdated;

    // The constraint governing what's tied to the right hand side of the starButton
    @property (weak, nonatomic)            NSLayoutConstraint *starRightConstraint;

    // The constraint governing what's tied to the left hand side of the downloadButton
    @property (weak, nonatomic)            NSLayoutConstraint *downloadLeftConstraint;

@end

@implementation TSDownloadView

- (void) initializator
{
    _starButton = [UIButton buttonWithType:UIButtonTypeSystem];
    _cancelButton = [UIButton buttonWithType:UIButtonTypeSystem];
    _downloadButton = [UIButton buttonWithType:UIButtonTypeSystem];

    _starButton.translatesAutoresizingMaskIntoConstraints = NO;
    _cancelButton.translatesAutoresizingMaskIntoConstraints = NO;
    _downloadButton.translatesAutoresizingMaskIntoConstraints = NO;

    _starButton.titleLabel.textAlignment = NSTextAlignmentCenter;
    _cancelButton.titleLabel.textAlignment = NSTextAlignmentCenter;
    _downloadButton.titleLabel.textAlignment = NSTextAlignmentCenter;

    [_starButton setTitle:@"Star" forState:UIControlStateNormal];
    [_cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
    [_downloadButton setTitle:@"Download" forState:UIControlStateNormal];

    [_downloadButton addTarget:self action:@selector(downloadClicked:) forControlEvents:UIControlEventTouchUpInside];

    [self addSubview:_starButton];
    [self addSubview:_cancelButton];
    [self addSubview:_downloadButton];

    _cancelButton.hidden = YES;

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self initializator];
    }
    return self;
}

- (id) initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if( self )
    {
        [self initializator];
    }
    return self;
}

- (void)downloadClicked:(id)sender
{
    self.downloading = !self.downloading;
    if( self.downloading )
    {
        [self.downloadButton setTitle:@"Pause" forState:UIControlStateNormal];
        self.cancelButton.hidden = NO;

        // Remove previous constraints
        [self removeConstraint:self.starRightConstraint];
        [self removeConstraint:self.downloadLeftConstraint];

        // |--[star][cancel][pause ]--|
        self.starRightConstraint = [self.starButton autoPinEdge:ALEdgeRight toEdge:ALEdgeLeft ofView:self.cancelButton withOffset:-kMargin];
        self.downloadLeftConstraint = [self.downloadButton autoPinEdge:ALEdgeLeft toEdge:ALEdgeRight ofView:self.cancelButton withOffset:kMargin];

        // Tell delegate what's happened
        if( self.delegate )
            [self.delegate downloadStartedInDownloadView:self];
    }
    else
    {
        [self.downloadButton setTitle:@"Download" forState:UIControlStateNormal];
        self.cancelButton.hidden = YES;

        // Remove previous constraints
        [self removeConstraint:self.starRightConstraint];
        [self removeConstraint:self.downloadLeftConstraint];

        // |-----[star][download]-----|
        self.starRightConstraint = [self.starButton autoPinEdge:ALEdgeRight toEdge:ALEdgeLeft ofView:self.downloadButton withOffset:-kMargin];
        self.downloadLeftConstraint = nil;

        // Tell delegate what's happened
        if( self.delegate )
            [self.delegate downloadPausedInDownloadView:self];
    }

}

- (void) updateConstraints
{
    [super updateConstraints];
    if( self.constraintsUpdated ) return;
        self.constraintsUpdated = YES;

    // Now put our constraints in place

    // Make sure the button hugs the label and doesn't get stretched
    // just because there's space available
    [self.starButton setContentHuggingPriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisHorizontal];

    // Pin the starButton to the top, left and bottom edges of its superview
    [self.starButton autoPinEdgeToSuperviewEdge:ALEdgeTop withInset:kMargin];
    [self.starButton autoPinEdgeToSuperviewEdge:ALEdgeLeft withInset:kMargin];
    [self.starButton autoPinEdgeToSuperviewEdge:ALEdgeBottom withInset:kMargin];

    // Repeat for the other buttons

    [self.cancelButton setContentHuggingPriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisHorizontal];
    [self.cancelButton autoPinEdgeToSuperviewEdge:ALEdgeTop withInset:kMargin];
    [self.cancelButton autoPinEdgeToSuperviewEdge:ALEdgeBottom withInset:kMargin];

    [self.downloadButton setContentHuggingPriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisHorizontal];
    [self.downloadButton autoPinEdgeToSuperviewEdge:ALEdgeTop withInset:kMargin];
    [self.downloadButton autoPinEdgeToSuperviewEdge:ALEdgeBottom withInset:kMargin];
    [self.downloadButton autoPinEdgeToSuperviewEdge:ALEdgeRight withInset:kMargin];

    // These two are special. We keep a reference to them so we can replace
    // them later. Note that since the cancelButton is hidden at the start,
    // the initial value for downloadLeftConstraint is simply nil.

    self.starRightConstraint = [self.starButton autoPinEdge:ALEdgeRight toEdge:ALEdgeLeft ofView:self.downloadButton withOffset:-kMargin];
    self.downloadLeftConstraint = nil;
}
@end 
```

要使视图真正发挥作用，还有很多工作要做，但希望您能看到要采用的一般方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T08:53:47.303

使用 Autolayout 将 (5) 个按钮一个接一个地设计。

//在 ViewDidLoad 上：设置取消和暂停按钮隐藏

```
-(void) viewDidLoad
{
   [_pauseBtn setHidden:YES];
   [_cancelBtn setHidden:YES];
} 
```

//关于下载动作

```
-(IBAction) downloadClick (UIButton *) sender
{
    [_pauseBtn setHidden:NO];
    [_cancelBtn setHidden:NO];
    [sender setHidden:YES];
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-20T08:59:54.683

这只能通过`constraints`代码实现处理： [http ://www.techotopia.com/index.php/Implementing_iOS_6_Auto_Layout_Constraints_in_Code](http://www.techotopia.com/index.php/Implementing_iOS_6_Auto_Layout_Constraints_in_Code)

# php - Themeforest 主题与 Yii 框架的集成

> ID：15475812
> 
> 赞同：1
> 
> 时间：2013-03-18T11:33:36.787
> 
> 标签：php, twitter-bootstrap, yii, theming

我浏览了 Yii 文档并成功地为网站的后端和前端实现了两个不同的主题。Yii 没有好的主题，我发现 themeforest 有很棒的引导主题。所以我安装了 Yii-booster 并下载了一个支持引导程序的主题森林主题。我想知道如何整合它？

1）我是否必须在主题文件夹中创建一个新文件夹，并替换根目录中的css，js，images文件夹

或者

2) 替换路径 protected/extensions/bootstrap/assets 中的 js、css 等文件夹/文件

或者

3）还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:14:03.123

应用一个简单的逻辑。只需复制主题并制作特定的布局，然后根据您的需要在控制器中调用布局。

# highstock - HighStock 动态更改 Axis 的 tickPositions

> ID：15475813
> 
> 赞同：3
> 
> 时间：2013-03-18T11:33:45.123
> 
> 标签：highstock

有没有办法动态更改[tickPositions](http://api.highcharts.com/highstock#xAxis.tickPositions)数组并重绘 Axis？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:51:32.487

您可以使用允许定义动态刻度位置的 tickPositioner 函数。

[http://api.highcharts.com/highstock#xAxis.tickPositioner](http://api.highcharts.com/highstock#xAxis.tickPositioner)

# r - 更快的循环 binom.test？

> ID：15475814
> 
> 赞同：4
> 
> 时间：2013-03-18T11:33:53.330
> 
> 标签：r

我有一个成功向量，并希望对每个值进行 binom.test。有没有比这个循环更快的方法（我有很多）：

```
successes <-rbinom(100, 625, 1/5)
x <-NULL
for (i in 1:100) {
x <-append(x, binom.test(successes[i], 625, 1/5)$p.value)
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T11:39:12.877

您可以使用 for 循环`sapply()`来计算`p.values`每个成功值，而不是循环。

```
pp <- sapply(successes, function(x) binom.test(x, 625, 1/5)$p.value) 
```

如果您需要真正加速过程，您可以使用 package 的优点`data.table`。首先，转换`successes`为`data.table`对象。然后计算每一行的 p.value。

```
library(data.table)
dt<-data.table(successes)
dt[,pp:=binom.test(successes, 625, 1/5)$p.value,by=successes] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T18:16:34.250

哇`data.table`真的很快，似乎只是工作！中的许多值`successes`都是重复的，因此可以通过`binom.test`仅对唯一值进行昂贵的计算来节省时间。

```
fasterbinom <- function(x, ...) {
    u <- unique(x)
    idx <- match(x, u)
    sapply(u, function(elt, ...) binom.test(elt, ...)$p.value, ...)[idx]
} 
```

对于某些时间，我们有

```
dtbinom <- function(x, ...) {
    dt <- data.table(x)
    dt[, pp:=binom.test(x, ...)$p.value, by=x]$pp
} 
```

和

```
> successes <-rbinom(100000, 625, 1/5)
> identical(fasterbinom(successes, 625, .2), dtbinom(successes, 625, .2))
[1] TRUE
> library(rbenchmark)
> benchmark(fasterbinom(successes, 625, .2), dtbinom(successes, 625, .2))
                              test replications elapsed relative user.self
2     dtbinom(successes, 625, 0.2)          100   4.265    1.019     4.252
1 fasterbinom(successes, 625, 0.2)          100   4.184    1.000     4.124
  sys.self user.child sys.child
2    0.008          0         0
1    0.052          0         0 
```

在这种情况下比较循环方法很有趣

```
f0 <- function(s, ...) {
    x0 <-NULL
    for (i in seq_along(s))
        x0 <-append(x0, binom.test(s[i], ...)$p.value)
    x0
}

f1 <- function(s, ...) {
    x1 <- numeric(length(s))
    for (i in seq_along(s))
        x1[i] <-  binom.test(s[i], ...)$p.value
    x1
}

f2 <- function(s, ...)
    sapply(s, function(x, ...) binom.test(x, ...)$p.value, ...)

f3 <- function(s, ...)
    vapply(s, function(x, ...) binom.test(x, ...)$p.value, numeric(1), ...) 
```

where`f1`是使用 时通常更好的“预分配和填充”策略`for`，`f2`是一种`sapply`消除用户掌握的不良`for`循环的可能性，并且`f3`是一种更安全且可能更快的版本`sapply`，可确保每个结果都是长度为 1数值。

每个函数返回相同的结果

```
> n <- 1000
> xx <-rbinom(n, 625, 1/5)
> res0 <- f0(xx, 625, .2)
> identical(res0, f1(xx, 625, .2))
[1] TRUE
> identical(res0, f2(xx, 625, .2))
[1] TRUE
> identical(res0, f3(xx, 625, .2))
[1] TRUE 
```

和 while`apply`类方法比 for 循环快 10% 左右（在这种情况下；当单个元素很大时，f0 和 f1 之间的差异会更加显着）

```
> benchmark(f0(xx, 625, .2), f1(xx, 625, .2), f2(xx, 625, .2),
+           f3(xx, 625, .2), replications=5)
              test replications elapsed relative user.self sys.self user.child
1 f0(xx, 625, 0.2)            5   2.303    1.100     2.300        0          0
2 f1(xx, 625, 0.2)            5   2.361    1.128     2.356        0          0
3 f2(xx, 625, 0.2)            5   2.093    1.000     2.088        0          0
4 f3(xx, 625, 0.2)            5   2.212    1.057     2.208        0          0
  sys.child
1         0
2         0
3         0
4         0 
```

`fasterbinom`真正的速度来自/的更高级的算法`dtbinom`。

```
> identical(res0, fasterbinom(xx, 625, .2))
[1] TRUE
> benchmark(f2(xx, 625, .2), fasterbinom(xx, 625, .2), replications=5)
                       test replications elapsed relative user.self sys.self
1          f2(xx, 625, 0.2)            5   2.146   16.258     2.145        0
2 fasterbinom(xx, 625, 0.2)            5   0.132    1.000     0.132        0
  user.child sys.child
1          0         0
2          0         0 
```

# java - 具有可变长度字段的详细信息 JPanel

> ID：15475819
> 
> 赞同：0
> 
> 时间：2013-03-18T11:34:01.293
> 
> 标签：java, swing, user-interface, jpanel, layout-manager

我正在尝试创建一个包含 N 行和 2 列的面板，其中第一列是具有可变长度但在一定限制内的标签（它根据语言改变长度），而第二列包含可能很长的字段文本。

我已经尝试使用 NetBeans 使用 GridBagLayout，但是在缩放面板或添加非常长的字段时结果很混乱。在 JPanel 的屏幕截图下面看看我的意思：

![在此处输入图像描述](../Images/dde536d6dfe4757cc5a77a14d26b0969.png)

我希望左列与左边框隔开，第一列永远不会调整为小于其最长标签的值（标签必须始终可读），而第二列应该可视化到其可用的水平空间和然后显示点（而不是裁剪文本）。

同样无聊的是，尽管我将 NorthWest 定义为方向，但面板显示在中心垂直对齐

**编辑**：我使用 TableColumnAdjuster 来使用表格行而不是标签作为我的值，以便我可以用鼠标选择值。我仍然有行但是适合文本的长度而不是包含面板的长度：

```
public class TestPanel extends JPanel
{
    private static ArrayList<String> columnNames = new ArrayList<>();
    static JTable table;
    MyTableModel myTableModel = new MyTableModel();

    static class MyTableModel extends AbstractTableModel
    {
        private String[] columnNames =
        {
            "Name", "Value"
        };
        private Object[][] data =
        {
            { "Subject", "very very very very very very very very very very very very very very very very long subject"},
            { "Date", "" },
            { "Location", "" },
            { "Status", "" },
            { "Notes", "" }
        };

        @Override
        public int getColumnCount()
        { return columnNames.length; }

        @Override
        public int getRowCount()
        {  return data.length; }

        @Override
        public String getColumnName(int col)
        {  return columnNames[col]; }

        @Override
        public Object getValueAt(int row, int col)
        {  return data[row][col]; }

        @Override
        public Class getColumnClass(int c)
        { return getValueAt(0, c).getClass(); }

        @Override
        public boolean isCellEditable(int row, int col)
        { return false; }

        @Override
        public void setValueAt(Object value, int row, int col)
        {        }
    }

    public TestPanel()
    {
        table = new JTable(myTableModel);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        TableColumnAdjuster tca = new TableColumnAdjuster(table);
        tca.adjustColumns();

        JPanel panel = new JPanel(new GridBagLayout());
        panel.add(table);
        GridBagConstraints constraints = new GridBagConstraints();
        constraints.weighty = 1.0;
        constraints.fill = GridBagConstraints.VERTICAL;
        panel.add(Box.createGlue(), constraints);
        add(panel);
    }

    public static void main(String args[])
    {
        JFrame frame = new JFrame();
        frame.setContentPane(new TestPanel());
        frame.setSize(300, 800);
        frame.setVisible(true);
    }
} 
```

而 TableColumnAdjuster 来自[TableColumnAdjuster](http://www.camick.com/java/source/TableColumnAdjuster.java) .. 我得到的仍然如下

![在此处输入图像描述](../Images/dd249d1b4a35b757db6f02579b7fa3c3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:43:22.070

您可能对`GridBagLayout`.

1.  要将所有内容推到顶部，要么将`GridBagLayout`面板包装到另一个面板`BorderLayout`中（如位置中的面板`NORTH`），要么在底部添加一个组件，以占用所有额外空间
2.  对于第一列中的所有组件，设置`weightx`为 0，而在第二列中，将其设置为大于 0 的值。
3.  要在左边框和标签之间添加一些空间，只需使用`insets`

这是一个说明这一点的示例：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.util.Random;

import javax.swing.Box;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Gridbag {

    public void initUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        Random random = new Random();
        for (int i = 0; i < 10; i++) {
            String label = "Label " + (i + 1);
            StringBuilder fieldValue = new StringBuilder();
            int r = 1 + random.nextInt(4);
            for (int j = 0; j < r; j++) {
                fieldValue.append("Some long value that may be very long in some cases");
            }
            addField(panel, label, fieldValue.toString());
        }
        GridBagConstraints constraints = new GridBagConstraints();
        constraints.weighty = 1.0;
        constraints.fill = GridBagConstraints.VERTICAL;
        panel.add(Box.createGlue(), constraints);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    private void addField(JPanel panel, String label, String fieldValue) {
        GridBagConstraints labelGBC = new GridBagConstraints();
        labelGBC.insets = new Insets(0, 5, 0, 5);
        labelGBC.anchor = GridBagConstraints.EAST;
        GridBagConstraints fieldGBC = new GridBagConstraints();
        fieldGBC.gridwidth = GridBagConstraints.REMAINDER;
        fieldGBC.weightx = 1.0;
        fieldGBC.anchor = GridBagConstraints.WEST;
        panel.add(new JLabel(label), labelGBC);
        panel.add(new JLabel(fieldValue), fieldGBC);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Gridbag().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:37:30.233

您可以使用具有两列的 JTable 和[TableColumnAdjuster](http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/)或[TableCellRenderer](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableCellRenderer.html)，以便将列的宽度调整为最长的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:41:11.933

实现它的一种方法是在“嵌套布局”中使用 3 个面板。面板的布局如下。

1.  用于`BorderLayout`外面板，它包含面板 2 和 3。
2.  使用单列`GridLayout`- 放入`BorderLayout.LINE_START`
3.  使用单列`GridLayout`- 放入`BorderLayout.CENTER`

# python - 等效于 VB.Net 的“With”/Inline 初始化？

> ID：15475820
> 
> 赞同：1
> 
> 时间：2013-03-18T11:34:02.340
> 
> 标签：python

我有一个需要初始化的复杂对象图。

如果我在 VB.Net 中这样做，我会这样做......

```
Dim Blah = New A With {
    .B = New C With {.D = New E},
    .F = New G } 
```

在 Python 中，我目前正在做...

```
Blah = A()
Blah.B = C()
Blah.B.D = E()
Blah.F = G()
... 
```

有没有更简洁的方法来做到这一点？

# php - 如何从套接字流中读取多行？

> ID：15475822
> 
> 赞同：2
> 
> 时间：2013-03-18T11:34:04.700
> 
> 标签：php, imap

我想从 gmails 的 imap 服务器检索电子邮件，但问题是来自服务器的响应是多行（如此处所示[）](http://www.anta.net/misc/telnet-troubleshooting/imap.shtml)并且 fgets 只检索一行。

我试过使用 fgets、fread、socket_read 但它们都不起作用，所以要么我使用了错误的方法，要么错误地使用了这些方法。我也试过[这个](http://www.binarytides.com/php-socket-programming-tutorial/)教程，但也没有用。如果有人可以帮助我，我将不胜感激。

谢谢，如果这是一个业余问题，我真的很抱歉。

代码：

```
<?php

$stuff = fsockopen('ssl://imap.gmail.com',993);
$reply = fgets($stuff,4096);
echo 'connection: '.$reply.'<br/>';

$request = fputs($stuff,"a1 LOGIN MyUserName Password\r\n");
$receive = socket_read($stuff, 4096);

echo 'login: '.$receive.'<br/>';

$request = fputs($stuff,"a2 EXAMINE INBOX\r\n");
$reply = '';

while(!feof($stuff))
    $reply .= fread($stuff, 4096);

echo $reply;

/*
$request = fputs($stuff,'a3 FETCH 1 BODY[]\r\n');
$reply = fgets($stuff);
echo $reply;
*/
?> 
```

Max在下面的回答有效。这是我的实现。

```
private function Response($instructionNumber)
{
    $end_of_response = false;

    while (!$end_of_response)
    {
        $line = fgets($this->connection,self::responseSize);
        $response .= $line.'<br/>';

        if(preg_match("/$instructionNumber (OK|NO|BAD)/", $response,$responseCode))
            $end_of_response = true;
    }

    return array('code' => $responseCode[1],
        'response'=>$response);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:50:42.403

自从我写 PHP 以来已经有一段时间了，我对 IMAP 不太了解，但如果它是 NNTP 之类的东西，你的代码看起来有点像这样（在 SO 编辑器中写的，可能有问题）：

```
$buffer = '';
function read_line($socket) {
    global $buffer;
    while (strpos($buffer, "\n") === false)
        $buffer .= fread($socket, 1024);

    $lineEnd = strpos($buffer, "\n");
    $line = substr($buffer, 0, $lineEnd-1);
    $buffer = substr($buffer, $lineEnd);

    return $line;
}

function send_line($socket, $line) {
    fwrite($socket, $line);
}

$socket = fsockopen('ssl://imap.gmail.com',993);
$welcome = read_line($socket);

send_line("a1 LOGIN MyUserName Password\r\n");
$reply = read_line($socket);

send_line("a2 EXAMINE INBOX\r\n");
while (($reply = trim(read_line($socket))) != '.') {
    echo $reply.PHP_EOL;
}

echo "Done"; 
```

基本概念是：

*   始终缓冲所有传入数据。PHP 不能很好地处理行，所以自己进行拆分。
*   不要随意阅读所有内容，但要知道会发生什么。您期望有一条欢迎行，`LOGIN`有一条回复，并`EXAMINE INBOX`一直输出数据，直到出现一个点，因此一旦看到就立即停止阅读。
*   您很可能需要一个简单的函数来处理阅读。你甚至可以编写另一个函数来简化它：

* * *

```
function read_block($socket) {
    $block = '';
    while ('.' != trim($reply = read_line($socket)) {
        $block .= $reply;
    }
    return $block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:26:29.507

通常，当您收到您发送的标签的 OK/BAD/NO 响应时，您知道停止阅读。如果你发送`a1 LOGIN ...`你停止当你得到`a1 OK/BAD/NO ...`。

# c++ - 禁止在继承类中定义复制构造函数

> ID：15475823
> 
> 赞同：10
> 
> 时间：2013-03-18T11:34:16.827
> 
> 标签：c++, copy-constructor, noncopyable

我想让一个抽象基类不可复制，并强制从它派生的任何类不可复制。下面的代码使用了在 noncopyable.hpp 中定义的 Boost 的 noncopyable，[但](http://www.boost.org/doc/libs/1_53_0/boost/noncopyable.hpp)仍然允许派生类 D 定义一个复制构造函数。

```
class noncopyable
{
    protected:
        noncopyable() {}
        ~noncopyable() {}
    private:  // emphasize the following members are private
        noncopyable( const noncopyable& );
        const noncopyable& operator=( const noncopyable& );
};

class D : noncopyable
{
    public:
        D() { }
        D(const D&) { }
};

int main()
{
    D a;
    D b(a);

    return 0;
} 
```

这段代码编译并运行（[http://ideone.com/g4gGLm](http://ideone.com/g4gGLm)），当我预计它会抛出一个关于 D 的复制构造函数的编译时错误。也许我误解了这个不可复制类的意图。如果是这样，有没有办法强制派生类不定义复制构造函数？（答案可以用C++11，但最好不要boost）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T11:39:44.410

之所以可行，是因为`D(const D&)`调用了基类的默认构造函数，而不是复制构造函数。（起初违反直觉，但考虑到所有构造函数的行为都是这样的，这是有道理的）

由于未调用复制构造函数，因此除非您明确要求，否则不会创建基础对象的副本：

```
D(const D& d) : noncopyable(d) { } 
```

这确实会导致错误。所以事实上，你的问题是一个非问题 - 没有`noncopyable`继续进行的复制。

我不知道有任何直接的方法可以强制派生类不允许复制，如果有的话，我也不建议使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T11:44:15.827

您需要删除 D 的复制构造函数。现在您通过不尝试复制构造基类来允许 D 的复制构造。以下变体将无法编译：

```
class E: noncopyable
{
};
E e, e2(e);

class F: noncopyable
{
public:
  F(const F &init): noncopyable(init)
  {}
}; 
```

# java - 运行应用程序时出现 java.lang.NullPointerException

> ID：15475827
> 
> 赞同：0
> 
> 时间：2013-03-18T11:34:25.887
> 
> 标签：java, android

我是android开发的新手。我从以下链接下载了源文件

**“ [http://android-er.blogspot.in/2012/07/implement-custom-linearlayout-for.html](http://android-er.blogspot.in/2012/07/implement-custom-linearlayout-for.html) ”**，但尝试在模拟器中运行时显示

```
java.lang.NullPointerException at com.example.androidhorizontalscrollviewgallery.MainActivity.onCreate(MainActivity.java:27) 
```

我的`MainActivity.java`代码如下：

```
package com.example.androidhorizontalscrollviewgallery;

import java.io.File;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;

public class MainActivity extends Activity {

MyHorizontalLayout myHorizontalLayout;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myHorizontalLayout = (MyHorizontalLayout)findViewById(R.id.mygallery);

    File targetDir=getDir("Pictures",Context.MODE_PRIVATE);

    String targetPath=targetDir+ "/homepage/";
    File targetDirector = new File(targetPath);

    File[] files = targetDirector.listFiles();

    for(File f : files){

        myHorizontalLayout.add(f.getAbsolutePath());
    }

    }
} 
```

在这里，我将图像存储在计算机中的“Libraries\Pictures\homepage”路径中。我想在画廊中获取图像，但我不能。我不知道是什么原因导致了这个异常，任何人都可以告诉解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:49:40.267

我认为**您不能直接从计算机路径中获取图像**。

您必须**将该图像复制到应用程序的可绘制或评估文件夹**中。

或者您的图像应该驻留在**您的设备或模拟器库**或**任何其他文件夹**中。但它应该在您正在测试的设备或模拟器中。

请参阅您使用的教程中的这一行。

```
String ExternalStorageDirectoryPath = Environment
      .getExternalStorageDirectory()
      .getAbsolutePath();

String targetPath = ExternalStorageDirectoryPath + "/test/"; 
```

所以这是你的**设备的 sdcard 路径**- 外部存储路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:40:07.597

尝试这个..

```
File targetDir=getDir("Libraries\Pictures\homepage",Context.MODE_PRIVATE);
 String targetPath=targetDir.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:40:14.293

从异常中，您在第 27 行有一个空指针，这意味着您正在迭代的文件对象为空。您使用 listFiles 方法来获取该对象，但 listFiles 方法可以返回 null。你必须检查你是否有 null 以避免你的应用程序崩溃。请参见下面的示例。另外，请参阅[File 类文档](http://developer.android.com/reference/java/io/File.html#listFiles%28%29)。

```
if (files == null) {
    // handle case where the file object is not a directory
}
else {
for(File f : files){
        myHorizontalLayout.add(f.getAbsolutePath());
    }
} 
```

# javascript - jQuery - 悬停动画

> ID：15475829
> 
> 赞同：0
> 
> 时间：2013-03-18T11:34:36.467
> 
> 标签：javascript, jquery, jquery-animate

我知道这很可能会作为副本关闭，但我仍然没有设法在所有类似问题中找到我的问题的答案。

我想`animate()`在鼠标悬停时在我的页面上添加一个元素（通过 jQuery，你已经猜到了）。我所做的是：

```
$('blockquote').hover(function() {
    console.log($(this));
    $(this).animate({textSize: '+=10px'}, 500);
}, function() {
    $(this).animate({textSize: '-=10px'}, 500);
}); 
```

`console.log`日志如下：

```
[blockquote#daily_quote, context: blockquote#daily_quote, jquery: "1.9.1", constructor: function, init: function, selector: ""…] 
```

内部的两个函数都`hover`被调用，`$(this)`被记录但没有动画。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:37:39.203

使用`fontSize`：

```
$('blockquote').hover(function() {
    // console.log($(this));
    $(this).animate({fontSize: '+=10px'}, 500);
}, function() {
    $(this).animate({fontSize: '-=10px'}, 500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:58:58.620

```
This may be help you.
$('blockquote').hover(function() {

        $(this).animate({left: '+=10px'}, 700);
    }, function() {
        $(this).animate({left: '-=10px'}, 700);
    }); 
```

你可以使用任何属性而不是 left

# firefox - Firefox 上传字段错误：NS_ERROR_CANNOT_CONVERT_DATA

> ID：15475830
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:34:40.023
> 
> 标签：firefox, upload

我有一个在 Chrome 中有效的上传字段，但在 Firefox 中无效。

我试过在网上搜索，但似乎找不到答案。

这是我在 Firefox 中遇到的错误：

```
NS_ERROR_CANNOT_CONVERT_DATA: Component returned failure code: 0x80460001     
(NS_ERROR_CANNOT_CONVERT_DATA) [nsIDOMFormData.append]
[Break On This Error]   

data.append(param, params[param]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:10:49.850

你到底要传递给`append()`什么？要么你传递一个`String`对象（在这种情况下，这将在 Firefox 20 中修复），要么你传递的东西不是一个有效的参数......

# php - 如何在php和javascript中的drupal 7中使drupal t函数不区分大小写

> ID：15475831
> 
> 赞同：0
> 
> 时间：2013-03-18T11:34:41.880
> 
> 标签：php, javascript, localization, drupal-7

嗨，我对 JavaScript 函数的 Drupal t 或 Drupal.t('') 有一些问题，是否可以在 Drupal 示例中使 t 函数不区分大小写：如果我这样做

```
echo t('ABC'); 
```

或者

```
echo t('abc'); 
```

我可以让它们都给出相同的结果吗？对于英语，结果将是

```
ABC 
```

或者

```
abc 
```

对于其他语言，两者都只会给出结果，例如：

```
ابت 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:14:34.797

'ABC' 和 'abc' 是 t() 的不同字符串。我认为通过 t() 是不可能的，也许你应该在插入 t() 之前使用 PHP 格式/大小写来准备你的字符串

这是您需要的[字符串函数](http://www.php.net/manual/en/ref.strings.php)

# r - 计数事件组合出现在数据框列ext中的次数

> ID：15475832
> 
> 赞同：0
> 
> 时间：2013-03-18T11:34:55.730
> 
> 标签：r, dataframe, combinations

这是[Count number of times combination of events occur in dataframe columns 中](https://stackoverflow.com/questions/14899197/count-number-of-times-combination-of-events-occurs-in-dataframe-columns)提出的问题的扩展，我将再次改写这个问题，所以一切都在这里：

我有一个数据框，我想计算两列中每个事件组合发生的次数（以任何顺序），如果组合没有出现，则为零。

例如说我有

```
df <- data.frame('x' = c('a', 'b', 'c', 'c', 'c'), 
                 'y' = c('c', 'c', 'a', 'a', 'b')) 
```

所以

```
x y  
a c  
b c  
c a  
c a  
c a  
c b 
```

`a`并且`b`不要一起出现，`a`并且`c`4 次（第 2、4、5、6 行）`b`和`c`两次（第 3 和第 7 行）所以我想返回

```
x-y num  
a-b 0  
a-c 4  
b-c 2 
```

我希望这是有道理的？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:39:56.730

这应该这样做：

```
res = table(df) 
```

要转换为数据框：

```
resdf = as.data.frame(res) 
```

resdf data.frame 看起来像：

```
 x y Freq
1 a a    0
2 b a    0
3 c a    2
4 a b    0
5 b b    0
6 c b    1
7 a c    1
8 b c    1
9 c c    0 
```

请注意，此答案考虑了顺序。如果列的顺序不重要，那么在处理之前修改原始 data.frame 将消除排序的影响（ac 与 ca 处理相同）。

```
df1 = as.data.frame(t(apply(df,1,sort))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:43:42.260

如前所述，您可以使用`factor()`and `expand.grid()`（或获得所有可能组合的其他方式）来执行此操作

```
all.possible <- expand.grid(c('a','b','c'), c('a','b','c'))
all.possible <- all.possible[all.possible[, 1] != all.possible[, 2], ]
all.possible <- unique(apply(all.possible, 1, function(x) paste(sort(x), collapse='-')))

df <- data.frame('x' = c('a', 'b', 'c', 'c', 'c'), 
                 'y' = c('c', 'c', 'a', 'a', 'b'))
table(factor(apply(df , 1, function(x) paste(sort(x), collapse='-')), levels=all.possible)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:19:59.690

另一种选择，因为我有点无聊。或许更笼统一些？但可能仍然比它可能的丑...

```
df2 <- as.data.frame(table(df))
df2$com <- apply(df2[,1:2],1,function(x) if(x[1] != x[2]) paste(sort(x),collapse='-'))
df2 <- df2[df2$com != "NULL",]
ddply(df2, .(unlist(com)), summarise, 
      num = sum(Freq)) 
```

# html - IE8 在 IIS 上不显示背景图像

> ID：15475835
> 
> 赞同：0
> 
> 时间：2013-03-18T11:35:00.077
> 
> 标签：html, css, iis

我有以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" class="js">
<head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>| TheProfessional Theme</title>
    <style type="text/css">
        .et-custom-list ul
        {
            list-style: none !important;
            list-style-image: none !important;
            padding-left: 0 !important;
            margin: 0 !important;
            line-height: 26px;
        }
        .et-custom-list ul li
        {
            padding-left: 28px !important;
            margin: 5px 0 !important;
            list-style: none !important;
            position: relative;
        }
        .et-custom-list ul li:before
        {
            content: '';
            position: absolute;
            top: 5px;
            left: 0;
            background: url(https://www.elegantthemes.com/preview/TheProfessional/wp-content/themes/TheProfessional/epanel/shortcodes/images/shortcodes-sprite.png) no-repeat -74px -2px;
            width: 22px;
            height: 18px;
        }
    </style>
</head>
<body>
    <div class="et-custom-list">
        <ul>
            <li>list item 1</li>
            <li>list item 2
                <ul>
                    <li>list item 1</li>
                    <li>list item 2</li>
                </ul>
            </li>
            <li>list item 3</li>
            <li>list item 4</li>
        </ul>
    </div>
</body>
</html> 
```

在我的桌面上保存为 HTML 文件时，它适用于所有浏览器。当我将文件移动到服务器 (IIS) 时，它适用于除 II8 之外的所有浏览器。为什么它突然停止在 IIS 上的 IE8 中工作？

现在一位同事向我展示了它在桌面上的 IE7 中也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:42:52.457

用双引号 ( `"`) 将背景 url 括起来：

```
background: url("https://www.elegantthemes.com/preview/TheProfessional/wp-content/themes/TheProfessional/epanel/shortcodes/images/shortcodes-sprite.png") no-repeat -74px -2px; 
```

# jquery - 根据第一个子文本内容设置跨度的标题

> ID：15475837
> 
> 赞同：0
> 
> 时间：2013-03-18T11:35:04.410
> 
> 标签：jquery, children

我试过：

```
$('span.tag').each(function(){
    $(this).attr('title', '').prop('title', function(){$(this).children('li:first').text();});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:37:51.487

为什么这么复杂？这很简单

```
$('span.tag').each(function(){
    $(this).attr('title', $(this).find('li:first').text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:39:40.120

试试这个：

```
$('span.tag').attr('title', function(){
    return $(this).find('li:first').text();
}); 
```

# mysql - 在mysql表中记录列级别的变化

> ID：15475838
> 
> 赞同：0
> 
> 时间：2013-03-18T11:35:04.540
> 
> 标签：mysql, audit-tables

我的客户希望在列级别保持审计。他想要一个存储所有审计的表，即在列级别。我已经决定了一个表结构。IE

```
id,tablename,tablecolumn,primarkey,oldvalue,newvalue,date 
```

但我想知道如何检查每个列级别的更改。我是否必须像 old.columnname <> new.columnname 一样手动检查每一个，然后添加到审计表中？

有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:46:19.767

当我被赋予相同的任务时，我创建了几个用于修改表数据的存储过程，并限制了对表的 CUD 操作，以强制用户仅使用存储过程。

SP 实际上正在执行请求的操作（即创建、更新或删除表中的一行），并为每个操作在审计表中添加一行。

从数据库优化的角度来看，这可能效率很低，但我认为它可以为您提供大部分审计，因为更新操作和审计会自动放入事务中，并且如果不添加审计条目，则无法完成更新。

# groovy - 当 Jenkins/Hudson 处于关机模式时允许运行一些作业

> ID：15475846
> 
> 赞同：3
> 
> 时间：2013-03-18T11:35:16.440
> 
> 标签：groovy, jenkins, hudson

通常，在“管理 Jenkins”下选择“准备关机”会阻止新作业的启动（我猜这在 Hudson 下是相同的行为）。

现在我想在 Jenkins 处于关闭模式时运行一些维护工作。我没有找到任何“即使 Jenkins 正在关闭也允许运行”（或者更好的是，“仅在关闭时允许运行”。

我实际上正在考虑创建一个特殊的构建步骤，它将 Jenkins 置于关闭模式，然后等待并阻止构建，直到它检测到 Jenkins 已进入关闭模式并且所有其他作业都已完成，然后继续构建。对此的自然配对是另一个自定义构建步骤，它将触发 Jenkins 重新启动或禁用关闭模式，在维护步骤结束后运行。

但在我开始编码之前，**是否有现有的解决方案**、插件或其他什么？

如果有 Groovy 大师阅读本文，我不介意用 Groovy 脚本的几行作为答案。这是安装 Groovy 插件的好借口；-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:51:38.930

看看[Exclusive Execution Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Exclusive+Execution+Plugin)。它不是为在任意关闭模式下执行而设计的，但它被设计为在运行时进入关闭模式（以防止其他作业运行），然后自行运行，然后退出关闭模式。

# java - JPA 转换异常

> ID：15475848
> 
> 赞同：0
> 
> 时间：2013-03-18T11:35:19.847
> 
> 标签：java, database, oracle, jpa

我正在尝试使用 Oracle 和 JPA 构建数据库模式。我是 JPA 的新手，我总是直接使用 sql。我需要创建两个表：第一个包含当前的 VOIP 呼叫，另一个包含这些呼叫的历史记录。这两个表是相同的。在 JPA 中，我写了这个：

```
@Entity
@Table(name = "voip_currentCalls")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class VoipCurrentCall implements Serializable {

    private static final long serialVersionUID = 1L;
    protected CompositeID id;
    protected Timestamp startTime;
    protected Timestamp endTime;
    protected String calledNumber;
    protected String callingNumber;    
    protected Person contact;
    protected CallSource source;
    protected CallStatus status;
    protected CallType type;
    protected CallStage stage;

@Entity
@Table(name = "voip_historyCalls")
public class VoipHistoryCall extends VoipCurrentCall implements Serializable {
... 
```

如您所见，第二个表没有其他字段，但它只是第一个表的扩展。当我尝试将 VoipCurrentCall 转换为 VoipHistoryCall 时，我得到 java.lang.ClassCastException：VoipCurrentCall 无法转换为 VoipHistoryCall。

你有什么建议吗？我可能错过了一些东西。提前感谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:39:22.833

这就是 Java 的设计方式；你不能把一个超类转换成一个子类，反之亦然。它与 JPA 没有任何关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:40:06.640

好吧，如果您尝试投射的对象***不是***历史调用，那么投射肯定会失败。JPA 实体仍然绑定到与常规 Java 对象相同的转换规则。一个例子：

```
Object obj = new Object();
String str = (String) obj; 
```

上面将在运行时产生一个类转换异常，如果一个字符串是一个对象，如果对象不是一个字符串都没有关系。就您的 JPA 设计而言，您实际上应该稍有不同。JPA 提供了一些标准方法来定义继承层次结构。在您的情况下，我建议使用`@MappedSuperclass`. 像这样的东西：

```
@MappedSuperclass
public abstract class BaseVoipCurrentCall implements Serializable {

    @Id
    private CompositeID id;

    private Timestamp startTime;
    private Timestamp endTime;
    private String calledNumber;
    private String callingNumber;    
    private Person contact;
    private CallSource source;
    private CallStatus status;
    private CallType type;
    private CallStage stage;

    // Constructors, getters/setters
}

@Entity
@Table(name = "voip_currentCalls")
public class VoipCurrentCall extends BaseVoipCurrentCall {
    // Voip current call specific attributes and logic
}

@Entity
@Table(name = "voip_historyCalls")
public class VoipHistoryCall extends BaseVoipCurrentCall {
    // Voip history call specific attributes and logic
} 
```

# eclipse - Apache tomcat 服务器错误

> ID：15475849
> 
> 赞同：0
> 
> 时间：2013-03-18T11:35:20.070
> 
> 标签：eclipse, web-services, tomcat, axis2

今天我的 avast 更新了我的 java，现在我不能用我的 web 服务做任何事情。localhost:9999 正在显示图片，但是如果我单击服务，则会出现此错误：

类型异常报告

```
>     message Servlet.init() for servlet AxisServlet threw exception
>     
>     description The server encountered an internal error that prevented it from fulfilling this request.
>     
>     exception
>     
>     javax.servlet.ServletException: Servlet.init() for servlet AxisServlet threw exception
>       org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
>       org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
>       org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
>       org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
>       org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
>       org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
>       org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
>       java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
>       java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
>       java.lang.Thread.run(Unknown Source)
>     root cause
>     
>     java.lang.NoClassDefFoundError: Could not initialize class org.apache.axis2.util.JavaUtils
>       org.apache.axis2.deployment.DeploymentEngine.setDeploymentFeatures(DeploymentEngine.java:1061)
>       org.apache.axis2.deployment.DeploymentEngine.loadRepository(DeploymentEngine.java:154)
>       org.apache.axis2.deployment.WarBasedAxisConfigurator.getAxisConfiguration(WarBasedAxisConfigurator.java:228)
>       org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:64)
>       org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
>       org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
>       org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
>       org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
>       org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
>       org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
>       org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
>       org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
>       org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
>       java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
>       java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
>       java.lang.Thread.run(Unknown Source) 
```

请帮助我，因为我被困在这里！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:46:00.387

我有解决办法。

```
Reinstall the Java 
```

# c# - SetCurrentValue myLabel.BackgroundProperty 不破坏绑定

> ID：15475851
> 
> 赞同：3
> 
> 时间：2013-03-18T11:35:33.230
> 
> 标签：c#, wpf, xaml, binding

我有三个文本框和一个标签。使用 Multiconverter 将标签绑定到文本框中的文本。

XAML：

```
<Label Name="lbl" Content="Label" HorizontalAlignment="Left" Margin="336,128,0,0" VerticalAlignment="Top" Height="57" Width="93">
        <Label.Background>
            <MultiBinding Converter="{StaticResource converta}">
                <Binding ElementName="R" Path="Text" Mode="TwoWay" />
                <Binding ElementName="G" Path="Text" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" />
                <Binding ElementName="B" Path="Text" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" />
            </MultiBinding>

        </Label.Background>
    </Label> 
    <TextBox Name="R" HorizontalAlignment="Left" Height="23" Margin="250,214,0,0" TextWrapping="Wrap" Text="255" VerticalAlignment="Top" Width="120"/>
    <TextBox Name="B" HorizontalAlignment="Left" Height="23" Margin="271,242,0,0" TextWrapping="Wrap" Text="255" VerticalAlignment="Top" Width="120"/>
    <TextBox Name="G" HorizontalAlignment="Left" Height="23" Margin="155,275,0,0" TextWrapping="Wrap" Text="255" VerticalAlignment="Top" Width="120"/> 
```

转换器

```
class converter : IMultiValueConverter
{

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {

            return new System.Windows.Media.SolidColorBrush(Color.FromRgb(System.Convert.ToByte((values[0] as string)), System.Convert.ToByte((values[1] as string)), System.Convert.ToByte((values[2] as string))));

    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        byte R = (value as System.Windows.Media.Color?).Value.R;
        byte G = (value as System.Windows.Media.Color?).Value.G;
        byte B = (value as System.Windows.Media.Color?).Value.B;
        return new string[] {System.Convert.ToString(R),System.Convert.ToString(G),System.Convert.ToString(B)};

    }
    } 
```

（显然，在现实世界中我会添加验证和类型检查）。

现在我想添加一个按钮来设置标签背景，像这样简单：

```
 lbl.Background= new SolidColorBrush(Color.FromRgb(
System.Convert.ToByte(121), 
System.Convert.ToByte(43), 
System.Convert.ToByte(15))); 
```

显然，它打破了绑定。所以我尝试：

```
 SetCurrentValue(lbl.BackgroundProperty, 
new SolidColorBrush(
Color.FromRgb(System.Convert.ToByte(121), 
System.Convert.ToByte(43), 
System.Convert.ToByte(15)))); 
```

但是 VS 抱怨说

> 无法使用实例引用访问成员“System.Windows.Controls.Control.BackgroundProperty”；改为使用类型名称来限定它

如何在不破坏绑定的情况下在代码中设置标签背景的值？

注意：这是 WPF，.Net 4.5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T12:19:41.917

该错误是自发的，它告诉你 lbl.BackgroundProperty 不能这样设置。以下是执行此操作的正确方法。

```
 lbl.SetCurrentValue(BackgroundProperty,
                                   new SolidColorBrush(Color.FromRgb(System.Convert.ToByte(121),
                                                                     System.Convert.ToByte(43),
                                                                     System.Convert.ToByte(15)))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:58:05.307

我可能会将 RGB 值作为依赖属性，您可以根据需要从后面的代码中更改它们。

**结果**

![在此处输入图像描述](../Images/b86ff1808ec045b5812641e1c14a8672.png)

**XAML**

```
<Window x:Class="test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:test"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid>
            <Grid.Background>
                <MultiBinding Converter="{local:RGBtoBrushConverter}">
                    <MultiBinding.Bindings>
                        <Binding Path="R"/>
                        <Binding Path="G"/>
                        <Binding Path="B"/>
                    </MultiBinding.Bindings>
                </MultiBinding>
            </Grid.Background>
        </Grid>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <TextBox Grid.Column="0" Text="{Binding R, UpdateSourceTrigger=PropertyChanged}"/>
            <TextBox Grid.Column="1" Text="{Binding G, UpdateSourceTrigger=PropertyChanged}"/>
            <TextBox Grid.Column="2" Text="{Binding B, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>
    </Grid>
</Window> 
```

**代码**

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace test
{

    public class RGBtoBrushConverter : MarkupExtension, IMultiValueConverter
    {
        static RGBtoBrushConverter converter;
        public RGBtoBrushConverter() { }
        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            if (converter == null) converter = new RGBtoBrushConverter();
            return converter;
        }
        public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
        {
            try
            {
                byte R = System.Convert.ToByte(values[0]);
                byte G = System.Convert.ToByte(values[1]);
                byte B = System.Convert.ToByte(values[2]);
                return new System.Windows.Media.SolidColorBrush(Color.FromArgb(byte.MaxValue, R, G, B));
            }
            catch { return Brushes.Purple; }
        }
        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }

    public partial class MainWindow : Window
    {
        public int R
        {
            get { return (int)GetValue(RProperty); }
            set { SetValue(RProperty, value); }
        }
        public static readonly DependencyProperty RProperty = DependencyProperty.Register("R", typeof(int), typeof(MainWindow), new PropertyMetadata(0));

        public int G
        {
            get { return (int)GetValue(GProperty); }
            set { SetValue(GProperty, value); }
        }
        public static readonly DependencyProperty GProperty = DependencyProperty.Register("G", typeof(int), typeof(MainWindow), new PropertyMetadata(0));
        public int B
        {
            get { return (int)GetValue(BProperty); }
            set { SetValue(BProperty, value); }
        }
        public static readonly DependencyProperty BProperty = DependencyProperty.Register("B", typeof(int), typeof(MainWindow), new PropertyMetadata(0));

        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

# java - 我可以以编程方式确定弹簧豆是否不是单例的吗？

> ID：15475852
> 
> 赞同：8
> 
> 时间：2013-03-18T11:35:35.567
> 
> 标签：java, spring, scope

当我得到一个spring bean（通过getBean（））时，有什么方法可以从java代码中验证bean是用scope=prototype定义的吗？

弹簧配置：

```
<bean class="foo.Bar" scope="prototype" /> 
```

爪哇:sc

```
MyBean bean = springApplicationContext.getBean("MyBean"); 
```

我可以将它实例化两次并比较对象，但我想避免不必要的对象创建。与此答案相反的东西可以解决问题：[https ://stackoverflow.com/a/9125610/156477](https://stackoverflow.com/a/9125610/156477)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T11:41:33.643

你有一个 API`boolean isPrototype(String name)`可以`ApplicationContext`检查它。

# java - 如何从 textview 中选择单词，然后在运行时更改该特定单词的字体

> ID：15475853
> 
> 赞同：1
> 
> 时间：2013-03-18T11:35:40.083
> 
> 标签：java, android

我正在开发一个 android 应用程序，用户可以在其中选择图片，选择图片后，用户可以根据需要在其上添加文本。我将这些 textView 添加为“我正在获取一个相对视图，然后添加一个 textView 作为此相对视图的子视图”。相对视图确实包含用于缩放和旋转图像的触摸和捏合缩放侦听器。现在新的要求是用户可以从 textview 中选择 select text 并且可以更改选择的 word 字体和颜色。我怎样才能做到这一点？

请帮忙。

# ruby - 在 Ruby-watir 中通过 Excel 工作表传递值

> ID：15475855
> 
> 赞同：1
> 
> 时间：2013-03-18T11:35:43.190
> 
> 标签：ruby

```
 require 'watir-webdriver'
 require 'win32ole'
 require 'roo'

 b= Watir::Browser.new(:firefox)
 b.goto('https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=http://mail.google.com/mail/&scc=1&ltmpl=default&ltmplcache=2')
 xl = WIN32OLE.new('excel.application')
 wrkbook= xl.Workbooks.Open("C:\\Excel\\mondial1.xlsx")

 wrksheet= wrkbook.Worksheets(1)
 wrksheet.Select

 username1= wrksheet.Range("a1").Value
 password1= wrksheet.Range("b1").Value

 b.text_field(:id, "Email").set("username1")
 b.text_field(:id, "Passwd").set("password1")
 b.button(:id, "signIn").click

 xl.Quit 
```

我只想打开一个 Excel 表并从那里获取值，我需要将其作为输入提供给 gmail 中的文本字段。

**而不是从 Excel 表中获取值****它直接设置为“username1”* ***我需要通过 Excel 传递值** 请提供您的建议，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:42:15.353

**问题**

在行

```
 b.text_field(:id, "Email").set("username1") 
```

您正在将字符串“username1”传递给该`set`方法。这就是输入文本字段的值的原因。

**解决方案**

您真正想要做的是传递变量的值`username1`。这是通过使其成为`set`方法的参数来完成的。

```
b.text_field(:id, "Email").set(username1) 
```

请注意，周围没有引号`username1`。`password1`变量也需要类似的。

# python - 如何定义正确的 XPath 位置？

> ID：15475858
> 
> 赞同：3
> 
> 时间：2013-03-18T11:35:47.580
> 
> 标签：python, xml, openerp

我将 ssnid 和 sinid 设置为不可见字段。但两者仍然显示在我的视图中。似乎 XPath 位置存在问题。！

任何人都可以帮我整理一下吗？

```
<?xml version="1.0"?>
<openerp>
    <data>
        <!-- 1st part of the sim_view start -->
        <record model="ir.ui.view" id="madulsima_plucker_form">
            <field name="name">madulsima.plucker.form</field>
            <field name="model">madulsima.plucker</field>
            <field name="inherit_id" ref="hr.view_employee_form" />
            <field name="type">form</field>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="Madulsima Plucker Fields">
                        <field name="reg_no" />
                        <field name="worker_name" />

                        <xpath expr="/form/notebook/page/group/field[@name='ssnid']"
                            position="attributes">
                            <attribute name="invisible">True</attribute>
                        </xpath>
                        <xpath expr="/form/notebook/page/group/field[@name='sinid']"
                            position="attributes">
                            <attribute name="invisible">True</attribute>
                        </xpath>

                    </page>
                </notebook>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_plucker_registration">
            <field name="name">Plucker Registration</field>
            <field name="res_model">madulsima.plucker</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
        </record>

        <menuitem id="menu_madulsima_plucker" name="Madulsima/Checkroll" />

        <menuitem id="menu_madulsima_plucker_registration" name="Plucker Registration"
            parent="menu_madulsima_plucker" action="action_plucker_registration" />
    </data>
</openerp> 
```

我在 view.xml 中发布了我的整个代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:54:26.913

[继承视图](http://doc.openerp.com/v6.1/developer/03_modules_3.html#inheritance-in-views)`arch`字段中的根元素是*定位器*，它们应该标识父视图中的元素，然后可以根据特殊属性对其执行操作。*`position`*

 *定位器必须具有`position`属性，并且可以是：

*   具有包含有效 [XPath](http://www.w3.org/TR/xpath/#section-Introduction)`<xpath>`表达式的属性的元素，用于在父视图中定位单个元素；`expr`
*   来自父视图的任何有效视图元素；

继承的视图可以有多个根元素，以便对父视图执行多次更改。

您的示例不正确，因为您嵌套了多个*定位器*：您的`xpath`元素在`page`元素内。请注意，3 个元素`position`在您的继承视图中有一个属性：`notebook`元素和 2 个`xpath`元素。它们都需要位于视图架构的顶部，例如：

```
 <field name="arch" type="xml">
            <notebook position="inside">
               <!-- ... elements you want to add inside the parent notebook -->
            </notebook>
            <xpath expr="/form/notebook/page/group/field[@name='ssnid']"
                   position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>
            <xpath expr="/form/notebook/page/group/field[@name='sinid']"
                   position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>
        </field> 
```

PS：如果您不熟悉[XPath](http://www.w3.org/TR/xpath/#section-Introduction)，您应该在网上查找快速参考或备忘单，例如[这个](https://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/)。*

# visual-studio-2010 - 使用VSPackage基于行号突出显示Visual Studio的代码窗口

> ID：15475864
> 
> 赞同：0
> 
> 时间：2013-03-18T11:36:18.053
> 
> 标签：visual-studio-2010, visual-studio, c#-4.0, vspackage, visual-studio-sdk

我正在构建一个 VSpackage 扩展来创建“VisualStudio 工具窗口”。我在工具窗口中有一个网格，由数字组成。如果用户选择网格的特定行。应该突出显示该特定代码行。

为了更清楚，假设我的网格包含：

第 1 - 10 行，第 2 - 15 行，第 3 - 14 行，

如果用户选择第 1 行，则代码窗口中的第 10 行应突出显示。使用 VisualStudio 包是否可以使用此功能。我有一种强烈的感觉，这是可能的。因为大多数搜索结果都是这样工作的。

非常感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:08:10.093

我终于根据大量谷歌搜索找到了我的帖子的答案。希望这对其他人有帮助。

您需要使用“TextSelection”类来突出显示上面的代码行。

```
 foreach (CodeElement codeElement in projectItem.FileCodeModel.CodeElements)// search for the function to be opened
        {
            // get the namespace elements
            if (codeElement.Kind == vsCMElement.vsCMElementNamespace)
            {
                foreach (CodeElement namespaceElement in codeElement.Children)
                {
                    // get the class elements
                    if (namespaceElement.Kind == vsCMElement.vsCMElementClass || namespaceElement.Kind == vsCMElement.vsCMElementInterface)
                    {
                        foreach (CodeElement classElement in namespaceElement.Children)
                        {
                            try
                            {
                                // get the function elements to highlight methods in code window
                                if (classElement.Kind == vsCMElement.vsCMElementFunction)
                                {
                                    if (!string.IsNullOrEmpty(highlightString))
                                    {
                                        if (classElement.Name.Equals(highlightString, StringComparison.Ordinal))
                                        {
                                            classElement.StartPoint.TryToShow(vsPaneShowHow.vsPaneShowTop, null);

                        classElement.StartPoint.TryToShow(vsPaneShowHow.vsPaneShowTop, null);

                            // get the text of the document
                         EnvDTE.TextSelection textSelection = window.Document.Selection as EnvDTE.TextSelection;

                            // now set the cursor to the beginning of the function
                            textSelection.MoveToPoint(classElement.StartPoint);
                            textSelection.SelectLine();

                                        }
                                    }
                                }
                            }
                            catch
                            {
                            }
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T07:44:45.937

您也可以使用更简单的解决方案；见下文

```
 int lineNo = 3;
  if (!isProjectItemOpen)
  {
       Window win = projectItem.Open();
       win.Visible = true;
       Document doc = win.Document;
       doc.Activate();
       var ts = dte.ActiveDocument.Selection;
       ts.GotoLine(lineNo, true);
  } 
```

# r - ARMA GARCH 模型的预测误差

> ID：15475869
> 
> 赞同：3
> 
> 时间：2013-03-18T11:36:30.310
> 
> 标签：r

我有大约五年期间的一年利率数据。我想为这个利率创建一个模型，我得出的结论是带有 GARCH(1,1) 的 ARMA(3,2) 是合适的。因此，我使用下面的代码来获得我的估计。

```
> stibor1ydarmagarch=garchFit(formula=~arma(3,2)+garch(1,1),
                          data=stibor1yd, 
                          cond.dist="std", 
                          trace=FALSE) 
```

这很好用，我得到了很好的估计。但是，在进行预测时，我遇到了错误。有人知道我为什么会收到错误以及如何解决它吗？

```
> predict(stibor1ydarmagarch, n.ahead=10)
Error in a_vec[(i - 1):(i - u2)] : only 0's may be mixed with negative subscripts 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:00:09.887

这个问题似乎与不包含答案的旧帖子重复：[R error when using predict() function with class = fGarch](https://stackoverflow.com/questions/10578932/r-error-when-using-predict-function-with-class-fgarch)

该错误源于`(i - 1)`or`(i - u2)`变为负数的情况，因此索引类似于 -1:2 ，这是不允许的。

通过检查拟合对象的预测方法后`getMethod("predict","fGARCH")`，看起来错误发生在此处（省略了无关部分）：

```
 a_vec <- rep(0, (n.ahead))      
    u2 <- length(ar)      
    a_vec[1] = ar[1] + ma[1]       
    if ((n.ahead - 1) > 1) {
        for (i in 2:(n.ahead - 1)) {
          a_vec[i] <- ar[1:min(u2, i - 1)] * a_vec[(i - 1):(i - u2)]             
        }
    } 
```

所以`i`总是大于 1，所以发生错误是因为

`(i - u2) < 0 <==> i < u2 <==> i < length(ar)`

这有道理吗？对我来说不是，因为看起来如果您的模型的 ar 部分大于 2，这总是会产生错误。

代码有点奇怪，因为`a_vec[i]`它是标量和

`ar[1:min(u2, i - 1)] * a_vec[(i - 1):(i - u2)] + ...`可以是长度大于 1 的向量。

编辑：

预测函数中存在错误，或者存在未记录的限制，可以预测哪种模型，因为即使是`fGarch`手册中的示例，如果稍作修改也会出错：

```
 set.seed(123)
   fit = garchFit(~arma(2,0)+garch(1,1), data = garchSim(), trace = FALSE)
   predict(fit, n.ahead = 4)
   meanForecast   meanError standardDeviation
1 -7.512452e-04 0.004161189       0.004161189
2 -1.107497e-03 0.003958535       0.003878321
3  2.617933e-04 0.003782362       0.003665391
4  6.264252e-05 0.003616971       0.003507209
Warning message:
In a_vec[i] <- ar[1:min(u2, i - 1)] * a_vec[(i - 1):(i - u2)] +  :
  number of items to replace is not a multiple of replacement length 
```

根据[fGarch 软件包](http://cran.r-project.org/web/packages/fGarch/ChangeLog)的变更日志，这个问题似乎在几年前得到了纠正，但显然它已经重新浮出水面，或者从未正确修复：

```
2009-11-05  chalabi

    * R/methods-predict.R: small changes in predict,fGARCH-method to
      correct its output when n.ahead=1 since addition of conditional
      errors. 
```

我建议你联系包的维护者。

# iphone - 在 iOS6 中的地图视图上保持覆盖线

> ID：15475872
> 
> 赞同：0
> 
> 时间：2013-03-18T11:36:39.903
> 
> 标签：iphone, path, mkmapview

我有地图视图，我喜欢使用覆盖方法画线，当我按下按钮时，我添加了两个位置纬度和经度以在它们之间画线，但是当我第二次按下我提供的新坐标对和地图上的新线时但以前的覆盖路径消失了，但我也需要同一张地图上的上一条路径

这是我的代码。

```
- (IBAction)refreshMapMethod:(id)sender

{

 int kk=[[NSUserDefaults standardUserDefaults]integerForKey:@"ham"];

    if (kk==1)
    {
         CLLocationCoordinate2D coordinateArray[2];
        coordinateArray[0] = CLLocationCoordinate2DMake(12.915181,+77.626055);
        coordinateArray[1] = CLLocationCoordinate2DMake(12.892156, +77.582188);
        self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
        [self.myMapView setVisibleMapRect:[self.routeLine boundingMapRect]];

        [self.myMapView addOverlay:self.routeLine];
        [[NSUserDefaults standardUserDefaults]setInteger:2 forKey:@"ham" ];

    }

    if (kk==2)
    {
        CLLocationCoordinate2D coordinateArray[2];
        coordinateArray[0] = CLLocationCoordinate2DMake(12.892156,+77.426055);
        coordinateArray[1] = CLLocationCoordinate2DMake(12.892156, +77.582188);
        self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
        [self.myMapView setVisibleMapRect:[self.routeLine boundingMapRect]];

        [self.myMapView addOverlay:self.routeLine];
        [[NSUserDefaults standardUserDefaults]setInteger:3 forKey:@"ham" ];

    }
    if (kk==3)
    {
        CLLocationCoordinate2D coordinateArray[2];
        coordinateArray[0] = CLLocationCoordinate2DMake(12.892156, +77.382188);
        coordinateArray[1] = CLLocationCoordinate2DMake(12.892156, +77.282188);
        self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
        [self.myMapView setVisibleMapRect:[self.routeLine boundingMapRect]];

        [self.myMapView addOverlay:self.routeLine];
        [[NSUserDefaults standardUserDefaults]setInteger:3 forKey:@"ham" ];

    }

    CLLocationCoordinate2D zoomLocation;
    zoomLocation.latitude= 12.915181;
    zoomLocation.longitude=77.626055;

    MKCoordinateRegion viewRegion=MKCoordinateRegionMakeWithDistance(zoomLocation, 3*METERS_PER_MILE, 3*METERS_PER_MILE);

    [self.myMapView setRegion:viewRegion animated:YES];

 [[NSUserDefaults standardUserDefaults]setInteger:2 forKey:@"change" ];

} 
```

调用覆盖方法..

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay

{

    if(overlay == self.routeLine)
    {
        if(nil == self.routeLineView)
        {
          self.routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];

            self.routeLineView.fillColor = [UIColor redColor];
            self.routeLineView.strokeColor = [UIColor redColor];
            self.routeLineView.lineWidth = 5;

        }

        return self.routeLineView;
    }

    return nil;
} 
```

请以相同的方式或其他任何替代方式为我提供解决方案。

比你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:47:18.577

这是因为您只允许该`viewForOverlay`函数返回视图，`self.routeline`而您只有其中一个。其他所有调用都`viewForOverlay`将返回 nil，因此不会被绘制。您需要做的是绘制所有叠加层。

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay
{
    MKPolylineView* routeLineView = [[MKPolylineView alloc] initWithPolyline:(MKPolyLine)overlay];
    routeLineView.fillColor = [UIColor redColor];
    routeLineView.strokeColor = [UIColor redColor];
    routeLineView.lineWidth = 5;

    return routeLineView;
} 
```

您可能需要做更多的事情，例如首先检查叠加层实际上是一条折线，但这应该足以让您继续前进。

# maven - Web 应用程序和 Java 应用程序中的 Maven 依赖项

> ID：15475874
> 
> 赞同：0
> 
> 时间：2013-03-18T11:36:53.323
> 
> 标签：maven, connection-pooling, pom.xml, servlet-3.0

我正在尝试使用 JNDI、tomcat、Maven 等在远程服务器（不是数据库服务器）上进行连接池。具体来说，我有两个 maven 项目 1）Web 应用程序 2）非 maven 项目中的 Java 应用程序并尝试访问这些方法来自 Web 应用程序的 Java 应用程序。这是两个项目的POM：

Java 应用程序的 POM

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>1.6</version>
    </dependency>
    <dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.13</version>
</dependency>  
  </dependencies> 
```

WebApp 的 POM

```
<dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
    <scope>provided</scope>
</dependency>

    <dependency>
        <groupId>de.hello.simpleJavaApp</groupId>
        <artifactId>SimpleJavaApp</artifactId>
        <version>1.0-SNAPSHOT</version>
        <!-- <scope>compile</scope> -->
    </dependency>
        <dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.13</version>
</dependency>          
  </dependencies>
  <build>
    <finalName>CPWebApp</finalName>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-war-plugin</artifactId>
          <version>2.1-alpha-2</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.3.2</version>
        </plugin>
      </plugins>
    </pluginManagement>
  </build> 
```

Web App的web.xml：

```
 <resource-env-ref>
    <description>
        Connection pooling on HSM.
    </description>
    <resource-env-ref-name>bean/CXIResourceLocator</resource-env-ref-name>
    <resource-env-ref-type>
        de.hello.CPWebApp.CXIBean
    </resource-env-ref-type>
</resource-env-ref> 
```

现在的问题是我无法访问 Java Application(java.lang.ClassNotFoundException) 的方法，因为我在 Web 应用程序的 POM 文件中添加了依赖项。在编译这两个项目时我没有收到任何错误。

等待你的答复。

# export-to-excel - 将数据透视表导出到 Excel 时出现错误：缺少标签行（带有不需要的标签 INSERT）

> ID：15475885
> 
> 赞同：3
> 
> 时间：2013-03-18T11:37:32.687
> 
> 标签：export-to-excel, pivot-table, office-web-components

我正在构建一个 WPF 应用程序，它使用 OWC 数据透视表来显示一些数据。当我单击内置按钮将数据透视表导出到 excel 时，它会写入日志文件并显示以下错误消息：

```
XML ERROR in PivotTable
REASON: Missing Tag
ACTION: Aborting current XML group
FILE:   C:\Users\MY_NAME\AppData\Local\Temp\PivotTable71147_cachedata.xml
GROUP:  PivotCache
TAG:    row 
```

当我打开 PivotTable71147_cachedata.xml 文件时，它看起来像这样：

```
<xml xmlns:s='uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882'
xmlns:dt='uuid:C2F41010-65B3-11d1-A29F-00AA00C14882'
xmlns:rs='urn:schemas-microsoft-com:rowset'
xmlns:z='#RowsetSchema'>
    <s:Schema id='RowsetSchema'>
    <s:ElementType name='row' content='eltOnly' rs:updatable='true'>
    <s:AttributeType name='RecID' rs:number='1' rs:write='true'>
        <s:datatype dt:type='int' dt:maxLength='4' rs:precision='0' rs:fixedlength='true' rs:maybenull='false'/>
    </s:AttributeType>
            <s:extends type='rs:rowbase'/>
    </s:ElementType>
    </s:Schema>
    <rs:data>
    <rs:insert>
    <z:row RecID='1'/>
    <z:row RecID='2'/>
        </rs:insert>
    </rs:data>
</xml> 
```

我不是数据透视表格式方面的专家，但在此示例中，确实有两行要插入，其中包含所有行数据（RecID 是唯一的列元素）。我与一些在线 .xml 示例以及 rs:data [schema](http://schemas.stylusstudio.com/msoffice2003/nfab89404/element_data.html)的架构进行了比较，似乎该元素不应该存在，即应该直接将多个元素作为子元素。但为什么我有这个 rs:insert ？

更新：

在此示例中，我使用的是 OWC11。我应该尝试 OWC10（还是因为某些版本不匹配）？因为在我们的一个 MS Access 应用程序中，我们使用的是 OWC10，并且导出到 Excel 功能工作正常。但是我在 .NET 中使用 OWC10 时遇到了一些问题。

# ruby-on-rails - 设计确认链接缺少域

> ID：15475886
> 
> 赞同：4
> 
> 时间：2013-03-18T11:37:34.663
> 
> 标签：ruby-on-rails, devise-confirmable

设计 Confirmation_url 只产生一个没有域的相对 url，例如：

```
http://users/confirmation?confirmation_token=... 
```

我试着改变

```
confirmation_url(@resources, :confirmation_token => @resource.confirmation_token) 
```

到

```
confirmation_url(:confirmation_token => @resource.confirmation_token) 
```

但它会产生相同的网址。我升级到设计 2.2.3 但结果相同。导轨 3.1.4

**更新：** 我已经在我的 production.rb 中设置：

```
 config.action_mailer.default_url_options = { :host => 'mysubdomain.mysite.com' } 
```

我尝试设置

```
 before_filter set_actionmailer_host

    def set_actionmailer_host
      ActionMailer::Base.default_url_options[:host] = request.host_with_port
    end 
```

在应用程序控制器中无济于事（[https://github.com/plataformatec/devise/issues/1567](https://github.com/plataformatec/devise/issues/1567)）

**更新：** 这发生在开发和生产中。

**更新** 我不明白为什么 Devise 不使用 app/views/devise/mailer/confirmation_instructions.html.haml 中的模板如果我可以编辑，我可以手动附加主机：`'http://mysite.com/' + confirmation_url(...` 我尝试设置范围视图设置，但它没有'没有任何效果这是一场灾难，用户无法确认他们的注册:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T11:43:10.700

您可能错过了将默认 url 主机添加到环境配置文件中。当您运行`rails g devise:install`命令时，您通常会收到这些指令。

```
# config/environments/development.rb

# Default actiomailer url host (required by devise) 
config.action_mailer.default_url_options = { host: 'myapp.dev' } 
```

您的所有环境都需要此设置。

```
# config/environments/production.rb

# Default actiomailer url host (required by devise) 
config.action_mailer.default_url_options = { host: 'myproductionapp.com' } 
```

# macos - LLVM：OSX 上的优化加载失败

> ID：15475889
> 
> 赞同：5
> 
> 时间：2013-03-18T11:37:42.500
> 
> 标签：macos, llvm, clang

我正在尝试运行这个[LLVM 检测项目](https://github.com/npcardoso/llvminstrument)，但我只能在 Linux 下加载检测优化。

我已经在 OSX 上编译并安装了 LLVM 3.2 和 Clang 3.2，并且在 Linux 中具有相同的版本。

当我尝试在 Linux 中运行时：

```
command opt -load ./obj/llvminstrument/libllvminstrument.so -help |grep instrum
    -insert-edge-profiling                     - Insert instrumentation for edge profiling
    -insert-gcov-profiling                     - Insert instrumentation for GCOV profiling
    -insert-optimal-edge-profiling             - Insert optimal instrumentation for edge profiling
    -insert-path-profiling                     - Insert instrumentation for Ball-Larus path profiling
    -instrument_block                          - Injects block instrumentation instructions
    -instrument_function                       - Injects function instrumentation instructions
    -instrument_prepare                        - Prepares instrumentation instructions 
```

相同的命令，在 OSX 中：

```
command opt -load ./obj/llvminstrument/libllvminstrument.dylib -help |grep instrum    │········
opt: CommandLine Error: Argument 'track-memory' defined more than once!                                                  │········
opt: CommandLine Error: Argument 'debug-buffer-size' defined more than once!                                             │········
opt: CommandLine Error: Argument 'print-all-options' defined more than once!                                             │········
opt: CommandLine Error: Argument 'print-options' defined more than once!                                                 │········
opt: CommandLine Error: Argument 'print-after-all' defined more than once!                                               │········
opt: CommandLine Error: Argument 'print-before-all' defined more than once!                                              │········
opt: CommandLine Error: Argument 'track-memory' defined more than once!                                                  │········
opt: CommandLine Error: Argument 'debug-buffer-size' defined more than once!                                             │········
opt: CommandLine Error: Argument 'print-all-options' defined more than once!                                             │········
opt: CommandLine Error: Argument 'print-options' defined more than once!                                                 │········
opt: CommandLine Error: Argument 'print-after-all' defined more than once!                                               │········
opt: CommandLine Error: Argument 'print-before-all' defined more than once!                                              │········
    -insert-edge-profiling                     - Insert instrumentation for edge profiling                               │········
    -insert-gcov-profiling                     - Insert instrumentation for GCOV profiling                               │········
    -insert-optimal-edge-profiling             - Insert optimal instrumentation for edge profiling                       │········
    -insert-path-profiling                     - Insert instrumentation for Ball-Larus path profiling 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T07:24:33.230

我不知道如何解决这个问题，但问题是您将几个核心 LLVM 库静态链接到检测 dylib 中，这种方式与 opt 驱动程序“dlopen”不兼容。因此，当您打开它时，您会得到各种命令行参数的重复全局变量。这可能与 LLVM 几乎没有关系，而更多地与 OS X 上使用的特定构建过程有关，对于符号和/或共享与静态链接的可见性有不同的默认值。

# c - 编辑窗口在一定限制后停止显示文本。（视窗）

> ID：15475892
> 
> 赞同：0
> 
> 时间：2013-03-18T11:37:47.040
> 
> 标签：c, windows, winapi, edit, autoscroll

我开发了一个 UDP 客户端服务器应用程序，其中服务器连续地从 40 个不同的客户端读取数据并将其显示在编辑窗口上。我也在 mmy 编辑窗口上启用了自动滚动。我的代码工作正常，服务器也在不断接收数据，但是在编辑窗口上显示一定数量的数据后，服务器停止显示数据。显然，编辑窗口的最大容量似乎已满，但我不确定为什么会这样。任何人都可以指导问题可能是什么？编辑窗口可以显示数据是否有任何限制？等待帮助:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:23:13.250

标准编辑控件默认最大限制为 32767 个字符。根据需要使用该[`EM_LIMITTEXT`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761607.aspx)消息设置不同的最大限制。

# php - PHP中如何将字符串添加到整数

> ID：15475899
> 
> 赞同：1
> 
> 时间：2013-03-18T11:38:00.480
> 
> 标签：php, integer

今天我很想知道，如果字符串包含第一个字母有整数，你可以将该值添加到另一个整数变量中。

```
$a = 20;
$b = "5doller"; 
$a+=$b;
echo $a; 
```

任何人都可以解释这是如何发生的，如果我有像“dollar5”这样的字符串，它不会添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:39:26.807

PHP 不是强类型的。
因为您的字符串的第一个字符是一个整数，并且您使用 + 运算符，它将 5dollar 解释为 int 并返回 25 个
示例：[http ://en.wikipedia.org/wiki/Strong_typing#Example](http://en.wikipedia.org/wiki/Strong_typing#Example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:59:48.093

PHP 有一个类型转换的理念，它会根据上下文在运行时自动转换数据的类型。这可能有它的优点和缺点，有人反对它，也有人认为它可以（就像生活中的几乎所有事情一样）。

有关其行为的更多信息，请查看 php 文档：[http ://www.php.net/manual/en/language.types.type-juggling.php](http://www.php.net/manual/en/language.types.type-juggling.php)

如果您使用算术运算符“+”（检测第一个字符“5”），它将尝试将其`string`视为一种`integer`轻松的生活，但如果操作不当会导致奇怪的行为。

这并不意味着它没有类型， $b 实际上是 a `string`，只是它尝试在运行时转换它，但 $b 仍将保留为 a `string`。

要检查这一点和/或防止奇怪的行为，您可以使用 php 本机函数来检查类型：

```
$a = 20;
$b = "5doller";
if(is_integer($b)){
    $a+=$b;
} elseif (is_string($b)) {
    $a.=$b;
}
echo $a; 
```

Or you can use `gettype()` which will return the variable type, and do a switch case or whatever you like to it. But in my opinion it would be over-coding, just use your common sense and be careful and normally it will be ok.

# sas - 在SAS中，LOWCASE和KLOWCASE有什么区别？

> ID：15475902
> 
> 赞同：2
> 
> 时间：2013-03-18T11:38:11.753
> 
> 标签：sas

SAS 文档将 LOWCASE 归类为“I18N 级别 2”，这意味着它可以用于单字节、双字节或多字节数据。因此，我希望它可以正确地小写一个 UTF8 字符串（假设我的会话编码是 UTF8），即使它包含多字节字符序列，并且它不会通过单独处理每个字节来破坏它。

鉴于此，KLOWCASE 有什么用？其他 'K' 函数都为不能处理多字节字符串的普通字符串函数提供等效项，例如 KSUBSTR、KREVERSE 等。KUPCASE 和 KLOWCASE 似乎不同，因为它们似乎与非“K”对应物没有什么不同。也许将 LOWCASE 分类为 I18N 级别 2 是不正确的，并且 LOWCASE 完全不知道多字节序列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:31:18.140

我无法确认 LOWCASE 与 DBCS 一起按预期工作，但我认为它很可能确实如此（鉴于此处指出：http: [//support.sas.com/documentation/cdl/en/nlsref/63072/HTML /default/viewer.htm#p1pca7vwjjwucin178l8qddjn0gi.htm](http://support.sas.com/documentation/cdl/en/nlsref/63072/HTML/default/viewer.htm#p1pca7vwjjwucin178l8qddjn0gi.htm) )

我认为它在早期版本的 SAS 中不能与 DBCS 一起正常工作。例如，9.1.3 的兼容性要差得多，更不用说版本 8。由于 SAS 通常出于向后兼容的原因无限期地维护功能，这可能只是一个残留功能。

# xml - Groovy 解析 XML 并获取属性

> ID：15475904
> 
> 赞同：0
> 
> 时间：2013-03-18T11:38:26.693
> 
> 标签：xml, groovy

我有一个这样的xml：

```
<MMP>
<MERCHANT>
<RESPONSE>
<url>http://203.114.240.77/paynetz/epi/fts</url>
<param name="ttype"></param>
<param name="tempTxnId"></param>
</RESPONSE>
</MERCHANT>
</MMP> 
```

我怎样才能得到 和 的`ttype`值`tempTxnId`。我试过：

```
def details = new XmlParser().parseText(response)
details.MMP.RESPONSE //which returns the whole xml itself rather than its contents 
```

我在哪里犯了错误？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:53:06.960

给定：

```
def response = '''<MMP>
                 |  <MERCHANT>
                 |    <RESPONSE>
                 |      <url>http://203.114.240.77/paynetz/epi/fts</url>
                 |      <param name="ttype">a</param>
                 |      <param name="tempTxnId">b</param>
                 |    </RESPONSE>
                 |  </MERCHANT>
                 |</MMP>'''.stripMargin() 
```

然后：

```
def (ttype,tempTxn) = new XmlParser().parseText( response )
                                     .MERCHANT.RESPONSE.param.with { r ->
  [ r.find { it.@name == 'ttype' }?.text(),
    r.find { it.@name == 'tempTxnId' }?.text() ]
}

assert ttype == 'a'
assert tempTxn == 'b' 
```

# c# - 在 SQL 查询中使用 C# 变量

> ID：15475905
> 
> 赞同：4
> 
> 时间：2013-03-18T11:38:27.347
> 
> 标签：c#, asp.net, sql

我对此很陌生。可能有一些明显的东西我完全错过了，但是......

在进行 SQL 查询（使用 C# 的 ASP.NET）时，我可以得到：

```
var query = db.Query("SELECT * FROM pageinfo WHERE pageID = 1"); 
```

工作，但这个：

```
var pageID=1;
var query = db.Query("SELECT * FROM pageinfo WHERE pageID = @pageID"); 
```

才不是。

基本上，我要做的就是在查询中放置一个变量。是否有一些特殊的语法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T11:39:21.167

> 是否有一些特殊的语法可以做到这一点？

是的，使用[SQLParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)。

就像是：

```
SqlCommand cmd = new SqlCommand("SELECT * FROM pageinfo WHERE pageID = @pageID");
cmd.Parameters.AddWithValue("@pageID", 2); 
```

您当前的方法`db.Query`似乎是您自己的实现。您可以重载该方法以接收列表，`SqlParameter`然后将这些参数添加到您的命令中。这将阻止您进行[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:48:38.363

```
var pageID=1;
var query = db.Query("SELECT * FROM pageinfo WHERE pageID = '"+ PAGEid +"'); 
```

# c# - 从元素宿主更改元素

> ID：15475906
> 
> 赞同：0
> 
> 时间：2013-03-18T11:38:27.910
> 
> 标签：c#, wpf, binding, elementhost

我有`DataGrid`几行：

```
<DataGrid ItemsSource="{Binding mylist}" AutoGenerateColumns="False">
   <DataGrid.Columns>
        <DataGridTextColumn Width="*" Header="x" Binding="{Binding x,UpdateSourceTrigger=LostFocus}"></DataGridTextColumn>
        <DataGridTextColumn Width="*" Header="y" Binding="{Binding y,UpdateSourceTrigger=LostFocus}"></DataGridTextColumn>
   </DataGrid.Columns>
</DataGrid> 
```

`DataGrid`坐在`ElementHost`两个winfrom ：

在一个窗口中我想隐藏一行，怎么做？（优先于 XAML）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:04:46.637

最后我这样解决了：

我在`ViewModel`

```
 private bool _isVisible=true;

    public bool IsVisible
    {
        get { return _isVisible; }
        set
        {
            _isVisible= value;
            NotifyPropertyChanged("IsVisible");
        }
    } 
```

当我`wpf host control`在我的`winfrom`i中使用**init 时将此变量设置为 false**。

我使用转换器将列绑定`visibility`到此属性。

就这样。

# android - 使部分 textview 可点击（不是 url）

> ID：15475907
> 
> 赞同：7
> 
> 时间：2013-03-18T11:38:38.193
> 
> 标签：android, android-layout

我已经挣扎了一段时间了。在需要文本的活动上：单击注册，即表示我同意服务条款和隐私政策。“服务条款”和“隐私政策”部分需要可点击。我找到的解决方案制作了网址。但我不需要 url 来浏览条款，不需要启动条款活动或隐私活动。

然后我发现了这个： [https](https://stackoverflow.com/a/9076448/1387161) ://stackoverflow.com/a/9076448/1387161 但这里的问题是，它们没有对齐漂亮。我的意思是：如果有一个小分辨率的手机，我需要在textview2旁边设置textview1，在textview1下设置textview3，旁边是textview4。但是当我在平板电脑或大屏幕手机上使用该应用程序时，也许所有文本视图都可以彼此相邻，但布局与小屏幕手机上的布局保持一致=

文本视图 1 - 文本视图 2 文本视图 3 - 文本视图 4

一种可能的解决方案是 flowlayout，但我遇到了错误，似乎找不到一个好的教程（对于初学者） [如何使用 flowlayout（或任何自定义布局）](https://stackoverflow.com/questions/14960201/how-to-use-flowlayout-or-any-custom-layout)

任何想法表示赞赏！

谢谢，

比约恩

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-18T12:07:09.597

```
public class MainActivity extends Activity {
TextView _tv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    _tv = (TextView) findViewById( R.id.textView1 );
    String sentence = "this is [part 1 clickable] and [part 2 clickable] and [part 3 clickable]";

   _tv.setMovementMethod(LinkMovementMethod.getInstance());
   _tv.setText(addClickablePart(sentence), BufferType.SPANNABLE);
}
private SpannableStringBuilder addClickablePart(String str) {
    SpannableStringBuilder ssb = new SpannableStringBuilder(str);

    int idx1 = str.indexOf("[");
    int idx2 = 0;
    while (idx1 != -1) {
        idx2 = str.indexOf("]", idx1) + 1;

        final String clickString = str.substring(idx1, idx2);
        ssb.setSpan(new ClickableSpan() {

            @Override
            public void onClick(View widget) {
                Toast.makeText(MainActivity.this, clickString,
                        Toast.LENGTH_SHORT).show();
            }
        }, idx1, idx2, 0);
        idx1 = str.indexOf("[", idx2);
    }

    return ssb;
 }
} 
```

编辑

```
public class MainActivity extends Activity {
TextView _tv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    _tv = (TextView) findViewById( R.id.textView1 );

    SpannableString ss = new SpannableString("Android is a Software stack");

    ss.setSpan(new MyClickableSpan(), 22, 27, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);//22 to 27 stack is clickable
    ss.setSpan(new MyClickableSpan(), 0, 7, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);//0 to 7 Android is clickable

   _tv.setText(ss);
   _tv.setMovementMethod(LinkMovementMethod.getInstance());
}
class MyClickableSpan extends ClickableSpan{ //clickable span
    public void onClick(View textView) {
    //do something
       Toast.makeText(MainActivity.this, "Clicked",
            Toast.LENGTH_SHORT).show();
   }
    @Override
    public void updateDrawState(TextPaint ds) {
       ds.setColor(Color.GREEN);//set text color 
       ds.setUnderlineText(false); // set to false to remove underline
    }
}
} 
```

有关 ClickableSpan 的更多信息[http://developer.android.com/reference/android/text/style/ClickableSpan.html](http://developer.android.com/reference/android/text/style/ClickableSpan.html)

您还可以通过设置粗体、斜体或设置字体大小来设置可扩展字符串的样式。

```
 StyleSpan boldSpan = new StyleSpan( Typeface.ITALIC );
    ss.setSpan( boldSpan, 22, 27, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE );
    StyleSpan boldSpan1 = new StyleSpan(Typeface.BOLD);
    ss.setSpan(new RelativeSizeSpan(3f), 0, 7, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);//set fontsize
    ss.setSpan( boldSpan1, 0, 7, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-04T23:15:20.823

如果您需要将 Raghunandan Answer 与 HTML 消息一起使用，请在您的显示功能中执行以下操作

```
public void displayText(String message) {

            chapterTextView.setText(Html.fromHtml(message),TextView.BufferType.SPANNABLE);
            chapterTextView.setMovementMethod(LinkMovementMethod.getInstance());
            Spannable clickableMessage = (Spannable) chapterTextView.getText();
            chapterTextView.setText(addClickablePart(clickableMessage), BufferType.SPANNABLE);
} 
```

addClickablePart的修改功能

```
private SpannableStringBuilder  addClickablePart(Spannable charSequence) {
        SpannableStringBuilder  ssb = new SpannableStringBuilder(charSequence);

        int idx1 = charSequence.toString().indexOf("(");
        int idx2 = 0;
        while (idx1 != -1) {
            idx2 = charSequence.toString().indexOf(")", idx1) + 1;

            final String clickString = charSequence.toString().substring(idx1, idx2);
            ssb.setSpan(new ClickableSpan() {

                @Override
                public void onClick(View widget) {
                    Toast.makeText(getActivity(), clickString,
                            Toast.LENGTH_SHORT).show();
                }
            }, idx1, idx2, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            idx1 = charSequence.toString().indexOf("(", idx2);
        }

        return ssb;
    } 
```

希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-21T11:20:20.253

```
ClickableSpan cs = new ClickableSpan() {  
     @Override 
     public void onClick(View view) {  
        //action stuff here
     }  
};

String text_terms_string = getResources().getString(R.string.register_terms_text);
SpannableString ss = new SpannableString(text_terms_string);

int termStart = text_terms_string.indexOf("Terms");
int termStop = termStart + "term".length();

//we set here clickable our text  
ss.setSpan(cs, termStart, termStop, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

//we set here our color i.e. #cccccc in this example I take color from xml  
ss.setSpan(new ForegroundColorSpan(getResources().getColor(R.color.aquaBlue)),termStart,termStop,Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

//we set here text to be bolded    
ss.setSpan(new StyleSpan(Typeface.BOLD),termStart,termStop,Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

//I set here spannable text to my previous declared TextView  
text_terms_link.setText(ss);

//We set here clickable text, this is important !!  
text_terms_link.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-18T11:53:32.380

好的，所以您需要使文本视图可点击，这很简单。创建文本视图对象并调用活动

```
 termnservc =(TextView)findViewById(R.id.srvid);
      termnservc.setOnClickListener(this);
       // use on click method
                    @Override
                public void onClick(View v) {                                         
            switch (v.getId()) {
            case R.id.srvid:
        Intent termsandcondition=new Intent(this, TermsOfService.class);
        startActivity(termsandcondition);
        break;
                    } 
```

}

# compilation - g++ 链接未定义的引用，即使我的共享对象有这些方法

> ID：15475910
> 
> 赞同：1
> 
> 时间：2013-03-18T11:38:42.680
> 
> 标签：compilation, linker, g++, shared-objects

编辑：找到答案。忽视

很抱歉问这个问题，尽管它被问了很多次，但我已经检查了 20 多个类似的问题，但没有一个有帮助。

我创建了一个共享对象，现在在链接到该 .so 的程序中使用它。程序无法链接（ld 错误）。

**memfxns.h：**

```
#ifndef MEM_H
#define MEM_H
char* getBuf();
void releaseBuf(char*);
#endif 
```

**memfxns.cpp：**

```
#include "memfxns.h"

char* getBuffer()
{
        char* ret_val = new char[4];
        //fill the buffer here
        return ret_val;
}

void releaseBuffer(char* buf)
{
        delete buf;
} 
```

这些家伙被编译成这样以产生一个共享对象（注意我试过没有 -soname 因为它似乎是重复的，但没有成功）：

```
g++ -Wall -fPIC -c ./*.cpp
g++ -shared -Wl,-soname,libmemfxns.so -o ./libmemfxns.so ./*.o 
```

现在我想让我的程序链接到新的.so：

**程序.cpp：**

```
#include <stdio.h>
#include "memfxns.h"

int main()
{
        char* buf = getBuf();
        for(int i = 0; i < 4; i++)
                printf("%d\n", buf[i]);
        releaseBuf(buf);

        return 0;
} 
```

我使用以下命令编译：

```
g++ ./prog.cpp -o prog -I/home/jbu/Desktop/hadooprelated/testjna/so/include -L/home/jbu/Desktop/hadooprelated/testjna/so -lmemfxns
/tmp/ccOR12i1.o: In function `main':
prog.cpp:(.text+0x9): undefined reference to `getBuf()'
prog.cpp:(.text+0x55): undefined reference to `releaseBuf(char*)'
collect2: error: ld returned 1 exit status
make: *** [all] Error 1 
```

我相当确定它能够找到 libmemfxns.so，因为当我故意调用 -lmemfxnsdoesntexist 时，它抱怨它找不到 .so。我也确定我的 -L 和 -I 目录是正确的。

我不确定我的头文件中是否需要某种命名空间/范围，但我还没有看到示例需要...

任何帮助将不胜感激。

谢谢，-朱利安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:21:13.590

哇，看看这个白痴，与在.cpp 中的命名方式相比，他在标题中的方法名称不同。

# javascript - 使用按钮单击表单内部的 Ajax 调用不起作用

> ID：15475911
> 
> 赞同：1
> 
> 时间：2013-03-18T11:38:46.597
> 
> 标签：javascript, jquery, html, ajax

当我单击表单内的按钮时，我尝试使用 Ajax 调用服务器。但即使我使用 event.PreventDefault 或返回 false，它也不使用 Ajax。

可能是什么问题呢。这是我的 HTML 和 jQuery 代码

```
<form action="/Patient/Search" id="patient-search-form" method="post">   
<input type="text" id="PatientName" />
<button class="btn blue-button" id="search-patients" type="submit">
 <i class="icon-save icon-white"></i><span>Search</span>
</button>
</form>

<script type="text/javascript">
    $(document).ready(function () {
        $('#search-patients').submit(function (event) {
            event.preventDefault();             
            SearchPatients();
            return false;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:41:42.943

您的**提交**事件处理程序被分配给按钮，它应该是表单：

```
<script type="text/javascript">
        $(document).ready(function () {
            $('#search-patients-form').submit(function (event) {
                event.preventDefault();             
                SearchPatients();
                return false;
            });
        });
</script> 
```

或者您可以绑定到按钮单击事件：

```
<script type="text/javascript">
        $(document).ready(function () {
            $('#search-patients').click(function (event) {
                event.preventDefault();             
                SearchPatients();
                return false;
            });
        });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:39:38.030

```
$(document).ready(function () {
        $('#search-patients').click(function (event) {
            event.preventDefault();             
            SearchPatients();
            return false;
        });
    }); 
```

你在那里给了按钮 ID。我们需要给表单 ID。

# ruby-on-rails-3 - 使用具有限制的聚合函数（sum、avg、...）绑定 activerecords 查询

> ID：15475912
> 
> 赞同：4
> 
> 时间：2013-03-18T11:38:47.100
> 
> 标签：ruby-on-rails-3, model, aggregate-functions

给定这个伪查询：

```
Model.sum(:column, :condition => ['id = ?', id], order => "date DESC", :limit => X) 
```

在这里，我们遇到的问题是，获得的总和不受值 X 的“限制”（它将列上的所有值作为总和，而不是 X（第一个）条目的总和）。

似乎`limit`是在计算聚合 func 之后进行的`sum`。

我怎样才能得到仅受第一个 X 条目限制的总和？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T15:06:02.917

MurifoX 的建议不起作用，因为`LIMIT`仅适用于最终结果集，该结果集只有一行（总和）。看到[这个线程](http://www.postgresql.org/message-id/49F1A3FA.EE98.0025.0@wicourts.gov)。

解决这个问题的最简单方法是不在数据库中进行计数：

```
Model.where(:id => id).order('date DESC').limit(3).pluck(:column).compact.sum 
```

这会将 的值加载`column`到 Ruby 中并在那里求和。现在，如果记录集真的很大，那么效率会明显降低，因为所有这些值都被加载到应用程序的内存中。

编辑：添加`.compact`- 这将在求和之前从数组中删除 nils（这会导致错误）。

在 SQL 中执行此操作的建议方法是使用子查询，如下所示：

```
SELECT SUM(subquery.column) FROM (
  SELECT * FROM models WHERE id = 5 LIMIT 3
) AS subquery; 
```

将其转换为 ActiveRecord 查询实际上并没有一种简单或直接的方法，因为这些查询希望从特定模型的表中进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:47:38.927

您是否尝试以相反的方式编写查询？

```
My_model.where(:id => id).order('date DESC').limit(X).sum(:column) 
```

这样，您已过滤模型以仅对缩小的值求和。

# python - Intellij Python 不会从 .pydevproject 导入

> ID：15475913
> 
> 赞同：0
> 
> 时间：2013-03-18T11:38:47.913
> 
> 标签：python, python-2.7, intellij-idea

PyDev eclipse 插件创建两个文件一个`.project`文件和一个`.pydevproject`文件。该`.pydevproject`文件包含所有库引用。基本上我将我所有的依赖项列为

```
....
<path>\\basedir\nose\1.1.2-py27\lib</path>
<path>\\basedir\jenkinsapi\0.1.9\lib\jenkinsapi-0.1.9-py2.7.egg</path>
.... 
```

不幸的是，Intellij 不会从 .pydevproject 导入这些库。

问题：

1.  我怎么能强迫这个？
2.  我将依赖项作为基础字符串，我可以为 IntelliJ 手动键入它们，但是我必须编辑哪个文件，我应该把它放在哪里？
3.  另外，我如何像在 Eclipse 中一样更改 PYTHONPATH？在 Eclipse 中，我可以将 pythonpath 设置为 UNC 路径列表。不幸的是，我不能*使用 IntelliJ UI 来选择 Python Intepreter 并依靠 Intellij 默认机制来更改路径（这是因为我的 python 在网络共享上并且依赖于一些本机 Windows 文件系统魔法来锻炼 bin 文件的位置. 我宁愿给 IntelliJ 一个组成 python 解释器的路径列表)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:22:17.440

`PYTHONPATH`可以在[Python SDK 设置](http://img15.imageshack.us/img15/9563/20130322161825.png) `Classpath`选项卡或直接在[%CONFIG%](http://intellij-support.jetbrains.com/entries/23358108)`\options\jdk.‌​table.xml`文件中配置附加模块。

# vb6 - VB6 中的 LIKE 关键字

> ID：15475919
> 
> 赞同：1
> 
> 时间：2013-03-18T11:39:00.073
> 
> 标签：vb6, keyword

我看到一个示例代码如下

```
If numb Like "[0-9]" Then
End If 
```

这`numb`是一个包含一个字符的字符串。

VB6 中的 LIKE 关键字是什么？有没有可用的文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T11:42:11.827

[Like 运算符（Visual Basic for Applications 参考）](http://msdn.microsoft.com/en-us/library/aa242817(v=vs.60).aspx)

> 用于比较两个字符串。
> 
> 句法：
> 
> ```
> result = string Like pattern 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T22:35:45.737

要让“Like”比较字符串“ABC”，您必须使用 * 来表示“0 或任意数量”。

例如： "ABC" Like "[AZ]" 结果为 FALSE，因为 "ABC" 不是一个 1 字符长的字符串，但 "ABC" Like "*[AZ]" 返回 TRUE，因为 "ABC" 在 AZ 范围内有很多字符

干杯...豪尔赫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-14T17:55:11.317

**例子：**

```
"G??" Like "God" 
```

查找必须有 3 个字符以大写**G开头的句子**

```
"Prophet Muhammad (PBUH)" Like "Prophet*" 
```

**查找任何长度但以Prophet**开头的句子

 **```
"*Islam*" Like "The only logical religion is Islam but they are adding rumors to it" 
```

查找包含**伊斯兰教的任意长度的句子**

```
"##days" Like "40days" 
```

查找必须有 6 个字符且必须以 2 个数字开头且必须以天数结尾的句子

```
"Only[01234][34]DaysDon'tDoSinThenYou'llSeeTheReality" Like "Only40DaysDon'tDoSinThenYou'llSeeTheReality" 
```

**[ ]**内的所有内容均表示：**或**

**0 或 1 或 2 或 3 或 4**

**3 或 4**

如果您在确切位置输入其中之一。它返回真

在以下示例中，我**必须**使用该模式，否则输入时会出错：

```
Private Sub Text2_Change()

With Text2
    If .Text Like "*/*/####" Then
        .ToolTipText = DATE_TOOLTIP_ADDED(.Text)
    End If
End With 
```

结束子**

# jquery - 复选框选择所有不起作用

> ID：15475923
> 
> 赞同：0
> 
> 时间：2013-03-18T11:39:09.957
> 
> 标签：jquery, checkbox

在我添加 (#check_all) 之前，我的脚本运行良好，我的复选框不起作用，但它们单独运行良好。我找不到问题，请帮忙。

我的脚本

```
<script type="text/javascript">
$(document).ready(function(){

$(".bt").click(function(){
    $(".select_box").hide('fast');
    if ($(this).next('.select_box').is(':visible')){
        $(this).next(".select_box").hide('fast');
    }
    else{
        $(this).next(".select_box").fadeIn('fast');
    }
});
$(document).click(function() {
    $(".select_box").hide();
});
$(".bt,.select_box").click(function(e) {
    e.stopPropagation();  
    return false;                             
});

$('#check_all').click(function(){
    $(this).parents('div:eq(0)').find(':checkbox').attr('checked', this.checked);
}); 
});

</script> 
```

html

```
<a class="bt" href="#">[X]</a>
<div class="select_box" style="display:none;border:1px solid;">
    <input id="check_entite" type="checkbox" />(Select All)<br />
    <input type="checkbox" />1<br />
    <input type="checkbox" />2<br />
</div>
<br><br>
<a class="bt" href="#">[X]</a>
<div class="select_box" style="display:none;border:1px solid;">
    <input id="check_all" type="checkbox" />(Select All)<br />
    <input type="checkbox" />1<br />
    <input type="checkbox" />2<br />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:46:59.007

```
$(this).closest('div').find(':checkbox').attr('checked', this.checked); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:04:03.117

看到这个：[样本](http://jsfiddle.net/bLt2k/)

```
$(document).ready(function () {

  $(".bt").click(function (e) {
      $(".select_box").hide('fast');
      if ($(this).next('.select_box').is(':visible')) {
          $(this).next(".select_box").hide('fast');
      } else {
          $(this).next(".select_box").fadeIn('fast');
      }
      e.stopPropagation();
   });
  $(document).click(function (e) {
      $(".select_box").hide();
  });
  $('.select_box').click(function (e) {
      e.stopPropagation();
  });
  $('#check_all,#check_entite').click(function (e) {
      $(this).siblings(':checkbox').prop('checked', this.checked);
      e.stopPropagation();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:12:14.807

我认为原因不是js，实际上是你的逻辑太复杂，你应该重新组织它。试试这个或在[这里](http://jsfiddle.net/zTd8t/)检查结果：

```
<script type="text/javascript">
$(document).ready(function(){

$(".bt").click(function(){
    $(".select_box").hide('fast');
    if ($(this).next('.select_box').is(':visible')){
        $(this).next(".select_box").hide('fast');
    }
    else{
        $(this).next(".select_box").fadeIn('fast');
    }
});
$(document).click(function() {
    $(".select_box").hide();
});
$(".bt,.select_box").click(function(e) {
    e.stopPropagation();  
    return false;                             
});

$('#check_all').click(function(){
    $(this).parents('div:eq(0)').find(':checkbox').attr('checked', this.checked);
      e.stopPropagation();  
    return false; 
}); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:23:40.817

你想用什么来完成：

```
$(".bt,.select_box").click(function(e) {
    e.stopPropagation();  
    return false;                             
}); 
```

?

这是一个工作版本：[JSFiddle](http://jsfiddle.net/aLmW2/1/)

```
$(document).ready(function () {

    $(".bt").click(function (e) {
        $(".select_box").hide('fast');
        if ($(this).next('.select_box').is(':visible')) {
            $(this).next(".select_box").hide('fast');
        } else {
            $(this).next(".select_box").fadeIn('fast');
        }
        return false;
    });
    $(document).click(function () {
        $(".select_box").hide();
    });

    $('.check_all').click(function () {
        var checked = ($(this).prop('checked'));
        $(this).parent('div').find(':checkbox').prop('checked', checked);
    });
}); 
```

# ios - 如何计算 NSDictionary 对象的总大小？

> ID：15475924
> 
> 赞同：6
> 
> 时间：2013-03-18T11:39:09.877
> 
> 标签：ios, ios5, ios6, malloc, sizeof

如何计算`NSDictionary`对象的总大小？`NSDictionary`我有 3000个具有不同键的 StudentClass 对象。我想以 KB 计算字典的总大小。我用过`malloc_size()`，但它总是返回 24（`NSDictionary`包含 1 个对象或 3000 个对象） `sizeof()`也总是返回相同的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T12:06:30.500

您也可以通过以下方式找到：

目标 C

```
NSDictionary *dict=@{@"a": @"Apple",@"b": @"bApple",@"c": @"cApple",@"d": @"dApple",@"e": @"eApple", @"f": @"bApple",@"g": @"cApple",@"h": @"dApple",@"i": @"eApple"};

NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
[archiver encodeObject:dict forKey:@"dictKey"];
[archiver finishEncoding];

NSInteger bytes=[data length];
float kbytes=bytes/1024.0;
NSLog(@"%f Kbytes",kbytes); 
```

斯威夫特 4

```
let dict: [String: String] = [
    "a": "Apple", "b": "bApple", "c": "cApple", "d": "dApple", "e": "eApple", "f": "bApple", "g": "cApple", "h": "dApple", "i": "eApple"
]

let data = NSMutableData()
let archiver = NSKeyedArchiver(forWritingWith: data)
archiver.encode(dict, forKey: "dictKey")
archiver.finishEncoding()

let bytes = data.length
let kbytes = Float(bytes) / 1024.0

print(kbytes) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T11:47:49.113

您可以尝试在数组中获取字典的所有键，然后迭代数组以查找大小，它可能会为您提供字典中键的总大小。

```
NSArray *keysArray = [yourDictionary allValues];
id obj = nil;
int totalSize = 0;

for(obj in keysArray)
{
    totalSize += malloc_size(obj);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T11:43:06.063

我认为计算 big 大小的最佳方法是`NSDictionary`将其转换为`NSData`并获取数据的大小。祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T11:51:28.903

如果您的字典包含标准类（例如 NSString）而不是自定义类，则转换为 NSData 可能很有用：

```
NSDictionary *yourdictionary = ...;
NSData * data = [NSPropertyListSerialization dataFromPropertyList:yourdictionary
    format:NSPropertyListBinaryFormat_v1_0 errorDescription:NULL];    
NSLog(@"size of yourdictionary: %d", [data length]); 
```

# c - C中链表的搜索功能

> ID：15475931
> 
> 赞同：0
> 
> 时间：2013-03-18T11:39:24.963
> 
> 标签：c, pointers, search, linked-list

我确信这很简单，但我是链表的新手，对指针有点生疏。我习惯于在 C++ 中进行编码，您可以轻松地传递参数，但在 C 中却没有这么多。所以当事情不那么容易工作时，我会感到困惑。

我基本上只想要我的程序中的一个函数，它接收一个传递的变量并在链表中搜索它。我让它在 main 中工作，但是将它作为一个单独的函数让我很头疼。

```
#include <stdio.h>
#include <stdlib.h>

int globalNum = 1; 

typedef char DATA;
struct node
{
    DATA d;
    int nodeNum;
    struct node *next;
};

main()
{
    struct node *head = NULL;
    struct node *tail = NULL;
    int nodeNum;

/*CREATE*/  
    while(globalNum <= 5)
    {
        struct node *new;
        if((new = malloc(sizeof(struct node))) == NULL) abort();

        new->next = NULL;
        new->nodeNum = globalNum;
        globalNum++;
        if(!head) head = new;
        else tail->next = new;
        tail = new;
    }

/*ACCESS*/
    struct node *access;
    access = head;
    while(access)
    {
        if(access->nodeNum != 5)
        {
            printf("%d\n", access->nodeNum);
            access = access->next;
            printf("NEXT\n");
        }
        else
        {
            printf("FOUND\n");
            return 0;
        }
        if(!access)
        {
            printf("CANNOT ACCESS\n");
            return 0;
        }
    }
} 
```

@555k 感谢双指针的建议！我为访问代码做了一个类似的功能，但它不读取链表节点和分段错误。搜索功能如何知道`access->next`位置是什么？调用时需要传递什么`search(&head);`？

```
int access(struct node *head)
{
    struct node *access;
        access = head;
    while(access)
        {
            if(access->nodeNum != 5)
            {
                printf("%d\n", access->nodeNum);
                access = access->next;
                printf("NEXT\n");
        }
        else
        {
            printf("FOUND\n");
        }
    if(!access)
        {
                printf("CANNOT ACCESS\n");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:43:53.670

代替

```
access = access+1; 
```

采用

```
access = access->next; 
```

编辑：

```
void search(struct node *head)
{
    struct node *access;
        access = head;
    while(access)
    {
            if(access->nodeNum != 5)
            {
                printf("%d\n", access->nodeNum);
                access = access->next;
                printf("NEXT\n");
             }
             else
             {
                printf("FOUND\n");
                access = access->next;
             }
             if(!access)
             {
                 printf("CANNOT ACCESS\n");
             }
     } 
```

}

将上述函数调用为：

```
search(head); 
```

从主要应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:02:44.583

我认为双指针是您创建函数问题的答案，请检查...

```
int globalNum = 1; 

typedef char DATA;
struct node
{
    DATA d;
    int nodeNum;
    struct node *next;
};

void Create(struct node **head, struct node **tail)
{
    while(globalNum <= 5)
    {
        struct node *new;
        if((new = malloc(sizeof(struct node))) == NULL) abort();

        new->next = NULL;
        new->nodeNum = globalNum;
        globalNum++;
        printf("\nBEFORE CREATE\nhead = %d\nnew = %d\ntail = %d", *head, new, *tail);
        if(!(*head)) *head = new;
        else (*tail)->next = new;
        *tail = new;
        printf("\nAFTER CREATE\nhead = %d\nnew = %d\ntail = %d\n", *head, new, *tail);
    }
 }
 void Access(struct node **head)
 {    
    struct node *access;
    access = *head;
    while(access)
    {
        if(access->nodeNum != 5)
        {
            printf("%d\n", access->nodeNum);
            access = access->next;
            printf("NEXT\n");
        }
        else
        {
            printf("FOUND\n");
            return 0;
        }
        if(!access)
        {
            printf("CANNOT ACCESS\n");
            return 0;
        }
    }
  }

main()
{
    struct node *head = NULL;
    struct node *tail = NULL;
    int nodeNum;

    Create(&head, &tail);

    Access(&head);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:42:08.520

我不会为你写函数，但我会写规范：-

```
// Looks for node with a specific nodeNum value in the list passed in.
// Returns a pointer to the node if found, or NULL if the node isn't there.

 struct node * findNode(structnode * listHead, int valueToFind)
{
// your code here
}; 
```

用法：

```
 struct node *result;
  result = findNode(head, 5);
  if (result != NULL)
    ...
  else
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T17:20:22.213

使用库文件 stdlib.h 时此处未声明的“NULL”（不在函数中）怎么样，它甚至有 #define NULL 0

# windows-xp - Ghostscript - 打印到 pdf 时剪裁页面的右侧

> ID：15475941
> 
> 赞同：1
> 
> 时间：2013-03-18T11:39:48.550
> 
> 标签：windows-xp, pdf-generation, ghostscript

我正在尝试将 excel 2003 工作表转换为 pdf 文件。为此，我尝试了许多可用的 PDF 转换器/打印机（在 32 位 Windows XP 上），包括 cutepdf、bullzip 和 pdfcreator。他们每个人都拿走了我的文件并删除了表格的右侧。看：

[https://docs.google.com/file/d/0B-z9BfHBPkLUOGVER21kNE1ROEE/edit?usp=sharing](https://docs.google.com/file/d/0B-z9BfHBPkLUOGVER21kNE1ROEE/edit?usp=sharing)

我有另一个 pdfcreator 可以很好地完整打印页面。看：

[https://docs.google.com/file/d/0B-z9BfHBPkLUU2xCRWthWFNTMk0/edit?usp=sharing](https://docs.google.com/file/d/0B-z9BfHBPkLUU2xCRWthWFNTMk0/edit?usp=sharing)

有效的版本和其他版本之间的区别（据我所知）是它似乎没有使用 Ghostscript，而其他版本则使用了 Ghostscript。因此，我的假设是 Ghostscript 是问题所在。该软件似乎使用的是 Ghostscript 9.05 版。Bullzip 提供了使用替代版本的便利，我也尝试使用 9.07 并获得相同的结果。打印机的页面尺寸设置为 A4。

每当我选择其中一台错误的打印机时，Excel 的预览页面都会显示剪裁的图像，就好像我正在尝试打印的页面尺寸太小而无法容纳纸张一样。我尝试了以下方法来解决这个问题：

1.  使用适合页面选项；
2.  将页面大小设置为 A3。

在第一种情况下，图像缩小但仍被剪裁，在第二种情况下，图像仅显示在可打印区域的左上角，但仍被剪裁。

然而，在打开这些 pdf 文件时，图像大小/页面大小与第一个示例完全相同，即在 A4 大小的页面上似乎是 100% 缩放的图像。

任何人都可以通过以下方式提供帮助：

1.  确认这是一个 Ghostscript 问题；
2.  协助确定在转换时使用了哪些页面设置；
3.  提供任何解决方案和/或帮助进一步解决问题。

非常感谢

问候

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:58:18.397

根据提供的信息，无法确定，但这可能*不是*Ghostscript 问题。Ghostscript 依赖于 Windows 中 PostScript 打印机驱动程序发送给它的 PostScript。这取决于描述“打印机”的 PPD 文件。很可能正在使用的那个定义了一些硬件余量，这就是导致您的问题的原因。

您可以将打印机更改为使用“文件：”端口而不是它当前使用的任何端口，这将提示您输入文件名，将其保存在方便的地方。这是一个 PostScript 文件，如果您将其发布到公开的地方，则可以推断出更多内容。

如果您可以找到与打印机相关的 PPD 文件，那么这也会很有用。

嗯，实际上看它“可能”是 GS 的图像，因为总内容没有被剪裁。不过，我需要查看 PostScript 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:35:31.937

@user2177934：您的第一个链接中的文件确实使用了页面布局和页面大小`842 x 595 pt`（A4），旋转了 0 度（即：横向，未旋转）。这可以在以下命令的输出中看到：

```
pdfinfo -box requisition_pdfxchange.pdf
 ========================================
制作者：PDF-XChange 3.00.0030 (Windows XP)
创建日期：2013 年 3 月 18 日星期一 10:48:45
标签： 没有
形式：无
页数：1
加密：否
页面尺寸：841.889 x 595.289 分 (A4)
页面腐烂：0
媒体框：0.00 0.00 841.89 595.29
裁剪框：0.00 0.00 841.89 595.29
出血盒：0.00 0.00 841.89 595.29
修剪框：0.00 0.00 841.89 595.29
画框：0.00 0.00 841.89 595.29
文件大小：5057 字节
优化：无
PDF版本：1.4

```

第二个链接中的文件确实使用了`595 x 842 pt`（A4）的页面布局和页面大小，旋转了 90 度（即纵向，旋转后看起来像横向）。

```
pdfinfo -box requisition_pdfcreator.pdf
 ========================================
标题：requisition_wi_btn_v1.5
学科：        
关键词：       
作者：保罗
创建者：PDFCreator 版本 1.6.2
制作人：GPL Ghostscript 9.07
创建日期：2013 年 3 月 18 日星期一 10:47:19
修改日期：2013 年 3 月 18 日星期一 10:47:19
标签： 没有
形式：无
页数：1
加密：否
页面尺寸：595 x 842 点 (A4)
页面腐烂：90
媒体框：0.00 0.00 595.00 842.00
裁剪框：0.00 0.00 595.00 842.00
出血盒：0.00 0.00 595.00 842.00
修剪框：0.00 0.00 595.00 842.00
画框：0.00 0.00 595.00 842.00
文件大小：13773 字节
优化：无
PDF版本：1.4

```

由于您已经在 Windows 系统上安装了相应的 PDF 文件转换器作为打印机驱动程序，我强烈的假设是您只是错误地为您的用例调整了驱动程序设置。

只需在打印作业属性中使用横向设置，一切都会好起来的。:-)

# php - 无法在 PHP/Windows 中取消链接文件

> ID：15475942
> 
> 赞同：3
> 
> 时间：2013-03-18T11:39:50.307
> 
> 标签：php, windows, unlink

我看到有人就这个话题提出了一些问题，但不幸的是，环顾四周，我还没有找到解决方案。

我在 Windows Server 2008 上运行 PHP5.3 和 Apache2。

脚本创建一个 PDF 文件，通过电子邮件发送后需要删除，因此：

`unlink($filename);`

上面的代码并没有删除文件，而是返回了这个错误信息：

*[18-Mar-2013 10:56:06 UTC] PHP 警告：unlink(D:\mypath\temp\myfilename.pdf) [function.unlink]: Permission denied in D:\mypath\Controller\IndexController.php 在线554*

使用 exec/whoami 我可以看到用户是“nt authority\system”

使用[fileperms](http://php.net/manual/en/function.fileperms.php)函数，并使用 Example2 中的代码对其进行解析，我可以看到该文件具有以下权限：`33206 -rw-rw-rw-`

我还检查了包含文件夹，并且该系统用户对该文件夹及其内容具有完全控制权。

任何人都可以提出其他建议来尝试删除该文件吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T21:03:52.747

当无法删除时，首先应该记住答案：由另一个程序或进程使用。

对文件写入或执行独占操作时使用[flock 。](http://php.net/manual/en/function.flock.php)

# php - 统计平均值 MySQL / PHP

> ID：15475947
> 
> 赞同：0
> 
> 时间：2013-03-18T11:40:00.283
> 
> 标签：php, mysql, statistics

我有一个学生正在做作业的应用程序。对于每个作业/学生，都会记录一个结果记录。在该记录中，分数和经过的时间被保存。现在我需要统计每个作业所用时间的平均值以及分数。

与正常平均值不同，此计算需要考虑极端情况（例如，学生有一段时间空闲，因此经过的时间非常长，我必须防止该值影响平均值）。

我的问题; 这个问题的公认方法是什么？是否有适合这种情况的 MySQL 内置函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:41:37.930

最简单的做法是使用中位数而不是平均值。它对异常值的敏感性要低得多。

# algorithm - 自然语言查询理解

> ID：15475948
> 
> 赞同：1
> 
> 时间：2013-03-18T11:40:00.837
> 
> 标签：algorithm, nlp, search-engine, nltk, structured-data

我是 NLP 领域的新手，很抱歉我的问题可能很愚蠢或不正确。我期待任何可以为我提供正确方向的运动矢量的帮助。

现在我正在写我的论文，其中有一个重要的部分——自然语言查询解析器。以前我有一些搜索引擎算法的经验。但是现在我希望我的系统能够“理解”某些类型的查询，并且能够大致将其转换为数据库查询语言以执行结构化搜索。例如，对于查询“我住在俄罗斯的朋友”，系统只需查看“人”表并选择“国家=俄罗斯”的人。

我很清楚结构化搜索不像垃圾邮件过滤那样简单的 NLP 问题，但是现在已经诞生了很多这样的系统：Siri、Google Now、Facebook Graph Search。他们能够“理解”查询，而不仅仅是给出排名结果列表（就像经典搜索引擎所做的那样），而且能够正确呈现经过验证的信息类型。我对它们内部的工作方式很感兴趣，但找不到足够的信息。

我将不胜感激任何可以帮助我研究这些系统和论文进展的信息、任何参考资料和书籍。最好这些可以在实践中应用，而不是国防部封闭的发展:)

英语不是我的母语，如有错误请见谅，希望您能理解我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:06:17.570

你的问题过于笼统。如果您想获得有用的答案，则必须更加具体。

* * *

这里有一个想法：从查询中删除任何填充词以获得关键字，然后分析关键字以确定它们的语义。例如：

```
my friends who live in Russia 
```

删除填充词：

```
friends live Russia 
```

分析（使用同义词、语义和单词列表）：

```
friends -> people,
live -> location,
Russia -> country 
```

然后构造查询。

# heroku - Heroku 运行命令在我的网络上没有响应

> ID：15475959
> 
> 赞同：1
> 
> 时间：2013-03-18T11:40:23.060
> 
> 标签：heroku, network-protocols, server-configuration

嗨，我正在通过 heroku 运行命令 CLI 运行一些脚本，但在某些网络上我遇到了问题。此工具使用哪些端口？我认为 heroku toolbelt 使用 ssh 是这样吗？它使用标准端口吗？我在 herokus 论坛上找不到此信息。有人知道吗？

奇怪的是，我与 heroku 取得了初步联系，但经过漫长的等待后，我得到了这个错误。

```
Error:       Connection timed out - connect(2) (Errno::ETIMEDOUT) 
```

我不确定这是否是端口问题，但它似乎只发生在我的一个受到严格控制的网络上。所以这就是我对端口感兴趣的原因。

# syntax - 函数式编程语法优化

> ID：15475960
> 
> 赞同：0
> 
> 时间：2013-03-18T11:40:27.160
> 
> 标签：syntax, functional-programming

考虑这个示例函数：

**第一个例子**

```
;;; Lisp
(defun foo (x y z)
  (let ((tmp))
    (setf tmp (operation1 x y z))
    (setf tmp (operation2 tmp y z))
    (setf tmp (operation3 tmp y z))
    (setf tmp (operation4 tmp y z))
    ...
    (setf tmp (operationN tmp y z))
    tmp))

// PHP
function foo($x, $y, $z)
{
  $tmp = operation1($x, $y, $z);
  $tmp = operation2($tmp, $y, $z);
  $tmp = operation3($tmp, $y, $z);
  ...
  return operationN($tmp, $y, $z);  
} 
```

我的老师告诉我，在函数式编程中，我不应该将返回值存储在 temp 变量中，而是立即将其传递给下一个函数。

**第二个例子**

```
;;; Lisp
(defun foo (x)
  (operationN
    (... 
      (operation3
        (operation2
          (operation1 x y z) 
        y z)
       y z)
    y z)
  y z)
)

// PHP
function foo($x, $y, $z)
{
  return operationN(
    ...(
     operation3(
      operation2(
        operation1($x, $y, $z),
        $y, $z),
      $y, $z),
     $y, $z),
    $y, $z);
} 
```

将此视为一个非常简单的示例，并且可能有其他函数应用于其余参数。在我看来，第一个例子更具可读性。

1.  **以函数式编程方式格式化此代码的正确方法是什么？**
2.  **编程时我应该更喜欢代码可读性还是正确的代码语法（应该取决于深度级别）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:01:52.597

代码变得笨拙通常表明单个函数被赋予了过多的责任。
在我看来，两种语言的“正确”方式是重构为更小的函数。

当然，这种重构取决于实际问题，但您的示例的一个简单细分可能是

```
(defun operations1-2 (x y z)
  (operation2 (operation1 x y z) y z))

(defun operations1-3 (x y z)
  (operation3 (operations1-2 x y z) y z))

(defun operations1-4 (x y z)
  (operation4 (operations1-3 x y z) y z))

...

(defun foo (x y z)
  (operationN (operations1-N-1 x y z) y z)) 
```

当然你不能总是以一种有意义的方式来做，但是还有顺序的 let-binding，它比深度嵌套的函数应用程序更好：

```
(defun foo (x y z)
  (let* 
      ((tmp (operation1 x y z))
       (tmp2 (operation2 tmp y z))
       (tmp3 (operation3 tmp2 y z))
       (tmp4 (operation4 tmp3 y z))
       (...))
    (operationN tmpN-1 y z))) 
```

# java - Java servlet 处理对 mp4 文件的多部分请求

> ID：15475966
> 
> 赞同：2
> 
> 时间：2013-03-18T11:41:07.503
> 
> 标签：java, ios, servlets, streaming, mp4

我正在尝试实现一个从 url 读取 InputStream 的 servlet。输入流的内容类型为 video/mp4。

现在，我希望将这个包含 mp4 视频的 InputStream 提供给 iOS 设备。我关注了 Bauke Scholtz 的[文章](http://balusc.blogspot.in/2009/02/fileservlet-supporting-resume-and.html "BalusC 代码")，它完成了类似的任务，它从 File 对象中读取内容。我按照这篇文章进行了一些更改以实现我的场景。

我正在为我的问题添加更多细节。

我试图通过对 Bauke Scholtz 的代码进行细微更改来测试我的场景。我的 servlet 首先通过使用从 url 读取内容

```
URLConnection openConnection = url.openConnection(); 
```

然后我重写他的 copy() 函数如下：

```
private static void copy(URLConnection openConnection, OutputStream output,
        long start, long length) throws IOException {
    InputStream input = openConnection.getInputStream();
    byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
    int read;

    if (openConnection.getContentLength() == length) {
        while ((read = input.read(buffer)) > 0) {
            output.write(buffer, 0, read);
        }
    } else {
        input.skip(start);
        long toRead = length;

        while ((read = input.read(buffer)) > 0) {
            if ((toRead -= read) > 0) {
                output.write(buffer, 0, read);
            } else {
                output.write(buffer, 0, (int) toRead + read);
                break;
            }
        }
    }
} 
```

我使用了这个复制功能，而不是原来的。

但我无法实现我的目标。有遇到过类似情况的朋友，或者知道解决方法的，请分享一下你的想法。

谢谢，

瓦伊巴夫·古普塔。

PS 对于我最初的问题中提供的信息较少，我深表歉意。我对stackoverflow很陌生，需要一些时间和学习适应它的文化。

# qt - Qt 桌面和嵌入式应用程序中的文本大小和样式不同

> ID：15475971
> 
> 赞同：2
> 
> 时间：2013-03-18T11:41:41.413
> 
> 标签：qt, user-interface, fonts, styles, embedded

我正在使用 QtCreator 和 QtEmbedded-4.8.2-arm 交叉工具链为 lpc3250 ARM 板开发 GUI 嵌入式应用程序，该工具链是在 Kubuntu 12.10 上使用 NXP gcc-4.3.2-glibc-2.7 构建的。问题在于桌面和嵌入式应用程序中的文本大小和文本样式之间的差异。嵌入式应用程序 GUI 中的文本（标签、表格标题等）明显更小并且格式被破坏（例如，没有粗体文​​本）。字体似乎有问题，但它们在桌面和嵌入式设备上都安装到相同的目录（ /​​usr/local/Trolltech/QtEmbedded-4.8.2-arm/lib/fonts ），我不明白是什么他们可能错了。

任何人都可以建议，有什么问题以及如何解决它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T08:55:25.123

构建带有自由类型支持的 Qt Embedded 解决了这个问题

# css - 打开 IE 开发人员工具时 CSS 意外更改

> ID：15475973
> 
> 赞同：6
> 
> 时间：2013-03-18T11:41:41.827
> 
> 标签：css, internet-explorer, internet-explorer-8, cross-browser, ie-developer-tools

我目前正在 IE8 上测试一个站点（在虚拟机上运行）。

该网站在 :before 和 :after 元素中使用了一些背景图像，它们位于媒体查询中：

```
@media (min-width: 980px) {

    .box:after {
        ...
        background: url('../images/assets/home-create-background.png') bottom right no-repeat;
        ...
    }
} 
```

我正在使用[respond.js](https://github.com/scottjehl/Respond)为 IE8 上的媒体查询提供支持。页面加载后立即应用媒体查询中的规则（即：respond.js 实际工作）。但是，不会显示此图像。

有趣的是： **如果我打开 IE 开发工具（例如按 F12），图像会突然显示。**

**有人经历过类似的事情吗？你们有什么想法或方向可以探索吗？**

* * *

**编辑：** 我终于能够解决这个问题，将内容添加到 :after 伪元素（我已经在应用这个规则，但不在媒体查询中，并且由于某种原因，它没有应用在 IE 上）

```
 .box:after {
        ...
        background: url('../images/assets/home-create-background.png') bottom right no-repeat;
        content: " ";
        ...
    } 
```

无论如何，我相信当我打开开发工具时知道为什么布局会发生变化是很有趣的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:33:52.077

可以确定 IE 的几个痛点，因此值得检查以下内容：

1.  在显示开发人员工具之前，任何`console.log()`语句都会强制 IE 不呈现任何内容。
2.  当您打开 IE 开发工具时，默认情况下它处于与您习惯的默认视图不同的兼容模式。

# c - SSE _mm_load_pd 工作，而 _mm_store_pd 段错误

> ID：15475979
> 
> 赞同：9
> 
> 时间：2013-03-18T11:42:01.510
> 
> 标签：c, sse, simd, intrinsics

我正在尝试学习 C 中 SSE 内在函数的原理。我有一段代码，我在其中加载双数据的双分量向量，向其中添加一些内容，然后尝试将其存储回内存。一切正常：我可以将我的数据加载到 SEE 寄存器中，我可以对这些 SSE 寄存器中的数据进行操作，但是当我尝试将处理过的数据写回原始数组时（这是我第一次读取数据的地方地方！）我得到一个分段错误。

任何人都可以就这个问题给我建议 - 这让我发疯。

```
double res[2] __attribute__((aligned(16)));

for(int k=0; k<n; k++){
int i=0;
for(; i+1<n; i+=2)
  {
    __m128d cik = _mm_load_pd(&C[i+k*n]);
    int j = 0;
    for(; j+1<n; j+=2)
      {
        __m128d aTij = _mm_load_pd(&A_T[j+i*n]);
        __m128d bjk = _mm_load_pd(&B[j+k*n]);
        __m128d dotpr = _mm_dp_pd(aTij, bjk,2);
        cik = _mm_add_pd(cik, dotpr);
      }
    _mm_store_pd(res, cik);
    //C[i+k*n] = res[0];
  }
} 
```

正如我上面所说的，除了我将结果存储回那个一维数组“C”的地方之外，一切都在这段代码中工作，我首先从那里读取我的数据。也就是说，当我删除前面的评论标志时

```
//C[i+k*n] = res[0]; 
```

我得到一个分段错误。

我怎么可能用 _mm_load_pd 的对齐内存版本从 C 读取（所以 C 必须在内存中对齐！）而写回它不起作用？“C”必须对齐，如您所见，“res”也必须对齐。

**免责声明：**我的原始代码已阅读

```
_mm_store_pd(&C[i+k*n], cik); 
```

这也产生了分段错误，我开始引入具有显式对齐的“res”以尝试解决问题。

**附录**

A、B、C 声明如下：

```
buf = (double*) malloc (3 * nmax * nmax * sizeof(double));
double* A = buf + 0;
double* B = A + nmax*nmax;
double* C = B + nmax*nmax; 
```

**使用 posix_memalign 尝试的解决方案**

为了解决写入原始一维数组时的分段错误问题，我现在为相应的矩阵使用缓冲区。但是，在尝试写回 C_buff 时，这仍然会出现段错误！

```
double res[2] __attribute__((aligned(16)));

double * A_T;
posix_memalign((void**)&A_T, 16, n*n*sizeof(double));

double * B_buff;
posix_memalign((void**)&B_buff, 16, n*n*sizeof(double));

double * C_buff;
posix_memalign((void**)&C_buff, 16, n*n*sizeof(double));

for(int y=0; y<n; y++)
  for(int x=0; x<n; x++)
    A_T[x+y*n] = A[y+x*n];

for(int x=0; x<n; x++)
  for(int y=0; y<n; y++)
    B_buff[y+x*n] = B[y+x*n];

for(int x=0; x<n; x++)
  for(int y=0; y<n; y++)
    C_buff[y+x*n] = C[y+x*n];

for(int k=0; k<n; k++){
  int i=0;
  for(; i+1<n; i+=2)
    {
      __m128d cik = _mm_load_pd(&C_buff[i+k*n]);
      int j = 0;
      for(; j+1<n; j+=2)
        {
          __m128d aTij = _mm_load_pd(&A_T[j+i*n]);
          __m128d bjk = _mm_load_pd(&B_buff[j+k*n]);
          __m128d dotpr = _mm_dp_pd(aTij, bjk,2);
          cik = _mm_add_pd(cik, dotpr);
        }
      _mm_store_pd(&C_buff[i+k*n], cik);

  //_mm_store_pd(res, cik);
      //C_buff[i+k*n] = res[0];
  //C_buff[i+1+k*n] = res[1];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-16T15:49:21.543

当您删除`_mm_store_pd(&C_buff[i+k*n], cik);`整个循环时，会优化并删除。编译器推断整个 for 循环不会导致任何有意义的工作并将其删除。这就是为什么您不再遇到分段错误的原因。
我确信分段错误是因为数组的大小。根据您的示例考虑这个简单的程序：

```
#include <stdio.h>
#include "emmintrin.h"

int main(){
int n = 15;
int y,x,k,i,j;

double * A;
posix_memalign((void**)&A, 16, n*n*sizeof(double));

double * B;
posix_memalign((void**)&B, 16, n*n*sizeof(double));

double * C;
posix_memalign((void**)&C, 16, n*n*sizeof(double));

for(y=0; y<n; y++)
  for(x=0; x<n; x++)
    A[x+y*n] = 0.1;

for(x=0; x<n; x++)
  for(y=0; y<n; y++)
    B[y+x*n] = 0.1;

for(x=0; x<n; x++)
  for( y=0; y<n; y++)
    C[y+x*n] = 0.1;

for( k=0; k<n; k++){
   i=0;
  for(; i+1<n; i+=2)
    {
      __m128d cik = _mm_load_pd(&C[i+k*n]);
       j = 0;
      for(; j+1<n; j+=2)
        {
          __m128d aTij = _mm_load_pd(&A[j+i*n]);
          __m128d bjk = _mm_load_pd(&B[j+k*n]);
          __m128d dotpr = _mm_add_pd(aTij, bjk);
          cik = _mm_add_pd(cik, dotpr);
        }
      _mm_store_pd(&C[i+k*n], cik);
    }
}
printf("C[15]: %f\n", C[15]);
printf("C[14]: %f\n", C[14]); 
```

这给出了分段错误，因为 n 是奇数。现在将 n=15 更改为 n=16，一切都会按预期运行。因此，将数组填充为偶数（甚至更好，填充到缓存行的大小 -> 64 字节 == 8 个 DP 元素或 16 个 SP 元素）将防止此类问题，并会带来更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T10:25:00.590

即使使用`__attribute__((aligned(32)))`，我也遇到了同样的错误（它有 %50 的错误对齐机会）。然后我使用以下函数来获得 %100 的对齐机会（a 应该是 2 的幂）：

```
void * malloc_float_align(size_t n, unsigned int a/*alignment*/, float *& output)
{
    void * adres=NULL;
    void * adres2=NULL;
    adres=malloc(n*sizeof(float)+a);
    size_t adr=(size_t)adres;
    size_t adr2=adr+a-(adr&(a-1u)); // a valid address for a alignment
    adres2=(void * ) adr2;
    output=(float *)adres2;
    return adres;                //pointer to be used in free()
} 
```

然后在main中使用：

```
int main()
{

  float * res=NULL;
  void * origin=malloc_float_align(1024,32u,res);
  //use res for sse/avx
  free(origin); // actual allocation is more than 1024 elements
  return 0;
} 
```

当然这是在 c++ 中，所以你可以让它只改变一些函数参数样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T14:22:56.800

一个简单的技巧是执行 ASSERT 并查看它是否触发：

```
ASSERT( ((size_t)(&C_buff[i+k*n]) & 0xF) == 0); 
```

当地址不是 SSE 对齐时，将触发 ASSERT。默认情况下，64 位构建应提供 16B 对齐。如果您计划使用 32 位代码，请使用上述 align_malloc 函数之一。你需要使用相关的 align_free 否则你会崩溃。

# r - 如何消除数据表上的循环？

> ID：15475984
> 
> 赞同：0
> 
> 时间：2013-03-18T11:42:14.120
> 
> 标签：r, data.table

我有两个`data.table`如下所示：

```
N = 10
A.DT <- data.table(a1 = c(rnorm(N,0,1)), a2 = NA))
B.DT <- data.table(b1 = c(rnorm(N,0,1)), b2 = 1:N)
setkey(A.DT,a1)    
setkey(B.DT,b1) 
```

我试图通过更改 for 循环将我以前`data.frame`的实现更改为一个`data.table`实现，如下所示：

```
for (i in 1:nrow(B.DT)) {
  for (j in nrow(A.DT):1) {
    if (B.DT[i,b2] <= N/2 
        && B.DT[i,b1] < A.DT[j,a1]) {
      A.DT[j,]$a2 <- B.DT[i,]$b1
      break
    }
  }
} 
```

我收到以下错误消息：

```
Error in `[<-.data.table`(`*tmp*`, j, a2, value = -0.391987468746123) : 
  object "a2" not found 
```

我认为我访问的方式`data.table`不太正确。我是新手。我想有一种比上下循环两个数据表更快的方法。

我想知道上面显示的循环是否可以简化/矢量化。

**编辑**用于复制/粘贴的 data.table 数据：

```
# A.DT
    a1  a2
1   -1.4917779  NA
2   -1.0731161  NA
3   -0.7533091  NA
4   -0.3673273  NA
5   -0.159569   NA
6   -0.1551948  NA
7   -0.0430574  NA
8   0.1783496   NA
9   0.4276034   NA
10  1.0697412   NA

# B.DT
    b1  b2
1   0.64229018  1
2   1.00527902  2
3   0.24746294  3
4   -0.50288835 4
5   0.34447791  5
6   -0.22205129 6
7   0.60099079  7
8   -0.70242284 8
9   0.6298599   9
10  0.08917988  10 
```

我期望的输出：

```
# OUTPUT
    a1  a2
1   -1.4917779  NA
2   -1.0731161  NA
3   -0.7533091  NA
4   -0.3673273  NA
5   -0.159569   NA
6   -0.1551948  NA
7   -0.0430574  NA
8   0.1783496   -0.50288835
9   0.4276034   0.24746294
10  1.0697412   0.64229018 
```

该算法在一张表中向下，对于每一行在另一张表中向上，检查一些条件并相应地修改值。更具体地说，它下降 B.DT，对于 B.DT 中的每一行，上升 A.DT 并将 b1 的第一个值分配给 a2，使得 b1 小于 a1。在赋值之前检查一个附加条件（在本例中 b2 等于或小于 5）。

0.64229018 是 B.DT 中的第一个值，分配给 A.DT 的最后一个单元。1.00527902 是 B.DT 中的第二个值，但由于它比 A.DT 中的所有其他值都大，因此未赋值。0.24746294 是 B.DT 中的第三个值，分配给 A.DT 中倒数第二个单位。-0.50288835 是 B.DT 中的第四个值，分配给 A.DT 中的 #8 单元 0.34447791 是 B.DT 中的第五个值，因为它太大了，所以没有分配。

这当然是一个简化的问题（因此可能没有多大意义）。感谢您的时间和投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:00:59.750

您的代码将运行更改：

```
A.DT[j,]$a2 <- B.DT[i,]$b1 
```

至

```
A.DT$a2[j,] <- B.DT[i,]$b1 
```

至于更有效地使用`data.table`，我将把它留给那些比我更专业的人......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:05:20.473

一旦你创建了你的 data.table，就几乎不需要常规的赋值操作符`<-`，而是你想使用`:=`，它位于该位置的括号内**。**`j`（避免的原因`<-`是`<-`创建对象的副本，而`:=`没有，因此效率）

因此，对您的代码的第一次修改是：

```
 # FROM: A.DT[j,]$a2 <- B.DT[i,]$b1
 # TO: 
 A.DT[j, a2 := B.DT[i, b1] ] 
```

* * *

现在，`data.table`'s (许多) 最好的特性之一是它的`by`参数，它有助于消除许多`for`循环和`*ply`调用。在这种特定情况下，您可以按如下方式清理双循环：

```
set.seed(201)
A.DT <- data.table(a1 = rnorm(N,0,1), key="a1")  # no need to create a2 if it will be NA. If you do, make sure it is as.numeric(NA)
B.DT <- data.table(b1 = rnorm(N,0,1), b2 = 1:N, key="b2")

# Assign to a2 in A.DT
A.DT[            
      , a2 := B.DT[ b2 <= N/2 & b1 < a1] [1, b1]
      , by=a1
     ]

> A.DT
             a1         a2
 1: -2.30403431         NA
 2: -1.69658097         NA
 3: -1.28548252         NA
 4: -0.34454603 -0.6478531
 5: -0.07503189 -0.6478531
 6:  0.05593404 -0.6478531
 7:  0.18900414 -0.6478531
 8:  0.26693735  0.2238094
 9:  0.28606069  0.2238094
10:  0.32576373  0.2238094 
```

* * *

### s上的两个旁注`key`。

*   您可以在创建 data.table 的同时设置密钥，节省两行代码
*   data.table 按其键排序。从您使用行位置来确定分配的事实来看，我猜您不会想按自己的方式设置键。在上面的代码中，我将`B.DT`' 键更改为 `b2\.

# visual-studio-2008 - SSIS 2008 简单的 csv 文件上传到数据库表中

> ID：15475996
> 
> 赞同：0
> 
> 时间：2013-03-18T11:43:20.903
> 
> 标签：visual-studio-2008, ssis

我是 SSIS 的新手，但要完成一个简单的任务和一个小问题。

我有一个数据流任务，它有一个连接到 OLE DE 目标对象的平面文件源。CSV 文件包含与数据库表中的列匹配的标题。

我最初对 Destination 对象中的 3 个字段有一些问题，因为这些字段需要从 [DT_WSTR] 转换为数据类型 [DT_STR]。

我的 Dataflow 对象不会以红十字的形式产生任何错误，但是当我运行包时，我从即时/输出窗口收到以下消息...

**任务失败：员工负载警告：包中的 0x80019002：SSIS 警告代码 DTS_W_MAXIMUMERRORCOUNTREACHED。Execution 方法成功，但引发的错误数 (4) 达到了允许的最大值 (1)；导致失败。当错误数量达到 MaximumErrorCount 中指定的数量时，就会发生这种情况。更改 MaximumErrorCount 或修复错误。SSIS 包“Package.dtsx”完成：失败。**

在 DFT 的属性中，我将 MaximunErrorCount 增加到 100，但这仍然会产生错误。我在 CSV 中只有 1 行数据来测试包，所以我很困惑为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:28:35.157

由于这仍然是一个问题，我找到了另一种方法来完成这项任务。