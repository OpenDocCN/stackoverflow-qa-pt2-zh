# StackOverflow 问答 14502000-14502999

# mongodb - 如何为 mongodb 日期时间操作设置时区

> ID：14502004
> 
> 赞同：-3
> 
> 时间：2013-01-24T13:03:08.720
> 
> 标签：mongodb, datetime

在 mongodb 中，我知道可以在 datetime 对象上使用查询操作，例如： [$hour](http://docs.mongodb.org/manual/reference/aggregation/hour/)、 [$dayOfWeek](http://docs.mongodb.org/manual/reference/aggregation/dayOfWeek/) 等。

但我没有找到任何关于时区设置的手册，类似于在 mysql 中可以做的事情，比如：

```
SET time_zone = '-8:00'; 
```

那么，在mongodb中有没有做类似的事情呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-13T10:28:32.510

使用这个属性

```
[BsonDateTimeOptions(Kind = DateTimeKind.Local)]
public DateTime Date { get; set; } 
```

# javascript - 使用 $scope.$emit 和 $scope.$on

> ID：14502006
> 
> 赞同：899
> 
> 时间：2013-01-24T13:03:17.177
> 
> 标签：javascript, angularjs

如何使用和方法将我的`$scope`对象从一个控制器发送到另一个控制器？`.$emit``.$on`

```
function firstCtrl($scope) {
    $scope.$emit('someEvent', [1,2,3]);
}

function secondCtrl($scope) {
    $scope.$on('someEvent', function(mass) { console.log(mass); });
} 
```

它不像我认为的那样工作。怎么做`$emit`和`$on`工作？

* * *

## 回答 #1

> 赞同：1506
> 
> 时间：2013-01-24T13:41:29.233

首先，父子范围关系确实很重要。您有两种可能发出一些事件：

*   `$broadcast`-- 向下分派事件到所有子作用域，
*   `$emit`-- 通过作用域层次向上调度事件。

我对您的控制器（范围）关系一无所知，但有几种选择：

1.  如果 scope of`firstCtrl`是该范围的父级，则您的代码应通过`secondCtrl`替换in来工作：`$emit``$broadcast``firstCtrl`

    ```
    function firstCtrl($scope)
    {
        $scope.$broadcast('someEvent', [1,2,3]);
    }

    function secondCtrl($scope)
    {
        $scope.$on('someEvent', function(event, mass) { console.log(mass); });
    } 
    ```

2.  如果您的范围之间没有父子关系，您可以注入`$rootScope`控制器并将事件广播到所有子范围（即也是`secondCtrl`）。

    ```
    function firstCtrl($rootScope)
    {
        $rootScope.$broadcast('someEvent', [1,2,3]);
    } 
    ```

3.  最后，当您需要将事件从子控制器向上分派到作用域时，您可以使用`$scope.$emit`. 如果范围`firstCtrl`是范围的父级`secondCtrl`：

    ```
    function firstCtrl($scope)
    {
        $scope.$on('someEvent', function(event, data) { console.log(data); });
    }

    function secondCtrl($scope)
    {
        $scope.$emit('someEvent', [1,2,3]);
    } 
    ```

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2014-04-06T19:34:26.700

我还建议将第 4 个选项作为@zbynour 建议选项的更好替代方案。

使用`$rootScope.$emit`而不是`$rootScope.$broadcast`不管发送和接收控制器之间的关系。这样，事件将保留在集合中，`$rootScope.$$listeners`而`$rootScope.$broadcast`事件传播到所有子范围，其中大多数可能无论如何都不会是该事件的侦听器。当然，在接收控制器端，您只需使用`$rootScope.$on`.

对于此选项，您必须记住销毁控制器的 rootScope 侦听器：

```
var unbindEventHandler = $rootScope.$on('myEvent', myHandler);
$scope.$on('$destroy', function () {
  unbindEventHandler();
}); 
```

* * *

## 回答 #3

> 赞同：114
> 
> 时间：2015-07-11T14:47:20.597

> 如何使用 .$emit 和 .$on 方法将我的 $scope 对象从一个控制器发送到另一个控制器？

您可以在应用程序的层次结构中发送您想要的任何对象，包括**$scope**。

下面是关于**广播**和**发射**如何工作的快速想法。

注意下面的节点；全部嵌套在节点 3中。当您遇到这种情况时，您可以使用**广播**和**发射。**

**注意：**本例中每个节点的数量是任意的；它很容易成为第一；第二名；甚至是数字 1,348。每个数字只是此示例的标识符。这个例子的重点是展示 Angular 控制器/指令的嵌套。

```
 3
           ------------
           |          |
         -----     ------
         1   |     2    |
      ---   ---   ---  ---
      | |   | |   | |  | | 
```

看看这棵树。您如何回答以下问题？

**注意：**还有其他方法可以回答这些问题，但这里我们将讨论**广播**和**发射**。此外，在阅读下面的文本时，假设每个数字都有自己的文件（指令、控制器），例如 one.js、two.js、three.js。

**节点1**如何与节点**3**对话？

在文件**one.js 中**

```
scope.$emit('messageOne', someValue(s)); 
```

在文件**three.js** - 需要通信的所有子节点的最上面的节点。

```
scope.$on('messageOne', someValue(s)); 
```

节点 2 如何与节点 3 对话？

在文件**two.js**

```
scope.$emit('messageTwo', someValue(s)); 
```

在文件**three.js** - 需要通信的所有子节点的最上面的节点。

```
scope.$on('messageTwo', someValue(s)); 
```

节点 3 如何与节点 1 和/或节点 2 对话？

在文件**three.js** - 需要通信的所有子节点的最上面的节点。

```
scope.$broadcast('messageThree', someValue(s)); 
```

在文件**one.js** && **two.js 中，**无论您要捕获消息的哪个文件或两者兼而有之。

```
scope.$on('messageThree', someValue(s)); 
```

节点 2 如何与节点 1 对话？

在文件**two.js**

```
scope.$emit('messageTwo', someValue(s)); 
```

在文件**three.js** - 需要通信的所有子节点的最上面的节点。

```
scope.$on('messageTwo', function( event, data ){
  scope.$broadcast( 'messageTwo', data );
}); 
```

在文件**one.js 中**

```
scope.$on('messageTwo', someValue(s)); 
```

**然而**

> 当您让所有这些嵌套的子节点尝试像这样进行通信时，您会很快看到许多**$on's**、**$broadcast's**和**$emit's**。

这是我喜欢做的事情。

在最上面的父节点（在这种情况下为**3** ...），它可能是您的父控制器...

所以，在文件**three.js**

```
scope.$on('pushChangesToAllNodes', function( event, message ){
  scope.$broadcast( message.name, message.data );
}); 
```

现在在任何子节点中，您只需要**$emit消息或使用****$on**捕获它。

**注意：在不使用****$emit**、**$broadcast**或**$on**的情况下，通常很容易在一个嵌套路径中进行串扰，这意味着大多数用例适用于尝试让节点**1**与节点**2**通信或反之亦然的情况。

节点 2 如何与节点 1 对话？

在文件**two.js**

```
scope.$emit('pushChangesToAllNodes', sendNewChanges());

function sendNewChanges(){ // for some event.
  return { name: 'talkToOne', data: [1,2,3] };
} 
```

在文件**three.js** - 需要通信的所有子节点的最上面的节点。

我们已经处理了这个还记得吗？

在文件**one.js 中**

```
scope.$on('talkToOne', function( event, arrayOfNumbers ){
  arrayOfNumbers.forEach(function(number){
    console.log(number);
  });
}); 
```

您仍然需要对要捕获的每个特定值使用**$on**，但是现在您可以在任何节点中创建您喜欢的任何内容，而不必担心在我们捕获和广播时如何通过父节点间隙获取消息通用的**pushChangesToAllNodes**。

希望这可以帮助...

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2016-04-02T18:54:47.637

为了`$scope object`从一个控制器发送到另一个控制器，我将在此处讨论它们`$rootScope.$broadcast`，`$rootScope.$emit`因为它们最常用。

**案例一**：

$rootScope.$broadcast:-

```
$rootScope.$broadcast('myEvent',$scope.data);//Here `myEvent` is event name

$rootScope.$on('myEvent', function(event, data) {} //listener on `myEvent` event 
```

`$rootScope`侦听器不会自动销毁。您需要使用`$destroy`. 最好使用`$scope.$on`监听`$scope`器自动销毁，即一旦 $scope 被销毁。

```
$scope.$on('myEvent', function(event, data) {} 
```

或者，

```
 var customeEventListener = $rootScope.$on('myEvent', function(event, data) {

  }
  $scope.$on('$destroy', function() {
        customeEventListener();
  }); 
```

**案例二：**

$rootScope.$emit：

```
 $rootScope.$emit('myEvent',$scope.data);

   $rootScope.$on('myEvent', function(event, data) {}//$scope.$on not works 
```

**$emit 和 $broadcast 的主要区别在于 $rootScope.$emit 事件必须使用 $rootScope.$on 来监听，因为发出的事件永远不会通过作用域树下来。**.
在这种情况下，您还必须像 $broadcast 一样销毁侦听器。

**编辑：**

> 我更喜欢不使用`$rootScope.$broadcast + $scope.$on`但使用 `$rootScope.$emit+ $rootScope.$on`. 该`$rootScope.$broadcast + $scope.$on`组合可能会导致严重的性能问题。那是因为事件将在所有范围内冒泡。

**编辑 2**：

> 此答案中解决的问题已在 angular.js 版本 1.2.7 中得到解决。$broadcast 现在可以避免在未注册的范围内冒泡，并且运行速度与 $emit 一样快。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-01-10T07:01:39.450

您必须使用 $rootScope 在同一应用程序中的控制器之间发送和捕获事件。将 $rootScope 依赖注入你的控制器。这是一个工作示例。

```
app.controller('firstCtrl', function($scope, $rootScope) {        
        function firstCtrl($scope) {
        {
            $rootScope.$emit('someEvent', [1,2,3]);
        }
}

app.controller('secondCtrl', function($scope, $rootScope) {
        function secondCtrl($scope)
        {
            $rootScope.$on('someEvent', function(event, data) { console.log(data); });
        }
} 
```

链接到 $scope 对象的事件只在所有者控制器中工作。控制器之间的通信是通过 $rootScope 或 Services 完成的。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-03-20T11:19:37.833

您可以从控制器调用返回承诺的服务，然后在控制器中使用它。并进一步使用`$emit`或`$broadcast`通知其他控制器。就我而言，我必须通过我的服务进行 http 调用，所以我做了这样的事情：

```
function ParentController($scope, testService) {
    testService.getList()
        .then(function(data) {
            $scope.list = testService.list;
        })
        .finally(function() {
            $scope.$emit('listFetched');
        })

    function ChildController($scope, testService) {
        $scope.$on('listFetched', function(event, data) {
            // use the data accordingly
        })
    } 
```

我的服务看起来像这样

```
 app.service('testService', ['$http', function($http) {

        this.list = [];

        this.getList = function() {
            return $http.get(someUrl)
                .then(function(response) {
                    if (typeof response.data === 'object') {
                        list = response.data.results;

                        return response.data;
                    } else {
                        // invalid response
                        return $q.reject(response.data);
                    }

                }, function(response) {
                    // something went wrong
                    return $q.reject(response.data);
                });

        }

    }]) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-09-11T10:37:05.463

这是我的功能：

```
$rootScope.$emit('setTitle', newVal.full_name);

$rootScope.$on('setTitle', function(event, title) {
    if (scope.item) 
        scope.item.name = title;
    else 
        scope.item = {name: title};
}); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-04-13T13:25:38.587

```
<!DOCTYPE html>
<html>

<head>
<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<script>
var app = angular.module('MyApp',[]);
app.controller('parentCtrl',function($scope){
  $scope.$on('MyEvent',function(event,data){    
    $scope.myData = data;
  });
 });

app.controller('childCtrl',function($scope){
  $scope.fireEvent = function(){ 
  $scope.$emit('MyEvent','Any Data');
  }  
 });
</script>
</head>
<body ng-app="MyApp">
<div ng-controller="parentCtrl" ng-model="myName">

{{myData}}

 <div ng-controller="childCtrl">
   <button ng-click="fireEvent()">Fire Event</button>
 </div>

</div>
</body>
</html> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-05-08T14:36:56.790

下面的代码显示了事件被向上调度到父控制器（rootScope）的两个子控制器

```
<body ng-app="App">

    <div ng-controller="parentCtrl">

        <p>City : {{city}} </p>
        <p> Address : {{address}} </p>

        <div ng-controller="subCtrlOne">
            <input type="text" ng-model="city" />
            <button ng-click="getCity(city)">City !!!</button>
        </div>

        <div ng-controller="subCtrlTwo">

            <input type="text" ng-model="address" />
            <button ng-click="getAddrress(address)">Address !!!</button>

        </div>

    </div>

</body> 
```

```
var App = angular.module('App', []);

// parent controller
App.controller('parentCtrl', parentCtrl);

parentCtrl.$inject = ["$scope"];

function parentCtrl($scope) {

    $scope.$on('cityBoom', function(events, data) {
        $scope.city = data;
    });

    $scope.$on('addrBoom', function(events, data) {
        $scope.address = data;
    });
}

// sub controller one

App.controller('subCtrlOne', subCtrlOne);

subCtrlOne.$inject = ['$scope'];

function subCtrlOne($scope) {

    $scope.getCity = function(city) {

        $scope.$emit('cityBoom', city);    
    }
}

// sub controller two

App.controller('subCtrlTwo', subCtrlTwo);

subCtrlTwo.$inject = ["$scope"];

function subCtrlTwo($scope) {

    $scope.getAddrress = function(addr) {

        $scope.$emit('addrBoom', addr);   
    }
} 
```

[http://jsfiddle.net/shushanthp/zp6v0rut/](http://jsfiddle.net/shushanthp/zp6v0rut/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-22T14:59:56.413

Scope(s) 可用于将事件传播、分派到作用域子级或父级。

**$emit** - 将事件传播给父级。**$broadcast** - 将事件传播给孩子。 **$on** - 监听事件的方法，由 $emit 和 $broadcast 传播。

示例*index.html*：

```
<div ng-app="appExample" ng-controller="EventCtrl">
      Root(Parent) scope count: {{count}}
  <div>
      <button ng-click="$emit('MyEvent')">$emit('MyEvent')</button>
      <button ng-click="$broadcast('MyEvent')">$broadcast('MyEvent')</button><br>

      Childrent scope count: {{count}} 
  </div>
</div> 
```

示例*app.js*：

```
angular.module('appExample', [])
.controller('EventCtrl', ['$scope', function($scope) {
  $scope.count = 0;
  $scope.$on('MyEvent', function() {
    $scope.count++;
  });
}]); 
```

在这里你可以测试代码：http: [//jsfiddle.net/zp6v0rut/41/](http://jsfiddle.net/zp6v0rut/41/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-09T16:04:20.250

根据 angularjs 事件文档，接收端应该包含具有类似结构的参数

@参数

-- {Object} 事件是包含事件信息的事件对象

-- 被调用者传递的 {Object} 参数（请注意，这只能是一个更好地发送字典对象的参数）

`$scope.$on('fooEvent', function (event, args) { console.log(args) });` 从你的代码

此外，如果您试图获取跨不同控制器可用的共享信息，还有另一种方法可以实现这一点，那就是角度服务。由于服务是单例信息，因此可以跨控制器存储和获取信息。只需创建 getter 和该服务中的setter函数，公开这些函数，在服务中创建全局变量并使用它们来存储信息

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-19T09:31:06.727

最简单的方法：

> HTML

```
 <div ng-app="myApp" ng-controller="myCtrl"> 

        <button ng-click="sendData();"> Send Data </button>

    </div> 
```

> JavaScript

```
 <script>
        var app = angular.module('myApp', []);
        app.controller('myCtrl', function($scope, $rootScope) {
            function sendData($scope) {
                var arrayData = ['sam','rumona','cubby'];
                $rootScope.$emit('someEvent', arrayData);
            }

        });
        app.controller('yourCtrl', function($scope, $rootScope) {
            $rootScope.$on('someEvent', function(event, data) {
                console.log(data); 
            }); 
        });
    </script> 
```

# javascript - 使用 Javascript 功能的图像上传和预览在 IE8 中不起作用

> ID：14502010
> 
> 赞同：0
> 
> 时间：2013-01-24T13:03:21.683
> 
> 标签：javascript, image-upload

以下用于上传图像和预览的 Javascript 编码在 chrome 中可以正常工作，但在 IE8 中无法正常工作。我尝试了一整天，但我无法解决这个问题。任何人都可以帮助我解决这个问题。提前致谢

```
<form name="addpoll" action="" method="post" id="addpoll" enctype="multipart/form-data" class="polladdform" onsubmit="return validation();">

    <input type="button" onclick="HandFileButtonClick();"  value="Browse" id="firstremove" style="margin-top: 30px;" class="addmultiple">

    <input type=file name="choiceimg1" id="chimg1" value ="Select"  onchange="readURL(this)" style="display:none;">

    <img src="#" name="viewimg1" class="addmultiple" id="viewimg1" height="70px" width="85px" style="display:none"/>

<script>
function HandFileButtonClick()

  {

    document.addpoll.choiceimg1.click();

  }
function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                    var ss=$(input).attr('name');

                    var n=ss.split("choiceimg");
                reader.onload = function (e) {

                    $('#viewimg'+n[1]).css({'display':'block','margin-left':'332px','margin-top':'-88px'});

                    $('#viewimg'+n[1]).attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:06:26.937

微软提供了一个对象来处理文件`FileSystemObject`，文档在[这里](http://msdn.microsoft.com/en-us/library/2z9ffy99%28v=vs.84%29.aspx)。

它确实可以正确获取文件内容，但有两个限制使其在大多数情况下无用：

*   “初始化并编写未标记为安全的 ActiveX 控件”必须为“启用”；
*   “将文件上传到服务器时包括本地目录路径”必须为“启用”。

这两个选项在 IE 的安全设置中，我认为用户在正常情况下不会将它们设置为“启用”。

# c - 指针运算中的访问冲突

> ID：14502013
> 
> 赞同：3
> 
> 时间：2013-01-24T13:03:31.000
> 
> 标签：c, pointer-arithmetic

使用代码：

```
int nsize;
int * buffer;
char TargetBuffer[4096];
const SIZE_T buffersize = (320*240) * sizeof(int);

buffer = (int *) malloc(bufferSize);
// fill buffer with data

nsize = 0;
while(nsize < buffersize)
{
    // HERE after some loops i get Access Violation
    memcpy(TargetBuffer, buffer + nsize, 4096);

    // do stuff with TargetBuffer
    nsize += 4096;
} 
```

为什么我会收到访问冲突？我应该改变什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T13:08:23.410

当您添加时，`buffer + nsize`您必须意识到您实际上是在添加`buffer + (nsize * (sizeof(int))`，因为这是`int *`您进行指针运算的时候。

所以它可能与它有关。尝试增加 nsize by`nsize += 4096/sizeof(int)`或更聪明的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:29:05.060

我会做这样的事情：

```
SIZE_T left = buffersize;
nsize = 0;

while(left)
{
    SIZE_T block = (left >= 4096)?4096:left;
    // HERE after some loops i get Access Violation
    memcpy(TargetBuffer, buffer, block);
    buffer += (left) / sizeof(*buffer);

    // do stuff with TargetBuffer
    left -= block;
} 
```

我很确定您看到的问题是您正在超越边缘，因为您的代码没有处理不是 4K 倍数的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:13:18.297

将您的`while`循环更新为

```
while(nsize < (buffersize/sizeof(int)) 
```

`buffer`是`int`s 而不是`char`。`int`占用多个字节，您过度计数并从不属于`buffer`.

# ios - 如何隐藏第一个单元格顶部的分隔符？

> ID：14502015
> 
> 赞同：1
> 
> 时间：2013-01-24T13:03:34.410
> 
> 标签：ios, objective-c

我正在定制一个 Tableview ..

我想隐藏在第一个单元格上分隔的顶部分隔线。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:06:19.723

配置不带分隔符的 TableView，然后在每个单元格底部添加自定义图像，看起来与分隔符相同，这样您就可以实现此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:08:05.867

UITableView 有

```
@property(nonatomic) UITableViewCellSeparatorStyle separatorStyle;
@property(nonatomic,retain) UIColor               *separatorColor; 
```

所以试试这个

```
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

或者

```
tableView.separatorColor = [UIColor clearColor]; 
```

之后，您应该使用自己的分隔符自定义所有单元格。只需使用自动调整大小的蒙版**灵活的上边距**和**灵活的宽度**添加视图 不要忘记将其添加到`cell.contentView` 分隔符的实际颜色是`[UIColor grayColor];`

# yii - 在不自动加载 Jquery 的情况下使用 Yii 的 Ajax 验证

> ID：14502018
> 
> 赞同：2
> 
> 时间：2013-01-24T13:03:39.573
> 
> 标签：yii

我想使用[CActiveForm](http://www.yiiframework.com/doc/api/1.1/CActiveForm)的[AjaxValidation](http://www.yiiframework.com/doc/api/1.1/CActiveForm#enableAjaxValidation-detail)。

在启用 AjaxValidation 之前，我的*布局视图文件*是这样的：

```
<html lang="tr-TR" dir="ltr">
<head>
<script src="<?php echo Yii::app()->request->baseUrl; ?>/js/jquery.js"></script>
</head> 
```

如您所见，我在布局页面上调用`jquery`框架（因为我在每个页面上都使用）。

我决定使用 CActiveForm 的 ajax 验证。`enableAjaxValidation`首先在调用时启用：

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'otel-form',
    'enableAjaxValidation'=>true,
)); ?> 
```

然后在我的控制器上取消注释

```
$this->performAjaxValidation($model); 
```

但我得到了`$(...).yiiactiveform is not a function`错误。当我检查页面的源代码时：

如您所见，还包括了另外一个 jquery 库。所以页面上有2个jquery文件。因此，我遇到了错误。接下来我放了这样的东西来禁用jquery。

```
Yii::app()->clientscript->scriptMap['jquery.js'] = false; 
```

现在 jquery 只加载一次。但是这个结果是：

```
<html lang="tr-TR" dir="ltr">
<head>
<script type="text/javascript" src="/istanbulcityhotels/assets/cb2686c8/jquery.yiiactiveform.js"></script>
<script src="/istanbulcityhotels/js/jquery.js"></script>
</head> 
```

**jquery.yiiactiveform.js在****jquery.js**之前调用。它应该在 jquery.js 之后调用。有点糊涂了。我应该怎么办？

**附加** 是的，我读[了这个](https://stackoverflow.com/questions/12445488/how-to-disable-yii-jquery-autoload-on-ajax-request)问题，因为标题非常相似，但问题**不**一样。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:08:41.870

您不应该在布局中手动包含 jQuery。不要这样做，而是将其包含在您的`Controller`基类中：

```
public function init() {
    Yii::app()->clientScript->registerCoreScript('jquery');
} 
```

不要忘记`parent::init()`从您的具体控制器中调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-18T03:20:26.223

似乎 CActiveForm`title`使用`CClientScript::POS_HEAD`常量在标记之前插入脚本。所以解决方法是添加此代码

```
<?php
$cs=Yii::app()->clientScript;
$cs->scriptMap=array(
    'jquery.js'=>false
);?> 
```

到主布局文件的顶部，以阻止它加载 jquery，然后`title`在加载 jquery 文件后放置标签

```
<script src="<?php echo Yii::app()->request->baseUrl; ?>/js/jquery.js"></script> 
```

这样 jquery.yiiactiveform.js 将在 jquery 之后立即加载。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-13T05:00:19.703

只需将您自己的 jquery 放在标签标题上，就像这样：

```
<script src="/istanbulcityhotels/js/jquery.js"></script>
<title>your title</title> 
```

# smarty - Vtiger 选择查询

> ID：14502019
> 
> 赞同：1
> 
> 时间：2013-01-24T13:03:42.147
> 
> 标签：smarty, crm, vtiger

我正在以类似的方式复制一个 vtiger 查询，但是有一个变化是，首先给出的查询只有一个输出，所以在第二个参数中保留 0，但是在我的自定义查询中有多个输出，所以我应该保留什么而不是0 两者都给出如下：

1.  原始查询

`$is_recurring_event_query = $adb->pquery('SELECT recurring_group_id from vtiger_activity where activityid=?',array($id));`

`$is_recurring_event = $adb->query_result($is_recurring_event_query,0,'recurring_group_id');`

1.  复制它以不同的方式使用

`$is_recurring_event_activity_query = $adb->pquery('SELECT activityid from vtiger_activity where recurring_group_id='.$is_recurring_event);`

`$is_recurring_event_activity = $adb->query_result ($is_recurring_event_activity_query,0,'activityid');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T11:17:18.450

您必须放置变量并且必须使用 for 循环来执行查询并获取多个值。

假设您的查询是这样的

```
$result = $adb->pquery ('SELECT * from vtiger_activity where id='.$recordId);
$noofrow = $adb->num_rows($result );
for($i=0; $i<$noofrow ; $i++) {
            $Data['activityid']=$adb->query_result($result,$i,'activityid');
            $Data['activityname']=$adb->query_result($result,$i,'activityname');
} 
```

在 $Data 中，您将获得一个值数组。

# pthreads - 分离后在主线程中调用 pthread_exit 使其失效

> ID：14502020
> 
> 赞同：1
> 
> 时间：2013-01-24T13:03:47.730
> 
> 标签：pthreads, pthread-join

我正在尝试创建一个新线程，将执行卸载到新线程并杀死主线程。这是示例程序。

```
#include <stdio.h>
#include <pthread.h>

void * main_thread(void * param) {
  while (1) {
  }
}

int main(int argc, char *argv[]) {

int result = 0;

pthread_attr_t attr;
pthread_t thread;
result = pthread_attr_init(&attr);
printf ("attr init : %d\n", result);

result = pthread_attr_setstacksize(&attr, 1024);
printf ("attr set stack: %d\n", result);

result = pthread_create (&thread, &attr, main_thread, NULL);
printf ("create new thread: %d\n", result);

result = pthread_detach(pthread_self());
printf ("detach main thread: %d\n", result);

pthread_exit (NULL);

return 0;

} 
```

但这会使线程（和进程？）处于失效状态。

```
ps -aef | grep threaded
user 204 306 9 10:20 pts/8    00:00:21 [threaded_progra] <defunct> 
```

然后我发现了这个 - [http://www.mentby.com/kaz-kylheku/main-thread-pthreadexitsysexit-bug.html](http://www.mentby.com/kaz-kylheku/main-thread-pthreadexitsysexit-bug.html)

问题的原因是什么？有没有办法在不让线程处于僵尸/失效状态的情况下实现相同的目标。

# windows-services - 如何在 windows server 2003 上启用 HTTPS 页面

> ID：14502023
> 
> 赞同：1
> 
> 时间：2013-01-24T13:03:53.223
> 
> 标签：windows-services, windows-server-2003

我无法加载 HTTPS 页面 - 我找不到页面！

我想这与服务器有关。

我该怎么做才能启用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-06T13:13:38.197

您可以安装此修补程序：http:
[//support.microsoft.com/kb/968730](http://support.microsoft.com/kb/968730)

> 如果 CA 配置为使用 SHA2 256 或更高的加密，则 Windows Server 2003 和 Windows XP 客户端无法从基于 Windows Server 2008 的证书颁发机构 (CA) 获取证书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:07:50.350

SSL 端口被防火墙阻止。我将端口 443 添加到 Windows 防火墙异常（TCP 异常）中，并设法使用“https://”访问该站点

# android - 安卓。ImageView 无法转换为 android.widget.textview

> ID：14502028
> 
> 赞同：2
> 
> 时间：2013-01-24T13:04:16.050
> 
> 标签：android, imageview, expandablelistview

我有个问题。请帮帮我。我有 viewpager 的活动。见代码：

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    mContext = this;
    setContentView(R.layout.cards);
    expListViewCategory = new ExpandableListView(mContext);
    SetListViewCategory();
    pages = new Vector<View>();
    pages.add(expListViewCategory);
    adapter = new CardsPagerAdapter(mContext, pages);
    pager = (ViewPager)findViewById( R.id.viewpager );
    pager.setAdapter(adapter);
}

private void SetListViewCategory()
    {
        groupData = new ArrayList<Map<String,String>>();
        childData = new ArrayList<ArrayList<Map<String, String>>>();

        String groupFrom[] = new String[] {"groupName"};
        int groupTo[] = new int[] {R.id.textGroup};

        String childFrom[] = new String[] {"imagePath", "subCatName"};
        int childTo[] = new int[] {R.id.cardImage, R.id.textChild};

        SimpleExpandableListAdapter adapter = new SimpleExpandableListAdapter(
                this,
                groupData, R.layout.group_view, groupFrom, groupTo,
                childData, R.layout.child_view, childFrom, childTo);

        expListViewCategory.setAdapter(adapter); 
```

child_view.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:id="@+id/liner">

    <ImageView
          android:id="@+id/cardImage"
          android:layout_width="60dp"
          android:layout_height="40dp"
          android:layout_marginLeft="20dp"
          android:layout_marginTop="20dp"/>

    <TextView
         android:id="@+id/textChild"
         android:layout_width="wrap_content"
         android:layout_height="40dp"
         android:layout_marginLeft="20dp"
         android:layout_marginTop="20dp"
         android:textColor="@android:color/white" />

</LinearLayout> 
```

不行：

```
String childFrom[] = new String[] {"imagePath", "subCatName"};
            int childTo[] = new int[] {R.id.cardImage, R.id.textChild}; 
```

工作：

```
String childFrom[] = new String[] {"subCatName"};
        int childTo[] = new int[] {R.id.textChild}; 
```

使用 ImageView 我有错误：“imageView 无法转换为 android.widget.textview”。

对不起我的英语不好 ！提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:17:49.010

您需要扩展您的 SimpleExpandableListAdapter，因为他们期望 TexViews [http://developer.android.com/reference/android/widget/SimpleExpandableListAdapter.html](http://developer.android.com/reference/android/widget/SimpleExpandableListAdapter.html)

看看类似的解决方案 [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/J4H9332aQp4](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/J4H9332aQp4)

# ruby-on-rails - 是否有任何 gem 可以以 xml 格式向某些服务发送请求

> ID：14502030
> 
> 赞同：0
> 
> 时间：2013-01-24T13:04:24.680
> 
> 标签：ruby-on-rails, xml, web-services, rest, xml-serialization

我想以 xml 向某些第三方服务发送请求，并期望以 xml 响应。我正在寻找一些宝石或任何想法如何做到这一点。

我的想法是

1.  做一些parttail _example.xml.builder

2.  onclick 从我的视图到某个按钮将 ajax 请求发送到控制器操作并使用 render_to_string 呈现该 xml 文档，然后

3.  将其保存在某个变量中

4.  然后以相同的操作调用该服务方法

但这不是正确的事情，因为我期望应该有比我建议的事情更有效的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:26:12.313

RoR 本身并不使用 XML，因此需要某种程度的转换。

话虽如此，在 RoR 应用程序中生成 XML 非常简单。有几种方法可以做到这一点，我最喜欢将所需的数据构造为 Hash（Ruby 原生），然后是 the_hash.to_xml。

如果您希望获得一致的结果，也可以在模型类中定义 XML 转换：

```
class Example < ActiveRecord::Base

  # ensure that only column1, column2, etc are output as XML
  def to_xml(options = {})
    super( options.merge( select(:column1, :column2, etc) ) )
  end

end 
```

然后在你的控制器中：

```
poster = Example.find(123)
request = Net::HTTP.new('www.example.com', 80)
request.post('/path', poster.to_xml) 
```

希望以上演示了一个将 XML 数据发布到远程主机的简单示例。正如您所提到的，可以使用 xml.builder 构建更复杂的 XML

HTH，祝你好运。

# javascript - 在准备好之前得到身体？

> ID：14502031
> 
> 赞同：0
> 
> 时间：2013-01-24T13:04:25.770
> 
> 标签：javascript, domready

```
<html>
<head>
<script>alert(document.body.className);</script>
</head>
<body>
something
</body>
</html> 
```

我希望这段代码可以返回主体的类名。

但相反，我得到`Uncaught TypeError: Cannot read property 'className' of null`

有什么方法可以在`domready`事件发生之前在头部获取和设置身体的类名吗？

唯一的方法是将此代码附加到`domready`事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:06:56.237

不使用 JavaScript。在 body 元素存在之前，您无法访问 document.body。它直到几乎整个页面都被渲染后才存在（因为关闭是任何页面上的倒数第二个标签）

# wordpress - wordpress 中的 get_current_user_id() 会触发数据库请求吗？

> ID：14502034
> 
> 赞同：1
> 
> 时间：2013-01-24T13:04:37.003
> 
> 标签：wordpress

我在我的插件`get_current_user_id()`中`wp_get_current_user()`多次使用。这些函数是否会在我每次使用它们时发送数据库请求，或者当前用户的用户对象是否始终可用（因为 wordpress 在初始化时无论如何都会请求它）？

在我的脚本开头使用当前用户信息声明一个全局变量会更好吗？

```
<?php
global $currentUser;
$currentUser = wp_get_current_user();

function function1() {
    global $currentUser;
    echo $currentUser->ID;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:22:55.187

不，它不会。它将读取 wordpress 全局变量`$current_user`

# ctime - ctime 中的clock_gettime 错误

> ID：14502037
> 
> 赞同：0
> 
> 时间：2013-01-24T13:04:47.403
> 
> 标签：ctime

我有这个功能：

无效 Estatisticas::iniciarTempo() {

```
clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &tempoInicial); 
```

}

我正在尝试通过 ctime 使用clock_gettime，但出现了一些错误：

“未定义对‘clock_gettime’的引用”

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T18:43:40.063

从 clock_gettime/clock_getres 手册页：

> 与 -lrt 链接。

该符号在 POSIX 实时库中定义。将“-lrt”添加到您的编译行：

```
gcc -lrt -o myprog myprog.c 
```

# javascript - 如何更改 jqPlot lineLabels 的值

> ID：14502039
> 
> 赞同：1
> 
> 时间：2013-01-24T13:04:57.850
> 
> 标签：javascript, jqplot, pie-chart

我正在尝试使用 jqPlot 绘制一个 PIE。我正在使用 lineLabels 的属性在 PIE 之外显示带有线条的标签。

问题是这些标签的值是：（例如）过期（34%）

相反，我希望它显示过期（42）。

42 是字段的值，而不是百分比。

请帮助我，我到处搜索互联网。

这是我的代码：

```
var plot1 = jQuery.jqplot (graphContainerId, [data], {
    gridPadding: {top:0, bottom:0, left:50, right:50},
    seriesColors: COLOURS_ARRAY,
    seriesDefaults:{
        shadow:false, 
        enableMouseTracking: false,
        animation: false,
        renderer:$.jqplot.PieRenderer,
        rendererOptions: { 
            startAngle: -90,
            padding:50, 
            paddingColor:'#FFFFFF',
            lineLabels: true, 
            lineLabelsLineColor: '#777',
                            showDataLabels: true,
            dataLabels: 'value',
        }
    },

    legend: { show:false},
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:40:22.743

尝试这个：

```
$(document).ready(function(){
var data = [['A',40],['B',25],['C',35],['D',90]];
var plot1 = $.jqplot ('chart1', [data], {
gridPadding: {top:0, bottom:0, left:50, right:50},
seriesDefaults:{
    shadow:false, 
    enableMouseTracking: false,
    animation: false,
    renderer:$.jqplot.PieRenderer,
    rendererOptions: { 
        startAngle: -90,
        padding:50, 
        paddingColor:'#FFFFFF',
        lineLabels: true, 
        lineLabelsLineColor: '#777',
        showDataLabels: true,
        dataLabels: data,
        dataLabelNudge: 70
    }
},
legend: { show:false}
});
}); 
```

[http://jsfiddle.net/pabloker/wMy5v/3/](http://jsfiddle.net/pabloker/wMy5v/3/)

# php - 根据在 single.php 上生成的变量显示 wordpress 侧边栏元素？

> ID：14502043
> 
> 赞同：0
> 
> 时间：2013-01-24T13:05:04.810
> 
> 标签：php, wordpress, sidebar

又是我！我会尽量在这里提供尽可能丰富的信息，但要简洁。我创建了一个循环来显示 DJ 混音及其相关信息，例如活动地点、混音日期、运行时间等。还在页面上，我创建了一个 if...else 条件语句，用于检查混音地点是否与所有事件发布，并显示该地点（if 部分）的任何即将发生的事件，就像[这个组合](http://djryanmcnally.flyfx.co.uk/mixes/october-mix/)一样！如果该场地没有安排任何活动，它会检查活动场地并通过将变量 ($up_events) 设置为 none 来显示该活动的照片，如果 $up_events 设置为“none”，则显示该场地的照片[这种混合](http://djryanmcnally.flyfx.co.uk/mixes/text-mix-one/)！

我想要显示其中一个的原因是为了保持页面整洁，因为我缺少侧边栏内容，而且我不想特别想用不相关的小部件填充它以使页面看起来均匀。我想做的是，如果安排了即将举行的活动，$up_event 变量不会设置为“无”，而是说活动照常显示，但我想在侧边栏中显示该活动的照片. 我尝试在小部件区域下方编辑 sidebar.php；

```
if (($up_events != 'none')){ include 'related_photos_sidebar.php'; } else echo '' 
```

如果 $up_events 不等于 none（即显示即将发生的事件），则显示照片，这不起作用。出于测试目的，我也尝试过；

```
if (($up_events == 'none')){ include 'related_photos_sidebar.php'; } else echo '' 
```

看看它是否会起作用，即使没有即将发生的事件，但同样，这不起作用。我假设它可能需要是一个全局变量？但是，我不完全确定。有什么想法我会怎么做？我在侧边栏中的 $up_events 上尝试了 var_dump，在任何一种情况下它都返回 NULL，我如何从 single.php 获取信息到 sidebar.php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:38:13.727

首先要知道你在哪里声明了 var $up_events 以及它是否正确。所以我猜它在 single.php 中？如果是这样，那么在你从 dbase 获得它的值之后。回应它。

```
echo ("I'm in single and up_events=" . $up_events); 
```

然后进入 sidebar.php 并执行相同的操作。

```
echo ("I'm in sidebar and up_events=" . $up_events); 
```

边栏中的第二个可能一无所获。侧边栏通常是通过运行 get_sidebar('primary'); 函数 - 你应该在 single.php 中看到这个。如果是这种情况，那么您只需将全局 $up_events 命令放在边栏中。希望有帮助。

# java - 是否可以用 Javafx 中的新场景填充 TableView 的行？

> ID：14502048
> 
> 赞同：1
> 
> 时间：2013-01-24T13:05:14.423
> 
> 标签：java, javafx-2, tableview, javafx

我有一个 TableView，当我开始下载一些文件时，它会用来自另一个 fxml 的新场景填充该行以显示状态下载，如下图所示

![在此处输入图像描述](../Images/bc4d6bc4d5bc54836974298a64ba0848.png)

是否可以？？你有什么建议怎么做，有或没有使用 TableView？也许使用 GridPane？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:02:02.493

你不能把 a 放在 a`Scene`中`TableView`。但你不需要。只需创建一个自定义`CellFactory`，其中`TableCell`包含 ProgressBar（或您想要的任何控件）。

您可以在此处找到示例：[无法在 JavaFX TableView 单元格值上显示工具提示](https://stackoverflow.com/questions/13700580/unable-to-show-the-tool-tip-on-the-javafx-tableview-cell-value)

# c# - 打开带有 C# 问题的 Java 控制台

> ID：14502049
> 
> 赞同：2
> 
> 时间：2013-01-24T13:05:26.667
> 
> 标签：c#, java, process

我正在尝试打开一个从 C# 运行控制台的 Java 应用程序

我这样做的代码：

```
 private void button3_Click(object sender, EventArgs e)
    {

          Process process = new Process();
          process.StartInfo.WorkingDirectory = @"C:\Program Files (x86)\Android\android-sdk\tools\";
          process.StartInfo.FileName = "monkeyrunner.bat";
          process.Start();
    } 
```

如果我直接从它所在的文件夹中直接运行monkeyrunner.bat文件，它就没有问题。但是，如果我尝试使用上面的方法打开它，我会收到以下错误：

```
线程“主”java.lang.UnsatisfiedLinkError 中的异常：C:\Users\Brad\AppData
\Local\Temp\jline_.dll：无法在 IA 32 位平台上加载 AMD 64 位 .dll
        在 java.lang.ClassLoader$NativeLibrary.load(Native Method)
        在 java.lang.ClassLoader.loadLibrary1（未知来源）
        在 java.lang.ClassLoader.loadLibrary0（未知来源）
        在 java.lang.ClassLoader.loadLibrary（未知来源）
        在 java.lang.Runtime.load0（未知来源）
        在 java.lang.System.load（未知来源）
        在 jline.WindowsTerminal.loadLibrary(WindowsTerminal.java:315)
        在 jline.WindowsTerminal.initializeTerminal(WindowsTerminal.java:240)
        在 jline.Terminal.setupTerminal(Terminal.java:75)
        在 org.python.util.JLineConsole.(JLineConsole.java:69)
        在 org.python.util.JLineConsole.(JLineConsole.java:53)
        在 org.python.util.JLineConsole.(JLineConsole.java:49)
        在 com.android.monkeyrunner.ScriptRunner.console(ScriptRunner.java:192)
        在 com.android.monkeyrunner.MonkeyRunnerStarter.run(MonkeyRunnerStarter.
爪哇：73）
        在 com.android.monkeyrunner.MonkeyRunnerStarter.main(MonkeyRunnerStarter
.java:189)

```

任何人都知道为什么从 C# 打开进程会导致问题？

如果我尝试运行 Bat 文件正在打开的 Java 文件，我会遇到同样的问题。

编辑：

我想我知道现在的问题是什么：

如果我从 Windows 打开一个 CMD，它会作为 64 位控制台运行。但是由于我的应用程序是 32 位构建的（使用 express），它会加载一个 32 位控制台。但是我看不到可以从一个打开 64 位控制台的方法32位应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:00:03.873

解决方法是将应用程序编译为 x86。这可以防止加载错误的 cmd.exe。

# c++ - C++ - 基类和私有头文件

> ID：14502051
> 
> 赞同：4
> 
> 时间：2013-01-24T13:05:28.417
> 
> 标签：c++, static-libraries, header-files

我正在用 C++ 编写一个库，并且有一个像这样的类层次结构：

message.h 文件（在 ./mylib/src 中）

```
class Message
{
}; 
```

request.h 文件（在 ./mylib/include/mylib 中）

```
#include "message.h"

class Request : public Message
{
}; 
```

response.h 文件（在 ./mylib/include/mylib 中）

```
#include "message.h"

class Response : public Message
{
}; 
```

我希望 mylib/src 文件夹中的所有内容对用户隐藏，并且只想分发 mylib/include 中的文件。但问题在于requst.h 和response.h #include message.h 因此用户在#include request.h 和response.h 时会收到“无此类文件”错误。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:09:09.507

您可以简单地提供一个公共接口`Message`并隐藏实际的类：

```
class IMessage
{
    Message* pImpl;
}; 
```

分发此标头并为`Message`.

另一种选择是使用组合而不是继承（您需要指针作为成员，而不是完整的对象）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T13:07:49.327

如果您希望能够使用`Response`并且`Request`需要在声明它们的位置包含头文件。这就是为什么您应该将这些标头放在公共包含文件夹中的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:25:53.997

基类应该是公开分发的，否则你将不得不编写序列化/反序列化机制。

# caml - 使用站点 ID (GUID) 使用客户端对象模型递归搜索站点

> ID：14502052
> 
> 赞同：1
> 
> 时间：2013-01-24T13:05:32.630
> 
> 标签：caml, sharepoint-api, sharepoint-clientobject

使用客户端对象模型我正在寻找最有效的方法来搜索 SharePoint 服务器并确定特定子网站是否存在给定其唯一 ID (GUID)。我们将 GUID 存储在我们的外部系统中，因为我们需要返回站点，并且 GUID 是唯一不能更改的属性。我知道 CAML 可用于在特定站点内搜索数据。但是，我还没有找到可以为子站点执行此操作的 API。我被迫进行递归搜索并使用 for 循环。就我而言，我们的服务器上可以嵌套数千个站点。

这个逻辑只做一层——但在存在数千个子站点时效率不高。

```
 public bool SiteExists(ClientContext context, string myGuid)
    {
        Web oWebsite = context.Web;
        context.Load(oWebsite, website => website.Webs, website => website.Title, website => website.Description, website => website.Id);
        context.ExecuteQuery();
        for (int i = 0; i != oWebsite.Webs.Count; i++)
        {
            if (String.Compare(oWebsite.Webs[i].Id.ToString(), myGuid, true) == 0)
            {
                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:32:06.643

```
public bool SiteExists(ClientContext context, string myGuid) {
    Guid id = new Guid(myGuid);
    Site site = context.Site;
    Web foundWeb = site.OpenWebById(id);

    context.Load(foundWeb);
    context.ExecuteQuery();

    if(foundWeb != null) {
        return true;
    }
    return false;
} 
```

# php - PHP脚本在Linux机器上运行arp命令以检测局域网中计算机的mac地址

> ID：14502056
> 
> 赞同：1
> 
> 时间：2013-01-24T13:05:47.880
> 
> 标签：php, linux, shell, command, arp

我需要在 linux 上运行 arp 命令或任何其他软件，它们可以显示在局域网有线连接中连接的计算机的所有 mac 地址的输出。此命令需要从 root 运行 apache。所以安全问题也很重要。

及时回复将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:11:08.467

2 种方法使用 php 中的 exec() 命令直接执行请求。

或者我要做的就是将 web 端与命令端完全分开。

让 php 将命令“请求”写入数据库表。

有一个 cron 脚本来执行 php/perl/python 任何 bash 脚本/应用程序，它将请求从 db 运行哪个命令（如果运行指定的命令，请检查请求是否挂起），然后将其结果集写回D B。

然后让您的 php 网站显示输出。所以它会是这样的：

请求（网络服务器）> 待处理的数据库 > cron 检查作业是否存在 > 如果作业存在执行请求的命令 > 返回数据数据库 > 网络服务器显示数据。

如何通知最终客户端已返回结果取决于您我建议使用 iframe 或 ajax 检查查询以查看数据库中是否存在尚未“查看”的结果。例如，将您的 cron 作业设置为每 60 秒运行一次，这样从用户请求它到返回实际结果的时间不会超过 60 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:15:22.547

您需要知道如何操作字符串！

```
<?php

exec("mylinuxcmd", $exitVals);

?> 
```

要运行命令，只需使用：

其中 $exitVals 是带有终端输出或“mylinuxcmd”的 na 数组，每行输出都存储在一个数组位置！

这是捕获服务器 IP 并在屏幕上打印它们的示例：

```
<?php

// exec ifconfig linux command and catch exit on $arr
exec("ifconfig", $arr);

foreach($arr as $ar) {
if(strstr($ar,'inet ')){
        if(!strstr($ar,'127.0.0.1')){

        $a = explode (' ',$ar);
        echo $a[1]."\r\n";
        }
}

}
?> 
```

根据您的系统 ifconfig，ip 可以在不同的位置，因此 $a[1] 可以是 $a[2] 等

# c - 尝试在 C 中安装 lib 包时出现包路径错误

> ID：14502062
> 
> 赞同：1
> 
> 时间：2013-01-24T13:06:06.123
> 
> 标签：c, fedora, pkg-config

我正在尝试在我的 Fedora 17 上安装 libpackedobjects。我尝试安装它的路径是 home/libpackedobjects。我遵循的步骤是：

1.  `git clone git://gitorious.org/libpackedobjectsd/libpackedobjectsd.git`
2.  `cd libpackedobjectsd`
3.  `autoreconf -i`
4.  `./configure`

当我尝试运行`./configure`时出现错误：

```
checking for LIBPACKEDOBJECTS... no
configure: error: Package requirements (libpackedobjects) were not met:

No package 'libpackedobjects' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables LIBPACKEDOBJECTS_CFLAGS
and LIBPACKEDOBJECTS_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

我明白找不到路径，但不知道如何修复问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:29:19.583

从您的错误报告中可以看出：

```
checking for LIBPACKEDOBJECTS... no
configure: error: Package requirements (libpackedobjects) were not met:

No package 'libpackedobjects' found 
```

因此，您必须安装软件包`libpackedobjects`并`libXml2`安装`libpackedobjectsd`. 如果安装依赖包后仍然出现此错误，则可能存在 PATH 问题或链接问题。

# android - 麦克风输入属性

> ID：14502067
> 
> 赞同：0
> 
> 时间：2013-01-24T13:06:22.647
> 
> 标签：android, ios

我正在开发音频应用程序（iOS/Android），但找不到任何信息：

应用程序如何读取或设置麦克风增益？

音频数字信号处理工具是否可用于耳机插孔？

我也意识到一些制造商开发了特定的辅助功能（如单声道声音模式，或三星设备上的声音平衡（左 - 右）），但他们不提供任何 API 来检查或控制此功能。当我在日志中打开/关闭三星 GS3 的单声道模式时，我看到：

I/AudioHardwareTinyALSA（1904）：setParameters（toMono=0）

I/audio_wfd_hw(1904): adev_set_parameters() toMono=0

所以我猜这个功能是由三星特定的硬件驱动程序提供的。可能以某种方式可以将指向 AudioHardwareTinyALSA 的指针设置为打开或关闭单声道？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:36:25.257

Android 中没有用于控制输入音量的 API（您可以在语音通话/VoIP 期间将麦克风静音/取消静音，但这与您所拥有的控制级别有关）。

麦克风增益通常由 OEM 设置，作为其声学调谐过程的一部分，以优化该特定产品的每个用例（语音识别、摄像头录音、手机通话等）的性能。

单声道/立体声录音*应该*简单地由应用程序是否请求 1 个或 2 个通道进行录音来决定。据我所知，至少在我参与过的每一个产品上都是这样。

# c++ - 使用 weave.inline 时出现分段错误

> ID：14502068
> 
> 赞同：3
> 
> 时间：2013-01-24T13:06:23.220
> 
> 标签：c++, python, scipy

我不熟悉将 C++ 代码嵌入到 Python 中。我正在测试 weave.inline。但是，在运行我的代码时出现分段错误。有人可以告诉我我做错了什么吗？这是我的代码：

```
from scipy import weave

def cpp_call(np_points):

assert(type(np_points) == type(1))

code = """
double z[np_points+1][np_points+1];

for (int x = 0; x <= np_points; x++)
{
    for (int y = 0; y <= np_points; y++)
    {
        z[x][y] = x*y;
    }
}
"""

return weave.inline(code,'np_points') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:40:06.477

我在这里看到两个问题：

1) 缩进 - 你的 python 函数需要缩进超过`def`行

2）你的论点`weave.inline()`应该是一个列表。详情见[这里](http://docs.scipy.org/doc/scipy/reference/generated/scipy.weave.inline.html)

因此更正后的代码应如下所示：

```
from scipy import weave

def cpp_call(np_points):
  assert(type(np_points) == type(1))  
  code = """
  double z[np_points+1][np_points+1];

  for (int x = 0; x <= np_points; x++)
  {
    for (int y = 0; y <= np_points; y++)
    {
        z[x][y] = x*y;
    }
  }
  """ 
  return weave.inline(code,['np_points']) #Note the very important change here 
```

这段代码对我来说运行良好。

# c# - nhibernate 中的默认值

> ID：14502070
> 
> 赞同：1
> 
> 时间：2013-01-24T13:06:27.257
> 
> 标签：c#, nhibernate, default-value

我需要设置一些默认值，并且我分别有以下类和映射。

**Farmacia.cs**

```
public class Farmacia
{
    public virtual int Id { get; protected set; }
    public virtual string Nombre { get; set; }
    public virtual string Direccion { get; set; }
    public virtual string Telefono { get; set; }
    public virtual int CodigoPostal { get; set; }
    public virtual int Estado { get; set; }

    public Farmacia()
    {
    }
} 
```

**Farmacia.hbm.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                  assembly="Domain"
                  namespace="Domain">
  <class name="Farmacia" table="farmacias">
    <id name="Id" column="idFarmacia" type="int">
      <generator class="assigned" />
    </id>
    <property name="Nombre" />
    <property name="Direccion" />
    <property name="CodigoPostal">
      <column name="codPostal" default="1"/>
    </property>
    <property name="Telefono" />
    <property name ="Estado">
      <column name="estado" default="1" />
    </property>
  </class>
</hibernate-mapping> 
```

**测试**

```
Domain.Farmacia f = new Domain.Farmacia { Nombre = "Test" };
Session.Save(f);
Session.Flush(); 
```

我得到一个无法在数据库中插入的异常。

另一方面，如果我对代码进行一些更改（见下文），我可以保存它。

```
public class Farmacia
{
    public virtual int Id { get; protected set; }
    public virtual string Nombre { get; set; }
    public virtual string Direccion { get; set; }
    public virtual string Telefono { get; set; }
    public virtual int CodigoPostal { get; set; }
    public virtual int Estado { get; set; }

    public Farmacia()
    {
        Estado = 1;          // New line.
        CodigoPosta = 1;     // New line.
    }
} 
```

**Farmacia.hbm.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                  assembly="Domain"
                  namespace="Domain">
  <class name="Farmacia" table="farmacias">
    <id name="Id" column="idFarmacia" type="int">
      <generator class="assigned" />
    </id>
    <property name="Nombre" />
    <property name="Direccion" />
    <property name="CodigoPostal" column="codPostal" />   // Property changed.
    <property name="Telefono" />
    <property name ="Estado" />                           // Property changed.
  </class>
</hibernate-mapping> 
```

我的问题是只有当对象是新的时我才需要默认值。如果对象已经在数据库中，则数据库中的对象总是在`Estado`和中有一些值`CodigoPostal`。

PD：我在数据库中分配了默认值，但错误仍然存​​在。那么如果值为空（对象是新的），我该如何设置默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:34:57.833

上面通过将默认值放入构造函数中所做的事情对我来说似乎很好，但如果您正在寻找另一种方式，您可能可以使用这样的东西：

> (7) dynamic-update（可选，默认为false）：指定UPDATE SQL应该在运行时生成，并且只包含那些值发生变化的列。
> 
> （8）dynamic-insert（可选，默认为false）：指定INSERT SQL应该在运行时生成，并且只包含值不为null的列。

以上取自这里：[http ://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-class](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-class)

尽管对于整数列，您能够使用数据库默认值的唯一方法是使它们可以为空并使用`dynamic-insert`，因为整数的默认值为 0。

```
public class Farmacia
{
    public virtual int Id { get; protected set; }
    public virtual string Nombre { get; set; }
    public virtual string Direccion { get; set; }
    public virtual string Telefono { get; set; }
    public virtual int? CodigoPostal { get; set; }
    public virtual int? Estado { get; set; }

    public Farmacia()
    {

    }
} 
```

# node.js - NodeJS SimpleSMTP 服务器不进行身份验证

> ID：14502071
> 
> 赞同：0
> 
> 时间：2013-01-24T13:06:36.720
> 
> 标签：node.js, smtp, authorization

我尝试使用 NodeJS SimpleSMTP。从 GIT（[NodeJS SimpleSMTP](https://github.com/andris9/simplesmtp)）获取源代码并尝试将身份验证添加到 smtp。我的代码是：

```
var SMTP_PORT = 2000;
var smtp = simplesmtp.createServer({debug:true, enableAuthentication:true});

smtp.listen(SMTP_PORT, function(err) {
    if (err) console.log(err);
});

smtp.on("authorizeUser", function(connection, username, password, callback){
    callback(null, true );
});

smtp.on("startData", function(connection){
    console.log("Message from:", connection.from);
    console.log("Message to:", connection.to);
});
smtp.on("data", function(connection, chunk){

});

smtp.on("dataReady", function(connection, callback){
    console.log("Incoming message saved to /tmp/message.txt");
    callback(null, "ABC1"); // ABC1 is the queue id to be advertised to the client
}); 
```

为了测试，我在 Python 上编写了简单的客户端：

```
smtpObj = smtplib.SMTP('localhost',2000)
smtpObj.set_debuglevel(1)
smtpObj.login('aaa', 'bbb')
sender="sender@email.com"
toemail = "recv@email.com"
msg = MIMEMultipart('alternative')
msg['Subject'] = "my subj"
msg['From'] = sender
msg['To'] = "recv.email.com"
msg.attach(MIMEText("Hello world!",'html'))
smtpObj.sendmail(sender, [toemail], msg.as_string()) 
```

如果我评论**smtpObj.login('aaa', 'bbb')**一切正常，但在发送电子邮件之前我需要验证用户。对于简单 SMTP 中的身份验证，我应该使用事件**authorizeUser**和选项**enableAuthentication:true**。

我做错了什么？为什么服务器不进行身份验证。

我的日志：

带有显示调试信息的 Python：

```
send: 'ehlo [127.0.1.1]\r\n'
reply: '250-mypc at your service, [127.0.0.1]\r\n'
reply: '250-8BITMIME\r\n'
reply: '250-ENHANCEDSTATUSCODES\r\n'
reply: '250 STARTTLS\r\n' 
reply: retcode (250); Msg: mypc at your service, [127.0.0.1]
8BITMIME
ENHANCEDSTATUSCODES
STARTTLS
Traceback (most recent call last):
    File "/home/atlete/work/python/smtptest/src/test.py", line 6, in <module>
    server.login("aaa", "bbb")
File "/usr/lib/python2.7/smtplib.py", line 576, in login
raise SMTPException("SMTP AUTH extension not supported by server.")
smtplib.SMTPException: SMTP AUTH extension not supported by server. 
```

NodeJS 调试信息：

```
CONNECTION FROM 127.0.0.1
Connection from 127.0.0.1
OUT: "220 mypc ESMTP node.js simplesmtp"
COMMAND: ehlo [127.0.1.1]
OUT: "250-mypc at your service, [127.0.0.1]
250-8BITMIME
250-ENHANCEDSTATUSCODES
250 STARTTLS"
Connection closed to 127.0.0.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:07:44.087

很难说没有看到 SMTP 日志（设置 simplesmtp `debug:true`），但您可以检查 python auth 方法，即 LOGIN，是否与您在 simplesmtp 选项中设置的内容相匹配。

# .htaccess - Mediawiki 重写到外部站点

> ID：14502078
> 
> 赞同：1
> 
> 时间：2013-01-24T13:07:10.137
> 
> 标签：.htaccess, mod-rewrite, redirect, mediawiki

我正在将我的网站从 Mediawiki 移动到 Wordpress，并希望重定向此页面：

[http://wecheck.org/wiki/Aaron_Swartz](http://wecheck.org/wiki/Aaron_Swartz)

到这个页面：

[http://newslines.org/wiki/category/computer-people/aaron-swartz/](http://newslines.org/wiki/category/computer-people/aaron-swartz/)

目前在 .htaccess 我有

```
Options +FollowSymlinks
RewriteEngine on 

RewriteCond %{QUERY_STRING} ^title=Aaron_Swartz$
RewriteRule ^/w/index\.php$ http://newslines.org/wiki/category/computer-people/aaron-swartz/? [L,R=301]

RewriteRule ^/?wiki(/.*)?$ %{DOCUMENT_ROOT}/w/index.php [L]
RewriteRule ^/?$ %{DOCUMENT_ROOT}/w/index.php [L] 
```

第二部分为 mediawiki 制作漂亮的 URL。我尝试了很多很多变化，但我根本无法让它工作。非常感谢任何帮助。

**更新：**使用给定解决方案的日志文件。.phtml 是什么？

```
[24/Jan/2013:22:01:00 +0000]  init rewrite engine with requested uri /wiki/Aaron_Swartz
[24/Jan/2013:22:01:00 +0000] (1) pass through /wiki/Aaron_Swartz
[24/Jan/2013:22:01:00 +0000] (1) [perdir /var/www/] pass through /var/www/w/wiki.phtml
[24/Jan/2013:22:01:00 +0000] (3) [perdir /var/www/] add path info postfix: /var/www/w/wiki.phtml -> /var/www/w/wiki.phtml/Aaron_Swartz
[24/Jan/2013:22:01:00 +0000] (3) [perdir /var/www/] strip per-dir prefix: /var/www/w/wiki.phtml/Aaron_Swartz -> w/wiki.phtml/Aaron_Swartz
[24/Jan/2013:22:01:00 +0000] (3) [perdir /var/www/] applying pattern '^wiki/Aaron_Swartz$' to uri 'w/wiki.phtml/Aaron_Swartz'
[24/Jan/2013:22:01:00 +0000] (3) [perdir /var/www/] add path info postfix: /var/www/w/wiki.phtml -> /var/www/w/wiki.phtml/Aaron_Swartz
[24/Jan/2013:22:01:00 +0000] (3) [perdir /var/www/] strip per-dir prefix: /var/www/w/wiki.phtml/Aaron_Swartz -> w/wiki.phtml/Aaron_Swartz
[24/Jan/2013:22:01:00 +0000] (3) [perdir /var/www/] applying pattern '^w/index\.php$' to uri 'w/wiki.phtml/Aaron_Swartz'
[24/Jan/2013:22:01:00 +0000] (1) [perdir /var/www/] pass through /var/www/w/wiki.phtml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:09:24.280

请记住，像这样`RewriteRule`的 Apache 指令在 MediaWiki 看到请求之前就已应用。因此，您当前的规则应该适用于[http://wecheck.org/w/index.php?title=Aaron_Swartz](http://wecheck.org/w/index.php?title=Aaron_Swartz)，但不适用于[http://wecheck.org/wiki/Aaron_Swartz](http://wecheck.org/wiki/Aaron_Swartz)。

但实际上，该规则不起作用，因为您的正则表达式以 a 开头，但在 .htaccess 上下文中，在应用重写规则之前，`/`前导斜杠（或您设置的任何内容）已被删除。[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)

因此，解决这两个问题，您需要的是这样的：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

# match the short URL of the page:
RewriteRule ^wiki/Aaron_Swartz$ http://newslines.org/wiki/category/computer-people/aaron-swartz/ [R=301,L]

# optional: also match the long version of the URL:
RewriteCond %{QUERY_STRING} ^title=Aaron_Swartz$
RewriteRule ^w/index\.php$ http://newslines.org/wiki/category/computer-people/aaron-swartz/ [R=301,L] 
```

* * *

**编辑：**根据您的日志文件，您的网络服务器根目录中似乎有一个`wiki.phtml`文件，Apache 会自动将任何以 . 开头的 URL 路径解析到该文件`/wiki/`。

一种解决方法是将重写规则移动到主 Apache 配置中，在完成任何此类映射之前它们将在其中运行；另一种更直接的方法是将上面的第一个重写规则更改为：

```
# match the short URL of the page:
RewriteRule ^wiki\.phtml/Aaron_Swartz$ http://newslines.org/wiki/category/computer-people/aaron-swartz/ [R=301,L] 
```

甚至：

```
# match the short URL of the page:
RewriteRule ^wiki(\.phtml)?/Aaron_Swartz$ http://newslines.org/wiki/category/computer-people/aaron-swartz/ [R=301,L] 
```

# php - 执行查询，将值用作变量并运行另一个查询然后打印它？

> ID：14502079
> 
> 赞同：0
> 
> 时间：2013-01-24T13:07:11.470
> 
> 标签：php, mysql, pdo, while-loop

我有两张桌子，`users`和`coach_to_trainee`。用户可以有多个教练，数据存储在`coach_to_trainee`列`coach_id`和`trainee_id`.

我正在使用`coach_to_trainee`表格为用户打印数据，因此他/她可以简单地看到谁是他/她的教练。

```
<?php
              $user = $_SESSION['login']['id'];
              $q = "SELECT * FROM coach_to_trainee WHERE trainee_id='$user'";
              $coachid = $db->prepare($q);
              $coachid->execute();

              while($row = $coach->fetchObject()){
                $coachid = $row->coach_id;
                echo '<li><a href="?coach&id='.$coachid.'">'.INSERT_COACH_NAME.'</a></li>';
              }

              ?> 
```

但是，这只会返回教练的 ID，我还需要从 table 返回名称`users`。

我应该如何在内部进行另一个查询`while()`并使用 $coachid 找到正确的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:11:34.833

你必须使用`JOIN`mysql 子句，比如这个：

```
SELECT u.name, u.id 
FROM users u
    LEFT JOIN coach_to_trainee ctt
        ON u.id = ctt.coach_id 
WHERE ctt.trainee_id = {$user} 
```

你应该完成这个;-)

然后在您的 PHP 中使用选定的值：

```
while($row = $coach->fetchObject()){
    echo '<li><a href="?coach&id='.$row->id.'">'.$row->name.'</a></li>';
} 
```

# c++ - 启动 MinGW 编译的 exe 时缺少 libgcc_s_dw2-1.dll 错误

> ID：14502080
> 
> 赞同：3
> 
> 时间：2013-01-24T13:07:11.983
> 
> 标签：c++, windows-7, mingw

启动 MinGW 编译的可执行文件时收到错误消息。我正在使用 Windows 7 机器。

我的 Windows 路径环境变量中有 MinGW bin 目录（检查并重新检查），并且说 dll 确实存在于该文件夹中。

我知道我可以将 dll 移动到 exe 目录，但不需要将应用程序分发到没有安装 MinGW 且环境变量设置正确的任何地方（我们工作机器上的标准环境）。许多同事使用相同的可执行文件没有问题。我知道的唯一区别是大多数（可能所有）同事都在使用 Windows XP，而我使用的是 Windows 7。

此外，我无权访问构建服务器来更改编译器标志以静态链接库。

因此，尽管我提到了解决方法，但我想深入了解为什么它不适用于当前设置。

任何帮助，将不胜感激！

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:57:21.067

你用的是什么版本的mingw？4.4.0？

**`gcc-core-4.4.0-mingw32-dll.tar.gz`**从[这里](http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/Previous%20Release%20gcc-4.4.0/)下载包。
将所需的 dll 从`bin`文件夹复制到您的 mingw`bin`文件夹中。

# php - 带有逻辑和比较运算符的 strlen() 不起作用

> ID：14502081
> 
> 赞同：1
> 
> 时间：2013-01-24T13:07:14.463
> 
> 标签：php, logical-operators, strlen, comparison-operators

好的，我在 PHP 方面相当新，我正在尝试制作联系表格。有些字段我需要具有某些字符。

```
if (!empty($_POST['title'])) {
    $title = $_POST['title'];
    }
    elseif (strlen($title)>=1||strlen($title)<6)||strlen($title)>50 {
        $error .= "Length of your Subject must be more than 6 characters. <br />";
    }
else {
    $error .= "Please enter the Subject. <br />";
} 
```

$error 存储填写表单时出现的所有错误。最后，表单检查，如果没有发现错误，则消息发送成功。

**我想要的是？** 如果字符串长度小于 3 但大于或等于 1，我想显示 elseif 语句中所述的错误。如果长度大于 50 个字符，也应该显示错误。

如果该字段为空，则应显示 else 语句中提供的最后一个错误。

**发生了什么？** 每当我将该字段保留为空时，它都会显示第一个错误而不是第二个错误。如果我在该字段中只输入 1 个字符，则不会显示错误。

我正在摸索，我做了很多试验和错误，但似乎没有任何效果。如果有人可以转发，那将是一个巨大的帮助。这是我的第一个 PHP 项目，只是因为我的一些读者想要它，而我还没有完全学会这门语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:12:05.140

看你把 if else 语句弄乱了.....试试这种方式，

```
if (!empty($_POST['title'])) 
{
    $title = $_POST['title'];

    if (strlen($title)>=1 && strlen($title)<6)||strlen($title)>50)
    {
        $error .= "Length of your Subject must be more than 6 characters. <br />";
    }
}

else 
{
$error .= "Please enter the Subject. <br />";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:10:43.610

您的条件始终`(strlen($title)>=1||strlen($title)<6)`为真，因为标题的长度是 >= 1 或 < 6（或两者兼而有之）。您可能想使用`&&`而不是`||`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:10:33.797

只有当字符串为空时才会进入 else 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T13:15:37.187

如果长度在 1 到 6 个字符之间且超过 50 个字符，为什么会显示相同的错误？你的 if 语句也是错误的。如果它是空的，你将去`elseif`你正在使用的地方，`$title`但还没有`$title`定义任何变量。

```
if(!empty($_POST['title'])) {
    $title = $_POST['title'];

    if(strlen($title) >= 1 && strlen($title) < 6) {
        $error .= "Length of your Subject must be more than 6 characters. <br />";
    } elseif(strlen($title)>50) {
        $error .= "Length of your Subject must be no more than 50 characters. <br />";
    } else {
        // Length is between 6 and 50 characters, i.e. it is valid.
    }
} else {
    $error .= "Please enter the Subject. <br />";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T13:16:02.340

就像 Dan Berindei 所说，您使用 or 时应该使用 and 来检查 $title 是否不为空。实际上，您根本不需要检查它是否至少是一个字符，因为您已经验证它不是一个空字符串。

这里有一些更清洁的东西：

```
if (!empty($_POST['title'])) {
    $title = $_POST['title'];

    if (strlen($title)<6)||strlen($title)>50) {
        $error .= "Length of your Subject must be between than 6 and 50 characters. <br />";
    }
}else {
    $error .= "Please enter the Subject. <br />";
} 
```

# maven - 如何让 Maven 警告任意版本选择？

> ID：14502085
> 
> 赞同：3
> 
> 时间：2013-01-24T13:07:32.200
> 
> 标签：maven, dependency-management

在一个 Maven 项目中，我们使用了第三方工件（特别是 spring-data-jpa 1.1.0.RELEASE），它依赖于另一个工件（spring-core），允许范围内的任何版本（准确地说：[3.0.7 .RELEASE,4.0.0.RELEASE），查看[它的 pom 文件](http://repo1.maven.org/maven2/org/springframework/data/spring-data-jpa/1.1.0.RELEASE/spring-data-jpa-1.1.0.RELEASE.pom)）。我们没有直接依赖于 spring-core。

所以有一天我们的构建选择了 3.1.2.RELEASE，但是当 3.2.0.RC1 发布时，我们的构建突然选择了那个版本。

然而，我们希望有*可重复的构建*：当我们在一年的时间内交付一个补丁时，我们不想在至少不知道的情况下引入更新版本的 spring-core 或任何其他间接依赖项。

（我知道我们可以指导 Maven 为 spring-core 选择一个特定的版本，例如 using `<dependencyManagement>`，但我的意思是，间接依赖中可能隐藏着任意选择，我希望 Maven 告诉我们这些，无需定期手动检查。）

*问题：*如果 Maven 为任何间接依赖项做出任意版本选择，我们如何让 Maven 警告我们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T09:44:20.633

正如您所发现的，版本范围是邪恶的。

真正的问题是版本范围是一个警笛，诱使人们认为他们是一个好主意。

版本范围确实应该被视为对开发人员的提示，以允许开发人员从一组版本中选择他们想要的版本。

Maven 中的错误在于首先允许在其中定义版本范围，`pom.xml`因为这允许人们发布他们的工件，其中包含版本范围。

一旦您依赖于具有使用版本范围的传递依赖项的工件，实际上只有两种方法可以解决您的构建问题（一种只是第二种的更花哨的版本）

1.  在传递依赖项上添加您自己的依赖项，但使用固定版本代替范围......例如

    ```
    <dependency>
      <groupId>org.springframework.data</groupId>
      <artifactId>spring-data-jpa</artifactId>
      <version>1.1.0.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-orm</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-tx</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-core</artifactId>
      <version>3.1.2.RELEASE</version>
      <exclusions>
        <exclusion>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
        </exclusion>
      </exclusions>
    </dependency> 
    ```

    您不需要列出依赖项，因为它们不具有传递性，同样出于同样的原因，`<optional>true</optional>`您也不需要列出依赖项。`<scope>provided</scope>`

2.  至于上述，但首先通过向依赖项添加排除项来更安全，例如

    ```
    <dependency>
      <groupId>org.springframework.data</groupId>
      <artifactId>spring-data-jpa</artifactId>
      <version>1.1.0.RELEASE</version>
      <exclusions>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-orm</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-tx</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-beans</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-core</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-orm</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-tx</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-core</artifactId>
      <version>3.1.2.RELEASE</version>
      <exclusions>
        <exclusion>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
        </exclusion>
      </exclusions>
    </dependency> 
    ```

在这两者中，我更喜欢后者，因为它至少给人们一个暗示，为什么要明确提到这些依赖关系。

所以回到你原来的问题，关键是当你在你的`pom.xml`.

如果`spring-data-jpa:1.1.1.RELEASE`有一个具有不同坐标的完全不同的传递依赖树，那么当您编辑`pom.xml`以更新版本时，您还应该修复传递。

据我所知，目前没有任何强制执行规则来支持验证您的要求。

我建议编写一个执行者规则，我称之为：`ensureTransitiveVersionRangesArePinned`

该规则应执行以下操作：

*   扫描项目依赖列表
*   计算每个项目依赖提供的传递依赖
*   如果这些传递依赖项中的任何一个是版本范围，那么
    *   验证该`exclusion`传递依赖是否存在
    *   验证传递依赖项的固定版本是否作为直接项目依赖项（如果没有固定版本，则可能不会失败，因为您可能正在添加位于不同 GAV 的等效工件，或者您可能不需要依赖项）...在任何情况下，如果没有重新添加依赖项，单元测试很可能应该通过触发 CNFE 来捕获它，因此这个检查可能不是严格要求的，但它可能应该打印一个警告。

我不记得是否有工具可以检查它们`<exclusions>`是否实际上排除了任何传递依赖项，因此您可能需要对此进行调查。

# c# - 当注入对象的属性发生变化时调用类中的方法

> ID：14502086
> 
> 赞同：1
> 
> 时间：2013-01-24T13:07:32.423
> 
> 标签：c#, dependency-injection

如果我有这样的成员、构造函数和方法

```
//The injected object exposes a public property of type bool which will raise
//a NotifyPropertyChangedEvent
IInjectedObject _injectedObject;

public someClass(IInjectedObject injectedObject)
{
    _injectedObject = injectedObject;
}

public void DoSomething()
{

} 
```

当注入对象的属性发生变化时，有没有办法在我的类中调用该方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:24:08.143

您声明您的接口继承自 INotifyPropertyChanged，因此可以合理地期望通过“PropertyChanged”事件通知侦听器属性更改。假设是这样的：

```
public interface IInjectedObject : INotifyPropertyChanged
{
    bool MyImportantProperty { get; }
} 
```

然后，您的依赖对象必须侦听该[`INotifyPropertyChanged.PropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件：

```
public class MyDependantClass
{
    public MyDependantClass(IInjectedObject injectedObject)
    {
        MyInjectedObject = injectedObject;
    }

    // We wrap the private field in a protected property,
    // to capture the event subscriptions
    private IInjectedObject _myInjectedObject;
    protected IInjectedObject MyInjectedObject
    {
        get { return _myInjectedObject; }
        set
        {
            // unsubscribe from the old property's event
            if(_myInjectedObject!= null)
                _myInjectedObject.PropertyChanged -= OnPropertyChanged;

            _myInjectedObject= value;

            // subscribe to the new property's event
            if(_myInjectedObject!= null)
               _myInjectedObject.PropertyChanged += OnPropertyChanged;
        }
    }

    private void OnPropertyChanged(object sender, PropertyChangedEventArgs args)
    {
        if(args.PropertyName == "MyImportantProperty")
        {
            //react to the changed property here!
        }
    }
} 
```

# java - 记录方法执行时间

> ID：14502093
> 
> 赞同：11
> 
> 时间：2013-01-24T13:07:49.627
> 
> 标签：java, logging, groovy

在我使用的 java/groovy 应用程序中，`org.slf4j.Logger` 我喜欢记录方法执行时间并建议使用以下代码

```
def startTime
LOGGER.isDebugEnabled() {
    startTime = System.currentTimeMillis()
}

doSomething()

LOGGER.debug("Execution took {}ms", (System.currentTimeMillis() - startTime)) 
```

我认为这段代码“丑陋”。谁能建议一些更优雅的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T13:11:05.507

您可能可以使用此类来计算经过的时间。

```
public class StopWatch {

    /* Private Instance Variables */
    /** Stores the start time when an object of the StopWatch class is initialized. */
    private long startTime;

    /**
     * Custom constructor which initializes the {@link #startTime} parameter.
     */
    public StopWatch() {
        startTime = System.currentTimeMillis();
    }

    /**
     * Gets the elapsed time (in seconds) since the time the object of StopWatch was initialized.
     * 
     * @return Elapsed time in seconds.
     */
    public double getElapsedTime() {
        long endTime = System.currentTimeMillis();
        return (double) (endTime - startTime) / (1000);
    }
} 
```

并像这样使用它：

```
public class SWTest {

    public static void main(String[] args) {
        StopWatch stopWatch = new StopWatch();

        doSomething();

        LOGGER.debug("Execution took in seconds: ", (stopWatch.getElapsedTime());
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T13:10:43.380

如果你想让代码看起来不那么难看：

改变

```
def startTime
LOGGER.isDebugEnabled() {
    startTime = System.currentTimeMillis()
} 
```

到

```
def startTime = System.currentTimeMillis() 
```

我不喜欢`isDebugEnabled`这些衬里。没有它，您将看不到任何性能差异。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-03T08:36:55.820

当测量两个时间点之间的差异时，您应该使用 System.nanoTime()，当您实际上有兴趣测量时间（从纪元值）而不是当您想要测量时间差异时，应该使用 millis 变体时间尽可能准确。

另请参阅[http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime())

> 返回正在运行的 Java 虚拟机的高分辨率时间源的当前值，以纳秒为单位。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-02T16:53:37.957

当前的建议似乎没有利用 OP 使用`Groovy`.

这是我的看法：

```
class CodeTimer {

    /**
     * Time how long it takes to run a piece of code
     *
     * @param closure code to execute and time
     * @return time elapsed in nano seconds
     */
    static final long time(closure) {
        long startTime = System.nanoTime()

        closure()

        return System.nanoTime() - startTime
    }
} 
```

使用示例：

```
def duration = CodeTimer.time({
    sql.executeUpdate(QUERY)
})

log.debug("Execution took ${duration}ns") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-03T08:21:16.093

您还可以使用 AOP 和 Java 注释，以使您的代码更干净。我建议使用[jcabi-aspects](http://www.jcabi.com/jcabi-aspects/)[`@Loggable`](http://www.jcabi.com/jcabi-aspects/annotation-loggable.html)的注释和 AspectJ方面（我是开发人员）：

```
@Loggable(Loggable.DEBUG)
public String load(URL url) {
  // do something
} 
```

将通过 SLF4J 记录对该方法的所有调用以及所有参数和执行时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-22T10:03:28.947

如果您使用弹簧：

```
StopWatch watch = new StopWatch();
    watch.start();
    for(int i=0; i < 1000000; i++){
        Object obj = new Object();
    }    
    watch.stop();

    System.out.println("Total execution time to create 1000K objects in Java using StopWatch in millis: "                + watch.getTotalTimeMillis()); 
```

# python - 图像处理脚本

> ID：14502096
> 
> 赞同：0
> 
> 时间：2013-01-24T13:08:00.880
> 
> 标签：python

我有一个成功运行的代码，但想转换一个 if 语句，使其变得光滑。我希望它能够回到代码的开头，以便在无法打开图像时可以开始读取另一个图像。以下是代码。我上面只有一个到数据库的连接并获取第一张图像

```
hDataset = gdal.Open( pszFilename, gdal.GA_ReadOnly ) 

    if hDataset is  None:

        print("gdalinfo failed - unable to open '%s'." % pszFilename )

         return 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:17:30.373

不完全确定你在问什么，但你可以用发电机做类似的事情。

```
def open_images(*filenames):
    for fname in filenames:
        hDataset = fdal.Open(fname, gdal.GA_ReadOnly)

        if hDataset is not None:
            yield hDataset
        else:
            print("gdalinfo failed - unable to open '%s'." % fname)

 image_loader = open_images("a.jpg", "b.jpg")

 # to get the first image that opens correctly
 image = image_loader.next() 
```

对不起，如果这不是你得到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:16:21.530

看看使用 while 循环或 for 循环来实现你所追求的。

例如，如果您有一个想要尝试打开的文件列表，则类似以下内容可能会很有用：（这不是供您使用的复制粘贴代码，只是一个示例）

```
succesfully_opened_datasets=[]
list_of_files=[a,list,of,filenames]
for image_filename in list_of_files:
    dataset=gdal.open(image_filename,gdal.GA_ReadOnly)
    if not dataset:
        print ("gdalinfo failed....")
    else:
        succesfully_opened_datasets.append(dataset)
return succesfully_opened_datasets 
```

# filemaker - 将 filemaker 6.5 应用程序迁移到 12 - 编码要求？

> ID：14502098
> 
> 赞同：0
> 
> 时间：2013-01-24T13:08:12.670
> 
> 标签：filemaker

我收到了升级在 filemaker pro 6.5 下运行的应用程序的请求。它连接到一些串行设备并使用插件组件（troi）来解决通信（rs232）。

它在连接到远程 FM65 数据库的封闭网络中运行。

FMP12 是否能够在没有大量重新编码的情况下运行应用程序，或者事情发生了太多变化？

问候，/吨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:37:22.733

简单的回答，是的。

首先，没有 FileMaker 6.5。它从版本 5 升级到 5.5。到 6 和 7。当版本 7 发布时，数据库的文件格式发生了重大更新，在单个文件中引入了多个表和新的关系模式。

在版本 11 和 12 之间，文件格式有另一个重大更新。最大的变化是布局现在使用 WebKit 呈现为 HTML/CSS。

尽管自第 6 版以来发生了很多事情，但 FileMaker Inc 始终尝试向后兼容。据我所知，没有删除任何功能，至少没有什么重要的。

Troi 串行插件适用于 FileMaker 12，但您需要升级插件。[您可以在http://www.troi.com/software/serialplugin.html](http://www.troi.com/software/serialplugin.html)阅读有关插件、定价和下载演示的更多 信息

您还可以从[http://www.filemaker.com下载 FileMaker 的 30 天试用版](http://www.filemaker.com)

因此，在进行生产之前，您可以轻松地免费试用整个设置。

您可能唯一需要调整的是插件 Troi Serial 的函数调用，但这应该很容易！

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:59:38.513

我建议您使用[Metadata Magic](http://www.newmillennium.com/index.php?src=directory&view=products&srctype=display&id=10)来分析 FP5 解决方案。

升级时有一些脚本步骤可能会出现问题。这将为您提供一份全面的报告，说明要查找的问题以及在哪里可以找到它们。发现需要重新排序或更改的脚本步骤并不少见。

# sql - 从另一个表的行及其属性创建表

> ID：14502100
> 
> 赞同：5
> 
> 时间：2013-01-24T13:08:16.147
> 
> 标签：sql, sql-server

我有一张名为`Table1`

```
列名 数据类型 最大长度 精度 刻度 is_nullable 主键
    价格浮动 8 53 0 1 0
    名称 varchar 180 0 0 1 0
    Id_no 整数 4 10 0 1 1
    出生日期 3 10 0 1 0

```

我需要创建另一个表`Table2`，其中表 1 的列名行（以及数据类型、最大长度等属性）应该是另一个表的列，例如

```
表 2
价格名称 Id_No DOB

```

（请注意，创建表查询还应考虑到属性）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:09:49.543

您可以动态创建 SQL 语句，然后运行该命令。

```
DECLARE @dsql nvarchar(max) = N''

SELECT @dsql += QUOTENAME([Column Name]) + ' ' + 
       [Data type] + 
        + CASE WHEN [Data type] = 'varchar' 
               THEN '(' + CAST([Max length] AS nvarchar(4)) + ')' ELSE '' END + ','        
FROM Table1

SELECT @dsql = 'CREATE TABLE Table2 (' + LEFT(@dsql, LEN(@dsql) - 1) + ')'
EXEC sp_executesql @dsql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:09:07.737

您可以使用以下命令创建表的副本`select into`：

```
select  *
into    NewTable
from    OldTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:14:12.650

```
create table table2
as
select * form table1; 
```

# android - 放大显示的当前用户位置

> ID：14502102
> 
> 赞同：2
> 
> 时间：2013-01-24T13:08:26.193
> 
> 标签：android, android-maps, android-maps-v2

我正在使用适用于 Android v2 的 Google 地图。我想显示当前用户位置并放大它。这是 中的代码`FragmentActivity`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_activity);

    mMap = ((SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.mapFragment_mapActivity)).getMap();
    if (mMap == null) {
        Toast.makeText(this, R.string.mapCreationProblem, Toast.LENGTH_LONG)
                .show();
        finish();
        return;
    }
    mMap.setMyLocationEnabled(true);
    Location currentLocation = mMap.getMyLocation();
    if(currentLocation!=null){
       LatLng currentCoordinates = new LatLng(
                            currentLocation.getLatitude(),
                            currentLocation.getLongitude());
       mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(currentCoordinates, 10));
    }
} 
```

地图工作正常，当前位置上的蓝点也工作正常。但它似乎`currentLocation`总是为空。所以我无法放大当前位置。

请问哪位大神知道为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T21:21:39.740

这是一个 getMyLocation() 的实现，增加了查找人员位置的保护。我只是在管理地图片段的活动中拥有它。

```
private Location getMyLocation() {
    // Get location from GPS if it's available
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    Location myLocation = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    // Location wasn't found, check the next most accurate place for the current location
    if (myLocation == null) {
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_COARSE);
        // Finds a provider that matches the criteria
        String provider = lm.getBestProvider(criteria, true);
        // Use the provider to get the last known location
        myLocation = lm.getLastKnownLocation(provider);
    }

    return myLocation;
} 
```

谢谢， 曼

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:19:30.250

尝试使用 LocationManager：

```
LocationManager manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Location currentLocation = manager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

# javascript - 为什么名称为batch的数组长度为0

> ID：14502108
> 
> 赞同：0
> 
> 时间：2013-01-24T13:08:36.127
> 
> 标签：javascript, google-maps, google-maps-api-2

在我的代码中 - 当我加载应用程序时，我应该使用第一页的 DATATABLE 中的地址进入地图标记，当我按下下一个按钮时，我应该得到第二个的地址，依此类推。

当我应该执行此代码时，问题出在 onload 情况下

```
else 
                {    
                     glPNum = (numberOfPages * (s-1)+1);
                     for (i=0;i<intPageSize;i++)
                            { alert (intPageSize);
                                //alert (arrayMyAddresses[i]); 
                                geocoder = new GClientGeocoder();
                                geocoder.getLocations(arrayMyAddresses[i], addAddressToMap);
                            }
                     addmarkers();

                } 
```

应用程序的输出是它给了我警报批次：0 这意味着我的 Gmarker 元素数组为 0，并且它尝试执行函数 addmarkers 并且它不会向地图添加标记，因为数组批次的长度如你所见 0

然后它开始提醒addresstomap batch 1 adresstomap batch 2 etc，这意味着现在它在函数addAddressToMap中。为什么它会这样！奇怪的是，当我按下下一个按钮并且我有页面事件时，程序正在运行，它会在地图上添加标记

对不起我的英语不好我希望你能理解

```
var xmlhttp;
        if (window.XMLHttpRequest) 
        {
            xmlhttp = new XMLHttpRequest();
        } else 
        {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        var intRpp=100;
        var intPNum;
        var glPNum;
        var s;  
        var options = {'showRowNumber': true, 'pageSize':intPageSize };     
        var numberOfPages;
        var intPageSize=10;
        var holde = 7;
        var map ;
        var geocoder;
        var actualepage = 0 ;
        var arrayMyAddresses = new Array();
        var batch = new Array(); 
        var mgr;

function initialize() 
{
    if (GBrowserIsCompatible()) 
    {
        map = new GMap2(document.getElementById("map_canvas"));
        map.setCenter(new GLatLng(42.143365, 24.751032), 13);
        map.setUIToDefault();

         /*var mrkCordinates = new GLatLng(42.129539,24.741726);

         var marker = new GMarker(mrkCordinates);  
         marker.openInfoWindowHtml("Your cordinates" + mrkCordinates.lat());
         map.addOverlay(marker);*/

    }
}

function addmarkers()
{
    /* for (i=0;i<batch.length;i++)
     map.addOverlay(batch[i]);*/
     alert("batch: " + batch.length);        
     mgr = new MarkerManager(map);
     mgr.addMarkers(batch,10);
     mgr.refresh();

}
function clearmarkers()
{   batch=[];
    alert ("you are about to clear");
    mgr.clearMarkers();
    mgr.refresh();

}
function addAddressToMap(response) 
{

    if (!response || response.Status.code != 200) 

    {
       alert("Sorry, we were unable to geocode that address");
    } 
    else 
    {   

         place = response.Placemark[0];
         point = new GLatLng(place.Point.coordinates[1], place.Point.coordinates[0]);

        var marker = new GMarker(point);
        batch.push(marker);
        alert ("addresstomap batch " + batch.length);

    } 

}

function addOpenWindow(response)
{  
    if (!response || response.Status.code != 200) 

    {
       alert("Sorry, we were unable to geocode that address");
    } 
    else 
    {    place = response.Placemark[0];
         point = new GLatLng(place.Point.coordinates[1], place.Point.coordinates[0]);
        for (i=0;i<batch.length;i++)
        {
            if ((point.lat() == batch[i].getLatLng().lat())&&(point.lng() == batch[i].getLatLng().lng())) 
            {  

             batch[i].openInfoWindowHtml("Here is the address of your firm");
            }

        }
    }

}

function setNumberOfPages(value) 
{

    options['pageSize'] = parseInt(value, 10);
    intPageSize =  parseInt(value, 10);
    numberOfPages = intRpp/parseInt(value);
    //alert (numberOfPages);
    visual.draw(tblTst, options);
} 

function loadXMLDoc(l)
{    
    arrayMyAddresses = [];  
    intPNum=l;
    s=l;

    xmlhttp.onreadystatechange = function() 
    { 
        if (xmlhttp.readyState==4 && xmlhttp.status==200) 
        {
            alert(xmlhttp.responseText);
            var xmlObj = xmlhttp.responseXML;   
            var textXML = xmlObj.documentElement.firstChild.firstChild.nodeValue;

            if (window.DOMParser)
            {
                parser=new DOMParser();
                var xmlDoc=parser.parseFromString(textXML,"text/xml");
            }
            else // Internet Explorer
            {
                var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async=false;
                xmlDoc.loadXML(textXML);
            }

            var rec = new Array();
            rec[0]=['Стопански субект', 'Юрид.форма', 'Община', 'Име', 'Роля', 'Страна', 'NACE code', 'NACE text', 'Селище', 'пощ.код','Адрес', 'тел.', 'факс', 'Email', 'web', 'rid','id','activ'];
            var rows = xmlDoc.getElementsByTagName("row");
            rowsn = rows.length;
            for (i=1;i<=rowsn;i++)
            {   
                var cols=rows[i-1].getElementsByTagName("colunm");
                colsn=cols.length;

                rec[i] = new Array();
                for (var j=0; j<colsn; j++)
                {   

                    rec[i][j] = cols[j].getAttribute("colvalue");

                }
                rec[i][j]='<input type="button" onClick="ajaxDBDelete('+rec[i][15]+');"/>'; 
                arrayMyAddresses.push(rec[i][8]+","+rec[i][10]);
            } 

            tblTst = google.visualization.arrayToDataTable(rec);
            options['page'] = 'event';
            options['pageSize'] = intPageSize;
            options['pagingSymbols'] = {prev: 'prev', next: 'next'};
            options['pagingButtonsConfiguration'] = 'both';
            options['allowHtml'] = 'true'; 
            numberOfPages = intRpp/intPageSize;
            visual = new google.visualization.Table(document.getElementById('table'));

            google.visualization.events.addListener(visual, 'select', selectHandler);
            function selectHandler(e) 
            { 
                var selection = visual.getSelection();
                var message = '';
                for (var i = 0; i < selection.length; i++) 
                {
                    var item = selection[i];
                    if (item.row != null) 
                    {   
                         var str = tblTst.getFormattedValue(item.row, 8);
                         str += ",";
                         str += tblTst.getFormattedValue(item.row, 10);
                         message = str;
                    } 

                }
                if (message == '') 
                {
                  message = 'nothing';
                }
                 alert (message);
                 geocoder = new GClientGeocoder();
                 geocoder.getLocations(message, addOpenWindow);

            }

            google.visualization.events.addListener(visual, 'page', function (e)
            {    
                clearmarkers();
                options.startPage = e.page;
                //alert (e.page);   

                if (e.page  == numberOfPages)
                {
                    loadXMLDoc(s+1);
                    options.startPage = 0;

                }
                if ((e.page  == -1)&&(s>1))
                {
                    holde = e.page;
                    //alert (holde);
                    loadXMLDoc(s-1);  
                    options.startPage=numberOfPages-1;
                    actualepage  = e.page + numberOfPages;
                }
                else 
                {
                    if ((e.page+1) <= numberOfPages)
                    {   

                        glPNum = (numberOfPages * (s-1)) + (e.page+1);
                        document.getElementById('txbNumPage').value = glPNum;       
                        visual.draw(tblTst, options);
                        var k=(intPageSize * e.page);
                        for (i=k;i<intPageSize*(e.page+1);i++)
                        {
                            alert (arrayMyAddresses[i]); 
                            //var sendaddrss =arrayMyAddresses[i]);
                            geocoder = new GClientGeocoder();
                            geocoder.getLocations(arrayMyAddresses[i], addAddressToMap);
                        }
                        addmarkers();

                    }           
                }                       

            });
            //alert (holde);
            visual.draw(tblTst, options);
            if (holde == -1)
            { 
                 glPNum = numberOfPages * s;
                 var f = actualepage * intPageSize;
                 for (i=f;i<(f+intPageSize);i++)
                        {
                            alert (arrayMyAddresses[i]); 
                            geocoder = new GClientGeocoder();
                            geocoder.getLocations(arrayMyAddresses[i], addAddressToMap);
                        }
                 addmarkers();
                 holde=0;

            }

            else 
            {    
                 glPNum = (numberOfPages * (s-1)+1);
                 for (i=0;i<intPageSize;i++)
                        { alert (intPageSize);
                            //alert (arrayMyAddresses[i]); 
                            geocoder = new GClientGeocoder();
                            geocoder.getLocations(arrayMyAddresses[i], addAddressToMap);
                        }
                 addmarkers();

            }
            document.getElementById('txbNumPage').value = glPNum;

        }

    }

    var url = "http://localhost:9091/localbusscat/services/localbusscat/SelectFromDB?intRpp="+ intRpp+"&pageNum="+intPNum;
    alert (url);
    xmlhttp.open("GET", url, true);
    xmlhttp.send(); 

} 
```

# c# - c# struct vs tuple 中的值语义

> ID：14502112
> 
> 赞同：3
> 
> 时间：2013-01-24T13:08:45.443
> 
> 标签：c#

所以我在 C# 中迈出了第一步，并且正在制作一个简单的拼图。当我对瓦片的位置进行建模时，我想要具有值语义。所以，据我所知，基本上有两种方法可以做到这一点，使用结构或使用元组。

在元组的情况下，我的代码如下所示：

> ```
> public class TilePosition : Tuple<int,int>
> {
>     public int HComponent{get { return Item1; }}
>     public int VComponent{get { return Item2; }}
> 
>    public TilePosition(int horizontalPosition, int verticalPosition)
>         : base(horizontalPosition, verticalPosition)
>     {
>     }
> } 
> ```

结构解决方案如下所示：

> ```
> public struct TilePosition 
>  {
>     private readonly int hComponent;
>     private readonly int vComponent;
>     public int HComponent { get { return hComponent; } }
>     public int VComponent { get { return vComponent; } }
> 
>    public TilePosition(int hComponent, int vComponent)
>     {
>         this.hComponent = hComponent;
>         this.vComponent = vComponent;
>     }
> 
>    public static bool operator ==(TilePosition position1, TilePosition position2)
>     {
>         return position1.Equals(position2);
>     }
> 
>    public static bool operator !=(TilePosition position1, TilePosition position2)
>     {
>         return !(position1 == position2);
>     }
> } 
> ```

元组更简洁，但它公开`Item1`并且`Item2`在公共 API 中会造成混淆，即使我在它们周围添加了 H 和 V 组件属性。

该结构需要更多代码，并且我收到一个编译器警告，提示我应该如何覆盖 Equals 和 GetHashCode 因为我正在覆盖`==`and `!=`，但是如果我这样做了，我不会从使用结构中得到任何东西（从语义和句法的角度来看） ) 因为它与传统类的代码完全相同。

那么除了没有 Item 属性的噪音之外，在子类 Tuple 上使用 struc 有什么好处吗？

我的两个解决方案的行为方式是否与我预期的相同，或者是否有我应该注意的细微差别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T13:14:03.510

（顺便说一句，`IEquatable<TilePosition>`在这两种情况下实现也是很好的——尤其是在 struct 情况下，以避免装箱。）

> 那么除了没有 Item 属性的噪音之外，在子类 Tuple 上使用 struc 有什么好处吗？

鉴于它是不可变的，在这两种情况下，您在这两种情况下都大致具有“值语义”，但仍然存在差异......

*   类类型的实例需要堆上的空间（假设 CLR 没有进行转义检测等）；结构类型的值在某些情况下可能只使用*堆栈*
*   传递类类型的值仅意味着传递引用（4 字节或 8 字节，具体取决于 CLR 架构）；传递结构类型的值确实传递了值（所以 8 个字节）
*   在类类型版本`null`中是一个有效值；在您需要用来`TilePosition?`指示可能不存在的值的结构类型版本中
*   在 struct 版本`new TilePosition()`中是有效的，并且两个字段的值都为 0（这将是默认值，例如字段和数组元素）
*   由于您还没有密封您的课程，因此有人可以创建一个可变的子类；因此，客户认为它是完全不可变的是不安全的*。*（你可能应该把它封起来……）
*   您可以将您的类类型与任何使用 的代码一起使用`Tuple<,>`，而 struct 类型显然不是这种情况
*   will的含义`==`在两种类型之间有所不同。即使您`==`在类类型中重载，调用者最终仍可能只是比较引用。在 struct 的情况下，您仍然可能最终会比较*盒装*引用，但无济于事。

当然，这些只是*差异*- 它们是否算作一种方法或另一种方法的*好处*取决于您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:23:28.027

如何使用锯齿状数组并在每个字段上保存一个项目。这将更紧密地遵循瓷砖拼图：

*   瓷砖和它们的空间是 1:1 映射。所以每个图块/空间只能有一个空间/图块。
*   无需比较瓷砖组件。
*   移动瓷砖很容易，例如

    ```
     if (fields[x, y] = null)
        {
            fields[x, y] = fields[oldX, oldY];
            fields[oldX, oldY] = null;
        } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:28:15.060

你最好的选择是正确地做它并投入所有的工作。如果你想要一个结构而不是一个类（这可能适合你），这里有一个示例实现：

```
public struct TilePosition: IEquatable<TilePosition>
{
    public TilePosition(int horizontalPosition, int verticalPosition)
    {
        _x = horizontalPosition;
        _y = verticalPosition;
    }

    public int HComponent
    {
        get
        {
            return _x;
        }
    }

    public int VComponent
    {
        get
        {
            return _y;
        }
    }

    public static bool operator == (TilePosition lhs, TilePosition rhs)
    {
        return lhs.Equals(rhs);
    }

    public static bool operator != (TilePosition lhs, TilePosition rhs)
    {
        return !lhs.Equals(rhs);
    }

    public bool Equals(TilePosition other)
    {
        return (_x == other._x) && (_y == other._y);
    }

    public override bool Equals(object obj)
    {
        return obj is TilePosition && Equals((TilePosition)obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return (_x*397) ^ _y;
        }
    }

    private readonly int _x;
    private readonly int _y;
} 
```

# php - 将 php/mysql 值传递给 div，可从 javascript 访问

> ID：14502114
> 
> 赞同：2
> 
> 时间：2013-01-24T13:08:48.687
> 
> 标签：php, javascript, html

我正在`<div>`用 php 创建一个表示 sql 中的表行的表。美好的。然后我使用 javascript 函数来测试 div 的值（位置、宽度等）。很好。但我需要将另一个值传递给 div 以由函数检查。它在数据库中，但我不知道是否有（简单）方法可以做到这一点。理想情况下，它看起来像这样。

```
<div id='plumber5' class='plumber' style='width:50px;left:100px' value='numericValue'>Derek</div> 
```

内联样式是在php中生成的，除了js可以检测到的样式（宽度，高度等）之外，想不出一种传递数值的方法。

例如。

```
<script>
a=document.getElementById('plumber5');
if (a.style.width=>75){
execute something here}
</script> 
```

而不是使用样式作为测试的来源

它非常令人不安！谢谢

编辑 - 解决方案

```
function checkData($type){  
    a = document.getElementsByClassName($type);
    for(i = 0; i < a.length; i++)
    {
    if (a[i].getAttribute('data-dob') >= sessionStorage.Value) {
    // execute something here
    }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:11:33.287

您可以使用 HTML5 的 data 属性将一些自定义数据添加到您的 HTML 标签中：

[http://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

例子：

```
<div data-value='10' id='plumber5' class='plumber' style='width: 50px; left: 100px;'>
    Derek
</div> 
```

你可以得到这样的值：

```
<script>
    a = document.getElementById('plumber5');
    if (a.getAttribute('data-value') => 75) {
        // execute something here
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:11:31.050

您可以通过`data-`这种方式使用属性：

```
<div id='plumber5' class='plumber' style='width: 50px; left: 100px'
     data-value='numericValue'>Derek</div> 
```

***注意：** HTML5 数据属性仅在现代浏览器（如 IE 9+、Chrome 12+、Firefox 5+）中受支持。*

`style`请注意，您在属性中有错误。代替：

```
style='width=50px;left=100px' 
```

和：

```
style='width: 50px; left: 100px' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:11:50.067

HTML5 支持`data-*`标签属性，因此您可以使用：

```
<div id='plumber5' class='plumber' data-value='numericValue' data-myothervalue='otherOne'>
    Derek
</div> 
```

编辑

由于它在评论中看起来很乱，以下是访问示例值的方法：

```
var myDiv = document.getElementById('plumber5'); 
var myVal = myDiv.getAttribute('data-value');         // 'numericValue'
var myVal2 = myDiv.getAttribute('data-myothervalue'); // 'otherOne' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T13:14:02.900

如果您的受众不支持 HTML5，您可以嵌入一个 div，例如：

```
<div id="plumber5" class="plumber" style="width:50px;left:100px">
    Derek
    <div style="display: none">numericValue</div>
</div> 
```

这将隐藏视图中的值，但允许您访问它查看 Javascript。

# c# - MVC4 + EntityFramework 架构

> ID：14502116
> 
> 赞同：2
> 
> 时间：2013-01-24T13:08:57.497
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, architecture, entity-framework-5

按照此处[MVC3 和 Entity Framework](https://stackoverflow.com/questions/7474267/mvc3-and-entity-framework/7474357#7474357)提出的设计，我正在尝试使用 MVC4 + EntitiFramework5 为 DAL、BL 和 web 创建不同的层。

引用@Davide Piras

> 1 - ProjectName.Interfaces（类库，实体的接口）；
> 
> 2 - ProjectName.DAL（类库，唯一允许知道使用 EF 的库，POCO 实体使用另一个文件实现项目 1 的接口，在该文件中您使用部分类重新声明相同的对象......）；
> 
> 3 - ProjectName.BL（类库，业务逻辑，引用上面1和2的两个项目）；
> 
> 4 - ProjectName.Web（ASP.NET MVC 应用程序，表示层，引用两个项目 1 和 3，但不是 2）；

我对 BL 和 DAL 之间的联系有疑问。DAL 知道 EF，BL 不应该.. 但是如何实现呢？我的意思是，我在两个层上都创建了代表我的实体的类（这对我来说似乎有点重复......即使在 BL 中我将添加验证和其他 sutff），但是我如何将数据库值公开给 BL ?

在我拥有的默认 MVC4 解决方案中

```
 DbSet<Entity> entity 
```

我可以查询（.Find等）..我想我需要在我的BL中映射它们（IQueryable？IEnumerable？Isomething？？）

完全困惑..任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:11:27.103

当您谈到 DAL 和 EF 时，界限可能会变得有些模糊。在某些情况下，您[可以考虑 EF DAL](http://www.wadewegner.com/2009/06/architecting-your-data-access-layer-with-the-entity-framework/)。但我通常没有 BL 直接访问 EF 并将其抽象到更高级别，以便您可以在需要时轻松地将 EF 换成您的[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。我使用[存储库设计模式](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/20/using-repository-pattern-with-entity-framework.aspx)来进一步抽象 EF。这种模式的另一个优点是它使单元测试更容易，并且您可以使用依赖注入。我也使用[工作单元设计模式](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)处理系统中的事务。DAL 的存储库和工作单元也是如此，或者它只是 EF。这可能是值得商榷的，我知道自己更关心尝试定义 DAL。以下是我建议在 MVC 4 项目中使用的层。

![MVC 4 架构](../Images/665c4ec463bda92cbde78e91e452811c.png)

应用程序或域层是您的 BL 层。我倾向于将[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)中使用的概念合并到这一层中，因为我还没有看到将其分离出来的任何好处。但是也可以选择在顶部添加这一层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:18:32.383

不，业务逻辑层需要了解 DAL，因为它需要调用 DAL 上的方法才能检索/更新/添加数据（**仅使用接口，不应允许查看 POCO 类**）。BL 对 EF 一无所知（这是应该的，以防您想用其他东西替换 EF）。

因此，例如添加一条新记录：

*   用户添加新的详细信息并提交表单
*   **Web 项目在 BL 层调用 AddItems（使用作为接口**的对象列表）

*   BL 项目有一些业务逻辑，在将对象列表传递给 DAL 之前的额外验证（也可能也有错误处理）

*   DAL 在数据库中创建项目，然后，如果需要，将**接口**列表传回

# python - Python 安装创建者

> ID：14502118
> 
> 赞同：0
> 
> 时间：2013-01-24T13:09:05.637
> 
> 标签：python, windows, installation

嗨，我想为我的 Python 程序构建一个安装创建器。

我已经为信息收集、路径、文件、PICS 等编写了代码。

现在我需要： 压缩程序的文件。使用安装路径等制作一个配置文件。为安装程序制作代码（我必须这样做） 最后我需要将它全部“打包”在一个 .exe 文件中，该文件将在我的安装程序代码中运行第一个窗口，以便它可以作为我自己的定制安装程序工作。

有谁知道如何做这个简单的？

我最大的问题是将它全部收集在一个 .exe 文件中，该文件将运行我的 Windows（TK 代码），当然在单击时安装我的程序......

我有一些想法如何去做，但在我的脑海里，这些想法似乎很大而且不容易，所以需要更简单的解决方案。

更新。如果我有一个在 python（Tkinter）中构建的程序，它将收集信息并将此信息保存为配置文件。然后我可以构建一个程序来读取这些信息并提取文件等。根据信息。但是我将如何将这些配置文件/程序合并到一个 .exe 文件中，单击该文件将运行我的程序，然后将我的文件解压缩到配置文件中的路径。最后使用我自己的图标作为单个 .exe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:17:22.030

如果您想将所有内容都放在一个 exe 文件中，则其代码需要了解其内容并提取它们。这是一个已经通过各种工具解决的问题，例如。看到这个[SO question](https://stackoverflow.com/questions/3767/what-is-the-best-choice-for-building-windows-installers)及其答案。

# event-handling - TDataSet->Cancel() 仍然允许 Post 继续

> ID：14502122
> 
> 赞同：0
> 
> 时间：2013-01-24T13:09:11.167
> 
> 标签：event-handling, c++builder, tadoquery

我在一个 BeforePost 事件处理程序中，希望在帖子通过之前取消它。在我的 BeforePost 函数结束时，我调用 DataSet->Cancel(); 当通过这个进行调试时，我看到它从我的函数到 TDataSet.DoBeforePost 函数，然后到 TDataSet.Post；它调用 CheckOperation() 的地方。CheckOperation 抛出异常（我试图通过调用 Cancel() 来避免），因为数据输入错误并且用户看到此错误。

在这个操作顺序中我做错了什么吗？任何想法或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:37:21.163

如果我没记错的话，你应该使用 Abort() 而不是 Cancel();

# java - 计算后如何清除JButtons

> ID：14502124
> 
> 赞同：0
> 
> 时间：2013-01-24T13:09:12.580
> 
> 标签：java, swing, jbutton, jtextfield, calculator

我写了一个计算器，但是我连接数字的方式非常糟糕，因为在计算之后让我说“5 + 2”当我按下相等按钮时它给出“7”，当我想做另一个计算时问题就来了让我们说“6 +1”当我按下 6 按钮时它不会这样做，它会给出“76+1”，即将我的结果与新计算连接起来，我试图修复它，但我不能不破坏另一个功能。下面是部分代码。

```
private void NineActionPerformed(java.awt.event.ActionEvent evt) {                                     
    // TODO add your handling code here:
    TextField.setText(TextField.getText()+"9");
}                                    

private void OneActionPerformed(java.awt.event.ActionEvent evt) {                                    
    // TODO add your handling code here:
    TextField.setText(TextField.getText()+"1");
}                                   

private void TwoActionPerformed(java.awt.event.ActionEvent evt) {                                    
    // TODO add your handling code here:
    TextField.setText(TextField.getText()+"2");
}                                   

private void ThreeActionPerformed(java.awt.event.ActionEvent evt) {                                      
    // TODO add your handling code here:
    TextField.setText(TextField.getText()+"3");
}                                     

private void FourActionPerformed(java.awt.event.ActionEvent evt) {                                     
    // TODO add your handling code here:
    TextField.setText(TextField.getText()+"4");
}                                    

private void FiveActionPerformed(java.awt.event.ActionEvent evt) {                                     
    // TODO add your handling code here:
    TextField.setText(TextField.getText()+"5");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:13:29.610

`String`您需要计算结果，而不是仅仅连接，例如：

```
private void NineActionPerformed(java.awt.event.ActionEvent evt) {                                     
    textField.setText(Integer.toString(Integer.parseInt(TextField.getText()) + 9));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:17:53.093

最简单的解决方案：添加清除按钮并按下清除文本。

典型解决方案：

做这样的事情：

```
onequalbuttonclick [your equal button action function] 
set equalPress=true; 
```

在其他功能做这样的事情

```
 private void NineActionPerformed(java.awt.event.ActionEvent evt) {                                     
if(equalPress){        
textField.setText(9);
equalPress=false;

    }
else
textField.setText((Integer.parseInt(TextField.getText()) + 9));
} 
```

评论您的代码：只需在您的类中添加一个 actionPerformed 事件，而不是这些函数。然后您可以使用该`getSource()`方法找到单击的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:14:07.990

只是`TextField.setText("");`从每个事件的开始

# java - 在 H2 中，“TRACE_LEVEL_FILE=4”是否仅适用于本地/嵌入式数据库？

> ID：14502127
> 
> 赞同：0
> 
> 时间：2013-01-24T13:09:18.540
> 
> 标签：java, database, h2

我尝试在服务器/tcp 上使用“TRACE_LEVEL_FILE=4”

```
DriverManager.getConnection("jdbc:h2:tcp://localhost/" + f.toURI() +";TRACE_LEVEL_FILE=4;", "sa", ""); 
```

并将日志级别设置为警告

```
java.util.logging.Logger h2database = java.util.logging.Logger.getLogger("h2database");
h2database.setLevel(Level.WARNING); 
```

我得到的只是scan123db.trace.db中的这条消息

```
01-24 15:04:14 database: org.h2.message.TraceWriterAdapter
org.h2.message.DbException: Class "org.h2.message.TraceWriterAdapter" not found [90086-169]
at org.h2.message.DbException.get(DbException.java:158)
at org.h2.message.TraceSystem.setLevelFile(TraceSystem.java:199)
at org.h2.engine.Database.open(Database.java:519)
at org.h2.engine.Database.openDatabase(Database.java:222)
at org.h2.engine.Database.<init>(Database.java:217)
at org.h2.engine.Engine.openSession(Engine.java:56)
at org.h2.engine.Engine.openSession(Engine.java:159)
at org.h2.engine.Engine.createSessionAndValidate(Engine.java:138)
at org.h2.engine.Engine.createSession(Engine.java:121)
at org.h2.server.TcpServerThread.run(TcpServerThread.java:136)
at java.lang.Thread.run(Unknown Source)
Caused by: org.h2.jdbc.JdbcSQLException: Class "org.h2.message.TraceWriterAdapter" not found      [90086-169]
at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
... 11 more
Caused by: java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
at org.h2.message.TraceWriterAdapter.<init>(TraceWriterAdapter.java:28)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at org.h2.message.TraceSystem.setLevelFile(TraceSystem.java:197)
... 9 more 
```

我想知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:52:30.400

如文件所述，该选项`TRACE_LEVEL_FILE=4`适用于“[使用其他日志记录 API](http://h2database.com/html/features.html#other_logging) ”。如果你使用它，那么这个“Other Logging API”也需要在类路径中，在服务器端。如文档中所述，“要使用 SLF4J，所有必需的 jar 文件都需要位于类路径中。”

# oracle - 更改 Oracle Express 的默认语言

> ID：14502128
> 
> 赞同：1
> 
> 时间：2013-01-24T13:09:22.063
> 
> 标签：oracle, express

我安装了**Oracle Database 11g Express Edition**，安装后的默认语言不是英文

![在此处输入图像描述](../Images/a80a3a99243a33a023393903e9aba51d.png)

是否可以使用 SQL 命令行工具或其他东西来修改它的语言设置，所以它又会是英语？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:27:12.690

如果您设置 NLS_LANG 环境变量，SQL*Plus 应该选择它，例如：

```
SET NLS_LANG=English 
```

# c# - 多个应用程序访问相同的文件

> ID：14502138
> 
> 赞同：1
> 
> 时间：2013-01-24T13:10:00.750
> 
> 标签：c#, multithreading, mutex

```
 **This is Writer Application**     

  public class LogWritter
          {      
           Mutex mutx = new Mutex(false, @"Global\MySharedLog");
           mutx.WaitOne();
            try
            {
             xmlDoc.Load(_logFilePath);
              ///Write Log Code
              xmlDoc.Save(_logFilePath);
            }
            finally
            {
                mutx.ReleaseMutex();
            }
          } 
```

这是阅读器应用程序

```
 public class LogReader
         { 
             Load(logFilePath);
              //Reader code    
         } 
```

我正在 ABC.XML 文件中写入日志。该 XML 文件可以由多个进程共享，这就是为什么我使用`Mutex`对象来锁定目的意味着如果一个进程正在写入日志，那么同时另一个进程正在使用`Mutex.Waitone()`方法等待传入进程，而第一个进程在finally中完成写入日志并释放mutext对象。我有另一个阅读器应用程序，我想在其中使用 ABC.xml 文件进行阅读我如何在阅读器应用程序中使用 mutext 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:58:17.073

1.  从此处复制/粘贴 SingleGlobalInstance 类：[在 C# 中使用全局互斥体的好模式是什么？](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c)

2.  将您的代码更改为：

    ```
     // writer app
      public class LogWritter
      {   
          using (new SingleGlobalInstance(-1))
          {   
              xmlDoc.Load(_logFilePath);
              //Write Log Code
              xmlDoc.Save(_logFilePath);
          }
      }

     // reader app
     public class LogReader
     { 
          using (new SingleGlobalInstance(-1))
          {   
              Load(logFilePath);
          }
          //Reader code    
     } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:32:57.680

您希望它是静态的，这样某人就不会意外地创建一个新实例并获得不同的互斥锁。

```
public static class FileMutexes
{
    private static System.Collections.Generic.Dictionary<string, System.Threading.Mutex> mutexesInUse = new System.Collections.Generic.Dictionary<string, System.Threading.Mutex>();

    public static System.Threading.Mutex GetMutexForFile(string fileName)
    {
        if (!mutexesInUse.ContainsKey(fileName))
            mutexesInUse[fileName] = new System.Threading.Mutex();

        return mutexesInUse[fileName];
    }
} 
```

# iphone - URL 图片问题 iphone

> ID：14502139
> 
> 赞同：1
> 
> 时间：2013-01-24T13:10:09.757
> 
> 标签：iphone, ios, objective-c

我有 2 个主要的小图像按钮，比如**aBtn**和**bBtn**。当我单击**aBtn / bBtn**时，我默认生成 6 个图像 url，检查**图像不为零**的条件。在 6 幅图像中，如果某些图像是空的，那么我会单独避免空图像并相应地设置框架。当我从**aBtn 点击到 bBtn 时**，我有时间延迟。这是由于每次检查生成的 6 个 url 图像而没有 nil/empty 图像并相应地设置框架位置。

这是我用来显示图像的代码并检查 6 个 url 图像数据的条件不是 nil 如果有人说 3rd url 图像是 nil，它将被避免。如何克服显示图像的延迟？

```
 NSMutableString *strUrl;
    int i;
    int j=7;
    int k=0;
    xorigin=350;
    int cou=1;

    for( i=1;i<j;i++){

        strUrl=[[NSMutableString alloc]init];
        UIImageView *imageView= [[UIImageView alloc]init];

        [strUrl appendFormat:@"http://commondatastorage.googleapis.com/images2.solestruck.com/%@%@%@%@%@%@%@)-01060%d.jpg",
         [[[[shoeDetailDict objectForKey:@"vendorName"] lowercaseString] lowercaseString] stringByReplacingOccurrencesOfString:@" " withString:@"-"],@"-shoes/",[[shoeDetailDict objectForKey:@"vendorName"] stringByReplacingOccurrencesOfString:@" " withString:@"-"],@"-shoes-",[[shoeDetailDict objectForKey:@"productName"] stringByReplacingOccurrencesOfString:@" " withString:@"-"],@"-(",[[prdcolorimgArray objectAtIndex:tagedColor] stringByReplacingOccurrencesOfString:@" " withString:@"-"],i];

        NSURL *imageUrl=[[NSURL alloc]initWithString:strUrl];

        NSError *error;
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:strUrl] options:NSDataReadingUncached error:&error];
        NSLog(@"imageurl colors : %@",strUrl);

        if(i==4){

            imageView.frame =CGRectMake(25, 0, (self.view.frame.size.width*80)/100,(self.view.frame.size.height*40)/100);
            [imageView setImageWithURL:imageUrl];
        }

        else{

            if(data != nil ){
                cou++;
                imageView.frame =CGRectMake(xorigin, 0, (self.view.frame.size.width*80)/100,(self.view.frame.size.height*40)/100);
                [imageView setImageWithURL:imageUrl];
                xorigin=xorigin+320;

            }
        }
        imageView.backgroundColor=[UIColor whiteColor];
        [productScroll addSubview:imageView];
        productScroll.contentSize = CGSizeMake((self.view.frame.size.width)*cou, (self.view.frame.size.height*40)/100);
        productScroll.contentOffset=CGPointMake(0, 0);

        k++;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:17:20.583

您正在`dataWithContentsOfURL:`同步使用该负载信息。

尝试首先加载所有图像，然后将它们放在滚动视图上。

尝试使用此代码：

```
- (void) prepareImages {
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{
        NSMutableArray * imagesArray = [NSMutableArray array];
        // Load all images here
        [self imagesLoaded:imagesArray]
    });
}
- (void) imagesLoaded:(NSArray*) images {
     dispatch_async(dispatch_get_main_queue(), ^{
        //Display images here
    });
} 
```

# ckeditor - 如何更改内联实例的标题 ckeditor 集？

> ID：14502142
> 
> 赞同：0
> 
> 时间：2013-01-24T13:10:20.590
> 
> 标签：ckeditor

现在它将它设置为富文本编辑器 element_id。有什么办法可以改变吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:19:24.047

在 ckeditor.js 中搜索以下字符串：

```
a.changeAttr("title",c) 
```

如果需要，只需将其设置为空字符串：

```
a.changeAttr("title",''); 
```

请记住，您将在更新期间丢失此信息，但这是他们将其添加到可编辑配置之前的唯一方法。仅当您不介意丢失一些 a11y 时才使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:10:20.670

此标题在[CKEDITOR.editable](https://github.com/ckeditor/ckeditor-dev/blob/master/core/editable.js#L934)中设置。您可以通过以下方式更改它：

*   修改此代码，
*   更改翻译`lang/<your lang>.js`（例如[https://github.com/ckeditor/ckeditor-dev/blob/master/lang/en-gb.js#L30](https://github.com/ckeditor/ckeditor-dev/blob/master/lang/en-gb.js#L30)）

但是当你修改它时，记住这个标题是用来提供 a11y 的。

# node.js - 无法使用 aws-sdk 在 nodejs 中上传图像

> ID：14502143
> 
> 赞同：5
> 
> 时间：2013-01-24T13:10:33.027
> 
> 标签：node.js, amazon-s3

我尝试使用 aws-sdk 和 knox，但我得到状态代码 301 试图上传图像。我收到状态代码 301 和消息 - '您尝试访问的存储桶必须使用指定的端点进行寻址。请将所有未来的请求发送到此端点。这适用于 php。

```
AWS.config.loadFromPath(__dirname + '/config/config.json');
fs.readFile(source, function (err, data) {
var s3 = new AWS.S3();
    s3.client.createBucket({Bucket: 'mystuff'}, function() {
       var d = {
            Bucket: 'mystuff',
            Key: 'img/test.jpg',
            Body: data,
            ACL: 'public-read'
            };
       s3.client.putObject(d, function(err, res) {
            if (err) {
                console.log("Error uploading data: ", err);
                callback(err); 
            } else {
                console.log("Successfully uploaded data to myBucket/myKey");
                callback(res);   
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T22:28:41.377

我实际上解决了这个问题。在您的配置中，您必须有一个区域，因为我的存储桶是“美国标准”，所以我将我的区域留空并且它有效。config.json - {“accessKeyId”：“secretKey”，“secretAccessKey”：“secretAccessKey”，“region”：“”}

转到 s3 管理控制台，选择您的文件之一，然后单击 proporties -> 查看文件链接。美国标准 [https://s3.amazonaws.com/yourbucket/](https://s3.amazonaws.com/yourbucket/) 在您的控制台窗口中托管 yourbucket.s3.amazonaws.com/

us-west-1 [https://s3-us-west-1.amazonaws.com/yourbucket/](https://s3-us-west-1.amazonaws.com/yourbucket/) 在您的控制台窗口中托管 yourbucket.s3-us-west-1.amazonaws.com/

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T16:22:38.343

您是否尝试过 .send()？

我可以通过以下代码上传到 S3。

[http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/AWSRequest.html](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/AWSRequest.html)

```
var s3object = {Bucket: 'mystuff', Key: name, Body : data['data']};
    s3.client.putObject(s3object).done(function(resp){
      console.log("Successfully uploaded data");
    }).fail(function(resp){
      console.log(resp);
    }).send(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T09:11:57.093

我对新的 SDK 有同样的问题，并通过明确设置端点选项来解决它。

参考：[http ://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#constructor_details](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#constructor_details)

片段：

```
var AWS = require('aws-sdk'); 

var s3 = new AWS.S3({ endpoint :'https://s3-your-region-varies.amazonaws.com' }),
    myBucket = 'your-bucket-name';

var params = {Bucket: myBucket, Key: 'myUpload', Body: "Test"};

s3.putObject(params, function(err, data) {
    if (err)  {
        console.log(err) 
    } else {
        console.log("Successfully uploaded data to "+myBucket+"/testKeyUpload");
    }
}); 
```

或者，您可以通过在配置文件中设置区域来解决此问题，您只需准确输入区域名称即可。

# matlab - 在matlab中求解矩阵方程

> ID：14502145
> 
> 赞同：3
> 
> 时间：2013-01-24T13:10:37.817
> 
> 标签：matlab, matrix, linear-algebra

我有一个类型的方程，`c = Ax + By`其中和是尺寸为 50,000 X 1 的向量，`c`并且是尺寸为 50,000 X 50,000 的矩阵。`x``y``A``B`

Matlab 中是否有任何方法可以找到矩阵`A`以及`B`何时`c`和是已知的`x`？`y`

我有大约 100,000 个`c`、`x`和的样本`y`。`A`并`B`保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:34:36.240

让`X`成为你得到的所有 100,000 s 的集合`x`（使得`i`-th 列`X`等于`x_i`-th 向量）。
以同样的方式，我们可以分别将 和 定义`Y`为s 和s 的`C`2D 集合。`y``c`

你想解决的是`A`这样`B`的

```
C = AX + BY 
```

您有 2 * 50,000^2 个未知数（和 的所有条目`A`）`B`和`numel(C)`方程。

因此，如果您拥有的数据向量数量为 100,000，则您只有一个解决方案（最多线性相关样本）。如果您有超过 100,000 个样本，您可能会寻求最小二乘解决方案。

重写：

```
C = [A B] * [X ; Y]  ==>  [X' Y'] * [A';B'] = C' 
```

所以，我想

```
[A' ; B'] = pinv( [X' Y'] ) * C' 
```

在matlab中：

```
ABt = pinv( [X' Y'] ) * C';
A = ABt(1:50000,:)';
B = ABt(50001:end,:)'; 
```

如我错了请纠正我...

**编辑：**
这里似乎对维度大惊小怪。所以，我会尽量把它说清楚。

**模型：**有两个（未知）矩阵`A`和`B`，每个大小为 50,000x50,000（总共 5e9 个未知数）。
观察是*向量*的三元组： ( `x`, `y`, ) 每个这样的向量有 50,000 个元素（*每个样本*`c`总共有 150,000 个观察点）。基本模型假设是在此模型中生成观察值。**任务：**给定观察值（即*向量*{ ( , , ) }_的三元组），任务是发现和。*`c = Ax + By`
**`n``n`*`x_i``y_i``c_i``i=1..n``A``B`****

 ****现在，每个样本 ( `x_i`, `y_i`, `c_i`) 导出 50,000 个形式`c_i = Ax_i + By_i`为未知`A`和的方程`B`。**如果**样本`n`数**大于**100,000，则有超过 50,000 * 100,000 (> 5e9) 个方程，系统**过度约束**。

为了以矩阵形式编写系统，我建议将所有观察结果堆叠成矩阵：

*   `X`一个大小为 50,000 x的矩阵，`n`其`i`第 - 列等于观察到的`x_i`
*   `Y`一个大小为 50,000 x的矩阵，`n`其`i`第 - 列等于观察到的`y_i`
*   `C`一个大小为 50,000 x的矩阵，`n`其`i`第 - 列等于观察到的`c_i`

使用这些矩阵，我们可以将模型写为：

C = A*X + B*Y

我希望这能澄清一点。

感谢@Dan 和@woodchips 的关注和启发性的评论。

**编辑（2）：**
将以下代码提交给[octave](http://weboctave.mimuw.edu.pl/weboctave/web/index.php#menus)。在这个例子中，我只使用 2 个维度而不是 50,000 个维度，而不是`n=100,000`我解决的观察`n=100`：

```
n = 100;
A = rand(2,2);
B = rand(2,2);
X = rand(2,n);
Y = rand(2,n);
C = A*X + B*Y + .001*randn(size(X)); % adding noise to observations 
ABt = pinv( [ X' Y'] ) * C'; 
```

`A`检查地面实况模型（和`B`）与恢复模型之间的差异`ABt`：

```
ABt - [A' ; B'] 
```

产量

```
 ans =

   5.8457e-05   3.0483e-04
   1.1023e-04   6.1842e-05
  -1.2277e-04  -3.2866e-04
  -3.1930e-05  -5.2149e-05 
```

这足够接近于零。（请记住，观察结果很嘈杂，解决方案是最小二乘解决方案）。****

# .net - 调整整个窗体大小时调整 Windows 窗体 DataGrid 中的列宽 (.NET 4.0)

> ID：14502153
> 
> 赞同：0
> 
> 时间：2013-01-24T13:11:02.920
> 
> 标签：.net, winforms, datagridview

我有`DataGrid`很多专栏。我已经锚定了，`DataGrid`所以当我调整整个表单的大小时，它也会调整大小。不幸的是，列的宽度保持不变，这是不行的。我在这里看到了一个解决方案，将最后一列设置为，`Fill`但是这样我扩大主窗体越大，最后一列就越大，而无需调整其他列的大小。我写道，有一个内置的解决方案，`.NET 4.5`但我仅限`.NET 4.0`于此，有没有办法调整我所有列的宽度保持相同的比例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:49:42.843

如果您只想让所有列的宽度相等并填充网格，则可以处理该`Resize`事件。

```
 private void dataGridView1_Resize(object sender, EventArgs e)
    {
        int width = dataGridView1.Width / dataGridView1.ColumnCount;
        foreach (DataGridViewColumn column in dataGridView1.Columns)
            column.Width = width;
    } 
```

您可能需要进行一些小的调整，但这就是要点。

# jquery - 获取被激活的标签（div）的ID

> ID：14502156
> 
> 赞同：42
> 
> 时间：2013-01-24T13:11:04.020
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-tabs

我正在使用 jquery 1.9 和 jquery UI 1.10

我希望能够在单击选项卡时获取选项卡 ID。例如，如果我单击名为“Second”的选项卡，我想获得“tabs-2”响应。

到目前为止，我已经完成了以下代码：

```
<script type="text/javascript">
    $(function () {
        $("#tabs").tabs({
            beforeActivate: function (event, ui) {
                alert(/* the id of the tab (div) being activated */);
            }
        });
    });
</script>

<div id="tabs">
    <ul>
       <li><a href="#tabs-1">First</a></li>
       <li><a href="#tabs-2">Second</a></li>
    </ul>
    <div id="tabs-1">
        <p>abcde</p>
    </div>
    <div id="tabs-2">
        <p>fghi</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-24T08:23:58.090

经过测试并使用 JQueryUI 1.10，如何在选择选项卡时获取选项卡的 ID：

```
$("#tabs").tabs({
  beforeActivate: function (event, ui) {
    alert(ui.newPanel.attr('id'));
  }
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-24T13:17:22.950

```
var $tabs = $("#tabs").tabs({
    select: function( evt, ui ) {
        $("#current").text( $(ui.tab).attr('href'));
    }
}) 
```

**更新**- jquery UI 1.10 的另一个解决方案

```
 $(function () { $('#tabs').tabs({ 
             activate: function (event, ui) {
             var active = $("#tabs").tabs("option", "active");
             alert($("#tabs ul>li a").eq(active).attr('href')); 
     } 
}); 
```

[更新了 jsFiddle 演示](http://jsfiddle.net/WnDV9/2/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-06T06:06:09.647

这对我有用

```
$( "#editor_tabs" ).tabs( { 
    activate: function ( event, ui ) {
        $(ui.newTab.find("a").attr("href")).html("Got It");
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T13:21:56.823

如果您想在单击选项卡时得到一些东西，请使用 select 事件。

```
$('#tabs').tabs({
  beforeActivate: function(event, ui){
     alert($(ui.tab).attr('href'));
 }
 }); 
```

编辑

将“select”更改为“beforeActivate”，因为它已从 1.10 版中删除

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-20T06:58:00.763

```
var id=$("ulselector li.ui-state-active").attr("aria-controls"));
alert(id); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-28T00:36:08.037

我猜您想知道哪个选项卡被激活，并基于该选项卡执行各种操作。

与其从 HTML 元素中获取 id 和属性，不如按照以下方式进行操作：

```
$("#tabs").on("tabsactivate", (event, ui) => {
    if (ui.newPanel.is("#tabs-1")){
        //first tab activated
    }
    else{
        //second tab activated
    }
}); 
```

创建选项卡时不会调用激活事件。为此，您需要在组合中添加“tabscreate”事件，但您明白了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-14T05:01:01.590

检查 JQueryUI 事件对象（使用浏览器调试器，如 Mozilla 的 Firebug 或 Chrome 开发工具）。

```
$("#tabs").tabs({        
    activate: function( event, ui ) { 
        console.log(event)  //unnecessary, but it's how to look at the event object              
        alert(event.currentTarget.hash)
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-11T05:52:37.860

It works for me

```
$('#divName .ui-tabs-panel[aria-hidden="false"]').prop('id'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-27T12:00:13.907

使用 aria-controls

```
alert(ui.newTab.attr("aria-controls")); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-13T03:53:23.737

在我看来，最简单的方法是添加`data-`到`<li ...>`组成选项卡的选项卡中。

例如：

```
 <li data-index="2" data-tabname="Notes">
                  <a href="#tabs-Employee-Notes">Notes</a>
                </li> 
```

然后处理 beforeActivate 事件（如果这是您正在查看的事件）：

```
$("#jqTabs_EmployeeDetails").tabs({
    heightStyle: "fill",
    beforeActivate: function (event, ui) {
        var n = ui.newTab;

        console.log($(n).data());
    }
}); 
```

例如，`$(n).data("tabname"`) 将返回选项卡名称。这还允许您将所需的任何其他信息添加到选项卡中。我相信简单的解决方案和可扩展的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-20T09:49:11.930

我发现最简单的方法是：

```
$('#tabs .ui-state-active').attr('aria-controls') 
```

这将返回来自 div 女巫的 ID 处于活动状态。请记住，您必须将 #tabs 更改为您的 jquery.tabs ID。

# git - 如何在中央“开发存储库”中配置只读分支？

> ID：14502164
> 
> 赞同：2
> 
> 时间：2013-01-24T13:11:17.083
> 
> 标签：git

我必须为受控 git 存储库的一些**远程分支配置****只读**访问权限。

 **场景如下：

对于我们的开发，我们有一个内部“开发存储库” ^(（1）)，它反映了一个“外部存储库”。这个“开发存储库”会定期更新（`git remote update`在`cron`工作中）。我们的开发发生在从外部存储库*派生*的分支“dev_*”中，但从*不直接*在外部分支上进行：

![存储库架构](../Images/b780ef3ba20a860bd0071dac57597186.png)

将功能添加到的工作流程`master`：

1.  我们创建一个作为父级`dev_master`的分支。`master`
2.  John 克隆存储库`development`、签出`dev_master`、处理它，并定期推送回`development`.
3.  如果存储库`external`被`master`更新，那么`master`在`development`（由于上面提到的 cronjob），并且有人可以`master`在 上合并`dev_master`，所以我们与`external`.

我们需要禁止 John 推送到 的分支`master`，`development`这样他的更改不会在从 的定期更新后丢失`external`。

再次，示意图：

![存储库摘要](../Images/a160189207251da2149c90adc712c64b.png)

* * *

### 笔记

^((1))我发现有些人称这个开发存储库为“暂存存储库”（例如，在[How do I setup a staging repository in git?](https://stackoverflow.com/q/7840861/413020 "自卫队")中，出现了非常相似的情况）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:11:17.083

我使用[Server-Side hook](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks "Pro Git - 服务器端钩子")禁止这些推送。来自`git help hooks`：

> **pre-receive**
> 这个钩子由远程存储库上的 git-receive-pack 调用，当在本地存储库上完成 git push 时会发生这种情况。就在开始更新远程存储库上的 refs 之前，调用了 pre-receive 钩子。它的退出状态决定了更新的成功或失败。
> [...]
> 如果钩子以非零状态退出，则不会更新任何参考。如果钩子以零退出，更新钩子仍然可以阻止更新单个参考。
> [...]

钩子代码：

```
#!/bin/bash

# Read the branches of the remote repository
remote_branches=$(git ls-remote --heads | sed "s,.*\(refs/heads/\),\1,")

function forbid_push_to_remote_branches()
{
    while read old_value new_value ref_name
    do
        # Test for existence of [$ref_name] in remote
        for remote_branch in $remote_branches
        do
            if [[ $remote_branch == $ref_name ]]
            then
                invalid_refs="$invalid_refs [$remote_branch]"
                break
            fi
        done
    done

    # if remote read-only branches found, exit with non-zero
    # and list these branches
    if [[ -n $invalid_refs ]]
    then
        echo "ERROR: You are trying to push to remote branch(es):" >&2
        echo "   $invalid_refs" >&2
        return 1 
    else
        return 0
    fi
}

forbid_push_to_remote_branches
exit $? 
```

此代码必须复制到`$(bare_repo_path.git)/hooks/pre-receive`服务器中的文件中（没有`pre-receive.sample`）。**

# ios - 如果您有 dSYM，可以对 .ipa 文件进行逆向工程吗？

> ID：14502167
> 
> 赞同：2
> 
> 时间：2013-01-24T13:11:23.930
> 
> 标签：ios, objective-c, reverse-engineering, ipa, dsym

一些代码分析工具要求您将 .ipa 与 .dSYM 文件一起提交。

将 .dSYM 文件与 .ipa 一起发送是否存在对应用程序进行逆向工程的风险？我的意思是，如果他同时拥有 .ipa 和 .dSYM，有人可以获取源代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:07:21.537

即使没有符号，对应用程序进行逆向工程也不难。

以下是最新版本的[IDA在](https://www.hex-rays.com/products/ida/)*没有*.dSYM 的情况下可以向您展示的内容：

![IDA iPhone Objective-C 反汇编](../Images/dec94b427fdcc2a140723ab57886b419.png)

如果你有 Hex-Rays 反编译器，你可以得到类似的东西：

```
// CKMessagesController - (void)mailComposeController:(id) didFinishWithResult:(int) error:(id) 
void __cdecl -[CKMessagesController mailComposeController:didFinishWithResult:error:](struct CKMessagesController *self, SEL a2, id a3, int a4, id a5)
{
  struct CKMessagesController *v5; // r4@1

  v5 = self;
  objc_msgSend(self, "dismissViewControllerAnimated:completion:", 1, 0);
  objc_msgSend((void *)v5->_mailComposeController, "release");
  v5->_mailComposeController = 0;
} 
```

拥有 .dSYM 肯定会使任务变得更加容易：不仅所有的函数和变量名称都会在那里（包括私有名称），而且可能还有完整的类型（结构、类和枚举）。您将无法获得*源*代码，但可能非常接近它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:19:17.423

不，他不会得到源代码，但知道符号名称可能有助于理解编译/反编译的代码。

# php - 动态显示表中更新的数据

> ID：14502179
> 
> 赞同：0
> 
> 时间：2013-01-24T13:12:01.593
> 
> 标签：php, jquery, ajax, knockout.js

我确实有一个表格和表格。我通过表格绑定表格，我能够做到这一点，但我担心我想更新表格中的任何字段，但它没有立即显示在表格中。它是显示在表格中但刷新页面后。但我希望它必须是动态的。表格代码和绑定表格如下：

```
 <form class="form  form-horizontal" id="serviceactivityForm" data-bind="foreach:items" action="<?php echo $BASE;?>projects/service_activities"  method="post">
                <div class="span3">
                        <input type="hidden" id="data_actid" name="actid" data-bind="value: actid" />
                        <div class="control-group">
                            <label class="control-label labellocation">Subject</label>
                            <div class="controls">
                            <input type="text" id="subject" name="subject" class="inputmargin" data-bind='value: subject' title="Please Enter Subject" required="" style="width:150px"/></div>
                        </div>

                        <div class="control-group">
                            <label class="control-label labellocation">Location</label>
                            <div class="controls">
                            <input type="text" id="location"  name="location" data-bind='value: location' class="inputmargin" style="width:150px"></div>
                        </div>
                    </form>
<form class="form" action="<?php echo $BASE;?>projects/service_activities">
        <div class="datagrid span4">  
            <table class="table table-hover table-bordered selectable " style="width:450px;" id="service_activitiesTable">
                                <thead>
                                    <tr>
                                        <th>Subject</th>
                                        <th>Location</th>
                                        <th>Assigned</th>
                                    </tr>
                                </thead>
                            <tbody data-bind="foreach: items" >
                            <tr data-bind="value:actid" id="service_activity">
                            <td data-bind="text:subject"></td>
                            <td data-bind="text:location"></td>
                            <td data-bind="text:techname"></td>
                        </tr>
                    </tbody>

            </table>
        </div>
    </form> 
    <script type="text/javascript">
        $(function () {
            $("#service_activity").live('click', function () {
                $.ajax({
                    type: 'POST',
                    url: root + "projects/service_activities?json",
                    data: { id: $(this).val() },
                    success: function (o) {
                        ko.applyBindings(new DynamicModel(o.service_activity), document.getElementById("serviceactivityForm"));

                    },
                    dataType: "json"
                });
            });
         });
    </script> 
```

那么有什么办法可以做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:18:49.517

你能展示你的视图模型和初始绑定代码吗？

猜测，这是因为您在保存时创建了一个新的视图模型，并使用它来应用绑定。您应该绑定到作为可观察数组的 items 属性，并且您希望使用更新的值添加到它，而不是覆盖它。

# c# - 如何将数据读取器值从 DAL 传递到表示层

> ID：14502181
> 
> 赞同：3
> 
> 时间：2013-01-24T13:12:09.937
> 
> 标签：c#, asp.net, 3-tier

我正在开发一个使用 3 层架构的项目。我想知道如何将数据读取器值从 DAL 传递到表示层

我的代码是这样的。在 DAL 层

```
public class HomeDAL
{
 public SqlDataReader DefaultSearchFriends(long userid)
 {
    SqlConnection SocialConn = new SqlConnection(connstr);

    using (SqlCommand comm = new SqlCommand("proc_FriendsSearch", SocialConn))
    {
        comm.CommandType = CommandType.StoredProcedure;
        comm.Parameters.AddWithValue("@userid", userid);
        SocialConn.Open();
        SqlDataReader dr = comm.ExecuteReader(CommandBehavior.CloseConnection);
        return dr;
    }
 }
} 
```

在 BAL 层

```
public class HomeBAL
{
    public SqlDataReader DefaultSearchFriends(long userid)
    {
       HomeDAL HDAL = new HomeDAL();
       SqlDataReader dr = HDAL.DefaultSearchFriends(userid);
       return dr;
    }
} 
```

在演示层上，我在页面加载时写了这个

```
HomeBAL HBAL = new HomeBAL();
SqlDataReader dr = HBAL.DefaultSearchFriends(user_id);
while (dr.Read())
{ 
 //some code
} 
```

现在我想知道两件事

1-这是以这种方式调用数据读取器的权利还是有一些更好的逻辑。

2-如何在 BAL 层和 DAL 层关闭数据读取器对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:23:11.727

嗯，分层架构的基本思想是将不同的组件解耦，原因有几个。一些原因是可测试性、可维护性、可扩展性，但还有更多。

要在这些层之间传递数据——这在一定程度上取决于数据的类型——但通常你会使用一些简单的类作为数据传输对象 (DTO)，这些类将在 DAL 中填充数据。例如

```
public class Person
{
  public string Name {get; set;}
  public string FirstName {get; set;}
  ...
} 
```

使用您的方法，您打破了这个想法，因为您将传递`DataReader`到表示层，这意味着您无法在不接触其他层的情况下切换 DAL 技术。例如，如果您想使用实体框架，您将不得不修改代码中的每个部分，您当前正在使用`SqlDataReader`.

您还可以看到，如果您坚持分层方法背后的想法，则不必考虑第二个问题。

我希望这会有所帮助。

**编辑**

好的，我有点好奇，您找不到合适的解决方案。但无论如何，第一个也是最简单的方法可能是，不要发布`SqlDataReader`. 在 DAL 中处理其生命周期。意思是，假设你在上面使用我的 DTO

```
public class HomeDAL
{
 public List<Person> DefaultSearchFriends(long userid)
 {
    SqlConnection SocialConn = new SqlConnection(connstr);

    using (SqlCommand comm = new SqlCommand("proc_FriendsSearch", SocialConn))
    {
        comm.CommandType = CommandType.StoredProcedure;
        comm.Parameters.AddWithValue("@userid", userid);
        SocialConn.Open();
        SqlDataReader dr = comm.ExecuteReader(CommandBehavior.CloseConnection);

        var persons = new List<Person>();

        while (dr.Read())
          persons.Add(new Person { Name = dr["Name"], FirstName = dr["FirstName"] });

        dr.Close();

        return persons;
    }
 }
}
```

将是更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:23:11.393

我认为你的架构有问题；

1.  您正在使用具体类来查询数据库；相反，您需要一个抽象，以防您更改后端 SQL 服务器或查询机制。

2.  您正在将混凝土传递`SqlDataReader`到您的所有层中。从 DAL，您需要返回数据对象而不是数据库操作上下文实例。

3.  您只需要更改层之间的域对象，而不是执行实际工作的对象。

建议你[参考微软西班牙的n层参考应用](http://microsoftnlayerapp.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:02:03.233

在 DAL 文件中

```
public class HomeDAL
{
  public void DefaultSearchFriends(ref HomeBAL hBAL)
  {
    SqlConnection SocialConn = new SqlConnection(connstr);
    using (SqlCommand comm = new SqlCommand("proc_FriendsSearch", SocialConn))
    {
        comm.CommandType = CommandType.StoredProcedure;
        comm.Parameters.AddWithValue("@userid", hBAL.userid);
        SocialConn.Open();
        hBAL.Search_Reader = comm.ExecuteReader(CommandBehavior.CloseConnection);
    }
  }
} 
```

在 BAL 文件中

```
public class HomeBAL
{
public SqlDataReader Search_Reader = null;
} 
```

在演示层

```
 HomeBAL HBAL = new HomeBAL();
HomeDAL HDAL = new HomeDAL();
HDAL.DefaultSearchFriends(ref HBAL);
SqlDataReader dr = HBAL.Search_Reader;    
while (dr.Read())
{
} 
```

# php - 在 javascript 中处理 PHP 变量并返回 PHP

> ID：14502183
> 
> 赞同：0
> 
> 时间：2013-01-24T13:12:15.320
> 
> 标签：php, javascript, jquery, mysql

我正在开发一个应用程序，我从数据库中获取数据并使用 javascript/jquery 处理它，如下所示：

```
 $sqlEdit = "select revisionContent from tbl_revision where revisionId='".$_SESSION['contentId']."'";      //Query to fetch the result
    $rsEdit = $dbObj->tep_db_query($sqlEdit);
    $resEdit = $dbObj->getRecord($rsEdit);
    $IdLessContent = $resEdit['revisionContent']; 

 <script language="javascript">  
    var getSavedContent = '<?php echo json_encode($IdLessContent); ?>';
    var trimmedCont=($.trim(getSavedContent).slice(1));
    //console.log(trimmedCont);
    var lengthCont= trimmedCont.length;
    var trimmedCont=$.trim(trimmedCont.slice(0,lengthCont-1));
    console.log(trimmedCont);
    var test = $('<div class="addId">');
    test.append(trimmedCont);
    //console.log(test.html());
    test.children().each(function(index, value) {
         $(this).attr('id', "com-"+randomString());
     });
   //console.log(test.html());  
    viewContent  = test.html(); 
```

**我在viewContent**中获得了所需的数据。我想在本节的页面上显示它

```
 <div id="mainWrap" onClick="fnDestroyEditable();">
             <?php echo $resEdit['revisionContent']; ?>   //THis is the unprocessed data displayed directly from database.I want to display the processed data here
        </div> 
```

我知道我们无法将 javascript 变量传递给 PHP，因为两者都是不同的（**一个服务器端和另一个客户端**）。但是，我怎样才能在我的场景中实现这一点呢？ **编辑**我想补充一点，返回的数据是存储在数据库中的**HTML 。所以，我得到了 html-> 处理它（添加 id 属性）->****想要在处理后返回**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:24:36.770

您可以使用 javascript 将 viewContent 放入 #mainWrap 中。只需确保加载 DOM 并使用 $(document).ready() 包装您的 js 代码并添加：

```
$('#mainWrap').html(viewContent); 
```

在您的功能结束时。

```
$(document).ready(function () {
    var getSavedContent = '<?php echo json_encode($IdLessContent); ?>';
    var trimmedCont=($.trim(getSavedContent).slice(1));
    //console.log(trimmedCont);
    var lengthCont= trimmedCont.length;
    var trimmedCont=$.trim(trimmedCont.slice(0,lengthCont-1));
    console.log(trimmedCont);
    var test = $('<div class="addId">');
    test.append(trimmedCont);
    //console.log(test.html());
    test.children().each(function(index, value) {
        $(this).attr('id', "com-"+randomString());
    });
    //console.log(test.html());  
    viewContent  = test.html();
    // put viewContent in the innerHtml of your wrapper
    $('#mainWrap').html(viewContent); 
```

});

如果您需要将信息发送回服务器，则必须使用 ajax 来完成。我添加了一个 javascript 函数 addId() ，单击其中一个元素将调用该函数。新代码是：

```
$(document).ready(function () {
    var getSavedContent = '<?php echo json_encode($IdLessContent); ?>';
    var trimmedCont=($.trim(getSavedContent).slice(1));
    //console.log(trimmedCont);
    var lengthCont= trimmedCont.length;
    var trimmedCont=$.trim(trimmedCont.slice(0,lengthCont-1));
    console.log(trimmedCont);
    var test = $('<div class="addId">');
    test.append(trimmedCont);
    //console.log(test.html());
    test.children().each(function(index, value) {
        $(this).attr('id', "com-"+randomString());
    });
    //console.log(test.html());  
    viewContent  = test.html();
    // put viewContent in the innerHtml of your wrapper
    $('#mainWrap').html(viewContent);
    $('#mainWrap .addId').children().click(function({
      addId(this);
    }));
}

addId = function(elem){
  // elem is the child element you clicked on
  // $(elem).attr('id') should be "com-[randomString]"
    $.ajax({
        type: "POST",
        url: "path/to/php/script", // update id PHP script
        data: data, // whatever you need in json format
        dataType: "json",
        error: function() {
        // error function you want to implement
            errorFunction();
        },
        success: function(resp) {
            // do whatever you need with the response from you PHP action
        }
    });
}; 
```

如果您需要在没有人工交互的情况下调用服务器，只需替换

```
$('#mainWrap .addId').children().click(function({
    addId(this);
})); 
```

和：

```
$('#mainWrap .addId').children().each(function({
    addId(this);
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:18:59.613

如果我不理解你，你只需要在你的 js 代码的末尾添加这一行：

```
$('#mainWrap').html(viewContent); 
```

如果你想将 JS 数据发送到 PHP，你应该使用 ajax 请求。

# r - 如何将 x 轴标签添加到具有奇数面板的图中？

> ID：14502184
> 
> 赞同：2
> 
> 时间：2013-01-24T13:12:20.170
> 
> 标签：r, ggplot2, labels

> **可能重复：**
> [在 facet_wrap 图中添加“浮动”轴标签](https://stackoverflow.com/questions/13297155/add-floating-axis-labels-in-facet-wrap-plot)

数据链接： [https ://www.dropbox.com/s/q45t9hng4mryi6y/GTAP_CCShocks2.csv](https://www.dropbox.com/s/q45t9hng4mryi6y/GTAP_CCShocks2.csv)

代码：

```
 # Loading the data
   climshocks <- read.csv(file = "F:/Purdue University/RA_Position/PhD_ResearchandDissert/PhD_Draft/GTAP-CGE/GTAP_NewAggDatabase/NewFiles/GTAP_CCShocks2.csv", header=TRUE, sep=",", na.string="NA", dec=".", strip.white=TRUE)

   # Data manipulations
   ccshocks <- as.data.frame(climshocks)
   ccshocks[4:4] <- sapply(ccshocks[4:4],as.numeric)
   ccshocks <- droplevels(ccshocks)
   ccshocks <- transform(ccshocks,region=factor(region,levels=unique(region)))

   library(reshape)
   library(ggplot2)
   library(grid)

   #--------------------------------------------------------------------------------
   #### Average of climate-induced yield percent change for all regions by crop
   #--------------------------------------------------------------------------------

   #_Code_Begin...
   Avgccshocks.f <- melt(ccshocks)
   Avgccshocks.f <- Avgccshocks.f[Avgccshocks.f$sres %in% c("AVERAGE"), ]

   PlotAvgccshocks <- ggplot(data = Avgccshocks.f, aes(factor(region), value))
   PlotAvgccshocks + geom_bar(stat="identity") + 
   theme(axis.text.x = element_text(colour = 'black', angle = 90, size = 14, hjust = 0.5, vjust = 0.5),axis.title.x=element_blank()) + 
   ylab("Yield(%change)") + theme(axis.text.y = element_text(colour = 'black', size = 14, hjust = 0.5, vjust = 0.5), axis.title.y = element_text(size = 14, hjust = 0.5, vjust = 0.5, face = 'bold')) + 
   theme(strip.text.x = element_text(size = 16, hjust = 0.5, vjust = 0.5, face = 'bold')) +
   facet_wrap(~crops, scales="free_y", ncol=3)
   ggsave("PlotAvgccshocks.png")

   #_Code_End... 
```

结果： ![结果图](../Images/6da7de9f7771e7c71c08c79de03565b9.png)

我的问题： ggplot 中有没有办法将标签添加到最后两列下的 x 轴。我知道我可以通过在 facet_wrap() 中将“free_y”替换为“free”来做到这一点，但这会将标签添加到图中的所有面板中，这会使其不友好。

我正在寻找的是在剩下的两列正下方添加标签，或者添加两组 x 轴标签，但与“wht”面板的标签处于同一级别。

我希望我的问题很清楚。

提前致谢。

PS：我尝试使用 Julius 创建的函数来响应[在 facet_wrap 图中添加“浮动”轴标签](https://stackoverflow.com/questions/13297155/add-floating-axis-labels-in-facet-wrap-plot)来解决问题，代码如下

```
 #7- Function to add x-axis labels to all plots using facet_wrap()
    #----------------------------------------------------------------

    library(grid)
    # pos - where to add new labels
    # newpage, vp - see ?print.ggplot
    facetAdjust <- function(x, pos = c("up", "down"), 
                    newpage = is.null(vp), vp = NULL)
    {
    # part of print.ggplot
    ggplot2:::set_last_plot(x)
    if(newpage)
    grid.newpage()
    pos <- match.arg(pos)
    p <- ggplot_build(x)
    gtable <- ggplot_gtable(p)

    # finding dimensions
    dims <- apply(p$panel$layout[2:3], 2, max)
    nrow <- dims[1]
    ncol <- dims[2]

    # number of panels in the plot
    panels <- sum(grepl("panel", names(gtable$grobs)))
    space <- ncol * nrow

    # missing panels
    n <- space - panels

    # checking whether modifications are needed
    if(panels != space){

    # indices of panels to fix
    idx <- (space - ncol - n + 1):(space - ncol)

    # copying x-axis of the last existing panel to the chosen panels  
    # in the row above

    gtable$grobs[paste0("axis_b",idx)] <- list(gtable$grobs[[paste0("axis_b",panels)]])
    if(pos == "down"){
    if pos == down then shifting labels down to the same level as 
    # the x-axis of last panel
    rows <- grep(paste0("axis_b\\-[", idx[1], "-", idx[n], "]"), 
               gtable$layout$name)
    lastAxis <- grep(paste0("axis_b\\-", panels), gtable$layout$name)
    gtable$layout[rows, c("t","b")] <- gtable$layout[lastAxis, c("t")]}}

    # again part of print.ggplot, plotting adjusted version
    if(is.null(vp)){
    grid.draw(gtable)}
    else{
    if (is.character(vp)) 
    seekViewport(vp)
    else pushViewport(vp)
    grid.draw(gtable)
    upViewport()}
    invisible(p)} 
```

所以，基本上我为“facetAdjust()”函数运行此代码并为我的绘图“PlotAvgccshocks”调用它，但弹出一条错误消息，如下所示：

错误信息：

> facetAdjust（PlotAvgccshocks）错误：绘图中没有图层

有什么想法吗？

再次感谢

# java - 在 java-Rcaller 中调用 R

> ID：14502187
> 
> 赞同：2
> 
> 时间：2013-01-24T13:12:44.653
> 
> 标签：java, r, cluster-analysis, rcaller

我正在尝试通过使用 R 调用者在 java 中使用 R 来实现集群。我正在尝试运行用于聚类验证的示例代码，但我遇到了大多数用户面临的常见错误：文件过早结束

```
package test;
import rcaller.RCaller;
import java.io.File;
import java.lang.*;
import java.util.*;
import java.awt.image.DataBuffer;

public class test3 {
    public static void main(String[] args) {
        new test3();
    }

    public test3()
    {

        try{

            RCaller caller = new RCaller();
            caller.cleanRCode();

            caller.setRscriptExecutable("C:/Program Files/R/R-2.15.1/bin/x64/Rscript");
            caller.cleanRCode();

            caller.addRCode("library(clvalid)");
            caller.addRCode("data(mouse)");
            caller.addRCode("express <- mouse [,c(M1,M2,M3,NC1,NC2,NC3)]");
            caller.addRCode("rownames (express) <- mouse$ID ");
            caller.addRCode("intern <- clValid(express, 2:6 , clMethods = c( hierarchical,kmeans,diana,clara,model) ,validation = internal)");
            caller.addRCode("b <- summary(intern) ");
            caller.runAndReturnResult("b");
        }

        catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:32:53.000

您的代码中有一些拼写错误。就像`clValid`not clvalid 一样，你会错过很多像“hierarchical”这样的引用，....

我认为最好将代码放在脚本中，然后像这样从 java 调用它：

```
Runtime.getRuntime().exec("Rscript myScript.R"); 
```

其中 myScript.R 是：

```
library(clValid)
data(mouse)
express <- mouse [,c('M1','M2','M3','NC1','NC2','NC3')]
rownames (express) <- mouse$ID 
intern <- clValid(express, 2:6 , clMethods = c( 'hierarchical','kmeans',
                                               'diana','clara','model') ,
                                                validation = 'internal')
b <- summary(intern) 
```

# xcode - NSFastEnumeration 协议和 ARC 的问题

> ID：14502189
> 
> 赞同：3
> 
> 时间：2013-01-24T13:12:52.957
> 
> 标签：xcode, automatic-ref-counting

在将 Objective-C 代码迁移到 ARC 时，我无法实现 NSFastEnumeration 协议。有人可以告诉我，如何摆脱以下警告（见代码片段）？提前致谢。

```
// I changed it due to ARC, was before
// - (NSUInteger) countByEnumeratingWithState: (NSFastEnumerationState*) state objects: (id*) stackbuf count: (NSUInteger) len
- (NSUInteger) countByEnumeratingWithState: (NSFastEnumerationState*) state objects: (__unsafe_unretained id *) stackbuf count: (NSUInteger) len
{
    ... 
    *stackbuf = [[ZBarSymbol alloc] initWithSymbol: sym]; //Warning: Assigning retained object to unsafe_unretained variable; object will be released after assignment
    ... 
}

- (id) initWithSymbol: (const zbar_symbol_t*) sym
{
    if(self = [super init]) {
        ... 
    }
    return(self);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:18:30.260

使用 ARC，某些东西必须持有对每个对象的强引用或自动释放引用，否则它将被释放（正如警告所说）。因为`stackbuf`is `__unsafe_unretained`，它不会为你而挂起`ZBarSymbol`。

如果您创建一个临时自动释放变量并将您的对象存储在那里，它将一直存在，直到当前的自动释放池被弹出。然后，您可以`stackbuf`毫无怨言地指出它。

```
ZBarSymbol * __autoreleasing tmp = [[ZBarSymbol alloc] initWithSymbol: sym];
*stackbuf = tmp; 
```

# javascript - 从 DOM 树中删除后提交 FORM

> ID：14502190
> 
> 赞同：0
> 
> 时间：2013-01-24T13:12:54.977
> 
> 标签：javascript, html, forms, internet-explorer

我想要做的是：我想将表单对象保存在某个地方并稍后将其发送到服务器。如果表单只包含文本/收音机/复选框等，它可以正常工作，但是当有文件上传字段时，它在 Internet Explorer 中不起作用。

这里有一个例子：

```
<div id="container">
  <form id="testForm">
    <input type="file" name="photo"/> 
  </form>
  <input type="button" onclick="uploadLater();"/>
</div>

function uploadLater()
{
   window.oldForm = document.getElementById('testForm');
   document.getElementById('container').innerHTML = "thanks!";
} 
```

稍后执行的另一个函数如下所示（注意：适用于 FF 和 Chrome，但不适用于 IE，遗憾的是 IE 不发送文件）：

```
function doItNow()
{
  if(!window.oldForm.parentNode) document.body.append(window.oldForm);
  // ... other parameters omitted ...
  window.oldForm.submit();
  window.oldForm.parentNode.removeChild(window.oldForm);

  alert('hurray! data on its way ...');
} 
```

有谁知道在 IE 中进行类似操作的解决方案？在一定延迟后（跨浏览器）发送一个包含文件且不属于 DOM 树的表单。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:29:51.467

像这样的东西会起作用吗？您只需隐藏表单，将其保留在原处但不显示。然后用你的文本显示另一个 div。

这是工作副本：http: [//jsfiddle.net/KhJAt/](http://jsfiddle.net/KhJAt/)

```
<div id="container">
  <div id="displayMessage" style="display:none;"></div>
  <form id="testForm">
    <input type="file" name="photo"/> 
  </form>
  <input type="button" onclick="uploadLater();" value="Click it"/>
</div>

function uploadLater()
{
   window.oldForm = document.getElementById('testForm');
   window.oldForm.style.display="none";
   document.getElementById('displayMessage').style.display="";
   document.getElementById('displayMessage').innerHTML = "thanks!";
} 
```

# java - xml 使用 sax 解析器从子标签解析数据

> ID：14502194
> 
> 赞同：1
> 
> 时间：2013-01-24T13:13:10.480
> 
> 标签：java, xml, saxparser

我是android新手，所以如果我问一些愚蠢的问题，我很抱歉。我正在使用 android 中的天气解析。我正在使用 SAX 解析器。现在，我被内容处理程序困住了。有这么多教程，我得到了解析数据的想法，但所有这些示例都是基于包含标签中属性的 XML 文件。对于我从中检索数据的 XML 文件，标签中没有属性，只有子节点。现在我被困在这里我不知道如何获取子节点的值。

```
 <data>
   <request>
   <type>City</type>
   <query>Peshawar, Pakistan</query>
   </request>
   <current_condition>
   <observation_time>01:04 PM</observation_time>
   <temp_C>20</temp_C>
   <temp_F>68</temp_F>
   <weatherCode>113</weatherCode>
   <weatherIconUrl>
   </weatherIconUrl> 
```

现在我想从“”和“”中获取数据，我真的找不到它，请帮帮我。这是我的内容处理程序类的代码。

```
public class HandlingXmlStuff extends DefaultHandler {

    XmlDataCollected info=new XmlDataCollected();

    public String getInformation() {        
        return info.dataToString();
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub

        if(localName.equals("query")) {
            String city=....???;
            info.setCity(city);
        } else if(localName.equals("temp_f")) {
            String t=...???;
            int temp=Integer.parseInt(t);
            info.settemp(temp);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:25:13.820

[这是从 url](http://free.worldweatheronline.com/feed/weather.ashx?q=peshawar,pakistan&format=xml&num_of_days=5&key=eab9f57359164426132301)的 xml 数据中提取值的完整解析解决方案。

[来自提供的链接](http://free.worldweatheronline.com/feed/weather.ashx?q=peshawar,pakistan&format=xml&num_of_days=5&key=eab9f57359164426132301)的示例*xml*数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
    <request>
        <type>City</type>
        <query>Peshawar, Pakistan</query>
    </request>
    <current_condition>
        <observation_time>04:31 AM</observation_time>
        <temp_C>7</temp_C>
        <temp_F>45</temp_F>
        <weatherCode>113</weatherCode>
        <weatherIconUrl><![CDATA[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png]]>
        </weatherIconUrl>
        <weatherDesc><![CDATA[Sunny]]>
        </weatherDesc>
        <windspeedMiles>0</windspeedMiles>
        <windspeedKmph>0</windspeedKmph>
        <winddirDegree>0</winddirDegree>
        <winddir16Point>N</winddir16Point>
        <precipMM>0.0</precipMM>
        <humidity>70</humidity>
        <visibility>4</visibility>
        <pressure>1021</pressure>
        <cloudcover>0</cloudcover>
    </current_condition>
    <weather>
        <date>2013-01-26</date>
        <tempMaxC>22</tempMaxC>
        <tempMaxF>71</tempMaxF>
        <tempMinC>7</tempMinC>
        <tempMinF>45</tempMinF>
        <windspeedMiles>8</windspeedMiles>
        <windspeedKmph>13</windspeedKmph>
        <winddirection>NW</winddirection>
        <winddir16Point>NW</winddir16Point>
        <winddirDegree>315</winddirDegree>
        <weatherCode>113</weatherCode>
        <weatherIconUrl><![CDATA[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png]]>
        </weatherIconUrl>
        <weatherDesc><![CDATA[Sunny]]>
        </weatherDesc>
        <precipMM>0.0</precipMM>
    </weather>
    <weather>
        <date>2013-01-27</date>
        <tempMaxC>20</tempMaxC>
        <tempMaxF>68</tempMaxF>
        <tempMinC>8</tempMinC>
        <tempMinF>46</tempMinF>
        <windspeedMiles>7</windspeedMiles>
        <windspeedKmph>12</windspeedKmph>
        <winddirection>N</winddirection>
        <winddir16Point>N</winddir16Point>
        <winddirDegree>352</winddirDegree>
        <weatherCode>113</weatherCode>
        <weatherIconUrl><![CDATA[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png]]>
        </weatherIconUrl>
        <weatherDesc><![CDATA[Sunny]]>
        </weatherDesc>
        <precipMM>0.0</precipMM>
    </weather>
    <weather>
        <date>2013-01-28</date>
        <tempMaxC>20</tempMaxC>
        <tempMaxF>68</tempMaxF>
        <tempMinC>7</tempMinC>
        <tempMinF>45</tempMinF>
        <windspeedMiles>9</windspeedMiles>
        <windspeedKmph>14</windspeedKmph>
        <winddirection>NW</winddirection>
        <winddir16Point>NW</winddir16Point>
        <winddirDegree>316</winddirDegree>
        <weatherCode>113</weatherCode>
        <weatherIconUrl><![CDATA[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png]]>
        </weatherIconUrl>
        <weatherDesc><![CDATA[Sunny]]>
        </weatherDesc>
        <precipMM>0.0</precipMM>
    </weather>
    <weather>
        <date>2013-01-29</date>
        <tempMaxC>21</tempMaxC>
        <tempMaxF>70</tempMaxF>
        <tempMinC>8</tempMinC>
        <tempMinF>46</tempMinF>
        <windspeedMiles>6</windspeedMiles>
        <windspeedKmph>9</windspeedKmph>
        <winddirection>NW</winddirection>
        <winddir16Point>NW</winddir16Point>
        <winddirDegree>306</winddirDegree>
        <weatherCode>113</weatherCode>
        <weatherIconUrl><![CDATA[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png]]>
        </weatherIconUrl>
        <weatherDesc><![CDATA[Sunny]]>
        </weatherDesc>
        <precipMM>0.0</precipMM>
    </weather>
    <weather>
        <date>2013-01-30</date>
        <tempMaxC>19</tempMaxC>
        <tempMaxF>66</tempMaxF>
        <tempMinC>8</tempMinC>
        <tempMinF>47</tempMinF>
        <windspeedMiles>8</windspeedMiles>
        <windspeedKmph>13</windspeedKmph>
        <winddirection>WNW</winddirection>
        <winddir16Point>WNW</winddir16Point>
        <winddirDegree>289</winddirDegree>
        <weatherCode>116</weatherCode>
        <weatherIconUrl><![CDATA[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0002_sunny_intervals.png]]>
        </weatherIconUrl>
        <weatherDesc><![CDATA[Partly Cloudy ]]>
        </weatherDesc>
        <precipMM>0.0</precipMM>
    </weather>
</data> 
```

*处理XmlStuff.java*：

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

/**
 *
 * @author visruth
 */
public class HandlingXmlStuff extends DefaultHandler {

    private String key;
    private Map<String, String> request = new HashMap<String, String>();
    private Map<String, String> current_condition = new HashMap<String, String>();
    private List<Map<String, String>> weather = new ArrayList<Map<String, String>>();
    private Map<String, String> weatherMap;
    private boolean requestStatus;
    private boolean current_conditionStatus;
    private boolean weatherStatus;

    public Map<String, String> getCurrent_condition() {
        return this.current_condition;
    }

    public Map<String, String> getRequest() {        
        return this.request;
    }

    public List<Map<String, String>> getWeather() {        
        return this.weather;
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        key = qName;
        if (qName.equals("request")) {

            requestStatus = true;
        } else if (qName.equals("current_condition")) {

            current_conditionStatus = true;
        } else if (qName.equals("weather")) {
            weatherMap = new HashMap<String, String>();
            weatherStatus = true;
        }        

    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {

        String value = new String(ch, start, length).trim();
        if (requestStatus) {
            if (!key.trim().equals("request") && !key.trim().isEmpty() && !value.isEmpty()) {
                request.put(key, value);
            }            
        } else if (current_conditionStatus) {
            if (!key.trim().equals("current_condition") && !key.trim().isEmpty() && !value.isEmpty()) {
                current_condition.put(key, new String(ch, start, length).trim());
            }
        } else if (weatherStatus) {
            if (!key.trim().equals("weather") && !key.trim().isEmpty() && !value.isEmpty()) {
                weatherMap.put(key, new String(ch, start, length).trim());
            }
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {

        if (qName.equals("request")) {
            requestStatus = false;
        } else if (qName.equals("current_condition")) {
            current_conditionStatus = false;
        } else if (qName.equals("weather")) {
            weather.add(weatherMap);
            weatherStatus = false;            
        }
    }

    public void parseDocument() {
        //get a factory
        SAXParserFactory spf = SAXParserFactory.newInstance();
        try {
            //get a new instance of parser
            SAXParser sp = spf.newSAXParser();            
            //parse the file and also register this class for call backs
            sp.parse("http://free.worldweatheronline.com/feed/weather.ashx?q=peshawar,pakistan&format=xml&num_of_days=5&key=eab9f57359164426132301", this);
        } catch (SAXException se) {
            se.printStackTrace();
        } catch (ParserConfigurationException pce) {
            pce.printStackTrace();
        } catch (IOException ie) {
            ie.printStackTrace();
        }
    }
} 
```

您可以使用以下代码检索值：

```
HandlingXmlStuff handlingXmlStuf = new HandlingXmlStuff();
handlingXmlStuf.parseDocument();
System.out.println("----values inside request tag-----");
Map<String, String> request = handlingXmlStuf.getRequest();
for (String key : request.keySet()) {
    System.out.println(key + ":" + request.get(key) + ":" + key);
}
System.out.println("----values inside current_condition tag-----");
Map<String, String> current_condition = handlingXmlStuf.getCurrent_condition();
for (String key : current_condition.keySet()) {
    System.out.println(key + ":" + current_condition.get(key) + ":" + key);
}

List<Map<String, String>> weather = handlingXmlStuf.getWeather();
for (Map<String, String> map : weather) {
    System.out.println("\n----each set of weather-----start");
    for (String key : map.keySet()) {
        System.out.println(key + ":" + map.get(key) + ":" + key);
    }
    System.out.println("----each set of weather-----end");
} 
```

从上面的示例*xml*数据中，您将获得以下输出：

```
----values inside request tag-----
query:Peshawar, Pakistan:query
type:City:type
----values inside current_condition tag-----
cloudcover:0:cloudcover
observation_time:04:31 AM:observation_time
pressure:1021:pressure
temp_C:7:temp_C
visibility:4:visibility
temp_F:45:temp_F
windspeedMiles:0:windspeedMiles
precipMM:0.0:precipMM
winddirDegree:0:winddirDegree
winddir16Point:N:winddir16Point
weatherIconUrl:http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png:weatherIconUrl
humidity:70:humidity
windspeedKmph:0:windspeedKmph
weatherCode:113:weatherCode
weatherDesc:Sunny:weatherDesc

----each set of weather-----start
windspeedMiles:8:windspeedMiles
winddirection:NW:winddirection
date:2013-01-26:date
precipMM:0.0:precipMM
winddir16Point:NW:winddir16Point
winddirDegree:315:winddirDegree
weatherIconUrl:http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png:weatherIconUrl
tempMinC:7:tempMinC
windspeedKmph:13:windspeedKmph
tempMaxC:22:tempMaxC
weatherCode:113:weatherCode
tempMaxF:71:tempMaxF
tempMinF:45:tempMinF
weatherDesc:Sunny:weatherDesc
----each set of weather-----end

----each set of weather-----start
windspeedMiles:7:windspeedMiles
winddirection:N:winddirection
date:2013-01-27:date
precipMM:0.0:precipMM
winddir16Point:N:winddir16Point
winddirDegree:352:winddirDegree
weatherIconUrl:_0001_sunny.png:weatherIconUrl
tempMinC:8:tempMinC
windspeedKmph:12:windspeedKmph
tempMaxC:20:tempMaxC
weatherCode:113:weatherCode
tempMaxF:68:tempMaxF
tempMinF:46:tempMinF
weatherDesc:Sunny:weatherDesc
----each set of weather-----end

----each set of weather-----start
windspeedMiles:9:windspeedMiles
winddirection:NW:winddirection
date:2013-01-28:date
precipMM:0.0:precipMM
winddir16Point:NW:winddir16Point
winddirDegree:316:winddirDegree
weatherIconUrl:http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png:weatherIconUrl
tempMinC:7:tempMinC
windspeedKmph:14:windspeedKmph
tempMaxC:20:tempMaxC
weatherCode:113:weatherCode
tempMaxF:68:tempMaxF
tempMinF:45:tempMinF
weatherDesc:Sunny:weatherDesc
----each set of weather-----end

----each set of weather-----start
windspeedMiles:6:windspeedMiles
winddirection:NW:winddirection
date:2013-01-29:date
precipMM:0.0:precipMM
winddir16Point:NW:winddir16Point
winddirDegree:306:winddirDegree
weatherIconUrl:http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png:weatherIconUrl
tempMinC:8:tempMinC
windspeedKmph:9:windspeedKmph
tempMaxC:21:tempMaxC
weatherCode:113:weatherCode
tempMaxF:70:tempMaxF
tempMinF:46:tempMinF
weatherDesc:Sunny:weatherDesc
----each set of weather-----end

----each set of weather-----start
windspeedMiles:8:windspeedMiles
winddirection:WNW:winddirection
date:2013-01-30:date
precipMM:0.0:precipMM
winddir16Point:WNW:winddir16Point
winddirDegree:289:winddirDegree
weatherIconUrl:unny_intervals.png:weatherIconUrl
tempMinC:8:tempMinC
windspeedKmph:13:windspeedKmph
tempMaxC:19:tempMaxC
weatherCode:116:weatherCode
tempMaxF:66:tempMaxF
tempMinF:47:tempMinF
weatherDesc:Partly Cloudy:weatherDesc
----each set of weather-----end 
```

`startElement`读取开始标签时调用，读取结束`endElement`标签时调用，`characters`方法在每次调用之后调用。`startElement``endElement`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:01:22.727

这是从给定的 xml 文件中获取数据的解决方案。

示例 weather.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
    <request>
        <type>City</type>
        <query>Peshawar, Pakistan</query>
    </request>
    <current_condition>
        <observation_time>01:04 PM</observation_time>
        <temp_C>20</temp_C>
        <temp_F>68</temp_F>
        <weatherCode>113</weatherCode>
        <weatherIconUrl> a url </weatherIconUrl>
    </current_condition>
</data> 
```

处理XmlStuff.java：

```
import java.io.IOException;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

/**
 *
 * @author visruth
 */
public class HandlingXmlStuff extends DefaultHandler {

    private boolean typeStatus;
    private boolean queryStatus;
    private boolean observation_timeStatus;
    private boolean temp_CStatus;
    private boolean temp_FStatus;
    private boolean weatherCodeStatus;
    private boolean weatherIconUrlStatus;
    private String type;
    private String query;
    private String observation_time;
    private String temp_C;
    private String temp_F;
    private String weatherCode;
    private String weatherIconUrl;

    public String getObservation_time() {
        return observation_time;
    }

    public String getQuery() {
        return query;
    }

    public String getTemp_C() {
        return temp_C;
    }

    public String getTemp_F() {
        return temp_F;
    }

    public String getType() {
        return type;
    }

    public String getWeatherCode() {
        return weatherCode;
    }

    public String getWeatherIconUrl() {
        return weatherIconUrl;
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {

        if (qName.equals("type")) {
            typeStatus = true;
        } else {
            typeStatus = false;
        }

        if (qName.equals("query")) {
            queryStatus = true;
        } else {
            queryStatus = false;
        }

        if (qName.equals("observation_time")) {
            observation_timeStatus = true;
        } else {
            observation_timeStatus = false;
        }
        if (qName.equals("temp_C")) {
            temp_CStatus = true;
        } else {
            temp_CStatus = false;
        }

        if (qName.equals("temp_F")) {
            temp_FStatus = true;
        } else {
            temp_FStatus = false;
        }

        if (qName.equals("weatherCode")) {
            weatherCodeStatus = true;
        } else {
            weatherCodeStatus = false;
        }
        if (qName.equals("weatherIconUrl")) {
            weatherIconUrlStatus = true;
        } else {
            weatherIconUrlStatus = false;
        }
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        if (typeStatus) {
            this.type = new String(ch, start, length).trim();
            typeStatus = false;
        }

        if (queryStatus) {
            this.query = new String(ch, start, length).trim();
            queryStatus = false;
        }
        if (observation_timeStatus) {
            this.observation_time = new String(ch, start, length).trim();
            observation_timeStatus = false;
        }
        if (temp_CStatus) {
            this.temp_C = new String(ch, start, length).trim();
            temp_CStatus = false;
        }
        if (temp_FStatus) {
            this.temp_F = new String(ch, start, length).trim();
            temp_FStatus = false;
        }
        if (weatherCodeStatus) {
            this.weatherCode = new String(ch, start, length).trim();
            weatherCodeStatus = false;
        }
        if (weatherIconUrlStatus) {
            this.weatherIconUrl = new String(ch, start, length).trim();
            weatherIconUrlStatus = false;
        }

    }

    public void parseDocument() {
        //get a factory
        SAXParserFactory spf = SAXParserFactory.newInstance();
        try {
            //get a new instance of parser
            SAXParser sp = spf.newSAXParser();

            //parse the file and also register this class for call backs
            sp.parse(TestCase.class.getResource("wheather.xml").getPath(), this);
        } catch (SAXException se) {
            se.printStackTrace();
        } catch (ParserConfigurationException pce) {
            pce.printStackTrace();
        } catch (IOException ie) {
            ie.printStackTrace();
        }
    }
} 
```

您可以使用以下代码检索数据：

```
HandlingXmlStuff handlingXmlStuf = new HandlingXmlStuff();
handlingXmlStuf.parseDocument();
System.out.println("type:" + handlingXmlStuf.getType() + ":type");
System.out.println("observation_time:" + handlingXmlStuf.getObservation_time() + ":observation_time");
System.out.println("temp_C:" + handlingXmlStuf.getTemp_C() + ":temp_C");
System.out.println("temp_F:" + handlingXmlStuf.getTemp_F() + ":temp_F");
System.out.println("weatherCode:" + handlingXmlStuf.getWeatherCode() + ":weatherCode");
System.out.println("weatherIconUrl:" + handlingXmlStuf.getWeatherIconUrl() + ":weatherIconUrl"); 
```

# c# - 查看非 mvc Web 应用程序的引擎

> ID：14502201
> 
> 赞同：0
> 
> 时间：2013-01-24T13:13:32.050
> 
> 标签：c#, asp.net, viewengine, webforms-view-engine

我想在 Web 表单应用程序中实现 MVC 视图引擎行为。要在 MVC 中注册移动频道，我通常会做这样的事情

```
public static List<string> UaSurfpads = new List<string>()
{
    "iPad",
    "MicrosoftRt",
    "PlayBook"
};    

protected void Application_Start(object sender, EventArgs e)
{
    // register surfpads
    foreach (string device in UaSurfpads)
    {
        DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("mobile")
        {
            ContextCondition = (context => context != null && context.GetOverriddenUserAgent().IndexOf(device, StringComparison.OrdinalIgnoreCase) >= 0)
        });
    }

    // ...

} 
```

这将使我能够创建阴影视图，例如`myView.mobile.cshtml`.

在 asp.net 中使用常规 Web 表单是否有类似的工作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:39:48.577

ASP.NET WebForm 也有移动特性，还有MVC。只需阅读[本文](http://www.asp.net/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application) 另外，[移动开发的官方 MS 网络源](http://www.asp.net/mobile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:31:39.143

没有任何本地实时 MVC 可以处理这个问题。但是，您可以通过在您的应用程序中放置一些代码来检测和重定向来实现这一点。 [51 degree](http://51degrees.codeplex.com/)使用了这种方法，并创建了一个免费可用的框架来完成所有这些工作。我建议查看它，或者至少他们如何实现移动实施，并为您的网站模仿它。

# java - 如何停止处理程序的递归调用？

> ID：14502205
> 
> 赞同：3
> 
> 时间：2013-01-24T13:13:41.700
> 
> 标签：java, android, handler

我创建了一个处理程序，以模仿计时器任务。因为 TimerTask 在不同的平板电脑上表现不同。所以我创建了这个处理程序方法。在计时器中有一个方法`timerTask.cancel();` ，但是如何停止这个处理程序，即使在应用程序退出后它也会继续运行。正如您所看到的，即使在按下后也会运行日志。

```
Handler handler = new Handler();

public void recursivelycallHandler(){
    handler.postDelayed(new Runnable() {
        @Override
        public void run() {

            Log.d("handler is running", "true" + System.currentTimeMillis());
            recursivelycallHandler();

        }
    }, 100);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:19:14.487

有3种方法可以做到这一点..

```
handler.removeCallbacks(Runnable r);
handler.removeCallbacksAndMessages(null);
handler.removeMessages(int what) 
```

在您的情况下，前两个似乎是可行的..在 ondestroy 或侦听器中添加上述任何方法以进行回压..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:20:35.023

通过设置任何条件

```
Handler handler = new Handler();
int i = 0;
Runnable myRunnable = new Runnable() {
        @Override
        public void run() {

            Log.d("handler is running", "true" + System.currentTimeMillis());
            if(i>5)
               handler.removeCallback(myRunnable);
            else{
                i++;
                handler.postDelayed(myRunnable, 100); // here is self calling
            }

        }
    };
}
handler.postDelayed(myRunnable, 100); 
```

它的递归方法，但您可以在 run() 中调用相同的 Runnable 对象而不是递归方法，并在基于特定情况/条件时删除该对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:18:40.430

您可以存储标志（布尔变量）来检测您是否需要调用您的处理程序，并在退出应用程序之前将此标志更改为 false 并停止调用处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T13:19:52.653

你可以在下面做这样的事情：

```
 public void recursivelycallHandler(){
    handler.postDelayed(new Runnable() {
        @Override
        public void run() {

            Log.d("handler is running", "true" + System.currentTimeMillis());
            if(YOUR_CONDITION){
               recursivelycallHandler();
            }

        }
    }, 100);
} 
```

希望你明白我的意思。

随时发表评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T13:20:19.150

只需将 isFinished 添加到您的运行方法中：

```
 handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        if (isFinished())
               return;
        Log.d("handler is running", "true" + System.currentTimeMillis());
        recursivelycallHandler();

    }
}, 100); 
```

# javascript - 为什么我的以下小提琴在没有任何打印调用的情况下提供输出？

> ID：14502206
> 
> 赞同：1
> 
> 时间：2013-01-24T13:13:50.690
> 
> 标签：javascript

我有一段代码：

```
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8514414755716493";
/* AdX_Washington_Examiner */
google_ad_slot = "9465392777";
google_ad_width = 320;
google_ad_height = 50;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

为什么这段代码输出为“ `}//]]>`”？

我还没有写任何打印调用，它仍然给出输出..

这是我的小提琴链接[http://jsfiddle.net/akshaynikte/ryLPf/6/#](http://jsfiddle.net/akshaynikte/ryLPf/6/#)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:20:25.680

这似乎是提琴手上的一个错误（或者它不允许`script`在 javascript 面板上添加标签），如果您将脚本更改为其他任何内容，您会发现它发生了同样的情况。

您应该将脚本放在 HTML 面板上，根据我的测试可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:20:37.707

[`jsFiddle`以下是文档页面](http://doc.jsfiddle.net/basic/introduction.html)的一些摘录：

[`JavaScript`](http://doc.jsfiddle.net/basic/introduction.html#javascript)面板_

> 在此面板中输入的代码将放置在标题的脚本块中，即介于`<script type="text/javascript">`和之间`</script>`。

该[`Add Resources`](http://doc.jsfiddle.net/basic/introduction.html#add-resources)部分

> 应该在框架之后加载的 CSS 或 JS（带有适当的扩展名）。这是放置独立于框架的库的理想场所，例如 RaphaelJS

因此，在您的问题中使用脚本的正确方法是：

1.  将以下内容添加到`JavaScript`面板中。

    ```
    <!--
        google_ad_client = "ca-pub-8514414755716493";
        /* AdX_Washington_Examiner */
        google_ad_slot = "9465392777";
        google_ad_width = 320;
        google_ad_height = 50;
    --> 
    ```

2.  添加`http://pagead2.googlesyndication.com/pagead/show_ads.js`到`Add resources`页面左侧的部分。

这是正确配置示例的链接：http: [//jsfiddle.net/edywd/](http://jsfiddle.net/edywd/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:20:39.570

```
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8514414755716493";
/* AdX_Washington_Examiner */
google_ad_slot = "9465392777";
google_ad_width = 320;
google_ad_height = 50;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

你不能在 jsfiddle 的 js textarea 中使用 script 标签，它只是 js，如果你想使用 script 标签，把它们放在 jsfiddle 的 html textarea

# python-2.7 - 在 pyqt 中运行 watchdog 文件系统 watch

> ID：14502207
> 
> 赞同：1
> 
> 时间：2013-01-24T13:13:56.567
> 
> 标签：python-2.7, pyqt, watchdog

我有一个 pyqt 小部件，它允许用户进行一些设置，然后将它们保存到 sqlite 数据库，此设置会影响看门狗，它使用以下代码检查文件系统的更改

```
 try:
    while True:
        time.sleep(1)
except KeyboardInterrupt:
    observer.stop() 
```

以上内容不能放在 qwidget 应用程序代码中，因为它会阻止我尝试过的一些 pyqt 代码被执行：

```
 """ Some other code """
    app = QtGui.QApplication(sys.argv)
    ex = vdrive()
    trayIcon = SystemTrayIcon(QtGui.QIcon("app.xpm"), ex)
    trayIcon.show()
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        observer.stop()
    sys.exit(app.exec_()) 
```

我如何将看门狗与 pyqt 集成以观察文件系统的变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:07:22.123

该类`watchdog.observers.Observer`继承自`threading.Thread`，因此实际检查是在您调用时启动的线程中完成的`observer.start()`。

除了让程序运行直到用户中断它之外，循环不做任何事情。您可以完全删除它并像往常一样运行 Qt 事件循环：

```
observer.start()
status = app.exec_()
observer.stop()
observer.join()
sys.exit(status) 
```

# jaxb - 用于内容辅助的 Intellij jaxb xjc 模式位置

> ID：14502211
> 
> 赞同：3
> 
> 时间：2013-01-24T13:14:08.343
> 
> 标签：jaxb, intellij-idea, xsd, xml-namespaces, xjc

我正在使用 JAXB 生成代码。现在我正在尝试将 XJC 命名空间添加到自定义`bindings.xjb`文件中，但 IntelliJ Idea 12 找不到命名空间。该`xmlns:xjc="..."`行标记为红色，当我尝试使用“获取外部资源”功能时，它告诉我`No XML at the location: http://java.sun.com/xml/ns/jaxb/xjc`。在哪里可以找到 xjc 命名空间的 xsd 文件以激活内容辅助？

这是我的 .xjb 文件中的定义：

```
<jxb:bindings version="2.0"
           xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
           xmlns:xsd="http://www.w3.org/2001/XMLSchema"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
           xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:57:19.647

JAXB 发行版中有这个文件

```
lib\jaxb-xjc.src.zip\com\sun\tools\xjc\reader\xmlschema\bindinfo\xjc.‌​xsd 
```

`Settings`解压它并在|中配置命名空间映射 `Schemas and DTDs`.

# ios - iOS：在 Cashes 文件夹和每个子文件夹中搜索视频文件

> ID：14502215
> 
> 赞同：0
> 
> 时间：2013-01-24T13:14:21.267
> 
> 标签：ios, search, directory, subdirectory

是否有可能在文件夹及其所有子文件夹中搜索某种类型的所有文件（例如 mp4）？到目前为止，我可以使用以下代码一次为一个文件夹执行此操作：

```
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *dirContents = [fm contentsOfDirectoryAtPath:cachesPath error:nil];
NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.mp4'"];
NSArray *filesWithAttr = [dirContents filteredArrayUsingPredicate:fltr];

NSLog(@"%@", filesWithAttr); 
```

但是我的 Cashes 文件夹中有很多子文件夹。我是否必须逐一检查并检查 mp4 文件，还是有更简单的解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-30T04:09:10.130

您可以通过获取所有子路径然后过滤它们来轻松实现这一点。所以替换你`contentsOfDirectoryAtPath`的`subpathsOfDirectoryAtPath`，它应该可以工作。该函数进行**深度枚举**，因此还包括所有子目录。

```
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *dirContents = [fm subpathsOfDirectoryAtPath:cachesPath error:nil];
NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.mp4'"];
NSArray *filesWithAttr = [dirContents filteredArrayUsingPredicate:fltr]; 
```

功能说明： [苹果iOS开发者库](https://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/subpathsOfDirectoryAtPath%3aerror%3a)

# css - 如何将内容设置为 -webkit-slider-thumb

> ID：14502218
> 
> 赞同：1
> 
> 时间：2013-01-24T13:14:35.210
> 
> 标签：css, safari, webkit

我有一个范围类型的输入

`<input id="counter" type="range" min="0" ></input>`

带有以下CSS

```
#counter {
    -webkit-appearance: none;
    background-color: silver;
    width: 200px;
    height:10px;
    border-radius:50px;
    border-color:rgb(240, 61, 37);
}

#counter::-webkit-slider-thumb {
    -webkit-appearance: none;
    width:15px;
    height:15px;
    border-radius:50px;
    content:"1";
    background:rgb(240, 61, 37);
    opacity:0.95;
} 
```

现场演示[**在这里**](http://jsfiddle.net/_Sud/JAjEf/)

`content:"1";`css 根本不起作用，如何在输出中将一些文本设置为红色旋钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:18:19.743

`::-webkit-slider-thumb`不能接受`content`财产。尝试设置背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-17T18:24:35.863

::-webkit-slider-thumb 不接受 content 属性。

听起来好像您正在尝试将滑块拇指用作拇指宽度值的动态工具提示。

如果是这种情况，那么您可以使用 css 在拇指上放置一个元素，该元素通过 javascript 或 jQuery 动态获取值。

我现在正在工作，所以稍后我可能会尝试做一个例子，但逻辑是这样的：

1) 将一个只有一个数字（后来用拇指的位置值更新）的元素（比如称为工具提示）放在拇指的顶部。

2）找到拇指的位置

3）将它作为工具提示的位置，使用javascript。

4) 使用 .innerHTML（或 .html 用于 jQuery）将拇指的位置作为工具提示的值。

# django - 如何将表格拆分为两列？

> ID：14502221
> 
> 赞同：2
> 
> 时间：2013-01-24T13:14:48.267
> 
> 标签：django, django-forms, django-templates

我有模型：

```
class Post(models.Model):
    path = 'images' + str(datetime.now().year) + '/' + str(datetime.now().month)
    image = models.ImageField(upload_to=path, null=True)
    recommended = models.BooleanField(default = False)
    promoted = models.BooleanField(default = False)
    title = models.TextField(blank = True)
    intro = RichTextField(config_name='full_ck', blank = True)
    text = RichTextField(config_name='full_ck', blank = True) 
```

， 形式：

```
class Form(forms.ModelForm):
    id = forms.ModelChoiceField(queryset=Post.objects.all(), widget=forms.HiddenInput())

    class Meta:
        model = Post 
```

和模板：

```
<table cellpadding="0" cellspacing="0">
<formset>
{% for field in form %}
    {% if field.is_hidden %}
        {{ field }}
    {% else %}
        <div class="fieldWrapper">
             {% if field.errors %}<div class="errorbox">{% endif %}
                <p>{{ field.label_tag }}</p>
                <p>{{ field }}{% block formextrafields %}{% endblock %}</p>
                <p></p>
            {% if field.errors %}<p>{{ field.errors }}</p></div>{% endif %}
        </div>
    {% endif %}
{% endfor %}
</formset>
</table> 
```

但我想把表格分成两列。第一个可能是介绍、文本和标题字段，第二个可能是其他字段。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:23:15.730

我在视图中使用它：

```
form = list(form) 
```

，在模型中我设置顺序：

```
class Meta:
    model = Post
    fields = (my fields in order) 
```

在模板中：

```
<!-- first -->
<table cellpadding="0" cellspacing="0">
<formset>
{% for field in form|slice:":3" %}
    [...]
{% endfor %}
</formset>
</table>

<!-- second -->
<table cellpadding="0" cellspacing="0">
<formset>
{% for field in form|slice:"3:" %}
    [...]
{% endfor %}
</formset>
</table> 
```

它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:17:45.610

您可以使用清晰的表单进行布局并添加 css 类：[https ://github.com/maraujop/django-crispy-forms](https://github.com/maraujop/django-crispy-forms)

# html - CSS div 不适合所有分辨率

> ID：14502225
> 
> 赞同：-3
> 
> 时间：2013-01-24T13:14:53.873
> 
> 标签：html, css

当我制作网站时，它适合我的屏幕，但是当我在另一个屏幕上打开网站时，它无法正常工作（div 相互重叠）。当我调整窗口大小时也是如此。我看到了一些关于这个的帖子，但仍然没有很好的答案。我尝试制作一个容器将它们全部放入。但它仍然是一样的。

任何答案，为什么会这样？

容器 CSS 代码：

```
#container
{
    width: 960px;
    margin-left: auto;
    margin-right: auto;
} 
```

我把它放到 HTML 中是这样的：

```
<div id="container">
Content goes here
</div> 
```

编辑：伙计们，我不认为你理解我。当我在另一个屏幕分辨率上时，所有的 div 都会移动。我认为一切都会移动，如果我没有完全错的话。我想知道这样做的真正方法。你做什么工作？

[http://i49.tinypic.com/8wwo6r.jpg](http://i49.tinypic.com/8wwo6r.jpg)

[http://i48.tinypic.com/359ydc9.jpg](http://i48.tinypic.com/359ydc9.jpg)

最后编辑：我用百分比固定它。它似乎工作得很好！感谢您的所有回答！我知道这会给我一种坏名声，因为我没有让自己足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:23:17.630

您可以使用百分比代替像素。

```
#container {
    width: 80%;
    margin-left: auto;
    margin-right: auto;
} 
```

* * *

您可以使用此论坛计算出具有屏幕分辨率和所需大小的百分比：

`WidthPercentage = ContainerWidth / ScreenWidth * 100`

因此，对于您的示例，如果您的屏幕分辨率为 1360x768：

`WidthPercentage = 960 / 1360 * 100 = 70.5%`

* * *

这称为[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)。

你可以[在这里](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design)找到一些指导方针和一些好的[文章](http://www.alistapart.com/articles/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:43:04.057

如果您不想使用百分比，可以使用**响应式设计**和**媒体查询**。基本上，您根据不同的浏览器属性（例如：宽度）调用不同的 CSS 规则。[在这里](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)查看一个很好的教程（你也可以看到它的实际效果）。

引用：

> 响应式设计的第二部分是 CSS3 媒体查询，目前在许多现代浏览器中都得到了不错的支持。如果您不熟悉 CSS3 媒体查询，它们基本上允许您收集有关站点访问者的数据并使用它有条件地应用 CSS 样式。出于我们的目的，我们主要对 min-width 媒体功能感兴趣，它允许我们在浏览器窗口下降到我们可以指定的特定宽度以下时应用特定的 CSS 样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:16:47.750

您已将`<div>`( `<div id="container">`) 设置为 960 像素宽。如果您在小于 960 像素宽的浏览器窗口中查看该页面，则该页面`<div>`不适合该页面。

你的问题不是很清楚。你说过“当我在另一个屏幕上打开网站时，它不能正常工作”，但你没有说它*是如何*工作的。要获得帮助，您需要足够详细地描述以下三件事：

*   你做了什么（例如你写了什么代码，你正在采取什么步骤来运行那个代码）
*   你期望从你所做的事情中得到什么结果
*   你实际上得到了什么结果

# javascript - Javascript 未捕获错误：INDEX_SIZE_ERR：Chrome 上的 DOM 异常 1

> ID：14502228
> 
> 赞同：0
> 
> 时间：2013-01-24T13:15:18.117
> 
> 标签：javascript, dom, button, addeventlistener

我的 HTML 文件

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <p>Hello World</p>
    <script type="text/javascript" src="hello.js"></script>
</body>
</html> 
```

我的 javascript 文件

```
var button = document.createElement("button");
button.id = "test";
button.innerHTML = "Test";
button.addEventListener("click", function() {
    alert("hello");
});
var body = document.body;
body.appendChild(button); 
```

我不明白为什么当我单击测试按钮时，Chrome 的控制台会显示错误**"Uncaught Error: INDEX_SIZE_ERR: DOM Exception 1"**。但是我意识到只有在本地主机上运行它时才会出现错误（我使用 xampp 的 apache 作为本地主机）。如果我正常运行 file:// ，它会成功而没有任何错误

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T13:29:21.363

这对我来说可以....

但任何方式请使用 window.onload 函数从 javascript 做任何事情。

所以做这样的事情

```
 window.onload = function(){
        var button = document.createElement("button");
        button.id = "test";
        button.innerHTML = "Test";
        button.addEventListener("click", function() {
            alert("hello");
        });
        var body = document.body;
        body.appendChild(button);   
           } 
```

# php - 如何向 symfony 缓存添加自定义行为：清除？

> ID：14502231
> 
> 赞同：2
> 
> 时间：2013-01-24T13:15:31.497
> 
> 标签：php, caching, symfony1, symfony-1.4, apc

我需要在执行命令时`(new sfAPCCache())->clean()`添加一个简单的调用。`apc_clear_cache()``./symfony cc`

任何人都知道如何实现这一目标？我应该在什么时候编辑我的 symfony 应用程序，或者我应该如何注册这个额外的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:28:30.717

实际上，我发现我可以监听一个事件来添加新的行为`./symfony cc`：

```
$this->dispatcher->connect('task.cache.clear', array('ClearAPCCache','clearCache')) 
```

仍然存在无法从命令行任务清除 APC 缓存的问题，因为 APC 缓存与 Web 服务器进程相关，而 symfony 命令是命令行脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:30:51.943

您只需要创建自己的自定义任务。

```
./symfony generate:task your_task_name 
```

在这个任务中（在`lib`文件夹中）你只需要运行类似的东西

```
protected function execute($arguments = array(), $options = array())
{
    // Run your own apc cache
    // ...

    /// Then run the cache:clear
    $this->runTask('cache:clear');
} 
```

# java - 将 PL/Java 与 JPA 或其他持久性库一起使用

> ID：14502234
> 
> 赞同：0
> 
> 时间：2013-01-24T13:15:40.810
> 
> 标签：java, postgresql, jpa, pljava

我想知道是否可以将 JPA 或其他持久性库与 PL/Java 一起使用？我的意思是使用 JPA 持久性通过 PL/Java 在存储的 Java 过程中提供的特殊 JDBC 连接来操作数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:41:16.297

这是可能的，但这是一个非常糟糕的主意。大多数 ORM 都是非常消耗内存的野兽，PL/Java 为每个 PostgreSQL 后端（连接）生成一个 JVM，因此每个连接的内存占用将成倍增加。更糟糕的是，许多 ORM 期望能够从池中获取大量连接并自由使用它们，但是当使用 SPI 在 PL/Java 中运行时，您实际上只有一个连接，因为 PostgreSQL 后端是单线程的，而不是线程安全的。

我真的不推荐它。

# c - 如何在 GDB 中查看像数组一样的指针？

> ID：14502236
> 
> 赞同：75
> 
> 时间：2013-01-24T13:15:43.493
> 
> 标签：c, gdb

假设定义：`int a[100]` 类型`print a`，那么 gdb 会自动将其显示为数组：`1, 2, 3, 4...`。但是，如果`a`作为参数传递给函数，则 gdb 会将其视为普通的 int 指针，type`print a`将显示：`(int *)0x7fffffffdaa0`。如果我想`a`作为一个数组查看应该怎么做？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-01-24T13:19:08.433

见[这里。](https://sourceware.org/gdb/current/onlinedocs/gdb/Arrays.html)简而言之，您应该这样做：

```
p *array@len 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-24T14:16:09.120

`*(T (*)[N])p`其中 T 是类型，N 是元素数，p 是指针。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-24T13:18:46.813

使用`x`命令。

```
(gdb) x/100w a 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-09-25T00:03:20.077

正如[@Ivaylo Strandjev 所说](https://stackoverflow.com/a/14502287/4561887)，一般语法是：

```
print *my_array@len
# OR the shorter version:
p *my_array@len 
```

打印前 10 个字节的示例`my_array`：

```
print *my_array@10 
```

但是，如果这看起来像垃圾，因为它试图将值解释为字符，则可以强制使用不同的格式选项，如下所示：

1.  `print/x *my_array@10`= 十六进制
2.  `print/d *my_array@10`= 有符号整数
3.  `print/u *my_array@10`= 无符号整数
4.  `print/<format> *my_array@10`= 按照通用[`printf()`格式字符串](http://www.cplusplus.com/reference/cstdio/printf/)打印，`<format>`

这是我的调试器中的一些真实示例，用于从`uint8_t`名为`byteArray`. 请注意第一个有多丑，只需`p *byteArray@16`：

```
(gdb) p *byteArray@16
$4 = "\000\001\002\003\004\005\006\a\370\371\372\373\374\375\376\377"
(gdb) print/x *byteArray@16
$5 = {0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff}
(gdb) print/d *byteArray@16
$6 = {0, 1, 2, 3, 4, 5, 6, 7, -8, -7, -6, -5, -4, -3, -2, -1}
(gdb) print/u *byteArray@16
$7 = {0, 1, 2, 3, 4, 5, 6, 7, 248, 249, 250, 251, 252, 253, 254, 255} 
```

就我而言，最好的版本是我将数组打印为无符号整数的最后一个版本，因为它`uint8_t`毕竟是一个数组：

```
(gdb) print/u *byteArray@16
$7 = {0, 1, 2, 3, 4, 5, 6, 7, 248, 249, 250, 251, 252, 253, 254, 255} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-22T02:20:56.380

`(int[100])*pointer`感谢@Ruslan 评论中的建议，为我工作

# aspectj - 调用方法的aspectj访问参数和被调用方法的返回值

> ID：14502238
> 
> 赞同：1
> 
> 时间：2013-01-24T13:15:55.053
> 
> 标签：aspectj

我必须将一些状态数据放入上下文对象中。这必须在很多地方完成，所以我认为用 AOP 解决这个问题会很好。问题是我不知道如何在同一个通知中访问调用者参数和被调用方法的返回值。这可能吗？

```
public BusinessObject methodA(Context ctx, Param p) {
    Status s = service.serviceMethod(p);

    if (s.hasErrors()) 
    {
        ctx.put("error_key", s.getErrors());
    }
    ...
} 
```

# php - 使用sybase在php中查询超时

> ID：14502243
> 
> 赞同：0
> 
> 时间：2013-01-24T13:16:37.923
> 
> 标签：php, sql, timeout, sybase, freetds

我对我最近遇到的一个问题感到困惑，有一个查询以前一直有效并且最近开始起作用。60 秒后超时。这是一个非常繁重的查询，但之前工作过，我已将查询复制粘贴到 SQuirrel SQL 客户端中，返回结果大约需要 39 秒。我想也许查询执行了两次并且它不喜欢它。所以我只用这个做了一个测试页

```
sybase_connect('database', 'user', 'password', 'UTF');
print_r(sybase_query('sql')); 
```

使用完全相同的查询，它也会在 60 秒时超时。所以我正在寻找一个解释为什么会发生这种情况，也许是一种增加超时的方法。

我在 freetsd.conf 中设置了 120 秒的超时时间，但无济于事，它在 60 秒后仍然超时。

我一直在努力解决这个问题，但找不到任何好的解决方案，而我发现的解决方案最终无法正常工作......

非常感谢您的帮助。

**编辑：**我目前正在分析我的大查询中的每个子查询以找到最有问题的一个，但是在我测试的每个查询中，我注意到使用 SQuirrel SQL 客户端和 PHP 执行之间存在巨大差异：PHP 为 33 秒，松鼠为 11.493 秒.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:06:24.377

所以我最终在我的子查询上放置了 where 子句，这样它们就不会处理太多数据，它不再超时。然而，PHP 与 Squirrel 中的查询执行时间之间仍然存在很大差距。

# ios - App Delegate 中的 UITabBarController 插座

> ID：14502244
> 
> 赞同：0
> 
> 时间：2013-01-24T13:16:56.633
> 
> 标签：ios, objective-c

我想在 App Delegate File 中创建一个 UITabBarController 的 Outlet，以便我可以创建它的属性。，但我无法连接它，任何人都可以建议我。我正在使用情节提要和 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:19:08.317

试试这个并再试一次。

```
@interface ClassName : UIViewController<UITabBarControllerDelegate> 
```

# django - Django 密码要求视图

> ID：14502245
> 
> 赞同：0
> 
> 时间：2013-01-24T13:17:01.387
> 
> 标签：django, django-views

我有一个用于编辑模型对象的编辑视图。我想用我生成并放入模型的密码对其进行密码保护。**我不想使用 django 用户**

假设我有这样的事情：

模型.py

```
class Job(models.Model):
    ......
    job_uuid = models.CharField("UUID", max_length=36, default=make_uuid)
    password = models.CharField("password", max_length=36) 
```

视图.py

```
def edit_job(request, job_uuid):
    job = get_object_or_404(Job, job_uuid=job_uuid)
    job_form = EditJobForm(instance=job)
    c = {'job_form': job_form,
    }

    c.update(csrf(request))
    return render_to_response('jobs/edit_job.html', c, context_instance=RequestContext(request)) 
```

我想用对象的密码保护这个 URL。我发现这个应用[django-password-required](https://github.com/mikl/django-password-required)但是这个应用使用你在 settings.py 中设置的一个密码

有什么简单的包装或方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:26:20.440

您可以编写一个装饰器来检查`edit_job`视图是否需要密码访问。

然后装饰器可以使用 session/cookies 中的密码来验证访问。如果密码不匹配或不存在，您可以重定向到不同的视图以显示密码表单，并将其存储在会话中。

希望这可以帮助。

# php - 任何滑块 jwplayer 和 WordPress 循环？

> ID：14502247
> 
> 赞同：0
> 
> 时间：2013-01-24T13:17:02.750
> 
> 标签：php, javascript, wordpress, jwplayer, anythingslider

我在 WordPress 和 jwplayer 中使用了任何东西。我的自定义帖子类型中有一个自定义字段，用于存储视频 URL 或嵌入代码。

这是我使用的循环，它显示视频 URL 或从滑块中的自定义字段嵌入代码

```
<ul id="slider">
<?php $the_slider = new WP_Query('post_type=product'); while($the_slider->have_posts()) : $the_slider->the_post(); ?>

    <?php //if(has_post_thumbnail() ) { ?>
    <li>
    <?php if(   get_field('video_preview'))
    {
        echo get_field('video_preview');
    }?>
    </li>
<?php endwhile; ?>

</ul> 
```

我需要一些如何将 get_field 包装到 jwplayer 的 javascript 中，如下所示。我尝试了几种方法，但我认为 javascript 也被循环并且无法正常工作。如何创建一个循环以使用下面的 js 和上面的代码？

```
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "http://www.example.com/video.mp4",
    width: "100%",
    height: "315px"
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:58:25.613

如果您想让 JW Player 始终循环播放您的内容，您只需更改以下代码：

```
height: "315px" 
```

对此：

```
height: "315px",
repeat: "true" 
```

我假设您使用的是 JW6。如果您不使用 JW6，“repeat”选项将是“always”而不是“true”

希望这可以帮助！

# javascript - JQuery - 单击功能处理前 6 个类

> ID：14502249
> 
> 赞同：1
> 
> 时间：2013-01-24T13:17:08.773
> 
> 标签：javascript, jquery, cordova

我正在使用翻书库为cordova（ios）制作目录，并尝试向各个页面添加缩放功能。

出于某种原因，缩放仅适用于它的前 6 页/课程。

以下小提琴不包含图像，并且似乎与 remTemp 函数有问题，但我向您保证它可以在浏览器和 ios 上运行。

[http://jsfiddle.net/vAVdZ/](http://jsfiddle.net/vAVdZ/)

HTML：

```
 <div id="zoomer"></div> 
   <div id="zoom-viewport">
    <div id="flipbook">

<div class="flippage"><img src="pages/cover.jpg"  class="small i1"></div>
<div class="flippage"><img src="pages/inner-cover.jpg"  class="small i0"></div>
<div class="flippage"><img src="pages/1.jpg"  class="small i1"></div>
<div class="flippage"><img src="pages/2.jpg"  class="small i2"></div>
<div class="flippage"><img src="pages/3.jpg"  class="small i3"></div>
<div class="flippage"><img src="pages/4.jpg"  class="small i4"></div>
<div class="flippage"><img src="pages/5.jpg"  class="small i5"></div>
<div class="flippage"><img src="pages/6.jpg"  class="small i6"></div>
<div class="flippage"><img src="pages/7.jpg"  class="small i7"></div>
<div class="flippage"><img src="pages/8.jpg"  class="small i8"></div>
<div class="flippage"><img src="pages/9.jpg"  class="small i9"></div>
<div class="flippage"><img src="pages/10.jpg"  class="small i10"></div>
</div></div></div> 
```

Javascript：

```
$('.small').click(function() { 

    cls = $(this).attr("class");
    rem = 'small i';
    clas = cls.replace(rem,'');

    imagesrc = $(this).attr("src");

    if (clas % 2 == 0) {
    loc = "left";
    $('body').append("<img src='"+imagesrc+"' id='temp' onclick='remTemp();'class='temp small' style='position:absolute; left:12px; top:199px; z-index:5 !important;'>");

    }
    if (clas % 2 != 0) {
    loc = "right"
    $('body').append("<img src='"+imagesrc+"' id='temp' onclick='remTemp();'class='temp small' style='position:absolute; left:512px; top:199px; z-index:5 !important;'>");
    }

    $(this).css('z-index','-1');
    $('.temp').animate({ 
    top: 10,
    left: 10,
    width:1000,
    height: 707
    }, 1000
    );

    });

    function remTemp() {
    $('img').remove('#temp');
    } 
```

我完全不知道为什么点击功能在 6 页后停止，我尝试删除前 x 页，无论我从哪里尝试它都只做 6 页（总共 94 页）

谢谢

*作为一个注释，我尝试使用许多不同的选择器，但仍然遇到同样的问题。

# django - Django 和 venv：settings.DATABASES 配置不正确。请提供 ENGINE 值

> ID：14502250
> 
> 赞同：0
> 
> 时间：2013-01-24T13:17:10.683
> 
> 标签：django, virtualenv

当我运行 python manage.py syncdb 时会发生这种情况。当我运行 python manage.py syncdb --mysite.settings 时也会发生这种情况。不知道从哪里开始：django 无法识别我的设置文件，我不知道为什么或如何纠正它。

```
python ../manage.py syncdb
Traceback (most recent call last):
  File "../manage.py", line 9, in <module>
    execute_from_command_line(sys.argv)
  File "/home/ryan/Programming/OpenCV-2.4.2/msheroku/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/ryan/Programming/OpenCV-2.4.2/msheroku/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/ryan/Programming/OpenCV-2.4.2/msheroku/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/ryan/Programming/OpenCV-2.4.2/msheroku/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/ryan/Programming/OpenCV-2.4.2/msheroku/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/ryan/Programming/OpenCV-2.4.2/msheroku/venv/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/home/ryan/Programming/OpenCV-2.4.2/msheroku/venv/local/lib/python2.7/site-packages/django/db/backends/dummy/base.py", line 15, in complain
    raise ImproperlyConfigured("settings.DATABASES is improperly configured. "
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

来自 settings.py

```
DATABASES = { 
    'default': {
        'ENGINE': 'postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'xxx',                      # Or path to database file if using sqlite3.
        'USER': 'xxx',                      # Not used with sqlite3.
        'PASSWORD': 'xxx',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }   
} 
```

我很确定它一开始就没有找到正确的设置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T15:05:19.513

Hi I am assuming you are testing your app using heroku and your trying to connect to your local database ? if so be sure to remove this line of code :

```
# Parse database configuration from $DATABASE_URL
  import dj_database_url
  DATABASES['default'] =  dj_database_url.config()

# Honor the 'X-Forwarded-Proto' header for request.is_secure()
  SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https') 
```

Add it in when you are gonna connect to a database on a anther server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:30:25.940

一个正确的看起来像这样。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': 'localhost', # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

编辑：将主机更改为 localhost 以反映评论和 manage.py

根据您运行同步数据库的方式

```
python manage.py syncdb --mysite.settings 
```

确保您的 manage.py 文件指定了正确的 DJANGO_SETTINGS_MODULE

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings") 
```

然后，您应该能够在没有 --mysite.settings 的情况下运行 syncdb

```
python manage.py syncdb 
```

# javascript - 拍摄 Javascript不在 TextArea 中

> ID：14502256
> 
> 赞同：0
> 
> 时间：2013-01-24T13:17:22.860
> 
> 标签：javascript, textbox

我有一段 Javascript 代码来检测屏幕的分辨率。现在我的结果（1920 x 1080）位于文本框（输入）内，但我只想要没有文本框。我需要怎么做？

代码：

```
<head>

<script type="text/javascript" language="javascript">
    function scrResolution() {
        var width = screen.width;
        var height = screen.height;
        document.getElementById("txt_scrWidth").value = width;
        document.getElementById("txt_scrHeight").value = height;
    }
</script>
    </head>

<body onload="scrResolution();">
  <table width="200" border="0">
     <tr>
       <td>  
 Width :
<input name="txt_scrWidth" type="text" id="txt_scrWidth" size="5" />
      </td>
     </tr>
     <tr>
       <td>
           Height :  
 <input name="txt_scrHeight" type="text" id="txt_scrHeight" size="5" />
       </td>
     </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:21:06.667

也许尝试添加一个`span`：

```
<table width="200" border="0">
    <tr>
        <td>Width: <span id="txt_scrWidth"></span></td>
     </tr>
     <tr>
         <td>Height: <span id="txt_scrHeight"></span></td>
     </tr>
</table> 
```

然后`innerHTML`使用 JavaScript 设置：

```
function scrResolution()
{
    var width = screen.width;
    var height = screen.height;
    document.getElementById("txt_scrWidth").innerHTML = width;
    document.getElementById("txt_scrHeight").innerHTML  = height;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:22:11.047

```
<head>

<script type="text/javascript" language="javascript">
    function scrResolution() {
        var width = screen.width;
        var height = screen.height;
        document.getElementById("txt_scrWidth").innerHTML = width;
        document.getElementById("txt_scrHeight").innerHTML= height;
    }
</script>
    </head>

<body onload="scrResolution();">
  <table width="200" border="0">
     <tr>
       <td>  
 Width : <span id="txt_scrWidth"></span>
      </td>
     </tr>
     <tr>
       <td>
           Height :  <span id="txt_scrHeight"></span>  
       </td>
     </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:32:19.780

如果您正在开发 Web 应用程序，您可能对浏览器窗口视口的大小更感兴趣。以下是您获取该信息的方式。如果用户更改屏幕大小，onresize 侦听器将更新它。

这是脚本

```
<script>
//make sure we update if the user resizes the browser
window.onresize = function() {
    showSize();   
};

function showSize() {
    document.getElementById("heightDisplay").innerHTML = document.height;
    document.getElementById("widthDisplay").innerHTML = document.width;
}

showSize();
</script> 
```

这是HTML

```
<div>
    Height: <span id="heightDisplay">Calculating...</span><br/>
    Width: <span id="widthDisplay">Calculating...</span>
</div> 
```

# windows-phone - 在全景图内映射或枢轴不是一个选项。但是，怎么样？

> ID：14502258
> 
> 赞同：0
> 
> 时间：2013-01-24T13:17:39.237
> 
> 标签：windows-phone, user-experience

我需要实现一个页面，在其中显示与位置相关的项目。

用户应该能够在查看列表中的位置和查看地图控件中的位置（作为点）之间切换。与iOS中的这张图片类似的想法： ![截屏](../Images/7833b1f94caa5270df692358b726eb06.png)

我想在全景图中使用它，但如果地图是交互式的，它将无法工作。所以这迫使我在某个地方有一个搜索按钮来打开这个页面。

但这不是我想做的。

我想轻松地向用户展示附近的项目，而不需要他们导航到单独的页面。

我试图寻找现有的应用程序，内置应用程序，Local Scout 将地图放在全景图的顶部。但就我而言，我不能这样做。

在全景图中实现类似于我上面描述的列表和地图视图之间切换的推荐方法是什么？

我唯一的想法是，当用户选择地图上的查看问题时，会打开一个带有地图的单独页面。切换回来，我需要导航回全景图并确保它滚动到全景图项目（据我所知，这并不容易完成）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:33:33.647

如果您的全景图中只有两个项目，我实际上建议您使用 Pivot 页面。这将更符合 Windows Phone 的设计标准。

您可以将地图放在全景图上，但上面有一个透明按钮。这将允许用户查看地图上的实际内容，并在单击时打开一个现在可以交互的新页面。这可能是实现它的好方法。

大概是这样的吧？

```
 <Button VerticalAlignment="Top" Click="Map_Click" Height="560" BorderThickness="0">
                <Grid>
                    <maps:Map IsEnabled="False" LandmarksEnabled="True" Name="MapControlEvent"     ZoomLevel="15" Width="427" Height="877">

                    </maps:Map>
                </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:48:18.547

首先，我不会在此示例中使用全景图或透视图，而是在按下地图和列表的按钮时切换可见性。换句话说，只有一页同时包含两者。

但是，如果您确实想使用其他东西...我还建议使用 Pivot 控件并查看[适用于 Windows Phone 8 的新 Windows Phone 工具包](http://phone.codeplex.com/)！此处示例[...](http://phone.codeplex.com/SourceControl/changeset/view/80797#1336296) 因为要在地图显示时使用LockablePivot，否则用户将无法理解在地图上滑动交互与切换滑动到另一个枢轴项之间的区别。

# c# - asp.net C# 从外部链接下载 ashx 中的文件

> ID：14502276
> 
> 赞同：0
> 
> 时间：2013-01-24T13:18:44.027
> 
> 标签：c#, asp.net, ashx

在使用 ashx 下载文件时需要一些帮助

我正在尝试从外部链接下载大文件（大约 2-4GB）（文件未存储在网络服务器上）

这是我的代码

```
context.Response.Clear();
context.Response.ContentType = "video/mp4";
context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + FileName);
context.Response.Write("http://otherserver/file.m4v");
context.Response.Flush();
context.Response.Close(); 
```

下载的文件是 1kb 我做错了什么？还有其他下载文件的方法吗？我正在尝试强制浏览器下载文件（并更改文件名）而不是在浏览器中预览

PS对不起我的英语；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:39:39.087

这是一种不正确的做法。文件内容将是：

```
http://otherserver/file.m4v 
```

你在这里设置：

```
context.Response.Write("http://otherserver/file.m4v"); 
```

您需要使用的是[HttpWebRequest 类](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:44:26.983

您所做的只是向浏览器发送一个包含 text 的文件`"http://otherserver/file.m4v"`，标题表明浏览器提供下载而不是显示该文件。

当浏览器看到一个带有 URL 的文件时，它不会说“哦，我应该下载那个 URL 上的任何东西”，这并不神奇。

此外，在谷歌上搜索了一下并查看了关于这个主题的几个[PHP](https://stackoverflow.com/questions/9458854/header-location-content-disposition) [讨论](https://stackoverflow.com/questions/11163180/content-disposition-with-302-redirect)，我认为没有一种方法可以做你想做的事，而无需将文件从远程 URL 流式传输到你的服务器，然后从你的服务器到客户端。

您可以尝试添加标头，然后向客户端发送重定向，但我希望客户端在向远程 URL 发出请求时丢弃标头 - 并在浏览器中显示结果。

# iphone - 监听来自 UIWebView 的所有请求

> ID：14502283
> 
> 赞同：4
> 
> 时间：2013-01-24T13:19:00.137
> 
> 标签：iphone, uiwebview, uiwebviewdelegate

我可以拦截来自 UIWebView 的初始加载请求：

```
(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType. 
```

如何记录来自我正在加载的页面的所有请求？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T22:49:45.007

**更新：**另一个选项是用于`NSURLProtocol`听取应用程序发出的请求，包括来自 Web 视图的所有请求。

* * *

我会提出一个创造性的解决方案。这并不是您真正想要的，但由于此时使用 SDK 无法实现，因此这是唯一可能的解决方案。

```
@interface PrintingCache : NSURLCache
{
}
@end

@implementation PrintingCache

- (NSCachedURLResponse*)cachedResponseForRequest:(NSURLRequest*)request
{
    NSLog(@"url %@", request.URL.absoluteString);

    return [super cachedResponseForRequest:request];
}
@end 
```

现在在您的应用委托中，执行以下操作：

```
NSString *path = ...// the path to the cache file
NSUInteger discCapacity = 10*1024*1024;
NSUInteger memoryCapacity = 512*1024;

FilteredWebCache *cache = [[Printing alloc] initWithMemoryCapacity: memoryCapacity diskCapacity: discCapacity diskPath:path];
[NSURLCache setSharedURLCache:cache]; 
```

这将创建一个共享缓存，您的应用程序的所有 URL 请求都将通过此缓存，包括您的 Web 视图。但是，您可能会从其他不想要的来源获得更多 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:35:42.613

试试下面的代码

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSLog(@"url %@", [[request URL] absoluteString]);
return YES;
} 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-24T21:56:23.827

这有效：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSLog(@"url %@", [[request URL] absoluteString]);
return YES;
} 
```

确保你把`webView.delegate = self;`,`[super viewDidLoad]`否则它不会显示任何东西。

# iphone - 获取当前的 iTunesStore 国家

> ID：14502284
> 
> 赞同：1
> 
> 时间：2013-01-24T13:19:01.587
> 
> 标签：iphone, ios, objective-c

我需要获取当前激活的 iTunes 商店国家代码。我已经阅读了有关获取当前语言环境的信息，但这不是非常聪明的解决方案，因为用户可以拥有一个语言环境但完全不同的 iTunes 帐户。解决方案不需要合法，苹果拒绝在这里不是问题。是否有人使用私有框架找到了这种情况的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:27:41.547

您可以在请求商店的产品后通过检查产品的 priceLocale 之一的 NSLocale 来执行此操作。试试这个代码：

```
- (NSString*) storeCountryCode:(NSArray*) products
{
    NSString* countryCode = nil;
    SKProduct* product = [products objectAtIndex:0];
    if(product != nil)
    {
        NSLocale* storeLocale = product.priceLocale;
        countryCode = (__bridge NSString*)CFLocaleGetValue((__bridge CFLocaleRef)storeLocale, kCFLocaleCountryCode);
    }
    return countryCode;
} 
```

您可以从您的 SKProductsRequestDelegate 方法中调用它：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSString* storeCountryCode = [self storeCountryCode:response.products]; 
    //other product handling
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:59:56.823

您可以使用此代码获取[店面 ID 。](http://www.apple.com/itunes/affiliates/resources/documentation/linking-to-the-itunes-music-store.html#appendix)由于它依赖于私有 API，因此请勿在生产代码中使用。

```
NSError *error = nil;
BOOL loaded = [[NSBundle bundleWithPath:@"/System/Library/PrivateFrameworks/iTunesStore.framework"] loadAndReturnError:&error];
if (loaded) {
    NSString *localStoreFrontID = nil;
    @try {
        localStoreFrontID = [NSClassFromString(@"ISClient") valueForKeyPath:@"currentClient.localStoreFrontID"];
    }
    @catch (NSException *exception) {
        NSLog(@"%@", exception);
    }

    NSLog(@"localStoreFrontID: %@", localStoreFrontID);
}
else {
    NSLog(@"Error: %@", error);
} 
```

在 iOS 5.1.1 上，这`localStoreFrontID: 143459-2,2`是为我打印的，即瑞士商店。我不确定`-2,2`后缀是什么意思，也许与语言有关。我还没有在 iOS 6 上测试过这个。

请注意，它甚至在您在“设置”→“商店”中退出帐户后也可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:49:22.403

你可以“CFLocaleGetValue”调用这个使用
`NSString *aCountry=[getCurrentItunesStoreCountryFromProudct:myProudct];`

```
-(NSString *)getCurrentItunesStoreCountryFromProudct:(SKProduct *)aProudct
{
 NSLocale* storeLocale = aProudct.priceLocale;
 NSString *storeCountry = (NSString*)CFLocaleGetValue((CFLocaleRef)storeLocale,   kCFLocaleCountryCode);
return storeCountry;
} 
```

# jquery - 我在颜色框和 cookie 中有弹出窗口，但每次都会加载视频

> ID：14502285
> 
> 赞同：0
> 
> 时间：2013-01-24T13:19:05.660
> 
> 标签：jquery, youtube, colorbox, autoplay

我正在使用 colorbox 设置一个 cookie 弹出窗口，现在它很好。在窗口中，我有一个 YouTube 视频和联系表单字段。

我使用的 jQuery 没问题，但是当我为 YouTube 视频进行自动播放时问题就开始`subscribe`了

但我想知道如何调用文件或包含文件或仅在不是第一次时如何禁用自动播放谢谢，我确实调查过问题，所以如果你知道，请告诉我

```
 jQuery(document).ready(function(){
if (document.cookie.indexOf('visited777=true') == -1) {
    var fifteenDay6 = 1000*60*60*24*13;
    var expires = new Date((new Date()).valueOf() + fifteenDay6);
    document.cookie = "visited777=true;expires=" + expires.toUTCString();
$.colorbox({width:"580px", inline:true, href:"#subscribe"}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:06:00.403

[Paul Graffam 在页面https://stackoverflow.com/a/10772567/2007513](https://stackoverflow.com/a/10772567/2007513)中刚刚找到了诀窍， 所以插入此代码，不要忘记为 iframe 提供 id ！！！

# apache-flex - Ant uptodate 任务不考虑已删除文件

> ID：14502291
> 
> 赞同：2
> 
> 时间：2013-01-24T13:19:15.773
> 
> 标签：apache-flex, ant

`<updtodate/>`我正在尝试通过使用 ANT任务检查更改并仅在必要时进行编译来加快构建速度。这是针对 Flex 项目的。这是我的 build.xml 的相关部分：

```
 <target name="framework-clean"
          description="Clean the Framework library">
    <echo>Clean: Deleting dist directory in framework</echo>        
   <delete dir="${flex.framework.dir}/dist"/>
  </target>

  <target name="check-framework-changes">     
      <uptodate property="framework-no-changes" targetfile="${flex.framework.dir}/dist/imanager-framework.swc">
         <srcfiles dir="${flex.framework.dir}/src" />
         <srcfiles dir="${flex.framework.dir}/libs" />         
      </uptodate>             
   </target>

  <target name="framework-compile"            
          depends="check-framework-changes"
          unless="framework-no-changes"
          description="Compile the Framework library">          
    <mkdir dir="${flex.framework.dir}/dist"/>   
    <echo>Compile: Compiling iManager Framework</echo>
    <compc output="${flex.framework.dir}/dist/imanager-framework.swc" 
       debug="${debug}" 
       incremental="${incremental}">            
      <keep-as3-metadata name="Master"/>
      <keep-as3-metadata name="Component"/>
      <keep-as3-metadata name="Key"/>
      <load-config filename="${FLEX_HOME}/frameworks/flex-config.xml"/>
      <source-path path-element="${flex.framework.dir}/src" />
      <library-path dir="${flex.framework.dir}/libs" includes="*.swc" append="true"/>
      <include-sources dir="${flex.framework.dir}/src" includes="*" />          
    </compc>
  </target> 
```

问题：

假设我在我的项目中添加了一个名为 Foo.as 的文件，脚本将检测到更改并重新编译 swc。但是如果我删除这个 Foo.as 而不更改任何其他文件，则脚本不会编译项目。即使 Foo 的父文件夹的最后修改时间戳已更新，该更改也会被忽略。

有没有什么办法解决这一问题？

我的 ANT 版本是 1.8.4，我使用的是 Flex SDK 4.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:32:56.053

我修改了`check-framework-changes`目标以包含目录和文件。

```
 <target name="check-framework-changes">     
      <uptodate property="framework-no-changes" targetfile="${flex.framework.dir}/dist/imanager-framework.swc">
        <srcresources>
            <fileset dir="${flex.framework.dir}/src" />
            <fileset dir="${flex.framework.dir}/libs" />
            <dirset dir="${flex.framework.dir}/src" />
            <dirset dir="${flex.framework.dir}/libs" />
        </srcresources>                
      </uptodate>             
   </target> 
```

这解决了问题

# java - 是否可以在 JSF 中创建静态枚举对象？

> ID：14502300
> 
> 赞同：0
> 
> 时间：2013-01-24T13:19:29.603
> 
> 标签：java, jsf, enums

我正在开发 JSF 中的流服务（JBoss，Java-EE-Web-Project）。

我有一个“电影”类，它有一个表示**关键字列表的**字段。关键字是具有字段“名称”和 ID的**枚举。**

我有一个交集类 [MovieKeyword]。这个类告诉我电影关键字列表中有哪些关键字。（如 [movieID: 5, enum: A] [movieID: 5, enum: B] [movieID: 6, enum: A]）

现在我想知道：JSF 会为每部电影创建一个关键字的新实例吗？假设有一个关键字“动作”，并且有 500 部电影的关键字列表中有“动作”。JSF 会创建 500 个新的 Enum，还是会共享同一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:56:44.060

An`Enum`是一个类，它的每个可能值都是常量，这意味着它们是`static`and `final`。换句话说，枚举只被实例化一次。

以下引用来自[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)：

> 枚举类型是一种类型，其字段由一组固定的常量组成。常见示例包括指南针方向（NORTH、SOUTH、EAST 和 WEST 的值）和星期几。
> 
> 因为它们是常量，所以枚举类型字段的名称是大写字母。

# php - 有没有办法让我检查每一行上的一个复选框？

> ID：14502302
> 
> 赞同：0
> 
> 时间：2013-01-24T13:19:33.070
> 
> 标签：php, html, forms, input, radio-button

嗨，我正在尝试创建一个表单，用户可以在其中为一周中的每一天选择上午或下午会话，除了星期一，只有上午可用。

我的代码目前是：

```
 <table border="0" id="EnrollPreSes">        
    <tr>
        <td>Day</td>
        <td>AM <br/> 8:30 - 11:30 </td>
        <td>PM <br/> 12:00 - 3:00</td>
    </tr>
    <tr>
        <td>Monday</td>
        <td><input type="checkbox" name="Prefses[]" id="mam" value="MonAM"></td>
        <td></td>
    </tr>
    <tr>
        <td>Tuesday</td>
        <td>
                 <input type="radio" name="Prefses" value="TueAM">  
        </td>
        <td>
            <input type="radio" name="Prefses" value="TuePM">
        </td>
    </tr>
    <tr>
        <td>Wednesday</td>
        <td>
            <input type="radio" name="Prefses" value="WedAM">
        </td>
        <td>
            <input type="radio" name="Prefses" value="WedPM">
        </td>
    </tr>
</table> 
```

等一周的剩余时间，有没有办法只允许选择每天的上午或下午时段，然后作为数组发送到我的 php 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:24:07.853

拥有一台 Am 收音机和一台 Pm 收音机会更容易，但如果你真的想要它：

```
$(document).ready(function () {
    $('input > radio').click(function () {
        $(this).siblings().removeAttr('checked');
    )}
)} 
```

我知道你有一个星期一的复选框，所以它可以适应两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:24:45.850

[使用 jquery 在此](https://stackoverflow.com/questions/881166/jquery-checkboxes-like-radiobuttons)答案中指出，您可以为您的复选框添加唯一的类，然后：

```
var $unique = $('input.unique');
$unique.click(function() {
$unique.filter(':checked').not(this).removeAttr('checked'); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:33:34.317

为每行单选按钮赋予相同的名称，此处为 jsFiddle：

[http://jsfiddle.net/QTCy2/8/](http://jsfiddle.net/QTCy2/8/)

```
<form id="EnrollPreSes">
<table border="0" id="EnrollPreSes">        
    <tr>
        <td>Day</td>
        <td>AM <br/> 8:30 - 11:30 </td>
        <td>PM <br/> 12:00 - 3:00</td>
    </tr>
    <tr>
        <td>Monday</td>
        <td>
        <input type="radio" name="monday" value="MonAM">  
        </td>
        <td>
            <input type="radio" name="monday" value="MonPM">
        </td>
    </tr>
    <tr>
        <td>Tuesday</td>
        <td>
                 <input type="radio" name="tuesday" value="TueAM">  
        </td>
        <td>
            <input type="radio" name="tuesday" value="TuePM">
        </td>
    </tr>
    <tr>
        <td>Wednesday</td>
        <td>
            <input type="radio" name="wednesday" value="WedAM">
        </td>
        <td>
            <input type="radio" name="wednesday" value="WedPM">
        </td>
    </tr>
</table>

       <input type="submit" value="Submit">

</form>

$(function(){
    $('#EnrollPreSes').on('submit', function() {
       alert($(this).serialize()); //Send to your PHP script
        return false; 
    });
}); 
```

# php - 正则表达式匹配 -1:+1 模式

> ID：14502303
> 
> 赞同：0
> 
> 时间：2013-01-24T13:19:48.973
> 
> 标签：php, regex, preg-match

如何为**-1:+1**模式制作正则表达式，其中 1 是任何整数？

我需要在 preg_match() 中使用它，但我的正则表达式技能没有......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:29:17.783

使用以下正则表达式

```
-\d+:\+\d+ 
```

它匹配 a`-`后跟一个或多个数字，后跟`:`a`+`后跟一个或多个数字。

如果您希望两者都是相同的整数，请使用以下内容

```
-(\d+):\+\1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:25:23.040

```
<?php
$subject = "-100:+100";
$pattern = '/-\d+:\+\d+/';
preg_match($pattern, $subject, $matches);
print_r($matches);
?> 
```

\d 表示数字，+ 表示前面的一个或多个，所以 \d+ 是一个或多个数字，依此类推

**未测试**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:27:38.067

您可以将单个数字与`\d`. 对于 1 个或多个数字，请使用`\d+`. `\-`您必须转义其他字符，因此`\+`要匹配这些字符。但我建议阅读您正在使用的语言的正则表达式教程——它并不像看起来那么难！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T13:28:43.127

如果您需要实数（例如不应匹配 001），请使用此模式

`/-([1-9]\d*|0):\+([1-9]\d*|0)/`

`|`表示或
`[1-9]`表示 1 到 9（含）之间的数字之一
`\d*`表示数字 0 次或多次

# jquery - jQuery mobile，多页面的pageshow事件

> ID：14502309
> 
> 赞同：4
> 
> 时间：2013-01-24T13:20:09.330
> 
> 标签：jquery, events, jquery-mobile

我有两个页面，test1.html 和 test2.html。每次当这些页面之一可见时，我都想执行一些代码。

这是两个页面：

测试1.html：

```
 <!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>test1</title>
    <link rel="stylesheet"  href="css/jquery.mobile-1.2.0.css" />
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.2.0.js"></script>
</head><body>

<div data-role="page" id="test1">

    <div data-role="content">

    <a href="test2.html" data-role="button">jump to test2</a>

    </div>

</div>

<script type="text/javascript">

$(document).on('pageshow', '#test1', function (data) {
    alert('pageshow test1');
});

</script>
</body></html> 
```

测试2.html：

```
<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>test1</title>
    <link rel="stylesheet"  href="css/jquery.mobile-1.2.0.css" />
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.2.0.js"></script>
</head><body>

<div data-role="page" id="test2">

    <div data-role="content">

    <a href="test1.html" data-role="button">jump to test1</a>

    </div>

</div>

<script type="text/javascript">
$(document).on('pageshow', '#test2', function (data) {
    alert('pageshow test2');
});
</script>

</body></html> 
```

当我从 test1.html 开始时，我只收到 test1 的警报（每次我返回它时也是如此），但从来没有收到 test2.html 的警报。

我需要的是每个页面都不同的显示处理程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:49:57.937

## 可用的解决方案

### 解决方案 1

首先，从页面中删除 javascript 代码**`BODY`**并将其放入单个 js 文件中。新的 js 文件应该放在**`HEAD`**js/jquery.mobile-1.2.0.js 初始化之后。

像这样的东西：

```
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile-1.2.0.js"></script>
<script src="js/custom.js"></script> 
```

在您的情况下，jQuery mobile 正在加载第二个**HTML**文件，但只有这一部分：

```
<div data-role="page" id="test2">
    <div data-role="content">
        <a href="test1.html" data-role="button">jump to test1</a>
    </div>
</div> 
```

它将通过 ajax 加载到**DOM**结构中。这是第二页脚本没有执行的主要原因。

### 解决方案 2

第二种解决方案是在链接中使用**`rel="external"`**属性，每次打开新页面时都会强制页面重新加载。

```
<a href="test1.html" data-role="button" rel="external">jump to test1</a> 
```

无论如何，如果可能的话，永远不要**`SCRIPT`**在页面内使用标签**`BODY`**，它会起作用，但同时它可能会导致其他问题

## 更多信息

如果您想了解更多关于这个问题的信息，如何解决它+示例，请查看我在我的**个人博客中制作的这篇****[文章](http://www.gajotres.net/how-jquery-mobile-page-handling-affects-javascript-executions/)**。这篇文章直接谈论这个话题，所以我希望你不要把它看作是自我推销的尝试。

# java - Spring 上下文：找不到属性占位符文件

> ID：14502315
> 
> 赞同：0
> 
> 时间：2013-01-24T13:20:26.997
> 
> 标签：java, spring, maven, jar, maven-assembly-plugin

我正在尝试构建一个独立的基于 Spring 的 Java 应用程序。

我正在使用 Maven 程序集插件来构建具有依赖项的 JAR。JAR 的结构最终看起来像这样（只是一个子集）：

```
com
META-INF
org
properties
 - taskexecutor.properties
spring
 - properties.xml
.
.
. 
```

清单看起来像这样：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: authorname
Build-Jdk: 1.6.0_30
Main-Class: com.company.utilities.task.TaskLauncher 
```

当应用程序运行时，应通过包含 properties.xml 文件来配置属性占位符：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <context:property-placeholder location="classpath:/properties/taskExecutor.properties"/>

</beans> 
```

它在 Eclipse 中运行良好，但是当我运行 JAR 时出现此错误：

```
Exception in thread "main" org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileN
otFoundException: class path resource [properties/taskExecutor.properties] cannot be opened because it does not exist
        at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:78)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
        at com.company.utilities.task.TaskLauncher.main(TaskLauncher.java:28)
Caused by: java.io.FileNotFoundException: class path resource [properties/taskExecutor.properties] cannot be opened because it does not exist
        at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:158)
        at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:181)
        at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:161)
        at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:69)
        ... 6 more 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:27:41.613

将 taskExecutor.properties 移至 root 并尝试

```
<context:property-placeholder location="taskExecutor.properties"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:33:24.510

通过命令行运行似乎区分大小写，但加载这些资源时 Eclipse 不区分大小写。

重命名`taskexecutor.properties`以`taskExecutor.properties`解决问题。哎呀。希望这可以帮助将来像我一样愚蠢的人;-)

# android - 显示从编辑文本到列表视图的用户输入

> ID：14502320
> 
> 赞同：0
> 
> 时间：2013-01-24T13:20:37.143
> 
> 标签：android, android-listview, android-arrayadapter

我在列表视图中添加 2 个数字时遇到问题。这是我的行，有 2 个文本视图（每个数字）。textView2 忽略

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView3"
        android:gravity="center_horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" - "
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

当用户添加号码时，它将显示在列表视图中。第二个数字必须是 11 - 用户插入的那个数字。一切正常，但我不知道如何显示第二个数字。

```
public class MainActivity extends Activity {
    ArrayAdapter<String> m_adapter;
    ArrayList<String> m_listItems = new ArrayList<String>();
    Button bt;
    EditText et;
    TextView tv;
    ListView lv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Inflate the menu; this adds items to the action bar if it is present.
                bt = (Button) findViewById(R.id.button1);
                et = (EditText) findViewById(R.id.editText1);
                tv = (TextView) findViewById(R.id.textView1);
                lv = (ListView) findViewById(R.id.lista);
                m_adapter = new ArrayAdapter<String>(this,R.layout.row, R.id.textView1);
                lv.setAdapter(m_adapter);
                //final String input = et.getText().toString();

                bt.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        String input = et.getText().toString();
                        if(null!=input&&input.length()>0){     
                        String maxpunti = "11";
                        int a = Integer.parseInt(maxpunti);
                        int b = Integer.parseInt(input);
                        int c = a-b;
                        String input2 = String.valueOf(c);
                        m_adapter.add(input);
                        m_adapter.add(input2);
                        m_adapter.notifyDataSetChanged();

                      }
                    }
                });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:43:20.620

ArrayAdapter<String> 的默认实现将单个 Stringvalue 绑定到单个文本字段。由于您的列表视图中的每个列表项或“行”都有多个视图（您需要实现/扩展您自己的 ArrayAdapter 并覆盖 getView 方法。您可以为列表中可能拥有的任意数量的自定义视图设置值项目布局。

看[一个简单的例子](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/)，也可以看看 som 文档，了解 listviews/adpters 如何在 android 中工作，因为它们非常重要。

# c# - .net WCF GET HTTPS 400 错误请求，但与 Http 一起工作正常

> ID：14502326
> 
> 赞同：2
> 
> 时间：2013-01-24T13:20:47.050
> 
> 标签：c#, .net, wcf, ssl, https

我在 Windows Server 2008 R2 上有一个 WCF。我有一个 SSL 证书。

使用 IE，http URL 工作正常（我得到我的数据），但使用 Https 我有 400 错误请求。

在我的 wcf 的 web.config 下面：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<bindings>
  <basicHttpBinding>
    <binding name="TransportSecurity">
      <security mode="Transport">
        <transport clientCredentialType="None" />
      </security>
    </binding>    
  </basicHttpBinding>      
</bindings>

<behaviors>
  <endpointBehaviors>

    <behavior name="ServiceRequestResourcesAspNetAjaxBehavior">
      <webHttp defaultOutgoingResponseFormat="Json" />      
    </behavior>

    <behavior name="ServiceRequestResourcesAspNetAjaxBehaviorHttps">          
    </behavior>

  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="ServiceRequestResourcesBehaviors">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true" />          
    </behavior>        
  </serviceBehaviors>
</behaviors>

<services>
  <service behaviorConfiguration="ServiceRequestResourcesBehaviors" 
           name="BaseSite.ServiceRequestResources">

   <endpoint address="" 
             behaviorConfiguration="ServiceRequestResourcesAspNetAjaxBehaviorHttps" 
             binding="basicHttpBinding" 
             bindingConfiguration="TransportSecurity"
             contract="BaseSite.ServiceRequestResources" />

    <endpoint address="" 
              behaviorConfiguration="ServiceRequestResourcesAspNetAjaxBehavior" 
              binding="webHttpBinding" contract="BaseSite.ServiceRequestResources" />

  </service>      
</services> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:52:32.750

经过大量测试，它正在工作。我需要在`webHttpBinding`而不是配置绑定部分`basicHttpBinding`，但我不知道为什么。

在我的绑定部分下方：

```
<bindings>
    <webHttpBinding>
        <binding name="TransportSecurity">
            <security mode="Transport">
                <transport clientCredentialType="None" />
            </security>
        </binding>
    </webHttpBinding>
</bindings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:38:29.023

对于您的部分，您是否尝试过为 HTTPS 添加端点，如下所示：

```
<services>
    <service behaviorConfiguration="ServiceRequestResourcesBehaviors" 
        name="BaseSite.ServiceRequestResources">

        <endpoint address="" 
          behaviorConfiguration="ServiceRequestResourcesAspNetAjaxBehaviorHttps" 
          binding="basicHttpBinding" 
          bindingConfiguration="TransportSecurity"
          contract="BaseSite.ServiceRequestResources" />

        <endpoint address="" 
          behaviorConfiguration="ServiceRequestResourcesAspNetAjaxBehavior" 
          binding="webHttpBinding" contract="BaseSite.ServiceRequestResources" />

        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
    </service>      
</services> 
```

# javascript - HTML/JQUERY 表单选择选项指定起点

> ID：14502327
> 
> 赞同：0
> 
> 时间：2013-01-24T13:20:48.207
> 
> 标签：javascript, jquery, html, forms

我正在使用 jquery 脚本在表单上创建一些自定义样式选择框，这里的 jquery 脚本：[http](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/) ://www.bulgaria-web-developers.com/projects/javascript/selectbox/ 。（这个问题实际上与 jquery 脚本无关，但认为我应该包括它。）

我在一个高度从 1 英尺到 6 英尺的表单上有一个选择（下拉）选项。默认情况下，第一个选项是 1 英尺，但我希望它从 5 英尺左右开始，因为这是一个更常见的选项。我仍然想保持从最小到最高的顺序向上和向下滚动选项的能力。

'selected' 不会产生我正在寻找的结果。有谁知道如何让它工作？

谢谢

* * *

根据要求提供更多信息，这是下拉列表的示例：

```
<select name="height">
<option value="1 1">1ft 1 in</option>
<option value="1 2">1ft 2 in</option>
<option value="1 3">1ft 3 in</option>
<option value="1 4">1ft 4 in</option>
<option value="1 5">1ft 5 in</option>
<option value="1 6">1ft 6 in</option>
<option value="1 7">1ft 7 in</option>
<option value="1 8">1ft 8 in</option>
<option value="1 9">1ft 9 in</option>
...
</select> 
```

这个列表还在继续，但是当用户来到列表时，他们必须一直滚动到他们的高度，所以我想将起点设为 5 英尺 0 英寸左右，以便用户可以在需要的地方向上或向下滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:32:23.637

使用脚本为我选择的作品符合我的预期

```
<option value="1">1 ft</option>
<option value="2">2 ft</option>
<option value="3">3 ft</option>
<option value="4">4 ft</option>
<option value="5" selected>5 ft</option>
<option value="6">6 ft</option> 
```

# jquery - 简单的本地存储/jQuery 函数

> ID：14502330
> 
> 赞同：1
> 
> 时间：2013-01-24T13:21:04.510
> 
> 标签：jquery, local-storage

首先：我一直是 Stackoverflow 及其社区的忠实粉丝，因为它帮助我理解了 HTML 和新的 HTML5。

现在这是我的问题：我必须制作一个移动应用程序，在其中使用带有 jQ​​uery 的本地存储功能。听起来很简单：有一个带有提交按钮的输入字段，当输入提交时，它被添加到一个列表中。每个 li-item 前面都有一个按钮，因此可以将其从列表中删除。jQuery 是首选，但也可以使用 javascript。

这是我的开始（我希望我做得很好）：

```
<form name="input" method="POST">
<input type="text" name="fav" class="stored" required> <button>
</form>

<ul>
<button><li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:02:44.857

You probably want to use a plugin like [jStorage](http://www.jstorage.info/).

# jquery - 动画持续时间属性完成后如何重新计算css属性？

> ID：14502332
> 
> 赞同：1
> 
> 时间：2013-01-24T13:21:07.830
> 
> 标签：jquery, css, animation

我正在尝试获得泡沫上升的效果，而且看起来还不错。我使用 JQuery 随机分配 CSS 属性，例如高度、宽度或动画持续时间。但我想知道在动画持续时间完成后我是否可以重新计算一些属性。

```
for(var i=1; i<=7; i++)
   {
    var randBottom = Math.ceil(Math.random()*200); 
    var randWidth = Math.ceil(Math.random()*50)+20;
    var randHeight = Math.ceil(Math.random()*100)+200;
    var oceanWidth= $("#ocean").width();
    var randLeft= Math.ceil(Math.random()*(oceanWidth-randWidth));
    var randDuration = Math.ceil(Math.random()*7)+2; 
     var cssObj = {
        'bottom' : randBottom+'px',
         'height' : randHeight+'px',
         'width' : randWidth+'px',
         'left' : randLeft+'px',
         'animation-duration': randDuration+'s',
         '-moz-animation-duration': randDuration+'s',
         '-webkit-animation-duration' :randDuration+'s',
         '-o-animation-duration':randDuration+'s'
        };
    $("#bubble"+i).css(cssObj);
   } 
```

[这](http://jsfiddle.net/dZJJu/2/)是我正在进行的工作的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:52:19.450

我认为这会给你你正在寻找的东西，但似乎保持 css 关键帧持续时间和 javascript 时间难以同步。

你愿意将动画`jQuery.animate()`改为吗？

```
for(var i=1; i<=7; i++)
{
    randomizeBubble(i)
}

function randomizeBubble(i)
{
    var randBottom = Math.ceil(Math.random()*200); 
    var randWidth = Math.ceil(Math.random()*50)+20;
    var randHeight = Math.ceil(Math.random()*100)+200;
    var oceanWidth= $("#ocean").width();
    var randLeft= Math.ceil(Math.random()*(oceanWidth-randWidth));
    var randDuration = Math.ceil(Math.random()*7)+2; 
     var cssObj = {
        'bottom' : randBottom+'px',
         'height' : randHeight+'px',
         'width' : randWidth+'px',
         'left' : randLeft+'px',
         'animation-duration': randDuration+'s',
         '-moz-animation-duration': randDuration+'s',
         '-webkit-animation-duration' :randDuration+'s',
         '-o-animation-duration':randDuration+'s'
        };
    $("#bubble"+i).css(cssObj);

    setTimeout(function(){randomizeBubble(i);}, randDuration * 1000)
} 
```

*   [jsFiddle，同步失败](http://jsfiddle.net/X5teA/)
*   [jsFiddle，`jQuery.animate()`](http://jsfiddle.net/nzqHs/5/)

# c - 如果在 IOCP 模型中指定了 WSASend 的 lpCompletionRoutine 怎么办？

> ID：14502333
> 
> 赞同：1
> 
> 时间：2013-01-24T13:21:11.223
> 
> 标签：c, asynchronous, tcp, winsock, iocp

MSDN 页面`WriteFileEx`说它不能在 IOCP 模型中使用，因为它有一个参数来指定完成例程。如果文件句柄已与 I/O 完成端口相关联，`WriteFileEx`则将失败。

但是，`WSASend`允许调用者指定完成例程作为其最后一个参数，而此函数可用于 IOCP 模型。

我检查了几个带有 IOCP 的 WinSock 示例，发现最后一个参数`lpCompletionRoutine`始终为空。这是强制性的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:33:49.480

文档说的唯一内容是：

> 完成例程遵循为 Windows 文件 I/O 完成例程规定的相同规则。

这可能表明您不能将 IOCP 和 混合`lpCompletionRoutine`在一起，例如`WriteFileEx()`. 另一方面，您为什么首先**要将**它们混合在一起？完成端口得到结果，或者完成例程得到结果。为什么需要同时使用两者？

# jquery - jQuery 创建的按钮无法识别

> ID：14502334
> 
> 赞同：0
> 
> 时间：2013-01-24T13:21:15.413
> 
> 标签：jquery, button

在我的一个 jQuery 函数中，我创建了一个 id 为 "one" 的按钮，使用`$(some div).html(<button>...</button>)`. 问题是当我以后使用时`$("#one").click(function(){....})`，它不起作用。按钮无法识别。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:22:52.117

使用 .on 而不是 .click，例如

```
 $(body).on('click', '#one', function() {.....}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:26:36.227

您的按钮是在代码中动态生成的，因此单击事件处理程序无法识别，因为当您绑定事件时它不是 DOM 的一部分。使用[事件委托](http://davidwalsh.name/event-delegate)- 即将事件绑定到永久 DOM 对象，例如`document`，并将其委托给您的按钮：

```
$(document).on("click","#one",function(){
// Your code
}); 
```

# razor - 如何在 Razor 中的 Telerik Grid 上显示工具提示

> ID：14502335
> 
> 赞同：0
> 
> 时间：2013-01-24T13:21:31.720
> 
> 标签：razor

我正在尝试在我的 Telerik 网格上显示工具提示，以便在鼠标悬停在行上时显示我的列详细信息，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:51:33.427

请查看以下页面：

[http://jemmitch.wordpress.com/2012/05/05/tooltips-for-a-telerik-mvc-grid/](http://jemmitch.wordpress.com/2012/05/05/tooltips-for-a-telerik-mvc-grid/)

[http://www.telerik.com/community/forums/aspnet-mvc/grid/tooltip-in-telerik-grid.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/tooltip-in-telerik-grid.aspx)

我希望他们能有所帮助。

# ios - 当我从 NSMutableArray 获取对象时，为什么我的对象为零？

> ID：14502337
> 
> 赞同：0
> 
> 时间：2013-01-24T13:21:35.723
> 
> 标签：ios, objective-c, nsmutablearray

我这里的代码有问题

```
Book *theNewBook = [self parseTheBookXML];
// The book is not nil here
NSLog(@"The book's title: %@, number of pages:%@ and author: %@",theNewBook.title, theNewBook.pages, theNewBook.author);

[_theBooksArray addObject:theNewBook];

// TEST
Book *testBook = [_theBooksArray objectAtIndex:0];
// The book is nil here
NSLog(@"The book's title: %@, number of pages:%@ and author: %@",testBook.title, testBook.pages, testBook.author); 
```

谁能告诉我为什么我的书对象是“零”，因为我在这里撞到了墙……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:09:48.150

正如您从对我的问题的评论中看到的那样，我的问题是我没有初始化我正在访问的数组。所以代替

```
[_theBooksArray addObject:theNewBook]; 
```

打电话

```
_theBooksArray = [[NSMutableArray alloc] initWithObjects:theNewBook, nil]; 
```

会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:26:19.040

```
[_theBooksArray addObject:theNewBook];
[_theBooksArray count]; 
```

打印日志并检查数组计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:20:34.940

您必须在使用之前初始化数组。

_theBooksArray = [[NSMutableArray alloc] init];

# sql - 在组内比较以获取共同值

> ID：14502344
> 
> 赞同：3
> 
> 时间：2013-01-24T13:22:08.413
> 
> 标签：sql, oracle

我有一张包含以下数据的表格

情况1：

```
table1
-------------
id      type
-------------
1         X
1         Y
2         X
3         Z
3         X
------------- 
```

`X`现在你看到 X 对所有的 id 都是通用的，所以在这种情况下我需要返回

案例2：

```
table1
-------------
id      type
-------------
1         X
1         Y
2         X
2         Y
3         X
3         Y
-------------- 
```

在这种情况下，X 和 Y 都是通用的，那么我需要返回 X 和 Y 逗号分隔 (X,y)

案例3

```
table1
-------------
id      type
-------------
1         X
1         Y
2         X
2         Y
3         X
3         Y
4         NULL
------------------ 
```

如果任何记录出现空值，我需要返回空值

实际上，我给你的数据是从 3 个表中填充的，所以我已经为此编写了查询，但是现在我需要比较组中的公共数据，这让我很困惑，如何比较团体？

注意：这里的组是基于`ID`

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:33:26.177

与 ID 的计数相比，您可以计算出现次数吗？

```
with data as (select rownum id, 'X' type from dual connect by level <= 3
              union all
              select rownum id, 'Y' type from dual connect by level <= 3
              union all
              select 3 id, 'Z' type from dual)
select wm_concat(distinct type)
  from (select type, count(*) over (partition by type) cnt, count(distinct id) over () total_ids
          from data)
 where cnt = total_ids; 
```

在 11g 中，你`LISTAGG`当然有`WM_CONCAT`。如果对于每个 id，相同的`type`发生多次，您可以更改`count(*) over (partition by type)`为`count(distinct id) over (partition by type)`

编辑：

如果你有

```
3, Z
3, NULL 
```

（而不是 4，NULL）并且在这种情况下还希望返回 NULL 而不是分隔列表，那么您可以添加一个检查（上面的 4，NULL 即使在以前的 SQL 版本上也会返回 null，因为计数会'nt捆绑）：

```
 with data as (select rownum id, 'X' type from dual connect by level <= 3
                      union all
                      select rownum id, 'Y' type from dual connect by level <= 3
                      union all
                      select 3 id, 'Z' type from dual)
        select wm_concat(distinct type)
          from (select type, count(*) over (partition by type) cnt, count(distinct id) over 

() total_ids,
                       max(case when type is null then 'Y' else 'N' end) over () has_null_in_set
                  from data)
         where cnt = total_ids
          and has_null_in_set = 'N'; 
```

# css - 背景附件：固定；在移动 Safari 上

> ID：14502345
> 
> 赞同：1
> 
> 时间：2013-01-24T13:22:09.393
> 
> 标签：css, parallax

我正在尝试在此模板中使用漂亮的视差效果。它似乎适用于除移动 Safari 之外的所有浏览器（异常）！

[http://wrapbootstrap.com/preview/WB002R8U1](http://wrapbootstrap.com/preview/WB002R8U1)

查看 iPad 上的 ABOUT 和 FOURTH 部分，背景图像丢失（可能是因为它粘在其他元素后面的页面顶部。

有人知道解决方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:42:00.647

移动 iOS 上的视差并不那么容易：Safari 会在滚动时阻止所有渲染（以提高性能），因此您无法测量当前滚动距离并将其应用于背景位置。图片只会在您完成滚动后刷新其位置（并且没有动画，因此您将看不到任何内容）。

有一些解决方法，但它们并不容易实现。其中之一是[http://markdalgleish.com/projects/stellar.js/](http://markdalgleish.com/projects/stellar.js/)及其[iOS 技术演示](http://markdalgleish.com/projects/stellar.js/demos/ios.html "iOS 演示")。

最佳解决方案：拆分您的 css 标记并让视差仅对桌面设备可见。由于视差需要大量功率（因为它不是硬件加速的），所以无论如何它不太适合移动设备。

# c# - 如何编写要在程序集中的任何方法之前执行的代码？

> ID：14502346
> 
> 赞同：3
> 
> 时间：2013-01-24T13:22:10.207
> 
> 标签：c#, .net, appdomain

有一个事件[`AppDomain.CurrentDomain.DomainUnload`](http://msdn.microsoft.com/en-us/library/system.appdomain.domainunload.aspx)允许清理独立于任何特定类实例甚至任何特定类的静态资源。我认为它是在我当前程序集中的任何代码之后执行的代码（顺便说一句，我是对的吗？）。

但是有没有办法编写一段代码（用于当前程序集），该代码要在当前程序集（类库）中的任何其他代码之前执行？或者我应该寻找一种更棘手的方法来在任何代码开始执行之前初始化一些资源？

我知道静态构造函数，但它们的调用顺序没有明确定义。换句话说，不能保证特定的静态构造函数将在其他类的其他静态构造函数之前执行。

还有一个[`AppDomain.AssemblyLoad`](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyload.aspx)。我不确定这是我要找的东西。此事件在加载 OTHER 程序集时发生，而不是当前程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:46:33.913

我遇到了同样的问题并以这种方式解决了。我只用方法定义了一个`IAssembyInitializer`接口`void Initialize()`。在每个我想在加载后执行一些代码的程序集中，我定义了一个实现这个接口的类。我定义了一个属性来指定程序集中实现此接口的类（否则您可以通过反射找到它们，但我更喜欢这种方式）：

```
[AttributeUsage(AttributeTargets.Assembly, AllowMultiple = true)]
public class AssemblyInitializerAttribute : Attribute
{
    AssemblyInitializerAttribute ()
    {
    }
    AssemblyInitializerAttribute (string typeName)
    {
        TypeName = typeName;
    }
    public string TypeName;
} 
```

属性在 AssemblyInfo 中以这种方式设置：

```
[assembly: AssemblyInitializerAttribute ("MyNamespace.AnAssemblyInitializer")] 
```

最后，在应用程序的主程序集中，我向 AssemblyLoad 事件注册了一个执行所有初始化的方法：

```
AppDomain.CurrentDomain.AssemblyLoad += new AssemblyLoadEventHandler(NewAssemblyLoaded);

        static void NewAssemblyLoaded(object sender, AssemblyLoadEventArgs args)
        {
            Assembly anAssembly = args.LoadedAssembly;
            AssemblyInitializerAttribute[] initializers = (AssemblyInitializerAttribute[])anAssembly .GetCustomAttributes(typeof(AssemblyInitializerAttribute), false);
            foreach (AssemblyInitializerAttribute anInit in initializers)
            {
                Type initType = anInit.TypeName != null ? anAssembly.GetType(anInit.TypeName) : null;
                if (initType != null && initType.GetInterface("IAssemblyInitializer") != null)
                {
                    IAssemblyInitializer anInitializer = (IAssemblyInitializer)Activator.CreateInstance(initType);
                    anInitializer.Initialize();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:26:18.180

您可以使用静态字段中的实例`Lazy<T>`来自己控制静态初始化顺序。这些`Lazy<T>`初始化器对象的代码体可以引用`Lazy<T>`自动编排初始化 DAG 的其他实例。显然，你不能有周期。

使用 C++/CLI，您确实可以在程序集加载时执行代码（模块初始化程序）。你可能不想走那条路。

使用 C# 这是不可能的。静态 ctors 和惰性初始化模式是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:37:58.230

您可能想扫描代码并找到那些需要完成初始化的地方。

然后在初始化尚未运行时在需要初始化之前启动初始化。

在 .NET 中，您根本不知道何时加载程序集，因此无法保证初始化将在所有情况下及时开始。

另一种方法是程序集的客户端通过调用方法显式启动初始化。（如果还没有加载，这也会加载程序集）

可以像在客户端中那样使用 AssemblyLoad 事件来检测特定程序集的加载，但这将使初始化依赖于客户端实现，而第一个解决方案将此责任保留在程序集本身的范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:49:16.757

假设您无法控制类库的使用方式，您可以为库中的每个公共/受保护类编写静态构造函数，并从每个类调用初始化代码。显然，初始化代码必须跟踪第一次调用（通过静态字段），以便它只运行一次。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T16:53:50.887

您可以使用[Module Initializers](http://einaregilsson.com/module-initializers-in-csharp/)来做到这一点。C# 不直接支持它们，但如果您不反对使用[Cecil](http://www.mono-project.com/Cecil)对程序集进行后处理，则可以使用它们。

# wpf - WPF 基础知识：命名空间

> ID：14502351
> 
> 赞同：0
> 
> 时间：2013-01-24T13:22:25.230
> 
> 标签：wpf, xaml, namespaces

我一直在挠头，我确定这是一个明显的问题，但我就是看不到。

我做了一个新的应用程序“WpfApplication3”

我添加了一个类“Person.cs”：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

    namespace WpfApplication3
    {
        public class Person
        {
            public string Name { get { return "Jonas"; } }
        }
    } 
```

然后我试试这个：

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication3"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <local:Person x:Key="somePerson"/>
        </Grid.Resources>
        <!--<TextBlock Text="{Binding {StaticResource somePerson.Name}}"/>-->
    </Grid>
</Window> 
```

我收到错误“名称“Person”在命名空间“clr-namespace:WpfApplication”中不存在。

我究竟做错了什么？

使用 VS Express 2012 for windows 桌面（试用版）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:43:29.407

这看起来很奇怪，但我测试过，果然找不到人。

然后我向 Person 添加了一个公共 ctor

```
public class Person 
{
    public Person() { }
} 
```

它会编译

现在我可以删除 ctor 并且它会（仍然）编译

尝试（多次）清理并重建

我知道没有意义，但它发生在我身上

# git - GIT 分支澄清

> ID：14502356
> 
> 赞同：0
> 
> 时间：2013-01-24T13:22:34.570
> 
> 标签：git, github

我在 master 分支中有一些文件已经提交。

然后我创建另一个分支并切换到该分支。

现在在另一个分支中，我修改了也存在于主分支中的文件。

但我仍然没有在另一个分支上提交更改。

如果我尝试切换到主分支，它可以让我切换携带我在另一个分支上所做的所有更改。

在我提交另一个分支中的更改之前，GIT 不应该允许我切换到主分支，对吗？

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:27:35.813

Git 将允许您跨分支切换，即使您有未提交的更改。但是，如果这样做会导致冲突，它不会让您切换到另一个分支。

# jquery - 如何在 jQuery 中取消隐藏元素

> ID：14502358
> 
> 赞同：0
> 
> 时间：2013-01-24T13:22:39.753
> 
> 标签：jquery, ajax, drop-down-menu, show-hide

这里需要一点帮助....我正在使用自动填充的下拉菜单。第二个下拉列表仅在第一个下拉列表中选择一个项目后出现 - 但是，我希望它保留在屏幕上并且不会在页面重新加载时消失，就好像我想搜索另一个城镇一样，我不能因为第二个只出现选择第一个后（如果你知道我的意思）......

这是我的 jQ... $(document).ready(function() {

```
$('#wait_1').hide();
$('#result_1').show();
$('#drop_1').change(function(){
  $('#wait_1').show();
      $.get("twotier/func.php", {
    func: "drop_1",
    drop_var: $('#drop_1').val()
  }, function(response){

    $('#result_1').fadeIn();
    setTimeout("finishAjax('result_1', '"+escape(response)+"')", 400);
  });
    return false;
});
});

function finishAjax(id, response) {
$('#wait_1').hide();
$('#'+id).html(unescape(response));

} 
```

...和我的 HTML

//获取主要县

```
<select name="drop_1" class="searchboxes" id="drop_1">
 <option value="" selected="selected">Any Town</option>
 <?php getTierOne(); echo $drop_var; ?>
 </select> 
```

///等待图像在响应时淡入淡出

```
 <span id="wait_1" style="display: none;"><img alt="Please Wait" src="twotier/ajax-           loader.gif"/></span> 
```

// 显示城镇下拉菜单

```
 <span id="result_1"></span> 
```

我可以看到它在哪里消失，但不知道如何阻止它，我已经尝试了几个小时。我只需要它始终可用（因此，如果我选择东米德兰兹，然后选择德比并查看结果，然后我可以选择莱斯特而无需再次选择和取消选择米德兰兹，因为当前城镇下拉菜单在页面重新加载时消失。）

希望有人可以在这里帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:47:00.097

您需要在页面加载时检查城镇下拉列表中的默认值。如果存在默认值，则隐藏下拉菜单，否则显示它。

你需要有这样的东西。

```
$(document).ready(function() {
    if(('#drop2').val() !== 'default'){
      // show drop 2   
    }else{
        //hide drop 2   
    }
}); 
```

# php - 动态子域映射到文件夹

> ID：14502359
> 
> 赞同：1
> 
> 时间：2013-01-24T13:22:41.547
> 
> 标签：php, .htaccess, hosting

我想为每个用户创建动态子域并重定向到一个文件夹。例如有人使用 myname.example.com 访问它应该重定向到 example.com/survey.php

我正在向 500 多人发送时事通讯，每个用户都会获得一个带有名称的子域链接。像 john.example jess.example.com

我无法创建 500 个子域。所以请帮助我了解为实现此目标应采取的每个步骤。

提前致谢

# python - django 如何处理二进制发布数据？

> ID：14502360
> 
> 赞同：1
> 
> 时间：2013-01-24T13:22:41.923
> 
> 标签：python, django, post, django-models, binary

![发布数据](../Images/8e720cbe7ca2f248a4aefbc373e55562.png)

user_logo 文件实际上是一个 img 数据，

如何将此 img 保存到 django 模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:41:58.067

**模型.py**

```
class Image(models.Model):
    image = models.ImageField(upload_to='image_uploads')
    created = models.DateTimeField(auto_now_add=True) 
```

**表格.py**

```
class ImageForm(ModelForm):
    class Meta:
        model = Commercial 
```

**视图.py**

```
def add_image(request):
    if request.method == 'POST':
        form = ImageForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
return direct_to_template(request, 'page.html', {
    'form': ImageForm()
}) 
```

**page.html**

```
<form method="post" enctype="multipart/form-data">
{% csrf_token %}
    {{form.image}}
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:28:12.920

通常，您不想将图像存储在数据库中。Django 的[FileField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField)和[ImageField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField)从磁盘加载数据。

**编辑：**刚刚注意到标题与发布数据有关。查看有关[文件上传的文章](https://docs.djangoproject.com/en/1.5/topics/http/file-uploads/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:42:03.163

看起来`'user_logo'`是[一个JPEG文件](http://en.wikipedia.org/wiki/JPEG#Syntax_and_structure)编码`base16/hex`（除了前缀`'<'`）

```
>>> 'ffd8ffe000104a4649460001010100'.decode('hex')
'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x01\x00' 
```

您可以使用[ContentFile](https://docs.djangoproject.com/en/dev/ref/files/file/#additional-methods-on-files-attached-to-objects)来存储此类数据

```
obj.image.save(filename, ContentFile(the_decoded_content)) 
```

另外，最好问一下实现客户端的家伙他是否可以发布`multipart/form-data`，如果可以的话，`user_logo`可以很容易地通过`request.FILES`......和更少的请求正文

# xcode - “个人资料”是有效身份。但是，您没有关联的包标识。可以导入来自不同 Mac 的开发人员配置文件

> ID：14502361
> 
> 赞同：4
> 
> 时间：2013-01-24T13:22:46.853
> 
> 标签：xcode, macos, code-signing

我正在尝试将我的 mac 应用程序提交到 mac 应用程序商店。胸围我无法正确地对构建进行代码签名。

我已经在开发证书实用程序中创建了一个分发证书，并且我还创建了一个生产配置文件。

我已使用私钥将证书正确导入到我的钥匙串中。此外，配置文件在 Organizer -> Window 中成功导入。

但是当我存档项目并验证 iPA 到 mac 应用商店时，我收到错误消息：****“个人资料”是有效身份。但是，此 Mac 上未安装关联包标识“配置文件”的私钥

关于项目的更多细节：我在名为 XMLRPC 的项目中使用了一个外部框架和开源项目。我已将项目的“跳过安装”属性设置为“是”。这不是代码符号。

你能告诉我出了什么问题吗？ ![在此处输入图像描述](../Images/289683735e6be86fbade1b5a388093d9.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-19T10:44:25.143

您缺少安装程序证书。在提交到 Mac App Store 时，您需要分发证书来签署您的应用程序和安装程序证书来签署包安装程序。Xcode 根据代码签名身份的名称自动查找密钥，名称相同但附加了“Installer”。

要修复问题，请登录 Apple 开发人员的[证书部分](https://developer.apple.com/account/mac/certificate/certificateList.action?type=distribution)。通过加号按钮申请新证书并选择 Mac App Store 安装程序类型。按照步骤提交 CSR 请求，然后只需下载证书并将其拖到您的钥匙串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T07:26:25.463

即使我拥有正确的配置文件和代码签名身份，我也收到了同样的警告。

> “个人资料”是有效身份。但是，您没有关联的包标识。

我在 Xcode 中刷新了我的代码签名身份并重新启动了 Xcode。之后警告消失了。

# android - 是否可以在没有外部应用程序的情况下编写用于发送电子邮件的代码？

> ID：14502362
> 
> 赞同：2
> 
> 时间：2013-01-24T13:22:50.250
> 
> 标签：android, email

我想通过我的应用程序发送电子邮件，我正在通过使用意图和 android 系统显示此意图的各种组件列表来做到这一点，但我不想在这些组件的帮助下发送电子邮件，我想通过我的应用。任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:24:38.753

您可以使用 Gmail 身份验证使用 JavaMail API 在 Android 中发送电子邮件

看看这个帖子，

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/a/2033124/1626878)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:32:53.380

是的，这是可能的。嘿，你有很好的教程：[http](http://thedevelopersinfo.wordpress.com/2009/10/22/email-sending-in-android/) ://thedevelopersinfo.wordpress.com/2009/10/22/email-sending-in-android/ 。我希望我有所帮助。

代码片段：

```
import android.app.Activity;

import android.content.Intent;

import android.os.Bundle;

import android.view.View;

import android.view.View.OnClickListener;

import android.widget.Button;

/**

* Class which shows how to send email

*

* @author FaYna Soft Labs

*/

public class Main extends Activity {

private Button clickBtn;

@Override

public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

setContentView(R.layout.main);

clickBtn = (Button) findViewById(R.id.click);

clickBtn.setText("Send email");

clickBtn.setOnClickListener(new OnClickListener() {

@Override

public void onClick(View v) {

Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

String[] recipients = new String[]{"my@email.com", "",};

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);

emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Test");

emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "This is email's message");

emailIntent.setType("text/plain");

startActivity(Intent.createChooser(emailIntent, "Send mail..."));

finish();

}

});

} 
```

# vb.net - 在 ListView 控件 WinForms 上禁用组选择

> ID：14502367
> 
> 赞同：3
> 
> 时间：2013-01-24T13:23:00.640
> 
> 标签：vb.net, visual-studio-2010

我有一个列表视图控件设置为启用组的详细信息视图，但是当使用键盘向上\向下导航列表时，组充当可选项目，通常表现得很奇怪，有时会选择第一条记录。

**有没有办法禁用组项目的选择？**

*更多信息*

尝试使用箭头键在列表中上下导航 - 您会注意到组标题是可选的，并且根据导航方向的不同表现不同。我希望它们被禁用 - 选择从组中的最后一项跳转到下一组中的第一项。

[下载示例项目](http://www.sendspace.com/file/o0t61t)。

我正在填充这样的控件：

```
Dim dt As DataTable = CreateData()
Dim itemcoll(3) As String
For i = 0 To dt.Rows.Count - 1
  For j = 0 To dt.Columns.Count - 1
    itemcoll(j) = dt.Rows(i)(j).ToString()
  Next

  Dim lvi As New ListViewItem(itemcoll)
  ListView1.Groups.Add(New ListViewGroup(itemcoll(0).Substring(0, 1), itemcoll(0).Substring(0, 1)))
  lvi.Group = ListView1.Groups(itemcoll(0).Substring(0, 1))
  ListView1.Items.Add(lvi)
Next 
```

listview 控件通过设计器从标准更改了以下选项：

*   自动排列：错误
*   全行选择：真
*   隐藏选择：假
*   多选：假
*   排序：升序
*   查看详情

![例子](../Images/81f1e8386ab3bdd682cde9ea35a2cf18.png)

您可以在上方看到选择了 Y 组标题 - 从 Microsoft 向下导航选择 Yahoo! 和组标题，再次向下导航选择 Yahoo! 只要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:26:16.187

[Better ListView](http://www.componentowl.com/better-listview)和[Better ListView Express](http://www.componentowl.com/better-listview-express)开箱即用地提供了这个功能：

```
betterListView.GroupHeaderBehavior = BetterListViewGroupHeaderBehavior.None; 
```

[您可以在我们的文档](http://www.componentowl.com/documentation/better-listview/data/chapter-groups.html)中阅读更多关于扩展组支持的信息。

# android - 更改操作栏的按钮状态（图标）

> ID：14502373
> 
> 赞同：1
> 
> 时间：2013-01-24T13:23:27.973
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager

`Action Bar`当我刷入片段时，我如何动态更改操作按钮图标`ViewPager`。根据片段按钮必须更改状态（图标）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:56:59.253

[您可以在onPrepareOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)中设置正确的图标，然后在您希望更新图标时使用[invalidateOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)（或[ActivityCompat.invalidateOptionsMenu如果您使用支持库）使您的操作栏无效。](http://developer.android.com/reference/android/support/v4/app/ActivityCompat.html#invalidateOptionsMenu%28android.app.Activity%29)

例如：

```
@Override
public boolean onPrepareOptionsMenu (Menu menu) {
  MenuItem item = menu.findItem(R.id.my_menu_id);
  item.setIcon(getMenuItemIconResId());
}

@Override
public void onPageSelected(int position) {
  invalidateOptionsMenu();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:34:51.607

我解决了这个问题：
1）我实现`OnPageChangeLister`
2）调用 3）定义`setIcon()`为全局变量（类的字段）`onPageScrollStateChanged()`
`MenuItem`

# kinect - Kinect：如何从后视图获得骨架？

> ID：14502376
> 
> 赞同：0
> 
> 时间：2013-01-24T13:23:31.313
> 
> 标签：kinect

为什么你会想要这样的东西？我想跟踪一个水平安装在地面上的用户。用户面朝下，以允许腿和手臂自由移动。以游泳为例。

*   我将 Kinect**安装****在天花板上，面朝下**，这样我可以自由查看所有四肢。
*   传感器**在 z 轴上旋转 90°**以获得最大分辨率（通常比宽高）。

因此，用户是从背面看到的，旋转了 90°。从 OpenNI 1.5 中获得合适的骨架是不可能的。我的测试表明，OpenNI 期望用户在 y 轴上仰头面对相机（请参阅我的[其他答案](https://stackoverflow.com/a/14496274/275195)）。微软的 SDK 是一样的，但是我在这里排除了它，因为它不允许您更改源代码并且无法适应。OpenNI 2.0 不能与当前的[SensorKinect 配合](https://github.com/avin2/SensorKinect)使用以在 Linux 中连接 Kinect。所以：

**哪个类**在 OpenNI 1.5.x 中生成骨架？

我最好的猜测是将原型骨架旋转 y 180° 和 z 90°。如果你知道我在哪里可以找到这个。

* * *

**编辑**：正如我刚刚了解到的，没有开源软件可以从深度图像生成骨架，所以我回到标题中的问题：

如何**从旋转的后视图中获取用户骨架**？

# javascript - 内联 Javascript 未执行

> ID：14502377
> 
> 赞同：3
> 
> 时间：2013-01-24T13:23:32.793
> 
> 标签：javascript, jquery, html, inline

我想用 momentjs 将当前时间设置为一个元素。

```
<span onload="$(this).text(moment().format('MMMM Do YYYY, h:mm:ss a'));"></span> 
```

它有什么问题？什么都没有显示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T13:26:57.203

**onload 不是你需要的（它甚至不会工作），你需要在`document.ready`**

我认为您正在混合使用 jQuery 和 JavaScript，请尝试`document.ready`在脚本块中使用。

首先我们会给你的 span 一个 ID

```
<span id="yourSpan"></span> 
```

然后我们可以这样做：

```
<script type="text/javascript">
    $(function () {
        $("#yourSpan").text(moment().format('MMMM Do YYYY, h:mm:ss a'));
    });
</script> 
```

**编辑：正如您所说，您希望它内联（尽管这是非常糟糕的做法，我必须在写完后洗手），仍然如上所述将您的 ID 添加到您的跨度中，但请执行以下操作：**

```
<body onload="$('#yourSpan').text(moment().format('MMMM Do YYYY, h:mm:ss a'));"> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T13:26:39.007

span 标签不支持 onload ，一些支持 onload 的标签：

```
<body>, <frame>, <frameset>, <iframe>, <img>, 
<input type="image">, <link>, <script>, <style> 
```

# php - 如何从 url 中获取信息并在 php 函数中使用它？

> ID：14502382
> 
> 赞同：0
> 
> 时间：2013-01-24T13:23:45.243
> 
> 标签：php, mysql, url, sorting

我想创建一个函数来选择具有特定条件的每个字段。所以基本上我想点击一个链接，让该链接的某些部分告诉我的 php 函数选择的标准是什么。

我有一个这样的链接列表：

```
<li><a href="category.php?category=cat1">Cat1</a></li>
<li><a href="">Cat2</a></li>
<li><a href="">Cat3</a></li>
<li><a href="">Cat4</a></li>
<li><a href="">Cat5</a></li> 
```

链接的部分是`.php?category=criteria`。如何将此信息发送到我的函数并使用它来选择字段？

这是我的功能：

```
public function get_by_category ($cat) {
  $cat = $_GET['category'];
  $sql = $this->db->prepare("SELECT * FROM Content WHERE category=?");
  $sql->bindParam(1, $cat);
  $sql->execute();

  while ($row = $sql->fetch()) {
    echo $row['Title'];
  }
} 
```

结果什么都没有，没有错误等。它不知道如何获得标准，因为我不知道如何将标准指向它。我怎样才能使这项工作？我可以通过链接指定标准，这一点很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:31:42.090

使用带有命名参数的 PDO 通常有效：

```
public function get_by_category ($cat) {
  $cat = $_GET['category'];
  $sql = $this->db->prepare("SELECT * WHERE category=:category");
  $sql->bindParam("category", $cat);
  $sql->execute();

  while ($row = $sql->fetch()) {
    echo $row['Title'];
  }
} 
```

`print $sql->fullStmt`您可以通过在准备好的语句发送到 SQL 之前放置一个来检查正在执行的SQL。

更新：为了查看 PDO 异常，您可以尝试捕获它们：

```
public function get_by_category ($cat) {
  $cat = $_GET['category'];
  try {
    $sql = $this->db->prepare("SELECT * WHERE category=:category");
    $sql->bindParam("category", $cat);
    $sql->execute();
  }
  catch (PDOException $e) {
    print $e->getMessage();
  }

  while ($row = $sql->fetch()) {
    echo $row['Title'];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:26:00.403

将 $cat 值传递给您的查询应该可以完成这项工作，但链接应该是这样的：

```
<li><a href="category.php?category=15">Cat1</a></li>

public function get_by_category () {
  $cat = $_GET['category']; //Check if is numeric, strip code out of it etc..
  $sql = $this->db->prepare("SELECT * FROM `table` WHERE `category` = $cat");
  $sql->bindParam(1, $cat);
  $sql->execute();

  while ($row = $sql->fetch()) {
    echo $row['Title'];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:27:51.257

除了 mallix 的答案之外，如果类别是数字，我建议在 intval($cat) 上更改 $cat，如果类别是字符串，我建议更改 addlashes($cat)。

# java - 泽西岛客户端 IPv6

> ID：14502385
> 
> 赞同：4
> 
> 时间：2013-01-24T13:23:49.330
> 
> 标签：java, rest, jersey, ipv6

我可以使用 Jersey 客户端使用 IPv6 连接到 REST 资源吗？

我收到此错误：

```
com.sun.jersey.api.client.ClientHandlerException: java.net.MalformedURLException: For input string: ":94ea:d2bc:c189:209c%10:8100"
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:128)
    at com.sun.jersey.api.client.Client.handle(Client.java:551)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:556)
    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:69)
    at com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:475)
    at com.bmc.aps.agent.jersey.JerseyClient.put(JerseyClient.java:168)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.net.MalformedURLException: For input string: ":94ea:d2bc:c189:209c%10:8100"
    at java.net.URL.<init>(URL.java:601)
    at java.net.URL.<init>(URL.java:464)
    at java.net.URL.<init>(URL.java:413)
    at java.net.URI.toURL(URI.java:1081)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:139)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:126)
    ... 8 more 
```

在例外情况下，ip 被剪切（`:94ea:d2bc:c189:209c%10`而不是`fe80::94ea:d2bc:c189:209c%10`）。在调试中，我可以看到 Web 资源 URI 是正常的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:00:52.663

找到了答案。

Jersey 客户端期望获得带有方括号的 IP `[]`。

在这个例子中 -`[fe80::94ea:d2bc:c189:209c%10]`而不是 - `fe80::94ea:d2bc:c189:209c%10`。

# javascript - 按值匹配复选框

> ID：14502394
> 
> 赞同：1
> 
> 时间：2013-01-24T13:24:09.330
> 
> 标签：javascript, jquery, asp.net, checkbox

我有一个复选框列表，我正在尝试根据文本框的值检查这些复选框。

```
var codes = $('#textbox1').val().split(','); // this contains [ "Dept1" and "Dept2" ]
var allDeptChecks = $('.Dept-help input:checkbox'); // this contains all of my checkboxes
allDeptChecks.attr('checked', false);
$.each(codes, function() {
    var chkDept = allDeptChecks.find("[value='"+this+"']"); // no matter what I try, this selector matches 0 elements
    chkDept.attr('checked', true);
}); 

<li title="Dept 1">
    <input type="checkbox" name="chkDept1" value="Dept1">
    <span>Dept1</span>
    <span>Description Numero Uno</span>
</li>
<li title="Dept 2">
    <input type="checkbox" name="chkDept2" value="Dept2">
    <span>Dept2</span>
    <span>Description Numero Dos</span>
</li> 
```

这不应该工作吗？

**编辑：** [这是一个 JSFiddle](http://jsfiddle.net/qwd6M/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:39:57.597

干得好

```
$('#lnkGo').click(function () {
    var codes = $('#textbox1').val().split(','); // this contains [ "Dept1" and "Dept2" ]
    var allDeptChecks = $('input:checkbox'); // this contains all of my checkboxes
    allDeptChecks.prop('checked', false);
    $.each(codes, function () {
        var chkDept = allDeptChecks.filter("input[value='" + this + "']"); // no matter what I try, this selector matches 0 elements
        chkDept.prop('checked', true);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:43:00.273

试试这个 ：

```
$.each(codes, function(i, value) {
$("input[value='"+value+"']").prop('checked', true);    
}); 
```

# c# - 如何在 Visual Studio 单元测试中使测试方法不可运行

> ID：14502395
> 
> 赞同：8
> 
> 时间：2013-01-24T13:24:13.357
> 
> 标签：c#, visual-studio-2010, unit-testing, testing

如何使测试方法在 Visual Studio 单元测试中不可运行？使用带有 .NET 4.0 的 Visual Studio 2010。

假设我有 10 种测试方法，其中 1 种测试方法由于外部依赖性而无法正常工作。如果我想运行所有 10 个，那么我会在一次测试中出错。

一种解决方案是：不要运行测试。但我需要知道，是否有任何属性或类似的东西，它只是绕过测试并且不会运行。

我尝试使用`[WorkItem(1234)]`Attribute，但测试仍在运行。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-24T13:29:15.950

是的，您可以将`Ignore`属性添加到要跳过的测试中：

```
[TestMethod, Ignore]
public void ThisTestWontRun()
{
    // Test code here
} 
```

# c# - 单例范围内的 Ninject Memoize 实例

> ID：14502396
> 
> 赞同：5
> 
> 时间：2013-01-24T13:24:15.507
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject

我正在使用 Ninject 实例化一些带有构造函数参数的对象，例如：

```
class MyClass
{
    public MyClass(string myArg)
    {
        this.myArg = myArg;
    }
} 
```

我需要这个类的实例数直到运行时才知道，但我想做的是确保每个变体都会`myArg`产生不同的单例实例（因此两次请求相同的值会返回相同的实例，但不同args 返回不同的实例）。

有谁知道这样做的好方法，最好是内置的方法？

我发现一篇为旧版本的 Ninject [How To Ensure One Instance per Variation of Activation Parameters](http://iridescence.no/post/Ninject-and-Singletons-How-To-Ensure-One-Instance-per-Variation-of-Activation-Parameters.aspx)编写的文章，但希望新版本有一个更简洁的解决方案。

**编辑**

这是我所采用的，改编自Akim的回答如下：

```
private readonly ConcurrentBag<string> scopeParameters = new ConcurrentBag<string>();

internal object ParameterScope(IContext context, string parameterName)
{
    var param = context.Parameters.First(p => p.Name.Equals(parameterName));
    var paramValue = param.GetValue(context, context.Request.Target) as string;
    paramValue = string.Intern(paramValue);

    if (paramValue != null && !scopeParameters.Contains(paramValue))
    {
        scopeParameters.Add(paramValue);
    }

    return paramValue;
}

public override void Load()
{
    Bind<MyClass>()
            .ToSelf()
            .InScope(c => ParameterScope(c, "myArg"));

    Bind<IMyClassFactory>()
        .ToFactory();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:54:43.547

您可以通过使用绑定`IBindingNamedWithOrOnSyntax<T> InScope(Func<IContext, object> scope)`方法提供自定义范围来实现需求行为`MyClass`

> 表示**只要提供的回调返回的对象保持活动状态** （即尚未被垃圾回收），就应该重新使用通过绑定激活的实例。

因此，您需要返回第一个构造函数参数的值，`Func<IContext, object> scope`并确保[垃圾收集器](/questions/tagged/garbage-collector "显示标记为“垃圾收集器”的问题")不会收集它。

这是一个片段：

```
public class Module : NinjectModule
{
    // stores string myArg to protect from CG
    ConcurrentBag<string> ParamSet = new ConcurrentBag<string>();

    public override void Load()
    {
        Bind<MyClass>()
            .ToSelf()
            // custom scope
            .InScope((context) =>
                {
                    // get first constructor argument
                    var param = context.Parameters.First().GetValue(context, context.Request.Target) as string;                    

                    // retrieves system reference to string
                    param = string.Intern(param);

                    // protect value from CG
                    if(param != null && ParamSet.Contains(param))
                    {
                        // protect from GC
                        ParamSet.Add(param);
                    }

                    // make Ninject to return same instance for this argument
                    return param;
                });
    }
} 
```

ps：[带有单元测试的完整示例代码](https://gist.github.com/4622557)

# scala - 用于创建集合的类型的隐式排序概念的差距

> ID：14502397
> 
> 赞同：0
> 
> 时间：2013-01-24T13:24:15.543
> 
> 标签：scala, scala-collections, implicit-declaration

如果这个问题的解决方案太明显或者之前已经在这个论坛中解决了，请见谅（在这种情况下，请指点我的帖子）。

我有一堂课

```
org.personal.exercises.LengthContentsPair (l: Int, c: String) 
{
    val length = l
    val contents = c

} 
```

然后，在同一个源文件中，我还定义了一个隐式值，它定义了这种类型的对象的排序方式，因此：

```
object LengthContentsPair  {

    implicit val lengthContentsPairOrdering = new Ordering [LengthContentsPair] {

       def compare (a: LengthContentsPair, b: LengthContentsPair)= {

          a.length compare b.length;
       }
    }
 } 
```

以下是本论坛给出的解决方案。

现在，我想创建一个专门的 Set，它将 Set 中的元素数量限制为给定数量。因此，我定义了一个单独的类，如下所示：

```
import scala.collection.immutable.TreeSet;

import org.personal.exercises.LengthContentsPair.lengthContentsPairOrdering;

class FixedSizedSortedSet [LengthContentsPair]  extends TreeSet [LengthContentsPair]  
{ .. 
} 
```

对我来说，这似乎是继承 TreeSet 的正确方法。但是，编译器会抛出以下错误：

> (1) 没有为 LengthContentsPair 定义隐式排序。
> 
> （2）构造函数TreeSet的参数不够：（隐式排序：Ordering[LengthContentsPair]）scala.collection.immutable.TreeSet[LengthContentsPair]。未指定的值参数排序。

我是否错误地理解了范围规则？我觉得这很容易，但我不能把手放在它上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:57:04.083

你定义`FixedSizedSortedSet`错了。您的实现具有名为的泛型类型参数`LengthContentsPair`，与具有该名称的类无关。换句话说，你有`LengthContentsPair`泛型类型的影子类。

如果您需要一个仅包含 的元素的专用集合`LengthContentsPair`，那么您可能的意思是：

```
class FixedSizedSortedSet extends TreeSet[LengthContentsPair]  
{ .. 
} 
```

如果一个实例`Ordering[LengthContentsPair]`是可见的，这应该可以工作。但这应该不是问题，因为排序是在伴随对象中定义的，`LengthContentsPair`并且默认情况下作为隐式参数可见。

但是，如果您更需要一个`TreeSet`可以容纳任何类型元素的通用扩展，那么您的意思可能是这样的：

```
class FixedSizedSortedSet[T](implicit ordering: Ordering[T]) extends TreeSet[T]  
{ .. 
} 
```

需要隐式参数，因为`TreeSet`需要一个隐式参数`Ordering[T]`，所以我们需要将该要求转发给`FixedSizedSortedSet`

顺便提一句。我建议您考虑用 case class 替换您`LengthContentsPair`的[课程](http://www.scala-lang.org/node/107)。

# java - 更新类类型对象的 set 方法

> ID：14502399
> 
> 赞同：0
> 
> 时间：2013-01-24T13:24:22.567
> 
> 标签：java, reflection

我有以下代码，并且此代码是硬编码的（人）由于对象是泛型类型，因此有一种方法可以在运行时通过反射获取它吗？ **我没有类类型**，我只是在运行时得到它（可以是许多不同的类）但是所有类都有相同的方法**setId**，我该怎么做？

```
List<Object> listClsObj
    for (Object object : listClsObj) {
            ((Person)object).setId(null);
        } 
```

我尝试了 (object.getClass().setId(null); 我得到了语法错误，也尝试了

```
Class<?> clazz = object.getClass(); 
(clazz).setId(null); 
```

并且还会出现语法错误（也许我做得不好），假设我不知道类类型，我应该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:30:41.003

```
for(Object curObject : objectsList){
    try {
        Method method = curObject.getClass().getDeclaredMethod("setId", Integer.class); //suppose only one parameter in method
        method.invoke(curObject, 1);
    } catch (Exception e) {
        //no such method exists
    }
} 
```

* * *

当然最好使用适当的面向对象设计。例如，如果它是您的实体，最好使用具有*主键*设置基本实现的[层超类型模式。](http://martinfowler.com/eaaCatalog/layerSupertype.html)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:32:41.833

您可以尝试使用以下代码

```
Class<?> clazz = object.getClass();
                Field field = clazz.getDeclaredField("id");
                field.setAccessible(true);
                field.set(object, null); 
```*

# android - 在 App Inventor 中制作高分屏幕

> ID：14502400
> 
> 赞同：2
> 
> 时间：2013-01-24T13:24:29.587
> 
> 标签：android, app-inventor

我想在我的测验应用程序中添加一个高分屏幕。我已经创建了一个带有起始值的高分屏幕，其中包含用户在上一轮中达到的分数、类别名称和难度。

我将此起始值拆分为 2 个变量：

第一个只包含分数，另一个包含类别和难度。现在总而言之，我有 3 个类别和每个类别 2 个难度。现在我想保留每个类别和难度的前 10 名高分。像这样：

```
Category 1 Difficulty 1
Category 1 Difficulty 2
Category 2 Difficulty 1
Category 2 Difficulty 2
Category 3 Difficulty 1
Category 3 Difficulty 2 
```

如您所见，我将有 6 个不同的高分列表。

现在我的问题：

如何在 TinyDB 中保存所有 6 个列表并重新加载数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:52:16.450

对于每个列表，使用 TinyDB 自己的标签
来保存其中一个列表，使用 TinyDB.StoreValue 块，在 Screen.Initialize 中再次获取它。使用 TinyDB.GetValue 块，另见[文档](http://appinventor.mit.edu/explore/content/basic.html#TinyDB)
并记住：第一次运行TinyDB 是空的，请在此处查看如何处理[的示例。](http://puravidaapps.com/snippets.php#canvas)
并且：[做教程](http://appinventor.mit.edu/explore/content/tutorials.html)以熟悉 App Inventor 的基本概念。

# java - java象棋游戏中的多态性

> ID：14502402
> 
> 赞同：1
> 
> 时间：2013-01-24T13:24:29.960
> 
> 标签：java, polymorphism

我是 java 新手，正在尝试构建运行国际象棋游戏的逻辑。我有一个名为“棋子”的超类和国王、骑士、王后等的子类。我正在尝试实现一个移动方法，在该方法中我动态确定棋子的类型，然后调用该棋子的相应移动方法。例如：

```
int typeOfPiece = _board[startX][startY]._theKind;
Piece myPiece;

switch(typeOfPiece)
{
    case 1:
        myPiece = new Pawn(startX, startY, team);
    case 2: 
        myPiece = new Rook(startX, startY, team);
    case 3:
        myPiece = new Knight(startX, startY, team);
}

boolean myPiece.canMove(endX, endY); 
```

在这个例子中，有没有办法可以确保 canMove 方法被正确类型的片断调用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:27:07.657

如果您的董事会将持有`Piece`对象而不是`int`值，那么您可以这样做：

```
Piece piece = _board[x][y];
piece.canMove(...); 
```

该类`Piece`将定义一个`canMove`方法，其所有子类将使用它们自己的策略来实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T13:26:35.953

在所有子类中重写`canMove`并在父类中使其抽象`Piece`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:31:51.287

您可以将 an`enum`用作`Piece`工厂。这样你就可以避免需要`1 means Pawn, ...`etc，因为你有`Pieces.Pawn`etc。请注意，你仍然可以有一个`enum`被调用`Pawn`和一个`class`被调用`Pawn`而没有歧义。

```
private abstract static class Piece {
  // Current position.
  protected int x, y;

  // Returns true if this piece could move there.
  abstract boolean canMove ( int x, int y);
}

private static class Pawn extends Piece {
  @Override
  boolean canMove (int toX, int toY) {
    // Not handling en-passant and first-move etc.
    return toX == x && (toY == y + 1 || toY == y + 2);
  }
}
private static class Rook extends Piece {
  @Override
  boolean canMove (int toX, int toY) {
    return toX == x || toY == y;
  }
}

// A Piece factory.
private static enum Pieces {
  Pawn {
    @Override
    Piece make () {
      return new Pawn();
    }
  },
  Rook{
    @Override
    Piece make () {
      return new Rook();
    }
  };

  abstract Piece make();
}

// Make a Piece.
private static Piece makePiece ( Pieces type ) {
  return type.make();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T13:37:18.563

您在问题中所做的并不是真正利用多态性，因为您正在通过程序代码决定片段的类型。

我建议您稍微更改一下您的设计：不要在每次尝试移动它时为每个部分创建一个新实例，而是为所有部分（黑色和白色）创建两个集合。让棋盘存储对棋子的引用，以便您可以直接从棋盘检索棋子的实例。

从抽象基类 Piece 派生 Pawns 和其他实现抽象方法 canMove() 的角色

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T13:28:36.323

我要做的是创建一个抽象类或接口来表示`Piece`对象的行为和属性。

然后，我将拥有实现/扩展片段类的类，每个类都用一个`canMove`方法表示它们自己的行为。

您实例化您的对象，然后在您的代码中，您只需获取`Piece`位于 (x, y) 位置的对象并调用`canMove`. 这会将行为委托给适当的子类，使您的代码更简洁、更易于维护和更灵活。

拥有一个抽象类或接口，而不是为您的`Piece`对象拥有一个具体类，是（在我看来）优势，因为它*强制*每个部分实现这种行为，而不是简单地继承它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T13:28:04.463

如果您的子类覆盖超类 'Piece' 上的 canMove 方法，myPiece.canMove(endX, endY) 就足够了。根据 myPiece 引用指向的对象类型，在运行时 jvm 将决定它应该调用哪个方法。这被称为动态方法分派

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T13:36:24.597

我建议您使用[Enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)实现抽象类 Piece 而不是 int 的二维数组来表示板，[Example](http://www3.ntu.edu.sg/home/ehchua/programming/java/JavaGame_TicTacToe.html) 。您可以通过这样做来避免[幻数。](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://en.wikipedia.org/wiki/Magic_number_%28programming%29&ei=oDgBUYztFsb_rAeEn4CgBw&usg=AFQjCNEBrhFvMq4tSp1fmTLhIkLF2eIkMw&sig2=7eHf9J49yaAn7muoGcqKBQ&bvm=bv.41524429,d.bmk)

# resources - android中代码和资源的条件编译

> ID：14502405
> 
> 赞同：1
> 
> 时间：2013-01-24T13:24:34.463
> 
> 标签：resources, compilation, conditional

我有一个关于条件编译的问题。

我想有条件地选择资源并在android中为它构建单独的apk。

我如何在android中实现这一点。

我正在使用 Eclipse。

谢谢，

# java - 通过 Java (SunPKCS11) 解锁 SmartCard 的 PIN

> ID：14502407
> 
> 赞同：4
> 
> 时间：2013-01-24T13:24:37.707
> 
> 标签：java, smartcard, sun, pkcs#11

我尝试通过 java 解锁或更改智能卡令牌上的 pin。通过 SunPKCS11-Wrapper 编写和读取智能卡证书没什么大不了的，但我在 PKCS11-wrapper-class 中看不到任何 C_setPIN 或 C_initPIN 方法。

那么有没有办法使用 SunPKCS11-Wrapper 解锁智能卡引脚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:06:47.263

Sun 的 PKCS#11 提供程序并不适合这种情况。但它是在 IAIK 的开源包装器之上实现的，它可能包含您要查找的内容，请参阅[Session.setPIN()](http://javadoc.iaik.tugraz.at/pkcs11_wrapper/current/iaik/pkcs/pkcs11/Session.html#setPIN%28char%5b%5d,%20char%5b%5d%29)的链接。请注意，直接链接到`sun.*`包是非常不受欢迎的，尽管`Session`该类很可能隐藏在某个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-26T13:44:39.147

使用 IAIK PKCS11 包装器解锁 PIN：

1.  使用 PUK 码登录“安全官会话”

```
 Session session = token.openSession(Token.SessionType.SERIAL_SESSION, Token.SessionReadWriteBehavior.RW_SESSION, null, null);
    session.login(Session.UserType.SO, puk.toCharArray()); 
```

2.  新 PIN 码的初始化

```
 session.initPIN(newPin.toCharArray()); 
```

# browser - HTTP流服务器的实时视频流播放器

> ID：14502409
> 
> 赞同：3
> 
> 时间：2013-01-24T13:24:42.970
> 
> 标签：browser, video-streaming, mime, multipart-mixed-replace

我有一个视频流服务器，它为实时视频流提供 HTTP API。发送流，`multipart/x-mixed-replace`因此每个视频帧都用某个边界字符串分隔，`--DigifortBoundary`例如。此外，每个帧都有自己的`Content-Type`标头，根据这个特定的流媒体服务器的文档，它可以是以下之一：

*   图片/JPEG
*   图像/小波
*   视频/MPEG
*   视频/h263
*   视频/h264

流示例：

```
--DigifortBoundary
Content-Type: image/jpeg
Content-Length: 35463

JPEG_DATA
JPEG_DATA
..
..
..
JPEG_DATA
--DigifortBoundary
Content-Type: image/jpeg
Content-Length: 34236

JPEG_DATA
JPEG_DATA
..
..
.. JPEG_DATA 
```

问题是，我需要在 HTML 页面中嵌入视频播放器，但我找不到任何支持`multipart/x-mixed-replace`内容类型甚至通过 HTTP 流式传输的播放器。我知道那里的 Flash 视频播放器通常支持[RTMP](http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)或[RTSP](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)，但我从未听说过支持 HTTP 视频流的播放器。

你知道任何可以做到这一点的网络视频播放器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T18:53:28.090

在客户端 VLC 和 Firefox 可以做到 - 可能更多。在服务器端： [http](http://en.wikipedia.org/wiki/Motion_JPEG#M-JPEG_over_HTTP) ://en.wikipedia.org/wiki/Motion_JPEG#M-JPEG_over_HTTP提到了三个：

1.  MJPG-Streamer：http: [//sourceforge.net/projects/mjpg-streamer/](http://sourceforge.net/projects/mjpg-streamer/)
2.  ffmpeg-server 作为 ffmpeg [http://www.ffmpeg.org/的一部分](http://www.ffmpeg.org/)
3.  cambozola [http://www.charliemouse.com:8080/code/cambozola/](http://www.charliemouse.com:8080/code/cambozola/)

这是我个人发现的：

*   MJPG-Streamer 只能在 linux 版本上编译（例如在 MacOS X 上不编译）
*   如果使用 apt-get install 安装，ubuntu 上的 ffmpeg-server 可能已过时且有问题
*   Cambozola 似乎更像是一个独立的客户端

# php - 为什么我的 twitter oauth 访问令牌无效/过期

> ID：14502411
> 
> 赞同：18
> 
> 时间：2013-01-24T13:25:10.270
> 
> 标签：php, twitter, token, twitter-oauth

我正在使用 Twitter 将用户登录到一个网站，该网站似乎正在运行，直到我尝试获取有效的访问令牌。

```
require("twitteroauth.php");
require 'twconfig.php';
session_start();

$twitteroauth = new TwitterOAuth(YOUR_CONSUMER_KEY, YOUR_CONSUMER_SECRET);
$request_token = $twitteroauth->getRequestToken('http://****/tw_response.php');

$oauth_token = $request_token['oauth_token'];
$_SESSION['oauth_token'] = $oauth_token;

$oauth_token_secret = $request_token['oauth_token_secret'];
$_SESSION['oauth_token_secret'] = $oauth_token_secret;

if ($twitteroauth->http_code == 200) {
    url = $twitteroauth->getAuthorizeURL($request_token['oauth_token']);
    header('Location: '.$url);
} else {
    die('Something wrong happened.');
} 
```

这似乎工作正常，将我重定向到 twitter 以登录并确认访问，之后它将我返回到 tw_response.php（我的回调 url），在 url 中有以下变量：

```
http://example.com/login.php?oauth_token=sO3X...yj0k&oauth_verifier=Ip6T...gALQ 
```

然后在 tw_response.php 中尝试获取访问令牌，但它报告为无效。我尝试使用`var_dump`以下方式查看访问令牌的内容：

```
require("twitteroauth.php");
require 'twconfig.php';
session_start();

$oauth_verifier = $_REQUEST['oauth_verifier'];
$oauth_token = $_SESSION['oauth_token'];
$oauth_token_secret = $_SESSION['oauth_token_secret'];

$twitteroauth = new TwitterOAuth(YOUR_CONSUMER_KEY, YOUR_CONSUMER_SECRET, $oauth_token, $oauth_token_secret);

$access_token = $twitteroauth->getAccessToken($data['oauth_verifier']);
var_dump($access_token); 
```

`var_dump`以“invalid / expired Token”结尾的结果：

```
array(8) {
    ["oauth_url"] => string(104) ""1.0" encoding="UTF-8"?>/oauth/access_token?oauth_consumer_key=ceE...9Dg"
    ["oauth_nonce"]=> string(32) "c52...d07"
    ["oauth_signature"]=> string(28) "ry7...Fcc="
    ["oauth_signature_method"]=> string(9) "HMAC-SHA1"
    ["oauth_timestamp"]=> string(10) "1359031586"
    ["oauth_token"]=> string(40) "sO3...j0k"
    ["oauth_verifier"]=> string(43) "Ip6...ALQ"
    ["oauth_version"]=> string(63) "1.0 Invalid / expired Token "
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-05T04:08:39.550

```
$access_token = $twitteroauth->getAccessToken($data['oauth_verifier']);
var_dump($access_token); 
```

哪里`$data`来的神奇？您有变量`$oauth_verifier`，但请记住，如果这是您注册的回调 URL，则不需要此变量。

由于您在内部使用了无效变量`getAccessToken`，因此它将返回无效值。

使用 TwitterOAuth 的正确方法：

```
if (!isset($_GET["oauth_token"])) {
    // set these values in a config file somewhere.
    $twitter = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET);

    // append a ?. This is your callback URL if you specify something.
    $credentials = $twitter->getRequestToken("http://example.com/test.php?");

    // try and be a bit more elegant with the URL... This is a minimal example
    $url = $twitter->getAuthorizeUrl($credentials);
    echo $url;

    // these are temporary tokens that must be used to fetch the new,
    // permanent access tokens. store these in some way,
    // session is a decent choice.
    $_SESSION["token"] = $credentials["oauth_token"];
    $_SESSION["secret"] = $credentials["oauth_token_secret"];
} else {

    // use the user's previously stored temporary credentials here
    $twitter = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET,
                    $_SESSION["token"], $_SESSION["secret"]);

    // uses the oauth_token (from the request) already.
    // you store these credentials in your database (see below).
    $credentials = $twitter->getAccessToken($_GET["oauth_verifier"]);

    // just a printout of credentials. store these, don't display them.
    echo "<pre>";
    var_dump($credentials);
    // valid credentials, provided you give the app access to them.
    echo "</pre>";
} 
```

为了便于使用，我只使用一个脚本进行回调；如果您愿意（并且您可能应该），您可以将相关部分拆分为多个脚本。

对于您的数据库而言，凭据还包括 twitter 用户的用户名，这很方便。
**编辑**：[Twitter 现在为用户 ID 分配 64 位整数](https://dev.twitter.com/blog/64-bit-twitter-user-idpocalypse)。如果您无法在应用程序的每个部分处理 64 位整数，您应该*将其存储为字符串*，以确保不会出现用户 ID 错误和冲突。

```
array(4) {
  ["oauth_token"]=>
  string(50) "7041...wYupkS"
  ["oauth_token_secret"]=>
  string(42) "O9ENq...21B2fk"
  ["user_id"]=> // user ID. always the same, never changes (store this as ID)
  string(9) "..."
  ["screen_name"]=> // username. can change.
  string(11) "..."
} 
```

所以，如果你想通过 twitter 让用户登录，而不是明确地让他们登录到你的网站，你可以使用`$_SESSION`（我使用数据库登录，如果你想保存该状态，建议使用）在上面的脚本中，你会将此添加到`else`块的末尾：

```
$_SESSION["token"] = $credentials["oauth_token"];
$_SESSION["secret"] = $credentials["oauth_secret"];
$_SESSION["username"] = $credentials["screen_name"]; 
```

[`GET account/verify_credentials`](https://dev.twitter.com/docs/api/1.1/get/account/verify_credentials)如果您想给他们一个用户页面，您还可以从 获取用户的屏幕名称和更多信息（如果您使用 javascript，请通过`id_str`此处获取他们的用户 ID）：

```
$user_array = $twitter->get("account/verify_credentials"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-11T22:06:12.983

如果您的 OAuth 流程前一天正常工作，第二天失败，请检查您的计算机**时钟**。我正在运行一个 Vagrant 盒子，它不知何故将其时间设置为前一天，这导致 Twitter API 返回 {"code":89,"message":"Invalid or expired token."}。这也可能显示为 401 时间戳越界。您可以使用此命令在 Ubuntu 中更新您的时钟：

```
sudo ntpdate time.nist.gov 
```

如果`ntpdate`您的系统上没有可用的[替代方法：](https://askubuntu.com/a/683136)

```
sudo date -s "$(wget -qSO- --max-redirect=0 google.com 2>&1 | grep Date: | cut -d' ' -f5-8)Z" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-28T21:19:59.957

如果一个人不付钱，一个人将只能创建开发环境（沙箱）。

正如我在[这里](https://stackoverflow.com/a/60459087/7109869)回答的那样：

> Counts 仅适用于付费高级帐户，并且需要支付高级访问权限。
> 
> [使用此链接申请访问](https://developer.twitter.com/en/apply-for-access)。

# oracle - 服务器 2008 上的 ORA-12154 错误

> ID：14502420
> 
> 赞同：0
> 
> 时间：2013-01-24T13:25:49.000
> 
> 标签：oracle, 64-bit, windows-server-2008, vb.net-2010

我正在将 VB.NET 2010 应用程序从 32 位 2003 服务器移动到连接到 Oracle 11g 数据库的 64 位 2008 服务器，并在执行时收到以下错误消息。

```
DefaultSource   Error   2
ERROR [08004] [Oracle][ODBC][Ora]ORA-12154: TNS:could not resolve the connect identifier specified
ERROR [IM006] [Microsoft][ODBC Driver Manager] Driver's SQLSetConnectAttr failed 
```

这是我做过的一些事情。

*   将 TNS_ADMIN 环境变量添加到服务器。
*   让服务器管理安装 64 位“Oracle 驱动程序 Oracle in OraClient11g_home1”。他们还卸载了 32 位“Microsoft ODBC for Oracle”驱动程序。
*   已验证我可以使用 SQLPlus 连接到服务器
*   更新了我用来使用 32 位“Microsoft ODBC for Oracle”的连接字符串
*   将数据库添加到 ODBC 系统 DNS，并验证连接是否正常。

这是节点下我的配置文件中的连接字符串。

```
<add name="SCHEMA_NAME" 
 connectionString="Driver={Oracle in OraClient11g_home1};Dbq=DATABASE_NAME;uid=USER;pwd=PASSWORD;"/> 
```

关于我可以尝试的任何建议，或者需要更改哪些内容才能使其在新服务器上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:08:26.813

我通过更改连接到 oracle 的方式解决了这个问题。我正在使用 Oracle.DataAccess 引用，删除连接字符串中的驱动程序引用，并使用 OracleConnection 和 oracleCommand 重建连接。

# c# - 选择对象并添加到列表 linq c#

> ID：14502428
> 
> 赞同：1
> 
> 时间：2013-01-24T13:26:07.417
> 
> 标签：c#, asp.net, linq

可能是一个简单的问题，但仍然是初学者，不知道如何......每个工作站可以有许多发票所以我下面的代码将......

存储所有工作站，遍历每个工作站，
获取该工作站的最后一张（最近的）发票，
如果发票日期（最近的发票）小于 12 个月

## 将其添加到站点列表...

编辑：感谢所有的帮助，但我正在尝试通过 c# 来完成，并避免你们提到的 LINQ 搜索......感谢所有回复的人......

我的新问题是我需要将 ChosenInvoices 列表排序为升序并返回第一个......因为我认为它正在选择列表中的任何人：

```
 var allWorkSites =
            (from worksites in db.Work_Sites
             select worksites).Distinct().ToList();
    List<Object> chosenInvoices = new List<Object>();

    foreach (Work_Site worksite in allWorksites)
    {
        Invoice lastInvoice = worksite.Invoices.LastOrDefault();

        if (lastInvoice != null)
        {
            if (lastInvoice.Invoice_Date < DateTime.Now.AddMonths(-12))
            {
                chosenInvoices.Add(workstation);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:48:39.123

```
List<invoice> actualInvoices = db.Work_Stations.Distinct()
        .Where(w => w.Invoices.Last().Invoice_Date < DateTime.Now.AddMonths(-12)).Select(w => w.Invoices.Last()).ToList(); 
```

此代码将为您返回每个工作站的最新发票列表。

要在升序列表中对发票进行排序，请使用**OrderBy()**方法，因此请使用此方法对其进行排序，然后取第一个。

还列出了**Sort()**方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:30:10.097

```
allWorkStations
    .Where(w => w.Invoices.Last().Invoice_Date < DateTime.Now.AddMonths(-12))
    .Select(w => list.add(w)); 
```

或者更好：

```
List<Work_Station> list = db.Work_Stations
    .Distinct()
    .Where(w => w.Invoices.Last().Invoice_Date < DateTime.Now.AddMonths(-12))
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:32:16.527

```
var allWorkStations =
            (from workstation in db.Work_Stations
             where workstation.Invoices.Last().Invoice_Date < DateTime.Now.AddMonths(-12)
             select workstation).Distinct(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T13:35:36.280

以下代码将创建去年有发票的工作站列表

```
var checkDate = DateTime.Now.AddMonths(-12);

var resultList = db.Work_Stations
  .Distinct()
  .Select(ws => new {Ws = ws, Li = ws.Invoices.OrderBy(i => i.Invoice_Date).LastOrDefault()})
  .Where(item => item.Li != null && Li.Invoice_Date < checkDate)
  .Select(item => item.Ws)
  .ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T13:38:26.070

即使发票未按日期顺序，这也将起作用：

```
invoiceLst.AddRange(allWorkStations
    .Where(w => w.Invoices.Max(i => i.Invoice_Date) < DateTime.Now.AddMonths(-12))); 
```

# java - Eclipse 错误“名为 Maven_Ant_Builde 的外部工具的文件不存在”

> ID：14502429
> 
> 赞同：3
> 
> 时间：2013-01-24T13:26:11.617
> 
> 标签：java, eclipse, opensuse

我刚刚从 Github 下载了一个项目并将其导入 Eclipse。

我现在只想编译它。但是，由于上述错误，构建失败。我不是 Java 编译工具方面的专家，但错误消息表明我的系统中缺少某些东西 :)

```
Errors occurred during the build.
Errors running builder 'Integrated External Tool Builder' on project 'projectname'.
The file does not exist for the external tool named Maven_Ant_Builder.
The file does not exist for the external tool named Maven_Ant_Builder. 
```

运行`zypper se maven`没有报告要安装的包。我已经有`ant`

为了编译该项目，我应该在我的系统上安装什么？

# facebook - 通过 FaceBookGraph API 为 facebook 页面分配管理员角色

> ID：14502431
> 
> 赞同：6
> 
> 时间：2013-01-24T13:26:12.757
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-page

我有 facebook 页面，我是该页面的管理员。现在我想使用 Graph API 将管理员角色分配给我的朋友列表中的某个人。

在文档中，我发现如何使用帐户参数列出一个 pege 的管理员，但我找不到如何添加一些作为页面管理员。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:16:33.300

不，这是不可能的。

考虑一下。如果允许，那么不会有任何 fb 应用程序开始接管您的页面吗？

此外，如果你想管理 fb 页面，那么你可以通过他们的 API 轻松地做到这一点，如果他们是页面的实际管理员，它可以做任何事情。

示例：状态更新、墙贴、照片上传、活动管理（创建/邀请）、评论、点赞、见解等。您还需要什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T15:19:47.887

如果您 POST 到图表 /{pageID}/admins?access_token={Page_access_token}&owner_email={some user emai} 那么您会从服务器收到以下响应：“error”：{“message”：“（＃100）您的应用程序没有权限修改 admins", "type": "OAuthException", "code": 100

因此，如果他们说我的应用程序没有修改管理员的权限，那么某些应用程序可能具有权限，即 tome 令牌是合乎逻辑的。问题是所需的权限代码在 API 文档中未公开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T22:30:15.313

我可以像这样使用 Koala 库通过 Graph API 添加管理员；@page_api.put_connections('你的页面 id' , 'roles', {'admin_id' => '你朋友列表中的用户 id'})

# android - 为 android 编译 bash

> ID：14502432
> 
> 赞同：1
> 
> 时间：2013-01-24T13:26:13.757
> 
> 标签：android, bash, build, arm

我使用 NDK 为 android 编译了 bash 4.1 静态构建。在编译时，由于错误，我添加了此更改。

> 从 externs.h 文件中注释掉 fdprintf 函数，将 #define HAVE_MKFIFO 1 添加到 config.h 文件中

最后我得到了

> 未定义对 bashline.c 中的“setgrent”、“getgrent”、“endgrent”和 complete.c 中的“setpwent”的引用 所以我评论了他们调用的位置。

最后 bash 被编译，当我试图在我的设备上运行它时，它工作但给出了错误，比如运行 pwd 时它没有给出正确的文件夹。而且总是我运行一个命令，有一行告诉`bash : precmd command not found`. 如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-24T03:38:55.610

试试这个：[https ://github.com/termux/termux-packages/blob/master/ndk-patches/grp.h.patch](https://github.com/termux/termux-packages/blob/master/ndk-patches/grp.h.patch)

如果补丁抱怨垃圾，请手动编辑。

# html - 如何在td的右上角添加div？

> ID：14502436
> 
> 赞同：3
> 
> 时间：2013-01-24T13:26:21.143
> 
> 标签：html, css, html-table

我需要重构这个任务[如何在表格单元格中添加三角形](https://stackoverflow.com/questions/14499048/how-to-add-triangle-in-table-cell)

我不需要背景 div。

```
 <td>
     <div style="position: relative;right: 0;top:0;">@Html.ImageContent("triangle_bonus.png", "")</div>
//@Html.DropDownListExtention
    </td> 
```

![在此处输入图像描述](../Images/2ddd70b2e89cd0ae6a936466c8ad5d86.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T13:36:20.120

尝试：

```
<td style="position: relative;">
<div style="position: absolute;right: 0;top:0;">@Html.ImageContent("triangle_bonus.png", "")</div>
</td> 
```

* * *

如何将您的 html 更改为：

```
<td class="triangle">
<div>@Html.ImageContent("triangle_bonus.png", "")</div>
</td> 
```

并将其添加到您的 html 头部：

```
<style>
td.triangle {position:relative}
td.triangle div {position:absolute; right:0; top:0;}
</style> 
```

例如看这个：http: [//jsfiddle.net/Juvcx/](http://jsfiddle.net/Juvcx/)

# android - 谷歌播放不搜索我的应用程序需要做任何优化

> ID：14502439
> 
> 赞同：-1
> 
> 时间：2013-01-24T13:26:29.553
> 
> 标签：android

谷歌播放不搜索我的应用程序做任何需要的优化。我的应用程序名称是 Xmas Catch，包名称是 com.xmascatch，当我通过 xmascatch 搜索时，它搜索得很好，但是当我通过 Xmas Catch 搜索时，它没有显示我的应用程序，请帮帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:28:35.380

你什么时候添加的应用程序？Google 需要超过 12 小时来更新其搜索索引。甚至不同国家、不同语言的搜索索引也存在差异。你必须要有耐心。

# maven - 如何防止 Maven 使用 在依赖项的 pom 文件中？

> ID：14502440
> 
> 赞同：3
> 
> 时间：2013-01-24T13:26:33.887
> 
> 标签：maven, repository

偶然我们发现我们的一个依赖项（spring-data-jpa 1.1.0.RELEASE，见[它的 pom-file](http://repo1.maven.org/maven2/org/springframework/data/spring-data-jpa/1.1.0.RELEASE/spring-data-jpa-1.1.0.RELEASE.pom)）包括一个`<repository>`.

这意味着我们的构建直接转到该存储库，绕过我们自己的中央 Maven 存储库。

但是，我们希望我们的构建受到控制：所有工件都应该来自我们部门的 Maven 存储库，并且我们配置为从我们想要的地方拥有或获取我们需要的一切。

*问题：*我们如何指示 Maven 忽略`<repositories>`依赖工件的 pom 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:33:55.203

您可以像这样禁用存储库：

```
<repository>
    <id>spring-libs-release</id>
    <url>http://repo.springsource.org/libs-release</url>
    <releases>
        <enabled>false</enabled>
    </releases>
    <snapshots>
        <enabled>false</enabled>
    </snapshots>
</repository> 
```

或者您可以尝试使用`mirrorOf`声明来使用[单个存储库](http://maven.apache.org/guides/mini/guide-mirror-settings.html#Using_A_Single_Repository)：

```
<mirrors>
    <mirror>
        <id>internal-repository</id>
        <name>Maven Repository Manager running on repo.mycompany.com</name>
        <url>http://repo.mycompany.com/proxy</url>
        <mirrorOf>*</mirrorOf>
    </mirror>
</mirrors> 
```

# sql-server - 使用存储过程复制复杂表

> ID：14502445
> 
> 赞同：0
> 
> 时间：2013-01-24T13:26:41.217
> 
> 标签：sql-server, stored-procedures

我编写了一个存储过程来复制表中的行。

这是桌子

![例子](../Images/4203f57a3a5abf8e7123d476129c8a3e.png)

我想复制它，但 ParentId 应该链接到新行。如果我执行简单的 INSERT INTO > SELECT FROM，ParentId 将链接到 ProductId 22 而不是新的 ProductId，如上所示。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:29:57.183

您的问题并不完全清楚，但如果我理解正确，您正在尝试复制几行来构建层次结构，同时保留该层次结构。

这不能一步完成。您需要首先复制行并记录新的和它们匹配的旧 id。然后您可以更新新行中的引用以指向新的父母。

最简单的方法是使用 MERGE 语句：

```
 CREATE TABLE dbo.tst(id INT IDENTITY(1,1), parent_id INT, other INT);

 INSERT INTO dbo.tst(parent_id, other)VALUES(NULL,1);
 INSERT INTO dbo.tst(parent_id, other)VALUES(1,2);
 INSERT INTO dbo.tst(parent_id, other)VALUES(1,3);
 INSERT INTO dbo.tst(parent_id, other)VALUES(3,4);
 INSERT INTO dbo.tst(parent_id, other)VALUES(NULL,5);
 INSERT INTO dbo.tst(parent_id, other)VALUES(5,6);

 CREATE TABLE #tmp(old_id INT, new_id INT);

 MERGE dbo.tst AS trg
 USING dbo.tst AS src
 ON (0=1)
 WHEN NOT MATCHED 
 AND (src.id >= 1) --here you can put your own WHERE clause.
 THEN
 INSERT(parent_id, other)
 VALUES(src.parent_id, src.other)
 OUTPUT src.id, INSERTED.id INTO #tmp(old_id, new_id);

 UPDATE trg SET
   parent_id = tmp_translate.new_id
 FROM dbo.tst AS trg
 JOIN #tmp AS tmp_filter
 ON trg.id = tmp_filter.new_id
 JOIN #tmp AS tmp_translate
 ON trg.parent_id = tmp_translate.old_id;

 SELECT * FROM dbo.tst; 
```

带有注释的行是您可以放置​​自己的 where 子句以选择要复制的行的地方。确保实际复制所有引用的父母。如果您复制没有其父级的子级，则更新将不会捕获它，它最终将指向旧的父级。

您还应该将 MERGE 和 UPDATE 包装在事务中，以防止其他人读取新的和尚未完成的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:15:26.377

您可以使用它`SELECT`来执行此操作，您只需要手动指定列的顺序。这是一个示例，假设您的表名为 Product 并且 ProductId 是自动递增的。请注意，返回的第一列`SELECT`是旧行的主键。

```
INSERT dbo.Product
SELECT
    ProductId,
    ArtNo,
    [Description]
    Specification,
    Unit,
    Account,
    NetPrice
    OhTime
FROM dbo.Product AS P
WHERE P.ParentId = 22 
```

这有帮助吗？

# php - 更新php生成的内容而不刷新页面

> ID：14502446
> 
> 赞同：0
> 
> 时间：2013-01-24T13:26:44.310
> 
> 标签：php, jquery, ajax

我创建了一个 php 函数（在“category-page.php”中称为“category_page”），它将文件中的数据读取到关联数组中，然后生成一些 html 以显示 products.php 上的信息（页面调用“ category_page”函数）

我的目标是允许用户从下拉列表中进行选择，以便在不刷新页面的情况下对显示的信息进行排序。

到目前为止，我已经设法通过`document.formname.submit`更改下拉列表然后使用`$_GET`来选择数组中的哪个键进行排序来实现这一点，但是，这会导致页面重新加载。

我对 php、javascript/jquery 有*一点*了解，并且在 AJAX 上进行了相当多的搜索/阅读，以启用无需刷新/重新加载的更新，但似乎无法将所有部分放在一起。

因此，在 products.php 中，我有以下 javascript/jquery：

```
function sort_products() {
queryString = "?sort_list="+$("#sort_list").val();
$.ajax({   
    type: 'GET',                                   
    url: 'category-page.php',         
    data: 'sort_list='+queryString
})
}

$("#sort_list").on("change", function() { sort_products() }); 
```

然后在 category-page.php 中：

```
if(isset($_GET['sort_list'])) {
    $sort = $_GET['sort_list'];
} 
else {
    // set default sort order
} 
```

`category-page.php?sort_list=price`我已经在 Chrome 的网络面板中验证了正在发送请求，但页面没有更新。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:28:27.210

更改这行代码：

```
$("#sort_list").on("change", function(e) { sort_products(); e.preventDefault(); e.stopPropagation(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:33:30.713

发送查询后，您需要对返回的内容进行处理。

```
$.ajax({   
    type: 'GET',                                   
    url: 'category-page.php',         
    data: 'sort_list='+queryString
})
.done(function(data) {
    // if your php code returns the html you can make something like this
    // the var data will be the html code
    $('#your-container').html(data)
}) 
```

# java - 部署到 Tomcat 时出错：tomcatManager 状态码：404，ReasonPhrase：未找到

> ID：14502447
> 
> 赞同：0
> 
> 时间：2013-01-24T13:26:47.993
> 
> 标签：java, tomcat7

我在[本主题中创建 Spring 配置时遇到问题](https://stackoverflow.com/questions/14461319/tomcat-fail-application-at-context-path-employee-could-not-be-started#comment20143215_14461319)

现在我正在尝试使用 tomcat7-maven-plugin 将我的 war 文件从 IntelliJ IDEA 部署到 tomcat 7，但我面临另一个问题。

这是 pom.xml 的设置：

```
<build>
    <finalName>employee-list</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0</version>
            <configuration>
                <url>http://127.0.0.1:8080/employee-list</url>
                <server>TomcatServer</server>
                <path>/employee-list</path>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这是 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>employee-list</display-name>

    <!-- Spring MVC configurations-->

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-security.xml
            /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/employee/*</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Spring Security configurations-->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

所以，我使用`org.apache.tomcat.maven:tomcat7-maven-plugin:2.0:deploy -e`tomcat7-maven-plugin 并得到这个调试日志：

```
[INFO] <<< tomcat7-maven-plugin:2.0:deploy (default-cli) @ employee <<<
[INFO] 
[INFO] --- tomcat7-maven-plugin:2.0:deploy (default-cli) @ employee ---
[INFO] Deploying war to http://127.0.0.1:8080/employee-list  
Uploading: http://127.0.0.1:8080/employee-list/deploy?path=%2Femployee-list
Uploaded: http://127.0.0.1:8080/employee-list/deploy?path=%2Femployee-list (27914 KB at 8258.5 KB/sec)

[INFO] tomcatManager status code:404, ReasonPhrase:Not Found
[INFO] <html><head><title>Apache Tomcat/7.0.28 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 404 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The requested resource () is not available.</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/7.0.28</h3></body></html>
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12.686s
[INFO] Finished at: Wed Jan 23 22:03:27 EET 2013 
```

在 localhost_access_log 我得到这一行：

```
127.0.0.1 - - [23/Jan/2013:22:03:23 +0200] "PUT /employee-list/deploy?path=%2Femployee-list HTTP/1.1" 404 952 
```

在 tomcat7-stdout 我得到：

```
янв 23, 2013 9:44:23 PM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Parse error in application web.xml file at jndi:/localhost/employee-list/WEB-INF/web.xml
org.xml.sax.SAXParseException; systemId: jndi:/localhost/employee-list/WEB-INF/web.xml; lineNumber: 25; columnNumber: 15; Error at (25, 15) : org.apache.catalina.deploy.WebXml addServlet
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2719)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1054)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)

    ...

    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addServlet
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:855)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
    ... 46 more

янв 23, 2013 9:44:23 PM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Occurred at line 25 column 15
янв 23, 2013 9:44:23 PM org.apache.catalina.startup.ContextConfig configureStart
SEVERE: Marking this application unavailable due to previous error(s)
янв 23, 2013 9:44:23 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
янв 23, 2013 9:44:23 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/employee-list] startup failed due to previous errors 
```

第 25 行位于 bean 的末尾：

```
<servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

**有人可以告诉我哪里出错了吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:47:11.510

`<url>`在配置中`tomcat7-maven-plugin`是 Tomcat 管理器 URL，而不是应用程序 URL：

```
<url>http://127.0.0.1:8080/manager/html</url> 
```

**也可以看看：**

*   [`tomcat7:deploy`](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/deploy-mojo.html)

# amazon-web-services - Amazon S3 存储桶策略引用

> ID：14502448
> 
> 赞同：6
> 
> 时间：2013-01-24T13:26:49.083
> 
> 标签：amazon-web-services, amazon-s3, policy, bucket, referer

我正在尝试编辑我的 S3 存储桶配置，以使第 3 方站点无法链接到其中的内容。还有一个额外的好处是他们只能访问我的域中的内容，而不是补充的 s3bucket.amazon-east.amazonaws.com 或类似的东西。

该文档有一个完全用于此的示例，但是当我在下面为我的网站复制/粘贴/修改时它不起作用？我仍然收到 403 错误。当我只取出条件部分时，它允许完全访问，因此引用部分只有一个问题。

这是一段如此短的代码，我正在把头撞到墙上......希望第二双眼睛可以启发我一些可能很明显我遗漏的东西？

或者，这可能没有任何问题，并且其他地方可能还有我没有设置/考虑的其他配置？

谢谢阅读。

```
{
    "Version": "2008-10-17",
    "Statement": [
        {
            "Sid": "fml",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::www.mysite.com/*",
            "Condition": {
                "StringLike": {
                    "aws:Referer": [
                        "http://mysite.com/*",
                        "http://www.mysite.com/*"
                    ]
                }
            }
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:53:04.590

您是否为您的存储桶启用了日志记录？

如果这样做，您可以检查日志以验证引用者是否与那些 403 Access Denied 消息一起被记录，并且这是您所期望的。如果不是，那么问题不在于存储桶配置——这是为什么浏览器没有发送引用者的问题。

如果您没有启用日志记录，则启用日志记录。

> 还有一个额外的好处是他们只能访问我的域中的内容，而不是补充的 s3bucket.amazon-east.amazonaws.com 或类似的东西。

是什么让你认为这是真的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T17:46:38.297

重要的是要注意，如果您的引荐来源网址最后包含 /* ，那么它将只允许来自该引荐来源网址的孩子的内容，而不是来自该引荐来源网址本身的内容。

因此，如果您还想包含您的主域，那么您需要这样做：

```
 "aws:Referer": [
                    "http://example.com",
                    "http://example.com/*",
                    "http://www.example.com",
                    "http://www.example.com/*"
                ] 
```

# ios - 在一个 ViewController 中为 UIImageView 和 UIView 添加手势

> ID：14502449
> 
> 赞同：0
> 
> 时间：2013-01-24T13:26:49.507
> 
> 标签：ios, objective-c, xcode, uiview, uigesturerecognizer

新手问题。在 IB 中，我将 UIImageView 添加到场景并以`-viewDidLoad`这种方式为其设置了一些手势：

```
image.userInteractionEnabled = YES;
image.multipleTouchEnabled = YES;

UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(controlPan:)];
[image addGestureRecognizer:pan];

pan.delegate = self;
// and few others gestures same way
... 
```

手势效果很好。之后在 IB 中，我将 UIView 添加到同一场景并实现与之前代码完全相同的手势，再次在`-viewDidLoad`. 但在那之后，UIView 和 UIImageView 的手势都停止工作了。我是否需要为此视图制作 .h 和 .m 并在那里实现手势识别器，或者原因可以在其他东西中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:02:32.823

如果您有相同的处理程序方法，则需要区分来自哪个对象手势，以便正确处理操作。如果为每个对象设置不同的处理程序方法，则不必关心调用了哪个对象手势。

# c++ - 如何创建 NULL/空 DACL？

> ID：14502450
> 
> 赞同：6
> 
> 时间：2013-01-24T13:26:50.557
> 
> 标签：c++, security, winapi, dacl

我需要授予每个人访问我正在创建的命名管道的权限。我知道这样做的方法是创建一个 NULL/空 DACL 并将其传递给`CreateNamedPipe`.

如何创建 NULL DACL？有人告诉我，这与为`LPSECURITY_ATTRIBUTES`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T13:34:00.977

像这样：

```
SECURITY_DESCRIPTOR SD;
InitializeSecurityDescriptor(&SD, SECURITY_DESCRIPTOR_REVISION);
SetSecurityDescriptorDacl(&SD, TRUE, NULL, FALSE); 
```

为简洁起见，我省略了错误检查。你不会那样做。

然后，当您调用时，`CreateNamedPipe`您可以像这样设置安全属性记录：

```
SA.nLength = sizeof(SA);
SA.lpSecurityDescriptor = &SD;
SA.bInheritHandle = TRUE; 
```

状态的文档`SetSecurityDescriptorDacl`：

> 当 pDacl 参数不指向 DACL 并且 bDaclPresent 标志为 TRUE 时，指定 NULL DACL。允许所有访问。不应将 NULL DACL 与对象一起使用，因为任何用户都可以更改 DACL 和安全描述符的所有者。这会干扰对象的使用。

所以，以上是如何做到这一点，但文档确实强调你不应该这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T13:36:18.833

这是我们在其中一个项目中使用的代码：

```
SECURITY_DESCRIPTOR  pSD;
SECURITY_ATTRIBUTES  SA;

if(!InitializeSecurityDescriptor(&pSD, SECURITY_DESCRIPTOR_REVISION))
    throw error;
if(!SetSecurityDescriptorDacl(&pSD, true, NULL, false))
    throw error;
SA.nLength = sizeof(SA);
SA.lpSecurityDescriptor = &pSD;
SA.bInheritHandle = true;
pSA = &SA;
...
FMapping = CreateFileMapping(INVALID_HANDLE_VALUE, pSA, PAGE_READWRITE, 0, 4096, p); 
```

此代码创建一个可供所有人访问的映射

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-19T20:51:39.783

我的情况与 Docker 容器开发有些不同。我安装了一个现有的 COM 应用程序，并希望通过 PowerShell 创建一个空 DACL。首先在组件服务中查找您的 AppID： [![在此处输入图像描述](../Images/66ac8e8d1ddc18385f816eee471e06b0.png)](https://i.stack.imgur.com/Ay5bo.png)

然后运行以下命令：

```
$appid = "{00020906-0000-0000-C000-000000000046}"  
$app = get-wmiobject -query ('SELECT * FROM Win32_DCOMApplicationSetting WHERE AppId = "' + $appid + '"') -enableallprivileges  
$sdRes = $app.GetLaunchSecurityDescriptor()  
$sd = $sdRes.Descriptor  
[System.Management.ManagementBaseObject[]] $newDACL = $null  
$sd.DACL = $newDACL  
$app.SetLaunchSecurityDescriptor($sd) 
```

现在，每个人都可以访问该应用程序（本示例中为 MS Word 97-2003），并具有其他答案和 MS 文档中提到的所有安全风险。

旁注 - 在您的情况下使用空 DACL 而不是空的。空 DACL 阻止所有用户的权限： [https](https://techcommunity.microsoft.com/t5/ask-the-directory-services-team/null-and-empty-dacls/ba-p/396323) ://techcommunity.microsoft.com/t5/ask-the-directory-services-team/null-and-empty-dacls/ba-p/396323 。

# sql-server - 使用 pg_dumpl 的问题

> ID：14502451
> 
> 赞同：0
> 
> 时间：2013-01-24T13:26:51.303
> 
> 标签：sql-server, heroku, connection, pg-dump

好的，问题来了：我想上传一个我在本地获得的数据库，并且我在 localhost 中使用，但是，当我使用时：

```
PGPASSWORD=mypassword pg_dump -Fc --no-acl --no-owner -h localhost -U root app_db > app_db.dump 
```

我总是得到：

```
pg_dump: [archiver (db)] connection to database "app_db" failed: could not connect to server: Connection refused
 Is the server running on host "localhost" and accepting
 TCP/IP connections on port 5432?
could not connect to server: Connection refused
 Is the server running on host "localhost" and accepting
 TCP/IP connections on port 5432?
could not connect to server: Connection refused
 Is the server running on host "localhost" and accepting
 TCP/IP connections on port 5432? 
```

我认为问题是我写的是 localhost 而不是我的 heroku 应用程序地址，谁能告诉我如何获得正确的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:37:41.043

您需要安装并运行 postgresql

# java - 如何解决绝对路径未知的文件？

> ID：14502452
> 
> 赞同：1
> 
> 时间：2013-01-24T13:26:53.013
> 
> 标签：java, file, file-io, path

我正在开发一个 java 桌面应用程序。将要安装在最终用户计算机上的文件夹是：Sources、Images 和...。Sources 文件夹是程序源存在的文件夹（Classes），Images 文件夹是程序需要它们的图像存在的地方。现在在程序中，我应该如何处理我的图像？

我的意思是我不知道我的图像文件的绝对路径（因为我不知道用户决定在哪里安装程序），只知道它们将在图像文件夹中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:31:36.303

我不知道解决此问题的最佳解决方案，但如果我遇到像您这样的问题，我将执行以下步骤：

1.  您可以使用环境变量，用户（或您）可以添加您的应用程序路径（或您想要的其他路径）。
2.  或者像[疯子](https://stackoverflow.com/questions/14502452/java-how-to-address-the-files-that-their-absolute-path-is-unknown/14502545#comment20213463_14502452)建议“使用相对路径”
3.  或者您可以要求用户为此目的选择目录，并将有关它的信息保存到配置文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:31:24.650

可以相对于正在运行的程序确定图像文件夹，或者用户必须告诉您图像的存储位置。用户可能想要来自多个目录的图像，在这种情况下，您必须扫描它们或询问用户它们在哪里。例如，添加库功能是音乐程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:31:26.190

如果您的程序将从包含 Sources 和 Images 文件夹的目录开始，那么您可以通过 Images/imageFile 引用它们。

# java - 解析包含非整数的字符串时出现 NumberFormatException

> ID：14502456
> 
> 赞同：-4
> 
> 时间：2013-01-24T13:27:01.167
> 
> 标签：java, integer

我得到：`java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)`

当我尝试使用时：

```
Integer.parseInt("h"); 
```

或者

```
Integer.parseInt("h".toString()); 
```

但我期待它像`atoi`在 c 中一样工作。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:28:27.493

文字“ `String`h”显然不代表一个有效的整数。

假设`h`是你的`String`变量，你不需要使用引号：

```
String h = "1234";
Integer.parseInt(h); 
```

**更新：** 函数[atoi](http://www.cplusplus.com/reference/cstdlib/atoi/)返回输入参数的整数值，如果输入值无效则返回零。在 Java 中，你可以这样写：

```
public static int javaAToI(String text) {
   try {
      return Integer.parseInt(text);
   } catch (NumberFormatException e) {
      return 0;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:33:29.623

这仅在您将其解析为`String`类似于`Integer`.

您正在将其解析为`"h"`无法解释为整数的文字。如果您解析它`"123"`，它将起作用。

可以在[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)找到您的方法的文档，并且文档通常是开始搜索的好地方。

正如其他人还建议的那样-如果`h`是您的变量，请以这种方式解析它：`Integer.parseInt(h);`.

**编辑：**

如果您想将 a 转换`char`为`int`，这就是您的答案：[get char value in java](https://stackoverflow.com/questions/4329275/get-char-value-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:55:08.120

Java 正在做它应该做的事情。在`atoi`中，当您返回 0 时，您如何知道您的字符串是否包含 0，或者它是否包含不可解析的字符串？Java 通过让您知道您已尝试解析不包含可解析值的字符串来处理此问题……理想情况下，您可以返回并修复传入不可解析值的代码。

在您的情况下，如果您想像 C 一样处理这种情况，如果您捕获到 NumberFormatException，您可以只返回一个 0。（如果您可以返回并确保您没有传递错误的字符串，那可能会更好，但这并不总是可能的。）

# backbone.js - 在我的 Collection 上调用 fetch 会实例化它在 Backbone 中接收到的所有模型吗？

> ID：14502461
> 
> 赞同：2
> 
> 时间：2013-01-24T13:27:20.617
> 
> 标签：backbone.js

我的 Backbone 应用程序中有此代码：

```
app.Collections.quotes = new app.Collections.Quotes();
app.Collections.quotes.fetch(); 
```

我可以看到网络选项卡中返回了一个对象数组，但是当我展开集合时，里面的模型数组为 0。当在新集合上运行 fetch() 时，它们是否被实例化为模型？

这是我的收藏：

```
app.Collections.Quotes = Backbone.Collection.extend({
  model: app.Models.Quote,
  url: function() {
    return app.Settings.apiUrl() + '/quotes';
  }
}); 
```

编辑：

```
app.Collections.quotes.fetch({
        success: function(){
            app.Utils.ViewManager.swap('section', new app.Views.section({section: 'quotes'}));
        }
    }); 
```

在我的模型中：

```
idAttribute: 'Number', 
```

这是解决办法！感谢帮助。丹在评论中为我指明了正确的方向……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:37:14.793

调用`fetch()`Collection 会尝试将 JSON 响应填充到模型中：[Collection#fetch](http://backbonejs.org/#Collection-fetch)。

您的服务器是否确实返回了有效的 JSON 对象数组？

你对你的报价模型有任何验证吗？我很确定 Backbone 在填充集合之前验证每个模型，只填充通过的模型。因此，如果存在，请检查您的`Model#validate`方法是否正常工作。

你不应该需要一个 ID（尽管如果你想编辑它们显然是必需的）。

# java - Apache Struts 项目中未使用的文件

> ID：14502462
> 
> 赞同：1
> 
> 时间：2013-01-24T13:27:20.953
> 
> 标签：java, apache, jsp, servlets, struts

我最近继承了一个使用 Apache Struts 编写的项目，它有点乱，有很多未使用的文件，如 jsp、java、css。

有没有一种简单的方法可以识别未使用的文件而无需手动检查？这是一个非常大的应用程序，所以我真的希望没有必要！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T09:00:10.390

尽管人们喜欢告诉你，是的，这是可以做到的——我最近问了这个问题——首先有两种方法可以做到这一点，它表明了对 SO 中数学统计性质的惊人误解。

基本上，您可以旨在创建一个文件未被使用的非常大的“概率”，当人们认为您不应该这样做时，这是“理论”对“常识”的巨大胜利。

在我的示例中，有大约十年的实时数据可供使用。在您可以排除该文件是否是从未提供过的死文件之前，在项目中的文件上获得阳性结果的最低频率发生率非常重要。最低使用文件数越高越好。

两种方式：

*   使用像这个工具这样的 apache 日志分析器[http://www.apacheviewer.com/features.php](http://www.apacheviewer.com/features.php)（付费使用）我实际上并没有采用这种方法，所以你的里程可能会有所不同，它确实取决于你的日志记录，但这在理论上是一种合理的方法
*   @Michael Hampton 从操作系统获取最后访问日期时间的技巧

OP

[https://serverfault.com/questions/513587/apache-log-can-they-be-used-to-see-if-a-file-is-ever-called-used/513618#513618](https://serverfault.com/questions/513587/apache-log-can-they-be-used-to-see-if-a-file-is-ever-called-used/513618#513618)

# c# - 带分号的 Rect.ToString() 格式 ("x;y;w;h")

> ID：14502463
> 
> 赞同：0
> 
> 时间：2013-01-24T13:27:28.553
> 
> 标签：c#, csv, string-formatting, rect

我想知道是否有人可以帮助我。

我有一个使用配置文件来存储窗口位置的应用程序，当我存储位置时，我将它作为一个 Rect 并做一个简单的`ConfigSection.SetValue("Location", value.ToString());`

99% 的时间这个字符串被写为逗号分隔的值`x,y,w,h`，但是最近有用户抱怨我们的应用程序在打开时引发了异常

看完之后我发现在解析窗口位置时引发了无效格式异常，我查看了配置文件，该位置已被写入`x;y;w;h,`使用分号作为分隔符。

我查看了区域设置并找到了列表分隔符，但是当我尝试将其更改为分号（作为复制问题的尝试）时，矩形字符串仍以逗号分隔。这意味着我无法在本地复制，也不知道是什么导致了问题。

任何关于分隔符可能如何变化的见解将不胜感激。

谢谢

基兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:30:28.273

用于`InvariantCulture`：

```
 ConfigSection.SetValue("Location", value.ToString(CultureInfo.InvariantCulture)); 
```

在命名空间`System.Globalization`中。

然后，字符串的格式将使用在所有计算机上完全相同的“通用”文化（并且不依赖于计算机的设置）。

# javascript - 只有第一次“点击”触发

> ID：14502465
> 
> 赞同：0
> 
> 时间：2013-01-24T13:27:37.560
> 
> 标签：javascript, jquery, click

我有一个页面，允许用户“推动”某人做某事

我有以下 html（它可以出现很多次，但我现在将显示两个）

```
<div class="nudgeHolder641">
    <a id="nudge" data-wl_id="641" data-nudge_for="415" data-nudge_from="63" href="#">Nudge</a>
</div>

<div class="nudgeHolder1172">
    <a id="nudge" data-wl_id="1172" data-nudge_for="415" data-nudge_from="63" href="#">Nudge</a>
</div> 
```

我有以下代码来操作点击：

```
$(document).ready(function(){
    $("#nudge").click(function() {

        var nudge_from = $( '#nudge' ).data( 'nudge_from' );
        var nudge_for = $( '#nudge' ).data( 'nudge_for' );
        var wl_id = $( '#nudge' ).data( 'wl_id' );

        var dataString = 'nudge_from='+ nudge_from + '&nudge_for=' + nudge_for + '&wl_id=' + wl_id;

        $.ajax({
            type: "POST",
            url: "/pages/includes/ajax/nudge.php",
            data: dataString,
            success: function() {

                $('.nudgeHolder'+wl_id).html("<h3>Fantastic!</h3>")
                .append("<p>Nudge Sent!</p>")
                .hide()
                .fadeIn(1500, function() {
                  //$('#message').append("<img id='checkmark' src='/images/icons/check.png' />");
                });
            }
        });
    return false;
    });
}); 
```

单击时仅触发链接的第一个实例，当我单击第二个“轻推”链接时，没有任何反应，第一个实例正常工作。如果页面上只显示一个链接，那么它可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:30:08.413

您正在绑定一个 ID，而一个 ID 在 DOM 中只能存在一次。尝试将其更改为类：

```
<div class="nudgeHolder641">
    <a class="nudge" data-wl_id="641" data-nudge_for="415" data-nudge_from="63" href="#">Nudge</a>
</div>

<div class="nudgeHolder1172">
    <a class="nudge" data-wl_id="1172" data-nudge_for="415" data-nudge_from="63" href="#">Nudge</a>
</div> 
```

然后绑定使用：

```
$(function(){
$(".nudge").click(function() {

    var nudge_from = $( this ).data( 'nudge_from' );
    var nudge_for = $( this ).data( 'nudge_for' );
    var wl_id = $( this ).data( 'wl_id' );

    var dataString = 'nudge_from='+ nudge_from + '&nudge_for=' + nudge_for + '&wl_id=' + wl_id;

    $.ajax({
        type: "POST",
        url: "/pages/includes/ajax/nudge.php",
        data: dataString,
        success: function() {

            $('.nudgeHolder'+wl_id).html("<h3>Fantastic!</h3>")
            .append("<p>Nudge Sent!</p>")
            .hide()
            .fadeIn(1500, function() {
              //$('#message').append("<img id='checkmark' src='/images/icons/check.png' />");
            });
        }
    });
return false;
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:31:33.730

与其拥有唯一的`div`类，不如将它们用作标签上的 ID `a`。像这样：

```
<div class="nudge">
    <a id="nudgeHolder641" data-wl_id="641" data-nudge_for="415" data-nudge_from="63" href="#">Nudge</a>
</div>

<div class="nudge">
    <a id="nudgeHolder1172" data-wl_id="1172" data-nudge_for="415" data-nudge_from="63" href="#">Nudge</a>
</div> 
```

然后，在 jQuery 中；你需要：

```
$(document).ready(function(){
    $(".nudge a").click(function() { 
```

* * *

### 编辑

没有注意到你`$('#nudge')`到处都在使用。正如[ryadavilli](https://stackoverflow.com/users/1787888/ryadavilli)指出的那样；替换`$('#nudge')`为`$(this)`.

# c++ - C++ MFC CComboBox 为空

> ID：14502469
> 
> 赞同：2
> 
> 时间：2013-01-24T13:27:54.463
> 
> 标签：c++, mfc, ccombobox

我有一个小组合框，我想用 6 个条目填充它...。我写了这段代码：

```
CComboBox* dropdownList = ((CComboBox*)GetDlgItem(IDC_PROGRAMDROPDOWN));
dropdownList->Clear();
dropdownList->AddString(L"test");
dropdownList->AddString(L"test2");
dropdownList->InsertString(2,L"test3");
dropdownList->InsertString(3,L"test4");
dropdownList->InsertString(4,L"test5"); 
```

如您所见，我尝试了`AddString()`, 和`InsertString()`. 两者都没有效果。我也尝试过它`AddString()`应该是初始化它的正确方法。

但是，我的组合框是空的。我已经调试过了，这条线被命中但没有效果。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:06:06.457

在对话框编辑器中，确保调整 ComboBox 项的大小，使其高度足以在 ComboBox 展开时包含所有项。默认情况下，它只会是 ComboBox 的“编辑控件”位的高度，它限制了展开高度。

因此，在对话框编辑器中，单击组合框的下拉按钮位，您应该会看到拖动手柄发生了一些变化。拖出新尺寸以考虑下拉列表中的所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:21:37.480

感谢您的所有回答。但这是我的 IDE 的一个丑陋的失败 -.-。我刚刚重新创建了 UI 元素，它工作了......

我用相同的属性重新创建了它（复制和粘贴）

# ruby-on-rails - private_pub gem 给出“未定义的方法‘publish_to’”错误

> ID：14502473
> 
> 赞同：0
> 
> 时间：2013-01-24T13:28:03.937
> 
> 标签：ruby-on-rails, faye, private-pub

我正在使用 Rails 创建小型聊天应用程序，我正在使用 Ryan 的 private_pub（建立在 faye 之上）gem。我按照他的截屏视频遵循了所有步骤，但我无法让它工作。我得到以下错误

```
undefined method `publish_to' for #<#<Class:0x007f95964f5398>:0x007f95925e6378> 
```

我在 chat.js.coffee.erb 中包含了 publish_to

```
msgJson = (message)->
    time = $.now()
    <% publish_to "/chats/new" do %>
      append_chat_message(time,message)
    <% end %> 
```

我的瘦服务器和 faye 服务器都在运行，我使用下面的命令启动 he faye

```
rackup private_pub.ru -s thin -E production 
```

我在模板中包含了 subscribe_to 行

```
<%= subscribe_to "/chats/new" %> 
```

并且还添加了资产

```
//= require private_pub 
```

我不知道，它哪里出错了。任何帮助都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T12:55:48.990

你必须安装

```
gem 'thin' 
```

然后再次重新启动服务器。它对我有用。希望它也对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:59:52.837

我自己解决了这个问题，如果我们使用 Private_pub 只有 Rails 应用程序可以发布到频道，我们需要在 ajax 调用的回调文件中编写 pusblish_to 函数。

# wcf - 在 WCF 中实现队列

> ID：14502479
> 
> 赞同：0
> 
> 时间：2013-01-24T13:28:19.317
> 
> 标签：wcf

我有一个简单的 WCF 服务，它在指定为参数的位置创建一个目录。该服务作为 Windows 服务托管并在管理员帐户下运行。

InstanceContextMode 是 Single，Concurrency 也是。

该方法在创建后返回目录位置的字符串。

客户端正在使用 ASP.NET 从另一台计算机访问此服务。他有一个用例，他在几秒钟内多次点击页面上的按钮，就像在 2 秒内点击 5 次一样。发生的事情是该服务仅创建 2 或 3 个文件夹，而不是全部 5 个。

我知道 WCF 中有一个默认的排队机制，对于我的服务，它要么不起作用，要么我没有编写它来使用该机制。

我该如何解决这个问题。

这是按钮单击的 ASP.NET 代码

```
protected void Button1_Click(object sender, EventArgs e)
{
    ClientClass objClientClass = new ClientClass();

    string returnValue = string.Empty;
    Random random = new Random();

    string uid = random.Next().ToString();
    returnValue = objClientClass.StartWorkflow(uid);
    Label1.Text = returnValue;

} 
```

这是主机的 app.config：

```
<configuration>
  <system.diagnostics>
   <sources>
    <source name="System.ServiceModel"
               switchValue="All"
               propagateActivity="true">
    <listeners>
      <add name="traceListener" />
    </listeners>
   </source>
  <source name="System.ServiceModel.MessageLogging"
               switchValue="All"
               propagateActivity="true">
    <listeners>
      <add name="traceListener" />
    </listeners>
  </source>
</sources>
<sharedListeners>
  <add name="traceListener"
          type="System.Diagnostics.XmlWriterTraceListener"
          initializeData="Traces.svclog" />
</sharedListeners>

</system.diagnostics>  
<system.web>
<compilation debug="true"></compilation>
 </system.web>
 <system.serviceModel>
  <diagnostics>
  <messageLogging logEntireMessage="true"
                  logMessagesAtServiceLevel="false"
                  logMessagesAtTransportLevel="false"
                  logMalformedMessages="true"
                  maxMessagesToLog="5000"
                  maxSizeOfMessageToLog="2000">
  </messageLogging>
</diagnostics>
<behaviors>
  <serviceBehaviors>
    <behavior name="NewBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceThrottling maxConcurrentCalls="1" maxConcurrentSessions="5" maxConcurrentInstances="5" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="NewBehavior" name="Utilities.WS.SampleWebService.Jobs">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration=""
        contract="Utilities.WS.SampleWebService.IJobs" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add     baseAddress="http://00.00.000.00:8732/Utilities.WS.SampleWebService.Jobs" />
      </baseAddresses>
      </host>
    </service>
  </services>
 </system.serviceModel>
</configuration> 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T16:41:24.617

步骤 1\. 从客户端 ping（这是服务器端 ASP.NET 代码，而不是浏览器），它可以到达托管 WCF 服务的机器吗？位于您的网络服务器和 WCF 托管位置之间的防火墙？

STEP 2\. SVC log 从您的配置文件中设置 svclog，

```
<configuration>
   <system.diagnostics>
      <sources>
            <source name="System.ServiceModel" 
                    switchValue="Information, ActivityTracing"
                    propagateActivity="true">
            <listeners>
               <add name="traceListener" 
                   type="System.Diagnostics.XmlWriterTraceListener" 
                   initializeData= "c:\log\Traces.svclog" />
            </listeners>
         </source>
      </sources>
   </system.diagnostics>
</configuration> 
```

然后从命令提示符使用 SvcTraceViewer - 寻找红色。

第 3 步：在您的操作中添加更多日志记录，看看是否实际执行了任何操作

[http://msdn.microsoft.com/en-us/library/ms732023(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms732023(v=vs.110).aspx)

# database - 数据库分析

> ID：14502486
> 
> 赞同：1
> 
> 时间：2013-01-24T13:28:31.623
> 
> 标签：database, analysis

我应该分析一个包含 200 多个表和 100 多个存储过程和一些视图的旧数据库。

我应该找出当前未使用的表。访问所有关系，报告过时的关系，找出丢失的关系，未使用的列等

今天我花了 5 个小时，只能完成 7-8 个表格，我对如何创建报告感到困惑，我应该使用 Visio 还是 excel 或其他什么？

请指教！

谢谢， 阿夏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:02:32.977

如果您使用的是 SQL Server，我会推荐 Red Gate 工具。 [http://www.red-gate.com/](http://www.red-gate.com/)

我相信从 SQL Server 到 Oracle 再到 MySQL 的所有东西都有工具来监控事务、谁连接到数据库以及他们正在运行什么查询。我会从那里开始。

您还可以运行查询以查看是否有任何字段只有 NULL，暗示它们从未使用过。

要找出正在使用的列是比较困难的。如果您有使用数据库的应用程序的源代码，我会去那里尝试编写一个程序来解析所有数据库调用并生成报告。不过，这可能非常困难。

另一个想法（即使它不是最好的）是制作数据库的副本并切换您的系统以在开发机器上使用恢复的副本。然后通过修改数据库副本然后记录问题来证明您对未使用的列/表的预感。您是否删除了一个表并且应用程序崩溃了？然后很重要！（我意识到这是一件非常痛苦的事情，因为您无法测试所有内容。）

不幸的是，对于数据库模式，您最终会暴露出许多应用程序最可能依赖的接口。可以这么说，猫已经从袋子里出来了。我认为在做了一些研究之后，回过头来说最好保持原样是可以接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:19:04.250

这绝对是您无法在任何时候手动完成的任务，您需要使用其他工具。

以下是您可能想做的几件事和推荐的工具：

*   检查哪些数据库对象未被任何其他对象引用，并在初始分析中跳过它们。你可能会发现很多这样的东西。工具 - [ApexSQL 清洁](http://www.apexsql.com/sql_tools_clean.aspx "ApexSQL 清理")
*   安装一些审计工具并运行几天，看看哪些表/存储过程被使用得最多。工具 - [ApexSQL 审计](http://www.apexsql.com/sql_tools_audit.aspx "ApexSQL 审计")
*   检查您的应用程序并查看那里正在使用哪些对象。如果有一些存储过程或表未被任何应用程序代码引用，您可能可以将它们标记为可以删除。如果您的代码只是 .NET，那么您可以使用 ApexSQL Clean 来执行此操作，但我建议您使用好的旧 grep 函数。
*   完成分析后，您可能需要考虑重构一些表或其他对象以适应新要求。工具 - [ApexSQL 重构](http://www.apexsql.com/sql_tools_refactor.aspx)

一般来说，使用 Red-Gate 或 Idera 的工具不会出错，但我更喜欢 ApexSQL

# sql-server - 如何确定 ) 错误在哪里

> ID：14502490
> 
> 赞同：-1
> 
> 时间：2013-01-24T13:28:37.460
> 
> 标签：sql-server

我有以下 where 语句，并且我不断收到与 a ) 相关的错误，并且当我运行它时，会弹出不正确的语法错误。我不知道我在哪里犯了错误，我已经重写了好几次。

```
WHERE     (dbo.COL_V_Cost.RRDD NOT LIKE '12%') AND (dbo.COL_V_COST.RRDD NOT LIKE '13%') AND (dbo.COL_V_Cost.RRDD NOT LIKE '2706%') AND (dbo.COL_V_Cost.RRDD NOT LIKE '2707%') AND (dbo.COL_V_Cost.RRDD NOT LIKE '2331%') AND (dbo.COL_TBL_VCOURSE.DEP_TYP_CD = 'H&S') AND (COL_V_COST.TNG_SYS_NR NOT ('0113','0197','0290','0489','0542','0974','1318','1322','1397','1401','1444','1446','1580')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:31:11.883

您缺少`IN`最后一个过滤器：

```
WHERE (dbo.COL_V_Cost.RRDD NOT LIKE '12%') 
  AND (dbo.COL_V_COST.RRDD NOT LIKE '13%') 
  AND (dbo.COL_V_Cost.RRDD NOT LIKE '2706%') 
  AND (dbo.COL_V_Cost.RRDD NOT LIKE '2707%') 
  AND (dbo.COL_V_Cost.RRDD NOT LIKE '2331%') 
  AND (dbo.COL_TBL_VCOURSE.DEP_TYP_CD = 'H&S') 
  AND (COL_V_COST.TNG_SYS_NR NOT IN ('0113','0197','0290','0489','0542','0974','1318','1322','1397','1401','1444','1446','1580'))
                                  ^-- this is missing 
```

正确的语法是`NOT IN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:31:26.337

你的最终 AND 应该是“NOT IN”

# web-applications - Glassfish2.1 在运行 JSF2.1 应用程序时需要 JSP

> ID：14502491
> 
> 赞同：0
> 
> 时间：2013-01-24T13:28:39.440
> 
> 标签：web-applications, jsf-2, glassfish-2.x

我正在尝试在 Glassfish2.1 上运行 jsf 2.1 应用程序。WAR 文件部署成功，但是当我运行应用程序时，它给出了 HTTP 404 错误。在日志中，我可以看到以下内容

```
SEVERE: PWC6117: File "C:\Project\CA\workspace\.metadata\.plugins\com.sun.enterprise.jst.server.sunappsrv91\v2domain2\applications\j2ee-modules\fal\search.jsp" not found 
```

我想知道为什么它需要 JSP，它应该寻找的 URL 是 fal/search.jsf。我已经在 J​​Boss7.1 上运行了这个应用程序，它在那里运行得很好。我的应用程序中没有 JSP，我创建了 .xhtml 文件。这是我的**web.xml的相关内容**

```
<servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.faces</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
 </servlet-mapping>

<!-- Maintain page state on client side  --> 
 <context-param>
  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
  <param-value>client</param-value>
 </context-param> 
```

和**faces-context.xml**

```
<navigation-rule>
    <from-view-id>/search.xhtml</from-view-id>
    <navigation-case>
      <from-outcome>success</from-outcome>
      <to-view-id>/info.xhtml</to-view-id>
    </navigation-case>
  </navigation-rule> 
```

我尝试在 web-xml 中的这个 servlet 的 url-pattern 中添加 *.jsp，但这也不起作用。我有

```
javax.servlet.ServletException: PWC1232: Exceeded maximum depth for nested request dispatches: 20 
```

那它为什么要找JSP？？有没有办法解决这个问题？

* * *

我们无法在 Glassfish 2.1 上解决这个问题。最后我们迁移到 JBoss 7.1。

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-15T10:26:19.957

glassfish2.x 似乎不适用于 jsf2.x。我们要么必须将 glassfish 升级到 3.x，要么将 jsf 降级到 1.x。我升级了 glassfish 以使其工作。

# extjs - 将侦听器添加到具有给定类的所有元素

> ID：14502492
> 
> 赞同：0
> 
> 时间：2013-01-24T13:28:40.227
> 
> 标签：extjs

我通常是一名 jQuery 开发人员，必须从事 extJs 项目。这是没有任何扩展的 ExtCore v. 3.1.0（目前还不可能进行更新）

所以现在我的问题......我需要类似于这个jQuery代码的东西：

```
$(document).on('focusin', 'input[type="text"]', function(event){
  $(this).empty();
}); 
```

但我找不到任何东西可以将 Eventlistneres 添加到多个元素。仅使用 extCore 是否可行？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:35:30.397

您可以[`addListener`](http://docs.sencha.com/core/#Ext.Element-methods)与委托一起使用（或使用`on`它是 的简写`addListener`）：

> 将事件处理程序附加到此元素。上的简写版本是等效的。

委托是一个简单的选择器，用于过滤目标或寻找目标的后代。

例如：

```
var el = Ext.getBody();
el.on('click', function (event, elem) {
   .
   .
   .
},
this, {
    delegate: 'input[type="text"]'
}); 
```

# json - 使用 Scala 驱动程序对 MongoDB 和 AJAX 进行单一序列化

> ID：14502493
> 
> 赞同：0
> 
> 时间：2013-01-24T13:28:41.607
> 
> 标签：json, mongodb, scala

我有一个需要实现的多模块化 Scala 应用程序 abd：

*   面向 Ajax 的 JSON 序列化
*   针对 MongoDB 的 BSON 格式的序列化。

我的问题是我想避免使用 MongoDB JSON Api 转换为 JSON。

是否有一种聪明的方法来开发单个序列化层并将 MongoDB 从 JSON 转换为 BSON 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:55:21.287

我认为您可以使用杰克逊映射器来获取 json，并使用 Salat DAO（iirc 使用相同的杰克逊映射器）将您的对象存储在 Mongo 中。Salat 仅适用于案例类，不确定这是否是一个问题。

# vb.net - 如何将 MSIL 代码转换为 C#？

> ID：14502499
> 
> 赞同：1
> 
> 时间：2013-01-24T13:29:11.547
> 
> 标签：vb.net, reflection

我想使用反射在我的网页上打印方法体。请参阅附加的图像文件，其中有一个 GetAge 方法。当我从下拉列表中选择此方法时，此方法的主体部分应显示在屏幕上。该方法在 DLL 文件中。如何在 VB.NET 中实现这一点

编辑：我如何成功地从 DLL 获取 MSIL 代码。现在我想使用后面的代码将该代码转换为 C# 代码。有没有办法做到这一点？

![方法体](../Images/b04213ead26e664497d0b7b8ab6b7d81.png)

# java - 如何在Java中获取包括转义序列在内的变量的真实值

> ID：14502507
> 
> 赞同：0
> 
> 时间：2013-01-24T13:29:34.090
> 
> 标签：java, xml, parsing, variables, escaping

我正在从 xml 文档解析为数组。在我的 xml 文档中有一些以这种格式表示的换行符：

```
&#13; 
```

如果我 sysout 数组列表，我的 Eclipse 控制台会用换行符正确显示它们。但是，是否有可能以某种方式显示该变量中真正保存的内容？

例子：

```
sysout(myarray[1]); 
```

电流输出：

```
xyz

xyz 
```

想要的输出：（或类似的东西）

```
xyz\n\nxyz 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:33:28.573

您可以使用[Apache Commons Lang 库](http://commons.apache.org/lang/)`escapeJava`中`org.apache.commons.lang.StringEscapeUtils`的方法。看看[javadoc](http://commons.apache.org/lang/api-2.1/org/apache/commons/lang/StringEscapeUtils.html)。[在此处](http://commons.apache.org/lang/download_lang.cgi)下载库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:14:01.163

您可以使用

```
string.replace("\n", "\\n"); 
```

# ruby-on-rails - 将值推送到数组时，nil:NilClass 的未定义方法“[]”

> ID：14502508
> 
> 赞同：3
> 
> 时间：2013-01-24T13:29:38.180
> 
> 标签：ruby-on-rails, ruby

我正在尝试创建一个内部包含数组的哈希：

```
# create new hash to store customers and their projects
@customers = Hash.new

# get all customers from Mite
Mite::Customer.all.each do |customer|
  @customers[customer.id] = {:name => customer.name, :projects => []}
end

# get all projects from Mite and store them in the :projects array
Mite::Project.all.each do |project|
  @customers[project.customer_id][:projects] << project # line 17
end 
```

`Mite::Project.all`并且`Mite::Customer.all`是外部 API (mite.yo.lk) 的方法。他们工作，我取回数据，所以这不是失败。

不幸的是，我必须这样做，因为 API 没有任何方法可以通过客户 ID 过滤项目。

那是错误信息：

```
undefined method `[]' for nil:NilClass 
```

和

```
app/controllers/dashboard_controller.rb:17:in `block in index'
app/controllers/dashboard_controller.rb:16:in `each'
app/controllers/dashboard_controller.rb:16:in `index' 
```

我不明白这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:40:34.453

@thorstenmüller 说的是正确的。看起来项目包含对陈旧客户的引用？

我会推荐防御性编码，只要它不会引入逻辑错误。就像是：

```
# get all projects from Mite and store them in the :projects array
Mite::Project.all.each do |project|
  if @customers[project.customer_id].present?
    @customers[project.customer_id] << project
  end
end 
```

同样，我只会在您的数据库中接受陈旧客户的情况下才建议这样做。

要注意的另一件事是 project.customer_id 是一致的类型（即始终是整数或字符串）：

```
# get all customers from Mite
Mite::Customer.all.each do |customer|
  @customers[customer.id.to_i] = {:name => customer.name, :projects => []}
end 
```

和

```
# get all projects from Mite and store them in the :projects array
Mite::Project.all.each do |project|
  @customers[project.customer_id.to_i][:projects] << project # line 17
end 
```

我个人已经被抓住了太多次了。

HTH 和最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:51:13.473

如果不定义客户是不可接受的，您可以提出更具体的错误，告诉您缺少哪个客户：

```
Mite::Project.all.each do |project|
  begin
    @customers[project.customer_id].fetch(:projects) << project
  rescue IndexError => error
    raise(error.class, "customer missing: #{project.customer_id}", error.backtrace)
  end
end 
```

另一种方法是创建客户而不是重新提出错误。

# ruby - 如何多次运行一个测试代码块？

> ID：14502509
> 
> 赞同：0
> 
> 时间：2013-01-24T13:29:38.727
> 
> 标签：ruby, loops, yield, block

我正在构建 Test-First-Teaching performance_monitor 并且可以进行第五次测试，但它失败了。

为什么我的块只运行一次？

这是我的代码：

```
require "time"
t = Time.now
def measure x=0
start = Time.now
    yield x 
endt = Time.now - start
    end
measure(4){ |x| x.times do Time.now - t end} 
```

这是错误：

```
*Error____
Performance Monitor
  takes about 0 seconds to run an empty block
  takes exactly 0 seconds to run an empty block (with stubs)
  takes about 1 second to run a block that sleeps for 1 second
  takes exactly 1 second to run a block that sleeps for 1 second (with stubs)
  runs a block N times (FAILED - 1)

Failures:

  1) Performance Monitor runs a block N times
     Failure/Error: n.should == 4
       expected: 4
            got: 1 (using ==) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:42:21.357

Think about it like this: Your `measure` method is the one that's in charge of making sure the block that gets passed to it is run the correct number of times. So the block you pass to `measure` should only include the code that should be run in a *single* iteration.

For a bare-bones example (theme shamelessly ripped from Gary Bernhardt's ["WAT"](https://www.destroyallsoftware.com/talks/wat) talk):

```
def repeat_x_times(x)
    # This runs the passed block x times:
    x.times do
        yield
    end
end

repeat_x_times(16) do
    # This is what should happen in a single iteration:
    puts 0.0 / 0.0
end

puts 'Batman!' 
```

The other cool thing about blocks is that you can always access the variables in the same scope as the block (usually local variables), regardless of where the yield happens:

```
i = 3
4.times {i += 1} # We can still get to i!
puts i           # Prints "7" 
```

Combining the two concepts for a slightly more involved example:

```
array = [3, 6, 9, 12, 15]
sum = 0
array.each do |item|
    # In the first iteration, item is 3; in the second it's 6, and so on:
    sum += item
end
puts sum 
```

Now, I know I haven't answered your question directly, but it sounds like you're learning Ruby, so hopefully this is more useful than a cut-n-paste... Anyway, just play around with this until you get it, and pretty soon you'll be wishing all languages had such a useful feature!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:42:20.087

我想出的是：

```
 require "time"

    def measure (x=1)
        elapsed = 0
        x.times do
        start = Time.now
        yield
        endt = Time.now
        elapsed += endt - start
   end
   elapsed / x
   if elapsed < 1 
        time = "milliseconds"
   else
        time = "seconds"

    end
    puts "We ran this block #{x} times \nand it took #{elapsed} #{time}"
    end

    measure(50000){puts "Run a block" } 
```

# git - 如何使用 Git 组织一组科学实验

> ID：14502510
> 
> 赞同：18
> 
> 时间：2013-01-24T13:29:40.503
> 
> 标签：git, scientific-computing

我正在对模型进行实验，工作流程如下：

*   我在模型中工作（Python 中的软件）
*   我更改了一些参数并进行了实验
*   然后，我将存储实验结果（作为泡菜）。
*   然后，我将使用另一个软件（IPython Notebooks）分析（腌制）结果。

我使用[Git 和 Scientific Reproducibility](http://computersandbuildings.com/git-and-scientific-reproducibility/)作为指南，其中实验的结果存储在沿着提交哈希的表中。我想将结果存储在一个目录中，将目录命名为哈希。

考虑到版本控制，我想隔离`code`and `analysis`。例如，IPython 笔记本中绘图颜色的变化`analysis`不应该改变任何`code`

我正在考虑的方法：

像这样的目录结构：

```
model
- code
- simulation_results
   - a83bc4
   - 23e900
   - etc 
- analysis 
```

以及不同的 Git 存储库用于`code`和`analysis`，`simulation_results`省略了 Git。

任何意见？更好的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:37:04.797

这看起来很合理，并且您的结构非常适合使用**[`git submodules`](http://git-scm.com/book/en/Git-Tools-Submodules)**，`model`成为父 git repo。

这样，您将链接在一起`code`，并`analysis`在`model`repo 中使用 SHA1。

`model/simulation_results`这意味着您可以基于 repo（“父”repo）的 SHA1在私有（即未版本化）目录中创建目录`model`：SHA1 链接两个模块`project`和`analysis`子模块的 SHA1，这意味着您可以*准确地*重现实验（基于`project`和)的确切内容`analysis`。

# matlab - 属性值 + matlab

> ID：14502513
> 
> 赞同：0
> 
> 时间：2013-01-24T13:29:44.943
> 
> 标签：matlab

对于`.ini`带有对的文件`property_value`，我想定义数据类型，`property_name`以便我将根据输入参数数据类型转换数据类型。

出于这个原因，我一直在尝试从 ini 文件中以 struct 格式读取指定的数据类型。但是我收到错误消息：`invalid fieldname`。如何定义`property_name`和数据类型以便我能够读取它，并且如果我想添加`property_datatype_vlaue`对也能够写入 ini 文件？

```
[system] % string
value
[application] % string
value 
```

我还需要能够从我的输入参数中设置此数据类型。

[如何使用 Matlab 按字母顺序对属性值对进行排序](https://stackoverflow.com/questions/14429468/how-to-sort-property-value-pair-in-alphabetical-order-with-matlab/14433758#comment20213224_14433758)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:41:48.030

修改`struct`从此[答案](https://stackoverflow.com/questions/14429468/how-to-sort-property-value-pair-in-alphabetical-order-with-matlab)以包含值和类型

```
function fileData = readFileIntoStruct( fileName )
%
% read [property] value pairs file into struct
% 
fh = fopen( fileName, 'r' ); % read handle
line = fgetl( fh );
while ischar( line )
    % property
    tkn = regexp( line, '\[([^\]+)]\]\s*%\s*([^%]+)\s*$', 'once', 'tokens' );
    % read next line for value
    val = fgetl( fh );
    fileDate.(tkn{1}).val = val;
    fileDate.(tkn{1}).type = tkn{2};
    line = fgetl( fh ); % keep reading
end
fclose( fh ); % don't forget to close the file at the end. 
```

**假设：**

1.  属性的名称是合法的 Matlab 字段名称（有关详细信息，请参阅变量命名）。

2.  每个属性的值始终是一个字符串。

3.  我没有在这些示例中包含任何错误检查代码（未找到文件、格式​​错误的字符串等）

4.  我假设输入文件是严格的“[prop] val”对，没有任何额外的注释等。

# excel - ActiveX 单选按钮 Excel VBA

> ID：14502518
> 
> 赞同：0
> 
> 时间：2013-01-24T13:30:08.100
> 
> 标签：excel, vba

在我的主 excel 页面上，我有两个名为 OptionButton1 和 OptionButton2 的 ActiveX 控件单选按钮，我想将其用于是/否选项。

在我的代码中，我有以下内容：

```
If OptionButton1.Value = True Then
    MsgBox "Yes."
ElseIf OptionButton2.Value = True Then
    MsgBox "No."
End If 
```

当我尝试运行宏时，出现此错误：

```
Runtime error '424':
Object Required 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:35:01.937

您可能需要参考选项按钮的位置，即在哪个工作表上：

```
If Sheet1.OptionButton1.Value  Then ... 
```

这是因为（我假设）您的代码不在该工作表上，因此将假定未引用的对象在*当前*工作表上，这可能不是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:13:10.433

您可以改用表单控件选项按钮，您的代码可能看起来像

```
Dim Shp1 As Shape
Dim Shp2 As Shape

Dim Res As Integer   'Retuns the result
On Error Resume Next
Set Shp1 = Worksheets("sheet1").Shapes("Option Button 1")
Set Shp2 = Worksheets("sheet1").Shapes("Option Button 2")
   If Shp1 Is Nothing Then
    If Shp2 Is Nothing Then
        'MsgBox "none" 'in case they were deleted off the sheet
        Res = -3 '2 options deleted
    ElseIf Shp2.ControlFormat.Value = xlOn Then
        'MsgBox "second"
        Res = 2
    Else
        'MsgBox "Only Button 2 exists and it is off"
        Res = -1 'Option Button1 deleted
    End If
Else
    If Shp1.ControlFormat.Value = xlOn Then
        'MsgBox "first"
        Res = 1
    Else
        If Shp2 Is Nothing Then
            'MsgBox "Only Button 1 exists and it is off"
            Res = -2 'Option Button2 deleted
        ElseIf Shp2.ControlFormat.Value = xlOn Then
            'MsgBox "sec"
            Res = 2
        Else
            'MsgBox "Both exists, both are off"
            Res = 0
        End If
    End If
End If
return Res 
```

# php - 使用ajax问题插入数据

> ID：14502520
> 
> 赞同：0
> 
> 时间：2013-01-24T13:30:13.600
> 
> 标签：php, ajax

我正在尝试使用 ajax 在我的数据库中插入数据，但没有任何效果。谁能告诉我我做错了什么？

索引.PHP

```
<html>
    <head>
        <title>Title</title>
        <script type="text/javascript">
            function myLoad(){
                if(window.XMLHttpRequest){
                    var xmlhttp = new XMLHttpRequest();
                }else{
                    var xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
                }

                xmlhttp.open('GET', 'generate.php?text=' + document.getElementById('textarea').value, true);
                xmlhttp.send();
                xmlhttp.onreadystatechange = function(){
                    if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
                        window.document.getElementById('par').innerHTML = xmlhttp.responseText;
                    }
                }
            }
        </script>
    </head>

    <body>
        <div id="par"></div>
        <input type="text" id="textarea">
        <input type="button" id="button" value="Click Me" onClick="myLoad();"/>
    </body>
</html> 
```

生成.PHP

```
<?php
    require 'php/connect.inc.php';

    if(isset($_GET['text']) && !empty($_GET['text'])){
        $name = $_GET['text'];
        $query = "INSERT INTO users VALUES('', '$name', 'pass123', 'greg')";

        if($mysql_query = mysql_query($query)){
            echo 'Success';
        }else{
            echo 'Failed';
        }
    }
?> 
```

CONNECT.INC.PHP

```
<?php
    $mysql_host = 'localhost';
    $mysql_user = 'root';
    $mysql_pass = '';

    $mysql_error = 'Could not connect';
    $a_database = 'a_database';

    if(!@mysql_connect($mysql_host, $mysql_user, $mysql_pass) OR !@mysql_select_db($a_database)){
        die($mysql_error);
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:11:06.630

这可能不是您的整个问题的原因，但可能会混淆问题。

```
$query = "INSERT INTO users VALUES('', '$name', 'pass123', 'greg')"; 
```

如果您使用的是 Mysql5+ 并且这些 VALUES 中的第一个是自动递增的 id 号，那么 INSERT 将失败。要么将其保留，要么将其设为 null 或 0（未加引号），空字符串 '' insert 是 Mysql4 的“功能”，它不应该起作用。

即从Mysql5开始......

```
$query = "INSERT INTO users VALUES(0, '$name', 'pass123', 'greg')"; 
```

# perl - Perl：反转文件中的每个单词

> ID：14502524
> 
> 赞同：-1
> 
> 时间：2013-01-24T13:30:25.987
> 
> 标签：perl, reverse

我正在尝试编写一个脚本来反转文件中每行中的每个单词

*   前： `line1 asdasdfff`
*   后： `1enil fffdsadsa`

使用：

```
@lines = split(/\s+/, reverse($old)); 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:17:39.357

您可以使用带有评估的替换：

```
s/(\S+)/reverse $1/ge for @lines; 
```

这将捕获所有连续的非空白并将它们替换为反转版本。示例输入/输出：

```
I'm a little teapot short and stout
m'I a elttil topaet trohs dna tuots    

foobar qwerty aboo
raboof ytrewq ooba 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T13:44:35.457

如果您的目标是反转每个单词*，*那么反转整行然后拆分它就是问题所在。因为反转整行会改变单词的顺序。所以你要么想要：

```
my @lines = reverse split(/\s+/, reverse($old)); 
```

或者：

```
my @lines = map { reverse; } split /\s+/, $old; 
```

第一个只是简单地反转列表，第二个保持单词顺序并反转每个单词。根据我对要求的措辞，第二个看起来更像你想要做的。将单词留在原处，然后反转每个单词。（关于 map-grep 链的问题在于，它们是从右到左读取的，如果你愿意的话，会朝着分配方向前进。）

* * *

所以，你想反转线条。从您的预期输出（仅包含一行）中不清楚这种情况。在文件句柄的情况下，`$old`它*不*适合作为`reverse`. 您必须使用“钻石运算符” `<$var>`：

```
reverse( <$old> ); 
```

将所有记录/行吸入内存并输出反转数组。如果你把它传递给`split`，就会有问题。您只会拆分数组大小的*文本表示*。由于数字中没有空格，它将由一个包含数组大小的数组组成。所以你想分割*每一*行......

```
map { [ split /\s+/ ] } reverse( <$old> ); 
```

我将它们放在一个数组中，这样您就不会只是反转整个文件，并且每个线阵列作为一个单元保持在一起。然后你需要把每个单词都颠倒过来。

```
map { map { reverse; } split /\s+/ } reverse( <$old> ); 
```

当然，你会有记录分隔符，所以你必须考虑这些。你可以把 a`chomp`放在外部的开头`map`。

```
map { chomp; map { reverse; } split /\s+/ } reverse( <$old> ); 
```

您可能希望将记录分隔符附加到每个组的末尾，因此您需要捆绑每个单词的列表：

```
print map { chomp; (( map { reverse; } split /\s+/ ), $\ || $/ ) } reverse( <$old> ); 
```

所以我们必须隔离`map`表达式，然后将当前定义的输出记录分隔符添加到每个拆分和反转的行中，或者如果未定义，则输入记录分隔符。

# php - 如何同时处理多个相同类型的表单 - Symfony2

> ID：14502525
> 
> 赞同：0
> 
> 时间：2013-01-24T13:30:26.017
> 
> 标签：php, symfony

我有一个添加项目的表格——它的名称、价格、购买日期和一些注释。但是由于项目会很多，单独提交会很不舒服。我想要做的是多次重复该表格，并一次提交多个项目以进入数据库。像这样的东西：

```
Name | Price | Date | Notes
Name | Price | Date | Notes
Name | Price | Date | Notes

Submit 
```

用户将在其中一次编写和提交 3 个项目。很抱歉解释不好，我希望它不会太混乱。我应该用 Symfony2 来实现它。非常感谢你的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:33:46.627

阅读嵌入式表单。或收集小部件。

[http://symfony.com/doc/current/reference/forms/types/collection.html](http://symfony.com/doc/current/reference/forms/types/collection.html)

[http://symfony.com/doc/2.0/cookbook/form/form_collections.html](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)

# stata - 从 LIS 数据计算基尼系数（在 Stata 中）

> ID：14502527
> 
> 赞同：2
> 
> 时间：2013-01-23T15:25:51.567
> 
> 标签：stata

我需要根据 LIS 的可支配个人收入数据计算基尼系数。根据 LIS 培训文档，执行此操作的 Stata 代码是：

```
 di "** INCOME DISTRIBUTION II – Exercise 13 **"
    program define bottop
    qui sum ey [w=hweight*d4]
    replace ey = .01*r(mean) if ey<.01*r(mean)
    qui sum dpi [w=hweight*d4], de
    replace ey = (10*r(p50)/(d4^.5)) if dpi>10*r(p50)
    end
    foreach file in $us00h $fi00h {
    display "`file'"
    use hweight d4 dpi if (!mi(dpi) & !(dpi==0)) using "`file'", clear
    gen ey=dpi/(d4^0.5)
    bottop
    ineqdeco ey [w=hweight*d4]
    } 
```

我只是从培训文档中复制并粘贴了这段代码。片段

```
 qui sum ey [w=hweight*d4]
    replace ey=0.01*r(mean) if ey<0.01*r(mean) 
```

和

```
 qui sum dpi [w=hweight*d4], de
    replace ey=(10*r(p50)/(d4^0.5)) if dpi>10*r(p50) 
```

分别是底部编码和顶部编码。

当我尝试运行此代码时，未找到变量 hweight。有谁知道 LIS 的 hweight 的新名称是什么？或者任何人都可以建议我如何克服这一僵局？

我对 stata 很熟悉，但是这段代码的复杂程度超出了我的理解。

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:48:24.153

根据[LIS 文档页面上的](http://www.lisdatacenter.org/our-data/lis-database/documentation/)[变量定义列表](http://www.lisdatacenter.org/wp-content/uploads/our-lis-documentation-variables-definition.xlsx)，看起来该变量现在被称为`HWGT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:48:08.087

这更像是次优的解决方案。但是，人口普查提供了括号内的收入。如果您愿意这样做，您可以获得每个括号的计数。最后一个有一个顶部编码的括号。使用每个括号内的收入中值。然后你可以直接应用基尼系数的公式。它是次优的，因为它是个人级别数据的近似值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T11:36:32.887

你为什么不试试 fastgini 命令：

[http://www.stata.com/statalist/archive/2007-02/msg00524.html](http://www.stata.com/statalist/archive/2007-02/msg00524.html)

```
ssc install fastgini
fastgini income
return list 
```

这应该给你可变收入的基尼。

这个包还允许重量。类型

```
help fastgini 
```

了解更多信息

# c# - 对这个复合（集合）对象（WPF）进行数据绑定的最简单的 XAML 代码是什么？

> ID：14502530
> 
> 赞同：0
> 
> 时间：2013-01-24T13:30:42.530
> 
> 标签：c#, wpf, xaml, data-binding, collections

[获取此 WPF 应用程序](https://stackoverflow.com/a/14477620)的代码（或相同的[this](https://stackoverflow.com/a/14474077)），数据绑定一个集合（List 对象（myOrders）：

1.  **对于这种绑定，即绑定集合对象，还有什么更简单（最简单的）XAML 脚本？**

2.  基于相同代码示例的相关问题：
    [How to change this XAML code to align rows and add headers?](https://stackoverflow.com/questions/14504467/how-to-change-this-xaml-code-to-align-rows-and-add-headers)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:54:56.873

您可以将 Order 集合投影到 Part 集合中，将每个元素包装在 ViewModel 类中，该类知道其父顺序以及是否应在“Order name”列中显示其标签。它会是这样的（我没有测试过！）：

```
public class PartWrapper{
    public Part Part{ get; set;}
    public Order Order{ get; set;}
    public bool ShowOrder{ get; set;}

    public PartWrapper(Part part, Order order, bool showOrder){
        this.Part = part;
        this.Order = order;
        this.ShowOrder = showOrder;
    }
}

var items = this.orders.SelectMany(o => o.Parts.Select(p => new PartWrapper(p, o, false)) ).ToList();
foreach(var item in items.GroupBy(i => i.Order).Select(g => g.First()))
    item.ShowOrder = true; 
```

# javascript - CRM 2011 表单通过 javascript 打开自定义页面后，子网格上的查找和链接不起作用

> ID：14502531
> 
> 赞同：2
> 
> 时间：2013-01-24T13:30:44.947
> 
> 标签：javascript, asp.net, internet-explorer, dynamics-crm-2011, crm

我几乎无法解释这个问题。我会从头说起。我的同事编写了与 CRM 2011 连接的 aspx 页面。此页面是为了集成我们组织和呼叫中心的 CRM 2011 而编写的。可以打开选定的联系人。它是在java脚本的帮助下制作的

```
 window.open("http://<server>/<orgname>/main.aspx?etc=2&extraqs=%3f_gridType%3d2%26etc%3d2%26id%3d%257b" + id + "%257d%26pagemode%26rskey%26preloadcache%3d862423166&pagetype=entityrecord", "Contact", params); 
```

直到昨天一切都很好。我们已将 CRM 2011 更新为 Rollup 6，然后是 10 和 11。

今天的一天从下一个令人难以置信的错误开始。当操作员单击打开联系人表单的按钮时，它会打开，但您无法传递到任何查找或打开子网格中的某些链接对象。最令人担忧的是，它只发生在本地机器上的 prodact 服务器上，没有这样的问题。（在测试中我现在无法重现此功能（（）

即使您多次更新表单，也无法从此联系人打开任何链接对象表单。但是，如果您将粘贴 url 复制到另一个窗口，则一切正常。我不知道该怎么做。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:05:39.577

我已经解决了这个问题。

主要原因是这行简单的 CRM 原生代码。

```
masterWindow().preloadPage($v_2) 
```

我正在从我的自定义页面打开 CRM 表单，并且我的代码中没有函数 preloadPage（在主窗口中）。由于一些愚蠢的原因，您在更新 CRM 表单时甚至在调试时都不会收到此错误。但是，如果您在“添加”（Добавление）选项卡上按下“添加新呼叫”按钮（Добавление -> Звонок）（或类似的东西，对不起，我手头没有英文 CRM），您可能会看到此错误。

解决方法也很简单，只需在页面上添加虚拟函数

```
 function preloadPage(UnusedValue) {

        // Ignore

    } 
```

一切都会好起来的。谢谢你的支持！！！

# regex - 检查字符串不包含字母字符

> ID：14502537
> 
> 赞同：-8
> 
> 时间：2013-01-24T13:31:07.423
> 
> 标签：regex

我需要一个正则表达式来检查字符串是否不包含字母。允许使用数字、符号（非字母字母）和空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:58:55.890

使用[Unicode 字符属性](http://www.regular-expressions.info/unicode.html#prop)。

```
/^\P{L}*$/ 
```

仅当从字符串的开头到结尾只有非字母时才会匹配。

`\p{L}`来自任何语言的任何类型的字母**==>** `\P{L}`都是否定的。

**注意**：并非所有正则表达式都支持 Unicode 字符属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:39:54.533

你可以试试这个：

```
(?![a-zA-Z]).* 
```

解释 ：

> *   **(?!** -> 如果没有后缀则匹配
> *   **[a-zA-Z]** -> 缺少的后缀是由字母组成
> *   **.*** -> 任意字符，任意重复次数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:34:59.260

这是JavaScript中的解决方案

```
alert(/^[^a-z]*$/i.test(myString)); 
```

# c# - 查找调试过程中生成的文件的源代码

> ID：14502538
> 
> 赞同：0
> 
> 时间：2013-01-24T13:31:08.633
> 
> 标签：c#, visual-studio-2010, file, search

在我的 Visual Studio 解决方案中，我有 22 个项目。当我构建解决方案时，会在启动项目的调试文件夹中的其他文件中生成一个文本文件。有什么方法可以在生成这个特定文件的这些项目中找到源代码？

# ios - UIView 不会自动调整子视图的大小

> ID：14502543
> 
> 赞同：0
> 
> 时间：2013-01-24T13:31:29.430
> 
> 标签：ios, cocoa-touch, uiview, autoresize, subviews

嘿，我的视图没有正确调整我的子视图（uibuttons）的大小

***查看加载***：

```
 UICheckbox *UICBox = [[UICheckbox alloc]init];
    [UICBox autoresizesSubviews];
    [UICBox setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleTopMargin |UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin];
    if (!i%2) {
        [UICBox setFrame:CGRectMake(self.view.bounds.size.width/2 - CheckboxSize.width/2 - distanceToMiddle,
                                   distanceToTop + j * CheckboxSize.height + distanceBetween,
                                   CheckboxSize.width,
                                   CheckboxSize.height)];
    }
    else{
        [UICBox setFrame:CGRectMake(self.view.bounds.size.width/2 - CheckboxSize.width/2 + distanceToMiddle,
                                    distanceToTop + j * CheckboxSize.height + distanceBetween,
                                    CheckboxSize.width,
                                    CheckboxSize.height)];
        j++;
    } 
```

通话后

```
 sele = [[SelectionViewController alloc]init];
    [[sele view] setFrame:CGRectMake(0, 0, 400, 300)]; 
```

没有按钮了....

# java - 使用 bluecove 和 BlueSoleil 堆栈创建蓝牙代理

> ID：14502549
> 
> 赞同：3
> 
> 时间：2013-01-24T13:31:49.733
> 
> 标签：java, proxy, bluetooth, bluecove, bluetooth-sco

我有图书馆[http://code.google.com/p/bluecove/](http://code.google.com/p/bluecove/)并且我已经安装了 BlueSoleil [http://www.bluesoleil.com/index.aspx](http://www.bluesoleil.com/index.aspx)和一个兼容的蓝牙加密狗。

我想创建一个 Java 应用程序（在 Windows 7 x64 中运行）作为中继器来增强我的 android 手机和免提设备之间的信号。免提设备的特点是：

```
Bluetooth V2.1 compliant
Support Enhanced Data Rate (EDR)
Profiles Supported:
 Advanced Audio Distribution Profile (A2DP) 1.2,
 Hands-Free Profile (HFP) 1.5,
 Headset Profile (HSP) 1.1
 Supports Simultaneous Multipoint (two live audio connections) 
```

我想有两种方法：

1.  BlueCove Java 应用程序将与这两种设备配对，并为手机列出一个客户端，并作为免提设备的音频网关。然后在它们之间简单地传递音频和其他数据作为代理。

2.  BlueCove Java 应用程序将充当低级协议代理，只接受所有请求并将它们转发到另一个端点设备，反之亦然。

一些可能有帮助的信息：

```
HFP
https://www.bluetooth.org/Building/HowTechnologyWorks/ProfilesAndProtocols/HFP.htm
HSP
https://www.bluetooth.org/Building/HowTechnologyWorks/ProfilesAndProtocols/HSP.htm
A2DP
https://www.bluetooth.org/Building/HowTechnologyWorks/ProfilesAndProtocols/A2DP.htm
JSR-82 Sample : SPP Server and Client
http://www.jsr82.com/jsr-82-sample-spp-server-and-client/ 
```

bluecove 可以使用这个堆栈吗？还是其他堆栈？

# asp.net - 使用 LINQ to SQL 防止 sql 注入

> ID：14502550
> 
> 赞同：0
> 
> 时间：2013-01-24T13:31:50.263
> 
> 标签：asp.net, sql, sql-server, regex

我是编码界的新手，

我建立了一个带有几个文本框的大型网站，所以现在我发现我一直在使用一种危险的方法在 SQL 服务器中插入数据，如下所示：

```
 execSQL("insert into Dossier(ID_Dossier,Nom_Giac) values(" & id_dossier.text & "," Nom_gaic.text & "')")

     Public Function execSQL(ByVal req As String, Optional ByVal type As String = "r")
            cmd = New SqlCommand
            cmd.CommandText = req
            cmd.Connection = con
            openCon()
            If type = "r" Then
                Return cmd.ExecuteReader(CommandBehavior.CloseConnection)
            Else
                Return cmd.ExecuteNonQuery
            End If

        End Function 
```

我只是想知道使用 LINQ to SQL 是否可以帮助解决我整个网站中的这个问题。为了使用它，我正在学习这门课程：

[http://www.upsizing.co.uk/Art34_IntergratingASPSecurity.aspx](http://www.upsizing.co.uk/Art34_IntergratingASPSecurity.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:35:11.117

> 我只是想知道使用 LINQ to SQL 是否可以帮助解决我整个网站中的这个问题。

从技术上讲，它会因为在内部它将处理您的查询当前缺少的所有参数清理，但是，这并不是说您不能使用已有的代码解决您的问题。您需要做的就是更新您的查询以使用[SqlParameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx) ，例如

```
command.CommandText = "INSERT INTO Dossier(ID_Dossier,Nom_Giac) values(@id, @giac)"
command.Parameters.AddWithValue("@id" , id_dossier.Text))
command.Parameters.AddWithValue("@giac", Nom_giac.Text)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:36:55.903

您不需要仅将 LINQ to SQL 用于 SQL 注入。您可以使用您所做的并对其进行修改以使用以下参数：

```
execsql("insert into Dossier(ID_Dossier,Nom_Giac) values(@dossier, @nom", param1, param2) 
```

这些参数需要手动添加到命令中：

```
cmd = New SqlCommand
cmd.CommandText = req
cmd.Parameters.Add("ID_Dossier", <Type>).Value = dossier
cmd.Parameters.Add("Nom_Giac", <Type>).Value = nom

.
. 
```

因此，您的方法接受参数的 ParamArray，并将它们传递给命令。显然，解决方案需要比我提供的更通用，但希望这能让你开始。

# validation - 如何在jsf中验证bean端的空白字段？

> ID：14502554
> 
> 赞同：0
> 
> 时间：2013-01-24T13:31:56.383
> 
> 标签：validation, jsf

我有一些输入字段和一些 selectonemenu，我需要验证它们，并且基于它们的验证，我必须显示整个页面的错误消息。我还必须使用该输入字段和 selectonemenu 显示消息。

我的验证仅适用于空值和空白值。由于我想显示基于 null 和空白字段的消息，因此我尝试了 bean 端验证。但是我的验证方法永远不会用于空白字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T15:34:51.557

只需`required="true"`在输入组件上使用。

```
<h:inputText id="input" ... required="true" />
<h:message for="input" />
<h:selectOneMenu id="menu" ... required="true" />
<h:message for="menu" /> 
```

您对“bean 方面”不是很清楚，问题中使用的术语非常差且过于通用，但是如果您实际上是指 JSR303 bean 验证并期望`@NotNull`触发，那么您需要将以下上下文参数添加到`web.xml`：

```
<context-param>
    <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
    <param-value>true</param-value>
</context-param> 
```

这样，JSF 将`null`在传递给模型之前将提交的空字符串值转换为。`@NotNull`意志不会在空弦上起作用。

### 也可以看看：

*   [Bean Validation @NotNull、@NotBlank 和 @NotEmpty 在 JSF+Tomcat 中不起作用](https://stackoverflow.com/questions/7545231/notnull-notblank-and-notempty-bean-validation-does-not-work-in-jsf)
*   [JSF2 验证客户端还是服务器端？](https://stackoverflow.com/questions/4013410/jsf2-validation-clientside-or-serverside/)

# facebook - FB.ui 方法：“发送”消息总是在用户的主收件箱中结束？

> ID：14502555
> 
> 赞同：0
> 
> 时间：2013-01-24T13:31:59.247
> 
> 标签：facebook, facebook-javascript-sdk

**设置：**

*   我有一个网站，允许人们使用他们的 Facebook 帐户登录。（我显然创建了一个允许他们这样做的 FB 应用程序）
*   在该站点上，登录用户（成功）能够通过 FB.ui 的“发送”方法根据他们的用户 ID 向应用程序的其他用户发送私人消息

**附加信息：**

如您所知，Facebook 收件箱由“2 个收件箱”组成，您有“主要收件箱”和“其他”收件箱，所有邮件通常发给您没有朋友（或不相关）的人.
如果您单击收件箱上的“编辑首选项”，您将获得以下选项：

1) 基本过滤（推荐）主要查看来自朋友或您可能认识的人的消息。

2）严格过滤主要是看到朋友的消息。您想收听的人的消息可能会转到您的“其他”文件夹。

现在，我已经能够通过取消我的女朋友的朋友然后通过“方法”向她发送消息来成功测试“发送”方法。> 直接进入她的“主要收件箱”，她收到了“

**主要问题/担忧：**

我是否可以绝对确定通过我的网站 FB.ui“发送”方法发送给我的应用程序的其他用户的每条消息都会被传递到他们的主收件箱，而不会在“其他邮箱”中被删除。
我需要确保人们在他们的 Facebook 顶部栏中收到“新消息”警告。

**额外**

我是否需要获得特别许可才能执行此操作（“此”表示确保部分...）？
我目前有：`'scope' => 'read_stream, publish_stream, email, user_about_me', (etc...)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:59:19.670

我认为除了使用新的“付费消息”功能之外，没有其他方法可以保证您的消息最终进入主邮箱。如果用户之前与您的应用进行过负面交互，您的消息可能最终会出现在用户的“其他”文件夹中。

发送[请求](https://developers.facebook.com/docs/reference/dialogs/requests/)可能比发送消息更好。除非用户阻止您的应用，否则这些将同时显示在工具栏和 Web 应用的右上角。

# google-chrome - Facebook like box 仅适用于 Chrome

> ID：14502560
> 
> 赞同：2
> 
> 时间：2013-01-24T13:32:05.243
> 
> 标签：google-chrome, facebook-likebox

我使用 facebook likebox 生成器来创建 iframe likebox 代码。提供了以下内容：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fnatrxsa&amp;width=292&amp;height=427&amp;show_faces=false&amp;colorscheme=light&amp;stream=true&amp;border_color&amp;header=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:427px;" allowTransparency="true"></iframe> 
```

但是，由于某种原因，它仅适用于 Chrome。

在本地对其进行测试，我将其更改为`<iframe src="//www.fac`，`<iframe src="http://www.fac`以便将其加载到一个简单的文本文件中。测试过 Opera、Safari、Firefox 和 IE，但只有 Chrome 加载它。

这可能是一个愚蠢的错误，但我似乎无法理解它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:13:52.890

由于客户 Facebook 页面中的国家和年龄限制，它只会在登录时加载点赞框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:06:50.990

你可能解决了你的问题......但是如果其他人有这个问题，供将来参考......如果你在一个网站上工作......并制作一个 facebook 页面......如果你在 facebook 上没有任何活动一开始的页面，2-3 周后...它将变为 UNPUBLISHED ...因此 Firefox、Safari、IE、Opera 不会显示您的 Like Box、Like Buttonn 或其他任何东西...所以您需要发布您的页面

PS：对不起我的英语不好

# git - 拉取本地仓库时使用遥控器

> ID：14502566
> 
> 赞同：3
> 
> 时间：2013-01-24T13:32:23.473
> 
> 标签：git, git-clone, git-remote

常见情况：

```
deployer$ git clone git://gitserver/project.git
deployer$ cd project
deployer$ ./deploy
Lots of errors!
deployer$ hack --until-it-works deploy
deployer$ git commit -m "fixed it" deploy 
```

糟糕，现在我无法推动，因为`deployment-account`没有正确的键。所以，回到我自己的帐户。

```
larsmans$ cd /tmp
larsmans$ git clone /path/to/deployed/project
larsmans$ cd project 
```

但现在我无法推送，因为遥控器未设置为原始克隆的遥控器。

```
larsmans$ git remote -v
origin  /path/to/deployed/project/ (fetch)
origin  /path/to/deployed/project/ (push) 
```

我可以克隆一个本地目录并获取遥控器吗？我可以很容易地为此编写一个脚本，但也许 Git 已经内置了它。`git-clone(1)`我在;中找不到相关选项 `--mirror`没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:00:29.060

不值得编写脚本，因为每个项目（和每个人）最多执行一次！

事实上，当你遇到这种情况时，你几乎肯定有一个本地存储库，不是吗？然后你要做的*最后一件事是一个新的克隆。*

相反，只需`git remote add deployed /path/to/deployed/project`在您现有的常规工作区中，并使用( )`git fetch deployed`做任何您想做的事情— 您可以将它直接推送到或检查它或它或它或任何东西。`deployed/master``refs/remotes/deployed/master``origin``merge``merge --rebase`

请注意，如果您可以 ssh 进入服务器并在那里运行 git（如果您在那里破解，则可以），您也可以通过 ssh 协议从那里 git pull 。而且它很高效，因为 ssh 协议只是在远程端运行 git 并使用相同的 git 协议与之对话，只是通过 ssh 进行隧道传输。所以在你的本地机器上，你应该能够`git remote add deployed host:/path/to/deployed/project`；最好使用完整的主机名、用户名和公钥进行`host`配置，但也可以。`.ssh/config``user@host`

在生产服务器上，我建议切换回以前的版本，在其他地方修复并再次推送以限制停机时间。在测试和预生产时，这当然没问题。

# iphone - 在后台播放视频

> ID：14502573
> 
> 赞同：4
> 
> 时间：2013-01-24T13:32:39.453
> 
> 标签：iphone, ios, objective-c, avplayer, avplayerlayer

我看到一个注释，这个地址 [http://developer.apple.com/library/ios/#qa/qa1668/_index.html](http://developer.apple.com/library/ios/#qa/qa1668/_index.html)

> 注意：如果您禁用电影中的视频轨道，或将 AVPlayerLayer 与其关联的 AVPlayer 分离，它将允许电影音频继续在后台播放。但是，这些更改必须在应用程序实际切换到后台之前生效。

```
 [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
   [self becomeFirstResponder];

   [[AVAudioSession sharedInstance] setDelegate: self];
   [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
   [[AVAudioSession sharedInstance] setActive: YES error: nil];

    AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:[NSURL fileURLWithPath:AnUrl]];
   AVPlayer *avPlayer = [AVPlayer playerWithPlayerItem:playerItem];

   AVPlayerLayer *avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:avPlayer];
   avPlayerLayer.frame = self.view.layer.bounds;
   UIView *newView = [[UIView alloc] initWithFrame:self.view.bounds];
   [newView.layer addSublayer:avPlayerLayer];
   [self.view addSubview:newView];

   [avPlayer play]; 
```

这个程序有效。但是在后台，声音被切断了。我想继续播放只有背景的声音。我如何将 AVPlayerLayer 与 AVPlayer 分离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T06:28:18.287

您上面的代码没问题，但是在转换到/从后台时做这些事情：

*   当应用程序变为活动状态时：（您的 avPlayerLayer 必须是您添加到视图中的 AVPlayerLayer）

    ```
    - (void)applicationDidBecomeActive:(UIApplication *)application {
        [avPlayerLayer playerLayerWithPlayer:avPlayer];

    } 
    ```

*   当应用程序进入后台时：（您的 avPlayerLayer 必须是您添加到视图中的 AVPlayerLayer）

    ```
    - (void)applicationWillResignActive:(UIApplication *)application {
        [avPlayerLayer playerLayerWithPlayer:nil];
    } 
    ```

另外，不要忘记在 plist 的 UIBackgroundModes 中添加音频。

干杯。

# sql - 选择一个结果并在另一个选择中使用

> ID：14502577
> 
> 赞同：1
> 
> 时间：2013-01-24T13:32:43.687
> 
> 标签：sql, select, nested

我想知道是否有办法做这样的事情。

```
select outsidecolumn, example1, example2
from (
    select exemple1,example2 
    from tablenames 
    inner joins
    where conditions) as p,
    table2 tb
    where p.example1 = tb.outsidecolumn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:36:46.187

我认为这就是你想要的：

```
select tb.outsidecolumn, p.example1, p.example2
from 
(
  select exemple1,example2 
  from tablenames 
  inner joins
  where conditions
) p
inner join table2 tb
  on p.example1 = tb.outsidecolumn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:39:41.467

## 替代方法 - CTE

并且`inner join`虽然执行计划可能相同，但也不是笛卡尔坐标系，但**可以说**更具可读性。

```
with p as (
    select exemple1,example2 
    from tablenames 
    inner joins
    where conditions
)
select tb.outsidecolumn, p.example1, p.example2
from p
    join table2 tb
    on tb.outsidecolumn = p.example1 
```

# c# - 我应该为我的文本框使用“onclick”还是“ontextchanged”事件来隐藏标签

> ID：14502580
> 
> 赞同：0
> 
> 时间：2013-01-24T13:32:52.197
> 
> 标签：c#, asp.net, onclick, textchanged

我正在使用 asp.net c#，我想要实现的是当用户在表单上的文本框内单击以隐藏标签时（我使用这个标签来获得一些反馈）。

我正在尝试类似以下代码的内容，但标签从未隐藏：

```
hiddenMsg.Visible = true;
.
.
.

private void compTxt_TextChanged(object sender, EventArgs e)
{
    if (!IsPostBack)
        {
            hiddenMsg.Visible = false;
        }
} 
```

在我的 aspx 文件中，我有以下内容：

```
<asp:TextBox ID="compTxt" runat="server" TabIndex='11' AutoPostBack="true" ontextchanged="compTxt_TextChanged" ></asp:TextBox> 
```

[更新了我的问题]

我正在使用 Javascript 来实现我的目标，并且我在 JS 中使用 style.display 属性而不是 Visible = false 来实现这一目标，但是我不确定我在 asp:TextBox 中使用的方法，谁能帮助我关于如何从 asp:TextBox 调用 JavaScript 方法？

```
function hideMsgs() {
      document.getElementById('<%= hiddenMsg.ClientID %>').style.display = 'none';
}  

<asp:Label ID="hiddenMsg" runat="server" Text="Successfully Saved" style="display:inherit;"/>

<asp:TextBox ID="compTxt" runat="server" TabIndex='11' OnClientClick="hideMsgs()"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:34:35.650

摆脱 IsPostBack 检查，它将始终是回发。

```
private void compTxt_TextChanged(object sender, EventArgs e)
{
    hiddenMsg.Visible = false;
} 
```

对于客户端解决方案，在您的页面加载中：

```
protected void Page_Load(object sender, EventArgs e)
{
    compTxt.Attributes.Add("onclick", "document.getElementById('hiddenMsg').style.display = 'none';");
} 
```

如果您在项目中使用母版页，请在页面加载中使用此行：

```
compTxt.Attributes.Add("onclick", "document.getElementById('" + hiddenMsg.ClientID + "').style.display = 'none';"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:35:39.780

点击客户端永远不会导致回发。您需要回发来处理该代码。我建议使用 javascript 来处理您的点击事件，以便您可以隐藏您的标签客户端。然后不需要回发。

# shell - grep -f 文件搜索

> ID：14502590
> 
> 赞同：0
> 
> 时间：2013-01-24T13:33:20.187
> 
> 标签：shell, awk, grep

我有两个文件。第一个 ( `file1.txt`) 大约有 15,000 行，第二个文件 ( `file2.txt`) 大约有 180,000 行。我正在尝试从中找到所有匹配的行`file1.txt`并将它们从`file2.txt`. 我目前正在尝试的是：

```
grep -v -f file1.txt file2.txt > out.txt 
```

这确实有效，但需要很长时间。我正在尝试找到一种方法来加快速度，但我无法弄清楚。有人有建议吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:37:49.187

如果这里“匹配”的定义是“相同的”：

试试这个：

```
awk 'NR==FNR{a[$0];next;}!($0 in a)' file1 file2 >out.txt 
```

# javascript - JavaScript - 对象原型中的 Getter/Setter 不起作用。Getter 返回最后一个元素

> ID：14502601
> 
> 赞同：1
> 
> 时间：2013-01-24T13:33:34.460
> 
> 标签：javascript, prototype, getter-setter, last-modified

我是 JavaScript 新手。在使用给定的javascript时，我期望输出值为“123”；“测试1”；“456”和“test2”，因为有两个实例。

但返回值为 "456";"test2"; “456”和“test2”。

如果我将设置器更改为处理“this”（目前已在代码中删除），问题就解决了。我无法理解为什么原型对象的行为不同。

我不想用这个声明变量，因为我希望变量是私有的，只能通过 getter/setters 方法访问。

```
<html>
<head>
<script type="text/javascript">

function Test(){
    var name;
    var id;

    Test.prototype.setId = function(newId){
        id = newId; 
    }

    //this.id = function(newId){
    Test.prototype.getId = function(newId){
        return  id;
    }

    Test.prototype.setName = function(newName){
        name = newName; 
    }

    //this.getName = function(newGuid){
    Test.prototype.getName = function(newGuid){
        return name;    
    }

}

function callme(){
    var instance1 = new Test();
    instance1.setId("123");
    instance1.setName("test1");
    var instance2 = new Test();
    instance2.setId("456");
    instance2.setName("test2");
    alert(instance1.getId());
    alert(instance1.getName());
    alert(instance2.getId());
    alert(instance2.getName());
}

</script>
</head>

<body>
<button onclick='callme()'> Test </button>
</body>
</html> 
```

* * *

根据下面给出的 Matt 的建议，我已经更改了我的代码。但是代码不适用于继承。我修改了代码如下。当前实现创建派生类型的对象并尝试调用基类的方法。

```
<html>
<head>
<script type="text/javascript">

(function () {
    var stores = [];
    var counter = 0;
    Test = function () {
        this.storeId = stores.length;
        stores.push({});
    }

    Test.prototype.setGuid = function (newId) {
        stores[this.storeId].id = newId;
    }
    Test.prototype.getGuid = function (newId) {
        return stores[this.storeId].id;
    }
    Test.prototype.setName = function (newName) {
        stores[this.storeId].name = newName;
    }
    Test.prototype.getName = function (newGuid) {
        return stores[this.storeId].name;
    }
})();

Derived.prototype = new Test();
Derived.prototype.constructor = Derived

function Derived(){
    Test();//call to base class
    //some additional method
}

function callme(){
    var instance1 = new Derived();
    instance1.setGuid("123");
    instance1.setName("test1");

    var instance2 = new Derived();
    instance2.setGuid("456");
    instance2.setName("test2");

    alert(instance1.getName());
    alert(instance1.getGuid());

    alert(instance2.getName());
    alert(instance2.getGuid());

}

</script>
</head>

<body>
<button onclick='callme()'> Test </button>
</body>
</html> 
```

`stores`其次，当变量被清除（超出范围）时，我不确定是否要从变量中清除内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:35:44.940

您的属性是全球性的。您必须使用`this`来引用实例的属性。

像这样修复您的代码：

```
function Test(){
    this.name =''; // this only to show that the property exist,
                   //  it doesn't change the behavior as you set it later
    this.id='';
}

Test.prototype.setId = function(newId){
    this.id = newId; 
}

Test.prototype.getId = function(){
    return this.id;
}

Test.prototype.setName = function(newName){
    this.name = newName; 
}

Test.prototype.getName = function(){
    return this.name;    
} 
```

我修复了一些其他问题，其中包括你不应该声明一个参数，`getX`因为你不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:35:50.993

每次创建新实例时都在设置原型方法 - 因此变量引用将在实例之间共享。

`this.variableName`按照dystroy的建议使用或使用`this.setName = function(newName)`。（将其用于变量会更好，因为它不会为每个对象实例复制函数。）

但是，如果您真的不想公开变量，请使用：

```
function Test(){
    var name;
    var id;

    this.setId = function(newId){
        id = newId; 
    }

    this.getId = function(newId){
        return  id;
    }

    this.setName = function(newName){
        name = newName; 
    }

    this.getName = function(newGuid){
        return name;    
    }
} 
```

* * *

在不直接公开变量的情况下共享原型函数的解决方法是：

```
(function () {
    var stores = [];
    var counter = 0;
    window.Test = function () {
        this.storeId = stores.length;
        stores.push({});
    }

    Test.prototype.setId = function (newId) {
        stores[this.storeId].id = newId;
    }
    Test.prototype.getId = function (newId) {
        return stores[this.storeId].id;
    }
    Test.prototype.setName = function (newName) {
        stores[this.storeId].name = newName;
    }
    Test.prototype.getName = function (newGuid) {
        return stores[this.storeId].name;
    }
})(); 
```

**说明：**代码被包装在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中，确保不能从该函数外部访问变量。在 IIFE 中，我们为我们的对象实例创建了一个存储列表。然后我们定义我们的`Test`类并将函数添加到原型中。

每当创建新实例时，我们都会创建一个新商店并将其附加到商店列表中。我们还将 a 添加`storeId`到实例中，以便我们可以访问实例存储中的值。外部函数可以访问 storeId，但可以从 store 本身获取任何数据。

`stores[this.storeId]`总是为我们的对象实例获取存储，然后我们使用类似于`this`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-29T10:09:29.520

我喜欢马特的方法。如果存储的数量变化很大，您可以使用对象而不是数组，并使用某种删除存储[this.storeID] 的 dispose 方法。也许 Javascript 中有一种方法可以在垃圾收集期间自动调用这样的方法/函数，或者当对象离开可用范围时？否则，您必须在为时已晚之前调用它。

继承问题可能是由错误实现的继承引起的。

# oracle - 如何在 Oracle 上使用 Pentaho 模式工作台？

> ID：14502603
> 
> 赞同：0
> 
> 时间：2013-01-24T13:33:44.017
> 
> 标签：oracle, pentaho

我的 Pentaho Schema Workbench 在本地 mySQL 数据库服务器上运行得很好。但是，当我尝试将它与我公司的 Oracle 数据库连接时，它在成功建立连接后冻结。

官方的 3.2.2 版本解决了这个问题（http://jira.pentaho.com/browse/PSW-97）。但是我已经下载了那个版本，问题仍然存在，即使我指定了数据库名称。

你会建议我尝试什么？

附加信息：我很肯定 Oracle 服务器工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:38:11.287

它并没有冻结，但它正在获取数据库的整个模式，并且在某些 oracle 数据库中这是巨大的，并且 oracle 在返回它时非常慢。

Pentaho 论坛上有各种解决方案，其中之一在这里：

[http://forums.pentaho.com/showthread.php?88976-Schema-Workbench-very-slow-against-Oracle11G&highlight=all_objects](http://forums.pentaho.com/showthread.php?88976-Schema-Workbench-very-slow-against-Oracle11G&highlight=all_objects)

您也可以过滤模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T11:27:05.160

如本文所述“ [http://jira.pentaho.com/browse/PSW-97](http://jira.pentaho.com/browse/PSW-97)：FILTER_SCHEMA_LIST 参数与您的模式名称的值应该解决这个问题。它对我有用。我正在使用oracle 11G。

# caching - Powershell 是否有需要清除的缓存？

> ID：14502611
> 
> 赞同：15
> 
> 时间：2013-01-24T13:33:56.407
> 
> 标签：caching, powershell

今天早上，我从本地网络驱动器复制了一个目录到临时文件夹进行测试。出现了这个错误。

```
Get-Content : Cannot find path 'C:\users\xxxxx\desktop\cgc\Automatic_Post-Call_Survey_-_BC,_CC.txt' because it does no
t exist.
At C:\users\xxxxx\desktop\cgc\testcountexcl1.ps1:55 char:12
+ Get-Content <<<<  $txtfile | Get-WordCount -Exclude (Get-Content c:\temp\exclude.txt) | select -First 15
    + CategoryInfo          : ObjectNotFound: (C:\users\xxxxx...ey_-_BC,_CC.txt:String) [Get-Content], ItemNotFoundEx
   ception
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand 
```

这将是预期的移动......PS找不到引用的路径......但我在运行脚本之前进行了以下更改（旧的在新的上方注释掉）：

```
$input = Get-Content c:\temp\wordCount.txt
<# $inpath = "C:\users\xxxxx\desktop\cgc\tx"    #>
$inpath = "C:\temp\tx"  
$srcfiles = Get-ChildItem $inpath -filter "*.txt"    
$notPermittedWords = Get-Content c:\temp\exclude.txt 
```

我的第一个想法是，有某种缓存保存了`$inpath`我上次运行的变量……但无法确定这是否是预期的 PowerShell 行为。我是否误解了错误或解决方案？如何刷新缓存或任何可能存储在内存中的变量？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-22T17:48:53.057

我不喜欢每次需要清除缓存时都必须关闭并重新打开的想法。

这适用于 PowerShell

`Remove-Variable * -ErrorAction SilentlyContinue; Remove-Module *; $error.Clear(); Clear-Host`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-24T13:50:37.733

变量存储在会话中，因此如果您关闭 powershell 控制台并打开一个新控制台，所有自定义变量都将消失。如果要查看存在哪些变量，请使用`Get-Variable`. 要删除特定变量（以确保它消失），您可以使用：

`Remove-Variable varname`.

至于你的问题。全局（会话）范围内的变量存储在会话中，直到它被删除或覆盖。如果您使用相同的 powershell 控制台两次运行该代码，则`$inpath`应该设置为`"C:\temp\tx"`第二次，并且`$srcfiles`将使用新的文件列表进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T09:37:43.567

除了[@Patrick 的回答](https://stackoverflow.com/a/23226750/1915920)，您还可以像这样删除指定的模块：

```
,@("MyModule1","MyModule2") | %{&remove-module -erroraction:silentlycontinue $_} 
```

管道灵感来自[这里](https://stackoverflow.com/a/36428950/1915920)

所以帕特里克的单线会变成`Remove-Variable * -ErrorAction SilentlyContinue; ,@("MyModule1","MyModule2") | %{&Remove-Module -ErrorAction:SilentlyContinue $_}; $error.Clear(); Clear-Host`

# windows - 使用命令行删除目录及其文件，但如果不存在则不抛出错误

> ID：14502612
> 
> 赞同：103
> 
> 时间：2013-01-24T13:34:00.267
> 
> 标签：windows, batch-file, cmd

我需要一个 Windows 命令来删除一个目录及其所有包含的文件，但如果该目录不存在，我不想看到任何错误。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-01-24T13:36:46.793

将命令的输出重定向`del`到 nul。注意`2`, 表示错误输出应该被重定向。另请参阅[此问题](https://stackoverflow.com/questions/4507312/how-to-redirect-stderr-to-null-in-cmd-exe)，尤其是技术文档[Using command redirection operator](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490982(v=technet.10))。

```
del {whateveroptions} 2>null 
```

或者您可以在调用之前检查文件是否存在`del`：

```
if exist c:\folder\file del c:\folder\file 
```

请注意，您可以使用`if exist c:\folder\`（带有尾随`\`）来检查是否`c:\folder`确实是文件夹而不是文件。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-01-24T15:14:10.137

要么将 stderr 重定向到 nul

```
rd /q /s "c:\yourFolder" 2>nul 
```

或者在删除之前验证该文件夹是否存在。请注意，拖尾`\`在 IF 条件下至关重要。

```
if exist "c:\yourFolder\" rd /q /s "c:\yourFolder" 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2018-10-12T10:00:51.737

对我来说，在 Windows 10 上，以下工作非常好：

```
if exist <path> rmdir <path> /q /s 
```

`q`代表“不询问就删除”，`s`代表“删除其中的所有子文件夹和文件”。

您还可以连接命令：

```
(if exist <path> rmdir <path> /q /s) && <some other command that executes after deleting> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T13:45:44.193

您可以将 stderr 重定向到 nul

```
del filethatdoesntexist.txt 2>nul 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-24T14:15:07.730

上面在提示中出现了 Y 或 N。因此，我改用了以下内容，并且效果很好。

```
if exist cddd rmdir cddd 
```

希望这可以帮助某人。

干杯。

# javascript - 如何跳转到模态中的锚点？

> ID：14502617
> 
> 赞同：0
> 
> 时间：2013-01-24T13:34:10.963
> 
> 标签：javascript, jquery, html, jqmodal

所以我想一口气做 2 次锚点跳跃。一个用于父页面（这很容易），一个用于触发模式。

这就是我目前所处的位置。

1.  用户点击链接，例如。mydomain.com/page/#modal1-comment5

2.  页面处理片段，跳转到`<a name="modal1"></a>`并触发一个模态弹出（使用jqModal）并通过发送“comment5”到模态的PHP ajax文件`$_GET`。

3.  现在`<a name="comment5"></a>`存在于模式中，也可能存在于父页面中。这是因为父页面和模态共享代码来显示用户评论。

4.  在我尝试过的 ajax 文件中`'location.hash = "#comment5"'`，它在父页面上锚跳转。

5.  `comment5.scrollIntoView()`有点工作并跳转模态页面和父页面。

我的问题是，是否可以将跳转纯粹锚定在模态的 ajax 文件中而不影响父页面？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-30T10:53:21.680

试着做这个把戏。附加到链接到目标的文档隐藏锚点，以编程方式单击它并将其删除。像这样：

```
var getComments = $.ajax({
  url: '/some/url',
  success: function( response ){
    // here somehow you handle response and put it into a modal
    // thus <a name="commment5"></a> appeared in DOM
    $( document.body ).append( '<a href="#link_to_comment5" style="display:none"></a>' );
    $( '#link_to_comment5' ).click().remove();
  }
}); 
```

# php - 使用 Symfony 测试数据库插入

> ID：14502618
> 
> 赞同：4
> 
> 时间：2013-01-24T13:34:20.837
> 
> 标签：php, doctrine, symfony-2.1, functional-testing, liipfunctionaltestbundle

今天是个好日子，

在过去的几天里，我一直在研究测试驱动开发，并决定我也需要学习它。虽然我无法弄清楚如何精确地做到这一点。

我的项目依赖于 Symfony2.1.6 框架和 Doctrine，所以我有一些需要填充的数据库表。

> 书 (1,n) - (0,n) 类型

现在，如果我想插入流派记录，我首先需要编写一个测试以确保所有内容都按应有的方式插入（或者我错了吗？）

现在的问题是我不知道如何访问我的数据库，因为它是由框架管理的。

我唯一能找到的是 LiipFunctionalTestBundle [https://github.com/liip/LiipFunctionalTestBundle](https://github.com/liip/LiipFunctionalTestBundle)，它在我每次运行测试时都会创建和恢复一个临时数据库。我已经按照说明设置了所有内容。

***编辑：***我的 app/config/config_test.yml 现在看起来像这样：

```
imports:
    - { resource: config_dev.yml }

framework:
    test: ~
    session:
        storage_id: session.storage.filesystem

liip_functional_test: ~

web_profiler:
    toolbar: false
    intercept_redirects: false

swiftmailer:
    disable_delivery: true

liip_functional_test:
    cache_sqlite_db: true

doctrine:
    dbal:
        default_connection: default
        connections:
            default:
                driver:   pdo_sqlite
                path:     %kernel.cache_dir%/test.db 
```

所以现在我有一个 GenreTest 类：
Liip 没有文档，所以我只是尝试了这样的方法。

```
use Liip\FunctionalTestBundle\Test\WebTestCase;
class GenreTest extends WebTestCase {
    public function testInsert() {
        $container = $this->getContainer();
        $registry = $container->get('doctrine');
        $em = $registry->getEntityManager(null);       

        $genre = new Genre();
        $genre->setName("testGenre"); 

        $em->persist($genre);
        $em->flush();

        $result = $em->createQuery("SELECT g FROM QkprodMangressBundle:Genre g ".
                                  "WHERE g.name = :name")
                    ->setParameter("name", $genre->getName())
                    ->getResult();

        $this->assertEqual($result[0]->getName(), $genre->getName());
    }
} 
```

phpunit -c 网页/

> PDOException：找不到驱动程序/.../Mangress/vendor/doctrine/dbal/lib/Doctrine/DBAL/Driver/PDOConnection.php:36 /.../Mangress/vendor/doctrine/dbal/lib/Doctrine/DBAL /Driver/PDOSqlite/Driver.php :60 /.../Mangress/vendor/doctrine/dbal/lib/Doctrine/DBAL/Connection.php:350 /.../Mangress/vendor/doctrine/dbal/lib/Doctrine /DBAL/Connection.php:949 /.../Mangress/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php:306 /.../Mangress/vendor/doctrine/orm/lib/Doctrine/ORM /EntityManager.php:355 /.../Mangress/app/cache/test/jms_diextra/doctrine/EntityManager_510128d0a5878.ph p:362 /.../Mangress/src/Qkprod/MangressBundle/Tests/Entity/GenreTest.php： 27 次失败！测试：3，断言：1，错误：1。

我遇到的最大问题是..我如何测试这样的东西？或者我什至测试数据库通信？通过自定义实现来伪造数据库通信对我来说似乎不是一个好主意，因为它也会在生产环境中使用 ORM 和 Doctrine。

对不起..这里原来是一本小小说。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T14:44:10.727

我几乎完全通过以下方式解决了我的问题：

1.  安装 db-communication 所需的驱动程序；)
    [PDO_SQLITE 驱动程序不存在.. 怎么办？](https://stackoverflow.com/questions/8822209/pdo-sqlite-driver-not-present-what-to-do)

    ```
    sudo apt-get install php5-sqlite 
    ```

2.  在每次测试运行时重新创建架构
    [https://stackoverflow.com/a/10463614/1177024](https://stackoverflow.com/a/10463614/1177024)

* * *

**这是我对数据库的类测试**

```
namespace Qkprod\MangressBundle\Entity;

use Qkprod\MangressBundle\Entity\Genre;
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

    private $em;

    /**
     * Sets up environment for testing
     * Regenerates Database schema before every test-run
     */
    public function setUp() {
        static::$kernel = static::createKernel();
        static::$kernel -> boot();
        $this -> em = static::$kernel->getContainer()
                                     ->get('doctrine')
                                     ->getEntityManager();
        $this->regenerateSchema();
    }

    protected function tearDown() {
        parent::tearDown();
        $this -> em -> close();
    }

    /**
     * Drops current schema and creates a brand new one
     */
    protected function regenerateSchema() {
        $metadatas = $this->em->getMetadataFactory()->getAllMetadata();
        if (!empty($metadatas)) {
            $tool = new \Doctrine\ORM\Tools\SchemaTool($this->em);
            $tool -> dropSchema($metadatas);
            $tool -> createSchema($metadatas);
        }
    }

    public function testInsert() {
        $genre = new Genre();
        $genre -> setName("testGenre");

        $this -> em -> persist($genre);
        $this -> em -> flush();

        $result = $this -> em 
                    -> createQuery("SELECT g "
                                 . " FROM QkprodMangressBundle:Genre g " 
                                 . " WHERE g.name = :name") 
                    -> setParameter("name", $genre -> getName())
                    -> getResult();

        $this -> assertEquals($result[0] -> getName(), $genre -> getName());
    }
} 
```

无法让 LiipBundle 工作，但您可以通过设置 symfony 将 sqlite db 保存在内存而不是文件系统中来提高速度。 [https://stackoverflow.com/a/10460139/1177024](https://stackoverflow.com/a/10460139/1177024)

```
# app/config/config_test
doctrine:
    dbal:
        driver: pdo_sqlite
        path: :memory:
        memory: true 
```

或者可能只创建一次模式，而不是重新创建它，只需使用新备份覆盖数据库。

我希望这可以缩短一些有同样问题的人的搜索时间！感谢一路上帮助我的每个人：）你太棒了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:37:45.637

使用 symfony 文档再试一次。

[http://symfony.com/doc/2.0/cookbook/testing/doctrine.html](http://symfony.com/doc/2.0/cookbook/testing/doctrine.html)

或者您可以修改您的 TestCase 构造函数：

```
public function __construct()
{
    $kernelNameClass = $this->getKernelClass();
    $kernel = new $kernelNameClass('test', true);
    $kernel->boot();
    $this->em = $kernel->getContainer()->get('doctrine.orm.entity_manager');
} 
```

然后你将使用

```
$this->em->createQuery($dql); 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T04:10:45.600

您可以在`setUp()`方法内部进行连接：

```
/**
 * @var \Doctrine\ORM\EntityManager
 */
private $em;

/**
 * {@inheritDoc}
 */
public function setUp()
{
    static::$kernel = static::createKernel();
    static::$kernel->boot();
    $this->em = static::$kernel->getContainer()
        ->get('doctrine')
        ->getManager()
    ;
} 
```

[这里](http://symfony.com/doc/master/cookbook/testing/doctrine.html)是 Symfony 2.1 书中的一个例子

# kendo-ui - 单击时如何爆炸剑道饼图楔形？

> ID：14502620
> 
> 赞同：4
> 
> 时间：2013-01-24T13:34:22.570
> 
> 标签：kendo-ui, kendo-dataviz

我最初知道如何爆炸饼图楔形（只需将相关数据项的explode设置为true），但我想做的是让楔形在点击时爆炸，在JavaScript中（绑定到seriesClick事件的函数） . 自然，我希望重置任何其他已爆炸的楔子，以便一次只有一个已爆炸的楔子。

当然，我可以通过调用 Ajax 来获取图表，传递一个参数来指示被点击的楔形，但是这非常低效，并且可能慢得令人讨厌，具体取决于数据的连接和复杂性（和或所需的嘎吱声）。

我在其他地方找到了相同问题的答案，但建议的解决方案不适用于剑道图表（设置了剑道不支持的属性）。

如果有人在这方面有任何经验，我将不胜感激您对我的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T16:37:39.190

我在剑道论坛上发现了这个帖子，它要求同样的事情，看起来回复中可能有解决方案：

[http://www.kendoui.c​​om/forums/dataviz/chart/explode-slices-onseriesclick.aspx](http://www.kendoui.com/forums/dataviz/chart/explode-slices-onseriesclick.aspx)

它的要点是您需要更新数据中的“explode”字段，然后单击它后重新绘制图表。这可以通过“seriesClick”事件来完成：

```
 seriesClick: function(e){
        $( e.sender.dataSource.options.data ).each( function ( i, item ) {
              if ( item.source != e.category )
              {
                  item.explode = false;
              }
              else
              {
                  item.explode = true;
              }
        } );
        createChart();        
    } 
```

我基于此整理了一个有效的 JSFiddle：http: [//jsfiddle.net/derickbailey/FXs6b/](http://jsfiddle.net/derickbailey/FXs6b/)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-21T12:41:37.350

这是在 jQuery 的 Kendo UI 中进行“爆炸”的另一种方法：

```
seriesClick: function (e) {
  for (let i = 0; i < e.series.data.length; i++) {
    if (e.category === e.series.data[i].category) {
      e.series.data[i].explode = true;
    } else {
      e.series.data[i].explode = false;
    }
  }

  e.sender.setOptions(e.sender.options);
  e.sender.redraw();
}, 
```

无需重新创建图表。只需重置`options`and `redraw`。但是，如果您想重新创建图表，请确保`destroy`它正确。否则，将会有 HTML 残留物在附近徘徊。您最终可能会得到同一事物的多个图表。

# c# - 修改 C# Group By Code 以允许字段名称中的空格

> ID：14502626
> 
> 赞同：0
> 
> 时间：2013-01-24T13:34:40.727
> 
> 标签：c#, winforms

这是参考此答案中提供的代码：@Tim-Schmelter[在此处输入链接描述。](https://stackoverflow.com/questions/8472005/efficient-datatable-group-by/8472044#8472044)

代码是按特定列对 DataTable 进行分组，并向列（数据透视）添加计数：

```
 public DataTable GroupBy(string i_sGroupByColumn, string i_sAggregateColumn, DataTable i_dSourceTable)
    {

        DataView dv = new DataView(i_dSourceTable);

        //getting distinct values for group column
        DataTable dtGroup = dv.ToTable(true, new string[] { i_sGroupByColumn });

        //adding column for the row count
        dtGroup.Columns.Add("Count", typeof(int));

        //looping thru distinct values for the group, counting
        foreach (DataRow dr in dtGroup.Rows)
        {
            dr["Count"] = i_dSourceTable.Compute("Count(" + i_sAggregateColumn + ")", i_sGroupByColumn + " = '" + dr[i_sGroupByColumn] + "'");
        }

        //returning grouped/counted result
        return dtGroup;
    } 
```

但是，我的数据表有一列（我无法更改），字段名称中有一个空格，即：“解决方案 ID”

当我将它传递到上面的代码中时，使用这个：

```
DataTable Solutions = GroupBy("Solution ID", "Solution ID", tbQ); 
```

...我收到错误：**语法错误：“ID”运算符后缺少操作数。**

我试过用[]封装，将空格修改为+，但它不起作用。

是否可以修改上面的代码，以接受其中有空格的列？

谢谢你，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:04:11.590

> 我试过用[]封装，将空格修改为+，但它不起作用。

好吧，将空间更改为`+`肯定行不通，但应该封装在括号中。尝试

```
if(!i_sAggregateColumn.StartsWith("["))
    i_sAggregateColumn = "[" + i_sAggregateColumn + "]";

if(!i_sGroupByColumn.StartsWith("["))
    i_sGroupByColumn = "[" + i_sGroupByColumn + "]"; 
```

Note that if your column name already contains brackets [you'll have to try something else](http://forums.asp.net/t/1599984.aspx/1).

# math - 计算地理点在西北/东南轴上的位置

> ID：14502627
> 
> 赞同：0
> 
> 时间：2013-01-24T13:34:45.437
> 
> 标签：math, coordinates, geography, gis

经度可以看作是地理点沿西/东轴的位置和沿北/南轴的纬度吗？

如何使用上述数据计算地理点在西北/东南轴上的位置？

这对我研究沿这样一个轴的生物学特征值的变化很有用。

# jqgrid - jqGrid垂直滚动条

> ID：14502628
> 
> 赞同：5
> 
> 时间：2013-01-24T13:34:46.227
> 
> 标签：jqgrid

是否可以让 jqGrid 插入垂直滚动条而不是在寻呼机请求新行时增加其高度？

我目前的代码如下：

```
$("#grid").jqGrid({
url:'/someUrl',

datatype:"json",
mtype:'GET',
shrinkToFit:true,
forceFit:true,
autowidth:true,
altRows:true,
cellEdit:true,
altclass:'altRowClass',
multiselect:true,
rowNum:15,
height:300,
rowList:[15, 50, 100, 1000],    
rowNum:15    

}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T13:55:58.063

如果我正确理解您的问题，您可以添加 CSS，例如

```
.ui-jqgrid .ui-jqgrid-bdiv { overflow-y: scroll } 
```

强制在网格中显示垂直滚动条。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T13:39:46.810

尝试

```
 scrollerbar:true
 height:"200" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T11:36:16.893

这成功了：

```
.ui-jqgrid-bdiv{
    max-height: 340px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-30T03:59:13.823

垂直滚动

```
gridComplete: function () {
                $('#gbox_workshopPersonGrid .ui-jqgrid-bdiv').css({ 'height': '100%', 'max-height': '450px', 'overflow-y': 'scroll', 'overflow-x': 'hidden' });
            } 
```

注意：workshopPersonGrid 是您的网格名称

# http-caching - PHP生成的图片预加载

> ID：14502641
> 
> 赞同：2
> 
> 时间：2013-01-24T13:35:35.043
> 
> 标签：http-caching

我有一个头像加载动画，它在加载时被交换为图像：

```
 var avvy = $.trim("/"+this.mycoach.avatar);
    this.tmpImg = new Image() ;
    this.tmpImg.src = avvy;
    $(this.tmpImg).load( function() {
        $(contentDiv).find(".photo").css('background-image',"url("+avvy+")");
    });
} 
```

它有效 - 加载图像后，背景被交换为头像。但是浏览器随后会向同一图像发送一个新请求....

图片网址如下：

`/avatar_fb.php?fbid=*****&width=80&height=80&token=3547***52`

我可以强制浏览器缓存该图像吗？或服务器端代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:46:43.577

是的，您可以使用服务器端代码来实现。查看[其他 stackoverflow 答案](https://stackoverflow.com/a/1037059)- 特别是 PHP 的片段，了解如何设置 HTTP“过期”标头。

URL 末尾的查询字符串是导致浏览器不缓存文件的原因。浏览器承认任何带有“？”的 URL 在文件名可能是动态之后，因此它不会缓存它。一种解决方案是使用[URL 重写](http://blog.akilles.org/2009/01/10/caching-of-php-scripts-with-query-strings/)，这样您就可以使用类似 的 url 来获取图像`/avatar/<fbid>/<token>/<width>/<height>`，这实际上是在诱使浏览器认为它正在请求静态内容，并因此对其进行缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:05:44.643

正如评论中所说：您可以使用元素 tmpImg 将图像附加到 .photo div，但图像将是 dom 元素，而不是作为 .photo div 的背景。这样就行了。

这是小提琴：http: [//jsfiddle.net/wHPjJ/](http://jsfiddle.net/wHPjJ/)

```
tmpImg = new Image();
tmpImg.src = "http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5";

$(tmpImg).load( function() {
    $(".photo").append(tmpImg); // this instead of tmpImg would also work
}); 
```

# c# - 将不存在的多个文件拖放到资源管理器

> ID：14502643
> 
> 赞同：3
> 
> 时间：2013-01-24T13:35:37.107
> 
> 标签：c#, drag-and-drop

我想将列表框的元素拖放到资源管理器中。我复制了一个不存在的文件，如本文所述，并对程序代码进行了一些更改：[如何使用 filegroupdescriptor 将文件拖动到资源管理器 c#](https://stackoverflow.com/questions/1845654/how-to-use-filegroupdescriptor-to-drag-file-to-explorer-c-sharp)

```
private void listView1_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.None)
        return;

    byte[] array = Encoding.ASCII.GetBytes("ABCD");
    DataObject dataObject = new DataObject();
    DragFileInfo filesInfo = new DragFileInfo(@"myFile.txt", array);
    MemoryStream infoStream = GetFileDescriptor(filesInfo);
    MemoryStream contentStream = GetFileContents(filesInfo);
    dataObject.SetData(CFSTR_FILEDESCRIPTORW, infoStream);
    dataObject.SetData(CFSTR_FILECONTENTS, contentStream);
    dataObject.SetData(CFSTR_PERFORMEDDROPEFFECT, null);
    // drag and drop file with name "myFile.txt" and body "ABCD".
    DoDragDrop(dataObject, DragDropEffects.All);
}
private MemoryStream GetFileContents(DragFileInfo fileInfo)
{
    MemoryStream stream = new MemoryStream();
    if (fileInfo.SourceFileBody.Length == 0) fileInfo.SourceFileBody = new Byte[1];
    stream.Write(fileInfo.SourceFileBody, 0, fileInfo.SourceFileBody.Length);
    return stream;
}

public struct DragFileInfo
{ 
    public string FileName; 
    public byte[] SourceFileBody; 
    public DateTime WriteTime; 
    public Int64 FileSize;

    public DragFileInfo(string fileName, byte[] sourceFileBody)
    {
        FileName = fileName;
        SourceFileBody = sourceFileBody;
        WriteTime = DateTime.Now;
        FileSize = sourceFileBody.Length;
    }
} 
```

这工作正常，但我需要同时拖放多个文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:49:54.983

我有同样的问题。我在那里找到了解决方案：http: [//www.codeproject.com/Articles/23139/Transferring-Virtual-Files-to-Windows-Explorer-in](http://www.codeproject.com/Articles/23139/Transferring-Virtual-Files-to-Windows-Explorer-in)

您需要重写 DataObject 类的方法：GetData(); 例如：

```
 public override object GetData(string format, bool autoConvert)
    {
        if (String.Compare(format, CFSTR_FILECONTENTS, StringComparison.OrdinalIgnoreCase) == 0)
        {
            base.SetData(CFSTR_FILECONTENTS, GetFileContents(FileIndex++));
        }
        return base.GetData(format, autoConvert);
    } 
```

# nservicebus - 在运行时更改 NSB 时间表

> ID：14502647
> 
> 赞同：0
> 
> 时间：2013-01-24T13:35:44.640
> 
> 标签：nservicebus

我可以看到[这里](https://github.com/NServiceBus/NServiceBus/issues/search?q=schedule)有一些关于 NServiceBus 调度程序的工作计划。

那么目前在运行时更改时间表的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:09:00.780

以下是我们通过 fluent 配置实现的方法：

```
public static class ConfigureTaskStorage
{
    public static Configure UseConfigFileStorageForTaskSchedule(this Configure config)
    {
        if (null == config)
            throw new ArgumentNullException("config");

        config.Configurer.ConfigureComponent<ITaskScheduleStorage>(()=> new ConfigStorage(),DependencyLifecycle.SingleInstance);
        return config;
    }
} 
```

# google-maps-api-3 - 如何检查用户是否点击了哪些航点之间的路线（谷歌地图方向）

> ID：14502649
> 
> 赞同：2
> 
> 时间：2013-01-24T13:35:49.590
> 
> 标签：google-maps-api-3

我是谷歌地图服务的新手，能够在给定的起点和终点以及航路点之间呈现路线。在同一个应用程序中，我们允许用户点击显示的路线。现在，我的问题是从点（用户点击）找到最近的路点。

例如：起点：A 航点：B 航点：C 目的地：D

现在，如果用户在 A&B 或 B&C 或 C&D 之间单击，如何进入 java 脚本？

其紧急，任何帮助将不胜感激！

谢谢！

# java - 使用枚举参数自动推断返回类型

> ID：14502654
> 
> 赞同：4
> 
> 时间：2013-01-24T13:36:02.567
> 
> 标签：java, generics, enums

如果我将枚举作为 Java 中的方法的参数，是否可以自动推断返回类型？

我希望能够通过使 getValue 通用并使用枚举中的信息来支持这些调用

```
String myval = obj.getValue(MyEnum.Field1)
int myval2 = obj.getValue(MyEnum.Field2) 
```

**当前解决方案**

我目前的解决方案是这样的：

`String val = typeRow.getColumnValueGen(TYPEGODKENDCRM.COLUMN_TYPEGODKENDNR, String.class)`

它用于访问表的 ORM 表示中的列。我知道这个字段是一个字符串，我想避免在每次调用时都告诉它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:39:46.907

> 如果我将枚举作为 Java 中的方法的参数，是否可以自动推断返回类型？

不，你不能在 Java 中通过返回类型重载方法，如果你想要类似的东西：

```
public <T> T getValue(MyEnum enumValue) 
```

编译器无法`T`根据参数进行推断。类型推断在*某些*情况下可以工作，但不是这样。编译器无法检查参数的某些方面并根据该值推断甚至验证类型。

*除此之外，如果参数不是*编译时常量，您希望它做什么？

```
MyEnum x = getEnumValue();
// Is this valid or not?
String myVal = obj.getValue(x); 
```

基本上，您*必须*强制转换返回值......在 的情况下`int`，您需要强制转换为`Integer`而不是`int`，然后让自动拆箱完成剩下的工作。

就我个人而言，我只是创建多种方法：

```
String x = obj.getString(...);
int y = obj.getInt(...); 
```

这没有歧义的余地，不需要任何聪明的泛型等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:39:37.090

一句话：不。您必须将 getValue 声明为返回 Object，然后将返回的对象转换为实际类型。不漂亮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T13:41:01.837

试试这个：

```
Object getValue(MyEnum returnType) {
    if (returnType == MyEnum.STRING) {
        String myString = ...
        return myString;
    }
    else if (returnType == MyEnum.INT) {
        int myInt = ...
        return Integer(myInt);
    }
} 
```

然后：

```
String myval = (String) obj.getValue(MyEnum.Field1);
int myval2 = ( (Integer) obj.getValue(MyEnum.Field2) ).intValue(); 
```

请注意，您必须使用引用类型才能使其工作，因此您需要`Integer`s 而不是`int`.

顺便说一句，我不会推荐这个。如果您想提供更多有关您正在尝试做的事情的信息，我们可能会建议一种更好的方法。

# c# - 如何知道上一页？

> ID：14502655
> 
> 赞同：3
> 
> 时间：2013-01-24T13:36:06.623
> 
> 标签：c#, asp.net

我有两个不同的页面，但都进入同一个页面`X`。当我到达页面`X`时，有可能知道最后一页是什么？我的意思是，重定向到 page 的页面是什么`X`。

例如：我打开了`page1.aspx`，我有一个重定向到的按钮`bonus.aspx`，但我也有 `page2.aspx`另一个按钮，但也重定向到`bonus.aspx`。是否可以知道重定向到的页面是什么`bonus.aspx`？最后一页是什么？

我需要知道它，因为我会`bonus.aspx`根据上一页修改 的内容。

我只想做这样的事情：

```
protected void bonus_load(object sender, EventArgs e)
  {
     if(PreviousPage.Name == "page1.aspx")
         {
           //Do Something
         }
     else if(PreviousPage.Name == "page2.aspx")
         {
            //Do Other Things
         }
  } 
```

Obs：我需要在一个`button_OnClick="" Event`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:37:56.993

```
protected void bonus_load(object sender, EventArgs e)
{
    string previousPage = HttpContext.Current.Request.UrlReferrer.AbsolutePath;

    if (previousPage == "/page1.aspx")
    {
        //Do Something
    }
    else if (previousPage == "/page2.aspx")
    {
        //Do Other Things
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T13:38:06.820

在`Page_Load`函数中：

```
 if(!Page.IsPostback)
   {
     var referrer = Request.UrlReferrer.ToString();
   } 
```

更新：以下方法调用将以类似于“/Page1.aspx”的格式返回您。

```
var referrer = Request.UrlReferrer.AbsolutePath 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T13:38:16.220

您可以使用 UrlReferer 属性。更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)

# ruby-on-rails - 如何将当前控制器的名称放入我的辅助函数中？

> ID：14502656
> 
> 赞同：2
> 
> 时间：2013-01-24T13:36:09.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我还是 Rails 的新手，我有以下内容`section_links`作为我的 Rails 应用程序的主要导航：

```
<%= section_link(Organisation.model_name.human(:count => 2), 'organisations', organisations_path) %>
<%= section_link(Person.model_name.human(:count => 2), 'people', people_path) %>
<%= section_link(Project.model_name.human(:count => 2), 'projects', projects_path) %>           
<%= section_link(Invoice.model_name.human(:count => 2), 'invoices', invoices_path) %>       
<%= section_link(Payment.model_name.human(:count => 2), 'payments', payments_path) %> 
```

我还写了这个非常基本的辅助函数：

```
def section_link(title, section, path)
  options = {}  
  options[:class] = 'current' if section == controller_name
  link_to title, path, options
end 
```

有什么办法可以干掉这个辅助函数，所以我可以这样说来建立一个链接：

`<%= section_link("Organisations") %>`

我已经尝试了几个小时，但我不知道如何将当前控制器的名称传递给我的辅助函数。

感谢您对此的任何帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:45:38.207

尝试：[params[:controller] 或 controller.controller_name](http://railsforum.com/viewtopic.php?id=29677)

```
<%= section_link(params[:controller], Organisation.model_name.human(:count => 2), 'organisations', organisations_path) %>

def section_link(current_controller, title, section, path)
 options = {}  
 options[:class] = 'current' if section == controller_name
 link_to title, path, options
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:09:20.940

也许像

```
def section_link(model)
   title = model.singularize.capitalize.constantize.model_name.human(:count => 2)
   section = model.downcase.pluralize
   path = {controller: model.pluralize.downcase, action: :index }
   options = {}  
   options[:class] = 'current' if section == controller_name
   link_to title, path, options
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T13:46:21.703

您可以尝试`request.params[:controller]`在 helper 中获取控制器名称。我不确定它是否有效，但我相信你可以从 params 获取控制器名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T13:45:53.120

```
def current_link_to label, path, options = nil
    options ||= {} 
    options[:class] =  [options[:class], (current_page?(path) ? "active" : nil)].compact.join(" ")
    link_to label, path, options
end 
```

# odbc - MySQL ODBC 3.51 - 如何从 ODBC GUI 禁用连接池？

> ID：14502660
> 
> 赞同：2
> 
> 时间：2013-01-24T13:36:18.523
> 
> 标签：odbc, connection-pooling

如何通过 ODBC GUI 在 Windows7/Server2008 上禁用 MySQl ODBC Driver 3.51 的连接池？

我在应用程序级别进行自己的连接池，在需要时建立连接，并将它们存储一段固定的时间，直到不使用时终止它们。

我使用 ODBC 的 DSN 字符串，因此我需要能够从 ODBC 配置屏幕设置“Pooling=False”选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:51:35.373

找到了...

32 位 ODBC GUI 从 C:\Windows\SysWow64\odbcad32.exe 启动。在这个 GUI 中，第一个屏幕上有一个名为“Connection Pooling”的选项卡。单击此按钮，您将获得驱动程序列表。右侧有第二列显示“池超时”。双击选择的驱动程序名称以更改其池设置。

64 位 ODBC GUI 是 C:\Windows\System32\odbcad32.exe，工作方式相同，但您加载的驱动程序可能会少得多，因此名称会更短，并且“池超时”列将可见而无需向右滚动。

请注意，默认情况下，MySQL 驱动程序设置为不合并。希望对使用“DSN=MySQL_DSN”类型参考并且必须使用 GUI 配置驱动程序设置的其他人有所帮助。

# oracle - 如果特定值的数据不存在，Oracle 查询以显示一些模板消息？

> ID：14502663
> 
> 赞同：0
> 
> 时间：2013-01-24T13:36:21.657
> 
> 标签：oracle, nvl

我想为表格中不存在的值显示一些模板消息。

*示例*：

```
select table_name from all_tables where table_name in('RAM','SHA,','EMPLOYEE','E_SCHOOL'); 
```

在上面给定的 4 个表中，只有**EMPLOYEE**表在那里，所以我想不显示其他结果的值，而不是不显示任何值。

我为此尝试了 nvl

```
select nvl(table_name,'NO VALUE') from all_tables where table_name in('RAM','SHA,','EMPLOYEE','E_SCHOOL'); 
```

但结果仍然没有到来

有什么建议可以得到结果..？

在此先感谢，请原谅我在 DB 中的任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:06:50.713

如果你想显示每一行，只显示`NO VALUE`少数几个，你不需要加入一个单独的表。您只需转换 select 子句中的值：

```
select case when table_name in ('RAM', 'SHA', 'E_SCHOOL') then
         'NO VALUE'
       else
         table_name
       end table_name
from   all_tables; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:46:16.820

您的查询会选择其中`all_tables`包含、或`table_name`的所有记录。如果 only存在，那么只会返回该记录，并且当您使用时——它会按照你的想法做——它会正确显示表名。您对.`RAM``SHA``EMPLOYEE``E_SCHOOL``EMPLOYEE``NVL``in`

做你正在寻找的东西更复杂：

```
with tablesImLookingFor as (
  select 'RAM' table_name from dual union all
  select 'SHA' table_name from dual union all
  select 'EMPLOYEE' table_name from dual union all
  select 'E_SCHOOL' table_name from dual
)
select    tablesImLookingFor.table_name,
          nvl(all_tables.table_name, 'Not found') table_exists
from      tablesImLookingFor
left join all_tables
on        all_tables.table_name = tablesImLookingFor.table_name; 
```

...这将返回类似：

```
table_name   table_exists
============ =============
RAM          Not found
SHA          Not found
EMPLOYEE     EMPLOYEE
E_SCHOOL     Not found 
```

但是，有更好的方法来实现检查匹配；使用内部连接可以在没有所有`nvl`业务的情况下完成。

无论如何，总而言之，您使用`NVL`正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:46:24.073

```
with table_names (table_name) as (
    select 'RAM' from dual
    union all
    select 'SHA' from dual
    union all 
    select 'EMPLOYEE' from dual
    union all 
    select 'E_SCHOOL' from dual
)
select nvl(at.table_name, 'NO VALUE')
from table_names tn
  left join all_tables at on at.table_name = tn.table_name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:01:06.437

我很困惑，因为其他两个答案都很好。是不是你不想一直输入“from dual”等？如果是这样，则较短的版本是：

```
create type varchar2_tab as table of varchar2(30);
/
with tables as (select value(t) table_name
                  from table(varchar2_tab('RAM','SHA','EMPLOYEE','E_SCHOOL')) t)
select my_tab.table_name, nvl2(t.table_name, 'FOUND', 'NOT FOUND')
  from tables my_tab
       left outer join all_tables t
                    on t.table_name = my_tab.table_name; 
```

或者如果您无法创建自己的类型：

```
with tables as (select value(t) table_name
                  from table(sys.DBMSOUTPUT_LINESARRAY(
                          'RAM','SHA','EMPLOYEE','E_SCHOOL')) t)
select my_tab.table_name, nvl2(t.table_name, 'FOUND', 'NOT FOUND')
  from tables my_tab
       left outer join all_tables t
                    on t.table_name = my_tab.table_name; 
```

你可以看到可用的公共收藏

```
 select owner, type_name, coll_type, upper_bound, length 
   from all_coll_types 
  where elem_type_name = 'VARCHAR2' and length >= 30 
```

*   使用 ALL_TABLES ，您正在查看许多模式而不包括所有者子句。您应该穿上 ( `n t.table_name = my_tab.table_name and t.owner = 'XX'`) 或者，如果您以表所有者身份连接，则只需使用用户视图

# c# - 在 C# 中使用 SQLite

> ID：14502665
> 
> 赞同：0
> 
> 时间：2013-01-24T13:36:27.650
> 
> 标签：c#, sqlite

我正在尝试使用简单的 SQLite 数据库开发一个简单的应用程序。我是 C# 新手，所以我可能错过了一些明显的东西。当我运行以下代码时，它返回错误：

**SQL 逻辑错误或缺少数据库。没有这样的表：客户** （编辑：是的，我已经在数据库中创建了该表，我使用 sqlite 命令提示符执行/确认了这一点

这是我的代码：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.SQLite;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Text;
using System.Windows.Forms;

namespace TestPersonDatabase
{
public partial class DBconnection : Form
{
    SQLiteDatabase sqliteDb = new SQLiteDatabase();

    public DBconnection()
    {
        InitializeComponent();
    }

    // Using SQLite
    private void btnInsert_Click(object sender, EventArgs e)
    {

        Dictionary<String, String> data = new Dictionary<String, String>();
        data.Add("CustomerId", this.fieldInsertId.Text);
        data.Add("FirstName", this.fieldInsertFName.Text);
        data.Add("LastName", this.fieldInsertLName.Text);
        data.Add("MobileNumber", this.fieldInsertDob.Text);

        try 
        {
            sqliteDb.Insert("Customer", data);
        }
        catch(Exception error)
        {
            MessageBox.Show(error.Message);
        }
    }
}

class SQLiteDatabase
{    String dbConnection;

public SQLiteDatabase()
{
    dbConnection = "Data Source=" + (global::TestPersonDatabase.Properties.Resources.database);
}

    public bool Insert(String tableName, Dictionary<String, String> data)
{
    String columns = "";
    String values = "";
    Boolean returnCode = true;
    foreach (KeyValuePair<String, String> val in data)
    {
        columns += String.Format(" {0},", val.Key.ToString());
        values += String.Format(" '{0}',", val.Value);
    }
    columns = columns.Substring(0, columns.Length - 1);
    values = values.Substring(0, values.Length - 1);
    try
    {
        this.ExecuteNonQuery(String.Format("insert into {0}({1}) values({2});", tableName, columns, values));
    }
    catch (Exception fail)
    {
        MessageBox.Show(fail.Message);
        returnCode = false;
    }
    return returnCode;
} 
```

显然，上面的代码是两个不同的类放在一起。只是让您更容易阅读。

好像找不到数据库文件。但我似乎已经正确地将它链接起来（它在解决方案资源中）。任何帮助将不胜感激，因为我有点难过！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:42:01.790

您从未打开过您的 sql 连接尝试：

```
 dbConnection.Open();  //Initiate connection to the db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:59:23.190

看起来您没有创建表。

在输入任何数据之前，您需要使用以下内容创建表：

```
this.ExecuteNonQuerySQL("CREATE TABLE Customers(CustomerID INTEGER PRIMARY KEY, sPassword TEXT, CustomerName TEXT);"); 
```

创建表格后，您拥有的插入代码应该可以正常工作。

# android - 如何以编程方式获取android中其他应用程序的启动时间？

> ID：14502668
> 
> 赞同：1
> 
> 时间：2013-01-24T13:36:43.710
> 
> 标签：android, time, launch

我想获取android中所有应用程序的启动时间。请向我建议任何解决方案来实现这一目标。我正在使用此代码。它是杀死非系统应用程序。但它也不起作用。任何人都可以提出任何解决方案。谢谢

```
timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {   
           List<RunningAppProcessInfo> appProcesses= activityManager.getRunningAppProcesses();
        for (RunningAppProcessInfo appProcess : appProcesses) {
            try {
            if (appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND) {
            if (!lastFrontAppPkg.equals((String) appProcess.pkgList[0])) {
            apkInfo = ApkInfo.getInfoFromPackageName(appProcess.pkgList[0], mContext);
                if (apkInfo == null || (apkInfo.getP().applicationInfo.flags && ApplicationInfo.FLAG_SYSTEM) == 1) {
                  // System app                                             continue;
                        } else if (((apkInfo.getP().versionName == null)) || (apkInfo.getP().requestedPermissions == null)) {
                    //Application that comes preloaded with the device
                        continue;
                     } else {
                     lastFrontAppPkg = (String) appProcess.pkgList[0];
                     }
    //kill the app
    //Here do the pupop with password to launch the lastFrontAppPkg if the pass is correct
                         }
                      }
                   }
                 } catch (Exception e) {
                  //e.printStackTrace();
                }
               }                        
             }
           }, 0, 1000); 
```

# r - 定量风险评估模型

> ID：14502671
> 
> 赞同：-12
> 
> 时间：2013-01-24T13:36:46.983
> 
> 标签：r, statistics, simulation

```
N=1000
alpha=0.1 

zerosandones = rbinom(N, 1,alpha)

vector1=sample(c("raw","cooked"),1000,T,prob=c(0.12,.88))
vector1

densf=NULL
densft=NULL

for (i in (1:N))
{   
  if (zerosandones[i]==1 && vector1[i]=="raw") {densf[i] = 1} 
  else {if(zerosandones[i]==1 && vector1[i]=="cooked") {densft[i] <- rbinom(1, 1,alpha*0.2)}
  else {if (zerosandones[i]==0 && vector1[i]=="raw") {densf[i]=0} 
  else {if (zerosandones[i]==0 && vector1[i]=="cooked") {densft[i]=0}}}}}
densft
densf 
```

嘿伙计，

我是 R 新手，正在构建定量风险评估模型。简单地说，这里的想法是我们生成一个 1000 个 0 和 1 的样本，每个 0,1 都有一个生/熟相关联。所有 0 都被丢弃，我们进一步分析 1。因此，例如，如果有一个 1 并且它的 raw 那么新的 densf 应该等于 1 否则 0。类似地，如果有一个 1 并且它的熟的那么新的 densft 应该等于 1（基于二项式 rv 与在上述情况下，alpha 为 0.02，否则为 0。

也就是说，我需要一些帮助，因为“densf”和“densft”会产生一堆`NaN`值，将 0 和 1 放在错误的位置。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T14:03:17.673

Here's an efficient vectorized solution:

```
N=1000
alpha=0.1 
zerosandones = rbinom(N, 1,alpha)
vector1=sample(c("raw","cooked"),1000,T,prob=c(0.12,.88))

# new code:
densf <- as.integer(zerosandones & vector1 == "raw")
densft <- (zerosandones & vector1 == "cooked") * rbinom(N, 1, alpha*0.2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T13:49:44.527

学习 R 编程时，最重要的事情之一是考虑向量操作而不是循环。您在两个向量中得到`NA`s （与`NaN`R 中的不同），因为您没有填充所有位置：您只填充了`densf`您拥有的位置和您拥有`"raw"`的位置。你想让 R 用什么来填充其余的空间？是默认值，但如果需要，您可以用其他内容（例如零）填充它们。这就是我在下面所做的。`densft``"cooked"``NA`

```
# your code
N=1000
alpha=0.1 

zerosandones = rbinom(N, 1,alpha)

vector1=sample(c("raw","cooked"),1000,T,prob=c(0.12,.88))

# my code
densf <- ifelse(zerosandones == 1 & vector1 == "raw", 1, 0)
densft <- ifelse(zerosandones == 0 & vector1 == "raw", rbinom(N, 1,alpha*0.2), 0) 
```

注意事项：

*   的使用`ifelse`，它是 的矢量化形式`if`。
*   的使用`&`，它是 的矢量化形式`&&`。
*   没有循环！R中的循环很慢。考虑向量需要一些调整，但几乎总是更好。

当我运行这个时，我得到了 12 个`densf`和 3 个`densft`，这是我所期望的。如果这不是*您*所期望的，那么您需要更好地解释您在这里尝试做什么以及为什么您期望不同的东西。

# html - 使用 min-width 将 div 宽度设置为 % 不起作用。最小宽度总是赢。

> ID：14502676
> 
> 赞同：1
> 
> 时间：2013-01-24T13:37:02.353
> 
> 标签：html, width, aspect-ratio, css

我的宽度有问题：20%；被我的最小宽度覆盖：30px；（参见css框中的第22和23行：http: [//jsfiddle.net/dLmnX/](http://jsfiddle.net/dLmnX/)）

我也是第一次使用纵横比：我从[http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)中挑选并切碎了代码。

代码的纵横比部分：

```
 #aspect {
      padding-top: 120%; /* aspect ratio */
  } 
```

似乎工作正常，它只是这个 div 中的宽度：

```
 #shuffle1 {
    display: inline-block;
    margin: 0px auto;
    position: relative;
    width: 20%;
    min-width: 30px;        
  } 
```

任何帮助都会很棒！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:06:40.453

罪魁祸首是`#two`元素的样式。

[http://jsfiddle.net/dLmnX/2/](http://jsfiddle.net/dLmnX/2/)

```
 #two {
    display: inline-block;
  } 
```

当您将宽度指定为百分比时，它是相对于父元素的大小。因为`#two`非常小，所以 20% 不可能大于 30px。设置为 inline-block 的元素将尝试占用尽可能少的空间。

# java - 对 Method 或 MethodHandle 的建议

> ID：14502681
> 
> 赞同：0
> 
> 时间：2013-01-24T13:37:22.287
> 
> 标签：java, reflection, aspectj

我需要将 Advice Object 从 AspectJ 转换为 java.lang.invoke.MethodHandle。我可以通过将 Advice 转换为 java.lang.reflect.Method，然后使用 java.lang.reflect.MethodHandles.Lookup.unreflect 来做到这一点。但是如何将 AspectJ Advice 转换为 java.lang.reflect.Method？有人有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:59:12.033

我的主管有一个想法，我们用一点技巧解决了它。

```
Advice adv;
Method m = null;
Field field = AdviceImpl.class.getDeclaredField("adviceMethod");
field.setAccessible(true);
m = (Method) field.get(adv); 
```

# orm - Propel 和 SQL 聚合函数

> ID：14502683
> 
> 赞同：1
> 
> 时间：2013-01-24T13:37:31.033
> 
> 标签：orm, symfony-1.4, propel

下面的 SQL 查询在 Propel (1.4) 中是什么样子的？

```
SELECT SUM(`price_equipment`) FROM `order_equipment` WHERE `order_id` = 57072; 
```

我用谷歌做了一些研究，但我发现的所有例子都考虑到了 GROUP BY 子句。我只需要一个值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T16:55:18.777

在这里添加分组语句不会有什么坏处，因为它有助于汇总您的语句，只需按您的 orderId 分组。如果您不希望分组，只需删除该行。

```
$value = OrderEquipmentQuery::create()
          ->withColumn('SUM(price_equipment)')
          ->filterByOrderId(57072)
          ->groupByOrderId()
          ->find() 
```

这就是您在 1.6 中的操作方式，对于 1.4，我将查看 j0k 给出的示例，但请记住，在查询中按 orderId 分组可能是安全的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:31:45.467

我认为 Propel 1.4 的语法类似于：

```
$c = new Criteria();
$c->add(OrderEquipmentPeer::ORDER_ID, $orderId);
TestPeer::addSelectColumns($c);
$c->addAsColumn('price_sum', 'SUM('.OrderEquipmentPeer::PRICE_EQUIPMENT.')');
$results = OrderEquipmentPeer::doSelectStmt($c); 
```

从 1.4 开始很难找到文档，因为他们已经杀死了 propelorm.org 上的旧 wiki，但我认为这是正确的。正如我在其他评论中所说，您应该考虑升级到 Propel 1.6，因为它具有更多功能和更好的稳定性。据我所知，1.4 分支根本没有得到维护。

# performance - 使用 SQLite 的 cmd.ExecuteReader() 在 SQLite 管理器中速度很慢但速度很快

> ID：14502684
> 
> 赞同：1
> 
> 时间：2013-01-24T13:37:34.067
> 
> 标签：performance, sqlite, sqlitemanager, executereader

我计划使用 SQLite 作为本地数据库。我在 SQLite 管理器（Firefox 插件）中使用“group by”和“order by”创建了一个复杂的 Select 语句。查询在 SQLite 管理器中运行大约**600 毫秒。**在我的 C# 应用程序中，我创建了一个具有相同查询的 SQLiteCommand，并且 cmd.ExecuteReader() 方法大约需要**60 秒**才能完成。我正在使用 System.Data.SQLite.dll。“ANALYZE”和“VACUUM”命令都没有改善执行时间。

谁能告诉我如何获得与 SQLite Manager 相同的执行时间？

马蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-21T08:46:59.787

我只使用 select 简化了查询，并通过 linq 在代码中进行了分组。那不是最好的解决方案，但它对我有用

# regex - 正则表达式从数字中排除确切数字

> ID：14502691
> 
> 赞同：0
> 
> 时间：2013-01-24T13:37:58.193
> 
> 标签：regex

你好，我的梦想建设者。

我正在从 twitter 解析时间，我正在使用这个正则表达式：

```
 {

        match = /^[1]/.exec(obj.tweetTime);
        if(match != null){
            time = "1 hour ago";
        }
        else
        {
        match = /^[0-9]{1,2}/.exec(obj.tweetTime);
        time = match + " hours ago";
        }
    } 
```

我的问题是，是否有更简单的方法可以做到这一点？如您所见，我的时间有 2 位数字。我只想正确格式化我的打印。如您所见，小时/小时。

是否可以只写 1 个正则表达式并只使用 1 个条件括号？

PS：我是正则表达式的初学者，我知道 /^[0-9]{1,2}/ 实际上允许从 0 到 99 的数字，但正如我所说，它可以满足我的需要，只是询问是否可以这样做这是正确的，因为我缺乏知识。

谢谢你，非常喜欢<3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:55:34.507

我会这样做：

```
var match = obj.tweetTime.match(/^\d+$/);

if (match) {
  var time = match[0] + ' hour' + (match[0] == 1 ? '' : 's') + ' ago';
} 
```

* * *

**编辑**原来字符串已格式化！在这种情况下：

```
var match = obj.tweetTime.match(/^(\d+)([smhd])$/);

if (match) {
  var units = { s: 'second', m: 'minute', h: 'hour', d: 'day' },
      time  = match[1] + ' ' + units[match[2]] + (match[1] == 1 ? '' : 's') + ' ago';
} 
```

解释正则表达式：

```
^         Anchor matches to the beginning of the string
(\d+)     Capture one or more digits in first group
([smhd])  Capture s, m, h or d in second group
$         Anchor to end of string 
```

# java - 如何获取 Java Jersey 客户端请求的 URL？

> ID：14502692
> 
> 赞同：4
> 
> 时间：2013-01-24T13:38:00.707
> 
> 标签：java, url, jersey, webresource

在 Java 中使用 Jersey 我有一个响应对象

```
Client c=Client.create();
WebResource r = c.resource("http://example.com/path");

MultivaluedMap<String, String> params = new MultivaluedMapImpl();
    params.add("param1", value);

r=r.path(getQualifiersByPromoServicePath).queryParams(params);

ClientResponse response = r.accept(MediaType.APPLICATION_JSON_TYPE).get(ClientResponse.class); 
```

如何获取用于发出请求的 url？（出于调试目的）即我想获取字符串“http://example.com/path?param1= *value* ”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T16:07:28.900

你试过`r.getURI();`吗？应该是你要找的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:44:11.840

使用日志过滤器并将其输出定向到 System.out 以进行调试。

在实例化您的客户端后立即添加以下行：

```
c.addFilter(new LoggingFilter(System.out)); 
```

# php - 在基于 ID 的 foreach 语句中将变量一起添加

> ID：14502694
> 
> 赞同：0
> 
> 时间：2013-01-24T13:38:08.353
> 
> 标签：php, google-analytics, opencart

我正在使用此代码将产品添加到 Google Analytics 跟踪。

```
 <?php foreach($orderProducts as $product) { ?>
  _gaq.push(['_addItem',
      "<?php echo $product['order_id']; ?>",
      "<?php echo $product['product_id']; ?>",
      <?php echo json_encode($product['name']); ?>,
      "<?php echo $product['model']; ?>",
      "<?php echo $product['price']; ?>",
      "<?php echo $product['quantity']; ?>"
   ]); 
```

这适用于基本产品，但是某些产品具有选项，因此`$orderProducts`使用相同的型号 ID 添加多个版本。Google Analytics 只选择第一个，因此不会跟踪其他实例的数量。

我需要做的是将数组中具有相同模型 ID 的每个条目的所有数量相加，然后使用新的“总”数量删除该模型 ID 的一个实例之外的所有实例。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:13:10.220

只需遍历您的数组，并创建一个新数组，其中每个 unique 仅包含一个条目`model`，并且正确`quantity`（未经测试）：

```
$newArray = array();
foreach ($orderProducts as $product) {
  if (isset($newArray[$product['model']])) {
    $newArray[$product['model']]['quantity'] += $product['quantity'];
  } else {
    $newArray[$product['model']] = $product;
  }
} 
```

`$newArray`然后你可以像原来那样循环遍历for `$orderProducts`：

```
 <?php foreach($newArray as $product) { ?>
  _gaq.push(['_addItem',
      "<?php echo $product['order_id']; ?>",
      "<?php echo $product['product_id']; ?>",
      <?php echo json_encode($product['name']); ?>,
      "<?php echo $product['model']; ?>",
      "<?php echo $product['price']; ?>",
      "<?php echo $product['quantity']; ?>"
   ]); 
```

# sql - 在 MS Access 的 SQL 查询中，同一字段的 SUMIF 两次

> ID：14502695
> 
> 赞同：1
> 
> 时间：2013-01-24T13:38:14.653
> 
> 标签：sql, ms-access

我有一个表格，其中包含“Money in Money Out”金额以及日期和客户 ID 的列表。

如果记录是资金流入，则该`MIMO`字段包含一个正数，如果资金流出，则该字段包含一个负数。

我想执行一个求和的查询，`MIMO`但要分别为两个日期之间的所有记录提供总金额和总金额。只有当金额大于 0 时，它才会通过求和来做到这一点，反之亦然。

我现在有这个，但我相信我的语法完全错误：

```
SELECT Sum(MIMO.MIMO) AS SumOfMIMO HAVING (((Sum(MIMO.MIMO))>0), Sum(MIMO.MIMO) AS SumOfMIMO1 HAVING ((Sum(MIMO.MIMO))<0), MIMO.AccountNum
FROM MIMO
GROUP BY MIMO.TransactionDate, MIMO.AccountNum
WHERE ((MIMO.TransactionDate) Between #12/1/2012# And #12/31/2012#) AND ((MIMO.AccountNum)="12345")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:46:45.180

尝试`IIF`：

```
SELECT  SUM(IIF(MIMO.MIMO >= 0,MIMO.MIMO,0)) AS MoneyIn,
        SUM(IIF(MIMO.MIMO < 0,MIMO.MIMO,0)) AS MoneyOut
FROM MIMO
WHERE ((MIMO.TransactionDate) Between #12/1/2012# And #12/31/2012#)) 
AND ((MIMO.AccountNum)="12345")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:56:34.177

您也可以使用 Pivot 进行计算：

```
TRANSFORM Sum(Mimo.Mimo) AS Expr1
SELECT AccountNum, TransactionDate
FROM Mimo
WHERE Sgn([Mimo])<>0 And TransactionDate Between #12/1/2012# And #12/31/2012#
GROUP BY AccountNum, TransactionDate
PIVOT Sgn([Mimo]); 
```

# javascript - 必填字段验证器上 ASP.NET 标签的可见性

> ID：14502700
> 
> 赞同：0
> 
> 时间：2013-01-24T13:38:29.247
> 
> 标签：javascript, asp.net, requiredfieldvalidator

我有一个不可见的 asp.net 标签。
当我在数据库中插入一些东西时，我将它设置为`visible=true`一条消息“记录已保存”
，并且它一直可见，直到没有触发另一个服务器端事件。但问题是，当我再次单击插入时，空字段必填字段验证器会调用并给出类似的消息

```
Please fill all the fields.
Record saved. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:28:53.670

当用户单击插入按钮时，只需在客户端隐藏标签

```
<asp:Label runat="server" ID="Label1" Visible="False"></asp:Label>
<asp:Button runat="server" ID="btnInsert" OnClientClick="hideLabel();"  OnClick="btnInsert_OnClick" ValidationGroup="InsertValidation" CausesValidation="True" />

<script>
    function hideLabel(){
          document.getElementById('<%= Label1.ClientID %>').style.display = 'none';
    }
</script> 
```

后面的代码：

```
protected void btnInsert_OnClick(object sender, EventArgs e)
{
    Label1.Visible = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:09:38.010

您可以将其添加到页面底部

```
<body>
   <asp:Label runat="server" ID="Label1"></asp:Label>

    <script>
        //hide the label after 3 seconds
        window.setTimeout(function(){
              document.getElementById('<%= Label1.ClientID %>').style.display = 'none';
        }, 3000);

    </script>

</body> 
```

并记住在再次需要时将其设置为从代码隐藏中可见

# html - 漂浮在容器外的段落

> ID：14502704
> 
> 赞同：1
> 
> 时间：2013-01-24T13:38:32.177
> 
> 标签：html, css

我已经创建了一个容器来将我的内容居中到页面的中间，并且我遇到了一个问题，即段落标签继续超出容器 div 并且不会自动换行。我总是发现容器可以使用包装，我从来没有遇到过这个问题。

```
.container { width: 1000px; margin: 0 auto; } 
```

这是从 div.container 元素中浮出的 HTML

```
<div class="container">
    <p>TestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTest</p>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:42:47.017

问题是因为里面的文本`<p>`是一个没有空格的单词，你可以使用以下规则强制自动换行：

```
.container {
  word-wrap: break-word; /* Forces to wrap the word and cut it*/
  width: 1000px;
  margin: 0 auto;
} 
```

这在旧浏览器上不起作用，所以要小心，另一种方法是使用`overflow: hidden`属性隐藏扩展文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:42:30.807

添加这些属性：

```
overflow:hidden;
word-wrap: break-word; 
```

将宽度设置为**100px**的工作[小提琴的链接在](http://jsfiddle.net/BAjaZ/embedded/result/)[这里](http://jsfiddle.net/BAjaZ/embedded/result/)。

# jquery - JS-“类”中的 jQuery 和 Raphael

> ID：14502705
> 
> 赞同：0
> 
> 时间：2013-01-24T13:38:45.133
> 
> 标签：jquery, raphael, main

尽管普通的主代码在其他项目中工作，但我在我的主类中获得一个简单的画布工作时遇到了严重的麻烦 - 它只是替换以前的代码的 Raphael 部分：

```
$(document).ready( function(){  new Main(); } );
$.Class

("Main",
 {
  init:
    function()
    { // Initialize the canvas.
      var paper = Raphael("canvas",800,500);
      paper.circle( 100, 100, 50);
    },

 }); 
```

没有主“框架”一切都很好，当然……现在真的不知道星座中可能出了什么问题……

感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:04:42.990

最大的可能性是您在页面上的任何位置都没有 id 为“canvas”的元素。我们不知道 $.Class 是如何工作的，但总的来说，真正值得花时间学习一下闭包在 JS 中的工作原理，而不是将其视为经典的 OOP 语言。这可以解决问题（再次假设“”在某处）：

```
$(document).ready( function(){  main(); } );

function main () {
    var paper = Raphael("canvas",800,500);
    paper.circle(100, 100, 50);
    return {
        get_paper: function () {
            return paper;    
        }
    };

} 
```

# jquery - 具有相同名称输入的 jQuery-serializeArray()

> ID：14502707
> 
> 赞同：0
> 
> 时间：2013-01-24T13:38:49.690
> 
> 标签：jquery, html, ajax

我有一个表格，其中包含要添加到 sql 的产品行。用户可以添加新行。我正在尝试对其进行序列化并使用 .ajax 发布。序列化代码：

```
var fields = $(":input").serializeArray();
var values = {};
$("#results").empty();
$.each(fields, function(i, field){
     values[field.name] = field.value;               
}); 
```

但问题是我的输入具有相同的名称，例如：

```
<td width="3%"><input type="text" size="5" name="products[][prod_qnt]" value="1"/></td> 
```

下一行是相同的单元格，并且 serializeArray() 仅传递第一行。为什么？

# css - CSS：标签垂直对齐 - 不适用于最后一个标签 - 为什么？

> ID：14502708
> 
> 赞同：1
> 
> 时间：2013-01-24T13:38:54.027
> 
> 标签：css, html, stylesheet, vertical-alignment

问题：
我正在尝试调整此站点
[http://www.mentby.com/Group/mono-aspnet-list/input-data-cannot-be-coded-as-a-valid-certificate 的评论框。 html](http://www.mentby.com/Group/mono-aspnet-list/input-data-cannot-be-coded-as-a-valid-certificate.html)

到我的网站。
我已成功复制它，但我想垂直对齐中心的标签。
它正在工作，但出于某种奇怪的原因，不是最后一个。
谁能告诉我我做错了什么/我错过了什么？
显然，它与textarea有关。

这是我所拥有的：

```
<!DOCTYPE html>
<html>
<head>
    <title>Comment</title>

    <style type="text/css" media="all">

    label 
    {
        cursor: text;
    }

    #commentForm 
    {
        /*width: 80%;*/
        width: 500px;
        margin-top: 10px;
        padding-bottom: 10px;
        background-color: #f6f6f6;
        border-right: 1px solid #e1e1e1;
        border-bottom: 1px solid #e1e1e1;
        border-left: 1px solid #e1e1e1;
    }

    #commentForm div.rowHolder 
    {
        margin-bottom: 5px;
        /*float: left;*/
    }

    .commentFormLabel 
    {
        background: #efefef url(separator.gif) repeat-x top;
        padding: 2px 10px 2px 10px;
        margin: 0 0 20px 0;
        border-bottom: 1px solid #e1e1e1;
        font: bold 13pt "sans-serif", arial, verdana;
        letter-spacing: -1px;
        line-height: 16pt;
        color: #000;
    }

    #commentForm label 
    {
        display: inline-block;
        width: 100px;
        padding-right: 10px;
        text-align: right;

        /*float: left;
        vertical-align: middle;
        */
        font-family: "sans-serif", arial, verdana;
        font-size: 9pt;
        color: #333;
    }

    #commentForm input, #commentForm textarea 
    {
        width: 314px;
        /*float: left;*/
        border: 1px solid #e7e7e7;
        padding: 2px;
    }

    #commentForm .lblVertAlign
    {
        display: table-cell; vertical-align: middle; 
        /*background-color: Red;*/
    }

    </style>
</head>
<body>

    <div id="commentForm">
        <div class="commentFormLabel">Post a Comment</div>
            <div class="formHolder">
                <div class="rowHolder">
                    <div class="lblVertAlign">
                        <!--
                        <span style="vertical-algin: middle;">Name</span>
                        -->
                        <label for="name">Name</label>
                        <input id="name" name="name" value="" />
                    </div>
                </div>

                <div class="rowHolder">
                    <div class="lblVertAlign">
                        <label for="email">Email</label>
                        <input id="email" name="email" value="" />
                    </div>
                </div>
                <div class="rowHolder">
                    <div class="lblVertAlign">
                        <label for="website">Website</label>
                        <input id="website" name="website" value="http://" />
                    </div>
                </div>
                <div class="rowHolder" style="padding: 0px; margin: 0px;">
                    <div class="lblVertAlign">
                        <label for="comment">Comment</label>
                        <textarea id="message" name="message"></textarea>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:53:37.870

您需要修改`vertical-align`输入元素的：

[http://jsfiddle.net/7VstA/2/](http://jsfiddle.net/7VstA/2/)

```
#commentForm input, #commentForm textarea 
{
    width: 314px;
    /*float: left;*/
    border: 1px solid #e7e7e7;
    padding: 2px;
    vertical-align: middle;
} 
```

# android - 如何使android中的锚标记可点击

> ID：14502709
> 
> 赞同：3
> 
> 时间：2013-01-24T13:38:55.890
> 
> 标签：android, html, anchor

这是我的代码：

```
TextView aboutL1 = (TextView) findViewById(R.id.aboutL2);
    aboutL1.setText(Html.fromHtml("This app is open source.<br>The source code is hosted on <a href=\"http://herp.com/derp\">Github</a> "));
    Linkify.addLinks(aboutL1, Linkify.ALL); 
```

github这个词显示为一个链接，但是当我点击链接时没有任何反应......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T07:43:17.557

您需要调用[setMovementMethod](http://developer.android.com/reference/android/widget/TextView.html#setMovementMethod(android.text.method.MovementMethod))：

```
aboutL1.setMovementMethod(LinkMovementMethod.getInstance()); 
```

（你可能甚至不需要打电话，`Linkify.addLinks`因为你用过`Html.fromHtml`，但我不完全记得）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:47:58.043

```
aboutL1.setLinksClickable(true); 
```

在**XML**中应该是

```
<TextView
    android:id="@+id/aboutL2"
    android:autoLink="web"
    android:linksClickable="true"
/> 
```

# vim - 用签到号查询 Vim 中签到的位置

> ID：14502710
> 
> 赞同：0
> 
> 时间：2013-01-24T13:38:59.407
> 
> 标签：vim

我想向 Vim 查询符号的行号。我知道标志的 ID，因为我是使用 放置它的人`sign place {id}...`，但我希望能够向 Vim 询问它的当前位置（因为用户可以编辑文件并导致标志移动）。

我知道我可以用`:sign place`这样的方式列出所有标志：

```
:sign place
--- Signs ---
Signs for plugin/python/vdebug/breakpoint.py:
    line=199  id=11000  name=breakpt
Signs for plugin/python/vdebug/event.py:
    line=9  id=11001  name=breakpt 
```

但是我必须解析输出以通过 ID 找到单个断点，这不是很有效，特别是因为可能有大量的符号。是否有命令或 vimL 函数仅通过 ID 获取标志的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:55:29.100

恐怕没有任何功能（请参阅`:help function-list`参考资料），因此解析是目前唯一的选择。我同意以编程方式访问将是有益的；你可能想在[vim_dev 邮件列表](http://www.vim.org/community.php)上提出这个增强请求。

编辑：在[vim_dev 上提出这个问题后](https://groups.google.com/group/vim_dev/browse_thread/thread/93f364b6734c0a4f)，Christian Brabandt 好心地编写了一个补丁，可以让您查询 id 为 42 到`line('|42')`. 让我们希望 Bram 尽快将它包含在 Vim 中。

# spring - 验证期间无法访问模型属性

> ID：14502713
> 
> 赞同：0
> 
> 时间：2013-01-24T13:39:02.543
> 
> 标签：spring, spring-mvc, validation

我正在使用 Spring 3.1 并且有使用验证的网页。字段级验证和错误显示工作正常。我的问题是在验证表单显示期间模型属性不可用。

假设我有代码：

```
@RequestMapping(value="/edit", method=RequestMethod.GET)
public String getEdit(@RequestParam("id") Long id, Model model) {
    model.addAttribute("mytitle", "Hello There");
    return "editObject"
}

@RequestMapping(value="/edit", method=RequestMethod.POST)
public String postEdit(@RequestParam("id") Long id, @Valid @ModelAttribute("object") MyData object, BindingResult result) {
    if(result.hasErrors()) {
        return "editObject";
    }
    [snip]

} 
```

如果我有错误，则检测到 hasErrors() 并短路到地图“editObject”。但是，模型属性不可用。

我在这里用什么？我尝试将模型引用添加到 postEdit 参数列表并再次添加诸如“mytitle”属性之类的内容。

谢谢，杰罗姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:57:28.447

当`postEdit`控制器呈现`editObject`视图时，您处于一个新请求中，因此您正在丢失`model`（先前设置为`getEdit`操作）。

您需要做的是重新设置新所需的任何值`model`：

```
@RequestMapping(value="/edit", method=RequestMethod.POST)
public String postEdit(@RequestParam("id") Long id, @Valid @ModelAttribute("object") MyData object, BindingResult result, Model model) {
    if(result.hasErrors()) {
        model.addAttribute("mytitle", "Hello There");
        model.addAttribute("object", object);
        return "editObject";
    } 
```

如果您需要为不同的视图保留这些属性，例如可以将它们存储在会话中（这样您就不必为每个新请求重新设置它们）。

# java - 如何从 SQLite 数据库获取数据到 EditText？

> ID：14502715
> 
> 赞同：-5
> 
> 时间：2013-01-24T13:39:11.170
> 
> 标签：java, android, sqlite, android-activity, android-edittext

嗨，我想从 sqlite 数据库中获取数据。我想使用一种方法在我的 Edittext 中加载数据。

```
private void ladeDaten(String tbname,String fach)
    {
        String select = "SELECT info FROM "+tbname+" WHERE name='"+fach+"'";

        String info = ""; // how I can 

        ((EditText)(findViewById(R.id.txtContacto))).setText(info);
    } 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:42:35.497

为您解决方案：

```
public int GetDeptID(String Dept)
  {
   SQLiteDatabase db=this.getReadableDatabase();

   Cursor c=db.rawQuery("SELECT "+colDeptID+" as _id FROM "+deptTable+" WHERE "+colDeptName+"=?",
new String []{Dept});
   c.moveToFirst();
   return c.getInt(c.getColumnIndex("_id"));

  } 
```

在这里阅读更多：http: [//mobileorchard.com/android-app-development-using-sqlite-database/](http://mobileorchard.com/android-app-development-using-sqlite-database/)

**它的唯一例子**

# objective-c - scheduleOnce 在我的 CCLayer 类上不起作用，当在 onEnter 中设置时

> ID：14502721
> 
> 赞同：0
> 
> 时间：2013-01-24T13:39:32.550
> 
> 标签：objective-c, cocos2d-iphone, scheduler

*我有一个* `CCLayer` *类是我创建的基类的子类，它本身就是* `CCLayer`.

*创建这种类型的类层次结构后，我无法让* `onEnter` *我的子类的方法成功调度方法调用。我怎样才能解决这个问题？*

* * *

我正在尝试开始一个游戏项目，但我遇到了一些障碍。这似乎是一个常见问题，但是，我找不到与我类似的场景，因此无法得出解决方案。

我创建了一个子 CCLayer 类，它与 Cocos2D 入门 iPhone 模板中的 IntroLayer 基本相同。事实上，我的类与一个主要例外完全相同——我创建了一个从 CCLayer 派生的基类，并用作我的 IntroLayer 的父类。

我的问题是在我的子层的 onEnter 方法中，我看到我的转换方法正在我的`scheduleOnce`作业中设置。但是，问题是我的转换方法从未被调用过？

我不确定我做错了什么。下面发布的代码是我的 IntroLayer 的 .m 文件。

**介绍层.m**

```
@implementation IntroLayer //Child of "MyBaseCCLayer"

+(CCScene *) scene
{
    CCScene *scene = [CCScene node];
    IntroLayer *layer = [IntroLayer node];
    [scene addChild: layer];
    return scene;
}

-(void) onEnter
{
    //This is calling an overridden onEnter of my base CCLayer.
    // See snippet below.
    [super onEnter]; 

    CGSize size = [[CCDirector sharedDirector] winSize];
    CCSprite *background;

    background = [CCSprite spriteWithFile:@"Default.png"];
    [background setPosition:ccp(size.width/2, size.height/2)];
    [background setZOrder: Z_BACKGROUND];
    [self addChild: background];

    //In one second transition to the new scene
    // I can put a break point here, and this being set. 
    // It never gets called, though.
    [self scheduleOnce:@selector(makeTransition:) delay:1.0];
}

-(void) makeTransition:(ccTime)delay
{
    //Here is where I would transition to my menu.
    // This is a fresh project, so it's going to a test screen.
    // The problem is this method never fires.
    [[CCDirector sharedDirector]
       replaceScene:[CCTransitionFade
            transitionWithDuration:0.5
                     scene:[TestLayer scene]
                         withColor:ccBLACK]];
}
-(void) dealloc
{
    [super dealloc];
}
@end 
```

**MyBaseCCLayer.m**

```
//^boilerplate snip^

-(void) onEnter
{
    //Setup overlay
    CGSize size = [[CCDirector sharedDirector] winSize];
    ccTexParams tp = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};

    //overlay is a class variable, CCSprite object.
    overlay = [CCSprite spriteWithFile:@"tile_overlay.png" rect:CGRectMake(0, 0, size.width, size.height)];
    [overlay retain];
    [overlay setPosition: ccp(size.width/2, size.height/2)];
    [overlay.texture setTexParameters:&tp];

    //Always on top!
    [overlay setZOrder:Z_OVERLAY];
}

-(void) dealloc
{
    [overlay release];
    [super dealloc];
} 
```

如您所见，这里没有任何突破性的进展。我创建了这个基类，因为我想`CCLayer`在我的应用程序中应用覆盖精灵。这就是为什么创建自己的基地是有意义的，`CCLayer`. 但是，既然我已经创建了自己的基类，我`IntroLayer`将不会调用我设置的预定方法`onEnter`。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:57:26.447

您的自定义类 MyBaseCCLayer 正在覆盖该`onEnter`方法，但您省略了对`[super onEnter]`. 有时很容易忘记，但调用`[super onEnter]`对自定义类至关重要。以下是 Cocos2D 文档中对该方法的描述：

> 每次 CCNode 进入“阶段”时调用的事件。如果 CCNode 通过转换进入“阶段”，则在转换开始时调用此事件。在 onEnter 期间，您无法访问兄弟节点。如果你覆盖 onEnter，你应该调用 [super onEnter]。

如果你看一下 CCNode.m 内部，你会看到里面发生了什么`onEnter`：

```
-(void) onEnter
{
    [children_ makeObjectsPerformSelector:@selector(onEnter)];
    [self resumeSchedulerAndActions];

    isRunning_ = YES;
} 
```

因此，您可以看到，如果您`onEnter`在自定义类中覆盖该方法，并且您不调用`[super onEnter]`，您将错过此功能。本质上，您的自定义节点将保持“暂停”状态。

# zend-framework - ZF 1.12 的最爱

> ID：14502722
> 
> 赞同：-2
> 
> 时间：2013-01-24T13:39:35.253
> 
> 标签：zend-framework

我在 Zend 框架 1.12 上使用 News 创建新站点，我只需要从其中添加一些内容到我的主页，并且我有一个表单供管理员添加新闻，我怎样才能实现它并使标记来自所有必须的新闻成为可能在我的主页上显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:06:05.480

选项 1：在您的新闻控制器中创建一个新操作以仅返回 5 个最近的新闻。

选项 2：在您的数据库表中为标题为“display_on_home_page”的新闻创建一个列，并执行一个操作，该操作将返回具有标志“display_on_home_page”== true 的新闻。在提交新闻的表单中添加一个复选框，将“display_on_home_page”标志设置为 true 或 false。

希望这可以帮助 ：）

# ruby - 冒泡排序中while循环的实现？

> ID：14502725
> 
> 赞同：0
> 
> 时间：2013-01-24T13:39:40.207
> 
> 标签：ruby, while-loop

我想用 Ruby 编写一个冒泡排序程序。请不要在没有首先指出我的代码中的错误的情况下建议一种新的方法。我可以查找 Ruby 冒泡排序方法的答案，但我不知道为什么我的代码不起作用。

我正在使用`while`循环，但是，我的方法似乎不会连续循环，直到它完全通过一次而不进行交换。我没有`while`正确使用循环吗？

这是我的脚本：

```
def bubblesort(array)
      i = 0 
      swapped = true
      lenght = array.length-1
      while swapped do
          swapped = false
          while i <lenght
              n = i +1
              if array[i] > array[n]
              dummy = array[i]
              array[i]= array[n]
              array[n] = dummy  
              swapped = true

              end
             i+=1
          end

      end
      return array
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:51:18.387

`i`问题是`0`当您在`while swapped do`.

这样做，第二个循环不会超过一次。

这会起作用：

```
def bubblesort(array)
      swapped = true
      lenght = array.length-1
      while swapped do
          i = 0
          swapped = false
          while i <lenght
              n = i +1
              if array[i] > array[n]
                  dummy = array[i]
                  array[i]= array[n]
                  array[n] = dummy  
                  swapped = true
              end
             i+=1
          end
      end
      return array
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T18:31:12.833

这适用于 11 个元素。您可以将大小更改为任意数字

```
#include <iostream>
#include <conio.h>
using namespace std;

void swap(int *,int *);
void printArr(int *,int Siz=11);
int main(){

int a[]={1,4,15,10,12,6,3,2,8,5,7};
//int a[]={1,2,3,4,5,5,7,8,10,11,9};

int len=11,i=0,j=0,temp=0;
bool swapped=false;
    while(i<len){

        swapped=false;j=0;
        while(j<len-1){
            if(a[j]>a[j+1]){
                swap(&a[j],&a[j+1]);
                swapped=true;
            }
            cout<<"loop : "<<i<<" "<<a[j]<<" "<<a[j+1]<<endl;
            j+=1;

        }
        i+=1; len-=1; //as the largest value has already moved to last location. need no further comparison
        if(!swapped) break;
    }
    printArr(a);
    system("pause");
}

void swap(int *a,int *b){
    int t=*a;
    *a=*b;
    *b=t;

}

void printArr(int *a,int Siz){
    for(int i=0; i<Siz; i++) cout<<a[i]<<" "; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T06:00:49.587

正如史蒂文建议的那样。问题在于您的 i=0。它应该被移到第一个 while 循环中，以便它可以重置。

为了避免与第二个 while 循环的所有混淆。

(array.length-1).times 做 |i|
代码.....结束

以上效果很好。每次重置 i。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:06:45.007

这将起作用：

[http://codepad.org/8BsoiWQo](http://codepad.org/8BsoiWQo)

```
def bubblesort(array)
      i = 0 
      swapped = true
      length = array.length
      while i < length-1 and swapped do # also check for end of array
          swapped = false
          n = i +1  # second loop variable 'n' should be initialized here
          while n < length
              if array[i] > array[n]
                  dummy = array[i]
                  array[i]= array[n]
                  array[n] = dummy  
                  swapped = true
              end
             n += 1 # 'n' should be incremented here...
          end
          i += 1 # and 'i' here
      end
      return array
end 
```

我不是 rubby 程序员，但我尝试了与此代码等效的 C#，它运行良好。

# iis - 有没有办法通过 localhost 访问您的服务来避免 IIS 中托管的 Web API Web 服务上的网络流量？

> ID：14502733
> 
> 赞同：2
> 
> 时间：2013-01-24T13:39:59.547
> 
> 标签：iis, asp.net-web-api

我们在我们的应用程序中添加了一个 Web API 服务层，以帮助与我客户公司的各个产品团队共享代码。我喜欢将其作为管理版本控制和代码组织的一种方式，但我担心违反 Martin Fowlers*分布式对象设计第一定律*，即不要分发您的对象。我们目前可以在同一个盒子上托管所有各种产品，我想知道让客户端应用程序通过 localhost 访问我们的 Web 服务是否可以让我们避免 Martin 提出的问题。如果是 WCF，我会将端点配置为使用命名管道，我想我正试图弄清楚如何在 IIS 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:35:49.003

如果您在同一进程下托管所有项目，则可以进入内存，但我不确定这有多大意义。这是一个很好的例子：

*   [ASP.NET Web API 的批处理处理程序](http://bradwilson.typepad.com/blog/2012/06/batching-handler-for-web-api.html)
*   [与上述相关的帖子](http://trocolate.wordpress.com/2012/07/19/mitigate-issue-260-in-batching-scenario/)

它演示了在内存中托管整个 Web API 管道的用法。但是，就您而言，这似乎行不通，但可能值得考虑。

# asp.net - 为什么单击 GridView 中的 ImageButton 时没有返回任何数据

> ID：14502737
> 
> 赞同：0
> 
> 时间：2013-01-24T13:40:15.200
> 
> 标签：asp.net, vb.net, gridview

我有以下 Gridview，最后一列中有一个 ImageButton。我正在尝试从单击按钮的行中返回名字和姓氏。我花了几个小时查看这里和其他网站，试图让它工作，但没有成功。

如果有人可以查看我的代码并查看我是否做错了什么，将不胜感激。

谢谢

**ASP 代码**

```
<asp:GridView runat="server" ID="gvSecondaryContacts" AutoGenerateColumns="False" DataKeyNames="ContactID" ShowHeaderWhenEmpty="false" GridLines="None" OnRowCommand="gvSecondaryContacts_OnRowCommand"  >
    <Columns>
        <asp:BoundField DataField="ContactID" HeaderText="ContactID" InsertVisible="False" ReadOnly="True" SortExpression="ContactID" Visible="false"/>

        <asp:TemplateField HeaderText="First Name">
            <ItemTemplate>
                <asp:Label ID="Label2" runat="server" Text='<%# Eval("FirstName") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox runat="server" ID="txtSecFirstName" Text='<%# Eval("FirstName") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Last Name">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("LastName") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox runat="server" ID="txtSecLastName" Text='<%# Eval("LastName") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Email">
            <ItemTemplate>
                <asp:Label ID="Label4" runat="server" Text='<%# Eval("Email") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox runat="server" ID="txtSecEmail" Text='<%# Eval("Email") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Position">
            <ItemTemplate>
                <asp:Label ID="Label3" runat="server" Text='<%# Eval("ClubPosition") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox runat="server" ID="txtSecClubPosition" Text='<%# Eval("ClubPosition") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField>
            <ItemTemplate>                   
                <asp:ImageButton runat="server" ID="ibtnDelete" CommandName="Delete" AlternateText="Delete Contact" CommandArgument="<%# CType(Container,GridViewRow).RowIndex %>"/>
            </ItemTemplate>
        </asp:TemplateField>

    </Columns> 
```

**VB代码**

```
Public Sub gvSecondaryContacts_OnRowCommand(ByVal sender As Object, ByVal e As GridViewCommandEventArgs)
    If e.CommandName = "Delete" Then
        Dim index As Integer = Convert.ToInt32(e.CommandArgument)
        Dim row = gvSecondaryContacts.Rows(index)
        Dim ContactID As Integer = Convert.ToInt32(gvSecondaryContacts.DataKeys(index).Value)
        Dim sFirstName As String = gvSecondaryContacts.Rows(index).Cells(1).Text
        Dim sLastName As String = gvSecondaryContacts.Rows(index).Cells(2).Text
        MsgBox("Your name is " & sFirstName & " " & sLastName)
    End If

End Sub 
```

我还为 ImageButton 尝试了以下操作，但它返回**的是一种类型，不能用作表达式**错误

```
 <asp:TemplateField>
            <ItemTemplate>                   
                <asp:ImageButton runat="server" ID="ibtnDelete" CommandName="Delete" AlternateText="Delete Contact" CommandArgument="<%# CType(Container, GridViewRow).RowIndex %>"/>
            </ItemTemplate>
        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:54:03.520

试试这个

```
 Dim sFirstName As String = ((Label)gvSecondaryContacts.Rows(index).Cells(1).FindControl("Label2")).Text
    Dim sLastName As String =((Label)gvSecondaryContacts.Rows(index).Cells(2).FindControl("Label1")).Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:05:38.527

我认为问题在于设置`CommandArgument of ImageButton`

```
CommandArgument="<%# CType(Container, GridViewRow).RowIndex %>" 
```

您不必根据此[MSDN Example](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewcommandeventargs.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)进行操作。此外，您（*如果从服务器端完成数据绑定*）应仅在页面未回发时绑定您的 gridview；

```
If Not Page.IsPostBack Then
   'Bind your gridview here
End if 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:15:52.650

您可以改为处理点击事件。您可以将`ImageButon's` [**NamingContainer**](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)转换`GridViewRow`为单击事件处理程序。然后你只需要使用`FindControl`：

```
Protected Sub Delete(sender As Object, e As EventArgs)
    Dim ctrl = DirectCast(sender, Control)
    Dim row = DirectCast(ctrl.NamingContainer, GridViewRow)
    ' you should rename this to LblFirstName
    Dim Label2 = DirectCast(row.FindControl("Label2"), Label)
    ' you should rename this to LblLastName
    Dim Label1 = DirectCast(row.FindControl("Label1"), Label)
    'MessageBoxes in ASP.NET don't make much sense
    MsgBox("Your name is " & Label2.Text & " " & Label1.Text)
End Sub 
```

# objective-c - 关闭 ChildBrowser 后 iOS phonegap 功能中的 MainView 中断

> ID：14502742
> 
> 赞同：1
> 
> 时间：2013-01-24T13:40:33.030
> 
> 标签：objective-c, ios5, cordova, childbrowser

我正在使用 phonegap 2.2.0 版并已将 ChildBrowser 插件代码安装到 XCode 项目中，插件加载正常，没有问题。当导航到主视图中的静态 html 页面时，该页面有一堆

*   标签，每个标签都有指向外部页面的链接。单击该外部链接后，ChildBrowser 会按预期加载，但是当我通过单击“完成”按钮关闭 ChildBrowser 时，原始视图会按预期出现。但是当您尝试在该主视图中滚动时，滚动部分停止工作，我不再能够滚动该页面？我添加了以下**[[self parentViewController] reloadInputViews]**行并认为可以解决问题，但问题仍然存在。此外，它破坏了原始样式，这意味着按钮和字体看起来更大。一些原始 webview 需要如何维护它的正确状态。请提出任何更正。

    我正在查看关闭按钮事件代码 \Plugins\ChildBrowserViewController.m

    ```
    - (void)closeBrowser
      {
          if (self.delegate != nil) {
             [self.delegate onClose];
          }
          if ([self respondsToSelector:@selector(presentingViewController)]) {
             // Reference UIViewController.h Line:179 for update to iOS 5 difference - @RandyMcMillan
               [[self presentingViewController] dismissViewControllerAnimated:YES completion:nil];
          } else {
              [[self parentViewController] dismissModalViewControllerAnimated:YES];
              [[self parentViewController] reloadInputViews];
          }
      } 
    ```

# xml - 在哪里声明 xquery 函数？

> ID：14502744
> 
> 赞同：4
> 
> 时间：2013-01-24T13:40:36.307
> 
> 标签：xml, xquery, basex, exist-db

让我们以我能想到的用 xquery 编写的最简单的函数为例：

```
declare function local:identityFunction($v as xs:integer) 
{
  return ($v)
}; 
```

我在哪里申报？

我正在尝试exist-db和basex，但是如果我在查询处理器窗口中编写它，它们会给我一些错误（尽管正常的xqueries可以工作）。

例如 basex 抱怨以下消息：“期望表达式”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:51:03.427

您可以在正常表达式之前插入它们。

你的错误是使用'return'，这既不需要也不允许，因为xquery函数总是返回最后一个（也是唯一的）值。

分号后面应该跟另一个表达式。

因此这将起作用：

```
declare function local:identityFunction($v as xs:integer) 
{
  $v
};     
local:identityFunction(17) 
```

# mercurial - 没有状态的 hg 状态列表

> ID：14502747
> 
> 赞同：2
> 
> 时间：2013-01-24T13:40:55.923
> 
> 标签：mercurial

我必须获取自上次提交以来更改、添加或删除的文件的列表。命令：`hg status`例如给我

```
M file_path
C other_file_path 
```

我需要：

```
file_path
other_file_path 
```

解决方案必须在 Unix 和 Windows 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:23:54.313

如果要列出所有文件，只需`-n`在`hg status`命令中添加：

```
$ hg status
M modded.txt
A added.txt
R removed.txt
? unknown.txt

$ hg status -n
modded.txt
added.txt
removed.txt
unknown.txt 
```

但是，这也会列出未知文件（那些是新的，但没有通过`hg add`命令专门添加到存储库中的文件）。您可以通过添加`-q`（正如 Lazy Badger 指出的那样）或使用文件集（请参阅 参考资料`hg help filesets`）来指定所有未知的文件来*解决*此问题：

```
$ hg status -n -q
modded.txt
added.txt
removed.txt

$ hg status -n "set:!unknown()"
modded.txt
added.txt
removed.txt 
```

您可以通过组合其他选项来指定列出哪些类型的文件（`-a -r`例如将显示添加和删除的文件）。或者，您可以使用文件集做一些聪明的事情：例如，仅列出通过使用删除的文件的名称`"set:removed()"`

# android - Android：当音乐播放器处于活动状态时捕获媒体按钮操作

> ID：14502752
> 
> 赞同：3
> 
> 时间：2013-01-24T13:41:11.553
> 
> 标签：android, android-intent

我编写了一些使用 BroadcastReceiver 来捕获媒体按钮之一的服务。我只能在音乐播放器处于非活动状态时捕获媒体按钮事件。当我的音乐播放器处于活动状态时，我如何捕获媒体按钮事件..！

我的活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.about_and_activation_view);

Log.d("MR", "onCreate - " + getIntent().getAction());

    AudioManager mAudioManager  = (AudioManager) getApplicationContext().getSystemService(Context.AUDIO_SERVICE);
      ComponentName mediaButtonReceiver = new ComponentName(getPackageName(), HeadsetControlEventReceiver.class.getName());
      mAudioManager.registerMediaButtonEventReceiver(mediaButtonReceiver);
} 
```

我的广播接收器：

```
public class HeadsetControlEventReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    try{
        KeyEvent event = (KeyEvent) intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);

        if ((event != null) && (event.getKeyCode() == KeyEvent.KEYCODE_HEADSETHOOK)) { 
```

清单.Xml

```
 <receiver 
   android:name=".HeadsetControlEventReceiver" 
   android:enabled="true">
   <intent-filter android:priority="2147483647">
         <action android:name="android.intent.action.MEDIA_BUTTON"/>
        </intent-filter>
  </receiver> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T15:31:05.800

在您注册此音乐播放器并启动音乐播放器后，将优先考虑音乐播放器。现在您需要重新注册一些方法。酷轮询机制怎么样。

# php - 电子邮件使用 php 生成具有动态值的 html

> ID：14502753
> 
> 赞同：0
> 
> 时间：2013-01-24T13:41:12.863
> 
> 标签：php, html, mysql

我有一个格式简单的证书。证书需要使用数据库中的值填充并通过电子邮件发送。下面是我做的快速修复。问题是发送的证书不是一个人的，而是那些被查询的。

```
$query ="SELECT  r.email, r.LastName, r.OpNo, 
r.QuizNo From tbl_cert where Pass =1 AND Printed is null;
$result=mysql_query($query);
while( ($row= mysql_fetch_array($result)) ){
            $subject = "CPD Certificate";
    $email = $row['email'];
    $LastName = $row['LastName'];
    $OpNo = $row['OpNo'];
    $TestNo = $row['QuizNo'];

            $headers  = "From: online@example.com";
    $headers = 'MIME-Version: 1.0' . "\r\n"; 
    $headers .= 'Content-type: text/html; 
              charset=iso-8859-1' . "\r\n";

            $mail_body ='<html>...Here its were my my 
            html comes with values from table...</html>';

            if (mail($to, $subject, $mail_body, $headers)){
            $query = "UPDATE `tbl_cert` SET Printed = 1 
               WHERE CertificateNo = "  . $CertificateNo;

            $certresult=mysql_query($query);

            if ($certresult) {

        header('Location:tsCertlist.php');
        } 
```

问题是如何让 $mail_body 在 while 循环中同时包含 html 和 php。我生成的表格或证书对于已通过但未打印证书的 4 个用户是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:47:42.637

创建一个单独的模板文件，其中包含您的 HTML 和您要插入变量的位置/替换放入类似 %REPLACE_FIRSTNAME% 的内容

然后使用 str_replace() 用 db/input/whatever 变量和你需要的数据来改变你的替换变量。

```
$mail_body = file_get_contents("templates/emailtemplate.htm");
$mail_body = str_replace("%REPLACE_FIRSTNAME%",value_from_DB,$template); 
```

已排序，如果您想更改布局，只需相应地编辑模板文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:55:33.120

```
$certNo = 0;
//get $certNo from data base
$mail_body ='<html>'.$certNo.'</html>';
//send 
```

# c# - 从 Linq 查询中调用方法

> ID：14502759
> 
> 赞同：0
> 
> 时间：2013-01-24T13:41:41.477
> 
> 标签：c#, linq, methods

如果我有以下查询：-

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
            group data by new
            {
                InvNo = data.Field<double>("InvoiceNo"),
                AccRef = data.Field<double>("SiteRefNum"),
            }
            into g
            select new
            {
                Code = "1",
                InvType = "I",
                Account = g.Key.AccRef,
                InvNo = g.Key.InvNo,
                ChargeType = ***********
            }; 
```

...我怎样才能调用一个单独的方法 CalcChargeType（它返回一个字符串，基于 InvNo 列中的值）并将返回的值放入 ChargeType 列，因为根据我的阅读，方法无法翻译进入 Linq/SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:45:47.383

> 根据我的阅读，方法无法转换为 Linq/SQL。

但是您没有使用`Linq-To-Sql`，但`Linq-To-DataSet`它是`Linq-To-Objects`.

所以是的，你可以在没有 Linq 的情况下做所有你能做的事情，fe 调用一个方法：

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
        group data by new
        {
            InvNo = data.Field<double>("InvoiceNo"),
            AccRef = data.Field<double>("SiteRefNum"),
        }
        into g 
        select new
        {
            Code = "1",
            InvType = "I",
            Account = g.Key.AccRef,
            InvNo = g.Key.InvNo,
            ChargeType = CalcChargeType(g.Key.InvNo)
        }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:45:17.443

你有没有尝试过 ？

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
            group data by new
            {
                InvNo = data.Field<double>("InvoiceNo"),
                AccRef = data.Field<double>("SiteRefNum"),
            }
            into g
            select new
            {
                Code = "1",
                InvType = "I",
                Account = g.Key.AccRef,
                InvNo = g.Key.InvNo,
                ChargeType = CalcChargeType(g.Key.InvNo)
            }; 
```

当您评估查询时（`ToList()`例如），`CalcChargeType`将调用/

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T13:45:55.147

由于这不是 Linq to SQL，您可以毫无问题地调用它。

通过将查询的第一部分转换为`.AsEnumerable()`您已将表中的所有数据提取`tblCosts`到内存中。现在它不是 Linq to SQL 查询，而是内存中的 linq 查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T13:45:37.413

您必须**评估**查询（通过调用`.ToList()`），然后重新选择并调用该函数，如下所示：

```
var Values = (from data in DtSet.Tables["tblCosts"].AsEnumerable()
        group data by new
        {
            InvNo = data.Field<double>("InvoiceNo"),
            AccRef = data.Field<double>("SiteRefNum"),
        }
        into g)
        .ToList()
        .Select(g => new
        {
            Code = "1",
            InvType = "I",
            Account = g.Key.AccRef,
            InvNo = g.Key.InvNo,
            ChargeType = CalcChargeType(g.Key.ChargeType)
        }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T13:47:24.447

那么你可以*尝试*：

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
        group data by new
        {
            InvNo = data.Field<double>("InvoiceNo"),
            AccRef = data.Field<double>("SiteRefNum"),
        }
        into g
        select new
        {
            Code = "1",
            InvType = "I",
            Account = g.Key.AccRef,
            InvNo = g.Key.InvNo,
            ChargeType = CalcChargeType(g.Key.InvNo)
        }; 
```

由于您使用的是 DataSet 扩展而不是 Linq-to-SQL，我敢打赌它会起作用。如果您的 Linq 提供程序不支持它，您的下一个赌注是尽可能补充水分，然后添加 ChargeType 列：

```
var Values = (from data in DtSet.Tables["tblCosts"].AsEnumerable()
        group data by new
        {
            InvNo = data.Field<double>("InvoiceNo"),
            AccRef = data.Field<double>("SiteRefNum"),
        }
        into g).ToList() // hydrate the query
        .Select(g=> new
        {
            Code = "1",
            InvType = "I",
            Account = g.Key.AccRef,
            InvNo = g.Key.InvNo,
            ChargeType = CalcChargeType(g.Key.InvNo)
        }); 
```

# java - 覆盖equals和hashcode java

> ID：14502761
> 
> 赞同：1
> 
> 时间：2013-01-24T13:41:43.787
> 
> 标签：java, overriding, equals

> **可能重复：**
> [在 Java 中覆盖 equals 和 hashCode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

```
package testpack;

import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

public class TestEm {

    private String company;
    private int salary;

    TestEm(String company, int salary) {
        this.company = company;
        this.salary = salary;
    }

    public static void main(String[] args) {

        Map<TestEm, String> map = new HashMap<TestEm, String>();
        map.put(new TestEm("abc", 100), "emp1");
        map.put(new TestEm("def", 200), "emp2");
        map.put(new TestEm("ghi", 300), "emp3");

        Set<TestEm> set = map.keySet();
        Iterator<TestEm> it = set.iterator();
        while (it.hasNext()) {
            System.out.println(it.next());
        }
        **System.out.println(map.get(new TestEm("ghi", 300)));**

    }

    @Override
    public boolean equals(Object o) {

        if (o == this)
            return true;
        if (!(o instanceof TestEm))
            return false;

        TestEm te = (TestEm) o;
        return te.company.equals(company) && te.salary == salary;
    }

    @Override
    public int hashCode() {

        int code = 0;

        code = salary * 10;
        return code;
    }

    /*
     * @Override public String toString() {
     * 
     *    return this.company;  }
     */
} 
```

**输出是**

```
测试包.TestEm@3e8
测试包.TestEm@7d0
测试包.TestEm@bb8
emp3

```

嗨，我在我的 TestEm 类中重写了 Object 类的一些方法，一切都很好，但是前三个输出使用迭代器，然后执行 SOP，最后一个只是使用 SOP，我只想知道为什么前三个输出是作为使用迭代器的对象，第四个只是作为与键对应的值的正确输出，我没有覆盖 toString() 所以前三个输出是正确的，但是没有 toString() SOP 如何显示正确的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:43:38.400

迭代器迭代集合中的对象，而

```
map.get(new TestEm("ghi", 300)) 
```

返回与上述键关联的值。该值为`"emp3"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:46:20.557

迭代器正在遍历并打印*键*(class: `TestEm`)，而外部的 SOP 正在检索映射的*值*，对应于键`TestEm("ghi", 300)`，恰好是`"emp3"`(class:) `String`。它们是不同的对象，因此打印的值不同。

您应该覆盖`toString()`以`TestEm`更清楚地看到正在发生的事情，如下所示：

```
@Override
public String toString() {
    return company + " " + salary;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:44:23.377

第四行在循环外打印，是从地图返回的值。

由于您已覆盖`equals`和`hashCode`，因此您构建的新`TestEm`对象被视为等于您添加到地图中的最后一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T13:46:18.457

您正在迭代键，而不是值。

# php - 在php中签出购物车时如何减少商品数量？

> ID：14502765
> 
> 赞同：0
> 
> 时间：2013-01-24T13:42:17.750
> 
> 标签：php, mysql, shopping-cart

我正在做一个购物车系统，我不确定在 php 中签出购物车时如何减少 mysql 中的项目数量？

例如，当 item1 购买 2 时，mysql 中的数量列应该减少 2。即数量应该相对于购买的数量减少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:46:15.993

您可以运行一个简单的 MySQL`UPDATE`查询：

```
UPDATE `products` SET `quantity` = `quantity` - num_purchased WHERE `id` = 15 
```

显然，您需要将值、字段名称和表名称替换为您实际使用的名称......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:00:28.647

请参阅如果您在购物车中有多个产品，您应该像下面这样循环浏览产品

```
foreach ($cartItem as $cart) {
    $productId = $cart['product_id'];
    $qty = $cart['qty'];
    $sql = "UPDATE `products` SET `num_of_stocks` = `num_of_stocks` - $qty 
            WHERE `id` = $productId";
} 
```

# c# - 在运行时从数据库名称 C# 实例化 windows 窗体

> ID：14502769
> 
> 赞同：2
> 
> 时间：2013-01-24T13:42:32.850
> 
> 标签：c#

我在 c# 中实例化一个表单时遇到了问题，我从数据库中检索了它的名称，我已经完全消除了命名空间，只是为了确保我没有弄错对象名称，但每次代码运行时，对象都返回为 null 而不是适当的形式。

```
private static Object CreateObjectInstance(string strObjectName)
{
    Object obj = null; // Temporary object

    try
    {
        if (strObjectName.LastIndexOf(".") == -1) // If there is no '.' in the object name
            strObjectName = Assembly.GetEntryAssembly().GetName().Name + "." + strObjectName;

        obj = Assembly.GetEntryAssembly().CreateInstance(strObjectName);
    }
    catch (Exception ex)
    {
        clsAdmFunctions.RecordException(ex); // Record error to the database
        MessageBox.Show("Error instantiating the object\n\nDescription : "+ex.Message, "Object Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        obj = null;
    }

    return obj;
}

public static Form CreateForm(string strFormName)
{
    return (Form)CreateObjectInstance(strFormName);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:05:09.437

问题在于您认为程序集名称是您的类名的一部分。确实，您需要访问程序集，但最终类名只是`Namespace.Class`名称。如果您提供您的实际命名空间以及类，那么它就可以工作。将您的方法更改为此，也许：

```
private static T CreateInstance<T>(string fullyQualifiedClassName)
{
    try
    {
        return (T)Activator.CreateInstance(Type.GetType(fullyQualifiedClassName));
    }
    catch (Exception ex)
    {
        clsAdmFunctions.RecordException(ex); // Record error to the database
        MessageBox.Show("Error instantiating the object\n\nDescription : " + ex.Message, "Object Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        return default(T);
    }
} 
```

换句话说，如果您将命名空间保存在数据库中，您也需要命名空间。只需`class.GetType()`按原样保存，否则`class.GetType().ToString()`您将看到命名空间也已保存。原因是您可以在同一个程序集中拥有同名的`namespace1.Person`类`namespace2.Person`。

如果您需要读取程序集中的所有命名空间，您可以执行以下操作：

```
 foreach(var type in Assembly.WhateverAssembly().GetTypes())
     //print type.Namespace; 
```

如果您不知道确切的名称空间，您就会陷入困境。也许你可以**假设**它是

```
var namespace = Assembly.WhateverAssembly().GetTypes()[0].Namespace; 
```

* * *

您需要为您的类设置名称空间，否则会违反 .NET 的设计。如果你真的不想为你的表单设置命名空间，你只需要指定类名，排除程序集名。只需致电：

```
CreateInstance<MyForm>("MyForm"); 
```

提供`MyForm`的是`global`和组件是一样的。如果表单在不同的程序集中，则首先使用`Assembly.Load`or加载它`Assembly.LoadFrom`，然后创建实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:59:58.070

您的关键方法`CreateObjectInstance`应该可以正常工作，所以我猜它是传入的参数？在我的示例中，我展示了如何包含完整的命名空间和类名等：

```
namespace Example.SubFolder
{
    internal class frmAdmAbout
    {
        public string Name { get; set; }
    }
}

namespace Example.ActualApp
{
    using System;
    using System.Reflection;

    internal class Program
    {
        static void Main(string[] args)
        {
            var newItem = CreateObjectInstance("Example.SubFolder.frmAdmAbout");
            if (newItem == null)
            {
                Console.WriteLine("Failed to create!");
            }
            else
            {
                Console.WriteLine("Successfully created!");
            }
            Console.ReadKey();
        }

        private static Object CreateObjectInstance(string strObjectName)
        {
            Object obj = null;

            try
            {
                if (strObjectName.LastIndexOf(".") == -1)
                    strObjectName = Assembly.GetEntryAssembly().GetName().Name + "." + strObjectName;

                obj = Assembly.GetEntryAssembly().CreateInstance(strObjectName);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error instantiating the object\n\nDescription : " + ex.Message);
                obj = null;
            }

            return obj;
        }
    }
} 
```

# report - 报告工作室模板

> ID：14502771
> 
> 赞同：2
> 
> 时间：2013-01-24T13:42:33.783
> 
> 标签：report, cognos, cognos-8, cognos-bi

我正在尝试安排 10 个报告到同一个表并要求相同的列，除了它们的键值不同（即报告从表 A 中选择列 a、b、c，但在 where 子句 = ' CLIENT1'，='CLIENT2' 等）。

我想知道是否可以使用相同的报告并在运行定义该 where 子句的外部变量之前设置一个外部变量。所有这些都安排好了，这样我就不必手动设置变量了。

所以我想要的是报告使用 10 个定义客户端键值的不同外部变量自行运行 10 次。

如果这样的事情是可能的，我很乐意接受一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:29:12.080

2 - 选项。

你的情景。听起来您想由几个不同的客户预先运行报告。

选项 - 不按任何顺序

1.  Bursting 允许您基于突发密钥（您的客户 ID）预运行和/或预交付报告。报表是针对整个数据集运行的，然后通过burst key进行拼接。您可以将它们存储为报告输出版本和/或将它们定位为通过电子邮件发送给特定用户等...（这是几年前 Cognos 中创建的一个流行功能，并且在手册中有大量文档）。这些报告可以安排和预先运行，因此您不必等待数据库查询等......

2.  报告视图 - 您可以在报告之上创建一个报告视图，它只不过是具有自己的默认参数等的报告的逻辑而非物理实例。这样，您可以创建一个报告并在其之上创建尽可能多的视图根据需要使用不同的参数。这些也可以安排和预先运行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T13:15:21.843

**报告视图**将在这种情况下为您提供帮助。向报告添加提示以选择您要为其运行报告的选项。当您想安排报告 10 次时，创建 10 个报告视图。在每个报告视图中选择不同的值（10 个值中的 1 个），即。在第一个报告视图中选择 CLIENT1，在第二个报告视图中选择 CLIENT2，等等...安排所有报告。完成！！！与**Report View**相比，**Bursting**会更好，因为**数据执行将在 Bursting 中执行一次，**但在 Report View 中，它将根据存在的报告视图数量执行。 **在 Burst 的情况下，维护更容易。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:25:43.743

如果您在突发工作时遇到问题，您可能还可以使用页面集。

[http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cr_rptstd.8.4.0.doc/ug_cr_rptstd_id28446cr_rptstd_frmat_rep_create_page_set.html](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cr_rptstd.8.4.0.doc/ug_cr_rptstd_id28446cr_rptstd_frmat_rep_create_page_set.html)

# opencv - OpenCV 求解即插即用桶失真

> ID：14502777
> 
> 赞同：2
> 
> 时间：2013-01-24T13:42:42.550
> 
> 标签：opencv, camera-calibration, distortion

我正在使用 OpenCVs solvePnP 来获取相机的姿势/位置。我通过使用用户选择的点来执行此操作，该图像已校准并已应用径向和切向失真修复。

但是，除了图像中选择的点之外，solvePnP() 似乎将失真系数作为输入，我想这意味着 SolvePnP 将失真修复应用于作为函数输入的点。

这会在我的程序中产生一个小错误，因为源图像已经是桶形失真的，对吧？

如果是这样，我怎样才能让solvePnP（）忽略桶形失真？我可以传递一个失真系数设置为 1 的向量吗？或者我应该将所有值设置为 0？还有什么办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:23:39.687

过去我刚刚通过了一个空的 cv::Mat

```
cv::solvePnP(world_points, image_points, camera_mat, cv::Mat(), rotation_vector, translation_vector); 
```

[文档](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-solvepnp)说，如果您传递 NULL，它将为您将所有系数设置为 0 。

# spring - Groovy-Spring 集成问题

> ID：14502780
> 
> 赞同：0
> 
> 时间：2013-01-24T13:42:59.993
> 
> 标签：spring, groovy

我们使用以下技术堆栈开发了一个应用程序：

```
Struts 2.1 
Springs 3.1 
Groovy 1.8 
Tomcat 6.0.26 - For deployment 
```

我们的要求是将应用程序的特定层迁移到 Groovy。我们已经将该层迁移到 groovy 并且应用程序运行良好。迁移 groovy bean 后由 spring 容器正确初始化，但我们无法利用 Groovy 的“动态语言”功能。也就是说，当我们修改 Groovy 脚本时，更新的更改不会动态地反映回应用程序。

作为参考，我附上了一个 groovy 脚本的方法（GroovyConnection.groovy）：

```
@Component 
class GroovyConnection implements EndPointManager, Serializable{ 
private static final long serialVersionUID = 1481681752777429674L; 
private final static Logger log = Logger.getLogger(GroovyConnection.class); 
private static final String DESTINATION_DIR = ARTIFACT_DIR_PATH.toString()+"/"; 
private static final String JIVE_USER = "";  //"jivescpt"; 
/** 
* @param default 
*/ 
public GroovyConnection() { 
    super(); 
    jschInstance = new JSch(); 
} 

public String executeCommands(Session session, String inputCommand, Device device) { 
log.info("Entering executeCommand() device:" + inputCommand); 
Channel channel = null; 
PipedOutputStream commandIO = null; 
InputStream sessionInput = null; 
InputStream sessionOutput = null; 
InputStream sessionError = null; 
String commandResponse = null; 
try { 
    channel = session.openChannel("shell"); 
    commandIO = new PipedOutputStream(); 
    sessionInput = new PipedInputStream(commandIO); 
    channel.setInputStream(sessionInput); 
    sessionOutput = channel.getInputStream(); 
    sessionError = channel.getExtInputStream(); 
    channel.connect(); 

    return fireCommandsOnTerminal(session, commandIO, sessionOutput, sessionError, inputCommand, device); 
} 
catch (JSchException e) { 
    log.error(AutomationConstants.ERROR_MSG.toString(), e); 
} 
catch (IOException e) { 
    log.error(AutomationConstants.ERROR_MSG.toString(), e); 
} 
catch (InterruptedException e) { 
    log.error(AutomationConstants.ERROR_MSG.toString(), e); 
} 
finally { 
    boolean isClosed = GroovyConnectionHelper.closeAll(session, channel, commandIO, sessionInput, sessionOutput, sessionError); 
    if (!isClosed) { 
        return AutomationUtils.getPropertyValue("jive.vpn.error.msg"); 
    } 
} 
log.info("Exiting executeCommand() device:" + inputCommand); 
return commandResponse; 
} 
} 
```

Groovy 上下文文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd">
<lang:defaults refresh-check-delay="2000"/>
<lang:groovy id="endPointManager" 
             script-source="classpath:GroovyConnection.groovy" refresh-check-delay="1000">
</lang:groovy>
</beans> 
```

即使在给定 1 秒的刷新检查延迟时间之后，groovy bean 在运行时也没有相应地表现。我必须重新启动 Tomcat 才能重新部署更新的 groovy 更改。看起来应用程序将 groovy bean 视为 java bean。

除此之外，如果我在不使用 Springs 的情况下执行 groovy 脚本，它会按预期执行。修改后的 groovy 脚本更改会动态反映回来。这是供参考的代码：

常规脚本：

```
package com
public class test1 {
def hello_world() {
    println "Connectddded"
    }
} 
```

主类：

```
public static void main(String arg[]) {
 try {
        new GroovyShell().parse(newFile("test1.groovy")).invokeMethod("hello_world", null);              
    } catch (CompilationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

根据我的理解，我们在 Spring-Groovy 集成配置中遗漏了一些允许我们刷新 Groovy bean 修改的内容，或者 Tomcat 不允许我们刷新更新的 groovy 脚本。

如果有人可以就此提供任何建议会有所帮助。提前致谢。

问候， Divya Garg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:01:25.917

感谢所有花时间阅读我的帖子的人。问题已解决。

实际上，我们同时使用了@component 和 groovy-context.xml 文件，因为我们遇到了这个问题。我已删除注释并将我的 groovy 文件放在类路径中。现在一切都按预期工作。Groovy bean 正在正确刷新。但是我无法使用弹簧注释来实现相同的效果。

现在我面临另一个问题，我为此做了很多尝试。我有另一个 groovy bean，其中我的所有静态方法都称为 (GroovyConnectionHelper.groovy)。我无法在 GroovyConnection.script 中调用这些静态方法。当应用程序执行应用程序时，在执行到达 GroovyConnectionHelper 静态方法的地方挂起。

为了解决我试图在 GroovyConnection 中注入 GroovyConnectionHelper bean 的问题，如下所示（这不是好的方法）：

groovy-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:lang="http://www.springframework.org/schema/lang"
           xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd">
    <lang:defaults refresh-check-delay="1000"/>
    <lang:groovy name="endPointManager" script-source="classpath:GroovyConnection.groovy">
         <lang:property name="groovyConnectionHelper" ref="groovyConnectionHelper"/>
    </lang:groovy>

    <lang:groovy id="groovyConnectionHelper" script-source="classpath:GroovyConnectionHelper.groovy"/>
</beans> 
```

我将相同的设置器放在 GroovyConnection.groovy 中：

```
public void setGroovyConnectionHelper(GroovyConnectionHelper groovyConnectionHelper) {
    System.out.println( "Setting ----------------------------------------- groovyConnectionHelper : " + groovyConnectionHelper  );
    if ( null != groovyConnectionHelper ){
        System.out.println( "Object groovyConnectionHelper: ::: " + groovyConnectionHelper.dump() );
    }
    this.groovyConnectionHelper = groovyConnectionHelper;
} 
```

但这行不通。面对这个错误：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.scripting.groovy.GroovyScriptFactory#0': BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scriptedObject.org.springframework.scripting.groovy.GroovyScriptFactory#0': Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'groovyConnectionHelper' of bean class [GroovyConnection]: Bean property 'groovyConnectionHelper' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:452)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 71 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scriptedObject.org.springframework.scripting.groovy.GroovyScriptFactory#0': Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'groovyConnectionHelper' of bean class [GroovyConnection]: Bean property 'groovyConnectionHelper' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1396)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.aop.target.dynamic.BeanFactoryRefreshableTargetSource.obtainFreshBean(BeanFactoryRefreshableTargetSource.java:77)
    at org.springframework.scripting.support.RefreshableScriptTargetSource.obtainFreshBean(RefreshableScriptTargetSource.java:79)
    at org.springframework.aop.target.dynamic.BeanFactoryRefreshableTargetSource.freshTarget(BeanFactoryRefreshableTargetSource.java:66)
    at org.springframework.aop.target.dynamic.AbstractRefreshableTargetSource.refresh(AbstractRefreshableTargetSource.java:97)
    at org.springframework.aop.target.dynamic.AbstractRefreshableTargetSource.getTargetClass(AbstractRefreshableTargetSource.java:68)
    at org.springframework.scripting.support.ScriptFactoryPostProcessor.createRefreshableProxy(ScriptFactoryPostProcessor.java:553)
    at org.springframework.scripting.support.ScriptFactoryPostProcessor.postProcessBeforeInstantiation(ScriptFactoryPostProcessor.java:322)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:880)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:852)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:446)
    ... 79 more
Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'groovyConnectionHelper' of bean class [GroovyConnection]: Bean property 'groovyConnectionHelper' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1064)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
    ... 94 more 
```

请建议我应该为此使用 Groovy Bean Injection 还是我们可以直接调用 groovy 静态方法。提前致谢

问候， Divya Garg

# ios - 试飞工作流程

> ID：14502782
> 
> 赞同：1
> 
> 时间：2013-01-24T13:43:02.617
> 
> 标签：ios, provisioning-profile, ios-provisioning, testflight

我正在尝试了解 testflight App 分发工作流程

1\. 当一个新的测试人员想加入我的测试团队时 - 我要求他们在试飞时创建一个帐户。

2\. 接下来，他们需要给我他们的设备 UUID，以便我可以将该 UUID 添加到分发配置文件中。 **问题**-从测试人员那里获取 UUID的**最佳方式是什么。**我不希望他们通过电子邮件将其通过电子邮件发送给我或通过电话给我 UUID。因为他们有 testflight 帐户和 iPhone - 他们可以将他们的设备 UUID 从 iPhone 上传到 testflight 帐户，以便我可以看到测试人员 JohnDoe 有 UUID xyz - 如果是这样怎么办？他们（测试人员）需要在 iPhone 上运行什么，以便在我（应用程序开发人员）登录 TestFlight 时显示他们的 UUID。

3\. 当我（应用程序开发人员）拥有新添加的 UUID - 我需要使用新的 UUID 更新我的 Apple 配置门户上的分发配置文件时 - 保存更新的配置文件，然后将其上传回 Testflight。

**问题**- 这（将新的 UUID 添加到配置文件）可以通过 Testflight 本身完成吗？- 即 Testflight 可以使用新的 UUID 更新我的个人资料，或者只能通过 Apple 配置门户完成，然后将其带回 Testflight

有类似的问题，但没有一个能准确回答我正在寻找的两个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:52:29.653

1.  获取 UUID 的最佳方法 - 当他将注册设备进行测试时，从测试人员的 TestFlight 配置文件中复制它。

2.  **您只能在 Developer Apple**门户上更新配置文件。**但是您可以通过在构建页面上按更新配置文件来更新现有构建的配置文件。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:50:08.777

它真的要简单得多：

1.  创建团队
2.  通过电子邮件邀请他人
3.  当他们注册时，他们会自动通过电子邮件向您发送他们的设备 UDID

以下是 TestFlight 常见问题解答的内容：它是[如何工作的？](http://help.testflightapp.com/customer/portal/articles/829537-how-does-it-work-)

第 4 步是手动将设备 ID 添加到 Apple 网站，生成新的配置文件，下载并安装，重建（希望使用 jenkins 或类似的东西）并将新的构建上传到 TestFlight（我提到 jenkins :)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T12:43:47.330

1) 您可以随时从您的 TestFlight 用户那里导出设备 ID - 导出的文件可以直接导入您的 Apple Developer Portal。

当新用户（或新设备）添加到您的 TestFlight 帐户时，您总是会收到一封自动电子邮件。

至于什么是最好的方式：谁知道呢，这真的是一个选择的问题。

2) 不可以。TestFlight 无法在添加设备的情况下创建新的配置文件。

您必须自己创建它（Apple Developer Portal）：

*   将新设备添加到您的开发者帐户
*   将此设备添加到配置文件
*   重新生成和下载配置文件
*   更新 TestFlight 构建的配置文件 ( [https://stackoverflow.com/a/14265876/653513](https://stackoverflow.com/a/14265876/653513) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T12:01:45.507

1>转到项目，存档应用程序。

2>在存档中，单击分发。

3>单击保存进行企业或临时部署并将ipa文件保存到您的桌面

4>打开[https://testflightapp.com/dashboard/](https://testflightapp.com/dashboard/)并登录

5>登录后，点击上传你的构建按钮

6>下一步点击放置你的ipa文件。从桌面选择.ipa文件并上传。

7>通过勾选复选标记选择配置文件，然后单击更新和通知按钮。

8>点击更新和通知后，请点击更新和通知下方的共享构建按钮。

9>您还可以通过单击右侧菜单上的权限来查看此共享选项。

10>点击分享按钮后，您需要提供您的电子邮件ID，以便在您的邮件收件箱中显示testflight应用程序。

11>在您的设备中打开试飞邮件，然后单击安装按钮。

12>应用程序自动在您的设备中打开testflight，请使用testflight登录，点击安装配置文件按钮

13>点击刚刚上传的应用程序后，点击安装按钮。应用程序将自动安装在您的设备中。

如果对此有任何疑问，请告诉我。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-14T10:38:14.303

试试 TestFlight.top
简单邀请测试人员 当用户请求参与你的应用测试时，你不需要做任何操作。申请者只需点击页面中的下载链接，即可直接下载测试申请。就像使用 App Store 一样简单

# javascript - 小计算问题

> ID：14502783
> 
> 赞同：4
> 
> 时间：2013-01-24T13:43:02.847
> 
> 标签：javascript, jquery

我对javascript计算有一个小问题。我有这样的功能：

```
$( "#main-nav li[class]" ).each(function( index ) {
     var position = $(this).offset();
     var width = $(this).width();
     var center = parseInt(position) - (parseInt(width) / 2);
     console.log("Position: " + position.left + ", width: " + width +  ", center: " + center);
}); 
```

但它导致了这一点。任何人都知道如何不进行计算？

```
Position: 722, width: 83, center: NaN 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T13:43:58.197

给`position.left`

```
$( "#main-nav li[class]" ).each(function( index ) {
     var position = $(this).offset();
     var width = $(this).width();
     var center = parseInt(position.left) - (parseInt(width) / 2);
     console.log("Position: " + position.left + ", width: " + width +  ", center: " + center);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:46:43.200

只需在这条线上进行简单的更正。然后你会得到想要的输出..

```
var center = parseInt(position.left) - (parseInt(width) / 2); 
```

# c++ - 如何编写接受未知类型和参数数量的 C++ 函数？

> ID：14502786
> 
> 赞同：1
> 
> 时间：2013-01-24T13:43:15.680
> 
> 标签：c++, argument-passing

我想写一个这种类型的函数：

```
void Print(void* args ...)
{
   while(args)
     cout<<args[i];
} 
```

funcdtion 应该处理 int 和 (std::string or char*)

可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:47:45.413

您可以使用可变参数模板执行此操作：

```
void Print() { }

template <typename T, typename ...Args>
void Print(T const & t, Args const &... args)
{
    cout << t;
    Print(args...);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T13:49:38.193

接听

> [一个字符串的连接变量类型/参数数量](https://stackoverflow.com/questions/14502786/how-to-write-c-function-that-accept-unknown-typenumber-of-arguments/14502920#comment20214117_14502786)

无需为此编写自己的函数，只需使用`std::stringstream`：

```
std::stringstream ss;
ss << intVar << stringVar << whatever; 
```

# java - XML 转换 - 自动化

> ID：14502788
> 
> 赞同：1
> 
> 时间：2013-01-24T13:43:19.387
> 
> 标签：java, xml, xslt

我有一个路由 - 我需要编辑（更改某些元素的名称、更改属性的顺序等）一个 XML 文档 (WSDL)

自动化此例程的最佳方法是什么？

（某种脚本？java程序？）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:46:19.533

XSLT 转换可能对您非常有帮助，我相信行业标准是 XSLT 转换。你可以在这里读更多关于它的内容：

[http://en.wikipedia.org/wiki/XSLT](http://en.wikipedia.org/wiki/XSLT)

并在此处了解如何在 java 中使用它：

[http://docs.oracle.com/javase/tutorial/jaxp/xslt/transformingXML.html](http://docs.oracle.com/javase/tutorial/jaxp/xslt/transformingXML.html)

# vim - vim中如何替换

> ID：14502792
> 
> 赞同：0
> 
> 时间：2013-01-24T13:43:21.560
> 
> 标签：vim

我在源文件中有一行：`[12 13 15]`. 在 vim 中，我输入：

```
:%s/\([0-90-9]\) /\0, /g 
```

想在 12 和 13 之后添加一个昏迷。它可以工作，但不完全，因为它插入了一个 extraspace `[12 , 13 , 15]`。

我怎样才能达到预期的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:46:14.743

`\1`在替换表达式中使用，而不是`\0`.

`\1`是第一个捕获的文本`\(...\)`。如果您的模式中有更多的转义括号，将匹配从第二个、第三个等`\2`开始的对之间的文本捕获。`\(``\3``\(`

`\0`是与整个模式匹配的整个文本，无论是否在括号中。在您的情况下，这包括模式末尾的空格。

另请注意，`[0-90-9]`这与`[0-9]`: 每个`[...]`集合仅匹配一个字符相同。无论如何它都会起作用，因为在您的数据中，“一个数字后跟一个空格”与“2 个数字后跟一个空格”在相同的位置匹配。（如果你实际上只需要在 2 位数字后插入逗号，你可以写`[0-9][0-9]`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:52:08.510

> “我在源文件中有一行：...”

然后你输入`:%s/...`这将在所有行上进行替换，如果它匹配的话。或者那是你文件中的单行？

如果是单行，则不必分组，或者`[0-9]`, 就`:%s/ \+/,/g`可以完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:14:19.403

好的答案已经指出了有趣的解决方案，但这里有另一个解决方案，利用`\zs`，它标志着比赛的开始。在这种模式下：

```
/[0-9]\zs / 
```

搜索到的文本是`/[0-9] /`，但只有空格算作匹配。请注意，您可以使用该类`\d` 来简化数字字符类，因此以下命令将满足您的需要：

```
:s/\d\d\zs /, /g  ; matches only the space, replace by `, ' 
```

您说您有多条线路，而这些更改仅针对某些线路。您可以直观地选择要更改的行或使用`:global` 命令，该命令搜索与模式匹配的行并将命令应用于它们。现在您需要构建一个表达式以尽可能不精确地匹配要更改的行。如果以可选空格、a 和两位数字开头的行 `[`是唯一要匹配的行，而没有其他行，那么这对您有用：

```
:g/\s*[\d\d/s/\d\d\zs /, /g 
```

查看 [*pattern.txt*](http://vimdoc.sourceforge.net/htmldoc/pattern.html) 的 帮助`\ze` 和类似的 和 [`:global`](http://vimdoc.sourceforge.net/htmldoc/repeat.html#%3aglobal)。

* * *

*作业：使用帮助来理解`\zs`并查看其工作原理：*

```
:s/\d\d\zs\ze /,/g 
```

# c# - LINQ to Dictionary - 使用 XML

> ID：14502794
> 
> 赞同：4
> 
> 时间：2013-01-24T13:43:28.957
> 
> 标签：c#, xml, linq

我已经问了一个类似的问题，当然，但是，这个问题是不同的，我已经尝试过了。

我试图使用 Linq 读取 XML 数据并解决了这个问题，但是，我需要选择多个值并将它们存储到字典中。我已经尝试过（评论是我的尝试），但我无法弄清楚并收到如下错误：

> System.NullReferenceException：对象引用未设置为 dsdsdsds.MainClass+c__AnonStorey0.<>m__0 (System.Xml.Linq.XElement datanum) [0x00000] in /Users/p/Projects/dsdsdsds/dsdsdsds/Main 中的对象实例.cs:23

假设我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
   <kml xmlns="http://www.opengis.net/kml/2.2">
     <Document>
       <name>My word place</name>
         <Placemark>
           <name>Main Building</name> 
             <id>1</id>
               <Polygon>
            <extrude>1</extrude>
         <altitudeMode>relativeToGround</altitudeMode>
       <outerBoundaryIs>
    <LinearRing>
 <coordinates> 
```

现在我需要得到的是“名称”和“id”并将这些值放入字典中。

这是我的代码：

```
var xdoc = XDocument.Load ("buildings.kml");
        XNamespace kml = "http://www.opengis.net/kml/2.2";

        var dict = xdoc.Descendants(kml + "Placemark").ToDictionary (

            datanum => datanum.Attribute(kml + "name").Value,
            datanum => datanum.Attribute(kml + "id").Value );

            /*.ToDictionary(e => e.Element("name").Value,
                                 e => e.Descendants("id")
                                    .Select (item => new Building
                                    {
                                        BuildingName = (string) e.Element(kml + "name").Value,
                                        BuildingID = Convert.ToInt16(item.Element(kml + "id").Value)
                                    }).ToList()
                                    );
        /*

        /*var buildings = xdoc.Descendants (kml + "Placemark")
            .Select((element, index) => new Building {
                BuildingName = (string) element.Element(kml + "name"),
                BuildingID = (int) element.Element(kml + "id")
            });
        */ 
```

注意：我已经进行了三次尝试，但是，得到了相同/相似的错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:46:58.270

`name`并且`id`是*元素*，而不是*属性*。因此，您需要使用`Element()`而不是`Attribute()`：

```
var dict = xdoc.Descendants(kml + "Placemark")
               .ToDictionary(datanum => datanum.Element(kml + "name").Value,
                             datanum => datanum.Element(kml + "id").Value); 
```

如果`name`或`id`是可选标签，您可以使用以下代码来避免`NullReferenceException`：

```
var dict = doc.Descendants(kml + "Placemark")
              .Select(x => new { name = (string)x.Element(kml + "name"),
                                 id = (string)x.Element(kml + "id") })
              .Where(x => x.name != null)
              .ToDictionary(x => x.name, x => x.id); 
```

请注意：这只是忽略`Placemark`没有标签的`name`标签。仍然考虑`Placemark`只有`name`标签和没有标签的标签。`id`

顺便说一句：您的格式很好地掩盖了这一点，但是您在问题中提供的 XML 无效。正确格式化，这变得很明显：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
  <name>My word place</name>
  <Placemark>
    <name>Main Building</name> 
    <id>1</id>
    <Polygon>
      <extrude>1</extrude>
      <altitudeMode>relativeToGround</altitudeMode>
      <outerBoundaryIs>
        <LinearRing>
          <coordinates> 
```

# java - 如何在参数化的 tagx 文件中使用集合？

> ID：14502795
> 
> 赞同：0
> 
> 时间：2013-01-24T13:43:30.040
> 
> 标签：java, jsp, servlets, jspx

我想将标记文件转换为 tagx，但我不知道如何重新编写属性名称/类型声明（最后一行）：

标签：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib tagdir="/WEB-INF/tags" prefix="tag"%>
<%@ taglib uri='http://java.sun.com/jsp/jstl/functions' prefix='fn'%>
<%@ tag import="myPackage.*"%>
<%@ attribute name="treeMap" type="java.util.Collection"%>  <!-- ##### this one #### --> 
```

标签：

```
<?xml version="1.0" encoding="utf-8"?>
<jsp:root
    version="2.1"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:tag="/WEB-INF/tags"
    import="myPackage.*"
> 
```

有人可以告诉我适当的语法`<%@ attribute name="treeMap" type="java.util.Collection"%>`吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:32:00.180

它应该只是：

```
<jsp:directive.tag import="myPackage.*"/>
<jsp:directive.attribute name="treeMap" type="java.util.Collection"/> 
```

顺便说一句，看起来您实际上指的是 .tag 和 .tagx 文件......

# java - 如何重构此代码并应用 OO 模式？

> ID：14502797
> 
> 赞同：0
> 
> 时间：2013-01-24T13:43:37.980
> 
> 标签：java, oop, refactoring

我的班级中有四个`RichTable`实例，并且有一个`current`表实例的概念。根据一个标志`resetAll`，我需要清除所有表或**除当前表之外的所有表的选择**。如果`resetAll`为真则清除所有内容，否则忽略当前的。当前表的索引作为参数传递给执行清理操作的方法。

清除一切的呼吁如下所示：

```
clearSubTypeSettings(true,-1); 
```

清除除当前之外的所有内容的调用如下所示：

```
clearSubTypeSettings(true, col); 
```

上述方法的实现是这样的：

```
private void clearSubTypeSettings(boolean resetAll, int exceptControl) {
    if (!resetAll) {
        clearAllExceptCurrent(exceptControl);
    } else {
        clearAll();
    }
 } 
```

现在这两种方法看起来几乎一样`clearAllExceptCurrent(exceptControl)`。 `clearAll()`以下是实现：

```
 private void clearAll() {
        for (int i = 0; i < SUBTYPE_TABLES; i++)
            if (getSubTypeTable(i).getSelectedRowKeys() != null) {
                RichTable richTable = getSubTypeTable(i);
                RowKeySet rowkeySet = richTable.getSelectedRowKeys();
                rowkeySet.clear();
                AdfFacesContext.getCurrentInstance().addPartialTarget(richTable);
            }
    } 
```

和

```
private void clearAllExceptCurrent(int exceptControl) {
    for (int i = 0; i < SUBTYPE_TABLES; i++)
        if (i != exceptControl && getSubTypeTable(i).getSelectedRowKeys() != null) {
            RichTable richTable = getSubTypeTable(i);
            RowKeySet rowkeySet = richTable.getSelectedRowKeys();
            rowkeySet.clear();
            AdfFacesContext.getCurrentInstance().addPartialTarget(richTable);
        }
} 
```

我觉得我在这里编写了重复的冗余代码，将来会使维护复杂化。如何改进此代码并使其更加面向对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:47:46.690

您可以让`clearAll()` **委托**（=> OOP 模式）来`clearAllExceptCurrent()`（=> 通过删除重复代码来改进代码，使其更易于维护）：

```
private void clearAll() {
   clearAllExceptCurrent(-1);
} 
```

您的两种方法之间的唯一区别`i != exceptControl`是`clearAllExceptCurrent()`. 通过传递`-1`这个条件总是`true`并且因此实际上是不存在的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:47:14.460

大部分重复代码是清除表的位。那么怎么样：

```
private void clearTable(int id) {
    if (getSubTypeTable(i).getSelectedRowKeys() != null) {
        RichTable richTable = getSubTypeTable(i);
        RowKeySet rowkeySet = richTable.getSelectedRowKeys();
        rowkeySet.clear();
        AdfFacesContext.getCurrentInstance().addPartialTarget(richTable);
    }
} 
```

然后：

```
 private void clearAll() {
    for (int i = 0; i < SUBTYPE_TABLES; i++) {
        clearTable(i);
    }
 }

private void clearAllExceptCurrent(int exceptControl) {
    for (int i = 0; i < SUBTYPE_TABLES; i++) {
        if (i != exceptControl) {
            clearTable(i)
        }
    }
} 
```

编辑：`if`在里面移动语句`clearTable`

# .htaccess - Htaccess如何正确路由到正确的目录？

> ID：14502804
> 
> 赞同：0
> 
> 时间：2013-01-24T13:44:07.890
> 
> 标签：.htaccess, routing

我的服务器上有一个文件夹结构，如下所示：

```
.htaccess
index.php
[website1]
    [placeholder]
        index.php
[website2]
[website3] 
```

所有域 web1.com、web2.com 和 web3.com 都链接到该目录。我喜欢 htaccess 将它们路由到正确的目录。所以 web1.com 转到 website1，web2.com 转到 website2，等等。

但是，我喜欢 URL 类似于[http://www.web1.com/](http://www.web1.com/)，它应该显示 website1 中的内容。

现在我有以下代码：

```
RewriteCond %{HTTP_HOST} ^(web1.com)$ [NC]
RewriteRule ^(.*)$ http://www.web1.com/$1

RewriteCond %{HTTP_HOST} ^(www.web1.com)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /website1/$1

RewriteCond %{HTTP_HOST} ^(www.web1.com)$ [NC]
RewriteRule ^(/?|index.php)$ website1/index.php [L] 
```

这可行，但是如果您访问[http://www.web1.com/placeholder](http://www.web1.com/placeholder)，它将在 URL 中显示以下内容：

```
http://www.web1.com/website1/placeholder/ 
```

当然，最好将 URL 视为[http://www.web1.com/placeholder](http://www.web1.com/placeholder)。作为记录[http://www.web1.com/placeholder/](http://www.web1.com/placeholder/)确实显示了正确的页面。

我怎样才能解决这个问题？它快把我逼疯了。

**编辑（答案）：**

```
RewriteCond %{HTTP_HOST} ^(www.web1.com)$ [NC]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^website1/(.*)([^/])$ http://%{HTTP_HOST}/$1$2/ 
```

不确定这是否是正确的方法，但它似乎有效。

# vb.net - 工具条闪烁 - 消隐

> ID：14502806
> 
> 赞同：0
> 
> 时间：2013-01-24T13:44:10.717
> 
> 标签：vb.net, winforms, vb.net-2010

我使用： - Windows 7
- VS2010 SP1
- Framework 4
- Winforms
- MDI Parent
- StatusStrip

我的主要形式是 MDI 父级，其 StatusStrip 包含 6 个 StatusLabels。
当主窗体最大化时，来自 StatusStrip 的工具提示开始闪烁。它似乎只在形式最大化时才会发生。
我在想它是否与操作系统任务栏和它们之间的空间有关。
我使用的代码非常简单：

```
 Me.lblServer.ToolTipText = myServer.Name 'lblServer is a StatusLabel 
```

我还尝试在 lblServer_MouseHover 中自己设置工具提示：

```
 ToolTip.SetToolTip(lblServer, myServer.Name) 
```

但是 lblServer 不是一个控件，所以不可能那样做。
有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:06:22.610

所以问题的解决方案是：
在表单中添加一个 ToolTip。
确保属性 OwnerDrawn=False。
然后在 StatusLabel (lblServer) 事件中添加此代码：

```
Private Sub lblServer_MouseHover(sender As Object, e As System.EventArgs) Handles lblServer.MouseHover
   MainToolTip.Show(myServer.Name, myStatusBar, New Point(lblServer.Bounds.Right, lblServer.Bounds.Top - 10))
End Sub
Private Sub lblItems_MouseLeave(sender As Object, e As System.EventArgs) Handles lblServer.MouseLeave
    ' Hide the tooltips in the StatusStrip
    MainToolTip.Hide(myStatusBar)
End Sub 
```

谢谢您的帮助。

# jquery - 跟随直接链接时 jQuery Mobile 页面空白

> ID：14502807
> 
> 赞同：1
> 
> 时间：2013-01-24T13:44:13.250
> 
> 标签：jquery, jquery-mobile

我将使用此链接[http://m.smo.uhi.ac.uk/en/colaiste/smo40/](http://m.smo.uhi.ac.uk/en/colaiste/smo40/)来说明问题。

如果我直接访问此链接，它会显示一个空白页面。浏览器正确获取 HTML（查看源代码），但 jQM 在处理它之后不会将其加载到其中 - 它只是插入一个空作为子元素（检查元素）。

如果我通过主页[http://m.smo.uhi.ac.uk/en/](http://m.smo.uhi.ac.uk/en/)转到此链接-> 单击学院 -> 单击 SMO@40 - 页面显示正确。

验证器没有返回相关错误，并且该页面似乎是有效的 jQM 页面，将其与 jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html 上的信息进行比较我在控制台中没有错误。

我尝试了不同版本的 jQuery，但没有区别。我的猜测是这真的很简单，因为我是 jQM 的新手。

任何人都可以发现为什么直接链接时页面没有加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:56:12.260

如果您仔细观察，您会发现您的直接链接没有打开 BODY 标记。如果您添加它，您的页面将成功显示。

此外，jQuery Mobile 仅使用页面内容（其逻辑将忽略丢失的 BODY 标记），因此从内部 jQM 页面链接时不会导致问题。

# coding-style - 在 Sublime Text 2 中设置 CSS 右大括号的位置

> ID：14502813
> 
> 赞同：1
> 
> 时间：2013-01-24T13:44:39.747
> 
> 标签：coding-style, editor, sublimetext2

我刚刚从 Espresso 切换到 Sublime Text 2，无法弄清楚如何编辑 CSS 代码块上的右大括号位置。我对编码风格非常挑剔，并且更喜欢以下内容：

```
element {
    property: value;
    property: value;
    }

element {
    property: value;
    } 
```

当在 Sublime Text 2 中调用左大括号时，右大括号直接出现在它之后，光标在两个大括号之间。我想设置它以便发生以下情况：

```
element {
    [carat-location]
    } 
```

然后可以在大括号内添加属性。完成后，`tab`键入键并将克拉移动到以下位置：

```
element {
    property: value;
    }

[carat-location] 
```

我已经能够通过编辑 Sugar 包在 Espresso 中进行设置，但我无法追踪 Sublime Text 2 在哪里添加这些设置（如果有的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:05:52.127

您可以创建一个片段。`Tools/New Snippet...`：

```
<snippet>
    <content><![CDATA[
{
    ${1}
    }

${2}
]]>
    </content>
</snippet> 
```

将其另存为`Packages/User/CurlyBrackets.sublime-snippet`.

然后，在您的`Key Bindings - User`：

```
{ "keys": ["{"], "command": "insert_snippet", "args": {"name": "Packages/User/CurlyBrackets.sublime-snippet"}, 
    "context":
    [
        { "key": "selector", "operator": "equal", "operand": "source.css" }
    ]
} 
```

这样，当您`{`在`css`文件中按 , 时，您将获得所需的内容。

# iphone - 如何为 UITable 中的移动行制作自定义按钮和单元格阴影？

> ID：14502815
> 
> 赞同：1
> 
> 时间：2013-01-24T13:44:46.173
> 
> 标签：iphone, ios, objective-c, uitableview

如何在 UITable 中制作用于移动行的自定义按钮？

我希望它是透明的。（而不是这个![在此处输入图像描述](../Images/4560b80f28d208984a6705e34a3712af.png)：）

另一件事是，当单元格移动时，它有阴影。是否可以删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:08:17.467

试试这个...

**您必须通过继承 UITableViewCell 并覆盖其 setEditing:animated: 方法来做到这一点，如下所示：**

重排序控件是一个 UITableViewCellReorderControl，但那是一个私有类，所以你不能直接访问它。

您可以只查看子视图的层次结构并找到它的 imageView。

```
- (void) setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing: editing animated: YES];

    if (editing) {

        for (UIView * view in self.subviews) {
            if ([NSStringFromClass([view class]) rangeOfString: @"Reorder"].location != NSNotFound) {
                for (UIView * subview in view.subviews) {
                    if ([subview isKindOfClass: [UIImageView class]]) {
                        ((UIImageView *)subview).image = [UIImage imageNamed: @"yourimage.png"];
                    }
                }
            }
        }
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:58:50.913

`-[UITableViewCell setShowsReorderControl:]`您可以通过设置为 NO来关闭重新排序控制。之后，您将需要自己的自定义重新排序实现。我不确定你可以在移动过程中对阴影效果做些什么。

如果您真的想深入挖掘，您可以创建自定义表格视图单元格移动 UX。

# android - Android AlarmManager 只工作一次

> ID：14502817
> 
> 赞同：2
> 
> 时间：2013-01-24T13:45:02.180
> 
> 标签：android

```
 public void SetAlarm(Context context, int sec)
 {
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(context, Alarm.class);
     PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
     am.set(AlarmManager.RTC, System.currentTimeMillis()+1000*5 , pi);
     i = new Intent(context, Alarm.class);
     pi = PendingIntent.getBroadcast(context, 0, i, 0);   
     am.set(AlarmManager.RTC, System.currentTimeMillis()+1000*10 , pi); 

 } 
```

为什么 onReceive 在 10 秒后只工作一次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T15:12:09.763

警报管理器将取消第一个警报，因为具有相同信息的待处理意图已提供给警报管理器。任何类型的任何警报，其 Intent 与此匹配（由 filterEquals(Intent) 定义）都将被取消。

如果要设置多个警报（重复或单个），则只需使用不同的 requestCode 创建它们的 PendingIntents。如果 requestCode 相同，则新的警报将覆盖旧警报。

试试这个...

```
 public void SetAlarm(Context context, int sec)
 {
 AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
 Intent i = new Intent(context, Alarm.class);
 PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
 am.set(AlarmManager.RTC, System.currentTimeMillis()+1000*5 , pi);
 i = new Intent(context, Alarm.class);
 pi = PendingIntent.getBroadcast(context, 1, i, 0);   // new request code
 am.set(AlarmManager.RTC, System.currentTimeMillis()+1000*10 , pi); 

} 
```

# c# - 我可以使用 CodeDom 将多个类编译成一个程序吗？

> ID：14502819
> 
> 赞同：0
> 
> 时间：2013-01-24T13:45:08.653
> 
> 标签：c#, codedom

现在这已经困扰了我好多年了，现在是时候看看它是否可能了。我目前有一个可以编译一个类的工作 CodeDom，但我创建了一个包含多个类的程序，我想用 CodeDom 编译。我试过看这里： [CodeDom - 在单个程序集中链接多个类](https://stackoverflow.com/questions/6753606/codedom-linking-multiple-classes-within-a-single-assembly) ^没有帮助......这里：http: [//msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.aspx](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.aspx) ^ 帮助不大...

那么，这可能吗？如果是这样，我该怎么做？如何将我的类链接在一起并编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:41:05.083

在 CodeDOM 树的顶部，有`CodeCompileUnit`，大致相当于单个 C# 源代码文件。当你使用`CompileAssemblyFromDom()`编译时，它实际上需要一个 s 的集合`CodeCompileUnit`。这意味着您可以轻松地一次编译多个类：只需为每个类创建一个单独`CodeCompileUnit`的。

但这不是唯一的选择，`CodeCompileUnit`（就像 C# 文件一样）可以包含多个类声明（通过 间接`CodeNamespace`），因此您可以使用它。

# delphi - 调用 TsaveDialog 时，我的详细信息表单隐藏在主表单后面

> ID：14502820
> 
> 赞同：6
> 
> 时间：2013-01-24T13:45:11.837
> 
> 标签：delphi

我的应用程序基于 MainForm、DetailForms 和 DialogForms。在任务栏上，我可以看到 MainFormButton 和 DetailForms。因此我使用：

```
procedure <DetailForm>.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);
  Params.ExStyle := Params.ExStyle or WS_EX_APPWINDOW;
  Params.WndParent:= GetDesktopWindow;  
end; 
```

我使用delphi 2010，并且设置了 Application.MainFormOnTaskbar:= True; 当我在 Detailform 中使用 PromptForFileName 或 TSaveDialog 时，DetailForm 将位于 Mainform 后面。DetailForm 在关闭对话框后返回。

当我使用 DialogForm（带有属性 PopupMode: pmAuto 的 TForm 的 Showmodal）时，我的 DetailForm 将停留在主对话框和对话框之间。如何强制 TSaveDialog 像具有属性 PopupMode: pmAuto 的 showmodal 或如何防止我的 detailform 落后于 mainform

演示：

```
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1},
  Unit2 in 'Unit2.pas' {Form2};

  {$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

* * *

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ImgList, ActnList;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses Unit2;

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  oForm: TForm;
begin
  oForm:= Unit2.TForm2.Create(Self);
  oForm.Show;
end;
end. 
```

* * *

```
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm2 = class(TForm)

    SaveDialog1: TSaveDialog;
    procedure cxButton1Click(Sender: TObject);
  private
  protected
    procedure CreateParams(var Params: TCreateParams); override;
        { Private declarations }

  public
    { Public declarations }
  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}

{ TForm2 }

procedure TForm2.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);
  Params.ExStyle := Params.ExStyle or WS_EX_APPWINDOW;
  Params.WndParent:= 0;   // --> Testing
end;

procedure TForm2.cxButton1Click(Sender: TObject);
begin
  self.SaveDialog1.execute();
end;

end. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T13:50:11.213

第 1 步是您不能将桌面窗口设为表单的所有者。Raymond Chen[解释了](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/24/79212.aspx)为什么不这样做。

要真正了解正在发生的事情，您需要阅读MSDN 上的[Window Features](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx)以更清楚地了解窗口所有权。并且要非常小心，窗口所有权是一个与 Delphi 组件所有权完全无关的概念。在 Delphi 术语中，窗口所有权由`PopupParent`属性控制。

正如评论中所阐明的，您希望这两个表单都是无主的顶级窗口。自动的主要形式就是这样。对于您需要设置的详细信息表单`WndParent`，`0`就是这样：

```
procedure <DetailForm>.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.WndParent := 0;
end; 
```

最后一步是确保正确拥有保存对话框。为此，请在调用时指定所有者`Execute`：

```
Self.SaveDialog1.Execute(Self.Handle); 
```

因此，总而言之，您需要进行三项更改：

1.  将详细信息表单设置`WndParent`为`0`.
2.  删除`WS_EX_APPWINDOW`扩展样式，无主的顶级窗口不需要它。
3.  调用`Execute`保存对话框时传递详细信息表单的句柄。

* * *

**更新**

事实证明，您使用的是 XP，并且显示文件对话框的 Delphi 代码是垃圾。尽管您将句柄传递给该`Execute`方法，但该句柄将被忽略，并且主窗口句柄用作对话框的所有者。这就是主窗口出现在前面的原因。

您可以通过设置`Application.ModalPopupMode`来解决此问题`pmAuto`。您可能应该在 .dpr 文件中设置它。

在此处阅读有关此内容的更多信息：http: [//blogs.embarcadero.com/abauer/2005/09/30/21517](http://blogs.embarcadero.com/abauer/2005/09/30/21517)

# sql-server - 我们可以在一个存储过程中连接不同数据库的两个表的列值吗？

> ID：14502827
> 
> 赞同：1
> 
> 时间：2013-01-24T13:45:32.783
> 
> 标签：sql-server

我有两个不同的数据库 Banking 和 Initial。在银行业务下，我有一个客户表，在初始数据库下，我有一个资金表。我想在单个存储过程中将表“Banking.BankingID”的值与 Funding.FundingId 的值连接起来。我们怎样才能做到这一点？我真的被困在这里了。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:48:52.680

是的，您可以使用表格的完整路径。

```
INNER JOIN [Banking].[dbo].[Customers] on [Banking].[dbo].[Customers].[BankingID] = [Initial].[dbo].[Banking].[BankingID] 
```

只要 SQL 用户帐户对两个数据库都具有权限，这应该可以工作，如果数据库位于不同的服务器上，则需要查看`linked servers`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:49:00.370

就像`JOIN`往常一样，为数据库名称添加前缀：

```
SELECT *
FROM Banking.dbo.Customers C
INNER JOIN Initial.dbo.Funding F
ON C.BankingID = F.FundingId 
```

为您的表使用正确的架构（我`dbo`在回答中使用过）。

# asp.net - youtube api 使用 asp.net 更新视频信息

> ID：14502828
> 
> 赞同：0
> 
> 时间：2013-01-24T13:45:33.170
> 
> 标签：asp.net, youtube-api

我正在使用 Youtube api for asp.net 重命名视频：

```
 public static void UpdateVideoInfo(string video_id, string new_title) 
    {
        Uri entry = new Uri("http://gdata.youtube.com/feeds/api/videos/" + video_id);
        Video video = AuthRequest().Retrieve<Video>(entry);

        if (video.ReadOnly == false)
        {
            video.Title = new_title;
        }
        else video.Title = video.Title;

        Video updatedvideo = AuthRequest().Update(video);
    } 
```

但我收到此错误：

> 你调用的对象是空的

***在最后一行。***

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:51:21.420

可能是这里报告的相同问题，但错误消息不同..

[YouTube API .NET C# 编辑视频问题](https://stackoverflow.com/questions/5943287/youtube-api-net-c-sharp-editing-video-problem)

# c# - TFS 按名称获取用户

> ID：14502829
> 
> 赞同：9
> 
> 时间：2013-01-24T13:45:34.410
> 
> 标签：c#, .net, tfs

我正在尝试从 excel 添加由 TFS API 运行的测试。
在 excel 的一个字段中，我得到了执行测试的用户。
我想在服务器中更新它以更新它我需要让用户成为`TeamFoundationIdentity`

```
ims = _tfs.GetService<IIdentityManagementService>();
TeamFoundationIdentity UserID = ims.ReadIdentity(IdentitySearchFactor.DisplayName,  
  userName, ReadIdentityOptions.None); 
```

请帮我修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:18:50.317

您使用的是哪个版本的 Visual Studio 和 TFS？我正在使用 TFS2010 和 VS2010，以下代码对我来说效果很好：

```
IIdentityManagementService ims = (IIdentityManagementService)_tfs.GetService(typeof(IIdentityManagementService));
TeamFoundationIdentity UserID = ims.ReadIdentity(IdentitySearchFactor.DisplayName,"Mike" , MembershipQuery.Direct, ReadIdentityOptions.None); 
```

不知道是不是初始化的问题`IIdentityManagementService`，你可以试一试。我怀疑这`_tfs`是一个有效的表示`TfsTeamProjectCollection`

# php - 调试 php-cgi.exe + vb6 dll

> ID：14502834
> 
> 赞同：1
> 
> 时间：2013-01-24T13:45:43.670
> 
> 标签：php, debugging, vb6

我通过 php 调用 vb6 .dll (IIS)，在一些罕见和奇怪的情况下，当我调用特定函数时，php-cgi.exe 崩溃并显示消息：

**指令 0x029b7387 引用了“0x0f138000”处的内存。无法写入内存。点击确定终止，点击取消调试**

内存地址可能会略有变化，但始终以 8000 结尾。

有什么方法可以调试并找出我的 .dll 有什么问题？

提前致谢。

# c# - Wpf - 在运行时更新自定义用户控件

> ID：14502852
> 
> 赞同：1
> 
> 时间：2013-01-24T13:46:19.580
> 
> 标签：c#, wpf, xaml

嘿伙计们，我用自定义用户控件创建了一个 wpf 应用程序，问题是我无法在运行时更新或更改自定义控件的属性，-->这是用户控件文件的代码：usercontrol.xaml

```
<UserControl x:Class="ExampleWpf.UserControlExample"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

          Width="Auto" Height="Auto">
<Rectangle Width="60" Height="200" Fill="#FFB65959" Name="Box1"></Rectangle> 
```

文件：usercontrol.xaml.cs

```
namespace ExampleWpf{
public partial class UserControlExample : UserControl
{
    public UserControlExample()
    {
        InitializeComponent();
    }
    public double Box1Width
    {
        get { return (Box1.Width); }
        set { Box1.Width = value; }
    }
} 
```

--->这是 Wpfapplication 文件的简单代码：Mainwindow.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        UserControlExample uc = new UserControlExample();
        uc.Box1Width = 100;

    }
} 
```

当用户单击按钮时，我只想在运行时更改自定义控件的宽度---->但不幸的是我没有成功，请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:49:08.000

您正在创建用户控件的**新实例**，但不对其进行任何操作。

您应该找到控件的**现有实例**并对其进行更新。

您还应该通过[Dependency Properites](http://www.wpftutorial.net/dependencyproperties.html)实现这种类型的行为。这为您提供了本教程中概述的各种优势，但这里的主要优势是您可以在运行时设置这样的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:52:38.913

使用您放置在 xaml 中的实例（通过 Name-property），如下所示：

```
<uc:UserControlExample Name="myUC"/>

myUC.Box1Width = 100; 
```

另一个问题可能是，您只需更改 UC 矩形的宽度。因此，假设 UC 的宽度为 50，而您调用 uc.Box1Width=100，UC 的宽度仍然为 50，因此它不会改变任何内容。

# php - 创建 Zend 可扩展应用程序

> ID：14502855
> 
> 赞同：1
> 
> 时间：2013-01-24T13:46:21.667
> 
> 标签：php, zend-framework

我正在寻找一种方法来创建基于 zend 的应用程序（网络商店），我将在未来通过插件进行扩展。现在我有基本功能（浏览产品，下订单等）。

我需要的是可以将插件附加到这个应用程序。“插件”是指单独目录中的一些静态文件结构。我想在未来编写的插件之一是 allegro（polish eBay like）集成工具。它将在现有模型（用户、产品等）上运行。它需要有自己的控制器，将在后端执行；其他一些应该像前端的公共可访问的简单画廊。其他一些插件应该能够将内容附加到先前定义的视图点上。

我不知道我怎么能做到这一点。这些插件中的每一个都应该有自己的目录，这非常重要；

也许有一些免费的可扩展的基于 zend 的 CMS？你的选择是什么？请提供想法并感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:52:05.733

您正在寻找`zend module`. 每个模块都将具有独立的功能。

模块结构如下

```
zf2-tutorial/
    /module
        /Album
            /config
            /src
                /Album
                    /Controller
                    /Form
                    /Model
            /view
                /album
                    /album 
```

同样，您可以拥有诸如`Oerder`,`Payment`等模块`User`。

您可以创建一些`interface`通过模块进行通信。

下面的链接会帮助你

[http://framework.zend.com/manual/2.0/en/user-guide/modules.html](http://framework.zend.com/manual/2.0/en/user-guide/modules.html)

[http://framework.zend.com/manual/2.0/en/modules/zend.module-manager.intro.html](http://framework.zend.com/manual/2.0/en/modules/zend.module-manager.intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:45:47.673

如果您使用的是 ZF2，那么模块就是要走的路，因为 ZF2 中的所有东西都可以是一个模块。查看[http://modules.zendframework.com/](http://modules.zendframework.com/)了解可用的内容。更重要的是，您可以将一个模块放入您的应用程序中，尝试一下，如果您认为它不适合您的项目，则将其删除。一个模块的所有内容都可以修改，并且模块应该提供其他模块可以监听的钩子。Evan Coury（他为 zf2 编写了 ModuleManager 的核心）一直致力于[https://github.com/speckcommerce](https://github.com/speckcommerce)，这可能会涵盖您需要的很多内容

# java - Websphere Commerce：排序结果

> ID：14502857
> 
> 赞同：3
> 
> 时间：2013-01-24T13:46:26.757
> 
> 标签：java, websphere, websphere-commerce

有没有办法获取 IBM Websphere Commerce Foundation 框架 (WCF) 排序数据？

例如，来自 Websphere Commerce JSP 文件的这个片段：

```
<wcf:getData type="com.ibm.commerce.store.facade.datatypes.GeoNodeType[]"
             var="geoNodes" varException="geoNodeException" expressionBuilder="findChildGeoNodesByGeoNodeUniqueID">
  <wcf:param name="accessProfile" value="IBM_Store_All" />
  <wcf:param name="parentUniqueId" value="${provinceId}" />
</wcf:getData> 
```

如何通过 GeoNodeType 中的给定数据字段对数据进行排序？我可以添加类似的东西`<wcf:param name="sortBy" value="Description" />`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:03:44.913

您的示例中的 ExpressionBuilder“findChildGeoNodesByGeoNodeUniqueID”在**/Stores/WebContent/WEB_INF/config/com.ibm.commerce.store/get-data-config.xml**中声明如下：

```
<expression-builder>
    <name>findChildGeoNodesByGeoNodeUniqueID</name>
    <data-type-name>GeoNode</data-type-name>
    <expression-template>{_wcf.ap=$accessProfile$}/GeoNode[ParentGeoNodeIdentifier[UniqueID='$parentUniqueId$']]</expression-template>
    <param>
        <name>accessProfile</name>
        <value>IBM_Store_All</value>
    </param>
    <param>
        <name>parentUniqueId</name>
        <value></value>
    </param>
</expression-builder> 
```

根据[表达式生成器](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/index.jsp?topic=/com.ibm.commerce.component-services.doc/refs/rwvgetdataconfig.htm)标记文档，如果**表达式****生成器**标记内未指定表达式语言，则默认使用 XPath 语言。不幸的是，XPath 不支持排序。

我想你仍然可以实现自己的 ExpressionBuilder 类（我没有这样做），在这个新类中实现任何类型的排序，然后在 get-data-config.xml 中指定它

# c# - 无法从 ComboBox 控件中获取值

> ID：14502858
> 
> 赞同：0
> 
> 时间：2013-01-24T13:46:27.597
> 
> 标签：c#, winforms, combobox

我尝试在 winforms 项目中使用组合框。

这是我的代码：

```
 private void ShowContoursForm_Load(object sender, EventArgs e)
        {
           cbxSelectShape.DisplayMember = dataSetObject.ObjectShapes.ShapeNameColumn.ColumnName;
           cbxSelectShape.ValueMember = dataSetObject.ObjectShapes.ShapeIDColumn.ColumnName;
           cbxSelectShape.DataSource = dataSetObject.ObjectShapes;
        }

        private void cbxSelectShape_SelectedValueChanged(object sender, EventArgs e)
        {
           var id= (int)cbxSelectShape.SelectValue;
        } 
```

当我从 ComboBox 中选择项目时**SelectedValueChanged**被触发，并且**id**变量变为**null**。

我需要获取所选项目的值，但我总是在 id 变量中得到空值。知道为什么我会得到错误的结果以及如何修复此代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:55:38.960

您可以通过这种方式获取 ComboBox 的索引：

```
private void cbxSelectShape_SelectedValueChanged(object sender, EventArgs e)
    {
       var id= ((ComboBox)sender).SelectedIndex;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:16:28.320

您应该使用组合框的[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)属性来获取与[ValueMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)关联的值（在您的情况下为*ShapeID*）：

```
var id = ((ComboBox)sender).SelectedValue; 
```

[SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex.aspx)返回组合框中所选项目的索引。此外，如果此处理程序用于一个组合框，则无需强制转换发件人 - 只需使用您的组合框变量：

```
var id = cbxSelectShape.SelectedValue; 
```

# css - CSS3：目标和防止浏览器跳转行为

> ID：14502865
> 
> 赞同：2
> 
> 时间：2013-01-24T13:46:47.427
> 
> 标签：css, browser, menu

我制作了一个*手风琴菜单，就像*[这里](http://designmodo.com/css3-accordion-menu/)解释的那样。问题是当您单击菜单项时，浏览器会尝试跳转（并滚动）到`target`以确保目标在视口中可见。除了这样的事情之外，有什么解决方案可以防止跳跃吗？

```
$("a[href^=#]").on("click", function(e) {
    e.preventDefault();
    history.pushState({}, "", this.href);
}); 
```

js源码：[战斗跳跃](http://css-tricks.com/on-target/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T12:14:50.830

除了使用 JavaScript，别无他法。您还可以监听 hashchange 事件，在事件触发时保存实际的滚动位置，并在事件发生后跳回它。但这些是人们能想到的唯一可能的解决方案。

# django - 如何为 heroku 使用 pg-dump

> ID：14502880
> 
> 赞同：0
> 
> 时间：2013-01-24T13:47:23.697
> 
> 标签：django, heroku, upload, pg-dump

我正在尝试将数据库上传到我的 heroku 应用程序，我正在使用

```
$ PGPASSWORD=mypassword pg_dump -Fc --no-acl --no-owner -h localhost -U myuser mydb > mydb.dump 
```

但是，要做到这一点，我必须用我的 heroku 应用程序主机替换 localhost。我怎么知道我的主机是什么？

很抱歉问了这么简单的问题，但我是从 heroku 开始的，我还有很多东西要学

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:34:02.237

您需要安装并运行 postgresql

# javascript - 轨道滑块：字幕问题

> ID：14502883
> 
> 赞同：0
> 
> 时间：2013-01-24T13:47:41.183
> 
> 标签：javascript, jquery, slider, responsive-design

我是响应式设计的新手。我正在尝试为我的项目使用 Foundation 轨道滑块。我无法获得为图片显示的标题。我有以下代码...

```
<div class="row">
    <div class="twelve columns">
    <div id="slider">
    <a href="#"><img src="images/pic1.jpg" /></a>
    <a href="#"><img src="images/pic2.jpg" /></a>
    <a href="#"><img src="images/pic3.jpg" /></a>
  </div>
</div>

  <span class="orbit-caption" id="captionOne">Here is a caption1...</span>
  <span class="orbit-caption" id="captionTwo">Here is a caption2...</span>
  <span class="orbit-caption" id="captionThree">Here is a caption3...</span>
</div> 
```

当我第一次尝试这个时，它不起作用。我尝试查看 Stackoverflow 并尝试了 commanddemon 给出的修复。仍然没有用。我什至没有得到图片上的暗条标题。

在foundation.css中，我看到轨道标题类的显示设置为无

```
/* Captions ---------------------- */
.orbit-caption { display:none; font-family: inherit; }

.orbit-wrapper .orbit-caption { background: black; background: rgba(0, 0, 0, 0.6);  
    z-index: 30; color: white; text-align: center; padding: 7px 0; font-size: 13px;
    position: absolute; right: 0; bottom: 0; width: 100%; } 
```

通过**删除**它，我能够在图片上看到一个黑色的小条（大约 10 像素高），并且 3 个标题都被附加并从图片中掉出来。

图片的高度是否应小于 400 像素？这需要css修复吗？
我究竟做错了什么？

我试过只使用图像标签而不是锚标签。两者都有相同的结果。

PS我正在使用foundation.css，因为它附带下载。我也不允许发布屏幕截图...

**抱歉发现了错误......我应该把 data-caption="#captionOne"** -Jody

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:10:24.893

在图像标签中提供与 SPAN 标题标签相同的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:17:06.047

在你的 js 中，'captions' 设置为 'true' 吗？

```
<script type="text/javascript">
   $(window).load(function() {
       $("#featured").orbit({
           captions : true
       });
   });
</script> 
```

# java - Java new Date() 获取错误的当前时间

> ID：14502885
> 
> 赞同：3
> 
> 时间：2013-01-24T13:47:45.003
> 
> 标签：java, date, timezone

当我做：

```
new Date(); 
```

年、日和其他东西都可以，但小时和分钟是错误的。我在我的计算机上使用 64 位 Windows 7，并且：

```
Windows time is OK,
Bios Time is OK,
Windows Time Zone is OK,
Windows Time Zone at Regedit is OK 
```

但是，当我在 Java 中检查日期对象（我使用 Java 1.6）时，区域信息的 id 是*America/Caracas*应该是*Europe/Istanbul*

可能是什么问题，有什么想法吗？

**PS：**我不想将时区作为 VM 参数传递，我不想使用 Calendar 对象因为我有一些使用 Date 对象而不是任何东西的库，***我只是想了解这个问题***。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:53:26.727

您可以使用日历：

```
Calendar.getInstance(TimeZone.getTimeZone("GMT"), locale); 
```

日期是“区域设置相关的”。您也可以设置语言环境：

```
Locale.setDefault(...); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T13:56:36.667

我认为这个[博客](http://techtavern.wordpress.com/2010/04/15/java-and-incorrect-timezone-on-windows-xp/)可以帮助你。

引用博客文章来解决问题：

> 从 Windows XP 控制面板打开日期/时间对话框并应用以下更改之一后，Java API 开始正常工作：
> 
> *   手动更改日期/时间，然后更改回原来的正确时间。
> *   更改时区，然后返回原始时区。
> *   从时间服务器请求自动时间更新。

对于记录和来自同一个博客：

> 一些进一步的调查显示：
> 
> *   自 JRE 1.3 以来，人们抱怨 Sun Java 虚拟机上的错误时区问题。在过去十年中，针对错误的默认时区提交了几份针对 Sun Java 虚拟机的错误报告。
> *   几乎所有的报告都被 Sun 拒绝为不可复制。

# joomla - 从 1.5.26 迁移到 joomla 2.5.8 时，我的所有模块都没有显示在管理员面板中

> ID：14502889
> 
> 赞同：0
> 
> 时间：2013-01-24T13:47:54.100
> 
> 标签：joomla, joomla2.5, joomla1.5

我已经将我的 joomla 版本 1.5.26 升级到 joomla 版本 2.5.4 并且所有的东西都已成功升级。因此，当我进入我的 joomla 模块管理器管理面板时，它没有向我显示以前在我的旧版本（1.5.26）中可见的任何类型的模块，但在我的前端面板中可以很容易地看到它。有谁知道解决方案如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:52:05.173

当您说您已迁移时，我假设您使用了诸如 jUpgrade 之类的扩展。

迁移将更新核心文件和数据库表，因此应该在模块管理器中显示所有核心 Joomla 模块，但是它不会升级您的第 3 方扩展，因此您需要下载 Joomla 2.5 兼容版本。但是，此升级应该在列表中显示您的核心模块。

我希望你备份了你的 1.5 站点。如果你这样做了，尝试再次运行升级，如果你没有使用 jUpgrade，我建议你这样做。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:07:52.823

确保您使用的是 joomla 的标准模板。转到模块管理器，在第一个过滤器中选择管理员，看看是否所有模块都发布在实际模块位置（即cpanel，状态，页脚，图标，登录，菜单，子菜单，工具栏我猜是管理员）

# c# - 在 Revit API 中获取墙布鲁托区域

> ID：14502890
> 
> 赞同：0
> 
> 时间：2013-01-24T13:48:05.753
> 
> 标签：c#, api, revit, revit-api

我正在尝试使用 Revit API 获取墙布鲁托区域。然而，我唯一得到的是 netto 区域。

我正在使用删除墙并还原更改以确定放置在墙上的所有元素的方法。然后，我从 ElementSet 中删除墙的 id，在变量中获取 HOST_AREA_COMPUTED 的值并再次恢复更改。然而，结果是墙网区域:(参数或墙是否需要重新加载？或者可能有更简单的方法来获取 brutto 区域？任何帮助将不胜感激，因为我找不到与该问题相关的任何内容。 提前致谢！

```
 foreach (Wall wallElem in elems)
        {
            try
            {
                Double brutto = 0.0;
                ICollection<ElementId> delIds = null;

                using (SubTransaction t = new SubTransaction(doc))
                {
                    try
                    {
                        t.Start();

                        delIds = doc.Delete(wallElem);

                        t.RollBack();

                    }
                    catch (Exception ex)
                    {
                        message = "Deletion failed: " + ex.Message;
                        t.RollBack();
                    }
                }

                using (SubTransaction u = new SubTransaction(doc))
                {
                    try
                    {
                        u.Start();

                        delIds.Remove(wallElem.Id);
                        doc.Delete(delIds);
                        brutto = wallElem.get_Parameter(BuiltInParameter.HOST_AREA_COMPUTED).AsDouble();
                        u.RollBack();
                    }
                    catch (Exception ex)
                    {
                        message = "Deletion failed: " + ex.Message;
                        u.RollBack();
                    }
                }
                wallElem.get_Parameter("Wall Area Bruto").Set(brutto);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:00:42.750

你试过只看几何吗？如果您将墙壁固定并通过面看，应该有两个面比所有其他面大得多，并且它们的方向的 z 分量为零 - 其中一个面的区域应该是您的 brutto 区域！

**但是**：针对您的问题，您可能会尝试从文档中重新获取 wall 元素：

```
delIds.Remove(wallElem.Id);
doc.Delete(delIds);
wallElem = doc.get_ElementById(wallElem.Id); // re-fetch wall element from BIM model
brutto = wallElem.get_Parameter(BuiltInParameter.HOST_AREA_COMPUTED).AsDouble();
u.RollBack(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:19:30.160

你在正确的轨道上。我建议在删除托管元素后，您需要在更新墙的参数之前重新生成。

尝试：

```
doc.Delete(delIds);
doc.Regenerate();  // regenerate to cascade all changes.
wallElem = doc.get_Element(wallElem.Id);
brutto = wallElem.get_Parameter(BuiltInParameter.HOST_AREA_COMPUTED).AsDouble(); 
```

如果这不起作用，那么我会说您的下一步是尝试提交子事务。子事务完成后，您可以检索 brutto wall 区域，然后 Rollback() 外部事务。

# azure - Azure Worker Role 异步接收消息：我应该休眠多长时间？（毫秒）

> ID：14502891
> 
> 赞同：0
> 
> 时间：2013-01-24T13:48:07.893
> 
> 标签：azure, entity-framework-5, azure-worker-roles

示例代码在这里

```
public override void Run()
{
   while (true)
   {
    IAsyncResult result = CUDClient.BeginReceive(TimeSpan.FromSeconds(10),  OnMessageReceive, CUDClient);
    Thread.Sleep(10000);
   }
} 
```

我已经测试了这个 Azure 工作者角色。我在服务总线队列中保留了 100 条消息。它将实体更新作为一种操作（实体框架）。处理所有队列需要 15 分钟，看起来需要更长的时间。有什么改进的建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:48:39.020

实际上，根据我的经验，Service Bus 的速度非常快。你有什么问题是“Thread.Sleep(10000)”；

每条消息休眠 10 秒。对于 100 条消息 100*10 = 10000 秒 = 16.67 分钟所以这是延迟的问题......

解决方案：

不要使用 Thread.Sleep(10000); （不适合BeginReceive，只适合Receive）

```
public override void Run() //This should not be a Thread...If its a thread then your thread will terminate after receiving your first message
{
    IAsyncResult result = CUDClient.BeginReceive(**TimeSpan.MaxValue**,  OnMessageReceive, CUDClient);
}

//Function OnMessageReceive
{
 //Process the Message
 **IAsyncResult result = CUDClient.BeginReceive(TimeSpan.MaxValue,  OnMessageReceive, CUDClient);**
} 
```

使用 TimeSpan.MaxValue 您与 SB 的连接将被保留很长时间。所以没有频繁的空消息（更少的成本）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:30:13.150

尝试使用**XecMe** Parallel 任务来处理消息读取。

XecMe@xecme.codeplex.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:37:41.777

我试过这个。

```
while (true)
        {
           //read all topic messages in sequential way....           
           IAsyncResult result = CUDClient.BeginReceive(OnMessageReceive, CUDClient); 
           Thread.Sleep(1000);
        }  
public static void OnMessageReceive(IAsyncResult result)
    {
        SubscriptionClient queueClient = (SubscriptionClient)result.AsyncState;
        IBusinessLogicProvider Obj;
        try
        {
            //Receive the message with the EndReceive call
            BrokeredMessage receivedmsg = queueClient.EndReceive(result);
                //receivedmsg = CUDClient.Receive();
                if (receivedmsg != null)
                {
                    switch (receivedmsg.ContentType)
                    {
                        case "Project":
                            Obj = new ProjectsBL();
                            Obj.HandleMessage(receivedmsg);
                            receivedmsg.BeginComplete(OnMessageComplete, receivedmsg);
                            break;
                     }
                 }
          }
    } 
```

它在 1 分钟 (00:01:02) 内处理了所有 100 条消息。比上一个好很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:55:20.893

试试这个...

```
 //Somefunction
    IAsyncResult result = CUDClient.BeginReceive(OnMessageReceive, CUDClient); 

    while (true)
        Thread.Sleep(1000); //In case you are using thread

    //Somefunction End

public static void OnMessageReceive(IAsyncResult result)
    {
        CUDClient.BeginReceive(OnMessageReceive, CUDClient);
        SubscriptionClient queueClient = (SubscriptionClient)result.AsyncState;
        IBusinessLogicProvider Obj;
        try
        {
            //Receive the message with the EndReceive call
            BrokeredMessage receivedmsg = queueClient.EndReceive(result);
                //receivedmsg = CUDClient.Receive();
                if (receivedmsg != null)
                {
                    switch (receivedmsg.ContentType)
                    {
                        case "Project":
                            Obj = new ProjectsBL();
                            Obj.HandleMessage(receivedmsg);
                            receivedmsg.BeginComplete(OnMessageComplete, receivedmsg);
                            break;
                     }
                 }
          }
    } 
```

# android - 如何保护下载的图像 Android

> ID：14502892
> 
> 赞同：0
> 
> 时间：2013-01-24T13:48:11.123
> 
> 标签：android, encryption, android-gallery

我必须做一些事情。我正在使用网络服务下载图像，在成功下载每个图像后，我使用“AES”加密算法来加密这些图像。我已成功完成加密。但是每当我要打开设备图库时，我都能看到下载的图像被我加密。我不想要那个。我想保护可以阻止从图库访问的图像。

我在这里了解了整个过程。当我在下载后存储每个图像时，Gallery 会捕获该图像并将其存储到其缓存中，因此在我的加密过程可能是 Gallery 填充该图像之前。

-> 我的加密过程：下载图像 -> 存储到 SDCARD -> 加密图像 -> 删除真实图像

但这也不是从图库中删除。

所以简而言之，我想保护那些可以阻止从图库访问的图像。让我知道您对我的流程的最佳建议是对还是错？我可以对其进行一些更改吗？或者你有好主意而不是我的过程？

感谢您的最佳建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:55:33.743

您必须在您的图像文件夹中添加一个名为`.nomedia`. 这将阻止 MediaScanner 索引该文件夹中的图像。

但是，ICS 上存在一个错误，使这变得稍微困难​​一些。在 ICS 上，您的文件夹必须在向其添加图像**之前**`.nomedia`存在，否则图像将被编入索引。

 **另一个稍微不太合规的选项是以点开头的文件夹名称（类似于`.foldername`）。由于 Android 是基于 UNIX 的，这将使它成为一个隐藏文件夹，因此不会让 MediaScanner 扫描它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:29:06.473

我有一个合适的解决方案。这也适用于更高版本。

您可以使用以下目录将其与应用程序的私有文件夹保持私有：

```
String mDirectory = getPackageManager().getPackageInfo("com.example.myapp", 0).applicationInfo.dataDir; 
```

您可以将您的私人数据存储到此包中。它将阻止访问以及阻止从图库中编制索引。所以你也不必担心它的加密过程:)。可能是这个文件夹不会提供太多空间。但至少它会帮助我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T03:38:20.843

听起来像下面的解决方案可能适用于所有版本 - （[存储其他人无法访问的视频、图像和音频文件](https://stackoverflow.com/questions/20679152/storing-videos-images-and-audio-files-that-can-not-be-accesses-by-others)）

为此，您必须将数据存储在外部存储中，并创建一个以 .（点）开头的文件夹名称，然后此文件夹从 FileExplorer 中隐藏。在此文件夹中，您需要创建一个 .nomedia 文件并放置您的图像和视频然后Gallery.nomedia 文件夹中的图像和视频对用户不可见，画廊无法读取文件。**

# angularjs - AngularJS：如何编译服务添加的自定义指令？

> ID：14502893
> 
> 赞同：3
> 
> 时间：2013-01-24T13:48:14.693
> 
> 标签：angularjs

使用 AngularJS 和 UI Bootstrap，我想向 DOM 动态添加警报。但是如果我向 DOM 动态添加 <alert> 元素，它不会自动编译。我尝试使用 $compile 但它似乎不理解核心 AngularJS 中不存在的标签名称。我怎样才能做到这一点？在服务中“手动”向 DOM 添加元素是否是正确的方法？

请参阅[Plunker](http://plnkr.co/edit/Hrk9SzZ2H9CB6BjWilW3?p=preview)。#hardcodedalert 中的警报已编译并正确显示，但未编译 #dynamicalert 的内容。

**编辑：**

我稍后希望在我的网页上的不同上下文和位置上显示警报，这就是为什么我为警报创建了一个构造函数，以便在每个需要警报的控制器中都有一个新实例。出于好奇，我想知道是否可以动态添加 <alert> 标签而不是将它们包含在 html 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:56:14.693

我已经[更新了你的 plunker](http://plnkr.co/edit/sASzAEyPR2EABasL3wrT?p=preview)来做你想做的“角度方式”。

您尝试执行的操作存在一些问题。其中最大的一项是从控制器内部进行的 DOM 操作。我看到您试图通过在服务中处理它的一部分来抵消它，但是当您使用 JQuery 选择该元素时，您仍然在控制器中引用 DOM。

总而言之，您的指令没有被编译，因为您仍在以非常以 JQuery 为中心的方式进行开发。根据经验，您应该让指令为您处理 DOM 元素的添加和删除。这将为您处理所有指令的编译和处理。如果您以尝试的方式手动添加内容，则必须使用 $compile 提供程序来编译它们并针对范围运行它们……这也将是测试和维护的噩梦。

另一个注意事项：我不确定您是否打算让一个服务返回一个带有构造函数的对象，所以我把它变成了一个对象。需要注意的是，服务是以单例方式创建和管理的，因此您传递给任何控制器的 $alertService 的每个实例都是相同的。这是一种有趣的数据共享方式，尽管在大多数情况下建议使用 $rootScope。

这是代码：

```
app.factory('alertservice', [function() {
  function Alert() {
    this.alerts = [];
    this.addAlert = function(alert) {
      this.alerts.push(alert);
    };
  }
  return {
    Alert: Alert
  };
}]);

app.controller('MainCtrl', function($scope, alertservice) {
  var myAlert = new alertservice.Alert();
  $scope.alerts = myAlert.alerts;
  $scope.add = function() {
    myAlert.addAlert({"text": "bar"});
  };
}); 
```

以下是更新标记的重要部分：

```
 <body ng-controller="MainCtrl">
    <div id="dynamicalert">
      <alert ng-repeat="alert in alerts">{{alert.text}}</alert>
    </div>
    <button ng-click="add()">Add more alerts...</button>
  </body> 
```

**编辑：更新以反映您的要求**

# android - 避免本地化资源开销

> ID：14502896
> 
> 赞同：2
> 
> 时间：2013-01-24T13:48:15.943
> 
> 标签：android, localization, resources

我有一个本地化为 24 种语言的应用程序。当我使用纯英语资源构建应用程序时，该应用程序为 1.6MB。当我使用所有语言资源构建应用程序时，该应用程序为 2.5MB。与语言相关的资源是几个 HTML 文件和 strings.xml。

由于该应用程序正在运行后台服务，因此由于内存压力而将其终止是很烦人的。2.5MB 时似乎比只有 1.6MB 时更频繁。因此，我想通过避免在真正需要一种语言时在 APK 中提供所有语言来减小应用程序大小。

我正在考虑制作一个几乎只有英语的 APK，并且用户可以在运行时从应用程序下载语言文件。

是否有在 Android 中执行此操作的框架，或者至少有模式或最佳实践？

任何建议都热烈欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:55:45.817

由于 APK 的大小，您不会看到内存问题。如果用户没有足够的空间来安装它，这只会影响在设备上安装应用程序的能力。我认为你可能有一个不同的内存问题，你错误地归咎于你的内存问题（做了更深入的工作，看看你是否可以纠正这个问题）。

您可以使用 Proguard 来消除最终 APK 中的资源，但我认为这不是明智的做法。链接：http: [//developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

我还认为为每种语言创建单独的 APK 并不是一个好主意（事实上，这违反了 Play Market 的服务条款）。

最重要的是，再次检查您的应用程序，并修复您的内存问题 - 您可能会走错路，试图将问题归咎于本地化资源。

# android - 由于“意外的顶级异常”（使用 odata4j 依赖项），Android maven 构建（eclipse）失败

> ID：14502897
> 
> 赞同：1
> 
> 时间：2013-01-24T13:48:21.203
> 
> 标签：android, eclipse, maven, odata4j

我在构建 android maven 项目（eclipse m2e，android for maven）时遇到问题。

“安装”目标恢复为：

```
[INFO] UNEXPECTED TOP-LEVEL EXCEPTION:
[INFO] java.lang.IllegalArgumentException: already added: Ljavax/persistence/Access;
[INFO]  at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123) 
```

我在项目中添加了以下依赖项：

```
<dependency>
    <groupId>org.odata4j</groupId>
    <artifactId>odata4j-jersey</artifactId>
    <version>0.7.0</version>
</dependency> 
```

此依赖项还（除其他外）添加了 javax.persistence-2.0.0.jar。

所以我认为图书馆被添加了两次？但是如何解决这个问题呢？当我删除依赖项时，可以毫无错误地构建项目。

这是命令的输出：maven dependency:tree

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ myapp ---
[INFO] org.subby.android:myapp:apk:0.0.1-SNAPSHOT
[INFO] +- com.google.android:android:jar:4.1.1.4:provided
[INFO] |  +- commons-logging:commons-logging:jar:1.1.1:provided
[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.0.1:provided
[INFO] |  |  +- org.apache.httpcomponents:httpcore:jar:4.0.1:provided
[INFO] |  |  +- (commons-logging:commons-logging:jar:1.1.1:provided - omitted for  duplicate)
[INFO] |  |  \- commons-codec:commons-codec:jar:1.3:provided
[INFO] |  +- org.khronos:opengl-api:jar:gl1.1-android-2.1_r1:provided
[INFO] |  +- xerces:xmlParserAPIs:jar:2.6.2:provided
[INFO] |  +- xpp3:xpp3:jar:1.1.4c:provided
[INFO] |  \- org.json:json:jar:20080701:provided
[INFO] \- org.odata4j:odata4j-jersey:jar:0.7.0:compile
[INFO]    +- org.odata4j:odata4j-core:jar:0.7.0:compile
[INFO]    |  +- org.core4j:core4j:jar:0.5:compile
[INFO]    |  +- javax.ws.rs:jsr311-api:jar:1.1.1:compile
[INFO]    |  +- org.eclipse.persistence:javax.persistence:jar:2.0.0:compile
[INFO]    |  +- org.eclipse.persistence:eclipselink:jar:2.1.2:compile
[INFO]    |  \- joda-time:joda-time:jar:1.6:compile
[INFO]    +- com.sun.jersey:jersey-core:jar:1.1.5:compile
[INFO]    |  \- (javax.ws.rs:jsr311-api:jar:1.1.1:compile - omitted for duplicate)
[INFO]    +- com.sun.jersey:jersey-server:jar:1.1.5:compile
[INFO]    |  +- (com.sun.jersey:jersey-core:jar:1.1.5:compile - omitted for duplicate)
[INFO]    |  \- asm:asm:jar:3.1:compile
[INFO]    \- com.sun.jersey:jersey-client:jar:1.1.5:compile
[INFO]       \- (com.sun.jersey:jersey-core:jar:1.1.5:compile - omitted for duplicate) 
```

难道我做错了什么？我对 Maven 还是很陌生。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:03:13.773

发生这种情况是因为您的构建中有重复的类。如果您的 Eclipse 类路径包含多个同名/包的类，ADT 将抛出 s。

我建议 `mvn dependency:tree`在你能得到全貌的地方跑

```
[INFO] +- com.sun.jersey:jersey:jar:0.8-ea-SNAPSHOT:compil
[INFO] |  +- javax.ws.rs:jsr311-api:jar:0.8:compile
[INFO] |  \- asm:asm:jar:3.1:compile
[INFO] \- com.sun.jersey:jersey-client:jar:1.9.1:test
[INFO]    \- com.sun.jersey:jersey-core:jar:1.9.1:test 
```

重复项是一些从`odata4j-jersey`. 为了修复它们，您将在重复项上添加类似这样的内容：

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>sample.ProjectA</groupId>
      <artifactId>Project-A</artifactId>
      <version>1.0</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>  <!-- declare the exclusion here -->
          <groupId>sample.ProjectB</groupId>
          <artifactId>Project-B</artifactId>
        </exclusion>
      </exclusions> 
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:38:59.173

我得到了解决方案：

看来odata4j的两个依赖：

```
eclipselink-2.1.2
javax.persistence 
```

有一些共同的课程。

因此，当排除一个或另一个依赖项时，问题就解决了。

似乎这实际上只是一个 android/adt 问题。通常，您不需要排除单个工件的依赖关系，对吗？

依赖项现在看起来像这样：

```
<dependency>
    <groupId>org.odata4j</groupId>
    <artifactId>odata4j-core</artifactId>
    <version>0.7.0</version>
    <exclusions>
        <exclusion>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>javax.persistence</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

非常感谢 Mite 的有用提示。

问候，亚历克斯

# javascript - WPF - 调用 javascript 函数时出错 - 未知名称。（来自 HRESULT 的异常：0x80020006 (DISP_E_UNKNOWNNAME)）

> ID：14502898
> 
> 赞同：6
> 
> 时间：2013-01-24T13:48:21.823
> 
> 标签：javascript, wpf, google-maps, wpf-controls, browser

我在我的 wpf 应用程序中使用“WebBroswer”来呈现 Google 地图。所以我用我的 c# 代码中的一些参数调用 Pan(x, y) JavaScript 方法。

但我收到以下错误。

> 未知名称。（来自 HRESULT 的异常：0x80020006 (DISP_E_UNKNOWNNAME)）

我的 Window2.xaml 文件：

```
<Window x:Class="Test.Window2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window2" Height="300" Width="300">
    <Grid>
        <WebBrowser Name="mapBrowser" Margin="50" />
        <Button Name="button1" VerticalAlignment="Bottom" Click="button1_Click">Button</Button>
    </Grid>
</Window> 
```

我的 Window2.xaml.cs 文件：

```
namespace Test
{
    /// <summary>
    /// Interaction logic for Window2.xaml
    /// </summary>
    public partial class Window2 : Window
    {
        public Window2()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            Uri uri = new Uri(@"pack://application:,,,/HTMLPage1.htm");
            Stream source = Application.GetContentStream(uri).Stream;
            mapBrowser.NavigateToStream(source);
            this.mapBrowser.InvokeScript("Pan", x, y);
        }
    }
} 
```

我的 HTML 页面：

```
<html>
<head>
    <title></title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">
        var map;
        var latlng;
        var lat;
        var lng;
        var zoom;

        function Init() {
            lat = 40.632915;
            lng = -8.68929;
            zoom = 18
            latlng = new google.maps.LatLng(lat, lng);
            var options = {
                zoom: 18,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.SATELLITE
            };

            map = new google.maps.Map(document.getElementById("map_canvas"), options);
        }

        function Pan(x, y) {
            try {
                lat = x;
                lng = y;

                map.panTo(new google.maps.LatLng(lat, lng));
            }
            catch (ex) {
                window.alert("Pan:Error");
            }
        }
    </script>

</head>
<body onload="Init()">
    <div id="map_canvas" style="width: 100%; height: 100%">
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:27:26.227

是的，我遇到了问题。我尝试在不加载 HTML 页面的情况下调用 JavaScript 函数。所以我首先加载了 html 页面，然后调用了 JavaScript 函数，它为我工作。

所以我改变了我的代码如下，它工作正常： -

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            Uri uri = new Uri(@"pack://application:,,,/HTMLPage1.htm");
            Stream source = Application.GetContentStream(uri).Stream;
            mapBrowser.NavigateToStream(source);
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            try
            {   
                this.mapBrowser.InvokeScript("Pan", 19.006145, 72.818148);
            }
            catch
            { 
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T13:20:14.727

最好将 JavaScript 调用移动到 Document 加载事件。

# ajax - 使用 jquery 在 icenium 中接受自签名 SSL 证书以对 wcf 休息服务进行 ajax 调用？

> ID：14502899
> 
> 赞同：3
> 
> 时间：2013-01-24T13:48:22.837
> 
> 标签：ajax, wcf, ssl, telerik

我在 icenium 中有一个使用 jquery 调用 rest/json wcf 服务的应用程序。当使用非加密连接 (http) 进行调用时，一切都会正常运行。但是，当我使用 ssl 加密连接 (https) 时，我的所有 ajax 调用都会失败。我认为这与我用来测试的自签名证书有关。

我想知道是否有任何方法可以接受自签名证书。我什至在我的 iPad 上安装了证书，但仍然无法正常工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T16:06:54.443

我不能说这一定适用于 Icenium。但是，我在一个很好的老式 HTML 页面中遇到了 jquery 和自签名证书的相同问题。我发现我必须更改我的 jquery 脚本源以使用 https 而不是 http。然后一切正常。

```
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script> 
```

# ios - 当 UITableViewController 重新加载其数据时如何通知？

> ID：14502903
> 
> 赞同：0
> 
> 时间：2013-01-24T13:48:36.440
> 
> 标签：ios, objective-c, uitableview

首先，为什么：我有一个`AKTableViewController`继承自的类`UITableViewController`，我的大多数视图控制器都继承自该类。

我正在尝试创建一个类别以在每个屏幕的底部添加一个横幅，而不是随着内容滚动，所以我将我的横幅添加为`self.tableView.tableFooterView`and 然后将其放置在`scrollViewDidScroll:`.

我的问题是，当重新加载数据时，横幅被发送回正确的位置，我没有任何回调来正确定位它。

那么：如何在`UITableViewController`重新加载数据时收到通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:58:16.093

使用 UITableView 的委托方法：

```
-(void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([indexPath row] == ((NSIndexPath*)[[tableView indexPathsForVisibleRows] lastObject]).row){
        //Finished loading visible part of your table
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:55:25.087

你这样做的方式似乎很复杂。听起来您应该将横幅添加为单独的视图，而不是作为表格视图的页脚。

# php - $conn = mysqli_connect(DB_HOST,DB_USER,DB_PASS,DB_NAME); - 不工作

> ID：14502906
> 
> 赞同：-4
> 
> 时间：2013-01-24T13:48:39.347
> 
> 标签：php, mysql, database, connection

每当我尝试这个时，

```
$conn = mysqli_connect(example.com,user,password,database); 
```

我不知道我做错了什么。我的 php 版本是 php 5.3.above。为什么此代码在实时网站中不起作用。它在本地主机中很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:09:21.297

```
define('DB_HOST','example.com'); 
```

应该

```
define('DB_HOST','localhost'); 
```

`localhost`你说 PHP 必须连接到在同一台服务器上运行的 MySQL 服务器。除非您尝试连接到删除 MySQL 服务器，否则您必须填写该远程服务器的地址。

# android - 安卓双击

> ID：14502917
> 
> 赞同：5
> 
> 时间：2013-01-24T13:49:25.620
> 
> 标签：android, android-activity

如何在活动中使用双击事件？双击事件或长按方法有效（尽管该方法已被覆盖）我刚刚在这些方法中的每一个中放入了一个 toast 消息，但没有结果！你能帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T14:29:14.390

进行双击的最简单方法是使用 GestureDetector 检测它。“诀窍”是确保将 Activity 的 onTouchEvent 委托给 GestureDetector 的 onTouchEvent：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.widget.Toast;

public class MainActivity extends Activity {

    private GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        gestureDetector = new GestureDetector(this, new GestureDetector.SimpleOnGestureListener() {
            @Override
            public boolean onDoubleTap(MotionEvent e) {
                Toast.makeText(MainActivity.this, "double tap", Toast.LENGTH_SHORT).show();
                return true;
            }
        });
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (gestureDetector.onTouchEvent(event))
            return true;
        return super.onTouchEvent(event);
    }
} 
```

# asp.net - 从另一个 ASP 页向文本字段传递值

> ID：14502918
> 
> 赞同：0
> 
> 时间：2013-01-24T13:49:29.353
> 
> 标签：asp.net, vb.net, visual-studio-2008

我有一个页面显示文本字段中的成员数。还有第二页，我可以在其中添加成员列表。我将第二页中的成员计数保存为整数，但如何将其传输到第一页以在文本字段中显示结果？

第二页位于第一页的框架中。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:56:44.303

您需要使用会话状态将变量传输到另一个页面[http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

# c++ - 将标头包含到 OpenCL .cl 文件中

> ID：14502925
> 
> 赞同：11
> 
> 时间：2013-01-24T13:49:49.260
> 
> 标签：c++, header, include, opencl

我在一个`.cl`文件中编写了一个 OpenCL 内核。它尝试了`#include`几个标题。

它的编译失败，因为包含的头文件“未找到”。我知道`clBuildProgram`可以`-I dir`选择将目录添加`dir`到要搜索头文件的目录列表中。

在 khronus 网站论坛中，这篇文章[http://www.khronos.org/message_boards/viewtopic.php?f=37&t=2535](http://www.khronos.org/message_boards/viewtopic.php?f=37&t=2535)讨论了这个问题。

他们建议使用`clCreateProgramWithSource`which 指定所有源（包括 .h 文件）。

我有一个关于这个问题的问题：

1.  哪个选项更好？（`clBuildProgram`与`clCreateProgramWithSource`，如上所述）
2.  如果我使用 `clCreateProgramWithSource`编译器如何知道要包含什么？我的意思是，哪个来源代表哪个包含的文件名？
3.  如果我使用`clBuildProgram`并且有多个包含包含文件的目录，我该如何指定它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T21:28:54.373

**OpenCL**要求您使用`clCreateProgramWithSource()`后跟`clBuildProgram()`.

`ClCreateProgramWithSource()`创建并返回一个 `cl_program`对象。

该`cl_program`对象被输入到`clBuildProgram()`.

`clBuildProgram()`允许您指定包含包含文件目录的编译器选项。在您的情况下，对于头文件包含，它将类似于字符串：

```
-I myincludedir1 -I myincludedir2  ... 
```

使用的编译器是您正在使用的**OpenCL SDK中的****内部 OpenCL 编译器。**因此，如果您使用**AMD 的 SDK**，将使用作为其**OpenCL SDK**一部分的**AMD OpenCL 编译器**。同样适用于**Nvidia**或**Intel**。

 ******检查所有**OpenCL**函数调用的 OpenCL 状态代码很重要。这对于获取任何编译器错误或消息都是必需的`clCreateProgramWithSource()`。`clBuildProrgam()`还要编写一个完整的其他位代码来获取消息的大小，然后自己检索消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T20:58:04.527

Nvidia OpenCL 设备驱动程序在使用具有一定数量的包含和代码长度的 -I 时存在错误。AMD 和 Intel 没有这个问题。我的解决方案是在运行时将所有 .cl 文件连接成一个大文件。这样做的缺点是，在调试代码中，错误的行号对应于连接的 .cl 文件，而不是单个 .cl 文件。

我怀疑英伟达会解决这个问题。他们不再关心 OpenCL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-19T09:45:13.360

还有一个更肮脏的技巧：你应该模仿 include 你自己（即像手动合并的东西）。编码不是很清楚，但如果您的 OpenCL 编译器不支持（或不正确地支持）`-I`指令，它就可以工作。这种方法并不完美（例如，您失去了语法高亮），但可以帮助旧的或有缺陷的 OpenCL 编译器。

这种可能性的简单小例子：

```
std::string load_file(const std::string &file_name, int max_size = 0x100000)
{
    FILE *fp = fopen(file_name.c_str(), "rb");
    if (!fp)
    {
        // print some error or throw exception here
        return std::string();
    }
    char *source = new char[max_size];
    size_t source_size = fread(source, 1, max_size, fp);
    fclose(fp);
    if (!source_size)
    {
        delete[] source;
        // print some error or throw exception here
        return std::string();
    }
    std::string result(source);
    delete[] source;
    return result;
}

// errors checks are omitted for simplification
std::string full_source = load_file("header.h");
full_source += load_file("source.cl");

const char *source_ptr = full_source.c_str();
size_t source_size = full_source.size();
cl_int_status = CL_SUCCESS;
cl_program program  = clCreateProgramWithSource(context, 1,
        (const char **)&source_ptr, (const size_t *)&source_size, &ret);
// check status for CL_SUCCESS here
// now you have your program (include + source) 
```******

# jquery - iscroll 在电脑上输入和滚动

> ID：14502926
> 
> 赞同：0
> 
> 时间：2013-01-24T13:49:53.967
> 
> 标签：jquery, iscroll

我将 iScroll 4 用于移动网络应用程序。我已经让该应用程序在移动设备和 ipad 上完美运行，但我也希望该应用程序仍然可以在计算机上运行。

我遇到的问题是滚动在计算机上不起作用，我无法选择文本输入区域来输入任何内容。我很确定这取决于 iScoll 的工作方式，因此需要一个解决方法代码。

因此，我没有在这里显示任何代码，因为没有任何特定的位会有所帮助。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:11:36.437

这使您可以选择输入字段：

```
function initScroller() {
    myScroller = new iScroll('wrapper', {
        snap: true,
        momentum: false,
        hScrollbar: false,
        vScrollbar: false,
        hScroll: true,
        checkDOMChanges: true,
        onBeforeScrollStart: preventTextarea
    });
}

var preventTextarea = function(e) {
    var target = e.target;
    while (target && target.nodeType != 1) target = target.parentNode;

    if (target && (target.tagName != 'INPUT' && target.tagName != 'CANVAS') ) {
        e.preventDefault();
    }
} 
```

# asp.net - 调试和发布模式，是否必须进行重建才能更改？

> ID：14502927
> 
> 赞同：0
> 
> 时间：2013-01-24T13:49:53.957
> 
> 标签：asp.net, visual-studio-2010, asp.net-mvc-4

我有一个在我们的生产服务器上以发布模式发布的项目。现在我在生产服务器上遇到错误，我无法在我们的测试服务器上重现。我的想法是在发生错误时对其进行远程**调试**，这使我想到了我的问题。我是否需要在**调试模式下重新发布我的项目，或者更改****web.config**中的调试设置就足够了？

如果我必须在**调试**中重新发布（我可能有），在生产服务器上以调试模式运行一段时间是否会影响性能？你有什么建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:54:57.407

您必须在调试模式下使用代码重新发布，原因有两个：

*   在调试模式下编译的代码包含一些额外的指令，可以单步执行代码，并且编译器不会重新排列代码，以便它遵循源代码中的顺序。
*   在调试模式下编译的代码包含有关代码中标识符的额外信息。

发布模式和调试模式下的代码在性能上存在差异，但通常不会那么大。主要区别在于异常包含更多信息，因此创建它们需要更长的时间，并且变量的范围更大，因此未使用的对象可能会在垃圾收集之前存活更长的时间。

# ios - 标签未打印到 ios 模拟器目标 c

> ID：14502934
> 
> 赞同：-1
> 
> 时间：2013-01-24T13:50:15.710
> 
> 标签：ios, objective-c, xcode, uiview

我似乎无法打印我的第二个 UILabel ，但是第一个被打印了。任何帮助表示赞赏。

我正在尝试在蓝色 uiview 上打印黄色标签，就像我已成功使用红色标签一样。

这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
CGRect frame = CGRectMake(10, 30, 100, 100);

UILabel *myLabel = [[UILabel alloc] initWithFrame:frame];
UILabel *myLabel2= [[UILabel alloc] initWithFrame:frame];

myLabel=[[UILabel alloc] initWithFrame:CGRectMake(50, 50, 100, 100)];
myLabel.backgroundColor = [UIColor redColor];
myLabel.text = @"Hello";

myLabel2=[[UILabel alloc] initWithFrame:CGRectMake(50,300,100,100)];
myLabel2.backgroundColor=[UIColor yellowColor];
myLabel2.text=@"World!";

UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(1, 1, 500, 500)];
UIView *myView1 = [[UIView alloc] initWithFrame:CGRectMake(65,50,200,200)];
UIView *myView2= [[UIView alloc] initWithFrame:CGRectMake(65,260,200,200)];

myView1.backgroundColor=[UIColor greenColor];
myView.backgroundColor=[UIColor cyanColor];
myView2.backgroundColor=[UIColor blueColor];

[myView addSubview:myView1];
[myView addSubview:myView2];
[myView2 addSubview:myLabel2];
[myView1 addSubview:myLabel];
[self.window addSubview:myView];
[self.window makeKeyAndVisible];
return YES;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:55:34.797

更改此行

```
myLabel2=[[UILabel alloc] initWithFrame:CGRectMake(50,300,100,100)]; 
```

到

```
myLabel2=[[UILabel alloc] initWithFrame:CGRectMake(50,30,100,100)]; 
```

原因是您`label2`超出了您的视野

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:04:19.347

**“实际上，您的标签被绘制在 myView2 的视图区域之外。”**

myView2 的宽度和高度为 200,200。
myLabel2 的 y 位置为 300，大于其 superView(myView2) 的高度。:)。

myLabel2 绘制在 myView2 的框架之外。视图的 y 位置总是相对于其父视图。

# smalltalk - Morphic：自动调整滚动窗格中包含的组框的大小？

> ID：14502936
> 
> 赞同：5
> 
> 时间：2013-01-24T13:50:19.120
> 
> 标签：smalltalk, pharo, squeak, morphic

使用 Pharo 1.4 夏季进行测试。我认为最好使用屏幕截图来解释它，代码如下。

这是我的初始状态（我现在用我的代码得到什么）：

![初始状态](../Images/8f0ad41235db42d9f30b29acb649063d.png)

我希望组框变形在打开时水平填充，如下所示：

![初始期望状态](../Images/9d0f45497d08b4ce828861fb51e37b3d.png)

调整大小后，我希望组框变形保持边界，即：

![调整所需状态的大小](../Images/3ec8bc6501643b95194c5c77caa731ef.png)

这是我尝试过的代码：

```
| s morph1 morph2 row groupBox scroller |
s := ScrollPane new.
morph1 := BorderedMorph new.
morph2 := BorderedMorph new.
row := UITheme builder newRow: {morph1 . morph2}.
groupBox := UITheme builder newGroupbox: 'Group Box Test' for: row.
    groupBox 
        layoutFrame: (LayoutFrame fractions: (0 @ 0 corner: 1 @ 0.8));
        vResizing: #spaceFill;
        hResizing: #spaceFill;
        layoutChanged.
scroller := s scroller.
scroller 
    addMorph: (groupBox position: 0@0)
    fullFrame: (0 @ 0 corner: 0.8@0.5).
s scroller color: Color white.
s
 extent: 250@150;
 openCenteredInWorld 
```

容器必须是 ScrollPane。

我已将 Bert 的代码调整为不使用 Polymorph UIBuilder，从而导致：

```
morph1 := Morph new.
morph2 := Morph new.
row := ScrollPane new.
row
    color: Color white; borderColor: Color gray; borderWidth: 1;
    layoutPolicy: ProportionalLayout new.
row scroller
    addMorph: morph1 fullFrame: (LayoutFrame fractions: (0@0 corner: 1@0) offsets: (5@5 corner: -60@45));
    addMorph: morph2 fullFrame: (LayoutFrame fractions: (1@0 corner: 1@0) offsets: (-50@5 corner: -5@45)).
row
    extent: 250@150;
    openInHand 
```

但也不起作用，因为内部蓝色变形重叠并且没有填充指定的帧。我尝试了许多使用框架的组合，但到目前为止没有任何效果。你知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:04:39.540

使用 UIBuilder 您无需手动创建滚动条。通过调整大小直到自动出现垂直或水平滚动条来检查以下脚本。

```
| dialog morphList row morph1 morph2 morph3 morph4 |

morph1 := BorderedMorph new hResizing: #spaceFill.
morph2 := BorderedMorph new.
morph3 := BorderedMorph new.
morph4 := BorderedMorph new.
row := UITheme builder newRow: {morph1 . morph2 . morph3}.
morphList := UITheme builder 
    newMorphListFor: (ListModel new list: {row . morph4})
    list: #list 
    getSelected: #selectionIndex 
    setSelected: #selectionIndex:
    help: 'This is a morph list'.
dialog := UITheme builder newWindowFor: nil title: 'titleString'.
dialog addMorph: morphList fullFrame: (LayoutFrame fractions: (0@0 corner: 1@0.5)).
dialog openInWorld 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:27:47.173

您错过了 ProportionalLayout 不使用 #spaceFill 等。所以要么使用 TableLayout：

```
morph1 := Morph new hResizing: #spaceFill.
morph2 := Morph new.
row := Morph new
    color: Color white; borderColor: Color gray; borderWidth: 1;
    layoutPolicy: TableLayout new;
    layoutInset: 5; cellInset: 5;
    listDirection: #leftToRight;
    addAllMorphs: {morph1\. morph2};
    extent: 250@150;
    openInHand 
```

或带有偏移量的 ProportionalLayout，这是您可以混合固定宽度和相对尺寸的方式：

```
morph1 := Morph new.
morph2 := Morph new.
row := Morph new
    color: Color white; borderColor: Color gray; borderWidth: 1;
    layoutPolicy: ProportionalLayout new;
    addMorph: morph1 fullFrame: (LayoutFrame fractions: (0@0 corner: 1@0) offsets: (5@5 corner: -60@45));
    addMorph: morph2 fullFrame: (LayoutFrame fractions: (1@0 corner: 1@0) offsets: (-50@5 corner: -5@45));
    extent: 250@150;
    openInHand 
```

我在没有 UITheme 的 Squeak 中试过这个，所以这是直接使用 Morphs。

# sql - 如何防止在多对多关系中不允许有多个类型的记录？

> ID：14502937
> 
> 赞同：1
> 
> 时间：2013-01-24T13:50:24.550
> 
> 标签：sql, oracle, oracle11g

我有四张桌子。

```
PERSON     DELIVERY_MAPPING       GENERATION_SYSTEM       DELIVERY_METHOD
------     ----------------       -----------------       ---------------
ID         PERSON_ID              ID                      ID
NAME       GENERATION_SYSTEM_ID   NAME                    NAME
                                  DELIVERY_METHOD_ID      IS_SPECIAL 
```

示例数据：

```
PERSON     DELIVERY_MAPPING       GENERATION_SYSTEM       DELIVERY_METHOD
------     ----------------       -----------------       ---------------
1\. TOM       1    1               1\. COLOR PRINTER 1      1\. EMAIL    N
2\. DICK      1    2               2\. BW PRINTER    1      2\. POST     N
3\. HARRY     2    3               3\. HANDWRITTEN   3      3\. PIGEONS  Y 
```

A`DELIVERY_METHOD`包含传递新信件的方式 - `EMAIL`, `POST`, `PIGEON`. 该`IS_SPECIAL`列将记录标记为特殊交付方式。它由`Y`或的简单值表示`N`。只有`PIGEON`一种特殊的交付方式ie `Y`，其他都不是ie `N`。

`GENERATION_SYSTEM`具有最终将打印这封信的信息。示例值为`COLOR PRINTER`和`DOT MATRIX PRINTER`。每个都`GENERATION_SYSTEM`将始终使用其中一个来交付`DELIVERY_METHOD`。`GENERATION_SYSTEM`和之间有一个外键`DELIVERY_METHOD`。

现在，每个`PERSON`人的字母都可以由不同`GENERATION_SYSTEM`的 s 生成，因为这是多对多的关系，所以我们有`DELIVERY_MAPPING`表，这就是为什么我们在两端都有外键的原因。

到现在为止还挺好。

我需要确保如果一个人的信件是由使用特殊传递方法的系统生成的，那么他不能被允许在映射列表中拥有多个生成系统。例如，Dick 无法使用彩色打印机生成他的信件，因为他的所有手写信件都已经由一只鸽子投递（这是一种特殊的投递方式）。

我将如何完成这样的约束？我尝试在表上使用插入或更新前触发器来执行此操作，`DELIVERY_MAPPING`但这会在更新时导致变异触发器问题。

Can is normalise this scenario even more? Maybe it is just that i haven't normalised my table properly.

Either way, I'd love to hear your take on this issue. I hope I've been verbose enough (...and if you can propose a better title for this post, that would be great)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:15:20.130

For a complicated constraint like this, I think you need to use triggers. I don't think the mutating table problem is an issue, because you are either going to do an update or do nothing.

The only table you need to worry about is `Delivery_Mapping`. Before allowing a change to this table, you need to run a query on the existing table to get the number of specials and gs's:

```
select SUM(case when dme.is_special = 'Y' then 1 else 0 end) as NumSpecial,
       count(distinct gs.id) as NumGS,
       MIN(gs.id) as GSID
from delivery_mapping dm join
     generation_system gs
     on dm.generation_system_id = gs.id join
     delivery_method dme
     on gs.delivery_method_id = dme.id
where dm.person_id = PERSONID 
```

With this information, you can check if the insert/update can proceed. I think you need to check the conditions:

*   If NumSpecial = 0 and the new delivery method is not special, then proceed.
*   If NumSpecial = 0 and NumGS = 0, then proceed.
*   Otherwise fail.

The logic is a bit more complicated for updates.

By the way, I prefer to wrap updates/inserts/deletes in stored procedures, so logic like this doesn't get hidden in triggers. I find that debugging and maintaining procedures is much easier than dealing with triggers, which may be possibly cascading.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:25:00.560

I'd avoid triggers on the base tables for this unless you can guarantee serialization.

you could use an API (best way) as Gordon says (again, be sure to serialize) or if that isn't suitable, use a materialized view (we don't need to serialize here, as the check is done on commit):

```
SQL> create materialized view log on person with rowid, primary key including new values;

Materialized view log created.

SQL> create materialized view log on delivery_mapping with rowid, primary key including new values;

Materialized view log created.

SQL> create materialized view log on generation_system with rowid, primary key (delivery_method_id) including new values;

Materialized view log created.

SQL> create materialized view log on delivery_method with rowid, primary key (is_special) including new values;

Materialized view log created. 
```

we create a materialized view to show the counts of special + non special links for each user:

```
SQL> create materialized view check_del_method
  2  refresh fast on commit
  3  with primary key
  4  as
  5  select pers.id, count(case del_meth.is_special when 'Y' then 1 end) special_count,
  6         count(case del_meth.is_special when 'N' then 1 end) non_special_count
  7    from person pers
  8         inner join delivery_mapping del_map
  9                 on pers.id = del_map.person_id
 10         inner join generation_system gen
 11                 on gen.id = del_map.generation_system_id
 12         inner join delivery_method del_meth
 13                 on del_meth.id = gen.delivery_method_id
 14   group by pers.id;

Materialized view created. 
```

the MView is defined as fast refresh on commit, so the modified rows are rebuilt on commit. now the rule is that if special+non special counts are non-zero, that's an error condition.

```
SQL> create trigger check_del_method_aiu
  2  after insert or update on check_del_method
  3  for each row
  4  declare
  5  begin
  6    if (:new.special_count > 0 and :new.non_special_count > 0)
  7    then
  8      raise_application_error(-20000, 'Cannot have a mix of special and non special delivery methods for user ' || :new.id);
  9   end if;
 11  end;
 12  /

Trigger created.

SQL> set serverout on
SQL> insert into delivery_mapping values (1, 3);

1 row created.

SQL> commit;
commit
*
ERROR at line 1:
ORA-12008: error in materialized view refresh path
ORA-20000: Cannot have a mix of special and non special delivery methods for
user 1
ORA-06512: at "TEST.CHECK_DEL_METHOD_AIU", line 6
ORA-04088: error during execution of trigger 'TEST.CHECK_DEL_METHOD_AIU' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:26:57.227

```
 CREATE MATERIALIZED VIEW special_queues_mv
  NOLOGGING
  CACHE
  BUILD IMMEDIATE 
  REFRESH ON COMMIT 
  ENABLE QUERY REWRITE
     AS SELECT dmap.person_id
             , SUM(DECODE(dmet.is_special, 'Y', 1, 0)) AS special_queues
             , SUM(DECODE(dmet.is_special, 'N', 1, 0)) AS regular_queues
          FROM delivery_mapping dmap
             , generation_system gsys
             , delivery_method dmet
         WHERE dmap.generation_system_id = gsys.id
           AND gsys.delevery_method_id = dmet.id
         GROUP
            BY dmap.person_id
/

  ALTER MATERIALIZED VIEW special_queues_mv
    ADD ( CONSTRAINT special_queues_mv_chk1 CHECK ((special_queues = 1 AND regular_queues = 0) OR ( regular_queues > 0 AND special_queues = 0 ) ) ENABLE VALIDATE)
/ 
```

That's how I did it. DazzaL's answer gave me a hint on how to do it.

# c++ - 范围内出现频率最高的字符

> ID：14502939
> 
> 赞同：6
> 
> 时间：2013-01-24T13:50:29.260
> 
> 标签：c++, character, complexity-theory, frequency, mode

我有一串`s`长度`n`。用于查找范围内最频繁字符的最有效数据结构/算法是`i..j`什么？

字符串不会随着时间而改变，我只需要重复查询`s[i]`, `s[i + 1]`, ... ,中最常见的字符`s[j]`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T13:53:01.107

一个数组，其中保存每个字符的出现次数。您在遍历字符串一次时增加相应的值。这样做时，您可以记住数组中的当前最大值；或者，在最后的数组中查找最高值。

伪代码

```
arr = [0]
for ( char in string )
   arr[char]++
mostFrequent = highest(arr) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T13:57:55.733

如果您希望在区间上获得有效的结果，您可以在序列的每个索引处构建一个积分分布向量。然后通过在 j+1 和 i 处减去积分分布，您可以从 s[i],s[i+1],...,s[j] 获得区间内的分布。

Python 中的一些伪代码如下。我假设您的字符是字符，因此有 256 个分布条目。

```
def buildIntegralDistributions(s):
    IDs=[]        # integral distribution
    D=[0]*256
    IDs.append(D[:])
    for x in s:
        D[ord(x)]+=1
        IDs.append(D[:])
    return IDs

def getIntervalDistribution(IDs, i,j):
    D=[0]*256        
    for k in range(256):
        D[k]=IDs[j][k]-IDs[i][k]
    return D

s='abababbbb'
IDs=buildIntegralDistributions(s)
Dij=getIntervalDistribution(IDs, 2,4)

>>> s[2:4]
'ab'
>>> Dij[ord('a')]  # how many 'a'-s in s[2:4]?
1
>>> Dij[ord('b')]  # how many 'b'-s in s[2:4]?
1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T14:01:16.010

对数组进行一次迭代，并为每个位置记住每个字符在该位置之前出现的次数。所以是这样的：

```
"abcdabc" 
```

对于索引 0：

```
count['a'] = 1
count['b'] = 0
etc... 
```

对于索引 1：

```
....
count['a'] = 1
count['b'] = 1
count['c'] = 0
etc... 
```

对于索引 2：

```
....
count['a'] = 1
count['b'] = 1
count['c'] = 1
.... 
```

等等。对于索引 6：

```
....
count['a'] = 2
count['b'] = 2
count['c'] = 2
count['d'] = 1
... all others are 0 
```

计算完这个数组后，您可以在恒定时间内得到一个给定字母在区间 (i, j) 中的出现次数 - 只需计算`count[j] - count[i-1]`（这里小心`i = 0`！）。

因此，对于每个查询，您必须遍历所有字母而不是间隔中的所有字符，因此您最多只能通过 128 个字符而不是遍历 10^6 个字符（假设您只有 ASCII 符号）。

一个缺点 - 您需要更多内存，具体取决于您使用的字母表的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T16:00:43.547

您需要根据空间和时间复杂度来指定算法要求。

如果您坚持`O(1)`空间复杂性，那么仅排序（例如，如果没有可用的自然比较运算符，则使用位的字典顺序）并计算最高元素的出现次数会给您带来`O(N log N)`时间复杂度。

如果您坚持`O(N)`时间复杂度，请使用@Luchian Grigore 的解决方案，该解决方案也需要`O(N)`空间复杂度（好吧，`O(K)`对于`K`字母表）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T14:07:34.380

```
string="something"
arrCount[string.length()]; 
```

在每次访问字符串调用 freq() 之后

```
freq(char accessedChar){
arrCount[string.indexOf(x)]+=1
} 
```

获得最频繁的 char 调用`string.charAt(arrCount.max())`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T17:32:51.603

正如已经建议的那样，最省时的算法是将每个字符的频率存储在一个数组中。但是请注意，如果您只是用字符索引数组，您可能会调用未定义的行为。即，如果您正在处理包含 0x00-0x7F 范围之外的代码点的文本，例如使用 UTF-8 编码的文本，则最多可能会导致分段违规，最坏的情况是堆栈数据损坏：

```
char frequncies [256] = {};
frequencies ['á'] = 9; // Oops. If our implementation represents char using a
                       // signed eight-bit integer, we just referenced memory
                       // outside of our array bounds! 
```

正确解决此问题的解决方案如下所示：

```
template <typename charT>
charT most_frequent (const basic_string <charT>& str)
{
    constexpr auto charT_max = numeric_limits <charT>::max ();
    constexpr auto charT_min = numeric_limits <charT>::lowest ();
    size_t frequencies [charT_max - charT_min + 1] = {};

    for (auto c : str)
        ++frequencies [c - charT_min];

    charT most_frequent;
    size_t count = 0;
    for (charT c = charT_min; c < charT_max; ++c)
        if (frequencies [c - charT_min] > count)
        {
            most_frequent = c;
            count = frequencies [c - charT_min];
        }

    // We have to check charT_max outside of the loop,
    // as otherwise it will probably never terminate
    if (frequencies [charT_max - charT_min] > count)
        return charT_max;

    return most_frequent;
} 
```

如果您想多次迭代同一个字符串，请修改上述算法（as `construct_array`）以使用`std::array <size_t, numeric_limits <charT>::max () - numeric_limits <charT>::lowest () + 1>`. 然后在第一个 for 循环之后返回该数组而不是最大字符，并省略算法中找到最频繁字符的部分。`std::map <std::string, std::array <...>>`在您的顶级代码中构造 a并将返回的数组存储在其中。然后将用于查找最常见字符的代码移动到该顶级代码中并使用缓存的计数数组：

```
char most_frequent (string s)
{
    static map <string, array <...>> cache;

    if (cache.count (s) == 0)
        map [s] = construct_array (s);
    // find the most frequent character, as above, replacing `frequencies`
    // with map [s], then return it
} 
```

现在，这只适用于整个字符串。如果你想重复处理相对较小的子字符串，你应该使用第一个版本。否则，我会说你最好的选择可能是做类似于第二种解决方案的事情，但是将字符串划分为可管理的块；这样，您可以从缓存中获取大部分信息，只需重新计算迭代器所在的块中的频率。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T14:08:51.953

假设字符串是恒定的，并且不同`i`，并且`j`将被传递给查询出现。

如果你想最小化处理时间，你可以做一个

```
struct occurences{
    char c;
    std::list<int> positions;
}; 
```

并为每个字符保留一个`std::list<occurences>`。为了快速搜索，您可以保持`positions`有序。

如果你想最小化内存，你可以保持一个递增的整数并循环遍历`i`..`j`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-06T16:06:34.747

**最快**的方法是使用一个[`unordered_map`](https://en.cppreference.com/w/cpp/container/unordered_map)或类似的：

```
pair<char, int> fast(const string& s) {
    unordered_map<char, int> result;

    for(const auto i : s) ++result[i];
    return *max_element(cbegin(result), cend(result), [](const auto& lhs, const auto& rhs) { return lhs.second < rhs.second; });
} 
```

**最轻**的，内存方面的，将需要一个可以排序的非常量输入，以便[`find_first_not_of`](https://en.cppreference.com/w/cpp/string/basic_string/find_first_not_of)可以使用或类似的：

```
pair<char, int> light(string& s) {
    pair<char, int> result;
    int start = 0;

    sort(begin(s), end(s));
    for(auto finish = s.find_first_not_of(s.front()); finish != string::npos; start = finish, finish = s.find_first_not_of(s[start], start)) if(const int second = finish - start; second > result.second) result = make_pair(s[start], second);
    if(const int second = size(s) - start; second > result.second) result = make_pair(s[start], second);
    return result;
} 
```

需要注意的是，这两个函数都有一个非空字符串的前提条件。此外，如果字符串中的大多数字符存在平局，则两个函数都将返回按字典顺序排列的字符最多的字符。

[`Live Example`](https://coliru.stacked-crooked.com/a/a59e6b7e269e3e64)

# activerecord - ActiveRecord：has_many 关系中的对象计数

> ID：14502942
> 
> 赞同：1
> 
> 时间：2013-01-24T13:50:44.720
> 
> 标签：activerecord, count, has-many, relation

我注意到一些我无法理解的东西。鉴于以下情况：

```
class Parent < ActiveRecord::Base
  has_many :children
end

Class Child < ActiveRecord::Base
  belongs_to :parent
end 
```

现在，假设我要获取所有父母，并且我想知道每个父母有多少个孩子，我会这样做：

```
>>> Parent.all(:include => :children).each { |parent| print parent.children.count }
Parent Load ...
Child Load ...
...
(0.2ms)  SELECT COUNT(*) FROM "children" WHERE "children"."parent_id" = 46
... 
```

即使我在查询中包含上述子项，它也会为每个父项生成一个查询。如果我对孩子调用 .to_a ，解决方法是：

```
>>> Parent.all(:include => :children).each { |parent| print parent.children.to_a.count } 
```

这很奇怪，因为如果我获取孩子的班级，它会告诉我“数组”：

```
>>> parent.children.class
Array 
```

如果我在调用“to_a”后检查课程，我再次有一个数组

```
>>> parent.children.to_a.class
Array 
```

为什么伯爵演技如此不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:00:05.437

尝试使用 .size 而不是 .count。ActiveRecord 进行 SQL 计数，而不是确定它已经获取的集合的大小。

# css - 为什么我的 div 会互相推倒？

> ID：14502943
> 
> 赞同：2
> 
> 时间：2013-01-24T13:50:57.607
> 
> 标签：css, html, css-float

我正在尝试使用一些浮动 div 和东西创建一个响应式设计。在我的标题和图像滑块下方，我的主要内容有一个 div。在这里，我有 2 个 div，一个向左浮动，一个向右浮动。在右侧的 div 中，我在单个列中有 3 个 div。在左侧 div 中，我有 4 个 div 全部向左浮动，它们的位置如下：

[图片 - 布局OK](http://dyrfri.dk/stackoverflow/layout1.jpg "图片 - 布局OK")

这是我的问题 - 当我调整浏览器宽度时，左侧容器 div 中的两个底部 div 像这样移动：

[图像 - 布局不正确](http://dyrfri.dk/stackoverflow/layout2.jpg "图像 - 布局不正确")

我尝试过使用 clearfix，但这似乎并没有解决问题，现在我被卡住了。

**谁能告诉我我在这里做错了什么 - 请！;o)**

上面的截图来自 Chrome 浏览器。任何其他浏览器（Safari、firefox、Opera）都会显示相同的错误，但始终如此。不仅当我将大小调整为比页面内容更小的时候。

我希望有人可以在这里帮助我。有点沮丧;o（下面，你会找到我的代码。谢谢！

**//杰斯珀**

HTML：内容

```
 <div id="content-wrap" class="centered">
            <div id="fp-branding-area">
                <!-- nivo slider here -->
            </div>
            <div id="content-main">
                <div class="fp-box-main">
                    <img src="images/fp_box1.jpg" alt="Alttext1">
                    <h1 class="box-caption">Caption1</h1>
                </div>
                <div class="fp-box-main"><img src="images/fp_box2.jpg" alt="Alttext2">
                    <h1 class="box-caption">Caption2</h1>
                </div>
                <div class="fp-box-main"><img src="images/fp_box3.jpg" alt="Alttext3">
                    <h1 class="box-caption">Caption3</h1>
                </div>
                <div class="fp-box-main"><img src="images/fp_box4.jpg" alt="Alttext4">
                    <h1 class="box-caption">Caption4</h1>
                </div>
            </div> <!-- /end #content-main -->
            <div id="content-side">
                <div class="fp-box-side">
                    <img src="images/fp_box_side1.jpg" alt="Side Alttext1">
                    <h1 class="box-caption">SideCaption1</h1>   
                </div>
                <div class="fp-box-side">
                    <img src="images/fp_box_side2.jpg" alt="Side Alttext2">
                    <h1 class="box-caption">SideCaption2</h1>
                </div>
                <div class="fp-box-side">
                    <img src="images/fp_box_side3.jpg" alt="Side Alttext3">
                    <h1 class="box-caption">SideCaption3</h1>
                </div>
            </div> <!-- /end #content-side -->
        </div> <!-- /end #content-wrap -->
    </div> <!-- /end #page -->

    <footer id="footer-main">
        <div id="footer-wrap" class="centered">
            Content
        </div>
    </footer>
</body> 
```

CSS：

```
h1, h2, h3, h4, hgroup {
  font-family: Avenir;
  font-size: 1.18em;
  letter-spacing: .05em;
}

.centered {
  position: relative;
  margin: 0 auto;
}

.full-width {
  width: 960px;
}

#page {
  background: url(../images/gradient_page.png) repeat-x;
  min-height: 100%;
  width: 100%;
}

#header-main {
  height: 137px;
  background: url(../images/bg_header.jpg);
}

#header-wrap {
  width: 960px;
}

#content-wrap {
  background: url(../images/web-dropshadow_header.png) center top no-repeat;
  width: 100%;
  max-width: 960px;
  overflow: auto;
  padding-bottom: 136px;
  /* must be same height as the footer */
}

#fp-branding-area {
  width: 100%;
  margin-top: 2.11361%;
  background-color: #c6c6c6;
}

#content-main {
  width: 78.85416666666667%;
  /* ((757 / 960) * 100) */
  float: left;
  margin-bottom: 2.11361%;
}

#content-side {
  width: 21.14583333333333%;
  /* ((203 / 960) * 100) */
  float: left;
}

.fp-box-main {
  position: relative;
  width: 47.88639%;
  /* ((362.5 / 757) * 100) */
  margin: 2.11361% 2.11361% 0 0;
  float: left;
  overflow: hidden;
  clear: none;
}

.fp-box-main img, .fp-box-side img {
  width: 100%;
  margin-bottom: -3px;
}

.fp-box-side {
  position: relative;
  margin-top: 7.88177%;
  width: 100%;
  overflow: hidden;
  clear: both;
}

.fp-box-side h1 {
  font-size: .8em;
}

.box-caption {
  background-color: black;
  color: #FFF;
  position: absolute;
  text-align: center;
  text-transform: uppercase;
  width: 90%;
  padding: 5%;
  bottom: 0;
}

#footer-main {
  position: relative;
  margin-top: -136px;
  /* negative value of footer height */
  height: 136px;
  clear: both;
  background-color: white;
}

#footer-wrap {
  width: 960px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T17:20:49.047

我以前遇到过这种情况，它通常与高度有关，即使它偏离 1px，它也会像布局 2 中一样显示错误。这是因为所有框都向左浮动，如果它碰到另一个框，它将继续在新线上。

我建议尝试为您的盒子设置一个确定的高度而不是自动，看看是否可以解决它。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:58:04.347

我相信，由于所有 4 张图片都向左浮动，因此调整大小会影响它们，即使您给它们的**父 div**更大的**宽度**，它们也会浮动在 1 行上。

在**左侧 div**中，创建 2 个普通**div**，在第一个 div 中，放置一个浮动的左图和一个浮动的右图，在第二个 div 中做同样的事情。

```
-----------------------------------------
|               |      |                |
|               |      |                |
|               |      |                |
|               |      |                |
|               |      |                |
-----------------------------------------
-----------------------------------------
|               |      |                |
|               |      |                |
|               |      |                |
|               |      |                |
|               |      |                |
----------------------------------------- 
```

如果你给左边的 div 和它里面的 div 一个最小宽度，那会更好。

```
min-width:100px; 
```

**更新：另一种可能的解决方案**

如果您的页面的最大值`width`是`960px;`这样给**左父 Div** a`min-width:500px;`和**右父 Div** a `min-width:400px;`，当您重新调整大小时，它们将保持固定宽度并且不会变小，这意味着它们不会影响浮动的顺序它们里面的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:01:22.337

尝试将父级设置为大约 1000px 并以像素为单位给出宽度，以便在调整大小或放大或缩小时，可以避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:01:17.120

你的问题是百分比单位和保证金。

使用百分比进行响应式设计的真正方法是不要使用“边距”，当你使用边距时，你会犯错误，0.01% 错误会导致所有布局下降。您需要使用包装器和“填充”来制作它。

现在，当您使用填充时，您可以这样做

```
* {
box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
} 
```

这种和平的代码使您的所有页面都在内部填充是指当您使用 50% 制作盒子并放置 50% 填充时，填充是从盒子内部计算的。并且您可以计算百分比而不用担心错误的 0.01%。

# ruby - 如何使 gem install 命令仅在未安装或需要更新时安装

> ID：14502946
> 
> 赞同：12
> 
> 时间：2013-01-24T13:51:04.797
> 
> 标签：ruby, gem

我已经阅读了 ruby​​gems 站点的文档，但我猜“gem install”命令总是重新安装，重新编译所有内容，即使已经安装了相同的版本。

如何使 gem install 命令仅在需要时安装？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-09T21:48:24.303

看起来该`--conservative`标志将使 gem 命令执行您想要的操作。

```
gem install rake --conservative 
```

从文档中`gem install --help`：

> --conservative 不要尝试升级已经满足版本要求的 gem

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:06:08.160

您可能希望使用[gembundler](http://gembundler.com/)之类的外部工具来处理项目的 gem 安装。

如果您必须为此直接使用 ruby​​gems，则类似的命令

```
ruby -e "puts `gem install GEMTOINSTALL` if(`gem list --no-versions | grep GEMTOINSTALL`) == ''" 
```

会做的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:25:30.990

这就是我们使用`bundle install`. 此命令将查看`gemfile`gems。

这个 Gemfile 说了几件事。[首先，它说捆绑器应该查找在http://rubygems.org](http://rubygems.org)的 Gemfile 中声明的 gem 。您可以声明多个 Rubygems 源，并且 bundler 将按照您声明源的顺序查找 gem。

Bundler 将连接到`rubygems.org`（以及您声明的任何其他来源），并找到满足您指定要求的所有必需 gem 的列表。因为您的所有 gem`Gemfile`都有自己的依赖项（其中一些有自己的依赖项），所以在`bundle install`上运行`Gemfile`将安装相当多的 gem。

如果已经安装了任何所需的 gem，**`Bundler`将使用它们**。在将任何需要的 gem 安装到您的系统后，bundler 会写入它安装到的所有 gem 和版本的**快照**`Gemfile.lock`。

当您运行时`bundle install`，bundler 将（默认情况下）将您的 gem 安装到**系统的 gems 存储库中**。这意味着他们将出现在`gem list`. 此外，如果您正在开发多个应用程序，则无需为每个应用程序下载和安装通用的 gem。这对于开发来说很好，但对于部署来说有些问题。

**在部署场景中**，与您一起部署的 Unix 用户可能无权将 gem 安装到系统位置。即使用户这样做（或者您使用 sudo），启动应用程序的用户也可能无法访问它们。

因此，bundler 带有一个`--deployment`标志，它封装了在部署环境中使用 bundler 的最佳实践。

该`--deployment`标志需要更新`Gemfile.lock`以确保您所做的测试（在开发和登台中）实际上反映了您放入的代码`production`。您可以`bundle check`在部署应用程序之前运行以确保您的应用程序`Gemfile.lock`是最新的。请注意，如果**自**`bundle install`上次更改`Gemfile`.

# java - 概率超过 100% 的算法

> ID：14502947
> 
> 赞同：3
> 
> 时间：2013-01-24T13:51:05.313
> 
> 标签：java, algorithm, language-agnostic, probability

我需要某种概率的算法（在Java中，但理论应该很笼统）......事情。我什至不知道该怎么称呼它，这就是为什么我没有运气谷歌搜索。

为了更好地描述，我有一个任务需要在调用函数时完成 X 次。有时，发生这种情况的几率只有十分之一，这意味着（大约）每十次调用该函数的时候就有一个会实际执行该任务 - 使用 random() 很容易做到。有时它会是十分之二，甚至可能是十分之十。仍然很容易，直接的条件，即使它并不总是“10中的X”

问题是，它可能有*大于*1 比 1 的机会。它可能是 10 分之 15 - 运行一次的时间的一半，其余的运行*两次*。或 5 分之 10，每次调用它都会运行两次（大约）。如您所见，这已经脱离了简单的不等式测试。

所以，我正在寻找的是一些算法，它基于随机数，将根据应该发生的频率（十分之一、200%、0.75，无论格式如何）返回运行*计数。*如果有人可以提供任何线索 - 比如，也许是一个要搜索的实际术语 - 将不胜感激！

编辑：难怪我找不到很多结果，每个人都和我一样困惑！

首先，没有真正的“最大”价值。没有正式定义。如果算法可以从它接收到的概率值中提取出来，那就太好了。

它也绝对需要是随机的，使其本质上是不完美的。如果你掷硬币 10 次，你很可能会得到 8 个正面，尽管理论上它应该是完全均匀的！没关系。事实上，这就是重点。

我可以告诉你我*为什么*需要它......但这会违反正确的面向对象的模块化实践:) 外部各方只需要知道接口；它接受一个值（可能是一个浮点数，“0.75”似乎效果最好）并返回一个 int。如果你以五分之一的概率调用它 100 次，它的返回值的总和应该平均为 20。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T14:26:38.320

根据您所说，您可以使用几乎*任何*具有均值的离散概率分布来选择重复次数`X`。

我特别推荐使用均值的[泊松分布](https://en.wikipedia.org/wiki/Poisson_distribution)，因为它模拟了任何给定窗口中的事件数量，当事件在较长时间内独立均匀分布时。因此它具有“可扩展”的特性：你可以除以2，运行你的操作的频率是两倍，你仍然有基本相同的事件模式。`[*]``X``[**]``X`

如果您并不真正关心分布，您只需要正确的事件发生率，那么在相反的极端情况下，您可以使用完全非随机的算法。保持从 0 开始的累积“进位值”。然后在每次迭代中添加`X`进位值，返回整数部分并结转小数部分。当然，这使得 8/10 正面是不可能的。

`[*]`遗憾的是，这个名字*并不是*因为它是垂钓者在单位时间内捕获的鱼数量的分布。

`[**]`也与鱼无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:12:45.520

如果将给定概率 X 的执行次数限制为`floor(X)`和`ceil(X)`（并且永远不会`floor(X)-1`或更少或`ceil(X)+1`更多）：（所以 1.5 是 50% 1 和 50% 2 并且 0.7 是 70% 1 和 30% 0）

```
int runCount = (int)probability;
if (randomGen.nextDouble() < probability - runCount)
  runCount++; 
```

**编辑：**根据 DigitalMan 的建议浓缩。

**编辑 2：**诚然，该解决方案的重点是问题中的“10 分之 15 - 运行一次的一半时间，其余运行两次”，并且可以被认为是替换“5 分之 10”中的“大约”，它每次调用时都会运行两次（大约）在“完全”的问题中。约束有些不清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:04:19.030

嗯……可能，这真的不是概率。
据我所知，您希望有可能在每个函数调用上多次运行您的任务（0...n），从而在此调用中保持随机性。
我能看到的最简单的方法是使用 2 随机化：

1.  使用 random() 选择是否运行您的任务（比如说，选择从 0 到 100 的随机整数，如果它更大，则必须运行一些 N - 任务）。改变那些 N 你就可以调整你的概率；
2.  如果在第一步您选择运行任务，请再次运行 random()。可以说，从 100 到 500 的随机整数。可以说它返回数字 R。然后 R%100 将是您应该运行任务的次数。

其他情况是简单地从 0 到 700 的 random() （例如）并使用 random()%100 来定义您应该运行任务的次数。如果您想更改其他值的“概率”，只需使用您自己的函数代替“%”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:13:17.343

让我们稍微重申一下这个问题，以澄清发生了什么。在每个步骤中，您都希望多次执行该任务。您使用概率分布来描述执行任务的次数。选择您的概率分布，以便它执行正确的预期任务数量。

当您描述在 10 次中执行任务 1 次时，您的分布是您有 90% 的机会执行任务 0 次和 10% 的机会执行一次。这给出了步数十分之一的期望值。将其概括为您的“超过 100% 的时间”，即您希望执行任务次数的期望值等于步数的 1.5 倍。选择一个给出期望值的概率分布，无论是你做一次任务的一半时间和两次任务的一半时间，或者你不做任务的时间的 3/4 和你做任务的时间的 1/4 6次。您通常会有不止一种概率分布有效。

# google-app-engine - 谷歌应用引擎：并发用户注册

> ID：14502948
> 
> 赞同：3
> 
> 时间：2013-01-24T13:51:05.877
> 
> 标签：google-app-engine, concurrency

我知道这是一个经典问题，但我仍然不知道该怎么做。在 Google App Engine 上，我有一个成员注册表单，它使用 jQuery 的[验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来检查用户名是否存在。当然存在并发问题：多个用户尝试注册，输入相同的用户名，Validation 找到可用的用户名，并允许他们几乎同时按下“添加”。验证不会检测到这一点。在我的应用程序中，用户名、电子邮件和个人 ID 都应该是唯一的。如何防止以下代码出现并发问题：

```
member = Member()
member.username = self.request.get('username')
member.Pid = self.request.get('Pid')
member.email = self.request.get('email')
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:32:49.033

这对 memcache 很有用。您的 Ajax 验证函数应该在 memcache 中添加一个条目以记录用户名已被请求。它还应该检查 memcache 和数据存储以确保用户名是免费的。同样，注册码应该检查 memcache 以确保当前用户是请求用户名的用户。

这很好地解决了您的并发问题，最好的事情是 memcache 中的条目会自行过期，无论是在定时的基础上还是在缓存太满时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T08:01:34.890

由于唯一性约束在用户名上，因此您必须将其用作数据存储中的键并使用事务。

```
def txn():
    key = ndb.Key(Member, username)
    member = key.get()
    if member is not None:
        raise CustomAlreadyExistsException(member)  # This will abort txn
    member = Member(
        id=username,
        Pid=self.request.get('Pid'),
        email=self.request.get('email'),
        ...)
    member.put()
ndb.transaction(txn) 
```

这确保只有一个人可以注册用户名。

jQuery 助手会检查是否`ndb.Key(Member, userid).get()`给出结果。GET 不是事务性的。

为了提高可用性客户端在检查可用性后“保留”用户名，您可以按照 Daniel 的建议使用 memcached，但我会调用 YAGNI，跳过复杂性，而是让某些人在提交表单后得到验证错误。请注意，memcached 是尽力而为，并且不能保证任何事情。

如果您需要保证多个字段的唯一性，则必须为它们添加模型类并签入跨组 (XG) 事务。

```
class Pid(ndb.Model):
    member = ndb.KeyProperty()

class Email(ndb.Model):
    member = ndb.KeyProperty()

class Member(ndb.Model):
    pid = ndb.KeyProperty()
    email = ndb.KeyProperty()

    @property
    def pid_value(self):
        return self.pid.id()

    @property
    def email_value(self):
        return self.email.id()

def txn():
    member_key = ndb.Key(Member, username)
    pid_key = ndb.Key(PersonalId, self.request.get('Pid'))
    email_key = ndb.Key(Email, self.request.get('email'))

    member, pid, email = ndb.get_multi([member_key, pid_key, email_key])

    if member is not None or pid is not None or email is not None:
        raise CustomAlreadyExistsException(member, pid, email)  # This will abort txn

    # Create instances referencing each other
    email = Email(key=email_key, member=member_key)
    pid = Pid(key=pid_key, member=member_key)
    member = Member(
        key=member_key,
        pid=pid_key,
        email=email_key,
        ...)
    ndb.put_multi([member, pid, email])

ndb.transaction(txn, xg=True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:36:28.840

我同意tesdal。如果您仍想实现 Daniel 建议的 memcache tric，您应该执行类似“memcache.add(usernameA, dummy value, short period);”的操作。所以你知道 usernameA 会被保留一小段时间并且不会与“memcache.add(usernameB, ...”

# javascript - 如何在 slickgrid 的每一行上创建一个删除按钮并确认？

> ID：14502952
> 
> 赞同：2
> 
> 时间：2013-01-24T13:51:16.530
> 
> 标签：javascript, jquery, slickgrid

正如标题所说，我该怎么做？，我正在使用jiri创建的这个按钮：

[如何使用 SlickGrid 插件在每一行上创建一个删除按钮？](https://stackoverflow.com/questions/9784400/how-do-I-create-a-delete-button-on-every-row-using-the-slickgrid-plugin?answertab=votes#tab-top)

当我在函数中添加 if(confirmation(msg)) 时，它会重复我的 msg ALOT 可能是因为我在每次修改时都刷新了表。

问我是否需要更多信息，我在stackoverflow中仍然是菜鸟：P（如果有某种方式可以“杀死”该功能）

这是按钮，我正在使用（链接）我添加了 idBorrada 以检查 id 是否已被删除并且不要尝试删除它两次，这也是一个确认，但是当我触摸取消时它再次询问我。

`$('.del').live('click', function(){ var me = $(this), id = me.attr('id'); //assuming you have used a dataView to create your grid //also assuming that its variable name is called 'dataView' //use the following code to get the item to be deleted from it if(idBorrada != id && confirm("¿Seguro desea eleminarlo?")){ dataView.deleteItem(id); Wicket.Ajax.ajax({"u":"${url}","c":"${gridId}","ep":{'borrar':JSON.stringify(id, null, 2)}}); //This is possible because in the formatter we have assigned the row id itself as the button id; //now assuming your grid is called 'grid' //TODO grid.invalidate(); idBorrada= id; } else{ }; });`

我再次调用整个函数。希望有所帮助，抱歉语法不是我的母语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-19T09:12:08.590

跟着这些步骤，

1.  为列对象的每一行添加一个删除链接，如下所示，

```
var columns = 
   { id: "Type", name: "Application Type", field: "ApplicationType", width: 100, cssClass: "cell-title", editor: Slick.Editors.Text, validator: requiredFieldValidator, sortable: true },
   { id: "delete", name: "Action", width: 40, cssClass: "cell-title", formatter: Slick.Formatters.Link }
]; 
```

2.  在 slick.formatters.js 中添加一个链接格式化程序，如下所示，

```
"Formatters": {
   "PercentComplete": PercentCompleteFormatter,
   "YesNo": YesNoFormatter,
   "Link": LinkFormatter
}

function LinkFormatter(row, cell, value, columnDef, dataContext) {
   return "<a style='color:#4996D0; text-decoration:none;cursor:pointer' onclick='DeleteData(" + dataContext.Id + ", " + row + ")'>Delete</a>";
} 
```

3.  在javascript中添加以下删除函数

```
function DeleteData(id, rowId) {
   var result = confirm("Are you sure you want to permenantly delete this record!");
   if (result == true) {
       if (id) {
           $.ajax({
               type: "POST",
               url: "DeleteURL",
               data: { id: id },
               dataType: "text",
               success: function () {
               },
               error: function () {
               }
           });
       }
       dataView.deleteItem(id);
       dataView.refresh();}
} 
```

# powershell - 捕获此 Powershell 脚本中的错误

> ID：14502954
> 
> 赞同：0
> 
> 时间：2013-01-24T13:51:20.730
> 
> 标签：powershell, try-catch

我有这个测试脚本来更改服务器列表上的管理员密码。如果无法 ping 服务器或找不到帐户等，我已将脚本设置为记录错误。但是除此之外，我还想捕获发生的任何其他错误并将这些错误添加到日志文件。我知道您可以使用“Try and Catch”进行错误处理，但到目前为止还没有任何运气。

有人会很好地展示如何做到这一点吗？

这是脚本

```
 $date = Get-Date
$user = "Administrator"
$newpwd = "MyPassword"

     $servers = gc C:\servers.txt

foreach ($server in $servers) 
{ 

  $ping = new-object System.Net.NetworkInformation.Ping

  $Reply = $null 
  $Reply = $ping.send($server)

  if($Reply.status -like 'Success')
    {

    $Admin=[adsi]("WinNT://" + $server + "/$user, user")

    if($?) 
      {
       $Admin.SetPassword($newpwd)

     if($?)

      {Add-Content -path C:\Audit\logs\servers-reset.csv -Value "$server,  Succsess the $user password was changed. , $date"}

      else
        {Add-Content -path C:\Audit\logs\servers-reset.csv -Value "$server, Error: FAILED to change the password. , $date"}
      }  
      else
      {
      Add-Content -path C:\Audit\logs\servers-reset.csv -Value "$server, Error: The $user user account was not found on the server. , $date"}
      }    
      else
      {
      Add-Content -path C:\Audit\logs\servers-reset.csv -Value "$server, Error: Ping FAILED could not connect. , $date"
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:06:26.483

如果您想在抛出异常后立即将异常写入日志，则可以使用陷阱。在你的脚本中添加这样的东西：

```
trap [Exception] {

    #Add message to log
    Add-Content -Path test.csv -Value "$server, $($_.Exception.Message), $(Get-Date)"

    #Continue script
    continue; 
} 
```

这将记录所有**异常**（不是所有错误）。

如果您想要所有错误，您可以使用`$Error`. 它是一个数组列表，包含会话（脚本）期间的每个错误。第一项`$Error[0]`是最新的错误。但是，这不是直接适合 csv 文件而不对其进行格式化的东西。

# c# - 为什么调用 ResourceManager 类比直接按名称加载资源更好？

> ID：14502957
> 
> 赞同：7
> 
> 时间：2013-01-24T13:51:36.870
> 
> 标签：c#, resourcemanager

我正在对一个大型项目进行本地化，我通过手动创建一个大型资源文件并在代码中按名称调用每个字符串来做到这一点。我没有调用`ResourceManager`和使用`GetString`（用于对话框等），而是简单地将每个字符串替换为`Resources.ClassName_MethodName_StringName`.

我有一种感觉，我应该使用 . `ResourceManager`，但我想了解为什么在我更改所有代码以使用它之前它会更好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T13:56:37.650

好吧，没有理由直接使用 ResourceManager（会有一些例外情况适用），因为如果您使用从 resx-Files 生成的代码，它所做的一切如下：

```
public static string MyResourceName {
    get {
        return ResourceManager.GetString("MyResourceName", resourceCulture);
    }
} 
```

这很棒，因为您可以免费获得资源名称的编译时验证！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:03:31.163

[http://www.c-sharpcorner.com/uploadfile/prvn_131971/chapter-i-resources-and-localization/](http://www.c-sharpcorner.com/uploadfile/prvn_131971/chapter-i-resources-and-localization/)

> 在内部，生成的类使用在 System.Resources 命名空间中定义的 ResourceManager 类的实例。可以通过生成的类的 ResourceManager 属性访问此类的实例。**在内部，用于访问嵌入资源本身的属性过程只是围绕调用此 ResourceManager 实例的 GetXxx 方法之一（即 GetString 或 GetStream）的包装器。**例如，可通过生成的属性过程 Resources.MyResourceStrings 访问的资源。

因此，无论如何您都在使用 YourResources.ResourceManager.GetString() 方法直接按名称调用资源。

# javascript - 在 qunit 中添加到开始测试的超时进入运行时

> ID：14502959
> 
> 赞同：1
> 
> 时间：2013-01-24T13:51:50.853
> 
> 标签：javascript, unit-testing, qunit

我正在为一个模块添加一些 qunit 测试用例。很少有测试用例具有我使用标准`stop()`和`start()`按照文档的同步过程。

我的问题是，额外的 1 秒是不是`setTimeout(function () { start();}, 1000);`被添加到测试运行的运行时，从而使结果准确？

我有点不满意将 +1000ms 添加到运行时作为测试套件之外，在使用该模块的真实应用程序内部，该过程在没有在此处添加 1000ms 来执行测试的情况下完成。

因此，当我将此接口传递给技术含量较低的测试人员时，我必须在测试标题中解释从该测试中减去 1000，然后再将它们相加或计算整体速度等。[我基本上想要一种方法来获得额外的超时自动从结果中删除]

![在此处输入图像描述](../Images/26fdb8eef52d3c8e9fa2331f26047aa2.png)

模块代码如下：

```
 define("tests/admin.connections.tests", ["mods/admin.connections", "datacontext"], function (connections, datacontext) {

    module("ADMIN PAGE CONNECTION LIST MODULE", {
        setup: function () {
            //ok(true, "once extra assert per test for Search Modules");
        }
    });

    test('Module is available?', function () {
        equal(_.isUndefined(connections), false, "connections js module exists");
        equal(_.isObject(connections), true, "connections js module is valid object");
    });

    test('HTML and CSS loading correctly? [Subtract 1 second from time to get the real time lapsed]', function () {
        function testHtml(html) {
            var d = document.createElement('htmlTestDiv');
            d.innerHTML = html;
            return d.innerHTML.replace(/\s+/g, ' ');;
        }
        stop();
        $.get('http://media.concepglobal.com/cbaddons/templates/connections.html', function (data) {
            equal(testHtml(connections.html), data.replace(/\s+/g, ' '), 'Html of the module was correctly loaded');
        });
        $.get('http://media.concepglobal.com/cbaddons/styles/connections.css', function (data) {
            equal(testHtml(connections.css), data.replace(/\s+/g, ' '), 'CSS of the module was correctly loaded');
        });
        setTimeout(function () { start();}, 1000);        
    });

    test('getConnectionsByUserId Async Method [Subtract 1 second from time to get the real time lapsed]', function () {
        function getConnectionsByUserId(successCallback) {
            amplify.request("getConnectionsByUserId", { uid: '0' }, function (data) {
                connections.userConnectionsCallback(data);
                successCallback();
            });
        }
        stop();
        getConnectionsByUserId(function () {
            var connectionsReturnedData = connections.connectionListViewModel.connections();
            expect(2);
            ok(_.isArray(connectionsReturnedData), 'Valid array has been returned for connections: ' + connectionsReturnedData);
            equal(connectionsReturnedData[0].type(), "sitecore", 'First returned object has a type property of "' + connectionsReturnedData[0].type() + '" and we expected it to be "sitecore"');
        });
        setTimeout(function () { start(); }, 1000);
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:46:03.650

QUnit 将当前正在运行的测试保存在 中`QUnit.config.current`，这允许您在测试执行期间更改测试。

您可能想要的是在超时后重置测试计时器。

我创建了一个小例子来说明我的意思（[参见 jsFiddle](http://jsfiddle.net/odi86/ySHMv/)）：

```
asyncTest("Long running test with 2s timeout", function () {
    expect(1);
    ok(true);
    setTimeout(function () { 
        QUnit.config.current.started = +new Date();
        start();
    }, 2000);
}); 
```

像这样，一旦超时结束，计时器就会重置。就执行的内容而言，这会导致更准确的运行时间。现在只有总时间显示运行所有测试实际使用了多少时间。

![带定时器复位的长时间运行测试](../Images/8cba19bb5f5ed54ca018b7cd08cf3fb8.png)

# c# - 即使调用 TraceEvent 也没有创 建跟踪文件？

> ID：14502960
> 
> 赞同：0
> 
> 时间：2013-01-24T13:51:53.753
> 
> 标签：c#, .net, logging, workflow-foundation-4, system.diagnostics

## 客观的

用于`System.Diagnostics`执行跟踪。尽管我使用过`log4net`其他日志记录解决方案，但我只对使用`System.Diagnostics`.

## 问题

即使我发布了`TraceEvent`文件，也没有在任何地方创建文件。

## 应用信息

我有一个托管一些 WF 服务的应用程序。其中一项服务是状态机，其初始状态如下所示：

![状态机初始状态](../Images/3aa032abea6f1d964f5b9097db7ad1d1.png)

自`LogMessage`定义活动也非常简单。它接收四个基本参数：

![日志消息参数](../Images/c2435e25906f3b6c215c35a63785b60a.png)

将 定义`TraceSource`为变量：

![LogMessage TraceSource 变量](../Images/1c2a284166e12bebf070bf80591b7f42.png)

然后简单地调用`TraceEvent`：

![LogMessage TraceEvent 调用](../Images/ff9b98705b8142ac0f51e926f59222f6.png)

## 配置

`TraceSource`其配置`TraceListener`如下：

```
 <system.diagnostics>
    <trace autoflush="true"/>
    <sources>
      <source name="log" switchValue="All">
        <listeners>
          <add name="file" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
               BaseFileName="gsf_workflows.txt"
               DiskSpaceExhaustedBehavior="ThrowException"
               Location="Custom"
               CustomLocation="D:\Log"
               MaxFileSize="81920000"
               LogFileCreationSchedule="LogFileCreationScheduleOption.Daily"/>
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T22:46:12.503

仅供在此页面上绊倒的每个人..

如果文件夹丢失，FileLogTraceListener 将不会创建文件夹。

FileLogTraceListener 不会绕过安全性，您的进程身份将需要对目标文件夹具有创建+修改权限。

以可执行文件夹为目标是“糟糕的形式”，这往往会因主机而异（例如，在 IIS Express 下编写时，您不会写入与 DevEnv 相同的位置，也不会写入托管的 Web 应用程序。）一个建议是您可能希望选择“自定义”而不是“ExecutableLocation”并指定特定路径（例如 X:\logfiles）

写入器在其内部缓冲区填满时刷新到磁盘，如果内存为我服务，则默认缓冲区大小为 8KB。这不是跟踪侦听器的一个方面，而是它写入的底层文件流。

最后，如果您不需要 FileLogTraceListener 的形式和功能，请考虑跟踪到 EventLog（对此有一个侦听器），因为其他开发人员和非开发人员（例如运维工程师、第三方监控）可能更容易访问它工具等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:34:06.513

两件事情：

**1）您的工作流程很可能由于异常而停止，因为您的*.config*文件不正确。注意变化：**

```
<system.diagnostics>
  <sources>
    <source name="log" switchValue="All">
      <listeners>
        <add name="file" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, 
                         Microsoft.VisualBasic, Version=10.0.0.0, 
                         Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
             BaseFileName="gsf_workflows.txt"
             DiskSpaceExhaustedBehavior="ThrowException"
             Location="ExecutableDirectory"
             MaxFileSize="81920000"
             LogFileCreationSchedule="Daily"/>
      </listeners>
    </source>
  </sources>
</system.diagnostics> 
```

**2）您必须刷新侦听器，否则它们将不会被写入。你可以通过两种方式做到这一点。**

*再次使用InvokeMethod*活动在*logger*变量上显式调用[Flush](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource.flush.aspx)方法。

 **或者

打开配置文件的自动刷新：

```
<system.diagnostics>
    <trace autoflush="true"/>
    ....
</system.diagnostics> 
```

* * *

话虽如此，我不知道您是否了解[工作流跟踪和跟踪](http://msdn.microsoft.com/en-us/library/ee513992%28VS.100%29.aspx)功能。它看起来很适合您的需求。检查[此](https://stackoverflow.com/a/14326380/87825)答案以获取更多链接和示例。**

# zend-framework2 - ZF2 Db\RecordExists - 检查其他列

> ID：14502961
> 
> 赞同：1
> 
> 时间：2013-01-24T13:51:56.417
> 
> 标签：zend-framework2

我对 ZF2 RecordExists 方法有疑问。我将解释我有问题的案例/场景。

表：用户列：id、电子邮件地址、网站名称

```
Sample Records:
        1, user1@email.com, 1site.com
        2, user2@email.com, 1site.com
        3, user3@email.com, 2site.com
        4, user4@email.com, 2site.com
        5, user5@email.com, 1site.com
        6, user6@email.com, 3site.com
        7, user7@email.com, 4site.com 
```

我将以下代码段用于已存在的条件。

```
//Check that the email address exists in the database
$validator = new Zend\Validator\Db\RecordExists(
    array(
        'table' => 'users',
        'field' => 'emailaddress'
    )
);

if ($validator->isValid($emailaddress)) {
    // email address appears to be valid
} else {
    // email address is invalid; print the reasons
    foreach ($validator->getMessages() as $message) {
        echo "$message\n";
    }
} 
```

根据上述片段，user1@email.com 无法再次注册。因为，该电子邮件地址存在于表中。但是，我想在 2site.com 上注册。因为，user1@email.com 在 1site.com 中。因此，user1@email.com 无法再次注册 1site.com。但是，user1@email.com 可以注册到 2site.com。这怎么可能？让我知道你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:13:08.933

有两种方法可以做到这一点。

首先使用[Excluding Record](http://framework.zend.com/manual/2.0/en/modules/zend.validator.set.html#excluding-records)方法排除 websitename 字段值的记录。

> Zend\Validator\Db\RecordExists 和 Zend\Validator\Db\NoRecordExists 还提供了一种测试数据库的方法，不包括表的一部分，通过提供一个字符串形式的 where 子句或一个带有键“字段”的数组和“价值”。

```
$email     = 'user@example.com';
$clause    = $db->quoteInto('email = ?', $email);
$validator = new Zend\Validator\Db\RecordExists(
    array(
        'table'   => 'users',
        'field'   => 'username',
        'exclude' => $clause
    )
);

if ($validator->isValid($username)) {
    // username appears to be valid
} else {
    // username is invalid; print the reason
    $messages = $validator->getMessages();
    foreach ($messages as $message) {
        echo "$message\n";
    }
} 
```

其次，编写您自己的自定义验证器。您需要扩展[AbstractDB类并在](http://apigen.juzna.cz/doc/zendframework/zf2/namespace-Zend.Validator.Db.html)[RecordExists](http://apigen.juzna.cz/doc/zendframework/zf2/class-Zend.Validator.Db.RecordExists.html)类的方向上创建自己的类。在您自己的 cust 类中，您可以定义自己的查询并将其传递给 isValid 函数。

我创建了一个与排除相反的自定义验证器，它是包含。include 是保留字，现在确定它是否会起作用。 [在这里检查](https://gist.github.com/4635137)

更多关于此的阅读

[准则 1](https://stackoverflow.com/questions/12342189/how-to-create-form-inputs-elements-in-zf2)

请查看现有验证器以创建您自己的自定义验证器[自定义验证器准则](https://github.com/zendframework/zf2/tree/master/library/Zend/Validator/Db)

[链验证器 2](http://framework.zend.com/manual/2.0/en/modules/zend.validator.validator-chains.html)

# iis - web.config 的特定重定向/重写规则

> ID：14502967
> 
> 赞同：0
> 
> 时间：2013-01-24T13:52:08.727
> 
> 标签：iis, url-rewriting

有人可以协助重定向规则吗？

我想将 URL 中任何出现的“newjersey”替换为“new-jersey”。

关于如何通过 web.config 执行此操作的任何建议都会很棒，因为我需要立即执行此操作。蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:41:42.340

通过以下方式使其工作：

```
<rule name="Redirect {1}/newjersey" stopProcessing="true">
<match url="^([^/]+)/newjersey$" ignoreCase="false" />
<conditions trackAllCaptures="true">
  <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
</conditions>
<action type="Redirect" url="/{R:1}/new-jersey" appendQueryString="false" /> 
```

# javascript - Firefox 18.0.1 的动画闪烁（由于 RequestAnimationFrame？）

> ID：14502969
> 
> 赞同：4
> 
> 时间：2013-01-24T13:52:14.140
> 
> 标签：javascript, jquery, firefox, parallax

我使用这个[http://www.netmagazine.com/tutorials/create-interactive-street-view-jquery](http://www.netmagazine.com/tutorials/create-interactive-street-view-jquery)教程为我们的一位客户创建了一个介绍：

[http://f-bilandia.de/kunstmann/bronski/](http://f-bilandia.de/kunstmann/bronski/)

它曾经在所有浏览器上都运行良好。但是，当我更新到最新的稳定版本的 Firefox (FF 18.0.1) 时，在更改图像时会出现严重的闪烁。

在阅读最新版本的发行说明时，我看到 ff 有一个新的 Javascript 引擎，并通过新的 HTML 缩放算法提高了图像质量。也许是因为这个？其他可能的解决方案？

您可以在下面看到我使用的代码：

```
$(document).ready(function(){
        var $doc = $(document);
        var $win = $(window);

        // dimensions - we want to cache them on window resize
        var windowHeight, windowWidth;
        var fullHeight, scrollHeight;
        var streetImgWidth = 1024, streetImgHeight = 640;
        calculateDimensions();

        var currentPosition = -1, targetPosition = 0;
        var $videoContainer = $('.street-view');
        var video = $('.street-view > img')[0];
        var $hotspotElements = $('[data-position]');

        // handling resize and scroll events

        function calculateDimensions() {
            windowWidth = $win.width();
            windowHeight = $win.height();
            fullHeight = $('#main').height();
            scrollHeight = fullHeight - windowHeight;
        }

        function handleResize() {
            calculateDimensions();
            resizeBackgroundImage();
            handleScroll();
        }

        function handleScroll() {
            targetPosition = $win.scrollTop() / scrollHeight;
        }

        // main render loop
        window.requestAnimFrame = (function(){
          return  window.requestAnimationFrame       ||
                  window.webkitRequestAnimationFrame ||
                  window.mozRequestAnimationFrame    ||
                  window.oRequestAnimationFrame      ||
                  window.msRequestAnimationFrame     ||
                  function(/* function */ callback, /* DOMElement */ element){
                    window.setTimeout(callback, 1000 / 60);
                  };
        })();

        function animloop(){
            if ( Math.floor(currentPosition*5000) != Math.floor(targetPosition*5000) ) {
                currentPosition += (targetPosition - currentPosition) / 5;
                render(currentPosition);
            }
          requestAnimFrame(animloop);
        }

        // rendering

        function render( position ) {
            // position the elements
            var minY = -windowHeight, maxY = windowHeight;
            $.each($hotspotElements,function(index,element){
                var $hotspot = $(element);
                var elemPosition = Number( $hotspot.attr('data-position') );
                var elemSpeed = Number( $hotspot.attr('data-speed') );
                var elemY = windowHeight/2 + elemSpeed * (elemPosition-position) * scrollHeight;
                if ( elemY < minY || elemY > maxY ) {
                    $hotspot.css({'visiblity':'none', top: '-1000px','webkitTransform':'none'});
                } else {
                    $hotspot.css({'visiblity':'visible', top: elemY, position: 'fixed'});
                }
            });

            renderVideo( position );
        }

        function resizeBackgroundImage(){
            // get image container size
            var scale = Math.max( windowHeight/streetImgHeight , windowWidth/streetImgWidth );
            var width = scale * streetImgWidth , height = scale * streetImgHeight;
            var left = (windowWidth-width)/2, top = (windowHeight-height)/2;
            $videoContainer
                      .width(width).height(height)
                      .css('position','fixed')
                      .css('left',left+'px')
                      .css('top',top+'px');
        }

        // video handling

        var imageSeqLoader = new ProgressiveImageSequence( "street/vid-{index}.jpg" , 387 , {
            indexSize: 4,
            initialStep: 16,
            onProgress: handleLoadProgress,
            onComplete: handleLoadComplete,
            stopAt: 1
        } );
                    // there seems to be a problem with ie 
                    // calling the callback several times
        var loadCounterForIE = 0; 
        imageSeqLoader.loadPosition(currentPosition,function(){
            loadCounterForIE++;
            if ( loadCounterForIE == 1 ) {
                renderVideo(currentPosition);
                imageSeqLoader.load();
                imageSeqLoader.load();
                imageSeqLoader.load();
                imageSeqLoader.load();
            }
        });

        var currentSrc, currentIndex;

        function renderVideo(position) {
            var index = Math.round( currentPosition * (imageSeqLoader.length-1) );
            var img = imageSeqLoader.getNearest( index );
            var nearestIndex = imageSeqLoader.nearestIndex;
            if ( nearestIndex < 0 ) nearestIndex = 0;
            var $img = $(img);
            var src;
            if ( !!img ) {
                src = img.src;
                if ( src != currentSrc ) {
                    video.src = src;
                    currentSrc = src;
                }
            }
        }

        $('body').append('<div id="loading-bar" style="">Loading...</div>');

        function handleLoadProgress() {
            var progress = imageSeqLoader.getLoadProgress() * 100;
            $('#loading-bar').css({width:progress+'%',opacity:1});
        }

        function handleLoadComplete() {
            $('#loading-bar').css({width:'100%',opacity:0,display: "none"});
            $("html, body").css("overflow", "auto");
            $("html, body").css("overflow-x", "hidden");
            $("nav").css("display", "block");
            $("#preloader").fadeOut("slow");
            $("#scroll-hint").css("display", "block");
        }

        $win.resize( handleResize );
        $win.scroll( handleScroll );

        handleResize();
        animloop();

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:59:24.530

在您的“渲染（位置）”函数中，以下几行似乎应该被重构。

```
 if ( elemY < minY || elemY > maxY ) {
                $hotspot.css({'visiblity':'none', top: '-1000px','webkitTransform':'none'});
            } else {
                $hotspot.css({'visiblity':'visible', top: elemY, position: 'fixed'});
            } 
```

*   因为一个可见性拼写错误并且它没有“无”值（它将被“隐藏”）。只需将“display”与“none”和“”值一起使用。
*   “top”、“webkitTransform”和“position”键似乎是不必要的。如果元素不可见，则无需设置顶部，为什么元素不总是固定位置？

# windows-phone-7 - 如何将 Windows Phone 7 应用程序部署到 Windows Phone 8 手机？

> ID：14502971
> 
> 赞同：2
> 
> 时间：2013-01-24T13:52:19.063
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

标题几乎概括了它。我编写了一个 Windows Phone 7 应用程序，现在我想将它部署到 Windows Phone 8 设备 (HTC Windows Phone 8X)。我已经注册并解锁了这款手机以进行开发。

当我通过 USB 插入手机并想使用 Visual Studio 2010 对其进行部署时，它不断指出由于 Zune 未启动而发生部署错误。不过，Windows Phone 8 手机现在不使用 zune。

我怎样才能解决这个问题，以便我可以将 WP7 应用程序部署到手机上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:58:29.997

如果没有 Windows Phone 8 SDK，您将无法部署到 Windows Phone 8 设备，这需要 Visual Studio 2012，这也需要 Windows 8。因此，如果不升级，您将无法执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T00:20:18.977

很难相信，但这确实是可能的。我将 WP7.1 应用程序从 Windows7 x64 机器部署到 Windows Phone 8 设备（HTC 8X）：

1.  安装 WindowsPhone8SDK （这里在 stackoverflow 上解决，[这里](https://stackoverflow.com/questions/11719142/will-windows-phone-8-sdk-run-on-windows-7)有详细说明[，](https://stackoverflow.com/questions/13507616/how-to-install-windows-phone-8-sdk-on-windows-7)不要忘记同意许多错误和警告）
2.  通过 PhoneReg.exe 工具注册和解锁您的设备（“...\Microsoft SDKs\Windows Phone\v8.0\Tools\Phone Registration\PhoneReg.exe”）
3.  在 VS2010 中构建您的应用程序（我还没有弄清楚如何从 VS 部署应用程序，这不起作用）
4.  通过 XapDeploy.exe 工具部署应用程序（“...\Microsoft SDKs\Windows Phone\v8.0\Tools\XAP Deployment\XapDeploy.exe”）。选择“设备”并指向带有 *.xap 文件的目录 (...\AppName\Bin\Debug)

# localization - 有没有办法在各种平台上本地化应用程序

> ID：14502972
> 
> 赞同：7
> 
> 时间：2013-01-24T13:52:19.820
> 
> 标签：localization, development-environment

我们正在开发一个在各种平台（Windows、Windows RT、MacOSX、iOS、Android）上运行的应用程序。

问题是如何以简单的方式管理不同平台上的不同本地化。不同平台上的语言文件有各种格式（有些是基于 xml 的，有些是简单的键值对，还有一些是完全疯狂的格式，如 MacOS 上的）

我敢肯定，我们不是第一个遇到这个问题的公司，但是我无法找到一个易于使用的解决方案来实现拥有一个“数据源”的可能性，其中字符串以不同的语言收集（最好的将是翻译人员的用户界面），然后可以将其导出为不同平台的不同格式。

有人有解决这个问题的方法吗？

问候亚历山大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-01T17:04:03.107

我建议使用[GNU Gettext](https://www.gnu.org/software/gettext/)工具链进行管理，并在运行时使用

*   一些用于运行时读取的替代实现，例如[Boost.Locale](http://www.boost.org/libs/locale/doc/html/index.html)，
*   自己的实现（.mo 格式非常简单）或
*   使用[Translate Toolkit](http://toolkit.translatehouse.org/)将消息目录转换为您喜欢的其他格式。

您不能使用[GNU Gettext](https://www.gnu.org/software/gettext/)`libintl`的组件，因为它是根据 LGPL 许可的，并且 Apple AppStore 和 Windows Live Store 的条款与该许可不兼容。但是在运行时重新实现所需的位真的很简单。

[Translate Toolkit](http://toolkit.translatehouse.org/)实际上重新实现了全部或大部分[GNU Gettext](https://www.gnu.org/software/gettext/)并支持许多额外的本地化格式，但 Gettext`.po`格式有大多数免费工具（例如用于本地编辑的[poedit和用于在线编辑的](http://sourceforge.net/projects/poedit/)[Weblate](http://weblate.org/)），所以我建议还是坚持使用它。并阅读[GNU Gettext](https://www.gnu.org/software/gettext/)手册，它很好地描述了预期的过程和背后的基本原理。

我对工具链有很好的经验。当您需要一些特殊处理（例如从自定义资源文件中提取可翻译字符串）时， [Translate Toolkit](http://toolkit.translatehouse.org/)很容易编写脚本，而且[Weblate](http://weblate.org/)易于为您的翻译人员使用，尤其是当您像我们一样依赖不同国家的业务合作伙伴和测试人员进行大多数翻译时.

[Translate Toolkit](http://toolkit.translatehouse.org/)还支持从 HTML 中提取可翻译的字符串，因此可以使用相同的过程来翻译您的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:34:18.130

我为 iPhone 和 Android 做了一个项目，其中有很多翻译，我想我有你正在寻找的解决方案。

我解决它的方法是将所有翻译文本放在 Excel 电子表格中，并使用 VBA 宏从那里生成 .string 和 .xml 翻译文件。您可以在此处下载我的示例 Excel 表和 VBA 宏：

[http://members.home.nl/bas.de.reuver/files/multilanguage.zip](http://members.home.nl/bas.de.reuver/files/multilanguage.zip)

就在最近，我还添加了初步的 Visual Studio .resx 输出，尽管这未经测试。

编辑：顺便说一句，我的 javascript [xcode/eclipse 转换器](http://members.home.nl/bas.de.reuver/files/stringsconvert.html)也可能有用..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-03T20:30:37.863

您可以将翻译存储在[https://l10n.ws](https://l10n.ws)并通过他们的 API 获取

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:01:49.643

免责声明：我是 Tethras 的 CTO 和联合创始人，但我会尝试以不只是“使用我们的服务”的方式回答这个问题。

正如 loldop 上面指出的那样，如果您想要一个管理本地化内容的一站式解决方案，您确实需要在所有平台上规范您的内容。这可能需要大量工作，并且需要大量编码、编写脚本以及调用来自不同 SDK 的各种工具，以形成一种通用格式，以满足您需要支持的所有各种文件格式的本地化需求。我之前的句子的长度和复杂性与你需要做的工作量成反比，以便为所有这些找到一个有利的解决方案。

在[Tethras](http://www.tethras.com)，我们建立了一个平台，减轻了多平台软件发布者必须这样做的需求。我们支持您上面列出的平台的所有原生格式，并且可以利用从一种文件格式到另一种文件格式的翻译。例如，将 iOS 应用程序中 Localizable.strings 中的内容翻译成多种语言，然后将等效的 strings.xml 文件从 Android 或 foo.resx 从 Windows RT 上传到系统，它会自动为您利用翻译。任何未翻译的字符串都将被标记，您可以为这些字符串订购更新。

实际上，Tethras 是一个 CMS，用于跨多种不同原生文件格式的本地化内容。

# javascript - 按动态 ID 显示 Bootstrap 弹出框

> ID：14502975
> 
> 赞同：0
> 
> 时间：2013-01-24T13:52:33.740
> 
> 标签：javascript, twitter-bootstrap

我正在学习如何使用 Bootstrap，并且想知道如何针对表单中的输入字段动态显示弹出框。我尝试了以下方法，但没有奏效。

```
<script type="text/javascript">
  $('input').one('focus', function() {
    var id=$(this).attr('id');
    $('input[id='.id.']').popover({'trigger':'focus''});
  });                                                                                                                                           
</script> 
```

我试图避免为每个输入字段设置单独的事件。

这是我用来操作的 HTML

```
 <input type="email" 
            name="email"
            id="email"
            data-title="E-Mail Address"
            data-content="E-Mail address"
            data-alignment="right"/> 
```

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:03:09.400

Try this:

```
<script type="text/javascript">
    $('input').one('focus', function() {
      $(this).popover({'trigger':'focus''});
    });
</script> 
```

I haven't test it, anyway.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:55:39.140

如果您也提供html，那就太好了。但根据你给出的，这是可能的解释

如果输入是 ID，那么以下应该可以工作。否则你不需要提供适当的选择器。

对于您附加“#”的 ID

对于类名，您附加一个“。”

```
 <script type="text/javascript">
 $('#email').on('focus', function() {
var id=$(this).attr('id');
$("#"+id).popover({'trigger':'focus''});
 });                                                                                                                                           
 </script> 
```

# opengl - glVertexAttribPointer() 仅适用于第一个流

> ID：14502976
> 
> 赞同：0
> 
> 时间：2013-01-24T13:52:36.860
> 
> 标签：opengl, glsl, shader, vertex-shader

我正在尝试使用 glVertexAttribPointer() 向我的顶点着色器提供一些数据。问题是它只适用于 FIRST 属性......

这是我的 OpenGL 代码：

```
struct Flag_vertex
{
    GLfloat position_1[ 8 ];
    GLfloat position_2[ 8 ];
};

Flag_vertex flag_vertex;

   ... // fill some data to flag_vertex

GLuint vertexbuffer_id;
glGenBuffers( 1, &vertexbuffer_id );
glBindBuffer( GL_ARRAY_BUFFER, vertexbuffer_id );
glBufferData( GL_ARRAY_BUFFER, sizeof(flag_vertex), &flag_vertex, GL_STATIC_DRAW );

glEnableVertexAttribArray( 0 );
glEnableVertexAttribArray( 1 );

glBindBuffer( GL_ARRAY_BUFFER, vertexbuffer_id );
glVertexAttribPointer( 0, 2, GL_FLOAT, GL_FALSE, 0, (void*)offsetof(Flag_vertex, position_1) );
glVertexAttribPointer( 1, 2, GL_FLOAT, GL_FALSE, 0, (void*)offsetof(Flag_vertex, position_2) ); 
```

我的着色器是这样的：

```
#version 420 core

layout(location = 0) in vec2 in_position_1;
layout(location = 1) in vec2 in_position_2;

out vec2 texcoord;

void main()
{
    gl_Position = vec4(in_position_X, 0.0, 1.0);
    texcoord = in_position_X * vec2(0.5) + vec2(0.5);
} 
```

如果我使用“in_position_1”我的纹理渲染完美，但如果我使用 in_position_2 什么都不会发生......

提示：在链接我正在做的着色器之前：

```
glBindAttribLocation( programID, 0, "in_position_1");
glBindAttribLocation( programID, 1, "in_position_2"); 
```

为什么它只适用于第一个流？我需要更多数据到我的顶点...我需要发送颜色等...任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:58:45.790

```
glVertexAttribPointer( 0, 2, GL_FLOAT, GL_FALSE, 0, (void*)offsetof(Flag_vertex, position_1) );
glVertexAttribPointer( 1, 2, GL_FLOAT, GL_FALSE, 0, (void*)offsetof(Flag_vertex, position_2) ); 
```

这些行没有意义。至少，与如何`Flag_vertex`定义无关。如果`Flag_vertex`真的应该是一个*顶点*（而不是一个四边形），那么它有 8 个浮点数是没有意义的。如果每个都`Flag_vertex`定义了一个完整的四边形，那么您将其命名错误；它根本不是一个*顶点*，它是`Flag_quad`.

所以很难知道你在这里想要完成什么。

还：

> 如果我使用“in_position_1”我的纹理渲染完美，但如果我使用 in_position_2 什么都不会发生......

当然可以。您的位置数据在属性 0 中。因此，您的位置数据*不在*属性 1 中。如果您假装属性 1 有您的位置数据，而实际上它显然没有，您将不会得到合理的结果。

您的问题是，当您应该同时使用*它们时，您总是使用属性 0。*你不应该选择其中一个。用于`in_position_1`位置和`in_position_2`纹理坐标。并尝试根据他们的所作所为（喜欢`position`和`texture_coord`或某事）合理地命名他们。不要为他们使用数字。

> 提示：在链接我正在做的着色器之前：

`layout(location=#)`这与着色器中的设置完全相同。如果你想要它在着色器中，那么把它放在着色器中。如果你想在你的 OpenGL 代码中使用它，那么把它放在你的 OpenGL 代码中。不要放在两个地方。

# c# - 运行一个登录场景，然后运行多个场景

> ID：14502978
> 
> 赞同：4
> 
> 时间：2013-01-24T13:52:41.307
> 
> 标签：c#, specflow, scenarios

我想登录一次，然后在关闭浏览器之前运行几个场景（比如说 7 个场景）。

我在每个场景中都使用了背景而不是给定我登录，但似乎每次运行场景时，它都会首先登录。

这减慢了我的测试速度。

我想做的事：

登录并在同一个浏览器窗口上运行多个场景，然后在完成后将其关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:03:42.357

What you're looking for is Specflow Hooks.

[https://github.com/techtalk/SpecFlow/wiki/Hooks](https://github.com/techtalk/SpecFlow/wiki/Hooks)

You won't be able to specify "logging in" as a step in the background, instead you'll tag each scenario that you need to be logged in for.

Example:

```
@alreadyLoggedIn
Scenario: user can see XYZ
    Given...

@alreadyLoggedIn
Scenario: user can see ABC
    Given... 
```

You then just need to specify the code for "logging in" inside a method decorated with the BeforeFeature attribute. This method will only be run once for any scenario in a feature.

```
[BeforeFeature("alreadyLoggedIn")]
public void BeforeFeatureLoggedIn()
{
    // write code to log the person in
} 
```

If you have different users/roles you need to test for, just create separate tags (ie adminAlreadyLoggedIn, salesAlreadyLoggedIn, etc)

Hope this gets you on the right path!

# ios - ARC 澄清：我的类扩展属性会自动释放吗？

> ID：14502980
> 
> 赞同：1
> 
> 时间：2013-01-24T13:52:43.333
> 
> 标签：ios, objective-c, properties, automatic-ref-counting

我是 ARC 的新手，我几乎没有什么问题没有找到相关信息。

我正在编写通信类，我想将属性添加到第 3 方类。我在我的`communicationClass.h`：

```
@interface AFHTTPRequestOperation()

@property (nonatomic, assign) id<TargetProtocol> delegate;
@property (nonatomic, assign) SEL callback;
@property (nonatomic, retain) NSString *requestIdentifier;
@property (nonatomic, assign) int authenticationMode;

@end 
```

属性添加得很好，我使用它们。我的问题是，即使`AFHTTPRequestOperation` 在不同的文件（我的`communicationClass.h`）中扩展，ARC 也会释放这些属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:02:34.093

**Yes** your extension will be dealt by ARC.

You are not required to worry about it.

And it would look good if you use `weak` and `strong` in `@property`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:04:01.213

我会说“是”，它们将为您管理，这基于这篇[博客文章](http://www.techpaa.com/2012/04/adding-properties-to-categories-and.html)，该文章讨论了如何使用`objc_setAssociatedObject()`. 在文章的最后作者说：

> 注意：当类对象（UIView 对象）被释放时，它的属性（animationIdentifer）会自动发送一个-release 消息。

所以我*假设*ARC会为你做这件事。这不是很权威，我知道...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:14:05.410

您正在使用类扩展（而不是类别）添加其他属性。只有当您有权访问被扩展类的原始源代码时，才能使用类扩展。在这种情况下，您可能已经将源代码`AFNetworking`包含在您的项目中。

Apple 的[Programming with Objective-C](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)对类扩展有这样的说法：

> 类扩展与类别有一些相似之处，但它只能添加到您在编译时拥有源代码的类（该类与类扩展同时编译）。类扩展声明的方法在原始类的@implementation 块中实现，因此您不能在框架类（例如 Cocoa 或 Cocoa Touch 类（如 NSString）上）声明类扩展。

和

> 与常规类别不同，类扩展可以将自己的属性和实例变量添加到类中。如果您在类扩展中声明属性，[...] 编译器将在主类实现中自动合成相关的访问器方法以及实例变量。

这表明由类扩展添加的属性将与它们在原始实现文件中的功能完全相同。`communicationClass.h`但是，文档建议类扩展应该与原始实现同时编译，如果不包含在原始`AFHTTPRequestOperation.m`实现文件中，我不清楚这是如何发生的。

鉴于这些属性对您有用，我不得不假设 Objective-C 运行时正在识别它们，这可能意味着 ARC 将正常工作。

这可能值得测试。为了检查 ARC 是否正确释放了该属性，我将向`dealloc`您存储在使用此方法添加的属性中的类的方法添加一些日志记录。如果在`dealloc`父级被销毁时调用它，那么你就会知道它正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T13:55:38.373

问题是，如果`AFHTTPRequestOperation`类是在 ARC 支持下编译的。如果答案**是肯定**的，那么 ARC 会处理这个问题。否则，它不会，答案是**否定**的。

另一件事是在使用 ARC 时`retain`应该这样做。`strong`

# rest - Azure Blob 存储 REST Api - 如何将标头写入字符串

> ID：14502983
> 
> 赞同：1
> 
> 时间：2013-01-24T13:52:53.313
> 
> 标签：rest, azure, azure-storage, azure-blob-storage

我是 REST 新手，我正在尝试测试对我的私有 azure blob 存储的 REST 调用。我下载了一个小型 REST 调用测试程序，它要求提供 URL 和标头（均作为字符串）。

我需要使用此处描述的方法列出容器中的所有 blob：[List Blobs (REST API)](http://msdn.microsoft.com/en-us/library/windowsazure/dd135734.aspx)

我基本上想知道**如何编写标头**（包括我的密钥以访问私有容器）。

谢谢

编辑：我用来测试 REST 调用的程序是一个名为“Simple REST Client”的 Chrome 扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:42:20.123

我认为您应该以这种方式将其输入到该 chrome 插件中： Authorization="SharedKey accountname:SharedKey" x-ms-date:2013-01-24T21:33:40 (Current Date)

至少根据本文档：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)

# c++ - Delphi 等价于 C++ 参考参数是什么？

> ID：14502990
> 
> 赞同：5
> 
> 时间：2013-01-24T13:53:28.557
> 
> 标签：c++, delphi

`int &a`德尔福怎么写？

例如，在 C++ 中是`void ABC(int &a, int &b)`，但我不知道如何在 Delphi 中编写它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T13:55:12.103

那是 C++ 中的引用参数。在 Delphi 中对应一个`var` [参数](http://docwiki.embarcadero.com/RADStudio/XE3/en/Parameters_%28Delphi%29#Value_and_Variable_Parameters)。

```
procedure ABC(var a: Integer; var b: Integer); 
```

文档说：

> 大多数参数要么是值参数（默认），要么是变量（var）参数。值参数通过值传递，而可变参数通过引用传递。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T13:55:44.827

```
void ABC(int &a, int &b) 
```

会成为

```
procedure ABC(var a: Integer; var b: Integer); 
```

`var`关键字表示您希望通过引用而不是值来传递值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:34:34.613

还有`procedure ABC(out a: Integer; out b: Integer);` 虽然它不完全是 var-parameters，但它们也是按引用传递的，旨在将值传递出去。根据您移植的代码的语义，您可以`var`根据`out`具体情况进行选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T21:28:02.323

正如其他人指出的那样，等效的 Delphi 声明是`procedure ABC(var a, b: Integer);`，**除非**您的意图是声明 Delphi 代码可以调用的外部 C/C++ 实现的函数，在这种情况下，您必须考虑 C/C++ 函数的调用约定。没有指定调用约定的 Delphi 函数声明，如上所示，使用 Delphi 的调用约定（在 C++Builder 中`register`称为）。`__fastcall`您显示的 C/C++ 声明未指定调用约定，因此使用 C/C++ 编译器的默认调用约定，在大多数设置中为`__cdecl`，在这种情况下，等效的 Delphi 声明将变为：`procedure ABC(var a, b: Integer); cdecl;`

# c# - 获取在端口 137 上收到的广泛消息消息的源 IpAddress

> ID：14502991
> 
> 赞同：0
> 
> 时间：2013-01-24T13:53:30.133
> 
> 标签：c#, sockets, udp, modem, packet-capture

我正在尝试从 DSL 调制解调器发送并使用 UDP 协议在端口 137 上接收的广播数据包中获取 IP 地址。当存在连接时，我能够读取 IP 地址。

但是，在未识别的网络状态下，当我的调制解调器配置为 DHCP 并且允许特定范围的 IP 并且我的机器上的设置是自动检测时：

我在阅读广播消息时获得了机器的默认本地 IP 地址。那将从169开始。

注意：我正在重新启动调制解调器以接收广播消息。

```
Socket sock = new Socket(AddressFamily.InterNetwork,
                        SocketType.Dgram, ProtocolType.Udp);
                IPEndPoint iep = new IPEndPoint(IPAddress.Any, 137);
                sock.Bind(iep);
                EndPoint ep = (EndPoint)iep;
                int iLoopCount=0;
                while (iLoopCount <= 10000)
                {
                    Console.WriteLine("Ready to receive…");
                    byte[] data = new byte[1024];
                    int recv = sock.ReceiveFrom(data, ref ep);                    
                    string stringData = Encoding.Default.GetString(data, 0, recv);
                    Console.WriteLine("{1}: from: {0}",((IPEndPoint)ep).Address.ToString(),DateTime.Now.ToString());

                    iLoopCount++;
                   // Console.WriteLine(sock.RemoteEndPoint.ToString());
                }
                sock.Close();
                Console.Read(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:42:08.963

[在http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C](http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C)找到了我的问题的答案

# jquery - jQuery mobile：改变按钮的图标也会改变它的形状

> ID：14502994
> 
> 赞同：0
> 
> 时间：2013-01-24T13:53:40.300
> 
> 标签：jquery, jquery-mobile

我在我的项目中使用了[这个](https://stackoverflow.com/questions/14409282/how-to-change-a-jquery-mobile-button-icon-with-javascript)问题的解决方案来更改用户单击按钮时的图标：

```
 $('#buttonSwitch').buttonMarkup({icon: "minus"}); 
```

但是，不仅图标而且按钮的形状也会发生变化（圆角）：

点击前：![点击之前](../Images/209b2aae5df1a943c25220bd1fee17b0.png)

点击后：![点击后](../Images/3422aeb93044268366a9eb71a224ba3f.png)

你可以在这里找到一个最小的例子：-removed-

我想知道如何在不更改按钮形状的情况下更改图标。在此先感谢您的帮助。

**编辑：**还有一个小问题。点击后，按钮底部有这个白色的小边框：

![点击之前](../Images/bd8656e9e032d541e68ffbd75377a8c9.png) ![点击后](../Images/0c4b325bd0b8cf069d74b03c3d03a208.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:43:27.517

It's because you have custom CSS (border-radius) on your button. And the buttonMarkup function sets the border-radius to default. So, you have to store the current border-radius, change the button, and restore the border-radius.

Modify your JS function to:

```
function switchIcon() {
    iconSwitched = !iconSwitched;

    /* Store the objects */
    var button = $('#buttonSwitch');
    var parent = button.parent();
    var sibling = button.siblings().filter('span').first();

    /* Store the border-radius */
    var br = button.css('border-radius');
    var pr = parent.css('border-radius');
    var sr = sibling.css('border-radius');

    if (iconSwitched)
        button.buttonMarkup({icon: "minus"});
    else
        button.buttonMarkup({icon: "add"});

    /* Now, the border-radius has been set using the buttonMarkup function
     * We need to restore it to our custom border-radius to get our custom radius back.
     * Note that you may want to also set -webkit-border-radius 
     * and -moz-border-radius as well
     */
    button.css('border-radius', br);
    parent.css('border-radius', pr);
    sibling.css('border-radius', sr);

    /* Get rid of box shadow too */
    parent.css('box-shadow', 'none');
}; 
```

# java - 加速 Java 应用程序

> ID：14502995
> 
> 赞同：3
> 
> 时间：2013-01-24T13:53:44.603
> 
> 标签：java, multithreading, db2

如何加速 Java 应用程序？

我正在开发一个 Java 应用程序，它逐行解析 Cobol 文件，从中提取必要的数据并填充到 DB2 数据库中。

如果要解析的文件更多，则应用程序需要超过 24 小时才能完成，这是不可接受的。

所以我在一个单独的线程中做了一些表格填充以加快速度..eg

```
ArrayList list = (ArrayList)vList.clone();
ThreadPopulator populator = new ThreadPopulator(connection, list, srcMbr);
Thread thread = new Thread(populator);
thread.run();
return;

And ThreadPopulator class is implementing Runnable interface and run method as

public void run()
{
    try
    {
        synchronized (this)
        {
           int len = Utils.length(list);
           for (int i = 0; i < len; i++)
           {
              .....
              stmt.addBatch();
            if ((i + 1) % 5000 == 0)
                    stmt.executeBatch(); // Execute every 5000 items.
           }
        }
    }
    catch (Throwable e)
    {
        e.printStackTrace():
    }
    finally
    {
        if (list != null)
            list.clear();
    }
} 
```

注意：需要使用克隆，这样下一个线程就不会消失条目。

我的想法是否正确？

请建议我，我必须选择什么方式来加速我的应用程序超过数千个 Cobol 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T14:03:37.067

You need to first determine what is it spending most of it's time doing. This requires measuring the CPU and possibly memory usage. Is it the parsing which is using CPU, or the database which is using IO.

Without measuring what is your performance bottleneck, you can't make an informed decision as to what need to be improved.

From my experience, I would suspect the database first. You have batch sizes of 5000 which should be enough. How much CPU is it using when the program is running e.g. is one CPU always busy?

Note: You can write a simple text parser to read about 40-100 MB/s. To run for 24 hours you would need to have many TB of data to load which sounds unlikely to be the cause.

> Actually first need to rewrite the file in proper format then read those lines & extract necessary data, even source lines read by 2-3 times for a single file, (actually this is logic part). When I run the application on 4000K files, it runs for 24 hrs.

4 million files is going to be a performance problem. Even a trivial file open takes about 8 ms for a fast HDD and if you open it 2-3 times each it will take about 30 hours in total. (I assume your disk cache saves you a few hours) The only way to make it faster is to;

*   use less files. 4 million is an insane number to open multiple times. Opening them just once each will take about 10 hours (never mind doing something with them)
*   use a faster drive e.g. an SSD can do this in about 1/100th of the time. an HDD can perform up to 120 IOPS, an cheap SSD can do 40,000 IOPS and a good one 230,000 IOPS. The later could open 4 million files in ~12 seconds which is faster than 10 hours. ;)
*   pass all the files only once. It will still be slow, but it will be 2-3x faster.

Note: using more threads won't make your hard drives go faster.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:08:37.670

你在打电话

```
thread.run(); 
```

代替

```
thread.start(); 
```

这意味着您实际上并没有在单独的线程中运行代码...

除此之外，我想支持@Peter 的回答。

# excel - 公式审核 - 特定区域的错误检查

> ID：14502999
> 
> 赞同：0
> 
> 时间：2013-01-24T13:54:23.183
> 
> 标签：excel, formula

我想问是否可以检查特定区域的不一致公式。

就我而言，col D 和 col E 包含不同的公式集。

我只是想确保 col E 中的所有公式都是一致的。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:07:09.660

这是一种方法。

假设您的工作表如下所示

![在此处输入图像描述](../Images/c89a50909bc547a38b55761818dfb6c5.png)

现在将此代码粘贴到模块中并运行它。它会告诉您哪些单元格的公式不一致。看下面的截图

我已经对代码进行了注释，以便您理解它不会有任何问题。如果你只是问:)

```
Option Explicit

Sub GetInConsCells()
    Dim ws As Worksheet
    Dim rng As Range, cl As Range, errCells As Range
    Dim ErrorCells As String
    Dim lRow As Long

    '~~> Create a temp copy of the sheet
    ThisWorkbook.Sheets("Sheet1").Copy After:=Sheets(ThisWorkbook.Sheets.Count)

    Set ws = ActiveSheet
    With ws
        '~~> Clear Col D and Col F Contents
        .Range("D:D,F:F").ClearContents

        '~~> Find the last row of col E
        lRow = .Range("E" & .Rows.Count).End(xlUp).Row

        '~~> Set your range
        Set rng = Range("E1:E" & lRow)

        '~~> Check if the cells have inconsistent formulas
        For Each cl In rng
            If cl.Errors(xlInconsistentFormula).Value Then
                If errCells Is Nothing Then
                    Set errCells = cl
                Else
                    Set errCells = Union(cl, errCells)
                End If
            End If
        Next cl

        '~~> Display relevant message
        If Not errCells Is Nothing Then
            ErrorCells = errCells.Address
            MsgBox "Formulas in cells " & ErrorCells & " are inconsitent"
        Else
            MsgBox "All Formulas are consistent"
        End If
    End With

    '~~> Delete temp sheet
    Application.DisplayAlerts = False
    ws.Delete
    Application.DisplayAlerts = True
End Sub 
```

![在此处输入图像描述](../Images/ee5665a1b98e92db7765ad5cc67b9940.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:17:04.460

一种快速实用的方法是（暂时）使用另一列：假设您要检查列 E 中的每个单元格是否有公式`=SUM(A1:D1)`，只需`=(SUM(A1:D1)-E1`在另一列中输入公式。然后选择列并过滤`FALSE`- 这将为您提供所有具有不同结果的公式！