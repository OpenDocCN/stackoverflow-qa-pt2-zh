# StackOverflow 问答 14436000-14436999

# ruby-on-rails - 可以在 Rails 中为开发任务暂时禁用批量分配安全性吗？

> ID：14436000
> 
> 赞同：2
> 
> 时间：2013-01-21T09:48:47.880
> 
> 标签：ruby-on-rails

Rails 批量分配安全性东西非常适合生产代码。但是当我在做诸如为数据库播种之类的事情时，我希望能够使用比

```
joe = User.create!(name: 'Joe', email: 'joe@blow.com')
model = MyModel.new
model.update_attributes({name: 'Mod', description: 'blah', creator: joe},
                        as: :admin, without_protection: true)
model.save! 
```

如

```
joe = User.create!(name: 'Joe', email: 'joe@blow.com')
MyModel.create!({name: 'Mod', description: 'blah', creator: joe}) 
```

有没有一种简单的方法可以仅对像这样的开发脚本禁用批量分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T09:53:45.040

[这里](http://railscasts.com/episodes/237-dynamic-attr-accessible)有一个优雅的答案。

```
class ActiveRecord::Base
  attr_accessible
  attr_accessor :accessible

  private

  def mass_assignment_authorizer
    if accessible == :all
      self.class.protected_attributes
    else
      super + (accessible || [])
    end
  end
end 
```

以及您想跳过的任何地方：

```
@your_object.accessible = :all 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T12:24:17.213

这是批量分配保护的常见问题，也是 Rails 4 中引入强参数的原因之一。这会将保护逻辑移到控制器中，因此如果您正在操作 ActiveRecord，它不会妨碍您直接对象。

您可以使用[strong_parameters gem](https://github.com/rails/strong_parameters)为 Rails 3 应用程序获得相同的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T20:38:18.970

本地绕过批量分配安全性的一个简单选项是仅发送 val= 调用，如下所示：

```
def create_user_with_values(args)
  inst = User.new
  args.each { |k,v |
     inst.__send__ "#{k.to_s}=",v
  }
  inst.save!
end 
```

并像这样调用它：

```
create_user_with_values {name: 'Mod', description: 'blah', creator: joe} 
```

# android - 为什么 overridePendingTransition 在 android 4.0 或更高版本中不起作用？

> ID：14436003
> 
> 赞同：1
> 
> 时间：2013-01-21T09:48:52.750
> 
> 标签：android

这段代码在我的HTC Disire和Android 2.3.3设备上运行良好，但在我的android 4.0手机——华为C8812上不行？

```
public void changeNextActivity(Class<?> c){
    Intent intent = new Intent(this,c);
    this.startActivity(intent);
    overridePendingTransition(R.anim.animation_right_in,R.anim.animation_left_out);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:35:02.217

尝试在新活动的 onCreate 中编写 overridePendingTransition 代码。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        overridePendingTransition(R.anim.slide_in_hor, R.anim.slide_out_hor);
        setContentView(R.layout.main);

        } 
```

# ios - 算术运算符和键值编码

> ID：14436004
> 
> 赞同：1
> 
> 时间：2013-01-21T09:49:00.887
> 
> 标签：ios, objective-c, macos, cocoa, foundation

是否可以使用 Obj-C 键值编码进行算术运算？我正在寻找这样的东西：

```
[obj valueForKeyPath:@"(val1+val2)"] 
```

还是您必须实现一个手动添加这两个值的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:12:57.447

**无法使用 KVC 进行算术运算。**

您可以对字符串进行算术运算，然后将其传递给`[obj valueforKeyPath:...]`as ：

```
NSString *val1=@"3";
NSString *val2=@"5";

NSString *formula = [NSString stringWithFormat:@"%@+%@",val1,val2];

NSExpression *exp = [NSExpression expressionWithFormat:formula];
NSNumber *resultForCustomFormula = [exp expressionValueWithObject:nil context:nil];

NSLog(@"%f", [resultForCustomFormula floatValue]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T11:29:22.347

我使用 AKV 提供的 NSExpression 示例来创建这个 NSObject 类别。

这扩展了 valueForKeyPath: 所以它支持这样的表达式：

```
[obj valueForKeyPath:@"(val1+val2)"]; 
```

或例如：

```
[obj valueForKeyPath:@"@min.(val1+val2)"]; 
```

**类别**

```
#import <objc/runtime.h>

@implementation NSObject (KVCExtension)

#pragma mark - Initializing a Class

+ (void)load {

    SEL valueForKeyPath = @selector(valueForKeyPath:);
    SEL extendedValueForKeyPath = @selector(extendedValueForKeyPath:);
    Method valueForKeyPathMethod = class_getInstanceMethod([self class], valueForKeyPath);
    Method extendedValueForKeyPathMethod = class_getInstanceMethod([self class], extendedValueForKeyPath);
    method_exchangeImplementations(valueForKeyPathMethod, extendedValueForKeyPathMethod);

}

#pragma mark - Key-Value Coding

- (id)extendedValueForKeyPath:(NSString *)keyPath {

    /* NOTICE: +load exchanged this method with valueForKey: !!!
     Thus calling extendedValueForKeyPath: now means we're calling the old valueForKeyPath: method and vice versa.
    */

    if ([keyPath length] > 0 && [keyPath characterAtIndex:0] == '(') {

        if ([self isKindOfClass:[NSArray class]]) {

            NSMutableArray *results = [[NSMutableArray alloc] init];
            for (id obj in (NSArray *)self)
                [results addObject:[obj valueForKeyPath:keyPath]];
            return [results copy];

        } else {

            NSRegularExpression *regExp = [NSRegularExpression regularExpressionWithPattern:@"[A-Za-z0-9_\\.]*"
                                                                    options:0
                                                                                  error:nil];

            NSMutableString *mKeyPath = [keyPath mutableCopy];

            [regExp enumerateMatchesInString:mKeyPath options:0 range:NSMakeRange(0, [keyPath length]) usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {

                NSRange range = [[result resultByAdjustingRangesWithOffset:[mKeyPath length] - [keyPath length]] range];
                if (range.length > 0) {

                    NSString *key = [mKeyPath substringWithRange:range];
                    NSString *val = [[self extendedValueForKeyPath:key] stringValue];

                    [mKeyPath replaceCharactersInRange:range withString:val];

                }

            }];

            NSExpression *expression = [NSExpression expressionWithFormat:mKeyPath];
            return [expression expressionValueWithObject:nil context:nil];

        }

    } else
        return [self extendedValueForKeyPath:keyPath];

}

@end 
```

# canvas - KineticJS Z-Index 不适用

> ID：14436008
> 
> 赞同：4
> 
> 时间：2013-01-21T09:49:12.230
> 
> 标签：canvas, z-index, kineticjs

嗨 stackoverflow 社区

我正在尝试使用 KineticJS 对图像进行分层。不幸的是，它不起作用。就像您在代码片段中看到的那样，我正在设置两张图片的 Z-Index，当我记录它们时，它们的顺序仍然相同。可以看到功能`startClouds(field)`。此函数创建 Z-Index 为 2 的云，这实际上是有效的。我从一个小时开始就试图解决这个问题，我真的不知道为什么它不起作用。

```
var title = new Image();
var title_p = new Image();
title.src = '/test/images/title_bg.png';
title_p.src = '/test/images/title_pic.png';

title.onload = function(){
    var title_background = new Kinetic.Image({
        x: 0,
        y: 0,
        image: title
    });
    field.add(title_background);
    title_background.setZIndex(1);
    field.draw();
    console.log('Z-Index of background: '+title_background.getZIndex());

    var title_pic = new Kinetic.Image({
        x: 0,
        y: 0,
        image: title_p
    });
    field.add(title_pic);
    title_pic.setZIndex(3);
    field.draw();
    console.log('Z-Index of Title: '+title_pic.getZIndex());

    startClouds(field);

    var start = new Kinetic.Text({
        x: 240,
        y: 160,
        text: '[Press Any Key to Start]',
        fontSize: 22,
        fontFamily: 'Calibri',
        fill: 'white'
    });
    field.add(start);
    field.draw();
    stage.add(field);
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:52:37.813

在 kineticjs 中，每次向图层添加新图像时，都会自动设置索引。索引从 0 开始

首先，像这样重新排序您的代码：

```
 //create objects first
 var title_background = new Kinetic.Image({
    x: 0,
    y: 0,
    image: title
 });
 var title_pic = new Kinetic.Image({
    x: 0,
    y: 0,
    image: title_p
 });
 var start = new Kinetic.Text({
    x: 240,
    y: 160,
    text: '[Press Any Key to Start]',
    fontSize: 22,
    fontFamily: 'Calibri',
    fill: 'white'
});
// now add objects to layer
field.add(title_background);   // z-index of 0
field.add(title_pic);          // z-index of 1
field.add(start);              // z-index of 2

startClouds(field);   // anything created by startClouds() is going to have z-index > 2 
```

如果你想在 z-indexes 周围移动东西，尽量避免

```
 .setZIndex()  //note: use this AFTER all the objects have been added to the layer 
```

功能和用途

```
 .moveToTop() and .moveToBottom() //this way the movement is relative rather than specific. 
```

如果您需要更多帮助，请将一些功能代码粘贴到 jsfiddle 中，我可以为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T11:18:19.583

是否有可能修复有助于解决此问题的 jsFiddle？我真的很想看到它，因为我对 Kinetic z-Index 感到很困惑。这里接受的答案充满了断开的链接，因为像[http://www.wallerdeknaller.ch/test/td_functions.js](http://www.wallerdeknaller.ch/test/td_functions.js)这样的文件不再存在。

我认为如果 jsFiddle 是完全自我封装的，并且所有必要的代码和 css 都包含在其中，那么它的效果最好。或者至少，从 CDN 加载库。如果您不想为后代修复小提琴的麻烦，如果您将文件发送给我，我很乐意这样做。

我知道这没有遵循 SO 回答指南，我只是没有 50 名声望来评论正确答案。对于那个很抱歉！

# android - 从 Json 读取，保存到 DB 并再次取回需要很长时间

> ID：14436011
> 
> 赞同：0
> 
> 时间：2013-01-21T09:49:25.410
> 
> 标签：android, sqlite

我需要从 assets 文件夹中读取一个文本文件（稍后它将被从 web 服务中获取 json 数据所取代），其中包含 json 数据，然后将其保存到 DB，然后从 DB 中取回并显示为 listview。我的以下代码很慢，大约需要 10 秒才能显示一个包含 270 条记录的表。我怎样才能使它快速。

这是从文件中获取 json 数据并存储在 DB 中的函数

```
try {

    InputStream is=getActivity().getAssets().open("Programme.txt");

            int size = is.available();
            byte[] buffer = new byte[size];
            is.read(buffer);
            is.close();
            String bufferString = new String(buffer);
            System.out.println("the output is"+bufferString);

            //convert string to JSONArray
            JSONArray jArray = new JSONArray(bufferString);
            if(bufferString.isEmpty())
            {

            }
            else
            {
                db.deleteAllCourseCategoryByTypeDB(type);
            }

            System.out.println("All the data"+bufferString);
            boolean eventFlag = false;

            for (int i = 0; i < jArray.length(); i++)

            {

                System.out.println("this is where I am "+i);
                JSONObject json_data = jArray.getJSONObject(i);
    String entityNum =      (json_data.getString("entityNum"));
    String entityDescr = (json_data.getString("entityDescr"));
    String courseCount = (json_data.getString("courseCount"));
    System.out.println("the entityNum is"+entityNum);

    CourseCategoryDB nbnt = new CourseCategoryDB();

        nbnt.setcourse_cat_id(entityNum);
        nbnt.setcourse_cat_type(type);
    nbnt.setcourse_number(courseCount);
    nbnt.setcoursecat_name(entityDescr);
    db.addcoursecategory(nbnt);

    }

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

现在，一旦我将所有内容都放入数据库中，我就会检索它:(

```
public List<CourseDB> getAllCourseDBByTypes(String key_id,String type) {
    List<CourseDB> NBList = new ArrayList<CourseDB>();

    String selectQuery = "SELECT  * FROM " + TABLE_COURSE + " WHERE "
            + CATEGORY_ID_FOR + "=?";

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, new String[] { key_id });

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            CourseDB NB = new CourseDB();
            NB.setcourse_id(cursor.getInt(0));
            NB.setcat_foreign_id(cursor.getString(4));
            NB.setcourse_crs(cursor.getString(3));
            NB.setcategory_course_type(cursor.getString(2));
            // NB.setName(cursor.getString());
            NB.setcourse_name(cursor.getString(1));
    // Adding contact to list
            NBList.add(NB);
        } while (cursor.moveToNext());
    }
    cursor.close();
    db.close();
    System.out.println("the total values in list"+NBList.size());
    return NBList;
} 
```

评论后我将代码更改为此。

```
 for (int j = 0; j < jArray.length(); j++) {
                    //

                    JSONObject json_data = jArray.getJSONObject(j);
                    String crsCd = (json_data.getString("crsCd"));
                    System.out.println("value of CRSCD and j"+crsCd+""+j);
                    String crsTitle = (json_data
                            .getString("crsTitle"));
                    String courseType = type;
                    String foreign_category_id=id_notebook2;

                    CourseDB nbnt = new CourseDB();

                    nbnt.setcourse_crs(crsCd);
                    nbnt.setcategory_course_type(type);
                    nbnt.setcourse_name(crsTitle);
                    nbnt.setcat_foreign_id(foreign_category_id);

                    final long startTime = System.currentTimeMillis();

                    db.beginTransaction();
                    try
                    {
                    db.addcourseByType(nbnt);

                        db.setTransactionSuccessful();

                        //Error in between database transaction 

                    }
                      finally {
                          db.endTransaction();
                      }

                } 
```

尽管如此，400 条记录同样需要 16 秒。

阿斯米塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:43:46.480

我认为您可以通过使用适配器（例如[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)）在列表中插入您的光标来加快这一速度。另外，我认为数据库中的更新行比删除和插入要好。

# javascript - 如何使用 Highcharts 显示具有较小值的烛台？

> ID：14436013
> 
> 赞同：3
> 
> 时间：2013-01-21T09:49:28.850
> 
> 标签：javascript, highcharts, candlestick-chart

我正在尝试显示具有较小值的烛台，但在图表上看不到蜡烛。

这是一个例子：

HTML：

```
<div class="graphs">
        <div id="chartEURUSDContainer" style="height: 331px; min-width: 611px"></div>
</div>

<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js" type="text/javascript"></script>
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script> 
```

Javascript：

```
 $(function () {

        var jsonData = [{"LastModification":"04:18:45","Symbol":"EURUSD","Bid":"1.33132","Ask":"1.33157","High":"1.33336","Low":"1.33007","Direction":"0","InserTime":"\/Date(1358760060933)\/"},{"LastModification":"04:20:05","Symbol":"EURUSD","Bid":"1.33151","Ask":"1.33174","High":"1.33336","Low":"1.33007","Direction":"0","InserTime":"\/Date(1358760140625)\/"},{"LastModification":"04:21:25","Symbol":"EURUSD","Bid":"1.3312","Ask":"1.33144","High":"1.33336","Low":"1.33007","Direction":"1","InserTime":"\/Date(1358760220731)\/"},{"LastModification":"04:22:48","Symbol":"EURUSD","Bid":"1.33115","Ask":"1.33141","High":"1.33336","Low":"1.33007","Direction":"-1","InserTime":"\/Date(1358760300387)\/"},{"LastModification":"04:23:48","Symbol":"EURUSD","Bid":"1.33107","Ask":"1.33132","High":"1.33336","Low":"1.33007","Direction":"-1","InserTime":"\/Date(1358760361033)\/"},{"LastModification":"04:25:08","Symbol":"EURUSD","Bid":"1.33139","Ask":"1.33164","High":"1.33336","Low":"1.33007","Direction":"0","InserTime":"\/Date(1358760440193)\/"},{"LastModification":"04:26:28","Symbol":"EURUSD","Bid":"1.33202","Ask":"1.33222","High":"1.33336","Low":"1.33007","Direction":"1","InserTime":"\/Date(1358760520037)\/"},{"LastModification":"04:27:48","Symbol":"EURUSD","Bid":"1.33212","Ask":"1.33238","High":"1.33336","Low":"1.33007","Direction":"-1","InserTime":"\/Date(1358760600163)\/"}]

        var data = [];

        fillData();     

        function fillData() {
            for (i = 0; i < jsonData.length; i++) {
                data.push([
                    parseInt(jsonData[i].InserTime.substr(6)),
                    jsonData[i].Ask ,
                    jsonData[i].High ,
                    jsonData[i].Low ,
                    jsonData[i].Bid  
                    ]);
            }
            CreateChart();
        }

        function CreateChart() {         
        // create the chart
        chart = new Highcharts.StockChart({
            chart: {
                renderTo: 'chartEURUSDContainer',
                type: 'candlestick',
                marginRight: 10,                
            },
            rangeSelector : {
                enabled: false
            },      
            scrollbar : {
                enabled: false
            },            
            navigator : {
                enabled: false
            },
            series : [{
                type : 'candlestick',
                color: '#00FF00',
                name : 'Currency Rates',
                data : data,

            }]
        });
        }
    }); 
```

[JS Fiddle 上的实时示例](http://jsfiddle.net/Jj3Ws/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:12:28.717

您应该使用 parseFloat() 将字符串更改为 Ask / High 值的数字。

```
data.push([
         parseInt(jsonData[i].InserTime.substr(6)),
         parseFloat(jsonData[i].Ask),
         parseFloat(jsonData[i].High),
         parseFloat(jsonData[i].Low),
         parseFloat(jsonData[i].Bid)]); 
```

这是一个完整的例子：

HTML：

```
<div class="graphs">
    <div id="chartEURUSDContainer" style="height: 331px; min-width: 611px"></div>
</div>
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"
type="text/javascript"></script>
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script> 
```

Javascript：

```
 $(function () {

     var jsonData = [{
         "LastModification": "04:18:45",
         "Symbol": "EURUSD",
         "Bid": "1.33132",
         "Ask": "1.33157",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "0",
         "InserTime": "\/Date(1358760060933)\/"
     }, {
         "LastModification": "04:20:05",
         "Symbol": "EURUSD",
         "Bid": "1.33151",
         "Ask": "1.33174",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "0",
         "InserTime": "\/Date(1358760140625)\/"
     }, {
         "LastModification": "04:21:25",
         "Symbol": "EURUSD",
         "Bid": "1.3312",
         "Ask": "1.33144",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "1",
         "InserTime": "\/Date(1358760220731)\/"
     }, {
         "LastModification": "04:22:48",
         "Symbol": "EURUSD",
         "Bid": "1.33115",
         "Ask": "1.33141",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "-1",
         "InserTime": "\/Date(1358760300387)\/"
     }, {
         "LastModification": "04:23:48",
         "Symbol": "EURUSD",
         "Bid": "1.33107",
         "Ask": "1.33132",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "-1",
         "InserTime": "\/Date(1358760361033)\/"
     }, {
         "LastModification": "04:25:08",
         "Symbol": "EURUSD",
         "Bid": "1.33139",
         "Ask": "1.33164",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "0",
         "InserTime": "\/Date(1358760440193)\/"
     }, {
         "LastModification": "04:26:28",
         "Symbol": "EURUSD",
         "Bid": "1.33202",
         "Ask": "1.33222",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "1",
         "InserTime": "\/Date(1358760520037)\/"
     }, {
         "LastModification": "04:27:48",
         "Symbol": "EURUSD",
         "Bid": "1.33212",
         "Ask": "1.33238",
         "High": "1.33336",
         "Low": "1.33007",
         "Direction": "-1",
         "InserTime": "\/Date(1358760600163)\/"
     }]

     var data = [];

     fillData();

     function fillData() {
         for (i = 0; i < jsonData.length; i++) {
             data.push([
             parseInt(jsonData[i].InserTime.substr(6)),
             parseFloat(jsonData[i].Ask),
             parseFloat(jsonData[i].High),
             parseFloat(jsonData[i].Low),
             parseFloat(jsonData[i].Bid)]);
 }
 CreateChart();
 }

 function CreateChart() {
     // create the chart
     chart = new Highcharts.StockChart({
         chart: {
             renderTo: 'chartEURUSDContainer',
             type: 'candlestick',
             marginRight: 10,
         },
         rangeSelector: {
             enabled: false
         },
         scrollbar: {
             enabled: false
         },
         navigator: {
             enabled: false
         },
         series: [{
             type: 'candlestick',
             color: '#00FF00',
             name: 'Currency Rates',
             data: data,

         }]
     });
 }
 }); 
```

[JS Fiddle 上的演示](http://jsfiddle.net/Jj3Ws/5/)。

# android - android emulator 2.3.3 - 无法通过 adb 启动联系人应用程序

> ID：14436021
> 
> 赞同：2
> 
> 时间：2013-01-21T09:50:25.417
> 
> 标签：android, adb, activity-manager

这样做 `adb shell am start -a android.intent.action.start -t vnd.android.cursor.dir/contact`会导致：

```
Starting: Intent { act=android.intent.action.start typ=vnd.android.cursor.dir/contact }
Error: Activity not started, unable to resolve Intent { act=android.intent.action.start typ=vnd.android.cursor.dir/contact flg=0x10000000 } 
```

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T00:09:00.513

有意图选项。应用程序正在使用意图过滤器。您可以使用意图过滤器或直接使用名称启动应用程序。

```
adb shell am start -n  vnd.android.cursor.dir/contact 
```

包名应该是 vnd.android.cursor.dir 并且目标活动应该是联系。

-n 使用包名前缀指定组件名以创建显式意图，例如“com.example.app/.ExampleActivity”。

请查看此链接了解更多详情：http: [//developer.android.com/tools/help/adb.html#IntentSpec](http://developer.android.com/tools/help/adb.html#IntentSpec)

# .net - 将 C# 对象序列化为 XML - 最快的方法？

> ID：14436025
> 
> 赞同：2
> 
> 时间：2013-01-21T09:50:32.393
> 
> 标签：.net, xml, serialization, xml-serialization

我有一个将 c# 对象序列化为 xml 文件的应用程序。我目前正在使用.Net XmlSerializer。

我遇到的问题是，我需要序列化约 8000 个主节点（每次 4-10 个子节点），目前我需要 15-20 分钟才能将它们全部序列化。

我必须保持相同的 XML 输出，因为文件是由另一个程序而不是我的程序读取的，我不能让它们改变读取文件的方式。

我进行了一些搜索，发现了很多比较，但它们都涉及使用具有二进制序列化的 protobuf-net。

所以我的问题是：我怎样才能改善这个序列化时间？另一个序列化器？向我的模型添加更多属性（目前我只有 XmlName，列表相同）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:55:12.337

看看下面的链接，有一些技巧可以提高 XML 序列化性能

[http://msdn.microsoft.com/en-us/library/ff650685.aspx](http://msdn.microsoft.com/en-us/library/ff650685.aspx)

如果您可以更改组件的逻辑，我将使用数据库来存储如此大的 XML，因为尚未进行序列化以存储非常大的 XML 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-05T23:28:46.613

由于瓶颈可能是大字符串处理，您可能需要考虑直接写入 FileStream 的手写代码。如果您喜欢冒险，您还可以尝试为[CGbR Project](https://github.com/Toxantron/CGbR)生成编写 IGenerator 的代码。但这仅在您有许多不同的课程时才有意义。

# iphone - 将 xib 从一个项目复制到另一个项目

> ID：14436030
> 
> 赞同：2
> 
> 时间：2013-01-21T09:50:52.323
> 
> 标签：iphone, ios, ipad, xib, iboutlet

我需要将 xib 文件从一个项目复制到另一个项目。这可能是基本的事情，但我是 xib 文件使用的新手。

我从 project-1 手动复制了 xxx.h、xxx.m 和 xxx.xib 并保存在一个文件夹中并将它们包含在另一个项目中作为“右键单击 Project-2 文件夹 -> 将文件添加到 Project-2”选项.

**(1)**我在复制后丢失了一些 IBOutlet 连接

**(2)** Xib 不允许有新的 IBOutlet 变量。

然后我从原始位置（Project-1 文件夹）复制了文件，然后

**(3)**如果我创建新的 IBOutlet 连接，如果我访问引用变量，我将得到 nil 值。

有人可以帮助我了解如何移动/复制 xib 文件及其来源的基础知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:01:45.693

在您的复制中，我感觉可能有两个问题。

1）当您复制检查选项时：“将所选项目复制到目标文件夹”。参考截图！![在此处输入图像描述](../Images/deafe38d8111c82de57ad1bfa1c148fa.png)

2) 同样在您的 .xib 文件中选择 File's owner --> 转到右上角的 Identity Inspector 并为该 xib 选择合适的类。当您独立添加 xib 时，您必须像这样手动设置它的类。

![在此处输入图像描述](../Images/5aab0eaa453641846ac29d406afa406e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:03:37.177

可能会对您有所帮助....单击您的 .xib 文件并添加类名。像这样![在此处输入图像描述](../Images/9a539a11ee61ca52913e3a9765512b2d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T10:01:25.777

复制时，您需要设置类和出口连接。

跟着这些步骤：

1.  **复制xib**
2.  **在其文件所有者中添加您的 xib 的类名**

![班级](../Images/50fd3cede64c5b7609efacdbca20fb32.png)

3.  **添加网点**

![奥特莱斯](../Images/b1a2b7cef581375b74ec9945c16051dd.png)

# java - 为什么 Java 7 Files.walkFileTree 在远程驱动器上遇到 tar 文件时抛出异常

> ID：14436032
> 
> 赞同：18
> 
> 时间：2013-01-21T09:50:58.397
> 
> 标签：java, java-7, tar, nio2

我`Files.WalkFileTree()`用来导航文件夹和计算音频文件，但是当它遇到一个 tar 文件时出现问题，它似乎将它视为一个实际的文件夹，我希望它只是跳过它。

我看不到任何可以让我控制此行为的选项

代码：

```
package com.jthink.songkong.fileloader;

import com.jthink.songkong.cmdline.SongKong;
import com.jthink.songkong.ui.MainWindow;

import java.nio.file.*;
import java.nio.file.attribute.BasicFileAttributes;
import java.util.concurrent.Callable;
import java.util.logging.Level;

/**
 * Count the number of files that can be loaded, for information purposes only
 */
public class CountFilesinFolder implements Callable<Boolean> {
    public static class CountFiles
            extends SimpleFileVisitor<Path> {
        private int fileCount = 0;
        private final PathMatcher matcher;

        CountFiles(String pattern) {
            matcher =
                    FileSystems.getDefault()
                            .getPathMatcher("regex:" + pattern);
        }

        /**
         * Find Music file
         *
         * @param file
         * @param attr
         * @return
         */
        @Override
        public FileVisitResult visitFile(Path file,
                                         BasicFileAttributes attr) {
            Path name = file.getFileName();
            if (name != null && matcher.matches(name)) {
                fileCount++;
            }
            return FileVisitResult.CONTINUE;
        }

        public int getFileCount() {
            return fileCount;
        }
    }

    private Path scanDir;
    public CountFilesinFolder(Path scanDir) {
        this.scanDir = scanDir;
    }

    public Boolean call() {
        CountFiles countFiles = null;
        try {
            countFiles = new CountFiles("^(?!._).*[.](?:mp3|mp4|m4p|m4b|m4a|ogg|flac|wma)$");
            Files.walkFileTree(scanDir, countFiles);
        }
        catch (Exception e) {
            MainWindow.logger.log(Level.SEVERE, "Unable to find file for deriving base folder", e);
        }
        MainWindow.logger.severe("Music File Count:"+countFiles.getFileCount());
        SongKong.setMaxProgress(countFiles.getFileCount());
        return true;
    }
} 
```

给出了这个堆栈跟踪

```
java.nio.file.NoSuchFileException: Z:\Scratch\fred.tar
    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
    at sun.nio.fs.WindowsDirectoryStream.<init>(WindowsDirectoryStream.java:86)
    at sun.nio.fs.WindowsFileSystemProvider.newDirectoryStream(WindowsFileSystemProvider.java:526)
    at java.nio.file.Files.newDirectoryStream(Files.java:411)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:179)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:69)
    at java.nio.file.Files.walkFileTree(Files.java:2591)
    at java.nio.file.Files.walkFileTree(Files.java:2624)
    at com.jthink.songkong.fileloader.CountFilesinFolder.call(CountFilesinFolder.java:68)
    at com.jthink.songkong.fileloader.CountFilesinFolder.call(CountFilesinFolder.java:15)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

但那是一个远程驱动器（nas 驱动器），我在本地驱动器上没有这样的错误

**编辑** 根据我认为有效的以下答案实施了以下

```
 @Override
            public FileVisitResult preVisitDirectory(Path dir, 
BasicFileAttributes attrs)
                    throws IOException {
                if(dir.endsWith(".tar"))
                {
                    return FileVisitResult.SKIP_SUBTREE;
                }
                return super.preVisitDirectory(dir, attrs);
            } 
```

但是我的测试有问题，它实际上不起作用，因为 FileTreeWalker 中失败的代码在 previsit 方法之前被调用

```
try {
            DirectoryStream<Path> stream = null;
            FileVisitResult result;

            // open the directory
            try {
                stream = Files.newDirectoryStream(file);
            } catch (IOException x) {
                return visitor.visitFileFailed(file, x);
            } catch (SecurityException x) {
                // ignore, as per spec
                return FileVisitResult.CONTINUE;
            }

            // the exception notified to the postVisitDirectory method
            IOException ioe = null;

            // invoke preVisitDirectory and then visit each entry
            try {
                result = visitor.preVisitDirectory(file, attrs);
                if (result != FileVisitResult.CONTINUE) {
                    return result;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:50:03.457

手头问题的解决方法：

但是实现一个 visitFileFailed ，你应该没问题。

```
public class MyFileVisitor extends SimpleFileVisitor<Path> {
    @Override
    public FileVisitResult visitFileFailed(Path file, IOException exc) throws IOException {
        if (file.toString().endsWith(".tar")) {
            return FileVisitResult.CONTINUE;
        }
        return super.visitFileFailed(file, exc);
    }
} 
```

更新：如果我们仔细观察，我们可以看到[walkFileTree](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/nio/file/FileTreeWalker.java#105)使用[Files.readAttributes](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/nio/file/Files.java#Files.readAttributes%28java.nio.file.Path,java.lang.Class,java.nio.file.LinkOption%5B%5D%29) 转向当前的提供者：[WindowsFileSystemProvider.readAttributes](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/nio/fs/WindowsFileSystemProvider.java?av=f#178)来确定路径是否是目录。

正如评论中提到的那样，我也不认为错误出在 Java 实现中，而是返回错误属性的[OS-native-call](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/nio/fs/WindowsFileAttributes.java#WindowsFileAttributes.get%28sun.nio.fs.WindowsPath,boolean%29)

如果您想解决此问题，一种选择是实现您自己的 FileSystem，它透明地包装 WindowsFileSystem 实现，除了 readAttributes 返回 .tar-paths 作为文件而不是 dir。

# ruby - 安装 ruby -serialport gem 时出错

> ID：14436035
> 
> 赞同：0
> 
> 时间：2013-01-21T09:51:08.137
> 
> 标签：ruby, ubuntu, gem, serial-port

我正在使用`rvm`版本：

`rvm 1.17.9 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]`

红宝石版本：

`ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-linux]`

安装时出现错误 `gem install ruby-serialport`

错误是：`Failed to build gem native extension.`

更多详情： http: [//paste.ubuntu.com/1555079/](http://paste.ubuntu.com/1555079/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:02:33.087

github 上有 gem 的更新版本：
[https ://github.com/hparra/ruby-serialport](https://github.com/hparra/ruby-serialport)

也可在 RubyGems 上获得：
[http ://rubygems.org/gems/serialport](http://rubygems.org/gems/serialport)

您安装`ruby-serialport`的是 v0.7.0，更新后的`serialport`gem 是 v1.1.0，所以您可能想尝试一下：

```
gem install serialport 
```

# windows-phone-7 - 如何以编程方式为 ApplicationBarMenuItem 设置文本 wp7

> ID：14436038
> 
> 赞同：0
> 
> 时间：2013-01-21T09:51:14.247
> 
> 标签：windows-phone-7

我已经从 xaml 创建了 ApplicationBarMenuItem，但我想以编程方式设置菜单项文本。所以我这样做如下：

```
<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">           
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem x:Name="menuDelete" Click="Delete_Click"/>
                <shell:ApplicationBarMenuItem x:Name="menuEditView" Click="Edit_Click"/>
                <shell:ApplicationBarMenuItem x:Name="menuFilter" Click="Filter_Click"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar> 
```

设置我正在做的文本：

menuDelete.Text = "删除";

但它给出了空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:37:03.713

这也可以正常工作：

```
((ApplicationBarMenuItem)ApplicationBar.MenuItems[0]).Text = "text"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:53:36.183

我找到了这个问题的解决方案。

对于第一个按钮（menuDelete），我喜欢下面，它对我有用。

```
ApplicationBarMenuItem delete = ApplicationBar.MenuItems[0] as ApplicationBarMenuItem;

if (delete != null)
            {
                delete.Text = MainStrin.delete_txt;
            } 
```

# c# - 使用 C# 对嵌套字典进行排序

> ID：14436040
> 
> 赞同：0
> 
> 时间：2013-01-21T09:51:19.117
> 
> 标签：c#

我有一个字典对象，其类型如下。

```
Dictionary<string, Dictionary<Roles, Dictionary<Period, List<Product>>>> 
```

以“准备者”和“批准者”为项目的角色（是一个枚举）。同样 Period 是另一个具有“Ahead”和“Past”项目的枚举。

该列表包含各种产品的列表。

我在字典中有以下层次结构中的项目。

```
"Sachin" --> Roles.Preparer --> Period.Past --> Products
"Sachin" --> Roles.Approver --> Period.Ahead --> Products
"Sachin" --> Roles.Approver --> Period.Ahead --> Products
"Sachin" --> Roles.Approver --> Period.Past --> Products 
```

我将不得不按以下顺序对字典进行排序。

```
"Sachin" --> Roles.Preparer --> Period.Ahead --> Products
"Sachin" --> Roles.Approver --> Period.Ahead --> Products
"Sachin" --> Roles.Preparer --> Period.Past --> Products
"Sachin" --> Roles.Approver --> Period.Past --> Products 
```

这种结构是必需的，因为我必须遍历每个项目并且应该将其添加为邮件的一部分。

实际代码是这样的。

```
`using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Basics
{
    class Product
    {
        public string Name { get; set; }
        public int Days { get; set; }

    }

    enum Period
    {
        Ahead,
        Past
    }

    enum Roles
    {
        Preparer,
        Approver
    }

    class Program
    {
        static void Main(string[] args)
        {
            DictionaryProcessing(new string[] { "sriram123@yahoo.com", "abhishek321@yahoo.com" });
        }

        private static void DictionaryProcessing(string[] emailIDs)
        {
            List<Product> products = new List<Product>();

            Product product1 = new Product() { Name = "Pencil", Days = 14 };
            Product product2 = new Product() { Name = "Eraser", Days = 2 };
            Product product3 = new Product() { Name = "Geometry Box", Days = 31 };

            products.Add(product1);
            products.Add(product2);
            products.Add(product3);

            Dictionary<string, Dictionary<Roles, Dictionary<Period, List<Product>>>> dict = new Dictionary<string, Dictionary<Roles, Dictionary<Period, List<Product>>>>();

            ///

            foreach (string emailID in emailIDs)
            {

                if (!dict.ContainsKey(emailID))
                    dict.Add(emailID, new Dictionary<Roles, Dictionary<Period, List<Product>>>());

                if (!dict[emailID].ContainsKey(Roles.Preparer))
                    dict[emailID].Add(Roles.Preparer, new Dictionary<Period, List<Product>>());

                if (!dict[emailID][Roles.Preparer].ContainsKey(Period.Ahead))
                    dict[emailID][Roles.Preparer].Add(Period.Ahead, new List<Product>());

                if (!dict[emailID][Roles.Preparer].ContainsKey(Period.Past))
                    dict[emailID][Roles.Preparer].Add(Period.Past, new List<Product>());

                ///

                if (!dict[emailID].ContainsKey(Roles.Approver))
                    dict[emailID].Add(Roles.Approver, new Dictionary<Period, List<Product>>());

                if (!dict[emailID][Roles.Approver].ContainsKey(Period.Ahead))
                    dict[emailID][Roles.Approver].Add(Period.Ahead, new List<Product>());

                if (!dict[emailID][Roles.Approver].ContainsKey(Period.Past))
                    dict[emailID][Roles.Approver].Add(Period.Past, new List<Product>());

                for (int i = 0; i < products.Count; i++)
                {
                    dict[emailID][Roles.Preparer][Period.Ahead].Add(products[i]);
                    dict[emailID][Roles.Preparer][Period.Past].Add(products[i]);
                    dict[emailID][Roles.Approver][Period.Past].Add(products[i]);
                    dict[emailID][Roles.Approver][Period.Ahead].Add(products[i]);
                }

            }
        }
    }
}
` 
```

如何按此顺序对其进行排序？**我仅限于使用 .NET 2.0 框架。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:12:33.207

字典无法排序。它们不是列表。此外：

您的结构很糟糕 - a`Dictionary`不能多次包含相同的密钥，因此您提供的示例甚至无法创建：

```
"Sachin" --> Roles.Preparer --> Period.Past --> Products
"Sachin" --> Roles.Approver --> Period.Ahead --> Products
"Sachin" --> Roles.Approver --> Period.Ahead --> Products
"Sachin" --> Roles.Approver --> Period.Past --> Products 
```

“外部”字典不能多次包含键“Sachin”。“内部字典”不能`Approver`多次包含角色，并且在最后一级，`Period.Past/Ahead`不能多次作为键。

`List<T>`相反，将您的结构更改`T`为合适的数据结构，或者，正如其他人已经指出的那样，现在更改为类型化的数据集以将您的结构视为表格。

**编辑**
我现在正在编辑我的答案，只是为了确保我们都明白每个人都在说什么。

我是说，字典不可能有两次相同的键。因此，根据此规则，您的案件必须减少到以下情况：

```
"Sachin" --> Roles.Preparer --> Period.Past --> Products
"Sachin" --> Roles.Approver --> Period.Ahead --> Products
"Sachin" --> Roles.Approver --> Period.Past --> Products 
```

既然我们正在谈论适用于规则的东西，我们可以问“如何排序？”。答案是：你不能。根据定义，字典是一种无序结构。但是，您可以确保按特定顺序检索值。如果您想对产品进行“排序”，使`Past`产品始终排在`Ahead`产品之前，请确保先使用相应的密钥。

**编辑 2**

刚刚意识到这是基于复制/粘贴错误。您正在谈论的数据应为：

```
"Sachin" --> Roles.Preparer --> Period.Ahead --> Products
"Sachin" --> Roles.Preparer --> Period.Past --> Products
"Sachin" --> Roles.Approver --> Period.Past --> Products
"Sachin" --> Roles.Approver --> Period.Ahead --> Products 
```

您说您正在使用此代码添加项目：

```
for (int i = 0; i < products.Count; i++)
{
    dict[emailID][Roles.Preparer][Period.Ahead].Add(products[i]);
    dict[emailID][Roles.Preparer][Period.Past].Add(products[i]);
    dict[emailID][Roles.Approver][Period.Past].Add(products[i]);
    dict[emailID][Roles.Approver][Period.Ahead].Add(products[i]);
} 
```

然后您可以使用类似的代码来检索项目。给定一个电子邮件 ID，以下内容将为您提供按“准备者在批准者之前”和“过去之前在前面”排序的项目列表：

```
List<Product> productsForEMailID = new List<Product>();

productsForEMailID.AddRange(dict[emailID][Roles.Preparer][Period.Past]);
productsForEMailID.AddRange(dict[emailID][Roles.Approver][Period.Past]);
productsForEMailID.AddRange(dict[emailID][Roles.Preparer][Period.Ahead]);
productsForEMailID.AddRange(dict[emailID][Roles.Approver][Period.Ahead]); 
```

产品列表是“排序的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:38:17.287

您可以使用另一种更适合此问题的密钥。如果你想快速破解`SortedDictionary<string, List<Product>>`：

```
"Sachin#0#0" --> Products
"Sachin#0#1" --> Products
... 
```

在这里，我假设“#”字符不能出现在名称中。第一个数字表示`Roles`为`Preparer = 0`, `Approver = 1`，第二个数字表示`Period`为`Ahead = 0`, `Past = 1`。

或者 - 如果您需要一个更强大的解决方案，我会做类似的事情：

```
public struct Key : IComparable<Key>
{
    public String Name;
    public Roles Role;
    public Period Period;

    public int CompareTo(Key other)
    {
        var c = String.Compare(Name, other.Name, StringComparison.Ordinal);
        if (c != 0) return c;
        c = Role.CompareTo(other.Role);
        if (c != 0) return c;
        return Period.CompareTo(other.Period);
    }
} 
```

...并使用`SortedDictionary<Key, List<Product>>`.

# server2go - “找不到指定的文件”错误

> ID：14436044
> 
> 赞同：0
> 
> 时间：2013-01-21T09:51:33.450
> 
> 标签：server2go

当我尝试运行 server2Go.exe 时，我得到“系统找不到指定的文件”。错误。它不运行。

它在寻找哪个文件？我想它是 iexplorer.exe 但我想确定一下，我想知道它在哪里试图找到这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:24:51.670

确保运行它的路径中没有空格。我注意到如果路径是 C:/my dir/my folder/ 空间会导致这个问题。用 C:/myfolder/ 试试看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:30:42.550

我已经很长时间没有使用 Windows，但据我所知，FileMon 实用程序应该可以帮助您。[http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T15:52:16.230

问题是需要更改启动浏览器。默认情况下，Server2Go 会尝试启动 Internet Explorer（我们很多人都不使用）。要更改此设置，需要将 pms_config.ini 文件的“BrowserType”行更改为您要使用的任何浏览器。

# delphi - “包缓存”注册表项的用途是什么？

> ID：14436047
> 
> 赞同：3
> 
> 时间：2013-01-21T09:51:43.230
> 
> 标签：delphi, registry, package

什么是“缓存”包？

我可以删除这个注册表分支中的条目，而不会给我的 Delphi 项目带来麻烦吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-09-26T11:43:44.880

我试图找出为什么我的 Delphi IDE 需要很长时间才能打开。我知道它与我们的组件有关，当 IDE 开始加载时它开始变慢。使用 procmon，我看到 IDE 读取包缓存注册表并尝试在其中找到 Report 和DetailedReport 键，但没有找到。我在上面看到了[这个](https://community.embarcadero.com/blogs/entry/demandloaded-component-packages-in-delphi-2005-1833)：

> 您还可以通过转至 HKCUSoftwareBorlandBDS3.0Package Cache 并添加以下一个或两个值来启用全局报告：Report=1 或DetailedReport=1。它们分别对应于 EnableDemandLoadReport(False) 和 EnableDemandLoadReport(True)。很酷的是，您可以以这种方式启用报告，并查看 IDE 加载的*所有*设计时包的详细报告，包括所有 Borland 提供的包。

理论上，当启用DetailedReport时，它应该在IDE加载组件时创建一个扩展名为.rpt的报告文件，描述为什么它不符合*延迟加载*的资格。也许这在 Delphi Tokyo 中不起作用，因为它是从 Delphi 2005 发布的，但即便如此，IDE 还是读取了这个注册表。

[![程序](../Images/2c26268a5473c702599d31141ecfce6d.png)](https://i.stack.imgur.com/pfY62.png)

默认情况下，此键不存在，我创建了它。之前，procmon 在 Result 列中显示 NAME NOT FOUND。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:22:22.690

At best - it would be re-created as you start Delphi IDE next time.

At worst - 3rd-party components would work no more.

[http://andy.jgknet.de/blog/2012/08/ide-fix-pack-5-0-released/](http://andy.jgknet.de/blog/2012/08/ide-fix-pack-5-0-released/)

# tsql - T-SQL 中的复杂聚合

> ID：14436049
> 
> 赞同：0
> 
> 时间：2013-01-21T09:51:49.370
> 
> 标签：tsql

例如，我在 MS SQL Server 中有一个表：

```
Feature, Option1, Option2
-------------------------
Agent, Yes, No
Agent, No, No
Console, No, Yes,
Console, Yes, Yes 
```

我需要编写一个返回的查询：

```
Feature, Option1 Yes Count, Option2 Yes Count
---------------------------------
Agent, 1, 0
Console, 1, 2 
```

我应该使用什么查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:57:49.390

```
select Feature,
       count(nullif(Option1,'no')) as 'Option1 Yes Count',
       count(nullif(Option2,'no')) as 'Option2 Yes Count'
from    table_name
group by feature 
```

# nhibernate - NHibernate 分片

> ID：14436050
> 
> 赞同：3
> 
> 时间：2013-01-21T09:51:51.623
> 
> 标签：nhibernate, sharding

我今天在这里看到了 Ayende 关于 NH 碎片的文章[http://ayende.com/blog/4252/nhibernate-shards-progress-report](http://ayende.com/blog/4252/nhibernate-shards-progress-report)。我第一次听说 NH 支持分片，但我找不到任何有用的信息/提示。所以我想知道进度，稳定吗？它如何处理交易/酸属性？它是否支持 NH 支持的所有数据库？欢迎任何信息:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:44:42.403

我一直在与 NH Shards 合作，我可以说它运作良好。事实上，互联网上并没有那么多的信息和例子。据我所知，它支持 NH 的所有数据库。但它有一些局限性，有些功能没有完全实现。

它适用于 Fluent NHibernate API。您可以从 Java JBoss Hibernate Shards 项目中找到大部分文档。考虑到 NH Shards 来自 HShards，这个想法是相同的。

以下是一些有用的链接：

NH Shards 临时主机：[http ://code.google.com/p/nhshards/source/list](http://code.google.com/p/nhshards/source/list)

[使用分片的多租户数据库： http](http://weblog4j.com/2011/09/09/multitenant-database-using-hibernate-shards/) ://weblog4j.com/2011/09/09/multitenant-database-using-hibernate-shards/

# sql - Oracle 内联视图查询

> ID：14436051
> 
> 赞同：-1
> 
> 时间：2013-01-21T09:51:52.170
> 
> 标签：sql, oracle

此查询的注释 (/* */) 部分执行，但整个查询在 /////// 部分出现问题。请帮助解决此问题。

```
 SELECT *
    FROM (

 /*   (SELECT U1.EMAIL, S1.GRNNUM
       FROM RDT_USER U1,
            (SELECT O.ID, GRNNUM
               FROM RDT_ORGANIZATION O,
                    (SELECT GRNNUM, RECEPIENTCODE, ORGINATORCODE
                       FROM RDT_GOODSRECEIPTNOTE M
                      WHERE M.ACTIONSTATUS = 0
                        AND M.LATEST = 1
                        AND (SYSDATE - M.GENDATE) >= 0) S
              WHERE O.FUCODE = S.ORGINATORCODE) S1

      WHERE U1.ORGID = S1.ID)*/ A///////here am getting right paranthesis missing,

    (SELECT U.EMAIL, T1.GRNNUM
       FROM RDT_USER U,
            (SELECT O.ID, GRNNUM
               FROM RDT_ORGANIZATION O,
                    (SELECT GRNNUM, RECEPIENTCODE, ORGINATORCODE
                       FROM RDT_GOODSRECEIPTNOTE M
                      WHERE M.ACTIONSTATUS = 0
                        AND M.LATEST = 1
                        AND (SYSDATE - M.GENDATE) >= 0) T
              WHERE O.FUCODE = T.ORGINATORCODE) T1

      WHERE U.ORGID = T1.ID) B)
 WHERE A.GRNNUM = B.GRNNUM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:59:20.313

您需要将别名`A`放入注释中，如下所示：

```
SELECT *
    FROM (

 /*   (SELECT U1.EMAIL, S1.GRNNUM
       FROM RDT_USER U1,
            (SELECT O.ID, GRNNUM
               FROM RDT_ORGANIZATION O,
                    (SELECT GRNNUM, RECEPIENTCODE, ORGINATORCODE
                       FROM RDT_GOODSRECEIPTNOTE M
                      WHERE M.ACTIONSTATUS = 0
                        AND M.LATEST = 1
                        AND (SYSDATE - M.GENDATE) >= 0) S
              WHERE O.FUCODE = S.ORGINATORCODE) S1

      WHERE U1.ORGID = S1.ID) A///////here am getting right paranthesis missing,
*/
    (SELECT U.EMAIL, T1.GRNNUM
       FROM RDT_USER U,
            (SELECT O.ID, GRNNUM
               FROM RDT_ORGANIZATION O,
                    (SELECT GRNNUM, RECEPIENTCODE, ORGINATORCODE
                       FROM RDT_GOODSRECEIPTNOTE M
                      WHERE M.ACTIONSTATUS = 0
                        AND M.LATEST = 1
                        AND (SYSDATE - M.GENDATE) >= 0) T
              WHERE O.FUCODE = T.ORGINATORCODE) T1

      WHERE U.ORGID = T1.ID) B)
 WHERE A.GRNNUM = B.GRNNUM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:01:58.117

这两个子查询/内联视图需要以某种方式连接。您可能想要一个交叉连接——由它们之间的逗号表示——在这种情况下，您还可以删除一组括号：

```
SELECT *
FROM   (SELECT U1.EMAIL, S1.GRNNUM
        FROM   RDT_USER U1,
               (SELECT O.ID, GRNNUM
                FROM   RDT_ORGANIZATION O,
                       (SELECT GRNNUM, RECEPIENTCODE, ORGINATORCODE
                        FROM   RDT_GOODSRECEIPTNOTE M
                        WHERE  M.ACTIONSTATUS = 0
                        AND    M.LATEST = 1
                        AND    (SYSDATE - M.GENDATE) >= 0) S
                WHERE  O.FUCODE = S.ORGINATORCODE) S1

        WHERE U1.ORGID = S1.ID) A,

       (SELECT U.EMAIL, T1.GRNNUM
        FROM   RDT_USER U,
               (SELECT O.ID, GRNNUM
                FROM   RDT_ORGANIZATION O,
                       (SELECT GRNNUM, RECEPIENTCODE, ORGINATORCODE
                        FROM   RDT_GOODSRECEIPTNOTE M
                        WHERE  M.ACTIONSTATUS = 0
                        AND    M.LATEST = 1
                        AND    (SYSDATE - M.GENDATE) >= 0) T
                WHERE  O.FUCODE = T.ORGINATORCODE) T1
        WHERE U.ORGID = T1.ID) B
 WHERE  A.GRNNUM = B.GRNNUM; 
```

* * *

**编辑**我看你的查询越多，我看到的问题就越多。

1.  您的内联视图/子查询是相同的。交叉加入它们的唯一效果是增加执行时间。
2.  你为什么要做交叉连接？内部连接就足够了。
3.  您的内部查询缺少一些列规范，您在连接的外部查询中引用了这些规范。这行不通。

您查询的核心基本上是这个逻辑：

```
select grnnum,
       recepientcode,
       originatorcode
from   rdt_goodsreceiptnote
where  actionstatus       = 0
and    latest             = 1
and    sysdate - gendate >= 0; 
```

然后，您将其与`rdt_organization`交叉连接，然后将其与`rdt_user`;交叉连接。然后出于某种原因，这个烂摊子与自己交叉。这可以通过内部连接*大大简化：*

```
select rdt_user.email,
       rdt_goodsreceiptnote.grnnum

from   rdt_goodsreceiptnote

join   rdt_organization
on     rdt_organization.fucode = rdt_goodsreceiptnode.originatorcode

join   rdt_user
on     rdt_user.orgid = rdt_organization.id

where  rdt_goodsreceiptnode.actionstatus       = 0
and    rdt_goodsreceiptnode.latest             = 1
and    sysdate - rdt_goodsreceiptnode.gendate >= 0; 
```

在交叉连接中，你没有理由这样做两次，就是这样。容易多了，是吗？

# javascript - 带有弹出窗口的 Chrome 扩展 Onclick()

> ID：14436053
> 
> 赞同：4
> 
> 时间：2013-01-21T09:52:02.187
> 
> 标签：javascript, google-chrome-extension, popup, onclick, badge

我想清理我的通知（徽章）。单击该图标时，应同时打开一个弹出窗口，但它不起作用。

它适用于选项卡，但我不想在选项卡上显示它应该在弹出窗口中。

这是代码；

```
var i = 1;

function updateIcon() {
    i=1;
    chrome.browserAction.setBadgeText({text: ''});  
    chrome.browserAction.setPopup({popup:"popup.html"});
}

chrome.browserAction.onClicked.addListener(updateIcon);
chrome.browserAction.setBadgeBackgroundColor({color:[200, 0, 0, 100]});

window.setInterval(function() {
  chrome.browserAction.setBadgeText({text:String(i)});
  i++;
}, 4000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:41:26.270

您的徽章文本正在增长，因为`Background Page`在卸载或禁用扩展程序之前一直存在。

所以你的代码

```
window.setInterval(function() {
  chrome.browserAction.setBadgeText({text:String(i)});
  i++;
}, 4000); 
```

保持徽章继续增长。

而且，`chrome.browserAction.onClicked.addListener(updateIcon);` **不会工作**第二次！

你想阻止什么？

**PS：**您正在使用两个相互冲突的功能（`browserAction.onClicked`并且`browserAction.setPopup` 一起使用。

# 编辑 1

# 工作版本

### 清单.json

注册的后台页面和浏览器操作

```
{
    "name": "Bagde",
    "description": "http://stackoverflow.com/questions/14436053/chrome-extension-onclick-with-popup",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "browser_action": {
        "default_title": "Hi",
        "default_popup": "popup.html"
    }
} 
```

### 背景.js

使用您的代码并消除冲突`browserAction.onClicked`事件

```
var i = 1;

function updateIcon() {
    i = 1;
    chrome.browserAction.setBadgeText({
        text: ''
    });
    chrome.browserAction.setPopup({
        popup: "popup.html"
    });
}

chrome.browserAction.setBadgeBackgroundColor({
    color: [200, 0, 0, 100]
});

window.setInterval(function () {
    chrome.browserAction.setBadgeText({
        text: String(i)
    });
    i++;
}, 4000); 
```

### popup.html

一些琐碎的Page，用来`popup.js`遵守CSP。

```
<html>

    <head>
        <script src="popup.js"></script>
    </head>

    <body>
        <p>Some Content ..</p>
    </body>

</html> 
```

### popup.js

调用背景页面功能，因此当点击图标时计数器开始

```
document.addEventListener("DOMContentLoaded", function () {
    //Get Reference to Functions
    backGround = chrome.extension.getBackgroundPage();
    //Call Function
    backGround.updateIcon();
}); 
```

# eclipse - Eclipse 中 Java 动态 Web 项目中的 WebContent 文件夹

> ID：14436057
> 
> 赞同：0
> 
> 时间：2013-01-21T09:52:17.600
> 
> 标签：eclipse, jsp, webcontent

我试图将现有的 WAR 文件导入到我的 Eclipse Helios IDE 中。我的理解是除了WEB-INF目录之外，WAR文件的文件夹结构并没有太导入。

但是，当我在 Eclipse 中导入 WAR 文件夹结构并随后部署项目时，无法访问任何网页，除非我将所有 JSP 页面放在项目的 WebContent 目录下。

原始的 WAR 文件没有 WebContent 目录，所以我不确定为什么这个目录在 Eclipse 中突然变得至关重要。与我的原始 WAR 文件相比，Eclipse 如何使用此目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:59:28.850

WAR != Java 动态 Web 项目。

WAR 是一个 Web 存档，Java Web 项目更多（如 ant-files、java-sourcecode、unit-tests ...）。为了简单起见，创建了子目录。

WebContent 和 WAR 的内容应该是同步的。

# c# - 实体框架中如何 Include() 子实体导航属性

> ID：14436061
> 
> 赞同：0
> 
> 时间：2013-01-21T09:52:24.523
> 
> 标签：c#, linq, entity-framework

我有一些实体，例如

```
public class SalesOrderEntity
{
   public virtual ICollection<SalesOrderLineEntity> SalesOrderLineEntities { get; set; }
   ...
}
public class SalesOrderLineEntity
{
   public virtual SOCustomerEntity SOCustomerEntity { get; set; }
   ...
}
public class AirlineTicketEntity : SalesOrderLineEntity
{
   public virtual ICollection<FlightSailEntity> FlightSailEntities { get; set; }
   ...
} 
```

我可以用这种方式预加载其他实体

```
 return _context.SalesOrderEntities
            .Include("SalesOrderLineEntities")
            .Include("SalesOrderLineEntities.SOCustomerEntity") 
```

但我怎么能在 AirlineTicketEntity 中预加载“FlightSailEntity”

# javascript - 如何在javascript中将字符串拼接到不均匀的部分

> ID：14436062
> 
> 赞同：1
> 
> 时间：2013-01-21T09:52:26.850
> 
> 标签：javascript, jquery

我有一个具有自动完成功能的输入字段（自定义自动完成）。

当用户键入一个单词时，应该出现匹配的短语，但用户键入的单词应该有不同的颜色。

因此，例如，如果我有类似**"Hello World"**的字符串并且用户键入**"ll"**，他应该得到一个包含**"ll"**但**"ll"**应该有不同颜色的匹配短语列表。

所以我需要一种方法来拼接“Hello World”所以我会得到：`["he","ll","o World"]`然后我可以用“ll”包装并设置**它**`<span>`的样式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T09:55:29.983

您可以使用替换

```
strhtml.replace (/yourstrToSearch/g, '<span class="cl">' + 'yourstrToSearch' + '</span >'); 
```

**编辑：**

```
yourstrToSearch = "ll";
var regex = new RegExp( yourstrToSearch, "gi");
$('#div1').html($('#div1').html().replace(regex, '<span class="cl">' + yourstrToSearch + '</span >')); 
```

**[现场演示](http://jsfiddle.net/rajaadil/YWrxY/2/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T09:55:10.953

一种可能的正则表达式解决方案：

```
var part = "ll";
"Hello World".match(new RegExp("^(.*)(" + part + ")(.*)$")).slice(1);
// >> ["He", "ll", "o World"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T10:02:56.093

忘记拆分字符串。*在这种情况下，用span*替换 match （在您的示例中为**ll** ）要容易得多，如下所示：

 *```
'Hello World'.replace(/(ll)/g, '<span>$1</span>'); 
```

或者更好的是，如果您希望文本中的每个**ll**具有不同的样式，您可以传递函数来替换函数，如下所示：

```
var i = 0;
'Hello Hello World'.replace(/(ll)/g, function(match) {
    i++;
    return '<span class="highlight-'+i+'">'+match+'</span>;
});

// above returns - you can style highlight-1 .. n so each of them have different color
'He<span class="highlight-1">ll</span>o He<span class="highlight-2">ll</span>o World' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T10:51:52.640

这里的技巧是*不要*使用正则表达式，因为如果替换字符串包含正则表达式特殊字符（如点或大括号），它们将会失败。因此，只需将字符串按原样传递给`replace`：

```
str = 'Hello Hello World'
sub = 'll'
result = str.replace(sub, '<span>$&</span>') 
```

请注意，这仅替换`sub`if 有很多的第一次出现，但这可能是您想要的。*

# inheritance - Lua - 模块内的变量命名空间

> ID：14436063
> 
> 赞同：3
> 
> 时间：2013-01-21T09:52:26.867
> 
> 标签：inheritance, lua

我使用这个变量创建了一个`BaseModule`用变量`template_path`和函数调用的模块`get_template`：

```
module("BaseModule", package.seeall)
template_path = '/BASEMODULE_PATH/file.tmpl'
function get_template()
  print template_path
end 
```

然后我创建另一个名为“ChildModule”的模块

```
local BaseModule = require "BaseModule"
module("ChildModule", package.seeall)
setmetatable(ChildModule, {__index = BaseModule})
template_path = '/CHILDMODULE_PATH/file.tmpl'
some_child_specific_variable = 1 
```

通过这样做，`setmetatable`我想将所有变量和函数从 to 复制`BaseModule`（`ChildModule`假设*继承它们*）并将一些额外的方法和变量添加到新模块。

问题是当我打电话时

```
ChildModule.get_template 
```

我希望它会返回**`/CHILDMODULE_PATH/file.tmpl`**，但不会。它返回**`/BASEMODULE_PATH/file.tmpl`**。

但是，当我访问`ChildModule.template_path`它时，它包含正确的值（来自`ChildModule`）。

我该怎么做才能让 Lua`ChildModule`在方法中使用变量`ChildModule.get_template`但不使用`BaseModule`（父模块）变量？Lua 中没有**这个**对象，所以我如何告诉 Lua 使用当前值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:40:40.727

我认为您仍在使用已弃用的 Lua 版本。无论如何，您需要在using some function中设置`template_path`value ，并将base 中的设置为. 所以，像这样：`BaseModule``template_path``local`

## 基本模块

```
module("BaseModule", package.seeall)
local template_path = "/BASEMODULE_PATH/file.tmpl"
function get_template()
  print(template_path)
end
function set_template( sLine )
  template_path = sLine
end 
```

## 子模块

```
local BaseModule = require "BaseModule"
module("ChildModule", package.seeall)
setmetatable(ChildModule, {__index = BaseModule})
ChildModule.set_template( "/CHILDMODULE_PATH/file.tmpl" )
some_child_specific_variable = 1
ChildModule.get_template() 
```

由于您是继承，因此您*不能*尝试直接设置 base-module 的全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:13:23.170

我认为您正在尝试操作变量，而您可能想要操作您正在创建的对象的属性。也许是这样的：

```
-- base.lua
local M = {}
M.template_path = '/BASEMODULE_PATH/file.tmpl'
function M:get_template()
  return self.template_path
end
return M

-- child.lua
local M = {}
setmetatable(M, {__index = require "base"})
M.template_path = '/CHILDMODULE_PATH/file.tmpl'
M.some_child_specific_variable = 1
return M

-- main.lua
local base = require "base"
local child = require "child"

print(base:get_template(), child:get_template(),
  child.some_child_specific_variable) 
```

这将打印：

```
/BASEMODULE_PATH/file.tmpl  /CHILDMODULE_PATH/file.tmpl 1 
```

如您所料。

顺便说一句，您可以变成`child.lua`单线：

```
return setmetatable({template_path = '/CHILDMODULE_PATH/file.tmpl',
  some_child_specific_variable = 1}, {__index = require "base"}) 
```

不是你应该，但你可以。

# iphone - 在 iOS 设备上处理触摸事件

> ID：14436064
> 
> 赞同：0
> 
> 时间：2013-01-21T09:52:28.633
> 
> 标签：iphone, ios, ios4, gesture-recognition, iphone-privateapi

我正在探索在 iOS 设备上处理触摸事件的方式。我参考了这本书：[iOS Open Application Development](http://shop.oreilly.com/product/9780596518561.do)。为此，我重写了 mouseDown、mouseUp 方法并简单地在警告框中显示坐标。但是，被覆盖的方法永远不会被调用。以下是派生自 UIView 的 newView 类的代码：

```
-(void) _mouseDown: (GSEventRef) event{
CGPoint point =GSEventGetLocationInWindow(event);
UIAlertView* alert;
NSString* alertString =[NSString stringWithFormat: @"%f %f", point.x, point.y];
alert = [[UIALertView alloc] initWithTitle:@"Success" message:alertString delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];
}

-(BOOL) canHandleGestures{
return YES;
} 
```

有没有我遗漏的部分？此外，是否有另一种方法来获取有关触摸事件的信息并处理它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T09:59:09.803

更好的起点在这里： [https ://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/multitouch_background/multitouch_background.html](https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/multitouch_background/multitouch_background.html)

这些是您可以在 UIView 子类中覆盖的方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T10:00:14.053

您可以使用 ：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {} 
```

用于从 UIView 子类获取触摸事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T10:02:30.043

您必须使用`gesturerecognizer`（如[uitapgesturerecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)、[uiswipegesturerecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html)或[UITouch events](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITouch_Class/Reference/Reference.html)）

# html - 使浮动元素保持其位置

> ID：14436065
> 
> 赞同：0
> 
> 时间：2013-01-21T09:52:34.710
> 
> 标签：html, css

我有这样的[结构](http://jsfiddle.net/Ueaa9/)。我面临的问题是下一个：当屏幕的 x 轴小于 y 轴时，按钮工具栏（黑色）会跳到屏幕顶部。如果 x 轴更小，我的字段集会垂直扩展并跳出底部工具栏。如何解决这个问题并使字段集保持其位置？我尝试使用`overflow`但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:20:37.310

不使用`float:left`

将`.dhFieldset`元素设置为`display:inline-block;`，然后将其容器`.dhButtonToolbar`设置为`white-space:nowrap;`

```
@media screen and (max-aspect-ratio: 1/1) { 
    .dhFieldset{
        display:inline-block; /*Added this line and remove the float:left*/
        height:37px;
        width:auto;
   }
}

@media screen and (max-aspect-ratio: 1/1) { 
    .dhButtonToolbar {
        height: 60px;
        left:5px;
        width:100%;
        right: 5px; 
        white-space:nowrap; /*added this line*/
    }
} 
```

**演示在** [http://jsfiddle.net/gaby/Ueaa9/4/](http://jsfiddle.net/gaby/Ueaa9/4/)

# maven - 如果我的开源项目由 maven 管理并且依赖于不在 maven 存储库中的库怎么办？

> ID：14436069
> 
> 赞同：3
> 
> 时间：2013-01-21T09:52:54.437
> 
> 标签：maven

想象一下这种情况。我有一个使用 Maven 管理的开源项目，它依赖于不在 maven 存储库中的知名库（例如 jpathwatch）。我怎样才能让它工作？

直接的方法是将 jpathwatch 安装到本地 maven 存储库。然而，这给那些查看我的项目源代码并希望自己构建它们的人带来了负担。他们会遇到 maven 错误，然后查看 README 文件，或者干脆放弃尝试。

我有一个干净的方法来解决它吗？我必须回到 ANT 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:45:20.650

最干净的方法是将库上传到中央（或者如果您的项目不是开源的，则将库上传到您的项目所在的 maven 存储库）。

有[关于将第 3 方工件上传到中央的指南，](https://docs.sonatype.org/display/Repository/Uploading+3rd-party+Artifacts+to+The+Central+Repository)其中详细说明了如果原始项目不想上传工件的方法。

也有可能只在您自己的 groupId 下部署工件......更多的是最后的手段，或者如果官方方式对您来说太慢，则作为第一手段。

如果您想成为一名优秀的开源公民，请将这些内容上传到中央，以便其他人受益。

[像项目内存储库](http://blog.dub.podval.org/2010/01/maven-in-project-repository.html)这样的黑客对那些生活在公司存储库管理器后面并且拥有（`<mirrorOf>*</mirrorOf>`他们`~/.m2/settings.xml`应该拥有的）的人不起作用

*当人们尝试将您的*项目作为传递依赖项使用时，像范围这样的黑客`system`会导致一个永无止境的痛苦世界......因为猜猜从本地存储库而不是从反应堆解决您的项目时会评估什么？试试这绝对*不是*你放置第 3 方 jar 文件的地方。*`${basedir}``~/.m2/repository/your-groupId/your-artifactId/your-version`*

 **范围破解仅在您构建最终工件时才有效，`system`即使那样它也可能产生意想不到的副作用（例如被烘焙到 JAR 清单中的类路径......它将是您机器的磁盘路径......不是用户部署到的路径）

只有三个解决方案：

1.  将其部署到远程仓库（首选中央）
2.  将其安装在本地存储库中（最终用户会很痛苦）
3.  假模块解决方案（其中你伪造一个 JAR 模块并用你想要子插入的 jar 替换“构建”jar，以便模块现在是构建的工件而不构建它......这最终将成为选项 1或 2 但比“项目存储库”中的解决方案更邪恶）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:59:33.967

在这种情况下，您应该将此库捆绑到您的项目中并使用`<system>`依赖范围，如下所示：

```
<dependency>
    <groupId>...</groupId>
    <artifactId>...</artifactId>
    <version>...</version>
    <scope>system</scope>
    <systemPath>${project.basedir}/lib/file.jar</systemPath>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T09:59:11.923

将 JAR 文件放在网络上的某个位置并从项目中引用它是微不足道的。您可以通过三个简单的步骤创建自己的 Maven 存储库，请参阅我[的帖子](http://www.javaworld.com/community/node/3968)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T09:57:52.457

您可以创建项目内存储库。

请参阅[Leonid Dubinsky 的博客 - Maven 项目内存储库](http://blog.dub.podval.org/2010/01/maven-in-project-repository.html)**

# php - Ruby 结果未显示在 Web 浏览器中

> ID：14436070
> 
> 赞同：0
> 
> 时间：2013-01-21T09:52:55.400
> 
> 标签：php, ruby

我正在使用 php 运行一个 ruby​​ 文件。当我在终端中运行 php 时，它运行但执行速度有点慢。当我在浏览器上运行 php 文件时，结果不显示。当我使用一个简单的命令（例如“ls”）时，它在终端和网络浏览器中运行良好。
下面是我在我的 php 文件中使用的脚本。

```
echo "<pre>";
$display = system('ruby /home/user/ruby-grok/examples/test.rb');
echo "</pre>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:03:50.580

如果没有看到 test.rb 的内容，我们无法告诉你为什么它没有输出。据我们所知，该文件可能为空。

同时，您正在捕获`system`命令的任何输出并将其存储在其中，`$display`但您没有打印该值。Ruby 脚本是返回一些东西还是应该打印它？

同样，在不知道该脚本中的内容的情况下，我们无法以任何实际方式提供帮助。

# ruby-on-rails-3 - Rails 嵌套单一资源路由附加 .ID

> ID：14436072
> 
> 赞同：4
> 
> 时间：2013-01-21T09:53:05.647
> 
> 标签：ruby-on-rails-3, routes

我有以下嵌套的单数路线：

```
resources :listings do
  resource :logo, only: [ :edit, :update ]
end 
```

它按预期生成 2 条正确的路线：

```
edit_listing_logo GET /listings/:listing_id/logo/edit(.:format) logos#edit
listing_logo PUT /listings/:listing_id/logo(.:format) logos#update 
```

现在，当我重定向到 edit_listing_logo_path

```
redirect_to edit_listing_logo_path( @listing, @logo ) 
```

或者当我创建更新表单时

```
<%= form_for [ @listing, @logo ] do |f| %> 
```

生成的链接总是像这样在末尾附加单个资源 ID

```
/listings/2/logo.1 
```

我还没有在这个应用程序中使用响应格式，所以它工作正常。但是这个链接生成似乎很奇怪，如果与各种响应格式一起使用，我希望它会引起问题。

请注意，这也在这里讨论过[Rails Nested Singular Resource Routing](https://stackoverflow.com/questions/4765266/rails-nested-singular-resource-routing)但我根本没有使用“显示”路径。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T14:57:07.690

我相信您可以通过使用详细路径方法`edit_listing_logo_path(@listing)`（如@Martin Sojka 所述）或使用符号而不是对象本身来获得所需的答案。

因此，不要使用正常形式：

```
form_for [ @listing, @logo ] 
```

您可以通过以下方式处理对象特异性（和尾随 ID）：

```
form_for [@listing :logo] 
```

如果你想在控制器上调用另一个动作，你可以在数组中添加前缀：

```
form_for [:edit, @listing :logo] 
```

希望它对你有用 - 它似乎解决了我的问题。

# c++ - 使用 OpenCV 读取 PDF 文件

> ID：14436075
> 
> 赞同：5
> 
> 时间：2013-01-21T09:53:21.580
> 
> 标签：c++, pdf, opencv

是否可以将PDF文件转换为`cv::Mat`？我知道 PDF 文件通常是对象的矢量，但给出了所需的分辨率。有没有可以进行这种转换的工具？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T10:06:35.137

OpenCV 根本不支持 pdf 格式，因此您应该使用另一个库将 pdf 页面转换为图像。阅读此讨论：[C/C++ 应用程序的开源 PDF 库？](https://stackoverflow.com/questions/58730/open-source-pdf-library-for-c-c-application)

这个问题也和你的类似：[What C++ library can I used to convert a PDF to an image on windows?](https://stackoverflow.com/questions/6603615/what-c-library-can-i-use-to-convert-a-pdf-to-an-image-on-windows)

# mysql - Mysql 重复事件

> ID：14436085
> 
> 赞同：3
> 
> 时间：2013-01-21T09:54:22.717
> 
> 标签：mysql, events

我试图每 24 小时更新一次我的表。我尝试了以下示例，但事件仅触发一次

```
CREATE EVENT mydb.time_sync
ON SCHEDULE
  EVERY '1 0' DAY_HOUR       
STARTS '2013-01-16 16:53:00' 
DO
  UPDATE mydb.mytable SET is_time_sync = 0; 
```

我尝试了另一个，但它又重复了一次

```
CREATE EVENT mydb.time_sync2
ON SCHEDULE
  EVERY 24 DAY_HOUR       
DO
  UPDATE mydb.mytable SET is_time_sync = 0; 
```

这也失败了一次

```
CREATE EVENT mydb.time_sync3
ON SCHEDULE EVERY '1' DAY
STARTS '2013-01-16 16:53:00' 
DO
    UPDATE mydb.mytable SET is_time_sync = 0; 
```

我正在使用 MySQL 5.5 并且事件调度程序已打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:58:30.573

您正在编写的事件的查询没问题，但是您缺少一件事。您尚未启用导致它仅执行一次触发器的事件调度程序。

要启用，您必须在默认 MySQL 配置文件`event_scheduler=on`的部分下写入某处`[mysqld]`，通常是 /etc/my.cnf 或 my.ini

# c - C不能向结构添加新元素

> ID：14436093
> 
> 赞同：0
> 
> 时间：2013-01-21T09:55:02.733
> 
> 标签：c, struct, char, element

我有这样的结构：

```
typedef struct kodProgramu {
    char* etykieta;
    char* instrukcja;
    char* operand;
    struct kodProgramu *nast;
} kodPrg; 
```

此代码用于添加新元素：

```
void pobierzKodStdin(kodPrg *kod, char *wynik, char *linia, int flagaEtyk)
{
    wynik = fgets(linia, 80, stdin);
    while(wynik != NULL)
    {
        kodPrg *wsk, *nowy;
        wsk = kod;
        while(wsk->nast != NULL)
            wsk = wsk->nast;

        if(linia[0] == ' ')
            flagaEtyk = 1;

        nowy = (kodPrg*)malloc(sizeof(kodPrg));
        int licznik = 0;
        char *pch;
        pch = strtok(linia, ":# ");
        while(pch != NULL)
        {
            if(flagaEtyk == 0)
            {
                if(licznik == 0)
                    nowy->etykieta = pch;
                else if(licznik == 1)
                    nowy->instrukcja = pch;
                else if(licznik == 2)
                    nowy->operand = pch;
            }
            if(flagaEtyk == 1)
            {
                if(licznik == 0)
                    nowy->instrukcja = pch;
                else if(licznik == 1)
                    nowy->operand = pch;
            }

            licznik++;
            pch = strtok(NULL, ":# ");
        }
        nowy->nast = NULL;
        wsk->nast = nowy;

        flagaEtyk = 0;
        wynik = fgets(linia, 80, stdin);
    }
} 
```

此函数将此结构打印到控制台：

```
void wypiszKod(kodPrg *kod)
{
    kodPrg *wsk = kod;
    while(wsk != NULL)
    {
        printf("%s %s %s\n", wsk->etykieta, wsk->instrukcja, wsk->operand);
        wsk = wsk->nast;
    }
} 
```

这是我的主要功能：

```
int main()
{
    char linia[80], *wynik;
    char *wsk = malloc(sizeof(char));
    int flagaEtyk = 0;
    //tasmaWejsc *wejscie = (tasmaWejsc*)malloc(sizeof(tasmaWejsc));
    //tasmaWyjsc *wyjscie = (tasmaWyjsc*)malloc(sizeof(tasmaWyjsc));
    //wyjscie->wartosc = 0;
    //wyjscie->nast = NULL;
    kodPrg *kod = (kodPrg*)malloc(sizeof(kodPrg));
    kod->etykieta = " ";
    kod->instrukcja = " ";
    kod->operand = " ";
    kod->nast = NULL;
    int liczba;

    //wprowadzWejscie(wynik, linia, wejscie);
    //wypiszWejscie(wejscie);

    //system("cls");

    pobierzKodStdin(kod, wynik, linia, flagaEtyk);
    wypiszKod(kod);

    return 0;
} 
```

现在，当我输入一行时： test test test 它运行良好并在控制台中打印 test test test 。

但是当我输入更多行时，例如：

```
test test test
xxxx xxxx xxxx 
```

程序正在打印：

```
xxxx xxxx xxxx
xxxx xxxx xxxx 
```

就像第二行替换第一行一样。我不知道为什么，当我有一个带有 int 而不是 char * 的结构时，它工作得很好。添加了下一个元素并且它的打印效果很好，但是当 char * 它按我上面描述的那样工作时。

当我有带有 char * 的结构时，如何将新元素添加到列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:03:09.170

我认为您应该意识到 strtok 适用于静态缓冲区

所以当你这样写

```
pch = strtok(linia, ":# ");
while(pch != NULL)
{
  if(flagaEtyk == 0)
  {
     if(licznik == 0)
     nowy->etykieta = pch; 
```

您正在将闪亮堆元素中的指针分配给将在下一行（linia）消失的字符串。

`wynik = fgets(linia, 80, stdin);`

您需要做的是复制字符串，这可以使用 strdup()

```
 nowy->etykieta = strdup(pch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:08:34.470

链表中的每个字符串都映射到 的部分`linia[80]`，在每行访问时都会被覆盖。

一些`strdup()`电话应该可以解决您的问题。

# jquery - jQuery onunload 断开用户

> ID：14436099
> 
> 赞同：0
> 
> 时间：2013-01-21T09:55:15.387
> 
> 标签：jquery, ajax

当“卸载”事件被触发时，我试图断开用户的连接！

```
$(window).bind('unload', function() {
   $.ajax({
      url: "deconnexionUser.php",
      async: false
    });
}); 
```

它有效，但我不想使用“async：false”！

我该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:57:56.590

您无法在正在关闭的网页上启动异步事件，因此您需要在发送请求时阻止浏览器。

您是否有理由希望它是异步的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:58:00.807

如果您使用`beforeunload`，您将不会与关闭窗口竞争：

```
$(window).bind('beforeunload', function() {
   $.ajax({
      url: "deconnexionUser.php"
    });
}); 
```

# android - 如何在 Android 设备上通过后台服务使屏幕闪烁/闪烁？

> ID：14436103
> 
> 赞同：5
> 
> 时间：2013-01-21T09:55:22.610
> 
> 标签：android, android-layout

我计划做后台服务，这将使屏幕闪烁/闪烁，直到用户触摸屏幕。

我不知道如何使屏幕闪烁的方法 - 只有学到的知识可以通过产生的活动通过亮度和控制来完成。

想要通过屏幕上的颜色变化进行闪烁，即黑白或屏幕开/关，使其比亮度更明显。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T09:59:36.773

我用它来闪烁屏幕，在这段代码中，我的 relativeLayout（HomeLayout）会闪烁。

```
Animation animation = new AlphaAnimation(1, 0); // Change alpha
// from fully
// visible to
// invisible
animation.setDuration(500); // duration - half a second
animation.setInterpolator(new LinearInterpolator()); // do not alter
// animation
// rate
animation.setRepeatCount(Animation.INFINITE); // Repeat animation
// infinitely
animation.setRepeatMode(Animation.REVERSE); // Reverse animation at

// the
// end so the layout will
// fade back in
relativeLayout.startAnimation(animation); 
```

添加此代码，当您触摸屏幕或按钮以清除动画时。

```
relativeLayout.clearAnimation(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T16:43:12.743

从您的服务中，您可以与`WakeLock`：

获取`WakeLock`：

```
PowerManager powerMan = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wakeLock = powerMan.newWakeLock(
                     PowerManager.SCREEN_DIM_WAKE_LOCK | 
                     PowerManager.ACQUIRE_CAUSES_WAKEUP, "wakelockTag"); 
```

然后打开屏幕：

```
wakeLock.acquire(); 
```

然后再次将其关闭：

```
wakeLock.release(); 
```

你可以把它放到`Thread`一个睡眠中或使用一个`Timer`来创建闪存。

例如：

```
new Thread() {
            public void run() {
                boolean screenOn = false;
                for (int i = 0; i < 5; i++) {
                    try {
                        sleep(500);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    if (screenOn) {
                        wakeLock.acquire();
                    } else {
                        wakeLock.release();
                    }
                }
            }
        }.run(); 
```

它不会是黑/白，只是开/关。

如果你想变成黑色/白色，你还必须解除`KeyLock`（查找**Android Keyguard**），然后按下一个`Activity`完全黑色的按钮，然后像以前一样将 a或 a更改`Activity`为 White 。更多的工作。`Timer``Thread`

请记住在以下位置获得许可`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

`KeyGuard`如果您沿着那条路线进行解锁，则需要额外的权限。

# facebook - 如何使用 Graph API 获取所有注册用户的所有事件？

> ID：14436107
> 
> 赞同：0
> 
> 时间：2013-01-21T09:55:31.533
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我在 iPhone 应用程序上工作，该应用程序从不同渠道获取事件并在地图上显示它们。现在我尝试在我的数据库中获取 Facebook 事件。我提出这个要求

```
SELECT name, venue, location, start_time, update_time FROM event WHERE update_time>1358294400 
```

但它不起作用。脸书回归

```
{
  "error": {
    "message": "Error validating access token: Session has expired at unix time 1358528400\. The current unix time is 1358761880.", 
    "type": "OAuthException", 
    "code": 190, 
    "error_subcode": 463
  }
} 
```

我怎样才能得到事件`update_time`？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:22:58.963

我猜你不能。自从-

> WHERE 子句必须包含一个可索引的列。**此类列在表中用***标记。

并且`updated_time`不是可索引的列。只有`eid`和`name`在表中是可索引的`event`。

因此，只需获取所有数据，然后根据`updated_time`

# php - 短信中的 Facebook Php 图片

> ID：14436110
> 
> 赞同：1
> 
> 时间：2013-01-21T09:55:44.130
> 
> 标签：php, facebook, api, post, feed

在我的页面上，我希望在消息文本中发布带有图像的提要，而不是链接/网址，是否可以在文本消息中添加**htmltags**或**bbcode**之类的内容？

```
$msg = "<img src=\"urlimg or facebook\" >\nMy text here";

$args = array(
  'message' =>  $mgs,
);

$myfeed = $facebook->api($pageid . '/feed', 'post', $args); 
```

更新：

我找到了解决方案，但如果我连续发布 2 次，它们将被分组在时间轴的同一个框中

```
$args = array(
'message' =>  $msg,
'image' => '@'.$path,
'aid' => $album_id,
'access_token' => $token
);  
$photo = $facebook->api($album_id . '/photos', 'post', $args); 
```

是否存在停止自动分组的设置？还是有另一种方式来发布它，比如带有图像的提要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:03:31.057

所以我花了 30 秒搜索[**PHP Facebook API**](https://developers.facebook.com/docs/reference/php/facebook-api/)，这确实是*你*应该做的，并找到了以下示例：

```
<?
  // Remember to copy files from the SDK's src/ directory to a
  // directory in your application on the server, such as php-sdk/
  require_once('php-sdk/facebook.php');

  $config = array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
    'fileUpload' => true,
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();

  $photo = './mypic.png'; // Path to the photo on the local filesystem
  $message = 'Photo upload via the PHP SDK!';
?>
<html>
  <head></head>
  <body>

  <?
    if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {

        // Upload to a user's profile. The photo will be in the
        // first album in the profile. You can also upload to
        // a specific album by using /ALBUM_ID as the path 
        $ret_obj = $facebook->api('/me/photos', 'POST', array(
                                         'source' => '@' . $photo,
                                         'message' => $message,
                                         )
                                      );
        echo '<pre>Photo ID: ' . $ret_obj['id'] . '</pre>';

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'photo_upload'
                       )); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   

      echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
    } else {

      // No user, print a link for the user to login
      // To upload a photo to a user's wall, we need photo_upload  permission
      // We'll use the current URL as the redirect_uri, so we don't
      // need to specify it here.
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'photo_upload') );
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }

  ?>

  </body>
</html> 
```

记下`$config`变量值和`$facebook->api()`调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:07:01.703

你不能在短信中间发布图片，Facebook不允许。

但是您可以将图像附加到消息中，它将以这种方式显示在消息的左侧：

```
$msg = "My text here";
imgUrl = "http://urltotheimage.com/path/image.jpg";

$args = array(
    'message' => $mgs,
    'picture' => $imgUrl
);

$myfeed = $facebook->api($pageid . '/feed', 'post', $args); 
```

# xml - XML 架构需要属性或为空

> ID：14436113
> 
> 赞同：1
> 
> 时间：2013-01-21T09:55:51.467
> 
> 标签：xml

我有一个无法更改的进程生成的 xml 文档。它看起来有点像这样：

```
<root>
  <foo bar="..." baz="..."/>
  <foo bar="..." baz="..."/>
  <foo bar="..." baz="..."/>
  <foo/>
  <foo/>
</root> 
```

我已经设置了一个模式，要求 foo 元素上的属性 baz 和 bar ，因为它们是读取文件的程序正确运行所必需的。但是，生成 xml 的程序有时会在末尾添加一个或多个空的 foo 元素，如上所示。这会导致模式验证失败，但我不想放松模式以允许空的 foo 元素，因为这可能会导致程序失败。

有没有人建议解决这个问题的最佳方法是什么？到目前为止我想到的唯一解决方案是预处理 xml，删除任何空的 foo 元素，但这有点可怕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:21:42.120

XSD 1.0 中没有办法说某些 foo 元素应用了与其他 foo（兄弟）元素不同的验证规则。您可以在 XSD 1.1 中使用断言来实现。

在验证之前进行转换实际上并不是一件坏事。如果您知道在验证文档然后进行实际处理之前需要从文档中去除哪些噪音，那么在验证之前将转换步骤插入管道可能是一种非常有效的技术。

# gwt - 把焦点从任何有它的东西上移开

> ID：14436114
> 
> 赞同：2
> 
> 时间：2013-01-21T09:55:55.317
> 
> 标签：gwt, drag-and-drop, focus

我正在处理`MouseDownEvent`和`MouseUpEvent`，`Image`以允许选择图像的一部分。大多数浏览器将开始拖动图像，除非`preventDefault()`在事件中调用，如在此图像上可见：

![](../Images/e2359f9763606db5323ddb0491e47c79.png)

调用的主要缺点`preventDefault()`是，如果焦点在 a 上`TextBox`，它将保留在那里，即使单击`Image`应该已将其删除。

我找不到一种方法来从当前碰巧拥有的任何小部件中移除焦点，或者将焦点赋予`Image`. 到目前为止，我唯一的解决方法是创建一个`TextBox`不可见的无用的，当我想移除焦点时，我让它可见，给它焦点，然后让它再次不可见。呸。有更好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:28:23.403

为了使图像具有焦点，您必须将属性添加`tabindex`到元素，然后您可以调用该`Element.focus()`方法以在用户单击图像时将焦点放在图像上。

```
final Image i = new Image("http:...");
i.getElement().setAttribute("tabindex", "0");    
i.addMouseDownHandler(new MouseDownHandler() {
  public void onMouseDown(MouseDownEvent event) {
    event.preventDefault();
    i.getElement().focus();
  }
}); 
```

如果您不需要图像可聚焦的另一种方法，只需处理`dragStart`事件并在此处阻止默认设置，而不是在鼠标向下和向上处理程序中。

```
i.addDragStartHandler(new DragStartHandler() {
  public void onDragStart(DragStartEvent event) {
    event.preventDefault();
  }
}); 
```

# string - Actionscript 3替换字符串

> ID：14436118
> 
> 赞同：0
> 
> 时间：2013-01-21T09:56:17.747
> 
> 标签：string, actionscript-3, actionscript

我正在尝试替换字符串中的子字符串。我下面的代码替换了所有出现的子字符串。例如，当点击**in**时，它会同时替换**in**。但我喜欢只替换点击一个。我们应该怎么做？

书**在**我房间的桌子**上。**

```
 function correct(e:TextEvent):void{
                str =String(e.currentTarget.htmlText);
                if(e.text==replacements[e.currentTarget.name]){
                    e.currentTarget.htmlText =strReplace(str, e.text,    corrections[e.currentTarget.name]);
                }
        }

         function strReplace(str:String, search:String, replace:String):String {
             return str.split(search).join(replace);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:06:19.453

您可以使用`TextField.getCharIndexAtPoint(x:Number, y:Number):int`来获取特定坐标中 char 的（基于 0 的）索引。

您显然需要将点击点用作*(x, y)*。

您可以使用`localX`和`localY`从`TextField.click`事件。

请参阅此处了解更多信息：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#getCharIndexAtPoint%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#getCharIndexAtPoint%28%29)

此时您需要在单击的字符附近搜索要替换的字符串。

例如，像这样：

```
stringToReplace = "in";

len = stringToReplace.Length;

neighborhood = TextField.substring(clickedCharIndex-len, clickedCharIndex+len);

if (neighborhood.indexOf(stringToReplace)) {

    neighborhood = neighborhood.replace(stringToReplace, replacement);

    TextField.text = TextField.text(0, clickedCharIndex-len) + neighborhood +
                     TextField.text(clickedCharIndex+len);

} 
```

# javascript - 如何在使用 jQuery 一键单击后停止动画

> ID：14436119
> 
> 赞同：1
> 
> 时间：2013-01-21T09:56:26.503
> 
> 标签：javascript, jquery, animation, click, document-body

所以，我有一些动画动作，这是我的登录面板框：

```
$('.top_menu_login_button').live('click', function(){
    $('#login_box').animate({"margin-top": "+=320px"}, "slow");
});
$('.login_pin').live('click', function(){
    $('#login_box').animate({"margin-top": "-=320px"}, "slow");
}); 
```

现在我需要在点击正文后添加一些隐藏操作，所以我这样做：

```
var mouse_is_inside = false;
$('#login_box').hover(function () {
   mouse_is_inside = true;
}, function () {
   mouse_is_inside = false;
}); 
```

用于停止在身体点击时隐藏此元素，而这用于在外部点击身体`login-box`

```
$("body").mouseup(function () {
    if (!mouse_is_inside) {
        var login_box = $('#login_box');
        if (login_box.css('margin-top','0')){
            login_box.stop().animate({"margin-top": "-=320px"}, "slow");
        }
    }
}); 
```

一切都很好，但是每次点击身体后这个面板都会动画，如何停止这个并只执行一次？取决于这个面板是否可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:07:33.870

您通常会通过检查单击是否发生在元素内部来执行此类操作，而不是通过使用 mousemove 事件来设置 globals ：

```
$(document).on('click', function(e) {
    if ( !$(e.target).closest('#login_box').length ) { //not inside
        var login_box = $('#login_box');
        if ( parseInt(login_box.css('margin-top'),10) === 0){
            login_box.stop(true, true).animate({"margin-top": "-=320px"}, "slow");
        }
    }
}); 
```

并且`live()`已弃用，您应该使用 `on()`.

# jquery - 如何在其他选择中触发自动建议

> ID：14436124
> 
> 赞同：0
> 
> 时间：2013-01-21T09:56:47.420
> 
> 标签：jquery, autocomplete, jquery-autocomplete

我有两个`autosuggest`使用 jquery 触发 enter key 。代码如下

```
$("#Patient").autocomplete({
                search: function (event, ui) {
                    var key = CheckBrowser(event);
                    if (key == 13)
                        return true;
                    else
                        return false;
                },
                source: function (request, response) {
                    $.ajax({
                        url: '@Url.Action("PatientAutoSuggestByName")',
                        data: { autoSuggestText: request.term }, //
                        dataType: 'json',
                        type: 'POST',
                        success: function (data) {
                            response(data);
                        }
                    });
                },
                select: function (event, ui) {
                    if (SessionExist()) {
                        $('#Patient_ID').val(ui.item ? ui.item.id : 0);
                        $('#AsterID').val(ui.item ? ui.item.code : 'Select');
                        $("#VisitNo").focus();
                        $('#VisitNo').trigger("keypress", [13]); // here i want to trigger the second auto suggest
                    }
                }
            }); 
```

第二个自动建议是

```
$("#VisitNo").autocomplete({
                search: function (event, ui) {
                    var key = CheckBrowser(event);
                    if (key == 13)
                        return true;
                    else
                        return false;
                },
                source: function (request, response) {
                    $.ajax({
                        url: '@Url.Action("VisitorAutoSuggest")',
                        data: { patientID: $('#Patient_ID').val(), autoSuggestText: $('#VisitNo').val() }, // 
                        dataType: 'json',
                        type: 'POST',
                        success: function (data) {
                            response(data);
                        }
                    });
                },
                select: function (event, ui) {
                    if (SessionExist()) {
                        $('#Visit_ID').val(ui.item ? ui.item.id : 0);
                        $('#VisitDate').val(ui.item ? ui.item.code : 'Select');
                        reloadGrid();
                        GetSettings();
                        $("#Remarks").focus();
                    }
                }
            }); 
```

我想`trigger the second auto suggest on the selection of first`。我试过`$('#VisitNo').trigger("keypress", [13]);` B'coz 自动建议是在输入键中触发的。但这不起作用。如果有人知道解决方案，请分享

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:42:27.930

as [Pitchai Pazhani](https://stackoverflow.com/users/876554/pitchai-pazhani) Said i done this by using `search method in the autocomplete`.

```
$("#VisitNo").autocomplete('search', $("#Patient_ID").val()); 
```

# asp.net-mvc-3 - 为什么禁用字段不提供在 mvc3 中单击提交时的值？

> ID：14436127
> 
> 赞同：5
> 
> 时间：2013-01-21T09:56:59.773
> 
> 标签：asp.net-mvc-3, telerik

我使用 Ajax.BeginForm / Html.BeginForm 作为视图，该视图在单击提交时将对象发送到控制器。有一些 Telerik 控件有条件地被禁用。单击提交时，对象无法检索控件中已存在的值，因为它已被禁用。因此，对象是用空值制作的。有什么帮助吗？

我使用 jquery 在加载页面时禁用这些 Telerik 控件。

```
Change.setDropDownValues = function () {

    if (condition) {

                 $("#A").data('tDropDownList').enabled = false;                            $("#A").data('tDropDownList').disable();
                    }
        }
        else if (condition) {

            $('#Pop').attr('disabled', 'disabled'); //text box
            $('#ShortDesc').attr('disabled', 'disabled'); //textarea
            $('#LongDesc').attr('disabled', 'disabled'); //text area
            $('#Cont').attr('disabled', 'disabled'); //text box

            $('#iDate').attr('disabled', 'disabled'); //datepicker division
            $('#C').data('tDropDownList').enabled = false; //drop down list
            $('#C').data('tDropDownList').disable();  
        }
}; 
```

谁能说如何重新修改以便我可以获取禁用的字段值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T09:58:12.300

这就是`disabled`输入的工作方式。他们从不将值发送到服务器。`readonly`如果您想阻止用户修改值并在提交表单时将旧值发送到服务器，则可以改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-15T07:39:04.417

你可以使用这样的东西

```
$(":disabled", $('#yourform')).removeAttr("disabled"); 
```

在提交之前。

# javascript - JSON数据未显示在具有多个容器的面板上

> ID：14436129
> 
> 赞同：1
> 
> 时间：2013-01-21T09:57:27.477
> 
> 标签：javascript, json, extjs, extjs4.1

我试图在我的 js 文件中显示这些数据，但是当我尝试加载页面时，数据不会显示。我在做正确的事吗？

JSON数据：

```
{
  "data": {
    "batnbr":"1",
    "tranid":"100001",
    "trandate":"2013-01-20",
    "trantype":"A",
    "docstatus":"A",
    "particulars":"test",
    "coid":"test",
    "brid":"test",
    "cur":"test",
    "exchangerate":"1.0000",
    "doctype":"A",
    "oktopost":"0",
    "posted":"0",
    "seqid":"1",
    "jvdtl":[
      {
        "batnbr":"1",
        "tranid":"100001",
        "account":"test",
        "subaccount":"test",
        "linkto":"1",
        "projectid":"test",
        "budgetid":"test",
        "importid":"test",
        "particulars":"test",
        "dramt":"1000.00",
        "cramt":"1000.00",
        "postref":"test",
        "postrefid":"test",
        "subledger":"test",
        "lineseqid":"1",
        "seqid":"1"
      },{
        "batnbr":"1",
        "tranid":"100001",
        "account":"test2",
        "subaccount":"test2",
        "linkto":"1",
        "projectid":"test",
        "budgetid":"test",
        "importid":"test",
        "particulars":"test",
        "dramt":"2000.00",
        "cramt":"2000.00",
        "postref":"test",
        "postrefid":"test",
        "subledger":"test",
        "lineseqid":"2",
        "seqid":"2"
      },{
        "batnbr":"1",
        "tranid":"100001",
        "account":"test3",
        "subaccount":"test3",
        "linkto":"1",
        "projectid":"test",
        "budgetid":"test",
        "importid":"test",
        "particulars":"test",
        "dramt":"3000.00",
        "cramt":"3000.00",
        "postref":"test",
        "postrefid":"test",
        "subledger":"test",
        "lineseqid":"3",
        "seqid":"3"
      }
    ]
  }
} 
```

存储以获取标题

```
store_jvhdr = new Ext.data.JsonStore({
        model: 'Jvhdr',
        proxy: {
            type: 'ajax',
            url : './journalservlet?batNbr='+val.data.batnbr+'&operation=GET_RECORD',
            reader: {
                type: 'json',
                root: 'data'
            }
        },
        autoLoad: true
        }); 
```

商店以获取详细信息

```
store_jvdtl = new Ext.data.JsonStore({
        model: 'Jvdtl',
        proxy: {
            type: 'ajax',
            url : './journalservlet?batNbr='+val.data.batnbr+'&operation=GET_RECORD',
            reader: {
                type: 'json',
                root: 'jvdtl'
            }
        },
        autoLoad: true
        }); 
```

模型

```
Ext.define('Jvhdr',{
extend: 'Ext.data.Model',
fields: [
    {name: 'batnbr', type: 'int'},
    ...
]
});

Ext.define('Jvdtl',{
extend: 'Ext.data.Model',
fields: [
    {name: 'batnbr', type: 'int'},
    ...
]
}); 
```

控制板

```
....
xtype: 'container',
                border: false,
                layout: 'vbox',
                items: [{
                    xtype: 'container',
                    border: true,
                    flex: 1,
                    layout: {
                        type: 'hbox',
                        align: 'stretch'
                    },
                    store: store_jvhdr,
                    items: [{
                        xtype: 'container',
                        border: true,
                        layout: 'vbox',
                        pack : 'start',
                        padding: '0, 20, 10, 10',
                        items: [
                          {
                          fieldLabel: 'Tran ID',
                          afterLabelTextTpl: required,
                          allowBlank: false,
                          labelWidth: 100,
                          dataIndex: 'tranid',
                          name: 'tranid',
                          xtype: 'textfield'
                          }
                          .....
                        }]
                    },{
                        xtype: 'container',
                        border: true,
                        layout: 'vbox',
                        padding: '0, 0, 10, 0',
                        flex: 1,
                        items: [{
                          fieldLabel: 'DocStatus',
                          afterLabelTextTpl: required,
                          labelWidth: 100,
                          allowBlank: false,
                          dataIndex: 'docstatus',
                          name: 'docstatus',
                          xtype: 'textfield',
                          anchor: '100%'
                        }
                         ...
                        {
                          fieldLabel: 'DocType',
                          afterLabelTextTpl: required,
                          labelWidth: 100,
                          allowBlank: false,
                          dataIndex: 'doctype',
                          name: 'doctype',
                          xtype: 'textfield',
                          anchor: '100%'
                        }
                        ]
                    }]
                },{
                    xtype: 'container',
                    layout: 'anchor',
                    items: [{
                      xtype: 'grid',
                      store: store_jvdtl,
                      columns: [
                        new Ext.grid.RowNumberer(),
                        {
                            text: "BatNbr",
                            hidden: true,
                            dataIndex: 'batnbr'
                        },{
                            text: "TranID",
                            hidden: true,
                            dataIndex: 'tranid'
                        }
                          ....
                       ]
                    }]
                }]
            }]

 .... 
```

顺便说一句，我正在使用不同的容器来布局我的面板。

# android - 单击以更改图像在 Android 2.2 应用程序中不起作用

> ID：14436132
> 
> 赞同：2
> 
> 时间：2013-01-21T09:57:30.450
> 
> 标签：android, html, css, jquery-mobile

在**Android 2.2**应用程序中，如果我点击一个图标，我希望它改变，但是当我点击时。悬停和活动不起作用..它保持不变当我点击时没有发生变化......

注意：此代码在 Android 4.0、iOS、BB 和 Windows Mobile 中正常工作。

我的代码

HTML：

```
<div>
    <span>
        <a href="page1.html">
         <span class="icon">&#32;</span>
        </a>
    </span>
</div> 
```

CSS：

```
.icon {background: url(../images/iconContain.png) no-repeat scroll -136px -197px transparent;display: block;height: 40px;width: 43px;}
.icon:active {background: url(../images/iconContain.png) no-repeat scroll -194px -197px transparent;display: block;height:40px;width:43px;}
.icon:hover {background: url(../images/iconContain.png) no-repeat scroll -194px -197px transparent;display: block;height:40px;width:43px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:05:22.990

不幸的是，我认为您无法解决此问题。Android 2.3 是第一个正确实现 CSS 2.1 选择器的 android 版本。Android 2.2 及更低版本的 CSS 选择器有很多问题（更不用说整体的 CSS）。此外，在 2.3 版之前，浏览器开发人员不会被迫完全实现 webkit 功能。

如果你有一个带有默认 webkit 浏览器的 Android 2.2 设备，那么这将工作，在任何其他情况下你都不走运。

看看这个链接：[http](http://www.quirksmode.org/m/css.html) ://www.quirksmode.org/m/css.html 。它概述了手机上的 CSS 2.1 实现（直到 Android 2.1 和 2.2）。

# java - 什么是 Core Java/JSF/Servlets 中的状态模式示例？

> ID：14436145
> 
> 赞同：0
> 
> 时间：2013-01-21T09:58:15.933
> 
> 标签：java, jsf, servlets, design-patterns, state-pattern

我刚刚了解了状态模式。我想知道在核心 Java/JSF/Servlets 代码中哪里可以看到这种模式正在实现？我想看看状态转换是如何实现的，谁在其中扮演角色，`states`谁在其中扮演角色`context`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:43:27.407

在 JSF 中，它可以是生命周期处理。`Phase`是具有具体状态的状态：`ApplyRequestValuesPhase`, `InvokeApplicationPhase`, `ProcessValidationsPhase`, `RenderResponsePhase`, `RestoreViewPhase`, `UpdateModelValuesPhase`. 上下文将是`Lifecycle`.

注意：此示例来自 JSF 的 Mojarra 实现。

# ios - iOS 版本无法通过 Windows iTunes 安装

> ID：14436148
> 
> 赞同：0
> 
> 时间：2013-01-21T09:58:30.340
> 
> 标签：ios, objective-c, ios6

我在 Windows 上使用 iTunes 安装我的应用程序时遇到问题。在 mac 上工作正常，但在 windows 上安装几乎结束，然后出现错误“安装失败”。我在设备上使用与用于构建项目的配置文件相同的配置文件。

有谁知道为什么会这样？

使用的设备：iPad 2 - OS 6.0

任何信息将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:02:20.270

在将我的应用程序部署给测试人员时，我遇到了类似的问题。有时，即使 .ipa 和配置文件都正确制作，通过 iTunes 进行的安装也会失败。

[因此，我们决定使用Testflight](https://testflightapp.com)切换到无线部署，一切正常。它易于设置，免费，它解决了 iOS 测试的许多难题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:19:39.340

如果您使用正确的配置文件并希望从 Windows 安装 ad-hoc 构建，Apple 提供 iPhone 配置实用程序，使您能够将其安装在所需的设备上这里是[下载链接](http://support.apple.com/kb/DL1466?viewlocale=en_US&locale=en_US)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:07:19.547

在进行安装时检查控制台日志 - 通常它会在这些情况下显示更多详细信息。

# paypal - Paypal - 扣款直到确认

> ID：14436151
> 
> 赞同：0
> 
> 时间：2013-01-21T09:58:47.043
> 
> 标签：paypal, e-commerce, payment, commerce

我已经设置了一个 Paypal 商家帐户。

我的要求之一是在我的网站上冻结通过 Papyal 收到的任何付款，并且只有在我手动接受它们后才能通过。

谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:30:15.507

如果付款不符合您所追求的标准，您可以使用您的个人资料中的欺诈管理过滤器来标记付款，直到您接受它们为止。

我很确定有一个选项可以简单地强制批准所有付款，但我现在没有找到它。你可以打电话给 PayPal 并询问他们。

另一种选择是使用授权和捕获。这样，通过该网站的付款将被简单地授权，而无需实际处理任何资金。只有当您获得授权时，资金才会被处理并转入您的账户。

如果您不想批准它，您可以取消授权或简单地让它过期，这通常会在 29 天内完成，具体取决于付款人的银行。

# android - 我可以在 sencha 应用程序（Android）中使用 android AsyncTask

> ID：14436153
> 
> 赞同：0
> 
> 时间：2013-01-21T09:58:49.740
> 
> 标签：android, android-asynctask, sencha-touch, sencha-touch-2

在我之前的[问题](https://stackoverflow.com/questions/14411990/how-to-download-facebook-profile-picture)中，我问“**如何下载 Facebook 个人资料图片**”，我得到的答案是“**使用 AsyncTask 下载它并将其保存到应用程序的磁盘空间**”。

我正在使用 sencha touch（它全部关于 java 脚本和 html）来创建带有 phonegap 的视图。我需要从网上下载图片（来自这个 url `https://graph.facebook.com/username/picture`）。

所以，当我学习 AsyncTask 时，我怀疑“**我可以在 sencha android 应用程序中使用 AsyncTask 吗？** ”，因为我没有使用活动 xml 创建视图（我的意思是按钮、面板等）。

有没有其他解决方案可以在 sencha touch 应用程序（Android）中从网上下载图片？

**更新解决方案**

我使用下面的 facebook api 来获取个人资料图片 url 和 Phonegap 文件 Api 用于下载图片，如@Lukas K 所说。

```
 FB.api('/'+fbusername+'/picture?redirect=false', function(response) {
      localStorage.fbpicurl = response.data.url;
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:51:56.767

您可以像这样使用 sencha 的延迟任务：

```
 var task = Ext.create(
                'Ext.util.DelayedTask',
                function() {
                    Ext.getCmp("imageId").setSrc( 'https://graph.facebook.com/username/picture' );
                }
            );
        task.delay(100); 
```

这将在 100 毫秒后开始下载图像。我希望这是你想要做的，如果不是，那么在函数中做任何延迟任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:06:06.597

您可以将其转换为 base64 并将其存储在 localStorage 中。但是 LocalStorage 的空间限制为 5MB。达到限制后，设备将提示用户提供更多空间。

除了 Sencha Touch，你还使用 phonegap 吗？Phonegap 提供对手机文件系统的访问，您可以在其中存储图片。

Phonegap 文件 API：[http ://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#File)

# css - 如何使用 :before 和 :after 创建内联样式

> ID：14436155
> 
> 赞同：93
> 
> 时间：2013-01-21T09:59:01.523
> 
> 标签：css, inline

[我从http://www.ilikepixels.co.uk/drop/bubbler/](http://www.ilikepixels.co.uk/drop/bubbler/)生成了一个泡泡聊天的东西

在我的页面中，我在其中放了一个数字

```
.bubble {
  position: relative;
  width: 20px;
  height: 15px;
  padding: 0;
  background: #FFF;
  border: 1px solid #000;
  border-radius: 5px;
}

.bubble:after {
  content: "";
  position: absolute;
  top: 4px;
  left: -4px;
  border-style: solid;
  border-width: 3px 4px 3px 0;
  border-color: transparent #FFF;
   display: block;
  width: 0;
  z-index: 1;
}

.bubble:before {
  content: "";
  position: absolute;
  top: 4px;
  left: -5px;
  border-style: solid;
  border-width: 3px 4px 3px 0;
  border-color: transparent #000;
  display: block;
  width: 0;
  z-index: 0;
} 
```

我希望`background-color`气泡的值根据其中的数字通过`rgb`

所以如果我的 div 是

```
<div class="bubble" style="background-color: rgb(100,255,255);"> 100 </div> 
```

我想要的颜色是`rgb(100,255,255)`

问题是这不会影响三角形。

如何编写内联 css，使其包含 :before 和 :after？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2017-10-04T19:46:09.730

您可以使用[CSS 变量](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables)（更准确地说，称为 CSS 自定义属性）。

*   在 style 属性中设置变量：
    `style="--my-color-var: orange;"`
*   在样式表中使用变量：
    `background-color: var(--my-color-var);`

[浏览器兼容性](https://caniuse.com/css-variables)

# 最小的例子：

```
div {
  width: 100px;
  height: 100px;
  position: relative;
  border: 1px solid black;
}

div:after {
  background-color: var(--my-color-var);
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
}
```

```
<div style="--my-color-var: orange;"></div>
```

# 你的例子：

```
.bubble {
  position: relative;
  width: 30px;
  height: 15px;
  padding: 0;
  background: #FFF;
  border: 1px solid #000;
  border-radius: 5px;
  text-align: center;
  background-color: var(--bubble-color);
}

.bubble:after {
  content: "";
  position: absolute;
  top: 4px;
  left: -4px;
  border-style: solid;
  border-width: 3px 4px 3px 0;
  border-color: transparent var(--bubble-color);
  display: block;
  width: 0;
  z-index: 1;

}

.bubble:before {
  content: "";
  position: absolute;
  top: 4px;
  left: -5px;
  border-style: solid;
  border-width: 3px 4px 3px 0;
  border-color: transparent #000;
  display: block;
  width: 0;
  z-index: 0;
}
```

```
<div class='bubble' style="--bubble-color: rgb(100,255,255);"> 100 </div>
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-01-21T10:34:27.127

你不能。使用内联样式，您可以直接定位元素。你不能在那里使用其他选择器。

但是，您可以做的是在样式表中定义不同的类来定义不同的颜色，然后将类添加到元素中。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2013-04-15T03:16:40.830

关键是`background-color: inherit;`在伪元素上使用。
见：http: [//jsfiddle.net/EdUmc/](http://jsfiddle.net/EdUmc/)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-10-09T15:33:57.553

如果你真的需要它内联，例如因为你正在动态加载一些用户定义的颜色，你总是可以`<style>`在你的内容之前添加一个元素。

```
<style>#project-slide-1:before { color: #ff0000; }</style>
<div id="project-slide-1" class="project-slide"> ... </div> 
```

* * *

使用 PHP 和一些（受 wordpress 启发的）虚拟函数的示例用例：

```
<style>#project-slide-<?php the_ID() ?>:before { color: <?php the_field('color') ?>; }</style>
<div id="project-slide-<?php the_ID() ?>" class="project-slide"> ... </div> 
```

从 HTML 5.2 开始，将样式元素放在正文中是有效的，尽管仍然建议将样式元素放在头部。

参考：[https ://www.w3.org/TR/html52/document-metadata.html#the-style-element](https://www.w3.org/TR/html52/document-metadata.html#the-style-element)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-18T11:58:09.037

*我通过边框颜色*解决了类似的问题：继承

 *， 看：

```
<li style="border-color: <?php echo $hex ?>;">...</li>

li {
    border-width: 0;
}

li:before {
    content: '';
    display: inline-block;
    float: none;
    margin-right: 10px;
    border-width: 4px;
    border-style: solid;
    border-color: inherit;
} 
```*

# java - 如何在ubuntu中更改java home

> ID：14436158
> 
> 赞同：0
> 
> 时间：2013-01-21T09:59:10.507
> 
> 标签：java, ubuntu, ubuntu-12.04

我的机器 java 版本是 1.6，java home 是 1.7。如何使用终端将其更改为 1.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:03:20.493

使用“update-java-alternatives”命令。简单地去：

```
update-java-alternatives -l 
```

这将列出您安装的可用jdks，然后简单地

```
update-java-alternatives -set [name] 
```

更改您需要的 java 版本。

# android - R.java 不是为 android 生成的

> ID：14436171
> 
> 赞同：1
> 
> 时间：2013-01-21T09:59:54.843
> 
> 标签：android, eclipse

我正在使用 eclipse 并且`R.java`没有生成文件。我从其他讨论中了解到，由于布局内容不正确，这可能是一个问题。这是我的 SDK 生成的布局文件。我不确定错误是什么。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/first_android_app" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:11:47.807

请查看您的资源文件，您的 XML 文件或大写的图像名称中会有一些错误。一旦修复，然后清理项目并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:14:54.403

**缺少 R.java 的原因**可能是

*   当你没有正确命名你的drawables时
*   当您的布局出现问题时
*   当您忘记在 AndroidManifest 文件中注册内容（活动等）时
*   当清单和其他地方的包名冲突时
*   有时多个包装可能会出现此问题

**提示：查看控制台中的错误，看看它指的是哪里！**

**事实：** 清理项目并不总是能解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:05:22.330

尝试清理并构建或使用 IntelliJ IDEA 进行 Android 开发:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:06:03.610

我在这里没有看到任何错误，尝试清理并重新启动 Eclipse。也可能是您导入的文件包含大写字母或任何其他不受支持的字符。请更清楚，因为这不会帮助你。在出现此问题之前，您还做了什么？您看到的错误信息是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T19:35:48.870

这是您的解决方案：

打开终端窗口并输入

sudo apt-get install ia32-libs

即使您使用的是 64 位操作系统，这也会再次帮助您。它对我来说非常有效。

# ios - iOS上的实时网络统计

> ID：14436172
> 
> 赞同：0
> 
> 时间：2013-01-21T09:59:55.780
> 
> 标签：ios, usage-statistics

我知道可以通过 iphone 的内置设置检查 wifi 和 Data 的流量使用情况。但是有没有像库或函数这样的解决方案来获取设备的实时网络使用情况（上传/下载）？（像实时网络统计）

可达性是我发现的关于提到的事情之一。 [http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324-Intro-DontLinkElementID_2](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324-Intro-DontLinkElementID_2)

这个应用程序做了类似的事情： [https ://itunes.apple.com/us/app/data-control-manage-data-usage/id390646992?mt=8](https://itunes.apple.com/us/app/data-control-manage-data-usage/id390646992?mt=8)

有谁知道要调用什么类或寻找什么特定的方法来访问实时流量？

我希望我的问题是可以理解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-05T13:11:59.663

没有高级 API 来支持这一点，但由于 iOS 只是一个相当漂亮的 unix，您当然可以使用标准 API。

在这种情况下，您将寻找 getifaddrs，它检索描述设备上各种接口的内存结构。

然后，您必须解析这些 C 结构，以获取所需的接口详细信息。

getifaddr 接口*已*记录在案 (man getifaddr)，因此您可以使用它。

我将添加一些代码，但首先要注意几点。Apple 并不真正费心维护这些东西，所以网络数量是 32 位，所以你必须处理 4Gb 翻转。数据包计数大多在那里，我认为 tx 数据包计数始终为 0，但无论如何谁对数据包计数感兴趣。

您可能可以通过搜索 getifaddrs 在这里找到更好的代码，但这里有一个简短的版本可以帮助您入门。

```
#include <sys/types.h>
#include <sys/sysctl.h>
#include <sys/socket.h>
#include <ifaddrs.h>
#include <net/if_var.h>

    struct ifaddrs* addrs;

    int getIFAddrsResult = getifaddrs(&addrs);
    if (getIFAddrsResult == 0)
    {
        struct ifaddrs* addrsPtr = addrs; // need to keep original for freeifaddrs
        while (addrsPtr != NULL)
        {
            NSString *name = [NSString stringWithFormat:@"%s",addrsPtr->ifa_name];
            //NSLog(@"ifa_name %s == %@\n", cursor->ifa_name,name);
            // names of interfaces: en0 is WiFi ,pdp_ip0 is WWAN

            if (addrsPtr->ifa_addr->sa_family == AF_LINK)
            {
                const struct if_data* stats = (const struct if_data *) addrsPtr->ifa_data;

                // We only consider the active data interface, and that will normally be the '0' interface.
                if ([name isEqualToString:@"en0"])
                {
                     // Wifi
                     // look at stats->ifi_obytes & ifi_ibytes

                } else if ([name isEqualToString:@"pdp_ip0"])
                {
                   // mobile broad band
                } else {
                   // could be bluetooth, usb, ad hoc wifi, out of band signalling...
                }
            }

            addrsPtr = addrsPtr->ifa_next;
        }

        freeifaddrs(addrs);
    } else {
        NSLog(@"getifaddrs failed with error : %s", strerror(getIFAddrsResult));
        return nil;
    } 
```

PS我要去拿我的钻石复活旧问题徽章:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-07T23:28:58.863

iOS中没有这样的API，您提到的App（以及所有类似的应用程序）依赖于运营商提供的API（或解析运营商网站）。如果你想实现这种App，恐怕你必须为你感兴趣的每一个可能的运营商找到一些东西。

# git - 我可以获得分支机构及其遥控器的列表吗？

> ID：14436173
> 
> 赞同：2
> 
> 时间：2013-01-21T10:00:00.560
> 
> 标签：git

我可以通过以下方式查看我的本地分支机构：

```
$ git branch
  1364_29
  master
* pp_master 
```

这些分支来自不同的远程存储库，我知道找出它们究竟来自哪个存储库的唯一方法是检查我的`.git/config`

```
$ cat .git/config
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = git@github.com:myshare/webkit2-pp.git
[branch "master"]
        remote = origin
        merge = refs/heads/master
[remote "base"]
        url = git@github.com:myshare/base.git
        fetch = +refs/heads/*:refs/remotes/base/*
[branch "pp_master"]
        remote = origin
        merge = refs/heads/pp_master
[branch "1364_29"]
        remote = base
        merge = refs/heads/1364_29 
```

有没有简单的方法列出他们的关系？例如：

```
$ git ...
  1364_29    base/1364_29       git@github.com:myshare/base.git
  master     origin/master      git@github.com:myshare/webkit2-pp.git
* pp_master  origin/pp_master   git@github.com:myshare/webkit2-pp.git 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:08:40.530

您可以使用`git branch -a`或`git branch -r`

如果你使用`git branch -a`你的输出将是：

```
 develop
* feature/shopping_cart
  master
  release/v1.1
  remotes/origin/develop
  remotes/origin/feature/shopping_cart
  remotes/origin/feature/login
  remotes/origin/master
  remotes/origin/release/v1.1 
```

如果你使用`git branch -r`你的输出将是：

```
 origin/develop
  origin/feature/shopping_cart
  origin/feature/login
  origin/master
  origin/release/v1.1 
```

# typescript - TypeScript：将模块拆分为多个文件

> ID：14436175
> 
> 赞同：6
> 
> 时间：2013-01-21T10:00:02.817
> 
> 标签：typescript

我想将同一模块中的类定义拆分为多个文件。所以我确实喜欢这个并且它奏效了。

```
a.ts:
module MyModule{
    class ClassA{
    }
}

b.ts:
module My Module{
    class ClassB{
    }
} 
```

然后我尝试在 ClassB 中使用 ClassA 并做到了：

```
b.ts:
///<reference path="a.ts"/>
module MyModule{
    class ClassB{
        private a:ClassA;
    }
} 
```

但它没有用；b.ts 中的“ClassA”需要是“MyModule.ClassA”，尽管它们在同一个模块中。

我更喜欢像上面这样更简单的方法。你有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:34:40.947

您可以通过公开课程来解决您的问题：

```
module MyModule{
    export class ClassA{
    }
} 
```

我不确定你为什么需要这样做，因为它们实际上是同一个模块的一部分 - 但似乎就是这种情况。

# c# - 在c#的标签中显示全文

> ID：14436176
> 
> 赞同：5
> 
> 时间：2013-01-21T10:00:03.300
> 
> 标签：c#, .net, string, winforms, substring

我有一个`label`控制权`windows form`。我想在`label`. 条件是这样的：

*   如果文本长度超过 32 个字符，它将出现在新行中。
*   如果可能的话，用完整的单词分割，不带连字符（-）。

    到目前为止，我已经达到了以下代码：

    ```
     private void Form1_Load(object sender, EventArgs e)
        {
            string strtext = "This is a very long text. this will come in one line.This is a very long text. this will come in one line.";
            if (strtext.Length > 32)
            {              
                IEnumerable<string> strEnum = Split(strtext, 32);
                label1.Text =string.Join("-\n", strEnum);
            }         
        }
        static IEnumerable<string> Split(string str, int chunkSize)
        {
            return Enumerable.Range(0, str.Length / chunkSize)
                .Select(i => str.Substring(i * chunkSize, chunkSize));
        } 
    ```

但问题是最后一行没有完全显示，因为它被 32 个字符分割。

还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:45:01.680

我不知道您是否会接受不使用 linq 的答案，但这很简单：

```
string SplitOnWholeWord(string toSplit, int maxLineLength)
{
    StringBuilder sb = new StringBuilder();
    string[] parts = toSplit.Split();
    string line = string.Empty;
    foreach(string s in parts)
    {
        if(s.Length > 32)
        {
            string p = s;
            while(p.Length > 32)
            {
                int addedChars = 32 - line.Length;
                line = string.Join(" ", line, p.Substring(0, addedChars));
                sb.AppendLine(line);
                p = p.Substring(addedChars);
                line = string.Empty;
            }
            line = p;
        }
        else
        {
            if(line.Length + s.Length > maxLineLength)
            {
                sb.AppendLine(line);
                line = string.Empty;
            }
            line = (line.Length > 0 ? string.Join(" ", line, s) : s);
        }
    }
    sb.Append(line.Trim());
    return sb.ToString();
} 
```

打电话给

```
string result = SplitOnWholeWord(strtext, 32); 
```

可以轻松地将其转换为扩展方法：

将上面的代码放在一个单独的文件中，并创建一个静态类

```
public static class StringExtensions
{
     public static string SplitOnWholeWord(this string toSplit, int maxLineLength)
     {
          // same code as above.....
     }

} 
```

并以这种方式调用它：

```
string result = strtext.SplitOnWholeWord(32); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:26:00.090

试试这个..

```
string strtext = "This is a very long text. this will come in one line.This is a very long text. this will come in one line.";
if (strtext.Length > 32)
{
   IEnumerable<string> strEnum = Split(strtext, 32);
   string a = string.Join("-\n", strEnum);
   if ((strtext.Length % 32)>0)
   {
      string lastpart = strtext.Substring(((strtext.Length / 32) * 32));
      a = a + "-\n" + lastpart;
   }
   label1.Text=a;
 } 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:12:29.747

您必须在以下计算中取结果的上限

```
str.Length / chunkSize 
```

现在它将返回结果的整数部分并忽略是否有任何提醒，因此如果您在 str 中有 120 个字符，并且您的块大小为 50，则上述计算将给出 result = 2，您将其用作块，这是错误的，你需要 3 在这里。

为确保您的除法工作正常，您可以在 str.length 中添加额外的长度

使用以下代码：

```
static IEnumerable<string> Split(string str, int chunkSize)
{
    return Enumerable.Range(0, (str.Length+chunkSize-1) / chunkSize)
        .Select(i => str.Substring(i * chunkSize, (str.length-(i*chunkSize))>=chunkSize? chunkSize:str.length-(i*chunkSize)));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:13:19.273

你可以试试

```
static IEnumerable<string> Split(string str, int chunkSize)
    {
        var count = str.Length / chunkSize;
        var result=Enumerable.Range(0, count)
            .Select(i => str.Substring(i * chunkSize, chunkSize));
        var end = count * chunkSize;
        if (end < str.Length) {
            result = result.Concat(str.Substring(end, str.Length - end));
        }
        return result;
    } 
```

或者

```
static IEnumerable<string> Split(string str, int chunkSize)
    {
       for (var i=0; i<str.Length; i+=chunkSize) {
           yield return str.Substring(i, Math.Min(str.Length-i, chunkSize));
       }
    } 
```

编辑：合理的分裂，评论后

```
static IEnumerable<string> split(string str,int chunkSize) {
    var words=str.Split(' ');
    var line=new StringBuilder(chunkSize);
    for (var i=0; i<words.Length;i++) {
        var word=words[i];
        if (line.Length + word.Length + 1 > chunkSize) {
            if (line.Length == 0) {
                for(var x=0;x<word.Length/chunkSize;x++) {
                    yield return word.Substring(x*chunkSize,chunkSize);
                }
                var remainder = word.Length % chunkSize;
                if (remainder>0) {
                    line.Append(word.Substring(word.Length-remainder, remainder));
                }
            } else {
                yield return line.ToString();
                line.Clear();
                i--; // Force reprocessing this word
            }
        }  else {
            if (line.Length>0) {
                line.Append(" ");
            }
            line.Append(word);
        }
    }
} 
```

不要忘记改变你`string.Join("-\n")`的存在`string.Join("\n")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T10:29:48.860

把我的答案混在一起。这有效：

```
static IEnumerable<string> Split(string str, int chunkSize) {
    int difference = (str.Length % chunkSize);
    int count = str.Length / chunkSize;
    return Enumerable.Range(0, count + 1)
        .Select(i => str.Substring(i * chunkSize, i == count ? difference : chunkSize));
} 
```

# batch-file - 相同的 SSIS 包通过批处理文件以不同的参数并行执行

> ID：14436178
> 
> 赞同：0
> 
> 时间：2013-01-21T10:00:10.043
> 
> 标签：batch-file, ssis

我有一个包含 OLEDB 源和 OLEDB 目标的数据流任务的 SSIS 包。同样，我有一个批处理文件（.bat 文件）来执行 SSIS 包，使用 dtexec 命令。在批处理文件中，我正在设置 oledb 目标连接管理器的 ConnectionString 属性。我需要 SSIS 包以不同的目标连接字符串值并行执行，因为我必须同时填充多个目标表。

如何更改批处理文件命令，以便我可以同时并行执行相同的 SSIS 包，为目标连接管理器的连接字符串设置不同的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:50:53.037

您应该使用 START 命令来并行运行控制台应用程序。不要忘记添加标题作为第一个参数。您可以使用空引号作为空标题的第一个参数。

```
start "" yourProgram.exe parameter1 parameter2 ... 
```

您启动的每个命令都将在其自己的控制台窗口中运行。键入`start /?`或`help start`从命令提示符获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:43:08.343

德本汉姆是正确的。在批处理文件中使用 Start 命令（使用您的示例）：

启动 "实例 1" dtexec /FILE "C:\Users\Desktop\SSIS\PKG.dtsx" /MAXCONCURRENT " 2 " /SET "\Package.Connections[Destination].Properties[ConnectionString]";\""Data Source= datasrc1；初始目录=db1；用户ID=usrid；密码=pswd；提供者=SQLOLEDB.1；"\"

开始 "实例 2" dtexec /FILE "C:\Users\Desktop\SSIS\PKG.dtsx" /MAXCONCURRENT " 2 " /SET "\Package.Connections[Destination].Properties[ConnectionString]";\""Data Source= datasrc2；初始目录=dbn2；用户ID=usrid；密码=pswd；提供者=SQLOLEDB.1；"\"

这些将与不同的 Destination ConnectionString 值并行执行。

# c# - 远程主机强制关闭现有连接 - WCF 数据服务错误

> ID：14436181
> 
> 赞同：8
> 
> 时间：2013-01-21T10:00:15.137
> 
> 标签：c#, entity-framework, wcf-data-services

我目前正在将 WCF 数据服务（好吧，ADO.Net 数据服务）与实体框架一起使用，并且在执行 POST 时收到以下错误（省略/更改了一些不相关的信息）：

```
<?xml version="1.0" encoding="utf-8"?><m:error xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><m:code /><m:message xml:lang="en-GB">The URI 'http://localhost:56568/MyWcfDataServices.svc/EntitySetName(pk_id)' is not valid for POST operation. For POST operations, the URI must refer to a service operation or an entity set.</m:message></m:error> 
```

在网上浏览了一下，我似乎找不到关于这条消息的太多信息，所以调试它有点困难。这很可能会发生，因为我发布的属性之一是一个大的 base64 字符串（如果我不发布它就可以正常工作）。我尝试将其设置`maxRequestLength`为以下内容：

```
<httpRuntime maxRequestLength="102400" /> 
```

但这似乎没有帮助。虽然我会继续解决这个问题，但我想我会在这里快速发布一个帖子，看看是否有人知道可能有帮助的东西。

我的 WCF 数据服务类如下所示：

```
public class MyWcfDataServices: DataService<ContextName>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        // set entity access rules etc
    }
} 
```

谢谢

**编辑**：我似乎对此一无所获。这是我到目前为止所尝试的。

在服务器端，我设置了以下绑定：

```
<system.serviceModel>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" 
                             minFreeMemoryPercentageToActivateService="0" />
  <services>
    <service name="MyWcfDataServices" 
             behaviorConfiguration="myBehaviorConfig">
      <endpoint address=""
                binding="webHttpBinding"
                bindingConfiguration=""
                contract="System.Data.Services.IRequestHandler" />
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="myBehaviorConfig">
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
        <dataContractSerializer maxItemsInObjectGraph="2147483647" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

希望该`maxItemsInObjectGraph`属性将是解决方案。这些绑定看起来正确吗？我是否遗漏了一些可以让我向服务器发布更多数据的属性？我是否也需要在客户端上配置此服务行为？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T14:56:59.580

好的，这就是我为解决问题所做的工作。首先，我通过将以下内容添加到我的 web.config 中来启用服务器上的跟踪：

```
<system.diagnostics>
  <sources>
    <source name="System.ServiceModel"
            switchValue="Information, ActivityTracing"
            propagateActivity="true">
      <listeners>
        <add name="traceListener"
            type="System.Diagnostics.XmlWriterTraceListener"
            initializeData="c:\logs\Traces.svclog"  />
      </listeners>
    </source>
  </sources>
</system.diagnostics> 
```

这给了我更多关于这些问题的信息，特别是在我的情况下，最大请求长度仍然是**65536**，这表明我的绑定没有被拾取。这归结为两件事，首先`name`我的`service`配置部分不正确 - 它需要包含命名空间信息。我最终得到了这个（我也必须把它放在客户端的 web.config 中）：

```
<services>
  <service name="Solution.Project.MyWcfDataServices">
    <endpoint address=""
              binding="webHttpBinding"
              bindingConfiguration="webHttpConfig"
              contract="System.Data.Services.IRequestHandler" />
  </service>
</services>
<bindings>
  <webHttpBinding>
    <binding name="webHttpConfig" 
              allowCookies="true"
              maxReceivedMessageSize="20000000"
              maxBufferSize="20000000"
              maxBufferPoolSize="20000000">
      <readerQuotas maxDepth="32"
                    maxArrayLength="200000000"
                    maxStringContentLength="200000000" />
    </binding>
  </webHttpBinding>
</bindings> 
```

最后，我不得不将 .svc 文件标记中的工厂从模板生成`System.Data.Services`的程序集更改为 Microsoft 的 ODATA 程序集（其中也包含 System.Data.Services 命名空间）`System.Data.Services.DataServiceHostFactory, Microsoft.Data.Services, Version=5.2.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35`。

我现在的头发比刚开始时少，但我想这就是你付出的代价。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-06T10:50:48.890

我遇到了这个问题，因为我的 DataContract 中的一些 DataMembers 只有 get 方法。例如

```
[DataMember]
public Name { get; } 
```

会导致这个错误。要解决您应该遇到的问题

```
[DataMember]
public Name {get; set;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-19T15:35:35.493

此错误的另一个原因是尝试将 an 声明`IReadOnlyDictionary`为`DataMember`.

```
[DataMember]
public IReadOnlyDictionary<String, Object> Foo { get; set; } 
```

修复非常简单：只需使用它`IDictionary`。

```
[DataMember]
public IDictionary<String, Object> Foo { get; set; } 
```

我认为这也适用于其他实现，`IReadOnlyCollection`例如`IReadOnlyList`.

# memory-leaks - PS幸存者空间快满了

> ID：14436183
> 
> 赞同：17
> 
> 时间：2013-01-21T10:00:27.113
> 
> 标签：memory-leaks, garbage-collection, jvm

我看到我的应用程序大部分时间 PS 幸存者空间几乎已满 (98 %)。我不知道什么是 PS 幸存者空间。这是正常的吗？在这种情况下应该怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T19:10:13.180

首先，请参见此处：[什么是幸存者空间？](https://stackoverflow.com/q/10695298/772000)

通常，堆的 YoungGeneration 部分有 2 个幸存者空间（例如，对于 Hostpot VM）。它们的存在是为了让对象在升级到老一代之前**成熟。**因为清理老一代的成本更高。

收集一些统计数据以查看幸存者空间是否大部分时间都已满。您应该看到一个总是空的，而另一个正在填充。参见例如这个问题[收集 GC 统计信息](https://stackoverflow.com/q/6871213/772000)。

获得数据后，查找：

*   **幸存者空间溢出**- 当幸存者空间太小而无法让对象在 YoungHeap 集合之间成熟并且对象在没有时间成熟的情况下溢出到 OldGeneration（并且在被提升之前死亡）时，就会发生这种情况。

*   此外，使用监控**任期分布**`-XX:+PrintTenuringDistribution`。看看对象成熟的速度有多快。

**更新：**阅读 [热点内存管理白皮书](http://www.oracle.com/technetwork/java/javase/tech/memorymanagement-whitepaper-1-150020.pdf)并查看**串行收集器**部分，对幸存者空间有很好的解释：

> 注意：如果**To**空间已满，来自**Eden**或**From**的未复制到它的活动对象将是**tenured**，无论它们存活了多少年轻代集合。根据定义，在复制活动对象后留在**Eden**或**From**空间中的任何对象都不是活动的，并且不需要检查它们。

# debian - 如何在 debian 6.0 中安装 as86？

> ID：14436184
> 
> 赞同：3
> 
> 时间：2013-01-21T10:00:27.490
> 
> 标签：debian, as86

我需要在 debian 6.0 中安装 as86。但是，我在 debian-6.0-DVD 中找不到 as86。那么，在哪里可以找到 as86 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T10:04:54.283

如果您尝试通过查看文件名来查找 DVD 上的软件包，那么是时候尝试一下`apt-cache search`了：

```
# apt-cache search as86
bin86 - 16-bit x86 assembler and loader 
```

现在我们知道它在`bin86`包装中，我们这样做：

```
# apt-get install bin86 
```

# c++ - 使用 Xerces 解析 XML 时忽略初始数据

> ID：14436185
> 
> 赞同：0
> 
> 时间：2013-01-21T10:00:44.117
> 
> 标签：c++, c, xerces-c

我希望这里有人对使用 xerces-c 有所了解。我有一个包含有效 XML 数据包的字符串。然而，它有一些与 XML 无关的主要数据。是否可以让 xerces-c SAXParser 忽略任何前导数据并简单地解析它找到的第一个有效 XML？我正在使用非常简单的设置，甚至没有使用 DTD，如下所示：

```
 SAXParser* lp_parser(0);

  MySaxHandler l_handler; 

  lp_parser->setDocumentHandler((DocumentHandler *)&l_handler);
  lp_parser->setDoNamespaces(false); 
  lp_parser->setDoNamespaces(false); 
  lp_parser->setDoSchema(false);
  lp_parser->setValidationSchemaFullChecking(false);

  MemBufInputSource lp_membuf((const XMLByte*)l_data.c_str(),
                              l_data.size(), 
                              "My XML request",
                              false);

  lp_parser->parse(lp_membuf); 
```

l_data`std::string`包含我的 XML 数据包，包括初始数据，`MySaxHandler`是我保存我感兴趣的几个标签的地方。我当然可以跳过，直到我自己找到 XML 的开头，但这不是我希望的答案。

# c# - 如何使用正则表达式从字符串中提取日期

> ID：14436188
> 
> 赞同：0
> 
> 时间：2013-01-21T10:01:07.787
> 
> 标签：c#, regex

我正在寻找可以从以下html中提取日期的正则表达式

```
<p>British Medical Journal, 29.9.12, pp.37-41.</p> 
```

并将其转换为 29/09/12 格式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:03:24.193

匹配此模式：-

```
(\d+)[.](\d+)[.](\d+) 
```

并替换为： -

```
$1/$2/$3 
```

`\d`用于匹配`digits`。将它与 quantifier 一起使用`(+)`，您将匹配一个或多个数字。现在，在正则表达式中，a`dot(.)`是一个元字符，可以匹配任何字符。要匹配`period`字面意思，您需要转义它，或者在字符类中使用它。

* * *

要转换为特定的`Date Format`，例如： - convert `9`-> `09`，您可以使用`MatchEvaluator`： -

```
string input = "British Medical Journal, 29.9.12, pp.37-41.";
Regex reg = new Regex(@"(\d+)[.](\d+)[.](\d+)");
string result = reg.Replace(input, delegate(Match m) {
    return m => DateTime.Now.ToString("dd/MM/yy")
}); 
```

您可以检查它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:10:14.630

这是正则表达式模式：`\d{1,2}\.\d{1,2}\.\d{1,2}`.

下面是如何将此字符串解析为 DateTime 的示例：

```
DateTime.ParseExact("29.9.12", "d.M.yy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T07:09:58.123

`(\d{4})[-](\d{2})[-](\d{2})`使用此正则表达式选择 2017-01-23 格式日期

# wpf - 动态显示/隐藏 WPF DataGrid 标题列

> ID：14436191
> 
> 赞同：0
> 
> 时间：2013-01-21T10:01:20.193
> 
> 标签：wpf, wpfdatagrid, datagridcolumnheader

我正在使用 VS 2010。我只想在网格鼠标悬停时显示 Datagrid 标题。我写了以下代码，但它不起作用。

```
<StackPanel>
  <DataGrid  ItemsSource="{Binding SelectedItemsCollectionView}"
      AutoGenerateColumns="False" CellStyle="{StaticResource CellStyle}" 
      GridLinesVisibility="None"  RowHeight="28" HeadersVisibility="None"  
      ClipToBounds="True" AllowDrop="True" >
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Path=DisplaySequence}"/>
        </DataGrid.Columns>
        <DataGrid.Style>
            <Style TargetType="DataGrid">
                <Setter Property="HeadersVisibility" Value="None" />
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="HeadersVisibility" Value="Column" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </DataGrid.Style>
    </DataGrid>
</StackPanel> 
```

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:29:35.667

只需删除 DataGrid 标记中的 HeadersVisibility="None" 即可。它工作正常。

HeadersVisibility 是一个依赖属性。它们具有值解析策略。与触发值相比，本地值具有更高的优先级。

![在此处输入图像描述](../Images/eb634a011710e57044eb1265fda33f3f.png)

来源。详情 [请看这里](http://www.wpftutorial.net/DependencyProperties.html)

# python - pip 不断从路径中的 'site-packages' 中删除 'site--packages' 和 egg's

> ID：14436196
> 
> 赞同：1
> 
> 时间：2013-01-21T10:01:36.707
> 
> 标签：python, import, importerror

**编辑：**看起来 pip 是罪魁祸首，但不知道如何解决它

* * *

我的 Python 2.7 安装似乎有点问题。时不时地，没有明显的原因，以前工作的模块导入（如下面的模块）停止工作。

```
> import networkx
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named networkx 
```

在进行了一些挖掘之后，我发现 fro 的输出`print sys.path`比预期的要稀疏得多（抱歉没有输出，下次发生时会更新）。据我记得，它没有来自“site-packages”的“site--packages”和egg。

我发现解决此问题的唯一方法是重新运行安装程序并“修复”Python。这已经变得令人厌烦，我想找到它的根本原因。

1.  **有没有人遇到过这个问题？你是怎么解决的**
2.  **我可以做些什么来追踪这个问题的原因？**

* * *

**更新 1**这是`sys.path`发生此问题时的输出

```
['', 'C:\\Windows\\system32\\python27.zip', 
'C:\\Python27\\Lib', 'C:\\Python27\\DLLs', 
'C:\\Python27\\Lib\\lib-tk',
'c:\\Python27', 'd:\\dev\\bin'] 
```

* * *

**更新 2**再次发生，这次我复制了 python27 文件夹，运行了修复程序（也称为修复安装），然后对文件进行了比较，看看是否有任何差异。没有什么不同。还检查了`HKEY_LOCAL_MACHINE\SOFTWARE\Python\PythonCore\2.7`钥匙是否有任何奇怪的地方。有一个价值，`PythonPath`但这似乎没有任何问题。下次会检查。

# objective-c - 在自定义 segue 中从一个 UIViewController 转换到另一个

> ID：14436199
> 
> 赞同：0
> 
> 时间：2013-01-21T10:01:43.833
> 
> 标签：objective-c, ios5, uistoryboardsegue

此自定义 segue 在视觉上可以正常工作，但完成时会出现警告。

```
Warning: Attempt to present <DestViewController: 0x21059f40> on <SrcViewController: 0x1fd50cf0> whose view is not in the window hierarchy! 
```

任何有关如何在没有警告的情况下使其工作的帮助将不胜感激，在这方面花费的时间比我应该的要多。甚至不确定我是否应该关心它，因为这是一个警告。

```
- (void)perform {
    UIViewController *src = (UIViewController *)self.sourceViewController;
    UIViewController *dst = (UIViewController *)self.destinationViewController;

    dst.view.alpha = 0;

    [UIView animateWithDuration:0.5
                 animations:^{
                     [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                     [src.view addSubview:dst.view];
                     dst.view.alpha = 1;
                 }
                 completion:^(BOOL finished){
                     [dst.view removeFromSuperview];
                     //need to understand why this throws a warning but still works
                     [src presentViewController:dst animated:NO completion:^(){
                         [src reset];
                     }];
                 }];
} 
```

**更新**

在 src UIViewController 的 reset 方法中有一个停止 MPMoviePlayerController 的调用。出于某种原因导致该问题，一旦删除此 segue 就可以完美运行。有关 segue 的最终实现，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:34:17.517

您正在从 superview 中删除视图，即 src.view 并在它之后呈现相同的 viewController，因此它显示警告。

试试这个（如果这不起作用告诉我）：

```
[UIView animateWithDuration:0.5
                 animations:^{
                     [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                     dst.view.alpha = 1;
                 }
                 completion:^(BOOL finished){
                     [src presentViewController:dst animated:NO completion:^(){
                         [src reset];
                     }];
                 }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:30:17.043

虽然最初的问题是由 segue 之外的东西引起的，如上所述，我想我会为可能最终在这里的其他人发布完整的工作 segue 代码。此示例中的委托是一个自定义 UIViewController 容器，其中子 UIViewContainers 按以下方式添加为子项：

```
[self addChildViewController:childController_];
[self.view addSubview:childController_.view]; 
```

segue.h

```
#import <UIKit/UIKit.h>

@interface COFSimpleSegue : UIStoryboardSegue

@property (assign) UIViewController *delegate;

@end 
```

segue.m

```
#import "COFSimpleSegue.h"
#import <QuartzCore/QuartzCore.h>

@implementation COFSimpleSegue

@synthesize delegate = delegate_;

- (void)perform {
    UIViewController *src = (UIViewController *)self.sourceViewController;
    UIViewController *dst = (UIViewController *)self.destinationViewController;

    dst.view.frame = delegate_.view.bounds;
    dst.view.autoresizingMask = delegate_.view.autoresizingMask;

    [src willMoveToParentViewController:nil];

    [delegate_
       transitionFromViewController:src
       toViewController:dst
       duration:0.5f
       options:UIViewAnimationOptionTransitionCrossDissolve
       animations:^(void){}
       completion:^(BOOL finished) {
         [dst didMoveToParentViewController:delegate_];
         [src removeFromParentViewController];
       }
    ];
}

@end 
```

# javascript - 在文档加载时，如果选择选项更改，请替换“选择文本”

> ID：14436200
> 
> 赞同：0
> 
> 时间：2013-01-21T10:01:44.613
> 
> 标签：javascript, jquery, select, onchange, onload

我有一个客户想要拥有多个分发点，1 个位于东海岸，1 个位于西海岸

我使用的电子商务解决方案不支持这一点。我想出了一个解决方法，通过使用来自邮政编码的船作为键来提供多种运输选项。

我使用了一些 jQuery 来更改“运输选项”以反映分发位置。

这个想法可行，但我的弱点是 jquery，如果用户第二次更改运输选项，则选项默认恢复为原始电子商务默认选项。

到目前为止的代码是

```
jQuery(function($){ 
    var sel = document.getElementById('ShippingOptions');

    for(var i = sel.options.length - 1; i >= 0; i--) {
        if(sel.options[i].value == "-1")
            sel.options[i].text = "Select postage";
        if(sel.options[i].value == "75554")
            sel.options[i].text = "East Coast Distribution";
        if(sel.options[i].value == "75555")
            sel.options[i].text = "West Coast Distribution";

        $('#shippingSpan').text("Select postage");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:05:39.287

请不要混合使用 jQuery 和 DOM。

动态更改选择不是一个好主意。取而代之的是两个选择或一个隐藏字段，可以使用正确的运输进行更新。

分配点变更的触发因素是什么？

为什么这是一个问题？如果用户选择值为 75554 的选项，文本不是东海岸，如果他选择 75555，选项的文本不是西海岸吗？

我猜（根据提供的问题和代码）这就是您可能想要的：

[演示](http://jsfiddle.net/mplungjan/kRhH6/)

```
 var shippingOpts = { "75554":"East Coast Distribution", "75555":"West Coast Distribution" }

$(function() {    
  $('#ShippingOptions').on("change",function() {
    var val = $(this).val();
    $('#shippingSpan' ).text(
      (shippingOpts[val]) ? 
       shippingOpts[val] : 
       $("#ShippingOptions option:selected").text()
    );
  });

  // when page loads:
  $('#ShippingOptions').trigger("change");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:13:34.983

你可以像这样使用jquery。

```
 $('#selectorid option:selected').each(function(i, item){
      // $(this).value() to access value 
      // $(this).text() to access text
      // $(this).value(" set value here "); same way for text

      // use if else ladder or switch case 

     }); 
```

# domain-driven-design - 域驱动设计 - 如何检查域对象中一个属性的唯一性

> ID：14436202
> 
> 赞同：2
> 
> 时间：2013-01-21T10:01:54.970
> 
> 标签：domain-driven-design, repository-pattern, unique-constraint, specification-pattern

我正在使用域驱动设计开发应用程序。我一直在使用的模式之一是存储库模式。为了简单起见，假设我有以下类和接口。

Car - 代表汽车领域概念的领域类。

```
public class Car {
  public int Id {get;private set;}
  public string SomeUniqueCode {get;private set;}
} 
```

ICarRepository - 用于添加、删除或保存对 Car 对象的更改的接口。

```
public interface ICarRepository{
  Car  AddCar(Car c);
  void DeleteCar(Car c);
} 
```

我的问题是，如何检查数据库中所有 Car 对象中 SomeUniqueCode 属性的唯一性？该属性在对象生命周期中的任何时候都由用户更改（不是自动生成的）。当然，一种解决方案是将唯一键放入数据库中，但这不是 DDD 的原则。我见过用于验证单个对象的规范模式。该模式将如何应用于一组 Car 对象？

Specification 类（我们称之为 CheckUniqueCarSpecification）访问 ICarRepository 是否合法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:33:26.243

存储库模仿内存中的集合。我以前使用的是一种`Contains`方法，而不是一种`Find`方法，我想你也可以有。查询层也可以用于此。就像你有一个`CarRepository`你可以有一个`CarQuery`。尝试检查域中的唯一性有点令人讨厌。为了方便起见，我会进行检查，但仍然依赖数据库来引发异常，因为您也应该处理这种情况。为此使用规范模式可能比它值得付出更多的努力。

`Commit`由于存储库是一个“集合” ，我不会`Rollback`在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:55:40.657

使用 DomainService ICarCodesLibrary。

```
public class Car {
  ctor(string someUniqueCode, ICarCodesLibrary codes)
  {
    // the check
    codes.IsValidCode(someUniqueCode)
  }
  public int Id {get;private set;}
  public string SomeUniqueCode {get;private set;}
} 
```

在你创建 Car 对象并注入它的地方实现接口。还要摆脱属性并使用字段。ID 可以作为道具。

# php - 贝宝 | 自动接受通过我的购物车支付的款项

> ID：14436205
> 
> 赞同：5
> 
> 时间：2013-01-21T10:02:07.500
> 
> 标签：php, paypal, paypal-ipn

我已经创建了我的购物车，并通过 PayPal 完成了付款流程。

现在的问题是，当我收到付款时，我或买家需要手动接受来自 PayPal 仪表板的付款，以便将订单标记为已完成。

我想问的是，是否有任何方法可以自动接受付款，而无需登录我的 PayPal 仪表板。

我可以使用 PayPal API 自动接受付款吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T11:13:02.913

沙盒和您的主要 PayPal 帐户具有不同的配置，我认为 PayPal 沙盒专门保存所有付款，因此您可以“手动”接受它们以进行测试，或者您可以在帐户设置中更改此设置。

自动接受付款将在您的真实贝宝帐户上正常工作。

它还取决于您的 Paypal 帐户的配置货币 - 如果付款以您通常不接受的货币进行，它将保持付款待处理。您可能还需要配置您的帐户以接受其他货币。

# ruby-on-rails - 使用 :all 选项时 Cookie 设置为子域

> ID：14436211
> 
> 赞同：0
> 
> 时间：2013-01-21T10:02:34.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cookies

在我的会话控制器中，我想在用户登录时设置一个 cookie。

假设我访问*http://buy.example.com/login*，控制器将处理登录以及 cookie 设置，如下所示：

```
 cookies[:status] = { value: 'y', :domain => :all }
    redirect_to referrer_url 
```

我看到 cookie 设置在域*.buy.example.com*下，而不是*.example.com*。

该设置`:domain => :all`根本没有任何效果。

我正在使用 Rails 3.2.11。测试在 Chrome 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:30:08.793

您是否设置了 config/initializers/session_store.rb 文件

```
YourAppName::Application.config.session_store :cookie_store, 
:key => '_yourAppName_session', domain: {
  production: '.example.com',
  development: '.lvh.me'
}.fetch(Rails.env.to_sym, :all) 
```

使用此配置，您可以`lvh.me:3000`在开发中用作 url。

# java - 如何获取 id 属性的值 在 Struts 2 中的作用？

> ID：14436214
> 
> 赞同：0
> 
> 时间：2013-01-21T10:02:46.837
> 
> 标签：java, struts2

我有一个`textfield`这样的：

```
<s:textfield id="123456" name="abc" value="cateory name" /> 
```

可以获取Struts2 Action 类（即）中的**属性****值`id`**`123456`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:10:34.047

使用 OO（面向对象）编程，您应该定义一个 Category 类，其中包含 id 和 name 字段以及相关的访问器方法，如下所示：

```
public class Category{
   private long id;
   private String name;

   public String getName(){
      return this.name;
   }
   public void setName(String name){
      this.name = name;
   }

   public long getId(){
      return this.id;
   }
   public void setId(Long id){
      this.id = id;
   }
} 
```

然后根据您的需要使用隐藏或可见字段指向它们。

在您的情况下， ID 应该是一个隐藏字段：

```
<s:hidden name="category.id" value="123456" />
<s:textfield name="category.name" value="blabla" /> 
```

您甚至可以迭代一个类别列表，如下所示：

```
<s:iterator name="categories" var="cat" status="ctr">
   <s:hidden name="#cat[#ctr.index].id" value="123456" />
   <s:textfield name="#cat[#ctr.index].name" value="blabla" />
</s:iterator> 
```

并自动将它们发布回目标 Action 的 ArrayList 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:26:16.280

尝试

```
jQuery("input[name='abc']").attr("id"); 
```

# c# - 挂钩到浏览器的选项卡更改事件

> ID：14436215
> 
> 赞同：2
> 
> 时间：2013-01-21T10:02:50.527
> 
> 标签：c#, browser, hook

在一个正在进行的项目（Windows、.NET C#）中，我们遇到了开发瓶颈：我们必须观察所有主流浏览器（IE、FF、Chrome、Opera、Safari）中当前标签页的变化。

一旦捕获到选项卡更改事件，就必须将其写入文件。

这可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:42:24.943

我最终做的是以下内容：

跟踪窗口标题的 EVENT_OBJECT_NAMECHANGE

标题一更改，我就知道加载了“新”内容，因此我使用各种技术检查了浏览器的 URL（用于 Firefox 和 Opera 的 nDDE，检查 Chrome 的特定窗口类等...！ Thorsten 说这是不可能的，所以我只为主流浏览器实现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:07:04.747

我不知道这应该怎么做......你可以尝试的一件事是找到浏览器选项卡控件的窗口句柄并将其挂钩，但这是一项非常讨厌的任务。并且不能保证他们不使用自定义选项卡控件，所以我会说这不能完成。

你能提供更多关于你为什么需要这个的信息吗？也许还有其他您没有想到的解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:08:21.443

你可以结合这两个来得到你想要的：

[有没有办法检测浏览器窗口当前是否处于活动状态？](https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active)

和：

[Javascript；具有相同来源的选项卡/窗口之间的通信](https://stackoverflow.com/questions/2236828/javascript-make-tabs-windows-with-same-origin-communicate/12514384#12514384)

# java - 无法为 JSP 编译此类

> ID：14436217
> 
> 赞同：1
> 
> 时间：2013-01-21T10:02:56.883
> 
> 标签：java, jsp

考虑：

```
org.apache.jasper.JasperException: Unable to compile class for JSP:

An error occurred at line: 10 in the jsp file: /index.jsp
Mybean cannot be resolved to a type
7: <title></title>
8: </head>
9: <body>
10: <jsp:useBean id="bean1" class="Mybean"/>
11: <jsp:setProperty name="bean1"
12:                     property="name"
13:                     value="bean1" />

An error occurred at line: 17 in the jsp file: /index.jsp
Mybean cannot be resolved to a type
14:     <jsp:setProperty name="bean1"
15:                     property="id"
16:                     value="1" />
17:                     <jsp:getProperty name="bean1" property="name" />
18:                         <jsp:getProperty name="bean1" property="id" />
19:
20: </body>

org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
    org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
    org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:312)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:299)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我制作了一个带有 Mybean 名称的 Java 类。我正在使用 JSP 来设置属性和获取属性。我收到一个我无法解决的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:13:19.867

来自[JSP 规范](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDgQFjAB&url=http://jcp.org/en/jsr/detail?id=245&ei=nSL9UOXxFIzP0AWDnoD4DA&usg=AFQjCNH2K39o6YIKJiYJHGTAVE6xfdZYDA&bvm=bv.41248874,d.d2k)：

> 从 JSP 2.0 开始，引用未命名（也称为默认）包中的任何类都是非法的。

所以你的bean必须有一个包声明：

```
package foo;
public class MyBean {} 
```

包必须反映在应用程序结构中；例如：

```
WEB-INF/classes/foo/MyBean.class 
```

必须在标签中使用限定名称：

```
<jsp:useBean id="bean1" class="foo.MyBean"/> 
```

# drop-down-menu - joomla 动态下拉注册表单

> ID：14436218
> 
> 赞同：0
> 
> 时间：2013-01-21T10:03:04.817
> 
> 标签：drop-down-menu, joomla

1）我有一个基本的 Joomla 表单，其中包含国家、城镇和商店的三个
下拉列表 2）我需要根据上面提供的下拉列表获取下拉列表。

我已经实现了从数据库中获取数据并通过在 usercomponent 中的 registration.xml 中编码来创建下拉列表

**需要实现的目标：** 我正在尝试根据下拉列表中选择的上述数据创建动态下拉列表。

请帮助我我正在为此努力我找不到解决方案和代码突破

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:35:18.480

我在这里创建了一个基本的非 Joomla 示例

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>
<body>
<?php
    $username = "USERNAME";
    $password = "PASSWORD";
    $hostname = "localhost";

    $dbhandle = mysql_connect($hostname, $username, $password) or die("Unable to connect to MySQL");
    $selected = mysql_select_db("DATABASE", $dbhandle) or die("Could not select examples");

$result = mysql_query("SELECT * FROM `values`");
$values=array();
$counter=0;
while($row = mysql_fetch_array($result))
{
   $values[$counter]=$row{'country'};
   $counter++;
}

mysql_close($con);
?>
        <?php
            $i=0;
            $countries=array();
            foreach($values as $value) {
                $exists=false;
                if(count($countries)>0) {
                    foreach($countries as $something) {
                        if($something==$value) {
                            $exists=true;
                        }
                    }
                }
                if($exists==false) {
                    $countries[$i]=$value;
                    $i++;
                }
            }
        ?>
    <select id="first-choice">
        <option selected value="base">Please Select</option>
        <?php
            $k=0;
            while($k<count($countries)) {
                echo "<option value='".$countries[$k]."'>" . $countries[$k] . "</option>";
                $k++;
            }
        ?>
    </select>

    <br />

    <select id="second-choice">
        <option>Please choose from above</option>
    </select>

    <br />

    <select id="third-choice">
        <option>Please choose from above</option>
    </select>
    <script type="text/javascript">
    $("#first-choice").change(function() {
        $("#second-choice").load("getter.php?country=" + $("#first-choice").val());
    });
    $("#second-choice").change(function() {
        $("#third-choice").load("getter.php?town=" + $("#second-choice").val());
    });
    </script>
</body>
</html> 
```

名为 getter.php 的文件

```
<?php
    $username = "USERNAME";
    $password = "PASSWORD";
    $hostname = "localhost";

    $dbhandle = mysql_connect($hostname, $username, $password) or die("Unable to connect to MySQL");
    $selected = mysql_select_db("DATABASE", $dbhandle) or die("Could not select examples");

    if($_GET['country']) {
        $countries = mysql_real_escape_string($_GET['country']);

        $query = "SELECT * FROM `values` WHERE country='".$countries."'";

        $result = mysql_query($query);

        $values=array();
        $i=0;
        while($row = mysql_fetch_array($result))
        {
           $values[$i]=$row{'town'};
           $i++;
        }
        $i=0;
        $towns=array();
        foreach($values as $value) {
            $exists=false;
            if(count($towns)>0) {
                foreach($towns as $town) {
                    if($town==$value) {
                        $exists=true;
                    }
                }
            }
            if($exists==false) {
                $towns[$i]=$value;
                $i++;
            }
        }
        $k=0;
        echo "<option selected value='base'>Please Select an Option</option>";
        while ($k<count($towns)) {
            echo "<option value=".$towns[$k].">" . $towns[$k] . "</option>";
            $k++;
        }
    } elseif ($_GET['town']) {
        $town = mysql_real_escape_string($_GET['town']);
        $query = "SELECT * FROM `values` WHERE town='".$town."'";

        $result = mysql_query($query);

        echo "<option selected value='base'>Please Select an Option</option>";

        while ($row = mysql_fetch_array($result)) {
            echo "<option>" . $row{'shop'} . "</option>";
        }   
    }
?> 
```

基于[这里](http://css-tricks.com/examples/DynamicDropdown/)的教程。到 Joomla 上来。您需要将 getter.php 文件放入模型并通过 JSON 调用它（使用合适的控制器）。请记住用 JText 替换所有可见文本 - 这样它就可以用语言文件制作。您还需要将 jquery 添加到标题中，`JDocument::addScript`或者如果您使用 Joomla 3.0 就`JHtml::_('jquery.framework');`足够了。您还必须使用 Joomla 连接到数据库`JFactory::getDBO`

[我在这里](http://joomjunk.co.uk/web-design/demo/dropdown.php)放了一个基本的例子。

一些注意事项：您可能希望调用特定版本的 JQuery，因为它会不断更新。1.9.0 工作正常 - 但我不知道当 2.0.0 发布时该链接上将托管什么以及将包含哪些浏览器兼容性。

这假设数据库结构为

`id country town shop`. 当然，我怀疑您的数据库方案是否那么容易。因此，请记住根据需要进行调整。

希望这应该让你开始:)

# javascript - 单击 RadButton Telerik 时调用存在于 java 脚本中的函数

> ID：14436224
> 
> 赞同：1
> 
> 时间：2013-01-21T10:03:14.363
> 
> 标签：javascript, button, click

单击RadButton Telerik时如何调用Java脚本中存在的函数？我使用此代码但它不起作用

```
 <telerik:RadButton ID="RadButtonClear" runat="server" Height="40px" Text="Clear" 
                OnClientClicked="x();">
            </telerik:RadButton>

    <input name="text" id="idname"/> 
```

javascript代码：

```
 <script type="text/javascript"  language="JavaScript" >
     function x(button, args)
           {
              document.getElementById('idname').value = "1";
            }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:59:25.767

```
<telerik:RadButton ID="RadButtonClear" runat="server" Height="40px" Text="Clear" 
                OnClientClicked="x">
            </telerik:RadButton>

<input name="text" id="idname"/> 
```

尝试这个......

# ios - 为什么我可以在 viewWillAppear 中更改单元格的框架？

> ID：14436234
> 
> 赞同：0
> 
> 时间：2013-01-21T10:03:45.087
> 
> 标签：ios, tableview

```
-(void)viewWillAppear:(BOOL)animated{
    self.cell4.frame = CGRectMake(self.cell4.frame.origin.x, self.cell4.frame.origin.y, self.cell4.frame.size.width, self.cell4.frame.size.height + 60);
    self.cell5.frame = CGRectMake(self.cell5.frame.origin.x, self.cell5.frame.origin.y + 60, self.cell5.frame.size.width, self.cell5.frame.size.height);
} 
```

我发现单元格的框架已经改变，但在 ui 中它没有改变。有什么工作应该做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:11:06.880

在里面写代码

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    // set cell's height yourself

} 
```

会修复它。

# ios - 移动应用程序与网络应用程序 - 苹果不再接受网络应用程序？

> ID：14436235
> 
> 赞同：5
> 
> 时间：2013-01-21T10:03:52.027
> 
> 标签：ios, cordova, mobile

我似乎无法在网络上或 SO 或 Android SO 上找到它。

基本上我打算用 PHP/MySQL 后端制作一个简单的、响应式的 HTML5 移动网站——​​它就像一个日记/轨道规划器。然后我希望使用 Phonegap、Titanium 或其他一些库来快速制作移动应用程序文件，然后将其发布到市场上——不会有真正的原生功能。

我刚刚从表弟那里听说，Apple 不再接受非本地应用程序 - 因此 Phonegap 和其他应用程序必须使用本地功能。这是真的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:08:50.443

Apple 商店仍在接受混合应用程序。

根据我的经验，如果您使用服务器端代码生成页面布局，您的应用程序将被拒绝。但是，如果您使用 PHP/MySQL 后端作为 Web 服务与移动客户端进行通信，那么您就可以开始了。这是一个相当困难的情况，因为您需要使用混合应用程序来生成页面内容。但至少你的应用会被接受。

您的应用程序布局必须类似于原生 iOS 应用程序的另一件事。

Titanium 仍然是一个安全的选择，因为它的最终结果是一个原生应用程序。对于 Phonegap，一个好的解决方案是 Phonegap + jQuery Mobile 或 Phonegap + KendoUI（可能是最好的解决方案，因为它的 UI 最接近原生 iOS 外观）。

**编辑 ：**

为了更好地说明：

*   PHP/MySQL 后端作为 Web 服务

    您的所有页面都已经在 phonegap 应用程序中（在 assets/www 目录中），并且 ajax 用于与 Web 服务器通信并检索内容（例如新闻列表或单篇文章数据）。然后该数据用于在 html 文件中生成页面内容。

    也看看我的回答（类似的问题）：[https ://stackoverflow.com/a/14166593/1848600](https://stackoverflow.com/a/14166593/1848600)

*   Phonegap 并从远程服务器加载 Web 应用程序

    基本上你打开你的远程网络应用程序并在 phonegap 应用程序中显示它。这是一个例子（也是我的答案）：[https ://stackoverflow.com/a/13996437/1848600](https://stackoverflow.com/a/13996437/1848600)

# android - android散点图

> ID：14436237
> 
> 赞同：1
> 
> 时间：2013-01-21T10:03:54.087
> 
> 标签：android

我想在 android 中创建散点图，并且还想访问用户单击的点的值。

谁能帮帮我吗？我不知道如何在 android 中创建图形。我正在使用**Graph View.jar**文件创建图形但无法访问绘图值。

这是我的代码：

```
package com.example.test;
import java.text.FieldPosition;
import java.text.Format;
import java.text.ParsePosition;
import java.util.Arrays;

import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.PointF;
import android.os.Bundle;
import android.view.Menu;

import com.androidplot.series.XYSeries;
import com.androidplot.xy.LineAndPointFormatter;
import com.androidplot.xy.PointFormatter;
import com.androidplot.xy.SimpleXYSeries;
import com.androidplot.xy.XYPlot;
import com.androidplot.xy.XYStepMode;

public class MainActivity extends Activity {

    private XYPlot xyPlot;

    final String[] mMonths = new String[] {
        "Jan","Feb", "Mar","Apr", "May","Jun",
        "Jul", "Aug","Sep","Oct", "Nov","Dec"
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // initialize our XYPlot reference:
        xyPlot = (XYPlot) findViewById(R.id.xyplot);

        Number[] income =  {2000, 2500, 2700, 3000, 2800, 3500, 3700, 3800 };
     //   Number[] expense = {2200, 2700, 2900, 2800, 2600, 3000, 3300, 3400 };

        // Converting the above income array into XYSeries
        XYSeries incomeSeries = new SimpleXYSeries(
            Arrays.asList(income),                   // array => list
            SimpleXYSeries.ArrayFormat.Y_VALS_ONLY , // Y_VALS_ONLY means use the element index as the x value
            "Income");                                  // Title of this series

        // Converting the above expense array into XYSeries
//        XYSeries expenseSeries = new SimpleXYSeries(
//            Arrays.asList(expense),                 // array => list
//            SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, // Y_VALS_ONLY means use the element index as the x value
//            "Expense");                                // Title of this series

        // Create a formatter to format Line and Point of income series

        PointFormatter pformater = new PointFormatter() {

            @Override
            public void draw(Canvas arg0, Number arg1, PointF arg2) {
                // TODO Auto-generated method stub

            }
        };
        LineAndPointFormatter incomeFormat = new LineAndPointFormatter(
            Color.rgb(0, 0, 0),                   // line color
            Color.rgb(200, 200, 200),               // point color
            null );                                    // fill color (none)

        // Create a formatter to format Line and Point of expense series
//        LineAndPointFormatter expenseFormat = new LineAndPointFormatter(
//            Color.rgb(0, 0, 0),                   // line color
//            Color.rgb(200, 200, 200),               // point color
//            null);                                    // fill color (none)
// 
        // add expense series to the xyplot:
      //  xyPlot.addSeries(expenseSeries,expenseFormat);

        // add income series to the xyplot:
        xyPlot.addSeries(incomeSeries, incomeFormat);

        // Formatting the Domain Values ( X-Axis )
        xyPlot.setDomainValueFormat(new Format() {

            @Override
            public StringBuffer format(Object obj, StringBuffer toAppendTo, FieldPosition pos) {
                return new StringBuffer( mMonths[ ( (Number)obj).intValue() ]  );
            }

            @Override
            public Object parseObject(String source, ParsePosition pos) {
                return null;
            }
        });

        xyPlot.setDomainLabel("");
        xyPlot.setRangeLabel("Amount in Dollars");

        // Increment X-Axis by 1 value
        xyPlot.setDomainStep(XYStepMode.INCREMENT_BY_VAL, 1);

        xyPlot.getGraphWidget().setRangeLabelWidth(50);

        // Reduce the number of range labels
        xyPlot.setTicksPerRangeLabel(2);

        // Reduce the number of domain labels
        xyPlot.setTicksPerDomainLabel(2);

        // Remove all the developer guides from the chart
        xyPlot.disableAllMarkup();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-22T11:08:38.017

[在此处下载 jar 文件](https://s3.amazonaws.com/numetric-tutorial-code/GraphView-4.0.1.jar)

在布局 xml 文件中使用以下代码

```
<com.jjoe64.graphview.GraphView
        android:layout_width="match_parent"
        android:layout_height="200dip"
        android:title="Graph Title"
        android:id="@+id/graph"
        android:layout_below="@+id/pointtext"/> 
```

在您的活动 java 文件中使用以下代码

```
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.widget.Toast;

import com.jjoe64.graphview.GraphView;
import com.jjoe64.graphview.series.DataPoint;
import com.jjoe64.graphview.series.DataPointInterface;
import com.jjoe64.graphview.series.OnDataPointTapListener;
import com.jjoe64.graphview.series.PointsGraphSeries;
import com.jjoe64.graphview.series.Series;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GraphView point_graph = (GraphView) findViewById(R.id.graph);

    PointsGraphSeries<DataPoint> point_series = new PointsGraphSeries<DataPoint>(new DataPoint[]{
            new DataPoint(0, 2000),
            new DataPoint(1, 2500),
            new DataPoint(2, 2700),
            new DataPoint(3, 3000),
            new DataPoint(4, 3500),
            new DataPoint(5, 2800),
            new DataPoint(6, 3700),
            new DataPoint(7, 3800),
            new DataPoint(8, 3500),
    });
    point_graph.addSeries(point_series);
    point_series.setShape(PointsGraphSeries.Shape.RECTANGLE);
    point_series.setColor(Color.RED);
    point_series.setSize(18);

    StaticLabelsFormatter staticLabelsFormatter = new StaticLabelsFormatter(point_graph);
    staticLabelsFormatter.setHorizontalLabels(new String[]{"Jan", "Feb", "March", "Apr", "May", "june", "Aug", "Sept", "OCt", "Nov", "Dec"});
    point_graph.getGridLabelRenderer().setLabelFormatter(staticLabelsFormatter);
    point_series.setOnDataPointTapListener(new OnDataPointTapListener() {
        @Override
        public void onTap(Series series, DataPointInterface dataPoint) {
            Toast.makeText(MainActivity.this, "Series1: On Data Point clicked: " + dataPoint, Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:15:29.207

Snowdon 是一个简单、快速的 Android 图形库，具有散点图、折线图、面积图、直方图、条形图和热图。

我想[这](http://code.google.com/p/snowdon/)就是你要找的。

希望这可以帮助你:)

# sharepoint-2010 - 根据所选语言更改母版页中的文本

> ID：14436244
> 
> 赞同：0
> 
> 时间：2013-01-21T10:04:24.663
> 
> 标签：sharepoint-2010, sharepoint-designer

在我的母版页和搜索框中，我有标签“搜索”。现在它是硬编码的并且工作正常。但是当我更改语言时，文本应更改为“Rechercher”。这应该发生在母版页中，我该如何实现。很少有其他文本也需要根据语言变化进行更改。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:35:40.917

我建议使用带有现成资源字符串的[EncodedLiteral控件。](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.encodedliteral.aspx)如果您的母版页基于像 v4.master 这样的开箱即用的母版页，您应该能够看到许多使用此控件的示例。

要包含用于搜索的语言感知标签，我可能会使用以下内容：

```
<SharePoint:EncodedLiteral runat="server" 
    text="<%$Resources:wss,mobile_navigation_search_text%>" 
    EncodeMethod="HtmlEncode"/> 
```

# objective-c - 仅从左下角调整 NSWindow 的大小？

> ID：14436245
> 
> 赞同：1
> 
> 时间：2013-01-21T10:04:26.840
> 
> 标签：objective-c, xcode, macos

我正在编写一个位于 OS X 菜单栏中的应用程序，当您按下它的图标时，会打开一个小 NSPanel。我希望用户能够调整它的大小，但只能通过拖动左下角。我想防止他们能够将顶部边缘向下拖动并从菜单栏中“松开”窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:56:26.247

只有当它在指定的角落时才覆盖并传递拖动，丢弃其他触摸。~~`touchesBegan`~~ `mouseDown:`

请参阅[Cocoa 事件处理指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html)

# iphone - 单击按钮时如何删除uitableview中的行

> ID：14436246
> 
> 赞同：0
> 
> 时间：2013-01-21T10:04:32.630
> 
> 标签：iphone, objective-c

嗨，我正在实施一个表格，我收到请求我有学生列表，我想添加为我的室友我有两个按钮接受和拒绝当我点击接受按钮时问题就在这里从数组中删除，并且我想在接受请求的情况下将删除的行值转移到 nextview 控制器的表中。并且如果单击拒绝按钮只想删除行而不是将单元格的值移动到下一个视图控制器中我正在使用情节提要实现这个项目任何人都可以知道请分享我这是代码`cellForRowAtIndexPath:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"DefaultCell"];
    if(cell == nil) {
        cell =[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"DefaultCell"];

    }
    acceptreq = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    acceptreq.frame =CGRectMake(170, 10, 60, 30);
    rejectreq = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    rejectreq.frame =CGRectMake(240, 10, 60, 30);
    [acceptreq setTitle:@"Accept" forState:UIControlStateNormal];
    [rejectreq setTitle:@"Reject" forState:UIControlStateNormal];
    [acceptreq addTarget:self action:@selector(Acceptrequest:) forControlEvents:UIControlEventTouchUpInside];
    [rejectreq addTarget:self action:@selector(Rejectrequest:) forControlEvents:UIControlEventTouchUpInside];
    [cell addSubview:acceptreq];
    [cell addSubview:rejectreq];
    [acceptreq setTag:indexPath.row];
    cell.textLabel.text = [myarray objectAtIndex:indexPath.row];
    return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:16:41.477

简而言之，您可以通过单击`UIbutton`如下方式删除选定的行：-

```
-(IBAction)Acceptrequest:(id)sender
{
UIButton *btn =(UIButton*)sender;

[myarray removeObjectsAtIndexes:btn.tag];
[tableView deleteRowsAtIndexPaths:myarray withRowAnimation:UITableViewRowAnimationAutomatic];

[tableVIew reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:12:11.850

你需要实现这个方法：

```
[tableView deleteRowsAtIndexPaths:arrayOfIndexPathsToDelete withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

# c++ - 在地图中使用节点，C++

> ID：14436247
> 
> 赞同：0
> 
> 时间：2013-01-21T10:04:35.110
> 
> 标签：c++, class, nodes, public, std-pair

```
class MtmMap {   
    public:    
    class Pair {     
         public:   
         Pair(const KeyType& key, const ValueType& value) :     
             first(key),       
             second(value) { }    
         const KeyType first;    
         ValueType second;    
     };     
    class node {    
        friend class MtmMap;    
        Pair data;    
        node* next;     
        public:    
        node();    
        node(const Pair& pair){
            data.Pair(pair.first , pair.second);
            next = NULL;
        }    
    };
    node* temp = new node(pair);
} 
```

错误：

> 没有匹配函数调用 'mtm::MtmMap<int, int, AbsCompare>::Pair::Pair()'
> 无效使用 'mtm::MtmMap<int, int>::Pair::Pair'
> 需要来自 ' void mtm::MtmMap::insert(const
> mtm::MtmMap<KeyType, ValueType, CompareFunction>::Pair&) [with KeyType = int; 值类型 = 整数；
> CompareFunction = AbsCompare]'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:16:58.890

通过定义`Pair`带参数的构造函数，您可以删除不带参数的隐式默认构造函数。当你有一个类型的成员时，`Pair`必须`node`在节点的初始化列表中将参数传递给它，你需要用这个替换你的节点构造函数：

```
 node(const Pair& pair) : data(pair.first, pair.second) {
        next = NULL;
    } 
```

这将`data`正确调用构造函数。[Learn Cpp](http://www.learncpp.com/cpp-tutorial/101-constructor-initialization-lists/)有一个关于初始化列表如何工作的教程，您可能想阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:06:23.540

我首先想到的是这一行：

```
node* temp = new node(pair); 
```

看起来您正在尝试`new`在类定义中创建一个类。这可能是问题的一部分。此外，这个区域看起来有点混乱：

```
node(const Pair& pair){
  data.Pair(pair.first , pair.second);
  next = NULL;
} 
```

看起来您正在尝试`Pair`直接调用构造函数。我不确定这是否是有效的 C++。真的，只需`Pair`像这样定义一个复制构造函数：

```
Pair( Pair const& other )
  : first( other.first )
  , second( other.second )
{} 
```

然后，该块变为

```
node( Pair const& pair )
  : data( pair )
  , next( NULL )
{} 
```

您也可以查看`std::pair`.

# android - OntouchListener 无法正常工作

> ID：14436249
> 
> 赞同：0
> 
> 时间：2013-01-21T10:04:38.777
> 
> 标签：android

我正在尝试应用 onTouchListener 但我遇到了一些代码问题，没有 switchcase 它正在工作，当应用 switch case 时它不是，下面是我的代码，下面是 switch case 代码

```
 if (phoneNo != null && !phoneNo.equals("")
                    && !phoneNo.equalsIgnoreCase("null")) {
                textPhone.setText(phoneNo);
                textPhone.setVisibility(View.VISIBLE);
                phImage.setVisibility(View.VISIBLE);

                phImage.setImageResource(R.drawable.phone);
                phImage.setTag(phoneNo);

                phImage.setOnTouchListener(new OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        switch (event.getAction()) {
                        case MotionEvent.ACTION_DOWN: {
                        String phone = (String) ((ImageView) v).getTag();
                        Log.d(TAG, "onTouch phone--" + phone);
                        utils.dailPhone(v.getContext(), phone);
                        return false;
                    }
                        }}

                 else {
                phImage.setVisibility(View.GONE);
                textPhone.setVisibility(View.GONE);

            }
                break;
                    case MotionEvent.ACTION_MOVE:
                        break;
                    case MotionEvent.ACTION_UP:
                        break;
                    }

                    return false;
                } 
```

下面没有开关

```
phImage.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    String phone = (String) ((ImageView) v).getTag();
                    Log.d(TAG, "onTouch phone--" + phone);
                    utils.dailPhone(v.getContext(), phone);
                    return false;
                }
            });

        } else {
            phImage.setVisibility(View.GONE);
            textPhone.setVisibility(View.GONE);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:11:27.940

您的 switch-case 语法完全错误。尝试类似：

```
public boolean onTouch(MotionEvent event) {
    int eventaction = event.getAction();

    switch (eventaction) {
        case MotionEvent.ACTION_DOWN: 
            // finger touches the screen
            String phone = (String) ((ImageView) v).getTag();
            Log.d(TAG, "onTouch phone--" + phone);
            utils.dailPhone(v.getContext(), phone);
            return false;
            break;

        case MotionEvent.ACTION_MOVE:
            // finger moves on the screen
            break;

        case MotionEvent.ACTION_UP:   
            // finger leaves the screen
            break;
    }

    // tell the system that we handled the event and no further processing is required
    return true; 
} 
```

# android - 尝试读取文件夹内容时出现Android空异常

> ID：14436251
> 
> 赞同：0
> 
> 时间：2013-01-21T10:04:43.537
> 
> 标签：android, file

我正在尝试使用我的应用程序读取 sdCard 的文件夹内容，当我尝试读取时`/mnt/secure`出现以下错误：

```
01-21 11:54:03.180: D/AndroidRuntime(3080): Shutting down VM
01-21 11:54:03.180: W/dalvikvm(3080): threadid=1: thread exiting with uncaught exception (group=0x40028a00)
01-21 11:54:03.190: E/AndroidRuntime(3080): FATAL EXCEPTION: main
01-21 11:54:03.190: E/AndroidRuntime(3080): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pas.readfilefolder/com.pas.readfilefolder.ReadFileFOlderActivity}: java.lang.NullPointerException
01-21 11:54:03.190: E/AndroidRuntime(3080):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2781)
01-21 11:54:03.190: E/AndroidRuntime(3080):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2797)
01-21 11:54:03.190: E/AndroidRuntime(3080):     at android.app.ActivityThread.access$2300(ActivityThread.java:135)
01-21 11:54:03.190: E/AndroidRuntime(3080):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2132)
01-21 11:54:03.190: E/AndroidRuntime(3080):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 11:54:03.190: E/AndroidRuntime(3080):     at android.os.Looper.loop(Looper.java:143)
 01-21 11:54:03.190: E/AndroidRuntime(3080):    at android.app.ActivityThread.main(ActivityThread.java:4914)
 01-21 11:54:03.190: E/AndroidRuntime(3080):    at java.lang.reflect.Method.invokeNative(Native Method)
  01-21 11:54:03.190: E/AndroidRuntime(3080):   at java.lang.reflect.Method.invoke(Method.java:521)
 01-21 11:54:03.190: E/AndroidRuntime(3080):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 01-21 11:54:03.190: E/AndroidRuntime(3080):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 01-21 11:54:03.190: E/AndroidRuntime(3080):    at dalvik.system.NativeStart.main(Native Method)
 01-21 11:54:03.190: E/AndroidRuntime(3080): Caused by: java.lang.NullPointerException
01-21 11:54:03.190: E/AndroidRuntime(3080):     at com.pas.readfilefolder.ReadFileFOlderActivity.displayListView(ReadFileFOlderActivity.java:55)
  01-21 11:54:03.190: E/AndroidRuntime(3080):   at com.pas.readfilefolder.ReadFileFOlderActivity.onCreate(ReadFileFOlderActivity.java:45)
   01-21 11:54:03.190: E/AndroidRuntime(3080):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1065)
    01-21 11:54:03.190: E/AndroidRuntime(3080):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2745)
    01-21 11:54:03.190: E/AndroidRuntime(3080):     ... 11 more
    01-21 11:54:05.580: I/Process(3080): Sending signal. PID: 3080 SIG: 9 
```

我使用的代码是：

```
package com.pas.readfilefolder;

import java.io.File;
import java.io.FileFilter;
import java.util.ArrayList;

import android.R.bool;
import android.app.ListActivity;
import android.content.DialogInterface.OnClickListener;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ReadFileFOlderActivity extends ListActivity {
/** Called when the activity is first created. */
 private ArrayList<String> todoItems;
 private TextView label;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    requestWindowFeature(Window.FEATURE_NO_TITLE);        
    label=(TextView)findViewById(R.id.label);

    File[] fileMyList = Environment.getExternalStorageDirectory().listFiles(); 

    Log.d("mes2",Environment.getExternalStorageDirectory().toString());
    Button btn = (Button) findViewById(R.id.btnAdd);
    displayListView(fileMyList);   

}

private void displayListView(File[] fileMyList) {
    todoItems = new ArrayList<String>();

    String nameOfFolder="";
    for(int i=0;i<fileMyList.length;i++)
        {Log.d("",fileMyList[i].getName()); 

        nameOfFolder=fileMyList[i].getParent();

        if(fileMyList[i].isDirectory()){
            todoItems.add(fileMyList[i].getName());
        }
    }

    //Folder[] MyfolderList=Environment.getExternalStorageDirectory().isDirectory(); 
    setContentView(R.layout.main);
    TextView TextFolder=(TextView)findViewById(R.id.label);
    TextFolder.setText(nameOfFolder);
    setListAdapter(new IconicAdapter());
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);          
    String onomaBashs =  settings.getString(FullFIleName, "");

    if (onomaBashs.endsWith(".sqlite")) {

        TextView Text=(TextView)findViewById(R.id.label);
        Text.setText(onomaBashs);

    } else {
        //throw new IllegalArgumentException("Unsupported connection string");
    }
}

public void OnClickButton(View view) {

    TextView TextFolder=(TextView)findViewById(R.id.label);

    File directory = new File(TextFolder.getText().toString());

    if (directory.toString().matches("/"))
    {

        return;
    }
    else{
        directory=new File(directory.getParent());
        Log.d("gonikos yparxei",directory.toString());
        File[] fileMyList = directory.listFiles();
        displayListView(fileMyList);
    }       
}

private static final String FullFIleName = "Onoma_Bashs";
private static final String PREFS_NAME = "NamesOfDatabases";

public void onListItemClick(ListView parent, View v,
        int position, long id) {
    TextView Text=(TextView)findViewById(R.id.label);
    String fdrName=Text.getText().toString();
    File file = new File(fdrName+"/"+todoItems.get(position).toString());
    System.out.println(file.toString());  

    if(file.isDirectory()){     
        if(file.list().length>0){     
            System.out.println("Directory is not empty!");     
        }else{
            System.out.println("Directory is empty!");
            }

    }else{
            System.out.println("This is not a directory");
        }       
}

class IconicAdapter extends ArrayAdapter<String> {
    IconicAdapter() {
    super(ReadFileFOlderActivity.this, R.layout.listfilefolder, R.id.label, todoItems);
    }
    public View getView(int position, View convertView,
            ViewGroup parent) {
            View row=convertView;
            if (row==null) {
                LayoutInflater inflater=getLayoutInflater();
                row=inflater.inflate(R.layout.listfilefolder, parent, false);
            }
            TextView label=(TextView)row.findViewById(R.id.label);
            label.setText(todoItems.get(position));
            ImageView icon=(ImageView)row.findViewById(R.id.icon);
            if (todoItems.get(position).length()>4) {
                icon.setImageResource(R.drawable.folder);
            }
            else {
                icon.setImageResource(R.drawable.ic_launcher);
            }
            return(row);
        }
    }
} 
```

当我尝试读取文件夹“/mnt/secure”的内容时，我收到了我之前提供的错误。

所以环顾四周，我发现由于读取权限而无法读取文件夹？我将上面的代码更改为：

```
 public void onListItemClick(ListView parent, View v,
        int position, long id) {
    TextView Text=(TextView)findViewById(R.id.label);
    String fdrName=Text.getText().toString();
    File file = new File(fdrName+"/"+todoItems.get(position).toString());
    System.out.println(file.toString());  
    if (file.canRead()) {
        System.out.println(file.getAbsolutePath() + "Can Read: ");
        if(file.isDirectory()){     
            if(file.list().length>0){     
                System.out.println("Directory is not empty!");     
            }else{
                System.out.println("Directory is empty!");
                }

        }else{
                System.out.println("This is not a directory");
        }   
    } else {
        System.out.println(file.getAbsolutePath() + " Cannot Read: ");
    }

} 
```

因此，当我进入 /mnt/secure 文件夹时，我会打印出我无法读取该文件夹。我该如何克服呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:14:59.243

显然，您还没有找到 textView(Text)。请不要用大写字母命名局部变量。

# events - ZF2，在模块启动时创建动态菜单

> ID：14436252
> 
> 赞同：3
> 
> 时间：2013-01-21T10:04:44.360
> 
> 标签：events, navigation, url-routing, zend-framework2

我有一个需要动态创建的菜单（一些博客页面是从数据库中添加的）。[带有 Zend\Navigation\Navigation 的 ZF2 动态菜单](https://stackoverflow.com/questions/12531423/zf2-dynamic-menu-with-zend-navigation-navigation)解决了如何为单个控制器/动作执行此操作。

但是，在初始化模块的那一刻，应该如何对所有请求执行此操作？

我至少需要 routeMatch 对象（以获取语言参数），并且我已经看到了以下内容：

```
 public function onBootstrap(EventInterface $e) 
    { 
        $app = $e->getApplication(); 
        $em  = $app->getEventManager(); 

        $em->attach(MvcEvent::EVENT_ROUTE, function($e) { 
            $routeMatch = $e->getRouteMatch();
        }); 
    } 
```

但在文档中它说：

“onBootstrap() 方法会在每个页面请求上为实现此功能的每个模块调用，并且只应用于执行轻量级任务，例如注册事件侦听器。”

在 Zend Framework 2 中初始化动态导航（或其他更复杂的逻辑）的最佳位置和方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:33:17.770

正确的地方确实是引导做这类事情。请记住，引导程序中的代码在每次请求时都会运行，因此请使其尽可能轻量级。如果要注入导航，请尝试从数据库中缓存导航结构并从缓存中注入版本。

这种行为是我在[ensemble](http://ensemble.github.com)中所做的。它从数据库中获取数据以动态构建路线，并根据路线构建导航结构。路由和导航分别注入到路由器和导航容器中，因此在调度应用程序时似乎与在 module.config.php 中配置路由的“正常”请求没有什么不同。

对于某些示例，您应该查看[内核](https://github.com/ensemble/EnsembleKernel)，目前仅适用于 Doctrine 适配器（Zend\Db 即将推出）。它注册侦听器以尽早连接，它将数据库结果解析为路线和导航结构，并且可以缓存这些以提高性能。

如果您需要更具体的信息，请更新您的问题以询问更多关于您在大局中遗漏的内容。

# javascript - 移动鼠标时将图像缩放到光标中断

> ID：14436254
> 
> 赞同：22
> 
> 时间：2013-01-21T10:04:54.407
> 
> 标签：javascript, image, zooming, css-transforms

这是[如何在使用我自己的鼠标滚轮平滑滚动时缩放到鼠标指针的后续问题？](https://stackoverflow.com/questions/14378046/how-to-zoom-to-mouse-pointer-while-using-my-own-mousewheel-smoothscroll/14431123#14431123)

我正在使用 css 转换将图像缩放到鼠标指针。我还使用我自己的平滑滚动算法来插入并为鼠标滚轮提供动量。

在我之前的问题中，在 Bali Balo 的帮助下，我已经成功完成了 90% 的工作。

您现在可以将图像一直缩放到鼠标指针，同时仍然可以平滑滚动，如下面的 JSFiddle 所示：

[http://jsfiddle.net/qGGwx/7/](http://jsfiddle.net/qGGwx/7/)

但是，移动鼠标指针时功能会中断。

为了进一步澄清，如果我在鼠标滚轮上放大一个槽口，图像会围绕正确的位置进行缩放。对于我在鼠标滚轮上放大的每个缺口，这种行为都会继续，完全符合预期。但是，如果在部分放大后，我将鼠标移动到不同的位置，则功能会中断，我必须完全缩小才能更改缩放位置。

预期行为是为了在缩放过程中正确反映缩放过程中鼠标位置的任何变化。

控制当前行为的两个主要函数如下：

```
self.container.on('mousewheel', function (e, delta) {
        var offset = self.image.offset();

        self.mouseLocation.x = (e.pageX - offset.left) / self.currentscale;
        self.mouseLocation.y = (e.pageY - offset.top) / self.currentscale;

        if (!self.running) {
            self.running = true;
            self.animateLoop();
        }
        self.delta = delta
        self.smoothWheel(delta);
        return false;
    }); 
```

该函数在缩放图像的当前比例下收集鼠标的当前位置。

然后它启动我的平滑滚动算法，导致每次插值都调用下一个函数：

```
zoom: function (scale) {

    var self = this;
    self.currentLocation.x += ((self.mouseLocation.x - self.currentLocation.x) / self.currentscale);
    self.currentLocation.y += ((self.mouseLocation.y - self.currentLocation.y) / self.currentscale);

    var compat = ['-moz-', '-webkit-', '-o-', '-ms-', ''];
    var newCss = {};
    for (var i = compat.length - 1; i; i--) {
        newCss[compat[i] + 'transform'] = 'scale(' + scale + ')';
        newCss[compat[i] + 'transform-origin'] = self.currentLocation.x + 'px ' + self.currentLocation.y + 'px';
    }
    self.image.css(newCss);

    self.currentscale = scale;
}, 
```

此函数采用缩放量 (1-10) 并应用 css 变换，使用 transform-origin 重新定位图像。

尽管这对于在图像完全缩小时选择的静止鼠标位置非常有效；如上所述，当鼠标光标在部分缩放后移动时，它会中断。

非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T09:14:13.213

其实也不算太复杂。您只需要将鼠标位置更新逻辑与缩放更新逻辑分开即可。看看我的小提琴：http: [//jsfiddle.net/qGGwx/41/](http://jsfiddle.net/qGGwx/41/)

我在这里所做的只是在容器上添加一个“mousemove”侦听器，并将 self.mouseLocation 更新逻辑放在那里。由于不再需要它，我还从“鼠标滚轮”处理程序中取出了 mouseLocation 更新逻辑。动画代码保持不变，决定何时开始/停止动画循环也是如此。

这是代码：

```
 self.container.on('mousewheel', function (e, delta) {
        if (!self.running) {
            self.running = true;
            self.animateLoop();
        }
        self.delta = delta
        self.smoothWheel(delta);
        return false;
    });

    self.container.on('mousemove', function (e) {
        var offset = self.image.offset();

        self.mouseLocation.x = (e.pageX - offset.left) / self.currentscale;
        self.mouseLocation.y = (e.pageY - offset.top) / self.currentscale;
    }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T05:04:00.123

在你检查[**这个小提琴**](http://jsfiddle.net/onury/3k332/)之前；我应该提到：

**首先**，在你的`.zoom()`方法内；你不应该除以`currentscale`：

```
self.currentLocation.x += ((self.mouseLocation.x - self.currentLocation.x) / self.currentscale);
self.currentLocation.y += ((self.mouseLocation.y - self.currentLocation.y) / self.currentscale); 
```

因为; `mouseLocation`在计算内部方法时，您已经使用了该因子，`initmousewheel()`如下所示：

```
self.mouseLocation.x = (e.pageX - offset.left) / self.currentscale;
self.mouseLocation.y = (e.pageY - offset.top) / self.currentscale; 
```

所以与其; （在`.zoom()`方法中），您应该：

```
self.currentLocation.x += (self.mouseLocation.x - self.currentLocation.x);
self.currentLocation.y += (self.mouseLocation.y - self.currentLocation.y); 
```

但是（例如）`a += b - a`总是会产生`b`，所以上面的代码等于：

```
self.currentLocation.x = self.mouseLocation.x;
self.currentLocation.y = self.mouseLocation.y; 
```

简而言之：

```
self.currentLocation = self.mouseLocation; 
```

然后，似乎您甚至不需要`self.currentLocation`. （相同值的 2 个变量）。那么为什么不在`mouseLocation`设置变量的行中使用变量`transform-origin`并摆脱`currentLocation`变量呢？

```
newCss[compat[i] + 'transform-origin'] = self.mouseLocation.x + 'px ' + self.mouseLocation.y + 'px'; 
```

**其次**，您应该`mousemove`在方法中包含一个事件侦听`initmousewheel()`器（就像这里的其他开发人员建议的那样），但它应该不断更新转换，而不仅仅是在用户转动时。否则，当您缩小“任何”随机点时，指针的尖端永远不会赶上。

```
self.container.on('mousemove', function (e) {
    var offset = self.image.offset();
    self.mouseLocation.x = (e.pageX - offset.left) / self.currentscale;
    self.mouseLocation.y = (e.pageY - offset.top) / self.currentscale;
    self.zoom(self.currentscale);
}); 
```

所以; 您不再需要在`mousewheel`事件处理程序中计算它，因此您的`initmousewheel()`方法如下所示：

```
initmousewheel: function () {
    var self = this;

    self.container.on('mousewheel', function (e, delta) {
        if (!self.running) {
            self.running = true;
            self.animateLoop();
        }
        self.delta = delta;
        self.smoothWheel(delta);
        return false;
    });

    self.container.on('mousemove', function (e) {
        var offset = self.image.offset();
        self.mouseLocation.x = (e.pageX - offset.left) / self.currentscale;
        self.mouseLocation.y = (e.pageY - offset.top) / self.currentscale;
        self.zoom(self.currentscale); // <--- update transform origin dynamically
    });
} 
```

**一个问题：**

此解决方案按预期工作，但有一个小问题。当用户以常规或快速移动鼠标时；该`mousemove`事件似乎错过了最终位置（在 Chrome 中测试）。所以缩放会稍微偏离指针位置。否则，当您缓慢移动鼠标时，它会得到准确的点。不过，解决这个问题应该很容易。

**其他注意事项和建议：**

*   您有一个重复的属性 ( `prevscale`)。
*   我建议您始终使用[**JSLint**](http://www.jslint.com/)或[**JSHint**](http://www.jshint.com/)（也可在 jsFiddle 上使用）来验证您的代码。
*   我强烈建议您尽可能使用闭包（通常称为**立即调用函数表达式**(IIFE)）来避免全局范围；并隐藏您的内部/私有属性和方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T10:59:35.877

添加`mousemover`方法并在`init`方法中调用：

```
mousemover: function() {
    var self = this;
    self.container.on('mousemove', function (e) {

        var offset = self.image.offset();

        self.mouseLocation.x = (e.pageX - offset.left) / self.currentscale;
        self.mouseLocation.y = (e.pageY - offset.top) / self.currentscale;

        self.zoom(self.currentscale);
    });
}, 
```

小提琴：http: [//jsfiddle.net/powtac/qGGwx/34/](http://jsfiddle.net/powtac/qGGwx/34/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-08T15:47:46.133

`0.9`由于图像的缩放（ in `ratio`），缩放点并不完全正确。事实上，鼠标是指向特定点的，`container`但我们会缩放`image`。请参阅这个小提琴[http://jsfiddle.net/qGGwx/99/](http://jsfiddle.net/qGGwx/99/)我添加`marker`的位置等于`transform-origin`. 如您所见，如果图像大小等于容器大小，则没有问题。你需要这种缩放吗？也许你可以添加第二个容器？在小提琴中，我还添加了条件`mousemove`

```
if(self.running && self.currentscale>1 && self.currentscale != self.lastscale) return; 
```

这可以防止在缩放期间移动图像，但也会产生问题。`zoom`如果仍在运行，则无法更改缩放点。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-10T19:31:16.307

扩展@jordancpaul 的答案我添加了一个常数`mouse_coord_weight`，该常数乘以鼠标坐标的增量。这样做的目的是使缩放过渡对鼠标坐标的变化反应更小。看看[http://jsfiddle.net/7dWrw/](http://jsfiddle.net/7dWrw/)

我已将`onmousemove`事件处理程序重写为：

```
 self.container.on('mousemove', function (e) {
        var offset = self.image.offset();
        console.log(offset);

        var x = (e.pageX - offset.left) / self.currentscale,
            y = (e.pageY - offset.top) / self.currentscale;

        if(self.running) {
            self.mouseLocation.x += (x - self.mouseLocation.x) * self.mouse_coord_weight;
            self.mouseLocation.y += (y - self.mouseLocation.y) * self.mouse_coord_weight;
        } else {
            self.mouseLocation.x = x;
            self.mouseLocation.y = y;
        }

    }); 
```

# android - 运行后台操作Android时显示加载对话框

> ID：14436257
> 
> 赞同：0
> 
> 时间：2013-01-21T10:04:59.230
> 
> 标签：android, background, android-asynctask, loading

我需要在 android 上进行一些涉及逐像素编辑的图像处理。这需要一点时间，屏幕只是冻结在那里，所以我想做一个加载对话框，让用户知道程序仍在运行。

这个editPhoto函数是我需要在后台运行的。

```
 private void editPhoto() {
    if (editPhotoImg.getDrawable() == null) {
        Toast.makeText(getApplicationContext(), "No Photo Selected",
                Toast.LENGTH_SHORT).show();
    } else if (hasSample == false) {
        Toast.makeText(getApplicationContext(), "No Sample Photo Selected",
                Toast.LENGTH_SHORT).show();
    } else {

        detectFaces(false);

        BitmapDrawable ebm = (BitmapDrawable) editPhotoImg.getDrawable();

        Bitmap editTemp = ebm.getBitmap();
        PointF editFaceMidPoint = getFaceMidPoint(editTemp);

        BitmapDrawable sbm = (BitmapDrawable) samplePhotoImg.getDrawable();
        Bitmap sampleTemp = sbm.getBitmap();
        PointF sampleFaceMidPoint = getFaceMidPoint(sampleTemp);

        if (editFaceMidPoint != null && sampleFaceMidPoint != null) {
            int editFaceMidPointPixel = editTemp.getPixel(
                    (int) editFaceMidPoint.x, (int) editFaceMidPoint.y);
            int sampleFaceMidPointPixel = sampleTemp.getPixel(
                    (int) sampleFaceMidPoint.x, (int) sampleFaceMidPoint.y);

            editPhotoImg.setImageBitmap(shiftRGB(editTemp,
                    editFaceMidPointPixel, sampleFaceMidPointPixel));

            savePhoto();

            detectFaces(true);
        }
    }

} 
```

这是我的 AsyncTask 代码，它没有达到我想要的效果。它给了我一个我什至无法识别的错误。有人能告诉我我应该做什么，或者我应该在哪里调用 editPhoto() 方法，以便它在加载对话框后面而不是在加载对话框之前或之后运行？

```
 private class LoadEditPhoto extends AsyncTask<Void, Integer, Void> {
    // Before running code in separate thread

    @Override
    protected void onPreExecute() {
        /* Create a new progress dialog
        progressDialog = new ProgressDialog(EditPhoto.this);
        // Set the progress dialog to display a horizontal progress bar
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        // Set the dialog title to 'Loading...'
        progressDialog.setTitle("Loading...");
        // Set the dialog message to 'Loading application View, please
        // wait...'
        progressDialog.setMessage("Loading application View, please wait...");
        */
        progressDialog = ProgressDialog.show(EditPhoto.this,"Loading...",  
                "Editing Photo, please wait...", false, false);  
        // This dialog can't be canceled by pressing the back key
        progressDialog.setCancelable(false);
        // This dialog isn't indeterminate
        progressDialog.setIndeterminate(false);
        // The maximum number of items is 100
        progressDialog.setMax(100);
        // Set the current progress to zero
        progressDialog.setProgress(0);
        // Display the progress dialog
        progressDialog.show();
    }

    // The code to be executed in a background thread.
    @Override
    protected Void doInBackground(Void... params) {
        /*
         * This is just a code that delays the thread execution 4 times,
         * during 850 milliseconds and updates the current progress. This is
         * where the code that is going to be executed on a background
         * thread must be placed.
         * 
         */

        editPhoto();
        publishProgress(100);
        return null;
    }

    // Update the progress
    @Override
    protected void onProgressUpdate(Integer... values) {
        // set the current progress of the progress dialog
        progressDialog.setProgress(values[0]);
    }

    // after executing the code in the thread
    @Override
    protected void onPostExecute(Void result) {
        // close the progress dialog
        progressDialog.dismiss();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:24:46.443

Put your `editPhoto()` in **Thread** .

Now define following code to handle multiple messages.

```
public enum WhatAbout {
    START,STOP
}

public WhatAbout[] wa = WhatAbout.values(); 
```

Then use [Handler](http://developer.android.com/reference/android/os/Handler.html), which helps you to communicate `BackgroundThread` and `UIThread`. Without using handler, you can't change `UI`.

Put following code in your `onCreate` method.

```
handler = new Handler() {
  @Override
  public void handleMessage(Message msg) {
    if (msg.what < wa.length) {
    switch (wa[msg.what]) 
    {
    case START:
         progressDialog = ProgressDialog.show(getActivity(), null,
                        "Editing Photo... Please Wait...");
         break;

    case STOP:
         if (progressDialog.isShowing())
            progressDialog.dismiss();

         imageView.setImageBitmap(editedBitmap);
         break;
    }
  }
}; 
```

Then when your ***editing started*** in `Thread`, place following code at the first line of `editPhoto()`.

```
handler.sendMessage(handler.obtainMessage(
                WhatAbout.START.ordinal(), 0, 0)); 
```

When your `editing` completed, place following code at the end of `editPhoto()`.

```
handler.sendMessage(handler.obtainMessage(
                WhatAbout.STOP.ordinal(), 0, 0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:06:41.210

删除吐司消息，它应该可以工作。您无法从`doInBackground`方法更新 UI。除此之外，您的代码看起来不错。所以这应该是错误，。

或使用 runOnUi() 显示您的 Toast 消息。

像这样包围你的吐司，

```
ActivityObject.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            Toast.makeText(this, message, Toast.LENGTH_LONG).show();
        }
    }); 
```

# php - 在 php 页面加载期间发送 html

> ID：14436258
> 
> 赞同：-3
> 
> 时间：2013-01-21T10:05:00.763
> 
> 标签：php

> **可能重复：**
> [PHP 在页面加载时回显内容](https://stackoverflow.com/questions/6396630/php-echo-ing-content-as-page-loads)

我有一个 php 页面必须加载一个沉重的表，所以在页面请求之后有很多时间等待。

是否可以发送页面最初为空，并在 php 页面加载期间将结果发送给客户端，以便可以看到到目前为止已加载的内容？（不是加载栏）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:08:17.550

是的。这称为[提早刷新文档](http://www.stevesouders.com/blog/2009/05/18/flushing-the-document-early/)。最简单的是，输出一些 HTML，然后调用`flush();`. 与大多数事情一样，魔鬼掌握在事情发生的具体时间和时间的细节中。

# javascript - 考虑半圆计算鼠标位置的百分比

> ID：14436264
> 
> 赞同：1
> 
> 时间：2013-01-21T10:05:34.117
> 
> 标签：javascript, raphael, graphael, justgage

我只是尝试在 justGage 上编写一些技巧（使用 Raphael JS 代码）来计算百分比，但我坚持使用数学公式:(。

重点是：我有一个宽度为 400 像素的 div，它欢迎 svg justGage。我想让它在鼠标点击后填充。例如，单击半圆的右下角将填充它，就好像它是 100% 填充一样。单击左下角，将其填充为 0%。问题是我试图捕捉鼠标位置并用它来刷新 Gage，但只在 X 轴上工作并不遵循圆形。

这是我的基本计算：

```
 var parentOffset = $(this).offset(); 
    var relX = e.pageX - parentOffset.left;
    g1.refresh(Math.round((relX)/4)); 
```

和整个代码测试[小提琴](http://jsfiddle.net/LAB3k/)。

有谁知道真正遵循圆形的公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:09:12.153

这是关于计算的草稿： ![草案](../Images/c438787d40296bbb0adebc2580a5c68d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:56:25.770

由于您有一个点击发生的*条带*，因此您不能依靠 x 坐标来确定百分比。我能想到的最好的选择是使用三角函数来计算点击和圆心之间的角度，然后通过这个方程（`(angel/Math.PI)*100`）将它拟合到你的范围 0-100。

下面是一个适合我的代码片段。

```
$(function(){
    $("#g1 path").click(function(e){
        var parent = $(this).parent();
        var height = parent.height();
        var width = parent.width();
        var center = {'x': width/2, 'y':(height-60)};
        var angle = Math.atan2(-(e.pageY - center['y']), center['x'] - e.pageX);
        g1.refresh(Math.round((angle/Math.PI)*100));  
    });
}) 
```

# c#-4.0 - 更改按钮的文本

> ID：14436271
> 
> 赞同：0
> 
> 时间：2013-01-21T10:06:06.847
> 
> 标签：c#-4.0, datagridview, windows-applications

我有一个按钮，`datagridview`它的文本是`Start`这样，当我*点击*它时，文本现在应该是`Stop`，当我再次点击时，文本应该是开始。

所以我写了代码，但它对我不起作用

```
 private void dgvCampaign_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        if (e.Control is Button)
        {
            Button btn = e.Control as Button;
            if(btn.Text=="Start")
                btn.Text = "Stop";
            else
                btn.Text = "Start";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:32:07.040

尝试使用`CellContentClick event`

```
 private void dataGridView2_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == 2)
        {
            if (dataGridView2[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString().Length > 0)
            {
                if (dataGridView2[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString() == "Start")
                {
                    dataGridView2[e.ColumnIndex, e.RowIndex].Value = "Stop";
                }
                else
                {
                    dataGridView2[e.ColumnIndex, e.RowIndex].Value = "Start";
                }
            }
            else
                dataGridView2[e.ColumnIndex, e.RowIndex].Value = "Start";

        }
    } 
```

# plot - 代数表达式的枫图

> ID：14436274
> 
> 赞同：0
> 
> 时间：2013-01-21T10:06:13.843
> 
> 标签：plot, symbols, numeric, maple, symbolic-math

如果我用枫木写

```
AC := Amp*sin(2*Pi/T*t); 
```

然后我能够以代数方式看到表达式。但我无法绘制它，因为*T*未设置（当然是针对*t绘制）。*

如果我写

```
T := 100e-6; 
AC := Amp*sin(2*Pi/T*t);
plot(AC, t=0..1e-3); 
```

然后我可以绘制它，但表达式用数字而不是符号显示。

我的问题如下：是否有办法很好地结合这两种愿望？所以

1.  声明变量，
2.  **用符号**写出表达式，
3.  让它绘制。

我知道可以先编写表达式，然后添加其参数。它适用于小型工作表。但是，如果我有一份 5 到 8 页的工作，并且想要在文档开头本地化变量（而不是到处寻找它们），该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:41:42.437

`eval`如果您将参数的方程式放在列表中（在工作表的前面分配），那么只要您想用这些值实例化符号表达式，就可以使用所谓的 2-argument 。

例如，在工作表的顶部，您可能会有类似的内容，

```
params:=[T=100e-6,Amp=33.0,parB=2.3,parC=-0.9]; 
```

然后稍后您仍然可以创建包含未分配符号 , 等的新`T`表达式`Amp`。

```
AC := Amp*sin(2*Pi/T*t);  

                                        2 Pi t
                          AC := Amp sin(------)
                                          T 
```

然后，每当您希望使用这些特定值时，

```
plot(eval(AC,params), t=0..1e-3); 
```

最后一个命令成功，因为 2-argument`eval`调用的行为喜欢这样，

```
eval(AC,params);

                       33.0 sin(20000.00000 Pi t) 
```

即使在那次`plot`调用之后，您仍然可以`T`在新的符号表达式中使用 unassigned 等。

希望有帮助。

# jquery - 如何拖动滚动溢出：移动设备上的隐藏 div

> ID：14436281
> 
> 赞同：1
> 
> 时间：2013-01-21T10:06:34.123
> 
> 标签：jquery, jquery-mobile, mobile

我将如何滚动带有溢出的div：带有触摸输入的隐藏属性？

我正在 html5/jquery mobile/css 中开发棋盘游戏，而我的平铺棋盘位于具有溢出：隐藏的 div 内。我想让用户在没有滚动条的情况下通过触摸输入在板上滚动。像“位置：相对；左：0；右：0”。

我尝试了“Kinect”Dragscroll 插件，它的工作一流，唯一的问题是我不允许点击瓷砖，因为它作为拖动事件处理，对此有任何修复或一般问题的修复？

感谢所有帮助。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:33:40.570

从来没有得到这个答案。所以关闭它。

谢谢你们。

# php - 如果我按下按钮，则从该特定“活动”中获取“活动 ID”

> ID：14436286
> 
> 赞同：0
> 
> 时间：2013-01-21T10:06:40.787
> 
> 标签：php, javascript

我正在制作一个从 mysql 数据库中删除记录的按钮。

我制作了一个包含 3 个表的数据库，1：用户，2：活动，3：用户活动。在 user_activity 中，您可以找到 UserID（来自用户）和 ActivityID（来自活动）。

我已经制作了一个脚本，可以将 UserID 和 ActivityID 添加到 user_activity 表中。但现在我也想要一个删除那个“行”的按钮。

所以我用 onclick 函数制作了这个 javascript 代码：

```
$(".deleteActivity").click( function() {

    var user_activityId = $(this).data('activity');

    $.ajax({
        type: "POST",
        url: "delete_activity.php",
        data: {
            activity: user_activityId
        },
        dataType: 'json',
        success: function (data) {          
        }
    });
    $(this).hide(); 
}); 
```

我制作了这个 delete_activity.php 文件：

```
<?php
  include "connection.php";

  $sql = "SELECT * FROM user WHERE Username = '".$_SESSION['Username']."' ";
  $stm = $db->prepare($sql);
  $result = $stm->execute(array());
  while($row = $stm->fetch(PDO::FETCH_ASSOC)) {
  $userID = $row['UserID'];
  echo $userID;
}

  $sql = "SELECT * FROM user_activity WHERE UserID = '".$userID."' ";
  $stm = $db->prepare($sql);
  $result = $stm->execute(array());
  while($row = $stm->fetch(PDO::FETCH_ASSOC)) {
  echo $row['ActivityID'];
}
?> 
```

这是按钮：

```
echo '<input type="button" class="deleteActivity"  value="Activiteit verwijderen" data-activity="' . $row['ActivityID'] . '">'; 
```

如您所见，不要删除任何内容，我只“回显” ID，因此我可以查看 ID 并检查这些 ID 是否正确。

我想从我按下按钮的“活动”中获取 ActivityID。有了这个 ActivityID 就可以完成我的查询：

```
$sql = "SELECT * FROM user_activity WHERE UserID = '".$userID."' AND ActivityID = ??? "; 
```

我希望一切都清楚，并且有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:17:16.583

在您的查询中使用您发布的 user_activity_id ：DI 不知道您的列名`user_activity_id`，因此请根据您的情况进行编辑。

```
$userActivityId = filter_input(INPUT_POST, "activity");

$sql = "SELECT * FROM user_activity WHERE UserActivityId = :id";
$stm = $db->prepare($sql);
$stm->bindValue( ":id", $userActivityId, PDO::PARAM_INT);
if($stm->execute())
{
    $rows = $stm->fetchAll();
    foreach($rows as $row)
    {
         echo $row['ActivityId'];
         break;
    }
} 
```

# mysql - 在 joomla 中访问数据库中的数据

> ID：14436287
> 
> 赞同：1
> 
> 时间：2013-01-21T10:06:43.050
> 
> 标签：mysql, joomla

我在 Fabrik（Joomla 应用程序）中使用此查询从数据库中提取数据，但它不起作用。

使用 mysql 语法的相同查询在`PHPMYADMIN`.

```
$db = FabrikWorker::getDbo(false, 2);

$query = $db->getQuery(true);

$query
    ->select('hostel_fee')
    ->from('hostel_fee AS a')
    ->join('INNER','students AS b ON (b.class = a.class)');     
$db->setQuery($query);
$a = $db->loadResult();
return $a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:16:34.580

而不是使用这个

```
$db = FabrikWorker::getDbo(false, 2); 
```

用这个。

```
$db =& JFactory::getDBO(); 
```

或者，如果您想使用任何外部数据库连接到您的扩展，您可以使用它

[连接到外部数据库](http://docs.joomla.org/Connecting_to_an_external_database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:18:17.380

使用这样的完整查询

```
$db = &JFactory::getDBO();

$query = "SELECT m.id, m.title,m.level,mt.menutype FROM #__menu AS m

     INNER JOIN #__menu_types AS mt ON mt.menutype = m.menutype

     WHERE mt.menutype = m.menutype AND m.published = '1' ORDER BY mt.menutype,m.level";

$db->setQuery($query);

$rows = $db->loadObjectList();
OR
$rows = $db->loadResult(); 
```

# jquery - jquery 选择表中对应的列

> ID：14436289
> 
> 赞同：0
> 
> 时间：2013-01-21T10:06:51.183
> 
> 标签：jquery

我有下表标记

```
<table>
 <tr>
  <td>
   <checkbox />
  </td>
  <td id="delete">

  </td>  
 </tr>
 <tr>
  <td>
   <checkbox />
  </td>
  <td id="delete">

  </td>  
 </tr>
</table> 
```

我想要实现的是 - 当用户单击其中一列中的复选框时，我想将一个类添加到同一行中的列（删除的 id）。我怎样才能做到这一点？该列可能不在复选框旁边的列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:08:05.000

首先，您应该使用`class`delete，因为`id`属性必须是唯一的，然后这样的事情应该可以工作：

```
$('input[type="checkbox"]').change(function() {
    $(this).closest('td').siblings('.delete').addClass('foo');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:08:58.627

**[演示](http://jsbin.com/ilisom/1/edit)**

一页不能有多个ID！！！

```
$('table :checkbox').change(function(){
  $(this).closest('tr').find('.delete').addClass('something');
}); 
```

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)
[http://api.jquery.com/find/](http://api.jquery.com/find/)
[http://api.jquery.com/addclass/](http://api.jquery.com/addclass/)

那是直接回答你的问题。
但谈到**复选框**，我想你想要这个切换功能：

```
$('table :checkbox').change(function(){
  $(this).closest('tr').find('.delete').toggleClass('something');
}); 
```

**[演示](http://jsbin.com/ilisom/2/edit)**

> 该列可能不在复选框旁边的列中。

该方法是负责在元素的子元素中`.find()`搜索 a的人。`.delete``.closest()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:09:42.950

试试这个：

```
$('input[type="checkbox"]').change(function() {
   $(this).closest('td').siblings('.delete').toggleClass('ToBeAddedClass');
}); 
```

当复选框更改时，这将切换类。

*   `when checked`添加一个类。
*   `when unchecked`删除添加的类。

# 笔记：

用作代替`delete`_`css class name``id named delete`

# .net - 在 .NET 中，如果使用“使用”块有什么缺点？

> ID：14436296
> 
> 赞同：0
> 
> 时间：2013-01-21T10:07:07.380
> 
> 标签：.net, vb.net, using

使用有什么缺点`Using`吗？我知道在`Using`块之外我将无法使用该资源，但在某些情况下我应该将其留给垃圾收集器吗？

这是一些带有嵌套`using`s 的示例代码。

```
Dim ftpReq As FtpWebRequest = Nothing

subSetupFtp(ftpReq, WebRequestMethods.Ftp.ListDirectory) 'Setup FTP

    Dim lstFileNames As New List(Of String)

    'Get FTP response
    Using webRes As WebResponse = ftpReq.GetResponse()
    'read filenames into list to return
        Using ftpStream As New StreamReader(webRes.GetResponseStream())
            Do While ftpStream.Peek <> -1
                lstFileNames.Add(ftpStream.ReadLine)
            Loop
            lstFileNames.Sort() 'alphabetically sorts the list(a-z) ie. The files are now in date order

            'Tidy up
            ftpStream.Close()
            webRes.Close()
        End Using
    End Using 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:08:38.903

如果一个对象使用 then 实现了[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，最好将它与 一起使用`Using`，它在内部用作 try / finally 块。即使发生任何异常，这也将确保其处置。

> 我应该把它留给垃圾收集器的情况？

[一次性](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的。

> 该接口的主要用途是释放非托管资源。当不再使用该对象时，垃圾收集器会自动释放分配给托管对象的内存。**但是，无法预测何时会发生垃圾收集**。此外，垃圾收集器不了解非托管资源，例如窗口句柄或打开的文件和流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:26:14.933

如果一个对象实现了`IDisposable`，那么使用一个`using`块是没有害处的。

不过，您需要注意范围。如果您将一个对象添加到您打算稍后使用的 using 块内的列表中，那么如果您尝试访问该对象，您最终会遇到对象引用错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T10:08:51.957

不，没有任何缺点，至少我知道。

每次处理具有本地生命范围的 Disposable 对象时，请使用`using`.

通过这种方式，您将受益，即使在`using`范围内出现异常的情况下，也会顺便调用 on `Disposable`object `Dispose(..)`，就像`using`没有别的一样，然后：

```
try {

}
finally {
} 
```

# xml - XML Schema 验证，无效的有效内容

> ID：14436308
> 
> 赞同：2
> 
> 时间：2013-01-21T10:08:02.780
> 
> 标签：xml, validation, xsd

我有一个 xsd 来验证一个 xml 文件，但我收到了错误`Invalid content was found starting with element 'user'. One of '{user}' is expected.`

如果我将命名空间声明更改为`xmlns:synchronisation="synchronisation"`并放置`synchronisation:syncQueryMapping`为根标记，但其余部分保持不变，则它已被验证，但我不明白为什么这样做，为什么它是必要的以及为什么其余的标签不需要它.

我似乎无法理解并解决这个问题，所以任何帮助将不胜感激！

谢谢！

xml文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<syncQueryMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="synchronisation"
    xsi:schemaLocation="synchronisation syncQueryMappingSchema.xsd">

    <user>
        <tableName></tableName>
        <nameColumn></nameColumn>
        <passwordColumn></passwordColumn>
    </user>
    <group>
        <tableName></tableName>
        <nameColumn></nameColumn>
    </group>
    <userGroupMapping>
        <tableName></tableName>
        <userNameColumn></userNameColumn>
        <groupNameColumn></groupNameColumn>
    </userGroupMapping>

</syncQueryMapping> 
```

xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    jaxb:version="1.0" targetNamespace="synchronisation" xmlns="synchronisation">

    <!-- JAXB Configuration -->
    <xs:annotation>
        <xs:appinfo>
            <jaxb:schemaBindings>
                <jaxb:package name="synchronisation.implementation" />
            </jaxb:schemaBindings>
        </xs:appinfo>
    </xs:annotation>

    <xs:complexType name="dbSyncUserType" >
        <xs:sequence>
            <xs:element type="xs:string" name="tableName" />
            <xs:element type="xs:string" name="nameColumn" />
            <xs:element type="xs:string" name="passwordColumn" />
            <xs:element type="xs:string" name="suspendStartDateColumn" minOccurs="0" />
            <xs:element type="xs:string" name="suspendEndDateColumn" minOccurs="0" />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="dbSyncGroupType">
        <xs:sequence>
            <xs:element type="xs:string" name="tableName" />
            <xs:element type="xs:string" name="nameColumn" />
            <xs:element type="xs:string" name="typeColumn" minOccurs="0" />
            <xs:element type="typeColumnDataTypeType" name="typeColumnDataType" minOccurs="0" />
            <xs:element type="xs:string" name="typeValue" minOccurs="0" />
        </xs:sequence>
    </xs:complexType>

    <xs:simpleType name="typeColumnDataTypeType">
        <xs:restriction base="xs:string">
            <xs:enumeration value="INTEGER" />
            <xs:enumeration value="VARCHAR" />
        </xs:restriction>
    </xs:simpleType>

    <xs:complexType name="dbSyncUserTableJoinType">
        <xs:sequence>
            <xs:element type="xs:string" name="userKeyColumn" />
            <xs:element type="xs:string" name="mappingsForeignKeyColumn" />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="dbSyncGroupTableJoinType">
        <xs:sequence>
            <xs:element type="xs:string" name="groupKeyColumn" />
            <xs:element type="xs:string" name="mappingsForeignKeyColumn" />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="dbSyncUserGroupMappingJoinType">
        <xs:sequence>
            <xs:element type="dbSyncUserTableJoinType" name="userTable" />
            <xs:element type="dbSyncGroupTableJoinType" name="groupTable" />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="dbSyncUserGroupMappingType">
        <xs:sequence>
            <xs:element type="xs:string" name="tableName" />
            <xs:element type="xs:string" name="userNameColumn" />
            <xs:element type="xs:string" name="groupNameColumn" />
            <xs:element type="dbSyncUserGroupMappingJoinType" name="join" minOccurs="0" />
        </xs:sequence>
    </xs:complexType>

    <!-- Root element -->
    <xs:element name="syncQueryMapping">
        <xs:complexType>
            <xs:sequence>
                <xs:element type="dbSyncUserType" name="user" />
                <xs:element type="dbSyncGroupType" name="group" />
                <xs:element type="dbSyncUserGroupMappingType" name="userGroupMapping" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:19:09.287

当您添加`xmlns="synchronisation"`到 XML 文档时，您指定所有没有前缀的嵌套元素都属于该名称空间 ( `syncQueryMapping`and `user`)。

```
<syncQueryMapping 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="synchronisation"
    xsi:schemaLocation="synchronisation syncQueryMappingSchema.xsd">
    <user>
        .... 
```

您需要`elementFormDefault="qualified"`在 XML 模式中的根元素上添加以指示与此 XML 模式相对应的 XML 文档中的所有元素都是命名空间限定的。

```
<xs:schema 
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    jaxb:version="1.0" 
    targetNamespace="synchronisation" 
    xmlns="synchronisation"
    elementFormDefault="qualfied"> 
```

如果没有为使您的 XML 文档有效而指定的内容，则只有全局元素应该是命名空间限定的。这意味着您不能使用默认命名空间。

# c# - 从预渲染事件向页面加载事件添加功能

> ID：14436315
> 
> 赞同：1
> 
> 时间：2013-01-21T10:08:23.217
> 
> 标签：c#, asp.net

我在一个 asp.net 项目（ASP.NET 4.0，c#，WebForms）中工作。

我需要根据页面预渲染事件中的某些条件向页面加载事件添加一个函数。我该如何实现这一点。

我尝试了以下代码，

```
Page_Load += new EventHandler(delegate(object sender, EventArgs e) { ShowForm(); }); 
```

但这不起作用。有人可以对此提供一些见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:11:32.070

你不能，在预渲染事件中你来不及了，Load 事件已经发生了！

请参阅[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:12:24.547

不可能 -`Page_Load`事件发生[在](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx) `Page_Prerender`事件之前。

我还怀疑您可能在服务器端事件和客户端事件之间混合 - 当页面在客户端加载时您可能想要执行一些逻辑（这与`page_load`事件不同 - 它发生在服务器端）。

也许您可以尝试通过您所看到的代码来解释您想要实现的确切目标，并且您可能会得到更好的答案来解决您的实际问题。

# excel - 错误 #1004：应用程序定义或对象定义的错误。宏将停止

> ID：14436316
> 
> 赞同：3
> 
> 时间：2013-01-21T10:08:25.753
> 
> 标签：excel, vba

我试图找到一种方法来解决我的问题，但我做不到。我找到了一个将信息从一个excel文件导入到另一个文件的代码。我使用工作表命名和列编号对其进行了重新处理，但是当我尝试运行它时，它给了我一个错误：“错误 #1004：应用程序定义的或对象定义的错误。宏将停止”。你能帮我吗？

```
Private Sub CommandButton1_Click()
On Error GoTo errorhandler
Dim ThisWorkbook As Workbook
Dim ws As Worksheet
Dim RngFleetData, rng As Range
Dim x As Variant
Dim countryN, counnty As String

Dim lReadFirstRow As Long
Dim lReadLastRow As Long
Dim lWriteFirstRow As Long
Dim lWriteLastRow As Long
Dim iRow As Integer
Dim NumOfMonth As Double
filenev = ActiveWorkbook.Name
Application.Calculation = xlCalculationManual
NRRowsRange = 1

 x = Application.GetOpenFilename("Excel Spreadsheets ,*.xls*", , "Open File")
If x = False Then
    Exit Sub
End If

Set ThisWorkbook = Workbooks.Open(x, False, True)

ThisWorkbook.Worksheets("Sheet1").Unprotect

 copied = 0

 j = 1
 Do While Workbooks(filenev).Sheets("auto").Cells(j, 1) <> "fields extract"
 j = j + 1
 Loop
 j = j + 3

 i = 0
 Do While ThisWorkbook.Worksheets("Sheet1").Cells(i, 3) <> ""
    If ThisWorkbook.Worksheets("Sheet1").Cells(i, 1) <> 0 Then

        Workbooks(filenev).Sheets("auto").Cells(j, 1) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 3)
        Workbooks(filenev).Sheets("auto").Cells(j, 2) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 12)
        Workbooks(filenev).Sheets("auto").Cells(j, 3) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 13)
        Workbooks(filenev).Sheets("auto").Cells(j, 4) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 16)
        Workbooks(filenev).Sheets("auto").Cells(j, 5) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 19)
        Workbooks(filenev).Sheets("auto").Cells(j, 6) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 20)
        Workbooks(filenev).Sheets("auto").Cells(j, 7) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 22)
        Workbooks(filenev).Sheets("auto").Cells(j, 8) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 23)
        Workbooks(filenev).Sheets("auto").Cells(j, 9) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 24)
        Workbooks(filenev).Sheets("auto").Cells(j, 10) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 25)
        Workbooks(filenev).Sheets("auto").Cells(j, 11) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 26)
        Workbooks(filenev).Sheets("auto").Cells(j, 12) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 27)
        Workbooks(filenev).Sheets("auto").Cells(j, 13) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 28)
        Workbooks(filenev).Sheets("auto").Cells(j, 14) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 32)
        Workbooks(filenev).Sheets("auto").Cells(j, 15) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 33)
        Workbooks(filenev).Sheets("auto").Cells(j, 16) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 34)
        Workbooks(filenev).Sheets("auto").Cells(j, 17) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 35)
        Workbooks(filenev).Sheets("auto").Cells(j, 18) = ThisWorkbook.Worksheets("Sheet1").Cells(i, 11)

    If ThisWorkbook.Worksheets("Sheet1").Cells(i, 1) = "" Then Workbooks(filenev).Sheets("auto").EntireRow.Delete
       If ThisWorkbook.Worksheets("Sheet1").Cells(i, 2) = 0 Then Workbooks(filenev).Sheets("auto").EntireRow.Delete
       Application.Goto Workbooks(filenev).Sheets("auto").Cells(j, 1)
       ActiveCell.Rows(NRRowsRange).EntireRow.Select
       Selection.Copy
       Selection.Insert Shift:=xlDown
       copied = 1

j = j + 1
End If
i = i + 1
Loop

If copied = 1 Then
ActiveCell.Rows(NRRowsRange).EntireRow.Select
Selection.Delete
Selection.Insert Shift:=xlUp
End If

Application.DisplayAlerts = False
ThisWorkbook.Close False
Application.DisplayAlerts = True

MsgBox "fields has been imported sucessfully!"

  Application.Calculation = xlCalculationAutomatic
Workbooks(filenev).Sheets("auto").Activate

errorhandler:
Select Case Err.Number
Case 9
MsgBox "Hey Buddy, this is NOT the right extract! Macro will STOP", vbExclamation, "STOP"
ThisWorkbook.Close False
Case 0
Case Else
MsgBox "Error # " & Err & " : " & Error(Err) & "Macro will STOP"
End Select
End Sub 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:25:29.020

I see an error in this line

```
 i = 0
 Do While ThisWorkbook.Worksheets("Sheet1").Cells(i, 3) <> "" 
```

The first row cannot be `0`

Change `i = 0` to `i = 1` and try again.

I also see an error in these lines

```
If ThisWorkbook.Worksheets("Sheet1").Cells(i, 1) = "" Then Workbooks(filenev).Sheets("auto").EntireRow.Delete
If ThisWorkbook.Worksheets("Sheet1").Cells(i, 2) = 0 Then Workbooks(filenev).Sheets("auto").EntireRow.Delete 
```

Which row do you want to delete? You have to mention the row. For example

```
Workbooks(filenev).Sheets("auto").Rows(1).Delete 
```

* * *

## **EDIT**

* * *

Sorry couldn't help but give this advice. I noticed few things which I thought that I'll point out

**A**. use `Option Explicit` This will ensure that you declare all variables. Now, why is this important? There are two main reasons for using `Option Explicit`

a). It forces you to declare your variables as a specific data type.

b). It keeps a watch on your code checking for spelling mistake that might happen when you type your variable.

You might also want to read [this](http://www.siddharthrout.com/2011/08/01/to-err-is-human/)?

**B** Use proper handling. This is required so that you can trap errors and also not to mention "Restore Defaults"

For example, you are setting `Application.Calculation = xlCalculationManual` What happens if you get and error? I would recommend something like this

```
Option Explicit

Private Sub Sample()
    Dim clc As Long

    On Error GoTo errorhandler

    clc = Application.Calculation

    Application.Calculation = xlCalculationManual

    '
    '~~> REST OF YOUR CODE
    '

LetsContinue:
    Application.Calculation = clc '<~~ Reset Calc
    Exit Sub
errorhandler:
    Select Case Err.Number
    Case 9
        MsgBox "Hey Buddy, this is NOT the right extract! Macro will STOP", vbExclamation, "STOP"
        ThisWorkbook.Close False
    Case Else
        MsgBox "Error # " & Err & " : " & Error(Err) & "Macro will STOP"
    End Select
    Resume LetsContinue
End Sub 
```

# backbone.js - 骨干.js 每个函数都没有接收到模型

> ID：14436317
> 
> 赞同：0
> 
> 时间：2013-01-21T10:08:26.730
> 
> 标签：backbone.js

我正在尝试接收 json 数据并附加到元素。在我使用静态分配之前，一切都很好。当我开始从服务器端获取数据时，或者使用 fetch nothing 对我有用..我的 fech 过程有问题，任何可以帮助我更正我的 fetch 过程并更新我的代码。（而不是简单地放置正确的代码） ..

我的 JSON（样本）：

```
nameing = [
    {name:'student4'},
    {name:'student5'},
    {name:'student6'}
] 
```

骨干代码：

```
(function($){

var list = {};

list.model = Backbone.Model.extend({
  defaults:{
    name:'need the name'
  }
});

list.collect = Backbone.Collection.extend({
  model:list.model,
  url : 'data/names.json', //this is correct path.
  initialize:function(){
    this.fetch();
  }
});

list.view = Backbone.View.extend({
  initialize:function(){
    this.collection = new list.collect();
    this.collection.on("reset", this.render, this);
  },
  render:function(){
    _.each(this.collection.models, function(data){
      console.log(data); // i am not get any model here... any one correct my code?  
    })
  }
});

var newView = new list.view();

})(jQuery) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:30:05.570

您的 JSON 无效。[维基](http://en.wikipedia.org/wiki/JSON)

```
[
  {"name":"student4"},
  {"name":"student5"},
  {"name":"student6"}
] 
```

# c# - 在运行时创建一个新方法

> ID：14436325
> 
> 赞同：0
> 
> 时间：2013-01-21T10:08:45.910
> 
> 标签：c#

我想学习使用某些客户端代码想要的签名动态创建方法的巧妙技巧。就像`System.Delegate.BeginInvoke`,`EndInvoke`和`Invoke`方法一样。

我正在`System.Delegate`类中查找这些方法，但找不到它们（除了`DynamicInvoke`，这并不有趣，因为它无论如何都会动态地调度对后期绑定方法的调用），因此显然这些方法是在运行时创建的。

如果我必须实施这样的事情，我会怎么做，我正在摸不着头脑。我在大声思考：

1) 代码 DOM 不起作用，因为我对构建新程序集不感兴趣。我只想在同一个程序集中的一个类中添加一个新方法。

2）好的旧反射会很好用。我可以创建一个`MethodInfo`与客户端代码指定的参数相同的新对象，但是如何让这个新事物`MethodInfo`作为方法出现在我的类中？

任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:31:19.113

这个问题的答案是使用`System.Reflection.Emit.DynamicMethod`类。要查看工作示例，请访问[此链接](http://msdn.microsoft.com/en-us/library/system.reflection.emit.dynamicmethod.aspx)。

非常感谢 Jon Skeet 引导我朝着正确的方向前进。请参阅对此问题的评论。

# c - 无锁缓冲区

> ID：14436333
> 
> 赞同：0
> 
> 时间：2013-01-21T10:09:23.530
> 
> 标签：c, thread-safety, locking, buffer, c99

在我的代码中，我有一个缓冲区，向其中添加数据的代码是：

```
bool push_string(file_buffer *cb, const char* message, const unsigned short msglen)
{
    unsigned int size = msglen;

    if(cb->head >= (cb->size - size))
    {
        size = cb->size - cb->head - 1;
    }

    if(size < 1) return false;

    char* dest = cb->head += size;

    memcpy(dest, message, size);

    return (size == msglen);
} 
```

由于我从多个中断添加数据（可以相互豁免），我想知道这段代码是否是线程安全的？我将 'cb->head' 标记为 volatile，但如果另一个中断恰好在 'head' 的增加和对 'dest' 的分配之间排除，事情可能会出错。

如何改进此代码以使其更安全？

编辑：也许我不应该使用“线程安全”这个词，因为没有并行运行的线程，只有中断的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:20:15.510

C99 没有线程的概念，因此也没有线程安全的概念。只有 C11 有。在 C99 中，唯一的中断安全数据类型是`sig_atomic_t`，但显然这也没有说明线程。

通常，您在尝试同时访问数据结构时是完全错误的，`volatile`完全不能保证您会收到合理的数据。即使在 C11 中，也无法保证任何操作的原子性，因此您可能会遇到指针值的下半部分已写入但上半部分未写入的情况。这可能会给你一个完全虚假的结果。由于这样的事情可能会在一百万分之一或在特殊情况下（例如重负载）发生一次，这可能会导致难以追踪的错误。

不要那样做。

C11 为您提供了处理此类事情的新工具，尤其是原子操作。它尚未完全实现，但许多编译器已经具有可以帮助您的扩展。我已经在[P99](http://p99.gforge.inria.fr)宏包中封装了其中的一些，因此对于某些编译器，您可以从今天开始使用这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:07:46.710

想想信号中断信号......如果你真的需要：

您可以在 push_string() 中阻止所有相关信号。

另一种依赖于应用程序的可能性可能是将信号处理程序代码移动到主“线程”中（信号处理程序代码只生成唤醒主执行线程的“事件”）。我没有足够的关于你的应用程序的信息，说它是否是一个好的选择。

# yii - yii 中的 CHtml 链接无法删除记录

> ID：14436334
> 
> 赞同：1
> 
> 时间：2013-01-21T10:09:24.123
> 
> 标签：yii

在我看来，我正在使用这样的方式删除记录

```
<?php  echo CHtml::link('Delete',"#", array("submit"=>array('delete', 'id'=>$data->id), 'confirm' => 'Are you sure?','class'=>'btn btn-danger icon_delete'));?> 
```

如果我按下删除按钮，它会生成警报框，然后如果我单击确定，则不执行任何操作删除，这意味着（它不会进入控制器）任何人都可以帮忙

控制器

```
 public function actionDelete($id)
 {
 $this->loadModel($id)->delete();
 if(!isset($_GET['ajax']))
 $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('view'));
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:25:36.207

The code for deleting the record is fine only. I think you should check controller, may be you have not defined the action 'delete'. Just check it.

I think you should change the code in the delete action as follow pattern:

```
 $model = Your_modelClass name::model()->findByPk($id);
    $model->delete();
    $this->redirect(array('list')); 
```

Here **Your_modelClass name** should be same as the model(or table, from where you want to delete the data). But make sure that you have created model also for your table.

And the 3rd line is optional, You can use it if want to redirect to any page(here list page).

Think it will help.

# android - 如何在按钮单击时在 Surface View 中将图像更改为灰度

> ID：14436336
> 
> 赞同：0
> 
> 时间：2013-01-21T10:09:35.290
> 
> 标签：android

大家好，我如何将表面视图中的图像（由相机显示）更改为灰度。并且在捕获该图像后应该以灰度保存。

提前致谢。

# android - 在 datepicker android 中仅设置特定日期

> ID：14436337
> 
> 赞同：2
> 
> 时间：2013-01-21T10:09:39.343
> 
> 标签：android, datepicker

我正在构建一个约会预订器应用程序，我想让用户从日期选择器中选择预订的日期/时间。我遇到问题的部分是从可选列表中排除某些日期/时间。

例如，选择预订的用户将无法在一天的上午 9 点之前和下午 6 点之后看到，周日以及上午 11 点和下午 2 点已经被预订（为了举例），它们也不应该可见。

# java - linux中文件夹或文件“root”权限的问题

> ID：14436343
> 
> 赞同：0
> 
> 时间：2013-01-21T10:10:06.393
> 
> 标签：java, linux, file-io

我正在使用 jdk 1.4 (mkdir) 在 linux 中创建文件夹/文件。我正在使用测试用户（有限权限）从我的应用程序运行此代码。但是文件夹/文件是使用 root 权限创建的。我需要稍后手动删除这些文件和文件夹。当我尝试删除文件夹/文件时，我被拒绝访问。JDK 安装在根目录下。

如何在**java 1.4**中创建具有不同用户权限（非 root）的文件夹/文件？

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:13:34.003

您的文件将由您运行的虚拟机的所有者创建。如果您想以不同的用户身份运行，[`su - <userid>`](http://linux.die.net/man/1/su)是您的朋友。

你可以例如。使用`--command`参数到`mkdir`您的目录。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:21:39.257

您是否以 root 用户身份运行程序？在这种情况下，它也会以 root 用户身份创建文件，所以要么以测试用户身份运行你的程序，要么使用`sudo -u <username> mkdir <dirname>`.

# c# - MVC：从使用不同模型的视图中添加新模型实例

> ID：14436345
> 
> 赞同：1
> 
> 时间：2013-01-21T10:10:11.933
> 
> 标签：c#, asp.net-mvc

我最近开始使用 MVC，作为一个测试项目，我正在创建一个简单的“博客”。我有一个基本结构，主页显示所有帖子，当您单击它时，它将进入详细信息页面。

![结构](../Images/6e0dd0c8e3feca830041adbaf4ea0e80.png)

现在我正在尝试`comments`从视图中将 (Comment.cs) 添加到我的帖子中`Home/Details`，这基本上要求我在 1 个视图中拥有 2 个模型。模型 1 为`Post`模型，模型 2 为`Comment`模型；

*   Post.cs 用于获取帖子的详细信息
*   Comment.cs 用于给帖子添加评论

这是我的`Home/details`观点的代码：

```
@model MVCPortfolio.Models.Post

@{
    ViewBag.Title = "Details";
}

<h2>@Model.Title - @Model.Author</h2>

<fieldset>
    <legend>Posted on @Model.Date.ToShortDateString()</legend>
    <div class="content">
         @Model.Content
    </div>
</fieldset>
    <div class="comments">
        <ul>
            @foreach (var c in Model.Comments)
            {
            <li>
                @c.Content - @c.Author
            </li>
            }
        </ul>
    </div>
<div class="newcomment">
@*  @Html.EditorFor(model => model) *@
</div>

<p>
@* 
    @Html.ActionLink("New Comment", "Comment", new { id = Model.PostId }) 
*@
    |
    @Html.ActionLink("Back to List", "Index")
</p> 
```

这是我的家庭控制器，我想在其中添加评论。

```
 private PortfolioEntities db = new PortfolioEntities();

    //
    // GET: /Home/

    public ActionResult Index()
    {
        var posts = (from p in db.Posts
                     orderby p.Date
                     select p);

        return View(posts);
    }

    public ActionResult Details(int id)
    {
        var post = (from p in db.Posts
                    where p.PostId == id
                    select p).Single();

        return View(post);
    }

    [HttpPost]
    public ActionResult Comment(Comment comment)
    {
        if (ModelState.IsValid)
        {
            db.Comments.Add(comment);
            db.SaveChanges();

            return RedirectToAction("Details");
        }

        return View(comment);
    }
} 
```

但我不明白的是如何添加`comment`到 中`post`，我可以轻松地添加一个新的`post`（[参见我的 Create.cshtml 视图](http://pastebin.com/ViyhWTXJ)），但我无法弄清楚如何`comment`从`post`详细视图中添加一个。

谢谢你的时间，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:15:49.370

鉴于澄清，我认为您应该为此创建一个[局部视图](http://www.devcurry.com/2012/04/partial-views-in-aspnet-mvc-3.html)。

在您看来，替换

```
@Html.ActionLink("New Comment", "Comment", new { id = Model.PostId }) 
```

调用渲染局部视图

```
@Html.Partial("_Comment") 
```

您的局部视图应该处理 UI 以添加`Comment`，以调用您的`Comment`操作方法结束`PostController`

# c# - 从头开始构建 xml 并以字符串形式获取结果？

> ID：14436347
> 
> 赞同：1
> 
> 时间：2013-01-21T10:10:14.833
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试使用 linq-to-xml 从头开始​​构建 xml 文档。

```
XElement root = new XElement("RootNode");
            XDocument doc = new XDocument(
            new XDeclaration("1.0", "utf-8", ""), root
            );
            for (int j = 0; j < 10; j++)
            {
                XElement element = new XElement("SetGrid");
                element.SetElementValue("ID", j);                    
                root.Add(element);

            }
   var reader = doc.CreateReader();//doc has 10 elements inside root element
   string result = reader.ReadInnerXml();//always empty string 
```

我怎样才能得到字符串`XDocument`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:11:12.987

只需使用`string result = doc.ToString()`或

```
var wr = new StringWriter();
doc.Save(wr);
string result = wr.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:28:15.593

根据文档，空字符串的一种选择。

`XmlReader`返回：

> 当前节点中的所有 XML 内容，包括标记。如果当前节点没有子节点，则返回一个空字符串。如果当前节点既不是元素也不是属性，则返回一个空字符串。

尝试：

```
XmlReader reader = doc.CreateReader();
reader.Read(); 
string result = reader.ReadInnerXml() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:12:49.957

```
var wr = new StringWriter();
doc.Save(wr);
var xmlString = wr.GetStringBuilder().ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T13:59:15.600

[这里](https://stackoverflow.com/a/1704579/938883)有完整的答案。

长话短说，你失踪了`reader.MoveToContent();`

即应该是：

```
var reader = root.CreateReader();
reader.MoveToContent(); // <- the missing line
string result = reader.ReadInnerXml(); 
```

这样`result`就不会是空的，你甚至不必创建`XDocument`

所以原始问题的完整代码+修复是：

```
XElement root = new XElement("RootNode");
for (int j = 0; j < 10; j++)
{
    XElement element = new XElement("SetGrid");
    element.SetElementValue("ID", j);
    root.Add(element);
}

var reader = root.CreateReader();// root has 10 elements
reader.MoveToContent(); // <-- missing line
string result = reader.ReadOuterXml(); // now it returns non-empty string 
```

输出：

```
<RootNode><SetGrid><ID>0</ID></SetGrid><SetGrid><ID>1</ID></SetGrid><SetGrid><ID>2</ID></SetGrid><SetGrid><ID>3</ID></SetGrid><SetGrid><ID>4</ID></SetGrid><SetGrid><ID>5</ID></SetGrid><SetGrid><ID>6</ID></SetGrid><SetGrid><ID>7</ID></SetGrid><SetGrid><ID>8</ID></SetGrid><SetGrid><ID>9</ID></SetGrid></RootNode> 
```

注意：代码在 Visual Studio 2013 / .NET Framework 4.5 中测试

MDSN 参考：[XmlReader.ReadOuterXml](https://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readouterxml(v=vs.110).aspx)

# php - Propel 提供什么安全性？

> ID：14436351
> 
> 赞同：2
> 
> 时间：2013-01-21T10:10:32.397
> 
> 标签：php, security, propel

我使用 Propel 框架与数据库进行通信。`bindParam()`当我尝试输入时，我认为它正在使用 PDO 并制作 a ，因此应该涵盖 SQL 注入。

但它是否提供额外的安全性，例如`strip_tags()`,`htmlspecialchars()`或类似的东西，还是我应该手动执行此操作？

我以前使用过 PDO，所以我知道基础知识，但这是我第一次使用 Propel。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:13:28.763

我不希望 ORM 能够防止 XSS 攻击。这是一个与数据库层无关的问题（如果您想存储 HTML，则会导致问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:08:15.200

Propel 提供的唯一“安全性”是您提到的参数绑定。如果有人确实想要存储 html 标签、特殊字符等，除此之外的任何事情都可能导致问题。也就是说，如果需要，您可以扩展 Propel 为您执行此操作。例如，您可以覆盖`setXxxx()`类中的方法：

```
class Book extends BaseBase {
  ...
  public static function setTitle($v) {
    return parent::setTitle(strip_tags($v));
  }
  ...
} 
```

执行上述操作可以让您`strip_tags()`在设置`Book`标题时随时执行。由于 Propel 在任何可能的地方都使用了 setter 方法，所以你应该很好。当然，您的代码必须在任何地方实际使用该设置器以确保它发生。

# iphone - 为一个月的特定一周安排 UILocalNotifications

> ID：14436352
> 
> 赞同：0
> 
> 时间：2013-01-21T10:10:47.620
> 
> 标签：iphone, objective-c, nsdate, uilocalnotification, nsdatecomponent

我正在安排`UILocalNotifications`我的项目。目前我正在安排每天的通知。现在客户要求做一些特定的场景，比如每隔一周安排一次。有没有办法做到这一点？请任何人提出解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:15:23.700

[此处](https://stackoverflow.com/questions/10375128/uilocalnotification-fire-and-repeat-at-particular-time-each-day)提供的答案可以根据您的需要进行调整。

更改`localNotification.repeatInterval = NSDayCalendarUnit;`为`localNotification.repeatInterval = NSWeekCalendarUnit;`（在使用 NSDateComponents 将其提取出来之后）将是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:17:27.767

使用 Ekeventkit 商店在特定日期/日期等显示警报。

您应该阅读[Apple 文档](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventClassRef/Reference/Reference.html)

# cakephp - 如何更改 cakephp 中“WhoDidiT”的默认行为

> ID：14436357
> 
> 赞同：3
> 
> 时间：2013-01-21T10:11:02.520
> 
> 标签：cakephp, cakephp-1.3

我在我的模型中使用“WhoDidiT”来插入 user_id。它工作正常。现在我需要插入一个不同的 user_id 而不是登录的 user_id。有没有办法在不修改'WhoDidiT'的情况下插入不同的user_id

```
var $actsAs = array(
    'WhoDidIt'=>array(
                     'created_by_field'=>'created_by',
                     'modified_by_field'=>'modified_by'
                ),

 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:53:38.763

保存后，您可以更新该特定字段

```
$this->Model->saveField('created_by',$id); 
```

这会成功的

# android - ActionBarSherlock 选项卡的自定义字体

> ID：14436364
> 
> 赞同：11
> 
> 时间：2013-01-21T10:11:29.060
> 
> 标签：android, actionbarsherlock

我想在`ActionBarSherlock`. 我已经使用以下代码来执行此操作。它在 ICS 中准确显示，但在较低版本的设备中显示不准确，但我通过将 TYPE FACE 设置为 ...

```
a.settypeface("ab.tttf");
a.settext("VIDEO"); 
```

但是我该怎么做我在这段代码中设置了`TypeFace`一个`ActionBar`：

```
mTabsAdapter.addTab(bar.newTab().setText("IMAGE"), AFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText("VIDEO"), BFragment.class, null); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T07:15:23.663

好的 。我自己在SO的某个地方发现了它。

首先在其中制作一个 xml 文件：tab_title.xml

```
<TextView
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/action_custom_title"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="My Custom title"
android:textColor="#fff"
android:textSize="18sp"
android:paddingTop="5dp" /> 
```

然后在您实例化 ActionBar 的类中，使用此代码设置每个选项卡上的文本。（此示例使用 ActionBarSherlock。）

```
ActionBar bar = getSupportActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

String[] tabNames = {"Tab 1","Tab 2","Tab 3"};

for(int i = 0; i<bar.getTabCount(); i++){
    LayoutInflater inflater = LayoutInflater.from(this);
    View customView = inflater.inflate(R.layout.tab_title, null);

    TextView titleTV = (TextView) customView.findViewById(R.id.action_custom_title);
    titleTV.setText(tabNames[i]);
    //Here you can also add any other styling you want.

    bar.getTabAt(i).setCustomView(customView);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T13:25:13.130

首先在您的项目中创建以下自定义`TypefaceSpan`类。Bit 更改了[自定义 TypefaceSpan](https://gist.github.com/twaddington/b91341ea5615698b53b8)的版本以启用字体`.otf`和`.ttf`字体。

```
import java.util.StringTokenizer;

import android.content.Context;
import android.graphics.Typeface;
import android.support.v4.util.LruCache;
import android.text.TextPaint;
import android.text.style.MetricAffectingSpan;

public class TypefaceSpan extends MetricAffectingSpan{

    /*Cache to save loaded fonts*/
    private static LruCache<String, Typeface> typeFaceCache= new LruCache<String, Typeface>(12);
    private Typeface mTypeface;
    public TypefaceSpan(Context context,String typeFaceName)
    {
        StringTokenizer tokens=new StringTokenizer(typeFaceName,".");
        String fontName=tokens.nextToken();
        mTypeface=typeFaceCache.get(fontName);

        if(mTypeface==null)
        {
            mTypeface=Constants.getFont(context, typeFaceName);
            //cache the loaded font
            typeFaceCache.put(fontName, mTypeface);
        }
    }
    @Override
    public void updateMeasureState(TextPaint p) {
        p.setTypeface(mTypeface);
    }

    @Override
    public void updateDrawState(TextPaint tp) {
        tp.setTypeface(mTypeface);
    }

} 
```

现在应用这样的代码：（我在我的一个孟加拉应用程序上成功使用了它）

```
 SpannableString mstKnwTitle=new SpannableString(getString(R.string.e_mustknow_tab));
        SpannableString cntctsTitle=new SpannableString(getString(R.string.e_number_tab));

        TypefaceSpan span=new TypefaceSpan(this, "solaimanlipi.ttf");

        mstKnwTitle.setSpan(span, 0, mstKnwTitle.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);     
        cntctsTitle.setSpan(span, 0, mstKnwTitle.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        Tab tab= actionBar.newTab();
        tab.setText(mstKnwTitle);
        tab.setTabListener(tabListener);

        actionBar.addTab(tab);

        tab= actionBar.newTab();
        tab.setText(cntctsTitle);
        tab.setTabListener(tabListener);

        actionBar.addTab(tab); 
```

我的回答的原始灵感是：[使用自定义字体设置 Android 操作栏标题的样式](http://www.tristanwaddington.com/2013/03/styling-the-android-action-bar-with-a-custom-font/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T10:17:03.930

要解决这个问题，您可以创建一个特殊的操作栏类。只需创建一个类`myBar extends Sherlockactionbar`并放入 settypeface。如果您现在在视图中创建该栏，它将具有您希望的字体。例如，这里是一个带有新字体的按钮。

```
public class ChangedButton extends Button{

    public ChangedButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        Typeface font = Typeface.createFromAsset(context.getAssets(), "fonts/viking2.TTF");
        this.setTypeface(font);
    }
} 
```

问候

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T10:17:39.267

尝试这个：

```
String s = "VIDEO";
SpannableString mSS = new SpannableString(s);
mSS.setSpan(new StyleSpan(Typeface.BOLD), 0, s.length(), 0);
mTabsAdapter.addTab(bar.newTab().setText(mSS),
                BFragment.class, null); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T05:50:37.683

似乎您没有得到任何指导。我不确定我的答案的结果，但是是的，你可以大胆地想办法按照你的意愿去做。

让我试着帮助你。我认为您必须在某种程度上使用 android sdk 的内置默认资源。

您必须创建自定义样式：

```
<style name="MyActionBarTabText" parent="Widget.ActionBar.TabText">
    <item name="android:textAppearance">@style/TextAppearance.Holo.Medium</item>
    <item name="android:textColor">?android:attr/textColorPrimary</item>
    <item name="android:textSize">12sp</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textAllCaps">true</item>
    <item name="android:ellipsize">marquee</item>
    <item name="android:maxLines">2</item>
</style>

 <style name="Widget.ActionBar.TabText" parent="Widget">
    <item name="android:textAppearance">@style/TextAppearance.Widget.TextView.PopupMenu</item>
    <item name="android:textColor">?android:attr/textColorPrimaryInverse</item>
    <item name="android:textSize">18sp</item>
    <item name="android:fontFamily">HERE YOU CAN GIVE YOUR FONT</item>
</style> 
```

你也可以参考[这个 SO](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3afontFamily)。

现在只需将该主题应用于您的活动，您将获得所需的 TabText 字体。

如果有任何疑问，请评论我。

享受编码... :)

**在额外**

另一种解决方案可能是使用[GIMP](http://www.gimp.org/)或 photoshop 修改选项卡图像以包含文本，然后将这些图像设置在选项卡中，而不是图像和文本。这是一种有点尴尬的做法，但它会起作用。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-24T01:34:54.463

你可以这样做：

```
// Set a custom font on all of our ActionBar Tabs
private boolean setCustomFontToActionBarTab(Object root) {

    // Found the container, that holds the Tabs. This is the ScrollContainerView to be specific,
    // but checking against that class is not possible, since it's part of the hidden API.
    // We will check, if root is an instance of HorizontalScrollView instead,
    // since ScrollContainerView extends HorizontalScrollView.
    if (root instanceof HorizontalScrollView) {
        // The Tabs are all wraped in a LinearLayout
        root = ((ViewGroup) root).getChildAt(0);
        if (root instanceof LinearLayout) {
            // Found the Tabs. Now we can set a custom Font to all of them.
            for (int i = 0; i < ((ViewGroup) root).getChildCount(); i++) {
                LinearLayout child = ((LinearLayout)((ViewGroup) root).getChildAt(i));
                TextView actionBarTitle = (TextView) child.getChildAt(0);
                Typeface tf = Typeface.createFromAsset(mContext.getAssets(), "font/font.ttf");
                actionBarTitle.setTypeface(tf)
            }
            return true;
        }

    } 
    // Search ActionBar and the Tabs. Exclude the content of the app from this search.
    else if (root instanceof ViewGroup) {
        ViewGroup group = (ViewGroup) root;
        if (group.getId() != android.R.id.content) {
            // Found a container that isn't the container holding our screen layout.
            // The Tabs have to be in here.
            for (int i = 0; i < group.getChildCount(); i++) {
                if (setCustomFontToActionBarTab(group.getChildAt(i))) {
                    // Found and done searching the View tree
                    return true;
                }
            }
        }
    }
    // Found nothing
    return false;
} 
```

用这个调用它：

```
ViewParent root = findViewById(android.R.id.content).getParent();
setCustomFontToActionBarTab(root); 
```

# javascript - 未找到定义的函数

> ID：14436367
> 
> 赞同：2
> 
> 时间：2013-01-21T10:11:46.263
> 
> 标签：javascript, jquery

我有这个在 for 循环中调用的函数。

```
 function printResult(name, i) {

$('#list').append("<a href='#' onClick='goto(" + i + ");' class='item'><H1>" + name + "</H1>    </a>");
 } 
```

a href 标记按照应有的方式附加，但是当我调用 goto 函数时，萤火虫说：'goto is not defined'

但它是！！

这是功能：

```
function goto(myPoint){
      map.setCenter(new google.maps.LatLng(marker[myPoint-1].position.lat(), marker[myPoint-      
      1].position.lng()));
     markerArr[myPoint-1]['infowindow'].open(map, markerArr[myPoint-1]);
  } 
```

我不知道为什么找不到该功能。它与在附加的href标签中被调用有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:56:43.327

`goto()`是一个糟糕的函数名称，因为它在许多编程语言中通常用作关键字。

在 Javascript 中，它不是关键字。但是，它*是* [一个保留字](http://javascript.about.com/library/blreserved.htm)，因为它可能会在该语言的未来版本中使用。仅此一项就可能导致 JS 拒绝您的函数或无法调用它。

但即使它不是保留的，也可能被视为潜在的歧义，因此不建议使用。

因此，我的建议是更改函数名称。运气好的话，它可能会神奇地开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:57:11.020

当你使用`onclick`属性定义事件处理程序时， 的定义`goto()` **必须是全局**的，即`window.goto`必须存在。

更重要的是，**这不是 jQuery 方式**；事件处理程序应该在 JavaScript 代码而不是 HTML 中定义。

```
function printResult(name, i) 
{
    var $title = $('<h1 />', { text: name }),
    $anchor = $('<a href="#" class="item" />')
        .append($title)
        .on('click', {
            index: i
        }, moveToIndex)
        .appendTo('#list');
}

// this is the click handler
function moveToIndex(evt)
{
    // evt.data.index = the value of i
} 
```

我已将您的`goto()`函数重命名`moveToIndex()`为更具描述性的函数。这不应该与您当前的代码具有相同的范围问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:12:44.930

像这样使用 jQuery 点击事件：

html:

```
function printResult(name, i) {
    $('#list').append("<a href='#' rel='" + i + "' class='item'><H1>" + name + "</H1></a>");
} 
```

JS：

```
$(document).on('click', 'a.item', function (e) {
   goto($(this).attr("rel"));
}); 
```

但我建议将函数重命名为`goto`其他名称或执行以下操作：

```
$(document).on('click', 'a.item', function (e) {
   var myPoint = $(this).attr("rel");
   map.setCenter(new google.maps.LatLng(marker[myPoint-1].position.lat(), marker[myPoint-      
  1].position.lng()));
   markerArr[myPoint-1]['infowindow'].open(map, markerArr[myPoint-1]);
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-21T10:30:12.533

您正在使用`onClick='goto(" + i + ");'`. 改用`onclick ='goto("+i+")'`，不要使用分号

# css - 为什么这个元素在位置固定后看起来会滚动？

> ID：14436375
> 
> 赞同：0
> 
> 时间：2013-01-21T10:12:14.243
> 
> 标签：css, ajax

我一直试图弄清楚这一点，

我有一个页面*具有*位置的元素：固定；*它位于*top:0；*并*离开：0；*但是当您滚动页面时，它似乎在滚动并且dosent保持在固定位置。如果您在 Safari 或 Chrome 上使用“检查元素”功能，它会突出显示该元素，就好像它仍处于固定位置一样。*

 *我最初认为这可能与页面使用 ajax 从数据库加载内容，然后在滚动时使用无限滚动来继续加载内容这一事实有关。

您可以在以下位置查看该页面：[http ://www.davidmcmenemy.com/bwg_shop/index.php](http://www.davidmcmenemy.com/bwg_shop/index.php)

任何帮助都会很棒！

谢谢你，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:53:15.637

您对 ajax 的假设是正确的：

您的问题可能与以下内容重复： [Position Fixed in Chrome](https://stackoverflow.com/questions/1131710/position-fixed-in-chrome/10849618#10849618)

答：chrome 认为页面加载后添加到 DOM 的元素的视口（例如，使用 jQuery.load()）仅限于该元素的包含 div。引用：[https ://stackoverflow.com/a/10849618](https://stackoverflow.com/a/10849618)

尝试在没有 javascript 的情况下加载您的网站，导航将保持其位置。

@Oleg Mikheev：行为仅发生在 Safari 和 Chrome 中。（应该是评论）*

# ios - 每次运行应用程序时，我都必须下载新数据

> ID：14436380
> 
> 赞同：0
> 
> 时间：2013-01-21T10:12:27.610
> 
> 标签：ios, objective-c, web-services, sqlite, core-data

我正在使用最新的 SDK 和 XCode 4.5.2 开发一个 iPhone 应用程序。

这个问题可能对任何移动平台都有效。

当应用加注星标并下载一些信息时，我需要连接到网络服务。服务器上的这些信息可能会发生变化：一些寄存器可能会被删除、更新或插入。

我的问题是我不知道在哪里存储这些信息。我认为将其存储在设备内存中是个坏主意。我认为最好存储在文本文件或数据库中。**你怎么看？**

我还有一个问题是：**如何知道服务器上的某些数据是否已更改？**我认为每次用户给应用加注星标时下载相同的数据是个坏主意。

如果我想这样做，请在启动时连接到网络服务，当显示启动画面时。**我必须将代码放在 AppDelegate 上的什么地方？**

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:35:31.557

**我必须将代码放在 AppDelegate 上的什么地方？**

将代码放在 AppDelegate 中并不是一个好主意。相反，您可以将 viewController 作为启动画面。将此 viewController 设置为您的 rootViewController。在此处执行您的初始 Web 服务调用，完成后移至应用程序的第一个屏幕。

**我如何知道服务器上的某些数据是否已更改？**

您必须将您的数据版本传达给服务器。所以在服务器端给数据设置一个版本号，在下载数据的时候保持跟踪。因此，如果您在调用 Web 服务时将版本号传递给服务器，则服务器可以决定是否有任何新数据可用。这样您就可以避免下载已经下载的数据。

**在哪里存储这些信息？**

这取决于您要存储的数据大小。以及它的安全性。我认为使用像 Sqlite3 这样的数据库是一个不错的选择。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:09:37.730

**我必须将代码放在 AppDelegate 上的什么地方？**

这取决于您决定下载数据的应用程序的行为。通常，如果您的应用程序应该在每次进入新视图时显示最新数据，则应在访问该视图时下载数据。这样，您将始终向用户显示最新的可用数据。

*您通常会避免在application: didFinishLaunchingWithOptions:*中投入太多，尤其是网络连接，因为您不知道用户可能拥有什么样的连接。如果连接需要很长时间并且*应用程序：didFinishLaunchingWithOptions:*需要太长时间才能返回 iOS 会因为打开时间过长而终止您的应用程序，这根本不利于用户体验。

**我如何知道服务器上的某些数据是否已更改？**

您将希望在来自服务器的响应的标头中传递最后修改的时间戳或 etag。当您从服务器获得标头响应时，您可以检查您收到的上一个上次修改的数据，或者如果 etag 不同，您就知道数据已更改。这样做比下载所有正文以检查单个参数要快得多，如果该参数没有更改，那么您只是下载了一堆数据。我不鼓励版本控制，版本控制更多地用于 API 更改，而不是检查数据是否过时。

**存储位置？**

这取决于您要下载的数据量，但我建议通常使用核心数据。将数据存储到文件然后保存该文件的问题在于，每次打开应用程序时，您都必须将该数据分解为可用的东西，然后才能搜索它等。使用核心数据，您将拥有完全形成的对象您可以使用 NSPredicate 进行搜索，从长远来看，这会使一切变得更容易使用。

如果您只是下载一些设置，那么您可以使用文件或 NSUserDefaults 之类的东西，但如果您要向用户显示数据列表或数据集合，最好使用核心数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:04:57.770

**我如何知道服务器上的某些数据是否已更改？**
在您的应用程序和服务器中也使用可变版本。使用 API 发送应用程序变量版本，并在下载数据之前检查两个版本。

**我必须将代码放在 AppDelegate 上的什么地方？**

要么可以使用 applicationDidBecomeActive 要么 didFinishLaunchingWithOptions 取决于您的要求
`- (void)applicationDidBecomeActive:(UIApplication *)application`
**或**
`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

 **根据数据的大小和您的要求**将这些信息存储在哪里，您可以决定将数据保存在哪里****

 **1.  您可以将数据保存在**UserDefault**
2.  您可以将数据保存为**NSTemporaryDirectory** */ NSDocumentDirectory / NSLibraryDirectory*中的文件。我认为**NSDocumentDirectory**适合你。
3.  您可以将数据保存在**sqlite**或**CoreData****

# ios - 如何在 iOS 6 中使用 SVN？

> ID：14436382
> 
> 赞同：1
> 
> 时间：2013-01-21T10:12:31.493
> 
> 标签：ios, svn

我是在 iOS 6 中使用 SVN 的新手。谁能给我我遵循的步骤。我的测验是如何在 IOS6 中使用 SVN？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:28:21.760

请按照以下步骤操作：

*   打开你的 XCode

*   选择文件-->源代码管理-->存储库

![菜单选项](../Images/c94b1af951ca2f0cbb3463c6f82e45f7.png)

*   在此窗口中配置您的存储库（要添加存储库，请选择左窗格底部的**+按钮）**

![配置](../Images/bfe2f72f0425fd0d4da0a229e4004536.png)

# svn - 使用 SVN 和 Intellij IDEA 进行变基的最佳方法（12）

> ID：14436386
> 
> 赞同：1
> 
> 时间：2013-01-21T10:12:40.490
> 
> 标签：svn, intellij-idea, rebase

我经常坚持用我们的主干重新定位一个分支，主要是如果主干带来了很多变化。我个人更喜欢 git，但我的公司在这里使用 svn。任何人都可以分享他的经验如何使用 IntelliJ IDEA 和 svn 重新设置最佳基础。目前我正在使用 IDEA 12。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T09:46:34.237

这可能会有所帮助。 [http://www.jetbrains.com/idea/webhelp/integrating-changes-to-branch.html](http://www.jetbrains.com/idea/webhelp/integrating-changes-to-branch.html)

似乎这些说明旨在将子分支集成回父分支（例如主干），但我确信该方法对于变基（也称为从父级集成到子级）是相似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:11:32.493

您是说将分支合并到主干吗？

# c# - 带有 STS 的 Azure 上的 WCF

> ID：14436388
> 
> 赞同：0
> 
> 时间：2013-01-21T10:12:45.640
> 
> 标签：c#, .net, wcf, azure, wif

我在 Azure 上托管了 WCF，如果未通过身份验证，我想先将任何请求重定向到 STS。

因此，如果用户在地址栏中键入以下 : `http://....../mywcfservice.svc`，如果未通过身份验证，则应首先重定向到 STS 登录页面。

我已经在 WebApplication 中实现了相同的配置，但是当在 WCf 中实现相同的配置时，它不会重定向到 sts 登录，而只是显示 - “访问被拒绝”

为什么不将其重定向到 STS 登录页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:00:43.123

WCF 不使用重定向 - 就像您的 WCF 客户端不是浏览器客户端一样。您需要使用 WS-Trust 在 WCF 中进行基于 STS 的身份验证。（请参阅 WCF 文档中的 ws2007FederationHttpBinding）。

# c# - Gridview 中的锚标签的服务器标签格式不正确

> ID：14436392
> 
> 赞同：2
> 
> 时间：2013-01-21T10:13:05.467
> 
> 标签：c#, asp.net, html

为什么

```
 <a id="link" runat="server" href="javascript:downloadFile('<%#Eval("TempKey") %>')"><%#Eval("ShortFileName") %></a> 
```

在我的 asp.net 应用程序中给了我`The server tag is not well formed`例外吗？

怎么了 ？如果我删除`runat="server"`，那就没问题了。但我需要从 .

非常感谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:24:36.553

In my grid view i have used Linkbutton and applied following code on **OnClientClick**.

```
 <asp:TemplateField HeaderText="Print">
    <ItemTemplate>
     <asp:LinkButton ID="lbtn_prntmenu" runat="server" CssClass="mlinks" CommandArgument='<%#Eval("ID")%>' CommandName="Print" Text="Print" OnClientClick='<%#Eval("ID","javascript:downloadFile(\"{0}\");")%>'></asp:LinkButton>
</ItemTemplate>

</asp:TemplateField> 
```

Similarly you can do with you `<a>` element on `href`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T10:21:09.227

You get `The server tag is not well formed` error because you are using double quotes within double quotes making `attribute-name="value"` kind of syntax going hay-wire. It would be parsed by ASP.NET compiler as something like

```
href="javascript:downloadFile('<%#Eval(" TempKey ") %>')"> 
```

TempKey would appear as separate attribute with no value etc.
When you remove server tags, ASP.NET would not parse the html element syntax it but rather emit it as it is (its invalid html as well as but browsers are far more forgiving).

You should probably try it within single quotes such as

```
href='javascript:downloadFile("<%#Eval("TempKey") %>")' 
```

**EDIT** Above would still produce problematic html as there would be un-escaped double quote in href value. So try this:

```
href='javascript:downloadFile(&quot;<%#Eval("TempKey") %>&quot;)' 
```

**EDIT** It appears that data binding expression is not getting evaluated in above. Please try below expression which uses `Eval` overload for formatting

```
href='<%# Eval("TempKey", "javascript:downloadFile(&quot;{0}&quot;)") %>' 
```

**EDIT** Yet another alternative is to use some code-behind method - for example,

```
href='<%# GetFileLink(Container.DataItem) %>)' 
```

And in code-behind

```
protected string GetFileLink(object dataItem)
{
   return string.Format("javascript:downloadFile('{0}');", 
           DataBinder.Eval(dataItem, "TempKey")); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T10:41:25.410

> 怎么了 ？

ASP.NET 解析器与嵌套的双引号混淆。我只是意识到VS2012似乎不再发生这种情况了。

> 如果我删除 runat="server"，那就没问题了。但我需要从 .

如果您的 DataItem 有一个类，则可以尝试强制转换：

```
<a id="link" runat="server" href="javascript:downloadFile('<%#((YourNamespace.YourClass)Container.DataItem).TempKey%>')"><%#Eval("ShortFileName") %></a> 
```

最好的办法应该是在代码隐藏中设置 href（这是拥有 runat="server" 控件的一点）

希望这会有所帮助，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T11:03:10.263

试试下面的代码：

```
onclick='<%# "return jsPopup('UpdateProbAct.aspx?Table=problems&Deptid=" + Eval("department") %>' 
```

# css - CSS3 旋转翻转卡片 - 闪烁？

> ID：14436393
> 
> 赞同：6
> 
> 时间：2013-01-21T10:13:06.433
> 
> 标签：css, rotation, transition, flicker

请参阅此页面上的灰色框：http: [//goo.gl/fL973](http://goo.gl/fL973)

当您将其悬停时，它应该翻转并显示另一面。它可以在 Chrome 中运行，但由于某种原因，我在动画过程中会出现很多闪烁。我尝试摆弄规则，甚至在盒子周围添加一个容器，但没有成功。

我读了这个问题，除其他外：[为什么rotateY（flip）css3动画在Chrome中闪烁？](https://stackoverflow.com/questions/11296028/why-is-rotatey-flip-css3-animation-flickering-in-chrome)

问题似乎是元素`backface-visibility: hidden;`不能有背景。所以，作为一种解决方法，我认为我可以在里面有一个元素`.front`，`.back`并给那个元素一个背景。没用，还是闪退。

除此之外，我也不确定为什么它只适用于 Chrome/webkit。我确实有所有东西的必要前缀，所以它应该可以工作，不是吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T10:50:10.800

移动`backface-visibility: hidden;`到`.front`and`.back`而不是后工作正常`.card`。闪烁消失了。现在我只需要为不支持的浏览器想出一些后备方案。

# jpa - 如何在 where 子句中使用 jpa 元模型访问子属性

> ID：14436395
> 
> 赞同：0
> 
> 时间：2013-01-21T10:13:21.350
> 
> 标签：jpa, properties, criteria, metamodel

我有两个实体，它们之间有关系。

```
public class Client implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
private Integer id;

@NotNull
@Size(min = 3, max = 25)
private String firstName;

@NotNull
@Size(min = 3, max = 25)
private String lastName;

private String login;

private String password;

@OneToMany(mappedBy = "client")
private List<Project> projects;
} 
```

和

```
public class Project implements Serializable {
private static final long serialVersionUID = 4762714047114442539L;

@Id
@GeneratedValue
private Integer id;

private String name;

@Temporal(TemporalType.TIMESTAMP)
private Date startDate;

@ManyToOne
@JoinColumn
private Client client;
} 
```

我想使用 jpametamodel 和 Criteria API 进行查询。像这样：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Project> q = cb.createQuery(Project.class);
Root<Project> projects = q.from(Project.class);
q.where(cb.equal(projects.get(Project_.client), clientId)); 
```

我的问题是我不知道如何访问此字符串中客户端的“id”属性：

```
q.where(cb.equal(projects.get(Project_.client), clientId)); 
```

我想得到类似的东西

```
q.where(cb.equal(projects.get("client.id"), clientId)); 
```

但是使用 jpametamodel。有可能的？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:46:02.633

Tried something like this?

```
projects.get(Project_.client).get(Client_.id); 
```

# javascript - 如何在单击计算之前检查所有文本框是否为空

> ID：14436396
> 
> 赞同：0
> 
> 时间：2013-01-21T10:13:23.053
> 
> 标签：javascript

大家好，我是 jscipt 的新手，说实话，一般来说编程，但个人使用的学习速度很慢。我寻求有关如何将索引文件中的所有文本框（输入）放入列表容器中的指导，在单击计算按钮之前遍历它们以检查它们是否为空。如果它们是空的，则通知用户哪个是空的。此外，是否有办法阻止用户仅在文本框和数字中输入文本。背景：我创建了一个表单，要求所有字段都填充数字（以小时为单位），然后将从这些值生成图表。我将文件放在 Skydrive 中供人们使用下面的链接下载。

[索引文件](http://sdrv.ms/Vj56Et)

我确实尝试了以下方法，但这会提醒我无论 texbox 是否填充天气。

```
function checkInputsGenerateGraph()
{
if( $('#hutz-hoursInput').val() == ""||$('#hutz-weeksPerYearInput').val() ==      ""||$('#hutz-jobsPerWeekInput').val() == ""||$('#hutz-hourlyMachineRateInput').val() == ""||$('#hutz-maintneneceDowntimeInput').val() == ""||$('#hutz-scrapRateInput').val() == ""||$('#hutz-toolsPerJobInput').val() == ""||$('#hutz-timeToLoadToolInput').val() == ""||$('#hutz-timeToSetPartsInput').val() == "")
{
alert('One them is empty!!');
}
else
{
$("#hutz-graph").slideDown();  
                    $("#hutz-lblImproveMyProcess").slideUp();
                    $("#hutz-hoursInput").slideUp();
                    $("#hutz-weeksPerYearInput").slideUp();
                    $("#hutz-jobsPerWeekInput").slideUp();
                    $("#hutz-ourlyMachineRateInput").slideUp();
                    $("#hutz-ntneneceDowntimeInput").slideUp();
                    $("#hutz-scrapRateInput").slideUp();
                    $("#hutz-toolsPerJobInput").slideUp();
                    $("#hutz-timeToLoadToolInput").slideUp();
                    $("#hutz-timeToSetPartsInput").slideUp();
                    $("#hutz-lblMachineDetails").slideUp();
                    $("#hutz-lblPartSetting").slideUp();
                       $("#hutzcurrencyPreferenceInput").slideUp();
                    createChart();                      
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:21:07.390

首先，给所有必需的元素一个公共类，例如，我们称之为`required`：

```
<input type="text" class="required" id="hutz-hoursInput" /> 
```

然后，当你的`checkInputsGenerateGraph()`函数被调用时，你可以遍历`required`元素并检查它们：

```
$('.required').each(function() {
  if (this.value.length == 0) {
    alert(this.id + ' is empty!');
  } 
}); 
```

您还可以执行以下操作以从输入中删除所有非数字：

```
$('.required').change(function() {
  this.value = this.value.replace(/[^\d]+/, '');
}); 
```

**[看到它在行动](http://jsfiddle.net/GkF4h/9/)**

希望这会为您指明正确的方向！

**编辑**

这是一个完整的例子：-

```
function checkInputsGenerateGraph() {

  var isValid = true;

  $('.example').each(function() {
    if (this.value.length == 0) {
      alert(this.id + ' is empty!');
      isValid = false; 
    } 
  });

  if (isValid) {
    alert('do calculations!');   
  }
} 
```

因此，首先遍历所有元素，并确保它们都被填充。如果不是，则设置`isValid`为 false，这样一旦循环完成，就不会执行计算。

# php - 检查postgresql中的主键？

> ID：14436403
> 
> 赞同：0
> 
> 时间：2013-01-21T10:13:36.030
> 
> 标签：php, postgresql

我有 10 个数据库表，每个表都有不同名称的主键

现在我想在 PHP 中编写一个函数来根据主键检索所有数据

IE

```
function getdatabyid("table_name",primary_key_value) 
```

我想以这样的方式构建一个查询，当我将这两个变量发送到函数时，它应该检查它在该表中的主键并返回数据。

可以提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:31:30.687

```
function getdatabyid($table,$pk) {

   $result = pg_query("SHOW COLUMNS FROM ". $table);
      if (pg_num_rows($result) > 0) {
         while ($row = pg_fetch_assoc($result)) {
             $result = pg_query("SELECT * FROM ". $table ." WHERE ". $row['Field'] ." = ". $pk ." LIMIT 1"); 

             if(pg_num_rows($result) > 0) {
                return $result;
             }
             else return false;
         }
      }
      else die('Incorrect table name.');
   }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:25:58.980

这是获取主键列名的查询：

```
SELECT cu.CONSTRAINT_NAME, cu.COLUMN_NAME 
FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE cu 
WHERE EXISTS ( SELECT tc.* FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc 
   WHERE tc.TABLE_SCHEMA = 'YOUR_TABLE_SCHEMA' 
   AND tc.TABLE_NAME = 'YOUR_TABLE_NAME' 
   and TC.CONSTRAINT_TYPE='PRIMARY KEY'
   AND tc.CONSTRAINT_NAME = cu.CONSTRAINT_NAME 
) 
```

然后执行另一个查询以获得实际结果。这仍然非常低效 - 您最好将主键名称作为参数。

# php - Jquery：创建一个字典来自动完成所有输入

> ID：14436404
> 
> 赞同：0
> 
> 时间：2013-01-21T10:13:36.010
> 
> 标签：php, javascript, jquery, jquery-ui, jquery-autocomplete

我想在我的项目中添加一个智能自动完成功能，当用户在任何输入中键入一个单词时，它会从他自己的字典中自动完成。

他的所有者字典是通过保存他曾经提交到服务器的每个单词来构建的，例如 (array_values($_POST))

我现在的 JS

```
$('input.complete').live('keyup.autocomplete', function(){
        var hi=$(this).val().toUpperCase();
        var was=this;
        $(this).autocomplete({
//PROBLEM Should i consider to change source from ajax/mysql to different source ?
//since there gona be too many requests ??
            source: function(request, response) {
                    $.ajax({ url: '<?=base_url()?>ajax/ac',
//PROBLEM how can i set term=word currently being edited..(start=' ',end=pointerpos)
                    data: { 'term': this.term },
                    dataType: "json",
                    type: "POST",
                    success: function(data){
                        if(data.length){
                            //response(data);
          //Commented out cause i dont wana display dropdown.. just typeahead.
                              if(data[0]['value'].substr(0,hi.length).toUpperCase()==hi){
                                $(was).val(data[0]['value']);
//currently working with single word inputs..once i get how to select only current word will edit these..
                                was.selectionStart=hi.length;
                                was.selectionEnd=data[0]['value'].length;   
                            }
                        }
                    }
                });
            },
            select: function(event, ui){},
            minLength: 2,
            delay: 500
        }); 
```

如您所见，我有两个问题

**问题**

1.  如何选择用户正在输入的当前单词？
2.  这是实现我的目标的好方法，还是我应该考虑不同的插件

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T11:16:10.090

您也在使用 PHP 语言。所以在我看来，您可以使用 PHP 更轻松地解决您的问题。假设您在 get.php 文件中有 php 函数 get_word($excerpt) 。所以，

```
<?php
     get_word($_POST['excerpt']);
     function get_word($excerpt) {
          // Find exact word from database or array using given $excerpt
          // and return complete word.
          return $complete_word;
     }
?> 
```

在您的 jquery 中（假设输入字段为 .input），

```
$(document).ready(function() {
     $('.input').live('keyup',function() {
          var excerpt = $(this).val();
          $.post("get.php", {excerpt:excerpt}, function(data) {
               // do anything with data.
               $('.input').val(data);
          });
     });
}) 
```

更准确地说，您可以从 get.php 文件中获取一堆匹配的单词，并显示要选择的单词列表。

# c# - 如何使用 XPath 查询获取日期范围内的数据

> ID：14436405
> 
> 赞同：-1
> 
> 时间：2013-01-21T10:13:39.757
> 
> 标签：c#, xml, xpath

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<AppXmlLogWritter>    
  <LogData>
    <LogID>5678201301211226306349434819061642515658</LogID>
    <LogDateTime>**20130121**122630</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>PMLogFlag</LogFlag>
    <LogApplication>PMLogApplication</LogApplication>
    <LogModule>PMLogModule</LogModule>
    <LogLocation>PMLogLocation</LogLocation>
    <LogText>PMLogText</LogText>
  </LogData>
  <LogData>
    <LogID>5678201301211226306349434819063542617610</LogID>
    <LogDateTime>**20130121**122630</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>PMLogFlag</LogFlag>
    <LogApplication>PMLogApplication</LogApplication>
    <LogModule>PMLogModule</LogModule>
    <LogLocation>PMLogLocation</LogLocation>
    <LogText>PMLogText</LogText>
  </LogData>
  <LogData>
    <LogID>5678201301211226306349434819065542731198</LogID>
    <LogDateTime>**20130121**122630</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>PMLogFlag</LogFlag>
    <LogApplication>PMLogApplication</LogApplication>
    <LogModule>PMLogModule</LogModule>
    <LogLocation>PMLogLocation</LogLocation>
    <LogText>PMLogText</LogText>
  </LogData>
  <LogData>
    <LogID>5678201301211226306349434819067442849561</LogID>
    <LogDateTime>**20130117**122630</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>PMLogFlag</LogFlag>
    <LogApplication>PMLogApplication</LogApplication>
    <LogModule>PMLogModule</LogModule>
    <LogLocation>PMLogLocation</LogLocation>
    <LogText>PMLogText</LogText>
  </LogData>
</AppXmlLogWritter> 
```

从上面的 XmL 文件中，我想读取范围之间的 xml 文档。这样，当我从 FROM DATE 和 TO DATE 选择日期时，我使用 datetimepicker 控件为 From Date 和 To Date 实现 Windows 表单，并从 TO DATE 将日期显示到列表视图中，为此我写了这两个不同的日期代码为

```
private void btnSubmit_Click(object sender, EventArgs e)
        { 
 XmlElement objXmlRoot = objXmldoc.DocumentElement;
if (chkBoxFromDate.Checked && chkBoxToDate.Checked)
            {
                strXpathQuery = "/AppXmlLogWritter/LogData[LogDateTime >='" +  dateTimePickerFromDate.Value.ToString("yyyyMMdd") + "' and LogDateTime <='" + dateTimePickerToDate.Value.ToString("yyyyMMdd") + "']";
}
} 
```

我使用此查询来显示数据，但它向我显示空白数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:05:33.237

我有一种似曾相识的感觉。我不是刚[给你回答了这个问题](https://stackoverflow.com/a/14436034/1945651)吗？

```
strXpathQuery = "/AppXmlLogWritter/LogData[substring(LogDateTime, 1, 8) > " + 
    dateTimePickerFromDate.Value.ToString("yyyyMMdd") + 
    " and substring(LogDateTime, 1, 8) <= " + 
    dateTimePickerToDate.Value.ToString("yyyyMMdd") + "]"; 
```

或者格式更好一点

```
strXpathQuery = 
   string.Format("/AppXmlLogWritter/LogData[substring(LogDateTime, 1, 8) > {0:yyyyMMdd} and substring(LogDateTime, 1, 8) <= {1:yyyyMMdd}]", 
   dateTimePickerFromDate.Value, dateTimePickerToDate.Value); 
```

# performance - Visual Studio 测试项目中的思考时间

> ID：14436407
> 
> 赞同：0
> 
> 时间：2013-01-21T10:13:51.317
> 
> 标签：performance, webtest

我们有如下要求：

我们需要测试单个页面 aspx web 应用程序的 N 用户负载。如果有 100 个加载用户，我们不希望 100 个用户同时访问网站。

我已经使用 Think Time 60sec 设置了 Web 性能测试项目。但是，当我将其作为负载测试运行时，每秒的请求数超过 7。任何人都可以帮助设置正确的方法，以使 100 个并发用户不会随机访问网站吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:02:02.663

请考虑使用“用户步调”测试组合。单个用户应该访问该页面多少次？在测试组合上设置值，并在场景属性窗口中将“Apply Distribution to Pacing Delay”设置为 true。

塔尔

# matlab - 使用 MATLAB 从列向量中取中位数

> ID：14436409
> 
> 赞同：0
> 
> 时间：2013-01-21T10:13:59.520
> 
> 标签：matlab

我有两个列向量。

第一个列向量有几千个数据点长，我需要从前四十个项目中取中位数，然后从下一个四十个项目中取中位数，以此类推。

第二个列向量包含一个组 ID（从 1 到 3）。

我的目标是最终得到一堆中位数计算，并按组对它们进行排序。我非常不确定如何在 MATLAB 中解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:17:09.547

`reshape`你的向量成一个 40xN 矩阵，然后`median`用来取每一列的中位数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T11:07:06.543

这里有一些代码可以帮助您入门。

如果您将两个向量都放在一个命名变量中，并且列数可以被 40 整除，请执行以下操作：

```
% column 1 = data, column 2 = groupID
test = rand(400,2);

% compute medians of data
medians = median( reshape(test(:,1), 40,[]) );

% make each entry correspond to the correct groupID
medians = repmat(medians, 40,1);
medians = medians(:); 
```

如果您的数据不能被 40 整除，请使用一个简单的循环：

```
N = 40;

test = rand(10*N+4,2);

n = 1;
medians = zeros( ceil(size(test,1)/N), 1 );
for ii = 1:numel(medians)
    if n+N-1 > size(test,1)
        medians(ii) = median(test(n:end,1));
    else
        medians(ii) = median(test(n:n+N-1,1));
    end
    n = n+N;
end 
```

并在必要时像以前一样复制。

`groupID`如果您有一个单独的变量，或者如何根据 对这些内容进行排序，则调整此代码`groupID`非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:03:21.027

获取组相当容易：

```
groupIDvec = groupID(1:40:end);% A vector with group numbers 
```

可以通过使用@Oli 描述的方法找到每组的中位数`reshape`

```
medianmat = reshape(datavector,40,[]); 
medianvec = median(medianmat); 
```

现在你只需要对它们进行排序：

```
[groupIdvec,idx] = sort(groupIDvec) 
```

这是您的排序结果，其中 groupIDvec 指示每个值在哪个组中：

```
result = medianvec(idx); 
```

我手头没有 Matlab，所以它可能包含错误，但应该没问题。

# javascript - JavaScript中带有方括号表示法的嵌套对象

> ID：14436418
> 
> 赞同：1
> 
> 时间：2013-01-21T10:15:03.363
> 
> 标签：javascript

我正在努力实现以下目标：

```
this.inputs[options.el.find('form').attr('class')] = {};

this.inputs[options.el.find('form').attr('class')][options.elements[x].selector] = false; 
```

但是，如果没有语法错误，我将无法执行上述操作！

有什么想法可以实现这个对象结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:19:29.870

这种语法看起来是合法的，但是这些长的单行代码并没有给任何人带来任何好处。把它拆开一点，这样你就可以找到它失败的地方。

```
var className = options.el.find('form').attr('class');
var selector = options.elements[x].selector;

this.inputs[className] = {};
this.inputs[className][selector] = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:39:03.987

对象的索引应该始终是一个字符串：

```
var obj = {
  a: 2;
}

obj.a = 3; //a is 3 now
obj['a'] = 4;//a is 4 now 
```

你说`options.elements[x].selector`的是`input[name="username"]`所以我猜在这一行：

```
this.inputs[options.el.find('form').attr('class')][options.elements[x].selector] = false; 
```

你真正想做的是：

```
this.inputs[options.el.find('form').attr('class')]['username'] = false; 
```

所以你可以这样做：

```
var sel = options.elements[x].selector;
console.log( 'sel is ' + sel );
this.inputs[options.el.find('form').attr('class')][sel] = false; 
```

确保 sel 是一个字符串。你可能想试试

```
var sel = options.elements[x].selector.value; 
```

该`.value`位从输入元素内部检索文本。

# git - Git 未出现在 NetBeans 上下文菜单中

> ID：14436420
> 
> 赞同：2
> 
> 时间：2013-01-21T10:15:13.270
> 
> 标签：git, svn, netbeans

我正在处理一个使用 Git 管理的 NetBeans 项目。我们使用的其中一个包是在另一个使用 SVN 的项目中创建的，因此在包含源代码的文件夹中有一个隐藏的 .svn 目录。

问题是，与其他包不同，Git 子菜单不会出现在此包的上下文菜单中。即使我删除了 .svn 文件夹，也会出现一个 Subversion 子菜单。此外，如果我重新启动 NetBeans，.svn 文件夹会再次出现。

每当我用 Git 做一些动作时，这个包都会被忽略。我如何告诉 NetBeans 这个包也是一个 Git 文件夹？我什至无法从控制台上演它。这也被忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:39:04.947

一种可以解释为什么即使在删除 .svn 之后仍然存在 SVN 菜单的可能性是缓存：

```
~/.netbeans/6.8/var/cache/svncache 
```

该缓存已在诸如[bug 153072 之](https://netbeans.org/bugzilla/show_bug.cgi?id=153072)类的几个错误中提及。

# java - 如何知道项目是使用 Eclipse 或 NetBeans 创建的

> ID：14436422
> 
> 赞同：4
> 
> 时间：2013-01-21T10:15:22.160
> 
> 标签：java, eclipse, netbeans

我有 java 应用程序源，但我不知道使用哪个 IDE 来创建它。我想用尽可能少的设置更改来构建这个项目。如何知道这个项目是使用 Eclipse 还是 NetBeans 构建的？

upd：根目录中有两个xml文件，分别称为`app-checks.xml`（该文件包含对Eclipse插件和Puppy Crawl的引用）和`pom.xml`（该文件包含对maven的引用）。整个项目中没有`.nbproject`或`.classpath/.project`文件。

哪个IDE最好用来打开这个项目？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T10:17:17.513

如果您在项目目录中看到一些文件，如 .classpath、.project，那么它可能是使用 Eclipse 创建的。如果它是使用 NetBeans 创建的，您会发现一些名为 .nbproject 的文件。

至于哪个 IDE 最好的新问题，围绕哪个 IDE 最好有很多争论。我更喜欢 Eclipse，其他人更喜欢 IntelliJ IDEA，其他人更喜欢 NetBeans 或其他人。他们都知道要打开一个基于 Maven 的项目。例如，我使用 m2eclipse 插件来导入 Eclipse 工作区。

# sql - 将 current_date 转换为相对日期和静态时间

> ID：14436424
> 
> 赞同：2
> 
> 时间：2013-01-21T10:15:23.140
> 
> 标签：sql, oracle, datetime

是否可以在 SQL 中放置相对/静态日期和时间？

我想得到昨天和前天的结果。

所以让我们说（current_date-2 06:00:00）和（current_date-1 06:00:00）之间的日期。从 24 小时范围内获取结果，但具有特定时间。由于我将它用于 BI 工具，因此只能接受普通 SQL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T10:27:51.413

您可以使用

```
between  trunc(sysdate) - 2 + 6/24  and trunc(sysdate) - 1 + 6/24 
```

6/24 意味着六个小时，因为在 Oracle 1 中是一天。

# android - android 2.3 以上的 JSON 问题（姜饼）

> ID：14436428
> 
> 赞同：2
> 
> 时间：2013-01-21T10:15:29.930
> 
> 标签：android, json, android-asynctask

我在android中有关于json的问题我目前有2个类的以下代码，它们是用于登录功能的JSONParser.java和Tab1.java。这将在 android 2.3.3 及更低版本中像魅力一样工作，但如果高于它则不起作用。(honeycomb, ICS, JB) 我在谷歌上搜索过这个问题，发现它与 asynctask 有关，但我仍然不明白如何在我的代码中实现它。很抱歉问新手问题，感谢您的帮助，谢谢。

```
JSONParser.java

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject AmbilJson(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

这是登录类

```
Tab1.java

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Tab1 extends Activity {
    String var_usr,var_pass;
    EditText usr, psw;
    JSONArray str_login = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.panel_login);

        usr = (EditText) findViewById(R.id.txt_username);
        psw = (EditText) findViewById(R.id.txt_pass);

        Button submit = (Button) findViewById(R.id.btn_login);
        submit.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                var_usr = usr.getText().toString();
                var_pass = psw.getText().toString();
                String stts = "";
                String kode = "";
                String link_url = "http://10.0.2.2/gollege/login.php?usr="+var_usr+"&psw="+var_pass;
                com.bucheuw.gollege.portal.JSONParser jParser = new com.bucheuw.gollege.portal.JSONParser();
                JSONObject json = jParser.AmbilJson(link_url);

                try {
                    str_login = json.getJSONArray("statuslogin");

                    for(int i = 0; i < str_login.length(); i++){
                        JSONObject ar = str_login.getJSONObject(i);
                        TextView st = (TextView) findViewById(R.id.txt_alert);
                        String alrt = ar.getString("hasil");
                        stts = ar.getString("st");
                        kode = ar.getString("id");
                        st.setText(alrt);
                        usr.setText("");
                        psw.setText("");

                        if(stts.trim().equals("ok"))
                        {
                            Intent ni = null;                           
                            ni = new Intent(Tab1.this, com.bucheuw.gollege.portal.DashboardActivity.class);
                            Bundle b = new Bundle();
                            b.putString("par_kode", kode);
                            ni.putExtras(b);
                            startActivity(ni);
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

logcat 错误行

```
01-21 18:25:57.016: E/AndroidRuntime(533): FATAL EXCEPTION: main
01-21 18:25:57.016: E/AndroidRuntime(533): android.os.NetworkOnMainThreadException
01-21 18:25:57.016: E/AndroidRuntime(533):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
01-21 18:25:57.016: E/AndroidRuntime(533):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
01-21 18:25:57.016: E/AndroidRuntime(533):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
01-21 18:25:57.016: E/AndroidRuntime(533):  at libcore.io.IoBridge.connect(IoBridge.java:112)
01-21 18:25:57.016: E/AndroidRuntime(533):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-21 18:25:57.016: E/AndroidRuntime(533):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
01-21 18:25:57.016: E/AndroidRuntime(533):  at java.net.Socket.connect(Socket.java:842)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-21 18:25:57.016: E/AndroidRuntime(533):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-21 18:25:57.016: E/AndroidRuntime(533):  at com.bucheuw.gollege.portal.JSONParser.AmbilJson(JSONParser.java:38)
01-21 18:25:57.016: E/AndroidRuntime(533):  at com.bucheuw.gollege.Tab1$1.onClick(Tab1.java:51)
01-21 18:25:57.016: E/AndroidRuntime(533):  at android.view.View.performClick(View.java:3511)
01-21 18:25:57.016: E/AndroidRuntime(533):  at android.view.View$PerformClick.run(View.java:14105)
01-21 18:25:57.016: E/AndroidRuntime(533):  at android.os.Handler.handleCallback(Handler.java:605)
01-21 18:25:57.016: E/AndroidRuntime(533):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-21 18:25:57.016: E/AndroidRuntime(533):  at android.os.Looper.loop(Looper.java:137)
01-21 18:25:57.016: E/AndroidRuntime(533):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-21 18:25:57.016: E/AndroidRuntime(533):  at java.lang.reflect.Method.invokeNative(Native Method)
01-21 18:25:57.016: E/AndroidRuntime(533):  at java.lang.reflect.Method.invoke(Method.java:511)
01-21 18:25:57.016: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-21 18:25:57.016: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-21 18:25:57.016: E/AndroidRuntime(533):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:20:08.583

那是因为在以后的版本中，您无法在主线程中进行网络连接..
要使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)..

私有类 MyTask 扩展 AsyncTask {

```
 private Context context;

   public MyTask(Context context) {
     this.context = context;
   }

   protected void onPreExecute() {
      progressDialog = ProgressDialog.show(context, "", "msg", true); 
   }

  protected Long doInBackground(URL... urls) {
       //add here your json part
  }

 protected void onPostExecute(Long result) {
     progressDialog.dismiss();

     Intent ni = null;                           
                        ni = new Intent(Tab1.this, com.bucheuw.gollege.portal.DashboardActivity.class);
                        Bundle b = new Bundle();
                        b.putString("par_kode", kode);
                        ni.putExtras(b);
                        startActivity(ni);  
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:20:17.257

您可能面临的问题是由于`NetworkOnMainThreadException`.

从 ICS 及以上版本 Android 将不允许在 UI 线程中进行任何网络操作。它应该在单独的线程中完成，这样它就不会挂起 UI。在单独的线程中尝试您的网络通信代码。

# php - PHP向MySQL添加空行

> ID：14436430
> 
> 赞同：0
> 
> 时间：2013-01-21T10:15:36.093
> 
> 标签：php

我有一个将发布到 PHP 的 textarea。

在 PHP 脚本中，我将通过换行符来展开 textarea。

然后，我将创建一个循环来迭代数组以检查该值是否已存在于 MySQL 中。如果它已经存在，那么我将继续，否则我将进行插入。

这就是我的代码的样子：

```
$route = $_POST['gatewayvalue'];
$account_number = $_POST['account_number'];
$route = strtoupper($route);

$routelist = explode("\n", $route);
$count = count($routelist);
$invalid = 0;

for($i=0;$i<$count;$i++){
if(preg_match("/000F26/i", $routelist[$i])){
    $routeinsert = str_replace("000F26", "", $routelist[$i]);

    $verify = "SELECT route FROM gw_gateway WHERE route='$routeinsert'";
    $result = mysql_query($verify);
    $row = mysql_fetch_array($result);
    $checkroute = $row['route'];
    if($checkroute == $routeinsert){
        $validate = false;

        $invalid++;

        continue;
    }
    else{
        $validate = true;
    }
}
else{
    $routeinsert = $routelist[$i];

    $verify = "SELECT route FROM gw_gateway WHERE route='$routeinsert'";
    $result = mysql_query($verify);
    $row = mysql_fetch_array($result);
    $checkroute = $row['route'];
    if($checkroute == $routeinsert){
        $validate = false;

        $invalid++;

        continue;
    }
    else{
        $validate = true;
    }
}

if($validate == true){
    $updateroutesql = "INSERT INTO gw_gateway SET route='$routeinsert', gw_reseller1='$account_number'";
    $updateroutesqlres=mysql_query($updateroutesql) or die("Can not perform update query !".mysql_error());
}
} 
```

但是，当我在 textarea 中插入 2 个相似的值时，例如 030301 两次。第一个值将被拒绝，但第二个值将作为空值插入。

我的表有 3 个字段。

```
+----------------+-------------+------+-----+---------+-------+
| Field          | Type        | Null | Key | Default | Extra |
+----------------+-------------+------+-----+---------+-------+
| route          | varchar(20) | NO   | PRI |         |       |
| account_number | varchar(20) | YES  |     | NULL    |       |
| gw_reseller1   | varchar(45) | YES  |     | NULL    |       |
+----------------+-------------+------+-----+---------+-------+ 
```

这就是我尝试插入 2 个相似值时发生的情况

```
+----------+----------------+--------------+
| route    | account_number | gw_reseller1 |
+----------+----------------+--------------+
| 030302   | NULL           | NULL         |
| NULL     | 201-000001     |              |
| 030301   | NULL           | 201-000001   |
+----------+----------------+--------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:56:11.980

由于第二次插入相同值时的主键字段，它已被拒绝，因为它已经插入过一次。

尝试使用两个不同的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:20:08.227

试试这个，这是在数据库中插入数据的正确方法：

```
$updateroutesql = "INSERT INTO gw_gateway (route,gw_reseller1) VALUES('".$routeinsert".','".$account_number."'"; 
```

但首先，转义你的字符串（出于安全措施），如下所示：

```
$routeinsert = mysql_real_escape_string($routeinsert);
$account_number = mysql_real_escape_string($account_number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:27:06.473

首先，尝试缩短您的代码。您有两次相同的代码部分，这是无用的......然后，清理您的输入。最后，继续使用`PDO`或至少使用现在已弃用的`mysqli_*`功能。`mysql_*`

新代码：

```
$route = strtoupper($_POST['gatewayvalue']);
$account_number = mysql_real_escape_string($_POST['account_number']);

$routelist = explode("\n", $route);
$count = count($routelist);
$invalid = 0;

for($i=0; $i < $count; $i++) {
    if(preg_match("/000F26/i", $routelist[$i])){
        $routeinsert = str_replace("000F26", "", $routelist[$i]);
    } else {
        $routeinsert = $routelist[$i];
    }

    $verify = mysql_query("SELECT 1 FROM gw_gateway WHERE route='" . mysql_real_escape_string($routeinsert) . "' LIMIT 1");
    if(mysql_num_rows($verify) || !trim($routeinsert)) { // if the route is present in DB mysql_num_rows will return 1 row, or when $routeinsert is an empty string - continue...
        $invalid++;

        continue;
    } else {
        $updateroutesql = "INSERT INTO gw_gateway SET route='" . mysql_real_escape_string($routeinsert) . "', gw_reseller1='$account_number'";
        $updateroutesqlres=mysql_query($updateroutesql) or die("Can not perform update query !".mysql_error());
    }

} 
```

试试这个编辑过的代码 - 应该没问题。如果仍然有一些值插入为 null 或空，则表示您在 textarea 中键入了一个空行，并且您还应该在插入时检查路由是否为空...

# windows - 从 silverlight 浏览器启动桌面应用程序

> ID：14436437
> 
> 赞同：0
> 
> 时间：2013-01-21T10:16:02.203
> 
> 标签：windows, silverlight-4.0

我使用silverlight 4.0 开发了一个Web 应用程序。现在的要求是从 silverlight 浏览器（主要是 IE）启动桌面应用程序（可以是第三方或任何平台）。进一步，我计划在它们之间建立一个通信（TCP/MSMQ）通道进行通信。桌面应用程序可能安装在客户端，也可能不安装。

那么有可能做到这一点吗？

提前致谢.... 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:59:29.970

我很确定，您的应用程序将是 OOB。如果不是，那你就不走运了。如果您将其构建为 OOB，请查看[http://www.codeproject.com/Tips/107947/How-to-launch-external-application-or-file-from-Si](http://www.codeproject.com/Tips/107947/How-to-launch-external-application-or-file-from-Si)这应该会给您一个很好的开始介绍如何启动外部应用程序。以下链接应该为您提供如何进行进程间通信。[http://www.codeproject.com/Articles/93246/Silverlight-Interprocess-Communication-from-Silver](http://www.codeproject.com/Articles/93246/Silverlight-Interprocess-Communication-from-Silver)

# azure - 将更改注入 Azure 包

> ID：14436438
> 
> 赞同：2
> 
> 时间：2013-01-21T10:16:10.203
> 
> 标签：azure, msbuild

目前，我们每次部署到 Windows Azure 时都会构建该软件。我们为每位客户部署相同的软件版本。唯一的区别是一些配置文件，例如不同的数据库连接字符串。

是否可以使用每个部署都相同的预构建 Windows Azure 包，并以某种方式注入配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:23:31.457

看看使用[CloudConfigurationManager](http://msdn.microsoft.com/en-us/LIBRARY/microsoft.windowsazure.cloudconfigurationmanager)类

> CloudConfigurationManager.GetSetting(key);

基本上，它首先在 Azure 服务配置中查找，然后在 web.config 中查找（如果在 Azure 配置文件中未指定）。您可以将同一个站点部署到不同的云服务，只需要更改 Azure 配置。您也可以更改它而无需重新部署

看到这个问题

[Azure 配置设置和 Microsoft.WindowsAzure.CloudConfigurationManager](https://stackoverflow.com/questions/11548301/azure-configuration-settings-and-microsoft-windowsazure-cloudconfigurationmanage)

# php - 如何对 html 和 php 设置字数限制

> ID：14436444
> 
> 赞同：-6
> 
> 时间：2013-01-21T10:16:33.627
> 
> 标签：php, html

我试图对链接到 twitter 的文本字段帖子进行字数限制，但是 twitter 有 140 个字的字符限制，因此无法在线发布。有谁知道如何为 html 和 php 编写代码来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:22:48.083

Simple examle:

```
 $input = $_POST['field'];

    if(strlen($input)> 140)
    {
    // Error or substr()
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:28:16.883

尝试这个。

```
function LimitCharacter($data,$limit = 20)
{
    if (strlen($data) > $limit)
    {
        return false;
    }
    else
    {
        return true;
    }
}
```

# java - 使用 Apache commons-io IOUtils.closeQuietly 安全吗？

> ID：14436453
> 
> 赞同：38
> 
> 时间：2013-01-21T10:17:10.337
> 
> 标签：java, apache-commons, apache-commons-io

这是代码吗

```
 BufferedWriter bw = new BufferedWriter(new FileWriter("test.txt"));
    try {
        bw.write("test");
    } finally {
        IOUtils.closeQuietly(bw);
    } 
```

安全与否？据我了解，当我们关闭 BufferedWriter 时，它会将其缓冲区刷新到底层流，并且可能由于错误而失败。但是 IOUtils.closeQuietly API 说任何异常都会被忽略。

由于 IOUtils.closeQuietly，数据丢失是否可能会被忽视？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-21T10:57:53.100

关于 javadoc 的代码应如下所示`closeQuietly()`：

```
BufferedWriter bw = null;

try {
    bw = new BufferedWriter(new FileWriter("test.txt"));
    bw.write("test");
    bw.flush(); // you can omit this if you don't care about errors while flushing
    bw.close(); // you can omit this if you don't care about errors while closing
} catch (IOException e) {
    // error handling (e.g. on flushing)
} finally {
    IOUtils.closeQuietly(bw);
} 
```

`closeQuietly()`不打算用于一般用途，而不是`close()`直接调用 Closable。它的预期用例是确保在 finally 块内关闭 - 您需要在此之前完成所有错误处理。

这意味着，如果您想在调用过程中对异常做出反应，`close()`或者`flush()`您必须以正常方式处理它。添加`closeQuietly()`你的finally块只是确保关闭，例如当刷新失败并且在try块中没有调用close时。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T10:46:24.177

只要您的应用程序不关心写入是否成功且没有错误，它就是安全的。如果您的应用程序需要处理写入错误，这是不安全的，因为[在关闭时刷新的缓冲数据](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html#close%28%29)可能会丢失并且错误会被吞没。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-13T08:42:46.823

是的，使用它是安全的，但仅适用于**Java6**及更低版本。从**Java7 开始**，您应该使用[try-with-resource](http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html)。

它将消除您拥有的大部分样板代码以及使用`IOUtils.closeQuietly`.

现在，你举个例子：

```
 BufferedWriter bw = new BufferedWriter(new FileWriter("test.txt"));
    try {
        bw.write("test");
    } finally {
        IOUtils.closeQuietly(bw);
    } 
```

可以写成：

```
 try (BufferedWriter bw = new BufferedWriter(new FileWriter("test.txt"))) {
       bw.write("test");
   } 
```

需要注意的是，为了使用 try-with-resource 方法，您的资源需要实现 Java 7 中引入的名为 java.lang.AutoCloseable 的新接口。

此外，您可以在 try-with-resource 块中包含许多资源，只需将它们用`;`

```
 try (
       BufferedWriter bw1 = new BufferedWriter(new FileWriter("test1.txt"));
       BufferedWriter bw2 = new BufferedWriter(new FileWriter("test2.txt"))
   ) {
       // Do something useful with those 2 buffers!
   }   // bw1 and bw2 will be closed in any case 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-21T10:22:22.500

这在理论上是可能的，但我不能说我见过 close() 失败。通常fail fast意味着之前的IO操作比如打开文件会先失败。您可以编写一个不忽略 IOExceptions 的关闭，但如果它是 try/catch 块中的某些内容失败，这可能会破坏异常的真正原因。

你想要的是类似以下的东西（在大多数情况下这是矫枉过正的）

```
try {
    // write to bw.
    bw.close(); // throw IOException if an error occurs.

} finally {
    // don't clobber a previous IOException
    IOUtils.closeQuietly(bw);
} 
```

# r - 如何按组计算从开始日期经过的天数？

> ID：14436454
> 
> 赞同：5
> 
> 时间：2013-01-21T10:17:12.760
> 
> 标签：r, aggregate

我需要离开这个

```
 id  |    date
-----------------
  A  | 2000-01-13
  A  | 2000-01-18
  A  | 2000-01-25
  B  | 2012-10-10
  B  | 2012-10-11
  C  | 2005-07-25
  C  | 2005-07-31 
```

对此

```
 id  |    date     | days from start
---------------------------
  A  | 2000-01-13  |  0
  A  | 2000-01-18  |  5
  A  | 2000-01-25  |  12
  A  | 2000-02-08  |  26
  B  | 2012-10-10  |  0
  B  | 2012-10-11  |  1
  C  | 2005-07-25  |  0
  C  | 2005-07-31  |  6 
```

即创建一个变量，该变量保存自第一个日期以来经过的天数，按 id 分组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T10:30:34.487

使用`data.table`：（我假设`date`这里的列是字符。如果它的`date`格式，那么你可以删除`as.Date(.)`函数调用。

```
df <- structure(list(id = c("A", "A", "A", "B", "B", "C", "C"), 
             date = c("2000-01-13", "2000-01-18", "2000-01-25", "2012-10-10", 
                    "2012-10-11", "2005-07-25", "2005-07-31")), 
             .Names = c("id", "date"), row.names = c(NA, -7L), 
             class = "data.frame")
require(data.table)
dt <- data.table(df, key="id")
dt[, days_from_start := cumsum(c(0, diff(as.Date(date)))),by=id]

#    id       date days_from_start
# 1:  A 2000-01-13               0
# 2:  A 2000-01-18               5
# 3:  A 2000-01-25              12
# 4:  B 2012-10-10               0
# 5:  B 2012-10-11               1
# 6:  C 2005-07-25               0
# 7:  C 2005-07-31               6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T10:33:14.370

您还可以使用函数`difftime`和的组合`split`：

```
dat
  id       date
1  A 2000-01-13
2  A 2000-01-18
3  A 2000-01-25
4  B 2012-10-10
5  B 2012-10-11
6  C 2005-07-25
7  C 2005-07-31

dat$date <- as.POSIXct(dat$date)
dat$"Days spent" <- unlist(lapply(split(dat,f=dat$id),
                         function(x){as.numeric(difftime(x$date,x$date[1], units="days"))}))
dat
  id       date Days spent
1  A 2000-01-13          0
2  A 2000-01-18          5
3  A 2000-01-25         12
4  B 2012-10-10          0
5  B 2012-10-11          1
6  C 2005-07-25          0
7  C 2005-07-31          6 
```

按照@agstudy 和@Arun 的建议，这可以简化如下：

```
dat$"Days spent" <- unlist(by(dat, dat$id, 
                           function(x)difftime(x$date,x$date[1], units= "days"))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:03:17.987

其他两种方法：`ave`并使用`plyr`库：

```
df <-
structure(list(id = c("A", "A", "A", "B", "B", "C", "C"), date = structure(c(10969, 
10974, 10981, 15623, 15624, 12989, 12995), class = "Date")), .Names = c("id", 
"date"), row.names = c(NA, -7L), class = "data.frame") 
```

使用`ave`，日期必须更改为数字

```
df$days_from_start <- ave(as.numeric(df$date), df$id, FUN = function(x) x-min(x)) 
```

这使

```
> df
  id       date days_from_start
1  A 2000-01-13               0
2  A 2000-01-18               5
3  A 2000-01-25              12
4  B 2012-10-10               0
5  B 2012-10-11               1
6  C 2005-07-25               0
7  C 2005-07-31               6
> str(df)
'data.frame':   7 obs. of  3 variables:
 $ id             : chr  "A" "A" "A" "B" ...
 $ date           : Date, format: "2000-01-13" ...
 $ days_from_start: num  0 5 12 0 1 0 6 
```

使用`plyr`库：

```
library("plyr")
df <- ddply(df, .(id), mutate, days_from_start = date - min(date)) 
```

这使

```
> df
  id       date days_from_start
1  A 2000-01-13          0 days
2  A 2000-01-18          5 days
3  A 2000-01-25         12 days
4  B 2012-10-10          0 days
5  B 2012-10-11          1 days
6  C 2005-07-25          0 days
7  C 2005-07-31          6 days
> str(df)
'data.frame':   7 obs. of  3 variables:
 $ id             : chr  "A" "A" "A" "B" ...
 $ date           : Date, format: "2000-01-13" ...
 $ days_from_start:Class 'difftime'  atomic [1:7] 0 5 12 0 1 0 6
  .. ..- attr(*, "units")= chr "days" 
```

# android - ContactsContract 返回的电话号码带有无法修剪的空格

> ID：14436457
> 
> 赞同：0
> 
> 时间：2013-01-21T10:17:25.900
> 
> 标签：android, trim, contactscontract

我这里有一个奇怪的问题。当你使用这个：

```
ContactsContract.CommonDataKinds.Phone.NUMBER 
```

它返回 0123 4567890（或类似的东西）。

现在，这些数字之间的空格正在导致 Web 服务出现问题，所以我被要求修剪它。我不能。我已经尝试过 .trim() 函数，但它似乎不起作用。

我能想到的唯一原因是这不完全是一个空间。但是我该如何检查？如果我将它从 logcat 复制粘贴到一个文本文件，它会说它是一个空格（ASCII 32）。但如果是，为什么不 .trim() 删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:42:28.407

trim() function doesn't work like that..it only removes spaces from the start and at the end..you can always replace them with empty string

# android - 在自定义键盘中运行时更改键的图标

> ID：14436460
> 
> 赞同：2
> 
> 时间：2013-01-21T10:17:39.527
> 
> 标签：android, keyboard

我正在创建自定义键盘，`text & icon of key`在运行时进行更改，并且我已成功更改`text of key`但找不到任何方法来更改`icon of key`.

任何帮助，提示将是可观的。

*更改密钥文本的代码是：*

```
Keyboard currentKeyboard = CustomKeyboard.mInputView.getKeyboard();
List<Keyboard.Key> keys = currentKeyboard.getKeys();
CustomKeyboard.mInputView.invalidateKey(changeKey);
keys.get(changeKey).label = "Change Text"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:45:33.580

不要使用“.lable”属性。
它将采用 >lable 或 .icon （grrrr .... 真的很糟糕，但仍然很明显，请考虑图像上的顶部内容，因为这里的图标不是背景，而是它的顶部图像。）
相反，您必须使用：

```
android:keyIcon="@drawable/your_top_icon"  
android:text="your_text"(Text will not appear on key but you will get this value in listener.) 
```

现在场景也将发生变化：
现在将调用 onText() 方法而不是 onKey() 方法（序列将相同）
通过这种方式，您可以在运行时更改单个图标。

```
keys.get(changeKey).text = "Change Text";   
keys.get(changeKey).icon = Drawable; 
```

-ve 点：
这意味着如果您的键盘中有 40 个（或 400 个）键，则必须使用 40 个不同的图像 :'(

您可以应用一些技巧，例如应用样式，但同样适用于鲸鱼布局，因为单个键样式不起作用。

我也在寻找另一种方法来为个人替换图像，如果找到任何东西让你知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T19:33:47.067

在我在 Onkey 的路上：

```
case keycode:
    Keyboard currentKeyboard = mInputView.getKeyboard();
    List<Keyboard.Key> keys = currentKeyboard.getKeys();
    mInputView.invalidateKey(*keycode*);
    keys.get(*keycode*).label = null;
    key.get(*keycode*).icon = getResources().getDrawable(R.drawable.image); 
```

keycode 是：xml 或 Keyboard.KEYCODE_ 上的键码...

# c++ - c++时间戳到人类可读的日期时间函数

> ID：14436462
> 
> 赞同：7
> 
> 时间：2013-01-21T10:17:41.377
> 
> 标签：c++, timestamp

我有一个简单的函数，我需要从时间戳返回人类可读的日期时间，但不知何故它以秒为单位返回相同的时间戳：

输入 1356953890

```
std::string UT::timeStampToHReadble(long  timestamp)
{
    const time_t rawtime = (const time_t)timestamp;

    struct tm * dt;
    char timestr[30];
    char buffer [30];

    dt = localtime(&rawtime);
    // use any strftime format spec here
    strftime(timestr, sizeof(timestr), "%m%d%H%M%y", dt);
    sprintf(buffer,"%s", timestr);
    std::string stdBuffer(buffer);
    return stdBuffer;
} 
```

输出 1231133812

这就是我所说的：

```
long timestamp = 1356953890L ;
std::string hreadble = UT::timeStampToHReadble(timestamp);
std::cout << hreadble << std::endl; 
```

输出是：1231133812，我是什么格式的：31/1/ 2012 11:38:10 我在这里缺少什么？

**UTDATE :**
解 strftime(timestr, sizeof(timestr), " %H:%M:%S %d/%m/%Y", dt);

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-23T08:34:52.130

它可以归结为：

```
std::string UT::timeStampToHReadble(const time_t rawtime)
{
    struct tm * dt;
    char buffer [30];
    dt = localtime(&rawtime);
    strftime(buffer, sizeof(buffer), "%m%d%H%M%y", dt);
    return std::string(buffer);
} 
```

变化：

*   我宁愿在函数之外进行强制转换。如果调用者有 time_t 数据，那么在调用函数之前将 time_t 转换为 long 会很奇怪。
*   不需要有两个缓冲区（因此不需要使用 sprintf 进行复制）

# wso2 - WSO2 BAM - 将 KPI 数据从 WSO2 ESB 发送到 BAM

> ID：14436463
> 
> 赞同：1
> 
> 时间：2013-01-21T10:17:43.857
> 
> 标签：wso2, wso2esb, wso2bam

我正在尝试将 WSO2 ESB 的 KPI 数据发送到 WSO2 BAM 以分析该 KPI

考虑在 WSo2 ESB 处理下面的消息，

```
<Transport type='KPN'>
  <Tickets>3"<"/Tickets>
</Transport> 
```

作为 KPI，我需要发送数据

```
/Transport@type
/Transport/Tickets 
```

到 WSO2 BAM。

1.  我正在寻找将 WSO2 ESB 的 KPI 发送到 WSO2 BAM 的示例
2.  此外，如果在 WSO2 ESB 中安装中介数据代理并按照[http://docs.wso2.org/wiki/display/BAM201/Setting+up+Mediation+Data+Agent中所述进行配置](http://docs.wso2.org/wiki/display/BAM201/Setting+up+Mediation+Data+Agent)

我能否将 KPI 数据从 WSO2 ESB 发送到 WSO2 BAM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:03:41.470

您可以使用 BAM Mediator Publisher 从 ESB 发布自定义数据。有关如何设置 BAM 调解器的信息，请参阅[http://docs.wso2.org/wiki/display/BAM201/Setting+up+BAM+Mediator 。](http://docs.wso2.org/wiki/display/BAM201/Setting+up+BAM+Mediator)在那里，您可以定义要在流中发布到 BAM 的属性。这些属性可以通过对消息执行 XPath 来收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:28:53.167

中介数据代理用于收集与 ESB 中的中介数据相关的统计信息。正如 chamibuddhika 提到的，您可以使用[BAM 调解](http://docs.wso2.org/wiki/display/BAM201/Setting+up+BAM+Mediator)器，它将从 ESB 的 Messageontext 收集属性。它还捕获其他一些固定信息，例如消息头/正文等。作为练习，您可以尝试使用 BAM 中介器的[活动监控工具箱。](http://docs.wso2.org/wiki/display/BAM201/Activity+Monitoring+Toolbox)但是 chamibuddhika 提到的 XPath 功能在 BAM 2.0.1 中不可用。它将在未来实施。

# angularjs - Angularjs循环遍历元素

> ID：14436464
> 
> 赞同：0
> 
> 时间：2013-01-21T10:17:47.850
> 
> 标签：angularjs

我想创建一个这样的 html 结构：
`<div><img src="...."><img src="...."><img src="...."><img src="...."></div>`
如果我使用`<div ng-repeat="image in images"><img ng-src="{{images}}"/></div`，我将得到如下结构：`<div><img></div> <div><img></div> <div><img></div> <div><img></div>`。
所以，无论如何都要在没有`div`父循环的情况下循环 img

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:19:31.657

将图像放在`ng-repeat`图像上

```
<div>
  <img ng-repeat="image in images" ng-src="image"/>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:19:51.470

为什么不这样做：

```
 <div>
     <img ng-repeat="image in images" ng-src="images">
 </div> 
```

# java - 检查oracle jdbc驱动是否注册

> ID：14436465
> 
> 赞同：1
> 
> 时间：2013-01-21T10:17:50.653
> 
> 标签：java, jdbc

我编写了一个简单的代码来测试 oracle 驱动程序是否已经注册。

```
private boolean isDriverRegistered(){
    boolean isRegistered = false;
    Enumeration<Driver> loadedDrivers = DriverManager.getDrivers();
    while(loadedDrivers.hasMoreElements()){     
        Driver driver = loadedDrivers.nextElement();
        if (driver instanceof OracleDriver){
            isRegistered = true;
            break;
        }
    }
    return isRegistered;
} 
```

有人可以建议任何其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:23:33.060

Try a `Class.forName()` with the specific Oracle driver class name. If it can be loaded, it is surely registered.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:42:23.113

我认为迭代很好，但是您可以使用acceptURL 方法而不是instanceof 检查（例如，避免编译时间依赖于Oracle 驱动程序）：

[http://docs.oracle.com/javase/7/docs/api/java/sql/Driver.html#acceptsURL%28java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/java/sql/Driver.html#acceptsURL%28java.lang.String%29)

# c# - 延迟加载：对象被加载，即使它从未被引用

> ID：14436466
> 
> 赞同：0
> 
> 时间：2013-01-21T10:17:55.120
> 
> 标签：c#, lazy-loading

我正在使用延迟加载来加载有关票证消息所属的支持票证的信息。TicketMessage 是 Ticket 的子级。在我的 TicketMessage 类中，当引用 TicketMessage 对象的 Ticket 属性时，我有以下代码来延迟加载 Ticket 对象：

```
// Lazy loading of Ticket object
private Ticket _Ticket { get; set; }
public Ticket Ticket
{
    get
    {
        return this._Ticket ?? (this._Ticket = new Ticket(TicketID, ClientID, ConnectionString, Person.PersonID));
    }
} 
```

但是，我遇到的行为表明每次实例化 TicketMessage 类时都会出现此对象，从而导致一些不需要的空引用异常。我的延迟加载模式有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:21:32.570

Don't make _Ticket as a property. Try this:

```
private Ticket _Ticket = null;

public Ticket Ticket
{
    get
    {
        return this._Ticket != null ? this._Ticket : (this._Ticket = new Ticket(TicketID, ClientID, ConnectionString, Person.PersonID));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:25:51.410

I would say your NRE problem is more likely to be `Person` being null rather than an issue with the `null-coalescing` operation.

That being said, I don't particularly like the idea of doing an assignment in that way. From a readability point of view it would be much clearer written as:

```
private Ticket _ticket;
...
public Ticket Ticket
{
    get
    {
        if (this._ticket == null)
        {
            this._ticket = new Ticket(TicketID, ClientID, ConnectionString, Person.PersonID);
        }
        return this._ticket;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:19:26.563

Person.PersonID 调用中的问题，您应该确保该对象已初始化。

.Net 4 有一个完美的类 Lazy<>

```
private Lazy<Ticket> ticket = new Lazy<Ticket>(() => new Ticket(TicketID, ClientID, ConnectionString, Person.PersonID));

public Ticket Ticket
{
    get { return ticket.Value; }
} 
```

# mongodb - mongodb查询到锂命令

> ID：14436469
> 
> 赞同：1
> 
> 时间：2013-01-21T10:18:07.647
> 
> 标签：mongodb, aggregation-framework, mongodb-php, lithium

```
db.users.aggregate(
    {$match : 
        {"_id" : ObjectId("50f69176904e1d66affec20d")}
    }, 
    {$unwind : "$connections"}, 
    {$match : 
        {$or : [
            {"connections.users" : {$exists : false}}, 
            {"connections.users.id" : "50f651b8b58bba7fbec2f223"}
        ]}},
    {$group : {_id : "$connections.group"}}
) 
```

在这里，我找到了特定用户所在的组名。我在 mongodb shell 中得到了正确的结果。现在我必须在锂框架中使用它。请帮我执行命令。有关集合结构，请参阅此链接： http: [//pastebin.com/P8uMw9cj](http://pastebin.com/P8uMw9cj)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:52:10.817

您可以像这样运行任意命令：

```
$files = Files::connection()->connection->command(array("geoNear" => "fs.files", "near" => $coords, "maxDistance" => 1)); 
```

您显然会使用 Users::connection()，但是聚合也有一些改进，尽管不确定它们是否在 master 分支中。

您还可以在此处查看带有聚合的演示应用程序：[https](https://github.com/jmikola/li3-mongodb-aggregation-demo/blob/master/app/controllers/DemoController.php) ://github.com/jmikola/li3-mongodb-aggregation-demo/blob/master/app/controllers/DemoController.php应该可以帮助您开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:06:58.713

您应该阅读 Tom Maiaroto 的文章[“MongoDB Aggregation of all Shapes and Sizes”](http://sphere.orchestra.io/p/Li3-Advent-Day-7)

它涵盖了 Map/Reduce、分组和新的聚合框架

# asp.net - 包含大约 200 个控件的 ASP.NET 页面需要时间来加载

> ID：14436478
> 
> 赞同：0
> 
> 时间：2013-01-21T10:18:50.307
> 
> 标签：asp.net, performance

我在加载表单时遇到问题。在 IE8 中加载大约需要 15 秒。有什么方法可以显示前 50 个控件并在后台加载另一个控件，以便用户可以访问前 50 个控件，这些控件已加载，而其余的控件正在加载到屏幕上，有人可以帮我吗？

谢谢， 苏拉杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:27:29.457

要发送页面的一部分，您可以使用页面`Flush()`内部的某些位置，例如：

```
...html code...
<%Response.Flush();%>
...rest of html code... 
```

但是如果延迟是在代码后面，例如在查询您的数据库时，那么刷新在此时无济于事，您还需要在`flush()`例如之后移动一些计算（如果可能的话）：

```
...html code...
<%
 Response.Flush(); 
 // Call CodeBehind Function that takes some time
 MoreCalculations();
 %>
...rest of html code... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:42:12.243

那是大量的控件。

您的主要问题将是`ViewState`. 看看你的页面大小。这将是几 MB。不是一个好的网络设计。

您可以采取的步骤：

1.  重新设计您的页面以使用更少的控件。您可以使用会话来维护值并将输入表单分解为几个较小的表单。

2.  您可以将其`ViewState`移至会话中。这会给你一些安慰。[`SessionPageStatePersister`](http://msdn.microsoft.com/en-us/library/system.web.ui.sessionpagestatepersister.aspx)为此使用。

3.  将隐藏控件设置为`Visible="False"`。通过 CSS 或 javascript 隐藏的控件仍然会占用带宽。将控制设置为`Visible="False"`告诉服务器不要渲染它们。这样做的缺点是，如果需要显示它们，则必须回发到服务器。

4.  对于不会在您的页面生命周期内更改的控件，请将`ViewStateMode="Disabled"`. 这将确保他们不会将其内容写入 ViewState。

# wpf - 将列标题与 Itemsource 绑定

> ID：14436480
> 
> 赞同：1
> 
> 时间：2013-01-21T10:19:03.397
> 
> 标签：wpf, datagrid, datagridtextcolumn

我有一个 Itemsource 并从中绑定数据网格中的值

```
 <DataGridTextColumn Header="Message" Binding="{Binding Path=message}"/>
    <DataGridTextColumn Header=" Logger" Binding="{Binding Path=logger}"/>
    <DataGridTextColumn Header="Level" Binding="{Binding Path=level}" /> 
```

我还必须将标题文本与键字典绑定

```
 Dictionary<String, object>.KeyCollection keyslist = dict1.Keys; 
```

使用这本字典，我必须绑定标题文本。

是否可以为 Datagrid 提供两个 itemsource ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:20:50.450

对您的问题的简短回答是：是的，有可能。虽然这是一种混乱的做事方式，我不建议这样做（除非你真的必须这样做，因为我不知道你的上下文细节），但这里的想法是：

1.  第一个问题是，Header 绑定似乎有些损坏。我无法通过常规方式绑定到它，除非通过 Source={x:Static} 定义备用数据上下文。

2.  在 Header 绑定中无法绑定到集合，因此您需要给它一个缩放器值或编写一个转换器，该转换器接受一个参数并在您的字典中查找它以返回实际值。

下面是示例代码，展示了*我们*如何测试绑定（没有转换器）：

**XAML**

```
<Window x:Name="window" x:Class="WpfDataGridMisc.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="214" DataContext="{Binding Source={x:Static wpfDataGridMisc:PersonsViewModel.Instance}}"
        xmlns:wpfDataGridMisc="clr-namespace:WpfDataGridMisc">
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Persons}">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding FirstName}" Header="{Binding Source={x:Static wpfDataGridMisc:PersonsViewModel.Instance}, Path=Header1}" />
        </DataGrid.Columns>
    </DataGrid>
</Window> 
```

**人员视图模型**

```
using System;
using System.Collections.ObjectModel;

namespace WpfDataGridMisc
{
    public class PersonsViewModel
    {
        private static readonly PersonsViewModel Current = new PersonsViewModel();

        public static PersonsViewModel Instance { get { return Current; } }

        private PersonsViewModel()
        {
            Persons = new ObservableCollection<Person>
                {
                    new Person {FirstName = "Thomas", LastName = "Newman", Date = DateTime.Now},
                    new Person {FirstName = "Dave", LastName = "Smith", Date = DateTime.Now},
                };
            Header1 = "Header 1";
        }

        public ObservableCollection<Person> Persons { get; private set; }

        public string Header1 { get; set; }
    }
} 
```

Person 类是从上面代码中的 Person 推导出的标准 poco。

信用：感谢[Johan Larsson](https://stackoverflow.com/users/1069200/johan-larsson)提供的大部分代码。他正在研究这个解决方案，我只是在帮忙，但他觉得我应该发布答案，因为 x:Static 是我的想法。

# java - 输入 URL 时，Apache 轴 2 要求提供凭据

> ID：14436482
> 
> 赞同：0
> 
> 时间：2013-01-21T10:19:07.497
> 
> 标签：java, web-services, axis2, webservice-client

我正在通过 Apache Axis 2 客户端在 Eclipse 中编写 Web 服务客户端。我输入它要求提供凭据的 URL。虽然我提供了有效的凭据，但它不接受。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T11:26:40.313

检查 C:\Program Files\Apache Software Foundation\Tomcat 6.0\conf\tomcat-users.xml 以获取用户标签下的有效凭据

# php - 将 PayPal 返回 URL 设置为 localhost

> ID：14436483
> 
> 赞同：10
> 
> 时间：2013-01-21T10:19:07.510
> 
> 标签：php, paypal, payment-gateway, sandbox, paypal-sandbox

我正在尝试集成 Paypal，并且在此过程中使用沙箱。我按照以下问题中接受的答案的步骤进行操作。[设置 PayPal 退货 URL 并使其自动退货？](https://stackoverflow.com/questions/7642895/setting-paypal-return-url-and-making-it-auto-return)

但是当我尝试输入 URL 时，Paypal 返回以下错误。

```
We were unable to validate the URL you have entered. Please check your entry and try again. 
```

我要设置的 URL 是`http://localhost:8888/paypal/success.php`.

***我还***尝试使用如下形式发送返回 url。

```
<input type="hidden" name="return" value="http://localhost:8888/paypal/success.php"> 
```

这两种方法对我都不起作用。

完整形式

```
<form method="post" action="https://www.sandbox.paypal.com/cgi-bin/webscr">
<!-- Identify your business so that you can collect the payments. -->
<input type="hidden" value="dasun_1358759028_biz@archmage.lk" name="business">
<!-- Specify a Buy Now button. -->
<input type="hidden" value="_xclick" name="cmd">
<!-- Specify details about the item that buyers will purchase. -->
<input type="hidden" value="AM Test Item" name="item_name">
<input type="hidden" value="22.16" name="amount">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" value="item_number" name="item_number">
<input type="hidden" name="return" value="http://localhost:8888/paypal/success.php">
<!-- Display the payment button. -->
<input type="image" name="submit" border="0" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif" alt="PayPal - The safer, easier way to pay online">
<img alt="" border="0" width="1" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" >
</form> 
```

我怎样才能在我的开发电脑上测试这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-21T10:24:16.690

如果您尝试指定 IP 地址而不是 localhost 会怎样？

本地主机无法在远程机器上解析。只有您的本地 DNS 知道 localhost 语句并且是 127.0.0.1。

```
http://your-IP-address:8888/paypal/success.php 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-24T01:12:59.563

您可以为您的网站创建一些 URL 别名并将其添加到您的主机文件（[http://en.wikipedia.org/wiki/Hosts_(file)](http://en.wikipedia.org/wiki/Hosts_%28file%29)）。然后将该 URL 作为您的返回 URL 传递给 paypal。它们只是在浏览器中触发重定向到该位置，此时您的主机文件会将其解析到您的本地开发服务器。

例如：在您的主机文件中添加一行，例如`127.0.0.1 local.mywebdomain.com`

**然后在您的 PayPal 按钮中，为返回**参数传递相同的 URL （例如`<input type="hidden" name="return" value="http://local.mywebdomain.com/success.php">`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-20T22:12:43.443

值得注意的是，在使用 Facebook 授权 API（如果不是全部，可能还有其他）时，您可以将 https://localhost:xxxx/my-redirect 作为重定向 URL 放入，它会起作用。

因此，这里基本上说“duh ..... paypal 无法在您的 PC 上访问本地主机”的答案有点苛刻和不合时宜。

远程 API 不需要知道 localhost 如何最终解析，但在客户端重定向的上下文中，他们并不关心并假定客户端将 localhost 解析到开发人员想要的位置。

话虽如此，老实说……我第一次使用 Facebook API 时，对 localhost 如何工作感到有些困惑。但正是在这个过程中，我对这些类型的重定向如何发生以及它们是客户端有了更全面的了解。

这很有意义，因为在绝大多数情况下，提供身份验证或在本例中为付款的 API 会将客户端重定向到带有某种类型的令牌的 URL，该令牌可以证明其身份/付款。

是的，paypal 也有 webhook，但那是另一回事。Webhook 是当您正在使用的第 3 方服务将让其后端向您的后端发送 POST 时，为您提供某些交易的正式结果。

当我开发这种性质的东西时，我更加重视这些服务器到服务器的通信，因为我可以肯定，如果 paypal 的后端告诉我发生了什么事，那么它确实确实发生了，而且不可能是客户端黑客。

使用 webhook 的人不会尝试将 'localhost' 作为 webhook URL，因为显然这没有任何意义，并且无法用于服务器到服务器的通信。

但是当服务在事务之后重定向 Web 浏览器客户端时，一些开发人员会假设 localhost 可以工作，因为它应该是客户端重定向而不是 Webhook。

当一个对任何给定 API 不熟悉的开发人员在似乎是客户端重定向的情况下使用“localhost”来让用户回到商家的网站时，这根本不是一个“愚蠢”的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:23:40.637

您不能使用 localhost 它不是有效的 URL，PayPal 无法访问您的本地环境。

最好的方法是将表单和返回脚本上传到网络，如果你没有的话，有很多免费的 PHP 网络主机。

# iphone - 带有自定义 xib 的 TableCellView 未加载

> ID：14436490
> 
> 赞同：0
> 
> 时间：2013-01-21T10:19:26.043
> 
> 标签：iphone, objective-c

已经创建了 的子级`UITableViewCell`，`MenuItem`其中包含我的自定义表格单元格的功能。我还创建了一个带有自定义单元格`UITableViewCell`的 xib 文件，并将 xib 文件中的`MenuItem`. xib 文件的名称也是`MenuItem`如此。在我的`UITableViewController`课堂上，我正在这样做`ViewDidLoad`：

```
UINib *menuItems = [UINib nibWithNibName:@"MenuItem" bundle:nil];
[[self tableView] registerNib:menuItems forCellReuseIdentifier:@"MenuItem"]; 
```

但是在 xib 文件中使用的背景颜色并没有在表格显示的单元格中使用。如果我添加一个新标签，它会显示出来，但背景颜色只是纯白色。有谁知道为什么？

编辑：我确实`[tableView dequeueReusableCellWithIdentifier:@"MenuItem"];`在`cellForRowAtIndexPath`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:06:52.883

感谢 Sudha 提供答案的链接。

事实证明，您无法在 xib 文件中设置背景颜色。您必须在委托的 willDisplayCell 中执行此操作。阅读[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)，靠近顶部的轮廓框。

# android - 单击水平列表视图中的项目

> ID：14436493
> 
> 赞同：3
> 
> 时间：2013-01-21T10:19:37.513
> 
> 标签：android, listview, onitemclick, horizontallist

[我已经按照http://www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)中的描述创建了水平列表视图。

一切正常，唯一的问题是我们单击元素时获得的效果（单击的单元格的颜色变化）不在自定义水平列表中。

有没有办法克服这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T09:12:36.653

在我的应用程序中，我已将以下文件添加到可绘制文件夹中，以便在选择列表项后更改其颜色：

**List_selector.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
     android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/gradient_bg" />

    <item android:state_pressed="true"
        android:drawable="@drawable/gradient_bg_hover" />

    <item android:state_selected="true"
     android:state_pressed="false"
        android:drawable="@drawable/gradient_bg_hover" />
</selector> 
```

**渐变bg.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

  <gradient
      android:startColor="#f1f1f2"
      android:centerColor="#e7e7e8"
      android:endColor="#cfcfcf"
      android:angle="270" />
</shape> 
```

**gradient_bg_hover.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
  <gradient
      android:startColor="#A6A6A6"
      android:centerColor="#757575"
      android:endColor="#4A4A4A"
      android:angle="270" />
</shape> 
```

希望这可以帮助 ：）

# xml - 使用 XSLT 从热量中修改 .wxs

> ID：14436495
> 
> 赞同：2
> 
> 时间：2013-01-21T10:19:45.627
> 
> 标签：xml, xslt, wix, windows-installer, heat

我想使用 xslt 来编辑从 wix 中生成的 .wxs`heat`文件

这是 components_en_us.wxs

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
        <Fragment>
            <DirectoryRef Id="CLASSES">
                <Directory Id="dirAB609E465A12655D740B32B2BA26C468" Name="alfresco">
                <Directory Id="dir68A1A3CC25353B021B1D7D979B520AF0" Name="extension">
                    <Component Id="cmp0FAE663628DD6BAE53501BB26264259B" Guid="1CBE6568-96E5-4844-BF02-99AF0DE1719D">
                        <File Id="fil867FDB2D2761B5912BA54F92F5E928D1" KeyPath="yes" Source="SourceDir\alfresco\extension\web-client-config-custom.xml" />
                    </Component>
                </Directory>
                </Directory>
            </DirectoryRef>
    </Fragment>
</Wix> 
```

但问题是我有其他 .wxs 文件（其他语言的 components_xx_yy.wxs）并且组件/文件 ID 是相同的。如果我使用这种方法编译我会得到一个错误

```
error LGHT0091 : Duplicate symbol 'Component:cmp0FAE663628DD6BAE53501BB26264259B' found. 
This typically me ans that an Id is duplicated. Check to make sure all your identifiers 
of a given type (File, Component, Feature) are unique. 
```

我用谷歌搜索，发现我可以使用 xslt 来更改 components_en_us.wxs 中的 Component/File id

所以，我期待像

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="CLASSES">
            <Directory Id="dirAB609E465A12655D740B32B2BA26C468" Name="alfresco">
            <Directory Id="dir68A1A3CC25353B021B1D7D979B520AF0" Name="extension">
                <Component Id="en_US_cmp0FAE663628DD6BAE53501BB26264259B" Guid="1CBE6568-96E5-4844-BF02-99AF0DE1719D">
                    <File Id="fil867FDB2D2761B5912BA54F92F5E928D1" KeyPath="yes" Source="SourceDir\alfresco\extension\web-client-config-custom.xml" />
                </Component>
            </Directory>
            </Directory>
        </DirectoryRef>
    </Fragment>
</Wix> 
```

现在，我从另一个问题中得到了这个 xslt，但我不知道如何按照我的意愿实现它。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
          xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
          xmlns:msxsl="urn:schemas-microsoft-com:xslt"
          exclude-result-prefixes="msxsl"
          xmlns:wix="http://schemas.microsoft.com/wix/2006/wi">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

所以，如果我的理解有误，请纠正我，也请帮助我处理 .xslt

提前致谢

编辑：这种方式是最佳实践，还是我应该做其他事情来解决这个重复错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T10:28:04.710

我能在这两个 XML 列表之间找到的唯一变化是在组件 ID 之前添加了“en_US_”。这是全部吗？如果是这样，请尝试将此模板添加到您当前的 XSLT 文件中：

```
<xsl:template match="wix:Component/@Id">
   <xsl:attribute name="{name()}">
     <xsl:value-of select="concat('en_US_', .)" />
   </xsl:attribute>
</xsl:template> 
```

# python - 使用python保存顶部输出

> ID：14436499
> 
> 赞同：6
> 
> 时间：2013-01-21T10:20:00.327
> 
> 标签：python

我已经用 Python 玩了将近五天了，我真的很喜欢它。
我有这个挑战，我无法解决它。
挑战是每 10 秒重复一次 top 命令的输出并将其保存到文件中。
这是我到目前为止所做的。

```
import time, os, threading

def repeat():
    print(time.ctime())
    threading.Timer(10, repeat).start()
    f = open('ss.txt', 'w')
    top = os.system("sudo top -p 2948")
    s = str(top)
    text = f.write(s)
    print(text)

repeat() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:52:13.640

这里的主要问题是调用`top`不会立即终止，而是在循环中连续运行以显示新数据。`-n1`您可以通过指定选项来更改此行为（`-n`允许您指定迭代次数）。

尝试这样的事情：

```
import subprocess

## use the following where appropriate within your loop
with open("ss.txt", "w") as outfile:
  subprocess.call("top -n1 -p 2948", shell=True, stdout=outfile) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:34:53.133

建议`subprocess`用于调用另一个进程。您需要将`file object`要写入输出的文件传递给该文件。例如

```
 import time, os, threading, subprocess
    def repeat():
      print(time.ctime())
      threading.Timer(10, repeat).start()
      with open('ss.txt', 'w') as f:
          subprocess.call(["sudo","top","-p","2948"],stdout=f) 
```

这应该将命令的输出保存到您以后可以阅读的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:29:51.243

首先，您的代码格式不正确，它应该看起来更像这样：

```
import time, os, threading

def repeat():
  print(time.ctime())
  threading.Timer(10, repeat).start()
  f= open('ss.txt', 'w')
  top= os.system("sudo top -p 2948")
  s=str(top)
  text = f.write(s)
  print text

repeat() 
```

然后，您可能想查看 subprocess 模块 - 它比 os.system 调用外部命令更现代和更干净。但是，如果您的代码有效，那么实际问题是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T11:37:46.627

您也可以使用该`time.sleep()`功能，等待 10 秒后再继续。
不确定这是否是你想要的......

```
import time,os

def repeat(seconds,filename):
    while True:
        print(time.ctime())
        f = open(filename, 'w')
        top = os.system("sudo top -p 2948")
        s = str(top)
        time.sleep(seconds)
        f.write(s)

repeat(5,'ss.txt') 
```

**还**

1.  `f.write`返回`None`，因为它在文件上写入，不返回任何值，因此存储该值是无用的。
2.  查看[PEP 324](http://www.python.org/dev/peps/pep-0324/)，它记录了`subprocess`模块的特性。（感谢@ajm）
3.  `subprocess.Popen()`有很多功能（工具），所以它可以取代许多其他“工具”，（见[这里](http://docs.python.org/2/library/subprocess.html#replacing-older-functions-with-the-subprocess-module)）所以你也可以考虑一下。

# java - Android 客户端的 WCF 服务 - 错误：找不到类和 NoClassDefFoundError

> ID：14436502
> 
> 赞同：3
> 
> 时间：2013-01-21T10:20:06.170
> 
> 标签：java, android, wcf, runtime-error

我正在开发一个项目，我使用 WCF **(.Net Framework 4)**作为我的 Web 服务和一个 Android 应用程序作为我的客户端**(Android 2.2 (API 8))**。我创建了我的 WCF 项目，并将其发布到 IIS 服务器上。然后我使用了“wsimport”（java JDK提供的）命令，结构如下：

```
wsimport -p testWCF -keep -verbose -d "d:\webservice\java" http://192.168.2.103/MyWebService.svc?wsdl 
```

我通过将 jar 文件粘贴到 Androids 项目的“libs”文件夹中来导入 jar 文件，然后通过单击“添加外部 jar ..”按钮将 jar 文件添加到构建路径中。然后在“order and export”选项卡中查看jar文件，如下图：

[我的“构建路径”的图像](http://dl.dropbox.com/u/15975895/stackoverflow/error.png)

从 Eclipse 我收到以下消息：

```
The type javax.xml.bind.annotation.XmlNsForm cannot be resolved. It is indirectly referenced from required .class files 
```

但是 Eclipse 仍然在我的设备上运行 android 项目，但是我从 Log Cat 收到以下错误

*   找不到类
*   NoClassDefFoundError

当我将 jar 文件导入到普通的 java 项目中时，我设法使用以下代码成功访问了 Web 服务，但在 android 项目中却没有。

```
MyWebService service = new MyWebService();
IMyWebService client = service.getBasicHttpBindingIMyWebService();

System.out.println(client.getMessage()); 
```

我搜索了上述错误，许多解决方案表明“构建路径”中缺少引用，但是这些解决方案不适用于我的 android 项目....我做错了什么？我错过了什么？

谢谢

# api - 如何在 ext js4 中动态更改代理 api？

> ID：14436508
> 
> 赞同：3
> 
> 时间：2013-01-21T10:20:14.113
> 
> 标签：api, extjs, proxy, extjs4

我正在使用 MVC 结构在 extjs4 中工作，我想将**我的 api**（创建）代理设置更改为另一个 url。我在这一点上卡住了。这是我的一些代码

```
 Ext.define('Balaee.model.sn.UserModel',{
        extend: 'Ext.data.Model',
        //idproperty:'userId',//fields property first position pk. 
        fields: ['userId','firstName','middleName','lastName','languageId','primaryEmail','birthDate','password','securityQuestionId','securityQuestionAnswer','isMale','creationTime','ipAddress','confirmationCode','userStatusId',],
        proxy:
        {
            type:'ajax',
            api:
            {
                read:'http://localhost/balaee/Balaee/index.php?r=SocialNetworking/user/AuthenticateLogin',
                create:'http://localhost/balaee/Balaee/index.php?r=SocialNetworking/user/AuthenticateLogin',
                update:'http://localhost/balaee/Balaee/index.php?r=SocialNetworking/user/Registration'

            },//end of api
            reader:
            {
                type:'json',
            },//end of reader
            writer:
            {
                type:'json',
                root:'records',
            },//End of writer
        }//end of proxy
} 
```

请给我一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:04:04.090

`Ext.apply`你可以用or做这样的事情`Ext.applyIf`。

```
var userModel = Ext.create('Balaee.model.sn.UserModel',{}),
    proxy = userModel.getProxy();

Ext.apply(proxy.api, {
    create  : '/controller/new',
    read    : '/controller/load',
    update  : '/controller/update',
    destroy : '/controller/destroy_action'
}); 
```

# javascript - 为 javascript 插件组织代码的最佳方式

> ID：14436511
> 
> 赞同：0
> 
> 时间：2013-01-21T10:20:21.333
> 
> 标签：javascript, design-patterns, architecture

哦，嗨，我看到了一些关于这个主题的有趣帖子，但我认为这是一个非常私人的问题，需要定制的答案。所以我问你，为一个需要更加通畅的 Javascript 插件组织我的代码的最佳方法是什么。

所以我的代码看起来像这样：

```
 var myApp = (function(){
        //here are my global methods or variables
        var self = this;
        return {
            method1:function(){}
            method2:function(){}
            method3:function(){}
    }

   })() || (myApp = {})
myApp.method1(); 
```

我执行调用或使用我的应用程序的整个代码的方法 1。我想我可以使用 addEventListener 方法添加和加载事件来执行这个方法1，我想我的代码可以有更好的组织。我想确切地说我的插件有点小，比如 200 条 javascript 代码通道，而且它必须是 Vanilla js。在我看来，它在网站的单个页面上使用，不需要做一个名为“new”的原型类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:51:37.930

这实际上取决于您的项目以及您想要获得的内容。有几种模式可以帮助您更好地组织和维护代码。
一方面，我使用了多年来让自己感到舒适的模式组合。*这是我的应用程序模块*
的 样板：

 *```
;(function(global, udnefined){

    var app = global.app || {},
        moduleName = 'util',
        module = app[moduleName] || {};

    // "private" vars
    var version = "1.2";

    // fake "private" members (the udnerscore naming convention)
    module._bindEventHandlers = function(){
        // code here

        // for chainability purposes
        return this;
    }

    // "public" method
    module.someMethod = function(){

        // for chainability purposes
        return this;
    }

    // "public" method
    module.someOtherMethod = function(){

        // for chainability purposes
        return this;
    }

    // the init method
    module.init = function(){
        this
            ._bindEventHandlers()
            .someMethod();
    }

    app[moduleName] = module;
    global.app = app;

})(this); 
```

然后，在您的应用程序中（在应用程序初始化或实际需要模块时）您可以简单地调用：

```
app.util.init();
app.util.someOtherMethod(); 
```

提供的*模块*对于创建新模块具有高度可重用性，因为大多数模块应该有一个初始化逻辑（`init`方法），它们中的大多数会监听一些事件（无论是 dom 还是自定义事件）——`_bindEventHandlers`方法——并且它不会污染带有变量的全局命名空间（它只是将一个对象添加到主应用程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:08:06.807

我用了一些东西。一切都取决于我需要完成的事情

```
(function(app, undefined){ 
  var module = app.module = (function(){
    var privatestuff

    return {}
  }())

  var singelton = app.singleton = (function(){
    var Module = function(){}

    module.prototype.method1 = function(){}

    return new Module()
  }())

  var ModulePrototype = app.ModulePrototype = function(){
    var Module = function(){}

    module.prototype.method1 = function(){}

    return Module
  }
}(myApp = window.myApp ||{})) 
```*

# android - Android RadioButtons 仅在模拟器上行为不端

> ID：14436513
> 
> 赞同：0
> 
> 时间：2013-01-21T10:20:26.813
> 
> 标签：android, android-layout, android-emulator

我在 xml 中有 RadioGroup。我正在用代码中的 RadioButton 填充它。问题是，在模拟器中，RadioButtons 的行为与 RadioGroup 不同。我可以一次选择所有单选按钮。但一切似乎都在真实设备上运行良好。

**以下是所有文件的屏幕截图和代码：**

**模拟器截图**

![模拟器截图](../Images/75d21c80fb07e6583716ae4ed1d268cb.png)

**设备三星 Galaxy 的屏幕截图**

![设备三星 Galaxy 的屏幕截图](../Images/e7e5a2e7ddb10b49bcc545a548209a41.png)

**MainActivity.java 的源代码**

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
private RadioGroup rg;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LayoutInflater inflater = LayoutInflater.from(getBaseContext());
    rg = (RadioGroup)findViewById(R.id.rg);

    for (int i = 0; i < 5; i++) {
        inflater.inflate(R.layout.myradio, rg,true);
    }

} 
```

}

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/llContainer"
    tools:context=".MainActivity" >

<RadioGroup 
    android:id="@+id/rg"
    android:background="#0000ff"
    android:orientation="vertical"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent">

</RadioGroup> 
```

**myradio.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<RadioButton xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="RadioButton" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:31:05.047

会是这样

```
public class example extends Activity {
    /** Called when the activity is first created. */
    private RadioGroup rgroup;
     RadioButton rb;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.example);

        rgroup = (RadioGroup)findViewById(R.id.rg);
        final RadioButton[] rb = new RadioButton[5];
        for (int i = 0; i < 5; i++) {
            rb[i]=new RadioButton(this);
            rb[i].setText("rdo"+i);
            rb[i].setId(i);
            rgroup.addView(rb[i]);

        }

    }

    } 
```

![在此处输入图像描述](../Images/5435ab68a330dadd84939f8b88d76fde.png)

# linux - What does it mean in Linux for installing script

> ID：14436515
> 
> 赞同：1
> 
> 时间：2013-01-21T10:20:29.240
> 
> 标签：linux, bash

I am trying to install some scripts into linux and follwoing line is given as instruction.

1.  Install the xyz script into some convenient directory in $PATH.

but I'm unable to understand what exactly does it mean.How do I install given script in $PATH directory.Script is placed under /users/username/ Dir.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:23:16.227

In a terminal type `echo $PATH`. You will see a list of directories. Put your script, or a link to your script in one of those directories, typically in `/usr/local/bin`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:25:19.233

its a bad description of the script-author :) usually, in your $PATH are multiple directories mentioned, separated by colon.

you can echo them:

> echo $PATH

What the Author means: just copy the script in a directory which is in your $PATH, e.g. /usr/local/bin

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T10:23:57.960

$PATH is a list of directories where bash looks for executables.

The given instruction suggests that yours scripts should be put in one of these directories.

An alternative is to put your scripts in any directory and add that directory to $PATH. In your case, add the following line in your $HOME/.bash_profile configuration file:

```
export PATH=$PATH:/users/username 
```

# opencart - 如何在 OpenCart 的菜单栏左侧添加“主页”？

> ID：14436521
> 
> 赞同：4
> 
> 时间：2013-01-21T10:20:45.700
> 
> 标签：opencart

如何在 OpenCart 菜单栏的左侧添加指向主页的链接 - “主页”？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T10:25:58.327

编辑`catalog/view/theme/<YOUR_THEME>/template/common/header.tpl`

寻找：

```
<div id="menu">
  <ul> 
```

在下面添加：

```
 <li><a href="<?php echo $home; ?>"><?php echo $text_home; ?></a></li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T06:31:23.287

即使您也可以在顶部导航栏中添加自定义菜单

编辑目录/视图/主题//template/common/header.tpl

寻找：

```
<div id="menu">
  <ul> 
```

然后

```
<li><a href="YOUR_LINK">Menu_Text</a></li> 
```

您还可以添加预定义菜单，如信息、客户服务等。

信息菜单

```
 <?php foreach ($informations as $information) { ?>
      <li>
            <a href="<?php echo $information['href']; ?>">
            <?php echo $information['title']; ?></a>
      </li>
  <?php } ?> 
```

服务菜单

```
 <li><?php echo $text_service; ?>
    <ul>
      <li><a href="<?php echo $contact; ?>"><?php echo $text_contact; ?></a></li>
      <li><a href="<?php echo $return; ?>"><?php echo $text_return; ?></a></li>
      <li><a href="<?php echo $sitemap; ?>"><?php echo $text_sitemap; ?></a></li>
    </ul>
 </li> 
```

额外菜单

```
<li><?php echo $text_extra; ?>
    <ul>
      <li><a href="<?php echo $manufacturer; ?>"><?php echo $text_manufacturer; ?></a></li>
      <li><a href="<?php echo $voucher; ?>"><?php echo $text_voucher; ?></a></li>
      <li><a href="<?php echo $affiliate; ?>"><?php echo $text_affiliate; ?></a></li>
      <li><a href="<?php echo $special; ?>"><?php echo $text_special; ?></a></li>
    </ul>
</li> 
```

账户菜单

```
<li><?php echo $text_account; ?>
    <ul>
      <li><a href="<?php echo $account; ?>"><?php echo $text_account; ?></a></li>
      <li><a href="<?php echo $order; ?>"><?php echo $text_order; ?></a></li>
      <li><a href="<?php echo $wishlist; ?>"><?php echo $text_wishlist; ?></a></li>
      <li><a href="<?php echo $newsletter; ?>"><?php echo $text_newsletter; ?></a></li>
    </ul>
</li> 
```

上面提到的预定义菜单仅在页脚区域有效，要在顶部导航中添加它，您必须在 header.php 中进行一些更改

按照这个链接

[如何在opencart的导航菜单中添加信息链接？](https://stackoverflow.com/questions/17358261)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T14:23:36.423

Open Cart
Version 2.0.3.1
edit catalog/view/theme//template/common/header.tpl
Find
`<ul class="nav navbar-nav">`
And then under the above put
`<li><a href="<?php echo $home; ?>"><?php echo $text_home; ?></a></li>`
works a traet.

# vb.net - .NET KeyDown event to handle KeyChars

> ID：14436522
> 
> 赞同：1
> 
> 时间：2013-01-21T10:20:48.900
> 
> 标签：vb.net, keyboard-events, keycode

I made a form representing a numeric keypad, for a touchscreen application, and it contains the keys `0123456789`, along with the comma `,` key. Each key is an instance of a custom control with a property called Key which I set at design time:

```
 <Browsable(True),
    DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)>
    Private _key As Char
    Property Key As Char
        Get
            Return _key
        End Get
        Set(value As Char)
            _key = value
            Me.Text = _key
        End Set
    End Property 
```

To easily find the pressed key, in the containing form I build a `HashSet` with all the keys:

```
Private keys As HashSet(Of Char)
....
For Each c As Control In ...
   keys.Add(...)
Next 
```

Then I listen for the `KeyDown` event:

```
AddHandler Me.KeyDown, AddressOf KeyHasBeenPressed 
```

Then in the handler:

```
Private Sub KeyHasBeenPressed(sender As Object, e As KeyEventArgs)

    If keys.Contains(ChrW(e.KeyValue)) Then
        ' handle the key pressed event...
    End If

End Sub 
```

The problem is with the comma `,` key. The `Key` property has been set to `,` in the designer but at runtime the test `keys.Contains` fails because `e.KeyValue=188` and `e.KeyCode=Oemcomma {188}`.

What would be the best way to handle this situation? I want to use "special" keys like the comma and maybe the backspace key.

Also consider i8n: my physical numeric keypad shows a dot `.` but when pressed it must always be treated as a comma `,` instead.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:08:45.527

如果你使用`KeyPress`而不是`KeyDown`那么你将能够使用应该返回一个'，'的`KeyChar`属性`KeyPressEventArgs`

# css - :any-link 伪类有什么用？

> ID：14436526
> 
> 赞同：13
> 
> 时间：2013-01-21T10:20:58.323
> 
> 标签：css, css-selectors, pseudo-class

我不知道它是否是任何标准的一部分，但至少有两个主要浏览器已经实现了它：

*   `:-webkit-any-link`在铬
*   `:-moz-any-link`在火狐中

我找不到任何文档。我想知道它的用途、浏览器支持和使用示例。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-21T11:19:40.513

`:any-link`[是Selectors level 4](http://www.w3.org/TR/selectors4/#the-any-link-pseudo)中提出的一个新的伪类，它匹配所有将被匹配的元素`:link, :visited`。据我所知，它的主要目的是简化需要选择任何超链接的选择器，因为 的命名`:link`具有误导性；它专门表示仅未访问的链接，而不是所有超链接（这使其本质上与 相反`:visited`）。

出于 和 的目的`:link`，`:visited`WHATWG [HTML](https://html.spec.whatwg.org/multipage/semantics-other.html#pseudo-classes)和[W3C HTML5](http://www.w3.org/TR/html5/disabled-elements.html#pseudo-classes)都将“超链接”定义为以下任何一种：

*   `<a>`具有`href`属性的元素。这不包括命名锚点（即没有属性但具有属性`<a>`的元素），传统上用于标记页面中的锚点，现在已被在任何元素上使用属性所取代。请参阅[HTML 4 中的命名锚点](http://www.w3.org/TR/html401/struct/links.html#h-12.2.1)。`href``name``id`

*   `<area>`具有`href`属性的元素。

*   `<link>`具有`href`属性的元素。

例如，考虑一个场景，页面标题中的链接应该与所有其他链接的颜色不同：

```
body > header > a:link, body > header > a:visited {
    color: white;
} 
```

请注意，该`body > header`部分在两个选择器中重复。这似乎是多余的，但目前是必要的，以便将页眉中的链接与其他链接着色，但*不管它们的访问状态如何*。这是因为`body > header > a`不够具体，`!important`无论如何都需要使用覆盖，并且`body > header > a:link`麻烦地仅适用于未访问的链接。

使用`:any-link`伪类，您可以简单地这样做：

```
body > header > a:any-link {
    color: white;
} 
```

特异性与每个单独的一半完全相同，因此应该没有问题。

当然，由于还没有浏览器实现它的无前缀，那是行不通的。作为替代方案，考虑到您最有可能使用 HTML 文档，您可以使用`a[href]`它来代替，它适用于包括 IE7+ 在内的所有浏览器，*而且*同样具体：

```
body > header > a[href] {
    color: white;
} 
```

在我的[另一个答案中，](https://stackoverflow.com/questions/10587245/is-there-a-reason-to-use-a-instead-of-alink-or-avisited-in-my-stylesheet/10589840#10589840)`a`关于vs `a:link, a:visited`vs vs `a:any-link`vs的使用有更详细的解释。`a[href]`

就像在 CSS 中具有前缀的其他任何东西一样，并且仅出于实验目的`:-moz-any-link`而`:-webkit-any-link`存在，因此您不应该在您的网站中使用它们。此外，即使您现在要使用它们，您也必须复制规则本身（而不仅仅是选择器！）因为浏览器必须将整个规则放在无法识别的选择器上，从而使它们在实际代码中毫无用处！

截至 2013 年初`:any-link`，据我所知，没有其他实现。我不确定这是否由各自的供应商实施，然后提议包含在 Selectors 4 中，或者是否在供应商开始实施之前预先指定，但我认为这并不重要。

说到这一点，请务必不要将`:-moz-any-link`/`:-webkit-any-link`伪类与`:-moz-any()`/混淆`:-webkit-any()`，后者被[指定为`:matches()`](http://www.w3.org/TR/selectors4/#matches)（可能是为了避免命名混淆？）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:58:26.757

在[Mozilla CSS Extensions](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference/Mozilla_Extensions)文档中，`:-moz-any-link`提到了注释“（匹配 :link 和 :visited）”。指向详细信息的链接已经失效，但使用这种伪类的明显原因是 CSS 关于链接的奇怪设计：`:link`仅匹配未访问的链接，而`:visited`匹配已访问的链接。使用单个选择器在复杂情况下很有用，否则您需要编写两个仅在一个伪类中不同的复杂选择器。

他们可以使用`a[href]`，除了这会将选择器绑定到用于创建链接的特定元素（和属性）（这是一个标记语言问题）。

使用 Firebug 并检查其中的链接，您将在浏览器默认样式表中看到以下样式：

```
*|*:-moz-any-link:not(svg|a) {
    text-decoration: underline;
}
:-moz-any-link {
    cursor: pointer;
} 
```

后者在所有链接上设置鼠标指针（“光标”）的形状。前者使链接加下划线，但在`svg`元素内部除外。

# jquery - Error with mustache and jquery?

> ID：14436527
> 
> 赞同：0
> 
> 时间：2013-01-21T10:20:58.917
> 
> 标签：jquery, widget, mustache

I am using mustache within a jquery widget calling external json/template. My Jquery seems fine. however mutstache is giving me a error. Script as follows:

> TypeError: this.tail.search is not a function
> [Break On This Error]

```
var match, pos = this.tail.search(re);

(function() {

// Localize jQuery variable
var jQuery;

/******** Load LAB Js *********/

    var script_tag = document.createElement('script');
    script_tag.setAttribute("type","text/javascript");
    script_tag.setAttribute("src",
        "js/LAB.min.js");//local
    if (script_tag.readyState) {
      script_tag.onreadystatechange = function () { // For old versions of IE
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
              scriptLoadHandler();
          }
      };
    } else { // Other browsers
      script_tag.onload = scriptLoadHandler;
    }
    // Try to find the head, otherwise default to the documentElement
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);

/******** Load js as required ******/
function scriptLoadHandler() {
    var labjs = $LAB
    .script('http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js').wait()
    .script('js/mustache.js').wait();//local
    labjs.wait(function(){
        main();
    });  
}

/******** main function ********/
function main() { 
    jQuery = window.jQuery.noConflict(true);

    jQuery(document).ready(function($) {

        function jsonHandler(data){
            $.get('templates/template.html',function(template){
                console.log(data);
                console.log(template);
                var htmlRenderer = Mustache.to_html(template,data);
            });
        }

        $.getJSON('json/data.json',jsonHandler);                

    });
   //alert('end');
}//main() done

})();//function done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-15T01:36:12.273

当我不小心切换了模板字符串和对象参数时，我遇到了这个问题。它应该是：`Mustache.render("{{name}} template works like this", { name: "Mustache" });`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T08:07:18.907

jquery 1.8.x 也有同样的问题。我通过将 html 模板呈现为字符串而不是 html 对象来解决它。使用 dataType: 'text' 您将获得一个干净的字符串，其中包含模板的 html 内容。渲染引擎可以正常工作。
测试：firefox 和 chrome

```
$.ajax({
        type: 'GET',
        url: './htmlTemplates/conferenceMembers.htpl',
        dataType: 'text',
        success: function (data) {
            $(divId).append(Mustache.render(data, htmlRenderValues));
        }
    }); 
```

注意：这个问题在 jquery 2.0.1 中消失了。在 html 对象上渲染有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:18:03.283

我在 Firefox 中遇到了这个错误，但奇怪的是 Chrome 没有。原来这是由于模板数据`False`在运行时`mustache.render()`。

事实证明，该项目已经有代码来满足其他人编写的代码，我在费了很大力气之后发现允许其他组件检查何时加载模板：

html模板.js：

```
function HTMLTemplate(location)
{
    this.template = null;
    var self = this;
    $.get(staticURL+location, function(data)
    {
        self.template = data;
    });

}

HTMLTemplate.prototype.getTemplate = function()
{
    if(this.template)
    {
        return this.template
    }
    else
    {
        return false;
    }
} 
```

mediabootstrap.js：

```
var MediaBootstrap = {};
MediaBootstrap.templates = {};
MediaBootstrap.init = function()
{
    this.templates.mytemplate = new HTMLTemplate('js/templates/mytemplate.html');
}

MediaBootstrap.templatesLoaded = function()
{
    var loaded = true;
    for(key in this.templates)
    {
        if(!this.templates[key].getTemplate())
        {
            loaded = false;
            break;
        }
    }
    return loaded;
} 
```

我的对象.js：

```
MyObject.buildOptions = function(data)
{
    if(!MediaBootstrap.templatesLoaded())
    {
        setTimeout(function(){
            MyObject.buildOptions(data);
        }, 100);
        return;
    }
    var tpl = MediaBootstrap.templates.mytemplate.getTemplate();
    var html = Mustache.render(tpl, data);
    this.element.find('div.container').html(html);
} 
```

# wpf - 使用 DisplayMemberPath 时更新组合框

> ID：14436531
> 
> 赞同：1
> 
> 时间：2013-01-21T10:21:10.613
> 
> 标签：wpf, combobox, mvvm-light

我正在使用 WPF 和 MVVM 轻框架（而且我是新手）

情况如下：

*   我有一个显示项目列表（从数据库加载）的组合框，我正在使用 DisplayMemberPath 来显示组合框中项目的标题。

*   在同一个 GUI 中，用户可以在文本框中修改项目标题。“保存”按钮允许用户将数据保存到数据库中。

我想要做的是当用户单击“保存”时，组合框中的项目标题也会更新，并在那时显示新值。但是，我不知道该怎么做......

关于我的实现的一些细节：

主窗口.xaml

```
<ComboBox ItemsSource="{Binding SourceData}" SelectedItem="{Binding SelectedSourceData,Mode=TwoWay}" DisplayMemberPath="Title" />
<TextBlock Text="{Binding SelectedDataInTextFormat}"/> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Closing += (s, e) => ViewModelLocator.Cleanup();
    }
} 
```

MainViewModel.xaml

```
public class MainViewModel:ViewModelBase
{
  public ObservableCollection<Foo> SourceData{get;set;}
  public Foo SelectedSourceData 
  { 
    get{return _selectedFoo;}
    set{_selectedFoo=value; RaisePropertyChanged("SelectedSourceData"); }
  }

  public string SelectedDataInTextFormat
  {
    get{return _selectedDataInTextFormat;}
    set{_selectedDataInTextFormat=value; RaisePropertyChanged("SelectedDataInTextFormat");
  }
} 
```

如果有人能帮助我解决这个问题，我将不胜感激。

谢谢你的帮助。

罗曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:45:57.060

您可以在更改`SelectedSourceData`时简单地更新属性`SelectedDataInTextFormat`：

```
public string SelectedDataInTextFormat
{
    get { return _selectedDataInTextFormat; }
    set
    {
        _selectedDataInTextFormat = value;
        RaisePropertyChanged("SelectedDataInTextFormat");

        SelectedSourceData = SourceData.FirstOrDefault(f => f.Title == _selectedDataInTextFormat)
    }
} 
```

* * *

编辑：为了更改组合框中`Title`当前选定项目的属性，您可以在 Foo 类中`Foo`实现[INotifyPropertyChanged ：](http://msdn.microsoft.com/en-us/library/ms133020.aspx)

```
public class Foo : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string title = string.Empty;
    public string Title
    {
        get { return title; }
        set
        {
            title = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("Title"));
            }
        }
    }
} 
```

然后只需设置`Title`所选项目的属性：

```
SelectedSourceData.Title = SelectedDataInTextFormat; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:34:41.050

有很多方法可以做到这一点，这个例子利用`Button` `Tag`属性向保存按钮处理程序（或`ICommand`）发送一些数据，然后我们可以设置`TextBox` `UpdateSourceTrigger`为`Explicit`并在单击时调用更新`Button`。

例子：

xml:

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="105" Width="156" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <StackPanel Name="stackPanel1">
            <ComboBox x:Name="combo" ItemsSource="{Binding SourceData}" DisplayMemberPath="Title" SelectedIndex="0"/>
            <TextBox x:Name="txtbox" Text="{Binding ElementName=combo, Path=SelectedItem.Title, UpdateSourceTrigger=Explicit}"/>
            <Button Content="Save" Tag="{Binding ElementName=txtbox}" Click="Button_Click"/>
        </StackPanel>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private ObservableCollection<Foo> _sourceData = new ObservableCollection<Foo>();

    public MainWindow()
    {
        InitializeComponent();
        SourceData.Add(new Foo { Title = "Stack" });
        SourceData.Add(new Foo { Title = "Overflow" });
    }

    public ObservableCollection<Foo> SourceData
    {
        get { return _sourceData; }
        set { _sourceData = value; }
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        var txtbx = (sender as Button).Tag as TextBox;
        txtbx.GetBindingExpression(TextBox.TextProperty).UpdateSource();
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void RaisePropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
}

public class Foo : INotifyPropertyChanged
{
    private string _title;
    public string Title
    {
        get { return _title; }
        set { _title = value; RaisePropertyChanged("Title"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void RaisePropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:44:01.777

代码：

```
public ObservableCollection<Foo> SourceData{get;set;}
public Foo SelectedSourceData 
{
    get{
        return _selectedFoo;
    }
    set{
        _selectedFoo=value;
        RaisePropertyChanged("SelectedSourceData");
    }
}

public string SelectedDataInTextFormat //Bind the text to the SelectedItem title
{
    get{
        return SelectedSourceData.Title
    }
    set{
        SelectedSourceData.Title=value;
        RaisePropertyChanged("SelectedDataInTextFormat");
    }
} 
```

XAML：

```
<ComboBox ItemsSource="{Binding SourceData, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
    SelectedItem="{Binding SelectedSourceData,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="Title" />
<TextBlock Text="{Binding SelectedDataInTextFormat, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

# caching - EPiserver cache load balancer

> ID：14436534
> 
> 赞同：0
> 
> 时间：2013-01-21T10:21:17.820
> 
> 标签：caching, load, load-balancing, episerver

I have a strange problem with EpiServer 6.0 . When it is on the environment behind the load balancer it seems to have out dated cache. For example when accessing user settings it doesn't bring the latest data however when run locally or when load balancer is not present I got the latest results. There is an event listener set-up between the two load balanced servers to update the cache. Could anybody advise please?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:49:08.560

[这篇](http://world.episerver.com/Documentation/Items/Tech-Notes/EPiServer-CMS-6/EPiServer-CMS-60/Event-Management-System-Specification/)文章可能会对你有所帮助。

首先要检查的是 enableEvents 和 enableRemoteEvents 属性在 episerver.config 文件中都设置为“true”

# javascript - Ajax at home server web page

> ID：14436536
> 
> 赞同：0
> 
> 时间：2013-01-21T10:21:21.807
> 
> 标签：javascript, ajax, apache

1.  I have **Apache** set on my home pc.

    1.  A page called **ajax.html** has xmlhttp request set on a button. (for fetching a html page **main.html** residing in same directory)
    2.  Whenever i click on button, nothing happens, i have set response as text.
    3.  Below is javascript code.

    ```
    function()

    {    var httpRequest;    document.getElementById("ajaxButton").onclick = function() { makeRequest('main.html');  };     

    function makeRequest(url) { 
        if (window.XMLHttpRequest) { 
          httpRequest = new XMLHttpRequest(); 
        } else if (window.ActiveXObject) { 
          try { 
            httpRequest = new ActiveXObject("Msxml2.XMLHTTP"); 
          }

          catch (e) { 
            try { 
              httpRequest = new ActiveXObject("Microsoft.XMLHTTP"); 
            }

            catch (e) {} 
          } 
        } 

    if (!httpRequest) { 
          alert('Giving up :( Cannot create an XMLHTTP instance'); 
          return false; 
        } 
        httpRequest.onreadystatechange = alertContents; 
        httpRequest.open('GET', url); 
        httpRequest.send();    }     

    function alertContents() { 
        if (httpRequest.readyState === 4) { 
          if (httpRequest.status === 200) { 
            alert(httpRequest.responseText); 
          } else { 
            alert('There was a problem with the request.'); 
          } 
        }    }  })(); 
    ```

html code;

```
<html>
<head>
<title>Ajax Demo</title>
</head>
<body>
<input type="button" id="ajaxButton" value="Click" />
<script type="text/javascript" src="ajax.js">
</script>
</body>
</html> 
```

# jquery - 选择同级按钮时取消选择（从中删除类）其他按钮

> ID：14436541
> 
> 赞同：1
> 
> 时间：2013-01-21T10:21:37.250
> 
> 标签：jquery, html, css, click, jquery-events

如何在 jQuery 中获得外部点击和正常字体？当我单击一个元素时，它应该是粗体，直到我单击另一个文本元素。当单击任何元素时，其余元素不应同时为粗体。如何在 Javascript 函数中执行此操作？

**我正在使用的代码 -**

```
$('.muon-no-submenu ').click(function () {
        $(this).addClass("muon_click");
    }); 
```

**班级-**

```
.muon-no-submenu
{
font-weight:bold;
} 
```

即使我单击另一个选项卡，粗体文本仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T10:25:11.000

您的结构的 HTML 会很有帮助。即便如此，我想我明白你想要什么..

从已经（可能）添加的类中删除该类，然后将其添加到被单击的类。假设您的所有选项卡都有类`.muon-no-submenu`：

```
$('.muon-no-submenu ').click(function () {
    $('.muon-no-submenu ').removeClass("muon_click");
    $(this).addClass("muon_click");
}); 
```

这是一个有点相关的[JSFiddle](http://jsfiddle.net/uy7J4/1/)

# objective-c - Holding UIPIcker pauses all app timers

> ID：14436543
> 
> 赞同：0
> 
> 时间：2013-01-21T10:21:39.743
> 
> 标签：objective-c, uipickerview, nstimer

i noticed that when i hold UIPicker on selection, than all my timers pauses.

I have global timer like clock which is executed every second. However when i hold picker it's pauses all timers in app stops.

Maybe some one had this problem and have a solution ?

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:41:54.680

如果你的计时器应该运行而不管你的 UI 中发生了什么，你应该在后台线程上运行它。

当然，计时器会创建自己的后台进程来进行计数。但是如果你在主线程上创建它，那么如果 UI 被阻塞，回调选择器可能会被阻塞，就像持有`UIPickerView`.

只需在全局队列上启动计时器并在主队列上向 UI 发送消息。

# ssrs-2008 - SSRS unusual Pagebreak in a long text

> ID：14436546
> 
> 赞同：0
> 
> 时间：2013-01-21T10:21:47.197
> 
> 标签：ssrs-2008, page-break

i am creating a report for SQL Server 2008. i have a table with some rows. One of the row has a long text which will be displayed. If the text has a certain length, the whole row will be displayed on the second page and the half of the first page is empty. If the text is a bit shorter, the text will be displayed correctly on the first page. If the text is a bit longer, the text will also be displayed correctly (the first part of the text on the first page, the second part on the second page).

I cant find any settings for this problem. Does anyone have a solution?

Thanks Alex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:26:21.533

您可以查看**Tablix**级别的`Keep together on one page if possible`设置。

 **您还可以查看`KeepTogether`行级别和其他级别的属性，例如组。

另一种选择是将要保持在一起的任何对象插入到父**Rectangle**对象中；这将在可能的情况下始终将项目放在一起。**

# vb.net - 如何以编程方式创建 SSIS 执行 SQL 任务？

> ID：14436547
> 
> 赞同：0
> 
> 时间：2013-01-21T10:21:48.193
> 
> 标签：vb.net, ssis

我正在为 SQL server 2008 R2 以编程方式在 vb.net 4.0 版中创建一个 SSIS 包，但我在创建执行 SQL 任务时遇到了困难。该任务的代码如下：

```
 Public Sub CreateExecuteSQLTask()
    Dim TaskHost =  DirectCast(Package.Executables.Add("Microsoft.SqlServer.Dts.Tasks.ExecuteSQLTask.ExecuteSQLTask, Microsoft.SqlServer.SQLTask, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"), Microsoft.SqlServer.Dts.Runtime.TaskHost) 
    TaskHost.Name = "Task"
    TaskHost.Description = "Task Description"
    Dim ExecuteSQLTask As Dts.Tasks.ExecuteSQLTask.ExecuteSQLTask
    ExecuteSQLTask = DirectCast(TaskHost.InnerObject, ExecuteSQLTask)
    ExecuteSQLTask.Connection = DestinationDBConnectionManager.ID
    ExecuteSQLTask.SqlStatementSource = "Select * from Employees"
  End Sub 
```

当上面的代码运行时，将 TaskHost 转换为 Execute SQL 命令时出现以下异常。

> 无法将类型为“System.__ComObject”的 COM 对象转换为类类型“Microsoft.SqlServer.Dts.Tasks.ExecuteSQLTask.ExecuteSQLTask”。表示 COM 组件的类型的实例不能转换为不表示 COM 组件的类型；但是，只要底层 COM 组件支持对接口的 IID 的 QueryInterface 调用，它们就可以转换为接口。

我使用了以下文章作为参考：

[在代码中创建包](http://www.sqlis.com/sqlis/post/Execute-SQL-Task-in-Code.aspx)

请告知我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:08:47.817

我设法解决了这个问题。

```
Dim ExecuteSQLTask As Dts.Tasks.ExecuteSQLTask.ExecuteSQLTask 
```

需要改为

```
Dim ExecuteSQLTask As Dts.Tasks.ExecuteSQLTask.IExecuteSQLTask 
```

正如异常所建议的，COM 组件可以转换为接口。在上述情况下，我将 COM 组件转换为 ExecuteSQLTask 类而不是接口。

我发现转换 COM 组件比通过 XML 设置 SQL 任务的属性要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:14:21.730

[你的问题是.Net 4.0。](http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/a85ec120-eec6-438d-aef4-55f82d14a869?prof=required)或者，更具体地说，ExecuteSQLTask 汇编代码中有一些内容使其与.Net 4.0 不兼容。因此，只需将以下行添加到您的 app.config 文件中：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup>
<runtime>
  <NetFx40_LegacySecurityPolicy enabled="true"/>
</runtime> 
```

它会起作用的。不，我不知道为什么。

# iphone - 如何在目标c中找到数组索引值

> ID：14436549
> 
> 赞同：4
> 
> 时间：2013-01-21T10:21:53.920
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [从 NSArray 获取对象的索引？](https://stackoverflow.com/questions/7398141/getting-index-of-an-object-from-nsarray)

我有一个数组和一个字符串。数组名称是“Array1”，字符串名称是“String”，现在我在“Array1”中有以下值。

```
"array1 = [[NSMutableArray alloc]initWithObjects:@"A",@"b",@"c",@"d",@"e", nil];" 
```

我的字符串值为**“A”**

现在我想比较这些字符串和数组。我想显示数组索引值。

我怎样才能做到这一点。请有人帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T10:24:14.217

我不确定这是否是您正在寻找的，但也许：

```
int index = [array1 indexOfObject:String]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-21T10:26:45.667

```
int i;
for (i = 0; i < [myArray count]; i++) {
  id myArrayElement = [myArray objectAtIndex:i];
...do something useful with myArrayElement
 }` 
```

您可以迭代 NSMutableArray 并找到特定对象使用的位置

```
 int indexValue = [myArray indexOfObject:yourString]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T10:25:00.357

试试这个，

```
if([array1 containsObject: yourString])
{
   int index = [array1 indexOfObject:yourString];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T10:24:40.140

采用

```
NSString *String=@"A";
NSInteger index = [array1 indexOfObject:String]; 
```

**注意：永远不要使用大写的变量名`String`，它应该是`string`。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T11:08:53.060

检查

```
int index = [yourArray indexOfObject:yourObject]; 
```

`NSString`对于对象和一些其他类型的对象是正确的。

当您自己实现了一个类并且想要获取数组中对象的索引时，您必须实现该方法

```
- (BOOL)isEqual:(id)anObject 
```

# c - 使用c访问链接本地地址

> ID：14436550
> 
> 赞同：1
> 
> 时间：2013-01-21T10:21:55.227
> 
> 标签：c, sockets, networking, network-programming

我正在开发一个使用 C 构建的 IPv6 网络应用程序。

现在根据我的要求，我需要用系统的链接本地地址填充我的数据包的默认地址。

是否有任何功能/库可用于此`glibc`目的。

我知道我可以使用`system`命令并运行可以`ifcfg-eth0`从系统访问的脚本来执行此操作，但我想这不可见。

我对所有这些套接字的东西都很陌生，所以如果遗漏了一些琐碎的东西，请原谅。

**编辑 ：**

操作系统：Linux

`sendip`这实际上是一个使用原始 C 套接字编程构建的开源实现。现在，我正在修改它。符合我的要求。

[http://snad.ncsl.nist.gov/ipv6/sendip.html](http://snad.ncsl.nist.gov/ipv6/sendip.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:59:52.437

我想通了.....其实我没有，这个博客是真正帮助我的博客。我非常感谢他的建议。

[http://valileo-valilei.blogspot.in/2010/09/getting-link-local-addres-from.html](http://valileo-valilei.blogspot.in/2010/09/getting-link-local-addres-from.html)

这是一个实现：（我在这里提供代码，因为它可以帮助许多可能陷入类似情况的其他人）

**代码：**

```
 #include "sys/types.h"
 #include "ifaddrs.h"
 #include <arpa/inet.h>
 #include <stdio.h>
 #include <malloc.h>
 #include <string.h>

 int get_link_local_addr(char* if_name, int if_name_length, 
                      struct sockaddr_in6 *ip) {

    struct ifaddrs *ifaddr, *ifa;
    int ret = -2;

    if (getifaddrs(&ifaddr) == -1) {
            perror("getifaddrs");
            ret = -1;
            freeifaddrs(ifaddr);
            return ret;
    }

    for (ifa = ifaddr; ifa != NULL; ifa = ifa->ifa_next) {
            if (ifa->ifa_addr->sa_family != AF_INET6) continue;

            if (strncmp(ifa->ifa_name, if_name, if_name_length)) continue;

            struct sockaddr_in6 *current_addr =
                                    (struct sockaddr_in6 *) ifa->ifa_addr;

            if (!IN6_IS_ADDR_LINKLOCAL(&(current_addr->sin6_addr))) continue;

            memcpy(ip, current_addr, sizeof(*current_addr));
            ret = 0;
    }

    freeifaddrs(ifaddr);
    return ret;
  }

  int main() {

  struct sockaddr_in6 *sa=(struct sockaddr_in6 *)malloc(40);
  char *src,dst[INET6_ADDRSTRLEN];

  get_link_local_addr("wlan0",5,sa);

  inet_ntop(AF_INET6, &(sa->sin6_addr), dst, INET6_ADDRSTRLEN);

  printf("Link Layer Address is : %s\n",dst);

  return 0;

 } 
```

**输出：**

`Link Layer Address is : fe80::d2df:9aff:fe56:917d`

**在命令行上进行交叉检查：**

```
 $ ifconfig wlan0
  wlan0
      Link encap:Ethernet  HWaddr d0:df:9a:56:91:7d  
      inet addr:172.31.9.171  Bcast:172.31.255.255  Mask:255.255.0.0
      inet6 addr: 2001:df0:92:0:d2df:9aff:fe56:917d/64 Scope:Global
      inet6 addr: fe80::d2df:9aff:fe56:917d/64 Scope:Link
      inet6 addr: 2001:df0:92:0:50df:d286:a281:e6c0/64 Scope:Global
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:217235 errors:0 dropped:0 overruns:0 frame:0
      TX packets:21173 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:31550379 (31.5 MB)  TX bytes:4062945 (4.0 MB) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:30:03.463

如果你有一个 IPv6 应用程序，那么你就有一个 IPv6 API（套接字或其他东西）。

此 API 应该具有获取系统的链接本地地址的功能。

谨防多宿主。

# javascript - $.ajax async:false 在 IE 和 Firefox 中不起作用，在 Chrome/Safari 中起作用

> ID：14436551
> 
> 赞同：5
> 
> 时间：2013-01-21T10:22:00.337
> 
> 标签：javascript, ajax, jquery, asynchronous

我正在尝试使用 ajax 调用来测量下载速度。这是我的代码

```
var start = new Date();
$.ajax ({
    url: 'https://www.example.com/perftest/dummyFile1024',
    cache: false,  
    success : function() {
        var total = (new Date() - start)
        alert(total)    
    },
    error : function(jqxhr, status, ex) {}
}) 
```

它不会等到整个文件加载完毕。当我添加`async: false,`它时，它会等待加载整个文件，并且我可以在 chrome 和 safari 上测量带宽，但是 Internet Explorer 和 Firefox 仍然可以正常工作，因为`async: true,`它们不会等到整个文件加载完毕。你知道我如何管理它也适用于 IE 和 firefox 吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:24:00.080

IE 8/9 跨域请求要求 jQuery 使用不同的传输方法，该方法使用 XDomainRequest 而不是默认的 XmlHttpRequest。

我相信这个问题已经在这里得到了回答：[问题]：[在 IE8/9 中使用 jQuery 和 XDomainRequest 的 CORS](https://stackoverflow.com/questions/11487216/cors-with-jquery-and-xdomainrequest-in-ie8-9)

对于 FireFox，尝试设置 $.ajax 请求返回的内容的“dataType”。

# javascript - 我怎么知道 HTML 的代码正在换行？

> ID：14436553
> 
> 赞同：-2
> 
> 时间：2013-01-21T10:22:09.817
> 
> 标签：javascript, html, xml

**我的代码：**

```
<div id="box">
    <p>
        123
    </p>
    <p>
        abc
    </p>
</div>
<script>
    var html = document.getElementById("box").innerHTML;
    for (var i = 0, len = html.length; i < len; i++) {
        var word = html.charAt(i)
        alert("_" + word + "_" + i)  //Attention!!      when the "i" == 0
        if (i == 0) {
            alert(word==" ")        // it is false.....
        }
    }
</script> 
```

使用 API : "chatAt" , 怎么写 我可以知道 HTML 的代码正在换行.....(word == what????)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:24:17.573

是你要找的吗？

```
var html = document.getElementById("box").innerHTML;
for (var i = 0, len = html.length; i < len; i++) {
    if (html[i] === "\n") {
        // new line
    }
} 
```

# java - 使用 java 代码显示、检查和启动 linux 进程

> ID：14436560
> 
> 赞同：2
> 
> 时间：2013-01-21T10:22:21.913
> 
> 标签：java, linux

我正在开发一个应用程序，它显示 linux 中正在运行的进程，如果任何进程没有运行，则启动该进程。所有的动作都应该通过触发 linux 命令来执行。还要创建一个日志文本文件并将日志插入数据库的 processlog 表中。

首选 Java 代码示例。请加急。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:26:03.777

`ProcessBuilder`正是您所需要的。看看文档 -

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

# php - 将 Duplicatable Form 的 JSON 数据解析为 PHP for Mail

> ID：14436562
> 
> 赞同：0
> 
> 时间：2013-01-21T10:22:30.767
> 
> 标签：php, jquery, json

我有一个表单，其中有可重复的字段，它会生成以下 JSON 数据：

```
{
    "mainmember": [
        {
            "name": "testtest",
            "surname": "test",
            "id": "8509295266086",
            "age": "27",
            "gender": "Male",
            "townofbirth": "george",
            "email": "test@test.com",
            "contact": "0112121211",
            "passport": "1111111111111",
            "postal": "grjiubrwg",
            "postal_code": "0010",
            "residential": "tytyytyttyytyt",
            "residential_code": "4422"
        }
    ],
    "dependant1": [
        {
            "name": "testDUP",
            "surname": "testDUP",
            "id": "4802235040081",
            "age": "64",
            "gender": "Male",
            "townofbirth": "tehjte",
            "cell": "4774811845",
            "email": "testDUP",
            "passport": "8202255133088",
            "relationship": "spouse"
        }
    ],
    "dependant2": [
        {
            "name": "testDUP2",
            "surname": "testDUP2",
            "id": "1111111111111",
            "age": "45",
            "gender": "F",
            "townofbirth": "knysnasw",
            "cell": "0000000000",
            "email": "testDUP2",
            "passport": "2222222222222",
            "relationship": "inlaw"
        }
    ]
} 
```

现在可重复字段是依赖项，在此 JSON 中有 2 个依赖项，但在重复时，它会增加到“dependant3、dependant4、dependant5”。

目前，当我提交并发送到 PHP 时，我可以计算依赖项：

```
 <?php
$json = $_POST['parameters'];
$json_string = stripslashes($json);
$data = json_decode($json_string, true);

$datasetCount = count($data); // returns count of array items of any array
echo "<h1>There are $datasetCount Dependants</h1>";

$i = 0;
foreach ($data as $each_dep) {
    $i++;
    echo "<h2>Dependant $i</h2>";
    while (list($key, $value) = each ($each_dep)) {

        echo "$key: $value<br />";

    }

}

?> 
```

和我正在使用的 jQuery 发送函数：

```
jQuery('#submit').click(function(){
    jQuery('div[class*="mainmember"]').each(function(k, v){
        mainmember = {};
        mainmember['id'] = ''; 
        $(v).find('.id').each(function(){
          mainmember['id'] += $(this).val(); 
        });
        mainmember['age'] = ''; 
        $(v).find('.age').each(function(){
          mainmember['age'] += $(this).val(); 
        });
        mainmember['gender'] = $(v).find('.gender').val();
        result['mainmember'] = [mainmember];

    });
    jQuery('div[class*="dependant"]').each(function(k, v){
        dep_counter++
        dependants = {};
        result['dependant'+dep_counter] = [dependants];
        dependants['id'] = ''; 
        $(v).find('.id').each(function(){
          dependants['id'] += $(this).val(); 
        });
        dependants['age'] = ''; 
        $(v).find('.age').each(function(){
          dependants['age'] += $(this).val(); 
        });
        dependants['gender'] = $(v).find('.gender').val();
    });
    var jsonData = JSON.stringify(result);

    console.log(jsonData);
}); 
```

我只是无法获取其他数据，例如姓名、姓氏等。我需要将其解析为电子邮件：

主要成员：详情

依赖2：细节

依赖3：细节

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:41:58.013

您的 json 结构非常痛苦，您似乎正在创建单个对象的数组。相反，您应该拥有对象数组或键引用的单个对象。

理想情况下，对于您的结构，我认为您应该有一个对象数组作为依赖对象，一个对象作为主要成员，如下所示：

```
{
    "mainmember": {
        "name": "test2",
        "id": "1111111111111",
        "age": "45",
        "gender": "M",
        "townofbirth": "knysna",
        "email": "tjyrrtjhe",
        "contact": "1111111111",
        "passport": "5555555555555",
        "postal": "yrtjyt",
        "postal_code": "1101",
        "residential": "tkyutk",
        "residential_code": "5555"
    },
    "dependants": [
        {
            "name": "dtjtet",
            "surname": "grwwr",
            "id": "1111222222222",
            "age": "48",
            "gender": "F",
            "townofbirth": "knmysn",
            "cell": "0045128588",
            "email": "fae@gmail.COM",
            "passport": "1212112111111",
            "relationship": "spouse"
        },
        {
            "name": "dtjtet2",
            "surname": "grwwr2",
            "id": "11112222222222",
            "age": "44",
            "gender": "M",
            "townofbirth": "knmysn",
            "cell": "0045128588",
            "email": "fae@gmail.COM",
            "passport": "1212112111111",
            "relationship": "spouse"
        }
    ]
} 
```

这样，您就有了一个“主要成员”对象和一组依赖项。

然后使用如下的 php 代码，您可以打印它的详细信息：

```
<?php
function printMember($member) {
    foreach($member as $key=>$value) {
        echo "$key : $value <br />";
    }
}

$json = $_POST['parameters'];
$json_string = stripslashes($json);
$data = json_decode($json_string, true);

$depCount = count($data["dependants"]);
echo "<h1>There are $depCount Dependants</h1>";

echo "<h2>Main member data:</h2>";
printMember($data["mainmember"]);

foreach ($data["dependants"] as $index => $dependant) {

    echo "<h2>Dependant $index</h2>";
    printMember($dependant);

} 
```

要在 jquery 代码中创建正确的 json 结构，如下所示：

```
jQuery('#submit').click(function(){
    jQuery('div[class*="mainmember"]').each(function(k, v){
        mainmember = {};
        mainmember['id'] = ''; 
        $(v).find('.id').each(function(){
          mainmember['id'] += $(this).val(); 
        });
        mainmember['age'] = ''; 
        $(v).find('.age').each(function(){
          mainmember['age'] += $(this).val(); 
        });
        mainmember['gender'] = $(v).find('.gender').val();
        //This is changed: Remove the [] from around the mainmember, 
        //should be a single object not an array
        result['mainmember'] = mainmember;

    });

    //create the array of dependants
    result['dependants'] = [];
    jQuery('div[class*="dependant"]').each(function(k, v){
        dependant = {};
        dependant['id'] = ''; 
        $(v).find('.id').each(function(){
          dependant['id'] += $(this).val(); 
        });
        dependant['age'] = ''; 
        $(v).find('.age').each(function(){
          dependant['age'] += $(this).val(); 
        });
        dependant['gender'] = $(v).find('.gender').val();

        //add the dependant to the array
        result['dependants'].push(dependant);
    });
    var jsonData = JSON.stringify(result);

    console.log(jsonData);
}); 
```

这是未经测试的，但应该可以帮助您继续。您的问题是因为您使用的是单个对象的数组而不是对象本身。

# c# - .Net 并行 WaitAll()

> ID：14436565
> 
> 赞同：3
> 
> 时间：2013-01-21T10:22:51.737
> 
> 标签：c#, .net, parallel-processing

我的代码中有一种情况，我开始未知数量的任务并想使用`Task.WaitAll()`.

像这样的东西：

```
if (condition) 
{ 
    var task1 = Task.Factory.StartNew (call the web service1...);
} 

if (condition) 
{ 
    var task2 = Task.Factory.StartNew (call the web service2...);
}

if (condition) 
{ 
    var task3 = Task.Factory.StartNew (call the web service3...); 
}

Task.WaitAll(task1, task2, task3); 
```

问题是我不能说

```
Task.WaitAll(task1, task2 , task3) 
```

因为我不知道其中哪一个会真正开始。任何想法的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:28:18.407

您可以使用任务列表并将您的任务动态添加到列表中：

```
var tasks = new List<Task>();

if (condition) 
{ 
    var task = Task.Factory.StartNew (call the web service1...);
    tasks.Add(task);
} 

if (condition) 
{ 
    var task2 = Task.Factory.StartNew (call the web service2...);
     tasks.Add(task2);
}

if (condition) { 
    var task3 = Task.Factory.StartNew (call the web service3...); 
    tasks.Add(task3);
}

Task.WaitAll(tasks.ToArray()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T10:27:36.077

创建一个实际开始的任务列表并执行`Task.WaitAll(taskList.ToArray())`

```
if(condition)
{
    var task1 = Task.Factory.StartNew (call the web service1...);
    taskList.Add(task1);
}
// etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:28:12.357

一般可以将任务列表保存到List(tasks)中，使用如下代码：

```
 Task.WaitAll(tasks.ToArray()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:28:33.040

请参阅[如何：等待一项或多项任务完成](http://msdn.microsoft.com/en-us/library/dd537610.aspx)。您可以等待一个 s 数组`Task`。

# c# - 查找最左|最右位集的索引的高效按位运算

> ID：14436572
> 
> 赞同：0
> 
> 时间：2013-01-21T10:23:27.207
> 
> 标签：c#, bit-manipulation, performance

在`C++`我可以使用编译器特定的内部函数来查找最左|最右位集，如this [thread](https://stackoverflow.com/questions/9093323/efficient-bitwise-operations-for-counting-bits-or-find-the-rightleft-most-ones)所示。

里面有没有类似的`C#`？或者我需要遍历所有位来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T10:54:24.667

干得好。[从这里改编的实现](http://aggregate.org/MAGIC/)。

```
// Implementation of Least|Most SigBitSet from http://aggregate.org/MAGIC/

using System;

namespace Demo
{
    internal class Program
    {
        private static void Main()
        {
            int value = 0x0ff0; // 0000111111110000

            Console.WriteLine(LeastSigBitSet(value).ToString("x")); // 0x0010
            Console.WriteLine(MostSigBitSet(value).ToString("x"));  // 0x0800
        }

        public static int LeastSigBitSet(int value)
        {
            return (value & -value);
        }

        public static int MostSigBitSet(int value)
        {
            value |= (value >> 1);
            value |= (value >> 2);
            value |= (value >> 4);
            value |= (value >> 8);
            value |= (value >> 16);

            return (value & ~(value >> 1));
        }
    }
} 
```

还有 unsigned int 版本（可能是您想要的版本）：

```
using System;

namespace Demo
{
    internal class Program
    {
        private static void Main()
        {
            uint value = 0x00ffff00; // 00000000111111111111111100000000

            Console.WriteLine(LeastSigBitSet(value).ToString("x")); // 0x0000100
            Console.WriteLine(MostSigBitSet(value).ToString("x"));  // 0x0800000
        }

        public static uint LeastSigBitSet(uint value)
        {
            return (value & 0u-value);
        }

        public static uint MostSigBitSet(uint value)
        {
            value |= (value >> 1);
            value |= (value >> 2);
            value |= (value >> 4);
            value |= (value >> 8);
            value |= (value >> 16);

            return (value & ~(value >> 1));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:29:05.043

对于 ffs 之类的东西，无法访问特定于编译器的“内置”指令。您必须使用位掩码和移位操作等常规代码实现。但是，这并不一定意味着您需要遍历所有位：其中许多方法都有一些可怕的“常规”实现，疯狂地“添加一些不明显的奇异常量”，旨在删除大部分分支和迭代，这在 C# 中会非常好。如果您移植其中之一，要记住的主要事情是知道它是使用“有符号”还是“无符号”右移；如果它使用“签名”使用`int`（等）；如果它是“未签名的”，请使用`uint`（等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-12T01:52:00.120

这里有很多人有复杂的解决方案......他说“高效”，所以如果他们能为你解决问题，我会选择这些。

```
lsb=i&-i;
msb=(int)(((double)i >> 20) - 1023); 
```

# html - Encapsulated div positioning

> ID：14436575
> 
> 赞同：1
> 
> 时间：2013-01-21T10:23:32.903
> 
> 标签：html, css

I want to achieve the following effect using HTML & CSS:

* * *

## Printscreen

![enter image description here](../Images/ae7ebd7294e8deafc63f8b53a3aa3c81.png)

* * *

However, I'm not sure if I'm doing it correctly.
The current state is the following:

```
<div class="post"><!-- Posts are just divs with a white background -->
    <div class="post-header">
        <div class="left">Som Text</div>

        <div class="center">
            <img src="pseudo" class="center" />
        </div>

        <div class="right">Som Text</div>
    </div>

    <p class="title">Som Text</p>
</div> 
```

Then, I'm simply doing a `margin-top:-66px;` on `div.post div.post-header`.
This is probably not what one should do.

Can you give me an idea on how to approach this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:32:50.983

您也可以尝试与位置相关的事情，为此将`post`课程`position:relative`和其他课程`position:absolute`设置为您想要的位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:28:21.480

打印屏幕或只是 margin-top 属性不会有任何好处，因为屏幕截图也不会显示在这里。你能给我链接以查看页面的实时预览吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:28:13.133

我在我的网站上做了类似的事情。欢迎访问[http://robertfauver.com/](http://robertfauver.com/)

# grails - 更改分页部分中显示项目的计数

> ID：14436579
> 
> 赞同：2
> 
> 时间：2013-01-21T10:23:41.750
> 
> 标签：grails, pagination

有什么方法可以改变用户在 grails 2x 中将 bean 显示到分页部分的计数吗？我在 grails 文档中找不到这个。这意味着类似（参见 itemsPerPage）

```
<g:paginate total="${beanInstanceTotal}" itemsPerPage="[10,20,50]" .../> 
```

我认为这是分页的明显功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:34:28.450

检查`max`g:paginate 中的参数。

来自[文档](http://grails.org/doc/latest/ref/Tags/paginate.html)：
*max（可选）- 每页显示的记录数（默认为 10）。仅在 params.max 为空时使用*

然后，您可以`params.max`在控制器中解析并将其传递给查询。

**编辑：**
对不起，我误解了你的问题。`<g:paginate>`您描述的组合框在默认标签中不可用。我在我的应用程序中遇到了同样的问题，并使用了很棒的[远程分页插件](http://grails.org/plugin/remote-pagination)实现了选择项。[文档](https://github.com/amitjain1982/remote-pagination)中描述了用法。

```
<util:remotePaginate controller="book" action="filter" total="${Book.count()}" update="listTemplateDivId"
              max="20" pageSizes="[10:'10 Per Page', 20: '20 Per Page', 50:'50 Per Page',100:'100 Per Page']"/> 
```

# ios - scrollViewDidEndScrollingAnimation not getting called

> ID：14436582
> 
> 赞同：2
> 
> 时间：2013-01-21T10:23:57.173
> 
> 标签：ios, uiscrollview

I want to perform some action when `scrollview` finish scrolling, so I wrote that acton in `scrollViewDidEndScrollingAnimation` delegate method. It is working fine when rect is not visible and scrollview scrolls to new rect. But when rect is already visible `scrollViewDidEndScrollingAnimation` method will not be called and so the method written inside `scrollViewDidEndScrollingAnimation` will not get called. But I want to call that action, can anyone knows how to call that method when scrollview finish scrolling?

Thanks in advance!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T17:10:06.190

我认为这个抓住了几个人。实际发生的情况是，`scrollViewDidEndScrollingAnimation`仅当您显式调用 the`setContentOffset:animated:`或`scrollRectToVisible:animated:`方法时才会调用它。

正如[UIScrollViewDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)所述：

> **讨论**
> 滚动视图在 setContentOffset:animated: 和 scrollRectToVisible:animated: 方法的实现结束时调用此方法，*但仅在请求动画时才*调用。

那么该怎么办？好吧，我们不要忘记滚动视图中内容数据的偏移通常不是动画的。相反，它是不断更新`contentOffset`值的结果。因此，您可能会根据`contentOffset`使用`scrollViewDidScroll:`委托方法的特定来触发您的方法。

或者，如果在每个滚动手势之后都要做一些事情 - 特别是在私人之后`UIScrollViewPanGestureRecognizer`- 那么你可以这样做`scrollViewDidEndDecelerating:`：

> **讨论*****当滚动停止时，***
> 滚动视图调用这个方法。UIScrollView 的 decelerating 属性控制减速。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-21T14:45:49.990

同时实施`scrollViewDidEndDecelerating:`和`scrollViewDidEndDragging:`

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    // User lifted finger while scrolling
    [self doPostScrollAction];
}

-(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if(!decelerate)
    {
        // User lifted finger after stopping scrolling
        [self doPostScrollAction];
    }
} 
```*

# android - Open email attachment with my app

> ID：14436584
> 
> 赞同：0
> 
> 时间：2013-01-21T10:23:58.423
> 
> 标签：android, attachment, intentfilter

I would like to open email attachments with my app. I added that to my manifest file:

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data
                android:host="*"
                android:mimeType="*/*"
                android:pathPattern=".*.pdf" />
        </intent-filter> 
```

but when I click the attachment to open it from the email app I got permission denial error while starting intent. I tried also add to the manifest that:

```
<uses-permission android:name="com.android.email.permission.READ_ATTACHMENT"/>
<uses-permission android:name="com.android.email.permission.ACCESS_PROVIDER"/> 
```

but it didn't help either. I tested on the android 2.3.3 and 4.1.2. Is there something I forgot?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:50:29.803

那是我的错误。我没有注意到，但我在导出的清单文件中设置为 false。

# django - pass data from database in httpresponse redirect

> ID：14436591
> 
> 赞同：0
> 
> 时间：2013-01-21T10:24:22.050
> 
> 标签：django, forms, redirect

Am new to django framework,am just trying to create seperate login form other than administrator login.I need to authenticate a user using username and password, fetch the details of that user from database and pass that data to a templae (home page) to display it.

My code is as follows:-

view.py:-

```
def login_user(request):
user = ''
passw = ''
username1 = ''

if request.POST:
    user = request.POST.get('username')
    passw = request.POST.get('password')
    #password1 = ''
    try:
        userdata = Employee.objects.get(username = user, password = passw)
        user_id = request.session["user_id"] = userdata.id
        employee_details = Employee.objects.get(id=user_id)
        request.session['user_id'] = employee_details.id
        return HttpResponseRedirect('/home/', kwargs={'user_id': employee_details.id}))
    except Employee.DoesNotExist:
        state = "Username or password incorrect !"
        return render_to_response('login.html',
            {'username' : username1,'state' : state},
            context_instance = RequestContext(request))
else:
    state = "Please login here:"
    return render_to_response('login.html' , {'state' : state} ,
         context_instance = RequestContext(request)) 
```

i tried using kwargs={'user_id': employee_details.id} but it is not working.How can i pass datas to home page after redirecting?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:30:36.343

您不能使用`POST`请求重定向用户。改用`GET`参数。

在您的情况下，请求的数据已经存储在会话中。只需尝试在下一个请求时从会话中读取。Django`contrib.auth`使用`user.is_authenticated`方法来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:31:49.027

> 我尝试使用 kwargs={'user_id': employee_details.id} 但它不起作用。重定向后如何将数据传递到主页？

你可以：

1.  使用[会话变量](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs)
2.  使用“get”变量（传递在 URL 中编码的变量，`'/home/?a=1&b=2'`如[urllib.urlencode](http://docs.python.org/2/library/urllib.html)）

但是，您应该使用[标准的 Django 用户相关功能和方法](https://docs.djangoproject.com/en/dev/topics/auth/)。请参阅“[如何登录用户](https://docs.djangoproject.com/en/dev/topics/auth/default/#how-to-log-a-user-in)”。TLDR：

1.  检查凭据：`user = authenticate(username=username, password=password)`
2.  测试用户是否不是 None 以及您想要的任何其他测试（他是否活跃，有一些特权等）
3.  将 request.user 标记为已通过身份验证：`login(request, user)`

# spring - 是否可以通过spring mvc中的POST方法使用模型返回参数？

> ID：14436592
> 
> 赞同：0
> 
> 时间：2013-01-21T10:24:26.120
> 
> 标签：spring, jakarta-ee, spring-mvc

假设我们的 spring mvc Controller 方法中有以下代码：

```
boolean jobKilled = true;
model.addAttribute("jobKilled", jobKilled);
return "redirect:/{username}/jobs"; 
```

现在，以这种方式重定向用户网址后：

```
localhost:8080/Project/{username}/jobs?jobKilled=true 
```

如果我不希望在重定向后显示参数部分 (?jobKilled=true) 并且我能够在我的 jsp 中获取模型怎么办？

是否有可能我使用 post & fetch 将模型发送回我的 jsp 中的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:57:06.030

看一下spring-mvc中的[flash属性](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-flash-attributes)。我认为它是为您的用例而设计的。

# javascript - How to detect "enter-key press in input clicks next button" behavior using JavaScript in IE 8-10

> ID：14436595
> 
> 赞同：3
> 
> 时间：2013-01-21T10:24:32.197
> 
> 标签：javascript, jquery, html, internet-explorer

I am trying to "feature detect" IE's behavior when pressing enter in an input box that has a button element next to it (when they are not in a form element).

I'm saying IE's behavior because no one else fires a click event on the next button when pressing the enter-key while the input is focused.

Related question where the first awnser describes why IE behaves like this: [IE bug triggers click for 2 buttons?](https://stackoverflow.com/questions/10739525/ie-bug-triggers-click-for-2-buttons)

JS-Fiddle where I try to simulate the key press via jQuery.Event and .trigger: [http://jsfiddle.net/DbVrn/](http://jsfiddle.net/DbVrn/)

Behavior of said js-fiddle in IE:

*   When opening the page, the input gets focus, and then we try to simulate pressing of the enter-key.
*   The simulated enter-key does nothing, hence the input remains focused and red.
*   If you manually press enter while the input is focused, the button will become focused and green.

The problem i have with my current attempt to detect this feature is that:

```
$("input").trigger(jQuery.Event("keypress", { which: 13 })); 
```

does not actually do the same as manually pressing the enter-key while the input is focused.

How can I successfully simulate the enter-key so that my test for this behavior is possible? Or is there another way i can test for this behavior?

**Edit:** Updated title to more clearly state that this needs to be tested via javascript, and that the test needs to work in IE from version 8 to 10\. Unless anyone else can provide a way of testing this, I will conclude that I need to use user-agent sniffing to see if browser is IE and choose code-path based off that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:29:17.333

似乎没有办法通过 JavaScript 测试这种行为。我已经测试了 IE 8、9 和 10 并确认它们都以这种方式运行。

所以现在，我将结合 [Javascript IE 检测的一些想法，为什么不使用简单的条件注释呢？](https://stackoverflow.com/questions/4169160/)和 [http://tanalin.com/en/articles/ie-version-js/](http://tanalin.com/en/articles/ie-version-js/)为 IE 创建一个测试，只要 IE 不删除对条件编译注释的支持，它就会可靠地工作。

```
var ie = (/*@cc_on!@*/false && (function(){
    var div = document.createElement("div"),
        list = div.getElementsByTagName("br"),
        version = 3;
    do {
        div.innerHTML = "<!--[if gt IE " + (++version) + "]><br><![endif]-->";
    } while(list[0]);
    return (version > 4 ? version : 10);
}())); 
```

该`ie`变量将是 Internet Explorer 中的浏览器版本，并将`false`在其他浏览器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:47:21.677

无论是使用 jQuery 的 trigger 方法还是使用本机方法，都可以按照您想要的方式模拟按键。真实和模拟的按键都可以被捕获，但模拟的按键不会触发由真实按键引起的整个事件处理程序链。将这条线放在触发器上方很容易证明这一点

```
$("input").keypress(function(event) { alert(event.which); }); 
```

如您所见，无论是模拟按键还是真实按键，捕获都可以正常工作，而这两种按键的处理方式之间的差异显然仍然存在。

你用你的按键事件对象做什么也没关系。您可以添加一个 keyCode，IE 中真正的按键具有，但这不会改变这一点。似乎什么都不会。不幸的是，我找不到任何解释原因的文档，尽管这个问题已经存在了一段时间

[http://forums.asp.net/t/1478871.aspx/1](http://forums.asp.net/t/1478871.aspx/1)

所以在浏览器中似乎没有办法。你必须从外面做。您可以为此使用 InternetExplorerDriver 之类的东西。

我建议简单地记录哪些用户代理具有此“功能”，而不是功能检测。由于微软通常在向后兼容性方面非常弯曲，因此他们不太可能在未来版本中更改输入字段上的 enter 按键的行为。

[http://code.google.com/p/selenium/wiki/InternetExplorerDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

**模拟改变输入/文本区域字段的按键**

使用 TextEvent 方法可以在某些浏览器（例如 chrome）中将文本（包括换行符）发送到输入或 textarea 字段，但这在 IE 版本 10 之前的任何版本中都不起作用，如下面的小提琴所示：

[http://jsfiddle.net/qz7kV/1/](http://jsfiddle.net/qz7kV/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:31:06.580

我看不到仅从 JavaScript 触发错误的可靠方法。您还有其他几种选择：

1.  在VM中安装IE并使用UI机器人驱动测试。这需要付出很多努力，但会可靠地触发错误。

2.  有些公司提供远程测试；他们使用 SSH 隧道访问您身边的服务器，并且可以针对许多不同版本的 IE 测试您的站点。这在技术上很容易设置，但由于公司政策、FUD 和政治的原因，可能很难实现。谷歌“使用多种不同浏览器的测试网站”

3.  手动测试一次，当它工作时，编写一个测试用例来检查代码是否存在（即当 JavaScript 文件或页面源不包含某个固定字符串时测试失败）。优点：很容易设置，缺点：容易坏

4.  只需测试一次，然后依靠惯性（即多年来没有人会触及该代码）。

# c - Why does getchar() recognize EOF only in the beginning of a line?

> ID：14436596
> 
> 赞同：6
> 
> 时间：2013-01-21T10:24:33.790
> 
> 标签：c, eof

This example is from the K&R book

```
#include<stdio.h>

main()
{
    long nc;

    nc = 0;
    while(getchar() != EOF)
        ++nc;
    printf("%ld\n", nc);
} 
```

![enter image description here](../Images/e942f1a7f18ca4bcded94183243e68ac.png)

Could you explain me why it works that way. Thanks.

^Z^Z doesn't work either (unless it's in the beginning of a line)

![enter image description here](../Images/794b423d288183d5d4bd681242e23757.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:00:17.027

传统的 UNIX 对 tty 字符的解释是在读取熟 tty 行缓冲区中缓冲的任何内容后`EOF`使阻塞返回。`read`在新行的开头，这意味着`read`返回 0（读取零字节），顺便提一下，0-sized`read`是如何检测普通文件的文件结束条件。

这就是为什么行中间的*第* `EOF`一个只是强制行的开头是`read`，而不是让 C 运行时库检测到文件的结尾。*一行中的两个* `EOF`字符会产生 0 大小的读取，因为第二个字符会强制`read`应用程序使用空缓冲区。

```
$ cat
foo[press ^D]foo <=== after ^D, input printed back before EOL, despite cooked mode. No EOF detected
foo[press ^D]foo[press ^D] <=== after first ^D, input printed back, and on second ^D, cat detects EOF

$ cat
Some first line<CR> <=== input
Some first line <=== the line is read and printed
[press ^D] <=== at line start, ^D forces 0-sized read to happen, cat detects EOF 
```

我假设您的 C 运行时库模仿了上述语义（在 Windows 上没有调用`^Z`级别的特殊处理`kernel32`，更不用说系统调用了）。这就是为什么它可能会`^Z^Z`在输入行中间检测到 EOF 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:25:09.923

`EOF`该程序将仅在输入的实际结束时读取。如果您的终端/OS/whatever 只允许文件在行首结束，那么您可以在此处找到它们。我相信这是对老式终端的回归，其中数据一次只传输一行（据我所知，它可以追溯到打孔卡阅读器）。

尝试从预先准备好的 EOF 中线文件中读取数据。您甚至可能会发现某些编辑器使这变得困难！作为输入，您的程序应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:57:52.947

[EOF](http://en.wikipedia.org/wiki/End-of-file)表示“文件结束”。换行符（当您按下回车键时会发生这种情况）不是文件的结尾，而是行的结尾，因此换行符不会终止此循环。

根据操作系统，`EOF`字符只有在它是一行的第一个字符时才有效，即 . 之后的第一个字符`Enter`。由于控制台输入通常是面向行的，因此系统也可能无法识别`EOF`字符，直到您使用`Enter`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:00:45.447

我碰巧和你有同样的问题。当我想结束函数`getchar()`时，我必须输入 2`EOF`或输入 a`<ENTER>`加 a `EOF`。

这是我搜索的关于这个问题的一个更简单的答案：

> 如果终端有字符进入，EOF会起到停止这个进入的作用，引起新的进入；而如果没有输入发生，或者换句话说，当 getchar() 正在等待新的输入时（例如您刚刚完成输入或 EOF），您现在要输入的 EOF 等于“结束文件”，这将导致程序停止执行函数 getchar()。

PS：问题发生在您使用`getchar()`. 我认为这个答案更容易理解，但可能不适合你，因为它是从中文翻译过来的......

# c# - Protobuf-net object reference deserialization using Dictionary: A reference-tracked object changed reference during deserialization

> ID：14436606
> 
> 赞同：9
> 
> 时间：2013-01-21T10:25:17.913
> 
> 标签：c#, serialization, protobuf-net

我在尝试使用 protobuf-net 序列化/反序列化复杂对象图时遇到一些问题。

我正在开发一个遗留应用程序，我们正在使用 .Net Remoting 将 GUI 客户端连接到 C# 服务。由于我们使用默认值的对象图的序列化大小，我们看到海外用户的性能很差`BinaryFormatter`，而客户端和服务器之间的有限带宽 (1Mbit/s) 加剧了这种情况。

作为一个快速的胜利，我想我会整理一个概念证明，看看使用 protobuf-net 是否有任何性能提升，通过实现`ISerializable`. 在我进行测试时，我遇到了一个没有维护对象引用的问题。

我已经整理了一个可以重现该问题的示例。我期望`Dictionary`(Items[1]) 中的对象和对象 BA 将与我 `AsReference=true`在`ProtoMember`属性中指定的相同。

使用`protobuf-net 2.0.0.619`，我看到反序列化时抛出异常（反序列化期间引用跟踪的对象更改了引用）。

如果这不是受支持的方案，请告诉我。

测试

```
[Test]
public void AreObjectReferencesSameAfterDeserialization()
{
    A a = new A();
    B b = new B();

    b.A = a;

    b.Items.Add(1, a);

    Assert.AreSame(a, b.A);
    Assert.AreSame(b.A, b.Items[1]);

    B deserializedB;

    using (var stream = new MemoryStream())
    {
        Serializer.Serialize(stream, b);
        stream.Seek(0, SeekOrigin.Begin);
        deserializedB = Serializer.Deserialize<B>(stream);
    }

    Assert.AreSame(deserializedB.A, deserializedB.Items[1]);
} 
```

类定义

```
[Serializable]
[ProtoContract]
public class A
{
}

[Serializable]
[ProtoContract]
public class B
{
    [ProtoMember(1, AsReference = true)]
    public A A { get; set; }

    [ProtoMember(2, AsReference = true)]
    public Dictionary<int, A> Items { get; set; }

    public B()
    {
        Items = new Dictionary<int, A>();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:58:02.230

编辑：这应该从下一个版本开始工作，只需标记类型`AsReferenceDefault`：

```
[ProtoContract(AsReferenceDefault=true)]
public class A
{
    // ...
} 
```

* * *

目前，这是*一种*不受支持的场景——至少，通过它不受支持**的属性；**基本上，`AsReference=true` *current*指的是`KeyValuePair<int,A>`，这实际上没有意义，因为`KeyValuePair<int,A>`它是一个值类型（因此永远不能将其视为参考；我在本地副本中为此添加了更好的消息）。

因为`KeyValuePair<int,A>`（默认情况下）充当*元组*，所以目前没有地方支持该`AsReference`信息，但这是我希望更好地支持的场景，我将对此进行调查。

还有一个错误意味着元组（*甚至*`AsReference`是引用类型的元组）出现乱序，但我已经在本地修复了它；这就是“更改”消息的来源。

理论上，我做这件事的工作量并不大。*基本原理*已经起作用了，奇怪的是昨晚也在推特上单独出现了——我猜“字典指向一个对象”是一个非常常见的场景。猜测一下，我想我会添加一些属性来帮助描述这种情况，但你现在实际上可以使用几种不同的路线来解决它：

1：`KeyValuePair<int,A>`手动配置：

```
[Test]
public void ExecuteHackedViaFields()
{
    // I'm using separate models **only** to keep them clean between tests;
    // normally you would use RuntimeTypeModel.Default
    var model = TypeModel.Create();

    // configure using the fields of KeyValuePair<int,A>
    var type = model.Add(typeof(KeyValuePair<int, A>), false);
    type.Add(1, "key");
    type.AddField(2, "value").AsReference = true;

     // or just remove AsReference on Items
    model[typeof(B)][2].AsReference = false;

    Execute(model);
} 
```

我不太喜欢这个，因为它利用了`KeyValuePair<,>`（私有字段）的实现细节，并且可能无法在 .NET 版本之间工作。我宁愿通过*代理即时**替换* ：`KeyValuePair<,>`

 *```
[Test]
public void ExecuteHackedViaSurrogate()
{
    // I'm using separate models **only** to keep them clean between tests;
    // normally you would use RuntimeTypeModel.Default
    var model = TypeModel.Create();

    // or just remove AsReference on Items
    model[typeof(B)][2].AsReference = false;

    // this is the evil bit: configure a surrogate for KeyValuePair<int,A>
    model[typeof(KeyValuePair<int, A>)].SetSurrogate(typeof(RefPair<int, A>));
    Execute(model);
}

[ProtoContract]
public struct RefPair<TKey,TValue> {
    [ProtoMember(1)]
    public TKey Key {get; private set;}
    [ProtoMember(2, AsReference = true)]
    public TValue Value {get; private set;}
    public RefPair(TKey key, TValue value) : this() {
        Key = key;
        Value = value;
    }
    public static implicit operator KeyValuePair<TKey,TValue>
        (RefPair<TKey,TValue> val)
    {
        return new KeyValuePair<TKey,TValue>(val.Key, val.Value);
    }
    public static implicit operator RefPair<TKey,TValue>
        (KeyValuePair<TKey,TValue> val)
    {
        return new RefPair<TKey,TValue>(val.Key, val.Value);
    }
} 
```

这配置了要使用的东西，*而不是* `KeyValuePair<int,A>`（通过运算符转换）。

在这两者中，`Execute`只是：

```
private void Execute(TypeModel model)
{
    A a = new A();
    B b = new B();

    b.A = a;

    b.Items.Add(1, a);

    Assert.AreSame(a, b.A);
    Assert.AreSame(b.A, b.Items[1]);

    B deserializedB = (B)model.DeepClone(b);

    Assert.AreSame(deserializedB.A, deserializedB.Items[1]);
} 
```

但是，我确实想添加直接支持。上述两个方面的好处是，当我有时间这样做时，您只需删除自定义配置代码。

为了完整起见，如果您的代码正在使用方法，那么您应该配置*默认*`Serializer.*`模型，而不是创建/配置*新*模型：

 *```
RuntimeTypeModel.Default.Add(...); // etc 
```

`Serializer.*`基本上是一个捷径`RuntimeTypeModel.Default.*`。

`TypeModel`最后：你不应该在每次调用时创建一个新的；那会损害性能。您应该创建和配置一个模型实例，并多次重复使用它。或者只使用默认模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T01:21:55.510

我设置了一个小测试，发现 AsReferenceDefault 属性并没有像预期的那样工作。

## 测试类：

```
[ProtoContract(AsReferenceDefault = true)]
public class TEST
{
    [ProtoMember(1018)]
    public List<TEST> _Items { get; set; }

    [ProtoMember(1001, AsReference = true)]
    public TEST Parent;

    [ProtoMember(1003)]
    public string NameItemType;

    public void AddItem(TEST Item)
    {
        _Items.Add(Item);
        Item.Parent = this;
    }

    public TEST()
    {
    }
} 
```

## 测试代码：

```
 TEST ci = new TEST(); ci._Items = new List<TEST>(); ci.NameItemType = "ROOT_ITEM";
        TEST ci_2 = new TEST(); ci_2._Items = new List<TEST>(); ci_2.NameItemType = "ITEM_02"; ci.AddItem(ci_2);
        TEST ci_3 = new TEST(); ci_3._Items = new List<TEST>(); ci_3.NameItemType = "ITEM_03"; ci_2.AddItem(ci_3);

        // --> Confirm references.
        bool AreEqual = false;
        if (ci == ci_2.Parent)
            AreEqual = true;
        if (ci_2 == ci_3.Parent)
            AreEqual = true;

        // --> Serialize.
        byte[] buf;
        using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
        {
            ProtoBuf.Serializer.Serialize(ms, ci);
            buf = ms.ToArray();
        }

        // --> Deserialize.
        using (System.IO.MemoryStream ms = new System.IO.MemoryStream(buf))
        {
            ci = ProtoBuf.Serializer.Deserialize<TEST>(ms);
        }

        // --> Confirm references.
        ci_2 = ci._Items[0];  
        ci_3 = ci_2._Items[0];
        if (ci == ci_2.Parent)
            AreEqual = true;
        if (ci_2 == ci_3.Parent)  // HERE IS WHERE IT FAILS! 
                                  // THEY SHOULD BE EQUAL AFTER DESERIALIZATION!
            AreEqual = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T13:13:04.297

**对于那些可能遇到类似问题的人的更新：**从版本 2.3.0 开始，不需要使用上面提到的任何技巧 Marc。一切都按照主题启动者的要求进行：

```
[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void AreObjectReferencesSameAfterDeserialization()
    {
        A a = new A();
        B b = new B();

        b.A = a;

        b.Items.Add( 1, a );

        Assert.AreSame( a, b.A );
        Assert.AreSame( b.A, b.Items[ 1 ] );

        B deserializedB;

        var model = TypeModel.Create();

        using( var stream = new MemoryStream() )
        {
            model.Serialize( stream, b );
            stream.Seek( 0, SeekOrigin.Begin );
            deserializedB = (B) model.Deserialize( stream, null, typeof(B) );
        }

        Assert.AreSame( deserializedB.A, deserializedB.Items[ 1 ] );
    }
}

[ProtoContract]
public class A
{
}

[ProtoContract]
public class B
{
    [ProtoMember( 1, AsReference = true )]
    public A A { get; set; }

    [ProtoMember( 2, AsReference = true )]
    public Dictionary<int, A> Items { get; set; }

    public B()
    {
        Items = new Dictionary<int, A>();
    }
} 
```**

# java - java : How to have a good indentation?

> ID：14436608
> 
> 赞同：2
> 
> 时间：2013-01-21T10:25:21.390
> 
> 标签：java, coding-style, word-wrap

I would like to follow conventions including that not exceed 80 characters per line.

I downloaded the PDF explaining the naming class, variables, and speaking a bit of wrapping but it's still light.

It is stated: - break after a comma - break before an operator - prefer high level breaks to lower

But how to manage a simple case as this one :

```
File logDir = new File(PropertiesLoader.getProperty(SpecificConstant.AdminStorageProperty.LOG_FOLDER.getValue())); 
```

I am tempted to wrap after the parenthesis of getProperty.

If we cut before an operator, must we do that for all the following operators? I often see this code:

```
String value = SpecificConstant
    .AdminStorageProperty
    .LOG_FOLDER
    .getValue(); 
```

What is the better way to wrap lines ?

Thank you.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:28:52.253

我使用 IDE 的默认设置，因此它会在我签入或要求时自动格式化我的代码。我很少手动格式化代码。

我会写

```
 File logDir = new File(PropertiesLoader.getProperty(SpecificConstant.AdminStorageProperty.LOG_FOLDER.getValue())); 
```

as（在我的 IDE 中使用引入变量重构）

```
 String logProp = SpecificConstant.AdminStorageProperty.LOG_FOLDER.getValue();
 File logDir = new File(PropertiesLoader.getProperty(logProp)); 
```

我在我的 IDE 中使用了比例字体，使 80 个字符的限制变得不那么有意义；）对我来说，它通常更像是 200 个字符的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:17:58.450

恕我直言，80 宽度有点过时了，因为当时分辨率低，屏幕最好用 80 读取。

我在 IDE 中使用 120 作为默认宽度，并将其格式化为完全可读的代码。

```
File logDir = new File(PropertiesLoader.getProperty(SpecificConstant.AdminStorageProperty.LOG_FOLDER.getValue())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:23:55.450

请参阅Oracle[的 Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

# tomcat - HTTP parameter encoding

> ID：14436612
> 
> 赞同：1
> 
> 时间：2013-01-21T10:25:43.930
> 
> 标签：tomcat, encoding, parameters

Lately I have been working on creating a few HTTP services using a Tomcat 7.0 server. The code below is a html file that I used to test my service.

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>              
                <form id="fm" method="post" action="http://localhost:8080
/DataService/ProductData?category=Ser + bø&location=Herlev##Vejle">
                    <input type="submit" value="Submit">
                </form>
</body>
</html> 
```

My problem is regarding the category parameter "Ser + bø". On the server side it is read as "Ser bø" with a three spaces instead of a space,"+",space. As far as I know the problem has likely to do something with encoding. I am using UTF-8 for the request. I have also change the configuration for the Tomcat server so that it uses UTF-8\. Any ideas as to what I am doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:33:05.360

修改表单操作 URL 以将参数传递给后端不是处理表单的正确方法。避免所有这些的最好方法就是使用单独的表单参数：

```
<form id="fm" method="post" action="http://localhost:8080
/DataService/ProductData?category=Ser %2B bø&location=Herlev##Vejle">
   <input type="hidden" name="category" value="Ser %2B bø">
   <input type="hidden" name="location" value="Herlev##Vejle">
   ...
</form> 
```

这是因为 URL 有它自己的编码规则，基于 RFC 3986。Plus[代表](http://en.wikipedia.org/wiki/Percent-encoding)那里的空间。因此，您应该在将 URL 传递到服务器之前对其进行编码，使用 JSP 或 JavaScript。编码`+`为`%2B`：

```
<form id="fm" method="post" action="http://localhost:8080
/DataService/ProductData?category=Ser %2B bø&location=Herlev##Vejle"> 
```

如果它是用户输入，则必须使用 JavaScript 对其进行编码，如此[处](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:49:33.787

`+`是空间的 URL 编码表示。这就是为什么你把它作为一个空间回来了。您基本上需要对各个参数名称和值进行 URL 编码。

鉴于您正在运行 Tomcat，您很可能也在运行 JSP。[在 JSP 中，您可以使用JSTL](https://stackoverflow.com/tags/jstl/info) 创建正确编码的 URL，`<c:url>`如下`<c:param>`所示：

```
<c:url var="formActionURL" value="http://localhost:8080/DataService/ProductData">
    <c:param name="category" value="Ser + bø" />
    <c:param name="location" value="Herlev##Vejle" />
</c:url>
<form action="#{formActionURL}">
    ...
</form> 
```

# json - 如何在 jax-rs 的 post 请求中处理 Json 主体

> ID：14436615
> 
> 赞同：3
> 
> 时间：2013-01-21T10:25:56.103
> 
> 标签：json, jaxb, jersey, jax-rs, restful-architecture

我有一个关于 JAX-RS 的项目（作业）。我正在使用 NetBeans、Jersey 和 Tomcat。

![在此处输入图像描述](../Images/059a689192ab83559022da87dece7798.png)

这是系统中主要对象的“用户”类。

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="user")
public class User {

    //@XmlElement
    //public int id ;
    @XmlElement
    public String username;
    @XmlElement
    public String fullname;
    @XmlElement
    public String gender;
    @XmlElement
    public String birthDate;

    public User(){

    }

    public User(String username,String fullname, String gender,String birthDate){

        //this.id = id;
        this.username = username;
        this.fullname = fullname;
        this.gender = gender;
        this.birthDate = birthDate;
    }

} 
```

这是我的“JAXBContextResolver”类

```
import com.sun.jersey.api.json.JSONConfiguration;
import com.sun.jersey.api.json.JSONJAXBContext;
import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;
import javax.xml.bind.JAXBContext;

@Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext>{

    private JAXBContext context;
    private Class[] types = {User.class};

    public JAXBContextResolver() throws Exception {

        this.context = 
        new JSONJAXBContext(  JSONConfiguration.mapped().build(), types); 
    }

    @Override
    public JAXBContext getContext(Class<?> objectType) {
         for (Class type : types) {
             if (type == objectType) {
                 return context;
             }
         }

        return null;

    }

} 
```

这是我在“UserService”类中的 post 方法

```
 @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON) 
    public List<User> createNewUser(User tUser)  {
        List<User> list = new ArrayList<User>();

        list.add(tUser);

        return list;
    } 
```

当我尝试使用 RESTClient（Firefox 附加组件）在 localhost 中发布新用户时，我的请求正文是这样的 json 输入：

```
{"user":{"username":"blabla","fullname":"blabla","gender":"M","birthDate":"05.01.1978"}} 
```

在 post 方法中（在 UserService 类中）变量“tUser”是否必须自动填充即将到来的输入？“tUser”变量在调试模式下显示空元素，如下所示：

![在此处输入图像描述](../Images/1a9748396807f280b813e17b2c6982bc.png)

如果我知道错了，有人可以纠正我吗？为什么这个值显示为空？他们不能显示“blabla”-“blabla”-“M”-“05.01.1878”吗？请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:01:02.517

我解决了这个问题；在 JAXBContextResolver 类中，我更改了这样的方法：

```
public JAXBContextResolver() throws Exception {

        this.context = 
        new JSONJAXBContext(  JSONConfiguration.mapped().rootUnwrapping(false).build(), types); 
} 
```

与第一个不同的是添加了“rootUnwrapping(false)”表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:51:05.300

`@XmlRootElement`在您的示例中不起作用。发送

```
{"username":"blabla","fullname":"blabla","gender":"M","birthDate":"05.01.1978"} 
```

而是
**编辑**
**1)**

```
public List<User> createNewUser(Request tUser) 
```

和班级

```
class Request
{
   public User user;
} 
```

**2)**

```
public List<User> createNewUser(String tUser) 
```

并使用或转换`String`为对象`google-gson``jackson json processor`

# android - Android/Eclipse：处理图像的大小

> ID：14436622
> 
> 赞同：1
> 
> 时间：2013-01-21T10:26:22.493
> 
> 标签：android, eclipse, image

我正在用 eclipse 构建一个 android 应用程序，我正在努力掌握屏幕中的图像定位。我已将图像置于相对布局中，并且我希望图像的边框与屏幕的边框完美匹配，但是当我手动扩展图像时，它永远不适合，即使我放置了填充：/（见右侧可以，但不是左边，这个问题甚至不是屏幕尺寸的问题）

谢谢您的帮助

![在此处输入图像描述](../Images/68fcf40eb6f4d3123f48991a14b0957d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:27:37.767

如果你想这样做，你需要使用以下代码获取屏幕的尺寸：

```
// pixels
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

然后您需要使用宽度和高度属性以编程方式设置图片的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:33:20.310

如果您需要将图像作为活动的背景，您可以使用背景属性。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rootRL"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/background">
</RelativeLayout> 
```

“@drawable/your_image_name”是您的图像。图片应该是谷歌推荐的不同尺寸屏幕的尺寸。

# javascript - 工具栏中的菜单 - Ext-JS 4

> ID：14436623
> 
> 赞同：2
> 
> 时间：2013-01-21T10:26:22.653
> 
> 标签：javascript, extjs, extjs4

当我按下按钮时，我想要一个菜单​​，但它不起作用，当我按下按钮时，什么也没有发生。这是代码：

```
{
                    xtype: 'button',
                    text: 'menu',
                    menu: Ext.create('Ext.menu.Menu', {
                            width: 100,
                            plain: true,
                            floating: false,  // usually you want this set to True (default)
                            renderTo: Ext.getBody(),
                            items: [{
                                    text: 'plain item 1'
                                },{
                                    text: 'plain item 2'
                                },{
                                    text: 'plain item 3'
                            }]
                        })
                }, 
```

哪里有问题？

解决了：

**刚刚删除浮动：假。:)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:14:42.140

解决了

刚刚删除浮动：假。:)

# asp.net-mvc - Kendo 添加而不是编辑 DropdownList 项

> ID：14436630
> 
> 赞同：0
> 
> 时间：2013-01-21T10:26:44.030
> 
> 标签：asp.net-mvc, kendo-ui, selected, selectedvalue

我使用 Kendo 网格内联编辑模式，编辑后我需要刷新 DropDownList 的数据源。

原因是我的 KendoGrid 应该添加和编辑我的 DropDownList 使用的数据。我在 KendoGrid 上编辑数据没有问题，在下面的代码的帮助下，我刷新了 DropDownList 上的数据。

```
var dropDownList = $("#Domains").data("kendoDropDownList");
                    dropDownList.dataSource.read(); 
```

`#Domains`是我的 DropDownList 的 ID

即使我编辑已在 DropDownList 上选择的数据，一切正常。但问题是在 KendoGrid（内联模式）中添加新项目并同时编辑在 DropDownList 上选择的旧项目之一。

在这种情况下，Kendo 不会编辑项目，而是将已编辑的项目作为新项目添加到数据源中，我们将旧项目和已编辑项目作为两个单独的项目。我不知道我是否正确地传达了情况。

我使用 MVC，我定义数据源的方式是这样的：

```
.DataSource(dataSource => dataSource
                                            .Ajax()
                                            .Events(events => { events.Error("result_handler"); })
                                            .Model(model => model.Id(p => p.Id))
                                            .Create(create => create.Action("AddDomain", "Service", new { customerID = ViewBag.CustomerId }))
                                            .Read(read => read.Action("GetDomainListForGrid", "Service", new { customerID = ViewBag.CustomerId }))
                                            .Update(update => update.Action("EditDomain", "Service"))
                                            .Destroy(destroy => destroy.Action("DeleteDomain", "Service"))
                                        ) 
```

如您所见，我设置了 model.Id 像上面一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:31:50.287

不是个好主意！但在选择 DropDownList 项之前刷新网格上的数据会有所帮助：

```
var grid = $("#grid").data("kendoGrid");
                    grid.dataSource.read(); 
```

# javascript - 查找元素的某些属性是否包含特定值

> ID：14436639
> 
> 赞同：1
> 
> 时间：2013-01-21T10:27:12.307
> 
> 标签：javascript, jquery

我在想是否有办法找到元素的属性是否包含指定的值。属性未知。如果我有这个 HTML：

```
 <input class="first" type="checkbox" data="THE-VALUE" />
    <input class="second" type="checkbox" />
    <input class="third" type="checkbox" name="THE-VALUE" /> 
```

我想找到所有具有值为**THE-VALUE 的**属性的输入（在本例中为`.first`和`.third`）。对于这种输入为 3 的情况，我不需要解决方案，但如果我有 50 个输入并且包含 THE-VALUE 的属性都不同。我尝试过类似`.attr(':contains("THE-VALUE")')`and的方法`$('input[="THE-VALUE"]')`，但由于明显的原因，它不起作用。

所以我的问题是..有什么办法可以找到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:31:25.997

```
$("input").filter(function() {
    return $.grep(this.attributes, function(arg) {
        return arg.nodeValue === "THE-VALUE";
    }).length > 0;
}).prop("checked", true); 
```

**演示：http:** [//jsfiddle.net/7tsZN/](http://jsfiddle.net/7tsZN/)

* * *

或作为选择器扩展：

```
$.expr[':'].hasattrval = function(e, i, p) {
    return $.grep(e.attributes, function(arg) {
        return arg.nodeValue === p[3];
    }).length;
};

$("input:hasattrval('THE-VALUE')").prop("checked", true); 
```

**演示：http:** [//jsfiddle.net/7tsZN/1/](http://jsfiddle.net/7tsZN/1/)

# android - 了解安卓

> ID：14436641
> 
> 赞同：62
> 
> 时间：2013-01-21T10:27:16.487
> 
> 标签：android, xml-drawable, android-drawable, layer-list

我不明白图层列表是如何工作的。[我阅读了带有一些示例](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)的官方文档，但它并不像预期的那样对我有用。我想要四个应该用 1dp 填充的正方形，但没有什么是预期的。这是一个放大 500% 的屏幕截图：

![我的苏亚雷斯](../Images/8132eb1919b1455d743712c2bbe94ac3.png)
^(（错误的颜色无关紧要）)
如您所见，尺寸完全错误，并且缺少填充物。我试图设置真正的值，如宽度/高度和右/左/顶部/按钮，以确保 android 得到我想要的点。

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:top="0dp" android:left="0dp" android:bottom="0dp" android:right="0dp">
        <shape android:shape="rectangle">
            <size android:width="9dp"
                android:height="9dp"/>
            <solid android:color="#f000"/>
        </shape>
    </item>

    <item android:top="1dp" android:left="1dp" android:bottom="5dp" android:right="5dp">
        <shape android:shape="rectangle">
            <size android:width="3dp"
                android:height="3dp"/>
            <solid android:color="#f00"/>
        </shape>
    </item>
    <item android:top="1dp" android:left="5dp" android:bottom="5dp" android:right="1dp">
        <shape android:shape="rectangle">
            <size android:width="3dp"
                android:height="3dp"/>
            <solid android:color="#0f0"/>
        </shape>
    </item>

    <item android:top="5dp" android:left="1dp" android:bottom="1dp" android:right="5dp">
        <shape android:shape="rectangle">
            <size android:width="3dp"
                android:height="3dp"/>
            <solid android:color="#0f0"/>
        </shape>
    </item>
    <item android:top="5dp" android:left="5dp" android:bottom="1dp" android:right="1dp">
        <shape android:shape="rectangle">
            <size android:width="3dp"
                android:height="3dp"/>
            <solid android:color="#f00"/>
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-06-04T01:59:46.340

左、上、右和下的值是从它们各自的边缘测量的。

所以 left=0dp, top=0dp, bottom=0dp & right=50dp 会给你一个 (match_parent - 50dp) 宽而不是 50dp 宽的矩形。因此，“正确”的较大值实际上会给您一个较小的矩形。

这同样适用于其他值，但在大多数情况下，它们的行为与预期的一样，它只是“正确”，可能会引起混淆。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T12:27:59.067

您可以使用`px`代替`dp`或将所有维度乘以`10`.

*我很惭愧地承认我不完全知道为什么会这样，但我的猜测是它与密度有关，其中`1dp`是一个浮动`px`值并且`ImageView`按比例放大。*

*欢迎专家回答:)*

# c# - DataGridview 主/从大表

> ID：14436642
> 
> 赞同：0
> 
> 时间：2013-01-21T10:27:19.140
> 
> 标签：c#, sql, datagridview

我有两个`master-child`具有几百万条记录的关系表。我正在使用由 Visual Studio 生成的类型化数据集。由于我的表非常大并且我不想实现虚拟模式，因此我使用 , 修改了主表`SELECT TOP X`，以限制看到的行数，按内部标准排序。现在子表的问题是它仍然会在应用程序启动时带来数百万行。

仍然使用生成`DataSet`并限制子`DataGridView`加载所有数据的解决方案是什么？我想到的第一个解决方案是`SqlDataAdapter`在 master 中更改行选择的事件中手动实现子行的数据填充`DataGridView`。这似乎只按需加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:03:06.503

由于到目前为止没有回应，这是我能找到的最快的解决方案：

1.  保持添加当前类型化的数据集和表适配器
2.  使用数据集设计器将 FillBY 方法添加到您的子 tableAdapter。[这里的](http://msdn.microsoft.com/en-us/library/kda44dwy%28v=VS.80%29.aspx)例子
3.  从 Form_Load 事件中删除对子 tableAdapter Fill() 方法的调用，该方法将所有数据库结果带到那里
4.  [为您为主表生成的 bindingSource 的CurrentChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.currentchanged.aspx)事件创建一个处理程序，并将其添加到表单 Load 事件中。应该是这样的：

    this.myMasterTableBindingSource.CurrentChanged += new EventHandler(myMasterTableBindingSource_CurrentChanged);

5.  使用基于主表中所选项目的信息填充您的子 dataGridView：

    ```
     void myMasterTableBindingSource_CurrentChanged(object sender, EventArgs e)
    {

            DataRowView selectedRow = myMasterTableBindingSource.Current as DataRowView;
            if (selectedRow != null && !selectedRow.IsNew)
            { 
                this.myChildTableTableAdapter.FillByUser(this.myDataSet.MyChildTable, (int)selectedRow["UserID"]);
            }

    } 
    ```

# sql-server - 带有连接的选择查询显示计数结果取决于第三个连接表值

> ID：14436644
> 
> 赞同：1
> 
> 时间：2013-01-21T10:27:24.330
> 
> 标签：sql-server, sql-server-2008, tsql, count

这里是带有值的 [SQL FIDDLE](http://sqlfiddle.com/#!3/413fd/3) 和下表模式。
我想选择`id_emp,fname_emp,TotalProject`一个条件，其`skillsid`in `(1,2)`。我试过的查询给出了*错误的输出*。

```
create table employee_emp(
id_emp int identity(1,1),fname_emp varchar(20),lname_emp varchar(20))
 insert into employee_emp values('John','Cena');
 insert into employee_emp values('Michel','shawn');
 insert into employee_emp values('Jay','mac');
 insert into employee_emp values('David','jackson');

create table skills_skl(
idemp_skl int,idskill_skl int
)
insert into skills_skl values(1,1);
insert into skills_skl values(1,2);
insert into skills_skl values(1,3);
insert into skills_skl values(1,4);
insert into skills_skl values(2,2);
insert into skills_skl values(2,3);
insert into skills_skl values(3,1);
insert into skills_skl values(3,4);
insert into skills_skl values(4,2);

create table employee_ejp(
id_ejp int identity(1,1),idemp_ejp int ,idproject_ejp int)
insert into employee_ejp values(1,1);
insert into employee_ejp values(1,2);
insert into employee_ejp values(1,3);
insert into employee_ejp values(2,3);
insert into employee_ejp values(2,2);
insert into employee_ejp values(3,1);
insert into employee_ejp values(4,4); 
```

我试过的查询

1)

```
select a.id_emp,a.fname_emp,count(b.id_ejp) TotalP from employee_emp a
join employee_ejp b on a.id_emp=b.idemp_ejp 
group by a.id_emp,a.fname_emp 
```

2)

```
select a.id_emp,a.fname_emp,count(b.id_ejp) TotalP from employee_emp a
join employee_ejp b on a.id_emp=b.idemp_ejp join skills_skl c on c.idskill_skl=a.id_emp
where c.idskill_skl in (1,2)
group by a.id_emp,a.fname_emp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:35:49.777

这是简单的方法：

```
;with emps_1_2 as (
select distinct a.id_emp
  from employee_emp a
  join skills_skl c on c.idemp_skl=a.id_emp     --Be carefull here!
  where c.idskill_skl in (1,2)
)  
select emp.id_emp,
       emp.fname_emp,
       coalesce( COUNT(ejp.id_ejp), 0) as TotalProject 
from       employee_emp emp 
inner join emps_1_2 emp12 
        on emp.id_emp = emp12.id_emp
 left join employee_ejp ejp 
        on emp.id_emp=ejp.idemp_ejp
group by emp.id_emp,emp.fname_emp 
```

结果：

```
| ID_EMP | FNAME_EMP | TOTALPROJECT |
-------------------------------------
|      4 |     David |            1 |
|      3 |       Jay |            1 |
|      1 |      John |            3 |
|      2 |    Michel |            2 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:42:24.510

```
select distinct a.id_emp, COUNT(idproject_ejp) over(partition by a.id_emp) 
from #employee_emp a join #skills_skl b 
on a.id_emp = b.idemp_skl
join #employee_ejp c 
on a.id_emp = c.idemp_ejp
where b.idskill_skl in (1,2)
group by a.id_emp,idproject_ejp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:57:03.240

这应该可以解决问题：

```
select emp.id_emp, emp.fname_emp, count(proj.idemp_ejp) as project_count  
from employee_emp emp  
join skills_skl sk  
on emp.id_emp=sk.idemp_skl and sk.idskill_skl in (1,2)  
join employee_ejp proj  
on proj.id_ejp=emp.id_emp  
group by emp.fname_emp, emp.id_emp 
```

首先以员工表为基础，然后使用技能作为连接子句的过滤器，从而减少数据大小。
其次，加入项目表，以便我们可以计算编号。员工出现在表格中的次数。

短而甜。

# c# - 从动态错误页面回退到静态错误页面

> ID：14436645
> 
> 赞同：4
> 
> 时间：2013-01-21T10:27:25.210
> 
> 标签：c#, asp.net, error-handling, web-config, custom-error-pages

我知道，我们应该始终使用静态错误页面，但就我而言，我必须使用带有 .cs 文件的动态错误页面“ErrorPage.aspx”。现在因为我们正在对 https 证书进行安全审计；它显示了一个非常可能的情况，即此 ErrorPage.aspx 本身可能存在错误。

我已经在 web 配置中指定了自定义错误元素，它将任何错误重定向到这个动态页面，并且像往常一样将模式设置为 on。

例如

```
<customErrors mode="On" defaultRedirect="ErrorPage.aspx" >
          <error statusCode="404" redirect="Login.aspx"/>
     </customErrors> 
```

现在，如果错误页面出现错误怎么办，我应该将它重定向到哪里。因此，在我的第一次尝试中，我在项目中添加了一个静态 html 页面 error.htm，并在我的 errorpage.aspx 的页面指令中添加了 errorpage="error.htm"。但它不起作用，而是显示一个网络配置错误，说我应该将模式设置为“RemoteOnly”。

我想我需要明确检查 errorpage.aspx 中的错误代码，然后执行重定向，但这会很长。我想知道是否有更好的选择。

我希望我已经把我的问题说清楚了。

# ruby-on-rails - 使用考拉在 Facebook 上发布带有标签的照片

> ID：14436652
> 
> 赞同：2
> 
> 时间：2013-01-21T10:27:57.003
> 
> 标签：ruby-on-rails, facebook, koala

我正在尝试使用以下代码使用 Koela 发布照片，但它没有标记用户

```
@graph.put_picture(pic_url,{:message => msg,:tags => [{:id => "xxxxxxx"} ,{:id=>"xxxxxxx"}]}) 
```

这是 facebook 链接，但它在 PHP [http://developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:54:45.450

Koala 中没有 put_tag 函数，因此您必须使用更通用的 put_connections 函数：

```
@graph.put_connections(you_image_id, 'tags', {"to" => uid}) 
```

[https://github.com/arsduo/koala/blob/master/lib/koala/api/graph_api.rb#L144](https://github.com/arsduo/koala/blob/master/lib/koala/api/graph_api.rb#L144)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:16:54.007

这是 put_picture 的文档，但我看不到它能够标记...你可以看看，我认为必须传递 x 和 y 坐标才能在图片中标记。

[https://github.com/arsduo/koala/blob/master/lib/koala/api/graph_api.rb](https://github.com/arsduo/koala/blob/master/lib/koala/api/graph_api.rb)

# jquery - jquery和css下拉菜单不起作用

> ID：14436660
> 
> 赞同：0
> 
> 时间：2013-01-21T10:28:19.577
> 
> 标签：jquery, css, drop-down-menu

当您将鼠标悬停在 #crm-userbar 上时，下拉菜单无法正常工作

那么这里是一个小提琴：http: [//jsfiddle.net/pVVRn/](http://jsfiddle.net/pVVRn/)

jQuery

```
 $(document).ready(function() {

     $("#crm-userbar").mouseover(function() {
         $(".dropdown").fadeIn();
     }).mouseout(function(){
         $(".dropdown").fadeOut();
     });

 }); 
```

CSS

```
.dropdown {
             position: absolute;
             top: 66px;
             right: 0; 
             background: #0098EA;
             font-weight: normal;
             width: 210px;
             padding: 12px 6px;
             margin: 0px 0px;
             z-index: 100;
             list-style: none;
         }

         .dropdown li a {
             color: #fff;
             width: 210px;
             padding: 12px 6px;
             margin: 0px 0px;
         }

         .dropdown li a:hover {
             display: block;
             text-decoration: none;
             color: #9e9e9e;
             padding: 10px 20px;
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:33:43.823

将下拉菜单放在 div 中并使用`hover()`

[小提琴](http://jsfiddle.net/pVVRn/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:35:54.867

此代码可以在一行中。

```
$("#crm-userbar").hover(function(){
   $(".dropdown").fadeToggle();
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:31:19.817

你在这里需要的是..`mouseenter()`和`mouseleave()`

这是**更新的** [小提琴](http://jsfiddle.net/pVVRn/5/)

```
$("#crm-userbar").mouseenter(function() {
             $(".dropdown").fadeIn();
         }).mouseleave(function(){
             $(".dropdown").fadeOut();
         }); 
```

“或者”

改为使用`hover()`。

```
$( "#crm-userbar" ).hover(function(){
   $(".dropdown").fadeIn();
},function(){
   $(".dropdown").fadeOut();
} 
```

);

您可以通过此 [链接](http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.htm)`mouseenter`查看 和功能之间的真正区别`mouseover` ..

# jsp - 每次JBOSS服务器重启时如何自动加载JSP页面？

> ID：14436671
> 
> 赞同：0
> 
> 时间：2013-01-21T10:29:17.430
> 
> 标签：jsp, jboss, server-side, web-deployment, server-side-scripting

我有一个 JSP 文件在服务器上启动一个 TimerTask。每次重新启动服务器时，TimerTask 对象都会丢失，我必须手动点击 JSP 页面重新设置它。无论如何，我可以添加一个在服务器重新启动后自动点击 JSP 页面的服务器脚本吗？

注意：它是一个 JBOSS 3.2.8 服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:39:46.033

从 JSP 中提取代码，将其放置在 servlet 中，并在 web.xml 中定义要自动启动的 servlet。

```
<servlet>
    <servlet-name>myServlet</servlet-name>
    <servlet-class>com.class.MyServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

（Servlet 可以转发到同一个 JSP，这样请求仍然可以得到那个 JSP）

# java - 求矩阵中独立行线性组合的系数

> ID：14436673
> 
> 赞同：0
> 
> 时间：2013-01-21T10:29:21.680
> 
> 标签：java, linear-algebra

用Java做项目。我使用 Gauss Jordain 算法来找出矩阵的哪些行和列是线性独立的，哪些是独立行和列的线性组合。我可以按行和列找​​到排名。

但我真正需要并且不知如何去做的是找到将相关行和列生成为独立行和列的线性组合的系数。

我想答案是对 Gauss Jordain 的一些修改和/或跟踪所有乘法和除法系数，但我的大脑正在锁定如何去做。

基本功能是简化为行梯形，然后我在其上构建其他。

```
 public static void toRREF(double[][] M) {
        int rowCount = M.length;
    if (rowCount == 0)          
    return;
    int columnCount = M[0].length;
    int lead = 0;
    for (int r = 0; r < rowCount; r++) {
      if (lead >= columnCount)
      break;
        {
         int i = r;
         while (M[i][lead] == 0) {
           i++;
           if (i == rowCount) {
        i = r;
        lead++;
        if (lead == columnCount)
        return;
           }
         }
         double[] temp = M[r];
         M[r] = M[i];
             M[i] = temp;
        }
        {
        double lv = M[r][lead];
        for (int j = 0; j < columnCount; j++)
        M[r][j] /= lv;
        }
        for (int i = 0; i < rowCount; i++) {
            if (i != r) {
                double lv = M[i][lead];
                for (int j = 0; j < columnCount; j++)
                M[i][j] -= lv * M[r][j];
            }
        }
        lead++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:10:36.490

您想为每个线性相关的列/行求解以下方程组：

B * c = R

其中 B 是基（独立）向量的矩阵，c 是这些未知系数的列向量。R 是您正在查看的当前行。

因此，鉴于您已经通过 Guass-Jordan 获得了基础，请研究求解线性方程组的方法，并且您找到的系数向量 c 是线性方程，它将您的基础向量组合为您的其他依赖向量。

# android - 更改片段 onActivityResult

> ID：14436675
> 
> 赞同：0
> 
> 时间：2013-01-21T10:29:28.350
> 
> 标签：android, android-fragments

我正在开发依赖于 Fragment 的 android 应用程序，只有一个具有多个 Fragment 的活动

我用 start 调用了另一个活动以获得结果，我想替换片段，但出现以下错误

之后无法执行此操作`onSaveInstanceStatus`

谁能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:14:40.003

这里的问题发生了，因为我返回到活动结果并且活动尚未恢复，所以我需要在新线程中的 new Handler() 中的这部分代码等待一段时间，直到恢复活动然后改变片段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T13:31:49.000

是的，在 onActivityResult 期间不能交换或替换片段等。设置一个布尔值或整数值，并在活动的 onResume() 调用中根据该值交换片段。

# .net - 清理请求以防止 SQL 注入攻击

> ID：14436680
> 
> 赞同：2
> 
> 时间：2013-01-21T10:29:49.407
> 
> 标签：.net, vb.net, request, sql-injection, httprequest

我们继承了一个旧网站，其中包含近 2000 个不同的手工构建的 SQL 字符串，直接从 httprequests 获取变量。该站点经常受到 SQL 注入攻击。显然，该站点应该使用 SQL 参数进行编码以避免这种安全噩梦，但由于涉及更改这些参数的工作量，我们正在寻找另一种“清理”传入请求的方法。

主要清洁功能：-

```
Public Function myRequest(ByRef Request As HttpRequest, ByVal param As String) As String
        Return CleanRequest(Request(param))
End Function

Public Function CleanRequest(ByVal requestString As String) As String
        Dim badChars() As String = {"select", "drop", ";", "--", "insert", "delete", "xp_", "update"}
        Dim newChars As String = requestString

        For i = 0 To UBound(badChars)
            newChars = Replace(newChars, badChars(i), "", 1, -1, vbTextCompare)
        Next

        CleanRequest = Replace(newChars, "'", "''")
End Function 
```

如此称呼：-

```
Dim details As DataSet

detailsSQL = "select * from mytable where tableid = '" & myRequest(Request, "tableid") & "'"
details = sql.sqlSelect(detailsSQL) 
```

请注意，代码是结构化和命名的，以便于查找和替换。有了这个代码，尽管该网站继续经常受到攻击。**任何人都可以推荐主要的“清洁”功能来帮助阻止这些注入攻击吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T10:48:12.397

我认为防止 SQL 注入的唯一*可靠*方法是投入大量精力并将所有请求转换为使用 SQL 参数。

但是，要回答您的问题，您的 clean 方法似乎缺少 SQL Injection- **unescaped characters**的基本触发器。目前，您的网站仍然容易受到各种类型的攻击，例如：

```
"password' or 1=1; --"
"password'; DROP Table Users; --" 
```

至少，请确保您正在转义任何[不良字符](https://stackoverflow.com/questions/1086918/what-characters-have-to-be-escaped-to-prevent-mysql-injections)。但请注意，这[并不总是足够的](https://security.stackexchange.com/questions/3611/sql-injection-but-why-isnt-escape-quotes-safe-anymore)，所以如果你想完全消除 SQL 注入，我会重新迭代 - 使用 SQL 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:56:22.187

下面的一段 SQL 是错误的。请使用 SQL 参数：它将帮助您摆脱最明显的 SQL 注入攻击。

```
detailsSQL = "select * from mytable where tableid = '" & myRequest(Request, "tableid") & "'"
details = sql.sqlSelect(detailsSQL) 
```

将此替换为：

```
detailsSQL = "select * from mytable where tableid = @tableid"
details = sql.sqlSelect(detailsSQL, new SqlParameter(@tableid, myRequest(Request, "tableid"))) 
```

假设

*   sql 是 SQLServer 数据库查询的包装器
*   您的 sqlSelect 函数也适用于具有 SQL 参数
*   myRequest 按照詹姆斯的建议正确转义条目

以正确的方式使用参数将不再需要为 SQL 语句解析每个条目。

# c# - 在 c# 中使用 LINQ 将值从 int 作为输出参数传递给 int 变量

> ID：14436682
> 
> 赞同：0
> 
> 时间：2013-01-21T10:29:59.063
> 
> 标签：c#, linq, output-parameter

我有一个存储过程

```
ALTER PROCEDURE  [dbo].[customers_iu] (@intId as int, @strName as nvarchar(100), @strSname as nvarchar(100),@intInsupdt as int = 0,   @intGnrtdid as int OUTPUT)
AS
BEGIN
SET NOCOUNT ON;
if @intInsupdt = 1
begin
insert into dbo.customers (cust_Name, cust_Sname, cust_Tinno) values (@strName, @strSname,@strTinno) 
set @intGnrtdid = (select ident_Current('dbo.customers'))
end
else if @intInsupdt = 0
begin
update dbo.customers set cust_Name = @strName, cust_Tinno = @strTinno where cust_Id = @intId ;
set @intGnrtdid = @intId    
end
END 
```

我想`@intGnrtdid` 在使用 LINQ 时获取 int 变量的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:34:46.470

请参阅 Scott Guthrie 关于 Linq to SQL 的优秀博客系列。[第 6 部分](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)介绍调用存储过程。`ref`当从代码调用强类型存储过程时，out 参数将简单地由参数表示。

# testing - 傻瓜式分步 SpecFlow 测试

> ID：14436693
> 
> 赞同：6
> 
> 时间：2013-01-21T10:30:43.477
> 
> 标签：testing, specflow

是否有任何非常简单的分步示例/教程来说明单元测试和 Specflow 测试如何工作以及可以完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:22:07.127

是的，有，但最大的问题是，要做好 TDD 并了解 Sepcfication By Example（例如 SpecFlow）如何适用，我建议您再深入一点。

如果您从 Gojko Adzic 的[http://gojko.net/2011/02/04/tdd-break-the-mould/](http://gojko.net/2011/02/04/tdd-breaking-the-mould/)开始，那么它有望设定大局。我建议密切关注演讲的七步 tdd 或双循环部分。对我来说，示例规范是外圈，当我们收到一个新的业务需求时，在 Gherkin 中对其进行编码并使用 Specflow 来验证该功能是否还不起作用。

然后我推荐使用 TDD 来帮助您在技术上开发代码。使用多个测试来塑造满足您的业务目标的开发。拥有圆顶[Keith Braithwaite 的 TDD，就好像你的意思是它在](http://gojko.net/2009/02/27/thought-provoking-tdd-exercise-at-the-software-craftsmanship-conference/)练习一样，我真的可以建议你尝试一下。

最后，您的 TDD 推动您的规范通过，此时我建议您考虑重构所有内容，考虑您的生产代码、单元测试，甚至您的规范以进行简化和重复删除。让它干净。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:14:59.557

我从 Matt Wynne 的演示文稿中学到了很多关于 BDD（和规范）的知识：http: [//skillsmatter.com/podcast/agile-scrum/bdd-as-its-meant-to-be-done](http://skillsmatter.com/podcast/agile-scrum/bdd-as-its-meant-to-be-done)

它不是 SpecFlow，但我相信无论如何你都可以从中学到很多东西。

对于 SpecFlow 工具，我建议使用免费的 TekPub 视频：http: [//vimeo.com/46915798](http://vimeo.com/46915798)。

# flash - swc文件到swf文件的转换？

> ID：14436694
> 
> 赞同：3
> 
> 时间：2013-01-21T10:30:44.493
> 
> 标签：flash, swc

我们如何将 swc 文件转换为 swf 文件，以便我们可以在需要时调用 swf 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:35:58.760

1.  `.swc`将文件重命名为`.zip`.
2.  解压它。
3.  从存档中复制`library.swf`并按您喜欢的方式重命名。

# ajax - playframework ajax post - 将帖子参数提取到 DynamicForm

> ID：14436695
> 
> 赞同：2
> 
> 时间：2013-01-21T10:30:48.943
> 
> 标签：ajax, post, parameters, playframework, dynamicform

我正在尝试使用 DynamicForm 提取 ajaxly ($.ajax(...)) 发送的帖子参数：

```
new DynamicForm().bindFromRequest() 
```

我得到这个错误：

```
Caused by: java.lang.RuntimeException: There is no HTTP Context available from here.
    at play.mvc.Http$Context.current(Http.java:27) ~[play_2.9.1.jar:2.0.4]
    at play.mvc.Controller.request(Controller.java:28) ~[play_2.9.1.jar:2.0.4]
    at play.data.Form.requestData(Form.java:87) ~[play_2.9.1.jar:2.0.4]
    at play.data.DynamicForm.bindFromRequest(DynamicForm.java:46) ~[play_2.9.1.jar:2.0.4]
    at controllers.Login$$anonfun$login$1.apply(Login.scala:19) ~[classes/:2.0.4]
    at controllers.Login$$anonfun$login$1.apply(Login.scala:18) ~[classes/:2.0.4] 
```

如果我尝试将参数与映射的正常形式绑定，它可以工作：

```
 val form = Form(
    tuple(
      "identity" -> nonEmptyText,
      "password" -> nonEmptyText,
      "loginType" -> nonEmptyText
    )
  )
  form.bindFromRequest 
```

这对我的登录 ajax 帖子很有用。但是对于我的其他 ajax 帖子，我仍然想使用 DynamicForm 并使用 Map[String,String]。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T02:12:26.543

我的开发团队和我遇到了同样的问题。在我们的例子中，我们使用 Java、`java.util`集合包和以下代码行将请求参数绑定到 Map。

```
final Map<String, String[]> myForm = request().body().asFormUrlEncoded(); 
```

我不了解 Scala，但我认为有一种方法可以在 Scala 中使用 Java 集合。

# wpf - Avalondock 新标签定位和顺序

> ID：14436696
> 
> 赞同：1
> 
> 时间：2013-01-21T10:31:04.583
> 
> 标签：wpf, avalondock

我有一个使用 Avalon Dock 2.0 作为对接管理器的 WPF 应用程序。我面临一个关于 Avalon Dock 正在执行的新打开标签的标准定位的问题。

只要所有选项卡都适合选项卡栏，就会在选项卡栏的最右侧位置附加一个新选项卡。一旦新标签不适合栏，新标签就会添加到最左边的位置，从而使之前最右边的标签消失。

我知道这是 Visual Studio 的标准行为，但在我的应用程序中，这个顺序是有意义的。这意味着新选项卡应始终添加在最左侧或最右侧位置。该开关对用户来说非常混乱。

有没有办法让 Avalon Dock 总是在最左边或最右边的位置添加一个新选项卡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T10:10:30.687

我想到了。我从 DocumentPaneTabPanel 更改了 ArrangeOverride(Size finalSize) 方法中的代码，以防止将当前选项卡重新定位到第一个位置。

它现在隐藏当前不适合面板的选项卡左侧的选项卡 - 首先隐藏最左侧的选项卡。当前选项卡右侧的选项卡也被隐藏 - 这里最右边的选项卡首先隐藏。如果存在溢出，则当前选项卡始终是面板上的最右侧。目前这有点脏，但我认为以更好的方式实现这一点应该不会那么难。

这是代码：

```
 protected override Size ArrangeOverride(Size finalSize)
    {
        double offset = 0.0;
        var children = Children.Cast<UIElement>().Where(ch => ch.Visibility != System.Windows.Visibility.Collapsed).ToList();
        if (children.Count > 0)
        {
            //find currently selected tab
            int i = 0;
            for (i = 0; i < children.Count(); i++)
            {
                TabItem doc = (TabItem)children[i];
                var layoutContent = doc.Content as LayoutContent;
                if (layoutContent.IsSelected)
                    break;
            }

            //calculate how many tabs left from the currently selected would fit in the panel
            int cur_ind = i;
            TabItem current_item = (TabItem)children[cur_ind];
            List<TabItem> t_to_display = new List<TabItem>();
            while (cur_ind >= 0 && offset + current_item.DesiredSize.Width <= finalSize.Width)
            {
                current_item = (TabItem)children[cur_ind];
                current_item.Visibility = System.Windows.Visibility.Visible;
                offset += current_item.DesiredSize.Width + current_item.Margin.Left + current_item.Margin.Right;
                t_to_display.Add(current_item);
                --cur_ind;
            }

            //arrange the fitting tabs on the left
            double cur_offset = offset;
            foreach (TabItem t in t_to_display)
            {
                cur_offset -= t.DesiredSize.Width + t.Margin.Left + t.Margin.Right;
                t.Arrange(new Rect(cur_offset, 0.0, t.DesiredSize.Width, finalSize.Height));
            }

            //arrange the tabs on the right
            cur_ind = i + 1;
            while (cur_ind < children.Count && offset + current_item.DesiredSize.Width <= finalSize.Width)
            {
                current_item = (TabItem)children[cur_ind];
                current_item.Visibility = System.Windows.Visibility.Visible;
                current_item.Arrange(new Rect(offset, 0.0, current_item.DesiredSize.Width, finalSize.Height));
                offset += current_item.DesiredSize.Width + current_item.Margin.Left + current_item.Margin.Right;
                cur_ind++;
            }

            while(cur_ind < children.Count)
            {
                current_item = (TabItem)children[cur_ind];
                current_item.Visibility = System.Windows.Visibility.Hidden;
                cur_ind++;
            }
        }

        return finalSize;

    } 
```

# ios - 在 PDF 文件中的内容之后绘制图像

> ID：14436698
> 
> 赞同：9
> 
> 时间：2013-01-21T10:31:08.057
> 
> 标签：ios, objective-c, pdf

我最近一直在寻找一个好的 PDF 教程、文档等。

我最终使用了[这段](https://github.com/mortjac/PDF-tutorial)代码，但几乎没有问题。

**设想**

我有一个包含标签、textView 和 imageView 的视图。现在，我们将调用 label `name`、 textView`description`和 imageView `image`。

该名称用作标题。

描述非常非常可变，可以从 2 行到某些页面。

图片应该放在描述文本的末尾。

我正在使用这段代码：

```
- (void)generatePDF{
    NSString *fileName = [NSString stringWithFormat:@"%@.pdf",nameString];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

    CFAttributedStringRef currentText = CFAttributedStringCreate(NULL,
                                                                 (CFStringRef)descriptionString, NULL);
    if (currentText) {
        CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);
        if (framesetter) {

            // Create the PDF context using the default page: currently constants at the size
            // of 612 x 792.
            UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);

            CFRange currentRange = CFRangeMake(0, 0);
            NSInteger currentPage = 0;
            BOOL done = NO;

            do {
                // Mark the beginning of a new page.
                UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, kDefaultPageWidth,
                                                          kDefaultPageHeight), nil);
                [self drawHeader]
                // Draw a page number at the bottom of each page
                currentPage++;
                [self drawPageNumber:currentPage];

                // Render the current page and update the current range to
                // point to the beginning of the next page.
                currentRange = [self renderPage:currentPage withTextRange:
                                currentRange andFramesetter:framesetter];

                // If we're at the end of the text, exit the loop.
                if (currentRange.location == CFAttributedStringGetLength
                    ((CFAttributedStringRef)currentText))
                    done = YES;
            } while (!done);

            // Close the PDF context and write the contents out.
            UIGraphicsEndPDFContext();

            // Release the framewetter.
            CFRelease(framesetter);

        } else {
            NSLog(@"Could not create the framesetter needed to lay out the atrributed string.");
        }
        // Release the attributed string.
        CFRelease(currentText);
    } else {
        NSLog(@"Could not create the attributed string for the framesetter");
    }

}

- (CFRange)renderPage:(NSInteger)pageNum withTextRange:(CFRange)currentRange
       andFramesetter:(CTFramesetterRef)framesetter
{
    // Get the graphics context.
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();

    // Put the text matrix into a known state. This ensures
    // that no old scaling factors are left in place.
    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);

    // Create a path object to enclose the text. Use 72 point
    // margins all around the text.
    CGRect    frameRect = CGRectMake(22,72, 468, 648);
    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);

    // Get the frame that will do the rendering.
    // The currentRange variable specifies only the starting point. The framesetter
    // lays out as much text as will fit into the frame.
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);

    // Core Text draws from the bottom-left corner up, so flip
    // the current transform prior to drawing.
    CGContextTranslateCTM(currentContext, 0, kDefaultPageHeight);
    CGContextScaleCTM(currentContext, 1.0, -1.0);

    // Draw the frame.
    CTFrameDraw(frameRef, currentContext);

    // Update the current range based on what was drawn.
    currentRange = CTFrameGetVisibleStringRange(frameRef);
    currentRange.location += currentRange.length;
    currentRange.length = 0;
    CFRelease(frameRef);

    return currentRange;
}

- (void)drawPageNumber:(NSInteger)pageNum
{
    NSString* pageString = [NSString stringWithFormat:NSLocalizedString(@"Page", nil), pageNum];
    UIFont* theFont = [UIFont systemFontOfSize:12];
    CGSize maxSize = CGSizeMake(kDefaultPageWidth, 72);

    CGSize pageStringSize = [pageString sizeWithFont:theFont
                                   constrainedToSize:maxSize
                                       lineBreakMode:UILineBreakModeClip];
    CGRect stringRect = CGRectMake(((kDefaultPageWidth - pageStringSize.width) / 2.0),
                                   720.0 + ((72.0 - pageStringSize.height) / 2.0) ,
                                   pageStringSize.width,
                                   pageStringSize.height);

    [pageString drawInRect:stringRect withFont:theFont];
} 
```

我想知道如何在页面末尾绘制图像，就在描述结束之后。

我以这种方式绘制了标题：

```
-(void)drawHeader{
    NSString *headerString = nameString;
    UIFont* theFont = [UIFont boldSystemFontOfSize:15];
    CGSize maxSize = CGSizeMake(kDefaultPageWidth, 72);

    CGSize pageStringSize = [headerString sizeWithFont:theFont constrainedToSize:maxSize lineBreakMode:UILineBreakModeClip];
    CGRect stringRect = CGRectMake(22,22,pageStringSize.width,pageStringSize.height);

    [headerString drawInRect:stringRect withFont:theFont];
} 
```

它显示在每一页的开头。

现在我不知道如何在内容（描述）之后绘制图像！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T12:30:05.413

好吧，在上下文中绘制 pdf 就像在画布中绘制一样。

绘制本质上是动态的文本和图像的最好方法是创建和使用方法来绘制，它返回用于在页面中绘制的高度，并简单地保留一个变量来计算下一个绘图起点 y 位置，通过返回的递增价值。还要放置一个单独的偏移变量来检查页框。

要将图像绘制到 pdf 上下文中，您可以使用以下示例。您也可以`CGImage`通过 Core Graphics 进行渲染，但您必须考虑画布（`CGContext`）的旋转，因为它们会以倒置的方式出现（翻转），因为坐标Core Graphics 中的原点位于右下角。

```
UIImage *gymLogo=[UIImage imageNamed:@"logo.png"];
CGPoint drawingLogoOrigin = CGPointMake(5,5);
[gymLogo drawAtPoint:drawingLogoOrigin]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:39:58.180

`UIView`这是你想要的一个子类......

你可以把它放在一个`UIScrollView`. `-sizeThatFits:`在您的 superview 期间调用以获取正确的帧大小`-layoutSubviews`。（也适用于您封闭的滚动视图的*contentSize*。）

请注意，我在 UILabel 上包含了一个类别，它返回一个合理的大小`-sizeThatFits:`，您可能希望提供自己的实现。

**查看.h**

```
#import <UIKit/UIKit.h>

@interface View : UIView
@property ( nonatomic, strong, readonly ) UILabel * descriptionLabel ;
@property ( nonatomic, strong, readonly ) UILabel * nameLabel ;
@property ( nonatomic, strong, readonly ) UIImageView * pdfImageView ;

@property ( nonatomic ) CGPDFDocumentRef pdf ;

@end 
```

**查看.m**

```
#import "View.h"

@implementation UILabel (SizeThatFits)
-(CGSize)sizeThatFits:(CGSize)fitSize
{
    return [ self.text sizeWithFont:self.font constrainedToSize:fitSize ] ;
}
@end

@interface View ()
@property ( nonatomic, strong, readonly ) UIImage * pdfImage ;
@end

@implementation View
@synthesize descriptionLabel = _descriptionLabel ;
@synthesize nameLabel = _nameLabel ;
@synthesize pdfImageView = _pdfImageView ;
@synthesize pdfImage = _pdfImage ;

-(void)dealloc
{
    CGPDFDocumentRelease( _pdf ) ;
}

-(CGSize)sizeThatFits:(CGSize)size
{
    CGSize fitSize = (CGSize){ size.width, CGFLOAT_MAX } ;

    CGSize result = { size.width, 0 } ;
    result.height = [ self.headerLabel sizeThatFits:fitSize ].height
        + [ self.label sizeThatFits:fitSize ].height
        + self.pdfImage.size.height * fitSize.width / self.pdfImage.size.width ;
    return result ;
}

-(void)layoutSubviews
{
    CGRect bounds = self.bounds ;
    CGRect slice ;

    CGRectDivide( bounds, &slice, &bounds, [ self.headerLabel sizeThatFits:bounds.size ].height, CGRectMinYEdge ) ;
    self.headerLabel.frame = slice ;

    CGRectDivide( bounds, &slice, &bounds, [ self.label sizeThatFits:bounds.size ].height, CGRectMinYEdge ) ;
    self.label.frame = slice ;

    self.pdfImageView.frame = bounds ;
}

-(void)setPdf:(CGPDFDocumentRef)pdf
{
    CGPDFDocumentRelease( _pdf ) ;
    _pdf = CGPDFDocumentRetain( pdf ) ;
    _pdfImage = nil ;
}

-(UILabel *)descriptionLabel
{
    if ( !_descriptionLabel )
    {
        UILabel * label = [[ UILabel alloc ] initWithFrame:CGRectZero ] ;
        label.numberOfLines = 0 ;
        //
        // ... configure label here
        //
        [ self addSubview:label ] ;
        _descriptionLabel = label ;
    }
    return _descriptionLabel ;
}

-(UILabel *)nameLabel
{
    if ( !_nameLabel )
    {
        UILabel * label = [[ UILabel alloc ] initWithFrame:CGRectZero ] ;
        label.numberOfLines = 0 ;
        //
        // ... configure label here
        //
        [ self addSubview:label ] ;
        _nameLabel = label ;
    }
    return _nameLabel ;
}

-(UIView *)pdfImageView
{
    if ( !_pdfImageView )
    {
        UIImageView * imageView = [[ UIImageView alloc ] initWithFrame:CGRectZero ] ;
        [ self addSubview:imageView ] ;
        _pdfImageView = imageView ;
    }

    return _pdfImageView ;
}

-(UIImage *)pdfImage
{
    if ( !_pdfImage )
    {
        CGPDFPageRef page = CGPDFDocumentGetPage( self.pdf, 1 ) ; // 1 indexed
        CGRect mediaBox = CGPDFPageGetBoxRect( page, kCGPDFMediaBox ) ;
        UIGraphicsBeginImageContextWithOptions( mediaBox.size, NO, self.window.screen.scale ) ;

        CGContextRef c = UIGraphicsGetCurrentContext() ;
        CGContextScaleCTM( c, 1.0f, -1.0f ) ;
        CGContextTranslateCTM( c, 0.0, -mediaBox.size.height ) ;

        CGContextDrawPDFPage( c, page ) ;

        _pdfImage = UIGraphicsGetImageFromCurrentImageContext() ;

        self.pdfImageView.image = _pdfImage ;

        UIGraphicsEndImageContext() ;
    }

    return _pdfImage ;
}

@end 
```

如果需要页码页脚，可以在底部添加另一个 UILabel，遵循相同的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T21:17:28.803

首先您在`pdf_tutorialViewController.h`文件中创建自定义方法

```
- (void)drawImage:(UIImage *)img  atRect:(CGRect)rect inContext:(CGContextRef)ctx; 
```

//////////////pdf_tutorialViewController.m 文件**/////////**

**并在Your method**末尾添加`UIImage`并调用Method 。`drawImage:atRect:inContext:`

 **```
- (CFRange)renderPage:(NSInteger)pageNum withTextRange:(CFRange)currentRange
       andFramesetter:(CTFramesetterRef)framesetter
{
  ////////////////////////////////////////////////////////////////////////////////////
       UIImage *logoimg = [UIImage imageNamed:@"1.png"];
       [self drawImage:logoimg atRect:CGRectMake("Your Size") inContext:currentContext];
       return currentRange;
  ////////////////////////////////////////////////////////////////////////////////////
} 
```

**并添加代码**

```
- (void)drawImage:(UIImage *)img  atRect:(CGRect)rect inContext:(CGContextRef)ctx
{
    UIImage *myImage = (UIImage *)img;
    [myImage drawInRect:rect];
    //[myImage release];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T06:48:16.067

```
NSString *fileName = @"myInfo.pdf";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

if ([passwordString length]) {
    NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:passwordString, kCGPDFContextOwnerPassword, passwordString, kCGPDFContextUserPassword, kCFBooleanFalse, kCGPDFContextAllowsCopying, kCFBooleanFalse, kCGPDFContextAllowsPrinting,  nil]; // Providing Password Protection for PDF File
    UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, dictionary);
    [dictionary release];
} else {
    UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);
}

UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 612.0, heightOfView), nil); //612,792 Width  & Height of the pdf page which we want to generate.
NSString *pngPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.png", 123]];
UIImage *pngImage = [UIImage imageWithContentsOfFile:pngPath];

[pngImage drawInRect:CGRectMake((612 - self.frame.size.width) / 2, 0, self.frame.size.width, heightOfView)]; // Size of the image we want to draw in pdf file.
UIGraphicsEndPDFContext(); 
```**

# git - Git 分支和合并工作流问题。你怎么做呢？

> ID：14436699
> 
> 赞同：3
> 
> 时间：2013-01-21T10:31:10.820
> 
> 标签：git, merge, workflow, branch

这是我们的开发工作流程：

1.  开发人员在新主题分支中处理问题。
2.  完成后，他将分支向上推以进行审查。
3.  我将分支合并到一个开发分支中，并将其推送到登台服务器上的上游。
4.  客户审查更改并批准/拒绝它。

我的问题出现在第 3 步和第 4 步。客户端只能访问临时服务器，因此为了让他看到更改，我必须将主题分支合并到开发分支并将其推送到临时服务器，我通常不这样做不要只合并 1 个分支，而是平均 3 - 4 个。

如果客户拒绝更改并且他需要进一步修改，那么开发人员会在同一主题分支中修复问题，我必须重新合并到开发中。

通过多次将主题分支重新合并到开发中，我在历史上失去了对该问题的跟踪。（有时也会导致冲突）

这是一个“健康”的开发工作流程吗？您有什么建议、改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:19:53.210

> 如果客户拒绝更改并且他需要进一步修改，那么开发人员会在同一主题分支中修复问题，我必须重新合并到开发中。

我宁愿恢复（如[`git revert`](http://git-scm.com/docs/git-revert)）开发分支中被拒绝的更改，并等待开发人员的修复。
通过使用 git revert，我只添加新的提交，而不是更改历史记录（使用 rebase 或 a `git reset`）

这样，下一次提交（相同功能）应该很容易在开发分支中再次合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:45:58.843

只需引入一个暂存分支，它是脏的，不允许任何人分支它。

*   确保您的暂存部署过程处理历史记录重写。如果您的登台服务器从中央存储库中提取，请将拉取替换为 a`fetch`和 a`reset --hard origin/branch`
*   每当您希望客户审核更改时，只需使用之前的流程 - 将其合并，如果需要更改，请重新合并。
*   偶尔合并`develop`一次，以确保您拥有所有的变化。如果您当前没有任何评论（=`staging`应该与 同步`develop`），请重置`staging`为`develop`( `git checkout staging`; `git reset --hard develop`)
*   `git reset --hard HEAD~4`由于staging 应该是肮脏的，你总是可以进行疯狂的重写，比如只要返回几步（
*   只有在客户批准后才将您的更改合并到开发中。

这样，您就不必担心在您并不真正关心历史（向客户显示内容）的过程中生成一个很好的历史，并且您的`develop`分支会获得非常干净的历史。

如果您担心必须多次解决合并冲突，请查看[git 的 rerere 功能](http://git-scm.com/2010/03/08/rerere.html)

# mysql - MySQL视图花费太多时间来选择数据

> ID：14436705
> 
> 赞同：2
> 
> 时间：2013-01-21T10:31:27.310
> 
> 标签：mysql, view, query-optimization

在我正在处理的网页中，我需要根据三个表格中的不同用户详细信息显示一些统计信息。所以我有以下查询，我加入了更多不同的表：

```
SELECT *
FROM `user` `u`
LEFT JOIN `subscriptions` `s` ON `u`.`user_id` = `s`.`user_id`
LEFT JOIN `devices` `ud` ON `u`.`user_id` = `ud`.`user_id`
GROUP BY `u`.`user_id` 
```

当我使用它执行查询时`LIMIT 1000`，大约需要**0.05**秒，并且由于我在很多查询中使用所有三个表中的数据，所以我决定将其放入`VIEW`：

```
CREATE VIEW `user_details` AS ( the same query from above ) 
```

现在当我运行时：

```
SELECT * FROM user_details LIMIT 1000 
```

大约需要**7-10**秒。

所以我的问题是我可以做些什么来优化视图，因为查询似乎很快，或者我应该整个查询而不是视图？

编辑：这是`EXPLAIN SELECT * FROM user_details`返回的

```
+----+-------------+------------+--------+----------------+----------------+---------+------------------------+--------+-------+
| id | select_type | table      | type   | possible_keys  | key            | key_len | ref                    | rows   | Extra |
+----+-------------+------------+--------+----------------+----------------+---------+------------------------+--------+-------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL           | NULL           | NULL    | NULL                   | 322666 |       |
|  2 | DERIVED     | u          | index  | NULL           | PRIMARY        | 4       | NULL                   | 372587 |       |
|  2 | DERIVED     | s          | eq_ref | PRIMARY        | PRIMARY        | 4       | db_users.u.user_id     |      1 |       |
|  2 | DERIVED     | ud         | ref    | device_id_name | device_id_name | 4       | db_users.u.user_id     |      1 |       |
+----+-------------+------------+--------+----------------+----------------+---------+------------------------+--------+-------+ 
```

**一组 4 行（8.67 秒）**

这是`explain`查询返回的内容：

```
+----+-------------+-------+--------+----------------+----------------+---------+------------------------+--------+-------+
| id | select_type | table | type   | possible_keys  | key            | key_len | ref                    | rows   | Extra |
+----+-------------+-------+--------+----------------+----------------+---------+------------------------+--------+-------+
|  1 | SIMPLE      | u     | index  | NULL           | PRIMARY        | 4       | NULL                   | 372587 |       |
|  1 | SIMPLE      | s     | eq_ref | PRIMARY        | PRIMARY        | 4       | db_users.u.user_id     |      1 |       |
|  1 | SIMPLE      | ud    | ref    | device_id_name | device_id_name | 4       | db_users.u.user_id     |      1 |       |
+----+-------------+-------+--------+----------------+----------------+---------+------------------------+--------+-------+ 
```

**3 行一组（0.00 秒）**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T10:40:32.013

如果涉及到性能，视图和连接是非常糟糕的。这或多或少适用于所有关系数据库管理系统。听起来很奇怪，因为这就是这些系统的设计目的，但这是真的。

如果这是在您的页面上大量使用的查询，请尽量避免连接：而是创建一个由三个表填充的真实表（而不是视图）。您可以使用触发器自动化该过程。因此，每次将条目插入其中一个原始表时，触发器都会注意将数据传播到物理`user_details`表。

这种策略当然意味着对设置进行一次性投资，但您肯定会获得*更好*的性能。

# vb.net - 从 sql 表填充数据网格视图

> ID：14436710
> 
> 赞同：0
> 
> 时间：2013-01-21T10:31:40.383
> 
> 标签：vb.net, sql-server-2005, datagridview

我在`Datagridview`. 我想用 sql 数据库中的数据填充前两列。我试着填补`Datagridview`。它不显示数据，但会生成行。

这是我的代码：

```
getConnect()
    Try
        Conn.Open()
        Dim strSQL As String = "SELECT EMP_ID, EMP_NAME FROM EMPLOYEE ORDER BY EMP_NAME ASC"
        Conn.Close()
        Dim da As New SqlDataAdapter(strSQL, Conn)
        Dim dt As New DataTable("EMPLOYEE")
        da.Fill(dt)
        ATCGRID.DataSource = dt
    Catch ex As SqlException
        MsgBox(ex.Message, MsgBoxStyle.Critical, "SQL Error")
    Catch ex As Exception
        MsgBox(ex.Message, MsgBoxStyle.Critical, "General Error")
    End Try 
```

请检查我的代码并给我解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:46:34.970

试试这个代码。

```
getConnect()
Try
    Conn.Open()
    Dim strSQL As String = "SELECT EMP_ID, EMP_NAME FROM EMPLOYEE ORDER BY EMP_NAME ASC"
    Conn.Close()
    Dim da As New SqlDataAdapter(strSQL, Conn)
    Dim ds As new Dataset
    da.Fill(ds,"EMPLOYEE")
    ATCGRID.DataSource = ds.tables(0)
Catch ex As SqlException
    MsgBox(ex.Message, MsgBoxStyle.Critical, "SQL Error")
Catch ex As Exception
    MsgBox(ex.Message, MsgBoxStyle.Critical, "General Error")
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T12:02:57.980

感谢`sub getConnect()`它完美地工作。我的也有效。

```
Sub RefreshGrid()
 ' refresh the datagrid
  OpenConnect()

CmdSql.CommandText = "SELECT manager_id,manager_name FROM   tbl_Manager"
    Dim ds As DataSet = New DataSet()
    adp.Fill(ds)
    dgvMgr.DataSource = ds.Tables(0)
    'THIS MODULE WORKED JUST Please Fill Property Columns 
    'DataPropertyName as Field Database, 
    'Eg : Column1-DataPropertyName=manager_id and so on.
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T12:13:08.303

公共子 OpenConnect()

```
 Try
        CmdSql.Connection = conn
        conn.Open()
        CmdSql.CommandType = CommandType.Text

    Catch ex As Exception
        ' MsgBox(ex.Message)
    End Try
End Sub 
```

'这很完美

# jquery-mobile - 如何在primefaces mobile中启用ajax页面加载

> ID：14436712
> 
> 赞同：1
> 
> 时间：2013-01-21T10:31:51.790
> 
> 标签：jquery-mobile, jsf-2, primefaces, mobile-website

我们如何在 primefaces-mobile 中通过 ajax 启用页面加载。在jquery mobile中，ajax页面加载是默认的，如何在primefaces-mobile中实现这一点[我在primefaces网站上读到primefaces mobile由jquery mobile提供支持，那么为什么不通过ajax加载页面。]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:48:04.993

通过查看 primefaces-mobile-web 页面的页面源，我发现了以下线索

```
$(document).bind('mobileinit', function(){
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
}); 
```

现在您所要做的就是**找到一种方法来覆盖 mobileinit 事件，并将上述变量设置为 true**。我只是在我的`h:head`标签中包含了以下脚本：

```
$.mobile.ajaxEnabled = true;
$.mobile.linkBindingEnabled = true;
$.mobile.hashListeningEnabled = true;
$.mobile.pushStateEnabled = true; 
```

这符合我的目的，但恐怕这可能会影响 primefaces-mobile 控件的行为，例如表单提交。

# iphone - 例外 , 崩溃的应用程序

> ID：14436716
> 
> 赞同：0
> 
> 时间：2013-01-21T10:32:44.180
> 
> 标签：iphone, ios, objective-c, xcode, uitextfield

这就是我得到的

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Can't do regex matching on object <UITextField: 0x7165730; frame = (121 208; 179 30); text = 'mail@test.com'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; gestureRecognizers = <NSArray: 0x7166ca0>; layer = <CALayer: 0x715ed50>>.'
*** First throw call stack:
(0x1c94012 0x10d1e7e 0xbfbb5e 0xb38bae 0xb383dc 0xb37e9a 0x3c04 0x29a9 0x10e5705 0x1c920       0x1c8b8 0xdd671 0xddbcf 0xdcd38 0x4c33f 0x4c552 0x2a3aa 0x1bcf8 0x1befdf9 0x1befad0 0x1c09bf5 0x1c09962 0x1c3abb6 0x1c39f44 0x1c39e1b 0x1bee7e3 0x1bee668 0x1965c 0x1f95 0x1e95)
libc++abi.dylib: terminate called throwing an exception 
```

抱歉，如果太大，但我不明白那个错误，我从 .xib Autolayout 中禁用，因为这使我的应用程序在旧设备中崩溃，我的应用程序从未在该 TextField 中崩溃，这是电子邮件的文本字段。

提前致谢。

编辑：

我的代码：

```
NSString *mail = [email.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
if ([self validarEmail:mail])
{
   // code
}

-(BOOL) validarEmail:(NSString *) mail // From internet made for objective-c
{
BOOL stricterFilter = YES;
NSString *stricterFilterString = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
NSString *laxString = @".+@.+\\.[A-Za-z]{2}[A-Za-z]*";
NSString *emailRegex = stricterFilter ? stricterFilterString : laxString;
NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
return [emailTest evaluateWithObject:email];
} 
```

如果我评论 IF 应用程序会正常，否则会崩溃。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T10:34:53.910

`UITextField`当我假设您打算在它的`text`属性上测试它时，您正在尝试在对象上测试正则表达式。

## 自 OP 编辑​​问题后编辑

注意这一行：

```
return [emailTest evaluateWithObject:email]; 
```

您的“电子邮件”对象是您的文本字段，而不是您的字符串。您的字符串被调用`mail`（它作为参数传递到方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:43:04.210

您正在尝试将 UITextField 对象传递给正则表达式，请确保您发送给正则表达式的对象是 NSString ，否则您将遇到此错误。

你应该使用类似的东西

```
NSString *myString = textField.text; 
```

然后将该 NSString 传递给正则表达式。

如果您要经常使用正则表达式函数，您可能应该检查以确保您传递的变量是 NSString 以防止将来出现任何异常。

```
if ([myString isKindOfClass:[NSString class]]) { /* Code */ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:54:48.950

问题在于这一行：

```
return [emailTest evaluateWithObject:email]; 
```

您需要将其更改为：

```
return [emailTest evaluateWithObject:email.text]; 
```

或者

```
return [emailTest evaluateWithObject:mail]; 
```

# java - sql查询，java字符串

> ID：14436718
> 
> 赞同：0
> 
> 时间：2013-01-21T10:32:52.953
> 
> 标签：java, sql, struct

使用 java 开发 Web 应用程序。我有超过 40 行的 SQL 查询，分别在查询结束时使用 " 、 "+ 。当我想在两种转换中进行任何修改时，将字符串转换为查询非常困难

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:38:26.540

你不能使用 PreparedStatement 吗？如果可能，请使用 ORM 工具，例如 hibernate。这将简化您的代码（当然还有其他好处）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:10:15.217

如果您在维护 sql 查询时遇到麻烦，那么您可以尝试转移到 spring JDBC 模板，您可以在其中将查询存储在带有占位符/绑定变量的 config/props 文件中。这显着减少了构造字符串查询的错误部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T10:28:04.427

您可以通过创建这种方法简单地概括您的查询。例子：

```
private String DBFormatter="'";

public String FormatSQl(String value)
{
      return DBFormatter + value + DBFormatter;

} 
```

# java - 返回两个字符串作为方法签名

> ID：14436719
> 
> 赞同：0
> 
> 时间：2013-01-21T10:32:53.257
> 
> 标签：java, oop

我有以下方法，我需要返回两个字符串：

1.  type.getName() 的值
2.  field.getName() 的值

最好的方法是什么？

```
public static void getClassMetaData(List<Object> listClsObj) {
    ....

    for (Field field : declaredFields) {
         Class<?> type = field.getType();

         System.out.println(type.getName());
         System.out.println(field.getName());
      }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T10:35:47.187

我宁愿只返回`Field`，因为您可以从它本身获取 the`type`和其他信息。`field`

然后在调用点，调用方法 -`field.getType()`以获取类型。

* * *

似乎您正在使用类的所有*声明字段*，在这种情况下，您可以只返回`List<Field>`：-

```
public static List<Field> getClassMetaData(List<Object> listClsObj) {

    // Rather than iterating over `declaredField`, just return it
    return declaredFields;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:35:39.917

您当然可以返回一个 String 数组，但我认为最好简单地返回 Field

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T10:39:56.927

返回任意数量的元素的更灵活和正确的方法 - 返回数据集合的 List 实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T10:39:44.783

您可以返回包含两个字段的大小为 2 的数组。

```
return new String[]{type.getName(),field.getName()}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T11:04:36.433

当您最终在其他代码中使用字段对象的属性时，您应该尝试返回一个列表。

另外，这将使该方法更易于维护。该方法的使用者可以决定它需要来自 Field 对象的哪些数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-21T10:41:55.500

您可以只返回 Field 实例，而不是尝试返回 2 个字符串。否则，您可以返回包含 2 String 的对象，例如 Pair 对象或自定义对象。

```
class Pair<F, S> {

    private final F first;
    private final S second;

    public Pair(F first, S second) {
        this.first = first;
        this.second = second;
    }
    // getter for first and second
} 
```

# android - 更改三星 Galaxy 相机上的默认 BOOT_COMPLETED Activity

> ID：14436723
> 
> 赞同：3
> 
> 时间：2013-01-21T10:33:10.200
> 
> 标签：android, android-intent

我的问题特别涉及三星 Galaxy 相机设备。它附带一个定制的相机应用程序。我猜三星自己开发的。由于该设备可以被视为相机而不是带相机的手机，因此他们似乎决定他们的相机应用程序应该在启动时启动，而不是其他设备在启动完成后将用户带到主屏幕。

现在，在我们的场景中，我们将设备与我们自己的应用程序一起发布，该应用程序具有自己的相机接口。我们可以在 kiosk 模式下运行我们的应用程序，但我们希望允许用户使用其他可能对他的日常工作也有帮助的应用程序。

所以理想情况下，设备应该在启动完成后启动主屏幕。然后用户可以决定启动我们的应用程序或其他应用程序。但是如果这是不可能的，那么如果我们的应用程序在启动而不是主屏幕上启动也是可以的（因为用户将使用主屏幕按钮到达主屏幕）

由于我没有看到任何机会在启动完成后强制显示主屏幕，因此我尝试默认启动我们自己的应用程序。为了实现这一点，我创建了一个带有以下过滤器的接收器：

```
<intent-filter android:priority="1000">
<action android:name="android.intent.action.BOOT_COMPLETED"/>
</intent-filter> 
```

收到意图后，我启动应用程序的主 Activity。

结果，在启动设备后，三星的默认相机应用程序将首先启动。你会看到他们的主要活动和最烦人的部分：相机镜头将完全展开。在此之后的一瞬间，我们的应用程序会自动启动。

我的猜测是，三星的相机应用程序也会对启动完成事件做出反应。我们有没有可能阻止他们的应用程序启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:32:47.217

我相信这可以实现 - 尽管在一个复杂的庄园 - 无需使用 DevicePolicyManager 生根。通过使您的应用程序成为设备管理员并禁用相机，内置相机应用程序不会在开机时启动（也不会按下相机按钮）。一旦您的应用程序启动，请重新启用相机并享受乐趣。

我没有机会创建代码（并且会在我有的时候更新这个答案），但我已经使用 Play 商店中的 DisableCameraDevice 应用程序进行了一定程度的测试。使用此应用程序设置，相机应用程序不会在启动时启动，而我的接收 BOOT_COMPLETE 的应用程序会在几秒钟的主屏幕时间后启动。

它也不会停止相机按钮事件（但会停止相机应用程序），因此您可以为此执行相同操作（这似乎也忽略了 android:priority 值）。

如果你想走得更远，你甚至可以让你的相机应用程序响应 CommonsWare 提到的 ACTION_MAIN、CATEGORY_HOME 意图并坚持选择它作为主屏幕应用程序。

结合一个不显示主页/返回按钮的全屏应用程序，您可以很好地锁定一个防呆相机给客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T06:06:26.947

相机应用程序使用附加到接收器的 BOOT_COMPLETED 权限。它是一个系统应用程序，因此您需要 root 才能在系统级别对其进行修改。如果您正在打包自己的固件，这将不是问题。标准启动器没有标准启动权限，但您的应用程序会。这将通过简单地删除权限来避免无法启动任何内容的问题。此外，优先级 499 最好落在 500 的限制内。

# android - 从退出的活动中调用的应用程序

> ID：14436724
> 
> 赞同：1
> 
> 时间：2013-01-21T10:33:11.967
> 
> 标签：android, android-intent

当用户单击按钮时，我在我的应用程序中使用了以下代码退出它。这是工作。但问题是，当我再次打开应用程序时，它不会从主活动启动。相反，它将从我退出的活动开始。

```
Intent i=new Intent();
i.setAction(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_HOME);
FarmerDetails.this.startActivity(i);
finish(); 
```

完整代码：

```
public class FarmerDetails extends Activity {
Button ok,old,ok1,exit;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.labour); 
    ok=(Button)findViewById(R.id.button1);
    ok1=(Button)findViewById(R.id.button2);
    exit=(Button)findViewById(R.id.btn_exit);
    exit.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {

            Intent i=new Intent();
            i.setAction(Intent.ACTION_MAIN);
            i.addCategory(Intent.CATEGORY_HOME);
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            FarmerDetails.this.startActivity(i);
            finish();

        }

    });
     ok1.setOnClickListener(new OnClickListener() {

         public void onClick(final View v) {
             Intent next=new Intent(FarmerDetails.this,Fetch.class);
             startActivity(next);

         }
     });   

     ok.setOnClickListener(new OnClickListener() {

         public void onClick(final View v) {
             Intent next=new Intent(FarmerDetails.this,newfarmer1.class);
             startActivity(next);

         }
     });   

}
public void onDestroy()
{
    System.gc();
    android.os.Process.killProcess(android.os.Process.myPid());
    super.onDestroy();
}

} 
```

谁能告诉问题是什么以及如何避免？

退出后我需要从主活动启动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:50:54.363

我找到了答案。当用户按下退出按钮时，它会加载在您的应用启动时运行的第一个 Activity，在我的例子中是“main”。

```
Intent i = new Intent(getApplicationContext(), main.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i.putExtra("EXIT", true);
startActivity(i); 
```

上面的代码清除了除 main 之外的所有活动。main 是用户运行程序时启动的第一个活动。

然后将此代码放入主程序的 onCreate 中，以在传递“退出”消息时发出自毁信号。

```
if (getIntent().getBooleanExtra("EXIT", false)) {
    finish();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:46:01.377

在启动此 Activity B 时使用 callerActivity A 的 startActivityForResult 并在调用 finish() setResult(someint) 和 A 的 onActivityResult 如果 resultcode==someint 完成活动 A 等等..您需要销毁您的主要活动才能从主要活动重新启动活动

# service - Exchange Web 服务 (EWS) 中的多个模拟线程

> ID：14436726
> 
> 赞同：3
> 
> 时间：2013-01-21T10:33:14.260
> 
> 标签：service, web, outlook, exchange-server, exchangewebservices

在 EWS 中运行多个用户模拟时遇到问题，当我想在每个模拟人日历（可能 100 人）上接收通知时。

目前我有一个有权模拟所有其他用户的 Outlook 帐户，并且所有 ExchangeService 对象都获得此帐户凭据

简短的版本是，当我尝试通过唯一 ID 绑定到约会时，只要我只有一个线程在运行，它就可以工作。当我启动一个包含具有自己订阅的新 Exchangeservice 的新线程时，我没有收到任何关于 Appointment.Bind()-request 的响应。

当我运行我的程序的两个实例时，每个实例只有一个线程，它工作正常，但是一旦我使用新的 ExchangeService 启动一个新线程，Appointment.Bind() 就不会给出任何响应。

奇怪的是，两周前它运行良好，但突然停止运行，我没有更改我的代码。

我创建了一个我的问题的快速演示：

```
class Program
{
    static void Main(string[] args)
    {
        var x = new OutlookListener("user1@server.com");
        var y = new OutlookListener("user2@server.com");
        new Thread(x.Start).Start();
        new Thread(y.Start).Start();
        while (true)
        {

        }
    }
}
class OutlookListener
{
    private ExchangeService _ExchangeService;
    private AutoResetEvent _Signal;
    public OutlookListener(string emailToImp)
    {
        _ExchangeService = new ExchangeService(ExchangeVersion.Exchange2010_SP1)
        {
            Credentials = new NetworkCredential("superuser@server.com", "password"),
            Url = new Uri("exchangeUrl"),
            ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, emailToImp)
        };
    }
    public void Start()
    {
        var subscription = _ExchangeService.SubscribeToStreamingNotifications(new FolderId[] { WellKnownFolderName.Calendar },
                                                                  EventType.Created);
        var connection = CreateStreamingSubscription(_ExchangeService, subscription);
        Console.Out.WriteLine("Subscription created.");
        _Signal = new AutoResetEvent(false);
        _Signal.WaitOne();
        subscription.Unsubscribe();
        connection.Close();
    }

    private StreamingSubscriptionConnection CreateStreamingSubscription(ExchangeService service, StreamingSubscription subscription)                                                                         
    {
        var connection = new StreamingSubscriptionConnection(service, 30);
        connection.AddSubscription(subscription);
        connection.OnNotificationEvent += OnNotificationEvent;
        connection.OnSubscriptionError += OnSubscriptionError;
        connection.OnDisconnect += OnDisconnect;
        connection.Open();

        return connection;
    }
    private void OnNotificationEvent(object sender, NotificationEventArgs args)
    {
        // Extract the item ids for all NewMail Events in the list.
        var newMails = from e in args.Events.OfType<ItemEvent>()
                       where e.EventType == EventType.Created
                       select e.ItemId;

        foreach (var newMail in newMails)
        {
            var appointment= Appointment.Bind(_ExchangeService, newMail); //This is where I dont get a response!
            Console.WriteLine(appointment.Subject);
        }
    }
    private void OnSubscriptionError(object sender, SubscriptionErrorEventArgs args)
    {
    }
    private void OnDisconnect(object sender, SubscriptionErrorEventArgs args)
    {
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T11:15:04.603

我遇到了同样的问题，发现我的 EWS 解决方案受到两个因素的限制。[System.Net.ServicePointManager.DefaultConnectionLimit](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit%28v=vs.100%29.aspx)默认设置为 2，我已将其更改为 20，我认为这与 Exchange Online 的限制策略相匹配。

其次，ExchangeService 对象上的[ConnectionGroupName](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28MICROSOFT.EXCHANGE.WEBSERVICES.DATA.EXCHANGESERVICEBASE.CONNECTIONGROUPNAME%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)属性可用于将连接汇集到不同的相关组中，这些组具有与 DefaultConnectionLimit 属性一致的并发连接限制。

覆盖设置的一种方法是将 ConnectionGroupName 属性设置为您创建的每个 ExchangeService 对象的唯一值。

```
ExchangeService exchangeService = new ExchangeService()
{
    ConnectionGroupName = Guid.NewGuid().ToString()
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:02:43.793

为什么需要多个线程？

在我的例子中，我已经为我想模拟的每封电子邮件创建了一个基于 smtpaddress 的服务字典，并且我都订阅了它们。一切都可以在一个线程中发生，来自任何用户的所有通知都将在 OnNotificationEvent 中处理。[此代码仅显示逻辑，不完整用于完整编译和运行]

```
 var service = new ExchangeService(exchangeVersion);

            var serviceCred = ((System.Net.NetworkCredential)(((WebCredentials)(Services.First().Value.Credentials)).Credentials));

            service.Credentials = new WebCredentials(serviceCred.UserName, serviceCred.Password);

            service.AutodiscoverUrl(userSmtp, RedirectionUrlValidationCallback);

            service.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, userSmtp);

            Services.Add(userSmtp, service); 
```

请注意，Services.First().Value 是可以模拟所有其他用户的服务，这里它被克隆为用户的编号。

之后订阅所有服务（请注意，现在每个服务都在模拟不同的用户）

```
foreach (var service in Services.Values)
            {
                SubscribeToService(service);
            } 
```

SubscribeToService 的定义如下

```
private void SubscribeToService(ExchangeService service)
        {

                if (service.ImpersonatedUserId == null)
                    return;
                if (service.Url == null)
                    return;

                var serviceName = service.ImpersonatedUserId.Id;

                var streamingSubscription =
                                      service.SubscribeToStreamingNotifications(new FolderId[] { WellKnownFolderName.DeletedItems, WellKnownFolderName.Calendar },
                                                    EventType.FreeBusyChanged, EventType.Moved, EventType.Created, EventType.Modified);

                if (!Connections.ContainsKey(service.Url))
                {
                    Connections.Add(service.Url, new StreamingSubscriptionConnection(service, 30));

                }
                var connection = Connections[service.Url];

                CloseConnection(connection);

                if (!_subscriptions.ContainsKey(serviceName))
                {
                    _subscriptions.Add(serviceName, streamingSubscription);
                    connection.AddSubscription(streamingSubscription);
                }

            }

        } 
```

所有这些都可以在一个线程中发生，我希望我的回答能帮助你干杯

# c# - c# regex.ismatch 使用变量

> ID：14436728
> 
> 赞同：7
> 
> 时间：2013-01-21T10:33:19.980
> 
> 标签：c#, regex

我有以下代码可以正常工作，但我需要用变量替换站点地址...

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;  // Get the URL

bool match = Regex.IsMatch(url, @"(^|\s)http://www.mywebsite.co.uk/index.aspx(\s|$)"); 
```

我尝试了以下方法，但它不起作用，有什么想法吗？？？

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;  // Get the URL
string myurl = "http://www.mywebsite.co.uk/index.aspx";

bool match = Regex.IsMatch(url, @"(^|\s)"+myurl+"(\s|$)"); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T10:35:28.720

您缺少一个`@`：

```
bool match = Regex.IsMatch(url, @"(^|\s)" + myurl + @"(\s|$)"); 
```

您需要额外的原因`@`是因为`@`仅适用于紧随其后的字符串文字。它不适用于该行的整个其余部分。

您还应该考虑[转义](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)您的 URL：

```
bool match = Regex.IsMatch(url, @"(^|\s)" + Regex.Escape(myurl) + @"(\s|$)"); 
```

# sql - 连接/合并两个表以在 SQL 中创建第三个表

> ID：14436730
> 
> 赞同：0
> 
> 时间：2013-01-21T10:33:27.610
> 
> 标签：sql, sybase

我有 2 个不同的表，如下所示：

```
--------Table 1---------------------------------------------------------
Cat1           Cat2          Cat3        Value1
a                             d1           13
b              e1                          13
a              e2             d1           13
c                             d2           13
a              e1                          13
a                             d1           13
--------Table 2 -------------------------------------------------
Cat1           Cat2           Cat3       Value2    
a              e2             d1           113
c                             d2           132    
a                             d1           134
a                             d1           131
b              e1                          113
a              e1                          133 
```

上表的 Cat1 和 Cat2 相同，但顺序可能不同。我想合并上面的两个表，以便所需的表如下所示：

```
--------Desired Table---------------------------------------------------------
Cat1           Cat2          Cat3        Value1      Value2
a                             d1           13        134 
b              e1                          13        113
a              e2             d1           13        113
c                             d2           13        132
a              e1                          13        113
a                             d1           13        134 
```

我显然使用的是旧版本的 sybase。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:46:21.050

你是这个意思吗？

```
INSERT INTO table3 (Cat1,Cat2,Cat3,Value1,Value2)
SELECT t1.Cat1, t1.Cat2, t1.Cat3, t1.Value1, t2.value2
FROM table1 as t1, table2 as t2
where t1.Cat1 = t2.Cat2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:05:52.537

试试这个（根据我的 ANSI SQL 经验）：

```
 SELECT a.cat1,
           a.cat2,
           a.cat3,
           a.value1,
           b.value2
    FROM tab1 a
    LEFT OUTER JOIN
      (SELECT cat1,
              cat2,
              cat3,
              max(value2) value2
       FROM tab2
       GROUP BY cat1,
                cat2,
                cat3) b ON a.cat1 = b.cat1
    AND a.cat2 = b.cat2
    AND a.cat3 = b.cat3; 
```

# asp.net - 如何使用asp.net和sql server 2008计算一天对我网站的访问次数

> ID：14436731
> 
> 赞同：1
> 
> 时间：2013-01-21T10:33:38.797
> 
> 标签：asp.net, sql-server-2008, c#-4.0

谁能给我一个在asp.net中实现每日点击计数器的路线图我知道如何获得总访客但我不知道实现每日访客计数器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:35:13.823

有多种方法..您可能有一个名为 HitCounter 的表，其中 Date 和 Count 作为列

然后您可以转到 Global.asax 并编写一些代码 Application_BeginRequest 以首先检查日期列中的今天日期并通过将其递增 1 来更新计数器

但我更喜欢免费服务，如谷歌分析或[http://www.e-zeeinternet.com/](http://www.e-zeeinternet.com/)

# spring - 使用 Spring 但不使用 Hibernate 分发事务

> ID：14436733
> 
> 赞同：1
> 
> 时间：2013-01-21T10:33:43.363
> 
> 标签：spring, transactions, spring-3

我尝试在没有 Java EE（JBoss 之类的应用服务器）的情况下仅使用 tomcat 在 Spring 中进行全局（分布式）事务。涉及到两个数据库，第一个是 PostgreSQL 数据库，第二个是 MS SQLServer 数据库。有没有办法在不使用休眠的情况下做到这一点？

我使用 atomikos API 进行了尝试，但如果没有休眠会话，我不知道该怎么做。我认为基于 JDBC 或 Spring 附带的其他一些工具会很棒。但我不知道该怎么做。

我的 Spring 配置如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jdbc="http://www.springframework.org/schema/jdbc" 
    xmlns:util="http://www.springframework.org/schema/util"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Get database driver XA properties from file -->
    <util:properties id="jdbcConfiguration1" location="classpath:jdbcconfiguration1.properties"/>
    <util:properties id="jdbcConfiguration2" location="classpath:jdbcconfiguration2.properties"/>

    <bean id="dataSourceA"
        class="com.atomikos.jdbc.AtomikosDataSourceBean" init-method="init" destroy-method="close">
        <property name="uniqueResourceName"><value>XADBMS01</value></property>
        <property name="xaDataSourceClassName"><value>org.postgresql.xa.PGXADataSource</value></property>
        <property name="xaProperties" ref="jdbcConfiguration1"/>          
        <property name="poolSize"><value>1</value></property>
    </bean>

    <bean id="dataSourceB"
        class="com.atomikos.jdbc.AtomikosDataSourceBean" init-method="init" destroy-method="close">           
         ...
        <property name="poolSize"><value>1</value></property>
    </bean>    

    <!-- Construct Atomikos UserTransactionManager, needed to configure Spring -->
    <bean id="atomikosTransactionManager" class="com.atomikos.icatch.jta.UserTransactionManager" 
          init-method="init" destroy-method="close">
        <!--  when close is called, should we force transactions to terminate or not? -->
        <property name="forceShutdown">
            <value>true</value>
        </property>
    </bean>

    <!-- Also use Atomikos UserTransactionImp, needed to configure Spring  --> 
    <bean id="atomikosUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp">
        <property name="transactionTimeout"><value>300</value></property>
    </bean>

    <!-- Configure the Spring framework to use JTA transactions from Atomikos -->
    <bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager"><ref bean="atomikosTransactionManager"  /></property>
    <property name="userTransaction"><ref bean="atomikosUserTransaction"  /></property>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

   ......

</beans> 
```

是否需要使用休眠？我不想使用休眠，因为我认为它对我的需要来说很复杂。是否有可能做到“基于弹簧”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:36:48.170

所以，你已经配置了两个`DataSource`s，想知道如何以与`JtaTransactionManager`你声明的一致的方式使用。

Spring 提供了两种选择：

*   （推荐）使用[`JdbcTemplate`](http://static.springsource.org/spring/docs/3.2.0.RELEASE/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)。`JdbcTemplate`自动参与当前事务的操作。

*   用于`DataSourceUitls.getConnection()`获取一个`Connection`知道当前事务的对象，并对其执行任意 JDBC 操作。

在这两种情况下，您都需要在代码中使用`@Transactional`or定义事务边界`TransactionTemplate`，如[11\. 事务管理](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)中所述。

# android - 从列表视图适配器类从一个活动导航到另一个活动

> ID：14436736
> 
> 赞同：-2
> 
> 时间：2013-01-21T10:33:51.967
> 
> 标签：android

我必须在适配器类的列表视图项中单击图像时导航到另一个活动。这是我的适配器类：

```
 public class RestaurantAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<String> rest,location,id;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 
    Context c;
    public RestaurantAdapter(Activity a,Context context, ArrayList<String> restaurants, ArrayList<String> location2 ,ArrayList<String> restid) {
       activity = a;
        rest=restaurants;
        location=location2;
        id=restid;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      //  imageLoader=new ImageLoader(activity.getApplicationContext());
 c=context;
    }

    public int getCount() {
        return rest.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.listview_layout, null);
        vi.setClickable(true);
        vi.setFocusable(true);
        TextView text=(TextView)vi.findViewById(R.id.txt);;
        TextView f=(TextView)vi.findViewById(R.id.cur);;
        TextView r=(TextView)vi.findViewById(R.id.resid);;
        ImageView image=(ImageView)vi.findViewById(R.id.list_image);
       text.setText(rest.get(position));
       f.setText(location.get(position));
       r.setText(id.get(position));
       image.setOnClickListener(new View.OnClickListener() {

          @Override
          public void onClick(View view) {

                Intent intent=new Intent(c,UserSettings.class);
                intent.putExtra("id",id.get(position) );
                intent.putExtra("resname", rest.get(position));
                intent.putExtra("location", location.get(position));
                c.startActivity(intent);
          }

        });

        return vi;
    } 
```

但它在这条线上给了我例外

```
c.startActivity(intent); 
```

有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:38:06.837

利用

```
ActivityName.this.startActivity(intent) 
```

在你的情况下使用

```
 a.startActivity(intent) 
```

或检查您的清单中是否声明了 UserSetting 活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:42:34.213

试试这个[链接](https://stackoverflow.com/questions/7510868/how-to-call-an-activity-from-listview-adapter)

```
context.startActivity(context, GoToClass.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:44:30.270

改用活动上下文..

```
activity.startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:40:47.310

尝试这个：

```
 Intent intent = new Intent(RestaurantAdapter.this, UserSettings.class);

            startActivity(intent); 
```

# installation - 防止卸载 C++ 可再发行组件

> ID：14436739
> 
> 赞同：3
> 
> 时间：2013-01-21T10:33:59.480
> 
> 标签：installation, windows-installer

我在我的产品中使用[高级安装程序。](http://www.advancedinstaller.com)作为安装的一部分，安装程序会安装我的产品运行所需的 c++ 可再发行组件。我的问题是如何防止用户在添加/删除程序中删除 c++ 可再发行安装？是否可以选择在安装程序安装的第 3 方产品上使用引用计数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:02:16.377

您是否考虑过[使用合并模块来安装您的可再发行组件](http://msdn.microsoft.com/en-us/library/ms235290%28v=vs.80%29.aspx)？而不是单独的独立安装程序。Advanced Installer 也支持此功能。

这应该可以防止它们出现在控制面板中，但它们也会与您的应用程序一起被卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:52:21.643

如果您想阻止用户从添加/删除程序中删除可再发行安装，请参阅 MSDN 文档：[使用 Windows Installer 配置添加/删除程序](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/2eb00fe5-e441-4fce-9623-81a089269a2b)。您可以使用[ARPSYSTEMCOMPONENT 属性](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/fa3510b4-c4de-4261-ae6c-4292b88432ef)来防止可再发行组件显示在控制面板的添加或删除程序列表中。这应该隐藏可再发行安装，但您仍然可以使用 Windows Installer 安装、卸载、修复和重新安装应用程序。如果用户卸载您的应用程序，它应该被设计为也卸载可再发行组件。使用并发安装的推荐替代方法是使用安装应用程序和外部 UI 处理程序依次安装多个 Windows Installer 程序包。

但是请注意，[Microsoft 建议](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/ff48d995-fe6f-4d1b-898d-67574ed3c5b7#concurrent_installs)不要使用[并发安装](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/579ae4ee-47a0-440e-81ca-ea8bf60c5349)来安装或更新已发布的产品。并发安装操作会在当前运行的安装过程中安装另一个 Windows Installer 程序包。

# django - 以编程方式向组添加权限的正确方法是什么

> ID：14436740
> 
> 赞同：7
> 
> 时间：2013-01-21T10:34:04.663
> 
> 标签：django, permissions

我想向组添加（已经存在，通过元标记中的权限定义）权限并寻找正确的位置。我必须确保在 sync_db 命令之后，所有组都分配了正确的权限。

我想连接一个 post_syncdb 信号，但信号文档说：

> 重要的是，该信号的处理程序执行幂等更改（例如，不更改数据库），因为如果刷新管理命令也在 syncdb 命令期间运行，这可能会导致刷新管理命令失败。

因此，可能不建议有人在通过 sync_db_post 信号调用的管理命令中向组添加权限。

我计划像这样设置权限：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    company = models.ForeignKey(Company, related_name='user_profiles')
    department = models.ForeignKey(Department, related_name='user_profiles')

    class Meta:
        permissions = (
            ('admin_section_access', 'Access to front-end admin section'),
        ) 
```

在管理命令中：

```
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import Group, Permission
from django.contrib.contenttypes.models import ContentType

class Command(BaseCommand):
    args = 'none'
    help = 'Sets the defined group permissions'

    def handle(self, *args, **options):
        front_end_admin_group, created = Group.objects.get_or_create(name="Front End Admin")

        #get the content type for the UserProfile model
        user_profile_ct = ContentType.objects.get(app_label='organization', model='userprofile')
        admin_section_access_perm = Permission.objects.get(content_type=user_profile_ct, codename="admin_section_access")
        front_end_admin_group.permissions.add(admin_section_access_perm)
        self.stdout.write('Successfully setup group permissions.') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T19:50:40.203

您在这里有两个主要选择。第一个是为您的数据库创建一个固定装置，如[Django](https://docs.djangoproject.com/en/dev/howto/initial-data/)文档中所述。这是将数据（对您而言，权限外部参照记录）播种到数据库中的最古老方法。

第二个选项，我更喜欢第一个选项，是使用[South](http://south.readthedocs.org/en/latest/)以编程方式跟踪和维护对数据库的更改。虽然最常用于模式更改，但它的[数据迁移](http://south.readthedocs.org/en/latest/commands.html#datamigration)功能是处理您想要的内容的*理想场所。*您将在命令行中运行它：`./manage.py datamigration my_app seed_permissions`然后只需编写所需的 Django 代码即可在提供的`forwards`函数中获得您的权限。

第二个选项的主要问题是它需要您运行`migrate`after的附加命令`sync_db`，但这可能是不可避免的，因为 South 是事实（并计划在 1.7 中成为核心 Django）。

# jquery - 为什么背景图像不改变？

> ID：14436741
> 
> 赞同：0
> 
> 时间：2013-01-21T10:34:11.197
> 
> 标签：jquery, css

JavaScript 部分：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
        $('document').ready(function(){
            setTimeout('slideback()', 1000);
            function slideback()
            {
                $('body').css('background-image','url(http://sehirmedya.com/wp-content/uploads/2012/12/uluda%C4%9F.jpg)');
            }
        });
</script> 
```

CSS 代码：

```
body{
                background-image:url('taksi.jpg');
                background-size:100%; 
                background-attachment:fixed;
                -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
                src='taksi.jpg',
                sizingMethod='scale')";
                filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
                src='taksi.jpg',
                sizingMethod='scale');
            } 
```

1000 毫秒后，它应该会改变，但不会。为什么不？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T10:37:21.400

`slideback`范围在 DOM 就绪处理程序范围内。通过将字符串传递给`setTimeout`，您正在调用它的全局评估。相反，将函数作为参考传递：

```
 $('document').ready(function() {
      setTimeout(slideback, 1000);
      function slideback() {
          $('body').css('background-image','url(http://sehirmedya.com/wp-content/uploads/2012/12/uluda%C4%9F.jpg)');
      }
 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T10:36:13.493

当您`'slideback()'`用作字符串文字时，`setTimeout()`它将在函数之后运行该代码，*此时*`$(document).ready()`您的函数定义不再可以从外部访问。

您可以通过使用这样的匿名函数来避免许多范围问题：

```
setTimeout(function() {
    $('body').css('background-image','url(http://sehirmedya.com/wp-content/uploads/2012/12/uluda%C4%9F.jpg)');
}, 1000); 
```

或者，通过传递函数*引用*而不是名称：

```
setTimeout(slideback, 1000); 
```

您还可以将定义移到`.ready()`函数之外：

```
function slideback()
{
  $('body').css('background-image','url(http://sehirmedya.com/wp-content/uploads/2012/12/uluda%C4%9F.jpg)');
}

$(function() {
    setTimeout(slideback, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T10:37:25.807

由于将字符串传递给超时时遇到的范围问题，匿名函数效果更好：

[演示](http://jsfiddle.net/mplungjan/qbnjF/)

```
 $('document').ready(function(){
        setTimeout(function() {
            $('body').css('background-image','url(http://sehirmedya.com/wp-content/uploads/2012/12/uluda%C4%9F.jpg)');
        },1000);
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T10:39:05.093

没有问题，只是问题在于编写代码。

```
<script type="text/javascript" src="js/jquery.js"></script>

<script>
    function slideback()
    {
        $('body').css('background-image','url(http://sehirmedya.com/wp-content/uploads/2012/12/uluda%C4%9F.jpg)');
    }
    $('document').ready(function(){
        setTimeout(slideback, 1000);
    });
</script>

<body></body>
```

# javascript - 使用传单 js 绘制多边形

> ID：14436747
> 
> 赞同：6
> 
> 时间：2013-01-21T10:34:31.853
> 
> 标签：javascript, asp.net-mvc

我正在尝试使用传单 js 绘制多边形。但我面临的问题是，当尺寸增加时，它无法绘制多边形。当我也尝试使用谷歌地图时，也会发生同样的事情。我最多可以绘制 21 个多边形。

请任何人给我一个解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:24:55.020

你可以试试 Leaflet.draw 插件

[https://github.com/Leaflet/Leaflet.draw/](https://github.com/Leaflet/Leaflet.draw/)

[http://leafletjs.com/2013/02/20/guest-post-draw.html](http://leafletjs.com/2013/02/20/guest-post-draw.html)

# hadoop - HDFS 中数据可用性的事件通知？

> ID：14436748
> 
> 赞同：0
> 
> 时间：2013-01-21T10:34:34.003
> 
> 标签：hadoop, mapreduce, hdfs

为 Hadoop 实现数据可用性通知系统的最佳方法是什么，这样每当有新数据出现时，它都会创建一个通知，作业控制框架可以利用该通知来启动依赖于该数据的工作。这里的主要问题是，一旦数据可用，就应该触发作业，而不是在 NameNode 上进行作业轮询以获取数据的可用性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:18:51.057

我要做的是使用生产者/消费者模型，该模型可以使用队列相互交互，例如 Amazon SQS。

生产者将维护一个监视目录列表，并`hadoop fs -test -e /path/to/watched/dir`每隔 x 秒执行一次（其中 x 应该是一个参数），如果命令返回 0 ，`$?`那么您可以向队列发送消息。消息的内容可能只是刚刚出现的目录的名称，或者您可以添加一些元数据并将其作为 JSON 对象发送，例如带有附加字段。

另一方面，消费者将每隔 y 秒侦听一次队列（其中 y 应该是一个参数），一旦有新数据，您就可以在此目录上开始您的工作。

# c# - 从 ASP.NET 网站下载生成的位图图像

> ID：14436750
> 
> 赞同：1
> 
> 时间：2013-01-21T10:34:36.990
> 
> 标签：c#, asp.net, image, bitmap

我正在从文本和我的 asp.net 网站上的现有图像动态生成图像。

这是代码：

```
string barcode = Request.QueryString["BarCode"];
int w = barcode.Length * 40;

// Create a bitmap object of the width that we calculated and height of 100
Bitmap oBitmap = new Bitmap(w, 50);

// then create a Graphic object for the bitmap we just created.
Graphics oGraphics = Graphics.FromImage(oBitmap);

// Now create a Font object for the Barcode Font
// (in this case the IDAutomationHC39M) of 18 point size
Font oFont = new Font("BarcodeFont", 12);

// Let's create the Point and Brushes for the barcode
PointF oPoint = new PointF(2f, 2f);
SolidBrush oBrushWrite = new SolidBrush(Color.Black);
SolidBrush oBrush = new SolidBrush(Color.White);

// Now lets create the actual barcode image
// with a rectangle filled with white color
oGraphics.FillRectangle(oBrush, 0, 0, w, 100);

// We have to put prefix and sufix of an asterisk (*),
// in order to be a valid barcode
oGraphics.DrawString(barcode, oFont, oBrushWrite, oPoint);

// Then we send the Graphics with the actual barcode
Response.ContentType = "image/png";
oBitmap.Save(Response.OutputStream, ImageFormat.Png); 
```

如您所见，位图在回发后被保存并显示在 aspx 页面上。我想做的是当用户单击 Button1 时，会生成图像并弹出浏览器下载窗口，而不保存在服务器上或显示在页面上。这个怎么做？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:40:50.960

您应该更新您的回复，如下所示：

```
Response.ContentType = "image/jpeg";
Response.AppendHeader("Content-Disposition","attachment; filename=downloadedFile.JPG");
Response.TransmitFile( @"c:/my documents/images/file.xxx" );
Response.End(); 
```

更多信息：[http ://www.west-wind.com/weblog/posts/2007/May/21/Downloading-a-File-with-a-Save-As-Dialog-in-ASPNET](http://www.west-wind.com/weblog/posts/2007/May/21/Downloading-a-File-with-a-Save-As-Dialog-in-ASPNET)

# go - sort.SearchInts 工作异常，或者我遗漏了一些东西

> ID：14436751
> 
> 赞同：3
> 
> 时间：2013-01-21T10:34:39.090
> 
> 标签：go

考虑以下示例：

```
package main

import (
    "fmt"
    "sort"
)

func main() {
    var n int
    var a sort.IntSlice
    a = append(a, 23)   
    a = append(a, 3)
    a = append(a, 10)
    sort.Sort(a)    
    fmt.Println(a)
    n = sort.SearchInts(a, 1)
    fmt.Println(n)
    n = sort.SearchInts(a, 3)
    fmt.Println(n)
} 
```

[http://play.golang.org/p/wo4r43Zghv](http://play.golang.org/p/wo4r43Zghv)

结果是：

```
[3 10 23]
0
0 
```

当第一个元素和不存在的元素都返回 0 作为索引时，我应该如何知道切片中是否存在数字？

**更新** 请注意，索引也可以大于切片的长度，因此查找切片中是否存在元素的正确方法是：

```
num := 1
n = sort.SearchInts(a, num) 
if n < len(a) && a[n] == num {
  // found
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:41:32.650

这似乎是一个功能上奇怪的功能，但它已记录在案：

> 例如，给定一个按升序排序的切片数据，调用 Search(len(data), func(i int) bool { return data[i] >= 23 }) 返回最小索引 i 使得 data[i] > = 23。

还记录了明显的解决方案：

> 如果调用者要查找 23 是否在切片中，则必须单独测试 data[i] == 23。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:38:38.487

检查您要查找的数字是否实际存在于返回的索引中。中的[二进制搜索例程`sort`](http://golang.org/pkg/sort/#Search)应该找到可以插入值的索引，如果它不存在的话。

例如，在示例中的切片中搜索 100[将返回 3](http://play.golang.org/p/sDVtc3v9Ax)，因为该值必须附加到切片中。

> 该调用`Search(len(data), func(i int) bool { return data[i] >= 23 })`返回最小索引 i 使得`data[i] >= 23`. 如果调用者要查找 23 是否在切片中，则必须`data[i] == 23`单独测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:03:10.697

此片段来自文档：

```
x := 23
i := sort.Search(len(data), func(i int) bool { return data[i] >= x })
if i < len(data) && data[i] == x {
    // x is present at data[i]
} else {
    // x is not present in data,
    // but i is the index where it would be inserted.
} 
```

[http://golang.org/pkg/sort/#Search](http://golang.org/pkg/sort/#Search)

所以你必须按照`i < len(data) && data[i] == x`你的建议进行检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T10:41:29.190

`SearchInts`在排序的整数切片中搜索 x 并返回**Search**指定的索引。使用函数`SearchInts`调用：`Search`

```
func(i int) bool { return a[i] >= x } 
```

引用搜索文档：

> **搜索**使用二分搜索来查找并返回 [0, n) 中 f(i) 为真的最小索引 i，假设在 [0, n) 范围内，f(i) == true 意味着 f(i+ 1) == 真。也就是说，搜索要求 f 对于输入范围 [0, n) 的某些（可能为空）前缀为假，然后对（可能为空）余数为真；搜索返回第一个真正的索引。如果没有这样的索引，Search 返回 n。搜索仅对 [0, n) 范围内的 i 调用 f(i)。

所以基本上你会得到一个索引，你搜索的数字应该被插入，所以切片保持排序。

只需检查在返回的索引中切片中的数字是否与您搜索的数字相同。

# sql - 计算表中特定值的出现次数

> ID：14436753
> 
> 赞同：1
> 
> 时间：2013-01-21T10:34:42.473
> 
> 标签：sql, oracle

我有一个如下所示的表格

```
Col1    Col2    Col3
*         $       *
$         *       *
#         *       $
%         *       *
*         *       $
*         @       $ 
```

我想要一个 sql 查询来计算表中存在的星数（*）。

一种选择是以下列方式编写查询。

```
select ((select count(*) from star_table where col1='*') + 
(select count(*) from star_table where col2='*') +
(select count(*) from star_table where col3='*')) as count from dual. 
```

我想知道是否有另一种编写查询的方法来获得相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:43:15.763

```
select sum(
             case when col1='*' then 1 else 0 end +
             case when col2='*' then 1 else 0 end +
             case when col3='*' then 1 else 0 end            
       ) 
from star_table; 
```

**更新**：如果您的列包含字符长度字符串，您可以：

```
select sum(3 - length(replace(col1||col2||col3,'*')))
from star_table; 
```

你问这个:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:41:51.000

请试试：

```
SELECT SUM(
    (CASE WHEN Col1='*' THEN 1 ELSE 0 END)+
    (CASE WHEN Col2='*' THEN 1 ELSE 0 END)+
    (CASE WHEN Col3='*' THEN 1 ELSE 0 END)) 
FROM TableName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:17:26.703

这个怎么样？

```
 select sum(decode(col1,'*',1,0)+decode(col2,'*',1,0)+decode(col3,'*',1,0)) 
    from tab; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:45:24.097

这个怎么样？

[SQLFIDDLE MYSQL 演示](http://www.sqlfiddle.com/#!2/24671/2)

```
select sum(col1='*') + sum(col2='*') + sum(col3='*')
from yourtable 
```

**对于 SQL Server，这里是：**

```
select sum(patindex('*',col1)) +
sum(patindex('*',col2)) +
sum(patindex('*',col3))
from stars
; 
```

[SQLFIDDLE SQL 服务器演示](http://www.sqlfiddle.com/#!3/b6201/7)

结果：

```
| TOTALSTARS |
--------------
|         10 | 
```

在 Florin 指出之前，我将您的 sql 开发人员误认为是 sql server，这里是**Oracle**版本：

[SQLFIDDLE 演示 ORACLE](http://www.sqlfiddle.com/#!4/b6201/9)

```
select sum(instr('*',col1)) +
sum(instr('*',col2)) +
sum(instr('*',col3)) as TotalStars
from stars
; 
```

结果：

```
| TOTALSTARS |
--------------
|         10 | 
```

# java - Java 7 Directory WatchService 不检测新文件

> ID：14436757
> 
> 赞同：2
> 
> 时间：2013-01-21T10:35:01.903
> 
> 标签：java, watchservice

我已经实现了一个 WatchService 来监听 Linux (Redhat6) 文件系统上的单个文件夹。当我将文件拖放到文件夹（通过 WinSCP）时，会检测并处理该文件。但是，当 FTP 进程删除文件夹中的文件时。他们没有被捡起来？？

这是线程代码

```
@Override
public void run() {

    log.info("Starting " + NAME);

    while (mustLive) {

        try {

            // get Event or wait for one
            WatchKey watchKey = watchService.take();
            // log.debug("Event found");

            // we are only interested in Create Events
            List<WatchEvent<?>> events = watchKey.pollEvents();

            for (WatchEvent<?> event : events) {

                // we need to get the Absolute Path, so more code is needed
                // to retrieve it.
                Path dir = (Path) watchKey.watchable();
                Path fullPath = dir.resolve((Path) event.context());

                if (event.kind() == StandardWatchEventKinds.ENTRY_CREATE) {

                    log.debug("Created: " + event.context().toString());
                    // callback to process the file
                    caller.processNotificationFile(fullPath, eps);
                }

                if (event.kind() == StandardWatchEventKinds.ENTRY_DELETE) {
                    // log.debug("Delete: " + event.context().toString());
                }
                if (event.kind() == StandardWatchEventKinds.ENTRY_MODIFY) {
                    // log.debug("Modify: " + event.context().toString());
                }
            }

            // reset the Watcher for new
            boolean resetOK = watchKey.reset();

            if (!resetOK) {
                log.debug("Reset NOK");
                continue;
            }
        } catch (InterruptedException e) {
            killThread();
        }

    }

} 
```

当我在受监视的文件夹中删除并删除相同的文件（应该已拾取）时，它会被检测到并拾取（因此 Watcher 正在工作并启动并运行）。所以在 FTP 复制过程中的某个地方出现了问题。现在唯一的区别是该文件以根用户身份通过​​ FTP 传输到该文件夹​​，但所有文件的 READ 访问权限都是 ON。当我 SCP 文件时，我是另一个用户（拥有 WatcherThread 的同一用户）。

这是问题吗，其他用户拥有的文件没有被拾取？如果是这样，如何解决这个问题？

谢谢你的帮助，科恩

更新：我尝试使用两个不同的非 root 用户进行 SCP，然后检测并拾取文件。我试图在整个文件夹上设置一个 umask 0000 ，但没有效果。

# android - 无法进行 Maven 全新安装

> ID：14436761
> 
> 赞同：1
> 
> 时间：2013-01-21T10:35:17.627
> 
> 标签：android, maven, build-process, pom.xml

我是这个 maven 概念的新手，我正在构建一个我想要 robospice lib 的 android 应用程序。Rebospice 演示示例需要 Maven 全新安装。我在我的 ubuntu 12.04 上安装了 maven

```
mvn -v
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.7.0_10, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-7-oracle/jre
Default locale: en_IN, platform encoding: UTF-8
OS name: "linux", version: "3.2.0-35-generic-pae", arch: "i386", family: "unix" 
```

然后我在我的演示项目上尝试了 maven clean install 它给出了以下错误

```
[WARNING] The POM for com.octo.android.robospice:robospice:jar:1.3.2-SNAPSHOT is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.351s
[INFO] Finished at: Mon Jan 21 15:15:55 IST 2013
[INFO] Final Memory: 10M/124M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project robospice-sample-core: Could not resolve dependencies for project com.octo.android.robospice:robospice-sample-core:apk:1.0.0-SNAPSHOT: Could not find artifact com.octo.android.robospice:robospice:jar:1.3.2-SNAPSHOT -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException. 
```

这背后的问题是什么..需要帮助来解决这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:48:03.640

您可能必须配置您的 maven 存储库（您告诉 maven 从哪里获取依赖项）

或者

第一次尝试下载工件时出现问题。

如果是后者，您可以通过浏览“.m2”文件夹并查看相应文件夹是否仅包含元数据文件或是否包含 jar 和 pom 来解决问题。我看起来有问题，您可以删除该文件夹并重试构建您的项目。

顺便说一句，这个项目“robospice”似乎有一个更新的版本可用（并且稳定，不是快照），所以你可能想尝试使用 1.3.1 而不是 1.0.0 SHAPSHOT，如果它适合你的项目需要。

# sql - SELECT 列表中的嵌套聚合函数

> ID：14436763
> 
> 赞同：0
> 
> 时间：2013-01-21T10:35:23.707
> 
> 标签：sql, sql-server, tsql, select

我尝试了以下查询：

```
SELECT 
    MAX(SUM(e.Empid))
FROM HR.Employees 
```

并得到以下错误：

```
Cannot perform an aggregate function on an expression containing an aggregate or a subquery. 
```

我的问题是为什么不允许这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T11:04:16.877

每个聚合都适用于一个组。每个查询只能定义一个组。所以多个聚合需要子查询。例如，要查找最大部门的员工数量：

```
SELECT  MAX(EmpCount)
FROM    (
        SELECT  COUNT(*) as EmpCount
        FROM    HR.Employees
        GROUP BY
                e.Department
        ) as SubQueryAlias 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:39:26.833

由于您尚未定义任何要分组的列，因此 的值`SUM()`等于`MAX()`

**更新**

引发错误，因为`MAX(SUM(e.Empid))`需要两个分组选择的结果，而不仅仅是一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:37:41.720

`SUM(x)`评估为单个值，因此它不适合它`MAX`的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:37:58.423

这个查询没有任何意义，因为即使它有效，它也只会返回一个值：Empid 的总和。应用于一个值的`MAX`函数并不是真正有用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T10:48:59.043

尝试这个

```
SELECT MAX(_ID)
FROM (SELECT SUM(e.Empid) _ID FROM HR.Employees e) t 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T11:05:22.100

好的。我现在收到你的问题了。原因如下：

> 仅包含在集合函数规范中的值表达式不应包含集合函数规范或子查询。如果值表达式包含作为外部引用的列引用，则该外部引用应是值表达式中包含的唯一列引用。

进一步阅读：SQL 92 标准

拉吉

# ios - UITextView 不加载/显示大文本？

> ID：14436771
> 
> 赞同：1
> 
> 时间：2013-01-21T10:35:45.350
> 
> 标签：ios, objective-c, xcode, uitextview

我的登录屏幕中有一个简单的 UITextView，我需要在其中显示条款和条件。条款和条件中有一个非常大的文本。在界面构建器中，我已将文本添加到 UITextView。在界面生成器中，文本正在正确显示。但是当我运行应用程序时 UITextView 是空的。如果我在 UItextView 中给出小文本，它会正确呈现，但不会显示大/大文本。

* * *

这是代码。

```
- (IBAction)showTermsOfUse:(id)sender{
    termsOfUseText.text = @"/***/";
    termsOfUseText.scrollEnabled = YES;

    [UIView beginAnimations:nil context:nil]; // begins animation block
    [UIView setAnimationDuration:0.6];        // sets animation duration
    [UIView setAnimationDelegate:self];
    termsOfUse.frame = CGRectMake(0,0,320,416);
    [UIView commitAnimations];   // commits the animation block.  This Block is done.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:45:22.937

我也遇到了同样的问题，我解决了这个问题，我使用了 UITextView 的 IBOutlet 并像这样在代码中设置值

```
UITextView *txtView=[[UITextView alloc] initWithFrame:CGRectMake(50, 50, 200, 200)];
[txtView setText:@"Your long text"];
[txtView setEditable:NO];
[self.view addSubview:txtView];
[txtView release]; 
```

另一种选择是使用 webview 并在 webview 中加载您的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:56:17.430

`UITextView`以编程方式创建

```
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(AsYouNeed)];
[textView  setFont: [UIFont fontWithName:@"YourFontName" size:YourSize]];
textView.text = @"test my font size";
[textview setUserInteractionEnabled:TRUE];  
[self.view addSubview:textView];
[textView release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:19:16.937

通过以编程方式给出文本....和

```
termsofUseText.text =   @"MY LARGE TEXT GOES HERE......    "
termsOfUseText.scrollEnabled = YES;
termsOfUseText.userInteractionEnabled = YES;
termsOfUseText.editable = NO; 
```

# wpf - 在 Outlook 中显示 WPF 窗口时的奇怪行为

> ID：14436776
> 
> 赞同：4
> 
> 时间：2013-01-21T10:36:02.787
> 
> 标签：wpf, outlook, window, ms-office, office-addins

我使用以下代码在 Outlook 的新消息窗口中显示我的 WPF 窗口：

```
private void DisplayWindow(Window window) {
    var wih = new System.Windows.Interop.WindowInteropHelper(window);
    wih.Owner = GetForegroundWindow();            
    window.ShowInTaskbar = false;            
    window.ShowDialog();
}

[DllImport("user32.dll")]
private static extern IntPtr GetForegroundWindow(); 
```

我的问题是，当 ToolTips 和 ComboBox 下拉菜单可见时，WPF 窗口会消失在新消息窗口的后面，只留下前面的“弹出”内容。谁能解释为什么会发生这种情况，以及托管窗口的正确方法是什么？

编辑：

仅当将收件人添加到“发送”框后才会发生这种情况，并且似乎只有在前台窗口是新邮件消息窗口时才会出现问题。

要复制：

将 Outlook 加载项项目和 WPF 项目（面向 .NET 4.0）添加到新解决方案。

在 MainWindow.xaml 中放置一个包含一些项目的 ComboBox。

从 App.xaml 中删除`StartupUri`，并将以下内容添加到 App.cs。

```
public void ShowWindow() {
    MainWindow window = new MainWindow();
    var wih = new System.Windows.Interop.WindowInteropHelper(window);
    wih.Owner = GetForegroundWindow();
    window.ShowInTaskbar = false;
    window.ShowDialog();
}

[DllImport("user32.dll")]
private static extern IntPtr GetForegroundWindow(); 
```

添加对`WindowsBase`和Outlook 项目的`System.Xaml`引用。`PresentationFramework`

在 .xml 中使用以下内容将功能区 (XML) 添加到 Outlook 项目。

```
<customUI ...>
  <ribbon>
    <tabs>
      <tab idMso="TabNewMailMessage">
        <group id="MyGroup"
               insertAfterMso="GroupMailNew">
          <button id="myButton"
                  size="large"      
                  onAction="myButton_Action"
                  imageMso="HappyFace"/>
        </group>
      </tab>
    </tabs>
  </ribbon>
</customUI> 
```

将以下内容添加到功能区代码。

```
MyWpfApplication.App app;

public void Ribbon_Load(Office.IRibbonUI ribbonUI) {
    this.ribbon = ribbonUI;

    var appThread = new Thread(new ThreadStart(() => {
        this.app = new MyWpfApplication.App();
        app.ShutdownMode = System.Windows.ShutdownMode.OnExplicitShutdown;
        app.Run();
    }));
    appThread.SetApartmentState(ApartmentState.STA);
    appThread.Start();
}

public void myButton_Action(Office.IRibbonControl control) {

    // Dispatcher used as cross thread operation.
    app.Dispatcher.BeginInvoke((Action)(() => {
        app.ShowWindow();
    }));
} 
```

将以下内容添加到 ThisAddIn

```
protected override Microsoft.Office.Core
        .IRibbonExtensibility CreateRibbonExtensibilityObject() {
    return new Ribbon();
} 
```

运行 Outlook 加载项，创建新邮件，**添加收件人**并单击笑脸按钮。当您单击 时，您将看到该错误`ComboBox`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:08:04.957

也许您遇到了臭名昭著的“空域”问题。看[这里](http://blogs.msdn.com/b/jgoldb/archive/2010/06/07/wpf-airspace-when-using-web-browser-control.aspx)，[这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/3a171a12-399c-450b-8ed9-9320e8a6dfce)和[这里](http://msdn.microsoft.com/en-us/library/aa970688%28v=vs.90%29.aspx)。人们寄予厚望，希望它会在 .NET 4.5 中得到修复，但遗憾的是，当 MS 宣布修复本身存在太多错误而无法发布时，这些都破灭了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-07T07:57:31.917

这可能与此处描述的问题相同：

[WPF 对话框在 Windows 8 或 Windows Server 2012 中显示工具提示或下拉组合框时消失](https://support.microsoft.com/en-us/help/2954125/the-wpf-dialog-box-disappears-when-it-displays-a-tooltip-or-drop-down)

.NET Framework 4.7.1 的源代码在[System.Windows.FrameworkCompatibilityPreferences](http://referencesource.microsoft.com/#PresentationFramework/src/Framework/System/windows/FrameworkCompatibilityPreferences.cs,c265d213f645add2)类中有注释，说 Windows 桌面窗口管理器中存在一个错误，在某些情况下会导致窗口的 z-order 不正确。

建议的解决方法是将以下代码添加到 WPF 应用程序的 app.config 文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>
  <add key="UseSetWindowPosForTopmostWindows" value="True" />
  </appSettings>
</configuration> 
```

# blender - 接吻球

> ID：14436782
> 
> 赞同：1
> 
> 时间：2013-01-21T10:36:14.630
> 
> 标签：blender, autocad

如何在 Autocad、Blender 或 PoV-Ray 中绘制相互接触/亲吻的球体……？使增量球体与绘制的第一个球体最接近。就像磁球以最大密度和最小体积聚集在一起一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:58:04.410

这真的取决于很多细节，但如果你想做这样的事情，但在 3D 中， ![阿波罗垫片](../Images/4a2e2e2378be5dc442145ea09048b928.png) 那么你应该搜索 Apollonian Gasket。

即使你有别的想法，它也有很多你应该研究的变化。

二维算法可[在此处](http://en.wikibooks.org/wiki/Fractals/Apollonian_fractals)或[此处用于 AutoCAD](http://through-the-interface.typepad.com/through_the_interface/2012/02/circle-packing-in-autocad-creating-an-apollonian-gasket-using-f-part-1.html)。并且[来自 3D 中的同一站点](http://through-the-interface.typepad.com/through_the_interface/2012/02/sphere-packing-in-autocad-creating-an-apollonian-packing-using-f-part-1.html)，同样适用于 AutoCAD。

![使用 AutoCAD 进行 3D 包装](../Images/e0c8506de87c30939cdcb1db8b4294c2.png)

# ruby-on-rails - 使用一个表单创建多个记录

> ID：14436783
> 
> 赞同：1
> 
> 时间：2013-01-21T10:36:19.527
> 
> 标签：ruby-on-rails, forms, nested-attributes

我试图让嵌套表单工作，但不断收到以下错误：

ActiveModel::MassAssignmentSecurity::ResponsesController#create 中的错误

无法批量分配受保护的属性：gate_answer

这是我的模型......我做错了什么？

```
class Response < ActiveRecord::Base
  attr_accessible :gate_id, :gate_answers_attributes
  belongs_to :gate
  has_many :gate_answers
  accepts_nested_attributes_for :gate_answers
end

class GateAnswer < ActiveRecord::Base
  attr_accessible :prospect_id, :gate_question_id, :content, :response_id
  belongs_to :response
end 
```

和数据库模式提取：

```
create_table "gate_answers", :force => true do |t|
  t.integer  "prospect_id"
  t.integer  "gate_question_id"
  t.text     "content"
  t.datetime "created_at",                      :null => false
  t.datetime "updated_at",                      :null => false
  t.integer  "response_id"
end

create_table "responses", :force => true do |t|
  t.integer  "gate_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end 
```

..和我的控制器

```
# responses_controller.rb

def create
  @response = Response.new(params[:response])

  respond_to do |format|
    if @response.save
      format.html { redirect_to :action => 'index', :gate_id => (params[:response][:gate_id]), notice: 'Response was successfully created.' }
    else
      format.html { render action: "new" }
    end
  end
end

#gate_answers_controller.rb

def create

@gate_answer = GateAnswer.new(params[:gate_answer])

#code below finds URL that user will be redirected to after form is saved
@gate = Gate.find(params[:gate_answer][:gate_id])

  respond_to do |format|
    if @gate_answer.save
      format.html { redirect_to @gate.content_url, notice: 'Redirecting.' }  #redirect to URL per above
    else
      format.html { render action: "new" }
    end
  end
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:21:57.470

[Railscasts嵌套模型表单第 1](http://railscasts.com/episodes/196-nested-model-form-part-1)部分和[第 2](http://railscasts.com/episodes/197-nested-model-form-part-2)部分详细介绍了创建这种类型表单的方法。也许这会对你有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:36:35.043

从这里尝试表单对象方法[http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)

# java - 无法让 @Secured 在 Spring MVC 中工作

> ID：14436785
> 
> 赞同：6
> 
> 时间：2013-01-21T10:36:34.920
> 
> 标签：java, spring, spring-mvc, spring-security, restful-architecture

我正在使用 Spring MVC 来公开 RESTful 服务。我已经通过 HTTPBasicAuthentication 启用了身份验证，并且使用`<security:http>`我可以控制哪些角色可以访问 url。

现在我想使用`@Secured`注释。我试图将它添加到控制器方法中，但它不起作用。它根本什么都不做。

这是我的`Controller`课：

```
@Controller
@RequestMapping("/*")
public class HomeController {
private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

private static final String USERS = "/users";
private static final String USER = USERS+"/{userId:.*}";

    @RequestMapping(value=USER, method=RequestMethod.GET)
    @Secured(value = {"ROLE_ADMIN"})
    public @ResponseBody User signin(@PathVariable String userId) {
        logger.info("GET users/"+userId+" received");
        User user= service.getUser(userId);
        if(user==null)
                throw new ResourceNotFoundException();
        return user;
    }
} 
```

这是我的`security-context.xml`：

```
<http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_USER"/>
</http>

<global-method-security secured-annotations="enabled" />

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="admin@somedomain.com" password="admin"
                authorities="ROLE_USER, ROLE_ADMIN" />
            <user name="user@somedomain.com" password="pswd"
                authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

我的`root-context.xml`：

```
<context:component-scan base-package="org.mypackage" />

<import resource="database/DataSource.xml"/> 

<import resource="database/Hibernate.xml"/>

<import resource="beans-context.xml"/> 

<import resource="security-context.xml"/> 
```

一切正常，但如果我添加`@Secured`，它根本什么都不做：我也可以使用 user@somedomain.com 访问安全方法，它没有 ROLE_ADMIN 权限。我已经尝试移动`<security:global-method-security>`到`root-context.xml`，它不起作用。我也尝试通过`<security:http>`标签保护相同的方法，它工作正常，但我想使用`@Secured`注释。

谢谢你。

编辑：我在 appServlet 子目录中还有一个`servlet-context.xml`和一个配置文件。`controllers.xml`

这里是`servlet-context.xml`：

```
<mvc:resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<beans:import resource="controllers.xml" /> 
```

并且`controllers.xml`：

```
<context:component-scan base-package="org.mose.emergencyalert.controllers" />

<beans:bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />     

<beans:bean id="homeController" class="org.mose.emergencyalert.controllers.HomeController"/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T11:26:45.270

解决了，我在 中添加了`<global-method-security>`标签`servlet-context.xml`，而不是`security-context.xml`.

这是新的`security-context.xml`：

```
<annotation-driven />

<security:global-method-security secured-annotations="enabled"/>

<resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean> 
```

注意：现在 Eclipse`<security:global-method-security>`在行警告我：“ `advises org.mypackage.HomeController.signin(String, Principal)`”，证明`@Secured`现在正在工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-10T10:14:01.800

**解决了**

将此标记添加到包含 ViewResolve config 的配置文件中： **调度程序的 xml 不在应用程序的 xml 上** `<security:global-method-security pre-post-annotations="enabled" secured annotations="enabled">`

[都托](http://huahsin68.blogspot.com/2014/05/why-secured-and-preauthorize-isnt.html)

# php - 在代码点火器中同时使用 MySQL 过程和会话数据库会导致“2014”错误

> ID：14436786
> 
> 赞同：0
> 
> 时间：2013-01-21T10:36:39.127
> 
> 标签：php, mysql, codeigniter

我有一个这样的控制器：

```
$r_result = $this->storedprocedure->user_email_exist($in_email);

if($r_result->num_rows() == 1)
{
    foreach ($r_result->result() as $row)
    {
       $salt = $row->salt;
       $hash = $row->hash_password;
       if(strcasecmp(Application_Helper::hash_password($aData['password'], $salt), 
          $hash)==0)
       {
           //Login success
           echo('login success');

           $newdata = array('user_id'  => $row->id);
           $this->session->set_userdata($newdata);
       }
    }
} 
```

在 Storedprocedure 模型中，是这样的：

```
public function user_email_exist($aEmail)
{   
    $r_result = $this->db->query("CALL user_email_exist('".$aEmail."')");

    return $r_result;
} 
```

我测试了一下，可以登录成功，但是打印错误：

> 发生数据库错误
> 
> 错误编号：2014
> 
> 命令不同步；你现在不能运行这个命令
> 
> 更新`ci_sessions`集`last_activity`= 1358764263, `user_data`= 'a:2:{s:9:\"user_data\";s:0:\"\";s:7:\"user_id\";s:2:\"35\" ;}' WHERE `session_id`= '05e340b2aa6bd9b21261ed0d20354b3c'
> 
> 文件名：库/Session.php
> 
> 行号：289

问题是，我必须使用`MySQL procedure`模型层来实现，但似乎ci_session之间有一些冲突。有针对该问题的推荐解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:11:29.850

这个错误是由于 mySQL 存储过程返回 MULTI RESULTS 导致的，即使它们中只有一个 select 语句。解决方案是简单地调用 $r_result->next_result() 来释放预期的无关结果集。

我从这个[链接](http://ellislab.com/forums/viewthread/73714/#562711)得到了这个想法。

请更换控制器代码，如下所示：

```
$r_result = $this->storedprocedure->user_email_exist($in_email);

if($r_result->num_rows() == 1)
{
    $row = $r_result->row_array();
    $r_result->next_result(); // Dump the extra resultset.
    $r_result->free_result(); // Does what it says.

    $salt = $row->salt;
    $hash = $row->hash_password;
    if(
      strcasecmp(Application_Helper::hash_password($aData['password'], $salt),$hash)==0
    ) {
       //Login success
       echo('login success');

       $newdata = array('user_id'  => $row->id);
       $this->session->set_userdata($newdata);
    }

} 
```

# c++ - 附加代码段的重新设计建议

> ID：14436789
> 
> 赞同：0
> 
> 时间：2013-01-21T10:36:56.083
> 
> 标签：c++, polymorphism

我的程序需要像这样运行：

```
./myprogram inputType [Can be I1, I2 or I3] 
```

该程序的大部分功能如下：

```
void Foo::foo (IType inputType) {
    // Some common code
    if (inputType == I1) ... // some I1 specific code
    if (inputType == I2) ... // Some I2 specific code
    ...// similarly for I3
} 
```

这些对 inputType 的检查分散在多个地方，并且随着时间的推移变得越来越难以管理。我曾想过将此代码重构为：

```
InputType* iType = new InputTypeI1(); // or I2 or I3

void Foo::foo (IType inputType) {
    // Some common code
    iType.DoSomething(this, arg1, arg2,..)
}

class InputType1 : public InputType 
{
     // Virtual functions.. (with default implementations)
}

InputType1::DoSomething(Foo* f, Arg1* arg1, Arg2* arg2)
{
    f->DoSomethingFor1(arg1, arg2);
} 
```

这导致为 I1、I2 或 I3 组织事物，并根据输入类型自动调用相关函数。但是，我觉得这可以做得更好。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:44:15.233

很难从您提供的代码段中分辨出来，但我会考虑拥有三个派生的 foo 类，FooI1、FooI2 和 FooI3，并使用基于 InputType 的工厂构建适当的类。

然后所有的特化只是在每个新类的虚拟方法中实现。

```
class FooI1: public Foo {
 void doSomething() {...};
} 
```

I2/I3 同上。

```
Foo * fooFactory(InputType iType) 
{ 
   return new FooX - depending on iType
};
Foo *f = fooFactory(i)

f->doSomething(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:53:01.103

您当前的代码将 Foo 和 InputType 结合起来：

```
 1\. Foo creates InputType Object
  2\. InputType calls Foo function 
```

建议的解决方案是：

```
 1\. Decouple InputType and Foo by using composites mode
    Foo could hold a pointer to `InputType*` then call InputType `virtual` function.    
 2\. To make InputType, a factory will simple enough. 
```

示例代码：

```
class InputType
{
 public:
    virtual ~InputType();
    virtual void DoSomething();
};

InputType* MakeInputObject(const IType& inputType)
{
   return new InputTypeX; 
}

class Foo
{
public:
  Foo(const InputType& input) : input_type_ptr(MakeINputObject(input) {} 
  void DoSomething() { input_type_ptr->DoSomeThing(); }

private:
  std::unique_ptr<InputType> input_type_ptr;
}; 
```

# c - Arduino字符串、字符和指针等

> ID：14436791
> 
> 赞同：2
> 
> 时间：2013-01-21T10:37:02.673
> 
> 标签：c, arrays, char, arduino

我发现自己再次被 C 字符串、字符等弄糊涂了。

这是我用来测试 Arduino 语法的一些代码。我知道 (*message)buff 会给我一个指针（我仍然不知道为什么我需要使用指针，但我可以对此进行一些研究！），我将 *message_buff 转换为字符串（仅用于有事做，但请注意，稍后当我尝试将此字符串打印到串行时，我只会得到一个“c”字符）。

我设置了一个数组指针三个元素长（三个字节长？？我真的不知道）：

```
char *mqtt_command[3] = {}; 
```

稍后当我尝试使用以下方法向数组添加值时：

```
*mqtt_command[i] = str; 
```

我得到错误：

> 错误：从 'char*' 到 'char' 的无效转换

如果我将其更改为：

```
mqtt_command[i] = str; 
```

（没有*）它编译得很好。我不知道为什么...

这是我的代码：

```
char *message_buff = "command:range:1";
char *str;
String msgString = String(*message_buff);
char *mqtt_command[3] = {};
int i = 0;

void setup()
{
  Serial.begin(9600);
  delay(500);

  while ((str = strtok_r(message_buff, ":", &message_buff)) != NULL)
  {
    Serial.println(str);
    mqtt_command[i] = str;
    i++;
  }

  delay(1000);

  Serial.print("Command: ");
  Serial.println(mqtt_command[1]);

  Serial.print("MQTT string: ");
  Serial.println(msgString);
}

void loop()
{
  // Do something here later
} 
```

这是输出：

```
command
range
1
Command: range
MQTT string: c 
```

如何理解字符、字符串、指针和字符数组？我在哪里可以找到有关该主题的全面教程？

我正在通过 MQTT 传入一个命令字符串（我认为它是一个字符串，也许它是一个 char 数组？？？？），消息是：

```
command:range:1 
```

当收到 MQTT 消息时，我正在尝试构建一个小协议来在 Arduino 上执行操作。我可以很好地处理 MQTT 回调，这不是问题。问题是我不太了解 C 字符串和字符。我希望能够处理以下命令：

```
command:range:0
command:digital:8
read:sensor:2 
```

等等

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T10:44:34.520

您首先需要 C（和/或 C++）入门，您需要更多地了解声明和指针访问的语法等。

这：

```
char *mqtt_command[3] = {}; 
```

表示“`mqtt_command`是一个由 3 组成的数组`char *`”，即三个指向字符的指针。由于字符串表示为指向字符的指针，因此可以将其称为“三个字符串的数组”。虽然角色本身没有实际*空间*，所以这还不够，但这是一个好的开始。

然后，您的第一个错误是以下代码：

```
*mqtt_command[i] = str; 
```

编译器抱怨的问题是你取消引用的次数太多了。就`mqtt_command[i]`足够了，它计算为数组的第 i:th 值，它的类型为`char *`。然后，您的初始星号*取消引用*该指针，这意味着左侧表达式的类型是 now `char`，即它是单个字符。您不能将指针分配给字符，它（通常）不适合。

去掉最初的星号来解决这个问题。

为了进一步分析，这：

```
char *message_buff = "command:range:1";
String msgString = String(*message_buff); 
```

也是错误的，出于同样的原因。您正在取消引用`message_buff`指针，因此`String()`构造函数的参数只是第一个字符，即`c`. 同样，去掉最初的星号，你的意思是：

```
String msgString = String(message_buf); 
```

可以写成：

```
String msgString(message_buf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-10T06:57:01.583

```
mqtt_command[i] = str; 
```

这将起作用，因为`mqtt_command[i]`已经是 char 指针。`*`会将其重定向到任何先前分配的内存，这在代码中没有完成。

# c# - 创建jpg并插入word文档

> ID：14436796
> 
> 赞同：1
> 
> 时间：2013-01-21T10:37:22.110
> 
> 标签：c#, .net, system.drawing

我开始用 c# 做我的第一幅画（jpg）。我想将它直接插入到word文档中。

我可以不将我的 jpg 保存到临时目录中吗？

此时，我只能从临时目录加载图像：

```
 public void InsertAPicture(string document, string fileName, string bookmarkName)
    {
        Paragraph newParag = null;

        using (WordprocessingDocument wordprocessingDocument =
            WordprocessingDocument.Open(document, true))
        {
            MainDocumentPart mainPart = wordprocessingDocument.MainDocumentPart;

            ImagePart imagePart = mainPart.AddImagePart(ImagePartType.Jpeg);

            using (FileStream stream = new FileStream(fileName, FileMode.Open))
            {
                imagePart.FeedData(stream);
            }

            newParag = AddImageToBody(wordprocessingDocument, mainPart.GetIdOfPart(imagePart));

            replaceBookmarkText(wordprocessingDocument, bookmarkName, newParag);
        }
    }

    private Paragraph AddImageToBody(WordprocessingDocument wordDoc, string relationshipId)
    {
        // Define the reference of the image.
        var element =
             new Drawing(
                 new DW.Inline(
                     new DW.Extent() { Cx = 990000L, Cy = 792000L },
                     new DW.EffectExtent()
                     {
                         LeftEdge = 0L,
                         TopEdge = 0L,
                         RightEdge = 0L,
                         BottomEdge = 0L
                     },
                     new DW.DocProperties()
                     {
                         Id = (UInt32Value)1U,
                         Name = "Picture 1"
                     },
                     new DW.NonVisualGraphicFrameDrawingProperties(
                         new A.GraphicFrameLocks() { NoChangeAspect = true }),
                     new A.Graphic(
                         new A.GraphicData(
                             new PIC.Picture(
                                 new PIC.NonVisualPictureProperties(
                                     new PIC.NonVisualDrawingProperties()
                                     {
                                         Id = (UInt32Value)0U,
                                         Name = "New Bitmap Image.jpg"
                                     },
                                     new PIC.NonVisualPictureDrawingProperties()),
                                 new PIC.BlipFill(
                                     new A.Blip(
                                         new A.BlipExtensionList(
                                             new A.BlipExtension()
                                             {
                                                 Uri =
                                                   "{28A0092B-C50C-407E-A947-70E740481C1C}"
                                             })
                                     )
                                     {
                                         Embed = relationshipId,
                                         CompressionState =
                                         A.BlipCompressionValues.Print
                                     },
                                     new A.Stretch(
                                         new A.FillRectangle())),
                                 new PIC.ShapeProperties(
                                     new A.Transform2D(
                                         new A.Offset() { X = 0L, Y = 0L },
                                         new A.Extents() { Cx = 990000L, Cy = 792000L }),
                                     new A.PresetGeometry(
                                         new A.AdjustValueList()
                                     ) { Preset = A.ShapeTypeValues.Rectangle }))
                         ) { Uri = "http://schemas.openxmlformats.org/drawingml/2006/picture" })
                 )
                 {
                     DistanceFromTop = (UInt32Value)0U,
                     DistanceFromBottom = (UInt32Value)0U,
                     DistanceFromLeft = (UInt32Value)0U,
                     DistanceFromRight = (UInt32Value)0U,
                     EditId = "50D07946"
                 });

        return new Paragraph(new Run(element));            
    }        

    private void replaceBookmarkText(WordprocessingDocument doc, string bookmarkName, Paragraph text)
    {
        var t = (from el in doc.MainDocumentPart.RootElement.Descendants<BookmarkStart>()
                 where (el.Name == bookmarkName) &&
                 (el.NextSibling<Run>() != null)
                 select el).First();

        t.NextSibling<Run>().Append(text);
    } 
```

而且，我以这种方式创建图形图像：

```
 Bitmap objBitmap;
Graphics objGraphics;

//Create object
objBitmap = new Bitmap(200, 5);
objGraphics = Graphics.FromImage(objBitmap);
//Draw line
objGraphics.DrawLine(new Pen(Color.Red), 0, 0, 200, 200);
//Save
objBitmap.Save(Response.OutputStream, ImageFormat.Jpeg);

objGraphics.Dispose();
objBitmap.Dispose(); 
```

如何发送到我的 InsertAPicture 方法，我的 Graphics 对象而不是我的图像路径文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:06:43.027

您应该将图像保存到`MemoryStream`. 然后将该流传递给`InsertAPicture`代替`fileName`参数。然后读取流而不是创建一个`FileStream`

# css - 两个相邻的 Div，然后堆叠响应变化

> ID：14436800
> 
> 赞同：73
> 
> 时间：2013-01-21T10:37:30.843
> 
> 标签：css, html

我正在努力实现一些我确信应该比我做的更容易的事情！

我正在使用 Skeleton 响应式框架，到目前为止一切正常。

这是我想要实现的图表。

![显示我的 div 布局的图表](../Images/1ef1129d9112d45287a26be8d9bd1170.png)

这将被放置在一列中。一旦这些列的大小减小，我希望它按照图中的第二个示例堆叠 div。我尝试了几种不同的方法，但总是出错。

我对 HTML/CSS 还是很陌生，因此感谢您的帮助！非常感谢！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-21T11:12:33.757

您可以为此使用 CSS3**媒体查询**。像这样写：

**CSS**

```
.wrapper { 
  border : 2px solid #000; 
  overflow:hidden;
}

.wrapper div {
   min-height: 200px;
   padding: 10px;
}
#one {
  background-color: gray;
  float:left; 
  margin-right:20px;
  width:140px;
  border-right:2px solid #000;
}
#two { 
  background-color: white;
  overflow:hidden;
  margin:10px;
  border:2px dashed #ccc;
  min-height:170px;
}

@media screen and (max-width: 400px) {
   #one { 
    float: none;
    margin-right:0;
    width:auto;
    border:0;
    border-bottom:2px solid #000;    
  }
} 
```

**HTML**

```
<div class="wrapper">
    <div id="one">one</div>
    <div id="two">two</div>
</div> 
```

检查更多[http://jsfiddle.net/cUCvY/1/](http://jsfiddle.net/cUCvY/1/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-06-28T17:55:47.087

今天这种事情可以通过使用来完成`display:flex;`

[https://jsfiddle.net/suunyz3e/1435/](https://jsfiddle.net/suunyz3e/1435/)

html:

```
 <div class="container flex-direction">
      <div class="div1">
        <span>Div One</span>
      </div>
      <div class="div2">
        <span>Div Two</span>
      </div>
  </div> 
```

CSS：

```
.container{
  display:inline-flex;
  flex-wrap:wrap;
  border:1px solid black;
}
.flex-direction{
  flex-direction:row;
}
.div1{
  border-right:1px solid black;
  background-color:#727272;
  width:165px;
  height:132px;
}

.div2{
  background-color:#fff;
  width:314px;
  height:132px;
}

span{
  font-size:16px;
    font-weight:bold;
    display: block;
    line-height: 132px;
    text-align: center;
}

@media screen and (max-width: 500px) {
  .flex-direction{
  flex-direction:column;
  }
.div1{
  width:202px;
  height:131px;
  border-right:none;
  border-bottom:1px solid black;
  }
  .div2{
    width:202px;
    height:107px;
  }
  .div2 span{
    line-height:107px;
  }

} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-21T10:51:13.253

浮动 div 将帮助您实现目标。

[**例子**](http://cssdeck.com/labs/aluesulk)

HTML

```
<div class="container">
<div class="content1 content">
</div>
<div class="content2 content">
</div>
</div> 
```

CSS

```
.container{
width:100%;
height:200px;
background-color:grey;
}
.content{
float:left;
height:30px;
}
.content1{
background-color:blue;
width:300px;
}
.content2{
width:200px;
background-color:green;
} 
```

放大页面以查看效果。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-27T03:49:03.753

迟到总比不到好！

[https://getbootstrap.com/docs/4.5/layout/grid/](https://getbootstrap.com/docs/4.5/layout/grid/)

```
<div class="container">
  <div class="row">
    <div class="col-sm">
      One of three columns
    </div>
    <div class="col-sm">
      One of three columns
    </div>
    <div class="col-sm">
      One of three columns
    </div>
  </div>
</div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T10:51:41.663

使用基于 a 的媒体查询，`min-width`您可以实现类似[http://jsbin.com/aruyiq/1/edit](http://jsbin.com/aruyiq/1/edit)

CSS

```
.wrapper { 
  border : 2px dotted #ccc; padding: 2px; 
}

.wrapper div {
   width: 100%; 
   min-height: 200px;
   padding: 10px;
   -webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
   box-sizing: border-box;
}
#one { background-color: gray; }
#two { background-color: white; }

@media screen and (min-width: 600px) {
   .wrapper {
      height: auto; overflow: hidden; // clearing 
   }
   #one { width: 200px; float: left; }
   #two { margin-left: 200px; }
} 
```

在我的示例中，断点是`600px`，但您可以根据需要对其进行调整。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-21T10:47:18.633

这样做：

**HTML**

```
<div class="parent">
    <div class="child"></div>
    <div class="child"></div>
</div> 
```

**CSS**

```
.parent{
    width: 400px;
    background: red;
}
.child{
    float: left;
    width:200px;
    background:green;
    height: 100px;
} 
```

这是工作[jsfiddle](http://jsfiddle.net/cUCvY/)。将孩子更改`width`为更多，然后`200px`他们将堆叠。

# c - 安全处理字符串变量

> ID：14436801
> 
> 赞同：3
> 
> 时间：2013-01-21T10:37:32.507
> 
> 标签：c, string, security, variables, printf

您好，我对 C 语言很陌生，简而言之，我在课堂上做了以下作业：

```
foo (char *var) {
  printf(var);
} 
```

有人告诉我这是不好的做法并且不安全，但我的导师没有得到太多详细的信息。我假设如果 var 的字符串值可以由用户控制，它可以用来执行缓冲区溢出吗？我将如何正确强化此代码？我是否必须限制 str 长度或其他什么？

干杯和感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:45:32.457

这是**不安全**的，因为它可能导致[格式字符串攻击](http://en.wikipedia.org/wiki/Uncontrolled_format_string)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T10:42:17.157

你应该使用：

```
printf("%s", var); 
```

反而。按照你的方式，我可以输入`%s`作为我的输入，并`printf`在它寻找要打印的字符串时读取一段随机的内存。这可能会导致任何数量的意外行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:43:22.490

嗯，[printf](http://linux.die.net/man/3/printf)的第一个参数是一个格式字符串。所以你的函数的调用者可以通过：

```
foo("%d") 
```

然后`printf`会寻找一个不存在的整数，并导致未定义的行为。一种可能的解决方法是让您的函数调用：

```
printf("%s", var); 
```

这将`printf`解释`var`为常规字符串（而不是格式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T10:44:02.697

Printf 具有以下签名：

```
int printf(
   const char *format [,
   argument]... 
); 
```

如果用户输入格式字符，例如 %s，就会发生各种不好的事情。

如果您只想输出字符串，请使用 puts。

# c++ - ' ' 似乎被视为 '\0'？

> ID：14436804
> 
> 赞同：0
> 
> 时间：2013-01-21T10:37:41.080
> 
> 标签：c++

# 代码

我创建了以下程序：

```
#include <iostream>

void f(char v[])
{
    for(char* p = v; *p != 0; p++)
    {
        std::cout << *p << std::endl;
    }
}

int main()
{
    std::cout << int(' ') << std::endl;
    char c[256];
    std::cin >> c;
    f(c);
    return 0;
} 
```

# 编译器

我在 Code::Blocks 中使用 GNU GCC Compiler 编译，并带有 -std=c++0x 标志（没有警告）。

# 问题

我遇到的问题是，如果我输入一个包含一个或多个空格的字符串（即“一个和两个”），那么只会打印第一个空格之前的字母（即“o”、“n”、“e”）。

# 我试过的

唯一想到的就是做一个快速的现实检查。我添加了这一行：

```
std::cout << "Val: " << int(' ') << std::endl; 
```

并且，正如预期的那样，打印的值*不是*0（因为很明显，它不是空的 '\0' 字符）......

我不确定我错过了什么。是否是这样的行：

```
std::cin >> c; 
```

使用''作为某种终止字符？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:40:45.240

```
std::cin >> c; 
```

只会读取一个由空格分隔的单词。这是所有`>>`运营商的功能。

如果您想阅读整行，请改用该`getline`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:41:16.363

流运算符`>>`是*格式化的 input*，它使用空格作为字段分隔符。如果要在输入中保留空格，请使用`std::getline()`或流成员函数`read()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T10:41:04.597

尝试`getline`输入您的句子，空格用作输入之间的分隔符 by `cin>>`。

# javascript - IE 8 中的“HTML1114”错误是什么？

> ID：14436806
> 
> 赞同：1
> 
> 时间：2013-01-21T10:37:47.853
> 
> 标签：javascript, internet-explorer

我向 oembedly 服务器发送 GET 请求。回应是

```
{
    "provider_url": "https://developer.mozilla.org",
    "description": "Apply a function against an accumulator and each value of the array (from left-to-right) as to reduce it to a single value.",
    "title": "Array reduce method",
    "dominant_colors": [{
        "color": [19, 13, 12],
        "weight": 0.507080078125
    }, {
        "color": [219, 48, 41],
        "weight": 0.345458984375
    }, {
        "color": [240, 240, 240],
        "weight": 0.1474609375
    }],
    "thumbnail_width": 62,
    "url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce",
    "thumbnail_url": "https://developer.mozilla.org/media/img/mdn-logo-sm.png",
    "entropy": 2.00440402346,
    "version": "1.0",
    "provider_name": "Mozilla",
    "type": "link",
    "thumbnail_height": 71
} 
```

据我所知，一个正常的 JSON 响应。但是没有调用成功处理程序，我得到了

```
HTML1114: Codepage unicode from (UNICODE byte order mark) overrides conflicting codepage windows-1252 from (11) 
```

控制台上的该消息。

我正在运行 IE9，浏览器模式：IE8，文档模式：IE8 标准。

请让我摆脱痛苦...

# .net - 带有 asp.net mvc 4 的简单注入器，从另一个程序集加载控制器

> ID：14436811
> 
> 赞同：4
> 
> 时间：2013-01-21T10:38:06.723
> 
> 标签：.net, asp.net-mvc, dependency-injection, asp.net-mvc-4, simple-injector

我正在开发一个 asp.net mvc 4 站点，使用 Simple Injector 作为 Ioc 工具。这将是一个可插拔的架构。一些控制器和视图在另一个程序集中（另一个 mvc4 应用程序，Plugin.Web.dll）。从主应用程序中，我知道 Plugin.Web.dll 的路径，加载插件。

```
container.RegisterMvcControllers(Assembly.GetExecutingAssembly());

container.RegisterMvcAttributeFilterProvider();

container.Options.AllowOverridingRegistrations = true;

var appPath = AppDomain.CurrentDomain.BaseDirectory;

string[] files = Directory.GetFiles(appPath + "\\Plugins", "*",
    SearchOption.AllDirectories);

foreach (var fileName in files)
{
    Console.WriteLine(fileName);

    var assembly = Assembly.LoadFrom(fileName);

    container.RegisterMvcControllers(assembly);

    var controllerTypes =
        from type in assembly.GetExportedTypes()
        where type.Name.EndsWith("Controller",
            StringComparison.Ordinal)
        where typeof(IController).IsAssignableFrom(type)
        where !type.IsAbstract
        select type;

    // Instead of verify:
    foreach (var type in controllerTypes)
    {
        container.GetInstance(type);
    }
}            

container.Options.AllowOverridingRegistrations = false;       

container.Verify();

DependencyResolver.SetResolver(
    new SimpleInjectorDependencyResolver(container)); 
```

它没有给出任何错误。

但是当我点击这个点击时，在视图中：

```
@Html.ActionLink("plugin page","PluginPage","Plugin") 
```

它给出“找不到资源。，http 404”

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T11:46:43.863

恐怕你需要做更多的研究，因为你的问题目前有点模糊，但这里有一些提示：

检查是否`System.Web.Compilation.BuildManager.GetReferencedAssemblies()`返回您的插件程序集。MVC在从该方法返回的所有程序集中`DefaultControllerFactory`搜索`Controller`类型。最好的方法是将插件文件夹放在 /bin 目录中。如果我没记错的话`GetReferencedAssemblies()`，还会查看 /bin 的子目录。如果必须更动态地加载插件，您可能需要编写自定义控制器工厂。

另请查看[这篇文章](http://www.paraesthesia.com/archive/2013/01/21/putting-controllers-in-plugin-assemblies-for-asp-net-mvc.aspx)，因为它描述了如何强制 BuildManager 了解您的插件程序集。

您的配置似乎过于复杂。以下配置也应该可以解决问题：

```
container.RegisterMvcControllers(Assembly.GetExecutingAssembly());

container.RegisterMvcAttributeFilterProvider();

var appPath = AppDomain.CurrentDomain.BaseDirectory;

string[] files = Directory.GetFiles(appPath + "\\bin\\Plugins", "*",
    SearchOption.AllDirectories);

container.RegisterMvcControllers(
    from fileName in files
    select Assembly.LoadFrom(fileName)
);    

container.Verify(); 
```

您可以查询容器的配置以查看它包含的内容。例如，这将查询所有注册的控制器：

```
var registeredControllerTypes = (
    from registration in container.GetCurrentRegistrations()
    where typeof(IController).IsAssignableFrom(registration.ServiceType)
    select registration.ServiceType)
    .ToArray(); 
```

# python - 使用 Python 发送 POST 请求的正确方法（urllib2、base64 和 json）

> ID：14436812
> 
> 赞同：0
> 
> 时间：2013-01-21T10:38:16.327
> 
> 标签：python, json, post, base64, urllib2

我需要发送数千个 POST 请求。我在网上搜索了信息，经过多次尝试，我编写了以下解决方案：

```
post_data = urllib.urlencode({'pushes': b64encode(json.dumps(pushes))})
user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
headers = { 'User-Agent' : user_agent,
            'Content-type': "application/x-www-form-urlencoded",
            'Accept': "text/plain"}
request = urllib2.Request(PUSH_URL, data=post_data, headers=headers)
response = urllib2.urlopen(request).read() 
```

pushes 是一个字典列表。

大多数情况下，此解决方案运行良好，但有时会导致目标服务器 (Apache) 出现分段错误。我已经监视了目标服务器上打开的连接。连接数很少（100-200）。也许我的代码不是 100% 正确的。我需要一个更可靠的解决方案。

提前致谢。

**更新 - 2013 年 1 月 25 日**
我使用 strace 调试 apache Web 服务器（目标服务器）。
我发现 Zend 框架使用的系统调用“gettimeofday”存在一些问题。
我尝试将 zend 应用程序移动到两个不同的服务器 Centos 和 Ubuntu Server 12.04 中。
PHP 版本也从 5.3 更改为 5.4。
我总是遇到同样的问题。

我将应用程序移植到另一个框架。问题消失了。
未修改执行 POST 请求的源服务器上的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:41:18.660

如果您在 Apache 上有段错误，为什么您认为问题出在您的代码上？我要做的是仔细看看 Apache 发生了什么，当它死亡时 - 打开调试日志记录，strace/ktrace 其进程，最后测试在使用其他 http 服务器（如 Nginx 或 Lighttpd）时是否会发生同样的情况。在不知道 Apache 为何死亡的情况下，您甚至无法尝试在代码中修复它（即使正确的解决方案是修复 Apache）。

# android - 广播接收器太慢？

> ID：14436818
> 
> 赞同：3
> 
> 时间：2013-01-21T10:38:31.360
> 
> 标签：android, android-intent, service, broadcastreceiver

这是我到目前为止所得到的：

正在运行的服务保持两个连接（到两个不同的服务器），注册一个`BroadcastReceiver`. `BroadcastReceiver`正在接收我想通过套接字发送的命令。工作至今。但是：如果我在短时间内发送“更多”命令（例如 1 秒内的多个命令）`BroadcastReceiver`则不会收到它们 - 广播接收器是否太慢？在 onReceive 中启动一个不同的线程来处理额外的数据会有所帮助吗？还是我应该回去绑定服务并将直接命令传递给该对象？

这可能吗？-> 服务在后台运行，注册一个`BroadcastReceiver`，但也绑定到一个活动——它应该仍然是同一个服务“对象”，对吧？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:39:29.723

我不能 100% 确定，但与其在服务代码中注册广播接收器，不如在 Android Manifest 中注册它可能会更快一些。这就是我通常这样做的方式，并且从来没有发现广播很慢或没有收到。

# eclipse - 启动 Eclipse 时未加载导出的插件

> ID：14436819
> 
> 赞同：0
> 
> 时间：2013-01-21T10:38:32.667
> 
> 标签：eclipse, eclipse-plugin, swtbot

我在Eclipse中写了一个插件并导出。它工作正常，并在我启动 Eclipse 时加载。不幸的是，当我将“org.eclipse.swtbot.eclipse.finder”添加到依赖项并再次导出时，我得到的插件在我启动时没有被Eclipse加载。在导出过程中我没有收到任何错误。那么可能是什么问题，我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:06:01.957

问题是我添加到插件依赖项的 Eclipse 插件文件夹中的某些插件版本不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:18:58.053

那么问题是为什么没有加载插件？有几个步骤可以查看会发生什么。有很多答案可以帮助解决这个问题。[看这里](https://stackoverflow.com/a/7777020/207764)，[这里](https://stackoverflow.com/a/8293725/207764)和[这里](https://stackoverflow.com/a/9097320/207764)

# javascript - 参数和参数之间的jQuery区别

> ID：14436823
> 
> 赞同：0
> 
> 时间：2013-01-21T10:38:47.997
> 
> 标签：javascript, jquery, javascript-framework

我有如下的jQuery代码块；

```
(function($){
  //Normal code goes here
})(jQuery); 
```

现在我想了解

1.  如果这是一个自执行功能？如果是，为什么？
2.  传递给函数的“$”和最后指定的“jQuery”有什么区别？其中一个是参数，另一个是参数吗？
3.  是否有必要在最后指定“jQuery”。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:43:36.357

> 如果这是一个自执行功能？如果是，为什么？

是和不是。它是一个[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)，但有些人倾向于称这些为“自执行”，尽管这通常与递归的概念相关联。

> 传递给函数的“$”和最后指定的“jQuery”有什么区别？其中一个是参数，另一个是参数吗？

确切地。

> 是否有必要在最后指定“jQuery”。

否则从哪里`$`填充参数？

* * *

我将再添加一个您似乎必须错过的问题：

> 为什么要使用立即调用函数表达式？

它只是在 IIFE 范围内的别名，因此您可以安全地使用`jQuery`jQuery是否处于模式。对于开发插件和使用 WP 非常有用。`$``$`[`noConflict`](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:41:11.350

是的，它是“自我执行”。内部是一个“函数表达式”，然后（必要的）参数`(jQuery)`导致它立即被调用，因此更常用的术语是“立即调用的函数表达式”。

该变量`$`在函数范围内是局部的。jQuery 插件通常以这种方式编写，因此`$`即使 jQuery 处于“无冲突”模式，也可以在内部使用通用缩写，因为（全局）`$`变量正在被其他东西使用。

正式地，声明中的变量称为“参数”，调用中的变量称为“参数”。我认为在 JS 中会出现歧义，因为您可以使用`arguments`伪数组访问提供的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:49:16.890

1) 自动执行和立即执行

你可以说出来，因为它最后有括号。

你写一个这样的函数：

```
function myFunc () {} 
```

或喜欢

```
var myFunc = function () {}; 
```

你调用一个函数，比如：

```
myFunc(); 
```

你把它写成`(function () {})();`这样，它会在它结束时立即触发。

2）参数是函数所期望的。参数是你赋予函数的东西。

```
var number_arg = 35,
    string_arg = "Bob";

function myFunc (number_param, string_param) {
    console.log(number_param, string_param);
}

myFunc(number_arg, string_arg); // 35 "Bob"; 
```

参数可以与参数命名不同的事实意味着您可以在函数内部以不同的方式“别名”值。

```
function myFunc ($) { console.log($); }

myFunc("SUPERLONGSTRINGOFDOOMISWHATI'MPUTTINGINHERE");

myFunc(MYAPP.Module.sub_module.plug_in); 
```

同时，在函数内部，所有这些东西都可以使用，只需使用`$`.

3）“别名”是与`jQuery`vs发生的事情`$`。

# internationalization - 不显示新添加的翻译

> ID：14436824
> 
> 赞同：0
> 
> 时间：2013-01-21T10:38:50.447
> 
> 标签：internationalization, translation, typo3

在带有现有翻译的 Typo3 4.4.2 上，我想添加一个新翻译。但是文本元素只显示在默认语言上，而不是在英文页面上。然后我尝试在英文页面上添加内容元素。它将在此处显示，但仅以英文显示。似乎翻译完全相互分离......

这是TS：

```
config {
  linkVars = L
  sys_language_mode = content_fallback
  sys_language_overlay = hideNonTranslated
  sys_language_uid = 
  language = de
  locale_all = de_DE
  doctype = xhtml_trans
  htmlTag_langKey = de
}

[globalVar = GP:L = 1]
config.sys_language_uid = 1
page.config.language = en
page.config.locale_all = en_EN
[global] 
```

这里有什么问题？删除缓存没有成功，所以这是另一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:12:41.183

确保也翻译带有内容元素的页面。否则无法保存内容元素。

如果翻译之间的映射丢失，那么您必须在数据库中或使用扩展名来修复它`languagevisibility`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:36:57.007

请使用“复制默认内容元素”选项将默认内容元素翻译成英语。

# iphone - 为 iphone 设置 Revmob 横幅框架

> ID：14436829
> 
> 赞同：1
> 
> 时间：2013-01-21T10:39:09.970
> 
> 标签：iphone, ios, frame, revmob

我正在使用 Revmob 使用以下代码显示添加横幅。

> [RevMobAds startSessionWithAppID:@"My Application id"];
> 
> [RevMobAds 会话].testingMode = RevMobAdsTestingModeWithAds;
> 
> [[RevMobAds 会话] showBanner];

它在底部完美地显示了测试横幅。

现在我的问题是我想在我的应用程序顶部设置这个横幅。

那么我该如何设置这个横幅框架呢？

我曾尝试使用 RevMobBannerView

我的代码是

> RevMobBannerView *banner = [[RevMobBannerView alloc] initWithFrame:CGRectMake(0, 100, 320, 50)];
> 
> ```
> [banner setBackgroundColor:[UIColor yellowColor]];
> 
> [banner loadAd];
> 
> [self.window addSubview:banner]; 
> ```

但它不起作用......它没有在屏幕上显示任何内容。

任何帮助都将受到重视...

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T21:30:30.117

从[RevMob 文档网站](http://sdk.revmob.com/ios-api/Classes/RevMobAds.html#//api/name/bannerView)：

```
RevMobBannerView *ad = [[RevMobAds session] bannerView];
ad.delegate = self;
[ad loadAd];
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
  ad.frame = CGRectMake(0, 0, 768, 114);
} else {
  ad.frame = CGRectMake(0, 0, 320, 50);
}

[self.view addSubView:ad]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T11:37:49.880

如果 tkanzakic 回答不起作用，您始终可以使用 UIView 将横幅放入并将其添加到您的视图中。在横幅加载委托中，将中间视图的大小调整为横幅的边界。

**编辑：** 类似的东西

```
ad = [[[RevMobAds session] bannerView] retain];
ad.delegate = self;
[ad loadAd];

- (void)revmobAdDidReceive {
  intermediateView.frame = CGRectMake(0,0, somewidth, someheight);
  ad.frame = intermediateView.bounds;
  [intermediateView addSubview:ad];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T10:57:39.880

`RevMobAds`对象有一个`RevMobBannerView`属性，这个属性有一个`frame`. 根据[文档](http://sdk.revmob.com/ios-api/Classes/RevMobBanner.html#//api/name/frame)：

> 您可以使用此属性来定义横幅在屏幕中的位置。默认是屏幕底部的横幅

**编辑：**

试试这个来设置框架：

```
RevMobAds *revMovAds = [RevMobAds startSessionWithAppID:@"My Application id"];
revMovAds.bannerView.frame = CGRect(x,y,xx,yy);
[revMovAds showBanner]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T14:04:27.850

当我在我的项目中添加它（RevMob 5.9 版）时。我这样做：

```
[RevMobAds startSessionWithAppID:@"my id"];
RevMobBannerView *ad = [[RevMobAds session] bannerView]; // you must retain this object
[ad loadWithSuccessHandler:^(RevMobBannerView *banner) {
    banner.frame = CGRectMake(0, 381, 320, 50);
    [self.window.rootViewController.view addSubview:banner];
    NSLog(@"Ad loaded");
} andLoadFailHandler:^(RevMobBannerView *banner, NSError *error) {
    NSLog(@"Ad error: %@",error);
} onClickHandler:^(RevMobBannerView *banner) {
    NSLog(@"Ad clicked");
}]; 
```

# selenium - 使用 Selenium WebDriver 自动化验证过程（即电话（文本）、语音等）的手动方式

> ID：14436830
> 
> 赞同：1
> 
> 时间：2013-01-21T10:39:17.833
> 
> 标签：selenium, selenium-rc, selenium-webdriver

我正在测试一个包含`phone/voice verification`在一个流程中的 Web 应用程序，我正在尝试自动化此验证过程。我的查询是：

有什么方法可以手动完成，例如在发生时手动输入电话（文本）/语音代码，而输入代码线程休眠或等待“直到 ExpectedConditon”？例如：我们会在页面处于处理阶段的情况下这样做，所以我们使用

```
wait.until(ExpectedConditions.presenceOfElementLocated(By.some selector)); 
```

它会等待某些“timeOutSeconds”。

提前致谢..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:14:27.233

这是我写的一个简单的例子，我认为它会满足你的需要。在此代码中，驱动程序开始打开 ​​Google。一旦页面完全加载，控制台就会等待控制台上的输入数据（即[http://www.stackoverflow.com](http://www.stackoverflow.com)）。

此代码可能会解决您在测试运行期间手动输入的问题。

```
public static void main(String[] args) {
    WebDriver driver = new FirefoxDriver();
    InputStreamReader istream = new InputStreamReader(System.in);
    BufferedReader bufRead  = new BufferedReader(istream);
    String nextWebSite = "http://www.google.com";

    driver.get(nextWebSite);

    try {
        System.out.println("What's the next Website you'll like to visit? ");
        nextWebSite = bufRead.readLine();
    } catch (IOException err) {
        System.out.println("Sorry, there was a problem reading the informed data");
    }

    driver.get(nextWebSite);

    driver.close();
    driver.quit();
} 
```

# android - 如何使用 Random() 自动循环颜色，只需单击一个按钮

> ID：14436844
> 
> 赞同：0
> 
> 时间：2013-01-21T10:40:11.153
> 
> 标签：android, android-layout

我正在做一个简单的应用程序，当用户单击按钮时。背景颜色将使用`Random()`. 我该如何实施？这是我的代码

```
if (looper == false) 
{
    Jbutton1.setText("loop now ");
    int color;
    Random rnd = new Random();
    color = Color.argb(255, rnd.nextInt(256), rnd.nextInt(256),                             rnd.nextInt(256));
    JmyScreen.setBackgroundColor(color);
    looper = true;
}
else
{
    Toast.makeText(getApplicationContext(), "stop loop",Toast.LENGTH_SHORT).show();
    Jbutton1.setText("stop looping");
    JmyScreen.setBackgroundColor(Color.WHITE);
    looper = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:49:52.407

在这里，按钮的背景每 4 秒后定期更改。在这里，您传递背景的 id 并检查它是否适合您。
希望这可以帮助 ：）

```
public class MyActivity extends Activity {

        private Runnable mEndlessRunnable;

        @Override
        public void onCreate(Bundle savedState) {
            super.onCreate(savedState);
            setContentView(R.layout.my_activity);

            mEndlessRunnable = new UpdateRunnable(new Handler(), new Button[] {
                (Button) findViewById(R.id.button_1),
                (Button) findViewById(R.id.button_2)
            });
            mEndlessRunnable.run();

        }

        private static class UpdateRunnable extends Runnable {

            private Random mRand = new Random();
            private Handler mHandler;
            private Button[] mButtons;

            private Button mCurButton;
            private int mState;

            public UpdateRunnable(Handler handler, Button[] buttons) {
                mHandler = handler;
                mButtons = buttons;
            }

            public void run() {
                // select a button if one is not selected
                if (mCurButton == null) {
                    mCurButton = mButtons[mRand.nextInt(mButtons.length)];
                }
                // check internal state, `0` means first bg change, `1` means last
                switch (mState) {
                case 0:
                    mCurButton.setBackgroundResource(R.drawable.blue_bg);
                    mState = 1;
                    break;
                case 1:
                    mCurButton.setBackgroundResource(R.drawable.yellow_bg);
                    // reset state and nullify so this continues endlessly
                    mState = 0;
                    mCurButton = null;
                    break;
                }

                mHandler.postDelayed(this, 4000);
            }
        }
    } 
```

# php - Magento：使用自定义属性过滤类别

> ID：14436847
> 
> 赞同：0
> 
> 时间：2013-01-21T10:40:27.353
> 
> 标签：php, magento

我在名为 show_in_sidebar 的类别中有一个自定义属性我想过滤所有那些 show_in_sidebar attr 设置为一个的类别

我努力了 ：

```
$categories = Mage::getModel('catalog/category')
->addAttributeToSelect('show_in_sidebar','1');
print_r($categories); 
```

和

```
$categories = Mage::getModel('catalog/category')
    ->addAttributeToFilter('show_in_sidebar','1');
    print_r($categories); 
```

但两者都没有给予任何东西......我该怎么做，请帮忙......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:01:58.817

您需要`getCollection()`在过滤我希望的选择类别属性之前给出。

查看，

```
Mage::getModel('catalog/category')->getCollection()->addAttributeToSelect('show_in_sidebar')->load(); 
```

# c++ - Qt - 使用新的父参数创建对象 - 没有删除？

> ID：14436850
> 
> 赞同：2
> 
> 时间：2013-01-21T10:40:33.677
> 
> 标签：c++, qt, memory-management, memory-leaks

我是否理解一切正确 - 如果我通过**new**创建一些 Qt 对象并且该对象具有带有*父*参数的构造函数，那么如果我将值传递给这个参数我不需要在这个对象上调用**delete**，它将被自动调用是父对象？对于每个在构造函数中具有*父*参数的 Qt 类都是如此吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:43:11.443

[是的](http://doc.qt.digia.com/qt/objecttrees.html#construction-destruction-order-of-qobjects)：

> 当您使用另一个对象作为父对象创建 QObject 时，它会添加到父对象的 children() 列表中，并在父对象存在时被删除。

# c# - 如何将progressIndicator定位在Windows Phone的中心？

> ID：14436853
> 
> 赞同：1
> 
> 时间：2013-01-21T10:40:44.080
> 
> 标签：c#, wpf, windows-phone-7

我是 Windows Phone 开发的新手。我使用以下代码创建了进度指示器。

```
 ProgressIndicator progressIndicator = new ProgressIndicator();
        progressIndicator.IsVisible = true;
        progressIndicator.IsIndeterminate = true;          
        SystemTray.SetProgressIndicator(this, progressIndicator); 
```

它工作正常。但它正在显示的顶部。我想把它放在显示器的中心。这该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:13:00.117

Windows Phone SDK 有一个进度条控件，可以放在页面的任何位置。但是此控件的性能较弱，要避免此弱点，您应该使用[Silverlight for Windows Phone中的 PerformanceProgressBar 控件](http://silverlight.codeplex.com/releases/view/60291)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:07:34.097

您可以创建自定义进度条。这样您就可以根据需要定义控制模板。以下链接应该可以帮助您入门：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg442303(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg442303(v=vs.105).aspx)

或者你可以覆盖标准 ProgressIndicator 的控件模板，虽然我相信这个控件的性能很差。

# wpf - ReactiveUI 生产准备好了吗？

> ID：14436861
> 
> 赞同：41
> 
> 时间：2013-01-21T10:40:55.393
> 
> 标签：wpf, mvvm, reactiveui

我一直在研究在生产代码中使用 Reactive UI 的可行性。一些特性真的很吸引人，但我担心依赖这个库。这些包括：

1.  古怪的命名和约定。例如，受保护的成员以小写开头，`RaiseAndSetIfChanged`方法取决于您的私有成员以下划线开头。我知道 Paul Betts（ReactiveUI 的作者）有 Ruby 的背景，所以我猜这就是奇怪命名的来源。然而，这会给我带来一个真正的问题，因为标准命名（根据 Stylecop）在我的项目中被强制执行。即使没有强制执行，我也会担心由此导致的命名不一致。

2.  缺乏文档/样本。有*一些*文档和一个孤独的样本。但是，文档只是一系列（旧）博客文章，示例基于库的 V2（现在在 V4 上）。

3.  奇怪的设计，部分。例如，日志是抽象的，以便不依赖特定的日志框架。很公平。但是，由于我使用 log4net（而不是 NLog），我需要自己的适配器。我认为这将需要我实现`IRxUIFullLogger`，其中包含大量的方法（超过 50 个）。我原以为更好的方法是定义一个非常简单的接口，然后在 ReactiveUI 中提供扩展方法以促进所有必要的重载。此外，还有`IWantsToRegisterStuff`一个 NLog 程序集所依赖的奇怪接口，我将无法依赖它（因为它是一个内部接口）。我希望我不需要那个...

    无论如何，我关心的是图书馆的整体设计。有没有人被这个咬过？

4.  我已经在广泛使用 MVVM Light。我知道 Paul 写了一篇博文，他解释说你可以在技术上同时使用这两种方法，但我更关心的是可维护性。我怀疑将两者混合在一个人的代码库中会令人非常困惑。

有没有人有在生产中使用 Reactive UI 的实践经验？如果是这样，你能减轻或解决我上述的任何担忧吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-21T21:42:09.330

让我们逐个处理您的担忧：

> #1。“古怪的命名和约定。”

现在 ReactiveUI 4.1+ 具有 CallerMemberName，您根本不必使用约定（即使这样，您也可以通过 覆盖它们`RxApp.GetFieldNameForPropertyFunc`）。只需将属性写为：

```
int iCanNameThisWhateverIWant;
public int SomeProperty {
    get { return iCanNameThisWhateverIWant; }
    set { this.RaiseAndSetIfChanged(ref iCanNameThisWhateverIWant, value); }
} 
```

> #2。缺乏文件/样本

这是合法的，但这里有更多文档/示例：

*   [http://docs.reactiveui.net/](http://docs.reactiveui.net/)（这是官方的 ReactiveUI 文档，正在进行中，但绝对是您想要开始的地方）
*   [https://github.com/reactiveui/ReactiveUI.Samples](https://github.com/reactiveui/ReactiveUI.Samples)
*   [https://github.com/reactiveui/RxUI_QCon](https://github.com/reactiveui/RxUI_QCon)
*   [https://github.com/play/play-windows](https://github.com/play/play-windows)

> #3。“我原以为更好的方法是定义一个非常简单的接口，然后在 ReactiveUI 中提供扩展方法以促进所有必要的重载”

相反，实现`IRxUILogger`它，它只有很少的两个方法 :) ReactiveUI 将填补其余部分。`IRxUIFullLogger`只有在您需要时才会出现。

> “另外，还有这个奇怪的 IWantsToRegisterStuff 接口”

你不需要知道这个:) 这只是为了处理 ReactiveUI 初始化本身，这样你就不必有样板代码。

> 4.  “我怀疑将两者混合在一个代码库中会令人非常困惑。”

并不真地。只需将其视为“具有 SuperPowers 的 MVVM 灯”。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-22T00:42:36.263

我作为一个在一些生产系统中使用过 ReactiveUI，对 RxUI 做事的方式有问题，并提交了补丁来尝试修复我遇到的问题的人来回答。

*免责声明：*我没有使用 RxUI 的所有功能。原因是我不同意这些功能的实现方式。我会详细说明我的变化。

1.  命名。我也觉得这很奇怪。这最终成为我并没有真正使用的功能之一。我使用 PropertyChanged.Fody 使用 AOP 编织更改通知。结果，我的属性看起来像自动属性。

2.  多可。是的，可能还有更多。特别是对于路由等较新的部分。这可能是我不使用所有 RxUI 的原因。

3.  记录。我过去遇到过这个问题。请参阅[拉取请求 69](https://github.com/reactiveui/ReactiveUI/pull/69)。归根结底，我认为 RxUI 是一个非常固执己见的框架。如果您不同意该意见，您可以提出更改建议，仅此而已。固执己见并不会使事情变得糟糕。

4.  我将 RxUI 与 Caliburn Micro 一起使用。CM 处理 View-ViewModel 位置和绑定、屏幕和导体。我不使用 CM 的约定绑定。RxUI 处理命令和 ViewModel INPC 代码，并允许我使用 Reactive 而不是传统方法对属性更改做出反应。通过将这些东西分开，我发现将两者混合在一起更容易。

Does any of these issues have anything to do with being production ready? Nope. ReactiveUI is stable, has a decently sized user base, problems get solved quickly in the [google group](https://groups.google.com/forum/?fromgroups#!forum/reactivexaml) and Paul is receptive to discussion.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T13:48:50.250

我在生产中使用它，到目前为止，RxUI 一直非常稳定。该应用程序存在稳定性问题，其中一些与 EMS 有关，另一些与 UnhandledException 处理程序有关，该处理程序导致的问题比它解决的问题多，但我对应用程序的 ReactiveUI 部分没有任何问题。但是，我遇到了关于 ObservableForProperty 根本没有触发的问题，我可能使用不正确并且在我的测试代码以及​​运行时的 UI 中始终（错误地）工作。

-1。Paul 解释说 _Upper 是由于使用反射来获取班级中的私有字段。您可以使用如下块来处理 StyleCop 和 Resharper 消息，这很容易生成（来自 Resharper SmartTag）

```
 /// <summary>The xxx view model.</summary>
    public class XXXViewModel : ReactiveObject
    {
    #pragma warning disable 0649
    // ReSharper disable InconsistentNaming

    [SuppressMessage("StyleCop.CSharp.NamingRules", 
      "SA1306:FieldNamesMustBeginWithLowerCaseLetter",
      Justification = "Reviewed. ReactiveUI field.")]
    private readonly bool _IsRunning;

    [SuppressMessage("StyleCop.CSharp.NamingRules", 
      "SA1306:FieldNamesMustBeginWithLowerCaseLetter",
      Justification = "Reviewed. ReactiveUI field.")]
    private string _Name;
    .... 
```

或从完整更改您的属性

```
 /// <summary>Gets or sets a value indicating whether is selected.</summary>
    public bool IsSelected
    {
        get { return _IsSelected; }
        set { this.RaiseAndSetIfChanged(x => x.IsSelected, value); }
    } 
```

到它的组成部分，如

```
 /// <summary>Gets or sets a value indicating whether is selected.</summary>
    public bool IsSelected
    {
        get { return _isSelected; }
        set 
        { 
            if (_isSelected != value)
            {
                this.RaisePropertyChanging(x => x.IsSelected); 
                _isSelected = value;
                this.RaisPropertyChanged(x=>x.IsSelected);
            }
        }
    } 
```

这种模式在您实际上不提供“简单”属性访问器的情况下也很有用，但可能需要更派生的变体，其中设置一个值会影响多个其他值。

-2。是的，文档并不理想，但我发现在 Rx 之后，获取 RxUI 样本非常容易。我还注意到，从 2->4 的跳跃似乎都伴随着支持 Windows 8/Windows 8 Phone 的更改，并且为 Windows Store App 选择了 ReactiveUI，那么 DotNet 4.5 支持非常好。即使用 [CallerName] 现在意味着您只需 this.RaiseAndSetIFChanged(value) 不需要表达式。

-3。由于我没有选择使用它，因此我没有关于日志记录方面的任何反馈。

-4。我也没有与其他框架混合和匹配。

[在http://blog.paulbetts.org/index.php/2012/12/16/reactiveui-4-2-is-released/](http://blog.paulbetts.org/index.php/2012/12/16/reactiveui-4-2-is-released/)上还有一个 ReactiveUI 4.2 的其他贡献者列表，包括 Phil Haack。

# java - 如何在 GWT 的 TextArea 中的文本附近添加图标？

> ID：14436863
> 
> 赞同：0
> 
> 时间：2013-01-21T10:41:01.943
> 
> 标签：java, gwt

我有带有文本的文本区域（一些帮助提示），我想在文本之前添加信息图标，使其看起来像：

```
icon -----
----------
----------
-----.

*icon: help icon
*---: help text 
```

如果无法将图标添加到 TextArea，也许还有其他解决方案（在标签中？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:03:07.353

您不能将图标添加到 TextArea。您可以在指定位置的 TextArea 顶部显示一个图标（通过将图标和 TextArea 添加到 div 并使用相对定位），但是当用户输入它时，它会掩盖它下面的文本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T11:08:00.713

你只需要 CSS 指令：

```
.yourClass {
     background-image : url('yourImage.png');
     background-repeat : no-repeat;
     padding-left : 30px; 
} 
```

.yourClass 是要在 TextArea 上设置的 CSS 类。

30px 对应于图像宽度，以避免将文本定位在其上。

# jakarta-ee - 从 Servlet 容器到 OSGI 的 JAAS 主题传播

> ID：14436870
> 
> 赞同：1
> 
> 时间：2013-01-21T10:41:23.163
> 
> 标签：jakarta-ee

我正在使用geronimo 3.0 AS。我将 OSGI 捆绑包作为 Web 服务，将 webapp 作为前端。我正在使用 JAAS，我想知道如何在我的 osgi 包中获取经过身份验证的用户名（主题）。目前，我可以使用 request.getRemoteUser() 从 webapp 获取用户名，但它在我的 OSGI 包中返回 null。

# asp.net-mvc - 如何从 MVC 中的日历中读取日期到模型属性中

> ID：14436879
> 
> 赞同：0
> 
> 时间：2013-01-21T10:41:48.653
> 
> 标签：asp.net-mvc

我有模型属性

```
 public DateTime SelectedDate { get; set; }
 public DateTime SelectedDateTo { get; set; } 
```

视图有

```
<input id="Testdate-Field" type="text"  style="width: 125px;" value="@Html.DisplayTextFor(m=>m.SelectedDate)" /> To
   <input id="TestdateTo-Field" type="text"  style="width: 125px;" value="@Html.DisplayTextFor(m=>m.SelectedDateTo)" /> 
```

在我有的视图中显示日历

```
 $("#Testdate-Field").bind("click", function(event) {       
     $( "#Testdate-Field").datepicker();
    });    

      $("#TestdateTo-Field").bind("click", function(event) {       
     $( "#TestdateTo-Field").datepicker();
    }); 
```

现在，2个问题

1.  当我第一次单击输入框时，日历不会出现，直到我单击其他地方然后在输入框中输入日期。
2.  当我从日历中选择一个日期时，我的模型属性 SelectedDate 和 SelectedDateTo 不会更改，并且在我阅读它们时保持默认值。我需要做什么才能读取输入日期？

---更新---根据建议添加了这个

```
 $("#Testdate-Field").datepicker();
 $("#TestdateTo-Field").datepicker(); 
```

第一个问题解决了！现在如何将我在日期字段中选择的内容绑定到我的模型属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:06:20.310

对于问题 1，不要将 .datepicker() 代码放在绑定事件中。只需在准备好的文档上执行那些：

```
<script>
    jQuery(document).ready(function ($) {
        $( "#Testdate-Field").datepicker();
        $( "#TestdateTo-Field").datepicker();
    });
</script> 
```

对于您的第二个问题，使用 Html 帮助器生成您的输入，然后在您的控制器中您可以轻松地绑定它们：而不是在您生成的输入标签中使用 DisplayTextFor，而是使用 TextBoxFor 为您生成输入标签：

视图模型：

```
public class SampleViewModel
{
    // other properties here
    public DateTime SelectedDate { get; set; }
    public DateTime SelectedDateTo { get; set; }
    // other properties here
} 
```

看法：

```
@model SampleClassViewModel
@using(Html.BeginForm())
{
    @Html.TextBoxFor(m => m.SelectedDate, new { class = "datepickers" })
    @Html.TextBoxFor(m => m.SelectedDateTo, new { class = "datepickers" })
    <input type="submit" />
}
<script>
    jQuery(document).ready(function ($) {
        $( ".datepickers").datepicker();
    });
</script> 
```

有很多方法可以绑定你的属性，这里有几个......控制器选项1：

```
[HttpPost]
public ActionResult SomeControllerAction(SampleViewModel model)
{
    // do work...
} 
```

控制器选项 2：

```
[HttpPost]
public ActionResult SomeControllerAction()
{
    var model = SomeServiceMethodToBuildModel();
    this.TryUpdateModel(model);
    // do work...
} 
```

谢谢！

# asp.net - 分页动态 Asp.net 表

> ID：14436886
> 
> 赞同：0
> 
> 时间：2013-01-21T10:42:00.117
> 
> 标签：asp.net, pagination

在为动态 ASP.net 表创建分页时，我需要您的帮助。可能吗？。有人能帮我吗？下面的代码创建了一个表，后来我绑定了 10000+ 行的结果。

```
Table tbl = new Table();

    tbl.ID = "Table1";
    tbl.CellSpacing = 1;

    PanelReport.Controls.Add(tbl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:54:17.723

不要使用`Table`来做到这一点。
它用于设计简单的布局。

像[GridView这样提供内置分页的数据](http://msdn.microsoft.com/en-us/library/aa479339.aspx)[绑定控件](http://msdn.microsoft.com/en-us/library/cc295567.aspx)将更好地满足您的需求。

# javascript - 在此 jquery 幻灯片中随机化图像

> ID：14436889
> 
> 赞同：1
> 
> 时间：2013-01-21T10:42:18.353
> 
> 标签：javascript, jquery, html, css, slideshow

有没有办法随机化这个 jquery 幻灯片中的图像，这样每次页面刷新时它都不会以相同的图像开始？

这是HTML：

```
<div id="slideshow">

<img src="http://image.jpg" alt="image 1" class="active">
<img src="http://image.jpg" alt="image 2" >
<img src="http://image.jpg" alt="image 3" >

</div> 
```

这是脚本：

```
function slideSwitch() {
var $active = $('#slideshow IMG.active');

if ( $active.length == 0 ) $active = $('#slideshow IMG:last');

var $next =  $active.next().length ? $active.next()
    : $('#slideshow IMG:first');

$active.addClass('last-active');

$next.css({opacity: 0.0})
    .addClass('active')
    .animate({opacity: 1.0}, 6000, function() {
        $active.removeClass('active last-active');

    });
}

$(function() {
setInterval( "slideSwitch()", 8000 );
}); 
```

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:56:05.873

首先按编号定义所有具有类的图像。比如说，“图像 1”、“图像 2”、“图像 3”等。不要为任何图像定义活动类。然后使用此代码随机给任何图像“活动”类。

```
$(document).ready(function() {
     var random = 1 + Math.floor(Math.random() * 3);
     $('.image ' + random).addClass('active');
}) 
```

如果有 'n' 个图像，请使用 var random = 1 + Math.floor(Math.random() * n);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:51:48.213

您可以在页面加载时为您的图像标签随机分配`active`类，例如：

```
$(document).ready(function() {
  $("#slideshow img").removeClass("active");
  randomDiv = $("#slideshow img").get().sort(function(){ 
     return Math.round(Math.random())-0.5
  }).slice(0,1);
  $(randomDiv).addClass("active");
}); 
```

这样每次新的 img 标签获取活动类并将从该 img 标签开始

# windows - 任何具有公共 API 的基于 Windows 的色度计

> ID：14436894
> 
> 赞同：0
> 
> 时间：2013-01-21T10:42:42.397
> 
> 标签：windows, api, colors, calibration, philips-hue

我可以使用变色灯泡系统（Philips Hue）。因为灯光内部不使用 RGB LED，所以当您使用 API 时，很难预测您会从灯光中获得的颜色。我想测量光的颜色，以尝试改进它们由我正在编写的一些软件驱动的方式，并了解它们所覆盖的色彩空间。为什么没有什么是真正准确的，我想知道用于颜色校准显示器的色度计是否有用。但是，我不知道是否有任何商用系统实际上提供了一个 API 来直接从设备读取值。

有人知道带有公共 API 的色度计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:08:29.953

请注意，还有一些功能可以将 RGB 转换为可用于飞利浦 Hue 灯的值。

参见例如： [https ://github.com/Q42/Q42.HueApi/blob/master/src/Q42.HueApi/HueColorConverter.cs](https://github.com/Q42/Q42.HueApi/blob/master/src/Q42.HueApi/HueColorConverter.cs)

如果您需要另一种语言，您可以移植该函数或查看其他 api 之一：

[https://github.com/Q42/hue-libs](https://github.com/Q42/hue-libs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:55:47.333

以下是一些可以帮助您入门的想法；所有这些都是开源的：1）和教育色度计套件[在这里](http://www.iorodeo.com/colorimeter) 2）[iorodeo](https://bitbucket.org/iorodeo/colorimeter/src) 3）[关于色度计想法的文章](https://lwn.net/Articles/467240/) 4）[替代考虑：使用相机](https://photo.stackexchange.com/questions/10757/why-not-use-a-camera-as-a-colorimeter)

我希望其中一些是有帮助的。干杯！

# java - Java 自定义库导出和导入与 eclipse

> ID：14436895
> 
> 赞同：0
> 
> 时间：2013-01-21T10:42:44.097
> 
> 标签：java

我想用一些自定义方法创建自己的库，这些方法将返回不同的字符串进行加密和解密。我知道如何使用 eclipse 导出特定的类，但是在导入 jar 文件后，我不知道如何调用这些方法。

```
package com.chriss.cipher;

public class MyLibrary {
    private static final String MSG_1 = "<My awesome 1 MESSAGE>";

    public String generateString(int val){
        return val+" --> "+MSG_1;
    }

    protected String testingString(int value){
        return value + " <this is awesome> !";
    }

    private String testMyString(int value){
        return "---> " + value;
    }
} 
```

一个定制的库应该是抽象的吗？

为什么人们说我的方法应该受到保护，不要公开任何我不想公开的东西。这是一些安全风险吗？安全从何而来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:52:48.997

要使用库 jar，您需要将导出的 jar 文件导入到项目中，或者更确切地说是类路径（准确地说）。

将该类导入您的java文件并调用该方法。

有关为什么应保护某些方法的详细信息，您应该阅读 OOPS 和 Java 中的抽象和数据隐藏。

希望这可以帮助 ！

# redirect - 如何在 Wicket 的 setResponsePage() 中添加锚点？

> ID：14436899
> 
> 赞同：4
> 
> 时间：2013-01-21T10:42:58.307
> 
> 标签：redirect, wicket, anchor

我们需要将访问某个 url 的用户重定向到 Wicket 页面并滚动到页面中的锚点。例如，用户直接链接到`http://.../target/url/123`. 之后，`123`从数据库中查找 id。随后，将根据是否找到实体将用户重定向到不同的页面。

获取实体后，应将用户重定向到`http://.../another/url/123#element123`. 我们如何使用 Wicket 实现这一目标？该页面也应该可以在没有锚点的情况下访问，并且最好的解决方案应该是通用的。

我想出的一种解决方案是`PageParametersEncoder`在`#anchor`包含`PageParameters`名为`anchor`. 但是，这意味着我还需`Url`要用我自己的扩展类来附加锚点。

```
public class ExtendedEncoder extends PageParametersEncoder {

    public static final String ANCHOR = "anchor";

    @Override
    public Url encodePageParameters(PageParameters pageParameters) {
        Url fromSuper = super.encodePageParameters(pageParameters.remove(ANCHOR));
        return new ExtendedUrl(fromSuper,
                pageParameters.get(ANCHOR).toOptionalString());

    }
}

public class ExtendedUrl extends Url {
        private String anchor;

        private ExtendedUrl(Url url, String anchor) {
            super(url);
            this.anchor = anchor;
        }

        @Override
        public String toString(StringMode mode, Charset charset) {
            return super.toString(mode, charset)
                   + anchor == null ? "" : "#" + anchor;
        }
    }
} 
```

该问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:07:13.610

以下代码将 javascript 片段呈现到目标页面的 html 中，在页面加载时会将页面聚焦在 url 中指定的锚点上。

```
@Override
public void renderHead(IHeaderResponse response) {
    super.renderHead(response);
    long anchor = getRequest().getQueryParameters().getParameterValue("anchor").toLong(0);
    if (anchor > 0) {
        response.render(new OnLoadHeaderItem("location.href='#anchor" + anchor + "';"));
        anchor = 0;
    }
} 
```

顺便说一句，这适用于 wicket 6。尽管在 1.5 和以前的版本中，您可以做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:23:08.397

您可以询问页面的 URL，然后重定向

```
String fullUrl = RequestCycle.get().getUrlRenderer()
    .renderFullUrl(Url.parse((String) urlFor(RedirectPage.class,parameters)));
setResponsePage(new RedirectPage(fullUrl+"#anchor")); 
```

# c# - html文档的字符编码没有在aspx页面中声明

> ID：14436901
> 
> 赞同：0
> 
> 时间：2013-01-21T10:43:10.727
> 
> 标签：c#, asp.net

![在此处输入图像描述](../Images/d1a10b4a7ced488a7109535b69f4a93d.png)

我在 .aspx 页面中遇到了上述错误。我加

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta content="utf-8" http-equiv="encoding"> 
```

到我的 aspx 页面，但我仍然收到此错误，请帮助我...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:52:49.210

您应该尝试在 Page 指令中设置 CodePage（请参阅[http://msdn.microsoft.com/en-us/library/ydy4x04a%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/ydy4x04a%28v=vs.71%29.aspx)）

例如，对于 ISO-8859-1，代码页是 28591 ：

```
<%@ Page language="c#" Codebehind="yourpage.aspx.cs" AutoEventWireup="false" Inherits="yourpage" 
codePage="28591" %> 
```

对于 utf-8，代码页是 65001 ：

```
<%@ Page language="c#" Codebehind="yourpage.aspx.cs" AutoEventWireup="false" Inherits="yourpage" 
codePage="65001" %> 
```

有关代码页列表，请参阅 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756%28v=vs.85%29.aspx)

希望这会有所帮助

# java - 通过 URL 访问 JAR 的内部文件后，我可以删除它吗？

> ID：14436904
> 
> 赞同：0
> 
> 时间：2013-01-21T10:43:14.890
> 
> 标签：java, url, groovy

在 Groovy 中，我正在从 JAR 中读取一个文件，经过一些处理，我希望删除这个 JAR，但是一旦通过 URL 访问，它似乎并没有让我这样做。

例子：

```
File jarFile = new File('jarFile.jar')
URL url = jarFile.toURI().toURL()

URL intUrl = new URL("jar:$url!/internalFile.json")
println intUrl.text // reads text correctly

jarFile.delete() // returns false, cannot delete 
```

**getText()**命令的 Javadoc说连接在调用结束时关闭，并且这个 JAR 通常不在类路径上。有什么办法可以让这段代码工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:50:43.173

尝试设置`sun.zip.disableMemoryMapping`系统属性：

```
java -Dsun.zip.disableMemoryMapping=true .... 
```

（或者在调用 Gradle 时设置系统属性）。 `ZipFile`（支持`jar:`URL）默认使用内存映射，这可能导致 Windows 认为有问题的文件仍处于打开状态。如果这不是一个选项，那么您可以尝试使用`commons-compress`ZipFile 实现而不是`java.util.zip`一个：

```
@Grab(group='org.apache.commons', module='commons-compress', version='1.4.1')
import org.apache.commons.compress.archivers.zip.*

File jarFile = new File('jarFile.jar')
ZipFile f = new ZipFile(jarFile)
ZipArchiveEntry json = f.getEntry('internalFile.json')
if(json) {
  f.getInputStream(json)?.withStream {
    println it.getText('UTF-8')
  }
}
f.close()
jarFile.delete() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:53:30.690

你可以试试这个：

```
import java.util.zip.ZipFile

File jarFile = new File( 'jarFile.jar' )

String text = new ZipFile( jarFile ).with { zf ->
  String result = zf.entries().findResult { ze ->
    if( ze.name == 'internalFile.json' ) {
      zf.getInputStream( ze ).withReader {
        it.text
      }
    }
  }
  zf.close()
  result
}

println text

jarFile.delete() 
```

为了避免（我怀疑是）类加载器锁定 jar 文件

# python - Python 发行版的用例是什么？

> ID：14436912
> 
> 赞同：5
> 
> 时间：2013-01-21T10:43:38.200
> 
> 标签：python, pip, setuptools, distutils, distribute

我正在为我正在编写的 Python 包开发一个发行版，以便可以将其发布在 PyPI 上。这是我第一次使用 distutils、setuptools、distribute、pip、setup.py 和所有这些，我正在努力学习曲线，它比我预期的要陡峭一些 :)

通过在 setup.py的参数中指定它们来将我的一些测试数据文件包含在 tarball 中时，我遇到了一些麻烦，`data_files`直到我在这里遇到另一篇将我指向该`MANIFEST.in`文件的帖子。就在那时，我突然想到，您在 tarball/zip 中包含的内容（使用 MANIFEST.in）以及在用户执行 easy_install 或其他任何操作时安装在用户的 Python 环境中的内容（基于您在 中指定的内容`setup.py`）是两个非常不同的东西; 一般来说，tarball 中的内容比实际安装的要多得多。

这立即引发了我的代码异味，并意识到发行版必须有多个用例；我一直专注于我真正参与的唯一一个，使用 easy_install 或 pip 安装库。然后我意识到我正在开发工作产品，而我对我正在开发的最终用户只有部分了解。

所以我的问题是：“除了将 Python 发行版安装在自己的 Python 环境中之外，还有哪些用例？我还为谁服务于这个发行版，他们最关心什么？”

以下是一些我尚未弄清楚的与答案有关的工作问题：

*   在源代码分发中包含源代码控制 (git) 下的所有内容是否明智？在 github 时代，有没有人下载源代码分发来访问完整的项目源代码？或者我应该只发布一个指向我的 github 存储库的链接？不会包含所有内容会使发行版膨胀并使只想安装它的人花费更长的时间下载吗？

*   我将在 readthedocs.org 上托管文档。在源代码分发中包含 HTML 版本的文档对我来说有意义吗？

*   有没有人用来`python setup.py test`在源代码发行版上运行测试？如果是这样，他们扮演什么角色，他们处于什么情况？我不知道我是否应该费心去做这项工作，如果我这样做，该为谁工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:35:08.267

您可能希望在源代码分发中包含但可能不安装的一些内容包括：

*   包的许可证
*   一个测试套件
*   文档（可能是经过处理的表单，如 HTML 以及源代码）
*   可能用于构建源代码分发的任何其他脚本

通常这将是您在版本控制中管理的大部分或全部内容，可能还有一些生成的文件。

当这些文件在线或通过版本控制可用时，您这样做的主要原因是让人们知道他们拥有与他们正在运行的代码相匹配的文档或测试版本。

如果您只在线托管最新版本的文档，那么它们可能对出于某种原因必须使用旧版本的人没有用处。并且版本控制中尖端的测试套件可能与源代码分发中的代码版本不兼容（例如，如果它测试从那时起添加的功能）。为了获得正确版本的文档或测试，他们需要梳理版本控制，寻找与源代码分发相对应的标签（假设开发人员打扰标记树）。让源代码分发中的文件可用可以避免这个问题。

至于想要运行测试套件的人，我有许多 Python 模块打包在各种 Linux 发行版中，偶尔会收到与他们环境中的测试失败相关的错误报告。当我遇到错误并想检查外部代码在我的环境中是否按照作者期望的方式运行时，我也使用了其他人模块的测试套件。

# intuit-partner-platform - 无法使用 IDS 和同步管理器在 QB Windows 上创建（POST）对象（帐户、客户...）

> ID：14436914
> 
> 赞同：1
> 
> 时间：2013-01-21T10:43:39.743
> 
> 标签：intuit-partner-platform

在这里，我为您提供了在发布创建新帐户的请求时遇到错误的完整场景。

我正在使用 Intuit OAuth Access 和 OAuth API 控制台进行测试（使用所有安全令牌）。（https://appcenter.intuit.com/Playground/OAuth）

以及 URL 和请求：

```
URL: https://services.intuit.com/sb/account/v2/570357960 
```

方法：发布

格式：XML/JSON

```
Request:

<?xml version="1.0" encoding="UTF-16"?><Add xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" RequestId="4df87bw2-916a-

4r95-h5d6-06dce3667562" 

xmlns="http://www.intuit.com/sb/cdm/v2"><ExternalRealmId>570357960</ExternalRealmId><Objectxsi:type="Account"><Name>CurrentAccount</Name><Active>true</Active><Type>Expense<

/Type><Subtype>Expense</Subtype><AcctNum>1111</AcctNum></Object></Add> 
```

并获得响应（html 中的错误）：

```
 <div class="content-container"><fieldset>
  <h2>500 - Internal server error.</h2>
  <h3>There is a problem with the resource you are looking for, and it cannot be displayed.</h3> 
```

而且我还检查了 RESTClient 实用程序，但得到了相同的上述错误。

> 请注意，具有相同安全令牌的相同 url (https://services.intuit.com/sb/account/v2/570357960) 对于 GET data 工作正常，我正在从 QB 桌面获取数据到我的在线应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:23:00.503

正如基思所说，检查内容类型。您还需要使用 RestClient 进行测试。Playground 不适用于测试 API 调用。它仅适用于平台调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:48:26.747

如果我不得不猜测...我猜您发送了错误的 Content-Type 标头...但是在您发布更多代码/其余 HTTP 请求之前，无法确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:21:40.773

有几件事要尝试。确保 XML 与此示例的顺序相同并尝试一下。另一个是您在 GET 中使用 Oauth 时的常见错误，您只在签名中包含 url，但在 POST 中，您也需要在签名中包含 Body，否则它将无法通过 Oauth 验证。

最后，正如 Keith 提到的检查内容类型。尽管您通常会收到内容类型错误。

156234822 CurrentAccount true 费用 费用 1111

# jquery - 为什么此页面中的幻灯片不适用于最新版本的 Google Chrome

> ID：14436915
> 
> 赞同：2
> 
> 时间：2013-01-21T10:43:40.710
> 
> 标签：jquery, html, google-chrome

该网站在大多数浏览器上都运行良好...但是使用最新版本的 Google Chrome 我看不到任何图像...有人可以帮帮我吗？

[http://www.bexnet.it/BExpresso/](http://www.bexnet.it/BExpresso/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:46:18.200

在包装器上声明一个高度，这将解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:47:46.037

还：

加载资源失败：服务器响应状态为 404（未找到） [http://www.bexnet.it/lib/jquery.mousewheel-3.0.6.pack.js](http://www.bexnet.it/lib/jquery.mousewheel-3.0.6.pack.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:24:00.433

您的幻灯片列表已隐藏溢出，并且由于某种原因它的宽度为 0。添加宽度：100% 以修复

```
.blueberry .slides {
   width: 100%;
} 
```

# powershell - 优雅地关闭远程会话中的进程

> ID：14436916
> 
> 赞同：1
> 
> 时间：2013-01-21T10:43:41.413
> 
> 标签：powershell, process, kill, powershell-remoting

我目前正在编写一个小 PowerShell 脚本来重置远程计算机上的用户 Outlook 配置文件。

在完成必要的配置文件之前，我想检查 Outlook 是否已经在远程计算机上运行，​​如果是，请优雅地停止它。我不想终止该进程，以便它可以进行必要的清理和同步。

当我使用管理用户连接到机器并执行以下命令时：

```
Enter-PSSession $remoteMachine
$outlookProcess = Get-Process outlook
$outlookProcess.CloseMainWindow() 
```

我只得到

```
False 
```

作为“返回值”

杀死进程：

```
Stop-Process $outlookProcess 
```

作品。

我试图关闭的进程不是由我连接的管理用户启动的，所以起初我认为我可能不允许在这个用户上下文中进行操作，但是如果我在本地机器上做同样的事情（启动进程使用“普通”用户，然后将 CloseMainWindow() 与管理用户一起使用）它会毫无问题地关闭进程。

所以我的问题是如何优雅地关闭这个远程进程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:04:08.130

要正常关闭 Windows 应用程序，请向应用程序发送 WM_CLOSE 消息。只要用户没有修改状态会导致应用弹出 UI 询问是否应保存更改，这应该可以工作。这是一个显示如何关闭记事本应用程序的示例 - 只要没有未保存的更改即可。

```
$src = @'
using System;
using System.Runtime.InteropServices;
public static class Win32 {
    public static uint WM_CLOSE = 0x10;

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
    public static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);
}
'@

Add-Type -TypeDefinition $src
$zero = [IntPtr]::Zero
$p = @(Get-Process Notepad)[0]
[Win32]::SendMessage($p.MainWindowHandle, [Win32]::WM_CLOSE, $zero, $zero) > $null 
```

# c# - 如何从数据库字段长度动态设置绑定文本框的 maxlength 属性

> ID：14436918
> 
> 赞同：0
> 
> 时间：2013-01-21T10:43:47.547
> 
> 标签：c#, asp.net

我有一个 asp.net 4.0 c# web 应用程序。我在表单上使用带有模板的 listview 和 formview 控件。我正在尝试控制绑定文本框的 maxlength 属性，而无需将字段大小硬编码到我的 aspx 页面中。我想在第一次加载应用程序时用我的字段的列长度填充某种本地对象或数组，然后使用这些值动态设置文本框的 maxLength 字段。有很多方法可以尝试，我不确定哪种方法最有效。我获取架构信息的 sql 是

```
SELECT     TOP (100) PERCENT sys.sysobjects.name AS TableName, sys.syscolumns.name AS ColumnName, sys.systypes.name AS DataType, 
                      sys.syscolumns.length
FROM         sys.sysobjects INNER JOIN
                      sys.syscolumns ON sys.sysobjects.id = sys.syscolumns.id INNER JOIN
                      sys.systypes ON sys.syscolumns.xtype = sys.systypes.xtype WHERE     (sys.sysobjects.xtype = 'U') AND (sys.systypes.name <> 'sysname')
ORDER BY TableName, sys.syscolumns.colid 
```

我如何在本地存储它，这样我就不必一直查询服务器，我可以使用 c# 动态设置它

我是一个半新手，所以能提供尽可能多的细节将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:49:18.190

有两种主要方法可以做到这一点，静态变量（本质上是全局变量）或使用应用程序缓存。我个人更喜欢静态变量，因为我发现 API`System.Web.Caching`过于复杂。

这是您使用静态变量的方式，并讨论了哪种方法最好（包括如何`Lazy`在 .Net 4.0+ 中使用新类）：

[为什么使用 System.Runtime.Caching 或 System.Web.Caching Vs 静态变量？](https://stackoverflow.com/questions/5986466/why-use-system-runtime-caching-or-system-web-caching-vs-static-variables)

这是如何使用 System.Web.Caching：

[http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

我不会太担心哪个更有效，这样做的方法在性能方面几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:58:04.863

感谢您的建议。出于我的目的，我只是保持简单，因为这是一个相对较小的应用程序。由于我使用的是模板，因此我在许多地方多次定义了相同的字段。由于我的应用程序数据字段会经常更改，这只是在应用程序中为我提供了一个更改 maxLength 属性的位置。

在我的 aspx 页面中：' MaxLength="<%# TableSchema.SomeField1Length%>" />

我做了一堂课

公共静态类 TableSchema {

```
 public static  int SomeField1Length
    {
    get { return 15; }

    }

    public static int SomeField2Length
    {
    get { return 100; }

    }

    public static int SomeField3Length
    {
        get { return 15; }

    } 
```

}

它似乎工作正常。我必须看看这是否会导致性能下降。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:09:56.140

看到您正在从数据库中获取列长度，现在您需要这样做`txtBox.MaxLength`。
如果您已经设计了与数据库表紧密耦合的 aspx 页面，则可以避免动态执行此操作。
但是，如果您确定要这样做，那么：
1.) 在应用程序启动时，从数据库中获取所有值并从中制作字典缓存，只要应用程序启动，它将位于内存中。
2.）现在，在每个页面加载时，您需要从字典中读取这些值并使用`TextBox.MaxLength`属性来设置值。这样，您可以在将最大长度属性传递到客户端计算机之前对其进行调整。
而已 ！！！

无论如何，任何这种方法都会降低应用程序的性能。考虑预先设计 aspx 页面。

# mysql - 如何选择外键关系元素仅在时间过去或根本不存在的行

> ID：14436931
> 
> 赞同：1
> 
> 时间：2013-01-21T10:44:49.060
> 
> 标签：mysql, sql, doctrine-orm

我有 2 张桌子：

1.  事件系列
2.  事件

每个“**事件**”都通过**event_serie_id**外键和**date_time列与“** **event_serie** ”有关系，这显然是事件开始的时间（YYYY-MM-DD HH:MM:SS 格式）。

 ****现在对我来说有趣且非常困难的部分 - 我如何选择**仅**包含过去事件或根本没有事件的“ **event_serie** ” ？换句话说，我需要找到没有今天和未来或 0 个事件的“event_serie”。

我会欣赏mysql和doctrine2的例子（如果实际上可以使用DQL）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:55:15.330

```
SELECT * 
  FROM my_table x
  LEFT
  JOIN my_other_table y 
    ON y.id = x.id
   AND y.date >= NOW()
 WHERE y.id IS NULL; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:52:32.440

```
SELECT  a.*, b.*, c.latestDate
FROM
        event a
        LEFT JOIN event_serie b
            ON a.event_serie_id = b.event_serie_id
        LEFT JOIN
        (
            SELECT  event_serie_id, MAX(date_time) latestDate
            FROM    event_serie
            GROUP   BY event_serie_id
        ) c ON a.event_serie_id = c.event_serie_id
WHERE   b.event_serie_id IS NULL OR
        b.date_time < c.latestDate 
```****

# r - 循环中的R条形图并将它们保存到文件中

> ID：14436935
> 
> 赞同：0
> 
> 时间：2013-01-21T10:45:08.683
> 
> 标签：r

我想使用 for 循环制作多个条形图，并将这些图另存为单独的 .bmp 文件。

我从数据框列表（covpatient）开始。我知道如何制作单个条形图，但我不知道如何将它们放入 for 循环并保存结果。

```
for (i in 1:length(covpatient)) {
       filename = paste(covpatient[[1]]$gene[1],"bmp", sep = ".")
       barplot ... OK
       print(?)
       dev.off()
} 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:47:15.337

你快到了：

```
for (i in 1:length(covpatient)) {
       filename = paste(covpatient[[1]]$gene[1],"bmp", sep = ".")
       # You just missed this:
       bmp(filename)
       barplot ... OK
       dev.off()
} 
```

# mysql - Mysql where 子句中断计算查询

> ID：14436937
> 
> 赞同：0
> 
> 时间：2013-01-21T10:45:19.747
> 
> 标签：mysql

想知道是否有人可以指出我下面代码中的错误。我有 mysql 查询，按月显示销售线索，然后计算转化为销售额的百分比。如果我在其中添加 where 子句，它会破坏总列，因为它的输出与 Comms 列相同？

```
 Select
  q.*,
  ROUND(100 * Comms / Total, 2) As Conversion,
  If(q.Adviser Is Null, 1, 0) As remove
From
  (Select
      a.ContactFullName As Adviser,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 1) AS Jan,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 2) As Feb,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 3) As Mar,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 4) As Apr,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 5) As May,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 6) As Jun,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 7) As Jul,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 8) As Aug,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 9) As Sep,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 10) As Oct,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 11) As Nov,
      SUM(YEAR(b.CaseDate) = 2013 AND Month(b.CaseDate) = 12) As Dece,
      Count(b.CaseID) As Total,
      Sum(Case When Year(b.StatusSubmittedDate) = 2013 Then 1 Else 0
      End) As Comms

    From
      tblcontacts a Inner Join 
```

如果没有 WHERE 子句，它会输出；

```
Total - Comms - Conversion
479   -  148  - 30.9% 
```

使用 WHERE 子句输出；

```
Total - Comms - Conversion
148   -  148  - 100% 
```

我无法弄清楚为什么会发生这种情况？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:02:10.733

**更新：**

我重写了你的整个查询：

```
Select
  q.*,
  totals.total,
  ROUND(100 * Comms / totals.total, 2) As Conversion
  If(q.Adviser Is Null, 1, 0) As remove
From
  (Select
      a.ContactFullName As Adviser,
      Sum(Month(b.CaseDate) = 1) As Jan,
      Sum(Month(b.CaseDate) = 2) As Feb,
      Sum(Month(b.CaseDate) = 3) As Mar,
      Sum(Month(b.CaseDate) = 4) As Apr,
      Sum(Month(b.CaseDate) = 5) As May,
      Sum(Month(b.CaseDate) = 6) As Jun,
      Sum(Month(b.CaseDate) = 7) As Jul,
      Sum(Month(b.CaseDate) = 8) As Aug,
      Sum(Month(b.CaseDate) = 9) As Sep,
      Sum(Month(b.CaseDate) = 10) As Oct,
      Sum(Month(b.CaseDate) = 11) As Nov,
      Sum(Month(b.CaseDate) = 12) As Dece,
      Count(b.StatusSubmittedDate) As Comms

    From
      tblcontacts a Inner Join
      tblcases b On a.ContactID = b.ContactAssignedTo 
      WHERE Year(b.StatusSubmittedDate) = 2013
    Group By
      a.ContactFullName With Rollup) q
    inner join (select  a.ContactFullName As Adviser, count(*) as total from
    tblcontacts a Inner Join
      tblcases b On a.ContactID = b.ContactAssignedTo 
      WHERE Year(b.StatusSubmittedDate) = 2013
      group by Adviser
      )totals on q.Adviser = totals.Adviser 
```

**原答案：**

要拥有多个 COUNTS，您可以像这样解决问题：

```
 Count(b.CaseID) As Total,
      SUM(CASE WHEN YEAR(b.StatusSubmittedDate) = 2013 THEN 1 ELSE 0 END) As Comms, 
```

但是这个：

```
 ROUND(100 * Count(b.StatusSubmittedDate) / Count(b.CaseID), 
```

不会工作，因为这个计算必须稍后完成。

```
Select
  q.*,
  ROUND(100 * Comms / Total, 2) As Conversion,
  If(q.Adviser Is Null, 1, 0) As remove
From
  (Select
      a.ContactFullName As Adviser,
      Sum(Month(b.CaseDate) = 1 and year(b.CaseDate) = 2012) As Jan,
      ... Dec,
      Count(b.CaseID) As Total,
      SUM(CASE WHEN YEAR(b.StatusSubmittedDate) = 2013 THEN 1 ELSE 0 END) As Comms
    From
      tblcontacts a Inner Join
      tblcases b On a.ContactID = b.ContactAssignedTo 
    Group By
      a.ContactFullName With Rollup) q 
```

# c# - 方法的通用版本与接口版本

> ID：14436942
> 
> 赞同：6
> 
> 时间：2013-01-21T10:45:37.120
> 
> 标签：c#, generics, interface

这两种方法有什么区别？

**第一的：**

```
public static int Foo<T>(T first, T second) where T:IComparable
{
    return first.CompareTo(second)
} 
```

**第二：**

```
public static int Foo(IComparable first, IComparable second)
{
    return first.CompareTo(second);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T10:48:40.990

对于第一种方法，两个参数的类型必须相同，例如，`int`和`int`。类型必须实现`IComparable`接口。

对于第二种方法，两个参数可以有不同的类型。两种类型都必须实现`IComparable`接口，但不必相同，例如`int`和`string`。

请注意，如果类型不同， [IComparable.CompareTo 方法](http://msdn.microsoft.com/en-us/library/system.icomparable.compareto.aspx)可能会引发异常。所以最好确保类型*实际上*是相同的。[您可以使用第一种方法来做到这一点，或者使用通用IComparable<T> 接口](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx)更好。

* * *

后续问题当然是：这两种方法有什么区别？

**第一的：**

```
public static int Foo<T1, T2>(T1 first, T2 second) where T1 : IComparable<T2>
{
    return first.CompareTo(second);
} 
```

**第二：**

```
public static int Foo<T>(IComparable<T> first, T second)
{
    return first.CompareTo(second)
} 
```

回答：第一种方法不会将第一个参数装箱，而第二种方法会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:49:49.550

从提供的代码片段可以说，

泛型版本：

*   对于泛型，将为定义的每种类型生成新代码

`Foo<Class1>`, `Foo<Class2>`, `Foo<Class3>`.

*   你需要在*编译时定义一个类型*

接口版本：

*   受益于 OOP 概念，从实际代码中隐藏实现细节。

*   运行时类型定义（更灵活），但就该词的纯意义而言，“通用”较少。

一般来说：*接口版本*更灵活但通用性较低（顺便说一句，一切自然取决于具体的代码实现）。

# mediaelement.js - mediaelement.js 视频不适用于 safari

> ID：14436944
> 
> 赞同：2
> 
> 时间：2013-01-21T10:46:00.017
> 
> 标签：mediaelement.js

[即使在播放器网站http://mediaelementjs.com/](http://mediaelementjs.com/)的主视频中，mediaelement.js 视频也不会永远加载和显示加载图像

这发生在我的 safari 5.1.7 for windows 我的系统是 windows 7 64bit

我已经安装了 quicktime 这不是问题

我试图删除所有东西，如果它的纯html5视频标签视频工作正常，但是当它链接到mediaelement库时它拒绝加载并且加载图像继续旋转infintley

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T15:00:04.293

您必须使用完整的 URL 作为源，而不仅仅是路径：

[http://www.example.com/path/to/video.mp4](http://www.example.com/path/to/video.mp4)而不是 path/to/video.mp4

# linux - 将 cron 选项卡设置为工作日的特定时间

> ID：14436953
> 
> 赞同：91
> 
> 时间：2013-01-21T10:46:31.540
> 
> 标签：linux, cron

我正在尝试在 Ubuntu 服务器上设置一个 cron 作业。我们希望 cron 作业在一天中的某些时间和一周中的某些特定日子运行脚本。例如，我们想设置一个按以下顺序运行脚本的 cron 作业：

> 在工作日的上午 9 点到下午 2 点，每 2 分钟执行一次脚本。

到目前为止，这是我能够做到的：

> */2 09-14 * * * /path_to_script

工作日我应该做什么？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-01-21T10:50:15.453

和你几个小时一样：

```
*/2 09-18 * * 1-5 /path_to_script 
```

`0`and `7`stand for Sunday
`6`代表星期六
，所以`1-5`表示从星期一到星期五

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-12-02T01:43:26.580

您在要求中声明下午 2 点，小时范围应在 14 点结束，而不是 18 点（即下午 6 点）。

```
*/2 9-14 * * 1-5 /path_to_script 
```

人 crontab

[http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-16T17:54:24.723

实际上，您希望脚本运行的最后一小时是 13:00 到 13:59，因此您希望：

```
*/2 9-13 * * 1-5 /path_to_script 
```

这意味着第一次运行将是 9:00，然后是 9:02，依此类推，直到 13:58，这将是最后一次运行，因为不包括 14:00。

# windows-phone-7 - 如何获取 windows phone 中的总通话时长？

> ID：14436955
> 
> 赞同：1
> 
> 时间：2013-01-21T10:46:33.280
> 
> 标签：windows-phone-7

如何获取 Windows Phone 的总通话时长（来电和去电）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:48:05.650

不，目前无法在 windows phone 中获取通话相关信息。

# node.js - 如何在 CompoundJS 中切换环境？

> ID：14436958
> 
> 赞同：3
> 
> 时间：2013-01-21T10:46:46.967
> 
> 标签：node.js, mongodb, environment

我对 CompoundJS 很陌生。我正在开发一个访问 MongoDB 中数据的示例应用程序。我想知道是否有任何方法可以像在 Rails 中那样在 CompoundJS 中切换环境（RAILS_ENV = 开发/测试/生产）。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:43:12.910

像往常一样在 nodejs 中你可以使用 NODE_ENV 变量（与 ruby​​/rails 中的 RAILS_ENV 相同）：

```
NODE_ENV=production node . 
```

应该适用于复合（来自复合项目的工作目录）。

# c# - 从 Control 继承的类不显示在窗体上

> ID：14436959
> 
> 赞同：4
> 
> 时间：2013-01-21T10:46:48.727
> 
> 标签：c#, winforms, user-controls

我有一个用 c# 编写的类，继承自 Control，如下所示。

```
 class MyImage:Control
    {
    private Bitmap bitmap;
    public MyImage(int width, int height)
    {
        this.Width = width;
        this.Height = height;
        bitmap = new Bitmap(width,height);
        Graphics gr = Graphics.FromImage(bitmap);
        gr.FillRectangle(Brushes.BlueViolet,0,0,width,height);
        this.CreateGraphics().DrawImage(bitmap,0,0);
    }        
   } 
```

从我的主要形式我创建了这个类的一个对象。并将对象添加到表单中，如下所示。

```
private void button1_Click(object sender, EventArgs e)
{
        MyImage m = new MyImage(100,100);
        m.Left = 100;
        m.Top = 100;
        this.Controls.Add(m);
} 
```

但它没有出现在表格上。问题是什么。
谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T10:49:06.097

您不应该在类构造函数中绘制任何内容。您应该重写 OnPaint 方法并在此处绘制所有自定义图形。

你可以这样写：

```
public partial class MyImage : Control
{
    public MyImage()
    {
        InitializeComponent();

        bitmap = new Lazy<Bitmap>(InitializeBitmap);    
    }

    private Lazy<Bitmap> bitmap;
    private Bitmap InitializeBitmap()
    {
        var myImage = new Bitmap(Width, Height);
        using(var gr = Graphics.FromImage(myImage))
        {
            gr.FillRectangle(Brushes.BlueViolet, 0, 0, Width, Height);
        }

        return myImage;
    }

    protected override void OnPaint(PaintEventArgs pe)
    {
        base.OnPaint(pe);

        pe.Graphics.DrawImage(bitmap.Value, 0, 0);
    }       
} 
```

收件人代码：

```
private void button1_Click(object sender, EventArgs e)
{
  var m = new MyImage(100,100)
  {
    Width = 100,
    Height = 100,
    Left = 100,
    Top = 100
  }

  Controls.Add(m);
} 
```

# javascript - 当服务器和客户端在同一系统上时如何捕获 JSON 对象

> ID：14436964
> 
> 赞同：0
> 
> 时间：2013-01-21T10:47:29.033
> 
> 标签：javascript, jquery, html, ajax, json

我制作了具有表单的 HTML 页面，在提交时，它使用此事件处理程序调用 JavaScript。

```
 onClick = operation(this.form) 
```

JavaScript**是：**

```
function operation(x) {
    //url:"C:\Users\jhamb\Desktop\assignment_1_18_1_13\question_3\ques\form1.html",
    url:"http://localhost:8080",
    $.ajax({
       data:{
           comment:x.comment.value,       // information from html page
           email: x.email.value,          // information from html page
           url:x.url.value,               // information from html page
           name:x.name.value,             // information from html page
       }
    }).done(function(serverResponse){
         alert("response is ready");    //here you can handle server response
    }).fail(function(err){
         alert("ohhh!!! there is some error");   //here you can handle errors
    });

    //alert(obj.details[3].comment_value);
} 
```

现在我想要的是在服务器和客户端之间进行通信，即在同一个系统上。我的代码不起作用。现在我该怎么办，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:52:20.830

首先，我不认为您的服务器侦听端口 8080，该端口通常用于管理软件。

其次，您必须将 url 放入 ajax 请求中

```
function operation(x) {
    //url:"C:\Users\jhamb\Desktop\assignment_1_18_1_13\question_3\ques\form1.html",

    $.ajax({
        url:"http://localhost:8080",
        data:{
            comment:x.comment.value,       // information from html page
            email: x.email.value,          // information from html page
            url:x.url.value,               // information from html page
            name:x.name.value,             // information from html page
        }
    }).done(function(serverResponse){
        alert("response is ready");    //here you can handle server response
    }).fail(function(err){
        alert("ohhh!!! there is some error");   //here you can handle errors
    });

//alert(obj.details[3].comment_value);
} 
```

您还应该在参数列表中添加`dataType`（html 或 json）、发送`type`（post、get 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:53:04.573

如果您稍微修改一下游览代码，也许会有所帮助：

```
function operation(x) {
    $.ajax({
        url: "http://localhost:8080",
        data: $(x).serialize(),
    }).done(function (serverResponse) {
        alert("response is ready");
    }).fail(function (err) {
        alert("ohhh!!! there is some error");
    });
} 
```

# php - Php SMTP 邮件发送仅在本地工作

> ID：14436966
> 
> 赞同：1
> 
> 时间：2013-01-21T10:47:33.017
> 
> 标签：php, email, smtp, send

从现在开始，我一直在尝试让邮件脚本在实时服务器上运行。它在我的本地主机上按预期工作。

我也使用完全相同的外部 SMTP 服务器、相同的 PHP 源和相同的数据库表。PHP版本和MySQL版本在线和localhost是一样的。

我测试了一切。在没有物理发送过程的情况下，一切都像假装一样工作。它不发送（或接收）电子邮件。我还去找系统管理员让他检查是否有任何电子邮件被阻止或内部服务器错误，但这里也一切正常。

我真的尝试了我能想到的一切，但我没有发现问题。有人知道我接下来可以尝试什么吗？

物理发送的功能如下所示：

```
private function sendPhysical($sReciepient) {
    if ($oSmtpIn = fsockopen(SMTPSERVER, SMTPPORT)) {
        fputs($oSmtpIn, "EHLO " . SMTPSERVER . "\r\n");
        $aCodes["hello"] = fgets($oSmtpIn, 1024);

        fputs($oSmtpIn, "auth login\r\n");
        $aCodes["res"] = fgets($oSmtpIn, 1024);

        fputs($oSmtpIn, $this->encodeUser() . "\r\n");
        $aCodes["user"] = fgets($oSmtpIn, 1024);

        fputs($oSmtpIn, $this->encodePassword() . "\r\n");
        $aCodes["pass"] = fgets($oSmtpIn, 256);

        fputs($oSmtpIn, "MAIL FROM: <" . $this->sFrom . ">\r\n");
        $aCodes["From"] = fgets($oSmtpIn, 1024);

        fputs($oSmtpIn, "RCPT TO: <" . $sReciepient . ">\r\n");
        $aCodes["To"] = fgets($oSmtpIn, 1024);

        fputs($oSmtpIn, "DATA\r\n");
        $aCodes["data"] = fgets($oSmtpIn, 1024);

        fputs($oSmtpIn, $this->generateHeader($sReciepient) . "\r\n\r\n" . $this->returnCompiledTemplate() . "\r\n.\r\n");
        $aCodes["send"] = fgets($oSmtpIn, 256);

        fputs($oSmtpIn, "QUIT\r\n");
        fclose($oSmtpIn);
    } else {
        $aCodes["connection"] = false;
    }
    return $aCodes;
} 
```

有人可能的解决方案吗？我很困惑，因为它可以在本地主机上运行，​​并且直到上周它已经在在线服务器上运行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:51:55.547

查看这段代码有什么问题也很棘手，但是如果您不想通过 php 发送邮件有太多麻烦，请尝试 PHPMailer。

# sockets - 灵活的插座应用

> ID：14436967
> 
> 赞同：1
> 
> 时间：2013-01-21T10:47:45.240
> 
> 标签：sockets, network-programming, network-protocols, winsock2

我正在编写一个在 LAN 上使用套接字玩的游戏。我使用 4 字节长度前缀来了解其余数据的数量，如下所示：

```
void trust_recv(int sock, int length, char *buffer)
{
    int recved = 0;
    int justRecv;

    while(recved < length) {
        justRecv = recv(sock, buffer + recved, length - recved, 0);
        if (justRecv < 0) return;

        recved += justRecv;
    }
}

void onDataArrival(int sock)
{
    int length;
    char *data;

    trust_recv(sock, 4, (char *) &length);
    data = new char[length];

    trust_recv(sock, length, data);
    do_somethings_with_data(data);
} 
```

问题是如果有人（例如入侵者或黑客）发送其他格式的数据（可能只有 2 个字节或其余长度低于 4 个字节前缀值）或网络问题，我的应用程序将转到“不响应" 状态并且必须关闭（因为我使用阻塞套接字）。如何使我的套接字应用程序更灵活但不要将套接字切换到非阻塞模式来解决这个问题？（或者任何组织数据或算法的想法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:07:18.187

您可以在套接字设置阶段使用`setsockopt()`调用和`SO_RCVTIMEO`参数设置接收超时；

```
struct timeval tv;

tv.tv_sec =8;
tv.tv_usec = 0 ;

if (setsockopt (your_sock_fd, SOL_SOCKET, SO_RCVTIMEO, (char *)&tv, sizeof tv) 
    perror(“setsockopt error”); 
```

`recv()`然后测试和他的回报`errno`

```
if (justRecv < 0)
{
    if (errno == EAGAIN)
        perror("TIMEOUT!");
    return;
} 
```

# delphi - 将 Delphi IntraWeb 与 Twitter Bootstrap 一起使用的基本准则是什么？

> ID：14436969
> 
> 赞同：3
> 
> 时间：2013-01-21T10:47:49.113
> 
> 标签：delphi, twitter-bootstrap, intraweb

我想将 Bootstrap 框架与 Delphi 的 IntraWeb 一起使用（我使用的是 XE2）？这个想法是让 Delphi 完成服务器端逻辑，同时使用 BootStrap 附带的漂亮控件？

此配置的基本组件“Hello World”应用程序是什么？

对于更复杂的应用程序，高级方法是什么，例如具有引导程序导航组件的应用程序，其选项卡内容由 Delphi 填充？

将 IntraWeb 和 Bootstrap 结合起来是不是有点矫枉过正？使用 Indy TIdHTTPServer + Bootstrap 会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T23:50:23.523

用 Intraweb 实现 Boostrap 并不难，你只需要在 IWForm 的 ContentFiles 属性中添加 Js 文件，你只需要记住你必须为每个用于 BootStrap 的组件编写 html。

在[http://www.codegearguru.com](http://www.codegearguru.com)中的电影 #63 - 使用 jQuery Mobile 和 IntraWeb - CodeRage 6 Replay

他们已经解释了如何使用 jQueryMobile、使用 TIWTemplateProcessorHTML 组件和标准 IW 组件来开发 Fishfact 演示，因此将其改编为引导程序应该不难。

这是链接：[http ://codegearguru.com/video/063/jQueryMobileFishFacts.html](http://codegearguru.com/video/063/jQueryMobileFishFacts.html)

虽然，自去年以来已经有一个新的组件套件实现了 JQuery 和 jQuery mobile，你应该在[http://www.cgdevtools.com](http://www.cgdevtools.com)上看看，我正在使用它们，让我告诉你它给你的 IW 应用程序一个非常景色不错。AFAIK 他们正计划为 Bootstrap 生成一个组件套件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:12:08.983

就 web-server 而言，它应该在客户端请求它们运行 bootstrap 客户端时提供必要的文件：[Bootstrap：文件结构](http://twitter.github.com/bootstrap/getting-started.html#file-structure)

要填充组件（客户端），您必须创建服务器端逻辑，以便它将正确的 javascript 输入到页面的 HTML 中。

# python - Django：如何使用 formset extra 更改标签？

> ID：14436970
> 
> 赞同：4
> 
> 时间：2013-01-21T10:47:52.677
> 
> 标签：python, django, django-forms, formset

我使用 formset 来生成额外的字段，但我不知道如何更改 formset 生成的额外字段的标签。

我的代码：

```
class GetMachine(forms.Form):
    Number_of_Lines = forms.IntegerField(max_value=4)

class GetLine(forms.Form):
    beamline_name = forms.CharField(max_length=15, label='Name of Beamline-%i')

def install(request):
    MachineFormSet = formset_factory(GetMachine, extra=1)
    formset = MachineFormSet()
    if request.method == 'POST':
#        formset = MachineFormSet(request.POST) 
#        if formset.is_valid(): # All validation rules pass
        line_no = request.POST['form-0-Number_of_Lines']
        GetLineFormSet = formset_factory(GetLine, extra=int(line_no))
        formset = GetLineFormSet()
        return render_to_response('install.html', { 'formset': formset, 'action': 'step1'})
    return render_to_response('install.html', { 'formset': formset, }) 
```

install.html 模板：

```
{% for form in formset.forms %}
{% for field in form %}
    <tr>
        <td>{{ field.label_tag }}</td>  <td>{{ field }}</td><td>{{ field.errors }}</td>
    </tr>
{% endfor %}
{% endfor %} 
```

例如，如果“Number_of_Lines”= 2，那么我期望下一个带有标签的表单，

```
Name of Beamline-1:
Name of Beamline-2: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T11:35:11.317

我假设您希望第一个表单的结果来确定第二个表单的字段数量及其标签，您可能需要查看[Django 表单向导](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)。但这是一种简单的非表单向导（可能不太理想/可维护）的方法，利用表单集的`__init__`方法来修改表单标签*：

* * *

表格.py：

```
# File: forms.py
from django import forms
from django.forms.formsets import BaseFormSet

# What you've called 'GetMachine'
class MachineForm(forms.Form):
    no_of_lines = forms.IntegerField(max_value=4)

# What you've called 'GetLine'
class LineForm(forms.Form):
    beamline_name = forms.CharField(max_length=15, label='Name of Beamline')

# Create a custom formset and override __init__
class BaseLineFormSet(BaseFormSet):
    def __init__(self, *args, **kwargs):
        super(BaseLineFormSet, self).__init__(*args, **kwargs)
        no_of_forms = len(self)
        for i in range(0, no_of_forms):
            self[i].fields['beamline_name'].label += "-%d" % (i + 1) 
```

视图.py：

```
# File: views.py
from django.forms.formsets import formset_factory
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.http import HttpResponseRedirect
from django.core.urlresolvers import reverse
from forms import MachineForm, LineForm, BaseLineFormSet

def get_no_of_lines(request):
    if request.method == 'POST':
        machine_form = MachineForm(request.POST)
        if machine_form.is_valid():
            # At this point, form fields have already been 
            # converted to Python data types :)
            # so no need to convert `line_no` to an integer
            no_of_lines = machine_form.cleaned_data['no_of_lines']
            return HttpResponseRedirect(reverse('line_form', kwargs={'no_of_lines': no_of_lines}))
    else:
        # It looks to me like you probably don't mean to
        # use formsets here (but a form instead)
        machine_form = MachineForm()

    c = RequestContext(request, {
        'machine_form': machine_form,
    })
    return render_to_response('get_no_of_lines.html', c)

def line_form(request, no_of_lines):
    # You probably should validate this number (again).
    # In fact, you probably need to validate first form (MachineForm).
    # ...But I'm assuming it'll be valid in this example.
    no_of_lines = int(no_of_lines)
    LineFormSet = formset_factory(LineForm, extra=no_of_lines, formset=BaseLineFormSet)
    if request.method == "POST":
        formset = LineFormSet(request.POST, request.FILES)
        if formset.is_valid():
            pass
            # Do stuff with form submission
            # Redirect

    else:
        formset = LineFormSet()

    c = RequestContext(request, {
        'formset': formset,
    })
    return render_to_response('line_form.html', c) 
```

网址.py：

```
from django.conf.urls import url, patterns
from views import get_no_of_lines, line_form

urlpatterns = patterns('',
     url(r'^$', get_no_of_lines, name='get_no_of_lines'),
     url(r'^line_form/(?P<no_of_lines>\d{1})$', line_form, name='line_form'),
) 
```

get_no_of_lines.html：

```
<form method="POST">
{% csrf_token %}
{{ machine_form }}
</form> 
```

line_form.html：

```
<form method="POST">
{% csrf_token %}
{{ formset.as_p }} 
```

* * *

The reason why I say this approach is probably not the best way to do this is because you have to validate `no_of_lines` being passed to `line_form` view (which could be > 4, so you'll have to perform validation here and introduce validation logic rather than having it one place — the form). And if you need to add a new field to the first form, you'll likely end up having to modify the code. So hence why I'd recommend looking into [form wizards](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/).

* * *

*   For more or dynamic forms, check out [Jacob Kaplan-Moss's post on dynamic form generation](http://jacobian.org/writing/dynamic-form-generation/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:14:37.870

我能想到，完成此行为的唯一方法是在将 FormSet 传递给您的模板之前在您的视图中调整它。

您可以遍历不同的表单和标签并相应地更改它们的值。

另一种可能的解决方案是将默认标签设置为“光束线名称-”。在你的模板中做类似的事情

```
{% for field in form %}
    <td>{{ field.label_tag }}{{ forloop.counter1 }}</td> 
{% endfor %} 
```

# login - 在同一页面上激活 Facebook 赞和 facebook 评论

> ID：14436971
> 
> 赞同：0
> 
> 时间：2013-01-21T10:47:54.397
> 
> 标签：login, facebook-like, facebook-javascript-sdk, facebook-comments, facebook-login

这是我的情况。

我在一个页面上有两个 facebook 喜欢和一个 facebook 评论。（使用 javascript sdk facebook）

我试图喜欢其中一个 facebook 喜欢它会打开 facebook 登录授权窗口，我在其中输入我的登录详细信息。类似仅适用于该特定按钮。当我单击同一页面中的另一个喜欢按钮时，它会打开一个弹出窗口并突然关闭它。但是没有为第二个按钮注册喜欢。为了使另一个喜欢按钮起作用，我需要刷新页面......同样的情况是使用 facebook 评论插件......

请给我建议一种方法，如果用户使用其中一个按钮启动登录，另一个 facebook 喜欢和评论将自动工作，而无需刷新页面......我得到了完全刷新 facebook 插件的线索使用 FB.XFBML.parse(); 但我不知道将上述功能附加到特定事件......

检查这个网址

[http://hillarsaare.com/projects/facebook/multi-like/](http://hillarsaare.com/projects/facebook/multi-like/)

您可以在同一页面上看到多个喜欢按钮...如果您已经通过 Facebook 登录并访问该页面，您将能够喜欢那里的所有帖子...但如果您没有登录并访问该页面页面，单击其中一个喜欢按钮将提示您通过 facebook 登录，登录后，您将无法喜欢页面中的任何其他帖子，除了您点击的帖子...当您刷新页面时，它会工作正常...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T10:25:13.120

我认为您可以对页面上的每个赞按钮使用此解决方法：

> 订阅 auth.statusChange ( [http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/) ) 并检查它是否成功登录。如果是这样，请将类似按钮代码重新渲染到您的 DOM 中，然后让 Javascript SDK 使用 FB.XFBL.parse() ( [http://developers.facebook.com/docs/reference/javascript/FB. XFBML.parse/](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/) )

类似于： [Facebook 点赞按钮状态更新](https://stackoverflow.com/questions/10079956/facebook-like-button-status-update)

# iis-7 - 应用程序使用匿名身份验证，即使它在 IIS 中被禁用

> ID：14436972
> 
> 赞同：0
> 
> 时间：2013-01-21T10:48:01.003
> 
> 标签：iis-7, windows-authentication

我有一个在 IIS7 中托管的诊断 Web 应用程序，它启用了 Windows 身份验证并禁用了匿名身份验证。此应用程序生成了某种报告，其中包含有关使用何种身份验证来查看站点的信息。每次浏览此站点时，我都会收到一条消息，表明我使用匿名身份验证进行了连接，这对我来说是难以置信的。该报告工作正常（在其他机器上测试），事实是我没有弹出凭据。这怎么可能，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:56:00.003

首先，我没有敲你的诊断应用程序，但可能值得查看 IIS 日志（或者确实为你的站点打开它们）以了解 IIS 认为正在发生的事情。如果您不熟悉 IIS 日志，我建议您以 Microsoft 格式编写它们（至少在您对这个问题进行排序时）。您获得的关键字段之一是用户 ID。如果您确实是匿名访问页面，则此 id 将是您配置用于处理匿名请求的 id。否则，它通常是调用用户的 id（至少在简单的场景中）。

其次，您正在运行多少个站点？您确定要通过预期的站点进入吗？或者，也许您正在访问默认站点？

第三，请记住，身份验证可以在站点级别设置，但也可以在页面级别设置。你确定一个没有覆盖另一个？

# image - Wordpress 所见即所得图像链接已损坏

> ID：14436979
> 
> 赞同：3
> 
> 时间：2013-01-21T10:48:26.907
> 
> 标签：image, wordpress, tinymce, wysiwyg

在自定义插件中，我调用了一个所见即所得的编辑器，如下所示：

```
<?php the_editor(get_option("reminder_text"), 'reminder_text'); ?> 
```

一切正常，直到我尝试插入图像（上传器或外部源，没有区别）。

示例：我输入图片路径，图片显示正确。当我保存表单并返回它时，图像显示为损坏，路径被转义引号包围，例如：

```
\"http://www.my-image-link-here.jpg\" 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:47:37.030

那是因为数据在插入数据库时​​会被清理，您需要清理`get_option`.

查看有关[**数据验证**](http://codex.wordpress.org/Data_Validation)的文档。

采用：

```
the_editor( esc_attr( get_option( "reminder_text" ) ), 'reminder_text' ); 
```

*[WordPress StackExchange 上的相关答案](https://wordpress.stackexchange.com/a/82405/12615)。*

# grails - 如何在我的 Java 项目中使用 groovy 域类？

> ID：14436985
> 
> 赞同：1
> 
> 时间：2013-01-21T10:49:05.337
> 
> 标签：grails, groovy

我在 grails 应用程序中有一些域类。我的中间件被称为服务

域类将在 grails-app 和服务之间共享。

如果我们使用注释——服务能够检测到它们吗？您如何与服务共享课程？你能在他们身上做一个罐子吗？

谁能帮帮我

谢谢湿婆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:55:41.823

您可以使用 hql 查询访问您的 grails 域类。请参阅[如何在 Java 中执行 HQL 查询以](https://stackoverflow.com/questions/8777388/how-to-execute-hql-query-in-java)供参考。

# .net - 从 dll 文件调用 MethodInfo

> ID：14436987
> 
> 赞同：0
> 
> 时间：2013-01-21T10:49:07.397
> 
> 标签：.net, vb.net, invoke, gettype, methodinfo

我正在编写一个必须可附加到任何项目的 dll 库，但有一件事我无法解决。

我需要从 dll 文件调用/运行 MethodInfo。它看起来像这样。SenderMethod，与 args 相同，计数是动态的。

```
Private Shared Sub BGthread(SenderMethod As MethodInfo, arg0 As Object, arg1 As Object, ...)
    Dim SenderType As Type = GetType(SenderMethod.ReflectedType.Name)
    SenderMethod.Invoke(SenderType, New Object() {ActLV, e, Arg0, Arg1, ...})
End Sub 
```

问题是 GetType 什么都不返回。我知道那里缺少组件名称，但是我找不到适用于调用者类不是静态的情况的解决方案。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:58:34.830

您需要[`SenderMethod.ReflectedType.AssemblyQualifiedName`](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)在调用中使用`GetType`.

# mdx - MDX中的VISUALTOTALS和UNION不一致

> ID：14436991
> 
> 赞同：2
> 
> 时间：2013-01-21T10:49:23.253
> 
> 标签：mdx, ssas-2008

我对 MDX 请求有疑问：

以下查询给了我很好的部分结果

```
WITH 
 SET  [Paiments Encaisse] AS    { [Type Paiement].[Type Paiement Id].&[13]
    ,[Type Paiement].[Type Paiement Id].&[20]
    ,[Type Paiement].[Type Paiement Id].&[31]
    ,[Type Paiement].[Type Paiement Id].&[62]} 
MEMBER [Measures].[CA Encaissé]
AS
    SUM(
     [Paiments Encaisse],[Measures].[Montant HT Partage Encaisse]
    )
MEMBER Measures.[CA Encaissé-E] AS [Measures].[CA Encaissé]
MEMBER MEASURES.[CA Encaissé-H] AS 
([Measures].[CA Encaissé],[Hors En CDP].[Hors ou En CDP].&[False] )

SELECT 
{Measures.[CA Encaissé-E],MEASURES.[CA Encaissé-H]} ON 0,
NON EMPTY{ 
{[Hors En CDP].[Hors ou En CDP].&[True]} * VISUALTOTALS([Employes].[Hie Societe].MEMBERS)*
[CDP Propriétaire].[Centre de Profits].[All]

} ON 1
FROM NON VISUAL
( SELECT {[Employes].[Societe].&[1234]} ON 0,{[CDP Propriétaire].[Societe].&[1234]} ON 1 FROM [Prévisions] )
WHERE (
[Type Fantome].[Val].&[False],
[Date Facturation du Paiement].[Year].&[2011-01-01T00:00:00],
[Date Paiement].[Year].&[2011-01-01T00:00:00],
[Date Facturation Opération].[Year].&[2011-01-01T00:00:00]) 
```

但是，旨在为我提供整个结果的以下查询在 UNION 的第一部分返回的行数少于第一个查询，这让我感到困惑

```
WITH 
 SET  [Paiments Encaisse] AS    { [Type Paiement].[Type Paiement Id].&[13]
    ,[Type Paiement].[Type Paiement Id].&[20]
    ,[Type Paiement].[Type Paiement Id].&[31]
    ,[Type Paiement].[Type Paiement Id].&[62]} 
MEMBER [Measures].[CA Encaissé]
AS
    SUM(
     [Paiments Encaisse],[Measures].[Montant HT Partage Encaisse]
    )
MEMBER Measures.[CA Encaissé-E] AS [Measures].[CA Encaissé]
MEMBER MEASURES.[CA Encaissé-H] AS 
([Measures].[CA Encaissé],[Hors En CDP].[Hors ou En CDP].&[False] )

SELECT 
{Measures.[CA Encaissé-E],MEASURES.[CA Encaissé-H]} ON 0,
NON EMPTY{ UNION
({[Hors En CDP].[Hors ou En CDP].&[True]} * VISUALTOTALS([Employes].[Hie Societe].MEMBERS)*
[CDP Propriétaire].[Centre de Profits].[All]
 , {[Hors en CDP].[Hors ou En CDP].&[False],[Hors en CDP].[Hors ou En CDP].[All]}
*  {[Employes].[Hie Societe].[All]} * 
       VISUALTOTALS  ([CDP Propriétaire].[Centre de Profits].ALLMEMBERS
  ),ALL
)} ON 1
FROM NON VISUAL
( SELECT {[Employes].[Societe].&[1234]} ON 0,{[CDP Propriétaire].[Societe].&[1234]} ON 1 FROM [Prévisions] )
WHERE (
[Type Fantome].[Val].&[False],
[Date Facturation du Paiement].[Year].&[2011-01-01T00:00:00],
[Date Paiement].[Year].&[2011-01-01T00:00:00],
[Date Facturation Opération].[Year].&[2011-01-01T00:00:00]) 
```

此外，在第二个查询中，Measures.[CA Encaissé-H] 列始终为 NULL，即使在应该有值的行上也是如此。

我不明白为什么工会第一部分的结果会受到第二部分发生的事情的影响。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:13:32.560

我不是 SSAS 的专家；但我可以分享我对[icCube](http://www.icCube.com)的经验；VisualTotal() 正在改变层次结构的实际聚合方式，如果您多次调用此函数到同一个请求中，这会变得非常奇怪，因为可能是不确定的（取决于评估顺序）并且难以理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:34:31.120

META：我为这个问题附加了一个很大的赏金，到目前为止，唯一的答案是对效果的描述，而不是 VISUALTOTALS 的内部工作。

# charts - 如何在煎茶触摸图表中设置新数据

> ID：14436996
> 
> 赞同：1
> 
> 时间：2013-01-21T10:49:36.800
> 
> 标签：charts, sencha-touch-2

嗨，我下载了 Sencha touch 2.1，并使用其中给出的图表示例代码来运行它，它运行良好。但根据我的要求，当用户从选择器中选择一年时，我必须刷新图表。但我无法更新图表。

第一次在图表中加载数据时，我使用了 Store，但下一次我尝试将代理参数设置为我的商店，然后将商店设置为图表，但我的图表没有刷新。我的文件在这里。[查看](http://dl.dropbox.com/u/73250761/Main.js) [商店](http://dl.dropbox.com/u/73250761/MyStore.js) [模型](http://dl.dropbox.com/u/73250761/User.js)

下面是我用来刷新图表的代码。

```
var myProxy = store.getProxy();                                                            
myProxy.setExtraParam( 'Year', '2010' );                                                                        
store.setProxy(myProxy);
var myChart = Ext.getCmp('myChart');                                           
myChart.setStore(store);                                                     
myChart.renderFrame(); 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:55:16.513

我能够解决它。现在图表正在使用以下代码更新

```
var data = []; 
data.push 
( 
    {"name": "Item-0", "comedy": 18.34}, 
    {"name": "Item-1", "comedy": 2.67}, 
); 
store.setData(data); 
```

希望它会帮助某人。

# java - java线程和jtabbedpane

> ID：14436997
> 
> 赞同：1
> 
> 时间：2013-01-21T10:49:40.440
> 
> 标签：java, multithreading, swing, jtabbedpane

我正在用java开发一个应用程序来“监控”火车中断。

事实上，我正在阅读 log.txt 文件并将它们显示到 JTabbedPane 中，其中包含对应于不同城市的不同窗格。

有一个带有 JPane 的主 GUI，我正在使用线程在其中插入 JTabbedPane，在此 JTabbedPane 中，我正在使用线程插入窗格。我这样做是因为我想每分钟更新一次窗格（带有日志文件信息）而不阻塞所有的 GUI。这是做监控应用程序的正确方法吗？

我的问题是，当我创建了所有我想要的标签时，我无法更新它们，当我尝试更新一个时，它总是最后一个更新。

这是我的代码：创建新的 JTabbedPane

```
Controller.Controller_ListeOnglets n = new Controller.Controller_ListeOnglets(View.View_Application.getJPanel());
    n.start(); 
```

这是我在 JTabbedPane 中添加选项卡的方式

```
public class Controller_ListeOnglets extends Thread {

    JPanel jo = new JPanel();

    public Controller_ListeOnglets(JPanel j) {
        jo = j;
    }

    @Override
    public void run() {
        View.View_ListeOnglets t = new View.View_ListeOnglets();
        jo.add(t);
        ArrayList<String> list = new ArrayList<>();
        list = Controller_Modification.ChercherSystemes();
        for (String i : list) {
            try {
                Controller_Onglet nouveau = new Controller_Onglet(View.View_ListeOnglets.getJTabbedPane(), Controller.Controller_BDD.GetSystemeID(i));
                nouveau.start();
                this.sleep(100);
            } catch (InterruptedException | SQLException | ClassNotFoundException ex) {
                Logger.getLogger(Controller_ListeOnglets.class.getName()).log(Level.SEVERE, null, ex);
            }

        }

    }
}

  public class Controller_Onglet extends Thread {

        Model.Model_Systeme systemeB;
        static JTabbedPane jo = new JTabbedPane();

        public Controller_Onglet(JTabbedPane j, Model.Model_Systeme systemeA) {
            jo = j;
            systemeB = systemeA;
        }

        @Override
        public void run() {

            View.View_Onglet onglet = new View.View_Onglet(systemeB);
            if (jo.getTabCount() == 0) {
                jo.add(onglet);
                jo.setTitleAt(jo.getTabCount() - 1, systemeB.getSysteme_Nom());
                jo.setBackgroundAt(0, Color.CYAN);

            } else {
                jo.add(onglet, jo.getTabCount());
                jo.setTitleAt(jo.getTabCount() - 1, systemeB.getSysteme_Nom());
                jo.setBackgroundAt(jo.getTabCount() - 1, Color.CYAN);

            }
            /* Timer t = new Timer(5000, new ActionListener() {

             @Override
             public void actionPerformed(ActionEvent e) {*/
            if (EventQueue.isDispatchThread()) {
                Controller_TraitementFichier traitement = new Controller_TraitementFichier(jo, systemeB.getSysteme_Nom());
                traitement.start();
            } else {
                Controller_TraitementFichier traitement = new Controller_TraitementFichier(jo, systemeB.getSysteme_Nom());
                traitement.start();
            }
            /*}
             });
             t.start();*/

        }
        //A ComplÃ©ter

        public static void removeOnglet(Model.Model_Systeme systeme) {
            for (int i = 0; i < jo.getTabCount(); i++) {
                if (jo.getTitleAt(i).equals(systeme.getSysteme_Nom())) {
                    jo.remove(i);
                }
            }

        } 
```

这是我如何尝试更新选项卡的示例

```
public class Controller_TraitementFichier extends Thread {

    String title = null;
    JTabbedPane jo = null;

    public Controller_TraitementFichier(JTabbedPane j, String titleOnglet) {
        title = titleOnglet;
        jo = j;
    }

    @Override
    public void run() {

        InputStream flux = null;
        try {
            flux = new FileInputStream("./src/Ressources/Archivage_LISATEL/12203005.TXT");
            InputStreamReader lecture = new InputStreamReader(flux);
            BufferedReader buff = new BufferedReader(lecture);
            String ligne = buff.readLine();
            try {
                while (ligne != null) {
                    View_Onglet onglet = View_ListeOnglets.getJTabbedPane(title);
                    if (title.equals(title)) {
                        View.View_ListeOnglets.getJTabbedPane().setSelectedIndex(0);
                        onglet.changeTexteArea1(ligne + "\n");
                        jo.setBackgroundAt(View.View_ListeOnglets.getJTabbedPane().getTabPlacement(), Color.red);
                    }

                    ligne = buff.readLine();
                }
                System.out.println("Traitement " + title);
                buff.close();
                lecture.close();
                flux.close();

            } catch (IOException ex) {
                Logger.getLogger(Controller_TraitementFichier.class.getName()).log(Level.SEVERE, null, ex);
            }

            //System.out.println(View.View_ListeOnglets.getJTabbedPane().getTitleAt(View_ListeOnglets.getJTabbedPane().getSelectedIndex()));
        } catch (IOException ex) {
            Logger.getLogger(Controller_TraitementFichier.class.getName()).log(Level.SEVERE, null, ex);

        } finally {
            try {
                flux.close();
            } catch (IOException ex) {
                Logger.getLogger(Controller_TraitementFichier.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

这不是很清楚，所以如果你想帮助我更多，我会把我的代码发给你。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:26:39.790

使用`SwingWorker`，在[这里](https://stackoverflow.com/a/4637725/230513)看到，在后台查询数据和更新[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上的 GUI 。每个选项卡的内容都可以有自己的[工作线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:57:21.143

所有 Swing 更改必须在 AWT 事件线程中执行。为了使您的代码正确，您应该在单独的 Runnable 对象中实现所有 Swing 更新，并使用 SwingUtilities.invokeLater(Runnable) 调用这些更新；

像这样的东西：

```
public class DataCollector implements Runnable {
  public void run() {
   // collect data
   SwingUtilities.invokeLater(new Runnable() {
     public void run() {
       // do swing update
     }
   });
  }
} 
```

其他可能性是使用 SwingWorker 类。