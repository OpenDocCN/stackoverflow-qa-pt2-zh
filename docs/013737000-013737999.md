# StackOverflow 问答 13737000-13737999

# drupal - 如何在 Drupal 6 上以内容形式激活分类字段？

> ID：13737002
> 
> 赞同：0
> 
> 时间：2012-12-06T04:31:07.390
> 
> 标签：drupal, content-management-system, drupal-6, drupal-taxonomy

*在我的内容类型 - > 管理字段中，我可以看到“分类法 - 分类模块表单”字段* *在管理表单中 - > 我也有“分类法”并且它已激活*

但是当我想为这个给定的内容类型编辑或创建内容时，他们没有选择分类的选项，我错过了什么？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:53:08.650

您的词汇表中可能没有任何术语，因此没有任何选择。如果确实有术语，只需检查您的分类词汇表。

您也可能选择了自动标记小部件而不是选择小部件。

无论哪种情况，请查看您的内容类型以及分类词汇。如果知道 drupal 版本，帮助会更容易。

# sql-server - 在 vb.net Winforms 中处理异常的方法

> ID：13737006
> 
> 赞同：1
> 
> 时间：2012-12-06T04:32:08.620
> 
> 标签：sql-server, vb.net, winforms, exception-handling, try-catch

我不确定这是否是发帖的地方，但这里有。

我有一个应用程序（使用 VS 2012 的 Windows 窗体），它通过一系列表单获取客户信息并将信息存储在 SQL Server 中。该应用程序将部署在本地网络上的计算机上（一些远程但仍位于同一域中）。我在用户输入的每一步都有验证。我不确定这样想是否天真，但我觉得在彻底测试后唯一需要担心的例外是与 SQL Server 的连接（但我很想听听其他事情可能出错的地方）。我看到它的方式，我的应用程序在连接到 MSSQL 时可能会引发异常（我已经涵盖了所有 sql 唯一键错误，不会有任何人对列进行处理，将拥有必要的权限，并要求/限制用户输入什么我的专栏需要/允许），但我没有 不知道我将如何处理它 - 除了将代码放入 try/catch 以便用户再次尝试 - 因为如果连接失败，则跳到下一行代码是没有意义的（或者这也是不合理的） . 所以我的问题是，在这种情况下进行异常处理的最佳（可能不止一种）方法是什么？如果我必须在 try/catch 中包装我的所有连接，是否有更好的方法来记录这些，因为应用程序将在本地部署（我担心将它们保存到网络服务器，以防服务器关闭暂时地）。提前致谢！！在这种情况下，进行异常处理的最佳（可能超过 1 种）方法是什么？如果我必须在 try/catch 中包装我的所有连接，是否有更好的方法来记录这些，因为应用程序将在本地部署（我担心将它们保存到网络服务器，以防服务器关闭暂时地）。提前致谢！！在这种情况下，进行异常处理的最佳（可能超过 1 种）方法是什么？如果我必须在 try/catch 中包装我的所有连接，是否有更好的方法来记录这些，因为应用程序将在本地部署（我担心将它们保存到网络服务器，以防服务器关闭暂时地）。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:30:42.940

这已经有一段时间没有得到答复了，所以我将更新我所做的事情。

由于我预计的主要错误是失去与 SQL Server 的连接，因此我在我的应用程序中嵌入了一个 XML 文档，并在将信息发送到 SQL Server 后将所有内容存储在其中。当客户完成输入所有信息时，如果服务器仍然在线，则清除 XML 数据。如果没有，XML 数据将保留并在下次运行时再次检查。当连接恢复时，XML 数据被上传到 SQL 服务器并被清除。这样，连接丢失不应该是明显的。

我意识到这并不能真正回答这个问题，但这是我目前能想到的最好的（直到我了解更多:)）。

# html - chmod 权限被拒绝 - 文件权限 600

> ID：13737007
> 
> 赞同：2
> 
> 时间：2012-12-06T04:32:22.380
> 
> 标签：html, apache, web, chmod

我的服务器上有一个文件以某种方式生成，权限级别为 600，我无法更改权限或下载文件。当我尝试更改权限以及尝试下载时，我的权限被拒绝。

我可以以某种方式强制更改权限吗？我需要帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:34:33.080

权限 600 表示文件的所有者有权对其进行读写。如果您无法阅读该文件，则您不是该文件的所有者。你需要：

```
sudo chown your_username filename 
```

不过，请确保该文件实际上应该归您所有。如果你这样做，你可能会阻碍实际生成它的东西读取和写入它的能力。如果文件不敏感，您可以通过以下方式使其世界可读：

```
chmod a+r filename 
```

（如果你没有 chown 它添加 sudo。）

这将导致权限为：644，允许任何人读取文件。

# android - 创建文本消息线程列表 Android

> ID：13737010
> 
> 赞同：1
> 
> 时间：2012-12-06T04:32:38.933
> 
> 标签：android

我正在为 Android 创建一个基本的短信 UI。我正在使用`ArrayList<String>`适配器来存储我发送消息的不同号码。此列表视图中的每个项目都会打开一个新视图，其中包含所有发送到该号码的消息。

问题是我只能弄清楚如何使用消息的静态变量来做到这一点。因此，每次我发送一条消息时，它都会在每次对话中更新它。无论如何我可以让它为每个不同的号码单独更新消息吗？

# php - 提交表单后将数据保留在html表单中

> ID：13737013
> 
> 赞同：1
> 
> 时间：2012-12-06T04:33:08.013
> 
> 标签：php, html, forms

我试图在提交后将输入保留在 html 表单字段中。所以，我用过

```
<input type="text" name="myField" value="<?php echo isset($_POST['myField']) ? $_POST['myField'] : 'column_name' ?>" /> 
```

如果输入类型为`text`. 它不适用于`<textarea>`& `<select>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:35:03.480

[`<textarea>`s 没有`value`属性。](http://www.w3.org/TR/html5/the-textarea-element.html#the-textarea-element)他们有一个身体：

```
<textarea name="myField2"><?php echo isset($_POST['myField2']) ? $_POST['myField2'] : 'column_name' ?></textarea> 
```

同样，[`<select>`s 没有`value`属性](http://www.w3.org/TR/html5/the-select-element.html#the-select-element)。a 的值`<select>`由包含`<option>`的具有[属性](http://www.w3.org/TR/html5/the-option-element.html#attr-option-selected)[的`selected`](http://www.w3.org/TR/html5/the-option-element.html#attr-option-selected)s 确定。这个留给读者作为练习。提示：您需要遍历`<select>`s`<option>`并有条件地将`selected`属性添加到一个或多个`<option>`s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:35:58.503

对于文本区域：

```
<textarea><?php echo isset($_POST['myField']) ? $_POST['myField'] : 'column_name' ?></textarea> 
```

对于选择：

```
<select>
   <option value='xx' <?php echo isset($_POST['myField'])&&$_POST['myField']=='xx'?'selected="selected"':''?>>XX</option>
   <option value='yy' <?php echo isset($_POST['myField'])&&$_POST['myField']=='yy'?'selected="selected"':''?>>YY</option>
</select> 
```

如果您使用的是 jQuery，我更喜欢使用 javascript 填充选择：

```
<select name='myField'>
    <option value='xx'>XX</option>
    <option value='yy'>YY</option>
</select>
<?php if(isset($_POST['myField'])):?>
<script type='text/javascript'>
    $("select[name=myField] option[value='<?php echo $_POST['myField']';?>']").attr("selected","selected");
</script>
<?php endif; ?> 
```

# css - 是否有可能在其容器的背景*后面呈现内容？

> ID：13737014
> 
> 赞同：2
> 
> 时间：2012-12-06T04:33:28.497
> 
> 标签：css, z-index, css-position

再多的 z-index 诡计等，都不会允许此处的“foo”一词出现在背景图像的后面，对`div`吗？

```
<div>
  <span>foo</span>
</div> 
```

或者，考虑一下：

```
<div class="a"></div>
<div class="b">
  <span class="x">X</span>
  <span class="y">Y</span>
</div> 
```

是否可以*在前面*`.x`渲染时在*后面* 渲染？`.a``.y` *`.a`*

 *我不知道这样做的任何技术。

注意：如果这仅在 Webkit 中有效，那就没问题了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:45:30.283

从[规格](http://www.w3.org/TR/CSS2/visuren.html#z-index)：

> 在每个堆叠上下文中，以下图层按从后到前的顺序绘制：
> 
> 1.  构成堆叠上下文的元素的背景和边框。
> 2.  具有负堆栈级别（最负优先）的子堆栈上下文。
> 3.  流入的、非内联级别的、非定位的后代。
> 4.  未定位的浮动。
> 5.  流入的、内联级的、非定位的后代，包括内联表和内联块。
> 6.  堆栈级别 0 的子堆栈上下文和堆栈级别 0 的定位后代。
> 7.  具有正堆栈级别的子堆栈上下文（最不积极的优先）。

请注意，无论它们的`z-index`. 你不能让孩子们在背景之前画画，所以你真的没有办法用 CSS 来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:56:09.793

我似乎解决了您提出的问题，请查看此 jsfiddle：http: [//jsfiddle.net/cAZQP/1/](http://jsfiddle.net/cAZQP/1/)。我把你有问题的元素做成彩色方块，以便更容易看到，并将它们稍微隔开以查看创建的图层。

这些样式似乎有效：

```
<style>

.a, .x, .y {
    position: absolute;
}
.x {
    z-index: -1;
}

</style> 
```*

# perl - 如何确定要显示哪些页码链接

> ID：13737016
> 
> 赞同：-3
> 
> 时间：2012-12-06T04:33:37.170
> 
> 标签：perl, pagination

我试图弄清楚如何确定在列表底部显示哪些页面链接。假设我有 90 页的结果。如果可能的话，我希望始终有一个指向第 1 页和第 90 页的链接，然后是当前页面的左右 3-4 页。

[] - 表示当前页面

第 1 页： [1] 2 3 4 5 6 7 8 9 ... 90

第 2 页：1 [2] 3 4 5 6 7 8 9 ... 90

第 20 页：1 ... 17 18 19 [20] 21 22 23 ... 90

我很难弄清楚逻辑。因此，输入：total_number of pages 和 current page，生成要显示的页面列表。我正在使用 perl，但另一种语言的示例也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:49:14.597

像这样的东西应该适合你。

```
use strict;
use warnings;

use feature 'say';

use constant MARGIN => 3;

say join ', ', page_numbers(2, 90);
say join ', ', page_numbers(30, 90);
say join ', ', page_numbers(88, 90);

sub page_numbers {

  my ($this, $total) = @_;

  my $min = $this <= MARGIN + 1 ? 2 : $this - MARGIN;
  my $max = $this >= $total - (MARGIN + 1) ? $total - 1 : $this + MARGIN;

  return 1, $min..$max, $total;
} 
```

**输出**

```
1, 2, 3, 4, 5, 90
1, 27, 28, 29, 30, 31, 32, 33, 90
1, 85, 86, 87, 88, 89, 90 
```

# asp.net-web-api - Web 应用程序中 web.config 中的加密连接字符串

> ID：13737024
> 
> 赞同：0
> 
> 时间：2012-12-06T04:34:41.337
> 
> 标签：asp.net-web-api, connection-string

在我的网络应用程序中，我输入了加密密码，例如：

```
<add name="ConnectionString1" connectionString="Data Source=abc;Initial Catalog=dms;Persist Security Info=True;User ID=sa;Password=****************" /> 
```

在运行时，我解密并使用它。它在所有页面中都可以正常工作，但在 1 页中显示错误，例如用户“sa”的登录失败。任何地方都没有错误。我调试了很多次，但它仍然继续。相反，我使用实际的连接字符串它工作正常。我应该怎么办？

# database - 如何在magento的sales_flat_quote_item_option表中插入数据？

> ID：13737027
> 
> 赞同：0
> 
> 时间：2012-12-06T04:34:43.540
> 
> 标签：database, magento, e-commerce, magento-1.4, magento-1.7

我正在研究 magento 1.7 。我需要在 sales_flat_quote_item_option 表中插入数据。我尝试使用以下代码：-

```
$customerId= Mage::helper('customer')->getCustomer()->getId();
$product_id = $_REQUEST['id1'];
$model = Mage::getModel('catalog/product');
$_product = $model->load($product_id); 
$quoteObj=Mage::getModel('sales/quote')->assignCustomer($customerId);
$option = array('options'=>array(
    "option_id1" => 'option_value1',
"option_id2" => 'option_value2'
));
$request = new Varien_Object();
$request->setData($option);
$quoteObj->addProduct($productObj,$request); 
```

但无法在此表中插入数据。实际上此表包含自定义选项值。II 没有自定义选项，因此只需在此表中插入来自另一个表单的另一个值。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:16:07.157

我不是 100% 确定你想要做什么，但我认为如果

1.  使用观察者

2.  将您的选项添加到“additional_options”而不是“options”

请参阅[Magento - 基于用户输入的报价/订购产品项目属性](https://stackoverflow.com/questions/9412074/magento-quote-order-product-item-attribute-based-on-user-input/9496266#9496266)

# iphone - 开始/结束外观转换的不平衡呼叫 ,

> ID：13737028
> 
> 赞同：0
> 
> 时间：2012-12-06T04:34:48.743
> 
> 标签：iphone, objective-c, ios

我正在尝试将 Tabs 实现到我的 secondView.On 按钮触摸（来自 ViewController.m）中，我正在导航到 secondView（Tabs）。在我的`Tabs.xib`文件中，我在底部添加了一个 TabBar，它是`UITabBar`.

**视图控制器.m**

```
- (IBAction)touchedInside:(id)sender {
    NSLog(@"touhced up inside");

    Tabs *temp = [[Tabs alloc]initWithNibName:@"Tabs" bundle:nil];
    [self.navigationController pushViewController:temp animated:YES];
    [self presentViewController:temp animated:YES completion:nil];

} 
```

**制表符.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

     AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    UITabBarController *tabBarController = [[UITabBarController alloc]init];
   /* 
    Tab_1 *firstView = [[Tab_1 alloc] init];
    UITabBarItem *item1 = [[UITabBarItem alloc]initWithTitle:@"First" image:nil tag:1];
    [firstView setTabBarItem:item1];
    NSLog(@"after first tab is added");
    Tab_2 *secondView = [[Tab_2 alloc] init];
    UITabBarItem *item2 = [[UITabBarItem alloc]initWithTitle:@"Sec" image:nil tag:1] ;
    [secondView setTabBarItem:item2];
     NSLog(@"after second tab is added");
    [tabBarController setViewControllers:[NSArray arrayWithObjects:firstView,secondView,nil] animated:NO];
     NSLog(@"after tab is added");
    [appDelegate.window  addSubview:tabBarController.view];
    NSLog(@"after view is added");
   */
    appDelegate.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[Tab_1 alloc] initWithNibName:@"Tab 1" bundle:nil];
    UIViewController *viewController2 = [[Tab_2 alloc] initWithNibName:@"Tab 2" bundle:nil];
    UIViewController *viewController3 = [[Tab_2 alloc] initWithNibName:@"Tab 1" bundle:nil];

    tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, viewController3, nil];
    appDelegate.window.rootViewController = self.tabBarController;
    [appDelegate.window makeKeyAndVisible];
    Tabs *temp = [[Tabs alloc]initWithNibName:@"Tabs" bundle:nil];
    [self.navigationController presentModalViewController:temp animated:NO];

} 
```

**错误**

```
Unbalanced calls to begin/end appearance transitions for <ViewController: 0x6833c80>.
2012-12-06 09:57:48.963 demoTabs[667:f803] Unbalanced calls to begin/end appearance transitions for <Tabs: 0x6a3fc90>. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:02:17.017

> ```
> Tab_1 *viewController1 = [[Tab_1 alloc] initWithNibName:@"Tab 1" bundle:nil];
> Tab_2 *viewController2 = [[Tab_2 alloc] initWithNibName:@"Tab 2" bundle:nil];
> Tab_2 *viewController3 = [[Tab_2 alloc] initWithNibName:@"Tab 1" bundle:nil]; 
> ```

按照上面定义的方式定义视图控制器的实例，还要确保为每个视图控制器提供 coorect nib 文件名。

# php - 如何使用统计或关系查询在 Yii 中找到最小和最大速率

> ID：13737034
> 
> 赞同：2
> 
> 时间：2012-12-06T04:35:30.680
> 
> 标签：php, mysql, yii, phpmyadmin

对于登录用户使用统计/关系查询发布的每个请求，我需要显示最大速率和最小提案速率以及提案计数。我正在使用关系获得计数或最低比率

```
public function relations()
 {
  return array('serviceproposals'=>
                       array(self::HAS_MANY,'Serviceproposal','ServiceRequestID'),
                  'user' => array(self::BELONGS_TO, 'Buyer', 'user_id'),
                  'postCount'=>array(self::STAT,'serviceproposal', 'ServiceRequestID','select'=>'MAX(proposal_rate)'),

  );
 } 
```

使用的数据库包含：-

```
User[user_id,name,password],
Provider[user_id,providercompany,providerdetails],
Buyer[user_id,contactinfo],
ServiceRequest[ServiceRequestID,Buyer.user_id,details,date],
ServiceProposal[ServiceProposalId,ServiceRequestID,Provider.user_id,services,propsal_rate] 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:17:35.167

由于我的错误，我没有得到计数，最大和最小速率。需要提供 2 个单独的关系，以便 3 个值越来越好。

```
return array(

   'serviceproposals' => array(self::HAS_MANY, 'Serviceproposal', 'ServiceRequestID'),
   'user' => array(self::BELONGS_TO, 'Buyer', 'user_id'),
                        'postCount'=>array(self::STAT, 'serviceproposal', 'ServiceRequestID'),
                        'maxvalue'=>array(self::STAT, 'serviceproposal', 'ServiceRequestID','select'=>'MAX(proposal_amount)'),
                        'minvalue'=>array(self::STAT, 'serviceproposal', 'ServiceRequestID','select'=>'MIN(proposal_amount)'),

  );
 } 
```

# sql - ActiveRecord 的新手。SQL知识重要吗？

> ID：13737041
> 
> 赞同：1
> 
> 时间：2012-12-06T04:36:00.537
> 
> 标签：sql, ruby-on-rails, activerecord

我在 SQL 数据库方面没有经验。我刚开始使用 ActiveRecord，我发现自己在粘贴 ActiveRecord 查询语句，因为我不知道何时使用 .find()、.where()、连接等之间的区别。有很多方法可以做一个查询，我很困惑. 我只是想知道退后一步并先学习 SQL 还是尝试跟随是个好主意？另外，学习 SQL 的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:44:33.363

是的！您绝对应该了解 SQL 才能有效地使用 ActiveRecord。

AR 通过将您从编写原始 SQL 的乏味中抽象出来，从而提高了生产力，但是了解它在做什么将提高您对它的使用，以及您编写有效代码的能力。

您可以从在工作时查看日志开始`tail -f log/development.log`，它会向您显示 AR 生成的语句。这将帮助您获得一个参考框架，以帮助您了解 AR 对给定呼叫所做的工作。

AR 不会取代 SQL - 它通过让您在更高级别使用它来增强它。了解幕后发生的事情只会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:43:10.343

如果您了解 SQL 基础知识，那么使用 ActiveRecord 很容易。

*   要学习 SQL 基础知识，您可以使用[此链接](http://www.w3schools.com/sql/default.asp)。
*   要学习 ActiveRecord，请使用[此链接](http://marklunds.com/s5/rails101/html/active_record_basics.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:53:28.210

我肯定会建议先学习 SQL，从长远来看，它会帮助你很多。Active Record 实际上只是数据库的[对象-关系映射](http://en.wikipedia.org/wiki/Object-relational_mapping)，它有助于使 SQL 的编写更简洁、更清晰、更容易。话虽如此，我不认为它可以替代了解 SQL，更不用说学习基础知识很容易。我建议同时查看有关 SQL 的文档和活动记录。

SQL：[http ://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)

活动记录： http: [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)和[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

# vb.net - 更新VB.NET中类外变量的值

> ID：13737044
> 
> 赞同：0
> 
> 时间：2012-12-06T04:36:18.567
> 
> 标签：vb.net, scope, pass-by-reference

我有一个从表单派生的类，它有用于用户名和密码的文本框以及一个确定按钮。我希望它表现得像一个 InputBox，所以我可以像这样使用它：

```
Dim Username As String = ""
Dim Password As String = ""
Dim authorization As New Authorization(Username, Password)
authorization.ShowDialog()
    'The user will click OK and I will expect the Username and Password to change based on the user input
MsgBox(Username & " " & Password) 
```

授权类：

```
Public Class Authorization
    Dim RefUsername As String
    Dim RefPassword As String

    Public Sub New(ByRef Username As String, ByRef Password As String)
        InitializeComponent()

        RefUsername = Username 'I'm trying to pass reference instead of value
        RefPassword = Password 'I'm trying to pass reference instead of value
    End Sub

    Private Sub OKButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AuthorizeButton.Click
        RefUsername = Username.Text 'I'm trying to change value of variable outside the class
        RefPassword = Password.Text 'I'm trying to change value of variable outside the class
        Me.Close()

    End Sub
End Class 
```

简而言之，当用户单击“确定”时，我想更改类外变量的值，我将如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:47:32.413

```
Public Class Authorization
Dim RefUsername As String
Dim RefPassword As String

Public Sub New(ByRef Username As String, ByRef Password As String)
    InitializeComponent()

    RefUsername = Username 'I'm trying to pass reference instead of value
    RefPassword = Password 'I'm trying to pass reference instead of value
End Sub

Private Shared Function PromptUser() As ReturnClass
   Dim currentReturnClass as ReturnClass

   // Dialog Goes Here
   currentReturnClass.UserName = Username.Text
   currentReturnClass.Password = Password.Text
   Me.Close()
End Sub

End Class

private class ReturnClass
   Dim userName as String
   Dim password as String
   Dim userAcceptedDialog as Boolean
   ' Setters and Getters

End Class 
```

您的调用代码：

```
Dim Username As String = "Default User"
Dim Password As String = "Default Password"
Dim authorization As New Authorization(Username, Password)
Dim myReturnClass as ReturnClass
myReturnClass = authorization.PromptUser()
MsgBox(myReturnClass.Username & " " & myReturnClass.Password) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:53:47.663

您可以像任何其他类一样向该类添加属性以从外部对其进行修改：

```
Public Class Authorization

    Friend Property RefUsername As String
    Friend Property RefPassword As String

    'this constructor isn't really necessary with this new approach,
    'but I'll leave it as-is.
    Public Sub New(ByRef Username As String, ByRef Password As String)
        InitializeComponent()

        RefUsername = Username ' 
        RefPassword = Password
    End Sub

    Private Sub OKButton_Click(ByVal sender As System.Object, _
                               ByVal e As System.EventArgs) _
                               Handles AuthorizeButton.Click

        Me.DialogResult = DialogResult.OK

    End Sub
End Class 
```

然后从外部获取用户名和密码：

```
Dim Username As String = ""
Dim Password As String = ""

Dim authorization As New Authorization(Username, Password)
'this constructor isn't really necessary with this new approach,
'but I'll leave it as-is.

If authorization.ShowDialog() = DialogResult.OK Then
    MsgBox(authorization.RefUsername & " " & authorization.RefPassword)
End If 
```

# objective-c - Objective-C 中静态变量的内存管理

> ID：13737048
> 
> 赞同：1
> 
> 时间：2012-12-06T04:36:31.643
> 
> 标签：objective-c, memory-management, static, automatic-ref-counting

我想`NSString`在 Objective-C 类中添加一个静态变量，但是我对管理它的内存持谨慎态度。

```
NSString *myImportantString = 0;

@implementation MySingletonClass

/* Option 1 */
+ (void)initialize {
    myImportantString = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"criticalFolder"];
}

/* Option 2 */
+ (void)initialize {
    NSString *tmp = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"criticalFolder"];
    myImportantString = [[NSString alloc] initWithString:tmp];
} 
```

在选项 1 中，`myImportantString`是一个自动释放的对象，那么我如何知道它将在何处/何时释放？这种不确定性促使我转而使用选项 2。但是，当我使用 ARC 时，它将如何/何时（如果有的话？）发布？根据`+initialize`方法，在方法`myImportantString`中没有再次使用，因此ARC不会`release`在方法末尾插入适当的代码`+initialize`吗？

我（相对）相信它将为我正确处理，但我仍然想知道它是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T04:48:52.480

选项 1 很好，因为全局变量`myImportantString`默认为`strong`. 该字符串将永远不会被释放（这对于全局来说很好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:48:41.903

如果您不指定所有权限定符，LLVM 编译器会将其视为 __strong。这意味着您不必担心自动发布。此外，考虑到静态变量的生命周期与应用程序的生命周期一样长，您也不必担心它何时发布（可能永远不会，但我不能指出有关此的文档）。所以，这两种选择都很好。

# java - Java MVC 项目 - 要么我无法更新绘图，要么我看不到它

> ID：13737051
> 
> 赞同：4
> 
> 时间：2012-12-06T04:36:56.757
> 
> 标签：java, swing, model-view-controller, drawing, java-7

我有一个基于模型-视图-控制器范式的项目，但在让它正常工作方面遇到了很多麻烦。

该程序有 4 个面板，它们应该允许我以各种方式修改在屏幕上绘制的椭圆。这些似乎工作正常，经过相当多的麻烦后，我能够让它们显示在包含整个 shebang 的 JFrame 中。我已经设法通过脱离提供的说明来显示它们，但是当我这样做时，我似乎无法更新椭圆形。但是，如果我按照信中的说明进行操作，我只会看到一个空框。

该项目有非常具体的方向，我跟进了一点，但有些文档不清楚。我认为我缺少的东西一定很简单，因为没有什么是没有意义的。我不得不承认，虽然我的 Java 经验是有限的，而我在 GUI 设计/范式方面的经验更是如此。

无论如何，我一直在搜索网络和这个网站，试图找出问题所在，但这是一个有点具体的例子，老实说，我对此知之甚少，无法概括我在网上找到的任何答案和找出缺少的东西。我已经研究这段代码太久了，所以我真的希望有人能帮助我。

```
public class Model {
    private Controller controller;
    private View view;
    private MvcFrame mvcFrame;

    private int radius = 44;
    private Color color = Color.BLUE;
    private boolean solid = true;

    //bunch of mutators and accessors for the above variables

    public Model() {
        controller = new Controller(this);
        view = new View(this);
        mvcFrame = new MvcFrame(this);
    }
} 
```

这是模型类。这似乎相当简单。我认为我对这里发生的事情的理解是可靠的，并且似乎没有任何问题。主要用于上下文。

```
public class Controller extends JPanel{
    private Model model;

    public Controller(Model model) {
        this.model = model;
        setBorder(BorderFactory.createLineBorder(Color.GREEN));
        setLayout(new GridLayout(4,1));
        add(new RadiusPanel(model));
        add(new ColorPanel(model));
        add(new SolidPanel(model));
        add(new TitlePanel(model));
    }
} 
```

这是控制器类。据我所知，setBorder、setLayout 和一系列添加在这里什么都不做。我让他们注释掉了，但这是说明告诉我做事的方式，所以要么那里有错误，要么我的设置有问题。但是，当我这样做时，我会得到一个空窗口（JFrame），但没有任何面板会出现在其中。我为解决这个问题所做的是将这些添加函数放在 mvcFrame 类中：

```
public class MvcFrame extends JFrame {
    private Model model;

    public MvcFrame(Model model){
        this.model = model;
        //setLayout(new GridLayout(4,1));
        //add(new RadiusPanel(model));
        //add(new ColorPanel(model));
        //add(new SolidPanel(model));
        //add(new TitlePanel(model));

        //add(new View(model));

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setSize(800,600);
        setVisible(true);
    }
} 
```

所以这就是事情开始变得奇怪的地方。注释掉的第一块代码与 Controller 类中的代码相同。我把它注释掉的原因是因为这只是一个幸运的猜测——根据说明，它不应该是那样的。然而，这确实可以让面板显示出来——但那时我还在扯头发，试图让椭圆形显示出来。

另一条注释行（ add(new View(model)); ）是使事情正常进行的不同尝试。在这种情况下，我将这些添加函数放在 View 类中（参见下面注释掉的代码）。这实际上可以同时显示椭圆形和面板，但是该方法不允许我更新椭圆形。此外，虽然我刚刚展示了椭圆形，但我似乎无法弄清楚究竟是什么导致了这种情况发生，而且我似乎无法让它回来。

```
public class View extends JPanel{
private Model model;

    public View(Model model) {
        this.model = model;
        //setLayout(new GridLayout(4,1));
        //add(new RadiusPanel(model));
        //add(new ColorPanel(model));
        //add(new SolidPanel(model));
        //add(new TitlePanel(model));

        repaint();
    }

    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);

        //center of view panel, in pixels:
        int xCenter = getWidth()/2;
        int yCenter = getHeight()/2;

        int radius = model.getRadius();
        int xStart = xCenter - radius;
        int yStart = yCenter - radius;
        int xWidth = 2 * radius;
        int yHeight = 2 * radius;
        g.setColor(model.getColor());

        g.clearRect(0, 0, getWidth(), getHeight());

        if (model.isSolid()){
            g.fillOval(xStart, yStart, xWidth, yHeight);
        } else {
            g.drawOval(xStart, yStart, xWidth, yHeight);
        }        
    }
} 
```

有点像以前的想法 - 注释掉的代码是我添加的东西，试图让事情正常工作，但不是基于提供的方向。在没有注释的情况下，我有 add(new View(model)); mvcFrame 行中的行也未注释。

各种面板类（SolidPanel、ColorPanel 等）只是扩展了一个名为 ControlPanel 的类，它扩展了 JPanel。这些似乎都按预期工作，对它们没有太大问题。还有一个启动 GUI 的驱动程序。这似乎也按预期工作。

我遇到的主要问题是我无法显示椭圆形，有一次我可以让它显示出来，但似乎没有任何改变它的选项。我觉得我已经很接近了，但在这一点上，我对其他事情的尝试感到茫然。

任何能提供帮助的人都会有我最诚挚的感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:00:56.100

这是一个非常仓促的重写，“只是为了让它工作”。

**main.java**

```
public class main {
    public static void main(String[] args) {
        // The JFrame could be created here, since it lasts the life
        // of the program.

        //...then, later, the model.
        Model mdl = new Model();    

        // ...and then move on to applying the view and control to the frame.
    }
} 
```

**控制器.java**

```
// Nothing interesting here, added for consistency.
public class Controller {
    private final Model model;

    public Controller(Model model) {
        // The frame is shown automatically in the model here.
        this.model = model;

        // The frame's setVisible is a control issue, should be called
        // from in here, not automatically in the model.
    }
} 
```

**MvcFrame.java**

```
import javax.swing.JFrame;

public class MvcFrame extends JFrame {
    private final Model model;

    public MvcFrame(Model model){
        this.model = model;
        // Anytime you add anything to a JFrame, use the content pane.
        this.getContentPane().add(model.getView());

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        // This line centers the frame on your screen.
        setLocationRelativeTo(null);
        setSize(800,600);
        // The frame won't paint until it's visible.
        // This means if you check dimensions, everything will be 0 x 0
        // until this line is called.
        setVisible(true);
    }
} 
```

**模型.java**

```
import java.awt.Color;

public class Model {
    private final Controller controller;  // Not used yet
    private final View view;
    private final MvcFrame mvcFrame; // Not used yet

    // Mutators and accessors needed for these guys (set/get)
    private final int radius = 44;
    private final Color color = Color.BLUE;
    private final boolean solid = true;

    public Model() {
        controller = new Controller(this);
        view = new View(this);
        mvcFrame = new MvcFrame(this);
    }

    public View getView() {
        return view;        
    }

    public int getRadius() {
        return radius;      
    }

    public Color getColor() {
        return color;       
    }

    public boolean isSolid() {
        return solid;       
    }
} 
```

**查看.java**

```
import java.awt.Graphics;
import javax.swing.JPanel;

public class View extends JPanel{
    private final Model model;

    public View(Model model) {
        this.model = model;
    }

    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);

        //center of view panel, in pixels:
        int xCenter = getWidth()/2;
        int yCenter = getHeight()/2;

        int radius = model.getRadius();
        int xStart = xCenter - radius;
        int yStart = yCenter - radius;
        int xWidth = 2 * radius;
        int yHeight = 2 * radius;
        g.setColor(model.getColor());

        g.clearRect(0, 0, getWidth(), getHeight());

        if (model.isSolid()){
            g.fillOval(xStart, yStart, xWidth, yHeight);
        } else {
            g.drawOval(xStart, yStart, xWidth, yHeight);
        }        
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:42:12.853

您的问题有点杂乱无章，我不确定您为什么注释掉代码的关键部分，但第一个问题是：

```
//add(new View(model)); 
```

您是否将视图添加到框架中？椭圆形可以画得很好，但没有添加视图。

* * *

这段代码最有可能出现问题：

```
public class MvcFrame extends JFrame {
    ...

    public MvcFrame(Model model){
        ...
        //setLayout(new GridLayout(4,1));
        //add(new RadiusPanel(model));
        ...
    }
} 
```

直接调用时`add`，它引用超类（JFrame）。不幸的是，JFrames 是偷偷摸摸的，因为它们有一个`contentPane`保存布局的框架。进一步偷偷摸摸：该内容窗格是一个空布局，只能通过放入您自己的面板来更改。

所以，你可能应该做这样的事情。即使您不完全遵循，这些方法也应该对您有很大帮助：

```
...
JPanel pnl = new JPanel(new GridLayout(4, 1));
this.setContentPane(pnl);
pnl.add(new RadiusPanel(model));
... 
```

如果您不想明确设置内容窗格，可以使用`this.getContentPane().add(foo)`.

空布局问题也可能影响您的椭圆绘图，因为当您添加 JPanel 时，未指定其大小，因此默认为`(0,0)`.

* * *

另外，不确定您的控制器为什么扩展 JPanel。您的视图应该对控制器可用，并且应该是其中唯一包含任何摆动组件的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T15:03:26.107

尽管我遇到了不同的问题，但考虑到的问题是：

g.clearRect(0, 0, getWidth(), getHeight());

在我的项目中为我解决了所有问题，因为它没有抹去之前的 Oval，所以我只能看到更大的变化。谢谢你。

# android - 如何将从服务器下载的媒体文件存储为用户无法访问

> ID：13737052
> 
> 赞同：1
> 
> 时间：2012-12-06T04:37:08.557
> 
> 标签：android, file, cordova

我正在写一个电话间隙 + android 应用程序。在应用程序中，我想从服务器下载音乐文件，当他下载文件时，他可以使用我的应用程序播放它。问题是我不希望用户备份和共享他从服务器下载的文件。对于这些音乐文件，用户必须付费。

当我检查 android 系统时，我看不到我的应用程序的任何应用程序安装文件夹。将下载的音乐存储在我的应用程序安装文件夹中是个好主意吗？我不加密音乐文件，但我想将它们存储在应用程序安装文件夹中。

这可能与电话差距吗？请给我你的想法或任何提示

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:42:28.093

您可以使用`/data/data/you app package name`. 根据要求，我会进行条件检查以查看用户是否已付款，如果他随后访问了位于应用程序中的媒体文件，则访问位于 sd 卡上的文件。

# bash - shell脚本中的连接和'basename'的使用

> ID：13737053
> 
> 赞同：2
> 
> 时间：2012-12-06T04:37:14.653
> 
> 标签：bash, shell, sed

我想从特定目录中读取所有文件名，然后通过在另一个目录中附加一些字符串来创建具有这些名称的新文件。

例如 > 'A', 'B', 'C' 在 'logs' 目录中然后脚本应该在 'tmp' 目录中创建 'A_tmp', 'B_tmp', 'C_tmp'

我正在使用的是 -

```
tempDir=./tmp/
logDir=./logs/

for file in $( find `echo $logDir` -type f )
 do
      name=eval basename $file
      echo $name
      name=$(echo $name | sed 's/.$//')
      echo $tempDir
      opFile=$tempDir$name
      echo $opFile
 done 
```

但我的理解是，$file 包含 '\n' 作为最后一个字符，我无法连接字符串。

现在我不是在创建文件，只是打印所有的名字。

那么，如何从文件名中删除 '\n' ，我的理解是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T05:19:44.563

### 分析

您的脚本中有多个问题需要解决。让我们一步一步来：

```
tempDir=./tmp/
logDir=./logs/

for file in $( find `echo $logDir` -type f ) 
```

该方案假定文件名中没有空格（这不是一个不寻常的限制；避免名称中的空格问题相对棘手）。此外，不需要`echo`; 写吧：

```
for file in $(find "$logDir" -type f) 
```

继续：

```
do
    name=eval basename $file 
```

这将`basename`在环境变量`name`设置为 value`eval`和 argument的情况下运行命令`$file`。你需要的是：

```
 name=$(basename "$file") 
```

双引号不是绝对必要的，因为名称不能包含空格（但是引用所有文件名并不是一个坏习惯，因为有时名称确实包含空格）。

```
 echo $name 
```

这将回显一个空行，因为未设置名称。

```
 name=$(echo $name | sed 's/.$//') 
```

如果设置了 name ，这将切断最后一个字符，但如果 name 是`A`，你将一无所有。

```
 echo $tempDir
    opFile=$tempDir$name
    echo $opFile
done 
```

给或取双引号以及您没有将`_tmp`后缀添加到的事实，`opFile`其余部分没有任何问题。

### 合成

将更改放在一起，您最终会得到：

```
tempDir=./tmp/
logDir=./logs/

for file in $(find "$logDir" -type f)
do
    name=$(basename "$file")
    echo "$name"                    # Debug only
    echo "$tempDir"                 # Debug only
    opFile="$tempDir${name}_tmp"
    echo "$opFile"
done 
```

这显示了所有中间结果。您可以很好地将其压缩为：

```
tempDir=./tmp/
logDir=./logs/

for file in $(find "$logDir" -type f)
do
    opFile="$tempDir"$(basename "$file")"_tmp"
    echo "$opFile"
done 
```

或者，使用更简单的双引号组合，因为名称不包含空格：

```
tempDir=./tmp/
logDir=./logs/

for file in $(find "$logDir" -type f)
do
    opFile="$tempDir$(basename $file)_tmp"
    echo "$opFile"
done 
```

当然，回声是您计划执行的复制或移动操作的替代品。

编辑： ...并删除对包含空格和通配符的文件名的限制，请执行以下操作：

```
tempDir=./tmp/
logDir=./logs/

find "$logDir" -type f |
while IFS= read -r file
do
    opFile="${tempDir}${file##*/}_tmp"
    echo "$opFile"
done 
```

对于包含换行符的文件名，它仍然会失败。如果您想处理该问题，请使用`find ... -print0 | xargs -0`or调查解决方案`find ... -exec`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:53:00.973

试试下面的。

```
#!/bin/sh

tmpDir=./tmp/
logDir=./logs/

# list all files in log directory, pipe into a loop that reads each path line
# by line..
# Also note that there is no newline in this case since it is swallowed by 'read'.
find $logDir -type f | while read path; do
    # get the basename of the path
    name=`basename $path`
    # copy the found file to the temporary directory.
    dest="$tmpDir/${name}_tmp"
    echo $dest
done 
```

Shell 脚本能够在语句中轻松连接字符串，如**$tmpDir/${name}_tmp 所示**，无需替换输出，因为 read 会吞下任何换行符。

**find ... 虽然**当您想读取多行任何内容时 read 是一个非常有用的结构，但它甚至适用于文件。

```
while read line; do
    echo $line
done < filename.txt 
```

编辑：澄清

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T04:45:51.287

尝试这样的事情：

```
tempDir=./tmp/
logDir=./logs/

for file in $( find `echo $logDir` -type f )
  do
    name=`eval basename $file|tr -d "\n"`_tmp
    echo $name
  done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T04:46:22.537

如果你改变

```
name=eval basename $file 
```

到

```
name=`eval basename $file` 
```

然后之后的名称包含您想要的内容。

# html - 浮动div问题

> ID：13737055
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:37:36.743
> 
> 标签：html, css

我有一个`<div>`包含多个 child的 parent `<div>`。我需要让孩子向左浮动`<div>`。问题是我的父母`<div>`没有正确展开，最后一个孩子`<div>`低于另一个孩子`<div>`。
我尝试将父`<div>`css 设置为`overflow:hidden; clear:both;`但它们都不起作用。
请让我知道任何可能的解决方案

**CSS：**

```
.rightpanel 
{
   width:80%;
   float:right;
} 
```

**HTML：**

```
<DIV id="div_rightPanel" class="rightpanel">
   <DIV style="WIDTH: 100%">
      <DIV style="POSITION: relative; TEXT-ALIGN: center; WIDTH: 93px; FONT-FAMILY: calibri; FLOAT: left; HEIGHT: 50px; FONT-SIZE: small" id="div_2009" class="year">
         2009
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 0px" id="div_2009_2" class="quarter">Q2</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 31px" id="div_2009_3" class="quarter">Q3</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 62px" id="div_2009_4" class="quarter">Q4</DIV>
      </DIV>
      <DIV style="POSITION: relative; TEXT-ALIGN: center; WIDTH: 124px; FONT-FAMILY: calibri; FLOAT: left; HEIGHT: 50px; FONT-SIZE: small" id="div_2010" class="year">
         2010
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 0px" id="div_2010_1" class="quarter">Q1</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 31px" id="div_2010_2" class="quarter">Q2</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 62px" id="div_2010_3" class="quarter">Q3</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 93px" id="div_2010_4" class="quarter">Q4</DIV>
      </DIV>
      <DIV style="POSITION: relative; TEXT-ALIGN: center; WIDTH: 124px; FONT-FAMILY: calibri; FLOAT: left; HEIGHT: 50px; FONT-SIZE: small" id="div_2011" class="year">
         2011
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 0px" id="div_2011_1" class="quarter">Q1</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 31px" id="div_2011_2" class="quarter">Q2</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 62px" id="div_2011_3" class="quarter">Q3</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 93px" id="div_2011_4" class="quarter">Q4</DIV>
      </DIV>
      <DIV style="POSITION: relative; TEXT-ALIGN: center; WIDTH: 124px; FONT-FAMILY: calibri; FLOAT: left; HEIGHT: 50px; FONT-SIZE: small" id="div_2012" class="year">
         2012
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 0px" id="div_2012_1" class="quarter">Q1</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 31px" id="div_2012_2" class="quarter">Q2</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 62px" id="div_2012_3" class="quarter">Q3</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 93px" id="div_2012_4" class="quarter">Q4</DIV>
      </DIV>
      <DIV style="POSITION: relative; TEXT-ALIGN: center; WIDTH: 124px; FONT-FAMILY: calibri; FLOAT: left; HEIGHT: 50px; FONT-SIZE: small" id="div_2013" class="year">
         2013
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 0px" id="div_2013_1" class="quarter">Q1</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 31px" id="div_2013_2" class="quarter">Q2</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 62px" id="div_2013_3" class="quarter">Q3</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 93px" id="div_2013_4" class="quarter">Q4</DIV>
      </DIV>
      <DIV style="POSITION: relative; TEXT-ALIGN: center; WIDTH: 62px; FONT-FAMILY: calibri; FLOAT: left; HEIGHT: 50px; FONT-SIZE: small" id="div_2014" class="year">
         2014
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 0px" id="div_2014_1" class="quarter">Q1</DIV>
         <DIV style="POSITION: absolute; WIDTH: 31px; BOTTOM: 0px; FLOAT: left; HEIGHT: 25px; LEFT: 31px" id="div_2014_2" class="quarter">Q2</DIV>
      </DIV>
   </DIV>
</DIV> ' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:52:04.153

这是一篇关于[HTML 定位](http://www.barelyfitz.com/screencast/html-training/css/positioning/)的好文章。

您正在使用`position: absolute`and`float: left`用于一个矛盾的块。

要将内部块定位在某个容器块内，您可以使用：

```
<div class="container">
    <div class="inner"></div>
    <div class="inner"></div>
    <div class="inner"></div>
</div> 
```

和样式表：

```
.container
{
    float: left;
    width: 100%;
    height: 50px;
    background-color: #ccc;
}

.inner
{
    float: left;
    width: 25%;
    height: 50px;
    background-color: #aaa;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:57:23.567

嘿 Ravi 看到基本概念是，如果我们想要实现您想要的结果，那么我们可以轻松地无需使用`positioning`您在代码中使用的我们可以通过以下方式轻松实现`floating`

我在下面提到基本概念想法如何获得所需的结果......

**HTML**

```
<div class="parent">
<div class="child"></div>
<div class="child"></div>
<div class="child"></div>
<div class="child"></div>
<div class="child"></div>
</div> 
```

**CSS**

```
.parent {
border:3px solid blue;
  overflow:hidden;
}
.child {
width:25%;
height:20px;
float:left;
background:green;
}
.child:nth-child(2n) {
background:red;
} 
```

[**演示**](http://tinkerbin.com/7OLxccU9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:57:28.980

听起来你需要一个清除元素。

```
<div id="parent">
  <div class="child">content</div>
  <div class="child">content</div>
  <div class="clear"><!--no content--></div>
</div> 
```

具有 clear 类的 div 可用作使您的父级以您期望的方式回流的方式。将它放在所有浮动元素的末尾，就在父元素的结束标记之前。然后像这样向 clear 类添加一些 css 。

```
.clear{
    clear:both;
    height:0;
} 
```

请注意，如果您在还使用浮动来创建其列的布局中使用它，则可能会通过将其他列推到执行清除的元素下方来破坏它。要解决此问题，您必须将父级包装在容器 div 中并浮动容器，这将导致其他列不受浮动影响，因为清除不会延伸到浮动父级之外。

希望这对您有所帮助。

# java - GWT 客户端和桌面运行服务器之间的客户端/服务器通信

> ID：13737060
> 
> 赞同：0
> 
> 时间：2012-12-06T04:38:39.493
> 
> 标签：java, html, gwt, networking

我正在尝试使用 libGDX 编写基于浏览器的 MMO，它是 HTML5/GWT 端口，但我不知道如何进行客户端/服务器交互。我已经为自己编写了桌面应用程序作为一种“学习”项目，现在决定将其重写到浏览器中。

我以前从未做过浏览器开发，所以我不太清楚如何进行项目的网络部分。我担心这是因为我不太确定 GWT 的实际工作原理，尤其是在我正在做的事情上。我尝试使用一个名为 KryoNet 的库进行网络连接，但显然您不能对 GWT 使用普通的网络连接方法。我收到了这个错误： http: [//pastebin.com/DVJPA44N](http://pastebin.com/DVJPA44N)

简而言之，如果可能的话，我需要帮助/指导如何处理 GWT 的客户端/服务器通信类型。如果有一个简单的谷歌答案，我很抱歉，我不知道如何表达我正在寻找的内容。

谢谢！

* * *

编辑：我查看了 WebSockets API，这并不是我想要的。我想在桌面本地托管服务器并与浏览器中托管的客户端进行通信。如果我只是误解了 GWT 中的整个 servlet 设置，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:54:49.997

你有没有看过类似[PlayN](http://code.google.com/p/playn/)的东西（愤怒的小鸟是最好的例子，将它与 GWT 一起用于应用程序的浏览器端口）

您还需要检查 WebSocket API（在 GWT/JSNI 中直接使用或通过第三方 gwt jar 使用）

# iphone - 在 iOS 6 中连接 Facebook 时出错

> ID：13737061
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:38:41.307
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我已经使用 ios 4 的 Facebook Graph 和 FBConnect 文件实现了 Facebook 墙贴。它在 ios 4 和 ios 5 设备中运行良好，但现在没有任何影响。

但是当我尝试在 ios 6 设备中连接 Facebook 时，它给了我一个错误，如下图所示。 ![在此处输入图像描述](../Images/9ce81e19087cd7a7e55290e712049535.png)

我已经搜索过这个但无法得到解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:06:10.443

iOS6 中的 Facebbok 集成非常容易，Apple 在 iOS6 中包含 facebook 功能，因此使用 Apple API 以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:44:26.053

您已经使用 Apple APIs for iOS6，阅读以下链接[https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)

使用iOS6可以使用以下代码

> ```
> if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
>             if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {  
>                 SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
>                 SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
>                     if (result == SLComposeViewControllerResultCancelled) {
>                         NSLog(@"Cancelled");
>                     } else
>                     {
>                         NSLog(@"Done");
>                         UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Successfully Posted On Facebook" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
>                         [alert show];
>                         [alert release];
>                     }
>                     [controller dismissViewControllerAnimated:YES completion:Nil];
>                 };
>                 controller.completionHandler =myBlock;
>                 [controller setInitialText:@"Test Message"];
>                 //   [controller addURL:[NSURL URLWithString:@"http://www.mobile.safilsunny.com"]];
>                 //   [controller addImage:[UIImage imageNamed:@"fb.png"]];
>                 [self presentViewController:controller animated:YES completion:Nil];
>             }
>             else{
>                 NSLog(@"UnAvailable");
>                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Facebook Accounts" message:@"There are no Facebook accounts configured.You can add or create a Facebook account in Settings" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
>                 [alert show];
>                 [alert release];
>             } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:13:37.407

在 facebook "http://developers.facebook.com/" 中打开应用程序

应用>>您的应用>>设置>>编辑设置>>高级>>迁移>>禁用所有重大更改

试试这个，它会起作用的。

# kendo-ui - Treeview 数据绑定功能在 kendoui 中不起作用

> ID：13737062
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:38:44.947
> 
> 标签：kendo-ui, kendo-treeview

我正在使用剑道 UI 树视图小部件控件，但无法使用`dataBound`功能。

```
$("#treeview").kendoTreeview({
    dataSource: parent,
    expanded: true,
    dataBound: ondata,
    dataTextField: ["Parent", "Child"]
}).data("kendoTreeView");

function ondata() {
    alert("databound");
} 
```

但是警报没有显示。
它出什么问题了？我是否缺少脚本文件之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:09:25.200

我可以看到它实际上在[这里](http://jsbin.com/edamuj/120/edit)工作：检查与您的代码的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T16:48:22.107

Kendo treeview dataBound 事件仅在数据源为本地时触发。

可能会检查您的数据源（绑定）。

来自 Telerik 的评论

*   “基本上当前的行为是预期的，因为当前 TreeView 绑定到服务器端的数据。请注意，只有在客户端绑定数据后才会触发 DataBound 事件。”

（[http://50.56.19.112/forums/databound-event-doesn](http://50.56.19.112/forums/databound-event-doesn) 't-fire#boLRI66aG2OF1P8AAFTdxQ）

# php - 如何根据php变量在一定时间后自动重新加载页面

> ID：13737063
> 
> 赞同：0
> 
> 时间：2012-12-06T04:38:55.253
> 
> 标签：php, javascript

我目前有一个 php 文件，可以自动在播放列表顶部播放歌曲。我有一个`$duration`从 mysql 数据库中提取的值，我希望页面在歌曲播放完毕后自动刷新。

歌曲当前在 iframe 中播放，因此这是判断歌曲已大致完成的唯一方法。

我已经尝试在 javascript 中执行此操作，但在尝试将变量传递到超时期间时遇到问题。

```
<script type="text/JavaScript">
    function timedRefresh(timeoutPeriod{
        setTimeout("location.reload(true);",timeoutPeriod);
    }
</script>

<body onload="JavaScript:timedRefresh($x);">
    ...
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:42:06.860

它只是一个简单的 PHP 变量输出到源代码中：

```
<script type="text/JavaScript">
<!--
function timedRefresh(timeoutPeriod){
    setTimeout("location.reload(true);",<?php echo $song_duration_in_milliseconds; ?>);
}
</script> 
```

或者使用@Matt Clark 的回答中指出的元刷新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:42:00.217

您还可以使用 META 标签进行刷新。

**在 PHP 中：**

```
<?php
    $Refresh = 600;
?> 
```

在您的 HTML 头中，您可以修改 META 标签：

```
<meta http-equiv="refresh" content="<?= $Refresh ?>"> 
```

或者如 Amadan 所述，您可以使用 PHP 在 PHP 中指定元标记：

```
header("Refresh: " . $Refresh); 
```

**或在 Javascript 中：**

```
<script type="text/JavaScript">
    setTimeout("location.reload(true);",<?= $Refresh ?>);
</script> 
```

**旁注**

短标签：

```
<?= $Variable, $Variable2 ?> 
```

是否相当于使用：

```
<?php echo $Variable; echo $Variable2; ?> 
```

# wpf - 将元素可见性绑定到 ViewModel 属性，并提供设计时支持

> ID：13737067
> 
> 赞同：4
> 
> 时间：2012-12-06T04:39:48.387
> 
> 标签：wpf, caliburn.micro, fody-propertychanged

我有一个使用 Caliburn.Micro 的 WPF 应用程序。当我希望应用程序等待在后台完成一些工作时，我希望能够用阴影和进度环（来自[MahApps.Metro ）覆盖应用程序。](http://mahapps.com/MahApps.Metro/)

我目前所拥有的确实有效，但覆盖在设计时始终处于打开状态。我的`ShellView`窗口如下所示：

```
<Window ...>
    ...
    <Grid>
        ...
        <Rectangle x:Name="waitShadow" Fill="#3f000000" Stroke="Black" StrokeThickness="0" Visibility="{Binding IsWaiting, Converter={StaticResource BooleanToVisibilityConverter}}" Grid.RowSpan="2"/>
        <ContentControl ... Visibility="{Binding IsWaiting, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Controls:ProgressRing ...> <!-- from MahApps.Metro -->
            </Controls:ProgressRing>
        </ContentControl>
    </Grid>
</Window> 
```

我的`ShellViewModel`班级有一个公共 bool 属性`IsWaiting`，当我将其设置`true`为阴影和环时，一切都被禁用。当我将它设置为它时，`false`它会恢复正常，因此绑定有效（我正在使用[Fody](https://github.com/Fody/Fody)和 PropertyChanged 插件）。唯一的问题是该`Visibility`属性在设计时没有折叠。

有没有更好的方法让覆盖在设计时起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T04:53:51.390

您可以`FallbackValue`在绑定上设置一个，这将`Collapse`在设计时

```
Visibility="{Binding IsWaiting, Converter={StaticResource BooleanToVisibilityConverter}, FallbackValue=Collapsed}" 
```

您也可以在那里`IsWaiting`创建`DependancyProperty`并设置默认值，但我发现这是最简单的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-05T13:58:35.660

FallbackValue 并不总是有效，即如果您的设计器实际上绑定到设计时数据，并且 FallbackValue 实际上修改了绑定的运行时行为，这在许多情况下可能不太理想。我做了一个标记扩展，让设计师可以在设计器中摆弄 UI，而不必担心会弄乱运行时行为。我在这里写过：[http ://www.singulink.com/CodeIndex/post/wpf-visibility-binding-with-design-time-control](http://www.singulink.com/CodeIndex/post/wpf-visibility-binding-with-design-time-control)

它可以这样使用：

```
<Grid Visibility="{data:Value {Binding RootObject, Converter={StaticResource NullToVisibilityConverter}}, DesignValue=Visible}">
    <TextBlock Background="Red" Text="Testing visibility" />
</Grid> 
```

ValueExtension 的代码如下（任何更新或错误修复都会发布到博客，所以我建议在那里查看最新版本）：

```
public class ValueExtension : MarkupExtension
{
    public object DesignValue { get; set; } = DependencyProperty.UnsetValue;

    [ConstructorArgument("value")]
    public object Value { get; set; } = DependencyProperty.UnsetValue;

    public ValueExtension() { }

    public ValueExtension(object value)
    {
        Value = value;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        var provideValueTarget = (IProvideValueTarget)serviceProvider.GetService(typeof(IProvideValueTarget));
        var property = provideValueTarget.TargetProperty as DependencyProperty;
        var target = provideValueTarget.TargetObject as DependencyObject;

        if (target == null || property == null)
           return this;

        object value = DesignerProperties.GetIsInDesignMode(target) && DesignValue != DependencyProperty.UnsetValue ? DesignValue : Value;

        if (value == DependencyProperty.UnsetValue || value == null)
            return value;

        if (value is MarkupExtension)
            return ((MarkupExtension)value).ProvideValue(serviceProvider);

        if (property.PropertyType.IsInstanceOfType(value))
            return value;

        return TypeDescriptor.GetConverter(property.PropertyType).ConvertFrom(value);
    }
} 
```

# php - 使用图形 api 获取所有 facebook 相册的列表

> ID：13737072
> 
> 赞同：2
> 
> 时间：2012-12-06T04:40:41.320
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 facebook php sdk 3.2 我正在使用 url "https://graph.facebook.com/user_id/albums?access_token=token 来获取用户的所有相册。但对于某些用户来说，它给出了空白结果，例如

```
{
   "data": [
   ]
} 
```

为什么会发生这种情况，我如何获取用户的所有相册？

我正在使用的代码是

```
$this->facebook=new Facebook(array(
                            'appId' => $appId,
                            'secret' => $appSecret,
                            'cookie' => true
                        ));

if(is_null($this->facebook->getUser()) || $this->facebook->getUser()==0)
    $this->askForLogin();

$this->accessToken = $this->facebook->getAccessToken();

$feedURL = "https://graph.facebook.com/".$this->facebook->getUser()."/albums?access_token=".$this->accessToken;

$albumData = file_get_contents($feedURL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:12:47.373

你请求许可“user_photos”吗？

如果用户阻止了照片，您需要在身份验证过程中请求该权限。

您可以在此处阅读有关许可的更多信息：http: [//developers.facebook.com/docs/reference/login/](http://developers.facebook.com/docs/reference/login/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:42:40.390

这是用户设置的问题，它阻止了所有应用程序查看他的照片。现在解决了

# android - 在我的应用中使用应用内购买，需要信息吗？

> ID：13737075
> 
> 赞同：0
> 
> 时间：2012-12-06T04:41:18.393
> 
> 标签：android, in-app-purchase

我有一个可以使用`In-app purchase`.

1.  我正在使用示例产品 ID`android.test.purchased`从 google play 购买产品。我可以购买产品并收到 toast 消息`Thank you. Your item will appear shortly`，但我无法看到 logcat 消息和我购买的项目。这是我正在使用的代码

    ```
    public Handler mTransactionHandler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        Log.i(TAG, "Transaction complete");
        Log.i(TAG, "Transaction status: " + BillingHelper.latestPurchase.purchaseState);
        Log.i(TAG, "Item purchased is: " + BillingHelper.latestPurchase.productId);

        if (BillingHelper.latestPurchase.isPurchased()) {
            Log.i(TAG, " is purchased completed ");
            showItem();
        }
    }; 
    ```

    };

2.  如果我使用自己的产品 ID 购买，是否需要提供原始信用卡详细信息？要购买产品，我使用测试帐户作为设备中的主帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:10:37.850

Docs说，要购买自己的产品进行测试，必须提供原始信用卡详细信息，尽管那里不会发生资金（金钱交易）..这似乎是来自测试账户的虚拟交易..

# java - Android getSelectedItem，怎么用？

> ID：13737076
> 
> 赞同：0
> 
> 时间：2012-12-06T04:41:21.917
> 
> 标签：java, android

我尝试使用微调器控件结果将其指向应用程序上的另一个屏幕。例如，在微调器控件中，如果用户选择 chevy，它将带您进入另一个屏幕，该屏幕在 chevy.xml 和 Chevy.class 中编码。这就是我目前所拥有的并且需要一些帮助，因为我们的书只使用了 getSelectedItem 并且该示例仅用于输出语句。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Spinner;          

 public class Mainpage extends Activity implements OnItemSelectedListener {
    String carChoice, chevy, ford, dodge, toyota;

    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);

  /*  carChoice = group.getSelectedItem().toString();
    }

     if (carChoice.compareTo(chevy)==0)
     {
     startActivity(new Intent(Mainpage.this, Chevy.class));
  */ }

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        final Spinner group = (Spinner) findViewById(R.id.carGroup);
        group.setOnItemSelectedListener(this);
        // TODO Auto-generated method stub
         String selected = group.getItemAtPosition(1).toString();           
    }
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:44:41.540

为了

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
      long arg3) 
```

arg2 是选中项的索引，arg3 是选中项的 id。您可以调用 getItem() 方法来获取选定的项目对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:55:06.147

```
public class SpinnerExample extends Activity
       {
                Spinner sp;
                ArrayAdapter<String> adapter;
                String numbers[] = { "ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN",
                                                "EIGHT", "NINE", "TEN" };

                public void onCreate(Bundle savedInstanceState)
                      {

                                super.onCreate(savedInstanceState);
                                setContentView(R.layout.main);

                                sp = (Spinner) findViewById(R.id.spinner1);

                                adapter = new ArrayAdapter<String>(this,
                                                                android.R.layout.simple_spinner_item, numbers);
                                sp.setAdapter(adapter);

        sp.setOnItemSelectedListener(new OnItemSelectedListener()
        {
      public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3)                                                    
                    {
       Toast.makeText(getBaseContext(), sp.getSelectedItem().toString(),
        Toast.LENGTH_LONG).show();                                                 
                        }
                 public void onNothingSelected(AdapterView<?> arg0)
                    {
                      // TODO Auto-generated method stub                 
                    }
       });
     }
} 
```

> sp.getSelectedItem().toString() 获取项目保存在这里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:08:17.673

请参阅下面的代码以获取 Android 中微调器的完整示例。

```
public class ArrayAdapterDemo2 extends Activity implements
        AdapterView.OnItemSelectedListener {
    TextView selection;
    String[] items = { "Dipak", "Keshariya", "Software", "Deepak", 
            "Android Example", "Android Book",
            "Android", "i-phone", "Developer", "Tutorial" };

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        selection = (TextView) findViewById(R.id.selection);

        Spinner spin = (Spinner) findViewById(R.id.spinner);
        spin.setOnItemSelectedListener(this);

        ArrayAdapter aa = new ArrayAdapter(
                this,
                android.R.layout.simple_spinner_item, 
                items);

        aa.setDropDownViewResource(
           android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(aa);
    }

    public void onItemSelected(AdapterView<?> parent, View v, int position,
            long id) {
        // Here Position is Item Index
        selection.setText(spin.getSelectedItem().toString());
    }

    public void onNothingSelected(AdapterView<?> parent) {
        selection.setText("");
    }
} 
```

有关更多信息，请参见下面的链接。

[Android 微调器](http://developer.android.com/guide/topics/ui/controls/spinner.html)

# java - 正则表达式非法重复

> ID：13737082
> 
> 赞同：0
> 
> 时间：2012-12-06T04:42:11.743
> 
> 标签：java

我有一个正在迭代的运算符字符串数组。当我找到一个存在于 中的`strLine`，我用一个空白字符串替换它的第一个实例。当我到达时`{`，我得到了`java.util.regex.PatternSyntaxException: Illegal repetition`。

现在，我知道这`{`是一个特殊的 java 运算符，所以这就是它失败的原因。用我现在的设置来逃避这个角色的最好方法是什么？

```
String[] operators = {".", ",", "{", "}", "!", "++", "--", "*", "/", "%", "+", "-", "<"}

String strLine = "for (int count = input.length(); count > 0; count--) {";
strLine = strLine.trim();

for (int i = 0; i < operators.length; i++) {
    if(strLine.contains(operators[i])) {

        strLine = strLine.replaceFirst(operators[i]+"\\s*", "");
        System.out.println("Removal of: " + operators[i]);
        System.out.println("Sentence after removal: " + strLine);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:58:48.120

您应该能够使用 java.util.regex.Pattern.quote 转义特殊字符

通过改变

```
strLine = strLine.replaceFirst(operators[i]+"\\s*", ""); 
```

到

```
strLine = strLine.replaceFirst(Pattern.quote(operators[i])+"\\s*", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:05:04.883

您必须使用反斜杠转义每个正则表达式保留运算符。所以你需要放两个反斜杠（另一个是为了逃避反斜杠本身）。例子： ”\\。”， ”\\{”

# objective-c - OpenGL 2.0 添加纹理

> ID：13737088
> 
> 赞同：0
> 
> 时间：2012-12-06T04:42:48.347
> 
> 标签：objective-c, ios, xcode, opengl-es, textures

所以，我对使用 iOS 开发的 OpenGL 非常陌生，我目前正在尝试在三角形上生成纹理（非常基本的东西）。谁能向我解释为什么我下面的代码只从我拥有的纹理图片而不是纹理中生成一种颜色？我必须为纹理生成另一个缓冲区吗？任何建议都会很棒！

```
@synthesize baseEffect;

typedef struct {
    GLKVector3 positionCoords;
    GLKVector2 textureCoords;
}
SceneVertex;

static const SceneVertex vertices[]={
    {{-0.5f, -0.5f, 0.0f}, {0.0f, 0.0f}}, // lower left corner
    {{ 0.5f, -0.5f, 0.0f}, {1.0f, 0.0f}}, // lower right corner
    {{-0.5f,  0.5f, 0.0f}, {0.0f, 1.0f}}  // upper left corner
};

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    GLKView *view = (GLKView *)self.view;

    NSAssert([view isKindOfClass:[GLKView class]], @"View controller's view is not a GLKView");

    [view setContext:[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2]];
    [EAGLContext setCurrentContext:[view context]];

    [self setBaseEffect:[[GLKBaseEffect alloc] init]];
    [[self baseEffect] setUseConstantColor:GL_TRUE];
    [[self baseEffect] setConstantColor:GLKVector4Make(1.0f, 1.0f, 1.0f, 1.0f)];
    glClearColor(0.0f, 0.0f, 0.0, 1.0f);

    glGenBuffers(1, &vertexBufferID); //pass vertex address to generate a buffer ID to it
    glBindBuffer(GL_ARRAY_BUFFER, vertexBufferID);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    //glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), offsetof(SceneVertex, positionCoords), GL_STATIC_DRAW);
    //NSLog(@"%lul, %p",sizeof(vertices), vertices );

#pragma mark - Implementing Generating Texture Code Image here -

    //CGImageRef imageRef = [[UIImage imageNamed:@"leaves.gif"] CGImage];

    NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithBool:YES],GLKTextureLoaderOriginBottomLeft, nil];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"leaves" ofType:@"gif"];

    //GLKTextureInfo *textureInfo = [GLKTextureLoader textureWithCGImage:imageRef options:nil error:NULL];
    NSError * error;
    GLKTextureInfo * textureInfo = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];
    if (textureInfo == nil) {
        NSLog(@"Error loading file: %@", [error localizedDescription]);
    }
    self.baseEffect.texture2d0.name = textureInfo.name;
    self.baseEffect.texture2d0.target = textureInfo.target;

}

-(void)glkView:(GLKView *)view drawInRect:(CGRect)rect{

    [[self baseEffect] prepareToDraw];
    glClear(GL_COLOR_BUFFER_BIT);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    //glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(SceneVertex), NULL);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(SceneVertex), (const GLvoid *) offsetof(SceneVertex, positionCoords));
    #pragma mark - Implementing Drawing Texture Code Image here -
    glEnable(GLKVertexAttribTexCoord0);
    //glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, offsetof(SceneVertex, textureCoords), NULL);

    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(SceneVertex), (const GLvoid *) offsetof(SceneVertex, textureCoords));

    NSLog(@"%lu, %lu, %lu",offsetof(SceneVertex, positionCoords), offsetof(SceneVertex, textureCoords), sizeof(SceneVertex));

    glDrawArrays(GL_TRIANGLES, 0, 3);

    NSLog(@"%lul", sizeof(vertices)/sizeof(SceneVertex));
    //glDrawElements(GL_TRIANGLES, sizeof(vertices)/sizeof(SceneVertex), GL_UNSIGNED_BYTE, 0);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:10:58.007

哇，我觉得很傻。我不小心输入了错误的方法来启用纹理。我应该放:`glEnableVertexAttribArray(GLKVertexAttribTexCoord0);`而不是`glEnable(GLKVertexAttribTexCoord0);`. 自动完成总是让我哈哈大笑。

# javascript - 与多个值进行比较的简洁方法

> ID：13737091
> 
> 赞同：39
> 
> 时间：2012-12-06T04:43:06.397
> 
> 标签：javascript, jquery

考虑以下：

```
var a = 'jesus';

if(a == 'something' || a == 'nothing' || a=='anything' || a=='everything'){
   alert('Who cares?');
} 
```

有没有办法让这个更短？

Javascript中有什么类似的东西`if (a=='bbb'||'ccc')`吗？

另外，jQuery 能帮上忙吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-06T04:44:31.943

你可以用这个...

```
if (["something", "nothing", "anything", "everything"].includes(a)) {
   alert('Who cares?');
} 
```

如果您坚持使用较旧的浏览器支持...

```
if (["something", "nothing", "anything", "everything"].indexOf(a) > -1) {
   alert('Who cares?');
} 
```

您还将它标记为 jQuery，因此如果您需要支持没有 . 的旧浏览器`Array.prototype.indexOf()`，您可以使用[`$.inArray()`](http://api.jquery.com/jQuery.inArray/).

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-06T05:09:30.063

使用正则表达式：

```
if (/^(something|nothing|anything|everything)$/.exec('jesus')) alert('Who cares?');​ 
```

或相反：

```
/^(something|nothing|anything|everything)$/.exec('jesus')||alert('Who cares?');​ 
```

[更新] 更短 ;-)

```
if (/^(some|no|any|every)thing$/.exec('jesus')) alert('Who cares?');​ 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-06T04:44:40.173

您可以将选项放在数组中并使用 jQuery[`$.inArray()`](http://api.jquery.com/jQuery.inArray/)或 javascrpt[`indexOf()`](http://www.w3schools.com/jsref/jsref_indexof_array.asp)搜索数组

**纯 JavaScript**  

**[现场演示](http://jsfiddle.net/rajaadil/hn8XF/3/)**

```
var a = 'anything';
arr = ['something', 'nothing', 'anything', 'everything'];
if(arr.indexOf(a) != -1)
    alert("condition met");    
else
    alert("condition not met"); 
```

**使用 jQuery**

**[现场演示](http://jsfiddle.net/rajaadil/n5n9P/1/)**

```
var a = 'jesus';
arr = ['something', 'nothing', 'anything', 'everything'];

if($.inArray(a, arr) != -1) // With jQuery
    alert("condition met");    
else
    alert("condition not met"); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-02-24T18:26:21.807

使用 ES7，您可以使用[Array.prototype.includes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)甚至比 indexOf 更短的表示法，这已经在每个现代浏览器中实现。

这是示例用法：

```
if (['hero', 'anything', 'everything'].includes(me)) {
    alert('Who cares?');
} 
```

还有来自 Mozilla的[polyfill 。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes#Polyfill)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-06T04:45:05.727

试试这个：

如果您想检查除**Jesus**以外的其他单词，请尝试以下操作，

```
if(a != "jesus"){
   alert('Who cares?');
} 
```

如果您想检查特定单词，请尝试以下操作，

```
var check_arrays = ['something','nothing', 'anything', 'everything'];
if(checkThis(a)){
   alert('Who cares?');
}

function checkThis(a)
{
   for(i=0;i<check_arrays.length;i++)
   {
      if(check_arrays[i] == a)
      return true;
   }
   return false;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-06T04:48:02.040

可能使用 switch 而不是 if：

```
var a = 'jesus';
switch (a){
    case 'something':
    case 'nothing' :
    case 'anything':
    case 'everything':
   alert('Who cares?');
   break;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-06T18:40:01.617

使用对象字面量：

```
var all={something:1,nothing:1,anything:1,everything:1};
if (all.hasOwnProperty('jesus')) alert('Who cares?');​ 
```

我想说这是最简洁的通用跨浏览器表达式（好吧，只要目标是比较字符串）。它也非常灵活，因为您可以轻松添加或删除属性：

```
all.mything=1;
delete all.nothing; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-06T04:49:03.000

我认为没有简单的方法可以做到这一点。但是你可以写一个函数`in_array`，你可以在任何你需要的地方使用它

```
Array.prototype.in_array = function(p_val) {
    for(var i = 0, l = this.length; i < l; i++) {
        if(this[i] == p_val) {
            return true;
        }
    }
    return false;
}

var v_array = [ 'something','nothing', 'anything', 'everything'];

var a = "jesus";

if(v_array.in_array(a)){
    alert('Who cares?');
} 
```

# azure - Microsoft 私有云能否提供 Web/Worker 角色？

> ID：13737105
> 
> 赞同：2
> 
> 时间：2012-12-06T04:44:44.683
> 
> 标签：azure, cloud

Microsoft Azure 云支持 Web、Worker 和 VM 三种角色，具有不同的功能供应用程序开发人员使用。

如果我在使用 Web 或 Worker 角色时理解正确，Azure 的行为更像是 PaaS，而使用 VM 角色则将 Azure 置于 IaaS 角色中。

Web，Worker 角色的优势在于 OS/Platform 由 Fabric Controller 管理（更新 OS 等），而对于 VM，我们必须自己管理这些。

我的问题是，如果我们使用微软提供的解决方案来实现私有云，我们仍然可以在我们的私有云上​​创建 Web/Worker 角色，还是仅限于 VM 角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:30:31.950

您所描述的云服务由 Web / Worker / VM 角色组成，Web 和 Worker OS 由 Microsoft 维护，VM Role 由您维护（多个实例均基于您上传的基线图像）。在所有这三种情况下，任何类型的新映像创建都像是重新开始：在运行时对操作系统所做的更改不会永久保留。VM 角色不会**将**Windows Azure 置于 IaaS 模式，因为结构仍在使用单个基线映像来管理角色实例。IaaS，带有**虚拟机**, 有点不同，虚拟机可以在云中构建（相对于需要在本地构建然后上传的 VM 角色）。此外，对虚拟机的任何更改都是持久的。当扩展到多个实例时，您需要从主映像制作 VHD 副本，然后每个实例将独立存在（例如，对一个虚拟机的更改不会显示在其他虚拟机中）。

说了这么多：您现在只能在 Windows Azure 中访问云服务（web/worker/vm 角色）；没有办法在本地运行这些。

最近，我们宣布[为 Windows Server 提供 Windows Azure 服务](http://www.microsoft.com/hosting/en/us/services.aspx)。您将看到有一部分 Windows Azure 功能可在 Windows Server 上运行：

*   网站
*   虚拟机
*   服务管理门户和 API

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:58:20.997

答案还没有。WebRole 和 WorkerRole PAAS 依赖于 Azure Fabric Controller，据我所知，该控制器尚未在 Microsoft 控制之外的本地运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:14:48.697

是的，据我所知，你可以，我自己没有尝试过，你需要创建一个 VNET，然后在你的 VNET 中创建你的云服务，Michael Washam 有一篇很好的帖子详细说明了它：[连接 Web 或工作角色到Windows Azure 中的简单虚拟网络](http://michaelwasham.com/2012/08/06/connecting-web-or-worker-roles-to-a-simple-virtual-network-in-windows-azure/)

# python - 使用numpy获取子矩阵

> ID：13737109
> 
> 赞同：3
> 
> 时间：2012-12-06T04:45:11.350
> 
> 标签：python, numpy

我正在尝试使用`numpy`(python newbie here)执行以下操作

## 创建一个右维的归零矩阵

```
num_rows = 80
num_cols = 23
A = numpy.zeros(shape=(num_rows, num_cols)) 
```

## 对矩阵进行操作

```
k = 5
numpy.transpose(A)
U,s,V = linalg.svd(A) 
```

## 提取子矩阵

```
 sk = s[0:(k-1), 0:(k-1)] 
```

### 错误结果

```
Traceback (most recent call last):
File "tdm2svd.py", line 40, in <module>
sk = s[0:(k-1), 0:(k-1)]
IndexError: too many indices 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T04:53:54.163

回答你的问题 s 只是一个一维数组......（即使你确实转置了它......你没有）

```
>>> u,s,v = linalg.svd(A)
>>> s
array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,
        0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.])
>>> 
```

对于选择子矩阵，我认为这可以满足您的需求...可能有更好的方法

```
>>> rows = range(10,15)
>>> cols = range(5,8)
>>> A[rows][:,cols]
array([[ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.]]) 
```

或者可能更好

```
>>> A[15:32, 2:7]
array([[ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.]]) 
```

# c - 为什么 C 两者都有。和-> 用于寻址结构成员？

> ID：13737115
> 
> 赞同：0
> 
> 时间：2012-12-06T04:46:25.293
> 
> 标签：c

> **可能重复：**
> [为什么 C 中的箭头 (->) 运算符存在？](https://stackoverflow.com/questions/13366083/why-does-the-arrow-operator-in-c-exist)

为什么 C 两者都有*。*和*->*用于寻址结构成员？

是否有可能有这样修改过的语言语法，我们可以将*p*作为指向 struct 的指针并像*p.value*一样获取结构成员的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:53:14.007

来自 C99 规范。

运算符的第一个操作数`.`应具有合格或不合格的结构或联合类型，第二个操作数应命名该类型的成员。

运算符的第一个操作数`->`应具有**指向合格或不合格结构的类型指针**或**指向合格或不合格 union**的指针，第二个操作数应命名指向的类型的成员。

我的猜测是，出于识别目的，他们使用两个运算符进行成员访问。即指针类型结构变量是`->`和`.`普通结构变量。

例如：

```
struct sample E, *E1; 
```

表达式`(&E)->MOS`是一样的`E.MOS`并且
`(*E1).MOS`是一样的`E1->MOS`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T04:57:09.103

您可以将其`p->m`视为简写`(*p).m`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T05:06:01.897

**可能吗？**是的。语法如下：

```
(*ptr).member 
```

括号是必需的，因为*结构成员运算符* `.`的优先级高于*间接运算符* `*`。但是在使用几次之后，您会同意以下内容更易于使用：

```
ptr->member 
```

**为什么C两者都有？**指向结构的指针在 C 中经常使用，以至于创建了一个特殊的运算符，称为*结构指针运算符* `->`。它的工作是更清楚、更方便地表达指向结构的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T04:48:15.453

. 用于结构变量，-> 用于指针。如果 p 是一个指针，你可以做 p->value 或 (*p).value，它们是一样的。

# android - 为什么显示包含 GLSurfaceView 的 DialogFragment 时屏幕变暗？

> ID：13737116
> 
> 赞同：2
> 
> 时间：2012-12-06T04:46:27.137
> 
> 标签：android, android-dialogfragment

我不确定这是否是完成此任务的正确方法，但我想要一个带有 GLSurfaceView 的弹出窗口。所以我创建了一个 dialogFragment 并在其 onCreateView 方法中返回我的 glSurfaceView：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    mView = new mGLSurfaceView(this.getDialog().getContext());
    return mView;
} 
```

当 DialogFragment 显示时，整个屏幕变暗，而不仅仅是背景。当我返回带有 TextView 的 LinearLayout 时，不会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-17T00:48:28.747

This is because of the way GLSurfaceView works - the View part of GLSurfaceView is just a transparent container, and the rendering is done on Surface that sits below the Layout (and below the Layout for the Activity that has triggered the DialogFragment). Now when the DialogFragment is created, there is a "dimming layer" inserted between the DialogFragment and the parent Activity, to bring focus to the DialogFragment. This dimming layer ends up sitting between the transparent-View-part of GLSurfaceView, but above the rendering Surface, which explains why the entire screen appears to dim.

You can fix this by calling setZOrderOnTop(true) when you create your GLSurfaceView - this will force the rendering Surface to sit above all other views in the DialogFragment Layout, so above the dimming layer.

# android - Android按钮颜色不会以编程方式改变

> ID：13737118
> 
> 赞同：0
> 
> 时间：2012-12-06T04:46:39.133
> 
> 标签：android, button, colors

我有这段代码，预计将按钮的颜色更改为蓝色，但没有任何效果。代码进入这个 if 语句，但不改变颜色。另一方面，之前使用的相同语句实际上确实改变了按钮的颜色。为什么会这样？

```
 if(t.equals("a"))
                 {
                     Toast toast5=Toast.makeText(getApplicationContext(),"a found", Toast.LENGTH_SHORT);  
                     toast5.show();          
                     btn6.getBackground().setColorFilter(Color.BLUE, PorterDuff.Mode.MULTIPLY);
                 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:12:00.783

```
// Get Handle for the Tab buttons
Button btnTab1 = (Button) findViewById(R.id.button_tab1);
Button btnTab2 = (Button) findViewById(R.id.button_tab1);

// set the colors correctly
btnTab1.setBackgroundResource(R.color.lightblue);
btnTab2.setBackgroundResource(R.color.darkblue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:00:52.197

采用

```
btn6.setBackgroundColor(Color.BLUE); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T06:08:33.810

您为此代码实现，

```
 btn6.setBackgroundColor(Color.colorChoose);
    btn6.setBackgroundDrawable(Drawable drawable);
    btn6.setBackgroundResource(int resid); 
```

# php - php 从数据库中获取数据会减慢页面速度

> ID：13737120
> 
> 赞同：1
> 
> 时间：2012-12-06T04:46:46.683
> 
> 标签：php, mysql, freeze

我在 Windows 上使用 wamp 服务器。从我的数据库中获取一点数据时，我的页面严重挂起。它就像一个简单的帖子，有 1 个图像 1 个标题和一些描述，当我触发命令时，它会严重挂起我的页面。这是我的代码的样子。

```
 <?php
    //1\. Create a connection
    $connection= mysql_connect("localhost","root","");
    if(!$connection){
        die("Database Connection Failed :" . mysql_error());
    }

    //2 Select a database to use
    $db_select = mysql_select_db("gat", $connection);
    if (!$db_select) {
        die("Database selection failed: " . mysql_error());
    }

    ?>
<html>
<head>
    <title>Database Check</title>
</head>
<body>
    <?php 
        //3 perform database query
        $result=mysql_query("SELECT * FROM recent_works",$connection);
        if (!$result) {
            die("Database query failed:" . mysql_error());
        }

        //4 use returned data 
        while ($row= mysql_fetch_assoc($result)) {  
            echo "<div class='work_item'>";
            echo "<img src='{$row['image']}' alt=''>";
            echo "<h2>{$row['title']}</h2>";
            echo "<p>{$row['short_discription']}</p>";
            echo "</div>";
        }
     ?>
</body>
</html>
<?php 
    //5 close connection
    mysql_close($connection);
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:17:26.997

从数据库中获取数据总是会涉及到某种程度的阻塞。问题是您要获取多少数据。您的示例表明您正在从表中选择所有内容并获取所有数据以打印到页面上。因此，表中有多少行，每列中存储了多少数据，以及有多少数据被传输到客户端，这些都是速度的供应因素。此外，您必须考虑连接到数据库也有成本。

以下是我可以对上述代码提出的一些建议：

1.  不要使用旧的 mysql 扩展（mysql_* 函数），而是考虑使用更新的 MySQLi 扩展，它可以帮助你做旧扩展不能做的事情；像[异步查询](http://php.net/mysqli.reap-async-query)。在新开发中使用旧的 mysql 扩展也是**非常不鼓励**的，因为它目前处于弃用计划中。有关更多信息，请参阅PHP 手册中的[MySQL：选择 API](http://php.net/manual/en/mysqlinfo.api.choosing.php)。
2.  检查[phpinfo()](http://php.net/phpinfo)以确保您没有使用[输出缓冲](http://php.net/manual/en/outcontrol.configuration.php#ini.output-buffering)（这需要在将数据发送到客户端之前缓冲一定数量的数据）。这可能会导致客户端等待，直到准备好发送数据。尽快将一些 HTML 内容推送到客户端可以帮助改善用户体验。
3.  不要`SELECT * FROM table`在查询中使用，而是考虑明确选择每个查询所需的字段：`SELECT image,title,short_discription FROM recent_works`
4.  如果有很多数据（可能超过一百行），请考虑使用**分页**并将查询[限制](http://dev.mysql.com/doc/refman/5.0/en/select.html)为每次页面视图的特定行数。这可以大大减少每个请求的 DBM 和 PHP 之间的流量。
5.  If it's a high load site consider using a [persistent database connection](http://php.net/manual/en/mysqli.persistconns.php).

# java - 以hasNext方法为条件的循环不断抛出ArrayOutOfBounds异常？（爪哇）

> ID：13737121
> 
> 赞同：1
> 
> 时间：2012-12-06T04:46:52.537
> 
> 标签：java, arrays, file, bounds, out

我正在使用 GUI 进行用户名/密码登录。我正在使用带有文件名的 hasNext() 扩展名的 while 循环作为将文件中的信息存储到数组中的条件，以便我可以将用户的输入与文件中存储的信息进行比较。然后我使用 if 语句进行比较。如果匹配，则程序将用户重定向到另一个类或方法，否则它不做任何事情。

问题是我一直在抛出一个 ArrayOutOfBounds 异常，因为它试图从文件中读取*第一*行。

我扔了一个 System.out.println(userLogin[i]) 来查看它是否一直循环，但它一定不能，因为该行从不输出。我的猜测是，一旦进入 while 循环，它就会首先停止。我该如何解决？非常感谢您的帮助。如果您需要我澄清这个问题，请在您的评论中说出来，我将重新编辑我的帖子以尽可能清晰。这是我的代码如下：

```
 private class ButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e){
        String usernameInput = "";
        char passwordInput[] = {};

        if(e.getSource() == okButton){
            usernameInput = usernameTF.getText();
            passwordInput = passwordTF.getPassword();
            try{
                verifyLogin(usernameInput, passwordInput); //sends input to be verified
            }catch (IOException ed){
                JOptionPane.showMessageDialog(null, "There was a problem " +
                        "retrieving the data.");
            }
        }else if (e.getSource() == cancelButton){
            setVisible(false);
            dispose();
        }
    }

} 
```

那是应该将用户输入的用户名和密码发送到检查文件中存储的内容是否匹配的方法的类和方法。

这是验证输入是否匹配的方法：

```
public void verifyLogin(String username, char[] password) throws IOException {
    File myFile = new File("Accounts.txt");
    Scanner inputFile = new Scanner(myFile);

        while (inputFile.hasNext()) {
            int i = 0;

            this.userLogin[i] = inputFile.next();
            System.out.println(userLogin[i]);  //says this is where the OutOfBounds occurs
            this.passLogin[i] = inputFile.nextLine();
            this.passwordCheckLogin = this.passLogin[i].toCharArray();

            if((this.userLogin[i] == username) && (this.passwordCheckLogin == password)){
                JOptionPane.showMessageDialog(null, "Access Granted");
                inputFile.close();
                break;
            }

            i++;

        }

} 
```

文件中的信息是这样写的（左边是用户名，右边是密码）：

```
John001 bananas
Mike001 123chocolate 
```

谢谢！

这是整个代码，抱歉之前没有包含它。希望这可以帮助你们更好地理解我的问题。再次感谢您抽出时间来回答。

```
import java.util.Scanner;
import java.io.*;
import javax.swing.*;
import java.awt.event.*;

public class DeskLogin extends JFrame {

private final int WINDOW_WIDTH = 200;
private final int WINDOW_HEIGHT = 300;
private JLabel usernameLabel;
private JLabel passwordLabel;
private JButton okButton;
private JButton cancelButton;
private JTextField usernameTF;
private JPasswordField passwordTF;
private JPanel loginPanel;
private String userLogin[] = {};
private String passLogin[] = {};
private char passwordCheckLogin[] = {};

public DeskLogin(){
super("Login");
setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setLocationRelativeTo(null);
setVisible(true);
buildPanel();
add(loginPanel);

}

private void buildPanel() {
usernameLabel = new JLabel("Username: ");
passwordLabel = new JLabel("Password: ");
usernameTF = new JTextField(10);
passwordTF = new JPasswordField(10);
okButton = new JButton("OK");
cancelButton = new JButton("Cancel");

loginPanel = new JPanel();

loginPanel.add(usernameLabel);
loginPanel.add(usernameTF);
loginPanel.add(passwordLabel);
loginPanel.add(passwordTF);
loginPanel.add(okButton);
loginPanel.add(cancelButton);

okButton.addActionListener(new ButtonListener());
cancelButton.addActionListener(new ButtonListener());
}

public void verifyLogin(String username, char[] password) throws IOException {
File myFile = new File("Accounts.txt");
Scanner inputFile = new Scanner(myFile);

inputFile.useDelimiter(" ");

    while (inputFile.hasNext()) {
        int i = 0;

        this.userLogin[i] = inputFile.next();
        System.out.println(userLogin[i]);
        this.passLogin[i] = inputFile.nextLine();
        this.passwordCheckLogin = this.passLogin[i].toCharArray();

        if((this.userLogin[i] == username) && (this.passwordCheckLogin == password)){
            JOptionPane.showMessageDialog(null, "Access Granted");
            inputFile.close();
            break;
        }

        i++;

    }

}

private class ButtonListener implements ActionListener {

public void actionPerformed(ActionEvent e){
    String usernameInput = "";
    char passwordInput[] = {};

    if(e.getSource() == okButton){
        usernameInput = usernameTF.getText();
        passwordInput = passwordTF.getPassword();
        try{
            verifyLogin(usernameInput, passwordInput);
        }catch (IOException ed){
            JOptionPane.showMessageDialog(null, "There was a problem " +
                    "retrieving the data.");
        }
    }else if (e.getSource() == cancelButton){
        setVisible(false);
        dispose();
    }
}

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:57:05.733

你试试换行来读`System.out.println(this.userLogin[i]);`怎么样？我的猜测是您有两个名为 userLogin 的变量，其中一个是该函数的本地变量（另一个是实例变量）。`this.userLogin`不一样`userLogin`。抱歉，如果我离开了。无意冒犯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:10:18.820

据我所知，将 userLogin 设置为长度为零的数组，并且永远不要增加它：

```
private String userLogin[] = {}; 
```

因此访问 userLogin 的任何元素都应该引发异常。真的和`inputFile.next()`通话没有任何关系。你可以做一个孤立的`userLogin[0] = null`，它应该会爆炸。

我建议您使用可以增量构建的 ArrayList 或其他动态大小的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:18:55.303

您将这 3 个设置作为数组，但您从不将它们用作数组，并且您也永远不会在 verifyLogin 之外使用它们。

```
private String userLogin[] = {};
private String passLogin[] = {};
private char passwordCheckLogin[] = {}; 
```

这将需要额外的代码，但应该让您朝着正确的方向前进，我已经为这 3 个创建了局部变量并调整了代码以使用它们。

```
public void verifyLogin(String username, char[] password) throws IOException {
    File myFile = new File("Accounts.txt");
    Scanner inputFile = new Scanner(myFile);
    String userLogin = null;
    String passLogin = null;
    char[] passwordCheckLogin = null;

    while (inputFile.hasNext()) {
        userLogin = inputFile.next();
        if (inputFile.hasNext()){
            passLogin = inputFile.next();
            passwordCheckLogin = passLogin.toCharArray();
        }
        else {
            //Need to alert that we have an improperly formatted Accounts.txt
            break;
        }
        if((userLogin == username) && (passwordCheckLogin == password)){
            JOptionPane.showMessageDialog(null, "Access Granted");
            inputFile.close();
            break;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:57:31.340

首先，您不需要扫描仪。BufferedReader 更简单。您可以使用 split 将单词分成一行。另外，请注意流关闭的位置（最后）。此外，我使用*equals*而不是*==*重新调整了条件。最后，一个 String.valueOf 允许将 char 数组与 String 进行比较。

```
File myFile = new File("Accounts.txt");
BufferedReader inputFile = new BufferedReader(
       new InputStreamReader(new FileInputStream(myFile)));

String line;
while ((line = inputFile.readLine())!=null) {
    int i = 0;

    this.userLogin[i] = line.split(" ")[0];
    System.out.println(userLogin[i]);
    this.passLogin[i] = line.split(" ")[1];
    this.passwordCheckLogin = this.passLogin[i].toCharArray();

    if (this.userLogin[i].equals(username) 
      && String.valueOf(this.passwordCheckLogin).equals(password)){
        JOptionPane.showMessageDialog(null, "Access Granted");                
        break;
    }

    i++;    
}
inputFile.close(); 
```

# asp.net-mvc - 在 ASP.NET MVC 中加载 PartialView 后如何运行 javascript？

> ID：13737124
> 
> 赞同：1
> 
> 时间：2012-12-06T04:47:24.140
> 
> 标签：asp.net-mvc, jquery

我正在尝试让 jQuery 插件 meioMask 在 MVC 部分视图中工作。

作为试验，以下工作：

```
<head>
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="jquery.meio.mask.min.js" charset="utf-8"></script>
<script type="text/javascript">
    jQuery(function($) {
        $('#StartTimeText').setMask('time');
});
</script>
</head>

<body>
<input type="text" id="StartTimeText" />
</body> 
```

文本编辑框应用了蒙版编辑。但是，我的文本编辑框位于 MVC 局部视图中，当用户单击主视图中的某个项目时会显示该视图。在主视图中，`<head>`我添加了以下内容：

```
<script src="@Url.Content("~/Scripts/jquery-1.8.3.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.meio.mask.min.js")" type="text/javascript"></script> 
```

在`CustomFormPartialView.cshtml`中，我有以下内容：

```
<script type="text/javascript">
    jQuery.ajax(
      function ($) {
        $('#StartTimeText').setMask('time');
      }
    );
</script>

<input type="text" id="StartTimeText" /> 
```

但是文本框仍然是一个没有应用编辑掩码的常规文本框。我认为这是因为 setMask 函数没有运行。我也尝试过使用`jQuery.get`，`jQuery.post`它们都没有任何区别。

抱歉，如果已经问过这个问题，我已经尝试了其他解决方案，但没有任何运气。我在这个领域有点新，所以如果有人可以发布尽可能完整的代码示例，我将不胜感激。谢谢。

编辑：

按照 JasCav 的建议，我将以下内容放在`<head>`文件的部分中。据我所知，ajax 函数根本没有运行。如果有帮助的话，这是使用 DevExpress 的 MVC 调度程序。我在 FireBug 中没有收到任何错误。

```
<script type="text/javascript">
  jQuery.ajax({
    url: '/WebTMS_MVC/Calendar/SchedulerPartial',
    type: 'POST',
    success: function (data, textStatus, xhr) {
      $('#StartTimeText').setMask('time');
    }
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:04:06.840

您可以使用 jQuery 的 ajax 函数提供了许多回调，您可以使用这些回调在完成 ajax 调用后执行特定的操作（成功和完成是两个）。[在jQuery 的 ajax 函数文档中](http://api.jquery.com/jQuery.ajax/)查看更多信息。

```
$.ajax({
  url: yourUrl,
  type: "GET",
  data: formData,
  success: function(data) {
    // Do your stuff here.
}); 
```

# entity-framework - groupby 到 LINQ 中的多个字段目前 - 我有类似这样的 linq

> ID：13737126
> 
> 赞同：0
> 
> 时间：2012-12-06T04:47:34.280
> 
> 标签：entity-framework

> **可能重复：**
> [linq + groupby - 在选择查询中添加字段](https://stackoverflow.com/questions/13636446/linq-groupby-add-fields-in-select-query)

我想用多个字段进行分组，例如 q = q.GroupBy(c => c.Id, c.name,c.age,c.dob)

还如何将它们放入选择查询中？这样我也会在选择查询中获得新添加的字段。

```
q = q.GroupBy(c => c.Id)
                       .Select(g => new View
                       {
                           Id = g.Key,
                           ENAME= string.Join(",", g.Select(x => x.CaseApprover).ToList())
                       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:39:55.700

要按多个字段分组，请执行以下操作：

```
var query = q.GroupBy(c => new { c.Id, c.name, c.age, c.dob }); 
```

如果您想要其余部分的答案，您必须澄清问题的第二部分（根据我上面的评论）。

# android - Android Jenkins 部署

> ID：13737127
> 
> 赞同：2
> 
> 时间：2012-12-06T04:47:44.873
> 
> 标签：android, jenkins

我正在寻找通过 Jenkins 为 Beta/QA 测试人员自动化 Android 构建部署的方法。是否有任何解决方案可以让我通过 jenkins 将我的 android apk 部署到某种测试工具，我的 QA 和 beta 测试人员可以从那里下载和安装应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:56:42.157

现在在 Jenkins 上几乎所有的东西都可以在 Android 上开箱即用。你可以 ：

*   使用 Android Emulator Plugin 并使用 ant debug test 执行测试
*   使用 ant emma installd test 获取 emma 覆盖率和报告（您必须将 emma 报告导出为人工制品）
*   您甚至可以使用特殊的测试运行器在 jenkins 中获取单元测试报告（也可以将报告导出为人工制品）：[缺少的 Android 测试运行](http://code.google.com/p/the-missing-android-xml-junit-test-runner/)器或[Zutubi 测试](https://github.com/jsankey/android-junit-report)运行器。
*   由于 Jenkins 的 Lint 插件，您也可以获得 lint 分析和结果。

用 ant 能做的一切，也可以用 maven 做更多的工业配置。

我们实际上正在努力更好地集成其他测试技术并更好地与 Sonar 集成，这个主题应该在 2013 年取得一些进展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:57:17.220

要将您的 APK 分发给 beta 测试人员，您可以尝试[HockeyApp](http://hockeyapp.net/)或[Google Play alpha/beta 分发](https://developer.android.com/distribute/googleplay/developer-console.html#alpha-beta)等服务，它们都有[Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Hockeyapp+Plugin) [插件](https://wiki.jenkins-ci.org/display/JENKINS/Google+Play+Android+Publisher+Plugin)来上传您的构建。

通过在您的应用程序中使用这些服务及其 SDK，您可以自动从测试人员那里获得使用情况统计信息和崩溃报告。

# c# - GridView 宽度基于 ItemsSource

> ID：13737128
> 
> 赞同：0
> 
> 时间：2012-12-06T04:47:59.167
> 
> 标签：c#, xaml, gridview, windows-runtime

我目前正在使用 a`GridView`来显示用户可以滑动浏览的图像列表。当它们接近列表末尾时，新图像会通过使用 a `ObservableCollection`that implements加载`ISupportIncrementalLoading`。

如何更改单元格大小以匹配图像的大小？图像有时是纵向的，有时是横向的，有时是不均匀的纵横比；但是，`GridView`坚持所有单元格的宽度相同。

例如，如果我使用以下内容：

```
<GridView
    x:Name="itemGridView"
    AutomationProperties.AutomationId="ItemsGridView"
    AutomationProperties.Name="Items"
    TabIndex="1"
    Grid.RowSpan="2"
    Padding="116,136,116,46"
    SelectionMode="None"
    DataFetchSize="10"
    IncrementalLoadingThreshold="5"
    ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
    IncrementalLoadingTrigger="Edge"
    IsSwipeEnabled="false">
    <GridView.ItemTemplate>
        <DataTemplate>
            <Grid HorizontalAlignment="Left">
                <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                    <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
                </Border>
                <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                    <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,5,0"/>
                </StackPanel>
            </Grid>
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

我最终得到的所有时间都与第一张图像的宽度相同。如果我尝试设置图像宽度（我有一个返回图像宽度的数据绑定属性），一些图像最终会变窄，但它们所在的单元格仍然与其他所有图像的宽度相同。

```
<Image Width="{Binding ImageWidth}" Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/> 
```

设置层次结构中任何项目的宽度似乎无济于事 - 即使将其发挥到极致也无济于事 - 例如

```
<DataTemplate>
    <Grid HorizontalAlignment="Left"  Width="{Binding ImageWidth}">
        <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Width="{Binding ImageWidth}">
            <Image Width="{Binding ImageWidth}" Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
         </Border>
         <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
             <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,5,0"/>
         </StackPanel>
     </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:18:17.307

有两个 ItemsPanelTemplate-s 支持增量加载：VirtualizingStackPanel 和 WrapGrid。WrapGrid 不允许不同项目的大小。VirtualizingStackPanel 允许可变大小的项目，但在一行/列中显示项目。所以如果你想要一个不同的布局，你需要一个 VirtualizingPanel 的自定义实现。

但我不明白你到底想要什么。如果你想要一个网格，那么一行或一列中的所有项目将具有相同的高度或宽度。你想要一个虚拟化的 VariableSizedWrapGrid 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:15:00.600

看看[VariableSizedWrapGrid](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.variablesizedwrapgrid)

尝试将此 xaml 添加到您的 GridView 声明中：

```
<GridView.ItemsPanel>
    <ItemsPanelTemplate>
        <VariableSizedWrapGrid />
    </ItemsPanelTemplate>
</GridView.ItemsPanel> 
```

# php - 在回发期间将数据输入的值保留在占位符中

> ID：13737131
> 
> 赞同：0
> 
> 时间：2012-12-06T04:48:05.327
> 
> 标签：php, html

如何在回发期间将数据输入的值保留在占位符中

```
<input type="text" name="name" value="<?PHP $name;?>" placeholder="Enter Name"/> 
```

当php发现任何错误并将其发回时，数据输入全部消失，用户必须重新输入所有信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:51:02.553

做什么`value="<?PHP $name;?>"`？这应该打印变量吗？您需要这样做：

```
<?= $name; ?> 
```

或者

```
 <?php echo $name;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:54:32.993

```
<?php if empty($name){
$name='Enter Name';
} else {}?>

<input type="text" name="name" <?php echo $name;?> placeholder="Enter Name"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:50:26.237

尝试这个：

```
<input type="text" name="name" value="<?PHP echo empty($_POST['name'])?'Enter Name':$_POST['name'];?>" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T04:53:31.410

在您的 PHP 中使用您的 $_POST / $_GET 变量来恢复您的用户数据：

```
<input type="text" name="name" value="<?= $_POST['name'] ?>" placeholder="Enter Name"/> 
```

其中 $_POST['name'] 包含通过表单的 POST 请求发送的数据，而 'name' 是您输入的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T04:55:19.543

尝试这个;

`<input type="text" name="name" value="<PHP if (isset($name)){ echo $name; }?>"placeholder="Enter Name"/>`

如果 $name 没有提前提交，则 isset 将处理任何未定义的变量错误

# c# - 为 PowerPoint 表格设置默认字体

> ID：13737132
> 
> 赞同：0
> 
> 时间：2012-12-06T04:48:05.960
> 
> 标签：c#, powerpoint, office-interop

我可以创建包含许多单元格的 PowerPoint 表格，但默认字体（28 磅）太大。如果无法访问用户的 PowerPoint 模板，如何为我创建的表格设置字体？目前我能做的只有：

1.  创建表。
2.  用一个空格填充每个单元格，否则会忽略字体更改（尽管它可以使用 PowerPoint UI）。
3.  创建一个包含所有单元格的范围并设置字体：

    ```
    List<string> names = new List<string>();
    foreach (PowerPoint.Column column in table.Columns)
        foreach (PowerPoint.Cell cell in column.Cells) {
            cell.Shape.TextFrame.TextRange.Text = "";
            names.Add(cell.Shape.Name);
        }
    PowerPoint.ShapeRange range = ppt.ActivePresentation.Slides.Item(1).Shapes.Range(names.ToArray());
    range.TextFrame.TextRange.Font.Size = 12; 
    ```

我正在使用 C# 通过其 COM API 控制 PowerPoint 2003..2010。我的实验是使用 PowerPoint 2003。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:04:25.457

在 PPT 2010 中，这无需在单元格中输入文本即可工作（vba，但应该很容易翻译）。出于演示目的，我正在使用当前选择的表；将对该表的任何其他引用替换为 oTbl：

```
Dim oTbl As Table
Dim lCol As Long
Dim lRow As Long

Set oTbl = ActiveWindow.Selection.ShapeRange(1).Table

With oTbl
    For lCol = 1 To .Columns.Count
        For lRow = 1 To .Rows.Count
            .Cell(lRow, lCol).Shape.TextFrame.TextRange.Font.Size = 28
        Next
    Next
End With 
```

如您所见，在 PPT2003 中，您需要将文本添加到单元格中以“采用”格式（不幸的是，这严重减慢了速度）。

因为在 PPT 自动化中还有其他实例，您可能需要临时填写文本然后将其删除，您可能想要编写一个更通用的例程，您可以将形状传递给该例程。

```
With Shape.TextFrame.TextRange
  If Len(.Text) = 0 Then
    .Text = "!@#$%" ' or some other lunatic string not likely to be found in nature
  End If
End With 
```

用这个“预处理”这个形状，做任何必要的事情，然后用一个伴随例程“取消处理”它，测试是否 text = "!@#$%" 并将其设置回 "" 如果是，否则别管它。

# java - 宁静的网络服务

> ID：13737137
> 
> 赞同：0
> 
> 时间：2012-12-06T04:48:11.560
> 
> 标签：java, web-services, rest, jakarta-ee, netbeans-7

我是 JAVA 新手，我正在尝试使用 netbeans IDE 开发 restful web 服务，我有 MYSQL 数据库。我参考了 netbeans 教程来开发这个服务。我已经向实体类添加了一个方法，它返回基于行公司名称通过。我尝试了选项 test restful services，它给了我左侧的服务列表，但是当我尝试测试服务（我在实体类中手动添加的方法）时，它给了我一个 HTTP 404 错误：未找到请求资源。我不明白问题出在哪里。我使用的是 Glassfish 服务器。任何人都可以在这方面帮助我。谢谢。以下是我的代码：

**1.AbstractFacade.java**

```
public abstract class AbstractFacade<T> {
    private Class<T> entityClass;

    public AbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
    }

    protected abstract EntityManager getEntityManager();

    public void create(T entity) {
        getEntityManager().persist(entity);
    }

    public void edit(T entity) {
        getEntityManager().merge(entity);
    }

    public void remove(T entity) {
        getEntityManager().remove(getEntityManager().merge(entity));
    }

    public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    }

    public List<T> findAll() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        return getEntityManager().createQuery(cq).getResultList();
    }

    public List<T> findRange(int[] range) {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        q.setMaxResults(range[1] - range[0]);
        q.setFirstResult(range[0]);
        return q.getResultList();
    }

    public int count() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
        cq.select(getEntityManager().getCriteriaBuilder().count(rt));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        return ((Long) q.getSingleResult()).intValue();
    }
} 
```

**2.MyTableFacadeREST.java**

```
@Stateless
@Path("com.entities.mytable")
public class MyTableFacadeREST extends AbstractFacade<MyTable> {
    @PersistenceContext(unitName = "WSDataBasePU")
    private EntityManager em;

    public MyTableFacadeREST() {
        super(MyTable.class);
    }

    @POST
    @Override
    @Consumes({"application/json", "application/xml"})
    public void create(MyTable entity) {
        super.create(entity);
    }

    @PUT
    @Override
    @Consumes({"application/json", "application/xml"})
    public void edit(MyTable entity) {
        super.edit(entity);
    }

    @DELETE
    @Path("{id}")
    public void remove(@PathParam("id") Integer id) {
        super.remove(super.find(id));
    }

    @GET
    @Path("{id}")
    @Produces({"application/json", "application/xml"})
    public MyTable find(@PathParam("id") Integer id) {
        return super.find(id);
    }

    @GET
    @Override
    @Produces({"application/json", "application/xml"})
    public List<MyTable> findAll() {
        return super.findAll();
    }

    @GET
    @Path("{from}/{to}")
    @Produces({"application/json", "application/xml"})
    public List<MyTable> findRange(@PathParam("from") Integer from, @PathParam("to") Integer to) {
        return super.findRange(new int[]{from, to});
    }

    @GET
    @Path("count")
    @Produces("text/plain")
    public String countREST() {
        return String.valueOf(super.count());
    }

//added method to fetch rows corresponding to company passed
   @GET
    @Path("companyname/{companyname}")
    @Produces({"application/json", "application/xml"})
    public List<MyTable> findByCompanyname(@PathParam("companyname") String name){
       return (List<MyTable>)(MyTable)em.createNamedQuery("MyTable.findByCompanyname").setParameter("companyname",name).getResultList();
    }
    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

} 
```

**3.MyTable.java**

```
@Entity
@Table(name = "MyTable")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "MyTable.findAll", query = "SELECT m FROM MyTable m"),
    @NamedQuery(name = "MyTable.findByCompanyid", query = "SELECT m FROM MyTable m WHERE m.companyid = :companyid"),
    @NamedQuery(name = "MyTable.findByCompanyname", query = "SELECT m FROM MyTable m WHERE m.companyname = :companyname"),
    @NamedQuery(name = "MyTable.findByCompanyasset", query = "SELECT m FROM MyTable m WHERE m.companyasset = :companyasset"),
    @NamedQuery(name = "MyTable.findByAssetname", query = "SELECT m FROM MyTable m WHERE m.assetname = :assetname"),
    @NamedQuery(name = "MyTable.findByAssetdescription", query = "SELECT m FROM MyTable m WHERE m.assetdescription = :assetdescription")})
public class MyTable implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "Company_id")
    private Integer companyid;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 255)
    @Column(name = "Company_name")
    private String companyname;
    @Size(max = 255)
    @Column(name = "Company_asset")
    private String companyasset;
    @Size(max = 255)
    @Column(name = "Asset_name")
    private String assetname;
    @Size(max = 255)
    @Column(name = "Asset_description")
    private String assetdescription;

    public MyTable() {
    }

    public MyTable(Integer companyid) {
        this.companyid = companyid;
    }

    public MyTable(Integer companyid, String companyname) {
        this.companyid = companyid;
        this.companyname = companyname;
    }

    public Integer getCompanyid() {
        return companyid;
    }

    public void setCompanyid(Integer companyid) {
        this.companyid = companyid;
    }

    public String getCompanyname() {
        return companyname;
    }

    public void setCompanyname(String companyname) {
        this.companyname = companyname;
    }

    public String getCompanyasset() {
        return companyasset;
    }

    public void setCompanyasset(String companyasset) {
        this.companyasset = companyasset;
    }

    public String getAssetname() {
        return assetname;
    }

    public void setAssetname(String assetname) {
        this.assetname = assetname;
    }

    public String getAssetdescription() {
        return assetdescription;
    }

    public void setAssetdescription(String assetdescription) {
        this.assetdescription = assetdescription;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (companyid != null ? companyid.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof MyTable)) {
            return false;
        }
        MyTable other = (MyTable) object;
        if ((this.companyid == null && other.companyid != null) || (this.companyid != null && !this.companyid.equals(other.companyid))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.entities.MyTable[ companyid=" + companyid + " ]";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T16:13:48.207

问题可能是您没有为您的服务定义基本 url。您需要告诉 JAX-RS（Jersey 是 GlassFish 中的实现）它必须拦截哪个 url 模式作为您的端点（基本 url）。

实现此目的的一种方法是使用可以添加到项目中任何包的应用程序类（您也可以在 web.xml 中定义必要的）。[请参阅此答案以获取简单的 Application Class](https://stackoverflow.com/questions/23508159/jax-rs-glassfish-eclipse-a-simple-web-service-doesnt-work/23575215#23575215)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:03:39.137

首先，看看你的基本网址是什么。为此，您可以尝试在 netbeans 中单击运行（在项目中双击）。然后添加到基本 url “/com.entities.mytable”，如资源中的注释路径所示。

# c++ - 如何创建一个以队列为数据成员的类，该类在 C++ 中存储另一个类的实例

> ID：13737140
> 
> 赞同：1
> 
> 时间：2012-12-06T04:48:33.313
> 
> 标签：c++, class, include

我有一`office`门模拟兽医办公室的课程，当然该办公室处理动物。

我有另一个班级`dog`，我希望在办公室班级内生成几个狗的实例，以先进先出的顺序处理动物。

我了解在处理原始数据类型时如何使用队列，但是当涉及到队列和广告时，我对几个问题感到困惑。

在 office 头文件中如何实现队列本身？我假设它将进入公共部分，而私人部分将用于提供诊所名称，其地址等办公室的信息。（如果错了，请纠正我！）但是我不相信我可以`include <queue>`在头文件中使用来允许使用队列我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:54:13.030

根据您的描述，我将从以下顺序开始：

```
#include <queue>

class office { 
    std::queue<dog> patients;
public:
    void enter(dog const &d) { patients.push(d); }

    void treat() { 
        dog patient = patients.front(); 
        patients.pop(); 
        do_treatment(patient); 
    }
}; 
```

当然，`dog`必须在这个类之前定义类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:53:47.690

您想使用模板编程，并构建一个“模板化”队列或矢量对象。

例如

```
#inlcude<vector>

class MyFancyClass; //define elsewhere
MyFancyClass ob1,ob2 ,obn; //instantiate objects
std::vector<MyFancyClass> container;

container.push_back(ob1);
container.push_back(ob2);
container.push_back(ob3); 
```

话虽如此，您希望将指向对象的指针存储在 Queue 或 Vector 中，而不是复制对象。

# c - 挡泥板和指针数组

> ID：13737141
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:48:40.460
> 
> 标签：c, pointers, segmentation-fault

我刚刚实现了一个相当复杂的软件，但我学校的测试系统不会接受它。系统使用了所谓的mudflap库，应该能够更好地防止非法内存访问。结果，我的程序在学校的测试系统上运行时会产生段错误（我提交源代码，测试系统使用 mudflap 库自行编译它）。

我试图在我的程序中隔离有问题的代码，似乎这一切都归结为像指针数组这样简单的东西。Mudflap 似乎不喜欢他们。

下面是一段非常简单的代码，它适用于指针数组：

```
#include <stdlib.h>
int main()
{
char** rows;
rows=(char**)malloc(sizeof(char*)*3);
rows[0]=(char*)malloc(sizeof(char)*4);
rows[1]=(char*)malloc(sizeof(char)*4);
rows[2]=(char*)malloc(sizeof(char)*4);
strcpy(rows[0], "abc");
strcpy(rows[1], "abc");
strcpy(rows[2], "abc");
free(rows[0]); free(rows[1]); free(rows[2]);
free(rows);
return 0; 
```

这将产生一个带有挡泥板的段错误。在我看来，这是一个完全合法的代码。您能否向我解释一下它有什么问题，以及为什么它会产生带有挡泥板的段错误？

注意：程序需要在amd64 linux系统下使用g++编译，命令如下：

```
 export MUDFLAP_OPTIONS='-viol-segv -print-leaks';
    g++ -Wall -pedantic -fmudflap -fmudflapir -lmudflap -g file.cpp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:52:44.327

您在这里至少有一个问题：

```
char** rows;
rows=(char**)malloc(3); 
```

这分配了 3 个字节。在大多数平台上，分配器可能至少有 4 个字节，这让您可以稍微覆盖缓冲区。我猜您的挡泥板库在检查和捕获覆盖方面更加严格。

但是，如果您想要一个包含 3 个指针的数组，则`char *`可能至少需要 12 个字节。

尝试将这些行更改为：

```
char** rows;
rows=(char**)malloc(3 * sizeof(char *)); 
```

编辑：根据您修改后的代码，我同意它现在看起来是正确的。我唯一可以建议的是，它可能`malloc()`会失败并导致 NULL 指针访问。如果不是这种情况，这听起来像是一个错误或挡泥板的错误配置。

# javascript - 使用 JavaScript 将多个属性插入到 html 标签中，而不是在标签之间

> ID：13737149
> 
> 赞同：3
> 
> 时间：2012-12-06T04:49:40.680
> 
> 标签：javascript, jquery, html

在之前的任务中，我们询问了如何将新属性插入到 html 标签中，下面的代码很好地完成了这项工作，但是应该如何编码以添加多个属性，例如更改..

```
<body bgcolor="#DDDDDD"> 
```

到...

```
<body bgcolor="#DDDDDD" topmargin="0" leftmargin="0"> 
```

适用于单个属性的代码是......

```
document.getElementsByTagName("body")[0].setAttribute("id", "something"); 
```

如何修改它以插入多个属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T04:51:29.083

就像调用它两次一样简单：

```
var body = document.getElementsByTagName("body")[0];
body.setAttribute("topmargin", "0");
body.setAttribute("leftmargin", "0"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:01:35.080

使用 jQuery：

```
$('body').attr({
  topmargin: 0,
  leftmargin: 0
}); 
```

使用 JS：

自己写一个函数，比如：

```
 HTMLElement.prototype.setAttributes= function(attrs, values) {
        for(var i=0;i<attrs.length;i++){
            this.setAttribute(attrs[i] ,+values[i]);
        }
    };

    //And call it like:

    document.getElementById('custom-header').setAttributes(['topmargin','leftmargin'],['0','0']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:53:27.337

可以这样

```
document.getElementsByTagName("body")[0].setAttribute("id", "something");
document.getElementsByTagName("body")[0].setAttribute("topmargin", "0");
document.getElementsByTagName("body")[0].setAttribute("leftmargin", "0"); 
```

# python - 操作数据以进行缩放

> ID：13737153
> 
> 赞同：0
> 
> 时间：2012-12-06T04:50:49.300
> 
> 标签：python, c++

我有这个数据：

```
Game 1: 7.0/10.0, Reviewed: 1000 times
Game 2: 7.5/10.0, Reviewed: 3000 times
Game 3: 8.9/10.0, Reviewed: 140,000 times
Game 4: 10.0/10.0 Reviewed: 5 times
.
.
. 
```

我想以某种方式操纵这些数据，使每个评级都反映它被审查了多少次。

例如，第 3 场比赛的重量应该比第 4 场比赛重一点，因为它已经被审查得更多。第二场比赛的 7 应该比第一场比赛的 7 权重更大。

是否有适当的功能来进行这种缩放？以这样的方式

ScaledGameRating = OldGameRating *（一些指数函数？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:57:45.993

如何简单地将平均分数标准化（即减去 5，评分区间的中点）并乘以评论数量？这将根据评论的数量对正分或负分进行加权。

使用这种方法，您可以获得以下四场比赛的值：

```
Game 1:     2,000  (7-5)*1000
Game 2:     7,500  (7.5-5)*3000
Game 3:   546,000  (8.9-5)*140000
Game 4:        25  (10-5)*5 
```

规范化对负面评价的游戏效果很好，因为具有大量负面 (<5) 评论的游戏不会击败具有少量正面 (>5) 评论的游戏。如果您使用绝对分数而不进行归一化，情况就不会如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:00:58.477

你可以做 ：

查找总评论

对于 10 分中的评分，您只需获得
**游戏 x 评分：（（游戏 x 评论次数）/（总评论））* 10**

会给你满分 10 分。这是在所有游戏中审查的特定游戏的权重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:34:45.847

我对这个问题的看法是不同的。考虑到如果评论数量较少，剩余的评论是未知的，并且可能在 1 到 10 之间的任何地方。所以我们可以在缺失的范围内进行随机分布，并找到整个最大评论群体的平均值

```
max_freq = max(rating, key = itemgetter(1))[-1]
>>> for r,f in rating:
    missing = max_freq - f
    actual_rating = r
    if missing:
        actual_rating = sum(randint(1,10) for e in range(missing))/ (10.0*missing)
    print "Original Rating {}, Scaled Rating {}".format(r, actual_rating)

Original Rating 0.7, Scaled Rating 0.550225179856
Original Rating 0.75, Scaled Rating 0.550952554745
Original Rating 0.89, Scaled Rating 0.89
Original Rating 1, Scaled Rating 0.54975249116)

Original Rating 0.7, Scaled Rating 0.550576978417
Original Rating 0.75, Scaled Rating 0.549582481752
Original Rating 0.89, Scaled Rating 0.89
Original Rating 1, Scaled Rating 0.550458230651 
```

# performance - Embedded Linux - 在 QT 中使用多个控件和多个计时器更新多个小部件

> ID：13737156
> 
> 赞同：0
> 
> 时间：2012-12-06T04:51:03.480
> 
> 标签：performance, qt4

由于我是 QT 的新手，我在开发 QT 应用程序时遇到了一些问题。我的应用程序由多个小部件组成，其中每个小部件由多个控件组成，例如文本编辑、按钮、表格视图等，其中所有控件都将使用具有差异间隔的多个计时器进行更新。控制数据的更新是通过 TCP/IP 以太网通信进行的。

除了 GUI 很慢，一切都运行良好。意味着每当我需要显示小部件以及使用计时器更新文本编辑、Q 标签和表格视图控件时，小部件加载速度非常慢。

那么可能是什么问题？

我的 mainwindow.ui 由 20 个小部件组成，每个小部件都有 20 多个控件，每个控件都将使用计时器间隔进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:52:14.037

通常，软件工程师在获得分析报告之前不会讨论什么可能是性能问题。我建议使用[OProfile](http://oprofile.sourceforge.net/about/)来衡量整个 Linux 系统的性能。[OProfile 报告](http://oprofile.sourceforge.net/examples/)显示 CPU 时间花费在哪里：进程、库、函数/方法。有了这种信息，就很容易识别性能瓶颈，并根据更改现有应用程序来解决性能问题。

初始化 OProfile（必须安装支持 OProfile 的内核）：

```
export KREXP=dpkg -L kernel-debug | grep "vmlinux-2.6"
opcontrol --init
opcontrol --vmlinux=$KREXP --separate=kernel 
```

运行 OProfile：

```
opcontrol --stop; opcontrol --reset; opcontrol --start; 
```

运行应用程序，然后停止 OProfile：

```
opcontrol --stop 
```

基本 OProfile 报告：

```
opreport 
```

或者

```
opreport path_to_binary 
```

# java - JSmooth：如何将带有 JFrame 的 jar 转换为 exe？

> ID：13737161
> 
> 赞同：0
> 
> 时间：2012-12-06T04:51:34.533
> 
> 标签：java, swing, installation, jframe, jsmooth

我将控制台 JAR 可执行文件转换为 exe 没有问题但是我很困惑如何将 JAR 与 JFrame 或其他可用的 GUI 选项转换？我必须使用什么骨架？我的意思是我必须使用哪个包装器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:05:25.560

我们必须在 JSmooth 中使用 WINDOWED WRAPPER 作为骨架，它将处理 JFrame，现在问题可能是如果你没有[这个](http://www.dmt.com/jvm_download.htm)，那么 Jsmooth 可能无法运行。虽然我有 JVM，但 JSmooth 无法检测到它 :( 但是当我安装 Microsoft VM 时，它突然适用于所有 GUI、FILE 等功能！

# asp.net - 如何修复 Microsoft 图表控件中的 X 轴值长度

> ID：13737162
> 
> 赞同：0
> 
> 时间：2012-12-06T04:51:45.503
> 
> 标签：asp.net, c#-4.0, mschart

在我的示例中，我将 X 轴旋转到 -90。现在标签值是垂直的。有些值很大，例如“示例报价”。

由于这个巨大的值，我的标签区域增加了，图表区域减少了。

是否可以修复 Microsoft 图表控件中的 X 轴标签长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:01:51.600

我得到了这个问题的答案。

这可以通过

```
 MSChart.ChartAreas[0].AxisX.LabelAutoFitStyle = LabelAutoFitStyles.WordWrap;
       MSChart.ChartAreas[0].AxisX.IsLabelAutoFit = true; 
```

问候， 卡提克

# php - 基于链接定义函数

> ID：13737163
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:51:46.727
> 
> 标签：php, jquery

我想为我页面上的每种现有链接打开一个功能。

例子：

当我单击 .pdf 链接时，它会打开并具有 pdf 功能。如果单击 .mp3 链接，它会打开一个播放器等

但我想要一种无需编辑链接的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:14:55.973

使用 jQuery，您可以轻松地将处理程序附加到页面的所有链接。在该处理程序中，您可以测试`href`并采取任何适当的操作。如果您想阻止某些类型的链接的默认链接导航，只需调用`event.preventDefault()`这些类型：

```
$(document).on("click","a", function(e) {
   if (/\.pdf$/i.test(this.href)) {
       pdfFunction();
   } else if (/\.mp3$/i.test(this.href)) {
       playMP3(this.href);
       e.preventDefault();
   } // etc.
}); 
```

我展示的代码使用委托事件模型，以便在文档级别附加一个处理程序，而不是为每个链接附加一个处理程序。如果出于某种原因您想要每个链接一个处理程序，您可以执行`$("a").on("click",...)`或`$("a").click(...)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:16:23.120

所以，这真的取决于你想要做什么。但是，这是我的基本建议......

假设您来自网页（假设这就是链接的意思），您必须有一种方法来触发它是什么类型的链接。非常简单，您可以为不同类型的链接添加一个类来识别它们是什么。您的 HTML 可能看起来像这样：

```
<a href="http://path/to/file.mp3" class="mp3link">Some Song</a>
<a href="http://path/to/file.pdf" class="pdflink">Some PDF</a>
<a href="http://path/to/file2.pdf" class="pdflink">Some Other PDF</a> 
```

现在，您要触发链接类型。您如何实际处理发生的事情取决于您是否可以在客户端完成所有操作，或者您是否需要返回服务器进行更多工作（同样，您必须决定要做什么）。您可以使用 JavaScript（特别是 jQuery 库）来触发这些类。就像是...

```
$('.mp3link').on('click', function(e) {
  e.preventDefault(); // stop the link from being clicked

  // Define what you want to do here - ajax call back to the server or fire
  // up a client-side media player, or whatever.
});

$('.pdflink').on('click', function(e) {
  e.preventDefault(); // stop the link from being clicked

  // Define what you want to do here.
}); 
```

...等等，适用于您拥有的任何类型的交互和文件。现在，如果没有更多信息，我无法更详细地介绍，但是如果您了解应用程序中的客户端/服务器交互，那么这将为您提供一个很好的起点，让您了解如何完全连接它。

# android - 从 Android 中的 edittext 复制文本

> ID：13737167
> 
> 赞同：0
> 
> 时间：2012-12-06T04:52:25.727
> 
> 标签：android

> **可能重复：**
> [在 TextView 中选择 + 复制文本？](https://stackoverflow.com/questions/6025818/select-copy-text-in-a-textview)

1.  我可以阻止用户编辑编辑文本框中的文本吗？

2.  是否可以在不显示软键盘的情况下从 Android 的编辑文本框中复制文本？

基本上，我希望在 Android 上显示一个文本文件（例如故事），用户有机会复制和粘贴。我不希望用户能够编辑文本，也不希望在复制和粘贴时显示键盘。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:00:13.587

一种方法是您可以使用[TextView](http://developer.android.com/reference/android/widget/TextView.html)而不是 EditText 来显示文本。然后，您可以在文本附近放置一个复制图标或按钮，并使用此处的指南以编程方式复制文本：

[http://developer.android.com/guide/topics/text/copy-paste.html](http://developer.android.com/guide/topics/text/copy-paste.html)

另请参阅此线程：

[从 Android 上的 TextView 复制文本](https://stackoverflow.com/questions/2952914/copy-text-from-textview-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:15:37.723

对于防止编辑文本，只需将`android:editable="false"`您的**EditText**属性放入 xml 文件中。

而对于允许复制和粘贴，只需放入`android:textIsSelectable="true"`相同的内容。

我希望你得到你想要的。

# c# - 如何使用 Google Drive API 为域组和用户使用 Google Provisioning API？

> ID：13737169
> 
> 赞同：1
> 
> 时间：2012-12-06T04:52:33.853
> 
> 标签：c#, google-drive-api, google-apps, google-provisioning-api

使用 Google Drive API，我可以使用 OAuth2.0 初始化 DriveService 对象，但不知道如何初始化 Google Provisioning API 的 AppsService 对象以与域组和用户一起使用。我试过了

AppsService _appService = new AppsService("DOMAINNAME", "AuthenticationTokenFromDriveServiceObj");

但是，得到“无效令牌”异常。

1.  看起来 Google Provisioning API 仍然无法处理 Google Drive API。我在这里正确吗？
2.  Google 是否已弃用 Google 配置 API？参考链接[https://developers.google.com/google-apps/admin-api-deprecation-list](https://developers.google.com/google-apps/admin-api-deprecation-list)

编辑：

我从以下给出的代码中获取 Drive 服务对象： [https](https://developers.google.com/drive/delegation#instantiate_a_drive_service_object) ://developers.google.com/drive/delegation#instantiate_a_drive_service_object [在这里，我还尝试添加配置 API 范围] 然后

```
PermissionList permissions = _DriveSevice.Permissions.List("root").Fetch();
string userName = permissions.Items[0].Name;
string authenticationToken = auth.State.AccessToken;
AppsService _AppService = new AppsService("DOMAINNAME", authenticationToken);
_AppsService.RetrieveAllUsers(); //This statement errors out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:20:32.477

您只需将 setOauth2Credentials 与用于在您的应用服务实例上实例化您的 Drive 实例的 Oauth2 凭据一起使用，当然前提是您的令牌对 Drive 和 Provisioning API 的范围有效。

[以下](https://developers.google.com/google-apps/provisioning/auth)是供应 API 的 Oauth2 范围

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-10T17:18:13.867

Drive API 和 Provisioning API 的范围不同，不能共享 OAuth 凭据。您需要单独完成 Provisioning API 的 OAuth 流程，它们是完全不相关的 API。

Provisioning API 尚未被弃用。该列表适用于受弃用政策约束的 API，该政策发布在[https://developers.google.com/google-apps/admin-api-terms](https://developers.google.com/google-apps/admin-api-terms)。

# ruby-on-rails-3 - 使用 Monit 监控 Solr

> ID：13737172
> 
> 赞同：1
> 
> 时间：2012-12-06T04:52:56.317
> 
> 标签：ruby-on-rails-3, solr, monitoring, monit

我是 Solr 和 Monit 的新手。我有一个带有 Solr 的 Rails 3.2 应用程序，你如何配置 monit 来处理 Solr？

干杯，谢谢，泽克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-11T05:02:09.760

要使用 monit 处理 solr，您需要在 /etc/monit/ 目录中的 monitrc 文件中对其进行配置。

进入目录

1) cd /etc/monit

并使用 sudo 编辑 monitrc 文件。

2) sudo nano monitrc

在文件末尾链接中给出的代码之后

[https://gist.github.com/SammyLin/cc367a8a2fe552bcbb1f](https://gist.github.com/SammyLin/cc367a8a2fe552bcbb1f)

保存文件并使用重新加载监视器

3) sudo monit 重新加载

现在 monit 将处理 solr。

# jquery - jQuery Mobile 按钮 js 控件

> ID：13737180
> 
> 赞同：1
> 
> 时间：2012-12-06T04:53:44.947
> 
> 标签：jquery, jquery-mobile, jquery-events

我有一个在 jQuery mobile 中没有触发事件的按钮。它正在工作，但我不得不删除 css。它搞砸了我所有的 ul 列表。任何帮助将不胜感激

这是表单底部按钮的代码：

```
 <div class="next">                                
                <a class="btnNext">Next &gt;&gt;</a>

            </div> 
```

应该在单独的 js 文件上执行此操作：

```
init: function(){
        $('.btnNext').onclick(function(){
            if ($('input[type=radio]:checked:visible').length == 0) {

                return false;
            }
            $(this).parents('.questionContainer').fadeOut(500, function(){ 
```

这是我删除的CSS：

```
a  {
    border: 1px solid #000;
    padding: 2px 5px;
    font-weight: bold;
    font-size: 10px;
    background: #FFF;
    cursor: pointer;
 }
a:hover {
background: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:02:18.550

尝试这个：

```
 //You need use $('.btnNext').live('click',function(){ or $('.btnNext').click(function(){
    $('.btnNext').live('click',function(){
        if ($('input[type=radio]:checked:visible').length == 0) {
            return false;
        }
        //your other code
   }); 
```

# javascript - 将文本从一个 html 加载到另一个 html 文件中的两列

> ID：13737188
> 
> 赞同：2
> 
> 时间：2012-12-06T04:54:22.360
> 
> 标签：javascript, jquery, html

我有一个带有文本的 xhtml 文件和另一个带有表格和两列的 html 文件。我想要做的是，我需要将文本从 xhtml 文件加载到 html 文件的两列。在加载第二列时应该有来自第一列的数据的延续。这怎么能用javascript来完成呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:56:58.060

您可以使用 jQuery`get()`函数从表中检索内容。

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

```
$.get('ajax/test.html', function(data) {
  $('.result').html(data);
  alert('Load was performed.');
}); 
```

此示例获取请求的 HTML 片段并将其插入页面。

# regex - 提取正则表达式中的特定单词

> ID：13737191
> 
> 赞同：0
> 
> 时间：2012-12-06T04:54:41.290
> 
> 标签：regex

我在这里用正则表达式有点挣扎。

我有这样一句话：“约翰史密斯的出生日期是什么时候”。我想提取关键字 [date ofbirth] 但我不知道该怎么做，因为句子后面也出现了 of 这个词。

谢谢，格温达尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:13:12.407

如果您只想检查字符串是否存在，请`date of birth`使用该`String contains(CharSequence s)`方法。

**用法**

```
String str="what is the date of birth of John Smith";
str.contains("date of birth"); // Returns in Boolean whether the char sequence is present in s 
```

如果你想知道指定子字符串的第一次出现使用`int indexOf(String str)`方法

**用法**

```
String str="what is the date of birth of John Smith";
str.indexOf("date of birth"); // Returns the first pos of occurence of the substring 
```

查看此[页面](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)以获取有关字符串的更多信息

# mysql - 期望错误的 MySQL 命令的错误消息

> ID：13737193
> 
> 赞同：0
> 
> 时间：2012-12-06T04:54:52.493
> 
> 标签：mysql, linux

我在linux中有这个命令

```
mysql -u xyz -p -e "show databases" 
```

其中，用户“ **xyz** ”不存在。当它要求输入密码时

1.  `echo $?`如果我不提供任何密码，它不会在我运行命令时提供错误消息或非零值。

2.  如果我给出密码，它会给出错误信息

有什么理由吗？以及我必须做些什么才能获得此命令的错误消息的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:26:30.840

尝试：

```
mysql -u xyz -pYourPassword -e "show databases" 
```

或者：

```
mysql -u xyz --password=YourPassword -e "show databases" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:18:38.257

我想除了逃跑别无他法——

```
mysql -u xyz -p -e "use mysql" 
```

因为不存在的用户不存在 mysql 数据库。

# objective-c - 可以在调用实例方法时释放 Objective-C 对象吗？

> ID：13737201
> 
> 赞同：11
> 
> 时间：2012-12-06T04:55:45.010
> 
> 标签：objective-c, multithreading

考虑以下情况：Objective-C 类的一个实例被一个强引用和一个弱引用引用（在 ARC 下）。在线程 X 上，通过弱引用在实例上调用方法。在线程 Y 上，强引用被破坏，因此不再有对该实例的强引用，它应该被释放。

这种情况是否可能，因为当方法在线程 X 上执行时，对象可能在线程 Y 上被释放？同样，在对象上调用方法是否会“保留”该对象，直到该方法返回？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T02:54:23.643

ARC 实际上在调用实例方法之前确实保留了弱引用，并在调用后释放。

我正在研究这个问题，并在向他展示这个 stackoverflow 问题后被一位同事纠正。他指出了这一点：http: [//lists.apple.com/archives/objc-language/2012/Aug/msg00027.html](http://lists.apple.com/archives/objc-language/2012/Aug/msg00027.html)

果然，在程序集中，ARC 围绕弱引用的调用保留和释放。

有一次你会想听 CLANG_WARN_OBJC_RECEIVER_WEAK 用于 nil 检查，当 nil 可能导致错误时。

```
if (self.weakRefToParent) {
    //self.weakRefToParent could be dealloced and set to nil at this line
    NSString *name = [self.weakRefToParent name]; //CLANG_WARN_OBJC_RECEIVER_WEAK warning
    [self.namesArray addObject:name];  //name is nil, NSInvalidArgumentException
} 
```

这是更安全的方法：

```
Parent *strongRefToParent = self.weakRefToParent;
if (strongRefToParent) {
    NSString *name = [strongRefToParent name];
    [self.namesArray addObject:name];
} 
```

# javascript - 修改网页的DOM

> ID：13737202
> 
> 赞同：0
> 
> 时间：2012-12-06T04:55:47.237
> 
> 标签：javascript, dom

网页的结构是这样的：-

```
<div id='abc'>
  <div class='a'>Some contents here </div>
  <div class='b'>Some other contents< </div>
</div> 
```

我的目标是在上述结构中的 a 类之后添加它。

```
<div class='a'>Some other contents here </div> 
```

所以最终的结构看起来像这样：-

```
 <div id='abc'>
      <div class='a'>Some contents here </div>
      <div class='a'>Some other contents here </div>
      <div class='b'>Some other contents< </div>
    </div> 
```

有没有更好的方法可以使用 DOM 属性来做到这一点。我正在考虑解析内容和更新的幼稚方式。

如果我不清楚我的疑问，请发表评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:05:23.843

创建所需的元素，为其提供所需的属性、子元素、innerHTML 等，然后附加它：

```
var parent = document.getElementById('abc'),
    ele = document.createElement('div');

ele.setAttribute('class', 'a');
ele.innerHTML = "Some other contents here";

parent.appendChild(ele);​ 
```

[小提琴](http://jsfiddle.net/PmXNX/1)

你可以偷懒，只设置`innerHTML`of `#abc`，但我认为这种方法更灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:06:59.050

我想这就是你要找的[http://jsfiddle.net/cExRS/](http://jsfiddle.net/cExRS/)
代码就是这个

```
element = document.getElementById('abc');
element.innerHTML = "<div class='a'>Some other contents here </div>" + element.innerHTML; 
```

你真的应该试试jquery，它让事情变得容易多了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:45:49.423

Liked 指出有前置的答案，[在 JS 中插入同级节点](https://stackoverflow.com/questions/8771921/insert-sibling-node-in-js) 以及[如何使用常规 JavaScript 实现前置和附加？](https://stackoverflow.com/questions/3391576/how-can-i-implement-prepend-and-append-with-regular-javascript)

```
<html>
<head>
<script type="text/javascript">
function add(myClass) {
    var root = document.getElementById('abc');
    var last = null;
    for (var i = 0; i < root.childNodes.length; i++) {
        var child = root.childNodes[i];
        if (!child.className) continue;        
        var pat = new RegExp(myClass,'g');    
        var m = pat.exec(child.className);      
        if (!m) {
          if (!last) continue;
            var div = document.createElement('div');
            div.appendChild(document.createTextNode('After A content'));    
            root.insertBefore(div, last.nextSibling);        
            break;            
        }
        last = child;                     
    }
}
</script>
</head>
<body>
<div id='abc'>
  <div class='d'>Some contents here </div>
  <div class='b'>Some other contents </div>
  <div class='a'>Content A</div>
  <div class='a'>Content A1</div>
  <div class='a'>Content A2</div>
  <div class='a'>Content A3</div>
  <div class='b'>Some other contents </div>
</div>
<a href="#" onclick="add('a')">Add div</a>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T05:02:35.040

这个问题是重复的：s

[如何使用常规 JavaScript 实现前置和附加？](https://stackoverflow.com/questions/3391576/how-can-i-implement-prepend-and-append-with-regular-javascript)

这叫做前置

# iphone - 更新 SQLite 中的浮点值

> ID：13737203
> 
> 赞同：2
> 
> 时间：2012-12-06T04:55:53.270
> 
> 标签：iphone, ios, sqlite

我正在尝试阅读`float value`，我将其值更新为`SQLite`数据库。我`REAL`用作一种浮点值。以下是我用来更新的代码`SQLite`：

```
//update download percent
sqlite3_stmt    *statement;
const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &myDB) == SQLITE_OK)
{
    const char *update_stmt = [[NSString stringWithFormat:@"UPDATE myTable SET floatValueColumn=%f WHERE id=%i", myProgress, myTargetId] UTF8String];

    if( sqlite3_prepare_v2(myDB, update_stmt, -1, &statement, NULL) == SQLITE_OK )
    {
        if(SQLITE_DONE != sqlite3_step(statement)){ //sql fail

            NSLog(@"error: %s", sqlite3_errmsg(myDB));
        }
        sqlite3_reset(statement);
        // Finalize and close database.
        sqlite3_finalize(statement);
    }
    // close database
    sqlite3_close(myDB);
} 
```

使用上述代码时没有错误，我按照此链接的指南读取浮点值[How do you read floating numbers (REAL) from a sqlite database on the iphone？](https://stackoverflow.com/questions/1534931/how-do-you-read-floating-numbers-real-from-a-sqlite-database-on-the-iphone)，但我不知道为什么我没有得到我的期望值。

`UPDATE`：我使用以下方法创建我的数据库文件：

```
NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc]
                initWithString: [docsDir stringByAppendingPathComponent:
                                 @"mydbs.db"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: databasePath ] == NO)
{
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &myDB) == SQLITE_OK)
    {
        char *errMsg;
        const char *sql_stmt =
        "CREATE TABLE IF NOT EXISTS MYTABLE (MYFLOATVALUECOLUMN REAL)";

        if (sqlite3_exec(myDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
        {
            //alert
        }
        sqlite3_close(myDB);
    } else {
        //alert
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:53:29.913

有几件事：

1.  您应该检查*每次* `sqlite3_xxx()`调用的返回码。在您的示例中，您没有检查`sqlite3_prepare_v2()`. 因此，我们无法知道您是否执行了后续`sqlite3_step()`调用。

2.  出于诊断目的，如果您的程序的行为不像您预期​​的那样，在您的`INSERT`and`UPDATE`语句之后，尤其是那些带有`WHERE`子句的语句之后，您应该重新检索这些值并确认：

    *   它找到了与您的`WHERE`子句匹配的行；和

    *   存储的值是您所期望的。

    在您的代码示例中，您没有表明您使用相同的`WHERE`子句从数据库中检索了值，您实际上找到了一行，并且该值是正确的。

我知道这一切听起来都很简单，但显然你没有做这些步骤之一。如果没有看到您的代码，我们不可能知道您的挑战的来源是什么。但是，如果您不注意上面的第 1 点和第 2 点，您甚至不应该费心与我们共享代码。

下面，让我与您分享我认为您应该编写的那种代码。这满足上述两个标准。正如您将看到的，这段代码正确地执行了每个步骤，并且一切正常。

另请注意，我在下面的代码中进行了更微妙的改进，而不是使用`NSString`类方法构建 SQL 语句`stringWithFormat`，我*总是*将`?`占位符用于我的 SQL 语句中的任何变量值，然后使用这些`sqlite3_bind_xxx()`方法来设置这些值。您应该始终在 SQL 语句中“绑定”变量值。这不仅是一种很好的做法，而且可以避免您担心在`TEXT`列中引用值，保护您免受 SQL 注入攻击等。

无论如何，这里有一些代码：

```
//  ViewController.m
//  sqlite demo

#import "ViewController.h"
#import <sqlite3.h>

@interface ViewController ()
{
    sqlite3 *database;
}

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self testSqlite];
}

#pragma mark - SQLite methods

// test my database interaction

- (void)testSqlite
{
    if (![self openDb])
        return;

    if (![self dropTable])
    {
        [self closeDb];
        return;
    }

    if (![self createTable])
    {
        [self closeDb];
        return;
    }

    double initialStoredValue = 0.1;
    sqlite3_int64 rowId = [self insertRowWithDouble:initialStoredValue];
    if (rowId < 0)
    {
        [self closeDb];
        return;
    }

    double retrievedValue = [self selectDoubleForRow:rowId];
    NSLog(@"%s inserted row with value of %f, retrieved value of %f", __FUNCTION__, initialStoredValue, retrievedValue);

    double newValue = 0.2;
    if (![self updateRow:rowId withDouble:newValue])
    {
        [self closeDb];
        return;
    }

    retrievedValue = [self selectDoubleForRow:rowId];
    NSLog(@"%s updated row with value of %f, retrieved value of %f", __FUNCTION__, newValue, retrievedValue);

    if (![self closeDb])
        return;
}

// return TRUE if successful, FALSE if not

- (BOOL)openDb
{
    NSString *documentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *databasePath = [documentsPath stringByAppendingPathComponent:@"vdos.db"];

    if (sqlite3_open([databasePath UTF8String], &database) != SQLITE_OK)
    {
        NSLog(@"%s database open failed", __FUNCTION__);
        return FALSE;
    }

    return TRUE;
}

// return TRUE if successful, FALSE if not

- (BOOL)dropTable
{
    const char *sql = "DROP TABLE IF EXISTS mytable";
    char *errmsg;

    if (sqlite3_exec(database, sql, NULL, NULL, &errmsg) != SQLITE_OK)
    {
        NSLog(@"%s table drop failed: \"%s\"", __FUNCTION__, errmsg);
        return FALSE;
    }

    return TRUE;
}

// return TRUE if successful, FALSE if not

- (BOOL)createTable
{
    const char *sql = "CREATE TABLE IF NOT EXISTS mytable (id INTEGER PRIMARY KEY AUTOINCREMENT, float_column REAL)";
    char *errmsg;

    if (sqlite3_exec(database, sql, NULL, NULL, &errmsg) != SQLITE_OK)
    {
        NSLog(@"%s table create failed: \"%s\"", __FUNCTION__, errmsg);
        return FALSE;
    }

    return TRUE;
}

// return the primary key of the inserted table
//   -1 = failure

- (sqlite3_int64)insertRowWithDouble:(double)value
{
    sqlite3_stmt *statement;
    const char *sql = "INSERT INTO mytable (float_column) VALUES (?)";

    if (sqlite3_prepare(database, sql, -1, &statement, NULL) != SQLITE_OK)
    {
        NSLog(@"%s prepare failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return -1;
    }

    if (sqlite3_bind_double(statement, 1, value) != SQLITE_OK)
    {
        NSLog(@"%s column bind failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return -1;
    }

    if (sqlite3_step(statement) != SQLITE_DONE)
    {
        NSLog(@"%s step failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return -1;
    }

    if (sqlite3_finalize(statement) != SQLITE_OK)
    {
        NSLog(@"%s finalize failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return -1;
    }

    return sqlite3_last_insert_rowid(database);
}

// return float_column value for row with particular rowId

- (double)selectDoubleForRow:(sqlite3_int64)rowId
{
    sqlite3_stmt *statement;
    const char *sql = "SELECT float_column FROM mytable WHERE id = ?";

    if (sqlite3_prepare(database, sql, -1, &statement, NULL) != SQLITE_OK)
    {
        NSLog(@"%s prepare failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return FALSE;
    }

    if (sqlite3_bind_int64(statement, 1, rowId) != SQLITE_OK)
    {
        NSLog(@"%s column bind failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        sqlite3_finalize(statement);
        return FALSE;
    }

    if (sqlite3_step(statement) != SQLITE_ROW)
    {
        NSLog(@"%s step failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        sqlite3_finalize(statement);
        return FALSE;
    }

    double value = sqlite3_column_double(statement, 0);

    if (sqlite3_finalize(statement) != SQLITE_OK)
    {
        NSLog(@"%s finalize failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return FALSE;
    }

    return value;
}

// return the primary key of the inserted table
//   -1 = failure

- (BOOL)updateRow:(sqlite3_int64)rowId withDouble:(double)value
{
    sqlite3_stmt *statement;
    const char *sql = "UPDATE MYTABLE SET float_column = ? WHERE id = ?";

    if (sqlite3_prepare(database, sql, -1, &statement, NULL) != SQLITE_OK)
    {
        NSLog(@"%s prepare failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return FALSE;
    }

    if (sqlite3_bind_double(statement, 1, value) != SQLITE_OK)
    {
        NSLog(@"%s column bind 1 failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        sqlite3_finalize(statement);
        return FALSE;
    }

    if (sqlite3_bind_int64(statement, 2, rowId) != SQLITE_OK)
    {
        NSLog(@"%s column bind 2 failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        sqlite3_finalize(statement);
        return FALSE;
    }

    if (sqlite3_step(statement) != SQLITE_DONE)
    {
        NSLog(@"%s step failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        sqlite3_finalize(statement);
        return FALSE;
    }

    if (sqlite3_finalize(statement) != SQLITE_OK)
    {
        NSLog(@"%s finalize failed: \"%s\"", __FUNCTION__, sqlite3_errmsg(database));
        return FALSE;
    }

    return TRUE;
}

// return TRUE if successful, FALSE if not

- (BOOL)closeDb
{
    if (sqlite3_close(database) != SQLITE_OK)
    {
        NSLog(@"%s database close failed", __FUNCTION__);
        return FALSE;
    }

    database = NULL;

    return TRUE;
}

@end 
```

现在，对于您的另一个问题，您[如何从 iphone 上的 sqlite 数据库中读取浮点数（REAL）？](https://stackoverflow.com/questions/1534931)，关于存储在数据库中的值是 an`INTEGER`还是 a `REAL`，关键问题是要将`REAL`值存储到 SQLite 中，您应该使用`sqlite3_bind_double`和读取`REAL`值，您应该使用`sqlite3_column_double`. 如果您没有看到您的数据库反映了`INSERT`or`UPDATE`语句，那么您要么没有成功检查函数调用的结果，要么您在子句`sqlite3_xxx()`中犯了错误。`WHERE`

* * *

顺便说一句，您可能想知道 SQLite 的一个特性。想象一下，您将调用替换为my实际上定义为的`createTable`调用：`createTableBad``float_column``INTEGER`

```
// return TRUE if successful, FALSE if not

- (BOOL)createTableBad
{
    const char *sql = "CREATE TABLE IF NOT EXISTS mytable (id INTEGER PRIMARY KEY AUTOINCREMENT, float_column INTEGER)";
    char *errmsg;

    if (sqlite3_exec(database, sql, NULL, NULL, &errmsg) != SQLITE_OK)
    {
        NSLog(@"%s table create failed: \"%s\"", __FUNCTION__, errmsg);
        return FALSE;
    }

    return TRUE;
} 
```

令人惊讶的是，如果您`createTableBad`在我的`testSqlite`方法中使用它，并且插入和更新`double`值仍然有效！这是因为 SQLite 是一个“动态类型系统”（参见 SQLite 关于[数据类型](http://www.sqlite.org/datatype3.html)的讨论中的介绍）。

当您将浮点值 插入`0.1`到列定义为 的列中`INTEGER`时，它实际上会将值存储为 a `REAL`，而不管表的列定义如何。当您将该值更改为 时`0.2`，这也将起作用。这是因为**数据在表中的存储方式取决于它的插入方式，而不是`CREATE TABLE`语句中列定义的函数。**

为了进一步说明这一点，请考虑我将列定义为类型的荒谬示例`HIPPOPOTOMUS`！

```
// return TRUE if successful, FALSE if not

- (BOOL)createTableReallyBad
{
    const char *sql = "CREATE TABLE IF NOT EXISTS mytable (id INTEGER PRIMARY KEY AUTOINCREMENT, float_column HIPPOPOTOMUS)";
    char *errmsg;

    if (sqlite3_exec(database, sql, NULL, NULL, &errmsg) != SQLITE_OK)
    {
        NSLog(@"%s table create failed: \"%s\"", __FUNCTION__, errmsg);
        return FALSE;
    }

    return TRUE;
} 
```

代码仍然有效！

我并不是说您永远不应该将列类型准确地表示为`INTEGER`or `REAL`，视情况而定。我只是说，了解 SQLite 数据库中数据的数据类型是`sqlite3_bind_xxx()`插入时语句的函数，而不是表定义据称如何定义列，这一点至关重要。

# android - 如何在对话框中放置额外的数据？

> ID：13737205
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:56:01.010
> 
> 标签：android, dialog

我想为 注册一个回调`dialog.setOnCancelListener ( OnCancelListener)`，但是这个回调会为其他对话框注册很多次，所以我应该从传递的对话框中获取一些唯一的日期，并使用不同的额外日期来知道哪个有用或无用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:18:00.747

使用一个接口，把这段代码放在你的 Dialog Fragmnet 中： public static interface MyInterface { public void cance(String someInfo); }

```
private MyInterface mListener;

@Override
public void onAttach(Activity activity) {
    mListener = (MyInterface) activity;
    super.onAttach(activity);
}

@Override
public void onDetach() {
    mListener = null;
    super.onDetach();
} 
```

然后，在 onCancel 方法中：

```
@Override
public void onCancel(DialogInterface dialog) {
    // TODO Auto-generated method stub
    super.onCancel(dialog);
            //This line passes the String to the implementing class
            mListener.onChoose(choice);
} 
```

回到你的课堂：

```
public class MainActivity extends Activity implements MyInterface {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
}

public void onChoose(String myExtraData) {
    //Do stuff here
} 
```

# ios - 如何在单元格文本中导入包含换行符的excel文件

> ID：13737208
> 
> 赞同：1
> 
> 时间：2012-12-06T04:56:29.587
> 
> 标签：ios, excel, parsing

我有一个包含一些数据的 excel 文件（具有多列和多行）。我想将此数据导入我的基于核心数据的数据库中。我正在努力导入数据，因为单元格中的文本包含换行符。

我尝试了以下方法：

1.) 将 excel 导出到制表符分隔的文本文件

2.) 在 iOS 中编写一个导入路由，使用以下代码读取制表符分隔的文本文件：

```
NSCharacterSet *tabCharacterSet = [NSCharacterSet characterSetWithCharactersInString:@"\t"];

NSArray *rows = [dataString componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
NSArray *columns = [row componentsSeparatedByCharactersInSet:tabCharacterSet]; 
```

**问题：**我有 1000 个，每个`rows`有 15`columns`个。解析例程返回大于 1000`rows`且小于 15 `columns`。解析例程没有正确处理单元格中的换行符。

如果我使用，我会得到相同的结果

`[NSCharacterSet characterSetWithCharactersInString:@"\r\n"];`

或者

`[NSCharacterSet characterSetWithCharactersInString:@"\r"];`

代替

`[NSCharacterSet newlineCharacterSet]`

但如果我使用它会完全失败

`[NSCharacterSet characterSetWithCharactersInString:@"\n"];`

**如何正确解析 excel 数据？**

**也许我可以使用正则表达式来获取线组件？任何想法/指针？**

**更新（示例 XLSX 和导出文件）：**

![示例 XLSX 文件](../Images/22705bb7b786b5100647461081277ea3.png) ![示例 TAB 分隔文本文件](../Images/cf66b55c040617299bc9d7cf6043f2c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:21:00.970

对我有用的解决方案涉及使用`NSScanner`类。

```
- (NSArray *)parseCSVFileString {
    NSMutableArray *rows = [NSMutableArray array];

    // Get newline character set
    NSMutableCharacterSet *newlineCharacterSet = (id)[NSMutableCharacterSet whitespaceAndNewlineCharacterSet];
    [newlineCharacterSet formIntersectionWithCharacterSet:[[NSCharacterSet whitespaceCharacterSet] invertedSet]];

    // Characters that are important to the parser
    NSMutableCharacterSet *importantCharactersSet = (id)[NSMutableCharacterSet characterSetWithCharactersInString:@",\""];
    [importantCharactersSet formUnionWithCharacterSet:newlineCharacterSet];

    // Create scanner, and scan string
    NSScanner *scanner = [NSScanner scannerWithString:self];
    [scanner setCharactersToBeSkipped:nil];

    while (![scanner isAtEnd]) {

        @autoreleasepool {
            BOOL insideQuotes = NO;
            BOOL finishedRow = NO;
            NSMutableArray *columns = [NSMutableArray arrayWithCapacity:10];
            NSMutableString *currentColumn = [NSMutableString string];
            while ( !finishedRow ) {
                NSString *tempString;

                if ([scanner scanUpToCharactersFromSet:importantCharactersSet intoString:&tempString]) {
                    [currentColumn appendString:tempString];
                }

                if ([scanner isAtEnd]) {

                    if (![currentColumn isEqualToString:@""]) [columns addObject:currentColumn];

                    finishedRow = YES;

                } else if ([scanner scanCharactersFromSet:newlineCharacterSet intoString:&tempString]) {

                    if (insideQuotes) {
                        // Add line break to column text
                        [currentColumn appendString:tempString];

                    } else {
                        // End of row
                        if (![currentColumn isEqualToString:@""]) [columns addObject:currentColumn];

                        finishedRow = YES;
                    }

                } else if ([scanner scanString:@"\"" intoString:NULL]) {

                    if (insideQuotes && [scanner scanString:@"\"" intoString:NULL]) {
                        // Replace double quotes with a single quote in the column string.
                        [currentColumn appendString:@"\""];

                    } else {
                        // Start or end of a quoted string.
                        insideQuotes = !insideQuotes;
                    }

                } else if ([scanner scanString:@"," intoString:NULL]) {

                    if (insideQuotes) {
                        [currentColumn appendString:@","];

                    } else {
                        // This is a column separating comma
                        [columns addObject:currentColumn];
                        currentColumn = [NSMutableString string];
                        [scanner scanCharactersFromSet:[NSCharacterSet whitespaceCharacterSet] intoString:NULL];
                    }
                }
            }

            if ( [columns count] > 0 ) [rows addObject:columns];
        }
    }

    return rows;
} 
```

参考： http: [//www.macresearch.org/cocoa-scientists-part-xxvi-parsing-csv-data](http://www.macresearch.org/cocoa-scientists-part-xxvi-parsing-csv-data)

# python - 只读 DateTimeField 不会在 django admin 中呈现

> ID：13737210
> 
> 赞同：0
> 
> 时间：2012-12-06T04:56:38.637
> 
> 标签：python, django, django-admin

我有以下 Django 模型：

```
class Article(models.Model):
    title = models.CharField(max_length = 200)
    body = models.TextField()
    created_date = models.DateTimeField(auto_now_add=True) 
```

我还有以下 django 管理类：

```
class ArticleAdmin(admin.ModelAdmin):
    fields = ['title', 'body']
    readonly_fields = ['created_date']
    list_display = ['title', 'body', 'created_date'] 
```

在 django 管理应用程序中，我可以`created_date`在我的文章列表中看到该字段：

![在此处输入图像描述](../Images/d1b1c552f2eee11da0e74be168f5c3ea.png)

但是对于我来说，当我打开一篇文章时，我无法让该`created_date`字段呈现（作为只读字段）：

![在此处输入图像描述](../Images/69520c01ae1e0b7ff8dad39d26c09bea.png)

我从[文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields)和谷歌搜索中`created_date`得到了印象，`readonly_fields`即使我`auto_now_add`在`DateTimeField`.

我在这里吠错树了吗？

我正在使用 django 1.4.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:03:27.263

如果您已指定`fields`，则需要将该字段添加到`fields`.

> 但是，当您指定 ModelAdmin.fields 或 ModelAdmin.fieldsets 时，必须存在只读字段才能显示（否则它们将被忽略）。

魔法`auto_now`已经让我好几次了。

# java - 在 Flex 中保持 Java 服务器会话的实时性

> ID：13737220
> 
> 赞同：0
> 
> 时间：2012-12-06T04:57:47.497
> 
> 标签：java, actionscript-3, apache-flex, session

当用户在我的应用程序上工作时，我需要保持会话处于活动状态。应用程序正在使用 webservice 连接到 Java。我有一项服务来保持/检查服务器会话活动/超时。实现这一目标的最佳方法是什么？我检查了

```
systemManager FlexEvent.IDLE event 
```

但不适合我的需要。有什么解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:05:32.350

创建一个 HeartBeatMonitor.as 类，该类的唯一职责是对来自服务器的响应做出反应，并在响应成功时继续跳动。

在我的脑海中，你会希望这个类实现 IResponder 并有一个用于心跳之间延迟的计时器。

HeartBeatMonitor + HeartBeatCommand（用于拨打电话）= 客户端会话保持活动状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:32:17.207

您是否编写了自己的 java 服务器？如果是这样，您应该在服务器端打开一个套接字并等待连接。之后，您可以创建服务器和客户端之间的协议。然后你应该决定何时关闭服务器端的连接/会话。如果我没有误解，您可以查看 [如何编写服务器端 java](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)

# javascript - 使用 easelJs 或 KineticJs 创建动态矩形/框

> ID：13737221
> 
> 赞同：0
> 
> 时间：2012-12-06T04:57:53.527
> 
> 标签：javascript, kineticjs, fabricjs, easeljs, paperjs

嗨，我正在寻找使用 JavaScript 制作平面图编辑器（类似于 MsPaint）。我已将**EaselJS**或**KinetiJS**列为我的首选库。

我想知道如何使用这些库**创建一个动态矩形框/线。**我打算通过单击鼠标并拖动它来绘制一个矩形（同时按住鼠标按钮）。因此，矩形的大小将取决于鼠标拖动的距离。

任何帮助将不胜感激。如果有人觉得像**fabrisJs**或**paperJs**这样的任何其他库会是更好的选择，那么我也对这些库中的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:53:57.000

好的...通过反复试验以及大量谷歌搜索和重用网络代码，我得到了 KineticJs 的答案。

这是完整的解决方案：

[http://jsfiddle.net/sandeepy02/8kGVD/](http://jsfiddle.net/sandeepy02/8kGVD/)

```
<html>
    <head>
        <script>
            window.onload = function() {
                layer = new Kinetic.Layer();
                stage = new Kinetic.Stage({
                    container: "container",
                    width: 320,
                    height: 320
                });

                background = new Kinetic.Rect({
                    x: 0, 
                    y: 0, 
                    width: stage.getWidth(),
                    height: stage.getHeight(),
                    fill: "white"
                });

                layer.add(background);
                stage.add(layer);

                moving = false;

                stage.on("mousedown", function(){
                    if (moving){
                        moving = false;layer.draw();
                    } else {
                        var mousePos = stage.getMousePosition();
                        rect= new Kinetic.Rect({
        x: 22,
        y: 7,
        width: 0,
        height: 0,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4
                        });
                        layer.add(rect);
                        //start point and end point are the same
                        rect.setX(mousePos.x);
                        rect.setY(mousePos.y);
                        rect.setWidth(0);
                        rect.setHeight(0);

                        moving = true;    
                        layer.drawScene();            
                    }

                });

                stage.on("mousemove", function(){
                    if (moving) {
                        var mousePos = stage.getMousePosition();
                        var x = mousePos.x;
                        var y = mousePos.y;
                        rect.setWidth(mousePos.x-rect.getX());
                        rect.setHeight(mousePos.y-rect.getY());
                        moving = true;
                        layer.drawScene();
                    }
                });

                stage.on("mouseup", function(){
                    moving = false; 
                });

            };
        </script>
    </head>
    <body>
        <div id="container" ></div>
    </body>
</html>
​ 
```

# objective-c - 将 C API 与 ARC 一起使用时的 EXC_BAD_ACCESS

> ID：13737223
> 
> 赞同：0
> 
> 时间：2012-12-06T04:58:07.810
> 
> 标签：objective-c, ios, automatic-ref-counting

在我的 iOS Objective-C 代码中使用 Bonjour（使用`<netinet/in.h>` 和的函数）连接到主机时，我使用以下代码查找服务器主机名。`<arpa/inet.h>`我使用的代码（如下所示）来自 Big Nerd Ranch iOS 编程书籍，但最初编写时并未考虑到 ARC。

```
- (NSString *)serverHostName
{
    NSArray *addresses = [desktopServer addresses];
    NSData *firstAddress = [addresses objectAtIndex:0];

    // the binary data in the NSData object is a sockaddr_in (which represents a network host)
    const struct sockaddr_in *addy = [firstAddress bytes];

    // convert 4-byte IP address in network byte order to a C string of the format xxx.xxx.xxx.xxx
    char *ipAddress = inet_ntoa(addy->sin_addr);

    // convert the 2-byte port number from network to host byte order
    UInt16 port = ntohs(addy->sin_port);

    return [NSString stringWithFormat:@"%s:%u", ipAddress, port];
} 
```

它偶尔会在线路上出现 EXC_BAD_ACCESS 崩溃，`char *ipAddress = inet_ntoa(addy->sin_addr);`让我相信它`addy`被处理得太早了。我已经尝试研究使用`CFBridgingRetain()`或`CFRetain()`方法来防止这种情况，但它们要么没有任何区别，要么似乎引入了更多问题。

关于我应该寻找什么来消除这个问题的任何建议？

# php - 为 INI 文件中的每个部分复制 PHP 代码

> ID：13737224
> 
> 赞同：0
> 
> 时间：2012-12-06T04:58:18.810
> 
> 标签：php, html

```
<? $config = parse_ini_file('/list.ini', true); ?>
<?echo'<select id="LBox" name="listbox" size="20" style="display:none;">';
    foreach($config[MPR] as $id=>$label){
        switch ($id)
        {
        case ($id==select):
        echo'<option value="0" selected="selected"></option>';
        break;
        case ($id>0 && $id<=10):
        echo'<optgroup label="'.$label.'">';
        break;
        case ($id>10 && $id<=20):
        echo'</optgroup>';
        break;
        default:
        echo'<option value="'.$id.'">'.$label.'</option>';
        }
    }
echo'</select>';?> 
```

上面是构建隐藏列表框并从 INI 文件填充其选项的代码。我想为我的 ini 中的每个部分复制这个，但我不确定最好的方法，除了用新的 $config[x] 值复制和粘贴 8 次。有没有办法为每个部分复制这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:13:37.000

编写一个函数来执行它并将任何更改（例如 $config[x]）作为参数。

# android - Android - 在图像上绘制

> ID：13737226
> 
> 赞同：7
> 
> 时间：2012-12-06T04:58:44.927
> 
> 标签：android, image, canvas, bitmap, drawing

```
b2.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                setContentView(R.layout.new_main);

                String editTextStr = text.getText().toString();
                Toast msg = Toast.makeText(getBaseContext(),"/sdcard/Stored_Images/" + editTextStr + ".jpg", Toast.LENGTH_LONG);
                msg.show();

                Bitmap bmp = BitmapFactory.decodeFile("/sdcard/Stored_Images/" + editTextStr + ".jpg");
                ImageView img = (ImageView) findViewById(R.id.ImageView01);
                img.setImageBitmap(bmp);
            }
        }); 
```

上面的代码在屏幕上显示保存在 sd 卡上的图像。

```
Canvas c = holder.lockCanvas();
c.drawARGB(255,0,0,0);
onDraw(c);
holder.unlockCanvasAndPost(c); 
```

这段代码创建了一个画布来绘制（黑屏）。

我希望能够将两者结合起来以将图像设置/显示为画布，以便我可以在其上绘图。因此，如果我拍摄某人的脸，我希望能够显示该图像，以便我可以在其上画胡须或其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:20:40.197

您最好创建画布，将位图图像添加到其中，然后从那里处理用户触摸/绘图。

```
Bitmap bmp = BitmapFactory.decodeFile("/sdcard/Stored_Images/" + editTextStr + ".jpg");
mCanvas = new Canvas(bmp); 
```

那么对于绘图...听起来您已经想通了，但如果没有，您可以查看api 演示中的[fingerPaint 示例，这些示例演示了在画布上绘图（此时您将拥有您的图像。）](https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:29:30.273

您可以自定义 ImageView 并在 onDraw(Canvas canvas) 中对您的图像进行绘图

例如：

在您的活动中：

1）从图像创建位图

2）将Bitmap设置为自定义的ImageView

```
 a) create object for customized ImageView 
```

MyImageView 视图 =new MyImageView(this);

```
 b) set the bitmap

view.setImageBitmap(bmp); 
```

MyImageView.java：

```
class MyImagView extends ImageView{
  //constructor
   public MyImageView(Context context){
}

//onDraw()

@Override
protected void onDraw(Canvas canvas)
{
             super.onDraw(canvas);
             //drawlines where ever you want using canvas.drawLine()
}

@Override
 public void setImageBitmap(Bitmap bm)
 { 
   super.setImageBitmap(bm);

}

} 
```

# php - 需要有关组织代码的建议

> ID：13737228
> 
> 赞同：1
> 
> 时间：2012-12-06T04:58:55.297
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.2.3，我需要为我的网站建立一个管理/仪表板区域。

我有许多与此模型相关的模型和控制器，在仪表板中我需要能够对所有帖子/用户/新闻等进行 CRUD。

显然，我需要构建一个带有一些索引操作的仪表板控制器，它将显示仪表板“主页”页面。

我的问题是：在哪里放置所有其他操作 - 用于添加/编辑帖子/用户/其他内容？我应该将所有这些操作放在这个新的仪表板控制器中，还是最好将此操作放到相关控制器（帖子/用户..）中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:05:04.290

将您的特定操作保存在它们自己的每个控制器中。DashbaordsController 适用于需要显示大量不同模型信息的任何页面，但 CRUD 操作应保存在它们自己的 Controller 中。

如果您希望/需要单个页面能够在该页面上实际执行 CRUD 操作，您可以使用 ajax 并仍然调用该特定控制器的操作。

最重要的是，如果您尝试将所有 CRUD 放入单个控制器中，它只会变得混乱，并且会让未来的程序员（包括 6 个月后的您自己）感到非常困惑。

包含来自其他模型的数据非常容易，因此`$this->loadModel('MyModel');`在它们各自的控制器中执行 CRUD 操作并不是什么大问题。再一次 - DashboardsController 仍然适用于那些真正像仪表板并且与特定模型没有联盟的页面。但不是针对每个模型的 CRUD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:06:01.623

一般来说，理想的方法是做瘦控制器并将逻辑保持在尽可能靠近模型的堆栈中。理想情况下，您希望引入用于代码重用和测试的库。Robert Martin aka Uncle Bob 说网络交付和数据库应该尽可能多地成为一个插件。这使您可以更好地进行单元测试。就您的特殊情况而言，我希望尽可能地将其保持在 REST 附近，以便分离控制器，理想地委派给一些较低级别的东西。

# java - Java 表达式，它接受一个整数并返回它下面最接近的 1000 倍数

> ID：13737229
> 
> 赞同：-2
> 
> 时间：2012-12-06T04:59:00.987
> 
> 标签：java

这应该是微不足道的，但我想出的所有方法都是复杂和浪费的操作（划分、占用、扩大规模）。基本上，我有随机整数，我想得到最接近的 1000 倍数。

例如，**如果我有 6432，我真的想要 6000，或者如果我有 888，我想要 0**。

最简单的表达方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:04:48.043

你想要的只是：

```
(number / 1000) * 1000; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:01:48.160

做这样的事情怎么样：

```
int OrigionalNum = 1503;
int NewNum = (OrigionalNum / 1000) * 1000; 
```

对于 1503 / 1000，它会给出 1 的答案，然后将其乘以 1000。

# windows-services - NServiceBus 网关 URL 在 Windows 服务中无法访问

> ID：13737231
> 
> 赞同：0
> 
> 时间：2012-12-06T04:59:26.693
> 
> 标签：windows-services, nservicebus, gateway

我已经根据示例设置了一个演示 NSB 网关。从视觉工作室运行时一切正常。在 SiteB 上收到来自 SiteA 的 msg 发送。

但是，在我在本地 Windows 服务（NServiceBus.Host.exe /install）中托管 SiteB 之后，我注意到 SiteB 的 url 不再可访问（即`http://localhost:25899/SiteB`），因此从 SiteA 发送的 msg 都进入了错误队列。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:09:04.273

我已经整理好了！

在服务器上安装时，我只需将“NServiceBus.Lite NServiceBus.MultiSite”添加到命令行。

这一切都按预期工作。

# windows-phone-7 - BitmapImage 同步使用 SetSource 但用于本地（项目）文件（或者，如何将本地项目文件作为流获取）

> ID：13737235
> 
> 赞同：0
> 
> 时间：2012-12-06T04:59:52.610
> 
> 标签：windows-phone-7, windows-phone-8

我正在尝试在我的应用程序的某个时间点将位图文件同步加载到内存中，并读取 SetSource() 将执行此操作（[http://blogs.msdn.com/b/swick/archive/2011/04/ 07/image-tips-for-windows-phone-7.aspx](http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx)）。

但是，我习惯于使用 UriSource 属性，该属性对本地文件非常有用：

```
BitmapImage backgroundImage = new BitmapImage(new Uri("Background.png", UriKind.Relative)); 
```

但是，SetSource 函数采用“Stream”，而不是 Uri，我需要加载本地项目文件。你能告诉我最好的方法是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:18:29.573

这是您如何执行此操作的：

```
Uri uri = new Uri("/YourProjectName;component/Background.png", UriKind.Relative);
StreamResourceInfo resourceInfo = Application.GetResourceStream(uri);
BitmapImage bmp = new BitmapImage();
bmp.SetSource(resourceInfo.Stream); 
```

# c# - 如何投射到页面上找到的控件

> ID：13737236
> 
> 赞同：0
> 
> 时间：2012-12-06T04:59:53.360
> 
> 标签：c#, asp.net, reflection, casting, findcontrol

在 ASP.NET 应用程序上工作，我的项目需要从页面中查找控件，使用以下语法从页面中查找控件：

```
public static Control FindControlRecursive(Control Root, string Id)
{
    Control FoundCtl = new Control();
    if (Root.ID == Id)
        return Root;

    foreach (Control Ctl in Root.Controls)
    {
        if (FoundCtl != null && FoundCtl.ID == Id)
        {

            Type ty = FoundCtl.GetType();
            var r = FoundCtl as ty; 

            //var r = FoundCtl as  Telerik.Web.UI.RadComboBox;   
        }

        FoundCtl = FindControlRecursive(Ctl, Id);

        //if (FoundCtl != null)
        //    return FoundCtl;
    }

    return FoundCtl;
} 
```

为了从控件中检索控件值需要强制转换。对于演员使用波纹管语法

```
FoundCtl as TextBox; 
```

是否可以按如下方式进行查找控制

```
Type ty = FoundCtl.GetType();
var r = FoundCtl as ty; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:43:24.887

最合适的方法如下：

```
TextBox textBox = FindControl("name") as TextBox;
if (textBox != null)
{
    // use it
} 
```

为什么它不适合你？

* * *

您还可以使用扩展方法递归地查找给定类型的控件：

```
public static IEnumerable<Control> GetChildControls(this Control control)
{
    var children = (control.Controls != null) ? control.Controls.OfType<Control>() : Enumerable.Empty<Control>();
    return children.SelectMany(c => GetChildControls(c)).Concat(children);
} 
```

用法：

```
var textBoxex = this.GetChildControls<TextBox>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:42:03.120

你不能这样做。所有强制转换运算符都不适用于 System.Type 类型的变量。此外，如果您想在运行时通过反射使用此控件，您可以使用反射方法来使用它（例如`PropertyInfo.SetValue`等）。但通常你非常清楚具体控制的类型。为什么要在运行时强制转换？

# python - 从字符串的开头删除连续字符

> ID：13737237
> 
> 赞同：1
> 
> 时间：2012-12-06T05:00:08.550
> 
> 标签：python, regex

最好的办法是去掉有时出现在维基百科参考开头的字母？

例如从

> abcd 星球大战前传 III：西斯的复仇 (DVD)。20世纪福克斯。2005 年。

至

> 星球大战前传 III：西斯的复仇 (DVD)。20世纪福克斯。2005 年。

我已经组合了一个可行的解决方案，但看起来很笨重。我的版本使用'^(?:a (?:b (?:c )?)?)?'形式的正则表达式。什么是正确，快速的方法？

```
a = list('abcdefghijklmnopqrstuvwxyz')
reg = "^%s%s" % ( "".join(["(?:%s " %b for b in a]), ")?"*len(a) )
re.sub(reg, "", "a b c d Wikipedia Reference") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:11:07.537

在正则表达式中使用字符类怎么样，即：

```
re.sub('^([a-z] )*', '', ...) 
```

这应该删除单个字母字符后跟单个空格的任意数量的前导出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:12:07.713

我可能会做这样的事情：

```
title = re.sub(r'^([a-z]\s)*', '', 'a b c d Wikipedia Reference') 
```

这和你在那里得到的一样。但是，就像@joran-beasley 指出的那样，对于复杂的情况，您可能需要更聪明的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:33:01.930

如果你是复制粘贴网页文本而不是处理html，问题中提到的一些问题是不可避免的。[但是使用htmllib](http://docs.python.org/2/library/htmllib.html)处理 html （如下所示的相关行），您可以删除像`<sup><i><b>c</b></i></sup>`（贡献**c**）这样的项目作为单位。[*编辑：*我现在看到 htmllib 已被弃用；我不知道正确的替换，但相信它是[HTMLParser](http://docs.python.org/2/library/htmlparser.html#module-HTMLParser)。]

显示的线有点像

> ^ ^(***a***) ^(***b***) ^(***c***) ^(***d***) ^(***e***) *Star Wars: Episode III Revenge of the Sith* DVD 评论，由 George Lucas、Rick McCallum、Rob Coleman、John Knoll 和 Roger Guyett 主演，[2005]

该行的html源代码是

`<li id="cite_note-DVDcom-13"><span class="mw-cite-backlink">^ <a href="#cite_ref-DVDcom_13-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-DVDcom_13-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-DVDcom_13-2"><sup><i><b>c</b></i></sup></a> <a href="#cite_ref-DVDcom_13-3"><sup><i><b>d</b></i></sup></a> <a href="#cite_ref-DVDcom_13-4"><sup><i><b>e</b></i></sup></a></span> <span class="reference-text"><i>Star Wars: Episode III Revenge of the Sith</i> DVD commentary featuring George Lucas, Rick McCallum, Rob Coleman, John Knoll and Roger Guyett, [2005]</span></li>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T05:19:23.690

他们是否总是遵循这种模式，即标题前面有四个额外的带有空格的字母？如果是这样，你可以这样做：

```
s = "a b c d Star Wars Episode III: Revenge of the Sith (DVD). 20th Century Fox. 2005."
if all([len(x) == 1 and x.isalpha() for x in s.split()[0:4]]):
    print s[8:] 
```

# php - 如何从 PHP 中的 HTML 表中提取数据？

> ID：13737239
> 
> 赞同：0
> 
> 时间：2012-12-06T05:00:15.960
> 
> 标签：php, html-parsing

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

假设我想从这里的表格中提取某个数字/文本：[http ://www.fifa.com/associations/association=chn/ranking/gender=m/index.html](http://www.fifa.com/associations/association=chn/ranking/gender=m/index.html)

我想在**FIFA Ranking 位置**`td`下的右表中获得第一个数字。现在应该是**88**。经检查，是。****`<td class="c">88</td>`****

 ****我将如何使用 PHP 从所述网页中提取信息？

**编辑：**有人告诉我 JQuery/JavaScript 是为了这个……更适合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:15:31.580

这可能更漂亮，但它会是这样的：

```
<?php
$page = file_get_contents("http://www.fifa.com/associations/association=chn/ranking/gender=m/index.html");
preg_match('/<td class="c">[0-9]*</td>/',$page,$matches);
foreach($matches as $match){
    echo str_replace(array( "/<td class=\"c\">", "</td>"), "", $match);
}
?> 
```

我以前从来没有用 PHP 做过这样的事情，所以它可能不起作用。

如果你可以在页面加载*后*发挥你的魔力，你可以使用 JavaScript/JQuery

```
<script type='text/javascript'>
var arr = [];

jQuery('table td.c').each(
    arr[] = jQuery(this).html();
);

return arr;
</script> 
```

另外，很抱歉删除我的评论。您并没有具体说明需要做什么，所以我最初认为 jQuery 会更好地满足您的需求，但后来我想“也许您想在加载 HTML 页面之前获取页面内容”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:07:28.313

试试[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)，

```
$html = file_get_html('http://www.google.com/');
echo $html->find('div.rankings', 0)->find('table', 0)->find('tr',0)->find('td.c',0)->plaintext; 
```

这是未经测试的，只是查看源代码。我相信你可以更快地瞄准它。

实际上，

```
echo $html->find('div.rankings', 0)->find('td.c',0)->plaintext; 
```

应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:15:16.503

使用`DOMDocument`，它应该与您的 PHP 安装一起预加载：

```
$dom = new DOMDocument();
$dom->loadHTML(file_get_contents("http://www.example.com/file.html"));
$xpath = new DOMXPath($dom);
$cell = $xpath->query("//td[@class='c']")->item(0);
if( $cell) {
    $number = intval(trim($cell->textContent));
    // do stuff
} 
```****

# ruby-on-rails - 是否可以在 Rails 的 URL 中更改控制器的名称

> ID：13737240
> 
> 赞同：2
> 
> 时间：2012-12-06T05:00:24.977
> 
> 标签：ruby-on-rails, routing

我有一个控制器

```
 emppedes 
```

当我想在我看到的 url 中调用它时它很好

```
localhost:3000/emppedes 
```

并出现与之相关的全部内容。

但是我可以将此控制器与 rails 中的其他名称相匹配，以便当我点击它时，我可以像

```
localhost:3000/employees 
```

在不改变内部但外部的控制器的情况下，您可以看到这一点。我的意思是我可以在某个地方编码吗

```
 `emppedes will display as employees in URL.` 
```

可能吗。可能是我的问题很愚蠢，但我想知道这是否可能。在编辑中我有两个发送两个不同的 id，在控制器中也为了更新我必须发送两个 id。对于编辑我的代码就像

```
<%= link_to 'Edit', { :action => "edit",:id => @emppede.id,:ad => @id},:class=>"btn btn-success" %> | 
```

因为我在控制器中有两个句柄两个 id 也用于更新

```
 @id= @emppede.ad

if @emppede.save
        format.html { redirect_to :action => :index, :id => @emppede.ad }
        format.json { render json: @emppede, status: :created, location: @emppede } 
```

我怎样才能在rails路径格式中发送两个参数：id和：ad？由于我的控制器是这样的

```
def index
         @id = params[:id]
      @data = Emppede.where(:ad => @id)
    if @data.count > 0
      @data.each do |data|
        @ids= data.id
         end
      redirect_to :action => :show, :id => @ids, :ad => @id
     else
      redirect_to :action => :new, :id => @id
    end
  end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T05:05:44.830

是的，您可以指定用于任何给定资源的控制器：

```
resources :employees, :controller => "emppedes" 
```

或者，如果您更喜欢 Ruby 1.9 语法：

```
resources :employees, controller: "emppedes" 
```

有关更多详细信息，请参阅[Rails 指南：路由](http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T05:11:44.583

您要做的是传入 :path 选项

资源 :employees, :path => "emppedes"

这会将您的所有路线引用替换为 /employees 到 /emppedes

请参阅： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)，第 4.7 节翻译路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:01:38.667

您可以在 routes.rb 中使用以下内容进行查询

```
match '/employees/:id/:ad(.:format)' => 'emppedes#index', :via => :get, :as => :employees
resources :emppedes, :as => 'employees' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T05:27:00.270

尝试在初始化文件中使用变形

```
 ActiveSupport::Inflector.inflections do |inflect|
     inflect.irregular 'employees', 'emppedes'
  end 
```

# mysql - 将查询结果分配给 MySQL 变量

> ID：13737242
> 
> 赞同：10
> 
> 时间：2012-12-06T05:00:31.513
> 
> 标签：mysql, sql, variables, mysql-error-1193

我正在查询一个只有读取权限的大型 mysql 数据库，我想将一些慢速查询结果设置为一个变量“foo”，这样我就可以在其他查​​询中再次使用它们。

基本上，我想要一个用于繁琐子查询的变量，这样我就可以重用它，而无需每次我想使用它时都运行它。

当我输入：

```
set @foo := (select *
            from table1 join table2 
            where bar = 0 
            group by id); 
```

我得到：错误 1241（21000）：操作数应包含 1 列，如果我限制为 1 列，错误 1242（21000）：子查询返回超过 1 行

有没有办法将数组或表存储在变量中？我没有创建临时表的权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:01:10.780

应该是`@`在你做的时候`MySQL`。

```
set @foo := (select *
            from table1 join table2 
            where bar = 0 
            group by id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:10:19.130

你也可以试试这个：

您不能将完整表存储在任何变量中，但您可以使用以下查询将列数据存储在任何变量中。

```
SELECT GROUP_CONCAT(col1 SEPARATOR '~~~'), GROUP_CONCAT(col2 SEPARATOR '~~~'), ... INTO @foo, @foo2, ...
FROM table1 JOIN table2 
WHERE bar = 0 
GROUP BY id; 
```

**或者**

```
select col1, col2, ... into @foo, @foo2, ...
from table1 join table2 
where bar = 0 
group by id 
```

# ruby-on-rails - 我可以在_form中使用带有复选框的accepts_nested_attributes_for从列表中选择潜在的“链接”

> ID：13737243
> 
> 赞同：1
> 
> 时间：2012-12-06T05:00:52.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 3 中：

我有以下型号：

```
class System
    has_many :input_modes # name of the table with the join in it
    has_many :imodes, :through => :input_modes, :source => 'mode', :class_name => "Mode"

    has_many :output_modes
    has_many :omodes, :through => :output_modes, :source => 'mode', :class_name => 'Mode'
end

class InputMode # OutputMode is identical
    belongs_to :mode
    belongs_to :system
end

class Mode
    ... fields, i.e. name ...
end 
```

这很好用，我可以按`Modes`预期分配列表。`imodes``omodes`

我想做的是`accepts_nested_attributes_for`在模型中使用或其他一些类似的魔法，`System`并用一组复选框构建一个视图。

`Modes`给定的有效集合在`System`别处定义。我在`_form`视图中使用复选框来选择实际设置在`imodes`和中的有效模式`omodes`。我不想`Modes`从此视图创建新的，只需从预定义的列表中选择`Modes`。

以下是我目前正在使用的`_form`视图。它生成一个复选框列表，每个复选框都允许`Mode`被`System`编辑。如果选中该复选框，则该复选框`Mode`将包含在`imodes`列表中。

```
<% @allowed_modes.each do |mode| %>
    <li>
        <%= check_box_tag :imode_ids, mode.id, @system.imodes.include?(modifier), :name => 'imode_ids[]' %>
        <%= mode.name %>
    </li>
<% end %> 
```

它将它传递给参数中的控制器：

```
{ ..., "imode_ids"=>["2", "14"], ... } 
```

在 controller#create 中，我提取并分配了`Modes`勾选了相应复选框的，并`imodes`使用以下代码将它们添加到：

```
@system = System.new(params[:system])

# Note the the empty list that makes sure we clear the
# list if none of the checkboxes are ticked
if params.has_key?(:imode_ids)
  imodes = Mode.find(params[:imode_ids])
else
  imodes = []
end
@system.imodes = imodes 
```

再一次，这一切都很好，但我必须将那个笨拙的代码复制到控制器中的其他方法中，如果可能的话，我更喜欢使用更神奇的东西。我觉得我已经离开了漂亮干净的 Rails 代码的道路，进入了“乱砍”rails 的森林；它有效，但我不喜欢它。我应该怎么做？

# c++ - 使用可变空格标记字符串

> ID：13737247
> 
> 赞同：0
> 
> 时间：2012-12-06T05:01:05.727
> 
> 标签：c++

我已经阅读了一些详细说明如何标记字符串的线程，但我显然太厚了，无法将他们的建议和解决方案适应我的程序。我正在尝试做的是将大（5k +）行文件中的每一行标记为两个字符串。这是行的示例：

```
 0      -0.11639404 
   9.0702948e-05    0.00012207031 
    0.0001814059      0.051849365 
   0.00027210884      0.062103271 
   0.00036281179      0.034423828 
   0.00045351474      0.035125732 
```

我在我的行和来自其他线程的其他示例输入之间发现的区别在于，我想要标记的部分之间有可变数量的空白。无论如何，这是我的标记化尝试：

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>

using namespace std;

int main(int argc, char *argv[])
{
    ifstream input;
    ofstream output;
    string temp2;
    string temp3;

    input.open(argv[1]);
    output.open(argv[2]);
    if (input.is_open())
    {
        while (!input.eof())
            {   
                getline(input, temp2, ' ');
                while (!isspace(temp2[0])) getline(input, temp2, ' ');
                getline (input, temp3, '\n');               
            }
            input.close();
            cout << temp2 << endl;
            cout << temp3 << endl;
    return 0;
} 
```

我已经剪掉了一些，因为麻烦的部分就在这里。我遇到的问题是 temp2 似乎永远不会捕捉到一个值。理想情况下，它应该填充第一列数字，但事实并非如此。相反，它是空白的，并且 temp3 填充了整行。不幸的是，在我的课程中我们还没有了解向量，所以我不太确定如何在我见过的其他解决方案中实现它们，而且我不想只是复制粘贴代码来分配给让事情在没有真正理解的情况下工作。那么，我缺少的非常明显/已经回答/简单的解决方案是什么？如果可能的话，我想坚持使用 g++ 使用的标准库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:06:40.347

在这种情况下，您可以简单地忽略空格。提取字符串，提取器将自动跳过前导空格，并读取一串非空白字符：

```
int main(int argc, char **argv) { 
    std::ifstream in(argv[1]);
    std::ofstream out(argv[2]);

    std::string temp1, temp2;

    while (in >> temp1 >> temp2)
        ;
    std::cout << temp1 << "\n" << temp2;
    return 0;
} 
```

# objective-c - 如何从 CGPath 中删除子路径？

> ID：13737250
> 
> 赞同：2
> 
> 时间：2012-12-06T05:01:36.063
> 
> 标签：objective-c, ios

一些子路径被添加到可变图形路径中：

```
 CGPathAddPath(path, NULL, subpath1);
 // ...
 CGPathAddPath(path, NULL, subpath2);
 // ...
 CGPathAddPath(path, NULL, subpath3); 
```

如何从中删除一些/所有子路径`path`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:16:38.930

您不能，如果需要，您有责任保留重绘路径（或其一部分）所需的数据（您基本上必须创建一个仅包含您想要保留的子路径的新路径）。

# spring - 我的控制器文件中的 java.lang.NullPointerException 异常（使用 Spring Hibernate Maven）

> ID：13737254
> 
> 赞同：0
> 
> 时间：2012-12-06T05:02:05.413
> 
> 标签：spring, hibernate, maven, servletexception

当我在控制器文件中运行这部分 (@RequestMapping("/SearchStaff")) 时，就会出现问题。我可以成功显示我的搜索表单（SearchStaff 下面的请求映射）。

这个问题似乎与 Hibernate 没有任何关系。正如我评论过 Hibernate 的东西，但我仍然明白。

如果我注释掉这一行

```
message = staffDAO.searchForStaff(search); 
```

在我的控制器文件中，它通过了。但我认为 searchForStaff 函数没有任何问题。这是一个非常简单的函数，只返回字符串“test”并运行 system.out.println(“test”)。

你能帮忙吗？谢谢

* * *

**但这是我得到的错误：**

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

java.lang.NullPointerException
    org.flinders.staffdirectory.controllers.SearchController.showSearchResults(SearchController.java:25)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

**我的 spring-servlet xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <context:component-scan base-package="org.flinders.staffdirectory.controllers" />

    <mvc:annotation-driven />
    <mvc:resources mapping="/resources/**" location="/resources/" />

    <tx:annotation-driven />

    <bean
        id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/spring.properties" />
    <bean
        id="dataSource"
        class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}"
        p:username="${jdbc.username}"
        p:password="${jdbc.password}" />
    <bean
        id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
        p:dataSource-ref="dataSource"
        p:configLocation="${hibernate.config}"
        p:packagesToScan="org.flinders.staffdirectory"/>
    <bean
        id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager"
        p:sessionFactory-ref="sessionFactory" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver"
        p:viewClass="org.springframework.web.servlet.view.tiles2.TilesView" />
    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer"
        p:definitions="/WEB-INF/tiles.xml" />

    <bean
        id="staffDAO"
        class="org.flinders.staffdirectory.dao.StaffDAO"
        p:sessionFactory-ref="sessionFactory" />
    <!-- <bean
        id="staffService"
        class="org.flinders.staffdirectory.services.StaffServiceImpl"
        p:staffDAO-ref="staffDAO" />-->
</beans> 
```

**这是我的控制器文件**

```
package org.flinders.staffdirectory.controllers;

import java.util.List;

//import org.flinders.staffdirectory.models.database.SearchResult;
import org.flinders.staffdirectory.models.misc.Search;
import org.flinders.staffdirectory.dao.StaffDAO;

//import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class SearchController {
    //@Autowired
    private StaffDAO staffDAO;
    private String message;

    @RequestMapping("/SearchStaff")
    public ModelAndView showSearchResults(@ModelAttribute Search search) {

        //List<SearchResult> searchResults =
        message = staffDAO.searchForStaff(search);

        //System.out.println(search.getSurname());
        return new ModelAndView("search/SearchForm", "Search", new Search());
        //return new ModelAndView("search/SearchResults", "searchResults", searchResults);
    }

    @RequestMapping("/SearchForm")
    public ModelAndView showSearchForm() {
        return new ModelAndView("search/SearchForm", "search", new Search());
    }
} 
```

**我的道课**

```
package org.flinders.staffdirectory.dao;

import java.util.List;

import org.hibernate.SessionFactory;

//import org.springframework.beans.factory.annotation.Autowired;

import org.flinders.staffdirectory.models.database.SearchResult;
import org.flinders.staffdirectory.models.misc.Search;

public class StaffDAO {
    //@Autowired
    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public String searchForStaff(Search search) {
        /*String SQL = "select distinct telsumm_id as id, telsumm_parent_id as parentId, telsumm_name_title as title, (case when substr(telsumm_surname, length(telsumm_surname) - 1, 1) = ',' then substr(telsumm_surname, 1, length(telsumm_surname) - 1) else telsumm_surname end) as surname, telsumm_preferred_name as firstname, nvl(telsumm_tele_number, '-') as telephoneNumber, nvl(telsumm_role, '-') as role, telsumm_display_department as department, lower(telsumm_entity_type) as entityType from teldirt.teld_summary where (telsumm_search_surname is not null) and not (nvl(telsumm_tele_directory,'xxx') IN ('N','S','D')) and not (telsumm_tele_number IS NULL AND telsumm_alias IS NULL) and (telsumm_alias_list = 'Y' OR (telsumm_tele_directory IN ('A','B'))) and ((nvl(telsumm_system_id_end,sysdate+1) > SYSDATE and telsumm_entity_type = 'P') or (telsumm_entity_type = 'N')) and (telsumm_search_department NOT like 'SPONSOR%')";

        if (search.getSurname().length() > 0) {
            SQL += " and (telsumm_search_surname like '" + search.getSurname().toUpperCase() + "%')";
        }
        if (search.getSurnameLike().length() > 0) {
            SQL += " and (telsumm_search_soundex like soundex(('%" + search.getSurnameLike().toUpperCase() + "%'))";
        }
        if (search.getFirstname().length() > 0) {
            SQL += " and (telsumm_search_preferred_name like '" + search.getFirstname().toUpperCase() + "%' or telsumm_search_first_name like '" + search.getFirstname() + "%')";
        }
        if (search.getTelephoneNumber().length() > 0) {
            SQL += " and (telsumm_tele_number like '" + search.getTelephoneNumber() + "%')";
        }
        if (search.getDepartment().length() > 0) {
            SQL += " and (telsumm_search_department like '" + search.getDepartment().toUpperCase() + "%')";
        }
        if (search.getRole().length() > 0) {
            SQL += " and (telsumm_search_role like '" + search.getRole().toUpperCase() + "%')";
        }
        SQL += " order by surname, firstname";

        List<Object[]> list = (List<Object[]>) sessionFactory.getCurrentSession().createQuery(SQL).list();

        for(int j=0;j<list.size();j++){
            Object [] obj= (Object[])list.get(j);
            for(int i=0;i<obj.length;i++)
                System.out.println(obj[i]);
        }*/
                System.out.println("test");
             return "test";
    }
} 
```

**我的 pom.xml**

```
<project
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>org.flinders.staffdirectory</groupId>

    <artifactId>directory-maven</artifactId>

    <packaging>war</packaging>

    <version>0.0.1-SNAPSHOT</version>

    <name>directory-maven Maven Webapp</name>

    <url>http://maven.apache.org</url>

    <properties>
        <org.springframework.version>3.1.3.RELEASE</org.springframework.version>
    </properties>

    <dependencies>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.8.Final</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>11.2.0.3</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.8</version>
        </dependency>

        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>directory-maven</finalName>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:13:21.857

StaffDAO 为 null 。您注释掉其自动装配的任何原因。

我还看到`private SessionFactory sessionFactory;`Autowired 也被评论了。请尝试删除这些评论。

`//@Autowired`

# java - JSplitPane 与 BorderLayout 中的 JButton 重叠，但当 layout 为 null 时不重叠

> ID：13737258
> 
> 赞同：1
> 
> 时间：2012-12-06T05:02:24.620
> 
> 标签：java, swing, jframe, jsplitpane, border-layout

所以我有另一个问题......

我目前在我的 GUI 中使用 BorderLayout，这样当我调整 jframe 的大小时，所有内部组件都会随之调整大小。在提供这种调整大小功能的同时，我无法获得任何其他布局来满足我希望 GUI 的外观。在顶部我有一个 JMenuBar，在它下面我有一堆按钮。下面我应该有一个 JSplitPane，它就在那里。但是，这些按钮似乎包含在 JSplitPane 中，这不是我的意图。因此，当拆分窗格中发生任何事情时，按钮会消失，直到我再次将鼠标移到它们上方。

当我将布局设置为 null 时，一切都很好，除了我失去了调整大小的能力，这不好。

尝试发布图片，但它不会让我因为我的代表还没到 10 岁:(

有什么建议么？我尝试将按钮放入 JPanel 然后添加 jpanel 但拆分窗格与此重叠。与 JToolBar 相同。

我添加项目的顺序是：

1）菜单栏

```
setJMenuBar(menuBar) 
```

2) 按钮

```
getContentPane().add(btnZoomIn) 
```

等等

3) 拆分窗格

```
getContentPane().add(splitPane) 
```

然后你看到的其他东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:30:33.397

对我来说似乎工作得很好......

![在此处输入图像描述](../Images/971e64f12209d9982ef95843107a1c49.png)

```
public class BadLayout06 {

    public static void main(String[] args) {
        new BadLayout06();
    }

    public BadLayout06() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JMenuBar mb = new JMenuBar();
                mb.add(new JMenu("File"));

                JToolBar tb = new JToolBar();
                tb.add(new JButton("Zoom In"));
                tb.add(new JButton("Zoom Out"));
                tb.add(new JButton("Invert Image"));
                tb.add(new JButton("Toggle Highlights"));
                tb.add(new JButton("Save"));
                tb.add(new JButton("Cancel"));
                tb.setFloatable(false);

                JSplitPane spSub = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
                JTabbedPane tpLeft = new JTabbedPane();
                tpLeft.add("Table Entry", new JPanel());
                tpLeft.add("Form Entry", new JPanel());
                spSub.setLeftComponent(tpLeft);
                JTabbedPane tpRight = new JTabbedPane();
                tpRight.add("Field Help", new JPanel());
                tpRight.add("Image Navigation", new JPanel());
                spSub.setRightComponent(tpRight);

                JSplitPane spMain = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
                spMain.setLeftComponent(new JPanel());
                spMain.setRightComponent(spSub);

                JFrame frame = new JFrame("Testing");
                frame.setJMenuBar(mb);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(tb, BorderLayout.NORTH);
                frame.add(spMain, BorderLayout.CENTER);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

# android - Nexus 4 未通过 MTP 显示文件

> ID：13737261
> 
> 赞同：80
> 
> 时间：2012-12-06T05:02:47.117
> 
> 标签：android, usb-drive, nexus-4, mtp

我试图简单地将一个简单的 XML 文件写入 SD 卡，我注意到我的 Nexus 4 确实写入了该文件，但它无法通过使用 Windows 7 的 MTP 协议查看。

代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    CustomerQueryRqType customerQueryRequest = new CustomerQueryRqType();
    Serializer serializer = new Persister();
    File myFile = new File(Environment.getExternalStorageDirectory() + "/customerQueryRequest.xml");

    try {
        boolean created = myFile.createNewFile();
        serializer.write(customerQueryRequest, myFile);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我可以使用 Astro 文件管理器查看手机本身的文件：

[![截屏](../Images/c2eeb56fba8306e78d751df021b32a57.png)](https://i.stack.imgur.com/zsKo0.png)

但 Windows 看不到它...：

[![截屏](../Images/638cc02bb66df340757e72888cf09575.png)](https://i.stack.imgur.com/Bi67e.png)

`adb shell`目录上显示：

```
ls -l
drwxrwxr-x root     sdcard_rw          1970-01-16 20:51 Alarms
drwxrwxr-x root     sdcard_rw          1970-01-16 20:51 Android
drwxrwxr-x root     sdcard_rw          2012-11-21 19:30 DCIM
drwxrwxr-x root     sdcard_rw          1970-01-16 20:51 Download
drwxrwxr-x root     sdcard_rw          1970-01-16 20:51 Movies
drwxrwxr-x root     sdcard_rw          1970-01-16 20:51 Music
drwxrwxr-x root     sdcard_rw          1970-01-16 20:51 Notifications
drwxrwxr-x root     sdcard_rw          2012-11-19 12:06 Pictures
drwxrwxr-x root     sdcard_rw          1970-01-16 20:51 Podcasts
drwxrwxr-x root     sdcard_rw          2012-11-19 13:22 Ringtones
drwxrwxr-x root     sdcard_rw          2012-11-19 14:33 bluetooth
-rw-rw-r-- root     sdcard_rw       79 2012-12-05 22:26 customerQueryRequest.xml
drwxrwxr-x root     sdcard_rw          2012-11-20 02:50 data
-rw-rw-r-- root     sdcard_rw    11394 2012-11-19 13:54 eightpen_custom_gestures
drwxrwxr-x root     sdcard_rw          2012-11-19 13:17 media 
```

我的 Nexus 4 怎么了？为什么它对 Windows 隐藏我的东西？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-28T19:02:43.277

似乎是[影响通过 MTP 访问 Android USB 文件的已知问题](http://code.google.com/p/android/issues/detail?id=38282)。MTP 缓存会过期，直到手机重新启动。

一种[解决方法](http://forum.xda-developers.com/showthread.php?t=1719628)是：

*   清除“媒体存储”应用程序的数据
*   使用[SDrescan](https://play.google.com/store/apps/details?id=com.bero.sdrescan&hl=en)或[SD Scanner](https://play.google.com/store/apps/details?id=com.gmail.jerickson314.sdscanner)（也适用于 Android 4.4/5，在[F-Droid](https://f-droid.org/repository/browse/?fdid=com.gmail.jerickson314.sdscanner)上可用）应用程序强制更新

或者根本避免使用 USB。该问题不会影响访问文件的其他方法。例如，尝试[使用 AirDroid](https://play.google.com/store/apps/details?id=com.sand.airdroid)传输文件。

* * *

注意：这不适用于 Android 5.0.2：清除“媒体存储”并使用 SD Rescanner 后，这些文件夹在 Windows 7 中显示为无法打开的 4K 文件。此时唯一的解决方案是再次清除媒体存储并重新启动设备

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-12-06T00:47:06.447

您可以在文件关闭后使用以下代码

```
MediaScannerConnection.scanFile(this, new String[] { file.getAbsolutePath() }, null, null); 
```

来源： [https ://code.google.com/p/android/issues/detail?id=38282](https://code.google.com/p/android/issues/detail?id=38282)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-05T17:32:36.203

在这个问题上花了几个小时后，我解决了这样的问题：

```
private void rescanFolder(String dest) {
    // Scan files only (not folders);
    File[] files = new File(dest).listFiles(new FileFilter() {
        @Override
        public boolean accept(File pathname) {
            return pathname.isFile();
        }
    });

    String[] paths = new String[files.length];
    for (int co=0; co< files.length; co++)
        paths[co] = files[co].getAbsolutePath();

    MediaScannerConnection.scanFile(activity, paths, null, null);

    // and now recursively scan subfolders
    files = new File(dest).listFiles(new FileFilter() {
        @Override
        public boolean accept(File pathname) {
            return pathname.isDirectory();
        }
    });

    for (int co=0; co<files.length; co++)
        rescanFolder(files[co].getAbsolutePath());
} 
```

问题是您必须**只扫描文件**（而不是文件夹），然后为每个 fubfolder 递归重复

**编辑** 此外，如果您不希望将图片添加到您的相册（但只是您的内容通过 mtp 协议显示），请记住`.nomedia`在重新扫描之前在您的文件夹中放置一个空文件，如下所示：

```
new File(myFolder + File.separator + ".nomedia").createNewFile();
rescanFolder(myFolder); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-25T12:35:43.923

[对于已接受答案](https://stackoverflow.com/a/14074407/878954)中提到的错误，我发现的最佳解决方法是使用 SSH 将数据从 Android 操作系统复制到另一台机器/服务器（Linux、MacOS、Windows）。

*   确保设备 (Android) 和机器（您要复制数据的位置）可以通过 IP 或主机名访问，例如通过将它们连接到同一个 wifi 网络。

**可选和推荐**

*   使用 USB 网络共享连接 android 设备。由于有线连接，这确保了快速的速度，并保证了两个 IP 地址对彼此可见，因为它们都在同一个网络中。

**在安卓设备中**

*   安装 SSH 服务器。[SSHelper](http://arachnoid.com/android/SSHelper/)的工作就像一个魅力
*   运行 SSHelper 并转到配置选项卡以获取 IP 地址、端口和密码。在下面的示例中，它们是 192.168.1.5、2222 和 'admin'。
*   默认密码是 admin 但如果您决定更改它，请在更改后点击“使用新值重新启动服务器”按钮

**在机器里**

*   安装 rsync。如果碰巧使用 Ubuntu，它已经默认安装。
*   打开 shell 并键入以下命令。将 IP 地址和端口更改为您的值

`rsync -avzhP --inplace --info=progress2 -e 'ssh -p 2222' 192.168.1.5:/storage/emulated/0/DCIM/Camera/ /home/username/path/to/pics/`

*   您将收到以下提示，请输入您的密码

`SSHelper Version 8.5 Copyright 2014, P. Lutus Default password is "admin" (recommend: change it) username@192.168.1.5's password: admin receiving incremental file list`

**其他建议**对我不起作用：

*   设备不支持使用 USB 存储模式而不是 MTP（与许多其他较新的设备一样）。
*   我的操作系统（Android 6.0.1）中没有清除“媒体存储”应用数据的选项。
*   通过网络共享文件的其他方法也有其缺点。FTP 不保证文件的完整性。如果断开连接，它会覆盖或跳过所有文件，因此其中一个文件可能不完整。其他协议可能难以安装，其他应用程序可能使用专有协议。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-29T17:24:17.877

在 Xperia Z 上，以下代码运行良好：

```
 String screenShotFile = "....";
  activity.sendBroadcast(new Intent(
        Intent.ACTION_MEDIA_MOUNTED, Uri
                .fromFile(screenShotFile))); 
```

对于 4.4+ 使用：

```
activity.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,
                                Uri.fromFile(screenShotFile))); 
```

（不幸的是，我不记得我是否已经测试得足够好）

[http://commonsware.com/blog/2013/11/06/android-4p4-permission-regressions.html](http://commonsware.com/blog/2013/11/06/android-4p4-permission-regressions.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-07T02:43:49.407

注意/存储/模拟。Android 4.2 有一些时髦的模拟每个应用程序/用户访问的东西，例如每个用户都有一个单独的 /sdcard/。尝试将文件移动到 /sdcard/ 而不是显示的模拟 sdcard。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-03T12:13:24.317

提出质疑的简单代码[如何在 Android 上刷新 MediaStore？](https://stackoverflow.com/a/14849652/1862638)如果在我将文件放在外部存储上后调用，则对 MediaStore 进行必要的更新。我的 Nexus 4 上的内容会在 Window 7 文件资源管理器中立即刷新。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-19T04:22:50.090

我需要为我的应用创建一个目录并复制一些示例文件。经过大量的实验和研究，以下程序对我来说完美无缺：

1) 使用 File.mkdir() 创建目录。

2) 复制目录中的文件并在每个文件上运行 MediaScanner。

```
MediaScannerConnection.scanFile(context, new String[]{file.getAbsolutePath()}, null, null); 
```

3) 在目录上运行 MediaScanner。

```
MediaScannerConnection.scanFile(context, new String[]{directory.getAbsolutePath()}, null, null); 
```

结果：文件和目录通过 MTP 立即出现在 PC 上。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-16T12:05:06.133

我的 OneplusOne 也有类似的问题：

软件更新（到 6.0.1）后，我在连接到计算机（PTP 和 MTP）时看不到我的相机照片。应用程序的 SDRescan 和 SDscanner 均无效。

我的解决方案是使用终端或手机上的任何文件资源管理器应用程序将所有图片从 DCIM 复制到另一个文件夹。连接到计算机时，我能够看到复制的文件..我将它们移动到我的计算机并清除了我的相机文件夹。没有永久的解决方案，但至少在我进行下一次备份之前，它为我解决了这个问题。=D

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-20T19:52:39.427

以上答案适用于创建文件。如果您稍后删除该文件并希望也反映该更改，您可以执行以下操作之一；让我们首先介绍两种看似可行但会在某些设备上引起问题的解决方案。第一个是扫描删除的文件：

```
context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.fromFile(file))); 
```

这适用于许多设备以删除文件，但在某些设备上，它实际上会导致创建一个新的 0 字节文件，这可能不是您想要的。在这种情况下，如果你在 < 4.4 KitKat 上运行，你可以这样做：

```
context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.fromFile(folder))); 
```

其中文件夹等于 file.getParentFile()。不幸的是，在 KitKat 4.4 及更高版本上，这将导致抛出 SecurityException，因此对于这些设备，您可以尝试直接从 Media Store 中删除：

```
final Uri externalFilesUri = Files.getContentUri("external");
context.getContentResolver().delete(externalFilesUri, Files.FileColumns.DATA + "=?", new String[] {file.getAbsolutePath()}); 
```

我已经测试了这个作为 ACTION_MEDIA_MOUNTED 在 KitKat 上不起作用的解决方法，它适用于我在 Nexus 5 上的测试。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-30T05:23:54.883

最近我遇到了同样的问题，但一些额外的研究有助于找到隐藏文件。谷歌似乎在存储结构上做了一些改变。所有这些文件都被移动到另一个文件夹`This Computer\HTC One\Internal Storage\storage\emulated\0`。但奇怪的是，并非所有文件都被移动了。

安卓 4.4.2

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-29T22:18:54.120

从[此处](https://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory())的文档中，您需要调用 MediaScannerConnection.scanFile ：

```
// Tell the media scanner about the new file so that it is
// immediately available to the user.
MediaScannerConnection.scanFile(this,
        new String[] { file.toString() }, null,
        new MediaScannerConnection.OnScanCompletedListener() {
    public void onScanCompleted(String path, Uri uri) {
        Log.i("ExternalStorage", "Scanned " + path + ":");
        Log.i("ExternalStorage", "-> uri=" + uri);
    }
}); 
```

# java - Java中的多态排序转换

> ID：13737263
> 
> 赞同：-1
> 
> 时间：2012-12-06T05:03:00.237
> 
> 标签：java, arrays, sorting

我需要以下问题的帮助。首先我列出了 Numbers.java，下面是我对 Strings.java 的尝试。请帮忙！

1.  编写一个类似于 Numbers.java 的程序 Strings.java，它读入一个 String 对象数组并对它们进行排序。您可以只复制和编辑 Numbers.java。

    ```
    package hw05;

    /*  
    Demonstrates selectionSort on an array of integers.
    */ 

    import java.util.Scanner;

    public class Numbers {  
    // --------------------------------------------  
    // Reads in an array of integers, sorts them,  
    // then prints them in sorted order.  
    // --------------------------------------------  
    public static void main(String[] args) {

        Integer[] intList;
        int size;

        Scanner scan = new Scanner(System.in);

        System.out.print("\nHow many integers do you want to sort? ");
        size = scan.nextInt();
        intList = new Integer[size];

        System.out.println("\nEnter the numbers...");
        for (int i = 0; i < size; i++)
            intList[i] = scan.nextInt();
        Sorting.selectionSort(intList);

        System.out.println("\nYour numbers in sorted order...");
        for (int i = 0; i < size; i++)
            System.out.print(intList[i] + " ");
        System.out.println();

    }
    } 
    ```

我的弦乐课

```
package hw05;

/*
Demonstrates selectionSort on an array of strings.
*/
import java.util.Scanner;

public class Strings {
    // --------------------------------------------
    // Reads in an array of strings, sorts them,
    // then prints them in sorted order.
    // --------------------------------------------
    public static void main(String[] args) {

        String[] stringList;
        String size;

        Scanner scan = new Scanner(System.in);

        System.out.print("\nHow many strings do you want to sort? ");
        size = scan.nextLine();
        stringList = new String[size];

        System.out.println("\nEnter the strings...");
        for (String i = 0; i < size; i++)
            stringList[i] = scan.nextLine();
        Sorting.selectionSort(stringList);

        System.out.println("\nYour strings in sorted order...");
        for (String i = 0; i < size; i++)
            System.out.print(stringList[i] + " ");
        System.out.println();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:28:15.693

由于这里的声明，您将收到一个错误：

```
String size; 
```

当您稍后将其用作整数时：

```
stringList = new String[size]; 
```

你应该像这样使用 Integer.parse：

```
stringList = new String[Integer.parseInt(size)]; 
```

但是您稍后再次将 size 用于您的循环，因此我建议将其恢复为 int ，就像您在 Numbers.java 中一样。请务必将您的扫描仪改回：

```
scan.nextInt(); 
```

除此之外，我看不到任何其他问题。也许如果您发布输出并指出什么不起作用？

# c# - 如何使用适配器将自定义字体设置为 ListView 项中的 TextView 之一？

> ID：13737264
> 
> 赞同：1
> 
> 时间：2012-12-06T05:02:59.133
> 
> 标签：c#, java, android, xml-parsing

如何使用适配器将自定义字体设置为 ListView 项中的 TextView 之一？

我使用了这段代码，但在**getView**方法中出现运行时异常。

```
import java.util.ArrayList;

import java.util.HashMap;

import android.view.ViewGroup;

import com.hands.daily.duas.database.MyDbClass;

import android.app.Activity;

import android.content.Context;

import android.graphics.Typeface;

import android.view.LayoutInflater;

import android.view.View;

import android.widget.BaseAdapter;

import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    static int i=11;

    private Activity activity;

    public ArrayList<HashMap<String, String>> data;

    private static LayoutInflater inflater=null;

    First fst=new First();

  //  public ImageLoader imageLoader;

    String urlString="";

   MyDbClass mdbclass;

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> list) {

         data=new ArrayList<HashMap<String, String>>();

        activity = a;

        data=list;

        inflater=(LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //  imageLoader=new ImageLoader(activity.getApplicationContext());

    }
    public int getCount() {

        return data.size();

    }

    public Object getItem(int position) {

        return position;

    }

    public long getItemId(int position) {

        return position;

    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View vi=convertView;

        if(convertView==null)

            vi = inflater.inflate(R.layout.duas_rowlist, null);

        TextView duatv = (TextView)vi.findViewById(R.id.textView1); // duatv

        Typeface tf = Typeface.createFromAsset(convertView.getContext().getAssets(),"fonts/Molot.otf");

        duatv.setTypeface(tf);

        HashMap<String, String> song = new HashMap<String, String>();

        song = data.get(position);

        // Setting all values in listview

       // String eventName1=song.get(First.Duas).toString();

        duatv.setTextSize(i);

     duatv.setText(song.get(First.Duas));

        return vi;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:33:22.920

```
 Typeface tf = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/Molot.otf"); 
```

这可能就是为什么。即使适配器确实有上下文，您也不应该从适配器中的转换视图中获取上下文。这种事情属于你的适配器的构造函数，它接受传入的活动的上下文。我也重新格式化了你的构造函数。

```
public ArrayList<HashMap<String, String>> data;
private LayoutInflater inflater;
private Typeface tf;

public LazyAdapter(Context context, ArrayList<HashMap<String, String>> data) {
    this.data = data;
    inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    tf = Typeface.createFromAsset(context.getAssets(), "fonts/Molot.otf");
    // imageLoader=new ImageLoader(context);
}

...... 
```

# php - 解释 : echo (2) 的输出。(3 * (打印 3));

> ID：13737265
> 
> 赞同：-1
> 
> 时间：2012-12-06T05:03:07.577
> 
> 标签：php

我知道上面的代码输出 323

但需要解释它是如何输出 323

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T05:36:13.620

echo 和 print 都旨在表现得更像语言结构而不是函数。因此，它们具有控制流。您的代码中发生的情况是您从语言构造（*echo*）内部调用 print 。这意味着 print 将在 echo 完成其任务之前首先发送其输出（请记住，您从 echo 内部调用了 print）。

为了更清楚地向您展示发生了什么，它实际上与运算符优先级无关。

```
echo ('a') . ('b' * (print 'c')); // ca0

// This is the same thing as...

echo 'a' . 'b' * print 'c';       // ca0 
```

请注意，运算符对此处结果输出中的字符顺序没有影响。

print 总是返回 1，所以这里发生的是您对 执行了算术运算`'b' * 1`，这是 string **b**乘以**print**的返回值。因此，为什么您首先将输出视为 c （在 echo 完成工作之前打印发送的输出），然后是 echo 应该打印的所有内容。

让我通过以下示例进一步详细说明...

```
echo print 'a' . 'b' . 'c'; // abc1 
```

请注意该输出末尾的 1。**这是因为所有 echo 所做的都是输出print**的返回值，而不是字符串。相反， print 是提供`abc`as 输出的那个（记住 print 能够在 echo 之前发送输出，因为 echo 必须等待处理结构内部的所有内容才能完成）。

这样就更清楚了……

```
echo (print 'a') . 'b' . 'c'; // a1bc 
```

现在 1 紧跟在 a 之后。

如果您希望 echo 单独发送每个表达式的输出，您可以为要处理并发送到输出的每个表达式提供一个参数......例如：

```
echo print 'a', 'b', 'c'; // a1bc
echo 2, 3 * print 3; // 233 
```

我希望这对你来说更清楚一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:19:27.247

原因是`(print 3)`优先于以前的运算符。如果你写 `echo (8) 。(7 * (打印 3)); 例如，您将获得 387。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:17:30.253

这里

回声（2）。（3 *打印（3））；

Step1：（开始执行）

```
echo (2).(3*print(3)); //Output = '' 
```

第 2 步：（将执行打印操作）

```
 echo (2).(3*1); // Will print 3 and returns 1 as per print function. Output = 3 
```

第三步：（乘法运算）

```
 echo (2).(3);  // Multiplication operation willtake place. Output = 3 
```

第四步：（打印数据）

```
 echo (2).(3);  //The . Operator will used to concate the strings in php, thus Output = 323 
```

打印具有比回显更高的优先级，因此它先打印 3，然后再打印 2 和 3

# c# - TextBlocks 在转换后跳跃一点

> ID：13737266
> 
> 赞同：0
> 
> 时间：2012-12-06T05:03:17.000
> 
> 标签：c#, xaml, windows-8, windows-runtime, transitions

我将 EntranceThemeTransition 应用于包含一堆控件的 StackPanel。当我显示一个弹出窗口时，一切正常，除了在动画后跳跃一点的 TextBlocks。

这是一个视频： [http ://screencast.com/t/VXSiti6Mh](http://screencast.com/t/VXSiti6Mh)

这是我正在使用的代码：

```
<StackPanel Margin="40">
    <StackPanel.ChildrenTransitions>
        <TransitionCollection>
            <EntranceThemeTransition FromHorizontalOffset="100" />
        </TransitionCollection>
    </StackPanel.ChildrenTransitions>
    <TextBlock Text="Filter Results" />
    <TextBlock >Show</TextBlock>
</StackPanel> 
```

弹出窗口本身将 PaneThemeTransition 设置为转换。

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:15:59.677

你有没有尝试过：

```
UseLayoutRounding="True" SnapsToDevicePixels="True" 
```

在容器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:14:09.647

我找到了一种解决方法 - 用 StackPanel 包装每个文本块。显然它并不理想，但它确实有效。

我仍然想知道是否有一种方法可以在没有黑客的情况下修复它......

# java - 未从文件中正确读取值

> ID：13737267
> 
> 赞同：0
> 
> 时间：2012-12-06T05:03:20.180
> 
> 标签：java, arrays, arraylist, file-io

我正在尝试从以逗号分隔的文件中读取 x,y 坐标。但是，元素未正确添加到 ArrayList。我在哪里错了？

```
ArrayList<Double> xpointArrayList = new ArrayList<Double>();
ArrayList<Double> ypointArrayList = new ArrayList<Double>();
try {
    BufferedReader input = new BufferedReader(new FileReader(args[0]));
    String line;
    while ((line = input.readLine()) != null) {
        line = input.readLine();
        String[] splitLine = line.split(",");

        double xValue = Double.parseDouble(splitLine[0]);
        double yValue = Double.parseDouble(splitLine[1]);

        xpointArrayList.add(xValue);
        ypointArrayList.add(yValue);
    }
    input.close();

    } catch (IOException e) {

    } catch (NullPointerException npe) {

    }

    double[] xpoints = new double[xpointArrayList.size()];
    for (int i = 0; i < xpoints.length; i++) {
        xpoints[i] = xpointArrayList.get(i);
    }
    double[] ypoints = new double[ypointArrayList.size()];
    for (int i = 0; i < ypoints.length; i++) {
        ypoints[i] = ypointArrayList.get(i);
    } 
```

当我对 xpoints 和 ypoints 数组执行 Array.toSring 调用时。它只有一个数字。例如在文件中：

```
1,2
3,4
0,5 
```

xpoints 数组只有 3.0，ypoints 数组只有 4.0。它哪里出错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T05:07:30.533

```
while ((line = input.readLine()) != null) {
    line = input.readLine(); 
```

您只需阅读一行，将其丢弃，然后再阅读另一行。

冲洗，重复（因为它是一个循环）。

将来，您真的应该考虑使用调试器。您可以在代码执行时单步执行代码，并准确查看发生了什么。学习使用它将是*无价*的。

**编辑添加：**正如 GregHaskins 指出下面的评论，您还通过捕捉`NullPointerException`而不采取行动来掩盖问题。在循环的第二次迭代中，`line`将`null`在第二次调用时，`readLine()`因为文件中没有任何内容。调用`split()`then 会抛出一个`NullPointerException`你捕获的...然后默默地忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:13:46.987

您还可以使用 Scanner 类读取输入。以下是使用 Scanner 和 File 类读取文件的代码的修改版本：

```
ArrayList<Double> xpointArrayList = new ArrayList<Double>();
ArrayList<Double> ypointArrayList = new ArrayList<Double>();
try {
    Scanner input = new Scanner(new File("testing.txt"));
    String line;
    while (input.hasNextLine()) {
        line = input.nextLine();
        String[] splitLine = line.split(",");

        double xValue = Double.parseDouble(splitLine[0]);
        double yValue = Double.parseDouble(splitLine[1]);

        xpointArrayList.add(xValue);
        ypointArrayList.add(yValue);
    }
    input.close();

    } catch (IOException e) {

    } catch (NullPointerException npe) {

    }

    double[] xpoints = new double[xpointArrayList.size()];
    for (int i = 0; i < xpoints.length; i++) {
        xpoints[i] = xpointArrayList.get(i);
    }
    double[] ypoints = new double[ypointArrayList.size()];
    for (int i = 0; i < ypoints.length; i++) {
        ypoints[i] = ypointArrayList.get(i);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:13:53.000

你的阅读方式不对。您正在调用 readLine() 两次。一个在顶部，另一个在进入 while() 循环之后。这样你就不会处理所有的点。一些点坐标被忽略。你应该使用。

```
while ((line = input.readLine()) != null) {

//line = input.readLine(); */Remove this */

*/your code */

} 
```

# ruby-on-rails - Rails 3 中的历史维护

> ID：13737271
> 
> 赞同：0
> 
> 时间：2012-12-06T05:03:30.463
> 
> 标签：ruby-on-rails

我有一个用户模型，它有很多字段，包括用户的权重。管理员用户可以随时更改特定用户的权重。是否可以维护特定用户的体重历史记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:25:03.453

没有内置的模型版本控制，但有一堆可以帮助你的 gem。我建议查看[paper_trail](https://github.com/airblade/paper_trail)和[vestal_versions](https://github.com/laserlemon/vestal_versions)。

Ryan Bates 有一些很好的截屏视频，涵盖了一些功能：

*   [使用 Paper Trail 撤消](http://railscasts.com/episodes/255-undo-with-paper-trail)
*   [模型版本控制](http://railscasts.com/episodes/177-model-versioning)

我建议专注于 paper_trail 因为它仍在维护中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:23:45.123

这是可能的。并非没有编写一些代码或使用 gem。我建议你看一下其中的一些……尤其是 Papertrail 似乎很受欢迎。

[https://www.ruby-toolbox.com/categories/Active_Record_Versioning](https://www.ruby-toolbox.com/categories/Active_Record_Versioning)

# java - 在 Google App Engine/Java 中计算时差

> ID：13737275
> 
> 赞同：1
> 
> 时间：2012-12-06T05:03:43.597
> 
> 标签：java, google-app-engine, localization, timezone, timezone-offset

我正在研究谷歌应用引擎。如果客户端发送的时间与服务器上的时间之间的时间差小于 15 秒，我正在做一些需要我做的事情。当我在测试服务器（在我自己的机器上）上尝试时，该代码运行良好。但是当我将代码部署在应用程序引擎上时失败。我猜这可能是因为如果服务器上的时区不同，那么发生这种情况时可能会增加/减少几个小时。

我基本上做的是让客户发送他的时间戳以及其他数据。当服务器随后需要计算时差时，我会从客户端的时间戳中减去服务器的时间戳。

如果时区不同，那么显然我会遇到问题。

我知道避免这种时区惨败的一种解决方案是让服务器为初始请求和稍后的后续处理加上时间戳，但对于我的应用程序来说，定时器必须从客户端发出请求时开始计时，如果对于客户端，15 秒过去了，服务器没有采取任何行动。

由于我是客户端和服务器端的开发人员，我可以向您展示我所做的事情。

**示例客户端调用**

```
new Register().sendToServer(username,location,new TimeStamp(new Date().getTime())); 
```

如果满足某些条件，这将存储在数据存储中并稍后检索。

**服务器端示例以发现差异**

```
Date date= new Timestamp(new Date().getTime());
Date d1 = (Date) timeStampList[i];
long timedif = Math.abs(d1.getTime() - date.getTime());
if(timedif <= 15000)
    do something;
else
    do something else; 
```

所以基本上，我的问题是如何标准化时区变化？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:44:27.003

Simpy 使用绝对的[unix 时间](http://en.wikipedia.org/wiki/Unix_time)：[`System.currentTimeMillis()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#currentTimeMillis%28%29)。

该时间是绝对时间，即自 1970 年 1 月 1 日 UTC 午夜以来的毫秒数），因此您可以简单地计算差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:42:02.277

正如@Diego Basch 指出的那样，如果时差在 30 分钟到整小时之间，您应该处理时区差异，因为您的客户端与服务器不在同一个时区。

您可以使用 JavaScript 确定客户端时区`new Date().getTimezoneOffset()`。注意：与 UTC 的偏移量以分钟为单位返回。

在服务器上，您应该能够使用`Calendar.getInstance().getTimeZone()`.

# javascript - 基于浏览器的开源图像字幕工具？

> ID：13737279
> 
> 赞同：0
> 
> 时间：2012-12-06T05:04:41.117
> 
> 标签：javascript, rich-internet-application

寻找基于浏览器的工具（有点像所见即所得的编辑器），但它允许用户在照片上覆盖文本。它应该是支持 croww 浏览器的，我一直在搜索 github，但结果很短。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:35:06.173

你可以试试这个：

[https://github.com/adityab/memecached](https://github.com/adityab/memecached)

它是用 Javascript 编写的，这显然很好（因为您可以轻松地将其放入浏览器中，这就是它的用途），并使用 mongodb（我认为在您的情况下可能会很好地扩展，因为您不需要复杂的操作真的在数据库上）。缺点是它依赖于 Dropbox，所以除非你喜欢那个功能，否则你可能不得不改变它。

# javascript - 获取 request_token 时，Blackberry Twitter 会弹出

> ID：13737301
> 
> 赞同：1
> 
> 时间：2012-12-06T05:07:35.847
> 
> 标签：javascript, twitter-oauth, phonegap-plugins, blackberry-webworks

我正在开发一个基于 phonegap 的黑莓应用程序，在这个应用程序中，我有 twitter 共享功能。我已经编写了使用 oauth 从 twitter 获取 request_token 的代码，我收到一个弹出窗口说：api.twitter.com 上的内容需要身份验证。请输入用户名和密码。这不是预期的功能。而不是这个，我需要获取 request_token 并在子浏览器中打开 Twitter 登录页面，但我不知道为什么我会弹出这个？请帮助我。我使用的代码如下：

```
 oauth = OAuth(options);
    oauth.get('https://api.twitter.com/oauth/request_token',
            function(data) {
                requestParams = data.text;
                window.plugins.childBrowser.showWebPage('https://api.twitter.com/oauth/authorize?'+data.text, 
                        { showLocationBar : false });                    
            },
            function(data) { 
                alert('Error : No Authorization'); 
                console.log("AppLaudLog: 2 Error " + data); 
                $('#oauthStatus').html('<span style="color:red;">Error during authorization</span>');
            }
    ); 
```

# java - 如何控制加密字符串的长度？

> ID：13737305
> 
> 赞同：2
> 
> 时间：2012-12-06T05:07:45.193
> 
> 标签：java, encryption

无论输入如何，是否可以保证输出具有一定的长度？

例如，我想传入一个字符串并保证它的加密等价物将包含 45 个字符。无论输入是否是爱丽丝梦游仙境的 1 个字符，这 45 个字符都必须存在。

*注意*：45显然是一个例子，关键是输出字符的数量应该以某种方式控制（确切的数字，或者被5整除，甚至）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:11:00.177

否 - 无法指定固定的结果长度。如果数据足够长，则无法将其加密为固定的短任意长度（这将是惊人的压缩）。有可能设计出`hash`这种性质的。但是哈希是不同的（这是一种方式；您不能从哈希中提取原始数据）。

不过，可以通过使用填充来控制长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:12:54.310

如果您将限制设置为“足够高”，是的，您可以使用填充和流密码轻松地做您想做的事情。

例如，看看分组密码的 CTR（计数器）操作模式：[http ://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Counter_.28CTR.29](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Counter_.28CTR.29)

在 CTR 模式下使用 AES-128，如果您使用随机 IV 并将其插入密文的开头，您知道密文的大小将恰好是 16 字节 + 明文的大小。因此，例如，如果将密文长度固定为 100 字节，则可以加密最多 84 字节的纯文本。您必须填充较短的纯文本。例如，如果您正在加密 ASCII 文本，您可以使用字节 0x00 作为字符串结尾的标记（就像 C 中的“空终止字符串”一样），然后用随机垃圾填充直到得到 84字节。

您可以使用许多其他常见的填充方案：[http://en.wikipedia.org/wiki/Padding_(cryptography)](http://en.wikipedia.org/wiki/Padding_(cryptography))

我只是想到了另一种可能性：您可以使用某种经过身份验证的加密，例如 Galois/Counter Mode (GCM)。您将随机 IV 与密文连接起来，并将其与随机字节连接以将其填充到所需的大小。然后，要解密，您只需尝试密文的每个子字符串：如果您得到正确的子字符串，解密算法将输出明文；否则，它将输出“错误”。请注意，使用它，您可能会在您的方案中引入一些定时攻击，并且如果纯文本的大小变化很大，您还可能会进行大量计算来解密密文。

在任何情况下，请务必让密码学专家审查您的方案（例如，在您设计方案后，在[https://crypto.stackexchange.com/](https://crypto.stackexchange.com/)上询问它），因为很容易忽略一些攻击可能性。

# asp.net - RadNumericTextBox 中的舍入问题

> ID：13737309
> 
> 赞同：2
> 
> 时间：2012-12-06T05:08:23.427
> 
> 标签：asp.net, c#-4.0, telerik, telerik-ajax

我有一个 RadNumericTextBox 如下：

```
 <telerik:RadNumericTextBox ID="txtCurSalBudget" runat="server" Enabled="False" >
                <NumberFormat AllowRounding="false" />
                </telerik:RadNumericTextBox> 
```

当我将值 23190642.0 移动到此文本框时，它会被舍入，结果是 23190640，即使 AllowRounding="false"。

如何避免这种四舍五入，以便我得到实际值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T15:12:16.510

使用此代码在文本框中显示十进制数字：

```
<telerik:RadNumericTextBox ID="txtCurSalBudget" runat="server" Enabled="False" >
                <NumberFormat AllowRounding="false" DecimalDigits="2" GroupSeparator=" " />
</telerik:RadNumericTextBox> 
```

该物业

> 十进制数

允许在您的文本框中显示不超过您输入的数字的十进制数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:34:38.913

如果您始终希望始终保持小数点后一位的精度，您可以更改 NumberFormat 元素以反映这一点：

```
 <telerik:RadNumericTextBox ID="RadNumericTextBox1" 
                               runat="server" 
                               Culture="en-US">
        <NumberFormat AllowRounding="false" 
                      PositivePattern="n.0" 
                      NumericPlaceHolder="n" />
    </telerik:RadNumericTextBox> 
```

此示例 NumericTextBox 是否满足您的需求？

# java - Java 用排除项替换所有正则表达式

> ID：13737312
> 
> 赞同：4
> 
> 时间：2012-12-06T05:08:55.273
> 
> 标签：java, regex, replaceall

我正在尝试替换句子终止符的所有实例，例如“。”、“？”和“！”，但我不想替换“博士”之类的字符串。和“先生”。

我尝试了以下方法：

`text = text.replaceAll("(?![mr|mrs|ms|dr])(\\s*[\\.\\?\\!]\\s*)", "\n");`

...但这似乎不起作用。任何建议，将不胜感激。

* * *

**编辑**：在这里的反馈和一些 tweeking 之后，这是我的问题的有效解决方案。

```
private String convertText(String text) {
  text = text.replaceAll("\\s+", " ");
  text = text.replaceAll("[\n\r\\(\\)\"\\,\\:]", "");
  text = text.replaceAll("(?i)(?<!dr|mr|mrs|ms|jr|sr|\\s\\w)(\\s*[\\.\\?\\!\\;](?:\\s+|$))","\r\n");
  return text.trim();
} 
```

该代码将从文本摘录中提取所有*复合句和单个句子，删除所有标点符号和无关空格。
**有一些例外...*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:20:36.923

你需要像这样使用负面的lookbehind而不是负面的lookahead

```
String x = "dr. house.";
System.out.println(x.replaceAll("(?<!mr|mrs|ms|dr)(\\s*[\\.\\?\\!]\\s*)","\n")); 
```

列表`mr/dr/ms/mrs`也不应该在字符类中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T05:19:09.447

您将需要一个完整的字母组合列表，这些字母组合可以放在前面`.`。然后，您可以将`dr.`and `mr.`（以及任何其他允许的组合）替换为独特的东西，例如`dr28dsj458sj`and `mr28dsj458sj`。理想情况下，您应该检查您的临时替代值是否存在于文档中的其他位置。然后遍历并删除所有句子终止符，然后再次遍历并再次替换出现的`28dsj458sj`with `.`。

# objective-c - 检索 Facebook 好友并邀请他们加入我的 iOS 应用

> ID：13737314
> 
> 赞同：0
> 
> 时间：2012-12-06T05:09:30.470
> 
> 标签：objective-c, ios5, facebook-ios-sdk, email-address

我正在开发一个 iOS 应用程序，我想在其中检索我的 facebook 朋友并将其发送到服务器，以检查谁已经使用他们的电子邮件或电话号码使用此应用程序。一旦我得到不使用我的应用程序的朋友，我将显示“邀请”按钮向他们的电子邮件地址发送一封电子邮件，其中包含应用商店链接以下载该应用程序。

但根据 facebook 权限，**我们无法检索 facebook 朋友的电子邮件地址。** 任何人都可以知道如何以其他方式实现此功能吗？任何形式的帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:13:08.413

您无法检索 Facebook 朋友的电子邮件地址，但您可以在他们的墙上发布您想要发布的任何链接，即应用商店链接以下载该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T11:24:24.210

你可以看看我的[这个](https://stackoverflow.com/questions/6638955/facebook-ios-sdk-get-list-of-friends/16656946#16656946)帖子。

由于 facebook 不提供电子邮件地址，因此此解决方案背后的想法是，您可以在 AppStore 中发送邀请好友请求以及指向您的应用程序的链接。为了完成这个案例，我已经简要描述了链接中要遵循的步骤。

邀请信息可能如下所示：

> 我想让你试试 XYZ 游戏。这是 AppStore 中此应用程序的链接： [Facebook iOS SDK - 获取好友列表](https://stackoverflow.com/questions/6638955/facebook-ios-sdk-get-list-of-friends/16656946#16656946)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T06:52:58.987

您可以使用以下 FB Graph API(/me/invitable_friends) 来获取非应用好友 -

// m_invitableFriends - 保存可邀请好友列表的全局数组

```
- (void) getAllInvitableFriends
{
    NSMutableArray *tempFriendsList =  [[NSMutableArray alloc] init];
    NSDictionary *limitParam = [NSDictionary dictionaryWithObjectsAndKeys:@"100", @"limit", nil];
    [self getAllInvitableFriendsFromFB:limitParam addInList:tempFriendsList];
}

- (void) getAllInvitableFriendsFromFB:(NSDictionary*)parameters
                            addInList:(NSMutableArray *)tempFriendsList
{
    [FBRequestConnection startWithGraphPath:@"/me/invitable_friends"
                                 parameters:parameters
                                 HTTPMethod:@"GET"
                          completionHandler:^(
                                              FBRequestConnection *connection,
                                              id result,
                                              NSError *error
                                              ) {
                              NSLog(@"error=%@",error);

                              NSLog(@"result=%@",result);

                              NSArray *friendArray = [result objectForKey:@"data"];

                              [tempFriendsList addObjectsFromArray:friendArray];

                              NSDictionary *paging = [result objectForKey:@"paging"];
                              NSString *next = nil;
                              next = [paging objectForKey:@"next"];
                              if(next != nil)
                              {
                                  NSDictionary *cursor = [paging objectForKey:@"cursors"];
                                  NSString *after = [cursor objectForKey:@"after"];
                                  //NSString *before = [cursor objectForKey:@"before"];
                                  NSDictionary *limitParam = [NSDictionary dictionaryWithObjectsAndKeys:
                                                              @"100", @"limit", after, @"after"
                                                              , nil
                                                              ];
                                  [self getAllInvitableFriendsFromFB:limitParam addInList:tempFriendsList];
                              }
                              else
                              {
                                  [self replaceGlobalListWithRecentData:tempFriendsList];
                              }
                          }];
}

- (void) replaceGlobalListWithRecentData:(NSMutableArray *)tempFriendsList
{
    // replace global from received list
    [m_invitableFriends removeAllObjects];
    [m_invitableFriends addObjectsFromArray:tempFriendsList];
    //NSLog(@"friendsList = %d", [m_invitableFriends count]);
    [tempFriendsList release];
} 
```

邀请非应用好友 -

您将获得带有我/invitable_friends graph api返回的朋友列表的邀请令牌。您可以将这些邀请令牌与 FBWebDialogs 一起使用，向朋友发送邀请，如下所示

```
- (void) openFacebookFeedDialogForFriend:(NSString *)userInviteTokens {

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   userInviteTokens, @"to",
                                   nil, @"object_id",
                                   @"send", @"action_type",
                                   actionLinksStr, @"actions",
                                   nil];

    [FBWebDialogs
     presentRequestsDialogModallyWithSession:nil
     message:@"Hi friend, I am playing game. Come and play this awesome game with me."
     title:nil
     parameters:params
     handler:^(
               FBWebDialogResult result,
               NSURL *url,
               NSError *error)
     {
         if (error) {
             // Error launching the dialog or sending the request.
             NSLog(@"Error sending request : %@", error.description);
         }
         else
         {
             if (result == FBWebDialogResultDialogNotCompleted)
             {
                 // User clicked the "x" icon
                 NSLog(@"User canceled request.");
                 NSLog(@"Friend post dialog not complete, error: %@", error.description);
             }
             else
             {
                 NSDictionary *resultParams = [g_mainApp->m_appDelegate parseURLParams:[url query]];

                 if (![resultParams valueForKey:@"request"])
                 {
                     // User clicked the Cancel button
                     NSLog(@"User canceled request.");
                 }
                 else
                 {
                     NSString *requestID = [resultParams valueForKey:@"request"];

                     // here you will get the fb id of the friend you invited,
                     // you can use this id to reward the sender when receiver accepts the request

                     NSLog(@"Feed post ID: %@", requestID);
                     NSLog(@"Friend post dialog complete: %@", url);
                 }
             }
         }
     }];
} 
```

# python - 拆分由多个可能字符分隔的字符串？

> ID：13737315
> 
> 赞同：1
> 
> 时间：2012-12-06T05:09:33.703
> 
> 标签：python, split

> ...请注意，值将由一个或多个空格或 TAB 字符分隔

如果有多个不同类型的分隔字符，我该如何使用 split() 方法，就像这种情况一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:15:09.537

使用正则表达式进行拆分，而不仅仅是一个分隔符：

[http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:16:17.887

默认情况下 split 可以处理多种类型的空白，不确定它是否足以满足您的需要，但请尝试：

```
>>> s = "a \tb     c\t\t\td"
>>> s.split()
['a', 'b', 'c', 'd'] 
```

它当然适用于混合的多个空格和制表符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:48:54.063

我遇到了一些由不同空格字符分隔的字符串的相同问题，并使用了**\s**，如[正则表达式](http://docs.python.org/2/library/re.html)库规范中所示。

**\s 匹配任何空白字符，这相当于集合 [ \t\n\r\f\v]。**

您将需要导入**re**作为正则表达式处理程序：

```
import re
line = "something separated\t by \t\t\t different \t things"
workstr = re.sub('\s+','\t',line) 
```

`\s`因此，任何重复一次或多次 ( ) 的空格或分隔符 ( `+`) 都将转换为单个列表 ( `\t`)，您可以使用 split('\t') 重新处理

```
workstr = "something`\t`separated`\t`by`\t`different`\t`things"
newline = workstr.split('\t')
newline = ['something','separated','by','different','things'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T05:14:12.437

先进行文本替换，然后拆分。

例如用空格替换所有制表符，然后按空格分割。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T05:14:20.690

您可以先使用正则表达式：

```
import re
re.sub('\s+', ' ', 'text     with    whitespace        etc').split()
['text', 'with', 'whitespace', 'etc'] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T05:19:21.943

对于空白分隔符，`str.split()`已经做了你可能想要的。来自[Python 标准库](http://docs.python.org/2/library/stdtypes.html#str.split)，

> 海峡 **拆分**([ *sep* [, *maxsplit* ]])
> 
> > **如果*sep*未指定或 is`None`**，则应用不同的拆分算法：**连续空格的运行被视为单个分隔符**，如果字符串具有前导或尾随空格，则结果将在开头或结尾不包含空字符串。因此，使用 None 分隔符拆分空字符串或仅包含空格的字符串将返回 []。
> > 
> > 例如，`' 1 2 3 '.split()`返回`['1', '2', '3']`和`' 1 2 3 '.split(None, 1)`返回`['1', '2 3 ']`。

# android - ORMLite - 多对多关系的 JOIN 查询

> ID：13737316
> 
> 赞同：2
> 
> 时间：2012-12-06T05:09:36.630
> 
> 标签：android, ormlite

我有一些存储数据，其中包含属于这些部分的部分和项目，例如：

```
sections: [
{ section_uid: "onSale",
items: [17, 20, 10, 11] },
{ section_uid: "hammers",
items: [17, 26, 45, 40]}]

items: [
{ listing_id: 17,
uid: "item_17" },
{ listing_id: 26,
uid: "item_26"}] 
```

请注意，一个项目可能属于两个部分（在此示例中，项目 17 是一个正在销售的锤子）。为了显示这些数据，我将通过部分 JSON 的“项目”字段中的 ID 获取每个部分和所有关联的项目。

我已经查看了ORMLite 上[的多对多](http://ormlite.svn.sourceforge.net/viewvc/ormlite/ormlite-jdbc/trunk/src/test/java/com/j256/ormlite/examples/manytomany/)关系的一些文档和示例，但我不确定我应该以哪种方式继续解决一些问题......

1.  如果我想进行 JOIN 查询，我必须创建包含对 Sections 和 Items 的引用的 SectionItems，然后针对每个部分 UID 查询这些 SectionItems。这是处理事情的正确方法吗？最好只有 Sections 和 Items 并查询 Sections.items 中的所有项目，这些项目按“items”数组中的顺序排序。

2.  “项目”部分中项目 ID 的顺序很重要。如果我的“JOIN intermediary”SectionItems 跟踪“items”数组中项目的顺序，或者如果我以与“items”相同的顺序插入 SectionItems，如果我按创建/更新日期排序，我会得到该顺序?

3.  与问题 2 相同，是否有任何理由不将 sectionUID 附加到“JOIN intermediary”类以加快查询速度，或者它是否已经在幕后这样做了？

4.  如果使用新项目更新部分或在“项目”数组中移动项目并且需要对该部分进行更新，那么删除与该部分匹配的所有 SectionItems 并为新部分重新创建 SectionItems 是否效率不高？

请注意，如果这会改变任何东西，我将永远不必抓住一个项目并询问它属于哪个部分。

非常感谢您的帮助和指导！

# android - [Android]parseInt() 期间出错

> ID：13737317
> 
> 赞同：0
> 
> 时间：2012-12-06T05:09:38.763
> 
> 标签：android, parseint

编写我的第一个 Android 应用程序。除此功能外，几乎所有功能都有效。即使所有文本框都有一些数值，应用程序也会在此函数中崩溃。此外，是否有更好的方法来检索这些文本框中的所有值并将其转换为 int。请注意，所有文本框都是 activity.xml 文件中的输入类型编号。

```
public int updateclks()
{
  try{
    EditText v1= (EditText) findViewById(R.id.editText1);
    EditText v2 = (EditText) findViewById(R.id.EditText01);
    EditText v3 = (EditText) findViewById(R.id.EditText02);
    EditText v4 = (EditText) findViewById(R.id.EditText03);

    EditText c1= (EditText) findViewById(R.id.EditText04);
    EditText c2 = (EditText) findViewById(R.id.EditText05);
    EditText c3 = (EditText) findViewById(R.id.EditText06);
    EditText c4 = (EditText) findViewById(R.id.EditText07);
    try{ //error occurs somewhere around this block
    vsel[1]= Integer.parseInt(v1.getText().toString());
    vsel[2]= Integer.parseInt(v2.getText().toString());
    vsel[3]= Integer.parseInt(v3.getText().toString());
    vsel[4]= Integer.parseInt(v4.getText().toString());

    clk[1]= Integer.parseInt(c1.getText().toString());
    clk[2]= Integer.parseInt(c2.getText().toString());
    clk[3]= Integer.parseInt(c3.getText().toString());
    clk[4]= Integer.parseInt(c4.getText().toString());
  }
  catch(NumberFormatException e)
  {
    Context context = getApplicationContext();
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(context, "Fields cannot be empty", duration);
    toast.show();
    return 1;
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:19:39.857

parseInt() 不会使您的应用程序崩溃。因为如果此 parseInt 发生任何异常，它将在您处理它时被捕获。由于您的应用程序仍在崩溃，请参阅 vse1 和 clk1 数组，无论您是否正确创建了这些。

如果您创建了长度为 4 的 vse1 数组，还要注意数组长度。那么您可能希望从索引 0 而不是 1 开始。否则 ArrayIndexOutOfBounds 将使您的应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:34:35.183

我也遇到了同样的问题，你可以使用修剪功能解决它。

```
clk[1]= Integer.parseInt(c1.getText().toString().trim()); 
```

# php - 这能行吗？基于变量+标头重定向执行一次PHP？

> ID：13737318
> 
> 赞同：1
> 
> 时间：2012-12-06T05:09:43.990
> 
> 标签：php, wordpress

我想要做的是一个秘密链接，例如 website.com/?secret=yes 当他们访问这个页面时，我想从 URL 中删除这个变量，所以我有以下内容：

```
<?php
if(isset($_GET['secret']) && $_GET['secret'] === 'yes') {
    header('Location: http://website.com');
    $secret="yes"; <--take note this is what I'm testing 
}
?> 
```

上面的代码将立即重定向，因此 url 中没有变量，我尝试使用 $secret="yes"; 自己制作这个变量；能够将其与以下代码一起使用：

```
<?php if( 'yes' === $secret ) : ?>
secret content here
 <?php endif; ?> 
```

这可能吗？我怎样才能使我的代码工作？我不想使用会话，因为我希望它只执行一次，或者每次他们通过秘密链接访问时，如果他们在没有它的情况下访问时不显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T05:15:47.083

不，那行不通。变量不会通过重新加载页面持续存在。但是，您可以使用会话或 cookie 来执行此操作：

```
<?php
session_start();
if(isset($_GET['secret']) && $_GET['secret'] === 'yes') {
    $_SESSION['secret']="yes";
    header('Location: http://website.com');
    exit();
}
?>

<?php if( $_SESSION['secret']=='yes'){ 
unset($_SESSION['secret']); //unset so when the page reloads the secret data will be gone
?>
secret content here
 <?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:39:00.317

您可以通过以下另一种方式实现。

创建一个文本文件，如 skey.txt

并编写如下代码：

```
 $filename = 'skey.txt';
if(isset($_GET['secret']) && $_GET['secret'] === 'yes') {
    $data = file_get_contents($filename);
    header('Location: http://localhost/'.$_SERVER['PHP_SELF']);
    file_put_contents($filename, $data."\n".$_SERVER['REMOTE_ADDR'].'secret=yes');
} 
```

或者

```
$filename = 'skey.txt';
if(isset($_GET['secret']) && $_GET['secret'] === 'yes') {
    $data = file_get_contents($filename);
    file_put_contents($filename, $data."\n".$_SERVER['REMOTE_ADDR'].'secret=yes');
    header('Location: http://localhost/'.$_SERVER['PHP_SELF']);
} 
```

当您将被重定向到页面时。你可以检查它如下：

```
$data = file($filename);
if(!empty($data) && in_array($_SERVER['REMOTE_ADDR'].'secret=yes', $data)) {
    echo 'hello';
    $getlines = array_keys($data, $_SERVER['REMOTE_ADDR'].'secret=yes');
    foreach($getlines as $lkey) {
        unset($data[$lkey]);
    }

    file_put_contents($filename, implode("\n", $data));
} 
```

我想它会为你工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:23:30.247

由于 HTTP 的无状态特性，您需要以一种或另一种方式传递秘密令牌。如果您想确保一旦您可以对某些唯一信息（IP、用户代理等）进行 MD 哈希并传递它，就可以访问内容。您应该能够将变量添加到标头调用中：

```
header('Location:http://website.com/?secret=yes'); 
```

请注意，您将使用

```
<?php if ($_GET['secret'] == "yes"): ?>

// secret content
<?php endif; ?> 
```

这不是一个安全的解决方案，因为任何人都可以将 ?sectet=true 附加到链接，散列会更好，因为它可以是事物的组合。如果您决定使用散列，请确保您使用的是盐，否则您可能会面临碰撞/彩虹表攻击的风险

# sql - 根据年份搜索记录时出现问题 - SQL

> ID：13737324
> 
> 赞同：0
> 
> 时间：2012-12-06T05:10:16.170
> 
> 标签：sql, sql-server

**大家好，我有一张包含多条记录的表格费用。**

```
expenseID       ratename         description            workcompleted

51699           Base Rate        SNL Financial inquiry  08/09/2011
51699           Base Rate        SNL Financial inquiry  08/19/2011
51699           Base Rate        SNL Financial inquiry  08/09/2012
51699           Base Rate        SNL Financial inquiry  08/19/2012 
```

但是，当我只搜索 2012 年的记录时，它会返回这两个年份的记录（2011 年、2012 年）。但我只需要我的记录按年来，即

**预期成绩：**

```
51699   Base Rate   SNL Financial inquiry   08/09/2012
51699   Base Rate   SNL Financial inquiry   08/19/2012 
```

请参阅我的查询：

```
select expenseid,ratename,description,workcompleted from EXPENSES 
where workcompleted >= '08/08/2012' and workcompleted <= '08/19/2012' 
```

我也通过在查询之间使用来尝试这个，但它不起作用。如果任何人有任何想法，请与我分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:45:12.690

您几乎可以肯定使用了错误的数据类型。您的列“work_completed”应该是日期类型。几乎可以肯定是 char 或 varchar。最好的办法是更改数据类型。

如果您不能这样做，您可以创建一个镜像该表的视图，但将“work_completed”列转换为日期类型。针对此类视图查询日期范围应该可以正常工作。

如果你不能创建视图，你可以改变你的 WHERE 子句来进行转换。在标准 SQL 中，它看起来像

```
WHERE CAST(workcompleted AS DATE) >= '2012-08-08' 
  AND CAST(workcompleted AS DATE) <= '2012-08-19' 
```

我知道 SQL Server 支持 CAST()，但您可能必须使用原始日期格式（例如 '08/08/2012'）。

如果你这样做，预计性能会受到影响。SQL Server 必须对每一行进行两次类型转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:35:34.083

请看看这个。您的查询正在产生您需要的结果。可能还有其他您需要的东西，例如@paulsm4 所问的？

参考 * [SQLFIDDLE](http://sqlfiddle.com/#!2/49a41/3)

您的查询：

```
select id,name,des,
wkdate from EXPENSES 
where wkdate >= '2012-08-08' 
and wkdate <= '2012-08-19'
; 
```

结果

```
ID      NAME        DES                     WKDATE
51699   Base Rate   SNL Financial inquiry   August, 09 2012 00:00:00+0000
51699   Base Rate   SNL Financial inquiry   August, 19 2012 00:00:00+0000 
```

上面的示例是在**MYSQL**中构建的。还有另一种按年份获取记录的简单方法，您也可以简单地使用如下查询...现在这是在**SQL Server中**

```
select id,name,des,
wkdate from EXPENSES 
where YEAR(wkdate) = '2012'
; 
```

你可以看看这个[MSDN ARTICLE ABOUT YEAR IN SQL SERVER TSQL](http://msdn.microsoft.com/en-us/library/ms186313.aspx)

** 基于 OP 的评论** 无论如何，如果您的日期列是 nvarchar .....让我们将其转换/转换为日期

```
select id,name,des,
wkdate from EXPENSES 
where YEAR(CAST(wkdate AS Date)) = '2012'
; 
```

# android - Android-以编程方式清除 SD 卡

> ID：13737327
> 
> 赞同：1
> 
> 时间：2012-12-06T05:10:29.283
> 
> 标签：android, android-sdcard

在Android开发中，我们如何通过编码将整个SD卡擦除？我需要通过我的应用程序格式化 SD 卡的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:58:56.877

我找到了答案，只需调用wipeMemoryCard();

```
public void wipeMemoryCard() {
    try {
        File deleteMatchingFile = new File(Environment.getExternalStorageDirectory().toString());
        File[] filenames = deleteMatchingFile.listFiles();
        if (filenames != null && filenames.length > 0) {
            for (File tempFile : filenames) {
                    if (tempFile.isDirectory()) {
                        wipeDirectory(tempFile.toString());
                    } else {
                        tempFile.delete()
                    }
            }
        }
    } catch (Exception e) {
    }
}

private void wipeDirectory(String name) {
    try {
        File directoryFile = new File(name);
        File[] filenames = directoryFile.listFiles();
        if (filenames != null && filenames.length > 0) {
            for (File tempFile : filenames) {
                    if (tempFile.isDirectory()) {
                        wipeDirectory(tempFile.toString());
                    } else {
                        tempFile.delete()
                    }
            }
        }
    } catch (Exception e) {
    }
} 
```

# csh - csh中删除最后一个单词的快捷方式是什么？

> ID：13737330
> 
> 赞同：4
> 
> 时间：2012-12-06T05:10:41.063
> 
> 标签：csh

在 bash 中，我使用 Ctrl + w 这样做，但它在我的 csh 中不起作用，它不是删除一个单词，而是清理整行。如何删除最后一个单词？

尽管 Ctrl + u 在 csh 和 bash 中都可以正常工作。

我在屏幕内运行 csh (ubuntu)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-06T08:38:56.513

这对我有用 tcsh: `ALT`+ `BACKSPACE`。希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:26:13.310

试试这个： `SHIFT`+ `Alt`+ `b`&`Delete`

您可以查看此键盘快捷键[列表](http://mamchenkov.net/wordpress/2010/08/05/shell-keyboard-shortcuts/)。

# gcc - MinGW（甚至 gcc）的 mfpmath 选项

> ID：13737332
> 
> 赞同：0
> 
> 时间：2012-12-06T05:11:01.427
> 
> 标签：gcc, mingw, sse, avx

带有命令行选项（甚至带有）的**MinGW**`-march=corei7-avx -mtune=corei7-avx`的or`-march=corei7 -mtune=corei7 -mavx`命令行选项是否可以将**AVX**指令用于数学例程？请注意，从[这里开始](http://gcc.gnu.org/gcc-4.6/changes.html)不起作用（对于**MinGW**上的最新版本，这是“无法识别的选项” ）。**`-mfpmath=sse``-mfpmath=both`**`--with-fpmath=avx`****

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:43:33.917

AVX 由`-march=corei7-avx`或启用`-mavx`。该`-mtune`选项对于启用 AVX 既不是必要的，也不是充分的。

A`-mfpmath=avx`没有任何意义，因为使用此开关可以控制标量浮点代码的生成。如果只使用 4 浮点向量寄存器的一个浮点数或仅使用 8 浮点向量寄存器的一个元素，则没有区别。如果`march=avx`启用，标量浮点指令无论如何都会使用 VEX 编码，这将节省一些 mov 指令。

请注意，在 x86_64 上`-mfpmath`默认为 SSE，因此如果您不完全了解自己在做什么，通常不需要使用此开关，甚至是有害的。******

# sql - 在 SQL Server 中修改视图时会发生什么

> ID：13737345
> 
> 赞同：0
> 
> 时间：2012-12-06T05:12:14.453
> 
> 标签：sql, sql-server

所以我在我的生产数据库中有一个大视图，它将来自几个表的数据连接在一起。这是我无法控制的遗留问题——它就是这样。

我想给它添加一个新的子句（WHERE xx 不为空），但我担心发布时会出现性能问题。

基本上，我对视图了解不多。SQL Server 是否必须重建视图？重建索引？做任何大量的处理吗？

还是即时解释观点？

任何正确方向的观点将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:17:38.117

视图只是**存储查询**，不会导致物理数据存储或机制等发生变化。

*   服务器必须重建视图？
*   重建索引？
*   加工量大吗？

**当**视图改变时，以上都****不会发生****

 ******编辑**

通过*本图尔*

> ...假设视图不是索引视图。要检查，请查看 [object_id] = object_id('your view') 的 sys.indexes。如果没有返回，则视图没有索引。

意思是说...索引视图将对以上几点产生影响****

# php - 如何在 Dreamweaver 中使用替换记录查询？

> ID：13737348
> 
> 赞同：0
> 
> 时间：2012-12-06T05:12:39.303
> 
> 标签：php, mysql

这是显示记录的 view.php 文件。我使用了更新和删除记录查询。Dreamweaver 不包含内置的替换记录查询。如何更换记录？我需要查询替换行。/////////////

```
 <?php require_once('Connections/db_sms.php'); ?>
    <?php
    if (!isset($_SESSION)) {
      session_start();
    }
    $MM_authorizedUsers = "";
    $MM_donotCheckaccess = "true";

    // *** Restrict Access To Page: Grant or deny access to this page
    function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
      // For security, start by assuming the visitor is NOT authorized. 
      $isValid = False; 

      // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
      // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
      if (!empty($UserName)) { 
        // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
        // Parse the strings into arrays. 
        $arrUsers = Explode(",", $strUsers); 
        $arrGroups = Explode(",", $strGroups); 
        if (in_array($UserName, $arrUsers)) { 
          $isValid = true; 
        } 
        // Or, you may restrict access to only certain users based on their username. 
        if (in_array($UserGroup, $arrGroups)) { 
          $isValid = true; 
        } 
        if (($strUsers == "") && true) { 
          $isValid = true; 
        } 
      } 
      return $isValid; 
    }

    $MM_restrictGoTo = "login.php";
    if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
      $MM_qsChar = "?";
      $MM_referrer = $_SERVER['PHP_SELF'];
      if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
      if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
      $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
      $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
      header("Location: ". $MM_restrictGoTo); 
      exit;
    }
    ?>
    <?php require_once('Zend/Date.php');?>
    <?php
    if (!function_exists("GetSQLValueString")) {
    function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
    {
      if (PHP_VERSION < 6) {
        $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
      }

      $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

      switch ($theType) {
        case "text":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $theValue = ($theValue != "") ? intval($theValue) : "NULL";
          break;
        case "double":
          $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
          break;
        case "date":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;
        case "defined":
          $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
          break;
      }
      return $theValue;
    }
    }

    $currentPage = $_SERVER["PHP_SELF"];

    $maxRows_rsStudent = 3;
    $pageNum_rsStudent = 0;
    if (isset($_GET['pageNum_rsStudent'])) {
      $pageNum_rsStudent = $_GET['pageNum_rsStudent'];
    }
    $startRow_rsStudent = $pageNum_rsStudent * $maxRows_rsStudent;

    mysql_select_db($database_db_sms, $db_sms);
    $query_rsStudent = "SELECT s_id, first_name, last_name, gender, dob, father_name, email, address, city, student_photo FROM tbl_student ORDER BY first_name ASC";
    $query_limit_rsStudent = sprintf("%s LIMIT %d, %d", $query_rsStudent, $startRow_rsStudent, $maxRows_rsStudent);
    $rsStudent = mysql_query($query_limit_rsStudent, $db_sms) or die(mysql_error());
    $row_rsStudent = mysql_fetch_assoc($rsStudent);

    if (isset($_GET['totalRows_rsStudent'])) {
      $totalRows_rsStudent = $_GET['totalRows_rsStudent'];
    } else {
      $all_rsStudent = mysql_query($query_rsStudent);
      $totalRows_rsStudent = mysql_num_rows($all_rsStudent);
    }
    $totalPages_rsStudent = ceil($totalRows_rsStudent/$maxRows_rsStudent)-1;

    $queryString_rsStudent = "";
    if (!empty($_SERVER['QUERY_STRING'])) {
      $params = explode("&", $_SERVER['QUERY_STRING']);
      $newParams = array();
      foreach ($params as $param) {
        if (stristr($param, "pageNum_rsStudent") == false && 
            stristr($param, "totalRows_rsStudent") == false) {
          array_push($newParams, $param);
        }
      }
      if (count($newParams) != 0) {
        $queryString_rsStudent = "&" . htmlentities(implode("&", $newParams));
      }
    }
    $queryString_rsStudent = sprintf("&totalRows_rsStudent=%d%s", $totalRows_rsStudent, $queryString_rsStudent);
    ?>

    <?php

    if (!function_exists("GetSQLValueString")) {
    function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
    {
      if (PHP_VERSION < 6) {
        $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
      }

      $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

      switch ($theType) {
        case "text":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $theValue = ($theValue != "") ? intval($theValue) : "NULL";
          break;
        case "double":
          $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
          break;
        case "date":
           if ($theValue == "")
          {
              $theValue = "NULL";
          }
          else
          {
              $zendDate = new Zend_Date($theValue, "M/d/yyyy");
              $theValue = "'" . $zendDate->toString("yyyy-MM-dd") . "'";
          }
            break;

        case "defined":
          $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
          break;
      }
      return $theValue;
    }
    }
    ?>
    <style type="text/css">
    body,td,th {
        color: #000;
        font-family: "Courier New", Courier, monospace;
        font-size: 18px;
    }
    body {
        background-color: #FFF;
    }
    a:link {
        text-decoration: none;
    }
    a:visited {
        text-decoration: none;
        color: #606;
    }
    a:hover {
        text-decoration: underline;
        color: #066;
    }
    a:active {
        text-decoration: none;
        color: #600;
    }
    </style>

    <body bgcolor="#D6D6D6" text="#FFFFFF" link="#330000" vlink="#006666" alink="#660000"><h1>
      <style type="text/css">
    #header {
        font-family: "Times New Roman", Times, serif;
        font-size: 24px;
        font-style: normal;
        line-height: normal;
        font-weight: normal;
        text-transform: none;
        color: #066;
        background-color: #FFF;
        background-image: url(../images/contest.jpg);
        background-repeat: no-repeat;
        background-size: auto;
        box-sizing: content-box;
        margin-bottom: 400px;
    }
    body,td,th {
        font-family: "Courier New", Courier, monospace;
        color: #000;
    }
    body {
        background-color: #FFF;
    }
      </style>
    </h1>
     <?php /* include('include/header.php');*/?> 

    <h3>&nbsp;</h3>
    <h3>There are <?php echo $totalRows_rsStudent ?> Students.</h3>
    <p>&nbsp;
      <?php if ($pageNum_rsStudent > 0) { // Show if not first page ?>
        <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, 0, $queryString_rsStudent); ?>">First</a> <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, max(0, $pageNum_rsStudent - 1), $queryString_rsStudent); ?>">Previous</a>
        <?php } // Show if not first page ?>
      <?php if ($pageNum_rsStudent < $totalPages_rsStudent) { // Show if not last page ?>
      <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, min($totalPages_rsStudent, $pageNum_rsStudent + 1), $queryString_rsStudent); ?>">Next</a> <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, $totalPages_rsStudent, $queryString_rsStudent); ?>">Last</a>
      <?php } // Show if not last page ?>
    </p>
    <table width="400" border="0">

    </table>
    <form id="form1" name="form1" method="post" action="" enctype="multipart/form-data">
    <table width="2139" border="0">

        <tr>
          <th width="326" bgcolor="#009999" scope="col"><strong>First Name</strong></th>
          <th width="315" bgcolor="#009999" scope="col"><strong>Last Name</strong></th>
          <th width="282" bgcolor="#009999" scope="col"><strong>Gender</strong></th>
          <th width="183" bgcolor="#009999" scope="col"><blockquote>
            <p> <strong>BirthDate</strong></p>
          </blockquote></th>
          <th width="337" bgcolor="#009999" scope="col"><strong>Father's Name</strong></th>
          <th width="271" bgcolor="#009999" scope="col"><strong>Email</strong></th>
          <th width="95" bgcolor="#009999" scope="col"><strong>Address</strong></th>
          <th width="150" bgcolor="#009999" scope="col"><strong>City</strong></th>
          <th width="150" bgcolor="#009999" scope="col"><blockquote>
            <p>Photo</p>
          </blockquote></th>
          <th width="150" bgcolor="#009999" scope="col">&nbsp;</th>
          <th width="7" bgcolor="#009999" scope="col">&nbsp;</th>
          <th width="131" scope="col">&nbsp;</th>
        </tr>
         <?php do { ?>
       <?php 
                $zendDate = new Zend_Date($row_rsStudent['dob']);
              ?>

        <tr>
          <td bgcolor="#333333"><blockquote>
            <p><a href="update.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"><?php echo $row_rsStudent['first_name']; ?></a></p>
          </blockquote></td>
          <td bgcolor="#333333"><blockquote>
            <p><?php echo $row_rsStudent['last_name']; ?></p>
          </blockquote></td>
          <td bgcolor="#333333"><blockquote>
            <p><?php echo $row_rsStudent['gender']; ?></p>
          </blockquote></td>
          <td bgcolor="#333333"> 
              <?php echo $zendDate->toString("d/M/yyyy"); ?></td>
          <td bgcolor="#333333"><blockquote>
            <p><?php echo $row_rsStudent['father_name']; ?></p>
          </blockquote></td>
          <td bgcolor="#333333"><blockquote>
            <p><?php echo $row_rsStudent['email']; ?></p>
          </blockquote></td>

          <td bgcolor="#333333"><blockquote>
            <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"></a></strong></em><?php echo $row_rsStudent['address']; ?></p>
          </blockquote></td>
          <td bgcolor="#333333"><blockquote>
            <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"></a></strong></em><?php echo $row_rsStudent['city']; ?></p>
          </blockquote></td>
          <td bgcolor="#333333"><blockquote>
            <p><img src="<?php echo "thumbnails/".$row_rsStudent['student_photo']; ?>"/> </p>
          </blockquote></td>
          <td bgcolor="#FFFFFF"><blockquote>
            <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>">Delete</a></strong></em></p>
          </blockquote></td>
        </tr>
        <?php } while ($row_rsStudent = mysql_fetch_assoc($rsStudent)); ?>
      </table>
      <p><strong><a href="insert.php">Insert New Record</a></strong></p>
      <p>&nbsp;</p>
    </form>
    <?php
    mysql_free_result($rsStudent);
    ?> 
```

//////// 我的 db_sms 连接文件 ///////

```
<?php
# FileName="Connection_php_mysql.htm"
# Type="MYSQL"
# HTTP="true"
$hostname_db_sms = "localhost";
$database_db_sms = "db_sms";
$username_db_sms = "root";
$password_db_sms = "";
$db_sms = mysql_pconnect($hostname_db_sms, $username_db_sms, $password_db_sms) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

////////

## 这是 db_sms.sql 文件

```
phpMyAdmin SQL Dump
-- version 3.2.0.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Dec 06, 2012 at 05:07 AM
-- Server version: 5.1.36
-- PHP Version: 5.3.0

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `db_sms`
--
CREATE DATABASE `db_sms` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;
USE `db_sms`;

-- --------------------------------------------------------

--
-- Table structure for table `tbl_admin`
--

CREATE TABLE IF NOT EXISTS `tbl_admin` (
  `admin_id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(50) NOT NULL,
  PRIMARY KEY (`admin_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--
-- Dumping data for table `tbl_admin`
--

INSERT INTO `tbl_admin` (`admin_id`, `username`, `password`) VALUES
(1, 'root', 'root');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_student`
--

CREATE TABLE IF NOT EXISTS `tbl_student` (
  `s_id` int(11) NOT NULL AUTO_INCREMENT,
  `first_name` varchar(50) NOT NULL,
  `last_name` varchar(50) NOT NULL,
  `gender` varchar(50) NOT NULL,
  `dob` date NOT NULL,
  `father_name` varchar(50) NOT NULL,
  `email` varchar(50) NOT NULL,
  `address` varchar(50) NOT NULL,
  `city` varchar(50) NOT NULL,
  `student_photo` varchar(255) NOT NULL,
  PRIMARY KEY (`s_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=18 ;

--
-- Dumping data for table `tbl_student`
--

INSERT INTO `tbl_student` (`s_id`, `first_name`, `last_name`, `gender`, `dob`, `father_name`, `email`, `address`, `city`, `student_photo`) VALUES
(3, 'Zara', 'Mansoor', 'Female', '0000-00-00', 'mmmm', 'zara@xyz.com', 'dddd', 'dddd', 'pic_1074.jpg'),
(4, 'Narima', 'Khaleeq', 'Female', '0000-00-00', 'khaleeq', 'uswa@xyz.com', 'wwww', 'wwww', ''),
(13, 'bina', 'ali', 'Female', '0000-00-00', 'ali', 'b@y.com', 'pakistan', 'taxila', ''),
(6, 'maryam', 'khan', 'Female', '1987-08-15', 'javed', 'abc@xyz.com', 'fff', 'ffff', ''),
(8, 'mohan', 'jjjj', 'Male', '0000-00-00', 'jjjjjj', 'rabia@yyy.com', 'sddwd', 'ddf', ''),
(17, 'Kalsoom', 'Mint', 'Female', '0000-00-00', 'bbb', 'kk@abc.com', 'sss', 'uuu', ''),
(15, 'rrrr', 'tttt', 'Male', '0000-00-00', '3eee', 'aa@fff.com', 'eee', 'eee', ''),
(16, 'jhjhjj', 'Khan', 'Female', '0000-00-00', 'ddwdw', 'ewdwd@dhwk.com', 'ddqd', 'ddewf', ''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:19:59.123

Byreplace record 你的意思是改变一些已经插入数据库的行吗？然后

`UPDATE ... SET ...=... WHERE ...=...`

命令是你要找的

# android - 如何获取应用程序安装目录电话间隙android

> ID：13737361
> 
> 赞同：3
> 
> 时间：2012-12-06T05:13:37.050
> 
> 标签：android, file, cordova

我想将从服务器下载的音乐文件存储在我的应用程序安装目录中。我注意到几个安卓手机的应用程序安装目录的路径不同。如Android/data、data/data等。

我用 phoengap 开发应用程序。我检查了他们的 api 但无法获得返回应用程序 installaitn 文件夹路径的方法。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-26T19:32:31.760

由于安全原因，您不能写入应用程序安装或资产目录，而是可以在应用程序数据文件夹中写入文件。

[http://cordova.apache.org/docs/en/2.9.0/cordova_file_file.md.html](http://cordova.apache.org/docs/en/2.9.0/cordova_file_file.md.html)

# path - Cmake 错误：无效的转义序列 \U

> ID：13737370
> 
> 赞同：29
> 
> 时间：2012-12-06T05:14:19.797
> 
> 标签：path, cmake

在使用 CMake 在 VC++ 10 中运行我的 OpenCL 代码时，我收到以下错误：

```
CMake Error at CMakeLists.txt:6 (set): Syntax error in cmake code at
C:/Users/Shreedhar/Desktop/testCL/CMakeLists.txt:6

when parsing string
C:\Users\Shreedhar\Desktop\test_CL\CMakeLists
Invalid escape sequence \U 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-06T10:54:03.663

`/`在路径中使用正斜杠

```
C:/Users/Shreedhar/Desktop/test_CL/CMakeLists 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-17T16:04:59.183

如果您正在读取诸如环境变量之类的用户输入，那么您需要通过字符串方法的字符替换功能来执行此操作。

```
string(REPLACE "\\" "/" outputVar ${_inputVar}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-04T14:29:47.167

对于在 Windows 下收到此错误的用户：

> CMake 错误：/Dev/cmake/share/cmake-3.8/Modules/FindBoost.cmake:903（列表）：
> cmake 代码中的语法错误
> 
> ```
> C:/Dev/cmake/share/cmake-3.8/Modules/FindBoost.cmake:903 
> ```
> 
> 解析字符串时
> 
> ```
> C:\Dev\mongodb\src\boost/lib${_arch_suffix}-msvc-15.0 
> ```
> 
> 无效的字符转义 '\D'。调用堆栈（最近调用优先）：C:/Dev/cmake/share/cmake-3.8/Modules/FindBoost.cmake:1379 (_Boost_UPDATE_WINDOWS_LIBRARY_SEARCH_DIRS_WITH_PREBUILT_PATHS)
> src/bsoncxx/CMakeLists.txt:100 (find_package)

不要将 BOOST_ROOT 环境变量设置为以反斜杠结尾的值。

# ruby-on-rails - Rails 中的Belongs_to 和备份belongs_to

> ID：13737371
> 
> 赞同：0
> 
> 时间：2012-12-06T05:14:42.753
> 
> 标签：ruby-on-rails, activerecord

这个问题来自于分解一个太大的问题。

`Users`在 a 中创建`Events`为`Role`a `Network`。然后将`Events`它们连接到（在他们被雇用或解雇时可以占据`Role`不同的位置）以及. 无论创建. _ _`Users``Role``Event``Users``Roles``Events``Role``Event`

有`Role`可能被摧毁，但`Event`只要存在，它就会一直`Network`存在。（就像删除了一个职位，但他们仍然想要退休职位的数据。）

那么a`Event`和a可以分开吗？这是糟糕的轨道设计吗？还有另一种方法可以做到这一点吗？我是否会有一个特殊的“已退休”角色并始终将事件绑定到 a然后使用？`belongs_to``Role``Network``Role``belongs_to :network, :through => :role`

网络.rb

```
class Network < ActiveRecord::Base
  has_many :roles
  has_many :users, :through => :roles
  has_many :events
end 
```

角色.rb

```
class Role < ActiveRecord::Base
  belongs_to :user
  belongs_to :network
end 
```

Event.rb - 这是对的吗？

```
class Event < ActiveRecord::Base
  belongs_to :role  
  belongs to :network
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:40:17.987

在我看来，与您的关联（属于角色和网络的事件）的设计并不差。而且我认为拥有“退休角色”比将其设为 NULL 更令人困惑。但也许您应该考虑`status`在角色上设置一列而不是删除它。如果状态不是例如`1`（例如，如果 1 = ok 和 2 = inactive），则不能再使用它，就像它被删除一样。

当您不了解全局时，很难给出建议，但是，正如我所说，在我看来，没有必要为了能够改变关联而“退休”角色。

# asp.net-mvc-3 - 在表单身份验证实际超时之前注销的原因

> ID：13737373
> 
> 赞同：0
> 
> 时间：2012-12-06T05:14:49.813
> 
> 标签：asp.net-mvc-3, iis-7, iis-7.5, forms-authentication, subdomain

我有一个`asp.net MVC 3.0`网站托管在主网站的**子域上。**`Asp.net`版本设置为`.Net 4.0 integrated pipeLine`.

表单身份验证设置如下：

```
<authentication mode="Forms">
  <forms
          cookieless="UseCookies"
          defaultUrl="~/home"
          enableCrossAppRedirects="false"
          path="/"
          requireSSL="false"
          loginUrl="~/account/login"
          protection="All"
          timeout="120"
          slidingExpiration="true"
          name=".SubDomainAuthCookie"></forms>
</authentication> 
```

但每次几分钟**后它就****会让**我**退出！****主机管理员**说这可能**是**由于**编码不当**或**繁重**的任务导致应用程序池**重置**，但它是一个**简单的 mvc**网站，带有**EF ORM**。我不知道该怎么办！我应该寻找这种情况的可能原因是什么？

 ********更新 ：**

检查后`Application_Start`，我发现是**问题**所在，我登录`Application_Start()`了，结果是**每当**我被注销时，都会**添加**一个日志。

```
12/6/2012 12:14:03 PM ==> Application started
12/6/2012 12:16:35 PM ==> Application started
12/6/2012 12:22:59 PM ==> Application started 
```

奇怪，但真实。逻辑上没有什么复杂或沉重的！EF 可能是问题所在，它是否会消耗大量内存/CPU 导致应用程序池重置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:01:19.053

*   检查没有其他应用程序使用 name=".SubDomainAuthCookie"。这些应用程序可以覆盖它们的 cookie。
*   您在登录页面`FormsAuthentication.SetAuthCookie`调用之前使用吗？`FormsAuthentication.RedirectFromLoginPage`如果不是，则可能是身份验证 cookie 设置不正确。
*   尝试记录 global.asax.cs 的 Application_End 以了解您的应用程序是否回收过多。

    protected void Application_End(object sender, EventArgs e) { /*记录 Application_End* / }

    正如@ZippyV 在下面的一个答案中所提到的，这背后的原因是 IIS 默认设置为在每个名为 MachineKey 的 AppPool 回收中自动生成一对用于解密和验证授权 cookie 内容（以及其他内容）的密钥. [在这个问题中也提到](https://stackoverflow.com/q/33693386/887277)

    更改此密钥后，所有浏览器上存储的授权 cookie 内容将不再可读，并且授权丢失。

    最简单的补救措施是在 web.config 中使用静态 MachineKey

*   还尝试将 cookie 设置为父域。[更多信息在这里](https://stackoverflow.com/questions/608120/forms-authentication-across-sub-domains)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:34:57.830

当我的托管服务提供商过于频繁地回收我的网站进程时，我也遇到了这个问题。由于某种原因，身份验证 cookie 变得无效，因为加密/解密密钥发生了变化。因此，您的网站无法再读取身份验证 cookie。

您可以通过在 web.config 中指定密钥来解决此问题，以便您的托管服务提供商无法更改它们：

1.  转到[http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)并单击按钮
2.  复制生成的标签
3.  打开您的 web.config 文件并将生成的标签粘贴到其中`<system.web>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:13:55.173

您还想设置登录时生成的 cookie 的过期时间。在表单身份验证中，您必须使用它。

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, //Here Userinformation, DateTime.Now, DateTime.Now.AddDays(1), false, string.Empty); 
```

在这里，我已将 cookie 的过期时间设置为 DateTime.Now.AddDays(1)（登录日期+1 天），所以它太长了它会被登录。所以创建的票证将在您登录后的第二天过期。

在 Web.Config 中

```
 <authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

现在很长一段时间都可以登录。

希望能帮助到你！！！

检查这些链接以更深入地了解创建登录和过期时间。

[http://www.hanselman.com/blog/WeirdTimeoutsWithCustomASPNETFormsAuthentication.aspx](http://www.hanselman.com/blog/WeirdTimeoutsWithCustomASPNETFormsAuthentication.aspx)

和

[http://codeasp.net/blogs/vivek_iit/microsoft-net/848/forms-authentication-timeout-vs-session-state-timeout](http://codeasp.net/blogs/vivek_iit/microsoft-net/848/forms-authentication-timeout-vs-session-state-timeout)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:05:28.960

您检查过 SessionState 中的值吗？它的默认值为 20 分钟。您需要将其更新为与表单身份验证票证相同或更高。

请在您的配置文件中添加/更新以下标签。

```
**<sessionState timeout="120" />** 
```******

# iphone - NSData 返回 Null 问题

> ID：13737376
> 
> 赞同：2
> 
> 时间：2012-12-06T05:15:03.657
> 
> 标签：iphone, sqlite, null, nsdata

在我的应用程序中，我将多个存储`images`在我的`database`.
我的数据库字段类型是 blob。

存储`image`数据效果很好，但是当我`image` `data`使用下面的代码从数据库中获取数据时

```
 NSData *photodata=[[NSData alloc] initWithBytes:sqlite3_column_blob(compiledStmt, 12) length:sqlite3_column_bytes(compiledStmt, 12)]; 
```

但是该字段包含空数据，它返回我 <3c3e> 代替空值。
我使用以下查询插入数据

```
 strQuery_DB = [NSString stringWithFormat:@"update tbl_project_review set answer ='%@',comment ='%@',photodata='%@' where prjid=%d",temp,escapedStr1,tempdata,prjid]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:21:46.723

**将图像作为 blob 存储在数据库中是不好的过程。您需要将图像保存在缓存目录中，然后您需要将图像的路径保存在数据库中是好的。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:55:48.150

当您将`%@`说明符与`stringWithFormat:`方法一起使用时，它会调用`description`相应参数的方法。对于对象，这将返回由and`NSData`包围的数据的十六进制表示。对于空对象，它将返回字符串，这就是插入数据库的内容。这可能不是您想要做的，因为这也会不必要地使您的图像数据的大小增加一倍。`<``>``NSData``<>`

您应该使用参数化查询函数，例如`sqlite_bind_blob`. 这将使处理数据输入变得更容易。基本上，您需要将更新查询更改为以下内容（添加适当的错误检查等）：

```
const char sql[] = "update tbl_project_review set answer = ?, comment = ?, photodata = ? where prjid = ?";
sqlite3_stmt *stmt = NULL;
sqlite3_prepare_v2(db, sql, sizeof sql, &stmt, NULL);

sqlite3_bind_text(stmt, 1, [tmp UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(stmt, 2, [escapedStr1 UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_blob(stmt, 3, [tempdata bytes], [tempdata length], SQLITE_TRANSIENT);
sqlite3_bind_int(stmt, 4, prjid);

sqlite3_step(stmt); // check for SQLITE_DONE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:27:53.857

下面是从数据库尝试检索图像的简单代码。

```
 NSString *imgurl=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];
                int length = sqlite3_column_bytes(compiledStatement, 4);
//                NSData *data       = [NSData dataWithBytes:sqlite3_column_blob(compiledStatement, 4) length:length];
                NSString *imageString=[NSString stringWithCharacters:sqlite3_column_blob(compiledStatement, 4) length:length];
                UIImage *personImage=[UIImage imageNamed:imageString]; 
```

我希望这可以帮助你...

# javascript - 在javascript中将动态div添加到另一个div

> ID：13737383
> 
> 赞同：0
> 
> 时间：2012-12-06T05:15:49.003
> 
> 标签：javascript, html, css

我在 html、js 和 css 中有以下代码。

```
<html>
    <head>
        <script type="text/javascript">

        function add() {
            for(var j=0;j<4;j++){
            var i = document.getElementById( 'old' );
            var d = document.createElement( 'div' );
            d.id = "new1";
            d.innerHTML = i.innerHTML ;
            var p = document.getElementById('new');
            p.appendChild(d);
        }

    }    
        </script>

    </head>
    <body>
        <div id="old" style="visibility:hidden;">
        <select>
            <option value="pls">Please</option>
            <option value="1">&lt</option>
            <option value="2">&gt</option>
            <option value="3">=</option>
        </select>
            <input type="text" value=""/>
        </div>

        <hr/>
        <div id="new" style="visibility:hidden;">
        <input type="button" value="go"/>
        </div>
        <hr/>
        <button onclick="add();">Add</button><br>        
    </body>
    </html> 
```

在这里，我试图在单击添加按钮时显示动态 div。它只是简单地添加，但默认情况下 div 是可见的，所以我通过 css style="hidden" 隐藏它。现在点击添加按钮，它正在添加，但 div 是隐藏的。在这里，我遇到了如何显示 div 的问题（这里循环，即 4）。

Go 按钮会出现在它的下方。

我也使用像三元运算符一样的css。例如 el.style.visibility = (el.style.visibility == "hidden") ？“可见”：“隐藏”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:25:13.433

我真的很困惑你想要达到什么目的。您应该像这样创建新的 div

```
<div id="new"> 
```

或者您应该在第一次单击时使 div 可见。将此添加到您的功能

```
p.style.visibility = 'visible'; 
```

对于前一个示例，您可以看到这个[http://jsfiddle.net/tkKun/](http://jsfiddle.net/tkKun/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:31:26.800

创建的 div 是隐藏的，因为您将它们添加到具有样式 visibility:hidden 的 div "new" 下。

要显示它们，只需将此行添加到 add 函数的底部：

```
p.style.visibility = 'visible'; 
```

当你创建新的 div 时，不建议给它们都赋予相同的 id new1，最好为每个新 div 的 id 分配 j 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:36:51.660

您可以使用

```
document.createNode(); 
```

或纯文本

```
var foo = '<div> bar </div>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T11:11:08.617

不用担心，终于找到答案了

```
<html>
    <head>
        <script type="text/javascript">

        function add() {

            for(var j=0;j<4;j++){

            var i = document.getElementById( 'old' );
            var d = document.createElement( 'div' );
            d.id = "div"+j;
            d.innerHTML = i.innerHTML ;
            var p = document.getElementById('new');
            p.style.visibility = 'visible';
            p.appendChild(d);           

        }
        var d = document.createElement( 'div' );
        var l = document.getElementById('one');
        l.style.visibility = 'visible';
        l.appendChild(d);

    }    
        </script>

    </head>
    <body>
        <div id="old" style="visibility:hidden;">
        <select>
            <option value="pls">Please</option>
            <option value="1">&lt</option>
            <option value="2">&gt</option>
            <option value="3">=</option>
        </select>
            <input type="text" value=""/>
        </div>

        <hr/>
        <div id="new" style="visibility:hidden;">

        </div>
        <div id="one" style="visibility:hidden;">
        <br/><input type="button" value="go"/>
        </div>
        <hr/>
        <button onclick="add();">Add</button><br>        
    </body>
    </html> 
```

# python - Python If Else 循环

> ID：13737386
> 
> 赞同：2
> 
> 时间：2012-12-06T05:16:03.060
> 
> 标签：python

我的代码几乎是这样的：

```
Rate = input ("Enter Desired Rate of Charge: ") #User will be prompted to enter the charge rate of the system
if Rate < 0.5:
#If the charge rate entered is less than 0.5 kWhs
    print "Charge Rate Too Low: Please consider revision" #Tells the user the rate is too low
elif Rate > 2.0:
#Also, if the charge rate entered is greater than 2.0 kWhs...
    print "Charge Rate Too High: Please consider revision" #Tells the user the rate is too high
else:
#Otherwise, for any number entered between the bounds of 0.5 and 2.0 kWhs...
    print '\n' #Page break for new conditions. 
```

如果输入的整数小于 0.5 或大于 2，我需要它重新提示用户，当用户这样做时，将该整数保存为 Rate 并继续。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:24:25.477

我认为这比avasal的答案要干净一些。此解决方案假定用户知道如何使用 CTRL+C 退出应用程序，否则您应该添加对在用户输入 Q 或其他内容时退出程序的支持。

```
rate = 0

while True:
    rate = input("Enter desired rate of charge: ")

    if not 0.5 < rate < 2:
        print "Rate must be between 0.5 and 2."
    else:
        break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:18:42.290

添加一个`while`循环直到速率小于 0.5 或速率大于 2.0

```
Rate = 0
while (Rate < 0.5) or (Rate > 2.0):
    Rate = input ("Enter Desired Rate of Charge: ") #User will be prompted to enter the charge rate of the system
    if Rate < 0.5:
    #If the charge rate entered is less than 0.5 kWhs
        print "Charge Rate Too Low: Please consider revision" #Tells the user the rate is too low
    elif Rate > 2.0:
    #Also, if the charge rate entered is greater than 2.0 kWhs...
        print "Charge Rate Too High: Please consider revision" #Tells the user the rate is too high
    else:
    #Otherwise, for any number entered between the bounds of 0.5 and 2.0 kWhs...
        print '\n' #Page break for new conditions. 
```

# sqlite - 在 windows phone 7.1 中保存数据库中的数据

> ID：13737392
> 
> 赞同：-2
> 
> 时间：2012-12-06T05:16:44.360
> 
> 标签：sqlite, windows-phone-7

将数据保存在 windows phone 7.1 数据库中的最佳方法。如何使用sqlite。如何仅使用 sqlite 并使用 linq 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:35:38.053

查看此链接以了解如何[在 Windows phone 中使用 Sqlite](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)。

并检查[Windows Phone 7 中的本地数据库支持](http://www.kunal-chowdhury.com/2011/06/windows-phone-7-mango-tutorial-24-local.html)和[基于 Linq 的本地数据库](http://blogs.ugidotnet.org/corrado/archive/2011/06/05/using-local-database-in-wp7-mango.aspx)以获取其他选项。

# java - 从 onItemClick 中检索选定的菜单项文本 - Android？

> ID：13737394
> 
> 赞同：1
> 
> 时间：2012-12-06T05:16:56.977
> 
> 标签：java, android, android-arrayadapter, listitem

我知道这个问题已经被问过好几次了。你会认为至少有一个解决方案会帮助我，但没有这样的运气。

我有以下代码可以正确填充列表视图（[也可以在此处找到](http://windrealm.org/tutorials/android/android-listview.php#activity)）：

```
 public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    // Find the ListView resource.   
    mainListView = (ListView) findViewById( R.id.mainListView );  

    // Create and populate a List of planet names.  
    String[] planets = new String[] { "Mercury", "Venus", "Earth", "Mars",  
                                      "Jupiter", "Saturn", "Uranus", "Neptune"};    
    ArrayList<String> planetList = new ArrayList<String>();  
    planetList.addAll( Arrays.asList(planets) );  

    // Create ArrayAdapter using the planet list.  
    listAdapter = new ArrayAdapter<String>(this, R.layout.simplerow, planetList);  

    // Set the ArrayAdapter as the ListView's adapter.  
    mainListView.setAdapter( listAdapter );        
  } 
```

但是，无法成功获取所选项目的文本。

比如用户选择“Mars”，什么函数在函数中返回文本“Mars”：

```
public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

// Retrieve selected text here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:22:22.460

```
public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

   String text = parent.getItemAtPosition(pos); // This is the selected text.
} 
```

# smartcard - 如何开始编写 Smart Card MiniDriver

> ID：13737401
> 
> 赞同：0
> 
> 时间：2012-12-06T05:17:49.743
> 
> 标签：smartcard

我熟悉智能卡 CSP 和 MiniDriver API 和功能，但实际上我不知道如何制定策略！我需要一个关于开发 MiniDriver dll 应该采取的步骤的路线图。请你帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:29:58.833

1.  获取智能卡 APDU 参考

2.  检查智能卡如何适合微型驱动程序功能（只读智能卡，如何生成唯一 ID，是否允许存储文件，...）

3.  实现微型驱动程序

4.  使用 cmck.exe 进行测试（用于数字签名的测试）

5.  构建一个 msi（使用驱动程序安装程序检查 wix）

6.  签字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T11:00:28.533

聘请有开发微型驱动程序经验的人将是我最好的答案，因为这项任务远非易事，而且关于该主题的文档很少，没有书籍，没有教程，什么都没有。因此，除非您在处理已经编写的微型驱动程序方面有良好的经验-并且-与已经编写过微型驱动程序的少数人交流（通常在 gemalto、oberthur 或此类公司中找到）-并且-非常好奇-并且-非常耐心等.. 从头开始​​编写微型驱动程序将是一项非常艰巨的任务。

# mysql - MYSQL 如何为 OutFile 使用变量

> ID：13737402
> 
> 赞同：1
> 
> 时间：2012-12-06T05:17:53.070
> 
> 标签：mysql

我找不到如何将变量用作 Outfile。

```
DECLARE wOutFile CHAR(256);
SET wOutFile = CONCAT('c/data/',wDateStr,'.csv');
SELECT * FROM sometable
INTO OUTFILE wOutFile; 
```

以上在最后一行呈现错误。MySQL Workbench 中的语法解析器不喜欢最后一行的 wOutFile。

有没有办法告诉解析器使用变量的内容？

我试图搜索一段时间，但我不能很好地表达我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:15:35.883

如果你想从字符串中创建新语句，那么你应该使用[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)-

```
DECLARE wOutFile CHAR(256);
SET wOutFile = CONCAT('c/data/',wDateStr,'.csv');

SET @var = CONCAT('SELECT * FROM sometable INTO OUTFILE ', wOutFile);
PREPARE stmt FROM @var;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# php - php禁止用户访问某些页面，除非登录

> ID：13737403
> 
> 赞同：3
> 
> 时间：2012-12-06T05:17:57.697
> 
> 标签：php

我是 php 新手，我想问一些问题，我们是否可以制作如下所示的功能？我有几个管理页面，并且有一个管理员登录页面。对于正常的日常工作应该没问题。但是如果有人知道登录页面之后的管理页面的 url，他们需要做的就是输入该 url 并访问该页面进行更改，但我想禁用它，所以它会要求他们登录以管理员身份查看该页面并将其重定向到管理员登录页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:18:44.000

将用户 ID 设置为登录时的会话，如果未设置重定向到其他页面或不包含代码的某些部分或整个代码，请检查是否设置了会话

喜欢

```
if(!isset($_SESSION['userid'])){
   //redirect or other you want
} 
```

# php - 如何使用 DataTable 插件将我的 JSON 数据显示到表格中？

> ID：13737415
> 
> 赞同：0
> 
> 时间：2012-12-06T05:18:58.720
> 
> 标签：php, jquery, ajax, json, datatables

根据[此处](http://datatables.net/release-datatables/examples/data_sources/server_side.html)的文档，我已经实现了服务器端代码。

JS代码

```
$('#datatable_paging').dataTable({
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "#### my php file path ####",
 }); 
```

我将 JSON 数据作为

```
{
    "sEcho": 0,
    "iTotalRecords": 19,
    "iTotalDisplayRecords": "19",
    "aaData": [
        ["1", "peter", "peter@gmail.com"],
        ["2", "john", "john@yahoo.com"],
        ["3", "raj", "raj@in.com"],
        ["4", "selvin", "selvin@gmail.com"],
        ["5", "ismail", "ismail@gmail.com"],
        ["6", "muadth", "muad@hotmail.com"],
        ["7", "ahmed", "ahmed@gmail.com"],
       .....
    ]
} 
```

现在我需要使用 Datatable 分页在下表中显示这个 JSON 结果

HTML 代码

```
 <table id="datatable_paging">
        <thead>
          <tr>
            <th>Id </th>
            <th>Name</th>
            <th>E-mail</th>                
          </tr>
        </thead>            
  </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:16:24.177

回答这个问题的人想得太多了。当您正确设置选项时，数据表将处理输出而无需任何花哨的循环/分配/等。假设您的 JSON 返回正确，如规范中所述：

HTML：

```
 <table id="datatable_paging"></table> 
```

然后是 jQuery：

```
var oTable = $('#datatable_paging').dataTable( {        
        "bDestroy":true,
        "bStateSave": true,
        "aaSorting": [[1, "asc"]], 
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "#### my php file path ####",
        "bJQueryUI": true,
        "bAutoWidth": false,
        "bFilter":true,
        "bLengthChange": true,
        "bPaginate": true,
        "bSort": true,
        "iDisplayLength": 10,
        "bInfo": true,
        "sPaginationType": "full_numbers",
        "aoColumns": [
            { "sTitle": "Id", "sWidth": "33%"},
            { "sTitle": "Name", "sWidth": "33%"},
            { "sTitle": "Email", "sWidth": "33%"}
        ]
    }) 
```

假设您的 PHP 源代码正确过滤，分页等将正确设置。例如，如果你发现你得到了 19 个结果，而你应该得到 10 个，你就会知道问题出在你的源头上，而不是在 jQuery 中。在您的示例中，消息来源说它返回 19 个总结果中的 19 个并且未指定 bPaginate，因此这就是分页不起作用的原因。aoColumns 设置你的头脑，除非你真的想要，否则不需要在 HTML 中做。其他功能在数据表网站上有详细的记录，但如果您感到困惑，请提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:32:41.450

您可以循环遍历“aaData”并直接使用 fnAddData 添加新行。

在这里查看例如：[http ://datatables.net/examples/api/add_row.html](http://datatables.net/examples/api/add_row.html)

编辑：也是你的一个例子。

```
var aaData = theVariableHoldingTheJsonObject.aaData;
$("#datatable_paging").dataTable().fnAddData ( aaData ) 
```

基本上就是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:12:43.077

看来您应该在 JSON 中发回正确的“sEcho”变量。

这是 DataTables 需要知道的关于被发送回的数据的信息，以便能够呈现。您需要将发送的值传回 DataTables。

此处描述了 sEcho：http: [//datatables.net/usage/server-side](http://datatables.net/usage/server-side)

因此，为了让您的示例作品将“sEcho”更改为 1 或更好地编写如下：

```
"sEcho": int(request.vars['sEcho'])   #python code 
```

# java - 我得到 Jtable 但没有数据

> ID：13737417
> 
> 赞同：0
> 
> 时间：2012-12-06T05:19:16.427
> 
> 标签：java, sql, swing, jtable, resultset

> **可能重复：**
> [我无法让我的 JTable 显示任何内容](https://stackoverflow.com/questions/13732705/i-cant-get-my-jtable-to-show-anything)

我可以显示我的表格，但我无法在表格中获取任何数据，只有列名。我的代码看起来像这样。

```
public static DefaultTableModel buildTableModel(ResultSet rs)
            throws SQLException {

        java.sql.ResultSetMetaData metaData = rs.getMetaData();

        // names of columns
        Vector<String> columnNames = new Vector<String>();
        int columnCount = metaData.getColumnCount();
        for (int column = 1; column <= columnCount; column++) {
            columnNames.add(metaData.getColumnName(column));
        }

        // data of the table
        Vector<Vector<Object>> data = new Vector<Vector<Object>>();
        while (rs.next()) {
            Vector<Object> vector = new Vector<Object>();
            for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {

                vector.add(rs.getObject(columnIndex));

            }
            data.add(vector);
        }

        return new DefaultTableModel(data, columnNames);

    } 
```

我的 kaldSql 看起来像这样。

```
public ResultSet Hentalleordreliste(Connection con){

    ResultSet Hentalleordreliste = null;

    try {
        PreparedStatement statement = con.prepareStatement("select varebestillinger.BestillingsID, " +
                "varebestillinger.LeverandoerID, "+
                "varebestillinger.BestillingsDato, varebestillinger.LeveringsDato, "+
                "varebestillinger.BestillingsStatus, varebestillinger.ModtagetAf, "+
                "varebestillinger.ModtagelsesDato, varebestillingsliste.Vare, " +
                "varebestillingsliste.Antal from varebestillinger left outer join " +
                "varebestillingsliste on  ListeID = BestillingsID");
                ResultSet rs = statement.executeQuery();

        while(rs.next()) {
            Hentalleordreliste = rs;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return Hentalleordreliste;

} 
```

GUI看起来像这样。

```
public GUIHentOrdre() {

    try {
        con = ks.connectNow();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ResultSet rs = ks.Hentalleordreliste(con);
    GUIOrdreHandler gh = new GUIOrdreHandler();
    JTable table = null;
    try {
        table = new JTable(gh.buildTableModel(rs));
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Handler handler = new Handler();

    JPanel info = new JPanel();
    info.setLayout(new BorderLayout());
    LavBestilling = new JButton("Lav ny bestilling");
    TableModel ClassOrVoidOrModelNameReturnsTableModel = null;
    JScrollPane scroll = new JScrollPane(table);
    info.setSize(1024, 768);
    add(scroll, BorderLayout.CENTER);
    add(LavBestilling, BorderLayout.NORTH);

    LavBestilling.addActionListener(handler);

} 
```

如前所述，我可以获得列名，我可以创建我的表，但无法获取其中存储的任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:39:33.337

除非您使用的是支持游标的数据库，否则我会仔细研究一下

```
while(rs.next()) {
    Hentalleordreliste = rs;
} 
```

这表明您在尝试填充表模型之前已经用尽了结果......

# jquery - 使用jQuery load()，回调函数运行两次？

> ID：13737423
> 
> 赞同：1
> 
> 时间：2012-12-06T05:19:38.677
> 
> 标签：jquery

它在一个 php 框架中，我将 load.js 导入到侧边栏模板。我需要从其他页面到每个 sidebar.load.js 的一些数据，如下所示：

```
jQuery(document).ready(function(){
    jQuery('.fleft').load('home.php?mod=spacecp&ac=credit&showcredit=1 #cred_update',function(){
          console.log(2)
      })
}) 
```

console.log 运行两次，home.php 页面没有导入 load.js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:24:29.157

通过哈希爆炸重定向。例如：`/foo.php#/bar`到`/foo.php#/baz` 或使用`window.location.replace(forward)`

# ruby-on-rails - 每次 SELECT 更新一行

> ID：13737426
> 
> 赞同：0
> 
> 时间：2012-12-06T05:19:52.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我想在每次通过 SELECT 调用它时更新一行

```
ROW.Hashtag.where{ |hashtag| hashtag.hashtag =~ hashtag_scrubbed}.order{"RANDOM()"}.limit(4) 
```

有没有一种简单的方法可以做到这一点，或者我必须稍后在选择这些行 ID 的情况下运行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:18:34.110

我认为你最好的选择是使用 after_find ActiveRecord 回调。

来自[API](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)（稍微解释一下）：

> finder 找到的每个对象都会触发 after_find 回调。

# javascript - 在不改变句子中单词顺序的情况下反转字符串

> ID：13737432
> 
> 赞同：5
> 
> 时间：2012-12-06T05:20:22.047
> 
> 标签：javascript

我的代码：

我尝试了以下代码，但单词的顺序正在改变

```
var str = "Welcome to my Website !";

alert(str.split("").reverse().join("")); 
```

它给出的结果为

`! etisbeW ym ot emocleW`

但我需要结果为

`emocleW ot ym etisbeW !`

也就是说，我不想改变单词的顺序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T05:39:36.657

用这个：

```
var str = "Welcome to my Website !";
alert(str.split("").reverse().join("").split(" ").reverse().join(" ")); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-06T05:22:52.950

您可以拆分空格，然后使用`map`反转每个单词中的字母：

```
alert(str.split(" ").map(function(x) {
    return x.split("").reverse().join("");
}).join(" "));​ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T05:37:37.967

对于较旧的浏览器支持，您可以试试这个，

```
var str = "Welcome to my Website !";

String.prototype.str_reverse= function(){
 return this.split('').reverse().join('');
}

var arr = str.split(" ");
for(var i=0; i<arr.length; i++){
 arr[i] = arr[i].str_reverse();
}

alert(arr.join(" ")); //OUTPUT: emocleW ot ym etisbeW ! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-05T20:38:52.917

我刚刚使用功能方法和打字稿解决了这个问题：

```
const  aString = "Our life always expresses the result of our dominant thoughts.";

function reverseString (str: string) :string {
  return  str.split('').reverse().join('')
}

function reverseWords(str:string) :string {
  return str.split(" ").map(reverseString).join(" ")
}

console.log(reverseWords(aString))
// ruO efil syawla sesserpxe eht tluser fo ruo tnanimod .sthguoht 
```

# c++ - C++ 在另一个对象中引用一个对象的当前状态

> ID：13737438
> 
> 赞同：1
> 
> 时间：2012-12-06T05:20:53.713
> 
> 标签：c++, object, pointers, reference, forward-declaration

我已经从高处和低处搜索了这个问题的答案，并尝试了许多解决方案，包括前向声明、指针和引用。我确定我只是在某处使用了不正确的语法。在浪费了很多时间之后，我决定转向堆栈溢出。

我正在尝试编写我的第一个 CPP 应用程序作为学习经验。现在我有一个 Player 和一个 Ball 对象。我的 Ball 对象必须能够访问我的 player 对象中的一些成员变量和方法。我一直无法弄清楚如何做到这一点。下面是我的代码的一个极其简化的版本。我已经注释了特别重要的代码。

播放状态.hpp

```
#ifndef PLAYSTATE_HPP
#define PLAYSTATE_HPP
#include "Player.hpp"
#include "Ball.hpp"

class Player;
class Ball;

class PlayState
{
public:
    PlayState();
    Player player;
    Ball ball;
 };
#endif 
```

播放状态.cpp

```
#include "PlayState.hpp"

PlayState::PlayState() {
}

void PlayState::update() {

    if (sf::Keyboard::isKeyPressed(sf::Keyboard::W))
    {
        ball.checkCollision();
        player.move(1);
    }
    ball.update();
}

void PlayState::draw()
{
    m_game.screen.clear();
    m_game.screen.draw( player.getSprite() );
    m_game.screen.draw( ball.getSprite() );
    m_game.screen.display();
} 
```

播放器.hpp

```
#ifndef PLAYER_HPP
#define PLAYER_HPP

class Player
{
public:
    Player();
    ~Player();

    void create();
    void setRotation(float);
    void setPosition(float, float);
};
#endif 
```

Player.cpp 不应该真的那么重要。

球.hpp

```
#ifndef BALL_HPP
#define BALL_HPP

class Player; // I don't think forward declaration is what I need???

class Ball
{
public:
    bool picked_up;
    bool throwing;

    Player *player; // this isn't working

    Ball();
    ~Ball();

    bool checkCollision();
};
#endif 
```

球.cpp

```
#include "Ball.hpp"

Ball::Ball() {
    Ball::picked_up = false;
    Ball::throwing = false;
}

Ball::~Ball() {
}

bool Ball::checkCollision()
{
    float ball_position_x = Ball::getPosition().x;
    float ball_position_y = Ball::getPosition().y;

    // I need to access the player object here.
    float x_distance = abs(player.getPosition().x - ball_position_x);
    float y_distance = abs(player.getPosition().y - ball_position_y);

    bool is_colliding = (x_distance * 2 < (player.IMG_WIDTH + Ball::width)) && (y_distance * 2 < (player.IMG_HEIGHT + Ball::height));

    return is_colliding;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:26:06.037

当您说`player`时，您的意思是与当前对象`player`在同一对象中的完全相同吗？如果是这样，您想首先设置该链接，则无法自动完成。`playstate``ball`

```
PlayState::PlayState() :ball(&player){ //pass pointer to ball of its player?
}

class Ball
...    
Ball(Player *myPlayer);
...

}

Ball::Ball(Player *myPlayer):player(myPlayer) {
...

// I need to access the player object here.
float x_distance = abs(player->getPosition().x - ball_position_x); 
```

您还需要使用指针来使用播放器，因为它是指向播放器对象的指针。

您确实需要在 Ball 类上方对 Player 进行前向声明。上面的 Playstate 是不必要的。

此外，您的播放器似乎没有 GetPosition 函数，我假设它是您忘记包含在上面的公共成员函数。

# php - mongodb写关注

> ID：13737444
> 
> 赞同：3
> 
> 时间：2012-12-06T05:21:51.443
> 
> 标签：php, mongodb, mongodb-php

据我所知，当我设置为 write "safe" = true 时，它​​设置选项 w = 1，j = 0，它确认写入操作，但不确认写入磁盘（持久性）。像这样的东西：

```
$collection->remove(array('_id' => array('$in' => $idsToDelete)), array('safe' => true)); 
```

我可以设置 w = 1, j = 1 来保证耐用性（不是在最新的驱动程序中）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:49:35.230

PHP 驱动程序使您可以访问各个[写入关注](http://us2.php.net/manual/en/mongo.writeconcerns.php)选项。

对于您的情况，它将是：

```
$collection->remove(
    array('_id' => array('$in' => $idsToDelete)), 
    array("w" => 1, "j" => true)); 
```

# java - 在 Android 中获取“我的文档”文件

> ID：13737453
> 
> 赞同：2
> 
> 时间：2012-12-06T05:23:22.760
> 
> 标签：java, android

我有几个录音，我想通过告诉 MediaPlayer 要播放的文件从我的代码中播放它们。

问题是我找不到文件！手机声称它们在“我的文档/我的录音”中，当我将手机作为磁盘连接时，Windows 也是如此。但是当我在 Java 中将该文件夹作为文件打开时，它不存在。

我看过`Android.os.Environment.getExternalStorageDirectory()`and `getExternalStoragePublicDirectory()`，但我还没有找到进入**My Documents**的魔法咒语。

任何帮助将非常感激！

<编辑> 找到了文件`/sdcard/My Documents/My Recordings`——所以我猜问题变成了“有没有比硬编码/sdcard 更便携的方法？”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:15:56.160

我想你想要这样的东西：

```
Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES); 
```

这[在此处进行了描述](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)。不幸的是，似乎没有`DIRECTORY_RECORDINGS`...

查看您的具体问题，文本建议`getExternalStorageDirectory()`将`My Documents`在 Android 4.2 上返回。也许试试这个黑客：

```
String myDocs = new Path(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)).getParent(); 
```

# haskell - 在类型同义词声明中循环

> ID：13737458
> 
> 赞同：3
> 
> 时间：2012-12-06T05:23:48.017
> 
> 标签：haskell, types

我想试用 Haskell`type`并`data`使用以下代码

```
type Program a = Maybe a -> (Operation a, Maybe Program a)
data Operation a = Read a | Write a 
```

`Program`遵循延续传递风格 (CPS) 并`Nothing`表示终止。`a`可以用`Int`或其他东西实例化。

然而，GHC 抱怨说：

```
main.hs:1:1:
    Cycle in type synonym declarations:
      main.hs:1:1-58: type Program a =
                          Maybe a -> (Operation a, Maybe Program a) 
```

我是 Haskell 的新手，所以我不明白为什么不允许这样做。如何在 Haskell 中表达这种类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T05:33:52.647

这里有两个问题：

*   应该是`Maybe (Program a)`，不是`Maybe Program a`
*   类型同义词不能递归

一个工作版本是：

```
newtype Program a = Program { runProgram :: Maybe a -> (Operation a, Maybe (Program a)) }
data Operation a = Read a | Write a 
```

# c# - 漫游设置的潜在缺点是否会导致我在本地设置中复制它们？

> ID：13737466
> 
> 赞同：0
> 
> 时间：2012-12-06T05:24:57.137
> 
> 标签：c#, windows-8, cloud, windows-store-apps, application-settings

在两种情况下，将我的应用程序设置存储在本地似乎比漫游/在云中更可取，即：

```
1) When the user has (temporarily) lost internet connectivity
2) When/if retrieving roaming settings perceptibly impacts performance 
```

因此，我正在考虑在本地*和*通过漫游存储设置，并且仅在检测到当前用于运行我的应用程序的设备不是通常/最初使用的设备时才检索漫游设置。当然，无论如何，我仍然需要*将*漫游设置与本地设置一起存储。

IOW，我想为上述场景在本地存储，但我也想在用户使用我的应用程序与原来不同的设备时漫游设置。

这是一种明智的方法（在本地和云端复制设置）吗？如果是这样，有没有办法半自动地完成这个而不是复制所有存储代码的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:44:02.190

漫游设置可离线使用。唯一的区别是，如果您在线，它们将同步到其他设备。如果您处于离线状态，它将只使用您拥有的最新版本，直到您再次在线。

# php - 通过 iframe 中的脚本检测父域名

> ID：13737468
> 
> 赞同：0
> 
> 时间：2012-12-06T05:25:11.560
> 
> 标签：php, javascript, html

我目前有一个 iframe，例如： `<iframe src="www.mydomain.com/myfram.php">`并以不同的域名嵌入到我的客户端页面。我希望我的脚本`"myfram.php"`检测嵌入我的 iframe 的父域（客户端域）。我使用 `$_SERVRE['SERVER_NAME']`但它返回我的域名而不是客户端。那么你有另一种方法来获取客户域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:28:45.203

PHP 甚至不知道该页面位于`iframe`. 只有 JavaScript 可以告诉你，即使那样跨域限制也可能会干扰。

如果有任何工作，它将使用 AJAX 发送`top.location.hostname`到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:29:54.550

您必须在 javascript 中执行此操作：parent.document.URL

# java - 有一个实现和“服务”类：这些是最佳实践吗？

> ID：13737472
> 
> 赞同：4
> 
> 时间：2012-12-06T05:25:39.983
> 
> 标签：java, spring, model-view-controller, web-applications

我是 Spring 编程的新手，我经常看到使用 DAO 实现类的示例/教程/指南。我还看到了具有“服务”类（和相应的实现类）的示例，它们似乎除了调用主 DAO 类之外什么都不做。

这些是最佳实践吗？当我可以直接调用 DAO 时，这似乎是一种匆忙的做事方式？而且我仍然坚持 MVC 编程没有这些额外的类。

感谢您的输入。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:47:28.730

我认为这是 Spring 和 Hibernate 的最佳实践，但如果没有正确完成，是的，你会得到代码重复，这不是 OOP。

请参阅关于此的讨论[了解 DAO v 服务分离](http://www.coderanch.com/t/100750/patterns/Understanding-DAO-Service-seperation)和[Simplify the DAO with Spring and Java Generics](http://www.baeldung.com/2011/12/08/simplifying-the-data-access-layer-with-spring-and-java-generics/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:02:02.897

分别编写服务和 DAO 实现是一个很好的做法。您可以在服务类中编写业务逻辑，并在 DAO 实现类中调用数据库。如果需要更改任何业务逻辑，您可以在服务中更改，DAO 只能用于数据库操作。

# android - 在android多行EditText中打印行号

> ID：13737474
> 
> 赞同：2
> 
> 时间：2012-12-06T05:26:01.043
> 
> 标签：android, code-editor

我正在android中创建一个代码编辑器。每次用户换行时，我想在屏幕上打印行号。我正在使用`EditText`编辑器。任何人都可以帮助我。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:29:24.820

您可以`getLineCount()` [从此处](http://developer.android.com/reference/android/widget/EditText.html)使用并为每个新行自动添加（作为循环中的示例）行号。

伪代码：

```
for (a = 1; a < getLineCount();a++)
{
     line[a] = a.toString()+": " + line[a];
} 
```

**编辑：**
对于自动添加行号，您应该创建自己的`EditText`类实现。

# css-transitions - IE10 中的 box-shadow + 过渡故障

> ID：13737476
> 
> 赞同：7
> 
> 时间：2012-12-06T05:26:08.600
> 
> 标签：css-transitions, css, internet-explorer-10

[JSFiddle](http://jsfiddle.net/mhdGZ/)

```
<div id="box">
    <div id="body">Blah blah blah</div>
</div> 
```

```
#box {
    box-shadow: 0 0 8px black;
}
#body {
    height:100px;
    transition: height 0.8s ease;
}
#body:hover {
    height: 200px;
} 
```

在 IE10 中，当过渡改变内容的高度时，框底部的阴影会出现故障。请注意，仅当*内容*框改变高度时才会发生这种情况。如果是*容器*，阴影效果很好。但是，我无法更改容器的大小，因为我希望它是动态的以适应其内容。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:16:46.863

最好的办法是执行以下操作。我的猜测是，因为 box-shadow 没有应用于实际调整大小的元素，所以它不能随内容调整大小。我需要做更多的研究，但这有效：

# 编辑固定容器：

为每个孩子应用一个透明的盒子阴影。

## CSS：

```
<style type='text/css'>
    .box {
        box-shadow: 0 0 8px black;
    }
    .box .body {
        box-shadow: 0 0 8px transparent; 
    }
    .body {
        height:100px;
        transition: height 0.8s ease;

    }
    .body:hover {
        height: 200px;
    }
</style> 
```

## HTML：

```
<div class="box">
    <div class="body">Blah blah blah</div>
    <div class="body">Blah blah blah 2</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T08:47:19.047

渲染问题已在 IE11 中修复。不用担心！

# java - InvocationTargetException，如何从此异常中提取带有消息的导致异常

> ID：13737477
> 
> 赞同：1
> 
> 时间：2012-12-06T05:26:10.030
> 
> 标签：java, exception-handling, java-compiler-api, invocationtargetexception

从其他 Java 程序运行此语句时。

```
mainMethod.invoke(null,(Object) args); 
```

我得到了这个例外

```
I'm dying!
I'm not dead yet!
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.fourgid.ot.action.RunThread.run(RunThread.java:59)
***Caused by: java.lang.SecurityException
at Main$1.checkExit(Main.java:21)
at java.lang.Runtime.exit(Runtime.java:88)
at java.lang.System.exit(System.java:904)
at Main.main(Main.java:30)***
... 5 more 
```

我只是为了显示`SecurityException`由 JVM 给出的消息和行号（突出显示的文本上方）引起的异常。

我正在开发一个用于在 Web 上编译和执行程序的应用程序。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:33:46.117

我的建议：抓住`InvocationTargetException`然后尝试[`exception.getCause()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/InvocationTargetException.html#getCause%28%29)。然后，您可能能够从底层证券中获得更多详细信息`SecurityException`。

# jquery - 使用 Wordpress 使熔岩灯下拉菜单动态化的问题

> ID：13737479
> 
> 赞同：1
> 
> 时间：2012-12-06T05:26:14.730
> 
> 标签：jquery, wordpress, drop-down-menu, lavalamp

经过大量的工作和一大堆的搜索和组合代码，我终于让我的熔岩灯下拉菜单导航工作（看这里： http: [//lookseewatch.com/overflowexample/menu.html](http://lookseewatch.com/overflowexample/menu.html)）。伟大的。

问题是：我一辈子都无法使用 Wordpress 菜单 (wp_nav_menu)。我一直无法让 wp_nav_menu 生成与我当前的硬代码相同的标记。我还需要这个`<div id="box"><div class="head"></div></div>`INSIDE of " `<ul class="nav">.`" wp_nav_menu 不允许我这样做，因为它会生成包含 ul 类等等。

所以在尝试了几个小时不同的事情之后，我就是无法得到它。如果你去这里[http://lookseewatch.com/independentinsurance/](http://lookseewatch.com/independentinsurance/)你会看到两个导航空间大约 300 像素。第一个是硬编码版本，第二个是由 wp_nav_menu 生成的。我已经更改了 css 以使用第二个导航，所以顶部有点有趣，但你会注意到“魔术线”遵循两个版本的导航，我认为这很有趣。我只是不知道如何让它低于动态版本。第二个问题是，当您将鼠标悬停在第二个导航上的“保险服务”上时，一切都很好，然后您将鼠标悬停在“商业保险”上并出现 3 个新的下拉菜单，当您悬停或单击其中一个选项时，它们迅速消失。

这是我的 navigation.js 的代码

```
var speed = 400;//speed of lava lamp
var menuFadeIn = 0;//speed of menu fade in transition
var menuFadeOut = 0;//speed of menu fade in transition
var style = 'easeOutQuart';//style of lava lamp
var totalWidth = 0;//variable for calculating total width of menu according to how many li's there are
var reducedWidth = 4;
(function($) {  
$(document).ready(function(){

    if($.browser.opera){
        $(".nav ul").css("margin-top", "32px");//opera fix for margin top
        $(".nav ul ul").css("margin-top", "-20px");
    }
    if(!$.browser.msie){// ie fix
        $("ul.nav span").css("opacity", "0");
        $(".nav ul ul ul").css("margin-top", "-20px");
    }
    if($.browser.msie){
        $("ul.nav span").css({visibility:"hidden"});
    }
       //totalWidth = $(".nav li:last").offset().left -  $(".nav li:first").offset().left + $(".nav li:last").width();//width of menu
       //$(".nav").css({width:totalWidth});//setting total width of menu

       var dLeft = $('.current-menu-item a').offset().left+15;//setting default position of menu
       var dWidth = $('.current-menu-item a').width();
       var dTop = $('.current-menu-item a').offset().top;

       //var origLeft = .data($dLeft.offset().left+14);
       //var origWidth = .data($dWidth.width());
       //var origTop = .data($dTop.offset().top);

        //Set the initial lava lamp position and width
        $('#box').css({left:dLeft});
        $('#box').css({top: dTop});
        $('#box').css({width: dWidth});

    $(".nav > li").hover(function(){
        var position = $(this).offset().left+15;//set width and position of lava lamp
        var width = $(this).width()-29; 
        if(!$.browser.msie){//hover effect of triangle (glow)
            $(this).find('span:first').stop().animate({opacity: 1}, 'slow');
        }
        else{
            $(this).find('span:first').css({visibility:"visible"}); 
        }
        $('#box').stop().animate({left:position, width:width},{duration:speed, easing: style});
        }, function() {
            $('#box').stop().animate({left:dLeft, width:dWidth},{duration:speed, easing: style});
        },

        function(){
        if(!$.browser.msie){
            $(this).find('span:first').stop().animate({opacity: 0}, 'slow');//hiding the glow on mouseout
        }

        if($.browser.msie){
            $(this).find('span:first').css({visibility:"hidden"});      
        }           
    });

    $(".nav li").hover(function(){//animating the fade in and fade out of submenus level 1
           $(this).find('li').fadeIn(menuFadeIn); 
            $('li li li').css({display:"none"});
            },
           function(){  
                $(this).find('li').fadeOut(menuFadeIn); 
           });  

             $(".submenu0 li").hover(function(){//animating the fade in and fade out of submenus level 2 
                $(this).find('li').fadeIn(menuFadeIn);  
                $('li li li li').css({display:"none"});

            },
            function(){  
                $(this).find('li').fadeOut(menuFadeOut); 

            }); 
             $(".submenu1 li").hover(function(){//animating the fade in and fade out of submenus  level 3
            $(this).find('li').fadeIn(menuFadeIn);  
            },
            function(){  
                $(this).find('li').fadeOut(menuFadeOut); 

            }); 

});

})($); 
```

我认为问题在于我如何瞄准第二或第三层次。

```
 $(".submenu0 li").hover(function(){//animating the fade in and fade out of submenus level 2 
            $(this).find('li').fadeIn(menuFadeIn);  
            $('li li li li').css({display:"none"});

        },
        function(){  
            $(this).find('li').fadeOut(menuFadeOut); 

        }); 
         $(".submenu1 li").hover(function(){//animating the fade in and fade out of submenus  level 3
        $(this).find('li').fadeIn(menuFadeIn);  
        },
        function(){  
            $(this).find('li').fadeOut(menuFadeOut); 

        }); 
```

无论如何，我感谢您的帮助。我需要想办法解决这个问题，所以如果您有任何建议，请随时提出。另外，如果我需要提供任何代码片段，我很乐意提供。任何解决此导航的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:37:12.863

好的，你需要的可以在[Wordpress Codex](http://codex.wordpress.org/Function_Reference/wp_nav_menu)中找到。在`wp_nav_menu()`函数的默认值数组中（[在此处找到](http://codex.wordpress.org/Function_Reference/wp_nav_menu)），您可以看到有一个名为`items_wrap`. 使用它，我们可以将您的 div 添加到菜单的末尾：

```
<?php wp_nav_menu( array('items_wrap' => '<ul class="%2$s">%3$s<div id="box"><div class="head"></div></div></ul>' ) ); ?> 
```

**- - 编辑 - -**

好的，您的子菜单悬停似乎是这一行：

`$('li li li').css({display:"none"});`

我冒昧地在这里为您的问题创建了一个 jsFiddle：http: [//jsfiddle.net/zAqct/](http://jsfiddle.net/zAqct/)正如您所见，有问题的行已被注释掉，并且悬停似乎再次起作用。显然这不是 100%，所以我制作了一个更简单的测试用例。

**--- 第二次编辑 ---**

好的，进一步看，我认为主要问题是您的 CSS 和 JS 被证明有点过于复杂。为了说明一个更简单的方法，我在这里更新了 jsFiddle：http: [//jsfiddle.net/zAqct/2/](http://jsfiddle.net/zAqct/2/)

您应该会发现此版本更符合您的需要。

# javascript - 在没有循环的组中获取单选按钮的输入值

> ID：13737481
> 
> 赞同：0
> 
> 时间：2012-12-06T05:26:51.810
> 
> 标签：javascript, html, domdocument

我需要获取使用纯 javascript ( No JQuery ) 检查哪个单选按钮，而无需遍历每个输入元素并检查每个输入元素的 'checked' 属性。

PS：Jquery解决方案也将不胜感激:)

给定 HTML ：

```
 <tr id = "reportLayout">
         <th align="left" style="padding-right: 10px">Layout</th>
            <td>
             <input type="radio" name="layout" value="portrait">Portrait</input>                                                            
             <input type="radio" name="layout" value="landscape">Landscape</input>
            </td>
      </tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:30:15.987

> *“PS：Jquery 解决方案也将不胜感激 :)”*

好的，使用[`:checked`选择器](http://api.jquery.com/checked-selector/)：

```
var checkedRB = $('input[type="radio"][name="layout"]:checked'); 
```

检查无线电的值将是：

```
checkedRB.val(); 
```

要在没有 jQuery 的情况下执行此操作，“标准”方法是使用循环，但如果您不关心 IE < 9，您也可以这样做：

```
var checkedRB = document.querySelectorAll(
                     'input[type="radio"][name="layout"]:checked');
if (checkedRB.length === 0) {
    // none checked
} else {
    alert(checkedRB[0].value);
} 
```

演示：http: [//jsfiddle.net/xHAwX/1/](http://jsfiddle.net/xHAwX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:29:36.880

获取当前选中的单选按钮

```
$("input[@name=radioname]:checked") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:33:50.837

我猜你只在 reportLayout 中使用单选框：

```
$('#reportLayout').find(':checked') 
```

会做的;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:22:39.830

```
var check = $('input[name:layout]:checked').val();
alert(check); 
```

这将为您提供当前选中的单选按钮的值。

您还可以通过以下方式检查是否选中了任何单选按钮

```
var check = $("input[name:layout]:checked").length;
alert(check); 
```

# iphone - 在面板上更改 UILocalNotification 计数

> ID：13737482
> 
> 赞同：-1
> 
> 时间：2012-12-06T05:26:53.417
> 
> 标签：iphone, ios, uilocalnotification

我遇到了问题：当我发送 UILocalNotification 为：</p>

```
UILocalNotification *alarm = [[UILocalNotification alloc] init];
if (alarm) {
    alarm.fireDate = [NSDate date];
    alarm.timeZone = [NSTimeZone defaultTimeZone];
    alarm.repeatInterval = 0;
    alarm.soundName = UILocalNotificationDefaultSoundName;
    alarm.alertBody ="This is 1 message";

    if (object) {
        NSDictionary *infoDic = [NSDictionary dictionaryWithObject:object forKey:objectkey];
        alarm.userInfo = infoDic;

    }

    [[UIApplication sharedApplication] presentLocalNotificationNow:alarm]; 
```

您可以看到代码：当我发送两次通知时，您可以收到两次消息：“这是 1 条消息”“这是 1 条消息”
在手机面板上。我不想更改alarm.alertBody的内容，但是当我收到两次消息时，我可以将面板上的两个“这是1条消息”“这是1条消息”合并为一个“有两条消息”。如果我可以完成任务，如果可以，我可以使用什么 api？在android状态信息和面板信息是不同的，但我认为iOS只有一个警报体，状态和面板是一样的，对吗？

编辑：我不知道为什么给我-2，我的问题很简单？或其他？答案不是我需要的。

编辑2：我描述了我的需要。当用户从 15 个人收到不同的 1 条消息时，它会一一出现，所以我不能给它 [NSString stringWithFormat:@"there are %d messages",count]，我只给它"有 1 条消息"，但是当用户打开面板，我只显示“有15条消息”，可以cannel 14“有1条消息”。答案 1，给我答案是：在状态“有 15 条消息”，但没有人给我这么多消息，人们只给我 1 条消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:36:26.027

您可以创建一个函数来安排通知。为警报消息创建一个数组，每次使用计数器 +1 添加新警报。然后，您可以在特定日期安排本地通知，因为您想要这样的事情会有所帮助：

```
- (void)scheduleNotification:(NSDate*)showDate withMsg:(NSString*)msg
{
Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil) {

        UILocalNotification *notif = [[cls alloc] init];
        //      notif.fireDate = [datePicker date];

        //setting the fire dat of the local notification
        notif.fireDate = showDate;//[NSDate dateWithTimeIntervalSinceNow:5];

        //setting the time zone
        notif.timeZone = [NSTimeZone defaultTimeZone];

        //setting the message to display
        //notif.alertBody = @"You are notified";
        notif.alertBody = msg;

        //default notification sound
        notif.soundName = UILocalNotificationDefaultSoundName;

        //displaying the badge number
        notif.applicationIconBadgeNumber = [[UIApplication sharedApplication]applicationIconBadgeNumber]+1;

        //schedule a notification at its specified time with the help of the app delegate
        //        NSLog(@"Todays date:%@ Notification Date:%@",[NSDate date],showDate);

        // Displaying Button tittle
        notif.alertAction = @"Show me";

        //      //setting the values in dict of local notification  
        //      NSDictionary *userDict = [NSDictionary dictionaryWithObject:_serverMsg
        //                                                             forKey:kRemindMeNotificationDataKey];
        //      notif.userInfo = userDict;

        [[UIApplication sharedApplication] scheduleLocalNotification:notif];

    }

} 
```

# c# - 在需要时只生成一次可缓存数据，否则阻塞？

> ID：13737483
> 
> 赞同：0
> 
> 时间：2012-12-06T05:26:58.193
> 
> 标签：c#, asp.net, caching, concurrency, t4

我正在制作一个很酷的 (imo) T4 模板，这将使缓存更容易。我制作这个模板的一个选项是允许“加载一次”类型的功能，尽管我不确定它有多安全。

基本上，我想这样做，以便您可以执行以下操作：

```
var post=MyCache.PostsCache.GetOrLockLoad(id, ()=>LoadPost(id)); 
```

并且基本上做到了，当必须加载缓存时，它将在`PostsCache`. 这样，其他线程将阻塞，直到`LoadPost()`函数完成。这使得 LoadPost 只会在每次缓存未命中时执行一次。执行此操作的传统方法是 LoadPost 将在缓存为空的任何时候执行，如果在第一次加载缓存之前有多个请求，可能会执行多次。

这是一件合理的事情，还是因为这种危险或浪费的事情而阻塞其他线程？我在想线程锁定开销大于大多数操作，但也许不是？

有没有人看到过这种事情，这是一个好主意还是危险？

此外，尽管它被设计为在任何缓存和应用程序类型上运行，但它最初的目标是 ASP.Net 的内置缓存机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:45:01.177

这似乎没问题，因为理论上第一个请求之后的请求只会等待它们自己加载数据所花费的时间。

但它仍然感觉有点不确定 - 如果第一个加载程序线程由于一些可能不会影响其他线程的间歇性问题而被阻止怎么办。感觉让每个线程独立尝试加载会更安全。

它还增加了锁定机制的复杂性和开销。请记住，您执行的锁定越多，您引入的陷入死锁条件的风险就越大（通常）。尽管在您的情况下，只要方法中没有时髦的锁定，`LoadPost`它就不应该成为问题。

考虑到风险，我认为您最好选择非锁定选项。

毕竟，对于任何给定的线程，等待时间几乎相同——要么是加载时间，要么是等待第一个线程加载所花费的时间。

当使用非并发选项而不是并发选项时，我总是有点不舒服，尤其是在收益似乎微不足道的情况下。

# android - java.lang.IllegalStateException: Can't parcel arecycled bitmap 出现错误

> ID：13737485
> 
> 赞同：2
> 
> 时间：2012-12-06T05:27:31.063
> 
> 标签：android

我正在尝试使用以下代码来获取从相机拍摄的图像位图。我使用这个概念是因为我将图像作为水印添加到拍摄的照片中。所以我只是让 Activity 绘制为位图。

当我这样做时，我收到以下错误（无法包裹回收的位图错误）

我想将此位图发送到另一个活动。

如何检查我是否获得图像？

```
else if(v.equals(findViewById(R.id.ok_button))){

                topbar.setVisibility(View.GONE);
                menubar.setVisibility(View.GONE);
                bottom.setVisibility(View.GONE);

                View s = ml.getRootView();
                s.setDrawingCacheEnabled(true);

                b = s.getDrawingCache();
                Log.e("ok","ok");
                Intent i=new Intent(CameraActivity.this,Update.class);
                 i.putExtra("data",b);
                 startActivity(i);
      //           s.setDrawingCacheEnabled(false);
        //         s.setVisibility(View.GONE);
                 finish(); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-05T19:25:12.067

晚了“一点”，但我最近遇到了一个与此类似的问题，遇到相同问题的其他人可能会找到您的问题，所以最好有一个答案。

首先，确保在调用该`getDrawingCache`方法时获得所需的图像。如果您没有获得图像，请查看[此帖子以了解可能的原因。](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)

其次，确保图像不会被回收。情况可能并非如此，因为`IllegalStateException`说您无法打包回收的位图，会被抛出并且您的应用程序会崩溃。如果您的图像确实被回收，只需复制它并将副本放入`Bundle`. 作为旁注，调用`setDrawingCacheEnabled(false)`将调用`recycle()`.

第三（也是最后一个），确保图像通过其他活动。反序列化错误字段或错误变量等错误非常常见。

如果上述一切顺利并且您发生这种情况的原因在上面的代码中，那么您不应该只显示黑屏。如果您仍然出现黑屏，则错误很可能是在`Update`活动中，而不是在发送图像的活动中。

**编辑**：误读了这个问题。

您可能会遇到异常，因为在触发意图后图像可能（无法确认）被序列化。如果是这种情况，只需在 , 上放一个副本`Bitmap`，`Intent`而不是`Bitmap`像这样：

```
i.putExtra("data",b.copy(b.getConfig(), b); 
```

[这个问题](https://stackoverflow.com/questions/9071624/recycled-bitmap-exception)帮助我意识到了这一点。

# java - 如何在不损失质量的情况下缩放屏幕截图？

> ID：13737491
> 
> 赞同：0
> 
> 时间：2012-12-06T05:28:08.253
> 
> 标签：java, android, android-layout, android-manifest

现在我正在开发摄影应用程序，我正在开发捏缩放和所有应用效果选择的图像这是我的代码：

```
 view = new SandboxView(getApplicationContext(), bmp); 
```

并将此视图添加到我的框架布局中。为了保存目的，我正在截取此布局的屏幕截图，但它会根据屏幕宽度和屏幕高度给出，但我希望不会丢失 500*500 图像的图像质量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:02:52.907

当您说“不失质量”时，您的确切意思是什么？您唯一能做的就是使用平滑（但缓慢）的缩放方法。但是当你缩小图像时，你的图像会丢失信息（这是一个数学事实），因此你会失去质量。一个好的缩放算法将能够显示一张对人类来说仍然看起来不错但会有损失的图片。

而且，当您使用任何缩放算法将其缩放到更大的尺寸时，它会看起来不清晰或变砖。在那里您不会丢失信息，但视觉质量并不像您从放大尺寸的原生图像所期望的那样。

因此，您只能保存原始图像并在有人想看到它时将其缩放到任意大小。

# excel - 如何在excel中获取字符串中的第一个单词

> ID：13737493
> 
> 赞同：0
> 
> 时间：2012-12-06T05:28:31.203
> 
> 标签：excel, vba

可能是一个非常简单的问题，但我正在尝试匹配 excel 中的单词

如果在 A1:a400 范围内找到一个单词，则将不同工作簿中的单词替换为该行中的第一个单词

第 1 周

a1 = 太阳 a200 = 梨

发现梨

wkbk 2 a10 = sun（wbk 1 中第 1 行的第一个单词）

这当然是动态的。先感谢您

这就是发生的地方

```
If Not word = " " Then ' if not blank
    If word = Cell.Value Then
        fixedWord = Cell.Value(at the first word of this row)
        workBookBeingChecked.Activate
        Cell.Value(foundWordRange) = fixedWord   ' cell in old place is replaced by this new cell
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:18:52.200

修改以适合您更新的问题：

要根据匹配值获取行中的第一个单元格，请使用：

```
Range("C200").EntireRow.Columns(1).Value2 
```

# c# - 从 asp.net 中的 gridview 导出到 excel 时出现格式错误

> ID：13737495
> 
> 赞同：0
> 
> 时间：2012-12-06T05:28:32.247
> 
> 标签：c#, asp.net, gridview, export-to-excel

我尝试了网站中提到的一些解决方案，例如`Using System.Microsoft.Office.Excel`and `Excel = System.Microsoft.Office.Excel`，但它不起作用....在这里，我试图获取表格中的数据并以 .xls 格式下载到服务器中指定位置的文件和然后给用户一个下载文件的链接。这是导出的代码`

```
protected void btnExcelExport_Click(object sender, EventArgs e)
{
    System.Text.StringBuilder sb = new System.Text.StringBuilder();
    using (StringWriter sw = new StringWriter(sb))
    {
        using( HtmlTextWriter htw = new HtmlTextWriter(sw))
        {
            //  Create a form to contain the grid
            Table table = new Table();
            // get gridlines from gridview
            table.GridLines = GridView2.GridLines;
            if (GridView2.HeaderRow != null)
            {                       
                table.Rows.Add(GridView2.HeaderRow);
            }
            foreach (GridViewRow row in GridView2.Rows)
            {
                table.Rows.Add(row);
            }
            if (GridView2.FooterRow != null)
            {
                table.Rows.Add(GridView2.FooterRow);
            }    
            //  render the table into the htmlwriter
            table.RenderControl(htw);    
        }
        var myRootPath = Server.MapPath("~");
        var docPath = Path.GetFullPath(Path.Combine(myRootPath, "/Compare/c.xls")); 
        File.WriteAllText(docPath, sw.ToString());  
    }
    dwndlink.Visible = true;

} 
```

当这是链接按钮的代码时：

```
 protected void dwnlink(object sender, EventArgs e)
 {   
     var webRootPath = Server.MapPath("~");
     var docPath = Path.GetFullPath(Path.Combine(webRootPath, "/Compare/c.xls"));

     string name = Path.GetFileName(docPath);
     Response.AppendHeader("content-disposition", "attachment; filename=" + name);
     Response.ContentType = "Application/vnd.ms-excel";
     Response.TransmitFile(docPath);
     Response.End();
 } 
```

因此，当用户打开下载的文件时，会发出警告，因为它不在同一个扩展名中。为什么会出现这种情况..??

我尝试使用各个站点提供的解决方案，但无济于事...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:46:25.047

尝试更改`Response.ContentType = "application/vnd.xls";`为`Response.ContentType = "application/vnd.ms-excel"`

还

微软文档说：

“当前的设计不允许您在 Excel 中打开网站中的 HTML 内容......因此，返回 HTML 并将 MIME 类型设置为 XLS 之类的 ASP 页面试图强制 HTML 在 Excel 中而不是在 Web 中打开浏览器（如预期）将始终收到安全警报...如果您使用 HTML MIME 类型，则 Web 浏览器将打开内容而不是 Excel。因此，由于缺少特殊的特定于 Excel 的 HTML/MHTML 的 MIME 类型。如果您同时控制需要访问它的 Web 服务器和客户端桌面，则可以添加自己的 MIME 类型，但最好的选择是使用不同的文件格式或提醒您的警告的用户并告诉他们在对话框中选择是。”

也访问这个网站：[http ://devblog.grinn.net/2008/06/file-you-are-trying-to-open-is-in.html](http://devblog.grinn.net/2008/06/file-you-are-trying-to-open-is-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:42:06.753

尝试使用

```
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" 
```

# ruby-on-rails - 使用 Squeel 时参数数量错误

> ID：13737496
> 
> 赞同：3
> 
> 时间：2012-12-06T05:28:40.013
> 
> 标签：ruby-on-rails, ruby, squeel

首先，我在 Rails 控制台中进行简单的 squeel 测试。

```
User.where{name == "abc"} 
```

新建 Ruby 项目没有问题

```
User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."name" = 'abc' => [] 
```

但是，当我将其应用于现有项目时，它会给我错误消息：

```
1.9.3p125 :001 > User.where{name == "abc"}
ArgumentError: wrong number of arguments (0 for 1)  from /Users/xxx/.rvm/gems/ruby-1.9.3-p125/gems/parse_resource-1.7.3/lib/parse_resource/query.rb:11:in `where'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p125/gems/parse_resource-1.7.3/lib/parse_resource/base.rb:243:in `where'
    from (irb):1
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我发现的最相关的问题是[Squeel issue #193](https://github.com/ernie/squeel/issues/193)。

它说 Squeel 没有加载。但是，就我而言，new-created 可以在同一台机器上实现。

无论如何，我尝试按照它的说明更改 active_record.rb，但是对于我现有的项目，问题仍然存在。

我正在使用 Ruby-1.9.3-p125、Rails v3.2.6 和 Squeel 1.0.14。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T06:03:55.793

好吧，您可以使用以下语句，而不是使用 where 子句：

```
User.filter(:name => 'abc').first 
```

这可能适用于您的情况

# text - 修改 Sublime text 2 中的自动完成功能

> ID：13737500
> 
> 赞同：5
> 
> 时间：2012-12-06T05:29:10.157
> 
> 标签：text, autocomplete, editor, sublimetext2

我写了很多散文，也转录采访。我在 sublime text 2 中遇到了自动完成功能，它的速度非常快，但单词建议是基于当前文件的。

我想要的只是编写/使用一个插件，以便在我打字时可以使用整个英语词典，而不仅仅是当前文件。该[文档](http://docs.sublimetext.info/en/latest/extensibility/completions.html)的优先级为

1.  片段
2.  API 注入完成
3.  .sublime-completion 文件
4.  缓冲区中的单词

那么我可以修改 .sublime-completions 文件来实现这一点。会不会因为字数太多而耽误很多时间？还是文本编辑器会降低我的系统性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T00:44:13.770

你可以试试这个插件：

[https://github.com/Zinggi/DictionaryAutoComplete](https://github.com/Zinggi/DictionaryAutoComplete)

它使用位于“/Data/Packages/Language - English/”下的 ST2 内部英语词典。因此，您不必查找自定义词典。

# c++ - 重量总和约为 10^9 的背包

> ID：13737507
> 
> 赞同：6
> 
> 时间：2012-12-06T05:30:04.757
> 
> 标签：c++, c, algorithm

几周前我在编程比赛中遇到了一个问题，这个问题可以简化为背包 0/1 问题。

但我不能这样做，因为最大权重约为 10^9，所以在 c++ 中我不能使用数组。虽然项目数量约为 10^5。

我能想到的解决这个问题的一种方法是使用 STL 映射，但不知道如何做到这一点。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:21:21.260

如果你只需要一个巨大的数组，为什么不把它分解成更小的数组呢？

```
class Huge_array{
    public:
    Huge_array(size_t max_size):
        max_size(max_size),
        store(max_size/v_size, vector<int>(v_size))
        {}

    int& operator[](size_t index)
    {  
        assert(0<=index && index<max_size); 
        return store[index/v_size][index%v_size]; 
    }

    private:
    size_t max_size;
    const int v_size=100000;
    vector<vector<int> > store;
}; 
```

我希望它没有任何错别字。
用法：

```
Huge_array my_array((size_t)10e9);
my_array[30000000]=10; // and so on upto size_t(10e9) - 1 
```

如果您需要更大的价值值，您可以`vector<int>`在.`vector<long>``vector<double>``Huge_array`

# javascript - 使用 moment.js 转换日期格式

> ID：13737509
> 
> 赞同：9
> 
> 时间：2012-12-06T05:30:15.660
> 
> 标签：javascript, jquery, momentjs

我想使用 Javascripy/jQuery 转换以下日期。我的研究似乎指向了 moment.js，它看起来很棒，但我似乎无法确定它。（JS 半菜鸟）

```
<div class="date">01-06-2012</div> convert to display January 6
<div class="date">05-14-2012</div> convert to display May 14
<div class="date">06-16-2012</div> to display June 16 
```

如果日期在过去 24 小时内，如果相同的逻辑可以对 div 应用一个额外的类，那就太棒了，所以我可以对它们进行一些不同的样式设置。也许让过去 24 小时内的日期添加一个类，而不是显示“新”的日期。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-06T05:53:21.457

```
$(function () {
  $('.date').each(function (index, dateElem) {
    var $dateElem = $(dateElem);
    var formatted = moment($dateElem.text(), 'MM-DD-YYYY').format('MMMM D');
    $dateElem.text(formatted);
   })
 });​ 
```

[http://jsfiddle.net/x2fDP/](http://jsfiddle.net/x2fDP/)

对于第 2 部分，尝试使用`new Date().getTime() - textMoment.valueOf()`（其中 textMoment 是从 div 的文本创建的解析时刻实例）来获取该日期之前的毫秒数，如果该数字低于您的阈值，请使用`$dateElem.addClass('new');`

# java - 在没有保存选项的情况下在网页中显示内容

> ID：13737512
> 
> 赞同：0
> 
> 时间：2012-12-06T05:30:35.783
> 
> 标签：java, javascript, html, jsp

内容是文本/图像格式，更具体地说是幻灯片，当最终用户单击链接时，它必须显示在网页中。内容假定在下一个选项卡或同一选项卡上打开。当用户单击链接时。主要应该没有保存选项。

我尝试过使用 PDF，但无法限制用户保存和打印。在使用 Frames 尝试使用 HTML 时，它不符合浏览器兼容性。

非常感谢您的建议和想法...

# eclipse - 仅对选择性 URL 使用 Dispatcher servlet 进行拦截器调用

> ID：13737514
> 
> 赞同：1
> 
> 时间：2012-12-06T05:30:47.993
> 
> 标签：eclipse, spring-mvc

我有一个具有两种方法的控制器类。假设“http://localhost:8080/SpringAOP1/welcome/two/aa”，一旦 URL 被击中，第一种类型必须执行其主体。这里 SpringAOP1 是我的项目，welcome 是控制器类名（带有注释设置），二是带有参数“aa”的函数名。第二种类型的函数需要由拦截器预先处理。因此，当 URL 被命中假设“http://localhost:8080/SpringAOP1/welcome/intercep/six/aa”时，必须调用拦截器。在这里，我将“intercep”参数与所有需要拦截器调用的第二类函数一起传递。

控制器类：-

* * *

```
@Controlle
 @RequestMapping("/welcome")
public class HelloController {
@RequestMapping(method = RequestMethod.GET)
public String printWelcome1(ModelMap model) {

    model.addAttribute("message", "Spring 3 MVC Hello World 1");
    return "hello";

}
@RequestMapping( value="two/{name}", method = RequestMethod.GET)

public String printWelcome2(@PathVariable String name,ModelMap model) {

    model.addAttribute("message", "Spring 3 MVC Hello World 2");
    model.addAttribute("value", name);
    return "hello";

}

@RequestMapping( value="intercep/six/{name}", method = RequestMethod.GET)

public String printWelcome6(@PathVariable String name,ModelMap model) {

    model.addAttribute("message", "Spring 3 MVC Hello World 6");
    model.addAttribute("value", name);
    return "hello";

} 
```

## `

## 调度程序 servlet

```
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="com.mkyong.common.controller" />

<bean name="HijackBeforeMethod" class="com.mkyong.common.controller.HijackBeforeMethod"/>
 <mvc:interceptors>
<mvc:interceptor>
    <mvc:mapping path="/intercep/*"/>
    <bean id="HijackBeforeMethod" class="com.mkyong.common.controller.HijackBeforeMethod" />
</mvc:interceptor>
 </mvc:interceptors>

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="order" value="0" />
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

* * *

HijackBefore 方法

## （这是被调用的拦截器类）

```
 public class HijackBeforeMethod extends HandlerInterceptorAdapter {
public Boolean comp(String u,String p)
{
    Map mMap = new HashMap();
    mMap.put("aa", "bb");
    mMap.put("mm", "nn");
    mMap.put("xx", "yy");

    Iterator iter = mMap.entrySet().iterator();
    String k,v;
    Boolean flg=false;
    while (iter.hasNext())
    {
        Map.Entry mEntry = (Map.Entry) iter.next();
        if(mEntry.getKey().equals(u) && mEntry.getValue().equals(p))
          flg=true;
    }
    return flg;
}

public boolean preHandle(HttpServletRequest httpServletRequest,
                         HttpServletResponse httpServletResponse, Object o) throws Exception {
    String u="aa";
    String p="bb";

    //System.out.println(" The username is--> "+u+"  and pass is --> "+p);
    Boolean ch=comp(u,p);
            if(ch)
              {
                if(httpServletRequest.getMethod().equalsIgnoreCase("get")){
                    String uri = httpServletRequest.getRequestURI();
                    System.out.println("The method is GET :: "+ uri);
                }

            else
              {
                return false;   
               }

    }

} 
```

请帮我找到这个。我有很大的麻烦..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:30:46.727

您可以使用 WebRequestInterceptor 接口代替 HandlerInterceptorAdapter。以下代码段对我来说工作正常。

```
public class FlashInterceptor implements WebRequestInterceptor {
    private Flash flash;

    @Autowired
    public void setFlash(Flash flash) {
            this.flash = flash;
    }

    @Override
    public void preHandle(WebRequest request) throws Exception {
            final Map<String, Object> messages = flash.getMessages();
            if (messages.containsKey("flash_info")) {
                    request.setAttribute("flash_info", messages.get("flash_info"),
                                    RequestAttributes.SCOPE_REQUEST);
                    request.setAttribute("flash_info_params",
                                    messages.get("flash_info_params"),
                                    RequestAttributes.SCOPE_REQUEST);
            }
            if (messages.containsKey("flash_error")) {
                    request.setAttribute("flash_error", messages.get("flash_error"),
                                    RequestAttributes.SCOPE_REQUEST);
                    request.setAttribute("flash_error_params",
                                    messages.get("flash_error_params"),
                                    RequestAttributes.SCOPE_REQUEST);
            }
            if (messages.containsKey("flash_success")) {
                    request.setAttribute("flash_success",
                                    messages.get("flash_success"),
                                    RequestAttributes.SCOPE_REQUEST);
                    request.setAttribute("flash_success_params",
                                    messages.get("flash_success_params"),
                                    RequestAttributes.SCOPE_REQUEST);
            }
            flash.reset();
    }

    @Override
    public void postHandle(WebRequest request, ModelMap model) throws Exception {

    }

    @Override
    public void afterCompletion(WebRequest request, Exception ex)
                    throws Exception {
    }

} 
```

# javascript - 如何更改样式并测试每个页面重新加载

> ID：13737522
> 
> 赞同：-2
> 
> 时间：2012-12-06T05:31:48.713
> 
> 标签：javascript, jquery, html, css

对于每次重新加载，我想更改文本，并且我想更改背景颜色我该怎么做？我也可以使用 PHP。我不需要这个编码 PHP 的东西以下是我的代码的骨架

**CSS**

```
.rotate
{
    background-color:#9C6;
} 
```

**Javascript**

```
$(document).ready(function(){
    $('#myTxt').html("hai");
}); 
```

**html**

```
<div class="rotate" style="border: 1px red solid; height:100px; width:200px;">
   <span id="myTxt"></span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:38:00.687

在 HTML 文件中使用 PHP：

```
<?php $colors = array("#f00", "#0f0", "#00f", "#c0c0c0", "#abcdef"); ?>
  <style>
    .rotate
    {
        background-color:<?php echo $colors[array_rand($colors)] ?>;
    }
    </style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:39:54.467

取一个`array`颜色和文字内容来动态改变里面的内容和文字`div`

```
String colors = ["red","green","blue",....up to 11];
String text = ["Murali","Bobby","Candy"....up to 11];

var x = Math.floor((Math.random()*10)+1);
$('#myTxt').html(text[x]);
$(".rotate").css("backgroundColor",colors[x]); 
```

# wordpress - 如何检测 WordPress 中显示的当前模板？

> ID：13737534
> 
> 赞同：1
> 
> 时间：2012-12-06T05:33:13.807
> 
> 标签：wordpress, wordpress-theming

我正在开发一个 21 岁主题的儿童主题。我需要在博客页面中进行一些自定义。我想在`id = "primary"`. 如何发现哪个模板正在呈现页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:14:20.863

在您的子主题的`functions.php`.
如果您没有，请创建一个空的并仅使用[php 开始标记](https://stackoverflow.com/q/3219383/1287812)( `<?php`)。

`the_content`这将在当前显示的主题和模板中打印。

### 看到主站点页面：子主题**有**一个`index.php`

> ![子主题 index.php](../Images/7eded30c5201ea89c7e78c5a46e645da.png)

### 看到一个帖子：child theme **don't have** a`single.php`

> ![父主题single.php](../Images/9d7e9947b96aa4d1b537f054f241fed8.png)

使用过滤器向内容添加调试：检查评论

```
add_filter( 'the_content', 'so_13737534_print_template', 20 );

function so_13737534_print_template( $content ) 
{
    // $template value equals to:
    // /public_html/wp-content/themes/theme-name/template-name.php
    global $template;

    // Return normal content if seeing the backend 
    // or the user is not administrator
    if( is_admin() || !current_user_can( 'delete_plugins' ) )
        return $content;

    // Split the value and build the output html
    $split_path = explode( '/', $template );
    $total = count( $split_path ) - 1;
    $theme_and_template = $split_path[$total-1] . '/' . $split_path[$total];
    $print = '<strong style="font-size:1em;background-color:#FFFDBC;padding:8px">Current = ' . $theme_and_template . '</strong>';

    // Add our output before the_content
    $content = $print . $content;
    return $content;
} 
```

* * *

### 同样可以在 中打印为 Html 注释`<head>`，使用：

```
add_action( 'wp_head', 'so_13737534_print_template_in_head', 999 );

function so_13737534_print_template_in_head() 
{
    global $template;
    echo '
    <!--

    TEMPLATE = ' . $template . '

    -->
    ';
} 
```

# grails - Grails 服务->java.lang.NullPointerException：无法在空对象上调用方法 serviceMethod()

> ID：13737536
> 
> 赞同：0
> 
> 时间：2012-12-06T05:33:19.970
> 
> 标签：grails

我在 src/groovy 有课程。我想在这里使用我的服务。但发生错误“没有绑定到线程的休眠会话，并且配置不允许在此处创建非事务性会话”。我尝试调试但找不到。你能帮我看看我的错误是什么吗？

```
class ListenerSession implements HttpSessionListener  {
    def transactionService = new TransactionService ()
    public ListenerSession() {
    }
    public void sessionCreated(HttpSessionEvent sessionEvent){
    }
    public void sessionDestroyed(HttpSessionEvent sessionEvent) {
        HttpSession session = sessionEvent.getSession();
        User user=session["user"]
        if(user){
            try{
                java.util.Date date = session['loginDate']
                transactionService.updateUserLastLogin(user,date)
-----}catch (Exception e) {
                println e
    } 
```

服务代码是：

```
def updateUserLastLogin(User user,Date date){
        try{
            User.withTransaction{
                println "121212"
                user.lastLogin=date
                user.loginDuration=new Date().time - user?.lastLogin?.time
                def x=user.save()
            }
        }catch (Exception e) {
            println e
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:54:52.007

不要使用`new`. 如果他们使用几乎任何 Grails 框架，那么该部分将无法工作 - 在这种情况下就像 GORM 会话一样。

这正是您的问题： http: [//grails.1312388.n4.nabble.com/Injecting-Grails-service-into-HttpSessionListener-can-it-be-done-td1379074.html](http://grails.1312388.n4.nabble.com/Injecting-Grails-service-into-HttpSessionListener-can-it-be-done-td1379074.html)

用伯特的回答：

```
ApplicationContext ctx = (ApplicationContext)ServletContextHolder.
  getServletContext().getAttribute(GrailsApplicationAttributes.APPLICATION_CONTEXT)
transactionService = (TransactionService) ctx.getBean("transactionService") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:56:55.070

Grails 不会在 src/groovy 级别为您注入您的服务，并且仅声明一个新实例`TransactionService`不会为您提供所有好处（因此您的错误）。你需要让你的实例形成这样的spring上下文......

```
 import org.codehaus.groovy.grails.web.context.ServletContextHolder as SCH
  import org.codehaus.groovy.grails.web.servlet.GrailsApplicationAttributes as GA

  class ListenerSession implements HttpSessionListener  {

        public ListenerSession() {
        }
        public void sessionCreated(HttpSessionEvent sessionEvent){
        }
        public void sessionDestroyed(HttpSessionEvent sessionEvent) {
            HttpSession session = sessionEvent.getSession();
            User user=session["user"]
            if(user){
                try{
                    java.util.Date date = session['loginDate']
                    def ctx = SCH.servletContext.getAttribute(GA.APPLICATION_CONTEXT)
                    def transactionService = ctx.transactionService
                    transactionService.updateUserLastLogin(user,date)
                 }catch (Exception e) {
                    println e
                 }
             }
       }
 } 
```

# javascript - 主干.js：从集合中删除后保留一个元素

> ID：13737538
> 
> 赞同：0
> 
> 时间：2012-12-06T05:33:42.327
> 
> 标签：javascript, collections, backbone.js, models

我正在尝试根据 UI 中的拖放事件在两个集合之间移动模型（从一个“框”到另一个）。现在，当我从其原始集合中删除该元素时，它显然不复存在，因为它也没有出现在新集合中（如果我注释掉删除，则其他集合中的外观有效）。

我的直觉是，这是因为每个模型都对应于一个服务器端集合，并且通常从集合中删除某些东西甚至会返回到服务器来杀死它。然而，在这里，我希望我的模型更加自由浮动。那可能吗？我是否错误地使用了 Backbone？

更新

好的，这是我的代码的摘录。如有必要，我可以创建一个小提琴，但也许这有助于突出正在发生的事情：

```
 drop: function(event, ui) {
        var item = ui.draggable.data("model");
        newcollection.add(item);
        console.log(item);
        oldcollection.remove(item);
        console.log(item);
    } 
```

现在，控制台输出如下所示：

```
d {attributes: Object, _escapedAttributes: Object, cid: "c83", changed: Object, _silent: Object…}

d {_previousAttributes: Object, _pending: Object, _escapedAttributes: Object, changed: Object, _silent: Object…} 
```

显然，模型本身已经发生了变化，而除了从集合中删除之外，什么都没有发生。我现在看到它实际上并没有“不复存在”，但仍然 - ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:43:17.787

从集合中删除模型不会从服务器中删除该模型。就是`model.destroy()`这样。[这里是 的来源`Collection.remove`](http://documentcloud.github.com/backbone/docs/backbone.html#section-86)。当对骨干存有疑问时，请直奔源头。它很小，很容易阅读和理解。

您的代码中的其他地方可能存在错误，但我们需要代码示例或 jsfiddle 来帮助您找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:16:01.523

Well it turns out I need to change the order of add and remove; otherwise the removal of the UI corresponding element is triggered both for the old and the new one... thanks for the comments though, helped nudge me into the right direction.

# php - 在 Ubuntu Linux 12 中启用 Excel PHP PDO 驱动程序

> ID：13737540
> 
> 赞同：2
> 
> 时间：2012-12-06T05:33:50.033
> 
> 标签：php, ubuntu, pdo

如果我的 Web 服务器在 Windows 上，这行代码`new PDO (" odbc: Driver = {Microsoft Excel Driver (*. Xls, *. Xlsx, *. Xlsm, *. Xlsb)}; DBQ =`可以正常工作，但 Ubuntu 不是这样，我找不到如何在 PHP 5 中安装 Excel 的 PDO 驱动程序。

感谢您花时间回答这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T16:28:21.837

PHP 可以操作 COM 对象。

只有在 Windows 平台中，您才能执行以下操作：

```
<?php
$word = new COM("C:\docs\word.doc");
?> 
```

如果没有可用的正在运行的实例，这将创建一个新实例，或者如果可用，它将返回正在运行的实例的句柄。这是因为 Windows 具有使用 COM 资源的 ODBC 驱动程序。

在您的情况下，请尝试在 Linux 中使用[http://www.unixodbc.org/](http://www.unixodbc.org/)，此项目支持 Excel 驱动程序[http://www.easysoft.com](http://www.easysoft.com)。

![RMS ODBC 驱动程序](../Images/bf462fd48c264e5c4d7a13cd93b56009.png)

坏消息是 EasySoft 的 RMS 驱动程序不是免费的 :(

# javascript - 使用 setTimeout 函数时，在 onkeyup 上获取值 undefine

> ID：13737544
> 
> 赞同：1
> 
> 时间：2012-12-06T05:34:23.540
> 
> 标签：javascript

我在文本框的 onkeyup 事件上有调用函数，它使用 ajax 传递数据。下面是我在 .js 文件中的函数的示例代码。

```
var timeout;
function testfont(id,image) 
{
    alert('image');//when alert here it shows value
    clearTimeout(timeout);
    timeout = setTimeout( function()
    {
        if(image.match(/_small/g))
        {
            var image = image.replace('_small','');
        } else {
            var image = image;
        }
        alert('image'); //when alert here it show undefined
    }, 500);
} 
```

但问题是我在 setTimeout 函数中得到了未定义的图像值。它在不使用 setTimeout 的情况下完美工作，但我需要 setTimeout 函数在一段时间后触发事件。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:35:59.327

你正在为你的每一个条件制造变量。

```
function testfont(id,image) 
{
    clearTimeout(timeout);
    timeout = setTimeout( function() {
    if(image.match(/_small/g)){
    image = image.replace('_small','');
    }
    else{
        image = image;
    }
    alert(image);//when alert here it show undefined
}, 500);
} 
```

# css - 防止 DIVS 移动

> ID：13737546
> 
> 赞同：0
> 
> 时间：2012-12-06T05:34:41.290
> 
> 标签：css, html, overflow

我试图弄清楚当窗口调整大小较小时如何防止 DIV 内的标签向下移动。

我希望链接始终保持正确的大小，100% 的窗口。

我希望标签都保持水平并且在浏览器窗口较小时不移动。

这是我的链接：http: [//jsfiddle.net/B9WBF/](http://jsfiddle.net/B9WBF/)

```
<div class="topnav">

<a href="contact.htm">LINK 1</a>
<a href="contact.htm">LINK 2</a>
<a href="contact.htm">LINK 3</a>
<a href="contact.htm">LINK 4</a>
<a href="contact.htm">LINK 5</a>

<div id="logo" href="home.htm"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:02:53.710

如果我理解正确，那么即使用户调整窗口大小，您似乎也希望将`parent div`和保持`child div`在一行中。如果是这样，那么不要给子 div 填充，而是以百分比形式给出宽度值。

**CSS**

```
/* Below are the edited values in your code */
#logo {
    width: 20%;  /* width: 317px; */
}

.topnav a {
    width: 16%;  /* Calculation should be correct */
   /*padding-left: 22px;
   padding-right:22px;*/
} 
```

**[工作小提琴](http://jsbin.com/olezig/1/edit)**

# c# - 根据c#中自定义的Error Code throwing Exception显示错误信息

> ID：13737548
> 
> 赞同：0
> 
> 时间：2012-12-06T05:34:53.323
> 
> 标签：c#

我想捕获异常并根据发生的异常定义自定义错误代码并显示错误消息

我想构建一个 xml 文件来区分程序中的异常，然后再进行异常翻译。

例如：

```
<EXCEPTIONS>
     <EXCEPTION tip="MyException">
          <ERROR ID="1">
             <DESCRIPTION>The server is not operational</DESCRIPTION>
         </ERROR>
     </EXCEPTION >
</EXCEPTIONS> 
```

# css - css 属性中的预期标识符

> ID：13737560
> 
> 赞同：0
> 
> 时间：2012-12-06T05:36:23.150
> 
> 标签：css

有人可以告诉我我在这里做错了什么吗？我在后台属性中收到预期的标识符错误。

```
$("#dialogTitleSpan",parent.document).css({
   "Background":"url(/"../Images/Test.gif/") no-repeat 4px 4px",
   "line-height":"170%",
   "padding-left":"28px !important",   
   "color":"orange",
   "padding-top":"30px"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:38:13.253

颜色编码说明了一切。

首先，您`/`在报价前有一个。其次，您有未转义的引号。

尝试改用单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:42:51.610

你想找到 iframe 的父级吗？如果是这样，您需要确保 DOM 元素 #dialogTitleSpan 已加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:41:32.137

试试这个 CSS-

```
 $("#dialogTitleSpan",parent.document).css({
            "Background":"url('../Images/Test.gif/') no-repeat 4px 4px",
            "line-height":"170%",
            "padding-left":"28px !important",   
            "color":"orange",
            "padding-top":"30px"
  }); 
```

# android - 放置在滚动视图中时如何从editText中关闭键盘？

> ID：13737561
> 
> 赞同：3
> 
> 时间：2012-12-06T05:36:42.170
> 
> 标签：android

我创建了一个登录表单，我必须在其中编辑文本和按钮，它们位于滚动视图中。当我在编辑文本之外触摸时，我想关闭键盘。我已经实现了一个滚动视图 onTouch Listener 来关闭键盘，但我想要的是滚动和关闭键盘。可能吗？下面是代码：

```
ScrollView sv=(ScrollView) findViewById(R.id.scroll);
sv.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        InputMethodManager imm = (InputMethodManager) getSystemService( INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:40:54.963

你正在消费的触摸事件`ScrollView`您正在通过返回

```
return true; 
```

刚回来`false`

它会将触摸事件提供给父级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-23T00:32:51.633

## 描述

我遇到了同样的问题，并通过以下更改对其进行了修复。他们的诀窍是让父滚动视图在没有其他子视图需要时抓住焦点。为此，滚动视图必须是可点击和可聚焦的。这比使用`onTouchEvent`或更好，`onInterceptTouchEvent`因为 ScrollView 需要利用那些相当复杂的滚动行为。

## 代码更改

首先，在您的布局文件中将这些属性添加到滚动视图：

```
 android:focusable="true"
    android:focusableInTouchMode="true"
    android:clickable="true" 
```

接下来，在您的代码中将这些侦听器添加到您的滚动视图中：

```
 scrollableContent.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus) {
                onClickAway();
            }
        }
    });

    //this second listener is probably unnecessary but I put it in just in case there are weird edge cases where the scrollView is clicked but failed to gain focus
    scrollableContent.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            onClickAway();
        }
    }); 
```

最后，当用户点击离开表单中的字段时，实现您想要的任何行为：

```
/**
 * Invoked when something is clicked that is not otherwise listening for click events, like when
 * the user clicks outside of an EditText view.
 */
protected void onClickAway() {
    //hide soft keyboard
    InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(getWindowToken(), 0);
} 
```

## 结果

随着这些变化的到位，滚动视图将在任何时候获得焦点，并且作为响应，它会隐藏键盘。请注意，如果单击任何其他需要键盘的字段，它们将优先，并且键盘将保持不变（即打开）。此外，您可以将 XML 属性和侦听器添加到 scrollView 的子 ViewGroup 中，虽然我还没有测试过，但我相信这也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-28T14:45:15.910

在我的情况下，我能够在它滚动时隐藏键盘并且它在编辑文本之外单击。也许这段代码可以提供帮助。科特林：

```
nestedScrollView.setOnTouchListener(object : View.OnTouchListener{
       val inputManager =
           activity!!.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager
       override fun onTouch(v: View?, event: MotionEvent?): Boolean {
           if (inputManager.isAcceptingText)
               inputManager.hideSoftInputFromWindow(view.windowToken, 0)
           return false
       }
   }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-29T13:40:33.537

嗨，我试过这个问题，这适用于我的情况

```
scrollView.setOnTouchListener(new View.OnTouchListener(){
@Override
public boolean onTouch(View v, MotionEvent event){if (event != null && event.getAction() == MotionEvent.ACTION_MOVE)
    {
        InputMethodManager imm = ((InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE));
        boolean isKeyboardUp = imm.isAcceptingText();

        if (isKeyboardUp)
        {
            imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
        }
    }
    return false;}
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-03T20:59:01.500

For API23+

```
scrollView.setOnScrollChangeListener { v, _, _, _, _ ->
    v?.hideSoftKeyboard()
} 
```

```
fun View.hideSoftKeyboard() {
    (context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager).apply {
        hideSoftInputFromWindow(this@hideSoftKeyboard.windowToken, 0)
    }
} 
```

# python - 在 App Engine 上对数据库中的所有浮点实体求和

> ID：13737562
> 
> 赞同：1
> 
> 时间：2012-12-06T05:36:45.873
> 
> 标签：python, google-app-engine

我只是想知道这样做的正确方法是什么。我有一个包含浮点数的数据库，我只是想获取数据库中所有浮点数的总和。

例子：

```
class Sum_DB(db.Model):
    name_of_profile = db.StringProperty(required = True)
    float_value= db.FloatProperty()

sum_me_up  = db.GqlQuery("select * from Sum_DB WHERE name_of_profile =:1", profile_id) 
```

如果有人能在这里帮我一把，我将不胜感激。我尝试过使用 fetch() 但无法获得总和或值列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:58:29.517

Sorry if I'm misunderstanding, but it sounds like you want to retrieve a group of entities from the datastore and sum their respective `float_value` properties. If that is what you want to do, you will need to set up a query that pulls all of the entities in question (here we will just use `Sum_DB.all()` to pull all of them) and then iterate through the returned list of objects, summing their `float_value` property. For example:

```
class Sum_DB(db.Model):
    name_of_profile = db.StringProperty(required = True)
    float_value= db.FloatProperty()

class MainHandler(webapp2.RequestHandler):
  def get(self, *args, **kwargs):
    r = Sum_DB(name_of_profile='test1', float_value=float(1.2359))
    s = Sum_DB(name_of_profile='test2', float_value=float(2.2355))
    t = Sum_DB(name_of_profile='test3', float_value=float(4.2185))

    r.put()
    s.put()
    t.put()

    # Using the Query class
    query = Sum_DB.all()

    # You can now iterate over that 'query', with each element
    # representing an entity from your datastore. Each entity
    # will have the properties you defined in Sum_DB, so you 
    # can access them by name.
    sum_me_up = sum(result.float_value for result in query)

    # Or using GQL - the concept/result is the same
    query2 = db.GqlQuery('SELECT * from Sum_DB')
    sum_me_up2 = sum(result.float_value for result in query2)

    self.response.out.write('Query: {0} | GQL: {1}'.format(sum_me_up,
                                                           sum_me_up2))

app = webapp2.WSGIApplication([
                   ('/', MainHandler),
                   ],
                   debug=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:10:13.063

The mapreduce pipeline makes it easy to sum across arbitrarily large entities: [https://developers.google.com/appengine/docs/python/dataprocessing/overview](https://developers.google.com/appengine/docs/python/dataprocessing/overview)

You just write a mapper to sum what you want.

# actionscript-3 - 带跟随相机的赛车游戏

> ID：13737563
> 
> 赞同：1
> 
> 时间：2012-12-06T05:36:47.007
> 
> 标签：actionscript-3, flash, rotation, racing

我正在尝试弄清楚如何在 Flash 中创建赛车游戏（就像网络上已经存在的许多教程一样）。

然而，与其保持关卡静止并移动汽车 - 是否可以让玩家的汽车在屏幕中央保持静止并围绕玩家旋转关卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:40:12.590

这是一个可运行的演示，应该可以满足您的要求；使用上、左、下、右键控制汽车。

重要的东西在底部附近的最后 5 或 6 行。

```
package {
import flash.display.Sprite;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

public class Untitled2 extends Sprite{
    private var level:Sprite = new Sprite();
    private var car:Sprite = new Sprite();
    private var carVelocityX:Number = 0;
    private var carVelocityY:Number = 0;
    private var keyLeft:Boolean;
    private var keyRight:Boolean;
    private var keyUp:Boolean;
    private var keyDown:Boolean;

    public function Untitled2(){
        level.graphics.lineStyle(4, 0xFF0000);
        level.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);

        car.graphics.beginFill(0x000000);
        car.graphics.moveTo( -5, -5);
        car.graphics.lineTo( 5, -5);
        car.graphics.lineTo( 8, 0);
        car.graphics.lineTo( 5, 5);
        car.graphics.lineTo( -5, 5);

        addChild(level);
        level.addChild(car);
        car.x = 100;
        car.y = 100;

        addEventListener(Event.ENTER_FRAME, onEnterFrame, false, 0, true);
        stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown, false, 0, true);
        stage.addEventListener(KeyboardEvent.KEY_UP, onKeyUp, false, 0, true);
    }

    private function onKeyUp(event:KeyboardEvent):void{
        if(event.keyCode == Keyboard.LEFT)
            keyLeft = false;
        else if(event.keyCode == Keyboard.RIGHT)
            keyRight = false;
        else if(event.keyCode == Keyboard.UP)
            keyUp = false;
        else if(event.keyCode == Keyboard.DOWN)
            keyDown = false;
    }

    private function onKeyDown(event:KeyboardEvent):void{
        if(event.keyCode == Keyboard.LEFT)
            keyLeft = true;
        else if(event.keyCode == Keyboard.RIGHT)
            keyRight = true;
        else if(event.keyCode == Keyboard.UP)
            keyUp = true;
        else if(event.keyCode == Keyboard.DOWN)
            keyDown = true;
    }

    private function onEnterFrame(event:Event):void{
        // Other stuff for controlling the car
        carVelocityX *= 0.98;
        carVelocityY *= 0.98;
        car.x += carVelocityX;
        car.y += carVelocityY;

        if(keyLeft) car.rotation -= 7;
        if(keyRight) car.rotation += 7;

        var carRotationRadians:Number = car.rotation / 180 * Math.PI;

        if(keyUp){
            var speed:Number = Math.sqrt(carVelocityX * carVelocityX + carVelocityY * carVelocityY);
            speed += 0.1;
            carVelocityX = Math.cos(carRotationRadians) * speed;
            carVelocityY = Math.sin(carRotationRadians) * speed;
        }

        if(keyDown){
            carVelocityX *= 0.8;
            carVelocityY *= 0.8;
        }

        // Add 90 degrees because we want the car pointing up
        carRotationRadians += Math.PI * 0.5
        // Rotate the cars position to get its stage coordinates
        var carX:Number = Math.cos(-carRotationRadians) * car.x - Math.sin(-carRotationRadians) * car.y;
        var carY:Number = Math.sin(-carRotationRadians) * car.x + Math.cos(-carRotationRadians) * car.y;
        // Position and rotate the level
        level.rotation = -car.rotation - 90; // Add 90 degrees because we want the car pointing up
        level.x = stage.stageWidth  * 0.5 - carX;
        level.y = stage.stageHeight * 0.5 - carY;
    }

}// End class Untitled2

}// End package 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:43:25.670

是的。

您要做的是将汽车与其他所有东西（您想要移动/旋转的所有东西）放在不同的剪辑上，然后每当您要变换（移动/旋转）汽车时，您将逆向应​​用到所有东西别的。

我想象这是自上而下的，因此例如汽车通常会在 y 轴上移动的每个像素，您现在将 y 轴上的其他所有像素移动相同的量。

同样，对于您通常将汽车旋转的每个正度数，您现在将其他所有部件旋转相同度数的负数。

你必须担心的另一件事是创造世界的边缘，因为在你可以使用屏幕边缘之前，现在你可以永远走下去。

# android - Android ADT 在 Windows XP-64 位中未检测到设备

> ID：13737567
> 
> 赞同：2
> 
> 时间：2012-12-06T05:37:00.293
> 
> 标签：android, eclipse, adt

我正在尝试在 android 中安装和开发一个应用程序，为此我刚刚下载了最新的“adt-bundle-windows-x86_64”并解压缩它。

Eclipse 和一切都在工作，但它没有识别出 android 设备（三星 Galaxy SL）。

我下载了 32 位版本并在那台机器上测试了相同的设备。它工作正常。

我用谷歌搜索了很多，做了很多事情，比如启用 USB 调试等等。安装了凯斯，也更新了凯斯。

有人请帮忙

# ios - 在点击主页按钮时在类中调用哪个委托函数

> ID：13737570
> 
> 赞同：-1
> 
> 时间：2012-12-06T05:37:16.653
> 
> 标签：ios, delegates, onresume, home-button

我有一个弹出窗口，当用户离开课堂时必须隐藏它。在点击主页按钮时，不会发生。

```
- (void)applicationDidBecomeActive:(UIApplication *)application

- (void)applicationDidEnterBackground:(UIApplication *)application 
```

除了上述函数之外，还有任何其他委托函数可以在同一个类中调用（不是 app-delegate 类）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:42:36.393

只有`UIApplicationDelegate`定义了那些方法。如果您希望任何其他类处理这些事件，则需要让该类注册相应的通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(backgrounding) name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

并且不要忘记移除观察者。

然后你需要这个方法：

```
- (void)backgrounding {
    // App entered background
} 
```

# objective-c - Objective-C 2.0 的内存管理

> ID：13737571
> 
> 赞同：0
> 
> 时间：2012-12-06T05:37:27.077
> 
> 标签：objective-c, ios, macos, cocoa, foundation

我是Objective-C的初学者。我正在通过编写简单的命令行代码来研究 Objective-C 中的内存管理。

我的环境如下。

*   Mac OS X 山狮。
*   Xcode4.5

我在下面写了一个代码。

测试.m

```
1     #import <Foundation/Foundation.h>
2     #import <stdio.h>
3     
4     @interface A : NSObject
5     -(void)myprint;
6     @end
7     
8     @implementation A
9     -(void)dealloc {
10       printf("dealloc!!\n");
11       [super dealloc];
12    }
13    
14    -(void)myprint {
15       printf("myprint!!\n");
16    }
17    @end
18    
19    int main(void) {
20    
21       id obj1 = [[[NSObject alloc] init] autorelease];
22       id obj2 = [[A alloc] init];
23    
24       [obj2 release];
25       [obj2 myprint];
26       
27       return 0;
28    } 
```

我使用以下命令构建了此代码。（使用无 ARC 选项构建）

```
clang -g -Wall -o main test.m -fno-objc-arc -framework Foundation 
```

构建成功，没有任何警告消息。结果如下。

```
dealloc!!
myprint!! 
```

关于这个结果，我有两个问题。

第一个问题是关于自动释放方法。我认为这段代码会引发运行时错误，因为在没有 NSAutoreleasePool 实例的情况下调用 autorelease 方法。为什么这段代码不会引发运行时错误？

第二个问题是关于 dealloc 方法。obj2 在调用 dealloc 方法后响应 myprint 方法。为什么调用dealloc方法后obj2响应myprint方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:46:04.470

我相信自动创建一个自动释放池，但我可能错了。至于第二部分，我的理解是 release 告诉一个对象停止被保留，因此不能保证在发布消息之后的任何时候它仍然存在，但它可能会存在一段时间，直到该内存块用于别的东西。本质上你很幸运，如果你多次运行你的代码，你可能并不总是让 obj2 每次都响应 myprint。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:10:40.380

> 第一个问题是关于自动释放方法。我认为这段代码会引发运行时错误，因为在没有 NSAutoreleasePool 实例的情况下调用 autorelease 方法。为什么这段代码不会引发运行时错误？

没有自动释放池，因此，我有点惊讶您在运行时没有看到*no pool in place*警告。但是，这不会是错误，只是发生泄漏的运行时警告。

奇怪的。我看到了同样的行为。我会问的。

> 第二个问题是关于 dealloc 方法。obj2 在调用 dealloc 方法后响应 myprint 方法。为什么调用dealloc方法后obj2响应myprint方法？

未定义的行为。 `obj2`已被释放，但释放并不意味着内存已被清除。

如果您打开 Malloc Scribble（在释放时在内存上涂鸦），您将看到预期的崩溃：

```
env MallocScribble=1 ./main
dealloc!!
Segmentation fault: 11 
```

更好的是，如果您打开僵尸检测：

```
env NSZombieEnabled=YES ./main
dealloc!!
2012-12-06 08:10:14.580 main[80114:f07] *** -[A myprint]: message sent to deallocated instance 0x7f9b7ac09dd0
Trace/BPT trap: 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:48:41.660

我也试过了，你可以看到发生了什么：

如您所见，没有自动释放池...泄漏显示在调试器中。

[![在此处输入图像描述](../Images/cc58dec0726cfe0b9b71d2321c802111.png)](https://i.stack.imgur.com/0xEdB.png)

编辑：

我进行了研究，并了解到该版本正在运行，但系统需要时间来发布，直到调用下一个打印语句。您可以使用以下代码进行检查：

```
A *obj2 = [[A alloc] init];

NSLog(@"1rc=%ld",[obj2 retainCount]);

[obj2 release];

for (long i=0; i<1000000; i++) {
    for (long j=0; j<10000; j++) {
        ;
    }
}

[obj2 myprint];

for (long i=0; i<1000000; i++) {
    for (long j=0; j<10; j++) {
        ;
    }
}
NSLog(@"myprint again");
[obj2 myprint]; 
```

# c# - 我的 sql 为代码优先实体框架提供 6.4.3.0 支持

> ID：13737574
> 
> 赞同：0
> 
> 时间：2012-12-06T05:37:43.043
> 
> 标签：c#, asp.net, mysql, ef-code-first

我在服务器中使用我的 sql 6.4.3.0，它返回错误：

```
 'The provider did not return a ProviderManifestToken string.' 
```

但是在我的本地，我的 sql v-6.4.4.0 可以很好地创建数据库，但是在我的服务器中没有创建数据库。我的 sql 提供程序是否支持没有数据库的核心第一实体框架？

**堆栈跟踪**

```
[MySqlException (0x80004005): Unknown database 'globaldb']
   MySql.Data.MySqlClient.MySqlStream.ReadPacket() +196
   MySql.Data.MySqlClient.NativeDriver.AuthenticateSSPI() +22
   MySql.Data.MySqlClient.NativeDriver.AuthenticateNew(Boolean reset) +354
   MySql.Data.MySqlClient.NativeDriver.Authenticate(Boolean reset) +113
   MySql.Data.MySqlClient.NativeDriver.Open() +1034
   MySql.Data.MySqlClient.Driver.Open() +22
   MySql.Data.MySqlClient.Driver.Create(MySqlConnectionStringBuilder settings) +218
   MySql.Data.MySqlClient.MySqlPool.GetPooledConnection() +286
   MySql.Data.MySqlClient.MySqlPool.TryToGetDriver() +93
   MySql.Data.MySqlClient.MySqlPool.GetConnection() +65
   MySql.Data.MySqlClient.MySqlConnection.Open() +332
   MySql.Data.MySqlClient.MySqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +36
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +26

[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +170
   System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest) +40
   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +154
   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +39
   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +123
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +414
   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +17
   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +58
   System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() +15
   System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() +37
   System.Linq.Queryable.Select(IQueryable`1 source, Expression`1 selector) +66
   MyBusinessApp.MvcApplication.InitializeDatabase() in C:\APPS\TestShell\mybusinessapp2\Global.asax.cs:59
   MyBusinessApp.MvcApplication.Application_Start() in C:\APPS\TestShell\mybusinessapp2\Global.asax.cs:53

[HttpException (0x80004005): The provider did not return a ProviderManifestToken string.]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859725
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +336
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +296

[HttpException (0x80004005): The provider did not return a ProviderManifestToken string.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:46:58.057

在阅读了几篇文章后，您的问题很可能出现在您的 my sql 6.4.3.0 版本中本地和开发尽可能相似。

# php - 有没有办法在 PHP 中获取用户数据权限的访问令牌？

> ID：13737575
> 
> 赞同：0
> 
> 时间：2012-12-06T05:37:56.920
> 
> 标签：php, facebook-graph-api, access-token

我正在使用 PHP 在 Facebook 上工作，我想获得一个 access_token 来获得用户数据权限，例如

*   电子邮件
*   user_actions.music
*   用户活动
*   用户事件
*   用户位置
*   等等

我知道这可以通过在 Facebook 开发人员中使用 Graph API Explorer 来完成。你能告诉我如何在 PHP 中做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:40:40.327

在`include`为 PHP 编写 Facebook SDK 之后，只需[`$facebook->getLoginUrl`](http://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)使用适当的参数进行调用。

# android - 如何将音频文件和图像附加到电子邮件？

> ID：13737577
> 
> 赞同：-1
> 
> 时间：2012-12-06T05:37:58.947
> 
> 标签：android, android-intent

> **可能重复：**
> [如何将音频文件从 SD 卡附加到 Android 中的电子邮件？](https://stackoverflow.com/questions/13724491/how-to-attach-audio-file-from-sd-card-to-e-mail-in-android)

我想附加来自 SD 卡的音频文件和来自 Resource/drawable 文件夹的图像。我想在邮件成功发送到收件人后从 SD 卡中删除音频文件。请有人帮我解决这个问题。谢谢进步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:42:40.273

试试这个音频：

```
 private File file;
 file = new File("audio file name/ path");
    File filelocation = file ;
    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    sharingIntent.setType("audio/mp4");
    sharingIntent.putExtra(Intent.EXTRA_EMAIL, "xxxxxxxxxxxxxxx@gmail.com" );
    sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+filelocation.getAbsolutePath()));
    startActivity(Intent.createChooser(sharingIntent, "Send email")); 
```

试试这个图像：

```
 private File file;
  file = new File("your image path");
    File filelocation = file ;
    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    sharingIntent.setType("image/jpeg");
    sharingIntent.putExtra(Intent.EXTRA_EMAIL, "XXXXXXXXX@gmail.com" );
    sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+filelocation.getAbsolutePath()));
    startActivity(Intent.createChooser(sharingIntent, "Send email")); 
```

# php - 横幅滑块扩展

> ID：13737579
> 
> 赞同：0
> 
> 时间：2012-12-06T05:38:01.450
> 
> 标签：php, magento

我正在使用[BannerSlider 扩展](http://www.magentocommerce.com/magento-connect/banner-slider-3912.html)，效果很好，但出于设计目的，我需要将其包含在模板中。

目前，我将它与 CMS 一起使用，如下所示：

```
{{block type='bannerslider/bannerslider' template='bannerslider/bannerslider.phtml'}} 
```

如何获取该单行的 PHP 代码，将其直接添加到我的模板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:44:53.177

创建 cms/block 并放置您的代码

```
{{block type='bannerslider/bannerslider' template='bannerslider/bannerslider.phtml'}} 
```

然后你可以像这样在模板中调用 cms/block 的任何位置

```
<?php 
     echo $this->getLayout()->createBlock('cms/block')->setBlockId('YOUR IDENTIFIER')->toHtml() 
?> 
```

# solr - 如何在 Linux 上使用带有 glassfish 服务器的 apache solr 从数据库中索引数据？

> ID：13737581
> 
> 赞同：7
> 
> 时间：2012-12-06T05:38:16.400
> 
> 标签：solr, lucene, glassfish

我想使用 Apache Lucene 和 Apache Solr 在我的 Web 应用程序中创建一个搜索框。我正在使用 postgres 数据库并且必须使用 java 来完成。

当我对这些概念（solr，lucene）不熟悉时，我正在为此苦苦挣扎。我已经用 glassfish 安装和配置了 apache Solr。现在我不知道如何开始，无论我必须在 eclipse 中创建一个 java 项目还是必须使用 Solr 管理 GUI。

谁可以帮我这个事？

提前致谢.....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T07:52:32.443

为了使数据可搜索，您必须首先索引您的数据。您可以使用以下方法之一来索引数据。

*   通过使用 Solr 客户端，例如[Solrj](https://wiki.apache.org/solr/Solrj)
*   如果您将数据存储在关系数据库中，那么您可以使用[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)
*   通过发布 XML 或 Json 消息。[在此处查看文档](http://wiki.apache.org/solr/UpdateXmlMessages)。

添加新数据后，您可以使用 Solr 客户端 (Solrj) 对其进行索引。您还可以使用 Solrj 或任何其他客户端库搜索您的数据。

您可以在此处找到其他[客户端库](http://wiki.apache.org/solr/IntegratingSolr)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T09:16:00.453

您可以从[Solr DIH](http://wiki.apache.org/solr/DataImportHandler)开始索引从 postgres 到 Solr 的数据。

更详细的理解可以参考：
[-how-to-import-data-from-sql-databases-part-1](http://solr.pl/en/2010/10/11/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-1/)
[how-to-import-data-from-sql-databases-part-2](http://solr.pl/en/2010/11/01/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-2/)
[how-to-import-来自 sql 数据库的数据第 3 部分](http://solr.pl/en/2010/11/22/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-3/)

# java - grails mysql数据包失败

> ID：13737591
> 
> 赞同：0
> 
> 时间：2012-12-06T05:39:45.357
> 
> 标签：java, mysql, grails-orm

我使用 Grails 和 Gorm 执行一些数据库操作 select 和 insert 超过 12 个小时。我也汇集了连接。我突然收到以下错误，不得不重新启动 MySQL。为什么？：

```
java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
    at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
    at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2537)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2990)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2979)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3520)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1990)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2625)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2119)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2281)
    at grails.orm.HibernateCriteriaBuilder.invokeMethod(HibernateCriteriaBuilder.java:1167)
    at indiaweatherstation.PopulatedataService$_crawlAWS_closure2.doCall(PopulatedataService.groovy:89)
    at indiaweatherstation.PopulatedataService.crawlAWS(PopulatedataService.groovy:20)
    at indiaweatherstation.PopulatedataService$crawlAWS.call(Unknown Source)
    at indiaweatherstation.CrawlerController$_closure1.doCall(CrawlerController.groovy:16)
    at indiaweatherstation.CrawlerController$_closure1.doCall(CrawlerController.groovy)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:50:39.223

将mysql中的wait_timeout和interactive_timeout设置为更高的值

# django - 在 Web 应用程序上创建日志

> ID：13737594
> 
> 赞同：0
> 
> 时间：2012-12-06T05:40:32.420
> 
> 标签：django, logging

我正在使用类似于项目经理的 Django 开发应用程序。出于这个原因，系统应该能够存储有关所有内容的信息。当我所说的一切都是指用户执行的操作、执行操作时发生的错误等。我有一个类 Log，它的一个属性称为 action_type，此属性指定刚刚发生的操作类型。我应该有5种类型：

***INFO：***此日志存储与用户操作相关的信息，例如创建项目、创建其他用户等。

***DEBUG：***应该存储开发人员所做的评论，以便他们检测错误。

***ERROR：***显示系统中发生但不影响系统功能的错误。

***警告：***这是针对潜在的破坏性行为。

***致命：***意外错误、异常和安全漏洞。

我只能为 INFO 提供逻辑日志。

你能告诉我一些我应该包含在这个和其他类别中的合理日志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:32:52.200

答案将在很大程度上取决于您的应用程序所做的事情，但我的基本方法是：

每次你准备好记录一个事件时，只要想一想这个事件，它所属的地方就会很清楚。它杀死了你的应用程序吗？这是致命的。它是否阻止某些东西正常工作？这是一个错误。*它会阻止某些东西起作用吗*？这次我们是不是很幸运？这是一个警告。有人在乎吗？信息。否则，如果您仍然需要记录它，它必须用于调试目的。

在您的特定上下文中，听起来您可能只是在尝试记录用户操作。如果是这种情况，唯一可能致命的操作将是您不提供撤消选项的操作（或者，我想，如果用户能够通过您的应用）。我也无法想象任何来自用户操作的调试级日志。因此，我假设您将记录除用户操作之外的代码级事件。

***致命：***这应该只在您的应用程序实际崩溃时出现在日志中，并且可能与 500 响应一起出现。您可能会在您的 wsgi 应用程序中以包罗万象的方式生成这些，只有当进程否则会终止时。

***错误：***可能与 http 错误响应有关。这通常用于由应用程序之外的某些东西引起的错误。您的代码中发生的事情可能是预期的并且 <= 警告级别，或者意外和致命的。错误可能是来自用户在 url 中输入错误的 404、表单提交时的验证错误或身份验证错误。从另一个方向来看，您联系的远程 Web 服务可能会返回错误，或者来自操作系统的 IO 错误。

***警告：***对于不会破坏任何东西的东西，但如果你坚持下去，那可能会咬你。示例是使用已弃用的 api 和任何仅因默认设置（时区、字符编码等）而起作用的地方。也许某些输入值也会导致警告，例如将截止日期设置为过去。

***信息：***一般，运行良好。有人创建了一个数据库行（一个新项目还是一个任务？），创建了一个帐户，登录或退出，成功打开了一个套接字等。

***调试：***正如它所说的那样。一旦代码正常工作，您通常会关闭的输出。方法进入/退出、对象实例化、代码中各个点的字段值、计数器。无论您需要什么来弄清楚为什么您的程序现在正在崩溃，因为您正在处理它。

# php - 如何在面向对象的 PHP 中显示警报/消息？

> ID：13737599
> 
> 赞同：1
> 
> 时间：2012-12-06T05:40:55.507
> 
> 标签：php, javascript, object

目前，我使用 JavaScript 显示警报以通知执行成功，仅用于测试目的。如何以 PHP 面向对象的风格做到这一点？

我试过了：

```
public $msg='May the force be with you.';
$this->msg = new msg(); 
```

...但结果是一个白色的空白页。我尝试过的 JavaScript 片段效果很好。下面是完整的代码：

```
<?php
class database {
    public $mysql;
        private $db_host='localhost';
        private $db_username='admin';
        private $db_password='password';
        private $db_name='db';

    function __construct() {
        $this->mysql = new mysqli($this->db_host, $this->db_username, $this->db_password, $this->db_name) or die (mysql_error() ); {
            echo 
            "<script type='text/javascript'>
            alert ('The Force will be with you, always.');
            </script>";
        }
    }
    function __destruct() {
        $this->mysql->close();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:44:07.993

1.  PHP 是服务器端的，这意味着它运行在不同于用户的机器上。

2.  Javascript 是客户端的，这意味着它在用户的机器上运行。

3.  服务器不应该控制用户机器上的任何东西。

因此，来自 PHP 的警告框是不可能的。:)

您必须坚持使用仅在客户端运行的 Javascript。那，或者将纯文本回显到文档本身。

仅供参考，这种关系带来了其他有趣的问题，例如，“Javascript 如何与服务器对话”（答案：ajax）和“脚本可以与另一台计算机对话”（答案：是的，但不应该这样做）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T05:54:16.773

试试这个代码：

```
<?php
class database {
    public $mysql;
        private $db_host='localhost';
        private $db_username='admin';
        private $db_password='correcthorsebatterystaple';
        private $db_name='projekt';

    function __construct() {
        $this->mysql = new mysqli($this->db_host, $this->db_username, $this->db_password, $this->db_name) or die (mysql_error() );
    }
   function pri()
    {
            echo 
            "<script type='text/javascript'>
            alert ('The Force will be with you, always.');
            </script>";
        }
    function __destruct() {
        $this->mysql->close();
    }
}

$msg=new database();
$msg->pri();
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:47:20.987

在 PHP 中，您可以`print_r()`对任何变量（或`var_dump()`）执行操作以查看对象或数组等的内容。

这样做会将内容直接转储到页面源（但不是作为浏览器弹出窗口）。

# prolog - 将元组添加到列表而不使用 Prolog 中的 pl 列表库

> ID：13737601
> 
> 赞同：0
> 
> 时间：2012-12-06T05:41:21.630
> 
> 标签：prolog

此 showName 查询将给出一组名称：

```
?- showName(SName,Fname).
SName = 'McBrien',
FName = 'Alex' ;
SName = 'Gardner',
FName = 'Daniel' ;
SName = 'Phillips',
FName = 'Abbas' ;
SName = 'Pietzuch',
FName = 'Paul'  

and so on as I keep pressing ; it will gives more names. 
```

我需要编写另一个名为

```
nameList (List). %which will put all names by query showName into List as a tuple
                  ((SName1,FName1),(SName2,FName2), ... ) 
```

我想在不使用 Prolog 库（列表）的情况下尝试它。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:55:55.230

假设您的事实数据库类似于

```
person('Alex', 'McBrien', male).
person('Daniel', 'Gardner', male).
person('Abbas', 'Phillips', male).
person('Paul', 'Pietzuch', male). 
```

没有重复，你可以不使用`findall/3`累加器来做到这一点，尽管有额外的计算成本。只有当它还不是它的成员时，您才必须将项目添加到累加器：

```
nameList(List):-
  nameList([], List).

nameList(IList, List):-
  (
   call(person(FName, SName, _)),
   \+ (member((SName, FName), IList))
  )-> nameList([(SName, FName)|IList], List) ; List=IList. 
```

过程只是用一个空的累加器`nameList/1`调用。`nameList/2`然后程序`nameList/2`将从事实数据库中调用每个人并检查该人是否在累加器列表中。如果它找到一个这样的人，那么它会递归地调用自己将这个人添加到累加器中。如果它没有找到任何不在输入列表中的人，那么它将这个累加器与输出的人员列表统一起来。

# php - PHP MySQL。只希望类别名称在高级搜索功能的选择下拉选项中出现一次

> ID：13737602
> 
> 赞同：3
> 
> 时间：2012-12-06T05:41:31.640
> 
> 标签：php, mysql

我有这个简单的 PHP 代码：

```
 <?php
 $con = mysql_connect("localhost","root","");
 if (!$con)
 {
     die('Could not connect: ' . mysql_error());
 }
 mysql_select_db("boxcar", $con);
 echo "<form>";
 echo "<select>";
 echo "<option>--Select Brand--</option>";
 $result = mysql_query("SELECT * FROM cars");   
 while($row = mysql_fetch_array($result))
 {  
     echo "<option value=".$row['Brand'].">".$row["Brand"]."</option>";
 }
 echo "</select><br/><br/>";
 echo "<input type='button' name='submit' value='Search'/>"
 echo "</form>";
 mysql_close($con);
 ?> 
```

我是这方面的新手，只是试图通过使用下拉菜单为各种车型构建高级搜索功能。我只想让每个汽车品牌名称作为父类别仅在下拉列表中显示一次。我目前显示重复的品牌名称，因为我有不同的汽车型号具有相同的品牌名称。

* * *

除此之外，我希望车型的第二个下拉菜单仅显示与所选父类别（汽车品牌）相对应的车型列表，并且不显示数据库中的所有车型。

我目前有此代码，汽车型号下拉列表显示数据库中的所有型号：

```
//--------Get Car Brands----------
$result = mysql_query("SELECT DISTINCT cars.brand FROM cars ORDER BY brand ASC");
while($row=mysql_fetch_array($result)){
echo "<option value=".$row['brand'].">".$row["brand"]."</option>";}
echo "</select>&nbsp;&nbsp;<select class='model'>";

//--------Get Car Models----------
echo "<option>--Select Model--</option>";
$result = mysql_query("SELECT DISTINCT cars.model FROM cars ORDER BY model ASC");
while($row=mysql_fetch_array($result)){
echo "<option value=".$row['model'].">".$row["model"]."</option>";}
echo "</select><br/><br/>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:49:03.640

尝试使用

`SELECT * FROM car GROUP BY car.Brand`

或者

`SELECT DISTINCT car.Brand FROM car;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:46:49.930

提尔这个

```
SELECT DISTINCT Brand FROM cars 
```

这将从汽车表中删除重复的品牌

# mysql - SQL 语法错误 UPDATE / WHERE

> ID：13737605
> 
> 赞同：1
> 
> 时间：2012-12-06T05:41:45.797
> 
> 标签：mysql

因此，在尝试运行以下命令时，我不断收到 SQL 语法错误：

```
UPDATE tickets SET (ticket_urgency, ticket_status) VALUES ('Urgent', 'new') WHERE ticket_id='14' 
```

不知道这有什么问题？我也尝试过 INSERT INTO，但这里棘手的部分是 WHERE tiket_id='x'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:42:35.540

的语法`UPDATE`应该是这样的，

```
UPDATE tickets 
SET    ticket_urgency = 'Urgent', 
       ticket_status = 'new'
WHERE  ticket_id='14' 
```

*   [更新](http://dev.mysql.com/doc/refman/5.0/en/update.html)

`SQL Injection`为了进一步了解，如果值来自变量，您的查询很容易受到攻击，为了保护它，请阅读下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:43:21.107

您的语法不正确，请更正

```
UPDATE tickets 
SET ticket_urgency = 'Urgent', 
    ticket_status = 'new'
 WHERE ticket_id='14' 
```

# asp.net - ASP System.Net.Mail

> ID：13737606
> 
> 赞同：0
> 
> 时间：2012-12-06T05:41:52.123
> 
> 标签：asp.net

这里应该是什么问题？

```
MailAddress msgFrom = new MailAddress("donotreply@mydomain.com", "Friendly Name"); 
```

这行不通。该电子邮件仍然是显示在收件人收件箱中的电子邮件。

发件人的姓名应在收件人的收件箱中显示为“友好名称”，而不是 donotreply@mydomain.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:27:58.153

可能是因为收件人邮箱里已经有你之前发的邮件了，查看收件人的联系方式，看看发件人是否在联系人中，有时候是这个原因。

也可以查看邮件正文的标头（也称为原始邮件），应该有这样的一行`From: Friendly Name <donotreply@mydomain.com>`，如果你发现了，你不需要对代码做任何事情，它的工作

或者尝试发送到没有来自发件人的电子邮件的另一个电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:10:57.473

看来，您的代码没有问题。

```
MailAddress from = new MailAddress("ben@contoso.com", "Ben Miller");
MailAddress to = new MailAddress("jane@contoso.com", "Jane Clayton");
MailMessage message = new MailMessage(from, to); 
```

但是，您可以尝试以下示例：[MailAddress.DisplayName](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.displayname.aspx)

# match - 匹配并显示相邻的单元格

> ID：13737609
> 
> 赞同：1
> 
> 时间：2012-12-06T05:42:14.623
> 
> 标签：match

我有两张单独的表格表 1 A 列是药物列表 B 列是该药物的身份代码 C 列是等式

表 2 A 栏是身份代码，如上述 B 栏 B 栏是该药物的资金价值。

我想创建一个将 Sheet1 B 与 Sheet2 A 匹配的函数，然后在 sheet1 C 上打印 Sheet2 B 中的值。

干杯

# asp.net-mvc-3 - Kendo UI Complete for ASP.NET MVC 和 Telerik Extensions for ASP.NET MVC 之间的区别

> ID：13737611
> 
> 赞同：1
> 
> 时间：2012-12-06T05:42:23.750
> 
> 标签：asp.net-mvc-3, telerik, kendo-ui, telerik-mvc

Kendo UI Complete for ASP.NET MVC 和 Telerik Extensions for ASP.NET MVC 有什么区别？

[剑道衣](http://www.kendoui.com/faq/mvc-faq.aspx)

我读过那里的帖子，但无法理解确切的区别。根据他们

> 模块化：使用 Kendo UI Complete for ASP.NET MVC，您可以根据您的偏好或项目要求单独或一起使用客户端和服务器部分。Telerik Extensions 无法做到这一点。

这些点的确切含义是什么？任何人都可以用一个例子来解释这些吗？

只有2个区别？

在这两个组件之间最好使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:56:39.527

如文档中所述：

1-**使用 HTML5 和 JavaScript 覆盖设备：**用于 ASP.NET MVC 的 Kendo UI Complete 使您能够使用现代 HTML5、CSS3 和 JavaScript 的跨平台功能定位桌面和移动设备。

**2-模块化**：与 Kendo UI Complete for ASP.NET MVC一起使用`you can leverage the client and server pieces independently`，或一起使用，具体取决于您的偏好或项目要求。Telerik Extensions 无法做到这一点。

kendo ui 具有telerik 的 2 个附加功能。kendo ui 针对桌面和移动设备。这个很清楚。但是关于第二个（模块化），如果您在 ASP 之前已经使用过 KendoUI 客户端扩展，您会感受到这种差异.NET MVC.this 意味着即使您不是 ASP.NET MVC 开发人员（作为 javascript 开发人员），您也可以使用 Telerik 客户端扩展，这是 Telerik 扩展无法做到的。

# java - web.xml url 模式的问题

> ID：13737619
> 
> 赞同：0
> 
> 时间：2012-12-06T05:42:42.177
> 
> 标签：java, web.xml

在我`web.xml`的 servlet 中有这样的 URL 模式：

`<url-pattern>/*/myservice</url-pattern>`

所以我想用`blablabla/myservice`as来调用它`anyWord/myservice`。

但它不起作用。仅当我使用此 URL 调用它时它才有效：（`/*/myservice` 在 URL 中带有星号）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:48:54.583

你不能那样做。根据 Servlet 2.5 规范（在规范的其他级别并没有什么不同），章节 SRV.11.2：

*   以字符开头`/`并以后缀结尾的字符串`/*`用于路径映射。
*   以前缀开头的字符串`*.`用作扩展映射。
*   仅包含字符的字符串`/`表示应用程序的“默认”servlet。在这种情况下，servlet 路径是请求 URI 减去上下文路径，并且路径信息为空。
*   所有其他字符串仅用于完全匹配。

您的案例属于第 4 个项目符号，因此使用了精确映射。

为了避免这种情况，请使用`/`（第三种情况）的映射。将所有请求映射到特定的 servlet，并让该 servlet 将请求重新路由到某种类型的处理程序（其他 servlet 或某些自定义类）。

例如：

```
<url-pattern>/</url-pattern>
<servlet-name>MyServlet</servlet-name> 
```

然后，在`MyServlet`的代码中，检查您在请求中收到的 URL（使用`request.getPathInfo()`）并使用该值将请求转发给其他处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:01:23.453

您可以在您的 url 模式为 /* 时使用过滤器，并在过滤器内部决定您需要哪个重定向。

```
<filter>
<display-name>MyFilter</display-name>
<filter-name>MyFilter</filter-name>
<filter-class>com.MyfilterClass</filter-class> 
```

```
<filter-mapping>
<filter-name>MyFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>

</filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:03:25.457

那么两个 ULR 映射部分呢？

```
 <servlet-mapping>  
    <servlet-name>ModifyMemberSVL</servlet-name>  
    <url-pattern>/ModifyMember</url-pattern>  
  </servlet-mapping>  
  <servlet-mapping>  
    <servlet-name>ModifyMemberSVL</servlet-name>  
    <url-pattern>/Administration/Add_Member/ModifyMember</url-pattern>  
  </servlet-mapping> 
```

# cloud-foundry - 我无法执行命令：vmc info

> ID：13737622
> 
> 赞同：0
> 
> 时间：2012-12-06T05:43:01.687
> 
> 标签：cloud-foundry, vmc

这是错误信息

```
D:/software/Ruby187/lib/ruby/site_ruby/1.8/rubygems/specification.rb:1637:in ra
ise_if_conflicts': Unable to activate cfoundry-0.4.8, because multi_json-1.3.6 c
onflicts with multi_json (~> 1.4.0) (Gem::LoadError)
from D:/software/Ruby187/lib/ruby/site_ruby/1.8/rubygems/specification.rb:746:in activate' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:28:22.467

使用以下命令卸载 multi_json，当询问哪个版本时选择“所有版本”

```
gem uninstall multi_json 
```

然后，重新安装vmc

```
gem install vmc 
```

# objective-c - Objective C - 这两个陈述之间的区别？

> ID：13737631
> 
> 赞同：0
> 
> 时间：2012-12-06T05:43:52.297
> 
> 标签：objective-c

有人可以解释以下（使用ARC）之间的区别，其中myObj定义为

```
@property(nonatomic, weak) MyType *myObj; 
```

通过局部变量赋值：

```
MyType *_myObj = [MyType new];
self.myObj = _myObj; 
```

和

```
self.myObj = [MyType new]; 
```

在前一种情况下，对象实例 myObj 似乎是持久存在的，而在后一种情况下，该实例在封闭函数完成后很快被释放。有什么不同？他们不应该是一样的吗？

[编辑] 我知道我已经指定了弱，我的问题仍然存在。我不确定为什么这会被否决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:59:47.137

由于您的属性被定义为弱，因此分配不会增加保留计数。

在第二段代码中，您创建对象并将其分配给弱属性。完成此操作后，创建的对象将被释放并解除分配，从而将弱属性重置为 nil。

在第一段代码中，您将创建的对象分配给一个强局部变量。然后将强局部变量分配给弱属性。只要局部变量在范围内，创建的对象就有引用。一旦局部变量超出范围，对象将被释放并释放，而将弱属性设置为 nil。

最终结果是一样的。当方法竞争时，该属性保留为 nil，因为创建的对象没有其他对它的引用。两者之间的唯一区别是这种情况发生的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:58:58.487

我已经测试过了，结果是一样的

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    //NSObject *_myObj = [NSObject new];
    //self.myObj = _myObj;
    self.myObj = [NSObject new];

}

- (IBAction)click:(id)sender {
    NSLog(@"%@",self.myObj);
} 
```

两种情况都会导致输出为：（null）

# python - 如果我不将文件分配给变量，它们会自动关闭吗？

> ID：13737633
> 
> 赞同：4
> 
> 时间：2012-12-06T05:43:59.037
> 
> 标签：python, file-io, scope

> **可能重复：**
> [在 Python 文件对象上使用迭代器时是否需要 close()](https://stackoverflow.com/questions/1832528/is-close-necessary-when-using-iterator-on-a-python-file-object)

```
for line in open("processes.txt").readlines():
    doSomethingWith(line) 
```

以该代码为例。没有什么可以调用 close() 的。那么它会自动关闭吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T06:31:19.377

当相应的对象被释放时，文件将关闭。您提供的样本取决于此；没有对该对象的引用，因此将删除该对象并关闭该文件。

需要注意的重要一点是，无法保证何时删除对象。使用 CPython，您可以将引用计数作为内存管理的基础，因此您希望文件立即关闭。例如，在 Jython 中，垃圾收集器不能保证在任何特定时间运行（甚至根本不运行），因此您不应指望文件被关闭，而应手动关闭文件或（更好）使用`with`语句.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T05:45:32.170

AFAIK 他们没有。为了自动关闭，您需要使用上下文管理器，例如`with`

尽管对象本身可能会被垃圾回收回收并关闭，但垃圾回收发生的时间并没有确定的时间。

```
with open("processes.txt") as openfile:
    <do stuff> 
```

# linux - Linux Angstrom 中的鼠标输入

> ID：13737637
> 
> 赞同：1
> 
> 时间：2012-12-06T05:44:08.243
> 
> 标签：linux, input, mouse

如果我按下鼠标左键，我正在运行一个需要中断的循环。我有一个触摸屏 LCD，可以显示我正在运行的 c++ 代码，如果我触摸 LCD 屏幕，我希望能够打破循环。谢谢

# android - 如何在布局中使用两个列表视图？

> ID：13737638
> 
> 赞同：0
> 
> 时间：2012-12-06T05:44:10.707
> 
> 标签：android, android-layout, listview, scrollview

有如下布局。两个 listView 并在其标题上带有图像和文本。底部有按钮。我的问题是，如果第一个列表视图是高度，其他列表视图和按钮不会出现。我想制作一个包含标题和 ListViews 的滚动视图，但没有用。我能怎么做？谢谢

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:src="@drawable/icon" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:layout_marginLeft="5dp"
            android:text="@string/Dep"
            android:textColor="@color/white" />

    </LinearLayout>
</LinearLayout>

<ListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
</ListView>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/Orange"
    android:gravity="center"
     >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:src="@drawable/icon2" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:textSize="18sp"
            android:layout_marginLeft="5dp"
            android:textColor="@color/white" />
    </LinearLayout>
</LinearLayout>

<ListView
    android:id="@+id/listView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
</ListView>

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center"
    android:layout_margin="10dp" >

    <Button
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_height="55dp"
        android:layout_margin="5dp"
        android:layout_weight=".3"
        android:gravity="bottom|center_horizontal"
        android:textSize="16sp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_height="55dp"
        android:layout_margin="5dp"
        android:layout_weight=".7"
        android:text="@string/Continue"
        android:textColor="@color/white"
        android:textSize="24sp"
        android:textStyle="bold" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:49:24.670

ListView 是 android 中的可滚动视图，如果您想在单个屏幕上包含两个 Listview，您可以通过固定这些视图的父级高度来实现。例如，在下面的代码中，我已经固定了包含列表视图的线性布局的高度，您可以使用权重根据屏幕高度排列所有视图。

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:src="@drawable/icon" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="center" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:layout_marginLeft="5dp"
                android:text="@string/Dep"
                android:textColor="@color/white" />

        </LinearLayout>
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="100dip"
        >
    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </ListView>
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/Orange"
        android:gravity="center"
         >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:src="@drawable/icon2" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="center" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:textSize="18sp"
                android:layout_marginLeft="5dp"
                android:textColor="@color/white" />
        </LinearLayout>
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="100dip"
        >
    <ListView
        android:id="@+id/listView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </ListView>
    </LinearLayout>
     <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_margin="10dp" >

        <Button
            android:id="@+id/btn1"
            android:layout_width="0dp"
            android:layout_height="55dp"
            android:layout_margin="5dp"
            android:layout_weight=".3"
            android:gravity="bottom|center_horizontal"
            android:textSize="16sp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/btn2"
            android:layout_width="0dp"
            android:layout_height="55dp"
            android:layout_margin="5dp"
            android:layout_weight=".7"
            android:text="@string/Continue"
            android:textColor="@color/white"
            android:textSize="24sp"
            android:textStyle="bold" />
    </LinearLayout

> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:51:57.333

通过这种方式，您可以使用两个列表视图...

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp" >

     <ListView
        android:id="@+id/lst_payment"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="5dp"
        android:scrollbars="none" >

    </ListView>

    <ListView
        android:id="@+id/lst_bank"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:layout_below="@+id/lst_payment"
        android:layout_marginTop="5dp"
        android:fadingEdge="none"
        android:scrollbars="none" >
    </ListView>
</RelativeLayout 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:57:07.923

第二个列表视图没有出现的原因是您没有设置线性布局的方向。将其方向设置为垂直它会出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:14:56.657

我不知道为什么您需要在一项活动中使用两个列表视图，但上面的代码只有在您不指定列表视图高度的情况下才有帮助。我相信您可以使用 MergeAdpter 制作更精美、更酷的列表视图，[看看这里](https://github.com/commonsguy/cwac-merge/tree/master/src)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:40:28.527

我解决了我的问题如下：

我在列表视图的活动中使用了此代码：

```
HelperScrollView.getListViewSize(listview); 
```

这是课程：

```
public class HelperScrollView 
{
public static void getListViewSize(ListView myListView) {
    ListAdapter myListAdapter = myListView.getAdapter();
    if (myListAdapter == null) {
        //do nothing return null
        return;
    }
    //set listAdapter in loop for getting final size
    int totalHeight = 0;
    for (int size = 0; size < myListAdapter.getCount(); size++) {
        View listItem = myListAdapter.getView(size, null, myListView);
        listItem.measure(0, 0);
        totalHeight += listItem.getMeasuredHeight();
    }
  //setting listview item in adapter
    ViewGroup.LayoutParams params = myListView.getLayoutParams();
    params.height = totalHeight + (myListView.getDividerHeight() * (myListAdapter.getCount()));
    myListView.setLayoutParams(params);

} 
```

}

您可以在布局中将列表视图用于滚动视图。

# java - 使用多个线程搜索数组时出现 Java 锁定/并发问题

> ID：13737642
> 
> 赞同：1
> 
> 时间：2012-12-06T05:44:58.280
> 
> 标签：java, multithreading, concurrency, locking

我是 Java 新手，正在尝试编写一种方法来查找 2D 长数组中的最大值。

该方法在单独的线程中搜索每一行，并且线程保持共享的当前最大值。每当一个线程发现一个大于它自己的局部最大值的值时，它就会将该值与共享的局部最大值进行比较，并酌情更新其当前的局部最大值和可能的共享最大值。我需要确保实现适当的同步，以便无论计算如何交错，结果都是正确的。

我的代码冗长而凌乱，但对于初学者来说，我有这个功能：

```
 static long sharedMaxOf2DArray(long[][] arr, int r){

     MyRunnableShared[] myRunnables = new MyRunnableShared[r];
     for(int row = 0; row < r; row++){
       MyRunnableShared rr = new MyRunnableShared(arr, row, r);
       Thread t = new Thread(rr);
       t.start();
       myRunnables[row] = rr;
     }

     return myRunnables[0].sharedMax; //should be the same as any other one (?)

   } 
```

对于改编的可运行文件，我有这个：

```
 public static class MyRunnableShared implements Runnable{
     long[][] theArray; 
     private int row; 
     private long rowMax; 
     public long localMax; 
     public long sharedMax; 
     private static Lock sharedMaxLock = new ReentrantLock(); 
     MyRunnableShared(long[][] a, int r, int rm){
        theArray = a; 
        row = r;
        rowMax = rm;
      }
      public void run(){
        localMax = 0;
        for(int i = 0; i < rowMax; i++){
          if(theArray[row][i] > localMax){
            localMax = theArray[row][i];
            sharedMaxLock.lock();
            try{
              if(localMax > sharedMax)
                sharedMax = localMax;
            }
            finally{
              sharedMaxLock.unlock(); 
            }
          } 
        }
      }
    } 
```

我认为这种锁的使用将是一种防止多个线程`sharedMax`一次搞乱的安全方法，但是在测试/比较同一输入上的非并发最大值查找函数时，我发现结果不正确. 我在想问题可能来自我刚才说的事实

```
...
t.start();
myRunnables[row] = rr; 
... 
```

在`sharedMaxOf2DArray`函数中。也许给定线程需要在我将它放入 myRunnables 数组之前完成；否则，我将“捕获”错误的 sharedMax？或者是别的什么？我不确定事情的时间安排..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:14:26.457

来自 JavaDocs：

> 公共接口可调用
> 
> 返回结果并可能引发异常的任务。实现者定义了一个没有参数的方法，称为 call。
> 
> Callable 接口与 Runnable 类似，两者都是为实例可能由另一个线程执行的类设计的。但是，Runnable 不返回结果，也不能抛出检查异常。

好吧，您可以使用 Callable 从一个 1darray 计算结果，然后等待 ExecutorService 结束。您现在可以比较 Callable 的每个结果以获取最大值。代码可能如下所示：

```
Random random = new Random(System.nanoTime());
long[][] myArray = new long[5][5];
for (int i = 0; i < 5; i++) {
    myArray[i] = new long[5];
    for (int j = 0; j < 5; j++) {
        myArray[i][j] = random.nextLong();
    }
}

ExecutorService executor = Executors.newFixedThreadPool(myArray.length);
List<Future<Long>> myResults = new ArrayList<>();
// create a callable for each 1d array in the 2d array
    for (int i = 0; i < myArray.length; i++) {
        Callable<Long> callable = new SearchCallable(myArray[i]);
    Future<Long> callResult = executor.submit(callable);
    myResults.add(callResult);
}
// This will make the executor accept no new threads
// and finish all existing threads in the queue
executor.shutdown();
// Wait until all threads are finish
while (!executor.isTerminated()) {
}
// now compare the results and fetch the biggest one
long max = 0;
for (Future<Long> future : myResults) {
    try {
        max = Math.max(max, future.get());
    } catch (InterruptedException | ExecutionException e) {
        // something bad happend...!
        e.printStackTrace();
    }
}
System.out.println("The result is " + max); 
```

你的可调用对象：

```
public class SearchCallable implements Callable<Long> {

    private final long[] mArray;

    public SearchCallable(final long[] pArray) {
        mArray = pArray;
    }

    @Override
    public Long call() throws Exception {
        long max = 0;
        for (int i = 0; i < mArray.length; i++) {
            max = Math.max(max, mArray[i]);
        }
        System.out.println("I've got the maximum " + max + ", and you guys?");
        return max;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:39:06.697

我不确定这是否是拼写错误，但您的`Runnable`实现声明`sharedMax`为实例变量：

```
public long sharedMax; 
```

而不是共享的：

```
public static long sharedMax; 
```

在前一种情况下，每个 Runnable 都有自己的副本，不会“看到”其他人的值。将其更改为后者应该会有所帮助。或者，将其更改为：

```
public long[] sharedMax; // array of size 1 shared across all threads 
```

现在您可以在循环外创建一个大小为 1 的数组，并将其传递给每个 Runnable 以用作共享存储。

*顺便说一句：请注意，由于每个线程都会通过为其循环的每次迭代持有一个锁来检查公共sharedMax*值，因此会有巨大的锁争用。这可能会导致性能不佳。您必须进行测量，但我推测让每个线程找到最大行然后运行最后一遍以找到“最大值的最大值”实际上可能具有可比性或更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T17:21:20.253

您的代码存在严重的锁争用和线程安全问题。更糟糕的是，它实际上并没有等待任何线程完成，`return myRunnables[0].sharedMax`这是一个非常糟糕的竞争条件。此外，通过`ReentrantLock`甚至`synchronized`块使用显式锁定通常是错误的做事方式，除非您正在实现一些低级别的东西（例如您自己的/新的并发数据结构）

这是一个使用`Future`并发原语和`ExecutorService`处理线程创建的版本。总体思路是：

1.  提交多个并发作业到您的`ExecutorService`
2.  将`Future`返回的 backed from添加`submit(...)`到`List`
3.  循环调用`get()`每个列表`Future`并聚合结果

这个版本还有一个额外的好处，即工作线程之间没有锁争用（或一般的锁定），因为每个线程只返回其数组切片的最大值。

```
import java.util.concurrent.*;
import java.util.*;

public class PMax {
    public static long pmax(final long[][] arr, int numThreads) {
        ExecutorService pool = Executors.newFixedThreadPool(numThreads);
        try {
            List<Future<Long>> list = new ArrayList<Future<Long>>();
            for(int i=0;i<arr.length;i++) {
                // put sub-array in a final so the inner class can see it:
                final long[] subArr = arr[i];
                list.add(pool.submit(new Callable<Long>() {
                    public Long call() {
                        long max = Long.MIN_VALUE;
                        for(int j=0;j<subArr.length;j++) {
                            if( subArr[j] > max ) {
                                max = subArr[j];
                            }
                        }
                        return max;
                    }
                }));
            }
            // find the max of each slice's max:
            long max = Long.MIN_VALUE;
            for(Future<Long> future : list) {
                long threadMax = future.get();
                System.out.println("threadMax: " + threadMax);
                if( threadMax > max ) {
                    max = threadMax;
                }
            }
            return max;
        } catch( RuntimeException e ) {
            throw e;
        } catch( Exception e ) {
            throw new RuntimeException(e);
        } finally {
            pool.shutdown();
        }
    }

    public static void main(String args[]) {
        int x = 1000;
        int y = 1000;
        long max = Long.MIN_VALUE;
        long[][] foo = new long[x][y];
        for(int i=0;i<x;i++) {
            for(int j=0;j<y;j++) {
                long r = (long)(Math.random() * 100000000);
                if( r > max ) {
                    // save this to compare against pmax:
                    max = r; 
                }
                foo[i][j] = r;
            }
        }
        int numThreads = 32;
        long pmax = pmax(foo, numThreads);
        System.out.println("max:  " + max);
        System.out.println("pmax: " + pmax);
    }
} 
```

**奖励：**`ExecutorService`如果您重复调用此方法，那么将创建从方法中提取出来并在调用之间重用它可能是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T05:55:14.113

好吧，这绝对是一个问题——但如果没有更多代码，就很难理解它是否是唯一的东西。

在访问（以及对 的读取）和修改其他线程之间基本上存在[竞争条件。](http://en.wikipedia.org/wiki/Race_condition)`thread[0]``sharedMax``sharedMax`

想想如果调度程序决定暂时不让任何线程运行会发生什么 - 所以当您完成创建线程时，您将返回答案而不修改它！（当然还有其他可能的情况……）

[`join()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#join%28%29)您可以通过在返回答案之前 ing 所有线程来克服它。

# sql - 如果表中没有该月/年的记录，如何显示月和年的“o”值

> ID：13737644
> 
> 赞同：0
> 
> 时间：2012-12-06T05:44:59.953
> 
> 标签：sql, sql-server

> **可能重复：**
> [SQL 组和按月求和 - 默认为零](https://stackoverflow.com/questions/7121914/sql-group-and-sum-by-month-default-to-zero)

在我的表格中，我没有几个月和几年的记录，所以我需要为该记录输入“0”，并且需要显示从“2006”到“2012”的所有月份和年份，请建议我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:38:04.020

dummy 是你真正的桌子......

```
WITH DummyDates (Date) AS (
    SELECT DATEADD(DAY, DATEDIFF(DAY, 0, '20121231') - DATEDIFF(DAY, '20060101', '20121231'), 0)
        UNION ALL SELECT DATEADD(DAY, 1, Date)
            FROM DummyDates
            WHERE DATEADD(DAY, 1, Date) <= '20121231')
SELECT DatePart(yy,DummyDates.Date) as [Year],DATEPART(MM,DummyDates.Date) as [Month],SUM(Case when dummy.date is null then 0 else 1 end) as cnt
FROM DummyDates 
LEFT Join dummy on dummy.Date=DummyDates.Date
Group by DatePart(yy,DummyDates.Date),DATEPART(MM,DummyDates.Date)
Order by DatePart(yy,DummyDates.Date),DATEPART(MM,DummyDates.Date)
OPTION (MAXRECURSION 0) 
```

# html - 段落标签不改变颜色

> ID：13737646
> 
> 赞同：1
> 
> 时间：2012-12-06T05:45:23.683
> 
> 标签：html, css

从下面的代码：为什么段落标签不显示绿色？我只是在练习 CSS，所以我遇到了这个疑问..

```
p .marked2{
color:green;
}

.marked p
{
color:purple;
}

<p class="marked2">This is a green paragraph.</p> //HERE NOT SHOWING GREEN
<div class="marked">
<p>This is a purple paragraph.</p> //HERE GETTING PURPLE COLOR
</div> 
```

请清除我这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:50:01.187

应该是`p.marked2`。你现在拥有它的方式，它正在寻找任何容器`.marked2`内的元素。`p`

**例子：**

`p.marked2`将目标`<p class="marked2">...</p>`（*每个* `p`元素`class="marked2"`）

`p .marked2`将目标`<p><span class="marked2">...</span></p>`（*任何*类型的元素`class="marked2"`作为*任何后代*）`<p>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:48:34.960

擦除空间

```
p.marked2 { 
    color:green; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:05:24.787

嘿克拉森，你应该这样写：-

```
p.marked2 {
color:green;
}

.marked p {
color:purple;
} 
```

它现在可以根据您的要求工作....

实际上，您写的`p .marked2`这意味着当`marked2` **类**带有`P`不在标签内的`P`标签时，该属性将适用。

所以你应该这样写，`p.marked2`而不是`marked2` **类**属性将`P`像演示一样应用到你的标签中。

[**演示**](http://tinkerbin.com/5hz157Yd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:11:38.100

我刚刚搞定了。您所要做的就是腾出空间

```
 p .marked2{
    color:green;
    }

    p.marked2{
    color:green;
    } 
```

就是这样，老板……你现在可以走了……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T07:24:56.033

所以你遇到的问题是空间；示例：`p .marked2`。您需要做的就是像这样删除空间；示例：`p.marked2`。之后它应该可以正常工作。

`p.marked2{ color:green; }`

`p.marked{ color:purple; }`

`<p class="marked2">This is a green paragraph.</p> //HERE NOT SHOWING GREEN <div class="marked"> <p>This is a purple paragraph.</p> //HERE GETTING PURPLE COLOR </div>`

# list - 列表行单击在弹出屏幕中不起作用

> ID：13737648
> 
> 赞同：0
> 
> 时间：2012-12-06T05:45:40.563
> 
> 标签：list, blackberry, popup

我正在尝试在弹出屏幕中放置一个列表字段。清单来得正是时候。但是当我单击列表的特定行时，它不会触发任何事件。尝试显示一个对话框。但它也不起作用。这是我的代码：

```
 public class AttachmentListPopup  extends PopupScreen implements FieldChangeListener{

    private ListField _listField;
     private Vector _listElements;
    public AttachmentListPopup()
    {
        super(new VerticalFieldManager());
        _listElements = new Vector(); 
        _listField = new ListField();
        ListCallback _callback = new ListCallback()
        {

             public boolean navigationClick(int status, int time)
             {
                    int index = _listField.getSelectedIndex();
                    if(index == 0)
                    {
                        Dialog.alert("Grocery Clicked");
                    }

                    else if(index == 1)
                    {
                        Dialog.alert("To Do's Clicked");
                    }
                    return true;
             }
        };
        _listField.setCallback(_callback);
        initializeList();
        add(_listField);
    }

    private void initializeList()
    {
        String itemOne = "Grocery";
        String itemTwo = "To Do's";
        _listElements.addElement(itemOne);
        _listElements.addElement(itemTwo);
        _listField.setSize(_listElements.size());
        _listField.setRowHeight(Display.getHeight()/6);
    }

    private class ListCallback implements ListFieldCallback 
    {
        public void drawListRow(ListField list, Graphics g, int index, int y, int w) 
        {
            y = y +20;
            String text = (String)_listElements.elementAt(index); 
            g.drawText(text, (Display.getWidth() - getFont().getAdvance(text))/2, y, 0 , w); 
        } 
        public Object get(ListField list, int index) 
        {
            return _listElements.elementAt(index); 
        } 
        public int indexOfList(ListField list, String prefix, int string) 
        { 
            return _listElements.indexOf(prefix, string); 
        } 
        public int getPreferredWidth(ListField list) 
        { 
            return Display.getWidth(); 
        } 
    }
    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub

    }

} 
```

如果您发现问题，这将是很大的帮助.. 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:55:17.913

看看[这个](http://developerlife.com/tutorials/?p=898)，这是 ListField 实现的一个很好的例子，因为我在 Mac 上，我无法运行你的代码。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:07:52.740

最后我能够解决这个问题。我正在为列表视图编写导航单击。现在它工作正常..

这是我更新的代码：

```
public class AttachmentListPopup  extends PopupScreen implements FieldChangeListener{

private ListField _listField;
 private Vector _listElements;
public AttachmentListPopup()
{
    super(new VerticalFieldManager());
    _listElements = new Vector(); 
    _listField = new ListField();
    ListCallback _callback = new ListCallback();
    _listField.setCallback(_callback);
    initializeList();
    add(_listField);
}

protected boolean navigationClick(int arg0, int arg1) {
    // TODO Auto-generated method stub

    int index = _listField.getSelectedIndex();
    if(index == 0)
    {
        UiApplication.getUiApplication().popScreen(this);
        Logger.out("AttachmnentList", "first row clicked");
        Dialog.alert("Grocery Clicked");
    }

    else if(index == 1)
    {
        Dialog.alert("To Do's Clicked");
    }
    return super.navigationClick(arg0, arg1);
}

private void initializeList()
{
    String itemOne = "Grocery";
    String itemTwo = "To Do's";
    _listElements.addElement(itemOne);
    _listElements.addElement(itemTwo);
    _listField.setSize(_listElements.size());
    _listField.setRowHeight(Display.getHeight()/6);
}

private class ListCallback implements ListFieldCallback 
{
    public void drawListRow(ListField list, Graphics g, int index, int y, int w) 
    {
        y = y +20;
        String text = (String)_listElements.elementAt(index); 
        g.drawText(text, (Display.getWidth() - getFont().getAdvance(text))/2, y, 0 , w); 
    } 
    public Object get(ListField list, int index) 
    {
        return _listElements.elementAt(index); 
    } 
    public int indexOfList(ListField list, String prefix, int string) 
    { 
        return _listElements.indexOf(prefix, string); 
    } 
    public int getPreferredWidth(ListField list) 
    { 
        return Display.getWidth(); 
    } 
}
public void fieldChanged(Field field, int context) {
    // TODO Auto-generated method stub

}

} 
```

# c# - 添加模型后，如何在不查询数据库的情况下从模型中获取主键？

> ID：13737649
> 
> 赞同：1
> 
> 时间：2012-12-06T05:45:39.990
> 
> 标签：c#, entity-framework-4, asp.net-mvc-4

*这都是可重构的，所以如果有更好的方法来处理整体情况，请告诉我。这话太罗嗦了，抱歉。*

* * *

我正在创建一个电影数据库，我有 3 个表`Movies`、`Genres`和`MovieToGenre`. 我已经创建了`Genre`表格，并且为了填充`MtG`表格，我试图将 a`genre_id`与 a相关联`movie_id`，我认为这是一对多的关系，所以它会有类似下面的内容

```
movie_id | genre_id
1    56
1    786
2    232
2    656 
```

但我的问题是，为了填充该表，我需要模型中`movie_id`的。`Movie`我假设一旦我将 ' 添加`Movie`到`Movies`表中，模型将追溯更新其`movie_id`属性，但情况似乎并非如此，因为`MovieToGenre`表中填充了`movie_id`' 等于 0，即默认值。该`Movies`表正在使用正确的`movie_id`，因此只需告诉我的`FillMovieToGenre`方法哪部电影有什么`movie_id`。

我正在使用的一般过程是以下循环：

1.  创建`Movie`实例，而不是设置`movie_id`，因为 MVC 自己选择一个

    一种。`movie = new Movie(data1, data2)`

2.  将`Movie`实例添加到表

    一种。 `db.Movies.Add(movie)`

3.  在 方法中使用最后一个`Movie`实例。`movie_id``FillMovieToGenreTable()`

    一种。`FillMtGTable(movie)`但是在这一点上，电影不包含非默认值`movie_id`，因此`MtG`表中填充了`movie_id = 0`，它应该在哪里`movie_id = 1231`等。

4.  转到 1。

**tl;dr 可以获得最近添加的模型的主键吗？似乎进行新查询不是一个好主意，因为我正在循环遍历我需要添加的所有电影，并且我认为新查询会减慢进程。**

`Movie`在课堂的相关部分编辑

```
public class Movie
{
    [Key]
    public int movie_ID { get; set; }

    [DisplayName("Title")]
    public string title { get; set; }
 }

public class Genre
{
    [DisplayName("Genre ID")]
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int genre_ID { get; set; }

    [DisplayName("Genre")]
    public string genre_string { get; set; }
}

public class MovieToGenre
{

[Key]
    public int movie_to_genre_ID { get; set; }

    public virtual int movie_ID { get; set; }

    public virtual int genre_ID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:04:42.120

在 EF 中保存更改后，换句话说，在运行后

```
db.Movies.Add(movie)
db.SaveChanges(); 
```

EF 应该自动为您提供填充的 ID

```
int movie_id=movie.movie_id; 
```

# php - 在 array_values 函数内循环

> ID：13737651
> 
> 赞同：0
> 
> 时间：2012-12-06T05:46:00.070
> 
> 标签：php, mysql, arrays, variables

我想遍历其中包含 $i 变量的数组的值，

我的数组代码如下所示，

```
foreach($fields_names as $k => $v) {
      $handle_data[] ='$rowdata[$i][$fields_names[\''.$v.'\']]';
}

for($i=0;$i<$number_rows_excel;$i++){

$sql.= "('".implode("','", array_values($handle_data))."'),". "<br/>";

        } 
```

当我回显 $sql 时，我会变成这样，

```
INSERT INTO eximport (`S.No`, `Patent#`, `Title`) VALUES ('$rowdata[$i][$fields_names['S.No']]','$rowdata[$i][$fields_names['Patent#']]','$rowdata[$i][$fields_names['Title']]') 
```

它应该像这样显示

```
INSERT INTO eximport (`S.No`, `Patent#`, `Title`) VALUES ('$rowdata[0][$fields_names['S.No']]','$rowdata[0][$fields_names['Patent#']]','$rowdata[0][$fields_names['Title']]') 
```

如何使用变量 $i 循环遍历数组值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:21:41.927

我使用了这段代码来帮助我插入行，为插入的每个值附加“，”

```
 foreach($val_ary as $new_data_string){
    $newArray[] = implode("','",$new_data_string);
        }

//Inserting data into the table     
        for($tr=0;$tr< $data->sheets[0]['numRows']-2;$tr++)
        {
         $sql ="INSERT INTO eximport($fieldnames)values('$newArray[$tr]')";
         mysql_query($sql) or die("Error in Query: " . mysql_error());  
         //$p1 = $db->insert_id;
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:30:12.340

我假设您不想将`$rowdata[]`部分写入查询，但是该数组条目的实际值？

所以，你应该像这样简单地嵌套你的循环。请记住，您正在循环每个字段，这意味着您不需要对数据进行任何内爆。我假设您的数据集在数组内，`$data`而 $field_names 只是一个字段名列表。：

```
$data = array(
   array("name" => "DataSet1", "value" => 56),
   array("name" => "DataSet2", "value" => 5)
);

$field_names = array("name","value");

$sql = "INSERT INTO table (";
$sql .= implode($fields_names,",");
$sql .= ")VALUES";

for($i=0; $i<count($data); $i++){
   $sql .= "(";
   foreach($fields_names as $k => $v) {
      $sql.= "'".$data[$i][$v]."',";

   }
   //remove trailing ","
   $sql = substr($sql,0,-1);
   $sql .= "),";
}
//remove trailing ","
$sql = substr($sql,0,-1); 
```

这将产生：

`INSERT INTO table (name,value)VALUES('DataSet1','56'),('DataSet2','5')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:49:54.560

尝试这个

```
$i=0;
foreach($fields_names as $k => $v) {
    $handle_data[] ='$rowdata['.$i.'][$fields_names[\''.$v.'\']]'; $i++;
} 
```

# autoit - 使用 AutoIt 自动化 LGE 工具

> ID：13737652
> 
> 赞同：1
> 
> 时间：2012-12-06T05:46:01.343
> 
> 标签：autoit

我想从 AutoIt 脚本加载[LGE 工具](http://www.lgtool.net/site/features.html)，然后转到“远程服务”选项卡。我正在使用这段代码：

```
$program = "C:\Program Files (x86)\LGE Tool\LGETool.exe"

If ProcessExists($program) = True Then
    MsgBox(0,"","works")
ElseIf ProcessExists($program) = False Then
    Run($program)
EndIf

WinActivate($program)

WinWaitActive("LGE Tool version 1.99")

Send("{^TAB}") 
```

该软件确实加载，但之后没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T17:00:39.843

您的发送语法不正确......它应该是：

```
Send("^{TAB}") 
```

我假设这`Control + TAB`在程序中有效；你提到的软件是专有的，需要特殊的驱动程序，没有先决条件，没有人可以真正测试解决方案，所以你必须成为测试点。

希望这有效！
亚历克斯

# javascript - 目的 ＃ has no method 'addEventListener' I have my canvas saved as an object but it won't let me add an eventListener because it creates this error: Object # has no method 'addEventListener' 问问题 问问题 2012-12-06T05:46:11.413 644 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have my canvas saved as an object but it won't let me add an eventListener because it creates this error: Object # has no method 'addEventListener' This is how i create the canvas: var i = 1; document.getElementById("G").innerHTML += '

<canvas id="layer'+i+'" class="c" style="z-index:'+i+';"></canvas>

'; temp = document.getElementById('layer'+i); objname = 'canvas'+i; canvas[objname] = new Object(); canvas[objname].ctx = temp.getContext("2d"); Then i do: canvas.canvas1.addEventListener("mousedown", fnc_test, false); Any ideas why this is not allowed, or where I am going wrong?? I think you meant canvas[objname] = temp; canvas[objname].ctx = temp.getContent("2d"); There is absolutely no reasoning for the new Object there... javascript 4 1 回答 1 This answer is useful 1 I think you meant canvas[objname] = temp; canvas[objname].ctx = temp.getContent("2d"); There is absolutely no reasoning for the new Object there... 于 2012-12-06T06:00:04.263 回答 Related 2 xslt - XSLFO 叠加图像 1 php - 致命错误：内存不足（分配 1947467776）（试图分配 65488 字节） 2 jquery - 添加多个div 2 python - 将多个列表合并到一个文本文件中 1 dns - CNAME dropping URL parameters? 3 python - 需要特定的限速数 twitter api python 1 ios - 无法重新加载集合视图 - null 1 ios - 从图像创建的导航栏按钮项后面的奇怪背景 1 php - jQuery .load 停止嵌入页面的视频/重新加载整个页面 1 iphone - 如果是一台苹果设备，则显示指向 iBook Store 的链接 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13737655
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript

I have my canvas saved as an object but it won't let me add an eventListener because it creates this error:

```
Object #<Object> has no method 'addEventListener' 
```

This is how i create the canvas:

```
 var i = 1;
    document.getElementById("G").innerHTML += '<canvas id="layer'+i+'" class="c" style="z-index:'+i+';"></canvas>'; 
    temp = document.getElementById('layer'+i);
    objname = 'canvas'+i;
    canvas[objname] = new Object();
    canvas[objname].ctx =  temp.getContext("2d"); 
```

Then i do:

```
canvas.canvas1.addEventListener("mousedown", fnc_test, false); 
```

Any ideas why this is not allowed, or where I am going wrong??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:00:04.263

I think you meant

```
canvas[objname] = temp;
canvas[objname].ctx = temp.getContent("2d"); 
```

There is absolutely no reasoning for the `new Object` there...

# sql-server-2008 - SQL中，查询时如何改变表中的值

> ID：13737656
> 
> 赞同：0
> 
> 时间：2012-12-06T05:46:19.540
> 
> 标签：sql-server-2008

我有一个表名 TableA 喜欢

```
Id |Student | Subject | 
=======================
1  | XY     | M       |
2  | YZ     | Ph      |
3  | DD     | CH      |
4  | HH     |  M      |
======================= 
```

在查询时，我想显示数学而不是 M，物理而不是 Ph 等等。我不想在表中更改，但在查询中，这在 sql server 中是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:48:10.893

用[例](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

```
select case subject 
                    when 'M' then 'Math' 
                    when 'Ph' then 'Physics' 
                    else subject end
from TableA 
```

# asp.net - IIS 性能

> ID：13737662
> 
> 赞同：2
> 
> 时间：2012-12-06T05:46:47.717
> 
> 标签：asp.net, sql-server, windows

我们有以下设置：

虚拟服务器，Intel Xeon X5650 @ 2.67Ghz（4 个处理器） 8GB RAM Windows server 2008 Standard 64bit Sql Server Express IIS 7.5

我们的数据库只有 200mb。我们正在运行一个 ASP.net 应用程序。我们最近遇到了一些性能问题，大约 200 个并发连接导致 100% 的 CPU 使用率（主要由 IIS 消耗）并使响应时间达到 20 秒左右！在对我们的代码进行一些调整后，我们能够在 1 分钟内从[loader.io](http://loader.io)运行1500 个并发用户的负载测试，最后我们的响应时间约为 5 秒，CPU 约为 95%，再次主要由 IIS 消耗，我们的内存使用量约为 4GB。然而，我们预计峰值将超过 1500 个，在短时间内达到约 4000 个用户。

我的问题如下：1）这是我们当前设置的正常性能吗？我们的网站在数据库上非常密集，我们正在使用实体框架。2) 升级到 Sql Web 版是否有任何好处，因为我们的数据库看起来如此之小？3) 你认为这种类型的设置可以处理 4000 个用户吗？4）关于我们可以做些什么来处理这个负载有什么建议吗？

我知道这有点主观，但非常感谢任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:52:29.390

> 这是我们当前设置的正常性能吗？

取决于你的代码。您是否对代码进行了概要分析以确保其中没有任何愚蠢的东西？

> 我们的网站在数据库上非常密集，我们正在使用实体框架。

再一次，你是否发现你在实体框架上花了很多时间？它很慢，但问题是“密集”是什么意思。这就是分析器的用途。

> 升级到 Sql Web 版本是否有任何好处，因为我们的数据库看起来如此之小？

救命，我的披萨来得太晚了。升级到更大的汽车会有帮助吗？你自己说你把时间花在 IIS 上，而不是 sql server 上。

> 你认为这种类型的设置可以处理 4000 个用户吗？

你觉得我的车够大吗？注意我没有告诉你我需要它做什么。不查看使用模式和您的代码 - 不知道。那说：与您今天购买的相比，服务器可悲。因此，这是一个无关紧要的问题 - 如果需要，只需升级即可。

> 关于我们可以做些什么来处理这个负载有什么建议吗？

负载测试+分析器，优化代码。获得更大的服务器。意识到我们没有水晶球来弄清楚你的代码有多好/坏/多愚蠢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T06:18:28.283

对于您当前的机器，我怀疑问题出在 IIS 本身，而是与您的应用程序设计和/或使用框架的方式有关。我个人最近才了解到，包括多次往返数据库的 IIS 请求可以在数百微秒内测量，而不是数百毫秒......单个锁定错误或不平衡队列可能会限制您的应用程序可扩展性，无论您的硬件如何规格 [ [https://twitter.com/michaelzino/status/454512110165184512]](https://twitter.com/michaelzino/status/454512110165184512%5d)。Entity Framework 以在第一次初始调用时根据数据库模式验证您的模型而闻名。我建议分析您的应用程序层，从数据访问层或内部数据库调用开始，然后向上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T17:58:02.397

我的经验是并发请求最关键的方面是服务器内存的数量以及您的代码对该内存的消耗。

随着物理内存的消耗，服务器开始从物理内存交换到虚拟内存，这会显着减慢处理速度并导致您描述的症状。

我会先将另外 8gb 的内存放入服务器。同时尝试优化您的代码，以便在请求期间处理更少的数据或使用更少的内存。此外，将 sql server 移动到单独的机器上，这样 iis 和 sql server 之间就不会在内存可用性方面存在竞争。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-26T16:56:57.727

这里出现的第一个问题是：您是否部署了项目的 RELEASE 或 DEBUG 编译的二进制文件？

升级到 WebEdition 在这里不会解决任何问题，因为版本的差异非常简单：WebEdition 只是在内部调度程序/等中受到限制。- 所以你会很好地使用标准版。

# oracle - Apache Ant 下 JDBC 的编译问题

> ID：13737664
> 
> 赞同：0
> 
> 时间：2012-12-06T05:46:47.617
> 
> 标签：oracle, jdbc, ant, oracle11g

我正在使用以下规范使用 Ant 进行 JDBC 编译。

```
<sql driver="oracle.jdbc.driver.OracleDriver"
        url="jdbc:oracle:thin:@10.184.133.133:1521:SUPP"
        userid="${UsernameB}"
        password="${PasswordB}"
        onerror="continue"
        delimitertype="row"
        delimiter="/"
        keepformat="yes"> 
```

这里的分隔符是斜杠 (/)。如果斜杠后有空格，则编译不正确。有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:57:56.827

我假设您的意思是，如果在分隔 SQL 语句的斜线之后有一个空格，它将无法编译？

我建议你添加

```
strictDelimiterMatching="false" 
```

这会强制识别分隔符不区分大小写（此处无关紧要）并忽略周围的空格。

# asp.net-mvc - 在 EF Code First Fluent 映射多对多方面需要帮助

> ID：13737667
> 
> 赞同：0
> 
> 时间：2012-12-06T05:46:53.907
> 
> 标签：asp.net-mvc, asp.net-mvc-4, ef-code-first, many-to-many, fluent-interface

我正在使用 EF Code First 开发 ASP.NET MVC4 应用程序。我在以下课程之间存在多对多关系。我在上下文类中使用 EF fluent api 定义了关系。但是我收到一个错误，因为它试图将值插入到我的一个涉及多对多关系的主表中。谁能帮我纠正我的问题。提前感谢您宝贵的时间。我正在使用存储库模式和 Ninject 的工作单元作为依赖注入。 **参与者班级**

```
public class Participant
    {
        [Key]
        public int Id { get; set; }
        [DisplayName("First Name")]
        [StringLength(50, ErrorMessage = "First name cannot be more than 50 characters")]
        [Required(ErrorMessage = "You must fill in first name")]
        public string FirstName { get; set; }

        [DisplayName("Last Name")]
        [StringLength(50, ErrorMessage = "Last name cannot be more than 50 characters")]
        [Required(ErrorMessage = "You must fill in last name")]
        public string LastName { get; set; }

        [Required(ErrorMessage = "You must indicate your full birthday")]
        [DisplayName("Birthday")]
        [DataType(DataType.DateTime)]
        public DateTime BirthDate { get; set; }

        [DisplayName("Gender")]
        [Required(ErrorMessage = "You must select gender")]
        public int Gender { get; set; }

        public string Address { get; set; }

        public int CountryId { get; set; }
        public Country Country { get; set; }

        [DisplayName("Zip code")]
        [StringLength(10, ErrorMessage = "Zip code cannot be more than 10 characters")]
        public string ZipCode { get; set; }

        public string Mobile { get; set; }

        public string PhotoUrl { get; set; }

        public int UserId { get; set; }
        public User User { get; set; }

        public virtual ICollection<Interest> Interests { get; set; }

    } 
```

**兴趣班**

```
public class Interest
    {
        public int Id { get; set; }
        public string InterestName { get; set; }
        public virtual ICollection<Participant> Participants { get; set; }
    } 
```

**数据上下文**

```
public class STNDataContext : DbContext
    {
        public DbSet<User> Users { get; set; }
        public DbSet<Participant> Participants { get; set; }
        public DbSet<Country> Countries { get; set; }
        public DbSet<Interest> Interests { get; set; }
        public DbSet<Role> Roles { get; set; }
        public DbSet<SecurityQuestion> SecurityQuestions { get; set; }

        public DbSet<Tour> Tours { get; set; }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Participant>().
                HasMany(p => p.Interests).
                WithMany(i => i.Participants).
                Map(
                    m =>
                    {
                        m.ToTable("ParticipantInterests");
                        m.MapLeftKey("ParticipantId");
                        m.MapRightKey("InterestId");
                    });
            modelBuilder.Entity<User>().HasRequired(u => u.Role);
            modelBuilder.Entity<Participant>().HasRequired(p => p.Country);
        }

        public virtual void Commit()
        {
            base.SaveChanges();
        }
    } 
```

**控制器代码**

```
public virtual ActionResult Register(StudentRegisterViewModel studentRegisterViewModel)
        {
            if (ModelState.IsValid)
            {
                if (_userService.IsUserExists(studentRegisterViewModel.Participant.User) == false)
                {
                    // Attempt to register the user

                    //WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                    //WebSecurity.Login(model.UserName, model.Password);
                    studentRegisterViewModel.Participant.User.Username = studentRegisterViewModel.Username;
                    studentRegisterViewModel.Participant.User.Email = studentRegisterViewModel.Email;
                    studentRegisterViewModel.Participant.User.DateCreated = DateTime.Now;
                    studentRegisterViewModel.Participant.User.Id = 3;
                    studentRegisterViewModel.Participant.User.IsApproved = false;
                    studentRegisterViewModel.Participant.User.RoleId = 2;
                    studentRegisterViewModel.Participant.CountryId = 1;
                    var participant = new Participant
                    {
                        Id = studentRegisterViewModel.Participant.Id,
                        FirstName = studentRegisterViewModel.Participant.FirstName,
                        LastName = studentRegisterViewModel.Participant.LastName,
                        Interests = new Collection<Interest>()
                    };
                    var interests = new List<Interest>();
                    foreach (var interestItem in studentRegisterViewModel.SelectedInterests)
                    {
                        var interest = new Interest { Id = interestItem, Participants = new Collection<Participant>() };
                        interest.Participants.Add(participant);
                        interests.Add(interest);
                    }
                    studentRegisterViewModel.Participant.Interests = interests;
                    _participantService.CreatParticipant(studentRegisterViewModel.Participant);
                    //_userService.CreatUser(studentRegisterViewModel.Participant.User);
                    //TODO: Need to check if do we need to register the user and get him signed-in. If yes signing in implementation goes here.
                    var user = _userService.GetUser(studentRegisterViewModel.Participant.User.Username);
                    //Session["User"] = user;
                    //FormsAuthentication.SetAuthCookie(user.Username, false);
                    //Growl("Welcome", "Thanks for registering and welcome to Truck Tracker.");
                    //return RedirectToAction("Index", "Home");
                }
            }
            //return RedirectToAction("Index", "Home");
            // If we got this far, something failed, redisplay form
            studentRegisterViewModel.Gender =
                Enum.GetNames(typeof(Gender)).Select(
                    x => new KeyValuePair<string, string>(x, x.ToString(CultureInfo.InvariantCulture)));
            studentRegisterViewModel.Interests = _interestService.GetAllInterests();
            return View(studentRegisterViewModel);
        } 
```

理想情况下，它应该将 Participant 插入 Participants 表和 ParticipantInterests 多对多表中的 Participant Interests。但它给出了以下错误

{"无法将值 NULL 插入到列 'InterestName'、表 'StudyTourNetworkDB.dbo.Interests'；列不允许空值。INSERT 失败。\r\n语句已终止。"}

它试图插入不应该发生的兴趣表。

参与者 ParticipantInterests 兴趣 Id Id Id FirstName ParticipantId InterestName LastName InterestId

数据库中的表是这样的。兴趣表有一组固定的记录（学习、工作、其他等），这些记录显示在“感兴趣”下拉列表中。注册参与者可以选择多个感兴趣的选项，当他点击注册按钮时，参与者记录将保存在参与者表中，并在参与者兴趣表中选择兴趣。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:12:12.537

前几天我也在搞同样的事情。很难弄清楚，但这是我开始工作的多对多的一个非常基本的例子：

```
namespace Project.Models
{
    public class Affiliate
    {
        public Affiliate()
        {
            Merchants = new HashSet<Merchant>();
        }
        public int Id { get; set; }
        public ICollection<Merchant> Merchants { get; set; }
    }
}

namespace Project.Models
{
    public class Merchant
    {
        public Merchant()
        {
            Affiliates = new HashSet<Affiliate>();
        }
        public int Id { get; set; }
        public ICollection<Affiliate> Affiliates{ get; set; }
    }
} 
```

在 DbContext 中我这样做了：

```
 modelBuilder.Entity<Merchant>().
              HasMany(c => c.Affiliates).
              WithMany(p => p.Merchants).
              Map(
               m =>
               {
                   m.MapLeftKey("MerchantId");
                   m.MapRightKey("AffiliateId");
                   m.ToTable("MerchantAffiliates");
               }); 
```

***更新***

我试图了解您要完成的工作。看起来像这样：

参与者可能对许多事情感兴趣。多个参与者可能对同一件事感兴趣。如果这是事实，我会考虑更改模型，以便参与者有一个兴趣列表，但在我看来，兴趣表不需要参与者列表。如果你想检索所有对徒步旅行感兴趣的参与者，你可以这样做：

```
Context.Participants.ToList().Where(x => x.Interest.Name == "hiking"); 
```

说得通？

# android - 如何创建虚拟 Web 服务进行测试？

> ID：13737671
> 
> 赞同：0
> 
> 时间：2012-12-06T05:47:14.183
> 
> 标签：android, web-services

我是安卓开发者。

到目前为止，我需要使用 android（即 XML 或 JSON 格式）测试散射数据的 Web 服务，我创建了许多静态 Web 服务并托管在服务器上。

> 但是，这个任务非常耗时。
> 
> **是否有任何网站可以提供一种使用 URL 放置和访问虚拟数据的方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:03:29.063

有许多可用的解决方案，例如

1.  [http://maqueapp.com/](http://maqueapp.com/)
2.  [http://www.sinatrarb.com/](http://www.sinatrarb.com/)（需要Ruby新手知识）
3.  [http://services.aonaware.com/DictService/DictService.asmx?op=Define](http://services.aonaware.com/DictService/DictService.asmx?op=Define)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:15:13.823

**您可以使用Wampmanager** [http://www.wampserver.com/en/](http://www.wampserver.com/en/)在您的 PC 中为您的测试目的创建一个虚拟 webservice(loca) 。

您可以在其中创建您的虚拟服务，如果您想让它成为全球性的，您可以轻松地从中进行转换。

您将获得有关 wamp 以及如何使用它的清晰教程..

[教程-如何连接-android-with-php-mysql](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T06:26:07.677

我的 2 美分：如果测试数据有限，我使用 Dropbox 云存储。JSON（或 XML）文件被上传到 Public 文件夹，这些文件的 Public 链接用于代替特定 Web 服务调用的 URL。

您可以创建一个提供 Web 服务 URL 的适配器，并且可以在测试期间将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T11:45:31.490

我发现[Firebase](https://www.firebase.com/)是创建托管网络服务的最快方式。

它允许从 UI 导入 json 文件或创建自定义节点结构。

免费版本不是生产级的，但可以作为测试的绝佳替代品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T05:53:40.630

我认为您以错误的方式使用它，因为我在我的应用程序中使用了 JSON，我发现它比其他应用程序更快。可能是您的互联网连接速度很慢。这就是你发现 JSON 的原因，这个过程很慢。

# android - Android 应用程序运行时音量控制锁定

> ID：13737672
> 
> 赞同：0
> 
> 时间：2012-12-06T05:47:16.150
> 
> 标签：android, controls, volume

似乎有很多帖子使用应用程序的**音量控制**。

我想要做的是在特定应用程序运行时**锁定（禁用）音量控制。**

例如，如果应用程序触发了**警报**，（处于警报状态）我不希望任何人将**音量调为零**。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:54:59.430

只需在`ALARM`流中播放即可，它会为您提供预设的闹钟音量并使用 拦截音量按钮`onKey`。

```
MediaPlayer mp = new MediaPlayer();
mp.setAudioStreamType(AudioManager.STREAM_ALARM); 
```

# raphael - 如何拖动设置获取路径rect

> ID：13737674
> 
> 赞同：1
> 
> 时间：2012-12-06T05:47:21.190
> 
> 标签：raphael

我创建了一个图像，我想整体拖动这个图像，以及如何做，希望有人能帮助我，谢谢

```
 var paper=Raphael("canvas",1000,1000);
            var draggableset = paper.set();

            var rect3042 = paper.rect(358.57144, 655.64789, 28.571428, 234.28575);
            rect3042.attr({id: 'rect3042',x: '358.57144',y: '655.64789' ,fill: '#ff0000',display: 'inline','stroke-width': '0','stroke-opacity': '1'}).data('id', 'rect3042');
            var path3044 = paper.path("m -48.57143,752.36218 a 57.142857,62.857143 0 1 1 -114.28571,0 57.142857,62.857143 0 1 1 114.28571,0 z");
            path3044.attr({id: 'path3044', fill: '#ff0000',display: 'inline','stroke-width': '0','stroke-opacity': '1'});
            path3044.transform("m1,0,0,-1,480.57147,1658.5815").data('id', 'path3044');
            var path3153 = paper.path("m -1051.4286,703.79077 a 58.57143,57.142857 0 1 1 -117.1428,0 58.57143,57.142857 0 1 1 117.1428,0 z");
            path3153.attr({id: 'path3153', fill: '315.00002766003-#ffffff:0-#ffffff:100','fill-opacity': '1',"fill-opacity": '1','stroke-width': '0','stroke-opacity': '1'});
            path3153.transform("m-0.64362098,-0.3480627,0.39244069,-0.72568265,-621.47254,1020.1699").data('id', 'path3153');

            draggableset.push(rect3042);
            draggableset.push(path3044);
            draggableset.push(path3153);

            var start = function () {
                draggableset.oBB = draggableset.getBBox();
            },
            move = function (dx, dy) {
                var bb = draggableset.getBBox();
                draggableset.translate(draggableset.oBB.x - bb.x + dx, draggableset.oBB.y - bb.y + dy);
            },
            up = function () {

            };

            draggableset.drag(move, start, up); 
```

可以拖拽，但不能整体拖拽

# node.js - Node.js 中奇怪的继承

> ID：13737677
> 
> 赞同：1
> 
> 时间：2012-12-06T05:47:30.070
> 
> 标签：node.js

我一直在研究一些 Node.js 模块，希望能学到一些我在创建具有类似功能的模块时可能会错过的东西。然后我从[Hound](https://github.com/beefsack/node-hound)发现了这段代码：

```
function Hound() {
    //why this?
    events.EventEmitter.call(this)
}

//ok, so inheriting the EventEmitter
util.inherits(Hound, events.EventEmitter); 
```

我知道`util.inherits()`Node.js 中的函数创建了一个新的 Parent 实例作为子构造函数的原型，[如文档中所述](http://nodejs.org/api/util.html#util_util_inherits_constructor_superconstructor)：

> 构造函数的原型将被设置为从 superConstructor 创建的新对象。

`EventEmitter`那么如果我们的构造函数是通过继承`util.inherits()`的，那么构造函数中的代码是干什么用的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:51:47.927

它只是让你的`Hound`班级成为一个`EventEmitter`对象。

它为类提供了[EventEmitter 实例方法](http://nodejs.org/api/events.html)。

例如，`houndInstance.emit('something')`

正在监听这些事件的其他对象然后可以响应它们。

* * *

根据您的评论：

```
// constructor
function Hound() {

    // equivalent of calling a "super" or "parent" constructor
    SomeClass.call(this);
} 
```

在 JavaScript 中，`.call(context)`是一种在特定上下文中调用函数的方法。在上面的示例中，我们只是调用`SomeClass`构造函数并将`this`（`Hound`本示例中的类）作为上下文传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:08:07.450

从您的评论中：

> 但是 util.inherits() 不是已经涵盖了吗？还是我错过了什么？

您缺少的是`util.inherits()`仅继承父对象。它没有设置构造函数来自动调用父对象的构造函数。在大多数情况下，这已经足够了，因为大多数对象在它们的构造函数中并没有做太多的初始化。

但`events.EventEmitter`显然在构造函数中进行了一些初始化，这些初始化具有一些重要的副作用。由于原型继承不会自动调用父类的构造函数，在这种情况下您需要手动调用它。因此这`events.EventEmitter.call(this)`条线。

* * *

请注意，另一种方法是使用总是调用父构造函数的模块模式。这是因为模块模式本身不是继承，而是通过滥用 mixin/decorator 模式来模拟继承——它从父构造函数创建一个对象并手动为其添加属性。很多人不喜欢模块模式，因为它重复了函数和属性——因此他们认为它是在浪费内存。此外，这不是正确的继承，因此会破坏`instanceof`.

# php - 使用 PHP 通过 cURL 获取 Gmail 邮件

> ID：13737680
> 
> 赞同：1
> 
> 时间：2012-12-06T05:47:48.647
> 
> 标签：php, curl, gmail, imap, inbox

有大量有关登录 Gmail 和显示收件箱以及获取联系人等的信息，但我无法弄清楚如何将电子邮件本身放入变量中，以便我可以在 PHP 中使用它来做一些事情。

这是我所拥有的：

```
function inbox($username, $password){ 
    $url = "https://mail.google.com/mail/feed/atom"; 
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_USERPWD, $username . ":" . $password);
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($curl, CURLOPT_ENCODING, "");
    $curlData = curl_exec($curl);
    curl_close($curl);
    return $curlData;
}
//calling the function
$em = "email@gmail.com";
$pw = "pass";
$feed = inbox($em, $pw);
    $x = new SimpleXmlElement($feed);
    echo "<ul>";
        foreach($x->entry as $msg){
            //extracting the link to the message from xml
            $href = $msg->link->attributes()->href;
            //create a link to the message and display title, summary    
            echo "<li><a href=\"".$href."\">".$msg->title."</a><br />".$msg->summary."</li>";
        }
    echo "</ul>"; 
```

现在，当我单击刚刚创建的链接时，它只会在 gmail 中打开邮件。我想以字符串/变量访问消息的 html。我尝试过各种各样的事情。我已经尝试将消息链接转发到另一个页面以在 curl 中打开，但谷歌没有向我显示消息，而是发送了一些带有另一个消息链接的 html。如果在浏览器中再次单击该链接，则会在 gmail 中打开，但如果我第三次尝试卷曲到此链接，它会显示一个空白页面。

关键是，我的工作服务器没有启用 imap/pop，而 cURL 是我所知道的最后一个可以实现这一点的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:42:48.113

我最终远程使用了 imap，然后将其卷曲回有问题的服务器。我已经确定 gmail 不允许通过 cURL 发送消息，这是谷歌的事情之一，比如他们不允许帧等

# python - 限制并发greenlets的速率

> ID：13737686
> 
> 赞同：2
> 
> 时间：2012-12-06T05:48:28.010
> 
> 标签：python, concurrency, gevent, rate

为了实现 greenlet 节流，我曾经`gevent.queue.Queue`实现一个令牌桶。
将模式变成函数装饰器：

```
from functools import wraps
from timeit import default_timer
import gevent
from gevent.queue import Queue

def gevent_throttle(calls_per_sec=0):
    """Decorates a Greenlet function for throttling."""
    interval = 1\. / calls_per_sec if calls_per_sec else 0
    def decorate(func):
        tq = Queue(1)
        tq.put(0.)
        @wraps(func)
        def throttled_func(*args, **kwargs):
            if calls_per_sec:
                last, current = tq.get(), default_timer()
                elapsed = current - last
                if elapsed < interval:
                    gevent.sleep(interval - elapsed)
                tq.put_nowait(default_timer())
            return func(*args, **kwargs)
        return throttled_func
    return decorate 
```

例子：

```
import requests
from gevent.pool import Pool

pool = Pool()

@gevent_throttle(10)
def worker(address):
    """Geocodes an address against Google Maps."""
    print address
    url='http://maps.googleapis.com/maps/api/geocode/json'
    params = dict(address=address, sensor='false')
    json = requests.get(url, params=params).json
    return json

jobs = pool.imap(worker, 'NYC LA SF Chicago Boston Austin Portland'.split()) 
```

一个明显的缺点是工作人员以无序的方式从队列中抓取任务。然而，我想，大多数用例不需要在 worker greenlets 之间有任何特定的顺序。

您还看到其他缺点吗？有替代方案吗？

# mysql - Shell 脚本 if 条件

> ID：13737687
> 
> 赞同：0
> 
> 时间：2012-12-06T05:48:28.790
> 
> 标签：mysql, linux, shell

我正在编写一个运行以下命令的脚本

```
mysql -u root -e "show databases" 
```

这将显示一个数据库列表。

如果此表不包含名为“ **userdb** ”的数据库，则应执行以下操作 -

```
if [ ... ]; then
 echo "error"
 exit
fi 
```

我在**`if [ ... ]`**条件下写什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:48:44.860

您可以检查`grep`是否列出了表名。`grep -q`不会向控制台打印任何内容，但会根据结果设置退出状态（退出状态将通过 来检查`if`）。

```
if ! mysql -u root -e 'show databases' | grep -q '^userdb$' ; then
    echo error
    exit
fi 
```

关于正则表达式： ' `^`' 匹配行首， ' ' 匹配行尾（避免数据库名称包含, eg`$`的误报）`userdb``userdb2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:59:26.093

试试这个：

```
usedb=DBname    
check=`mysql -u root -e "show databases" | grep $userdb`
if [ "$check" != "$userdb" ]; then
 echo "error"
exit
fi 
```

但如果与数据库名称的行包含任何其他信息，则会出现错误。尝试解决它`regexp`

# python - Python类宠物程序

> ID：13737689
> 
> 赞同：1
> 
> 时间：2012-12-06T05:48:33.267
> 
> 标签：python, class

我正在学校做 Python Programming 157 的作业。我需要编写一个名为 Pet 的类，它具有以下数据属性：

```
__name (for the name of the pet)
__animal_type (Examples: "Cat", "Dog", and "Hamster" )
__age (for the pet's age)
__height (for the pet's height) 
```

它需要包括

```
set_name
get_name 
```

我已经尝试了 4 次，但似乎无法做到正确......有什么开始的线索吗？

```
# The Pet Program.

class PetProgram:
  # The __init__ method accepts an argument for the program
  # and adds it to the __pets attribute.
  def __init__(self, pet):
      self.__pets = pet
  # The name will add to the pet attribute.
  def name(self, name):
      self.__pets = name
  def age(self, age):
      self.__pets = age
  def animal(self, animal):
      self.__pets = animal
  def height(self, height):
      self.__pets = height
  # The pets_return will show you the list.
  def pets_return(self):
      return self.__pets

# The Pet Program.
import petsprogram
def main():
  # Enter the name.
  petname = input('What is the name of the pet: ')
  print 'This will be added to the record.'
  savings.name(petname)
  # Display the list.
  print petsprogram
main() 
```

以上是我最近的尝试......没有这样的运气......有什么帮助吗？提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:02:07.393

A`class`不是程序，A`class`应该建模一个东西，比如宠物。因此，首先，您应该适当地命名您的类。

```
class Pet(object): # Pet derives from the object class, always do this 
```

现在我想你想要一个构造函数，它接受宠物的名字，也许还有宠物的类型，所以我们将定义它。

```
 def __init__(self, pet_name, pet_type):
        self.pet_name = pet_name
        self.pet_type = pet_type 
```

您还需要一个`get`and`set`作为名称：

```
 def get_name(self):
        return self.pet_name

    def set_name(self, pet_name):
        self.pet_name = pet_name 
```

要使用此类，请将其实例化为该类的实例：

```
 puppy = Pet('Rover', 'Dog')
    puppy.get_name()  # prints Rover 
```

我希望这足以让你继续前进。您应该阅读评论中提到的 Python 中的 OOP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:04:18.343

首先，您为什么使用“私人” `__attributes`？这似乎没有根据。

其次，您将所有属性分配给同一个实例变量：

```
self.__pets = pet
self.__pets = name
self.__pets = age
self.__pets = animal
self.__pets = height 
```

你应该使用类似的东西

```
def __init__(self, pet, name, age, animal, height):
    self.pet = pet
    self.name = name
    self.age = age
    self.animal = animal
    self.height = height 
```

在进一步冒险之前，您绝对应该阅读有关[课程的教程。](http://docs.python.org/2/tutorial/classes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T18:58:28.503

这样的东西看起来怎么样？

```
>>> class Pets:
def set_Name(self,name):
    self.name=name
def get_Name(self):
    return self.name
def set_Atype(self,atype):
    self.atype=atype
def get_Atype(self):
    return self.atype
def set_Age(self,age):
    self.age=age
def get_Age(self):
    return self.age
def set_Height(self,height):
    self.height=height
def get_Height(self):
    return self.height 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:05:21.663

我不确定 __pets 绑定在哪里发挥作用。您最初的描述没有说明这一点。我不会期望一个代表宠物的对象，例如一个单一的宠物，具有一个宠物列表的属性。我希望是这样的：

```
class PetProgram:
    def __init__(self, name ='', age=0, type='Unknown', height=0):
        self.__name = name
        self.__age = age
        self.__animal_type = type
        self.__height = height

     def get_name(self):
        return self.__name

     def set_name(self, name):
        self.__name = name 
```

我也不确定导入宠物程序的来源......这可能是你应该称之为模块的东西，然后教练提供了你应该运行来测试它的东西吗？

（另外，所有的 __under_scores 是怎么回事？这是你的老师鼓励的吗？）

# python - Python 3.2 中的递归

> ID：13737692
> 
> 赞同：3
> 
> 时间：2012-12-06T05:48:42.047
> 
> 标签：python, list, recursion, python-3.x

我正试图围绕递归展开我的头脑，并发布了一个工作算法来生成给定列表的所有子集。

```
def genSubsets(L):
    res = []
    if len(L) == 0:
        return [[]]
    smaller = genSubsets(L[:-1])
    extra = L[-1:]
    new = []
    for i in smaller:
        new.append(i+extra)
    return smaller + new 
```

假设我的列表是 L = [0,1]，正确的输出是 [[],[0],[1],[0,1]]

使用打印语句，我缩小了 genSubsets 在进入 for 循环之前被调用两次的范围。我得到的就这么多。

但是为什么第一个 for 循环将 L 的值初始化为 [0] 而第二个 for 循环使用 [0,1] 呢？包含 for 循环的递归调用究竟是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T06:45:42.847

我认为使用更长的源列表实际上更容易可视化。如果您使用`[0, 1, 2]`，您会看到递归调用反复切断列表中的最后一项。也就是说，recusion 会构建一堆递归调用，如下所示：

```
genSubsets([0,1,2])
    genSubsets([0,1])
        genSubsets([0])
            genSubsets([]) 
```

在这一点上，它达到了递归算法的“基本情况”。对于此函数，基本情况是作为参数给出的列表为空时。命中基本情况意味着它返回一个包含空列表的列表`[[]]`。以下是堆栈返回时的样子：

```
genSubsets([0,1,2])
    genSubsets([0,1])
        genSubsets([0]) <- gets [[]] returned to it 
```

这样返回值就会回到上一级，并保存在`smaller`变量中。变量`extra`被分配为一个切片，只包括列表的最后一项，在这种情况下是整个内容，`[0]`.

现在，循环遍历 中的值`smaller`，并将它们的连接与`extra`to相加`new`。由于`smaller`（空列表）中只有一个值，因此`new`最终也只有一个值，`[]+[0]`即`[0]`. 我认为这是您在某个时候打印出来的值。

`smaller`然后最后一条语句返回and的串联`new`，所以返回值为`[[],[0]]`。堆栈的另一个视图：

```
genSubsets([0,1,2])
    genSubsets([0,1]) <- gets [[],[0]] returned to it 
```

返回值被`smaller`再次分配给`extra`is `[1]`，并且循环再次发生。这一次，`new`得到两个值，`[1]`和`[0,1]`。它们再次连接到末尾，`smaller`返回值为`[[],[0],[1],[0,1]]`. 最后一个堆栈视图：

```
genSubsets([0,1,2]) <- gets [[],[0],[1],[0,1]] returned to it 
```

同样的事情再次发生，这次`2`在到目前为止找到的每个项目的末尾添加了 s。`new`结束为`[[2],[0,2],[1,2],[0,1,2]]`.

最终返回值为`[[],[0],[1],[0,1],[2],[0,2],[1,2],[0,1,2]]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:38:29.157

我不喜欢尝试可视化递归函数的整个调用图以了解它们的作用。

我相信有一个更*简单*的方法：

**进入递归函数做*正确事情的***童话**世界™。**

 **假设`genSubsets(L)`有效：

```
# This computes the powerset of the list L minus the last element
smaller = genSubsets(L[:-1]) 
```

因为这神奇地起作用了，所以唯一缺少的条目是那些包含最后一个元素的条目。

这个片段构建了所有那些缺失的子集：

```
new = []
for i in smaller:
    new.append(i+extra) 
```

现在我们有那些包含最后一个元素的`new`子集，我们有那些*不*包含最后一个元素的子集`smaller`。

因此，我们现在必须拥有所有子集，因此我们可以返回`new + smaller`。

唯一剩下的就是确保递归停止的**基本情况。**因为空集（或本例中的列表）是每个幂集的一个元素，我们可以使用它来停止递归：请求空集的幂集是包含空集的集合。所以我们的基本情况是正确的。由于每个递归步骤都会从列表中删除一个元素，因此*必须*在某个时间遇到基本情况。

因此，代码确实会产生幂集。

*注意*：这背后的原理是归纳法。如果某事物适用于某个已知的*n [0]*，并且我们可以证明： 适用于的算法`n`意味着它适用于`n+1`，因此它必须适用于所有*n ≥ n [0]*。**

# android - 在 android 的选项卡中启动问题

> ID：13737694
> 
> 赞同：1
> 
> 时间：2012-12-06T05:48:46.577
> 
> 标签：android, tabs, android-tabhost, android-tabs

在我的应用程序中，我有两个选项卡，tab1 和 tab2。默认情况下 tab1 打开。如果我点击 tab2 然后按主页按钮。然后重启设备。如果我再次启动应用程序 tab2 正在打开。它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:41:22.237

您可以添加一个静态布尔值，当您调用应用程序时，您`onDestroy()`将布尔值设置为 false。在`onResume()`你必须检查布尔值是真还是假，当它是假时你导航到第一页。

另请参阅[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)

# jquery - 带有自定义标头的 CORS PUT/DELETE，无需预检请求

> ID：13737701
> 
> 赞同：0
> 
> 时间：2012-12-06T05:49:34.403
> 
> 标签：jquery, http, cors

有没有办法使用 jquery 来做到这一点而没有多余的 OPTIONS 请求？

PS 顺便问一下，这样的工作流程的伟大使命是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:21:13.683

所以，现在很明显 OPTIONS 可能很有用，但有点奇怪（在我看来）。

所有**PUT**和**DELETE**查询，以及带有修改的标头的查询都是此类请求的*预检*。伟大的任务是检查资源可用性以提供某种操作。

例如，让我们考虑对带有 ABUBAKA 标头的[http://a.com/users/100500资源的](http://a.com/users/100500)**PUT**操作。Preflight OPTIONS 请求将包含：

*   访问控制请求方法：PUT
*   访问控制请求标头：ABUBAKA

使用此信息，您可以决定如何处理此类请求。例如，这样的资源可以同时支持 PUT 和 DELETE 操作，并且使用 ABUBAKA 标头是可以的。在这种情况下，响应至少应包含此类标头

*   访问控制允许方法：PUT、DELETE
*   访问控制允许标头：ABUBAKA

所以，OPTIONS 是某种策略方法。

# sparql - 将空白节点从 stardog 映射到 pubby

> ID：13737703
> 
> 赞同：3
> 
> 时间：2012-12-06T05:49:35.637
> 
> 标签：sparql, rdf, triplestore, stardog, blank-nodes

所以我有这个加载到[Stardog](http://stardog.com/)上的 .rdf，然后我使用[Pubby](http://wifo5-03.informatik.uni-mannheim.de/pubby/)在 Jetty 上运行，以浏览三重商店。

在我的 rdf 文件中，我有几个空白节点，stardog 为它们提供了一个空白节点标识符。所以这是 rdf 文件的一个片段。

```
<kbp:ORG rdf:about="http://somehostname/resource/res1">
<kbp:canonical_mention>
<rdf:Description>
    <kbp:mentionStart rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">1234</kbp:mentionStart>
    <kbp:mentionEnd rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">1239</kbp:mentionEnd>
    </rdf:Description>
</kbp:canonical_mention> 
```

所以基本上我有一些资源“res1”，它具有指向空白节点的链接，该节点具有提及开始和提及结束偏移值。

Pubby 的 config.ttl 文件片段如下所示。

```
conf:dataset [
    # SPARQL endpoint URL of the dataset
conf:sparqlEndpoint <http://localhost:5822/xxx/query>;
    #conf:sparqlEndpoint <http://localhost:5822/foaf/query>;
    # Default graph name to query (not necessary for most endpoints)
    conf:sparqlDefaultGraph <http://dbpedia.org>;
    # Common URI prefix of all resource URIs in the SPARQL dataset
conf:datasetBase <http://somehostname/>;
...
... 
```

所以关键是 datasetBase 将 URI 映射到 URL。

当我尝试映射它时，有一个“匿名节点”链接，但点击后，什么都没有显示。我的猜测是，这是因为空白节点有一些像 _:bnode1234 这样的标识符，它没有被 Pubby 映射。

我想知道是否有人知道如何映射这些空白节点。

（注意：如果我将这个 rdf 作为静态 rdf 文件直接加载到 Pubby 上，它可以正常工作。但是当我使用 stardog 作为三重存储时，这个映射就不能正常工作了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:52:33.290

它可能在 Pubby 中有效，因为它们保持 BNode id 可用；通常，SPARQL 规范不保证或要求 BNode 标识符是持久的。也就是说，您可以多次发出相同的查询，这会返回相同的结果集（包括 bnodes），并且每次的标识符都可以不同。同样，查询中的 bnode 标识符被视为变量，这并不意味着您正在查询该特定 bnode。

因此，Pubby 可能会有所帮助，并且可以使这项工作发挥作用，这就是为什么直接使用它而不是使用第三方数据库的原因。

Stardog 确实支持将 bnode 标识符放在尖括号中的 Jena/ARQ 技巧，也就是说，`<_:bnode1234>`这意味着标识符为“bnode1234”的 bnode。如果您可以让 Pubby 在查询 bnode 时使用该语法，它可能会起作用。

但总的来说，我认为这是你必须与 Pubby 开发人员讨论的问题。

# php - MySQL 动态数据中的撇号

> ID：13737704
> 
> 赞同：0
> 
> 时间：2012-12-06T05:49:36.350
> 
> 标签：php, mysql, mysql-real-escape-string, htmlspecialchars

我有一个简单的需要，即允许用户在各个字段中输入撇号，这些字段将通过 PHP 保存到 MySQL 表中。当用户查看此信息时，我希望它在没有 / 的情况下被回显。处理此问题的最佳方法是什么。以下是我的想法：

*   回显内容时设置stripslashes
*   来回将撇号转换为“'”

我还在发布的数据上运行 mysql_real_escape_string 和 htmlspecialchars。有没有标准化的处理方式？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:00:20.737

您可以使用[addslashes()](http://php.net/manual/en/function.addslashes.php)输入撇号，正如您已经说过的使用[stripslashes()](http://php.net/manual/en/function.stripslashes.php)来回显。`addslashes()`仅当您想为使用的更多转义函数添加撇号时才使用`mysql_real_escape_string`

# c# - C# HttpWebResponse GetResponse 抛出 404 错误，因为它需要重定向

> ID：13737710
> 
> 赞同：1
> 
> 时间：2012-12-06T05:50:01.533
> 
> 标签：c#, httpwebrequest, http-status-code-404, webrequest

我目前正在设计一个从文本文件中读取 ID 并将其添加到 URL 地址的应用程序......所以 urlhere 实际上是 www.website.com/ID。唯一的问题是网站从 www.website.com/ID 重定向到 www.website.com/username。有没有办法告诉应用程序等待重定向发生？我想从 www.website.com/username 的来源获取信息。不幸的是，我不能，因为我的应用程序当前正在尝试从 www.website.com/ID 获取 GetResponse() 并抛出 404 未找到的异常错误。不幸的是，我无法获得用户名，因此无法访问 www.website.com/username。任何建议都会有所帮助。

```
HttpWebRequest request = (HttpWebRequest)
                WebRequest.Create(urlhere);
            request.UserAgent = "Mozilla/16.02 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 2.0.50727; .NET4.0C; .NET4.0E)";
            request.AllowAutoRedirect = true;
            // execute the request

            HttpWebResponse response = (HttpWebResponse)
                    request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:55:53.160

这个问题之前已经回答过了。据我了解，您需要重定向的响应。这是一个答案： [如何获得重定向响应](https://stackoverflow.com/questions/3836784/how-to-get-a-redirection-response)

# iphone - 如何在 iPhone 上实现 twitter 登录功能

> ID：13737714
> 
> 赞同：2
> 
> 时间：2012-12-06T05:50:20.720
> 
> 标签：iphone, ios, twitter, twitter-oauth

我已经尝试过使用 Facebook 登录功能。在登录期间，我获得了用户令牌并使用此令牌可以识别用户。所以，Facebook 对我来说没问题。

* * *

1) 如何使用 Twitter 实现登录功能？我会在 Facebook 上获得类似用户令牌的东西吗？

据我所知，要使用 twitter API 用户应该在 iPhone 的设置中登录 twitter。即使他尚未登录 iPhone 的设置，我是否可以实施任何使用户能够登录的操作？

2）用户登录后，我希望他邀请他的推特朋友加入我的应用程序。有可能吗？以及以什么方式？

我将不胜感激一些代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:15:43.457

请检查下面的链接，每个步骤都清楚地由 Twitter 本身告知。

[https://dev.twitter.com/docs/ios](https://dev.twitter.com/docs/ios)

如果您仍有问题，请点击链接 [http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5](http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5)

这包含代码和所有步骤！

希望它会帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:17:07.117

请通过此[链接](https://github.com/twitter/twitter-kit-ios/wiki/Compose-Tweets) ，它将提供逐步详细信息。

添加

```
 #import <Twitter/Twitter.h> 
```

然后，您可以使用以下方式发布推文：

```
 -(IBAction)tweetTapped:(id)sender { 
{
    if ([TWTweetComposeViewController canSendTweet])
    {
        TWTweetComposeViewController *tweetSheet = 
            [[TWTweetComposeViewController alloc] init];
        [tweetSheet setInitialText:
            @"Tweeting from iOS 5 By Tutorials! :)"];
        [self presentModalViewController:tweetSheet animated:YES];
    }
    else
    {
        UIAlertView *alertView = [[UIAlertView alloc] 
            initWithTitle:@"Sorry"                                                             
            message:@"You can't send a tweet right now, make sure  
                your device has an internet connection and you have 
                at least one Twitter account setup"                                                          
            delegate:self                                              
            cancelButtonTitle:@"OK"                                                   
            otherButtonTitles:nil];
        [alertView show];
    }
} 
```

# sql - Oracle - 随机插入生成的英文单词作为虚拟数据

> ID：13737715
> 
> 赞同：3
> 
> 时间：2012-12-06T05:50:21.487
> 
> 标签：sql, oracle, random

我有一个可以存储数百万本书的 Oracle 数据库。虽然我没有数据！

我如何`insert`在 oracle 中获得大约一百万个虚拟书名？

有没有让你生成`random`英文单词的功能？它们是英语有效词非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:17:39.033

这是一个插入随机字符串的存储过程。但问题是，生成的字符串可能不是英文单词——我们可以接受；）

** PL/SQL ** - 请重新检查语法

```
create table allwords(words varchar(15));
-- insert all the English words that you could get from a **SCRABBLE** like website. :)

create table blabla( id int, name varchar(15) ) storage ( freelists 100 );

declare
  idNumber int;
  strName varchar(15);
  begin
    for i in 1 .. 100
     loop
       idNumber := dbms_random.random;
       strName := SELECT words FROM table ORDER BY dbms_random.value limit 1; 
       insert into blablah values(idNumber, strName);
     end loop;
     commit;
  end; 
```

**更新**

请注意，如果您可以在新表中使用类似 SCRABBLE 的单词列表，那么您根本不需要这个存储过程。此存储过程的唯一用途是获取随机单词/字符串并将其插入到一个受尊重的表中，并与许多其他列一起。

# python - 如何处理 Python Flask 重定向

> ID：13737716
> 
> 赞同：1
> 
> 时间：2012-12-06T05:50:22.867
> 
> 标签：python, flask

我想知道在 Flask 中提供重定向的最佳方法是什么。我有一个如下所示的删除按钮：

```
<a href="/elastic_ips/{{region}}/delete/{{eli['public_ip']}}"><button class="btn btn-danger btn-mini" type="button">Delete</button></a> 
```

调用此 app.route：

```
@app.route('/elastic_ips/<region>/delete/<ip>')
def delete_elastic_ip(region=None,ip=None):
        creds = config.get_ec2_conf()
        conn = connect_to_region(region, aws_access_key_id=creds['AWS_ACCESS_KEY_ID'], aws_secret_access_key=creds['AWS_SECRET_ACCESS_KEY'])
        ip = ip.encode('ascii')
        elis = conn.get_all_addresses(addresses=ip)

        for eli in elis:
                result = []
                r = eli.release()
                result.append(r)
        return Response(json.dumps(result), mimetype='application/json') 
```

我宁愿不将结果作为 json 返回。我不确定使用删除按钮返回页面的“正确”方式是什么。要么我可以放入一个 HTML 页面来重定向到引用，或者 Flask 中是否有内置方法可以返回 app.route？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T06:49:24.133

好吧，如果你想返回的 url，`delete_elastic_ip`用函数很容易做到`url_for` （[更多关于这个函数](http://flask.pocoo.org/docs/api/#flask.url_for)）

不知道这个端点是否在某个蓝图中，但如果没有，这很简单：

```
from flask import url_for, redirect
.... your code ...
return url_for('delete_elastic_ip', region=None, ip=None) 
```

当然，您也可以用您需要的值替换 Nones :) 这会将您的 url 返回到端点。顺便说一句，这也是使用模板中的 url 的一种方式。不要对它们进行硬编码，使用 jinja 模板中的 url_for 函数为您生成视图的 url。该函数可用作模板中的标准全局变量（[更多](http://flask.pocoo.org/docs/templating/)）

此外，如果您只想直接重定向到其他端点而不返回任何内容，`redirect`flask 中有一个函数。将它与 url_for 结合使用，你很高兴；）

```
from flask import url_for, redirect
... your code...
return redirect(url_for('delete_elastic_ip', region=None, ip=None)) 
```

它会刷新页面，所以不是 ajax 重定向的最佳方式，但如果你愿意的话。对于 ajax，只需返回带有 url_for 结果的 json 并用它来做这些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-18T18:03:34.910

这是使用 render_template app.py 代码的另一种方法

```
from flask import Flask, request,render_template
app = Flask(__name__)

@app.route('/')
def index():

    return render_template('index.html')

@app.route('/v_timestamp')
def v_timestamp():

    return render_template('v_timestamp.html') 
```

然后可以重定向到 v_timestamp 页面。如果您希望通过按钮单击事件来完成此操作。在模板文件夹中，在您的 v_timestamp.html 中有这段代码

```
<p align="center"><a href=v_timestamp ><button class=grey style="height:75px;width:150px">v timestamp</button></a></p> 
```

在同一个段落元素中定义按钮元素和一个href，在我的例子中，href v_timestamp 表示v_timetsamp.html 编写您要重定向到的相应.html 页面。

**文件结构**

-app.py

-templates

*   索引.html
*   v_timestamp.html

# r - 如何劫持“负”堆积条形图上的 y 轴

> ID：13737717
> 
> 赞同：1
> 
> 时间：2012-12-06T05:50:27.723
> 
> 标签：r, ggplot2

我正在尝试使用堆叠条形图来显示 2 组值，以使测量 2 组中相同域的值以相反的方向传播，类似于堆叠的负条形图。我通过将一组值设置为负数来“劫持”一个堆积条形图来做到这一点。这给了我想要的图像；但是，我想从底部的堆叠条中删除底片。有没有办法做到这一点？另外，我想知道为什么条形几何中的 width= 选项不调整条形的宽度？例如，当我在 geom_bar 规范中添加 width=0.5 作为选项时，我收到错误：

`Warning message: Stacking not well defined when ymin != 0`

无论如何，提前感谢您提供的任何帮助。我的示例代码如下：

`test <- structure(list(Mode = structure(c(2L, 1L, 3L, 2L, 1L, 3L), .Label = c("Air","Land", "Sea"), class = "factor"), Side = structure(c(2L, 2L,2L, 1L, 1L, 1L), .Label = c("Allies", "Axis"), class = "factor"),Value = c(72L, 12L, 16L, -84L, -12L, -22L)), .Names = c("Mode", "Side", "Value"), class = "data.frame", row.names = c(NA, -6L))`

`p <- ggplot(test, aes(x= Mode, y=Value, fill= Mode)) + geom_bar(color = "black", stat="identity", data=subset(test, Side == "Axis")) + geom_bar(color = "black", stat="identity", data=subset(test, Side == "Allies")) + scale_fill_brewer(type = "seq", palette = 1)+ guides(fill=FALSE) + scale_y_continuous(breaks=seq(-100, 100,10))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:07:35.973

我认为[宽度问题](https://github.com/hadley/ggplot2/issues/235)已经解决，`geom_bar`但由于某种原因，我仍然在 0.9.2.1 中看到它。我可能在这方面遗漏了一些东西，但是设置内部宽度的旧方法`aes()`仍然适用于我。

另外，我*认为*您的意思是您希望 0 以下的 y 轴标签不是负数，但是您的问题对此并不完全清楚。如果我是对的，那么这可能就是你所追求的：

```
abs_format <- function(){
    function(x){
        abs(x)
    }
}

p <- ggplot(test, aes(x= Mode, y=Value, fill= Mode,width = 0.1)) + 
        geom_bar(color = "black", stat="identity", data=subset(test, Side == "Axis")) +
        geom_bar(color = "black", stat="identity", data=subset(test, Side == "Allies")) +
        scale_fill_brewer(type = "seq", palette = 1) + 
        guides(fill=FALSE) + 
        scale_y_continuous(breaks=seq(-100, 100,10),labels = abs_format()) 
```

![在此处输入图像描述](../Images/261c462dd316b23c410fda12bf62b93b.png)

另外，我应该补充一点，您收到的关于堆叠定义不明确的消息**不是**错误。这只是一个*警告*，意味着你应该保持警惕。ggplot 有时很难弄清楚在使用负值时如何堆叠事物。事情通常会奏效，它只是警告你要警惕龙。

# c++ - 在分段错误期间可以调用析构函数

> ID：13737719
> 
> 赞同：0
> 
> 时间：2012-12-06T05:50:44.513
> 
> 标签：c++

嗨朋友，如果发生分段错误，我在程序执行期间有一个查询，可以调用自动创建的对象的析构函数。我正在编写一个代码并故意创建分段错误来检查析构函数是否会被调用。

```
#include<iostream>
using namespace std;

class hello
{
    public:
    int b;
};

class test
{
    public :
        hello *ptr;
        int a;
        void function()
            {
                ptr = new hello;

            }

        test()
        {
            cout<<"constructor called"<<endl;
        }

        ~test()
        {
            cout<<"destructor called"<<endl;
            delete ptr;
        }
};

    int main()
    {
        test obj;
        obj.function();
        obj.a = 500;

        test *ptr ;
        ptr-> a = 900;       //To create segmentation fault

    } 
```

输出：构造函数调用

没有调用析构函数。所以我无法删除在析构函数中使用“new”创建的任何对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:51:46.413

```
test *ptr ;
ptr-> a = 900; 
```

是未定义的行为，因为`ptr`它是一个悬空指针，所以**任何事情都可能发生**。析构函数可能会被调用，也可能不会被调用，一切皆有可能。

为了使它指向一个有效的对象，你可以将它分配给 obj 的地址：

```
test* ptr = &obj; 
```

要创建一个新的动态分配对象，您可以使用`new`：

```
test* ptr = new test; 
```

但如果你这样做，你将不得不自己处理内存管理：

```
delete ptr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:53:15.353

不，不会调用析构函数，因为分段错误是操作系统向程序发送中断以尝试访问受保护的内存的结果。中断将停止程序的执行，并且无法继续执行。

# ajax - Ajax 不适用于 MvcPaging

> ID：13737721
> 
> 赞同：2
> 
> 时间：2012-12-06T05:51:00.580
> 
> 标签：ajax, asp.net-mvc

目前我正在使用从这里检索到的 MvcPaging nuget 包：[https ://github.com/martijnboland/MvcPaging](https://github.com/martijnboland/MvcPaging)

我的问题是，当我使用 @Html.Pager 帮助器时，而不是替换我的元素。它在新选项卡中打开局部视图。

我的目标是通过 Ajax 更新我的 QuickLinks 部分，而无需刷新整个页面。

这是我的控制器：

```
 private CasuallyProDb db = new CasuallyProDb();
    private const int DefaultPageSize = 7;

    //
    // GET: /Home/
    public ActionResult Index()
    {
        int currentPageIndex = 0;
        var news = db.PostedNews.OrderBy(a=>a.NewsId).ToPagedList(currentPageIndex, DefaultPageSize);
        return View(news);

    }

    public ActionResult AjaxPage(int? page)
    {
        int currentPageIndex = page.HasValue ? page.Value - 1 : 0;
        var news = db.PostedNews.OrderBy(a => a.NewsId).ToPagedList(currentPageIndex, DefaultPageSize);
        return PartialView("_QuickLinks", news);
    } 
```

这是呈现部分视图的索引视图：

```
@model IPagedList<CasuallyPro.Models.News>
@using MvcPaging
<div id="quickLinksWrapper" class="float-right">
    @Html.Partial("_QuickLinks", Model)
</div> 
```

这是我的 _QuickLinks.cshtml 部分视图：

```
@model IPagedList<CasuallyPro.Models.News>
@using MvcPaging

<div id="quickLinksDisplay">
<ul>
    @foreach (var news in Model)
    {
        <li>
            <img alt="" src="@Html.DisplayFor(modelItem => news.CategoryIcon)"/>
            <div class="quickLinksTitle">@Html.DisplayFor(modelItem => news.Title)<br/>
                <span class="quickLinksDetails">
                    <span class="quickLinksUsername"> Posted by @Html.DisplayFor(modelItem => news.PostedUserName)</span>
                    <span class="quickLinksDate"> on @Html.DisplayFor(modelItem => news.PostedDate)</span>
                </span>
            </div>
        </li>
    }
</ul>
<div id="quickLinksPagedList">
    @Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount, new AjaxOptions
                                                                          {
                                                                            UpdateTargetId = "quickLinksWrapper"
                                                                          }).Options(o => o.Action("AjaxPage"))
</div> 
```

我正在查看他们提供的示例项目，看起来应该这样做，但不幸的是它无法正常工作。我在我的 _Layout.cshtml 的 head 部分引用了用于不显眼的 ajax 的脚本：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

任何指导将不胜感激。

# sql - 在第二部分中使用 SQL 联合第一部分中的行

> ID：13737723
> 
> 赞同：0
> 
> 时间：2012-12-06T05:51:21.643
> 
> 标签：sql, sqlite

为了实施多项选择测验，我想从我的答案表中选择一个答案（“正确”答案）和两个“不正确”答案。我可以在一个查询中完成吗？我觉得我应该可以，但我不太明白。这是我到目前为止所拥有的：

```
SELECT correct.answer
FROM (
    SELECT answer
    FROM answers
    ORDER BY random()
    LIMIT 1
) correct
UNION
SELECT answer
FROM (
    SELECT DISTINCT answer
    FROM answers
    WHERE answer != correct.answer
    ORDER BY random()
    LIMIT 2
); 
```

数据库引擎是 SQLite 3，它给了我：

```
Error: no such column: correct.answer 
```

我可以用两个单独的查询来做到这一点，但就像我说的那样，一个应该是可能的，不是吗？

# ios - 归档应用程序会出现证书错误，但我认为我正确添加了证书

> ID：13737724
> 
> 赞同：1
> 
> 时间：2012-12-06T05:51:43.733
> 
> 标签：ios, ios-provisioning

我正在尝试存档一个新应用程序，但是当我这样做时，我收到了这个错误：

```
Code Sign error: Provisioning profile 'BusinessIdeaLive' specifies the Application Identifier 'com.problemio.businessidea' which doesn't match the current setting '4MS3885ZWL.com.problemio.businessidea' 
```

所以我知道'4MS3885ZWL.com.problemio.businessidea'和com.problemio.businessidea不匹配

但是在我制作的证书和我的 plist 中，我有“4MS3885ZWL.com.problemio.businessidea”，所以我不确定为什么会发生这个错误。知道为什么会发生错误以及如何修复它吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:10:26.430

您的 plist 应该只包含“com.problemio.businessidea”，没有 4MS3885ZWL 前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:57:00.557

我有同样的错误。我重新启动了 xCode。在目标和构建设置中选择适当的临时配置文件并再次存档解决了问题。

# mysql - 如何获取列值不为空的行

> ID：13737725
> 
> 赞同：-1
> 
> 时间：2012-12-06T05:51:42.980
> 
> 标签：mysql, sql, sql-server, oracle, tsql

我想获取表的行，使得没有列值为空。没有对列值进行硬编码。我有数百个列名。

![在此处输入图像描述](../Images/3a949fb85216d624b0ffa83eac0cbe58.png)

输出应该只有第 2 行，因为所有该行都有所有列的值。我不想为 is not null 指定所有列名。它应该以编程方式接受它。即使我添加了一个新列，它也应该可以在不更改查询的情况下工作。那是我的愿景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:42:16.893

我发现了一些东西，但这意味着使用**CURSOR**

```
DECLARE @ColumnName VARCHAR(200)
DECLARE @ColumnCount INT
DECLARE @sql VARCHAR(400)

CREATE TABLE #tempTable (Id INT)

DECLARE GetNonNullRows CURSOR 
FOR 
    SELECT c.NAME, (SELECT COUNT(*) FROM sys.columns col WHERE col.object_id = c.OBJECT_ID)  FROM sys.tables AS t
    JOIN sys.columns AS c ON t.object_id = c.object_id
    WHERE t.name = 'SomeTable' AND t.type = 'U'

OPEN GetNonNullRows
FETCH NEXT FROM GetNonNullRows INTO @ColumnName, @ColumnCount
WHILE @@FETCH_STATUS = 0
BEGIN
    SET @sql = 'SELECT st.UniqueId FROM SomeTable AS st WHERE ' + CONVERT(varchar, @ColumnName) + ' IS NOT NULL'    
    INSERT INTO #tempTable
    EXEC (@sql)

FETCH NEXT FROM GetNonNullRows INTO @ColumnName, @ColumnCount
END 

CLOSE GetNonNullRows
DEALLOCATE GetNonNullRows

SELECT * FROM SomeTable AS st1
WHERE st1.UniqueId IN (SELECT Id FROM #tempTable AS tt
GROUP BY Id
HAVING COUNT(Id) = @ColumnCount)

DROP TABLE #tempTable 
```

让我稍微解释一下。

首先，我创建了遍历一个表的所有列的游标。对于每一列，我创建了 sql 脚本来在表中搜索所选列的非空值。对于那些满足条件的行，我将它的唯一 ID 放入临时表中，我将这项工作用于所有列。

最后，只有与列数相同的 ID 才是您的结果集，因为只有具有相同外观数量（如表中的列数）的行可能是所有列中所有非空值的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:53:57.110

尝试这个 ：：

```
SELECT * FROM mytable WHERE column IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:58:57.327

try this

```
SELECT * 
FROM your_table_name
where coalesce(column_1, column_2, column_3, ...., column_n) is not null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T09:28:04.787

仅 SQL 无法表达这样的概念。

您必须使用一些过程语言根据表定义动态地构建 SQL 查询。在 Oracle 中，您可以使用字典视图 USER_TAB_COLUMNS 来构建列列表。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-06T05:53:24.603

尝试使用`IS NOT NULL`

```
SELECT * FROM table WHERE field_name IS NOT NULL 
```

有关更多信息，请查看有关使用空值的[mysql 手册。](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

# php - Wordpress 网站发布管理策略

> ID：13737729
> 
> 赞同：7
> 
> 时间：2012-12-06T05:51:57.400
> 
> 标签：php, mysql, wordpress, build-automation, release-management

我正在更新**现有的 wordpress 网站**，对主题和网站结构进行**重大修改**，并对插件进行更新，这些插件又将其数据存储到 mysql 数据库中。

据我所知，这里有 2（3？）种可能的策略：

1.  从 DEV 将 MySQL 数据库“转储并加载”到 LIVE，并用最新更新替换 wp-content 文件夹。
2.  通过 WP-importer 导入更改并将 wp-content 文件夹替换为最新更新。
3.  通过 WP 管理界面手动更改数据库并将 wp-content 文件夹替换为最新更新（这仅对较小的更改有用）。

虽然我在自己独立的环境中进行开发，但这是针对当前正在运行的现有网站，并将继续接收来自公众的更新，例如评论和联系表格的条目，因此我希望数据库现在与我发布时有所不同我的改变。

鉴于此，上述选项提供了以下问题。

**1\. 转储和装载**

“转储和加载”策略似乎是不可能的，因为我的数据正在幕后更新（这本来是我的首选方法，因为这很容易回滚）。

结果：需要在发布后同步数据库以获取最新更新，太复杂了。

**2\. 使用进口商**

使用[WP-Importer 插件](http://wordpress.org/extend/plugins/wordpress-importer/)页面和帖子 ID 将得到更新，从而破坏依赖帖子 ​​ID 激活的样式。这反过来又造成了我希望避免的 CSS 噩梦，必须*在发布后*通过 CSS以使用数据库创建的更新新页面/帖子 ID。

结果：过于挑剔，不是很专业的方法导致漫长而复杂的发布过程。

**3\. 手动更新数据库**

此选项非常适合进行小的更改，但对于更复杂的版本，PROD 界面上要遵循的步骤列表会变得冗长且难以遵循，从而容易出错。

结果：太容易搞砸了，只有万不得已。

**现有网站是否有标准的 WORDPRESS 发布策略？**

所以基本上，我的问题是：其他 wordpress 开发人员在更新现有网站时遵循什么发布过程？有没有我没有在下面列出的选项，可以最大程度地减少发布过程中的麻烦并减少时间和复杂性？

我已经使用 GIT 为该站点设置了源代码控制，并且我习惯于通过 ANT 或类似的发布脚本来实现自动化，这对于当前项目来说可能是多余的，但至少知道一种更新 wordpress 的简单方法是理想的网站并尽量减少搞砸的机会。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:56:19.197

*   WordFence 背后的人正在开发一个名为 [Deploymint](http://code.google.com/p/deploymint/)的部署插件。
*   有一个新的叫做[WP Stack](https://github.com/markjaquith/WP-Stack/)。
*   [Metal Toad Media](http://www.metaltoad.com)[使用 Capistrano](http://www.metaltoad.com/blog/tutorial-simplify-your-wordpress-deployments)讨论过，但 Capistrano 并不特定于 WP。
*   [CrowdFavorite](http://crowdfavorite.com/)推出了一项名为 [RAMP](http://crowdfavorite.com/wordpress/ramp/)的服务。

不用说，您还有其他选择。如果您手动进行数据库更改，请确保您正在有效地处理序列化数据。我建议使用[Search and Replace DB](https://github.com/interconnectit/Search-Replace-DB)。WordPress 还有一个很棒的小技巧，可以[完全从 wp-config 文件中更改站点 url](http://codex.wordpress.org/Changing_The_Site_URL)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:28:11.033

我认为这不是 WordPress 特有的，它与任何自定义网站的情况都相似。我个人倾向于重放在 dev 上进行的生产中的 SQL 更改。棘手的部分是您必须知道进行了哪些 SQL 更改。例如，某个插件可能会在您安装它时进行一些架构更改 - 您需要知道它们是什么。您可以通过在安装插件之前将数据库导出为 SQL 来做到这一点，然后再进行另一个导出并对文件进行比较。

既然您说您正在进行修改，那么我可能会假设您知道您将进行哪些 SQL 更改？只需确保您对 DB 所做的所有更改都采用 SQL 脚本文件的形式，而不仅仅是使用 GUI 进行编辑（您可以使用 GUI 帮助编写查询，但保存实际的 SQL）。完成所有更改后，您应该有一堆在开发过程中运行的 SQL 脚本 - 您可以按顺序重新运行它们而不会遇到错误。

然后，当需要投入生产时，创建一个生产的暂存版本（即对生产进行相当最新的数据库备份）。在上面运行更新脚本并测试一切正常。如果是，那么您可以在生产环境中运行。

在运行任何更改之前一定要备份生产！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T17:08:04.513

我假设你的所有东西都在测试环境中运行。我会：

*   在您的实时环境中创建一个新数据库。
*   预加载新站点的所有内容和配置。
*   在您的测试环境中，将您的 config.php 配置为指向新数据库。
*   将所有文件上传到实时服务器。最后上传您的 config.php。

这将最大限度地减少停机时间。

# c++ - 深拷贝构造函数中的问题

> ID：13737731
> 
> 赞同：1
> 
> 时间：2012-12-06T05:52:00.470
> 
> 标签：c++, visual-studio-2010, pointers, constructor

请看下面的代码

**位置.h**

```
#pragma once
class Location
{
public:
    Location(void);
    Location(int,int,int);
    ~Location(void);
    Location(const Location *loc);

    void display();
    void set(int,int,int);

private:

    int x,y,z;
}; 
```

**位置.cpp**

```
#include "Location.h"
#include <iostream>
#include <string>

using namespace std;

Location::Location()
{
}

Location::Location(int x,int y, int z)
{
    set(x,y,z);
}

Location::~Location(void)
{
}

void Location::display()
{
    cout << "X: " << x << endl;
    cout << "Y: " << y << endl;
    cout << "Z: " << z << endl;
}

void Location::set(int xx,int yy,int zz)
{
    x = xx;
    y = yy;
    z = zz;
} 
```

**对象.h**

```
#pragma once
#include "Location.h"

class GameObject
{
public: 
    GameObject(int);
    ~GameObject(void);
    GameObject(int,Location *);
    GameObject(const GameObject *obj);

    Location *location;

    int getNumberOfObjects();

    static int counter;

    int id;

private:
    GameObject(void);

}; 
```

**对象.cpp**

```
#include "GameObject.h"
#include <iostream>

using namespace std;

static int counter = 0;

int GameObject::counter = 0;

GameObject::GameObject(void)
{
}

GameObject::GameObject(int i)
{
    counter++;
    id = i;
}

GameObject::GameObject(int i,Location *loc)
{
    id = i;
    location = loc;
}

GameObject::GameObject(const GameObject *ob)
{
    this->location = new Location(ob->location);
}

GameObject::~GameObject(void)
{
} 
```

**主文件**

```
#include <iostream>
#include "GameObject.h"

using namespace std;

int main()
{
    //GameObject obj1;
    //cout << obj1.id << endl;

    GameObject obj2(45);
    cout << obj2.id << endl;;
//  cout << obj2.counter << endl; 

    //Declaring dynamic objects for Location
    Location *loc1 = new Location(1,1,1);
    Location *loc2 = new Location(2,2,2);
    Location *loc3 = new Location(3,3,3);

    //Assigning each GameObject a location
    GameObject obj3(45,loc1);
    GameObject obj4(45,loc2);
    GameObject obj5(45,loc3);

    //Displaying Number of GameObject objects
    cout << "Number of Objects: " << GameObject::counter << endl;

    //Invoking Location's display() method using GameObject objects
    cout << "......obj3 values........" << endl;
    obj3.location->display();
    cout << "......obj4 values........" << endl;
    obj4.location->display();
    cout << "......obj5 values........" << endl;
    obj5.location->display();

    //Declaring new Static GameObject
    GameObject obj6(obj4);

    //Invoking display() member function using both obj4 and obj6 GameObjects
    cout << endl;
    cout << "Invoking display() member function using both obj4 and obj6 GameObjects " << endl;
    obj4.location->display();
    obj6.location->display();

    //Changing the location values in obj4
    obj4.location->set(8,8,8);

    //Invoking display() member function using both obj4 and obj6 GameObjects
    cout << endl;
    cout << "Invoking display() member function using both obj4 and obj6 GameObjects " << endl;
    obj4.location->display();
    obj6.location->display();

    system("pause");
    return 0;
} 
```

在这里，正如您在 Main.cpp 中看到的，obj6 'Location' 已在 obj4 'Location' 更改后立即更改。当我更改 obj4 的位置时，我不想更改 obj6 的“位置”。

执行此操作时出现此错误

```
GameObject.obj : error LNK2019: unresolved external symbol "public: __thiscall Location::Location(class Location const *)" (??0Location@@QAE@PBV0@@Z) referenced in function "public: __thiscall GameObject::GameObject(class GameObject const *)" (??0GameObject@@QAE@PBV0@@Z) 
```

我试图用一个深拷贝构造函数来做，但它没有用。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:57:02.553

```
GameObject::GameObject(const GameObject *ob) 
```

不是复制构造函数，您需要：

```
GameObject::GameObject(const GameObject &ob)
                                       ^^^ 
```

此外，您需要提供一个**复制赋值运算符**来执行深层复制。

请注意，理想的解决方案是使用智能指针作为成员而不是原始指针。
这基本上可以为您省去深度复制的所有麻烦。

* * *

**好读：**
[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T05:56:18.457

tl;dr 尝试实现**复制构造函数**而不是**转换 cnstructor**，即：

```
//this
GameObject(const GameObject &obj);
//instead of this
GameObject(const GameObject *obj); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T06:40:10.437

首先，正如其他人所指出的，您还没有实现复制构造函数。

```
GameObject::GameObject(const GameObject *ob) 
```

这是一个函数，它接受一个指向 const GameObject 的指针。复制构造函数应该对要创建的对象进行 const 引用：

```
GameObject::GameObject(const GameObject &ob) 
```

但是，我也看到了另一个问题。如果您确实想要一个深层副本，这意味着您希望 Location 对象是分开的，并且修改一个对象不应影响另一个对象。鉴于此，我看不出为什么 GameObject 应该持有指向 Location 的指针，而不是简单的 Location 成员。因此，我建议更改它，并创建一个使用初始化列表的复制构造函数，使您的位置成为给定位置的副本：

把它放在你的 GameObject 标头中：

```
class GameObject
{
public: 
    GameObject(int);
    ~GameObject(void);
    GameObject(int,const Location&);
    GameObject(const GameObject &obj);

    Location location;

    int getNumberOfObjects();

    static int counter;

    int id;

private:
    GameObject(void);
} 
```

并像这样编写构造函数：

```
GameObject(int i)
: id(i)
{}

// This will cause GameObject to be uninitialized
~GameObject(void)
{}

GameObject(int i,const Location& loc)
: id(i), location(loc)
{}

GameObject(const GameObject &obj)
: id(obj.id), location(obj.location)
{} 
```

最后，您需要使用相同的逻辑来构造带有签名的正确 Location 复制构造函数：

```
Location(const Location &loc); 
```

我将把这个实现作为练习留给读者。;)

此外，阅读您的一些评论（例如实际上不是静态的成员上方的“静态”评论等）让我认为您可能想阅读更多关于 C++ 内存管理的内容。:) 谷歌一下“C++ 免费商店”。一个提示是不要在不需要的地方使用动态内存。在 C++ 中，并非每个对象都应该使用`new`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T06:56:24.957

在 C++ 中，可以在堆上创建对象，并将它们的内存地址存储在指针中。对象也可以在堆栈上创建并且可以通过引用来指示。

在定义我们的复制构造函数时，我们需要使用引用而不是指针。原因是在复制构造函数中使用指针会导致您有两个指针指向堆中的同一个对象。所以你的`"obj6"`和`"obj4"`指针指向内存中的同一个对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T06:32:32.103

我看到您没有 Location 对象的复制构造函数的实现。我想一旦你实现方法 Location(const Location* loc)，问题就会得到解决。

```
Location(const Location* loc) {
   this->x = loc->x;
   this->y = loc->y;
   this->z = loc->z;
} 
```

# jquery - Backbone + jQuery + Tornado：OPTIONS 请求“加载已取消”

> ID：13737733
> 
> 赞同：0
> 
> 时间：2012-12-06T05:52:14.030
> 
> 标签：jquery, python, backbone.js, tornado, cors

我在前面使用 Backbone 和 jQuery，并且有一个使用 Python/Tornado 的 API。因为我的 API 位于[http://api.domain.com](http://api.domain.com)而站点位于[http://domain.com](http://domain.com)，所以当我尝试保存 Backbone 模型时，它首先执行 OPTIONS 请求。问题是即使服务器返回了有效响应，它也会显示“加载已取消”。

请求标头：

```
OPTIONS /user/xdfr456890sd HTTP/1.1
Host: api.domain.com
Connection: keep-alive
Access-Control-Request-Method: PUT
Origin: http://domain.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4
Access-Control-Request-Headers: origin, content-type, accept
Accept: */*
Referer: http://domain.com/settings
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

响应标头：

```
HTTP/1.1 200 OK
Date: Thu, 06 Dec 2012 05:41:51 GMT
Content-Type: text/plain
Content-Length: 0
Connection: keep-alive
Server: TornadoServer/2.4
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: http://domain.com
Access-Control-Allow-Methods: PUT, DELETE, POST, GET
Access-Control-Allow-Headers: Origin, Accept-Language, Accept-Encoding, Accept-Charset,     Access-Control-Request-Headers, X-Scheme, Connection, Accept, User-Agent, Access-Control-Request-Method, Host, Referer, X-Real-Ip 
```

我错过了什么吗？做错了什么？我已经尝试了响应标头及其值的所有可能组合。`Access-Control-Allow-Origin`是`Origin`请求标头是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:01:07.317

您已列出方法

```
Access-Control-Allow-Methods: PUT, DELETE, POST, GET 
```

`OPTIONS`但是然后您使用上面未列出的方法进行调用

# ios - 苹果设备是否支持 windows 媒体播放器

> ID：13737734
> 
> 赞同：0
> 
> 时间：2012-12-06T05:52:15.450
> 
> 标签：ios, mp3, wmp

我有一个播客页面，其中使用 windows 媒体播放器在“对象”标签中播放 mp3 播客。但它们不适用于 iPhone、iPad 和 iTouch。是因为苹果设备不支持 WMP 吗？

我需要为此使用 HTML5 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:42:10.680

是的，Apple 不支持 Microsoft 产品。

此外，如果您正在创建跨平台应用程序，则会遇到此类挑战。

我会推荐使用 Flow Player，我在过去的项目中使用过它，它就像魅力一样

[http://flash.flowplayer.org/plugins/javascript/ipad.html](http://flash.flowplayer.org/plugins/javascript/ipad.html)

# .htaccess - 本地主机中索引页面的重写

> ID：13737738
> 
> 赞同：0
> 
> 时间：2012-12-06T05:52:31.943
> 
> 标签：.htaccess, mod-rewrite

我尝试使用以下代码将任何页面重定向到本地主机中的索引页面，但不知何故它不起作用。

```
<IfModule mod_rewrite.c>

Options +FollowSymLinks
Options +Indexes
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [L]

</IfModule> 
```

请帮助我重定向到我的网站索引页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:56:37.280

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ index.php/$1 [L]
   IndexIgnore *
</IfModule> 
```

Please make sure mod_rewrite module active in your httpd.conf file like:

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

# java - Android 麦克风音量计

> ID：13737739
> 
> 赞同：3
> 
> 时间：2012-12-06T05:52:37.147
> 
> 标签：java, android, microphone

我正在编写一个应用程序，该应用程序需要获得麦克风电平才能创建声级计。我发现了这个：[Android 媒体播放器分贝读数](https://stackoverflow.com/questions/8252813/android-media-player-decibel-reading)。我仍然需要创建一个仪表来显示当前的水平，100% 的交易。例如，一个条形越高，它就会越红。只需获取代码以显示关卡就很棒。

在上面的链接中，有一种获取当前分贝读数的方法，但它似乎是我可能需要在单独的线程中运行并不断更新它的东西。我正在读 VU 表，但不知道从哪里开始。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:24:29.683

好的，我假设您使用问题中链接到的代码。

因此，该仪表必须根据幅度值动态更改其大小和颜色。

要绘制形状，请扩展 View 类并覆盖 onDraw 方法，如下所示

```
float x,y; //CONSTANTS FOR WHERE YOU WANT YOUR BAR TO BE
float baseWidth; // This is the width of one block. 
                 //Number of blocks together will be your rectangle
float nwidth;     //This is the number of blocks varying according to amplitude
float height;    //CONSTANT HEIGHT
Paint color=new Paint();     

//For drawing meter
public void onDraw(Canvas c){
  changeColorAndSize();
  Rect rect = new Rect(x, y, x + (baseWidth*nwidth), y + height);
  shapeDrawable.setBounds(rect);
  shapeDrawable.getPaint().set(paint);
  shapeDrawable.draw(canvas);

}

public void changeColorAndSize(){
       double amp=getAmplitude();
       nWidth=amp;
       paint.setARGB (a, r*(Integer.parseInt(amp)), g, b);
      //This will change the redness of the bar. a,g and b will have to be set by you

}

public double getAmplitude() {
        if (mRecorder != null)
                return  (mRecorder.getMaxAmplitude());
        else
                return 0;
} 
```

要使仪表每'x'秒更改一次，您将不得不`postInvalidate()`重复调用

或者

使用动画，并`startAnimation()`从您的视图中调用它。

# ios - IOS中的社交网站分享

> ID：13737741
> 
> 赞同：1
> 
> 时间：2012-12-06T05:52:45.353
> 
> 标签：ios, ios5

需要在 Facebook、Twitter、Google+ 中分享 IOS 应用程序。IOS有没有常用的分享插件。用于共享的sharekit插件怎么样？请指导我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:58:52.023

I'm guessing you want to share a content right? try this: [http://getsharekit.com/](http://getsharekit.com/)

# android - 警报对话框生成器在 android 中出现黑色背景

> ID：13737742
> 
> 赞同：0
> 
> 时间：2012-12-06T05:52:47.190
> 
> 标签：android

我在应用程序中使用警报对话框生成器。我已经在 api level16 中检查了对话框的黑色背景，但在 api level 8 中没有。有人能告诉我如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:06:59.843

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent" >

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="260dp"
        android:layout_height="wrap_content" android:background="@drawable/dark_blue">

        <TextView android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:text="@string/save_wishlist_title" android:layout_alignParentTop="true" android:layout_centerInParent="true" 
            android:textAppearance="?android:attr/textAppearanceLarge" />

         <LinearLayout android:id="@+id/linearLayout1" android:layout_centerInParent="true" android:layout_height="wrap_content" 
             android:layout_width="wrap_content" android:layout_marginTop="10dp" android:layout_below="@+id/textView1" android:orientation="vertical">

            <Button android:id="@+id/phoneButton" android:layout_width="120dp" android:layout_height="wrap_content"
                android:text="@string/phone_button" />

            <Button android:id="@+id/emailButton" android:layout_width="120dp" android:layout_height="wrap_content"
                android:text="@string/email_buton" android:layout_marginTop="5dp"/>

            <Button android:id="@+id/accountButton" android:layout_width="120dp" android:layout_height="wrap_content" 
                android:text="@string/account_button" android:layout_marginTop="5dp"/>
        </LinearLayout>

    </RelativeLayout>

</ScrollView> 
```

在要设置警报对话框的任何活动中扩展此布局。

```
LayoutInflater li = LayoutInflater.from(VMAdjustFrame.this);
promptsView = li.inflate(R.layout.wishlist_save_prompt, null);
alertDialogBuilder = new AlertDialog.Builder(VMAdjustFrame.this);
alertDialogBuilder.setView(promptsView);
final AlertDialog dialog = alertDialogBuilder.show(); 
```

# ios6 - 缺少 Retina 4 Launch 图像？

> ID：13737744
> 
> 赞同：2
> 
> 时间：2012-12-06T05:53:03.860
> 
> 标签：ios6, retina-display, iphone-5

![在此处输入图像描述](../Images/862bcdb603c91b34ee70ebae4514c928.png)

我的应用程序有错误，请看图片。

# regex - 在 Go 中的空格上拆分字符串？

> ID：13737745
> 
> 赞同：150
> 
> 时间：2012-12-06T05:53:12.283
> 
> 标签：regex, go

给定一个输入字符串，例如`" word1 word2 word3 word4 "`，在 Go 中将其拆分为字符串数组的最佳方法是什么？请注意，每个单词之间可以有*任意*数量的空格或 unicode-spacing 字符。

在 Java 中，我只会使用`someString.trim().split("\\s+")`.

（注意：[在 Go 中使用正则表达式可能出现重复的拆分字符串](https://stackoverflow.com/questions/4466091/split-string-using-regular-expression-in-go)并不能提供任何高质量的答案。请提供一个实际示例，而不仅仅是指向`regexp`或`strings`包参考的链接。）

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2012-12-06T06:05:38.437

该`strings`包有一个[`Fields`](http://golang.org/pkg/strings/#Fields)方法。

```
someString := "one    two   three four "

words := strings.Fields(someString)

fmt.Println(words, len(words)) // [one two three four] 4 
```

***演示：*** [http ://play.golang.org/p/et97S90cIH](http://play.golang.org/p/et97S90cIH)

从文档：

> `func Fields(s string) []string`
> 
> Fields`s`围绕一个或多个连续空白字符的每个实例拆分字符串，`s`如果 s 仅包含空白，则返回一个子字符串数组或一个空列表。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-06T06:35:06.607

如果您使用提示：[regexp.Split](http://tip.golang.org/pkg/regexp/#Regexp.Split)

```
func (re *Regexp) Split(s string, n int) []string 
```

将切片 s 拆分为由表达式分隔的子字符串，并返回这些表达式匹配之间的子字符串切片。

此方法返回的切片由不包含在 FindAllString 返回的切片中的 s 的所有子字符串组成。当在不包含元字符的表达式上调用时，它等效于 strings.SplitN。

例子：

```
s := regexp.MustCompile("a*").Split("abaabaccadaaae", 5)
// s: ["", "b", "b", "c", "cadaaae"] 
```

计数确定要返回的子字符串的数量：

```
n > 0: at most n substrings; the last substring will be the unsplit remainder.
n == 0: the result is nil (zero substrings)
n < 0: all substrings 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-06T05:53:12.283

我想出了以下内容，但这似乎有点过于冗长：

```
import "regexp"
r := regexp.MustCompile("[^\\s]+")
r.FindAllString("  word1   word2 word3   word4  ", -1) 
```

这将评估为：

```
[]string{"word1", "word2", "word3", "word4"} 
```

有没有更紧凑或更惯用的表达方式？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-26T03:04:50.673

您可以使用包字符串函数 split strings.Split(someString, " ")

[字符串.Split](https://golang.org/pkg/strings/#Split)

# opengl - 关于纹理图集和渲染排序的问题 - OpenGL

> ID：13737749
> 
> 赞同：2
> 
> 时间：2012-12-06T05:53:16.977
> 
> 标签：opengl, textures

我正在模拟一个旧客户端，大多数纹理都是 128x128。我知道切换纹理和渲染调用很昂贵，我可以在运行时摆脱，创建一个包含所有微小纹理的非常大的纹理图集。

然后从那里，我可以绑定大纹理并通过着色器渲染图集中的纹理偏移吗？这会带来什么样的性能冲击？我的第二个问题涉及排序。关卡文件被分解成 BSP 树的小块。它们非常小，每个级别通常有数千个。当前的方式，肯定是较慢的是，我在每个 BSP 叶中渲染我的平截头体和 PVS（Quake 3 风格）中的每组纹理。解决这个问题的想法是什么？

我是否想遍历我可以看到的每个区域（从后到前），并按纹理对所有可见三角形进行分组，然后一次全部渲染。出于某种原因，我总觉得这可能会更慢。首先排序并一次渲染所有区域或跳过排序并一次渲染每个区域是否更有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:23:59.110

是的，应该可以将纹理填充到纹理图集中。需要仔细考虑诸如纹理是否被平铺，以及您希望使用 mip-map 和过滤发生什么等问题。

我可能会建议在你整理好几何图形之前推迟这样做 - 将绘制调用的数量减少到一个合理的数字可能就是你需要做的所有事情。在现代硬件上，更改纹理的成本并不一定*那么*糟糕。

至于渲染关卡，在现代硬件上更常见的是从前到后渲染，而不是从后到前，以利用 z-buffer 和早期剔除（即，如果你在摄像机前面有一堵墙，并且您首先在启用 z 缓冲的情况下绘制它，硬件非常擅长拒绝您然后尝试在其后面绘制的东西）。

一种可能的方法是将 BSP 重新处理为更粗略的结构，例如简单的网格（或者可能是四叉树或八叉树）。你甚至不需要整齐地分割多边形，只需要一堆带有边界框的扇区，然后平截头体剔除然后松散地排序（从前到后）这些框。您也可以使用这种方法保留 PVS，但是当您的渲染块变得更大和更粗糙时，它的有用性可能会下降。

但是，在执行任何此操作之前，我绝对建议您设置一些基准测试并记录性能信息。除非您实际分析性能，否则您将无法确定自己是否在做正确的事情。如果你能准确地指出你正在做的最糟糕的事情是什么，你只需要修复它。

# java - 支持多用户写入的 SQLite for Java 的替代品

> ID：13737751
> 
> 赞同：1
> 
> 时间：2012-12-06T05:53:19.793
> 
> 标签：java, sqlite

有谁知道同时支持多个写入的 Java 的 sqlite 替代方案？

我知道检查数据库是否可用并暂停写入尝试直到它可以实际写入的选项。但我仍在寻找可以真正进行并发写入的替代方案。

**更新（进一步解释）：** 我正在建立一个系统，其中将有多个用户键入一个数据库，所以我自然希望能够不间断地工作而不是不得不暂停等待数据库可用于写作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:40:46.260

看看[H2](http://www.h2database.com/html/main.html) - 它是功能丰富的基于文件的可嵌入数据库。

# android - 将滚动视图放在向上和向下按钮下

> ID：13737754
> 
> 赞同：4
> 
> 时间：2012-12-06T05:53:30.973
> 
> 标签：android, button, scrollview, updown

我想在向上和向下按钮下显示滚动视图，如图所示。并且在点击向上和向下箭头滚动条后应该滚动并且在长按向上和向下按钮后它应该继续滚动直到结束点。请告诉我我们如何实现这一点。

提前致谢。

![在此处输入图像描述](../Images/7d8c2b2646fa63349fa4c473310bd7fa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:29:29.517

在按钮的点击事件上执行`ScrollView .pageScroll()`或。`ScrollView.smoothScrollBy()`

`ScrollView.scrollBy()`当长按事件发生时，使用 Runnable 继续调用。我为你写了一个演示。

```
public class TestAndroidActivity extends Activity implements OnTouchListener,
        OnGestureListener {
    private static final String TAG = "TestAndroid";
    private Handler mHandler = new Handler();
    private ScrollView mScrollView;
    private Button mBtnUp;
    private Button mBtnDown;
    private View mCurBtn;
    private GestureDetector mDetecor;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mScrollView = (ScrollView) findViewById(R.id.scroll);
        mBtnUp = (Button) findViewById(R.id.btn_up);
        mBtnDown = (Button) findViewById(R.id.btn_down);
        mBtnUp.setOnTouchListener(this);
        mBtnDown.setOnTouchListener(this);
        mDetecor = new GestureDetector(this, this);
    }

    private long mStartTime = 0;
    private float mSpeed = 0.5f;
    private Runnable mScrollRunnable = new Runnable() {

        @Override
        public void run() {
            int dy = (int) ((SystemClock.uptimeMillis() - mStartTime) * mSpeed);
            mStartTime = SystemClock.uptimeMillis();
            int direction = getCurrentBtnDirection();
            if (direction == View.FOCUS_UP)
                dy *= -1;
            mScrollView.scrollBy(0, dy);
            mHandler.post(this);
        }
    };

    private int getCurrentBtnDirection() {
        if (mCurBtn == mBtnUp) {
            return View.FOCUS_UP;
        } else if (mCurBtn == mBtnDown) {
            return View.FOCUS_DOWN;
        } else
            return 0;
    }

    private void perfromPageScroll() {
        int direction = getCurrentBtnDirection();
        mScrollView.pageScroll(direction);
    }

    private void stopContinuousScroll() {
        mStartTime = 0;
        mHandler.removeCallbacks(mScrollRunnable);
    }

    private void startContinuousScroll() {
        mStartTime = SystemClock.uptimeMillis();
        mHandler.post(mScrollRunnable);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        mCurBtn = v;
        mDetecor.onTouchEvent(event);
        if (event.getAction() == MotionEvent.ACTION_UP) {
            stopContinuousScroll();
        }
        return true;
    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        perfromPageScroll();
        return true;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        startContinuousScroll();
    }

    @Override
    public boolean onDown(MotionEvent e) {
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        return false;
    }

} 
```

如果要检测 ScrollView 的滚动状态来启用或禁用按钮，则必须编写一个 CustomView 来扩展 ScrollView 并重写 OnScrollChanged() 方法。

**编辑：**添加布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="1\n\n\n\n\n\n2\n\n\n\n\n\n3\n\n\n\n\n4\n\n\n\n5\n\n"
            android:textSize="32sp" />
    </ScrollView>

    <Button
        android:id="@+id/btn_up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="up" />

    <Button
        android:id="@+id/btn_down"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="down" />

</RelativeLayout> 
```

**EDIT2：**如果您使用的是 ListView，则可以使用`ListView.smoothScrollBy()`替换`ScrollView.scrollBy()`. ListView中没有pageScroll()方法，自己写吧，不是很难。

**EDIT3：** ListView 的 pageScroll

```
private void pageScroll(ListView l) {
    l.smoothScrollBy(l.getHeight(), 300);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:53:30.707

要前往顶部，您可以使用该方法

```
ScrollView.fullScroll(ScrollView.FOCUS_UP) 
```

对于滚动部分..基本上你可以使用该功能

```
ScrollView.smoothScrollTo (int x, int y) 
```

您可以通过和获取当前`X, Y`位置，然后添加一些数量以进一步滚动。`getScrollX()``getScrollY()`

# html - 如何使用 HTML 中的 mailto 在 Outlook 中附加文件？

> ID：13737761
> 
> 赞同：2
> 
> 时间：2012-12-06T05:54:26.717
> 
> 标签：html, email

我使用以下代码使用 Outlook 发送邮件：

```
<a href="mailto:test@example.com?Subject=Hello%20test&body=Testing&attach=/Users/administrator/Desktop/test.txt">
Send Mail</a> 
```

问题是我无法在 Outlook 中附加文件。我尝试过使用“附件”参数，但出现了同样的问题。可以完成还是有替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:33:56.423

这是不允许的。请注意仅通过单击链接附加本地文件的风险，攻击者可能会收到您磁盘上的任何敏感文件！

# ruby-on-rails - 根据条件块从数组中删除一个元素并返回该元素

> ID：13737768
> 
> 赞同：1
> 
> 时间：2012-12-06T05:55:14.700
> 
> 标签：ruby-on-rails, ruby

是否有一种快速的 Ruby 或 Rails 方法可以根据块中提供的条件从数组中删除一个元素，然后返回该元素？

假设：

```
e1.good? # false
e2.good? # true
e3.good? # true
a = [e1, e2, e3] 
```

是否有方法 delete_and_return_if 这样做：

```
a.delete_and_return_if { |e| e.good? }      # delete e2 from a and returns e2
[e1].delete_and_return_if { |e| e.good? }   # returns nil 
```

或者至少有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:59:09.690

有delete_if，这是一个Ruby函数。[http://www.ruby-doc.org/core-1.9.3/Array.html](http://www.ruby-doc.org/core-1.9.3/Array.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:05:29.840

这将更新数组并返回已删除的条目：

```
a = [1, 2, 3]

p a
# => [1, 2, 3]

deleted = a.delete a.detect {|e| e == 2 }
p deleted
# => 2

p a
# => [1, 3] 
```

所以你可以这样做：

```
a.delete a.detect(&:good?) 
```

**更新：**感谢@oldergod 提醒我`detect`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T06:15:17.293

如果您没有重复项或您想删除所有相同的元素，您可以这样做

```
a.delete(a.detect(&:good?)) 
```

*   `a.detect(&:good?)`将返回第一个`good?`对象，或者`nil`如果没有。
*   `a.delete(elem)`将删除并返回您的元素。

或者，如果您有重复项并且只想删除第一个：

```
a.delete(a.index(a.detect(&:good?))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:02:32.930

```
 a = [e1, e2, e3]

 a.delete_if{|e|!e.good?}

 it will delete e1\. and returns e2 and e3 
```

# jquery - 动画高度以适应 DOM 元素添加到容器

> ID：13737770
> 
> 赞同：1
> 
> 时间：2012-12-06T05:55:32.573
> 
> 标签：jquery, css

我想在内容高度变化时对容器元素的高度变化进行动画处理。我正在努力 ：

```
.container {
  height: auto
  background: #eee
  -webkit-transition: height 0.4s ease-in-out;
  -moz-transition: height 0.4s ease-in-out;
  -ms-transition: height 0.4s ease-in-out;
  -o-transition: height 0.4s ease-in-out;
  transition: height 0.4s ease-in-out;
} 
```

然后调用：

```
$('.container').html('...'); 
```

但是，每次容器都会自动捕捉。如果我打电话：

```
$('.container').height(400); 
```

动画出现。但是，我不确定内容的大小。关于更改内容时如何触发它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:00:06.567

我可能错过了一个技巧，但今晚我一直在做同样的事情。

您不能动画到自动高度（甚至最小高度）或过渡中断。

您可以使用 max-height: 0; 作为起点。

唯一阻止我的是高度问题——幸运的是我的元素是固定高度的。

*   忘了提 - 百分比应该可以制作动画，我的意思是一个固定的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:15:27.403

通过计算内部内容的高度并在父级上使用 height() 显式设置来修复。这可行，但有点痛苦，因为需要在调整窗口大小等时重新计算高度。

# .net - 使用 EF 查询平面表结构

> ID：13737774
> 
> 赞同：0
> 
> 时间：2012-12-06T05:55:42.080
> 
> 标签：.net, entity-framework, entity-framework-4

我正在使用 EF (4.4) 并且有一个包含`N`名为`Value1`...的列的平面表`ValueN`。

基于另一列 ( `ValueIndex`) 我需要获取`N`值为`ValueN-1`、`ValueN`和的三列`ValueN+1`

例如，如果`ValueIndex`我`3`需要获取`Value2`,`Value3`和`Value4`.

*为简单起见，假设`ValueIndex`没有边界问题，即不是`1`或`N`我有 7`Value`列。*

如果这是在内存中，我会做（并且可能会做）这样的事情：

```
table.Select(t =>
  new {
    ValueIndex = t.ValueIndex, 
    Values = new[] {
      Value1, Value2, Value3, Value4, Value5, Value6, Value7
    }
  })
.Select(t => 
  new[] {
    Values[ValueIndex-1], Values[ValueIndex], Values[ValueIndex+1]
  }
); 
```

不幸的是，由于不支持数组索引，这在 EF 中不起作用。

作为一种解决方法，我尝试用索引器选择替换数组索引：

```
.Select(t => 
  new[] {
    t.Values.Where((v, i) => i == t.ValueIndex-1).First(),
    t.Values.Where((v, i) => i == t.ValueIndex).First(),
    t.Values.Where((v, i) => i == t.ValueIndex+1).First(),
  }
); 
```

但不幸的是，这也不支持（LINQ to Entities 无法识别变量`Where`上的方法）。`t.Values`

我并不特别希望在我的代码中使用巨大的 switch 语句：

```
tables.Select(t => 
  new[] {
    t.ValueIndex == 2 ?
      new[] {
        t.Value1,
        t.Value2,
        t.Value3,
      }
    : t.ValueIndex == 3 ?
      new[] {
        t.Value2,
        t.Value3,
        t.Value4,
      }
    : // Etc..
  }
); 
```

那么有什么方法可以实现我在使用 EF（即可转换为 SQL）之后的查询，而不是大量的开关/案例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:11:15.607

实体框架（和许多 ORM）是为关系数据库设计的。在其他情况下（文档存储或键值存储），它们往往会分崩离析......

也就是说，如果您的 Entity Framework 仍然是这里的正确工具，请考虑如何在 SQL 中处理它……这对我来说听起来有点像一个支点。

```
SELECT CASE WHEN ValueIndex = 1 THEN Value0 WHEN ValueIndex = 2 THEN Value1...... END,
   CASE WHEN ValueIndex = 1 THEN Value1 WHEN ValueIndex = 2 THEN Value2.... END,
   CASE When ValueIndex = 1 THEN Value2 WHEN ValueIndex = 2 THEN Value3..... END
FROM .... 
```

那么......你可以在 LINQ 中构建它吗？当然...

```
from t in in table
select new 
{
     ValueIndex = t.ValueIndex,
     First = t.ValueIndex == 1 ? t.Value0 : (t.ValueIndex == 2 ? t.Value1 : ....),
     Second = t.ValueIndex == 1 ? t.Value1 : (t.ValueIndex == 2 ? t.Value2 : ....),
     Third = t.ValueIndex == 1 ? t.Value2 : (t.ValueIndex == 2 ? t.Value3 : ....)
} 
```

虽然有点丑...

如果你想让它可持续，你可以很容易地动态地构建上面的表达式树。

所以你可以有类似的东西

```
public class Triplet
{
    public string Item1 { get; set; }
    public string Item2 { get; set; }
    public string Item3 { get; set; }
}

public static IQueryable<Triplet> GetTriplets(IQueryable<TableRow> source)
    {
        var lambda =
            Expression
             .Lambda<Func<TableRow, Triplet>>(Expression.MemberInit(
                Expression.New(typeof (Triplet)),
                     CreateMemberBind(-1),
                     CreateMemberBind(0),
                     CreateMemberBind(1)));

        return source.Select(lambda);
    } 
```

# sql - 连续的 LEFT SQL 连接回原来的

> ID：13737783
> 
> 赞同：0
> 
> 时间：2012-12-06T05:56:44.097
> 
> 标签：sql, left-join

我需要在遗留 Foxpro 应用程序中重做 sql 语句，并且根本不明白它是否有意义。语法有点特定 - 它通过一些连接将临时表中的数据提取到同一个临时表（覆盖）中。

```
SELECT aa.*,b.spa_date FROM (ALIAS()) aa INNER JOIN jobs ON aa.seq=jobs.seq ;
LEFT JOIN job2 ON jobs.job_no=job2.rucjob;
left join jobs b on b.job_no=job2.job_no;
WHERE jobs.qty1<>0 INTO CURSOR (ALIAS()) 
```

由于从联接表（ spa_date ）中仅添加了一个字段，因此在 2 个左联接中是否存在任何点，或者我遗漏了一些东西。是不是相当于

```
SELECT aa.*,jobs.spa_date FROM (ALIAS()) aa INNER JOIN jobs ON aa.seq=jobs.seq ;
WHERE jobs.qty1<>0 INTO CURSOR (ALIAS()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:12:01.770

它们是不同的，因为 b.spa_date 来自第二个左连接。如果没有左连接，您可能会丢失过滤的行。

您需要知道原始查询的意图，并可能重写它以使其更有意义，但我会说这两个查询是不同的。

# mysql - mysql how to find the total number of child rows with respect to a parent

> ID：13737784
> 
> 赞同：1
> 
> 时间：2012-12-06T05:56:49.523
> 
> 标签：mysql, select, recursive-query

I have a table which having parent child relatiionship like this,

```
Employee_ID     |  Employee_Manager_ID   |  Employee_Name
--------------------------------------------------------
1               |  1                    |  AAAA
2               |  1                    |  BBBB
3               |  2                    |  CCCC
4               |  3                    |  DDDD
5               |  3                    |  EEEEE 
```

Is it possible to get the count of all the employees come under a particular employee(Not only direct child,count of all the childs of child ) using a single query ?

```
Eg if the input  = 1
output should be 4

if input  = 2 ,output should be  3 
```

thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:11:22.903

**假设您的表是：**

```
mysql> SELECT * FROM Employee;
    +-----+------+-------------+------+
    | SSN | Name | Designation | MSSN |
    +-----+------+-------------+------+
    | 1   | A    | OWNER       | 1    |
    | 10  | G    | WORKER      | 5    |
    | 11  | D    | WORKER      | 5    |
    | 12  | E    | WORKER      | 5    |
    | 2   | B    | BOSS        | 1    |
    | 3   | F    | BOSS        | 1    |
    | 4   | C    | BOSS        | 2    |
    | 5   | H    | BOSS        | 2    |
    | 6   | L    | WORKER      | 2    |
    | 7   | I    | BOSS        | 2    |
    | 8   | K    | WORKER      | 3    |
    | 9   | J    | WORKER      | 7    |
    +-----+------+-------------+------+
    12 rows in set (0.00 sec) 
```

**查询是**：

```
SELECT  SUPERVISOR.name AS SuperVisor, 
        GROUP_CONCAT(SUPERVISEE.name  ORDER BY SUPERVISEE.name ) AS SuperVisee, 
        COUNT(*)  
FROM Employee AS SUPERVISOR 
  INNER JOIN Employee SUPERVISEE ON  SUPERVISOR.SSN = SUPERVISEE.MSSN 
GROUP BY SuperVisor; 
```

查询将产生如下结果：

```
 +------------+------------+----------+
    | SuperVisor | SuperVisee | COUNT(*) |
    +------------+------------+----------+
    | A          | A,B,F      |        3 |
    | B          | C,H,I,L    |        4 |
    | F          | K          |        1 |
    | H          | D,E,G      |        3 |
    | I          | J          |        1 |
    +------------+------------+----------+
    5 rows in set (0.00 sec) 
```

[**答案**]：这对于一个级别（立即监督）要查找所有可能级别的所有监督，您必须使用 while 循环（使用存储过程）。

**尽管可以检索每个级别的员工，然后获取他们的 UNION，但通常我们不能在不使用循环机制的情况下**指定诸如“检索所有级别的员工的监督者”之类的查询。"

[参考](http://www.ii.metu.edu.tr/~aybar/courses/MIN710/F12/RelAlg.pdf)：在这张幻灯片中阅读幻灯片编号 23。这本书是“第四版数据库系统基础”，在“关系代数和关系微积分”一章中有一个主题“递归闭包运算”。

* * *

为创建表添加查询，可能对您有帮助：

```
mysql> CREATE TABLE IF NOT EXISTS `Employee` (
    ->   `SSN` varchar(64) NOT NULL,
    ->   `Name` varchar(64) DEFAULT NULL,
    ->   `Designation` varchar(128) NOT NULL,
    ->   `MSSN` varchar(64) NOT NULL, 
    ->   PRIMARY KEY (`SSN`),
    ->   CONSTRAINT `FK_Manager_Employee`  FOREIGN KEY (`MSSN`) REFERENCES Employee(SSN)
    -> ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
Query OK, 0 rows affected (0.17 sec) 
```

您可以检查表，如：

```
mysql> DESCRIBE Employee;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| SSN         | varchar(64)  | NO   | PRI | NULL    |       |
| Name        | varchar(64)  | YES  |     | NULL    |       |
| Designation | varchar(128) | NO   |     | NULL    |       |
| MSSN        | varchar(64)  | NO   | MUL | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:28:07.363

你可以试试这个：

```
 SELECT
      table_name.Employee_ID,
      table_name.Employee_Name,
      COUNT(*) AS children
    FROM
      table_name AS t_one
    INNER JOIN table_name AS t_two ON
      t_two.Employee_Manager_ID=t_one.Employee_ID
    GROUP BY
      t_one.Employee_ID 
```

# android - 如何在 ActionBar 的正确位置设置文本？

> ID：13737785
> 
> 赞同：3
> 
> 时间：2012-12-06T05:56:57.063
> 
> 标签：android, android-actionbar

我想在 ActionBar 的正确位置设置一个 Text。我可以使用`setTitle()`and`setSubTitle()`方法设置标题和副标题。这些文本出现在 ActionBar 的左角。有没有办法把文字放在右边。我可以在这里使用 TextView 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:20:35.450

最好添加一个 MenuItem，默认情况下它会粘在右边。并使**showAsAction="withText"**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/searchMenuItem"
        android:showAsAction="always|collapseActionView"
        android:title="Search"/>
</menu> 
```

如果您希望**标题**位于右侧。我不认为你能做到这一点。尝试使用自定义 ActionBar 样式

# android - 以编程方式设置组件的宽度和高度

> ID：13737786
> 
> 赞同：3
> 
> 时间：2012-12-06T05:57:00.183
> 
> 标签：android

在 Android 2.3.3 中开发的应用程序

我正在开发一个计算器应用程序。

问题 1 ::: 我有大约 16 个按钮。有没有一种方法可以在没有它的情况下使用循环（或）设置所有按钮的宽度和高度。我希望所有的按钮都是统一的。

问题 2 ::: 您如何看待这种做法？是好是坏？请解释为什么？假设我每行有 4 个按钮。如果我以编程方式获取屏幕的宽度和高度，然后划分（宽度/ 4）并为每个按钮添加边距，然后分别设置按钮的宽度（宽度/ 4 +边距），这会以某种方式解决问题在不同尺寸的屏幕上显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T06:02:19.777

根据设备宽度和高度同等提供视图宽度或高度的最佳方法是使用 weight 属性，举个例子，我们有一个线性布局，有四个按钮，宽度相等：

```
<LinearLayout android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:orientation="horizontal">
     <Button android:layout_width="0dip"
         android:layout_weight="1"
         android:layout_height="wrap_content"
         android:text="button1"/>
     <Button android:layout_width="0dip"
         android:layout_weight="1"
         android:layout_height="wrap_content"
         android:text="button2"/>
     <Button android:layout_width="0dip"
         android:layout_weight="1"
         android:layout_height="wrap_content"
         android:text="button3"/>
     <Button android:layout_width="0dip"
         android:layout_weight="1"
         android:layout_height="wrap_content"
         android:text="button4"/>
</LinearLayout> 
```

但是，如果您仍想在运行时提供布局宽度和高度，则可以使用`setLayoutParams(new LayoutParams(100, 100));`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T06:04:30.137

**运行时设置视图宽度和高度的步骤**

**首先**使用 view.getLayoutParams() 获取布局参数。

**其次**设置高度和宽度值，然后最后设置视图的布局参数。

```
LayoutParams params = null;
Button button = (Button)findViewById(R.id.button);
params = button.getLayoutParams();
params.height = 70;
params.width = 70;
button .setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T06:18:45.387

**要记住的事情：**

*   将孩子的 android:layout_width 设置为“0dp”
*   设置父级的 android:weightSum （编辑：正如 Jason Moore 所注意到的，此属性是可选的，因为默认情况下它设置为子级的 layout_weight 总和）
*   按比例设置每个孩子的 android:layout_weight (eg weightSum="5", 三个孩子: layout_weight="1", layout_weight="3", layout_weight="1")

例子：

```
<Button
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="1" />

 <Button
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="1" />

<Button
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="1" />

 <Button
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="1" />

  <Button
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="1" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/f8a65c7a2981234543fcbc04b934ed13.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:02:29.413

您可以通过在 XML 中设置元素然后在 Java 代码中修改高度和宽度来实现：

```
Button btn1 = (Button)findViewById(R.id.btn1);    
LayoutParams layoutParams = btn1.getLayoutParams();
layoutParams.width(int width);
layoutParams.height(int height);
btn1.setLayoutParams(layoutParams); 
```

**或者**你可以只使用 Java 来创建整个布局：

```
for(int x = 0; x<3; x++){
    for(int y=0; y<3; y++){
        Button btn = new Button(this);
        ... //Set layoutParams and button info for each button.
    }    
} 
```

**或者**另一种选择是使用线性布局并使用元素权重。

```
<Button
    android:id="@+id/register"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    weight=".3" /> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-06T06:20:53.857

试试这个代码

```
LayoutParams params = null;
Button button = (Button)findViewById(R.id.button);
params = button .getLayoutParams();
params.height = 100;
params.width = 100;
button .setLayoutParams(params); 
```

# oracle - Oracle Database creation with exitsting tables

> ID：13737792
> 
> 赞同：0
> 
> 时间：2012-12-06T05:57:21.560
> 
> 标签：oracle

I've database with 15 tables. Now due to development process one column has to added to all the tables in the database. This changes should not affect the existing process because some other services are also consuming this database. So to accomplish it I thought of creating a new database. Is there are any other way to do it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:57:01.190

通常创建一个新模式（“用户”）并在该新模式中创建表就足够了。在 Oracle 中，同名表可以存在于多个模式中。

```
CREATE USER xxx IDENTIFIED BY yyy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:58:10.083

您可以为开发创建另一个架构并将表导入新架构。开发人员应该使用开发架构而不是生产架构。您也可以创建新数据库并从当前数据库导入，但这可能是最后一个选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:08:19.380

有什么问题`alter table T add (COL varchar2(5));`？

当然，依赖存储过程或包变得无效。您可以不理会它们，然后第一次调用将返回异常并自动重新编译被调用的过程。或者你可以`alter procedure P compile;`。

# lucene - Neo4j - incasesensitive lucene query

> ID：13737794
> 
> 赞同：0
> 
> 时间：2012-12-06T05:57:26.253
> 
> 标签：lucene, neo4j, cypher

I am doing suggestions from Neo4j database with cypher query, through a php library. My concern is that it gives suggestion slowly. I noticed that if i use lucene query in index lookup the query runs faster, but i did not find any method that does incasesensitive search. The query would look something like this:

```
START n = node:Destination('name:*term*')
... 
```

but this is case sensitive. So if the value stored in db is for example "Term" i wont get any results. Is there any way that i can do case insensitive search?

# javascript - Script or software: Take a section of HTML from a page and use it in another page

> ID：13737795
> 
> 赞同：0
> 
> 时间：2012-12-06T05:57:25.967
> 
> 标签：javascript, jquery, html

Bear with me, I'm not a programmer.

Is there a JavaScript or software or something that can take a chunk of HTML from a page that sits in one domain, and use it/parse it in another page that sits in a different domain?

Let me make a quick example:

On domain A - ***a.com*** is this HTML:

```
<div>
  <ul>
    <li>Item 1</li>
    <li>Item 1</li>
    <li>Item 1</li>
  <ul>
  <p>Pargraph info...</p>
  <table>
    ...
  <table>
</div> 
```

On domain B -- ***b.com*** I would like to use only the `<table>` from domain ***a.com***

Is this doable?

Any help on this is greatly appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:05:41.863

跨域资源共享是可行的。见：[http ://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)

那里的问题是您需要能够配置您从中请求数据的站点以接受请求的来源。除非您拥有该服务器，否则基本上不会发生。

您可以研究的另一种方法是编写一个程序来从您想要的页面中提取 HTML。但是您并没有在您的网站中使用 HTML，您只是在计算机上的程序中访问它。如果您只想为自己拉下表格，而不是将其用作另一个网站的一部分，这将是一个好方法。

# java - Getting multiple drop down list value from view in JSF 2.0

> ID：13737799
> 
> 赞同：1
> 
> 时间：2012-12-06T05:57:58.783
> 
> 标签：java, jsf-2

I am trying to use JSF to retrieve multiple drop down lists according to user input from the view to controller.

However seems I cannot find the correct way.

As the drop down lists are generated dynamically, I cannot hard code the id / name of the drop down list.

Here is my code in the view:

```
 <ui:repeat var="file" value="#{uploadBean.filesInZip}" varStatus="status">
                        <tr>
                            <td><h:outputText value="#{file.name}" /></td>
                            <td>
                                <h:selectOneMenu id="studentSelections" value="#{uploadBean.studentSelections}" name="studentSelections">
                                    <f:selectItems value="#{uploadBean.students}" var="student" 
                                        itemLabel="#{student.firstName}, #{student.lastName} (#{student.userId})" 
                                        itemValue="#{student.id}"/>
                                </h:selectOneMenu>
                            </td>
                        </tr>
                    </ui:repeat> 
```

I thought I could declare a List named ***studentSelections*** in the controller so that I could get all the user input of the drop down list, but seems I have failed.

So could anyone give a hand on it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:04:53.353

> *我以为我可以在控制器中声明一个名为 studentSelections 的列表，以便我可以获得下拉列表的所有用户输入，但似乎我失败了。*

这是正确的模型方法。在视图方面，您需要按索引引用列表值，如`<ui:repeat varStatus>`. 假设那`#{student.id}`是`Long`并且你有一个

```
private List<Long> studentSelections; 
```

那么这应该在你的特定情况下做

```
<h:selectOneMenu ... value="#{uploadBean.studentSelections[status.index]}"> 
```

* * *

**与具体问题**无关**[，`<h:selectOneMenu>`根本不支持该`name`属性](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/selectOneMenu.html)。摆脱它。JSF 自动生成一个。**

# c# - 从 sql 命令存储值并将其与值进行比较

> ID：13737805
> 
> 赞同：0
> 
> 时间：2012-12-06T05:58:23.603
> 
> 标签：c#, asp.net, sqlcommand

这是参考我之前的问题：

[在数据库中搜索数据](https://stackoverflow.com/questions/13720193/search-data-in-database)

我使用以下代码来执行我的查询。但是我在存储命令中的值然后使用该结果比较值时遇到问题。

这是我的代码：

```
SqlDataReader sdrDatanew = null;
string strnew;
string connectionString = WebConfigurationManager.ConnectionStrings["Gen_LicConnectionString"].ConnectionString;
SqlConnection connew = new SqlConnection(connectionString);
connew.Open();
strnew = "select User_Type from User_Details where User_Type='" + ddlUserSel.SelectedItem.Value + "' AND LoginID = '" + txtUserName.Text + "' AND Password = '" + txtPassword.Text + "'";
SqlCommand sqlCommnew = new SqlCommand(strnew, connew);
sdrDatanew = sqlCommnew.ExecuteReader();
if (sdrDatanew.HasRows)
  {
     if (sdrDatanew.Read())
      {
          //Here I want to store the result from the sqlcommand in a variable
      }
  }

    switch (//Here I want to use the variable in a switch case) //<---
    {
        case 0:
            Response.Redirect("Lic_Gen.aspx");
            break;
        case 1:
            Response.Redirect("Cust_Page.aspx");
            break;
    }

    connew.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:05:23.383

查看[使用 DataReader (ADO.NET) 检索数据](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.100%29.aspx)

更具体地说，在线

```
Console.WriteLine("{0}\t{1}", reader.GetInt32(0),reader.GetString(1)); 
```

在任何获取功能

例如

[SqlDataReader.GetString 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getstring%28v=vs.100%29.aspx)和[SqlDataReader.GetInt32 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getint32%28v=vs.100%29.aspx)

所以你可以尝试类似的东西

```
int userType = 0;
if (sdrDatanew.HasRows)
{
    if (sdrDatanew.Read())
    {
        userType = sdrDatanew.GetInt32(0); //something like this
    }
}

switch (userType) //something like this
{
    case 0:
        Response.Redirect("Lic_Gen.aspx");
        break;
    case 1:
        Response.Redirect("Cust_Page.aspx");
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:07:08.870

您需要调用`sdrDatanew.GetInt32(0)`方法并使用`parameterized`sql语句。

```
using(SqlConnection connew = new SqlConnection(connectionString))
 {
  strnew = @"select User_Type from User_Details where User_Type=@usertype 
             AND LoginID=@loginid AND Password = @password";
  using(SqlCommand sqlCommnew = new SqlCommand(strnew, connew))
   {
     sqlCommnew.Parameters.AddWithValue("@usertype",ddlUserSel.SelectedItem.Value);
     sqlCommnew.Parameters.AddWithValue("@loginid",txtUserName.Text);
     sqlCommnew.Parameters.AddWithValue("@password",txtPassword.Text);

     connew.Open();
     sdrDatanew = sqlCommnew.ExecuteReader();

     int userType=-1;
     if(sdrDatanew.Read())
        userType=sdrDatanew.GetInt32(0);

     switch (userType)
      {
       case 0:
           Response.Redirect("Lic_Gen.aspx");
           break;
       case 1:
           Response.Redirect("Cust_Page.aspx");
           break;
      }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:03:57.493

您的代码看起来正确。在行前声明你的变量

```
if (sdrDatanew.HasRows) 
```

并将值存储在您想要的位置。您将能够在您编写 switch case 的地方使用变量。

//这将存储行中第一列的值。

```
var row=((IDataRecord) (sdrDatanew))[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:08:17.970

如果你想得到结果试试这个代码

```
while (sdrDatanew.Read()) {
String userDetails = sdrDatanew("User_Details").ToString;

} 
```

我无法理解你在做什么。你想得到结果吗？结果是一个字符串还是字符串的集合？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T06:18:05.210

请尝试以下操作：

```
 string value = string.Empty
 if (sdrDatanew.HasRows)
 {
     while (sdrDatanew.Read())
     {
          value= results[0].ToString();
     }
 } 
```

或者因为它只是您选择以下内容的一列：

```
 using (SqlCommand cmd = conn.CreateCommand())
                {
                    cmd.CommandText = "SELECT 'column' from 'table' WHERE 'column' ='criteria' ";

                    string value = cmd.ExecuteScalar().ToString();
                } 
```

# joomla2.5 - how to write an onclick function in joomla registration section

> ID：13737806
> 
> 赞同：0
> 
> 时间：2012-12-06T05:58:23.020
> 
> 标签：joomla2.5

First of all I am new to this joomla CMS. I have a joomla project. here i have customized the userprofile plugin and added some more fields . in registration form i need an extra button named "Save for later ". thus my form contains 3 button ( save for later, Register and cancel )

i need to write a javascript function in the onclick event of "save for later button ".

So i have done

In `components/com_user/views/registration/tpl/default.php` I have created a button as in normal way. and wrote a javascript function call on this

```
<input  type="submit" class="validate" value="Save For Later" name="SaveDraft" onclick="fnSaveDraft()"> 
```

At the top of the page i write the function

```
<script language="javascript" type="text/javascript">
function fnSaveDraft() {
alert('hai');
return false;
}
</script> 
```

But nothing happend

Please advise me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:09:05.693

我想建议你不要更改核心文件，除非你真的需要。你可以使用模板覆盖的方法来完成任务。有关详细信息，请访问该链接。 [如何覆盖 Joomla 的输出！核心](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)。

对于您的问题，您正在使用输入类型，`submit`这就是您的表单将提交而您的函数未被调用的原因。您可以将类型用作按钮，然后您的任务将完成。用此替换您的输入字段。

```
<input  type="button" class="validate" value="Save For Later" name="SaveDraft" onclick="fnSaveDraft()"> 
```

# ruby-on-rails - 骨干导轨保存不工作

> ID：13737809
> 
> 赞同：2
> 
> 时间：2012-12-06T05:58:37.673
> 
> 标签：ruby-on-rails, backbone.js, coffeescript

我是 Backbone 的新手，将模型保存到数据库时遇到问题。单击时，“个人资料”字段应更新为“100”，但它不起作用：

$->

```
class User extends Backbone.Model
    url: -> '/users/' + this.get("id")  '.json'

class Users extends Backbone.Collection
    model: User

class UserView extends Backbone.View
    tagName: "li"
    events:
        "click" : "changeProfile"

    render: -> $(@el).html( @model.get "name" )
    changeProfile: -> 
        $('li').removeClass('selected')
        $(@el).addClass('selected')
        @model.set( 'profile' : '100' ).save()

users = new Users
users.url = "/users.json"
users.fetch(
    success: ->
        _.each users.models, (model) ->
            view = new UserView( model: model )
            $('ul').append view.render()
) 
```

'users' 控制器/'user' 模型被搭建（并且控制器以 json 格式呈现）。我正在使用 Backbone 和 Rails 的最新版本。有人可以帮忙吗？

（Chrome 中的 Javascript 控制台注册以下错误：“Uncaught TypeError: number is not a function”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:13:15.903

您`url`的 for`User`缺少一个`+`：

```
class User extends Backbone.Model
    url: -> '/users/' + this.get("id")  '.json'
    #---------------------------------^^ 
```

最后一部分是这样解释的：

```
this.get("id")('.json') 
```

并且由于`get('id')`返回一个数字，因此您会收到“数字不是函数”错误。添加缺失`+`以获取字符串连接或使用 CoffeeScript 的插值：

```
url: -> '/users/' + this.get('id') + '.json' 
```

或者

```
url: -> "/users/#{this.get('id')}.json" 
```

# c# - Need to populate several labels from XML file, is there a faster way?

> ID：13737812
> 
> 赞同：0
> 
> 时间：2012-12-06T05:58:52.917
> 
> 标签：c#, linq-to-xml, ienumerable

I have an XML file I am loading and breaking the document down into Ienumerable then putting each element into a label on a winform. sofar I have the following code, which works

```
public void PopulateGameBoard()
    {
         XDocument gameFiles = XDocument.Parse(Properties.Resources.Jeopardy);

         IEnumerable<string> categories =
             from category in gameFiles.Descendants("category")
             select (string)category.Attribute("name");

         string first = categories.ElementAt(0);
         cat1HeaderLabel.Text = first;
         string second = categories.ElementAt(1);
         cat2HeaderLabel.Text = second;
         string third = categories.ElementAt(2);
         cat3Label.Text = third;
         string fourth = categories.ElementAt(3);
         cat4Label.Text = fourth;
         string fifth = categories.ElementAt(4);
         cat5Label.Text = fifth;

    } 
```

The final product is Jeopardy Game Board where the categories and questions will be pulled from an XML file

This is the first of 5 rows that I will need to do this with (5 lists going into 5 rows). I am wondering if there is a better way to code this where I dont end up with 25 statements assigning a variabel to an ElementAt() and then 25 assignments of that variable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:39:58.167

这里我尝试动态创建标签并为其赋值，这是手写代码，所以不保证它会编译，进行必要的更改

```
public void PopulateGameBoard()
{
     XDocument gameFiles = XDocument.Parse(Properties.Resources.Jeopardy);
     IEnumerable<string> categories =
         from category in gameFiles.Descendants("category")
         select (string)category.Attribute("name");
     Label[] cat1HeaderLabel= new Label[100];  
     int i = 0;
       categories.Each(p =>
       {
           cat1HeaderLabel[i] = new Label();
           cat1HeaderLabel[i].Text = p;
           this.Form.Controls.Add(cat1HeaderLabel[i]);
           i++;
       });
} 
```

# visual-sourcesafe - How to Automatically update build version and Build Date From Visual sourcesafe using Visual studio 2010

> ID：13737813
> 
> 赞同：0
> 
> 时间：2012-12-06T05:58:52.663
> 
> 标签：visual-sourcesafe

I have developed application in visual studio 2010\. I want to show the build version and build date in my application about us form. I want to get the Build version and Build date automatically get update from visual sourcesafe ( version controller)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:44:02.620

这是你的答案，谷歌搜索会让你更清楚你的问题

[http://social.msdn.microsoft.com/Forums/en-US/vssourcecontrol/thread/12a1d511-7694-4d5e-8005-ec762dfbdb1b/](http://social.msdn.microsoft.com/Forums/en-US/vssourcecontrol/thread/12a1d511-7694-4d5e-8005-ec762dfbdb1b/)

# java - Java：使用 Scanner 对象在线计算重复标记

> ID：13737817
> 
> 赞同：0
> 
> 时间：2012-12-06T05:59:12.070
> 
> 标签：java, token, java.util.scanner

**是的，这是“构建 Java 程序”中的一个练习，但它不是指定的问题。**

我需要编写一个读取以下文本作为输入的方法：

```
hello how how are you you you you  
I I I am Jack's Jack's smirking smirking smirking smirking smirking revenge  
bow wow wow yippee yippee yo yippee yippee yay yay yay  
one fish two fish red fish blue fish  
It's the Muppet Show, wakka wakka wakka 
```

并产生以下输出：

```
how*2 you*4
I*3 Jack's*2 smirking*4
wow*2 yippee*2 yippee*2 yay*3

wakka*3 
```

现在我知道我必须使用 Scanner 对象首先将一行读入字符串，然后对字符串进行标记。我没有得到的是我如何将标记读入字符串，然后立即将其与下一个标记进行比较。

CONSTRAINT -> 这是来自数组之前的一章，所以我想不使用一个来解决。

这是我到目前为止的代码：

```
public class Exercises {

public static void main(String[] Args) throws FileNotFoundException {

  Scanner inputFile = new Scanner(new File("misc/duplicateLines.txt"));
  printDuplicates(inputFile);

}

public static void printDuplicates(Scanner input){

  while(input.hasNextLine()){

        //read each line of input into new String
        String lineOfWords = input.nextLine();
        //feed String into new scanner object to parse based on tokens
        Scanner newInput = new Scanner(lineOfWords);

        while(newInput.hasNext()){

            //read next token into String
            String firstWord = newInput.next();

            //some code to compare one token to another

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:12:18.500

无需使用数组...您只需要在 while 循环中添加一点状态：

```
public class Exercises {

    public static void main(String[] Args) throws FileNotFoundException {

      // scanner splits on all whitespace characters by default, so it needs
      // to be configured with a different regex in order to preserve newlines
      Scanner inputFile = new Scanner(new File("misc/duplicateLines.txt"))
          .useDelimiter("[ \\t]");

      printDuplicates(inputFile);
    }

    public static void printDuplicates(Scanner input){

        int lastWordCount = 0;
        String lastWord = null;

        while(newInput.hasNext()){

            //read next token into String
            String nextWord = newInput.next();

            // reset counters on change and print out if count > 1
            if(!nextWord.equals(lastWord)) {
                if(lastWordCount > 1) {
                    System.out.println(lastWord + "*" + lastWordCount);
                }
                lastWordCount = 0;
            }

            lastWord = nextWord;
            lastWordCount++;
        }

        // print out last word if it was repeated
        if(lastWordCount > 1) {
            System.out.println(lastWord + "*" + lastWordCount);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:10:11.647

这个怎么样？我正在分配一个额外的字符串来跟踪前一个单词。

```
while(input.hasNextLine()){

    //read each line of input into new String
    String lineOfWords = input.nextLine();
    //feed String into new scanner object to parse based on tokens
    Scanner newInput = new Scanner(lineOfWords);

    String previousWord = "";
    String currentWord = "";
    while(newInput.hasNext()){

        //read next token into String
        previousWord = currentWord;
        currentWord = newInput.next();

        if (currentWord.equals(previousWord)) {
            // duplicate detected!
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T22:03:47.830

```
public class test2 {

  public static void main(String[] args) {

    Scanner input = null;
    try {
      input = new Scanner(new File("chinese.txt"));
    } catch (FileNotFoundException e) {

      e.printStackTrace();
    }

    String currentLine;
    String lastWord="";
    String currentWord="";
    int count=1;
    while (input.hasNextLine()){
       currentLine=input.nextLine();
       Scanner newInput = new Scanner (currentLine);
       //System.out.println(currentLine);
       while(newInput.hasNext()){

         currentWord=newInput.next();
         if (!currentWord.equals(lastWord)&& count>1){
           System.out.print(lastWord+"*"+count+" ");
           count=1;

         }
         else if (currentWord.equals(lastWord)){
           count++;

         }
         lastWord=currentWord;

       }
       if (count>1){
         System.out.print(lastWord+"*"+count+" ");

       }
       System.out.println();
       count=1;

    }

    input.close();

    }

} 
```

# javascript - 如何将画布绘图作为图像保存到文件夹中？

> ID：13737820
> 
> 赞同：2
> 
> 时间：2012-12-06T05:59:31.300
> 
> 标签：javascript, canvas

抱歉，这个问题已被多次询问，但由于缺乏合适的答案而再次询问。我需要将画布绘图另存为服务器上文件夹中的图像。不使用 AJAX 可以吗？该`toDataURL`方法将图像数据作为 base64 编码返回。我需要将它作为图像文件保存到文件夹中。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:55:39.020

在这里回复[如何使用 canvas.toDataURL() 将画布另存为图像？](https://stackoverflow.com/questions/10673122/how-to-save-canvas-as-an-image-with-canvas-todataurl)

或使用数据 URL 打开一个新窗口：

```
var data = canvas.toDataURL('image/png');
window.open(data); 
```

你只需要右键单击它...

# jquery - 如何在jQuery中拆分字符串并获取最后一个匹配项？

> ID：13737826
> 
> 赞同：8
> 
> 时间：2012-12-06T05:59:46.267
> 
> 标签：jquery, split, match

我有这样的字符串

`This is ~test content ~ok ~fine.`

我想使用jQuery获取`"fine"`特殊字符之后`~`和字符串中的最后一个位置。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T06:01:01.480

您可以使用 [substring()][1] 和 [lastIndexOf()][2] 的组合来获取最后一个元素。

```
str = "~test content ~thanks ok ~fine";    
strFine =str.substring(str.lastIndexOf('~'));
console.log(strFine );
```

您可以使用 [ **split()** ][4] 将字符串转换为数组并获取最后一个索引处的元素，最后一个索引是`length of array - 1`因为数组是从零开始的索引。

```
str = "~test content ~thanks ok ~fine";    
arr = str.split('~');
strFile = arr[arr.length-1];
console.log(strFile );
```

或者，只需在拆分后得到的数组上调用 pop

```
str = "~test content ~thanks ok ~fine";    
console.log(str.split('~').pop());
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T06:01:15.793

只需使用纯 JavaScript：

```
var str = "This is ~test content ~thanks ok ~fine";
var parts = str.split("~");
var what_you_want = parts.pop();
// or, non-destructive:
var what_you_want = parts[parts.length-1]; 
```

# iphone - Issue in removing Tags in HTML FIles using IPhone SDK?

> ID：13737831
> 
> 赞同：0
> 
> 时间：2012-12-06T06:00:11.573
> 
> 标签：iphone, html, objective-c, ios, nsstring

In My Application I need to Read HTML Page. For That Purapose I am removing the HTML tags Using the below code.

```
-(NSString *) stringByStrippingHTML:(NSString *)htmlStr
 {
    NSRange r;
    while ((r = [htmlStr rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
        htmlStr = [htmlStr stringByReplacingCharactersInRange:r withString:@""];
    htmlStr=[htmlStr stringByReplacingOccurrencesOfString:@"&nbsp;" withString:@"\n"];
    NSLog(@"html update is %@",htmlStr);
    return htmlStr; 
} 
```

I am Getting result removing all tags its works Fine. But **Now in My HTML page i need to read img Tag and their src element .** Is there any way t read specic tag complete info. Please any one Help in this isse.

Thank In Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T08:58:45.917

You can use

```
-(void)myMethod
{

NSString* htmlStr = @"<some>html</string>";
NSString* strWithoutFormatting = [self stringByStrippingHTML:htmlStr];

 }

-(NSString *)stringByStrippingHTML:(NSString*)str
 {
  NSRange r;
  while ((r = [str rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location     != NSNotFound)
  {
    str = [str stringByReplacingCharactersInRange:r withString:@""];
  }
  return str;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:25:08.417

此[链接](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)将帮助检查以下方法

> // 去除 HTML 标签和注释，去除多余的空格并解码 HTML 字符实体。
> - (NSString *)stringByConvertingHTMLToPlainText;
> 
> // 使用 GTM 解码所有 HTML 实体。
> - (NSString *)stringByDecodingHTMLEntities;
> 
> // 使用 GTM 编码所有 HTML 实体。
> - (NSString *)stringByEncodingHTMLEntities;
> 
> // 最小的 unicode 编码只会覆盖表中的字符
> - (NSString *)stringByEncodingHTMLEntities:(BOOL)isUnicode;
> 
> `<br />`// 用标签 替换换行符。
> - (NSString *)stringWithNewLinesAsBRs;
> 
> // 从字符串中删除换行符和空格。
> - (NSString *)stringByRemovingNewLinesAndWhitespace;

# php - 如何在mysql数据库中添加图像路径？

> ID：13737834
> 
> 赞同：1
> 
> 时间：2012-12-06T06:00:27.823
> 
> 标签：php, mysql

我对 PHP 很陌生，我需要你的帮助。

这是插入所有记录的insert.php文件。``这里也添加了文件浏览字段。此字段浏览照片。Temp_File 存储在缩略图文件夹中。我的问题是如何将图像路径保存在 MySQL 数据库中，以及如何从 dB 中检索此图像以在 view.php 中显示。

//这是insert.php

```
 {<?php require_once('Connections/db_sms.php'); ?>
    <?php
    if (!isset($_SESSION)) {
      session_start();
    }
    $MM_authorizedUsers = "";
    $MM_donotCheckaccess = "true";

    // *** Restrict Access To Page: Grant or deny access to this page
    function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
      // For security, start by assuming the visitor is NOT authorized. 
      $isValid = False; 

      // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
      // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
      if (!empty($UserName)) { 
        // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
        // Parse the strings into arrays. 
        $arrUsers = Explode(",", $strUsers); 
        $arrGroups = Explode(",", $strGroups); 
        if (in_array($UserName, $arrUsers)) { 
          $isValid = true; 
        } 
        // Or, you may restrict access to only certain users based on their username. 
        if (in_array($UserGroup, $arrGroups)) { 
          $isValid = true; 
        } 
        if (($strUsers == "") && true) { 
          $isValid = true; 
        } 
      } 
      return $isValid; 
    }

    $MM_restrictGoTo = "login.php";
    if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
      $MM_qsChar = "?";
      $MM_referrer = $_SERVER['PHP_SELF'];
      if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
      if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
      $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
      $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
      header("Location: ". $MM_restrictGoTo); 
      exit;
    }
    ?>
    <?php
    if (!function_exists("GetSQLValueString")) {
    function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
    {
      if (PHP_VERSION < 6) {
        $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
      }

      $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

      switch ($theType) {
        case "text":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $theValue = ($theValue != "") ? intval($theValue) : "NULL";
          break;
        case "double":
          $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
          break;
        case "date":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;
        case "defined":
          $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
          break;
      }
      return $theValue;
    }
    }

    $editFormAction = $_SERVER['PHP_SELF'];
    if (isset($_SERVER['QUERY_STRING'])) {
      $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
    }

    if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "regform")) {
      $insertSQL = sprintf("INSERT INTO tbl_student (s_id, first_name, last_name, gender, dob, father_name, email, address, city) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)",
                           GetSQLValueString($_POST['student_photo'], "text"),
                           GetSQLValueString($_POST['first_name'], "text"),
                           GetSQLValueString($_POST['last_name'], "text"),
                           GetSQLValueString($_POST['gender'], "text"),
                           GetSQLValueString($_POST['dob'], "date"),
                           GetSQLValueString($_POST['father_name'], "text"),
                           GetSQLValueString($_POST['email'], "text"),
                           GetSQLValueString($_POST['address'], "text"),
                           GetSQLValueString($_POST['city'], "text"));

      mysql_select_db($database_db_sms, $db_sms);
      $Result1 = mysql_query($insertSQL, $db_sms) or die(mysql_error());

      $insertGoTo = "view.php";
      if (isset($_SERVER['QUERY_STRING'])) {
        $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
        $insertGoTo .= $_SERVER['QUERY_STRING'];
      }
      header(sprintf("Location: %s", $insertGoTo));
    }
    ?>
    <?php require_once('Zend/Date.php'); ?>
    <?php $username = "root";
    $password = "";
    $host = "localhost";
    $database = "db_sms";

    // Make the connect to MySQL or die
    // and display an error.
    $link = mysql_connect($host, $username, $password);
    if (!$link) {
            die('Could not connect: ' . mysql_error());
    }

    // Select your database
    mysql_select_db ($database);?>

    <?php if (isset($_FILES['student_photo']) && $_FILES['student_photo']['size'] > 0) { 

              // Temporary file name stored on the server
              $tmpName  = $_FILES['student_photo']['tmp_name'];  
              // Create the query and insert
              // into our database.
              $i=rand(0,8888);
               $info=pathinfo($_FILES['student_photo']['name']);
                $ext=$info['extension'];
                $i++;
                $newname="pic_".$i.".".$ext;
                $target='thumbnails/'.$newname;
              move_uploaded_file($_FILES['student_photo']['tmp_name'], $target );
              $query = "INSERT INTO tbl_students ";
              $query .= "(student_photo) VALUES ('$data')";
              $results = mysql_query($query, $link);

              // Print results
              print "Thank you, your file has been uploaded.";

    }
    else {
       print "No image selected/uploaded";
    }

    mysql_close($link);
    ?>

    <?php
    if (!function_exists("GetSQLValueString")) {
    function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 

      if (PHP_VERSION < 6) {
        $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
      }

      $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

      switch ($theType) {
        case "text":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $theValue = ($theValue != "") ? intval($theValue) : "NULL";
          break;
        case "double":
          $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
          break;
        case "date":
           if ($theValue == "")
          {
              $theValue = "NULL";
          }
          else
          {
              $zendDate = new Zend_Date($theValue, "d/M/yyyy");
              $theValue = "'" . $zendDate->toString("dd-MM-yyyy") . "'";
          }
          break;
        case "defined":
          $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
          break;
      }
      return $theValue;
    }
    }

    mysql_select_db($database_db_sms, $db_sms);
    $query_rsStudent = "SELECT s_id, first_name, last_name, gender, dob, father_name, email, address, city, student_photo FROM tbl_student ORDER BY first_name ASC";
    $rsStudent = mysql_query($query_rsStudent, $db_sms) or die(mysql_error());
    $row_rsStudent = mysql_fetch_assoc($rsStudent);
    $totalRows_rsStudent = mysql_num_rows($rsStudent);

    $query_rsStudent = "SELECT first_name, last_name, gender, dob, father_name, email, address, city FROM tbl_student ORDER BY first_name ASC";
    $rsStudent = mysql_query($query_rsStudent, $db_sms) or die(mysql_error());
    $row_rsStudent = mysql_fetch_assoc($rsStudent);
    $totalRows_rsStudent = mysql_num_rows($rsStudent);
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Registration</title>

    <script src="SpryAssets/SpryValidationTextField.js" type="text/javascript"></script>
    <script src="SpryAssets/SpryValidationRadio.js" type="text/javascript"></script>
    <link href="SpryAssets/SpryValidationTextField.css" rel="stylesheet" type="text/css" />
    <link href="SpryAssets/SpryValidationRadio.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
    body,td,th {
        font-family: "Times New Roman", Times, serif;
        font-size: 18px;
        color: #FFFFFF;
    }
    body {
        background-color: #636;
        margin-left: 400px;
        margin-top: 100px;
        margin-right: 400px;
    }
    </style>
    </head>

    <body>
    <?php /* include('include/header.php');*/ ?>
    <form action="<?php echo $editFormAction; ?>" name="regform" id="regform" enctype="multipart/form-data" method="POST">

    <table width="1495" border="0">
      <tr>
        <td width="115">First Name</td>
        <td width="1370"><span id="spryfirstname">
        <input name="first_name" type="text"    maxlength="50" />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Last Name</td>
        <td><span id="sprylastname">
        <input name="last_name" type="text"    maxlength="50" />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Gender</td>
        <td><label>
        <span id="spryrggender">
        <input  type="radio" name="gender" value="Male" id="male" />
    Male<br />
    <input type="radio" name="gender" value="Female" id="female" />
    Female<br />
    <span class="radioRequiredMsg">Required.</span></span></label></td>
      </tr>
      <tr>
        <td>Date Of Birth</td>
        <td><span id="sprydob">
        <input name="dob" type="text"   />
        <span class="textfieldRequiredMsg">Date of Birth is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
      </tr>
      <tr>
        <td>Father's Name</td>
        <td><span id="spryfathername">
        <input name="father_name" type="text"  maxlength="50" />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>E-mail Address</td>
        <td><span id="spryemail">
        <input name="email" type="text"   />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Address</td>
        <td><span id="spryaddress">
        <input name="address" type="text"  />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>City</td>
        <td><span id="sprycity">
          <input name="city" type="text"  />
          <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Upload image</td>
        <td>
          <input type="file" name="student_photo" id="student_photo" />
          </td>
      </tr>
      <tr>
      <td></td>
      <td><input name="insert" type="submit" value="Insert Record" /></td>
      </tr>

    </table>
    <input type="hidden" name="MM_insert" value="regform" />
    </form>

    <p>&nbsp;</p>
    <script type="text/javascript">
    var sprytextfield1 = new Spry.Widget.ValidationTextField("spryfirstname", "none", {validateOn:["blur"], maxChars:50});
    var sprytextfield2 = new Spry.Widget.ValidationTextField("sprylastname", "none", {validateOn:["blur"], maxChars:50});
    var spryradio1 = new Spry.Widget.ValidationRadio("spryrggender", {validateOn:["blur"]});
    var sprytextfield3 = new Spry.Widget.ValidationTextField("sprydob", "date", {format:"dd/mm/yyyy", validateOn:["blur"], hint:"dd/mm/yyyy"});
    var sprytextfield4 = new Spry.Widget.ValidationTextField("spryfathername", "none", {validateOn:["blur"], maxChars:50});
    var sprytextfield5 = new Spry.Widget.ValidationTextField("spryemail", "email", {maxChars:50, validateOn:["blur"]});
    var sprytextfield6 = new Spry.Widget.ValidationTextField("spryaddress", "none", {maxChars:50, validateOn:["blur"]});
    var sprytextfield7 = new Spry.Widget.ValidationTextField("sprycity", "none", {maxChars:50, validateOn:["blur"]});
    var sprytextfield8 = new Spry.Widget.ValidationTextField("sprytextfield8");
    </script>
    </body>
    </html>
    <?php
    mysql_free_result($rsStudent);
    ?>

////////
This is view.php file in which record is displayed
----

<?php require_once('Connections/db_sms.php'); ?>
<?php
if (!isset($_SESSION)) {
  session_start();
}
$MM_authorizedUsers = "";
$MM_donotCheckaccess = "true";

// *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
  // For security, start by assuming the visitor is NOT authorized. 
  $isValid = False; 

  // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
  // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
    // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
    // Parse the strings into arrays. 
    $arrUsers = Explode(",", $strUsers); 
    $arrGroups = Explode(",", $strGroups); 
    if (in_array($UserName, $arrUsers)) { 
      $isValid = true; 
    } 
    // Or, you may restrict access to only certain users based on their username. 
    if (in_array($UserGroup, $arrGroups)) { 
      $isValid = true; 
    } 
    if (($strUsers == "") && true) { 
      $isValid = true; 
    } 
  } 
  return $isValid; 
}

$MM_restrictGoTo = "login.php";
if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
  $MM_qsChar = "?";
  $MM_referrer = $_SERVER['PHP_SELF'];
  if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
  if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
  $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
  header("Location: ". $MM_restrictGoTo); 
  exit;
}
?>
<?php require_once('Zend/Date.php');?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$currentPage = $_SERVER["PHP_SELF"];

$maxRows_rsStudent = 3;
$pageNum_rsStudent = 0;
if (isset($_GET['pageNum_rsStudent'])) {
  $pageNum_rsStudent = $_GET['pageNum_rsStudent'];
}
$startRow_rsStudent = $pageNum_rsStudent * $maxRows_rsStudent;

mysql_select_db($database_db_sms, $db_sms);
$query_rsStudent = "SELECT s_id, first_name, last_name, gender, dob, father_name, email, address, city, student_photo FROM tbl_student ORDER BY first_name ASC";
$query_limit_rsStudent = sprintf("%s LIMIT %d, %d", $query_rsStudent, $startRow_rsStudent, $maxRows_rsStudent);
$rsStudent = mysql_query($query_limit_rsStudent, $db_sms) or die(mysql_error());
$row_rsStudent = mysql_fetch_assoc($rsStudent);

if (isset($_GET['totalRows_rsStudent'])) {
  $totalRows_rsStudent = $_GET['totalRows_rsStudent'];
} else {
  $all_rsStudent = mysql_query($query_rsStudent);
  $totalRows_rsStudent = mysql_num_rows($all_rsStudent);
}
$totalPages_rsStudent = ceil($totalRows_rsStudent/$maxRows_rsStudent)-1;

$queryString_rsStudent = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_rsStudent") == false && 
        stristr($param, "totalRows_rsStudent") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_rsStudent = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_rsStudent = sprintf("&totalRows_rsStudent=%d%s", $totalRows_rsStudent, $queryString_rsStudent);
?>

<?php

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
       if ($theValue == "")
      {
          $theValue = "NULL";
      }
      else
      {
          $zendDate = new Zend_Date($theValue, "M/d/yyyy");
          $theValue = "'" . $zendDate->toString("yyyy-MM-dd") . "'";
      }
        break;

    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}
?>
<style type="text/css">
body,td,th {
    color: #000;
    font-family: "Courier New", Courier, monospace;
    font-size: 18px;
}
body {
    background-color: #FFF;
}
a:link {
    text-decoration: none;
}
a:visited {
    text-decoration: none;
    color: #606;
}
a:hover {
    text-decoration: underline;
    color: #066;
}
a:active {
    text-decoration: none;
    color: #600;
}
</style>

<body bgcolor="#D6D6D6" text="#FFFFFF" link="#330000" vlink="#006666" alink="#660000"><h1>
  <style type="text/css">
#header {
    font-family: "Times New Roman", Times, serif;
    font-size: 24px;
    font-style: normal;
    line-height: normal;
    font-weight: normal;
    text-transform: none;
    color: #066;
    background-color: #FFF;
    background-image: url(../images/contest.jpg);
    background-repeat: no-repeat;
    background-size: auto;
    box-sizing: content-box;
    margin-bottom: 400px;
}
body,td,th {
    font-family: "Courier New", Courier, monospace;
    color: #000;
}
body {
    background-color: #FFF;
}
  </style>
</h1>
 <?php /* include('include/header.php');*/?> 

<h3>&nbsp;</h3>
<h3>There are <?php echo $totalRows_rsStudent ?> Students.</h3>
<p>&nbsp;
  <?php if ($pageNum_rsStudent > 0) { // Show if not first page ?>
    <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, 0, $queryString_rsStudent); ?>">First</a> <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, max(0, $pageNum_rsStudent - 1), $queryString_rsStudent); ?>">Previous</a>
    <?php } // Show if not first page ?>
  <?php if ($pageNum_rsStudent < $totalPages_rsStudent) { // Show if not last page ?>
  <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, min($totalPages_rsStudent, $pageNum_rsStudent + 1), $queryString_rsStudent); ?>">Next</a> <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, $totalPages_rsStudent, $queryString_rsStudent); ?>">Last</a>
  <?php } // Show if not last page ?>
</p>
<table width="400" border="0">

</table>
<form id="form1" name="form1" method="post" action="" enctype="multipart/form-data">
<table width="2139" border="0">

    <tr>
      <th width="326" bgcolor="#009999" scope="col"><strong>First Name</strong></th>
      <th width="315" bgcolor="#009999" scope="col"><strong>Last Name</strong></th>
      <th width="282" bgcolor="#009999" scope="col"><strong>Gender</strong></th>
      <th width="183" bgcolor="#009999" scope="col"><blockquote>
        <p> <strong>BirthDate</strong></p>
      </blockquote></th>
      <th width="337" bgcolor="#009999" scope="col"><strong>Father's Name</strong></th>
      <th width="271" bgcolor="#009999" scope="col"><strong>Email</strong></th>
      <th width="95" bgcolor="#009999" scope="col"><strong>Address</strong></th>
      <th width="150" bgcolor="#009999" scope="col"><strong>City</strong></th>
      <th width="150" bgcolor="#009999" scope="col"><blockquote>
        <p>Photo</p>
      </blockquote></th>
      <th width="150" bgcolor="#009999" scope="col">&nbsp;</th>
      <th width="7" bgcolor="#009999" scope="col">&nbsp;</th>
      <th width="131" scope="col">&nbsp;</th>
    </tr>
     <?php do { ?>
   <?php 
            $zendDate = new Zend_Date($row_rsStudent['dob']);
          ?>

    <tr>
      <td bgcolor="#333333"><blockquote>
        <p><a href="update.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"><?php echo $row_rsStudent['first_name']; ?></a></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['last_name']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['gender']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"> 
          <?php echo $zendDate->toString("d/M/yyyy"); ?></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['father_name']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['email']; ?></p>
      </blockquote></td>

      <td bgcolor="#333333"><blockquote>
        <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"></a></strong></em><?php echo $row_rsStudent['address']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"></a></strong></em><?php echo $row_rsStudent['city']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><img src="<?php echo "thumbnails/".$row_rsStudent['student_photo']; ?>"/> </p>
      </blockquote></td>
      <td bgcolor="#FFFFFF"><blockquote>
        <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>">Delete</a></strong></em></p>
      </blockquote></td>
    </tr>
    <?php } while ($row_rsStudent = mysql_fetch_assoc($rsStudent)); ?>
  </table>
  <p><strong><a href="insert.php">Insert New Record</a></strong></p>
  <p>&nbsp;</p>
</form>
<?php
mysql_free_result($rsStudent);
?> 
```

///// 这是我的 db_sms 连接文件

```
<?php
# FileName="Connection_php_mysql.htm"
# Type="MYSQL"
# HTTP="true"
$hostname_db_sms = "localhost";
$database_db_sms = "db_sms";
$username_db_sms = "root";
$password_db_sms = "";
$db_sms = mysql_pconnect($hostname_db_sms, $username_db_sms, $password_db_sms) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

////// 这是mysql数据库文件db_dms.sql

--

```
phpMyAdmin SQL Dump
-- version 3.2.0.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Dec 06, 2012 at 05:07 AM
-- Server version: 5.1.36
-- PHP Version: 5.3.0

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `db_sms`
--
CREATE DATABASE `db_sms` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;
USE `db_sms`;

-- --------------------------------------------------------

--
-- Table structure for table `tbl_admin`
--

CREATE TABLE IF NOT EXISTS `tbl_admin` (
  `admin_id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(50) NOT NULL,
  PRIMARY KEY (`admin_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--
-- Dumping data for table `tbl_admin`
--

INSERT INTO `tbl_admin` (`admin_id`, `username`, `password`) VALUES
(1, 'root', 'root');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_student`
--

CREATE TABLE IF NOT EXISTS `tbl_student` (
  `s_id` int(11) NOT NULL AUTO_INCREMENT,
  `first_name` varchar(50) NOT NULL,
  `last_name` varchar(50) NOT NULL,
  `gender` varchar(50) NOT NULL,
  `dob` date NOT NULL,
  `father_name` varchar(50) NOT NULL,
  `email` varchar(50) NOT NULL,
  `address` varchar(50) NOT NULL,
  `city` varchar(50) NOT NULL,
  `student_photo` varchar(255) NOT NULL,
  PRIMARY KEY (`s_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=18 ;

--
-- Dumping data for table `tbl_student`
--

INSERT INTO `tbl_student` (`s_id`, `first_name`, `last_name`, `gender`, `dob`, `father_name`, `email`, `address`, `city`, `student_photo`) VALUES
(3, 'Zara', 'Mansoor', 'Female', '0000-00-00', 'mmmm', 'zara@xyz.com', 'dddd', 'dddd', 'pic_1074.jpg'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:27:13.110

只需将图像名称（如果需要，包括文件夹路径）保存在具有 varchar 数据类型的表列中。并从 db 中检索该图像名称并将其放在图像标签中。例如

```
<img src="<?php echo $image_path?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T00:13:41.757

我这样做的方法是将相对路径或相对`DocumentRoot`路径保存到数据库中作为 varchar (512)。这似乎对我很有效。我认为您实际上可以将图像作为[glob](https://stackoverflow.com/questions/17751865/store-image-in-mysql-blob)保存到数据库中，但我认为这不是您想要的。

记录可能如下所示，`item_image_uri`表中的字段名称为`item_image_table`：

```
"images/image1.png"
"images/image2.png" 
```

然后，您的数据库调用将是这样的：

```
SELECT item_image_uri FROM item_image_table; 
```

然后，您可以使用 PHP 循环遍历结果或指定精确的图像。

# makefile - 用于编写 makefile 的 cflags 参考

> ID：13737836
> 
> 赞同：0
> 
> 时间：2012-12-06T06:00:34.030
> 
> 标签：makefile

```
GNU Make 3.82 
```

你好，

是否有任何参考资料可以找到 CFLAGS 的描述。我正在编辑某人的 makefile，我有这个 CFLAGS 选项。但是，我只想找到这些的描述以了解它们的作用。

```
sample: -Isrc -rdynamic, etc 
```

谁能将我链接到任何网站或在线手册？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:18:59.393

它们被传递给编译器，因此您需要检查特定编译器的文档。但是，您似乎正在使用 GCC，因此以下内容可能会有所帮助：

[http://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html#Invoking-GCC](http://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html#Invoking-GCC)

在这种特殊情况下，-I 包含在目录选项下，-rdynamic 包含在链接选项下。

# c# - .Net 和 C# 中的面向反射和面向方面

> ID：13737841
> 
> 赞同：3
> 
> 时间：2012-12-06T06:00:51.097
> 
> 标签：c#, .net, reflection, aspect

.Net 框架和特别是 C# 语言是否支持`Reflect Oriented Programming`和`Aspect Oriented Programming`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:48:10.820

是的，.NET 本身支持 AOP 和 Reflect Oriented Programming。

使用反射和 System.Reflection 命名空间的面向反射编程。

对于 AOP，有多种[方式](http://ayende.com/blog/2615/7-approaches-for-aop-in-net)。.NET Framework 本身仅支持远程代理和从 ContextBoundObject 派生，但由于其性能，不建议将其用于 AOP。使用 3rd 方库的所有其他可能性。

*   使用远程代理的方法
*   从 ContextBoundObject 派生
*   编译时子类化（Rhino 代理）
*   运行时子类化（城堡动态代理）
*   挂钩探查器 API（类型 Mock）
*   编译时间 IL-weaving ( Post Sharp / Cecil )
*   运行时 IL 编织（Post Sharp / Cecil）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:56:38.653

反射，是的：您可以使用 System.Reflection 命名空间。

.NET/C# 并不真正支持面向方面的编程，因此您需要第三方工具。一些流行的例子是 PostSharp 和 Castle DynamicProxy。

# ruby-on-rails-3 - MongoDB 和 rails 3 的日期和时间

> ID：13737846
> 
> 赞同：0
> 
> 时间：2012-12-06T06:01:00.427
> 
> 标签：ruby-on-rails-3, mongodb, timezone

我正在使用带有 rails3 的 MongoDB，我需要将所有日期格式存储在 EST 中，我正在使用时间戳。甚至我用 config.time_zone = 'Eastern Time (US & Canada)' 配置了 app.rb 但它似乎什么也没做。有人可以指导我，以便我需要存储在 EST 中，即使在显示时，它也应该仅以 EST 格式显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:55:40.163

MongoDB 不处理时区信息。您需要将此信息保存在您收藏的另一个字段中并自行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:18:02.810

我在默认的 mongoid.yml 中使用了以下几行

```
 use_activesupport_time_zone: true
    use_utc: false 
```

在 application.rb 中使用 config.time_zone = 'Eastern Time (US & Canada)' 添加此行后，所有内容都以 EST 格式存储。这是因为我们没有 mongoid 的活动记录。

# php - perl Spreadsheet::WriteExcel 是否比 PHPExcel 更快且占用内存更少？

> ID：13737850
> 
> 赞同：3
> 
> 时间：2012-12-06T06:01:38.833
> 
> 标签：php, perl

我正在使用 PHPExcel 和 php orm 来生成 excel5 电子表格，用于报告 Web 应用程序事务。

不得不写更多，我想知道 perl 解决方案是否会减少内存消耗并更快地生成该 excel 文件？

例如，使用调整大小的列创建 186 行和列，在 PHPExcel 上使用日期、数字和字符串等数据类型设置在 64 位、6 核、ssd 驱动器和太多 gb 内存上占用 91mb 内存和 62 秒, linux服务器。（数字不包括 orm）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:53:39.617

在谷歌搜索了太多基本的 perl 用法、功能等之后，我自己进行了测试，所以这里是：

## 测试笔记

这里显示的统计数据与我的问题有很大不同，因为我对每一行都有一个外部 api 调用，这需要很长时间。

php 的内存统计数据是不创建任何 excel 文件和创建它之间的峰值使用差异，而对于 perl，我使用了 valgrind。（在这里，也忽略我的问题中的内存统计信息）

此外，我没有使用管道将值从我的 php orm 传递到 perl（这可能会更快），也没有在 perl 中执行查询，因为我不想为这个测试深入研究 perl。我只是将 json_encoded 字符串从 php 写入文件，使用 exec() 调用 perl 脚本，然后读取文件并在 perl 中解码 json 字符串。

我使用了两个库的最新版本

## 数据测试

创建一个带有基本粗体格式的标题行，
180 多行数据，列最多为 BG，
在一半列上应用一堆日期和数字格式，
并自动调整列大小。

# 答案/结果（平均从几次运行）

使用 PHPExcel：4.94 秒，60,191 mb
使用 Perl Spreadsheet::WriteExcel：0.01 秒，13,193 mb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:12:41.227

您必须将 like 与 like 进行比较才能获得明确的答案，但这里有一些关于 Spreadsheet::WriteExcel 的提示：

*   Spreadsheet::WriteExcel 是为了优化吞吐速度和最小化内存使用而编写的。
*   由于解析器速度慢，Spreadsheet::WriteExcel 中的公式很慢。如果可能，请避免使用它们或使用`store_formula()`和`repeat_formula()`方法来加速它们。有关更多信息，请参阅文档的[使用公式时提高性能](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel.pm#Improving_performance_when_working_with_formulas)部分。
*   Excel::Writer::XLSX 的性能和内存使用不如 Spreadsheet::WriteExcel，除非您使用该`set_optimization()`选项。请参阅Excel::Writer::XLSX 文档中的[速度和内存使用情况。](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#SPEED_AND_MEMORY_USAGE)
*   使用 Spreadsheet::WriteExcel[示例文档](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel/Examples.pm)开始。
*   您可以使用[bigfile.pl](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel/Examples.pm#Example%3a_bigfile.pl)示例的变体进行性能测试。

# string - 从字符串applescript中删除单词

> ID：13737851
> 
> 赞同：1
> 
> 时间：2012-12-06T06:01:41.917
> 
> 标签：string, macos, applescript

我有一个字符串“提醒我在 5:30 吃晚餐”我需要删除“to”之前的每个单词和“at”之后的每个单词我已经编写了一个脚本来获取它们的单词编号 toNum 和 atNum 我可以'不知道如何做到这一点任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:25:44.843

尝试这个：

```
set originString to "remind me to eat dinner at 5:30"
set resultString to text toNum thru atNum of originString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:59:22.583

这是另一种方法：

```
set originString to "remind me to eat dinner at 5:30"

set {TID, text item delimiters} to {text item delimiters, {"to ", " at"}}
set resultString to text item 2 of originString
set text item delimiters to TID 
```

# javascript - 在从 URL 推断 Open Graph 属性时，Facebook 会考虑什么？

> ID：13737853
> 
> 赞同：0
> 
> 时间：2012-12-06T06:01:58.993
> 
> 标签：javascript, html, facebook-like

我在[这里](http://develop-nuageloja.vtexcommerce.com.br/)的 Facebook Like 按钮有问题。尽管该按钮有效，但它获取了错误的缩略图以显示在 Facebook 上。

由于网站是一家商店，并且每个产品都有自己的点赞按钮，因此在 Facebook 上显示正确的缩略图非常重要。我使用[Facebook Linter](http://developers.facebook.com/tools/debug)从该站点调试产品 URL。我希望 Facebook 能够获取更大的、明显是产品 URL 的主要图像，但它正在获取相关产品的缩略图之一。

根据我在文档中阅读的内容，我应该在文档`og:image`的开头明确设置。但是，我无法访问后端，只能使用 JavaScript 动态生成元标记。我试过这样做，但这样做似乎毫无价值，因为在运行任何脚本之前 URL 就被废弃了。

我不明白 Facebook 使用什么规则来推断`og:image`. 在[另一个](http://www.usereserva.com)也没有设置任何元标记的网站上，产品的主图像被正确废弃。为什么？

当由于某种原因无法声明任何 Open Graph 属性时，可以做些什么来提高 Facebook 的算法抓取所需图像（或文本）的机会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:15:05.010

理想情况下，您应该将`og:image`元标记设置为开放图形协议的一部分。当这失败时，它只是默认所有通过图像 html 标签优先的图像。通过`img`标签定义的第一个图像将是 facebook 提取的第一个图像。

```
<html><body>
    <p style="background:url(img0.jpg);">hello</p>
    <img src="img1.jpg">
    <img src="img2.jpg">
    <p>bye</p>
    <img src="img3.jpg">
</body></html> 
```

如果上面的示例代码是您的网站，facebook 会将 img1、img2 和 img3 标记为潜在的缩略图，并且如果用户可以选择要指定的图像，则按照该顺序。

所以，把你的产品图片放在第一位。

# silverlight - Silverlight LOB 应用程序中的嵌套框架

> ID：13737863
> 
> 赞同：1
> 
> 时间：2012-12-06T06:02:51.480
> 
> 标签：silverlight, navigation

我想知道是否有人可以指出处理以下情况的最佳方法：

我正在开发一个 silverlight LOB 应用程序，它有几个主要区域（Home、About、Area1、Area2、...），这些区域加载在 mainPage 的框架内。

根据用户所在的区域，我加载具有不同菜单和用户交互控件的页面。

每个区域都有一个框架（我们称之为子框架），根据用户想要查看的内容加载不同的页面（Screen1、Screen2、...）。

一切正常，我可以通过使用超链接并定位它在子框架中加载我想要的任何页面。

现在，我的问题是我需要支持通过地址栏或直接链接（电子邮件...）直接访问此屏幕。

即：[http ://www.mydomain.com/myapp/app.aspx#/Area1/Screen1?id=12345](http://www.mydomain.com/myapp/app.aspx#/Area1/Screen1?id=12345)

在这种情况下，我想要完成的是让我的框架加载 Area1 视图，并且 Area1 视图有一个子框架，它将加载屏幕 1 视图并将查询字符串传递给它。

谢谢你的帮助。

雨果·丰塞卡

# jquery - 将焦点设置到fancybox 2

> ID：13737866
> 
> 赞同：3
> 
> 时间：2012-12-06T06:03:09.113
> 
> 标签：jquery, fancybox, accessibility

我曾经在以前版本的 fancybox 中使用 onComplete 函数来将焦点设置到 fancybox（使使用键盘的人更容易访问网站）。

看起来fancybox 2 并没有遵循相同的语法。有没有人能够帮助一些代码在渲染后将焦点设置到fancybox？

以前是：

```
$(".fancybox-call").fancybox({
               padding:   20, 
        fitToView   : false,
        width       : 960,
        height      : 615,
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none',
                type                : 'inline',
                onComplete : function () {
                                          $(".fancybox-wrap").focus();
                                }
}); 
```

现在尝试：

```
$('a#feedback-button').each(function(){
    $(this).fancybox({
            padding     : 0,
            fitToView   : false,
            width       : 700,
            height      : 820,
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none',
            type        : 'iframe',
            scrolling   : 'no',
            beforeShow   : function() {
                             $(".fancybox-inner").focus();
                        }
    }); 
```

没有运气。

如果不将焦点设置到fancybox，键盘用户必须在整个调用页面中切换，然后才能访问fancybox 中的表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:20:31.260

从 Fancybox 2.1.4 开始，关闭按钮是一个锚点，不再是一个 div 标签，所以我只是将这段代码设置为关注关闭按钮：

```
afterShow: function(){
    $('.fancybox-close').focus();
} 
```

我还更改了键配置以删除由 enter 键触发的下一个链接，因此 enter 键将关闭 Fancybox ：

```
keys  : {
    next : {
        34 : 'up',   // page down
        39 : 'left', // right arrow
        40 : 'up'    // down arrow
    },
    prev : {
        33 : 'down',   // page up
        37 : 'right',  // left arrow
        38 : 'down'    // up arrow
    },
    close  : [27], // escape key
    play   : [32], // space - start/stop slideshow
    toggle : [70]  // letter "f" - toggle fullscreen
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T23:07:54.193

应将以下内容添加到 fancybox 调用中。它适用于所有内容（内联、ajax 或 html）

```
afterShow: function () {
    $(this.content).attr("tabindex",1).focus()
} 
```

所以 fancybox 调用应该是这样的。

```
$(".your_element_class").fancybox({
    afterShow: function () {
        $(this.content).attr("tabindex",1).focus()
    }
}); 
```

请将“your_element_class”更改为您调用fancybox 的html 元素的类。

# asp.net - global.asax 中的语法错误

> ID：13737869
> 
> 赞同：2
> 
> 时间：2012-12-06T06:03:27.907
> 
> 标签：asp.net

我的 global.asax 文件（在我的 asp.net 应用程序中）中有以下代码...

![在此处输入图像描述](../Images/8d5945d80dcad3e47793a1b7901aa971.png)

我在堆栈跟踪中有以下错误：

```
[NullReferenceException: Object reference not set to an instance of an object.]
Digita.Tustena.Global.Application_Start(Object sender, EventArgs e) +133

[HttpException (0x80004005): Object reference not set to an instance of an object.]
System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext       context, HttpApplication app) +3985477
System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +191
System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +325
System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +407
System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +375

[HttpException (0x80004005): Object reference not set to an instance of an object.]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11524352
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4782309 
```

我的代码有什么问题？我感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:28:29.523

查看 Global.asax.cs 文件中的 Application_Start 方法。你在那里有一个空引用。放置一个 try/catch 并使用调试器查看哪个对象为空。

如果您使用 dll 部署 pdb 文件，则堆栈跟踪还将包含行号。还要将调试信息设置为完整：项目属性 -> 构建 -> 高级 -> 调试信息（http://stackoverflow.com/a/3791997/57369）

# visual-c++ - 更改 MFC 应用程序的背景颜色

> ID：13737871
> 
> 赞同：1
> 
> 时间：2012-12-06T06:03:39.897
> 
> 标签：visual-c++, mfc, background, mfc-feature-pack

我正在开发一个非常大的 MFC 应用程序。此应用程序中有数百个对话。现在，我想更改 MFC 应用程序中所有对话框的背景颜色和字体大小。我怎样才能做到这一点？我是否必须为每个对话或任何其他解决方法处理 WM_CTLCOLOR 按摩？

*注意：我不能使用像 BCGSoft、Xtreme Toolkit 这样的任何库。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:47:22.853

创建一个 Dialog 类并在该类中处理 WM_CTLCOLOR 消息，现在从该类派生 MFC 应用程序的所有其他 Dialog。

# hadoop - FileInputFormat.setInputPath 中的 FTP 文件名

> ID：13737876
> 
> 赞同：1
> 
> 时间：2012-12-06T06:04:05.027
> 
> 标签：hadoop, ftp, mapreduce

我有一个使用 mapreduce 代码从 FTP 服务器读取数据的代码。我们用来连接ftp服务器的代码如下`

```
 String inputPath = args[0];
    String outputPath = args[1];

   Configuration conf1 = new Configuration();
    String[] otherArgs = new GenericOptionsParser(conf1, args).getRemainingArgs();

    Path arg = new Path(inputPath);
    FTPFileSystem ftpfs = new FTPFileSystem();
    Path arg1 =new Path(outputPath);
    ftpfs.setConf(conf1);
    String ftpUser = URLEncoder.encode("username", "UTF-8");
    String ftpPass = URLEncoder.encode("password", "UTF-8");

    String url = String.format("ftp://%s:%s@ftpserver.com",
            ftpUser, ftpPass);
    ftpfs.initialize(new URI(url), conf1);

    JobConf conf = new JobConf(FTPIF.class);
    FileOutputFormat.setOutputPath(conf, arg1));      
    FileInputFormat.setInputPaths(conf, ftpfs.makeQualified(arg));

        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(NullWritable.class);
        conf.setOutputFormat(TextOutputFormat.class);

        conf.setInputFormat(CustomInputFormat.class);
        conf.setMapperClass(CustomMap.class);
        conf.setReducerClass(CustomReduce.class);

    JobClient.runJob(conf); 
```

`

问题是这段代码在伪模式下工作得很好，但是在集群上运行时在服务器错误上登录失败。错误堆栈跟踪是

`ERROR security.UserGroupInformation: PriviledgedActionException as:username (auth:SIMPLE) cause:java.io.IOException: Login failed on server - 0.0.0.0, port - 21 Exception in thread "main" java.io.IOException: Login failed on server - 0.0.0.0, port - 21 at org.apache.hadoop.fs.ftp.FTPFileSystem.connect(FTPFileSystem.java:133) at org.apache.hadoop.fs.ftp.FTPFileSystem.getFileStatus(FTPFileSystem.java:389) at org.apache.hadoop.fs.FileSystem.getFileStatus(FileSystem.java:2106) at org.apache.hadoop.fs.FileSystem.globStatusInternal(FileSystem.java:1566) at org.apache.hadoop.fs.FileSystem.globStatus(FileSystem.java:1503) at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:174) at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:205) at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:1041) at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:1033) at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:172) at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:943) at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:896) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:896) at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:870) at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1319) at FTPIF.run(FTPIF.java:164) at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70) at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84) at FTPIF.main(FTPIF.java:169) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.hadoop.util.RunJar.main(RunJar.java:208`

集群与 ftp 有连接。使用的凭据是正确的。任何想法为什么代码无法连接到 ftp ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:59:31.223

如果您的集群上有许多节点并且多个映射器试图打开到您的 FTP 服务器的连接，那么您可能会超过 FTP 服务器支持的 FTP 用户的限制。

# android - 即使在调用重新启动加载程序后，listview 也不会刷新

> ID：13737878
> 
> 赞同：1
> 
> 时间：2012-12-06T06:04:18.327
> 
> 标签：android, android-listfragment, android-loadermanager

长按列表项时，我有带有上下文菜单的列表片段。单击列表项并从我的数据库中删除列表项。但是即使在调用重新启动加载程序后列表也不会刷新？

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setEmptyText("Loading...");

        myAdapter = new MySimpleCursorAdapter(getActivity().getApplicationContext(), R.layout.my_list_item, null,  new String[] {DBConstants.NAME,DBConstants.ITEM1,DBConstants.SYMBOL}, new int[] {R.id.my_companyname,R.id.my_item1,R.id.my_symbol},0);
        setListAdapter(myAdapter);
        registerForContextMenu(getListView());
        MyLoader = getActivity().getSupportLoaderManager().initLoader(1, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
        DBHelper dbHelper=new DBHelper(getActivity());
        return new MyLoader(getActivity(),dbHelper);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor c) {
        if(c!=null && c.getCount()>0){
            myAdapter.swapCursor(c);
            if (isResumed()) {
                setListShown(true);
            } else {
                setListShownNoAnimation(true);
            }
        }
        else
        {
            setEmptyText("Not selected");
        }
    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        myAdapter.swapCursor(null);
    }

@Override
    public boolean onContextItemSelected(MenuItem item) {
        String selectedItem = item.getTitle().toString();
        Log.i("context", "selected context menu item->"+selectedItem);

        if(selectedItem.equalsIgnoreCase("Remove"))
        {
            AdapterView.AdapterContextMenuInfo menuInfo=(AdapterView.AdapterContextMenuInfo)item.getMenuInfo();
            String[] args={String.valueOf(menuInfo.id)};
            Log.i("context", String.valueOf(menuInfo.id));
            new DBHelper(getActivity()).getWritableDatabase().delete(DBConstants.MYSTOCKS_TABLE, "_ID=?", args);

            getActivity().getSupportLoaderManager().restartLoader(1, null, this);

            /*
             Cursor cursor = myAdapter.getCursor();
            myAdapter.swapCursor(cursor);
            */
            //getLoaderManager().initLoader(0, null, this);
        }
        return super.onContextItemSelected(item);
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
        //super.onCreateContextMenu(menu, v, menuInfo);
        getActivity().getMenuInflater().inflate(R.menu.mystocks_context, menu);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T18:37:12.763

您是否在活动的 onCreate 或 onResume 中添加片段？如果是后者，您可能希望将片段设置（事务创建、添加片段、提交）移动到 onCreate。这样做之后 restartLoader() 将正常工作。

# java - 采用度数序列的 Java Jung Graph 构造函数

> ID：13737880
> 
> 赞同：0
> 
> 时间：2012-12-06T06:04:40.653
> 
> 标签：java, constructor, jung

我一直在查看 Jung Graph 包[文档](http://jung.sourceforge.net/doc/api/index.html)中的构造函数，以在给定度数序列的情况下创建图形。

1.  Jung 中是否存在此功能？
2.  我自己做有一个简单的实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:46:35.370

没有这样的构造函数，也没有任何图形生成器实现来做到这一点，我们也没有任何计划提供这样的能力。

这是有关该主题的一些论文的链接：http: [//mathworld.wolfram.com/GraphicSequence.html](http://mathworld.wolfram.com/GraphicSequence.html)

但是，从那里的描述中我看不出任何证明（给定序列是有效的）都是建设性的，即它们提供了在给定有效序列的情况下构建图的方法。

你想解决什么问题？

（h/t Louis Wassermann 获取链接）

# php - 为什么这个 onclick 只提示 while 循环的一个结果

> ID：13737883
> 
> 赞同：-3
> 
> 时间：2012-12-06T06:05:15.910
> 
> 标签：php, mysql

当前有三个帖子，但是当 onclick 仅提醒一个帖子时。如果我在循环中回显帖子，则显示所有三个帖子，但是如果我提醒他们，则只有一个帖子是 show.plz 帮助或建议任何替代方法。

```
 $sql=mysqli_query($db3,"SELECT * from user where  id='$id'");
            $num_rows=mysqli_num_rows($sql);

            while($row=mysqli_fetch_array($sql)){

                $posts=$row['posts'];
            }

            ?>
        <span onclick=u(<?php echo $posts; ?>)> <?php echo $num_rows  ?> </span>

        <script type="text/javascript">
            function u(posts) {
                alert(posts);
            }
        </script>
        <?php 
```

**更新**

这是第二个查询在使用数组方法后，如果我使用带有 $num 行的花式框来显示花式框中的所有帖子。我再次得到花式框上唯一的一个结果。请帮助

```
 $posts[] = $row['posts']; 
```

} foreach ($posts as $af){

```
 echo "<div id='#modelbox_id'>$af</div>";}

            ?>

            <a href="#modelbox_id" class="modelbox"><?php   echo $num_rows; ?></a>

            <?php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:07:10.197

这是因为您将单个 post 行分配给`$posts`变量，然后在 while 循环的每次迭代中用新值覆盖该变量。

尝试这样的事情：

```
$posts = array();
while($row=mysqli_fetch_array($sql)){
    $posts[] = $row['posts'];
} 
```

然后你需要打印`$posts`数组的每个值。

例如，您可以将数组内爆为字符串：

```
<span onclick=u(<?php echo implode(', ', $posts); ?>)> ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:14:10.460

而是尝试这样的事情

```
 while($row=mysqli_fetch_array($sql)){
            $posts .= $row['posts'].",";
        }
      ?>
    <span onclick="u('<?php echo $posts; ?>')"> <?php echo $num_rows  ?> </span>

    <script type="text/javascript">
        function u(posts) {
            alert(posts);
        }
    </script> 
```

# python - Pyramid 为静态资产返回错误的 Content-Type HTTP 标头

> ID：13737888
> 
> 赞同：5
> 
> 时间：2012-12-06T06:05:31.610
> 
> 标签：python, mod-wsgi, wsgi, pyramid

到目前为止，我一直在使用 Pyramid 从 python 包内的文件夹中提供静态资产，如他们的文档中所述：

```
config.add_static_view('static', 'myapp:static') 
```

并从模板中加载它们，如下所示：

```
<script type="text/javascript" src="{{ request.application_url }}/static/js/jquery-1.7.1.min.js"></script> 
```

但是，我注意到 Chrome 会发出这样的警告：

```
Resource interpreted as Stylesheet but transferred with MIME type apache/2.2.14: "http://mydomain.com/static/js/jquery-1.7.1.min.js" 
```

或者

```
Resource interpreted as Stylesheet but transferred with MIME type text/plain: "http://mydomain.com/static/js/jquery-1.7.1.min.js" 
```

这发生在硬刷新时，似乎加载的 3-4 个***随机***资源`<head>`使用了错误的 Content-Type 标头（根据 Pyramid 文档，标头由文件扩展名确定）。

我无法推断出错误的标题是如何设置的。有时，它是`text/plain`针对 javascript/CSS 文件的，有时它是类似路径`/static/js/something.js`（并且此路径与请求 URL 没有任何关系），有时它是`Server`标头的值，`apache/2.2.14`如上所示。

这是一个大问题，因为当 CSS 以错误的 Content-Type 返回时，它不会被渲染，这会破坏整个页面。我通过`/static`使用 Apache 捕获请求并使用它来服务静态资产，同时让所有其他请求通过 Pyramid 解决了这个问题。我不再在 Chrome 中看到错误的 MIME 类型警告。但是，我想知道是否有人遇到过这个问题，以及它是否是 Pyramid 错误，或者我是否做错了什么。

**编辑：**我忘了提供我如何部署我的应用程序的规范。生产服务器运行 Apache 2.2，应用程序在 mod_wsgi 下运行。我遵循的过程几乎在本教程中逐字描述：http: [//docs.pylonsproject.org/projects/pyramid/en/1.0-branch/tutorials/modwsgi/index.html](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/tutorials/modwsgi/index.html)。**重要提示**：该问题仅在通过 mod_wsgi 在 Apache 上运行时发生。当我在女服务员上本地运行应用程序时，Content-Type 标头始终正确。

# javascript - 事件鼠标按下javascript toElement

> ID：13737892
> 
> 赞同：1
> 
> 时间：2012-12-06T06:05:53.610
> 
> 标签：javascript, events, nicedit

当我处理单击以编辑区域时。我使用以下功能

```
 Function.prototype.closureListener = function() {
        var __method = this, args = bkLib.toArray(arguments), object = rgs.shift(); 
        return function(e) { 
        e = e || window.event;
        if(e.target) { var target = e.target; } else { var target =  e.srcElement };
            return __method.apply(object, [e,target].concat(args) ); 
        };
    } 
```

并添加事件

```
this.elm.addEvent('mousedown',this.selected.closureListener(this)) 
```

但是当我点击行**尾时**

```
asdasdasd<b>sdasdasdasd<b> 
```

**有时**它会像目标一样选择所有主体（作为元素）或仅选择 sdasdasdasd。我应该补充什么，他只服用了 sdasdasdasd 而不是所有的身体。

PS当我点击中间的某个地方时，它总是需要 sdasdasdasd

PSS [nicEdit](http://kenai.com/nonav/projects/myadds/sources/source-code-repository/content/js/nicEdit.js?rev=23)我正在使用这个 nicEdit 面板。

# ruby - 在 Ruby 中，为什么 && 工作而 || 不在我的示例代码中吗？

> ID：13737894
> 
> 赞同：2
> 
> 时间：2012-12-06T06:06:11.260
> 
> 标签：ruby, operators

在我的示例代码中，我试图用“redact”或“redact_again”替换“text”中的任何单词。由于这是一个非此即彼的场景，我认为`||`会被使用。事实证明，这`&&`确实有效。如果两者或其中之一匹配，它将正确地用“已编辑”一词替换它们。如果找不到匹配项，它只会重新打印应有的“文本”。我只是想了解为什么 using`||`在非此即彼的情况下不起作用？

```
puts "Tell me a sentence"
text = gets.chomp.downcase
puts "Redact this word: "
redact = gets.chomp.downcase
puts "And redact another word: "
redact_another = gets.chomp.downcase

words = text.split(" ")
words.each do |x|
 if x != redact && x != redact_another
 print x + " "
 else
 print "REDACTED "
 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:11:24.700

以下应该工作

```
 if x == redact || x == redact_another
   print "REDACTED "
 else
   print x + " "
 end 
```

或者

```
 print [redact, redact_another].include?(x) ? "REDACTED " : x + " " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:17:54.393

这是导致这种情况发生的[布尔条件。](http://en.wikipedia.org/wiki/Boolean_algebra_%28logic%29)

布尔值是 a`0`或`1`。

*   何时`&&`使用 两个变量都必须`1`是`true`。
*   何时`||`使用 EITHER 变量必须`1`是`true`。

颠倒逻辑意味着以下两个陈述在逻辑上是正确的：

```
(x == redact || x == redact_another) == (if x != redact && x != redact_another) 
```

漂亮。

# c++ - 如何将字符串转换为十六进制值

> ID：13737899
> 
> 赞同：0
> 
> 时间：2012-12-06T06:06:23.163
> 
> 标签：c++

我正在尝试将字符串值转换为其十六进制形式，但无法做到。以下是我正在尝试使用的 C++ 代码片段。

```
#include <stdio.h>
#include <sys/types.h>
#include <string>
#define __STDC_FORMAT_MACROS
#include <inttypes.h>

using namespace std;

int main()
{

    string hexstr;
    hexstr = "000005F5E101";
    uint64_t Value;
    sscanf(hexstr.c_str(), "%" PRIu64 "", &Value);
    printf("value = %" PRIu64 " \n", Value);

    return 0;
} 
```

输出只有 5，这是不正确的。

任何帮助将不胜感激。谢谢，尤维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:18:49.107

如果您正在编写 C++，为什么还要考虑使用`sscanf`and `printf`？避免痛苦，只需使用`stringstream`：

```
int main() { 

    std::istringstream buffer("000005F5E101");

    unsigned long long value;

    buffer >> std::hex >> value;

    std::cout << std::hex << value;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T06:17:43.967

```
#include <sstream>
#include <string>

using namespace std;

int main(){

  string myString = "45";
  istringstream buffer(myString);
  uint64_t value;
  buffer >> std::hex >> value;

  return 0;
} 
```

# c# - ASP.NET 自动将 & 转换为 &

> ID：13737902
> 
> 赞同：11
> 
> 时间：2012-12-06T06:06:54.480
> 
> 标签：c#, asp.net, vb.net, html-encode

小问题，但它仍然让我发疯。

我正在为`<script>`要在 ASP.NET 页面上呈现的标记包含构建一个 url，如下所示：

```
<script src='<%= string.Format("http://example.com/page.aspx?a={0}&b={1}&c={2:0.00}", A, B, C)%>' type='text/javascript'></script> 
```

问题是当它被渲染时，`&`字符被替换为`&amp;`：

```
<script src='http://example.com/page.aspx?a=xxx&amp;b=zzz&amp;c=123.45' type='text/javascript'></script> 
```

我很期待这个，很明显：

```
<script src='http://example.com/page.aspx?a=xxx&b=zzz&c=123.45' type='text/javascript'></script> 
```

但是，如果我直接在标签之外渲染 url `<script>`，它看起来还可以！只是在做

```
<%= string.Format("http://example.com/page.aspx?a={0}&b={1}&c={2:0.00}", A, B, C) %> 
```

呈现：

```
http://example.com/page.aspx?a=xxx&b=zzz&c=123.45 
```

是什么赋予了？我该如何阻止这种疯狂？我的强迫症受不了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T04:09:20.053

正如@Falkon 和@AVD 所说，ASP.NET 会自动在`<script>`标签中做“正确”的事情。请参阅 w3c 建议 - [C.12。在属性值（和其他地方）中使用与号](http://www.w3.org/TR/xhtml1/guidelines.html#C_12)

> 为了确保文档与历史 HTML 用户代理和基于 XML 的用户代理兼容，在文档中使用的要被视为文字字符的 & 符号必须将其自身表示为实体引用（例如“ `&amp;`”）。

我不完全确定为什么 ASP.NET 在页面的其余部分没有做同样的事情（可能有很多很好的理由），但至少它纠正了脚本标记中的 & 符号。结论：虽然您可能在诅咒 ASP.NET “扰乱”您的 url，但您可能要感谢它帮助您的网页符合标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T04:07:30.490

也许`MvcHtmlString.Create()`或`Html.Raw()`？

```
<script src='<%= MvcHtmlString.Create("http://example.com/page.aspx?a={0}&b={1}&c={2:0.00}", A, B, C)%>' type='text/javascript'></script> 
```

或者

```
<script src='<%= Html.Raw("http://example.com/page.aspx?a={0}&b={1}&c={2:0.00}", A, B, C)%>' type='text/javascript'></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T07:34:00.470

我可以解决。我只是做了一个方法：

```
 public void BuildUrl(String baseUrl = "", String data = "")
    {
        Response.Write(baseUrl + data);
    } 
```

并在我的 html 页面中使用它，如下所示：

```
<button type="button" class="btn_new" ref="<% this.BuildUrl(this.BaseUrl + "Master/Tanker_Edit.aspx?", "type=new&unique_id=" + Session.SessionID); %>">New</button> 
```

结果：

```
<button type="button" class="btn_new" ref="http://kideco.local/Master/Tanker_Edit.aspx? type=new&unique_id=emxw1pkpnwcxpn1cl2cf04zv"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:13:44.037

“&”是 HTML 和 XML 中的保留字符，因此是 ASP.NET 中的保留字符。"&" 被 ASP.NET 转换为`&amp`; 因为那是在网络上显示该字符的代码。

您可能会在这个问题的答案中找到答案：[ASP.Net URLEncode Ampersand for use in Query String](https://stackoverflow.com/questions/561954/asp-net-urlencode-ampersand-for-use-in-query-string)

希望对你有帮助，祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T06:15:59.650

围绕评论使用`Server.HtmlEncode( yourString )`

它会自动为您转义双引号或单引号，以及与号 (&) 和小于号和大于号等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-05T04:13:14.127

尝试`<%=`使用`<$:`. 这是 ASP.Net 4.0 添加的新（ish）代码表达式块语法。默认情况下，这种新语法仍将对大多数内容进行 HTMLEncode，但是[`IHtmlString`](http://msdn.microsoft.com/en-us/library/system.web.ihtmlstring.aspx)您可以使用一个特殊的接口来明确告诉这个新块您**不想**对这些数据进行 HTMLEncode，从而避免双重编码。您几乎应该总是使用较新的`<%:`并且几乎永远不要使用较旧的`<%=`......当然，这会有例外。

更多详细信息可在此处获得：

> [http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net- mvc-2.aspx](http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net-mvc-2.aspx)

# parsing - 修复中缀解析器

> ID：13737904
> 
> 赞同：3
> 
> 时间：2012-12-06T06:07:03.390
> 
> 标签：parsing, math

我有一个数学表达式解析器，它应该处理`+`, `-`, `*`, `/`, `^`, `(-)`, 函数，当然还有原子（例如`x`, `1`,`pi`等）。解析器基本上是根据[维基百科的运算符优先级解析器](https://en.wikipedia.org/wiki/Operator-precedence_parser)设计的，我在下面复制了它；`parse_primary()`在别处定义。

```
parse_expression ()
    return parse_expression_1 (parse_primary (), 0)

parse_expression_1 (lhs, min_precedence)
    while the next token is a binary operator whose precedence is >= min_precedence
        op := next token
        rhs := parse_primary ()
        while the next token is a binary operator whose precedence is greater
                 than op's, or a right-associative operator
                 whose precedence is equal to op's
            lookahead := next token
            rhs := parse_expression_1 (rhs, lookahead's precedence)
        lhs := the result of applying op with operands lhs and rhs
    return lhs 
```

如何修改此解析器以`(-)`正确处理？更好的是，如何实现一个支持所有中缀和后缀运算符（`!`例如）的解析器？最后，函数应该如何处理？

我应该注意，`(-)`词法分析器中的否定与`-`“减法”不同，因此可以将其视为不同的标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:17:16.823

所有一元运算符和函数调用的东西基本上都属于 parse_primary，它应该接受一个合法的一元项。

# javascript - 如何从父窗口中的弹出窗口中检索值

> ID：13737909
> 
> 赞同：1
> 
> 时间：2012-12-06T06:07:24.813
> 
> 标签：javascript, html

我的弹出窗口中有一个表格标签，可以在其中动态插入行。我需要知道如何检索与父窗口中的表相对应的值。你们能指导我实现这一目标吗？我可以检索输入框值，但不能检索表中的行。

谢谢

我的弹出窗口：

```
<form name="BREAKUP" method="POST" action="JavaScript:submitForm()">
    <br>
    <center>
    <TABLE id="PDetailsTable" width="350px" border="1">
        <tr>
            <td>SNO</td>
            <td>Team Name</td>
            <td>Estimated Hours</td>
            <td>Actual Hours</td>
            <td>Month</td>
        </tr>     

        <tr>
            <td > 1 </td>
            <TD ><INPUT id="TEAM_NME" ></TD>
            <TD ><INPUT id="EST_HRS"></TD>
            <TD ><INPUT id="ACT_HRS"></TD>
            <TD >
                <select id="MNTH" onchange="" size="1">
                    <option value="Jan">January</option>
                    <option value="Feb">February</option>
                    <option value="Mar">March</option>
                    <option value="Apr">April</option>
                    <option value="May">May</option>
                    <option value="Jun">June</option>
                    <option value="Jul">July</option>
                    <option value="Aug">August</option>
                    <option value="Sep">September</option>
                    <option value="Oct">October</option>
                    <option value="Nov">November</option>
                    <option value="Dec">December</option>
                </select>
            </TD>
        </tr>    
    </TABLE>

    <button value="Add Details" class="submitBtn" onclick="JavaScript:addRow('PDetailsTable');">
    <span>&nbsp;Add Details &nbsp;</span></button>

    <TABLE>
        <TR align="center" valign="top">
            <TD colspan="2"><img src="<%=imagesPath %>spacer.gif" height="10"></TD>
        </TR>
        <TR valign="bottom">
            <TD colspan="2" align="center">
                <button TYPE="submit" class="submitBtn" onclick="JavaScript:submitForm();">
                <span>&nbsp;Submit &nbsp;</span></button>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button value="Reset" class="submitBtn" onclick="JavaScript:resetForm();">
                <span>&nbsp;Reset&nbsp;</span></button>
            </TD>
        </TR>
    </TABLE> 
```

有三个javascript函数。我在 submiForm 函数中使用 windows.opener。我不知道如何发送值列表并在父窗口中检索

# objective-c - 3rd Party Mac Developer 不匹配任何有效的、未过期的私钥对？

> ID：13737912
> 
> 赞同：0
> 
> 时间：2012-12-06T06:07:46.027
> 
> 标签：objective-c, xcode, macos

我刚刚从 github 克隆[了这个 repo](https://github.com/kgn/Spectttator)，想玩一下。但是，在 XCode 中，我不断收到以下错误：

`The identity '3rd Party Mac Developer Application' doesn't match any valid, non-expired certificate/private key pair in your keychains`

值得注意的是，在我的构建设置中，我已将*Code Signing Identity*属性设置为**Don't Code Sign**，但我仍然收到此错误。

有没有人遇到过这种情况，如果有，你做了什么来解决它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:37:44.080

我已经下载了该项目并注意到有 2 个 Xcode 项目：

*   SpectttatorTest.xcodeproj,
*   Spectttator.xcodeproj。

第一个已将“代码签名身份”设置为“不进行代码签名”，但第二个项目（作为依赖项嵌入第一个项目）已将“代码签名身份”设置为“3rd Party Mac Developer Application”。

为第二个项目设置“不要代码签名”后，不再发生代码签名错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:31:11.577

更改设置后，如果您发现自己的项目也发生了同样的事情，可能是时候获取新证书了。这是我去年七月必须做的。

**编辑：**

如果这确实是你必须做的，[这个 SO 链接](https://stackoverflow.com/questions/6769345/xcode-4-valid-signing-identity-not-found-error-on-provisioning-profiles-on-a)包含一个描述前进过程的答案。

# php - 在Javascript中捕获表单响应？

> ID：13737913
> 
> 赞同：1
> 
> 时间：2012-12-06T06:08:07.107
> 
> 标签：php, javascript, html

假设我使用以下代码将数据提交到表单

```
var xhr = new XMLHttpRequest(), formData = new FormData();  
formData.append("img", img);
formData.append("user", localStorage["username"]);
formData.append("pass", localStorage["password"]);

xhr.onreadystatechange = function (event) {
    if (xhr.readyState === 4 && xhr.status === 200) {
       var value = xhr.responseText; // value should equal "1234"
        alert( "value = " + value );
    }else{
    alert("none");
}
};
xhr.open("POST", "http://joubin.me/uploads3/upload_file.php", true);
xhr.send(formData); 
```

upload.php 完成后，它重定向到另一个名为 giveid.php 的页面，它显示的唯一内容是带有 id 的文本字符串

说`1234`

我如何使用 javascript 捕获这个确切的 id。

请记住，不同的upload.php 重定向在giveid.php 上会有不同的ID 号？

我查看了[xmlhtml](http://www.w3schools.com/ajax/ajax_xmlhttprequest_response.asp)响应，但无法弄清楚。

这是什么形式

```
$password = $_REQUEST['pass'];
$username =  $_REQUEST['user'];
$image = $_REQUEST['img'];
echo $password;
echo "<br/>";
echo $username;
echo "<br/>";
echo $image;
$con = mysql_connect("localhost","ya","right");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
        echo "could not connect";
  }
$asql = "SELECT * FROM `ashkan`.`users` where user='$username' and pass='$password';";

$result = mysql_query($asql);
echo $result;
// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

echo $count;

echo 11;
if($count == 1){
$sql = "INSERT INTO `ashkan`.`goog` (`user`, `pass`, `img`) VALUES ('$username', '$passwo$
}
mysql_query($sql);
mysql_close($con);
header( 'Location: giveid.php' ) ; 
```

这是 giveid.php 的内容

```
1234 
```

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:22:09.903

您需要用于`xhr.onreadystatechange`从服务器检索响应。

这样的事情可能会奏效。

```
var value;
var formData = new FormData();
formData.append("img", img);
formData.append("user", localStorage.username);
formData.append("pass", localStorage.password);

var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function (event) {
    if (xhr.readyState === 4 && xhr.status === 200) {
        value = xhr.responseText; // value should equal "1234"
        alert( "value = " + value );
    }
};
xhr.open("POST", "upload.php", true);
xhr.send(formData); 
```

信息在这里：[http ://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php](http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php)

请记住，必须在发送任何实际输出之前调用 header()。所以摆脱你在 php 文件中的所有回声。一旦您回显，就会启动输出缓冲区以响应客户端。

信息在这里： http: [//php.net/manual/pt_BR/function.header.php](http://php.net/manual/pt_BR/function.header.php)

我认为这应该是您在 php 页面上的唯一回声。

```
echo include( 'giveid.php'); 
```

尝试使用 Google Chrome 开发工具网络选项卡查看来自您的 php 网页的响应。

*   启动谷歌浏览器，
*   按f12，
*   单击网络选项卡，
*   重新加载您的页面，
*   点击ajax响应页面，
*   单击预览以查看响应。

信息在这里：[https ://developers.google.com/chrome-developer-tools/docs/network](https://developers.google.com/chrome-developer-tools/docs/network)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:18:38.367

[xhr 文档](http://www.w3.org/TR/XMLHttpRequest/)

获取 xhr.response 然后解析它。

我们通常返回一个 json 字符串，以便 js 可以轻松解析它。

[谷歌搜索xhr示例](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp) 是这样的：

```
xhr.onreadystatechange=function()
{
    if (xhr.readyState!=4 || xhr.status!=200)
        return;
    var resp = xhr.responseText;
    var parsed = eval(resp);
} 
```

# facebook - 作为开发人员，我可以浏览通过我的应用发布的帖子吗？

> ID：13737914
> 
> 赞同：0
> 
> 时间：2012-12-06T06:08:11.087
> 
> 标签：facebook, facebook-graph-api, analytics

我在 Facebook Developer 上找到了以下部分。Facebook 是否为我提供了一种浏览用户帖子的方式，还是我需要存储帖子 ID 并编写自己的仪表板？

![在此处输入图像描述](../Images/78d19d95407511f4c0fe129cacd45ed0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:56:10.490

这取决于您使用的是哪个 SDK。一般来说，Facebook 自己不提供解决方案，如果您使用 JavaScript SDK 发布帖子，则无法获取消息。

话虽如此，获取通过 JS SDK 发布的消息的唯一方法如下：

*   用户必须授权您的应用
*   您必须存储用户的访问令牌
*   您必须存储每个帖子的 Post-ID，以便您可以进行 API 调用以获取消息

请记住，这些用户访问令牌的有效期仅为约 2 小时，因此您必须使用延长的令牌（有效期最长为 60 天）。在那 60 天之后，无法再阅读这些消息，因此如果您以后需要/想要它们，您必须将它们存储在您的数据库中。另请记住，用户可以删除您的应用程序并使令牌无效。

如果您使用 PHP SDK 进行发布（仅适用于授权您的应用程序的用户），那么您可以将消息值存储在数据库中，因为无论如何您都需要获取消息（例如，从文本字段）。**但出于隐私原因，请务必告诉用户您将存储什么，以及为什么以及存储多长时间**。

总结：做到这一点的唯一方法（不会遇到访问令牌问题）是让用户授权您的应用程序，每次发布后，您必须使用新的帖子 ID 通过 API 调用获取消息并将其存储在您的数据库。这对 PHP SDK 和 JS SDK 有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:20:13.970

是的，现在没有办法，您可以通过它查看通过您的应用发布的帖子。实现此目的的唯一方法是存储`post_id`每个已发布`post`的 ，并创建一个脚本来获取帖子数据，当提供`post_id's`

# c# - 如何使用 C# 作为面向对象设计？

> ID：13737918
> 
> 赞同：0
> 
> 时间：2012-12-06T06:08:52.037
> 
> 标签：c#

这可能已经被问过了，抱歉，C# 是像 Java 这样的面向对象的语言吗？自从我使用 C++ 以来已经有一段时间了，但我只是想检查一下：我可以创建多个类并将它们用作同一个 Visual Studio 项目中的对象吗？这些是 .cs 文件吗？例如 Playback_Adjuster.cs、Gesture_Control.cs、Audio_File.cs？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:10:15.123

是的，C# 完全是面向对象的。你可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/dd460654.aspx](http://msdn.microsoft.com/en-us/library/dd460654.aspx)

此外，正如您所提到的，C# 文件通常具有 .cs 扩展名。您可以在同一个项目中使用多个类 - 就像其他 OO 语言一样。根据我的经验，我发现 C# 和 Java 在许多方面实际上非常相似——当然也有区别。

# git - 我可以通过 Git 获取特定文件夹吗

> ID：13737919
> 
> 赞同：1
> 
> 时间：2012-12-06T06:09:04.097
> 
> 标签：git, version-control

我是使用 Git 的新手，现在我正在尝试我的存储库。
我有一个存储库，其中放置了许多文件夹。

现在在我的新项目中，我想从该存储库中获取特定文件夹。

我可以在 Git 中做到这一点吗？我已将我的 repo 上传到 BitBucket。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:31:14.603

如果你真的只需要某些目录，你应该将它们声明为你的主 git repo 的**[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)**。
这样，这些目录就在它们自己的 git repo 中，您可以独立于父 repo 克隆它们。

否则，您想要的称为**[稀疏检出](http://git-scm.com/docs/git-read-tree#_sparse_checkout)**（与浅克隆相反，浅克隆会克隆所有 repo 的部分历史记录），并且如“[使用 Git 和 Mercurial 进行部分克隆](https://stackoverflow.com/questions/2586824/partial-clone-with-git-and-mercurial)”中所述，使用 Git 是不可能的。
Git1.7.0 包含它`git read-tree`（但您仍然需要克隆完整的 repo）。
有关脚本，请参阅“ [Git 1.7.0 中](https://stackoverflow.com/a/2340860/6309)的稀疏检出？”。

“[克隆 github 项目的部分](https://stackoverflow.com/questions/1618025/clone-parts-of-a-github-project)”提到了其他选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:34:04.913

通过稀疏结帐可以实现您想要的，我在这个答案中已经解释过：[https](https://stackoverflow.com/a/13738858/758345) ://stackoverflow.com/a/13738858/758345 。

但我们警告：如果您需要此功能，您可能做错了什么。您可能应该向我们提供有关您的情况以及您想要实现的目标的更多信息。

# linq - Linq 制作主键 system.nullable 不只是 int

> ID：13737921
> 
> 赞同：1
> 
> 时间：2012-12-06T06:09:18.810
> 
> 标签：linq, linq-to-sql, mapping, dml

我正在使用 Linq to SQL 将我的数据库映射到基础对象。我将所有表拖到我的 dbml 中，它们都设置得很好。我保存 dbml 并创建代表表的类等。

在我的数据库中，我有一个这样的表：

```
CREATE TABLE [dbo].[BidNames](
    [BidNameID] [int] IDENTITY(1,1) NOT NULL,
    [CustomerID] [int] NOT NULL,
    [BidName] [varchar](75) NOT NULL,
 CONSTRAINT [PK_BidNames] PRIMARY KEY CLUSTERED 
(
    [BidNameID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 90) ON [PRIMARY]
) ON [PRIMARY] 
```

BidNameID 字段显然是一个主键，显然不是 NULL。然而，Linq 像这样定义 BidNameID：

```
 [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_BidNameID", DbType="Int")]
    public System.Nullable<int> BidNameID
    {
        get
        {
            return this._BidNameID;
        }
        set
        {
            if ((this._BidNameID != value))
            {
                if (this._BidName1.HasLoadedOrAssignedValue)
                {
                    throw new System.Data.Linq.ForeignKeyReferenceAlreadyHasValueException();
                }
                this.OnBidNameIDChanging(value);
                this.SendPropertyChanging();
                this._BidNameID = value;
                this.SendPropertyChanged("BidNameID");
                this.OnBidNameIDChanged();
            }
        }
    } 
```

其中 BidNameID 定义为 System.Nullable。我数据库中的所有其他表都正确解析，所以我想知道为什么会这样。有任何想法吗？

提前致谢。

编辑

我发现这个问题与另一个表有关。如果我从我的 dbml 中删除 Bids 表并重新保存，BidNameID 列会正确解析为 int。如果我把 Bids 表放回去并保存它会返回 Nullable。Bids 表在 BidNames 表中有一个外键，但数据是干净的。这是投标表的结构：

```
CREATE TABLE [dbo].[Bids](
    [BidID] [int] IDENTITY(1,1) NOT NULL,
    [CustomerID] [int] NOT NULL,
    [ItemID] [int] NOT NULL,
    [Amount] [money] NOT NULL,
    [BidName] [varchar](75) NOT NULL,
    [BidTime] [datetime] NOT NULL,
    [BidNameID] [int] NULL,
 CONSTRAINT [PK_Bids] PRIMARY KEY CLUSTERED 
(
    [BidID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 90) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[Bids]  WITH CHECK ADD  CONSTRAINT [FK_Bids_BidNames] FOREIGN KEY([BidNameID])
REFERENCES [dbo].[BidNames] ([BidNameID])
GO

ALTER TABLE [dbo].[Bids] CHECK CONSTRAINT [FK_Bids_BidNames]
GO

ALTER TABLE [dbo].[Bids]  WITH CHECK ADD  CONSTRAINT [FK_Bids_Customers] FOREIGN KEY([CustomerID])
REFERENCES [dbo].[Customers] ([CustomerID])
GO

ALTER TABLE [dbo].[Bids] CHECK CONSTRAINT [FK_Bids_Customers]
GO

ALTER TABLE [dbo].[Bids]  WITH CHECK ADD  CONSTRAINT [FK_Bids_Items] FOREIGN KEY([ItemID])
REFERENCES [dbo].[Items] ([ItemID])
GO

ALTER TABLE [dbo].[Bids] CHECK CONSTRAINT [FK_Bids_Items]
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:11:27.827

我拿了你的表脚本，在我的数据库中运行并将它拖到一个 dbml 中，它没有生成为可为空的（VS2010，VB.NET 4.0）：

```
<Global.System.Data.Linq.Mapping.ColumnAttribute(
    Storage:="_BidNameID", AutoSync:=AutoSync.OnInsert,
    DbType:="Int NOT NULL IDENTITY", IsPrimaryKey:=True,
    IsDbGenerated:=True)>
    Public Property BidNameID() As Integer
        Get
            Return Me._BidNameID
        End Get
        Set(value As Integer)
            If ((Me._BidNameID = value) _
               = False) Then
                Me.OnBidNameIDChanging(value)
                Me.SendPropertyChanging()
                Me._BidNameID = value
                Me.SendPropertyChanged("BidNameID")
                Me.OnBidNameIDChanged()
            End If
        End Set
    End Property 
```

也许尝试其中的一种或多种？

1.  删除/重新创建物理表
2.  在服务器资源管理器中删除/重新创建您的数据库连接
3.  删除/重新创建 dbml
4.  手动编辑设计器文件
5.  创建额外的数据上下文部分类并手动维护该表/映射

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:58:54.767

我不一定明白为什么，但是当我更改 Bids 表并使 BidNameID 字段不为 NULL 时，它解决了 BidName.BidNameID 字段的问题。它现在解析为 int 而不是可为空的。

# php - 如何检查javascript数组中是否存在值

> ID：13737923
> 
> 赞同：-3
> 
> 时间：2012-12-06T06:09:25.277
> 
> 标签：php, javascript, html, arrays

这是我的 javascript 数组 `alert(Parameter);`，它会发出警报：

> Eqt_Param0=4.00,Eqt_Param1=0,Eqt_Param2=0

现在我要做的是，如果任何数组元素值等于“0”，我需要提醒“数组不包含所有值”，那么如何检查数组是否为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:12:34.390

看起来您的数组是一组“key=number”形式的值，您想知道是否有任何数字等于零。

“正确”的做法是：

```
var l = Parameter.length, i;
for( i=0; i<l; i++) {
    if( Parameter[i].split("=")[0] == "0") {
        alert("Array does not contain all values");
        break;
    }
} 
```

但你可以把它搞砸：

```
if( (Parameter.join(",")+",").indexOf("=0,") > -1) {
    alert("Array does not contain all values");
} 
```

# backbone.js - 骨干结构/集合/视图传递和返回数据

> ID：13737924
> 
> 赞同：0
> 
> 时间：2012-12-06T06:09:28.320
> 
> 标签：backbone.js

所以我正在整理一个非常简单的应用程序并且有点卡住了。

到目前为止，我有我的路由器

```
 var AppRouter = Backbone.Router.extend({

routes:{
    "":"home"
},

initialize:function () {
    // Handle back button throughout the application
    $('.back').live('click', function(event) {
        window.history.back();
        return false;
    });
    this.firstPage = true;
    this.products = new Products();

},

home:function () {
    var view = new HomeView({collection:this.products});

// render the view when the collection is loaded
this.products.on("renderCompleted:Products", function() {

    //alert("ff");
    view.render();
});

// fetch should trigger "reset" when complete
this.products.fetch();
} 
```

我的模型

```
var Product=Backbone.Model.extend({
    defaults:{
        id:"",
        name:'',
        longName:'',
        productID:''
    }
});

return Product; 
```

我的收藏

```
 var Products=Backbone.Collection.extend({

      // Book is the model of the collection
      model:Product,

      fetch:function(){
        var self=this;
        var tmpItem;
        //fetch the data using ajax

          var jqxhr = $.getJSON("data/product.json")
          .success(function(data, status, xhr) { 

            $.each(data.data.productTypeList, function(i,item){

              tmpItem=new Product({id:item.id,name:item.name,longName:item.longName, productID:i});
              self.add(tmpItem);

            });

            self.trigger("fetchCompleted:Products");

          })

      }

});

return Products; 
```

和我的看法

var HomeView = Backbone.View.extend({

```
template: _.template(homeViewTemplate),

    render:function (eventName) {
    //$(this.el).html(this.template());

     this.$el.empty();
  //compile template using the data fetched by collection
  this.$el.append(this.template({data:this.collection.toJSON()}));

  console.log("test" + this.collection.get('data'));

    return this;
} 
```

homeViewTemplate 调用有这个 HTML

```
 <ul >
           <% for (var i = 0; i < data.length; i++) { %>
                  <% var item = data[i]; %>
                  <li>
                    <a href="#products/list/<%= item.productID%>"><%= item.longName %></a>
                  </li>
            <% } %>
    </ul> 
```

您可以从路由器中看到 init this.Products 是由集合创建的

然后当调用 home 时，它​​会运行视图。

我认为没有任何东西从集合传递到视图，我不确定这是如何完成的？我的收藏设置错了吗？- 我必须调用 fetch 并将其传递给视图吗？

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:22:44.137

> 我必须调用 fetch 并将其传递给视图吗？

您必须调用 fetch，并使其成功回调触发器`view.render`。您可以使用`success`JQuery 调用的选项来做到这一点；或使用通常调用的`reset`事件。`collection.fetch`我建议把`collection.reset`你的 custom 放在里面`fetch`：

```
// get the data an an array of models
var models = data.data.productTypeList.map(function(item) {
    return new Product({id:item.id,name:item.name,longName:item.longName, productID:i});
});

// populate the collection
self.reset(models); 
```

然后在“home”路由中调用`fetch`，然后调用`render`回调：

```
home:function () {
    var view = new HomeView({collection:this.products});

    // render the view when the collection is loaded
    this.products.on("reset", function() {
        view.render();
    });

    // fetch should trigger "reset" when complete
    this.products.fetch();
} 
```

# scala - 未解决的依赖 SBT org.scala-sbt#sbt_2.9.1;0.12.1：未找到，播放示例

> ID：13737926
> 
> 赞同：7
> 
> 时间：2012-12-06T06:09:34.387
> 
> 标签：scala, playframework-2.0, sbt

我正在尝试在 Play 2.0 框架中运行示例，但是当我去运行“play”或“sbt”时。

当我转到目录“/samples/scala/helloworld”时，我执行“sbt”并获得：

```
 [info] Loading project definition from C:\src\Play20\samples\scala\helloworld\project
[warn]  module not found: play#sbt-plugin;2.0
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/play/sbt-plugin/scala_2.9.2/sbt_0.12/2.0/ivys/ivy.xml
[warn] ==== sbt-plugin-releases: tried
[warn]   http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/play/sbt-plugin/scala_2.9.2/sbt_0.12/2.0/ivys/ivy.xml
[warn] ==== local: tried
[warn]   C:\Users\labra\.ivy2\local\play\sbt-plugin\scala_2.9.2\sbt_0.12\2.0\ivys\ivy.xml
[warn] ==== Typesafe repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/play/sbt-plugin_2.9.2_0.12/2.0/sbt-plugin-2.0.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/play/sbt-plugin_2.9.2_0.12/2.0/sbt-plugin-2.0.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: play#sbt-plugin;2.0: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn] 
[warn]  Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]      play:sbt-plugin:2.0 (sbtVersion=0.12, scalaVersion=2.9.2)
[warn] 
sbt.ResolveException: unresolved dependency: play#sbt-plugin;2.0: not found
    at sbt.IvyActions$.sbt$IvyActions$$resolve(IvyActions.scala:214)
. . .

    at java.lang.Thread.run(Thread.java:722)
[error] (*:update) sbt.ResolveException: unresolved dependency: play#sbt-plugin;2.0: not found
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? 
[info] Loading project definition from C:\src\Play20\samples\scala\helloworld\project
[warn]  module not found: play#sbt-plugin;2.0
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/play/sbt-plugin/scala_2.9.2/sbt_0.12/2.0/ivys/ivy.xml
[warn] ==== sbt-plugin-releases: tried
[warn]   http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/play/sbt-plugin/scala_2.9.2/sbt_0.12/2.0/ivys/ivy.xml
[warn] ==== local: tried
[warn]   C:\Users\labra\.ivy2\local\play\sbt-plugin\scala_2.9.2\sbt_0.12\2.0\ivys\ivy.xml
[warn] ==== Typesafe repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/play/sbt-plugin_2.9.2_0.12/2.0/sbt-plugin-2.0.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/play/sbt-plugin_2.9.2_0.12/2.0/sbt-plugin-2.0.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: play#sbt-plugin;2.0: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn] 
[warn]  Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]      play:sbt-plugin:2.0 (sbtVersion=0.12, scalaVersion=2.9.2)
[warn] 
sbt.ResolveException: unresolved dependency: play#sbt-plugin;2.0: not found
    at sbt.IvyActions$.sbt$IvyActions$$resolve(IvyActions.scala:214)
    at sbt.IvyActions$$anonfun$update$1.apply(IvyActions.scala:122)
. . .
    at java.lang.Thread.run(Thread.java:722)
[error] (*:update) sbt.ResolveException: unresolved dependency: play#sbt-plugin;2.0: not found
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? q 
```

[我从http://www.scala-sbt.org/release/docs/Getting-Started/Setup](http://www.scala-sbt.org/release/docs/Getting-Started/Setup)安装了 sbt 12.1 版

我在这里注意到一个类似的问题：[https ://groups.google.com/forum/?fromgroups=#!topic/simple-build-tool/DGUbWsgZiLw](https://groups.google.com/forum/?fromgroups=#!topic/simple-build-tool/DGUbWsgZiLw)

在答案中，它似乎与 SBT 的“Launcher”版本有关，我怎么知道我的 Launcher sbt 版本是哪个？我该如何更新它？

我也尝试从源代码编译 xsbt，但是在运行“sbt build-all”时，我得到：

```
 . . .
[info] Reading library jar [C:\compi\jdk\jre\lib\rt.jar]
[error] Error: Can't read [proguard.ClassPathEntry@73abdb5e] (Can't process class [com/oracle/net/Sdp$1.class] (Unsupported version number [51.0] for class format))
[error] java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: GC overhead limit exceeded
[error] Use 'last' for the full log. 
```

但是，我的问题不是编译 xsbt，而是要知道如何执行“Play's examples”

在新文件夹中运行“sbt sbt-version”时，我获得：

```
[info] Set current project to default-85f41b (...)
[info] 0.12.1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T11:22:29.040

如果您查看[project/plugins.sbt](https://github.com/playframework/Play20/blob/master/samples/scala/helloworld/project/plugins.sbt)，您会看到它需要`play.version`设置系统属性：

```
addSbtPlugin("play" % "sbt-plugin" % Option(System.getProperty("play.version")).getOrElse("2.0")) 
```

因此，您应该提供必要的`play.version`财产

```
$ sbt -Dplay.version=2.1-RC1 
```

或简单地更改`plugins.sbt`为

```
addSbtPlugin("play" % "sbt-plugin" % "2.1-RC1") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-09T01:30:56.780

**对于 Activator 1.0 用户**：

在将项目加载到 Activator 1.0**后将**Play 项目升级到更高版本时，您可能会遇到此问题。这是因为 Activator 在 /project 目录中创建的文件看起来像`activator-...-shim.sbt`. 删除这些文件，Activator 应该会在您下次编译时解决该问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T23:36:33.363

切换到 Play 2.1-RC1 后问题已解决

我还遇到了一些依赖项的问题，我解决了插入问题：

```
// The Typesafe snapshots repository
resolvers += "Typesafe Snapshots" at "http://repo.typesafe.com/typesafe/snapshots/" 
```

在 plugins.sbt

我只是在关注：[https ://github.com/playframework/Play20/wiki/Repositories](https://github.com/playframework/Play20/wiki/Repositories)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-16T00:10:29.707

对于**play 2.0.2**，SBT 的 2.0.2 版本在我的项目中运行良好。我将**plugins.sbt**文件中的*addSbtPlugin*行更改为：

 **```
addSbtPlugin("play" % "sbt-plugin" % "2.0.2") 
```

它应该与早期版本类似。正如 Labra 已经指出的那样，由于此版本的 SBT 不再是最新版本，您可能还需要添加以下解析器才能获得它：

```
resolvers += "Typesafe Snapshots" at "http://repo.typesafe.com/typesafe/snapshots/" 
```

摆脱此类问题的另一种方法是尽可能将项目的 Play Framework 更新到最新版本。从长远来看，这可能是最好的选择，因为它可以让您的代码库保持最新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-26T20:51:02.777

按照何塞的回答，我使它工作，但使用这个解析器：

```
"Typesafe Snapshots" at "http://repo.typesafe.com/typesafe/maven-releases" 
```**

# registration - 如何注册 Windows Phone 8？什么是 Windows Phone IP Over USB 传输 (IpOverUsbSvc)？

> ID：13737930
> 
> 赞同：9
> 
> 时间：2012-12-06T06:10:11.050
> 
> 标签：registration, windows-phone-8

我有一个 Windows Phone 8 并试图用开发者帐户注册它。

我正在使用 Visual Studio 2012 附带的工具“Windows Phone Developer Registration”。

但是当我尝试注册时，我收到一条消息

“对于 Windows Phone8 手机，请确保 Windows Phone IP Over USB 传输 (IpOverUsbSvc) 服务正在运行”

想知道这项服务是什么以及如何运行它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-06T07:57:59.000

在Windows 8中搜索并在设置下键入“服务”，您将找到“查看本地服务”并选择它。它打开服务窗口。

或者，打开控制面板并选择“管理工具”，您将在其中找到“服务”图标。双击它还会打开“服务”窗口。

执行上述任一操作后，找到名称为“Windows Phone IP over USB Transport (IpOverUsbSvc)”的服务，然后右键单击它并启动/重新启动该服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-27T13:02:23.007

拔下您的设备，进入设备管理器，选择查看 → 显示隐藏的设备。您将在**Universal Serial Bus devices**和**Portable Devices**中看到您的设备。只需卸载它们，再次插入设备，然后完成:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:24:15.010

仅供参考，您还需要一个 Active MICRO SIM 来注册 Windows Phone 8。我遇到了很多错误，当我插入 Active Mirco Sim 时能够成功完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T15:59:28.120

只是我的1美分。

对我来说，问题是我试图用旧设备恢复的操作系统注册新设备。问题是新设备的名称与旧设备的名称相同。当我用新名称重命名设备时，它注册没有问题。唉，错误信息具有误导性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-09T15:19:35.390

要更新 - 您不需要激活的 SIM 卡来解锁开发者。我购买了一台便宜的诺基亚 520 进行设备测试，但它根本没有 SIM 卡。

我在注册手机时遇到了这个错误，我必须在注册完成之前重新启动 IpOvrUSBSvc 服务（它被列为正在运行，但仍然没有工作）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-25T17:23:21.517

我发现我必须在 Windows Phone 8.1 下禁用 VPN 才能注册我的手机。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-01T07:57:30.607

如果您最近进行了某种系统重置（软/硬），您应该检查**DATE**是否设置正确。

在我尝试注册设备时，设备上的错误日期是问题。特别是如果您正在解锁仅用于开发的设备，则很容易忽略错误的日期。

我相信标记为正确的答案也取决于更改日期，因为**当您插入有效的 SIM 卡时，手机会通过移动网络自动更新日期时间**

# c# - 写入 CSV 和文本文件

> ID：13737934
> 
> 赞同：0
> 
> 时间：2012-12-06T06:10:18.160
> 
> 标签：c#, text, csv

在 C# 中，有人可以教我如何每次将这个程序的输出写入 csv 和具有唯一 ID 的文本文件吗？就像我不想写入控制台一样，我希望所有内容同时进入 csv 文件和文本文件。并且对于 txt 文件也包含一个唯一的 ID 作为记录保存。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{

public class Product
{
    public string description;
    public double price;
    public int count;

    public Product(string description, double price, int count)
    {
        this.description = description;
        this.price = price * count;
        this.count = count;
    }

    public string GetDetailLine()
    {

        return String.Format(count + " {0}: {1:c}", description, price);
    }
}

class Program
{
    static void Main(string[] args)
    {
        int AdultTicket;
        int KidTicket;
        int PopcornOrder;
        int DrinkOrder;
        double tax = .05;

        List<Product> products = new List<Product>();

        Console.Write("How many adults? ");
        int.TryParse(Console.ReadLine(), out AdultTicket);
        Product adultTicket = new Product("Adult Ticket(s)", 7.75, AdultTicket);
        products.Add(adultTicket);

        Console.Write("How many kids? ");
        int.TryParse(Console.ReadLine(), out KidTicket);
        Product kidTicket = new Product("Kid Ticket(s)", 5.75, KidTicket);
        products.Add(kidTicket);

        Console.Write("Do you want popcorn? ");
        string input = Console.ReadLine();
        if (input.ToUpper() == "YES")
        {
            Console.Write ("How many? ");
            int.TryParse(Console.ReadLine (), out PopcornOrder);
            Product popcorn = new Product("Small popcorn", 3.50, PopcornOrder );
            products.Add(popcorn);
        }

        Console.Write("Do you want a drink? ");
        string input2 = Console.ReadLine();
        if (input2.ToUpper() == "YES")
        {
            Console.Write("How many? ");
            int.TryParse(Console.ReadLine(), out DrinkOrder);
            Product drink = new Product("Large Soda", 5.50, DrinkOrder);
            products.Add(drink);
            Console.Clear();
        }

        int count = 0;
        for (int i = 0; i < products.Count; i++)
        {
            count += products[i].count;
        }

        double total = 0;
        for (int i = 0; i < products.Count; i++)
        {                
            Console.WriteLine("\t\t" + products[i].GetDetailLine());
            total += products[i].price;
        }

        Console.WriteLine("\nYour sub total is:  {0:c}", total);
        Console.WriteLine("Tax: {0:c}", total * tax);
        Console.WriteLine("Your total is: {0:c}", total * tax + total);
        Console.ReadLine();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:27:43.577

`to a csv and a text file`，好吧，用于写入文本文件

在某些情况下将其用于您的请求`button click`：

```
 private static string logFileName = @"C:\Junk\MyLogfile.txt";
       using (StreamWriter writer = File.AppendText(logFileName))
            {
                Log("Your sub total is:"+total.toString(), writer);
                Log("Tax:"+ (total * tax).toString(), writer);
                Log("Your total is:"+(total * tax + total).toString(), writer);
                writer.Close();
            } 
```

和

```
 public static void Log(String logMessage, TextWriter writer)
        {
            writer.Write("\r\nLog Entry : ");
            writer.WriteLine("{0} {1}", DateTime.Now.ToLongTimeString(),
                DateTime.Now.ToLongDateString());
            writer.WriteLine("  :");
            writer.WriteLine("  :{0}", logMessage);
            writer.WriteLine("-------------------------------");
            // Update the underlying file.
            writer.Flush();
        } 
```

更多详情请访问[http://www.c-sharpcorner.com/resources/735/how-to-append-a-text-file-in-c-sharp.aspx](http://www.c-sharpcorner.com/resources/735/how-to-append-a-text-file-in-c-sharp.aspx)

# xcode - 滚动时存储在数组中的表视图单元格索引丢失

> ID：13737935
> 
> 赞同：1
> 
> 时间：2012-12-06T06:10:17.383
> 
> 标签：xcode, tableview

最近几天我正在处理表格视图。但是，现在我被困住了。实际上，我所做的是我想将单元格索引存储到一个可变数组中。我已经完成了这部分。但是，当我滚动表视图时，存储在数组中的数据会被刷新，并且我存储的索引会从该可变数组中删除。这是我到目前为止所做的代码....

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (tableView == table1) { static NSString *CellIdentifier = @"Cell";

    ```
    NSString *CellId = [NSString stringWithFormat:@"Cell %d",indexPath.row];

    CellIdentifier = CellId;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)

    {                
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

    }
    NSUserDefaults *defaults1 = [NSUserDefaults standardUserDefaults];
    NSString *loadname1 = [defaults1 objectForKey:@"name1saved"];

    NSUserDefaults *defaults2 = [NSUserDefaults standardUserDefaults];
    NSString *loadname2 = [defaults2 objectForKey:@"name2saved"];

    NSUserDefaults *defaults3 = [NSUserDefaults standardUserDefaults];
    NSString *loadname3 = [defaults3 objectForKey:@"name3saved"];

    NSUserDefaults *defaults4 = [NSUserDefaults standardUserDefaults];
    NSString *loadname4 = [defaults4 objectForKey:@"name4saved"];

    NSUserDefaults *defaults5 = [NSUserDefaults standardUserDefaults];
    NSString *loadname5 = [defaults5 objectForKey:@"name5saved"];

    NSUserDefaults *defaults6 = [NSUserDefaults standardUserDefaults];
    NSString *loadname6 = [defaults6 objectForKey:@"name6saved"];

    NSUserDefaults *defaults7 = [NSUserDefaults standardUserDefaults];
    NSString *loadname7 = [defaults7 objectForKey:@"name7saved"];

    NSUserDefaults *defaults8 = [NSUserDefaults standardUserDefaults];
    NSString *loadname8 = [defaults8 objectForKey:@"name8saved"];

    NSUserDefaults *defaults9 = [NSUserDefaults standardUserDefaults];
    NSString *loadname9 = [defaults9 objectForKey:@"name9saved"];

    NSUserDefaults *defaults10 = [NSUserDefaults standardUserDefaults];
    NSString *loadname10 = [defaults10 objectForKey:@"name10saved"];

    NSUserDefaults *defaults11 = [NSUserDefaults standardUserDefaults];
    NSString *loadname11 = [defaults11 objectForKey:@"name11saved"];

    NSUserDefaults *defaults12 = [NSUserDefaults standardUserDefaults];
    NSString *loadname12 = [defaults12 objectForKey:@"name12saved"];

    NSUserDefaults *defaults13 = [NSUserDefaults standardUserDefaults];
    NSString *loadname13 = [defaults13 objectForKey:@"name13saved"];

    NSUserDefaults *defaults14 = [NSUserDefaults standardUserDefaults];
    NSString *loadname14 = [defaults14 objectForKey:@"name14saved"];

    NSUserDefaults *defaults15 = [NSUserDefaults standardUserDefaults];
    NSString *loadname15 = [defaults15 objectForKey:@"name15saved"];

    NSUserDefaults *defaults16 = [NSUserDefaults standardUserDefaults];
    NSString *loadname16 = [defaults16 objectForKey:@"name16saved"];

    NSUserDefaults *defaults17 = [NSUserDefaults standardUserDefaults];
    NSString *loadname17 = [defaults17 objectForKey:@"name17saved"];

    NSUserDefaults *defaults18 = [NSUserDefaults standardUserDefaults];
    NSString *loadname18 = [defaults18 objectForKey:@"name18saved"];

    NSUserDefaults *defaults19 = [NSUserDefaults standardUserDefaults];
    NSString *loadname19 = [defaults19 objectForKey:@"name19saved"];

    NSUserDefaults *defaults20 = [NSUserDefaults standardUserDefaults];
    NSString *loadname20 = [defaults20 objectForKey:@"name20saved"];

    mTFArrayOfNames = [[NSMutableArray alloc]init ];

    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname1] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname2] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname3] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname4] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname5] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname6] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname7] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname8] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname9] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname10] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname11] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname12] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname13] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname14] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname15] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname16] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname17] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname18] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname19] atIndex:[mTFArrayOfNames count]] ;
    [mTFArrayOfNames insertObject:[NSString stringWithFormat:@"%@", loadname20] atIndex:[mTFArrayOfNames count]] ;

    NSLog(@"%@", mTFArrayOfNames);

    if (indexPath.row == 0) {

        cell.textLabel.text = loadname1;
    }

    if (indexPath.row == 1) {
        cell.textLabel.text = loadname2;
    }

    if (indexPath.row == 2) {
        cell.textLabel.text = loadname3;
    }
    if (indexPath.row == 3) {
        cell.textLabel.text = loadname4;
    }
    if (indexPath.row == 4) {

        cell.textLabel.text = loadname5;
    }

    if (indexPath.row == 5) {
        cell.textLabel.text = loadname6;
    }

    if (indexPath.row == 6) {
        cell.textLabel.text = loadname7;
    }
    if (indexPath.row == 7) {
        cell.textLabel.text = loadname8;
    }

    if (indexPath.row == 8) {

        cell.textLabel.text = loadname9;
    }

    if (indexPath.row == 9) {
        cell.textLabel.text = loadname10;
    }

    if (indexPath.row == 10) {
        cell.textLabel.text = loadname11;
    }
    if (indexPath.row == 11) {
        cell.textLabel.text = loadname12;
    }
    if (indexPath.row == 12) {

        cell.textLabel.text = loadname13;
    }

    if (indexPath.row == 13) {
        cell.textLabel.text = loadname14;
    }

    if (indexPath.row == 14) {
        cell.textLabel.text = loadname15;
    }
    if (indexPath.row == 15) {
        cell.textLabel.text = loadname16;
    }
    if (indexPath.row == 16) {

        cell.textLabel.text = loadname17;
    }

    if (indexPath.row == 17) {
        cell.textLabel.text = loadname18;
    }

    if (indexPath.row == 18) {
        cell.textLabel.text = loadname19;
    }
    if (indexPath.row == 19) {
        cell.textLabel.text = loadname20;
    }

    cell.textLabel.font = [UIFont fontWithName:@"Bauhaus 93" size:18];
    cell.textLabel.textColor = [UIColor whiteColor];
    cell.textLabel.backgroundColor = [UIColor grayColor];
    [cell.textLabel setTextAlignment:UITextAlignmentCenter];

    return cell; 
    ```

    } }

*   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (tableView == table1) { UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    ```
    if ([selectedCell accessoryType] == UITableViewCellAccessoryNone) {
        [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];

        [selectedIndexes addObject:[NSNumber numberWithInt:indexPath.row]];
        selectedCell.backgroundColor =[UIColor blueColor];

    } else {
        [selectedCell setAccessoryType:UITableViewCellAccessoryNone];

        [selectedIndexes removeObject:[NSNumber numberWithInt:indexPath.row]];

        selectedCell.backgroundColor =[UIColor clearColor];

    }
    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    names = [[NSMutableArray alloc] init];

    for (int i = 0; i < mTFArrayOfNames.count; i++)
    {
        if ([self.table1 cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]].accessoryType == UITableViewCellAccessoryCheckmark) 
        {
            [names addObject:[mTFArrayOfNames objectAtIndex:i]];

      }
        NSLog(@"name1 is  %@", names);
    } 
    ```

} } 请帮我。提前谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:18:30.577

`names`是正在刷新的MutableArray 吗？如果是这样，那是因为您每次选择单元格时都会对其进行初始化。因此最终删除了先前设置的值。

*   在委托之外初始化`names`数组。也许在 viewDidLoad 或者你初始化 TableView 的地方

*   在 didSelect 中，将新对象添加到`names`数组中

此外，在 中创建所有并添加到新初始化的`loadnameX`中是错误的逻辑。`cellForRowAtIndexPath``mTFArrayOfNames`

*   从中删除整个逻辑`cellForRowAtIndexPath`并将其添加到 viewDidLoad 或您初始化 TableView 的任何位置

# django - 升级到 Python 3.3 和设置 Django 的问题

> ID：13737936
> 
> 赞同：1
> 
> 时间：2012-12-06T06:10:23.700
> 
> 标签：django, linux, debian, python-3.3

我是 Linux 新手，正在尝试在我的机器上设置 Python / Django！我从源文件安装了 Python 3.3，并将其编译为`/usr/local/bin`. `/usr/bin/python`然后我在and之间创建了一个符号链接`/usr/local/bin/python3`，这样每当我从命令行调用 python 时，它都会使用最新版本。

现在我正在尝试安装 MySQL Python，我得到以下输出：

```
apt-get install python-mysqldb

Reading package lists... Done
Building dependency tree
Reading state information... Done
python-mysqldb is already the newest version.
The following extra packages will be installed:
  apt-listchanges python-apt
Suggested packages:
  python-glade2 python-gtk2 python-apt-dbg python-vte python-apt-doc
The following packages will be upgraded:
  apt-listchanges python-apt
2 upgraded, 0 newly installed, 0 to remove and 142 not upgraded.
3 not fully installed or removed.
Need to get 0 B/394 kB of archives.
After this operation, 250 kB of additional disk space will be used.
Do you want to continue [Y/n]? Y
Traceback (most recent call last):
  File "/usr/bin/apt-listchanges", line 28, in <module>
    import apt_pkg
ImportError: No module named 'apt_pkg' 
```

有想法该怎么解决这个吗？或者关于如何清理这个安装的任何提示（如果这个太坏了）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:31:15.600

重新安装 Python ( `apt-get install --reinstall python`) 应该可以解决您的安装问题。

请注意，您的方法会导致很多问题。更改系统 Python 版本不仅仅涉及更改符号链接，这就是为什么您应该将其留给发行版制造商（[请参阅类似问题](https://unix.stackexchange.com/q/9711/)）。

另一个事实是 Debian 已经[打包了 3.3](http://packages.qa.debian.org/p/python3.3.html)（目前处于实验阶段），所以宁愿安装它。我只是不知道系统 Python 模块（例如`python-apt`）是否可以使用它。如果没有，只需使用 3.2。

另一件事，如果你想使用 python-mysqldb，你必须坚持使用 Python 2，因为它不会与 Python 3 一起运行。如果你坚持使用 Python 3，请使用`python3-mysql.connector`.

# android - 如何在 android 中读取 PDF 文件以及如何在 android 中读取 pdf 文件中的索引？

> ID：13737942
> 
> 赞同：0
> 
> 时间：2012-12-06T06:10:55.167
> 
> 标签：android, pdf, pdf-generation, android-package-managers, android-maven-plugin

我将开发一个像 foxit 阅读器这样的 android 应用程序。在我的应用程序中，我需要在 pdf 文件中找到索引 ..请帮助我如何在 pdf 文件中找到索引编程盟友.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:12:48.410

[您可以从这里](http://pdfbox.apache.org/download.html#pdfbox)下载 PDFbox API 来阅读 PDF 。

# python - 允许输入 Unicode 转义符作为命令行参数

> ID：13737944
> 
> 赞同：0
> 
> 时间：2012-12-06T06:11:09.907
> 
> 标签：python, linux, unicode

我有一个相当简单的程序，它从文件系统上的文件中获取值并允许用户格式化并打印它们。脚本的平均调用如下所示：

```
get-amazing-temperature -c 0 --format "%.2f" 
```

我使用该`format`参数来格式化值，以便脚本的用户可以以聪明、创造性的方式格式化数字。当然，当他们想要使用度数 (U+00B0) 符号的自定义格式时，问题就来了。

我`argparse`在引擎盖下使用。当我尝试这样的事情时：

```
get-amazing-temperature -c 0 --format '%.2f\u00B0' 
```

...打印字符串文字：

```
36\u00B0 
```

如何在命令行参数中允许使用 unicode 文字？我只会在 Linux/Unix 机器上运行这个脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:21:11.233

当您处理包含格式字符串的参数时，您可以使用“unicode-escape”编解码器对其进行解码。这会将 unicode 转义转换为相应的字符：

```
>>> print x
%.2f\u00B0
>>> print x.decode('unicode-escape')
%.2f° 
```

# ruby-on-rails-3.2 - Rails 多态嵌套表单

> ID：13737951
> 
> 赞同：0
> 
> 时间：2012-12-06T06:11:38.960
> 
> 标签：ruby-on-rails-3.2, polymorphic-associations

我正在尝试创建一个相当简单的内容管理系统，其中我的模型具有以下基本设置：

```
Post
  belongs_to :post_type_fields, polymorphic: true
  accepts_nested_attributes_for :post_type_fields

News
  has_many :posts, as: :post_type_fields 
```

（会有其他模型比如文档或者照片有不同的字段但是仍然需要关联一个父Post）

我试图让我的表单工作，以便我可以为 Post 实例创建一个表单，然后动态呈现 News 对象的字段，然后在 Post Controller 中一起处理 Post 和 News 的创建。

这可能吗？我不知道是否是，或者我是否需要为 News 对象创建一个表单并为 Post 设置接受字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:08:44.450

我不是 100% 确定我是否理解正确，但如果我理解了，[https://github.com/marcelsalathe/poly_demo](https://github.com/marcelsalathe/poly_demo)可能会有所帮助

# asp.net - System.Data.RowNotInTableException

> ID：13737953
> 
> 赞同：1
> 
> 时间：2012-12-06T06:12:04.327
> 
> 标签：asp.net

当我从保存在 insDelRowInfoList 的数据集中删除特定行后尝试从键值对 insDelRowInfoList 访问 KEY 时，我正面临 System.Data.RowNotInTableException。

```
 List<KeyValuePair<DataRow, String>> insDelRowInfoList = new List<KeyValuePair<DataRow, String>>();

 insDelRowInfoList.Add(new KeyValuePair<DataRow, string>(newDataSet.Tables[1].Rows[rowCount],"has been inserted"));

 foreach (KeyValuePair<DataRow, string> dataRow in insDelRowInfoList)
                        newDataSet.Tables[1].Rows.Remove(dataRow.Key); 
```

请帮助如何解决这个问题。

# java - android列表视图和数组适配器空指针异常

> ID：13737959
> 
> 赞同：-1
> 
> 时间：2012-12-06T06:12:31.640
> 
> 标签：java, android, listview, nullpointerexception

我正在从`SQlite`db 获取数据并将其存储在 a 中`array list`并在列表视图中填充数据，但是我正在进入`null pointer exception`并且`logcat`应用程序强制关闭，我不明白错误是什么，请有人指导我在哪里出错。

这是我的活动类代码：

```
package testing.testapp;

import java.util.List;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class Administrator extends Activity {

    List<User> usersList;
    SimpleCursorAdapter cursorAdapter;
    List<User> userList;
    TextView fullName;
    TextView cellNumber;
    ListView list;
    AdministratorAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.administrator);

        list=(ListView)findViewById(R.id.fullname);

        DatabaseHandler h = new DatabaseHandler(this);
        usersList = h.getAllUsers();

        adapter = new AdministratorAdapter(this, R.layout.row, userList);
        list.setAdapter(adapter);

    }

    public class AdministratorAdapter extends ArrayAdapter<User>
    {
        Context context;
        Administrator holder;
        int layoutResourceId;
        List<User> userList;

        public AdministratorAdapter(Context context, int layoutResourceId,List<User> userList)
        {
            super(context, layoutResourceId, userList);         
            this.context=context;
            this.layoutResourceId=layoutResourceId;
            this.userList=userList;
        }

        @Override
        public View getView(int position,View convertView,ViewGroup parent)
        {
            View row=convertView;

            if(row==null)
            {
                LayoutInflater inflater=((Activity)context).getLayoutInflater();
                row=inflater.inflate(layoutResourceId, parent,false);

                holder=new Administrator();
                holder.fullName=(TextView)row.findViewById(R.id.fulname);
                holder.cellNumber=(TextView)row.findViewById(R.id.mobile);

                row.setTag(holder);
            }
            else
            {
                holder=(Administrator)row.getTag();
            }
            holder.fullName.setText(userList.get(position).getUserName());
            holder.cellNumber.setText(userList.get(position).getPassword());    
            return row;
        } 
```

这是我的数据库处理类：

```
package testing.testapp;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHandler extends SQLiteOpenHelper {

    public static final int DATABASE_VERSION = 4;

    public static final String DATABASE_NAME = "usersManager";

    public static final String TABLE_USERS = "users";

    public static final String KEY_USER_ID = "_id";

    public static final String KEY_USERNAME = "username";

    public static final String KEY_PASSWORD = "password";

    public static final String KEY_ROLE = "role";

    public static final String KEY_GPA = "gpa";

    public static final String KEY_FIRST_NAME = "firstname";

    public static final String KEY_LAST_NAME = "lastname";

    public static final String KEY_GENDER = "gender";

    public static final String KEY_CELL_NUMBER = "cellnumber";

    public DatabaseHandler(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_USERS);
        String CREATE_USERS_TABLE = "CREATE TABLE " + TABLE_USERS + "("
               + KEY_USER_ID + " INTEGER PRIMARY KEY," + KEY_USERNAME + " TEXT,"
               + KEY_PASSWORD +" TEXT," + KEY_ROLE + " TEXT," + KEY_GPA + " TEXT,"
               + KEY_FIRST_NAME + " TEXT," + KEY_LAST_NAME + " TEXT," 
               + KEY_GENDER + " TEXT," + KEY_CELL_NUMBER + " TEXT" + ")";

//       String CREATE_USERS_TABLE = "create table users ("
//          + "_id integer  primary key autoincrement, "
//          + "username  string  not null, "
//          + "password string  not null, "
//          + ");";

        db.execSQL(CREATE_USERS_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_USERS);

        onCreate(db);

    }

    public void addUser(User user)
    {
        SQLiteDatabase db = this.getWritableDatabase();
        int f =db.getVersion();

        Log.d("version", Integer.toString(f));
        ContentValues values = new ContentValues();
        values.put(KEY_USERNAME,user.getUserName());
        values.put(KEY_PASSWORD, user.getPassword());
        values.put(KEY_ROLE, user.getRole());

        db.insert(TABLE_USERS, null, values);
        db.close();

    }

    public int Login(String username,String password,String role)
    {
        try
        {
            SQLiteDatabase db = this.getWritableDatabase();
            int i = 0;
            Cursor c = null;
            String query = "SELECT * FROM " + TABLE_USERS + " WHERE " + KEY_USERNAME+ "='" + username +"'" + " AND " +KEY_PASSWORD+ "='"+password+"'" + " AND " +KEY_ROLE+ "='"+role+"'" ; 
            //String query = "SELECT * FROM users WHERE username = '"+username+"' AND password = '"+password+"'";
            //String query = "SELECT * FROM USERS";
            c = db.rawQuery(query, null);
            c.moveToFirst();
            i = c.getCount(); 
            c.close(); 
            db.close();
            return i;
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        return 0;
    }

    public void AddInfo(User user)
    {
        SQLiteDatabase db = this.getWritableDatabase();
        int f =db.getVersion();

        Log.d("version", Integer.toString(f));
        ContentValues values = new ContentValues();
        values.put(KEY_FIRST_NAME,user.getFirstName());
        values.put(KEY_LAST_NAME, user.getLastName());
        values.put(KEY_GENDER, user.getGender());
        values.put(KEY_GPA,user.getGpa());
        values.put(KEY_CELL_NUMBER, user.getCellNumber());

        db.insert(TABLE_USERS, null, values);
        db.close();
    }

    public List<User> getAllUsers()
    {
        List<User> usersList = new ArrayList<User>();

        String query = "SELECT * FROM " + TABLE_USERS ;
        //+ " WHERE " + KEY_ROLE+ "=Student"

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(query, null);
        //return cursor;
        if(cursor.moveToFirst())
        {
            do
            {
            User user = new User();
            user.setUserId(Integer.parseInt(cursor.getString(0)));
            user.setUserName(cursor.getString(1));
            user.setPassword(cursor.getString(2));
            user.setRole(cursor.getString(3));
            user.setGpa(cursor.getString(4));
            user.setFirstName(cursor.getString(5));
            user.setLastName(cursor.getString(6));
            user.setGender(cursor.getString(7));
            user.setCellNumber(cursor.getString(8));

            usersList.add(user);
            }while(cursor.moveToNext());

        }
        db.close();
        return usersList;

    }

    public User getUserDetail(String username)
    {
        SQLiteDatabase db = this.getWritableDatabase();

        //String query = "SELECT " + KEY_USERNAME+" , " + KEY_PASSWORD + " FROM " + TABLE_USERS + " WHERE " + KEY_USERNAME + " = '" + username + "' ";
        String query = "SELECT * FROM " + TABLE_USERS;
        Cursor cursor = db.rawQuery(query, null);

        User user = new User();

        if(cursor!=null)
        {
            user.setUserId(Integer.parseInt(cursor.getString(0)));
            user.setUserName(cursor.getString(1));
            user.setPassword(cursor.getString(2));
        }

        return user;

    }

}

    }

} 
```

这是我的日志：

```
12-06 11:05:47.651: E/AndroidRuntime(634): FATAL EXCEPTION: main
12-06 11:05:47.651: E/AndroidRuntime(634): java.lang.RuntimeException: Unable to start activity ComponentInfo{testing.testapp/testing.testapp.Administrator}: java.lang.NullPointerException
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.os.Looper.loop(Looper.java:123)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-06 11:05:47.651: E/AndroidRuntime(634):  at java.lang.reflect.Method.invokeNative(Native Method)
12-06 11:05:47.651: E/AndroidRuntime(634):  at java.lang.reflect.Method.invoke(Method.java:507)
12-06 11:05:47.651: E/AndroidRuntime(634):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-06 11:05:47.651: E/AndroidRuntime(634):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-06 11:05:47.651: E/AndroidRuntime(634):  at dalvik.system.NativeStart.main(Native Method)
12-06 11:05:47.651: E/AndroidRuntime(634): Caused by: java.lang.NullPointerException
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:291)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.widget.ListView.setAdapter(ListView.java:454)
12-06 11:05:47.651: E/AndroidRuntime(634):  at testing.testapp.Administrator.onCreate(Administrator.java:37)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-06 11:05:47.651: E/AndroidRuntime(634):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-06 11:05:47.651: E/AndroidRuntime(634):  ... 11 more
12-06 11:10:47.981: I/Process(634): Sending signal. PID: 634 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:36:15.737

您在 Administrator.java 的第 37 行获得 NPE，即：

```
list.setAdapter(adapter); 
```

你在布局中有一个名为**fullname的 listView**`R.layout.administrator`

还要检查**usersList = h.getAllUsers();** 结果。

```
Log.d("size = ", usersList.size); 
```

# c++ - 如何返回 .dat 文件中的项目索引？

> ID：13737964
> 
> 赞同：0
> 
> 时间：2012-12-06T06:12:56.190
> 
> 标签：c++, fstream

如何返回`.dat`文件中项目的位置？

在`search()`函数中，我试图在`fractions.dat`文件中找到一个项目并将其返回给用户。然而，该函数总是返回 -2（被返回的变量最初被初始化的值）。

该`if`语句执行，但似乎`file.read(...)`没有设置`cur`任何内容。

```
#include <iostream>
#include <fstream>

using namespace std;

struct Fraction
{
    int num, den;
};

int search(fstream& file, Fraction* f);
int menu();
void proccessChoice(int i);
Fraction* readFrac();

Fraction* fracs[100];
int index;
string fileName = "fractions.dat";
fstream file(fileName,  ios::in | ios::out | ios::binary);

int main()
{
    if (!file)
    {
        cout << "Error opening file. Program aborting.\n";
        system("pause");
        exit(1);
    }
    int choice;
    do
    {
        choice = menu();
        proccessChoice(choice);
    } while(choice != 3);

    system("pause");
    return 0;
}

int menu()
{
    int c;
    cout << "1.Enter new fraction" << endl;
    cout << "2.Find fraction location" << endl;
    cout << "3.Quit" << endl;
    cin >> c;
    return c;
}

void proccessChoice(int i)
{
    switch(i)
    {
    case 1:
        {
            cout << "Please enter a fraction to be stored: ";
            fracs[index] = readFrac();
            file.write(reinterpret_cast<char*>(fracs[index]), sizeof(Fraction));
            /*cout << fracs[index]->num << "/" << fracs[index]->den ;*/
            index++;
        }
            break;
    case 2:
        {
            cout << "Please enter a fraction to find: ";
            Fraction* fToFind = readFrac();
            int i = search(file, fToFind);
            cout << "The fraction is at position: "<< i << endl;
        }
            break;
    }
}
int search(fstream& file, Fraction* f)
{
    Fraction* cur = new Fraction();
    int pos = -2;
    if (!file)
    {
        cout << "Error opening file. Program aborting.\n";
        system("pause");
        exit(1);
    }
    while(!file.eof())
    {
        file.read(reinterpret_cast<char *>(cur), sizeof(Fraction));
        if((cur->num == f->num) && (cur->den == f->den))
        {
            cout << "\nFrac found!" << cur->num << "/" << cur->num<<endl;
            pos = file.tellg();
            return pos;
        }
    }
    return pos;
}

Fraction* readFrac()
{
    Fraction* f = new Fraction();
    char slash;
    cin >> f->num >> slash >> f->den;
    return f;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:58:35.557

您不是从文件的开头开始搜索。你需要：

```
file.seekg( 0, std::ios::beg ); 
```

同样，我认为您在写入文件时没有附加到末尾。

```
file.seekp( 0, std::ios::end ); 
```

# iphone - 如何从左侧加载视图？

> ID：13737969
> 
> 赞同：7
> 
> 时间：2012-12-06T06:13:42.460
> 
> 标签：iphone, ios5, uiviewcontroller, uiviewanimation

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

此功能从右侧加载视图。如何从左侧加载视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T06:26:45.710

这里是

```
CATransition *animation = [CATransition animation];
[[self navigationController] pushViewController:elementController animated:NO];
[animation setDuration:0.45];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromLeft];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionDefault]];
[[elementController.view layer] addAnimation:animation forKey:@"SwitchToView1"]; 
```

为此，您必须`#import <QuartzCore/QuartzCore.h>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T06:22:55.233

不要认为有现成的方法可以做到这一点。您必须自己使用`animateWithDuration:delay:options:animations:completion:`or `animateWithDuration:animations:completion:`（或任何其他动画方法）为视图设置动画，并相应地更改视图的帧，以便它从右侧进行动画处理。希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T06:16:40.833

如果你已经被推送到 viewController 你可以使用这个：

```
[self.navigationController popViewControllerAnimated:YES] 
```

# java - 制作一个正则表达式以查找包含软件名称及其版本号的字符串

> ID：13737982
> 
> 赞同：0
> 
> 时间：2012-12-06T06:14:55.957
> 
> 标签：java, regex, string

我有一个文本文件，其中包含有关各种软件组件的一些描述。现在提到了许多软件组件及其版本，例如说我的文件中有一个字符串

```
"Stack Careers 2.0 is the new number 1 site with symbol ! and * and blablabla   
 replacing older Stack Careers." 
```

它也有一些符号和数字。

我已经用 A-Za-z 以外的任何字符分割了字符串，下面是它的代码。

```
getMySoftwareDescription().split("[^a-zA-Z]"); 
```

这给了我所有的单词（我实际上想要所有的单词，而不是除了软件版本号之外的任何符号或数字），比如

`Stack,Careers,is,the`，ETC。在一个数组里面。

但我想将字符串`Stack Careers 2.0`作为单个字符串获取`Stack Careers`

（连同其他词，如`is`, `the`as it is ）来自上面的示例。

我想提一下我不擅长正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:56:28.097

你可以从这个开始

```
 Pattern p = Pattern.compile("(\\p{Lu}[\\p{L} ]+)(\\d+[\\.]?\\d+)*|[\\S&&[^.]]+");
    Matcher m = p.matcher("Stack Careers 2.0 is the new number 1 site with symbol ! and \n* and blablabla\n replacing older Stack Careers.");
    List<String> list = new ArrayList<String>(); 
    while (m.find()) {
        list.add(m.group());
    }
    System.out.println(list); 
```

输出

```
[Stack Careers 2.0, is, the, new, number, 1, site, with, symbol, !, and, *, and, blablabla, replacing, older, Stack Careers] 
```

虽然应该改进它以识别所有可能的选项。

# objective-c - 是否可以使用 Scripting Bridge 打开应用程序，但将其移至后台？

> ID：13737984
> 
> 赞同：3
> 
> 时间：2012-12-06T06:15:03.730
> 
> 标签：objective-c, xcode, scripting-bridge

我正在尝试打开应用程序 Spotify，并将其移至后台。我可以轻松地打开 Spotify

```
SpotifyApplication *Spotify = [SBApplication applicationWithBundleIdentifier:@"com.spotify.client"];
[Spotify activate]; 
```

但是 Spotify 走到了前台，遮住了我的窗户。有了 iTunes，我可以使用

```
iTunesApplication *iTunes = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"];
[iTunes run]; 
```

但是，它是 iTunes 特定的方法。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:54:17.990

你愿意用`NSAppleScript`它来做吗？

```
NSAppleScript *script = [[NSAppleScript alloc]
    initWithSource:@"tell app \"Spotify\" to launch"];
NSDictionary *errorInfo;
[script executeAndReturnError:&errorInfo];
if (errorInfo) {
    NSLog(@"error: %@", errorInfo);
} 
```

您必须使用应用程序名称，而不是其捆绑 ID。

# c# - 如何判断鼠标左键是否按下？

> ID：13737986
> 
> 赞同：0
> 
> 时间：2012-12-06T06:15:10.777
> 
> 标签：c#, dll

在winform中，鼠标按下时窗体会跟随鼠标，但有时机器特别慢时，即使鼠标不在，窗体也会跟随鼠标，所以我使用win32 dll来判断鼠标的状态

```
 [DllImport("user32.dll")]
    static extern short GetAsyncKeyState(int nVirtKey);
    public static bool GetCurrentLeftMouseIsDowning()
    {
        if (GetAsyncKeyState(0x01) == 0)
            return false;
        else
            return true;
    } 
```

但是窗体一直拖动时内存会增加，还有什么方法可以判断鼠标的状态？或者窗体被拖动时如何控制内存？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:43:31.780

考虑到您使用的是 winform，您可以为此使用 form1_mousedown 事件

参考[这个](http://www.homeandlearn.co.uk/csharp/csharp_s9p2.html)

# python - 按日期字符串索引时间序列

> ID：13737992
> 
> 赞同：3
> 
> 时间：2012-12-06T06:15:34.890
> 
> 标签：python, pandas, time-series

给定一个`s`带有日期时间索引的时间序列，我希望能够按日期字符串对时间序列进行索引。我是否误解了这应该如何工作？

```
import pandas as pd
url = 'http://ichart.finance.yahoo.com/table.csvs=SPY&d=12&e=4&f=2012&g=d&a=01&b=01&c=2001&ignore=.csv'  
df = pd.read_csv(url, index_col='Date', parse_dates=True)  
s = df['Close']
s['2012-12-04'] 
```

结果：

```
TimeSeriesError                           Traceback (most recent call last)
<ipython-input-244-e2ccd4ecce94> in <module>()
      2 df = pd.read_csv(url, index_col='Date', parse_dates=True)  
      3 s = df['Close']  
----> 4 s['2012-12-04']

    G:\Python27-32\lib\site-packages\pandas\core\series.pyc in __getitem__(self, key)
    468     def __getitem__(self, key):
    469         try:
--> 470             return self.index.get_value(self, key)
    471         except InvalidIndexError:
    472             pass

    G:\Python27-32\lib\site-packages\pandas\tseries\index.pyc in get_value(self, series, key)  

   1030 
   1031             try:
-> 1032                 loc = self._get_string_slice(key)
   1033                 return series[loc]
   1034             except (TypeError, ValueError, KeyError):

G:\Python27-32\lib\site-packages\pandas\tseries\index.pyc in _get_string_slice(self, key)
   1077         asdt, parsed, reso = parse_time_string(key, freq)
   1078         key = asdt
-> 1079         loc = self._partial_date_slice(reso, parsed)
   1080         return loc
   1081 

G:\Python27-32\lib\site-packages\pandas\tseries\index.pyc in _partial_date_slice(self, reso, parsed)
    992     def _partial_date_slice(self, reso, parsed):
    993         if not self.is_monotonic:
--> 994             raise TimeSeriesError('Partial indexing only valid for ordered '
    995                                   'time series.')
    996 

TimeSeriesError: Partial indexing only valid for ordered time series. 
```

更具体地说（也许是迂腐的..），这里的 2 个 Timeseries 有什么区别：

```
import pandas as pd
url = 'http://ichart.finance.yahoo.com/table.csv?        s=SPY&d=12&e=4&f=2012&g=d&a=01&b=01&c=2001&ignore=.csv'
s = pd.read_csv(url, index_col='Date', parse_dates=True)['Close']
rng = date_range(start='2011-01-01', end='2011-12-31')
ts = Series(randn(len(rng)), index=rng)
print ts.__class__
print ts.index[0].__class__
print s1.__class__
print s1.index[0].__class__
print ts[ts.index[0]]
print s[s.index[0]]
print ts['2011-01-01']
try:
    print s['2012-12-05']
except:
    print "doesn't work" 
```

结果：

```
<class 'pandas.core.series.TimeSeries'>
<class 'pandas.lib.Timestamp'>
<class 'pandas.core.series.TimeSeries'>
<class 'pandas.lib.Timestamp'>
-0.608673793503
141.5
-0.608673793503
doesn't work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:57:31.620

尝试使用`Timestamp`对象进行索引：

```
>>> import pandas as pd
>>> from pandas.lib import Timestamp
>>> url = 'http://ichart.finance.yahoo.com/table.csv?s=SPY&d=12&e=4&f=2012&g=d&a=01&b=01&c=2001&ignore=.csv'
>>> df = pd.read_csv(url, index_col='Date', parse_dates=True)
>>> s = df['Close']
>>> s[Timestamp('2012-12-04')]
141.25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:11:05.367

当时间序列**未排序**并且您提供部分时间戳（例如日期，而不是日期时间）时，不清楚应该选择哪个日期时间。

不能假设每个日期只有一个 datetime 对象，虽然在这个例子中有，这里有几个选项，但在这里抛出错误似乎更安全，而不是猜测用户的动机。（我们可以返回一个类似于 的系列/列表`.ix['2011-01']`，但是如果在其他情况下返回一个数字，这可能会令人困惑。我们可以尝试返回一个“最接近的匹配”......但这也没有任何意义。）

**在有序的情况下，它更容易，我们选择具有所选日期的第一个日期时间。**

您可以在这个简单的示例中看到这种行为：

```
import pandas as pd
from numpy.random import randn
from random import shuffle
rng = pd.date_range(start='2011-01-01', end='2011-12-31')
rng2 = list(rng)
shuffle(rng2) # not in order
rng3 = list(rng)
del rng3[20] # in order, but no freq

ts = pd.Series(randn(len(rng)), index=rng)
ts2 = pd.Series(randn(len(rng)), index=rng2)
ts3 = pd.Series(randn(len(rng)-1), index=rng3)

ts.index
<class 'pandas.tseries.index.DatetimeIndex'>
[2011-01-01 00:00:00, ..., 2011-12-31 00:00:00]
Length: 365, Freq: D, Timezone: None

ts['2011-01-01']
# -1.1454418070543406

ts2.index
<class 'pandas.tseries.index.DatetimeIndex'>
[2011-04-16 00:00:00, ..., 2011-03-10 00:00:00]
Length: 365, Freq: None, Timezone: None

ts2['2011-01-01']
#...error which you describe
TimeSeriesError: Partial indexing only valid for ordered time series

ts3.index
<class 'pandas.tseries.index.DatetimeIndex'>
[2011-01-01 00:00:00, ..., 2011-12-31 00:00:00]
Length: 364, Freq: None, Timezone: None

ts3['2011-01-01']
1.7631554507355987

rng4 = pd.date_range(start='2011-01-01', end='2011-01-31', freq='H')
ts4 = pd.Series(randn(len(rng4)), index=rng4)

ts4['2011-01-01'] == ts4[0]
# True # it picks the first element with that date 
```

*我不认为这是一个错误，但我将它作为[一个问题发布在 github 上](https://github.com/pydata/pandas/issues/2437)。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T04:13:00.333

虽然 pandas 教程很有启发性，但我认为提出的原始问题值得直接回答。我在将 Yahoo 图表信息转换为可以切片的 DataFrame 时遇到了同样的问题，等等。我发现唯一需要的是：

```
import pandas as pd
import datetime as dt

def dt_parser(date): 
return dt.datetime.strptime(date, '%Y-%m-%d') + dt.timedelta(hours=16)

url = 'http://ichart.finance.yahoo.com/table.csvs=SPY&d=12&e=4&f=2012&g=d&a=01&b=01&c=2001&ignore=.csv'  
df = pd.read_csv(url, index_col=0, parse_dates=True, date_parser=dt_parser)
df.sort_index(inplace=True)
s = df['Close']
s['2012-12-04']     # now should work 
```

“诀窍”是包含我自己的 date_parser。我猜在 read_csv 中有一些更好的方法可以做到这一点，但这至少产生了一个被索引并且可以被切片的 DataFrame。

# c# - 在 Windows 7 中启动和终止进程的问题

> ID：13737993
> 
> 赞同：0
> 
> 时间：2012-12-06T06:15:37.287
> 
> 标签：c#, .net

我正在尝试从 ac# 代码将浏览器实例作为进程启动。然后我想杀死浏览器的同一个实例。我尝试使用 process id 找到相同的实例。但是任务管理器中的进程ID和我启动进程时得到的初始ID不同。有什么解决办法？为什么会这样？开发环境是windows 7。

```
 int ID= 0;
  void Start()
    {
        ProcessStartInfo startInfo = new ProcessStartInfo("iexplore.exe");
        startInfo.Arguments = "http://www.google.com";
        Process ieProcess = Process.Start(startInfo);
        ID= ieProcess.Id;
    }
  void Stop()
   {
    foreach (Process p in System.Diagnostics.Process.GetProcessesByName("iexplore"))
     {
       if ((p.Id == ID))
        {
                p.Kill();
        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:27:42.663

如果 IE 已启动，则此代码将不起作用。关闭所有 IE 浏览器，然后尝试运行代码。如果它有效，那么您可能需要寻找以下链接中建议的解决方案

类似的 post
[-Process.kill() 在 Windows 7 32 位中被拒绝，即使具有管理员权限](https://stackoverflow.com/questions/3486996/process-kill-denied-in-windows-7-32bits-even-with-administrator-privileges)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:33:56.020

我有一个类似的问题，只是我不想杀死我启动的 IE 进程，我想让它成为焦点。我有一个启动 5 个 IE 窗口的应用程序。（不是选项卡，而是唯一的窗口）我存储了启动每个 IE 窗口的 PID。在特定时间，我希望能够：

*   选择一个PID，
*   找到与该 PID 相关的 IE 窗口
*   使其成为焦点（最小化其他）

这使用 XP 和 IE6（环境需要）现在当我使用 Win 7 和 IE 8 时，找不到我存储的 PID，因此我不再能够更改焦点窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:37:39.197

为什么不将代码添加到问题中？对于有兴趣帮助您的人来说，这将使生活变得轻松。如果你得到不同的 PID，很可能你的代码有问题！（我只是在猜测，没有看到您尝试过的内容。）

看看这些问题。
**1)** [获取由 Process.start() 启动的进程的 PID](https://stackoverflow.com/questions/12892268/getting-pid-of-process-started-by-process-start)
**2)** [在 C# 中以编程方式杀死 vista/windows 7 中的进程](https://stackoverflow.com/questions/544687/programmatically-kill-a-process-in-vista-windows-7-in-c-sharp)
**3)** [Process.kill() 在 Windows 7 32 位中被拒绝，即使具有管理员权限](https://stackoverflow.com/questions/3486996/process-kill-denied-in-windows-7-32bits-even-with-administrator-privileges)

* * *

* * *

添加代码可以更容易地理解问题所在，这就是您的问题。

IE 会为程序的一个实例创建多个进程。（[有关它的更多详细信息](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/multiple-iexplore-processes/b6f6d249-d30c-4bd7-9b9b-ae647b665beb)）这就是您获得不同 PID（针对不同进程）的原因。

您的代码所做的只是杀死它的一个进程（通过在方法中使用`if`条件`Stop()`！）。因此，当您再次尝试执行（启动相同的进程）时，剩余的进程可能会产生[InvalidOperationException ！](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx)`Start()`

所以你的代码应该做的是杀死所有的活动`iexplore`进程。这可以通过简单地删除方法的`if`条件来完成`Stop()`。

```
foreach(Process p in Process.GetProcessesByName("iexplore"))
{
   p.Kill();
} 
```

让我知道这是否有效。

# database - PostgreSQL 9.0+ hstore 的大小限制是多少？

> ID：13737995
> 
> 赞同：7
> 
> 时间：2012-12-06T06:15:57.670
> 
> 标签：database, postgresql

作为标题，我一直在寻找一段时间，但无法找到答案。它仅在 8.4 上声明 key 和 value 不能超过 65535，但在 9.0 文档中根本没有提及。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T07:22:11.353

`hstore`是一个 varlena，受`TOAST`ed 字段的最大大小限制，大约 1GB。

我不建议你去任何接近大小的地方。性能会很糟糕。每次更新一行时——包括带有`hstore`字段的行——PostgreSQL 必须写入该行的新副本。不用说，千兆字节的行不会很有趣。

如果您正在读取所有键/值，读取性能会很好，但如果您选择性地仅读取几个键/值，则读取性能会很差，因为在访问之前`hstore`必须这样做。`TOAST`

在不了解您的设计和用例的情况下，很难给出更具体的建议；这个问题的*原因*。