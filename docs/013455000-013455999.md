# StackOverflow 问答 13455000-13455999

# clojure - 惰性序列的实现时序

> ID：13455008
> 
> 赞同：5
> 
> 时间：2012-11-19T13:40:34.477
> 
> 标签：clojure, lazy-sequences

```
(defn square [x]
  (do
    (println (str "Processing: " x))
    (* x x)))

(println (map square '(1 2 3 4 5))) 
```

为什么是输出

```
(Processing: 1 
Processing: 2 
1 Processing: 3 
4 Processing: 4 
9 Processing: 5 
16 25) 
```

不是

```
(Processing: 1
1 Processing: 2
4 Processing: 3 
9 Processing: 4 
16 Processing: 5 
25) 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:45:30.817

因为`map`很懒。它`lazy-seq`在幕后使用，[预先缓存`rest`](http://clojure.org/lazy). `println`因此，当您的代码获取`map`序列的第一个值时，您会看到两条语句出现。

另请参阅此博客文章：[惰性序列](http://www.maybetechnology.com/2011/07/lazy-sequences.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:45:59.163

`println`[在其实现](https://github.com/clojure/clojure/blob/92b4fc76e59e68d3bdae4ebd5b8deec915cb7ab5/src/clj/clojure/core_print.clj#L40-L62)中使用`[[x & xs] xs]`解构形式。这等效于并且[不那么懒惰](https://stackoverflow.com/questions/4288476/clojure-rest-vs-next)，因此它在打印第一项之前实现了这两项。`[x (first xs), xs (next xs)]`[`next``rest`](https://stackoverflow.com/questions/4288476/clojure-rest-vs-next)

例如，

```
=> (defn fn1 [[x & xs]] nil)
#'user/fn1
=> (fn1 (map square '(1 2 3 4 5)))
Processing: 1
Processing: 2
nil 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:52:54.083

你和我一样用代码片段来学习吗？这里有一些。

让我们看一下`map`.

```
user=> (doc map)
-------------------------
clojure.core/map
([f coll] [f c1 c2] [f c1 c2 c3] [f c1 c2 c3 & colls])
  Returns a lazy sequence consisting of the result of applying f to the
  set of first items of each coll, followed by applying f to the set
  of second items in each coll, until any one of the colls is
  exhausted.  Any remaining items in other colls are ignored. Function
  f should accept number-of-colls arguments.
nil 
```

`map`返回一个惰性序列（您应该已经阅读了@noahz 给出的引用）。要完全实现惰性序列（这通常不是一个好习惯，因为惰性序列可能是无限的，因此永远不会结束），您可以使用`dorun`or `doall`。

```
user=> (doc dorun)
-------------------------
clojure.core/dorun
([coll] [n coll])
  When lazy sequences are produced via functions that have side
  effects, any effects other than those needed to produce the first
  element in the seq do not occur until the seq is consumed. dorun can
  be used to force any effects. Walks through the successive nexts of
  the seq, does not retain the head and returns nil.
nil
user=> (doc doall)
-------------------------
clojure.core/doall
([coll] [n coll])
  When lazy sequences are produced via functions that have side
  effects, any effects other than those needed to produce the first
  element in the seq do not occur until the seq is consumed. doall can
  be used to force any effects. Walks through the successive nexts of
  the seq, retains the head and returns it, thus causing the entire
  seq to reside in memory at one time.
nil 
```

尽管它们看起来相似，但它们并不相似——请注意它们对待已实现序列的头部的方式不同。

有了这些知识，您可以影响 map 惰性序列的行为方式`doall`。

```
user=> (defn square [x]
  #_=>   (println (str "Processing: " x))
  #_=>   (* x x))
#'user/square
user=> (doall (map square '(1 2 3 4 5)))
Processing: 1
Processing: 2
Processing: 3
Processing: 4
Processing: 5
(1 4 9 16 25) 
```

正如您可能已经注意到的那样，我还更改了`square`函数的定义，因为您不需要`do`在函数内部（它隐含在`defn`宏中）。

在[Clojure Programming](http://www.clojurebook.com/) book 中，您可能会喜欢以下语句`'(1 2 3 4 5)`：

> “大多数人只是在这种情况下使用向量文字，其中成员表达式将始终被评估。”

与其复制相关部分来支持这一说法，我更愿意推荐这本书，因为它值得花时间和金钱。

# java - 实现 Java 接口和方法

> ID：13455009
> 
> 赞同：-1
> 
> 时间：2012-11-19T13:40:37.320
> 
> 标签：java, interface

我正在学习 Java 接口和方法编写。我想知道您将如何创建一个使用此接口的类？还有什么是实现它包含的方法的最佳方法？目前，我正在尝试学习不同的写作方法。在此先感谢您的帮助 ：）

```
interface Dealer {

    void assignPlayers(ArrayList<Player> p);

    ...

    public void settleBets();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:43:16.263

这很简单：

```
public class BakratDealer implements Dealer {
    // implement all the methods here
} 
```

这不是*最好*的方法。这是*唯一*的方法。您必须要么实现接口中的所有方法，要么声明类`abstract`。

界面不需要使用`public`关键字；默认情况下，接口中的所有方法都是公共的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:43:36.110

在类声明中使用`implements`关键字来实现接口

```
public class YourClass implements Dealer {

 //implement all your method defined in the interface here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T20:27:37.237

除了使用“实现”一词而不是“扩展”之外，您可以以与继承另一个类相同的方式实现该类。

示例 - 公共类 TestClass 实现 Dealer { }

在使用实现的类中，您编写方法就像编写任何其他方法一样。您只需要确保实现接口中的所有方法，否则该类必须是抽象类。

# mysql - 无法使用 South 将我的数据同步到数据库

> ID：13455010
> 
> 赞同：-1
> 
> 时间：2012-11-19T13:40:37.673
> 
> 标签：mysql, django, django-south

> 每次我'python manage.py migrate myapp'时，都会发生错误，它说该表已经存在......有什么帮助吗？请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:45:55.450

也许使用 python 'manage.py migrate myapp --fake' 进行最后一次迁移之前的所有迁移

# javascript - 谷歌地图 api 3 在缩放级别事件时更改自定义图标大小

> ID：13455012
> 
> 赞同：1
> 
> 时间：2012-11-19T13:40:44.933
> 
> 标签：javascript, jquery, google-maps-api-3

我正在努力将图标缩放级别更改功能应用于我的谷歌地图 api 脚本。

我当前的图标大小是 48px，实际图形也是 48px。

[jsfiddle.net/motocomdigital/hQkb3/6](http://jsfiddle.net/motocomdigital/hQkb3/6)

就这样下定了...

```
var image = new google.maps.MarkerImage(
  '<?php bloginfo('template_url'); ?>/images/marker-images/image-48px.png',
  new google.maps.Size(48,48),
  new google.maps.Point(0,0),
  new google.maps.Point(24,48)
); 
```

我不认为可以根据 3 个缩放级别更改这些尺寸和图形吗？

例如，当变焦在...

**缩放级别 0 > 6 - 使用...**

```
 '<?php bloginfo('template_url'); ?>/images/marker-images/image-12px.png',
  new google.maps.Size(12,12),
  new google.maps.Point(0,0),
  new google.maps.Point(6,6) 
```

**缩放级别 6 > 8 - 使用...**

```
 '<?php bloginfo('template_url'); ?>/images/marker-images/image-24px.png',
  new google.maps.Size(24,24),
  new google.maps.Point(0,0),
  new google.maps.Point(12,12) 
```

**缩放级别 8+ - 使用...**

```
 '<?php bloginfo('template_url'); ?>/images/marker-images/image-48px.png',
  new google.maps.Size(48,48),
  new google.maps.Point(0,0),
  new google.maps.Point(24,24) 
```

这是我下面的原始脚本...

```
jQuery(function($){

    var image = new google.maps.MarkerImage(
      '<?php bloginfo('template_url'); ?>/images/marker-images/image.png',
      new google.maps.Size(48,48),
      new google.maps.Point(0,0),
      new google.maps.Point(24,24)
    );

    $('#map_div').gmap3({
        action:'init',
        options: {
            center:[<?php echo $lt;?>,<?php echo $lo;?>],
            zoom: 7,
            scrollwheel: false
        }
    },
    {
        action: 'addMarkers',
        markers: [ <?php echo $lat_long;?> ],
        marker: {
            options: {
                draggable: false,
                icon: image             
            },
            events:{
            mouseover: function(marker, event, data){
                var map = $(this).gmap3('get'),
                    infowindow = $(this).gmap3({ action:'get', name:'infowindow' });
                if (infowindow) {
                    infowindow.open(map, marker);
                    infowindow.setContent(data);
                } else {
                    $(this).gmap3({action:'addinfowindow', anchor:marker, options:{content: data}});
                }
            },
            mouseout: function(){
                var infowindow = $(this).gmap3({ action:'get', name:'infowindow' });
                if (infowindow){
                    infowindow.close();
                }
            }
        }

    }
    });
}); 
```

我真的不擅长这种级别的脚本，任何指针的想法或帮助都会非常感谢。

乔什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:52:47.633

我在您的地图中添加了一个“zoom_changed”事件，该事件会根据缩放级别更改所有标记图标。

```
function UseMarkerIcon(imageObj)
{
  var markers=$("#map_div").gmap3({action:'get',name:'marker',all:true});
  $.each(markers, function(i,marker)
  {
    marker.setIcon(imageObj);
  });  
}

jQuery(function($) {    
    var image12px = new google.maps.MarkerImage('http://motocomdigital.co.uk/assets/marker-images/map-marker-12px.png', new google.maps.Size(12, 12), new google.maps.Point(0, 0), new google.maps.Point(6, 6));    
    var image24px = new google.maps.MarkerImage('http://motocomdigital.co.uk/assets/marker-images/map-marker-24px.png', new google.maps.Size(24, 24), new google.maps.Point(0, 0), new google.maps.Point(12, 12));    
    var image48px = new google.maps.MarkerImage('http://motocomdigital.co.uk/assets/marker-images/map-marker-48px.png', new google.maps.Size(48, 48), new google.maps.Point(0, 0), new google.maps.Point(24, 24));

    $('#map_div').gmap3({
        action: 'init',
        options: {
            center: [50.799019, -1.132037],
            zoom: 5,
            scrollwheel: false
        },
              events:{
                      zoom_changed: function(map){
                          var zoomLevel = map.getZoom();

                          if (zoomLevel < 6)
                            UseMarkerIcon(image12px);
                          else if (zoomLevel >= 6 && zoomLevel <=8)
                            UseMarkerIcon(image24px);
                          else
                            UseMarkerIcon(image48px);
                      }
              }
    }, {
        action: 'addMarkers',
        markers: [{
            lat: 50.799019,
            lng: -1.132037,
            data: 'Test One'},
        {
            lat: 50.365162,
            lng: -4.712017,
            data: 'Test Two'},
        {
            lat: 54.518726,
            lng: -5.881054,
            data: 'Test Three'},
        {
            lat: 52.780964,
            lng: -1.211863,
            data: 'Test Four'},
        {
            lat: 51.433998,
            lng: -2.549690,
            data: 'Test Five'}],
        marker: {
            options: {
                draggable: false,
                icon: image12px
            },
            events: {
                mouseover: function(marker, event, data) {
                    var map = $(this).gmap3('get'),
                        infowindow = $(this).gmap3({
                            action: 'get',
                            name: 'infowindow'
                        });
                    if (infowindow) {
                        infowindow.open(map, marker);
                        infowindow.setContent(data);
                    } else {
                        $(this).gmap3({
                            action: 'addinfowindow',
                            anchor: marker,
                            options: {
                                content: data
                            }
                        });
                    }
                },
                mouseout: function() {
                    var infowindow = $(this).gmap3({
                        action: 'get',
                        name: 'infowindow'
                    });
                    if (infowindow) {
                        infowindow.close();
                    }
                }

            }

        }
    });
}); 
```

函数 UseMarkerIcon(image) 遍历所有标记并设置传递给它的图像。

# javascript - Dojo - 尝试删除并将项目添加到存储时出错（ItemFileWriteStore 中的断言失败）

> ID：13455015
> 
> 赞同：4
> 
> 时间：2012-11-19T13:40:50.823
> 
> 标签：javascript, dojo, dojo-1.6

我有商店（和显示其内容的网格），用户可以删除和添加项目，但不幸的是，删除后的一个项目无法再次添加。我发现问题是以前在商店中的相同 id。

**我使用 Dojo 1.6。**

在萤火虫控制台我得到：

```
Error: assertion failed in ItemFileWriteStore 
```

这是关于 jsFiddle 的演示：http: [//jsfiddle.net/MBBnE/](http://jsfiddle.net/MBBnE/)

这里的代码：

```
dojo.require("dojo.data.ItemFileWriteStore");

dojo.addOnLoad(function() {

    var d = {
        items: [
            {
            id: 23,
            x: 2},
            ],
        identifier: "id",
    };

    var _store = new dojo.data.ItemFileWriteStore({
        data: d,
    });

    var it = null;

    _store.fetch({
        query: {
            id: "23*"
        },
        onItem: function(i) {
            it = i;
        }
    })

    _store.deleteItem(it);

    console.info(it);

    _store.newItem({id: 23, x: 3});
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T06:28:09.147

希望我没有误解您的问题，但是当您从商店中删除商品时，如果您想重新添加另一个具有相同 ID 的商品，您应该保存商店然后重新添加商品。保存 store 将清除所有脏项目并允许重复使用 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:05:20.673

当您在 Itemfilewritestore 中插入相同的值时，它会给您错误“ItemFileWriteStore 中的断言失败”要克服此问题，请在 ItemFileWriteStore 中插入新的或唯一的值

```
_store.newItem({id: 24, x: 3}); 
```

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:30:11.940

最后我做了一些解决方法——创建新商店并将所有项目复制到其中：

```
 oldStore.fetch({
        onItem: function(it){

            var newItem = {
                id: it.id[0],
                valueX: it.valueX[0],
                (...)
            };

            newStore.newItem(newItem);
        }
    }); 
```

# python - 强制类的方法定义

> ID：13455017
> 
> 赞同：1
> 
> 时间：2012-11-19T13:40:56.280
> 
> 标签：python

我编写了以下代码来帮助强制定义类的某些方法：

```
def createClassTemplate(name, requiredMethods=[], inherits=object):
    def require(name):
        def errorRaiser(self, *args, **kwargs):
            raise RequireException("method '{}' must be defined.".format(name))
        setattr(wrapper, "__name__", name)
        return errorRaiser

    class Custom(inherits): pass

    setattr(Custom, "__name__", name)
    for methodName in requiredMethods:
        setattr(Custom, methodName, require(methodName))

    return Custom 
```

这是这样实现的：

```
Model = createClassTemplate("Model", ["foo", "bar", "baz"])

class MyClass(Model):
    pass 
```

这样，当我缺少一个方法时，调用类将生成一个有意义的错误，表明我未能定义所需的方法。

问题是，上面的代码看起来很笨拙和不符合 Python 标准。我这样做对吗？我什至应该强制使用这样的类模板吗？有没有更好的方法来完成同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:43:16.640

您可以使用[`ABCMeta`](http://docs.python.org/2/library/abc.html#abc.ABCMeta)元类：

```
from abc import ABCMeta, abstractmethod

class MyClass:
    __metaclass__ = ABCMeta

    @abstractmethod
    def foo(self):
        pass 
```

的子类`MyClass`必须重写`foo`才能被实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:43:30.750

您应该改用[元类](http://docs.python.org/2/reference/datamodel.html#customizing-class-creation)。

标准库为这个任务提供了一个现成的元类，[`ABCMeta`元类](http://docs.python.org/2/library/abc.html#abc.ABCMeta)：

```
import abc

class Model(object):
    __metaclass__ = abc.ABCMeta

    @abc.abstractmethod
    def foo(self):
        pass

    @abc.abstractmethod
    def bar(self):
        pass

    @abc.abstractmethod
    def baz(self):
        pass

class MyClass(Model):
    pass 
```

示范：

```
>>> import abc
>>> class Model(object):
...     __metaclass__ = abc.ABCMeta
...     @abc.abstractmethod
...     def foo(self):
...         pass
...     @abc.abstractmethod
...     def bar(self):
...         pass
...     @abc.abstractmethod
...     def baz(self):
...         pass
... 
>>> class MyClass(Model):
...     pass
... 
>>> myclass = MyClass()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Can't instantiate abstract class MyClass with abstract methods bar, baz, foo 
```

一旦`MyClass`确实提供了抽象方法的实现，实例化就会成功：

```
>>> class MyClass(Model):
...     def foo(self): pass
...     def bar(self): pass
...     def baz(self): pass
... 
>>> myclass = MyClass() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:43:50.417

如果您使用的是 Python 2.6+，则有 ABC 的概念 - [http://docs.python.org/2/library/abc.html](http://docs.python.org/2/library/abc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:46:55.053

在我看来，您正在尝试重新发明[抽象基类](http://docs.python.org/2/library/abc.html)

我想你想要这样的东西：

```
import abc

class MyBaseClass:
    __metaclass__ = abc.ABCMeta
    @abc.abstractmethod
    def foo(self):
        pass

    @abc.abstractmethod
    def bar(self):
        pass

    @abc.abstractmethod
    def baz(self):
        pas 
```

# jquery - .each 只在一个领域

> ID：13455019
> 
> 赞同：-1
> 
> 时间：2012-11-19T13:40:57.683
> 
> 标签：jquery, each

我有几个具有相同字段的表单，我需要使用 jQuery 收集一个 set o 字段的值。我正在使用`.each`它，它适用于该字段，`id="q"`但我不知道为什么，对于其他字段，它只获得第一个值。有人可以帮助我吗？

HTML：

```
<form name="art_1" id="art_1">
<input type="text" name="prezzol" id="prezzol">
<input type="text" name="q" id="q" onchange="ricalcola('#art_1')">
<input type="text" name="sconto" id="sconto" onchange="ricalcola('#art_1')">
</form>
<form id="art_2" name="art_2">
<input type="text" id="prezzol" name="prezzol">
<input type="text" name="q" id="q" onchange="ricalcola('#art_2')" >
<input type="text" name="sconto" id="sconto" onchange="ricalcola('#art_2')" >
</form>
<a onclick="totale()">totale</a> 
```

JavaScript：

```
function totale() {
    $('#q').each(function (){
    //works!! 2 value!
    tquantità += parseInt($(this).val())
}) 
$('#sconto').each(function(){
    //doesn't work, only the first value
    tprezzo += $(this).val()
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:49:13.190

如果要选择具有 name 属性的所有元素，可以使用以下代码：

```
function totale() {
    $('input[name=sconto]').each(function (){
      tquantità += parseInt($(this).val(),10);
    }) 
    $('input[name=q]').each(function(){
       tprezzo += parseInt($(this).val(),10);
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:45:59.377

ID 应该是唯一的，所以这就是为什么你只会得到一个值。

尝试使用您的输入名称作为选择器。即：$('input[name=q]')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:46:11.123

您不能`id`在同一个文档上有多个 s .. 将您的 HTML 更改为使用类，然后迭代元素

```
<form name="art_1" id="art_1">
<input type="text" name="prezzol" class="prezzol">
<input type="text" name="q" class="q" onchange="ricalcola('#art_1')">
<input type="text" name="sconto" class="sconto" onchange="ricalcola('#art_1')">
</form>
<form id="art_2" name="art_2">
<input type="text" class="prezzol" name="prezzol">
<input type="text" name="q" class="q" onchange="ricalcola('#art_2')" >
<input type="text" name="sconto" class="sconto" onchange="ricalcola('#art_2')" >
</form>
<a onclick="totale()">totale</a> 
```

然后做

```
function totale() {
    $('.q').each(function (){
      tquantità += parseInt($(this).val(),10);
    }) 
    $('.sconto').each(function(){
       tprezzo += parseInt($(this).val(),10);
    })
}) 
```

并且[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)应该始终包括基数

# c - 我要编译的这个程序中的未知转换类型

> ID：13455020
> 
> 赞同：5
> 
> 时间：2012-11-19T13:41:00.860
> 
> 标签：c, compiler-construction, types, compilation

我不知道我打算编译的这个 C 程序是如何工作的。我在 MacBook 上编译它，所以也许这解释了不寻常的错误？无论如何，编译后的程序似乎无法正常工作。编译后，我得到这些：

```
ers.c：在函数“进化”中：
ers.c:205：警告：未知转换类型字符 0xa 格式
ers.c：在函数“print_rule”中：
ers.c:304：警告：未知转换类型字符 0xa 格式
ers.c：在函数“test_evaluate”中：
ers.c:380：警告：未知转换类型字符 0xa 格式

```

其中指的是这些代码行：

```
 if(i%100==0)printf("best on training set at iteration %d:  %g\%\n", i,100.0* population[bestinpop].acc);

printf("ACCURACY on training set %g\%\n\n", 100.0* r->acc);

printf("TEST ACCURACY %g\%\n", 100.0* r->acc); 
```

我怀疑这与 %g 类型格式有关。

谁能看到做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T14:02:02.467

`0xa`in ASCII 编码是换行符，所以你的`\n`错误确实来自`"%\n"`结构

我假设原始开发人员的意思是“%%”而不是“\%”（显示“%”字符）。但我不相信这个程序曾经在任何平台上编译过。

顺便说一句：%g 是双精度的替代格式字符（输出与 %f 或 %e 相同，取决​​于双精度值）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T13:43:52.843

`"%\n"`不是有效的格式说明符。如果您需要`%`字符成为输出的一部分，您需要使用`"%%"`.

# haskell - 用于分析数据的树形输出库

> ID：13455023
> 
> 赞同：1
> 
> 时间：2012-11-19T13:41:09.747
> 
> 标签：haskell

为了方便分析数据，我想使用一个用于以下代码的库：

```
data SomeType = A [String] Int | B | C Int deriving (Eq, Ord, Show)

main = do 
  let theData = A ["a", "b", "c"] 9 : C 3 : B : []
  putStr $ treeString theData -- `treeString` is the implied library function 
```

将产生类似于以下内容的输出：

```
- A:
| - - a
| | - b
| | - c
| - 9
- C:
| - 3
- B 
```

有这样的图书馆吗？或者也许是解决此类问题的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:59:02.103

[`Data.Tree`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Tree.html)has[`drawTree`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Tree.html#v%3adrawTree)和[`drawForest`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Tree.html#v%3adrawForest)具有类似格式的函数，因此您可以编写一个函数将您的数据结构转换为 a`Tree String`然后使用`drawTree`.

```
import Data.Tree

data SomeType = A [String] Int | B | C Int deriving (Eq, Ord, Show)

toTree :: SomeType -> Tree String
toTree (A xs n) = Node "A" [Node "*" (map (flip Node []) xs), Node (show n) []]
toTree B        = Node "B" []
toTree (C n)    = Node "C" [Node (show n) []]

main = do 
  let theData = A ["a", "b", "c"] 9 : C 3 : B : []
  putStr $ drawTree (Node "*" (map toTree theData)) 
```

**输出：**

```
*
|
+- A
|  |
|  +- *
|  |  |
|  |  +- a
|  |  |
|  |  +- b
|  |  |
|  |  `- c
|  |
|  `- 9
|
+- C
|  |
|  `- 3
|
`- B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:17:15.720

添加到哈马尔的答案。以下是如何进行通用转换为`Data.Tree`：

```
import Data.Tree
import Data.Generics
import Control.Applicative

dataTree = fix . genericTree
  where
    genericTree :: Data a => a -> Tree String
    genericTree = dflt `extQ` string
      where
        string x = Node x []
        dflt a = Node (showConstr (toConstr a)) (gmapQ genericTree a)
    fix (Node name forest)
      | name == "(:)" 
      , a : b : [] <- forest
        = Node "*" $ (fix a) : (subForest $ fix b)
      | otherwise = Node name $ fix <$> forest 
```

但是要让这个在一个人的数据类型上起作用，它们必须有一个 的实例`Data`，这可以通过添加一个`{-# LANGUAGE DeriveDataTypeable #-}`pragma 并使类型派生自如下方式`Typeable`轻松实现`Data`：

```
data SomeType = A [String] Int | B | C Int | D [[String]] 
  deriving (Typeable, Data) 
```

# file - bash - 存储多行文件的变量

> ID：13455026
> 
> 赞同：0
> 
> 时间：2012-11-19T13:41:18.390
> 
> 标签：file, bash

这是我的代码：

```
grep $to_check $forbidden >${dir}variants_of_interest;

cat ${dir}variants_of_interest | (while read line; do 
     #process ${line} and echo result
done;
) 
```

感谢 grep 我得到了几行数据，然后我在循环中单独处理。我想使用变量而不是使用文件**variables_of_interest**。

这样做的原因是我担心写入文件数千次（并因此读取文件）会迅速减慢计算速度，所以我希望避免写入文件会有所帮助。你怎么看？

我必须执行数千个 grep 命令，而**variables_of_interest**最多只包含 10 行。

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:51:42.243

您可以`grep`直接将其输出传递给循环：

```
grep "$to_check" "$forbidden" | while read line; do 
  #process "${line}" and echo result
done 
```

我在您的示例中删除了显式子shell，因为由于管道，它已经在一个单独的子shell中。也不要忘记引用`$line`变量以防止使用时空格扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:50:31.610

您不必编写文件。简单地遍历 grep 的结果：

```
grep $to_check $forbidden | (while read line; do 
     #process ${line} and echo result
done;
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:28:04.253

这可能对您有用：

```
OIFS="$IFS"; IFS=$'\n'; lines=($(grep $to_check $forbidden)); IFS="$OIFS"
for line in "${lines[@]}"; do echo $(process ${line}); done 
```

第一行将结果`grep`放入变量数组`lines`中。

第二行处理`lines`将每一行放入变量的数组`line`

# jquery - 如何获取 jquery 中的父 id 和该父中所有元素的值？

> ID：13455028
> 
> 赞同：0
> 
> 时间：2012-11-19T13:41:23.607
> 
> 标签：jquery

大家好，我有一个看起来像这样的

```
 <div id="Address1" class="span4">
                    <ul class="address-customstyle unstyled">
                     <a href="#"><i onclick="EditAddress(this.id)" id="2" class="icon-edit mrglft largesize">
                                 </i></a><a href="#"><i onclick="DeleteAddress(this.id)" id="Address1" class="icon-remove mrglft largesize">
                                                   </i>
                                             </a>
                                        <li>
                                 <label>
                         <strong>
             <u id="addressname">
                       asdasd
                  </u>
                </strong>: </label>
               <span>
                <p id="hno">asdasd</p>,
                 <p id="streetname">asdasd</p>,
                 <p id="city">asdasd</p>,<p value="1" id="state">Andhra Pradesh</p>
               </span></li></ul></div> 
```

现在当我点击 EditIcon 我有这个的 id

```
 <i onclick="EditAddress(this.id)" id="2" class="icon-edit mrglft largesize"> 
```

现在我想要的是基于此我必须获取父 div 及其子元素的值

喜欢所有“p”元素的值和“u”的值，谁能告诉我我该怎么做

我现在正在做的这件事，但它没有进入循环

```
 function EditAddress(addressid) {
    alert(addressid);       
    alert(addresses);
    $("" + "#" + addressid + "").parent('.span4').find('p').each(function () {
        var $span = $(this);            
        var spanId = $span.attr('id');
        alert(spanId);
        var spanTxt = $span.text()
        alert(spanTxt);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:53:05.440

你必须这样做，它会降低循环级别。

```
var spanElem = $("#" + addressid).closest(".span4");
$("p", spanElem).each(function (){
   var $p = $(this);
   alert($p.attr("id"));
   alert($p.text());
}); 
```

# optimization - 以方程为主要关注对象的软件？

> ID：13455032
> 
> 赞同：0
> 
> 时间：2012-11-19T13:41:30.573
> 
> 标签：optimization, logging, equations

我正在开发一个主要实体是数学方程的程序。方程式只能返回双精度或布尔结果。

问题：

1-很多方程。（每个文件约 300 个）

2-最后必须有一个计算日志，所以每个方程都应该能够以某种方式记录自己。

3-它必须快，尽可能快，因为这几百个方程可以被触发一百万次。（把它想象成一个大的优化循环）。

4-我想强制记录方程的出现顺序不一定与代码相似。

目前，我正在使用 C.（或 C，带有一点 C++），并将每个方程编写为类似函数的宏。我想知道这是否是正确的方法。这类问题以前有解决过吗？有没有其他语言比 C 更适合这个？对于这类特定问题，我是否需要了解任何设计模式或实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T00:10:10.370

所以方程正在变成编译代码，而不是解释？如果是这样，那是最快的。

但是，如果您的日志记录涉及 I/O，那可能是最大的耗时，您可以通过关闭它并比较执行时间来确定。如果是这样，可能的解决方法是：

*   以二进制生成输出，而不是格式化数字。

*   不要写任何你必须写的东西，比如事件而不是长记录。

*   尽量不要受旋转磁盘限制，例如写入内存文件或固态磁盘。

# windows-8 - 在 Windows RT 上运行为 ARM 编译的 Win32 应用程序

> ID：13455035
> 
> 赞同：11
> 
> 时间：2012-11-19T13:41:35.517
> 
> 标签：windows-8, arm

假设我有一个使用 Win32 API，但针对 ARM 架构编译的桌面程序。如何让它在 Windows RT（适用于 ARM 平板电脑的 Windows 8 受限版本）上运行？Windows RT 拒绝在没有 Microsoft 签名的情况下运行此类应用程序。

我知道没有正式的方法可以做到这一点，但说它是为了内部部署，或者只是为了测试目的。我有哪些选择？

（有关 Windows RT 上 Win32 API 的可用性，请参阅[此答案](https://stackoverflow.com/a/8259020/143091)（不一定适用于 Metro 应用程序，但存在于系统上），以及有关如何使用 VS2012 为 ARM 编译 Win32 程序的[此答案。）](https://stackoverflow.com/a/12347035/143091)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T08:44:39.707

现在您可以在 Windows RT 上运行任何应用程序[/exe：http://surfsec.wordpress.com/2013/01/06/circumventing-windows-rts-code-integrity-mechanism/](http://surfsec.wordpress.com/2013/01/06/circumventing-windows-rts-code-integrity-mechanism/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T09:06:45.940

请查看此线程，您可以通过 CreateProcessA [http://forum.xda-developers.com/showthread.php?t=1944675运行没有 Microsoft 签名的 exe](http://forum.xda-developers.com/showthread.php?t=1944675)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T20:14:33.597

现在实际上有一个类似“越狱”的脚本：

[http://forum.xda-developers.com/showthread.php?t=2092158](http://forum.xda-developers.com/showthread.php?t=2092158)

> **用法：**
> 启动您的 RT 设备并登录，让它在桌面上停留大约一分钟。
> 运行runExploit.bat，等待它完成它（不应该超过20秒左右）
> 按降低音量
> 等待runExploit.bat完成，回答它给出的任何提示。它们都应该是不言自明的。

运行脚本时可能会崩溃，并且必须在每次重新启动后完成。另外，我自己也没试过。在帖子中，有一个链接指向可能有用的重新编译软件列表。

# c++ - 在 C++ 中执行 Linux shell 命令，同时隐藏其输出

> ID：13455037
> 
> 赞同：0
> 
> 时间：2012-11-19T13:41:40.213
> 
> 标签：c++, linux, shell, output

我想使用 execl 或 system（或其他命令）从“/sbin/”执行 Linux shell 命令，并隐藏其输出。

我已经在使用“fork”来获取子进程...

就像我进入...

```
service "servicename" restart 
```

我会看到输出显示“restarting xyz [OK]”。相反，我只是希望命令静默执行并丢弃其输出，而不是显示在我的控制台应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:50:30.147

您可以将其附加到您的命令中：“ > /dev/null 2>&1”

所以你的命令变成： service [servicename] restart > /dev/null 2>&1

它的作用是将 stderr 重定向到 stdout (2>&1)，并将 stdout 重定向到 /dev/null (> /dev/null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:51:42.997

将输出重定向到`/dev/null`

例如。，

`service smb restart 1> /dev/null`

`service smb restart 2> /dev/null`

其中`1`和`2`代表`stdout`和`stderr`

# qt - QML 中的滚动条问题

> ID：13455038
> 
> 赞同：0
> 
> 时间：2012-11-19T13:41:42.317
> 
> 标签：qt, user-interface, qt4, qml

我正在尝试在 QML 中制作可滚动列表。

虽然它运行成功，但每当改变主窗口的大小时，列表的模式就会扭曲或项目相互重叠。

任何建议我的代码中的错误在哪里。

试图改变锚点，但在这个问题上也没有运气。

下面是代码片段

```
import QtQuick 1.1

Item{
    ....

    Rectangle{
        ....

        Rectangle {
        ....
            color: "white"
            anchors.centerIn: main.Center

            Rectangle {
                ...

                ListView {
                    id: list_min
                    ....

                    snapMode: ListView.SnapToItem
                    model: 20
                    delegate: Rectangle{
                        width: list_min.width
                        height: list_min.height
                        color: "transparent"

                        Text {
                            anchors.verticalCenter: parent.verticalCenter
                            text: index+1
                            font.pixelSize: parent.width/1.5
                        }

                        Text {
                            text: index+2
                            font.pixelSize: parent.width/1.5
                            anchors.top: parent.top
                            anchors.topMargin: 150
                        }

                        Text {
                            text: index
                            font.pixelSize: parent.width/1.5
                            anchors.bottom: parent.bottom
                            anchors.bottomMargin: 150
                        }
                    }

                    onMovementEnded: list_min.currentIndex = list_min.visibleArea.yPosition * list_min.count

                    Component.onCompleted: list_min.visibleArea
                }

                Rectangle {
                  ....
                    gradient: Gradient {
                        GradientStop { position: 0.0; color: "black" }
                        ....
                        GradientStop { position: 1.0; color: "black" }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:34:13.990

我建议使用 Column 标记将文本元素放置在委托中。同样对于overlay_min，您需要设置高度和宽度或anchors.fill，而不是两者。

我修改了源代码如下：

```
import QtQuick 1.1

Item{
    width: 300
    height: 240

    Rectangle{
    id:main
    width: parent.width
    height: parent.height

    Rectangle {
        id :frame_min
        width: 120
        height: main.height
        color: "white"
        anchors.centerIn: main.Center

        Rectangle {
            id: mSpinner
            anchors.centerIn: parent
            width: frame_min.width - 10
            height: frame_min.height
            color: "white"
            border.color: "black"
            border.width: 5

            ListView {
                id: list_min
                width: mSpinner.width
                height: mSpinner.height
                anchors.topMargin: 0
                anchors.top: parent.top
                clip: true

                snapMode: ListView.SnapToItem
                model: 20
                delegate: Rectangle{
                    width: list_min.width
                    height: list_min.height
                    color: "transparent"

                    Column{
                        anchors.verticalCenter: parent.verticalCenter
                        Text {
                            //anchors.verticalCenter: parent.verticalCenter
                            text: index+1
                            font.pixelSize: list_min.width/1.5
                        }

                        Text {
                            text: index+2
                            font.pixelSize: list_min.width/1.5
                            //anchors.top: parent.top
                            //anchors.topMargin: 150
                        }

                        Text {
                            text: index
                            font.pixelSize: list_min.width/1.5
                            //anchors.bottom: parent.bottom
                            //anchors.bottomMargin: 150
                        }
                    }
                }

                onMovementEnded: list_min.currentIndex = list_min.visibleArea.yPosition * list_min.count

                Component.onCompleted: list_min.visibleArea
            }

            Rectangle {
                id: overlay_min
                width: frame_min.width
                height: frame_min.height
                //anchors.fill: frame_min
                gradient: Gradient {
                    GradientStop { position: 0.0; color: "black" }
                    GradientStop { position: 0.34; color: "transparent" }
                    GradientStop { position: 0.35; color: "white" }
                    GradientStop { position: 0.66; color: "transparent" }
                    GradientStop { position: 1.0; color: "black" }
                }
            }
        }
    }
    }
} 
```

# php - 如何创建拖放表单构建器？

> ID：13455041
> 
> 赞同：4
> 
> 时间：2012-11-19T13:42:00.340
> 
> 标签：php, jquery, ajax, html, workflow

我正在考虑创建一种拖放表单构建器类型的产品（仅供学习:)）。现有的表单构建器参考，如 JotForm、Wufoo、Orbeon 表单构建器。

我非常渴望知道可以使用哪些技术以及如何创建此类产品。对于任何参考、教程来创建此类拖放表单构建器都将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:44:45.497

JQuery UI 对拖放项目有一个很好的开端。如果您遇到任何问题/问题，请查看[http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)开始并回帖。

# javascript - 负值和正值之间的随机数

> ID：13455042
> 
> 赞同：27
> 
> 时间：2012-11-19T13:42:08.803
> 
> 标签：javascript, random, numbers

> **可能重复：**
> [在特定范围内的 Javascript 中生成随机数？](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range)

我怎样才能得到一个随机值，例如，从 -99 到 99，不包括 0？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-19T13:45:54.603

```
var num = Math.floor(Math.random()*99) + 1; // this will get a number between 1 and 99;
num *= Math.round(Math.random()) ? 1 : -1; // this will add minus sign in 50% of cases 
```

* * *

共

```
var ranNum = Math.ceil(Math.random() * 99) * (Math.round(Math.random()) ? 1 : -1) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T13:49:10.347

这将返回您想要的

```
function getNonZeroRandomNumber(){
    var random = Math.floor(Math.random()*199) - 99;
    if(random==0) return getNonZeroRandomNumber();
    return random;
} 
```

这是一个功能[小提琴](http://jsfiddle.net/brunovieira/mb26C/)

# 编辑

为了在用户@MarkDickinson 对我发布的第一个代码做出了真正相关的贡献的评论中发生了一些争论，为未来的读者做出贡献，我决定在使用`Math.floor()`和`Math.round()`函数之间进行快速比较以返回值操作通缉。

**第一个场景**：使用`var random = Math.round(Math.random()*198) - 99;`（我的第一个建议）

```
function getNonZeroRandomNumberWithMathRound(){
    var random = Math.round(Math.random()*198) - 99;
    if(random==0) return getNonZeroRandomNumber();
    return random;
} 
```

**第二种情况**：使用`var random=Math.floor(Math.random()*199) - 99;`（标记建议）

```
function getNonZeroRandomNumberWithMathFloor(){
    var random = Math.floor(Math.random()*199) - 99;
    if(random==0) return getNonZeroRandomNumber();
    return random;
} 
```

**方法**

由于这是一场简短的辩论，我选择[了 fiddle.net](http://fiddle.net)进行比较。

该测试包括运行上述函数 100.000 次，然后检索极值的多少次，`99`并且`-99`会出现在另一个数字上，比如说`33`和`-33`。

然后，测试将给出一个简单的输出，其中包括 和 的出现百分比`99`以及和`-99`的出现百分比。`33``-33`

它将用于 Webkit 实现从`Safari 6.0.2`给出这个答案的输出，但任何人都可以在[fiddle.net上用你最喜欢的浏览器进行测试](http://fiddle.net)

**第一种情况的结果：**

*   正常发生率：0.97%
*   极端事件发生率：0.52%
*   极端事件相对于正常事件的百分比：53.4% // 确实有一半的机会

**第二种情况的结果：**

*   正常发生率：1.052%
*   极端事件发生率：0.974%
*   相对于正常发生的极端发生的百分比：92% //以最小的标准偏差更接近公平的结果

结果可以在这里看到：http: [//jsfiddle.net/brunovieira/LrXqh/](http://jsfiddle.net/brunovieira/LrXqh/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T14:03:47.387

这是一个通用解决方案，可让您设置界限，并选择加入/退出包含`0`.

```
var pos = 99,
    neg = 99,
    includeZero = false,
    result;

do result = Math.ceil(Math.random() * (pos + neg)) - neg;
while (includeZero === false && result === 0); 
```

`pos`和`neg`值是包容性的。

这样就不需要平衡正负范围。

* * *

或者，如果您担心由于单个排除值而导致重新运行，您可以将初始范围缩小 1，然后添加`1`到任何大于或等于`0`.

```
var pos = 5,
    neg = 5,
    result;

result = Math.floor(Math.random() * (pos + neg)) - neg;
result = result < 0 ? result : result + 1; 
```

* * *

如果您愿意，最后一行可能会更短：

```
result += (result >= 0) 
```

# c# - WCF - 缺少被视为 0 的整数参数

> ID：13455045
> 
> 赞同：4
> 
> 时间：2012-11-19T13:42:14.720
> 
> 标签：c#, wcf, web-services, soap, missing-data

我正在使用 WCF 生成 SOAP Webservice，现在我面临以下问题：

*   我定义了一个 OperationContract，看起来像这样

`[OperationContract] void InsertSomeData(string version, int someId);`

*   在使用 soapUI 测试服务时，我意识到如果我删除请求中的 someId 标签，我确实会在我的服务中收到值 0
*   这是标准行为吗？实际上，我认为该服务会引发某种异常，因为该参数不可为空。
*   我可以在我的服务中区分 0 作为传递的真实值和只是缺少标签，还是我必须提前使我的所有参数都可以为空

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:54:17.157

破解方式：

```
[OperationContract]
public void InsertSomeData(MyData data){...}

[DataContract]
public class MyData{
[DataMember]
public string version{get;set;}
[DataMember(IsRequired=true)]
public int someId{get;set;}

} 
```

更长但更好的方法：[http ://thorarin.net/blog/post/2010/08/08/Controlling-WSDL-minOccurs-with-WCF.aspx](http://thorarin.net/blog/post/2010/08/08/Controlling-WSDL-minOccurs-with-WCF.aspx)

# c# - 使用事件传递数据

> ID：13455047
> 
> 赞同：15
> 
> 时间：2012-11-19T13:42:20.427
> 
> 标签：c#, events

我需要通过事件传递数据。目前，当接收到更多数据（通过 comport）时，该事件将触发但前一个事件（&data）尚未处理，因此数据被覆盖。
如何以安全的方式处理事件和数据？我有多个这样的事件（15x），所以我不确定使用数据队列是最好的方法还是与事件一起传递数据（如 SO 项目 4215845）。

示例（此示例使用字符串，但我也使用数组、布尔值等）：

在“发送者”端（class1）：

```
public event EventHandler evDiaStringMessage = delegate { };
private void evDiaStringMessageEvent()
{
    evDiaStringMessage(this, new EventArgs());
}
private static string _DiaString;
public string DiaString
{
    get { return _DiaString; }
    set { _DiaString = value; }
} 
```

DiaString 包含数据并在 evDiaStringMessage 过早触发时被覆盖。

在“接收器/GUI”端（class2）：

```
dia.evDiaStringMessage += new EventHandler(dia_evDiaStringMessage);

private delegate void dia_evDiaStringMessageCallBack(object sender, EventArgs e);
void dia_evDiaStringMessage(object sender, EventArgs e)
{
    if (this.InvokeRequired)
    {
        this.BeginInvoke(new dia_evDiaStringMessageCallBack(dia_evDiaStringMessage), new object[] { sender, e});
    }
    else
    {
        frmcomm.CommTextBox("Receiver message: " + dia.DiaString + "\r\n", Color.Red);
    }
} 
```

dia.DiaString 不包含预期的数据（以前的数据），但所有事件都“收到”。

非常感激你的帮助！再举个例子！

**编辑：**

我将代码更改为：

在“发送者”端（class1）：

```
public event EventHandler<DiaStringEventArgs> evDiaStringMessage ;
public class DiaStringEventArgs : EventArgs
{
    public string DiaString  { get; set; }
}

private void evDiaStringMessageEvent(DiaStringEventArgs e)
{
    EventHandler<DiaStringEventArgs> handler = evDiaStringMessage;
    if (handler != null)
        handler(this, e);
} 
```

...

```
private void PrepareDataAndFireEvent()
{
    DiaStringEventArgs args = new DiaStringEventArgs(); 
    args.DiaString = ByteToString(data);
    evDiaStringMessageEvent(args);
} 
```

在“接收器/GUI”端（class2）：

```
dia.evDiaStringMessage += new EventHandler<ifDiA10.DiaStringEventArgs>(dia_evDiaStringMessage);

private delegate void dia_evDiaStringMessageCallBack(object sender, ifDiA10.DiaStringEventArgs e);
void dia_evDiaStringMessage(object sender, ifDiA10.DiaStringEventArgs e)
{
    if (this.InvokeRequired)
    {
        this.BeginInvoke(new dia_evDiaStringMessageCallBack(dia_evDiaStringMessage), new object[] { sender, e});
    }
    else
    {
        frmcomm.CommTextBox("Receiver message: " + e.DiaString + "\r\n", Color.Red);
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T13:46:20.127

您可以将数据存储在自定义 EventArgs 类中：

```
public class ReceivedDataEventArgs : EventArgs
{
   // Add the properties you require
} 
```

事件定义如下：

```
public event EventHandler<ReceivedDataEventArgs> ReceivedData; 
```

您的处理程序将接收您的类而不是`EventArgs`对象的实例，因此您将拥有正确的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:46:15.860

您应该传递`dia.DiaString`引发事件时的值，而不是在处理事件时将其读回。

您可以通过扩展`EventArgs`类和创建自定义属性来做到这一点。

如果你需要一个例子让我知道。

# android - 在播放视频时调整视图的大小和位置

> ID：13455048
> 
> 赞同：0
> 
> 时间：2012-11-19T13:42:28.180
> 
> 标签：android, video

我的问题有 2 个部分。

1.  如何（任何教程都是完美的）我可以在非全屏的 Android 视图中播放视频？
2.  我可以在播放视频时调整该视图的大小和位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:53:21.803

对于这种视频操作，您绝对应该看看[TextureView](http://developer.android.com/reference/android/view/TextureView.html)。

此视图可用于通过 MediaPlayer 渲染视频，您可以对其应用任何所需的转换。

这是一个简单的示例，说明如何使用它来播放视频（带有愚蠢的缩放动画）：

```
public class TestActivity extends Activity implements SurfaceTextureListener {

private static final String VIDEO_URL = "http://www.808.dk/pics/video/gizmo.mp4";

private MediaPlayer player;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    player = MediaPlayer.create(this, Uri.parse(VIDEO_URL));

    setContentView(R.layout.main);

    TextureView videoView = (TextureView) findViewById(R.id.video);
    videoView.setSurfaceTextureListener(this);

    // Scaling
    Animation scaling = new ScaleAnimation(0.2f, 1.0f, 0.2f, 1.0f);
    scaling.setDuration(2000);
    videoView.startAnimation(scaling);
}

@Override
public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
    player.setSurface(new Surface(surface));
    player.start();
}

@Override
public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) { }

@Override
public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) { return false; }

@Override
public void onSurfaceTextureUpdated(SurfaceTexture surface) { }
} 
```

使用以下 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextureView
        android:id="@+id/video"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

请注意，此 TextureView 仅适用于 API 级别 >= 14。

# artificial-intelligence - Q-Learning 与神经网络相结合（有益的理解）

> ID：13455049
> 
> 赞同：4
> 
> 时间：2012-11-19T13:42:34.750
> 
> 标签：artificial-intelligence, reinforcement-learning, neural-network

据我了解，可以用神经网络替换 Q 值的查找表（状态-动作-对-评估）来估计这些状态-动作对。我编写了一个小型库，它能够通过自建的神经网络进行传播和反向传播，以学习特定输入输出的所需目标值。

所以我在谷歌搜索和谷歌搜索整个网络时也找到了这个网站（就像我觉得的那样）：[http](http://www.cs.indiana.edu/~gasser/Salsa/nn.html) ://www.cs.indiana.edu/~gasser/Salsa/nn.html其中Q-learning与简要介绍了神经网络。

对于每个动作，都有一个额外的输出神经元，这些输出“单元”之一的激活值告诉我估计的 Q 值。（一个问题：激活值与神经元的“输出”相同还是不同？）

我使用标准的 sigmoid 函数作为激活函数，所以函数值 x 的范围是

```
0<x<1 
```

所以我想，我的目标值应该总是从 0.0 到 1.0 -> 问题：我的理解正确吗？还是我误解了什么？

如果是，则出现以下问题：计算目标奖励/新Q值的公式为：q(s,a) = q(s,a) + learningrate * (reward + discountfactor * q'(s,a ) - q(s,a))

那么，如果目标应该是从 0.0 到 1.0，我该如何执行这个方程来获得神经网络的正确目标？！我如何计算好的奖励价值？朝着目标前进比远离目标更值得吗？（接近目标时的 +reward 比 -reward 更远的目标距离？）

我觉得我的理解有一些误区。我希望，你能帮助我回答这些问题。非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:08:29.863

使用神经网络存储 q 值是查表的一个很好的扩展。这使得在状态空间连续时使用 q-learning 成为可能。

```
 input layer     ......  

                |/  \ |  \|
  output layer  a1   a2   a3
                0.1  0.2  0.9 
```

假设您有 3 个可用的操作。上面显示了使用当前状态和学习权重的神经网络的输出。所以你知道`a3`这是最好的行动。

现在你有问题：

> 一个问题：激活值与神经元的“输出”相同还是不同？

是的，我想是这样。在引用的链接中，作者说：

> 一些单元也可以指定为输出单元；它们的激活代表了网络的响应。

* * *

> 所以我想，我的目标值应该总是从 0.0 到 1.0 -> 问题：我的理解正确吗？还是我误解了什么？

如果您选择`sigmoid`激活函数，那么您的输出肯定会在 0.0 到 1.0 之间。激活函数有不同的选择，例如，[here](http://en.wikibooks.org/wiki/Artificial_Neural_Networks/Activation_Functions)。`Sigmoid`是最受欢迎的选择之一。我认为输出值从 0.0 到 1.0 在这里不是问题。如果在当前时间，您只有两个可用的操作，`Q(s,a1) = 0.1, Q(s,a2) = 0.9`您知道该操作`a2`比`a1`相对于 q 值的操作要好得多。

* * *

> 那么，如果目标应该是从 0.0 到 1.0，我该如何执行这个方程来获得神经网络的正确目标？！我如何计算好的奖励价值？

我不确定，但您可以尝试将新目标 q 值限制在 0.0 和 1.0 之间，即

```
q(s,a) = min(max(0.0, q(s,a) + learningrate * (reward + discountfactor * q'(s,a) - q(s,a))), 1.0) 
```

尝试做一些实验来找到合适的奖励值。

* * *

> 朝着目标前进比远离目标更值得吗？（接近目标时的 +reward 比 -reward 更远的目标距离？）

如果你使用经典的更新方程，通常你应该在接近目标时给予更多的奖励，这样新的 q 值就会增加。

# python - 在 Django 模板中获取文件扩展名

> ID：13455052
> 
> 赞同：13
> 
> 时间：2012-11-19T13:42:42.337
> 
> 标签：python, django

我有这样的模型：

```
class File(models.Model):
    name = models.CharField(max_length=45)
    description = models.CharField(max_length=100, blank=True)
    file = models.FileField(upload_to='files') 
```

我在我的视图中获得了所有 File 对象，并且根据文件的类型，我想打印适当的类：

```
<a class="pdf">link</a> 
```

或者

```
<a class="word">link</a> 
```

或者

```
<a class="other">link<a/> 
```

在我的模板中。

如何在 Django 模板中获取文件扩展名？

我想做这样的事情：

```
{% for file in files %}
    {% if file.get_extension == 'pdf' %}
           <a class="pdf">link</a>
    {% elif file.get_extension = '.doc' %}
           <a class="word">link</a>
    {% else %}
           <a class="other">link<a/>
    {% endif %}
{% endfor %} 
```

当然，'file.get_extension' 不存在......

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-19T14:21:11.903

你`.get_extension`的模型上缺少一个？这很简单，只需添加它 :-) 您可以在模型上拥有各种方法。所以是这样的：

```
class File(models.Model):
    name = models.CharField(max_length=45)
    description = models.CharField(max_length=100, blank=True)
    file = models.FileField(upload_to='files')

    def extension(self):
        name, extension = os.path.splitext(self.file.name)
        return extension 
```

（这个名字`.extension()`比`.get_extension()`, 更 Pythonic）。

你可以走得更远。你的模板中的 if/else 结构是不是有点乏味？Python 代码中的麻烦更少：

```
class File(models.Model):
    ...
    def css_class(self):
        name, extension = os.path.splitext(self.file.name)
        if extension == 'pdf':
            return 'pdf'
        if extension == 'doc':
            return 'word'
        return 'other' 
```

模板这样更简单：

```
{% for file in files %}
  <a class="{{ file.css_class }}">link</a>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T13:50:33.203

我不知道是否有一个漂亮的内置 django 函数可以做到这一点，但你可以从你的文件字段中获取扩展名

`fileName, fileExtension = os.path.splitext(file.name)`

如果您准备在模板中执行此操作，您可以创建一个自定义标签来包装它

[https://docs.djangoproject.com/en/dev/howto/custom-template-tags/](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

# web-services - 部署在 websphere 应用服务器中的 web 服务的端点 URL

> ID：13455053
> 
> 赞同：2
> 
> 时间：2012-11-19T13:42:46.743
> 
> 标签：web-services, websphere-7

我在 websphere application server v7.0 中部署了一个 web 服务。

是否可以在 Websphere 应用程序服务器本身中看到 Web 服务的端点 URL？

如果是，在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-12T18:31:44.763

在 WAS 管理控制台内导航到：应用程序>企业应用程序>{web_service_application}>提供 HTTP 端点 URL 信息

# hash - adler32 哈希的可怕冲突

> ID：13455067
> 
> 赞同：11
> 
> 时间：2012-11-19T13:43:47.840
> 
> 标签：hash, hash-collision, adler32

当使用 adler32() 作为散列函数时，应该会遇到罕见的冲突。

我们可以对碰撞概率进行精确的数学运算，但粗略地说，由于它是一个 32 位的散列函数，因此 在数千个项目的样本集上
不应该有很多碰撞。

几乎不是这种情况。

这是一个示例：让我们使用中间包含日期的字符串，例如

```
"Some prefix text " + date + " some postfix text." 
```

其中日期的格式为 yyyy-mm-dd，并在 2012 年循环。

这个例子中有 91 次碰撞！

更糟糕的是：有 7 个案例发生了 3 个日期冲突。

这么常用的hash函数怎么表现这么差？
还是我错过了什么？

以下是上述示例的详细结果：

```
0x592a0f1f: 2012-01-30, 2012-02-02, 2012-10-21
0x592b0f1f: 2012-02-11, 2012-10-30, 2012-11-02
0x593d0f20: 2012-01-31, 2012-02-03, 2012-10-22
0x593e0f20: 2012-02-12, 2012-10-31, 2012-11-03
0x59410f20: 2012-03-11, 2012-11-30, 2012-12-02
0x59560f21: 2012-03-30, 2012-04-02, 2012-12-21
0x59690f22: 2012-03-31, 2012-04-03, 2012-12-22

0x59020f1d: 2012-01-10, 2012-10-01
0x59150f1e: 2012-01-11, 2012-10-02
0x59160f1e: 2012-01-20, 2012-10-11
0x59170f1e: 2012-02-01, 2012-10-20
0x59180f1e: 2012-02-10, 2012-11-01
0x59280f1f: 2012-01-12, 2012-10-03
0x59290f1f: 2012-01-21, 2012-10-12
0x592c0f1f: 2012-02-20, 2012-11-11
0x592d0f1f: 2012-03-01, 2012-11-20
0x592e0f1f: 2012-03-10, 2012-12-01
0x593b0f20: 2012-01-13, 2012-10-04
0x593c0f20: 2012-01-22, 2012-10-13
0x593f0f20: 2012-02-21, 2012-11-12
0x59400f20: 2012-03-02, 2012-11-21
0x59420f20: 2012-03-20, 2012-12-11
0x59430f20: 2012-04-01, 2012-12-20
0x594e0f21: 2012-01-14, 2012-10-05
0x594f0f21: 2012-01-23, 2012-10-14
0x59500f21: 2012-02-04, 2012-10-23
0x59510f21: 2012-02-13, 2012-11-04
0x59520f21: 2012-02-22, 2012-11-13
0x59530f21: 2012-03-03, 2012-11-22
0x59540f21: 2012-03-12, 2012-12-03
0x59550f21: 2012-03-21, 2012-12-12
0x59570f21: 2012-04-11, 2012-12-30
0x59610f22: 2012-01-15, 2012-10-06
0x59620f22: 2012-01-24, 2012-10-15
0x59630f22: 2012-02-05, 2012-10-24
0x59640f22: 2012-02-14, 2012-11-05
0x59650f22: 2012-02-23, 2012-11-14
0x59660f22: 2012-03-04, 2012-11-23
0x59670f22: 2012-03-13, 2012-12-04
0x59680f22: 2012-03-22, 2012-12-13
0x596a0f22: 2012-04-12, 2012-12-31
0x596c0f22: 2012-04-30, 2012-05-02
0x59740f23: 2012-01-16, 2012-10-07
0x59750f23: 2012-01-25, 2012-10-16
0x59760f23: 2012-02-06, 2012-10-25
0x59770f23: 2012-02-15, 2012-11-06
0x59780f23: 2012-02-24, 2012-11-15
0x59790f23: 2012-03-05, 2012-11-24
0x597a0f23: 2012-03-14, 2012-12-05
0x597b0f23: 2012-03-23, 2012-12-14
0x597c0f23: 2012-04-04, 2012-12-23
0x59820f23: 2012-05-30, 2012-06-02
0x59870f24: 2012-01-17, 2012-10-08
0x59880f24: 2012-01-26, 2012-10-17
0x59890f24: 2012-02-07, 2012-10-26
0x598a0f24: 2012-02-16, 2012-11-07
0x598b0f24: 2012-02-25, 2012-11-16
0x598c0f24: 2012-03-06, 2012-11-25
0x598d0f24: 2012-03-15, 2012-12-06
0x598e0f24: 2012-03-24, 2012-12-15
0x598f0f24: 2012-04-05, 2012-12-24
0x59950f24: 2012-05-31, 2012-06-03
0x59980f24: 2012-06-30, 2012-07-02
0x599a0f25: 2012-01-18, 2012-10-09
0x599b0f25: 2012-01-27, 2012-10-18
0x599c0f25: 2012-02-08, 2012-10-27
0x599d0f25: 2012-02-17, 2012-11-08
0x599e0f25: 2012-02-26, 2012-11-17
0x599f0f25: 2012-03-07, 2012-11-26
0x59a00f25: 2012-03-16, 2012-12-07
0x59a10f25: 2012-03-25, 2012-12-16
0x59a20f25: 2012-04-06, 2012-12-25
0x59ae0f25: 2012-07-30, 2012-08-02
0x59ae0f26: 2012-01-28, 2012-10-19
0x59af0f26: 2012-02-09, 2012-10-28
0x59b00f26: 2012-02-18, 2012-11-09
0x59b10f26: 2012-02-27, 2012-11-18
0x59b20f26: 2012-03-08, 2012-11-27
0x59b30f26: 2012-03-17, 2012-12-08
0x59b40f26: 2012-03-26, 2012-12-17
0x59b50f26: 2012-04-07, 2012-12-26
0x59c10f26: 2012-07-31, 2012-08-03
0x59c40f26: 2012-08-30, 2012-09-02
0x59c40f27: 2012-02-28, 2012-11-19
0x59c50f27: 2012-03-09, 2012-11-28
0x59c60f27: 2012-03-18, 2012-12-09
0x59c70f27: 2012-03-27, 2012-12-18
0x59c80f27: 2012-04-08, 2012-12-27
0x59d70f27: 2012-08-31, 2012-09-03
0x59da0f28: 2012-03-28, 2012-12-19
0x59db0f28: 2012-04-09, 2012-12-28 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T00:26:31.383

Adler-32 从未打算成为，也不是哈希函数。目的是解压后的错误检测。它很好地达到了这个目的，因为它速度很快，并且压缩数据中的错误被解压缩器放大。

在您给出的示例中，您在非常短的字符串上使用 Adler-32，它甚至没有机会使用所有 32 位。Adler-32 至少需要几百个字节才能滚动。

有许多非加密哈希函数非常快并且具有良好的哈希行为，包括避免冲突。看看[CityHash](https://code.google.com/p/cityhash/)系列的哈希函数。

如果您需要加密（不可欺骗）哈希函数，请查看[SHA-2](http://en.wikipedia.org/wiki/SHA-2)和[SHA-3](http://en.wikipedia.org/wiki/SHA-3)。

# jquery - 如何在 jQuery 中复制这个 CSS 兄弟选择器？

> ID：13455070
> 
> 赞同：2
> 
> 时间：2012-11-19T13:43:54.313
> 
> 标签：jquery, css, css-transitions, user-experience

本质上我想复制`li:hover+li`，但它比这更复杂一些。我正在玩 CSS 转换并尝试制作一个关闭延迟的下拉菜单（为了可用性）。换句话说，当您将鼠标移出菜单时，它不会立即消失。

我的工作正常，但是当我从一个顶级项目移动到下一个项目时，上一个菜单会保持打开状态一秒钟。[这是一个没有下拉菜单的简化示例](http://codepen.io/svivian/pen/FgoIv)，只是转换顶级项目。相关CSS：

```
.menu > li {
  background-color: #4F57AA;
  /* transition out */
  -webkit-transition: background-color .2s ease-in-out 1s;
}
.menu > li:hover {
  background-color: #8F002E;
  /* transition in */
  -webkit-transition: background-color .2s ease-in-out;
}
.menu > li:hover+li {
  -webkit-transition: background-color .2s ease-in-out;
} 
```

因此，当您完全离开菜单时，列表项会等待一秒钟，然后再变回蓝色。但是当从“一”移动到“二”时，“一”上的悬停状态也会等待一秒钟。

使用兄弟选择器，当从右向左移动时，我设法获得了即时过渡。当然，还没有“前一个兄弟姐妹”选择器，所以它不能反过来工作。我想使用一点 jQuery 来触发这些转换，但这就是我遇到的问题。我试过这个：

```
$('.menu > li').hover(
  function() {
    // instant transition for siblings?
    $(this).siblings().css('-webkit-transition', 'background-color .2s ease-in-out');
  },
  function() {
    // revert to regular transition?
    $(this).siblings().css('-webkit-transition', 'background-color .2s ease-in-out 1s');
  }
); 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:00:32.227

我认为你可以[用纯 CSS 得到你想要的](http://codepen.io/anon/pen/lzKrb)。我已经删除了你的最后一个选择器（使用兄弟）并将它推到 #2 级联位置并更改选择器以寻找`.menu:hover`第一个：

```
.menu > li {
  background-color: #4F57AA;
  /* transition out */
  -webkit-transition: background-color .2s ease-in-out 1s;
}

.menu:hover > li {
  -webkit-transition: background-color .2s ease-in-out .2s;
}

.menu > li:hover {
  background-color: #8F002E;
  /* transition in */
  -webkit-transition: background-color .2s ease-in-out;
} 
```

# greendao - GreenDao 字符串条件？

> ID：13455074
> 
> 赞同：2
> 
> 时间：2012-11-19T13:44:12.953
> 
> 标签：greendao

我在[文档](http://greendao-orm.com/documentation/queries/)中看到有一个`StringCondition`用于执行自定义 SQL 命令的神秘类，但 SDK 无法识别这一点？

这个有新版本吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:45:31.047

导入 de.greenrobot.dao.WhereCondition.StringCondition；

# android - RadioGroup.clearCheck() 在动态创建单选按钮的情况下不起作用

> ID：13455083
> 
> 赞同：1
> 
> 时间：2012-11-19T13:44:49.570
> 
> 标签：android, onclick, radio-button

在我的应用程序中，我正在动态创建单选按钮，并希望在选中其中一个单选按钮时取消选中所有其他单选按钮。为此，我使用 RadioGroup.clearCheck() 但它根本不起作用。这是代码：

```
for (int i=0; i<files.length; i++)
            {
                rbi = new RadioButton(context);

                rb1 = new RadioGroup(context);
                rb1.addView(rbi);

                nameOfFile = files[i].getName();
                rbi.setText(nameOfFile);
                ll.addView(rb1);

                rbi.setOnClickListener(
                        new RadioButton.OnClickListener()
                        {  
                            @Override  
                            public void onClick(View v)
                            {                                   

                                rb1.clearCheck();
                                rbi.setChecked(true);

                            } 
```

请帮助我。即使是实现目标的替代解决方案也将受到欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:33:23.213

你创建了很多`RadioGroup`s 里面只有 1 `RadioButton`。那可能不是你想要的。A`RadioGroup`需要包含多个`RadioButton`s，以便您可以在列表中选择一个活动按钮。请参阅下面的代码

```
// create 1 RadioGroup, add it to the layout
RadioGroup rg = new RadioGroup(context);
ll.addView(rg);
// add several RadioButtons to the RadioGroup
for (int i=0; i < files.length; i++) {
    String nameOfFile = files[i].getName();
    RadioButton rb = new RadioButton(context);
    rb.setId(i); // assign an id
    rb.setText(nameOfFile);
    rg.addView(rb); // add to group
}
// do something when user checks a button
rg.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        // user selected files[checkedId].getName();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:15:09.887

您是否尝试过（使用 System.out.println("test");) 或其他方法，如果它甚至进入清算部分？会先测试一下。这就是zapl的意思

```
rb1.setOnCheckedChangeListener(
         new RadioGroup.OnCheckedChangeListener() {
                 public void onCheckedChanged(RadioGroup rb1,
                        int checkedId) {
                        Log.v("Selected", "New radio item selected: " + checkedId);
                        }
          }); 
```

如果可行，那么你可以试试这个：

```
 if (rbi.isChecked()){
    rb1.clearCheck();
    rbi.setChecked(true);
    } 
```

# shell - 将 grep 与正则表达式一起使用

> ID：13455089
> 
> 赞同：0
> 
> 时间：2012-11-19T13:45:05.243
> 
> 标签：shell, scripting, grep

该命令`grep -vf 1.txt 2.txt > 3.txt`放入了`3.txt`没有`2.txt`的内容`1.txt`，但是我如何才能使用`grep`to 仅比较具有 (0-9) 的字符串？

```
Example:

(0001) compare  
test   ignore  
984    ignore  
(10)   compare  
(1242342542) compare 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:02:48.110

如果您希望只保留与模式匹配的结果，您可以简单地对输出进行后处理：

```
grep -vf 1.txt 2.txt | grep '([0-9]\+)' > 3.txt 
```

或者，如果您希望仅使用`1.txt`与模式匹配的行进行比较，您可以尝试：

```
grep -vf <(grep "([0-9]\+)" 1.txt) 2.txt > 3.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:07:24.780

简单的方法是：

在保存到 3.txt 之前，将结果通过管道传输到`grep -E '[0-9]+' > 3.txt`

好像： `grep -vf.... |grep -E '[0-9]+' > 3.txt`

如果您给出 1.txt 、 2.txt 和预期的 3.txt 的一些示例，可能会有一种有效的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:35:51.580

这也应该有效：

```
awk 'FNR==NR {arr[$0];next} !($1 in arr)' 1.txt 2.txt 
```

问候

# animation - SVG ― 点击停止 Chromium 和 Safari 中的动画

> ID：13455096
> 
> 赞同：1
> 
> 时间：2012-11-19T13:45:35.287
> 
> 标签：animation, safari, svg, box2d, chromium

现在我完全不知道是什么导致了这个奇怪的错误，我希望能够尽可能地描述它，但是代码已经变得很大并且发布所有这些不会导致一个明确的问题。

**1.设置：**

背景中的 Box2dWeb 动画，其中`Step()`方法的触发是通过遵循[» 就是它« 部分中](http://nokarma.org/2011/02/02/javascript-game-development-the-game-loop/index.html)`window.requestAnimationFrame`的游戏循环实现来完成的。每次调用 »draw« 方法时，b2body 的转换都会交给 a和 a 。设置所需的动画并充当身体的监视器并驻留在内联中。`<div>``<g>``<div>``<g>``<svg>`

点击被全局捕获，如果用户点击目标`<div>`或`<path>`目标获得焦点导致对 b2body 施加力的原因。

**2.错误：**

总而言之，一切都按预期工作，动画**为其**`<div>`对应的.`<g>`**`<g>``<g>`**

 **这是用于设置从 b2Body 到 的转换的代码`<g>`：

```
function draw(){
    var str = this._sprite.transform;
    var mtrs = this._transformItem.matrix;
    mtrs.a = str.a1;
    mtrs.c = str.a2;
    mtrs.e = str.a3;
    mtrs.b = str.b1;
    mtrs.d = str.b2;
    mtrs.f = str.b3;
    this._transformItem.setMatrix( mtrs );
} 
```

where`this._transformItem`指向`<g>.transform.baseVal.getItem( 0 )`和`this._sprite.transform`指向自定义类型的变换矩阵。

这是捕获点击的代码：

```
function getClickTargets( target ){
    var targets = { 'sprite' : null, 'link' : null };
    while( target ){
    if( target.nodeName.toLowerCase() === 'a' && 
        targets.link == null ){
        targets.link = target;
    }

    if( target.hasAttribute &&
        target.hasAttribute( 'data-sprite-id' ) && 
        targets.sprite == null ){
            targets.sprite = this._stage.getSpriteById( 
                target.getAttribute( 'data-sprite-id' ) );
    }

    if( target.nodeName.toLowerCase() == 'path' ){
        var attr = target.getAttributeNS( NS, 'monitor-for-sprite' );
        if( attr != '' ){
            targets.sprite = this._stage.getSpriteById( attr );
        }
    }

    if( targets.link != null && target.sprite != null ){
        break;
    }
        target = target.parentNode;
    }
        return targets;
}; 
```

在 FF、IE9/10、Chrome 和 Opera 中，一切都按其应有的方式运行，唯一导致错误行为的是 »click« 与`<path>`as 目标一起发生。矩阵是正确的，因为动画继续正确运行`<div>`。

什么可能导致这种情况，我应该在哪里搜索，是否有人有想法或有类似的错误？

**编辑：**

这可能是由于事件被捕获并与整体运行的“更新滴答”“异步”处理的事实引起的吗？

**编辑2：**

我注意到如果我启动网络检查器并观察元素，也会出现同样的问题，但所有`<g>`元素都会冻结。

**编辑3：**

我现在已经让它运行了，至少在铬中，但我想 Safari 也会这样做。我将 »draw« 函数稍微更改为：

```
function(){
    var str = this._sprite.transform;
    var mtrs = this._transformItem.matrix;

    mtrs.a = str.a1;
    mtrs.c = str.a2;
    mtrs.e = str.a3;
    mtrs.b = str.b1;
    mtrs.d = str.b2;
    mtrs.f = str.b3;

    //this._transformItem.setMatrix( mtrs ); //old line
    this._transformList.replaceItem( 
        this._transformList.createSVGTransformFromMatrix( mtrs ), 0 ); //new working line
} 
```

如果有人知道为什么它只适用于新的 »SVGTransform«，很高兴告诉我。否则我认为这是一种错误。**

# colors - 使用一个参数应用渐变着色

> ID：13455099
> 
> 赞同：0
> 
> 时间：2012-11-19T13:45:41.213
> 
> 标签：colors, javafx-2, gradient, uicomponents

我有不同的盒子，它们有一定的双参数。这个参数应该确定盒子有什么颜色。着色应该以双精度值 0.0（可能是蓝色）的一种颜色开始，并且应该以 1.0 的另一种颜色（可能是红色）结束。[它或多或少是这里所做的](http://tulip.labri.fr/Documentation/3_8/userHandbook/html/ch04.html#color-algos)或[基于渐变的条件着色](https://stackoverflow.com/questions/8142865/conditional-coloring-based-on-a-gradient)。

[如Oracle Docs](http://docs.oracle.com/javafx/2/api/javafx/scene/paint/Color.html)中所述，有多种定义颜色的方法，但使用这些定义计算渐变似乎很困难。

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:55:13.613

```
javafx.animation.Interpolator.LINEAR.interpolate(
    color1, color2, fraction
) 
```

# c# - 如何在没有 Outlook 的情况下通过邮件发送 Outlook 任务请求？

> ID：13455104
> 
> 赞同：7
> 
> 时间：2012-11-19T13:45:57.303
> 
> 标签：c#, asp-classic, outlook, icalendar, tnef

我需要复制`Outlook`特性/功能以向某人发送一些任务请求（[请参阅此处](http://office.microsoft.com/en-us/outlook-help/assign-a-task-to-someone-else-HP005242813.aspx)），但是使用`ASP.NET C#`和未在网络服务器上安装 Outlook 的网络服务器发送的邮件（因此无法使用 Outlook 自动化）。

我已经检查了执行此操作的可能性，将任务发送给某人的常见方法似乎是生成格式`.ics`文件`iCalendar`，并将该文件包含到邮件中（[请参阅此 stackoverflow 问题](https://stackoverflow.com/questions/461889/sending-outlook-meeting-requests-without-outlook)）。

它工作得很好，但是 Outlook 发送的任务不等同：

*   事件 (VEVENT) 有一个开始日期和结束日期（就像一个任务），但没有“完成”字段（这是有意义的，因为它是一个事件，而不是一个任务）。
*   Todos (VTODO) 只有截止日期，没有开始日期或结束日期[，outlook 不支持](http://en.wikipedia.org/wiki/Microsoft_Outlook#Calendar_compatibility)。

我检查了自己 Outlook 在包含任务请求的邮件中究竟发送了什么：它包含一个`winmail.dat`编码`content-type:application/ms-tnef`为`Base64`. 在该文件（这是一个二进制文件）中，有一个`IPM.TaskRequest`似乎是我需要的引用。

我检查了网络并找到了一些 TNEF 解析器，但我需要相反的：**从 C# 代码生成一个包含任务请求的 TNEF 文件**。我想知道是否有办法做到这一点。使用库（无论是否免费）都不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:02:00.517

即使 Outlook 安装在 Web 服务器上，服务器上的 Outlook 自动化通常也是一个坏主意。

但是，您是否查看过 Exchange Web 服务？它提供了一个完整的对象模型来与 Outlook 集成。显然它与前景相关（与 ics 不同），但它似乎确实适合您的用例。

EWS 概述：http: [//msdn.microsoft.com/en-us/library/exchange/dd877045%28v=exchg.140%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/dd877045%28v=exchg.140%29.aspx)

处理任务：http: [//blogs.msdn.com/b/dhruvkh/archive/2012/04/06/working-with-tasks-using-exchange-web-services.aspx](http://blogs.msdn.com/b/dhruvkh/archive/2012/04/06/working-with-tasks-using-exchange-web-services.aspx)

# android - 静态构建库时对 STL 函数的未定义引用，构建到 .so 不会出现错误

> ID：13455108
> 
> 赞同：2
> 
> 时间：2012-11-19T13:46:10.560
> 
> 标签：android, c++, linker, android-ndk

我尝试将项目中的一个库构建为静态库 - 更改`include $(BUILD_SHARED_LIBRARY)`为`include $(BUILD_STATIC_LIBRARY)`. 现在我得到：

```
android-ndk-r6/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/list.tcc:103: undefined reference to `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*) 
```

需要注意的一点：引用不是来自相关库本身，而是来自链接到相关库的另一个动态库。

知道这里有什么问题吗？

PS通过动态链接到STL来避开问题，但想首先解决问题并静态链接。

PPS 这只发生在 NDK r8 上。

# php - mysql_fetch_array 出错

> ID：13455110
> 
> 赞同：0
> 
> 时间：2012-11-19T13:46:15.787
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，布尔值在选择中给出](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)
> [警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在](https://stackoverflow.com/questions/5473981/warning-mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-i)

这是我的代码。以前可以用，现在不行了。

```
 <?php
        include("db.php");
        ob_start();

        $result=mysql_query("SELECT * FROM navigation order by pos asc");

        while($nav = mysql_fetch_array($result))
        {
            $id = $nav['navid'];    
            echo '<a href="' . $nav['link'] . '" target="'. $nav['target'] .'">';
            echo "<span class='link'>". $nav['text']. "</span></a>";
        }
        mysql_close($conn);
        ob_flush();
        ?> 
```

任何人都可以看到问题吗？

它给了我这个错误：**警告：mysql_fetch_array() 期望参数 1 是资源，给出的布尔值。**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:49:05.243

如果`$result`是布尔值，则为`false`，这意味着查询在此处失败：

```
$result=mysql_query("SELECT * FROM navigation order by pos asc"); 
```

请参阅[文档](http://www.php.net/manual/en/function.mysql-query.php)：

> 返回值
> 
> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，**错误时返回 FALSE。**

您可以使用[`mysql_error`](http://www.php.net/manual/en/function.mysql-error.php)来知道错误是什么。

您还可以通过以下方式避免警告：

```
$result=mysql_query("SELECT * FROM navigation order by pos asc");

if ($result) {
    while($nav = mysql_fetch_array($result))
    {
    ...
    }
} 
```

*另请注意，[不鼓励](http://www.php.net/manual/en/function.mysql-query.php)`mysql`使用 PHP 扩展，并且可能会在未来版本中删除*

# signalr - 在 SignalR 中使用跟踪

> ID：13455111
> 
> 赞同：1
> 
> 时间：2012-11-19T13:46:18.737
> 
> 标签：signalr

如何在 PersistenConnection 上使用 Trace？

```
public class Connection : PersistentConnection
{
    protected override Task OnConnectedAsync(IRequest request, string connectionId)
    {
        Trace.TraceInformation("ConnectedAsync ConnectionId:{0}", connectionId);
        return base.OnConnectedAsync(request, connectionId);
    }
} 
```

如何附加 Trace 侦听器，以便 TraceInformation 调用中的信息变得可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:54:28.793

打开一切：

使用 Microsoft.AspNet.SignalR.Tracing；

```
public StockTickerHub(StockTicker stockTicker)
{
    _stockTicker = stockTicker;
    ITraceManager traceManager = GlobalHost.DependencyResolver.Resolve<ITraceManager>();
    traceManager.Switch.Level = SourceLevels.All;
} 
```

# android - 如何在模拟器上运行移动发起的呼叫 perl 脚本

> ID：13455114
> 
> 赞同：0
> 
> 时间：2012-11-19T13:46:30.213
> 
> 标签：android, perl, android-emulator

我试图在 Emulator 上运行 Mobile 发起的调用 perl 脚本，但在运行脚本时出错：

下面是脚本：

**mo_call.pl**

```
#!/usr/bin/perl -w
use strict;
use New_MO.pm; 
for(my $i=0; $i<=4;$i++)
{
  New_Mo::call_Originate();

  } 
```

**New_MO.pm**

```
package New_MO;

sub call_Originate
{
  system("adb -s $device_id shell service call phone 763726728");
  sleep 10; 
  system("adb -s $device_id shell input keyevent 4");
  system("adb -s $device_id shell input keyevent 3");

}  
1; 
```

我对这件事很陌生，所以如果可能的话，请让我知道我在哪里做错了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:55:28.217

你应该尝试使用

```
use New_MO; 
```

代替

```
use New_MO.pm; 
```

如果这没有帮助，请您分享您收到的错误消息吗？

# jquery - 带有下拉功能的jQuery onPage搜索

> ID：13455117
> 
> 赞同：1
> 
> 时间：2012-11-19T13:46:33.120
> 
> 标签：jquery, directory-tree

我正在通过 jQuery 创建一个页面搜索功能。搜索功能应该从输入字段中搜索字符串。如果没有任何匹配项，则应隐藏所有内容，如果找到某些内容，则应显示`li`上面所有父项的元素。

[直播](https://fbb.coserver.ch/deklarationen.html)中是这样的

这是我的代码：

```
$("#filter").keyup(function(){
    var filter = $(this).val(), count = 0;
    if(filter == '') {
        $("div#jQ-menus ul").not(".is-open, .main").fadeOut();
    } else {
        $("div#jQ-menus ul li").each(function(){
            if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                // if not relevant
                $(this).fadeOut();
            } else {
                // if relevant
                $(this).fadeIn();
                $(this).parents("ul").fadeIn();
                count++;
            }
        });
        var numberItems = count;
    }
}); 
```

所以有一个像这样的html输出：

```
<ul class="main">
    <li class="main">
    <span class="toggle" style="cursor: pointer;">+ FBB Werk Hinwil 2012</span>
    <ul style="display: none;">
        <li>
            <span class="toggle" style="cursor: pointer;">+ Fundationsschicht</span>
            <ul style="display: none;">
                <li>
            </ul>
        </li>
        <li>
            <span class="toggle" style="cursor: pointer;">+ Deckschicht</span>
            <ul style="display: none;">
        </li>
    </ul>
</ul> 
```

一切都很好。但是现在如果我打开一棵树然后我要搜索一些东西，它就可以了。然后，如果我删除搜索字符串，它应该像使用搜索功能之前一样显示相同的树。问题来了。所有的`li`都不能再点击了。也许我只是设置了一些错误的类，或者我这个搜索功能背后的逻辑不可靠。

我使用[目录树](http://demo.lateralcode.com/directory-tree/)来创建树。

有人可以在这里帮忙吗？

# android - 用于 Gmail 作曲家的 Jelly Bean 上的 ActivityNotFoundException 异常

> ID：13455118
> 
> 赞同：1
> 
> 时间：2012-11-19T13:46:35.117
> 
> 标签：android, android-4.2-jelly-bean

此类在 ICS 上运行良好，但`ActivityNotFoundException`在 Jelly Bean 上失败。你们知道为什么吗？谢谢你。

```
public class EmailSender {

    public static Intent getSendEmailIntent(Context context, String email,
                                            String subject, String body, File fileName, String chooserTitle) {

        final Intent emailIntent = new Intent(
                android.content.Intent.ACTION_SEND);

        //Explicitly only use Gmail to send
        emailIntent.setClassName("com.google.android.gm", "com.google.android.gm.ComposeActivityGmail");

        emailIntent.setType("plain/text");

        //Add the recipients
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                new String[]{email});

        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);

        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);

        //Add the attachment by specifying a reference to our custom ContentProvider
        //and the specific file of interest
        emailIntent.putExtra(
                Intent.EXTRA_STREAM,
                Uri.fromFile(fileName));

        return emailIntent;
    }
} 
```

在果冻豆上，我遇到了一个例外：

> 11-19 15:32:07.852: E/AndroidRuntime(19630): android.content.ActivityNotFoundException: 找不到明确的活动类 {com.google.android.gm/com.google.android.gm.ComposeActivityGmail}; 您是否在 AndroidManifest.xml 中声明了此活动？

如有需要，可全程跟踪：

> 11-19 15:32:07.852: E/AndroidRuntime(19630): android.content.ActivityNotFoundException: 找不到明确的活动类 {com.google.android.gm/com.google.android.gm.ComposeActivityGmail}; 您是否在 AndroidManifest.xml 中声明了此活动？11-19 15:32:07.852: E/AndroidRuntime(19630): 在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618) 11-19 15:32:07.852: E/AndroidRuntime(19630): 在 android. app.Instrumentation.execStartActivity(Instrumentation.java:1417) 11-19 15:32:07.852: E/AndroidRuntime(19630): 在 android.app.Activity.startActivityForResult(Activity.java:3370) 11-19 15:32: 07.852: E/AndroidRuntime(19630): 在 android.app.Activity.startActivityForResult(Activity.java:3331) 11-19 15:32:07.852: E/AndroidRuntime(19630): 在 android.support.v4.app.FragmentActivity .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:12:30.190

我建议不要使用意图直接打开 gmail 撰写活动。使用如此严格的意图意味着用户需要安装 gmail 才能使用您的应用程序。并非每个人都将 gmail 用于他们的邮件客户端。此外，通过对类名进行硬编码，您可以让自己对类名更改可能导致您的活动中断（这是您当前问题的原因）的实例开放

我反编译了 gmail 4.2 应用程序，发现 ComposeActivity 类名和路径发生了变化.. 现在是`com.android.mail.compose.ComposeActivity`

您应该使用允许用户使用他们选择的电子邮件应用程序的通用电子邮件意图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:51:22.857

仔细看看这条线

您是否在 AndroidManifest.xml 中声明了此活动

Perharps 你只是没有声明活动。

# php - 为什么在导入此 .sql 文件时出现错误“列计数与第 1 行的值计数不匹配”？

> ID：13455125
> 
> 赞同：0
> 
> 时间：2012-11-19T13:46:54.893
> 
> 标签：php, mysql, sql, import, create-table

```
CREATE TABLE `produtos` ( 
        `sku` varchar(255) NOT NULL DEFAULT '', 
        `_store` varchar(255) NOT NULL DEFAULT '', 
        `_attribute_set` varchar(255) NOT NULL DEFAULT '', 
        `_type` varchar(255) NOT NULL DEFAULT '', 
        `_category` varchar(255) NOT NULL DEFAULT '', 
        `_product_websites` varchar(255) NOT NULL DEFAULT '', 
        `name` varchar(255) NOT NULL DEFAULT '', 
        `price` varchar(255) NOT NULL DEFAULT '', 
        `small_image` varchar(255) NOT NULL DEFAULT '', 
        `special_price` varchar(255) NOT NULL DEFAULT '', 
        `qty` varchar(255) NOT NULL DEFAULT '', 
        `min_qty` varchar(255) NOT NULL DEFAULT '', 
        `use_config_min_qty` varchar(255) NOT NULL DEFAULT '', 
        `is_qty_decimal` varchar(255) NOT NULL DEFAULT '', 
        `backorders` varchar(255) NOT NULL DEFAULT '', 
        `use_config_backorders` varchar(255) NOT NULL DEFAULT '', 
        `min_sale_qty` varchar(255) NOT NULL DEFAULT '', 
        `use_config_min_sale_qty` varchar(255) NOT NULL DEFAULT '', 
        `max_sale_qty` varchar(255) NOT NULL DEFAULT '', 
        `use_config_max_sale_qty` varchar(255) NOT NULL DEFAULT '', 
        `is_in_stock` varchar(255) NOT NULL DEFAULT '', 
        `notify_stock_qty` varchar(255) NOT NULL DEFAULT '', 
        `use_config_notify_stock_qty` varchar(255) NOT NULL DEFAULT '', 
        `manage_stock` varchar(255) NOT NULL DEFAULT '', 
        `use_config_manage_stock` varchar(255) NOT NULL DEFAULT '', 
        `use_config_qty_increments` varchar(255) NOT NULL DEFAULT '', 
        `qty_increments` varchar(255) NOT NULL DEFAULT '', 
        `use_config_enable_qty_increments` varchar(255) NOT NULL DEFAULT '', 
        `enable_qty_increments` varchar(255) NOT NULL DEFAULT '', 
        `_links_related_sku` varchar(255) NOT NULL DEFAULT '', 
        `_links_related_position` varchar(255) NOT NULL DEFAULT '', 
        `_links_crosssell_sku` varchar(255) NOT NULL DEFAULT '', 
        `_links_crosssell_position` varchar(255) NOT NULL DEFAULT '', 
        `_links_upsell_sku` varchar(255) NOT NULL DEFAULT '', 
        `_links_upsell_position` varchar(255) NOT NULL DEFAULT '', 
        `_associated_sku` varchar(255) NOT NULL DEFAULT '', 
        `_associated_default_qty` varchar(255) NOT NULL DEFAULT '', 
        `_associated_position` varchar(255) NOT NULL DEFAULT '', 
        `_tier_price_website` varchar(255) NOT NULL DEFAULT '', 
        `_tier_price_customer_group` varchar(255) NOT NULL DEFAULT '', 
        `_tier_price_qty` varchar(255) NOT NULL DEFAULT '', 
        `_tier_price_price` varchar(255) NOT NULL DEFAULT ''
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `produtos` VALUES   
('RBA01,,Default,simple,Resinas,base,\"Resina: Acrílica Base Água [01 Kg]\",18.9000,/r/e/resina_base_agua_thumb.png,14.9000,0.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,0,,1,0,1,1,0.0000,1,0,,,,,,,,,,,,,'), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:50:16.230

您在 INSERT 中的值在 '' 内，并且是该命令的单个字符串。

详细说明：错误

```
Column count doesn't match value count 
```

意味着 INSERT 命令没有相同数量的值和列。在您的示例中，插入命令具有列的默认值，因为您没有通知任何内容，因此它将尝试在所有列中插入数据，但由于您的值在“”内，因此它被视为单个字符串。

# mysql - VS2012 中的 MySql 和实体框架 - 无法选择提供者

> ID：13455126
> 
> 赞同：2
> 
> 时间：2012-11-19T13:47:03.867
> 
> 标签：mysql, entity-framework-5, mysql-connector

我正在尝试使用带有 Visual Studio 2012 的 .Net 4.5 中的 EntityFramework 5 为现有 MySQL 数据库编写数据访问层。我在 Visual Studio 2012 nuget 控制台中运行了以下 nuget 命令以开始使用：

```
Install-Package EntityFramework
Install-Package MySQL.Data.Entities 
```

但是，当我尝试添加 Ado.Net 实体数据模型和“从数据库生成”，然后添加“新连接”时，MySQL 提供程序未在“数据源”列表框中列出，也未在“数据”中可用提供者”组合框。

我错过了一些简单的东西吗？我正在编写一个类库.. 但我在控制台应用程序中尝试了这些相同的步骤，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:32:08.400

我从 Gabriela Martinez 那里得到了这个指示：

> MySQL 的 nuget 包来自社区中的某个人，不完全受支持。要使 Visual Studio 界面与 Entity Framework 正常工作，建议开发人员安装 MySQL 连接器工具的 MSI。

安装之后，我可以开始在 Entity Framework 中运行 MySQL，没有任何问题。

# javascript - JavaScript 似乎不等待返回值

> ID：13455134
> 
> 赞同：30
> 
> 时间：2012-11-19T13:47:54.240
> 
> 标签：javascript, asynchronous, callback, asynccallback

我已经为此苦苦挣扎了一段时间。我是 Javascript 的新手，并且一直认为我编写的代码一直在异步运行。这是一个通用示例：

我在函数 a 中运行了一些代码。然后函数 A 调用函数 B，后者需要将一个变量返回给 A，以便 A 可以在以后的操作中使用它。似乎当 A 调用 B 时，它仍然继续运行自己的代码，而不是等待它的返回值被阻塞，并且 B 的速度不够快，以至于 A 最终到达了它需要使用返回值的点值，我得到一个**未定义的变量类型错误**。

我解决这个问题的方法是让函数 A 调用函数 B，然后调用函数 C，该函数 C 将执行 A 对返回值执行的后续操作......我有点通过调用序列化我的代码而不是退货……虽然这很麻烦……

这是在实际代码中发生的示例：

```
function initialize() {
    //Geocode Address to obtin Lat and Long coordinates for the starting point of our map
    geocoder = new google.maps.Geocoder();
    var results = geocode(geocoder);
    makeMap(results[0].geometry.location.lat(), results[0].geometry.location.lng());

}

function geocode(geocoder) {
    //do geocoding here...

    var address = "3630 University Street, Montreal, QC, Canada";
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
           return results;
            }
         else {
            alert("Geocode was not successful for the following reason: " + status);
        }
   });

}

function makeMap(lat, long) {
  //  alert(lat); for debuging
    var mapOptions = {
        center: new google.maps.LatLng(lat, long),
        zoom: 17,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
     map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
} 
```

**注意：** initialize 在我的 html 中被 body onload="initialize()" 调用。

所以问题是 makeMap 需要通过 Geocode 函数获得的纬度和经度值，但是我在控制台中收到一个错误，说结果是未定义的。到底是怎么回事？我来自 Java，所以我对 JS 中的数据流是如何发生的有点困惑！这将是未来的宝贵经验！

**附带的问题：**我应该如何在外部脚本中拆分我的函数？什么被认为是好的做法？我应该将所有函数都塞进一个外部 .js 文件中，还是应该将类似的函数组合在一起？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-19T13:57:10.490

您似乎对问题有很好的理解，但听起来您不熟悉解决问题的方法。解决此问题的最常见方法是使用回调。这基本上是等待返回值的异步方式。以下是在您的情况下如何使用它：

```
function initialize() {
    //Geocode Address to obtin Lat and Long coordinates for the starting point of our map
    geocoder = new google.maps.Geocoder();
    geocode(geocoder, function(results) {
        // This function gets called by the geocode function on success
        makeMap(results[0].geometry.location.lat(), results[0].geometry.location.lng());        
    });
}

function geocode(geocoder, callback) {
    //do geocoding here...

    var address = "3630 University Street, Montreal, QC, Canada";
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            // Call the callback function instead of returning
            callback(results);
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
   });

}

... 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-19T13:54:22.660

> 我……一直觉得我写的代码一直在异步运行。

是的，它确实。您的`geocode`函数*无法*将调用结果返回给 Google API，因为该函数会在 Google 调用完成之前返回。请参阅下面的注释：

```
function geocode(geocoder) {
    //do geocoding here...

    var address = "3630 University Street, Montreal, QC, Canada";
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
           // +---------- This doesn't return anything from your
           // v           geocode function, it returns a value from the callback
           return results;
            }
         else {
            alert("Geocode was not successful for the following reason: " + status);
        }
   });
} 
```

相反，您必须对`geocode`函数进行编码，以便它接受一个回调，当它有结果时将调用该回调。例如：

```
// Added a callback arg ---v
function geocode(geocoder, callback) {
    //do geocoding here...

    var address = "3630 University Street, Montreal, QC, Canada";
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
           // v---------- Call the callback
           callback(results);
            }
         else {
            alert("Geocode was not successful for the following reason: " + status);
            callback(null); // <--- Call the callback with a flag value
                            // saying there was an error
        }
   });
} 
```

然后，而不是像这样使用它：

```
var results = geocode(someArgHere);
if (results) {
    doSomething(results);
}
else {
    doSomethingElse();
} 
```

你这样称呼它：

```
geocode(someArgHere, function() {
    if (results) {
        doSomething(results);
    }
    else {
        doSomethingElse();
    }
}); 
```

例如，你*完全*异步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T13:54:39.570

匿名函数内部的 return 语句从匿名函数返回，而不是从外部地理编码函数返回。地理编码函数返回未定义。geocoder.geocode 方法可以随时调用匿名函数，同步或异步。检查文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T13:55:21.317

实际上，您正确地意识到调用是异步的，并且您没有得到正确的返回值。

通常，在js中调用函数时，它们是同步的。

```
e.g. a() calls b(), and a() waits until b() to finish before continuing. 
```

但是，在某些情况下，例如进行 ajax 或 jsonp 调用，它是异步完成的。这正是您调用`geocode()`.

您的执行：

```
initialize() is called;
initialize() calls geocoder();
geocoder makes a request to Google, and returns null in the meantime.
initialze() calls makemap()
the Google geocoder returns at some point, and executed the success callback, which you have defined as "return results;", but there is nothing to return, since the function has already ended. 
```

因此，具体来说，利用地理编码器调用中已经内置的回调：

```
if (status == google.maps.GeocoderStatus.OK) {
    makeMap(results);
} 
```

# sql - 用于查找分组的 SQL 查询

> ID：13455138
> 
> 赞同：0
> 
> 时间：2012-11-19T13:48:05.543
> 
> 标签：sql, sql-server-2008-r2

我有一张如下表

```
studentID Subject
   1       Sub1
   2       Sub1
   3       Sub1
   4       Sub1
   1       Sub2
   2       Sub2
   4       Sub2
   1       Sub3
   3       Sub3
   4       Sub3 
```

我需要对具有相同主题集的学生进行分组。只需为具有相同主题集的学生提供一个唯一的组 ID。

所以这里的学生 id (1) 和 (4) 会说 group id = 1

学生 id 2 - 组 id = 2（没有其他人只有 sub 1 和 sub 2）

学生 ID 3 - 组 ID = 3

结果应该像

```
 studentid groupid
     1        1
     4        1
     2        2
     3        3 
```

我编写了一个 sqlquery，它使用 FORXML 将学生的所有科目分组到单个列，然后在该列上使用 group by，然后将排名与它们相关联。有一个更好的方法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:54:02.107

这是一种方法。

对于每个学生，找到具有相同课程集的所有其他学生。您可以使用以下规则来执行此操作。两个学生有相同的课程（1）他们每个人的课程数量相同；（2）他们共有的课程数量与课程数量相同。

该实现使用排名函数来查找课程数量和加入/分组依据来计算两个不同学生的共同数量。

之后，组 id 就是此表中的对中的最小学生 id。

```
select s1.StudentId, MIN(SameAsStudentId) as groupid
from (select s1.StudentId as StudentId, s2.StudentId as SameAsStudentId
      from (select ss.*, COUNT(*) over (studentId) as NumSubjects
            from ss
           ) s1 join
           (select ss.*, COUNT(*) over (studentId) as NumSubjects
            from ss
           ) s2
           where s1.Subject = s2.Subject
      group by s1.StudentId, s2.StudentId
      having s1.NumSubjects = s2.NumSubjects and
             COUNT(*) = s1.NumSubjects
     ) t
group by StudentId 
```

如果您想要没有“漏洞”的 groupid，您可以包装一个`dense_rank`用于分配组 id 的外部查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:14:16.060

处理此问题的一种方法是为主题创建位掩码。首先为每个主题分配不同的、任意的 2 次幂：

```
Subject  Value
Sub1         1
Sub2         2
Sub3         4 
```

现在您可以对每个学生的科目值求和。每个科目组合都将具有独特的价值。需要注意的是，如果主题数量太大，您可能会遇到数字溢出。

您甚至可以在单个查询中执行此操作：

```
Select StudentID, sum(Subject_Value)
from Student_Subjects ss join
     (select distinct subject, 
                      power(2,dense_rank() 
                              over (order by subject)-1) as Subject_Value 
      from Student_Subjects) sv 
  on ss.subject = sv.subject
group by StudentID 
```

# c++ - Pointer->Call() 和 (*Pointer).Call() 之间的区别

> ID：13455139
> 
> 赞同：2
> 
> 时间：2012-11-19T13:48:08.730
> 
> 标签：c++, function, pointers, call, dereference

> **可能重复：**
> [ptr->hello(); /* VERSUS */ (*ptr).hello();](https://stackoverflow.com/questions/447543/ptr-hello-versus-ptr-hello)

我正在学习 C++，我的问题是使用箭头运算符 ( ) 或取消引用调用函数`->`的指针之间是否有任何区别。`*`

这两个案例说明了我的问题。

```
Class* pointer = new Class();
(*pointer).Function();         // case one
pointer->Function();           // case two 
```

有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T13:49:56.350

如果运算符`*`和`->`没有重载，则两个版本的效果相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T13:59:06.320

Given

```
Class* pointer = new Class(); 
```

Then

```
(*pointer).Function();         // case one 
```

dereferences the pointer, and calls the member function `Function` on the referred to object. It does not use any overloaded operator. Operators can't be overloaded on raw pointer or built-in type arguments.

```
pointer->Function();           // case two 
```

This does the same as the first one, using the built-in `->` because `pointer` is a *raw pointer*, but this syntax is better suited for longer chains of dereferencing.

Consider e.g.

```
(*(*(*p).pSomething).pSomethingElse).foo() 
```

versus

```
p->pSomething->pSomethingElse->foo() 
```

The `->` notation is also more obvious at a glance.

# layout - VariableSizedWrapGrid 中不同大小的项目

> ID：13455142
> 
> 赞同：0
> 
> 时间：2012-11-19T13:48:20.677
> 
> 标签：layout, winrt-xaml

我正在开发的应用程序使用分组的 GridView。不同的模板用于显示的不同项目，这导致布局出现问题，因为 VariableSizedWrapGrid 根据每个组中的第一项设置行和列大小。

我尝试使用通常建议的 PrepareContainerForItemOverride 解决方案，但遇到了两个问题：

1.  似乎我只能围绕列和行跨度的倍数调整高度和宽度。如果项目 #2 需要 1.5 x 项目 #1 的行高，那么这会给我留下相当多的空间浪费。我似乎还必须“猜测”最合适的倍数是什么，这在应用程序应该动态扩展时似乎不合适。

2.  如果我得到的倍数太大，则内容水平和垂直居中。我已经尝试在不同的地方将对齐方式从拉伸更改为左，但我找不到要设置哪个控件属性以使其正常工作。

有没有比网格跨度更好的方法来调整项目大小？如果没有，是否有更好的方法让我用可变大小的项目来布置我的内容？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:10:54.987

[http://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/)包括完美完成工作的 WrapPanel。它水平或垂直堆叠单个项目，并根据需要包装到下一行/列。

# python - 访问python类变量的正确方法是什么？

> ID：13455143
> 
> 赞同：0
> 
> 时间：2012-11-19T13:48:21.197
> 
> 标签：python, class-variables

上课

```
class A(object):
    z = 0

    def Func1(self):
        return self.z

    def Func2(self):
        return A.z 
```

两种方法 (`Func1`和`Func2`) 给出相同的结果，并且仅包含在此人工示例中以说明如何解决的两种可能方法`z`。

的结果`Func*`只有在实例会`z`使用类似`self.z = None`.

使用or`z`的语法访问类变量的正确 python 方法是什么？`Func1``Func2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:50:04.420

我想说访问变量的正确方法很简单：

```
a_instance.z  #instance variable 'z'
A.z           #class variable 'z' 
```

不需要`Func1`和`Func2`这里。

* * *

作为旁注，如果您*必须*写`Func2`，似乎 a`classmethod`可能是合适的：

```
@classmethod
def Func2(cls):
    return cls.z 
```

* * *

最后一点，您在方法中使用哪个版本（`self.z`vs. `A.z`vs. `cls.z`with `classmethod`）实际上取决于您希望 API 的行为方式。您是否希望用户能够`A.z`通过设置实例属性来进行遮蔽`z`？如果是这样，那么使用`self.z`. 如果你不想要那种阴影，你可以使用`A.z`. 方法需要`self`吗？如果不是，那么它可能是一个类方法等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:52:07.053

我通常会使用`self.z`，因为如果存在具有不同值的子类，`z`它将选择“正确”的子类。不这样做的唯一原因是，如果您知道`A`尽管有该版本，您将始终想要该版本。

通过 self 或通过 classmethod 访问（请参阅 mgilson 的答案）也有助于创建 mixin 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T00:17:55.533

如果您不关心价值破坏之类的事情，那么您可以使用`self.z`. 否则，`A.z`无疑会评估到类变量。`B`但是，请注意如果子类重新定义`z`但**不** 重新定义会发生什么`Func2`：

```
class B(A):
    z = 7

b = B()
b.Func2()  # Returns 0, not 7 
```

毕竟，这是很合乎逻辑的。因此，如果您想以某种方式以*多态*方式访问类变量，您可以执行以下操作之一：

```
self.__class__.z
type(self).z 
```

[根据文档](http://docs.python.org/release/2.7.3/reference/datamodel.html#new-style-and-classic-classes)，第二种形式不适用于旧式类，因此第一种形式通常在 Python 2.x 版本中更兼容。然而，对于新式类，第二种形式是最安全的，因此，对于 Python 3.x，类可能会重新定义`__class__`属性。

# c++ - 工厂返回 boost::visitor 对象

> ID：13455150
> 
> 赞同：1
> 
> 时间：2012-11-19T13:48:38.057
> 
> 标签：c++, boost, c++98

我希望创建一个访问者工厂，它返回以下任一类型的对象：

```
class Visitor1: public boost::static_visitor<int>
{
public:
    int operator()(int& ) const 
    {
        return 1;
    }

    int operator()(bool& ) const 
    {
        return 1;
    }
};

class Visitor2: public boost::static_visitor<int>
{
public:
    int operator()(int& ) const 
    {
        return 2;
    }

    int operator()(bool& ) const 
    {
        return 2;
    }
}; 
```

我假设我可以为工厂创建的对象返回一个 boost::static_visitor* 类型的指针，但这不会编译。我也不能引用该对象，如下所示：

```
Visitor1 v;
Type t;
boost::static_visitor<int>& vR = v;
boost::apply_visitor(vR, t); 
```

我得到的错误是：

```
see reference to function template instantiation 'int boost::apply_visitor<boost::static_visitor<R>,Type>(Visitor &,Visitable &)' being compiled
1>          with
1>          [
1>              R=int,
1>              Visitor=boost::static_visitor<int>,
1>              Visitable=Type
1>          ]
1>c:\boost_1_49_0\boost\variant\variant.hpp(858): error C2064: term does not evaluate to a function taking 1 arguments 
```

我应该如何实现我的工厂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:45:22.690

访问者使用重载，这意味着它们是静态组件。工厂总是（？）意味着运行时组件。首先，重要的是确定所有派生访问者是否共享同一组重载。如果是这样，您可以使用此方案：

```
#include <memory>

#include <boost/variant.hpp>
#include <boost/variant/static_visitor.hpp>

struct visitor_base : public boost::static_visitor<int>
{
  virtual int operator()(int) = 0;
  virtual int operator()(double) = 0;
  virtual int operator()(const char*) = 0;
  virtual ~visitor_base() {}
};

struct impl_1 : visitor_base {
  virtual int operator()(int) { return 1; }
  virtual int operator()(double) { return 1; }
  virtual int operator()(const char*) { return 1; }
};

struct impl_2 : visitor_base {
  virtual int operator()(int) { return 2; }
  virtual int operator()(double) { return 2; }
  virtual int operator()(const char*) { return 2; }
};

std::unique_ptr<visitor_base> visitor_factory(int i) {
  if(i == 1) {
    return std::unique_ptr<visitor_base>(new impl_1);
  } else {
    return std::unique_ptr<visitor_base>(new impl_2);
  }
}

int main()
{
  auto vis = visitor_factory(1);
  boost::variant<int, double, const char*> v = 3;
  std::cout << boost::apply_visitor(*vis, v) << std::endl;
  auto vis2 = visitor_factory(2);
  std::cout << boost::apply_visitor(*vis2, v) << std::endl;

  return 0;
} 
```

如果您的派生访问者仅打算应用于变体中可能类型的子集，则您不能使用纯虚函数，并且需要一些报告失败的机制来处理基中的值（例如异常）。

当然，示例代码中使用的少数 C++11 功能很容易替换。

```
#include <memory>
#include <string>

#include <boost/variant.hpp>
#include <boost/variant/static_visitor.hpp>

struct visitor_base : public boost::static_visitor<int>
{
  // the catch all
  template <typename T>
  int operator()(const T& t) {
    return 0;
  }

  virtual int operator()(int) {}
  virtual int operator()(double) {}
  virtual int operator()(const char*) {}

  virtual ~visitor_base() {}
};

struct impl_1 : visitor_base {
  virtual int operator()(int) { return 1; }
  virtual int operator()(double) { return 1; }
  virtual int operator()(const char*) { return 1; }
};

struct impl_2 : visitor_base {
  virtual int operator()(int) { return 2; }
  virtual int operator()(double) { return 2; }
  virtual int operator()(const char*) { return 2; }
};

std::unique_ptr<visitor_base> visitor_factory(int i) {
  if(i == 1) {
    return std::unique_ptr<visitor_base>(new impl_1);
  } else {
    return std::unique_ptr<visitor_base>(new impl_2);
  }
}

int main()
{
  auto vis = visitor_factory(1);
  boost::variant<int, double, const char*> v = 3;
  std::cout << boost::apply_visitor(*vis, v) << std::endl;
  auto vis2 = visitor_factory(2);
  std::cout << boost::apply_visitor(*vis2, v) << std::endl;

  // a variant with more than impl_1 and impl_2 can catch
  boost::variant<int, double, const char*, std::string> vv = std::string{"asdf"};
  std::cout << boost::apply_visitor(*vis2, vv) << std::endl;
  // no use one that we handle
  vv = 3;
  std::cout << boost::apply_visitor(*vis2, vv) << std::endl;
  return 0;
} 
```

# firefox - 所有 Firefox 和 Chrome 扩展的列表

> ID：13455151
> 
> 赞同：0
> 
> 时间：2012-11-19T13:48:38.170
> 
> 标签：firefox, google-chrome, google-chrome-extension, firefox-addon

有谁知道我如何获得 Firefox 和 Chrome 的所有扩展的列表？
我不想要一个可以用来转储我所有扩展的插件，我想要 Firefox 和 Chrome 的所有可用扩展。
我想要什么数据，最好是应用程序的名称和开发人员的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:01:15.320

我不相信这两种浏览器的所有扩展都有一个有组织的列表，因为它们的扩展和它们一样多。所以，我唯一的答案是查看他们的扩展页面（见下文）。

铬：[https ://chrome.google.com/webstore/category/extensions](https://chrome.google.com/webstore/category/extensions)

火狐：[https ://addons.mozilla.org/en-US/firefox/extensions/?sort=featured](https://addons.mozilla.org/en-US/firefox/extensions/?sort=featured)

# sublimetext2 - sublime text 2 - 缩小或美化 HTML 的方法

> ID：13455153
> 
> 赞同：17
> 
> 时间：2012-11-19T13:48:42.927
> 
> 标签：sublimetext2, unminify

我发现自己粘贴了大量缩小的代码，即全部在一行上。

与其手动扫描它并添加换行符以使其可读，Sublime 中是否有一个选项可以做到这一点，或者一个插件？

例如，我有这个（虽然更长）：

`<html><head><title>some title</title></head><body><div><span>some content</span></div></body></html>`

我想结束这个，而不是花半个小时在我的键盘上按 enter：

```
<html>
  <head>
    <title>some title</title>
  </head>
  <body>
    <div>
      <span>some content</span>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T13:57:32.853

If you have the [Package Manager](http://wbond.net/sublime_packages/package_control) installed in you can install the `Tidy HTML` package.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-29T12:46:14.280

Sublime Text 2 的整洁 HTML

[HTML-CSS-JS Prettify](https://sublime.wbond.net/packages/HTML-CSS-JS%20Prettify) for Sublime Text 3

# c - LLVM C API。如何确定 LLVMValueRef 是整数还是指针类型？

> ID：13455155
> 
> 赞同：3
> 
> 时间：2012-11-19T13:48:53.457
> 
> 标签：c, llvm

我正在使用 LLVM C api 编写一些 C 代码。我需要检查指令值是类型`int`还是指针。我试图做的是使用`LLVMTypeOf(LLVMValueRef val)`并查看它是否等于所有不同类型的`int`: `LLVMInt1Type()`, `LLVMInt8Type()`,`LLVMInt16Type()`等。我不知道如何确定它是否是指针类型，但我认为我的方法是使用来查看它是否是一个整数也不起作用。

这是我一直在引用的 API：http: [//llvm.org/doxygen/modules.html](http://llvm.org/doxygen/modules.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-03T15:26:56.073

在 c 中，您可以使用 LLVMGetTypeKind 和 LLVMTypeOf 来确定它是什么类型。

对于整数类型，您可以检查：

```
if(LLVMGetTypeKind(LLVMTypeOf(LLVMValueRef val))==LLVMIntegerTypeKind) 
```

对于指针类型，您可以检查：

```
if(LLVMGetTypeKind(LLVMTypeOf(LLVMValueRef val))==LLVMPointerTypeKind) 
```

枚举参考：[LLVMTypeKind](http://llvm.org/doxygen/group__LLVMCCoreTypes.html#ga2da643b0ebe215106a07c8e03f3ad8d8 "枚举 LLVMTypeKind")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:20:43.093

C API 非常有限。

我认为您必须自己使用 C++ API 或将 C++ API 包装到 C API。

例如，

```
extern "C" int LLVMTypeIsPointerTy(LLVMTypeRef ty){
      return ((llvm::Type*)ty)->isPointerTy();
} 
```

# asp.net - Log4net 不在线登录

> ID：13455159
> 
> 赞同：3
> 
> 时间：2012-11-19T13:49:08.447
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, log4net

我正在尝试使用 log4net 在我的 MVC 4 网站上记录错误。它离线工作正常，但是当我们发布网站时，log4net 甚至不创建日志文件。

这是 Web.config 代码：

```
 <log4net>
    <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
      <file value="mylog.txt"/> 
      <appendToFile value="true"/>
      <layout type="log4net.Layout.PatternLayout">
        <header value="**"/>
        <footer value="**"/>
        <conversionPattern value="%newline%date [%thread] %-5level %logger - %message%newline" />
      </layout>
    </appender>

    <root>
      <level value="ALL"/>
      <appender-ref ref="LogFileAppender"/>
    </root>
  </log4net> 
```

我将此添加到大会：

```
[assembly: log4net.Config.XmlConfigurator(Watch = true)] 
```

这是我调用记录器的代码：

```
public void logInfo(string message)
{
    log4net.Config.XmlConfigurator.Configure();
    logger.Info(message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:18:09.770

这是 bcoz，根文件夹没有您尝试创建日志文件的写入权限。

提供写权限的步骤： 1）右键单击“文件夹” 2）转到属性 3）单击安全性 4）单击添加->添加所有人->检查完全控制。现在可以正常工作了。

# c# - 如何处理带有空参数的 ScriptManager AddHistoryPoint？

> ID：13455164
> 
> 赞同：2
> 
> 时间：2012-11-19T13:49:18.497
> 
> 标签：c#, asp.net, browser-history, scriptmanager

我有一个 EnableHistory 设置为“True”的 ScriptManager。我使用 AddHistoryPoint 方法为页面上的某些过滤器保存过滤器术语。

例如：

```
this.ScriptManager.AddHistoryPoint("filterterm", "somevalue"); 
```

所以浏览器中的地址栏显示类似

```
.../mypage.aspx?id=1#&&filterterm=somevalue 
```

它工作得很好，除非我删除所有过滤器，所以我需要在没有键的情况下保存历史记录点（换句话说，使用 string.Empty 键）

发生这种情况时，浏览器中的地址栏会显示：

```
.../mypage.aspx?id=1# 
```

注意空锚。它使页面的滚动位置重置到顶部。这很烦人。

你知道解决这个问题的任何方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:23:43.167

目前我使用的不是最好的解决方案，但至少它有效。我添加了一个虚拟参数，它是在添加过滤条件时添加的。并且当所有过滤条件都被删除时，虚拟参数将留在 URL 中，因此滚动位置不会被重置。

```
this.ScriptManager.AddHistoryPoint("filter", "1"); 
```

注意：解析参数器时应忽略虚拟参数。

# lotus-notes - Lotus Notes 代理

> ID：13455165
> 
> 赞同：2
> 
> 时间：2012-11-19T13:49:20.707
> 
> 标签：lotus-notes, agent, lotusscript

在哪里可以找到有关 Lotus Notes 代理的出色在线参考资料。我目前在同时拥有代理和理解代理、它是如何工作的、最佳实践等方面遇到问题？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:10:55.937

> 我目前有同时代理的问题

根据此评论，我认为您正在运行计划代理？

调度代理的工作方式是一次只能运行来自特定数据库的一个代理，即使您有多个代理管理器 (AMGR) 线程也是如此。代理也不能少于每 5 分钟运行一次。UI 会让你输入一个较小的数字，但它会改变它。

要考虑的其他因素是您的代理将运行多长时间。如果它运行的时间更长，那么您设置的间隔时间将最终积压运行时间。此外，服务器可以配置为杀死运行一段时间的代理。因此，您需要确保代理在该时间范围内运行。

现在绕过所有这些，您可以从 Domino 控制台执行代理，如下所示。

```
tell amgr run "database.nsf" 'agentName' 
```

这将在调度程序之外的自己的线程中运行。因此，您可以创建一个程序文档以在不到 5 分钟的时间间隔内执行一个代理，并在同一数据库中创建多个代理。

但是，这样做很危险，因为您必须注意许多问题。

1.  由于代理不受调度程序的控制，因此您无法像在调度程序中那样杀死它。

2.  运行多个线程会占用更多进程。因此，虽然如果代理运行时间比计划长，调度程序将积压所有内容，但在这种情况下执行程序文档会使服务器崩溃。

3.  您需要了解代理在数据库中所做的事情，这样它就不会干扰同一数据库中的任何其他代理，并且可以在并行运行两次时应对。

有关这方面的更多阅读材料：

**提高代理管理器性能。** [http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin.doc/DOC/H_AGENT_MANAGER_NOTES_INI_VARIABLES.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin.doc/DOC/H_AGENT_MANAGER_NOTES_INI_VARIABLES.html)

**代理管理器故障排除。** [http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin.doc/DOC/H_ABOUT_TROUBLESHOOTING_AGENTS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin.doc/DOC/H_ABOUT_TROUBLESHOOTING_AGENTS.html)

**故障排除代理**（旧材料但仍然相关） [http://www.ibm.com/developerworks/lotus/library/ls-Troubleshooting_agents/index.html](http://www.ibm.com/developerworks/lotus/library/ls-Troubleshooting_agents/index.html)

...和相关的技术说明：

**标题：如何使用包装代理在同一数据库中同时运行两个代理** [http://www.ibm.com/support/docview.wss?uid=swg21279847](http://www.ibm.com/support/docview.wss?uid=swg21279847)

**标题：如何使用程序文档在同一数据库中运行多个代理** [http://www.ibm.com/support/docview.wss?uid=swg21279832](http://www.ibm.com/support/docview.wss?uid=swg21279832)

# amazon-s3 - 有没有办法 touch() Amazon S3 中的文件？

> ID：13455168
> 
> 赞同：33
> 
> 时间：2012-11-19T13:49:32.923
> 
> 标签：amazon-s3, metadata, last-modified

我目前正在使用[Amazon S3](http://aws.amazon.com/s3/)，并且正在编写一个使用修改日期的程序。我正在寻找一种方法来编辑修改后的日期。

我可以遍历所有文件并按原样保存它们，但这听起来像是一个糟糕的解决方案。

在 PHP 中有这个函数[touch()](http://php.net/manual/en/function.touch.php)。

有没有人知道解决方案，或者有同样的问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-05-27T06:02:37.063

回应@Daniel Golden 对@tkotisis 回答的评论。看起来至少 AWS CLI 工具不允许您将项目复制到自身。但是，您可以通过更新元数据来“强制”复制。

```
$ aws s3 cp --metadata '{"touched":"now"}' s3://path/to/object s3://path/to/object 
```

这将重新创建对象（下载到调用者并重新上传）替换其内容、所有者和元数据。这也将触发任何附加的 Lambda 事件。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-19T16:26:46.473

您可以通过[复制对象](http://docs.amazonwebservices.com/aws-sdk-php-2/latest/class-Aws.S3.S3Client.html#_copyObject)请求来实现相同的目的，将 CopySource 指定为与​​目标键相同。

本质上，这将使用相应的源和目标存储桶/密钥向 S3发出[PUT Object - COPY请求。](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectCOPY.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-06T23:47:47.047

这是将空（或 o 字节）文件上传到 S3 的另一个原因。我验证了这个工作您还可以使用 S3 API 上传没有正文的文件，如下所示：

```
aws s3api put-object --bucket "myBucketName" --key "dir-1/my_null_file" 
```

通常你会指定一个`--body`blob，但它的选项只会按预期添加键。查看更多关于[S3 API put-object](https://docs.aws.amazon.com/cli/latest/reference/s3api/put-object.html#examples)

测试的 AWS CLI 版本是：`aws-cli/2.0.4 Python/3.7.5 Windows/10 botocore/2.0.0dev8`

以下是我在 PHP 中的做法（即使在过时的 5.4 中也可以使用，不得不退回）：

```
// Init an S3Client
$awsConfig = $app->config('aws');
$aws       = Aws::factory($awsConfig);
$s3Bucket  = $app->config('S3_Bucket');
$s3Client  = $aws->get('s3');

// Set null/empty file.
$result = $s3Client->putObject([
    'Bucket' => $s3Bucket,
    'Key' => "dir-1/my_null_file",
    'Body' => '',
    'ServerSideEncryption' => 'AES256',
]); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-11T13:47:06.280

我发现自己在测试时经常执行复制技巧，以至于我在 .bashrc 中添加了一个方便的功能：

```
s3-touch() {
  aws s3 cp \
    --metadata 'touched=touched' \
    --recursive --exclude="*" \
    --include="$2" \
    "${@:3}" \
    "$1" "$1"
} 
```

示例用法：

```
# will do a dryrun on a copy operation
s3-touch s3://bucket/prefix/ "20200311*" --dryrun

# the real thing, creating events for all objects
# in s3://bucket/prefix/ that start with 20200311
s3-touch s3://bucket/prefix/ "20200311*" 
```

我这样做主要是为了我想要触发的 S3 事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-29T09:47:01.137

在@g-io 回答简化了我的一天之后，这是另一个版本，可以轻松触摸单个文件

```
s3-touch-single() {
  aws s3 cp \
    --metadata 'touched=touched' \
    "${@:3}" \
    "$1" "$1"
} 
```

例如，循环我们需要接触的文件数组：

```
paths=("mydir/image.png" "mydir2/image2.png")
for i in "${paths[@]}"; do s3-touch-single "s3://my-bucket/$i"; done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-17T16:39:33.640

查看[https://github.com/emdgroup/awscli-s3touch](https://github.com/emdgroup/awscli-s3touch)

它是添加`touch`命令的 AWS CLI 插件。

用法：

```
aws s3 touch my-bucket --prefix myfolder/ 
```

它通过读取附加到存储桶的事件并在客户端模拟它们来工作。

# android - 设置在 Android 上下文菜单中选择的项目

> ID：13455174
> 
> 赞同：1
> 
> 时间：2012-11-19T13:49:57.353
> 
> 标签：android, testing, contextmenu

在我的活动中，我有一个带有已注册 ContextMenu 的 GridView。现在我想测试这个 Activity，因此我`performLongClick()`在 GridView 的第一个孩子上说并且上下文菜单打开。现在我想按此菜单中的第一个条目，可以这样做吗？

```
public class TestClass extends extends ActivityInstrumentationTestCase2<MainActivity> {
    public void testMe() {
        final GridView gv = getActivity().findViewById(R.id.some_id);
        getActivity().runOnUiThread(new Runnable() {
            public void run() {
                gv.getChildAt(0).performLongClick();
            }
        });
        getInstrumenttation().waitForIdleSync();

        //Registered Context Menu opens

        //????some method to get contextMenu and press first item
        //getActivity().getContextMenu().performClick(0); <---
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:16:29.617

好的，我通过在我的 MainActivity 中覆盖“onCreateContextMenu（ContextMenu menu，View v，ContextMenuInfo info）”并将菜单设置为全局变量来解决我的问题。之后，我可以在我的测试类中检索 ContextMenu 并执行单击：

```
public void testDelete() {
    performLongClick(gv.getChildAt(1));

    final ContextMenu contextMenu = getActivity().getContextMenu();
    assertTrue(contextMenu != null);

    getActivity().runOnUiThread(new Runnable() {
        public void run() {
            contextMenu.performIdentifierAction(R.id.menuItemId, 0);
        }
    });
    getInstrumentation().waitForIdleSync();
} 
```

# xpath - 返回具有特定长度属性的节点的 XPath 表达式

> ID：13455184
> 
> 赞同：1
> 
> 时间：2012-11-19T13:50:31.063
> 
> 标签：xpath

我需要在 XML 文档中获取特定类型的所有节点，但前提是它们的*value*属性不为空。我在下面尝试了一些排列，但没有运气：

```
".//Foo[not([@Value =''])]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:08:45.677

这应该适合你

```
//Foo[@Value!=''] 
```

或者，如果您真的只想返回具有特定长度的 value 属性的节点，请使用以下内容：

```
//Foo[string-length(@Value) &gt; 3] 
```

或者

```
//Foo[string-length(@Value) = 0] 
```

# matlab - 使用matlab获取中心坐标图像

> ID：13455185
> 
> 赞同：0
> 
> 时间：2012-11-19T13:50:30.457
> 
> 标签：matlab, mean, coordinate

例如我想找到这张图片中心的颜色值

![在此处输入图像描述](../Images/4627a1a45b01b203726c26fef8a0b2d4.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:56:12.113

你的意思是

```
img = imread('img.jpg');
color = img(round(end/2), round(end/2), :) 
```

?

# imageview - JavaFX ImageView 在 StackPane 中调整大小

> ID：13455188
> 
> 赞同：3
> 
> 时间：2012-11-19T13:50:41.360
> 
> 标签：imageview, javafx-2

我在 StackPane 中调整 ImageView 的大小时遇到​​问题：如果 StackPane 是根容器并且我将图像的高度和宽度绑定到 StackPane，一切都很好。

```
<StackPane id="StackPane" fx:id="stack" prefHeight="400.0" prefWidth="600.0" style="-fx-background-color: lightgreen;" styleClass="mainFxmlClass" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication8.FXMLController">
  <children>
    <ImageView fx:id="image" fitHeight="100.0" fitWidth="300.0" pickOnBounds="true" preserveRatio="true" />
  </children>
  <stylesheets>
    <URL value="@fxml.css" />
  </stylesheets>
</StackPane> 
```

但是，如果我将这样的堆栈窗格放在例如网格中，则图像不会正确调整大小。正如我所读到的，ImageView 的问题是不可调整大小的。有什么办法可以调整大小吗？或者你能给一些建议如何调整 ImageView 的大小吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:12:06.523

听起来您正在尝试为 StackPane 创建背景图像。在这种情况下，通过 CSS 应用图像可能是比 ImageView 更好的使用途径。

```
.stack-pane {
  -fx-background-image: url("flower.png");
  -fx-background-size: cover;
} 
```

请参阅 JavaFX CSS 参考指南中区域规范的[背景图像](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#region)部分。

使[ImageView 本身可调整大小是一个未解决的主要问题](https://bugs.openjdk.java.net/browse/JDK-8091789)。该问题链接到[一个简单解决方法的代码](https://bugs.openjdk.java.net/browse/JDK-8091216)- 一个可调整大小的 ImagePane 包装一个 Image 以填充可调整大小的窗格。

# python - 在后台运行 python 服务器

> ID：13455192
> 
> 赞同：0
> 
> 时间：2012-11-19T13:50:52.923
> 
> 标签：python

我正在使用[gevent-socketio](https://github.com/abourget/gevent-socketio)将实时数据从 python 脚本推送到浏览器。但是我希望它能够从解释器交互地工作，以便服务器继续在后台运行。一些伪代码：

```
#start server with the application and keep it running on the background
server_inst=MyAppServer()

#send data to the sever that pushes it to a browser (prints "foo" to the browser)
server_inst.send_data('foo') 
```

看过线程后，我仍然很困惑如何/应该如何完成。任何指针appriciated。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:18:29.833

是否有理由将服务器和控制台程序作为同一个进程？

如果不是，我建议使用两个单独的进程和命名管道。如果此解决方案由于某种原因不理想，请提供更多详细信息。

无论如何，这里有一些代码可能对您实现 Pipe 类有用。我不确定您需要通信的数据究竟是什么样的形式，因此您可以使 Pipe 类抽象一些简单的协议和/或使用 pickle。

```
def __init__(self,sPath):
    """
    create the fifo. if it already exists just associate with it
    """
    self.sPath = sPath
    if not os.path.exists(sPath):
        try:
            os.mkfifo(sPath)
        except:
            raise Exception('cannot mkfifo at path \n {0}'.format(sPath))
    self.iFH = os.open(sPath,os.O_RDWR | os.O_NONBLOCK)
    self.iFHBlocking = os.open(sPath,os.O_RDWR)

def base_read(self,iLen,blocking=False):
    iFile = self.iFHBlocking if blocking else self.iFH
    while not self.ready_for_reading():
        import time
        time.sleep(0.5)

    lBytes = ''.encode('utf-8')
    while len(lBytes)<iLen:
        self.lock()
        try:
            lBytes += os.read(iFile,1)
            self.unlock()
        except OSError as e:
            self.unlock()
            if e.errno == 11:
                import time
                time.sleep(0.5)
            else:
                raise e

    return lBytes

def base_write(self,lBytes,blocking = False):
    iFile = self.iFHBlocking if blocking else self.iFH
    while not self.ready_for_writing():
        import time
        time.sleep(0.5)

    while True:
        self.lock()
        try:
            iBytesWritten =  os.write(iFile, lBytes)
            self.unlock()
            break
        except OSError as e:
            self.unlock()
            if e.errno in [35,11]:
                import time
                time.sleep(0.5)
            else:
                raise

    if iBytesWritten < len(lBytes):
        self.base_write(lBytes[iBytesWritten:],blocking)

def get_lock_dir(self):
    return '{0}_lockdir__'.format(self.sPath)

def lock(self):
    while True:
        try:
            os.mkdir(self.get_lock_dir())
            return
        except OSError as e:
            if e.errno != 17:
                raise e

def unlock(self):
    try:
        os.rmdir(self.get_lock_dir())
    except OSError as e:
        if e.errno != 2:
            raise e

def ready_for_reading(self):
    lR,lW,lX = select.select([self.iFH,],[],[],self.iTimeout)
    if not lR:
        return False
    lR,lW,lX = select.select([self.iFHBlocking],[],[],self.iTimeout)
    if not lR:
        return False
    return True

def ready_for_writing(self):
    lR,lW,lX = select.select([],[self.iFH,],[],self.iTimeout)
    if not lW:
        return False
    return True 
```

我有一个更完整的类实现，我愿意分享，但我认为我用它抽象的协议可能对你没用......你将如何使用它是在你的服务器和控制台应用程序中创建一个实例相同的路径。然后，您使用 base_read 和 base_write 来完成脏活。这里的所有其他东西都是为了避免奇怪的竞争条件。

希望这可以帮助。

# sql - Select 1 Col_Name 表示在 sql server 2008 中？

> ID：13455194
> 
> 赞同：0
> 
> 时间：2012-11-19T13:50:58.783
> 
> 标签：sql, sql-server

今天我发现了一个类似的查询

```
SELECT 1 [Col_name] FROM MyTable 
```

和

```
SELECT  [Col_name] FROM MyTable 
```

两者似乎都返回相同的结果。我很困惑。

这是实际的查询：

```
SELECT 1 Col1 FROM [Table1] WHERE Col1 = 1 

UNION

SELECT 2 Col1  FROM [Table1] 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:53:48.657

您的查询：

```
SELECT 1 [Col_name] FROM MyTable 
```

将返回`1`带有别名的文字值`col_name`。即使`col_name`是表中的标识符。

然而：

```
SELECT [Col_name] FROM MyTable; 
```

`col_name`将从您的表中选择。

与以下相同：

```
SELECT 1 Col1 FROM [Table1] WHERE Col1 = 1 
UNION
SELECT 2 Col1  FROM [Table1] 
```

只会给你两行：

```
1
2 
```

不管表中的值。因为`SELECT 1 Col1 FROM [Table1] WHERE Col1 = 1`返回`1`带有别名的文字值`col1`，所以返回带有相同别名的`SELECT 2 Col1 FROM [Table1]` 文字值（**不同的选择**）集合运算符，只会给你两个值 (1, 2)，因为它们是唯一的不同值。`2``col1``UNION`

 **## [现场演示](https://data.stackexchange.com/stackoverflow/query/edit/86337)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:53:13.607

在实际查询中，`Col1`被称为值为 的列的别名`1`。

如果`Col1`未指定，则具有给定值的列`1`没有 columnName。

*   [SQLFiddle 演示（*更多说明*）](http://sqlfiddle.com/#!3/d41d8/6370)**

# asp.net-mvc - 在 IIS 上发布后的 ASP.NET MVC 性能

> ID：13455195
> 
> 赞同：1
> 
> 时间：2012-11-19T13:50:58.807
> 
> 标签：asp.net-mvc, performance, iis, for-loop, localhost

在我的应用程序站点中，我有一个创建和生成 Excel 文件的控制器操作：从项目列表中，它通过 for 循环写入每个项目的每个字段。简化示例（因为我有大约 30 个字段）：

```
String az = "";
az = az + "<table border=\"1\">";
az = az + "<tr>";
az = az + "<th>Field 1</th>";
az = az + "<th>Field 2</th>";
for (int i = 0; i < items.Count(); i++){
     az = az + "<tr>";
     az = az + "<td>" + items.ElementAt(i).Field1+ "</td>";
     az = az + "<td>" + items.ElementAt(i).Field2+ "</td>";
     az = az + "</tr>";
}
az = az + "</table>"; 
```

现在，当我有几行时，没问题。当我有大量行时，生成文件需要一段时间。这在 localhost 上不是问题，但是在我在 IIS 上发布站点后，它需要 7x（时间）。

例子：

加载**250 行**：本地主机上*0.8*秒，IIS上*4 秒*

加载**615 行**：本地主机上*4 秒*， IIS上*21秒*

加载**950 行**：本地主机上*7**秒*，IIS上 38 秒

加载**1300 行**：本地主机上*15 秒*， IIS上*104秒*

有谁知道问题是什么？我是否必须在 IIS 站点上更改/设置一些变量？如果我没有，有没有办法优化 IIS 的性能？

谢谢，希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:56:19.913

首先，如果您必须像这样构建您的 html，那么至少使用字符串构建器

```
var az = new StringBuilder();
az.append("<table border=\"1\">");
az.append("<tr>");
//etc
return az.ToString(); 
```

但是，完全重新考虑这种方法并考虑使用 Razor 视图而不是编译您的 html 可能是值得的。当然，这取决于您可能有的其他考虑。

# php - 并发 AJAX 文件上传 LIMIT

> ID：13455196
> 
> 赞同：0
> 
> 时间：2012-11-19T13:51:02.810
> 
> 标签：php, javascript, jquery, file-upload, upload

我正在使用 XMLHttp 2 执行多个文件上传器来上传我的文件。当我这样做时，如果我一个一个地上传文件（通过 ajax 请求发送文件并等待它完成，然后再发送下一个和依此类推），上传器运行良好。但是当我通过使用并发 ajax 请求同时上传多个文件来上传多个文件时，浏览器挂起。这是性能比较，

![在此处输入图像描述](../Images/1c2357e46cc4c35203ab900bffda35eb.png)

**那么浏览器可以同时处理的UPLOAD FILE SIZE**或**NUMBER OF AJAX REQUESTS**是否有任何最大限​​制？

**注意：**红色数字显示 Firefox（使用 firebug）上传所有文件所消耗的总上传时间。在并行上传中，由于所有上传同时发生，我花了最后结束的最大文件所消耗的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:41:13.160

并发上传的数量没有理论上的最大值（除非浏览器构建者明确输入）。

然而，在实践中，由于带宽阻塞，在两到三个并发上传之后，上传速度性能会显着下降，除了非常低的延迟，即 tcp 窗口限制了单次上传的最大速度。

我建议将并发限制设置为 2，特别是如果您将其提供给带宽可能不同的外部用户。或者，您也可以进行速度基准测试，根据测量的上传性能调整并发级别。

# c++ - 如果它是私有的，是否可以从 main 调用方法？如果没有，怎么可能？

> ID：13455198
> 
> 赞同：-3
> 
> 时间：2012-11-19T13:51:09.233
> 
> 标签：c++, class, methods, private-members

我试图让这个程序开始运行，但目前我只是得到错误。我不知道如何让它工作。如果我将类 SavingsAccount 更改为 public 应该没问题，但我必须保持原样。

问题出在主函数中。

```
#include <iostream>
#include <iomanip>
#include <string>
using namespace std;

class SavingsAccount
{
    int accountType;
    string ownerName;
    long ssn;
    double accountClosurePenaltyPercent, accountBalance;
    void Information();
    inline double AccountClosureLoss()
    {
        return (accountBalance * accountClosurePenaltyPercent);
    }
    void OutputInformation();

};

void SavingsAccount::Information()
{
    cout << "Enter Account Type (1 for Checking or 2 for Savings): ";
    cin >> accountType;
    cout << "Enter owner name: ";
    getline(cin, ownerName);
    cout << "Enter the Social Security Number: ";
    cin >> ssn;
    cout << "Enter the percent penalty for closing account(decimal form): ";
    cin >> accountClosurePenaltyPercent;
    cout << "Enter the account balance: ";
    cin >> accountBalance;
}

void SavingsAccount::OutputInformation()
{
    cout << "Account Type: " << endl;
    cout << "Name: " << ownerName << endl;
    cout << "SSN: " << ssn << endl;
    cout << "Account Closure Penaly %: " << accountClosurePenaltyPercent << endl;
    cout << "Account Balance: " << accountBalance;
}

int main(void)
{
    SavingsAccount.Information(); 
    SavingsAccount.AccountClosureLoss();
    SavingsAccount.OutputInformation();
    return 0;
} 
```

到目前为止我尝试了什么。

```
int main(void)
    {
        SavingsAccount John;
        John.Information(); 
        John.AccountClosureLoss();
        John.OutputInformation();
        return 0;
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:54:23.817

好吧，默认情况下成员函数是私有的，因此您可以随时将它们添加到公共中，如下所示：

```
class SavingsAccount
{
    private:
    int accountType;
    string ownerName;
    long ssn;
public:
    double accountClosurePenaltyPercent, accountBalance;
    void Information();
    inline double AccountClosureLoss()
    {
        return (accountBalance * accountClosurePenaltyPercent);
    }
    void OutputInformation();
}; 
```

您现在可以从主系统调用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:57:43.450

Since you cannot change the SavingsAccount class, and since it prohibits access to it's members (`private` is the default), you are not supposed to use any menber of that class.

"The problem is in the main function": no, it is in the design of your class. A class with nothing public is not useful.

There is no clean solution to your problem.

A solution on the borderline of changing the class would be in defining an 'interface', and making the (unchanged) class inherit that interface:

```
class Account {
public:
   virtual ~Account(){}
   virtual void Information() = 0;
   virtual double AccountClosureLoss() = 0;
   virtual void OutputInformation() = 0;
};

class SavingsAccout : public Account {
... body remains unchanged
}; 
```

The `main` will use `Account` iso `SavingsAccount`:

```
SavingsAccount savingsAccount;
Account& account = savingsAccount;

// should be accessible via the `Account` interface.
account.AccountClosureLoss(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:06:30.293

您正在尝试在方法中使用成员属性，但您正在尝试在没有实例的情况下使用您的方法。所有成员属性的值都存储在您的实例中，因此您首先需要一个实例。将其添加到您的主要功能中：

```
int main(void)
{
    SavingsAccount myAccount;
    myAccount.Information();
    myAccount.AccountClosureLoss();
    myAccount.OutputInformation();
    return 0;
} 
```

此外，您的方法被定义为私有的，您应该始终使用`public:`和`private:`如下：

```
class SavingsAccount
{
    public:
        void Information();
        inline double AccountClosureLoss()
        {
            return (accountBalance * accountClosurePenaltyPercent);
        }
        void OutputInformation();

    private:
        int accountType;
        string ownerName;
        long ssn;
        double accountClosurePenaltyPercent;
        double accountBalance;
}; 
```

你不能使用没有实例的方法。即使您可以（可能是静态的？）您也不能在其中使用任何成员属性，因此将其包含在类中是没有用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:53:55.440

您必须首先声明 SavingsAccount 类的实例。例如：

```
int main()
{
    SavingsAccount account;
    account.Information();

    ...

    return 0;
} 
```

此外，是的，您要调用的类的方法必须是公共的。

# python - 具有声明性基础的 SQLAlchemy 临时表

> ID：13455207
> 
> 赞同：9
> 
> 时间：2012-11-19T13:51:51.047
> 
> 标签：python, orm, sqlalchemy, temporary

我的程序中需要一个临时表。我已经看到这可以通过“映射器”语法以这种方式实现：

```
t = Table(
    't', metadata,
    Column('id', Integer, primary_key=True),
    # ...
    prefixes=['TEMPORARY'],
) 
```

[在这里](https://stackoverflow.com/questions/1842902/can-i-create-temporary-table-in-sqlalchemy-without-appending-to-table-prefixes)看到

但是，我的整个代码都使用了声明式基础，这是我所理解的，我想坚持下去。有可能使用[混合方法](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/declarative.html#using-a-hybrid-approach-with-table) ，但如果可能的话，我会避免它。

这是我的声明性类的简化版本：

```
import SQLAlchemy as alc
class Tempo(Base):
    """
    Class for temporary table used to process data coming from xlsx
    @param Base Declarative Base
    """

    # TODO: make it completely temporary

    __tablename__ = 'tempo'

    drw = alc.Column(alc.String)
    date = alc.Column(alc.Date)
    check_number = alc.Column(alc.Integer) 
```

提前致谢！

用新问题编辑：

现在这个类看起来像这样：

```
import SQLAlchemy as alc

class Tempo(Base):
        """
        Class for temporary table used to process data coming from xlsx
        @param Base Declarative Base
        """

        # TODO: make it completely temporary

        __tablename__ = 'tempo'
        __table_args__ = {'prefixes': ['TEMPORARY']}

        drw = alc.Column(alc.String)
        date = alc.Column(alc.Date)
        check_number = alc.Column(alc.Integer) 
```

当我尝试在此表中插入数据时，我收到以下错误消息：

```
sqlalchemy.exc.OperationalError: (OperationalError) no such table:
tempo u'INSERT INTO tempo (...) VALUES (?, ?, ?, ?, ?, ?, ?, ?)' (....) 
```

似乎仅通过声明该表并不存在。我见过像 create_all() 这样的东西，它可能是解决这个问题的方法（在彻底解释的同时看到新想法是如何产生的，这很有趣）

再次，非常感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:32:30.410

可以使用`__table_args__`吗？请参阅[https://docs.sqlalchemy.org/en/14/orm/declarative_tables.html#orm-declarative-table-configuration](https://docs.sqlalchemy.org/en/14/orm/declarative_tables.html#orm-declarative-table-configuration)

```
class Tempo(Base):
    """
    Class for temporary table used to process data coming from xlsx
    @param Base Declarative Base
    """

    # TODO: make it completely temporary

    __tablename__ = 'tempo'
    __table_args__ = {'prefixes': ['TEMPORARY']}

    drw = alc.Column(alc.String)
    date = alc.Column(alc.Date)
    check_number = alc.Column(alc.Integer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-11T14:34:50.613

老问题，但如果有人想从现有的声明性表模型动态创建临时表，而不是让它始终成为模型/代码的一部分，您可以尝试以下方法。复制`__table_args__`有点棘手，因为它可以有多种格式，并且任何`Index`对象都需要重新创建，因此它们与旧表无关。

```
import time

from sqlalchemy.schema import CreateTable

def copy_table_args(model, **kwargs):
    """Try to copy existing __table_args__, override params with kwargs"""
    table_args = model.__table_args__

    if isinstance(table_args, tuple):
        new_args = []
        for arg in table_args:
            if isinstance(arg, dict):
                table_args_dict = arg.copy()
                table_args_dict.update(**kwargs)
                new_args.append(arg)
            elif isinstance(arg, sa.Index):
                index = sa.Index(
                    arg.name,
                    *[col for col in arg.columns.keys()],
                    unique=arg.unique,
                    **arg.kwargs,
                )
                new_args.append(index)
            else:
                # TODO: need to handle Constraints
                raise Exception(f"Unhandled table arg: {arg}")
        table_args = tuple(new_args)
    elif isinstance(table_args, dict):
        table_args = {
            k: (v.copy() if hasattr(v, "copy") else v) for k, v in table_args.items()
        }
        table_args.update(**kwargs)
    else:
        raise Exception(f"Unexpected __table_args__ type: {table_args}")

    return table_args

def copy_table_from_model(conn, model, **kwargs):
    model_name = model.__name__ + "Tmp"
    table_name = model.__table__.name + "_" + str(time.time()).replace(".", "_")
    table_args = copy_table_args(model, extend_existing=True)

    args = {c.name: c.copy() for c in model.__table__.c}
    args["__tablename__"] = table_name
    args["__table_args__"] = table_args

    copy_model = type(model_name, model.__bases__, args)
    print(str(CreateTable(copy_model.__table__)))
    copy_model.__table__.create(conn)
    return copy_model

def temp_table_from_model(conn, model, **kwargs):
    return copy_table_from_model(conn, model, prefixes=["TEMPORARY"]) 
```

注意：我没有添加逻辑来处理复制约束，这是针对 MySQL 进行的轻微测试。另请注意，如果您使用非临时表和自动命名索引（即`Column(..., index=True)`）执行此操作，那么这可能与`alembic`.

# javascript - 如何显示图像（img）或pdf（iframe）？

> ID：13455208
> 
> 赞同：1
> 
> 时间：2012-11-19T13:51:50.643
> 
> 标签：javascript, jquery, ajax, pdf, iframe

我在页面（其余）上显示的动态链接可能会导致响应中出现 jpeg、tif 或 pdf 文件。

我试着这样做（图像部分工作正常）：

```
fetchContent(uri){
    $.ajax({ 
        type: "GET",            
        url: uri,

        success: function(output, status, xhr) {
            var contentType = xhr.getResponseHeader("Content-Type");

            if(contentType === "image/jpeg" || contentType === "image/tiff"){

                // IMG: get parent div 'container'
                var $container = $('#container', top.frames["content"].document);
                var img = new Image();

                $(img)
                    .load(function(){
                        // initially hide
                        $(this).hide();
                        $(this).attr('id', 'imgId');

                        // parent div:
                        $container
                            // remove previous image
                            .empty()
                            // add this image
                            .append(this);

                        // fade in image effect
                        $(this).fadeIn();

                    })

                    // set the src attribute of the new image to our image
                    .attr('src', uri);

            }else if(contentType === "application/pdf"){
                // PDF: get parent div 'main'
                var $main = $('#main', top.frames["content"].document);

                $main.empty();
                $main.append("<iframe id='contentIFrame' name='contentIFrame' src='" + uri +
                "' width='100%' style='height:100%'></iframe>");
            }
        },
        complete: function(output){
            $('#navigation-block').append(output);
        },

        error: function(output) {
            $('#navigation-block').append(output);
        }
    });
} 
```

PDF 部分不起作用。

我该如何解决？

顺便说一句，我控制 REST 服务器端和 jQuery 端，所以我在 REST 响应标头中添加了正确的内容类型。

我检查了 PDF.js 并且会使用它，但不幸的是我的客户使用 IE8。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:12:26.900

这是事先不知道链接将返回什么问题的最终解决方案（jpeg、tif 或 pdf）：

```
function fetchImage(uri, $activeLink){
    // show loader div
    var $loadingStatus = $('#loadingStatus', top.frames["content"].document);
    $loadingStatus.fadeIn();

    // remember (select) the link that has just been activated
    $("#navigation-block>ul>li>a.zactive").removeClass("zactive");
    $($activeLink).addClass('zactive');

    $.ajax({
        type: "GET",            
        url: uri,

        success: function(output, status, xhr) {
            // for images use main parent div 'main-img'
            var $mainImg = $('#main-img', top.frames["content"].document);
            // for pdf use parent div 'main-pdf'
            var $mainPdf = $('#main-pdf', top.frames["content"].document);

            // REST service will always return correct content-type
            var contentType = xhr.getResponseHeader("Content-Type");

            if(contentType === "image/jpeg" || contentType === "image/tiff"){

                // for images we also need child div 'container'
                var $container = $('#container', top.frames["content"].document);
                var img = new Image();

                $(img)
                    .load(function(){
                        // default: hide image
                        $(this).hide();
                        $(this).attr('id', 'imgId');

                        // img parent div:
                        $container
                            // remove previous img 
                            .empty() 
                            // insert this img 
                            .append(this); 

                        // hide pdf div and show img div
                        $($mainPdf).hide();
                        $($mainImg).show();

                        // fade in image 
                        $(this).fadeIn();

                        // remove loader div
                        $loadingStatus.stop(true, true).fadeOut();
                    })

                    // set the src attribute of the new image to this uri
                    .attr('src', uri);

            }else if(contentType === "application/pdf"){

                $mainPdf.empty(); // so I don't have to check whether iframe is already there
                $mainPdf.append("<iframe id='contentIFrame' name='contentIFrame' src='" + uri +
                "' width='100%' style='height:100%'></iframe>");

                // hide img div and show pdf div
                $($mainImg).hide();
                $($mainPdf).show();
            }
        },

        error: function(output) {
            alert("error " + output);
        }
    });
} 
```

# client-server - NAT 路由器阻止 JMS 消息

> ID：13455209
> 
> 赞同：1
> 
> 时间：2012-11-19T13:51:53.357
> 
> 标签：client-server, jms, router, nat, openjms

我的云机器上运行了一个 openjms-0-7-7 实例。与 jms 主题的连接发生在 tcp 上。我在家中的个人计算机上运行客户端应用程序，并且能够向主题发送消息（然后正确转发给其他听众），但我无法接收消息。我的电脑通过 NAT 路由器连接到互联网。我尝试使用我的大学网络重现此问题，并且一切正常（在那里我被分配了我自己的外部 IP 地址 - 没有 NAT）。

我是否正确地认为问题是我的路由器阻止了消息？我该如何检查这个以及如何解决这个问题。

此致，

巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:11:16.513

您的路由器很可能正在阻止传入的 JMS 消息，因为它不知道它属于哪个本地客户端（在 NAT 之后）。

您必须在路由器中配置端口转发。请参阅其文档。要知道要转发哪些端口，您必须查阅 openjms 的文档以了解它如何将端口分配给客户端。

# ruby-on-rails - link_to 函数无法正确显示数组中的链接

> ID：13455210
> 
> 赞同：1
> 
> 时间：2012-11-19T13:51:53.087
> 
> 标签：ruby-on-rails, link-to

我有一个 rails 2.3 应用程序，我在其中定义了这样的路线：

```
map.connect ':controller/:level1/:level2', :action => 'index'
map.connect ':controller/:level1',         :action => 'index' 
```

我想根据我所在的页面制作一些像面包屑一样的链接。例如，假设我的控制器名称是`'contr'`，如果我的路径是`/contr`，则只有一个链接：`'/contr'`。如果我的路径是`'/contr/level1/level2'`，我希望有 3 个链接`'/contr'`：`'/contr/level1'`和`'/contr/level1/level2'`。

这是我尝试的方法：

在我看来，我检测到这些级别：

```
b_titles = []
b_links = []
b_titles << 'Contr'
b_links  << ({:controller=>'contr'})
if !params[:level1].nil?
  b_titles << 'Level 1'
  b_links << ({:controller=>'contr', :level1=> params[:level1]})
  if !params[:level2].nil?
    b_titles << 'Level 2'
    b_links << ({:controller=>'contr', :level1=> params[:level1], :level2=>params[:level2]})
  end
end 
```

制作这些数组后，我使用函数对其进行测试`p`

```
p b_links
p b_titles 
```

在控制台中有预期的结果：

```
[{:controller=>"contr"}, {:level1=>"level1", :controller=>"contr"}, {:level1=>"level1", :level2=>"level2", :controller=>"contr"}]
["Contr", "Level 1", "Level 2"] 
```

现在我想为面包屑制作一个链接列表：

```
<% b_titles.each_with_index do |title, i| %>
    <%= link_to(title, (b_links[i]))  %>
<% end %> 
```

结果我得到它：

```
<a href="/contr/level1/level2">Contr</a>
<a href="/contr/level1/level2">Level 1</a>
<a href="/contr/level1/level2">Level 2</a> 
```

**这没有道理！**为什么所有项目都有相同的链接？标题可以，但链接不行。

即使我尝试仅显示链接，`b_links.each do |link|`第三个链接也会显示 3 次。这里可能是什么问题？

我什至试图让`b_links`数组包含从该`url_for`方法返回的字符串，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:13:04.270

如果您处于最深层次，`:controller, :level1`并且`:level2`一切就绪。

如果您尝试使用它创建路径，`{:controller => "contr"}`则会将其添加到当前环境中。这很容易，并且允许我们编写类似的东西`{:action => 'edit'}`来使用当前控制器。

所以你必须调整你的哈希值

```
 [{:controller=>"contr", :level1 => nil, :level2 => nil}, 
  {:level1=>"level1", :controller=>"contr", :level2 => nil}, 
  {:level1=>"level1", :level2=>"level2", :controller=>"contr"}] 
```

希望这可以帮助。

# node.js - Mongoose：在查询条件中的模式字段上应用函数

> ID：13455212
> 
> 赞同：1
> 
> 时间：2012-11-19T13:52:00.490
> 
> 标签：node.js, mongoose

在 MySQL 中，可以在 where 子句中的字段上应用本机函数。例如。

```
SELECT * FROM t WHERE DATE(the_date) < '2012-11-19'; 
```

或者

```
SELECT * FROM t WHERE a+b < 20; 
```

现在，是否可以在猫鼬查询的条件字段上使用函数？假设我正在查询这样的内容：

```
tSchema.find({a+b: {$lt: 20}}, callback); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:08:49.153

不，您不能使用 来创建计算列`find`，因此您必须使用[`aggregate`](http://mongoosejs.com/docs/api.html#model_Model-aggregate)更灵活但也更慢的方法。

像这样：

```
tSchema.aggregate([

    // Include the a, b, and a+b fields from each doc
    { $project: {
        a: 1,
        b: 1,
        sum: {$add: ['$a', '$b']}}},

    // Filter the docs to just those where sum < 20
    { $match: {sum: {$lt: 20}}}

], function(err, result) {
    console.log(result);
}); 
```

为了完整起见，我应该注意您可以`find`使用`$where`过滤器来执行此操作，但是它的性能很糟糕，因此不推荐使用。像这样：

```
tSchema.find({$where: 'this.a + this.b < 20'}, function(err, result) {
    console.log(result);
}); 
```

# java - 使用 main 方法初始化构造函数的值

> ID：13455216
> 
> 赞同：-2
> 
> 时间：2012-11-19T13:52:07.563
> 
> 标签：java

如何在构造函数中初始化值不能由对象传递并且我们可以从主方法传递它们？

```
 class ex
    {
        int a,b;
        ex()
        {
            this.a=b;  
        }

        public static void main(String args[])
        {
            //here we pass the values to that consructor ex
            ex obj=new ex();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:54:58.867

创建一个接受两个参数的重载构造函数。

```
public ex(int a, int b) {
   this.a = a;
   this.b = b;
}

public static void main(String...args){
 ex obj = new ex(1,2)
} 
```

> 值不能由对象传递，我们应该从主方法传递

如果我理解正确，您想从主方法传递参数并在构造函数中初始化它们，唯一要做的就是在创建对象时将它们传递给构造函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:18:13.700

如果不想在声明新对象时显示初始化值，可以从构造函数调用 setter 方法。

请参阅下面的代码以供参考：

```
 class Testcl { `int a,b;

Testcl(){
    setValues(1,2);
}

private void setValues(int a, int b){
    this.a=a;
    this.b=b; 
}

public static void main(String [] args){
    Testcl test = new Testcl();
    System.out.println("a : " + test.a + " b : " + test.b);
}}` 

            回答 #3

赞同：0

时间：2012-11-19T14:24:18.227

首先要说的是，这确实“有效”......在某种意义上，它编译和执行没有任何错误。

```
 int a,b;  // default initialized to 'zero'

    ex() {
        this.a=b;  // assigns 'zsro' to a.
    } 
```

但是，当然，它没有取得任何成果……因为`a`已经到*了* `zero`那个地步。

现在，该方法可以在构造函数返回*后将*`main`某些内容分配给`a`and/or`b`字段。但是没有办法（在纯 Java ^(1中）在调用构造函数)*之前*获得一些非零值......如果这是你所要求的。*^(`b`)*  **实际的解决方案是向构造函数添加`a`和`b`参数。

* * *

^(1 - 一个非纯 Java 解决方案可能是使用构造函数的字节码“到处乱搞”，以便它完成您“需要”做的事情。但这太可怕了，可怕的解决方案有回来咬你的趋势。)** 
```

# php - 使用 PHP 重新排列 HTML 元素

> ID：13455218
> 
> 赞同：-1
> 
> 时间：2012-11-19T13:52:24.490
> 
> 标签：php, html, replace

我从中读取的 RSS 提要最近更新并搞砸了很多事情，我修复了大部分问题，但我无法弄清楚。

以前的日期格式：

```
<div>
    <div>
        <div>
            13 </div>
    </div>
</div>
<div>
    <div>
        <div>
            July </div>
    </div>
</div>
<div>
    <div>
        <div>
            2012 </div>
    </div>
</div> 
```

现在情况如何：

```
<div>
    <div>
        <div>13th July, 2012</div>
    </div>
</div> 
```

所以：

1.  日月和年必须在各自的 DIV 中分开（最困难）
2.  需要删除“th”和“,”（这很容易使用 str_replace）

现在的问题是我可以在几分钟内使用 jQuery 完成此操作，但必须在保存之前**使用 PHP 完成**，而且由于 div 没有类/ID，这对我来说更加困难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:56:55.973

您可以`strip_tags`在 PHP 中使用来获取日期，然后使用`strtotime`来规范化日期。

然后你可以生成任何你想要的 HTML。

编辑：这是您的解决方案：

```
<?php
//at this point, $string = the input you wish to modify
$string = "
<div>
    <div>
        <div>13th July, 2012</div>
    </div>
</div>
";

//get normalised time
$time = strtotime(trim(strip_tags($string)));

//with normalised time, generate your new output
echo "
<div>
    <div>
        <div>
            ".date("d",$time)." </div>
    </div>
</div>
<div>
    <div>
        <div>
            ".date("F",$time)." </div>
    </div>
</div>
<div>
    <div>
        <div>
            ".date("Y", $time)." </div>
    </div>
</div>
";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:55:39.783

无需为您编写实际代码，解决方案将是：

*   使用 DOM 解析器获取您需要的信息（日期`div`内容）；
*   `explode`关于空格字符；
*   `(int)``rtrim`去掉逗号的第一个数字和月份。

或者使用更好的@Darrrrrren 解决方案......

# jquery - 如何在不阻塞用户界面的情况下关闭对话框

> ID：13455221
> 
> 赞同：0
> 
> 时间：2012-11-19T13:52:28.283
> 
> 标签：jquery, css, jquery-ui-dialog

我想在不阻塞 UI 或重新加载页面的情况下关闭 jquery 对话框。在关闭这样的 jquery 对话框时：

```
buttons: {
   'Close': function () {
       e.preventDefault();
       $('.ui-dialog').remove();
       $('.ui-widget-overlay').remove();
   } 
```

对话框被隐藏，但后面的 UI 被阻止。因此我不能点击其他链接..
也试过了，

```
buttons: {
    'Close': function () {
        $('#quickfillDialog').dialog('close');
    } 
```

这也不能解决问题。请推荐！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:06:06.443

尝试这个..

```
buttons: {
 'Close': function () {
    $( this ).dialog( "close" );
} 
```

浏览文档...

[http://jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation)

# android - Android webview 下拉菜单不适用于 Android 4.x 设备

> ID：13455222
> 
> 赞同：21
> 
> 时间：2012-11-19T13:52:37.920
> 
> 标签：android, android-fragments, android-webview, android-tabhost

我的一台`WebView`Android 4.x 设备有问题。

Android 应用有一个**Tabhost**，其中包含**Fragments**。其中一个片段包含一个 webview。显示的页面有一个下拉菜单，如下所示：

```
<select id="mySelect" name="mySelect">
    <option value="1">Testname 1</option>
    <option value="2">Testname 2</option>
    <option value="3">Testname 3</option>
</select> 
```

现在，当我使用带有 Android 4.1.1 的 Galaxy S3（或我可以使用的任何其他 Android 设备）打开我的应用程序时，我可以选择“Testname 1”，然后选择“Testname 2”等等。

在 Galaxy Nexus（在运行 Android 4.1.1、4.1.2 和 4.2 的不同设备上确认）上，当我尝试选择 UI 刚刚阻止的内容时。在我切换到另一个选项卡并突然返回 webview 选项卡后，UI 最终更改为先前选择的项目。

知道是什么原因造成的，或者我如何为 Galaxy Nexus 解决这个问题？

**重要更新：** 我可以追踪到`Tabhost`. 当它`webview`在其中`tabhost`时它不起作用，当它不在时它起作用。这可能与[这个问题](http://code.google.com/p/android/issues/detail?id=2516)有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:52:41.553

实际上，与仅使用 TabHost 相比，您可以使用 ActionBar 做更多的事情。包括标签。[链接](http://developer.android.com/tools/extras/support-library.html)将允许您在旧版本 minSdk = 4 中实现 ActionBar。与我合作过的大多数用户体验开发人员都认为 Tabs 有点过时，尽管它确实为用户提供了熟悉的 UI，但我该反对谁风？ActionBar 为 UI 提供了非常特定于 Android 的外观和干净的感觉。[链接](http://dl.google.com/googleio/2010/android-android-ui-design-patterns.pdf)是关于 Google 在该会议上推荐的 UI 模式的文档。[关联](http://www.youtube.com/watch?v=M1ZBjlCRfz0)是讨论会议 UI 模式的 YouTube 视频。遵循这些建议可以更好地审查您的应用程序和更复杂的 UI 外观。我不确定您的需求是什么，但是如果您要做某事，不妨做对吗？如果您需要更多帮助，请告诉我。我可以为您提供有关使用 ActionBar 的示例。[ActionBar 链接](http://developer.android.com/design/patterns/actionbar.html)可以给你一些更好的理由，我可以告诉你为什么它是 UI 的一个不错的选择。

您是否正确实施您的片段？[链接](http://developer.android.com/guide/components/fragments.html)是有关使用它们的文档。如果您使用动态片段而不是在布局中实现的固定片段，我在跨应用程序编写时发现的一个技巧是调用 .clearBackStack(); 当我遇到有趣的问题时，它似乎可以解决很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:02:44.690

ICS 中的 TabHost？你在使用兼容包吗？如果您基本上在 3.1+ 中工作，则正确的设计是使用 ActionBar 来实现选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T14:07:20.180

选择选择后，列表项数据可能会发生变化，但我们看不到变化。为此，我们需要显式刷新选择组件。希望这可以解决问题。

`$("select#HeightUnit option[value='cm']").attr("selected", "selected"); $('select').selectmenu('refresh');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T05:15:30.823

尝试在您的 XML 布局中使用此自定义类而不是普通的 TabHost：

```
package com.example.test;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.TabHost;

public class TabHostFix extends TabHost
{
    public TabHostFix(Context context)
    {
        super(context);
    }

    public TabHostFix(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    @Override
    public void onTouchModeChanged(boolean isInTouchMode)
    {
        //do not call through to base class, do nothing
        //this is a fix for tabhost stealing focus from textboxes
    }
} 
```

在您的 XML 布局中引用自定义类，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.test.TabHostFix xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:layout_weight="0"/>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />
        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>
</com.example.test.TabHostFix> 
```

编辑：作为替代解决方案，您可以使用支持库中的 ViewPager 和模仿选项卡的自定义 View Pager 指示器完全替换 TabHost。我以前从未尝试过，但我读到这里有很好的免费 3rd 方视图寻呼机[指示器](http://viewpagerindicator.com/)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-07-03T04:46:20.833

```
> i think u must add the API version on your activity cause some UI cannot compatible on >android API 8\. so check the API SDK like this.

>@TargetApi(Build.VERSION_CODES.GINGERBREAD)
>if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD)
>{
>// condisition
>} 
```

# c# - 编码字节的正确方法c#

> ID：13455223
> 
> 赞同：0
> 
> 时间：2012-11-19T13:52:38.377
> 
> 标签：c#, sockets, encoding, asynchronous

我想`byte[]`在使用异步套接字发送变量之前对变量的内容进行编码。

```
private void SendDatabaseObj(Socket handler, BuildHistoryClass buildHistoryQueryResult)
{
    byte[] byteData = ObjectToByteArray(buildHistoryQueryResult);

    // Begin sending the data to the remote device.
    handler.BeginSend(byteData, 0, byteData.Length, 0,
        new AsyncCallback(SendCallback), handler);
} 
```

`buildHistoryQueryResult`使用此函数进行序列化：

```
private byte[] ObjectToByteArray(BuildHistoryClass obj)
{
    BinaryFormatter bf = new BinaryFormatter();
    MemoryStream ms = new MemoryStream();
    bf.Serialize(ms, obj);
    return ms.ToArray();
} 
```

什么是“正确”的编码格式，因为我的接收器出现异常：

捕获到 SerializationException 输入流不是有效的二进制格式。起始内容（以字节为单位）为：04-00-00-00-06-0F-00-00-00-04-54-72-75-65-06-10-00 ...

接收方：

```
 private void ReceiveCallback_onQuery(IAsyncResult ar)
        {
            try
            {
                // Retrieve the state object and the client socket 
                // from the asynchronous state object.
                StateObject state = (StateObject)ar.AsyncState;
                Socket client = state.workSocket;

                // Read data from the remote device.
                int bytesRead = client.EndReceive(ar);

                if (bytesRead > 0)
                {
                    // There might be more data, so store the data received so far.
                    state.sb.Append(state.buffer);

                    // Get the rest of the data.
                    client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                        new AsyncCallback(ReceiveCallback_onQuery), state);
                }
                else
                {
                    // All the data has arrived; put it in response.
                    if (state.sb.Length > 1)
                    {
                        response_onQueryHistory = ByteArrayToObject(state.buffer);
                    }
                    // Signal that all bytes have been received.
                    receiveDoneQuery.Set();
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        } 
```

反序列化功能：

```
 private BuildHistoryClass ByteArrayToObject(byte[] arrayBytes)
        {
            MemoryStream ms = new MemoryStream();
            BinaryFormatter bf = new BinaryFormatter();
            ms.Write(arrayBytes, 0, arrayBytes.Length);
            ms.Seek(0, SeekOrigin.Begin);
            BuildHistoryClass obj = (BuildHistoryClass)bf.Deserialize(ms);
            return obj;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:31:24.820

您自己的代码有错误，这可能是导致`SerializationException`. 在接收方，您有以下代码和注释：

```
// There might be more data, so store the data received so far.
state.sb.Append(state.buffer); 
```

然而后来（在收到所有数据之后）你有以下内容：

```
// All the data has arrived; put it in response.
if (state.sb.Length > 1)
{
    response_onQueryHistory = ByteArrayToObject(state.buffer);
} 
```

请注意，您正在反序列化`state.buffer`应该反序列化的位置`state.sb`

# spring - 控制器之前的一层 - spring mvc

> ID：13455224
> 
> 赞同：1
> 
> 时间：2012-11-19T13:52:43.547
> 
> 标签：spring, spring-mvc

我有一个弹簧 mvc 应用程序。现在在我的项目中，我基本上想执行最新的请求，并且之前的所有请求都被取消/终止。

目前所有取消代码都在我的控制器内。但为了代码清晰/可读性，我想将此代码移植到我的控制器之外。最终我想要一个上面的层，它接受请求，检查任务是否要取消，然后才将其转发给控制器。

上述的一种方法是让另一个控制器将其转发给上述控制器。我也听说过[Handler Interceptor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/HandlerInterceptor.html)。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:37:21.483

如果我是你，我会选择拦截器。
您可以查看[此链接](http://www.mkyong.com/spring-mvc/spring-mvc-handler-interceptors-example/)以获取有关如何实现您自己的示例

# tfs - TFS Release Burndown Report sprint list 错误

> ID：13455227
> 
> 赞同：1
> 
> 时间：2012-11-19T13:53:00.390
> 
> 标签：tfs, scrum

我们已经使用 Scrum 几个月了，并希望利用这些报告。我们正在查看 Release Burndown 报告。它给出了 sprint 的列表。sprint 列表有 2 个问题。第一个 sprint 由于某种原因被列出了两次，它只显示 sprint 1 -8 sprint 9 和 10 没有显示。

![这是我所看到的屏幕截图](../Images/cd026eb6743fa5ee56aaace6388ab502.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:15:58.677

The report uses the data that is present in the olap cube. It is very likely that

1.  There are two different iterations that have the same name, but internally they have different ID's. Could that be the case?
2.  The 2 sprints that are missing probably have no work items assigned yet. The filter only shows sprints that are in the cube.

# winforms - 动态设置/删除 WinForms 表单的 CS_DROPSHADOW 样式（C#）

> ID：13455236
> 
> 赞同：0
> 
> 时间：2012-11-19T13:53:23.227
> 
> 标签：winforms, forms, shadow, setclasslong

怎么做？我找不到任何有用的 C# 示例。我知道我应该使用 SetClassLong/SetClassLongPtr，但这是我只找到的定义：[http](http://www.pinvoke.net/default.aspx/user32/SetClassLongPtr.html) ://www.pinvoke.net/default.aspx/user32/SetClassLongPtr.html 。

显然，我应该用 GCL_STYLE 调用 GetClassLongPtr 来读取当前的样式标志，添加或排除 CS_DROPSHADOW，然后用改变的标志值调用 SetClassLongPtr。但是看看那个 PInvoke 定义，它并不是微不足道的，尤其是考虑到 32/64 位系统。

任何人都可以给出一个链接或一个很好的例子吗？请不要提供覆盖 CreateParams 的示例，因为这不适用于我们的动态场景。也许，还有另一种 [托管] 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:58:53.677

这是我设法写的东西：

```
 private void SetSizeableCore(bool value)
    {
        fSizeable = value;
        if (value)
        {
            FormBorderStyle = FormBorderStyle.SizableToolWindow;
            DockPadding.All = 0;
            System.Version ver = Environment.OSVersion.Version;
            // Always for WinXP family, but for higher systems only if the aero theme is not in effect
            bool needShadow = ((ver.Major == 5) && (ver.Minor > 0)) || ((ver.Major > 5) && !IsAeroThemeEnabled());
            SetShadowFlag(needShadow);
        }
        else
        {
            FormBorderStyle = FormBorderStyle.None;
            DockPadding.All = 1;
            SetShadowFlag(true);
        }
    }

    private void SetShadowFlag(bool hasShadow)
    {
        if (!IsDropShadowSupported())
            return;
        System.Runtime.InteropServices.HandleRef myHandleRef = new System.Runtime.InteropServices.HandleRef(this, this.Handle);
        int myStyle = iGNativeMethods.GetClassLongPtr(myHandleRef, iGNativeMethods.CS_DROPSHADOW).ToInt32();
        if (hasShadow)
            myStyle |= iGNativeMethods.CS_DROPSHADOW;
        else
            myStyle &= ~iGNativeMethods.CS_DROPSHADOW;
        iGNativeMethods.SetClassLong(myHandleRef, iGNativeMethods.GCL_STYLE, new IntPtr(myStyle));
    }

    private bool IsDropShadowSupported()
    {
        // Win2000 does not have this feature
        if (Environment.OSVersion.Version <= new Version(5, 0))
            return false;
        bool myResult = false;
        iGNativeMethods.SystemParametersInfo(iGNativeMethods.SPI_GETDROPSHADOW, 0, ref myResult, 0);
        return myResult;
    }

    private bool IsAeroThemeEnabled()
    {
        if (Environment.OSVersion.Version.Major > 5)
        {
            bool aeroEnabled;
            iGNativeMethods.DwmIsCompositionEnabled(out aeroEnabled);
            return aeroEnabled;
        }
        return false; 
    } 
```

如我错了请纠正我。

# css - Twitter hashtag css3 硬币动画

> ID：13455242
> 
> 赞同：1
> 
> 时间：2012-11-19T13:53:49.697
> 
> 标签：css, animation, twitter, hashtag

首先，我想为我的问题含糊不清以及是否已经回答而道歉。

我的任务是提出一个由 tweeter 驱动的 facebook 应用程序概念`hashtags`。我将制作一个硬币旋转动画（在 css 或 flash 中完成），当用户使用提供的主题标签发推文时，他的硬币会继续旋转，除非他在两小时间隔内不发推文。

解决这个问题的最佳方法是什么？我一直在试图找到一些关于如何做到这一点的信息，但到目前为止我所有的搜索都是徒劳的，只会导致推文的可视化（我不需要）。

如果有人能对此事提出一些看法，将不胜感激。

# c# - 是否可以使用 FluentNHibernate 将具有空格的 varchar 映射到枚举

> ID：13455244
> 
> 赞同：2
> 
> 时间：2012-11-19T13:53:51.730
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

标题问了一切。在数据库中，我有遗留数据，其中包含带有空格的文档标题，例如“标题持有者”等。我希望能够使用 Fluent NHibernate 将这些直接映射到枚举，但我遇到了解析错误。我找不到任何可以使用的自定义转换器的迹象，有人可以提出任何建议吗？

我的映射看起来像这样。

```
Map(x => x.DocumentName).Nullable().CustomSqlType("varchar(50)"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:41:25.880

您将需要实现自己的 NHibernate IUserType，并且您的大部分逻辑将在 NullSafeGet() 和 NullSafeSet() 方法中。

您还需要创建自己的内部枚举到字符串映射。您可以使用将字符串作为键和枚举值作为值的字典，因此您的逻辑基本上将围绕在该字典中查找值以从字符串转换为枚举，反之亦然。另一种选择可能是使用一个属性来装饰你的每个枚举值与它的名称的字符串版本，然后在运行时使用反射进行转换......

以下是一些创建自定义 IUserType 的示例：（下面的第一个链接应该为您指明正确的方向）

*   [使用 NHibernate 的 IUserType 将字符串映射到布尔值](http://lostechies.com/rayhouston/2008/03/23/mapping-strings-to-booleans-using-nhibernate-s-iusertype/)
*   [映射不同的类型 - IUserType](http://nhforge.org/blogs/nhibernate/archive/2009/10/15/mapping-different-types-iusertype.aspx)
*   [在 nHibernate 中实现自定义类型](http://blog.miraclespain.com/archive/2008/Mar-18.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:36:14.060

可以编写一个自定义类型，在从数据库读取数据时消除空格，然后您可以将转换后的字符串映射到枚举。这种方法的问题在于将数据保存回数据库时，因为您不知道在哪里重新添加空间（除非您对意大利面条代码感到满意以跟踪在哪里插入空间）。

或者，您可以在枚举类型的类上添加一个附加属性，该属性根据映射到数据库的属性中的内容返回枚举。下面的例子

```
public class Document
{

    public virtual string DocumentName {get; set;}

    public EDocumentName Name 
    {
        get 
        {
            if (DocumentName == "Title Holder")
            {
                return EDocumentName.TitleHolder;
            }
        }
        set
        {
            if(value == EDocumentName.TitleHolder)
            {
                DocumentName = "Title Holder";
            }
        }
    }
}

public enum EDocumentName
{
    TitleHoldder
} 
```

# python - 递归期间数组变为无

> ID：13455248
> 
> 赞同：0
> 
> 时间：2012-11-19T13:54:01.213
> 
> 标签：python, arrays, recursion

我试图将每个元素匹配`matches[0]`到每个元素`matches[1]`并最终获得输出哪个元素与哪个匹配。但在递归过程中，变量`path`变为`None`.

**功能**

```
def improve(ncipher,x): #probably do not have any problem
    for i in x:
        try:
            if x[i]!=ncipher[i]:
                return 0
        except:
            ncipher[i]=x[i]
    return ncipher
def find_indexes(matches,cipher,path):  #the function causing problems
    print 'matches=',matches,'cipher=',cipher,'path=',path,'\n'
    if len(matches)==0:
        return [(0)]
    for x in matches[0]:
        print 'x=',x,'path=',path
        cipher=improve(cipher,x[1])
        if cipher==0:
            return [(0)]
        path=find_indexes(matches[1:],cipher,path)
        if path==[(0)]:
            return [(0)]
        else:
            print 'path=',path
            return path.append((x)) 
```

**输出**

```
matches= [[['season', {'1': 's', '3': 'a', '2': 'e', '5': 'n', '4': 'o'}]], [['month', {'8': 'h', '5': 'n', '4': 'o', '7': 't', '6': 'm'}]]] cipher= {} path= [0] 

x= ['season', {'1': 's', '3': 'a', '2': 'e', '5': 'n', '4': 'o'}] path= [0]
matches= [[['month', {'8': 'h', '5': 'n', '4': 'o', '7': 't', '6': 'm'}]]] cipher= {'1': 's', '3': 'a', '2': 'e', '5': 'n', '4': 'o'} path= [0] 

x= ['month', {'8': 'h', '5': 'n', '4': 'o', '7': 't', '6': 'm'}] path= [0]
matches= [] cipher= {'1': 's', '3': 'a', '2': 'e', '5': 'n', '4': 'o', '7': 't', '6': 'm', '8': 'h'} path= [0] 

path= [0]
path= None

Traceback (most recent call last):
  File "E:\timepass\py\interviewstreet\fb_cipher.py", line 115, in <module>
    find_match(message,words)
  File "E:\timepass\py\interviewstreet\fb_cipher.py", line 67, in find_match
    sol_indexes=find_indexes(matches,{},[0])
  File "E:\timepass\py\interviewstreet\fb_cipher.py", line 24, in find_indexes
    return path.append((x))
AttributeError: 'NoneType' object has no attribute 'append' 
```

**问题**

1.  为什么在递归过程中会`path`变成？`None`
2.  我该如何克服这个问题并存储相互匹配的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:56:23.293

`return path.append((x))``path`就地编辑并返回`None`。如果要返回 的新值`path`，请将其分成两行。

```
path.append((x)) 
return path 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:57:24.820

This is because of the last line in your code.

`list.append()` returns `None`.

Change it to:

```
path.append(x)
return path 
```

or

```
return path + [x] 
```

# ms-word - 驯服 MS Word 语言偏好

> ID：13455249
> 
> 赞同：3
> 
> 时间：2012-11-19T13:54:06.403
> 
> 标签：ms-word

（这不是一个严格的编程/编码问题，但它让你远离编码......）

MS Word (2010) 经常*将校对语言*（应该是英语）更改为我不使用的语言（德语）。发生这种情况没有明显的原因，也没有文档中任何地方的“错误”语言。结果是令人讨厌的红色下划线比比皆是。我尝试了我、其他人和文档能想到的一切，但它不起作用：

*   MS Word 校对语言首选项设置为英语
*   MS Word 编辑语言默认为英语
*   MS Word 显示语言默认为英语，最高优先级
*   MS Word 帮助语言首选项默认为英语，最高优先级（尽管很可能不相关）
*   MS Word 本身是“英语”
*   操作系统“格式”为英语（美国）（Win7 区域设置）
*   操作系统“位置”是英语（美国）
*   操作系统显示语言为英文
*   整个操作系统都是英文的

唯一不使用英语的是我的键盘和键盘设置。是德语。

**我应该怎么做才能让 MS Word 暂时忘记**德语**？**

不是解决方案：

*   更改键盘硬件（我想知道变音符号在哪里，而且我仍然用德语写文本。那么当我想要德语时我会得到英语吗？;)）
*   完全关闭校对（我的打字错误率相当高，我读了整个单词都没有错别字）
*   卸载德语（我确实使用这种语言）

解决方案可能是：

*   说这是错误，对此无能为力:(
*   正确配置它:)
*   暂时摆脱德语的任何脚本/代码/自动化/VBA解决方案

非常感谢！

我有没有提到我更喜欢 Lyx/LaTeX/DocBook ......但是，唉，这是有原因的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:14:12.567

最简单的解决方案可能是： 1\. 找出此设置的存储位置（搜索注册表）。2\. 创建一个更改设置的小程序。3\. 创建一个快捷方式以便于访问该程序（或者可能是在 Word 启动之前更改设置的脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:21:04.317

您是否在 Review / Language / Set Proofing Language 中取消选中“Detect language automatically”？

# linux - 如何使用过时的选项编译 linux 内核？

> ID：13455252
> 
> 赞同：0
> 
> 时间：2012-11-19T13:54:17.137
> 
> 标签：linux, kernel, xilinx, obsolete

好的，所以我有这个嵌入式内核，它的网卡过去可以与 LLTEMAC 选项一起正常工作。带有 LL_TEMAC 的新版本没有。我仍然在源代码中看到带有 LLTEMAC 的代码，但在 .config 文件中的可用选项中没有：

```
$ ack-grep LLTEMAC
drivers/net/ethernet/xilinx/xilinx_lltemac/Makefile:10:obj-$(CONFIG_XILINX_LLTEMAC) := xilinx_temac.o
drivers/net/ethernet/xilinx/xilinx_lltemac/xlltemac_main.c:2: * Xilinx Ethernet: Linux driver for the XPS_LLTEMAC core.
drivers/net/ethernet/xilinx/xilinx_lltemac/xlltemac_main.c:452:#ifdef CONFIG_XILINX_LLTEMAC_MARVELL_88E1111_RGMII
...
include/linux/xilinx_devices.h:83:/* LLTEMAC platform data */ 
```

有没有办法用这个删除的选项编译内核？如免责声明所述，简单地添加`CONFIG_XILINX_LLTEMAC=y CONFIG_XILINX_LLTEMAC_MARVELL_88E1111_GMII=y`到 .config 文件不会做任何事情：`# Automatically generated file; DO NOT EDIT.`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:36:27.537

为什么不更新这个单独的驱动程序以了解新的配置选项？

# flash - ChromaKey FLV 透明度

> ID：13455255
> 
> 赞同：3
> 
> 时间：2012-11-19T13:54:26.153
> 
> 标签：flash, ffmpeg, flv, video-processing, chromakey

目前我有超过 20000 个 FLV。它们目前没有 Alpha 通道，都是黑色背景上的 CGI 生成文本。

**我的问题：** 我需要能够移除黑色背景并使其透明，这样我才能使用这些视频在我的 Flash 项目中叠加图片。

它需要是一个自动化的过程，可以遍历整个视频目录并删除背景

**我试过什么？**

在过去的三天里，我一直在拔头发。目前我看到的选项是为 ffmpeg 编写一个自定义过滤器。

**最终目标：**

在 flex 内置的 adobe air 应用程序中，将 flv 视频叠加在随机生成的视频上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:59:56.470

我刚刚找到了这个 - 包括来源。它非常令人印象深刻，只需进行一些调整，可能就是您正在寻找的东西。我喜欢玩实时视频过滤器。

[http://blog.onthewings.net/2009/12/10/chroma-key-and-thresholding-in-flash-pixel-bender-revised/](http://blog.onthewings.net/2009/12/10/chroma-key-and-thresholding-in-flash-pixel-bender-revised/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:34:56.393

如果您有 gstreamer，这里有一个管道可以执行此操作并查看您的输出。这个用另一个视频的内容替换了视频 hi.mp4 中的全黑。使用这些值来获得你需要的东西。如果您的文本或背景（其中之一）具有统一的颜色并在一定范围内，则将起作用。

gst-launch filesrc 位置=hi.mp4 ！解码bin2！ffmpeg色彩空间！alpha alpha=1 方法=3 目标-r=0 目标-g=0 目标-b=0 白色灵敏度=0 黑色灵敏度=128 ！视频混音器名称=vm！ffmpeg色彩空间！sdlvideosink 文件rc location=hi2.mp4 ！解码bin2！ffmpeg色彩空间！阿尔法阿尔法= 1！虚拟机。

然后，您可以用编码器 x264enc 替换 sdlvideo 接收器，并通过其中一个视频中的音频来创建您的容器。

如果您不知道 gstreamer 是什么或不倾向于使用它，那么带有 frei0r 的 ffmpeg 将起到 lordneckbeard 提到的作用。我只是觉得这样更快。:)

如何到达这条管道？

sudo apt-get install gstreamer-0.10 base，好坏和丑陋以及 libav/ffmpeg 插件和 gstreamer-tools 包 - 如果您想从源代码构建，请查看 gstreamer.net。

上面的命令行将工作并显示文件。将 sdlvideo 接收器替换为：x264enc bitrate= ！！文件接收器位置=文件名.flv

如果您之前从未使用过 gstreamer，您将不得不阅读一下管道是什么以及如何运行管道。大量可用的教程。如果您不倾向于使用 gstreamer，那么其他答案中指出的其他工具可能会有所帮助。但是我建议您使用 gstreamer，因为如果您将来需要，您还可以使用它进行其他操作。

# python - 将解码的 jpeg 绘制到 cairo 表面

> ID：13455256
> 
> 赞同：4
> 
> 时间：2012-11-19T13:54:30.013
> 
> 标签：python, jpeg, decode, cairo

我正在尝试将解码的 jpeg 绘制到开罗表面......但是我有点卡住了，我不知道如何从

```
import cairo
import Image

path_to_jpeg = "/home/seif/Pictures/prw.jpg"
surface = cairo.PDFSurface ("out.pdf", 1000, 1000)
ctx = cairo.Context (surface)

image = cairo.ImageSurface(cairo.FORMAT_ARGB32, 1000, 1000)
dt = Image.open(path_to_jpeg)
dimage = dt.load() 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:03:58.070

这应该可以解决问题。您必须首先将图像转换为 png，这似乎是您可以用来创建表面的唯一格式。这就是下面的大部分代码正在做的事情。我建议你看看[这个问题](https://stackoverflow.com/q/7099630/1699750)，它对我创建下面的代码有很大帮助。

```
import Image, StringIO
from cairo import PDFSurface, Context, ImageSurface

pdf = PDFSurface("out.pdf", 1000, 1000)
cr = Context(pdf)
im = Image.open("/home/seif/Pictures/prw.jpg")
buffer = StringIO.StringIO()
im.save(buffer, format="PNG")
buffer.seek(0)
cr.save()
cr.set_source_surface(ImageSurface.create_from_png(buffer))
cr.paint() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:16:32.427

如果使用 cairocffi 而不是 pycairo（API 兼容），该`cairocffi.pixbuf`模块提供与 GDK-PixBuf 的集成，用于将各种图像格式加载到 cairo。

[https://cairocffi.readthedocs.io/en/stable/pixbuf.html](https://cairocffi.readthedocs.io/en/stable/pixbuf.html)

例子：

```
from cairocffi import ImageSurface, pixbuf

def get_image(image_data: bytes) -> ImageSurface:
    return pixbuf.decode_to_image_surface(image_data)[0]

def load_image(image_file_path: str) -> ImageSurface:
    with open(str(image_file_path), 'rb') as file:
        return get_image(file.read()) 
```

# ruby-on-rails - 在 ActiveAdmin 或打印解决方案中动态更改分页

> ID：13455258
> 
> 赞同：4
> 
> 时间：2012-11-19T13:54:36.190
> 
> 标签：ruby-on-rails, activeadmin

我是 Activeadmin 和 rails 的新手，我需要一些帮助。

我有一个分页模型，我希望允许用户更改分页值或完全禁用它，因此它可以打印（到打印机）所有记录（或过滤的记录）。

我知道我可以在 :before_filter 中使用@per_page 设置分页，但我不知道如何在执行期间更改此值。

为了解决需要显示所有未分页记录的问题，我定义了一个自定义页面，但是在这个页面中，过滤器或范围不起作用，所以它有点没用。

如何在 Active Admin 中创建打印按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-14T09:56:06.563

这是一种解决方法，我知道这不是最好的解决方案，但它确实有效！:) 这是 app/admin/mymodel.rb 文件

```
ActiveAdmin.register MyModel do
  before_filter :paginate
  #other code

  controller do
    def paginate
      @per_page = params[:pagination] unless params[:pagination].blank?
    end
  end

  index do
    panel "Pagination" do
      render partial: "paginate", locals: {resource: "mymodels"}
    end
    #other code
  end

  #other code
end 
```

对于 app/views/admin/articles/paginate.html.haml

```
#pagination_form
  = form_tag do 
    = label_tag :pagination, "Number of " + resource + " per page : "
    = text_field_tag :pagination
    = submit_tag "Filter"

:javascript
  $("#pagination_form form").submit(function(e){
    e.preventDefault();
    window.location = "/admin/#{resource}?pagination=" + $("#pagination").val();
  }) 
```

希望我的回答能有同样问题的人:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T10:44:47.330

我找到了一个解决方案，我正在为有同样问题的人回答我自己的问题。这可能不是最好的解决方案，但它有效，如果有人有更好的方法，请分享：

```
ActiveAdmin.register mymodel do
    before_filter :apply_pagination
    # other code

    index :download_links => false, :as => :table, :default => true do 
      if params[:pag].blank?
        div link_to(I18n.t("text_for_the_link"), 'mymodel?pag=1', :class => "class_for_link")
       else
        div link_to(I18n.t("print.print"), 'mymodel', :class => "class_for_link")                     
      end
      # other code
    end

    controller do
      def apply_pagination
         if params[:pag].blank?
           @per_page = 50
          else
           @per_page = 99999999                    
       end
       # other code
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-06T16:43:12.300

我发现您可以通过在资源上注册以下行来定义它：

```
ActiveAdmin.register MyModel do
  config.per_page = [20, 50, 100, 200]
end 
```

它会自动在索引分页中添加一个选择框，其中包含数组中给定的预设值。

# excel - Excel没有选择所有行

> ID：13455263
> 
> 赞同：0
> 
> 时间：2012-11-19T13:54:53.317
> 
> 标签：excel, excel-2007, ms-office, excel-2010

当我在 Excel 2007 中单击 CTRL+A 复制所有 1000 行时，我注意到 excel 进行了某种自动分组并选择例如 15 行作为仅一行。当我粘贴行时，仅粘贴 1000 行中的 300 行。

如何在不自动分组的情况下选择所有行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:58:56.817

Sorry - my mistake - I forgot to include all the values in the filter. :)

# c# - 根据 HTML 页面上的位置对 HtmlNode 进行排序（C#/XPath）

> ID：13455265
> 
> 赞同：2
> 
> 时间：2012-11-19T13:55:00.363
> 
> 标签：c#, html, xpath, html-agility-pack

**语境：**

我正在解析[此服务](http://sintegra.sefaz.al.gov.br/consulta_empresa_pesquisa.asp)的查询结果，但结果的 HTML 是一团糟。

我的目标是构建一个“KeyValue”对，其中每个“属性和值”都显示为该查询的结果。

目前只有一种方法出现在我的脑海中来解决它。

**解析逻辑：**

1.  选择所有属性节点
2.  选择所有值节点
3.  在构建键值对的每个集合上匹配它们的“索引”

例如：属性 [0] 和值 [0] ->（在此服务中，这将是“CNPJ”和“12.272.084/0001-00”）。

**问题：**

即使我设法找到一个 XPath 表达式来获取所有属性节点：

```
attrNodes = htmlDoc.DocumentNode.SelectNodes ("//td[@bgcolor='#f1f1b1']/*/font[@face='Verdana']"); 
```

我也无法为值节点找到一个，因为有不同类型的节点在由 Html 呈现时实际上看起来相同（例如“b”和“strong”）。

甚至有不同层次结构的节点阻止我在 XPath 上使用通配符（“*”）来解决它（例如，单个标签或嵌套的两个标签）

**我的目标：**

1.  编写 XPath 以使用值到达每个不同的节点子集
2.  将所有节点放在一个集合中
3.  根据每个节点在 Html 中的位置对该集合的节点进行排序（在 HTML 中首先出现的节点将位于列表的开头）

知道如何实现我的目标吗？

**HTML 示例：**

你可以在[这里检查一下](http://pastebin.com/TuBE29HX)

**或通过在 CNPJ 文本框中键入： 12272084000100** 并单击“Pesquisar”来查询自己的服务。之后，您只需单击文本“Companhia Eletrica de Alagoas”

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:15:15.737

我刚刚找到了一个可以在[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)框架的“HtmlNode”类上找到的属性，它设法解决了我的问题。

根据有关 HtmlNode 类的[文档：](http://www.kbs.uni-hannover.de/~minack/beagle++/beagle-0.0.13.2-doxygen/d5/d8d/classHtmlAgilityPack_1_1HtmlNode.html)

```
StreamPosition
Gets the stream position of this node in the document, relative to the start of the document. 
```

这是我的测试的输出，使用了在同一个 Html 页面中找到的表列表（用于测试目的的表）

```
// HtmlNodeCollection of Tables
tableNodes[0].StreamPosition
925
tableNodes[1].StreamPosition
1651
tableNodes[2].StreamPosition
2387 
```

使用此 StreamPosition 作为参数对我的列表进行排序以解决我的问题。

```
List<HtmlNode> OrderedList = valueNodes.OrderBy ( node => node.StreamPosition ).ToList<HtmlNode>(); 
```

# ruby - watir webdriver 进入 iframe 并获取元素的 src 并单击链接

> ID：13455269
> 
> 赞同：2
> 
> 时间：2012-11-19T13:55:04.300
> 
> 标签：ruby, watir, watir-webdriver

使用 Watir-Webdriver，我想将焦点更改为 iframe 并获取其中的链接。

这是html代码

```
<iframe id="top_right" src="otherwebsite.com/need content src">
<a href="need this"> <img src="need this" /> </a> 
```

所以我想要进入`iframe`，获取它的 src，从元素中捕获 the`href`和 the ，最后单击这些元素以检索数据。`src``img`

这是我使用 Ruby 的尝试：

```
require 'watir-webdriver'
b = Watir::Browser.new
b.goto 'somesite.com'
b.wait
f = b.frame(:id => 'top_right').link(:index => 1).click 
```

我已经到了这里，但不幸的是我仍然得到以下回复：

```
in `assert_exists': unable to locate element, using {:index=>1, :tag_name=>"a"} (Watir::Exception::UnknownObjectException) 
```

因此，如果有人有帮助，那将是很棒的 tnx。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:12:08.097

您正在尝试单击`:index=>1`框架中的第二个链接 ( )。看起来框架没有两个链接。尝试单击第一个链接 ( `:index=>0`)：

```
b.frame(:id => 'top_right').link(:index => 0).click 
```

# asp.net - 为什么我的隐藏输入写的是：value="value" 而不是 true/false？

> ID：13455270
> 
> 赞同：59
> 
> 时间：2012-11-19T13:55:10.570
> 
> 标签：asp.net, asp.net-mvc-4

我有一个 MVC4 站点，带有（作为隐藏表单的一部分）：

```
<input name="somefield" type="hidden" value="@ViewBag.Test"/> 
```

的`ViewBag.Test`值为`true`。表单字段正在发布到表单的输入参数：

```
public ActionResult SomeAction(bool somefield = false, ...) 
```

但`somefield`总是`false`。经过调查，我看到源代码有：

```
<input name="somefield" type="hidden" value="value"/> 
```

但是，我*知道*这曾经有效。发生了什么事，我该怎么办？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-19T13:55:10.570

这种行为在 MVC3 和 MVC4 之间发生了变化。在 MVC3 中，如果你有：

```
<input name="somefield" type="hidden" someprop="@(SomeBooleanExpression)"/> 
```

它会非常字面地写：

```
<input name="somefield" type="hidden" someprop="True"/> 
```

但是，在 MVC4 中，它遵循“复选框”等规则，因此如果值为`true`：

```
<input name="somefield" type="hidden" someprop="someprop"/> 
```

如果是`false`，则完全省略：

```
<input name="somefield" type="hidden"/> 
```

为了解决这个问题，请考虑`.ToString()`：

```
<input name="somefield" type="hidden"
   someprop="@(SomeBooleanExpression.ToString())"/> 
```

然后遵循字符串规则而不是布尔规则。

# button - 在按钮单击时添加下拉菜单 - Windows 8

> ID：13455273
> 
> 赞同：2
> 
> 时间：2012-11-19T13:55:15.697
> 
> 标签：button, drop-down-menu, windows-8, microsoft-metro

我想`drop down menu`在用户单击 a 时显示 a `button`。类似的东西，`comboBox`但不是组合框，而是一个按钮。我该怎么做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:41:45.720

我使用 PopupMenu 解决了它。这是供其他人参考的代码。

```
 public static Rect GetElementRect(FrameworkElement element)
    {
        GeneralTransform buttonTransform = element.TransformToVisual(null);
        Point point = buttonTransform.TransformPoint(new Point());
        return new Rect(point, new Size(element.ActualWidth, element.ActualHeight));
    }

    private async void Button_Click(object sender, RoutedEventArgs e)
    {
        var menu = new PopupMenu();
        menu.Commands.Add(new UICommand("Label", (command) =>
        {
            //do work
        }));

        // We don't want to obscure content, so pass in a rectangle representing the sender of the context menu event.
        // We registered command callbacks; no need to handle the menu completion event
        var chosenCommand = await menu.ShowForSelectionAsync(GetElementRect((FrameworkElement)sender));
        if (chosenCommand == null) // The command is null if no command was invoked.
        {

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:54:49.933

米兰，

您需要创建一个自定义控件或结合了按钮和弹出窗口的用户控件。您也可以使用按钮和弹出窗口就地实现此功能。我建议您查看 Callisto 的菜单控件并从那里开始实施您的下拉菜单： [Callisto 控件（包括菜单）](https://github.com/timheuer/Callisto)

# entity-framework - 一个表到几个类，使用继承

> ID：13455277
> 
> 赞同：2
> 
> 时间：2012-11-19T13:55:30.213
> 
> 标签：entity-framework

我有一些类（和表）`Source1`，例如`Source2`等。我创建了一个表来存储源 Quant 值。表看起来像

```
SourceQuant(ID int PRIMARY KEY, SourceKeyID int, TypeID int, Quant money) 
```

我通过 TPH 使用 EF 继承策略，通过 TypeID 它知道存储的是哪种类型。所以我有大约10个不同的课程。
现在，当量化从一个存储移动到另一个存储时，我需要创建像动作历史这样的表。我创建的表格看起来像

```
ActionHistory(
  ID int Primary Key,
  SourceTypeID int, SourceKeyID int, 
  DestTypeID   int, DestKeyID   int,
  Quant money) 
```

如何在 EF 中做到这一点而不创建 90 (10*9) 个类，如,`Source1ToSorce2`等？`Source1ToSource3``Source2ToSource4`

# c++ - 将 CJK 音译为拉丁语——最好用 C++

> ID：13455282
> 
> 赞同：0
> 
> 时间：2012-11-19T13:55:43.867
> 
> 标签：c++, cjk, icu, transliteration

我正在尝试编写一个可以将 CJK 音译为拉丁语（即拼音、罗马字等）的程序。例如，您提供中文、日文或韩文文档作为输入，然后将音译版本转换为拉丁文作为输出。

我是这个领域的新手，所以请多多包涵。

显然，首先我需要检测语言的类型（中文、日文或韩文），然后再进一步。然后，据我所知，为了进行音译，我需要将文本分成单词，因为在这些语言中，单词之间没有*空格*。这称为[分词](http://en.wikipedia.org/wiki/Word_segmentation#Word_segmentation)。最后在找出我需要将它们音译成拉丁语的单词之后。

所以这是我的问题：

1.  有很多（当然不是！最好说一些）库可以完成音译工作，因为我正在寻找 C/C++ 中的开源库，所以我找到了 Adson（仅适用于中文）和 ICU4C。从 Adson 克隆的 Git 存储库[没有编译](https://stackoverflow.com/questions/13439914/error-conflicting-declaration-cant-a-pointer-be-an-int)。而且我找不到简单、直接的 ICU4C 教程。如何找到有关 ICU4C 使用的教程？你知道任何其他将 CJK 音译为拉丁语的图书馆吗？如果准确率更高（~90%），我可以忘记它是用 C++ 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:16:01.573

[ICU： http](http://userguide.icu-project.org/transforms/general) ://userguide.icu-project.org/transforms/general 中有示例，ICU 50 现在有 CJK 分词。该`uconv`示例可以与`uconv -f utf-8 -t utf-8 -x 'Any-Latin'` 通过 Any-Latin 变换之类的东西一起使用。不过，这并没有考虑到语言。

# iphone - 以编程方式关注 UITextView 不起作用

> ID：13455283
> 
> 赞同：0
> 
> 时间：2012-11-19T13:55:59.367
> 
> 标签：iphone, ios, xcode, uitextview, first-responder

在将帖子关闭为**重复**之前，相信我，我搜索了 2 天，但仍然一无所获。我会尽量说清楚：

我有一个带有 textview 的视图。我需要在 textview 上自动设置焦点，这样键盘才会出现。

PostView.h

```
@interface PostView : UIViewController{
UITextView *txtPesto;
}
@property (nonatomic,retain) IBOutlet UITextView *txtPesto;
@end 
```

PostView.m

```
#import "PostView.h"
@implementation PostView
@synthesize txtPesto;

- (void)viewDidLoad
{

    [super viewDidLoad];
   [txtPesto becomeFirstResponder];
} 
```

由于一些非常奇怪的原因，我的代码无法正常工作，尽管我尝试了许多示例和不同的方法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:20:19.500

从我的评论中回答（结束问题）：右键单击 textView 和“新的引用出口”，也许这会有所帮助？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:06:55.477

您在 .h 文件中声明`txtPesto`了两次：

```
@interface PostView : UIViewController{
    UITextView *txtPesto;
}
@property (nonatomic,retain) IBOutlet UITextView *txtPesto;
@end 
```

当您将其声明为属性时，您无需再次执行此操作。所以删除额外的声明，并使用这个：

```
@interface PostView : UIViewController

@property (nonatomic,retain) IBOutlet UITextView *txtPesto;

@end 
```

我没有看到任何其他`becomeFirstResponder`不起作用的原因。

# javascript - Javascript / JQuery if 语句不起作用

> ID：13455285
> 
> 赞同：-1
> 
> 时间：2012-11-19T13:56:07.833
> 
> 标签：javascript, jquery

显示的代码的目的是按时间添加一些提醒。这些案件是针对一周中的不同日子和那几天的特定时间的。奇怪的是，有些语句最不工作，但我看不出是什么破坏了代码：

```
 function refreshTime() {
  var now = getTime();
  $('#date').html(now.day + ', ' + now.date + '. ' + now.month);
  $('#time').html("<span class='hour'>" + now.hour + "</span>" + "<span class='minute'>" + now.minute + "</span>" + "<span class='second'>" + now.second + "</span>");
  if (now.day != "Sonntag" && now.day != "Samstag")
    {
    if (now.hour == "9" && now.minute >= "50")
      {
      var left = "60" - now.minute;
      $('#gh').html("<span class='gh_remind'>Grosshandel einstellen in " + left + " Minuten!</span>");
      }
    if (now.hour == '11' && now.minute >= '50')
      {
      var left = '60' - now.minute;
      $('#gh').html("<span class='gh_remind'>Grosshandel einstellen in " + left + " Minuten!</span>");
      } 
    if (now.hour == '14' && now.minute >= '50')
      {
      var left = '60' - now.minute;
      $('#gh').html("<span class='gh_remind'>Grosshandel einstellen in " + left + " Minuten!</span>");
      }
    if (now.hour == "17" && now.minute >= "50")
      {
      var left = "60" - now.minute;
      $('#gh').html("<span class='gh_remind'>Grosshandel einstellen in " + left + " Minuten!</span>");
      }
     else
     {
     $('#gh').html("");
     }      
    }
  if (now.day == "Samstag")
    {
    if (now.hour == "9" && now.minute >= "50")
      {
      var left = "60" - now.minute;
      $('#gh').html("<span class='gh_remind'>Grosshandel einstellen in " + left + " Minuten!</span>");
      }
    if (now.hour == "12" && now.minute >= "50")
      {
      var left = "60" - now.minute;
      $('#gh').html("<span class='gh_remind'>Grosshandel einstellen in " + left + " Minuten!</span>");
      } 
    if (now.hour == "13" && now.minute >= "50")
      {
      var left = "60" - now.minute;
      $('#gh').html("<span class='gh_remind'>Grosshandel einstellen in " + left + " Minuten!</span>");
      }     
    else
     {
     $('#gh').html("");
     }         
    }

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:58:44.610

字符串不是数字。除非您确实希望它是一个字符串，否则不要在数字周围使用引号。

```
> console.log("1">"50")
  false
> console.log("9">"50")
  true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:05:20.797

考虑一下：

```
var a = 'a', b;
if (a == 'a') {
  b = 'right';
}
if (a == 'c') {
  b = 'wrong';
}
else {
  b = 'FOOBAR!';
}
alert(b); 
```

即使您（可能）期望在该结构的末尾`b`存储价值，它 - 惊喜，惊喜！- 将包含。原因是如果你所有的s 都这样写，它们是相互独立的。第一个将字符串分配给变量 - 但第二个，通过分支，会很高兴地重新分配它（给一些 foobar）。`'right'``if``FOOBAR``if``'right'``b``else`

如果要创建`if`s 链，请改用`if - else if - else`语法：

```
var a = 'a', b;
if (a == 'a') {
  b = 'right';
}
else if (a == 'c') {
  b = 'wrong';
}
else {
  b = 'FOOBAR!';
}
alert(b); 
```

现在这会告诉你`right`事情，对吧？)

# magento - 只允许管理员在 Magento 前端购买产品

> ID：13455290
> 
> 赞同：0
> 
> 时间：2012-11-19T13:56:22.497
> 
> 标签：magento

我需要以某种方式设置一个 Magento 商店来禁用购买一些产品，而是显示一条消息，它们只能在实体店购买。不同之处在于，店主/管理员必须能够代表客户*在前端“购买”这些产品——所有支付选项在后端都不可用。*

那么，有没有办法只允许某些客户/用户购买某些产品，并向所有其他客户和匿名访问者显示“非出售”通知？（不是“缺货”。）

我曾想过创建一个特殊的商店视图或自定义设计，甚至使用一些 Javascript 技巧来防止未经授权的访问者购买这些产品。有什么聪明的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:12:00.490

您可以尝试覆盖 CartController (app/code/core/Mage/Checkout/controllers/CartController.php) 中的 addAction 方法，并创建一个检查用户级别的条件语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:18:32.697

期待创建自定义购物车价格规则。默认情况下，它们不能满足您的需求。但这是您逻辑的最佳位置！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:10:38.293

1 - 创建标识这些产品的自定义产品属性

2 - 将所有者/管理员放在一个特殊的客户组中

3 - 任何有“添加到购物车”按钮的地方，您都可以检查上述逻辑，并且仅当客户属于该所有者/管理员客户组时，才应该为这些产品“添加到购物车”

# msbuild - 如何将 msbuild 集成到解决方案中

> ID：13455293
> 
> 赞同：0
> 
> 时间：2012-11-19T13:56:22.700
> 
> 标签：msbuild, visual-studio-2012, build-automation

我正在将 MSBuild xml 任务文件集成到 Visual Studio 2012 解决方案中。该文件执行 2 个任务，1 个针对 StyleCop 进行验证，另一个用于运行 FxCop 分析。我已经从网络上的教程创建了 msbuild 文件。

我的问题是，文件应该存储在文件系统的什么位置？我认为它在解决方案之外。如何设置解决方案来运行此 msbuid 文件？我将 TFS 用于源代码控制，将 TFS Build 2010 用于 CI，因此我也希望将其集成到其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:53:00.080

这是我在我工作的地方布置源代码控制树的方式：

```
Root
 -- Artifacts  (Reports folder for build.  Items are not checked into TFS)
 -- BuildOutput (location where all compiled code is sent.  Items are not checked into TFS)
 -- BuildScripts
   -- ConfigFiles (config files used for different kinds of builds)
   -- MSBuild (MSBuild scripts that I have written for our build)
   -- MSBuild Extensions (MSBuild extension that I use as part of my build)
 -- Database (folder for all database related items)
 -- src (folder for all DotNET source code)
 -- ThirdParty (folder to hold all of our third party dependencies like NUnit, Specflow, etc) 
```

这对我们来说效果很好。

通常，当您想要集成 styleCop 和 FXCop 之类的东西时，您会将它们作为步骤包含在整个构建过程中，而不是直接包含在项目或解决方案中。例如，我管理的构建过程有 12 个不同的步骤。我会做 1) 编译代码，2) 运行单元测试和代码覆盖率，3) 运行集成测试，4) 运行重复查找器等。您可能希望在构建过程中设置相同类型的东西。

我对 TFS Build 没有太多经验（我开始使用JetBrains 的[TeamCity](http://www.jetbrains.com/teamcity/)而不是 TFS Build），但您应该能够修改构建模板以将 MSBuild 脚本集成到构建过程中。我还认为 TFS Build 有一些扩展，允许您直接在构建模板中执行 StyleCop 和 FXCop。

希望这可以帮助。

# c - 蓝牙 SDK 标头中的错误

> ID：13455294
> 
> 赞同：1
> 
> 时间：2012-11-19T13:56:24.407
> 
> 标签：c, sockets, bluetooth

```
#include <Bthsdpdef.h>
#include <BluetoothAPIs.h>
#include <Winsock2.h>
#include <Ws2bth.h>
#include <stdio.h>

#pragma comment(lib, "Bthprops.lib")

int main(void){
    WSADATA wsaData;
    int err;
    DWORD qs_len;
    WSAQUERYSET *qs;
    DWORD flags;
    HANDLE lphLookup;
    int iRet;
    char buff[4096];
    LPWSAQUERYSET pwsaResult = (LPWSAQUERYSET) buff;
    DWORD buffLen = sizeof(buff);
    BTH_ADDR result;

    WORD wVersionRquested = MAKEWORD(2,2);
    err = WSAStartup(wVersionRquested, &wsaData);   //Statrup function

    if(err != 0){
        printf("WSAStartup failed");
        return 1;
    }

    qs_len = sizeof(WSAQUERYSET);
    qs = (WSAQUERYSET *) malloc(qs_len); // Save memory for  WSAQUERYSET structere
    ZeroMemory(qs, qs_len); //zero WSAQUERYSET out

    qs->dwSize = sizeof(WSAQUERYSET);
    qs->dwNameSpace = NS_BTH;
    qs->lpcsaBuffer = NULL;
    flags = LUP_CONTAINERS | LUP_FLUSHCACHE | LUP_RETURN_NAME | LUP_RETURN_ADDR; //details of the device discovery

    iRet = WSALookupServiceBegin(qs, flags, &lphLookup);
    if(iRet == ERROR_SUCCESS){
        printf("WSALookupServiceBegin failed");
        return 1;
    }
    printf("\r\n\t\t\t\tScanning...");

    ZeroMemory(pwsaResult, sizeof(LPWSAQUERYSET));
    pwsaResult->dwSize = sizeof(WSAQUERYSET);
    pwsaResult->dwNameSpace = NS_BTH;
    pwsaResult->lpBlob = NULL;

    while(WSALookupServiceNext(lphLookup, flags, &buffLen, pwsaResult) != ERROR_SUCCESS){
        result = ((BTH_ADDR)qs->lpcsaBuffer->RemoteAddr.lpSockaddr);
        WSAAddressToString(qs->lpcsaBuffer->RemoteAddr.lpSockaddr, sizeof(SOCKADDR_BTH), NULL, (LPWSTR)buff, &buffLen);
        printf("Found: %s - %s", buff, qs->lpszServiceInstanceName);
    }

    WSALookupServiceEnd(lphLookup);
    free(qs);
    WSACleanup();
    return 0;
} 
```

我在 microsoft sdk 文件夹中的 bthsdpdef.h 中有很多语法和缺少类型错误。如：

> bthsdpdef.h(11)：错误 C2146：语法错误：缺少 ';' 在标识符“LowPart”之前，
> 
> bthsdpdef.h(11)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:59:33.977

在文件顶部（#include 上方）添加以下行。这为我修复了编译。

```
#define WIN32_LEAN_AND_MEAN 1 // Don't include Winsock v1
#include <windows.h>
#include <stdlib.h>
#pragma comment(lib, "ws2_32.lib") 
```

您的代码需要包含基本头文件。否则，当编译器来到 bthsdpdef.h 并看到以下内容时，它不知道 ULONGLONG 类型的定义。

```
struct SDP_LARGE_INTEGER_16 {
    ULONGLONG LowPart;
    LONGLONG HighPart;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:31:59.647

我认为编译器错误中有一个提示（我知道，这很令人惊讶，但它确实发生了）。

这些很可能是 C API，但您正在编译为 C++。您的代码确实看起来像 C，因此请仔细检查您的编译器调用。

# html - 这个网站怎么知道我正在打开另一个标签？

> ID：13455304
> 
> 赞同：14
> 
> 时间：2012-11-19T13:57:10.717
> 
> 标签：html, session, browser, web

当我登录一个网站时，我的大学是一个“学习系统”，我发现我无法在打开相同网站的情况下打开新标签。当我这样做时，网站不知何故知道并显示以下消息？

![会话已经运行？](../Images/73669327b5af97ac4dc15f97b7cbc4b2.png)

该站点到底是如何知道我在计算机上打开了哪些选项卡的？据我所知，前端代码不应该访问我的私人浏览器信息。该站点可以使用哪些可访问的信息来确定我已经打开了另一个选项卡？

我正在使用私人计算机访问该站点，并且正在访问的站点不在本地网络上，而是通过 Internet 访问的。因此，没有可能导致这种情况的内部监控软件。我正在使用适用于 Mac 的 Google Chrome 24 Beta。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:11:04.467

一种方法是通过 cookie 和 ID。首先，您登录到该站点并在那里进行会话。这是使用 cookie 管理的；每当您访问网站上的页面时，您的浏览器都会发送一个通常包含某种 id 的 cookie。这样，服务器就可以识别来自您的任何请求，真正来自您。因此，在这种情况下，您的原始标签和新标签都将发送相同的 cookie。

其次，它还可以向您在网站上提交的任何链接或表单添加另一个不同的 ID（称为页面 ID）。因此，页面上的表单可能包含 id 1234，并且任何链接也将包含该 id。您访问的每个新页面都可能包含一个新 ID。因此，在任何时候，站点都知道来自您浏览器的下一个请求（由 cookie 标识）也应该包含另一个 id。如果您以正常方式浏览网站，点击链接，提交表单，这将是真的，一切都会很好。

您的下一个请求不会提交预期的第二个 id 的情况是：

1.  你点击后退按钮（你会发送一个旧的页面 id）
2.  您打开一个新选项卡（这取决于浏览器，但如果它打开您在原始选项卡中已经打开的同一页面，它将发送当前页面 id，而不是服务器期望的下一页 id）

无论哪种方式，您都发送了一个带有服务器不期望的页面 id 的请求，它可以对您所做的事情做出最好的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-18T19:53:16.653

他们在访问他们的网站时跟踪您的鼠标光标移动。这是吸引访客注意力的好方法。当您移动鼠标和希望关闭时，它们会以编程方式进行一些查询。

这是很好的用户体验。

# javascript - 将图像绘制到新创建的画布或缓冲区中的画布

> ID：13455305
> 
> 赞同：0
> 
> 时间：2012-11-19T13:57:14.307
> 
> 标签：javascript, performance, html, html5-canvas

我应该使用什么：绘制到新创建的画布`document.createElement("canvas")`或使用预先初始化的画布元素从缓冲区绘制到画布？实现最大性能和最小内存消耗的最佳方法是什么？这两种方法之间有明显的区别吗？垃圾收集器会删除所有使用 创建的临时画布`document.createElement("canvas")`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:39:09.670

关于`<canvas>`元素的创建方式（Javascript，HTML）没有性能差异。

无论您如何创建元素，都会产生相关成本`<canvas>`，因此您不想在绘制循环中创建许多元素。这个成本是特定于浏览器的，取决于实现，但它可能很高。此外，它可能取决于您是刚刚创建元素还是第一次在其上绘制。

对于实际的绘图操作性能，画布是在屏幕上还是在屏幕外（后台缓冲区）可能很重要。此外，直接访问像素数据（获取数据、放置数据）也会产生相关成本，因为您可能需要先将后台缓冲区从 GPU RAM 下载到 CPU RAM。

# spring-mvc - Spring MVC implementation of WebApplicationInitializer

> ID：13455314
> 
> 赞同：3
> 
> 时间：2012-11-19T13:57:42.983
> 
> 标签：spring-mvc

I have already learned how to configure Spring MVC app with XML so I decided to go ahead.

I read documentation about WebApplicationInitializer and minimizing of XML in application configuration. But when I completed all preparations of the sample application I encountered with 404 page.

Further I put snippets of my code, please give me advices how to make @-based approach properly.

Config file:

```
package com.onet.init;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.UrlBasedViewResolver;

@Configuration
@ComponentScan("com.onet")
@EnableWebMvc
public class BaseConfig {

    @Bean
    public UrlBasedViewResolver setupViewResolver() {
        UrlBasedViewResolver resolver = new UrlBasedViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }

} 
```

Initializer:

```
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration.Dynamic;

import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;

public class Initializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();
        ctx.register(BaseConfig.class);

        Dynamic servlet = servletContext.addServlet("dispatcher", new DispatcherServlet(ctx));
        servlet.addMapping("*.html");
        servlet.setLoadOnStartup(1);
    }

} 
```

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>oneTest</groupId>
    <artifactId>oneTest</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <packaging>war</packaging>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
    </dependencies>

</project> 
```

Controller:

```
package com.onet.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HelloController {

    @RequestMapping(value="/hello")
    public ModelAndView goToHelloWorld() {
        return new ModelAndView("hello-world");
    }

} 
```

index.jsp

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Home page</title>
</head>
<body>
<h1>Home page</h1>
<p>This is a home page.</p>
<p><a href="hello.html">Say Hello</a></p>
</body>
</html> 
```

So when I click on "Say Hello" link I get 404. Entire project you can [download](http://dl.dropbox.com/u/29572172/mvc_spring.zip) from my drop-box.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:07:45.510

我刚刚在您的 Dropbox 中检查了该项目。在我看来，项目的结构是错误的。您将 maven-scructure 与 eclipse-structure 混合在一起。当您使用 Maven 时，您将网络内容放入`src/main/webapp`......而不是`WebContent`像您所做的那样。您可以在[此处](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)查看有关此主题的更多详细信息。

**精简版：**

将文件从`WebContent`to移动并重`src/main/webapp`试。

**长版：**

如果您运行`mvn package`并从目录中提取生成的 *.war `/target`，您将看到它缺少`WebContent`目录中的文件。Maven 期望这些文件位于`src/main/webapp`. 我假设您首先在 Eclipse 中创建了一个“*动态 Web 项目”。*Eclipse 期望像 *.j​​sp 和 co 这样的资源。位于`WebContent`，这就是为什么打电话`index.jsp`工作。但是当涉及到弹簧时它会失败，因为`hello-world.jsp`它不在它应该在的地方。

**怎么修：**

首先将文件从移动`WebContent`到`src/main/webapp`. 然后运行`mvn eclipse:eclipse -Dwtpversion=2.0`。它将生成 Eclipse 的配置（.classpath、.project 等）。在 Eclipse 中刷新项目。现在它应该可以工作了。

# css - Different style for each UL in Opencart Category Module

> ID：13455315
> 
> 赞同：0
> 
> 时间：2012-11-19T13:57:47.680
> 
> 标签：css, categories, opencart

I have the following structure of categories in my Opencart

```
<ul>
<li class="bu">
    <a href="http://brandoutlet.lv/index.php?route=product/category&amp;path=205" class="active">PARENT 1</a>
        <ul>
            <li>
                <a href="/index.php?route=product/category&amp;path=205_66"> CHILD 1</a>
                <ul>
                    <li><a href="index.php?route=product/category&amp;path=205_66_230"> - GRANDCHILD 1</a></li>
                    <li><a href="/index.php?route=product/category&amp;path=205_66_229"> - GRANDCHILD 2</a></li>
                    <li><a href="/index.php?route=product/category&amp;path=205_66_228"> - GRANDCHILD 3</a></li>
                </ul>
            </li>
            <li>
                <a href="/index.php?route=product/category&amp;path=205_67" class="active"> CHILD 2</a>
                <ul>
                    <li><a href="/index.php?route=product/category&amp;path=205_67_231"> - GRANDCHILD 1</a></li>
                    <li><a href="/index.php?route=product/category&amp;path=205_67_217"> - GRANDCHILD 2</a></li>
                    <li><a href="/index.php?route=product/category&amp;path=205_67_216"> - GRANDCHILD 3</a></li>
                    <li><a href="/index.php?route=product/category&amp;path=205_67_215"> - GRANDCHILD 4</a></li>
                </ul>
            </li>
        </ul>
</li>
<li class="bu">
    <a href="/index.php?route=product/category&amp;path=206"> PARENT 2</a>
//....ETC 
```

How can I give Parent, Child and Grandchild different styling (color, weight, decoration)?

I was trying to make it work with JS searching for UL and applying class depending on position, but result is messy and incorrect..

Any ideas? Thanks!

The view file:

```
<ul>
    <?php foreach ($categories as $category) { ?>
    <?php if($category['children']) { ?>
        <li class="bu">
        <?php } else { ?>
        <li class="onit" >
        <?php } ?>
      <?php if ($category['category_id'] == $category_id) { ?>
      <a href="<?php echo $category['href']; ?>" class="active" ><?php echo $category['name']; ?></a>
      <?php } else { ?>
      <a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
      <?php } ?>
      <?php if ($category['children']) { ?>
      <ul>
        <?php foreach ($category['children'] as $child) { ?>
        <li class="onit" >
          <?php if ($child['category_id'] == $child_id) { ?>
          <a href="<?php echo $child['href']; ?>" class="active">  <?php echo $child['name']; ?></a>
          <?php } else { ?>
          <a href="<?php echo $child['href']; ?>">  <?php echo $child['name']; ?></a>
          <?php } ?>
        </li>
        <?php } ?>
      </ul>
      <?php } ?>
    </li>
    <?php } ?>
  </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:02:10.490

您可以搜索和修改生成此表单的 php 文件。比用一些 css 类完成代码。

* * *

**已编辑问题的答案：**
如果您观看 href，您可以看到路径部分在同一代中具有相同数量的变量：

*   父：路径=205
*   孩子：路径=205_66
*   孙子：路径=205_66_230

您可以获得这部分文本，并根据变量编号进行格式化。所以条件看起来像这样：

```
if(count(explode("_",strstr($child['href'],"path=")))==1)
   //Do the formating for parent. 
```

*   使用[strstr()](http://php.net/manual/en/function.strstr.php)在部分之前删除`path=`。如果之前没有 '_' 字符，您可以省略它`path=`。
*   使用[explode()](http://php.net/manual/en/function.explode.php)，您可以将字符串拆分为带有“_”字符的数组。
*   比[count()](http://php.net/manual/en/function.count.php)将计算数组的元素。

比较父母为 1，孩子为 2，孙子为 3。
否则我假设通过重写代码应该有更好的方法来实现这个目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:18:00.530

I think you could maybe do it like this:

```
ul li {
 color:red;
}

ul li > ul li {
 color:blue;
}

ul li > ul li > ul li {
 color:green;
} 
```

# solr - Does Solr have lossless decimals?

> ID：13455317
> 
> 赞同：2
> 
> 时间：2012-11-19T13:57:51.523
> 
> 标签：solr

Does solr have such a datatype? And can I index, sort, facet and perform arithmetic operations etc as if it were float/double?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:02:10.500

如果“无损”是指精度不应该在操作中改变或丢失，那么 BigDecimal 就是你的答案。见下文：

[如何在 Lucene 3.0.1 中索引 BigDecimal 值](https://stackoverflow.com/questions/2730200/how-to-index-bigdecimal-values-in-lucene-3-0-1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T05:42:59.503

对于货币，有一个[货币字段](https://wiki.apache.org/solr/CurrencyField)，它本质上是一个由 TrieLong 支持的定点数。它可以执行除构面范围之外的大多数算术运算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:11:44.593

好吧，由于 Solr 是用 Java 制作的，而 Java 没有绝对的无损精度，所以您可能在 Solr 中也无法做到这一点。但是，你可以试试[TrieDoubleField](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/TrieDoubleField.html)，它与 Java 的 double 精度（即双精度）相同。

# android - Android:Why endless loop in onDraw()?

> ID：13455319
> 
> 赞同：0
> 
> 时间：2012-11-19T13:58:02.530
> 
> 标签：android, android-canvas

I want to draw several pie chart by using a for loop, and the data is stored in an array (`data[][][]`). When each chart draw is completed, I make the top and bottom plus 450 (`top+=450; bottom+=450;`) to avoid the charts to overlap. But the result is that a pie chart moves to the bottom constantly. I try to add `invalidate()` at the end of line but it doesn't work.

```
private String data[][][]=... //store some data
private float left=50,top=100,right=450, bottom=500;

public void onDraw(Canvas c) {

    super.onDraw(c);
    Paint paint = new Paint();
    RectF rec;
    for(int j=0;j<data.length;j++){
        rec=new RectF(left,top,right,bottom);
        //draw a pie chart
        for (int i = 0; i < data[j].length; i++) {
            float drawDegree = (float)Integer.parseInt(data[j][i][1])/100* 360f;
            c.drawArc(rec, -90, drawDegree, true, paint);   
        }

        top+=450;
        bottom+=450;
    }           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:03:22.613

`top`并且`bottom`是实例变量。尝试使它们本地化，将它们移动到`onDraw`方法中。现在您每次`onDraw`调用时都会更改它们，并且它们不会在完成`top=100,bottom=500`后重置`onDraw`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:07:27.000

您的问题的标题非常具有误导性……听起来那里确实没有无限循环。

您应该在 onDraw 函数中初始化顶部和底部。因此，您每次绘制时都从屏幕的“顶部”开始。

此外，您应该尽量不要为每个饼图分配一个新的 Rect。尝试分配一个，使用`offsetTo(50,100)`，然后使用`offset(0, 450)`将其向下移动。

每次调用 invalidate() 只会让你的饼图一次又一次地被绘制......可能不会有多大好处。

# c - ieee754优化

> ID：13455321
> 
> 赞同：1
> 
> 时间：2012-11-19T13:58:06.423
> 
> 标签：c, optimization, ieee-754

Is 函数`__ieee754_pow()`可以通过使用`-O`options 或来优化`ffast-math`。
如果我们使用 nex 代码，则call for`pow`将更改为 call for `cbrt`：

```
double test (double x)
{
  return __ieee754_pow(x, 2./3.);
} 
```

如果答案是否定的，请解释原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:59:26.933

编译器无法知道 的语义`__ieee754_pow`，即无法知道它在做什么“pow”操作。这是因为`__ieee754_pow`没有在任何地方指定名称；它是系统数学库的内部实现细节。无论如何，您根本不应该使用它，甚至不应该知道它存在，除非您正在调试`libm`，所以我不明白这个问题的目的。

# jquery - django loop over request post

> ID：13455324
> 
> 赞同：0
> 
> 时间：2012-11-19T13:58:15.707
> 
> 标签：jquery, django

I have a form and when submit it i send post data:

```
exset   349
exset   495
exset   344
reps    11
reps    22
reps    33
weight  1
weight  2
weight  3 
```

in view i want to save it like this:

```
exset   349
reps    11
weight  1

exset   495
reps    22
weight  2

exset   344
reps    33
weight  3 
```

but in database i have 3 rows with last data. Is it possible to make a loop to save all 3 portion of data?

I use jquery to send request to view:

```
$("form").submit(function() {
    $(".ex_set").each(function() {
        var array = $("input", this).serializeArray();
        //console.log(array);
        //alert(json.exset_id);
    });
}); 
```

Here is my view:

```
def TrackWkDay(request):

workout_log = Workout_log()
    if request.method == 'POST':
        workout_log.exset_id = request.POST.get('exset')
        workout_log.weight = request.POST.get('weight')
        workout_log.reps = request.POST.get('reps')
        workout_log.save()
        message = 'Data saved'
        returned = {'message':message}
        json = simplejson.dumps(returned)
        mimetype = 'application/json'
        return HttpResponse(json, mimetype)
    else:
        return HttpResponse(status=400) 
```

# c# - 获取 Crystal 中的默认值描述

> ID：13455325
> 
> 赞同：0
> 
> 时间：2012-11-19T13:58:17.310
> 
> 标签：c#, crystal-reports

我正在尝试从 Crystal Reports 参数中获取默认值描述。这是我正在使用的代码。为了测试我正在使用消息框的值。这是我的代码。消息框显示为空。

```
foreach (ParameterField param in clsCrystal.cryRtp.ParameterFields)
{
    if (param.Name.Equals("ShowUp"))
    {
        MessageBox.Show( param.DefaultValues[0].Description.ToString());
    }
} 
```

编辑：我想出了如何获取参数字段的默认值的值，但描述仍然在逃避我。这是获取默认值的工作代码。

```
foreach (ParameterField param in clsCrystal.cryRtp.ParameterFields)
{
    if (param.Name.Equals("ShowUp"))
    {
        foreach (ParameterDiscreteValue Dvalue in param.DefaultValues)
        {
            MessageBox.Show("the value is " + Dvalue.Value.ToString() + " and the description... " + Dvalue.Description);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:33:33.717

显然**ParameterFields**不如**DataDefinition.ParameterFields** 我在这个链接上找到了答案。 [http://scn.sap.com/thread/889809](http://scn.sap.com/thread/889809) 似乎*ParameterFields*旨在使向参数添加值更容易，而*DataDefinition.ParameterFields*是真正想要玩的对象，如果你真的想看看周围的东西。

```
foreach (ParameterFieldDefinition param in clsCrystal.cryRtp.DataDefinition.ParameterFields)
{
    if (param.Name.Equals("ShowUp"))
    {
        foreach (ParameterValue parameterValue in param.DefaultValues)
        {
            if (!parameterValue.IsRange)
            {
                ParameterDiscreteValue parameterDiscreteValue = (ParameterDiscreteValue)parameterValue;
                MessageBox.Show(parameterDiscreteValue.Description);
            }
        }
    }
} 
```

代码和文档令人难以置信的令人困惑的是，我实际上可以在我的代码中设置和阅读默认描述。从 Crystal Reports 设计器设置它们时，我只是无法阅读它们。

# java - JavaFX TableView text alignment

> ID：13455326
> 
> 赞同：50
> 
> 时间：2012-11-19T13:58:18.007
> 
> 标签：java, css, tableview, javafx

![enter image description here](../Images/4fa31d97b3214fc23f08a4d7207feece.png)

As you can see on the picture the text alignment for each colum is set to left alignment. Is there any way to change this? So far I've tried within my CSS file:

```
#Cols{
    text-align: right;
} 
```

I have also tried:

```
#Cols{
    -fx-text-alignment: right;
} 
```

Does anyone know how I can change the alignment to right?

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-19T14:41:48.003

### 所有表格列的对齐方式：

从 JavaFX-8 开始，您可以使用新定义的 CSS 选择器`table-column`，

```
#my-table .table-column {
  -fx-alignment: CENTER-RIGHT;
} 
```

对于 JavaFX-2，要实现这一点，请定义一个 CSS 选择器：

```
#my-table .table-cell {
    -fx-alignment: CENTER-RIGHT;
     /* The rest is from caspian.css */

    -fx-skin: "com.sun.javafx.scene.control.skin.TableCellSkin";
    -fx-padding: 0.166667em; /* 2px, plus border adds 1px */

    -fx-background-color: transparent;
    -fx-border-color: transparent -fx-table-cell-border-color transparent transparent;
    -fx-border-width: 0.083333em; /* 1 */
    -fx-cell-size: 2.0em; /* 24 */
    -fx-text-fill: -fx-text-inner-color;
} 
```

**并设置tableview**的 id 。

```
tableView.setId("my-table"); 
```

### 单表列对齐：

从 JavaFX-8 开始，您可以直接将样式应用于`TableColumn`,

```
firstTextCol.setStyle( "-fx-alignment: CENTER-RIGHT;"); 
```

或使用 css，

```
firstTextCol.getStyleClass().add( "custom-align"); 
```

在哪里

```
.custom-align { 
  -fx-alignment: center-right; 
} 
```

对于 JavaFX-2，
要将不同的对齐方式应用于不同的列，您需要为该列设置单元工厂。例如，假设表中的第一列应左对齐，而其他列使用表的默认对齐方式（`CENTER-RIGHT`在您的情况下）。

```
firstTextCol.setCellFactory(new Callback<TableColumn, TableCell>() {
            public TableCell call(TableColumn p) {
                TableCell cell = new TableCell<Person, String>() {
                    @Override
                    public void updateItem(String item, boolean empty) {
                        super.updateItem(item, empty);
                        setText(empty ? null : getString());
                        setGraphic(null);
                    }

                    private String getString() {
                        return getItem() == null ? "" : getItem().toString();
                    }
                };

                cell.setStyle("-fx-alignment: CENTER-LEFT;");
                return cell;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-05-20T04:59:49.993

一个快速的解决方法是在 SceneBuilder 中选择列，然后将属性添加到样式字段

[![在此处输入图像描述](../Images/e777a935b09fa595fafe187a3e6c2c69.png)](https://i.stack.imgur.com/cCrJx.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-13T16:46:14.160

即使这已经两年了，这里还有另一个答案。对于每个表格列都存在一个默认的 css 样式类`.table-column`，因此如果您想更改整个表格列以对齐居右，只需将其放入样式表或内联样式中：

```
.table-column {
  -fx-alignment: CENTER_RIGHT;
} 
```

如果您有一个应该以其他方式对齐的列，例如行标题，完全没有问题，请在该列上附加一个 id，例如 rowHeading 并在您的样式表或内联样式中写入：

```
#rowHeading {
  -fx-alignment: CENTER_LEFT;
} 
```

它应该居中。无需大量编码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-01T19:51:22.113

我用了

```
cell.setAlignment(Pos.CENTER_RIGHT); 
```

代替

```
cell.setStyle("-fx-alignment: CENTER-LEFT;"); 
```

但是如果有这方面的 CSS，我不能把 fx:id 放在一个列上，然后把它的对齐放在一个 CSS 文件中吗？上面有很多代码只是为了设置列对齐。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-21T07:35:29.180

我试过了，它有效

```
@FXML private TableColumn<BookingData,String>colClientMobile;

//Some code
colClientMobile.setCellFactory(new Callback<TableColumn<BookingData, String>, TableCell<BookingData, String>>() {
        @Override
        public TableCell<BookingData, String> call(TableColumn<BookingData, String> param) {
            return new TableCellFormat();
        }
    });

private class TableCellFormat extends TableCell<BookingData, String>{
    @Override
    protected void updateItem(String item, boolean empty) {
        super.updateItem(item, empty); 
        this.setText(item);
        this.setAlignment(Pos.CENTER_RIGHT);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-26T02:46:10.827

再简单不过了。

对于单个列（或任何选择）...

在你的 fxml 中声明一个 styleClass

```
<TableColumn  styleClass="centered-table-column" /> 
```

然后应用css

```
.centered-table-column{
    -fx-alignment: center;
} 
```

或所有列

```
.table-column{
    -fx-alignment: center;
} 
```

# javascript - 字符串到二维数组

> ID：13455327
> 
> 赞同：1
> 
> 时间：2012-11-19T13:58:26.250
> 
> 标签：javascript, jquery

我想转换这个字符串：

```
'[
  ['Row1 of first array', 'Row2 of first array'],
  ['Row1 of 2nd array', 'Row2 of 2nd array']  
]' 
```

变成一个包含三个一维数组和两项的数组。

我的预期输出是一个包含 2 个元素的数组：

*   阵列 1
*   阵列 2

每个数组里面都有两个元素。

Jquery中有没有做这种转换的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:06:33.103

这不是一个有效的字符串——您将单引号嵌套在单引号内。但是，如果您在内部使用双引号将字符串转换为一个：

```
str = '[  ["Row1 of first array", "Row2 of first array"],  ["Row1 of 2nd array", "Row2 of 2nd array"]  ]' 
```

那么您可以简单地将其解析为 JSON 对象：

```
arr = $.parseJSON(str); // returns a two-dimensional array 
```

这远比 using 安全得多`eval`，只有在您确切知道字符串中的内容时才应该这样做，即使那样，这也是一个懒惰的开发人员的标志。使用 时`parseJSON`，您知道完成后您将获得一个对象或一个数组——使用 时`eval`，任何事情都可能发生。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-19T14:07:07.597

我猜 eval 会起作用：

```
var str = eval("[['Row1 of first array', 'Row2 of first array'],['Row1 of 2nd array', 'Row2 of 2nd array']]");

console.log(str); 
```

​</p>

# ms-access - Access Totals Query Not Necessarily Returning First Record

> ID：13455328
> 
> 赞同：0
> 
> 时间：2012-11-19T13:58:41.090
> 
> 标签：ms-access

I have a table of data like this:

```
id  user_id  A  B  C
=====================
1   15       1  2  3
2   15       1  2  5
3   20       1  3  9
4   20       1  3  7 
```

I need to remove duplicate user ids and keep the record that sorts lowest when sorting by A then B then C. So using the above table, I set up a temp query (qry_temp) that simply does the sort--first on user_id, then on A, then on B, then on C. It returns the following:

```
id user_id  A  B  C
====================
1  15       1  2  3
2  15       1  2  5
4  20       1  3  7
3  20       1  3  9 
```

Then I wrote a Totals Query based on qry_temp that just had user_id (Group By) and then id (First), and I assumed this would return the following:

```
user_id  id
===========
15       1
20       4 
```

But it doesn't seem to do that--instead it appears to be just returning the lowest id in a group of duplicate user ids (so I get 1 and 3 instead of 1 and 4). Shouldn't the Totals query use the order of the query it's based upon? Is there a property setting in the query that might impact this or another way to get what I need? If it helps, here is the SQL:

```
SELECT qry_temp.user_id, First(qry_temp.ID) AS FirstOfID
FROM qry_temp
GROUP BY qry_temp.user_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:10:10.540

您需要不同类型的查询，例如：

```
SELECT tmp.id,
       tmp.user_id,
       tmp.a,
       tmp.b,
       tmp.c
FROM   tmp
WHERE  (( ( tmp.id ) IN (SELECT TOP 1 id
                         FROM   tmp t
                         WHERE  t.user_id = tmp.user_id
                         ORDER  BY t.a,
                                   t.b,
                                   t.c,
                                   t.id) )); 
```

其中 tmp 是您的表的名称。First、Last、Min 和 Max 不依赖于排序顺序。在关系数据库中，排序顺序非常短暂。

# c# - Unique names for DataTemplate generated elements

> ID：13455330
> 
> 赞同：0
> 
> 时间：2012-11-19T13:58:44.120
> 
> 标签：c#, wpf, xaml, data-binding

I have a datatemplate which contains a Button, is there a way I can bind the name of the button(say, to the containing grid rowid) to generate a unique name for each generated Button?

# memcached - Can anyone tell me which caching tool is faster; AppFabric or Memcached?

> ID：13455332
> 
> 赞同：1
> 
> 时间：2012-11-19T13:58:49.987
> 
> 标签：memcached, appfabric

Can anyone tell me which caching tool is faster; AppFabric or Memcached? I got some vague answers on this question and that too for older versions. It would be great if someone can tell me the performance comparison on the recent versions of these two.

# arrays - Bash array size saying it's twice as large as I expect it to be

> ID：13455339
> 
> 赞同：1
> 
> 时间：2012-11-19T13:59:04.183
> 
> 标签：arrays, bash

I have the following code:

```
commit_hashes_raw=(`git cherry origin/Server_Dev`)
echo ${#commit_hashes_raw[@]}
echo ${commit_hashes_raw[@]} 
```

that is producing the following output:

```
2
+ 6f0de9d07538db5d6428acd083c4a4527751596b 
```

The first line is supposed to be the size of the array and the second is the contents. The obvious problem here is the discrepancy between the two values though. I've run this on another data set and a 50 element array was being reporting by the middle line as 100 elements long.

Am I using the wrong method for finding the size or is there something funky with my array?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:09:17.560

您的数组有两个元素 -`+`然后是哈希。从命令输出设置数组时，元素是空格分隔的，而不是换行分隔的。

你可以这样做：

```
commit_hashes_raw=($(git cherry origin/Server_Dev | awk '{print $NF}')) 
```

或者，在不调用 shell 的情况下效率会降低：

```
commit_hashes_raw=()
while read plus hash; do 
  commit_hashes_raw+=("$hash")
done < <(git cherry origin/Server_Dev) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:10:54.373

在我看来，这些`+`符号正在向您的数组添加额外的元素。您可以在创建数组时尝试将它们过滤掉。就像是：

```
commit_hashes_raw=(`git cherry origin/Server_Dev | cut -d' ' -f2`) 
```

# spring - smartgwt listgrid RestDataSource not populating

> ID：13455342
> 
> 赞同：0
> 
> 时间：2012-11-19T13:59:24.747
> 
> 标签：spring, datasource, smartgwt, listgrid

Im new using this front end framework application...

I recently started to work with smartgwt and i'm bulding a new application with a Spring MVC integration.

I'm using a ListGrid with a RestDataSource (Consume the Rest service with **mvc:annotation-driven** for plain JSON)

I can see that the servaice gets consuming properly perhaps my grid is never shown with the data in it.

Can someone help me here ?

Here's my ***ListGrid*** class

public class ListGrid extends com.smartgwt.client.widgets.grid.ListGrid {

```
private final SpringJSONDataSource springJSONDataSource;

public ListGrid(List<DataSourceField> fields) {
    this(new PatientDataSource(fields));
}

public ListGrid(SpringJSONDataSource springJSONDataSource) {
    this.springJSONDataSource = springJSONDataSource;
    init();
}

private void init() {
    setAutoFetchData(true);
    setAlternateRecordStyles(true);
    setEmptyCellValue("???");
    setDataPageSize(50);

    setDataSource(springJSONDataSource);
} 
```

}

***Now there's the DataSource implmentation***

public abstract class SpringJSONDataSource extends RestDataSource {

```
protected final HTTPMethod httpMethod;

public SpringJSONDataSource(List<DataSourceField> fields) {
    this(fields, HTTPMethod.POST);
}

public SpringJSONDataSource(List<DataSourceField> fields, HTTPMethod httpMethod) {
    this.httpMethod = httpMethod;
    setDataFormat(DSDataFormat.JSON);
    addDataSourceFields(fields);
    setOperationBindings(getFetch());
    addURLs();
}

private void addURLs() {
    if(getUpdateDataURL() != null)
        setUpdateDataURL(getUpdateDataURL());

    if(getRemoveDataURL() != null)
        setRemoveDataURL(getRemoveDataURL());

    if(getAddDataURL() != null)
        setAddDataURL(getAddDataURL());

    if(getFetchDataURL() != null)
        setFetchDataURL(getFetchDataURL());

}

private void addDataSourceFields(List<DataSourceField> fields) {
    for (DataSourceField dataSourceField : fields) {
        addField(dataSourceField);
    }
}

protected abstract OperationBinding getFetch();
protected abstract OperationBinding getRemove();
protected abstract OperationBinding getAdd();
protected abstract OperationBinding getUpdate();

public abstract String getUpdateDataURL();
public abstract String getRemoveDataURL();
public abstract String getAddDataURL();
public abstract String getFetchDataURL(); 
```

}

***The class PatientDataSource that extends SpringJSONDataSource***

public class PatientDataSource extends SpringJSONDataSource {

```
public PatientDataSource(List<DataSourceField> fields) {
    super(fields);
    setPrettyPrintJSON(true);
}

@Override
protected OperationBinding getFetch() {
    OperationBinding fetch = new OperationBinding();
    fetch.setOperationType(DSOperationType.FETCH);
    fetch.setDataProtocol(DSProtocol.POSTMESSAGE);
    DSRequest fetchProps = new DSRequest();
    fetchProps.setHttpMethod(httpMethod.toString());
    fetch.setRequestProperties(fetchProps);

    return fetch;
}

@Override
public String getFetchDataURL() {

    return "/spring/fetchPatients";
}

@Override
protected OperationBinding getRemove() {
    return null;
}

@Override
public String getRemoveDataURL() {
    return null;
}

@Override
protected OperationBinding getAdd() {
    return null;
}

@Override
public String getAddDataURL() {
    return null;
}

@Override
protected OperationBinding getUpdate() {
    return null;
}

@Override
public String getUpdateDataURL() {
    return null;
} 
```

}

***My spring controller PatientControler***

@Controller public class PatienController {

```
Logger logger = Logger.getLogger(PatienController.class);

@Autowired
private PatientServices patientServices;

@RequestMapping(value = "/patientTest", method = RequestMethod.GET)
@ResponseBody
public Object getTest()
{
    return patientServices.getAllPatients();
}

@RequestMapping(value = "/fetchPatients", method = RequestMethod.POST)
@ResponseBody
public Object getAllPatients()
{
    return patientServices.getAllPatients();
} 
```

}

***PatientServiceImpl***

public class PatientServicesImpl implements PatientServices {

```
public List<Patient> getAllPatients() {

    List<Patient> patients = new ArrayList<Patient>();
    Patient patient;

    for(int i = 0 ; i < 500 ; i++){
        patient = new Patient();
        patient.setDateOfBirth(new Date());
        patient.setFirstName("Joe");
        patient.setMiddleName("Moe");
        patient.setLastName("Blow");
        patient.setLastConsultation(new Date());
        patient.setSex(Sex.M);

        patients.add(patient);
    }

    return patients;
} 
```

}

***Im Really stuck right now i've been looking for all type of answers .... but so far nothing worked when i tried to override the transformResponse from my RestDataSource impentation the parameter "data" as an OBJECT, returns me an array [object Object],[object Object],[object Object],[object Object],[object Object] ***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:16:04.143

从 RestDataSource 传输的数据具有特定格式，该格式在[RestDataSource 的 JavaDoc 中进行了](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/RestDataSource.html)描述。 您的服务器必须理解请求并返回有效响应。

目前，您的示例似乎不遵守合同。

要调试传入和传出服务器的流量，您可以使用 SmartClient-Console。您可以通过这样的浏览器书签打开它：

```
javascript:isc.showConsole() 
```

当然，您需要通过将以下模块添加到您的`gwt.xml`

```
<inherits name="com.smartclient.tools.SmartClientTools"/> 
```

现在转到*RPC*选项卡并检查*Track-RPCs*

# security - SPA security using Backbone.js, Require.js and Laravel

> ID：13455344
> 
> 赞同：3
> 
> 时间：2012-11-19T13:59:25.833
> 
> 标签：security, backbone.js, requirejs, laravel

I'm currently searching the best way for developing my next webapplication. I'm thinking about using Backbone.js and build a single page application. But I really can't imagine how to secure my app since nearly everything is done on client side. Of course I just could prevent the users from accessing my RESTful Api so they would not have access to my data. But all the view/model/collection/template js files are still accessible.

Or is there a known way to serve the js files with php (laravel), which would allow me to only serve the files I need for the respective user.

I just couldn't find a solution by searching the Web. But I just don't think that I am the lonely person who needs a clean and secure authentication method including different user rights.

Thank you in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:41:24.097

您的后端应用程序将从后端（= API）获取数据，并可能发回一些更改。只要您的后端是安全的，此代码就不能有“安全漏洞/泄漏”。如果你害怕别人窃取你的代码，你可以随时缩小 JS（检查 grunt.js 和 almond.js）

为了保护你的后端，你可以使用 Laravel 的 auth 类和前面提到的 auth 过滤器。

除了正常的身份验证之外，您还可以实现角色，您可以将其分配给特定用户，让他们或多或少地访问您后端的某些资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:13:11.833

这是我会尝试的方法：

将应用程序分成两部分。

一部分 - 通过常规 Laravel Auth 在单独的页面上登录，然后当用户登录时，在不同的视图中提供单页应用程序。

这不行吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T00:15:28.413

我认为公开的 JS/模板文件并不重要。本质上，您应该只允许与经过身份验证的用户进行数据交互。将其视为两个独立的应用程序。

1.  前端应用程序登录，并存储 cookie（或使用其他一些持久性）。
2.  然后，后端应用程序使用持久身份验证来验证每个用户对数据的请求以及每个用户操作。

这样您就不必担心安全性，客户端只能获取服务器允许的数据，同样，它只能在服务器允许的范围内与数据交互。无论如何，你不应该依赖客户端来确保安全，即使是登录的，否则一些恶意用户可能会保存你所有的前端代码并在没有身份验证的情况下使用它来对付你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T00:02:36.317

Web 服务与您构建的任何其他 Web 应用程序没有什么不同。归根结底，您将功能暴露给客户端（也是攻击者）。不管客户端是用什么实现的，如果你暴露了危险的功能，你就会被黑客入侵。

拥有会话状态，跟踪用户 ID 并确保用户只访问他们被允许访问的资源。

# python - python trie实现与子字符串匹配

> ID：13455349
> 
> 赞同：0
> 
> 时间：2012-11-19T13:59:48.673
> 
> 标签：python, data-structures, tree, substring, trie

我的问题：假设我有字符串：

```
ali, aligator, aliance 
```

因为它们有共同的前缀，所以我想将它们存储在 trie 中，例如：

```
trie['ali'] = None
trie['aligator'] = None
trie['aliance'] = None 
```

到目前为止一切顺利——我可以使用 Biopython 库中的 trie 实现。但是我想要实现的是能够在该 trie 中找到包含特定子字符串的所有键。

例如：

```
trie['ga'] would return 'aligator' and 
trie['li'] would return ('ali','aligator','aliance'). 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:36:53.720

编辑：我认为您可能正在寻找[Suffix tree](http://en.wikipedia.org/wiki/Suffix_tree)，特别注意到“后缀树还为最长的公共子字符串问题提供了第一个线性时间解决方案。”。

刚刚注意到另一个似乎非常相关的 SO 问题：[使用 Trie 查找最长的公共子字符串](https://stackoverflow.com/questions/12924595/finding-longest-common-substring-usiing-trie?rq=1)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-19T15:10:31.773

我会做这样的事情：

```
class Trie(object):
    def __init__(self,strings=None):
        #set the inicial strings, if passed
        if strings:
            self.strings = strings
        else:
            self.strings =[]

    def __getitem__(self, item):
        #search for the partial string on the string list
        for s in self.strings:
            if item in s:
                yield s

    def __len__(self):
        #just for fun
        return len(self.strings)

    def append(self,*args):
        #append args to existing strings
        for item in args:
            if item not in self.strings:
                self.strings.append(item) 
```

然后：

```
t1 = Trie()
t1.append("ali","aligator","aliance")
print list(t1['ga'])
print list(t1['li'])
>>['aligator']
>>['ali', 'aligator', 'aliance'] 
```

# image - 将图像+文本放在组合框 windows 8 应用程序中

> ID：13455357
> 
> 赞同：0
> 
> 时间：2012-11-19T14:00:39.033
> 
> 标签：image, combobox, windows-8, microsoft-metro

我想`image+text`放在我`comboBox`的应用程序中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:48:59.697

我使用适当的值使用它来做到这一点：

```
 <ComboBox>
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image/>
                            <TextBlock/>
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

# xpages - XPages 数据源隐藏，直到单击视图条目

> ID：13455359
> 
> 赞同：0
> 
> 时间：2012-11-19T14:00:46.503
> 
> 标签：xpages

目前我有一个带有视图数据源的 XPage，在它下面有一个以编辑模式显示的文档数据源。单击视图条目时，该文档以读取模式加载到文档数据源中。凉爽的。

但 ...

在单击视图条目之前，如何隐藏文档数据源？如何在编辑模式下打开文档数据源？保存后如何隐藏文档数据源？

# java - 在没有 setZOrderOnTop(true) 的情况下使 SurfaceView 透明

> ID：13455363
> 
> 赞同：10
> 
> 时间：2012-11-19T14:00:58.217
> 
> 标签：java, android, layout

我有一个包含自定义 SurfaceView 和其他必须在 SurfaceView 上绘制的元素的 RelativeLayout。我还需要 SurfaceView 是透明的。我试过这个答案：[如何使surfaceview透明](https://stackoverflow.com/questions/5391089/how-to-make-surfaceview-transparent)。但是使用 setZOrderOnTop(true) 时，RelativeLayout 中 SurfaceView 上的其他元素显示在 Surface 上方（如果表面有油漆，则部分隐藏）。

我怎么解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:13:13.447

将持有者像素格式设置为 RGBA_8888，

```
sv.setZOrderOnTop(true);    //very much necessary 
```

`getHolder().setFormat(PixelFormat.RGBA_8888);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T19:36:00.450

我用`setZOrderMediaOverlay(true)`代替成功了`setZOrderOnTop(true)`。它允许 OpenGL SurfaceView 下方和上方的视图。

这是在上下文中：

```
GLSurfaceView glview = (GLSurfaceView)findViewById(R.id.surface);
glview.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
glview.getHolder().setFormat(PixelFormat.RGBA_8888);
glview.setZOrderMediaOverlay(true);
glview.setEGLContextClientVersion(2); 
```

# ravendb - RavenDB：存储大小问题

> ID：13455366
> 
> 赞同：8
> 
> 时间：2012-11-19T14:01:18.333
> 
> 标签：ravendb

我正在使用 RavenDB 进行一些测试，以基于 iphone 应用程序存储数据。该应用程序将发送一串 5 个 GPS 坐标以及密钥的 GUID。我在 RavenDB 中看到每个文档大约是 664-668 字节。这对于 10 位小数和一个指导来说是巨大的。有人可以帮我理解我做错了什么吗？我注意到当一百万条记录在磁盘上超过一个演出时，它的大小非常大。根据我的计算，它应该小得多。纯粹基于数据大小，文档不应该在 100 字节左右吗？并且鉴于文档数据库具有内置的对象模式，假设将其翻倍至 200 字节。考虑到这种计算，数据库应该是大约 200 兆，有 100 万条记录。但它大了十倍。有人可以帮我吗？

（有一个朋友检查我的数学，我有点偏离 - 数字更新）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-19T15:48:26.770

作为一般原则，NoSQL 数据库并未针对磁盘空间进行优化。这就是 RDBMS 的传统要求。通常使用 NoSQL，出于各种原因，您会*选择*一式两份或一式三份存储数据。

特别是对于 RavenDB，每个文档都是 JSON 格式，所以你有一些开销。但是，它实际上以 BSON 格式保存在磁盘上，为您节省了一些字节。这个实现细节对客户端来说是模糊的。此外，每个文档都有两个流 - 主要文档内容和关联的元数据。这是非常强大的，但会占用额外的磁盘空间。文档和元数据都以 BSON 格式保存在 ESENT 支持的文档存储中。

然后，您需要考虑如何访问数据。您创建的任何静态索引以及您要求 Raven 通过其 LINQ API 为您创建的任何动态索引都会将数据复制到索引存储中。这是一个使用 Lucene.net 使用其专有索引文件格式实现的单独存储。如果您要估计磁盘空间需求，则需要考虑到这一点。（顺便说一句 - 您也会对 RDBMS 解决方案中的索引感到担忧）

如果您非常关心优化每个字节的磁盘空间，那么 NoSQL 解决方案可能不适合您。几乎市场上的每种产品都有这些类型的开销。但请记住，今天的磁盘空间很便宜。关系数据库针对磁盘空间进行了优化，因为在发明时存储非常昂贵。世界已经改变，NoSQL 解决方案接受了这一点。

# wordpress - 我如何在 WP_query $args 数组 Worpresss 中结合发布元数据和分类

> ID：13455367
> 
> 赞同：0
> 
> 时间：2012-11-19T14:01:23.703
> 
> 标签：wordpress

我试图弄清楚如何让以下代码作为一个 wp_query 工作。我正在尝试过滤元值和分类值的循环：

这两个部分独立工作，但我希望将它们绑定到一个查询中..？

我尝试了各种组合，但没有得到任何地方......关于这个问题的最佳方法的任何想法......？

```
 $args = array(
    array(
   'post_type' => 'job_listing',
  'meta_key' => 'geo_short_address',
  'meta_value' => $area

   ),

'tax_query' => array(
        'relation' => 'AND',
    array(
        'taxonomy' => 'job_type',
        'field' => 'term_id',
        'terms' => $jobtype
    ),
        array(
        'taxonomy' => 'job_cat',
        'field' => 'slug',
        'terms' => $jobcat
    )
)
   ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:42:38.757

看起来你的参数数组太深了一层。尝试这个：

```
$args = array(
    'post_type' => 'job_listing',
    'meta_key' => 'geo_short_address',
    'meta_value' => $area,
    'tax_query' => array(
        'relation' => 'AND',
        array(
            'taxonomy' => 'job_type',
            'field' => 'term_id',
            'terms' => $jobtype
        ),
        array(
            'taxonomy' => 'job_cat',
            'field' => 'slug',
            'terms' => $jobcat
        )
    )
); 
```

如果这不起作用，请尝试以下操作：

```
$args = array(
    'post_type' => 'job_listing',
    'meta_key' => 'geo_short_address',
    'meta_query' => array(
        array(
           'key' => 'geo_short_address',
           'value' => $area
        )
    ),
    'tax_query' => array(
        'relation' => 'AND',
        array(
            'taxonomy' => 'job_type',
            'field' => 'term_id',
            'terms' => $jobtype
        ),
        array(
            'taxonomy' => 'job_cat',
            'field' => 'slug',
            'terms' => $jobcat
        )
    )
); 
```

# javascript - 控制器中的 ExtJS4 设置值

> ID：13455371
> 
> 赞同：0
> 
> 时间：2012-11-19T14:01:30.150
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs4.2

我有一个 ExtJS4 应用程序，其中一个控制器 (ControllerA) 正在加载另一个 (ControllerB)。控制器 A 有一些我需要在 ControllerB 中设置的用户输入，以便当 ControllerB 加载下拉菜单时，它可以默认将这些下拉菜单跳转到正确的值。

我可以很好地从 ControllerA 传递值：

```
itemClick: function itemClick(distributor, product) {
  var ctrlr = this.getController('Internal.controller.Popup');
  var win = ctrlr.openWin(distributor, product);
  ctrl.init();
} 
```

openwin 函数获取值，我只是不确定如何在该函数中保存这些值，以便 ControllerB 中的其他函数可以检查它们是否存在，如果存在，则适当设置组合框，例如：

```
openWin: function openWin(distributor, product) {
  var win = Ext.create('Ext.window.Window', {
    ...
  });
  // Somehow set distributor and product
  return win;
}
loadDistributorBox: function loadDistributorBox(str) {
  //Listener for Ajax load of combobox values
  var combobox = Ext.ComponentQuery.query('combobox')[0];
  var items = str.getRange();
  if (isset(distributor)) {
    // Move the pulldown to the item that matches
  } else {
    // Show the default first value
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:18:04.103

**First**

Init the controller before you call any other function.

```
itemClick: function itemClick(distributor, product) {
  var ctrlr = this.getController('Internal.controller.Popup');
  ctrl.init();
  var win = ctrlr.openWin(distributor, product);
} 
```

**Second**

Check if you have the arguments and set them. For that you can use the **[setValues](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-setValues)** methods of the baseform

```
openWin: function openWin(distributor, product) {
  var win = Ext.create('Ext.window.Window', {
    ...
  });
  var form = win.down('form').getForm();
      setObj = {};
  if (distributor) {
     setObj['DistributorFieldName'] = distributor;
  }

  if (product) {
     setObj['ProductFieldName'] = product;
  }
  // set the values
  form.setValue(setObj );

  return win;
} 
```

# jdo - JDO 与可能的编程语言更改

> ID：13455372
> 
> 赞同：0
> 
> 时间：2012-11-19T14:01:38.713
> 
> 标签：jdo

我一直在考虑在我的新项目中使用 JDO。但是，总是有可能改变编程语言，或者用其他语言重写/添加一些模块。但我担心在这种情况下数据可能无法访问（可解析，可理解）。

我的担心有道理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:42:16.183

如果您使用 JDO 将数据持久化为 RDBMS，那么数据将保存在 RDBMS 中（在逻辑定义明确的结构中），使用 SQL 通过不同的编程语言同样可以访问该数据。数据存储是保存数据的东西，而不是一些神秘的“JDO”东西，它只是一个从 Java 应用程序和 Java 对象获取数据的 API。

# javascript - 强制 SWFObject 使用 EMBED 而不是 OBJECT

> ID：13455375
> 
> 赞同：1
> 
> 时间：2012-11-19T14:01:49.317
> 
> 标签：javascript, jquery, flash, google-chrome, swfobject

是否可以强制 SWFobject 使用`embed`标签而不是默认`object`标签嵌入 Flash？现在我正在使用这个：

```
swfobject.embedSWF(url, 'player', width, height, "8", null, null, params, attrs) 
```

这会导致类似：

```
<object type="application/x-shockwave-flash" id="player" data="/player.swf">
    <param name="allowScriptAccess" value="always">
</object> 
```

但是我想嵌入 using`embed`代替 Chrome，因为我怀疑我可以解决一些 chrome 神秘的 flash 错误，例如 position:fixed。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T18:06:31.103

简短的回答：不。

SWFObject 2.x 的一个关键目标是[避免使用`embed`tag](http://www.alistapart.com/articles/flashembedcagematch/)，因为它不是 HTML 4 或 XHTML 中的标准，也不支持回退内容。因此，SWFObject 2 中没有选项。（FWIW，SWFObject 2.x 早于 HTML5 和作为标准`embed`的编纂。）`embed`

您可以尝试使用[SWFObject 1.5](http://code.google.com/p/google-ajax-examples/source/browse/trunk/scripts/swfobject-1.5.js?r=44)，它用于`embed`IE 和`object`其他所有内容，但您必须修改源代码才能为 Chrome 添加一个 fork。

如果我在你的鞋子里，我会这样做：

1.  试试[SWFObject 2.3 beta](https://github.com/swfobject/swfobject/blob/master/swfobject/src/swfobject.js)。它仍然使用该`object`元素，但有许多更新。
2.  尝试手动编码嵌入标签，看看它是否能解决您的问题。[本文](http://www.alistapart.com/articles/flashembedcagematch/)中有一些示例代码，您可以根据需要进行修改。

# google-drive-api - 谷歌云端硬盘 API 身份验证

> ID：13455382
> 
> 赞同：12
> 
> 时间：2012-11-19T14:02:07.717
> 
> 标签：google-drive-api, google-api-dotnet-client

我想做一个可以随时访问我自己的谷歌驱动器的应用程序，在那里创建文件，共享它们等等。根据[https://developers.google.com/drive/service-accounts](https://developers.google.com/drive/service-accounts) “使用常规 Google 帐户作为应用程序拥有的帐户”，我唯一需要的是获取 access_token 和 refresh_token 一次，将它们存储在我的应用程序中并使用 refresh_token 我可以刷新我的 access_token（不知何故）。

[我可以使用https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&redirect_uri=http://localhost;response_type=](https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&redirect_uri=http://localhost;response_type=token&client_id=)之类的请求获取 access_token [令牌&client_id=](https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file&redirect_uri=http://localhost;response_type=token&client_id=)

在用户对话框中批准此应用程序请求后，我将被重定向到我的本地主机，我将获得在 3600 秒内过期的 access_token。

**问题是：**

**1.如何获取refresh_token？
2、如何使用refresh_token刷新access_token？**

我不想使用 Google 的 API 客户端库，因为它很糟糕（.NET）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T10:04:40.347

好，我知道了。答案可以在这里找到：[https ://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

首先，您必须发出 Auth 请求

```
 <form method="POST" action="https://accounts.google.com/o/oauth2/auth">
        <input type="hidden" name="scope" value="[YOUR SCOPE]"/>
        <input type="hidden" name="client_id" value="[YOUR CLIENT ID]"/>
        <input type="hidden" name="response_type" value="code"/>
        <input type="hidden" name="redirect_uri" value="[YOUR RETURN URL]"/>
        <input type="hidden" name="access_type" value="offline"/>
        <input type="submit"/>
    </form> 
```

然后你会得到一个'代码'到你的 return_url

然后需要将代码交换为access_token和refresh_token

```
 <form method="POST" action="https://accounts.google.com/o/oauth2/token">
            <input type="text" name="code" value="[CODE YOU GOT IN PREV STEP]"/>
            <input type="hidden" name="client_id" value="[YOUR CLIENT ID]"/>
            <input type="hidden" name="client_secret" value="YOUR CLIENT SECRET"/>
            <input type="hidden" name="grant_type" value="authorization_code"/>
            <input type="hidden" name="redirect_uri" value="YOUR REDIRECT URL"/>
            <input type="submit"/>
        </form> 
```

因此，您将打赌响应如下：

```
{
  "access_token" : "[HERE YOU ACCESS TOKEN]",
  "token_type" : "Bearer",
  "expires_in" : 3600,
  "id_token" : "eyJhbGciOiJSUzI1NiIsImtpZCI6ImRiMjBlNWMwZGU1YWI0MGRjNTU5ODBkM2EzYmZlNDdlOGM2NGM5YjAifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiY2lkIjoiMjQ2ODg5NjU3NDg2LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiYXVkIjoiMjQ2ODg5NjU3NDg2LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwidG9rZW5faGFzaCI6IjRURGtlQ0MzVWRPZHoyd2k1N2RnaUEiLCJpZCI6IjExNTI0MDk1NDM0Njg1NTU4NjE2MSIsImlhdCI6MTM1MzQwNDQ3MCwiZXhwIjoxMzUzNDA4MzcwfQ.Va98sh9LvMEIWxpRMFkcuFqtDAUfJLN5M__oJyjvmIxQR9q2NUIoocyjqbNyXc7as_ePQYiUjajx0SCumtR4Zhv-exeJfrKA_uMmJTe7jWhK6K2R3JQ2-aIZNnehpEuhYZBXgLhzYz1mlFrLqQTdV6LjDhRPDH-ol4UKWXfbAVE",
  "refresh_token" : "[HERE YOUR REFRESH TOKEN]"
} 
```

现在您可以将这些令牌存储在您的应用程序中并无限次使用，每 3600 秒刷新一次 access_token

```
 <form method="POST" action="https://accounts.google.com/o/oauth2/token">
                <input type="text" name="refresh_token" value="[YOUR REFRESH TOKEN]"/>
                <input type="hidden" name="client_id" value="[YOUR CLIENT ID]"/>
                <input type="hidden" name="client_secret" value="[YOUR CLIENT SECRET]"/>
                <input type="hidden" name="grant_type" value="refresh_token"/>
                <input type="submit"/>
            </form> 
```

每次你提出这个请求，你都会得到一个新的 access_token

```
{
  "access_token" : "[NEW ACCESS TOKEN]",
  "token_type" : "Bearer",
  "expires_in" : 3600,
  "id_token" : "eyJhbGciOiJSUzI1NiIsImtpZCI6ImRiMjBlNWMwZGU1YWI0MGRjNTU5ODBkM2EzYmZlNDdlOGM2NGM5YjAifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXVkIjoiMjQ2ODg5NjU3NDg2LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwidG9rZW5faGFzaCI6ImpyYk5oNkRHZFN4Y0w5MUI5Q1hab2ciLCJpZCI6IjExNTI0MDk1NDM0Njg1NTU4NjE2MSIsImNpZCI6IjI0Njg4OTY1NzQ4Ni5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsImlhdCI6MTM1MzQwNTU5OSwiZXhwIjoxMzUzNDA5NDk5fQ.mGN3EYOX75gPubr3TqWIOBkfq-o3JBXMXx4MbxEBGMSuPdJi7VTqZa4isyR-st-J5_wTtA-j8tVQYnDeZDxj5KpJ14FFQPKTtv_VI5kvuT55KyOmGu4yidciYoffJMISisr8NqiksbemaiYX900sRv6PmoTA6Nf6VtHgj3BZjWo"
} 
```

# php - 是否可以要求登录 OpenCart 信息页面，并且只需要登录信息页面？

> ID：13455386
> 
> 赞同：4
> 
> 时间：2012-11-19T14:02:15.397
> 
> 标签：php, opencart

我看到许多扩展程序让您在查看产品等之前登录，但我只想限制对我通过创建新信息页面创建的某个页面的访问。这可能吗？我对 php 也不是很精通，所以请告诉我应该编辑哪些文件以及在哪里编辑。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:30:49.690

**尝试在index()**函数声明之后直接将其添加到**controller/information/information.php**的顶部，并将 {ID} 替换为您要密码保护的页面的 ID（您可以从 URL 获取 ID，或者如果您有来自管理部分的 SEO URL）。

 **```
if (isset($this->request->get['information_id']) && $this->request->get['information_id'] == '{ID}') {
    //If the information_id is provided and it matches the ID you wish to protect
    if (!$this->customer->isLogged()) {
        //If the customer is not logged in already, redirect them to the login page
        //Use $this->session->data['redirect'] to redirect them back to this page after logging in
        $this->session->data['redirect'] = $this->url->link('information/information', 'information_id=' . $this->request->get['information_id']);
        //Do the redirect
        $this->redirect($this->url->link('account/login', '', 'SSL'));
    }
} 
```

我假设在上面的例子中信息页面**没有**使用 SSL，如果是，你需要修改它。

如果您对这应该去哪里感到困惑，请查看**controller/account/account.php** - 我已经从那里获取了此代码并针对特定信息页面对其进行了修改。**

# android - Textview链接点击片段 - 没有任何反应

> ID：13455388
> 
> 赞同：1
> 
> 时间：2012-11-19T14:02:32.077
> 
> 标签：android, hyperlink, textview, android-fragments, layout-inflater

> **可能重复：**
> [如何使 TextView 中的链接可点击？](https://stackoverflow.com/questions/2734270/how-do-i-make-links-in-a-textview-clickable)

我有一个带有三个片段的 FragmentActivity。我在其中构建片段视图的每个片段都有一个单独的类。

在这个过程中，我创建了几个带有网络链接的可点击文本视图。似乎一切都是正确的，并且文本视图似乎是可点击的。但是当我点击一个文本视图时没有任何反应。

**为什么在TextViewClick 上什么也没有发生？**我希望看到可以打开链接的浏览器列表。

我发现了很多类似的问题，但到目前为止在我的代码中找不到错误。类似的问题：

*   [如何使 TextView 中的链接可点击？](https://stackoverflow.com/questions/2734270/how-do-i-make-links-in-a-textview-clickable)
*   [在我的 android 应用程序中处理 textview 链接点击](https://stackoverflow.com/questions/1697084/handle-textview-link-click-in-my-android-app)
*   [android textview 点击链接](https://stackoverflow.com/questions/5389188/android-textview-click-on-a-link)
*   [android textview链接点击](https://stackoverflow.com/questions/5564331/android-textview-link-click)
*   [http://jtomlinson.blogspot.ch/2010/03/textview-and-html.html](http://jtomlinson.blogspot.ch/2010/03/textview-and-html.html)
*   [http://blog.elsdoerfer.name/2009/10/29/clickable-urls-in-android-textviews/](http://blog.elsdoerfer.name/2009/10/29/clickable-urls-in-android-textviews/)

这是我的 LinksFragment 代码。在 FragmentActivity 本身上创建该类的一个实例以显示此片段：

```
public class LinksFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return generateView(inflater, container); 
    }

    private View generateView(LayoutInflater inflater, ViewGroup container){

        // inflate layout
        View view = inflater.inflate(R.layout.fragment_links, container, false);

        // find controls
        LinearLayout list = (LinearLayout) view.findViewById(R.id.fragment_links_list);

        // generate list
        String[] links = getActivity().getApplicationContext().getResources().getStringArray(R.array.links);
        for (int i = 0; i < links.length; i++) {
            list.addView(generateClickableTextView(links[i]));
        }

        return view;
    }

    private TextView generateClickableTextView(String text){
        TextView clickableTextView = new TextView(getActivity());       
        clickableTextView.setMovementMethod(LinkMovementMethod.getInstance());
        clickableTextView.setText(Html.fromHtml(text));
        return clickableTextView;
    }
} 
```

和链接数组：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="links">
        <item><a href="http://www.google.com">- Google</a></item>
        <item><a href="http://www.bing.com">- Bing</a></item>
        <item><a href="http://www.yahoo.com">- Yahoo</a></item>
        <item><a href="http://www.youtube.com">- Youtube</a></item>
        <item><a href="http://www.Vimeo.com">- Vimeo</a></item>
    </string-array>
</resources> 
```

**编辑解决方案：**

我的问题的解决方案在这篇文章中：

[https://stackoverflow.com/a/10125089/1306012](https://stackoverflow.com/a/10125089/1306012)

我只需要用“<”替换所有“<” （没有空格）

感谢[https://stackoverflow.com/users/634474/dymmeh](https://stackoverflow.com/users/634474/dymmeh)引导我阅读这篇文章。

# php - javascript 如果复选框被选中，href 到 ?page2，如果在 ?page2：保持 cb 选中，当未选中时，href 到 ?page1

> ID：13455391
> 
> 赞同：0
> 
> 时间：2012-11-19T14:02:49.483
> 
> 标签：php, javascript, get, href, window.location

我对 javascript 完全陌生，我不知道如何让它工作......我稍微修改了代码，但请注意第 6 行没有意义。这是这篇文章的主要原因。

```
<script>
function checkReloading() {
    if (window.location.href.split=="?showpastdate") {
        document.getElementById("showpastdate").checked=true;
    } else {
        document.getElementById("showpastdate").checked=false;
    }
}

function toggleAutoRefresh(cb) {
    if (cb.checked) {
        window.location.replace("?showpastdate");
    } else {
        window.location.replace("");
    }
}
window.onload=checkReloading;
</script> 
```

好的，我认为这是非常可读的。

首先 window.location.href.split 不起作用，因为我必须给出完整的路径。但是我怎样才能使这个动态化，以便可以在更多网站上使用呢？随处可见：`window.location.protocol + "//" + window.location.host + "/" + window.location.pathname;`但是如何为动态网页实现这行代码？有人可以给我一个例子吗？

我想用这段代码实现的是：
当 showpastdate 被选中时，href to `?showpastdate`，当 at `?showpastdate`stay 被选中时，我可以使用 php `$_GET`on `?showpastdate`。这有效（当我使用静态完整网址时）。但是比...

我该如何修改此代码，以便复选框在`?showpastdate`再次单击之前保持选中状态，而不是 url 回到原始 .php 状态或其他 GET var？

很抱歉要求编写代码，但我敢打赌，你们中的一些人可以在 2 分钟内写出这些简单的行，而我正在冲浪 8 小时。不打算学习javascript，但这对于我的程序来说确实是一个不错的选择，可以切换显示过去日期的项目ON/OFF，比有2个复选框更好，1个用于ON，1个用于OFF：x编辑：+提交按钮@（ O_o)@

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:13:43.433

`.split()`是一个函数，您可以在字符串对象上执行，根据提供的参数将其分成几部分：
`"abcdefg|hijklmnop|qrstuvw".split('|')`
将产生如下数组：
`["abcdefg","hijklmnop","qrstuvw"]`

现在，我猜您在 url 中添加了一个“?showpastdate”参数，以更改复选框的“已选中”状态。最简单的方法是：

```
document.getElementById("showpastdate").checked = (~window.location.href.indexOf("?showpastdate")) 
```

这部分：`window.location.href.indexOf("?showpastdate")`搜索href for
`"?showpastdate"`
如果字符串已经找到，它将返回一个索引。如果不是，它将返回-1。它前面的波浪线是将-1或0（或更高）转换为真/假。

不过，我不太确定`toggleAutoRefresh()`应该做什么

# 编辑 1

啊，对于`toggleAutoRefresh()`，只需添加以下内容：

```
if (cb.checked) {
    window.location.href.replace("?showpastdate","");
} 
```

`if-else`而不是你在那里的那个块。该`.replace()`函数以相同的方式处理字符串`.split()`。它需要 2 个参数：查找什么以及替换它的内容。因此，例如：

```
var someString = "words and stuff"
var result = someString.replace(" ","_");
//result will be "words_and_stuff" 
```

# 编辑 2

这些功能应该起作用：

```
function checkReloading() {
    document.getElementById("showpastdate").checked = (~window.location.href.indexOf("?showpastdate"))
}

function toggleAutoRefresh(cb) {
    if (cb.checked) {
        window.location.href.replace("?showpastdate","");
    }else{
        window.location.href += "?showpastdate";
    }
} 
```

你从哪里调用 toggleAutoRefresh()？

# 编辑 3

我可以从你最后的评论中得出结论，你想做这样的事情：

```
// If a checkbox named "cb" is checked, and the url contains "?showpastedate"
if ((cb.checked) && ~window.location.href.indexOf("?showpastdate")) { 
    //Uncheck the checkbox and remove the "?showpastedate" from the url
    document.getElementById("showpastdate").checked = false;
    window.location.href.replace("?showpastdate","");
} else {
    // Else, check the checkbox and add the "?showpastedate" to the url
    document.getElementById("showpastdate").checked = true;
    window.location.href += "?showpastdate";
} 
```

注意 . 前面的“~”的使用`indexOf`。
如果在字符串的开头`string.indexOf("text")`找到`"text"`，就像在 中一样`"tekstbooks bla bla bla"`，它返回 0。第一个索引，从 0 开始计数。

`false`当隐式将其转换为布尔值时，此零被解释为 a 。因此，如果`indexOf`要在第一个索引处找到结果，它应该（在这种情况下）返回`true`以指示已找到字符串。这就是为什么我们[将按位 NOT](http://www.javascriptturnsmeon.com/the-tilde-operator-in-javascript/) `~`应用于`indexOf`. `-1`,`indexOf`的“未找到”值返回 false，所有其他结果返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:12:36.600

[URL 更改事件 - JavaScript](https://stackoverflow.com/questions/10981351/url-change-event-javascript)

[http://help.dottoro.com/ljgggdjt.php](http://help.dottoro.com/ljgggdjt.php)

我认为您也可以使用 onchange() javascript 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:33:59.393

我再解释一下。

我有一个 JQuery 数据表，通过 CSS 我有不同的`<tr classes>`. 根据存储在数据库中的信息，它们`<tr>`获得不同的类，因此数据表中的颜色也不同。

现在`<tr class>`我想给用户隐藏/显示的选项。我正在考虑使用复选框来执行此操作，并且 javascript 会在选中时解析一个 url，并在再次取消选中时将其删除。此 URL 可用于 php 运行不同的查询，if `$_GET['parsedurl']`: query 显示所有表，elseif `$_GET['empty']`: query 不显示该 1 信息。

但这是最糟糕的方法。我需要找到一些东西来`display: none`打开或关闭表类，因为这是在客户端工作。

所以我现在考虑将 javascript 的解析保留在 URL 中，并根据 URL，我运行 .php GET 来回显`<tr style: display: none>`或者只是简单地`<tr>`

因此，我需要一些 javascript 来执行此操作：

*   如果选中复选框，则重定向到 projectlist.php?showpastdate
*   当 URL = projectlist.php?showpastdate 时，勾选复选框。
*   当 URL = projectlist.php?showpastdate 和复选框未被选中时，重定向到 projectlist.php，其中复选框未被选中。

我认为这些触发器是最好的选择？

使用 .PHP 我会做：

```
if (isset($_GET['showpastdate']))
{
<tr style: display: none>
}
else
{
<tr>
} 
```

也许有人有更好的解决方案？我想听！

谢谢。

**编辑**

我现在拥有的javascript是：

```
<script>
function toggleAutoRefresh(cb) {
    if (cb.checked) {
        window.location.replace("?showpastdate");
    }
        // If a checkbox named "cb" is checked, and the url contains "?showpastedate"
    if ((cb.checked) && !~window.location.href.indexOf("?showpastdate")) { 
        //Uncheck the checkbox and remove the "?showpastedate" from the url
        document.getElementById("showpastdate").checked = false;
        window.location.href.replace("?showpastdate","");
    } else {
        // Else, check the checkbox and add the "?showpastedate" to the url
        document.getElementById("showpastdate").checked = true;
        window.location.href += "?showpastdate";
    }   
}
</script> 
```

选中复选框后，它会转到页面 projectlist.php?showpastdate 并在此处取消选中。再次检查时，它转到 projectlist.php?showpastdate?showpastdate。它应该删除？showpastdate，而不是添加另一个。

这也可以用 PHP 做，但我真的不喜欢这个复选框的提交按钮。只需检查并执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:24:44.763

好的。我得到了它。

```
<script>
function toggleAutoRefresh(cb) {
    if (~window.location.href.indexOf("?hidepastdate") == 0){
        window.location.replace("?hidepastdate");
        document.getElementById("showpastdate").checked == true;
    }
    if (~window.location.href.indexOf("?showpastdate") == 0){
        window.location.replace("?showpastdate");
        document.getElementById("showpastdate").checked == true;
    }
}
</script> 
```

现在，每次单击时 URL 都会切换，并且 PHP 会执行 CSS 显示工作。

感谢您的努力并为我指明了正确的方向，Cerbrus！节省了我很多时间。

# scala - 条件变量设置

> ID：13455392
> 
> 赞同：12
> 
> 时间：2012-11-19T14:02:52.477
> 
> 标签：scala, conditional, immutability

我需要根据条件设置一个变量。但由于变量是不可变的，我发现自己陷入了不得不重复代码的棘手境地。我想做的是：

```
def doSomething(x:Int):Int = {
  if(x==1){
    val player="Andy"
  } else {
    val player="Rob"
  }
  getSomeValue(player) // Another function
} 
```

但是变量“玩家”不再在范围内。我看到的唯一方法是在两个条件块中调用函数“getSomeValue”，但这不是我想做的事情。如何使用不可变变量解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T14:06:01.050

```
def doSomething(x:Int):Int = {
  val player = if(x==1){
    "Andy"
  } else {
    "Rob"
  }
  getSomeValue(player)
} 
```

# c# - SwapChain.Present 访问冲突

> ID：13455394
> 
> 赞同：0
> 
> 时间：2012-11-19T14:03:04.543
> 
> 标签：c#, sharpdx

在以下代码行中，我遇到了一个非常烦人的问题：

```
try{
  mSwapChain.Present(0, PresentFlags.None);    //AccessViolationException, caught by debugger
}catch(Exception Ex){
  throw Ex;  //Debugstop here, but not reached
}

//DeviceContext: SharpDX.Direct3D11.DeviceContext
//mVertexBinding: SharpDX.Direct3D11.VertexBufferBinding

DeviceContext.InputAssembler.SetVertexBuffers(0, mVertexBinding);
DeviceContext.Draw(mNumVertices, 0); 
```

我的程序运行一个引发事件的计时器，如果它被引发并且我此时没有渲染，则程序会强制执行渲染调用。同时运行另一个计时器 + 鼠标事件，更新矩阵、顶点、缓冲区和其他东西 - 但在渲染时，所有这些更新功能都被锁定 - 但只有在`DeviceContext.Draw(mNumVertices, 0);`达到之前，同步对象才会解锁。

我现在的问题 - 如果在和`VertexBufferBinding`之间更改，是否会引发访问冲突？还是抄袭？而且，第二个 - 为什么我不能捕捉到这种访问冲突？它总是一个“未处理的异常”。`Draw(..)``SwapChain.Present(..)`

编辑：奇怪的是，访问冲突只出现在我的工作笔记本（Core i5、Intel HD 3000 和 Radeon 6490M）上，而不出现在我的家用笔记本电脑（Core i7、Intel HD 3000 和 NVidia GeForce 540M）上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:29:08.810

经过多次测试，指出这个问题一定是amd动态可切换显卡选项造成的——强制集成或最大显卡，没有出现异常，所以可能是amd驱动更改应用程序的gpu设置的时候——就像文档说的那样，“如果需要更多功率，gpu 将动态切换”。所以这不是因为我更新了一些矩阵或顶点，而是因为当这些操作完成时我的程序需要更多的能力（它是一个带有分层几何的小 cad/建模程序 - 当 A1 更新时，AX 到 AZ 有也要重新计算）。

而且，也许它不会发生在 NVidia 系统上，因为 gpu 不是动态切换的——它是在应用程序启动时设置的。

# iphone - UIView 连接到 2 个 IBOutlets

> ID：13455395
> 
> 赞同：0
> 
> 时间：2012-11-19T14:03:17.320
> 
> 标签：iphone, ios, iboutlet

我有一个视图控制器，它已通过 xib 连接。在那个xib中，我有一个单独的视图，我将这个相同的视图连接到2个不同的IBoutlets，并将这个视图添加到主视图。但是在插座中，我添加的第二个视图仅可见。第一个是看不到的。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:47:50.647

尽管可以将两个出口连接到同一个视图对象，但很少建议这样做。在您的情况下，这只是一个 UIView （子类）对象。两个 IBOutlet 的“指针”都指向同一个（单独的）对象。

如果您现在设置两个，第一个，然后是第二个，布局它们等等，那么您会觉得只有第二个是可见的。这就是你所说的。

假设您首先布局了左视图，然后布局了右视图，然后您会发现只有右视图可见。
如果您现在转过布局语句的顺序（无论是什么，位置，大小，框架，颜色，......）并布局右视图然后左视图，只会出现左视图。这仅仅是因为您设法将同一个对象链接到两个 IBOutlet。通过布局第二个，您只需覆盖您在第一手设置的布局数据。

根据我在您的案例中所读到的内容，我建议在 IB 中创建（可能重复）一个额外的 UIView （或任何子类），并将它们相应地链接到一个 IBOutlet 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:18:29.323

是的，您可以将两个 IBOutlet 连接到一个对象，但我认为这对您没有帮助，

这就像你用两个名字 X 和 Y 打电话给同一个人，然后问，嘿！你是Y，XI在哪里看不到他:)。

我可以建议的是，如果您希望两个子视图同时可见，则它们添加两个 UIView，每个 UIView 都连接到单个 IBOutlet，否则仅使用连接到单个 IBOutlet 的单个 UIView 并尝试为 ex 制作切换逻辑：

```
if(isConditionForViewOne){
//Change UI accordingly
  view.backgroundColor  =  [UIColor orangeColor];
}
else if(isConditionForViewTwo){
//Change UI accordingly
view.backgroundColor  =  [UIColor yellowColor];
} 
```

# ubuntu - 禁用 ubuntu 键盘快捷键

> ID：13455397
> 
> 赞同：39
> 
> 时间：2012-11-19T14:03:20.957
> 
> 标签：ubuntu, keyboard-shortcuts, ubuntu-12.04

我一定是不小心激活了某些键盘快捷键功能，因为每次我按下某些键（例如`w`、`a`、 ）时`s`，`d`它们都会充当事物的快捷键。例如，如果我按下`f`，就会出现搜索功能。我怎样才能停止这种情况，以便我可以再次输入这些字母？

谢谢

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-07-16T13:07:22.603

在系统设置 > 键盘 > 快捷方式

找到您要禁用的快捷方式，单击它以设置新的快捷方式，然后按 Backspace 将禁用该快捷方式。

# php - 网站重定向（基于访问者的地理 IP）而不影响 Google Analytics 或爬虫

> ID：13455400
> 
> 赞同：0
> 
> 时间：2012-11-19T14:03:39.503
> 
> 标签：php

目前我的网站 - 我们称它为 www.mydomain.com，它使用 Google Analytics。

该网站位于英国。我们还在同一台服务器、同一域 - www.mydomain.com/us/ 上拥有一个基于美国的镜像站点，该站点使用不同的 Google Analytics ID。

从技术上讲，如果某个访问者来到我们的英国站点并且他的 IP 地址属于美国，我们希望通过调用 PHP 标头位置简单地将访问者重定向到我们的美国站点，即

```
header("Location: www.mydomain.com/us/"); 
```

如果发生这种情况，那么我们不确定网站上的 GA“流量”记录会发生什么。

例如，在 Google Analytics 上，如果访问者 A 在其浏览器上键入 www.mydomain.com 并访问该站点，那么这就是 DIRECT TRAFFIC。

如果我们将它们重定向到 www.mydomain.com.com/us/，它仍然是直接流量。

如果访问者 B 在 Google 搜索结果中找到我们的站点，并点击搜索结果进入主站点，则它是 ORGANIC TRAFFIC。但是，如果我们将访问者 B 重定向到美国站点，我不确定我们美国站点中的 Google Analytics 如何处理此问题。

我的问题是

1.  它是否将客户视为访客 B 的有机或直接流量？

2.  如果有人通过自然搜索引擎排名进入并被我们重定向到美国网站，我希望他们被归类为自然流量。我怎样才能确保发生这种情况？

3.  关于机器人的一般问题 - 我们计划根据用户的 IP 进行重定向。我们如何避免与 Google 的 IP 发生冲突，以便 Google（或任何机器人）可以查看我们的英国和美国网站，而无需从我的代码进行任何重定向？

一些建议将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:16:04.687

1.  重定向将以您的旧页面作为引荐来源。因此，我很确定 GA 会将其视为站点内链接，但是您将它们命名为 GA。

2.  这就是您理想情况下希望避免进行偷偷摸摸的重定向的原因。给你的客户/访客一个选择，而不是强迫他们通过一个网站——大多数网站都倾向于这样做。如果我有一个来自美国的 IP 地址，但由于属于英美 ISP 的子范围非常小而实际上来自英国，该怎么办？

3.  您需要映射机器人的 IP 范围。这不是一件容易的事。

# sql-server-2005 - 多个输入变量 - 只能让 1 个变量通过

> ID：13455401
> 
> 赞同：0
> 
> 时间：2012-11-19T14:03:42.937
> 
> 标签：sql-server-2005, parameters, dynamic-sql

```
declare @strSQL nvarchar(max)
set @strSQL = '
select * from HumanResources.Department where Name = @Name1
union all
select * from HumanResources.Department where Name = @Name2
'

Exec sp_executesql @strSQL, 
  N'@Name1 nvarchar(max)', 'Engineering', 
  N'@Name2 nvarchar(max)', 'Tool Design' 
```

这是一个愚蠢的例子，但它会解决我的问题（Adventureworks 演示）。请问如何将第二个参数（@Name2）放入 sp_ExecuteSQL，它只获取第一个参数（@Name1）？

# .net - 如何再次显示文本框的自动完成列表？

> ID：13455402
> 
> 赞同：1
> 
> 时间：2012-11-19T14:03:42.690
> 
> 标签：.net, vb.net, winforms, autocomplete, textbox

我有一个我写电子邮件地址的文本框。当我在文本框中第一次按下一个字符时，它会显示自动完成列表。在第一个地址后我放了一个分号，然后我写下一个地址，但它不显示自动完成列表，有什么方法可以再次显示它？

编辑：在我的表单的 onload 方法中，我有：

```
 SendTo_tb.AutoCompleteMode = AutoCompleteMode.SuggestAppend
    SendTo_tb.AutoCompleteSource = AutoCompleteSource.CustomSource
    SendTo_tb.AutoCompleteCustomSource.Add("example1@test.net")
    SendTo_tb.AutoCompleteCustomSource.Add("test1@example.com") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:20:24.030

看起来您正在采用 Outlook 风格的方法，在分号之后，您希望自动完成列表重新出现，以便您可以选择一个新值。文本框上的开箱即用自动完成功能不提供执行此操作的能力。您可以相对轻松地创建自己的控件或找到支持所需功能的控件。下面的链接有一个非常实用的 C# 示例：

[http://pholpar.wordpress.com/2010/02/25/multivalue-autocomplete-winforms-textbox-for-tagging/](http://pholpar.wordpress.com/2010/02/25/multivalue-autocomplete-winforms-textbox-for-tagging/)

使用 codeplex 上可用的代码：http: [//autocompletetexboxcs.codeplex.com/](http://autocompletetexboxcs.codeplex.com/)

# apache - 在使用 apache poi 替换 microsoft 2007 (HWPFDocument) 文档的内容时需要帮助

> ID：13455411
> 
> 赞同：1
> 
> 时间：2012-11-19T14:04:21.563
> 
> 标签：apache, apache-poi, java

首先，我觉得它不是很容易使用 Apache POI API，就像任何其他 java API 一样，因为我很困惑在修改 docx 内容的情况下需要的所有 jar 文件，我正在使用 poi-scratchpad-3.1-beta1 .jar 和 poi-3.2-FINAL-20081019.jar （HWPFDocument 类），但在某些论坛中，它指向其他一些 poi jar 文件，不同的名称以及不同的版本......（表示使用 XSSFDocument 类）。

我的要求是用一些文件内容替换一些文本。为此，我使用以下代码替换 microsoft 2007（docx 文件）的内容。我最终得到了错误的说法..

**org.apache.poi.poifs.filesystem.OfficeXmlFileException：提供的数据似乎在 Office 2007+ XML 中。POI 仅支持 OLE2 Office 文档**

```
import java.io.*;
import org.apache.poi.POIDocument;
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.usermodel.CharacterRun;
import org.apache.poi.hwpf.usermodel.Range;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class GenerateTicket {

    public static void main(String[] args) {

        final String FILE_PATH = "/home/mateen/Desktop/Ticket.docx";
        try {
            File file = new File(FILE_PATH);
            FileInputStream fis = new FileInputStream(file);
            POIFSFileSystem poifs = new POIFSFileSystem(fis);
            HWPFDocument doc = new HWPFDocument(poifs);
            Range range = doc.getRange();
            CharacterRun run = range.insertAfter("Hello POI CORE/HWPF !!!");
            run.setBold(true);
            run.setItalic(true);
            doc.write(new FileOutputStream("/home/mateen/Desktop/FromTicket.Docx"));

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

所以...

*   有没有人知道为什么需要两个单独的 jar 文件
*   我可以做些什么来使我的代码工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:42:58.723

HWPF 适用于较旧的、基于 OLE2 的 .doc 文件。如果要使用较新的 OOXML .docx 文件，则需要改用 XWPF。

接下来，您使用的是旧版本的 POI，以及不匹配的 POI。您应该确保您使用的是最新版本，并确保您所有的 POI jar 都来自同一版本。要弄清楚你想要什么 Jars，以及它们有什么依赖关系，请参阅[组件概述页面](http://poi.apache.org/overview.html)了解详细信息。

# scala - 表达式中的下划线

> ID：13455413
> 
> 赞同：0
> 
> 时间：2012-11-19T14:04:28.893
> 
> 标签：scala, wildcard, scalaz, scalaz7

下面的下划线是什么意思。这是 scalaz7 库的片段：

```
trait Apply[F[_]] extends Functor[F] { self =>
  //...
  def ap[A, B](fa: => F[A])(f: => F[A => B]): F[B]
  //...
  def apF[A, B](f: => F[A => B]): F[A] => F[B] = ap(_)(f)   // <----HERE
  //...
} 
```

使用它的一般规则是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:07:19.900

在 Scala 中，下划线通常是通配符。这里具体来说，它是参数名称的简写。所以 lambda 表达式`ap(_)(f)`等价于`x => ap(x)(f)`.

`_`如果每个参数只使用一次，并且它们按照声明的顺序使用，则可以将其用作匿名函数的参数的简写。

# grails-2.0 - Grails 在另一个视图中渲染视图。视图文件夹的上下文路径

> ID：13455418
> 
> 赞同：2
> 
> 时间：2012-11-19T14:04:42.747
> 
> 标签：grails-2.0

试图从 Grails 中的另一个视图渲染视图。

```
<g:render contextPath="??" template="first_view" /> 
```

我在 index.gsp 并愿意呈现在特定控制器下找到的视图（例如：user/first_view.gsp）。我了解视图的正确路径应在文档中所述的“contextPath”中设置：http: [//grails.org/doc/latest/ref/Tags/render.html](http://grails.org/doc/latest/ref/Tags/render.html)

应用程序视图的 contextPath 是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T22:57:46.410

我认为您根本不需要设置上下文路径。从渲染文档：

> 请注意，如果模板属性的值以“/”开头，它将相对于视图目录进行解析。这对于在视图之间共享模板很有用。如果没有前导的“/”，它将首先相对于当前控制器的视图目录进行解析，然后，如果失败，则为顶级视图目录。

在您的情况下 ( `<g:render contextPath="??" template="first_view" />`)，渲染标签将在您当前视图的目录中查找 _first_view.gsp。如果您希望它在用户视图目录中找到模板，请将标签更改为`<g:render template="/user/first_view" />`

注意模板属性中的路径必须以'/'开头

# javascript - jQuery 验证：显示焦点字段错误消息

> ID：13455419
> 
> 赞同：1
> 
> 时间：2012-11-19T14:04:43.063
> 
> 标签：javascript, jquery, forms, jquery-validate

**目标**：我想在容器中显示焦点字段错误消息。

**到目前为止我所做的**：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style type="text/css">
            label.pre {
                display:inline-block;
                width:60px;
            }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"
        type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"
        type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("form").validate({
                    messages: {
                        name: "Please specify your name.",
                        email: {
                            required: "We need your email address to contact you.",
                            email: "Your email address must be in the format of name@domain.com."
                        },
                        url: "A valid URL, please.",
                        comment: "Please enter your comment."
                    },
                    showErrors: function (errorMap, errorList) {
                        if (errorList.length) {
                            $("span").html(errorList[0].message);
                        }
                    }
                });
            });
        </script>
    </head>
    <body>
<span></span>
        <form action="#">
            <div>
                <label class="pre" for="entry_0">Name *</label>
                <input type="text" class="required" name="name" id="entry_0">
            </div>
            <div>
                <label class="pre" for="entry_1">Email *</label>
                <input type="text" class="required email" name="email"
                id="entry_1">
            </div>
            <div>
                <label class="pre" for="entry_2">URL</label>
                <input type="text" class="url" name="url" id="entry_2">
            </div>
            <div>
                <textarea class="required" name="comment" id="entry_3" rows="7" cols="35"></textarea>
            </div>
            <div>
                <input type="submit" name="submit" value="Submit">
            </div>
        </form>
    </body>
</html> 
```

**演示**：http: [//jsfiddle.net/RainLover/32hje/](http://jsfiddle.net/RainLover/32hje/)

**问题**：

1.  如果单击提交按钮，则容器（跨度）会显示第一条错误消息，无论关注哪个字段。
2.  使用 Tab 键聚焦在字段上效果很好（URL 字段除外），但是用鼠标聚焦并不能正确更新 span HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:09:36.677

尤里卡！我刚刚重新检查了[验证选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)，并意识到我应该使用`errorPlacement`而不是`showErrors`：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style type="text/css">
            label.pre {
                display:inline-block;
                width:60px;
            }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"
        type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"
        type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("form").validate({
                    messages: {
                        name: "Please specify your name.",
                        email: {
                            required: "We need your email address to contact you.",
                            email: "Your email address must be in the format of name@domain.com."
                        },
                        url: "A valid URL, please.",
                        comment: "Please enter your comment."
                    },
                    errorPlacement: function (error, element) {
                        element.focus(function () {
                            $("span").html(error);
                        }).blur(function () {
                            $("span").html('');
                        });
                    }
                });
            });
        </script>
    </head>
    <body>
        <form action="#">
<span></span>
            <div>
                <label class="pre" for="entry_0">Name *</label>
                <input type="text" class="required" name="name" id="entry_0">
            </div>
            <div>
                <label class="pre" for="entry_1">Email *</label>
                <input type="text" class="required email" name="email"
                id="entry_1">
            </div>
            <div>
                <label class="pre" for="entry_2">URL</label>
                <input type="text" class="url" name="url" id="entry_2">
            </div>
            <div>
                <textarea class="required" name="comment" id="entry_3" rows="7" cols="35"></textarea>
            </div>
            <div>
                <input type="submit" name="submit" value="Submit">
            </div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:08:59.713

这解决了问题。2

```
$(document).ready(function () {
    $("form").validate({
        messages: {
            name: "Please specify your name.",
            email: {
                required: "We need your email address to contact you.",
                email: "Your email address must be in the format of name@domain.com."
            },
            url: "A valid URL, please.",
            comment: "Please enter your comment."
        },
        showErrors: function (errorMap, errorList) {
            if (errorList.length) {
                $("span").html(errorList[0].message);
            }
        }
    });
    $("form input").focus(function () {
        $(this).valid();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:00:00.870

对于问题 1：

> 容器（跨度）显示第一条错误消息，无论关注哪个字段。

那只是因为你已经硬编码`errorList[0].message`到 span html

对于问题 2：

> 使用 Tab 键聚焦在字段上效果很好，但是用鼠标聚焦并不能正确更新 span HTML。

这是您的代码的建议变体，当您尝试提交时，它会给出一个正在运行的错误列表，或者当您使用选项卡/单击打开/关闭字段时，它应该显示问题（如果有），尽管行为会因选项卡而略有不同或点击，希望对您有所帮助或让您走上正轨

```
$(document).ready(function() {
    $("form").validate({
        messages: {
            name: "Please specify your name.",
            email: {
                required: "We need your email address to contact you.",
                email: "Your email address must be in the format of name@domain.com."
            },
            url: "A valid URL, please.",
            comment: "Please enter your comment."
        },
        showErrors: function(errorMap, errorList) {
            var msg = 'Errors: ';
            $.each(errorList, function(){
                 msg += this.message + '<br />'; });

            $("span").html(msg);
        }
    });
}); 
```

# spring-security - Spring Security ACL 可以应用于域类级别吗？

> ID：13455422
> 
> 赞同：2
> 
> 时间：2012-11-19T14:04:53.547
> 
> 标签：spring-security, acl

是否可以对域类（而不是域实例）应用 ACL 权限？我有一个场景，我想为一类用户提供对域对象完全 CRUD 的全面权限，而另一类用户必须具有特定的 ACL 条目才能执行此操作。

当然可以将 ACL 条目与基于角色的权限混合来实现这一点，但我觉得除了实例级别之外，Spring ACL 可以在类级别上工作，这是一种更优雅的解决方案。

我正在查看微薄的[Spring Security ACL 文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/domain-acls.html)和[这个问题](https://stackoverflow.com/questions/2733947/could-someone-explain-spring-security-basepermission-create)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:00:18.843

看看界面`ObjectIdentity`。它表示系统中受保护的对象。

```
/**
 * Obtains the actual identifier. This identifier must not be reused to represent other domain objects with
 * the same javaType.
 *
 * Because ACLs are largely immutable, it is strongly recommended to use
 * a synthetic identifier (such as a database sequence number for the primary key). Do not use an identifier with
 * business meaning, as that business meaning may change in the future such change will cascade to the ACL
 * subsystem data.
 *
 * @return the identifier (unique within this type; never null)
 */
Serializable getIdentifier();

/**
 * Obtains the "type" metadata for the domain object. This will often be a Java type name (an interface or a class)
 * &ndash; traditionally it is the name of the domain object implementation class.
 *
 * @return the "type" of the domain object (never null).
 */
String getType(); 
```

如您所见，Spring Security 用于`Serializable`描述标识符的类型。因此可以使用带有类名的字符串。

您需要更新 SQL 模式，因为 Spring Security 的作者假设大多数人会通过长/整数 id 来识别对象。

```
create table acl_object_identity(
...
object_id_class bigint not null,
object_id_identity bigint not null, 
```

正如我所检查的，`JdbcMutableAclService`能够处理该自定义，因为它只使用`ObjectIdentity`界面。

研究`org.springframework.security.acls`软件包的源代码。

# c++ - C++ 链接错误。我究竟做错了什么？

> ID：13455423
> 
> 赞同：0
> 
> 时间：2012-11-19T13:59:50.623
> 
> 标签：c++, function, header

所以，这是我第一次真正将单个程序分成一个头文件和两个 .cpp 文件。但我认为我遇到了链接错误。下面是目录的外观。（这是我的图片的链接我没有足够的代表在问题中发布图片）

![](../Images/c532b4c175bb4ea5952c9faf1056b0b5.png)

main.cpp 是我的主要源文件，所有调用函数和其他重要的东西都在其中。在functions.cpp 我有我所有的功能，在coordin.h 文件我有函数原型和结构和常量。一切都很好，没有错字，我已经检查了一切。但我得到一个未定义的函数错误引用。我也包含了 coordin.h 文件。你认为functions.cpp文件需要去别的地方吗？我的意思是编译器没有在那个文件里面看？

她的代码：

*主文件*

```
#include <iostream>
#include "coordin.h"

using namespace std;

int main()
{
    rect rplace ;
    polar pplace;

    rect test = {45.89,25.4};
    pplace = rect_to_polar(test);

    cout<<pplace.angle<<endl;

    return 0;
} 
```

*坐标.h*

```
#ifndef COORDIN_H_INCLUDED
#define COORDIN_H_INCLUDED 

/* Constants */

const double RAD_TO_DEG = 57.29577951;

struct polar{
    double distance; //distance from the origin
    double angle; //the angle from the origin
};

struct rect {
    double x; //horizontal distance form the origin
    double y; //vertical distance from the origin
};

/* Function prototypes */

polar rect_to_polar(rect xypos);
void show_polar(polar dapos);

#endif // COORDIN_H_INCLUDED 
```

*函数.cpp*

```
/*
    functions.cpp
    contains all the function declarations
*/

#include <iostream>
#include "coordin.h" 
#include <cmath>

using namespace std;

//convert rectangular to polar coordinates
polar rect_to_polar(rect xypos){

    polar answer;

    answer.distance =
        sqrt(xypos.x * xypos.x + xypos.y * xypos.y);
    answer.angle = atan2(xypos.y, xypos.x);

    return answer;
}

//show polar coordinate, converting angle to degrees

void show_polar(polar dapos){

    cout<<"Distance : " << dapos.distance <<endl;
    cout<<"Angle    : " << dapos.angle * RAD_TO_DEG <<" degrees."<<endl;
} 
```

继承人的错误：

![](../Images/426319eb019660919d1e7483cb742b71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:46:49.267

Code::Blocks 真的编译你的`functions.cpp`文件吗？右键单击`functions.cpp`项目树，选择“Properties”并确保设置了“Build”、“Release”复选框——否则，Code::Block 将在构建期间忽略此文件并且不会编译它。

# java - JAVA_HOME 和 PATH 环境变量在 UBUNTU 中不起作用

> ID：13455425
> 
> 赞同：1
> 
> 时间：2012-11-19T14:05:11.910
> 
> 标签：java, linux, ubuntu, environment-variables

我已经从 oracle 下载了*jdk-7u9-linux-i586.rpm*。然后我将它安装在我的 Ubuntu 12.04 LTS 中。然后我将环境路径设置为：

```
 export JAVA_HOME=/usr/java/<the jdk directory I cant recall now>
 export PATH={$PATH}:{$JAVA_HOME}/bin 
```

然后我检查了`echo $PATH`and `echo $JAVA_HOME`。现在它显示正确的路径。

但问题是：如果我`java`在控制台中尝试，它会显示无法识别的命令错误。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:14:02.320

您更改了 PATH，但您是否重新获取并刷新了 PATH 缓存？（有关详细信息，请参阅[此处，并查看第 3 节）](http://www.thegeekstuff.com/2010/08/bash-shell-builtin-commands/)

例如

```
$ vi ~/.profile
$ . ~/.profile
$ echo $PATH # is this right ? 
```

和一个可能的哈希

```
$ hash 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:14:41.260

如果您只是简单地调用`export`一个 shell，您将为这个环境准确地设置变量。如果您希望这些变量适用于所有 shell 环境，请将它们添加到您`~/.bashrc`或您的`~/.profile`文件中。

`.rpm`编辑：我认为，在 Ubuntu 上使用特定于 RedHat 的软件包（您可以删除当前安装并尝试不同的包，或者更好的是，[使用常规包管理器](http://thedaneshproject.com/posts/how-to-install-java-7-on-ubuntu-12-04-lts/)安装 java ：

```
sudo add-apt-repository ppa:webupd8team/java 
apt-get update 
sudo apt-get install oracle-java7-installer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:19:02.937

Finally I got it.
It was all my mistake. I have set the **PATH** variable in the */etc/environment* file and it was set wrongly. I set it upto jdk folder and not /bin after that.

After changing it to **bin**, I logged out and logged in again.
Now it is working fine.

Sorry guys for wasting your time and efforts.

# django - django：dajax 文件在哪里？

> ID：13455429
> 
> 赞同：0
> 
> 时间：2012-11-19T14:05:29.290
> 
> 标签：django, dajaxice, dajax

我在 dajaxice 上工作得很好。

现在，我想使用 dajax。我安装了它，我把

```
<script type="text/javascript" src="{% static 'dajax/jquery.core.js' %}"></script> 
```

该行更改为

```
<script type="text/javascript" src="/static/dajax/jquery.core.js"></script> 
```

但是那个位置没有js文件。

我错过了什么吗？那个js文件通常在哪里？

我认为这是由 url.py 设置引起的，因为如果我检查该 url，我可以从 django 看到 url 错误页面。

--- 编辑

当我运行 -- manage.py collectstatic -- 以下是日志。

```
You have requested to collect static files at the destination
location as specified in your settings.

This will overwrite existing files!
Are you sure you want to do this?

Type 'yes' to continue, or 'no' to cancel: yes
Copying '/var/folders/8w/w7cl5wvx1kvd1vkgz83179j00000gn/T/tmpXouwqg'

1 static file copied, 79 unmodified. 
```

在我看来，1 个静态文件只是 dajaxice 文件，而不是 dajax 文件。（我编辑了那个文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:23:32.817

默认情况下，Django 不会提供静态文件，除非它处于调试模式（在 settings.py, set`DEBUG=True`中，设置 this 会产生一系列其他不安全的含义）。但是，它为您提供了一个管理命令来将静态文件收集到一个中央位置 ( `./manage.py collectstatic`)，然后您可以配置您的 Web 服务器以直接提供这些文件，而无需通过 Django 框架。

该`collectstatic`命令将从所有安装的应用程序（以及设置中指定的任何文件`STATICFILES_DIRS`）中收集静态文件到 中指定的目录`STATIC_ROOT`，假设 URL 作为设置`STATIC_URL`。

有关更多信息，请查看 Django 文档中的这些页面： [https ://docs.djangoproject.com/en/1.3/howto/static-files](https://docs.djangoproject.com/en/1.3/howto/static-files)

[https://docs.djangoproject.com/en/1.3/ref/contrib/staticfiles/](https://docs.djangoproject.com/en/1.3/ref/contrib/staticfiles/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:26:10.160

我自己回答。

Dajax 文档目前不受支持且未更新。

dajax 文件不是“jquery.js”或其他东西，而是 jquery.dajax.core.js。

我用谷歌搜索，发现很多程序员问过这个问题，但没有答案。

检查项目 App 中的 dajax 目录，然后你会发现 jquery.dajax.core.js 文件。

不像 dajax 文档所说的 jquery.core.js。

# calendar - Yii & 将小时插入日历

> ID：13455431
> 
> 赞同：0
> 
> 时间：2012-11-19T14:05:31.030
> 
> 标签：calendar, yii, yii-extensions

我正在为 Yii 的雇主申请。

我的想法是，他们必须能够输入他们每天工作的时间。所以我想要一个简单的日历，他们可以在其中输入小时数并将其保存到数据库中。

我一直在寻找类似的扩展，但我没有找到任何适合我需要的东西。

[我发现的最好的事情是扩展流动日历](http://www.yiiframework.com/extension/flowing-calendar/)

创建与我的请求类似的内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:42:24.377

请记住，您可以在 Yii 中使用任何 javascript 库，您不必专门使用 Yii 扩展。Yii 标配 jQuery UI，所以如果你只是在寻找日历，你可以使用[jQuery UI datepicker](http://jqueryui.com/datepicker/)

如果您想要时间选择器，请检查此时间选择器[添加](http://trentrichardson.com/examples/timepicker/)

# .net - 找不到类型或命名空间“WebImage”

> ID：13455436
> 
> 赞同：0
> 
> 时间：2012-11-19T14:05:53.180
> 
> 标签：.net, asp.net-mvc, razor, visual-studio-2012, .net-4.5

我在 VS2012 中建立了一个新的 ASP.NET 项目（使用 Razor）。但是，“WebImage”对象存在问题。当我将此代码放入 cshtml 页面时，出现标题中提到的错误：

```
@{  
WebImage photo = null;
} 
```

我认为 WebImage 类型本身就存在于 ASP.Net 项目中。

我不知道该怎么做才能解决问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:12:46.007

不确定为什么它无法从您的项目中访问，但它存在于 System.WebHelpers 中，也许您已经以某种方式删除了对它的引用，重新添加此引用应该可以为您解决问题。

# c# - 将鼠标单击事件处理程序添加到 PictureBox

> ID：13455439
> 
> 赞同：5
> 
> 时间：2012-11-19T14:06:00.343
> 
> 标签：c#, winforms

我有一个图片框控件，单击它后，另一个图片框会出现在特定位置。Iow 它不是从工具箱中添加的。

```
PictureBox picOneFaceUpA = new PictureBox();
        picOneFaceUpA.Location = new Point(42, 202);
        picOneFaceUpA.Width = 90;
        picOneFaceUpA.Height = 120;
        picOneFaceUpA.Image = Image.FromFile("../../Resources/" + picFaceUpToBeMoved[0] + ".png");
        Controls.Add(picOneFaceUpA);
        picOneFaceUpA.BringToFront(); 
```

如何将 MouseClick 事件处理程序添加到此控件？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T14:09:21.010

只需使用运算符添加事件处理程序`+=`：

```
picOneFaceUpA.MouseClick += new MouseEventHandler(your_event_handler); 
```

或者：

```
picOneFaceUpA.MouseClick += new MouseEventHandler((o, a) => code here); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:09:06.143

在 WinForms 中订阅事件的最佳方式 - 在设计器中选择您的控件，转到“属性”窗口并选择“事件”选项卡。然后选择您想要的任何事件（单击、鼠标单击等）并双击事件名称右侧的空格。将生成事件处理程序并订阅事件。

* * *

如果要手动订阅事件，则将事件处理程序添加到事件

```
picOneFaceUpA.MouseClick += PicOneFaceUpA_MouseClick; 
```

写完`Tab`后点击`+=`会生成处理程序。或者您可以手动编写它：

```
void PicOneFaceUpA_MouseClick(object sender, MouseEventArgs e)
{
   // handle click event
   if (e.Button == MouseButtons.Left)
       MessageBox.Show("Left button clicked");
} 
```

* * *

*顺便说一句*，如果您不需要有关单击事件的其他信息（例如单击了哪个按钮），请改用`Click`事件。它默认处理左键单击：

```
picOneFaceUpA.Click += PicOneFaceUpA_Click; 
```

和处理程序：

```
void PicOneFaceUpA_Click(object sender, EventArgs e)
{
   // show another picture box
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:10:21.537

如果您键入`picOneFaceUpA.Click +=`然后点击选项卡，它将为您自动完成并实现事件处理程序：

```
 private void button2_Click(object sender, EventArgs e)
    {
        PictureBox picOneFaceUpA= new PictureBox();
        picOneFaceUpA.Click += new EventHandler(picOneFaceUpA_Click);
    }

    void picOneFaceUpA_Click(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T14:10:48.307

看来您知道如何添加动态控件，那么您应该这样做

```
this.picOneFaceUpA.MouseClick += new MouseEventHandler(yourMethodName); //hook 
```

并删除一个事件

```
this.picOneFaceUpA.MouseClick -= yourMethodName;     //unhook 
```

该方法应声明如下：

```
private void yourMethodName(object sender, MouseEventArgs e)
{
    //your code here
} 
```

# sql - 从日期中提取年份的 SQL 查询

> ID：13455440
> 
> 赞同：13
> 
> 时间：2012-11-19T14:06:01.937
> 
> 标签：sql, oracle, toad, peoplesoft

我正在尝试创建一个仅从选定日期获取年份的查询。即`select ASOFDATE from PSASOFDATE;`返回`11/15/2012`，但我只想要`2012`。我怎样才能只得到年份？我知道`YEAR`可以使用该功能，但我不确定如何使用。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-01-26T04:50:06.343

这对我有用：

```
SELECT EXTRACT(YEAR FROM ASOFDATE) FROM PSASOFDATE; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-21T15:42:43.037

How about this one?

```
SELECT TO_CHAR(ASOFDATE, 'YYYY') FROM PSASOFDATE 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T14:07:07.310

只需将 columnName 作为参数传递`YEAR`

```
SELECT YEAR(ASOFDATE) from PSASOFDATE; 
```

另一个是使用`DATE_FORMAT`

```
SELECT DATE_FORMAT(ASOFDATE, '%Y') from PSASOFDATE; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/3899)

**更新 1**

我敢打赌，值是 varchar，格式为 MM/dd/YYYY，就是这样，

```
SELECT YEAR(STR_TO_DATE('11/15/2012', '%m/%d/%Y')); 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/3908)

**LAST RESORT 如果所有查询都失败**

利用`SUBSTRING`

```
SELECT SUBSTRING('11/15/2012', 7, 4) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/3909)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-21T17:25:53.247

`SELECT date_column_name FROM table_name WHERE EXTRACT(YEAR FROM date_column_name) = 2020`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-19T14:07:08.987

编辑：由于 post-tag 'oracle'，前两个查询变得无关紧要，将第三个查询留给 oracle。

对于 MySQL：

```
SELECT YEAR(ASOFDATE) FROM PASOFDATE 
```

编辑：无论如何，如果您的日期是字符串，让我们将其转换为适当的日期格式。并从中选择年份。

```
SELECT YEAR(STR_TO_DATE(ASOFDATE, '%d-%b-%Y')) FROM PSASOFDATE 
```

由于您正在尝试 Toad，您可以检查以下代码：

对于甲骨文：

```
SELECT EXTRACT (TO_DATE(YEAR, 'MM/DD/YY') FROM ASOFDATE) FROM PSASOFDATE; 
```

[参考：](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions050.htm)

# iphone - iOS 游戏中心。邀请好友时如何传递数据？

> ID：13455444
> 
> 赞同：2
> 
> 时间：2012-11-19T14:06:18.910
> 
> 标签：iphone, objective-c, ios, gamekit

我正在开发的游戏具有三种不同的动作模式。但是当一个玩家通过 GameKit 邀请另一个玩家加入游戏时，接收设备并不知道它应该玩什么模式。是否有可能以某种方式将任何类型的数据与邀请一起传递？

**我已经尝试过**的唯一想法是将邀请设备上的`defaultInvitationMessage`属性设置`MatchMakerViewController`为特定值，例如“让我们玩第一种模式”，但不幸的是，我不知道如何在接收设备上检索它消息。此外，该属性可以由用户在发送邀请时进行编辑。在对 GameKit 文档进行了三个小时的彻底研究后，我找不到任何可以让我更接近解决方案的东西。

所以，再次 - 是否有可能通知远程设备在接受邀请后必须玩哪种类型的游戏？感谢大家

# shell - 创建一个与现有文件具有相同权限和所有者的新文件

> ID：13455448
> 
> 赞同：3
> 
> 时间：2012-11-19T14:06:31.500
> 
> 标签：shell, unix, solaris, solaris-10

为 Solaris /bin/sh shell 脚本创建与现有文件具有相同所有权和权限的新空文件的最佳方法是什么？

这是为了旋转日志文件以进行压缩和转储存储。

目前我正在使用：

```
mv log log_ts && cp -p log_ts log && cp /dev/null log 
```

有更好的方法吗？

**更新：**不幸的是，这是在保守构建的实时 Sol10 服务器上，没有可用的 gnu fileutils。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:16:09.543

我在 GNU 中这样做，我想它也适用于 Solaris：

```
touch new_file && chmod --reference=old_file new_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:38:29.647

你需要做这样的事情：

```
PERM=`ls -l $EXISTING | cut -d" " -f1 | cut -c2- `
PERMU=`echo $PERM |cut -c1-3 | sed s/-//g`
PERMG=`echo $PERM |cut -c4-6 | sed s/-//g`
PERMO=`echo $PERM |cut -c7-9 | sed s/-//g`
chmod u="$PERMU" $TARGET
chmod g="$PERMG" $TARGET
chmod o="$PERMO" $TARGET 
```

当然，这适用于 Solaris。

# clickonce - 为现有应用程序创建 ClickOnce 部署

> ID：13455450
> 
> 赞同：1
> 
> 时间：2012-11-19T14:06:41.343
> 
> 标签：clickonce, powerbuilder, mage

我有一个我想使用[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)部署的应用程序。我已经尝试过使用`mage.exe`并且`ClickOnceMore`无法使其正常工作。我不明白 的说明`Mage`，`ClickOnceMore`我得到一个`MSB3171 error`：

```
problem generating manifest. Could not load file or assembly
'u:\users\...\local\temp\CmDepBuildDir\[application].exe'
or one of its dependencies. An attempt was made to load a
program with an incorrect format. 
```

我们已经使用这个应用程序很长时间了，但是我们需要一种新的方法来将它部署给用户。它不是[.NET](http://en.wikipedia.org/wiki/.NET_Framework)应用程序；基础程序是[PowerBuilder](http://en.wikipedia.org/wiki/PowerBuilder)。它有一个`.exe`文件，一些`.pbd`文件和一些`.dlls`组成程序的文件。是否可以为这种类型的应用程序创建 ClickOnce 部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:14:58.400

我对 PowerBuilder 了解不多，但您可能想研究一下 WiX。可以使用 ClickOnce 部署您的应用程序，但我很确定 ClickOnce 是 .NET 框架的一部分。WiX 有一点学习曲线，但如果您想为您的应用程序创建安装程序，它是一个强大的工具。

[http://wixtoolset.org/](http://wixtoolset.org/)

[http://dotupdater.codeplex.com/](http://dotupdater.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:22:25.853

我自己没有使用 ClickOnce，但 ClickOnce 应该可以与 PowerBuilder [Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)应用程序一起使用。（PowerBuilder Classic 可以创建 Windows 窗体应用程序。）

从理论上讲，您可以将 Windows 窗体目标添加到当前应用程序的工作区，并将目标基于现有应用程序。您可以继续以旧方式处理您的应用程序，然后当您准备发布时，您将改为构建 Windows 窗体目标。然后应用 ClickOnce 需要做的任何事情。

当然，这都是理论。现实可能有点不同。

您可以在*[使用 PowerBuilder 11.0 的智能客户端应用程序开发](http://pbdj.sys-con.com/node/297705?page=0,0)*中了解更多信息。

# actionscript-3 - Actionscript 3 将 RadioButton 添加到 RadioGroup

> ID：13455454
> 
> 赞同：0
> 
> 时间：2012-11-19T14:06:55.470
> 
> 标签：actionscript-3, flash, flash-builder

我现在有点在 ActionScript 3.0 中工作。在我发现我可以在 Flash builder 4.6 中编写代码并在 Flash Professional 中做 gui 之后，事情变得更加顺利。

但正如标题所说，我在舞台上只有几个名为 rb1、rb2 的 RadioButton。由于我在 flash builder 中编码，我需要通过编写来引用它们： Public var rb1:RadioButton; 等等...这不是问题，现在我可以通过编写 rb1.alpha / label/ 或任何我喜欢的方式来引用它。但是将那个按钮添加到一个组或引用一个组是问题所在。如果我创建一个像这样的组： public var group123:RadioButtonGroup; 并编写 group123.addRadioButton(rb1); 它不工作。如果有人想知道我为什么不这样做，那是因为我想为 RadioButton 设置一个开关以获得更好的代码结构。

希望任何人都可以帮助我！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:20:58.970

RadioButtons 不会作为子项添加到 RadioButtonGroup。使用 RadioButton 的属性**group**或**groupName**。

```
rb1.group = group123;
rb2.group = group123; 
```

# teamcity - TeamCity - NAnt - 无法开始构建

> ID：13455462
> 
> 赞同：1
> 
> 时间：2012-11-19T14:07:11.373
> 
> 标签：teamcity, nant

我在 TeamCity 中有一个非常基本的安装/配置，我正在使用一个 NAnt 构建步骤，其目标是严格地回显一条消息，仅此而已。我已经确认 NAnt 在我的机器上正常工作，但是当我尝试在我的构建中调用它时，我收到以下错误：

```
java.lang.ClassNotFoundException: org.apache.jsp.systemProblems_jsp 
```

在底部，我看到一条消息：

```
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.23 logs. 
```

我不确定这个实际的堆栈跟踪在哪里，但我在其他一些日志文件中看到了其他错误：

```
java.lang.ClassFormatError: Truncated class file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:26:04.143

发生这种情况是因为 linux 中的 SVN 区分大小写，所以我不得不执行 /Src/trunk 并且它超时了。谢谢您的帮助。

# matlab - 为什么这不是二维数组？

> ID：13455463
> 
> 赞同：0
> 
> 时间：2012-11-19T14:07:19.403
> 
> 标签：matlab

我对以下代码感到非常困惑：

```
>> x = [0.4+randn(100,1).*0.15; 1+ randn(200,1).*0.25];

>> size(x)

ans = 
    300    1 
```

我认为分号用于表示矩阵中的单独行。鉴于两个向量的长度不同，这不应该引发错误吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:11:23.497

当您创建 2 个数组并将它们连接起来时：

randn(100,1) 创建一个 100 行 1 列的数组 randn(200,1) 创建一个 200 行 1 列的数组

表达式中的分号表示：“将它们放在一起” 如果删除分号 (;)，它将是一个矩阵（并且可能会出错）。然后，您将 2 个列向量并排放置。

# ios - 视网膜 4 中的背景图像

> ID：13455469
> 
> 赞同：1
> 
> 时间：2012-11-19T14:07:33.777
> 
> 标签：ios, xcode, retina-display, iphone-4, iphone-5

我正在使用以下代码在我的 iphone 应用程序中设置背景。

```
[[self view] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background_final.png"]]]; 
```

问题是，如果我在 iPhone 5..retina 4" 中尝试应用程序，背景图像会被平铺，而不是在不应该有任何图像的地方出现黑色空间。

我在应用程序中有一个 Default-568h@2x.png，它具有正确的尺寸，但我仍然没有得到正确的图像背景。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:13:54.703

删除`Default-568h@2x.png`，你会得到预期的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:19:05.043

1)`Default-568h@2x.png`仅适用于启动图像。它不在应用程序的任何地方使用。

2）`colorWithPatternImage`如果图像尺寸小于视图，将重复

因此，您可以使用高度适合 4" 屏幕的图像。这也适用于 3.5" 屏幕。

# android - ListView 示例在结果视图中重复联系人

> ID：13455471
> 
> 赞同：1
> 
> 时间：2012-11-19T14:07:38.963
> 
> 标签：android, listview, android-contacts

我尝试了[Android API 指南](http://developer.android.com/guide/topics/ui/layout/listview.html#Example "Android API 指南")`ListView`中的示例。我或多或少地将示例中的代码复制到了一个活动中（我现在只省略了）。`progressbar`

一切正常，除了`ListView`显示我设备上的每个联系人的重复项（运行 Nexus 7，Android 4.2）。

每个联系人在`listview`. 我正在使用的光标已经返回了太多结果（它应该只返回 3 个项目，因为我的 Nexus atm 上只有三个联系人。）。当我检查`RAW_CONTACT_ID`重复项时，总是指向相同的 id 值（即我只得到 3 个唯一 ID）。

这表明不是我的视图代码有问题。

所以问题是适配器可能出了什么问题？

为什么光标返回所有联系人的重复项？或者设备上有什么东西会导致这些重复项被退回。

我已经查看了关于 SO 的其他问题，但似乎没有一个是关于这个特定问题的。

```
公共类 ThemeSelectorActivity 扩展 ListActivity
                                    实现 LoaderManager.LoaderCallbacks{

    private static final String TAG = "ThemeSelector";

    // 我们将从数据库中检索的行（联系人用作虚拟数据）
    static final String[] PROJECTION = new String[] {ContactsContract.Data._ID,
            ContactsContract.Data.DISPLAY_NAME}；

    // 获取联系人的选择条件
    静态最终字符串选择 = "((" +
            ContactsContract.Data.DISPLAY_NAME + " NOTNULL) AND (" +
            ContactsContract.Data.DISPLAY_NAME + " != '' ))";

    // 用于显示列表数据的适配器
    SimpleCursorAdapter mAdapter;

    @覆盖
    public void onCreate(Bundle savedInstanceState)
    {
        Log.d(TAG, "创建...");

        super.onCreate(savedInstanceState);

        // 将列表视图设置为可选
        getListView().setChoiceMode(AbsListView.CHOICE_MODE_SINGLE);

        // 对于游标适配器，指定哪些列进入哪些视图
        String[] fromColumns = {ContactsContract.Data.DISPLAY_NAME};
        int[] toViews = {android.R.id.text1}; // simple_list_item_1 中的 TextView

        // 创建一个空适配器，我们将使用它来显示加载的数据。
        // 我们为游标传递 null，然后在 onLoadFinished() 中更新它
        mAdapter = 新的 SimpleCursorAdapter（这个，
                android.R.layout.simple_list_item_1，空，
                从列，到视图，0）；

        setListAdapter(mAdapter);

        // 准备加载器。要么重新连接现有的，
        // 或者开始一个新的。
        getLoaderManager().initLoader(0, null, this);
    }

    // 当需要创建新的 Loader 时调用
    公共加载器 onCreateLoader(int id, Bundle args) {
        // 现在创建并返回一个 CursorLoader 来处理
        // 为正在显示的数据创建一个光标。
        return new CursorLoader(this, ContactsContract.Data.CONTENT_URI,
                投影，选择，空，空）；
    }

    // 当先前创建的加载器完成加载时调用
    public void onLoadFinished(Loader loader, Cursor data) {
        // 交换新光标。（框架将负责关闭
        // 一旦我们返回旧光标。）
        mAdapter.swapCursor(数据);
    }

    // 当先前创建的加载器被重置时调用，使数据不可用
    公共无效onLoaderReset（加载器加载器）{
        // 当最后一个 Cursor 提供给 onLoadFinished() 时调用
        // 以上即将关闭。我们需要确保我们不是
        // 更长时间使用它。
        mAdapter.swapCursor(null);
    }

    @覆盖
    /**
     * 启动显示所选主题预览的活动
     */
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, 位置, id);
        //String item = (String) getListAdapter().getItem(position);
        //Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
    }   
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:25:13.430

ContactsContract.Data.CONTENT_URI 是显示联系人的所有数据

你应该使用 ContactsContract.Contacts.CONTENT_URI

# ios - ios 想要FullScreenLayout 状态栏可见

> ID：13455472
> 
> 赞同：2
> 
> 时间：2012-11-19T14:07:45.333
> 
> 标签：ios, fullscreen, modalviewcontroller

我面临以下问题，我试图呈现一个 modalViewController 并使其覆盖整个屏幕，例如：

```
[controller setWantsFullScreenLayout:yes];
[myNavController presentModalViewController:controller animated:yes]; 
```

结果是控制器没有覆盖整个屏幕，并且状态栏在顶部可见。我真的不明白为什么会这样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:28:01.703

The `wantsFullScreenLayout` property does not hide the status bar, it makes the view controller get layed out behind it (and also get layed out behind things like navigation bars). An example of this is the built-in Photos app, where a picture appears behind the status and navigation bar:

![enter image description here](../Images/d00dbf3e87fd8d5814fc1c6da431e54a.png)

To make a modal view controller full screen you need to set the [`modalPresentationStyle`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/modalPresentationStyle) property of your view controller to `UIModalPresentationFullScreen`. With this enabled, you probably don't need or want to set `wantsFullScreenLayout`.

To hide the status bar you need to use the [`setStatusBarHidden:withAnimation:`](https://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/setStatusBarHidden:withAnimation:) method of `UIApplication`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:23:14.917

尝试添加这个：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:NO]; 
```

此外，如果您希望它始终隐藏并且在应用程序启动时，在您的 plist 文件中，添加`Status bar initially hidden`到`YES`.

# php - 如何在 PhpDoc 中指定对象数组

> ID：13455473
> 
> 赞同：8
> 
> 时间：2012-11-19T14:07:48.927
> 
> 标签：php, phpdoc

我使用 PhpDocumentor2 来生成文档。我搜索了这个主题，但我找不到它的具体规则。例如，我有一个名为 AddressField 的类，我想将我的 $addressFields 指定为 AddressField 对象的数组。

```
/**
 * @var AddressField[]
 */
private $addressFields; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-19T14:20:55.240

*phpdoc*自己在**[这里](https://docs.phpdoc.org/latest/guides/types.html#arrays)**描述了数组的使用：

> ### 1.4.4。数组
> 
> *   不明确的：`@return array`
> *   单一类型：`@return int[]`
> *   多类型：`@return (int|string)[]`

这同样适用于变量定义：

```
/* @var Type[] $arr */ 
```

# ruby-on-rails - Thinking Sphinx 搜索中的条件参数

> ID：13455474
> 
> 赞同：2
> 
> 时间：2012-11-19T14:07:50.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sphinx, params

我正在尝试将条件参数应用于思考狮身人面像搜索。

这就是我试图实现的（伪（ish）代码）。

我意识到这可能是一个愚蠢的问题，或者我正在以错误的方式解决它。但任何帮助都会很棒。

```
DistributerGame.search :conditions => {:game_genre => @genre *** IF PARAMS[GENRE] EXISTS ***}, :with => {:distributer_id => @distributer_id *** if PARAMS[DISTRIBUTER] EXISTS ***, :price_in_gbp => @price  ***  if PARAMS[PRICE] EXISTS ***} 
```

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:13:25.663

你可以这样做：

```
conditions = {}
conditions[:game_genre] = @genre if params[:genre].present?
withs = {}
withs[:distibuter_id] = @distributer_id if params[:distibuter].present?
withs[:price_in_gbp] = @price if params[:price].present?
# ...
DistributerGame.search :conditions => conditions, :with => withs 
```

**坚持你`params`的不同页面**：

```
#in your view:   
filter_params = {}
filter_params[:game_genre] = params[:genre] if params[:genre].present?
filter_params[:distibuter] = params[:distibuter] if params[:distibuter].present?
filter_params[:price_in_gbp] = params[:price] if params[:price].present?

@distributers.each do |d|
  filters_params[:distibuter] = d.id
  link_to d.name, filter_params # you may have to merge this with your resource_path

@genres.each do |g|
  filter_params[:genre] = g.id
  link_to g.name, filter_params 
```

# c++ - 如何在 C++ 中将字节数组发送到另一个进程

> ID：13455475
> 
> 赞同：5
> 
> 时间：2012-11-19T14:07:57.970
> 
> 标签：c++, windows, process, protocol-buffers

我一直在该站点上检查一种将数据从一个进程传输到另一个 C++ 进程的方法。我找到了方法 SendMessage() 但它似乎无法获取字节数组。

为了稍微解释一下这里的上下文，我有一个将数据发送到另一个应用程序的应用程序。我们有几个具有不同 ID 的对象。接收的应用程序为每个不同的对象创建一个选项卡。如果接收数据的应用程序关闭，我们将启动一个新进程并将数据显示给用户。如果我们第二次发送，我们需要检查 ID 以查看我们是否已经拥有其中一个对象，如果是则替换它。否则为新对象添加新选项卡。

我们使用来自谷歌的协议缓冲区，它们使用字节数组进行传输和序列化，这就是为什么我需要找到一种方法将字节数组从一个进程发送到另一个进程。

我能够获得该过程的 HWND，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:14:39.277

进程间通信是特定于平台的事情。在 Windows 中，有很多方法可以做到这一点。这篇 MSDN 文章描述了几种方法及其优缺点和用例：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx)

当您控制这两个应用程序，并且您不关心对第 3 方应用程序的支持时，通过 SendMessage() 将[WM_COPYDATA](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649011%28v=vs.85%29.aspx)消息发送到另一个进程可能是一个好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:14:57.777

如果你想使用 SendMessage，你可以使用[WM_COPYDATA](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms649011%28v=vs.85%29.aspx)消息来发送一个数据块，尽管它只是一个字节块，而不是一个对象。

# css - css继承，隐藏根元素

> ID：13455478
> 
> 赞同：2
> 
> 时间：2012-11-19T14:08:03.977
> 
> 标签：css, inheritance

我有这样的事情：

```
 <ul class='yellow'>
      <li>item 1</li>
      <li>item 2</li>
      <li>item 3</li>
    <ul>

    <ul class='yellow'>
      <li>item 1</li>
      <li>item 2</li>
      <li>item 3</li>
    <ul> 
```

我为ul的eatch li元素设置了背景。我在想最好的方法是使用`ul {background: yellow}`, 和 `li {background: inherit}`. 继承有效，但我不知道如何隐藏 ul 容器的背景...我尝试使用`display: inline`or`width: 0px`和默认溢出解决它，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:13:25.133

不要为`<ul>`. 只为`<li>`你的孩子设置它`<ul class='yellow'>`。

```
ul.yellow li{
  background-color: #ff0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:26:57.690

我这样解决：http: [//jsfiddle.net/nDVr6/3/](http://jsfiddle.net/nDVr6/3/)

我不想使用`ul.yellow li`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:14:39.093

您可以将背景直接添加到 li 或尝试 display:none 到 ul。设置父元素的宽度不起作用，因为它不会缩小到小于子对象

# jquery - xhr status=0 和 xhr status=400 的 Ajax/Jquery 框架问题

> ID：13455480
> 
> 赞同：2
> 
> 时间：2012-11-19T14:08:18.360
> 
> 标签：jquery, ajax, xmlhttprequest

迁移到 Ajax/JQuery 框架后，我们遇到了很多网络和应用程序错误。问题似乎在于未处理并从浏览器本身返回的大量 Web 服务调用。我们为这些网络错误放置了详细的日志，发现 xhr=0 状态是最常见的情况，其次是 xhr=400。xhr=0 发生在多个浏览器中，而 xhr=400 状态代码仅发生在 IE 浏览器上，并且在卡住大约 5 分钟后也会发生。希望知识渊博的人士在诊断和修复此问题方面提供帮助。

# c# - 将 .NET 库转换为在 Windows Phone 7 中使用（这里我需要 Google API 库）

> ID：13455482
> 
> 赞同：1
> 
> 时间：2012-11-19T14:08:27.527
> 
> 标签：c#, .net, windows-phone-7

目前我正在开发一个 Windows Phone 应用程序，我想将 Google API 用于 OAuth 和日历。不幸的是，无法导入 Google 的 ddl 文件，给我一个错误，它是一个 .NET 库而不是特定的 Wndows Phone 库。

我还没有找到任何人试图转换谷歌 API 文件，特别是 WINdows Phone - 有人知道吗？

或者是否有任何将 .NET 库转换为 Windows Phone 库的转换器？

或者是否有其他可能性可以在我的 Windows Phone 项目中使用 Google 库？我真的不想自己实现 OAuth2 的东西，拥有日历 API 会很好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:16:22.343

安装nuget，打开你的windows phone 7.1项目并右键单击reference manage nugget，搜索GDATA，你应该找到你要找的。

# javascript - jQuery幻灯片技术

> ID：13455483
> 
> 赞同：1
> 
> 时间：2012-11-19T14:08:35.187
> 
> 标签：javascript, jquery, slideshow

我正在尝试制作自己的自定义 JQuery 幻灯片。幻灯片由一个 img 标签和一个文本标签组成。我希望这些数据可以在 ul li 标签中提供，例如

```
<ul>
  <li>image1.jpg</li>
  <li>THIS IS TEXT<li/>
<ul/>
<ul><li><li/><ul/> 
```

和幻灯片元素中提供的幻灯片模板

```
<div id="slideshow">
  <img src="image1">
  <p>THIS IS TEXT</p>
<div/> 
```

然后我的技术是将所有数据存储在变量中，并使用 setInterval(function(){},3000) 循环遍历幻灯片 - 并在每次循环后使用当前图像修改 img 标签的 src 属性，并使用当前文本修改 p 标签。

它在 localhost 上运行，但在我的 goDaddy 服务器上却没有。F12 向我显示 src 属性不断变化，但未呈现更新 - 只有文本被更改。

然后我认为图像必须存储在页面上的某个位置，显示：无，以便可以立即访问它们，所以我将其添加到代码中，但仍然没有更改。

**这是我的代码**

```
$(function(){
 $(".slider").each(function(i, slideElem){
var slides=[];
$(slideElem).find("div ul").each(function(i, elem){
  var slide={};
  slide.image=$.trim($(elem).find("li:first").html());
  slide.text1=$.trim($(elem).find("li").eq(1).html());

  slide.text2 = $(elem).find("li").length > 2 ? $.trim($(elem).find("li").eq(2).html())                       : "";    
  slides.push(slide);
});

var cache=$("<div>").css("display", "none").appendTo(slideElem);
$(slides).each(function(i, val){
  cache.append($("<img>").attr("src", val.image));
});

$(slideElem).find("div").has("ul").remove();
setInterval(function () {
  var start=1;
  var slider=$(slideElem);
  var n;
  if((n=slider.data("next"))==undefined) n=0;
  if(n>=slides.length) n=start;
  var slide=slides[n];
  var p=slide.text1 + (slide.text2 ? ("<br />\n" + slide.text2) : "");
  var image = slide.image;

  slider.find("p").html("").html(p);
  slider.children("img").attr("src", image);

  if(n<(slides.length-1)) n++; else n=0;
  slider.data("next", n)    
    }, 3300);    
  });
 }); 
```

**这种技术有什么问题，什么是正确的技术？**

查看其他幻灯片，您似乎必须在页面上显示所有幻灯片：无，然后在幻灯片中旋转，将当前幻灯片更改为显示：块。这是正确的吗？

# c# - 如何让我的 Windows 服务保持活力？

> ID：13455487
> 
> 赞同：3
> 
> 时间：2012-11-19T14:09:06.113
> 
> 标签：c#, windows-services

我制作了一个简单的 Windows 服务，但是当我尝试启动它时，它会立即关闭并显示以下消息：

> 本地计算机上的 ConsumerService 服务启动然后停止。如果某些服务没有被其他服务或程序使用，它们会自动停止。

以下是我尝试运行的服务：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    static void Main()
    {
        var servicesToRun = new ServiceBase[] 
                                          { 
                                              new ConsumerService() 
                                          };
        ServiceBase.Run(servicesToRun);
    }
}

public partial class ConsumerService : ServiceBase
{
    private readonly MessageConsumer<ClickMessage> _messageconsumer;
    private readonly SqlRepository _sqlrep;
    private static Timer _timer;
    public ConsumerService()
    {
        InitializeComponent();

    }

    protected override void OnStart(string[] args)
    {
        try
        {
            File.Create(@"c:\ErrorLog.txt");
            WriteToFile("Has started : " + DateTime.UtcNow);
            var t = new Timer(OnTimeEvent, null, 1000, 1000);
        }
        catch (Exception e)
        {
            WriteToFile("Error : " + e.Message);
        }
    }

    private void OnTimeEvent(object state)
    {
        WriteToFile("The time is : " + DateTime.UtcNow);
    }

    protected override void OnStop()
    {
        WriteToFile("Has stopped : " + DateTime.UtcNow);
    }

    private static void WriteToFile(string s)
    {
        var stream = File.AppendText(@"c:\ErrorLog.txt");
        stream.WriteLine(s);
    }
} 
```

如您所见，它只是一个简单的计时器，每 1 秒向文件写入一行，所以我很困惑为什么这会阻止服务运行。我也很难看出 windows 给出的消息与该服务有什么关系，因为这会阻止任何服务运行，除非某些东西已经依赖于它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:21:06.330

这很可能是由于主线程中未处理的错误。要验证这一点，请检查事件日志，但从快速查看您的代码来看，该函数`WriteToFile`有可能崩溃并导致整个服务停止运行。

实际上它**应该**会崩溃，因为您让流处于打开状态（因此文件被锁定）并且第二次尝试打开它会导致错误。

将代码更改为此，它应该可以防止此类崩溃，并修复您的文件锁定错误：

```
private static void WriteToFile(string s)
{
    try
    {
        using (var stream = File.AppendText(@"c:\ErrorLog.txt"))
        {
            stream.WriteLine(s);
            stream.Close();
        }
    }
    catch (Exception e)
    {
        Console.WriteLine("error writing to file: " + e);
        //...or any other means of external debug...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:23:07.280

正如我所看到的那样，您的代码正在结束......因此，程序的执行自然而然地结束了。这就是您的服务也停止的原因，因为它的执行结束了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:19:53.403

来自[msdn](http://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.100%29.aspx)：

> 只要您使用 Timer，就必须保留对它的引用。与任何托管对象一样，当没有对 Timer 的引用时，它会受到垃圾回收的影响。Timer 仍然处于活动状态的事实并不能阻止它被收集。

您不保留对`Timer`对象的任何引用。

尝试改变这个：

```
private static Timer _timer; 
```

对此：

```
private Timer _timer; 
```

还有这个：

```
var t = new Timer(OnTimeEvent, null, 1000, 1000); 
```

对此：

```
_timer = new Timer(OnTimeEvent, null, 1000, 1000); 
```

# applescript - Applescript：使用用户输入从通讯簿获取联系人电子邮件并添加到邮件消息

> ID：13455488
> 
> 赞同：1
> 
> 时间：2012-11-19T14:09:09.137
> 
> 标签：applescript, apple-mail

我想知道我可以使用什么脚本将联系人中的人的电子邮件地址添加到 Mac 邮件？

到目前为止，这就是我所拥有的，它要求各种输入，然后使用这些来编译消息。消息的其余代码工作正常，但我希望脚本在“联系人”中查找此人（基于输入）并将那里列出的邮件地址添加到“收件人”字段中的消息中：

```
--User Inputs to get Client details
display dialog "You are about to Create Outgoing e-mail for: Test

Please enter Client's First Name:" default answer "First Name"
set ClientName to text returned of result
display dialog "Please enter Client's Last Name:" default answer "Last Name"
set ClientLastName to text returned of result

--Create e-mail
tell application "Mail"
set theMessage to make new outgoing message with properties {visible:true, subject:"Test", content:"Hi " & ClientName & ",
"}

tell theMessage
    make new to recipient at end of to recipients with properties {address:ClientName  & ClientLastName}
end tell
end tell 
```

这会创建消息并将“ClientName + LastName”添加到 To 字段，但我仍然需要进入并找到邮件地址。我希望通讯簿按名字和姓氏查找此人，然后在“收件人”字段中添加他的地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:47:12.513

好吧，这很快就失控了：

```
repeat
    display dialog "You are about to Create Outgoing e-mail for: Test
    Please enter Client's First Name:" default answer "First Name"
    set ClientName to text returned of result
    display dialog "Please enter Client's Last Name:" default answer "Last Name"
    set ClientLastName to text returned of result
    tell application "Address Book" to set myContact to every person whose first name is ClientName and last name is ClientLastName
    if myContact ≠ {} then
        exit repeat
    else
        display dialog "There is not match for " & ClientName & space & ClientLastName & " in your Address Book." buttons {"Try again", "Cancel"} default button "Try again"
    end if
end repeat

tell application "Address Book"
    if (count of myContact) > 1 then
        repeat with aPerson in myContact
            display dialog "More than one person in your Address Book is named " & ClientName & space & ClientLastName & ". Please select your contact..." & aPerson's vcard buttons {"Select", "Next", "Cancel"} default button "Select"
            if button returned of the result = "Select" then
                set myContact to contents of aPerson
                exit repeat
            end if
        end repeat
    else if (count of myContact) = 1 then
        set myContact to first item of myContact
    end if

    repeat
        set contactEmail to emails of myContact
        if contactEmail ≠ {} then
            exit repeat
        else
            display dialog "There is not an email listed for " & ClientName & space & ClientLastName buttons {"Cancel"} default button "Cancel"
        end if
    end repeat

    if (count of contactEmail) > 1 then
        set theEmails to {}
        repeat with anEmail in contactEmail
            set end of theEmails to label of anEmail & ": " & value of anEmail
        end repeat
        set contactEmail to first item of (choose from list theEmails with prompt "Please select an email address:")
        set AppleScript's text item delimiters to ": "
        set contactEmail to text item -1 of contactEmail
        set AppleScript's text item delimiters to {""}
    else if (count of contactEmail) = 1 then
        set contactEmail to value of first item of contactEmail
    end if
end tell

tell application "Mail"
    set theMessage to make new outgoing message with properties {visible:true, subject:"Test", content:"Hi " & ClientName & ",
"}

    tell theMessage
        make new to recipient at end of to recipients with properties {address:contactEmail}
    end tell
end tell 
```

# sql - 使用视图显示 FlightTrip 和 FlightStop 详细信息

> ID：13455489
> 
> 赞同：0
> 
> 时间：2012-11-19T14:09:12.207
> 
> 标签：sql, relational-database

我想从特定表中提取数据。然而，约束是我需要 2 个关系视图来获取数据。我可以在不使用视图的情况下获取数据，但要求是使用视图。我是 db 的新手。我希望你们能帮助我。因此，我认为我需要使用 2 个表中的数据。但据我了解，我认为我不需要使用 2 张桌子。希望你们能给点建议。正如我之前所说，我需要使用 2 个视图来提取数据。

```
 FlightTripNo Departure Destination FinalDestination
 - - - - - - - - - - - - - - - -
 05 Singapore Bangalore Chennai
 03 Sdyney Auckland 
```

这是下表。

```
FLIGHTTRIP( FlightTripNo,PlaneNo)
PRIMARY KEY (FlightTripNo),

( 1, JET348)
( 2, TR1313)
( 3, TR287)
( 4, MY871P)
( 5, SQ777)
( 6, AI322X) 
```

飞行停止表

```
FLIGHTSTOP(  FlightTripNo, FlightStopNo, DEPARTURE, DESTINATION )    
PRIMARY KEY (FlightTripNo, FlightStopNo)
UNIQUE UNIQUE(FlightTripNo, DEPARTURE, DESTINATION)
FOREIGN KEY (FlightTripNo) REFERENCES FLIGHTTRIP(FlightTripNo)

INSERT INTO FLIGHTSTOP VALUES( 1, 1, 'Singapore', 'Malaysia');
INSERT INTO FLIGHTSTOP VALUES( 1, 2, 'Malaysia', 'Chennai');
INSERT INTO FLIGHTSTOP VALUES( 1, 3, 'Chennai', 'Bangalore');
INSERT INTO FLIGHTSTOP VALUES( 3, 1, 'Syndey', 'Auckland');
INSERT INTO FLIGHTSTOP VALUES( 5, 1, 'Singapore', 'Bangalore');
INSERT INTO FLIGHTSTOP VALUES( 5, 2, 'Bangalore', 'Chennai');
......
Total 400 records 
```

这是我在不使用视图的情况下做了多远。但我需要使用视图。和 2 视图。请指教。

```
 SELECT FLIGHTSTOP.FlightTripNo,FLIGHTSTOP.FlightStopNo, FLIGHTSTOP.DEPARTURE AS ORIGIN,  FLIGHTSTOP.DESTINATION AS DESTINATION1, T2.DESTINATION AS DESTINATION2
 FROM FLIGHTSTOP LEFT JOIN FLIGHTSTOP T2 ON FLIGHTSTOP.FlightTripNo = T2.FlightTripNo AND   FLIGHTSTOP.DEPARTURE = T2.DEPARTURE
 WHERE FLIGHTSTOP.FlightTripNo IN (SELECT FlightTripNo FROM FLIGHTSTOP
                GROUP BY FlightTripNo
                HAVING COUNT(*) < 3)
                ORDER BY FLIGHTSTOP.FlightTripNo; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:59:13.583

正如@NWest 所说，视图是一个类似于表的数据库对象。但它本身并不存储任何数据。视图的概念实际上是存储一条 SQL 语句。使用视图存储复杂的 sql 语句有助于更轻松地进行复杂查询。此外，它还具有您可以直接在视图上执行 SELECT 语句的特点。例如：

```
create view emp_dept as select empno, ename, sal, dept.deptno, dname from emp, dept
where emp.deptno = dept.deptno and deptno=10; 
```

现在创建了一个名为 emp_dept 的视图。您可以像表格一样通过以下语句查询视图。您可以将此视图与另一个视图或表连接起来。

```
select ename, sal from emp_dept where sal>2000. 
```

我希望你有一个观点的想法。现在将此概念用于您的示例。

# performance - for循环中的计算速度

> ID：13455494
> 
> 赞同：2
> 
> 时间：2012-11-19T14:09:30.180
> 
> 标签：performance, matlab, random, for-loop, matrix

我在 matlab 中编写了一个小循环来生成随机 NxN 矩阵。循环是

```
tic
for i=1:10000
    u=rand(1,10000);
    tau(i,:)=d.*(u(1,:)-0.5);
end
toc 
```

我第一次只尝试了一次循环例程，

```
 u=rand(1,10000);
    tau=d.*(u(1,:)-0.5); 
```

这在 0.000169 秒内给了我 tau。我假设循环将花费大约 1.69 秒。没有，粉丝们疯狂地花了 555.018280 秒。

是否有
a）速度与迭代次数不呈线性关系的原因？
b）为什么多次执行例程需要更长的时间的原因**c**）
加速这个的方法（我实际上想生成更大的矩阵），例如更好的循环或给我的方法，比如说，同类型的 1'000'000x1'000'000 矩阵？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T14:15:54.300

您必须首先预先分配您的矩阵`tau`，即

```
 tau = zeros(10000,10000); 
```

否则matlab将在有足够空闲内存的区域不断重新分配它（=>找到一个有足够空闲空间+硬拷贝的区域）。

一般来说，您将获得更好的性能矢量化整个过程：

```
 u=rand(10000,10000);
 tau=d.*(u-0.5); 
```

* * *

**编辑：**最重要的是，在下面的评论中听取罗迪的明智建议。（无论如何，我*想*这会比串行执行 `rand(a,b)`快一点）。`a``rand(1,b)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:21:10.653

一种明显的可能性是内存访问量。测试循环的内存可能完全在缓存中，但是由完整循环写入的内存需要大量的主内存访问。

这是一个可检验的假设：时间写整个矩阵，而不做算术。

如果我了解 Matlab 索引，您可能会更快地切换尺寸，以便您编写位于同一列而不是同一行的块。将 u 转换为循环外的列向量也可能会有所帮助。一般来说，大矩阵访问应该尽可能按内存顺序进行。

# javascript - 将格式化日期添加到自定义网格

> ID：13455500
> 
> 赞同：0
> 
> 时间：2012-11-19T14:09:53.037
> 
> 标签：javascript, sdk, rally

我正在 Rally 中创建一个自定义网格，以在我的项目中创建一个投资组合项目表。我试图公开的一个字段是计划开始日期。按原样使用时，它以以下格式返回日期时间 - “YYYY-MM-DDTHH:MM:SS.xxxZ”。我一直在尝试使用 rally.sdk.util.DateTime.format(date(), "yyyy-MM-dd") 函数在创建我的 rowInfo 名称/值对时返回日期而不是全部内容添加到我的表中，但它不起作用。

有任何想法吗？

```
var tbCfgTable = {
    columns: [{  
        key: 'ID',  
        width: "20%"  
    },{
        key: 'Name',
        width: "4%"
    },{
        key: 'Planned Start',
        width: "4%"
    },{
        key: 'Planned End',
        width: "3%"
    }]
};
gTable = new rally.sdk.ui.Table(tbCfgTable);

var nbrPis = theResults.pisQueryKey.length;
for (var ndx = 0; ndx < nbrPis; ndx++){
    aPi = theResults.pisQueryKey[ndx];
    // populate planned schedule rows
    aRowInfo = {
            'ID': aPi.Name,
            'Name': aPi.Name,
            'Planned Start': aPi.PlannedStartDate,
            'Planned End': aPi.PlannedEndDate
            };
    gTable.addRow(aRowInfo);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:23:51.667

你真的很接近了——你需要做的就是首先将日期字符串解析为日期对象，然后对其进行格式化。

```
//function to format date
function formatDate(dateString) {
    if(!dateString) { return ''; }

    return rally.sdk.util.DateTime.format(
        rally.sdk.util.DateTime.fromIsoString(dateString, true), 'yyyy-MM-dd');
}

//build your table rows as usual, calling formatDate for each date field
aRowInfo = {
    'ID': aPi.Name,
    'Name': aPi.Name,
    'Planned Start': formatDate(aPi.PlannedStartDate),
    'Planned End': formatDate(aPi.PlannedEndDate)
}; 
```

# box2d - Farseer / Unity - 运动体和传感器

> ID：13455503
> 
> 赞同：1
> 
> 时间：2012-11-19T14:10:08.863
> 
> 标签：box2d, unity3d, farseer

我正在使用 Unity 开发 Plattformer 游戏。我目前正在使用[CatsInTheSky](http://www.catsinthesky.com/blog/article/2012/03/5/farseer-physics-box2d-and-unity-part-1)的 Farseer-Port ：

我遇到了一些问题......是的，物理。我真的不想让游戏中的东西变得逼真，但我想使用 Farseer 的 CollisionDetection。

所以，我遵循了 Farseer-Unity-Tutorials 并给了我的角色一个盒子（BodyType：动态）。它的行为应如此：

*   跌倒
*   与地面相撞
*   而且有点滑

然后我开始对 Farseer 和 Box2D 进行一些研究（有一些更有用的教程），因为我只想让我的角色移动，当我说他移动时，不要在地面上滑动或类似的东西。

我读了一些关于好方法的文章：Using Sensors for Collision Detection。

所以我在 Unity 中又制作了四个 GameObjects 并将它们称为 Back/Front/Foot/Head-Sensor，给它们一个 RevoluteJoint-Component 并将 PlayerObject 与这四个 GameObjects 绑定（它也有一个 Body-Component 并且标记为“Dynamic” -Bodies），我给了他们一个脚本，其中包含这样的 CodeLine：

```
 FootSensor.IsSensor = true; 
```

所以它们根本不会发生碰撞（因为它们被标记为动态物体），但会发生碰撞。

现在我有点卡住了：/

我无法弄清楚如果我的 Player-Body 触地时如何准确地告诉他静止不动。

我尝试过这样的事情，但它根本不起作用：

```
bool SensorOnCollision (Fixture fixtureA, Fixture fixtureB, Contact contact)
{
    Debug.Log("HIT THE GROUND!");

    velocity.Y = 0;

    return true;
} 
```

（“速度”变量是一个全局变量，我在其中放置了我的播放器的 Body.LinearVelocity-Information）

然后我将我的 Player-Body 更改为 Kinematic-Body 知道它根本不会浮动或碰撞，直到我想要这样。所以重力也完全不会影响它。

我只想让我的传感器告诉我，如果我被接地，如果是，我应该留在这个地面上。

如果有人可以提供帮助，真的会很感激吗？

（如果其他人正在使用该 Unity-Port，我很想知道如何访问 Farseer ContactListener。）

# c# - linq-to-sql 查询结果到 c# 字典 - 如何

> ID：13455505
> 
> 赞同：3
> 
> 时间：2012-11-19T14:10:12.770
> 
> 标签：c#, linq-to-sql, lambda

使用 c# 和 LinqToSql 我查询数据库表并返回单个唯一记录。

**问题：** 如何将查询结果放入字典中：数据库表的列名作为字典键，数据库表的列值作为字典值。

**注意：**我并不总是知道表格的列名的名称或编号

```
Dictionary<string, string> QueryResult = new Dictionary<string, string>

var UniqueRecord = (from tbl DataContext.Table
                                 where tbl.ColumnName1.Equals(Parameter1) 
                                 && tbl.ColumnName2.Equals(Parameter2)
                                 select tbl); 
```

//如何将 var UniqueRecord 添加到 Dictionary

==================================================== =================================

# **我最终使用了这个**

==================================================== =================================

```
var UniqueRecord = (from tbl DataContext.Table
                                 where tbl.ColumnName1.Equals(Parameter1) 
                                 && tbl.ColumnName2.Equals(Parameter2)
                                 select tbl);

 foreach(var item in OnlineBezeichnungRekord)
 {
   var properties = item.GetType()
                        .GetProperties()
                        .ToDictionary(p => p.Name, p => p.GetValue(item, null).ToString());

   Dictionary<string,string> DictionaryValues = properties;

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:30:28.010

`DataRow`考虑到手动将 a 转换为 a是多么简单`Dictionary`，我不会`Enumerable.ToDictionary`在你的情况下使用，而只是做循环：

```
Private Function GetDictionaryFromDataRow(dr As DataRow) As Dictionary(Of String, Object)
  Dim dict As New Dictionary(Of String, Object)
  For Each col As DataColumn In dr.Table.Columns
    dict.Add(col.ColumnName, dr.Item(col))
  Next
  Return dict
End Function 
```

然后只需确保您的查询返回一个`DataRow`，所以使用`UniqueRecord(0)`.

# angularjs - AngularJS ng-click 未在 dom 内重复的地方调用

> ID：13455507
> 
> 赞同：0
> 
> 时间：2012-11-19T14:10:26.690
> 
> 标签：angularjs

当我的代码示例中的 ng-repeat 区域执行时，ng-click 操作不起作用。虽然如果移到 ng-repeat 之外它会起作用。不知道如何解决或导致这种情况发生的原因，

我的 HTML

```
<table class="table table-bordered table-hover" id="my-vehicles-table" ng-controller="VehicleController">
                <tbody>
                    <tr ng-repeat="car in cars">
                        <td><a href="{% ng car.get_absolute_url %}">{% ng car._get_model_display.make_display %} {% ng car._get_model_display.model_display %} {% ng car._get_model_display.trim_display %}</a></td>
                        <td>{% ng car.created_since %}</td>
                        <td>{% ng car.view_count %}</td>
                        <td>
                            <a href="#" ng-click="delete($event, {% ng car.id %})" class="btn btn-danger btn-mini delete-btn">{% trans 'Delete' %}</a>
                            <a href="#" ng-model="edit" class="btn btn-primary btn-mini edit-btn">{% trans 'Edit' %}</a>
                        </td>
                    </tr>
                </tbody>
</table> 
```

其中 {% ng xxx %} 将输出 {{ xx }} 这是它的 django 模板标签。内容正常呈现，即使在删除的锚内，我也可以看到 delete($event, num) 因此它正确填充了值。

但是当我单击删除锚点时，它不会从我的以下控制器调用函数删除

```
'use strict';

function VehicleController($scope, car) {
    car.query(
        // params
        {created_by: '1'},
        // success
        function(data) {
            $scope.cars = data.objects;
        },
        // error
        function(data) {

        }
    );

    var init = function() {

    };

    $scope.delete = function($event) {
        console.log('dude');
//        car.delete({id: id});
    }

    // initialize values
    init();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:30:28.290

`delete($event, {% ng car.id %})`应该只是`delete($event, car.id)`

我假设`{% ng %}`是定制的`{{ }}`？我以前没见过。无论哪种方式，您都不需要`{{`or`{% ng`的内部`ng-click=""`，因为这是`$eval`'ed。

# javascript - d3 力定向树上的曲线

> ID：13455510
> 
> 赞同：13
> 
> 时间：2012-11-19T14:10:31.673
> 
> 标签：javascript, svg, d3.js, force-layout

d3 的新手，并试图开发一种力导向树，我们可以将 varioss 数据集插入其中。我已经设法让基本想法启动并运行，但想让链接弯曲，这样我就可以处理多个链接。我查看了[http://bl.ocks.org/1153292](http://bl.ocks.org/1153292)，但我只是不明白。我得到的最接近的是它在没有可见路径的情况下工作。这是我的直线代码，如果您有时间，我将不胜感激

谢谢：

```
//Sets up the svg that holds the data structure and puts it in the div called mapBox
var svg = d3.select("div#mapBox.theMap").append("svg")
.attr("width", mapWidth)
.attr("height", mapHeight);

//Sets up the data structure and binds the data to it       
var force = d3.layout.force()
.nodes(data.nodes)
.links(data.links)
.size([mapWidth, mapHeight])
.charge(-600)
.linkDistance(60)
.start();

//Draws the links and set up their styles
var link = svg.selectAll("link")
.data(data.links)
.enter().append("line")
.attr("class", "link")
.style("stroke", "#ccc")

//Creates nodes and attached "g" element to append other things to
var node = svg.selectAll(".node")
.data(data.nodes)
.enter().append("g")
.call(force.drag);

//Appends the cirdle to the "g" element and defines styles
node.append("circle")
.attr("r", function(d) { if (d.weight<1.1) {return 5} else {return d.weight*1.3+5 }})
.style("fill", "White") 
.style("stroke-width", 3)
.style("stroke", function(d) { if (d.type==1) {return "#eda45e "} if(d.type==2) {return "#819e9a"}else {return "#c36256" }} ) // Node stroke colors
.on("mouseover", nodeMouseover)
on("mouseout", nodeMouseout)
.on("mousedown", nodeMousedown)
.call(force.drag);

//Appends text to the "g" element and defines styles
node.append("text")
.attr("class", "nodetext")
.attr("dx", 16)
.attr("dy", ".35em")
.attr("text-anchor", function(d) { if (d.type==1) {return "middle";} else {return "start";} })
.text(function(d) { return d.name })

force.on("tick", function() {
link.attr("x1", function(d) { return d.source.x; })
    .attr("y1", function(d) { return d.source.y; })
    .attr("x2", function(d) { return d.target.x; })
    .attr("y2", function(d) { return d.target.y; });

node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; }); 
```

});

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-19T14:42:49.783

德尔，解决了。

改变

```
.enter().append("line") 
```

至

```
.enter().append("path") 
```

然后改变

```
link.attr("x1", function(d) { return d.source.x; })
  .attr("y1", function(d) { return d.source.y; })
  .attr("x2", function(d) { return d.target.x; })
  .attr("y2", function(d) { return d.target.y; }); 
```

至

```
link.attr("d", function(d) {
var dx = d.target.x - d.source.x,
    dy = d.target.y - d.source.y,
    dr = Math.sqrt(dx * dx + dy * dy);
return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
}); 
```

希望能帮助任何像我一样陷入困境的人

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-04T07:44:41.703

这也对我有用。

首先定义一个路径：

```
var path = vis.selectAll("path")
   .data(force.links());

path.enter().insert("svg:path")
   .attr("class", "link")
   .style("stroke", "#ccc"); 
```

然后定义曲线，正如 Bob Haslett 所说，在[Mobile Patent Suits](http://bl.ocks.org/mbostock/1153292)示例中：

```
path.attr("d", function(d) {
    var dx = d.target.x - d.source.x,
        dy = d.target.y - d.source.y,
        dr = Math.sqrt(dx * dx + dy * dy);
    return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
}); 
```

# android - 片段中的 WebView - 尽管有 AndroidManifest 声明，但仍更改方向

> ID：13455511
> 
> 赞同：3
> 
> 时间：2012-11-19T14:10:32.640
> 
> 标签：android, webview, fragment

我需要在我的 Android 应用程序中更改 WebView 的方向（在旋转手机之后），但应用程序的所有其他部分都以纵向方向作为片段工作 - 我已将主要活动的方向值设置为“纵向”。有可能吗？

# php - PHP：<<< vs ob_start

> ID：13455517
> 
> 赞同：8
> 
> 时间：2012-11-19T14:10:58.227
> 
> 标签：php, buffering

在 PHP 中，有时我会看到：

```
$html = <<<HTML
<p>Hello world</p>
HTML; 
```

通常我会使用 ob_start() ：

```
ob_start();
?>
<p>Hello world</p>
<?php
$html = ob_get_contents();
ob_clean(); 
```

你能告诉我这两种写入缓冲区的方式有什么区别以及它们的优点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:23:25.950

```
$html = <<<HTML
<p>Hello world</p>
HTML;
// equivalent:
$html = "<p>Hello world</p>"; 
```

这使用[PHP 字符串 Heredoc 语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)，这是一种编写字符串的语法，类似于使用单引号和双引号，但以某种不同的方式转义。您可以使用`{}`直接在其中插入一些 PHP 字符串。

* * *

```
<?php
ob_start();
?>
<p>Hello world</p>
<?php
$html = ob_get_clean(); 
```

这是完全不同的事情。它利用[PHP 输出缓冲控件](http://www.php.net/manual/en/book.outcontrol.php)来捕获*不在*PHP 代码块内的内容。就像给定的例子一样，`<p>Hello world</p>`写在 PHP 代码块之外，应该立即输出到客户端。启用输出缓冲后，它们将存储在 PHP 中的缓冲区中，以便以后可以使用[`ob_get_contents()`](http://www.php.net/manual/en/function.ob-get-contents.php)或检索它[`ob_get_clean()`](http://www.php.net/manual/en/function.ob-get-clean.php)。如果你需要插入任何 PHP 变量，你需要使用`<?=$blah?>`or 甚至`<?php echo $blah?>`.

* * *

一些 CMS 使用输出缓冲控制功能来管理内容和模块。一个例子是 Joomla。这种设计的好处是，每当模块需要将内容放置到它的保留空间时，它可以简单地用于`echo`使内容可用。这可以简化从模块中获取内容的方式，无需实现特定的函数调用或分配给特定的变量，从而使系统更易于管理。

```
<?php
ob_start();
include dirname(__FILE__)."/content.php";
$content = ob_get_clean();
output_document(array("body"=>$content)); 
```

* * *

我还使用了输出缓冲函数，这样我就可以在顶部包含一个文件，并且最后不需要任何 PHP，我可以创建一个简单的模板系统，但这有点离题了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T14:18:20.083

HEREDOC ( `<<<`) 只是将字符串数据写入变量的另一种方法。另一方面，输出缓冲区将捕获`ob_start()`在您调用之前包含（HTML）输出您可能在代码中出现的任何警告或错误之后发生的所有输出`ob_get_contents()`；

通常，如果您只需要使用 HTML 格式化字符串，只需使用 HEREDOC 或常规字符串表示法。如果您需要在发送任何 HTTP 标头之前捕获输出，则通常使用输出缓冲区（例如，如果您使用[FirePHP](http://www.google.hr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CBoQFjAA&url=http://www.firephp.org/&ei=pD-qUJT7BNHFswbezoCwAw&usg=AFQjCNGme8775_A4MEKW_FLzswC_CnpaYw)调试应用程序，则需要使用输出缓冲，因为 FirePHP 将日志记录数据嵌入到 HTTP标题）。

# wpf - 为什么我在 ComboBox 中得到异常（'System.NullReferenceException'）

> ID：13455521
> 
> 赞同：4
> 
> 时间：2012-11-19T14:11:06.653
> 
> 标签：wpf, data-binding, combobox

如果我将事件处理程序添加到组合框，例如SelectionChanged，我会遇到异常。谁能告诉我为什么。

奇怪的行为，因为在我的笔记本电脑上安装了带有 VS2010 的 win7 时，它运行成功。

例外：

```
A first chance exception of type 'System.NullReferenceException' occurred in    wpfapplication.exe
Additional information: Object reference not set to an instance of an object. 
```

异常调用栈：

> PresentationFramework.dll!System.Windows.FrameworkTemplate.LoadTemplateXaml(System.Xaml.XamlReader templateReader, System.Xaml.XamlObjectWriter currentWriter) + 0x247 字节
> PresentationFramework.dll!System.Windows.FrameworkTemplate.LoadTemplateXaml(System.Xaml.XamlObjectWriter objectWriter) + 0x66 字节 PresentationFramework.dll!System.Windows.FrameworkTemplate.LoadOptimizedTemplateContent(System.Windows.DependencyObject 容器, System.Windows.Markup.IComponentConnector componentConnector, System.Windows.Markup.IStyleConnector styleConnector, System.Collections.Generic.List 受影响的Children, System.Windows.UncommonField templatedNonFeChildrenField) + 0x26a 字节 PresentationFramework.dll!System.Windows.FrameworkTemplate.LoadContent(System.Windows.DependencyObject 容器, System.Collections .Generic.List affectedChildren) + 0x76 字节
> PresentationFramework.dll!System.Windows.StyleHelper.ApplyTemplateContent(System.Windows.UncommonField dataField, System.Windows.DependencyObject 容器, System.Windows.FrameworkElementFactory templateRoot, int lastChildIndex, System.Collections.Specialized.HybridDictionary childIndexFromChildID, System.Windows.FrameworkTemplate frameworkTemplate) + 0xc4 字节
> PresentationFramework.dll!System.Windows.FrameworkTemplate.ApplyTemplateContent(System.Windows.UncommonField templateDataField, System.Windows.FrameworkElement 容器) + 0x3b 字节
> PresentationFramework.dll!System.Windows.FrameworkElement.ApplyTemplate() + 0x7b 字节
> PresentationFramework.dll!System.Windows.FrameworkElement.MeasureCore(System.Windows.Size availableSize) + 0x40 字节
> PresentationCore.dll!System.Windows.UIElement.Measure(System.Windows.Size availableSize) + 0x207 字节

xml:

```
<DataGrid Margin="80,0,0,0"  GridLinesVisibility="None"  
                                              RowDetailsVisibilityMode="Collapsed" 
                                              ColumnHeaderStyle="{StaticResource ColumnHeaderStyle}"  
                                              RowStyle="{StaticResource DataGridRowStyleAlternation}" 
                                              AutoGenerateColumns="False" SelectionMode="Single" 
                                              AlternationCount="2" Background="Transparent" HeadersVisibility="Column" 
                                              x:Name="detailsDatagrid" 
                                              Initialized="scenesDetailsDataGrid_Initialized"
                                              ItemsSource="{Binding Source={StaticResource scenesRequisitesViewSource}}" 
                                              ColumnDisplayIndexChanged="detailsDatagrid_ColumnDisplayIndexChanged" >
                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn Header="Fahrzeug" Width="SizeToCells">

                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <ComboBox DisplayMemberPath="Name"
                                                                   ItemsSource="{Binding Path=ProjectsRequisites, Source={StaticResource projectsViewSource}, UpdateSourceTrigger=PropertyChanged}" 
                                                                   SelectedValue="{Binding Path=RequisiteId,Mode=TwoWay}"
                                                                   SelectedValuePath="ID"     
                                                                  SelectionChanged="ComboboxRequisite_SelectionChanged"
                                                                   Tag="{Binding}" />

                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTextColumn IsReadOnly="True"  Binding="{Binding Path=Costs,StringFormat={}{0:C}, ConverterCulture={x:Static gl:CultureInfo.CurrentCulture}}" Header="Kosten" Width="SizeToCells" />
                                            <DataGridTextColumn Binding="{Binding Path=Count}" Header="Anzahl" Width="SizeToHeader" />
                                        </DataGrid.Columns>
                                    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:29:43.373

当我剥离 xaml 中依赖于您的背景代码的东西时，我无法重现这一点。这一点以及您的错误的性质向我表明您的 xaml 绑定到的对象之一有问题。它们都被初始化了吗？

```
ColumnDisplayIndexChanged="detailsDatagrid_ColumnDisplayIndexChanged" >
ItemsSource="{Binding Source={StaticResource scenesRequisitesViewSource}}" 
ColumnHeaderStyle="{StaticResource ColumnHeaderStyle}"  
RowStyle="{StaticResource DataGridRowStyleAlternation}"
Initialized="scenesDetailsDataGrid_Initialized"
Source={StaticResource projectsViewSource},
Binding="{Binding Path=Costs,StringFormat={}{0:C}, ConverterCulture={x:Static gl:CultureInfo.CurrentCulture}}" 
```

这是我拿出来让它运行的，大部分只是因为我缺少你的代码。其中之一肯定是有问题的。

更有可能您的处理程序的内容是错误的，其中有什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T17:46:02.923

我也遇到了这个错误。就我而言，我在 WinForms 应用程序中托管了一些 WPF 用户控件，并且错误发生在某些机器上，但其他机器上却没有。

此外，当我使用 捕获异常时`AppDomain.CurrentDomain.UnhandledException`，我得到的堆栈跟踪甚至比`LoadTemplateXaml`：

```
Object reference not set to an instance of an object.
Stack:
   at System.Windows.DeferredAppResourceReference.GetValue(BaseValueSourceInternal valueSource)
   at System.Windows.StaticResourceExtension.TryProvideValueInternal(IServiceProvider serviceProvider, Boolean allowDeferredReference, Boolean mustReturnDeferredResourceReference)
   at System.Windows.StaticResourceExtension.ProvideValueInternal(IServiceProvider serviceProvider, Boolean allowDeferredReference)
   at System.Windows.StaticResourceExtension.ProvideValue(IServiceProvider serviceProvider)
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CallProvideValue(MarkupExtension me, IServiceProvider serviceProvider)
   at MS.Internal.Xaml.Runtime.PartialTrustTolerantRuntime.CallProvideValue(MarkupExtension me, IServiceProvider serviceProvider)
   at System.Xaml.XamlObjectWriter.Logic_ProvideValue(ObjectWriterContext ctx)
   at System.Xaml.XamlObjectWriter.Logic_AssignProvidedValue(ObjectWriterContext ctx)
   at System.Xaml.XamlObjectWriter.WriteEndMember()
   at System.Xaml.XamlWriter.WriteNode(XamlReader reader)
   at System.Windows.FrameworkTemplate.LoadTemplateXaml(XamlReader templateReader, XamlObjectWriter currentWriter)
   at System.Windows.FrameworkTemplate.LoadTemplateXaml(XamlObjectWriter objectWriter)
   ... 
```

事实证明，问题在于，因为我在 WinForms 应用程序中托管，所以`Application.Current`为空。我通过在创建 UserControl 之前实例化 WPF 应用程序解决了这个问题：

```
if (Application.Current == null)
    new Application { ShutdownMode = ShutdownMode.OnExplicitShutdown }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:00:47.547

我认为问题出在 ComboBox 上的 Tag 属性->“Tag="{Binding}"”上。尝试删除它，问题应该消失。

我在其他控件中有这种奇怪的行为：网格、文本块。一切都在安装了 Visual Studio 2010 的所有计算机上运行，​​但在其他计算机上却没有。当我删除标签属性时，我的程序开始在其他机器上运行。

我的事件查看器错误是：

```
 Application: PragmaGRP.exe
    Framework Version: v4.0.30319
    Description: The process was terminated due to an unhandled exception.
    Exception Info: System.NullReferenceException
    Stack:
       at System.Windows.FrameworkTemplate.LoadTemplateXaml(System.Xaml.XamlReader, System.Xaml.XamlObjectWriter)
       at System.Windows.FrameworkTemplate.LoadTemplateXaml(System.Xaml.XamlObjectWriter)
       at System.Windows.FrameworkTemplate.LoadOptimizedTemplateContent(System.Windows.DependencyObject, System.Windows.Markup.IComponentConnector, System.Windows.Markup.IStyleConnector, System.Collections.Generic.List`1<System.Windows.DependencyObject>, System.Windows.UncommonField`1<System.Collections.Hashtable>)
       at System.Windows.FrameworkTemplate.LoadContent(System.Windows.DependencyObject, System.Collections.Generic.List`1<System.Windows.DependencyObject>)
       at System.Windows.StyleHelper.ApplyTemplateContent(System.Windows.UncommonField`1<System.Collections.Specialized.HybridDictionary[]>, System.Windows.DependencyObject, System.Windows.FrameworkElementFactory, Int32, System.Collections.Specialized.HybridDictionary, System.Windows.FrameworkTemplate)
       at System.Windows.FrameworkTemplate.ApplyTemplateContent(System.Windows.UncommonField`1<System.Collections.Specialized.HybridDictionary[]>, System.Windows.FrameworkElement)
       at System.Windows.FrameworkElement.ApplyTemplate()
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.Controls.Grid.MeasureCell(Int32, Boolean)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32, System.Windows.Size, Boolean, Boolean)
       at System.Windows.Controls.Grid.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.Controls.Control.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.Controls.Grid.MeasureCell(Int32, Boolean)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32, System.Windows.Size, Boolean, Boolean)
       at System.Windows.Controls.Grid.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at MS.Internal.Helper.MeasureElementWithSingleChild(System.Windows.UIElement, System.Windows.Size)
       at System.Windows.Controls.ContentPresenter.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.Controls.Border.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.Controls.Control.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.Controls.Grid.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.Controls.Grid.MeasureOverride(System.Windows.Size)
       at System.Windows.FrameworkElement.MeasureCore(System.Windows.Size)
       at System.Windows.UIElement.Measure(System.Windows.Size)
       at System.Windows.ContextLayoutManager.UpdateLayout()
       at System.Windows.ContextLayoutManager.UpdateLayoutCallback(System.Object)
       at System.Windows.Media.MediaContext+InvokeOnRenderCallback.DoWork()
       at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
       at System.Windows.Media.MediaContext.RenderMessageHandlerCore(System.Object)
       at System.Windows.Media.MediaContext.RenderMessageHandler(System.Object)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
       at System.Windows.Threading.DispatcherOperation.InvokeImpl()
       at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(System.Object)
       at System.Threading.ExecutionContext.runTryCode(System.Object)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object)
       at System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
       at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
       at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.ProcessQueue()
       at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
       at MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
       at System.Windows.Threading.Dispatcher.InvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(System.Windows.Interop.MSG ByRef)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame)
       at System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame)
       at System.Windows.Application.RunDispatcher(System.Object)
       at System.Windows.Application.RunInternal(System.Windows.Window)
       at System.Windows.Application.Run(System.Windows.Window)
       at PragmaGRP.App.Main() 
```

# php - 以概率选择随机条目

> ID：13455525
> 
> 赞同：2
> 
> 时间：2012-11-19T14:11:23.843
> 
> 标签：php, mysql, arrays

假设我在数据库中存储了以下信息：

```
User         Points
 A            2000
 B            1000 
```

我想根据点数随机选择一个获胜者。在这种情况下，由于总共有 3000 分，“A”有 67% 的机会被选中，“B”有 33% 的机会。

使用 PHP 选择获胜者的最有效方法是什么（从计算概率到选择获胜者）？请注意，玩游戏的用户数量不是固定的，范围可能很大（因此它应该计算“每个用户”而不是固定在 A 和 B）。

我一直在尝试潜在的解决方案，但还没有弄清楚。我很想听听你的解决方案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T12:43:01.520

基于处理用户和点的整个地图可能有许多类似的方法。这很简单，如果用户不多，也可以正常工作。但是当用户数量增加时，内存甚至 CPU 使用率可能会出现很大的性能问题。所以我考虑了一个可能的解决方案，考虑到性能。

这里描述了我将遵循的根据概率绘制用户的方法：

```
+------+--------+
| User | Points |     Bar graph:
+------+--------+
|  A   |     20 |     |~~~~~~~~~~~~~~~~~~~~|
+------+--------+
|  B   |     10 |     |~~~~~~~~~~|
+------+--------+
|  C   |      1 |     |~|
+------+--------+
|  D   |      5 |     |~~~~~|
+------+--------+
|  E   |     12 |     |~~~~~~~~~~~~|
+------+--------+
|  F   |      8 |     |~~~~~~~~|
+------+--------+
 TOTAL |     56 |     Random number: 33
       +--------+

If we take all bars and put them heel and toe we get something like this:
          A               B      C   D        E          F
|~~~~~~~~~~~~~~~~~~~~|~~~~~~~~~~|~|~~~~~|~~~~~~~~~~~~|~~~~~~~~|
             Position 33 is up here ▲ so we got a winner: user D 
```

这是一个简单的概念，但它可能会破坏性能，具体取决于算法实现（例如，如果我们尝试按顺序执行）。

我要做的是将用户组一分为二，并将第一部分的点总和与随机数进行比较。如果数量小于第一部分积分（累计）总和，则该数字必须对应该部分内的用户，否则该数字对应第二部分。这种方法必须递归地应用于每个选择的部分，直到我们得到一个用户（获胜者）。这样，我们在第一次迭代中丢弃了 1/2 的用户总数，在第二次迭代中丢弃了 1/4，依此类推。这意味着，如果我们有 100 万用户，那么在第二次迭代中，我们将摆脱 75 万用户。不错的国际海事组织。

这是基于 PHP 和 MySQL 的解决方案...

用户表：

```
CREATE TABLE `User` (
  `id` int(15) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `points` int(15) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1; 
```

数据库交互类：

```
class UserDb
{
    private $pdo;
    private $sumIntervalStmt;

    public function __construct(\PDO $pdo)
    {
        $this->pdo             = $pdo;
        $this->sumIntervalStmt = null;
    }

    public function getTotal()
    {
        $query  = 'SELECT COUNT(`id`) FROM `User`;';
        $result = $this->pdo->query($query);
        return (int)($result->fetchColumn());
    }

    public function getTotalPoints()
    {
        $query  = 'SELECT SUM(`points`) FROM `User`;';
        $result = $this->pdo->query($query);
        return (int)($result->fetchColumn());
    }

    public function sumPointsInterval($offset, $length)
    {
        if ($this->sumIntervalStmt === null) {
            $this->sumIntervalStmt = $this->pdo->prepare(
                'SELECT SUM(points) FROM (' .
                    'SELECT points FROM `User` LIMIT ?, ?' .
                ') AS Subgroup;'
            );
        }
        $this->sumIntervalStmt->bindValue(1, (int)$offset, \PDO::PARAM_INT);
        $this->sumIntervalStmt->bindValue(2, (int)$length, \PDO::PARAM_INT);
        $this->sumIntervalStmt->execute();
        return (int)($this->sumIntervalStmt->fetchColumn());
    }

    public function getUserByOffset($offset)
    {
        $query = 'SELECT * FROM `User` LIMIT ?, 1;';
        $stmt  = $this->pdo->prepare($query);
        $stmt->bindValue(1, (int)$offset, \PDO::PARAM_INT);
        $stmt->execute();
        return $stmt->fetchObject();
    }
} 
```

用户抽奖等级：

```
class UserRaffle
{
    private $users;

    public function __construct(UserDb $users)
    {
        $this->users = $users;
    }

    public function drawUser()
    {
        $total  = $this->users->getTotal();
        $number = rand(1, $this->users->getTotalPoints());
        $offset = 0;
        $length = ceil($total / 2);
        $count  = $total;
        $sum    = $this->users->sumPointsInterval($offset, $length);
        $accum  = 0;
        while ($count > 1) {
            if ($number <= $sum) {
                $count   -= $count - $length;
                $length   = ceil($length / 2);
                $interval = $this->users->sumPointsInterval($offset, $length);
                $sum      = $accum + $interval;
            } else {
                $accum   += $sum;
                $offset  += $length;
                $count   -= $length;
                $length   = ceil($count / 2);
                $interval = $this->users->sumPointsInterval($offset, $length);
                $sum     += $interval;
            }
        }
        return $this->users->getUserByOffset($offset);
    }
} 
```

和执行：

```
$pdo    = new \PDO('mysql:dbname=test;host=localhost', 'username', '********');
$users  = new UserDb($pdo);
$raffle = new UserRaffle($users);

$winner = $raffle->drawUser(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:25:38.053

只是一个想法（参考我关于机会的评论）：总结所有积分并为玩家排序。然后在 1 和 之间选择一个随机数`$sum`。现在你可以从你的随机数中减去玩家的分数，直到你达到 0。

```
$players = array(
        "A" => 2000,
        "B" => 1000
);
$sum = array_sum($players);
echo $random = rand(1, $sum)."\n";
foreach($players as $player => $points) {
        $winner = $player;
        $random -= $points;
        if($random <= 0)
                break;
}
echo $winner."\n"; 
```

您可以使用概率`$points/$sum`和 0.0 到 1.0 之间的随机数类似地执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:30:42.753

您可以对所有玩家使用公式 1/p。我认为标准化它是个好主意，以便所有概率的总和为 1。然后您可以使用 [0...1] 中的随机生成器并遍历所有玩家。当随机生成器的数字小于当前玩家概率时，选择该玩家，否则从随机数中减去当前概率并移动到下一个玩家：

```
 x = random([0.0, 1.0])
       for i in 0..n
           if x < probabilities[i]
               choose(i)
              break
           else
              x -= probabilities[i]
          end
        end 
```

当您需要标准化时，您必须将每 1/px 乘以所有 1/px 乘数之和的 reziproken。例如：您有一个具有两条边 p1=30 和 p2=15 的顶点。1/(1/30 + 1/15) = 10，P1 = 10 * 1/30 = 1/3 和 P2 = 10 * 1/15 = 2/3。

# python - 无法更改 _NET_WM_STRUT_PARTIAL 属性

> ID：13455527
> 
> 赞同：3
> 
> 时间：2012-11-19T14:11:31.457
> 
> 标签：python, x11, xcb, ewmh

我想在屏幕上为我用 Python 编写的 Gtk 应用程序保留一些空间。我写了这个函数：

```
import xcb, xcb.xproto
import struct
def reserve_space(xid, data):
    connection = xcb.connect()
    atom_cookie = connection.core.InternAtom(True, len("_NET_WM_STRUT_PARTIAL"), 
        "_NET_WM_STRUT_PARTIAL")
    type_cookie = connection.core.InternAtom(True, len("CARDINAL"), "CARDINAL")
    atom = atom_cookie.reply().atom
    atom_type = type_cookie.reply().atom
    data_p = struct.pack("I I I I I I I I I I I I", *data)
    strat_cookie = connection.core.ChangeProperty(xcb.xproto.PropMode.Replace, xid,
        atom, xcb.xproto.Atom.CARDINAL, 32, len(data_p), data_p)
    connection.flush() 
```

它的调用如下所示：

```
utils.reserve_space(xid, [0, 60, 0, 0, 0, 0, 24, 767, 0, 0, 0, 0]) 
```

不幸的是，它不起作用。我的代码哪里出错了？

UPD： [这](http://pastebin.com/tawxjPfE)是我的 xprop 输出。我的 WM 是 Compiz。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-12T11:21:44.633

我已经上传了一个[要点](https://gist.github.com/johnlane/351adff97df196add08a)，它演示了如何在当前监视器的顶部为可能是任务栏的东西指定一个支柱。它可能有助于解释其中的一些。

我的要点如下：

```
 window = gtk.Window()
 window.show_all()
 topw = window.get_toplevel().window
 topw.property_change("_NET_WM_STRUT","CARDINAL",32,gtk.gdk.PROP_MODE_REPLACE,
      [0, 0, bar_size, 0])
 topw.property_change("_NET_WM_STRUT_PARTIAL","CARDINAL",32,gtk.gdk.PROP_MODE_REPLACE,
      [0, 0, bar_size, 0, 0, 0, 0, 0, x, x+width, 0, 0]) 
```

起初我发现 strut 参数令人困惑，所以这里有一个我希望更清楚的解释：

我们设置`_NET_WM_STRUT`了旧的机制，`_NET_WM_STRUT_PARTIAL`但是如果窗口管理器支持后者，则忽略前者。数组中的数字如下：

*   `0, 0, bar_size, 0`是沿屏幕每个边缘保留的像素数，*按左*、*右*、*上*、*下*的顺序给出。此处，条形图的大小保留在屏幕顶部，而其他边缘则保持不变。
*   `_NET_WM_STRUT_PARTIAL`还提供另外四对，每对都是支柱的开始和结束位置（它们不需要占据整个边缘）。

在示例中，我们将 top start 设置为当前监视器的 x 坐标，并将 top-end 设置为相同的值加上该监视器的宽度。最终结果是仅在当前监视器上保留空间。

请注意，坐标是相对于屏幕指定的（即所有监视器一起）。

（有关完整上下文，请参阅参考要点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:42:54.263

更改为使用 ChangePropertyChecked()，然后检查结果会给出 BadLength 异常。

我认为这里的错误是`ChangeProperty()`参数`data_len`是属性数据中给定大小的元素数`format`，而不是字节数`data`。

对我有用的稍微修改的代码：

```
def reserve_space(xid, data):
    connection = xcb.connect()
    atom_cookie = connection.core.InternAtom(False, len("_NET_WM_STRUT_PARTIAL"),
        "_NET_WM_STRUT_PARTIAL")
    atom = atom_cookie.reply().atom
    data_p = struct.pack("12I", *data)
    strat_cookie = connection.core.ChangePropertyChecked(xcb.xproto.PropMode.Replace, xid,
        atom, xcb.xproto.Atom.CARDINAL, 32, len(data_p)/4, data_p)
    strat_cookie.check()
    connection.flush() 
```

# ruby - 在 Ruby 中克隆枚举器？

> ID：13455529
> 
> 赞同：7
> 
> 时间：2012-11-19T14:11:34.903
> 
> 标签：ruby, enumerator

我有一棵树，我正在尝试遍历。当我遍历它时，我保留了一堆枚举器，其中每个枚举器用于枚举树的孩子。

我希望能够复制这个枚举器堆栈并将其交给另一个对象，以便它可以从堆栈状态指示的位置开始遍历树。

当我尝试在 Enumerator 上调用 #dup 时，出现错误。是否可以复制枚举器？如果没有，我怎么能完成同样的事情？（我曾考虑将一堆整数作为索引，但我担心效率。

这是一些代码来显示我所看到的......

一旦第一个枚举器启动，就不能复制它。这就是我的情况。

```
a = [1,2,3].each
 => #<Enumerator: [1, 2, 3]:each> 
a.next
 => 1 
b = a.dup
TypeError: can't copy execution context
    from (irb):3:in `initialize_copy'
    from (irb):3:in `initialize_dup'
    from (irb):3:in `dup'
    from (irb):3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:59:13.750

实现您自己的枚举器类。

除了递增内部计数器之外，枚举器并没有太多魔力。

```
class MyArrayEnumerator
  def initialize(array)
    @ary,@n=array,0
  end
  def next
    raise StopIteration if @n == @ary.length
    a=@ary[@n];@n+=1;a
  end
end

class Array
  def my_each
    MyArrayEnumerator.new(self)
  end
end

a = [1,2,3].my_each # => #<MyArrayEnumerator:0x101c96588 @n=0, @array=[1, 2, 3]>
a.next # => 1
b = a.dup # => #<MyArrayEnumerator:0x101c95ae8 @n=1, @array=[1, 2, 3]>
a.next # => 2
b.next # => 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T18:09:45.540

Use `clone` instead:

```
e1 = [1,2,3].each
e1.dup # TypeError: can't copy execution context
e2 = e1.clone
e1.next #=> 1
e2.next #=> 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-19T15:47:24.090

在 Enumerator 的实例中保留一个“头”，并为后面的副本存储历史记录：

```
class Enum

  def initialize()
    @history = [] # history will be shared between instances
    @history_cursor = -1
    @head = Enumerator.new do |yielder|
      @yielder = yielder
      enumerate
    end
  end

  def next
    if @history_cursor < @history.count - 1
      @history[@history_cursor += 1]
    else
      new_item @head.next
    end
  end

  private

  def new_item item
    @history << item
    @history_cursor = @history.count - 1
    item
  end

  def enumerate
    13.times do |i|
      @yielder << i # yielder is shared between instances
    end
  end

end 
```

用法：

```
enum1 = Enum.new
p enum1.next # 0
enum2 = enum1.clone
p enum2.next # 1
p enum1.next # 1 
```

# sql - 将 mm/dd/yy hr:min:sec 转换为 yyyy-mm-dd hr:min:sec

> ID：13455530
> 
> 赞同：0
> 
> 时间：2012-11-19T14:11:36.337
> 
> 标签：sql, sqlanywhere

我想转换（这就像在 Syabase SQL 中一样）

**'09/29/2012 08:23:00' 到 '2012-09-29 08:23:00'**

这是我尝试过但失败的

```
select convert(varchar,convert(datetime, '09/29/2012 08:23:00', 101),123) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:42:46.110

我不确定您从哪里获得该日期格式，但如果它来自数据库中的表，您可以使用以下方法直接从表中转换日期。

假设日期在名为 MyTable 的表中，日期列名为 MyDate

```
SELECT dateformat(MyDate, 'YYYY-MM-DD HH:MM:SS')
FROM MyTable; 
```

您可以使用以下方法使用当前日期时间对此进行测试：

```
SELECT dateformat(getdate(), 'YYYY-MM-DD HH:MM:SS'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:14:28.043

尝试 120 而不是 123。

```
 select convert(varchar(20),convert(datetime, '09/29/2012 08:23:00', 101),120) 
```

请参阅[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc38151.1510/html/iqrefbb/Convert.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc38151.1510/html/iqrefbb/Convert.htm)

# c# - MVC/EF - 如何添加实体关联

> ID：13455539
> 
> 赞同：0
> 
> 时间：2012-11-19T14:12:11.843
> 
> 标签：c#, asp.net-mvc, entity-framework, repository-pattern

我在 EF 中有一个名为 Advertiser 的实体和另一个名为 Client 的实体。广告商有一个名为 Client 的关联字段，它是从下拉列表中选择的。我想知道如何将此关联保存到数据库。我使用的方法是找到 Client 对象（通过使用 Id），然后将此 Client 对象分配给 Advertiser.Client 导航属性。我希望通过添加这个 Advertiser 属性，我已经添加了一个与现有实体相关联的 Advertiser。然而这不是结果。相反，新的客户记录也被添加到表中。我该如何解决？

完整的解释和代码位如下......

```
public class Advertiser
{
    public int Id { get; set; }
    public string Name { get; set; }

    //Navigation Properties
    public virtual Client Client { get; set; }

} 
```

还有一个叫客户端

```
public class Client
{
    public Client()
    {
        Advertisers = new List<Advertiser>();
    }

    public int Id { get; set; }
    public string Name { get; set; }

    // Navigation Properties
    public virtual ICollection<Advertiser> Advertisers { get; set; }
} 
```

在单独的视图中将一堆客户端添加到数据库中。当用户登陆 Advertiser 视图时，他们有创建选项。我想要创建的是允许用户从包含所有客户端的下拉列表中选择一个客户端。我希望该广告商随后与该客户相关联。

这是控制器的代码：

```
//
// POST: /Advertiser/Create
[HttpPost]
public ActionResult Create(Advertiser advertiser,int Id)
{

    if (ModelState.IsValid)
    {
        advertiser.Client = clientRepo.Retrieve(Id); // Finds and returns a Client object
        System.Diagnostics.Debug.WriteLine("Saving Advertiser, with int Id = {0} and Client.Id = {1}", Id, advertiser.Client.Id);
        repo.Create(advertiser);
        repo.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(advertiser);
} 
```

Advertiser 视图使用所有客户端填充下拉列表，然后返回当前选定客户端的 ID。

```
 <div class="editor-field">
        @{
            var clients = new Repository<Client>().FetchAll();
            var clientLists = new SelectList(clients, "Id", "Name");
         }
        @Html.DropDownList("Id", clientLists)
    </div> 
```

现在，这个视图正确地返回了正确的 ID。Debug.Writeline 还确认正在传回正确的 Id。问题在于之后会发生什么……

它不是插入与现有客户端实体关联的新广告商，而是首先插入广告商，然后将客户端实体的副本插入数据库。这会导致重复的客户端仅在主键 (Id) 上有所不同，

**我知道这可以通过公开外键并传递外键而不是查找并将适当的客户端引用到 Advertiser.Client 属性来解决。但如果可能的话，我宁愿这样做而不暴露外键。有什么办法可以做到吗？...即我做错了什么？**

如果 Repository 类中发生的事情有助于回答这个问题，我在下面添加了它：

```
 public OperationStatus Create(TEntity item)
    {
        OperationStatus status = new OperationStatus {Status = true};
        var value = DataContext.Set<TEntity>().Add(item);

        if(value == null)
        {
            status = null;
        }

        return status;
    }

    public TEntity Retrieve(int id)
    {
        return DataContext.Set<TEntity>().Find(id);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:18:02.360

将 [Key] 属性添加到 Client 和 Advertiser 的 ID 属性

# asp.net-mvc - 如何从现有 SQL DB ASP.Net MVC 4 在下拉列表中填充数据

> ID：13455540
> 
> 赞同：1
> 
> 时间：2012-11-19T14:12:12.313
> 
> 标签：asp.net-mvc, asp.net-mvc-4, entity-framework-4.1, code-first

我在 SQLserver 上有一个数据库名称 CostDB。我需要创建一个带有简单下拉列表（即**Company Name**）的页面（ASP.Net MVC 4），该列表将直接绑定到**CostDB**数据库中**DESE**表的**Company**列。

 ****看了所有教程和 ASP.Net MVC4 自己的教程后，我迷失了，该以什么方式开始？代码优先、模型优先等有不同的方法。我已经有了数据库。在这种情况下我需要先创建一个模型吗？如果是这样，它是否必须与数据库表名称完全匹配？还是从数据库生成模型？如果我需要在页面加载时在**下拉列表中显示数据，我需要创建哪些函数？**最重要的是为现有数据库创建 MVC 应用程序的顺序是什么。在 M,V,C 中，首先创建什么？

对 ASP.Net MVC 4 来说是全新的。已经完成了 MVCMovies 教程，但没有运气。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:11:41.807

我认为最好的答案是：不管你觉得舒服，什么对你有用。有大量不同的开发方法，以及每种方法的变体。我倾向于首先倾向于数据库，因为我没有太多的代码经验。

由于您已经创建了一个数据库，我认为您的方法最简单的方法是从您现有的结构中生成一个 EDMX 并从那里开始。一旦您构建了 EDMX 并引用了所有适当的文件，它应该很容易。只需从您的 EF 模型中填充一个列表，将其放入 ViewBag，然后填充您的控件。

这是有关如何执行此操作的一个很好的链接。 [使用 MVC 使用列表填充 @Html.DropDownList](https://stackoverflow.com/questions/6333270/populate-html-dropdownlist-with-a-liststring-using-mvc)

我强烈推荐 PluralSight 来学习任何类型的开发，这是我用过的最好的网站之一。祝你好运！****

# ruby - 如何等待生成的进程

> ID：13455552
> 
> 赞同：4
> 
> 时间：2012-11-19T14:12:42.027
> 
> 标签：ruby, mongodb, process, spawn

我正在尝试编写一个可以在后台执行 mongodb 服务器的简单脚本。目前我使用`Process.spawn`方法。它可以工作，但我必须等待一段时间`mongod`才能完全运行（启动过程已完成，数据库正在等待新连接）。

```
 def run!
    return if running?

    FileUtils.mkdir_p(MONGODB_DBPATH)

    command = "mongod --port #{port} --dbpath #{MONGODB_DBPATH} --nojournal"
    log_file = File.open(File.expand_path("log/test_mongod.log"), "w+")
    @pid = Process.spawn(command, out: log_file)

    # TODO wait for the connection (waiting for connections on port xxxx)
    sleep 2

    yield port if block_given?
  end 
```

这是完整的脚本： [https ://github.com/lucassus/mongo_browser/blob/master/spec/support/mongod.rb#L22](https://github.com/lucassus/mongo_browser/blob/master/spec/support/mongod.rb#L22)

`sleep 2`是否有可能从这段代码中删除这个丑陋的任意？

我的第一个猜测是将管道连接到生成的进程并等待“等待端口 xxxx 上的连接”消息写入管道。但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:11:27.057

这是等待子进程某些输出的模式：

```
def run_and_wait_for_this regexp_to_wait_for, *cmd
  rd, wr = IO.pipe
  pid = Process.spawn(*cmd, out: wr)
  pid_waiter = Thread.new { Process.wait(pid); wr.close }
  thr = Thread.new do
    buffer = ''
    until buffer =~ regexp_to_wait_for
      buffer << rd.readpartial(100)
    end
  end
  thr.join
rescue EOFError
ensure
  rd.close
end

run_and_wait_for_this( /waiting for connections on port xxxx/, 'mongo', '--port', port, '--dbpath', MONGODB_PATH, '--nojournal' ) 
```

它会阻塞，直到进程将预期的输出刷新到管道中。

# android - canvas 可以绘制 SpannableString 文本吗？

> ID：13455555
> 
> 赞同：2
> 
> 时间：2012-11-19T14:12:53.120
> 
> 标签：android, android-widget

android [Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)可以绘制[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)文本吗？

唯一可行的方法是[Canvas#drawText(CharSequence...)](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28java.lang.CharSequence,%20int,%20int,%20float,%20float,%20android.graphics.Paint%29)，因为它是唯一的接收文本作为参数的方法，由 String 和 SpannableString 实现*。*`CharSequence`

当它绘制时，我什么也没有得到，只有空白。

**编辑：**

我设法写了`SpannableString`但是跨度消失了。我猜这个方法不适合这个目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:03:26.127

据我所知，`SpannableString`只实现`CharSequence`接口。当在 中使用时`TextView`，它会检查是否存在`input instanceof SpannableString`，如果存在，它会像那样绘制它。如果没有，它只绘制简单的文本。

我一直在尝试在我们的游戏中实现类似的行为`TextView`，但没有任何乐趣。所以我最终实现了类似的东西，在`List`. 这些定义了文本和样式。然后我有一个方法`StyledText.draw(Canvas)`，它通过`List`，使用`Canvas.drawText( ... )`来绘制每个文本。它处理定位和创建/修改`Paint`.

# php - 获取 PHP 文件/图像扩展名

> ID：13455559
> 
> 赞同：-3
> 
> 时间：2012-11-19T14:13:10.560
> 
> 标签：php

我正在尝试获取图像文件扩展名并添加一些随机数。**比如** 348678423.jpeg、343344343.jpg、32434343.gif、3434343.png等。

**所以以下是我的php代码：**

```
function getExtension($str)
{
     $i = strrpos($str,".");
 if (!$i) { return ""; }
 $l = strlen($str) - $i;
 $ext = substr($str,$i+1,$l);
 return $ext;
}
  @$extension = getExtension($file);
   $extension = strtolower($extension);
  $image_named_uniq = uniqid().'.'.$extension; 
```

但是当我回显这个变量**$image_named_uniq**时，它只是显示随机数，比如：**50aa5a2e0f425。**应该显示**50aa5a2e0f425.jpg**等。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:16:10.020

如果您只需要扩展：

```
echo end(explode('.', $str)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:19:31.973

您可以使用[pathinfo()](http://php.net/manual/en/function.pathinfo.php)来获取扩展名

```
$path_parts = pathinfo($filename);
echo $path_parts['extension']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:21:52.483

@jereon 发布的答案是正确的，也是最简单的方法。

但是，如果您想在不使用 explode 和 end 的情况下提取有关文件的更多信息，您可以简单地使用 PHP 内置`pathinfo()`函数。

参考：[pathinfo()](http://php.net/manual/en/function.pathinfo.php)

```
<?php
    $path_parts = pathinfo('/www/htdocs/inc/lib.inc.php');

    echo $path_parts['dirname'], "\n";
    echo $path_parts['basename'], "\n";
    echo $path_parts['extension'], "\n";
    echo $path_parts['filename'], "\n"; // since PHP 5.2.0
?> 
```

这将返回

```
/www/htdocs/inc
lib.inc.php
php
lib.inc 
```

作为`$filename`一个数组，您需要遍历它才能将其读入`pathinfo()`. 这可以很容易地使用 foreach 循环来完成，如下所示：

```
// Loop through the filenames array
foreach($filename as $value){
    // Retrieve the path parts of each individual file
    $path_parts[] = pathinfo($value);
}

// Write out the path parts array
print_r($path_parts); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T14:22:25.700

最简单的方法是使用[pathinfo()](http://ca.php.net/manual/en/function.pathinfo.php)。请注意，结果基于文件名，并且不会对文件执行自省（例如，`logo.jpg`重命名为的图像`logo.php`将导致`.php`文件扩展名。如果您想通过文件的内容获取文件类型，请使用[fileinfo 扩展名）](http://ca.php.net/manual/en/book.fileinfo.php)

# java - 使 java 方法仅对特定类可见

> ID：13455565
> 
> 赞同：4
> 
> 时间：2012-11-19T14:13:26.647
> 
> 标签：java, package, theory, access-specifier

我有一个负责管理某种对象的管理器类。为此，它需要操作这些对象，但这些对象与管理器没有任何关系，因此从技术上讲，它们位于单独的包 "project.managers" 和 "project.objects" 中。重要的是，有问题的对象只能由经理操作，不能在其他任何地方操作，但需要项目中的每个其他类都可以访问。

因此，我希望管理人员可以访问操作方法，但限制对其他所有类的访问。最明显的一种是将管理器类和对象类移动到同一个包中并声明操作方法受保护，但由于管理器和对象是完全独立的实体，它们在哲学上不适合。

（这部分是因为我希望我的 IDE 在我自动完成相关对象上的代码时停止向我显示操作方法，所以我总是必须通过管理器，以便在我更改相关对象时正确更新相应的表） .

对此有什么想法，或者在任何情况下明显的方式是最好的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:16:35.433

为什么没有一个名为的接口

```
ManagerFunctions 
```

另一个叫

```
ClientFunctions 
```

您的托管对象将实现*这两*​​者。

创建托管对象时，您将它们传递给周围，但仅作为对`ClientFunctions`. 然而，管理器对象会将它们称为`ManagerFunctions`并因此可以访问它们的“托管”功能。适当的铸造将简单地公开适当的方法。

您的 IDE 将根据这些对象的引用方式自动为您提供适当的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:18:20.003

您要求类似于 C++ 的“朋友”声明的东西，但在 Java 中没有直接的等价物 - 包可见性是最接近的。或者，您可以选择像 XML DOM 这样的模型，其中应该公开的方法在接口中定义，所有客户端访问都通过这些接口。经理会知道实现的具体类，因此可以根据需要向下转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:18:47.173

> 因此，我希望管理人员可以访问操作方法，但限制对其他所有类的访问。最明显的一个是将管理器类和对象类移动到同一个包中，并声明操作方法受保护......

从技术上讲，您将声明操作方法包受保护（根本没有修饰符）。受保护的方法允许更容易地扩展类。

> 但是由于管理器和对象是完全独立的实体，它们在哲学上并不适合。

我明白。Java 没有 C++ 的“朋友”声明。

您可以评论操作方法，但这并不能解决您的 Eclipse 问题。

# .net - 改变数百个 WinForms 控件位置的性能

> ID：13455568
> 
> 赞同：9
> 
> 时间：2012-11-19T14:13:48.327
> 
> 标签：.net, winforms, performance

我有一个循环：

```
for (int i = 0; i < panel1->Controls->Count; ++i) {
    Control^ ctl = panel1->Controls[i];
    ctl->Location.Y = i*10;
} 
```

如果我在 panel1 中有 200 或 300 个控件可以吗？或者如果我添加这个会更好：

```
if (ctl->Location.Y != i*10) ctl->Location.Y = i*10; 
```

我只是不知道.NET的控件是否会重新绘制（这需要时间），或者它们会自动检查是否不需要重新绘制（仍然是相同的位置）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:20:06.693

您可以按如下方式对其进行优化以避免连续重绘：

```
panel1.SuspendLayout();

for (int i = 0; i < panel1->Controls->Count; ++i) {
{
    // do reposition
}   

panel1.ResumeLayout(false);
panel1.PerformLayout(); 
```

或者

```
panel1.ResumeLayout() 
```

@CodesInChaos：好点！它看起来是一样的，但事实并非如此。使用

*   ResumeLayout(false)/PerformLayout() 或
*   简历布局（）

将影响结果的外观，如[here](http://blogs.msdn.com/b/jfoscoding/archive/2005/12/16/504957.aspx)所述。

# android - SharedPreferences 重置：重置后地图大小不为 0

> ID：13455574
> 
> 赞同：5
> 
> 时间：2012-11-19T14:14:20.243
> 
> 标签：android, android-preferences

我正在尝试删除我的`SharedPreferences`，但它不起作用：`size`没有像我期望的那样设置为 0 。

```
SharedPreferences sp = context.getSharedPreferences(name, mode);
SharedPreferences.Editor e = sp.edit();
e.clear();
e.commit();
Map<String, ?> map = sp.getAll();
int size = map.size(); 
```

有什么建议么？

```
private static String name = "ABC_PREFS";
private static int mode = Context.MODE_PRIVATE; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:03:19.560

通读后，您的代码看起来不错。您确定**上下文**变量已正确初始化吗？其他 SharedPreferences 变量是否可能指向同一个文件？

如果这些都不是问题，请考虑采用最小的示例应用程序并将此代码粘贴到其中，看看它是否仍然失败。使用完整的应用程序比仅使用代码片段更容易解决此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:00:35.550

[SharedPreferences.Editor.clear()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#clear%28%29)仅删除您的偏好值，这对您来说还不够吗？您可以使用[SharedPreferences.Editor.remove()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#remove%28java.lang.String%29)删除所有条目：

```
 for (String key: sp.getAll().keySet()) {
        e.remove(key);
    }
    e.commit(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-26T00:14:59.237

您可以将地图大小写入共享首选项：

```
e.clear();
e.putInt("size", map.size());
e.commit(); 
```

要获取地图调用的大小：

```
int size = sp.getInt("size", 0); 
```

# cordova - phonegap 应用程序中的触摸事件

> ID：13455575
> 
> 赞同：0
> 
> 时间：2012-11-19T14:14:22.977
> 
> 标签：cordova, touch

在我的 phonegap 应用程序中，我有一些触摸区域，我想在用户触摸进入它们时标记它们（即使触摸指出该区域的 sid 然后进入触摸区域）。我使用了touchmoved，但是当触摸在它开始的相同元素中移动时触发了这个事件，然后我尝试了touchenter事件，但它根本没有触发。

这是我添加侦听器的代码：

```
var c=document.getElementById("spans");
newSpan.addEventListener("touchenter", Over, false); 
```

我应该为此目的使用哪个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:43:42.340

鼠标和触摸事件通常不会以这种方式工作，但如果您将事件附加到文档而不是目标区域，您应该能够跟踪所有触摸并检查它们的位置是否与您的目标元素匹配。

# android - What makes apk updates take so long?

> ID：13455581
> 
> 赞同：1
> 
> 时间：2012-11-19T14:14:41.677
> 
> 标签：android, google-play, apk

When I post an update of my app to the android market it takes hours to become available. Some times half a day why is this?

This happens even if it is just a one changed in the code or xml.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:19:14.293

Probably the sheer number of apps that are uploaded to the Android Market per day. I bet most of the process is automated but they must scan the app for malware etc, and as Ramhound said, there is probably a human element to the process as well.

**Count yourself lucky. The iOS App Store processing line is 10 + days minimum wait, but that's much more human oriented.**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:20:52.510

To be exact, only Google knows. But at least Googles [bouncer](http://googlemobile.blogspot.dk/2012/02/android-and-security.html) needs to test your app for any malicious content. It will also take some time before everything is updated on their servers as they should be updated in a managed fashion. Also I've noticed that apps can be browsed on the web much sooner than they arrives on mobile. Besides that I don't know what slows down the process. I would believe the process being completely automatic.

# vim - 可视模式下的 Vim 格式源代码

> ID：13455583
> 
> 赞同：1
> 
> 时间：2012-11-19T14:14:51.023
> 
> 标签：vim

观看截屏视频（无法链接，因为您需要订阅 peepcode pro 订阅） 我见过一个开发人员使用 vim 中的可视模式以图形方式缩进他的源代码（一个 ruby​​ 文件）。他做了以下步骤：按“v”选择行，然后按我没有得到的其他东西（因为没有表示键盘上按下的内容），然后他将整个源代码完美缩进，无需在命令行上写一些东西。

有没有你知道的插件可以在可视模式下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:15:10.737

这个插件正是你想要的：[https](https://github.com/Chiel92/vim-autoformat) ://github.com/Chiel92/vim-autoformat 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:39:35.627

您可以在可视模式下按 = 自动缩进您的代码。

或者您可以在可视模式下使用 > 和 < 来更改所选代码的缩进级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:29:52.810

那将是`V(motion)=`。

详情请参阅`:help =`。

# sql - SQL 在每种情况下都满足条件吗？

> ID：13455587
> 
> 赞同：1
> 
> 时间：2012-11-19T14:15:01.403
> 
> 标签：sql

我有一个名为 food 的示例表

```
item    id    date
apple   1     in-date
apple   1     in-date
banana  2     rotten
banana  2     in-date
lemon   3     in-date
lemon   3     in-date 
```

我想编写一个查询，它只返回所有内容都在日期的项目，即应该返回苹果和柠檬。

我有，

```
select item
from food
where date = 'in-date'; 
```

`banana`但是，即使有些已过时，这也会返回。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T14:17:21.313

```
select distinct item
from food
where item not in (select item from food where date<>'in-date') 
```

或者，如果您的 SQL 支持`exists`

```
select distinct item
from food
where not exists (select item from food f where date<>'in-date' and f.item=food.item ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:21:45.907

```
SELECT item, SUM( CASE mydate WHEN 'in_date' THEN 0 ELSE 1 END ) as rotten
FROM food
GROUP BY item 
  HAVING rotten==0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:18:06.153

尝试这样的事情： -

```
 select distinct item
 from food
 where not exists (select item from food f where date<>'in-date' and f.item=food.item ) 
```

# ios - OpenGL ES 2.0 - 纹理四边形

> ID：13455590
> 
> 赞同：1
> 
> 时间：2012-11-19T14:15:06.743
> 
> 标签：ios, xcode, opengl-es, opengl-es-2.0

每当我尝试渲染一个带纹理的四边形时，我最终都会得到一个三角形部分的纹理扭曲：[![看到这张图片](../Images/763e48d44a0808296c3e2855bd63b281.png)](https://i.stack.imgur.com/GqE0I.png) .

纹理是在 GIMP 中创建的 PNG，我尝试了两种单独的加载纹理的方法（均来自 Apple 自己的示例代码）。每种加载纹理的方法都会产生不同的结果（我不知道它是否是不同的默认设置，或者纹理是否存在问题），但我无法正确渲染。

我已经尝试以多种不同的方式设置我的索引/垂直/texices，来自在[最快的方式中发布的建议以在 OpenGL ES 中绘制四边形？](https://gamedev.stackexchange.com/questions/10727/fastest-way-to-draw-quads-in-opengl-es)但仍然没有运气。

我会错过什么？

**加载纹理的代码**

```
- (GLuint)setupTexture:(NSString *)fileName {    
    CGImageRef spriteImage = [UIImage imageNamed:fileName].CGImage;
    if (!spriteImage) {
        NSLog(@"Failed to load image %@", fileName);
        exit(1);
    }
    size_t width = CGImageGetWidth(spriteImage);
    size_t height = CGImageGetHeight(spriteImage);
    GLubyte * spriteData = (GLubyte *) calloc(width*height*4, sizeof(GLubyte));
    CGContextRef spriteContext = CGBitmapContextCreate(spriteData, width, height, 8, width*4, 
    CGImageGetColorSpace(spriteImage), kCGImageAlphaPremultipliedLast);    
    CGContextDrawImage(spriteContext, CGRectMake(0, 0, width, height), spriteImage);
    CGContextRelease(spriteContext);
    GLuint texName;
    glGenTextures(1, &texName);
    glBindTexture(GL_TEXTURE_2D, texName);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, spriteData);
    free(spriteData);        
    return texName;    
} 
```

**纹理坐标和垂直**

```
const GLfloat texices[] =
    { 0,1,
      1,1,
      0,0,
      1,0 };

glActiveTexture(GL_TEXTURE0);
glUniform1i(_texturedTextureUniformSlot, 0);
glVertexAttribPointer(_texturedTextureSlot, 2, GL_FLOAT, GL_FALSE, 0, texices);

GLfloat vertices[] = {-1, -1, 0, //bottom left corner
                  -1,  1, 0, //top left corner
                   1,  1, 0, //top right corner
                   1, -1, 0}; // bottom right rocner

GLubyte indices[] = {0,1,2, // first triangle (bottom left - top left - top right)
                 0,2,3}; // second triangle (bottom left - top right - bottom right)

glVertexAttribPointer(3, GL_FLOAT, 0, vertices);
glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_BYTE, indices); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:45:35.663

看起来你的纹理坐标可能是错误的（注意纹理似乎环绕在左侧）。

这是我过去使用的一段代码：

```
const float quadPositions[] = {  1.0,  1.0, 0.0, 
                                -1.0,  1.0, 0.0, 
                                -1.0, -1.0, 0.0, 
                                -1.0, -1.0, 0.0, 
                                 1.0, -1.0, 0.0, 
                                 1.0,  1.0, 0.0 };
const float quadTexcoords[] = { 1.0, 1.0, 
                                0.0, 1.0, 
                                0.0, 0.0, 
                                0.0, 0.0, 
                                1.0, 0.0, 
                                1.0, 1.0 };

// stop using VBO
glBindBuffer(GL_ARRAY_BUFFER, 0);

// setup buffer offsets
glVertexAttribPointer(ATTRIB_VERTEX, 3, GL_FLOAT, GL_FALSE, 3*sizeof(float), quadPositions);
glVertexAttribPointer(ATTRIB_TEXCOORD0, 2, GL_FLOAT, GL_FALSE, 2*sizeof(float), quadTexcoords);

// ensure the proper arrays are enabled
glEnableVertexAttribArray(ATTRIB_VERTEX);
glEnableVertexAttribArray(ATTRIB_TEXCOORD0);

// draw
glDrawArrays(GL_TRIANGLES, 0, 2*3); 
```

那应该在 z=0 处绘制两个三角形。您需要将投影的宽度和高度设置为 -1 到 1。

**编辑**：

这是您的代码的工作版本：

```
const GLfloat texices[] = { 0, 0,
                            0, 1,
                            1, 1,
                            1, 0 };

const GLfloat vertices[] = { -1, -1, 0,  // bottom left corner
                             -1,  1, 0,  // top left corner
                              1,  1, 0,  // top right corner
                              1, -1, 0}; // bottom right corner

const GLubyte indices[] = { 0, 2, 1,     // first triangle (bottom left - top left - top right)
                            0, 3, 2 };

// ensure no VBOs or IBOs are bound
glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);    

glVertexAttribPointer(ATTRIB_VERTEX, 3, GL_FLOAT, GL_FALSE, 3*sizeof(float), vertices);
glVertexAttribPointer(ATTRIB_TEXCOORD0, 2, GL_FLOAT, GL_FALSE, 2*sizeof(float), texices);

// ensure the proper arrays are enabled
glEnableVertexAttribArray(ATTRIB_VERTEX);
glEnableVertexAttribArray(ATTRIB_TEXCOORD0);

glDisable(GL_CULL_FACE);

glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_BYTE, indices); 
```

# javascript - 如何通过 Id 获取 dijit/Tree 节点？

> ID：13455596
> 
> 赞同：1
> 
> 时间：2012-11-19T14:15:18.437
> 
> 标签：javascript, dojo, dijit.tree

我有一个运行良好的 dijit/Tree。但是，我无法弄清楚如何从 id（商店中的 id，而不是 DOM id）获取特定行的 DOM 节点。

就像是：

```
myTreeModel.getDomNodeById( id ); 
```

我正在使用 dijit/Tree、dijit/tree/ObjectStoreModel 和 dojo/store/memoryStore。

一切似乎都是为了获取存储数据，但我希望更改 dom 节点上的类以响应我应用程序中其他地方的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:13:33.347

最后，xyu的链接给了我答案。

首先，我在实例化树中混合了一个新函数：

```
var myTree = new Tree( 
{
    model: treeModel, 
    autoExpand: true,
    showRoot: false,
    title: 'My Items',
    openOnClick: true,
    getDomNodeById: function( id ) // new function to find DOM node
    {
        return this._itemNodesMap[ id ][0];
    }
} ); 
```

然后我可以这样称呼它：

```
var treeNode = myTree.getDomNodeById( dataId ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:19:49.453

根据[API](http://dojotoolkit.org/api/) `dijit/Tree`有一个`domNode`属性。它应该指向树所在的 DOM 节点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T16:27:05.020

```
//code<1.7
dojo.connect('id of tree','onClick',function(evt)
{
  console.log(evt.id[0]);
  //onclick event tree return id of its node in array
});

//code>1.7
require(['dojo/on'],function()
{
  on('id of tree','click',function(evt)
  {
    console.log(evt.id[0]);
    //onclick event tree return id of its node in array
  });
}); 
```

# javascript - Javascript 显示/隐藏在 IE 中不起作用

> ID：13455597
> 
> 赞同：1
> 
> 时间：2012-11-19T14:15:23.803
> 
> 标签：javascript, internet-explorer, show-hide

为了挽救我头上的最后一根头发，我请求你的帮助。

我有一个带有交互区域的图像地图。另外，我有一个脚本可以在地图右侧显示和隐藏文本字段。一个示例世界地图，我按下美国 - 文本字段显示有关它的信息，我按下欧洲 - 显示欧洲信息而不是美国。

我使用的脚本：

```
function showonlyonev2(thechosenone) {
  var newboxes = document.getElementsByTagName("div");
  for(var x=0; x<newboxes.length; x++) {
        name = newboxes[x].getAttribute("class");
        if (name == 'adresas' || name == 'intro') {
              if (newboxes[x].id == thechosenone) {
                    if (newboxes[x].style.display == 'block') {
                          newboxes[x].style.display = 'none';
                    }
                    else {
                          newboxes[x].style.display = 'block';
                    }
              }else {
                    newboxes[x].style.display = 'none';
              }            }      }} 
```

这我用于href：`href="javascript:showonlyonev2('newboxes1-2');"` 我用它来命名DIV：`<div class="adresas" id="newboxes1-2">`

每个浏览器都显示正常，除了 Internet Explorer 8 (grr!!) 我不使用 IE8。

任何想法如何让那个愚蠢的浏览器运行我的脚本？（它运行其他脚本，除了这个）。

问候， 巴塞卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:17:47.153

说这个 ：

```
 name = newboxes[x].getAttribute("class")?newboxes[x].getAttribute("class"): newboxes[x].getAttribute("className"); 
```

# c - AMQP - 消费者是否有权访问路由密钥？

> ID：13455600
> 
> 赞同：8
> 
> 时间：2012-11-19T14:15:52.843
> 
> 标签：c, rabbitmq, amqp

我已经设置了一个主题交换，以便消费者队列与“#.topic”绑定。我想根据前缀使用不同的确认策略。是否将完整的路由密钥发送给消费者？如果是这样，我该如何访问它？AMQP 概念方面的答案可能就足够了，但涉及 rabbitmq-c 的答案将是理想的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:59:02.307

即使您像在示例中给出的那样进行绑定，收到的消息也包含完整的路由键。这意味着您可以提取它以帮助您处理消息。不幸的是，我只知道如何在 Java 中执行此操作，因此请尝试从那里进行推断。

```
QueueingConsumer.Delivery delivery = consumer.nextDelivery();
String routingKey = delivery.getEnvelope().getRoutingKey(); 
```

交付对象包含一个作为有效负载的主体，可以使用它来检索，`delivery.getBody()`以及一个包含其他信息（如完整路由密钥）的信封对象。

# c# - 从字符串中删除单个字母

> ID：13455603
> 
> 赞同：0
> 
> 时间：2012-11-19T14:16:02.453
> 
> 标签：c#, regex

我需要帮助从传入的数据字符串中删除字母而不是单词。像下面这样，

```
String A = "1 2 3A 4 5C 6 ABCD EFGH 7 8D 9"; 
```

到

```
String A = "1 2 3 4 5 6 ABCD EFGH 7 8 9"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:18:27.780

您需要匹配一个字母并确保前后没有字母。所以匹配

```
(?<!\p{L})\p{L}(?!\p{L}) 
```

并替换为空字符串。

*   [查看正则表达式.info 上的断言](http://www.regular-expressions.info/lookaround.html)

*   [regular-expresssion.info 上的 Unicode 属性](http://www.regular-expressions.info/unicode.html)

在 C# 中：

```
string s = "1 2 3A 4 5C 6 ABCD EFGH 7 8D 9";
string result = Regex.Replace(s, @"(?<!\p{L}) # Negative lookbehind assertion to ensure not a letter before
                                   \p{L}      # Unicode property, matches a letter in any language
                                   (?!\p{L})  # Negative lookahead assertion to ensure not a letter following
                                  ", String.Empty, RegexOptions.IgnorePatternWhitespace); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:26:54.977

“强制性” Linq 方法：

```
string[] words = A.Split();
string result = string.Join(" ", 
        words.Select(w => w.Any(c => Char.IsDigit(c)) ? 
        new string(w.Where(c => Char.IsDigit(c)).ToArray()) : w)); 
```

这种方法查看每个单词是否包含一个数字。然后它过滤掉非数字字符并从结果中创建一个新字符串。否则它只需要这个词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:50:46.247

老派来了：

```
Dim A As String = "1 2 3A 4 5C 6 ABCD EFGH 7 8D 9"
Dim B As String = "1 2 3 4 5 6 ABCD EFGH 7 8 9"
Dim sb As New StringBuilder
Dim letterCount As Integer = 0
For i = 0 To A.Length - 1
  Dim ch As Char = CStr(A(i)).ToLower
  If ch >= "a" And ch <= "z" Then
    letterCount += 1
  Else
    If letterCount > 1 Then sb.Append(A.Substring(i - letterCount, letterCount))
    letterCount = 0
    sb.Append(A(i))
  End If
Next
Debug.WriteLine(B = sb.ToString) 'prints True 
```

# android - 从 sdcard 缩小位图以用作谷歌地图视图中的标记

> ID：13455605
> 
> 赞同：2
> 
> 时间：2012-11-19T14:16:05.887
> 
> 标签：android, android-layout, android-intent, android-mapview

我正在尝试缩小通过相机拍摄的图像并将其放置在我的应用程序的 mapview 中。但是我可以拍摄图像，但似乎无法将其缩小为缩略图大小的图像。这是我的 MainActivity.java 代码

```
AlertDialog alert = new AlertDialog.Builder(MainActivity.this).create();
            alert.setTitle("Create Marker");
            alert.setButton(DialogInterface.BUTTON_POSITIVE, "Take Photo", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                //TODO Auto=generated method stub

                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                File photo = new File(Environment.getExternalStorageDirectory(),  "Pic.jpg");
                intent.putExtra(MediaStore.EXTRA_OUTPUT,
                        Uri.fromFile(photo));
                o = Uri.fromFile(photo);
                startActivityForResult(intent, TAKE_PICTURE);

                BitmapDrawable bd = (BitmapDrawable) Drawable.createFromPath(new File(Environment.getExternalStorageDirectory(), "pic.jpg").getAbsolutePath());
                Bitmap b = Bitmap.createScaledBitmap(bd.getBitmap(), (int) (bd.getIntrinsicHeight() * 0.8),
                                                                    (int) (bd.getIntrinsicWidth() * 0.8), false);

                OverlayItem overlayItem = new OverlayItem(touchedPoint, "What's Up", "2nd String");
                CustomPinPoint custom = new CustomPinPoint(d, MainActivity.this);
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);

            }

            });

            alert.show();
            {
        return true;
        }
        }
        return false; 
```

和我的 CustomPinPoint.java

```
public class CustomPinPoint extends ItemizedOverlay<OverlayItem>{

BitmapDrawable bd;
Bitmap b;
private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
private Context c;

public CustomPinPoint(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    BitmapDrawable bd = (BitmapDrawable) Drawable.createFromPath(new File(Environment.getExternalStorageDirectory(), "pic.jpg").getAbsolutePath());
    Bitmap b = Bitmap.createScaledBitmap(bd.getBitmap(), (int) (bd.getIntrinsicHeight() * 0.8),
                                                        (int) (bd.getIntrinsicWidth() * 0.8), false);
    // TODO Auto-generated constructor stub
}
public CustomPinPoint(Drawable m, Context context) {
    this(m);
    c = context;
    // TODO Auto-generated constructor stub

}
@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}
@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}
public void insertPinpoint(OverlayItem item){
    pinpoints.add(item);
    this.populate();
}
public void add(CustomPinPoint custom) {
    // TODO Auto-generated method stub

}
public void add(OverlayItem i) {
    // TODO Auto-generated method stub

}
} 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:58:30.367

为了调整位图大小，我使用了[http://thinkandroid.wordpress.com/2009/12/25/resizing-a-bitmap/中的一个函数](http://thinkandroid.wordpress.com/2009/12/25/resizing-a-bitmap/)

它工作得很好。试试看 ！！

否则，要在地图上的指定位置简单地添加位图，请执行以下操作：

```
class MapOverlay extends com.google.android.maps.Overlay
    {
        @Override
        public boolean draw(Canvas canvas, MapView mapView, 
        boolean shadow, long when) 
        {
            super.draw(canvas, mapView, shadow);                   

            //---translate the GeoPoint to screen pixels---
            Point screenPts = new Point();
            mapView.getProjection().toPixels(p, screenPts);

            //---add the marker---
            Bitmap bmp = BitmapFactory.decodeResource(
                getResources(), R.drawable.map_pin);   
            int pinPointPositiony = bmp.getWidth();
            int pinPointPositionx = bmp.getHeight() / 2;

            canvas.drawBitmap(bmp, screenPts.x - pinPointPositionx, screenPts.y - pinPointPositiony, null);         
            return true;
        }
    } 
```

您可以在评论“添加标记”下看到，我从资源中加载了位图。但是您可以使用从相机中获得的那个。再次，有一些小的计算来确保图像将以这种方式放置：图像的中心底部将指示与该图像一起使用的提供的坐标，例如：http: [//fadigeorge.files.wordpress.com/ 2011/03/pin_6.png](http://fadigeorge.files.wordpress.com/2011/03/pin_6.png)

这是要添加到您的主类（活动）中的代码：

```
map = (MapView)findViewById(R.id.map);
        MapController mc = map.getController();
        double lat = 41.39357371045376;
        double lng = 3.888921489715576;

        p = new GeoPoint(
            (int) (lat * 1E6), 
            (int) (lng * 1E6));

        mc.animateTo(p);
        mc.setZoom(14); 

        MapOverlay mapOverlay = new MapOverlay();
        List<Overlay> listOfOverlays = map.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);        

        map.invalidate(); 
```

希望能帮助到你。

# jquery - 使用 MVC 4 / Razor 自动完成

> ID：13455610
> 
> 赞同：15
> 
> 时间：2012-11-19T14:16:15.353
> 
> 标签：jquery, asp.net-mvc, razor

我想我在尝试在 MVC 4 中添加自动完成功能时遗漏了一些明显的东西。根据我在其他帖子中发现的内容，我已经能够整理一个示例，但是我的控制器中的方法没有被调用。

到目前为止我尝试过的...

_布局

```
@Styles.Render("~/Content/themes/base/css")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")
@Scripts.Render("~/bundles/jqueryval") 
```

控制器

```
Public Function Numbers(term As String) As ActionResult
    Return Json(New String() {"one", "two", "three", "four", "five", "six"}, JsonRequestBehavior.AllowGet)
End Function 
```

查看（我现在已经对 Home/Numbers 进行了硬编码）

```
<div class="editor-label">
    @Html.LabelFor(Function(model) model.Number)
</div>
<div class="editor-field">
    @Html.EditorFor(Function(model) model.Number)
    @Html.ValidationMessageFor(Function(model) model.Number)
</div>

<script type="text/javascript">
    $(function () {
        $("#Number").autocomplete({
            source: 'Home/Numbers',
            minLength: 1
        });
    });
</script> 
```

当我运行我的应用程序并在文本框中输入时，什么也没有发生。我在“数字”函数中放了一个断点，似乎它从未被调用过。

我的项目可以在这里找到[http://www.filedropper.com/testapp](http://www.filedropper.com/testapp)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-19T16:25:04.573

如果您在布局`@Scripts.Render`中元素的底部有这些行，那么您需要将脚本放在该部分中：`body``@RenderBody()``scripts`

```
@section scripts
<script type="text/javascript">
    $(function () {
        $("#Number").autocomplete({
            source: '@Url.Action("Numbers","Home")',
            minLength: 1
        });
    });
</script>
End Section 
```

因为您的脚本依赖于 jQuery，所以应该首先加载 jQuery。

或者只是将您的`@Scripts.Render`声明移动到`head`布局中，然后您不需要将代码放入该`scripts`部分（但您最好使用该部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:41:14.587

我建议您控制 Chrome 中的错误以确保 jQuery 库正常工作。如果没有问题，试试这个脚本：

```
$(document).ready(function () { 
    $("#Number").each(function () {
        $(this).autocomplete({ source: $(this).attr("data-autocomplete") });
    });
}); 
```

然后在你的 Razor (C#) 中：

```
<input type="text" id="Number" data-autocomplete="@Url.Action("Action","Controller")" autocomplete="on" /> 
```

如果要使用 Razor Html Helpers 而不是使用“输入”标签，则 id 属性与 Model.Member 的名称相同。请注意，在 Controller 中，您必须输入带有“术语”名称的字符串，如代码中所写。出于安全原因，您必须避免在显示站点技术的js文件中使用参数。上面声明的方法从不使用 js 文件来获取资源的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:08:39.300

这是自动完成文本框示例的总代码项目。

[http://blogs.msdn.com/b/stuartleeks/archive/2012/05/02/asp-net-mvc-amp-jquery-ui-autocomplete-part-2-editorfor.aspx](http://blogs.msdn.com/b/stuartleeks/archive/2012/05/02/asp-net-mvc-amp-jquery-ui-autocomplete-part-2-editorfor.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-10T05:29:41.777

查看页面

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<input type="text" id="txtmasterserach" name="txtmasterserach" placeholder="City, region, district or specific hotel"  autocomplete="off"/> 
 <input type="hidden" name="hidenkeyvalues" id="MovieID" /> 

<script type="text/javascript">
    $(document).ready(function () {
        $("#txtmasterserach").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Company/getautobox",
                    type: "POST",
                    dataType: "json",
                    data: { Prefix: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { value: item.Id, label: item.name };
                        }))
                    }
                })
            },
            select: function (event, ui) {
                $("#MovieID").val(ui.item.value);
                $("#txtmasterserach").val(ui.item.label);
                event.preventDefault();
                return false;
            },
            focus: function (event, ui) {
                $("#MovieID").val(ui.item.value);
               // $("#txtmasterserach").val(ui.item.label);
                event.preventDefault();
                return false;
            },
            messages: {
                noResults: "", results: ""
            }
        });
    });
    </script> 
```

对于控制器：

```
public class companyController : Controller
{
public JsonResult getautobox(String Prefix)
    {
        SqlConnection con = new SqlConnection();
        con.ConnectionString = ConfigurationManager.ConnectionStrings["Connection"].ConnectionString;
        SqlCommand cmd = new SqlCommand("procedurename", con);
        cmd.Parameters.AddWithValue("@prefix", Prefix);
        cmd.CommandType = CommandType.StoredProcedure;
        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        da.Fill(ds);
        List<autosearchdatalist> auto = new List<autosearchdatalist>();
        if (ds.Tables[0].Rows.Count > 0)
        {
            for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
            {
                auto.Add(new autosearchdatalist
                {
                    Id = ds.Tables[0].Rows[i]["Id"].ToString(),
                    name = ds.Tables[0].Rows[i]["hotelname"].ToString()
                });
            }
        }
        if (ds.Tables[1].Rows.Count > 0)
        {
            for (int i = 0; i < ds.Tables[1].Rows.Count; i++)
            {
                auto.Add(new autosearchdatalist { 
                    Id = ds.Tables[1].Rows[i]["Id"].ToString(),
                    name = ds.Tables[1].Rows[i]["hotelname"].ToString() 
                });
            }
        }
        if (ds.Tables[2].Rows.Count > 0)
        {
            for (int i = 0; i < ds.Tables[2].Rows.Count; i++)
            {
                auto.Add(new autosearchdatalist
                {
                    Id = ds.Tables[2].Rows[i]["Id"].ToString(),
                    name = ds.Tables[2].Rows[i]["hotelname"].ToString()
                });
            }
        }
        String msg = "";
        return Json(auto);
    }
} 
```

保持路由器设置默认，否则操作将不会调用

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "company", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

# jquery - 当 X 轴为百分比值时，在条形图上显示实际数字（Flot 条形图）

> ID：13455611
> 
> 赞同：1
> 
> 时间：2012-11-19T14:16:26.337
> 
> 标签：jquery, flot

是否可以让轴显示来自系列数据的百分比值，但条形内部显示为 Flot 水平条形图中的实际值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:53:00.427

我创建了一个不错的小插件：

## *[jsBin 演示](http://jsbin.com/oyitub/1/edit)*

![jQuery 酒吧插件](../Images/8a52ac4975d9498a6a198daa95fee383.png)

（金色是元素的 BG 颜色，而 jQuery 为同一元素的 BG 图像设置动画（grad.azure one））

```
<div class="bar">66%</div>
<div class="bar bar5">4.5</div> 
```

基本的CSS：

```
.bar{
  width:300px;
  height:20px;
  background:#444 url(barBG.jpg) 0px 0px no-repeat;
  color:#fff;
} 
```

> 小提示：确保您的 BG 图像的宽度至少与元素所需的宽度一样宽，因此 eg`0%`将被完全覆盖。

jQuery插件：

```
(function($){
  $.fn.bars = function( opts ) {  
    var set = $.extend( {
      'max': 100
    }, opts );
    return this.each(function(){ 
      var $this = $(this);
      var barW = $this.width();
      var val = parseFloat( $this.text().replace(',','.') );
      var ratio = ( val/set.max*barW );          
      $this.stop().animate({backgroundPosition: ratio+'px'},600);             
    });
  };
})(jQuery); 
```

```
$('.bar').bars(); // default rates = 100
$('.bar5').bars({max:5}); 
```

# asp.net-mvc - 为什么没有在 Membership.ValidateUser 中直接调用 SetAuthCookie？

> ID：13455612
> 
> 赞同：3
> 
> 时间：2012-11-19T14:16:27.227
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authentication

我目前正在 ASP.NET MVC3 中实现自定义成员资格提供程序，并且一直在查看不同示例实现的示例。我注意到`FormsAuthentication.SetAuthCookie()`似乎从未从`ValidateUser`提供程序中的方法调用。它似乎总是在调用`ValidateUser`if`ValidateUser`返回 true 的函数中调用。这通常是某种形式的身份验证助手。

我不明白的是，一旦返回 true ，它`SetAuthCookie()`似乎就会被调用。`ValidateUser`所以我的问题是为什么不直接整合它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:35:58.983

我猜这是因为关注点分离。

会员提供者的职责只是验证给定的用户名/密码对是否有效。

方法的任务是将该`FormsAuthentication.SetAuthCookie()`信息（用户已成功验证自己）转换为可序列化的格式（cookie 或 url 参数），以便在下一个 HTTP 请求中继续存在。

您可以相互独立地替换这两种实现，将身份验证信息存储在 cookie 中只是 asp.net 平台上最常见的方式。

# javascript - 加载数据以通过 JavaScript 从 XML 文件中选择

> ID：13455617
> 
> 赞同：0
> 
> 时间：2012-11-19T14:16:36.780
> 
> 标签：javascript, xml

我想用 xml 文件中的数据加载选择控件（下拉列表）。这是加载xml文件的代码：

```
 x = xmlDoc.getElementsByTagName("User"); 
```

“用户”是我找到它时想要捕获的标签，然后更新为子标签，如：“用户名”、“密码”、“类型”。根据 select.selected 捕获“用户”更新后。更新“密码”将来自文本框。更新“类型”将来自选择。这是我编写的代码，但它没有得到我的输出，任何人都可以通过新代码提供帮助或编辑我的代码。

```
var select = document.getElementById("updater");
for (i = 0; i &lt; x.length; i++) {
     select.options[select.options.length] = new Option(
        x[i].getElementsByTagName("UserName")[0].childNodes[0].nodeValue,  
        x[i].getElementsByTagName("UserName")[0].childNodes[0].nodeValue);
}

select.onchange = function update() {
     for (i = 0; i &lt; x.length; i++) {
          if (document.getElementById("updater").value = x[i].getElementsByTagName("UserName")[0].childNodes[0].nodeValue)) {
             document.getElementById("password").value = document.getElementsByTagName("Password")[0].childNodes[0].nodeValue;
             document.getElementById("Type").value = document.getElementsByTagName("Type")[0].childNodes[0].nodeValue;
          }
     }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:30:09.970

你可以使用 linq

```
content_login = Enumerable.From(data)
                .Where(function (x) {
                    var Name = x.getElementsByTagName("UserName")[0].childNodes[0].nodeValue;

                    return Name == userName && Pass == Password; //If condition true it will execute Select
                })
                .Select(function (x) {

                    return Fields;
                }).ToString(); 
```

# c# - 对象与通过 EF 属性循环的目标类型不匹配

> ID：13455620
> 
> 赞同：0
> 
> 时间：2012-11-19T14:16:45.437
> 
> 标签：c#, entity-framework, reflection

我正在尝试从实体框架对象中的多个属性中获取值。有 11 个属性，每个属性都分配有一个日期。我尝试过使用反射，但我不断收到错误“对象与目标类型不匹配”

```
 public void CheckWeekStatus()
    {
     var currentFlexi = from c in FlexiContext.FlexPeriods where c.FlexiCurrentYear == true select c;

     FlexPeriod s = new  FlexPeriod();

    PropertyInfo[] properties = s.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);

      foreach (var info in properties)
           {                     
             var o = info.GetValue(currentFlexi,null);                                        
           }
     } 
```

FlexPeriod 是包含所有属性的类型。我可以遍历属性，但显然我在尝试访问值的方式上做错了。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:22:27.037

首先，您可以在`Type`不实例化对象的情况下获得：

```
PropertyInfo[] properties = typeof( FlexPeriod ).GetProperties( ... 
```

* * *

失败的原因`GetValue`是它`currentFlexi`是`FlexPeriod`对象的集合（实际上是一个`IEnumerable<FlexPeriod>`），而不是`FlexPeriod`.

# ruby-on-rails - Rails：如何将 Flash 从一个助手传递给另一个助手

> ID：13455622
> 
> 赞同：-1
> 
> 时间：2012-11-19T14:16:48.413
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-flash

嗨，我有一个用于在引擎 X 中收集闪存消息的 rails 助手

```
def flash_messages
  message = []
  flash.each do |k,m|
    message << m
  end
  message
end 
```

现在我已经在我的主应用程序助手中覆盖了这个函数

```
include X:Xhelper

def flash_messages
  message = []
  if required_message
    flash.each do |k,m|
      message << m
    end
  else
    message = "Flash messages are not displayed"
  end
  message
end 
```

现在，当我使用它时，我收到错误**“未定义的局部变量或方法 `flash' for Object:Class”**，这是因为没有为帮助程序定义 flash。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:08:28.607

Rails`flash`存在于请求的上下文中，并使用会话的一部分在内部进行管理。因此，引用 flash 的方法必须在该上下文中，即控制器。默认情况下，Rails 助手仅在视图中可用，在控制器中不可用。如果您将您的方法移动到 ApplicationController，那么它应该可以访问闪存。

这是关于[Rails 的文档`flash`](http://guides.rubyonrails.org/action_controller_overview.html#the-flash)

# asp.net - 返回 Json 时带有 flot.js 图表的 Asp.net webform 不起作用

> ID：13455632
> 
> 赞同：3
> 
> 时间：2012-11-19T14:17:21.867
> 
> 标签：asp.net, json, charts, webforms, flot

我正在使用 ASP.NET 网络表单来制作浮动图表，我使用 [Webmethod] 在 test.aspx.cs 文件中连接到数据库，我可以在其中返回 json。

我将返回值存储在 textarea 和 $.plot(placeholder, [and also here], options) 它不会在占位符中打印图形但是当我这样做时：

```
var data = past 
```

此处 textarea 的值并运行 applicationn 它会向我打印该值。

```
[WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public static List<string> GetLocation(string location)
        {
            List<string> result = new List<string>();

            StringBuilder strQuery = new StringBuilder();
            strQuery.Append("SELECT Location.Nome_Location, DATEPART(day, Statistiche.Data_Statistica) AS SDay, COUNT(Statistiche.ID_Tabella) AS Stats");
            strQuery.Append("  FROM Statistiche INNER JOIN Tabelle ON Statistiche.ID_Tabella = Tabelle.ID_Tabella INNER JOIN");
            strQuery.Append(" Location ON Statistiche.ID_Colonna_Statistica = Location.ID_Location");
            strQuery.Append(" WHERE (Statistiche.ID_Tabella = 2) AND (Statistiche.ID_Box = 60) AND (Location.Nome_Location = 'Albilò')");
            strQuery.Append("GROUP BY Location.Nome_Location, DATEPART(day, Statistiche.Data_Statistica)");
            string query = strQuery.ToString();

            SqlConnection con = new SqlConnection("");
            SqlCommand cmd = new SqlCommand(query, con);

            con.Open();
            int counter = 1;
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                if (counter == 1)
                {
                    result.Add("[{'label': 'Europe (EU27)','data':[[" + dr["SDay"].ToString() + "," + dr["Stats"].ToString() + "]");
                }
                else
                result.Add("[" + dr["SDay"].ToString() + "," + dr["Stats"].ToString() + "]");
                if (counter==31)
                {
                    result.Add("[" + dr["SDay"].ToString() + "," + dr["Stats"].ToString() + "]]}]");
                }
                counter++;
            }
            return result;
        } 
```

* * *

```
$.ajax({
            type: "POST",
            async: true,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "test.aspx/GetLocation",
            data: "{'location':'Albilò'}",
            success: function drawChart(msg) {
                var options = { lines: { show: true }, points: { show: true }, xaxis: { tickDecimals: 0, tickSize: 1} };

                var ddata = [];

                var data = msg.d;

                for (var i = 0; i < 32; i++) {
                    ddata.push(data[i]);
                }

                var placeholder = $("#placeholder");
                $("#txtvalue").val(ddata);

                var datad = $("#txtvalue").text();

                $.plot(placeholder, ddata, options);

            },
            error: function () {
                alert("call is called111");
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:10:26.933

首先，为什么要自己创建 JSON？您已经指定在属性中返回 JSON。重构方法以返回简单的 POCO 对象数组，例如

```
[Serializable]
public class pocoObject
{
  public string Label;
  ..
} 
```

然后你的方法应该只返回对象列表并设置属性：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static List<pocoObject> GetLocation(string location)
{
  ...
  return result; // result is list of pocoObjects
} 
```

Flot.js 对您设置为源的数据相当敏感，因此在此查看 firebug 中的数据后，它应该是正确的 json 格式数据。所以请访问[wiki](https://github.com/flot/flot/blob/master/API.md)并将您的数据与工作[样本](http://people.iola.dk/olau/flot/examples/)进行比较。

这就是你如何初始化你的图例名称：

```
$(function () {
    var d1 = [];
    for (var i = 0; i < Math.PI * 2; i += 0.25)
        d1.push([i, Math.sin(i)]);

    var d2 = [];
    for (var i = 0; i < Math.PI * 2; i += 0.25)
        d2.push([i, Math.cos(i)]);

    var d3 = [];
    for (var i = 0; i < Math.PI * 2; i += 0.1)
        d3.push([i, Math.tan(i)]);

    $.plot($("#placeholder"), [
        { label: "sin(x)",  data: d1},
        { label: "cos(x)",  data: d2},
        { label: "tan(x)",  data: d3}
    ], {
        series: {
            lines: { show: true },
            points: { show: true }
        },
        xaxis: {
            ticks: [0, [Math.PI/2, "\u03c0/2"], [Math.PI, "\u03c0"], [Math.PI * 3/2, "3\u03c0/2"], [Math.PI * 2, "2\u03c0"]]
        },
        yaxis: {
            ticks: 10,
            min: -2,
            max: 2
        },
        grid: {
            backgroundColor: { colors: ["#fff", "#eee"] }
        }
    });
}); 
```

# ruby-on-rails - 活动管理员 before_validation 钩子？

> ID：13455634
> 
> 赞同：4
> 
> 时间：2012-11-19T14:17:26.463
> 
> 标签：ruby-on-rails, activeadmin, nested-resources

我有一个 Active Admin 模型：gallery，它有一个嵌套的回形针资源：images。:gallery has_many :图片。

:gallery 有一个字段 :title，它是必需的。

当我提交*没有*标题时，其他字段仍然存在（：描述，：位置），但嵌套资源变为空白。

有没有办法在验证之前构建资源，以便在验证检查失败后仍然存在？

```
f.inputs "Images" do 
      f.has_many :images do |i| 

          i.input :image,
                :as=>:file,
                :multipart => true, 
                :label => "Image" 
              end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:38:30.377

请检查您是否在**图库**模型中添加了这些必需的东西

```
 attr_accessible :images_attributes 
```

和

```
 accepts_nested_attributes_for :images, :allow_destroy => :true 
```

# windows-phone-7 - MvvmCross 本地化：运行时切换

> ID：13455635
> 
> 赞同：5
> 
> 时间：2012-11-19T14:17:27.590
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, xamarin, mvvmcross

有没有办法在运行时将当前语言更改为另一种语言？

例如：能够在点击按钮或启动应用程序时切换，获取用户语言并切换。

如何告诉插件在启动时检查用户语言？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:41:37.253

> 有没有办法在运行时将当前语言更改为另一种语言？

是的，调用`builder.LoadResources(whichLanguage)`你的[MvxTextProviderBuilder.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Plugins/JsonLocalisation/Cirrious.MvvmCross.Plugins.JsonLocalisation/MvxTextProviderBuilder.cs)

> 例如：能够在点击按钮时进行切换

UI 框架并没有真正设置为执行实时切换。当您在语言之间切换时，新的 JSON 资源文件将全部加载，但不会更新现有显示的文本。这有点像大多数移动操作系统 - 如果您想切换语言，您通常需要重新启动！

如果您想添加动态切换，那么您必须找到一种方法来告诉 UI 完全刷新所有文本 - 我怀疑这并不难做到，但它可能需要在每个页面/视图上进行一些手动编码已经创建并显示：/

> 或者在启动应用程序时，获取用户语言并切换。

这是做 i18n 的一种更直接的方法。这通常没问题，因为 MvvmCross 主要针对手机 - 手机通常是不经常切换语言的单用户设备。

*   例如，您可以使用一些变量（例如`System.Globalization.CultureInfo.CurrentUICulture`）来确定要显示的最佳语言。

*   或者你在加载时检测用户是否已经选择了一种语言——如果他们有，那么显示`HomeViewModel`——如果他们还没有那么显示`LanguagePickerViewModel`——这就是我们在 StarWarsKinect 中所做的——这是`StartNavigationObject`这种逻辑的完美场所！

![SWK 语言选择](../Images/45ded5bbab2f761a30f7a2c5be0c8cbd.png)

> 如何告诉插件在启动时检查用户语言？

目前，您必须将此逻辑编码为应用启动的一部分。

我肯定愿意为此提供改进的插件 - 也许有一个演示！

* * *

如果您正在查看 i18n，那么要考虑的另一种实现是 Vernacular - Rdio 的团队为 Mono 和 MS 平台提供了非常好的产品 - [https://github.com/rdio/vernacular](https://github.com/rdio/vernacular)

# php - 为表单元素设置 HtmlTag 装饰器

> ID：13455637
> 
> 赞同：1
> 
> 时间：2012-11-19T14:17:29.647
> 
> 标签：php, zend-framework

我正在学习如何在 Zend Framework 中使用装饰器。我有非常简单的代码：

```
$this->addElement('text', 'wybor', array(
    'label' => 'Wybierz',
    'multiOptions' => array(1 => 'One', 2 => 'Two', 3 => 'Three'),
    'decorators' => array(
        'ViewHelper',
        'Errors',
        array('HtmlTag', array('tag' => 'td')),
    ),
)); 
```

但似乎 HtmlTag 在这种情况下不起作用 - 表单元素没有被标签包围。

我在这里做错了吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:19:04.093

您可以将此代码用于更多选项：

```
$elementDecorators = array(
        'ViewHelper',
        array('Errors', array('class' => 'err-msg')),
        array(array('data' => 'HtmlTag'), array('tag' => 'span', 'class' => 'element')),
        array('Label', array('tag' => 'span')),
        array(array('row' => 'HtmlTag'), array('tag' => 'div','class'=>'form-row')),
    ); 
```

# c# - 更改表单提交和 TryUpdateModel 之间的值

> ID：13455639
> 
> 赞同：0
> 
> 时间：2012-11-19T14:17:31.100
> 
> 标签：c#, .net, entity-framework, webforms

我可能遗漏了一些显而易见的东西。然而，在整个早上试图破解这个之后，我一无所获。

我在我的 Web 表单应用程序上使用逆向工程代码优先实体框架。

我试图在调用 TryUpdateModel 之前更新提交的值，但似乎无法弄清楚。

这是我当前的代码：

```
public void frmOrganisation_UpdateItem([RouteData] int id)
    {

        Website.Models.CrmOrganisation item = null;

        var query = from o in db.CrmOrganisations
                    where o.OrganisationId == id
                    select o;

        item = query.Single();

        if (item == null)
        {
            // The item wasn't found
            ModelState.AddModelError("", String.Format("Item with id {0} was not found", id));
            return;
        }

        TryUpdateModel(item);
        if (ModelState.IsValid)
        {
            db.SaveChanges();

            Response.Redirect(Helper_Methods.AppendQueryStringToUrl("status", "Changes Saved!"));

        }
    } 
```

表单上的一个字段是一个文本框 (id: txtWebsite)，它正在寻找要输入的 URL。我将在数据库中存储完整的 URL（包括 http://）。但是，我不希望用户必须输入 http://。因此，我想截取提交的值，如果它不以 http 开头，我想给它加上前缀。只有这样，我才希望 TryUpdateModel（以及因此验证）发生。

谁能指出我正确的方向？克里斯。

**更新 - 我已经走得更远了。**

在我的 "TryUpdateModel" 和 "if (ModelState.IsValid)" 之间，我现在有一行 "if (ModelState["Website"] != null && !string.IsNullOrWhiteSpace(ModelState["Website"].Value.RawValue.ToString ())) ModelState["Website"].Value = new ValueProviderResult("http://" + ModelState["Website"].Value.RawValue, "http://" + ModelState["Website"].Value.原始值，CultureInfo.CurrentCulture)；"。

这是更新模型状态，但是，这些更改没有反映在数据库中，所以我假设“db.SaveChanges();” 没有看到我的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:24:22.040

我找到了解决方案。

我根据按钮的 OnClick 事件更新字段，然后向更新方法发出命令。因此，使用点击按钮 --> OnClick 事件触发并更新表单 --> UpdateItem 方法被调用并更新模型和数据库。

# math - 如何进行 spoj LGIC？

> ID：13455641
> 
> 赞同：-1
> 
> 时间：2012-11-19T14:17:32.777
> 
> 标签：math, sequence, factorial

我正在尝试解决这个问题[http://www.spoj.pl/problems/LGIC/](http://www.spoj.pl/problems/LGIC/)。我只是无法弄清楚这个序列是如何推进的。

通过拉加朗日，解决如此大的范围太复杂了。

我能得到的最远的是阶乘

```
 1! = 1   & a1=2
  2! = 2   & a2=4
  3! = 6   & a3=11
  4! = 24  & a4=36
  5! = 120 & a5=147
  6! = 720 & a6=778 
```

请有人指导我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:21:42.523

也许序列是：An = n！+ 2^n - n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T09:20:31.790

您可以使用第 N 个术语

T(n) = n! + pow(2,n) - n

# jquery - 为什么我的 JSONP 请求偶尔会失败？

> ID：13455661
> 
> 赞同：0
> 
> 时间：2012-11-19T14:18:37.180
> 
> 标签：jquery, ajax, jsonp

我不时收到此错误，通常是在我第一次运行我的应用程序时：

`Uncaught TypeError: Property 'jQuery182034483651514165103_1353334474761' of object [object Window] is not a function`

然后我刷新，它工作正常。实际上，我也已经在我构建的其他应用程序上得到了这个，令人惊讶的是，谷歌没有产生类似的问题。使这个独一无二的是回调名称 - 我没有使用自定义回调函数名称或函数 - 它只是`$.ajax()`标准`dataType: 'jsonp'`

知道这怎么会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:29:56.460

我相信这是因为我的超时时间为 10000（10 秒）。当响应时间超过 10 秒时，jQuery 删除了我的问题中引用的回调函数。因此，当响应最终返回时，它尝试执行已删除的功能。所以我将超时时间增加到 15 秒，到目前为止一切都很好。

# java - 哪种 OpenGL 实现最适合 Java

> ID：13455663
> 
> 赞同：2
> 
> 时间：2012-11-19T14:18:39.327
> 
> 标签：java, opengl, 3d

我即将开始一个使用 OpenGL 和 Java 的小项目。浏览这个网站和谷歌，似乎不清楚哪种 OpenGL 实现最适合在 Java 中使用。

我从以下位置获得此列表：[Open GL](http://www.opengl.org/resources/bindings/)

*   JOGL Java/OpenGL 绑定
*   Java 3D（SUN 在 OpenGL 上分层的保留模式库）
*   用于 Java 的 OpenGL (GL4Java)
*   YAJOGLB（又一个 Java OpenGL 绑定）
*   jGL：Java 的 3D 图形库

在学习它的资源量和实现简单的汽车、直升机或飞行模拟器的简单性方面，有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:22:23.780

我只是 OpenGL 的初学者，但我一直在使用 Minecraft 使用的 LWJGL (http://www.lwjgl.org/)。

如果您想要更高级别的东西，请尝试使用 jMonkeyEngine (http://jmonkeyengine.com/) 之类的引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:49:06.957

如果我是你，我会建议研究 LibGDX。LWJGL 和 JOGL 面向 PC 游戏。另一方面，LibGDX 在 LWJGL 的帮助下针对计算机，但也针对 Android 和 iOS；最重要的是，它在 Google Web Toolkit (GWT) 的帮助下支持“HTML 5”——全部通过通用 API。

# javascript - Chrome 插件中的 JavaScript 模板

> ID：13455670
> 
> 赞同：0
> 
> 时间：2012-11-19T14:19:12.103
> 
> 标签：javascript, templates, google-chrome-extension, dot.js

我正在寻找 Chrome 扩展中支持的某种 JavaScript 模板引擎，最好不要设置“unsafe-eval”。

现在在这里查看其他问题，他们建议在部署之前预编译模板，但这对我不起作用，因为我不允许“用户”动态更改模板（以及通过插件选项）。 .. 这也是为什么我想要一个不需要“unsafe-eval”的模板引擎，因为用户并不意味着能够注入代码。只是制作非常简单的模板，使用来自 JSON 对象的属性。

字符串替换几乎就足够了……但也差不多，还需要一些简单的评估……“就像 x 大于 y 输出 a 否则 b”

我已经使用 doT.js 有一段时间了，它已经足够简单了，所以它的语义与它的语义相近或更简单。

这是 doT 中的简单示例...

```
<div class="card">
    <header class="header {{= it.type }}">
        <div class="project_id">
            <div class="project">{{= it.project }}</div>
            <div class="id">{{= it.id }}</div>
        </div>
        <div class="title">
            <div class="nooverflow">{{= it.type }}: {{= it.summary }}</div>
        </div>
        <div class="sizeheader_size">
            <div class="sizeheader">RELATIVE SIZE</div>
            <div class="size">{{= it.estimate }}</div>
        </div>
    </header>
    <section class="description">
        <div class="nooverflow">{{= it.description }}</div>
    </section>
    <footer class="footer">
        <div class="hours">
            <span class="marked"></span>
            <span class="{{?? it.days > 1 }}marked{{??}}"></span>
            <span class="{{?? it.days > 2 }}marked{{??}}"></span>
            <span class="{{?? it.days > 3 }}marked{{??}}"></span>
            <span class="{{?? it.days > 4 }}marked{{??}}"></span>
            <span class="{{?? it.days > 5 }}marked{{??}}"></span>
            <span class="{{?? it.days > 6 }}marked{{??}}"></span>
            <span class="{{?? it.days > 7 }}marked{{??}}"></span>
            <span class="{{?? it.days > 8 }}marked{{??}}"></span>
            <span class="{{?? it.days > 9 }}marked{{??}}"></span>
        </div>
        <div class="priorityheader_priority">
            <div class="priorityheader">PRIORITY</div>
            <div class="priority">{{= it.priority }}</div>
        </div>
    </footer>
</div> 
```

如您所见，这不是最复杂的条件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:31:35.547

您可以在包含模板和模板引擎的沙盒页面中呈现模板。这是通过将您的数据以消息的形式发送到此沙盒页面来完成的。渲染模板后，沙箱将发送另一条包含渲染模板 html 的消息，该模板可进一步用于内容脚本或弹出窗口。

[本文](http://developer.chrome.com/apps/sandboxingEval.html)更详细地描述了该过程。您还应该熟悉[Chrome 扩展程序中的消息传递](http://developer.chrome.com/extensions/messaging.html)。

# python - Python：XPath 在 ElementTree 中不可用

> ID：13455672
> 
> 赞同：5
> 
> 时间：2012-11-19T14:19:15.317
> 
> 标签：python, xml-parsing, python-2.7, elementtree, iterparse

我正在尝试使用`iterparse()`of解析 iTunes 播放列表，`ElementTree`但出现以下错误：

```
AttributeError: 'Element' object has no attribute 'xpath' 
```

代码如下：

```
import xml.etree.ElementTree as ET
context = ET.iterparse(file,events=("start", "end"))
    # turn it into an iterator
    context = iter(context)
    # get the root element
    event, root = context.next()
    for event, elem in context:
        z = elem.xpath(".//key")
        elem.clear()
        root.clear()
    print z 
```

我做错了什么？文件太大，所以`iterparse()`无论如何我都必须使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:19:26.860

[`xml.etree.ElementTree`](http://docs.python.org/2/library/xml.etree.elementtree.html) 为其[`Element`](http://docs.python.org/2/library/xml.etree.elementtree.html#element-objects)class[`find`](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.find)和methods[提供有限的 XPath 表达式支持](http://effbot.org/zone/element-xpath.htm)[`findall`](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.findall)（[`findtext`](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.findtext)没有`xpath`方法：这就是您收到错误的原因）。

此外，如果你调用`clear()`一个元素来节省使用的内存，你只需要**在**你处理完元素及其所有子元素之后再做。

因此，您需要将代码更改为类似于以下内容：

```
for event, elem in context:
    for child in elem.findall(".//key"):
        # process child
    elem.clear()
    root.clear() 
```

# jquery - 使用 jQuery 更改基本 URL 部分工作

> ID：13455674
> 
> 赞同：0
> 
> 时间：2012-11-19T14:19:17.593
> 
> 标签：jquery

`link[href]`这段代码很好用，它只适用于

```
$("iframe").load(function() {
    $("iframe").contents().find("script[src], img[src], link[href], a[href]").each(function(i) {
        this.href = this.href.replace(/^http:\/\/www\.mydomain\.com/, "http://www.theotherdomain.com");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:23:04.377

这是因为您尝试设置`href`属性`this.href = ...`，但唯一具有的元素`href`是链接。对于图像和脚本，您必须设置`src`属性。

# python - 延迟对象打印内部的getPage？

> ID：13455675
> 
> 赞同：1
> 
> 时间：2012-11-19T14:19:28.450
> 
> 标签：python, asynchronous, twisted, addcallback

我想创建一个回调，`getPage`在特定的 url 上执行并在操作完成时将其打印出来。目前，当我打印`d`或`page`（参见下面的代码）时，我得到了对延迟对象与`page`.

为什么延迟对象的内存位置在 print`page`和 print之间发生变化`d`？

最终，我希望这个程序循环浏览我的 4 个网站的列表，为每个单独的连接创建回调，将它们关闭，并在它们准备好时打印每个页面。如果不是太多要求，这可以证明吗？

```
from twisted.web.client import getPage
from twisted.internet import reactor
from twisted.internet.defer import Deferred

def connect(url):
    page = getPage(url) 
```

`print page`返回`<Deferred object at 0x23dcc68>`。

`print d`返回`<Deferred object at 0x7f1bacacc3b0>`。

当前结果（以“http://www.example.com”为例）：

```
d = Deferred()

d.addCallback(connect)

reactor.callWhenRunning(d.callback, 'http://www.example.com')

reactor.callLater(4, reactor.stop)

reactor.run() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:04:00.577

您可能应该使用较新的、更漂亮[`twisted.web.client.Agent`](http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html)的而不是较旧且有些受限的`getPage`. 幸运的是，有[一个关于如何使用的非常详尽的教程`Agent`](http://twistedmatrix.com/documents/12.2.0/web/howto/client.html)，以及它的一些配套类，如`ProxyAgent`、`RedirectAgent`、`CookieAgent`和`ContentDecoderAgent`.

不过，首先，您可能需要熟悉有关[如何使用`Deferred`s](http://twistedmatrix.com/documents/12.2.0/core/howto/defer.html)的文档。

# java - 使用站点名称保存文件

> ID：13455677
> 
> 赞同：0
> 
> 时间：2012-11-19T14:19:37.970
> 
> 标签：java, file-io, web-scraping

以下代码将页面内容保存到文件中：

```
import java.net.*;
import java.io.*;

public class url
{
      public static void main(String[] args)
      {
           try
                  {
                    URL PageUrl;
                    URLConnection GetConn = null;
                    GetConn = null;

                     PageUrl = new URL("https://www.google.ru/");
                     GetConn = PageUrl.openConnection();

                    GetConn.connect();

                    InputStreamReader ReadIn = new InputStreamReader(GetConn.getInputStream());
                    BufferedReader BufData = new BufferedReader(ReadIn);
                    String htmlFileName = ("C:\\hello.html");
                    FileWriter FWriter = new FileWriter(htmlFileName);
                    BufferedWriter BWriter = new BufferedWriter(FWriter);
                    String UrlData = null;
                    while ((UrlData = BufData.readLine()) != null)
                    {
                          BWriter.write(UrlData);
                          BWriter.newLine();
                    }
                    BWriter.close();
              }
              catch(IOException io)
              {
                   System.out.println(io);
              }
      }
} 
```

但是我需要文件与网站的页面具有相同的名称，例如，它必须以某种方式获取网页的名称并将其分配为文件的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:29:51.393

您可以使用[URL.getFile()](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getFile%28%29)来获取文件名。IE

```
...
String htmlFileName = PageURL.getFile();
... 
```

请注意，不同的 URL 可能引用同一个文件：`http://example.com/test.html#anch1`, `http://example.com/test.html`, `http://example.com/test.html?a=b`- 这里所有三个引用同一个`test.html`文件。在这种情况下，您可能想以某种方式组合`getFile()`, 。`getRef()``getQuery()`

值得一提的是您的代码中的一些问题：

1.  变量名以`lowerCase`代替开始`UpperCase`；
2.  `finally`以块为单位关闭资源。更好的是，如果您使用 Java 7，请使用[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

# visual-studio-2010 - 无法在 vs 2010 中导入 Asmx Web 服务参考

> ID：13455682
> 
> 赞同：0
> 
> 时间：2012-11-19T14:19:53.077
> 
> 标签：visual-studio-2010, web-services, visual-studio-2008, asmx, vb.net-2010

我在 Visual Studio 2008 中使用 .net 框架 3.5 构建了网站。现在我想将网站代码迁移到 Visual Studio 2010，但希望保持目标框架相同，即 3.5。该网站是使用 vb.Net.MY 构建的。我的问题是当我在 Visual Studio 2010 中导入 Web 服务的引用时，它显示错误为“名称空间或导入中指定的类型‘WebReference’不包含任何公共方法”。我的服务名称是 "WebReference" 。我想可能是 .net 内置了 System.web.services.Description.Webreference ，可能是它显示冲突，所以我尝试将其重命名为“WebReference1”或其他名称但它没有任何效果，yhe错误是还在那里。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T11:48:17.880

可能是因为你不能使用 importer ：

ServiceDescriptionImporter 进口商 = 新的 ServiceDescriptionImporter();

在 vs 2010 中……你需要 vs 2012，因为它只支持 .net 框架 4.5，而后者又具有对 ServiceDescriptionImporter 的程序集引用。

# javascript - 动态更新模态div

> ID：13455687
> 
> 赞同：0
> 
> 时间：2012-11-19T14:20:14.253
> 
> 标签：javascript, twitter-bootstrap

因此，我正在创建一个帮助页面，其中包含有关使用 Outlook 设置电子邮件的说明。我将为 Outlook 2010、2007 和 2003 的不同版本提供 3 组说明。在各个步骤的旁边，我有一个链接“屏幕截图”，它将使用引导程序模式窗口打开该特定步骤的屏幕截图。

```
<a href="#ss-outlook2010-1" role="button" data-toggle="modal">Screenshot</a> 
```

这是我的问题：有没有办法动态创建或回收模态 div？唯一改变的是主 div id 和 img src。否则我最终会得到 30 个几乎相同的 div。提前致谢！

```
<div id="ss-outlook2010-1" class="modal large hide fade" tabindex="-1" role="dialog" aria-labelledby="Outlook 2010" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Outlook 2010</h3>
  </div>
  <div class="modal-body">
    <a><img src="images/screenshots/ss-outlook2010-1.png" title="Outlook 2010" alt="Outlook 2010"></a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:06:36.840

为什么不：

```
<div id="ss-outlook" class="modal large hide fade" tabindex="-1" role="dialog" aria-labelledby="Outlook 2010" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Outlook 2010</h3>
  </div>
  <div class="modal-body">
    <div id="outlook-2003" style="display: none;">

    </div>
    <div id="outlook-2007" style="display: none;">

    </div>
    <div id="outlook-2010" style="display: none;">

    </div>
    <div id="outlook-2012" style="display: none;">

    </div>
  </div>
</div> 
```

然后使用 JavaScript 来决定显示哪些 Outlook：

```
$('#outlook-2012').show(); 
```

# r - ffdfdply 函数使 R 崩溃并且非常慢

> ID：13455692
> 
> 赞同：0
> 
> 时间：2012-11-19T14:20:31.580
> 
> 标签：r, ff

学习如何在 R 中为大型数据集（超过 1 或 2 GB）计算任务，我正在尝试使用`ff`包和`ffdfdply`函数。（有关如何使用，请参阅此链接`ffdfdply`：[R 语言：计算“分组依据”或使用 ff 包拆分的问题](https://stackoverflow.com/questions/13398061/r-language-problems-computing-group-by-or-split-with-ff-package)）

我的数据有以下列：
“id”“birth_date”“diagnose”“date_diagnose”

每个“id”有几行，我想提取第一个诊断日期。

我会应用这个：

```
library(ffbase)
library(plyr)
load(file=file_name); # to load my ffdf database, called data.f . 

my_fun <- function(x){
                      ddply( x , .(id), summarize, 
                      age  = min(date_diagnose - birth_date, na.rm=TRUE)) 
          }
result  <- ffdfdply(x = data.f, split = data.f$id,
                    FUN = function(x) my_fun(x) , trace=TRUE) ; 
result[1:10,] # to check.... 
```

这很奇怪，但是这个命令：`ffdfdply(x = data.f, .... )`正在使 RStudio（和 R）崩溃。有时相同的命令会使 R 崩溃，有时不会。例如，如果我再次触发该`ffdfdply`行（第一次工作），R 将崩溃。

同样使用其他函数、数据等也会有同样的效果。没有内存增加，或者log.txt中的任何内容。应用 summaryBy "technique" 时的相同行为....

因此，如果有人遇到同样的问题并找到了解决方案，那将非常有帮助。也`ffdfdply`变得非常慢（比 SAS 慢......），我正在考虑制定另一种策略来完成此类任务。

是否`ffdfdply`考虑到例如数据集按 id 排序？（因此它不必查看所有数据以获取相同的 id...）。

因此，如果有人知道解决此`ddply`问题的其他方法，那么对于所有“R 中具有低 RAM 内存的大型数据集”用户来说，这将是非常棒的。

这是我的`sessionInfo()`

```
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Danish_Denmark.1252  LC_CTYPE=Danish_Denmark.1252   
[3] LC_MONETARY=Danish_Denmark.1252 LC_NUMERIC=C                   
[5] LC_TIME=Danish_Denmark.1252    

 attached base packages:
[1] tools     stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
[1] plyr_1.7.1   ffbase_0.6-1 ff_2.2-10    bit_1.1-9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:48:47.187

我在使用我们最近上传到 CRAN 的包时也注意到了这一点。这似乎是由于 ffbase 包中的“[.ff”和“[<-.ff”包 ff 提取器和设置器函数重载引起的。

我将从包中删除此功能，并很快将其上传到 CRAN。同时，您可以使用 ffbase 的 0.7 版本，您可以从这里获得： [http ://dl.dropbox.com/u/25690064/ffbase_0.7.ta​​r.gz](http://dl.dropbox.com/u/25690064/ffbase_0.7.tar.gz)

并将其安装为：

```
download.file("http://dl.dropbox.com/u/25690064/ffbase_0.7.tar.gz", "ffbase_0.7.tar.gz")
shell("R CMD INSTALL ffbase_0.7.tar.gz") 
```

让我知道这是否有帮助。

# sql - SQL Who 根据员工 ID 进行管理。

> ID：13455693
> 
> 赞同：0
> 
> 时间：2012-11-19T14:20:36.233
> 
> 标签：sql, sql-server, database, sql-server-2008

你好我必须写一个查询，我必须显示：

*   经理编号
*   经理的全名（第一列、中间列和最后一列的组合）
*   员工编号
*   员工全名（又是名字、中间名和姓氏）

他们都必须为一位特定的经理戴夫。如果有帮助的话，Dave 的员工 ID 是 100。

到目前为止我有

```
SELECT 
    EMP_MGR as "Manager's Number", 
    EMP_NUM as "Employee's Number", 
    EMP_FNAME || ' ' || EMP_INITIAL || '. ' || EMP_LNAME AS "Employee's Full Name", 

FROM EMP
    WHERE EMP_MGR = 108 
```

我知道我必须在某处使用连接，但我对如何做到这一点非常迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:26:50.593

```
SELECT 
    A.EMP_MGR as "Manager's Number", 
    B.EMP_NUM as "Employee's Number", 
    A.EMP_FNAME || ' ' || A.EMP_INITIAL || '. ' || A.EMP_LNAME AS "Manager's Full Name",
    B.EMP_FNAME || ' ' || B.EMP_INITIAL || '. ' || B.EMP_LNAME AS "Employee's Full Name", 

FROM EMP A
INNER JOIN EMP B ON A.EMP_NUM = B.EMP_MGR AND A.EMP_NUM = 108 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:24:01.210

你可以这样做

```
select
    M.EMP_NUM as "Manager's Number", 
    M.EMP_FNAME + ' ' + M.EMP_INITIAL + '. ' + M.EMP_LNAME AS "Manager's Full Name", 
    E.EMP_NUM as "Employee's Number", 
    E.EMP_FNAME + ' ' + E.EMP_INITIAL + '. ' + E.EMP_LNAME AS "Employee's Full Name"
from EMP as M
    inner join EMP as E on E.EMP_MGR = M.EMP_NUM 
where M.EMP_NUM = 100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:45:01.783

尝试这个：

```
select
    M.EMP_NUM as "Manager's Number", 
    M.EMP_FNAME + ' ' + M.EMP_INITIAL + '. ' + M.EMP_LNAME AS "Manager's Full Name", 
    E.EMP_NUM as "Employee's Number", 
    E.EMP_FNAME + ' ' + E.EMP_INITIAL + '. ' + E.EMP_LNAME AS "Employee's Full Name"
from EMP as M
    inner join EMP as E on E.EMP_MGR = M.EMP_NUM 
where M.EMP_NUM = '100' 
```

唯一的区别是我将 100 放在单引号中。我的猜测是名为“EMP_NUM”的字段存储为字符串而不是数字。如果是这样，请向数据库设计人员抱怨选择了一个非常糟糕的名称。不会有帮助的。. . 但他们可能知道。

# php - jquery每个将json拆分为单个字符

> ID：13455696
> 
> 赞同：1
> 
> 时间：2012-11-19T14:20:40.727
> 
> 标签：php, jquery, json, each

这是我的 json 对象：

```
var home = "[{\"id\":\"1\",\"img\":\"assets\\\/1.jpg\",\"headline\":\"This is the headline in the pedu.\",\"text\":\"To the ipedu\"},{\"id\":\"2\",\"img\":\"assets\\\/2.jpg\",\"headline\":\"This is the headline in the pedulence.\",\"text\":\"To the pendula\"}]"; 
```

当我尝试像这样遍历对象时：

```
$.each(home, function() {
    console.log(this);
}); 
```

我记录了每个字符而不是整个字符串。

示例：字符串 {0:"["} localhost:317 字符串 {0:"{"} localhost:317 字符串 {0:"""} localhost:317 字符串 {0:"i"} localhost:317 字符串 {0: "d"} localhost:317 字符串 {0:"""} localhost:317 字符串 {0:":"} localhost:317 字符串 {0:"""} localhost:317 字符串 {0:"1"} 本地主​​机： 317 字符串 {0: """} 本地主​​机:317 字符串 {0: ","} 本地主​​机:317 字符串 {0: """} 本地主​​机:317 字符串 {0: "i"}

我究竟做错了什么？如何循环遍历对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:23:37.090

首先，您拥有的不是 JSON 对象；它是一个包含根据 JSON 规范的对象表示的字符串。

要将该字符串转换为预期的对象，您必须首先使用`$.parseJSON()`.

**TL;博士**

改变这个：

```
$.each(home, function() {
    console.log(this);
}); 
```

到：

```
$.each($.parseJSON(home), function() {
    console.log(this);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:22:38.703

这是因为 home 是一个字符串。我假设您打算使用对象文字语法（例如作为数组）声明它：

```
var home = [{\"id\":\"1\",\"img\":\"assets\\\/1.jpg\",\"headline\":\"This is the headline in the pedu.\",\"text\":\"To the ipedu\"},{\"id\":\"2\",\"img\":\"assets\\\/2.jpg\",\"headline\":\"This is the headline in the pedulence.\",\"text\":\"To the pendula\"}]; 
```

# php - 使用 PHP EWS 更新联系人物理地址

> ID：13455697
> 
> 赞同：5
> 
> 时间：2012-11-19T14:20:49.303
> 
> 标签：php, exchangewebservices

我正忙于编写一些代码，这些代码将通过 PHPEWS 更新 Microsoft Exchange 服务器上的物理地址；

但是对于我的生活，我无法弄清楚如何更新物理地址，我可以更新除此之外的所有内容。

这是我的代码。

```
// Update Physical Address.
$field = new EWSType_SetItemFieldType();
$field->IndexedFieldURI->FieldURI = 'contacts:PhysicalAddress:Street';
$field->IndexedFieldURI->FieldIndex = EWSType_PhysicalAddressKeyType::HOME;

$field->Contact = new EWSType_ContactItemType();
$field->Contact->PhysicalAddress = new EWSType_PhysicalAddressDictionaryType();

$address = new EWSType_PhysicalAddressDictionaryEntryType();
$address->Key = EWSType_PhysicalAddressKeyType::HOME;
$address->_ = $street;

$field->Contact->PhysicalAddresses->Entry = $address;
$change->Updates->SetItemField[] = $field; 
```

我不断收到以下错误

```
Array ( [0] => stdClass Object ( [MessageText] => An object within a change description must contain one and only one property to modify. [ResponseCode] => ErrorIncorrectUpdatePropertyCount [DescriptiveLinkKey] => 0 [ResponseClass] => Error [Items] => stdClass Object ( ) ) ) 
```

希望有人能帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:24:03.860

经过数小时的反复试验，我终于自己解决了。

这是代码，

```
// Update Physical Address.
$field = new EWSType_SetItemFieldType(); 
$field->IndexedFieldURI->FieldURI = 'contacts:PhysicalAddress:Street';
$field->IndexedFieldURI->FieldIndex = EWSType_PhysicalAddressKeyType::HOME;

$field->Contact = new EWSType_ContactItemType();
$field->Contact->PhysicalAddresses = new EWSType_PhysicalAddressDictionaryType();
$address = new EWSType_PhysicalAddressDictionaryEntryType();
$address->Key = EWSType_PhysicalAddressKeyType::HOME;

$field->Contact->PhysicalAddresses->Entry = $address;
$field->Contact->PhysicalAddresses->Entry->Street = $street;

$change->Updates->SetItemField[] = $field; 
```

基本上，您设置了 FieldURI 和字段索引（必须记住，更新时一次只能更新一项）您会看到 FieldURI 设置为“contacts:PhysicalAddress:Street”，这是因为您只能在以下位置更新一项一次。

接下来我们创建Contact 标签，然后是PhysicalAddresses 标签，然后是Entry 标签，并给它Home 的键，最后我们设置Street 标签。

它创建的实际 XML 看起来像这样。

```
<t:SetItemField>
<t:IndexedFieldURI FieldURI="contacts:PhysicalAddress:CountryOrRegion" FieldIndex="Business" />
<t:Contact>
<t:PhysicalAddresses>
<t:Entry Key="Business">
<t:CountryOrRegion>
</t:CountryOrRegion>
</t:Entry>
</t:PhysicalAddresses>
</t:Contact>
</t:SetItemField> 
```

就是这样，然后它会更新街道地址。您现在需要做的就是将代码放入一个循环中，使用开关查看您要更新地址的哪一部分并让您的叔叔鲍勃。

哦，希望这对某人有所帮助。

# android - 支持的蓝牙版本

> ID：13455700
> 
> 赞同：2
> 
> 时间：2012-11-19T14:20:56.113
> 
> 标签：android, bluetooth, printers

我想知道，API级别> 14的Android手机是否支持蓝牙2.0版？我正在尝试从具有 Android 版本 4.0.4 的 Sony XPeria S 手机打印到[名为 Fujitsu FTP-628WSL 的移动打印机。](http://www.fujitsu.com/downloads/MICRO/fcai/printers/ftp-628wsl110.pdf)我们已经使用三星 Galaxy SII (Android 2.3.x) 成功地在该打印机上打印。索尼 XPeria S 成功打印到[Bixolon SPP-R200](http://www.bixolon.com/_eng/products/product_form.asp?code=0105&uid=34)（我认为它有 BT 版本 2.1，但我不是 100% 确定......它肯定比富士通更新了几年） - 可能是富士通的蓝牙版根本不支持？

我已经经历过：

*   [http://developer.android.com/reference/android/bluetooth/package-summary.html](http://developer.android.com/reference/android/bluetooth/package-summary.html)
*   [http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)
*   [http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord(java.util.UUID)](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord(java.util.UUID))

我们为两台打印机使用安全的 RFComm 连接。可以配对富士通并连接到它，但对我来说似乎相当不稳定，打印无法使用以下错误消息：

```
11-19 14:42:13.647: E/BluetoothService.cpp(329): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (**Invalid discovery session**)
11-19 14:42:19.677: E/app.BluetoothConnection(14736): Failed to connect to rfcomm socket.Service discovery failed 
```

我试图找到有关“无效发现会话”的一些信息 - 没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:00:53.230

Android 在 API 5 中添加了蓝牙 2 支持，在 API ~14 中添加了蓝牙 4 LE。

Android 手机支持的蓝牙版本也取决于手机型号——不同的手机有不同的蓝牙硬件和不同的蓝牙堆栈。

（带有 4.0.4 的 Galaxy Nexus 的情况变得非常奇怪。它具有蓝牙 4 的 API 和硬件支持，但缺少堆栈中的支持 - 幸运的是，这已在 Android 4.2 中得到纠正。）

在您的情况下，您的手机/堆栈/api 支持蓝牙 2 没有问题，但是蓝牙配置文件呢？也许您正在尝试使用蓝牙打印配置文件，而您的设备可能不支持它？也许您可以使用 PC 连接到您的手机并枚举支持的配置文件以查看它是否具有 BPP（基本打印配置文件）。

您还应该验证您的打印机是否支持哪个配置文件 - 我只是在猜测 BPP。

# vbscript - 在 Windows 8 上自动选择加入 Office 2013 的 VB 脚本

> ID：13455702
> 
> 赞同：1
> 
> 时间：2012-11-19T14:20:59.323
> 
> 标签：vbscript, ms-office, office-2013

有人知道如何在 Office 2013 首次运行期间跳过选择加入弹出窗口。在 office 2010 上，可以使用以下 vbs 跳过对话框：

```
Set ServiceManager = CreateObject("Microsoft.Update.ServiceManager")
ServiceManager.ClientApplicationID = "My App"
Set NewUpdateService = ServiceManager.AddService2("7971f918-a847-4430-9279-4a52d1efe18d",7,"") 
```

但它不适用于 Windows 8 上的 Office 2013。知道如何修改脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:24:04.327

使用 Office 自定义工具禁用选择加入怎么样？功能 > 修改用户设置 > microsoft office 2013 > 首次运行时禁用选择加入向导

# php - 为什么无法调用我的 XML 数组？

> ID：13455703
> 
> 赞同：1
> 
> 时间：2012-11-19T14:20:59.313
> 
> 标签：php, xml, arrays

我正在尝试使用 PHP 调用 XML 数组，但无论出于何种原因，它都无法正确提供结果。XML 看起来像这样一个 simpleXMLElement。

SimpleXMLElement 对象（[@attributes] => 数组（[版权] => 所有数据版权所有 2012。）

```
[route] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [tag] => 385
                [title] => 385-Sheppard East
                [color] => ff0000
                [oppositeColor] => ffffff
                [latMin] => 43.7614499
                [latMax] => 43.8091799
                [lonMin] => -79.4111
                [lonMax] => -79.17073
            )

        [stop] => Array
            (
                [0] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [tag] => 14798
                                [title] => Sheppard Ave East At Yonge St (Yonge Station)
                                [lat] => 43.7614499
                                [lon] => -79.4111
                                [stopId] => 15028
                            )

                    )
              [1] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [tag] => 4024
                                [title] => Sheppard Ave East At Doris Ave
                                [lat] => 43.7619499
                                [lon] => -79.40842
                                [stopId] => 13563
                            )

                    ) 
```

停止数组有几个部分。我的代码如下所示：

```
$url = "this_url";
$content = file_get_contents($url);
$xml = new SimpleXMLElement($content);
$route_array = $xml->route->stop; 
```

当我打印 $route_array 时，它只显示停靠点的 1 条记录。我需要通过循环运行它吗？通常，当我在 JSON 中执行此操作时，它可以正常工作。我只想在停止数组中获取所有内容。

在此先感谢所有帮助像我这样的初学者的专家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:27:24.697

在 SimpleXML 元素上使用`print_r`并不总能为您提供全貌。您的元素在那里但未显示。

`$xml->route->stop`是一个`<stop>`标签数组`<route>`。因此，如果您想遍历每个停止标签，则：

```
foreach($xml->route->stop as $stop)
{
    echo (string)$stop; // prints the value of the <stop> tag
} 
```

在循环中，`$stop`是一个 SimpleXML 元素，因此为了打印它的值，您可以使用`(string)`语法将整个元素转换为字符串。您仍然可以访问属性和其他 SimpleXML 元素属性。

如果您知道`<stop>`要定位哪个元素，那么您可以直接获取它：

```
echo (string)$xml->route->stop[1]; // prints the second <stop> value 
```

# .net - 类似 HttpClient.TryDownload

> ID：13455704
> 
> 赞同：0
> 
> 时间：2012-11-19T14:21:04.663
> 
> 标签：.net

我想实现一些在 HTTP 状态代码为 404 时不会引发异常的东西。我可以使用`System.Web.WebRequest`类还是必须使用较低的 API？（我不能先发送 HTTP HEAD 请求，因为有些服务器会忽略它们。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-01T13:46:20.873

还有另一个 API。它是*System.Net.Http.HttpClient*。对于低于 4.5 的 .NET，需要*System.Net.Http* NuGet 包。

# javascript - Jquery - 从元素中删除类后仍然有效

> ID：13455707
> 
> 赞同：2
> 
> 时间：2012-11-19T14:21:06.520
> 
> 标签：javascript, jquery, class, function

我不知道它是否应该是这样的，我在做一些根本错误的事情。

我有一个`div`给定的类，当你点击它时`div`它会给出一个响应，但是我有另一个`div`，当点击那个时它会从第一个中删除类`div`。

但是，当我在删除其类后继续单击第一个时`div`，我继续得到响应。

为什么我删除课程后点击仍然有反应？

HTML

```
<div class="testing">Testing</div>

<div id="testing_remover">Remove class from testing</div> 
```

JS：

```
$(document).ready(function(){
    $('.testing').click(function(){
        console.log('testing is active');
    });

    $('#testing_remover').click(function(){
        $('.testing').removeClass('testing');
    });
}); 
```

小提琴：http: [//jsfiddle.net/P3NpK/](http://jsfiddle.net/P3NpK/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:22:55.500

事件处理程序绑定到元素，而不是选择器。

要删除处理程序，请使用[`.off()`](http://api.jquery.com/off/)：

```
$(".testing").off("click"); 
```

* * *

早于 1.7的jQuery 版本[最好](http://api.jquery.com/unbind/)使用`.unbind`.`.off`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:23:11.783

您必须将事件处理程序委托给 DOM 树的更高层，或者显式取消绑定事件处理程序。一旦事件绑定到一个元素，仅仅更改类名不会删除事件处理程序。

要删除事件处理程序（[更新的小提琴](http://jsfiddle.net/jamesallardice/P3NpK/2/)）：

```
$('#testing_remover').click(function(){
    $('.testing').off('click');
}); 
```

委派事件处理程序（[更新的小提琴](http://jsfiddle.net/jamesallardice/P3NpK/1/)）：

```
$(document).on("click", ".testing", function(){
    console.log('testing is active');
}); 
```

委托方法起作用的原因是，一旦事件冒泡到所选元素（在本例中为`document`），jQuery 就会捕获该事件。它检查事件目标是否与选择器匹配，如果匹配，则执行事件处理程序。如果您删除了该类，则目标将不再与选择器匹配。

# database-design - 这种关系数据库设计的正确形式是什么？

> ID：13455710
> 
> 赞同：0
> 
> 时间：2012-11-19T14:21:10.857
> 
> 标签：database-design, entity-relationship

下面我有两个表，客户和货币。

场景：每个客户必须为其所有交易定义一种货币。我放置了一个 currency_id 列，将货币与客户相关联。以下是我脑海中出现的一些问题。Mybe这是一个愚蠢的问题。但我想清除自己。

1.  客户观点：一位客户使用一种货币 ![在此处输入图像描述](../Images/5b5a92e22f37cd535850ca7d5450b591.png)

2.  从货币查看：一种货币可以有 0 个或多个客户。 ![在此处输入图像描述](../Images/30995bc4026095f72d3045947ee3f890.png)

这里的问题。在这种情况下，我们应该如何看待问题？我们应该从客户 (1) 或货币 (2) 来看。任何人都可以解释我这个？？

编辑：我的问题是关于设计 ERD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:28:36.300

> 我们应该从客户 (1) 或货币 (2) 来看。

您可以从客户的角度或货币的角度查看数据。

你自己说的。您可以查看特定客户的货币，也可以计算特定货币的客户数量。

通过关系数据库没有“顺序”。您设计关系表，以便它们提供您需要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:28:02.900

就 ERD 而言，2 是正确的。您在 Customer 中有一个外键引用 Currency 的主键，因此您具有从 Customer 到 Currency 的多对一关系。图 2 正确地用图表显示了这种关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:28:18.950

您不会从任何一方查看关系。您在这里拥有的是与一种货币相关的零对多客户，可以以图形方式或以多种不同方式表达为文本。例如，“0..*:1”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:05:50.007

（在支持@Gilbert 的回复并阅读随后的讨论后将其加入。）

两个表之间的关系是双向的：表 X 与表 Y 相关，表 Y 与表 X 相关。对于您的情况，正如您所说：

*   一位客户使用一种货币
*   一种货币可以有 0 个或多个客户

两种语言描述都是正确的。

关于 ERD 表示，您的第二种情况最能代表这一点。除非你是一名学者，否则不要被代表性细节所困扰，那里有许多非常相似的符号。只要它显示“一对零或更多”，你就很好。

至于实现，我想你已经明白了：父表有主键 (CurrencyId)，子表有自己的主键 (CustomerID) 和与父表相关的外键 (CurrencyID)。

# .net - 如何从 AutomationElement 获取 GridView 项目？

> ID：13455714
> 
> 赞同：0
> 
> 时间：2012-11-19T14:21:22.567
> 
> 标签：.net, ui-automation

我可以使用该方法获取 ListView/GridView 的 AutomationElement `FindAll`。一行中各个项目的类名是*ContentPresenter*。我想获得价值，但我只能获得他们的位置（列，行）。

我试过很多模式中的 ValuePattern 不被支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:58:16.977

默认情况下，.NET UIAutomation 无法做到这一点。GridView 底层的字符串*太笨*了。如果 GridView 中有一个 TextBox，则可以使用`ValuePattern`.

您还可以添加一种*支持*`ValuePattern`. 这在我的情况下是不可能的，但如果您自己编写 UIAutomation 的两侧，则可能是这样。

# php - 如何访问 PHP 中多选下拉列表中选择的值？

> ID：13455715
> 
> 赞同：3
> 
> 时间：2012-11-19T14:21:38.647
> 
> 标签：php, multi-select

我正在使用[Jquery Multiselect Widget](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)来创建一个带有 multiselect 选项的下拉列表框。我正在使用 MySql 数据库中的数据填充下拉列表。我无法将多个值传递给 $_POST 中的 php 文件。

我的 Multiselect DropDown 的 HTML 和 PHP 代码。

```
 <form id="intermediate" name="inputMachine" method="post">

<select id="selectDuration" name="selectDuration" multiple="multiple"> 
  <option value="1 WEEK" >Last 1 Week</option>
  <option value="2 WEEK" >Last 2 Week </option>
  <option value="3 WEEK" >Last 3 Week</option>
</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

    <?php
        //include '../db/interface/DB_Manager.php';
        $connect = mysql_connect("localhost", "root", "infinit") or die(mysql_error()); 
        mysql_select_db("serverapp") or die(mysql_error()); 

        $query = "select id,name from rpt_shift_def"; //Write a query
        $data = mysql_query($query);  //Execute the query
    ?>
    <select id="selectShift" name="selectShift" multiple="multiple">
    <?php
    while($fetch_options = mysql_fetch_array($data)) { //Loop all the options retrieved from the query
    ?>

    <option name="selected_ids[]" id ="<?php echo $fetch_options['id']; ?>"  value="<?php echo $fetch_options['name']; ?>"><?php echo $fetch_options['name']; ?></option><!--Echo out options-->
    <?php
        }
    ?>
    </select> 
```

在这里，我在 Multiselect Dropdown 中填充 Shift 下拉列表。如果我选择不止一个班次，我无法在 php.ini 中获取所有这些选定的值。相反，我只得到最后一个选择的值。

我想做这样的事情。

```
 $shiftarraycalc = array();

foreach ($_POST['selectShift'] as $key => $value) {
    array_push($shiftarraycalc,$value);
} 
```

但它不工作。

我不知道如何在 $_POST 中获取多个值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T14:42:25.887

在选择中将名称修改为数组

```
<select id="selectShift" name="selectShift[]" multiple="multiple"> 
```

并这样做了，它有效

```
$shiftarraycalc = array();
$shift=$_POST['selectShift'];

if ($shift)
{
    foreach ($shift as $value)
    {
        array_push($shiftarraycalc,$value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-16T04:44:30.537

你也可以这样做。

```
<form action="ResultsDulith.php" id="intermediate" name="inputMachine[]" multiple="multiple" method="post">
    <select id="selectDuration" name="selectDuration[]" multiple="multiple"> 
        <option value="1 WEEK" >Last 1 Week</option>
        <option value="2 WEEK" >Last 2 Week </option>
        <option value="3 WEEK" >Last 3 Week</option>
         <option value="4 WEEK" >Last 4 Week</option>
          <option value="5 WEEK" >Last 5 Week</option>
           <option value="6 WEEK" >Last 6 Week</option>
    </select>
     <input type="submit"/> 
</form> 
```

然后从下面的**PHP**代码中进行多项选择。它相应地打印选定的多个值。

```
$shift=$_POST['selectDuration'];

print_r($shift); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T10:51:27.690

```
<select id="hanu" name="hanu[]" multiple="multiple">
<option> one</option>
<option> two </option>
<option> three</option>
<option> four </option>
<option> five</option>
<option> six </option>
<option> seven</option>
</select>` 
```

而这个的php代码是

```
$res_hanu = array();
$hanu_new=$_POST['hanu'];
if ($hanu_new){
foreach ($hanu_new as $value){
array_push($res_hanu,$value);
}
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-11T11:06:25.923

```
$shift=$_POST['selectShift'];

if ($shift)
{
    foreach ($shift as $value)
    {
        $shiftarraycalc[]=$value;
    }
} 
```

# php - 多维数组（检查嵌套数组中是否存在id）

> ID：13455716
> 
> 赞同：0
> 
> 时间：2012-11-19T14:21:43.220
> 
> 标签：php, multidimensional-array

我正在做一个电子商务系统。这就是填充数组的样子： [0] => Array ( [0] => 1 (this is the id) [1] => 1 ((this is the quantity) [2] => abcd (this some一种 txt 框）[3] => 10（这是价格））

```
[1] => Array
    (
        [0] => 3
        [1] => 1
        [2] =>  efg
        [3] => 50
    )

[2] => Array
    (
        [0] => 1
        [1] => 1
        [2] =>  bla bla bla
        [3] => 10
    ) 
```

现在我需要检查何时插入 id 是否存在，如果它只是和数量。这是代码：

```
if (!empty($_SESSION["cart"])) {
            $array = $_SESSION['cart'];
            $item = array($_POST['id'], $_POST["quantity"], $_POST['txt'], $_POST['price']);
            array_push($array, $item);
            $_SESSION["cart"] = $array;
        } else {
            $_SESSION["cart"] = array(array($_POST['id'], $_POST["quantity"], $_POST['txt'], $_POST['price']));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:28:10.760

Try:

```
 if (!empty($_SESSION["cart"])) {
        $item =array();
        $array = $_SESSION['cart'];
        if(!empty($_POST['id'])
         $item = array($_POST['id'], $_POST["quantity"], $_POST['txt'], $_POST['price']);
        array_push($array, $item);
        $_SESSION["cart"] = $array;  
    } else {
        $_SESSION["cart"] = array(array($_POST['id'], $_POST["quantity"], $_POST['txt'], $_POST['price']));
    } 
```

# php - php preg_replace 不适用于 HTML 标签

> ID：13455719
> 
> 赞同：1
> 
> 时间：2012-11-19T14:21:48.707
> 
> 标签：php, regex, preg-replace

我发现 php preg_replace 不适用于 HTML 标签。

假设我有这样的代码：

```
 $language = $this->cms_language();
    $pattern = array();
    $pattern[] = "/\{\{ if_language:$language \}\}(.*)\{\{ elif_language:.*\{\{ end_if }}/";
    $pattern[] = "/\{\{ if_language:$language \}\}(.*)\{\{ else \}\}.*\{\{ end_if }}/";
    $pattern[] = "/\{\{ if_language:.*\{\{ elif_language:$language \}\}(.*)\{\{ elif_language:.*\{\{ end_if }}/";
    $pattern[] = "/\{\{ if_language:.*\{\{ elif_language:$language \}\}(.*)\{\{ else \}\}.*\{\{ end_if }}/";
    $pattern[] = "/\{\{ if_language:.*\{\{ else \}\}(.*)\{\{ end_if }}/"; 
    $replacement = '$1';
    $value = preg_replace($pattern, $replacement, $value); 
```

$this->cms_language() 将返回 "english"、"german" 或 "indonesia" 之一

当我将这样的字符串分配给 $value 时，它​​将给出“Victoria”、“Hitler”或“Sule”，具体取决于 $language 的值：

```
$value = '{{ if_language:english }}Victoria{{ elif_language:german }}Hitler{{ else }}Sule{{ end_if }}</p>' 
```

但是当我将 $value 更改为

```
$value = '{{ if_language:english }}<br />
Victoria<br />
{{ elif_language:german }}<br />
Hitler<br />
{{ else }}<br />
Sule<br />
{{ end_if }}</p>' 
```

会将 $value 本身作为输出。

那么这里有什么问题呢？

**编辑**：对不起，我发现这个有效：

```
$value = '{{ if_language:english }}<br />Victoria<br />{{ elif_language:german }}<br /> Hitler<br />{{ else }}<br />Sule<br />{{ end_if }}'; 
```

所以我想问题出在换行符上，而不是 <br /> 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:06:44.450

问题是您缺少正确的模式修饰符。

在这种情况下，您应该使用`/s`修饰符，例如：

```
/your pattern/s 
```

`/s`修饰符改变点`.`匹配字符的方式；默认情况下，它匹配*除*换行符之外的所有内容，但`/s`它真正匹配任何内容。

顺便说一句，您可能还想使用`/U`修饰符使表达式`(.*)`默认为非贪婪；贪心模式会尽可能地匹配，如果你使用它们，你可能会得到意想不到的结果。

多个模式修饰符指定如下：

```
/your pattern/sU 
```

顺便说一句，`/U`您也可以使用修饰符`(.*?)`来指定非贪婪匹配。

# excel - 如何创建宏以将数据从一个excel工作表复制到另一个工作表的下一行

> ID：13455720
> 
> 赞同：1
> 
> 时间：2012-11-19T14:21:48.657
> 
> 标签：excel, copy, vba

我对此有点难过，想知道是否有人可以帮忙？我在 excel 中创建了一个宏来将一些数据从一个工作表复制到另一个工作表。它工作正常，但显然每次我运行宏时，它都会完成第一行（正如我在录制时粘贴的那样）。我实际上希望它能够工作，以便每次运行宏时，它都会将数据复制到新行。

如果有帮助，我可以粘贴指向该文档的链接。我确定这只是将一些 VBA 代码粘贴到宏中的情况。目前，代码如下所示：

```
Sub Macro1()
'
' Macro1 Macro
'

'
    Sheets("Quotation System").Select
    Range("K9").Select
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    Range("A2").Select
    ActiveSheet.Paste
    Range("B2").Select
    Sheets("Quotation System").Select
    Range("K11").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    ActiveSheet.Paste
    Sheets("Quotation System").Select
    Range("K13").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    Range("C2").Select
    ActiveSheet.Paste
    Sheets("Quotation System").Select
    Range("K15").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    Range("D2").Select
    ActiveSheet.Paste
    Columns("D:D").EntireColumn.AutoFit
    Columns("D:D").EntireColumn.AutoFit
    Columns("D:D").ColumnWidth = 10.86
    Sheets("Quotation System").Select
    Range("K17").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    Range("E2").Select
    ActiveSheet.Paste
    Range("F2").Select
    Sheets("Quotation System").Select
    Range("K19").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    ActiveSheet.Paste
    Columns("F:F").ColumnWidth = 8.57
    Sheets("Quotation System").Select
    Range("K21").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    Range("G2").Select
    ActiveSheet.Paste
    Range("H2").Select
    Sheets("Quotation System").Select
    Range("K23").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    ActiveSheet.Paste
    Range("I2").Select
    Sheets("Quotation System").Select
    Range("K25").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    ActiveSheet.Paste
    Sheets("Quotation System").Select
    Range("K7").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    Range("J2").Select
    ActiveSheet.Paste
    Range("K2").Select
    Sheets("Quotation System").Select
    Range("G29").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Confirmed Bookings").Select
    ActiveSheet.Paste
    Columns("K:K").EntireColumn.AutoFit
    Columns("K:K").ColumnWidth = 6
    Columns("K:K").ColumnWidth = 7
    Range("K2").Select
    Application.CutCopyMode = False
    ActiveCell.FormulaR1C1 = "='Quotation System'!R[27]C[-4]"
    Range("K3").Select
    Columns("J:J").EntireColumn.AutoFit
    Range("I19").Select
    Columns("A:A").ColumnWidth = 8.43
End Sub
Sub Booking_confimred()

End Sub 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:57:41.000

因为您记录了一个非常特定于情况的宏，所以我想向您展示一种改进此宏并将这些副本放置到特定位置的基本方法：

你从这个开始

```
Public Sub Macro1()

  Application.CutCopyMode = False 
```

然后，这就是宏重新编码器用来复制的内容：

```
Sheets("Quotation System").Select
Range("K9").Select
Selection.Copy 
```

这是您可以改用的：

```
Sheets("Quotation System").Range("K9").Copy 
```

这是宏记录器用来粘贴的：

```
Sheets("Confirmed Bookings").Select
Range("A2").Select
ActiveSheet.Paste 
```

这是您可以改用的：

```
Sheets("Confirmed Bookings").Range("A2").Paste 
```

为了将其粘贴到新行，就像

```
 With Sheets("Confirmed Bookings")
     .Cells(.UsedRange.Columns(1).Rows.Count + 1, 1).Paste
   End With 
```

然而，这不是解决这个问题的唯一方法，当然也不是最好的方法，但它可能会帮助您了解 VBA。

如果您想要一个更简洁的解决方案，您可能需要搜索 SO，因为这里有许多类似的问题/问题和很好的解决方案。

# html - 折叠边距，均匀宽度填充或边框

> ID：13455722
> 
> 赞同：0
> 
> 时间：2012-11-19T14:21:55.737
> 
> 标签：html, margin

所以，问题是关于崩溃的边距。

按照这个例子：http: [//jsfiddle.net/2ausj/](http://jsfiddle.net/2ausj/)

代码 ：

```
<!DOCTYPE html>
    <html lang="fr">

    <head>
<title>Page</title>
<meta http-equiv="content-Type" content="text/html; charset=UTF-8" />
<link type="text/css" rel="stylesheet" media="screen, tv, projection" href="css/style.css" />
    </head>

<body>

<div id="main">

    <div id="home" class="main"></div>

    <div class="main"></div>
    <p></p>
    <div class="main"></div>

    <div class="main"></div>

    <div class="main"></div>

    <div class="main"></div>

    <div class="main"></div>
</div>
</body>

</html>​ 
```

和CSS

```
html { overflow: hidden;}

body {
background: transparent url('../images/background.jpg') repeat;
}

#main { background: blue; padding: 1px; border: 1px;}

.main {
max-width: 1000px;
height: 200px;
background: red;
margin: 50px auto;
position: relative;
position: absolute;
}

p { height: 1px; } 
```

我有一些 div。在这种情况下，每个顶部和底部的边距为 50 像素，但在 div 之间，只有 50 像素的边距而不是 100 像素

我读了很多关于折叠边距的文章，他们都说要为父级设置填充或边框。我试图将 div 直接放在 body 中并为 body 设置 padding，我试图在我的 div 上设置 padding，我试图将我的 div 放在一个容器 div 中并为他设置 padding 或边框，似乎没有任何效果。

正如您在我的示例中看到的那样，我找到的唯一解决方案是在 div 之间放置一个高度为 1px 的元素，但它很脏。然后，div之间终于有了100px，甚至101，因为1px

.

我希望有一个更好的解决方案，并且也理解为什么我没有尝试过任何工作。

请原谅我的英语不好（不是我的错，我是法国人）并提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:46:35.890

由于你的第一个 div 有一个 ID 和一个类，你可以这样做：

`.main`将您的保证金更改为：`margin:0 auto 100px auto;`

并添加`#home`样式为的 ID`margin-top:100px;`

我摆弄了一些小提琴，不明白为什么 50px 的顶部和底部边距不起作用，但我上面提供的内容将解决您的问题。如果这对您有用，请接受它作为回答。

# javascript - 如何将其与 javascript 代码一致

> ID：13455726
> 
> 赞同：-2
> 
> 时间：2012-11-19T14:22:01.223
> 
> 标签：javascript, html, switch-statement, case

我有一个横幅要发布。我的 html 表单的实际代码是这样的：

```
<script type="text/javascript" src="http://mywebsite.com/bzLoader.js"></script>
<noscript>
  <p style="background-color:#ffffff;color:#000000;padding:1em;">Votre navigateur ne supporte pas le Javascript ou a été désactivé.</p>
</noscript>
<div id="1234ABCS"></div>
<div id="QSDF98765"></div> 
```

如何将此代码翻译成 javascript 代码？

我需要将此代码插入到其他 javascript 代码中（在此处编写 //Banner 1）：

```
 var parts = window.location.pathname.replace(/\/$/, '').split('/'),
   page = parts[parts.length - 1];

switch (page)
{
case "index.html":
  //Banner 1
  break;
case "index_en.html":
  //Banner 2
  break;
} 
```

如果我没记错的话，将所有内容重新以 html 形式恢复的最后一步是将所有内容放入其中：

```
<script type="text/javascript"> my javascript code </SCRIPT> 
```

正确的 ？？

非常感谢对我的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:37:46.573

这不是你可以在 JavaScript 中做的事情。

`noscript`无法从 JavaScript 插入标签，因为在需要时没有 JavaScript 。

您需要做的是将此代码添加到您的网络服务器；服务器必须向浏览器发送正确的 HTML 横幅。尝试在客户端/浏览器中插入正确的横幅是一种不好的方法。

# windows-8 - Windows 8 专业版重置

> ID：13455728
> 
> 赞同：0
> 
> 时间：2012-11-19T14:22:09.070
> 
> 标签：windows-8, operating-system

我为我的 Windows 7 电脑购买了 Windows 8 升级版。我已经付款，下载了，但不幸的是，出于那一刻的热情，我没有为拥有iso而刻录dvd或usbkey。现在，两周后我与skydrive同步后出现了蓝屏死机，在此之后，我的电脑“坏了”（我已经尝试了一切）......所以，现在我想做一个重置但我没有得到安装 DVD（我已经尝试过刷新但没有任何有用的事情发生）。我在网上到处搜索，但不清楚我必须做什么......（我无法找到任何官方下载的win8 pro）我已经购买了我的升级，但我无法重新安装它？这很奇怪，听起来有点傻......有什么暗示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:01:41.007

我有同样的问题。因为您拥有许可证，所以您可以从“互联网”下载 Windows 8 专业版并使用您的密钥进行安装。只要确保下载具有有效哈希的官方iso（如果您从非官方来源获得它并不重要）。

当然，您也可以致电 Microsoft 寻求支持，但以前的解决方案非常简单。

# r - R：返回索引以及排序数据的排序函数

> ID：13455729
> 
> 赞同：1
> 
> 时间：2012-11-19T14:22:11.580
> 
> 标签：r, indexing

问这个问题我觉得很愚蠢，但是：在一个更常见的包中是否有一个现有的函数可以返回排序的数据和源索引的向量？写起来很简单：

```
Rgames> foo <- sample(1:10,10)
Rgames> bar <- sort(foo)
Rgames> bar_index <- sapply(1:10,function(jj)which(foo==bar[jj])) 
```

“他们周一叫我暴风雨^H^H^H^H^Htupid，”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:34:55.330

您可以通过以下方式轻松获取索引：

```
match(bar, foo) 
```

* * *

此命令将返回一个包含索引和排序数据的列表：

```
list(o <- order(foo), foo[o]) 
```

# android - 如何在 Android 数据库表中找到数据库长度？

> ID：13455732
> 
> 赞同：1
> 
> 时间：2012-11-19T14:22:16.553
> 
> 标签：android, database, sqlite

我是 Android 的新手，现在我添加了一些关于数据库的信息。最后我想知道我的实际表中有多少项目？我能怎么做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:41:16.743

您可以使用数据库实用程序 queryNumEntries（SQLiteDatabase db，String 表）。描述在[这里](http://developer.android.com/reference/android/database/DatabaseUtils.html#queryNumEntries%28android.database.sqlite.SQLiteDatabase,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-01T14:15:39.287

```
public int getAll(){

    Cursor cursor = database.query(TABLE_NAME, new String[] {_ID,NAME,
            EMAIL}, null, null, null, null, null);

    int count = cursor.getCount();

    return count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:16:17.910

这就是我计算`SQLite`数据库中所有行的方式。

```
public int countCases() {

        String SQLQuery = "SELECT COUNT(" + KEY_ID + ") FROM " + TABLE_CASES + ";";
        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(SQLQuery, null);
        cursor.moveToFirst();
        int count = cursor.getInt(0);
        cursor.close();
        db.close();
        return count;
    } 
```

请注意，`KEY_ID`and`TABLE_CASES`是常量值，也是`KEY_ID`我数据库中的主键

# objective-c - 如何在 Objective-C 中的 SQLite3 中使用保存点

> ID：13455733
> 
> 赞同：2
> 
> 时间：2012-11-19T14:22:20.333
> 
> 标签：objective-c, ios, sqlite, rollback

我正在开发一个 iOS 应用程序，它有一个相当大的 sqlite 数据库，每天至少获取一次，如果在事务运行时发生某些事情，我想使用保存点来恢复它。

我一直在运行的语句如下：

```
const char *sqlSetSavePoint = @"savepoint updateSavepoint";

const char *sqlRollback = @"Rollback transaction to savepoint updateSavepoint"; 
```

我显然省略了很多实际运行这些语句的代码，但是由于我对其他语句运行相同的方法并且它们运行良好，我相信问题不存在。我在运行我的插入事务（最多插入 20 万行）之前设置保存点，然后如果出现异常或错误，我会尝试回滚。

我的问题是；这些回滚语句是否正确（我只是做错了）还是有其他方法可以在 iOS 的 sqlite3 中使用保存点？

编辑：为了澄清起见，我试图在运行多个事务之前设置一个保存点，如果其中任何一个或从服务器获取数据失败，我想完全回滚到保存点。就像这样：

```
"savepoint updateSavepoint"
    ->FetchDatafromServer()
          -> "Begin exclusive transaction"
               //sqlite3_bind functions
          -> "Commit transaction"
    ->FetchDatafromServer()
          -> "Begin exclusive transaction"
               //sqlite3_bind functions
          -> "Commit transaction"
    ->FetchDatafromServer()
          -> "Begin exclusive transaction"
               //sqlite3_bind functions
          -> "Commit transaction"
    ->FetchDatafromServer()
          -> "Begin exclusive transaction"
              !!Failure!!
"Rollback transaction to savepoint updateSavepoint" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:56:48.483

您可以在事务内或其他保存点内使用保存点，但[不能在保存点内使用事务](http://www.sqlite.org/lang_savepoint.html)。

用保存点替换您的内部事务。

# .net - 在 Active Directory 中找不到域

> ID：13455738
> 
> 赞同：1
> 
> 时间：2012-11-19T14:22:30.323
> 
> 标签：.net, active-directory

当我登录到远程桌面时，我切换了某个域 - USPHC，然后输入登录名和密码。我需要在代码中找到这个域。我已经编写了 WinForm 应用程序来测试它。但是我在 DirectorySearcher 类的帮助下找不到域：

```
DirectoryEntry dir = new DirectoryEntry();
var search = new DirectorySearcher(dir);
search.Filter = "(&(distinguishedName=USPHC))"; 
```

或借助 DirectoryEntry 类：

```
DirectoryEntry de = new DirectoryEntry();
foreach (DirectoryEntry child in de.Children)
{
listBoxDomains.Items.Add(child);
}

private void listBoxDomains_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        if (listBoxDomains.SelectedIndex != -1)
        {
            DirectoryEntry currentDomain = (listBoxDomains.SelectedItem as DirectoryEntry);
            if (currentDomain.Children != null)
            {
                listBoxDomains.Items.Clear();
                foreach (DirectoryEntry de in currentDomain.Children)
                {
                    listBoxDomains.Items.Add(de);
                }
            }
        }
    } 
```

# c - fopen 在 linux 中失败，但在 windows 中有效

> ID：13455745
> 
> 赞同：0
> 
> 时间：2012-11-19T14:22:48.777
> 
> 标签：c, linux, fopen

当我运行下面的代码时，它在 linux 中失败，但在 windows 中没有问题。文件名类似于“src/文件夹/文件”

```
char* loadProgSource(const char* filename, size_t* finalLength)
{
    char* returnStr;
    FILE* file = fopen(filename, "rb");
    if(file == NULL) return NULL;

    fseek(file, 0, SEEK_END);
    *finalLength = ftell(file);
    fseek(file, 0, SEEK_SET);

    returnStr = (char*) malloc(*finalLength+1);

    if(fread(returnStr, sizeof(char), *finalLength, file) != *finalLength) {
        fclose(file);
        free(returnStr);
        return NULL;
    }
    returnStr[*finalLength] = '\0';

    return returnStr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:44:39.850

不仅用于`perror()`在系统命令失败的情况下进行调试。

您可以像这样修改代码：

```
...

if (file == NULL) 
{
    perror("fopen");
    return NULL;
}

...

returnStr = malloc(*finalLength+1); /* note that casting 'malloc()' is not necessary and also not recommended uin C */
if (!returnStr)
{
  perror("malloc");
  return NULL;
}

...

if (fread(returnStr, sizeof(char), *finalLength, file) != *finalLength) 
{
  perror("fread");
  ... 
```

`fseek()`对,`ftell()`和的调用添加错误检查`fclose()`作为练习。

# javascript - 如何从嵌套匿名函数向父函数返回值

> ID：13455746
> 
> 赞同：5
> 
> 时间：2012-11-19T14:22:50.747
> 
> 标签：javascript, asynchronous, anonymous-function

我有一个 javascript 函数，它应该返回一个字符串的地理编码：

```
 function codeAddress(address) {
    var result = (new google.maps.Geocoder()).geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        return String(results[0].geometry.location.Ya)+','+String(results[0].geometry.location.Za)
      } else {
        return status;
      }
    });
    console.log(result);
    return result
} 
```

但是它返回“未定义”。我理解这里的错误，即由于 javascript 是异步的，它甚至在完全执行`codeAddress`之前就从函数返回。`function(results, status)`但我需要知道这里的解决方案和最佳实践。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T14:31:26.353

由于它是异步的，因此您应该传递一个处理函数的回调：

```
function codeAddress(address, callback) {
    (new google.maps.Geocoder()).geocode({
        'address' : address
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            callback(String(results[0].geometry.location.Ya) + ','
                    + String(results[0].geometry.location.Za))
        } else {
            callback(status);
        }
    });
}

codeAddress("test", function(result) {
    // do stuff with result
}); 
```

如果你使用 jQuery，你也可以使用 deferred：

```
function codeAddress(address, callback) {
    var dfd = new jQuery.Deferred();

    (new google.maps.Geocoder()).geocode({
        'address' : address
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
             // trigger success
            dfd.resolve(String(results[0].geometry.location.Ya) + ','
                    + String(results[0].geometry.location.Za));
        } else {
            // trigger failure
            dfd.reject(status); 
        }
    });

    return dfd;
}

codeAddress("some address").then(
    // success
    function(result) {
        // do stuff with result
    },
    // failure
    function(statusCode) {
        // handle failure
    }
); 
```

# ssas - SSAS 维度成员分组

> ID：13455749
> 
> 赞同：0
> 
> 时间：2012-11-19T14:23:01.717
> 
> 标签：ssas, olap, olap-cube

我是 SSAS 的新手，我对无法找到解决方案的维度成员有疑问。是否可以对维度成员进行分组，例如：

成员 1 成员 2_1 成员 2_2 成员 2_3 成员 3 ...

这样浏览多维数据集的用户将只看到成员 1、成员 2、成员 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:43:30.757

您可以在进入多维数据集的途中（在您的 etl 或视图中）对维度成员进行分组，但您必须对相关的事实记录进行分组才能使其有意义。如果维度应该被视为收集的集合而不是细分，这将是可取的。

或者，如果子维度值本身有意义并且应该保留在旁边，您可以在 SSAS 中创建成员层次结构，将子值与所需的父值相关联。

# html - 如何用视频打包 phonegap 黑莓应用程序？

> ID：13455751
> 
> 赞同：1
> 
> 时间：2012-11-19T14:23:04.423
> 
> 标签：html, cordova, blackberry

我正在使用 phonegap 开发黑莓应用程序。我需要在我的应用程序中显示视频。我想将我的应用程序与视频打包在一起。我将 .mp4 文件复制到 www/resources 文件夹中。当我运行 ant blackberry load-device .. 签名文件的数量增加并且签名成功。

但是加载到设备会出现以下错误..

```
 [exec] Copyright 2001-2009 Research In Motion Limited
 [exec] Connecting to device...
 [exec] Connected   Loading Test  0 of 
 Error: The specified module was rejected by the device and cannot be loaded
 [exec] 0 bytes sent at ~0 bps
 [exec] Disconnected ' 
```

有没有办法将应用程序与视频文件打包在一起。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:43:47.583

BlackBerry 应用程序的大小[不能大于 16256 KB](http://supportforums.blackberry.com/t5/Testing-and-Deployment/The-maximum-size-of-a-BlackBerry-smartphone-application/ta-p/1300209)

如果应用程序超出此限制，则无法安装/运行。

我建议将您的应用程序分成两部分。第一部分安装在设备上，然后将视频下载到存储卡。不要使用内部文件系统来存储大量数据。因为内部存储器文件系统与关键系统模块共享空间。当内存不足时，设备会发疯，可能会意外重启，出现冻结问题等。

# ruby-on-rails - Capistrano 在同一台服务器上部署 gitosis 和应用程序服务器？

> ID：13455754
> 
> 赞同：0
> 
> 时间：2012-11-19T14:23:09.790
> 
> 标签：ruby-on-rails, capistrano, gitosis

我在同一个 VPS 服务器上构建了 gitosis 服务器和 stage 服务器。在我的本地机器或阶段服务器中从 gitosis 克隆存储库运行良好。但是`cap deploy`在本地机器上总是要求我输入如下密码，我不知道是哪个密码，我尝试了每个密码都不起作用。

而且我知道可以使用 复制本地存储库`deploy_via: copy`，但我更喜欢为其他项目构建一个 gitosis 服务器。

有任何想法吗？谢谢。

## 环境

gitosis 和阶段服务器 ip：（`106.187.xxx.xxx`出于安全原因屏蔽一些数字）

## 日志

```
 * executing `deploy'
    triggering before callbacks for `deploy'
  * executing `check:revision'
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote gitosis@106.187.xxx.xxx:foo_project.git master"
    command finished in 1105ms
  * executing "if [ -d /home/deployer/apps/railsapp/shared/cached-copy ]; then cd /home/deployer/apps/railsapp/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 07827de89355c5366c4511ee22fdd9c68a31b0be && git clean -q -d -x -f; else git clone -q gitosis@106.187.xxx.xxx:foo_project.git /home/deployer/apps/railsapp/shared/cached-copy && cd /home/deployer/apps/railsapp/shared/cached-copy && git checkout -q -b deploy 07827de89355c5366c4511ee22fdd9c68a31b0be; fi"
    servers: ["106.187.xxx.xxx"]
    [106.187.xxx.xxx] executing command
 ** [106.187.xxx.xxx :: out] Password:
Password: 
 ** [106.187.xxx.xxx :: out]
 ** [106.187.xxx.xxx :: out] Password:
Password: 
 ** [106.187.xxx.xxx :: out]
 ** [106.187.xxx.xxx :: out] Password:
Password: 
 ** [106.187.xxx.xxx :: out]
 ** [106.187.xxx.xxx :: out] Permission denied (publickey,keyboard-interactive).
 ** [106.187.xxx.xxx :: out] fatal: The remote end hung up unexpectedly 
```

### 部署.rb

```
server "106.187.xxx.xxx", :web, :app, :db, primary: true

set :application, "railsapp"
set :user, "deployer"
set :local_user, "joshchang"
set :deploy_to, "/home/#{user}/apps/#{application}"

set :use_sudo, false
set :rails_env, "stage"

set :scm, "git"
set :repository, "gitosis@106.187.xxx.xxx:foo_project.git"
set :deploy_via, :remote_cache
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:21:50.813

`git`抱歉，这个问题有点难以理解，但是在 capistrano中有两种使用方法。首先是授予服务器直接访问 git 存储库的权限；例如，在 GitHub 上，您可以选择安装“部署密钥”——需要访问的服务器的公钥。所以检查gitosis是否有这个选项。

但在你做之前，考虑另一种方法，即通过执行部署的用户的 git 授权，所以当你部署时，你作为自己拉，而不是指示服务器这样做。每种方法都有利有弊，但我认为从长远来看，第二种方法更容易管理。

要使用第二种方法，部署人员（运行 capistrano）的机器需要 1）`ssh-agent`运行，并且 2）需要用于`ssh-add`授权`ssh-agent`使用您的公钥——它非常安全，一旦你设置好了，它是透明的。

当你使用第二种方法时，对 git 的访问将与本地相同，因此不应提示输入密码。否则，您的设置`deploy.rb`就可以了。

# xaml - Visual Studio\blend 画板渲染与设备不同

> ID：13455759
> 
> 赞同：0
> 
> 时间：2012-11-19T14:23:21.363
> 
> 标签：xaml, visual-studio-2012, expression-blend, windows-phone, winrt-xaml

我们对像素完美标记有一个奇怪的问题。Vs 或 Blend 画板渲染页面与设备不相似（文本块的最大问题）。我认为图片是更好的描述。

![在此处输入图像描述](../Images/843b362cc5ebb6d1ba3db9e6f949bbcd.png)

和完整信息的代码

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Image
        Source="Untitled.png"/>
    <TextBlock
        Margin="12 7"
        FontSize="34"
        Text="Segoe UI Super TEST" />
</Grid> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:54:27.317

伙计们，感谢您花时间。问题不在于重影文本，而是由简单的背景图像引起的。主要问题是设备中的文本低于画板中的文本。

幸运的是，我们找到了解决方案。不知何故，我在我的机器上丢失了 Segoe WP，我不知道为什么它没有用 sdk 重新安装。所以默认 FontFamily 映射到 PhontFamilyNormal 映射到不存在的字体。而这个原因破坏了渲染。

# java - 一些 HWPF POI 文档构建示例

> ID：13455762
> 
> 赞同：0
> 
> 时间：2012-11-19T14:23:30.860
> 
> 标签：java, ms-word, apache-poi, .doc, hwpf

我正在寻找使用[POI](http://poi.apache.org/)构建重要 Word (97-2003) 文档的示例。我已经用“Hello World”创建了一个：

```
package com.mygroup.myapp.poi.word;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.URL;

import org.apache.log4j.Logger;
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.usermodel.CharacterRun;
import org.apache.poi.hwpf.usermodel.Range;

public class DocFileWriter {

    private static final Logger LOGGER = Logger.getLogger(DocFileWriter.class);
    private static final String FILE_EXTENSION = ".doc";
    private static final URL EMPTY_DOC_URL = DocFileWriter.class.getClassLoader().getResource("empty.doc");
    private String pathname;
    private HWPFDocument document;

    /**
     * Constructor
     * @param pathname the target path name (e.g.: "/tmp/test.doc", etc.)
     * @throws IOException 
     */
    public DocFileWriter(String pathname) throws IOException {
        if (!pathname.endsWith(FILE_EXTENSION)) {
            throw new RuntimeException("The file name must ends with " + FILE_EXTENSION);
        }
        this.pathname = pathname;
        try {
            document = new HWPFDocument(EMPTY_DOC_URL.openStream());
        } catch (IOException e) {
            LOGGER.error("Empty document resource missing");
            throw e;
        }
    }

    /**
     * Adds a "Hello World!" to the document.
     */
    public void addHelloWorld() {
        Range range = document.getRange();
        CharacterRun charRun = range.insertBefore("Hello World!");
        charRun.setFontSize(18);
        charRun.setItalic(true);
    }

    /**
     * Writes the document on disk.
     */
    public void writeDocument() {
        try {
            document.write(new FileOutputStream(new File(pathname)));
        } catch (FileNotFoundException e) {
            LOGGER.error("The file cannot be created", e);
        } catch (IOException e) {
            LOGGER.error("Unable to write the document", e);
        }
    }
} 
```

现在我想补充一点：

*   照片
*   空白页
*   一个标题（只有一个字符串）
*   页脚（只有一个字符串）
*   一张表（10 行，3 列）

您对此有一些指示/示例吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:14:43.097

如此处所示[，](http://poi.apache.org/hwpf/index.html) HWPF 是 POI 的孤儿项目。没有办法从头开始编写复杂的旧 .doc 文件。添加图片/页眉/页脚/表格仅由 XWPF 和 .docx 格式管理。

所以我选择使用 RTF（带有 .doc 扩展名）。以下是构建 RTF 报告的一些解决方案：

*   [http://rtftemplate.sourceforge.net/](http://rtftemplate.sourceforge.net/)
*   [http://code.google.com/p/jrtf/](http://code.google.com/p/jrtf/)
*   [http://itextrtf.sourceforge.net/](http://itextrtf.sourceforge.net/)

# r - 有没有办法强制 R 中的图像函数不归一化坐标？

> ID：13455764
> 
> 赞同：1
> 
> 时间：2012-11-19T14:23:35.640
> 
> 标签：r, image, plot, default, axes

在 R 中使用该`image`函数时，它对输入矩阵的维度长度进行了归一化，因此 X 和 Y 轴从 0 变为 1。

有没有办法告诉`image`函数不要标准化这些数字？

我需要这样做才能覆盖不同类型的数据并将所有这些坐标归一化到 [0,1] 空间中是非常乏味的。

编辑：格雷格提供的答案解释了这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:45:20.183

一个可重现的例子在这里会很有帮助。通常，如果您只给出`image`一个`z`矩阵，那么该函数会选择有效的默认 x 和 y 值，我认为这就是您所看到的。另一方面，如果您给出`image`一个 x 向量和 ay 向量，那么它会使用该信息来构建图形。如果 x/y 向量的长度等于 z 的相应维度，则这些值表示矩形的中心，如果 x/y 比 z 的相应维度长 1，则它们表示矩形的角。这使您可以很好地控制您提到的事情。

如果这不能回答问题，那么给我们一个自包含的可重复的例子来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T05:28:28.410

我将根据 Greg Snow 提供的答案来回答我的问题，以遵循本网站的最佳实践，因为任何提供信息的东西都应该是答案。

如果您不向函数提供`x`nor`y`参数`image()`，则轴的范围是从 0 到 1，如下例所示。

```
> image(volcano) 
```

![绘制没有 x 和 y 参数的图像](../Images/68a032127f9431b6a2cb8256cfc61922.png)

然后，如果您想在使用的矩阵中定位一个兴趣点，对于 [x,y] 坐标为 [10,40] 的矩阵元素，您需要执行以下操作：

```
> points(x=10/length(volcano[,1]),y=40/length(volcano[1,])) 
```

![在此处输入图像描述](../Images/7bff532342474e48a7d78be6f1fe3ead.png)

如果指定了`x`and`y`参数，并且（正如 Greg 提到的）它们适合矩阵的维度，那么轴将在指定的`x`和`y`向量范围内。

```
> dim(volcano)
[1] 87 61
> image(x=1:87, y=1:61, z=volcano) 
```

![在此处输入图像描述](../Images/bfc5805dda4c81e0a8d4be25b9e5cb0a.png)

```
 > points(10,40) 
```

![在此处输入图像描述](../Images/823f97d83b329fad23f1ad23ddeffe9e.png)

# java - 两个组合框之间的共享数据

> ID：13455767
> 
> 赞同：3
> 
> 时间：2012-11-19T14:23:56.520
> 
> 标签：java, swing, jcombobox

我需要在两个（或更多）组合框之间共享数据，但我想独立选择元素。例如，如果我在第一个组合框中选择 Object1，我的第二个 ComboBox 也选择 Object1，因为它们具有相同的模型（DefaultComboBoxModel 并且此模型也管理所选对象）。但我不想要这种行为。我想独立选择组合框中的对象。当我在第一个组合框中选择对象时，我的第二个组合框不应该改变。

此时我正在考虑两个模特的超模。Supermodel 将向子模型发送事件，它们将更新组合框数据，但不更新状态。但我认为这不是最好的方法。

还有更有趣和简单的方法吗？

这是理解我的意思的简短代码：

```
package hello;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JComboBox;
public class Comboboxes extends JFrame
{
private JPanel contentPane;
public static void main(String[] args)
{
    EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
            try
            {
                Comboboxes frame = new Comboboxes();
                frame.setVisible(true);
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }
    });
}

public Comboboxes()
{
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    JComboBox one = new JComboBox();
    one.setBounds(10, 11, 414, 26);
    contentPane.add(one);

    JComboBox two = new JComboBox();
    two.setBounds(10, 52, 414, 26);
    contentPane.add(two);

    DefaultComboBoxModel<String> model = new DefaultComboBoxModel<String>();
    model.addElement("Item 1");
    model.addElement("Item 2");
    model.addElement("Item 3");

    one.setModel(model);
    two.setModel(model);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:45:33.273

Write a decorator for your `ComboBoxModel`. The decorator should manage the `selectedItem` property, while everything else is managed by the delegate.

You would then have 1 original model, and place different decorators on the comboboxes:

```
DefaultComboBoxModel original = ...;

DecoratedModel firstModel = new DecoratedModel( original );
JComboBox firstCombo = new JComboBox( firstModel );

DecoratedModel secondModel = new DecoratedModel( original );
JComboBox secondCombo = new JComboBox( secondModel ); 
```

Changes to the data can then be performed on the `original` model, which will adjust the data in all comboboxes simultaneously

Note: make sure listeners attached to the decorator receive events with the decorated model as source, and not with the delegate model. This is a common mistake when writing a decorator

**Edit**

An alternative is to have a base data structure which is not a `ComboBoxModel` and create an implementation of `ComboBoxModel` which uses that data structure. You can then create different combobox model instances which all share the same data structure.

# .net - 如何基于 2 个具有透明区域的 png 的合成创建图像

> ID：13455772
> 
> 赞同：0
> 
> 时间：2012-11-19T14:24:07.120
> 
> 标签：.net, graphics

我有 3 张图片。

1.  绿色背景.png
2.  红圈.png
3.  蓝色圆圈.png

都是80x60的图片

红色和蓝色圆圈出现在该区域内的不同位置。

我试图通过首先加载背景，然后是红色圆圈，最后是蓝色圆圈来生成合成图像。

然而，在资源管理器中生成的 Results.png 图像显示为全黑，并且在 Windows 照片查看器中打开时，它似乎是完全透明的。

```
 Dim Background = Image.FromFile("GreenBackground.png", True)
    Dim RedCircle = Image.FromFile("RedCircle.png", True)
    Dim BlueCircle = Image.FromFile("BlueCircle.png", True)

    Dim Canvas = Graphics.FromImage(Background)
    Canvas.DrawImage(RedCircle, New Point(0, 0))
    Canvas.DrawImage(BlueCircle, New Point(0, 0))
    Dim Result As New Bitmap(Background.Width, Background.Height, Canvas)
    Result.Save("Result.png", System.Drawing.Imaging.ImageFormat.Png) 
```

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:46:55.103

您使用的 Bitmap 构造函数仅使用传递的图形对象的 DPI：

> 指定新位图分辨率的 Graphics 对象。[MSDN 参考](http://msdn.microsoft.com/en-us/library/byca5y1f.aspx)

所以基本上你现在正在创建一个新的空位图。您的图形对象已设置为修改背景图像，因此您需要做的就是：

`Background.Save("Result.png", System.Drawing.Imaging.ImageFormat.Png)` 在修改结束时。

LinqPad 示例：

```
Sub Main
    Dim image = System.Drawing.Image.FromFile("y.png", true)
    Dim overlay = System.Drawing.Image.FromFile("x.png", true)
    Dim g = System.Drawing.Graphics.FromImage(image)
    g.DrawImage(overlay, new System.Drawing.Point(0,0))
    image.Save("result.png", System.Drawing.Imaging.ImageFormat.Png)
End Sub 
```

# python - 像在 Django 中一样为 Flask 制作 urls.py 文件

> ID：13455773
> 
> 赞同：4
> 
> 时间：2012-11-19T14:24:08.773
> 
> 标签：python, django, flask, url-pattern

也许有人可以帮助/解释我，如何`urls.py`像在 Django 中一样为 Flask 创建文件？

*   `main.py`- 主项目文件。它仅包括应用程序运行器 ( `app.run()`)。
*   `urls.py`位于同一目录中，需要提供来自`views.py`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:30:19.113

您可以按照[Flask 文档中的说明](http://flask.pocoo.org/docs/patterns/lazyloading/)执行此操作，基本上是通过调用`app.add_url_rule`来设置路由而不是使用装饰器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T08:57:12.607

除了 Flask 文档之外，还可以这样解决：

创建 Flask 应用程序时，加载您的“urls.py”文件

```
app.register_blueprint(apps.someapp.urls.mod) 
```

然后构造 urls.py 如下：

```
from flask import Blueprint
from apps.someapp.views import SomeView

# set method as endpoint
view = SomeView.as_view('someview')

# Create the blueprint for this app
mod = Blueprint("payment_methods", __name__, url_prefix="/someapp/", template_folder="templates")

# Add the view as route; methods like GET, POST, PUT will automatically route to class methods with parameters
mod.add_url_rule('<int:id>/', view_func=view) 
```

# c# - 从 ObjectContext 转换 DBContext

> ID：13455777
> 
> 赞同：5
> 
> 时间：2012-11-19T14:24:24.577
> 
> 标签：c#, entity-framework, .net-4.5, entity-framework-5

我在 EntityFramework 4.0 (ObjectContext) 中使用这个函数。现在我使用的是 EF 5.0。我的问题是`DefaultContainerName`，`GetObjectByKey`找不到方法`DBContext`

```
public static T GetObjectByID<T>(int ID, string tableName = "")
        {
            var localDB = new LocalBaseEntities();

            string entitySetName = string.Format("{0}.{1}", localDB.DefaultContainerName, string.IsNullOrEmpty(tableName) ? typeof(T).Name + "s" : tableName);

            try
            {
                IEnumerable<KeyValuePair<string, object>> entityKeyValues =
                new KeyValuePair<string, object>[] { new KeyValuePair<string, object>(typeof(T).Name + "ID", ID) };
                EntityKey key = new System.Data.EntityKey(entitySetName, entityKeyValues);            
                return (T)localDB.GetObjectByKey(key);
            }
            catch (Exception)
            { }            

            return default(T);
        } 
```

如何转换这个函数？

或者如何制作这样的功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T14:27:44.053

`DbContext`是一个适配器（包装器）`ObjectContext`。它还显式地实现了 interface `IObjectContextAdapter`。将您的 dbContext 转换为此接口类型，并且包装的`ObjectContext`实例将可用：

```
ObjectContext context = ((IObjectContextAdapter)dbContext).ObjectContext; 
```

*顺便说一句*，新类`DbSet<T>`的方法`Find`也可以通过键搜索实体。所以，看起来你所有的代码现在看起来像

```
T entity = dbContext.Set<T>().Find(id); 
```

# php - php项目在windows上工作但不在linux上

> ID：13455780
> 
> 赞同：-1
> 
> 时间：2012-11-19T14:24:39.243
> 
> 标签：php, linux, netbeans, centos, virtualbox

我正在尝试使用虚拟盒和 Cent OS 服务器在 linux 上运行一个 php 项目，但不是整个页面都在回显！！该项目正在使用 wamp 服务器成功地在 Windows 上运行！我之前遇到过同样的问题，这是一个权限问题，这两个命令行很有帮助：

```
chmod -R a+rw *
chown -R apche:apache * 
```

但这一次它不起作用，它让我发疯！有什么问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:31:06.040

您是否`DIRECTORY_SEPARATOR`在应用程序中使用了常量作为路径？因为在 Linux 中，路径分隔符是`/`，在 Windows 中，它是`\`or `/`，它可能会破坏您的应用程序。

# php - 检查是否在成功页面上购买了特定产品

> ID：13455782
> 
> 赞同：1
> 
> 时间：2012-11-19T14:24:41.190
> 
> 标签：php, magento

在结帐后的成功页面（success.phtml）上，我想仅在购买了某个产品 ID 时才运行脚本。这可能吗？

我正在使用 Magento 1.4.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:01:17.863

尝试将此添加到 Success.phtml

```
$order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
$items = $order->getItemsCollection();

$sku = $ids = array();
foreach($items as $item){
  //$sku[] = $item->getSku();
  $p_ids[] = $item->getProductId();
}

$p_id = 16;
if(in_array($p_id, $p_ids)){
   //run script
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:04:41.460

这种逻辑可能适用于 success.phtml 页面。

$

```
 if($this->getOrderId()) { 
    $found      = false;
    $skuToFind = 'abc';
     $order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
     $items = $order->getAllItems();
    foreach ($items as $i => $item) {
    if($item->getSku() == $skuToFind) {
        $found = true; break;
    }
}
if($found) { echo "Product Found"; } else { echo "No Found"; } 
```

?>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:38:00.920

好吧，您只需要找到购物车变量。我不确定确切的变量，但回显 $_SESSION 会告诉你它们在哪里。查看以下示例代码：

```
if(in_array('2324242', $_SESSION['product_ids'])
{//in this case 2324242 is the product ID you are looking for

//Require_once ('script');
//Or redirect to script.php

} 
```

# asp.net - 下载后网页表单无响应

> ID：13455783
> 
> 赞同：1
> 
> 时间：2012-11-19T14:24:42.953
> 
> 标签：asp.net, browser, download

我在 ASP.NET (2.0) 中工作，我们有一个页面，用户可以在其中选择和下载一系列文件作为 zip。通过使用 DotNetZip 库（这可能与问题无关，但为了完整性而包含在内），我让这个工作没有撤消困难。

在用户检查他们想要下载的文件之后，页面会进行回发，并且在按钮单击事件处理程序中，我使用以下代码：

```
 Response.Clear();
    Response.BufferOutput = false; // false = stream immediately
    Response.ContentType = "application/zip";
    Response.AddHeader("content-disposition", "filename=FileRequest.zip");

    using (ZipFile zip = new ZipFile())
    {
        zip.AddFile(MapPath("/datafiles/fileToZip.pdf"), "");
        zip.Save(Response.OutputStream);
    }
    Response.Close(); 
```

这一切似乎都很好。用户点击按钮，弹出下载窗口，用户下载zip。一切都很好...

...直到他们决定要在页面上做其他事情。表单中的按钮不再响应。例如，如果我再次单击下载按钮，它什么也不做。如果我重新加载页面，我可以重复这个行为......它工作一次，然后什么都不做。

我不明白为什么浏览器不发送新请求。它不是“旋转”或以其他方式忙碌。我认为这可能是一个浏览器问题，但我在 IE 和 Firefox 中都重复了它，所以这似乎是我不理解的东西。奇怪的是，只有表单提交元素似乎没有响应。Javascript 仍然有效，常规链接也是如此。

那么为什么会发生这种情况，我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:32:41.327

问题可能在于您返回；

```
 Response.ContentType = "application/zip"; 
```

一旦发送（连同实际内容），浏览器就会认为它无事可做（我相信）。

您可能应该创建一个专门用于下载文件的新窗口，方法是将文件选择保存在会话参数（或等效参数）中并打开一个包含下载代码的弹出窗口。

这将使父页面处于合适的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T09:50:12.850

Content-disposition 标头[似乎是一个不鼓励的解决方案](https://stackoverflow.com/questions/1012437/uses-of-content-disposition-in-an-http-response-header)。*但是，如果您使用标准重定向*到 zip 文件，则会出现 ASP.NET 表单没有响应的相同效果。

[我在“ Response.Redirect to new window](https://stackoverflow.com/questions/104601/response-redirect-to-new-window) ”问答中使用 Tančev Saša 的代码解决了非常类似的问题（服务器返回 *.csv 文件以供下载） ，效果很好。也许它可能会在某些浏览器中产生一些弹出警告，但我认为这是在下载站点中经常这样做的方式。

# vb.net - 带有基础认证的asp.net Webservice，如何配置用户名和密码

> ID：13455787
> 
> 赞同：0
> 
> 时间：2012-11-19T14:25:01.253
> 
> 标签：vb.net, wcf, web-services, basic-authentication

我们在[http://www.domain.com/service.svc](http://www.domain.com/service.svc)上运行了 WCF-REST 服务。一家外部公司正在调用此 Web 服务，由于可以传输敏感数据，我们希望该服务在 SSL 下运行并使用基本身份验证。

我们已经运行了 SSL，但我们遇到了基本身份验证的问题。web.config 看起来像这样；

```
<behaviors>
  <endpointBehaviors>
    <behavior name="REST">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>

<webHttpBinding>
    <binding name="webBindingMobile">
      <security mode="Transport">
        <transport clientCredentialType="Basic" />
      </security>
    </binding>
  </webHttpBinding>

    <services>
      <service name="Website.Mobile.Webservice">
        <endpoint address="" behaviorConfiguration="REST" binding="webHttpBinding" contract="Website.PaymentProxy.Services.Proxy.IProxyClientInterface" bindingConfiguration="webBindingMobile" />
      </service>
      <service name="Website.Mobile.ShoppingCartService">            
        <endpoint address="" behaviorConfiguration="REST" binding="webHttpBinding" contract="Website.PaymentProxy.Services.Proxy.Cart.Interfaces.IShoppingCartService" bindingConfiguration="webBindingMobile" />
      </service>
    </services> 
```

我们想要的只是存储在 web.config 中的简单用户名和密码（最好）。然后，调用我们的网络服务的公司应该在他们的代码中输入这些凭据，以便能够调用我们的服务。我们该如何配置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:33:53.947

可能这可能会对您有所帮助

[https://github.com/mikeobrien/WcfRestContrib/wiki](https://github.com/mikeobrien/WcfRestContrib/wiki)

我相信你也经历过这个，你可能对基于角色的身份验证感兴趣 [http://msdn.microsoft.com/en-us/library/ff647503.aspx](http://msdn.microsoft.com/en-us/library/ff647503.aspx)

# jquery-mobile - jQuery mobile - 本地存储准备好后显示页面

> ID：13455789
> 
> 赞同：0
> 
> 时间：2012-11-19T14:25:14.887
> 
> 标签：jquery-mobile, local-storage

我正在开发一个基于 jqm 和本地存储的移动应用程序

你可以在这里查看：

```
clients/app2u/Apps/6/home.html
clients/app2u/Apps/6/gallery.html
clients/app2u/Apps/6/categories.html 
```

ETC'

本地存储包含每个页面的数据（例如：“app2u_app6_home”）和一个通用选项卡数据（“app2u_app6_Tabs”）

问题是，在第一次访问页面时，页面在数据完全加载之前加载，只有当你刷新页面时，页面才会包含数据。

如何强制页面仅在本地存储准备好后显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:33:19.360

注意：我假设您指的是您网站上的`getPageData`功能。`functions.js`

您的问题是`$.post`调用是异步的（与对 的调用不同`localStorage.getItem`），因此您的`getPageData`函数无法立即返回。

相反，您应该重构它以接受回调函数：

```
function getPageData(page,wait,extra_data,callback) {
    if (localStorage.getItem(unique_param+page)) {
        callback(localStorage.getItem(unique_param+page, extra_data));
    } else {
        if (typeof(extra_data) == 'undefined') {extra_data = '';}
        $.post(server_path + 'index.php?module=API&pname=' + page + '&pmode=empg&application_id=' + application_id + extra_data,
                function(response) {
                    localStorage.setItem(unique_param+page,JSON.stringify(response));
                    callback(response);
                }
        ,'json'
        );
    }
} 
```

使用此方法，您的代码将始终等待对*本地*存储的调用或对服务器的调用完成

# php - Facebook getloginurl redirect_uri 与变量

> ID：13455791
> 
> 赞同：0
> 
> 时间：2012-11-19T14:25:17.870
> 
> 标签：php, facebook

我对 facebook redirect_uri 有疑问。

```
$params = array(
  'scope' => 'email,user_birthday,publish_actions',
  'redirect_uri' => 'https://apps.facebook.com/appname?kick_id=58'
);

$loginUrl = $facebook->getLoginUrl($params); 
```

这是一个问题，在身份验证页面 facebook 重定向到[https://apps.facebook.com/appname](https://apps.facebook.com/appname)而不是[https://apps.facebook.com/appname?kick_id=58](https://apps.facebook.com/appname?kick_id=58) 如何传递该变量 ?kick_id=58 ？

PS我试过和/?kick_id=58，但什么也没发生。你知道如何解决这样的事情吗？

# javascript - IE 中“显示友好的 HTTP 错误消息”选项的目的是什么

> ID：13455792
> 
> 赞同：1
> 
> 时间：2012-11-19T14:25:23.743
> 
> 标签：javascript, jsp

在我的 web.xml 中，使用 404 错误代码创建了错误页面标签来重定向页面。在 IE 中，如果取消选中“显示友好的 HTTP 错误消息”。然后只有它可以正常工作并显示重定向页面。如果启用该选项，则会出现“页面不显示”错误。任何人告诉我 IE Internet 选项中“显示友好的 HTTP 错误消息”选项的用途。（工具 -> Internet 选项 -> 高级 -> 浏览（显示友好的 HTTP 错误消息）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:32:17.207

IE 实现了这个功能，因为大多数用户不知道 404 是什么意思，这只会让他们更加困惑。不幸的是，对于开发人员来说，这意味着有用的信息或更好的实现会被用户屏蔽。[杰夫·阿特伍德（Jeff Atwood](http://www.codinghorror.com/blog/2007/03/creating-user-friendly-404-pages.html)）有一篇不错的文章，大约 404 页。他的建议之一是：

> 您必须使您的自定义 404 页面大于 512 字节，否则 IE 将假定它是标准的 Web 服务器 404 消息并用自己的友好版本替换它。

所以试着让你的 404 页面超过 512 字节，然后看看它是否会显示给用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:34:30.247

HTTP 响应由 HTTP 标头和 HTTP 正文组成。第一个标头包含 HTTP 响应代码，它是一组已定义的数字代码，用于传达某种含义。一些状态码让客户端做一些特定的事情，而另一些则没有。任何响应都可能另外包含一个 HTTP 正文，通常是实际页面。

302 响应代码指示客户端尝试获取另一个 URL（也包含在标头中）。
404 响应表明所请求的页面不存在。它的意思是“错误”。
有关更多信息，请参见[http://en.wikipedia.org/wiki/Http_status_codes](http://en.wikipedia.org/wiki/Http_status_codes)。

在任何一种情况下，如果响应还包含 HTTP 正文，浏览器可能会或可能不会以某种方式使用它。由它决定。通常，302 重定向响应不包含正文，而 404 错误响应包含一些 HTML 页面，说明“抱歉，出了点问题”。通常，这只是标准的丑陋默认 Apache 错误文档。

如果*关闭*IE 选项，IE 将简单地显示从服务器接收到的错误页面。如果该选项打开，它会在收到似乎无用的 404 错误时显示自己漂亮的“有用”错误页面。

现在是重要的部分：
**不要使用 404 页面“重定向”！它们的意思是“错误”，而不是“重定向”。**使用 302 响应和 HTTP`Location`标头来重定向，而不是 HTML 元标记或 Javascript hack。

# google-maps-api-3 - 谷歌地图交通预测 API V3

> ID：13455793
> 
> 赞同：1
> 
> 时间：2012-11-19T14:25:25.113
> 
> 标签：google-maps-api-3

有没有办法使用地图 api 实现链接中描述的谷歌流量预测？ [地图交通预测](http://lifehacker.com/381077/google-maps-predicts-traffic-conditions-for-your-travel-time)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-22T07:37:14.530

问题和接受的答案来自 2012 年。

自 2015 年 10 月以来，*可以获得*未来旅行的路线和预计旅行时间。

您可以提供`departure_time`您的路线计划请求。请注意，此功能仅在您使用 API 密钥连接时有效。

它基于历史数据，当旅行在不久的将来，它使用实时交通数据。

[https://developers.google.com/maps/documentation/directions/intro#RequestParameters](https://developers.google.com/maps/documentation/directions/intro#RequestParameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:39:43.920

不，这是 API 文档：[https ://developers.google.com/maps/documentation/javascript/layers#TrafficLayer](https://developers.google.com/maps/documentation/javascript/layers#TrafficLayer)

流量预测不是 API 的一部分。它包含在 Google 地图*中*（他们自己的地图，而不是通过 API 提供的其他地图），因此可以使用未记录的调用来获取数据。但他们不喜欢人们这样做，这可能会产生意想不到的后果。

# windows - 批处理文件调用在for循环中转义重定向

> ID：13455796
> 
> 赞同：1
> 
> 时间：2012-11-19T14:25:27.687
> 
> 标签：windows, batch-file, escaping

我正在尝试从批处理文件中调用命令，该批处理文件正在从文件中读取行。
这工作正常，除非该行包含重定向字符`>`。

有没有办法告诉`call`转义这个字符，或者在 for 循环的内容中替换它？

我看过`setlocal enabledelayedexpansion`and （当调用更新为使用`!`它仍然不起作用）。

```
set /p status=<%tmp_file%

for /f "delims=*" %%a in (%tmp_file%) do (
  echo "%%a"
  call check.bat "%%a"
  echo.

  if not "%errorlevel%" == "0" do exit /b 1
) 
```

这会产生以下输出（当`check.bat`echo's时`%1`）

```
"a"
"a"

"b -> b"
"b -" 
```

我尝试在其中替换`>`，`%%a`但我不完全确定如何实现，每次尝试时，它都会产生一个空字符串，即

```
set line=%a:^>=¬% 
```

**编辑 1**更多说明（如果设置为变量，然后使用该变量，
似乎只有这种情况）？：`%1`

`check.bat`：

```
 set rawinput=%1
 set input=%~1

 echo %1
 echo "%rawinput%"
 echo "%input%"
 echo. 
```

这会产生以下输出，尽管我不太确定为什么设置`%1`变量会导致它破坏值？

```
 "a"
 "a"
 ""a""
 "a"

 "b -> b"
 "b -> b"
 "b -" 
```

有趣`b -> b`的是只输出2次，`echo "%rawinput%"`根本没有显示。两者`echo "%input%"`和`echo "%rawinput%"`都在写入一个名为`b`.

这意味着`check.bat`for`b -> b`必须解释为：

```
 echo "b -> b"
 echo ""b -> b""
 echo "b -> b"        REM - this is what 'should' be happening, however does appear to be the case, as it writes '' to a file named b
 echo. 
```

如果有人可以阐明为什么`echo "b -> b"`批处理文件中的行为似乎没有表现，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:38:14.753

不要尝试使用`call by value`，这对于批处理几乎是不可能的。
只需使用值设置一个新变量，然后使用变量名称。

```
for /f "delims=" %%a in (%tmp_file%) do (
  set "line=%%a"
  call :check
)
exit /b

:check
setlocal EnableDelayedExpansion
echo(!line!
endlocal
exit /b 
```

**编辑：你的问题**

您尝试`"b -> b"`使用
`call check.bat "%%a"`this 调用内容的函数将扩展为
`call check.bat ""b -> b""`，这就是问题所在！
由于`>`重定向字符现在在引号之外，它会将 check.bat 的输出重定向到文件`b`。
使用调用时可​​以转义特殊字符（引号之外），但这有点高级并且有很多问题。

所以，我再次推荐，不要直接在通话中使用内容。
您可以使用参考，例如

```
for /f "delims=" %%a in (%tmp_file%) do (
  set "line=%%a"
  call :check line
) 
```

`check.bat`

```
setlocal EnableDelayedExpansion
set "var=!%1!"
echo(!var! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:45:44.720

您修改后的 check.bat 中有多个问题

引号是一个状态机，因为第一个引号将引用语义打开，第二个关闭，第三个打开等。未引用（和未转义）`>`被解释为重定向输出的指令。

我对 check.bat 进行了大量修改，加入了一堆 ECHO 语句来提供正在发生的事情的叙述。您的原始代码作为所有大写字母嵌入我的版本中。

这是我修改后的版本的输出，我希望能解释为什么你会得到你的结果。在您尝试了解我修改后的 check.bat 如何产生此输出之前，我希望您阅读此输出。

```
"a"
---------------------------------------------
Executing: SET RAWINPUT=%1  which expands to  SET RAWINPUT="a"
Here is the result:
rawinput="a"

Executing: SET INPUT=%~1  which expands to  SET INPUT=a
Here is the result:
input=a

Executing: ECHO %1  which expands to  ECHO "a"
"a"

Executing: ECHO "%RAWINIPUT%"  which expands to  ECHO ""a""
""a""

Executing: ECHO "%INPUT%"  which expands to  ECHO "a"
"a"

"b -> b"
---------------------------------------------
Executing: SET RAWINPUT=%1  which expands to  SET RAWINPUT="b -> b"
Here is the result:
rawinput="b -> b"

Executing: SET INPUT=%~1  which expands to  SET INPUT=b -> b
Here is the result:
input=b -

Also created a file named "b" because the output of the command
is redirected. The file is empty because SET has no output.

 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of C:\Users\Public\utils

11/20/2012  09:30 AM                 0 b
               1 File(s)              0 bytes
               0 Dir(s)  316,104,765,440 bytes free

Executing: ECHO %1  which expands to  ECHO "b -> b"
"b -> b"

Executing: ECHO "%RAWINIPUT%"  which expands to  ECHO ""b -> b""

There is no screen output because output was redirected to file "b"
Here are the contents of "b":
""b -

Executing: ECHO "%INPUT%"  which expands to  ECHO "b -"
"b -" 
```

这是我修改后的 check.bat，它产生了上面的输出。

```
setlocal enableDelayedExpansion
set value=%1
set "unquotedValue=%~1"

echo ---------------------------------------------
echo Executing: SET RAWINPUT=%%1  which expands to  SET RAWINPUT=!value!
SET RAWINPUT=%1
echo Here is the result:
set rawinput
echo.

echo Executing: SET INPUT=%%~1  which expands to  SET INPUT=!unquotedValue!
SET INPUT=%~1
echo Here is the result:
set input
if exist b (
  echo.
  echo Also created a file named "b" because the output of the command
  echo is redirected. The file is empty because SET has no output.
  echo.
  dir b
  del b
)
echo.

echo Executing: ECHO %%1  which expands to  ECHO !value!
ECHO %1
echo.

echo Executing: ECHO "%%RAWINIPUT%%"  which expands to  ECHO "!rawinput!"
ECHO "%RAWINPUT%"
if exist b (
  echo.
  echo There is no screen output because output was redirected to file "b"
  echo Here are the contents of "b":
  type b
  del b
)
echo.

echo Executing: ECHO "%%INPUT%%"  which expands to  ECHO "!input!"
ECHO "%INPUT%"
echo. 
```

如果您不在 check.bat 中添加任何引号，则可以通过变量获得所需的结果

```
set rawinput=%1
echo %rawinput% 
```

但是，如果您的原始文本文件包含自己的引号，那么一切都会崩溃。

这就是 jeb 建议将每一行存储在主程序中的变量中然后将变量名称传递给 check.bat 的原因。在 check.bat 中，您可以使用延迟扩展来安全地处理任何值，而不必担心引号或转义。

# regex - 如何删除不以特定子字符串开头或结尾的字符串？

> ID：13455800
> 
> 赞同：3
> 
> 时间：2012-11-19T14:26:03.693
> 
> 标签：regex, perl

不幸的是，我不是正则表达式专家，所以我需要一点帮助。

我正在寻找解决方案如何 grep 字符串数组以获取两个不以特定子字符串开头（1）或结尾（2）的字符串列表。

假设我们有一个数组，其中的字符串符合以下规则：

> [speakerId]-[短语]-[id].txt

IE

> 10-phraseone-10.txt 11-phraseone-3.txt 1-phraseone-2.txt 2-phraseone-1.txt 3-phraseone-1.txt 4-phraseone-1.txt 5-phraseone-3.txt 6 -phraseone-2.txt 7-phraseone-2.txt 8-phraseone-10.txt 9-phraseone-2.txt 10-phrasetwo-1.txt 11-phrasetwo-1.txt 1-phrasetwo-1.txt 2-短语二-1.txt 3-短语二-1.txt 4-短语二-1.txt 5-短语二-1.txt 6-短语二-3.txt 7-短语二-10.txt 8-短语二-1.txt 9-短语二-1.txt 10-phrasethree-10.txt 11-phrasethree-3.txt 1-phrasethree-1.txt 2-phrasethree-11.txt 3-phrasethree-1.txt 4-phrasethree-3.txt 5-phrasethree- 1.txt 6-phrasethree-3.txt 7-phrasethree-1.txt 8-phrasethree-1.txt 9-phrasethree-1.txt

让我们引入变量：

*   `$speakerId`
*   `$phrase`
*   `$id1`,`$id2`

我想 grep 一个列表并获取一个数组：

1.  包含特定的元素，`$phrase`但我们排除同时以特定`$speakerId`的 AND 以指定的 id 之一结尾的字符串（例如`$id1`or `$id2`）

2.  具有特定但最后不包含特定 id 之一的元素`$speakerId`（`$phrase`警告：记住不要排除 10 或 11`$id=1`等）

也许有人可以使用以下代码来编写解决方案：

```
@AllEntries = readdir(INPUTDIR);

@Result1 = grep(/blablablahere/, @AllEntries);

@Result2 = grep(/anotherblablabla/, @AllEntries);

closedir(INPUTDIR); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:41:50.593

假设一个基本模式来匹配你的例子：

```
(?:^|\b)(\d+)-(\w+)-(?!1|2)(\d+)\.txt(?:\b|$) 
```

分解为：

```
(?:^|\b)    # starts with a new line or a word delimeter
(\d+)-      # speakerid and a hyphen
(\w+)-      # phrase and a hyphen
(\d+)       # id
\.txt       # file extension
(?:\b|$)    # end of line or word delimeter 
```

您可以使用否定前瞻断言排除。例如，要包含所有不包含该短语的匹配`phrasetwo`项，您可以修改上述表达式以使用否定前瞻：

```
(?:^|\b)(\d+)-(?!phrasetwo)(\w+)-(\d+)\.txt(?:\b|$) 
```

请注意我如何包含`(?!phrasetwo)`. 或者，您可以`phrasethree`使用后视而不是前瞻来查找所有以偶数结尾的条目：

```
(?:^|\b)(\d+)-phrasethree-(\d+)(?<![13579])\.txt(?:\b|$) 
```

`(?<![13579])`只需确保 ID 的最后一个数字落在偶数上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:53:43.250

我喜欢使用负前瞻和-behinds 的纯正则表达式的方法。但是，它有点难以阅读。也许这样的代码可能更不言自明。它使用在某些情况下像英语一样可读的标准 perl 习语：

```
my @all_entries      = readdir(...);
my @matching_entries = ();

foreach my $entry (@all_entries) {

    # split file name
    next unless /^(\d+)-(.*?)-(\d+).txt$/;
    my ($sid, $phrase, $id) = ($1, $2, $3);

    # filter
    next unless $sid eq "foo";
    next unless $id == 42 or $phrase eq "bar";
    # more readable filter rules

    # match
    push @matching_entries, $entry;
}

# do something with @matching_entries 
```

如果您真的想在`grep`列表转换中表达一些复杂的东西，您可以编写如下代码：

```
my @matching_entries = grep {

    /^(\d)-(.*?)-(\d+).txt$/
    and $1 eq "foo"
    and ($3 == 42 or $phrase eq "bar")
    # and so on

} readdir(...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T06:24:38.433

听起来有点像您在描述查询功能。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use Data::Dumper;

my ( $set_a, $set_b ) = query( 2, 'phrasethree', [ 1, 3 ] );

print Dumper( { a => $set_a, b => $set_b } );

# a) fetch elements which
#    1\. match $phrase
#    2\. exclude $speakerId
#    3\. match @ids
# b) fetch elements which
#    1\. match $phrase
#    2\. match $speakerId
#    3\. exclude @ids
sub query {
    my ( $speakerId, $passPhrase, $id_ra ) = @_;

    my %has_id = map { ( $_ => 0 ) } @{$id_ra};

    my ( @a, @b );

    while ( my $filename = glob '*.txt' ) {

        if ( $filename =~ m{\A ( \d+ )-( .+? )-( \d+ ) [.] txt \z}xms ) {

            my ( $_speakerId, $_passPhrase, $_id ) = ( $1, $2, $3 );

            if ( $_passPhrase eq $passPhrase ) {

                if ( $_speakerId ne $speakerId
                    && exists $has_id{$_id} )
                {
                    push @a, $filename;
                }

                if ( $_speakerId eq $speakerId
                    && !exists $has_id{$_id} )
                {
                    push @b, $filename;
                }
            }
        }
    }

    return ( \@a, \@b );
} 
```

# c# - 在 WPF / Ninject 中访问单例事件聚合器

> ID：13455801
> 
> 赞同：0
> 
> 时间：2012-11-19T14:26:08.143
> 
> 标签：c#, wpf, mvvm, ninject, caliburn

我们正在使用 WPF/Caliburn Micro 和 Ninject 并有一个引导程序调用它：-

```
Bind<IEventAggregator>().To<EventAggregator>().InSingletonScope(); 
```

我的理解是，每次实例化一个对象时，这将被注入到构造函数参数列表中，但在某些情况下构造函数必须是无参数的。当我们可以在构造函数中没有参数时，我们如何访问 EventAggregator？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:30:22.127

看看[服务定位器模式](http://en.wikipedia.org/wiki/Service_locator_pattern)。

**更新**

回应您的评论： `InSingeltonScope()`意味着 Ninject 将只创建一个实例，并且**每当它被要求**提供一个实例时，`IEventAggregator`它都会返回该实例。你仍然需要一个机制来*请求*它；在注入的情况下，构造函数要求注入它。如果您的构造函数是无参数的，那么服务定位器就是您*请求*实例的方式。

**更新 2**

以下是一些您可能会觉得有用的链接：

[http://stefanoricciardi.com/2009/09/25/service-locator-pattern-in-csharpa-simple-example/](http://stefanoricciardi.com/2009/09/25/service-locator-pattern-in-csharpa-simple-example/)

[http://blog.longle.net/2012/02/15/wrapping-the-ninject-kernel-with-servicelocator/](http://blog.longle.net/2012/02/15/wrapping-the-ninject-kernel-with-servicelocator/)

# java - 如何在堆积条形图中设置背景所有部分的颜色

> ID：13455802
> 
> 赞同：2
> 
> 时间：2012-11-19T14:26:08.817
> 
> 标签：java, jfreechart

以下是英格兰和苏格兰之间拔河比赛当前状态的代码：

```
public TugOfWar(String s) {
    super(s);

    // data set
    DefaultKeyedValues2DDataset dataset = new DefaultKeyedValues2DDataset();
    dataset.addValue(0.2, "England", "");
    dataset.addValue(0.8, "Scotland", "");

    JFreeChart chart = ChartFactory.createStackedBarChart("tug-of-war",
        "", "", dataset, PlotOrientation.HORIZONTAL, true, false, false);
    CategoryPlot plot = chart.getCategoryPlot();

    // customize axis
    SymbolAxis axis = new SymbolAxis("", new String[]{
            "England", "draw", "Scotland"});
    axis.setRange(0, 2d);
    plot.setRangeAxis(axis);

    // customize renderer
    BarRenderer renderer = new StackedBarRenderer();
    renderer.setBase(0.8);
    renderer.setMinimumBarLength(0);
    renderer.setMaximumBarWidth(0.5);
    renderer.setItemMargin(0.0);
    renderer.setDrawBarOutline(true);
    renderer.setShadowVisible(true);
    renderer.setBarPainter(new StandardBarPainter());
    plot.setRenderer(renderer);

    // customize background
    plot.setBackgroundPaint(Color.WHITE);
    plot.setDomainGridlinePaint(Color.lightGray);
    plot.setRangeGridlinePaint(Color.lightGray);
    plot.setDomainCrosshairVisible(true);
    plot.setRangeCrosshairVisible(true);

    ChartPanel chartpanel = new ChartPanel(chart);
    chartpanel.setPreferredSize(new Dimension(600, 270));
    setContentPane(chartpanel);
}

public static void main(String args[]) {
    TugOfWar tugOfWar = new TugOfWar("Tug of war");
    tugOfWar.pack();
    RefineryUtilities.centerFrameOnScreen(tugOfWar);
    tugOfWar.setVisible(true);
} 
```

这导致我们这样做：

![在此处输入图像描述](../Images/565eab93651078a972a7310f186cd5e4.png)

如您所见，绘图背景的中心已设置为*白色*（正确），但左右边距仍为*浅灰色*。如何设置背景外部的颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:31:37.093

交替背景是 的一项功能`SymbolAxis`，您可以禁用该功能。

```
axis.setGridBandsVisible(false); 
```

![在此处输入图像描述](../Images/5bea9c67166c2cfa30bcbdfc3ec9c929.png)

# r - 调试 R 中的意外错误——如何找到错误发生的位置？

> ID：13455808
> 
> 赞同：16
> 
> 时间：2012-11-19T14:26:37.343
> 
> 标签：r, error-handling, r-faq

有时 R 会抛出错误，例如

> if (ncol(x) != 2) { 中的错误：参数长度为零

当我没有编写这样的代码时，没有其他信息。有没有一种通用的方法来查找哪个包中的哪个函数导致错误？

由于大多数软件包都是压缩的，因此 grep 并非易事`/usr/lib/R/library`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-19T14:39:59.680

您可以使用它`traceback()`来定位最后一个错误发生的位置。通常它会将您指向您在函数中进行的调用。然后我通常会`browser()`在那个时候再次运行该函数，看看出了什么问题。

例如，这里有两个函数：

```
f2 <- function(x)
{
  if (x==1) "foo"
}

f <- function(x)
{
  f2(x)
} 
```

请注意，`f2()`假设参数为 length `1`。我们可以滥用`f`：

```
> f(NULL)
Error in if (x == 1) "foo" : argument is of length zero 
```

现在我们可以使用它`traceback()`来定位问题所在：

```
> traceback()
2: f2(x) at #3
1: f(NULL) 
```

数字表示我们在嵌套函数中的深度。因此，我们看到`f`调用`f2`并在 line 处给出错误`3`。很清楚。我们现在可以在调用之前重新分配放置`f`以检查它的输入。只是让你停止执行一个函数并在它的环境中查看。类似于但您不必执行每一行，直到您知道出现问题为止。`browser``f2``browser()``debug``debugonce`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-19T14:51:09.367

只是为了添加@SachaEpskamp 已经建议的内容，设置`options(error=recover)`并且`options(show.error.locations=TRUE)`在调试不熟悉的代码时非常有用。第一个导致 R 在出错时启动调试会话，让您可以选择在调用堆栈中的任何位置调用浏览器，直到出现该错误。第二个选项将告诉 R 在错误中包含源代码行号。

# jquery - 在 document.ready 中声明的函数未定义？

> ID：13455811
> 
> 赞同：3
> 
> 时间：2012-11-19T14:26:44.650
> 
> 标签：jquery, function, jqgrid, scope

如果我在 document.ready 中声明一个函数，我会得到一个错误。像这样

```
$(document).ready(function(){
    function updateSizeOptions()
    {
        alert("updateSizeOptions");
    }

    var jGrid = $("#list_main");
    jGrid.jqGrid({
        url:'db.php?ajaxOp=getData',
            colModel:[
                $.extend(true,
                { name:'shape_id'
                  ,index:'shape_id'
                  ,edittype:'select'
                  ,formatter:'select'
                  ,editoptions: { onclick:"javascript:updateSizeOptions();" }
                }
                ,{}
            ]
        ....
}); 
```

它会给出错误：“ReferenceError: updateSizeOptions is not defined”。
但如果我将函数移到 document.ready 之外，一切正常。
像这样

```
function updateSizeOptions()
{
    console.debug("updateSizeOptions");
}

$(document).ready(function(){
    var jGrid = $("#list_main");
.... 
```

为什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T14:29:52.660

因为在 Javascript 中，在其他函数中声明的函数是*本地*引用，并且在其父函数范围之外是不可见的。如果你想让你的`updateSizeOptions`函数全局可访问，你需要在全局命名空间中为它分配一个引用，比如一个`window`属性：

```
window.updateSizeOptions = updateSizeOptions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:33:29.903

因为您在`updateSizeOptions`传递给的匿名函数中定义了该函数，所以除非您将其导出`$(document).ready`，`updateSizeOptions`否则它将仅在该匿名函数中可用。（即`window.updateSizeOptions = updateSizeOptions`）

在全局范围内定义的函数（或/和变量）实际上是在对象下定义的*，*`window`所以如果你在全局范围内定义函数并且你这样做了，`alert(window.updateSizeOptions)`你会看到它显示了一个函数。`window.updateSizeOptions == updateSizeOptions`将返回`true`。

但是，如果您在本地范围内定义它，您将看到`undefined`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:34:27.403

范围。当你在里面放一些东西`$(document).ready`时，代码只会在触发这个事件时执行，并且在事件内部声明的变量和函数等东西不存在于事件之外，除非全局设置。

当您这样做`javascript:updateSizeOptions();`时，它将在全局范围内查找在这种情况下不存在的函数，因此`undefined`.

# asp.net - 如何在css中设置控件属性？

> ID：13455813
> 
> 赞同：0
> 
> 时间：2012-11-19T14:26:47.363
> 
> 标签：asp.net, css, attributes

有没有办法在css中设置这种属性？所以我可以使用相同的日历，并且我的代码更有条理

```
<asp:Calendar ID="Calendar1" runat="server" Height="189px" CssClass="Calendar" 
                                ondayrender="CalendarRender"  TitleStyle-BackColor="#00718F"  TitleStyle-ForeColor="White" ShowGridLines="true" TitleStyle-BorderStyle="Solid" TitleStyle-BorderWidth="1px" TitleStyle-BorderColor="Black" SelectedDayStyle-ForeColor="#281dc9" SelectedDayStyle-Font-Bold="true" DayHeaderStyle-BorderColor="Black" DayHeaderStyle-BorderWidth="1px" DayHeaderStyle-BorderStyle="Solid"
                                onselectionchanged="Calendar1_SelectionChanged"></asp:Calendar> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:43:36.470

假设您正在谈论以下属性：

```
 TitleStyle-BackColor="#00718F"  TitleStyle-ForeColor="White" 
```

... ETC..

您最好的选择是将日历呈现到页面，检查其来源并查看它添加的样式。然后，您可以将其提取出来用于 CSS。

**更新**

此页面为您提供了一些选择器名称，以及它们[使用 CSS 控制的 ASP.Net 日历控件自定义主题格式](http://www.ezineasp.net/post/ASP-Net-Calendar-Control-Custom-Theme-Format-using-CSS.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T14:48:35.517

如果您想要更有条理，并且不希望您的项目将来变得像“意大利面条”，请使用 CSS 文件作为 css 属性。不要将此属性嵌入标题中，除非这是解决当前问题的唯一方法。这对您以及所有将与您的项目一起工作的人都是不利的。我遇到了很多遗留项目，浪费了太多时间来找出为什么某些 dom 元素的行为与我需要的不同。

只需`CssStyle`在您的 aspx 标记中指定属性，它就会映射到真正的 css 类。

并在 css 文件中添加该类的描述。

# wso2 - 如何在 Stratos 中将用户添加到租户？

> ID：13455820
> 
> 赞同：0
> 
> 时间：2012-11-19T14:27:06.207
> 
> 标签：wso2, wso2stratos

我想弄清楚如何在 Stratos 1.5.1 中将用户添加到租户

我成功地将用户添加到 ldap 中的用户。

我一直在使用

```
org.wso2.carbon.um.ws.api.WSUserStoreManager 
```

然后我使用方法 addUser

但是，我无法弄清楚如何将用户添加到域或租户特定的 ldap 条目。

```
Does anybody have  a proper example to do this? 
```

我应该使用这个网络服务吗？

```
org.wso2.carbon.um.ws.api.WSRealmTenantManager 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:59:45.493

如果您使用域 foo.com 创建（或注册）租户，则必须以 admin@foo.com 登录才能将用户添加到该租户的用户存储中。您说您已成功将用户添加到超级租户，在如果您应该使用管理员凭据（默认管理员、管理员）登录。现在将用户名与租户域 (admin@foo.com) 一起使用。

# c# - How do I get both the key and the value of a dictionary returned to ajax call

> ID：13455830
> 
> 赞同：0
> 
> 时间：2012-11-19T14:27:57.703
> 
> 标签：c#, ajax, dictionary

In my static web method I populate a dictionary with the Bankid and Bankname that I select from a database. The Id goes to the Key and the Value goes to the value part. SO there're approximately 20 key-value-pairs in my dictionary. Then I return this dictionary to my ajax call:

```
 $.ajax({
            type: 'POST',
            url: 'AJAX.aspx/Banks',
            data: '',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data)
            {
                $.each(data.d, function ()
                {
                    $("#testDiv").append(this.Key + " " +this.Value + "<br/>");
                });
            },
            error: function (x, e)
            {
                alert("The call to the server side failed. " + x.responseText);
            }
        }); 
```

In the above case I get 20 rows of undefined undefined. But if I remove both .Key and .Value from this I just get the value, so bank names. I need both the key and the value because I'm going to populate a select element with them-key for value and the value for inner html. In case you want to see my webmethod, here it is:

```
 [WebMethod]
public static Dictionary<string, string> Banks()
{
    Dictionary<string, string> dict = new Dictionary<string, string>();
    DatabaseProvider provider = GetDatabaseProvider();
    provider.AddOutParameter("V_CUR", OracleType.RefCursor);
    DataTable dt=provider.SelectDataTable("AGAPUS.PAYMENT.SP_BANKS", CommandType.StoredProcedure);
    foreach (DataRow row in dt.Rows)
    {
        dict.Add(row["PAYMENTTYPE"].ToString(), row["PAYMENTTYPEID"].ToString());
    }
    return dict;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:39:10.340

对我来说，这更像是一个关于 jQuery 的问题。也就是说，尝试将您的成功函数更改为：

```
success: function (data)
{
    $.each(data.d, function ( key, value )
    {
        $("#testDiv").append(key + " " + value + "<br/>");
    });
} 
```

评估地图时，键和值作为参数传递给函数。

# python - 使用 reload() 时出现 NameError

> ID：13455836
> 
> 赞同：1
> 
> 时间：2012-11-19T14:28:06.157
> 
> 标签：python

我有一个名为`recommend.py`. 它有一个名为critics 的dict 数据。

当我尝试在解释器中重新加载它时，会出现以下错误：

```
>>> from recommend import critics
>>> reload(recommend.py)
     Traceback (most recent call last):
       File "<stdin>", line 1, in <module>
     NameError: name 'recommend' is not defined
>>> 
```

我是 python 新手。请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T14:29:14.830

`recommend.py`被解析为`recommend . py`这意味着 python 查找绑定到名称的对象`recommend`，然后尝试从中获取`py`属性。这不起作用，因为您没有`recommend`在当前命名空间中命名的对象，而且即使您确实有一个绑定到该名称的对象，它也可能没有属性`py`。

当然，您需要提供`reload`一个实际的模块对象。更像是：

```
import recommend
reload(recommend) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:28:59.230

[`reload()`](http://docs.python.org/2/library/functions.html#reload)接受一个模块对象，而不是一个文件名：

```
import recommend
reload(recommend) 
```

# iphone - A Core Data Fetch crash

> ID：13455838
> 
> 赞同：1
> 
> 时间：2012-11-19T14:28:07.470
> 
> 标签：iphone, objective-c, ios, core-data, ios6

I'm sharing a Core Data Controller class between versions of my apps.

The code works fine for an iPhone version but stops short on the iPad version.

Here's the code called from the RootVC:

```
 #pragma mark - NSFetchedResultsController

    - (NSFetchedResultsController *)fetchedResultsController {
         NSLog(@"%s", __FUNCTION__);
        if (_fetchedResultsController != nil) {
            return _fetchedResultsController;
        }

         // Create the fetch request for the entity   
        NSLog(@"1");
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Person" inManagedObjectContext:self.managedObjectContext];

 // Set up the fetched results controller

        NSLog(@"2");
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSLog(@"3");

        [fetchRequest setEntity:entity];
       NSLog(@"4");
        // Set the batch size to a suitable number
        [fetchRequest setFetchBatchSize:20];

        // Edit the sort key as appropriate.
        NSSortDescriptor *titleSortDesc = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:titleSortDesc, nil];

        [fetchRequest setSortDescriptors:sortDescriptors];

        // Edit the section name key path and cache name if appropriate,
        // nil for section name key path means "no sections"
        NSFetchedResultsController *aFetchedResultsController =
            [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                managedObjectContext:self.managedObjectContext
                                                  sectionNameKeyPath:nil
                                                           cacheName:nil];

        aFetchedResultsController.delegate = self;
        self.fetchedResultsController = aFetchedResultsController;

        return _fetchedResultsController;
    } 
```

Log entry 1 shows. Log entry 2 doesn't show. I get this crash instead:

```
2012-11-19 08:37:26.402  I'm an iPad
2012-11-19 08:37:26.400  -[CoreDataController asyncLoadPersistentStores]
2012-11-19 08:37:26.403  -[CoreDataController loadiCloudStore:]
2012-11-19 08:37:26.404  moc is <NSManagedObjectContext: 0x1e03e4f0>
2012-11-19 08:37:26.421  -[CoreDataController iCloudStoreURL]
2012-11-19 08:37:26.454  -[CoreDataController folderForUbiquityToken:]
2012-11-19 08:37:26.460  -[RootViewController viewDidLoad]
2012-11-19 08:37:26.469   RVC moc is (null)
2012-11-19 08:37:26.470  -[RootViewController fetchedResultsController]
2012-11-19 08:37:26.472  1
2012-11-19 08:37:26.474  Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+entityForName: nil is not a legal NSManagedObjectContext parameter searching for entity name 'Person''
*** First throw call stack: 
```

I'm passing the managed object context from the App Delegate to the RootVC like this:

```
rootViewController.managedObjectContext = self.coreDataController.mainThreadContext; 
```

I could use some help figuring this out. I dont get whats different between the way it works for iPhone and OSX but not for iPad.. Same share data controller.

UPDATE:

These are the results from logs suggested in a comment by Phillip, below...

```
RVC is <RootViewController: 0x1f88d1a0>
-[CoreDataController loadiCloudStore:]
MOC is <NSManagedObjectContext: 0x1eda3630>
-[CoreDataController iCloudStoreURL]
-[RootViewController viewDidLoad]
-[CoreDataController folderForUbiquityToken:]
-[RootViewController fetchedResultsController]
1
SELF is <RootViewController: 0x1f8859d0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:46:44.113

从评论中......

记录`rootViewController`应用程序委托中的地址和`self`控制器自己的方法中的相应地址表明，不知何故，您有两个不同的 RootViewController 实例（不同的对象地址），其中您将 moc 设置到的实例不是尝试使用的实例它产生 fetchedResultsController。

# svg - Where to find the UK's regions map on GeoJSON format

> ID：13455842
> 
> 赞同：9
> 
> 时间：2012-11-19T14:28:19.757
> 
> 标签：svg, geojson

I am trying to get the uk's regions map, [http://en.wikipedia.org/wiki/Regions_of_England](http://en.wikipedia.org/wiki/Regions_of_England), on GeoJSON format to use it on a web visits map on a website. Is there any place where you can get the data for different countries on GeoJSON format?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T14:48:56.953

您可以从以下网址下载英国行政边界：[https ://www.ordnancesurvey.co.uk/opendatadownload/products.html](https://www.ordnancesurvey.co.uk/opendatadownload/products.html)

向下滚动页面，直到看到边界线。

您需要使用 GIS 工具将形状文件转换为 geojson。这是一个分步教程：

[http://blog-en.openalfa.com/how-to-add-interactive-maps-to-a-web-site/](http://blog-en.openalfa.com/how-to-add-interactive-maps-to-a-web-site/)

条例调查提供的形状文件具有不同的详细程度。听起来您只需要转换`european_region_region.shp`形状文件。

```
ogr2ogr -f GeoJSON european_region_region.json european_region_region.shp 
```

编辑：如果您想使用 Leaflet、Google Maps 等，请不要忘记[从 Northing/Easting 转换为 Lat/Long](http://www.flyingtophat.co.uk/blog/10/converting-a-shapefile-s-projection)

```
ogr2ogr -t_srs WGS84 -f GeoJSON european_region_region.json european_region_region.shp 
```

条例调查有一项许可政策，您需要遵守：

[https://www.ordnancesurvey.co.uk/oswebsite/docs/licences/os-opendata-licence.pdf](https://www.ordnancesurvey.co.uk/oswebsite/docs/licences/os-opendata-licence.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-12T10:51:19.303

有一个有用的 github 存储库，其中包含英国的 GeoJSON 边界数据，从 ONS shapefile 转换而来[https://github.com/martinjc/UK-GeoJSON](https://github.com/martinjc/UK-GeoJSON)

*   地方当局区 (LAD)
*   欧洲选举区 (EER)
*   威斯敏斯特议会选区 (WPC)
*   选区
*   英格兰、苏格兰和威尔士的欧盟统计局边界（NUTS 1 级和 2 级）
*   ONS使用的统计区域（超输出等）

由于政府机构“公共”信息的严格许可，北爱尔兰是个例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T13:34:52.023

如果您只想要英国边界的 GeoJson 文件（包括 NI），您应该使用 - [http://mapit.mysociety.org](http://mapit.mysociety.org)

北爱尔兰 LGD（理事会）边界 - [http://mapit.mysociety.org/areas/LGD.html](http://mapit.mysociety.org/areas/LGD.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:59:57.503

我不知道您是在寻找国家级边界还是次国家级边界。如果是前者，那么：

d3.js 的一些示例使用包含世界上所有国家/地区的 GeoJSON 文件。你可以在这里找到它：[https](https://github.com/mbostock/d3/blob/master/examples/data/world-countries.json) ://github.com/mbostock/d3/blob/master/examples/data/world-countries.json 。

D3.js 也是一个在 svg 中实际呈现这些数据的优秀框架，所以如果你还没有，你可能想研究一下。例如：[http](http://bl.ocks.org/2206590) ://bl.ocks.org/2206590 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-17T19:17:01.410

这是 ONS 网站数据，您可以下载不同格式的数据

[https://data.gov.uk/data/search?theme-primary=Mapping&res_format=GeoJSON](https://data.gov.uk/data/search?theme-primary=Mapping&res_format=GeoJSON)

# c# - Applying Page Indexing or Pagination to GridView

> ID：13455843
> 
> 赞同：0
> 
> 时间：2012-11-19T14:28:20.030
> 
> 标签：c#, asp.net, gridview, pagination

I have a `ICollection` class `LabCollection` with an array list. This array list contains another class `LabEntity`. LabEntity has properties LabID, LabName etc.

I am binding ICollection class to gridview:

```
LabCollection objLabCollection = new LabCollection();
gridview.DataSource = objlabCollection;
gridview.DataBind(); 
```

I want to apply page indexing / pagination to gridview, how can I do that using the above.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:07:13.710

在 gridview 标记中设置，`AllowPaging=True`替换为 10 等任何数字。`PageSize=x``x`

*标记：*

```
<asp:GridView ID="gridview" AllowPaging="true" PageSize="10" OnPageIndexChanging="gridview_PageIndexChanging" runat="server" /> 
```

*代码隐藏：*

```
protected void gridview_PageIndexChanging(object sender, GridViewPageEventArgs e){
    FillGrid();
    gridview.PageIndex = e.NewPageIndex;
    gridview.DataBind();
} 
```

# android - Is it possible to merge pdf files into one with mupdf on android?

> ID：13455846
> 
> 赞同：3
> 
> 时间：2012-11-19T14:28:29.623
> 
> 标签：android, mupdf

I have many one page pdf files and I would like to merge it into one pdf file with mupdf library on android device. Is this possible?

If it is not possible, can you recommend something else that I can use on android?

Note: all pdf files are encrypted and the resulting pdf file must be also encrypted.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:20:06.960

虽然查看器所基于的 MuPDF 库能够实现这样的壮举，但查看器应用程序目前无法合并 PDF 文件。

我不知道有任何工具可以合并 PDF 文件并在 Android 上运行，尽管我很容易出错。

至于加密，您将不得不解密所有输入文件，并将最终文件加密为单独的操作。因此，除了允许您指定多个输入文件的 UI、它们的组合顺序（实际上，可能还有每个页面的使用顺序）之外，您还需要能够指定解密密码和最终加密方法。相当复杂的用户界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-26T12:40:31.043

我不知道如何为 MuPDF 执行此操作，但您可以将 Android 上的多个 PDF 文件与最新的[Apache PdfBox Release](https://pdfbox.apache.org)结合起来。（目前还没有最终确定……RC3……）

只需将此依赖项添加到您的 build.gradle 中：

```
compile 'org.apache.pdfbox:pdfbox:2.0.0-RC3' 
```

在异步任务中执行以下操作：

```
private File downloadAndCombinePDFs(String urlToPdf1, String urlToPdf2, String urlToPdf3 ) throws IOException {

    PDFMergerUtility ut = new PDFMergerUtility();
    ut.addSource(NetworkUtils.downloadFile(urlToPdf1, 20));
    ut.addSource(NetworkUtils.downloadFile(urlToPdf2, 20));
    ut.addSource(NetworkUtils.downloadFile(urlToPdf3, 20));

    final File file = new File(getContext().getExternalCacheDir(), System.currentTimeMillis() + ".pdf");

    final FileOutputStream fileOutputStream = new FileOutputStream(file);
    try {
        ut.setDestinationStream(fileOutputStream);
        ut.mergeDocuments(MemoryUsageSetting.setupTempFileOnly());

    } finally {
        fileOutputStream.close();
    }
    return file;
} 
```

这里 NetworkUtils.downloadFile() 应该返回一个 InputStream。如果你的 SD 卡上有它们，你可以打开一个 FileInputStream。

我像这样从互联网上下载PDF：

```
public static InputStream downloadFileThrowing(String url, int timeOutInSeconds) throws IOException {

    OkHttpClient client = new OkHttpClient();
    client.setConnectTimeout(timeOutInSeconds, TimeUnit.SECONDS);
    client.setReadTimeout(timeOutInSeconds, TimeUnit.SECONDS);

    Request request = new Request.Builder().url(url).build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful())
        throw new IOException("Download not successful.response:" + response);
    else
        return response.body().byteStream();
} 
```

要使用 OkHttpClient，请将其添加到您的 build.gradle：

```
compile 'com.squareup.okhttp:okhttp:2.7.2' 
```

**注意：** 这不适用于加密文件。要合并加密文件，您应该首先解密所有单个文件，然后再加密合并的 pdf。

# sorting - 这种合并排序的实现好吗？

> ID：13455849
> 
> 赞同：7
> 
> 时间：2012-11-19T14:28:35.460
> 
> 标签：sorting, haskell, merge, mergesort

我昨晚刚开始学习 Haskell，以前从未使用过函数式编程语言。我只想知道我的合并排序实现是好是坏，究竟是好是坏。也许它甚至是错误的 - 它确实排序但也许算法不是我认为的合并排序。

只要告诉我我可以在这里改进的一切。我自己认为这是一个非常清晰和简单的实现。感谢您的建议，这是代码:)

```
merge [] ys = ys
merge xs [] = xs
merge xs ys =  sorted : merge left right
                where 
                    sorted = if head(xs) < head(ys) then head(xs) else head(ys)
                    left = if head(xs) <= head(ys) then tail(xs) else xs
                    right = if head(xs) > head(ys) then tail(ys) else ys

msort [] = []
msort [x] = [x]
msort xs = merge (msort left) (msort right)
            where 
                left = take (div (length xs) 2) xs
                right = drop (div (length xs) 2) xs 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T14:46:50.173

好吧，首先，我们可以使用模式匹配将 merge 重写得更优雅一些

```
merge [] ys = ys
merge xs [] = xs
merge xs@(x:xs1) ys@(y:ys1)
    | x <= y = x : merge xs1 ys
    | otherwise = y : merge xs ys1 
```

一般来说，您应该避免使用`head`and`tail`因为它们有点不安全（它们会为空列表引发错误）并尽可能使用模式匹配。

的实现`msort`几乎是正确的，除了我们可以以更有效的方式拆分列表。那是因为`length xs`- 需要 O(N) 才能完成。编译器可能会保存您并缓存`length`调用结果，以便第二次调用`length`不会再次遍历列表。但是`take`and`drop`几乎会导致另外两次遍历，因此使用 3 次遍历拆分列表，这可能被证明是昂贵的。我们可以通过将列表分成两个列表来做得更好——第一个列表包含奇数位置的元素，第二个列表包含偶数位置的元素，如下所示：

```
msort [] = []
msort [x] = [x]
msort xs = merge (msort first) (msort second)
    where
        (first, second) = splitInHalves xs
        splitInHalves [] = ([], [])
        splitInHalves [x] = ([x], [])
        splitInHalves (x:y:xs) =
            let (xs1, ys1) = splitInHalves xs
            in  (x:xs1, y:ys1) 
```

这使您在 O(NlogN) 时间内获得相同的合并排序。感觉不同，因为您可能会用 C 之类的命令式语言就地实现它（通过修改原始列表）。这个版本在内存上的成本略高，但它确实有它的优点 - 更容易推理，所以它更易于维护，而且很容易[并行化](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/lang-parallel.html)，除了算法本身之外，无需关心其他任何事情——这正是一个好的编程语言应该为使用它的开发人员提供的。

**编辑 1：**

如果语法有点多，这里有一些资源：

*   [模式匹配](http://www.haskell.org/tutorial/patterns.html)- 带有`@`符号的位称为*as-pattern*。你会在那里找到它
*   `let`是一个关键字，用于声明要在它后面的表达式中使用的变量（而`where`在它前面的表达式中绑定一个变量）。有关 Haskell 语法的更多信息，包括守卫（带有 的东西`| condition = value`）可以在这里找到，在[Learn You a Haskell的这一章中](http://learnyouahaskell.com/syntax-in-functions)

**编辑 2：**

@is7s 提出了一个更简洁的[函数](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:foldr)`splitInHalves`使用版本：`foldr`

```
splitInHalves = foldr (\x (l,r) -> (x:r,l)) ([],[]) 
```

**编辑 3：**

这是另一个答案，它提供了合并排序的替代实现，它还具有[稳定](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)的属性：

[惰性评估和时间复杂度](https://stackoverflow.com/questions/12057658/lazy-evaluation-and-time-complexity/12057921#12057921)

希望这有助于并欢迎来到函数式编程的精彩世界！

# jquery - jquery 禁用按钮仅适用于 IE

> ID：13455864
> 
> 赞同：0
> 
> 时间：2012-11-19T14:29:24.370
> 
> 标签：jquery, jquery-mobile

我有一个 jquery 移动应用程序，这个 jquery 按钮组是用 c# 生成的

```
<ul class="ui-grid-d">
    <li class="ui-block-a"><a id="MostrarDetallePedido" class="ui-btn ui-btn-up-a" disabled="disabled" href="/Documentos/Docs/DocsDetalle?StrIdDocumento=01500___00000000000000041" data-role="button" data-theme="a" data-ajax="false"><span aria-hidden="true" class="ui-btn-inner"><span class="ui-btn-text">Detalle</span></span></a></li>
    <li class="ui-block-b"><a id="ItemCondiciones" class="ui-state-disabled ui-btn ui-btn-up-b" disabled="disabled" href="/Documentos/Docs/DocsDetalle?StrIdDocumento=01500___00000000000000041" data-role="button" data-theme="b" data-ajax="false"><span aria-hidden="true" class="ui-btn-inner"><span class="ui-btn-text">Condiciones</span></span></a></li>
    <li class="ui-block-c"><a id="ItemEliminar" class="ui-state-disabled ui-btn ui-btn-up-c" disabled="disabled" href="/Documentos/Docs/DocsDetalle?StrIdDocumento=01500___00000000000000041" data-role="button" data-theme="c" data-ajax="false"><span aria-hidden="true" class="ui-btn-inner"><span class="ui-btn-text">Eliminar</span></span></a></li>
    <li class="ui-block-d"><a id="ItemAdiciones" class="ui-state-disabled ui-btn ui-btn-up-d" disabled="disabled" href="/Documentos/Docs/DocsDetalle?StrIdDocumento=01500___00000000000000041" data-role="button" data-theme="d" data-ajax="false"><span aria-hidden="true" class="ui-btn-inner"><span class="ui-btn-text">Adiciones</span></span></a></li>
    <li class="ui-block-e"><a id="ItemComponentes" class="ui-state-disabled ui-btn ui-btn-up-e" disabled="disabled" href="/Documentos/Docs/DocsDetalle?StrIdDocumento=01500___00000000000000041" data-role="button" data-theme="e" data-ajax="false"><span aria-hidden="true" class="ui-btn-inner"><span class="ui-btn-text">Componentes</span></span></a></li> 
</ul> 
```

然后我有一个启用或禁用一些按钮的 jquery func：

```
 function (data) {
        $(data).find('error').each(function () {
            if ($(this).text() == 'NoError') {
                $('#ItemEliminar').prop('disabled', false);
                $('#MostrarDetallePedido').prop('disabled', false);
                $('#ItemComponentes').prop('disabled', false);
                $('#ItemAdiciones').prop('disabled', false);
                $('#ItemCondiciones').prop('disabled', false);

                $(data).find('NombreItem').each(function () {
                    $('#NombreItem').text($(this).text());
                })
                $(data).find('OpcionesItem').each(function () {
                    alert($(this).text());
                })

            } else {
                $(data).find('NombreItem').each(function () {
                    $('#NombreItem').text($(this).text());
                })
                $('#ItemEliminar').prop('disabled', true);
                $('#MostrarDetallePedido').prop('disabled', false);
                $('#ItemComponentes').prop('disabled', true);
                $('#ItemAdiciones').prop('disabled', true);
                $('#ItemCondiciones').prop('disabled', true);
            }
        })
    } 
```

这个功能很好用，但问题是它只适用于 IE。Crhrome 和 firefox 从不禁用 de jquery 按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:38:03.000

您应该将 ui-disabled 类添加到项目中，而不是调整 <a> 不存在的属性。所以而不是：

```
$('#ItemEliminar').prop('disabled', true); 
```

采用`$('#ItemEliminar').toggleClass('ui-disabled');`

或者如果您想要更多控制：

`$('#ItemEliminar').addClass('ui-disabled');`禁用它

和

`$('#ItemEliminar').removeClass('ui-disabled');`启用它。

> 来自@s.Daniel 的建议编辑：
> 
> > 此外，您应该考虑以标准方式替换`<error>`或`<div class="error">` 做事`<div id="error">`，以避免出现问题。

感谢您的建议，但据我所知，数据是某种包含数据的数组，而不是包含数据的 DOM 元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:49:09.993

由于您使用的是 jQuery UI 按钮，请使用 api 的方法 [http://api.jqueryui.com/button/](http://api.jqueryui.com/button/)

```
$('#ItemEliminar')
     .button('disable') // disable the button
     .button('refresh'); // refresh it's state 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:35:34.517

您可能必须使用 css：

不久前我在这里得到了这个：

```
a[disabled="disabled"] { 
set your opacity, etc here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:09:12.677

wirey 的**方法**，解决了部分问题，但它抛出一个消息，表明必须初始化按钮禁用选项。

修改**有线**代码对我有用。

```
$('#ItemEliminar')
   .button({ disabled: false }) //Here initializes disable option
   .button('disable')           // Disable the button
   .button('refresh');          // Refresh 
```

# r - 在 if 中比较超过 3 个变量

> ID：13455866
> 
> 赞同：0
> 
> 时间：2012-11-19T14:29:30.587
> 
> 标签：r

我正在使用 R 进行一些计算，但我想知道是否可以使用 3 个变量创建一个 if 语句。

例如：

```
for(d3 in unique(df2$V1))
    {
        for(d1 in 1:nrow(df1))
        {   
            for(d2 in 1:nrow(df2))
            {   
                if(df1[d1,]$V1 == df2[d2,]$V2 == d3)
                                    {

                oneV1 = subset(df2, V1==d3)
                minerrV2 =subset(oneV1,erV2==min(V2))       
                minerrV3 =subset(oneV1, erV3==min(V3))

                cverV2 = sum(df1$erV2 <= minerrV2$erV2)
                cverV3 = sum(df1$erV3 <= minerrV3$erV3)

                pV2 = cverV2/nrow(df1)
                pV3 = cverV3/nrow(df1)

    fres <- rbind(fres, data.frame(nV1=df1[d1,]$V1, nV4=df2[d2,]$V4, npV2=pV2,npV3=pV3 ))
                                     }
                         }
                }
        } 
```

除了做很多 if 语句之外，在 R 中有没有一种简单的方法来做到这一点？

`**EDIT**`

**这是一种带有特殊参数的置换测试。这可以使用合并来完成，而且比 for 循环更快吗？？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:19:01.323

*   应该`df2$V1`，`df2$V2`并且`df1$V1`是避免由于比较中的舍入错误而导致“错误”的因素？

*   要对超过 2 个变量进行数值比较，请参见`? all.equal`

    ```
    for(d3 in unique(df2$V1)) {
       tmp1 <- df1 [df1$V1 == d3,]
       tmp2 <- df2 [df2$V3 == d3,]
       outer (tmp1$x, tmp2$y, do.something) 
       ## OR:
       tmp1 <- which (df1$V1 == d3)
       tmp2 <- which (df2$V3 == d3)
       outer (tmp1, tmp2, do.something) 
    } 
    ```

这些或阿里的方法或`?tappy`、、和`? aggregate`、或......是否更好取决于你的`? split``? mapply``do.something`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:55:49.687

除了 Justin 和其他人的上述评论之外，您可以通过执行以下操作来避免使用`for`循环和`if`条件：

```
bar = df2[! duplicated(df2$V1), ]
foo = merge(df1, df2, by.x = "V1", by.y = "V2", incomparables = NA)
foo = merger(foo, bar, by="V1", incomparables=NA)
for (i in seq(nrow(foo))) {
    ...
} 
```

我认为对于大表，这种方法会更有效，因为它避免了比较`df1`and的每一行`df2`。

# ios - UITextField：在外面点击时强制resignFirstResponder

> ID：13455873
> 
> 赞同：0
> 
> 时间：2012-11-19T14:30:05.250
> 
> 标签：ios, uitextfield, uitabbaritem, resignfirstresponder

我有一个`UITableView`包含许多`UITextField`s 的静态变量。当用户在我想要的任何文本字段之外点击时，我想关闭键盘。

在 my 的顶层`UIViewController`是 a`UITableView`和 a `UITabBarItem`。我相信我还必须处理状态栏上的点击。

我不确定我应该如何注册触摸它们（这样我就可以强制任何文本字段调用`resignFirstResponder`.

`UIResponder`我想我可能不得不处理

`- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event`

对于表格视图和标签栏项目，但它们都不是`UIControl`s 所以我不能使用

`- (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents`

`UIWindow`也是一个`UIResponder`但同样，我似乎无法获得触摸事件。

任何帮助将不胜感激，CS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:47:18.720

如果你有一个文本字段，我会在它所属的 UIViewController 中添加触摸开始并像这样......

```
- (void)touchesBegan ... cant remember full name
{
    if ([touches count] > 1) {
        return;
    }

    UITouch *touch = [touches anyObject];

    CGPoint touchPoint = [touch locationInView self.view];

    if (!CGRectContainsPoint(self.textField.frame, touchPoint)) {
        //touch originated outside textField.

        [textField resignFirstResponder];
    }
} 
```

如果您有多个文本字段，那么只需对 if 中的每个字段进行 CGRectContainsPoint 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:50:13.007

当你有一个静态`UITableView`时，它会“吃掉”触摸事件。所以我所做的是通过子类化`UITableView`，然后添加一个报告触摸事件的委托。

# oracle - 设置 oracle odbc 驱动程序连接时不出现 TNSNames.ora

> ID：13455876
> 
> 赞同：5
> 
> 时间：2012-11-19T14:30:18.120
> 
> 标签：oracle, odbc, driver

我想将一个 ASP 应用程序与我的 Oracle 数据库连接起来，并且我读到我必须使用 ODBC 驱动程序与我的 Oracle DB 建立连接才能实现它。

问题是，当我创建新的 ODBC 连接时，它会询问 TNSNames，而我在 TNSNames.ora 中的连接没有出现在下拉列表中（它显示为空）。

我试图创建连接到控制面板中的 ODBC 配置。

有人对我该如何解决这个问题有任何想法？

提前致谢， 霍尔

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-20T14:07:37.830

好的，我终于解决了。

起作用的是创建一个名为 TNS_ADMIN 的 Windows 环境变量，其中包含我在 oracle 目录上的管理文件夹的路径。

TNS_ADMIN: "C:\oracle\product\10.2.0\client_2\network\admin"

这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:47:08.727

您可能使用的是 Win64。

如果是，那么您必须在与 Oracle 相同的 Windows 子系统中配置 ODBC DSN。检查您是否安装了 32 位或 64 位版本的 Oracle 客户端。

`odbcad32.exe`在 64 位版本的 Windows 中有 2个版本。在`c:\windows\system32`您会发现 64 位为 64 位应用程序配置 ODBC 并将使用来自 64 位版本的 Oracle 客户端的设置。在`c:\windows\syswow64`32 位版本中，您应该使用 ODBC 为 32 位程序配置 ODBC，包括 32 位版本的 Oracle 客户端。

# ruby-on-rails - rails 中的nested_form - 创建belongs_to 或使用现有对象

> ID：13455880
> 
> 赞同：2
> 
> 时间：2012-11-19T14:30:30.503
> 
> 标签：ruby-on-rails, nested-forms

我有一个使用 2 个对象的嵌套表单，ImageComponent（一种在资产本身周围具有额外属性的包装器）和 ImageAsset（只是资产），关系如下

ImageAsset has_many, :image_components

ImageComponent 属于_to :image_asset

我在表单上使用 Ryan Bates nested_form gem 来创建 ImageAsset。

当我想使用 ImageComponent 表单中的嵌套属性创建 ImageAsset 或关联现有 ImageAsset 时，就会出现问题。

我目前在我的表格中进行了如下设置

```
<legend>Image Component</legend>

<%= f.fields_for :component do |component_fields| %>
   <p>Select an existing image ...</p>
   <%= component_fields.label 'image_asset_id', 'Image' %>
   <%= component_fields.select "image_asset_id", options_for_image_select(component_fields.object.image_asset_id) %>

   <p>... or upload a new one!</p>
   <%= component_fields.fields_for :new_image_asset, ImageAsset.new do |asset_fields| %>
          <%= asset_fields.label :title %>
          <%= asset_fields.text_field :title %>

          <%= asset_fields.label :image %>
          <%= asset_fields.file_field :image  %>
   <% end %>

   <%= component_fields.label :caption %>
   <%= component_fields.text_field :caption %>
<% end %>

<%= f.hidden_field :component_type %>
<%= f.link_to_remove 'Remove Component' %> 
```

这里的问题是我发布了 2 张图片。一个是现有图像（取决于它是新的还是创建操作，这可能是 nil），第二个是新上传的图像属性。

我最初的想法是像这样在模型上创建一个 before_validation 回调（new_image_asset 是模型上的一个 attr_accessor 以允许从表单传递属性）

```
if new_image_asset[:title].present? || new_image_asset[:image].present?
    image_asset = ImageAsset.new(new_image_asset)
end 
```

然而，这仍然给我一个问题，因为图像应该是空白的（我猜是因为资产尚未保存）

是否有另一种方法可以做到这一点，同时在图像的表单上保留验证错误？

这里的希望是，如果用户包含任何新图像资产的内容，那么它将尝试创建并验证它。如果 new_image 属性中没有任何内容，它将使用集合中的任何内容选择现有 ImageAsset

任何帮助将不胜感激。

提前致谢

# wcf - WCF（Windows 应用商店应用程序）中的“连接：关闭”

> ID：13455881
> 
> 赞同：1
> 
> 时间：2012-11-19T14:30:31.817
> 
> 标签：wcf, windows-8

我在 Windows Store Apps 中编写了以下程序。

```
CustomBinding b = new CustomBinding() ;
TextMessageEncodingBindingElement t = new TextMessageEncodingBindingElement();
HttpTransportBindingElement h = new HttpTransportBindingElement();          
b.Elements.Add(t);
b.Elements.Add(h);

MyService client = new MyService(b, new EndpointAddress("http://localhost:8080/"));

var request = ...;
var response = client.Service000(request); 
```

我想`Connection: Close`在 HTTP 标头中设置。但以下代码在 Windows 应用商店应用程序中出现错误。

```
h.KeepAliveEnabled = false; 
```

我尝试在 Message Inspector 中添加自定义 HTTP 标头，但它也不起作用。有没有办法`Connection: Close`在 HTTP 标头中设置？

# ruby - 如何在 Heroku 上运行控制台应用程序？

> ID：13455882
> 
> 赞同：4
> 
> 时间：2012-11-19T14:30:33.593
> 
> 标签：ruby, heroku, console, console-application

我正在尝试将 ruby​​（**不是**rails）应用程序部署到 Heroku。我的 procfile 布局如下：

```
console: bundle exec ruby main.rb 
```

但是，我的应用程序从未真正启动。系统上的日志都很安静，我看不到任何类似于任何错误输出的东西。

如果我在本地系统上运行 procfile 中所示的命令，我的程序将启动并完全按其应有的方式运行。

更有趣的是，如果我运行`heroku console`，应用程序会立即在控制台本身上启动。看起来像与 procfile 的一些交互？如何在不连接到 Heroku 控制台的情况下自动启动我的应用程序并捕获标准输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:38:37.950

如果要`console`运行该条目，则需要对其进行[缩放](https://devcenter.heroku.com/articles/scaling)：

```
$ heroku ps:scale console=1 
```

也就是说，Heroku 用来`console`表示“我用来在我的应用程序上执行某些交互式管理功能的东西”，这就是为什么`heroku console`运行`console`Procfile 条目*并*为您提供双向管道的原因。您似乎有不同的含义-“我需要始终运行以执行某些后台任务的东西”。（`web`对 Heroku 也有特殊意义——路由网格会将 HTTP 请求发送到`web`进程。）因此我也会重命名它，所以它`console`仍然意味着“控制台”。

您可以选择`main`, 与`main.rb`, 但我鼓励您考虑该组件的实际作用，而不是同时提供 Procfile 条目和`main.rb`描述性标签。

# java - 我正在尝试修改文本文件中的一些行，当我将该行再次写回文件时，我最终得到一个空白文件

> ID：13455884
> 
> 赞同：2
> 
> 时间：2012-11-19T14:30:44.933
> 
> 标签：java

此代码正在读取一堆 .java 文件并找到“public [classname]”或“private [classname]”并将“System.out.println([classname])”添加到该行。

问题是当我写回那行时，我最终得到一个空白文件

谁能看到我做错了什么？

```
private static void work(ArrayList<File> fileList) {
    for (int i = 0; i < fileList.size(); i++) {
        replaceLines(fileList.get(i));
    }

}

public static void replaceLines(File file) {
    String path = file.getPath();
    String fileNameLong = file.getName();
    String fileName = null;
    if (fileNameLong.contains(".java")) {
        fileName = fileNameLong.substring(0, file.getName().indexOf("."));
    }
    if (fileName != null && fileName != "") {
        System.out.println(fileName);
        try {
            //prepare reading
            FileInputStream in = new FileInputStream(path);
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(in));
            //prepare writing
             FileWriter fw = new FileWriter(file);
             PrintWriter out = new PrintWriter(fw);

            String strLine;
            while ((strLine = br.readLine()) != null) {
                // Does it contain a public or private constructor?
                boolean containsPrivateCon = strLine.contains("private "
                        + fileName);
                boolean containsPublicCon = strLine.contains("public "
                        + fileName);

                if (containsPrivateCon || containsPublicCon) {
                    int lastIndexOfBrack = strLine.lastIndexOf("{");

                    while (lastIndexOfBrack == -1) {
                        strLine = br.readLine();
                        lastIndexOfBrack = strLine.lastIndexOf("{");
                    }

                    if (lastIndexOfBrack != -1) {
                        String myAddition = "\n System.out.println(\""
                                + fileName + ".java\"); \n";
                        String strLineModified = strLine.substring(0,
                                lastIndexOfBrack + 1)
                                + myAddition
                                + strLine.substring(lastIndexOfBrack + 1);
                        strLine = strLineModified;
                    }
                }
                out.write(strLine);
            }
        } catch (Exception e) {
            System.out.println(e);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:33:26.173

您忘记刷新并关闭文件。`PrintWriter`保留一个缓冲区，除非您明确`flush()`表示，否则数据将（不）愉快地位于缓冲区中，并且永远不会写入输出。

所以你需要在行之前添加这个`catch (Exception e) {`

```
out.flush();
out.close(); 
```

请注意，这仅对`PrintWriter`和是必需的`PrintStream`。当您关闭它们时，所有其他输出类都会刷新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T14:35:21.683

如果要写入正在读取的同一文件，则应写入文件的副本（不同的文件名），然后重命名输出文件，或使用[RandomAccessFile](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/RandomAccessFile.html)接口就地编辑文件。

通常，第一种解决方案比第二种解决方案**更**容易实现；除非文件很大（.java 文件可能不是这种情况），否则没有真正的理由使用第二个。

# c# - Visual Studio 2012 不会运行在 VS 之外正常工作的 .JS 文件？

> ID：13455885
> 
> 赞同：1
> 
> 时间：2012-11-19T14:30:49.990
> 
> 标签：c#, javascript, asp.net, visual-studio

我有几个 .JS 文件需要在我的项目中使用。当我在 VS 之外构建常规 html 页面时，这些文件可以正常工作，但是当我使用正在使用的文件运行我的项目时，它们就无法正常工作。我不知道为什么。我正在为 IE 中的 CSS3 列拆分实现后备。

```
<script type="text/javascript" src="_script/css3-multi-column.js"></script> 
```

我将上面的文件包含在一个 CSS 文件中，我设置了 column-count:5; 当我用记事本构建一个简单的 html 页面时，这是完美的，但是当我只是在我的项目中实现它时，它并没有做任何事情？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:32:02.007

通常，当您遇到这样的问题时，有几个步骤可以调试：

首先进入浏览器的开发者工具（一旦站点运行）并查看发生了什么错误。如果 JS 文件没有加载，那么您可以推断您没有指向文件结构中的正确路径。如果是这种情况，那么您需要弄清楚如何正确引用脚本。如果您使用的是 ASP.NET MVC，则可以引用您的脚本，例如：

```
<script src="@Url.Content("~/Scripts/myscript.js")" type="text/javascript"></script> 
```

这从项目的根 (~) 引用脚本。否则，您可能必须执行类似的操作，`../../Scripts/myscript.js`因为 ../ 的脚本路径基于访问脚本的视图相对于 Scripts 目录的位置。

另一个可能的错误是您的脚本有问题。既然您说该站点已经运行（在 VS2012 之外），那么我将假设脚本本身没问题。

正如其他人所说，如果您可以在问题中提供更详细的错误，我们可以提供更好的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:23:22.057

Your problem probably in this directory, check and correct a reference in its attempts to use, "~/Scripts/jquery-ui-{version}.js"

# asp.net-mvc - 在 MVC 中发布表单时更改方法调用顺序

> ID：13455890
> 
> 赞同：2
> 
> 时间：2012-11-19T14:31:12.987
> 
> 标签：asp.net-mvc, partial-views

这里有点奇怪。我有一个博客，它是另一个“涉足 MVC”项目，它将突出我们新 Intranet 的好处。我有一个典型的博客文章页面，其中包含文章、评论和一个表单，用于提交您对给定文章的评论。

我有一个字符串类型的主视图（“Post”），其中包含文章内容，然后是两个 Html.RenderAction 方法；一个获取评论，一个通过表单添加评论。

我的问题是，当发表评论时，我的 GetComments 方法在 AddComment 之前被调用，因此当刷新页面时，尽管新评论已添加到数据库中，但它是不可见的。快速 F5 确认了这一点。我知道 GetComments 被首先调用是因为它首先在视图中声明，但我不确定如何告诉视图在获取之前进行添加。

这是我的代码：

控制器：

```
public ActionResult AddComment()
    {
        return PartialView("AddComment");
    }

    [HttpPost]
    public ActionResult AddComment(Comment comment)
    {
        comment.DateSubmitted = DateTime.Now;
        db.Comments.Add(comment);
        db.SaveChanges();
        return PartialView(comment);
    }

    public ActionResult GetComments(int articleid)
    {
        var comments = db.Comments.Where(c => c.ArticleID == articleid).ToList();
        return PartialView(comments);
    } 
```

发布视图

```
@model IntranetBlog.Models.Article

@{
ViewBag.Title = "Post";
}

 <div class="row">
<div class="span12">
    <h3>@Html.DisplayFor(modelItem => Model.Title)</h3>
    <small>by Ruth Barlow on @Html.DisplayFor(modelItem => Model.DateCreated)</small>
    @if (Model.Image != null)
    {
        <p>
            <img src="@Url.Action("GetImage", "Home", new { articleID = Model.ArticleID     })" alt="" width="150" height="150" />
        </p>
    }

    <div>
        @Html.DisplayFor(modelItem => Model.Body)
    </div>
    <small>Posted under @Html.DisplayFor(modelItem => Model.Category.Name)</small>
</div>
<div class="span12">
    @{
        Html.RenderAction("GetComments", "Home", new { articleID = Model.ArticleID });
    }
</div>
<div class="span12">
    @{
        Html.RenderAction("AddComment", "Home", new { articleID = Model.ArticleID });
    }
</div>
</div> 
```

GetComments 部分：

```
@model IEnumerable<IntranetBlog.Models.Comment>

@if (Model.Any())
{
<h3>What you're saying</h3>
foreach (var item in Model)
{
    <div>
        Comment: @Html.DisplayFor(modelItem => item.Body)
    </div>
    <div>
        Submitted by: @Html.DisplayFor(modelItem => item.SubmittedBy) 
on @Html.DisplayFor(modelItem => item.DateSubmitted)
    </div>
    <hr />
}
}
else
{
  <p>There are no comments for this post. Why not add one?</p>
} 
```

添加评论部分

```
@model IntranetBlog.Models.Comment

@using (Html.BeginForm())
{
<h3>Why not leave us a comment?</h3>
@Html.ValidationSummary()
<fieldset>
    <div class="editor-label">
        @Html.LabelFor(model => model.Body)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Body, 20, 20, null)
        @Html.ValidationMessageFor(model => model.Body)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.SubmittedBy)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.SubmittedBy)
        @Html.ValidationMessageFor(model => model.SubmittedBy)
    </div>

    <p>
        <input type="submit" value="Add comment" id="AddComment" class="btn btn-    primary" />
    </p>
</fieldset>
} 
```

希望这是有道理的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:55:14.327

诀窍是使用`Html.Action`而不是`Html.RenderAction`这将允许您将结果存储在变量中，然后将其添加到需要它的显示中。

这将允许您以所需的逻辑顺序生成 PartialView，同时以其他顺序显示它们。

有关如何执行此操作的快速示例，请参阅此帖子：[https ://stackoverflow.com/a/13301057/971693](https://stackoverflow.com/a/13301057/971693)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:59:27.267

我会向你建议一种稍微不同的方法。考虑使用 Ajax.BeginForm 来提交评论，而不是使用 Html.BeginForm。作为 ajax，它将具有更好的性能，因为它允许您的方法只返回注释，以便您可以替换旧的注释，甚至只是新添加的注释，以便可以将其添加到列表的底部。话虽如此，这个解决方案确实依赖于使用 javascript，最好是 jquery-unobtrusive-ajax 来工作并呈现看起来不错的客户端代码。由于 AjaxOptions 类内置了一些功能强大但易于使用的选项，因此您无需了解 javascript 即可使用此方法。

# c++ - 析构函数问题 - 错误：表达式：_BLOCK_TYPE_IS_VALID_(pHead->pBlockUse)

> ID：13455891
> 
> 赞同：0
> 
> 时间：2012-11-19T14:31:14.453
> 
> 标签：c++, visual-c++

我给了这个类直方图，我正在为我的类动态分配内存。我对析构函数有疑问。错误是：

> 表达式：_BLOCK_TYPE_IS_VALID_(pHead->pBlockUse)

我做错了什么？

直方图.h

```
 #ifndef HISTOGRAM_H
    #define HISTOGRAM_H
    #include<iostream>
    class Histogram
    {
    private:
        int** matrix;
        int lines;  
        double* normalizedArray;
        int *values;
        void SortMatrix();      
    public:
        Histogram(int elements[], int elementsNr);
        Histogram(int** matrix, int lines);
        void Normalize();
        void PrintNormalized();
        void PrintDenormalized();
        void PrintValues();
        void PrintNormalizedArray();
        int* GetValues() const {return values;} 
        double* GetNormalizedArray() const {return normalizedArray;}
        int GetLines() const {return lines;}
        double CalculateD1(Histogram histo);
        double CalculateD2(Histogram histo);
        double CalculateIntersection(Histogram hist);
        ~Histogram(){
        delete []matrix;
        delete []normalizedArray;
        delete []values;
        }
    };
    #endif
histogram.cpp

     #include<math.h>
#include"histogram.h"
using namespace std;
Histogram::Histogram(int** m, int l)
{
    lines=l;
    normalizedArray=NULL;
    values=NULL;
    matrix=new int*[lines];
    for(int i=0;i<lines;i++)
    {
        matrix[i]=new int[2];
    }
    for(int i=0;i<lines;i++)
    {
        matrix[i][0]=m[i][0];
        matrix[i][1]=m[i][1];
    }

    SortMatrix();
    //save the values
    values=new int[lines];
    for(int i=0;i<lines;i++)
    {
        values[i]=matrix[i][0];
    }
}

Histogram::Histogram(int elements[], int elementsNr)
{
    lines=0;
    normalizedArray=NULL;
    //initialize matrix : elementrNr lines and 2 columns
    matrix=new int*[elementsNr];
    for(int i=0;i<elementsNr;i++)
    {
        matrix[i]=new int[2];
        matrix[i][0]=INT_MIN;
        matrix[i][1]=INT_MIN;
    }
    //search each element from the array in the matrix
    bool found=false;
    for(int i=0;i<elementsNr;i++)
    {
        found=false;
        for(int j=0;j<elementsNr;j++)
        {
            //the element was found in the matrix ( on the first column )
            if(matrix[j][0] == elements[i])
            {
                matrix[j][1]++;
                found=true;
                break;
            }
        }
        if(!found)
        {
            matrix[lines][0]=elements[i];
            matrix[lines][1]=1;
            lines++;
        }
    }
    SortMatrix();
    //save the values
    values=new int[lines];
    for(int i=0;i<lines;i++)
    {
        values[i]=matrix[i][0];
    }

}
void Histogram::SortMatrix()
{

    for(int i=0;i<lines;i++)
    {
        for(int j=0;j<lines-1;j++)
        {
            if(matrix[j][0]>matrix[j+1][0])
            {
                int temp = matrix[j+1][0];
                matrix[j+1][0] = matrix[j][0];
                matrix[j][0] = temp;
            }
        }
    }
}

void Histogram::PrintDenormalized()
{
    for(int i=0;i<lines;i++)
    {
        cout<<matrix[i][0]<<" : " <<matrix[i][1]<<endl;
    }

}
void Histogram::PrintNormalized()
{
    for(int i=0;i<lines;i++)
    {
        cout<<matrix[i][0]<<" : "<<normalizedArray[i]<<endl;
    }
}

void Histogram::PrintValues()
{
    for(int i=0;i<lines;i++)
    {
        cout<<values[i]<<endl;
    }
}
void Histogram::PrintNormalizedArray()
{
    for(int i=0;i<lines;i++)
    {
        cout<<normalizedArray[i]<<endl;
    }
}

void Histogram::Normalize()
{
    int N=0;
    normalizedArray=new double[lines];
    for(int i=0;i<lines;i++)
    {
        N+=matrix[i][1];
    }
    for(int i=0;i<lines;i++)
    {
        normalizedArray[i]=static_cast<double>(matrix[i][1])/N;
    }
}

double Histogram::CalculateD1(Histogram histo)
{
    //the two histograms must have the same values
    int* values2 = histo.GetValues();
    int lines2 = histo.GetLines();
    if(lines!=lines2)
    {
        return -1;
    }
    for(int i=0;i<lines;i++)
    {
        if(values[i]!=values2[i])
        {
            return -1;
        }
    }

    //if we got this far the two histograms have the same values, so we can calculate the distance
    double* normalizedArray2=histo.GetNormalizedArray();
    double dist=0.0;
    for(int i=0;i<lines;i++)
    {
        dist +=  abs(normalizedArray[i]-normalizedArray2[i]);
    }
    return dist;
}

double Histogram::CalculateD2(Histogram histo)
{
    //the two histograms must have the same values
    int* values2 = histo.GetValues();
    int lines2 = histo.GetLines();
    if(lines!=lines2)
    {
        return -1;
    }
    for(int i=0;i<lines;i++)
    {
        if(values[i]!=values2[i])
        {
            return -1;
        }
    }

    //if we got this far the two histograms have the same values, so we can calculate the distance
    double* normalizedArray2=histo.GetNormalizedArray();
    double dist=0.0;
    for(int i=0;i<lines;i++)
    {
        dist +=  pow(normalizedArray[i]-normalizedArray2[i], 2);
    }
    return sqrt(dist);
}

double Histogram::CalculateIntersection(Histogram histo)
{
    //the two histograms must have the same values
    int* values2 = histo.GetValues();
    int lines2 = histo.GetLines();
    if(lines!=lines2)
    {
        return -1;
    }
    for(int i=0;i<lines;i++)
    {
        if(values[i]!=values2[i])
        {
            return -1;
        }
    }

    //if we got this far the two histograms have the same values, so we can calculate the intersection
    double* normalizedArray2=histo.GetNormalizedArray();
    double v1=0.0;
    double v2=0.0;
    for(int i=0;i<lines;i++)
    {
        v1 += normalizedArray[i] < normalizedArray2[i] ? normalizedArray[i] : normalizedArray2[i];
        v2 += normalizedArray[i];
    }
    return v1/v2;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:34:37.853

构造函数都没有初始化`normalizedArray`. 这意味着`delete[] normalizedArray`对析构函数中的调用将在一个未初始化的指针上进行操作。`normalizedArray`要更正，请在每个构造函数中初始化为`NULL`. 在指针上调用`delete[]`（或`delete`）是​​安全的。`NULL`

与`Histogram`动态分配的成员一样，您需要防止复制：

```
class Histogram
{
    Histogram(const Histogram&);
    Histogram& operator=(const Histogram&);
}; 
```

或正确实现复制构造函数和赋值运算符。请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)如果正在调用以下任何函数，`Histogram` *则将*复制 的 实例：

```
double CalculateD1(Histogram histo);         // Pass by const reference instead
double CalculateD2(Histogram histo);         // if the functions do not modify
double CalculateIntersection(Histogram hist) // their argument. 
```

如果没有为具有动态分配内存的类实现复制构造函数和赋值运算符，则该类的两个实例将在复制操作后最终指向同一个动态分配的内存。当两个实例之一被破坏时，它会为另一个实例留下悬空指针（指向不再有效的内存的指针）。任何使用这些的尝试都是*未定义的行为*。

* * *

如果这不是练习，请改用[`std::vector<>`](http://en.cppreference.com/w/cpp/container/vector)s。它为您处理动态分配的内存：

```
std::vector<std::vector<int>> matrix;
std::vector<double> normalizedArray;
std::vector<int> values; 
```

# wordpress - Wp电子商务元信息搜索

> ID：13455894
> 
> 赞同：1
> 
> 时间：2012-11-19T14:31:20.940
> 
> 标签：wordpress, search, e-commerce

这是[这个问题的重复，](https://wordpress.stackexchange.com/questions/73158/wp-ecommerce-meta-information-search)因为我在 SO 上得到了更快的答案。

开箱即用，WP eCommerce 不支持元搜索。如果您在线销售书籍并且需要客户能够通过最重要的元标签“作者”进行搜索，这将是一个大问题！

有人可以告诉我如何包含元信息搜索，或者是否有更好的插件也不需要花费一臂之力来搜索元信息？

**编辑：**

从那以后，我发现了一个名为 Relevanssi 的插件可以进行更好的搜索，Alexander Gieg 用他自己的代码进一步扩展了它：

```
add_filter('relevanssi_excerpt_content','wpscproductexcerpt',10,3);
function wpscproductexcerpt($content, $post, $query) {
if ( 'wpsc-product' == relevanssi_get_post_type($post->ID) ) {
    $content = $post->post_content . ( !empty($post->post_excerpt) ? " $post->post_excerpt" : '' );
    if ( 'on' == get_option('relevanssi_expand_shortcodes') ) {
        $content = do_shortcode($content);
    } else {
        $content = strip_shortcodes($content);
    }
    // The line below fixes a minor bug in Relevanssi 2.9.14 custom excerpt generating code:
    $content = preg_replace("/\t/", ' ', $content);
}
return $content; 
```

}

我现在需要能够进一步扩展它，因为我是用户[Visser Lab 的自定义字段的插件](http://www.visser.com.au/wp-ecommerce/plugins/custom-fields/)，以弥补 WP eCommerce 的不足，并且需要弄清楚如何从这个插件中包含元信息？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:43:29.110

事实证明，WP eCommerce 使用默认的 WordPress 查询来显示其搜索结果。这很好，因为这使得修改这个查询以满足我们的需求变得非常容易。这是一个示例代码：

```
function mySearchFilter($query) {
    // is_wp_ecommerce_search() is not an actual function - if you know how to check if the search is from WP eCommerce - you might want to do that, so that you don't modify the normal WordPress search
    if ( $query->is_search /* && is_wp_ecommerce_search() */ ) {
        $query->set('meta_query', array( array( 'key' => 'custom_key', 'value' => $_GET['custom_key'], 'compare' => 'LIKE' ) ) );
    };
    return $query;
};
add_filter('pre_get_posts','mySearchFilter'); 
```

我不确定检查这是否是 WP 电子商务搜索的确切功能，这`&& is_wp_ecommerce_search()`就是注释掉的原因。

您将不得不调整：

1.  `'key' => 'custom_key'`部分 - 输入您要查找的自定义字段的名称。
2.  `'value' => $_GET['custom_key']`- 输入您要查找的值。我假设它将来自`$_GET`争论，但您的情况可能会有所不同。
3.  `'compare' => 'LIKE'`- 下面的链接将提供有关`meta_query`参数结构的详细信息，但基本上这将寻找与搜索到的值相似的自定义字段。

[您可以在Class Reference/WP Query](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters) WordPress codex 页面上找到有关`meta_query`查询参数的更多详细信息。

# javascript - 外部 JavaScript 文件的良好实践

> ID：13455896
> 
> 赞同：4
> 
> 时间：2012-11-19T14:31:34.303
> 
> 标签：javascript

我是 JavaScript 新手。

我应该如何在外部脚本中拆分我的函数？什么被认为是好的做法？我应该将所有功能都塞进一个外部`.js`文件中还是应该将类似的功能组合在一起？

我猜更多的文件意味着更多的 HTTP 请求来获取脚本，这可能会降低性能？然而，更多的文件使事情井井有条：例如，`onload.js`在加载时初始化事物，`data.js`从服务器检索数据，`ui.js`引用 UI 处理程序......

专业人士对此有何建议？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:38:30.267

发布产品时，您通常希望尽可能少的 HTTP 请求来加载页面（例如[图像精灵](http://www.w3schools.com/css/css_image_sprites.asp)）

因此，我建议将您的 .js 连接起来以进行发布，但在开发过程中以适合您的方式将它们分开。

请记住，如果您`"use strict"`，连接脚本可能是错误的来源。
（[这里有更多关于 js 严格模式的信息](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T14:43:01.737

正如 Pointy 提到的，你应该尝试一个工具。试试[Grunt](http://gruntjs.com/) of [Brunch](http://brunch.io/)，两者都是为了在构建过程中为您提供帮助，您可以将它们配置为在您准备好生产时合并所有文件（也可以缩小等），同时在开发时保留单独的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:07:24.510

这取决于脚本的大小、数量以及您随时使用的脚本数量。

许多性能良好实践声称（其中有很好的逻辑）如果 JavaScript 足够小，内联它是好的。这会导致 HTTP 请求数量减少，但也会阻止浏览器缓存 JavaScript，因此您应该非常小心。这就是为什么在某些特殊情况下（例如查看 Bing.com，他们所有的 JavaScript 都是内联的），甚至可以内联您的图像（使用 base64 编码）的原因。

如果您有很多 JavaScript 文件，并且您在任何时候只使用其中的一小部分（不仅作为计数，而且作为大小），您可以异步加载它们（例如使用 require.js）。但是，如果您一开始没有考虑到这将需要对您的应用程序设计进行大量更改（并且还会使您的应用程序复杂性更大）。

甚至可以将 CSS/JavaScript 缓存到 localStorage 中。有关更多信息，您可以阅读[Web 性能日志](https://rads.stackoverflow.com/amzn/click/com/1449332919)

所以让我们做一个简短的回顾。如果您将 JavaScript 内联，这将减少页面的首次加载。内联 JavaScript 不会被浏览器缓存，因此如果您使用了外部文件，则每次下一次加载页面都会变慢。

如果您使用不同的外部文件，请确保您使用了所有文件或至少其中大部分文件，因为您可能对实际上不必要加载的文件有冗余 HTTP 请求。这将导致更好地组织您的代码，但可能会增加加载时间（仍然不要忘记对您有帮助的浏览器缓存）。

将所有内容放在单个文件中会减少您的 HTTP 请求，但您将拥有一个大文件，该文件将阻止您的页面加载（如果您使用 JS 文件的同步加载），直到文件完全加载。在这种情况下，我可以建议您将这个大文件放在正文的末尾。

对于性能跟踪，您可以使用 YSlow 等工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T14:51:32.140

当我想到好的实践时，我会想到 MVC 模式。有人可能会争论这是否是开发的方式，但许多人使用它来构建想要实现的目标。通常，如果项目太小，则根本不建议使用 MVC - 就像如果您只需要一个带有 for 循环的简单 C 程序，就创建一个完整的 C++ windows 应用程序。

无论如何，JavaScript 中的 MVC 或 MV* 将帮助您构建代码，使所有操作都是控制器的一部分，而对象属性仅存储在模型中。然后视图仅用于显示目的，并通过特殊请求或渲染引擎为用户呈现。当我开始使用 MV* 时，我盯着 BackboneJS 和Addy Osmani[的“开发 BackboneJS 应用程序”指南。](http://addyosmani.github.com/backbone-fundamentals/)当然，您可以使用许多其他框架来构建您的代码。它们可以在[TodoMVC 网站](http://addyosmani.github.com/todomvc/)上找到。

您还可以从他们的应用程序中导出您自己的结构，然后使用目录结构进行开发（但不使用 MV* 框架）。

我不同意您担心使用这种结构会导致更多文件，这意味着更多 HTTP 请求。当然这在开发过程中是正确的，但请记住，用户应该获得性能增强（即编译）和缩小版本作为脚本。因此，即使您以这种有组织的方式进行开发，使用[来自 Google 的闭包编译器](http://closure-compiler.appspot.com/home)来缩小/丑化和编译您的脚本更有意义。

# ado.net - 定义ADO.NET连接字符串时，为什么要在字符串前面加上@符号？

> ID：13455897
> 
> 赞同：2
> 
> 时间：2012-11-19T14:31:36.443
> 
> 标签：ado.net

例如。

```
public string conString =@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=..\\..\\PersonDatabase.mdb"; 
```

我不明白它的用途。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:32:22.580

`@`创建一个逐字字符串文字，它忽略字符`\`。

这意味着您不需要写入`\\`文件路径。（这意味着你的例子是错误的）

# c# - 如何通过 udp 实例化游戏对象？

> ID：13455898
> 
> 赞同：1
> 
> 时间：2012-11-19T14:31:37.133
> 
> 标签：c#, xml, unity3d, instantiation

我需要通过 udp 连接实例化一个游戏对象。所以，我有 Udp 服务器、场景中的游戏对象和 xml 文件，其中包含当前游戏对象和其中每个对象的浮动变量。另一方面，客户端 udp 发送浮点值以根据 xml 文件转换一堆游戏对象。你们有什么想法或准备使用解决方案来完成根据 xml 中的游戏对象名称及其变量通过 udp 转换一堆游戏对象吗？

**客户端：** 场景中有 UDP 客户端、游戏对象和 xml（未分配给游戏对象的变量）。例如：

```
<Type="float" Name="x_out" UnityObject="CraneBoom">
<Type="float" Name="y_out" UnityObject="CraneBoom">
<Type="float" Name="z_out" UnityObject="CraneBoom">
... 
```

**服务器端：** 服务器UDP发送随机生成float值；我需要做的是从 xml 中获取所有“UnityObject”，在场景中找到它们，并根据 xml 中的“名称”以某种方式将服务器的浮点值分配给游戏对象。我的问题是我无法弄清楚如何根据“名称”将浮点值从服务器分配给游戏对象。

为了让问题更清楚，我需要做这样的事情： UDPReceive.UpdateGameObject(object[i], objectIndex[i])

UdpReceive - 附加在客户端的脚本；UpdateGameObject - 根据 object[i], objectIndex[i] 实例化 GameObject 的函数；object[i] - 从 xml 属性“UnityObject”反序列化的 GameObjects 数组；objectIndex[i] - 对“名称”的所有属性值进行计数的索引数组；

# .htaccess - 没有 JavaScript 的 SEO 优化搜索结果

> ID：13455900
> 
> 赞同：1
> 
> 时间：2012-11-19T14:31:40.767
> 
> 标签：.htaccess

我还没有找到我的问题的直接答案，所以这里是：我试图让我的搜索结果对用户和 seo 友好。我相信摆脱几个元素是个好主意：

*   应该避免 POST 搜索，这样浏览器就不会让用户在返回时重新提交表单。

*   附加查询字符串的问号

*   如果通过 http GET 处理表单提交的输入名称（如？**search_input** =cellphones）

所以我的问题有点多：我如何将表单提交变成：...mywebsite.com/search/my-search-term

...不使用 JavaScript 导致重定向，而是使用表单本身？你们是使用 .htaccess 重定向进行调整以使您的网址更“可点击”，还是只保留查询字符串？

需要明确的是，对搜索进行用户优化的目的显然是为了让人们通过链接分发产生流量，而不是由 se 以某种方式索引。

提前致谢！

# actionscript-3 - 如何将精灵添加到 box2d 主体？

> ID：13455901
> 
> 赞同：3
> 
> 时间：2012-11-19T14:31:43.570
> 
> 标签：actionscript-3, flash, box2d

**我解决了。问题解决了。**

我是 as3 和 box2D 的新手，所以至少我在学习。我在将精灵（movieclip）添加到动态主体时遇到问题。精灵出现了，但它给了我一个错误，因此所有的游戏原型都不好。有了静力学，我没有任何问题。我能做些什么？

这是我的代码：

在代码之前，我将它们设置为变量：

```
 private var player:b2Body;
 private var mc_player:MovieClip; 
```

首先是我的动态体的功能：

```
public function createPlayer(px:int, py:int):void
    {
        mc_player = new _pork();
        addChild(mc_player);

        var playerDef:b2BodyDef = new b2BodyDef();
        playerDef.position.Set(px / worldScale, py / worldScale);
        playerDef.type = b2Body.b2_dynamicBody;

        var playerShape:b2PolygonShape = new b2PolygonShape();
        playerShape.SetAsBox(25 / 2 / worldScale, 40 / 2 / worldScale);

        var playerForce:b2FixtureDef = new b2FixtureDef();
        playerForce.shape = playerShape;

        player = world.CreateBody(playerDef);
        player.CreateFixture(playerForce);
    } 
```

然后是添加 mc(movieclip) 的函数：

```
private function drawPlayer():void
    {
        mc_player.x = player.GetPosition().x * worldScale;
        mc_player.y = player.GetPosition().y * worldScale;
    } 
```

在更新中，我称之为：

```
 private function update(e:Event):void
            {
                drawPlayer();
                } 
```

我添加的其他属性，例如固定力和重力，这不是问题。这是我认为是问题的部分......

flash中的错误：

> TypeError: 错误 #1009: No se puede acceder a una propiedad oa un método de una referencia a un objeto nulo。在 Main/drawPlayer() 在 Main/update()

我不知道如何解决它

任何帮助，请..

谢谢大家！

**编辑：**

**解决方案：**

对不起，我的代码失败了。错误是我从来没有说过游戏在舞台上（我的意思是在关卡中）而不是在菜单中时调用玩家......因为这个我在出现玩家之前调用了玩家。对不起我的错误..调用movieclip播放器是这样的：

```
private function update(e:Event):void 
{ 
//Call movieclips
 if (mc_player) {
 drawPlayer(); } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:15:33.830

何时/如何调用 update()？在初始化 mc_player 之前创建回调是否有问题？

# c# - 可以在多线程中对 Excel 表格进行排序吗？

> ID：13455902
> 
> 赞同：1
> 
> 时间：2012-11-19T14:31:45.433
> 
> 标签：c#, multithreading, excel

我的代码如下：

```
Parallel.ForEach(listSheets, (xlWorkSheet1) =>
{
  //  Excel.Worksheet xlWorkSheet1 = (Excel.Worksheet)excelbk.Worksheets["Sheet1"];
  xlRange = (Excel.Range)xlWorkSheet1.Cells[xlWorkSheet1.Rows.Count, 1];
  lock (xlRange)
  {
     //   nRows = (long)xlRange.get_End(Excel.XlDirection.xlUp).Row;
     nRows = xlWorkSheet1.UsedRange.Cells.Rows.Count;
     xlRange = (Excel.Range)xlWorkSheet1.Rows["5:" + nRows, Type.Missing];
     xlRange.Sort(xlRange.Columns[clnum1, Type.Missing], 
                  Excel.XlSortOrder.xlAscending,
                  xlRange.Columns[clnum2, Type.Missing], 
                  Type.Missing, 
                  Excel.XlSortOrder.xlAscending,
                  Type.Missing, 
                  Excel.XlSortOrder.xlAscending,
                  Excel.XlYesNoGuess.xlNo, 
                  Type.Missing, 
                  Type.Missing,
                  Excel.XlSortOrientation.xlSortColumns,
                  Excel.XlSortMethod.xlStroke,
                  Excel.XlSortDataOption.xlSortTextAsNumbers,
                  Excel.XlSortDataOption.xlSortNormal,
                  Excel.XlSortDataOption.xlSortNormal);

     Console.WriteLine("Sheet{0} have been sorted", xlWorkSheet1.Name);
  }
} 
```

listSheets 被定义为一个列表，当我调试它时，它显示错误，该问题的 COM 异常已经运行。

> System.Runtime.InteropServices.COMException 应用程序正忙 (RPC_E_CALL_REJECTED 0x80010001) 调用被被调用者拒绝 (RPC_E_SERVERCALL_RETRYLATER 0x8001010A)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:59:47.123

正如 code4life 所说：Excel 不支持多线程互操作调用。而且由于 Excel 的 Sort 方法在最新版本中已经是多线程的，因此尝试对已经是多线程的东西进行多线程是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:57:01.457

Excel 不支持多线程互操作调用。在内部，它是多线程的。例如，您可以在选项页面中启用多线程重新计算，以显着提升性能。但是，恐怕您不能执行多线程互操作。

# ektron - 用于消息传递的电子邮件通知

> ID：13455904
> 
> 赞同：1
> 
> 时间：2012-11-19T14:31:48.190
> 
> 标签：ektron

我正在使用 8.0.1 SP1。

到目前为止，我还没有找到明确的答案。消息传递服务器控件是否具有通过电子邮件通知用户消息已发送给他们的选项？电子邮件已为站点设置并正常工作。在我的网站中，我在个人资料中将社区通知设置为电子邮件。我在 web.config 中将 ek_EnableMessageBoardEmail 设置为 true。我确实意识到留言板和消息服务器控件之间存在差异，但我正在尝试一切。如果不对功能进行编码，这可能吗？如果没有，有人可以指点我一些入门代码吗？

我还在[http://dev.ektron.com/forum.aspx?g=posts&t=41480上发布了这个问题](http://dev.ektron.com/forum.aspx?g=posts&t=41480)

谢谢。

扎克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T16:23:44.957

不，这是不可能的。Ektron Messaging 控件只能将 CMS 内的内部消息发送给其他用户。服务器控件生成的标记看起来有点像电子邮件，但实际上不是。

Messaging 控件确实能够向社区组发送电子邮件，但不能向个人用户发送电子邮件。

[请在此处](http://documentation.ektron.com/cms400/v801/mobile_help/advanced/content/Community_Management/Community_Management_sc_messaging.htm)查看 Ektron 的文档。

您必须为此编写自己的自定义解决方案。

# android - 如何从 JSON 数组动态地将图像添加到 ImageView

> ID：13455908
> 
> 赞同：4
> 
> 时间：2012-11-19T14:32:02.383
> 
> 标签：android, arrays, drawable, android-imageview

我想从存储在 JSON 文件中的链接向我的 iamgeview 添加图像，如下所示：

```
{
"parts":[
    {"name": "Bosch Iridium",

        ...
        ...
        ...

        "image": "R.drawable-hdpi.plug_boschi"
    }, 
```

现在我拉链接并使用以下代码显示它：

```
try {

    jObject = new JSONObject(sJSON.substring(sJSON.indexOf('{')));
    JSONArray pluginfo = jObject.getJSONArray("parts");
    JSONObject e = pluginfo.getJSONObject(position);

    String imagefile = e.getString("image");
    Drawable image = getDrawable(imagefile);

    ImageView itemImage = (ImageView) findViewById(R.id.item_image);

    itemImage.setImageDrawable(image);

        } catch (JSONException e) {
        e.printStackTrace();
        }
    } 
```

我很确定这部分是正确的

```
ImageView itemImage = (ImageView) findViewById(R.id.item_image);

itemImage.setImageDrawable(image); 
```

但是我需要关于从 JSON 数组获取链接的部分的帮助，以便我可以显示它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T14:38:36.040

您需要首先从 JSON 中包含的字符串中获取资源 ID。

```
String imagefile = e.getString("image");
String resName = imagefile.split("\\.")[2]; // remove the 'R.drawable.' prefix
int resId = getResources().getIdentifier(resName, "drawable", getPackageName());
Drawable image = getResources().getDrawable(resId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:40:51.317

您要做的是查看[Resources](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)类。

```
getIdentifier (String name, String defType, String defPackage); 
```

因此，基本上解析对象以找到文本`plug_boschi`，然后调用：

```
int resid=Context.getResources().getIdentifier ("plug_boschi", "drawable", null); 
```

# probability - 在 n 位数据单元中 x 位数被损坏的概率

> ID：13455910
> 
> 赞同：0
> 
> 时间：2012-11-19T14:32:13.930
> 
> 标签：probability

假设一个数据单元中的一个比特在传输过程中被破坏的概率是 p。对于以下每种情况，求一个 n 位数据单元中 x 位数被损坏的概率： (a) n=8, x=1, p=0.2 (b) n=16, x=0, p =0.1，（c）n=32，x>0，p=0.05。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:34:46.097

这显然是一个关于二项分布的问题。这可能会有所帮助： [http ://en.wikipedia.org/wiki/Binomial_distribution](http://en.wikipedia.org/wiki/Binomial_distribution)

# ajax - Javascript中的Ajax和Web Worker有什么区别？

> ID：13455913
> 
> 赞同：9
> 
> 时间：2012-11-19T14:32:22.697
> 
> 标签：ajax, web-worker

我认为他们几乎做同样的事情。什么条件下我们应该选择 Web Worker 而不是 Ajax？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T14:49:23.187

AJAX 专门用于与服务器通信，而 Web Worker 用于后台处理。

虽然 AJAX 是异步的（默认情况下），但不要将其与 Web Worker 提供的“并发”后台处理模型相混淆。

Web Worker 可以是*任何*进程，并且不限于客户端-服务器通信。

# c# - 在 .NET 中使用 ZipPackage

> ID：13455915
> 
> 赞同：1
> 
> 时间：2012-11-19T14:32:35.960
> 
> 标签：c#, .net, vb.net

所以我了解了`System.IO.Packaging.ZipPackage`.NET。如果您“另存为缩略图”，我正在尝试使用它来提取位于 word 文档中的缩略图，一般建议似乎是改用第三方库，但有人可能知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:51:46.897

如果您知道您只使用 .docx 文件，则可以使用以下代码阅读缩略图（如果文档有缩略图）：

```
ZipPackage zip = ZipPackage.Open(@"C:\Test Documents\thumbnail.docx") as ZipPackage;
var part = zip.GetPart(new Uri("/docProps/thumbnail.emf", UriKind.Relative));
if (part != null)
{
    Image i = Image.FromStream(part.GetStream());
    pictureBox1.Image = i;
} 
```

# c# - 获取正在访问的每个网址的列表？

> ID：13455919
> 
> 赞同：0
> 
> 时间：2012-11-19T14:32:46.397
> 
> 标签：c#, .net, web

我一直在非常努力地用 C# 编写代码，让我知道从我的计算机访问的网址，无论我使用哪种浏览器或哪个软件正在访问该网址。

这非常重要，因为我的计算机上可能有软件在后台打开我不知道的网页。

我需要代码来列出网址，即使在您运行程序时开始录制它也很好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:37:12.950

听起来您可能想要的是代理服务器。

看看[鱿鱼](http://www.squid-cache.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:37:42.500

使用 Fiddler，你可以在这里得到它......

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# php - 在 CKEditor 调色板中只显示少数需要的颜色

> ID：13455922
> 
> 赞同：5
> 
> 时间：2012-11-19T14:33:14.863
> 
> 标签：php, colors, ckeditor

CKEditor 窗口中的默认调色板如下所示：

![一只忙碌的猫](../Images/f998be1e08a88e82212f6269323fdeb0.png)

是否可以只选择几种颜色（我只需要其中三种）而不是全部显示？我检查了 config.js，但似乎无法从那里设置颜色限制。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:44:43.477

所有颜色都在 ckeditor/ckeditor.js 中定义。这是一个缩小的文件，因此很难阅读。如果您对 colorButton_colors 执行搜索，您会发现以下定义：

```
colorButton_colors='000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF'; 
```

只需删除或添加您想要的颜色。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T23:44:05.587

您可以通过 config.colorButton_colors 设置列表，而无需编辑源代码。

请参阅有关此 (v4)的官方[CKEditor 文档。](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-colorButton_colors "CKEditor 4 关于设置颜色按钮颜色的文档")

[配置指南](http://docs.ckeditor.com/#!/guide/dev_configuration-section-defining-configuration-in-page "CKEditor 4 doc on do on-page configuration”；")还建议在创建编辑器实例时进行页面配置，以“避免修改 CKEditor 安装文件夹中的原始分发文件，使升级任务更容易”。

如果您正在使用 PHP 动态构建页面（问题用 php 标记），您甚至可以根据登录的用户 ID 设置不同的颜色集，例如，允许将每个用户的配置存储在数据库中，也许（通过编写在页面中添加一些 javascript）。

例子：

```
CKEDITOR.replace( 'editor1', {
    colorButton_colors: '00923e,f8c100,28166c',
    ... and so on
}); 
```

# javascript - 在进行原型设计时，是否可以将方法的结果分配给属性？

> ID：13455925
> 
> 赞同：0
> 
> 时间：2012-11-19T14:33:22.137
> 
> 标签：javascript, prototype

考虑以下代码：

```
function rectangle(x, y) {
    this.width = x;
    this.height = y;
    this.calcArea = function() {
        return (this.width * this.height);
    };
} 
```

该`rectangle`对象有两个属性（宽度和高度）和一个方法（calcArea）。

我希望向矩形对象添加另一个属性：`area`. 我将通过原型方法做到这一点，如下所示：

```
rectangle.prototype.area = function () {return this.calcArea();} 
```

现在想象一下，我们创建了一个新的矩形实例：`var r = new rectangle(2,3);` 不幸的是，`area`它是一个方法。要检索正确的值，您必须调用`r.area();`

由于`area`应该（至少在语义上）是属性而不是方法，有没有办法直接将结果分配给`calcArea()`属性`r.area`？

如果我将原型更改为：

```
rectangle.prototype.area = function () {this.area = this.calcArea();} 
```

我必须打`r.area()`一次电话，然后所有随后的电话都`r.area`将是一个号码，根据需要。这还不错，但并不完美。那么有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:28:32.400

矩形的面积是根据其他属性计算得出的，这些属性从一个矩形变为另一个矩形。因此，区域不属于原型，而是属于每个实例。无论如何，在原型中拥有一个属性将被 Rectangle 的每个实例所掩盖是没有意义的。计算可以属于原型，因为它对于每个矩形都是相同的。

为了得到这个值，你必须至少计算一次，就像你说的那样。您可以在 Rectangle 的构造函数中执行此计算，但最好将方法留在原型中，因为它不需要复制。

```
function Rectangle(x, y) {
    this.width = x;
    this.height = y;
    this.area = this.calculateArea();
}

Rectangle.prototype.calculateArea = function(){
    return this.width * this.height;
} 
```

请记住，如果您在创建矩形尺寸后更改此值，则不会更新此值。出于这个原因，我总是按需计算它，因为它更安全，除非这个属性经常被调用并且性能是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:37:34.900

```
function rectangle(x, y) {
    this.width = x;
    this.height = y;
    this.calcArea = function() {
        return (this.width * this.height);
    };
    this.area = this.calcArea();
} 
```

您可以这样做，但如果您修改或`this.area`不会更新。但是您可以检查一下：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty 它可能会对您有所帮助。`width``height`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:38:04.057

为什么不在构造函数中计算呢？

```
function rectangle(x, y) {
    this.width = x;
    this.height = y;
    this.area = x*y;
    ..
} 
```

现在的问题是，如果您更新`width`或`height`. 在这种情况下使用这个。

```
function rectangle(x, y) {
    this.width = x;
    this.height = y;
    this.area = x*y;
    this.updateWidth = function(w){
        this.width = w;
        this.area = this.width*this.height;
    }
    this.updateHeight = function(h){
        this.height = h;
        this.area = this.width*this.height;
    }
} 
```

# jquery - jQuery.css()：Firefox 不返回“自动”值

> ID：13455931
> 
> 赞同：10
> 
> 时间：2012-11-19T14:33:52.567
> 
> 标签：jquery, css, firefox

我正在为一些元素设置顶部或底部以及左侧或右侧的值。当我尝试使用 Firefox (16.0.2) 访问这些值时，我得到了一个错误的值`top`(一个特定的值而不是`auto`)

**CSS**

```
div {
    bottom:200px;
    left:0px;
    top:auto;
    right:auto;
} 
```

**JS**

```
$(function(){
    var top = $('div').css('top');
    alert(top);
});​ 
```

您可以在这里尝试：http: [//jsfiddle.net/UEyxD/2/](http://jsfiddle.net/UEyxD/2/)（在 Chrome/Safari 中运行良好）

任何想法如何防止这种情况？我想得到

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-22T20:09:45.393

我也有这个烦人的问题。

如果元素此时可见，某些浏览器会返回计算出的位置。诀窍是隐藏它，阅读 css，然后让它再次可见（如果尚未隐藏）。

我编写了一个方便的函数来处理这个问题，并将`auto`在 Firefox 中返回。

[**jsFiddle**](http://jsfiddle.net/UEyxD/19/)

```
var getCss = function($elem, prop) {
        var wasVisible = $elem.css('display') !== 'none';
        try {
            return $elem.hide().css(prop);
        } finally {
            if (wasVisible) $elem.show();
        }
    };

alert( getCss($('div'), 'top') ); 
```

这`finally`只是在函数返回之前将可见性带回元素。

`auto`您应该仅在您希望返回的情况下使用此函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T19:54:34.773

当您使用以下代码设置“自动”时，您可以获得顶部的整数值：

```
$(function(){
    var top = $('div').offset().top;
    alert(top);
});​ 
```

*   设置为自动时的偏移返回位置值

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T15:18:30.793

This is down to the browser and how it interprets the styles, it is somewhat out of your control. However, with particular CSS and jQuery workarounds you should be able to get around it. For instance, if you do not need to the item to be positioned absolutely then you could remove this, or change it to `position:static;`

Have a look at this [question](https://stackoverflow.com/questions/4278148/jquery-cssleft-returns-auto-instead-of-actual-value-in-chrome).

> As to why Chrome and IE return different values: .css() provides a unified gateway to the browsers' computed style functions, but it doesn't unify the way the browsers actually compute the style. It's not uncommon for browsers to decide such edge cases differently.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:13:40.313

只需删除`position`样式，您将得到`auto`而不是计算值。

```
div {
    top: auto;
    bottom:20px;    
    right:20px;
    left:0px;
} 
```

[你可以在这里](http://jsfiddle.net/UEyxD/16/)测试它。

# xcelsius - xcelsius 的自定义 Web 服务

> ID：13455934
> 
> 赞同：-2
> 
> 时间：2012-11-19T14:34:14.007
> 
> 标签：xcelsius

我参与了一个使用 Xcelsius 进行仪表板演示设计的团队。我知道 SAP 提供的连接数据库的选项。我的团队使用 flynet，但许可问题促使我们考虑自定义 Web 服务。可以设计自定义 Web 服务（C# 或 Java）并将其与 Xcelsius 一起使用。我真的很想知道它是否值得，或者我的团队是否有更好的选择。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-09T22:02:01.740

我最近参与了一项构建自定义 Web 服务的项目，以在数据库中写入新记录和更改现有记录。这是我们唯一的选择，因为 SAP 不提供开箱即用的回写选项。另外，我认为他们（SAP）不应该，但这是一个独特的要求，需要工作流程。

Web 服务位于 .net 中

# php - 如何编写重写规则来隐藏查询字符串？

> ID：13455936
> 
> 赞同：-1
> 
> 时间：2012-11-19T14:34:15.303
> 
> 标签：php, mysql, .htaccess

我在重写 URL 以隐藏查询字符串时遇到问题。我正在尝试重写：

```
http://seynol.tk/comments?post_referrel_id=16 
```

至：

```
http://seynol.tk/comments only 
```

这是我到目前为止所尝试的：

```
RewriteBase /
Options +FollowSymlinks -MultiViews
RewriteEngine on
# to make `/path/index.php` to /path/
RewriteCond %{THE_REQUEST} ^GET\s(.*/)index\.php [NC]
RewriteRule . %1 [NE,R=301,L]

RewriteCond %{THE_REQUEST} ^GET\s.+\.php [NC]
RewriteRule ^(.+)\.php$ /$1 [NE,R=301,L,NC]

RewriteCond %{REQUEST_URI} !\.php$ [NC]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule . %{REQUEST_URI}.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:48:37.617

您所要做的就是检查是否设置了查询字符串并使用空查询字符串进行重定向。

```
RewriteCond %{QUERY_STRING} post_referrel_id
RewriteRule (.*) $1? [R=301,L] 
```

如果您想将引用 id 放入 URL 中并静默地将其转换为查询字符串，您可以使用它：

```
RewriteRule ^/comments/([0-9]+)$ /comments?post_referrel_id=$1 
```

这假设帖子 ID 是数字。URL 如下所示：[http ://sevnol.tk/comments/16](http://sevnol.tk/comments/16)

# wcf - 使用 Oracle 的 WCF 服务

> ID：13455937
> 
> 赞同：5
> 
> 时间：2012-11-19T14:34:17.923
> 
> 标签：wcf, oracle

TLDR；看最后一段。

我们合作软件公司的开发人员需要调用我们的 WCF（**基本 http 绑定**）服务，他要求我们自己将其转换为 asmx，因为他无法从 Oracle 调用它。WCF 服务正在不同平台（.net、java、php）上使用，没有错误。

他的代码给了他**状态代码： 500 - Internal Server Error**。我认为它与发送错误的肥皂格式或内容有关。

所以我知道你应该像那个开发者那样使用**utl_dbws**而不是**utl_http 。**

好的，首先这对我来说似乎是一件容易的事。从 Internet 上找到一个工作代码示例并发送一封电子邮件，例如“嗨，开发者朋友，您应该使用 utl_dbws 包而不是 utl_http 和此链接上的示例代码”。

我不是世界上唯一需要这样做的人，对吧？

很奇怪，但我找不到任何可以完成从 Oracle 调用 WCF 服务的示例批准的工作代码。

这是我找到的一些链接；

[https://forums.oracle.com/forums/thread.jspa?threadID=2354357](https://forums.oracle.com/forums/thread.jspa?threadID=2354357) [https://forums.oracle.com/forums/thread.jspa?threadID=1071996](https://forums.oracle.com/forums/thread.jspa?threadID=1071996) [http://steveracanovic.blogspot.com/2008/ 10/using-utldbws-package-to-call-web.html](http://steveracanovic.blogspot.com/2008/10/using-utldbws-package-to-call-web.html) [https://forums.oracle.com/forums/thread.jspa?messageID=4205205​​& tstart=0#4205205](https://forums.oracle.com/forums/thread.jspa?messageID=4205205&tstart=0#4205205)
[​​ http://www.oracle-base.com/文章/10g/utl_dbws-10g.php](http://www.oracle-base.com/articles/10g/utl_dbws-10g.php)

没有人编写任何工作代码示例，或者没有人告诉这是不可能的。

如果有人有一个从 Oracle 调用 WCF 服务的工作代码示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:11:54.587

当您收到 Http 500 错误时，通常是**内部**错误。例如，如果开发人员在没有设置所有输入值的情况下调用您的服务，那么您的代码可能会生成除以零错误，如果未捕获该错误，则会作为 http 500 错误返回给客户端。

您可以将 WCF 服务的 soap 版本配置为与 asmx 服务相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T17:56:25.347

如果您从 WCF 服务收到响应 500（内部错误），请尝试在 WCF 服务的 web.config 中设置 includeexceptiondetailinfaults=true 。（[http://msdn.microsoft.com/cs-cz/library/system.servicemodel.description.servicedebugbehavior.includeexceptiondetailinfaults(v=vs.110).aspx](http://msdn.microsoft.com/cs-cz/library/system.servicemodel.description.servicedebugbehavior.includeexceptiondetailinfaults(v=vs.110).aspx)）

然后你会得到详细的异常（错误的肥皂动作，错误的格式......）

从 PL/SQL 调用 WCF 服务。

utl_http 但它有效。

```
/*   
  declare
  p_request VARCHAR(32767);
  p_plainResult VARCHAR2(32767);
  begin
    p_request := '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:Sum>
         <tem:a>1</tem:a>
         <tem:b>2</tem:b>
      </tem:Sum>
   </soapenv:Body>
</soapenv:Envelope>';

select callSOAPService(p_request,'http://tempuri.org/IMathService/Sum','http://localhost:51106/MathService.svc') into p_plainResult from dual;    
    end;

  */
create or replace function callSOAPService 
(  
 p_plainRequest IN varchar2(20000),
 p_actionName IN varchar2(1024), --SOAP Action ( in WCF, attribute [OperationContract(Action="ActionName")
 p_url IN varchar2(1024),
   p_userName varchar2(1024) := null,
  p_password varchar2(1024) := null,
  p_isAsynchronous boolean:= FALSE,
  p_proxy varchar2(1024):=null,
  p_transferTimeout number :=null,
)
RETURN VARCHAR2(32767)
IS
  p_charset varchar2(1024) :='AL32UTF8'; --by default utf-8  
  p_request utl_http.req;
  p_response utl_http.resp;
  p_plainResponse varchar2(32767);
BEGIN

   p_url := utl_url.escape(url => p_url); --escape url

   if p_TransferTimeout > 0 THEN --set oracle timeout ( by defualt is 60 sec )
     utl_http.set_transfer_timeout(timeout => p_transferTimeout);
   END IF;

   if p_proxy IS NOT NULL THEN --if proxy is provided, then set it 
    utl_http.set_proxy(proxy => p_proxy);
   end if;
    utl_http.set_response_error_check(enable => TRUE); --http status errorCheck ( 404 not found, 500 internal error...)
    utl_http.set_detailed_excp_support(enable => TRUE); --detailed error stack

    p_request := UTL_HTTP.begin_request(url => p_url,method => 'POST' /*u SOAP bude vzdy POST meotda*/ ,http_version => 'HTTP/1.1');

    --pripravim si obalku
    UTL_HTTP.set_header (r => p_request,name =>  'Content-Type', value => 'text/xml'); 
    UTL_HTTP.set_header (r => p_request,name =>  'Content-Length',value =>  LENGTH (p_plainRequest));
    UTL_HTTP.set_header (r => p_request, name => 'SOAPAction',value => p_actionName); --if status is 500 check SOAP action
    UTL_HTTP.write_text(r => p_request,data => p_plainRequest);

    p_response := UTL_HTTP.get_response (p_request);

    if p_isAsynchronous THEN --one-way service
      UTL_HTTP.end_response (p_response); --proto ukoncim request a vratim prazdno
      RETURN ''; 
    end if;

   utl_http.read_text (p_response, p_plainResponse); --read response
   utl_http.end_response (p_response); --close resposne

   dbms_output.put_line ('Response from: ' || p_url || ' is ' || p_plainResponse); --vypisu odpoved pro kontrolu   
   return p_plainResponse;   
EXCEPTION
    when others then      
        dbms_output.put_line('Chyba ' || UTL_HTTP.get_detailed_sqlerrm()); --get error stack
        utl_http.end_response (p_response);
END; 
```

# iis - HTTP 错误 404.7 - Not Found 请求过滤模块配置为拒绝文件扩展名

> ID：13455939
> 
> 赞同：23
> 
> 时间：2012-11-19T14:34:27.357
> 
> 标签：iis, iis-7.5, file-not-found, requestfiltering

我正在尝试为 IIS 7.5 网站配置默认网页。

请求过滤已打开。但是允许使用 .aspx 页面，我已将 default.aspx 设置为网站的默认页面。

如果我浏览到 localhost/default.aspx，我会按预期得到一个网页。

如果我浏览到本地主机/我得到

> HTTP 错误 404.7 - 未找到 请求过滤模块配置为拒绝文件扩展名。

有任何想法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T09:18:59.673

看起来请求过滤实际上是在过滤空白文件名。因此，您必须将其添加到 web.config 中的请求过滤块中：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <security>
      <requestFiltering>
        <fileExtensions allowUnlisted="true">
          <remove fileExtension="." />
          <add fileExtension="." allowed="true" />
        </fileExtensions>
      </requestFiltering>
    </security>
  </system.webServer>
</configuration> 
```

现在很明显，但我真的认为这是一个巨大的陷阱。

* * *

更多信息：[IIS 7 不提供文件 - 404.7 错误](http://www.adamwlewis.com/articles/iis-7-not-serving-files-4047-error)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-06T17:33:41.933

您可以通过添加解决：

```
<requestFiltering>
    <fileExtensions allowUnlisted="true">
        <remove fileExtension="." />
        <add fileExtension="." allowed="true" />
    </fileExtensions>
</requestFiltering> 
```

到您的 Web.Config 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-01T05:31:31.853

您可以通过将文件扩展名添加到 IIS 的请求过滤模块中来解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-18T18:45:00.917

请务必从页面上的按钮中删除任何**PostBackURL="MyPage.aspx"**。我的猜测是，当包含 postbackurl 时，IIS 认为它将页面作为文件获取。它默认拒绝 .aspx 文件类型。您可以在页面错误中看到这一点。

不好：创建 404.7（注意 PostBackURL）

```
<asp:FileUpload runat="server"  ID="uplReplaceFile" ToolTip="Update this file" />

 <asp:Button runat="server" PostBackUrl="MyPage.ascx"  ID="bnHiddenFileUploadListener" OnClick="bnHiddenFileUploadListener_OnClick" /> 
```

好：没有错误

```
<asp:FileUpload runat="server"  ID="uplReplaceFile" ToolTip="Update this file" />

 <asp:Button runat="server" ID="bnHiddenFileUploadListener" OnClick="bnHiddenFileUploadListener_OnClick" /> 
```

# phpmyadmin - WAMP 内部服务器错误

> ID：13455947
> 
> 赞同：1
> 
> 时间：2012-11-19T14:35:01.727
> 
> 标签：phpmyadmin, wamp

我下载并安装了 WAMP。在 phpMyAdmin 中导入我的数据库并尝试通过我的浏览器启动该网站：`http://localhost/myWebsite/index.php`

我收到以下错误消息：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator at admin@localhost to inform them of the time this error occurred, and the actions you performed just before this error.

More information about this error may be available in the server error log. 
```

**更新**我检查了日志，我看到的所有错误都是：

```
127.0.0.1 - - [19/Nov/2012:14:40:14 +0000] "GET /myWebsite/index.php HTTP/1.1" 500 528 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:05:49.823

根据您的错误日志更新和您收到的错误消息，这是一个[HTTP 错误 500](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error)，表示服务器知道它遇到了错误或无法执行请求。

您需要检查您的代码和驻留在服务器上的任何*.htaccess文件。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T09:58:03.920

检查您是否已加载 apache 重写模块。

前往并在列表中`wamp_manager -> apache -> modules`查找。`rewrite_module`

如果它旁边没有 TICK，请单击它。Apache 将被反弹（停止，启动）。再试一次。

如果`rewite`没有加载所需的模块，引擎将无法工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T14:39:37.067

当然，找到您的服务器日志，它们应该提供一些详细信息。

# eclipse - 如何在我自己的向导中利用eclipse提供的现有JSP模板生成JSP文件？

> ID：13455948
> 
> 赞同：0
> 
> 时间：2012-11-19T14:35:01.567
> 
> 标签：eclipse, eclipse-wtp, eclipse-emf, eclipse-emf-ecore

我有自己的文件创建向导，在其中我接受用户的文件名。在向导完成时，我想使用 eclipse 提供的模板或从首选项设置的模板生成 JSP。我怎样才能做到这一点？请帮忙。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:51:37.020

看看[`NewJSPTemplatesWizardPage`](http://eclipsesrc.appspot.com/jsrcs/org.eclipse.jst.jsp.ui/src/org/eclipse/jst/jsp/ui/internal/wizard/NewJSPTemplatesWizardPage.java.html)和[`NewJSPWizard`](http://eclipsesrc.appspot.com/jsrcs/org.eclipse.jst.jsp.ui/src/org/eclipse/jst/jsp/ui/internal/wizard/NewJSPWizard.java.html)。

检索模板的实际代码是

```
TemplateStore fTemplateStore = JSPUIPlugin.getDefault().getTemplateStore();
fTemplateStore.getTemplates(TemplateContextTypeIdsJSP.NEW); 
```

# javascript - 如何通过 requireJs 使用多文件库

> ID：13455953
> 
> 赞同：4
> 
> 时间：2012-11-19T14:35:22.007
> 
> 标签：javascript, requirejs, js-amd

我用 requireJs 构建了一个项目，我的文件结构如下：

```
js/
   lib/
       noty/
           layouts/
               bottom.js
               top.js
               ...
           themes/
               default.js
           noty.jquery.js
       jquery.js
       jquery-ui.js
   user/
      user.js
   app.js 
```

我的配置：

```
 requirejs.config({
        baseUrl: 'js/lib',
        urlArgs: 'bust=' + (new Date()).getTime(),  //only for dev  : no-cache
        paths: {
            user: '../user'
        },
        shim: {
            'jquery-ui': ['jquery'],
            'jquery-tmpl': ['jquery'],
            'gridy': ['jquery']
        }
    });
    requirejs(['jquery', 'jquery-ui'],  function($){
    ....
    }); 
```

我关心的是要集成noty，这是一个我可以在任何模块中使用的通知插件。这个插件需要加载：

```
js/lib/noty/noty.jquery.js
js/lib/noty/layout/top.js
js/lib/noty/themes/bottom.js 
```

我不确定这样做的方法是什么？

*   连接文件？

*   将每个文件加载为依赖项？：

    requirejs(['jquery', 'jquery-ui', 'noty/noty.jquery.js', 'noty/layout/top.js', etc. ]

*   为 requireJs 创建某种插件/模块？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-06T11:41:16.360

或像这样：

```
paths: {
    'jquery': 'jquery/1.10.2/jquery',
    'noty': 'noty/2.0/jquery.noty',
    'noty.themes.default': 'noty/2.0/themes/default',
    'noty.layouts.topCenter': 'noty/2.0/layouts/topCenter',

    app: '../app',
    util: '../util'
},
shim: {
    'noty': ['jquery'],
    'noty.themes.default': {
        deps: ['jquery', 'noty'],
        exports: 'jquery'
    },
    'noty.layouts.topCenter': {
        deps: ['jquery', 'noty'],
        exports: 'jquery'
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T11:37:10.680

最后，我设法实现了第 3 个解决方案：我创建了一个 Web 模块，将库包装在一个名为 notiy.js 的文件中：

```
define(['jquery',
    'noty/layouts/topCenter', 
    'noty/layouts/bottomRight',
    'noty/themes/default'], 
function($){

$.noty.defaults.timeout = 20000;

return  function(type, msg){
    var topLayout = 'topCenter',
        bottomLayout = 'bottomRight',
        layout = {
            'alert'     : topLayout,
            'info'      : bottomLayout,
            'confirm'   : topLayout,
            'success'   : bottomLayout,
            'error'     : topLayout,
            'warning'   : topLayout
        };

    if(msg && type){
        return noty({
            text : msg, 
            layout: layout[type] || topLayout, 
            type : type
        });
    }
}
}); 
```

我已经在我的 app.js 中声明了 shim 配置中的依赖项（以修复依赖项顺序）：

```
requirejs.config({
baseUrl: 'js/lib',
urlArgs: 'bust=' + (new Date()).getTime(),  //only for dev  : no-cache
paths: {
    user: '../user'
},
shim: {
    'jquery-ui'         : ['jquery'],
    'jquery-tmpl'       : ['jquery'],
    'gridy'             : ['jquery'],
    'noty/jquery.noty'  : ['jquery'],
    'notify'            : ['noty/jquery.noty']
}
});
requirejs(['jquery', 'jquery-ui', 'jquery-tmpl', 'notify'],  function($, ui, tmpl, notify){
//...
}); 
```

Ans 它就像一个魅力！

# c - C - fscanf 读取两个整数，然后是字符串

> ID：13455954
> 
> 赞同：0
> 
> 时间：2012-11-19T14:35:23.577
> 
> 标签：c, file, io, scanf

我需要在文本文件中存储两个整数，然后是文本行。我通过将每个 int 写在一行中并将每一行文本也写在一个新行中来成功地做到了这一点。然而，为了阅读它，我发现了一些麻烦。我正在这样做：

```
FILE *f = fopen(arquivo, "r");
char *lna = NULL;
fscanf(f, "%d\n%d\n", &maxCol, &maxLin);
//↑This reads the two ints, works fine in step-by-step
for (;;) {
    fscanf(f, "%s\n", &lna);
    //↑This sets lna to NULL always, even if there are more lines
    if (lna != NULL)
        lna[strlen(lna) - 1] = '\0';
    if (feof(f))
        break;
    inserirApos(lista, lna, &atual);
}
fclose(f); 
```

我尝试了几种不同的方法，但它们从未奏效。我知道我可以读取字符串之类的东西，gets 或其他东西，但我认为如果字符串包含空格，就会出现问题。我想知道我正在做的方式是否是最好的，以及它有什么问题。我发现其中一种方法（也不起作用）你必须通过每行的最大长度。如有必要，我知道此信息，这是我之前阅读的 maxCol。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:38:38.817

```
fscanf(f, "%s\n", &lna); 
```

是错误的参数类型。该`%s`格式需要一个`char*`as 参数，但您给了它一个`char**`. 而且您还没有为该指针分配内存。`fscanf`期望`char*`指向足够大的内存区域。

```
char *lna = malloc(whatever_you_need);
...
    fscanf("%s ", lna); 
```

（格式中的`'\n'`和之间没有区别。两者都消耗扫描 int 的非空白字符字符串之后的整个空白。）`' '``fscanf``lna`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:37:43.057

您需要先为 lna 分配空间。

```
char *lna = malloc(MAX_SIZE);//MAX_SIZE is the maximum size the string can be + 1 
```

附加参数应指向已分配的对象，其类型由格式字符串中的相应格式说明符指定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:38:05.487

您似乎期望`fscanf()`为您动态分配字符串；这根本不是它的工作原理。这是未定义的行为。

# javascript - 从 soundcloud 设置 web 音频 api 源节点

> ID：13455956
> 
> 赞同：8
> 
> 时间：2012-11-19T14:35:33.810
> 
> 标签：javascript, html5-audio, soundcloud, soundmanager2

我想知道是否有任何方法可以从 soundcloud 轨道创建源节点（ [https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#MediaElementAudioSourceNode ）。](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#MediaElementAudioSourceNode)

我对网络音频 API 没问题，但对 soundcloud sdk 来说是新的，据我所知，它依赖于 soundmanager2。所以也许soundmanager2有一些可用的选项？

问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T17:44:03.760

您可以请求轨道，然后使用`stream_url`属性，您可以设置为`src`音频元素，用作 MediaSourceNode。

这是一个示例代码：

```
var context = new webkitAudioContext(),
    audio = new Audio(),
    source,
    // `stream_url` you'd get from 
    // requesting http://api.soundcloud.com/tracks/6981096.json
    url = 'http://api.soundcloud.com/tracks/6981096/stream' +
          '?client_id=YOUR_CLIENT_ID';

audio.src = url;
source = context.createMediaElementSource(audio);
source.connect(context.destination);
source.mediaElement.play(); 
```

这是现场示例：http: [//jsbin.com/ikixot/1/edit](http://jsbin.com/ikixot/1/edit)

# c++ - 如何将文本输入到字符串数组中？

> ID：13455957
> 
> 赞同：1
> 
> 时间：2012-11-19T14:35:44.777
> 
> 标签：c++, string, input

串水果[200]；

如何将字符串输入到数组中？

```
Example:
My mom has apples;
So , fruits array will contain:
fruits[0] = "My";
fruits[1] = "mom";
..........etc. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:37:45.370

如果您从标准输入读取：

```
int i = 0;
for (string word; cin >> word; i++)
    names[i] = word; 
```

如果您正在阅读 a `string`，请`istringstream`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T14:42:36.230

如果您想充分利用标准 C++ 库，请使用输入迭代器和 a`vector<string>`而不是数组：

```
vector<string> words;
back_insert_iterator< vector<string> > back_iter (words);
istream_iterator<string> eos;
istream_iterator<string> iit (cin);
copy (iit, eos, back_iter); 
```

使用`vector<string>`修复了必须猜测将输入多少个单词的问题，以及因猜测错误而导致的后果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:59:38.330

The most compact solution:

```
vector<string> words; 
copy(istream_iterator<string>(cin), 
     istream_iterator<string>(), 
     back_inserter(words)); 
```

This is @dasblinkenlight's solution, written using temporary variables.

# c# - 获取“阅读器关闭时尝试调用读取无效”

> ID：13455963
> 
> 赞同：1
> 
> 时间：2012-11-19T14:36:11.907
> 
> 标签：c#, sql

我有以下代码（为了便于阅读，这里使用伪值），其中第一个连接返回大量数据（数千行）。SqlDataReader 一个一个地读取它们`reader.Read()`，然后打开一个新连接，用新值更新每一行：

```
using (SqlConnection conn = new SqlConnection(connString))
    using (SqlCommand cmd = new SqlCommand("sp1", conn))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@param1", param1);
        cmd.Connection.Open();
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                try
                {
                    string hash= utils.SHA256.Hashing((string)reader["firstRow"], saltValue);
                    using (SqlConnection conn2 = new SqlConnection(connString))
                    using (SqlCommand cmd2 = new SqlCommand("sp2", conn2))
                    {
                        cmd2.CommandType = CommandType.StoredProcedure;
                        cmd2.Parameters.AddWithValue("@param1", param1);
                        cmd2.Parameters.AddWithValue("@param2", param2);
                        cmd2.Connection.Open();
                        cmd2.ExecuteNonQuery();
                    }
                }
                catch (SqlException ex)
                {
                    //something
                }
            }
        }
    } 
```

但它会引发错误：

```
[InvalidOperationException: Invalid attempt to call Read when reader is closed.]
System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout) +640
System.Data.SqlClient.SqlDataReader.Read() +9 
```

在开发环境中它工作正常，但这里只有几百行。它立即抛出错误，所以它看起来不像是某种超时，但是嘿 - 我不知道......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:44:02.313

不知道为什么会发生这种情况，但是在迭代到同一个数据库的实时连接时执行查询确实是个坏主意。请记住，只要您使用 DataReader 迭代记录，连接就处于活动状态。

更糟糕的是连续**打开然后关闭**连接数千次。仅此一项就可以使任何数据库瘫痪。

更改您的逻辑，将所需的值存储在局部变量中（结构无关紧要），然后仅使用一个连接来执行您需要的所有存储过程。

例如：

```
using (SqlConnection conn = new SqlConnection(connString))
{
    conn.Open();

    List<string[]> values = new List<string[]>();
    using (SqlCommand cmd = new SqlCommand("sp1", conn))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@param1", param1);
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                try
                {
                    string hash= utils.SHA256.Hashing((string)reader["firstRow"], saltValue);
                    string anotherValue = (string)reader["secondRow"];
                    values.Add(new string[] { hash, anotherValue });
                }
                catch (SqlException ex)
                {
                    //something
                }
            }
            reader.Close();
        }
    }

    if (values.Count > 0)
    {
        using (SqlCommand cmd2 = new SqlCommand("sp2", conn))
        {
            cmd2.CommandType = CommandType.StoredProcedure;
            cmd2.Parameters.AddWithValue("@param1", null);
            cmd2.Parameters.AddWithValue("@param2", null);
            values.ForEach(items =>
            {
                cmd2.Parameters["@param1"].Value = items[0];
                cmd2.Parameters["@param2"].Value = items[1];
                cmd2.ExecuteNonQuery();
            });
        }
    }
    conn.Close();
} 
```

一个连接，一个命令执行所有存储过程。真的不需要更多。

# java - 将 Couchbase 与 Java 中的 memcached 协议一起使用

> ID：13455966
> 
> 赞同：0
> 
> 时间：2012-11-19T14:36:17.107
> 
> 标签：java, memcached, couchbase

有人可以指出可以与 Memcached 服务器和 Couchbase 服务器一起使用的 Java 代码示例。如果我理解正确，可以使用 spymemcached 与两台服务器进行通信。这是否意味着我可以使用相同的代码进行连接（显然使用不同的 url）获取并为它们放置值，或者存在一些差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:32:41.983

直接使用 memcached 协议有什么特别的原因吗？

使用 Couchbase 时的最佳实践是使用客户端 SDK（支持多种语言，您可以在此处查看[http://www.couchbase.com/develop](http://www.couchbase.com/develop)，包括 Java）？

使用 SDK 更好的原因（和你必须使用 Moxi 的相同原因）是因为能够支持你的应用程序的集群。

您的客户端 SDK 会将操作定向到正确的集群节点，但是当您添加新节点（或节点出现故障时）时，集群映射也会自动更新。

Java SDK 教程将指导您完成使用 Couchbase 开发应用程序的不同步骤： - [http://www.couchbase.com/docs/couchbase-sdk-java-1.1/tutorial.html](http://www.couchbase.com/docs/couchbase-sdk-java-1.1/tutorial.html)

那么，您可以使用 Java 客户端 SDK 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:15:41.673

根据 couchbase[文档](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-architecture-apis-memcached-protocol.html)，它支持文本 memcached 协议。因此，您可以使用任何可用的 java memcached 客户端并重用用于 memcached 的相同代码。Couchbase 仅通过 moxi 支持 memcached 协议。

# wordpress - WooCommerce 隐藏输入

> ID：13455968
> 
> 赞同：1
> 
> 时间：2012-11-19T14:36:22.690
> 
> 标签：wordpress, input, woocommerce, hidden

我正在尝试将隐藏输入的值从产品页面一直传递到最后。我在会话中看到它，但它不会留在里面！

知道如何实现吗？

# android - eclipse无法解析android原生代码

> ID：13455974
> 
> 赞同：4
> 
> 时间：2012-11-19T14:36:45.607
> 
> 标签：android, eclipse, android-ndk, serial-port, native

我正在尝试将[Android SerialPort API](http://code.google.com/p/android-serialport-api/)集成到我的项目中，但这样做时遇到了一些问题。

*   Eclipse 没有解析所有 JNI 和本机相关的方法和字段。这是[Android SerialPort API](http://code.google.com/p/android-serialport-api/)的 SerialPort.c 文件的开头：

    ```
    #include <termios.h>
    #include <unistd.h>
    #include <sys/types.h>
    #include <sys/stat.h>
    #include <fcntl.h>
    #include <string.h>
    #include <jni.h>

    #include "SerialPort.h"

    #include "android/log.h"
    static const char *TAG="serial_port";
    #define LOGI(fmt, args...) __android_log_print(ANDROID_LOG_INFO,  TAG, fmt, ##args)
    #define LOGD(fmt, args...) __android_log_print(ANDROID_LOG_DEBUG, TAG, fmt, ##args)
    #define LOGE(fmt, args...) __android_log_print(ANDROID_LOG_ERROR, TAG, fmt, ##args) 
    ```

    第一个define-statement有效，但在其他两个中，eclipse是marking`ANDROID_LOG_DEBUG`和`ANDROID_LOG_ERROR`with `Symbol XXX could not be resolved`，以及`JNIEnv *env`串口方法内部的方法的每次调用。

    但是 JNIEXPORT 或 JNICALL 语句没有错误。

*   当我试图解决这个问题时，出现了一个问题。我下载了库的所有文件并将它们复制到网站上给出的目录中。但似乎 JNI 部分出了点问题，我无法调用`open()`以获取我的串行设备。

    ```
     11-19 14:18:22.232: D/dalvikvm(17898): Trying to load lib /data/data/master.androidsirfparser/lib/libserial_port.so 0x416a8570
     11-19 14:18:22.232: D/dalvikvm(17898): Added shared lib /data/data/master.androidsirfparser/lib/libserial_port.so 0x416a8570
     11-19 14:18:22.232: D/dalvikvm(17898): No JNI_OnLoad found in /data/data/master.androidsirfparser/lib/libserial_port.so 0x416a8570, skipping init
     11-19 14:18:22.232: W/dalvikvm(17898): No implementation found for native Lmaster/serial/SerialPort;.open (Ljava/lang/String;II)Ljava/io/FileDescriptor;
     11-19 14:18:22.240: W/dalvikvm(17898): threadid=11: thread exiting with uncaught exception (group=0x40a471f8)
     11-19 14:18:22.240: E/AndroidRuntime(17898): FATAL EXCEPTION: Thread-651
     11-19 14:18:22.240: E/AndroidRuntime(17898): java.lang.UnsatisfiedLinkError: open
     11-19 14:18:22.240: E/AndroidRuntime(17898):   at master.serial.SerialPort.open(Native Method)
     11-19 14:18:22.240: E/AndroidRuntime(17898):   at master.serial.SerialPort.<init>(SerialPort.java:61)
     11-19 14:18:22.240: E/AndroidRuntime(17898):   at master.androidsirfparser.ReadThread.init(ReadThread.java:38)
     11-19 14:18:22.240: E/AndroidRuntime(17898):   at master.androidsirfparser.ReadThread.run(ReadThread.java:48) 
    ```

    我总是收到“找不到实现”的消息。

为了解决问题二，我必须先解决问题一，因为 Eclipse 不允许我在不解决代码中的编译错误的情况下启动我的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:11:11.037

我重新安装了我的 java 平台，eclipse IDE，添加了 android eclipse 插件，现在它可以工作了。我不知道为什么。

# android - 在android中将宽度指定为0dp并带有权重

> ID：13455975
> 
> 赞同：1
> 
> 时间：2012-11-19T14:36:50.860
> 
> 标签：android, textview

我有文本视图，我想使用权重和宽度，但我想将宽度作为 0dp 传递，如果我在布局参数中将宽度设置为 0，它不会在屏幕上呈现。

如何通过代码动态地将宽度设置为 0dp

我什至尝试将宽度指定为 LayoutParams.Wrap_Content，但这也没有奏效

```
LinearLayout.LayoutParams tv_params_level = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 0.1f); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:54:17.787

如果通过 xml 将 TextView 的宽度设置为**0dp**，则必须将其权重设置为**1**或其他大于 0 的值。以编程方式设置宽度：

```
LinearLayout.LayoutParams tv_params_level = new LinearLayout.LayoutParams(0,
    LayoutParams.WRAP_CONTENT, 1.0); 
```

然后将此布局参数设置为您的 TextView：

```
tv.setLayoutParams(tv_params_level); 
```

# django - 某些页面需要 ssl 的 django 应用程序的 apache 设置

> ID：13455977
> 
> 赞同：7
> 
> 时间：2012-11-19T14:36:53.947
> 
> 标签：django, ssl, apache2

我的 django 应用程序（让我称之为`partlysecureapp`）有一个对所有人可见的索引页面。所有其他页面（可从索引页面上的链接访问）需要用户登录。我想在 apache2 中使用带有 SSL 的应用程序。

我已经有一个`mysecureapp`使用 SSL 部署在 apache 上的应用程序（比如），它包含所有需要用户登录的页面。我为此设置了如下配置。

我的 apache2 所在`/etc/apache2`的目录结构如下。

```
/etc/apache2/
            |--conf.d---*charset,security,localized-error-pages* 
            |---mods-available---...
            |---mods-enabled---...
            |---sites-available---default,default-ssl,ssl
            |---sites-enabled---shortcut to ssl
            |---apach2.conf
            |---httpd.conf
            |---ports.conf
            |---magic
            |---envvars 
```

对于`secureapp`，我已经在文件中设置了这个`sites-available/ssl`

```
<VirtualHost *:443>
    ServerAdmin webmaster@localhost

    DocumentRoot /home/dev/python/django/mysecureapp

        SSLEngine on
        SSLOptions +StrictRequire
        SSLCertificateFile /etc/ssl/certs/server.crt
        SSLCertificateKeyFile /etc/ssl/private/server.key
    ...
    WSGIScriptAlias /mysecureapp /home/dev/python/django/mysecureapp/mysecureapp.wsgi
    Alias /site_media/ /home/dev/python/django/mysecureapp/media/

</VirtualHost> 
```

这完美..

要部署我的`partlysecureapp`,

`http://127.0.0.1:8080/partlysecureapp/`需要显示所有人都可以访问的索引页面。但

```
../partlysecureapp/link1/
../partlysecureapp/link2/
../partlysecureapp/link3/ 
```

需要登录并且应该通过 ssl 提供。

我想，我需要`WSGIScriptAlias`为我的`partlysecureapp`. 我需要添加另一个`DocumentRoot`吗`partlysecureapp`？如何告诉apache`8080`通过ssl端口从端口和其他人提供索引页面？

截至目前`/etc/apache2/httpd.conf`为空白。只有`sites-available/ssl`文件有一个`VirtualHost`元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T22:40:24.833

首先，让我们将这里的关注点分开：一件事是要求登录，另一件事是要求 SSL。前者是 Django 特有的，应该在你的视图中处理；对于后者，恕我直言，您应该考虑通过 SSL 提供**所有**服务的可能性，这将大大简化您的设置。当然，有一些开销，由您决定它是否对您的特定情况重要。

也就是说，对于您提出的方案：

1.  要从纯 HTTP 提供**任何**服务，您需要侦听端口`80`（或者，在您的情况下，`8080`）。因此，您需要单独`VirtualHost`绑定到该端口，并为其自身使用单独的 WSGI 应用程序。

2.  要允许来自此虚拟主机的单个路径（您的索引文件），但要求其他所有内容都由受 SSL 保护的主机提供，您可以使用[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

    ```
    RewriteEngine On
    RewriteRule ^/partlysecureapp$ - [L,NC]
    RewriteRule (.*) https://127.0.0.1/partlysecureapp%{REQUEST_URI} [L,R=301] 
    ```

    第一条规则告诉 Apache 如果路径与您的根路径**完全相同**，则不要执行任何重定向；第二个将其他所有内容重定向到`https`（将由您的`*:443`虚拟主机处理）。

    （注意：您可能也希望在`/site_media`没有 SSL 的情况下提供服务）

3.  然后你可以简单地添加你的 WSGI 别名；即使 Django 将用户发送到不同的页面，Apache 也会确保该页面是通过 SSL 提供的。

您的最终代码将类似于：

```
<VirtualHost *:8080>
    ServerAdmin webmaster@localhost

    DocumentRoot /home/dev/python/django/partlysecureapp

    RewriteEngine On
    RewriteRule ^/partlysecureapp$ - [L,NC]
    RewriteRule ^/site_media - [L,NC]
    RewriteRule (.*) https://127.0.0.1/partlysecureapp%{REQUEST_URI} [L,R=301]

    ...
    WSGIScriptAlias /partlysecureapp /home/dev/python/django/partlysecureapp/partlysecureapp.wsgi
    Alias /site_media/ /home/dev/python/django/partlysecureapp/media/
</VirtualHost> 
```

您的受 SSL 保护的虚拟主机的代码将与您的代码相同`mysecureapp`（`partlysecureapp`当然，使用它；另请注意，您可以让**两个**应用程序并排运行，只需注意您的`MEDIA`和`STATIC`路径）。

# java - 使用图像填充矩形

> ID：13455981
> 
> 赞同：2
> 
> 时间：2012-11-19T14:37:05.693
> 
> 标签：java, image, user-interface, awt, graphics2d

使用 AWT，如何将图像导入到您绘制的矩形中？我只想将背景分配给那个特定的矩形。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T06:22:40.497

1.  设置`Rectangle`为剪辑区域。
2.  在某个点绘制图像，使其（部分）位于剪切区域内。
3.  清除剪辑。
4.  绘制矩形。

正如在[这个答案](https://stackoverflow.com/a/6296381/418556)中看到的（这里的形状是文本，但同样的原则适用）。

![](../Images/ece95cff85ba4d2b70119d5522f685a6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:54:14.683

最常见的方法是覆盖`paint`组件中的方法。看看[Graphics.drawImage()](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)。示例：[绘制图像](http://docs.oracle.com/javase/tutorial/2d/images/drawimage.html)

如果您决定迁移到`Swing`，则可以利用 Swing 的优化绘画模型，覆盖`paintComponent`而不是`paint`.

请参阅：[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

# java - 在 JS 中每 5 秒使用 XMLHttpRequest 发送空请求在 Internet Explorer 9 中返回 304

> ID：13455982
> 
> 赞同：2
> 
> 时间：2012-11-19T14:37:08.767
> 
> 标签：java, javascript, html, internet-explorer-9, xmlhttprequest

我正在用java编写一个网络应用程序。在我的 html 文件中，我有一个小 javascript，它每五秒钟向服务器发送一个空请求以保留会话 (HeartBeat)。

我正在使用`XMLHttpRequest`对象将请求发送到`Tomcat`服务器。

问题在于`IE9`，对于第一个请求，我会获得状态`200`，之后，对于每个请求，我都会得到`304`答复。在 Firefox 和 Chrome 中它运行良好。

如何在 IE 中继续从我的 Javascript 发送空请求而不收到 304。

我的代码是：

```
<script>
var HeartBeatTimer; 
function StartHeartBeat(){
   // pulse every 30 seconds
    if (HeartBeatTimer == null)
      HeartBeatTimer = setInterval("HeartBeat()", 1000 * 5);
}

function HeartBeat(){
            var HTTP_Response = new XMLHttpRequest();
    HTTP_Response.open("GET", myurl , true);
    HTTP_Response.send(null);    
} 
```

```
my servlet that get the request:

protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException { 
```

}

这个脚本的目的是让我的会话保持活跃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:42:51.630

将随机部分添加到 url 或发送`POST`请求

```
myurl = myurl + "?_=" + (+new Date()); 
```

或者

```
HTTP_Response.open("POST", myurl, true); 
```

对于`POST`-version，您还需要调整 servlet 代码。

并且不要使用字符串作为`setInterval`or的第一个参数`setTimeout`。只需传递函数本身。

```
setInterval(HeartBeat, 1000 * 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:42:54.367

使用以下内容：

```
HTTP_Response.open("GET", myurl + "&rand=" + Date.now(), true) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:07:11.763

您可以通过发送以下 HTTP 标头来禁止缓存：

```
response.setHeader("Pragma", "no-cache");
response.setDateHeader("Expires", 1L);
response.setHeader("Cache-Control", "no-cache");
response.addHeader("Cache-Control", "no-store"); 
```

# objective-c - Facebook库登录对话框如何修改其外观？

> ID：13455986
> 
> 赞同：0
> 
> 时间：2012-11-19T14:37:16.400
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

使用 facebook 库登录我调用这个方法：

```
+ (BOOL)openActiveSessionWithReadPermissions:(NSArray*)readPermissions
                                allowLoginUI:(BOOL)allowLoginUI
                           completionHandler:(FBSessionStateHandler)handler; 
```

如果 allowLoginUI:(BOOL)allowLoginUI 参数设置为 yes，则 facebook 登录对话框将全屏显示。有什么办法可以改变它并使登录对话框不全屏显示？我希望它只出现在前台并占据大部分屏幕尺寸，但不是全屏。

我已经看到这样做了，但我想知道当前的 facebook 库是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:43:19.167

我不相信您可以修改登录 UI。我看到开发人员因为修改 facebook SDK UI 包的其他方面（即登录按钮）而被拒绝，但这显然是不可接受的。

我最好的猜测是将allowUI设置为no，并模仿您自己的界面。

虽然，从用户体验的角度来看，我更希望你保持 FB SDK 定义的风格。

# java - Arraylist 输出不如预期

> ID：13455987
> 
> 赞同：0
> 
> 时间：2012-11-19T14:37:20.503
> 
> 标签：java, arraylist

此代码产生的输出没有意义，可能是由于我缺乏理解。如果我错了，请纠正我

```
import java.util.*;
class DemoA
{
  public DemoA(){
    System.out.println("DemoA object created");
  }
  public String methodA() {
    return "methodA in DemoA";
  }
}
class DemoB extends DemoA
{
  public DemoB(){
    super();
    System.out.println("DemoB object created");
  }
  public String methodA() {
   return "methodA in subclass (DemoB)";
  }
}
public class ExamQ1b
{
  public static void main(String[] args) {
    ArrayList<DemoA> aList = new ArrayList<DemoA>();
    aList.add(new DemoA());
    aList.add(new DemoB());
    for (DemoA obj: aList)
      System.out.println(obj.methodA());
  }
} 
```

输出是

```
DemoA object created
DemoA object created
DemoB object created
methodA in DemoA
methodA in subclass (DemoB) 
```

起初我不明白输出是如何产生的，但后来我使用了调试功能，发现它为什么会这样，并发现了一些相当令人困惑的东西（并不令人惊讶）。

为什么这些代码行会产生输出？

```
aList.add(new DemoA());
    aList.add(new DemoB()); 
```

以上几行的输出是这些，但在我看来，这些应该只是添加到列表中而不产生任何输出，我在这里缺少什么？

```
DemoA object created
DemoA object created
DemoB object created 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:40:03.487

在`DemoB`s 构造函数中，

```
 public DemoB(){
    super();
    System.out.println("DemoB object created");
  } 
```

你调用`super()`which 调用构造函数`DemoA`。由于两个构造函数都有语句，因此在创建对象`println`时将打印这两行。`DemoB`

> DemoA 对象已创建
> 
> DemoB 对象已创建

创建对象时会打印这些行，因为`System.out.println("DemoB object created");`它们位于创建对象时调用的构造函数方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:40:07.130

您的构造函数中有打印语句。当您编写“new DemoA()”时，它们会被调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:40:47.790

当您调用 new DemoA() 时，您调用输出 DemoA Created 的构造函数，当您实例化新的 DemoB 时，在这种情况下（显式）调用超级构造函数，输出 DemoA Created，然后调用 DemoB 构造函数并输出 demoB created ，所以一切都如预期的那样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T14:43:39.720

aList.add(new DemoA());

=> DemoA 对象已创建（构造函数 A）

aList.add(new DemoB());

=> DemoA 对象已创建（构造函数 A 由 super() 调用，因为 DemoA 是 DemoB 的父类） => 已创建 DemoB 对象（构造函数 B）

第一个 System.out.println(obj.methodA());

=> DemoA中的methodA（DemoA中的methodA）

第二个 System.out.println(obj.methodA());

=> DemoA中的methodA（DemoB中的methodA）

# python - Beautifulsoup 4 prettify 输出 XHTML，而不是 HTML

> ID：13455988
> 
> 赞同：4
> 
> 时间：2012-11-19T14:37:21.090
> 
> 标签：python, html, beautifulsoup

我正在尝试解析和美化一堆使用 Microsoft FrontPage 制作的文件。Beautifulsoup 可以毫无问题地解析它们，但是当我尝试使用 打印输出时，像or这样的`prettify()`标签被重写为and 。`<meta>``<br>``<meta ... />``<br/>`

有没有办法强制 HTML 输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:48:45.377

不，没有办法强制该`.prettify()`方法不输出符合 XHTML 的 HTML。

# c++ - c++程序不识别库

> ID：13455993
> 
> 赞同：0
> 
> 时间：2012-11-19T14:37:39.797
> 
> 标签：c++, visual-c++

当我构建此解决方案时，#include 库带有红色下划线，我收到以下错误：

> 错误 1 ​​错误 MSB8008：指定的平台工具集 (v110) 未安装或无效。请确保选择了受支持的 PlatformToolset 值。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets 518 6 G00290342BrianVarley.c

一些帮助将不胜感激。

```
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
#include <string>
#include <windows.h>
#include <ctime>
#include <string.h>

using namespace std;

#define MAX 80

//declaring functions
int showMenu();     
void generatePass();    
void validatePass();
int countLetters(char *,int *,int *,int *,int *);

main()
{

    int iChoice;

    // have menu appear, user makes decision, do work, reshow menu
    // do this until user enters 5

    do
    {    
        iChoice = showMenu();    

    }while(iChoice != 3);

    printf("\n\n\n");
    system("pause");

}//end of main

//Methods placed here:

//showMenu method calls program menu,either 1.generate password,2.enter password and validate. or 3.exit(close program)
int showMenu()
{
    int iChoice;

    system("cls");
    printf("\n\n\t\tWelcome to Password Generator and Validator\n\n");
    printf("\n\t\t1\. Generate");
    printf("\n\t\t2\. Validate");
    printf("\n\t\t3\. Exit");

    printf("\n\n\t\tEnter your menu choice: ");
    fflush(stdin);
    scanf("%d", &iChoice);

    // user enters one of 3 values
    // generate,validate or exit program

    switch(iChoice)
    {
        case 1:     // generate
        {
            generatePass();
            string random_str = generatePass(15);
            printf( "\n\n\t\tYour new password is : ","%d",random_str);

            break;
        }
        case 2:     // validate
        {
            validatePass();

            break;
        }
        case 3:     // exit
        {
            printf("\n\nProgram exiting!...");
            system.exit(0);
            break;
        }
        default:
        {
            break;
        }
    }//end of switch

    return(iChoice);
} //end of showMenu

//method to generate a random password for user following password guidelines.  
string generatePass(int length)
{
    printf("\n\n\t\tGenerate Password selected ");
    printf("\n\n\t\tPassword creation in progress... ");

    srand(time(0));
    string str = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!£$%^&*()_+=#@;";
    int pos;
    while(str.size() != length) {
    pos = ((rand() % (str.size() - 1)));
    str.erase (pos, 1);
    }
    return str;
}//end of generatePass method.

//method to validate a user generated password following password guidelines.
validatePass()
{
    char password[MAX+1];
    int iChar,iUpper,iLower,iSymbol,iNumber;

    //shows user password guidelines
    printf("\n\n\t\tPassword rules: ");
    printf("\n\n\t\t 1\. Passwords must be at least 9 characters long and less than 15 characters. ");
    printf("\n\n\t\t 2\. Passwords must have at least 2 numbers in them.");
    printf("\n\n\t\t 3\. Passwords must have at least 2 uppercase letters and 2 lowercase letters in them.");
    printf("\n\n\t\t 4\. Passwords must have at least 1 symbol in them (eg ?, $, £, %).");
    printf("\n\n\t\t 5\. Passwords may not have small, common words in them eg hat, pow or ate.");

    //gets user password input
    printf("\n\n\t\tEnter your password following password rules: ");
    gets(password);

    iChar = countLetters(inString,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);

    if(iUpper < 2)
    {
        printf("Not enough uppercase letters!!!\n");

    }
    else if(iLower < 2)
    {
        printf("Not enough lowercase letters!!!\n");

    }
    else if(iSymbol < 1)
    {
        printf("Not enough symbols!!!\n");

    }
    else if(iNumber < 2)
    {
        printf("Not enough numbers!!!\n");

    }
    else if(iTotal < 9 && iTotal > 15)
    {
        printf("Not enough characters!!!\n");

    }
    printf("\n\n\n Your new password is verified " + password);

    printf("\n\n\n");
    system("pause");

}//end validatePass method

int countLetters(char * Password,int * Upper,int * Lower,int * Symbol,int * Number)
{
    int iTotal = 0,iC,tU = 0,tL = 0,tS = 0,tN = 0;

    //strlen- function that returns length
    for (iC = 0;iC < strlen(Password);iC++)
    {

        printf("%d",Password[iC]);
        //uppercase letters are in the range 65 - 90
        //lowercase letters are in the range 97 - 122

        //check upper case

        if((Password[iC] < 64) && (Password[iC] < 91))
        {
            tU++;
            iTotal++;

        }
        else if((Password[iC] > 96) && (Password[iC] < 123))
        {
            tL++;
            iTotal++;

        }
        else if((Password[iC] > 32) && (Password[iC] < 48))
        {
            tS++;
            iTotal++;

        }
        else if((Password[iC] > 47) && (Password[iC] < 58))
        {
            tN++;
            iTotal++;

        }

        *Upper = tU;/*set value at memory address = tU,passing by reference saves memory used.*/
        *Lower = tL;
        *Symbol = tS;
        *Number = tN;

    }//end for statement

    return (iTotal);
}//end of countLetters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:40:39.890

感谢您的帮助。我发现这是我使用 vs2012 创建的项目并转移到具有 v100 工具集的 vs2010 的问题？所以只需复制代码并在 vs2010 中创建一个新的 cpp 项目。

# ios6 - UITextAlignmentCenter 和 NSTextAlignmentCenter 的区别

> ID：13455996
> 
> 赞同：2
> 
> 时间：2012-11-19T14:37:41.803
> 
> 标签：ios6, text-alignment

`NSLineBreakByWordWrapping`和有什么区别`UILineBreakModeWordWrap`？

例如，当我使用此代码时：

```
button.titleLabel.textAlignment = UITextAlignmentCenter; 
```

Xcode 说：

> UITextAlignmentCenter 已弃用：首先在 iOS 6.0 中弃用

但是当我使用时`NSTextAlignmentCenter`，它很好 - 那么可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:00:59.793

在 iOS 6 中不推荐使用的原因 s`UITextAlignment`和实际`textAlignment`属性的类型是`NSTextAlignment`. 请参阅：[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/textAlignment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T15:55:57.690

```
#ifdef __IPHONE_6_0
# define ALIGN_CENTER NSTextAlignmentCenter
#else
# define ALIGN_CENTER UITextAlignmentCenter
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T05:21:45.890

这是带有示例的解决方案：

```
#ifdef __IPHONE_6_0
# define ALIGN_CENTER NSTextAlignmentCenter
#else
# define ALIGN_CENTER UITextAlignmentCenter
#endif

UILabel* your_label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
label.text = @"CENTER TEXT";
label.textAlignment = ALIGN_CENTER;
[self addSubview:your_label]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-14T22:02:25.733

理由是：

*   UITextAlignmentCenter 仅适用于 IOS
*   NSTextAlignmentCenter 适用于 IOS 和 MacOSX

Apple 也希望帮助/推动 IOS 开发人员为 MacOSX 开发。