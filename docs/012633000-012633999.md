# StackOverflow 问答 12633000-12633999

# sql - Oracle相关子查询问题

> ID：12633002
> 
> 赞同：0
> 
> 时间：2012-09-28T02:56:42.587
> 
> 标签：sql, oracle, query-optimization, subquery, correlated-subquery

我有以下架构

```
Invoices
=================
invoice_number
account_id
invoice_amount
invoice_date
status ("Paid","Not Paid") 
```

我正在尝试编写查询以获取包含以下信息的所有发票...

*   发票号码
*   发票日期
*   帐户ID
*   发票金额
*   此帐户 ID 的最后支付发票金额（此行的发票日期之前）

我对最后一项（最后支付的发票金额）有疑问。到目前为止，我已经...

```
select 
inv2.invoice_number,
inv2.invoice_date,
inv2.account_id,
inv2.invoice_amount,
(
select * from (
    select inv.invoice_amount
      from invoices inv
      where inv.account_id = inv2.account_id
      and inv.status = 'PAID'
      and inv.invoice_date < inv2.invoice_date
      order by inv.invoice_date desc
    )
where rownum <=1
) as last_paid_amount
from
invoices inv2 
```

我正在尝试重构它以不使用相关子查询，因为我的数据集的大小使得这非常昂贵。如何重构以使用不相关的子查询。这甚至可能吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:12:40.600

我可能在这里搞砸了`order by`子句，因为我现在没有机会测试它，但想法是使用 LAG 函数：

```
select 
  inv2.invoice_number,
  inv2.invoice_date,
  inv2.account_id,
  inv2.invoice_amount,
  lag(invoice_amount) over(
    partiton by account_id 
    order by invoice_date, decode(status, 'PAID', 1, 0)  
  ) last_paid_amount
from
invoices inv2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T18:52:31.250

```
select a.*, case when rnk = 1 then invoice_amount end as last_paid_amount
from(select 
inv2.invoice_number,
inv2.invoice_date,
inv2.account_id,
inv2.invoice_amount,
row_number() over(partition by invoice_number, account_id, (case when status = 'PAID' then 0 else 1 end), invoice_date desc) as rnk
from
invoices inv2) a 
```

顺便说一句，我不确定 LAG 是否会在这里工作。

# php - 将 mysql PDO 与 UPDATE 命令一起使用，但不要覆盖所有值

> ID：12633004
> 
> 赞同：2
> 
> 时间：2012-09-28T02:56:46.140
> 
> 标签：php, mysql, pdo

我目前正在使用一个 PHP 框架，该框架基本上使用 PDO 的包装器，并且被一个问题难住了。我有一个页面，其中包含任意数量的帖子变量，可以是以下任意组合：

```
":fullname" => $_POST['fullName'],
    ":universityID" => $_POST['university'], 
    ":gpa" => $_POST['gpa'], 
    ":major" => $_POST['major'], 
    ":gradYear" => $_POST['gradYear'], 
    ":photo" => "", 
    ":description" => $_POST['description'], 
    "howDidYouHear" => $_POST['howDidYouHear'] 
```

我有一个更新语句，应该是这样的：

```
$affectedRows = getDatabase()->execute('UPDATE user SET universityID = :universityID, 
gpa = :gpa, etc, WHERE fullName=:fullName', array(':universityID' =>     
$_POST['universityID'], ':gpa' => $_POST['gpa'])); 
```

现在的问题是，如果我执行这种更新语句，我将覆盖表中的旧数据，其中大部分仍然有效。我想要做的只是更新我有新信息的行，而不是触及其他行。有没有办法在查询中找出哪些应该和不应该改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:01:21.930

假设如果您在某个字段中传递一个空值，您希望它保留原始值。`if`在您的`UPDATE`子句中使用，例如

```
UPDATE user 
SET universityID = IF(:universityID = '', universityID, :universityID),
    gpa = IF(:gpa = '', gpa, :gpa), .... 
```

或类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:57:24.103

```
$sets = array();
$vals = array();

for ($_POST as $key => $value) {
  if ($value == '') { continue; }
  switch ($key) {
  case "university":
    $sets[] = 'universityID = ?';
    $vals[] = $value;
    break;
  case "gpa":
  case "major":
  case "gradYear":
  case "description":
  case "howDidYouHear":
    $sets = "$key = ?";
    $vals = $value;
    break;
  }

$sql = 'UPDATE user SET ' . implode(', ', $sets) . 'WHERE fullname = ?';
$vals[] = $_POST['fullname'];
$affectedRows = getDatabase()->execute($sql, $vals); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:58:59.283

进行选择查询以获取当前数据，与您的帖子数据进行比较，并仅更新更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:00:38.260

`WHERE`在您的条款中添加更多条件。

```
SELECT
 ...
WHERE fullName=:fullName
  AND thisRowIsNew=1 
```

# php - 如何修复 Yii 中的错误 CDbException？

> ID：12633005
> 
> 赞同：0
> 
> 时间：2012-09-28T02:56:47.030
> 
> 标签：php, yii

我制作了一个名为“Customer”的表格，我想制作一个简单的 Yii 创建和查看应用程序。这是我在 CustomerController.php 中的一段代码：

```
class CustomerController extends Controller
{

    public $layout = '//layouts/column2';

    public function actionCreate()
    {

        $model = new Customer();

        $this->redirect(array('view', 'id' => $model->id));

        $this->render('create', array(
            'model' => $model,
        ));
    }

    public function actionView()
    {

        $model = new Customer();

        $result = $model->viewCustomer();

        foreach ($result as $row) {

            echo $row["title"];
            echo $row["fname"];
            echo $row["lname"];
            echo $row["addressline"];
            echo $row["town"];
            echo $row["zipcode"];
            echo $row["phone"];
        }

        $this->render('view', array(
            'model' => $this->$model(),
        ));
    }
} 
```

这是我的模型中名为 Customer.php 的代码

```
public function createCustomer()
{
    $connection = Yii::app()->db;
    $sql = "INSERT INTO Customer (title,fname,lname,addressline,town,zipcode,phone)VALUES(:title,:fname,:lname,:addressline,:town,:zipcode,:phone)";
    $command = $connection->createCommand($sql);
    $command->bindParam(":title", $title, PDO::PARAM_STR);
    $command->bindParam(":fname", $fname, PDO::PARAM_STR);
    $command->bindParam(":lname", $lname, PDO::PARAM_STR);
    $command->bindParam(":addressline", $addressline, PDO::PARAM_STR);
    $command->bindParam(":town", $town, PDO::PARAM_STR);
    $command->bindParam(":zipcode", $zipcode, PDO::PARAM_STR);
    $command->bindParam(":phone", $phone, PDO::PARAM_STR);
    $result = $command->execute();

    if ($result == 1) {
        return "ok";
    }

    public function viewCustomer()
    {
        $connection = Yii::app()->db;
        $sql = "Select * from Customer";
        $dataReader = $connection->createCommand($sql)->query();
        $dataReader->bindColumn(1, $title);
        $dataReader->bindColumn(2, $fname);
        $dataReader->bindColumn(3, $lname);
        $dataReader->bindColumn(4, $addressline);
        $dataReader->bindColumn(5, $town);
        $dataReader->bindColumn(6, $zipcode);
        $dataReader->bindColumn(7, $phone);
        $result = $dataReader->queryAll();
        return $result;
    }

} 
```

但是，我总是遇到这种错误：

CDbException CDbCommand 未能执行 SQL 语句：CDbCommand 未能准备 SQL 语句：SQLSTATE[HY000]：一般错误：1 没有这样的表：客户。执行的 SQL 语句是：Select * from Customer。

我的朋友说我没有获得价值。我该如何解决这个问题？请帮帮我。先感谢您。顺便说一句，我正在使用 PDO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:03:40.557

我认为您是缺乏 oops 概念的编程新手。请首先尝试理解 oops 概念，而不是您能够轻松理解 Yii。

现在我无法测试您的代码，但可以为您提供建议。

你的控制器::

```
class CustomerController extends Controller
{

     public $layout='//layouts/column2';

     public function actionCreate()
     {

        $model = new Customer();

        $model = $model->find();

        if($model->id)
           $this->redirect(array('view','id'=>$model->id));

        $this->render('create',array(
           'model'=>$model,
       ));

    }

    public function actionView()
    {

     $model = new Customer();

     $result = $model->viewCustomer();    

     foreach ($result as $row) {

        echo $row["title"];
        echo $row["fname"];
        echo $row["lname"];
        echo $row["addressline"];
        echo $row["town"];
        echo $row["zipcode"];
        echo $row["phone"];
     }

     $this->render('view',array(
        'model'=>$model,
    ));
  }
}. 
```

您的型号::

```
public function createCustomer()
{

     $connection = Yii::app()->db;

     $sql = "INSERT INTO Customer (title,fname,lname,addressline,town,zipcode,phone)VALUES(:title,:fname,:lname,:addressline,:town,:zipcode,:phone)";

    $command = $connection->createCommand($sql);

    $command->bindParam(":title",$this->title,PDO::PARAM_STR);

    $command->bindParam(":fname",$this->fname,PDO::PARAM_STR);

    $command->bindParam(":lname",$this->lname,PDO::PARAM_STR);

    $command->bindParam(":addressline",$this->addressline,PDO::PARAM_STR);

    $command->bindParam(":town",$this->town,PDO::PARAM_STR);

    $command->bindParam(":zipcode",$this->zipcode,PDO::PARAM_STR);

    $command->bindParam(":phone",$this->phone,PDO::PARAM_STR);

    $result =  $command->execute();

    if ($result == 1){

        return "ok";

    }
} 
```

公共功能视图客户（）{

```
 $connection = Yii::app()->db;

    $sql = "Select * from Customer";

    $dataReader = $connection->createCommand($sql)->query();

    $dataReader->bindColumn(1,$this->title);

    $dataReader->bindColumn(2,$this->fname);

    $dataReader->bindColumn(3,$this->lname);

    $dataReader->bindColumn(4,$this->addressline);

    $dataReader->bindColumn(5,$this->town);

    $dataReader->bindColumn(6,$this->zipcode);

    $dataReader->bindColumn(7,$this->phone);

    $result = $dataReader->queryAll();

    return $result;

  } 
```

我希望我对您的代码所做的更改能够奏效。如果您尝试使用 CDbCriteria 获取您的记录并使用 CActiveRecord 的 save() 函数将记录保存在您的数据库中，那将是最好的。

# eclipse - 为创建和导入的每个 Eclipse 项目添加资源过滤器

> ID：12633008
> 
> 赞同：0
> 
> 时间：2012-09-28T02:57:01.997
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我想编写一个插件，只将资源过滤器添加到创建/导入的 .project 文件中。我知道以下添加资源过滤器的方法。

```
IProject.createFilter(IResourceFilterDescription.EXCLUDE_ALL | IResourceFilterDescription.FOLDERS | IResourceFilterDescription.INHERITABLE, new FileInfoMatcherDescription("org.eclipse.ui.ide.multiFilter", theFilter),  IResource.BACKGROUND_REFRESH, monitor); 
```

我想知道我可以挂钩此代码的正确扩展点是什么。我找不到适用于各种项目（不仅仅是 java 项目）的通用地方。

我的目的是过滤掉大量来自专有源代码控制系统的不需要的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:10:49.873

您可以使用 IResourceChangeListener。[你可以在这里](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/resAdv_events.htm)找到更多信息。

如果你使用的是 JDT，你也可以使用

```
JavaCore.addElementChangedListener(listener); 
```

监听器必须实现`org.eclipse.jdt.core.IElementChangedListener`。

# android - 调整图像大小以适合选项卡

> ID：12633009
> 
> 赞同：0
> 
> 时间：2012-09-28T02:57:35.603
> 
> 标签：android, image, tabs, resize

我为两个标签使用了两个不同的图像。但是图像没有填满标签。显示了一些空格。我希望图像占据标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:25:27.217

您必须在 xml 代码中使用“fill_parent”：-

```
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
```

# html - 为什么我会得到 3px 的右边距？

> ID：12633012
> 
> 赞同：0
> 
> 时间：2012-09-28T02:58:33.120
> 
> 标签：html, css

我在第 4 个表格中的每个图像上都获得了 3px 的边距。

我认为这是我的 html 电子邮件出现问题的原因。但我似乎无法弄清楚为什么会这样！

这是我的html：

```
 <table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse; margin:0px; padding:0px;" width="600">
        <tr>
            <td style="border-collapse: collapse;" width="600" height="179">
            <div style="width:600px; height:179px; overflow:hidden;">
                <a href="http://www.anzie.com/"><img align="left" alt="Gold Rush" height="179" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_01.jpg" style="height: 179px;  width: 600px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left; " width="600" /></a>
            </div>
            </td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse; margin:0px; padding:0px;" width="600">
        <tr>
            <td style="border-collapse: collapse;" width="600" height="25">
                <div style="width:600px; height:25px; overflow:hidden;"><a href="http://www.anzie.com/viewall_gold.php"><img align="left" alt="Shop Gold" height="25" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_02.1.jpg" style="height: 25px;  width: 600px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left; " width="600" /></a>
                </div>
            </td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse; margin:0px; padding:0px;" width="600">
        <tr>
            <td style="border-collapse: collapse;" width="600" height="200">
                <div style="width:600px; height:200px; overflow:hidden;">
                <a href="http://www.anzie.com"><img align="left" alt="Gold Rush" height="200" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_03.jpg" style="height: 200px;  width: 600px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="600" /></a>
                </div>
            </td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse; margin:0px; padding:0px;" width="600">
        <tr>
            <td style="border-collapse: collapse;" width="226">
                <a href="http://www.anzie.com/dew-drop-collection-etoile-mini-ring-moonstone-p-2454.html"><img align="left" alt="Vintage Accent Ring" height="221" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_04.jpg" style="width: 226px; height: 221px;  display:block; vertical-align: bottom; float: left;" width="226" /></a></td>
            <td style="border-collapse: collapse;" width="159">
                <a href="http://www.anzie.com/aztec-earrings-studs-mini-moonstone-clear-topaz-p-2508.html"><img align="left" alt="Minature Studs" height="221" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_05.jpg" style="height: 221px;  width: 159px;  display:block; vertical-align: bottom; float: left;" width="159" /></a></td>
            <td style="border-collapse: collapse;" width="215">
                <a href="http://www.anzie.com/royale-ring-round-moonstone-p-1919.html"><img align="left" alt="Heirloom Ring" height="221" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_06.jpg" style="height: 221px;  width: 215px;  display:block; vertical-align: bottom; float: left;" width="215" /></a></td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse; margin:0px; padding:0px;" width="600">
        <tr>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/dew-drop-collection-etoile-earrings-moonstone-p-2498.html"><img align="left" alt="Evening Earrings" height="324" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/evening_earrrings.jpg" style="height: 324px;  width: 226px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="226" /></a></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/aztec-necklace-sun-pendant-moonstone-diamonds-p-2509.html"><img align="left" alt="Statement Pendant" height="324" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/neckalce_center.jpg" style="height: 324px;  width: 159px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="159" /></a></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/dew-drop-collection-bubble-stackable-bangle-gold-set-p-2510.html"><img align="left" alt="Versatile Bangles" height="324" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_09.jpg" style="height: 324px;  width: 215px;  display:block; vertical-align: bottom; float: left;" width="215" /></a></td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse; margin:0px; padding:0px;" width="600">
        <tr>
            <td style="border-collapse: collapse;">
                <img align="left" height="74" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/border_bottom_left.jpg" style="width: 226px; height: 74px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="226" /></td>
            <td style="border-collapse: collapse;">
                <img align="left" height="74" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/bottom_center.jpg" style="width: 159px; height: 74px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="159" /></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/locations.php"><img align="left" alt="Locate Store" height="74" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_10.jpg" style="height: 74px;  width: 215px;  display:block; vertical-align: bottom; float: left;" width="215" /></a></td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:02:04.747

该标签`img`有一个默认值`border-weight`。你必须给它一个绑定。

`<img src="http://v.luq.cc/xxxxx.gif" border="0" />`

像这样。

# entity-framework - 如何在实体框架代码中全局添加表前缀？

> ID：12633015
> 
> 赞同：14
> 
> 时间：2012-09-28T02:58:48.370
> 
> 标签：entity-framework

我想在数据库中添加前缀为“pe_”的所有表，那么类和表之间的映射将是这样的：Category(pe_Category)、Product(pe_Product) 等。

我知道只有一张地图，我可以这样做：

```
[Table("pe_Category")]
public class Category
{
    public int CategoryId { get; set; }
} 
```

但我不喜欢它，因为可能有数百个实体。

所以我正在寻找一种方法来全局添加前缀，就像这样：

```
public class Category
{
    public int CategoryId { get; set; }
}

public class Product
{
    public int ProductId { get; set; }
}

// Global config, will affect all entities
table.Name = "pe_" + Class.TypeName ; 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-19T03:39:49.227

现在我找到了实体框架 6 alpha 的解决方案：

1）创建一个名为“DefaultTableConvention”的类：

```
public class DefaultTableConvention
: IConfigurationConvention<Type, EntityTypeConfiguration>
{
    public void Apply(
        Type type,
        Func<EntityTypeConfiguration> configuration)
    {            
        configuration().ToTable("PE_" + type.Name);
    }
} 
```

2) 在 DbContext 中，添加以下代码：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Add<DefaultTableConvention>();
    } 
```

仅此而已，它将影响添加到 DbContext 中的所有实体。详情：[http ://entityframework.codeplex.com/wikipage?title=Custom%20Conventions](http://entityframework.codeplex.com/wikipage?title=Custom%20Conventions)

**更新：** 现在使用 EF6，有一种更简单的方法，称为“轻量级配置”，代码如下：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Types().Configure(entity => entity.ToTable("PE" + entity.ClrType.Name));
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-04T03:44:46.443

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
 {
     modelBuilder.Entities().Configure(entity 
      => entity.ToTable("PE" + entity.ClrType.Name));
 } 
```

仅适用于*ef6-beta-1*；Microsoft 将实体从*ef6-rc1更改为类型*

[http://blogs.msdn.com/b/adonet/archive/2013/08/21/ef6-release-candidate-available.aspx#10444012](http://blogs.msdn.com/b/adonet/archive/2013/08/21/ef6-release-candidate-available.aspx#10444012)

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
 {
     modelBuilder.Types().Configure(entity 
      => entity.ToTable("PE" + entity.ClrType.Name));
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-12-11T00:49:40.467

这适用于 EF Core 3.1+

添加对包的引用`Microsoft.EntityFrameworkCore.Relational`。

```
foreach (IMutableEntityType entity in modelBuilder.Model.GetEntityTypes())
{
   entity.SetTableName("PE" + entity.GetTableName());
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-24T12:25:00.373

这适用于 EF Core 2.0+

```
foreach (IMutableEntityType entity in modelBuilder.Model.GetEntityTypes())
{                        
    entity.Relational().TableName = "PE" + entity.Relational().TableName;
} 
```

# asp.net-mvc-3 - 为什么在角色 MVC 3 中不考虑用户

> ID：12633017
> 
> 赞同：1
> 
> 时间：2012-09-28T02:59:08.130
> 
> 标签：asp.net-mvc-3, roles, membership-provider

我正在使用标准的会员表和登录。但是，由于某种原因，当用户登录时。他们没有角色。如果用户在角色中，我希望能够重定向到页面，如下所示：

```
if (User.IsInRole("TestRole"))
    RedirectToAction("Index", "MyController", new { area = "TestArea" }); 
```

这失败了，在调试时似乎用户没有角色。如果在登录后，我直接转到具有 Authorize 属性的页面。有用。

如果我使用此代码：

```
if (Roles.IsUserInRole(model.UserName, "TestRole"))
    RedirectToAction("Index", "MyController", new { area = "TestArea" }); 
```

它会起作用，但它不适用于当前登录的用户。从技术上讲是这样，但我应该能够根据他们是否在某个角色进行重定向。我担心如果我现在不解决这个问题，我以后会有很多问题。（基于角色的菜单等）

任何我能看到的帮助或建议都会很棒。我以前做过这些事情，对可能导致这种情况的原因感到困惑。

注意：如果我使用管理面板，我可以告诉系统认为用户已登录（数据库方面）

# iphone - 即使玩家没有点击 GKChallenge 横幅，也会调用 localPlayerDidSelectChallenge 方法

> ID：12633018
> 
> 赞同：1
> 
> 时间：2012-09-28T02:59:10.013
> 
> 标签：iphone, ipad, ios6, game-center, gamekit

当玩家收到 a`GKChallenge`时，对实现协议的委托的`GKChallengeEventHandler`调用，然后立即调用，每次。`localPlayerDidReceiveChallenge``GKChallengeEventHandlerDelegate``localPlayerDidSelectChallenge`

文档说，`localPlayerDidSelectChallenge`要被调用，必须发生以下两件事之一：

*   用户点击挑战横幅
*   用户打开应用程序以响应收到质询通知

但它似乎每次都被调用，即使应用程序已经打开并且用户没有触摸横幅！

# php - Mysql 无法连接 - 访问被拒绝（使用密码是）

> ID：12633020
> 
> 赞同：7
> 
> 时间：2012-09-28T02:59:15.257
> 
> 标签：php, mysql, cpanel

我有 11 2 提供的托管服务，我刚刚创建了一个新的 MySQL 用户并授予它访问列出的每个操作的权限。

我收到以下错误

```
Warning: mysql_connect() [function.mysql-connect]: Access denied for user '(username is here, removed for posting)' (using password: YES) in /home/.../public_html/config.php on line 10 
```

这是我的配置文件

```
//connection details have been removed for posting purposes

<?php

 define('SQL_SERVER',''); // Database Server
 define('SQL_USER',''); //  User
 define('SQL_PASS',''); //  Password
 define('SQL_DB',''); //  database

 mysql_connect(SQL_SERVER,SQL_USER,SQL_PASS) or die("Error: ".mysql_error()); // Connection to the server
 mysql_select_db(SQL_DB) or die("Error: ".mysql_error()); // Connecting to the database
?> 
```

我尝试按照这篇文章的建议执行以下操作[Access denied for user 'someuser'@'localhost' (using password: YES)](https://stackoverflow.com/questions/5684861/access-denied-for-user-someuserlocalhost-using-password-yes)

```
GRANT ALL PRIVILEGES ON databasename.* TO 'bookorama'@'%' IDENTIFIED BY 'yourpassword';
FLUSH PRIVILEGES; 
```

但我收到以下错误“#1044 - 用户拒绝访问”。当我登录 CPanel 并检查数据库用户时，它会显示我尝试登录的用户，所以我很困惑为什么它不起作用。

**编辑 - 我让它工作。服务器出了点问题。联系了房东，他们处理了。感谢您的回复。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T11:34:17.310

我偶然发现了有关 Cpanel 的连接信息[http://www.inmotionhosting.com/support/community-support/databases/1045-access-denied-for-user-mysql-error](http://www.inmotionhosting.com/support/community-support/databases/1045-access-denied-for-user-mysql-error)

> 您的 cPanel 用户名和密码可用于连接到您的数据库（以及您的 cPanel）。如果您使用您的 cPanel 用户名和密码连接到您的数据库，您可以重置您的 cPanel 密码以确保您使用正确的用户名和密码。
> 
> 如果您专门为访问数据库设置了 MySQL 用户名和密码，则需要确保在 php 脚本中使用正确的用户名。例如，MySQL 用户名始终采用以下格式：
> 
> cpanel-用户名_mysql-用户名
> 
> 如果您的 cPanel 用户名是 userna5，并且您创建了一个数据库用户名 dbuser1，那么实际的数据库用户名将是：
> 
> userna5_dbuser1

暂时，我建议将您的数据库密码更改为您的 Cpanel 帐户的密码，以消除任何疑问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T04:34:26.047

通常不需要密码字段，除非您为 mysql 设置密码。

你可以使用 mysql_connect("hostname","username","")

但是如果你已经为你的mysql设置了密码，那么你必须在连接时输入密码。如果仍然无法正常工作，那么您可能需要查看您的用户名和密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T04:06:30.350

你的sql server是什么？有些公司出于安全目的将服务器名称从本地主机更改为其他名称 - 好吧，但是如果它说用户拒绝访问，那可能是您连接到错误的数据库？那是

```
mysql_select_db(SQL_DB) 
```

您确定您使用的是正确的数据库名称吗？并且您可以使用相同的用户名和密码登录您的 SQL 帐户吗？好吧，如果问题仍然存在尝试使用 SQL 的 root 帐户，超级管理员希望您在本地计算机上或拥有专用服务器。

你为什么不尝试以这种形式使用它们 -

```
$con = mysql_connect("host name","username","password");
$db = mysql_select_db("database name",$con); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-18T06:27:24.810

我有同样的问题，我试图在两个不同的 Web 服务器之间进行连接。如果我在同一台服务器上使用我的 PHP 脚本，则连接将建立，但如果我使用来自其他 Web 服务器（Web 托管）的相同脚本文件，则会出现此错误。

我通过提供我用来连接的 IP 地址来允许访问 MySQL 服务器（远程 MySQL）来解决它。

还值得注意的是，我使用了域名，但域名对我不起作用。CPanel 和 MySQL 用户本身都可以连接到 MySQL 服务器。希望它对你也有帮助。

# ios - 将 iOS Adob e Air 应用程序提交到 iTunes Connect 时代码签名失败

> ID：12633021
> 
> 赞同：2
> 
> 时间：2012-09-28T02:59:18.780
> 
> 标签：ios, air, app-store, adobe, codesign

我希望有人可以为我解决这个问题的解决方案或建议。我有一个使用 Adob​​e Flash Pro CS6 和 Adob​​e Air 3.4 创建的 iPhone 应用程序。当我使用分发证书和临时分发移动配置文件构建它时，它在我的 iPhone 上运行良好。当我使用分发证书和应用商店移动配置文件为应用商店发布构建时，ipa 编译得很好，但是当我尝试通过应用程序加载器将它提交到 iTunes Connect 时，我得到：

“无法提取存档。请确保 /Users/Admin/Downloads/sizablesend143.ipa 是有效的 zip 或 ipa 存档”

当我按照一些建议将 ipa 重命名为 .zip 文件时，解压缩，然后在 Payload 文件夹中重新压缩 .app 文件并以这种方式上传，我得到：

“无法运行 lipo 命令：/Applications/XCode.app/Contents/Developer/Platforms/iPhoneOS.platfor m/Developer/usr/bin/lip：无法映射输入文件：/var/folders/mh/pz30_kmx6530_cdg7w0hqr9c0000gn/ T/SizableSend.app/Siza bleSend (无效参数)"

“应用程序未通过协同签名验证。签名无效，包含允许的权利，或者未使用 iPhone 分发证书签名”

“无法从您的应用程序中提取代码签名权利。请确保 SizableSend 是经过正确代码签名的有效 Mach 可执行文件。”

我试过直接通过 windows 上的 adt 命令行编译，通过 Mac 本身的 adt 命令行编译，通过 Flash Pro CS6 编译，都导致相同的错误。我还从顶部完全重新生成了所有证书和规定，首先从我的 Mac 上的 Keychain Access 工具生成一个新的 csr，并确保旧的证书被删除。我完全被难住了，真的希望有人能阐明我如何解决这个问题。

非常感谢你，亚历克斯

# python - Python连接字符串和列表

> ID：12633024
> 
> 赞同：23
> 
> 时间：2012-09-28T02:59:41.840
> 
> 标签：python

我有一个列表和字符串：

```
fruits = ['banana', 'apple', 'plum']
mystr = 'i like the following fruits: ' 
```

我怎样才能将它们连接起来，所以我得到（记住枚举可能会改变大小）“我喜欢以下水果：香蕉、苹果、李子”

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-28T03:01:56.437

加入列表，然后添加字符串。

```
print mystr + ', '.join(fruits) 
```

并且不要使用内置类型 ( `str`) 的名称作为变量名。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-27T08:53:47.667

您可以使用此代码，

```
fruits = ['banana', 'apple', 'plum', 'pineapple', 'cherry']
mystr = 'i like the following fruits: '
print (mystr + ', '.join(fruits)) 
```

上面的代码将返回如下输出：

```
i like the following fruits: banana, apple, plum, pineapple, cherry 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T03:01:59.140

您可以使用[`str.join`](http://docs.python.org/library/stdtypes.html#str.join).

```
result = "i like the following fruits: "+', '.join(fruits) 
```

（假设`fruits`只包含字符串）。如果`fruits`包含非字符串，您可以通过动态创建生成器表达式来轻松转换它：

```
', '.join(str(f) for f in fruits) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T03:02:14.150

如果您将变量命名为与 Python 内置函数相同，您将遇到问题。否则这将起作用：

```
s = s + ', '.join([str(fruit) for fruit in fruits]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T00:56:07.073

下面的简单代码将起作用：

```
print(mystr, fruits) 
```

# jquery - 是否有一个 jQuery 函数来检查一个 URL 是否发布到另一个主机？

> ID：12633028
> 
> 赞同：1
> 
> 时间：2012-09-28T03:00:41.590
> 
> 标签：jquery, url, target, host

有没有一种很好的方式来检查被点击的链接的 URL 是否指向另一个主机？

```
$(document).ready(function() {
    $('a[target="_blank"]').click(function() {
        if (confirm('This link will open in an new window.')) {
            return true;
        } else {
            return false;
        }
    });
}); 
```

我不能依靠 CMS 来过滤指向另一台主机的每个链接并添加属性`target="_blank"`。所以我想测试点击链接的 URL，我认为这是一个更强大的测试。

我知道我可以编写一些自定义代码来测试各种`string starts with`场景。但是是否已经有一个很好的 jQuery（或其他）功能呢？

**解决方案：**

谢谢你的帮助！我应用了这个解决方案：

```
$(document).ready(function() {
    $('a').click(function() {
        if (this.host != location.host) {
            $(this).attr('target', '_blank'); // add or override the attribute (in case there isn't one already)
            return confirm('This link will open in an new window.');
        }
    });
}); 
```

顺便说一句：我只会在网站处于移动模式（使用modernizr）时使用此代码。所以我可以包装应用程序`PhoneGap`并防止用户在某个随机站点上处于全屏模式而无法返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T03:15:23.243

您可以`location.host`与 Anchor 元素的`host`.

```
$('a').click(function() {
  if (this.host != location.host && confirm('This link will open in an new window.')) {
    $(this).attr('target', "_blank");
  }
  // don't need else, let it be the default behavior of anchor
  // if you don't want to jump to the new page, then add else return false
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:09:36.070

您可以检查`host`链接的属性以查看它是否与当前网站的主机匹配。

```
$('a').click(function() {
  if (this.host != window.location.host) {
     // do something like
     $(this).attr('target', "_blank");
  } else {
     // do something else
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:09:06.163

见现场[小提琴](http://jsfiddle.net/vevhJ/)

通常外部链接会开始，`http://` 所以试试这个

```
 $('a[href^="http://"],a[href^="https://"]').on('click', function(){
     if (confirm('This link will open in an new window.')) {
            return true;
        } else {
            return false;
        }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:13:29.667

*您可以为页面上的每个*链接添加点击处理程序：

```
jQuery('a').click(function() {
  if (this.href.indexOf('http://') == 0) {
    return confirm('Leaving, OK?');
  }
}); 
```

但这会给很多元素添加事件处理程序，并且可能效率低下。

更有效的方法是在文档中添加一个点击处理程序。点击 A 标签会冒泡，您可以一举抓住它们。像：

```
jQuery(document).click(function(e) {
  if (e.target.tagName == 'A') {
    if (e.target.href.indexOf('http://') == 0) {
      return confirm('Leaving, OK?');
    }
}); 
```

对于您实际的“外部”检查，您当然需要“http://”或“https://”。

**编辑：**

我想我更喜欢@hsalama 的回答。虽然我会将其更改为：

```
jQuery('a[href^="http://"]').add('a[href^="https://"]').click(function() {
  return confirm('This link will open in an new window.');
}); 
```

顺便说一句，做：

```
if (condition) {
  return true;
} else {
  return false;
} 
```

只会让你被其他程序员取笑。只是：

```
return condition; 
```

# c++ - 指针数组栈实现

> ID：12633029
> 
> 赞同：2
> 
> 时间：2012-09-28T03:00:45.187
> 
> 标签：c++, arrays, pointers, stack, implementation

因此，我正在从 Java 过渡到 C++，但我仍然无法理解指针是如何工作的 >.< 希望你们中的一些经验丰富的 C++ 程序员可以帮助我！

在课堂上，我们使用动态数组创建了堆栈和队列实现。

我的老师使用指针在堆上创建这些数组。

```
int* data = new int[25]; 
```

我不明白的是如何使用“data [top]”将值插入到数组中？我以为指针只是保存内存地址？我会问我的老师这是怎么回事，但我时间紧迫，她要到明天下午才能回复我>.<

```
Stack::push(int value) {
    if(top==size) {
        resize();
    }
    data[top] = value;
    top++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:38:30.130

> 我以为指针只是保存内存地址？

是的，但是您可以使用该内存地址进行操作。特别是 C++ 允许一种称为“指针算法”的东西，它允许您使用内存地址来获取相对于您已经拥有地址的内存的其他内存的地址。例如，如果您有一个内存地址，您可以获得紧随其后的内存地址。

（方块是内存位置）

```
☐
☐ 
☐  ← I have the address of this memory in variable A
☐  ← I would like to get the address of this memory location and to store it in X
☐
☐
☐

int *A = ...;
int *X = A + 1; // compute the address of the next memory location 
```

* * *

所以数组是一系列内存位置。要访问数组的任何元素，您只需获取您拥有的地址，计算您要访问的元素的地址，然后使用该新地址。

```
int *A = new int[10];
int *X = A + 5; // get the address of the memory five locations past where A points to
*X = 999; 
```

您不必将计算的地址存储在变量中：

```
int *A = new int[10];
*(A+5) = 999; 
```

C++ 提供了语法的简写`*(A+5)`，这是数组索引运算符：

```
int *A = new int[10];
A[5] = 999; 
```

有趣的是，数组索引运算符实际上只是这个`*(A+5)`表达式的简写。由于您可以翻转操作数并且`*(5+A)`您可以对数组索引运算符执行相同的操作：

```
5[A] = 999; 
```

你不应该这样做，因为它不是很可读。

* * *

关于指针的另一件事：Java 有指针。当你这样做

```
String s = new String(); 
```

在 Java`s`中是一个指针。Java 只是试图隐藏这个事实，同时它需要比 C++ 更大程度地使用指针。Java 没有指针算法，您不必像在 C++ 中那样在 Java 中手动取消引用指针。但请考虑：

```
List<String> l = new List<String>();
List<String> m = l; // Do I have two lists, l and m, that can be modified independently? Or do I have two entities, l and m, that both refer to the same List object? 
```

请记住您在 Java 中遇到的那些空指针异常。

如果您一直在使用 Java，那么您已经在使用指针。它们在 C++ 中并没有什么不同，但它们在 C++ 中是直接可见和显式的，而不是像 Java 那样隐藏得很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:04:42.253

一种看待它的方式`data[top]`与`*(data + top)`. 因此，您获取指针`data`，将值添加`top`到它（乘以 int 的大小），然后读取或写入该位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T03:08:39.613

请参阅：[C++ 指针和数组](http://www.cplusplus.com/doc/tutorial/pointers/)

你是对的，指针只保存内存中实际找到数据的点的地址。您正在创建的堆栈只是一个类，它提供了一种从数组中获取内存和向数组添加内存的特定方法。

另请查看：[C++ STL 堆栈](http://www.cplusplus.com/reference/stl/stack/)

这应该澄清堆栈是如何工作的。

# c# - 目标 .net 4.5 但部署到 .net 4.0 是否可能？

> ID：12633034
> 
> 赞同：7
> 
> 时间：2012-09-28T03:01:24.080
> 
> 标签：c#, asp.net, .net, .net-4.0, .net-4.5

我必须在“所有软件必须落后 1 个版本”的政策下工作，我不是特别喜欢这个，我不能改变它。所以这意味着我们的生产机器现在只能升级到 .NET 4.0，只有当 .NET 5 发布时，我们才能升级到 4.5！傻，我知道。

所以目前我计划建议开发机器升级到 Visual Studio 2012 并以 .NET 4.0 为目标，目前还可以；

我们在不久的将来有一些项目需要大量异步编程，我希望能够使用 async/await 和所有其他改进的所有 4.5 语法优势。

那么有什么选择！接受“这就是生活”，只针对 4.0 和呻吟！或者有没有办法在dev中定位4.5并将一些4.5 dll导入prod，这甚至可能吗？最终是否有可能开发以任何方式利用 4.5 功能并部署到 4.0？任何建议请...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T03:02:49.220

您正在寻找[Microsoft.Bcl.Async](https://www.nuget.org/packages/Microsoft.Bcl.Async/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T08:18:58.173

请注意，不支持创建 .NET4.5 应用程序然后尝试将其重新定位为 .NET4.0。基本上，当您使用 .NET4.5 构建应用程序时，您可能正在使用 4.5 中添加的新 API，而 4.0 中不存在。所以你的应用程序将无法正常工作。

# c - 移位数组中的元素

> ID：12633039
> 
> 赞同：16
> 
> 时间：2012-09-28T03:01:46.903
> 
> 标签：c, arrays, recursion, copy

这是基本的，但我的谷歌搜索并没有削减它。我知道我必须做一些其他事情来一个一个地移动数组的值，但是下面的编码给了我相同的 items[k] 到 items[infinity] 的值都等于 items[k]。我不明白的是如何在将 k 值复制到 k+1 插槽中时保留原始 k+1 值。

```
if ( i < numItems) //if i is inside the used boundaries of the array
{
    for (int k = i; k < numItems; k++) //shift the array values from point i
    {
                double temp = 0.0;
        temp = items[k];
        items[k+1] = temp;
    }

    items[i] = value; //and insert value into i
} 
```

它必须是递归方法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-28T07:48:34.287

您也可以使用处理区域重叠的 memmove。

```
memmove(&items[k+1], &items[k], (numItems-k-1)*sizeof(double));
items[k] = value; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-28T03:29:27.090

一个简单的选择是反向遍历数组

```
for (int k = numItems; k > i; k--){        
    items[k]=items[k-1];
} 
```

**选项 2：**

如果你想保持你的方法完整，那么你也可以不同地使用 temp 变量

在你的 for 循环初始化 temp 之前

```
double temp = items[i]; 
```

然后在循环中，您可以使用 temp 将 [k+1] 值存储在 temp 中，而不是存储 [k] 值。

```
items [k+1] = temp;
temp = items [k+1];
items[k+1] = items[k]; 
```

你也应该注意你的边界，这样 k+1 就不会超过数组中的最后一个元素。您可以使用 numItems - 1 之类的东西进行检查，以确保数组不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T07:06:08.707

可以试试反转法吗

这是一个例子。

```
// reverse array from start to end
void reverse(int a[], int start, int end)
{
  int i;
  int temp;
  while(start++ < end--)
  {
    temp = a[start];
    a[start] = a[end];
    a[end] = temp;
  }
}

// function that will rotate array by d elements
void rotateArray(int a[], int d, int n)
{
  reverse(a, 0, d-1);
  reverse(a, d, n-1);
  reverse(a, 0, n-1);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-29T19:47:29.203

```
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <stdlib.h>

int main() {

    int i,j=0,s;
    int n,k;
    int A[n];

    scanf("%d %d",&n,&k);
    if(((n>=0) && (n<=100000))&&(k>=0)){
        for(i=0;i<n;i++){
            scanf(" %d", &A[i]);
        }
        if(k>=n){
            k=k-n;
        }else{
        for(j=0;j<n;j++){
            s=j+k;
            if(s>n){
                s-=n;
                A[j]=A[s];
            }else{
            A[j]=A[s];
            }

        }
        for(i=0;i<n;i++){
            printf("%d ",A[i]);
        }
      }
    }
    return 0;
} 
```

# c - C中的字符串常量

> ID：12633046
> 
> 赞同：1
> 
> 时间：2012-09-28T03:02:22.247
> 
> 标签：c, compilation, c-preprocessor, c-strings

我想定义字符串常量以在我的**C**程序中的多个文件中使用。现在我以这种形式拥有它们：

```
file.h
#ifndef FILE_H_
#define FILE_H_

  static const char *id = "ID"

#endif 
```

然而，虽然我在多个文件中使用了这个字符串，但我得到一个编译器警告，说这个变量没有被使用。如果我删除 static 关键字，我会收到一条错误消息，指出该变量有多个定义。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:05:26.620

(a) 将它们定义为预处理器宏`#define ID "ID"`（可能是 icky），或者 (b) 在一个源文件中定义它们并`extern`在头文件中声明它们。

在头文件中调用它们的静态变量会导致它们出现在每个编译单元中，这是不可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:05:43.103

您不应在头文件中定义变量，然后将其包含在多个源文件中。
对于非静态变量，它会导致违反**[One 定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)**，链接器会抱怨。

当您`static`在标题中定义 a 时，您得到的是包含该文件的每个翻译单元中的变量副本。这不能满足您对跨多个文件共享一个变量的要求。

有两种方法可以解决您的问题：

* * *

如果您想将其用作常量字符串，只需使用宏

```
#define ID "ID" 
```

并确保宏定义在您使用的任何地方都可见

* * *

如果您想在多个文件中使用它作为变量，只需使用`extern`.

**文件.h**

```
extern const char *id; 
```

**文件2.cpp**

```
#include"file.h"

const char *id = "ID"; 
```

**文件 3.cpp**

```
#include"file.h"

//Use the variable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:05:50.657

至少，GCC 不会对静态非指针常量发出警告：

```
static const char id[] = "ID"; 
```

您的版本的问题在于它创建了一个字符串文字，然后“丢弃”了指向它的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:07:48.503

我会使用一个宏 - 任何包含该头文件的文件都将其作为“常量”（它实际上只是在编译的预处理器阶段被替换）：

```
#define ID "ID" 
```

# php - Auth::attempt 总是返回 false — 不选择密码

> ID：12633053
> 
> 赞同：0
> 
> 时间：2012-09-28T03:03:48.790
> 
> 标签：php, laravel, eloquent

当尝试使用 Laravel 的 Auth 类时，我发现它总是失败，因为（AFAIK）尝试（）方法只是试图选择用户名：

```
string(55) "SELECT * FROM `mdl_user` WHERE (`username` = ?) LIMIT 1" 
```

（通过 Event::listen('laravel.eloquent') 输出）

我使用 Eloquent 作为驱动程序，表字段是“用户名”和“密码”，我的模型（Moodle_User，位于 models/moodle/user.php）是这样写的：

```
class Moodle_User extends Eloquent {
    public static $table        = 'user';
    public static $connection   = 'moodle';
} 
```

如果我按原样使用模型，它可以完美地工作：

```
// returns the correct object
$user = Moodle_User::where('username', $username)->where('password', md5($password))->get(); 
```

另外，我没有使用 Hash 类，因为 Moodle 目前使用 MD5，所以我这样调用`Auth::attempt()`：

```
Auth::attempt(array('username' => $username, 'password' => md5($password))) 
```

但它总是返回 false。如果我通过 Moodle_User 模型做同样的事情，它会按预期工作。

为什么它总是返回假？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:06:52.807

您应该`Hash::make()`不使用`md5()`散列密码。

[http://laravel.asia/p/laravel-authentication](http://laravel.asia/p/laravel-authentication)

我建议您使用自己的驱动程序，因为`attempt`在`eloquent`驱动程序和`fluent`驱动程序中使用`Hash::check()`：

[https://github.com/laravel/laravel/blob/master/laravel/auth/drivers/eloquent.php#L53](https://github.com/laravel/laravel/blob/master/laravel/auth/drivers/eloquent.php#L53)

[https://github.com/laravel/laravel/blob/master/laravel/auth/drivers/fluent.php#L41](https://github.com/laravel/laravel/blob/master/laravel/auth/drivers/fluent.php#L41)

# c# - C＃; NullReferenceException 未处理；值被重置为 0

> ID：12633059
> 
> 赞同：4
> 
> 时间：2012-09-28T03:04:49.833
> 
> 标签：c#, arrays, nullreferenceexception

当我尝试在 Deck 类中调用我的 ToString() 方法时，它给了我一个“NullReferenceException 未处理”错误。做了一些测试，我发现当它试图调用Deck.ToString()方法时，大小设置为0。它应该是在调用构造函数时设置的，我不知道在重置什么它。

主要方法：

```
public class DeckTest
{

    public static void Main()
    {
        Deck toTest = null;
        Console.WriteLine("What type of Deck would you like to create?");
        toTest = new Deck(Console.ReadLine());

        Console.WriteLine(toTest);

    }

} 
```

甲板类：

```
class Deck
{
    String type;
    int size;
    String deckList;
    Card[] deck;

    public Deck(String type, int size)
    {
        deck = new Card[size];
        this.type = type;
        this.size = size;

       while (deck[size - 1] == null)
       {

           Card newCard;
           Console.WriteLine("Please Enter the Type, Name, Colour (if card has no Colour, enter 'Colourless'), Colour Identity, Text, Mana Cost (if applicable), Converted Mana Cost (if applicable), Power (if applicable), Toughness (if applicable), separated by semicolons.");
           String line = Console.ReadLine();
           string[] card = line.Split(';');
           if (card[0].Equals("Land", StringComparison.OrdinalIgnoreCase))
           {
               newCard = new Card(card[0], card[1], card[3], card[4]);
           }
           else if (card[0].Equals("creature", StringComparison.OrdinalIgnoreCase))
           {
               newCard = new Card(card[0], card[1], card[2], card[3], card[4], card[5], int.Parse(card[6]), int.Parse(card[7]), int.Parse(card[8]));
           }
           else
           {
               newCard = new Card(card[0], card[1], card[2], card[3], card[4], card[5], int.Parse(card[5]));
           }
           addCard(newCard);
           }
   }

    public Deck(String type)
    {
        if (type.Equals("Standard", StringComparison.OrdinalIgnoreCase))
        {
            new Deck(type, 60);
        }
        else if (type.Equals("Extended", StringComparison.OrdinalIgnoreCase))
        {
            new Deck(type, 60);
        }
        else if (type.Equals("Modern", StringComparison.OrdinalIgnoreCase))
        {
            new Deck(type, 60);
        }
        else if (type.Equals("Commander", StringComparison.OrdinalIgnoreCase)|| type.Equals("EDH", StringComparison.OrdinalIgnoreCase))
        {
            new Deck(type, 100);
        }
    }

    void addCard (Card newCard)
    {
        int count = 0;

        while (deck[count] != null && count < size)
        {
            count++;
        }

        if (count < size)
        {
            deck[count] = newCard;
        }
        else
        {
            Console.WriteLine("This deck is full.");
        }
    }

    public override string ToString()
    {
        String output = "";
        int count = 0;

        while (deck[count] != null && count < size-1)
        {
            output += deck[count] + "/n";
        }

        return output;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T03:07:58.460

`new`关键字是创建*一个全新的实例*（即被立即丢弃），而不是修改构造函数中的现有实例。

您应该使用工厂模式（一种根据参数实例化不同对象然后返回它的静态方法）：

```
public static Deck FromType(String type)
{
    if (type.Equals("Standard", StringComparison.OrdinalIgnoreCase))
    {
        return new Deck(type, 60);
    }
    else if (type.Equals("Extended", StringComparison.OrdinalIgnoreCase))
    {
        return new Deck(type, 60);
    }
    else if (type.Equals("Modern", StringComparison.OrdinalIgnoreCase))
    {
        return new Deck(type, 60);
    }
    else if (type.Equals("Commander", StringComparison.OrdinalIgnoreCase)|| type.Equals("EDH", StringComparison.OrdinalIgnoreCase))
    {
        return new Deck(type, 100);
    }

    throw new ArgumentOutOfRangeException("Bad type");
} 
```

`toTest = Deck.FromType(Console.ReadLine())`然后，您可以使用而不是使用`new`关键字来实例化您的新 Deck 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T03:12:07.863

我会说这不是获取对象的最佳方法，您可以尝试以下方法：

```
public class Deck
{
    public static Deck GetDeck(String type)
    {
        if (type.Equals("Standard", StringComparison.OrdinalIgnoreCase))
        {
            return new Deck(type, 60);
        }
        else if (type.Equals("Extended", StringComparison.OrdinalIgnoreCase))
        {
            return new Deck(type, 100);
        }
    }
} 
```

而不是像这样获得甲板：

```
Deck.GetDeck("foo"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T03:16:23.323

要调用另一个构造函数，请在方法主体之前而不是在其内部执行此操作：

```
public Deck(String type) : this(type,
  type.Equals("Standard", StringComparison.OrdinalIgnoreCase) ||
  type.Equals("Extended", StringComparison.OrdinalIgnoreCase) ||
  type.Equals("Modern", StringComparison.OrdinalIgnoreCase)
? 60 : 100)
{
  // nothing more here
} 
```

# php - PHP验证邮件模板？

> ID：12633060
> 
> 赞同：0
> 
> 时间：2012-09-28T03:04:50.910
> 
> 标签：php, email

我正在开发一个网站，它已经完成了 80% 并且我仍在努力 - 我现在面临的问题是客户要求我向他展示当用户注册一个链接以验证帐户时发送的验证邮件- 所以尽管装饰了它，但我正在寻找一些已经在 PHP 邮件中转换的现成模板，因为我也是 php 新手 - 但到目前为止我还没有找到任何模板？任何人都可以帮我在网上找到它们吗？或者它们不能通过互联网获得，我必须自己装饰邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:09:56.697

模板是什么意思？

如果是关于设计的，那么您可以将电子邮件作为 html 发送，这样您就可以随意格式化它。

有非常好的邮件脚本，例如[phpmailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)和[swift mailer](http://swiftmailer.org/)。

您还可以检查[SPF](http://www.openspf.org/)和[DKIM](http://www.dkim.org/)。

# c# - 包含使用 c# 的中介的单元测试方法

> ID：12633065
> 
> 赞同：0
> 
> 时间：2012-09-28T03:05:30.203
> 
> 标签：c#, visual-studio-2010, unit-testing, mediator

我目前正在对一个大学注册系统进行单元测试，而当我要测试的方法包含一个将与大学联系并担任调解员的调解员时，它总是会出错。有没有关于如何测试这种方法的想法？

方法是：

```
public void SelectCourse(List<Course> courses)
    {
        if (this.IsFullTime)
        {
            while (_CurrentCourses.Count < LEAST_NUM_OF_COURSES_FULLTIME)
            {
                Random rand = new Random();
                byte[] b = new byte[1];
                rand.NextBytes(b);
                int i = rand.Next(courses.Count);
                Course c = courses.ToArray()[i];
                ((University)mediator).RegisterStudentForCourse(this, c);
            }
        }
        else
        {
            while (_CurrentCourses.Count < LEAST_NUM_OF_COURSES_PARTTIME)
            {
                Random rand = new Random();
                byte[] b = new byte[1];
                rand.NextBytes(b);
                int i = rand.Next(courses.Count);
                Course c = courses.ToArray()[i];

                // I always //has unit test error with this line!!:
                ((University)mediator).RegisterStudentForCourse(this, c);
            }
        }
        System.Console.WriteLine("Student: "
                                 + this.Name 
                                 + ", with student number: (" 
                                 + this.StudentNumber 
                                 +  ") registered.");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:12:52.063

正如评论中所建议的，我会在测试中模拟一个大学对象并将其注入到包含这些函数的类中。请记住：您正在尝试测试代码单元......而不是集成测试期间的整个功能链。

另外..我会重构这个..我知道这不是你所要求的..但是它可以使测试更容易并且错误发现不那么混乱：

```
public ClassThatHousesTheseFunctions(IUniversity university) {
    this._university = university;
}

public void SelectCourse(List<Course> courses) {
    if (this.IsFullTime) {
        performCourseSelection(courses, LEAST_NUM_OF_COURSES_FULLTIME);
    }
    else {
        performCourseSelection(courses, LEAST_NUM_OF_COURSES_PARTTIME);
    }       
}

private void performCourseSelection(IList<Course> courses, int leastNumberOfCourses) {
    Random rand = new Random();

    while (courses.Count < leastNumberOfCourses) {
        int i = rand.Next(courses.Count);
        Course c = courses.ToArray()[i];
        _university.RegisterStudentForCourse(this, c);
    }

    System.Console.WriteLine("Student: " + this.Name + ", with student number: (" + this.StudentNumber + ") registered.");
} 
```

# c - %p c 中的格式说明符

> ID：12633067
> 
> 赞同：20
> 
> 时间：2012-09-28T03:05:43.047
> 
> 标签：c, format-specifiers

以下代码中的说明符`%p`和工作方式如何？`%Fp`

```
void main() 
{
    int i=85;

    printf("%p %Fp",i,i);

    getch();   
} 
```

我得到 o/p 为 `0000000000000055 0000000000000055`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-28T03:17:10.350

如果这是您要问的，%p 和 %Fp 打印出一个指针，特别是指针所指的地址，并且由于它打印出您计算机体系结构的一部分，因此它以十六进制形式打印。

在 C 语言中，您可以在指针和 int 之间进行转换，因为指针只是一个 32 位或 64 位数字（取决于机器架构），指的是前面提到的内存块。

当然，十六进制的 55 是十进制的 85。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T03:14:03.753

%p 用于打印指针地址。

十进制的 85 是十六进制的 55。

你的系统指针是 64 位的，所以完整的十六进制表示是：0000000000000055

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T04:19:02.317

这是我机器的编译输出：

format.c:7:5：警告：格式“%p”需要“void *”类型的参数，但参数 2 的类型为“int”[-Wformat]

format.c:7:5：警告：格式“%F”需要“double”类型的参数，但参数 3 的类型为“int”[-Wformat]

所以有警告但它确实编译并且输出是：0x55 0.000000p

我很惊讶你最后没有得到 ap。你确定代码和输出匹配吗？我想 i 的地址也不是不可能的 0x0...055..但是这里看起来有问题。

顺便说一句： %p 的典型用法是打印地址，即 &i 而不是 int

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T05:18:44.797

它的目的是以实现定义的格式打印指针值。对应的参数必须是一个`void *`值。

并且`%p`用于打印指针的地址，地址取决于我们的系统位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-01T15:06:50.233

除了@Myforwik 所说的

%p 用于打印指针地址。

%Fp 可能用于格式化 FAR 指针，其格式为 --> (0x1234:0x5678)

十进制的 85 是十六进制的 55。

我希望现在没事。

参考资料： [http ://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/FUNCTIONS/format.html](http://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/FUNCTIONS/format.html) [http://www.winehq.org/pipermail/wine-devel/2005-三月/034390.html](http://www.winehq.org/pipermail/wine-devel/2005-March/034390.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-28T13:11:17.697

`%p`用于打印地址，但您需要先使用`ampersand`ie`&`运算符才能`i`获取地址`i`

因此，要获取变量的地址，`i`正确的格式将是：

```
void main() 
{
    int i=85;

    printf("%p %Fp", &i, &i);

    getch();   
} 
```

如果你不使用`&`，那么你只会得到包含在`i`这种情况下是`85`或`55`十六进制的值

# python - 我的函数没有返回整个句子

> ID：12633071
> 
> 赞同：2
> 
> 时间：2012-09-28T03:06:39.797
> 
> 标签：python, function

所以我正在尝试更好地学习 python，我一直在使用这个网站[http://www.learnpython.org/](http://www.learnpython.org/)

我现在正在使用功能，这是代码

```
#Add your functions here (before the existing functions) 

def list_benefits():
    myList = ['More organized code','More readable code','Easier code reuse','Allowing     programmers to share and connect code together']
    return myList

def build_sentence(info):
    addMe = " is a benefit of functions!"
    for i in info:
        meInfo = i + addMe
    return meInfo

def name_the_benefits_of_functions():
    list_of_benefits = list_benefits()
    for benefit in list_of_benefits:
        print build_sentence(benefit)

name_the_benefits_of_functions() 
```

输出是

> e是函数的好处！
> 
> e是函数的好处！
> 
> e是函数的好处！
> 
> r 是函数的好处！

我缺少什么来返回整个香味

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T03:13:23.743

里面 `def build_sentence(info):`

无需循环，`info`因为您将逐个字符地获得。

```
def build_sentence(info):
    addMe = " is a benefit of functions!"
    return info + addMe 
```

同样在这部分：

```
for i in info:
        meInfo = i + addMe
    return meInfo 
```

您每次都在循环中设置 meInfo，不断更改该值。最后，您只是返回从循环中获得的最后一个值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T03:10:15.060

您的`build_sentence()`函数遍历传递给它的字符串，并将每个字母加上另一个字符串依次绑定到`meInfo`. 在它完成最后一个字母后，它返回值。解决方法是停止迭代字符串，而只是添加整个内容并返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:13:40.500

当你写：

```
def name_the_benefits_of_functions():
    list_of_benefits = list_benefits()
    for benefit in list_of_benefits:
        print build_sentence(benefit) 
```

您使用字符串参数调用 build_sentence()。build_sentence 然后迭代字符串中的字符，效果如您所见。

相反，调用 build_sentence 传递*整个列表*。这将遍历*list*，将额外的文本附加到列表中的每个项目（而不是字符串中的每个字符）。

```
def name_the_benefits_of_functions():
    list_of_benefits = list_benefits()
    print build_sentence(list_of_benefits) 
```

此外，在 build_sentence 中，您创建然后丢弃从每个列表项创建的文本，只返回最后一项和额外的文本。如果你想打印每一个，你可以在 build_sentence() 函数中移动*语句*`print`（并且可能将其重命名为 print_sentence() 或者你可以在该函数中创建一个列表并返回该列表：

 *```
def build_sentence(info):
    addMe = " is a benefit of functions!"
    result = []
    for i in info:
        result.append(i + addMe)
    return result 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:35:38.090

您在这里遇到的问题是您`build_sentence()`正在接受一个参数（每个调用都使用一个字符串）但是对其进行迭代并且只返回最后一个结果（因此它返回一个包含字符串的最后一个字符的句子以及其余的静态定义的句子）。

如果您遍历一个字符串，那么您将处理该字符串的每个字符。

就像是：

```
def build_sentence(benefit):
    '''Returns a sentence from a template filling in benefit as the subject'''
    return "%s is a benefit of functions!' % benefit 
```

...将与您的其余代码一起使用。

或者，您可以使用以下`build_sentences()`功能：

```
def build_sentences(*benefits):
    '''Returns a list of sentences from a template touting each benefit'''
    results = list()
    for each in benefits:
        results.append("%s is a benefit if functions!" % each)
    return results 
```

...然后简单地调用该函数，并列出以下好处：

```
build_sentences('More organized code','More readable code','Easier code reuse','Allowing programmers to share and connect code together') 
```

... 或者

```
build_sentences(*myList) 
```

这种特殊的形式（`*benefits`用作函数定义的参数，或者为函数调用提供可变数量的参数，或者使用该`*myList`形式来扩展我的列表的内容，将该列表应用到“varargs”参数列表中更高级一点。（在这种情况下也不是绝对必要的，您可以`*`从函数的参数定义和函数的调用参数中删除前缀。在这种情况下，当使用文字列表调用函数时，您必须包装文字字符串参数，`[...]`以使它们成为文字字符串：

```
def tout_benefits(benefits):
    '''Given a list of benefits tout them using a template'''
    return [ "%s is a benefit of functions!" % x for x in benefits ]

tout_benefits(['More organized code','More readable code','Easier code reuse','Allowing programmers to share and connect code together'])
# Notice called with `[ ..., ..., ... ]` 
```

另请注意，在最后一种形式中，我将`for ...`循环简化为更紧凑的“列表理解”......以及返回列表的表达式。我也可以在前面的例子中使用这种形式；但想将它与关于 varargs（可变参数/参数）处理的观点分开介绍。

另请注意，您可以使用`+`表达式代替`"%s ..." %`所有这些示例。但是，“字符串格式化”运算符让您可以更好地控制值如何插入到模板/字符串中，并允许多个值、类型、数字精度和许多其他功能，这些功能远远超出了简单的字符串连接（使用`+`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T19:51:23.657

修改此函数以返回如上定义的字符串列表：

```
def list_benefits():
    return "More organized code", "More readable code", "Easier code reuse", "Allowing programmers to share and connect code together"

def build_sentence(info):
    return "%s is a benefit of functions!"% (info) 
```

修改此函数以连接到每个好处 - “是函数的好处！”：

```
def name_the_benefits_of_functions():
    list_of_benefits = list_benefits()
    for benefit in list_of_benefits:
        print build_sentence(benefit)

name_the_benefits_of_functions() 
```*

# c++ - 工资计算器程序

> ID：12633075
> 
> 赞同：-1
> 
> 时间：2012-09-28T03:07:27.243
> 
> 标签：c++, visual-studio-2010, visual-c++-2010

```
#include <iostream>
Using namespace std;

int main ();
{ 
cout << "What is the mean amount you work/week?" << endl;

if (input <= 40)
cout << "Your salary is $8.00/hour";
cin >> a1;
if (a1 <= 0)
cout << "";
cin >> a2;
if (a2 >= 40)
cout << a3
cin >> a3;

cout << "" << endl;
else
cout << " Better luck next time.- the correct answer is " << add << endl;

return 0; 
```

我正在尝试编写一个`C++`程序来计算和显示一个人的薪水，由以下表达式确定：

如果工作小时数`<= 40`，则此人收到，否则，个人按基本费率`$8/hour`收到第一个`40hrs @ $8/hr`剩余小时数。**程序应要求：** 1）工作时间（输入） 2）显示获得的薪水（输出）。 为基本费率使用一个常数变量，以便在每小时费率变化时可以轻松更新程序。 给予适当的输入/输出。测试几个小时数低于, 和高于 的程序。`1.5x`
 **`x``=``40`**

 **任何方向将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:53:57.403

获取一些关于 C++ 的好书，查看[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

根据您的代码。这是应该的

```
#include <iostream>

int main () {
    int hours = 0;
    int rate = 8;

    std::cout << "Enter number of working hours?";
    std::cin >> hours;

    int pay = hours * rate;

    if (40 < hours) {
        pay += (hours - 40) * (rate / 2);
    }

    std::cout << "Total Pay" << pay << std::endl;
    return 0;
} 
```**

# mpmovieplayercontroller - iOS6 和 MPMoviePlayerController - 黑色视图

> ID：12633080
> 
> 赞同：1
> 
> 时间：2012-09-28T03:07:56.103
> 
> 标签：mpmovieplayercontroller, ios6

我有一个 MPMoviePlayerController 播放嵌入在视图中的视频。这在 iOS5/5.1 等上运行良好......但自从升级到 iOS6 后，它已经停止工作，现在视图只是黑色。有没有人有任何想法或类似问题？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T10:27:26.040

试试这个......

```
NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"ddd" ofType:@"mp4"];
NSURL *url = [NSURL fileURLWithPath:resourcePath];
MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
moviePlayer.view.frame = CGRectMake(0, 0, 500, 500);
moviePlayer.moviePlayer.shouldAutoplay=YES;
moviePlayer.moviePlayer.controlStyle = MPMediaTypeMusicVideo;
[moviePlayer.moviePlayer setFullscreen:YES animated:YES];
[self.view addSubview:moviePlayer.view];
[moviePlayer.moviePlayer play]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T07:56:32.937

我是访问同样的问题，最后发现关键行“[player prepareToPlay]”不见了。在 iOS5 中没关系，但在 iOS6 中会导致黑屏；

```
MPMoviePlayerController *player =
[[MPMoviePlayerController alloc] initWithContentURL: myURL];
[player prepareToPlay];
[player.view setFrame: myView.bounds];  // player's frame must match parent's
[myView addSubview: player.view];
// ...
[player play]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T04:20:28.927

实际上，MPMediaTypeMusicVideo 定义为 MPMediaType，定义如下： MPMediaTypeMusicVideo = 1 << 11, (2048)

它是无证的东西吗？

# c# - 使用合并的单元格、表单控件、受密码保护的工作表读取 Excel

> ID：12633083
> 
> 赞同：0
> 
> 时间：2012-09-28T03:08:06.413
> 
> 标签：c#, .net-4.0

我需要阅读来自政府 HHS 部门的 Excel 2003 电子表格。XLS 已合并单元格、受密码保护的宏和表单控件（例如，按钮、下拉菜单）。

以下是要求：

我需要在没有安装 Excel 的服务器上务实地阅读此内容。

我不能使用 OLE 4 驱动程序，因为它存在合并单元格的问题，数据被丢弃。或者也许其他的东西，比如表单控件正在把它扔掉。

Excel 阻止我将受密码保护的电子表格保存为 XML，我们将没有密码。

我尝试使用 Excel 2007 和 2010 将其保存为 XLSX 并使用 ACE OLE Excel 驱动程序。合并的单元格似乎不是问题，但表单控件是问题（也许使用 JET 驱动程序也是如此）。

我在 CodeProject 上尝试了一个读取本机 BIFF 格式的示例项目，它在 2003 年运行良好，但在 2007 年和 2010 年出现了阻塞，我们可能很快就会升级，所以我不想计划它很快就会过时。

是否有一个好的、可靠的、对企业责任友好的开源库来读取可能会读取此电子表格的本机 XLS 格式，或者我是否必须决定是否需要说服我的经理我们需要购买第 3 方产品或获得在服务器上安装 Excel 的皮塔公司例外。如果没有其他选择，前者是首选方法。

什么是我最好的选择，或者什么是一个可靠的 3rd 方库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:41:24.740

我不确定这是否正是您所需要的，但如果您使用[NPOI](http://npoi.codeplex.com/)（不是 Gembox），您可以阅读和修改受保护的工作簿并保存它们。例如，您可以尝试像这样读取 A1 单元格的值，修改 D4 的值并保存结果。即使工作簿受到保护（您不能使用 Excel 修改 x.xls），这项工作也能正常工作。

```
 string fullPath = @"c:\tmp\x.xls";
        FileStream aFile = new FileStream(fullPath, FileMode.Open, FileAccess.Read);
        HSSFWorkbook wb = new HSSFWorkbook(aFile);
        aFile.Close();
        ISheet curSheet = wb.GetSheet("Foglio1");
        IRow aRow = curSheet.GetRow(0);
        if (aRow == null)
            aRow = curSheet.CreateRow(0);
        ICell aCell = aRow.GetCell(0);
        if (aCell == null)
            aCell = aRow.CreateCell(0);
        MessageBox.Show(aCell.StringCellValue);
        aRow = curSheet.GetRow(3);
        if (aRow == null)
            aRow = curSheet.CreateRow(3);
        aCell = aRow.GetCell(3);
        if (aCell == null)
            aCell = aRow.CreateCell(3);
        aCell.SetCellValue("testValue");
        fullPath = @"c:\tmp\x2.xls";
        File.Delete(fullPath);
        aFile = new FileStream(fullPath, FileMode.Create);
        wb.Write(aFile);
        aFile.Close(); 
```

不幸的是，没有办法使用 NPOI 取消保护工作表（至少不是我知道的一种方式），但是您可以将密码设置为您想要的任何内容，即使不知道原始密码也是如此。它很简单：

```
curSheet.ProtectSheet(string.Empty); 
```

# ruby-on-rails - 是否有用于从我的应用程序字符串中获取资源的 gem（rails）？

> ID：12633085
> 
> 赞同：0
> 
> 时间：2012-09-28T03:08:09.957
> 
> 标签：ruby-on-rails, internationalization

我必须翻译我的应用程序。我可以花几天时间将每个字符串重写为资源并将其添加到 YAML 文件中，或者找到一个可以简化任务的 gem。外面有这样的东西吗？

像[https://github.com/balinterdi/i15r](https://github.com/balinterdi/i15r)这样的东西，但也会将创建的资源添加到 yaml 文件中

谢谢

# c++ - 如何通过声明克服循环依赖？

> ID：12633087
> 
> 赞同：1
> 
> 时间：2012-09-28T03:08:29.317
> 
> 标签：c++

> **可能重复：**
> [如何声明相互引用的类？](https://stackoverflow.com/questions/2503533/how-can-i-declare-classes-that-refer-to-each-other)

下面是我在 .h 文件中的代码。编译器会抱怨在 CPattern 中有 SP 对象。我不能将 SP 的声明放在 CPattern 之上，因为它也在其中声明了 CPattern 对象。我该如何解决这个问题？感谢您的帮助！

```
class CPattern
{
public:
    CPattern(void);
    ~CPattern(void);

    SP & Create(void);
};

class SP
{
private:
    const CPattern*    pPat;
public:
    SP()
    {
    }
    ~SP()
    {
        // pointer no longer requried
        delete pPat;
    }    
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T03:09:54.417

`class SP;`在文件顶部添加。这是一个[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)，它告诉编译器 an`SP`是什么，但没有描述它的实现。

# apache - mod_speling 未按预期启用不区分大小写

> ID：12633097
> 
> 赞同：1
> 
> 时间：2012-09-28T03:09:42.917
> 
> 标签：apache, mod-speling

我在两个单独的 VPS 帐户上运行 Ubuntu 12，并且在这两个帐户上都遇到了同样的问题。

*   我已经通过“a2enmod 拼写”启用了拼写模块。

*   我在 /etc/apache2/mods-available 中有 speling.load 和 speling.conf，它们都在 /etc/apache2/mods-enabled 中有别名。

*   `cat speling.conf`产生“CheckSpelling on”，并`cat speling.load`给出“LoadModule speling_module /usr/lib/apache2/modules/mod_speling.so”

*   我还验证了 /usr/lib/apache2/modules/ 确实包含“mod_speling.so”。

*   我反复重启了 Apache。

然而 - 如果我在 URL 中错误地大写了一个单词，我会得到一个 404。“CheckSpelling on”不是要消除这个吗？也许我误解了。

我确信我错过了一些愚蠢的步骤，但想不出是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-19T04:19:30.453

在它运行良好多年之后，这对我也突然不起作用。

我改变了我的配置指令：

```
 CheckSpelling on
 CheckCaseOnly on 
```

至：

```
 checkspelling on
 checkcaseonly on 
```

现在它又可以工作了。所以把它全部小写，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T10:18:43.213

很可能是 mod_rewrite 干扰了 mod_speling，因为不检查匹配 mod_rewrite 规则的 url 的拼写。

检查您的 httpd.conf、站点配置以及 .htaccess 文件中的 mod_rewrite 规则，这些规则可能与您尝试不区分大小写的 url 匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-15T22:26:25.283

如果你的 httpd.conf 看起来像这样不要添加
[![httpd.conf](../Images/ffd4970e4ceafb59e571d6825f461972.png)](https://i.stack.imgur.com/isF4P.png)

```
LoadModule speling_module modules/mod_speling.so 
```

即使这样可以解决问题..而是遍历文件夹的所有目录`conf.modules.d`并加载所有文件并搜索`mod_speling.so`，您会在其中找到它`00-base.conf`并从中删除`#`主题标签，然后它就会立即加载。

[![module.d 目录](../Images/fb6817e5f5634682deaeb0171d8f17e1.png)](https://i.stack.imgur.com/7jaIh.png) [![00-base.conf 与 mod-speling.so](../Images/5fbcd5c42abf154f20f758f1d8484c85.png)](https://i.stack.imgur.com/WFGSh.png) [![LoadModule mod_speling.so 已修复](../Images/566e4331c15020a535af1ef4705d3275.png)](https://i.stack.imgur.com/Y9car.png)

# python - 更改 WxPython 应用程序 Mac 菜单栏标题？

> ID：12633100
> 
> 赞同：3
> 
> 时间：2012-09-28T03:09:55.730
> 
> 标签：python, wxpython, .app

我已经用我的 WxPython 脚本制作了一个 .app，它即将完成。问题是，菜单栏标题显示为“Python”。这怎么能改变？我会使用 wx.Menu()/wx.MenuBar()，还是 .app 文件本身有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T00:15:33.397

请务必使用 Py2app，并确保 .plist 填写正确，即 IE CFBundleName 和 CFBundleDisplayName。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-28T03:31:27.667

编辑：我的旧答案不起作用。

这个问题与您的问题有关，尽管他们询问的是 QT： [在我的 python Qt 应用程序中将 Mac OSX 应用程序菜单菜单栏项设置为“Python”以外](https://stackoverflow.com/questions/7827430/setting-mac-osx-application-menu-menu-bar-item-to-other-than-python-in-my-pyth)

一个基本的总结：你不能用python代码来做。您必须创建一个应用程序包。该帖子中的一个答案链接到基本操作方法。

另外，看看py2app：[http ://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html)

# graph - PAM 和 Metis 分区的区别

> ID：12633104
> 
> 赞同：3
> 
> 时间：2012-09-28T03:10:28.990
> 
> 标签：graph, social-networking, cluster-analysis, partitioning

围绕 Medoids 进行分区（PAM；k-means 的稳健版本）与矩阵的 METIS 分区有很大不同吗？我的意思是它们当然是不同的方法，但是输出会有很大的不同吗？

我不知道Metis，只知道它是一种矩阵的划分方法。如果将 PAM 和 Metis 应用于距离矩阵，结果会有多大不同？

背景：我阅读了一篇使用 Metis 划分社会矩阵（谁是谁的朋友的 nxn 矩阵）的工作论文。由于 Metis 没有在 R 中实现，我想使用 PAM 粗略地得到他们的结果。

想法？任何参考资料都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:22:05.840

你有一些参考资料吗？

> METIS 是一组用于划分图、划分有限元网格和为稀疏矩阵生成填充减少排序的串行程序。在 METIS 中实现的算法基于我们实验室开发的多级递归二等分、多级 k-way 和多约束分区方案。

听起来不像 METIS 会是一个**单一的算法**，所以我认为你的问题没有很好的形成。也许您首先应该自己更多地研究 Metis（或者给我们更多参考您*到底*指的是什么方法）。

# solr - 无法对 Solr 地理空间搜索结果进行排序

> ID：12633106
> 
> 赞同：5
> 
> 时间：2012-09-28T03:11:24.587
> 
> 标签：solr, lucene, gis, geospatial, solarium

我们如何让 Solr 3.6.1 返回按距离过滤和排序的地理空间**搜索**结果`bbox`？

[我尝试按照Solr 文档](http://wiki.apache.org/solr/SpatialSearch)中的说明将 a 附加`&sort=geodist() asc`到 URL ，但出现错误：

`sort param could not be parsed as a query, and is not a field that exists in the index: geodist()`

**使用 sort & bbox 查询 URL（不工作）**

```
http://localhost8080/solr/select?wt=json&indent=true
&q=*:*
&fl=id,latlng
&fq={!bbox%20pt=42.352455,-71.048069%20sfield=latlng%20d=5}
&sort=geodist() asc 
```

**使用排序查询 URL (Works)**

```
http://localhost:8080/solr/select?wt=json&indent=true
&fl=id,latlng
&q=*:*
&sfield=latlng
&pt=42.352455,-71.048069
&sort=geodist()%20asc 
```

**使用 bbox 查询 URL (Works)**

```
http://localhost8080/solr/select?wt=json&indent=true
&q=*:*
&fl=id,latlng
&fq={!bbox%20pt=42.352455,-71.048069%20sfield=latlng%20d=5} 
```

如何`bbox`按距离（`geodist()`）过滤和排序结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:52:13.720

只需将您拥有的“pt”和“sfield”本地参数拉出到顶级查询参数中，就像您对工作排序查询所做的那样。您的 fq 将只是 {!bbox d=5}

# ios - 如何记录 iOS 内存警告的级别？

> ID：12633109
> 
> 赞同：0
> 
> 时间：2012-09-28T03:11:39.037
> 
> 标签：ios, cocoa-touch

> **可能重复：**
> [iPhone OS 内存警告。不同级别的含义是什么？](https://stackoverflow.com/questions/2915247/iphone-os-memory-warnings-what-do-the-different-levels-mean)

我可以在控制台中看到内存警告，并使用 编写它们`NSLog(@"%s", __ func__)`，但我不知道如何确定内存警告的级别。

有没有办法以编程方式确定我的 iOS 应用程序收到的内存警告级别？

# php - 我想在 java 脚本代码中传递阿拉伯语 val

> ID：12633113
> 
> 赞同：-1
> 
> 时间：2012-09-28T03:12:33.997
> 
> 标签：php, javascript, html

这是 search.js 中的代码`

```
$('#search').keyup(function () {
var search_term = $(this).val();
$.post('search1.php', { search_term: search_term }, function(data) {
    $('#search_results').html(data);
    }) 
```

; });`

我在 phpmyadmin 中使用 utf_8 和

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-6"> 
```

在 html 代码中

这是search.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-6">
<head>
        <meta charset="utf-8">
        <title>search</title>
        <link rel="stylesheet" type="text/css" href="css/style5.css">
</head>
<body>
       search name : <input id="search" type="text" />
        <div id="search_results"></div>
        <script type="text/javascript" src="js/jquery.js" ></script>
        <script type="text/javascript" src="js/search.js" ></script>

</body>
</html> 
```

这是search1.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-6">
<head>
<meta charset="utf-8">
<title>search</title>
</head>
<body>
<?php
include('connect.php');
if (isset($_POST['search_term'])) {
$search_term = mysql_real_escape_string(htmlentities($_POST['search_term']));
if (!empty($search_term)) {

$search= mysql_query("SELECT name FROM patients WHERE name like '%$search_term%'");
$result_count = mysql_num_rows($search);
$suffix = ($result_count !=1) ? 's' : '';
echo '<p>your search for '.$search_term.' returned '.$result_count.'result'.$suffix.'</p>';
while ($results_row = mysql_fetch_assoc($search)){

echo '<P><strong>'.$results_row['name'].'</strong></p>';

}
}
}

?>
</body>
</html> 
```

当我在框中写“ع”时，我会显示“Ø¹”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:14:16.130

`UTF-8`不是`iso-8859-6`。您应该将字符集设置为 UTF-8，或者将 MySQL 输出转换为 iso-8859-6。

# android - Android 片段问题

> ID：12633115
> 
> 赞同：0
> 
> 时间：2012-09-28T03:12:45.417
> 
> 标签：android

好的，我正在尝试下载一些 xml 并使用片段。我有一个未找到来源的错误，并相信我的代码有问题。logcat 没有产生任何错误，应用程序一打开就会关闭，这是我的主要片段

```
 package com.paad.earthquake;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.GregorianCalendar;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import android.app.ListFragment;
import android.location.Location;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;

public class EarthquakeListFragment extends ListFragment {

 ArrayAdapter<Quake> aa;
 ArrayList<Quake> earthquakes = new ArrayList<Quake>();

 @Override
  public void onActivityCreated(Bundle savedInstanceState) {
super.onActivityCreated(savedInstanceState);

int layoutID = android.R.layout.simple_list_item_1;
aa = new ArrayAdapter<Quake>(getActivity(), layoutID , earthquakes);
setListAdapter(aa);

refreshEarthquakes();
  }

  private static final String TAG = "EARTHQUAKE";
   private void refreshEarthquakes() {
    // Get the XML
     URL url;
    try {
      String quakeFeed = getString(R.string.quake_feed);
      url = new URL(quakeFeed);

    URLConnection connection;
  connection = url.openConnection();

  HttpURLConnection httpConnection = (HttpURLConnection)connection;
  int responseCode = httpConnection.getResponseCode();

  if (responseCode == HttpURLConnection.HTTP_OK) {
    InputStream in = httpConnection.getInputStream();

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();

    // Parse the earthquake feed.
    Document dom = db.parse(in);
    Element docEle = dom.getDocumentElement();

    // Clear the old earthquakes
    earthquakes.clear();

    // Get a list of each earthquake entry.
    NodeList nl = docEle.getElementsByTagName("entry");
    if (nl != null && nl.getLength() > 0) {
      for (int i = 0 ; i < nl.getLength(); i++) {
        Element entry = (Element)nl.item(i);
        Element title = (Element)entry.getElementsByTagName("title").item(0);
        Element g = (Element)entry.getElementsByTagName("georss:point").item(0);
        Element when = (Element)entry.getElementsByTagName("updated").item(0);
        Element link = (Element)entry.getElementsByTagName("link").item(0);

        String details = title.getFirstChild().getNodeValue();
        String hostname = "http://earthquake.usgs.gov";
        String linkString = hostname + link.getAttribute("href");

        String point = g.getFirstChild().getNodeValue();
        String dt = when.getFirstChild().getNodeValue(); 
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss'Z'");
        Date qdate = new GregorianCalendar(0,0,0).getTime();
        try {
          qdate = sdf.parse(dt);
        } catch (ParseException e) {
          Log.d(TAG, "Date parsing exception.", e);
        }

        String[] location = point.split(" ");
        Location l = new Location("dummyGPS");
        l.setLatitude(Double.parseDouble(location[0]));
        l.setLongitude(Double.parseDouble(location[1]));

        String magnitudeString = details.split(" ")[1];
        int end =  magnitudeString.length()-1;
        double magnitude = Double.parseDouble(magnitudeString.substring(0, end));

        details = details.split(",")[1].trim();

        Quake quake = new Quake(qdate, details, l, magnitude, linkString);

        // Process a newly found earthquake
             addNewQuake(quake);
          }
        }
       }
    } catch (MalformedURLException e) {
        Log.d(TAG, "MalformedURLException", e);
    } catch (IOException e) {
      Log.d(TAG, "IOException", e);
    } catch (ParserConfigurationException e) {
  Log.d(TAG, "Parser Configuration Exception", e);
} catch (SAXException e) {
  Log.d(TAG, "SAX Exception", e);
}
finally {
}
  }

    private void addNewQuake(Quake _quake) {
     // Add the new quake to our list of earthquakes.
      earthquakes.add(_quake);

        // Notify the array adapter of a change.
       aa.notifyDataSetChanged();
      } 
```

这是我的主要java类

```
package com.paad.earthquake;

  import android.os.Bundle;
  import android.support.v4.app.FragmentActivity;

   public class Earthquake extends FragmentActivity {

   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   }

} 
```

这是我的主要 xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="horizontal" >
 <fragment 
  android:name="com.paad.earthquake.EarthquakeListFragment"
    android:id="@+id/EarthquakeListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

    </LinearLayout> 
```

我也有一个助手类，但我认为你不必看到它。任何帮助表示赞赏。日志猫不抛出异常，甚至不知道从哪里开始寻找这个。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.paad.earthquake"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Earthquake"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:26:17.217

根据我的经验，在没有堆栈跟踪的情况下直接在启动后关闭通常意味着您的 AndroidManifest.xml 文件存在问题。您是否在清单中声明了您的主要活动？

如果你这样做，你也可以在这里发布吗？

# python - python 在使用 raw_input 时有条件（新手）

> ID：12633116
> 
> 赞同：0
> 
> 时间：2012-09-28T03:12:47.303
> 
> 标签：python, python-2.7, conditional, raw-input

我有一个关于使用 in`conditional`和`raw_input.`

基本上我正在尝试在 Python 中搜索字典并评估用户输入。我正在尝试检查用户输入是否在字典中。

（我不会包括字典）

```
shortname=raw_input('Please enter a short name that corresponds to the dictionary: ')

if shortname in paperwork:
    print paperwork['shortname']

else:
    print 'Name Not Found' 
```

问题是当我评估用户输入时，它实际上是真的时将其声明为假。谁能告诉我我做错了什么来帮助我？

文书工作中的“短名称”错误

（当我手动检查它是否有效时会得到什么）

我环顾四周，我认为这个问题太基本了，不在这里。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:38:46.530

除了你的错误

```
if shortname in paperwork:
    print paperwork['shortname'] 
```

`shortname`您在哪里使用字符串文字而不是使用变量`'shortname'`

在我提出的这个例子中我没有遇到任何问题：

```
lettersStored = ['a','b','c','d']
name=raw_input('Please enter a letter:\n')

if name in lettersStored:
    print "Found it at index %d " % (lettersStored.index(name))
else:
    print 'Not found' 
```

我用输入测试了它：

```
a  (Found it at index 0)
b  (Found it at index 1)
c  (Found it at index 2)
z  (Not Found) 
x  (Not Found) 
```

# c# - 我应该如何显示这个水平不规则的显示块？

> ID：12633117
> 
> 赞同：0
> 
> 时间：2012-09-28T03:12:48.877
> 
> 标签：c#, asp.net, .net, html, asp.net-4.0

请看这个网站：

[http://www.rivvir.com/blog/](http://www.rivvir.com/blog/)

可以看到柱子的块都是不规则的。例如。第一列的高度可能较小，第二列可能较大，依此类推。但是当第二行数据开始时，它从第一行第一列数据的下方开始。

如何在 Asp.Net 中实现这种类型的显示？假设我为此目的使用中继器。你能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:33:03.007

查看 ThinkingStiff 对这个问题的回答： [CSS: Ignoring divs height when floating](https://stackoverflow.com/questions/8843465/css-ignoring-divs-height-when-floating)

它可以使用 CSS 完成，但使用特定于浏览器的 CSS 选择器。看看他链接到的 jsfiddle，因为它显示了跨浏览器支持的完整 css 标记。

# java - 动态检索 JSON 元素后，如何删除重复值？数组列表？哈希表？

> ID：12633120
> 
> 赞同：-1
> 
> 时间：2012-09-28T03:13:12.090
> 
> 标签：java, json, arraylist, hashmap

我有建议说将元素存储在 arraylist 中然后进行比较，我也听到有人建议使用 HashMap。但是，我对 Java 非常陌生，我不知道什么是 arraylist，什么是 hashmap。有没有好心人来引导我？

我的 json 文件：

```
{"rel": "IsA", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "914e6775fd79d660bacf22ec699568e6694da3e8", "features": ["america_beautiful IsA -", "america_beautiful - national_anthem", "- IsA national_anthem"], "end": "national_anthem", "license": "/l/CC/By-SA", "uri": "/a/[IsA/,america_beautiful/,national_anthem/]", "start": "america_beautiful", "context": "/ctx/all", "surfaceText": null}
{"rel": "PartOf", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "a2c3ddf6b6237156dbeac84eea2801d35a9562d4", "features": ["ankara PartOf -", "ankara - central_anatolia_region", "- PartOf central_anatolia_region"], "end": "central_anatolia_region", "license": "/l/CC/By-SA", "uri": "/a/[PartOf/,ankara/,central_anatolia_region/]", "start": "ankara", "context": "/ctx/all", "surfaceText": null}
{"rel": "AtLocation", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "ec1914bfb0606c36376fbbcd316e5666022e2469", "features": ["apple_inc AtLocation -", "apple_inc - unite_state", "- AtLocation unite_state"], "end": "unite_state", "license": "/l/CC/By-SA", "uri": "/a/[AtLocation/,apple_inc/,unite_state/]", "start": "apple_inc", "context": "/ctx/all", "surfaceText": null}
{"rel": "AtLocation", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "0209765bf7185615ef242513f61ca0f61efe2a04", "features": ["audi AtLocation -", "audi - curitiba", "- AtLocation curitiba"], "end": "curitiba", "license": "/l/CC/By-SA", "uri": "/a/[AtLocation/,audi/,curitiba/]", "start": "audi", "context": "/ctx/all", "surfaceText": null}
{"rel": "AtLocation", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "5158d1cfce728efb3e42840d166ec06153a3d77d", "features": ["audi AtLocation -", "audi - ingolstadt", "- AtLocation ingolstadt"], "end": "unite_state", "license": "/l/CC/By-SA", "uri": "/a/[AtLocation/,audi/,ingolstadt/]", "start": "audi", "context": "/ctx/all", "surfaceText": null} 
```

我的java文件：

```
package com.infinitegraph.samples.hellograph;

// Import all InfiniteGraph packages
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import com.infinitegraph.*;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;
// Import SLF4J logging packages
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import com.infinitegraph.BaseVertex;
import java.util.HashMap;
import java.util.ArrayList;

public class HelloGraph
{

    public static void main(String[] args)
    {
                BufferedReader br = null;
                JSONParser parser = new JSONParser();

        // Set up logging for the HelloGraph class
        Logger logger = LoggerFactory.getLogger(HelloGraph.class);

        // Create null transaction, null graph database instance
        Transaction tx = null;
        GraphDatabase helloGraphDB = null;

        // Name for graph database and property file
        String graphDbName = "HelloGraph";
        String propertiesFileName = "HelloGraph.properties";    

        try
        {
            try
            {
                // Delete graph database if it already exists
                GraphFactory.delete(graphDbName, propertiesFileName);
            }
            catch (StorageException sE)
            {
                logger.info(sE.getMessage());
            }

            // HINT: Add code to create graph database and its contents
            // Create graph database
            logger.info("> Creating graph database ...");
            GraphFactory.create(graphDbName, propertiesFileName);

            // Open graph database
            logger.info("> Opening graph database ...");
            helloGraphDB = GraphFactory.open(graphDbName, propertiesFileName);

            // Begin transaction
            logger.info("> Starting a read/write transaction ...");
            tx = helloGraphDB.beginTransaction(AccessMode.READ_WRITE);

            //create head vertex
            HeaderVertex head = new HeaderVertex("JSON File");
            helloGraphDB.addVertex(head);

            try {

                String sCurrentLine;

                br = new BufferedReader(new FileReader("C:/Users/ji/Desktop/example.json"));

                while ((sCurrentLine = br.readLine()) != null) {

                    Object obj;

                    try {
                        obj = parser.parse(sCurrentLine);
                        JSONObject jsonObject = (JSONObject) obj;

                        //code to create vertex
                        logger.info("> Creating Start vertices ...");           
                        String start = (String) jsonObject.get("start");
                        StartVertex startV = new StartVertex(start);
                        helloGraphDB.addVertex(startV); 

                        String end = (String) jsonObject.get("end");
                        //System.out.println(end);
                        EndVertex endV = new EndVertex(end);
                        helloGraphDB.addVertex(endV);

                        String rel = (String) jsonObject.get("rel");
                        //System.out.println(rel);
                        logger.info("> Creating Relationship edge ...");
                        Relationship relationship1 = new Relationship("");
                        Relationship relationship2 = new Relationship(rel);

                        // Connect edges
                        logger.info("> Connecting vertices ...");
                        startV.addEdge(relationship1, head, EdgeKind.BIDIRECTIONAL, (short) 0);
                        endV.addEdge(relationship2, startV, EdgeKind.BIDIRECTIONAL, (short) 0);

                    } catch (ParseException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    if (br != null)br.close();
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }

            // Specify a named root for traversal
            logger.info("> Naming a root vertex ...");
            helloGraphDB.nameVertex("JSON File", head);

            // Commit to save your changes to the graph database
            logger.info("> Committing changes ...");
            tx.commit();
        }

        catch (ConfigurationException cE)
        {
            logger.warn("> Configuration Exception was thrown ... ");
            logger.error(cE.getMessage());
        }

        finally
        {
            // If the transaction was not committed, complete
            // will roll it back
            if (tx != null)
                tx.complete();
            if (helloGraphDB != null)
            {
                helloGraphDB.close();
                logger.info("> On Exit: Closed graph database");
            }
        }
    }

}

// HINT: Add class definitions for Person and Meeting classes here.
class HeaderVertex extends BaseVertex
{
    private String header;

    public HeaderVertex (String header)
    {
        setStartName(header);
    }

    public void setStartName (String header)
    {
        markModified();
        this.header = header;
    }

    public String toString()
    {
        fetch();
        return this.header;
    }
}

class StartVertex extends BaseVertex
{
    private String start;

    public StartVertex (String start)
    {
        setStartName(start);
    }

    public void setStartName (String start)
    {
        markModified();
        this.start = start;
    }

    public String toString()
    {
        fetch();
        return this.start;
    }
}

class EndVertex extends BaseVertex
{
    private String end;

    public EndVertex (String end)
    {
        setEndVertex(end);
    }

    public void setEndVertex (String end)
    {
        markModified();
        this.end = end;
    }

    public String toString()
    {
        fetch();
        return this.end;
    }
}

class Relationship extends BaseEdge
{
    private String rel;

    public Relationship (String rel)
    {
        setRelationship(rel);
    }

    public void setRelationship (String rel)
    {
        markModified();
        this.rel = rel;
    }

    public String toString()
    {
        fetch();
        return this.rel;
    }
} 
```

感谢所有帮助！请帮我这个编码菜鸟！：（ 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:25:38.050

*   [ArrayList-Oracle(Java) 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)
*   [HashMap-Oracle(Java) 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

你可以在那里看到这两个类的官方文档。这应该让您知道他们有哪些可用的方法以及如何使用它们:)

如果您需要更多帮助，请随时询问:)

# browser - 我想要更少的打印机输出并适合一页

> ID：12633138
> 
> 赞同：0
> 
> 时间：2012-09-28T03:16:02.607
> 
> 标签：browser, rendering

我有一个 google-app-engine 应用程序，可以为附近的网球场生成一份注册表。我的第一个测试法庭告诉我，在任何一天，他们都希望能够将明天的表格打印为一页。[这里的答案建议使用 jinja 来实现类似的目标](https://stackoverflow.com/questions/11665401/)，我假设我会为打印结果省略完整浏览器应用程序的一些输出。但是在 jinja 或 css 中是否有其他策略或......这将使我能够将输出强制到单个页面上。[您可以在此处看到包含所有输出的典型页面。我只想要表格和**打印**的日期。](http://reservationschedule.appspot.com/reserve/Brians/2)

# java - java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 运行 jar 文件时

> ID：12633149
> 
> 赞同：1
> 
> 时间：2012-09-28T03:18:06.937
> 
> 标签：java

> **可能重复：**
> [java.lang.ClassNotFoundException：com.mysql.jdbc.Driver](https://stackoverflow.com/questions/2591505/java-lang-classnotfoundexception-com-mysql-jdbc-driver)

大家好，
这是我的示例代码：

```
Connection conn = null;
String url = "jdbc:mysql://localhost:3306/";
String dbName = "test";
String driver = "com.mysql.jdbc.Driver";
String userName = "root"; 
String password = "admin";
try {
  Class.forName(driver).newInstance();
  conn = DriverManager.getConnection(url+dbName,userName,password);
  System.out.println("Connected to the database");
  conn.close();
  System.out.println("Disconnected from database");
} catch (Exception e) {
  e.printStackTrace();
} 
```

我在eclipse中运行没问题，但是我构建到jar文件并在命令行上运行`java -jar Test.jar`我得到这个错误：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source) 
```

请帮助我如何解决它。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:21:46.933

您缺少 MySQL JDBC 驱动程序`.jar`文件，或者它不在您的类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:24:07.820

您需要将sql驱动程序放入类路径中，将驱动程序放在与jar文件相同的文件夹中并运行

java -classpath mysql-connector-java-5.1.22-bin.jar -jar Test.jar

[您可以从http://www.mysql.com/downloads/connector/j/](http://www.mysql.com/downloads/connector/j/)下载 mysql java 驱动程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T03:34:11.397

如果您使用的是 maven，请在 pom.xml 中添加以下依赖项

```
<dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.13</version>
        <classifier />
    </dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T04:23:27.987

将 MySQL jdbc 驱动程序 jar 文件添加到您的类路径中。

# eclipse-plugin - 我无法使用 Platform.getExtensionRegistry().getExtensionPoint 获得扩展点

> ID：12633156
> 
> 赞同：0
> 
> 时间：2012-09-28T03:18:50.737
> 
> 标签：eclipse-plugin, eclipse-rcp

请有人帮助我，

我正在构建一个 rcp 应用程序，它运行良好。但是今天早上，我在 Eclipse IDE 中运行它，它被声明了，但它几乎立即无声地终止了。我通过删除我的 rcp 应用程序的工作区文件夹解决了这个问题，它再次工作。

但在解决上述问题后，我无法获得我的扩展点，`Platform.getExtensionRegistry().getExtensionPoint`因为它总是返回 null。我确信我已经以正确的方式配置了我的扩展点。

附加信息： - 我在 Window 7 32 位上使用 Eclipse 4.2 (Juno)。- 如果我将我的应用程序作为 Eclise IDE 的托管插件启动，我可以获得我的扩展点，但独立的 rcp 应用程序会出现问题。

请帮我回拨分机点！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T03:40:14.557

2年过去了，很抱歉我没有发布解决方案。

我认为工作空间中内置了一些资源，当我删除 rcp 应用程序的工作空间时，我也删除了所有资源，因此无法获取扩展。

我的解决方案是清理项目及其依赖项。清理后，项目运行良好。

也许有人有其他解决方案，但这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-12T11:10:39.207

确保提供完全限定的扩展点名称，我的意思是插件+扩展点名称。

我试图仅通过扩展点名称检索扩展点，这就是返回 null 的原因。

希望这可以帮助

# html - Internet Explorer 中的图像非常大，而 firefox 和 chrome 则很好

> ID：12633158
> 
> 赞同：1
> 
> 时间：2012-09-28T03:19:05.257
> 
> 标签：html, css, internet-explorer

培训师照片的图像是巨大的，而 Firefox chrome 或 safari 中的图片是正常大小的。我假设这是 ie 与 css 的一个怪癖，但我有足够的经验知道具体应该修复什么。

更新：我已经修复了显示正确大小的图像部分，但图片所在的单元格仍然与图片很大时的大小相同。什么可能导致 IE 中的单元格很大，但不是 firefox、chrome、safari。

```
 <tr>
        <td class = "spacer"></td>
        <td class = "trspacer" colspan = "1"></td>
        <td class="trainerimg" colspan = "1"><img src = "images/deanne.jpg" alt = "Deanne" /></td>
        <td class="trainer2" colspan = "4" style= "font-size:14"><h2>Deanne Cox</h2><p>Having been in the fitness field for over 25 years, I have worn many hats.  I have owned a gym, worked in a rehabilitation clinic, taught a variety of group exercise classes, been a personal trainer, and held several management positions in a big health club.  Although the experiences were all different, the one constant was working with people who had ideas, dreams, and goals that involved self-improvement of one type or another: gain or lose weight, gain muscle/get stronger, increase flexibility, run faster, pass the fitness test to get the job, get off medication, avoid surgery, stress relief,  and the list goes on and on.  The best part is, no matter how big or small the goal, any degree of improvement is a success. And helping clients achieve this success is incredibly rewarding.  So while I am in the exercise business, it is really about the people.  And the people are why, after all these years, I still love what I do.</p>

<p>American Council on Exercise (ACE), American Institute of Fitness Educators, (AIFE), Cooper Institute, RehabTex - Exercise Specialist, PregnaCare Director, TRX Personal Training, TRX Group Training, RIPPED, CPR/AED</p></td>
        <td class = "trspacer" colspan = "1"></td>
        <td class = "spacer"></td>
        </tr>
        <tr>
        <td class = "spacer"></td>
        <td class = "trspacer" colspan = "1"></td>
        <td class="trainerimg" colspan = "1"><img src = "images/betsy.jpg" alt = "Betsy" /></td>
        <td class="trainer" colspan = "4" style= "font-size:14"><h2>Betsy Cooper</h2><p>My passion is to empower and motivate my clients through fitness so
they can live happy and healthy lives. I also believe that the only person you should try to be better than, is the person you were yesterday! Before joining the The San Antonio Country Club Fitness Center, I was the Wellness
Director at The Towers on Park Lane. 

My previous fitness experiences include working at
the Concord Athletic Club for over 10 years.
In supervisory positions at the Concord, I instructed
a variety of group fitness classes and worked in the Health and
Fitness Center conducting an array of health screenings
and assisted in teaching the "Fit for Life" program for
weight management. I even took my
experience to the Caribbean Seas as the Activities Director on a
Cruise Ship.</p>
<p>The Physicalmind Institute for Pilates mat instruction,
Polestar Pilates for instruction on Pilates equipment, (AFAA) Aerobics and Fitness
Association of America, People with Arthritis Can Exercise (PACE), CPR/AED </p></td>
        <td class="trspacer" colspan = "1"></td>
        <td class = "spacer"></td>
        </tr>
        <tr>
        <td class = "spacer"></td>
        <td class="trspacer" colspan = "1"></td>
        <td class="trainerimg" colspan = "1"><img src = "images/jen.png" alt = "Jen" /></td>
        <td class="trainer2" colspan = "4" style= "font-size:14"><h2>Jennifer Hartley</h2><p>I became a fitness professional out of a deeply held belief that physical activity can improve so many aspects
of one's life.  Physical fitness doesn't just make you look better, it makes you feel better, cope with stress, fight off aches and pains, and helps the rest of your day go better. I graduated from the University of Texas at Austin and I have over 8 years experience in the fitness industry.  </p>
<p>National Academy of Sports Medicine(NASM) Personal Trainer, NASM Corrective Exercise Specialty, Aerobic and Fitness Association of America(AFAA) Personal Trainer, AFAA Group Exercise, Kettlebell Concepts Level 1, TRX Personal Training, TRX Sports Medicine, Spinning Instructor, CPR/AED.</p></td>
        <td class="trspacer" colspan = "1"></td>
        <td class = "spacer"></td>
        </tr>
        <tr>
        <td class = "spacer"></td>
        <td class="trspacer" colspan = "1"></td>
        <td class="trainerimg" colspan = "1"><img src = "images/marta.jpg" max-height = "100px" max-width = "100px" alt = "marta" /></td>
        <td class="trainer" colspan = "4" style= "font-size:14"><h2>Marta Wilson</h2><p>I have been working and playing in gyms since 1984\.  I found I really enjoyed the feeling of helping somebody achieve their goals and guiding clients to a healthy and sustainable lifestyle.
  After college I worked as a Dental Assistant for many years. Even when I was working in dentistry I always had a hand in the fitness field.
  I decided that personal training was where my heart was, retired myself from dental assisting and worked at an exclusive gym in Beverly Hills.  I worked as a trainer until I got pregnant at the age of 40\. I have been training in the industry for nearly 15 yrs.  
 My passion is helping women be and feel their best, I truly believe a healthy lifestyle and being fit is achievable for everyone.</p>
 <p>National Academy of Sports Medicine(NASM), CPR/AED</p></td>
        <td class="trspacer" colspan = "1"></td>
        <td class = "spacer"></td>
        </tr>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:34:06.293

我注意到你的最后一个图像标签上有一个 max-height 和 max-width 属性。`<img>`标签没有 max-height 或 max-width 属性，但您可以在 CSS 上设置它。

尝试将以下属性添加到您的`trainerimg`类中：

```
.trainerimg {
    max-height: 100px;
    max-width: 100px;
} 
```

`width`请注意，您还可以通过将和`height`CSS 属性添加到类来强制图像具有统一的宽度和高度`trainerimg`。

**`max-height`并且`max-width`不能在 IE 6 或 7 上工作，所以如果你支持它，你应该使用特定的`height`和`width`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:32:15.343

尝试清除浏览器`zoom`。然后找到图像的真`width`和`height`，并按照上面的建议在 img 标签中指定尺寸。

# sql - 如何确定oracle中是否正在使用以及使用哪个索引

> ID：12633159
> 
> 赞同：3
> 
> 时间：2012-09-28T03:19:09.037
> 
> 标签：sql, oracle, indexing, oracle-sqldeveloper

谁能提供有关如何检查或验证我创建的索引是否在查询中使用的说明？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T05:28:45.920

在“解释计划”之后，你会想要这样的东西：

```
select * from table(dbms_xplan.display); 
```

读这个：

*   [http://use-the-index-luke.com/sql/explain-plan/oracle/getting-an-execution-plan](http://use-the-index-luke.com/sql/explain-plan/oracle/getting-an-execution-plan)
*   [http://use-the-index-luke.com/sql/explain-plan/oracle/operations](http://use-the-index-luke.com/sql/explain-plan/oracle/operations)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T16:29:52.877

使用以下设置，然后执行会话查询。

```
 Set Autotrace on; 
```

我看到你正在使用 sqldeveloper。当您执行设置自动跟踪后，脚本输出窗口将显示解释计划和统计信息，而查询结果窗口将显示您的输出。解释计划会让您知道索引是否用于执行的查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T03:30:48.727

我相信你可以使用甲骨文

```
EXPLAIN PLAN for sql 
```

它应该为您概述正在使用的索引（如果有）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-21T01:47:38.147

如果这是在 SQLDeveloper 中，则突出显示查询并单击“Autotrace”按钮。通常，F6 键对应这个动作。

[![SQLDeveloper 自动跟踪按钮](../Images/040523598845df0816fb9dac5b90fb3b.png)](https://i.stack.imgur.com/2LLqa.png)

# wcf - 通过 WCF + 上传文件夹权限将文件上传到 IIS

> ID：12633160
> 
> 赞同：1
> 
> 时间：2012-09-28T03:19:21.387
> 
> 标签：wcf, iis

我编写了一个 WCF 客户端/服务器，以便将文件从客户端发送到服务。

我最初将服务托管在控制台 APP 中，一切正常。

但是当我尝试在 IIS 中托管时，我得到了一个例外。是否需要为我尝试上传文件的文件夹授予一些特殊权限。

我读了一篇博客，上面说我们需要为文件夹指定 NTFS 权限。但是我们如何指定它们呢？

有人可以帮我弄这个吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:55:28.117

您需要为运行您要上传到的文件夹的 Web 应用程序的进程（帐户）授予写入权限。您可以通过右键单击 Windows 资源管理器中的文件夹，选择属性，然后选择安全选项卡来执行此操作，然后您可以设置各种帐户的权限。

如果文件大小超过 6 MB 时遇到问题，您可能需要调整 IIS 文件上传大小限制。

# windows - 有没有办法在 DisableProcessWindowsGhosting 之后重新打开 Windows 重影功能？

> ID：12633161
> 
> 赞同：13
> 
> 时间：2012-09-28T03:19:44.537
> 
> 标签：windows, winapi

我们有一个在主线程中做繁重工作的应用程序。为了防止 Windows在繁重的工作期间将其视为“无响应”并启动重影功能（如此[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/dd744765%28v=vs.85%29.aspx)中的“挂起 - 操作系统透视”部分所述），我们可以使用[DisableProcessWindowsGhosting](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648415%28v=vs.85%29.aspx)关闭重影功能。

但是我们不想在接下来的会话中关闭它，我们希望在完成繁重的工作后重新打开它。不幸的是，Windows 没有为此提供任何（记录在案的）API。

是否有任何（可能是hacky）方法可以重新打开它？

有趣的是，当应用程序在 VC 调试器中运行时，重影功能被关闭，但一旦它被分离，它就会重新打开。调试器一定有什么，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-07-06T17:16:39.837

忽略这样一个事实，在 UI 线程上做繁重的工作本身就是错误的（繁重的工作应该在一个单独的线程上完成，可以选择将其进度传达给 UI），下面的建议只是为了回答这个问题，支持注释中提到的遗留代码场景。

`DisableProcessWindowsGhosting`是一条单向路径，并且在进程的生命周期内禁用重影功能，因此唯一的重新启用条件是重新启动整个进程。

否则，所有正在调试的应用程序（不仅在 VC 调试器中，而且在任何调试器中）也免于重影。如果您想破解这种情况，您可以制作一个配套应用程序，它会`DebugActiveProcess`在繁重的工作期间作为调试器 ( ) 附加到您的应用程序，并在完成后自行分离 ( `DebugSetProcessKillOnExit(FALSE)`+ `DebugActiveProcessStop`)。这会降低性能，并可能导致提升、分叉和 SEH 等问题。

最小化的窗户也应该不会出现重影，但我自己还没有测试过这个。

# asp.net - MVC 4 Web API 操作返回：类型与 HttpResponseMessage

> ID：12633174
> 
> 赞同：13
> 
> 时间：2012-09-28T03:23:02.277
> 
> 标签：asp.net, asp.net-web-api, action

返回类型有什么区别，例如

```
 public class MyController : ApiController
    {
        public IEnumerable<MyType> Get()... 
```

对比

返回 HttpResponseMessage：

```
 public class MyController : ApiController
    {
        public HttpResponseMessage Get()... 
```

??

MVC 是否将类型包装到 HttpResponseMessage 内容对象中？除了显式添加格式化程序之外，页面上的结果看起来相同。

与客户有什么区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T16:46:55.643

没有区别。

如果您返回 CLR 类型，`HttpResponseMessage`无论如何它都会被包装。

唯一的区别是，如果您返回`HttpResponseMessage`，您将有机会直接使用 HTTP - 因此您可以设置标头、绕过`MediaTypeFormatters`等。

这完全取决于个人喜好和/或在您的行动中执行的活动。

# javascript - 我应该如何处理休息；javascript开关中的return语句之后的语句？

> ID：12633178
> 
> 赞同：0
> 
> 时间：2012-09-28T03:23:21.620
> 
> 标签：javascript, jquery, jslint

我有以下内容：

```
 switch (entity) {
    case "Topic":
        return {
            pk: "0006000",
            param: "?pk=0006000",
            table: "Content",
            success: true
        };
        break; 
```

对于不同的实体，这会随时重复。所有代码都以相同的方式使用 return 语句然后是 break 进行编码。

当我运行 jslint 时，它抱怨说“以防万一返回后中断”。我应该以不同的方式对此进行编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:26:24.990

> *“我应该以不同的方式编码吗？”*

是的，删除`break`. 因为函数已经返回，所以它在那里没用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:26:57.563

不需要使用`break`after `return`，`return`会导致函数立即存在，之后的任何代码`return`都不会被执行。

还有什么办法吗？您可以使用对象来保持关系。

```
var map = {
  'Topic' : {
            pk: "0006000",
            param: "?pk=0006000",
            table: "Content",
            success: true
   },
   // ...
};

return map[entity]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:27:29.913

在这种情况下，break 语句永远不会命中，因为在此之前就已经返回了值。

您可以安全地移除中断；

但我觉得将它存储在变量中后返回它是一个好习惯

```
var obj = {};
 switch (entity) {
    case "Topic":
       obj= {
            pk: "0006000",
            param: "?pk=0006000",
            table: "Content",
            success: true
        };
        break;
   }
   return obj; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:30:51.137

你并不真的需要休息，但我认为从 switch 语句中返回不是一个好习惯。设置一个变量，切换后返回。

# python - 嵌套字符串格式

> ID：12633179
> 
> 赞同：10
> 
> 时间：2012-09-28T03:23:22.790
> 
> 标签：python, python-3.x, string-formatting

我正在写一些报告，我想知道是否有更简单的方法来获得以下行为。

```
>>> '{:-^60}'.format('Percentage used: {:.2%}'.format(.4))
'------------------Percentage used: 40.00%-------------------' 
```

如您所见，我将文本居中，然后打印一个百分比格式的数字。但我在另一个内部使用了格式函数。如果可能的话，我想在一个函数中做同样的事情，如下所示。

```
'$SOMETHING GOES HERE'.format(header = 'Percentage Used:',percentage = .4) 
```

当然，我正在寻找一个通用的解决方案，它可以与所有或大多数格式化选项一起使用，而不仅仅是对齐

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T03:25:52.150

一个更具可读性的选项可能是`str.center`

```
>>> 'Percentage used: {:.2%}'.format(.4).center(60, '-')
'------------------Percentage used: 40.00%-------------------' 
```

# php - Codeigniter MVC / 显示表中的所有记录

> ID：12633182
> 
> 赞同：1
> 
> 时间：2012-09-28T03:23:45.637
> 
> 标签：php, codeigniter

我编写的以下代码仅显示表中的最后一行。但是我需要在表格中`loop`显示每个。`row`

# 模型

```
class Catalog_products extends CI_Model {

    function Show_all_products()
    {

        $q = $this->db->get('printer');

        foreach ($q->result() as $row)
            {
                $data = array();
                $data['id'] = $row->id;
                $data['name'] = $row->name; 
            }   

        return $data;

    }

} 
```

# 看法

```
<?php echo $id ?>
<?php echo $name ?> 
```

# 控制器

```
public function catalog()
{

    $this->load->model('Catalog_products');
    $data = $this->Catalog_products->Show_all_products();
    $this->load->view('catalog', $data);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T03:28:00.630

模型：

```
function Show_all_products()
{
   return $this->db->get('printer')->result();
} 
```

控制器：

```
$data['products'] = $this->Catalog_products->Show_all_products();
$this->load->view('catalog', $data); 
```

看法：

```
foreach($products as $product) {
    echo $product->id;
    echo $product->name;
} 
```

# php - PHP 是否可以更快地解析带有 // 注释或换行符的代码？

> ID：12633184
> 
> 赞同：4
> 
> 时间：2012-09-28T03:23:48.767
> 
> 标签：php, performance, comments

哪个 php 解析得更快：

1.  `//`
2.  `//`
3.  `//`
4.  `//`
5.  `//`

或者：

 ```换句话说，`//`与通过空行所需的时间相比，解析评论所需的速度是否极其微不足道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:28:36.970

`//`还是三四个字。`//\n\r`或`//\n`取决于操作系统。但换行只是两个或一个字符`\n\r`或`\n`.

现代口译员足够聪明，可以对其进行优化。您应该更多地关注代码的可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:45:26.283

注释将被解析为解析树中的单个节点，但换行符的相邻空白将导致解析树中只有一个节点。

So the technical answer is the whitespace will parse faster, but it is marginal and completely negligible in just about any PHP script. Use an op cache, which will toss out the comments and whitespace, if compile times actually matter to you.```

# php - 用 PHP 刷新页面的好方法是什么？

> ID：12633188
> 
> 赞同：0
> 
> 时间：2012-09-28T03:24:26.860
> 
> 标签：php, javascript, redirect, header, meta

这似乎应该很简单，但我遇到了一些麻烦。

我有一个索引页面，它既是登录页面又是主要内容页面，具体取决于是否设置了会话变量。

我尝试使用从 PHP 回显的 JavaScript 来处理重定向，但它看起来很草率并且需要一点时间，所以我改用 header("location:abc.php")。将它用于索引页面的问题是它在发送输出后不起作用。我也尝试过使用元标记来刷新页面，但这不适用于所有浏览器。

处理这种情况的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:30:21.803

你可以使用它们中的任何一个。但是，`header("location: abc.php")`发送响应后将不起作用！解决方法很简单。使用输出缓冲。

```
<?php
ob_start()

//here goes many lines of your wonderful php code blocks

//now send the header based on your logic
header("location: abc.php")

ob_end_flush() 
```

请查看[官方文档](http://php.net/manual/en/function.ob-start.php)以获取更多信息

更新：您可以考虑@zerkms 的建议。如果您确实需要静默重定向到其他页面，请在使用`header()`函数发送任何输出之前执行此操作。但是，如果你想表明你正在重定向他/她，你可以使用你之前使用的 javascript！对于后者，还可以使用[Meta Refresh](http://en.wikipedia.org/wiki/Meta_refresh)

```
<meta http-equiv="refresh" content="5;URL='http://example.com/'"> 
```

`ob_start()`将对此有所帮助。因为，您可能会在页面上显示很多东西，然后告诉他/她将被立即重定向。上面的示例将在 5 秒内将用户重定向到 example.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:42:39.910

```
<?php
session_start();

//all of the php code goes here

header("location: samepage.php")

?> 
```

确保您的所有 php 代码都位于浏览器的顶层并且不使用任何 echo 命令 - 否则您最终会在页面顶部显示 echo 的内容 - 而不是使用 echo 命令使用更可靠的变量必要时在 html 正文中使用变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:30:41.023

这是做你想做的吗？

```
<?php
session_start();

if ($_SESSION['logged_in']) {
  header("Location: mainpage.php");
  exit();
}

// Display login form 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T03:42:59.723

你可以试试这个

**JAVASCRIPT**

```
function timedRefresh(timeoutPeriod) {
setTimeout("location.reload(true);",timeoutPeriod);
 } 
```

**HTML**

```
 <!--The page will refresh every 5 seconds.-->   
 <body onload="timedRefresh(5000)"> 
```

# linux - make include/linux/version.h 时仍然缺少 version.h

> ID：12633195
> 
> 赞同：0
> 
> 时间：2012-09-28T03:26:20.777
> 
> 标签：linux, makefile, kernel, driver

我将在 linux 中为我的以太网 atheros ar8152 编译源代码并需要它的内核源代码。所以我通过输入 apt-get install apt-get install kernel-source-2.6.32 来获取源代码。然后 cd /usr/src
tar -jxvf kernel-source-2.6.32.tar.bz2 ln –s linux-source-2.6.32 linux

我正在做的安装源以太网是：make install

我收到错误消息：未配置 Linux 内核源 - 缺少 version.h

然后，我转到内核源目录 make include/linux/version.h

再试一次，我仍然收到上面的错误消息。

接下来我该怎么办？

需要你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:33:19.857

用于`apt-get install linux-headers-$(uname -r)`为您的发行版和内核版本获取正确的内核头文件。`kernel-source`通常适用于尝试构建自己的内核的人。

# python - SQLAlchemy，使用表继承过滤连接查询

> ID：12633197
> 
> 赞同：0
> 
> 时间：2012-09-28T03:26:26.610
> 
> 标签：python, join, sqlalchemy, class-table-inheritance

首先，很抱歉，如果事实证明我要做的是在这里冒烟，我绝不是 DB 或 SQLA 专家。=)

我有两个类，Person 和 Organization，它们使用表继承从 Contact 继承。（ Person.id 是 Contact.id 的一个 fkey ），它工作正常。

我想从搜索框中搜索并获取所有联系人的列表。通常，当我完成一系列事情时，我会这样做：

```
def build_query(self):
  return self.session.query(Person)

def filter_query(self, query)
    if self.search_form_values.get('name_last',None):
        query = query.filter(
            Person.name_last==self.search_form_values.get('name_last') 
        )
    ...
    return query 
```

然后在其他地方执行查询。问题是我想取回一个联系人对象列表，但我想过滤 Organization.name、Person.name_last 和 Person.name_first，所有这些都来自在搜索表单上的“名称”框中键入的值。我不知道如何用一个查询来做到这一点，甚至不确定它是否可能。不过，我肯定想避免两个单独的查询具有交错的结果。

是否有一些过滤功夫可以让我做到以上几点？IE

*   取回所有联系人：
    *   有 name_last 或 name_first 匹配，如果联系人是一个人
    *   如果联系人是组织，则名称匹配

谢谢

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:45.790

每个线程：

[http://groups.google.com/group/sqlalchemy/browse_thread/thread/b45ccc630739ae78#](http://groups.google.com/group/sqlalchemy/browse_thread/thread/b45ccc630739ae78#)

如果查询(Contact).with_polymorphic([Person, Organization])，可以参考Person。和组织。在您的查询中。它将产生一个从联系人到每个相关表的 LEFT OUTER JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:51:26.500

我认为这在 SQL 中根本不容易实现。单个 SQL 查询只能返回固定数量的列，并且每一行必须具有所有相同的列。你的个人和组织显然是不同的。

当然，总是可以返回两个表的列的并集，将特定记录中不存在的列设置为`null`. 我不认为 SQLAlchmey 对象很容易从这些数据中重新创建。我并不是说这是不可能的，但我敢打赌 10 美元这是不切实际的。

如果我是你，我宁愿使用两个查询，合并结果，看看性能是否足够糟糕以至于无法关心。

当然，获取和合并两个查询会使分页输出变得很痛苦。如果我非常关心搜索响应，我可能会考虑获取过多的记录并将它们缓存在 RAM 或临时表中，链接到特定的搜索请求（例如它的哈希）。需要超过 2-3 页的用户很少需要等待运行繁重的查询，但大多数用户将得到快速服务。

# bash - bc 中的大十六进制到二进制转换

> ID：12633199
> 
> 赞同：2
> 
> 时间：2012-09-28T03:26:31.503
> 
> 标签：bash, bc

我正在尝试将 32 个字符长的十六进制字符串（例如：）转换`A41EB86E184207262C12F66E7C480577`为二进制。我正在使用：

```
echo "ibase=16; obase=2; $line" | bc 
```

但它包括一个不必要`\`的中间，它不允许我对结果执行任何位操作。

我得到的一个示例输出是：

```
10100100000111101011100001101110000110000100001000000111001001100010\
110000010010111101100110111001111100010010000000010101110111 
```

注意`\`第一行末尾的 。

我能做些什么来避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T03:28:32.090

如果你有足够现代的`bc`，你可以设置`BC_LINE_LENGTH`为零来禁用换行：

```
pax> echo "ibase=16;
...>       obase=2;
...>       A41EB86E184207262C12F66E7C480577" | BC_LINE_LENGTH=0 bc 
```

这会在一行上输出您的号码。

```
1010010000011110101110000110111000011000010000100000011100100110001011000001... 
```

我倾向于在我的`.profile`（或者`.bashrc`，我不记得我的头顶）有它，因为我喜欢它是默认值：

```
export BC_LINE_LENGTH=0 
```

从手册页：

> **BC_LINE_LENGTH：**这应该是一个整数，指定数字输出行中的字符数。这包括长数字的反斜杠和换行符。作为扩展，零值禁用多线功能。此变量的任何其他小于 3 的值都将行长度设置为 70。

如果您`bc`不支持“0 表示禁用”扩展名，您也可以将其设置得非常高：

```
export BC_LINE_LENGTH=9999 
```

如果您`bc`因为根本不允许而受到“挑战”，则`BC_LINE_LENGTH`可能需要恢复到输出的后处理，例如使用`tr`摆脱换行符和反斜杠：

```
pax> echo "ibase=16;obase=2;A41EB86E184207262C12F66E7C480577" | bc | tr -d '\\\n' 
```

# symfony - Symfony2 - 如何在不影响数据库的情况下创建新的 OneToOne 关系

> ID：12633203
> 
> 赞同：0
> 
> 时间：2012-09-28T03:26:56.687
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我有一个 BlogBu​​ndle，我想在我的帖子中添加一个线程（使用 FOSCommentBundle），但是按照 FOS 文档，我必须提供线程 ID。问题是我所有的旧帖子都将线程属性设置为 NULL，将新线程与旧帖子相关联的最佳方法是什么？如果可能，我不必更改 FOSThreadController。

```
/**
 * @var \ACME\CommentBundle\Thread $thread
 * 
 * @ORM\OneToOne(targetEntity="ACME\CommentBundle\Entity\Thread", cascade={"persist", "remove"})
 */
private $thread; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:35:35.050

您可以编写[命令](http://symfony.com/doc/current/components/console/introduction.html)来查找所有带有*thread == null*的帖子并为其创建线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-03T04:50:21.840

在你的学说/your_entity.orm.xml/yml 中定义映射。

# ubuntu - Ubuntu上swing应用的系统菜单中不显示输入法菜单项

> ID：12633204
> 
> 赞同：0
> 
> 时间：2012-09-28T03:27:00.677
> 
> 标签：ubuntu, java

在我的 Ubuntu 机器上，我通过将 CityIM.jar 文件复制到 jre/ 来安装 City 输入法 (http://docs.oracle.com/javase/1.5.0/docs/guide/imf/spi-tutorial.html)我的 jdk 的 lib/ext。然后启动一个swing应用程序（例如freeMind），将焦点放在一个文本字段上，打开应用程序的系统菜单，但我没有在该菜单上看到任何“选择输入法”菜单项，如[http://中所说docs.oracle.com/javase/1.5.0/docs/guide/imf/spi-sample/CityIM.html](http://docs.oracle.com/javase/1.5.0/docs/guide/imf/spi-sample/CityIM.html)

你知道为什么我可以看到那个菜单项吗？谢谢。

环境信息：

*   Ubuntu 桌面
*   Jdk 1.6.0_21 “独立” 例如直接从 Oracle 站点下载的包，而不是通过 ubuntu apt-get 安装的 jdk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:15:31.693

这是一些java环境的一个*特性*，系统菜单不包括*选择输入法*项。例如 Linux、Solaris、浏览器中的小程序。在 javadesktop.org 上有一篇关于它的文章： [通过热键选择输入法](http://www.javadesktop.org/articles/InputMethod/index.html#Input_method_selection_by_a_hot_key)。

对于所有平台，都可能有一个热键触发输入法选择菜单，因此对于 Ubuntu，这是设置它的唯一方法。在文章中提到他们提供`InputMethodHotKey.jar`，这是配置此热键的一个很好的 gui。我验证过，它适用于 Debian。

# c# - 使用文件夹中文件列表中的链接创建 asp:Repeater

> ID：12633208
> 
> 赞同：0
> 
> 时间：2012-09-28T03:28:14.370
> 
> 标签：c#, asp.net, asprepeater

我有一个应用程序可以创建 PDF 并将它们存储在网站内的文件中。我需要遍历每个文件并找到具有特定名称的文档。我可以毫无问题地创建该列表，但对创建链接的最佳方法感到困惑

这是我到目前为止所拥有的：

```
string rootFolderPath = Server.MapPath("~/Forms/Offers");
string listOfBidSheets = @"*" + prospect.LastName.Trim() + "_" + prospect.FirstName.Trim() + "*";
string[] fileList = System.IO.Directory.GetFiles(rootFolderPath, listOfBidSheets);

if (fileList.Length > 0)
{  
    rptPDFLinks.DataSource = fileList;
    rptPDFLinks.DataBind();
} 
```

难倒我的部分是在代码的前端放什么：

```
<li><%# DataBinder.Eval(Container.DataItem, "Item") %></li> 
```

通常，当我绑定到转发器时，Container.DataItems 很容易，因为它们是列名。

关于在哪里采取这个的任何想法？我对不同的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:42:12.580

DataBinder 类是一种用一些可选格式呈现 DataItem 属性的好方法。在您的情况下，DataItem 只是一个字符串，因此您不想使用 DataBinder。您可以直接使用 DataItem ：

```
<li><%# Container.DataItem %></li> 
```

但是，此代码不会为您提供链接。你想做这样的事情：

```
<li><a href="/Forms/Offers/<%# Container.DataItem %>"><%# Container.DataItem %></a></li> 
```

您还需要从文件名中删除路径。这是一个使用一些 LINQ 的示例（您需要在文件顶部添加“使用 System.Linq”：

```
rptPDFLinks.DataSource = fileList.Select(x => System.IO.Path.GetFileName(x));
rptPDFLinks.DataBind(); 
```

# iphone - 如何将 iPhone 上的系统音频录制到文件中？

> ID：12633209
> 
> 赞同：2
> 
> 时间：2012-09-28T03:28:14.463
> 
> 标签：iphone, audio, recording

这就是我希望在 xCode 中做的事情

1.  在 iPhone 上播放音频文件
2.  允许用户对着麦克风讲话（贡献系统音频）
3.  录制系统音频（iphone上播放的音频文件和麦克风输入的音频的组合）

# cloud-foundry - 如何将java应用程序安装到另一个文件夹而不是ROOT

> ID：12633216
> 
> 赞同：0
> 
> 时间：2012-09-28T03:28:54.347
> 
> 标签：cloud-foundry

在 couldfoundry 中，如何将 java 应用程序安装到 webapps/abc，而不是 webapps/ROOT？

如果我push abc.war，希望能提取到webapps/abc，而不是webapps/ROOT

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:01:41.857

Java 应用程序始终作为 ROOT 安装，以便之后可以在“/”上访问它们。但当然，每个应用程序都有一个不同的 URL，即**yourappname** .cloudfoundry.com。为什么要保留“/abc/”部分？是因为应用程序中硬编码了“/abc/”网址吗？如果是这样，您应该确保正确地构建您的 URL，例如，`<c:url />`如果使用 JSP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:26:35.920

不，目前 CF 不支持外部 URL。外部是指您的应用映射到的 URL 必须以 .cloudfoundry.com 结尾。如果您安装了 vmc，它是 CF 的客户端命令行界面，您可以使用以下命令将您的应用程序映射到多个 URL：

```
vmc map <appname> <url> 
```

如果您尝试将其映射到 appname.cloudfoundry.com/subpath 之类的内容，您将收到一条错误消息，指出未启用外部 URI。

你可以去[http://support.cloudfoundry.com/forums/373013-feature-requests](http://support.cloudfoundry.com/forums/373013-feature-requests)提出来。

# asp.net-mvc - 设置 IIS7 gzip 压缩级别

> ID：12633217
> 
> 赞同：7
> 
> 时间：2012-09-28T03:28:57.123
> 
> 标签：asp.net-mvc, iis, iis-7, compression, gzip

在 ASP.NET MVC 中，我使用了 web.config 来启用和配置 IIS7.5 gzip 压缩设置。但是他们压缩级别设置似乎根本没有效果：

```
<scheme name="gzip" dynamicCompressionLevel="9" staticCompressionLevel="9"/> 
```

两种设置的压缩级别 = 0，我的主页被压缩到 9,290 字节（从 39,623 开始）

两种设置的压缩级别 = 9，我的主页被压缩到 9,290 字节（从 39,623 开始）

（使用提琴手检查压缩/未压缩的大小）

压缩量没有区别 - 为什么会这样？这发生在我的本地开发机器 - Windows 7 上。我还没有在我们的 Win 2008 Web 服务器上尝试过。

web.config 中的完整压缩设置：

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
  <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" dynamicCompressionLevel="10" staticCompressionLevel="10"/>
  <dynamicTypes>
    <add mimeType="text/*" enabled="true"/>
    <add mimeType="message/*" enabled="true"/>
    <add mimeType="application/javascript" enabled="true"/>
    <add mimeType="application/x-javascript" enabled="true"/>
    <add mimeType="application/xml" enabled="true"/>
    <add mimeType="*/*" enabled="false"/>
  </dynamicTypes>
  <staticTypes>
    <add mimeType="text/*" enabled="true"/>
    <add mimeType="message/*" enabled="true"/>
    <add mimeType="application/javascript" enabled="true"/>
    <add mimeType="application/x-javascript" enabled="true"/>
    <add mimeType="application/xml" enabled="true"/>
    <add mimeType="*/*" enabled="false"/>
  </staticTypes>
</httpCompression>
<urlCompression doStaticCompression="true" doDynamicCompression="true"/> 
```

编辑：显然最高级别是 9。这个页面说它是 10，但一定是不正确的[http://www.iis.net/configreference/system.webserver/httpcompression/scheme](http://www.iis.net/configreference/system.webserver/httpcompression/scheme)。使用level 9时问题依旧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:29:57.433

请仔细检查您是否[安装了动态压缩](http://www.iis.net/configreference/system.webserver/urlcompression)

接下来，您可能会查看覆盖一些[默认](http://www.iis.net/ConfigReference/system.webServer/httpCompression) 设置为 90% 的压缩，并且在您低于默认设置为 50%`dynamicCompressionDisableCpuUsage`之前，压缩不会再次启动。`dynamicCompressionEnableCpuUsage`我建议提高后者。

对于此类问题，还建议在SO 上的[几个](https://stackoverflow.com/questions/4662764/dynamic-compression-not-working-iis-7-5) [地方使用](https://stackoverflow.com/questions/10006/what-is-the-easiest-way-to-add-compression-to-wcf-in-silverlight)[失败的请求跟踪，这可能会帮助您发现问题。](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing/troubleshooting-failed-requests-using-tracing-in-iis)

以下问题有一些详细的解答

[如何在 IIS7 中进行 gzip 压缩？](https://stackoverflow.com/questions/786638/how-can-i-get-gzip-compression-in-iis7-working)

[压缩不起作用](https://stackoverflow.com/questions/11150680/compression-is-not-working)

更新：

该设置可能在应用程序级别被锁定，因此您应该尝试运行以下命令：

```
appcmd set config -section:urlCompression /doDynamicCompression:true 
```

如果它仍然是一个问题，那么可能值得调整`minFileSizeForComp`其默认值[随着更高的 IIS 版本而增加](http://www.iis.net/configreference/system.webserver/httpcompression)。

根据评论，在您尝试解决此问题时，还可以尝试动态启动和停止静态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:30:25.190

如果您的主页不是动态生成的，那么 dynamicCompressionLevel 将不起作用。

由于默认启用静态压缩，因此可能已经缓存了主页的压缩版本。您可以尝试简单地修改您的主页（例如，只更改一个字符）。然后它应该使用新设置重新压缩。

有可能默认的静态压缩已经在 9 级了。如果你看没有变化，你也可以尝试将静态级别*降低*到 1，看看是否有差异。

您可能需要提供 DLL：

```
<scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" staticCompressionLevel="9" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T09:06:34.240

您的 MVC 管道是否包含压缩过滤器？

如果是，它将优先于 IIS 动态压缩模块。此模块上的设置不会影响您的 MVC 页面，因为 IIS 动态压缩模块不会尝试压缩已经 http 压缩的输出。

# sql-server - 如何在sql server中打乱搜索数据

> ID：12633219
> 
> 赞同：-2
> 
> 时间：2012-09-28T03:29:19.360
> 
> 标签：sql-server

我有列名的表。我输入了例如 ABC，这里的问题我不仅要搜索 firstname = ABC，还要搜索 CAB 或 CBA 或 BAC。

任何想法如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:20:48.083

首先创建一个函数，它获取一个字符串（例如'ABC'）并返回一个包含给定字符串所有排列的表（例如'ABC'、'ACB'、'BAC'、'BCA'、'CAB'、'CBA'）

[我从这里](http://www.java2s.com/Tutorial/Java/0100__Class-Definition/RecursivemethodtofindallpermutationsofaString.htm)创建了一个基于 java 实现的函数：

```
CREATE FUNCTION [dbo].[permuteString] (@beginStr varchar(10),@endStr varchar(10))
RETURNS @result table (result varchar(10)) 
AS
BEGIN
     declare @i int
     declare @curStr varchar(10)
     if LEN(@endStr) <= 1
           insert into @result select @beginStr+@endStr
     else
           begin
                set @i = 1
                while(@i <= LEN(@endStr))
                begin
                  set @curStr = case when @i > 1 then substring(@endStr,1, @i-1) else '' end
                                + substring(@endStr, @i + 1, LEN(@endStr)-@i)        
                  insert into @result 
                  select * from dbo.permuteString(@beginStr + substring(@endStr,@i,1), @curStr)
                  set @i = @i+1
                end
           end  
    return 
END 
```

现在，当您拥有此功能时，请将其与`in`查询中的语句一起使用：

```
select columnName
from tableName
where columnName in (select * from dbo.permuteString('',@inputString)) 
```

您可以在这里看到更多排列函数的实现： [在 SQL Server 中生成排列的最优雅方式](https://stackoverflow.com/questions/3621494/the-most-elegant-way-to-generate-permutations-in-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:08:23.403

## 部分回答

似乎是一个有趣的问题要解决。简单的部分是将“ABC”拆分为单个字符，然后创建一个笛卡尔积将它们组合成独特的组合。困难的部分是创建动态 SQL 来处理笛卡尔积。

用于`abcd`更好地说明示例的笛卡尔积部分。

```
declare @val varchar(10) = 'abcd'

-- split the string apart
declare @len int = datalength(@val), @i int = 1

select cast(null as int) as id, cast(null as char(1)) as c
into   #temp
where  1=2

while @i <= @len
begin
  insert into #temp
  values (@i, substring(@val, @i, 1))

  set @i = @i + 1
end

-- pull the combinations (need to make this into dynamic SQL)
select a.c + b.c + c.c + d.c as names
into   #combos
from   #temp a, #temp b, #temp c, #temp d
where  a.id <> b.id and a.id <> c.id and a.id <> d.id and
                        b.id <> c.id and b.id <> d.id and
                                         c.id <> d.id

-- check work
select * from #combos

-- use the combos to pull records where the first name matches...
-- select * from [table] where firstname in (select names from #combos)

drop table #temp, #combos 
```

抱歉——没有时间弄清楚动态 SQL。让它恰到好处会很棘手。每个额外的字符都会给 dyn-SQL 增加指数级的体积。

这并不能消除像“Suzanne”这样的重复字母。

# javascript - 有时 window.resize 需要两次调整大小来实际执行我的 javascript

> ID：12633222
> 
> 赞同：1
> 
> 时间：2012-09-28T03:30:03.220
> 
> 标签：javascript, jquery, css-float, media-queries, onresize

我有一个列表，其中 li 图像向左浮动，并根据窗口大小（使用媒体查询和不同的 img 大小）以不同的行数排列。元素之间的垂直间距是通过使用底部边距来完成的。但是，最后一行的列表项不需要底部边距：它在页脚上方留下了太多空间。我想出了一种（可能效率低下）使用 JQuery 来消除底行项目的底部边距的方法：

```
 bottomMargin();
    window.onresize = bottomMargin;

    function numberOfRows () {
        var noOfRows = 0;
        $('#gallery ul li').each(function() {
            if($(this).prev().length > 0) {
                if($(this).position().top != $(this).prev().position().top)
                    noOfRows++;
            }
            else
                noOfRows++;
        });
        return noOfRows;
    }

    function whichRow() {
        var thisRow = 0;
        $('#gallery ul li').each(function() {
            if($(this).prev().length > 0) {
                if($(this).position().top == $(this).prev().position().top) {
                    $(this).data('row', thisRow);
                }   
                else {
                    thisRow++;
                    $(this).data('row', thisRow);
                }       
            }
            else {
                thisRow++;
                $(this).data('row', thisRow);
            }
        }); 
    }

    function bottomMargin() {                       
        whichRow();
        var totalRows = numberOfRows();
        $('#gallery ul li').each(function () {
            if ($(this).data('row') == totalRows)
                $(this).css('margin-bottom', '0%');
            else
                $(this).css('margin-bottom', '');   
        });
    } 
```

这将在大多数情况下起作用。但是，如果我从页面加载位置调整多个媒体查询的大小，它不会改变初始窗口调整大小的边距。在它摆脱那个讨厌的底部边缘之前，我必须再次稍微调整大小。为什么需要两次调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:37:15.130

嗯，听起来你在浏览器真正完成绘制页面之前做数学和应用边距的冲突，或者其他与时间相关的东西。尝试限制您的调整大小回调：

```
var resizeTimer = 0;

$(window).on('resize', function() {
  clearTimeout( resizeTimer );
  resizeTimer = setTimeout(bottomMargin, 30);
})

function bottomMargin() {
  ...
} 
```

# httpresponse - 发送带有不准确 Content-Length 标头的响应，然后手动结束它

> ID：12633223
> 
> 赞同：0
> 
> 时间：2012-09-28T03:30:20.630
> 
> 标签：httpresponse, http-content-length

我正在将文件发送到 MP3 播放器，并且该播放器需要知道文件长度才能正确显示进度条。问题是这个 MP3 来自一个即时转换结果的文件，所以我不知道最终文件的大小。只是一个估计值（比特率 * 持续时间）。因此，当为文件设置错误的 Content-Length 时，无法提供文件，下载在最后挂起并出现网络错误。

有没有办法强制浏览器接受最终和原样的数据？对于玩家来说，这不是问题，因为如果它比应有的更早到达终点，它可能会停止。

[编辑]

现在，我将尝试添加“00”字节，直到达到合适的大小并查看它是如何播放的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:18:14.837

由于我不需要任何 ID3 标签信息，因此针对这个特定 MP3 问题的解决方案是：

1.  使用 ffprobe.exe 之类的工具来获取持续时间

2.  删除 2 秒以确保在发送内容长度标头中指定的字节数之前不会到达大小未知的真实 MP3 文件的末尾。

3.  然后乘以比特率，得到未知大小的 MP3 的估计大小，然后删除一些 kb。

    ```
    Function getduration(ByVal url As String, ByVal curqual As Integer) As String            
    Dim path As String = "C:\cmd\"
    Dim app As String = MapPath(".") & "\ffprobe.exe"

    Dim myProcess As New System.Diagnostics.Process()
    Dim AppPath As String = Request.PhysicalApplicationPath 
    myProcess.StartInfo.FileName = app
    myProcess.StartInfo.Arguments = url
    myProcess.StartInfo.UseShellExecute = False
    myProcess.StartInfo.RedirectStandardOutput = True
    myProcess.StartInfo.RedirectStandardError = True
    myProcess.Start()

    Dim mystreamreader As StreamReader = myProcess.StandardError
    Dim str As String = mystreamreader.ReadToEnd
    Dim loca As Integer = str.IndexOf("Duration:") + 10
    Dim locb As Integer = str.IndexOf(",", loca)
    Dim tm As String = str.Substring(loca, locb - loca)
    Dim tim As Integer = TimeSpan.Parse(tm).TotalMilliseconds
    Dim siz As Long = (((tim - 2000) * curqual) / 8)
    Return siz
    End Function 
    ```

# ruby-on-rails - 通过 pow 访问的应用程序呈现不同？

> ID：12633225
> 
> 赞同：1
> 
> 时间：2012-09-28T03:30:24.890
> 
> 标签：ruby-on-rails, twitter-bootstrap, rack, rack-pow

查看通过[**Pow**](http://pow.cx/)（即 at `http://my_app.dev/`）提供的我的应用程序时，它呈现如下：

![在此处输入图像描述](../Images/f1955b09d244a6d29855ff1d9dc7f8a1.png)

通过**webrick**或**Thin**（即`rails server webrick`或`rails server thin`at `http://localhost:3000`）查看我的应用程序时，它呈现如下：

![在此处输入图像描述](../Images/a14b3998097b1c7f4db9cfed236251b2.png)

该应用程序是通过[**rails_apps_compser**](http://railsapps.github.com/tutorial-rails-apps-composer.html)选择`twitter bootstrap (sass)`选项生成的。

是什么导致了应用程序呈现的差异？我知道**Pow**是一个机架式网络服务器，但实际上响应请求的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:26:03.407

您可能在浏览器中为“localhost”设置了不同的缩放设置。尝试重置缩放级别。

（以下摘自[http://www.nikcub.com/posts/two-google-chrome-privacy-issues](http://www.nikcub.com/posts/two-google-chrome-privacy-issues)）

缩放数据与每个域相关联，并存储在用户首选项文件中，该文件是用户配置文件的一部分 -`~/Library/Application Support/Google/Chrome/Default`在 OS X 和`\Documents and Settings\%USER\Local Settings\Application Data\Google\Chrome\User Data\Default`Windows 中（或 Win8 中的 AppData）。首选项文件是一个纯文本文件，它以 JSON 格式存储用户首选项。

每个主机的缩放设置存储在此文件中，并且在用户删除浏览器历史记录时不会被删除，从而在用户调整缩放设置的地方留下访问过的域名的痕迹。

它的外观示例：

```
"per_host_zoom_levels": {
     "": -1.0,
     "1.bp.blogspot.com": -0.5778829455375671,
     "2.bp.blogspot.com": 3.0,
     "3.bp.blogspot.com": 3.0,
     "4.bp.blogspot.com": -2.22938871383667,
     "account.onetruefan.com": -1,
     "acko.net": -1.0,
     "allthingsd.com": -1.0,
     "antirez.com": -1,
     "api.jquery.com": -0.5778829455375671,
     "apple.stackexchange.com": -1.0,
     "archive.guardian.co.uk": -1.0,
     "arstechnica.com": -0.5778829455375671
 } 
```

任何其他有权访问用户配置文件的用户或进程都可以访问此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:02:44.900

查看源代码或使用浏览器控制台，并查看*CSS*是否正在加载。它看起来像一个*CSS*差异。使用*webrick*或*thin*，*资产*可能没有放在`stylesheet_include_tag`预期的任何地方。换句话说，查找*Rails 资产管道*......

# java - Java Web Start 的客户端安全性

> ID：12633227
> 
> 赞同：1
> 
> 时间：2012-09-28T03:30:45.300
> 
> 标签：java, security, java-web-start

我正在使用 java web start 部署应用程序，但遇到了问题。

完成部署后，我将`jar`客户端缓存目录中的包替换为另一个`jar`包，但应用程序运行的是后者`jar`。我已经在文件中配置了安全属性，并通过 . 对包进行了`JNLP`签名。我认为应该检查 包的合法性，并且在更改后它不应该运行。`jar``keytools``JWS``jar`

如何更改`JWS`本地签名包的检查？`jar`

# testing - 在grails的集成测试中测试beforeInterceptor

> ID：12633231
> 
> 赞同：4
> 
> 时间：2012-09-28T03:30:59.420
> 
> 标签：testing, grails, interceptor

有没有办法测试这个拦截器？它在我的测试中被忽略了。

代码：

```
class BaseDomainController {
    def beforeInterceptor = {
        throw new RuntimeException()
        if(!isAdmin()){
            redirect(controller: 'login', action: 'show')
            return
        }
    }
}

class BaseDomainControllerSpec extends IntegrationSpec{

    BaseDomainController controller = new BaseDomainController()

    def 'some test'(){
        given: 
            controller.index()
        expect:
            thrown(RuntimeException)
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:28:22.147

根据此线程[http://grails.1312388.n4.nabble.com/Controller-interceptors-and-unit-tests-td1326852.html](http://grails.1312388.n4.nabble.com/Controller-interceptors-and-unit-tests-td1326852.html) Graeme 表示您必须单独调用拦截器。在我们的例子中，由于我们使用拦截器来检查令牌，并且每个操作都相同，我们使用：

```
@Before
void setUp() 
{
    super.setUp();
    controller.params.token = "8bf062eb-ec4e-44ae-8872-23fad8eca2ce"
    if (!controller.beforeInterceptor())
    {
        fail("beforeInterceptor failed");
    }    
} 
```

我猜如果每个单元测试都为拦截器指定不同的参数，那么您每次都必须单独调用它。如果不想这样做，我认为您必须使用像 Grail 的功能测试这样的东西，它将贯穿整个生命周期：http: [//grails.org/plugin/functional-test](http://grails.org/plugin/functional-test)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-03T16:42:44.457

Grails 文档指出：

> 在集成测试期间调用操作时，Grails 不会调用拦截器或 servlet 过滤器。您应该单独测试拦截器和过滤器，必要时使用功能测试。

这也适用于单元测试，您的控制器操作不受定义的拦截器的影响。

鉴于您有：

```
 def afterInterceptor = [action: this.&interceptAfter, only: ['actionWithAfterInterceptor','someOther']]

    private interceptAfter(model) { model.lastName = "Threepwood" } 
```

要测试拦截器，您应该：

验证拦截是否应用于所需的操作

```
void "After interceptor applied to correct actions"() {

    expect: 'Interceptor method is the correct one'
    controller.afterInterceptor.action.method == "interceptAfter"

    and: 'Interceptor is applied to correct action'
    that controller.afterInterceptor.only, contains('actionWithAfterInterceptor','someOther')
} 
```

验证拦截器方法是否达到预期效果

```
void "Verify interceptor functionality"() {

    when: 'After interceptor is applied to the model'
    def model = [firstName: "Guybrush"]
    controller.afterInterceptor.action.doCall(model)

    then: 'Model is modified as expected'
    model.firstName == "Guybrush"
    model.lastName == "Threepwood"
} 
```

或者，如果您没有拦截器，请确认没有拦截器

```
void "Verify there is no before interceptor"() {
    expect: 'There is no before interceptor'
    !controller.hasProperty('beforeInterceptor')
} 
```

这些示例用于在拦截器之后进行测试，但同样适用于拦截器之前。

# ruby - 将 UTF-8 空格更改为 RegEx-able 空格

> ID：12633236
> 
> 赞同：1
> 
> 时间：2012-09-28T03:31:51.333
> 
> 标签：ruby, regex, encoding, utf-8

我有以下代码用 Nokogiri 解析 HTML 文档：

```
td.next_element.text.scan(/\A[^(]+/).first.gsub(/\s+/, " ").strip 
```

还有一个`case`带有正则表达式的语句，它有`\s+`并且没有捕获任何东西。我尝试使用`strip`，但它没有做任何事情。

在使用上面的代码进行测试后`gsub`，我发现空格的编码方式存在问题。`td.next_element.text[-2].ord`返回的不是我预期的 32，而是 160。我意识到我的文档是 UTF-8 而不是 ASCII，而且 160 是一个不间断的空格。

我应该能够做到这一点，我想：

```
case td.text.strip.downcase.gsub(/\xA0|\xC2/, ' ') 
```

问题是，我明白了

```
Encoding::CompatibilityError 
  (incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string)): 
```

我该怎么办？另外，正则表达式不应该匹配所有空格，而不仅仅是 ASCII 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:34:12.517

添加注释`#encoding: UTF-8`作为脚本的第一行；用于`/[[:space:]]/`查找 Unicode 空白。

# ruby-on-rails - 与 attr_accessible 和注册表单混淆

> ID：12633237
> 
> 赞同：2
> 
> 时间：2012-09-28T03:31:54.110
> 
> 标签：ruby-on-rails, attr-accessible

对于我正在处理的 Rails 项目，用户模型中的大部分信息都是保密的，例如两因素身份验证电话号码。

我只将模型中的基础知识`email`、`password`、 和`password_confirmation`.

当只能通过批量分配设置少数属性时，我正在尝试弄清楚如何为此类用户设置注册表单。有没有办法指定一组普通的`attr_accessible`属性，以及只有在创建新的用户实例时才能访问的第二组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:05:42.223

我不明白问题是什么。在您的表单将表单数据发布到的任何控制器操作中，只需从以下值中直接设置模型的非白名单值`params`：

```
def create
  user = User.new(params[:user]) 
  user.phone_number = params[:user][:phone_number]
  ... <other non-whitelisted attribute assignments> ...
  user.save!
end 
```

即使`phone_number`不在白名单属性列表中（即即使它没有出现在模型的参数`attr_accessible`中`User`），它也可以工作。您可以对任何其他未列入白名单的表单属性执行相同操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:00:53.950

attr_accessible 在该类上，因此您始终可以重新打开该类并再次定义它：

```
class User
    attr_accessible :email, :password, :password_confirmation
end 
```

这将采用您想要的任何控制器方法。完成后，您可以再次重新打开该类并设置一个新的 attr_accessible。

不过，这太可怕了。相反，您应该查看 attr_accessible 的定义并尝试直接执行它的操作。也许。

# javascript - 当在javascript html5 Metro应用程序中加载视图列表项时，如何将视图列表宽度设置为合适的大小

> ID：12633239
> 
> 赞同：-2
> 
> 时间：2012-09-28T03:32:15.787
> 
> 标签：javascript, html, listview, user-interface, microsoft-metro

我使用 javascript+html5 开发了一个 Metro 应用程序，在 UI 中有一个 listview，但无法将 listview 宽度设置为合适的大小，我没有将宽度设置为固定大小，因为我不知道如何许多项目将被加载。我尝试将列表视图宽度设置为自动大小，但没有办法。

PS。我资助了一种可以将listview宽度刷新到合适大小的方法，当鼠标悬停在后退按钮上时，UI会立即刷新，然后listview会自动将宽度设置为合适的大小，所以当XHR工作时如何刷新UI。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:26:06.723

使用 ListView，不需要设置大小来容纳所有项目——它将虚拟化您提供给它的视口内的数据并让用户滚动。但是，它确实需要一个大小。您可以使用正常的 CSS 规则设置大小以填充容器。

# java - 位移乘法循环

> ID：12633240
> 
> 赞同：0
> 
> 时间：2012-09-28T03:32:32.097
> 
> 标签：java, hash, bit-shift

我写了以下方法：

```
public static int hash2(String key, int tableSize) {
    int hashVal = 0;

    for(int i=0; i<key.length();i++) {
        hashVal = 37 * hashVal + key.charAt(i);
    }

    System.out.println(hashVal);

    hashVal %= tableSize;   
    if(hashVal < 0){
        hashVal += tableSize;
    }

    return hashVal;
} 
```

我的任务是在不使用任何乘法或除法的情况下重写 for 循环。我唯一的工具是 16 位二进制数的加法和移位。

我意识到我需要以某种方式将 hashVal 乘以 37，然后将 key.charAt(i) 添加到该值。我尝试了多种方法：

```
 for(int i=0; i<key.length();i++) {
        hashVal2 = hashVal2<<19 - hashVal2;
        hashVal2 += key.charAt(i);
    } 
```

或者

```
 for(int i=0; i<key.length();i++) {
        hashVal2 = hashVal2<<18 + hashVal2;
        hashVal2 += key.charAt(i);
    } 
```

或者

```
 for(int i=0; i<key.length();i++) {
        for(int j=0; j<37;j++) {
            hashVal2 += hashVal2;
        }
        hashVal2 += key.charAt(i);
    } 
```

但是这些最终都没有返回与原始方法相同的 hashVal（或 hashVal2）值。我是否误解了位移，还是与循环有关的东西是罪魁祸首？不知道还有什么可以尝试的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T03:45:04.460

乘以 37 与添加 2 的某些幂相同：

```
x * 37 == x * (32 + 4 + 1) 
```

这会告诉您如何换档，因为：

> 32 == 2 ⁵
> 4 == 2 ²
> 1 == 2 ⁰

最后，对于所有 i，x * 2 ^i == (x << i)。因此，将 x 乘以 37，您可以计算

```
(x << 5) + (x << 2) + (x) 
```

练习的其余部分应该相当简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:52:15.190

左移 1 位会将数字乘以 2。因此乘以 37 将 37 转换为二进制。这将是 100101

```
Number * 2^5 + Number * 2^2 + Number * 2^0
Number << 5 + Number << 2 + Number 
```

For 循环看起来像这样：

```
for(int i=0; i<key.length();i++) {
    hashVal = (hashVal << 5) + (hashVal << 2) + hashVal + key.charAt(i);
} 
```

# c++ - Visual C++，CMap 对象保存到 blob 列

> ID：12633241
> 
> 赞同：1
> 
> 时间：2012-09-27T07:55:20.087
> 
> 标签：c++, sql, oracle, mfc, blob

我构建了一个 Microsoft 基础类 (MFC) CMap 对象，其中每个对象实例存储 160K~ 长数据条目。

我需要将它存储在 Oracle SQL 上。

我们决定将其保存为 BLOB，因为我们不想创建额外的表。我们曾考虑将其保存为本地文件并将 SQL 列指向该文件，但我们宁愿将其作为 BLOB 保存在服务器上并每隔几周清除一次表。

该表有一个顺序键`ID`和两列日期/时间。我需要添加 BLOB 列以存储 CMap 对象。

你能推荐一个这样做的指南（读/写映射到blob或者可能是一个clob）吗？

如何在 Oracle 中创建 BLOB 字段，以及如何将对象读取和写入 BLOB？也许使用 CLOB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:04:07.270

CMAP 不能插入到 blob/clob 中，因为它使用指针。

首先使用 clob 并存储数组/向量而不是 cmap。

# php - 尝试按日期分组日期时间类型，但不是时间与 mysql

> ID：12633243
> 
> 赞同：-1
> 
> 时间：2012-09-28T03:33:02.930
> 
> 标签：php, mysql, sql

我有一张如下表：

```
 block int not null
  day datetime not null
  user int 
```

我想要

```
 select day, count(*) 
  from TABLE 
  where date between date() and TARDATE 
  group by day 
  order by day desc 
```

问题是，我只想按日期分组，而不是按时间分组。

我将如何在 MySQL/php 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T03:34:42.200

尝试

```
SELECT DATE(`day`) as `DAY`, COUNT(*) totalCount
FROM   TABLE 
WHERE  date BETWEEN date() AND TARDATE 
GROUP BY DATE(`day`)
ORDER BY day DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:59:03.710

试试这个

```
SELECT DATE(day), COUNT(*) as total_no FROM TABLE WHERE  date ( BETWEEN date() AND TARDATE ) GROUP BY DATE(day) ORDER BY day DESC 
```

# sql - NOLOCK IN 临时表

> ID：12633246
> 
> 赞同：5
> 
> 时间：2012-09-28T03:33:44.783
> 
> 标签：sql, nolock

我在我的程序中声明了一个表格，您可以在下面看到：

```
Declare @resultTable Table
(
  EmpId int,
  EmpStatusId int,
  CreatedDateTime datetime
) 
```

我执行删除功能：

```
Delete From ActualTable
Where Id = (Select EmpId from @resultTable with (nolock) where EmpStatusId = @tempId) 
```

我试图避免锁定 select 语句以避免死锁，即使我读取了脏数据。但是，不允许使用“with (nolock)”。错误说：

> 关键字“with”附近的语法不正确。如果此语句是公用表表达式或 xmlnamespaces 子句，则前面的语句必须以分号结束。

有没有办法在临时表中应用 NOLOCK？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T04:30:02.927

我会质疑你是否在问*正确*的问题：

您拥有表变量（注意：它不是临时表，而是表变量），因此对它发出 nolock 是没有意义的。您似乎希望对目标表 ActualTable 发出 nolock，但要使用 delete HAS 来持有锁。时期。

处理大型删除操作的常用技术是在行范围内批量发出删除。

# c++ - 在模板容器中存储元素

> ID：12633247
> 
> 赞同：0
> 
> 时间：2012-09-28T03:33:46.000
> 
> 标签：c++, templates, stl, containers

我有一个模板类，我正在为一个行为有点像 C++ STL 中的容器类之一的项目工作，但是我在找出一种好的安全方法来实现它时遇到了一些问题。

**一些背景知识：**我正在尝试将一个名为 Artemis 的现有项目（一个实体系统框架）从 Java 移植到 C++。有一个名为 bag 的类，它本质上是一个 ArrayList，但它包含的项目存储在数组中并使用索引查找以便更快地访问，存储的元素大部分存储自己的索引，但这并不重要。

**问题：**好的，所以我有一个包含 T 数组（模板类型）的模板类。我的问题是 T 元素的返回。在我的`T &Get(int index)`函数中，我想返回对给定索引处元素的引用，但我不知道如果该元素不存在该怎么办。我想返回类似 null 的东西，但这不起作用，因为`T`不能保证 ' 的类型是指针。我可以让容器类包含`T*`s，但是我会遇到一些奇怪的问题/复杂的事情，比如 int 和非指针 ( `std::string`) 以及一些超出范围的项目（除非我复制了值？）。

有没有人有任何想法或知道内置 STL 容器如何解决这些问题？我希望我已经足够清楚我的要求......

**链接：**

*   [我要移植的文件](https://code.google.com/p/artemis-framework/source/browse/src/com/artemis/utils/Bag.java)
*   [到目前为止我的工作](https://gist.github.com/3797792)（它并不漂亮，所以请注意）

我要移植的文件

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T03:41:08.540

当使用该语法时，标准关联容器（`map`、`unordered_map`等）会创建一个默认构造的对象`[]`并返回对该对象的引用。

您可以这样做，也可以在元素不存在时抛出异常。标准关联容器具有`at`执行此操作的功能。

另一种选择是有一个类似于标准容器函数的`find`函数，它返回一个*迭代器*到元素，而不是对元素的引用。如果元素不存在，则返回的迭代器等于`end(container)`。这样您就可以在不使用异常的情况下实际检查元素是否存在。

# java - 如何从 Java 中的 for 循环返回多个字符串？

> ID：12633249
> 
> 赞同：2
> 
> 时间：2012-09-28T03:33:52.550
> 
> 标签：java, string, for-loop, return, break

我正在使用 for 循环，每次循环都需要返回一个字符串，但是使用“return”会中断循环，并且 Eclipse 会引发“无法访问代码”错误。有什么建议么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:40:19.920

如果返回`ArrayList<String>`, 不适合您的应用程序，这听起来像是回调函数的工作。定义回调接口：

```
public interface StringDelivery {
    public void processString(String aString);
} 
```

然后在你的循环中你可以回调：

```
public void loopThroughStrings(StringDelivery callback) {
    for (. . .) {
        String nextString = . . .
        callback.processString(nextString);
    }
} 
```

然后，您可以使用任何实现该接口的对象调用它。

编辑：

如果您正在计算一堆字符串但需要将它们作为单个字符串返回，那么您可以将它们放入一个数组中，然后用于`Arrays.toString(Object[] array)`将整个数组转换为单个字符串：

```
int n = <number of strings>
String[] strings = new String[n];
for (int i = 0; i < n; ++i) {
    strings[i] = <i-th string>
}
return Arrays.toString(strings); 
```

返回值将使用由“，”分隔并括在方括号中的列表元素进行格式化：“[]”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T03:51:45.443

我认为你的逻辑被打破了

```
for (int counter = 0; counter < possibleAnswers.length; counter++){
    // This condition will be meet immediately because 0 is less then 25...
    if (counter < 25){
        return alpha[counter] + ": " + possibleAnswers[counter] + "\n";
    }
    // Meaning it is impossible for the program to ever reach this line...
    if (counter >= 26){
        return alpha[26] + a + ": " + possibleAnswers[counter] + "\n";
        a++;
    }
} 
```

我认为你可能会更好地尝试类似...

```
StringBuilder sb = new StringBuilder(25);
for (int counter = 0; counter < possibleAnswers.length; counter++){
    if (counter < 25){
        sb.append(alpha[counter] + ": " + possibleAnswers[counter] + "\n");
    }
    if (counter >= 26){
        sb.append(alpha[26] + a + ": " + possibleAnswers[counter] + "\n");
        a++;
    }
}
return sb.toString(); 
```

**更新工作示例**

```
String possibleAnswers[] = new String[30];
String alpha[] = new String[30];

for (int index = 0; index < 30; index++) {
    possibleAnswers[index] = "Happy " + index;
    alpha[index] = Integer.toString(index);
}

int a = 0;

StringBuilder sb = new StringBuilder(25);
for (int counter = 0; counter < possibleAnswers.length; counter++) {
    if (counter < 25) {
        sb.append(alpha[counter]).append(": ").append(possibleAnswers[counter]).append("\n");
    }
    if (counter >= 26) {
        sb.append(alpha[26]).append(a).append(": ").append(possibleAnswers[counter]).append("\n");
        a++;
    }
}

System.out.println(sb); 
```

哪个输出

```
0: Happy 0
1: Happy 1
2: Happy 2
3: Happy 3
4: Happy 4
5: Happy 5
6: Happy 6
7: Happy 7
8: Happy 8
9: Happy 9
10: Happy 10
11: Happy 11
12: Happy 12
13: Happy 13
14: Happy 14
15: Happy 15
16: Happy 16
17: Happy 17
18: Happy 18
19: Happy 19
20: Happy 20
21: Happy 21
22: Happy 22
23: Happy 23
24: Happy 24
260: Happy 26
261: Happy 27
262: Happy 28
263: Happy 29 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:38:12.740

您将需要使用 ArrayList 来存储所有字符串。

然后在 for 循环完成后返回 ArrayList。就像是。

```
String returnString = "";

for loop ....{
   returnString = returnString + " " + someNewString;
 }

return returnString 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:38:27.267

为什么要使事情复杂化..只需返回一个字符串数组

```
 public String[] function1()
 {
    String[] str1 new String(10);

    for(int i=0;i<10;i++)
    { 
          str1[i] ="string"+i;
    }
    return str1;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T03:38:41.973

您应该考虑从该方法返回一个字符串数组。

只是纠正一个 for 循环不会返回任何东西。它是返回值的函数。

最后，它很难评论，因为它不清楚你想要实现什么。

# python - Django 测试：伪造用户创建

> ID：12633250
> 
> 赞同：1
> 
> 时间：2012-09-28T03:34:01.503
> 
> 标签：python, django, testing

我想更好地编写这个测试：

```
def test_profile_created(self):
        self.client.post(reverse('registration_register'), data={
            'username':'ygam',
            'email':'ygam@example.com',
            'password1':'ygam',
            'password2':'ygam'
        })
        """
        Test if a profile is created on save
        """
        user = User.objects.get(username='ygam')
        self.assertTrue(UserProfile.objects.filter(user=user).exists()) 
```

我刚刚在 django-registration 测试中发现了这段代码，它实际上并没有“创建”用户：

```
def test_registration_signal(self):
        def receiver(sender, **kwargs):
            self.failUnless('user' in kwargs)
            self.assertEqual(kwargs['user'].username, 'bob')
            self.failUnless('request' in kwargs)
            self.failUnless(isinstance(kwargs['request'], WSGIRequest))
            received_signals.append(kwargs.get('signal'))

        received_signals = []
        signals.user_registered.connect(receiver, sender=self.backend.__class__)

        self.backend.register(_mock_request(),
                              username='bob',
                              email='bob@example.com',
                              password1='secret')

        self.assertEqual(len(received_signals), 1)
        self.assertEqual(received_signals, [signals.user_registered]) 
```

但是，他为此“_mock_request”使用了自定义函数：

```
class _MockRequestClient(Client):
    def request(self, **request):
        environ = {
            'HTTP_COOKIE': self.cookies,
            'PATH_INFO': '/',
            'QUERY_STRING': '',
            'REMOTE_ADDR': '127.0.0.1',
            'REQUEST_METHOD': 'GET',
            'SCRIPT_NAME': '',
            'SERVER_NAME': 'testserver',
            'SERVER_PORT': '80',
            'SERVER_PROTOCOL': 'HTTP/1.1',
            'wsgi.version': (1,0),
            'wsgi.url_scheme': 'http',
            'wsgi.errors': self.errors,
            'wsgi.multiprocess':True,
            'wsgi.multithread': False,
            'wsgi.run_once': False,
            'wsgi.input': None,
            }
        environ.update(self.defaults)
        environ.update(request)
        request = WSGIRequest(environ)

        # We have to manually add a session since we'll be bypassing
        # the middleware chain.
        session_middleware = SessionMiddleware()
        session_middleware.process_request(request)
        return request

def _mock_request():
    return _MockRequestClient().request() 
```

但是，它可能对我的需要来说太长了。我希望能够以某种方式“伪造”帐户创建。我在模拟和存根方面没有太多经验，所以任何帮助都可以。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:33:27.583

这两种方法正在测试不同的东西：

1.  您的测试用例测试模型层——它询问“如果我创建一个用户并保存它，配置文件记录会自动创建吗？”

    它不依赖于用户对象是如何创建的——通过管理视图、用户注册视图或管理命令——只要这个测试通过，你就知道任何通过 ORM 创建用户的方法将添加一个配置文件。

    它也不关心配置文件是如何创建的。它可能是通过预保存信号、保存后信号、覆盖的 save() 方法中的某些代码或魔法。只要创建了记录，测试就会通过。

2.  您在 django-registration 中找到的代码正在测试视图层。它正在调用一个特定的视图函数，`register`向它传递三个 URL 参数，并询问“`user_registered`信号是否因为这个视图而被触发？”

    这个测试用例不看其他创建用户的方法；只是注册视图。它不关心任何其他创建用户的方法。

    它也不查看是否创建了配置文件。它只想知道信号是否被触发，而不管该信号在任何特定应用程序中的实际*作用。*

### 有什么不同？

*您的代码是集成测试*的一个很好的例子——“我是否将所有这些部分（模型、信号）按正确的顺序放在一起以便创建配置文件？” - 以及*回归测试*，以在未来向您发出信号，以确定您是否做了任何破坏用户配置文件创建的事情。

django-registration 代码是一个实际的*单元测试*。它非常小心地将视图代码隔离开来，在受控环境中调用它并提出一个简单的问题。

### 哪个更好？

在您的情况下，您可能不需要编写单元测试。（尽管可能对此有很多争论；这在某些方面实际上是宗教问题）您想要一种方法来验证您组合在一起的代码是否按照您的预期工作，以及您的测试是最好的方法。

不必担心*实际创建用户*——在测试运行期间，您在事务中执行所有操作，并且该事务在测试方法完成后立即回滚。它甚至可能不会击中磁盘。而且，正如@Platinum Azure 所提到的，无论如何它都在测试数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:45:10.593

为什么要模拟用户创建？如果你运行 Django 的测试引擎，你正在测试一个测试数据库。只需调用视图或使用请求客户端工厂，然后让测试运行程序在完成后删除测试数据库。

# sorting - 冒泡排序 MIPS 中的打印功能出错？

> ID：12633257
> 
> 赞同：0
> 
> 时间：2012-09-28T03:35:03.633
> 
> 标签：sorting, assembly, mips

抱歉，这是这么长的代码块，但是您在其中看到任何明显的语法错误吗？编译器告诉我运行时执行错误：0x00400008 处的运行时异常：地址超出范围 0x00000000。如果可以的话请帮忙！

```
 .data
save:   .word 1,2,4,2,5,6
size:   .word 6
        .text

    la $s6, save #load address of array
    la $t5, size #load address of size 
    lw $t5, 0($t5) #load array size
    sw $t0, 0($s6) #save the first element of the array
    sw $t1, 4($s6) #save the second element of the array
    j sort #call sort function

swap:   sll $t1, $a1, 2 #shift bits by 2 
        add $t1, $a1, $t1 #set $t1 address to v[k]
    lw $t0, 0($t1) #load v[k] into t1 <- ERROR
    lw $t2, 4($t1) #load v[k+1] into t1 
    sw $t2, 0($t1) #swap addresses
    sw $t0, 4($t1) #swap addresses
    jr $ra #return 

sort:   addi $sp, $sp, -20 #make enough room on the stack for five registers
    sw $ra, 16($sp) #save the return address on the stack
    sw $s3, 12($sp) #save $s3 on the stack
    sw $s2, 8($sp) #save Ss2 on the stack
    sw $s1, 4($sp) #save $s1 on the stack
    sw $s0, 0($sp) #save $s0 on the stack

    move $s2, $a0 #copy the parameter $a0 into $s2 (save $a0) 
    move $s3, $a1 #copy the parameter $a1 into $s3 (save $a1)
    move $s0, $zero #start of for loop, i = 0
for1tst: slt $t0, $s0, $s3 #$t0 = 0 if $s0 S $s3 (i S n)
    beq $t0, $zero, exit1 #go to exit1 if $s0 S $s3 (i S n)
    addi $s1, $s0, -1 #j - i - 1
for2tst: slti $t0, $s1, 0 #$t0 = 1 if $s1 < 0 (j < 0) 
    bne $t0, $zero, exit2 #$t0 = 1 if $s1 < 0 (j < 0)
    sll $t1, $s1, 2 #$t1 = j * 4 (shift by 2 bits)
    add $t2, $s2, $t1 #$t2 = v + (j*4) 
    lw $t3, 0($t2) #$t3 = v[j]
    lw $t4, 4($t2) #$t4 = v[j+1]
    slt $t0, $t4, $t3 #$t0 = 0 if $t4 S $t3
    beq $t0, $zero, exit2 #go to exit2 if $t4 S $t3
    move $a0, $s2 #1st parameter of swap is v(old $a0)
    move $a1, $s1 #2nd parameter of swap is j
    jal swap #swap
    addi $s1, $s1, -1 
    j for2tst #jump to test of inner loop
    j print
exit2: 
    addi $s0, $s0, 1 #i = i + 1
    j for1tst #jump to test of outer loop

exit1: 
    lw $s0, 0($sp) #restore $s0 from stack
    lw $s1, 4($sp) #resture $s1 from stack
    lw $s2, 8($sp) #restore $s2 from stack
    lw $s3, 12($sp) #restore $s3 from stack
    lw $ra, 16($sp) #restore $ra from stack
    addi $sp, $sp, 20 #restore stack pointer 
    jr $ra #return to calling routine

    .data
space:.asciiz  " "          # space to insert between numbers
head: .asciiz  "The sorted numbers are:\n"
  .text
print:add  $t0, $zero, $a0  # starting address of array
      add  $t1, $zero, $a1  # initialize loop counter to array size
      la   $a0, head        # load address of print heading
      li   $v0, 4           # specify Print String service
      syscall               # print heading
out:  li   $v0, 1           # specify Print Integer service
      la   $a0, space       # load address of spacer for syscall
      li   $v0, 4           # specify Print String service
      syscall               # output string
      addi $t0, $t0, 4      # increment address
      addi $t1, $t1, -1     # decrement loop counter
      bgtz $t1, out         # repeat if not finished
      jr   $ra              # return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:33:31.947

看看你的`exit1`潜艇。你在`jr $ra`最后使用，这意味着它是一个子程序。你在哪里设置返回地址寄存器？您只是*分支*到这些潜艇；您应该*改为*使用`jal`.

或者，在 结束时`exit1`，`j`像使用`exit2`.

编辑：您还想使用`jal print`，而不是`j print`. *始终*`jal`在返回 with 的任何 sub 上使用，如果 sub 没有被调用（或任何链接指令）`jr $ra`，则*永远不要*使用。`jr $ra``jal`

# android - Android 布局问题 - 表格/网格/线性

> ID：12633260
> 
> 赞同：4
> 
> 时间：2012-09-28T03:35:24.763
> 
> 标签：android, android-layout

我正在尝试解决android中的一些基本布局问题。这是我想要的最终目标：

![在此处输入图像描述](../Images/5dc3e853df38ba103405d6e09cb8710c.png)

如您所见，各种字段都是这样设置的。这些字段是根据 XML 数据填写的。可能有一组字段，也可能有更多。

我尝试了一个表格布局，但即使在字段 7 的 layout_span 时也无法正确设置它。它工作正常，但是当我尝试更改字段 1 到 5 的宽度时，它下面的跨行不符合更改（不像 HTML 表格那样）。

如果有多个字段，则每组中的字段需要排队（见图中的红线）。

有人可以指出我应该如何处理这个问题的正确方向吗？

谢谢。

* * *

编辑：来自 Naveen Kumar（谢谢！）：

更新的屏幕截图，看看如果你让文本更长会发生什么：

![在此处输入图像描述](../Images/77189c9612efc4f3ca69c5cf1e4a93ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:43:07.713

尝试这个

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />
            </TableRow>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="15"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="42"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="43"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />
            </LinearLayout>

            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />
            </TableRow>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="15"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="42"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_weight="43"
                    android:text="test"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp"
                    android:textStyle="bold" />
            </LinearLayout>
        </TableLayout>
    </LinearLayout>

</LinearLayout> 
```

# jquery - 使用鼠标位置的jQuery动画滑动背景图像不会停止......只是继续

> ID：12633263
> 
> 赞同：1
> 
> 时间：2012-09-28T03:35:39.763
> 
> 标签：jquery, html

我正在编写一个简洁的 jQuery 小脚本。

目标：隐藏溢出的父 div 拥有一个更大的带有图像的 div。当我将鼠标移动到父 div 的左侧或右侧时，带有图像的 div 会更改 margin-left 以向左或向右移动。

问题是......如果我将鼠标移出父 div（左或右），图像会继续运行。当鼠标不在父 div 的内部左边缘或右边缘时，我需要停止图像。

有任何想法吗？

```
 <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

        <script type="text/javascript">
            //<![CDATA[

              jQuery.noConflict ();

              jQuery(document).ready(function(){

                jQuery('#container').mousemove(function(e){
                  var parentWidth = jQuery('#container').width();
                  var parentWidthLeft = Math.round(.1 * jQuery('#container').width());
                  var parentWidthRight = Math.round(jQuery('#container').width() - parentWidthLeft);
                  var parentHeight = jQuery('#container').height();
                  var parentOffset = jQuery('#container').offset();
                  var X = Math.round(e.pageX - parentOffset.left);
                  var Y = Math.round(e.pageY - parentOffset.top);

                 if (X<parentWidthLeft)
                    {
                      jQuery('#image').animate({'left': '-' + parentWidth }, 5000);
                    }
                 if (X>parentWidthRight)
                    {
                      jQuery('#image').animate({'left': parentWidth }, 5000);
                    }
                 if (X<=parentWidthRight && X>=parentWidthLeft)
                    {
                      jQuery('#image').stop();
                    }
                 if (X<1)
                    {
                      jQuery('#image').stop();
                    }

                  });

                  jQuery('#container').mouseleave(function(){
                      jQuery('#image').stop();
                  });

              });

            // ]]>
        </script>

    </head>
    <body>

    <div id="container" style="width: 500px; height: 500px; overflow: hidden; border: 10px solid #000; position: relative; margin: auto auto;">
        <div id="image" style="position: absolute; left: 0; top: 0;"><img src="http://dump4free.com/imgdump/1/Carmen-Electra_1wallpaper1024x768.jpg" alt="" /></div>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:54:49.390

jQuery 的 stop() 函数可以有一个名为“clearQueue”的布尔参数。如果您尝试使用 .stop(true) 而不是 .stop()，动画将正确停止，并且您的页面运行良好。

事实上，当您移动鼠标时，会触发很多事件并触发很多动画。

一个当前正在运行，所有其他都存储在队列中，稍后执行（在第一个动画完成后）。

这样，框架就有了按时间顺序排列的事件列表的“记忆”。

通过使用 stop(true)，您可以命令完全刷新动画队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:09:24.293

尝试使用[jQuery .unbind()](http://api.jquery.com/unbind/)：

```
jQuery('#container').mouseleave(function(){
                  jQuery('this').unbind('mousemove');
              }); 
```

# ios - cocos2d 将精灵着色为白色，不透明度

> ID：12633264
> 
> 赞同：1
> 
> 时间：2012-09-28T03:36:27.003
> 
> 标签：ios, cocos2d-iphone

我试图弄清楚如何在我的精灵上放置一个着色层。我想让精灵有一个不透明度为 50% 的白色图层色调。

我在做

```
[mySprite setColor:ccc3(255,255,255)];
[mySprite setOpacity: 128]; 
```

但我得到的是一个没有着色的精灵，但我的图层只是稍微透明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:42:50.497

通常，`setColor`在已经是白色的精灵上效果最好，对于其他颜色的精灵，应用的颜色会成倍增加。因此，如果您将任何其他颜色与白色相乘，您仍然只能得到相同的颜色。

您可能想要使用其他混合模式来实现您所需要的，或者只使用白色精灵。要设置混合模式，您必须`setBlendFunc`在调用之前/之后使用该功能`setColor`。

# ruby - sinatra、omniauth、launchpad.net 策略无法获取请求令牌

> ID：12633265
> 
> 赞同：2
> 
> 时间：2012-09-28T03:36:42.930
> 
> 标签：ruby, oauth, sinatra, omniauth

我正在尝试通过[https://launchpad.net](https://launchpad.net)使用 sinatra 和自定义omniauth 策略提取请求令牌

```
require 'omniauth-oauth'                                                                                                                
require 'oauth/signature/plaintext'                                                                                                     
require 'multi_json'                                                                                                                    
require 'pp'                                                                                                                            

module OmniAuth                                                                                                                         
  module Strategies                                                                                                                     
    class Launchpad < OmniAuth::Strategies::OAuth                                                                                       
      option :name, "launchpad"                                                                                                         
      option :client_options, {                                                                                                         
        :authorize_url => 'https://launchpad.net/+authorize-token',                                                                     
        :request_token_url => 'https://launchpad.net/+request-token',                                                                   
        :site => 'https://api.launchpad.net',                                                                                           
        :consumer_key => 'rubystfu',                                                                                                    
        :signature_method => 'PLAINTEXT',                                                                                               
        :signature => '%26'                                                                                                             
      }                                                                                                                                 

      def request_phase                                                                                                                 
        super                                                                                                                           
      end                                                                                                                               

      uid {                                                                                                                             
        raw_info[:name]                                                                                                                 
      }                                                                                                                                 

      info do                                                                                                                           
        {                                                                                                                               
          :description => raw_info['description'],                                                                                      
          :name => raw_info['name'],                                                                                                    
          :display_name => raw_info['display_name'],                                                                                    
          :karma => raw_info['karma'],                                                                                                  
          :self_link => raw_info['self_link'],                                                                                          
          :email => raw_info['email']                                                                                                   
        }                                                                                                                               
      end                                                                                                                               

      extra do                                                                                                                          
        {                                                                                                                               
          :raw_info => raw_info                                                                                                         
        }                                                                                                                               
      end                                                                                                                               

      def raw_info                                                                                                                      
        raw_info                                                                                                                        
      end                                                                                                                               
    end                                                                                                                                 
  end                                                                                                                                   
end 
```

我已经以这种方式设置了我的 sinatra 应用程序

```
#!/usr/bin/env ruby                                                                                                                     
require 'rubygems'                                                                                                                      
require 'bundler'                                                                                                                       

Bundler.setup :default, :development, :chonk                                                                                            

require 'sinatra'                                                                                                                       
require 'haml'                                                                                                                          
require 'omniauth-launchpad'                                                                                                            

use Rack::Session::Cookie                                                                                                               

use OmniAuth::Builder do                                                                                                                
  provider :launchpad                                                                                                                   
end                                                                                                                                     

set :sessions, true                                                                                                                     
set :logging, true                                                                                                                      

class ChonkApp < Sinatra::Application                                                                                                   
  helpers do                                                                                                                            
    def check_auth                                                                                                                      
      redirect "/" if not session[:user]                                                                                                
    end                                                                                                                                 
  end                                                                                                                                   

  get '/' do                                                                                                                            
    redirect "/app" if session[:user]                                                                                                   
    haml :index                                                                                                                         
  end                                                                                                                                   

  get '/app' do                                                                                                                         
    check_auth                                                                                                                          
    "#{session[:user]} | <a href='/logout'>logout</a>"                                                                                  
  end                                                                                                                                   

  get '/logout' do                                                                                                                      
    session.clear                                                                                                                       
    redirect '/'                                                                                                                        
  end                                                                                                                                   

  %w(get post).each do |method|                                                                                                         
    send(method, "/auth/:name/callback") do                                                                                             
      auth = request.env['omniauth.auth']                                                                                               
      a = auth.info                                                                                                                     
      session[:user] = "%s %s (%s)" % [a.email, a.name, a.nickname]                                                                     
      redirect "/app"                                                                                                                   
    end                                                                                                                                 
  end                                                                                                                                   

  get '/auth/failure' do                                                                                                                
    "I dunno wtfook happened."                                                                                                          
  end                                                                                                                                   
end 
```

文档说明它需要 3 个发布的参数才能工作：

> [要获取请求令牌，请向https://launchpad.net/+request-token](https://launchpad.net/+request-token)发送 POST 请求 。（注意：不是 api.launchpad.net！）这与 Web 浏览器在提交表单时所做的 POST 相同。您应该以表单 URL 编码格式提交以下值。
> 
> oauth_consumer_key：您的消费者密钥 oauth_signature_method：字符串“PLAINTEXT” oauth_signature：字符串“&”。
> 
> 因此 HTTP 请求可能如下所示：
> 
> ```
> POST /+request-token HTTP/1.1
> Host: launchpad.net
> Content-type: application/x-www-form-urlencoded
> 
> oauth_consumer_key=just+testing&oauth_signature_method=PLAINTEXT&oauth_signature=%26 The response should look something like this:
> 
> 200 OK
> 
> oauth_token=9kDgVhXlcVn52HGgCWxq&oauth_token_secret=jMth55Zn3pbkPGNht450XHNcHVGTJm9Cqf5ww5HlfxfhEEPKFflMqCXHNVWnj2sWgdPjqDJNRDFlt92f 
> ```

我能看到的唯一可能不正确的是 signature_method 和/或签名。我对红宝石很陌生，所以任何建议都值得赞赏。返回的错误是“未经授权的 401”，我还没有完全弄清楚如何在请求期间打印一些关于传递给[https://launchpad.net的调试输出。](https://launchpad.net)

用于签署请求的文档的链接在这里： [https ://help.launchpad.net/API/SigningRequests](https://help.launchpad.net/API/SigningRequests)

谢谢

ps omniauth-launchpad 的来源是[https://github.com/battlemidget/omniauth-launchpad](https://github.com/battlemidget/omniauth-launchpad)，实际应用程序的来源是[https://github.com/battlemidget/chonk](https://github.com/battlemidget/chonk)

# performance - 如何测量进行了多少次浮动操作？

> ID：12633266
> 
> 赞同：0
> 
> 时间：2012-09-28T03:36:51.503
> 
> 标签：performance, parallel-processing, cpu, sse

```
float res[size], a[size], b[size]
//Several initialization is done
for(int i=0; i<size; i++) res[i] = a[i]*b[i]; 
```

我想知道如何测量浮动操作的数量。

机器：型号名称：Intel(R) Core(TM)2 Quad CPU @ 2.93GH

编译器：'gcc 版本 4.6.1 (Ubuntu/Linaro 4.6.1-9ubuntu3)'

架构：x86_64。

人们说从 gcc 4 开始将自动启用 sse 选项。同时，也有评论说 sse 不支持乘法和除法。

如果我只是编写上面的代码，我不知道是否启用了 sse。任何人都可以告诉我如何计算浮动操作的数量？

更何况，如果用 float 代替 double 会怎样？

我想知道等式是否是：

浮点数：2.93 * 4 双精度数：2.93 * 2

实际上，我发现 x86_64 中还有 8 个新寄存器。这会导致一次 8 个浮点操作和 4 个双重操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:01:21.017

一种方法是使用 cpu 计数器，特别是`FLOPS`. 例如

```
operf -e FLOPS:100000 
```

见[http://oprofile.sourceforge.net/docs/intel-core2-events.php](http://oprofile.sourceforge.net/docs/intel-core2-events.php)

# reflection - 从 PowerShell 通过反射调用静态方法

> ID：12633267
> 
> 赞同：2
> 
> 时间：2012-09-28T03:36:57.953
> 
> 标签：reflection, powershell

我正在从 XML 文件中读取有关各种对象的信息，并且需要从 PowerShell 对这些对象进行实例化和设置值。

这是一个`UInt32.Parse(string)`应该使用反射检索的示例。问题是`$mi`变量为空：

```
$o = new-object -typename "System.UInt32, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
$mi = $o.GetType().GetMethod("Parse", [type[]] @([string].GetType()) ) 
```

相应的 C# 代码有效：

```
UInt32 o = 0;
var mi = o.GetType().GetMethod("Parse", new [] {typeof(string)}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:43:22.617

你需要使用反射吗？也许你可以使用`$parse = [system.uint32]::Parse`and`$parse.Invoke($arg)`来代替。

# c - 带有clang的宏中未使用的功能

> ID：12633271
> 
> 赞同：1
> 
> 时间：2012-09-28T03:38:02.727
> 
> 标签：c, gcc, macros

我有一个`macro`定义如下，即：

```
#define next_position() (bit ? *str++ : (*str++) & 0xff)

warning: expression result unused [-Wunused-value] 
```

`Clang`是说第一个`*str++`在宏中未使用，但`gcc`从未向我显示此“警告”，这是编译器错误吗？我该如何解决？这似乎是一个合理的警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T01:52:18.137

Clang 是正确的——您正在取消引用 str，但没有使用它的值。如果您只想推进 str，那么 next_position 将归结为：

```
#define next_position() str++ 
```

这会带来一个问题，为什么您要将其隐藏*在*宏后面，但这是一个不同的问题。

至于从clang获得警告，而不是从gcc获得警告，它们是不同的编译器。他们正在检测代码中重叠但不相同的一组潜在问题，并且他们在某种程度上是迂腐的。甚至 gcc 本身也会根据优化级别和 gcc 版本产生不同的警告集。一个编译器产生警告而另一个编译器产生警告这一事实并不一定意味着编译器中存在错误。它也没有说明您的代码是否真的存在问题。这只是一个迹象，表明某些事情*可能会*发生。

# architecture - 玩线程架构

> ID：12633286
> 
> 赞同：6
> 
> 时间：2012-09-28T03:41:12.437
> 
> 标签：architecture, playframework-2.0

Play 被描述为一个“反应式”框架，对异步编程很有用。我想了解更多关于play的架构，主要是：

*   它有事件循环吗？

*   它有很多 akka 演员系统吗？它们是否由多个线程池支持？

*   如果有，那么有多少线程池以及它们的目标是什么（路由、请求处理、承诺兑现、异常等）

*   *我们可以阻止*哪个执行线程（我们可以在哪里进行一些昂贵的计算）？哪个是我们永远不应该阻塞的执行线程？

任何关于此的资源/wiki/建议都非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T19:35:39.940

注意：以下内容适用于 Play！2.1.x。为......而玩！2.0.4 见 nico_ekito 的回答。

下表总结了与客户的互动：

![Play! 的架构](../Images/3e51dff10ec6e119bb32c7d65c616879.png)

[Play 的 HTTP 处理程序（建立在Netty](https://netty.io)之上）存在于它自己的执行上下文中。当它收到请求时，它会尝试根据 URL（使用应用程序的[`conf/routes`](http://www.playframework.org/documentation/2.0.4/ScalaRouting)文件）找到要调用的应用程序的入口点。此时，只有 HTTP 请求的 headers 被加载到内存中。

然后，调用入口点。它通常是一个[动作](http://www.playframework.org/documentation/2.0.4/ScalaActions)，它加载剩余的主体（如果有的话）。这发生在不同的执行环境中，即 Play！“用户”执行上下文，定义为可以在应用程序`conf/application.conf`文件中配置的 Akka Actor 调度程序。

最后，在一个动作中，您可以执行异步调用（例如调用[Web 服务](http://www.playframework.org/documentation/2.0.4/ScalaWS)）。所有这些异步调用都使用 Scala 的[Future](http://docs.scala-lang.org/overviews/core/futures.html) API，因此它们使用调用站点范围内可用的执行上下文。因此，您可以使用 Play！“用户”执行上下文（定义在 中`play.api.libs.concurrent.Execution.defaultContext`）。

总之，玩！对以下任务使用不同的执行上下文：

*   接收请求（Netty HTTP 处理程序）；
*   调用动作（“用户”执行上下文）。

而且你可以自由地使用你想要的任何执行上下文来进行异步计算（包括 Play！“用户”执行上下文）。

这个想法是所有用户代码默认使用 Play！“用户”执行上下文。如果您阻止它，您将无法运行更多用户代码，但可以继续执行其他所有操作。

如果您正在进行扩展计算，我建议您使用专用的执行上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T14:26:03.017

看看 Akka 默认配置和[Play 上的 Actor 列表！维基](https://github.com/playframework/play20/wiki/AkkaCore)。

# android - Android OpenGL ES 动态雾色

> ID：12633287
> 
> 赞同：0
> 
> 时间：2012-09-28T03:41:32.600
> 
> 标签：android, opengl-es, fog

我正在使用以下方法设置雾，

```
public void set_fog(float[] fc){
        gl.glEnable(GL10.GL_FOG);
        {
          gl.glFogf(GL10.GL_FOG_MODE, GL10.GL_EXP2);
          gl.glFogfv(GL10.GL_FOG_COLOR, fc, 0);
          gl.glFogf(GL10.GL_FOG_DENSITY, fog_density);
          gl.glHint(GL10.GL_FOG_HINT, GL10.GL_NICEST);

          gl.glClearColor(fc[0], fc[1], fc[2], fc[3]);
        }
    } 
```

我再次调用它来改变雾的颜色，

这在模拟器中工作但是当我使用安装在我的笔记本电脑中的 Android x86 ausus 笔记本电脑对其进行测试时，它有时会正确地产生雾，有时整个东西会变成白色。

我也测试了以下方法

```
public void set_fogColor(float[] fc){
    gl.glFogfv(GL10.GL_FOG_COLOR, fc, 0);
    gl.glClearColor(fc[0], fc[1], fc[2], fc[3]);
    gl.glFlush();
} 
```

最终遇到了同样的问题。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:16:09.143

我相信这与你拥有的显卡以及它是否支持 Android-x86 的 opengl 有关。

# python - Issue with post request using requests Python lib and dict of dicts

> ID：12633290
> 
> 赞同：2
> 
> 时间：2012-09-28T03:42:00.903
> 
> 标签：python, json, simplejson, python-requests

I'm new with Python and I need to build a Python library that connect to our API service sending some json data, everything works fine but one thing, I need to send some dict of dicts doing a POST request:

```
 def create_project(self, project):
        print project
        params = simplejson.dumps(project)
        print params
        req = requests.post(self.url+'/projects/addSpeedy.json',
            data=params, 
            auth=HTTPBasicAuth(self.api_id, self.api_key),verify=False)
        data = simplejson.loads(req.text)
        return data 
```

the project param I'm passing to that function contains the following structure:

```
 script = {
        'part001': 'HI',
        'part002': 'WORLD'
    }
    project = {
        'title': 'Project posted from Python Carrot',
        'script': script,
        'remarks': "I want the voice be similar to Bugs Bunny.",
        'test': '1'
    } 
```

However when doing the request the API tells me the 'title' field which is required is missing, however when printing the data in the function everything seems fine, the dict json encode was something I saw in the requests site for this cases: [http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests](http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests)

I've tried other ways with mixed results it doesnt work the way it should, also the problem its not the API since we have libraries in other languages and it works fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:57:07.843

Hard to guess, what's going wrong without further details about your http client and the server API. My first try debugging this would be to grab [wireshark](http://www.wireshark.org/) and check, if your generated requests are identical to the ones generated with the implementation of your other clients with the following questions to answer:

*   Are some headers different?
*   Content-Length and Content-Type specified correctly?
*   Did the authentication succeed or is the response with the missing title used quite generically?

# c# - 是否可以将单个值插入数据表单元格？

> ID：12633292
> 
> 赞同：-2
> 
> 时间：2012-09-28T03:42:07.133
> 
> 标签：c#

我有一个包含 5 列和 4 行的数据表，其中没有数据。

是否可以将单个值插入数据表单元格？还是您必须在创建行时插入数据（例如 dTable.Rows.Add("My Name"); ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:44:20.363

怎么样

```
mydatatable.Rows[0]["columnname"] = "value" // Provided column is string type 
```

这将仅在特定单元格中添加值。

# git - 在 GitHub 上归档 git 库的最佳方式是什么？

> ID：12633295
> 
> 赞同：1
> 
> 时间：2012-09-28T03:42:35.433
> 
> 标签：git, github

我觉得我的 GitHub 上有很多库把它弄得乱七八糟，删除或隐藏它们会很好，但同时我不想永远删除它们。其他人做了什么来“归档”他们的库，这样他们就不会出现在 GitHub 上，而是稍后再检索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:55:18.467

理想情况下，您会将这些库存储在[像 Nexus 这样的工件存储库](http://www.sonatype.org/nexus/)中，以便在`pom.xml`文件中声明和记录它们的确切版本（您可以在 GitHub 存储库中对其进行版本控制）

换句话说，您不会将库直接存储在源代码管理中，您只会存储所述库的*声明*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:44:19.810

克隆您的存储库`git clone`并将其从 Github 中删除。克隆是包含整个历史记录的精确副本。备份它，但是您会选择备份任何其他数据。使用您最喜欢的备份服务将其压缩、刻录到光盘或存储在云中。您可以通过启用 Git 访问和克隆它来包含 wiki。

# c# - 应用程序启动时的 EntryPointNotFoundException TaskDialog 但稍后运行良好

> ID：12633297
> 
> 赞同：0
> 
> 时间：2012-09-28T03:42:39.997
> 
> 标签：c#, unsafe, taskdialog, entrypointnotfoundexcept

我直接从适用于 .NET 的 WindowsAPI 包（包装器）获得 TaskDialog 源，但是每当我尝试直接在程序的静态 void Main() 区域中打开 TaskDialog 时，它都会引发 EntryPointNotFoundException。然而，TaskDialog 稍后会在我的代码中生成并显示得非常好。这是为什么？

引发 EntryPointNotFoundException 的代码是

```
/// <summary>
/// TaskDialogIndirect taken from commctl.h
/// </summary>
/// <param name="pTaskConfig">All the parameters about the Task Dialog to Show.</param>
/// <param name="pnButton">The push button pressed.</param>
/// <param name="pnRadioButton">The radio button that was selected.</param>
/// <param name="pfVerificationFlagChecked">The state of the verification checkbox on dismiss of the Task Dialog.</param>
[DllImport("ComCtl32", CharSet = CharSet.Unicode, PreserveSig = false)]
internal static extern void TaskDialogIndirect(
    [In] ref TASKDIALOGCONFIG pTaskConfig,
    [Out] out int pnButton,
    [Out] out int pnRadioButton,
    [Out] out bool pfVerificationFlagChecked); 
```

但让我感到震惊的是，不同地方的相同代码可以工作一次，但不能在另一个时间工作。这可能与程序没有加载引用或其他东西有关，但这让我大吃一惊。我的应用程序入口点的代码是

```
try
{
    var taskDialog = new TaskDialog();
    taskDialog.WindowTitle = ".NET Update Notification";
    taskDialog.MainInstruction = "";

    taskDialog.MainIcon = TaskDialogIcon.Error;

    taskDialog.EnableHyperlinks = true;
    taskDialog.Content =
        "Your .NET Framework Version is out-of-date.\nPlease see <a href=\"***********\">the forums</a> for more info.\n\nSorry, but I can't continue without it.\n\n If you had the correct install this message wouldn't appear.";

    taskDialog.Callback =
        new TaskDialogCallback((ActiveTaskDialog _taskDialog, TaskDialogNotificationArgs _args, object _callbackData) =>
            {
                if (_args.Notification == TaskDialogNotification.HyperlinkClicked)
                {
                    Process.Start(_args.Hyperlink);
                }
                return false;
            });

    var doItButton = new TaskDialogButton();
    doItButton.ButtonId = 101;
    doItButton.ButtonText = "Quit";

    taskDialog.Buttons = new TaskDialogButton[] { doItButton };

    int result = taskDialog.Show(null);
    Application.Exit();
}
/*
* Handles the error message regarding ComCtl32.dll not being found.
* In the event of the beautiful TaskDialog above (which uses ComCtl32.dll)
* cannot be opened, fall back to an ugly as **** MessageBox with a '?' Help
* button in the title bar -.-
*/
catch (EntryPointNotFoundException)
{
    MessageBox.Show(
        "Your .NET Framework Version is out-of-date.\nTo find out how to get .NET 4.0 simply visit the forums at *********.\n\nSorry, but I can't continue without it :(",
        ".NET Update Notification", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

谢谢你的时间 ：）

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:24:16.193

从 MSDN 尝试这个解决方案 -

第 1 步：在解决方案资源管理器中右键单击您的项目

第 2 步：选择 -> 添加 -> 新项目

第 3 步：在 VS 2010 中添加一个应用程序清单文件，即 app.manifest

第 4 步：取消注释从依赖标记开始到 /dependency 的最后一个 xml 部分

代码应该看起来像这样 -

```
<dependency>
<dependentAssembly>
 <assemblyIdentity
  type="win32"
  name="Microsoft.Windows.Common-Controls"
  version="6.0.0.0"
  processorArchitecture="*"
  publicKeyToken="6595b64144ccf1df"
  language="*"
 /> 
```

# php - 有时不处理并发？

> ID：12633299
> 
> 赞同：0
> 
> 时间：2012-09-28T03:42:50.973
> 
> 标签：php, linux

我的代码是：

```
$b_data_proxy = $dn." ".$cv." ".$dom_name." ".$record_ttl." ".substr($now,0,strlen($now)-1).$more_ip_address;<br>
                        $b_ftemp = fopen("$fdoc_spool/temp_b", 'a+');<br>
                        fwrite($b_ftemp, $b_data_proxy."\n");<br>
                        fclose($b_ftemp); 
```

如您所见，当一个用户访问该页面时，这是正确的。但是两个用户同时访问该页面。他们将写入相同的 temp_b 文件。我不想使用不同的 temp_b 名称。

这可能是个问题，他们会在同一时间写入同一个文件。但是 $b_data_proxy 的大小小于 4kB。所以我想知道我是否应该处理并发？因为大小小于4KB。

我的系统信息：Linux YF-2321 2.6.18-194.el5 #1 SMP Fri Apr 2 14:58:14 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:57:52.573

如果您担心他们同时写入同一个文件，那么只需使用每个用户唯一的临时文件进行写入。然后删除主文件并将临时文件重命名为主文件的名称。最后一个移动文件的将永远获胜。使用这种方法，您的文件将永远不会处于损坏状态，并且您不必进入文件锁定/并发技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:08:26.113

使用 memcache 之类的东西锁定文件或使用数据库。

```
if( file_not_locked )

    //create lock
    //open file 
    //do stuff
    //close file
    //free lock 
```

# c++ - 为什么我不能使用从一个 Xalan 类到其基类的 static_cast？

> ID：12633301
> 
> 赞同：0
> 
> 时间：2012-09-28T03:42:54.840
> 
> 标签：c++, xalan, static-cast

为什么编译器（g++）会抱怨这行代码？

```
 XalanNode *docElement = static_cast<XalanNode*> (docBuilder_->getDocument()->getDocumentElement()); 
```

我从编译器得到的错误是：

```
错误：从类型“amxalanc_1_6::XalanElement*”到类型“amxalanc_1_6::XalanNode*”的静态转换无效
```

如果没有 static_cast，编译器会打印：

```
错误：无法在初始化中将 `amxalanc_1_6::XalanElement*' 转换为 `amxalanc_1_6::XalanNode*'
```

XalanElement 类定义为：

```
class XALAN_DOM_EXPORT XalanElement : public XalanNode 
```

该文档还显示 XalanNode 应该从 XalanElement 派生，如您在此处所见 - [XalanElement Class Reference](http://xml.apache.org/xalan-c/apiDocs/classXalanElement.html)。

在 XalanDocument.hpp 中，getDocumentElement() 的方法签名是：

```
virtual XalanElement* getDocumentElement() const = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:07:22.847

大多数 Xalan 头文件仅对它们未定义的类使用前向声明，即使它们声明了获取或返回指向这些类的指针的函数。（这是常见且良好的做法。）

为了让您的编译器看到`XalanElement`派生自您的事实，`XalanNode`您需要显式`#include`定义定义`XalanElement`.

# android - 在 Android MVC ViewController 结构中捕获 onResume 的位置

> ID：12633310
> 
> 赞同：-1
> 
> 时间：2012-09-28T03:44:42.903
> 
> 标签：android, jtwitter

我已经接管了一个使用带有`ViewController`接口的 MVC 的 Android 应用程序的维护。

我正在做的部分修改是添加`JTwitter`链接。`JTwitter Authorization`我在期望得到回调 的地方受到挑战。

发生回调时，我将在哪里捕获`onResume`或事件？`onNewIntent`

我的课程定义为：

`public class ExportTwitterScreen extends BasicViewController<ExportTwitterScreenView>`

我试过把它放进去`onResume`，`BasicViewController`但这对我没有任何作用。

想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T14:55:20.683

我认为这可能更像是一个 Android 问题，而不是 JTwitter 问题。

有关 Android 中的授权，请参阅[AndroidTwitterLogin](http://www.winterwell.com/software/jtwitter/javadoc/index.html?winterwell/jtwitter/android/AndroidTwitterLogin.html)类。javadoc 给出了如何使用它的示例。这应该很容易。

# php - 浏览器中的 XML“查看源代码”全部集中在一行上

> ID：12633317
> 
> 赞同：0
> 
> 时间：2012-09-28T03:46:11.653
> 
> 标签：php, xml, xml-parsing

我正在使用 PHP 创建一个 XML 文件。XML 的结构是正确的，但是当我从浏览器中选择“查看源代码”时，所有代码都输出在一行中。

我正在尝试调试一个错误，它指向我的代码行（第 2 行），但这并不像它在多行代码上那样有用。我正在从数据库中提取数据，虽然代码在有限的测试规模上工作，但在使用所有数据时它给了我一个错误。

错误：

> ```
> DOMDocument::schemaValidate() Generated Errors!
> 
> Fatal Error 68: xmlParseEntityRef: no name in (/home2/path...)" 
> ```

下面是我用来创建 XML 的 PHP 的开头...

```
<?php

/* create a dom document with encoding utf8 */
$domtree = new DOMDocument('1.0', 'UTF-8');

/* create the root element of the xml tree */
$xmlRoot = $domtree->createElement('BatchDataSet');
/* append it to the document created */
$xmlRoot = $domtree->appendChild($xmlRoot);
$xmlRoot->setAttribute("SchemaVersion","1.0");
$xmlRoot->setAttribute("Quarter","2");
$xmlRoot->setAttribute("Year","2012");

// INSURER INFO: A INSURANCE

$insurer = $domtree->createElement("Insurer");
$insurer = $xmlRoot->appendChild($insurer);

$insurer->appendChild($domtree->createElement('NAICNumber','12345'));
$insurer->appendChild($domtree->createElement('Name','Example'));

$contact = $domtree->createElement("Contact");
$contact = $insurer->appendChild($contact);

$contact->appendChild($domtree->createElement('FirstName', 'Kim'));
$contact->appendChild($domtree->createElement('LastName','Smith'));
$contact->appendChild($domtree->createElement('EmailAddress','Kim@ins.co'));

    ...................... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T03:48:53.973

设置`formatOutput`为`true`：

```
$domtree->formatOutput = true; 
```

从[文档中](http://php.net/manual/en/class.domdocument.php)：

> 格式输出
> 
>      使用缩进和额外空间很好地格式化输出。

您正在寻找的术语是[“漂亮”输出](https://www.google.com/search?q=DOMDocument+pretty+output)，它通常是指人类可读的缩进标记。

# javascript - 在 javascript case 语句中，当有 if else 时，我应该放置多个中断还是只放置一个中断？

> ID：12633319
> 
> 赞同：0
> 
> 时间：2012-09-28T03:47:54.270
> 
> 标签：javascript, jquery

我有两个与代码相关的问题：

对于我的代码，我应该在 if - else 的每个部分之后有一个 break 语句，还是最后只有一个？当我定义我的对象时。对 Pk、Param、Table、Success 等字段使用大写字母是标准做法吗？

```
 case "Exam":
        if (accountID) {
            obj = {
                pk: pk = accountID + "04000",
                param: '?pk=' + accountID + "04000",
                table: "Content",
                success: true
            };
            // break here ?
        } else {
            paramOnFailure("Please reselect Account");
            obj = {
                success: false
            };
            // break here ?
        }
        // break here ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:49:23.557

`break;`因为无论如何你都会ing，所以你应该`break;`在最后一个块之后放置。至于命名约定，不，约定不是大写的。小写就好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:49:15.503

```
case "Exam":
    if (accountID) {
        obj = {
            pk: pk = accountID + "04000",
            param: '?pk=' + accountID + "04000",
            table: "Content",
            success: true
        };
    } else {
        paramOnFailure("Please reselect Account");
        obj = {
            success: false
        };
    }
    break; // break here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T03:50:14.023

每个 case 结束时的单个 break 就足够了，因为特定 case 块的最后一条语句将被击中，除非它被返回。

使用 smallcase 是 javascript 中的标准做法。如果您的变量名中有多个单词，请使用驼峰式大小写来清晰显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T03:54:48.183

在我看来，
1.`break;`可以在最后一行使用一次
2\. Pk、Param、Table、Success 等字段不要将它们用作大写

# c - 多次执行程序而不复制实例

> ID：12633322
> 
> 赞同：1
> 
> 时间：2012-09-28T03:49:00.453
> 
> 标签：c, linux, daemon

我有这个应用程序，它是一个检测和监视设备的守护程序。它接受参数，然后打印哪些设备可用。例如

```
 ./udevmon -s //prints the devices that are connected to my server. 
```

样本输出

```
 Device: /dev/ttyUSB0  subsystem: tty 
```

现在，当我再次运行它以检查哪些设备可用时，`./udevmon -s`再次键入它会创建具有不同进程 ID 的第二个 ./udevmon 实例。当我键入不带参数的 ./udevmon 时，它会再次创建一个具有不同进程 ID 的新实例，因此现在共有 3 个 ./udevmon 处理器。随着时间的推移，这会使我的系统变慢，因为我需要多次运行 ./udevmon。

如何运行我的应用程序以便它只创建一个实例。例如，当我再次键入 ./udevmon -s 或 ./udevmon 时重新启动它？

这是示例代码。

```
int main (int argc, char *argv[])
{    
    mon_init();      // initialize device monitor
    scan_init();     // initialize device scan

    //Fork the Parent Process
    pid = fork();
    if (pid < 0) { exit(EXIT_FAILURE); }

    //We got a good pid, Close the Parent Process
    if (pid > 0) { exit(EXIT_SUCCESS); }

    //Change File Mask
    umask(0);

    //Create a new Signature Id for our child
    sid = setsid();
    if (sid < 0) { exit(EXIT_FAILURE); }

    //Change Directory
    //If we cant find the directory we exit with failure.
    if ((chdir("/")) < 0) { exit(EXIT_FAILURE); }

    while(( c=getopt(argc, argv,"s")) != -1) {
        switch(c) {
            case 's': scan_run(); break;
            default: printf("wrong command\n");
        }
    }

    //Main Process
    while(1) {
       start_mon();
    }
    udev_unref(udev);
    return 0;       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:54:18.713

改为在以下包装下运行您的应用程序：

```
killall -KILL udevmon &> /dev/null
./udevmon <ARG> 
```

您可以使用以下脚本轻轻杀死它，执行与上面相同的一些通知：

```
#!/bin/bash

exist=`ps -e | grep udevmon | wc -l`

if [ "$exist" == "0" ] ; then
# there is no instance. run it
    echo "first run"
    ./udevmon -s
else
# kill old and run again
    pid=`ps -e | grep udevmon | awk '{print $1;}'`
    if [ "$pid" != "" ] ; then
        kill $pid
        echo "kill and run"
        ./udevmon -s
    else
        echo "unable to find pid!"
    fi
fi 
```

# sitecore - Sitecore ECM - 取消订阅时事通讯

> ID：12633323
> 
> 赞同：1
> 
> 时间：2012-09-28T03:49:11.323
> 
> 标签：sitecore, sitecore6, sitecore-dms, sitecore-ecm

我正在使用 Sitecore ECM 处理时事通讯订阅，我想知道是否有办法通过代码取消订阅用户的时事通讯 - 而不是已发送电子邮件上的取消订阅链接。

我从 Sitecore.EmailCampaign.dll 中找到了这个函数

```
ClientApi.Unsubsribe(string campaignEventId) 
```

但它要求我不确定在哪里可以找到的活动事件 ID。查看 Sitecore ECM 文档也没有提供此信息。而且我希望我不必直接查询数据库来获取 id

我敢肯定有更简单的方法来做到这一点..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:06:14.233

试试 TargetAudience.Unsubscribe()。

# sass - 降压重构 SCSS

> ID：12633325
> 
> 赞同：1
> 
> 时间：2012-09-28T03:49:22.353
> 
> 标签：sass

假设我想实现这一目标：

```
#page {
  p {
    margin: 10px 20px;
    color: white;
    padding: 10px;
  }
  #form {
    p {
    color: gray;
    }
  }
} 
```

你会注意到`p`in all`#page`应该有一般的风格。但是`#page #form`应该继承一般的`p`除外`color`。

有没有更好的方法来写这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:27:32.060

您可以使用@extend，但不能在继承的选择器上使用。

您可以像这样使用 @extend-only 选择器：

```
#page {
    %common_p {
        margin: 10px 20px;
        color: white;
        padding: 10px;
    }

    p {
        @extend %common_p;
    }

    #form {
        p {
            @extend %common_p;
            color: gray;
        }
    }
} 
```

输出为

```
#page p, #page #form p {
  margin: 10px 20px;
  color: white;
  padding: 10px; }
#page #form p {
  color: gray; } 
```

我希望这能实现你想要的！

我不确定这是否更好，因为由于级联，#form 中的任何 p 标签也已经获得了 #page 的 p 标签。例如，他们将获得边距、填充和颜色，但颜色会被覆盖。

这只是强制它发生，即使没有发生级联（例如，如果#form 存在于#page 之外）。如果是这种情况，那么这种技术会更好，因为 SASS 会结合样式以减少输出的重复性。

[您可以在http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#placeholders](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#placeholders)阅读更多关于 @extend 正在做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:56:49.247

不，[没有办法恢复](https://developer.mozilla.org/en-US/docs/CSS/Common_CSS_Questions?redirectlocale=en-US&redirectslug=Common_CSS_Questions#How_do_I_restore_the_default_value_of_a_property.3F)样式属性的“默认”值。

您可以将样式限制为仅与with`#page p`直接后代的那些段落，否则将必然匹配所有匹配的段落。样式将应用于这些元素，如果您想使用 撤消它们，*则*必须明确指定您希望它们出现的样式。`#page``#page > p``#page p``#page #form p``#page p`*`#page #form p`*

# firefox-addon - 卸载我的 Firefox 扩展程序时如何捕获事件？

ID：12633329

赞同：1

时间：2012-09-28T03:50:57.393

标签：firefox-addon

# iphone - 故事板中封面垂直过渡的对面

> ID：12633330
> 
> 赞同：2
> 
> 时间：2012-09-28T03:50:59.483
> 
> 标签：iphone, objective-c, ios, xcode

我想知道如何创建一个与封面垂直过渡完全相反的转场！Cover Vertical 是从下到上的，我想要一个从上到下的过渡。我怎么能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:16:04.733

我相信您的问题可以通过另一个[stackoverflow帖子来回答](https://stackoverflow.com/questions/10779563/custom-segue-animation)

来自[苹果](http://developer.apple.com/library/IOs/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html)

关键是实现自己的`- (void)perform`方法。在`+ animateWithDuration:delay:options:animations:completion:`方法之前，将 viewController.view.origin 设置在屏幕下方，并在动画块中调整它的高度。

# mongodb - 如何在 mongodb 中保持 2 个“列”唯一

> ID：12633331
> 
> 赞同：3
> 
> 时间：2012-09-28T03:51:21.917
> 
> 标签：mongodb, indexing

我正在合并业务数据库。

所以我有类似的数据

```
id1 id2 
id1 id2
id1 id4
id1 id5
id1 id2
id4 id5
id4 id5
id4 id5
id4 id5 
```

之类的东西。

我想把它分类成

```
id1 id2
id1 id4
id1 id5
id1 id2
id4 id5 
```

所以基本上如果第一列和第二列是相同的而不是重复的

我需要重复索引还是只需要具有唯一属性的复合索引就足够了？如果是这样，索引的格式是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T03:53:40.887

是的，我认为一个独特的复合索引就可以了。

```
db.collection.ensureIndex({first_column: 1, second_column: 1}, {unique: true}); 
```

**[更新](http://docs.mongodb.org/manual/reference/method/db.collection.ensureIndex/#db.collection.ensureIndex)**：自 3.0.0 版起已弃用：db.collection.ensureIndex() 现在是 db.collection.createIndex() 的别名。使用[`db.collection.createIndex()`](http://docs.mongodb.org/manual/reference/method/db.collection.createIndex/#db.collection.createIndex)而不是`db.collection.ensureIndex()`创建新索引。

# css - 禁用文本框时，css 样式不适用

> ID：12633336
> 
> 赞同：2
> 
> 时间：2012-09-28T03:52:14.207
> 
> 标签：css

当我设置 my`textbox.Enabled = false`时，它会丢失所有 CSS 样式。我可以将其设置为`readonly`，并且所有 CSS 样式都运行良好。但是我怎样才能保持`disabled`文本框的 CSS 样式呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:09:50.397

`disabled`您可以使用以下方法在输入上应用 CSS 样式：

```
input[disabled]
{
  /* Your CSS Styles */
  background-color:#F0F0F0 !important; 
  color:#303030 !important;
} 
```

**或者**

```
/* To make this work add class="disabled" in your HTML input tag (for IE6)*/
input[disabled='disabled'] 
{
  /* Your CSS Styles */
  background-color:#F0F0F0 !important; 
  color:#303030 !important;
} 
```

您还可以`read-only`使用以下方法在输入上应用 CSS 样式：（*可选*）

```
input[readonly]
{
  /* Your CSS Styles */
  background-color:#F0F0F0 !important; 
  color:#303030 !important;
} 
```

否则，如果您声明了任何`Id`或`class`该输入，则替换为该输入`input`或`Id`上面`class`的代码。

我不确定给予`!important`，一旦尝试而不给予。如果它有效，那么**Ok**，否则`!important`在你的 CSS 中考虑。

来源：[链接](http://dotnetdaily.net/tutorials/add-css-disabled-readonly-inputs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:17:21.970

只读和已启用之间存在细微差别。 **只读**只能用于将**获得用户 INPUT**的控件。但是**Enabled**对所有**控件都可用，以限制它的使用**。

**

```
- Enabled will affect the CSS not much But the Font Style(Color,Style), Control will not be available. 
- Read Only Does the Same Work Without Affecting Anything,Control Will be Available** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T22:53:17.670

非常感谢，

我找到了解决方案。设置时没有应用 CSS 样式`Enabled=false`。但是当我设置时`disabled=true`，效果很好。

例子：

```
[TextBox txtTest class="test" disabled="true"] 
```

# .htaccess - 重写规则以从路径中删除文件夹并保留其余目录结构

> ID：12633340
> 
> 赞同：1
> 
> 时间：2012-09-28T03:52:19.467
> 
> 标签：.htaccess, url, mod-rewrite, directory, structure

在我的基本目录中，我有很多文件夹。我想把这些文件夹放到一个子目录中。

domain.com/test/test.html

将具有文件结构：

domain.com/subdir/test/test.html

并且仍然在同一个网址：domain.com/test/

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteCond %{REQUEST_URI} !^/subdir/
RewriteRule ^(.*)$ /subdir/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

从此处复制的另一个答案可以做到这一点，但它也会停止对基本目录的其他请求。

我需要它来检查子目录中的文件夹名称匹配，以及它是否存在或不从基本目录提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:37:43.310

尝试这个：

```
RewriteEngine on

# these conditions are optional, they're to make sure you don't clobber a legit request
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# these conditions aren't optional, they check to see if the requested file/dir exists inside /subdir
RewriteCond %{DOCUMENT_ROOT}/subdir%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/subdir%{REQUEST_URI} -d

# rewrite
RewriteRule ^(.*)$ /subdir/$1 [L] 
```

# java - Eclipse Job 从运行 Job 开始获取 NotesSession

> ID：12633341
> 
> 赞同：0
> 
> 时间：2012-09-28T03:52:20.717
> 
> 标签：java, eclipse-plugin, eclipse-rcp, lotus-notes

我将自己的 Java 代码添加到 Notes 复制器（如活动同步）：

```
<plugin>
   <extension
     point="com.ibm.notes.client.notesSync">
     <unit
        class="com.ibm.notes.smartfile.RunOnReplication"
        id="com.ibm.notes.smartfile.RunOnReplication"
        image="icons/SmartFile.gif"
        label="IBM SmartFile action">
     </unit>
  </extension>
</plugin> 
```

这会在每次作业运行时执行的复制器页面中添加一个条目。我的课看起来像这样：

```
public class RunOnReplication extends Job {
    public RunOnReplication(String name) {
      super(name);
    }

    @Override
    public IStatus run(IProgressMonitor arg0) {
        NotesSessionJob nsj = new NotesSessionJob("SmartFile Replication") {
            @Override
            protected IStatus runInNotesThread(Session s,
                IProgressMonitor monitor) throws NotesException {
            Engine engine = Activator.getDefault().getEngine();
            return engine.scheduledProcessing(s, monitor);
            }
        };
    nsj.schedule();
    return Status.OK_STATUS;
   }
} 
```

现在我想知道：如何让`nsj`Job 中的监视器向外部类报告状态，以便将进度报告给复制器进度条——或者是否有其他方法可以在不创建新作业的情况下到达 NotesSession ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:03:00.763

您不必使用 NotesSessionJob。取而代之的是，您还可以使用实例化 N/D java 类的“旧”方式。

```
public class RunOnReplication extends Job {
    public RunOnReplication(String name) {
      super(name);
    }

    @Override
    public IStatus run(IProgressMonitor arg0) {
        try {
            NotesThread.sinitThread();
            Session session = NotesFactory.createSessionWithFullAccess();
            //do your stuff here
        } catch (Exception e) {
            // do your error handling here
        } finally {
            NotesThread.stermThread();
        }
    return Status.OK_STATUS;
   }
} 
```

顺便说一句：好主意...

# c - 如何在 defconfig 中包含 c #ifdef 变量

> ID：12633345
> 
> 赞同：2
> 
> 时间：2012-09-28T03:53:24.937
> 
> 标签：c, linux-kernel, makefile

所以我在构建内核之前运行了一个defconfig。我正在尝试`#ifdef`在某些内核代码中使用 a ，这样如果用户选择制作第一个 defconfig ，它将考虑检查 #ifdef （在 defconfig 中定义的值）与调用第二个 defconfig 。这可能吗？

**编辑：**所以我的 defconfigs 在子目录中。我想拨打 make`first_defconfig`或`second_defconfig`. 然后我运行`make`，基于此，我希望它是 if`first_defconfig`被调用 then`-DVARIABLEX`应该应用于源树而不仅仅是子目录的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:53:54.920

是的，这是可能的

您需要像这样在 defconfig 中添加任何新配置

```
CONFIG_STACKOVERFLOW=y 
```

现在在内核的任何 kconfig 文件中你应该有

```
config STACKOVERFLOW
   bool "stackoverfloe flag"
   default n 
```

在代码中你可以使用这种方式

```
#ifdef CONFIG_STACKOVERFLOW

//do this and that

#endif 
```

# asp.net - Repeater-in-Repeater SqlDataSource 上的编程选择

> ID：12633362
> 
> 赞同：0
> 
> 时间：2012-09-28T03:57:08.437
> 
> 标签：asp.net, dynamic, repeater, sqldatasource

我有一个带有重复器的页面，它遍历自定义结构的列表。ItemTemplate 有一个Repeater 附加到一个相当裸露的SqlDataSource，它将使用代码隐藏中结构的信息填充，其中WHERE 子句的不同之处仅在于将a 更改`<`为a `>`。StatementDate 和 AccountIndex 分别是用户填写以定义信息的 TextBox 和 DDL。但是，所有以编程方式设置各种 sqlDataSource 详细信息的尝试都不会返回任何内容（错误或行。）

```
<asp:Repeater ID="SelectedRepeater" runat="server" onitemdatabound="SelectedRepeater_ItemDataBound">
        <ItemTemplate>
            <asp:Repeater ID="EntryRepeater" DataSourceID="RecordsDataSource" runat="server" OnItemDataBound="EntryRepeater_ItemDataBound">
                <ItemTemplate>
                    <tr>
                        <td>
                            <%# Eval("TrxDate", StandardDate) %>
                            <span class="error"><%# ShowExclamation(Eval("DateCleared")) %></span>
                        </td>
                        <td><%# Eval("Reference")%></td>
                        <td><%# Eval("VendorName")%></td>
                        <td><%# Eval("Memo")%></td>
                        <td class="money"><%# Eval("Amount","{0:n2}")%></td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater>
            <asp:SqlDataSource ConnectionString="<%=ConnectionString(ActiveClient)%>" ProviderName="System.Data.SqlClient" OnSelecting="RecordsDataSource_Selecting" ID="RecordsDataSource" OnDataBinding="RecordsDataSource_DataBinding" runat="server">
                <SelectParameters>
                    <asp:ControlParameter ControlID="StatementDate" DefaultValue="2/2/1900" Name="StatementDate" 
                        PropertyName="Text" />
                    <asp:ControlParameter ControlID="AccountIndex" DefaultValue="" Name="AccountIndex" 
                        PropertyName="SelectedValue" />
                </SelectParameters>
            </asp:SqlDataSource>
        </ItemTemplate>
    </asp:Repeater> 
```

我尝试使用 SqlDataSource 的 DataBinding 和 Selecting 以及外部中继器的 ItemDataBound：

```
protected void RecordsDataSource_DataBinding(object sender, EventArgs e) {
    _currentCommand = String.Format(_standardSelect, Eval("WhereClause").ToString());
    SqlDataSource sds = sender as SqlDataSource;
    sds.SelectCommandType = SqlDataSourceCommandType.Text;
    sds.SelectCommand = String.Format(_standardSelect, Eval("WhereClause").ToString());
}

protected void SelectedRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e) {
    if (IsListItemRow(e.Item)) {
        SqlDataSource sds = (e.Item.FindControl("RecordsDataSource") as SqlDataSource);
        sds.SelectCommand = String.Format(_standardSelect, ((PrintSection)e.Item.DataItem).WhereClause);
        sds.Select(DataSourceSelectArguments.Empty);
    }
}

protected void RecordsDataSource_Selecting(object sender, SqlDataSourceSelectingEventArgs e) {
    e.Command.CommandText = _currentCommand; //set in DataBinding
} 
```

(Selecting is hit four times when I would think it should be only two, once for each outer Repeater item.)

I take the final CommandText combined with the given parameters and get the proper results in Server Manager, I even made a new SQLDataSource with everything hardcoded and that worked fine, too. While I could copy-paste with hard-coded sqlDataSources, that defeats a lot of the point of programming (even though I'd be done with this by now.)

My thinking is that this has to do with the Page Lifecycle, but I can't figure out what it would be. Is it even viable to use one datasource over multiple iterations? Note that this is only used for selecting data to display, not for any other commands, so I don't need to worry about postback.

(I realize that this could be simplified greatly with the use of a StoredProcedure; however, the database in question is maintained by another application, and deploying or making sure that an SP is deployed whenever a database is added would be annoying, and this is the only page doing this kind of thing.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:22:23.683

Answer my own question why not.

After further testing it turns out I was right about page Lifecycle, but for the wrong reasons. I was doing the initial DataBinding to the outer Repeater in `Page_Init`; this would then call the inner Repeater for DataBinding, but it was too early in the Lifecycle to retrieve the data entered by the user for StatementDate and AccountIndex. Changing this to `Page_Load` fixed that issue.

Next, I decided to work on the assumption that using the same SqlDataSource object for multiple RepeaterItems and changing it was not going to work (though I'm still not sure of this), so I switched to completely creating and binding the SqlDataSource in the codebehind. In the end, the ASP code is the same as in the question, minus the SqlDataSource, and the codebehind is now as follows:

```
protected void SelectedRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e) {
    if (IsListItemRow(e.Item)) { //checks for both Item and AlternateItem
        SqlDataSource sds = new SqlDataSource(ConnectionString(ActiveClient), 
                String.Format(_standardSelect, ((PrintSection)e.Item.DataItem).WhereClause));
        sds.SelectParameters.Add("StatementDate", StatementDate.Text);
        sds.SelectParameters.Add("AccountIndex", AccountIndex.SelectedValue);
        sds.Select(DataSourceSelectArguments.Empty);
        Repeater innerRepeater = (e.Item.FindControl("EntryRepeater") as Repeater);
        innerRepeater.DataSource = sds;
        innerRepeater.DataBind();
    } 
} 
```

# ipad - UITableViewController 子类 setEditing：从不将 tableView 置于编辑模式

> ID：12633366
> 
> 赞同：0
> 
> 时间：2012-09-28T03:58:04.407
> 
> 标签：ipad, uipopovercontroller, uiswipegesturerecognizer

我正在使用 SplitViewController 和核心数据。我的主视图是一个简单的 TableView，就像 SplitViewController 模板一样。我有这三种方法：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];

        [self saveContext];
    }   
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewCellEditingStyleDelete;
} 
```

我认为当我滑动行删除它时，这足以显示删除按钮。现在发生的情况是，如果您第一次并且仅第一次滑动它，删除按钮会出现然后消失。如果我再次滑动，什么也不会发生。我需要重新启动模拟器才能让它再次显示。在我的 TableViewCell 上，我有一个 UILabel 和一个 UITextField。我想也许 UITextField 会拦截滑动，但我调整了它们的大小，所以它们只在左半边以防万一。

编辑：

所以我仍然没有弄清楚为什么会发生这种情况。我想我会添加一个编辑按钮来测试 tableView setEditing: 是否被调用。所以在我的行动方法中，我这样做：

```
- (IBAction)setEditMode:(id)sender {
    [self.tableView setEditing:YES animated:YES];
} 
```

这个方法确实被调用了，但是 tableView 永远不会进入编辑模式。所有这些都在 UITableViewController 的子类中。还有什么我想念的吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:29:40.133

尝试这个，

```
- (void)tableView:(UITableView *)tv commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath {

    if(editingStyle == UITableViewCellEditingStyleDelete) {

        //Get the object to delete from the array.
        Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:indexPath.row];
        [appDelegate removeCoffee:coffeeObj];

        //Delete the object from the table.
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

# php - 你如何创建基于 db 字段的循环？

> ID：12633368
> 
> 赞同：1
> 
> 时间：2012-09-28T03:58:12.073
> 
> 标签：php, loops

```
echo '<div>';
while ($row=mysql_fetch_assoc($result)) 
{ 
    if ($row['Course']!=$old_id) 
    {
        $old_id=$row['Course'];
        echo '</div>
                  <div class="sectitle">'.$row['Course'].'</div>
                  <div style="width:100%;float:left">';
    }
    if ($row['Approved']==1) 
    {
        $coursedate=date("M Y", strtotime($row['Submitted']));
        echo '<div class="nbutton">
            <ul>
                <li><strong><a target="_new" href="' . $row['AssignmentURL'] . '">' . $row['URL'] . '</a></strong></li>
                <li>Instructor: ' . $row['LastName'] . ', ' . $row['FirstName'] . '</li>
                <li>Book: '.$row['TextBook'].'</li>
                <li>Submitted: '.$coursedate.' </li>
            </ul>
        </div>';
    }
}
echo '</div>'; 
```

我正在学习 PHP，并匆忙写了这个。现在我对循环的工作原理有了更多的了解，我正试图回到这一点并重新格式化它。

$row 包含 Course 的值，类似于 ESL 1010 或 ENGL 1010，它是每个条目的标准值。如何构建我的循环，以便它使用包含我熟悉的这种方法的东西：

```
$courses=array_unique($row['Course'])
foreach ($courses as $course)
{... This is where I get lost. 
```

对不起，如果这是一个非常简单的修复。我似乎无法将我的大脑包裹在它周围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:44:57.340

```
$courses = array();
while ($row = mysql_fetch_assoc($result)) {
    $courses[] = $row;
} 
```

现在`$courses`是一个包含所有课程的数组，您已经从 MySQL 结果集中提取数据并将其存储在一个数组中。现在随心所欲地使用它。

但是，如果可能，您应该避免这样做，因为与一次遍历结果集一行相比，它需要更长的时间并且使用更多的内存。

# php - 如何在php中通过javascript重定向后获取页面内容

> ID：12633369
> 
> 赞同：0
> 
> 时间：2012-09-28T03:58:21.020
> 
> 标签：php, javascript, redirect, curl

通过javascript重定向该页面后，如何获取整个页面内容？

在**executewebpage.php 中**：

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setOpt($ch, CURLOPT_POST, TRUE);
$url = 'http://www.doredirect.com';
$postfields = array('doredirect'=>'true','trigger'=>'1');
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
curl_setopt($ch, CURLOPT_URL, $url);
$data = curl_exec($ch);

echo($data);  //In this step, it redirect to page: http://www.finalpage.com

curl_close($ch); 
```

如何获取**http://www.finalpage.com**的内容？

**注意：如果我不回显，它不会返回任何内容，也不会重定向到任何页面**

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:26:11.740

尝试使用它来查看 curl 响应的 HTML：

```
echo htmlspecialchars($data); 
```

某处可能存在 javascript 或元重定向。寻找这个：

```
window.location... 
```

或者

```
document.location... 
```

或者

```
<meta http-equiv="refresh" content="0;url=http://finalpage.com" /> 
```

从那里，您可以构建一个正则表达式（正如其他人所建议的那样）来查找 URL，然后获取它的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:19:15.697

浏览返回的 html 并找出重定向在代码中的位置。将数据放入变量中，使用正则表达式对其进行处理，获取重定向到的 url，并使用新的 curl 请求获取新的页面内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T01:12:44.847

我发现了如何做到这一点！

我检测到**http://www.finalpage.com**在显示内容之前重新提交了它。所以我用这个[http://www.mishainthecloud.com/2009/12/screen-scraping-aspnet-application-in.html](http://www.mishainthecloud.com/2009/12/screen-scraping-aspnet-application-in.html)来卷曲它，我得到了我想要的任何东西。谢谢大家！

# c# - 在 Mono.Csharp 中运行一个小程序

> ID：12633378
> 
> 赞同：8
> 
> 时间：2012-09-28T03:59:52.450
> 
> 标签：c#, compiler-construction, mono, bootstrapping

我正在尝试编写一个交互式 C# 教学应用程序，用户可以在其中试验/更改代码示例并查看会发生什么（有点像 jsfiddle）。

我找到了很多关于 Mono.Csharp 作为运行时编译器的小表达式或类似 REPL 使用的示例，但我找不到执行“小程序”的示例。

到目前为止，这是我的玩具代码（一个 MVC 操作）。“代码”参数直接从文本区域发布。

```
[HttpPost]
public ActionResult Index(string code)
{
    var reportWriter = new StringWriter();
    var settings = new CompilerSettings();
    var printer = new ConsoleReportPrinter(reportWriter);
    var reports = new Report(printer);
    var eval = new Evaluator(settings, reports);

    var model = new CodeViewModel();
    model.Code = code;
    eval.Run(code);
    model.Result = reportWriter.ToString();

    return View("Index", model);
} 
```

现在假设代码是这样的字符串：

```
using System;
public class MyClass
{
    public void DoSomething()
    {
        Console.WriteLine("hello from DoSomething!");
    }
} 
```

我如何引导它（即实例化一个`MyClass`对象并调用`DoSomething`它）？我试过只是追加`new MyClass().DoSomething();`到最后，但我明白了：

```
{interactive}(1,2): warning CS0105: The using directive for `System' appeared previously in this namespace
{interactive}(1,8): (Location of the symbol related to previous warning)
{interactive}(11,1): error CS1530: Keyword `new' is not allowed on namespace elements
{interactive}(11,4): error CS1525: Unexpected symbol `MyClass', expecting `class', `delegate', `enum', `interface', `partial', or `struct' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T17:47:16.280

```
var reportWriter = new StringWriter();
var settings = new CompilerSettings();
var printer = new ConsoleReportPrinter(reportWriter);
var reports = new Report(printer);
var eval = new Evaluator(settings, reports);

eval.Run(code);

eval.Run(@"
    var output = new System.IO.StringWriter(); 
    Console.SetOut(output);
    new MyClass().DoSomething();");

var model = new CodeViewModel();
model.Code = code;

if (reports.Errors > 0)
   model.Result = reportWriter.ToString();
else
   model.Result = (string) eval.Evaluate("output.ToString();");

return View("Index", model); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T07:35:55.933

虽然这个问题已经被接受，但当我遇到这篇文章时，我遇到了类似的问题。我终于想通了，所以我想我会在这里发帖以防其他人遇到麻烦。

您不能`using`在对`Evaluator`. 从Mono.CSharp REPL[的文档中：](http://www.mono-project.com/CsharpRepl)

> using 声明必须单独出现，并且不能与常规语句混合在一行中。

由于这是`Evaluator`对每一行的单独调用，因此同样的限制适用于`Evaluator`从您的应用程序调用。

# php - Zend Framework 2：如何在 ZfcUser 的注册表单中添加额外的字段？

> ID：12633379
> 
> 赞同：1
> 
> 时间：2012-09-28T03:59:58.337
> 
> 标签：php, zend-framework2

我安装了*ZfcUser*并将 first_name/last_name 列添加到我的用户表中。

如何覆盖注册表单并将 first_name/last_name 添加到视图中？

我知道如何覆盖视图。但我猜我还需要覆盖用户控制器或用户表单。这就是我卡住的地方——我不知道如何覆盖控制器/表单。

我已经创建了自己的用户模块，用于覆盖。

谁能给我一个提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:16:45.987

请注意，在 ZfcUser\Form\Register 中，在 __construct() 方法中有一个事件调用，即：

```
 $this->getEventManager()->trigger('init', $this); 
```

因此，您可以扩展注册表并添加您的 first_name/last_name 元素

```
class MyForm extends ZfcUser\Form\Register {
    public function init(){
        $this->add(array(
            'name' => 'first_name',
            'options' => array(
                'label' => 'First Name',
            ),
            'attributes' => array(
                'type' => 'text'
            ),
        ));

        $this->add(array(
            'name' => 'last_name',
            'options' => array(
                'label' => 'Last Name',
            ),
            'attributes' => array(
                'type' => 'text'
            ),
        ));
    }
} 
```

然后您可以在 Module.php 中将表单添加为服务

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'myform' => function ($sm) {
                $form = new MyForm(null, $options);
                return $form;
            },
        ),
    );
} 
```

最后，正如您所说，您还需要将 first_name/last_name 输入元素输出到视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:48:22.573

我相信您也可以编写自己的实体类，例如 ZfcUser\Entity\User.php 中的实体类，然后确保编辑 Zfcuser 配置。

我喜欢 AlloVince 的回答，实际上我会尝试一下。我正在开发的 SaaS 应用程序将具有动态表单，所以我现在要测试他的

# c# - 除了 Equals(Object)，我为什么还要实现 Equals(type)？

> ID：12633380
> 
> 赞同：1
> 
> 时间：2012-09-28T04:00:03.210
> 
> 标签：c#, overriding

当我需要定义自己的`Equals`方法时，通常我只`Equals(Object)`在我的类中重写。

然而[MSDN](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)说：

> 还建议除了实现 Equals(object) 之外，任何类也为自己的类型实现 Equals(type)，以提高性能。

但它如何提高性能呢？我只能调用这两种方法之一，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T04:03:08.403

结构没有装箱，可以直接调用所有类型（而不是虚拟调用）。

```
struct MyStruct
{
  public int v;
  public override bool Equals(Object other) {}
} 
```

如果您不提供采用 MyStruct 的显式方法，那么每次调用`myFirst.Equals(myOther)`. 如果您确实提供`Equals(MyStruct other)`，编译器将选择该方法而不是更通用的方法，`Equals(Object)`从而避免对结构进行装箱。

对于所有类型，您可以提供非常简单的实现，`Equals(MyType)`因为您已经知道该类型。如果方法不是虚拟的，编译器/JIT 也可以更好地优化调用，因为更具体的版本不需要是虚拟的。

# c++ - 指针向量。如何使用？

> ID：12633382
> 
> 赞同：2
> 
> 时间：2012-09-28T04:00:48.303
> 
> 标签：c++, pointers, vector

我目前一直在为我的一个项目学习 C++。目前，我正在考虑使用指向类的指针向量（我将填充从该基类派生的类），因为我想访问特定于每个派生类的独特函数。不过，我不完全确定如何使用它，并且根据我对法线向量的经验，我了解开始工作会很痛苦，所以我只想知道几件事：

1.  如何将对象添加到向量中？

2.  如何删除向量中的单个元素？

3.  如何通过迭代器访问特定对象？例如，如何访问在向量中有指针的对象的函数？

4.  如何将迭代器传递给以指向对象的指针作为参数的函数？

还有什么我应该知道的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:27:18.047

示例设置，

```
class Base
{
};

class DerivedOne : public Base
{
};

class DerivedTwo : public Base
{
};

std::vector<Base*> ptrVec; 
```

要**添加**，

```
ptrVec.push_back(new DerivedOne());
ptrVec.push_back(new DerivedTwo()); 
```

要**删除**,

```
std::vector<Base*>::iterator it;
/* Make sure it points to the correct element. */
delete *it;
ptrVec.erase(it); 
```

访问**函数**很容易，

```
Base* ptrToObj = *it; // Assuming it points to the correct element
ptrToObj->AnyFunc(); // You can also use (*it)->AnyFunc() 
```

回答你的**第四个问题**，

```
AnyFuncThatAcceptsObjPtr(*it); // Again assuming it points to the correct element 
```

**还有什么我应该知道的吗？**

*是的，了解[智能指针](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)。*

```
std::vector<SomeSmartPtr<Base> > smartPtrVec;

SomeSmartPtr<Base> smartPtr(new DerivedOne());
smartPtrVec.push_back(smartPtr);

smartPtrVec.erase(it); // With smart pointers, you don't need to delete explicitly 
```

# c++ - 了解循环不变量

> ID：12633384
> 
> 赞同：0
> 
> 时间：2012-09-28T04:01:00.057
> 
> 标签：c++, loops, assert

我认识的一位大学新生正在学习计算机科学课程的介绍，请我帮助他完成一项家庭作业。我通读了几次，我很尴尬地承认我不知道他们要什么。这是问题：

下面给出了循环的轮廓。完成程序，以便读取 x 和 y 值，验证它们（通过继续提示用户直到他们输入正确的值），然后运行以使给定的断言始终为真。在程序中必须为真的四个点处包含循环不变断言。除了给定的 assert(...) 语句外，您不能使用乘法运算符。

```
assert(x>0 && y>0);
while(...)
{
    assert(sum == i*(x+1));
    ...
    ...
}
assert(sum == y*(x+1)); 
```

我不知道什么是循环不变量，所以我搜索并阅读了[Wikipedia 文章](http://en.wikipedia.org/wiki/Loop_invariant)。从那我收集到的第一个断言语句告诉我，在循环期间我不应该允许 x 和 y 为负数。老实说，我被困在这一点上。有人可以帮我理解他们在这里的要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:41:38.337

作业的描述不完整，几乎没有意义。

但是，可以*推断*它是关于让用户输入两个正整数，并在不使用乘法运算符的情况下计算乘积，作为总和。

通常，正整数的乘积可以这样定义为和：

> 2 次 b = b + b
> (a + 1) 次 b = b + (a 次 b)

通过要求一般规则成立来推断操作数 1 和 0 的情况。

最后一个等式与您展示的断言的相似性可能不是巧合。

无论如何，它作为循环不变量很好地工作。当你增加循环变量时，循环不变量仍然成立，并确保你有一个好的产品。因此，当循环完成时，循环不变量对该乘积的约束，加上此时循环变量的值，确保您有一个乘积（很容易减少为）x*y。

# ios - 如何在 iCloud 中备份文件？

> ID：12633386
> 
> 赞同：2
> 
> 时间：2012-09-28T04:01:19.573
> 
> 标签：ios, xcode, icloud

嗨，我是 iPhone 开发的新手。在我的应用程序中，我想在 iCloud 中备份我的应用程序文档，以便在用户卸载应用程序时可以从 iCloud 恢复应用程序。但我没有找到任何示例代码备份并从备份中恢复。任何人都可以建议我一个解决方案来实现这一点。我还有一个问题，iCloud 备份有什么限制吗？

# applescript - 如何使用 Applescript 在两个终端窗口中运行两个 shell 脚本？

> ID：12633389
> 
> 赞同：0
> 
> 时间：2012-09-28T04:01:35.167
> 
> 标签：applescript, window-management

我无法弄清楚 Applescript 代码在两个窗口中运行两个不同的 shell 脚本。

到目前为止我得到的是...

```
set s1 to "echo A"
set s2 to "echo A"
tell application "Terminal"
    activate
    tell window 0
        set visible to true
    end tell
    set shell to do script s1 in window 0
    tell window 1
        set visible to true
    end tell
    set shell to do script s2 in window 1
end tell 
```

但这会在一个窗口中显示所有内容。这让我很生气，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:13:04.570

默认不`do script`打开新窗口？

```
tell application "Terminal"
    activate
    do script "echo A"
    do script "echo A"
end tell 
```

# javascript - What are the advantages of using classes instead of using a function that throws an object as a return value?

> ID：12633392
> 
> 赞同：1
> 
> 时间：2012-09-28T04:01:43.333
> 
> 标签：javascript, class, function, object, return

I'm a newbie programmer, but I already saw some things that can be done better or at least differently. For example, classes are made available to create new objects, like this:

```
var newObject = new className(params); 
```

But is this really necessary, since functions can return an object? I mean, with the following code you could as well get rid of the *new* keyword:

```
var newFruit = function (confobj) {
  var instance = {};

  //Common to all fruits
  instance.edible = true;

  //Custom settings
  instance.color = confObj.color;
  instance.shape = confObj.shape;
  instance.sweetness = confObj.sweetness;
  instance.sweet = (instance.sweetness > 0);

  return instance;
};

var banana = newFruit({
  color: 'yellow',
  shape: 'long',
  sweetness: 8
}); 
```

So, what do would be the advantages of using JS classes that require the *new* keyword instead of using code like that provided in the example?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:08:55.573

There are no classes in javascript.

Constructors (i.e. functions designed to be called with the `new` operator) are handy where you want multiple instances of an object. There are efficiency and maintenance benefits to sharing methods using inheritance rather than adding duplicate methods to each object. An alternative is to use ES5 Object.create, which more or less does the same thing as `new`.

If only a single instance of an object is required, there is no need for a constructor. Closures can be used for "private" variables and methods.

Use whatever strategy suits your application, large projects often use a mix of the above. There is no one "best" solution.

# bash - 在bash中的if语句中调用本地函数

> ID：12633394
> 
> 赞同：1
> 
> 时间：2012-09-28T04:01:53.177
> 
> 标签：bash, shell

```
#!/bin/bash

if [ -z "$1" ]
  then
    echo "No argument supplied"
    exit
fi

if [ "$1"="abc" ] ; then
abc
exit
fi

if [ "$1" = "def" ]; then
def
exit 1
fi

function abc()
{
    echo "hello"
}

function def()
{
    echo "hi"
} 
```

这里 abc 是一个具有局部定义的函数。但是 Bash 给出错误“./xyz.sh: line 10: abc: command not found”。请给我任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:14:23.803

所有函数都必须在使用前声明，因此将声明移到顶部。

`=`此外，您需要在字符串比较测试中的任一侧都有一个空格。

以下脚本应该可以工作：

```
#!/bin/bash

function abc()
{
    echo "hello"
}

function def()
{
    echo "hi"
}

if [ -z "$1" ]
  then
    echo "No argument supplied"
    exit
fi

if [ "$1" = "abc" ] ; then
   abc
   exit
fi

if [ "$1" = "def" ]; then
   def
   exit 1
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:42:59.127

我怀疑你的 abc 声明有问题。如果您为您的脚本提供代码，我们将更有能力提供具体的帮助，但这里有一个我认为您正在努力实现的示例。

```
#!/bin/bash -x

abc(){
  echo "ABC. bam!"
}

foo="bar"
if [ "$foo"="bar" ]; then
  abc
else
 echo "No bar for you"
fi 
```

# android - 发送 SMS 时包含收件人姓名或 Spinner ID 的 Toast 消息

> ID：12633395
> 
> 赞同：1
> 
> 时间：2012-09-28T04:02:06.127
> 
> 标签：android, sms, messaging, toast, android-spinner

我的应用程序是用户发送祝福消息的地方。它有 Spinner，其中包含 recipents 的名称，并且它们是硬编码的。我创建了一条 Toast 消息，上面写着“SMS 发送成功”。但我意识到我需要在 Toast 消息中包含某个 recipent 的名称，以确认消息已发送给 recipent。

我已经尝试了所有我知道的 Toast 消息来尝试包含 recipent 的名称，但是当我运行应用程序时出现错误并且 Toast 消息失败。我将发布 SMS 应用程序的完整代码。

```
public class SMSEvents extends Activity
{
    Button btnSMS;
    EditText messageTxt;
    IntentFilter intentFilter;
    TextView text, textName;
    Spinner sendTo;

    ArrayAdapter<String> adapter;
    String friends[] = {"Kanak Priya", "Joanne Liew", "Melissa Haiting", "Michelle Lam", "Teo Kin Hua", "David Yeo", "Nur Ashiqin", "Stephanie"};

    private int namesSpinnderId;

    private BroadcastReceiver intentReceiver = new BroadcastReceiver()
        {
            @Override
            public void onReceive(Context context, Intent intent)
            {
                // ---display the SMS received in the TextView---
                TextView text = (TextView) findViewById(R.id.text);
                text.setText(intent.getExtras().getString("sms"));                          
            }                       
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sms);

        sendTo = (Spinner) findViewById(R.id.sendTo);

        adapter = new ArrayAdapter<String>(this,
                R.layout.spinner_text, friends);
        sendTo.setAdapter(adapter);

        /*BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);

        sendTo = (Spinner) findViewById(R.id.sendTo);
        Cursor friendsCursor = buddyDB.getAllNames();
        startManagingCursor(friendsCursor);*/

        /*String[] from = new String[]{BuddyDBAdapter.KEY_NAME};
        int[] to = new int[]{R.id.sendTo};

        SimpleCursorAdapter friendsAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, friendsCursor, from, to);
        friendsAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        sendTo.setAdapter(friendsAdapter);*/

       /* sendTo.setOnItemSelectedListener(new OnItemSelectedListener()
            {

                @Override
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
                {
                    Cursor c = (Cursor)parent.getItemAtPosition(pos);
                    namesSpinnderId = c.getInt(c.getColumnIndexOrThrow(BuddyDBAdapter.KEY_ROWID));                  
                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0)
                {
                    // TODO Auto-generated method stub

                }

            });*/

        // ---intent to filter for SMS messages received---
        intentFilter = new IntentFilter();
        intentFilter.addAction("SMS_RECEIVED_ACTION");

        // ---register the receiver---
        registerReceiver(intentReceiver, intentFilter);

        //sendTo = (EditText) findViewById(R.id.sendTo);
        //textName = (TextView) findViewById(R.id.textName);

        sendTo = (Spinner) findViewById(R.id.sendTo);
        messageTxt = (EditText) findViewById(R.id.messageTxt);

        btnSMS = (Button) findViewById(R.id.btnSMS);
        btnSMS.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                {
                    String contact_name = sendTo.getSelectedItem().toString();
                    String message = messageTxt.getText().toString();

                    if (contact_name.length() > 0 && message.length() > 0)
                        sendSMS(contact_name, message);
                    else
                        Toast.makeText(
                                getBaseContext(),
                                "Please enter your message",
                                Toast.LENGTH_SHORT).show();

                    /*Intent msgIntent = new Intent(android.content.Intent.ACTION_VIEW);
                    msgIntent.putExtra("sms_body", "default content");
                    msgIntent.setType("vnd.android-dir/mms-sms");
                    startActivity(msgIntent);*/
                }

            });

        Button btnBack = (Button) findViewById(R.id.btnMain);
        btnBack.setOnClickListener(new View.OnClickListener()
            {

                @Override
                public void onClick(View arg0)
                {
                    Intent menuIntent = new Intent(SMSEvents.this, MainPage.class);
                    startActivity(menuIntent);

                }
            });

    }

    @Override
    protected void onResume()
    {
        // ---register the receiver---
        // registerReceiver(intentReceiver, intentFilter);
        super.onResume();
    }

    @Override
    protected void onPause()
    {
        // ---unregister the receiver---
        // unregisterReceiver(intentReceiver);
        super.onPause();
    }

    @Override
    protected void onDestroy()
    {
        // ---unregister the receiver---
        unregisterReceiver(intentReceiver);
        super.onPause();
    }

    private void sendSMS(String contact_name, String message)
    {
        String SENT = "SMS SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

        // ---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver()
            {
                @Override
                public void onReceive(Context arg0, Intent arg1)
                {
                    switch (getResultCode())
                        {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS is sent to" +contact_name successfully",
                                    Toast.LENGTH_SHORT).show();
                            break;

                        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                            Toast.makeText(getBaseContext(), "Service failure",
                                    Toast.LENGTH_SHORT).show();
                            break;

                        case SmsManager.RESULT_ERROR_NO_SERVICE:
                            Toast.makeText(getBaseContext(), "No service",
                                    Toast.LENGTH_SHORT).show();
                            break;

                        case SmsManager.RESULT_ERROR_NULL_PDU:
                            Toast.makeText(getBaseContext(), "Null Pdu",
                                    Toast.LENGTH_SHORT).show();
                            break;

                        case SmsManager.RESULT_ERROR_RADIO_OFF:
                            Toast.makeText(getBaseContext(), "Radio off",
                                    Toast.LENGTH_SHORT).show();
                            break;

                        }
                }
            }, new IntentFilter(SENT));

        // ---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver()
            {
                @Override
                public void onReceive(Context arg0, Intent arg1)
                {
                    switch (getResultCode())
                        {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS delivered",
                                    Toast.LENGTH_SHORT).show();
                            break;

                        case Activity.RESULT_CANCELED:
                            Toast.makeText(getBaseContext(),
                                    "SMS not delivered", Toast.LENGTH_SHORT)
                                    .show();
                            break;
                        }
                }
            }, new IntentFilter(DELIVERED));

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage("5554", null, message, sentPI, deliveredPI);
        //sms.sendTextMessage(contact_name, null, message, sentPI, deliveredPI);

        /*try
        {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(contact_name, null, message, null, null);
            Toast.makeText(getApplicationContext(), "SMS is sent successfully!", Toast.LENGTH_LONG).show();
        }
        catch(Exception e)
        {
            Toast.makeText(getApplicationContext(), "SMS failed! Please try again later!", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        }*/
    }
} 
```

`Toast.makeText(getBaseContext(), "SMS is sent to" +contact_name successfully", Toast.LENGTH_SHORT).show();`我试图做的就是包括recipent的名字。

如果有人知道如何做这个 Toast，我将不胜感激 =)。很抱歉要求一个简单的帮助，但我尝试了 3 种不同的方式来发送这种 Toast 消息。

提前致谢！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:36:05.560

我已经想出了如何做这个吐司。

您对这个 Toast 消息进行编码，`public void onReceive()`其中`private void sendSMS()`

像这样：

`Toast.makeText(getBaseContext(), "SMS is sent to " +sendTo.getSelectedItem()+ " successfully.", Toast.LENGTH_SHORT).show();`

`getSelectedItem()`正在从 Spinner 获取选定的项目。如果您使用的是 EditText 或 TextView，只需替换`getSelectedItem()`为`getText()`

:D，那些和我有类似问题的人，可以试试这个答案，希望它能解决他们类似的问题。:D

# mysql - MYSQL 查询即使在更新后也能获取旧记录

> ID：12633403
> 
> 赞同：0
> 
> 时间：2012-09-28T04:03:26.430
> 
> 标签：mysql

我想知道我的 MYSQL DB 中以前更新的值。

```
si.no   cus_name     date      status
  1      JOHN     2012-05-02   active 
```

* * *

```
 1      PAUL     2012-05-02   active ( not a new record just an 1st-update )

  1      JOSE     2012-05-02   active  ( not a new record just an 2nd-update ) 
```

现在我想获得 cus_name 值，当我用相同`"JOHN"`的名称更新名称时，应该将值作为.`"PAUL"``"JOSE"``"PAUL"`

请建议我对相同的查询。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:04:15.380

如果您想访问以前的值，您有两个选择。

1.  使用版本号和时间戳列设计表，以便您始终可以获取最新版本以及该行的任何先前版本。您必须将更新操作更改为插入，可能在您的应用程序代码中或使用触发器。如果表得到频繁更新，这可能会导致表变得非常大。
2.  使用第二个表来存储更新行的先前版本。该表将需要一个版本号（并且可能需要更新时间戳）。这种方法的优点是具有“当前”数据的主表不会随着更新的累积而无限增长。这也可以通过触发器或在您的应用程序中完成。

您选择哪一个将取决于更新频率以及访问“旧”记录的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:11:49.320

您应该需要在 db 中再添加一列并使用 time() 插入当前时间；功能。这样您就可以轻松识别哪个更旧。另一种解决方案是将数据库中的日期结构从更改为`date`，`DATETIME`以便您可以轻松检查..

```
CREATE TABLE IF NOT EXISTS `customer_record` (
`si.no` int(11) NOT NULL,
`cus_name` varchar(255) NOT NULL,
`date` DATETIME NOT NULL,
`status` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:22:03.660

简单的方法，在表中添加一个 auto_increment 字段。要获得最后一个值，只需选择，按降序限制 1 中的 auto_increment 字段排序。

# ios - 如何防止在 GMGridView 中将可见单元格出列

> ID：12633404
> 
> 赞同：0
> 
> 时间：2012-09-28T04:03:32.273
> 
> 标签：ios, xcode, gmgridview

我正在使用[GMGridView](https://github.com/gmoledina/GMGridView) ，它非常适合支持网格视图。但是我遇到了关于它使细胞出队的方式的问题。

我的应用程序的一些背景信息：我有一个名为“ProductsGVC”的类，它呈现属于某个“类别”的产品的网格视图。ProductsGVC 的数据模型是从“类别”实例中获取的产品数组。

我的 GMGridView 一次创建 250 个单元格。当我加载每个单元格时，我有一个线程为每个单元格下载图像。在等待它完成下载的同时，我在单元格的图像视图中放置了一个默认图像。从逻辑上讲，下载单元格后，我想重新加载单元格以更新照片。我使用以下代码成功地做到了这一点：

```
//_currentData is my array of products
[_gmGridView reloadObjectAtIndex:[_currentData  indexOfObject:product] animated:YES]; 
```

但是，如果我的数组底部的 a 单元格被更新，则单元格会正确刷新，但 1 个单元格会消失。

`[_gmGridView reloadData]`我的低效解决方案是在单元完成下载其图像的任何时候调用。结果是，我之前加载的单元格消失了。我猜他们的出队和重用。好吧，当我从那些消失的单元格中滚动多次时，它们确实会再次出现。

我的问题是，如何防止可见单元格（即当前在屏幕上的单元格）出列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:44:39.727

如果您使用的是 NSFetchResultsController，您可以尝试实施 Rasmuth 在此处找到的答案[https://github.com/gmoledina/GMGridView/issues/84](https://github.com/gmoledina/GMGridView/issues/84)。

# javascript - setInterval 的最大延迟是多少？

> ID：12633405
> 
> 赞同：24
> 
> 时间：2012-09-28T04:03:50.407
> 
> 标签：javascript, setinterval

我在使用以下代码的 Firefox 15 和 Chrome 21 上遇到问题：

```
setInterval(function () { console.log('test') }, 300000000000) 
```

在这两种浏览器上，该功能立即运行重复非常快。当然，这是一个很大的数字（代表大约 10 年后），但我不希望它被视为一个很小的数字或负数。我没有在任何文档中看到最大允许延迟。有谁知道是否有标准最大值，或者这只是浏览器很有趣？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-28T04:25:03.720

间隔存储在有符号的 32 位 int 中（在测试的实现中：Google Chrome 中的 V8），因此您看到的行为是间隔溢出到负数的结果（在这种情况下，它的行为就像间隔是`0`）。因此，您可以使用的最大间隔是`2**31 - 1`。

以下是我确定是这种情况的方法：

```
setInterval(function(){console.log("hi");}, Math.pow(2,31)); 
```

表现得像区间是`0`。

```
setInterval(function(){console.log("hi");}, Math.pow(2,31) - 1); 
```

在我愿意等待的时候不会开火。

```
setInterval(function(){console.log("hi");}, Math.pow(2,33) + 1000); 
```

表现得像间隔是`1000`（一秒）。在这里，`2**33`不影响前 32 位，所以我们得到`1000`.

可能的最高间隔`2**31-1ms`是 25 天，所以对于任何合理的事情来说都绰绰有余。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-28T04:14:39.770

目前我找不到任何文档，但如果计时器值必须适合 32 位有符号整数，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T04:14:29.957

我认为最大延迟是 2 ^(31) -1，即 2,147,483,647 毫秒。有符号 32 位整数的最大值，以 ms 为单位。如果它是无符号的，它将是 2 ^(32) -1 = 4,294,967,295。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-01T22:34:00.617

如果您需要的间隔大于`2,147,483,647`此处的 TypeScript 示例，您可以将间隔设置为最多`458,496,310,632,933,156,516.92`天数：

*显然，我还没有测试过这是否可以持续很长时间：D。*

```
export const setLongInterval = (callback: any, timeout: number, ...args: any): Timeout => {
    let count = 0;
    const MAX_32_BIT_SIGNED = 2147483647;
    const maxIterations = timeout / MAX_32_BIT_SIGNED;

    const onInterval = () => {
        ++count;
        if (count > maxIterations) {
            count = 0;
            callback(args);
        }
    };

    return setInterval(onInterval, Math.min(timeout, MAX_32_BIT_SIGNED));
};

export const setLongTimeout = (callback: any, timeout: number, ...args: any): Timeout => {
    let count = 0;
    let handle: Timeout;
    const MAX_32_BIT_SIGNED = 2147483647;
    const maxIterations = timeout / MAX_32_BIT_SIGNED;

    const onInterval = () => {
        ++count;
        if (count > maxIterations) {
            count = 0;
            clearInterval(handle);
            callback(args);
        }
    };

    handle = setInterval(onInterval, Math.min(timeout, MAX_32_BIT_SIGNED));
    return handle;
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-25T13:42:47.880

延迟参数被转换为有符号的 32 位整数。这有效地将延迟限制为 2147483647 毫秒，因为它在 IDL 中被指定为有符号整数。

它在[文档中提到](https://developer.mozilla.org/en-US/docs/Web/API/setInterval#return_value)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-29T01:04:55.767

最大值为`2,147,483,647`(2 ^(31) -1)

请注意，如果您使数字大于该数字，它将立即运行（想象您输入负值，因此浏览器将无限循环运行）

```
setInterval(()=>console.log('n'),2147483647)
31
setInterval(()=>console.log('y'),2147483648)
38
(1588) y 
```

# javascript - JavaScript：减少和映射

> ID：12633409
> 
> 赞同：0
> 
> 时间：2012-09-28T04:04:46.687
> 
> 标签：javascript, backbone.js

我试图理解为什么这个函数的作者会在一个已经是调用 map 的结果的对象上调用 reduce。这是来自主干应用程序的渲染功能（此处为演示[http://fire-camp.heroku.com/](http://fire-camp.heroku.com/)）。变量“messages”表示用户输入消息系统的消息的集合。为什么作者会调用 map 然后对 map 的结果进行归约，即“数据”。我不明白 reduce 如何为 data 变量添加任何新内容。如果您需要更多信息，请与我们联系。

```
render: function() {
    var data = messages.map(function(message) { return message.get('content') + 'n'});
    var result = data.reduce(function(memo,str) { return memo + str }, '');
    $("#chatHistory").text(result);
    return this;
  } 
```

非常短的应用程序的完整源代码在这里，但我认为您不需要它。[https://github.com/ryandotsmith/fire-camp](https://github.com/ryandotsmith/fire-camp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:11:34.353

正如@Pointy 提到的，作者使用的原因`reduce` 是将数组连接成单个字符串（或将其减少为字符串）。不过，正如@Pointy 所提到的，`reduce`在这种情况下使用的理由并不是很好。

鉴于 GitHub 上的代码，有几个更好的替代方案。考虑到代码使用 Backbone.js 并且`messages`变量指向 a`Backbone.Collection`此代码，如果它读取以下内容会更清楚：

```
render: function() {
  var result = messages.pluck('content').join('\n')
  $("#chatHistory").text(result);
  return this;
} 
```

`reduce`用于连接字符串数组是矫枉过正并且模糊了代码的意图。`map`与 一起使用 只是`Backbone.Collection`为了从内部模型中提取特定属性也有点模糊了代码的意图。

# java - 从 Graphics2D (JAVA) 获取 awt.Image 数据

> ID：12633410
> 
> 赞同：1
> 
> 时间：2012-09-28T04:04:52.873
> 
> 标签：java, graphics, awt, motion-blur

我正在为我的游戏引擎创建一个糟糕的运动模糊效果，并且我有一个五个索引的图像数组，我命名为 MotionBlur[]。

每次我的图形对象完成在屏幕上的绘制时，我都需要将该数据存储到 MotionBlur[0] 中。每一帧图像都从 0 向下移动到 4，然后被踢出。我将在最后一张之后绘制每张图片，使用不同的、适当的透明度。

我要问的是如何将 Graphics2D 数据存储到 awt.Image 中。

感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:12:50.660

如果可以的话，我会反其道而行之。

*   将效果绘制到存储在`MotionBlur`数组中的后备缓冲区
*   将缓冲区绘制到屏幕上

# python - 列表索引超出范围错误

> ID：12633411
> 
> 赞同：0
> 
> 时间：2012-09-28T04:05:01.147
> 
> 标签：python, list

运行此代码时不断出现索引超出范围错误我该如何解决？数据包含一些值，这些值将通过服务器传递给 valueList，我想在数据中使用这些值的一部分。例如， int(valueList[8]) 包含球的 x 坐标。我该如何解决这个问题？

```
import os,sys
import pygame
import socket
import time
from multiprocessing import Process, Value
from ctypes import c_bool

Host = '59.191.193.45'
Port = 5555

def updatePosition(valueList, update_valueList, quit_flag):
    while not quit_flag.value:
        print 'Ball x', int(valueList[8])
        print 'Ball y', int(valueList[9])
        update_valueList = valueList[:]
    print 'Closing child update process'

def activateRobot(update_valueList, quit_flag): 
    while not quit_flag.value:
        print 'Ball x', int(valueList[8])
        print 'Ball y', int(valueList[9])
        print 'turn to'
        print 'move to', int(valueList[8])
        print 'move to', int(valueList[9])
    print 'Closing child activate robot process'

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect((Host,Port))

valueList = []
update_valueList = []
quit_flag = Value(c_bool,False)

update = Process(target = updatePosition, args=(valueList, update_valueList,quit_flag))
activate = Process(target = activateRobot, args=(update_valueList,quit_flag))

update.start()
activate.start()

while True:
    client.sendall("loc\n")
    data = client.recv(8192)
    if not data:
        print 'network connection close by client'
        break
    valueList = data.split()

print 'All done, closing child process'
update.join()
activate,join() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:26:26.030

这个

```
data = client.recv(8192) 
```

*最多*接收8192 个字节。您可能会得到部分线条。该行不必长于 8192 字节即可。您只需阅读到目前为止通过网络到达的内容，这些内容可能不是整行。

# php - PHP返回错误消息和错误

> ID：12633413
> 
> 赞同：7
> 
> 时间：2012-09-28T04:05:09.853
> 
> 标签：php, exception-handling

我有一个非常简单的 PHP 函数来检查登录

```
function check_login($user, $pass) {
    if(!isset($user) || $user == '') {
        return  'Please enter a valid username';
    }
    else if(!isset($pass) || $pass == '') {
        return  'Please enter a valid password';
    }
    else {
        return 'true';
    }
} 
```

如何同时返回错误消息和 false 并返回 true 而不是 'true' 作为字符串。像，

```
function check_login($user, $pass) {
    if(!isset($user) || $user == '') {
        return  'Please enter a valid username' //return false;
    }
    else if(!isset($pass) || $pass == '') {
        return  'Please enter a valid password' //return false;
    }
    else {
        return true;
    }
} 
```

所以我可以检查`if(check_login($uname, $pword)){`而不是检查`if(check_login($uname, $pword)=='true'){`:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T04:13:54.637

为什么不检查它是否是`true`，然后从那里处理。

```
$login = check_login('user', 'pass');

if($login === true)
    loginUser(); //login was successful, finalize or whatever
else
    echo $login; //error message 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-16T15:55:18.220

您可以使用的另一种方法是在类中设置错误消息并稍后调用函数来获取它。

```
 class exampleClass {
        private $error_message = '';

        function exampleFunction($argument) {

            if($argument == 'lemons') {
                return true;
            } else {
                $this->error_message = 'Argument was not lemons.';
                return false;
            }

        }

        function getErrorMessage() {
            return $this->error_message;
        }

    }

    $example_session = new exampleClass();

    if( ! $example_session->exampleFunction('apples') )
        echo $example_session->getErrorMessage(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-27T23:17:02.243

我知道这是一个有点旧的帖子，但是，它得到了很多评论。因此，让我在这里为出色的答案添加另一个答案。

一种解决方案是通过引用传递变量，如 PHP 样式。[例子](http://php.net/manual/en/function.preg-match.php)

* * *

**伪代码：**

功能

```
 //Notice the '&' before the variable name. 
function check_login($user, $pass, &$message) {
    if(!isset($user) || $user == '') {
        $message["status"] = false;  //fail
        $message["message"] ='Please enter a valid username';
    }
    elseif(!isset($pass) || $pass == '') {
           $message["status"] = false;  //fail   
           $message["message"]=  'Please enter a valid password';
    }
    elseif (isset($pass) || $pass != ''){
         $message["status"] = true; //success
         $message["message"]=  'Username and password are valid';
        return true;
    }

    return false;//you can return from within the if condition if you wish
} 
```

电话：

```
/* $message variable will be assigned and populated in the function check_login() */

    if(check_login($uname, $pword, $message = []) === true )
    {
       //Do your stuff here
      //@message array is avaialble 
       echo message["message"];
    }
    else
    {
     //means false
     echo message["message"];
    } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-28T04:20:09.143

为什么不尝试抛出异常

```
function check_login($user, $pass) {
    if (empty($user)) {
        throw new InvalidArgumentException('Please enter a valid username');
    }
    if (empty($pass)) {
        throw new InvalidArgumentException('Please enter a valid password');
    }
    return true
}

// snip

try {
    check_login($userValue, $passValue);
} catch (Exception $e) {
    // an error occurred
    echo $e->getMessage();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T04:11:33.927

您可以使用 echo 并返回两者：

```
function check_login($user, $pass) {
    if(!isset($user) || $user == '') {
    echo "Please enter a valid username";
        return false;
    }
    else if(!isset($pass) || $pass == '') {
    echo "Please enter a valid password";
        return false;
    }
    else {
        return true;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T04:20:45.570

您可以使用变量而不是 echo 或 return 比 echo 更安全-假设您想在 html 标头中甚至在此之前运行此函数-您将看到什至在加载网站之前生成的文本.

改用变量！

```
 function check_login($user, $pass) {
            if(!isset($user) || $user == '') {
            $var = "Please enter a valid username";
$var = array();
    $var['msg'] = "Please enter a valid username";
    $var['error'] = "false";
    return $var;

            }
            else if(!isset($pass) || $pass == '') {
            $var = array();
    $var['msg'] = "Please enter a valid username";
    $var['error'] = "false";
    return $var;
            }
            else {
                return true;
            }
        } 
```

这就是您现在可以同时使用两者的方式，无论您想在哪里显示错误，请使用该变量，以及您想在哪里检查语句，用真假检查它。

无论您想在哪里使用带有错误消息的 $var 变量，都可以使用 -

```
echo $var['msg']; 
```

当你想检查错误使用时

```
$var['error'] == 'false' 
```

# java - Java 中的 NaN 常量魔法

> ID：12633415
> 
> 赞同：5
> 
> 时间：2012-09-28T04:06:19.283
> 
> 标签：java

> **可能重复：**
> [为什么 Double.NaN==Double.NaN 返回 false？](https://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false)

**NaN** = "NaN" 代表“不是数字”。如果浮点运算具有一些导致运算产生一些未定义结果的输入参数，则会产生“Nan”。例如，0.0 除以 0.0 在算术上是未定义的。取负数的平方根也是未定义的。

我试图在 Java 中使用 NaN 常量

```
public class NaNDemo {
    public static void main(String s[]) {
        double x = Double.NaN;
        double y = Double.NaN;

        System.out.println((x == y));
        System.out.println("x=" + x);
        System.out.println("y=" + y);
    }
} 
```

输出

```
false
x=NaN
y=NaN 
```

那么为什么 x==y 是假的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:12:11.197

[`NaN`](http://en.wikipedia.org/wiki/NaN)是一个概念，而不是一个值或一个数字。由于该概念可以表示多个非实数值（虚数、0/0 等），因此说任何特定的 NaN 等于任何其他 NaN 是没有意义的。

同样，您不能说[`Double::NEGATIVE_INFINITY`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#NEGATIVE_INFINITY)等于自身，因为无穷大也不是数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:13:15.933

**如果任一操作数为 NaN，则相等运算符 == 返回 false。**

[JSL](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)谈到 NaN：

> *   如果一个或两个操作数都是 NaN，则数值比较运算符 <、<=、> 和 >= 返回 false（第 15.20.1 节）。
> *   如果任一操作数为 NaN，则相等运算符 == 返回 false。
> *   特别是，如果 x 或 y 为 NaN，则 (x=y) 将为假。
> *   如果任一操作数为 NaN（第 15.21.1 节），则不等式运算符 != 返回 true。
> 
> 特别是，当且仅当 x 为 NaN 时 x!=x 为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:21:01.140

NaN - 非数字在使用 NAN 数字进行操作时没有任何意义。所以不能相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T04:11:16.807

两个`NaN`值不能彼此相等..您不知道它们代表什么未定义的值..而且您也不知道它们是如何表示的..

正如[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3)所引用的-

> 特殊数字`NaN (not-a-number)`是无序的，具有以下字符：
> 
> *   如果一个或两个操作数都是 NaN，则数值比较运算符 <、<=、> 和 >= 总是返回 false。
> *   如果任一操作数为 NaN，则相等运算符 == 返回 false。
> *   如果任一操作数为 NaN，则不等式运算符 != 返回 true。

如果你这样定义它们： -

```
 Double a = new Double(Double.NaN);
    Double b = new Double(Double.NaN);

    if (a == b) {
        System.out.println("true");   /** You will get true **/
    } 
```

# android - 异步邮件发送android

> ID：12633417
> 
> 赞同：0
> 
> 时间：2012-09-28T04:06:44.823
> 
> 标签：android, email, android-intent, sendmail

我正在创建一个应用程序来发送邮件。但我想完成（不等待发送邮件）我在发送按钮上的活动单击并在后台进行邮件发送活动（使邮件发送异步）。任何有新想法的人请分享.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:32:30.367

如果您想使用异步任务，请试试这个。我在我的应用程序中使用很多时间进行后台工作。

```
private class EmailSending extends AsyncTask<Object, Integer, Object> {

        @Override
        protected void onPreExecute() {

             ProgressDialog progress = ProgressDialog.show(Activity.this, "",
                    "Loading...");

            super.onPreExecute();
        }

        @Override
        protected Object doInBackground(Object... params) {
            //do hard work here
                                return params;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            progress.getProgress();

        }

        @Override
        protected void onPostExecute(Object result) {

            progressBar.dismiss();

            super.onPostExecute(result);
        }
    } 
```

# php - 如何插入 在 foreach 循环中每 10 条记录

> ID：12633419
> 
> 赞同：7
> 
> 时间：2012-09-28T04:07:09.707
> 
> 标签：php, css, codeigniter

```
<?php foreach($products as $product) : ?>

<li><a href="<?php echo base_url(); ?>main/products/<?php echo $product->id; ?>">
<?php echo $product->name; ?> </a></li>

<?php endforeach; ?> 
```

所以上面的代码获取a中的所有记录`DB`并生成链接。表中有 100 条记录 - 我想将设计分成 5 列。所以我会这样做，`CSS`但我需要能够附上

```
<ul> on every 20 records</ul> 
```

我怎样才能`count`循环并做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T04:17:44.560

这样做，这将解决你的问题

```
 <?php 
 *$i = 0;*
 echo "<ul>";
 foreach($products as $product) : 
 if($i % 20 == 0) echo "</ul><ul>"; 
?>
<li><a href="<?php echo base_url(); ?>main/products/<?php echo $product->id; ?>">
<?php echo $product->name; ?> </a></li>
<?php 
 //if($i % 20 == 0) echo "</ul>";
 $i += 1;
 endforeach; 
 echo "</ul>";
 ?> 
```

*edit-set $i = 0; 因为数组从 [0] 计数，通过将其设置为 [1] 使得第一个`col`有 19 而不是 20。通过将其设置为 [0] 每个列有 20。:) 再次感谢 ~fabio

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T04:11:26.070

这应该工作

```
<?php $products = array('1','2','3','4','5','6','8', 9, 10, 11, 12);?>
<?php $count = 0?>
<?php foreach($products as $product) : ?>
<?php $count = $count + 1; ?>
<?= (($count == 5) ? "<ul>" : '' )?>
<li><a href="<?php echo base_url(); ?>main/products/"></a></li>

<?= (($count == 5) ? "</ul>" : '')?>
<?php (($count == 5) ? $count = 0 : '' )?>
<?php endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T04:12:02.240

```
 <?php 
     $i = 1;
     echo "<ul>";
     foreach($products as $product) : 
     if($i % 20 == 0) echo "</ul><ul>"; 
    ?>
    <li><a href="<?php echo base_url(); ?>main/products/<?php echo $product->id; ?>">
    <?php echo $product->name; ?> </a></li>
    <?php 
     $i += 1;
      endforeach; echo "</ul>"; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T11:14:43.710

```
<?php    $i=0;
         echo "<ul>";
         foreach($products as $product) :
         if($i%8==0&&$i!=0) echo "</ul><ul>"; ?>

         <li>
          <a href="<?php echo base_url(); ?>main/products/<?php echo $product->id; ?>">
           <?php echo $product->name; ?>
          </a>
         </li>

<?php    $i+=1;
         endforeach;
         echo "</ul>"; ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T04:11:37.257

签出 php 的 array_slice 方法。它将允许您将数组分割成更小的数组，每个数组包含 20 个对象。

# javascript - 如何获取从 javascript 函数返回的值？

> ID：12633423
> 
> 赞同：0
> 
> 时间：2012-09-28T04:07:31.130
> 
> 标签：javascript

> **可能重复：**
> [ajax调用的结果来了后如何返回函数的值？](https://stackoverflow.com/questions/12550002/how-to-return-the-value-of-a-function-after-the-result-of-an-ajax-call-has-come)

我有一个用于计算控制器中项目数量的功能。

```
function GetQtyItem() {
  var qty;
  var urlQuantity = "Quotation/CountQuantity";
  $.getJSON(urlQuantity, function (quantity) {
      qty = quantity.ja;
  });
  alert(qty); //3
  return qty;
} 
```

我将文件名包含在正确的部分中，并在我的 asp.net mvc 项目的另一个视图中调用了此函数：

```
<script language="javascript" type="text/javascript">
  var i = GetQtyItem();
  alert(i);
</script> 
```

但是警报对话框中的结果是`Undefined`.

谁能告诉我，我怎样才能用正确的值（3）提醒它。先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:09:55.970

$.getJSON 是一个 AJAX 请求......这需要时间。您必须等待数据返回，然后通知结果。

尝试这个：

```
var qty, i;
function GetQtyItem() {
  var urlQuantity = "Quotation/CountQuantity";
  return $.getJSON(urlQuantity, function (quantity) {
      qty = quantity.ja;
      alert('Request is done');
  });
}

i = GetQtyItem();
i.done(function() {
  alert("Quantity is " + qty);
}); 
```

# google-chrome - Chrome 浏览器重新加载选项新功能

> ID：12633425
> 
> 赞同：147
> 
> 时间：2012-09-28T04:07:41.707
> 
> 标签：google-chrome

我今天在 Chrome 中发现了这个新功能。当您将鼠标悬停在刷新按钮上时，您会看到此工具提示：“重新加载此页面，按住以查看更多选项”，当我这样做时，我会看到这三个很棒的选项。1\. 正常重载 2\. 硬重载 3\. 清空缓存和硬重载（我相信这是非常有用的选项）

但问题是我无法在所有标签/网页中始终如一地看到它。只有本地文件，甚至不一致。这里有人知道这是如何启用/禁用的吗？

我尝试使用谷歌搜索，但没有找到任何相关内容。无论哪种方式，我相信对于所有开发人员来说，它都是一个很棒的功能。

![谷歌浏览器重新加载选项](../Images/1d5afe099d64c8a8f44e520b145217e1.png)

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-09-28T22:30:03.123

如果您打开了开发者工具（F12 / Ctrl-Shift-I / Cmd + Opt + I，Chrome 菜单 → 更多工具 → 开发者工具），然后会出现重新加载菜单。

[![在此处输入图像描述](../Images/3a763736bbf85600bfbebdb222ee5817.png)](https://i.stack.imgur.com/pcKVw.png)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2017-01-22T20:33:35.300

在安卓手机上刷新 Chrome 浏览器屏幕

1.  按住屏幕顶部的 URL 地址
2.  地址将突出显示，键盘将重新出现。
3.  点击返回（或输入）箭头

并且浏览器将转到突出显示的 url（刷新）。

# c++ - 如何在 Arduino 中包含 clock_t？

> ID：12633430
> 
> 赞同：3
> 
> 时间：2012-09-28T04:08:20.803
> 
> 标签：c++, arduino, clock

我正在尝试使用我自己创建的计时器库，它在其中使用了clock_t。当我编译草图时，我不断收到错误。这是我不断收到的错误`error: 'clock_t' in namespace 'std' does not name a type`。

甚至可以使用clock_t。我编写的库在 c++ 编译器上运行良好，但不是在这里。

我是这个 Arduino 的新手，任何帮助都会很好。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:15:04.887

我不熟悉 Arduino，但在 C++ 中你必须`#include <ctime>`. 在clock_t为您工作的C++实现中，ctime可能是通过另一个头文件间接包含的，而Arduino对另一个头文件的实现不包括ctime。

这是 C++ 的问题；其他标准头文件中包含的头文件不是由标准定义的，因此当您无法直接包含正确的头文件时，不同的实现可能会产生不同的结果，因为每个实现使用不同的间接包含。为避免这种情况，您应该小心始终直接包含您使用的任何标准标头。这意味着您需要了解哪些标准头文件提供了哪些标准工具。[http://en.cppreference.com/w/](http://en.cppreference.com/w/)可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:37:42.123

Arduino 与[AVR Libc](http://www.nongnu.org/avr-libc/)的链接，大部分看起来类似于 C 标准库的东西都来自它。

据我所知，`clock_t`AVR Libc 中没有。我在库的源文件中搜索，并查看了[文档](http://www.nongnu.org/avr-libc/user-manual/modules.html)，但没有找到。AVR Libc 中也没有`time.h`。

根据[Arduino 常见问题解答](http://arduino.cc/en/Main/FAQ)：

> ... Arduino 语言只是一组可以从您的代码中调用的 C/C++ 函数。您的草图会进行微小的更改（例如，函数原型的自动生成），然后直接传递给 C/C++ 编译器 (avr-g++)。[avr-g++ 支持的](http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_cplusplus)所有标准 C 和 C++ 构造都应该在 Arduino 中工作。...

在[AVR-libc 常见问题解答](http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_cplusplus)中：

> 我可以在 AVR 上使用 C++ 吗？
> 
> 但是，目前不支持 libstdc++，这是完整 C++ 实现所需的标准支持库。这对可编译的 C++ 程序施加了许多限制。其中有：
> 
> *   显然，没有任何 C++ 相关的标准函数、类和模板类可用。

因此，Arduino 没有为您提供 C++ 标准库 - 所以`ctime`(C++) 和 (C) 一样不可用`time.h`。也就是说，您很可能无法`clock_t`在 Arduino 环境中使用。

# jquery - Jquery Html 获取内容

> ID：12633432
> 
> 赞同：0
> 
> 时间：2012-09-28T04:08:26.453
> 
> 标签：jquery, html, jquery-ui

我对 jquery 有一些问题。我有一些

****每个ul li 关闭**后的标签**

 ****我想在点击 li 时选择特定 p 标签的内容

在我的 HTML 中

```
<div class="content">
      <p><span style="color: #d10018; font-family: Helvetica, Arial, sans-serif; font-size: 15pt; line-height: normal; text-align: left; background-color: #ffffff;">VALUES CREATE TRUST</span></p>
<h1><span style="font-size: 9pt;">From customer </span></h1>
<ul>
<li>Appreciations</li>
</ul>
<p style="margin-left: .75in;" class="ulptag">Your company culture is our groundwork. We select the candidates according to professional, objective criteria, but also pay attention that every candidate supplements the company/team best possible. Because pleasure at work increases the life quality of every individual.</p>
<p style="margin-left: .75in;" class="ulptag">With personal contact, we ensure that the special needs of our customers are fulfilled precisely.</p>
<p style="margin-left: .75in;" class="ulptag">Everybody benefits from our selection process. Candidates receive a comprehensive feedback with the results of the potential diagnostics. You as a company benefit from the appreciative handling of every candidate.</p>
<p>&nbsp;</p>
<ul>
<li>Structured procedure for enjoying mutual success.</li>
</ul>
<p style="margin-left: .75in;" class="ulptag"> successful decisions.</p>
<p style="margin-left: .75in;" class="ulptag">position.</p>
<p style="margin-left: .75in;" class="ulptag">every position.</p>
<p>&nbsp;</p>
<ul>
<li>Using innovations.</li>
</ul>
<p style="margin-left: .75in;" class="ulptag".n high demand also among competitors.</p>
<p style="margin-left: .75in;" class="ulptag">Advantage is assured by well-founded branch experience and knowledge of current developments in the respective markets.</p>
<p style="margin-left: .75in;">. our above-average dedication and effort.</p>

<p style="margin-left: .75in;" class="ulptag">&nbsp;</p>
    </div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:22:49.470

```
$(document).ready(function(){
    $("ul").nextAll('p').each(function(){
         $(this).click(function(){
              alert($(this).text());
         });
    });
}); 
```

请查看此[http://jsfiddle.net/UMquF/](http://jsfiddle.net/UMquF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:52:29.593

```
$(".content>ul").each(function() {
  $(this).click(function() {            
     console.log($(this).nextUntil(":not(p)").text());
  });
}); 
```

[jsFiddle](http://jsfiddle.net/T99WA/1/)

更新：这是解释

*   $(".content>ul") 将选择所有“ul” elem.s 并分配[点击](http://api.jquery.com/click/)事件处理程序。
*   在每个事件处理程序中，我们选择所有“跟随”兄弟姐妹，“直到”通过使用此选择器“:not(p)”找到非 p 元素。请参阅[nextUntil](http://api.jquery.com/nextUntil/)，[而不是](http://www.quirksmode.org/css/not.html)
*   在我们选择兄弟姐妹之后，我们只是从中提取[文本](http://api.jquery.com/text/)。****

# javascript - 有没有办法让 jslint 在我的 javascript 的下一行使用花括号？

> ID：12633434
> 
> 赞同：3
> 
> 时间：2012-09-28T04:08:30.057
> 
> 标签：javascript, jquery, jslint

我改变了我的编码风格

```
function getParams(entity) {
    "use strict";
    var accountID = store.getItem('AccountID'),

    switch (entity) {
        case "Topic": 
```

至

```
function getParams(entity) 
{

    "use strict";
    var accountID = store.getItem('AccountID'),

    switch (entity)
    {
        case "Topic": 
```

现在我收到任何 jslint 错误，例如：

警告 6 JS Lint：在 ')' 和 '{' 之间需要一个空格。警告 9 JS Lint：第 9 列应为“var”，而不是第 5 列。

我检查了选项，但找不到任何取消选择与行位置相关的选项。另外，如果有的话，我可以将它添加到我的文件顶部吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:32:26.967

由于这个原因，建议在 JavaScript 中将左大括号放在同一行：

```
function foo()
{
  return
  {
    a: 'foo'
  }
}

foo().a // error 
```

这更像是一个建议而不是一个解决方案，但不可能在没有新行的评论中解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:28:19.697

试试这个，jSLint 使用字符串 javascript 编码规则来检查你的 javascript..

```
var store = {};
function getParams(entity) {
    "use strict";
    var accountID = store.getItem('AccountID');

    switch (entity) {
    case "Topic": 
        accountID = '0';
        break;
    }
} 
```

对于一个函数，它只需要在`)`和`{`字符之间有 1 个空格 .. 这不是问题，但它是一个编码规则..

# objective-c - QuickBlox 问题

> ID：12633436
> 
> 赞同：1
> 
> 时间：2012-09-28T04:08:35.123
> 
> 标签：objective-c, ipad, ios5, quickblox

我一直在尝试根据 QuickBlox 网站提供的示例在我的 iOS 应用程序中实现一个简单的聊天模块。

在此处查看/下载：>> [http://quickblox.com/developers/SimpleSample-chat_users-ios](http://quickblox.com/developers/SimpleSample-chat_users-ios)

我遇到的问题是应该加载用户和房间的表没有加载任何内容。

我已经修改了我的代码，看起来与示例中提供的完全一样（我基本上导出了他们的类），并且根据网站上提供的示例，我与 .h 文件的连接是正确的。

与您的示例唯一不同的是我使用的是故事板和弧。

除了这个问题，其他一切都运行正常。只有原始样本上也有警告，我将其丢弃为导致我的表未加载的原因。

我已经在网上寻找解决方案，但文档是这个问题的限制。

有人知道在您的应用程序中实现简单聊天室的另一种方法吗？？？

任何想法或建议将不胜感激..

编辑使用下面的链接下载一个简单的 xcode 项目，说明上述问题..希望有人能找到我所缺少的

[http://dl.dropbox.com/u/20030125/QBChatTest.zip](http://dl.dropbox.com/u/20030125/QBChatTest.zip)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:19:41.540

我发现了问题所在。您创建会话，但之后，您不会调用检索所有用户的查询。

因此，将 MainViewController.m 类添加到方法 - (void)completedWithResult:(Result *)result 下一行代码：

```
- (void)completedWithResult:(Result *)result
{
    if([result isKindOfClass:[QBAAuthSessionCreationResult class]]){
        if (result.success)
        {
            [self qbApplicationDidAuth];
        }
    }

... 
```

然后，你会看到[http://qblx.co/SRXgmJ](http://qblx.co/SRXgmJ)

# android - 可以将菜单项添加到窄屏幕上的选项卡式操作栏吗？

> ID：12633437
> 
> 赞同：1
> 
> 时间：2012-09-28T04:08:37.237
> 
> 标签：android, android-layout, tabs, android-actionbar, android-tabs

我在一个狭窄的屏幕上有一个选项卡式操作栏，如下图所示：

![在此处输入图像描述](../Images/3ca9f1c2bbd8a1dfbf02626a216cfb1c.png)

我还想将“始终显示”菜单项挤压到主操作栏。但是，当我将菜单项引入布局时，会在选项卡栏的正下方创建仅包含菜单项的第二个操作栏。

当然，在添加菜单项之前，我已经禁用了操作栏图标和标题（使用`setDisplayShowHomeEnabled(false)`和`setDisplayShowTitleEnabled(false)`）来获取单行操作栏。

是否可以使用标准操作栏来完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:53:43.403

根据 Adam Powell 在相关 Google+ 线程上的回复：

> 要回答原始问题，不，您想要的不是操作栏的受支持行为。

# java - 由于密钥库文件导致的 ssl 握手异常

> ID：12633439
> 
> 赞同：0
> 
> 时间：2012-09-28T04:08:40.987
> 
> 标签：java, soap, sslexception

我有一个请求，我需要将 db 上的内容从服务器 A 中运行的应用程序写入另一个实例服务器 B 中运行的相同应用程序。

数据库读写是通过 SOAP API 的

两台服务器都有自己的 client.truststore 文件。

从使用服务器 A 的 client.trustsrore 的独立服务器 C，我能够读取写入服务器 A 的数据库并且使用服务器 B 的客户端信任库能够读取写入服务器 B 的数据库。

由于要求是从服务器 A 读取并写入服务器 B。我在两个服务器中都引入了一个新的密钥库文件，并正确设置了 system.properties（密钥库位置和密码）。并且此密钥库已正确复制到具有权限的两台服务器中。

我使用私钥创建了证书，然后使用 keytool 命令创建了密钥库文件。

由于将密钥库文件保存在 2 服务器中不起作用。它总是抱怨unknown_certificate。我尝试将证书导入到 /$JAVA_HOME/lib/security/ 下的 cacerts。但即使这样也给出了握手异常的未知证书。

还有什么我想做但我想念的吗？

问候
Dheeraj Joshi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:54:14.193

应用程序服务器的证书必须与该服务器的主机名匹配。这可能是这里的问题，因为您有两个不同的服务器具有两个不同的主机名。

当您被要求提供您的名字和姓氏时，您应该在证书生成过程中输入有效的主机名：

```
What is your first and last name?
[Unknown]:  myserver.domain.com 
```

但在那种情况下，我不确定你能做些什么来完成你的任务。也许您应该为您的服务器提供两个具有不同相应主机名的不同证书。但是这些证书应该由您的数据库信任的一个父证书签名。类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:06:36.937

好的解决方案很简单。使用两台服务器的证书创建新商店

```
keytool -import -alias <alias> --keystore <newstore> -file server1.crt -storepass changeit
keytool -import -alias <alias> --keystore <newstore> -file server2.crt -storepass changeit 
```

现在 newstore 可用于 SSL 通信。

问候
Dheeraj Joshi

# android - AlarmManager 警报未被删除/取消。我究竟做错了什么？

> ID：12633441
> 
> 赞同：2
> 
> 时间：2012-09-28T04:08:58.447
> 
> 标签：android, alarmmanager

我正在使用`AlarmManager`+`NotificationManager`在特定时间显示通知。但是，我无法通过代码取消警报。即使我删除了警报，通知/警报也会继续触发。有人可以查看我的代码并检查我是否做错了什么？非常感谢你！:)

**这就是我设置警报/通知的方式：**

```
Intent intent = new Intent(this, ViewLocalReminders.class);
startActivity(intent);

//Get the primary key of the reminder that has just been saved.
Cursor cursor = remindersDAO.reminderNotification(this);
cursor.moveToLast();
int reminderIdColumnIndex = cursor.getColumnIndex("_id");
reminderPrimaryKey = cursor.getInt(reminderIdColumnIndex);

//Get the name of the reminder that has just been saved.
cursor.moveToLast();
int reminderNameColumnIndex = cursor.getColumnIndex("name");
reminderName = cursor.getString(reminderNameColumnIndex);

cursor.close();

Toast toast = Toast.makeText(context, context.getString(R.string.reminder_saved), Toast.LENGTH_LONG);
toast.show();

c.set(mYear, mMonth, mDay); //Set the notification date.
c.set(Calendar.HOUR_OF_DAY, pHour); //Set the notification hour.
c.set(Calendar.MINUTE, pMinute); //Set the notification minute.
c.set(Calendar.SECOND, 0); //Set the notification second (always 0).

//Use AlarmManager to trigger the notification/alarm.
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

//PendingIntent to launch activity when the alarm triggers.                    
Intent i = new Intent("com.utilityapps.Blah.DisplayReminderNotification");

//Assign the reminder's primary key as the notification ID.
i.putExtra("Reminder_Name", editRemindMeTo.getText().toString());
i.putExtra("Reminder_Primary_Key", reminderPrimaryKey);

PendingIntent displayIntent = PendingIntent.getActivity(getBaseContext(), reminderPrimaryKey, i, 0);               

//Set the alarm to trigger.
alarmManager.set(AlarmManager.RTC_WAKEUP, c.getTimeInMillis(), displayIntent); 
```

**这就是我取消警报/通知的方式：**

```
Intent i = new Intent("com.utilityapps.Blah.DisplayReminderNotification");
PendingIntent displayIntent = PendingIntent.getService(context, (int) reminderID, i, PendingIntent.FLAG_CANCEL_CURRENT);

AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE); 

alarmManager.cancel(displayIntent);
displayIntent.cancel(); 
```

那么我需要在我的代码中进行一些更改才能使其正常工作吗？谢谢！:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T04:19:50.603

在设置和取消警报时，您的待处理意图不一样。为两者创建相同的待处理意图。希望它会起作用。

取消闹铃

```
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

Intent i = new Intent("com.utilityapps.Blah.DisplayReminderNotification");

PendingIntent displayIntent = PendingIntent.getActivity(getBaseContext(), reminderPrimaryKey, i, 0);               

alarmManager.cancel(displayIntent); 
```

# c - 二维数组指针符号适用于一个版本，但不适用于另一个版本......我认为

> ID：12633442
> 
> 赞同：1
> 
> 时间：2012-09-28T04:09:11.473
> 
> 标签：c, pointers, multidimensional-array

当我对 32 位版本使用以下函数定义时，一切正常：

```
void intensifyPixel(int x, int y, double distance, unsigned long *grid[framebufferheight][framebufferwidth], unsigned long color){
    unsigned long intensity; 
    //assign intensity returned from filter function 
    intensity = filter ((floor(fabs (distance)) + .5), color);
    //write intensity value to x,y coordinates of framebuffer memory    
    *( *(grid + y) + x) = intensity;
} 
```

现在我正在尝试使用相同的代码实现一个 16 位版本，除了数组的 unsigned short 而不是 unsigned long

```
void intensifyPixel(int x, int y, double distance, unsigned short *grid[framebufferheight][framebufferwidth], unsigned short color){
    unsigned short intensity; 
    //assign intensity returned from filter function 
    intensity = filter ((floor(fabs (distance)) + .5), color);
    //write intensity value to x,y coordinates of framebuffer memory    
    *( *(grid + y) + x) = intensity;
} 
```

我已经相应地更改了过滤器函数的返回类型。

这是有效代码的链接（32 位版本）：[http ://codepad.org/GsK00pd5](http://codepad.org/GsK00pd5)

这是无法正常工作的代码的链接（16位版本：[http ://codepad.org/6eAeTful](http://codepad.org/6eAeTful)

那里有很多。我真的很难缩小这个问题的范围，对此我深表歉意。

我希望你们中的一个人能看到我看不到的东西。

值得一提的是，这里的重点是将指向二维数组的指针传递给 intensifyPixel 函数。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:52:32.497

定义为参数`unsigned long *grid[framebufferheight][framebufferwidth]`，`grid` **不是**

指针数组的**数组**`framebufferheight`，**它**是`framebufferwidth``unsigned long`

 ****指向指针**数组的`framebufferwidth`指针`unsigned long`。

这是因为，在 C 中，数组永远不会作为参数整体传递。不是传递一个数组，而是传递指向其第一个元素的指针，尽管有语法和什么不是。再看看我说`grid`的是和不是。这就是本质。

现在，`*( *(grid + y) + x)`或者，等效地，`grid[y][x]`解析为指向`unsigned long`.

将整数分配给指针不太可能是您想要的。

您可能希望以`grid`这种方式重新定义参数：

```
unsigned long grid[framebufferheight][framebufferwidth] 
```

或以这种方式等效：

```
unsigned long (*grid)[framebufferwidth] 
```

所以`grid[y][x]`会解决`unsigned long`而不是指向一个。

函数外部的帧缓冲区可以静态分配：

```
// 2-d array of unsigned longs
unsigned long grid[framebufferheight][framebufferwidth]; 
```

或动态：

```
// pointer to an array of framebufferwidth unsigned longs
unsigned long (*grid)[framebufferwidth] = malloc(sizeof(unsigned long) * framebufferheight * framebufferwidth); 
```

您将其按原样传递给`intensifyPixel()`:`intensifyPixel(..., grid, ...)`并以相同的方式访问：`grid[y][x] = something;`

**更新**：如果尽管我试图解释它你仍然没有正确或忘记一些东西，请看一个更完整的例子：

```
#include <stdio.h>
#include <stdlib.h>

#define framebufferheight 20
#define framebufferwidth  64

void visualize(unsigned long (*grid)[framebufferwidth])
{
  int y, x;
  for (y = 0; y < framebufferheight; y++)
  {
    for (x = 0; x < framebufferwidth; x++)
      printf("%c", (char)grid[y][x]);
    printf("\n");
  }
}

void drawBox(unsigned long (*grid)[framebufferwidth],
             int x1, int y1, int x2, int y2, char c)
{
  int y, x;
  for (y = y1; y <= y2 ; y++)
    for (x = x1; x <= x2; x++)
      grid[y][x] = c;
}

void clear(unsigned long (*grid)[framebufferwidth], char c)
{
  drawBox(grid, 0, 0, framebufferwidth - 1, framebufferheight - 1, c);
}

int main(void)
{
  {
    unsigned long (*grid)[framebufferwidth] = malloc(sizeof(unsigned long) * framebufferheight * framebufferwidth);
    clear(grid, '.');
    drawBox(grid, 1, 1, 10, 5, '1');
    drawBox(grid, 40, 10, 55, 18, '2');
    grid[framebufferheight / 2][framebufferwidth / 2] = '+';
    visualize(grid);
  }

  {
    unsigned long grid[framebufferheight][framebufferwidth];
    clear(grid, ',');
    drawBox(grid, 1, 1, 10, 5, 'a');
    drawBox(grid, 40, 10, 55, 18, 'b');
    grid[framebufferheight / 2][framebufferwidth / 2] = '*';
    visualize(grid);
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/QOkw6)）：

```
................................................................
.1111111111.....................................................
.1111111111.....................................................
.1111111111.....................................................
.1111111111.....................................................
.1111111111.....................................................
................................................................
................................................................
................................................................
................................................................
................................+.......2222222222222222........
........................................2222222222222222........
........................................2222222222222222........
........................................2222222222222222........
........................................2222222222222222........
........................................2222222222222222........
........................................2222222222222222........
........................................2222222222222222........
........................................2222222222222222........
................................................................
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,aaaaaaaaaa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,aaaaaaaaaa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,aaaaaaaaaa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,aaaaaaaaaa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,aaaaaaaaaa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bbbbbbbbbbbbbbbb,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, 
```**

# javascript - SVG 路径字符串上的布尔运算

> ID：12633444
> 
> 赞同：5
> 
> 时间：2012-09-28T04:09:39.370
> 
> 标签：javascript, svg, raphael, computational-geometry, vector-graphics

我遇到了一个概念上困难的问题。

简而言之，我需要通过不同的布尔运算找到两个向量路径组合的向量路径。例如并集、差集、交集和减法。如果我能像 Canvas 的 globalCompositeOperation 那样做，那就太好了。

我到底该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T04:18:18.287

有一个 JavaScript 库允许在路径是多边形的情况下对 SVG 路径进行布尔运算。使用足够高的采样，贝塞尔曲线可以多边形化到如此高的质量，以至于视觉结果几乎与真实曲线相同。

该库称为[JavaScript Clipper](http://sourceforge.net/p/jsclipper/wiki/Home/)，它是[Angus Johnson 的 Clipper](http://www.angusj.com/delphi/clipper.php)（用 Delphi、C++、C# 和 Python 编写）的一个端口，而后者又基于[Bala R. Vatti 的裁剪算法。](http://dl.acm.org/citation.cfm?id=129906)它能够处理所有多边形情况，包括自相交的情况。该库有许多额外的功能，包括所有布尔运算和用于减少节点数的节点减轻算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:36:20.063

如果您需要创建由许多其他形状相交、联合等组成的新几何形状，您要么必须自己在脚本中处理它，要么使用矢量图形编辑器（Inkscape 和 Illustrator 都提供此功能）来为你做这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T06:35:15.583

globalCompositeOperation 的等价物是 SVG 中的 feComposite 过滤器。这是一个在 Opera 中工作[的画布](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)中看起来与此类似的[示例。](http://www.w3.org/Graphics/SVG/Test/20110816/harness/htmlObjectApproved/filters-composite-02-b.html)

# java - 从类中设置 jlabel 中的文本

> ID：12633445
> 
> 赞同：1
> 
> 时间：2012-09-28T04:09:39.043
> 
> 标签：java, eclipse, netbeans, jlabel, settext

如何设置`JLabel`要输出的文本`runShellScript(unixCommand)`

```
String unixCommand = "echo testing"; 
runShellScript(unixCommand);
JLabel labelel = new JLabel("");
labelel.setText(runShellScript(unixCommand)); <----still error 
```

这是我所有的代码

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

import ch.ethz.ssh2.Connection;
import ch.ethz.ssh2.Session;
import ch.ethz.ssh2.StreamGobbler;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JLabel;

public class swcls extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void runShellScript(String unixCommand) throws IOException, InterruptedException {

        String hostname = "192.168.3.101";
        String username = "root";
        String password = "password";

        boolean isAuthenticated = false;

        try
        {
            Connection conn = new Connection(hostname);

            conn.connect();

            isAuthenticated=conn.authenticateWithPassword(username, password);

            if (isAuthenticated == false)
                throw new IOException("Authentication failed.");

            Session sess = conn.openSession();

            //sess.execCommand("cd /;ls -l");
            sess.execCommand(unixCommand);

            InputStream stdout = new StreamGobbler(sess.getStdout());
            InputStream stderr = new StreamGobbler(sess.getStderr());

            InputStreamReader insrout=new InputStreamReader(stdout);
            InputStreamReader insrerr=new InputStreamReader(stderr);

            BufferedReader stdoutReader = new BufferedReader(insrout);

            BufferedReader stderrReader = new BufferedReader(insrerr);

            while (true)
            {
                String line = stdoutReader.readLine();
                if (line == null)
                {
                    break;
                }
                System.out.println(line);
            }

            while (true)
            {
                String line = stderrReader.readLine();
                if (line == null)
                {    break;}
                System.out.println(line);
            }

            sess.close();

            conn.close();
        }
        catch (IOException e)
        {
            e.printStackTrace(System.err);
            System.exit(2);
        }

    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    swcls frame = new swcls();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     * @throws InterruptedException 
     * @throws IOException 
     */
    public swcls() throws IOException, InterruptedException {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JPanel panel = new JPanel();
        contentPane.add(panel, BorderLayout.CENTER);

        String unixCommand = "echo testing"; 
        runShellScript(unixCommand);

        JLabel labelel = new JLabel("");
        labelel.setText(runShellScript(unixCommand));

        GroupLayout gl_panel = new GroupLayout(panel);
        gl_panel.setHorizontalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(110)
                    .addComponent(labelel)
                    .addContainerGap(268, Short.MAX_VALUE))
        );
        gl_panel.setVerticalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(74)
                    .addComponent(labelel)
                    .addContainerGap(164, Short.MAX_VALUE))
        );
        panel.setLayout(gl_panel);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:14:55.497

返回什么`runShellScript(unixCommand);`？

检查[这个](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setText%28java.lang.String%29)

`public void setText(String text)`

它只需要一个字符串。如果您能说出您面临的错误，这也会很有帮助。

# java - JDBC插入语句不起作用

> ID：12633449
> 
> 赞同：0
> 
> 时间：2012-09-28T04:10:11.910
> 
> 标签：java, jdbc

我正在尝试创建一个在数据库中插入数据的 java 应用程序。应用程序相当简单。它从用户那里获取 3 个输入并将该输入插入到数据库中。一切正常，但执行插入语句时出现 sql 错误。这是代码片段。

```
sa.executeUpdate("INSERT INTO history (to, subject, body)"+"VALUES("+ DATA1 + "','" + DATA2 + "','" +DATA3+ "')'"); 
```

我确定我在声明中遇到了双引号和单引号的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T04:50:28.320

你应该总是用`PreparedStatement`s 来做这种事情。它会为您处理报价并保护您免受 SQL 注入攻击：

```
PreparedStatement statement = connection.prepareStatement("INSERT INTO history (to, subject, body) VALUES (?, ?, ?)");
statement.setString(1, DATA1);
statement.setString(2, DATA2);
statement.setString(3, DATA3);
statement.execute(); 
```

不仅如此，数据库驱动程序还可以编译和缓存准备好的语句，从而有可能提高它们的效率。

请注意，`setString`索引是从 1 开始的，而不是从零开始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:28:15.910

```
sa.executeUpdate("INSERT INTO history (to, subject, body)"+"VALUES("+ DATA1 + "','" + DATA2 + "','" +DATA3+ "')'"); 
```

此代码将产生如下查询：

```
INSERT INTO history (to, subject, body)VALUES(vinesh','raja','1111')' 
```

您必须在最后一个 ')' 之后删除单引号，并在 'VALUES' 之后添加单引号。

而是尝试以下代码：

```
sa.executeUpdate("INSERT INTO history (to, subject, body)"+"VALUES('"+ DATA1 + "','" + DATA2 + "','" +DATA3+ "')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:57:12.673

正如 Vinesh 提出的解决方案，我只想告诉你，最好将一个变量作为

```
String query="SQL QUERY";
then just do System.out.println(query); 
```

然后运行线路，

```
PreparedStatement statement = connection.prepareStatement(query) 
```

这样，您将正确识别形成的最终查询。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T05:22:43.487

1.而不是使用字符串类使用字符串缓冲区或字符串生成器，这是一个可变类。另一方面，字符串类是不可变的。您可以使用字符串缓冲区

1.  `String Buffer stbuffer = new String Buffer();`

    ```
    stbuffer.append("insert into ");
    stbuffer.append("<tablename> ");
    stbuffer.append("<fields >");
    stbuffer.append(" values");
    stbuffer.append("(+");
    stbuffer.append(String);
    stbuffer.append(")");  ....etc 
    ```

2.  您可以使用获得最终的字符串表示`stbufffer.toString();`

3.  您可以插入此类查询来执行`update()`方法，例如`ins.executeUpdate(stbuffer.toString);`

4.  您也可以像这样将它用于 Insert 语句和 Prepared Statement

# javascript - Javascript滚动到功能，如何用javascript检测标题的高度？

> ID：12633450
> 
> 赞同：0
> 
> 时间：2012-09-28T04:10:12.837
> 
> 标签：javascript, frameworks, header

我有一个有点简单的问题，我似乎无法弄清楚。我对javascript有点陌生。

我正在制作一个带有固定标题的单页网站。我的导航由 javascript 函数提供支持，该函数滚动到链接的 div 并将顶部偏移 80 像素（我的标题的高度），并且效果很好。

这是javascript：

```
$(document).ready(function(){

    $('#nav li a').click(function(){

        var el = $(this).attr('href');
        var elWrapped = $(el);

        scrollToDiv(elWrapped,40);

        return false;

    });

    function scrollToDiv(element,navheight){
        var offset = element.offset();
        var offsetTop = offset.top;
        var totalScroll = offsetTop - 80 + "px";

        $('body,html').animate({
                scrollTop: totalScroll
        }, 500);

    }

}); 
```

我的问题是，当我的网站在移动设备上加载时，我的标题会增长到大约 215 像素（我正在使用骨架框架），并且滚动到功能仍然滚动 80 像素。如何使用javascript动态检测标题的高度并将其插入此滚动以运行而不是使用固定高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:16:14.963

[$("#header").outerHeight()](http://api.jquery.com/outerHeight/)将返回#header 元素的总高度。

# objective-c - 迭代字符串的最快方法，如果存在则替换特定项目？

> ID：12633453
> 
> 赞同：0
> 
> 时间：2012-09-28T04:10:32.227
> 
> 标签：objective-c, nsdictionary

我从用户那里收到句子或文本段落的字符串。我需要检查每个字符串并查看是否存在特定单词。如果确实如此，则需要将其替换为与找到的单词相关的特定单词。

我想也许使用 NSDictionary 并让**关键字**是要搜索的单词，而**对象**是要替换的单词。遍历字典。- 我认为它很接近但需要一些指导。

```
NSString *inputText = userInput;
NSString *finalOutput;

NSDictionary *dic = [[NSDictionary alloc] initWithObjectsAndKeys: 
                     @"awesome", @"dumb", 
                     @"because", @"apple", nil];

[dic enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    finalOutput = [inputText stringByReplacingOccurrencesOfString:key withString:obj];        
}]; 
```

所以基本上在 X 文本字符串中搜索 X 个单词，如果找到，则将其替换为指定的单词并停止。

真棒=>愚蠢

因为 => 苹果

猫 => 狗

**“这是一串文本，而且是一串*很棒*的文本……因为它充满了 foo。”**

会变成

**“这是一串文本，而且是*一串无用*的文本……因为它充满了 foo。”**

一旦找到第一个单词，它应该停止。我是走错了方向还是有更好的方法来实现这一目标？也许使用 NSScanner？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T11:54:33.797

我知道这个线程很旧，但尝试通过字符串枚举并替换单词。

```
NSString *fullText =@"Some text that needs to have words replaced!"
NSDictionary *replacementDict = @{@"replaced" : @"stuff"}

__block NSString *newStr = [NSString stringWithString:fullText];
__block BOOL replacementDone = YES;

while (replacementDone) {
    replacementDone = NO;
    newStr = [NSString stringWithString:newStr];
    NSRange wordRange = NSMakeRange(0, newStr.length);
    [newStr enumerateSubstringsInRange:wordRange
                               options: NSStringEnumerationByWords
                            usingBlock:^(NSString *substring, NSRange substringRange,    NSRange enclosingRange, BOOL *stop){
                                NSString *lowWord = [substring lowercaseString];
                                if ([replacementDict objectForKey:substring])
                                {
                                    *stop = YES;
                                    newStr = [newStr stringByReplacingCharactersInRange:substringRange withString:[replacementDict objectForKey:substring]];
                                    replacementDone = YES;
                                }

                            }];
}

return newStr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:56:39.367

检查此项以替换字符串中找到的第一个单词（替换字符串）：

```
NSString *str3 = @"This is a string of text, and it is an awesome string of text.. because it is full of foo awesome";
NSLog(@"%@",str3);
NSString *outputString;
NSRange range = [str3 rangeOfString:@"awesome"]; //Find string
if(range.location != NSNotFound)
{ 

    outputString = [str3 stringByReplacingCharactersInRange:range withString:@"dumb"];

 OR use this

    //string exists
    //copy upto found string in new string
    outputString = [str3 substringToIndex:range.location]; 
    //now add your replace string plus remaining string
    outputString = [outputString stringByAppendingString:[NSString stringWithFormat:@"dumb%@",[str3 substringFromIndex:range.location+range.length]]];    

    NSLog(@"%@",outputString);
} 
```

# objective-c - 使调色板永久活跃/集中？

> ID：12633455
> 
> 赞同：0
> 
> 时间：2012-09-28T04:10:43.713
> 
> 标签：objective-c, cocoa, palette, nspanel

有没有一种简单的方法可以让我的应用程序的浮动工具面板永久激活？它们都与打开的文档相关，因此没有理由让它们在任何时间点都处于非活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:54:06.897

用于`NSPanel`实用程序窗口。这样，当应用程序不活动时，面板也可以正确隐藏（尽管它是一个标志）。

考虑将其设为“非激活”：

> 如果接收器是一个非激活面板，那么只有当命中视图从 needsPanelToBecomeKey 返回 YES 时，它才成为键。这样，非激活面板可以控制是否获取键盘焦点。

# apache-flex - Adobe flex：希望 DropDownList 自定义渲染器以十六进制显示值并以十六进制显示所选值

> ID：12633456
> 
> 赞同：1
> 
> 时间：2012-09-28T04:11:02.563
> 
> 标签：apache-flex, actionscript, flex4, flash-builder

我有一些数据想要以十进制存储，但在 s:DropDownList 中以十六进制显示。I have developed the custom renderer and the drop down list displays the numbers in hex fine, BUT when the number is selected it is displayed in decimal. 我希望将数字存储为十进制，但始终以十六进制显示，无论是在下拉列表中还是在选择时。我怎样才能做到这一点？

自定义渲染器：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"        
                xmlns:mx="library://ns.adobe.com/flex/mx"
                xmlns:s="library://ns.adobe.com/flex/spark">

    <s:Label text="{makeLabel(data)}"/>

    <fx:Script>
    <![CDATA[
        public function makeLabel(data:Object):String {
            var x:int = data as int;
            var ret:String = x.toString(16);
            if (ret.length < 2) {
                ret = '0' + ret;
            }
            return ret.toUpperCase() + 'H';
        }
    ]]>
    </fx:Script>
</s:ItemRenderer> 
```

测试存根：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               minWidth="955" minHeight="600">

    <fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]
        public var dp:ArrayCollection = new ArrayCollection([9, 10, 11, 12]);
    ]]>
    </fx:Script>

    <s:DropDownList x="72" y="43" dataProvider="{dp}" itemRenderer="HexListRenderer"/>

</s:Application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:02:08.510

您可以使用 DropDownList.labelFunction

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600">

    <fx:Script>
        <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]
        public var dp:ArrayCollection = new ArrayCollection([9, 10, 11, 12]);

        public function makeLabel(data:Object):String {
            var x:int = data as int;
            var ret:String = x.toString(16);
            if (ret.length < 2) {
                ret = '0' + ret;
            }
            return ret.toUpperCase() + 'H';
        }
    ]]>
    </fx:Script>

    <s:DropDownList x="72" y="43" labelFunction="makeLabel" dataProvider="{dp}" itemRenderer="HexListRenderer"/>

</s:Application> 
```

# asp.net-mvc - 带有 JsonResult 的 ASP.NET MVC 3：ModelState 始终有效

> ID：12633463
> 
> 赞同：3
> 
> 时间：2012-09-28T04:12:01.440
> 
> 标签：asp.net-mvc, modelstate

我正在尝试使用 ModelState 验证表单，但我的 ModelState 始终显示为有效。例如：当我尝试使用相同的 SSN 保存 2 人 formModel 时，ModelState 返回有效。我正在使用 IValidatableObject 来验证我的表单模型。有什么想法我可能会出错吗？我正在使用 .Net 4.0 和 MVC 3。

```
public JsonResult LoadOccupantsDetailedInformation()
{
    //Load the personsFormModel with data
    return new JsonpResult(personsFormModel, JsonRequestBehavior.AllowGet);
}

[HttpPost]
public ActionResult SaveOccupantsDetailedInformation(
PersonsFormModel personsFormModel)
    {
//This line is always returning true even if I pass 2 persons with the same ssn
        if (ModelState.IsValid == false)
        {
            var errorList = ModelState.ToDictionary(
                      kvp => kvp.Key,
                      kvp => kvp.Value.Errors.Select(e => e.ErrorMessage).ToArray()
                );
            return Json(new { Errors = errorList });
        }
        //Save the data in personsFormModel to database
        return Json(new JsonResultViewModel { Success = true });
    }

public partial class PersonsFormModel : List<PersonFormModel>, IValidatableObject
{
    public IEnumerable<System.ComponentModel.DataAnnotations.ValidationResult> Validate(
    ValidationContext validationContext)
    {
        var validationResults
            = new List<System.ComponentModel.DataAnnotations.ValidationResult>();
        if (this.SSNs.Count() > this.SSNs.Distinct().Count())
        {
            validationResults.Add(new System.ComponentModel.DataAnnotations.ValidationResult(
            "All the persons in the household should have a unique SSN\\ITIN number",
                new[] { "SSN" }));
        }
        return validationResults;
    }
    private IEnumerable<string> SSNs
    {
        get
        {
            return this.Select(element => element.SSN);
        }
    }
}
    public class PrequalifyOccupantListPersonDetailedFormModel
{
    [Required(ErrorMessage = "SSN is required")]
    public string SSN { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:22:22.437

我写了一个测试来验证你的验证，它看起来不错。

```
 [Test]
        public void Should_validate_person_form_model()
        {
            var input = new PersonsFormModel();
            input.Add(new PersonFormModel { SSN = "33" });
            input.Add(new PersonFormModel { SSN = "33" });
            _controller.ViewData.ModelState.Clear();

            var results = new List<ValidationResult>();

            bool isValid = Validator.TryValidateObject(input,
                new ValidationContext(input, null, null),
                results,true);

            Assert.IsTrue(!isValid, "Cannot have duplicates.");
        } 
```

所以要么它没有被调用，要么你的数据是有效的。

要测试前者，您可以在 Validate 中放置一个断点并确认它被击中。

要测试后者，您能否提供发布的确切数据和所涉及的完整模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:30:06.163

这就是我解决我遇到的问题的方法：

```
***Controller:***
public JsonResult LoadOccupantsDetailedInformation()
{
    //Load the personsFormModel with data
    return new JsonpResult(personsFormModel, JsonRequestBehavior.AllowGet);
}

[HttpPost]
public ActionResult SaveOccupantsDetailedInformation(
PersonsFormModel personsFormModel)
    {
//This line is always returning true even if I pass 2 persons with the same ssn
        if (ModelState.IsValid == false)
        {
            var errorList = ModelState.ToDictionary(
                      kvp => kvp.Key,
                      kvp => kvp.Value.Errors.Select(e => e.ErrorMessage).ToArray()
                );
            return Json(new { Errors = errorList });
        }
        //Save the data in personsFormModel to database
        return Json(new JsonResultViewModel { Success = true });
    }

***Model:***
public class PersonsFormModel : IValidatableObject
{
    public PersonsFormModel()
    {
        this.Instance = new List<PersonFormModel>();
    }

    public List<PrequalifyOccupantListPersonFormModel> Instance { get; set; }

    public void Add(PersonFormModel personFormModel)
    {
        Instance.Add(personFormModel);
    }

    public IEnumerable<System.ComponentModel.DataAnnotations.ValidationResult> Validate(
    ValidationContext validationContext)
    {
        var validationResults
            = new List<System.ComponentModel.DataAnnotations.ValidationResult>();
        if (this.SSNs.Count() > this.SSNs.Distinct().Count())
        {
            validationResults.Add(new System.ComponentModel.DataAnnotations.ValidationResult(
            "All the persons in the household should have a unique SSN\\ITIN number",
                new[] { "SSN" }));
        }
        return validationResults;
    }
    private IEnumerable<string> SSNs
    {
        get
        {
            return Instance.Select(element => element.SSN);
        }
    }
}

public class PersonFormModel
{
    [Required(ErrorMessage = "SSN is required")]
    public string SSN { get; set; }
}

View: 

// Note, I am passing the "Instance" here. 

 var postData = JSON.stringify({ Instance: list });

            RealPage.DataManager.POST({
                url: "/Approval/SaveOccupantsDetailedInformation"
                , data: postData
                , success: function (data) {
                    if (data && data.Success) {

                    } 
                }
            }); 
```

# xcode4.5 - 为什么这段代码不能在 Xcode 4.5 中工作，而它曾经在 Xcode 4.4 上工作

> ID：12633466
> 
> 赞同：2
> 
> 时间：2012-09-28T04:12:01.920
> 
> 标签：xcode4.5

为什么这段代码不能在 Xcode 4.5（使用 ipad 6.0 模拟器）中工作，而它用于在 Xcode 4.4 上工作。（使用 ipad 模拟器 5.1）

```
- (IBAction)capitalDButtonTwo:(id)sender {
    if ([capitalDResultLabelTwo text] == @"+") {
        [capitalDResultLabelTwo setText:@"0"];
    } else {
        [capitalDResultLabelTwo setText:@"+"];
    }
} 
```

这是一个按钮，它在第一次按下时将同一视图中标签中的文本设置为“+”，然后将文本设置为“0”，然后每次按下时设置为“+”。我想知道一个版本与另一个版本有什么不同，以至于这个简单的代码不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:43:18.897

它不应该在任何一个 Xcode 版本中工作。您没有正确比较字符串：

该语句`[capitalDResultLabelTwo text] == @"+"`测试两个`NSString`对象是否是完全相同的对象。我敢肯定，您的意图是测试标签的*内容*是否与 相同`"+"`，因此您需要使用`[NSString isEqualToString:]`：

```
- (IBAction)capitalDButtonTwo:(id)sender {
    if ([[capitalDResultLabelTwo text] isEqualToString:@"+"]) {
        [capitalDResultLabelTwo setText:@"0"];
    } else {
        [capitalDResultLabelTwo setText:@"+"];
    }
} 
```

# asp.net-mvc - MVC4 DataType.Date EditorFor 不会在 Chrome 中显示日期值，在 Internet Explorer 中很好

> ID：12633471
> 
> 赞同：203
> 
> 时间：2012-09-28T04:12:40.923
> 
> 标签：asp.net-mvc, asp.net-mvc-4, editorfor

我在我的模型上使用 DataType.Date 属性，在我的视图中使用 EditorFor。这在[Internet Explorer 8](http://en.wikipedia.org/wiki/Internet_Explorer_8)和[Internet Explorer 9](http://en.wikipedia.org/wiki/Internet_Explorer_9)中运行良好，但在[Google Chrome](http://en.wikipedia.org/wiki/Google_Chrome)中，它显示了一个日期选择器，而不是显示值，它只是以褪色的灰色文本显示“月/日/年”。

为什么谷歌浏览器不显示该值？

模型：

```
[DataType(DataType.Date)]
public Nullable<System.DateTime> EstPurchaseDate { get; set; } 
```

看法：

```
<td class="fieldLabel">Est. Pur. Date</td>
<td class="field">@Html.EditorFor(m=>m.EstPurchaseDate)</td> 
```

![铬合金](../Images/9c9bea03c9e97b005f4c0cd2abf89617.png)

![IE浏览器](../Images/de72ac71d4d6e8944a249aeeb238e383.png)

* * *

## 回答 #1

> 赞同：389
> 
> 时间：2012-09-28T06:06:51.770

当您在 ASP.NET MVC 4 中使用默认模板装饰模型属性时，`[DataType(DataType.Date)]`会生成一个输入字段`type="date"`：

```
<input class="text-box single-line" 
       data-val="true" 
       data-val-date="The field EstPurchaseDate must be a date."
       id="EstPurchaseDate" 
       name="EstPurchaseDate" 
       type="date" value="9/28/2012" /> 
```

支持 HTML5 的浏览器（例如 Google Chrome）使用日期选择器呈现此输入字段。

为了正确显示日期，该值的格式必须为`2012-09-28`. 引用[规范](http://dev.w3.org/html5/markup/input.date.html)：

> **value：** [RFC 3339] 中定义的有效完整日期，附加条件是年份部分是四位或更多位，表示大于 0 的数字。

`DisplayFormat`您可以使用以下属性强制执行此格式：

```
[DataType(DataType.Date)]
[DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
public Nullable<System.DateTime> EstPurchaseDate { get; set; } 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-11-13T22:00:15.587

在 MVC5.2 中，将 Date.cshtml 添加到文件夹 ~/Views/Shared/EditorTemplates：

```
@model DateTime?
@{
    IDictionary<string, object> htmlAttributes;
    object objAttributes;
    if (ViewData.TryGetValue("htmlAttributes", out objAttributes))
    {
        htmlAttributes = objAttributes as IDictionary<string, object> ?? HtmlHelper.AnonymousObjectToHtmlAttributes(objAttributes);
    }
    else
    {
        htmlAttributes = new RouteValueDictionary();
    }
    htmlAttributes.Add("type", "date");
    String format = (Request.UserAgent != null && Request.UserAgent.Contains("Chrome")) ? "{0:yyyy-MM-dd}" : "{0:d}";
    @Html.TextBox("", Model, format, htmlAttributes)
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-12-19T12:47:51.047

作为 Darin Dimitrov 回答的补充：

如果您只希望此特定行使用某种（不同于标准）格式，则可以在 MVC5 中使用：

```
@Html.EditorFor(model => model.Property, new {htmlAttributes = new {@Value = @Model.Property.ToString("yyyy-MM-dd"), @class = "customclass" } }) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-03T11:46:22.837

在 MVC 3 中，我必须添加：

```
using System.ComponentModel.DataAnnotations; 
```

添加属性时的用途：

```
[DataType(DataType.Date)]
[DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)] 
```

特别是如果您像我一样在 .edmx 文件中添加这些属性。我发现默认情况下 .edmx 文件没有使用此功能，因此仅添加属性是不够的。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-10-04T10:55:32.097

如果您`[DataType(DataType.Date)]`从模型中删除，Chrome 中的输入字段将呈现为`type="datetime"`并且也不会显示日期选择器。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-29T13:09:30.160

我仍然在传递格式 yyyy-MM-dd 时遇到问题，但我通过更改 Date.cshtml 解决了这个问题：

```
@model DateTime?

@{
    string date = string.Empty;
    if (Model != null)
    {
        date = string.Format("{0}-{1}-{2}", Model.Value.Year, Model.Value.Month, Model.Value.Day);
    }

    @Html.TextBox(string.Empty, date, new { @class = "datefield", type = "date"  })
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-31T13:32:04.953

回复**MVC4 DataType.Date EditorFor 不会在 Chrome 中显示日期值，在 IE 中没问题**

在模型中，您需要具有以下类型的声明：

```
[DataType(DataType.Date)]
public DateTime? DateXYZ { get; set; } 
```

或者

```
[DataType(DataType.Date)]
public Nullable<System.DateTime> DateXYZ { get; set; } 
```

您不需要使用以下属性：

```
[DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)] 
```

**在 Date.cshtml 使用这个模板：**

```
@model Nullable<DateTime>
@using System.Globalization;

@{
    DateTime dt = DateTime.Now;
    if (Model != null)
    {
        dt = (System.DateTime)Model;

    }

    if (Request.Browser.Type.ToUpper().Contains("IE") || Request.Browser.Type.Contains("InternetExplorer"))
    {
        @Html.TextBox("", String.Format("{0:d}", dt.ToShortDateString()), new { @class = "datefield", type = "date" })
    }
    else
    {
        //Tested in chrome
        DateTimeFormatInfo dtfi = CultureInfo.CreateSpecificCulture("en-US").DateTimeFormat;
        dtfi.DateSeparator = "-";
        dtfi.ShortDatePattern = @"yyyy/MM/dd"; 
        @Html.TextBox("", String.Format("{0:d}", dt.ToString("d", dtfi)), new { @class = "datefield", type = "date" })
    } 
} 
```

玩得开心！问候，布莱顿

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-12T13:59:55.717

如果您需要控制日期的格式（换句话说，不仅仅是 yyyy-mm-dd 格式是可以接受的），另一种解决方案可能是添加一个字符串类型的辅助属性并向该属性添加一个日期验证器，并绑定到 UI 上的此属性。

```
 [Display(Name = "Due date")]
    [Required]
    [AllowHtml]
    [DateValidation]
    public string DueDateString { get; set; }

    public DateTime? DueDate 
    {
        get
        {
            return string.IsNullOrEmpty(DueDateString) ? (DateTime?)null : DateTime.Parse(DueDateString);
        }
        set
        {
            DueDateString = value == null ? null : value.Value.ToString("d");
        }
    } 
```

这是一个日期验证器：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true, Inherited = true)]
public class DateValidationAttribute : ValidationAttribute
{
    public DateValidationAttribute()
    {
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (value != null)
        {
            DateTime date;

            if (value is string)
            {
                if (!DateTime.TryParse((string)value, out date))
                {
                    return new ValidationResult(validationContext.DisplayName + " must be a valid date.");
                }
            }
            else
                date = (DateTime)value;

            if (date < new DateTime(1900, 1, 1) || date > new DateTime(3000, 12, 31))
            {
                return new ValidationResult(validationContext.DisplayName + " must be a valid date.");
            }
        }
        return null;
    }
} 
```

# c++ - 简单的正则表达式 -（C++ 中的组匹配）

> ID：12633476
> 
> 赞同：2
> 
> 时间：2012-09-28T04:13:07.467
> 
> 标签：c++, regex

我有一个具有以下文本格式的文件：

```
Blah blah Blahhh<TAB SPACE -(/t character)>1234<TAB SPACE -(/t character)>some other crap blah 
```

文本可能如下所示：

```
Saturday Evening    1234    Beautiful 
```

我正在使用该`<regex>`库，并且我想使用捕获组来仅捕获“1234”。

我试过：

```
"\\t(\\d+)\\t" 
```

但是当我打印结果时，它会显示“\t”字符以及数字。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:29:07.283

`\b\d+\b` 包括单词边界。这将忽略当前正则表达式中匹配的制表符或空格。

[http://regexr.com?32a07](http://regexr.com?32a07)

或者，如果您想与选项卡匹配，请使用断言，它们将匹配选项卡，但不捕获它们：

```
(?<=\t)\d+(?=\t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:22:38.383

一些细节会很有用，比如你用来进行搜索和提取结果的代码，但我猜你正在查看错误的 match_result 索引：你应该查看元素 1。请参阅 match_results' [operator[]](http://en.cppreference.com/w/cpp/regex/match_results/operator_at)

# java - MySql 备份不起作用

> ID：12633487
> 
> 赞同：1
> 
> 时间：2012-09-28T04:14:37.820
> 
> 标签：java, mysql, sql, backup

```
String[] executeCmd = new String[] { "mysql", "-u",DB_USER,"-p"+DB_PASSWORD,DB_NAME, " < ", "\""+FileName+"\"" };

Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
int processComplete = runtimeProcess.waitFor();
System.out.println("processComplete: " + processComplete); 
```

这是我使用过的代码。当调用“waitFor()”方法时程序挂起。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:16:28.870

你需要在参数后添加空格，不要使用数组

```
String executeCmd = "mysqldump ", " -u ",DB_USER," -p " + DB_PASSWORD, + " " + DB_NAME, " < ", "\""+FileName+"\"" ; 
```

更清洁的方法是使用`String.Format()`

```
String executeCmd = String.Format("mysqldump -u %s -p %s %s < \"%s\"", DB_USER, DB_PASSWORD, DB_NAME, FileName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:35:06.303

```
 String[] command = new String[]{"mysql", Constants.DB_NAME, "-u" + Constants.DB_USER, "-p" + Constants.DB_PASSWORD, "-e", " source "+FileName };

    try {
            Process runtimeProcess = Runtime.getRuntime().exec(command);
            int processComplete = runtimeProcess.waitFor();
            if (processComplete == 0)
            {
                System.out.println("DatabaseManager.restore: Restore Successfull");

            }
            else 
            {
                System.out.println("DatabaseManager.restore: Restore Failure!");
            }

        return true;

    }

    catch (final Exception ex) 
    {
        Application.showErrorInConsole(ex);
        NmsLogger.writeErrorLog("Database Restore failed ", ex.toString());
        NmsLogger.writeDebugLog(ex);
        return false;

    } 
```

上面的代码对我来说很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T22:56:58.697

如果您没有为 XAMPP 设置密码，请不要使用 -p

```
public class Testbackupmysql {
public boolean tbBackup(String dbName,String dbUserName, String path) {

    String executeCmd = "C:\\xampp\\mysql\\bin\\mysqldump -u " + dbUserName + " --add-drop-database -B " + dbName + " -r " + path;
    Process runtimeProcess;
        try
        {
            System.out.println(executeCmd);//this out put works in mysql shell
            runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();

                if (processComplete == 0)
                {
                    System.out.println("Backup created successfully");
                    return true;
                }
                else
                {
                    System.out.println("Could not create the backup");
                }
        } catch (Exception ex)
        {
            ex.printStackTrace();
        }
return false;
}

public static void main(String[] args){

    Testbackupmysql bb = new Testbackupmysql();
        bb.tbBackup("your_database_name","your_db_username","D:\\123.sql");

} 
```

}

# php - PHP Socket在断开连接时发送消息？

> ID：12633493
> 
> 赞同：0
> 
> 时间：2012-09-28T04:15:09.783
> 
> 标签：php, actionscript-3, flash, sockets

我有一个用 PHP 创建的套接字，我在 flash/as3 中连接到该套接字。它的工作效率为 99%，但是...

```
$bytes = socket_recv($socket, $buffer, 2048, 0);
if ($bytes == 0) {
    //User disconnects
    $index = array_search($socket, $read_sockets);
    $tehEC = socket_last_error();
    $CID = $read_sockets[$index];
    $DNAME = $DB->db->query("SELECT * FROM chat_online WHERE connectid='$CID'");
    $BROW = $DB->db->fetch_array($DNAME);
    $BNAME = $BROW['user_name'];
    $DB->db->query("DELETE FROM chat_online WHERE connectid='$CID'");
    echo "dc " . $tehEC . "\n";
    send_Message($allclients, $socket, $BNAME . ": /disconnected " . $BNAME); <-- WILL NOT SEND
    unset($read_sockets[$index]);
    send_Message($allclients, $socket, $BNAME . ": /disconnected " . $BNAME); <-- WILL NOT SEND 
    socket_close($socket);
} 
```

因此，当用户断开连接时，我已经能够触发一个事件，但是那条不发送的线路让我的生活真的很艰难:(有什么帮助吗？我需要它把它发送给其他客户，这样我就可以删除用户. 再说一次，我怎样才能让套接字服务器向所有仍然在线的客户端发送消息，以便他们知道从列表中删除断开连接的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:41:00.200

实际上问题是我需要将 chr(0) 添加到字符串的末尾才能发送。不过，谢谢您的回复。

# html - 强制文本在没有宽度的 div 内换行

> ID：12633495
> 
> 赞同：4
> 
> 时间：2012-09-28T04:15:40.393
> 
> 标签：html, css, word-wrap

是否可以在只有最小宽度的内联块 div 内换行？（不是宽度，也不是最大宽度）

这就是我的意思：

```
<style type="text/css">

  .container {
    width:100%;
  }

  .field {
    display: inline-block;
    vertical-align: top;
    min-width:25%;
  }

  label, input {
    display: inline-block;
  }

  .alert {
    display:block;
  }

</style>

<div class="container">

    <div class="field">
      <label style="width:100px;">My Label</label>
      <input style="width:200px;" type="text" />
      <div class="alert">
        This text should wrap at whatever width div.field actually is, and never push div.field out to the width of this text!
      </div>
  </div>

  <div class="field">...another field...</div>
  <div class="field">...another field...</div>
  <div class="field">...another field...</div>
  etc...

</div> 
```

笔记：

1.  `label`&`input`是为了`inline-block`让它们保持在同一行，但`div.alert`它`block`会出现在字段其他内容下方的新行上。
2.  `div.field`只有 MIN-WIDTH （不是宽度或最大宽度），因为当用户调整窗口大小（以及 的宽度`div.container`）时，应该会发生以下情况：

    一个。如果该字段的固定宽度内联内容（在本例中为 LABEL+INPUT=300px）小于 25% 的宽度`div.container`，则`div.field`应该正好是容器宽度的 25%。

    湾。如果字段的固定宽度内联内容超过容器的 25%，那么他们应该将字段推出到它们的组合宽度。

那么，有没有办法`div.alert`根据上述规则根据字段的宽度进行换行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-29T02:35:15.053

我知道我是一个非常古老的线程，但它可能对其他人有所帮助。有

```
.field {
    width: min-content;
} 
```

这就是说，您的容器缩小到尽可能少。为了使用它，您必须确保标签和输入在其最小宽度下足够大。但是有了它们的固定尺寸，它就完成了。但是在这种有多个字段的情况下，它们会被包装在一起，所以我建议

```
.container {
    width: min-content;
} 
```

这是一个[jsfiddle](https://jsfiddle.net/Lxuqhurq/)。

它不是完全跨浏览器，但[几乎是](http://caniuse.com/#feat=intrinsic-width).

我在[这里](https://css-tricks.com/almanac/properties/w/width/)找到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:25:14.527

不是没有 jQuery，比如：

```
$('.alert').width($('.alert').parents('.field').width()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-23T23:40:35.023

我正在寻找这个问题的答案，发现文本周围的 div 需要有：

`max-width: fit-content`

```
<style type="text/css">
  .container {
    width: 100%;
  }

  .field {
    display: inline-block;
    vertical-align: top;
    min-width: 25%;
    margin-bottom: 20px;
  }

  label,
  input {
    display: inline-block;
  }

  .alert {
    display: block;
    max-width: fit-content;
  }
</style>

<div class="container">
  <div class="field">
    <div>With:</div>
    <label style="width:100px;">My Label</label>
    <input style="width:200px;" type="text" />
    <div class="alert">
      This text should wrap at whatever width div.field actually is, and never push div.field out to the width of this text!
    </div>
  </div>
  <div class="field">
    <div>Without:</div>
    <label style="width:100px;">My Label</label>
    <input style="width:200px;" type="text" />
    <div>
      This text should wrap at whatever width div.field actually is, and never push div.field out to the width of this text!
    </div>
  </div>
</div>
```

# web - Octopress 适合非纯博客网站吗？

> ID：12633500
> 
> 赞同：3
> 
> 时间：2012-09-28T04:16:09.737
> 
> 标签：web, github, octopress

我想为我的工作室创建一个网站，发现 Octopress + Github 很有吸引力。下面是网站的结构草案。

```
index
|-games
|-blog
|-.... 
```

除了博客，一切都很少改变。问题是我没有找到任何使用 Octopress + Github 的非纯博客网站，而且我对构建网站知之甚少。我不确定 Octopress 是否能满足我的需求以及如何满足。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:46:18.920

Octopress 可能不是这里的最佳选择，因为：

*   正如官方标语所说，它是黑客的博客框架。
*   静态框架有一些限制

也就是说，您可以从[此处](http://www.adrianartiles.com/)和[此处](http://photography.bastardsbook.com/)进行大量自定义。

# firefox - @Font-Face 在 IE9 和 Firefox 中失败

> ID：12633504
> 
> 赞同：0
> 
> 时间：2012-09-28T04:16:35.747
> 
> 标签：firefox, css, internet-explorer-9, font-face

接手这项工作以完成登录页面并尝试使用更好的字体对其进行样式设置...今天我已经为这个问题辛勤工作了几个小时，为@font-尝试了各种不同的标记、目录放置、字体生成器等面对，只是无法解决问题。

在 Safari 和 Chrome 中运行良好，但在 IE 或 Firefox 中不受欢迎。我唯一能想到的是，还有另一种样式覆盖了我的样式，但是我查看了所有链接的样式表是否有任何冲突，但似乎找不到它们。我必须使用 !important 声明才能使其在 Chrome 中工作，所以可能存在问题？

[http://www.myfruityfaces.com/landing-page](http://www.myfruityfaces.com/landing-page)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:28:12.883

从您网站上的错误控制台（以及一大堆其他问题）：

[00:26:17.097] 可下载字体：下载失败（字体系列：“HelveticaRoundedBlack”样式：正常重量：正常拉伸：正常 src 索引：0）：错误 URI 或不允许跨站点访问来源：[http:// www.myfruityfaces.com/wp-content/themes/myfruityfaces/helveticaroundedblack.ttf](http://www.myfruityfaces.com/wp-content/themes/myfruityfaces/helveticaroundedblack.ttf) @ [http://www.myfruityfaces.com/wp-content/themes/myfruityfaces/landing.css](http://www.myfruityfaces.com/wp-content/themes/myfruityfaces/landing.css)

将“www.myfruityfaces.com”与“myfruityfaces.com”进行比较以获得您的实际页面。

# android - Google Play 下载技术

> ID：12633505
> 
> 赞同：0
> 
> 时间：2012-09-28T04:16:54.823
> 
> 标签：android

我们已经看到，当我们从**桌面登录到我们的*****Google Play***帐户时，我们选择了一个应用程序进行下载，它会自动开始下载到我们的手机中。

 **所以我的问题是，**它是如何在幕后工作的？**

表示是否有一项服务正在反复检查“是否有要下载的应用程序？” 并触发下载过多的电池消耗任务和间隔没有用于谷歌播放服务，就像我们点击从桌面安装它会开始下载应用程序一样。那么哪种逻辑正在使用他们的一面？

Is只是一个在这个魔法背后连续运行的服务，所以这样做会是低效的方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:32:47.483

如果你去你的设备的运行服务，你会发现两个服务总是为谷歌播放商店运行，名为**PendingNotificationsService**和**ContentSyncService**，它们正在做这个技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:24:54.460

此市场下载功能在推送通知之上运行。即，当您在浏览器中单击以安装应用程序时，google play 会检查哪些手机已连接到您的帐户。然后它会向您的手机发送一个特殊通知，您的手机开始安装数据包。**

# java - 设置日食

> ID：12633508
> 
> 赞同：1
> 
> 时间：2012-09-28T04:17:13.887
> 
> 标签：java, eclipse

我刚开始学习java。我下载了适用于 linux 的 eclipse 并遇到了一个错误，然后我按照 scott 的建议输入了**：**

```
ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/ 
```

这似乎有帮助。我想知道我应该使用哪个java？

[点击链接查看我的选项](http://shortText.com/tlu5AiB)

另外，一旦我有了 .class 文件，我该如何运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:20:39.230

最好为 java 使用 HotSpot impl（看来你有 open-jdk），所以按照这个 url 安装它：http: [//ubuntu-for-humans.blogspot.com/2011/04/installing-java-on -ubuntu-server-1010.html](http://ubuntu-for-humans.blogspot.com/2011/04/installing-java-on-ubuntu-server-1010.html)。并使用jdk，而不是jre。运行 eclipse 后，eclipse 会为您完成所有工作：编译、运行、部署、IDE，...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:21:25.150

[您可以在此处](http://www.java.com/en/download/help/linux_install.xml)获取 linux 的 java 版本

设置 eclipse 应该不是问题，但请确保首先安装 java。

# excel-dna - ExcelDNA 通过 excel 单元格值显示意外输出

> ID：12633510
> 
> 赞同：0
> 
> 时间：2012-09-28T04:17:23.963
> 
> 标签：excel-dna

我使用一个函数 public static object getContent(String keyword, object StartTime, object EndTime) { alert(StartTime); }

将单元格 A1 设置为 18-07-2012。当调用 =getContent("africa",A1,"04-09-2012") 时显示 41108。这意味着什么？为什么它在 A1 中没有价值！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:36:08.363

Excel 没有内置的日期/时间数据类型。在 Excel 中，日期/时间是双精度数据类型的格式选项。您可以将 Excel-DNA 函数声明为采用`DateTime`参数以`DateTime`自动将传入的双精度转换为，或者您可以使用自己进行转换`DateTime.FromOADate()`（因为 Excel 双编码与 COM/OLE 日期实现匹配）。

# c# - 如何在 Windows 8 XAML 应用程序中拖动元素？

> ID：12633512
> 
> 赞同：4
> 
> 时间：2012-09-28T04:17:59.800
> 
> 标签：c#, xaml, windows-8

XAML/C# Windows 8 应用程序...

我在 XAML/C# 中使用 MouseDragElementBehavior 在屏幕上拖动元素。

不幸的是，在为 Windows 8 开发应用程序时，交互程序集不起作用。

如何在 Windows 8 XAML 应用程序中拖动元素？

谢谢。

**编辑：**我在这里找到了一个示例：[http ://code.msdn.microsoft.com/windowsapps/Input-3dff271b/sourcecode?fileId=44758&pathId=962809525](http://code.msdn.microsoft.com/windowsapps/Input-3dff271b/sourcecode?fileId=44758&pathId=962809525)

只需复制代码即可拖动我的元素。如果需要帮助，有一些问题会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:51:22.753

您需要处理要拖动的元素上的操作事件。此外，在元素上将 ManipulationMode 设置为 None 以外的值。

1.  `ManipulationStarted`初始化拖动代码的句柄
2.  使用 a处理`ManipulationDelta`、检查`e.Delta`值和偏移元素`RenderTransform`，或者如果在 a 中`Canvas`，则使用画布坐标。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:51:44.370

这是一个基于 ColinE 回答的过于简化的示例。

考虑一个有椭圆的画布：

```
<Canvas Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Ellipse Fill="Red" 
             Canvas.Left="100"
             Canvas.Top="100"
             Width="100" 
             Height="100" 
             ManipulationMode="All" 
             ManipulationDelta="Ellipse_ManipulationDelta_1"/>
</Canvas> 
```

现在在后面的代码中，您处理 ManipulationDelta：

```
private void Ellipse_ManipulationDelta_1(object sender, ManipulationDeltaRoutedEventArgs e)
    {
        Ellipse myEllipse = (Ellipse)sender;
        Canvas.SetLeft(myEllipse, Canvas.GetLeft(myEllipse) + e.Delta.Translation.X);
        Canvas.SetTop(myEllipse, Canvas.GetTop(myEllipse) + e.Delta.Translation.Y);
    } 
```

# php - 为什么我使用此 PHP 邮件功能时，我的 gmail 或 yahoo 电子邮件帐户收不到邮件

> ID：12633517
> 
> 赞同：0
> 
> 时间：2012-09-28T04:18:57.600
> 
> 标签：php, gmail, mime

带有标题的 send_mail 函数。是什么阻止了这个被接收。我知道它至少有时有效，我的工作电子邮件接收它就好了。

可能需要注意的另一件事：-使用不同的 ssl 页面，该功能确实正确发送到 gmail-在这个完全独立的域上，它不是。

```
function send_mail($from,$fromName,$to,$object,$bodyText,$bodyHtml){
    $site = "mywebsite.ca";
    $from = $fromName." <".$from.">";
    $limite = "_----------=_parties_".md5(uniqid (rand()));

    $header  = "Reply-to: ".$from."\n";
    $header .= "From: ".$from."\n";
    $header .= "X-Sender: <".$site.">\n";
    $header .= "X-Mailer: PHP\n";
    $header .= "X-auth-smtp-user: ".$from." \n";    
    $header .= "X-abuse-contact: ".$from." \n"; 
    $header .= "Date: ".date("D, j M Y G:i:s O")."\n";
    $header .= "MIME-Version: 1.0\n";
    $header .= "Content-Type: multipart/alternative; boundary=\"".$limite."\"";

    $message = "";
    $message .= "--".$limite."\n";
    $message .= "Content-Type: text/plain\n";
    $message .= "charset=\"iso-8859-1\"\n";
    $message .= "Content-Transfer-Encoding: 8bit\n\n";
    $message .= $bodyText;

    $message .= "\n\n--".$limite."\n";
    $message .= "Content-Type: text/html; ";
    $message .= "charset=\"iso-8859-1\"; ";
    $message .= "Content-Transfer-Encoding: 8bit;\n\n";
    $message .= $bodyHtml;

    $message .= "\n--".$limite."--";
    if(mail($to, $object, $message, $header)) return true;
    else return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:25:28.907

为什么要在同一个变量中合并内容类型`Text` ？`HTML`

```
$message = "";
$message .= "--".$limite."\n";
$message .= "Content-Type: text/plain\n";
$message .= "charset=\"iso-8859-1\"\n";
$message .= "Content-Transfer-Encoding: 8bit\n\n";
$message .= $bodyText;

$message .= "\n\n--".$limite."\n";
$message .= "Content-Type: text/html; ";
$message .= "charset=\"iso-8859-1\"; ";
$message .= "Content-Transfer-Encoding: 8bit;\n\n";
$message .= $bodyHtml; 
```

仅使用其中任何一种

喜欢而不是上面

```
$message .= "\n\n--".$limite."\n";
$message .= "Content-Type: text/html; ";
$message .= "charset=\"iso-8859-1\"; ";
$message .= "Content-Transfer-Encoding: 8bit;\n\n";
$message .= $bodyHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:30:18.480

```
 if(mail($to, $object, $message, $header)) return true;
    else return false; 
```

继承人将邮件发送到您的电子邮件的代码尝试调试它，特别是 $to 变量中的所有变量，因为它是您的电子邮件，将发送消息。

试试这个

```
if(mail($to,$object,$message,$header)){
      //echo all
}
else{
      //echo mssage not submit
} 
```

# bash - 从十六进制转换为二进制时，防止 bc 自动截断前导零

> ID：12633522
> 
> 赞同：6
> 
> 时间：2012-09-28T04:19:27.307
> 
> 标签：bash

我正在尝试将十六进制字符串转换为二进制。我正在使用：

```
echo "ibase=16; obase=2; $line" | BC_LINE_LENGTH=9999 bc 
```

它正在截断前导零。也就是说，如果十六进制字符串是`4F`，则将其转换为`1001111`，如果是`0F`，则将其转换为`1111`。我需要`01001111`它`00001111`

我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:57:08.723

的输出`bc`是正确的；它根本不是你的想法（但它是设计师的`bc`想法）。如果您将十六进制转换`4F`为十进制，您不会期望从中得到 079，对吗？如果输出基数是二进制的，为什么要得到前导零？简短的回答：你不应该，所以`bc`不会发出它们。

如果必须使二进制输出为 8 位的倍数，则可以使用其他工具添加适当数量的前导零，例如`awk`：

```
awk '{ len = (8 - length % 8) % 8; printf "%.*s%s\n", len, "00000000", $0}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T05:16:43.980

您可以`awk`像这样使用管道：

```
echo "ibase=16; obase=2; $line" | BC_LINE_LENGTH=9999 bc | awk '{ printf "%08d\n", $0 }' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-25T09:32:57.790

纯 Bash 解决方案（除了 bc）：

```
paddy()
{
    how_many_bits=$1
    read number
    zeros=$(( $how_many_bits - ${#number} ))
    for ((i=0;i<$zeros;i++)); do
    echo -en 0
    done && echo $number
} 
```

用法：

```
>bc <<< "obase=2;ibase=16; 20" | paddy 8
00100000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T04:36:19.690

你可以在python中做到这一点：

```
line=4F
python -c "print ''.join([bin(int(i, 16))[2:].zfill(4) for i in '$line'])" 
```

* * *

结果：

```
'01001111' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T22:27:29.460

令人沮丧的是 bc 期望输入为零填充，但不提供类似的输出选项。这是使用 sed 的另一种选择：

```
sed 's_0_0000_g;    s_1_0001_g;    s_2_0010_g;    s_3_0011_g;
     s_4_0100_g;    s_5_0101_g;    s_6_0110_g;    s_7_0111_g;
     s_8_1000_g;    s_9_1001_g;    s_[aA]_1010_g; s_[bB]_1011_g;
     s_[cC]_1100_g; s_[dD]_1101_g; s_[eE]_1110_g; s_[fF]_1111_g;' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-21T23:34:53.427

您可以使用**seq**和**sed**来帮助您 pād：

```
function paddington(){
  PADDLE=8; while read IN; do
    seq -f '0' -s '' 1 $PADDLE | \
    sed "s/0\{${#IN}\}\$/$IN/"
  done
}

bc <<< "ibase=16; obase=2; 4F; 1E; 0F" | paddington 
```

输出：

```
01001111
00011110
00001111 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-11T17:49:09.877

如果结果的长度不是四的倍数，您可以使用[`printf`](https://www.man7.org/linux/man-pages/man3/printf.3.html)零填充结果：

```
hex_nr=2C8B; hex_len=${#hex_nr}; binary_nr=$(bc <<< "obase=2;ibase=16;$hex_nr"); \
bin_length=$(( hex_len * 4 )); printf "%0${bin_length}d\n" $binary_nr 
```

将导致

> 0010110010001011

而不是 bc 的输出

> 10110010001011

# matlab - 在matlab的3d图中设置颜色条范围

> ID：12633523
> 
> 赞同：0
> 
> 时间：2012-09-28T04:19:32.833
> 
> 标签：matlab, plot, surf, colorbar

我想用这个创建一个三维表面：

```
>> a=X

a =

Columns 1 through 8

           0          50         100         150         200         250         300         350

Columns 9 through 16

         400         450         500         550         600         650         700         750

Columns 17 through 21

         800         850         900         950        1000

>> b=Y

b =

     0
    50
   100
   150
   200
   250
   300
   350
   400

>> c=Z

c =
Columns 1 through 8

           0           0           0           0           0           0           0           0
          16          32          67          98         127         164         194         234
         120         171         388         773        1086        1216        1770        2206
         189         270         494        1978        2755        3134        5060       10469
         133         166         183         348         647         937        1446        2304
         192         162         154         113         161         189         266         482
           0           0           0           0           0           0           0           0
           0           0           0           0           0           0           0           0
           0           0           0           0           0           0           0           0

Columns 9 through 16

           0           0           0           0           0           0           0           0
         366         604         529         504         346         226         228         179
        4027       11186       10276        5349        2560        1322         996         799
       27413       76387       37949       15591        5804        2654        1803        1069
        9844       24152       14772        4613        1777         849         459         290
        1288        2623        1538         582         280         148          90          56
           0           0           0           0           0           0           0           0
           0           0           0           0           0           0           0           0
           0           0           0           0           0           0           0           0

Columns 17 through 21

           0           0           0           0           0
         108          94          79           0           0
         646         476         612           0           0
         884         858         722           0           0
         266         215         139           0           0
          48          48          31           0           0
           0           0           0           0           0
           0           0           0           0           0
           0           0           0           0           0

>> surf(X,Y,Z) 
```

同时我想定义 Z 值 < = 1803 将在曲面图上以红色显示，1803 < Z < 2755 黄色和 Z > = 2755 绿色。颜色条的限制可以是 Z 的最小值和最大值（从 0 到 76387）。如何设置颜色条的范围以获得此结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:02:53.167

这将按照您的要求进行：

```
%# add red (row 1), yellow (row 2), green (row 2)
map = [1 0 0; 0 1 1; 0 1 0];  

%# set the new map as the current map
colormap(map); 

colors = zeros(size(c));          %# create colors array          
colors(c <= 1803) = 1;            %# red (1)
colors(c > 1803 & c < 2755) = 2;  %# yellow (2)
colors(c >= 2755) = 3;            %# green (3)

%# and pass it into surf     
surf(a,b,c, colors) 
```

# javascript - href 正在响应，认为这是错误的

> ID：12633531
> 
> 赞同：0
> 
> 时间：2012-09-28T04:20:53.120
> 
> 标签：javascript, jquery, ajax

伙计们，我这里有一个情况。我试图验证来自用户的输入，如果输入是`!= ""`，它将在 if 内执行什么操作，如果是 else，它将在 else 内执行操作。除了一件事之外，验证非常有效。尽管条件为假，但它仍会进入 if 条件并使用此代码刷新整个系统`$(location).attr('href','account_setting_registrar.php');`

你能帮助我吗？

```
 $(document).ready(function (){
         var username ;
         var eadd;

$('#change_usrname_button').click(function (){
    username = $('#new_chnge_username').val();      

            if(username != "" ){
                    $.ajax({
                        type: 'POST',
                        url: 'account_setting_registrar_get.php',
                        dataType: 'json',
                        data:'username='+username,
                        success: function (data){

                                   if(data.error == false){

                                    alert("your username is successfuly changed");

                                       $(location).attr('href','account_setting_registrar.php');
                                   }
                                   else{
                                    alert("update error");
                                 }
                       }  
                    });

                }

                else{
                   alert("please put the new username");
                 }

});

            $('#change_eadd_button').click(function (){

                eadd = $('#new_chnge_eadd').val();

                if(eadd != "" ){
                        $.ajax({
                            type: 'POST',
                            url: 'account_setting_registrar_get.php',
                            dataType: 'json',
                            data:'emailadd='+eadd,
                            success: function (data){

                               if(data.error == false){

                                alert("your email address is successfuly changed");
                                $(location).attr('href','account_setting_registrar.php');
                               }

                               else{
                                alert("update error");
                               }

                             }
                        });
                 }

                 else{
                   alert("please put the new username");
                 }

        });

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:30:53.160

我认为您的验证应该更彻底...

`null`您只检查空字符串，但是如果用户名是或也是，您也不希望它有效`undefined`。

您的验证应该如下：

```
if (username) {
 // ajax
} 
```

这将检查以下内容：

*   空值
*   不明确的
*   钠
*   空字符串 ("")
*   0
*   错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:25:10.133

You should use `data.error=='false'` because the response you may getting is a string in json format.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T04:35:54.853

```
 $(document).ready(function (){
         var username ;
         var eadd;

$('#change_usrname_button').click(function (){
    username = $('#new_chnge_username').val();      

            if(username){
                    $.ajax({
                        type: 'POST',
                        url: 'account_setting_registrar_get.php',
                        dataType: 'json',
                        data:'username='+username,
                        success: function (data){

                                   if(data.error == true){

                                    alert("your username is successfuly changed");

                                       $(location).attr('href','account_setting_registrar.php');
                                   }
                                   else{
                                    alert("update error");
                                 }
                       }  
                    });

                }

                else{
                   alert("please put the new username");
                 }

});

            $('#change_eadd_button').click(function (){

                eadd = $('#new_chnge_eadd').val();

                if(eadd){
                        $.ajax({
                            type: 'POST',
                            url: 'account_setting_registrar_get.php',
                            dataType: 'json',
                            data:'emailadd='+eadd,
                            success: function (data){

                               if(data.error == true){

                                alert("your email address is successfuly changed");
                                $(location).attr('href','account_setting_registrar.php');
                               }

                               else{
                                alert("update error");
                               }

                             }
                        });
                 }

                 else{
                   alert("please put the new username");
                 }

        });

            }); 
```

你可以试试这个先生..

# visual-studio-2010 - 数据驱动的单元测试

> ID：12633534
> 
> 赞同：0
> 
> 时间：2012-09-28T04:21:25.843
> 
> 标签：visual-studio-2010, unit-testing, relative-path, absolute-path

以下代码用于从 CSV 文件向单元测试注入数据。

[DataSource("Microsoft.VisualStudio.TestTools.DataSource.CSV", "|DataDirectory|\CalculatePowerInputFraction05.csv", "CalculatePowerInputFraction05#csv", DataAccessMethod.Sequential), DeploymentItem("Simulation.Test\CalculatePowerInputFraction05.csv"), TestMethod ]

公共无效CalculatePowerTest3（）{}

我通过以下方式设置上述属性

在测试视图中右键单击测试 -> 属性 -> 连接字符串 -> 选择 CSV 文件

我面临的问题是，|DataDirectory| 包含绝对路径。我无法在任何其他系统中运行测试。有没有其他方法可以向 TestContext 提供输入，以便可以通过提供相对路径来解决绝对路径的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:36:13.327

我没有在 Visual Studio 上工作过，但在 java 中我会这样做。将 DataDirectory 的值存储在一些属性文件中，并将值读入您的测试中。在不同的系统上，可以在运行测试之前更改属性文件的值。

# c# - 允许实现类将自己用作类型

> ID：12633538
> 
> 赞同：5
> 
> 时间：2012-09-28T04:22:22.450
> 
> 标签：c#

如果在 C# 中可以进行以下操作，我只是在徘徊。

假设我有一个类似 List 的界面来强制执行操作`reverse`。IE：

```
public interface ReversableList<T> {
      // Return a copy of this list but reversed
      ReversableList<T> Reverse();

      // We still need to return the contained type sometimes
      T Get(int index)
} 
```

但是，现在当我去实现该接口时：

```
public class ListImplementation<T> : ReversableList<T> 
      ReversableList<T> Reverse();   
} 
```

我仍然被迫使用界面`ReversableList`。所以即使用户直接实例化my ，调用方法时`ListImplementation`还是要强制处理：`ReversableList``Reverse`

```
var concreteList = new ListImplementation<String>();
ReversableList<T> reversed = concreteList.Reverse(); 
```

而我想到`Reverse()`的是`ListImplementation`will 是 another `ListImplementation`，就像这样：

```
var concreteList = new ListImplementation<String>();
ListImplementation<String> reversed = concreteList.Reverse(); 
```

同时仍然实现了足够通用的接口。

*如果这令人困惑，请告诉我，我将澄清/添加任何必要的细节或更正。谢谢！*

## 兴趣来源

*以下是为什么这对我来说很有趣的解释。*

我通过它继承的所有接口（特征）跟踪了 scala 集合中调用的函数（这是一个具体`reversed`类型[）](http://www.decodified.com/scala/collections-api.xml)。`List`

我的发现非常好奇。

原始`reverse`方法是在[`GenSeqLike`trait](http://www.scala-lang.org/api/current/scala/collection/GenSeqLike.html)上抽象定义的。

```
trait GenSeqLike[+A, +Repr] ...
    def reverse: Repr   // <--- NO BODY, means abstract 
```

然后，它在扩展trait的[trait SeqLike中](http://www.scala-lang.org/api/current/scala/collection/SeqLike.html)*具体*定义：`GenSeqLike`

```
trait SeqLike[+A, +Repr] extends GenSeqLike[A, Repr]
    def reverse: Repr
        //iterates through this seqence
        // and reverses 
        for (x <- this)
           //...etc 
```

然后，有趣的是接下来的两个特征：

```
trait Seq[+A] extends SeqLike[A, Seq[A]]   //<-- NOTE here is the type for "Repr"
     //no mention of reverse

trait LinearSeq[+A] extends Seq[A] with SeqLike[A, Seq[A]] //<-- NOTE type again
    // no mention of reverse 
```

两者都获得了该`reverse`功能的“免费”版本，但它们都根据各自的“接口”（特征）工作。所以`reverse`on`Seq`返回一个`Seq`.

最后，`List`具体类实现了`LinearSeq`特征并重新定义了`reverse`方法（我假设是为了提高效率）。

```
sealed abstract class List[+A] extends LinearSeq[A]
                                 with LinearSeqOptimized[A, List[A]] 

      override def reverse: List[A] = {
          //faster impl without foreach iteration
          ...
      } 
```

其中`LinearSeqOptimized`只是另一个一直到 的特征“链” `SeqLike[A, Repr]`。

所以你可以看到，一个通用的“接口”是如何被用来指定一些“行为”的，一个中间的“接口”是如何提供某种“默认的”实现的，以及所有的子“接口”和子类型是如何获得好处的该实现的同时将返回类型保留为它们的“自己的”类型。呸。令人困惑，我知道！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T04:46:06.667

你可以这样做，虽然它可能有点棘手。

把`ReversableList`界面改成这样：

```
public interface ReversableList<L, T> where L : ReversableList<L, T>
{
    // Return a copy of this list but reversed
    L Reverse();
} 
```

现在你像这样实现它：

```
public class ListImplementation<T> : ReversableList<ListImplementation<T>, T>
{
    public ListImplementation<T> Reverse() { /* code */ }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:58:35.957

像这样的东西怎么样

```
public interface IReversableList<T> where T : IReversableList<T>
{
    // Return a copy of this list but reversed 
    T Reverse();
}

public class ListImplementation<T> : IReversableList<ListImplementation<T>>
{
    public ListImplementation<T> Reverse()
    {
        return new ListImplementation<T>();
    }
} 
```

然后可以用作

```
var concreteList = new ListImplementation<string>();
ListImplementation<string> reversed = concreteList.Reverse(); 
```

**编辑**

在界面上添加了约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:47:23.003

这种特殊情况已经由 Enumerable 扩展处理：[Enumerable.Reverse](http://msdn.microsoft.com/en-us/library/bb358497.aspx)

```
 var list = new List<string>(){"a","b","c"};
 list.Reverse(); 
```

不是这个问题的答案，但可能对未来的搜索者有所帮助！

# java - 带有 ObjectInputStream 的 Java 奇怪的运行时错误

> ID：12633545
> 
> 赞同：1
> 
> 时间：2012-09-28T04:22:57.940
> 
> 标签：java, deserialization, runtime-error

我突然收到这个错误。它以前一直工作到今天。我想知道 java 是否更新了或什么东西，并从工作中杀死了它。

我得到的错误：

```
java.io.InvalidClassException: javax.swing.JComponent; local class incompatible: stream classdesc serialVersionUID = -1030230214076481435, local class serialVersionUID = -2790168081368361182 
```

当我执行以下操作时会发生这种情况

```
....
ObjectInputStream open = new ObjectInputStream(openFile);
Object obj =  open.readObject(); <--- dies here 
```

我应该怎么解决这个问题。我希望能够再次打开我的文件。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:35:29.933

这将是因为您在与`openFile`您现在运行的版本不同的 jdk/jre 版本中创建了该文件。所以`JComponent`类的 serialVersionid 是不同的。

尝试使用以前的 jre 运行您的应用程序（不能说它是旧的还是新的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T04:50:15.077

是的。我怀疑你已经切换了 Java 的版本。请注意，[JComponent 的 javadoc 是](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html)这样说的：

> *“警告：此类的序列化对象将与未来的 Swing 版本不兼容。当前的序列化支持适用于运行相同版本 Swing 的应用程序之间的短期存储或 RMI。从 1.4 开始，支持所有 JavaBeans 的长期存储已添加到 java.beans 包中。请参阅 XMLEncoder。”*

* * *

> 我应该怎么解决这个问题。我希望能够再次打开我的文件。

除了切换回您之前使用的 JRE/JDK 之外，您无能为力。长期的解决方法是重新设计您的应用程序以其他方式存储状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:26:39.343

将您的 clsas serialVersionUID 更改`-2790168081368361182`为`-1030230214076481435`，然后尝试一下。

# ruby-on-rails - 在 Rails 中过滤 to_json 中的嵌套模型集合

> ID：12633546
> 
> 赞同：3
> 
> 时间：2012-09-28T04:23:01.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我有两个模型：

```
class Calendar < ActiveRecord::Base
  has_many :events
end

class Event < ActiveRecord::Base
  belongs_to :calendar
end 
```

我需要将所有带有嵌套事件的日历输出为 json，我可以这样做：

```
Calendar.all.to_json(:include => :events) 
```

但我还需要过滤事件，例如：

```
where(:name => 'bla') 
```

我该怎么做？到目前为止，我的解决方案是手动将每个日历转换为哈希，过滤事件并将它们也转换为哈希，然后将事件附加到日历哈希并在最后转换为 to_json。但我希望有更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:37:14.197

我认为这应该有效：

```
Calendar.includes(:events).where('events.name' => 'bla').to_json(:include => :events) 
```

# java - 使用多个 JFrame 导出 JAR

> ID：12633547
> 
> 赞同：1
> 
> 时间：2012-09-28T04:23:14.207
> 
> 标签：java, jar, export

我知道如何导出 Jar 文件并且以前有很多次。在我当前的项目中，我能够完美地导出和运行它，但是只要我在单击按钮加载它时将另一个 JFrame 添加到项目中，JFrame 就不会加载，而是 JAR 只是冻结。不会崩溃或任何东西，只是冻结。这是个常见的问题吗？可以做些什么来修复它？

第一个 JFrame

```
JFrame frame = new JFrame();

public Launcher(int id) {
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) {
        e.printStackTrace();
    }
    frame.setUndecorated(true);
    frame.setTitle("Launcher");
    frame.setSize(new Dimension(width, height));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(this);
    frame.setLocationRelativeTo(null);
    frame.setResizable(false);
    frame.setVisible(true);
    window.setLayout(null); 
```

打开第二个 JFrame 的代码

```
if (Input.Clicked == 1) {
    config.loadConfig("res/Config/config.xml");
    frame.dispose();
    new NewLauncher();

} 
```

NewLauncher() 的代码

```
 public NewLauncher() {

    Display app = new Display();
    JFrame frame = new JFrame();
    frame.add(app);
    frame.setSize(Display.getGameWidth(), Display.getGameHeight());
    frame.getContentPane();
    frame.setTitle(Display.TITLE);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
    frame.setResizable(false);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    game.start();
    stopMenuThread();
} 
```

用事件队列编辑

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable()
    {
       public void run()
       {
        new Launcher(0);
       }
    });
    //new Launcher(0);
} 
```

代码在调试器和编译器中运行良好。仍然无法在 Jar 中运行，我这样做是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:56:15.710

确保您在事件调度线程中运行 UI

```
EventQueue.invokeLater(new Runnable() {
 // Run your code here ...
}); 
```

确保您没有在 Event Dispatching Thread 上执行任何耗时的任务，包括休眠或等待任何锁

# heroku - 根据 Blitz.io 的 Heroku SSL 瓶颈

> ID：12633550
> 
> 赞同：3
> 
> 时间：2012-09-28T04:24:16.693
> 
> 标签：heroku

我有一个简单的 Django 应用程序，我一直在用 Blitz.io 进行测试。当我使用许多 dynos 进行测试时，我可以在 http://X.com 上获得数千个 req/s 当我切换到 https://X.com 时，无论有多少 dynos，我都不会超过 72 req/s。在 https://X.herokuapp.com/ 上我得到了更多，但它仍然以几百个 req/s 最高。

这是不会出现在正常用例中的侥幸吗？闪电战问题？一个heroku问题？资源会随着需求而扩大吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T16:01:37.357

我们在 blitz.io 和 loader.io 上遇到了非常相似的问题。有关更多详细信息，请参阅我们在[http://making.fiftythree.com/load-testing-an-unexpected-journey/](http://making.fiftythree.com/load-testing-an-unexpected-journey/)上的博客文章。blitz.io 很可能是您的 SSL 问题的原因。我们发现[BlazeMeter](http://blazemeter.com/)可以很好地处理负载。

如果成本是一个问题，您可能还想尝试开源工具，如[siege](http://www.joedog.org/siege-home/)或[JMeter](http://jmeter.apache.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-20T04:42:31.583

**此答案假定[https://X.com](https://X.com)使用 SSL:endpoint heroku 插件来提供自定义证书。**

ssl:endpoint 插件是使用 AWS Elastic Load Balancer 实现的。ELB 使用 DNS 在其节点之间分配负载。以我的经验，每个单独的 ELB 节点并不是特别强大，从 CPU 的角度来看，SSL 协商/解密并非易事。因此，在进行负载测试时，重要的是：

1.  使用每个请求重新解析主机名以在所有 ELB ip 之间分配负载，尤其是在添加新的 IP 以响应增加的流量时。
2.  非常缓慢地增加负载测试。亚马逊建议每 5 分钟最多将 ELB 的负载增加 50%。

如果单个 ELB 节点上允许的并发连接方面的 HTTP/HTTPS 容量之间的差异很大，我并不感到特别惊讶，如果您固定到一个 IP，这可能是您观察到的差异的原因。

我不知道 https://*.herokuapp.com 堆栈的详细信息，但我一点也不惊讶它可以提供比冷 ssl:endpoint ELB 更多的 https 流量。

# javascript - KineticJS 中的缩放和平移

> ID：12633554
> 
> 赞同：9
> 
> 时间：2012-09-28T04:24:50.273
> 
> 标签：javascript, viewport, kineticjs

有没有一种方法可以使用 KineticJS 在画布上缩放和平移？我找到了这个库[kineticjs-viewport](http://code.google.com/p/kineticjs-viewport/)，但只是想知道是否有任何其他方法可以实现这一点，因为这个库似乎使用了很多额外的库，并且不确定哪些是完成工作绝对必要的。

或者，我什至愿意在感兴趣的区域周围绘制一个矩形并放大该特定区域。关于如何实现这一目标的任何想法？一个 JSFiddle 的例子会很棒！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-06T10:19:57.463

您可以简单地添加`.setDraggable("draggable")`到一个图层，只要光标下有一个对象，您就可以拖动它。您可以添加一个大的透明`rect`的以使所有内容都可以拖动。可以通过设置图层的比例来实现缩放。在此示例中，我通过鼠标滚轮控制它，但它只是一个函数，您可以在其中传递要缩放的量（正放大，负缩小）。这是代码：

```
var stage = new Kinetic.Stage({
    container: "canvas",
    width: 500,
    height: 500
});

var draggableLayer = new Kinetic.Layer();
draggableLayer.setDraggable("draggable");

//a large transparent background to make everything draggable
var background = new Kinetic.Rect({
    x: -1000,
    y: -1000,
    width: 2000,
    height: 2000,
    fill: "#000000",
    opacity: 0
});

draggableLayer.add(background);

//don't mind this, just to create fake elements
var addCircle = function(x, y, r){
  draggableLayer.add(new Kinetic.Circle({
        x: x*700,
        y: y*700,
        radius: r*20,
        fill: "rgb("+ parseInt(255*r) +",0,0)"
    })
  );
}

var circles = 300
while (circles) {
  addCircle(Math.random(),Math.random(), Math.random())
  circles--;
}

var zoom = function(e) {
  var zoomAmount = e.wheelDeltaY*0.001;
  draggableLayer.setScale(draggableLayer.getScale().x+zoomAmount)
  draggableLayer.draw();
}

document.addEventListener("mousewheel", zoom, false)

stage.add(draggableLayer) 
```

[http://jsfiddle.net/zAUYd/](http://jsfiddle.net/zAUYd/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T12:38:21.467

这是缩放和平移图层的非常快速和简单的实现。如果您有更多需要同时平移和缩放的图层，我建议将它们分组，然后将 on("click") 应用于该组以获得相同的效果。

[http://jsfiddle.net/renyn/56/](http://jsfiddle.net/renyn/56/)

如果不明显，点击左上角的浅蓝色方块进行放大缩小，点击左下角的粉色方块进行左右平移。

编辑：作为说明，这当然可以更改为支持“mousedown”或其他事件，我不明白为什么不能将转换实现为 Kinetic.Animations 以使其更平滑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T02:19:38.307

这就是我到目前为止所做的......希望它会对你有所帮助。

[http://jsfiddle.net/v1r00z/ZJE7w/](http://jsfiddle.net/v1r00z/ZJE7w/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T02:25:22.797

我实际上写了 kineticjs-viewport。我很高兴听到你对此感兴趣。

它实际上不仅仅用于拖动。它还允许缩放和以性能为中心的剪辑。剪辑区域之外的东西根本不会被渲染，因此即使您有一个包含大量对象的巨大图层，您也可以获得出色的渲染性能。

这就是我的用例。例如，您通过较小的视口区域查看的大型 RTS 地图——想想星际争霸。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T20:54:10.837

当我今天与 Kinetic 合作时，我发现了一个您可能感兴趣的[SO 问题。](https://stackoverflow.com/questions/12345780/zoomooz-zoomcontainer-shift-away)

我知道作为评论会更好，但我没有足够的代表，无论如何，我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-12T05:53:44.933

这些答案似乎不适用于 KineticJS 5.1.0。这些主要不适用于 scale 函数的签名更改：

```
 stage.setScale(newscale); --> stage.setScale({x:newscale,y:newscale}); 
```

但是，以下解决方案似乎适用于 KineticJS 5.1.0：

JSFiddle：http: [//jsfiddle.net/rpaul/ckwu7u86/3/](http://jsfiddle.net/rpaul/ckwu7u86/3/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-20T21:30:00.440

不幸的是，设置状态或图层可拖动会阻止对象不可拖动。Duopixel 的缩放解决方案很好，但我宁愿将它设置为舞台级别，而不是图层级别。

她是我的解决方案

```
var stage = new Kinetic.Stage({
    container : 'container',
    width: $("#container").width(),
    height: $("#container").height(),
});
var layer = new Kinetic.Layer();

//layer.setDraggable("draggable");
var center = { x:stage.getWidth() / 2, y: stage.getHeight() / 2};

var circle = new Kinetic.Circle({
    x: center.x-100,
    y: center.y,
    radius: 50,
    fill: 'green',
    draggable: true
});
layer.add(circle);
layer.add(circle.clone({x: center.x+100}));

// zoom by scrollong
document.getElementById("container").addEventListener("mousewheel", function(e) {
  var zoomAmount = e.wheelDeltaY*0.0001;
  stage.setScale(stage.getScale().x+zoomAmount)
  stage.draw();
  e.preventDefault();
}, false)

// pan by mouse dragging on stage
stage.on("dragstart dragmove", function(e) {window.draggingNode = true;});
stage.on("dragend", function(e) { window.draggingNode = false;});
$("#container").on("mousedown", function(e) {
    if (window.draggingNode) return false;
    if (e.which==1) {
        window.draggingStart = {x: e.pageX, y: e.pageY, stageX: stage.getX(), stageY: stage.getY()};
        window.draggingStage = true;
    }
});
$("#container").on("mousemove", function(e) {
    if (window.draggingNode || !window.draggingStage) return false;
    stage.setX(window.draggingStart.stageX+(e.pageX-window.draggingStart.x));
    stage.setY(window.draggingStart.stageY+(e.pageY-window.draggingStart.y));
    stage.draw();
});
$("#container").on("mouseup", function(e) { window.draggingStage = false } );

stage.add(layer); 
```

[http://jsfiddle.net/bighostkim/jsqJ2/](http://jsfiddle.net/bighostkim/jsqJ2/)

# mysql - 程序怎么写？

> ID：12633562
> 
> 赞同：-1
> 
> 时间：2012-09-28T04:25:56.800
> 
> 标签：mysql

```
zone_id(PK)   ZoneName
-----------   --------
1             east
2             west
3             north
4             south

tbluser

usrId(PK) userzoneId(FK to tblzone)   username
--------  -------------------------   ------------
1         1                           manish
2         3                           rahul
3         2                           ankit
4         4                           amir
5         2                           rashmi
6         1                           akash
tbldoctor

docId(PK)    usrId(Fk to tbluser)      docname
--------     --------------------      ------------
1             2                        hemant
2             2                        chintu
3             3                        rahim
4             1                        salman
5             3                        kishor
6             3                        saurabh
7             2                        banti

tblmedAssign 

transId(Pk)  doctorId(FK to tbldoctor)    medId(FK)    dateInsert
----------   -------------------------    ------   -----------
1            2                            2        20/12/2012
2            3                            3        21/12/2012
3            2                            3        23/12/2012
4            4                            1        24/12/2012

tblunnormalize
 transId(Pk)       docname    username  ZoneName  dateInsert
-------------      -------    --------  --------  ---------- 
```

我想要的是有一个非规范化表，其中包含与所有这些表相关的数据。是否可以编写在运行时插入数据的过程意味着当数据插入 tblmedAssign 表时，数据应该在非规范化表中的特定时间插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:42:40.663

干得好 ：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `medAssignProcedure`$$

CREATE

    PROCEDURE medAssignProcedure(IN transId INT, IN doctorId INT, IN medId INT )

    BEGIN
    DECLARE doctorname VARCHAR(100);
    DECLARE user_Name VARCHAR(100);
    DECLARE zone_name VARCHAR(100);
    DECLARE userId INT;
    DECLARE datetimenow DATETIME;
    SET datetimenow = NOW();
    INSERT INTO tblmedassign VALUES (transId,doctorId,medId,datetimenow);
    SET doctorname = (SELECT docname FROM tbldoctor WHERE docid = doctorId);
    SET userId = (SELECT usrid FROM tbldoctor WHERE docid = doctorId);
    SET user_Name = (SELECT username FROM tbluser WHERE usrid = userId);
    SET zone_name = (SELECT zonename FROM tblzone WHERE zone_id = (SELECT userzoneId FROM tbluser WHERE usrid = userId));   
    INSERT INTO tblunnormalize VALUES (transId, doctorname, user_Name, zone_name, datetimenow);

    END$$

DELIMITER ; 
```

# apache - 安装完成后使用 Inno Setup 复制文件

> ID：12633565
> 
> 赞同：4
> 
> 时间：2012-09-28T04:26:30.570
> 
> 标签：apache, inno-setup, httpd.conf

我正在通过 Inno Setup 安装 Apache。现在我想在 Apache 安装后将`httpd.conf`文件从本地磁盘复制到 Apache文件夹。`conf`如何使用 Inno Setup 来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-23T13:52:34.850

您可以使用我的代码将您的 httpd.conf 文件复制到 Apache conf 文件夹，试试看：）

```
procedure CurStepChanged(CurStep: TSetupStep);
if CurStep = ssDone then
begin
//copy your httpd.conf file from your localdisk to Apache conf folder
FileCopy('/you/path/httpd.conf','/apache/conf/httpd.conf',False);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-14T05:07:05.660

我通过使用部分中的`AfterInstall`参数解决了这个问题`[Run]`。它工作正常。

# php - 通过if循环获取数字 - PHP

> ID：12633570
> 
> 赞同：0
> 
> 时间：2012-09-28T04:26:56.080
> 
> 标签：php, math, numbers

我有这段代码循环 1 到 99 并且是一个公式。

```
function getExperienceByLevel ($maxLevel)
{
    $levels = array ();
    $current = 0;

    for ($i = 1; $i <= $maxLevel; $i++)
    {
        $levels[$i - 1] = floor ($current / 4);
        $current +=  floor($i+300*pow(2, ($i/9.75)));
    }

    return $levels;
} 
```

首先你像这样启动它，`$aLevels = getExperienceByLevel(99);`然后看看你需要多少经验才能升级`6`你这样做，`echo $aLevels[5];`因为它是一个数组。

现在我正在尝试反向操作。通过经验获得等级。

```
function getLevelByExp($exp) 
{
    $aLevels = getExperienceByLevel(99);

    for ($i = 1; $i < 100; $i++)
    {
        if ($exp > $aLevels[$i-1]) 
        { 
            return $i;
        }
    }
} 
```

所以我尝试这样做：

```
$aLevels = getExperienceByLevel(99);
echo getLevelByExp(131); 
```

当被调用`getLevelByExp(131);`或内部的任何数字时，它似乎返回 a`1`即使它应该是`2`因为 3 级是`167`EXP 而 2 级是`80`EXP。这是一个参考图片：http: [//i.imgur.com/gEYgu.png](http://i.imgur.com/gEYgu.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:33:58.543

```
function getLevelByExp($exp) {
    $aLevels = getExperienceByLevel(99);

   for ($i = 99; $i >= 1; $i--)
    {
       if ($exp > $aLevels[$i-1])
        {
        return $i;
        }
    }  
} 
```

只要 $exp > $aLevels[$i-1]，您就会返回。在原始循环的第一次运行中，$aLevels[$i-1] = $aLevels[0] = 0，因此对于任何非负 $exp 值，它总是会立即返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:40:14.037

你犯了两个错误：你索引你的级别数组错误。而你检查它的方式是错误的。用这个：

[http://codepad.viper-7.com/MGpOUu](http://codepad.viper-7.com/MGpOUu)

```
function getExperienceByLevel($maxLevel) {
    $levels = array ();
    $current = 0;
    for ($i = 1; $i <= $maxLevel; $i++) {
        $levels[$i] = floor ($current / 4);
        $current +=  floor($i+300*pow(2, ($i/9.75)));
    }
    return $levels;
}

function getLevelByExp($exp)  {
    $levels = getExperienceByLevel(99);
    $current = 0;
    foreach($levels as $level => $required) {
        if($required>$exp)return $current;
        $current = $level;
    }
    return $current;
}

echo getLevelByExp(131);

// returns 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:34:22.037

您需要相反的条件，并与下一个级别进行比较，因此您可以确定给定的 exp 级别不适合任何更高级别。这段代码对我有用：

```
if ($exp < $aLevels[$i])
{ 
    return $i;
} 
```

很好很简单。试试看：[http ://codepad.viper-7.com/FrjtHT](http://codepad.viper-7.com/FrjtHT)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T04:37:36.610

改变

```
if ($exp > $aLevels[$i-1]) 
```

到

```
if ($exp > $aLevels[$i-1] && $exp < $aLevels[$i]) 
```

检查并且它正在工作

工作示例[http://codepad.viper-7.com/BjmHad](http://codepad.viper-7.com/BjmHad)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T04:44:11.787

我认为你应该这样做

```
function getLevelByExp($exp)      
{     
    $aLevels = getExperienceByLevel(99);     

    for ($i = 1; $i < count($aLevels); $i++) 
    { 
        if ($exp >= $aLevels[$i-1] && ($exp - $aLevels[$i-1] < $aLevels[$i] - $aLevels[$i-1]))  
        {  
            return $i; 
        } 
    } 
} 
```

查看[http://www.phpfiddle.org/main/code/paw-08f](http://www.phpfiddle.org/main/code/paw-08f)

# .net - wpf中的窗口转换

> ID：12633573
> 
> 赞同：0
> 
> 时间：2012-09-28T04:27:36.673
> 
> 标签：.net, wpf, animation

我正在尝试在窗口上执行淡入淡出转换。我可以进行过渡，但只能过渡到窗口的内容。我的意思是窗口和标题栏的框架并没有像其中的内容那样转换。请检查下面的 XAML 代码，看看必须做什么才能使整个窗口淡入。

```
<Window x:Class="WpfApplication6.newwindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="newwindow" Height="295" Width="371" PreviewStylusInRange="Window_PreviewStylusInRange">
<Window.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:2" FillBehavior="HoldEnd" />
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Window.Triggers>

<Grid Height="257" Width="349">
    <Label Content="Label" Height="28" HorizontalAlignment="Left" Margin="115,0,0,112" Name="label1" VerticalAlignment="Bottom" Width="127" Background="#FFDB1F1F" />

    </Grid> 
```

我正在使用带有 .NET 3.5 的 VS 2010。

谢谢你。

# php - Jquery Raty 启动插件：为多个 div 设置分数

> ID：12633576
> 
> 赞同：2
> 
> 时间：2012-09-28T04:27:54.350
> 
> 标签：php, jquery, raty

我正在使用 jquery 星级插件“Raty” [https://github.com/wbotelhos/raty](https://github.com/wbotelhos/raty)。我正在使用 PHP 从数据库中生成结果集。这也包括分数。我想为每个单独的评分组件设置 score 属性。我怎样才能做到这一点？我正在使用这种语法来显示星星。

```
$('.stars_small').raty({
      readOnly : true,
      half  : true,
      score : 2,
      space : false
 });  

<div class="stars_small"></div> 
```

单个页面中有许多 div，类“stars_small”是动态生成的。我想为每个 div 设置“分数”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T07:27:03.173

```
$('.stars_small').raty({
             readOnly : true,
             half  : true,
             score: function() {
                      return $(this).attr('data-rating');
                     }
              space : false
         }); 
```

这对我来说很好。该插件正在像这样添加一个隐藏的`div`文本`class="stars_small"` 框

```
<div class="stars_small">
     <input type="hidden" name="score" value="3.5" readonly="readonly">
</div> 
```

所以我只是`value`用来自数据库查询的数字设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:35:16.047

试试这个

```
 $('.stars_small').each(function() {

         $(this).raty({
                    readOnly : true,
                    half  : true,
                    score : 2,
                    space : false
              }); 
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:44:26.197

假设您已经使用 PHP 生成了 JS 行：

```
// lines of JS generated with a loop in PHP (for the rate content)
var rates = [];
rates.push({...one rate coming from PHP...});
rates.push({...one rate coming from PHP...});
// etc... 
```

你可以运行你的评级明星：

```
$(document).ready(function() {

    $(".starts_small").each(function(index, element) {

        $(this).raty(rates[index]);

    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T15:37:22.387

这是我所做的：

我为每个明星 div 创建了一个单独的类：

```
`<div class="star s0"></div>
<div class="star s1"></div>
<div class="star s2"></div>` 
```

`我还在我的模板中生成值数组（即，将值从我的服务器端脚本传递到网页）。像这样：`

 ````
`var array = new Array(2.4, 2.9, 5.0);` 
```

`然后我在调用中声明所有三个“星标”的共同点`$(".star")`，并在一个循环中设置值：`

 ````
`$('.star').raty({
    half : true
});

for (i = 0; i < array.length; i++) {
    $('.s' + i).raty({
        score:array[i]
    });
}` 
```

* * *

 `## 回答 #5

> 赞同：0
> 
> 时间：2015-04-14T23:08:20.877

对于 V.2.7 Jquery，比率为以下形式：

如果您需要根据动态值开始评分，则可以使用回调。

您可以为其传递任何值，不一定是数据值。例如，您可以使用字段值。

```
<div data-score="1"></div>

$('div').raty({
    score: function() {
    return $(this).attr('data-score');
  }
}); 
``````

# node.js - commonjs 的 jsdoc 需要

> ID：12633582
> 
> 赞同：0
> 
> 时间：2012-09-28T04:28:27.183
> 
> 标签：node.js, code-completion, commonjs, jsdoc, webstorm

我将 webstorm ide 与 nodejs 一起使用。当我创建模块并需要它们时，我没有代码完成。

例如：

测试.js

```
/** @module test*/
module.exports = {
    run: function () {}
}; 
```

main.js

```
var test = require(__dirname+"/test.js");
test. //code completion does not offer "run" 
```

我还没有在 jsdoc 3 文档中找到任何关于模块用法的信息。:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:53:30.960

```
var test = require("./test.js");
test. //code completion offers "run" 
```

所以你必须使用“。” 而不是 __dirname。

# r - hist.default(xa) 中的错误：“x”必须是数字

> ID：12633586
> 
> 赞同：4
> 
> 时间：2012-09-28T04:29:00.467
> 
> 标签：r, histogram

我是一个完整的 R 初学者，并且正在尝试做一些非常基本的事情 - 制作我从 Excel 导入的两个向量的直方图。

向量是 xa 和 xb。我尝试了 hist(xa)，并得到以下错误：

```
Error in hist.default(xa) : 'x' must be numeric 
```

所以我做了一些搜索，并尝试使用 as.numeric(xa) 来解决这个问题，并得到：

```
Error: (list) object cannot be coerced to type 'double' 
```

所以我尝试了 as.list 函数，但它把我的向量变成了一个矩阵。不太清楚发生了什么。向量中的数字都是大约 -2 到 +10 之间的 4 位数字。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T06:12:29.070

这是您可以尝试的东西...不能保证，因为您没有给出有效的示例：

```
newXa <- sapply(xa, as.numeric)
hist(newXa) 
```

应该做的是看'x'的结构

```
str(x) 
```

然后，如果 'xa' 是您指代 x[['a']] 的方式，您将这样做：

```
hist( x[['a']] ) 
```

如果`str(x)`表明“a”列是一个因素，则可能会更成功：

```
 hist( as.numeric(as.character(x[['a']]))  ) 
```

# c# - 使用 JSON.Net 解析 ISO 持续时间

> ID：12633588
> 
> 赞同：11
> 
> 时间：2012-09-28T04:29:32.940
> 
> 标签：c#, asp.net-web-api, json.net

我有一个 Web API 项目，其中包含以下设置`Global.asax.cs`：

```
var serializerSettings = new JsonSerializerSettings
    {
        DateFormatHandling = DateFormatHandling.IsoDateFormat, 
        DateTimeZoneHandling = DateTimeZoneHandling.Utc
    };

serializerSettings.Converters.Add(new IsoDateTimeConverter());

var jsonFormatter = new JsonMediaTypeFormatter { SerializerSettings = serializerSettings };
jsonFormatter.MediaTypeMappings.Add(GlobalConfiguration.Configuration.Formatters[0].MediaTypeMappings[0]);

GlobalConfiguration.Configuration.Formatters[0] = jsonFormatter;

WebApiConfig.Register(GlobalConfiguration.Configuration); 
```

尽管如此，Json.Net 无法解析[ISO 持续时间](http://en.wikipedia.org/wiki/ISO_8601#Durations)。

它抛出这个错误：

> 将值“2007-03-01T13:00:00Z/2008-05-11T15:30:00Z”转换为类型“System.TimeSpan”时出错。

我正在使用 Json.Net v4.5。

我尝试了不同的值，例如“P1M”和wiki页面上列出的其他值，但没有成功。

所以问题是：

1.  我错过了什么吗？
2.  还是我必须编写一些自定义格式化程序？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-07T21:02:44.517

我遇到了同样的问题，现在正在使用这个自定义转换器将 .NET TimeSpan 转换为 ISO 8601 Duration 字符串。

```
public class TimeSpanConverter : JsonConverter
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var ts = (TimeSpan) value;
        var tsString = XmlConvert.ToString(ts);
        serializer.Serialize(writer, tsString);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue,
        JsonSerializer serializer)
    {
        if (reader.TokenType == JsonToken.Null)
        {
            return null;
        }

        var value = serializer.Deserialize<String>(reader);
        return XmlConvert.ToTimeSpan(value);
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof (TimeSpan) || objectType == typeof (TimeSpan?);
    }
} 
```

# vb.net - VB.NET 程序在其他电脑上崩溃

> ID：12633590
> 
> 赞同：0
> 
> 时间：2012-09-28T04:29:40.883
> 
> 标签：vb.net

我正在尝试为我正在制作的游戏制作启动器。该程序在我的另一台计算机上运行良好。我最近将源转移到我的电脑上。不过我遇到了问题，我尝试调试应用程序并收到此错误。

我弄清楚了这个问题。这段代码在这里

```
.GetVersionInfo("C:\Users\eriger777\Desktop\test\bin\Launcher.exe") 
```

试图执行一个不存在的文件：3。

```
An error occurred creating the form. 
```

这是导致错误的代码。

```
 <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
    Protected Overrides Sub OnCreateMainForm()
        Me.MainForm = Global.Launcher.frmMain
    End Sub
End Class 
```

堆栈跟踪

```
 at Launcher.My.MyProject.MyForms.Create__Instance__[T](T Instance) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 190
   at Launcher.My.MyProject.MyForms.get_frmMain()
   at Launcher.My.MyApplication.OnCreateMainForm() in C:\Users\Gryphon\Downloads\Launcher\Launcher Source Main\Launcher Source\My Project\Application.Designer.vb:line 35
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun()
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel()
   at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine)
   at Launcher.My.MyApplication.Main(String[] Args) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:00:27.660

我弄清楚了这个问题。这段代码在这里

> .GetVersionInfo("C:\Users\eriger777\Desktop\test\bin\Launcher.exe") 试图执行一个不存在的文件：3。

# java - Mac 上的 Java 表异常

> ID：12633591
> 
> 赞同：0
> 
> 时间：2012-09-28T04:29:52.317
> 
> 标签：java, macos, eclipse-plugin, swt

我正在开发一个使用 Table 打印到视图的 Eclipse 插件。我在各种 Eclipse 和 Ubuntu 版本上测试了系统，并且表中的值是可见的。即行适合内容。但是在将其部署到 Mac 时，行不适合内容。我可以看到里面有东西，但整个内容不可见，我也无法调整它的大小。这是我正在使用的代码：

```
int style = SWT.NONE;
Table table = new Table(composite, style);
table.setHeaderVisible(true);
table.setLinesVisible(true);

TableColumn col = new TableColumn(table, style);
// Is this ok?
col.setWidth(200);
col.setResizable(true);

for (int i = 0; i < contents.size(); i++){
    TableItem item = new TableItem(table, style);            
    item.setText(contents.get(i));
} 
```

我尝试了不同的风格，但没有运气。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:03:20.147

好的，我想出了这段代码可以解决问题：

```
public class TableItemPaintListener implements Listener{    
 public void handleEvent(Event event) {
     switch (event.type) {
              case SWT.MeasureItem: {
                  TableItem item = (TableItem) event.item;
                  String text = item.getText();
                  Point size = event.gc.textExtent(text);
                  event.width = size.x;
                  event.height = Math.max(event.height, size.y);
                  break;
            }    
         }
     }
} 
```

接着：

```
table.addListener(SWT.MeasureItem, new TableItemPaintListener()); 
```

基本上，我们在每个表项上触发的绘制事件上安装一个处理程序。然后，我们设置单元格高度值以适应内容。

# asp.net - 从数据集 asp.net 的列中查找值

> ID：12633593
> 
> 赞同：-4
> 
> 时间：2012-09-28T04:29:57.063
> 
> 标签：asp.net, dataset

我想从数据集列 ID 中查找值。这是数据集

```
Id  Value
1   football
2   Tennis
3   Cricket 
```

如果列中不存在任何一个，那么我想在数据集中附加该特定值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:39:29.337

我猜那是数据集中的数据表。首先需要查询id是否在DataTable中：

```
var dataTable = dataSet.Tables[0]; //For this example I'm just getting the first DataTable of the DataSet, but it could be other.
var id = 1;
var value = "football";

//Any(...) will return true if any record matches the expression. In this case, the expression is if a Id Field of the row is equals to the provided id
var contained = dataTable.AsEnumerable().Any(x =>x.Field<int>("Id") == id); 
```

然后，如果它不存在，请添加一个新行：

```
if(!contained)
{
    var row = dataTable.NewRow();

    row["Id"] = id;
    row["Value"] = value;

    dataTable.Rows.Add(row);
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:56:27.667

首先，您应该使用循环来查看您的数据集列“id”是否包含该值。如果 id 不存在，则：

```
 DataRow newrow = ds.Tables[0].NewRow(); //assuming ds is your dataset
   newrow["id"] = "your new id value";
   newrow["value"] = "your new value";
   ds.Tables[0].Rows.Add(newrow); 
```

# windows - 使用预取队列的反调试不适用于我的 cpu

> ID：12633599
> 
> 赞同：2
> 
> 时间：2012-09-28T04:30:18.527
> 
> 标签：windows, debugging, assembly, x86, reverse-engineering

[为什么这段代码能让我检测到调试器？](https://stackoverflow.com/questions/10089273/why-does-this-code-enable-me-to-detect-a-debugger)

上面的链接告诉了我使用预取队列进行反调试的方法，然后我尝试使用下面的代码进行测试，但失败了。谁能帮我指出我的代码是否错误。我的 CPU 是 Intel(R) Core(TM) i7-2630QM 2.00GHz。非常感谢

**ML** : D:\Programs\masm32\Bin\ML.EXE /c /coff /Cp /nologo /I"D:\Programs\masm32\Include" "AntiDebug.asm"

**链接**：D:\Programs\masm32\Bin\LINK.EXE /SECTION:.text,RWE /SUBSYSTEM:WINDOWS /RELEASE /VERSION:4.0 /LIBPATH:"D:\Programs\masm32\Lib" /OUT:"AntiDebug. exe" "反调试.obj"

无论我是否在调试，它总是执行调试标签，并且永远不会执行'jmp normal'。

```
.386
.model flat, stdcall  ;32 bit memory model
option casemap :none  ;case sensitive

include windows.inc
include kernel32.inc
include user32.inc

includelib kernel32.lib
includelib user32.lib

.data
szDebug     db  'Hey, you are debugging!!!',0
szError     db  'Error',0
szNormal    db  'You are running it without debugging',0
szPrompt    db  'Prompt',0

.code
start:
    call IsDebug
debug:
    invoke MessageBox, NULL, addr szDebug, addr szError, MB_OK
    invoke ExitProcess, -1
normal:
    invoke MessageBox, NULL, addr szNormal, addr szPrompt, MB_OK
    invoke ExitProcess, 0
IsDebug:
    mov al, 0c3h
    mov edi, offset IsDebug
    mov cx, 20h
    rep stosb
    jmp normal
end start 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T11:25:42.090

我不知道你的 isdebug proc 在做什么。

这是我的代码，它在我的电脑上运行良好。

```
.386
.model flat, stdcall  ;32 bit memory model
option casemap :none  ;case sensitive

include c:\masm32\include\windows.inc
include c:\masm32\include\kernel32.inc
include c:\masm32\include\user32.inc

includelib C:\masm32\lib\kernel32.lib
includelib C:\masm32\lib\user32.lib

.data
szDebug     db  'Hey, you are debugging!!!',0
szError     db  'Error',0
szNormal    db  'You are running it without debugging',0
szPrompt    db  'Prompt',0

.code
start:
    call IsDebug
debug:
    invoke MessageBox, NULL, addr szDebug, addr szError, MB_OK
    invoke ExitProcess, -1
normal:
    invoke MessageBox, NULL, addr szNormal, addr szPrompt, MB_OK
    invoke ExitProcess, 0
IsDebug:
    invoke IsDebuggerPresent
    test eax,eax
    je normal
    ret
end start 
```

# git - 如果我在 github 上的 git repo 的大小超过 1GB，会发生什么？

> ID：12633603
> 
> 赞同：-7
> 
> 时间：2012-09-28T04:31:35.123
> 
> 标签：git, version-control, github, bitbucket, google-code

以下来自 github:help, [https://help.github.com/articles/what-is-my-disk-quota](https://help.github.com/articles/what-is-my-disk-quota)：

我的问题是如果 repo 的大小超过 1GB**会发生什么，如果我不减小它的大小会发生什么？**（也就是说，我只是忽略了那封礼貌的电子邮件，如果我的 repo 的大小超过 1GB，我可以将更多文件推送到我的 repo）

> GitHub 没有任何设置的磁盘配额。我们尝试在合理的范围内为所有 Git 存储库提供充足的存储空间。保持较小的存储库可确保我们的服务器速度快，并且我们的用户可以快速下载。
> 
> **经验法则：1GB**
> 
> 为了获得最佳性能，我们建议每个存储库保持在 1GB 以下。如果将大文件（通常是二进制文件）保留在存储库之外，则很容易保持此限制。如果您的存储库超过 1GB， **您可能会收到一封来自支持人员的礼貌电子邮件，要求您减小存储库的大小以将其恢复到 1GB 以下**。

这个问题与[如何减少 Github 上的 repo 大小不同](https://stackoverflow.com/questions/1596696/how-to-reduce-the-size-of-a-repo-on-github)

另外我知道谷歌代码对空间配额的限制是 4GB，如果大小超过 4GB 会发生什么？

还有一个问题，bitbucket的一个repo的磁盘使用配额是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:39:03.330

> 如果您的存储库超过 1GB，**您可能会收到一封来自支持人员的礼貌电子邮件，要求您减小存储库的大小以将其恢复到 1GB 以下**。

我想你回答了你自己的问题。

# php - 通过超链接将php会话变量传递给另一个ip中的php页面

> ID：12633607
> 
> 赞同：-1
> 
> 时间：2012-09-28T04:31:44.827
> 
> 标签：php, html, session, session-variables

单击超链接时，我想将会话变量、用户名和密码传递到另一个 php 页面。当我给出如下代码时，变量将传递到所需的页面。

```
<a href="http://localhost/vtigercrm/">Customer Relationship Management</a> 
```

但是当我将其更改为指定如下的 IP 地址时（以便每个人都可以使用它），会话变量没有传递到所需的页面。

```
<a href="http://xx.xx.xx.xx/vtigercrm/">Customer Relationship Management</a> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:36:30.750

是的，大多数网站都使用 cookie 来管理会话密钥。Cookie 不会传递到全新的域。您必须将会话密钥附加到您的 url，或者使用会话密钥作为发布变量进行发布请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:37:26.283

您不能在不同的服务器之间共享它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:35:26.480

这是正确的。另一个域，另一个 cookie，另一个会话 id cookie，另一个会话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T04:37:44.517

尝试这个：

在站点 1：

```
<a href="http://localhost/vtigercrm/index.php?si=<?php echo session_id; ?>">Customer Relationship Management</a> 
```

在站点 2：

```
<?php
    session_start();
    session_id($_GET['si']);
?> 
```

# python - python图像像素编辑

> ID：12633609
> 
> 赞同：1
> 
> 时间：2012-09-28T04:32:09.057
> 
> 标签：python, image

我正在开发一个程序，在该程序中我打开一个图像文件（jpg），编辑一些像素，并用一个新的文件名保存图像。然而，似乎即使我没有编辑任何像素，它们仍在被改变。这是我写的一个快速示例。我所做的只是打开一个图像并用不同的名称保存它。

```
import Image

img1 = Image.open('image.jpg')
print img1.getpixel((0,0))
img1.save('testimage.jpg')

img2 = Image.open('testimage.jpg')
print img2.getpixel((0,0)) 
```

第一个打印语句的输出是 (253,254,248)，第二个输出是 (253,251,255)。如果我对图像完全不做任何事情，为什么绿色和蓝色值会发生变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:37:04.327

JPEG 是有损的：保存 JPEG 可能会导致质量损失，从而改变像素。如果您想在不（进一步）损失质量的情况下进行编辑，请另存为`.png`或其他无损格式。

# c++ - 在 Nvidia NPP ImageCPU 对象中设置像素值？

> ID：12633614
> 
> 赞同：3
> 
> 时间：2012-09-28T04:32:36.453
> 
> 标签：c++, image-processing, cuda, nvidia

在[CUDA SDK 发行版中的](http://developer.nvidia.com/cuda/cuda-toolkit-40)[Nvidia Performance Primitives (NPP)](http://developer.nvidia.com/cuda/nvidia-performance-primitives)图像处理示例中，图像通常作为对象存储在 CPU 上，而图像作为对象存储在 GPU 上。`ImageCPU``ImageNPP`

[boxFilterNPP.cpp](http://mlso.hao.ucar.edu/hao/acos/sw/cuda-sdk/CUDALibraries/src/boxFilterNPP/boxFilterNPP.cpp)是 CUDA SDK 中使用这些`ImageCPU`和`ImageNPP`对象的示例。

当使用类似的过滤器（卷积）函数`nppiFilter`时，将过滤器定义为对象是有意义的`ImageCPU`。但是，我看不到设置对象值的明确方法`ImageCPU`。

```
npp::ImageCPU_32f_C1 hostKernel(3,3); //allocate space for 3x3 convolution kernel 

//want to set hostKernel to [-1 0 1; -1 0 1; -1 0 1]

hostKernel[0][0] = -1;   //this doesn't compile
hostKernel(0,0) = -1;    //this doesn't compile
hostKernel.at(0,0) = -1; //this doesn't compile 
```

**如何手动将值放入`ImageCPU`对象中？**

笔记：

*   我实际上并没有`nppiFilter`在代码片段中使用；我只是提到`nppiFilter`一个将值写入`ImageCPU`对象的激励示例。
*   boxFilterNPP.cpp示例不涉及直接写入[对象](http://mlso.hao.ucar.edu/hao/acos/sw/cuda-sdk/CUDALibraries/src/boxFilterNPP/boxFilterNPP.cpp)`ImageCPU`，因为它是使用内置高斯平滑滤波器的`nppiFilterBox`一种特殊情况（可能类似于 [1 1 1; 1 1 1; 1 1 1]）。`nppiFilter`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:19:53.430

为像素/矩阵赋值：

```
hostKernel.pixels(0,0)[0].x = -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:24:35.777

你是说：“当使用像 nppiFilter 这样的过滤器（卷积）函数时，将过滤器定义为 ImageCPU 对象是有意义的。”

这是错误的，也是一个坏主意。图像数据通常以“行填充”格式存储，并且 NPP 的 CUDA SDK 示例附带的图像类确实使用专门的 2D 内存分配器，将填充字节添加到每行的末尾。这样，每行的第一个像素位于 64 字节对齐的地址上。这样做是出于性能原因（在 CPU 和 GPU 上）。

另一方面，用于像 nppiFilter 这样的原语的内核数组需要紧密打包。这就是显示的代码不起作用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:59:05.887

对于 1 通道（例如`32f_C1`），此方法有效：

```
hostKernel.pixels(0,0) = -1; 
```

# python - 导入错误：没有名为cropresize的模块

> ID：12633618
> 
> 赞同：-2
> 
> 时间：2012-09-28T04:33:39.960
> 
> 标签：python, django

我是 python 新手。我正在处理其他一些项目，但是当我尝试运行代码时，它给了我上面所说的错误。我的所有页面都正常工作，除了那些我有图像的页面。是否需要相同的任何库？任何帮助都将是可观的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:35:02.227

您需要 在您的设备上安装`cropresize`软件包。`http://pypi.python.org/pypi/cropresize/`

如果不存在，请从链接安装

做`easy_install cropresize`或`pip install cropresize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:35:44.047

做吧[`easy_install cropresize`](http://pypi.python.org/pypi/cropresize/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:47:23.510

需要安装cropresize包！首先安装 pip（Ubuntu/Debian）：

```
sudo apt-get install python-pip 
```

然后使用 pip 安装cropresize：

```
pip install cropresize 
```

# android - 制作带有外部链接按钮的 android 应用程序

> ID：12633624
> 
> 赞同：1
> 
> 时间：2012-09-28T04:34:18.777
> 
> 标签：android, jquery, button, hyperlink, avd

我想制作一个链接到 google.com 等网站的按钮。我使用 jquery mobile + eclipse 并尝试使用这个谷歌，它在 android 虚拟设备中运行良好，但是当我将应用程序（apk 文件）传输到我的手机时，它不能那样工作。它只是向我显示没有我想要的按钮的链接。为什么呢？我应该在 java 或 xml 或 androidfest.xml 文件上添加什么代码？请帮忙！！

此外，我通过蓝牙而不是使用电缆传输了我的最终 apk 文件。这可能是问题吗？：/

我的 MainActivity.java 代码：

```
package com.example.testing;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        WebView webView = (WebView) findViewById(R.id.webview);
        WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webView.setWebViewClient(new WebViewClient());
        webView.loadUrl("file:///android_asset/index.html");

        return;
    }

} 
```

我的activity_main.xml：

```
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars="none" /> 
```

AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testing"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

注意：我的页眉和页脚也没有像在我的真实手机中那样显示。我也需要这方面的帮助：页眉、页脚和按钮功能。

html文件：

```
<!DOCTYPE html>
<html>

<head>
    <title>Home Page</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.css" />
    <script src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/event.css" />
</head>
<body>

<div data-role="page" data-theme="c" id="home">
    <div data-role="header">
        <h1>Hello</h1>
    </div>

    <div data-role="content">
        <p>
        <a href="https://www.google.com.sg/" rel="external" data-role="button">Google</a>
    <a href="http://www.channelnewsasia.com/" rel="external" data-role="button">CNA</a>
        </p>
    </div>

    <div data-role="footer">
    <h4>Bye</h4>
    </div>

</div>

</body>
</html> 
```

# objective-c - 向子类公开一个私有的 Objective-C 方法或属性

> ID：12633627
> 
> 赞同：35
> 
> 时间：2012-09-28T04:34:22.927
> 
> 标签：objective-c, inheritance, subclass, visibility, declared-property

根据一些官方的说法，Objective-C 中的类应该只在其头中公开公共方法和属性：

```
@interface MyClass : NSObject

@property (nonatomic, strong) MyPublicObject *publicObject;

- (void)publicMethod;

@end 
```

和私有方法/属性应保存在 .m 文件的类扩展中：

```
@interface MyClass()

@property (nonatomic, strong) MyPrivateObject *privateObject;

- (void) privateMethod;

@end 
```

而且我认为没有一种`protected`类型可以用于私有但可从子类访问的事物。我想知道，除了公开声明私有属性/方法之外，还有什么方法可以实现这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-28T04:46:07.480

解决此问题的一种方法是在子类的类扩展中重新声明该属性，然后添加一条`@dynamic`语句，以便编译器不会创建该属性的覆盖实现。所以像：

```
@interface SuperClass ()

@property (nonatomic, strong) id someProperty;

@end

....

@interface SubClass ()

@property (nonatomic, strong) id someProperty;

@end

@implementation SubClass

@dynamic someProperty;

@end 
```

这显然不是理想的，因为它复制了一个私有可见的声明。但是在某些情况下它非常方便和有用，所以我会说逐个评估这种重复所涉及的危险与在公共界面中公开属性。

Apple 在 UIGestureRecognizer 中使用的另一种方法是在单独的类别头文件中声明属性，明确命名为“私有”或“受保护”，例如“SomeClass+Protected.h”。这样，其他程序员就会知道他们不应该导入该文件。但是，如果你不控制你继承的代码，那不是一个选择。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-06T15:53:20.630

这可以通过使用包含在基类和子类的实现文件中的类扩展（不是类别）来实现。

类扩展的定义类似于类别，但没有类别名称：

```
@interface MyClass () 
```

在类扩展中，您可以声明属性，这些属性将能够合成支持的 ivars（XCode > 4.4 自动合成 ivars 也适用于此）。

在扩展类中，您可以覆盖/优化属性（将只读更改为读写等），并向实现文件添加“可见”的属性和方法（但请注意，属性和方法并不是真正私有的，可以仍然被选择器调用）。

其他人建议为此使用单独的头文件 MyClass_protected.h ，但这也可以在主头文件中使用`#ifdef`，如下所示：

例子：

*基类.h*

```
@interface BaseClass : NSObject

// foo is readonly for consumers of the class
@property (nonatomic, readonly) NSString *foo;

@end

#ifdef BaseClass_protected

// this is the class extension, where you define 
// the "protected" properties and methods of the class

@interface BaseClass ()

// foo is now readwrite
@property (nonatomic, readwrite) NSString *foo;

// bar is visible to implementation of subclasses
@property (nonatomic, readwrite) int bar;

-(void)baz;

@end

#endif 
```

*基类.m*

```
// this will import BaseClass.h
// with BaseClass_protected defined,
// so it will also get the protected class extension

#define BaseClass_protected
#import "BaseClass.h"

@implementation BaseClass

-(void)baz {
    self.foo = @"test";
    self.bar = 123;
}

@end 
```

*子类.h*

```
// this will import BaseClass.h without the class extension

#import "BaseClass.h"

@interface ChildClass : BaseClass

-(void)test;

@end 
```

*子类.m*

```
// this will implicitly import BaseClass.h from ChildClass.h,
// with BaseClass_protected defined,
// so it will also get the protected class extension

#define BaseClass_protected 
#import "ChildClass.h"

@implementation ChildClass

-(void)test {
    self.foo = @"test";
    self.bar = 123;

    [self baz];
}

@end 
```

当您调用时`#import`，它基本上会将 .h 文件复制粘贴到您要导入它的位置。如果您有，则只有在设置了该名称的情况`#ifdef`下，它才会包含其中的代码。`#define`

在您的 .h 文件中，您没有设置定义，因此任何导入此 .h 的类都不会看到受保护的类扩展。在基类和子类 .m 文件中，在使用`#define`之前使用`#import`，以便编译器包含受保护的类扩展。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-28T04:49:16.937

虽然其他答案是正确的，但我想补充...

Private、protected 和 public*可*用于实例**变量**，如下所示：

```
@interface MyClass : NSObject {
@private
  int varA;

@protected
  int varB;

@public
  int varC;
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T04:36:09.557

您唯一的选择是在头文件中将其声明为公共。如果您想至少保留一些方法分离，您可以创建一个类别并将所有受保护的方法和属性保存在那里，但最终所有内容仍然是公开的。

```
#import "MyClass.h"

@interface MyClass (Protected)

- (void) protectedMethods;

@end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-29T19:52:24.550

只需使用您的类扩展名创建一个 .h 文件。将此导入您的 .m 文件。顺便说一句，这是在不破坏封装的情况下测试私有成员的好方法（我并不是说您应该测试私有方法:)）。

```
// MyClassProtectedMembers.h
@interface MyClass()

@property (nonatomic, strong) MyPrivateObject *privateObject;
- (void) privateMethod;
@end 
```

////////////////

```
#import "MyClassProtectedMembers.h"

@implementation MyClass
// implement privateMethod here and any setters or getters with computed values
@end 
```

这是这个想法的要点：[https ://gist.github.com/philosopherdog/6461536b99ef73a5c32a](https://gist.github.com/philosopherdog/6461536b99ef73a5c32a)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-02T00:02:44.717

我看到了使属性可见的好答案，但我没有看到在这些答案中的任何一个中都非常清楚地公开了这些方法。以下是我如何使用类别成功地将私有方法公开给子类：

SomeSuperClass.m：

```
@implementation SomeSuperClass

-(void)somePrivateMethod:(NSString*)someArgument {
    ...
} 
```

SomeChildClass.h

```
@interface SomeChildClass : SomeSuperClass 
```

SomeChildClass.m

```
@interface SomeSuperClass (exposePrivateMethod)
-(void)somePrivateMethod:(NSString*)someArgument;
@end

@implementation SomeChildClass

-(void)doSomething {
    [super somePrivateMethod:@"argument"];
}

@end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T04:38:17.777

那是因为私人和公共之间甚至没有真正的区别。虽然编译器可能会警告您缺少某个方法或实例变量的接口，但您的程序仍然可以工作。

# xquery - XQuery：合并同名节点

> ID：12633630
> 
> 赞同：0
> 
> 时间：2012-09-28T04:34:30.990
> 
> 标签：xquery

我将如何获取所有同名的元素节点，并将它们组合成一个保留每个子元素的节点？

示例输入：

```
<topic>
  <title />
  <language />
  <more-info>
    <itunes />
  </more-info>
  <more-info>
    <imdb />
  </more-info>
  <more-info>
    <netflix />
  </more-info>
</topic> 
```

示例输出（所有`more-info`s 都折叠成一个元素）：

```
<topic>
  <title />
  <language />
  <more-info>
    <itunes />
    <imdb />
    <netflix />
  </more-info>
</topic> 
```

**编辑：**我正在寻找一种方法来做到这一点，而不知道哪些节点名称会再次出现。因此，对于上面的示例，我不能使用仅针对 的脚本`more-info`，因为可能还有其他元素也需要对其应用相同的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:18:06.933

**使用**：

```
declare option saxon:output "omit-xml-declaration=yes";
<topic>
  <title />
  <language />
  <more-info>
   {for $inf in /*/more-info/node()
     return $inf
   }
  </more-info>
</topic> 
```

**当此 XQuery 应用于提供的 XML 文档时**：

```
<topic>
  <title />
  <language />
  <more-info>
    <itunes />
  </more-info>
  <more-info>
    <imdb />
  </more-info>
  <more-info>
    <netflix />
  </more-info>
</topic> 
```

**产生了想要的正确结果**：

```
<topic>
   <title/>
   <language/>
   <more-info>
      <itunes/>
      <imdb/>
      <netflix/>
   </more-info>
</topic> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:29:54.100

如果可以使用 XSLT，这似乎是一项更好的工作。

**XML 输入**

```
<topic>
    <title />
    <language />
    <more-info>
        <itunes />
    </more-info>
    <more-info>
        <imdb />
    </more-info>
    <more-info>
        <netflix />
    </more-info>
</topic> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:for-each-group select="*" group-by="name()">
                <xsl:copy>
                    <xsl:apply-templates select="current-group()/@*"/>
                    <xsl:apply-templates select="current-group()/*"/>
                </xsl:copy>
            </xsl:for-each-group>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<topic>
   <title/>
   <language/>
   <more-info>
      <itunes/>
      <imdb/>
      <netflix/>
   </more-info>
</topic> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-04T18:28:58.043

我带来了：

```
for $n in $nodes/node()
let $lname := local-name($n)
group by $lname
return element {$lname} {
  $n/node()
} 
```

其中`$nodes`包含输入文档。

它使用 a`group by`将`$n`变量绑定到分组节点列表。因此，表达式`$n/node()`表示节点序列。

为了使其递归，我们必须声明一个函数并调用它：

```
declare function local:recurse($node){
  for $n in $node/text() return $n,
  for $n in $node/element()
  let $lname := local-name($n)
  group by $lname
  return element {$lname} {
    for $m in $n return local:recurse($m)
  }
};

local:recurse($nodes) 
```

第一行以逗号结束。这是一个列表连接。因此，我们首先输出文本节点，然后输出带有上述`group by`sheningan 的元素节点。

## XML 输入

```
<topic>
  <title>Test</title>
  <language />
  <more-info>
    <itunes>
      <playlist>
        <item>2</item>
      </playlist>
      <playlist>
        <item>3</item>
      </playlist>
    </itunes>
  </more-info>
  <more-info>
    <imdb>Imdb info</imdb>
  </more-info>
  <more-info>
    <netflix>Netflix info</netflix>
  </more-info>
</topic> 
```

## XML 输出

```
<title>Test</title>
<language/>
<more-info>
  <itunes>
    <playlist>
      <item>2</item>
      <item>3</item>
    </playlist>
  </itunes>
  <imdb>Imdb info</imdb>
  <netflix>Netflix info</netflix>
</more-info> 
```

## 评论

我不知道为什么认为 XSLT 更容易。也许`apply-templates`是在伪装递归，使其不那么令人生畏。

此外，与需要在“循环”内进行匹配的 XQuery 相比，匹配在“循环”之外声明的事实使其更容易（然后，必须与模式配对以进行完全控制）。

无论如何，在这个特殊的例子中，`XQuery`似乎是非常合适的。

# asp.net - RagGrid 分页 asp.net

> ID：12633637
> 
> 赞同：0
> 
> 时间：2012-09-28T04:35:24.363
> 
> 标签：asp.net, radgrid

我正在使用 Radgrid，它显示来自超过 50,000 行的表中的数据。但我正在使用分页，一次只显示 25 行。我怎样才能使网格一次只从数据库表中读取 25 行而不是所有行，并且还允许过滤所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:31:07.197

您需要使用 Telerik 的自定义分页，如评论中的链接中所述。

您需要更改查询以绑定网格数据以仅获取当前页面的行。这是我的建议：

将 CurrentPageIndex（从零开始）和 PageSize 作为参数传递给数据库查询。然后，您可以像这样获取页面的数据：

```
With MyResult AS
(
    select ..., rank() OVER (partition BY ... ORDER BY ...) AS RankOfRow
)
select * from MyResult 
where RankOfRow > PageIndex * PageSize 
and RankOfRow <= (PageIndex + 1) * PageSize 
```

# c++ - C++中的迭代器

> ID：12633653
> 
> 赞同：1
> 
> 时间：2012-09-28T04:37:07.270
> 
> 标签：c++, stl, iterator

```
vector<int> v(1, 1);
it = v.begin(); 
```

为什么`*it++`不在第一个元素上加一个？

虽然我可以使用`*it = *it + 1`

我`C++`好几年没用了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T04:53:29.523

++ 的优先级高于 *。

因此，第一个迭代器指向下一个元素，然后使用 * 取消引用，您可以在左侧收集 v[1]。

使用下面的代码来解决问题。

```
#include<iostream>

using namespace std;

int main()
{
vector<int> v(2, 1);
vector<int>::iterator it;
it = v.begin();
(*it)++; //instead of *it++;

cout << v[0] <<  v[1] << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:39:18.053

因为`*it++`意味着后增量`it`和取消引用结果（的原始值`it`），因为`++`绑定更紧密（它相当于`*(it++)`）。它不会修改`*it`. 如果要增加`*it`，请使用`(*it)++`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T16:08:19.197

正如其他人所解释的

```
int x = *it++; 
```

相当于

```
int x = (*it)++; 
```

这相当于

```
int x = *it;
it = ++it; // prefix 
```

**它**直到分号之后才会增加（因为它是后缀运算符）。posfix ++ 运算符通常使用这样的前缀运算符实现

```
template<typename T> vector<T>::iterator vector<typename T>::iterator::operator++(int)
{
   vector<T>::iterator tmp(*this);
   ++(*this); // call prefix operator++()
   return tmp;   
} 
```

您可以在其中看到它在 operator++() 完成之前返回迭代器的值。

# orchardcms - 在使用 orchard 创建的站点中无法访问 sietmap.xml。如何解决？

> ID：12633661
> 
> 赞同：6
> 
> 时间：2012-09-28T04:38:16.730
> 
> 标签：orchardcms

我刚刚发布了一个使用 orchard cms 创建的网站。我将 sitemap.xml 添加到根文件夹，但无法通过浏览器访问它。我猜我可能需要修改 web.config 文件，但我不确定如何。

编辑：这是我的网络配置。我不知道如何在这里正确格式化。我正在访问 sitemap.xml，`woodworkingoc.com/sitemap.xml`但得到 404。

```
 <?xml version="1.0" encoding="utf-8"?>
<!-- 
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor" requirePermission="false" />
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" requirePermission="false" />
  </configSections>
  <appSettings>
    <add key="webpages:Enabled" value="false" />
    <add key="log4net.Config" value="Config\log4net.config" />
  </appSettings>
  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <pages pageBaseType="Orchard.Mvc.ViewEngines.Razor.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        <add namespace="System.Linq" />
        <add namespace="System.Collections.Generic" />
        <add namespace="Orchard.Mvc.Html" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>
  <!-- 
        Set default transaction timeout to 30 minutes so that interactive debugging 
        is easier (default timeout is less than one minute)
  -->
  <system.transactions>
    <defaultSettings timeout="00:30:00" />
  </system.transactions>
  <system.web>
    <!--<trust level="Medium" originUrl="" />-->
    <httpRuntime requestValidationMode="2.0" maxRequestLength="102400" executionTimeout="360" />
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
    -->
    <compilation debug="false" targetFramework="4.0" batch="true" numRecompilesBeforeAppRestart="250" optimizeCompilations="true">
      <buildProviders>
        <add extension=".csproj" type="Orchard.Environment.Extensions.Compilers.CSharpExtensionBuildProviderShim" />
      </buildProviders>
      <assemblies>
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <remove assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Web.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.EnterpriseServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <remove assembly="System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <remove assembly="System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <remove assembly="System.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <remove assembly="System.ServiceModel.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <remove assembly="System.WorkflowServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <remove assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <remove assembly="System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove assembly="System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </assemblies>
    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Forms">
      <forms loginUrl="~/Users/Account/AccessDenied" timeout="2880" />
    </authentication>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.
    -->
    <customErrors mode="On">
        <error statusCode="404" reirect="/" />
    </customErrors>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Linq" />
        <add namespace="System.Collections.Generic" />
        <add namespace="Orchard.Mvc.Html" />
      </namespaces>
    </pages>
    <httpHandlers>
      <!-- see below -->
      <clear />
       <add path="robots.txt" verb="GET" type="System.Web.StaticFileHandler" /><!--allow sitemap.xml and robots.txt to be served-->
       <add path="/sitemap.xml" verb="GET" type="System.Web.StaticFileHandler" />
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler" />
    </httpHandlers>
    <httpModules>
      <add name="WarmupHttpModule" type="Orchard.WarmupStarter.WarmupHttpModule, Orchard.WarmupStarter, Version=1.0.20, Culture=neutral" />
    </httpModules>
  </system.web>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
  -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WarmupHttpModule" />
      <add name="WarmupHttpModule" type="Orchard.WarmupStarter.WarmupHttpModule, Orchard.WarmupStarter, Version=1.0.20, Culture=neutral" />
    </modules>
    <handlers accessPolicy="Script">
      <!-- clear all handlers, prevents executing code file extensions, prevents returning any file contents -->
      <clear />
      <!--add entries for sitemap.xml and robots.txt-->
      <add name="Robots" path="robots.txt" verb="GET" modules="StaticFileModule" preCondition="integratedMode" resourceType="File" requireAccess="Read" />
      <add name="SiteMap" path="/sitemap.xml" verb="GET" modules="StaticFileModule" preCondition="integratedMode" resourceType="File" requireAccess="Read" />
      <!-- Return 404 for all requests via managed handler. The url routing handler will substitute the mvc request handler when routes match. -->
      <add name="NotFound" path="*" verb="*" type="System.Web.HttpNotFoundHandler" preCondition="integratedMode" requireAccess="Script" />
    </handlers>
    <!-- Prevent IIS 7.0 from returning a custom 404/500 error page of its own -->
    <httpErrors existingResponse="PassThrough" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="App_Data/Dependencies" />
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="3.0.0.0" />
        <bindingRedirect oldVersion="2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages.Deployment" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="2.0.0.0" newVersion="1.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
    <system.data>
        <DbProviderFactories>
            <remove invariant="System.Data.SqlServerCe.4.0" />
            <add invariant="System.Data.SqlServerCe.4.0" name="Microsoft® SQL Server® Compact 4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
        </DbProviderFactories>
    </system.data>
</configuration> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T12:23:46.660

在`<system.web>`web.config 部分下，确保您在`<httpHandlers>`块内有一个 sitemap.xml 条目：

```
<httpHandlers>
    <!-- see below -->
    <clear />
    <add path="robots.txt" verb="GET" type="System.Web.StaticFileHandler" />
    <add path="SiteMap.xml" verb="GET" type="System.Web.StaticFileHandler" />
    <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
</httpHandlers> 
```

还要确保您在 system.webserver/handlers 中有一个允许 sitemap.xml 的条目：

```
<system.webServer>
    <handlers accessPolicy="Script,Read">
    <!-- clear all handlers, prevents executing code file extensions, prevents returning any file contents -->
    <clear/>
    <add name="Robots" path="robots.txt" verb="GET" modules="StaticFileModule" preCondition="integratedMode" resourceType="File" requireAccess="Read" />
    <add name="SiteMap" path="SiteMap.xml" verb="GET" modules="StaticFileModule" preCondition="integratedMode" resourceType="File" requireAccess="Read" />
    <!-- Return 404 for all requests via managed handler. The url routing handler will substitute the mvc request handler when routes match. -->
    <add name="NotFound" path="*" verb="*" type="System.Web.HttpNotFoundHandler" preCondition="integratedMode" requireAccess="Script"/>
</handlers> 
```

这些模块允许公开提供像 sitemap.xml 这样的静态文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T06:18:16.500

我个人更喜欢使用[高级站点地图](http://gallery.orchardproject.net/List/Modules/Orchard.Module.WebAdvanced.Sitemap)模块来生成站点地图。它还关注`sitemap.xml`文件可访问性。你可以看看它的来源，很可能你会找到你的问题的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-06T17:10:29.940

添加 robots.txt 不需要 httpHandlers，因为 Orchard 处于集成模式。在处理程序部分的 Orchard web.config 中设置脚本，阅读：

```
<handlers accessPolicy="Script,Read"> 
```

并在该`<clear/>`部分之后添加这两行：

```
<add name="Robots" path="robots.txt" verb="*" type="System.Web.StaticFileHandler" preCondition="integratedMode" resourceType="File" requireAccess="Read"/>
<add name="Sitemap" path="sitemap.xml" verb="*" type="System.Web.StaticFileHandler" preCondition="integratedMode" resourceType="File" requireAccess="Read"/> 
```

我正在使用果园 1.7.2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T00:08:14.330

如果有人正在寻找这个问题来弄清楚如何`robots.txt`仅设置（没有 a `sitemap.xml`），那么您可以使用简单的 Orchard [Robots Module](http://gallery.orchardproject.net/List/Modules/Orchard.Module.SH.Robots)。它提供了一种简单的方法来设置`robots.txt`内容而无需编辑`web.config`或任何其他方式。

# javascript - 在javascript中查找本地文件或目录的路径

> ID：12633663
> 
> 赞同：1
> 
> 时间：2012-09-28T04:38:32.800
> 
> 标签：javascript, html, web

我们正在构建一个 Web 应用程序来帮助人们组织他们的本地文件；它在 HTML5/JS 中有一个文本输入字段。

*理想*的功能：用户单击文本框，然后让他们选择本地驱动器上的文件或文件夹，将所述文件或文件夹的路径传递给我们的服务器。

是否有 JS API 或 HTML5 方法来查找本地文件和文件夹的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:40:54.233

由于浏览器的安全性，您无法从 FILE 输入中获取文件位置。出于同样的原因，您会注意到 FILE 输入总是在回发后重置为空白。这是因为浏览器不会保留或公开文件路径作为安全措施。

# perl - 将输出从 awk 管道传输到 perl

> ID：12633664
> 
> 赞同：0
> 
> 时间：2012-09-28T04:38:32.583
> 
> 标签：perl, parsing, unix, awk, pipe

我想用从我的 awk 脚本中获得的值在 Perl 中创建一个数组。然后我可以在 Perl 中对它们进行数学运算。

这是我的 Perl，它运行一个保存文本文件的程序：

```
my $unix_command_dsc = (`./program -s test.fasta saved_file.txt`);
my $dsc_run = qx($unix_command_dsc); 
```

现在我有一些 Awk 可以解析保存在文本文件中的数据：

```
#!/usr/bin/awk -f

BEGIN{       # Initialize the values to zero. Note, done automatically also.
    sumc4 = 0
    sumc5 = 0
    sumc6 = 0
}

/^[1-9][0-9]* residue/ {next}    #Match line that begins with number and has word 'residue', skip it.
/^[1-9]/ {                       #Match line that begins with number.

    sumc4 += $4                  #Add up the values of the nth column into the variables.
    sumc5 += $5
    sumc6 += $6

    print $4 "\t" $5 "\t" $6    #This will show the whole columns. 

    }

END{
    print "sum H" "\t" "sum E" "\t" "sum C"
    print sumc4 "\t" sumc5 "\t" sumc6  
} 
```

我使用以下命令从终端运行此 awk：

```
./awk_program.txt saved_file.txt 
```

任何想法如何将这些数据从 awk 中的打印语句收集到 perl 中的数组中？

我试过的是在 perl 中运行那个 awk 脚本：

```
my $unix_command_awk = (`./awk_program.txt saved_file.txt`);
my $awk_run = qx($unix_command_awk); 
```

但是 perl 给了我错误和找不到命令，就像它认为数据是命令一样。我缺少的 awk 中是否应该有一个 STDOUT，而不是打印？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:46:38.047

它应该只是：

```
my $awk_run = `./awk_program.txt saved_file.txt`; 
```

反引号告诉 perl 运行命令并返回输出。因此，您对 $unix_command_awk 的分配正在运行命令，然后`qx($unix_command_awk)`将输出作为新命令执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:38:46.550

从 awk 管道到您的 perl 脚本：

```
./awk_program file.txt | perl perl-script.pl 
```

然后从 perl 中的 stdin 读取：

```
while (<>) {
    # do stuff with $_
    my @cols = split(/\t/);
} 
```

# c++ - 写入图像

> ID：12633666
> 
> 赞同：0
> 
> 时间：2012-09-28T04:39:06.757
> 
> 标签：c++, image, http, libpcap

我正在尝试从 HTTP 流中提取图像。`libpcap`除了捕获数据包外，我需要使用 C++ 而没有其他库。这是我正在做的事情：

```
if ((tcp->th_flags & TH_ACK) != 0) {
                i = tcp->th_ack;
                const char *payload = (const char *) (packet + SIZE_ETHERNET + size_ip + size_tcp);
                size_payload = ntohs(ip->ip_len) - (size_ip + size_tcp);
                std::string temp(payload);
                dict.insert(std::pair<u_int,std::string>(tcp->th_ack,temp));
        } 
```

然后我连接所有具有相同 ACK 号的数据包：

```
 std::string ss;
 for(itt=dict.begin(); itt!= dict.end(); ++itt) {
                std::string temp((*itt).second);
                ss.append(temp);
  }
  std::ofstream file;
  file.open("image.jpg", std::ios::out | std::ios::binary)
  file << ss;
  file.close(); 
```

现在，当我写入`ss`文件时，文件的大小远小于传输的图像。这是编写二进制文件的正确方法吗？

我正在尝试在 C++中执行[此操作](https://stackoverflow.com/questions/2323128/python-convert-string-in-base64-to-image-and-save-on-filesystem)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:19:46.860

使用 std::string 将在第一个空终止字符处剪切您的数据（即使 std::string 不是空终止字符串）。std::string 的构造函数接受一个 char* 并假定一个以空字符结尾的字符串。这是一个证明：

```
char sample [] = {'a', 'b', '\0', 'c', 'd', '\0', 'e'};
std::string ss(sample); 
```

您应该使用 std::vector 来存储您的数据。

# design-patterns - 构建模式的clojure方法是什么？

> ID：12633670
> 
> 赞同：11
> 
> 时间：2012-09-28T04:39:51.023
> 
> 标签：design-patterns, clojure, builder

我们通常在java中使用builder模式，像这样：

```
UserBuilder userBuilder = new UserBuilder();
User John = userBuiler.setName("John")
                      .setPassword("1234")
                      .isVip(true)
                      .visableByPublic(false)
                      .build(); 
```

有些属性有默认值，有些没有。

在映射中传递属性可能是一种解决方案，但它会使参数变得更长：

```
(def john (make-user {:name "John" :pass "1234" :vip true :visible false})) 
```

所以，我的问题是，有没有一种优雅的方式来实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T05:15:02.737

如果要构造一些 clojure 结构，可以在函数参数中使用解构模式。然后，您将实现您已经编写的类似内容。

```
(defn make-user [& {:keys [name pass vip visible]}]
  ; Here name, pass, vip and visible are regular variables
  ; Do what you want with them
)

(def user (make-user :name "Name" :pass "Pass" :vip false :visible true)) 
```

我怀疑你可以用更少的代码做一些事情。

如果你想构造 Java 对象（使用它的 setter），你可以使用 Nicolas 建议的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T05:41:35.720

我通常会通过映射传递属性 - 这样做没有真正的问题，因为属性映射实际上只是 make-user 函数的一个参数。您还可以在 make-user 中做一些不错的事情，例如合并默认属性。

如果你真的想用构建器模式构建这样的映射，你可以使用线程宏来完成，如下所示：

```
(def john 
  (-> {}
    (assoc :name "John")
    (assoc :pass "1234")
    (assoc :vip true)
    (assoc :visible false)
    make-user)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T09:26:43.630

改写

`(def john (make-user {:name "John" :pass "1234" :vip true :visible false}))`

分成多行：

```
(def john (make-user {:name "John" 
                      :pass "1234" 
                      :vip true 
                      :visible false})) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T05:05:01.533

一个简单的方法是使用[doto](http://clojure.org/java_interop#Java%20Interop-The%20Dot%20special%20form-%28doto%20instance-expr%20%28instanceMethodName-symbol%20args%2a%29%2a%29)宏：

这是一个用一些值填充数组列表的示例：

```
(def al (doto (java.util.ArrayList.) (.add 11) (.add 3)(.add 7))) 
```

Stuart 有[一些](http://stuartsierra.com/2010/01/03/doto-swing-with-clojure)关于如何在 Swing 中使用 doto 的完美示例。这里有一个面板：

```
(doto (JPanel.)
            (.setOpaque true)
            (.add label)
            (.add button)) 
```

这里有一个框架：

```
(doto (JFrame. "Counter App")
  (.setContentPane panel)
  (.setSize 300 100)
  (.setVisible true)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-09T13:21:50.917

为了完整起见，没有人提到自动为您提供*“构建器功能”的*[defrecord](https://clojuredocs.org/clojure.core/defrecord)

 *```
(defrecord User [name pass vip visible])

(User. "John" "1234" true false)
;;=>#user.User{:name "John", :pass "1234", :vip true, :visible false}

(->User "John" "1234" true false)
;;=>#user.User{:name "John", :pass "1234", :vip true, :visible false}

(map->User {:name "John" :pass "1234" :vip true :visible false})
;;=>#user.User{:name "John", :pass "1234", :vip true, :visible false} 
```*

# silverlight - 如何使用 ria 异步调用放置 return 语句

> ID：12633671
> 
> 赞同：1
> 
> 时间：2012-09-28T04:40:09.603
> 
> 标签：silverlight, wcf-ria-services

我有一个方法需要返回布尔值，在我的方法中我需要进行异步调用来决定返回 true 还是 false。我试图将 return 语句放在 lambda 表达式中，但它会抛出一个**return type is 'void'**错误

```
bool method()
{
    domaincontext.Load(domaincontext.GetXXX(),
    loadOperation =>
    {
    value = ???
    }, null);

    return value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:11:00.550

你不能这样编码。Silverlight 将不允许您查询 Web 服务并冻结 UI，直到 Web 服务返回。Silverlight 的异步模型更像 javascript，您可以在其中进行调用，当结果返回时，您可以决定要使用它做什么。

一种方法是将调用者的代码更改为如下所示：

```
this.method(result => {
  if (result) {
     // Do something
  }
});

void method(Action<bool> continueWith)
{
    domaincontext.Load(domaincontext.GetXXX(),
    loadOperation =>
    {
        value = ???;
        continueWith(value);
    }, null);

    return value;
} 
```

# php - 创建可点击的按钮和弹出窗口

> ID：12633673
> 
> 赞同：1
> 
> 时间：2012-09-28T04:40:17.083
> 
> 标签：php, javascript, jquery, html

我有“创建用户”表单，需要一点帮助。在我希望用户单击按钮的链接之一，然后会弹出带有信息的小弹出窗口，然后他们关闭弹出窗口并继续填写表格。以下是代码：

```
<div class="users form">
<?php
    echo $this->Form->create('User', array (
            'type' => 'post',
            'inputDefaults' => array (
                'div' => false
            )
        )       
    );
?>
<script>
    $(document).ready(function() {
        $('#UserFirstName').focus();
    });
</script>
<fieldset>
    <legend></legend>
    <h2>Registration</h2>
    <?php
        echo $this->Form->input('firstName');
        echo '<div class=\'clear\'></div>';
        echo $this->Form->input('lastName');
        echo '<div class=\'clear\'></div>';
        echo $this->Form->input('username');
        echo '<div class=\'clear\'></div>';
        echo $this->Form->input('password', array ('class' => 'short'));
        echo '<div class=\'clear\'></div>';
        echo $this->Form->input('password_confirm', array('type' => 'password', 'label' => 'Confirm Password:   ', 'class' => 'short'));
        echo '<div class=\'clear\'></div>';
        echo $this->Form->input('email', array('label' => 'Email:   ', 'default' => $email));
        echo '<div class=\'clear\'></div>';
        echo $this->Form->input('id', array('label' => 'id: ', 'type' => 'hidden', 'default' => 37));
        $qmark = $this->Html->image('qmark.png', array('height' => 15));
        echo '<div class=\'clear\'></div>';
        echo $this->Form->input('number', array('label' => 'Number:', 'class' => 'short', 'after' => $qmark));
        echo '<div class=\'clear\'></div>';
    ?> 
```

我希望用户单击 qmark 按钮，然后会弹出带有该字段定义的小窗口。

```
echo $this->Form->input('number', array('label' => 'Number:', 'class' => 'short', 'after' => $qmark)); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:45:47.173

这个给你！

```
 $(document).ready(function() {

       $('input[name="number"]').click(function() {

          alert('Display your popup here...'); // maybe you should use another js library for popup
      });
    }); 
```

再见！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:52:56.320

实际上，您必须使用以下方法在按钮上添加单击事件的侦听器：

```
$('input[name="number"]').click(function() {
    // Your code here

} 
```

您可以使用著名的 JQuery-UI 对话框：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/) 它非常易于使用。

您可以在主页中创建框的内容（在具有 display:none 样式的 div 中），或者以前使用 ajax 调用检索内容，然后打开包含内容的对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:07:47.977

当用户单击它时，您必须绑定（添加侦听器）到按钮，以便它可以显示您的弹出窗口，不要忘记将 ID 添加到要使其可点击的按钮或元素，我建议使用此标记：

```
<a href="#"></a>

$("#button").click(function(e){
    e.preventDefault();
    $("#popup").show();
}); 
```

如果使用标签，则必须添加 preventDefault()，以防止浏览器更改光标的焦点。

此外，您必须使用 CSS 创建“弹出窗口”以浮动在网站的其他元素上，因为默认情况下可能会阻止另一个浏览器窗口，我认为这是一种不好的可用性做法。

不要忘记隐藏弹出框，您可以使用具有以下属性的 CSS 来做到这一点：

```
visible:none; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:16:53.843

在这里，我已经完成了上述问题的完整解决方案。

**演示** [http://codebins.com/bin/4ldqp6y](http://codebins.com/bin/4ldqp6y)

**HTML**

```
<input type="button" id="btnSignUp" value="SignUp" />
<div id="popup">
  <div id="popupinfo">
    <p> Now, your registration form has been loaded...! </p>
    <p> You have field your required fields and submit form.</p>
    <p class="button"><a href="javascript:void(0);">OK</a></p>
  </div>
</div>
<div id="registerDiv">
  <p class="required">Fields with Mark (*) are required fields </p>
  <form name="frmregister" id="frmregister" method="post" action="#registerDiv">
    <table cellpadding="0" cellspacing="0" class="table" border="0">
      <tr>
        <td>*Name:</td>
        <td><input type="text" class="input" size="17" /></td>
      </tr>
      <tr>
        <td>*Username:</td>
        <td><input type="text" class="input" size="17" /></td>
      </tr>
      <tr>
        <td>*Password:</td>
        <td><input type="password" class="input" size="17" /></td>
      </tr>
      <tr>
        <td>*Confirm Password:</td>
        <td><input type="password" class="input" size="17" /></td>
      </tr>
      <tr>
        <td>Email:</td>
        <td><input type="text" class="input" size="17" /></td>
      </tr>
      <tr>
        <td colspan="2">&nbsp;</td>
      </tr> 
       <tr>
         <td colspan="2" align="center"><input type="submit" value="Register" id="btnsubmit" /></td>
       </tr>
    </table>
  </form>
</div> 
```

**CSS**

```
.input{
  border:1px solid #333;
}
.required{
  color:red;
  font-size:12px;
}

#registerDiv{
  display:none;
  margin-top:10px;
  margin-left:20px;
  border:2px solid #333;
  padding:3px;
  background:#cdcdcd;
  width:280px;
  text-align:center;
}
#popup{
  display:none;
  padding:10px;
  background:#969696;
  position:absolute;
  top:25%;
  left:25%;
  z-index: 99999;
  opacity:100%;

}
#popupinfo{
  padding:2px;
  text-align:center;
  background:#cfcfcf;
}
#popupinfo p{
  font-size:14px;
}

#popupinfo .button {
  text-align:center;
}
#popupinfo .button a{
  text-decoration:none;
  border:1px solid #333;
  width:20px;
  padding:5px;
  background:#1A1A1A;
  color:#eee;
}

#popupinfo .button a:hover{
  background:#eee;
  color:#1a1a1a;
}

#mask{

  background: #000;
  position: fixed;
  left: 0;
  top: 0;
  z-index: 10;
  width: 100%;
  height: 100%;
  opacity: 0.8;
  z-index: 999;

} 
```

**jQuery**

```
$(function() {
    $("#btnSignUp").click(function() {
        $("#registerDiv").fadeIn(300);
        $("body").append("<div id='mask'></div>");
        $("#mask").fadeIn(300);
        $("#popup").fadeIn(300);
    });
    $("#popup .button a").click(function() {
        $("#popup").fadeOut(300, function() {
            $("#mask").remove();
        });
        $("#frmregister").find("input:first").focus();
    });
}); 
```

**演示** [http://codebins.com/bin/4ldqp6y](http://codebins.com/bin/4ldqp6y)

# java - Android：关于AndEngine updateThread和uiThread

> ID：12633675
> 
> 赞同：1
> 
> 时间：2012-09-28T04:40:28.800
> 
> 标签：java, android, andengine

我最近在*AndEngine*上进行了探索。我写了一个简单的测试演示，我在其中实现`IOnSceneTouchListener`并且场景注册了一个`TimerHandler`来改变一个`ChangableText`。我将引擎设置为`runOnUpdateThread` **true**。

**所以问题是**：当我触摸场景一段时间时，活动暂停并崩溃。Logcat 显示与之前相同的文本：***“org.anddev.andengine.util.pool.PoolUpdateHandler$1 已用尽，1 个项目尚未回收。已分配 1 个。”***

如果有人能解决我的问题，我将不胜感激！

PS：我的代码

```
 public class TestActivity extends BaseGameActivity implements IOnSceneTouchListener, IOnMenuItemClickListener {
    ...
    ...
    private TimerHandler mTimeUpdateHandler = new TimerHandler(1.f, true, new ITimerCallback() {
            @Override
            public void onTimePassed(TimerHandler arg0) {
                runOnUpdateThread(new Runnable() {
                    @Override
                    public void run() {
                        if (mElapsedText != null && mAttempts > 0) {
                            mElapsedText.setText("Time: "
                                    + (ParticlyActivity.this.mEngine.getSecondsElapsedTotal() - mCurrentTotalSeconds),
                                    false);
                        }
                    }
                });
            }
        });
    ...
    ...

    // @Override
        public Engine onLoadEngine() {
            this.mCamera = new BoundCamera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
            final EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE,
                    new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera).setNeedsSound(true);
            engineOptions.getTouchOptions().setRunOnUpdateThread(true);
            this.mEngine = new Engine(engineOptions);
            return this.mEngine;
        }

    public Scene onLoadScene(){
    ...
                // Text
                mElapsedText = new ChangeableText(20, 12, this.mFont, "Time:00.00");
                mScene.getFirstChild().attachChild(mElapsedText);
                mScene.registerUpdateHandler(mTimeUpdateHandler);

    ...
    }

@Override
    public boolean onSceneTouchEvent(final Scene pScene, final TouchEvent pSceneTouchEvent) {
            if ((pSceneTouchEvent.isActionMove() || pSceneTouchEvent.isActionDown()) && mAttempts < MaxBullets) {
                double angle = 0;
                if ((pSceneTouchEvent.getX() - StartX) == 0) {
                    angle = 90;
                } else {
                    angle = Math
                            .abs(Math.atan((StartY - pSceneTouchEvent.getY()) / (StartX - pSceneTouchEvent.getX())) / 3.14 * 180);
                }
                if (angle > 90) {
                    angle = 90;
                } else if (angle < 0) {
                    angle = 0;
                }
                mGun.setRotation((float) -angle);
                mGun.setStrength(pSceneTouchEvent.getX());
            } else if (pSceneTouchEvent.isActionUp() && mAttempts < MaxBullets) {
...
            }
        }
        return true;
    }

    } 
```

定时器处理程序：

```
private TimerHandler mTimeUpdateHandler = new TimerHandler(1.f, true, new ITimerCallback() {
    @Override
    public void onTimePassed(TimerHandler arg0) {
        runOnUpdateThread(new Runnable() {
            @Override
            public void run() {
                if (mElapsedText != null && mAttempts > 0) {
                    mElapsedText.setText("Time: " + (ParticlyActivity.this.mEngine.getSecondsElapsedTotal() - mCurrentTotalSeconds), false);
                }
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:51:42.413

UIThread 负责绘图，如果您需要更改 Text 值，UpdateThread 会在每一帧执行，请在 UpdateThread 上执行[通常远离 UIThread]

# asp.net - Windows 上 Safari 5.1.7 的 ASP.NET 网络表单回发怪异

> ID：12633676
> 
> 赞同：0
> 
> 时间：2012-09-28T04:40:46.427
> 
> 标签：asp.net, safari, webforms

我有一个带有按钮和标签的简单 ASP.NET 网络表单页面。在 Windows 上使用 Safari 5.1.7 时，单击按钮会导致回发，但实际上不会因为某些奇怪的原因触发按钮单击事件。

没有 javascript 错误。没有任何类型的 UpdatePanel 或 AJAX。这实际上是我正在测试的页面：

```
<!doctype html>
<html lang="en">
<head runat="server">
    <meta charset="utf-8">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    </form>
</body>
</html> 
```

后面的代码很简单：

```
protected void Page_Load(object sender, EventArgs e)
{

}

protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = "test";
} 
```

单击按钮时，Page_Load 事件确实会触发一次，但 Page.IsPostBack 返回 FALSE 而不是 true，并且永远不会设置 Label1.Text。

请注意，此问题仅在 Safari 中发生。在 IE8+、FF15+、Chrome 21+ 和 Opera 12+ 中一切正常。

我已经阅读了许多关于隐藏字段大小限制（以及因此视图状态）的 Safari 怪异的帖子——但是这个页面甚至不应该使用视图状态（如果有的话）。还有很多关于与 UpdatePanels 和/或 AJAX 调用相关的 javascript 错误的帖子，但正如您所见，这里没有这些帖子。

我相信这个[问题](https://stackoverflow.com/questions/11807086/postback-is-not-working-in-safari-in-windows-7)也是相关的，但我想用示例 html/cs 开始一个新问题，这样你就可以重现这个问题。

我错过了什么还是Windows上的Safari真的很奇怪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:07:57.590

我无法在 Safari 5.1.7 中复制它。您能否提供有关如何绑定事件的更多信息？您的手动分配`onclick="Button1_Click"`意味着您正在执行手动事件连接。您的页面声明与此匹配吗？

您确定您的 Page_Load 事件正在触发吗？你的例子是空的。

也许更详细的事件绑定是有序的，以下对我有用：

ASPX 测试页面：

```
<%@ Page Language="C#" AutoEventWireup="false" 
    CodeFile="default.aspx.cs" Inherits="PgSafari" %>
<!doctype html>
<html lang="en">
<head runat="server">
    <meta charset="utf-8">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">

        <div><asp:Literal runat="server" ID="litTimeStamp" EnableViewState="false" /></div>

        <div><asp:Button ID="Button1" runat="server" Text="Button" /></div>
        <div><asp:Label ID="Label1" runat="server" Text="Default Label Text" /></div>

        <div>
            <h6>Log:</h6>
            <asp:PlaceHolder runat="server" ID="plcOut" />
        </div>

    </form>
</body>
</html> 
```

后面的代码：

```
using System;
using System.Web.UI;

public partial class PgSafari : System.Web.UI.Page
{
    public PgSafari()
    {
        //Bind Page Events
        this.Init += new EventHandler(PgSafari_Init);
        this.Load += new EventHandler(PgSafari_Load);
    }

    protected void PgSafari_Init(object sender, EventArgs e)
    {
        Log("_Init()");

        //Bind Page Control Events
        Button1.Click += new EventHandler(Button1_Click);
    }

    protected void PgSafari_Load(object sender, EventArgs e)
    {
        Log("_Load()");
        Log("Page.IsPostBack = " + (Page.IsPostBack));

        litTimeStamp.Text = "TimeStamp: " + DateTime.Now.ToString("mm:ss.fff");
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Log("Button1_Click()");
        Label1.Text = "test";
    }

    //===============\\

    private void Log(String msg)
    {
        plcOut.Controls.Add(new LiteralControl("<div>" + msg + "</div>"));
    }
} 
```

Safari 中的初始页面看起来应该是：
  TimeStamp: 58:44.452
  <button>
  Default Label Text
  Log:
  _Init()
  _Load()
  Page.IsPostBack = False

单击它看起来也应该：
  TimeStamp：59：48.869
  <button>
  TEST！
  日志：
  _Init()
  _Load()
  Page.IsPostBack = True
  Button1_Click()

# ruby-on-rails - 每天积累统计数据（JSON）并呈现的任何好宝石

> ID：12633677
> 
> 赞同：3
> 
> 时间：2012-09-28T04:40:47.317
> 
> 标签：ruby-on-rails, ruby, activerecord, graph, statistics

我有一个 API 调用，它返回一个 JSON 格式的实时统计数据——比如注册、登录、执行操作 a 的人数等。

现在，我想用一些像样的图表来了解历史。我的计划是每天访问一次 api 以获取 json 并将每个结果保存在 activerecord 表中。

有没有更好的建议方法。此外，任何让我的生活更轻松的宝石推荐。

1.  使用报告字段和日期列创建一个 activerecord 模型
2.  每天点击 API 获取一次 JSON 并填充上表
3.  用各种可能的维度绘制上表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:00:45.710

[那时， Highcharts](http://www.highcharts.com/)将是值得一看的东西。它可以采用 JSON 并呈现良好的图形。

这是迄今为止我发现的最简单的（但仍然不是很好）。一旦有了它，您就可以使用`whenever`gem 设置 CRON 作业，每天进行一次数据提取。

# java - 如何从邮政编码中获取地址？

> ID：12633679
> 
> 赞同：0
> 
> 时间：2012-09-28T04:40:59.327
> 
> 标签：java, google-maps, google-maps-api-3

我正在建立一个注册表。我想查询如何从邮政编码中获取完整地址。

这是我打算做的。

1.  邮政编码中的用户密钥
2.  用户单击名为“自动获取”的按钮
3.  完整地址被加载到文本字段中。

注意：地址需要是全局的。

我在网上研究并发现这实际上可以通过使用 Google Maps API 来完成，对吗？我很困惑，因为 Google Maps API 处理的是纬度和经度。我如何在其中加入邮政编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:56:18.823

没有可解析到特定投递点的常用邮政编码（美国 DPBC 和其他国家/地区的同等机构*可能*会这样做，但邮政客户不知道或无法提供）。

您可以从邮政编码中做的最好的事情是填充城市和州/省。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:00:08.483

要定位位置/交货点，您需要使用 Google Maps API 的经度 n 纬度，使用邮政编码，您可以找到最佳的城市/区域

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:08:21.710

吉姆和穆库尔所说的是正确的。

例如，在英国，邮政编码只是一个“路线指示”，在绝大多数情况下足以识别通道或附属通道。但是，如果与 DPS（送货点后缀 - 没有消费者需要知道或不应该关心）结合使用，它可以识别地址，但这在所有情况下都不会起作用，因为一个主要的公寓楼可能有几个公寓相同的DPS。

在英国，重要的是要注意邮政编码是用于交付目的的*路线指示*，并且（尽管在某种意义上它可能是）在技术上不是地理位置。

就获取地址的纬度/经度而言，这取决于系统所基于的数据的准确性，因为有些只有 100m、50m、25m、10m 等......（所以你可能会在街上找到房子，或几扇门外的房子等...）

那里有寻址解决方案，给定一个邮政编码，然后返回一个已知地址列表（以及它的纬度/经度坐标（达到一定的准确性））......有些提供可以使用的在线 API - 但是这些服务中的大部分都是有偿的，有些服务实际上相当昂贵。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T11:16:55.713

在英国，您需要的信息费用每年高达 375 英镑。在可获得此数据的国家/地区，可能会涉及成本。我想不是所有国家都有这个设施。

您可以从 Google 和[Geonames](http://download.geonames.org/export/zip/)等获得的最好的是邮政编码/邮政编码的质心

# caching - Infinispan JPA 缓存加载器？

> ID：12633680
> 
> 赞同：2
> 
> 时间：2012-09-28T04:41:21.837
> 
> 标签：caching, infinispan

如何实现 Infinispan JPA 缓存加载器？在 infinispan API 中是否有任何模式或方法来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:21:22.260

Infinispan 中大多数现有的 CacheLoader 实现都假设数据只需要存储，并盲目地将其视为字节数组。Infinispan 中的集成 API 除了“store(Key,Value)”或“load(Key)”之外没有公开太多上下文。我有点过于简单化了，但这就是核心。

有一个例外是[LuceneCacheLoader](https://github.com/infinispan/infinispan/blob/master/lucene-directory/src/main/java/org/infinispan/lucene/cachestore/LuceneCacheLoader.java)。这被设计为专门与[Infinispan 的 Lucene 目录](https://docs.jboss.org/author/display/ISPN/Infinispan+as+a+Directory+for+Lucene)结合使用，因为它利用了这一事实

*   它知道期望哪些类型
*   利用目录的已知需求（例如访问模式）

查看资源以获取灵感；注意我只实现了加载（它是一个 CacheLoader）。

如果您使用 Infinispan 和 CacheLoader 同时控制应用程序，您也可以利用这些细节。

棘手的方面：

*   即使在同一个事务中写入多个键，您也可以在 CacheLoader 逻辑范围内一次访问一个条目 -> 难以映射关系：必须一次处理一个实体并“恢复连接”
*   *后面写*你可能会收到乱序的条目->不确定如何处理引用完整性
*   在*后面写*你不会有相同的事务上下文 - >可能是可以接受的吗？

考虑到这些，我相信你可以写一个。多么容易？这取决于您的应用程序。

我不确定通用解决方案是否可行。如果你发现它可以，请贡献它，因为这将是对项目的一个很好的补充。

# ruby-on-rails - rails to grails - db:create 和 db:migrate 发生了什么？

> ID：12633681
> 
> 赞同：1
> 
> 时间：2012-09-28T04:41:36.387
> 
> 标签：ruby-on-rails, grails, database-migration

我在 Ruby on Rails 方面有相当多的经验，并且我正在接管在 Grails 中创建的现有项目的开发。之前的开发人员声称任何具有 Rails 经验的人都应该能够做得很好，但我正在把头撞到墙上......

我已经正确配置了 Grails 环境，并且应用程序可以连接到我的数据库。如果我在一个 RoR 项目中，我知道我只需要运行 'rake db:create && rake db:migrate'，我就可以开始了。

是否有等同于引导数据库模式的 grails？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T05:19:31.553

DataSource.groovy 中的默认设置`dbCreate = 'create-drop'`将在删除以前的表后创建数据库表。这适用于初始开发，并且在您进行快速更改时也可以，但是一旦事情稳定下来（最迟在您要投入生产时）安装[http://grails.org/plugin/database-migration](http://grails.org/plugin/database-migration)插件进行适当的迁移。

对于 Rails 开发人员来说，DSL 看起来很熟悉，并且有一些方便的脚本可以为您自动生成迁移脚本。

# javascript - 如何清除div内的跨度

> ID：12633683
> 
> 赞同：1
> 
> 时间：2012-09-28T04:41:45.220
> 
> 标签：javascript, html, jquery

我想清除 div 内的跨度值，而不删除其他内容，仅删除跨度的内容。

例如：身体：

```
<div id="content">
  <span>one</span>

  <input type="text" />
  <input type="text" />

  <span>two</span>
  <span>three</span>

  <select>
        <option selected="selected" value=""></option>
        <option value="Monday">Monday</option>
        <option value="Tuesday">Tuesday</option>
        <option value="Wednesday">Wednesday</option>
        <option value="Thursday">Thursday</option>
        <option value="Friday">Friday</option>
        <option value="Saturday">Saturday</option>
        <option value="Sunday">Sunday</option>
  </select>
</div> 
```

脚本：

```
<script type="text/javascript">
function restSel() {
   document.getElementById("#content span").innerHTML="";
};
</script> 
```

清除所有的`spans`或所有的内容`spans`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T04:43:59.447

如果您使用的是 JQuery（这会给您带来很多乐趣），那么您可以这样做。

```
$("span").html(""); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T04:45:45.560

如果你只使用纯 JS，你可以试试这个：

```
document.getElementById("content").getElementsByTagName("span")[0].innerHTML=""; 
```

您可以替换`0`为任何有效索引以清除某些`span`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T04:49:57.600

好吧，我猜我撒谎了。感谢@Passerby，这比我想象的要简单；

```
for (i = 0; i < document.getElementById('content').getElementsByTagName('span').length; i++) {
    document.getElementById('content').getElementsByTagName('span')[i].innerHTML = '';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T04:54:01.440

使用 jQuery：仅针对*id = "content"*的 div 中的*跨度*（如果您的文档中有其他*跨度：*

 **`$('div#content').find('span').html('');`**

# excel-dna - ExcelDNA 将 TODAY() 作为参数传递

> ID：12633685
> 
> 赞同：0
> 
> 时间：2012-09-28T04:42:08.773
> 
> 标签：excel-dna

是否可以编写一个接受 =getContent("keyword",TODAY()-30,TODAY()) 的函数，那么参数的类型应该是什么？

试过公共静态对象测试（对象日期）{返回DateTime.FromOADate（Convert.ToDouble（日期））；} // 输出 41180

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:32:48.537

是 - Excel 将`TODAY()`在将值传递给您的函数之前评估该函数。您可以声明参数，`DateTime`就像您希望 Excel-DNA 将 Excel 双精度值解释为日期/时间值一样。所以你可能会写：

```
public static object getContent(string keyword, DateTime startDate, DateTime endDate)
{
    // do the work...
    return result;
} 
```

# mongodb - MongoDB 索引

> ID：12633687
> 
> 赞同：3
> 
> 时间：2012-09-28T04:42:21.140
> 
> 标签：mongodb, indexing

我们有一个包含近 4000 万条记录的 MongoDB 集合。集合的当前大小为 5GB。此集合中存储的数据包含以下字段：

```
_id: "MongoDB id"
userid: "user id" (int)
mobile: "users mobile number" (int)
transaction: "transaction id" (int)
sms: "message sent to user mobile" (text)
created_dt: "unix timestamp of the transaction" 
```

除了 _id 上的索引（默认创建）之外，我们还在移动和交易字段上定义了单独的索引。

但是，以下查询需要 60 到 120 秒才能完成：

```
{
    mobile:<users mobile number>
} 
```

我使用 RockMongo 访问 MongoDB。MongoDB 托管在具有 16GB RAM 的服务器上。此服务器上近 8GB 的​​ RAM 是免费的。

我在这里做错了什么？

更新：

解释的输出：

```
{
    "cursor" : "BasicCursor",
    "nscanned" : 37145516,
    "nscannedObjects" : 37145516,
    "n" : 37145516,
    "millis" : 296040,
    "nYields" : 1343,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
    }
} 
```

查询时 mongostat 的输出

```
insert  query update delete getmore command flushes mapped  vsize    res faults locked % idx miss %     qr|qw   ar|aw  netIn netOut  conn       time 
    13      2      0      0       0       1       0   168g   336g  6.86g      1        1          0       0|0     1|0    21k     1k    19   11:30:04 
    16      0      0      0       0       1       0   168g   336g  6.88g      0      0.1          0       0|0     1|0    21k     1k    19   11:30:05 
    14      0      0      0       0       1       0   168g   336g  6.86g      0        0          0       0|0     1|0    29k     1k    19   11:30:06 
    10      0      0      0       0       1       0   168g   336g  6.86g      0        0          0       0|0     1|0    19k     1k    19   11:30:07 
    16      0      0      0       0       1       0   168g   336g  6.88g      0      0.1          0       0|0     1|0    21k     1k    19   11:30:08 
     9      0      0      0       0       1       0   168g   336g  6.89g      0        0          0       0|0     1|0    13k     1k    19   11:30:09 
    19      0      0      0       0       1       0   168g   336g  6.89g      0        0          0       0|0     1|0    27k     1k    19   11:30:10 
    12      0      0      0       0       1       0   168g   336g  6.89g      1      1.2          0       0|0     1|0    24k     1k    19   11:30:11 
    17      0      0      0       0       1       0   168g   336g  6.89g      1      1.7          0       0|0     1|0    31k     1k    19   11:30:12 
    15      0      0      0       0       1       0   168g   336g  6.89g      0        0          0       0|0     1|0    19k     1k    19   11:30:13 
```

更新 2：

直到最近，我们还在同一个 MongoDB 服务器中存储了另一个包含大约 13 亿个文档的集合。此集合现在已被删除（丢弃）。这可以解释上述 mongostat 输出中的映射/vsize 列。

服务器还存储了 6 个其他频繁插入的集合。目前的总存储大小约为 35GB。

更新 3：

在集合上定义的索引。使用 RockMongo 创建。

```
[
{
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "mymongodb.transaction_sms_details",
    "name" : "_id_"
},
{
    "v" : 1,
    "key" : {
        "_transaction_mobile_" : 1
    },
    "ns" : "mymongodb.transaction_sms_details",
    "background" : 1,
    "name" : "mobile"
},
{
    "v" : 1,
    "key" : {
        "_transaction_transaction_" : 1
    },
    "ns" : "mymongodb.transaction_sms_details",
    "background" : 1,
    "name" : "transaction"
}
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:35:57.283

RockMongo 生成的密钥显然不正确。

```
 "_transaction_mobile_" : 1
    "_transaction_transtion_" : 1 
```

我不知道 RockMongo 有什么问题，但我认为这可以解决问题：

```
db.xxx.dropIndexes();
db.xxx.ensureIndex({mobile: 1});
db.xxx.ensureIndex({transaction: 1}); 
```

注意：这可能需要很长时间。不要在正在运行的生产机器上执行此操作。

# c++ - 如何在删除类指针列表时删除分段错误

> ID：12633688
> 
> 赞同：0
> 
> 时间：2012-09-28T04:42:30.500
> 
> 标签：c++, segmentation-fault

我有两节课

```
class A{};

class B{
Private:
 list<A*> * mylist;
 remove();

};

void B:: remove() // To remove list mylist
{
  list<A*>::iterator iter = mylist->begin;
  for(;iter!=mylist->end;)
  {
    list<A*>::iterator iter1 = iter++;
    --iter;
    delete (*iter); 
    mylist->erase(iter);
    iter = iter1;
  }

} 
```

我在删除功能中遇到分段错误，请纠正我做错的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:52:54.993

此代码似乎要擦除列表。话虽如此..

```
for (list<A*>::iterator it = mylist->begin();
   it != mylist->end(); delete *it++);

mylist->clear(); 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:51:16.360

永远不要重新发明轮子...

```
void B::remove()
{
    mylist.clear();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:07:51.193

这个程序没有段错误，它在 valgrind 下成功运行：

```
#include <list>

class A{};

class B{
public:
  B() {
    mylist = new std::list<A*>;
    mylist->push_back(new A);
    mylist->push_back(new A);
  }
 ~B() { remove(); }

private:
 std::list<A*> * mylist;
 void remove();
};

void B:: remove() // To remove list mylist
{
  std::list<A*>::iterator iter = mylist->begin();
  for(;iter!=mylist->end();)
  {
    std::list<A*>::iterator iter1 = iter++;
    delete (*iter1); 
    mylist->erase(iter1);
  }
  delete mylist;
  mylist = 0;
}

int main () { B b; } 
```

不过，如果你为我写了那个程序，我会很不高兴。

*   它违反了三原则。
*   它`new`是一个`std::list`. 从来没有`new`一个标准的容器，它只是浪费空间。
*   它包含具有混淆所有权语义的裸指针。更喜欢`std::list<A>`. 如果您绝对需要指针，请使用`std::list<std::shared_ptr<A> >`.
*   它不提供异常安全。

如果您可以修改您的数据结构，这就是我将如何编写您的程序。请注意缺少显式析构函数、复制构造函数和赋值运算符。*一切正常。*

```
#include <list>

class A{};

class B{
public:
  B() {
    mylist.push_back(A());
    mylist.push_back(A());
  }

private:
 std::list<A> mylist;
 void remove();
};

void B:: remove() // To remove list mylist
{
  mylist.clear();
}

int main () { B b; } 
```

# database - 如何将数据库中的邮寄地址编码为双精度

> ID：12633701
> 
> 赞同：1
> 
> 时间：2012-09-28T04:44:26.323
> 
> 标签：database, ms-access, encoding, double

我有一个 MDB 数据库，其中包含有关患者（客户）的信息。我试图了解控制数据库的实践管理系统是如何工作的，但是，当我查看数据库架构时，“邮寄地址”字段的类型为“双”，并且数据显示一个数字，例如“1.0814000000000000e+ 04”代表地址“1 John Smith Road”，“SOMETOWN”作为郊区（应用程序中的一个单独字段，但在数据库中没有相应的字段，这让我假设它们都捆绑在一起），“QLD ”作为地区，“1111”作为邮政编码。

有没有人知道这个信息是如何变成双重的，如果是这样，我该如何将它重建为一个地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:45:04.087

将字符串数据存储为双精度似乎不太可能，因为最大长度为 8 个字符（双精度通常是 8 个字节，一个 ASCII 字符 = 一个字节）。我的猜测是外键。1.0814000000000000e+04 = 1.0814x10 ⁴ = 10814 这是一个整数。不知道为什么它会这样存储。

# mysql - 如何从同一列中选择不同的值？

> ID：12633704
> 
> 赞同：2
> 
> 时间：2012-09-28T04:44:58.430
> 
> 标签：mysql, sql, select

我有一个`table`2 `column`，类型和年龄，但我想显示在 5 列中，因为它的条件类似于这个例子：| 类型 | 年龄 < 10 | 10<=年龄<20 | 年龄 > 20 |

我怎么能做到这一点，因为它只有 2 `column`？

我尝试选择具有不同别名的同一张表，但效果不佳，执行时间长。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:50:04.813

试试这个：

使用[CASE](http://dev.mysql.com/doc/refman/5.0/en/case.html)语句

```
select TYPE,
       case when  Age < 10 then age end as ' Age<10',
       case when  Age between 10 and 20  then age end as ' Age 10-20',
       case when  Age > 20 then age end as ' Age>20'  
from
your_table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T04:56:18.533

你想要什么作为列值？一个布尔值？

```
SELECT type, 
  age < 10               AS "Age < 10", 
  age >= 10 AND age < 20 AS "10 <= Age < 20", 
  age > 20               AS "Age > 20" 
FROM table_name; 
```

好的，显然您想要汇总（每个年龄段的人数）

```
SELECT type,
  (SELECT COUNT(*) FROM table_name AS t2 WHERE age < 10 AND t2.type = type) AS "Age < 10",
  (SELECT COUNT(*) FROM table_name AS t2 WHERE age >= 10 AND age < 20 AND t2.type = type) AS "10 <= Age < 20)"
  ...and so on...
FROM table_name 
```

我想这与您认为太慢的解决方案相同？我想不出另一个更好的了。年龄条件索引会有所帮助，但 MySQL 不支持条件索引。在 PostgreSQL 中你可以`CREATE INDEX ON table_name (age) WHERE age < 10 ...`

# android - 如何在 Android 中使用 itextpdf.jar 来查看 pdf 文件？

> ID：12633706
> 
> 赞同：0
> 
> 时间：2012-09-28T04:45:08.200
> 
> 标签：android

> **可能重复：**
> [Android - 加载 PDF / PDF 查看器](https://stackoverflow.com/questions/4468621/android-load-pdf-pdf-viewer)

我想在我的应用程序中阅读 pdf 文件。所以我使用 itextPDF 但它不起作用。

如何在 Android 中使用 itextPDF.jar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:59:34.700

您可以参考[这个](http://code.google.com/p/ebookdroid/)来阅读 PDF 文件。它包括 MuPDF，一个轻量级的 PDF 和 XPS 查看器。希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T04:47:22.000

`itextPDF.jar`仅适用于在 android 设备中创建 pdf 文件。

阅读[此](https://stackoverflow.com/questions/8435103/how-to-create-pdf-file-using-itext-or-some-other-library-on-android)内容以在 android 设备中创建 pdf 文件

选中此项以便[在您的 Android 应用程序中更轻松地查看 PDF](https://github.com/jblough/Android-Pdf-Viewer-Library)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T04:49:26.220

**作为 Ram Kiran Sugguest，它不用于阅读目的**。您可以使用[APV PDF 查看器](http://code.google.com/p/apv/)库来查看 pdf 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T04:56:14.577

提这个

```
package android.test;

import java.io.File;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button=(Button)findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

                  @Override
                  public void onClick(View v) {
                        // TODO Auto-generated method stub
                        File file=new File("/sdcard/bill.pdf");
                        if(file.exists())
                        {
                              Uri path=Uri.fromFile(file);
                              Intent intent=new Intent(Intent.ACTION_VIEW);
                              intent.setDataAndType(path, "application/pdf");

                              try
                              {

                                    startActivity(intent);
                              }
                              catch(ActivityNotFoundException e)
                              {
                                    Toast.makeText(TestActivity.this, "No software for PDF", Toast.LENGTH_SHORT).show();
                              }
                        }
                  }
            });
    }
} 
```

# c# - Windows 8 应用生命周期管理：“SaveState”未触发

> ID：12633716
> 
> 赞同：0
> 
> 时间：2012-09-28T04:46:17.043
> 
> 标签：c#, windows-8, microsoft-metro, lifecycle, suspend

当我的应用程序暂停时，我试图停止我的网络摄像头预览（因为它不喜欢恢复）。

[我在这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx#step_2__save_the_app_s_state)关注 MSDN 上的“入门”指南

我已添加`await mediaCaptureMgr.StopPreviewAsync();`到`SaveState`async 方法（在示例应用程序中使用）。这可以使用 Visual Studio 的“暂停”选项（在“调试位置”工具栏中）完美地工作，`SaveState`但当应用程序通过在 Windows 本身中切换应用程序合法暂停时不会触发。

我已经用默认的网格项目对此进行了测试，并且发生了同样的事情（当使用 VS '暂停'而不是通过切换离开它时触发）

我应该以不同的方式做这件事吗？

干杯，

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:18:40.477

应用程序不再可见后不会立即暂停应用程序。应用程序暂停前有大约 10 秒的延迟。此（以及更详细的）信息可在[此应用程序生命周期文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925#app_visibility)中找到。

此外，任务管理器提供了一种方便的方式来查看应用程序是否已暂停。默认情况下，挂起状态是不可见的，但可以如下图所示启用。

![如何在任务管理器中显示挂起状态](../Images/5912a6051b2917667a75cc8af610f0b9.png)

# php - Mysql UPDATE（来自PHP） - 只运行前几行.. 一次更新后所有 CELL 锁定

> ID：12633720
> 
> 赞同：0
> 
> 时间：2012-09-28T04:46:38.187
> 
> 标签：php, mysql

我从 PHP 运行 MYSQL UPDATE。它产生输出，显示在浏览器中 - 没有问题。mysql db 更新各种行数。如果我尝试 10 行，它会产生前 5 行。如果我尝试 4 它会首先产生和最后产生。我开始为所有行进行 INSERT，它在几秒钟内为这个完全相同的数据库插入了 1000 多行。UPDATE 似乎在某种程度上偏离了……也许人们对为什么会发生这种情况有一些意见？

主要问题是，在我对行进行更新后，这些行被“锁定”以通过 PHP 进行更新。在我看来，这真的是一个奇怪的点，我不明白发生了什么。我可以通过 phpMYadmin 进行更新。

按要求编码：

```
mysql_query(" UPDATE `search` SET `pr_image` = '$primage', `pr_link` = '$pr_link' WHERE `s_id` = '$id' "); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:17:21.010

```
UPDATE `search` SET `pr_image` = $primage, `pr_link` = $pr_link WHERE `s_id` = $id 
```

试试这个查询。

# google-apps-script - 您可以从 Google API JSON 响应中实例化 Apps Script File 对象吗？

> ID：12633721
> 
> 赞同：0
> 
> 时间：2012-09-28T04:46:48.927
> 
> 标签：google-apps-script

我想做这样的事情：

```
var json = JSON.parse(urlFetch.getContentText());
var entry = json.feed.entry;

for(var i in entry){
  if(userEmail == entry[i].getOwner()){
      //Do Stuff
  }
} 
```

假设这里的每个**条目**`File`都是从对 feed 的调用中检索到的 JSON 格式`DocsList`，我怎样才能将它合并到一个 Apps Script`File`对象中，这样我就可以`File`在它上面调用普通函数，比如`getOwner()`or `getFileType()`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:47:18.013

您可以通过查看 json 字符串来分析每个条目。我相信您使用的是 Google Docs 原生 API，在查看[此处](https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files)的文档后，我可以看到 `entry.author.email`会给您作者的电子邮件地址。

同样，作者姓名：`entry.author.name`

你不会有任何像`getOwner()`返回的 json 那样的方法。

另外，仅供参考，Apps Script 中有[DocslList](https://developers.google.com/apps-script/service_docslist)服务，它有这样的方法

# ios - Facebook SDK 3.0 自动登录

> ID：12633723
> 
> 赞同：0
> 
> 时间：2012-09-28T04:47:22.360
> 
> 标签：ios, facebook, session, login

我是 facebook SDK 3.0 IOS 的新手

有没有办法自动登录到 facebook SDK 3.0？

我的规范是，我们可以将 facebook 集成到我们的应用程序成员 ID（就像 instagram 一样，我们可以将 facebook 集成到我们的 ID）

因此，如果会员退出，facebook 集成将被注销，当会员登录时，facebook 将自动登录。

有没有办法做到这一点？就像将访问令牌存储到服务器一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:15:34.310

你可以用这个

[https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=THE_ACCESS_TOKEN_OF_USER](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=THE_ACCESS_TOKEN_OF_USER)

并且只有一次登录，会话不会过期。

原谅我的英语

# mysql - 按最高计数获取mysql结果

> ID：12633724
> 
> 赞同：0
> 
> 时间：2012-09-28T04:47:36.697
> 
> 标签：mysql, count

我有一个包含字段的表：

`id`, `albumid`, `userid`,`keywords`其中关键字是`varchar`并且可以通过分隔符超过一个，例如：一、二、三

我想获得最受欢迎关键字的前 10 个结果，但不是来自我目前使用的同一用户，但不确定它是否正确：

```
 $tableName = $db->nameQuote('#__mytable');

 $sql = "SELECT `id`,`albumid`,`userid`,`keywords`, COUNT(keywords) AS popular FROM ".$tableName." GROUP BY `userid` HAVING COUNT(*) > 1 ORDER BY popular DESC LIMIT ".$lim0.",".$lim;

 $db->setQuery($sql); 
```

下面的代码是否正确。我不确定我是否获得了具有最多重复条目的关键字...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:15:47.663

试试这个查询的大小，我只是捏造你的分组，并使用 DISTINCT 用户 ID 作为计数指标

```
"SELECT `id`,`albumid`,`keywords`, COUNT(DISTINCT userid) AS popularity FROM ".$tableName." GROUP BY `keywords` HAVING popularity >= 1 ORDER BY popularity DESC LIMIT ".$lim0.",".$lim; 
```

但是，如果您的关键字列以逗号分隔，则此查询将不起作用。此查询基于每条记录都有一个关键字条目这一事实进行操作

# actionscript-3 - 对 Actionscript 项目的 Plug/Unplug 模块使用“Class”关键字

> ID：12633725
> 
> 赞同：0
> 
> 时间：2012-09-28T04:47:48.580
> 
> 标签：actionscript-3

我一直想知道，在 AS3.0 中制作可根据需要插入和移除的插件的最佳方式是什么。类似于 Windows 更新的方式是通过互联网从其服务器在本地计算机上进行的。或者说，如何在 Photoshop 程序中加载和卸载不同的命令和效果。

所看到的是，Actionscript 提供了两种（或可能更多，据我所知）方法来做到这一点。一种是拥有一个外部 swf 文件（以便它们可以在运行时加载，并且可以使用类）。另一种方法是使用“类”关键字。

**我的问题从这里开始。**

1）使用“Class”关键字动态加载新类以使模块可插拔是一种好习惯。

2）在整个项目中广泛使用它是否很好。也就是说 90% 的类使用 Class 关键字来加载。从而使整个项目在运行时也可更新？我可能会面临广泛使用它的问题（如内存泄漏？？，高 CPU 使用率？？）

# audio - Phonegap Media getCurrentPosition 不准确且速度慢

> ID：12633726
> 
> 赞同：1
> 
> 时间：2012-09-28T04:48:10.060
> 
> 标签：audio, cordova

我非常失望地发现，现在我已经准备好将我的 html5 应用程序迁移到使用 phonegap 的手机上，播放音频的能力就像永动机一样。它几乎就在那里，但并不完全。

Androids（至少在冰淇淋三明治之前）的答案是 Phonegap 媒体 API。据大家说。

问题是我在播放音频时真的很关心当前时间。在我运行 Chrome 的 Mac 上，我计时了需要多长时间：

pos=audio.currentTime

它不到一毫秒。

使用 Phonegap 媒体 api，我必须调用一个异步函数，等待它回调，然后我得到当前的媒体位置。这需要 5 到 150 多毫秒。它并不一致，而且速度非常缓慢。

它也引出了一个问题：现在几点了？如果获取时间需要 150 毫秒，我是在这 150 毫秒的开始还是结束时获得时间？我真的无法确定我得到的时间是否真的接近当前时间。

我还没有编写潜艇导航软件，这是一件好事，因为时间如此可怕，我永远无法确定自己在哪里。

我现在使用系统时钟来跟踪时间，并使用 getCurrentPosition() 不时重新同步。但是，我仍然可以延迟一百多毫秒。

我的问题：有人有更好的方法吗？

编辑：

查看 Cordova 的代码：

```
 /**
 * Get current position of playback.
 *
 * @return                  position in msec or -1 if not playing
 */
public long getCurrentPosition() {
    if ((this.state == STATE.MEDIA_RUNNING) || (this.state == STATE.MEDIA_PAUSED)) {
        int curPos = this.player.getCurrentPosition();
        this.handler.webView.sendJavascript("cordova.require('cordova/plugin/Media').onStatus('" + this.id + "', " + MEDIA_POSITION + ", " + curPos / 1000.0f + ");");
        return curPos;
    }
    else {
        return -1;
    }
} 
```

在我看来，这应该执行得相当快……除了对 sendJavascript() 的调用。我想知道这是否是神秘延迟的根源？

出于我的目的，我不需要 onStatus 事件：我需要尽快获得当前位置。所以我想知道我是否可以删除那行代码......我想这将需要对 Cordova 源代码本身进行更改。:(

# ios - UIScrollView - 如何在子视图的第二页上重新加载数据？

> ID：12633728
> 
> 赞同：1
> 
> 时间：2012-09-28T04:48:20.813
> 
> 标签：ios, ios5, uiscrollview, ios6

我有一个滚动视图，它设置为在两页之间来回滚动。每个页面在同一个视图控制器上使用不同的标签数据等。

我需要在每个页面上重新加载数据，而不退出“子”视图。

例如，我在滚动视图中导航到第 1 页。我的 web svc 通过通知向我发送更新的数据。我需要重新加载第 2 页上的数据，同时仍然坐在第 1 页上……或者至少在我开始滚动到第 2 页时重新加载该数据。

我希望这是有道理的。提前致谢！

（来自我的scrollView的片段..但我认为我需要在我的子视图中添加一些东西..？）

```
- (void)loadScrollViewWithPage:(int)page {
if (page < 0) return;
if (page >= kNumberOfPages) return;

if ([controllerName isEqualToString:@"ClassicViewController"]){
    ClassicViewController *controller = [viewControllers objectAtIndex:page];
    if ((NSNull *)controller == [NSNull null]) {

        controller = [[ClassicViewController alloc] initWithPageNumber:page];
        controller.referringObject = self.referringObject;
        controller.user = self.user;
        controller.pushedFromScroll = kTrue;
        controller.theirRoll = self.theirRoll;

         NSLog(@"page replaced # = %d", page);
        [viewControllers replaceObjectAtIndex:page withObject:controller];
        [controller release];
    }

    if (nil == controller.view.superview) {
        CGRect frame = scrollView.frame;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0;
        controller.view.frame = frame;
        [scrollView addSubview:controller.view];
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:56:52.770

您有一些选择，但我认为如果您的数据发布了已更新的通知，您应该让每个页面的视图控制器负责更新其视图的元素。所以 -

1.  让每个视图控制器订阅您使用`NSNotificationCenter`'`addObserver:selector:name:objet`方法描述的通知。
2.  实现您传递给其选择器的通知处理程序，`addObserver...`以根据更改更新视图。

希望这可以帮助！

# core-plot - Core Plot Interactive 图挂在 ios 6 中

> ID：12633730
> 
> 赞同：0
> 
> 时间：2012-09-28T04:48:34.027
> 
> 标签：core-plot

我正在使用核心绘图库在我的应用程序中绘制图形。当我尝试移动绘图点时，应用程序没有响应。它挂起完全阻止了每一个动作。

# matlab - matlab - 将图像像素值连接成一行或一列数据

> ID：12633731
> 
> 赞同：1
> 
> 时间：2012-09-28T04:48:35.510
> 
> 标签：matlab

我正在做一个图像识别项目，并希望使用像素值作为通过 matlab nprtool 区分 2 个不同图像的媒介。为了准备训练和测试数据集，数据必须是列或行形式。那么如何将图像的像素值（例如 100x100）连接成 1 列或 1 行数据？最合适的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T04:55:48.077

如果您的矩阵被调用`image`，请使用`:`运算符

```
 image(:) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:49:45.203

成一排：

```
 image = reshape( image, 1, []); 
```

一栏：

```
 image = reshape( image, [], 1); 
```

* * *

这是另一种方式：

成一排：

```
 image = image(:)'; 
```

一栏：

```
 image = image(:); 
```

# tfs-sdk - 更新用户图像的 API - 身份扩展属性未保存

> ID：12633732
> 
> 赞同：6
> 
> 时间：2012-09-28T04:48:40.523
> 
> 标签：tfs-sdk

我正在尝试编写一个小脚本来将所有用户图像设置为他们的 AD 图像，我在 ILSpy 中进行了一些跳跃，并找到了使用 TFS 服务器 API 设置的内容，但是代码需要有点不同，因为我' m 改用客户端 API。

我下面的代码可以成功遍历 tfs 中的所有用户，在 AD 中查找它们，获取缩略图，在 TFS 标识上设置属性。但我无法终生将扩展属性保存回 TFS。

代码也不例外，但该属性未设置为我下次运行应用程序时设置的值。

有谁知道通过客户端 api 保存扩展属性的方法？

```
Microsoft.TeamFoundation.Client.TeamFoundationServer teamFoundationServer = new Microsoft.TeamFoundation.Client.TeamFoundationServer("{URL TO TFS}");

FilteredIdentityService service = teamFoundationServer.GetService<FilteredIdentityService>(); ;
IIdentityManagementService2 service2 = teamFoundationServer.GetService<IIdentityManagementService2>();

foreach (var identity in service.SearchForUsers(""))
{
    var user = UserPrincipal.FindByIdentity(new PrincipalContext(ContextType.Domain), identity.UniqueName);
    if (user == null) continue;
    var de = new System.DirectoryServices.DirectoryEntry("LDAP://" + user.DistinguishedName);
    var thumbNail = de.Properties["thumbnailPhoto"].Value as byte[];

    identity.SetProperty("Microsoft.TeamFoundation.Identity.CandidateImage.Data", thumbNail);
    identity.SetProperty("Microsoft.TeamFoundation.Identity.CandidateImage.UploadDate", DateTime.UtcNow);

    service2.UpdateExtendedProperties(identity);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T20:19:55.860

想通了，需要设置一些额外的属性。

```
Microsoft.TeamFoundation.Client.TeamFoundationServer teamFoundationServer = new Microsoft.TeamFoundation.Client.TeamFoundationServer("http://urltotfs");

FilteredIdentityService service = teamFoundationServer.GetService<FilteredIdentityService>(); ;
IIdentityManagementService2 service2 = teamFoundationServer.GetService<IIdentityManagementService2>();

foreach (var identity in service.SearchForUsers(""))
{
    var user = UserPrincipal.FindByIdentity(new PrincipalContext(ContextType.Domain), identity.UniqueName);
    if (user == null) continue;
    var de = new System.DirectoryServices.DirectoryEntry("LDAP://" + user.DistinguishedName);
    var thumbNail = de.Properties["thumbnailPhoto"].Value as byte[];

    identity.SetProperty("Microsoft.TeamFoundation.Identity.Image.Data", thumbNail);
    identity.SetProperty("Microsoft.TeamFoundation.Identity.Image.Type", "image/png");
    identity.SetProperty("Microsoft.TeamFoundation.Identity.Image.Id", Guid.NewGuid().ToByteArray());
    identity.SetProperty("Microsoft.TeamFoundation.Identity.CandidateImage.Data", null);
    identity.SetProperty("Microsoft.TeamFoundation.Identity.CandidateImage.UploadDate", null);

    service2.UpdateExtendedProperties(identity); 
} 
```

# javascript - knockout.js 中的唯一元素 ID：Chrome OK、FF 和 Opera 失败

> ID：12633735
> 
> 赞同：0
> 
> 时间：2012-09-28T04:49:01.473
> 
> 标签：javascript, svg, knockout.js

我正在开发一个 SVG UI 元素库，并计划使用 knockout.js。这是一个非常基本的页面，可以在没有 knockout.js 的情况下满足我的需求，它在 Chrome、FF、Opera 中运行良好。它画了一根管子：

```
<html>
<body>
    <div width="100px" height="100px">
        <svg width='100px' height='100px'>
          <linearGradient id="gradId" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
            <stop  offset='-20%' style="stop-color: #303030"/>
            <stop  offset='40%' style="stop-color: #D0D0D0"/>
            <stop  offset='100%' style="stop-color: #303030"/>
          </linearGradient>
          <rect id="myRect" x='0%' y='30%' width='100%' height='40%' />
        </svg>
    </div>
    <script type="text/javascript">
        document.getElementById("myRect").style.fill = "url(#gradId)";
        console.log(document.getElementById("myRect").style.fill);
    </script>
</body>
</html> 
```

现在到 knockout.js 模板。对于模板化控件的每个实例，我都需要唯一的 id，以便正确引用对应的渐变，并且不同的管道元素不共享渐变。在[这篇文章的](https://stackoverflow.com/questions/9233176/unique-ids-in-knockout-js-templates)帮助下，我制作了以下 html：

```
<html>
<head>
    <script type="text/javascript" src="js/knockout-2.1.0.debug.js "></script>
    <script type="text/javascript">
        // knockout code inspired by https://stackoverflow.com/questions/9233176/unique-ids-in-knockout-js-templates
        ko.bindingHandlers.uniqueId = {
            init: function (element, valueAccessor) {
                // Generate new element id
                element.id = ko.bindingHandlers.uniqueId.prefix + valueAccessor() + ko.bindingHandlers.uniqueId.prefix + (++ko.bindingHandlers.uniqueId.counter);
                console.log("Element id:" + element.id);
            },
            prefix: "autoId_",
            counter: 0
        };

        ko.bindingHandlers.uniqueStyleFill = {
            init: function (element, valueAccessor) {
                // Use recently generated element id in the style.fill value
                var value = ko.bindingHandlers.uniqueId.prefix + valueAccessor() + ko.bindingHandlers.uniqueId.prefix + ko.bindingHandlers.uniqueId.counter.toString();
                element.style.fill = "url(#" + value + ")";
                console.log("Binding:" + element.style.fill);
            }
        }; 
    </script>
</head>
<body>
<!-- Define ko template plumbing-horizontal-pipe that uses bodyColor and bodyColorLight attributes of the bound object --> 
    <script type="text/html" id="plumbing-horizontal-pipe">
        <svg width='100px' height='100px'>
          <linearGradient data-bind="uniqueId: 'horPipeGrad_'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
            <stop  offset='-20%' data-bind="style: {'stop-color': bodyColor()}"/>
            <stop  offset='40%' data-bind="style: {'stop-color': bodyColorLight()}"/>
            <stop  offset='100%'  data-bind="style: {'stop-color': bodyColor()}"/>
          </linearGradient>
          <rect x='0%' y='30%' width='100%' height='40%' data-bind="uniqueStyleFill: 'horPipeGrad_'"/>
        </svg>
    </script>
    <div width="100px" height="100px">
    <!-- Load ko template defined above, bind 'pipe' -->
        <svg width="100" height="110" data-bind="template: { name: 'plumbing-horizontal-pipe', data: pipe }" />
    </div>
    <!-- ko view model with one item 'pipe' -->
    <script type="text/javascript">
        function MyViewModel() {
            this.pipe = { bodyColor: ko.observable("#FF0000"), bodyColorLight: ko.observable("#FFA0A0") };
        }
        var g_vm = new MyViewModel();
        // This should make the browser display a red pipe. Works in Chrome, doesn't work in FF and Opera.
        ko.applyBindings(g_vm);
    </script>
</body>
</html> 
```

它在 Chrome 中运行良好 - 显示红色管道。FF 和 Opera 一直显示黑色矩形，这意味着 SVG 对象没有拾取渐变。我检查了 FF 日志输出，它看起来非常好：

```
[21:30:08.606] Element id:autoId_horPipeGrad_autoId_1
[21:30:08.610] Binding:url("#autoId_horPipeGrad_autoId_1") none 
```

可以看到，渐变的 id 被生成并用于 rect 样式的 fill 属性。但是浏览器在显示矩形时不使用这种渐变。

这里有什么问题？任何解决方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:19:07.357

我发现如果我对 svg 节点属性使用本机 KO 绑定，最好使用“attr”绑定。确实它似乎解决了你的问题：http: [//jsfiddle.net/antishok/UHnA8/1/](http://jsfiddle.net/antishok/UHnA8/1/)

（我知道 'css' 绑定不起作用，因为 svg 元素的 'class' 属性不是一个简单的字符串。不知道为什么 'style' 也不起作用，但至少 attr 似乎总是有效)

# iphone - 制作坐标平面

> ID：12633739
> 
> 赞同：3
> 
> 时间：2012-09-28T04:49:36.203
> 
> 标签：iphone, ios, xcode, math, ipod-touch

如何在 Xcode 中制作坐标平面视图控制器？我曾尝试使用 OPENGL，但它一直没有工作。我必须单独画线吗？让它递归调用，以便它保持一定数量的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:05:20.667

您将需要考虑您将对坐标计划执行的操作。你能移动飞机吗？可以放大吗？

您将需要设置`centerLocation`和`scale`变量。`centerLocation`表示您的中心，您将在此处为轴绘制一条垂直和水平粗线。`scale`表示您希望每单位有多少像素。您可以默认为 10 之类的值。您可以使用此变量来控制缩放。

如果您想将平面用于图形功能之类的东西，您需要的最低限度是轴。您可以使用比例尺找出“点”在您的网格中的位置。为此制作函数很有用。

如果你想绘制网格线，你可以做的只是使用`centerLocation.x`作为偏移量检查网格的最左边边界，然后以增量迭代像素，`scale`并在遇到的每个点上简单地绘制一条垂直线，直到你得到到最后。水平线也一样，除了你可以从顶部开始，偏移量`centerLocation.y`，并以 为增量添加一条水平线，`scale`直到你的计数器大于屏幕的高度。

# perl - 在 perl 中读取和写入文件

> ID：12633743
> 
> 赞同：1
> 
> 时间：2012-09-28T04:50:04.790
> 
> 标签：perl, file-io

```
 this
    is just
    an example. 
```

让我们假设上面是**out.txt**。我想读取**out.txt**并写入同一个文件。

```
 <Hi >
    <this>
    <is just>
    <an example.> 
```

修改**out.txt**。我想在某些行的开头和结尾添加标签。由于我将多次读取该文件，因此我无法每次都将其写入不同的文件。

**编辑 1** 我尝试使用`"+<"`，但它给出的输出如下：

```
Hi
this
is just
an example.
<Hi >
<this>
<is just>
<an example.>
 **out.txt** 
```

**编辑 2** 代码供参考：

```
open(my $fh, "+<", "out.txt");# or die "cannot open < C:\Users\daanishs\workspace\CCoverage\out.txt: $!";
     while(<$fh>)
     {
        $s1 = "<";
        $s2 = $_;
        $s3 = ">";
        $str = $s1 . $s2 . $s3;
        print $fh "$str";
     } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T05:10:57.347

你正在尝试做的事情的想法是有缺陷的。文件开头为

```
H  i  /  t  h  i  s  /  ... 
```

如果您要对其进行更改，则在处理第一行后它将如下所示：

```
<  H  i  >  /  i  s  /  ... 
```

注意你是如何破坏“th”的？您需要制作文件的副本，修改副本，用副本替换原始文件。

最简单的方法是在内存中制作这个副本。

```
my $file;
{ # Read the file
   open(my $fh, '<', $qfn)
      or die "Can't open \"$qfn\": $!\n";
   local $/;
   $file = <$fh>;
}

# Change the file
$file =~ s/^(.*)\n/<$1>\n/mg;

{ # Save the changes
   open(my $fh, '>', $qfn)
      or die "Can't create \"$qfn\": $!\n";
   print($fh $file);
} 
```

如果您想改用磁盘：

```
rename($qfn, "$qfn.old")
   or die "Can't rename \"$qfn\": $!\n";

open(my $fh_in, '<', "$qfn.old")
      or die "Can't open \"$qfn\": $!\n";
open(my $fh_out, '>', $qfn)
      or die "Can't create \"$qfn\": $!\n";

while (<$fh_in>) {
   chomp;
   $_ = "<$_>";
   print($fh_out "$_\n");
}

unlink("$qfn.old"); 
```

使用技巧，上面可以简化为

```
local @ARGV = $qfn;
local $^I = '';
while (<>) {
   chomp;
   $_ = "<$_>";
   print(ARGV "$_\n");
} 
```

或作为单行：

```
perl -i -pe'$_ = "<$_>"' file 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T10:43:56.557

读取内存中的内容，然后在写入文件时准备所需的字符串。（需要将 SEEK_SET 设置为零字节。

```
#!/usr/bin/perl

open(INFILE, "+<in.txt");
@a=<INFILE>;
seek INFILE, 0, SEEK_SET ;
foreach $i(@a)
{ 
    chomp $i;
    print INFILE "<".$i.">"."\n";
} 
```

如果您担心在内存中读取的数据量，您将不得不创建一个临时结果文件，最后将结果文件复制到原始文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T05:12:30.113

您可以使用[`Tie::File`](http://perldoc.perl.org/Tie/File.html)轻松随机访问文件中的行：

```
use Tie::File;
use strict;
use warnings;

my $filename = "out.txt";
my @array;
tie @array, 'Tie::File', $filename or die "can't tie file \"$filename\": $!";

for my $line (@array) {
  $line = "<$line>";
  # or $line =~ s/^(.*)$/<$1>/g; # -- whatever modifications you need to do
}

untie @array; 
```

免责声明：当然，此选项仅在文件未与其他进程共享时才可行。否则，您可以`flock`在修改文件时使用它来阻止共享访问。

Disclaimer-2（感谢 ikegami）：如果您必须编辑大文件并且担心性能，请不要使用此解决方案。对于小文件（小于 2MB，尽管可以使用`memory`arg 进行配置），大部分性能损失都会得到缓解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T05:02:31.347

一种选择是打开文件两次：以只读方式打开一次，读取数据，关闭它，处理它，再次以读写方式打开它（不附加），写入数据，然后关闭它。这是一个很好的做法，因为它可以最大限度地减少打开文件的时间，以防其他人需要它。

如果您只想打开一次，那么您可以使用`+<`文件类型 - 只需使用`seek`读取和写入之间的调用返回文件开头即可。否则，您完成阅读，位于文件末尾，然后开始在那里写入，这就是您得到所看到行为的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T13:25:01.773

需要指定

```
use Fcntl qw(SEEK_SET); 
```

为了使用

```
seek INFILE, 0, SEEK_SET; 
```

感谢 user1703205 的示例。

# ios - iOS中的泰米尔语字体

> ID：12633744
> 
> 赞同：0
> 
> 时间：2012-09-28T04:50:10.890
> 
> 标签：ios, iphone, uifont, custom-font, tamil

我尝试在其中安装泰米尔语字体名称`Bamini.ttf`，`xcode 4.2`并在`info.plist`.

然而它没有显示在界面生成器中？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:05:51.033

据我所知，您安装的新字体永远不会在界面生成器中列出。但是您可以在项目中使用它，如下所示：

1.  导入`yourfont.ttf`您的项目（选中“将项目复制到目标组的文件夹”和“添加到目标”）。

2.  打开 appname-info.plist 添加一个新行并将其命名`Fonts provided by application`（它是一个字符串数组） b。添加一个条目`Bamini.ttf`

    然后试试下面的代码

    ```
    UIFont *myFont = [UIFont fontWithName:@"Font name" size:18];
    [txtLabel setFont:myFont]; 
    ```

*字体名称可以是不同的格式文件名。您可以通过打开该字体来检查字体名称。 ![在此处输入图像描述](../Images/66fd4f29ce900002c8ce6aca5753ca07.png)

这肯定会奏效。

# java - JFrame paint() 时出现 NullPointerException

> ID：12633749
> 
> 赞同：1
> 
> 时间：2012-09-28T04:50:46.600
> 
> 标签：java, nullpointerexception, jframe, paint, repaint

我在弄清楚为什么会被`nullpointerexception`抛出时遇到问题。它并没有真正影响任何事情（至少我不这么认为），因为一切仍然被正确地绘制出来，但我不喜欢错误消息。

如您所见，paint() 调用 this.game.paint(g2)。为了尝试调试，this.game.print 中的所有内容都已被注释掉——该函数什么都不做，所以它不应该是问题的一部分。

```
public class Application extends JFrame {

private Game game;///<stores the rules for the game and facilitates interactions

public Application() throws RoyException {
    this.game = new Game(this, 2);
}

//   @Override
public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    try{
    this.game.paint(g2);
    }catch(Exception e)
    {
        System.out.println("CAUGHT " + e.getMessage());
        e.printStackTrace();
    }
}

public static void main(String[] args) {
    try {
        Application app = new Application();
    } catch (RoyException e) {
        System.out.println("An error occurred while running the program: " + e.getMessage());
        System.out.print("Stack trace: ");
        e.getStackTrace();
    }
} 
```

}

这是堆栈跟踪 - Application.java:153 is this.game.paint(g2);

```
CAUGHT null java.lang.NullPointerException
    at bullshitakemushrooms.Application.paint(Application.java:153)
   Game created.
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:43:08.883

显然，在设置可见性/大小后设置窗口的图标图像是一个坏主意。

移动这条线后

```
this.app.setIconImage(new ImageIcon("mushy.jpg").getImage()); 
```

前

```
 this.app.setSize(this.maxX, this.maxY);
    this.mmenu.setVisible(true);
    app.setVisible(true);
    app.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    app.setAlwaysOnTop(true); 
```

nullpointerexception 抛出停止。经验教训：首先设置窗口图标。

# java - Java Beans：因为在下面的例子中实现了可序列化的接口？

> ID：12633750
> 
> 赞同：3
> 
> 时间：2012-09-28T04:50:50.740
> 
> 标签：java, serialization, javabeans

我正在做一个教程 roseindia.net ( [http://www.roseindia.net/tutorial/java/jdbc/dataaccessobjectdesignpattern.html](http://www.roseindia.net/tutorial/java/jdbc/dataaccessobjectdesignpattern.html) ) 并使 bean`StudentBean.java`实现`java.io.Serializable`接口。

这有什么理由吗？数据是否以不同的方式存储在数据库中以实现`Serializable`接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:56:30.160

您链接到的教程没有使用可序列化的类。

他们可能将它扔在那里以遵循一般的 Java bean 模式，但通过 JDBC 将其写入数据库并不需要它。您对此感到困惑是正确的，因为没有解释。

Serializable 用于 ObjectOutputStream，例如写入文件或使用 RMI 通过网络传输 bean。所以对于一个数据传输对象来说，支持这个特性并不坏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T05:01:54.993

Java 提供了类来支持将对象状态写入流和从流中恢复对象。`java.io.Serializable`是一个**标记接口**，它提供了在 DB 表、文件中对类的对象状态（实现 Serializable）进行序列化或通过网络传输等的能力。

# html - Outlook 2010 html 电子邮件在超链接图像之间垂直 1px 空间

> ID：12633751
> 
> 赞同：1
> 
> 时间：2012-09-28T04:50:57.137
> 
> 标签：html, css, html-email, outlook-2010

我已经在这个 html 上工作了一段时间，试图弄清楚为什么 Outlook 2010 在超链接的图像之间添加了这条 1px 白线。

我很确定我已经尝试过我读过的关于 Html 电子邮件和 Outlook 的所有技巧。下面是我仅用于 2 个表的代码/样式。他们每个人都有一张单张图片。如果我删除超链接，outlook 2010 中没有空间。如果我离开超链接，我找不到摆脱空间的方法！

```
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse;" width="600">
        <tr>
            <td style="border-collapse: collapse;" width="600" height="179" >
                <a href="http://www.anzie.com/" style="height: 179px;  width: 600px; margin: 0px; padding: 0px;  display:block;  float: left; border:0; vertical-align:bottom;"><img border="0" align="left" alt="Gold Rush" height="179" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_01.jpg" style="height: 179px;  width: 600px; margin: 0px; padding: 0px;  display:block;  float: left; border:0; vertical-align:bottom;" width="600" /></a>
            </td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse;" width="600">
        <tr>
            <td style="border-collapse: collapse;" width="600" height="25">
                <a href="http://www.anzie.com/viewall_gold.php" style="height: 25px;  width: 600px; margin: 0px; padding: 0px;  display:block;  float: left; border:0; vertical-align:bottom; border:0;"><img align="left"  border="0" alt="Shop Gold" height="25" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_02.1.jpg" style="height: 25px;  width: 600px; margin: 0px; padding: 0px;  display:block;  float: left; border:0; vertical-align:bottom;" width="600" /></a> 
            </td>
        </tr>
</table> 
```

欢迎任何和所有的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-02T07:44:39.287

只是属性顺序的问题，好像……这样试试，对我来说没问题！;)

```
<table border="0" cellpadding="0" cellspacing="0" width="600">
  <tr>
    <td><a href="http://www.anzie.com/"><img style="display:block;" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_01.jpg" height="179" width="600" alt="Gold Rush" border="0" /></a></td>
  </tr>
  <tr>
    <td><a href="http://www.anzie.com/viewall_gold.php" target="_blank"><img border="0" alt="Shop Gold" height="25" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_02.1.jpg" style="display:block;" width="600" /></a></td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:20:55.340

尝试从`width='600px'`中删除`<td>`，以便它占用`img`

# ios - 为 3.5 和 4 英寸屏幕尺寸调整 UIScrollView 的大小

> ID：12633754
> 
> 赞同：5
> 
> 时间：2012-09-28T04:51:13.067
> 
> 标签：ios, xcode, iphone-5

我目前正在更新我的应用程序以支持新的 4 英寸屏幕尺寸。我注意到一些 UI 问题，尤其是`UIScrollViews`. 当下方有空白空间时，我想让滚动视图拉伸以填充屏幕；空白是滚动视图未在 4 英寸屏幕尺寸上拉伸的结果。目前，我正在`viewDidAppear`我的 VC 方法中调整滚动视图框架以适应这种情况。但是，我想知道是否可以通过 IB 处理这个问题。

我通过 IB 玩过自动调整大小选项，但没有运气。我还尝试将尺寸设置为“Retina 4 全屏”选项，并注意到相反的情况，滚动视图没有缩小以适应 3.5 英寸的屏幕尺寸。

必须有一种简单的方法通过 IB 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:53:15.283

我只能简单地使用一个`[UIScreen mainScreen].bounds.size.height`属性来自动设置大小，但这很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:14:48.780

尝试这样的事情：

scrollView.autoresizingMask = UIViewAutoresizingFlexibleHeight;

# mysql - 当存储过程迭代 15M 行的大表时，MySQL 的性能非常糟糕

> ID：12633755
> 
> 赞同：0
> 
> 时间：2012-09-28T04:51:14.040
> 
> 标签：mysql, sql, database, stored-procedures

我有一个**存储过程**`CURSOR`，它在一个遍历**15M 行**的表的 select 语句上打开一个（该表是大型 CSV 的简单导入）。

我需要通过**将每行的各个部分插入到 3 个不同的表中**来规范化该数据（捕获自动更新 ID，在外键约束中使用它们，等等）。

所以我写了一个简单的存储过程， open `CURSOR`，`FETCH`将字段转换为变量并执行 3 个插入语句。

我在一个小型数据库服务器上，默认安装 mysql（1 cpu，1.7GB ram），我希望这个任务需要几个小时。我在 24 小时以上，顶部显示**85% 浪费了 CPU**。

我想我有某种可怕的低效率。关于提高任务效率的任何想法？或者只是确定**瓶颈在哪里**？

* * *

```
root@devapp1:/mnt/david_tmp# vmstat 10
procs -----------memory---------- ---swap-- -----io---- -system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa
 0  1    256  13992  36888 1466584    0    0     9    61    1    1  0  0 98  1
 1  2    256  15216  35800 1466312    0    0    57  7282  416  847  2  1 12 85
 0  1    256  14720  35984 1466768    0    0    42  6154  387  811  2  1 10 87
 0  1    256  13736  36160 1467344    0    0    51  6979  439  934  2  1  9 89 
```

* * *

```
DROP PROCEDURE IF EXISTS InsertItemData;

DELIMITER $$
CREATE PROCEDURE InsertItemData() BEGIN 
    DECLARE spd TEXT;
    DECLARE lpd TEXT;
    DECLARE pid INT;
    DECLARE iurl TEXT;

    DECLARE last_id INT UNSIGNED;
    DECLARE done INT DEFAULT FALSE;

    DECLARE raw CURSOR FOR select t.shortProductDescription, t.longProductDescription, t.productID, t.productImageURL 
                           from frugg.temp_input t;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    OPEN raw;

    read_loop: LOOP
        FETCH raw INTO spd, lpd, pid, iurl;

        IF done THEN
            LEAVE read_loop;
        END IF;

        INSERT INTO item (short_description, long_description) VALUES (spd, lpd);
        SET last_id = LAST_INSERT_ID();
        INSERT INTO item_catalog_map (catalog_id, catalog_unique_item_id, item_id) VALUES (1, CAST(pid AS CHAR), last_id);
        INSERT INTO item_images (item_id, original_url) VALUES (last_id, iurl);
    END LOOP;

    CLOSE raw;
END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:23:56.463

与在存储过程中循环相比，MySQL 几乎总是能更好地执行直接 SQL 语句。

也就是说，如果您使用 InnoDB 表，您的过程将在`START TRANSACTION`/`COMMIT`块内运行得更快。

更好的做法是在`AUTO_INCREMENT`中的记录中添加一个`frugg.temp_input`，并针对该表进行查询：

```
DROP TABLE IF EXISTS temp_input2;

CREATE TABLE temp_input2 (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    shortProductDescription TEXT, 
    longProductDescription TEXT,
    productID INT,
    productImageURL TEXT,
    PRIMARY KEY (id)
);

START TRANSACTION;

INSERT INTO 
    temp_input2
SELECT
    NULL AS id,
    shortProductDescription, 
    longProductDescription,
    productID,
    productImageURL
FROM
    frugg.temp_input;

INSERT 
    INTO item 
(
    id, 
    short_description, 
    long_description
) 
SELECT 
    id,
    shortProductDescription AS short_description, 
    longProductDescription AS long_description
FROM
    temp_input2
ORDER BY
    id;

INSERT INTO 
    item_catalog_map
(
    catalog_id, 
    catalog_unique_item_id, 
    item_id
)
SELECT 
    1 AS catalog_id,
    CAST(productID AS CHAR) AS catalog_unique_item_id,
    id AS item_id
FROM
    temp_input2
ORDER BY
    id;

INSERT INTO 
    item_images 
(
    item_id, 
    original_url
) 
SELECT 
    id AS item_id,
    productImageURL AS original_url
FROM
    temp_input2
ORDER BY
    id;

COMMIT; 
```

比上面更好的是，在将 .CSV 文件加载到 .CSV 文件之前`frugg.temp_input`，向其中添加一个`AUTO_INCREMENT`字段，从而节省了上面显示的创建/加载的额外步骤`temp_input2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:07:29.447

我的想法与罗斯提供的类似，但在不了解您的表、索引、“自动增量”列名是什么的情况下，我只会直接插入...但是，如果您遇到任何我没有看到任何检查的重复项。我将插入如下内容并具有适当的索引来帮助重新加入（基于简短和长的产品描述）。

我只是尝试从选择中插入和插入，然后从该选择中插入......例如......

```
INSERT INTO item 
      ( short_description, 
        long_description ) 
   SELECT
        t.ShortProductDescription,
        t.LongProductDescription
     from
        frugg.temp_input t;

done, 15 million inserted... into items table... Now, add to the catalog map table...

INSERT INTO item_catalog_map
      ( catalog_id,
        catalog_unique_item_id,
        item_id )
   SELECT
         1 as Catalog_id,
         CAST( t.productID as CHAR) as catalog_unique_item_id,
         item.AutoIncrementIDColumn as item_id
      from
         frugg.temp_input t
            JOIN item on t.ShortProductDescription = item.short_desciption
                     AND t.LongProductDescription = item.long_description

done, all catalog map entries with corresponding "Item ID" inserted...

INSERT INTO item_images
      ( item_id,
        original_url )
   SELECT
         item.AutoIncrementIDColumn as item_id,
         t.productImageURL as original_url
      from
         frugg.temp_input t
            JOIN item on t.ShortProductDescription = item.short_desciption
                     AND t.LongProductDescription = item.long_description 
```

完成图片网址。

# c# - 如何在 C# 中更改 default([CustomStruct]) 的值？

> ID：12633757
> 
> 赞同：1
> 
> 时间：2012-09-28T04:51:33.313
> 
> 标签：c#

如果我测试以下代码：

```
struct MyStruct
{
    int number;
}

Console.WriteLine("{0}", default(MyStruct)) 
```

控制台中的结果将是`[some namespace].MyStruct`

问题是我怎样才能改变`default(MyStruct)`其他东西的回报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:55:45.657

您无法更改`default`关键字的行为。它具有值、引用和结构类型的预定义行为。

> 对于结构，它将返回结构的每个成员，根据它们是值类型还是引用类型，初始化为零或空。

[来源](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:09:16.917

经过进一步研究，看起来我可以重写 ToString 方法来更改打印结果。值类型的默认 ToString 实现如下：

```
public override string ToString()
{
    return this.GetType().ToString();
} 
```

我可以覆盖它来打印其他东西。

# windows-8 - 在 Windows 8 C# App 中导航返回时再次调用页面构造函数

> ID：12633758
> 
> 赞同：6
> 
> 时间：2012-09-28T04:51:41.560
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winrt-xaml, windows-store

我发现在 Windows 8 应用程序中，页面的构造函数总是在导航回此页面时再次被调用，但在 Windows Phone 7 应用程序中并非如此。

由于这种行为，该页面的所有属性都会丢失，您需要以某种方式存储它们并在页面重新激活后重新分配它们。目前我正在使用该`SaveState`方法保存数据并在`LoadState`方法中重新分配数据。这两种方法都内置在示例 Grid/Split App 中。

我想知道为什么它是这样设计的，是否有更好的方法来维护页面的实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T06:15:35.433

您可以为要保留在内存中的每个页面设置 Page.NavigationCacheMode = NavigationCacheMode.Required，但请注意，您必须确保用户不能无休止地浏览这些页面，因为这会泄漏内存。

# wpf - 使用 Telerik radtreeview 按需加载

> ID：12633760
> 
> 赞同：6
> 
> 时间：2012-09-28T04:51:53.977
> 
> 标签：wpf, mvvm, radtreeview

我使用子项构建 Radtreeview，使用按需加载事件来加载子项，它可以正常工作。

这里的问题是每个子项都有展开符号，但有一点是父项没有子项，在这种情况下，对于子项我不想显示展开符号。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T07:40:34.467

我找到了答案，有一个名为 IsLoadOnDemandEnabled 的属性，并在 ItemPrepared 事件上将此属性设置为 false。

```
 <telerik:RadTreeView  x:Name="radTreeView" 
                             IsExpandOnSingleClickEnabled="True"
                             IsLoadOnDemandEnabled="true" 
                             LoadOnDemand="RadTreeView_LoadOnDemand"
                            ItemPrepared="radTreeView_ItemPrepared"
                            ItemsSource="{Binding TreeViewSource,Mode=OneWay}" 
                         ItemTemplate="{StaticResource ParentTemplate}"
                         /> 
```

并在 xaml.cs

```
 private void radTreeView_ItemPrepared(object sender, RadTreeViewItemPreparedEventArgs e)
    {
        // get a reference to the item that has been selected
        RadTreeViewItem preparedItem = e.PreparedItem as RadTreeViewItem;
            preparedItem.IsLoadOnDemandEnabled = false;
    } 
```

供参考 [http://www.telerik.com/help/wpf/radtreeview-features-load-on-demand.html](http://www.telerik.com/help/wpf/radtreeview-features-load-on-demand.html)

# php - 正则表达式，如何将内容文本放入数组？

> ID：12633766
> 
> 赞同：2
> 
> 时间：2012-09-28T04:52:36.607
> 
> 标签：php, arrays, preg-match-all

```
[code]
 [1] text 1
 [2] text 2
 [3] text 3
[/code] 
```

所以我需要这些值`text 1, text 2, text 3`是数组。

我在这方面的烦恼：

```
$matches = preg_match_all( "/^\[\d{1,3}\](.*)/", $content, $tags ); 
```

它返回给我一个空值的数组：

```
Array
(
    [0] => Array
        (
        )

    [1] => Array
        (
        )

)
1 
```

如何修复它或使它变好？

```
[code]
 [1] text 1
 Different content here
 [2] text 2 Another dif..
 [3] Also something either
  to be continues!
[/code] 
```

使用多行，它将仅返回 a`text 1`而不是数组第一个元素中的所有代码

```
Array
(
    [0] => Array
        (
            [0] => [1] text 1

            [1] => [2] text 2 Another dif..

            [2] => [3] Also something either

        )

    [1] => Array
        (
            [0] =>  text 1

            [1] =>  text 2 Another dif..

            [2] =>  Also something either

        )

)
1 
```

其他元素也将仅由第一个字符串结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T04:54:27.090

您应该放下锚`^`并改为`(.*)`使用前瞻集`([^[]*)`。

```
$s =<<<EOM
[code]
 [1] text 1
 Another line
 [2] text 2
 And another line too
 [3] text 3
[/code]
EOM;

preg_match_all("/\[\d{1,3}\]([^[]*)/", $s, $tags);

print_r($tags); 
```

# r - 如何将图像叠加到 ggplot 上？

> ID：12633767
> 
> 赞同：16
> 
> 时间：2012-09-28T04:52:45.217
> 
> 标签：r, png, ggplot2

我想从网上阅读一张图片。例如

`http://api.altmetric.com/donut/502878_64x64.png`

并将其插入 a 的右上角`ggplot`

```
df <- data.frame(x=1:10, y=sample(1:100,10))
# a fake plot to try it on.
ggplot(df, aes(x,y)) + geom_point(size = 2) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-28T05:05:46.183

您正在寻找`annotation_raster`和`readPNG`

```
mypngfile <- download.file('http://api.altmetric.com/donut/502878_64x64.png', destfile = 'mypng.png', mode = 'wb')
library(png)
mypng <- readPNG('mypng.png')

p <- qplot(mpg, wt, data = mtcars) + theme_bw()
p + annotation_raster(mypng, ymin = 4.5,ymax= 5,xmin = 30,xmax = 35) + 
    geom_point() 
```

![在此处输入图像描述](../Images/77ebe9eb5beec9bf7c6cd1073db19322.png)

这些新功能（以及更多示例）在[此处进行了描述](http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T05:09:24.153

正确的解决方案是：

```
# This was one of my issues, reading a png from the web
my_image <-  readPNG(getURLContent('http://path.to/image.png'))
p1 + annotation_raster(my_image, ymin = 4,ymax= 5,xmin = 30,xmax = 40) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-11T23:15:20.277

只需从很棒的包 Magick 添加更新，它甚至可以让 GIF 覆盖在 ggplot 图像上：

```
library(ggplot2)
library(magick)
library(here) # For making the script run without a wd
library(magrittr) # For piping the logo

# Make a simple plot and save it
ggplot(mpg, aes(displ, hwy, colour = class)) + 
  geom_point() + 
  ggtitle("Cars") +
  ggsave(filename = paste0(here("/"), last_plot()$labels$title, ".png"),
         width = 5, height = 4, dpi = 300)

# Call back the plot
# Now call back the plot
background <- image_read(paste0(here("/"), "Cars.png"))
# And bring in a logo
logo_raw <- image_read("https://i.imgur.com/e1IneGq.jpg") 

frames <- lapply(logo_raw, function(frame) {
  image_composite(background, frame, offset = "+70+800")
})

animation <- image_animate(image_join(frames))

image_write(animation, "~/Cars_Travolta.gif") 
```

# c - qsort在c中动态创建数组

> ID：12633768
> 
> 赞同：2
> 
> 时间：2012-09-28T04:52:46.053
> 
> 标签：c, struct, qsort

嘿伙计们（请注意，这个问题让我感觉很糟糕，所以我可能是），

我能够动态创建一个数组，并且能够有效地将 qsort 用于静态创建的数组，但是在动态创建的数组上使用 qsort 时遇到问题。我想我在使用指针时遇到了麻烦。

```
struct my_struct {
    FILE *fp;
    int i;
}; 
```

所以数组包含上述结构，我想按 int 值对其进行排序。

静态地，我可以做这样的事情：

```
struct my_struct array[4]; 
```

并排序：

```
qsort((void *) &array, sizeof(array) / sizeof(struct my_struct), sizeof(struct my_struct), *compare); 
```

--

如果我这样创建数组：

```
struct my_struct* = malloc(sizeof(struct process) * 4); 
```

一切都编译并运行，但是执行永远不会进入比较函数。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:56:14.803

sizeof(array) 是 (sizeof(struct my_struct) * array_size) 用于常量数组，但它只是动态数组的指针大小。您必须自己计算实际大小（传递给 malloc 的大小）并将其放入 qsort 调用中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T05:04:40.300

您调用`qsort`only 是偶然的：

```
qsort((void *) &array, sizeof(array) / sizeof(struct my_struct), sizeof(struct my_struct), *compare); 
```

数组的地址与数组的第零个元素的地址具有相同的值但类型不同。演员表`void *`也是多余的；并且比较器函数的解引用也是一种惯例。通常会这样写：

```
qsort(array, sizeof(array) / sizeof(array[0]), sizeof(struct my_struct), compare); 
```

或者：

```
qsort(array, sizeof(array) / sizeof(array[0]), sizeof(array[0]), compare); 
```

如果你有一个动态分配的结构：

```
size_t num_items = 4;
struct my_struct *dynarr = malloc(sizeof(struct my_struct) * num_items); 
```

或者：

```
struct my_struct *dynarr = malloc(sizeof(*dynarr) * num_items); 
```

那么您将在对 的调用中以不同的方式指定元素的数量`qsort`，但其余部分基本不变：

```
qsort(dynarr, num_items, sizeof(*dynarr), compare); 
```

特别注意`&`前面没有`dynarr`，它是一个简单的指针变量，因为它的名称可能具有误导性。

* * *

### 为什么你的代码出错了

*一个猜测，但一个合理的猜测。* 如果你写：

 ~~~~```
qsort(&dynarr, sizeof(dynarr) / sizeof(dynarr[0]), sizeof(dynarr[0]), compare); 
```~~  ~~then`sizeof(dynarr)`是指针的大小（例如 64 位程序中的 8 个字节），并且`sizeof(dynarr[0])`是 16 个字节，因此您告诉`qsort()`排序的大小（元素数）为 0（因为`8 / 16 == 0`），因此永远不会调用比较器. 如果您的程序编译为 32 位程序，则指针大小为 4 字节，结构大小为 8，因此结果仍然为 0。

请注意，如果您改为传递`4`或`num_items`作为数组的大小，那么您会崩溃。的地址`dynarr`是传递给函数的错误地址；您想传递保存在 中的地址值，而不是存储自身`dynarr`的地址。`dynarr`

注意：你应该证明`qsort()`那行不通，这样我们就不必猜测你写了什么。~~~~

# powerbuilder - Powerbuilder Datawindow 交叉表显示

> ID：12633769
> 
> 赞同：2
> 
> 时间：2012-09-28T04:52:46.440
> 
> 标签：powerbuilder, datawindow

我的交叉表中有 20 列和 1 行，其中以纵向 8" x 13" 显示，现在当我打印出前 14 列时显示在第 1 页的第一行，那么接下来的第 14 列显示在第一行的下一页。
任何想法如何显示超出的第 14 列在交叉表的前 14 列下方的下一行继续。

任何想法都非常感谢。

这是我的数据窗口交叉表源代码：

```
release 10.5;
datawindow(units=0 timer_interval=0 color=1073741824 processing=4 HTMLDW=no  
print.printername="" print.documentname="" print.orientation = 0 print.margin.left 
= 110  print.margin.right = 110 print.margin.top = 96 print.margin.bottom = 96  
print.paper.source = 0 print.paper.size = 0 print.canusedefaultprinter=yes  
print.prompt=no print.buttons=no print.preview.buttons=no print.cliptext=no 
print.overrideprintjob=no print.collate=yes print.preview.outline=yes hidegrayline=no  
crosstab.dynamic = yes grid.lines=1 grid.columnmove=no selected.mouse=no )
header[1](height=0 color="536870912" )
header[2](height=132 color="536870912" )
summary(height=0 color="536870912" )
footer(height=0 color="536870912" )
detail(height=60 color="536870912" )
table(column=(type=char(20) updatewhereclause=yes name=substr dbname="substr" )
column=(type=char(20) updatewhereclause=yes name=val dbname="val" )
retrieve="PBSELECT( VERSION(400) TABLE(NAME=~"public.product~" )        
TABLE(NAME=~"public.product_parts~" ) COLUMN(NAME=~"public.product_parts.part_name~")  
COLUMN(NAME=~"public.product_parts.part_no~")            COMPUTE(NAME=~"SUBSTR(public.product.codeno,LENGTH(public.product.codeno),LENGTH(public.pro    duct.codeno))~") COMPUTE(NAME=~"'' as itemhead~") COMPUTE(NAME=~"'' as imagepath~")    
JOIN (LEFT=~"public.product.codeno~"    OP =~"=~"RIGHT=~"public.product_parts.codeno~" 
)WHERE(    EXP1 =~"public.product_parts.codeno~"   OP =~"like~"    EXP2 =~":codeno~" ) 
) ARG(NAME = ~"codeno~" TYPE = string) " arguments=(("codeno", string))  sort="substr  
A " )
text(band=header[2] alignment="0" text="@product_parts_part_no" border="0" color="0"   
x="146" y="68" height="52" width="137" html.valueishtml="0"  name=val_t visible="1"   
font.face="Tahoma" font.height="-8" font.weight="700"  font.family="2" font.pitch="2"  
font.charset="0" background.mode="1" background.color="536870912" )
column(band=detail id=1 alignment="0" tabsequence=32766 border="0" color="33554432"  
x="9" y="4" height="76" width="128" format="[general]" html.valueishtml="0"  
name=substr visible="1" edit.limit=0 edit.case=any edit.focusrectangle=no 
edit.autoselect=no edit.autohscroll=yes  font.face="Tahoma" font.height="-9"  
font.weight="700"  font.family="2" font.pitch="2" font.charset="0" background.mode="1" 
background.color="536870912" )
column(band=detail id=2 alignment="0" tabsequence=32766 border="0" color="33554432"  
x="146" y="0" height="76" width="137" format="[general]" html.valueishtml="0"   
name=val visible="1" edit.limit=0 edit.case=any edit.focusrectangle=no  
edit.autoselect=no edit.autohscroll=yes crosstab.repeat=yes  font.face="Courier New" 
font.height="-10" font.weight="400"  font.family="1" font.pitch="1" font.charset="0" 
background.mode="1" background.color="536870912" )
crosstab(band = foreground  crosstabonly = yes 
columns = "product_parts_part_no" rows = "substr" values = "case ( 
product_parts_part_no  when  product_parts_part_no  then  product_parts_part_name  )" 
sourcenames = "product_parts_part_name, product_parts_part_no, substr, itemhead, 
imagepath")htmltable(border="0" cellpadding="1" cellspacing="1" )
htmlgen(clientevents="1" clientvalidation="1" clientcomputedfields="1" 
clientformatting="0" clientscriptable="0" generatejavascript="1" 
encodeselflinkargs="1" netscapelayers="0" pagingmethod=0 generatedddwframes="1" )
xhtmlgen() cssgen(sessionspecific="0" )
xmlgen(inline="0" )
xsltgen()
jsgen()
export.xml(headgroups="1" includewhitespace="0" metadatatype=0 savemetadata=0 )
import.xml()
export.pdf(method=0 distill.custompostscript="0" xslfop.print="0" )
export.xhtml() 
```

**我的数据窗口交叉表中的所需输出：**

```
 1    2     3     4      5     6      7   8    9    10    11   12     13    14
A MGY  RBLS WISHI. MILES  AND  MILES   CX  FF  RVS   PCS   ADM  DROP   NOT   CS
  15   16    17    18     19    20
  PHIL AUS  GER    FRA    BULL 1.5oX 
```

谢谢，乔恩戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:07:36.620

我将创建一个表格数据窗口，其中的列按您想要的方式排列，并将数据从交叉表复制到其中。

# python - 将字典值的位置解析为列表

> ID：12633774
> 
> 赞同：0
> 
> 时间：2012-09-28T04:53:10.237
> 
> 标签：python, list, dictionary

假设您有一个包含以下数据类型的字典：

```
{'abc':'AGCTAC', 'def': 'AGGTAC', 'ghi':'AGGTAG'} 
```

我希望能够运行一个显示每个位置的值的函数，例如

```
(('A','A','A'),('G','G','G'),('C','G','G')) 
```

然后可以运行一个计数器，例如人们建议的带有收藏柜的计数器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:56:04.573

```
>>> d = {'abc':'AGCTAC', 'def': 'AGGTAC', 'ghi':'AGGTAG'}
>>> zip(*d.values())
[('A', 'A', 'A'), ('G', 'G', 'G'), ('C', 'G', 'G'), ('T', 'T', 'T'), ('A', 'A', 'A'), ('C', 'G', 'C')] 
```

请记住，dicts 是无序的，因此元组中的元素可能以不同的顺序出现。但是，所有元组的顺序都是相同的

在 Python3 中， zip 返回一个“zip 对象”，因此您需要将其包裹`tuple()`起来

```
>>> tuple(zip(*d.values()))
(('A', 'A', 'A'), ('G', 'G', 'G'), ('C', 'G', 'G'), ('T', 'T', 'T'), ('A', 'A', 'A'), ('C', 'G', 'C')) 
```

如果您不需要中间元组，只需传递给`Counter`

```
>>> from collections import Counter
>>> Counter(zip(*d.values()))
Counter({('A', 'A', 'A'): 2, ('C', 'G', 'G'): 1, ('G', 'G', 'G'): 1, ('T', 'T', 'T'): 1, ('C', 'G', 'C'): 1}) 
```

# c# - 单击按钮后在文本字段中显示输出

> ID：12633777
> 
> 赞同：2
> 
> 时间：2012-09-28T04:53:27.723
> 
> 标签：c#, asp.net, textbox

我正在使用一个按钮来获取 IP 地址。我想在文本字段中显示该 IP 地址。这是我的前端代码：

```
<asp:TextBox ID="txtMachIP" runat="server" CssClass="Textbox1"></asp:TextBox>
 <asp:Button ID="BtnGetIP" runat="server" CssClass="btn1" 
                    onclick="BtnGetIP_Click" Text="Get My IP" /> 
```

这是我获取 ip 的后端代码：

```
 protected void BtnGetIP_Click(object sender, EventArgs e)
{
    string myHost = System.Net.Dns.GetHostName();
    System.Net.IPHostEntry myIPs = System.Net.Dns.GetHostEntry(myHost);
    foreach (System.Net.IPAddress myIP in myIPs.AddressList)
    {
        MessageBox.Show(myIP.ToString());

    }
} 
```

我希望我的 IP 显示在文本区域中，而不是消息框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:01:04.647

请给你的文本框起一个名字，比如

```
<asp:TextBox ID="txtMachIP" NAME = "txtMachIPNAME" runat="server" CssClass="Textbox1"></asp:TextBox> 
```

在后端代码中

```
txtMachIPNAME.Text = myIP.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:04:17.780

一种方法是将值存储在临时字符串中，然后将最终的值列表输出到文本框。

```
protected void BtnGetIP_Click(object sender, EventArgs e) 
{ 
    string myHost = System.Net.Dns.GetHostName(); 
    System.Net.IPHostEntry myIPs = System.Net.Dns.GetHostEntry(myHost); 
    // Create a temporary string to store the items retrieved in the loop
string tempIPs = string.Empty;
    foreach (System.Net.IPAddress myIP in myIPs.AddressList) 
    { 
        tempIPs += myIP.ToString() + ", ";
    } 
    // Removes the redundant space and comma
    tempIPs = tempIPs.TrimEnd(' ', ',');
    // Print the values to the textbox
    txtMachIP.Text = tempIPs;
} 
```

# vb.net - 获取一个文本框以仅接受 vb.net 中的字符

> ID：12633780
> 
> 赞同：2
> 
> 时间：2012-09-28T04:53:36.247
> 
> 标签：vb.net, ascii, keypress

我正在 Vb.net 中创建一个简单的应用程序，我需要在其中执行某些验证。因此，我希望名称文本框仅接受来自 az 和 AZ 的字符。

为此，我编写了以下代码：

```
 Private Sub txtname_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox5.KeyPress
    If Asc(e.KeyChar) <> 8 Then
        If Asc(e.KeyChar) > 65 Or Asc(e.KeyChar) < 90 Or Asc(e.KeyChar) > 96 Or Asc(e.KeyChar) < 122 Then
            e.Handled = True
        End If
    End If
End Sub 
```

但不知何故，它不允许我输入字符。当我尝试输入任何字符时，它什么也不做。

是什么导致了这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T04:55:26.920

或者，你可以做这样的事情，

```
Private Sub TextBox1_KeyPress(sender As Object, e As KeyPressEventArgs) _
                              Handles txtName.KeyPress

    If Not (Asc(e.KeyChar) = 8) Then
        Dim allowedChars As String = "abcdefghijklmnopqrstuvwxyz"
        If Not allowedChars.Contains(e.KeyChar.ToString.ToLower) Then
            e.KeyChar = ChrW(0)
            e.Handled = True
        End If
    End If

End Sub 
```

或者如果你仍然想要这`ASCII`条路，试试这个，

```
Private Sub TextBox1_KeyPress(sender As Object, e As KeyPressEventArgs) Handles txtName.KeyPress

    If Not (Asc(e.KeyChar) = 8) Then
        If Not ((Asc(e.KeyChar) >= 97 And Asc(e.KeyChar) <= 122) Or (Asc(e.KeyChar) >= 65 And Asc(e.KeyChar) <= 90)) Then
            e.KeyChar = ChrW(0)
            e.Handled = True
        End If
    End If

End Sub 
```

两者的行为相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T15:27:30.303

```
Private Sub txtname_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox5.KeyPress

    If AscW(e.KeyChar) > 64 And AscW(e.KeyChar) < 91 Or AscW(e.KeyChar) > 96 And AscW(e.KeyChar) < 123 Or AscW(e.KeyChar) = 8 Then 
    Else
        e.KeyChar = Nothing
    End If

End Sub 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T04:14:01.593

这是一种更抽象的方法，但仍然有效。它很简单，可以添加到`TextChanged`事件中。您可以通过将它们的句柄添加到 sub 并使用`DirectCast()`.

```
Dim allowed As String = ("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")
        For Each c As Char In TextBox.Text
            If allowed.Contains(c) = False Then
                TextBox.Text = TextBox.Text.Remove(TextBox.SelectionStart - 1, 1)
                TextBox.Select(TextBox.Text.Count, 0)
            End If
        Next 
```

**摘要：**如果输入了无效字符，它将立即被删除（大多数情况下，该字符的可见时间不足以让用户注意到）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-27T04:54:59.233

```
Private Sub txtStudentName_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles txtStudentName.KeyPress

  If Not Char.IsLetter(e.KeyChar) And Not e.KeyChar = Chr(Keys.Delete) And Not e.KeyChar = Chr(Keys.Back) And Not e.KeyChar = Chr(Keys.Space) Then

      e.Handled = True

  End If

End Sub 
```

# java - 空抽象类有什么用？

> ID：12633782
> 
> 赞同：6
> 
> 时间：2012-09-28T04:53:59.807
> 
> 标签：java, oop

我想知道Java中有没有使用空抽象类？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T04:59:36.527

除了可以扩展 a 之外，empty`abstract class`与 an 非常等价`interface``class`

```
abstract class myAbstractClass // extends anotherClass implements anInterface
{

}

interface myInterface // extends anotherInterface
{

} 
```

这种模式被称为**标记接口**，SO 已经有很多关于它的好数据：[标记接口的目的是什么？](https://stackoverflow.com/questions/1023068/what-is-the-purpose-of-a-marker-interface)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:00:39.827

您只能从一个抽象类继承。那么这对于避免继承很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:01:22.250

是的，有时您需要一个基类来实现多态性。

# shell - 从 shell 获取程序的运行时

> ID：12633788
> 
> 赞同：0
> 
> 时间：2012-09-28T04:54:40.027
> 
> 标签：shell, runtime

我有以下名为 timed 的脚本，我从[这里](http://klassenresearch.orbs.com/Timing+a+program+from+the+shell)得到。

```
 #!/bin/sh
    START=$(date +%s)
    STARTnano=$(date +%N)

    $@  # Command-line arguments, i.e. the program you wish to time

    END=$(date +%s)
    ENDnano=$(date +%N)

    DIFF=$(( (10#$END - 10#$START) * 1000000000 ))
    DIFFnano=$(( (10#$ENDnano - 10#$STARTnano)  ))

    DIFF=$(( 10#$DIFF + 10#$DIFFnano ))

    DIFFu=$(( 10#$DIFF / 1000000000 )) # Get correct units
    DIFFd=$(( 10#$DIFF - 10#$DIFFu ))  # Get figures after decimal place

    echo "'$@' took ${DIFFu}.${DIFFd} seconds to finish." 
```

我正在尝试使用它来测量程序的运行时间。

它不起作用。我不断收到一个错误，它缺少')'。有人可以指出出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:00:16.350

要获取脚本的执行时间，使用 time 命令将是精确的。

例如

```
$time ls

**output of ls**

real    0m0.008s
user    0m0.000s
sys     0m0.008s 
```

real、user 和 sys 的含义是有意义的。使用“人工时间”获取更多信息。您可以用任何命令（或脚本）替换 ls

# regex - RegexOne 示例 5（图像文件名正则表达式）

> ID：12633794
> 
> 赞同：0
> 
> 时间：2012-09-28T04:55:55.510
> 
> 标签：regex

我是否在这里以正确的方式使用正则表达式来过滤掉图像文件名和文件类型？

```
^(\w)+\.(jpg|png|gif)$ 
```

练习的链接在这里： [http](http://regexone.com/example/4) ://regexone.com/example/4 ？

练习是从文件列表中捕获名称和扩展名：

```
task           text                  capture
skip text      .bash_profile        
skip text      workspace.doc        
capture text   img0912.jpg          img0912, jpg    
capture text   updated_img0912.png  updated_img0912, png    
skip text      documentation.html       
capture text   favicon.gif          favicon, gif    
skip text      img0912.jpg.tmp      
skip text      access.lock 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:28:56.193

你只有一个错误：

您仅使用 . 捕获文件名的最后一个字符`(\w)+`。这称为“[重复捕获组](http://www.regular-expressions.info/captureall.html)”，这不是您想要的。将量词放在组内以捕获完整名称。

```
 (\w+) 
```

一些笔记

1.  不一定需要起始锚“^”，这取决于您要查找的内容。对于那个例子，它没有任何区别。

2.  `\w`适用于您的示例，但不会捕获所有有效文件名，因为它仅包含字母、数字和下划线。

# java - EditText 不随内容增长

> ID：12633795
> 
> 赞同：0
> 
> 时间：2012-09-28T04:56:01.263
> 
> 标签：java, android

`EditText`我在 Android中遇到了问题。因为它仅用于调试目的，`EditText`添加的布局的可见性在开始时就消失了。

所以我从一个接收信息`ServiceCall`并找到一些可能的错误，我在这个字符串中显示我作为响应得到的字符串。

我尝试了多种解决方案，没有任何效果。

```
<RelativeLayout
        android:id="@+id/RelativeLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/chbDebug"
        android:baselineAligned="false"
        android:orientation="vertical"
        android:padding="2dp" 
        android:visibility="gone" >

        <someOtherCrazyShitsAndStuff />         

        <EditText
            android:id="@+id/tbDebug"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="someOtherCrazyShitsAndStuff"
            android:inputType="textMultiLine" />
    </RelativeLayout> 
```

所以我发现设置了最小/最大行数，`android:lines/maxLines`但什么也没发生。还尝试在填充文本后强制它通过一些代码行增加Linecount，但结果只是内容被删除。

还有一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:19:34.537

试着把你`edittext`的`scrollview`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:14:50.733

我也有同样的问题一次尝试这个..

替换这个

```
android:layout_width="fill_parent" 
```

有了这个

```
android:layout_width="wrap_content" 
```

肯定会工作

# c# - asp.net mvc - 将
转换为 c#

> ID：12633810
> 
> 赞同：0
> 
> 时间：2012-09-28T04:57:22.860
> 
> 标签：c#, asp.net-mvc-2, itext, editor, telerik-mvc

我的应用程序是 ASP.NET MVC2 C#，我正在使用 Telerik MVC Editor 和 itextsharp 生成 PDF 文件。我的挑战是`<br />`在 PDF 中显示，而不是在新段落中显示。

在编辑器中，我有：

```
.Encode(false) 
```

在我使用的控制器中：

```
er.Comments = HttpUtility.HtmlDecode(recommendation.Comments); 
```

到目前为止一切正常。

为了制作我的 PDF，我正在使用：

```
BPR = HttpUtility.HtmlEncode(this.Recommendations.**Comments**)
List<IElement> htmlarraylist = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(new StringReader(BPR ), null); 
```

评论在数据库中存储为：

```
First Paragraph <br /> Second paragraph 
```

但是，当我调试程序时，BPR 会转换为：

```
First Paragraph &lt;br /&gt; Second paragraph 
```

有没有办法转换`&lt;br /&gt;`回`<br/>`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:25:05.800

问题出在这一行：

```
BPR = HttpUtility.HtmlEncode(this.Recommendations.Comments) 
```

由于我从数据库中获取值，因此一些数据已经被编码。

# drools - Drools Guvnor 和 Oracle 集成

> ID：12633812
> 
> 赞同：1
> 
> 时间：2012-09-28T04:57:57.547
> 
> 标签：drools, drools-guvnor

我想将 Oracle db 配置为 Drools Guvnor。

请让我知道如何做到这一点。任何链接也将有所帮助。

感谢期待 Bala Krishna.N

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:47:37.053

如果您还没有弄清楚，只需选择*Administration -> Repository Configuration*然后输入您的连接详细信息。将为您生成一个配置文件。有关详细信息，请参阅 [Drools Guvnor 手册](http://docs.jboss.org/drools/release/5.4.0.Final/drools-guvnor-docs/html/chap-database_configuration.html)。

# iphone - 修改UITabBar中单个标签的高度

> ID：12633814
> 
> 赞同：1
> 
> 时间：2012-09-28T04:58:11.547
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar

有没有办法让我可以增加单个选项卡（UITabbarItem）的高度，保持 UITabBar 中的其余选项卡具有相同的高度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T05:09:31.440

我只是猜测您正在尝试拥有一个 instagram（以前的 instagram）或类似界面的界面，其中一个 tabBarItems 比其他的要大得多。

你有两个选择。

1.  创建一个 customTabBar ，其中一个项目要大得多。（**我不会推荐这个**）

2.  只需保持现有的 tabBarItems 不变。没有必要定制一个。您只需创建`UIButton`具有所需高度和形状的 a 并将其添加到您的 tabBarItem 顶部。

然后我们的工作归结为创建 UITabBarController 的子类并在 UITabBar 顶部添加自定义 UIButton。

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0.0, 0.0, buttonImage.size.width, buttonImage.size.height);
[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
[button setBackgroundImage:highlightImage forState:UIControlStateHighlighted];

CGFloat heightDifference = buttonImage.size.height - self.tabBar.frame.size.height;
if (heightDifference < 0)
    button.center = self.tabBar.center;
else
{
    CGPoint center = self.tabBar.center;
    center.y = center.y - heightDifference/2.0;
    button.center = center;
}

[self.view addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:07:33.970

根据我的经验，您必须扩展 UITabBar 类，并且在初始化 UITabBarItems 时，相应地设置它们的高度。此外，为您的 UITabBar 创建一个背景图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T06:20:27.327

您可以使用 customTabBar，在这里您可以获取它的示例，它的好类，您可以根据您的大小设置 tabBar 项目。

[关联](https://github.com/rumex/RXCustomTabBar)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T21:38:54.223

在 Swift 2.0 中，您可以拥有一个 UITabBarController 的子类并使用以下代码添加 UIButton：

```
let button: UIButton = UIButton(type: UIButtonType.Custom)
button.backgroundColor = UIColor.clearColor()
let buttonImage: UIImage = UIImage(named: "logo")!
let buttonImageHighlighted: UIImage = UIImage(named: "logoHighlighted")!
button.frame = CGRectMake(0.0, 0.0, buttonImage.size.width, buttonImage.size.height);
button.setBackgroundImage(buttonImage, forState: UIControlState.Normal)
button.setBackgroundImage(buttonImageHighlighted, forState: UIControlState.Highlighted)

let heightDifference:CGFloat = buttonImage.size.height - self.tabBar.frame.size.height;
if (heightDifference < 0) {
    button.center = self.tabBar.center;
} else {
    var center: CGPoint = self.tabBar.center;
    center.y = center.y - heightDifference/2.0;
    button.center = center;
}

self.view.addSubview(button) 
```

# string - StreamReader 的行到字符串数组

> ID：12633815
> 
> 赞同：4
> 
> 时间：2012-09-28T04:58:19.060
> 
> 标签：string, c#-4.0, streamreader

我想`string[]`分配一个`StreamReader`. 像：

```
try{
    StreamReader sr = new StreamReader("a.txt");
    do{
        str[i] = sr.ReadLine();
        i++;
    }while(i < 78);
}
catch (Exception ex){
    MessageBox.Show(ex.ToString());
} 
```

我可以做到但不能使用字符串[]。我想做这个：

```
MessageBox.Show(str[4]); 
```

如果您需要更多信息，请随时询问，我会更新。提前致谢...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T05:03:23.010

如果你真的想要一个字符串数组，我会稍微不同地处理这个。假设您不知道文件中有多少行（我忽略了 78 行的硬编码值），您无法预先创建`string[]`正确大小的 a。

相反，您可以从一组字符串开始：

```
var list = new List<string>(); 
```

将循环更改为：

```
using (var sr = new StreamReader("a.txt"))
{
    string line;
    while ((line = sr.ReadLine()) != null)
    {
        list.Add(line);
    }
} 
```

然后从您的列表中请求一个字符串数组：

```
string[] result = list.ToArray(); 
```

### 更新

受[Cuong's answer 的](https://stackoverflow.com/a/12634805/74757)启发，您绝对可以将其缩短。我在`File`课堂上忘记了这个宝石：

```
string[] result = File.ReadAllLines("a.txt"); 
```

`File.ReadAllLines`引擎盖下的内容实际上与我上面提供的代码相同，除了 Microsoft 使用 an而`ArrayList`不是 a `List<string>`，最后它们`string[]`通过`return (string[]) list.ToArray(typeof(string));`.

# iphone - 与每个细胞独特合作的一种观点

> ID：12633816
> 
> 赞同：0
> 
> 时间：2012-09-28T04:58:21.360
> 
> 标签：iphone, ios, xcode, uitableview, uiviewcontroller

我是 iOS 开发的新手，我正在开发一个使用大量**UITableViews**的应用程序。我很难弄清楚我将如何完成这个应用程序。

我将让用户能够将单元格添加到表格视图中，并且对于每个单元格，我需要一个 UIViewController（这个视图控制器对于每个单元格看起来都完全相同）来保存数据。

`So my question is how can i write the code to create a view that only cooperates with one cell, but has the same interface for all the other cells?`（我所说的视图是当用户向下钻取单元格时，它允许他们输入一些数据）。

每个“深入视图”都是相同的，但它们都必须与表格的单元格唯一地工作！我在这方面遇到了困难，任何帮助将不胜感激，如果有人知道我可以查看的教程，那就太好了！再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:13:52.067

一般来说，如果可能的话，你会有两个视图控制器，你的表视图控制器和你的细节视图控制器。你会经常听到这被描述为“主细节”（表视图控制器是“主”）。当有人从 tableview 中选择一个项目时，您的 table view 控制器将触发一个详细视图控制器，并将必要的信息传递给它。

如果视图的性质在结构上彼此不同，您只会考虑不同的详细视图控制器（您称之为“向下钻取视图”）。因此，对于每种“类型”的详细视图，您将拥有一个详细视图控制器，并且您只需将必要的信息传递给它以呈现适当的详细信息。您在问题中没有提供足够的细节来让我们确定一个细节视图控制器是否足够，您是否需要一些，或者您是否真的需要独特的细节视图控制器。

有关视图控制器的更多信息，我建议您阅读[ViewController 编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)，因为有关如何构建主从应用程序的更详细讨论可能超出了本论坛的范围。您可能还可以在 Google 上搜索“iOS 大师详细教程”并获得大量点击。

# drupal - 有没有办法将 php 文件设置为亚马逊 s3 上的索引文件？

> ID：12633822
> 
> 赞同：3
> 
> 时间：2012-09-28T04:59:00.170
> 
> 标签：drupal, amazon-s3, hosting, amazon

每次我尝试让我的亚马逊网站使用 .php 索引文件时，它都会告诉我它是无效的。S3 是否仅限于使用 index.html？有解决办法吗？

（目标：设置 S3 来托管社区网站，以降低托管成本并为我们的社区提供更好的备份服务）

社区网站正在运行 drupal。我想从当前主机传输所有文件并从亚马逊 S3 托管它们。如果你们中的任何人有一个很好的教程来说明如何做到这一点，我会亲吻地面！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T05:01:43.450

s3 不会运行 php 代码。如果您想在 S3 上托管您的网站，那么您基本上必须生成该网站的静态副本并将其上传到 S3。如果您想要一个动态站点，例如 drupal，那么您必须使用其他托管服务提供商，或者拥有自己的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T06:55:37.653

Amazon EC2 或 AWS Elastic Beanstalk 是运行完整网站的不错选择（假设您希望使用 AWS 平台）。

# php - PHP 将输入的文本字段值与我的首选关键字匹配

> ID：12633825
> 
> 赞同：0
> 
> 时间：2012-09-28T04:59:07.407
> 
> 标签：php, html

我想在我的网站上快速搜索。如果输入了一个值并与我的首选关键字匹配，它会将您重定向到该页面。

到目前为止，这是我得到的：

```
<form method="get" action="redirect.php" > 
<input id="search" name="search" type="text" value="Search Here" />
<input name="submit" type="submit" value="Go" />
</form>

<?php

 if(isset($_GET['submit']));

 $product1_keywords = array('animal feeds', 'weanrite', 'Wean Rite');
 // my preffered keywords

 $search = $_GET['search'];
 // caller of entered value on text field  ???

if ($search = $product1_keywords) {
// if value of text field is matched with my preferred keywords

    // Redirect page if match
header('Location: http://localhost/equalivet_2/#products/wean_rite.html');
}

else {

// Redirect page if not match
header('Location: http://localhost/equalivet_2/not_found.html');
}

    ?> 
```

请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:01:12.103

我认为你正在寻找的是`in_array`你会使用这样的：

```
<?php

if(isset($_GET['submit']));

$product1_keywords = array('animal feeds', 'weanrite', 'Wean Rite');
// my preferred keywords

$search = $_GET['search']; 
// caller of entered value on text field  ???

if(in_array($search , $product1_keywords)) {

  // if value of text field is matched with my preferred keywords

  // Redirect page if match
  header('Location: http://localhost/equalivet_2/#products/wean_rite.html');

} else {

  // Redirect page if not match
  header('Location: http://localhost/equalivet_2/not_found.html');

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:02:15.793

你可以使用 php 的 in_array 函数，看看这个链接 [http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:02:45.960

您将不得不使用`in_array()`函数来搜索提供的输入是否与您指定的关键字列表匹配。

[in_array — 检查一个值是否存在于数组中](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T05:02:48.937

您需要`in_array`检查搜索文本

```
<?php

 if(isset($_GET['submit']));

 $product1_keywords = array('animal feeds', 'weanrite', 'Wean Rite');
 // my preffered keywords

 $search = $_GET['search'];
 // caller of entered value on text field  ???

if(in_array($search , $product1_keywords)) {
// if value of text field is matched with my preferred keywords

    // Redirect page if match
header('Location: http://localhost/equalivet_2/#products/wean_rite.html');
}

else {

// Redirect page if not match
header('Location: http://localhost/equalivet_2/not_found.html');
}

    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T05:03:26.447

您在这一行有一个逻辑问题：

```
if ($search = $product1_keywords) { 
```

它应该`==`代替`=`; 但是，这并不能回答您的问题。

如果我理解正确，您只是想根据用户输入的关键字重定向用户。我建议更新您的*关键字*数组以包含您想要将用户重定向到多合一的关键字和 URL：

```
$product1_keywords = array(
    'animal feeds' => '/url1',
    'weanrite' => '/url2',
    'wean rite' => '/url3'
); 
```

然后，循环并检查输入的关键字（忽略任何大小写）：

```
$search = strtolower($_GET['search']);
foreach ($product1_keywords as $keyword => $url) {
    if ($search == $keyword) {
        // we found a keyword match!
        header($url);
        die();
    }
}
// if it makes it here, they didn't match a keyword
header('/not-found.html');
die(); 
```

如果所有关键字都指向同一个 URL，您可以将它们全部设置为`$product1_keywords`数组中的同一个 URL -*或者*- 您可以使用 PHP 的[`in_array()`](http://php.net/in_array)方法进行更快的查找：

```
$search = strtolower($_GET['search']);
$url = in_array($search, $product1_keywords) ? '/url-found' : '/not-found.html';
header($url);
die(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T05:20:20.990

您可以使用以下代码：

```
<?php
$test1 = "hi";
$test2 = array("hi","hello");

for($i = 0; $i<sizeof($test2);$i++)
{
similar_text($test1, $test2[$i], $percent); 
    if($percent==100)
        echo "Match found";
} 
```

?>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T05:16:12.997

谢谢大家。

如果您有多种产品，我会添加解决方案：

```
 <?php

 if(isset($_GET['submit']));

 $product1_keywords = array('feeds', 'weanrite', 'Wean Rite');

 $product2_keywords = array('gro rite', 'Gro Rite', 'grorite', 'growing feeds');

 $product3_keywords = array('rite start', 'Rite Start', 'starter feed');

 $search = $_GET['search']; 
  // caller of entered value on text field  ???

  if(in_array($search , $product1_keywords)) {

    // if value of text field is matched with my preferred keywords

    // Redirect page if match
   header('Location: http://localhost/equalivet_2/#products/wean_rite.html');

  } 

  elseif(in_array($search , $product2_keywords)) {

  header('Location: http://localhost/equalivet_2/#products/gro_rite.html');

  }
  elseif(in_array($search , $product3_keywords)) {

  header('Location: http://localhost/equalivet_2/#products/rite_start.html');

  }

  else {

 // Redirect page if not match
  header('Location: http://localhost/equalivet_2/equalivet/not_found.html');

  }

  die;
  ?> 
```

谢谢你。我希望这会帮助那些可能需要这篇文章的人

# php - PHP：使用上传多张照片同名

> ID：12633830
> 
> 赞同：2
> 
> 时间：2012-09-28T04:59:52.573
> 
> 标签：php, file-upload

我正在尝试使用上传多张照片

```
<input type='file'> 
```

与输入元素同名，例如，

```
<?php
$remainGal  =   $maxGallery-$totalGallery;
if($remainGal>0){
?>
<div class="businessSPGItems">
<form name="addBusinessGallery" method="post" action="businessservices.php#messageGallery" enctype="multipart/form-data">
<input type="hidden" name="businessID" value="<?php echo $businessID;?>" />
<?php
for($i=0; $i<$remainGal; $i++){
?>
<input type="file" name="filePhotos[]" style="margin-top:5px;" tabindex="<?php echo $i+5; ?>" /><br />
<?php
}
?>
<input type="submit" name="btnAddGallery" value="Add" style="margin-top:10px;" tabindex="<?php echo $i+5; ?>" />
</form>
</div>
<?php
}
?> 
```

但问题是当我计算文件元素的总数时，它总是显示 5... 即，

```
<?php 
$photos     =   $_FILES["filePhotos"];
echo count($photos);
?> 
```

所以我一次不能上传超过5张照片....我不知道我在做正确的方法..请帮忙，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:09:47.960

您`$_FILES["filePhotos"];`将有一组值。

阅读： http: [//php.net/manual/en/features.file-upload.multiple.php](http://php.net/manual/en/features.file-upload.multiple.php)

> ...数组 $_FILES['userfile']、$_FILES['userfile']['name'] 和 $_FILES['userfile'] ['size'] 将被初始化...每个都将是提交文件的适当值的数字索引数组。

```
$_FILES["filePhotos"]["name"][0];
$_FILES["filePhotos"]["name"][1];
$_FILES["filePhotos"]["name"][2];
$_FILES["filePhotos"]["name"][3];
$_FILES["filePhotos"]["name"][4]; 
```

另请注意，有一个上传限制配置值。 [http://php.net/manual/en/ini.core.php#ini.max-file-uploads](http://php.net/manual/en/ini.core.php#ini.max-file-uploads)

> 允许同时上传的最大文件数。从 PHP 5.3.4 开始，提交时留空的上传字段不计入此限制。

默认为 20。

# ios5 - 如何定位 iOS 5 和 iOS 6

> ID：12633831
> 
> 赞同：5
> 
> 时间：2012-09-28T04:59:57.173
> 
> 标签：ios5, ios6, iphone-5

这是我的困境。我有一个应用程序，我想更新以处理 iPhone 5 的新屏幕尺寸（除其他外）。为此，我需要以 iOS 6 为目标。但通过以 iOS 6 为目标，我阻止了大量的 iPhone 用户下载我的应用程序，因为人们需要很长时间才能在 iPhone 4/4S 上升级到 iOS 6。那么最好的方法是什么？我如何继续前进，但同时提供向后兼容性？任何建议都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T05:06:16.220

如果您的应用程序支持新的 4" iPhone 5 屏幕尺寸，则无需排除对早期 iOS 版本的支持。

您需要做的就是创建一个 4" 大小的启动图像，iOS 6 会识别它并以全屏大小启动您的应用程序。旧版本的 iOS 将忽略奇怪大小的启动图像，并继续像往常一样工作.

您确实需要升级到 Xcode 4.5 才能添加此映像，但您可以将项目的“部署目标”保留为 5.0 或 4.3 或其他任何版本。

# php - PHP - IE 9 中的文件上传 - Windows 7

> ID：12633832
> 
> 赞同：1
> 
> 时间：2012-09-28T05:00:12.820
> 
> 标签：php, file-upload, internet-explorer-9

以下是我**在 IE 9 - Windows 7 中使用 php 上传文件的代码**

与文件上传过程相关的问题 - 相同的代码在其他浏览器中工作

**测试.html**

```
<html>
<head>
<title>File Uploading Form</title>
</head>
<body>
<h3>File Upload:</h3>
Select a file to upload: <br />
<form action="uploader.php" method="post"
enctype="multipart/form-data">
<input type="file" name="file" size="50" />
<br />
<input type="submit" value="Upload File" />
</form>
</body>
</html> 
```

**上传者.php**

```
<?php

if( $_FILES['file']['name'] != "" ) { print_r($_FILES); copy( $_FILES['file']['name'], "/var/www/html/php/uf" ) or die( "Could not copy file!");

} else { die("No file specified!"); } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:49:34.433

尝试这个 。

当一个文件已经上传到服务器上时，它的真实路径是`$_FILES['file']['tmp_name']`, NOT `$_FILES['file']['name']`, 不要使用`copy()`, 使用`move_uploaded_file`, 更安全

```
<?php

if(!empty($_FILES)) { 

      if(is_uploaded_file($_FILES['file']['tmp_name'])){
            $tmp_name = $_FILES['file']['tmp_name'];
            $new_name = "/var/www/html/php/uf/".$_FILES['file']['name'];
            if(!move_uploaded_file($tmp_name, $new_name)){
                 exit('Could not move the file');
            }

      }else{
           exit('not uploaded file');
      }
      //copy( $_FILES['file']['name'], "/var/www/html/php/uf" ) or die( "Could not copy file!");
      //DO NOT use copy for uploaded file , it's unsafe.

} else { 
   exit("No file specified!");
} 
?> 
```

# php - 如果 PHP 中的 ELSE 未执行、已调试并且仍然找不到问题

> ID：12633840
> 
> 赞同：0
> 
> 时间：2012-09-28T05:00:52.997
> 
> 标签：php, html, postgresql, post

我以前用过php，从来没有遇到过这个问题......

我有单选按钮，它们传递自己的价值。提交表单后，我已验证传递的值与我的代码中的 if 语句条件匹配。但是，它不会执行该路径。

For example, when the city radio button is selected, the if condition pertaining to city does not execute. 我通过在 if 语句之前放置一个 echo 语句进行了调试，它与 if 语句中的值匹配，因此我对它为什么不执行感到困惑。

如果有人可以提供帮助，我将不胜感激......我很困惑。

继承人的html：

```
<html>
<head>
<title>Lab 5</title>
<link rel='stylesheet' href='SearchForm.css' type='text/css' media='all' />
</head>
<body>
<p>You may use % as a wildcard character in your search.</p>
<form method='POST' action='index.php?type=search'>
  <input type='text' name='search_param' value='' />
  <input type='radio' name='search-type' value='City' id='city' />
  <label for='city'>City</label>
  <input type='radio' name='search-type' value='Country' id='country' />
  <label for='country'>Country</label>
  <input type='radio' name='search-type' value='Language' id='language' />
  <label for='language'>Language</label>
  <br /><br />
  <input type='submit' name='submit' value='Search' />
</form>
<p>Or, <a href='index.php?type=insert'>perform an insertion.</a></p>
</body>
</html> 
```

和PHP：

```
<?php

include 'connect.php';

$table = $_POST['search-type'];
$search = $_POST['search_param'];

if($table != NULL)
{
        echo '<table>';

        if($table == 'City')
        {

                $query = "SELECT * FROM city WHERE name ILIKE $1 ORDER BY name;";
                $stmt = pg_prepare($connection, "city", $query);
                $result = pg_execute($connection, "city", array($search));

                while($row = pg_fetch_assoc($result))
                {
                        cityTable($row);
                }
        echo '</table>';

        }

}
else
{
        echo 'Please select a table to query!';
} 
```

正如你所看到的，我什至`$search`从我的 if 条件中删除了变量，而不是直接进入帖子。

当我回应`$search`它产生“城市”时......请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:05:26.790

PHP 中的字符串比较区分大小写，因此不要：

```
if($_POST['search_param'] == 'City') 
```

你应该有：

```
if (0 === strcasecmp($_POST['search_param'], 'City')) 
```

或者：

```
if (0 === strcasecmp(trim($_POST['search_param']), 'City')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:04:45.753

试试条件：

```
$table = isset($_POST['search-type']) ? $_POST['search-type'] : false;
$search = isset($_POST['search_param']) ? $_POST['search_param'] : false;

if ($table) {

}
else if (!$table || $table === null) {

} 
```

HTML 表单可能会发布参数 search-type 但为空白（不为空）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:05:30.917

行。试试这个：

```
$table = isset($_POST['search-type']) ? $_POST['search-type'] : NULL; // string from radio
$search = isset($_POST['search_param']) ? $_POST['search_param'] : NULL; // string from input 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T05:10:55.653

我想你想要

```
 if($table == 'City') 
```

$_POST['search_param'] 是文本框中的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T05:17:26.243

```
if($table != NULL)
{
        echo $table;

        if($search != NULL )
        { 
```

搜索参数是我们在我朋友的输入文本字段中得到的值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T15:36:45.640

没有人注意到查询中未定义的 $1 ：D

# iphone - 使用 AssetsLibrary 框架从数组中的 iPhone photoLibrary 中获取所有图片？

> ID：12633843
> 
> 赞同：19
> 
> 时间：2012-09-28T05:01:10.967
> 
> 标签：iphone, ios, photo-gallery, photolibrary

我想从 photoLibrary 中获取所有图片。我更喜欢可以直接使用的方法或示例。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-28T05:37:20.983

//查看控制器头（.h）文件..

```
#import <UIKit/UIKit.h>
#include <AssetsLibrary/AssetsLibrary.h> 

@interface getPhotoLibViewController : UIViewController
{
 ALAssetsLibrary *library;
 NSArray *imageArray;
 NSMutableArray *mutableArray;
}

-(void)allPhotosCollected:(NSArray*)imgArray;

 @end 
```

//实现文件

将全局计数变量声明为

```
static int count=0;

@implementation getPhotoLibViewController

-(void)getAllPictures
{
 imageArray=[[NSArray alloc] init];
 mutableArray =[[NSMutableArray alloc]init];
 NSMutableArray* assetURLDictionaries = [[NSMutableArray alloc] init];

 library = [[ALAssetsLibrary alloc] init];

 void (^assetEnumerator)( ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
  if(result != nil) {
   if([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto]) {
    [assetURLDictionaries addObject:[result valueForProperty:ALAssetPropertyURLs]];

    NSURL *url= (NSURL*) [[result defaultRepresentation]url]; 

    [library assetForURL:url
             resultBlock:^(ALAsset *asset) {
              [mutableArray addObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]]];

              if ([mutableArray count]==count)
              {
               imageArray=[[NSArray alloc] initWithArray:mutableArray];
               [self allPhotosCollected:imageArray];
              }
             }
            failureBlock:^(NSError *error){ NSLog(@"operation was not successfull!"); } ]; 

   } 
  }
 };

 NSMutableArray *assetGroups = [[NSMutableArray alloc] init];

 void (^ assetGroupEnumerator) ( ALAssetsGroup *, BOOL *)= ^(ALAssetsGroup *group, BOOL *stop) {
  if(group != nil) {
   [group enumerateAssetsUsingBlock:assetEnumerator];
   [assetGroups addObject:group];
   count=[group numberOfAssets];
  }
 };

 assetGroups = [[NSMutableArray alloc] init];

 [library enumerateGroupsWithTypes:ALAssetsGroupAll
                        usingBlock:assetGroupEnumerator
                      failureBlock:^(NSError *error) {NSLog(@"There is an error");}];
}

-(void)allPhotosCollected:(NSArray*)imgArray
{
 //write your code here after getting all the photos from library...
 NSLog(@"all pictures are %@",imgArray);
}

@end 
```

使用 getAllPicture 方法从照片库中获取照片。

或者你可以看看这个博客[http://mutiselectimagepicker.blogspot.in/2014/08/imageselect-to-allow-multiple-selection.html](http://mutiselectimagepicker.blogspot.in/2014/08/imageselect-to-allow-multiple-selection.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-02T09:08:49.850

由于`ALAssetsLibrary`现在已弃用并且`Photo Framework`是新的。我创建了自己的函数`Objective C`来从相机胶卷中获取所有照片并存储`NSArray`并显示在我的 Collectionview 中

```
 NSArray *imageArray;
 NSMutableArray *mutableArray;

-(void)getAllPhotosFromCamera
{
    imageArray=[[NSArray alloc] init];
    mutableArray =[[NSMutableArray alloc]init];

    PHImageRequestOptions *requestOptions = [[PHImageRequestOptions alloc] init];
    requestOptions.resizeMode   = PHImageRequestOptionsResizeModeExact;
    requestOptions.deliveryMode = PHImageRequestOptionsDeliveryModeHighQualityFormat;
    requestOptions.synchronous = true;
    PHFetchResult *result = [PHAsset fetchAssetsWithMediaType:PHAssetMediaTypeImage options:nil];

    NSLog(@"%d",(int)result.count);

    PHImageManager *manager = [PHImageManager defaultManager];
    NSMutableArray *images = [NSMutableArray arrayWithCapacity:[result count]];

    // assets contains PHAsset objects.

    __block UIImage *ima;
    for (PHAsset *asset in result) {
        // Do something with the asset

        [manager requestImageForAsset:asset
                           targetSize:PHImageManagerMaximumSize
                          contentMode:PHImageContentModeDefault
                              options:requestOptions
                        resultHandler:^void(UIImage *image, NSDictionary *info) {
                            ima = image;

                            [images addObject:ima];
                        }];

    }

    imageArray = [images copy];  // You can direct use NSMutuable Array images
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T10:31:55.313

```
-(void)getFromGallery:(BOOL )IsImages
{
    if(self.csCollectionsArray != nil)
        [self.csCollectionsArray removeAllObjects];
    __block NSMutableDictionary *date = [[NSMutableDictionary alloc] init];
    ALAssetsLibrary *csAssetsLibrary = [[ALAssetsLibrary alloc] init];
    NSUInteger groupTypes = ALAssetsGroupAlbum | ALAssetsGroupEvent | ALAssetsGroupFaces | ALAssetsGroupSavedPhotos;
    [csAssetsLibrary enumerateGroupsWithTypes:groupTypes usingBlock:^(ALAssetsGroup *group, BOOL *stop)
    {
        if([group numberOfAssets] > 0)
        {
            if(IsImages)
                [group setAssetsFilter:[ALAssetsFilter allPhotos]];
            else
                [group setAssetsFilter:[ALAssetsFilter allVideos]];
            [group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop)
            {
                if(asset)
                { //1.fetching all assets from device library
                    //2.Add all fetched assests from library
                    [date setObject:asset forKey:[asset valueForProperty:ALAssetPropertyDate]];
                }
            }];
        }
        else
        { NSLog(@"---> load table -------->");
            if(date != nil && date.count > 0)
            { //3.Sort using date by ascending order and moved to dictionary to array
                NSArray *sortedKeys = [[date allKeys] sortedArrayUsingSelector: @selector(compare:)];
                for (NSString *key in sortedKeys)
                    [self.csCollectionsArray addObject: [date objectForKey:key]];
                //4.Load images into collection view after fetching all datas
                [self reloadCollectionView];
                if(self.csCollectionView != nil)
                    [self.csCollectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:([self.csCollectionsArray count] - 1) inSection:0] atScrollPosition:UICollectionViewScrollPositionBottom animated:YES];
            }
            date = nil;
        }
    }failureBlock:^(NSError *error)
    {
        if((csCollectionsArray == nil || [csCollectionsArray count] == 0))
        {
            ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus]; if(status != ALAuthorizationStatusAuthorized)
            {
                [self showAlertAndCloseUploaderView:@"You can just go to \"Settings\" app (General -> Reset -> Reset Location & Privacy) then come again and click ok when the alert dialog is showing for enable the permission to access the photo library"];
            }
        }
    }];
}
```

您可以使用以下方法从 ios 的资产库中获取所有图像或视频。使用这个 assetslibrary 框架（必须）注意：-#import

```
-(void)getFromGallery:(BOOL )IsImages
{
    if(self.csCollectionsArray != nil)
        [self.csCollectionsArray removeAllObjects];
    __block NSMutableDictionary *date = [[NSMutableDictionary alloc] init];
    ALAssetsLibrary *csAssetsLibrary = [[ALAssetsLibrary alloc] init];
    NSUInteger groupTypes = ALAssetsGroupAlbum | ALAssetsGroupEvent | ALAssetsGroupFaces | ALAssetsGroupSavedPhotos;
    [csAssetsLibrary enumerateGroupsWithTypes:groupTypes usingBlock:^(ALAssetsGroup *group, BOOL *stop)
    {
        if([group numberOfAssets] > 0)
        {
            if(IsImages)
                [group setAssetsFilter:[ALAssetsFilter allPhotos]];
            else
                [group setAssetsFilter:[ALAssetsFilter allVideos]];
            [group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop)
            {
                if(asset)
                { //1.fetching all assets from device library
                    //2.Add all fetched assests from library
                    [date setObject:asset forKey:[asset valueForProperty:ALAssetPropertyDate]];
                }
            }];
        }
        else
        { NSLog(@"---> load table -------->");
            if(date != nil && date.count > 0)
            { //3.Sort using date by ascending order and moved to dictionary to array
                NSArray *sortedKeys = [[date allKeys] sortedArrayUsingSelector: @selector(compare:)];
                for (NSString *key in sortedKeys)
                    [self.csCollectionsArray addObject: [date objectForKey:key]];
                //4.Load images into collection view after fetching all datas
                [self reloadCollectionView];
                if(self.csCollectionView != nil)
                    [self.csCollectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:([self.csCollectionsArray count] - 1) inSection:0] atScrollPosition:UICollectionViewScrollPositionBottom animated:YES];
            }
            date = nil;
        }
    }failureBlock:^(NSError *error)
    {
        if((csCollectionsArray == nil || [csCollectionsArray count] == 0))
        {
            ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus]; if(status != ALAuthorizationStatusAuthorized)
            {
                [self showAlertAndCloseUploaderView:@"You can just go to \"Settings\" app (General -> Reset -> Reset Location & Privacy) then come again and click ok when the alert dialog is showing for enable the permission to access the photo library"];
            }
        }
    }];
} 
```

# javascript - Knockout.js 的客户端验证框架

> ID：12633845
> 
> 赞同：3
> 
> 时间：2012-09-28T05:01:14.000
> 
> 标签：javascript, validation, knockout.js, client-side-validation, rich-client-platform

我正在开发一个富客户端 Web 应用程序，想知道哪个框架适合客户端验证。我尝试了 JQuery 验证插件，但发现它并不能很好地与淘汰赛`data-bind="click: saveData"`绑定一起使用。

是否有任何针对 knockout.js 的特定客户端验证框架？

任何想法都值得赞赏。

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:12:21.833

这是一个专门为 KO 构建的验证框架：[https ://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)

# positioning - Graphviz 子图对齐问题

> ID：12633850
> 
> 赞同：0
> 
> 时间：2012-09-28T05:01:29.247
> 
> 标签：positioning, graphviz, subgraph

我试图强制节点在图中具有指定的位置。这样做时，不同的子图没有正确对齐。生成此图的代码是：

```
digraph {
rankdir=LR;
labeljust="l";

subgraph cluster0{

label="t=0" 

n_3_0_0[label="192.168.8.6"
    pos="15,12!"    
    ];
n_3_0_1[label="192.168.8.3"
    pos="10,10!"    
    ];

 n_3_0_0 -> n_3_0_1 ;
 n_3_0_1 -> n_3_0_0 ;
};

subgraph cluster1{

label="t=5"     

n_3_1_0[label="192.168.8.6"
    pos="15,12!"    
    ];
n_3_1_1[label="192.168.8.3"
    pos="10,10!"    
    ];
n_3_1_2[label="192.168.8.9"
    pos="10,12!"    
    ];

 n_3_1_0 -> n_3_1_1 ;
 n_3_1_1 -> n_3_1_0 ;
};

subgraph cluster2{

label="t=10" 

n_3_2_0[label="192.168.8.6"
    pos="14,10!"    
    ];
n_3_2_1[label="192.168.8.3"
    pos="10,10!"    
    ];
n_3_2_2[label="192.168.8.9"
    pos="15,11!"    
    ];
n_3_2_3[label="192.168.8.8"
    pos="18,12!"    
    ];

 n_3_2_0 -> n_3_2_1 ;

 n_3_2_2 -> n_3_2_3 ;
 n_3_2_1 -> n_3_2_0 ;
 n_3_2_3 -> n_3_2_2 ;
};

} 
```

我通过强制节点位置编译了这段代码：

```
dot -Kfdp -n -Tpng -o sample.png test2.dot 
```

输出图是： http: [//imageshack.us/photo/my-images/826/samplebg.png/](http://imageshack.us/photo/my-images/826/samplebg.png/) 我得到的输出问题是： 1\. 子图没有按 t=0, t- 的顺序显示5, t=10... 2\. 子图没有左对齐。

我需要有这样的输出图：http: [//imageshack.us/photo/my-images/253/needed.png/](http://imageshack.us/photo/my-images/253/needed.png/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:59:56.250

由于您已经预先计算了所有节点的位置，因此您实际上并不需要 fdp - 您只需要一个尊重该`pos`属性的布局。

所以你可以生成这样的输出：

```
neato -Tpng sourcedot.gv -O 
```

但是您必须在此之前调整节点位置，以便正确堆叠子图而不是叠加：

```
digraph {
rankdir=LR;
labeljust="l";

subgraph cluster0{
label="t=0"
n_3_0_0[label="192.168.8.6"
    pos="15,4!"
    ];
n_3_0_1[label="192.168.8.3"
    pos="10,2!"
    ];

 n_3_0_0 -> n_3_0_1 ;
 n_3_0_1 -> n_3_0_0 ;
};

subgraph cluster1{
label="t=5"
n_3_1_0[label="192.168.8.6"
    pos="15,7!"
    ];
n_3_1_1[label="192.168.8.3"
    pos="10,5!"
    ];
n_3_1_2[label="192.168.8.9"
    pos="10,7!"
    ];

 n_3_1_0 -> n_3_1_1 ;
 n_3_1_1 -> n_3_1_0 ;
};

subgraph cluster2{
label="t=10"
n_3_2_0[label="192.168.8.6"
    pos="14,8!"
    ];
n_3_2_1[label="192.168.8.3"
    pos="10,8!"
    ];
n_3_2_2[label="192.168.8.9"
    pos="15,9!"
    ];
n_3_2_3[label="192.168.8.8"
    pos="18,10!"
    ];

 n_3_2_0 -> n_3_2_1 ;

 n_3_2_2 -> n_3_2_3 ;
 n_3_2_1 -> n_3_2_0 ;
 n_3_2_3 -> n_3_2_2 ;
};

} 
```

导致

![在此处输入图像描述](../Images/a99189fc6d01f5a89ac7691ca28ba944.png) （中间子图的标签还需要做一些小调整）

或者只是使用 dot 并让它也对齐节点：

![在此处输入图像描述](../Images/8d7e1f7106864ff087de960459647c7d.png)

# recursion - 试图理解递归序言过程？

> ID：12633851
> 
> 赞同：0
> 
> 时间：2012-09-28T05:01:32.797
> 
> 标签：recursion, prolog

在教授的讲座中举了一个例子：

```
append([ ], A, A).
append([A|B], C, [A|D]) :- append(B,C,D).

Build a list:

?- append([a],[b],Y).
Y = [ a,b ]

Break a list into constituent parts:

?- append(X,[b],[a,b]).
X = [ a ]
?- append([a],Y,[a,b]).
Y = [ b ] 
```

我花了 3 个小时试图掌握它，但不能。这张幻灯片之前的任何序言概念都没有遇到任何问题。没有提供进一步的解释，也没有其他信息。这就是全部。如果有人能告诉我这个程序是如何工作的，我会爱他们直到死亡将我们分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:29:28.640

首先要了解的是`:-`操作员。

```
this_will_be_true :- if_this_is_true 
```

基本上，右边的任何东西都是`:-`先决条件。一个很好的例子是：

```
sibling(X, Y) :- parent_child(Z, X), parent_child(Z, Y). 
```

这基本上意味着如果存在父 Z 使得 Z 是 X 和 Y 的父级，则 X 和 Y 是兄弟姐妹。

```
append([ ], A, A). 
```

这一行基本上意味着将某些内容附加到空列表会返回该内容。这是递归中的基本情况。

```
append([A|B], C, [A|D]) :- append(B,C,D). 
```

这行意味着将 C 附加到具有 A 和 B 的现有列表会返回具有 A 和 D 的列表，因为将 C 附加到 B 会返回 D。

```
Build a list:

?- append([a],[b],Y).
Y = [ a,b ] 
```

所以，这里发生的事情是 Prolog 返回唯一可能的值，`Y`它满足给定两个初始值的两个规则。让我们想想这是如何发生的。这需要首先通过第二条规则进行评估。`[A|B]`也是如此。`[a]`_ `C`_`[b]`

所以`[A|B]`我们必须回到第一条规则，因为`B`它是空列表（它是`[ ]`）。第一条规则基本上表明我们可以写`[a]`为`[a|[ ]]`，它们是相同的。所以现在我们可以回到第二条规则。`A`是`a`，`B`是`[ ]`，`C`是`[b]`。

所以现在让我们检查 的前提条件`append(B, C, D)`。这是`append([ ], [b], D)`. 再一次，使用第一条规则，我们可以看到`D`也是`[b]`。

所以`Y`，根据第二个规则定义，是`[A|D]`。现在我们知道`D`是`[b]`，我们知道那`Y`是`[a, b]`。

我只会做一个分解，因为它们基本上是一样的。

```
?- append(X,[b],[a,b]).
X = [ a ] 
```

所以在这里，Prolog 将返回唯一可能的值，`X`以便语句返回 true。我们来看看第二条规则。所以我们知道那`[a, b]`是`[A|D]`。这意味着`A`is`a`和`D`is `[b]`。我们也知道`C`是`[b]`。所以现在，我们需要看看先决条件来弄清楚是什么`B`。`append(B, C, D)`转换为`append(B, [b], [b])`。现在，使用第一条规则，我们知道`B`必须是`[ ]`。所以现在我们知道`[A|B]`与`[a|[ ]]`相同 `[a]`。因此，`X`必须`[a]`。

我希望这是一个足够详细的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:27:20.937

下面是我自己的理解。

您的代码描述了 List 的附加操作。

首先，这里有一个缩写，可以帮助您理解 prolog 中的列表是什么以及它的含义是什么`|`：

```
[X1|[...[Xn|[]] = [X1,...Xn] 
```

而 append(A, B, C) 表示将列表 B 附加到 A 会导致 C。

将 A 附加到空列表结果 A：

```
append([ ], A, A). 
```

如果要将 Y 附加到 X，请说 append(X, Y, _)。除非 X 是 []，否则 prolog 将不知道要做什么。你必须通过说来告诉规则序言：

```
append([A|B], C, [A|D]) := append(B, C, D) 
```

然后 prolog 将尝试将 X 拆分为 form `[A|B]`。那么 Y 将是`A|D`其中 D 是由 C 定义的附加到 B 的列表。`append(B, C, D)`这是我们告诉 prolog 这个事实的方式。

# c# - 在 GPU 上计算多边形轮廓顶点

> ID：12633855
> 
> 赞同：2
> 
> 时间：2012-09-28T05:01:57.413
> 
> 标签：c#, arrays, windows-phone-7, xna, gpu

**我正在尝试在不使用自定义着色器的情况下绘制具有宽颜色轮廓的 2D 多边形。**
（如果我要写一个，它可能会比使用 CPU 慢，因为我不精通着色器）
为此，我计划像正常一样绘制多边形，然后使用生成的深度缓冲区作为绘制相同的扩展几何图形时使用模板。

**XNA "GraphicsDevice" 可以在给定任何 IVertexType 实例数组的情况下绘制图元：**

```
DrawUserPrimitives<T>(PrimitiveType primitiveType, T[] vertexData, int vertexOffset, int primitiveCount, VertexDeclaration vertexDeclaration) where T : struct; 
```

**我为 2D 坐标空间定义了一个 IvertexType：**

```
public struct VertexPosition2DColor : IVertexType
{
    public VertexPosition2DColor (Vector2 position, Color color) {
        this.position = position;
        this.color = color;
    }

    public Vector2 position;
    public Color color;

    public static VertexDeclaration declaration = new VertexDeclaration (
        new VertexElement(0, VertexElementFormat.Vector2, VertexElementUsage.Position, 0),
        new VertexElement(sizeof(float)*2, VertexElementFormat.Color, VertexElementUsage.Color, 0)
    );

    VertexDeclaration IVertexType.VertexDeclaration {
        get {return declaration;}
    }
} 
```

**我已经定义了一个数组类来存储多边形的顶点、颜色和边缘法线：**
我希望将这个类作为 GraphicDevice 的 DrawPrimitives 函数中的 T[] 参数传递。
目标是通过 GPU 计算轮廓顶点，因为它显然擅长此类事情。

```
internal class VertexOutlineArray : Array
{
    internal VertexOutlineArray (Vector2[] positions, Vector2[] normals, Color[] colors, Color[] outlineColors, bool outlineDrawMode) {
        this.positions = positions;
        this.normals = normals;
        this.colors = colors;
        this.outlineColors = outlineColors;
        this.outlineDrawMode = outlineDrawMode;
    }

    internal Vector2[] positions, normals;
    internal Color[] colors, outlineColors;
    internal float outlineWidth;
    internal bool outlineDrawMode;

    internal void SetVertex(int index, Vector2 position, Vector2 normal, Color color, Color outlineColor) {
        positions[index] = position;
        normals[index] = normal;
        colors[index] = color;
        outlineColors[index] = outlineColor;
    }

    internal VertexPosition2DColor this[int i] {
        get {return (outlineDrawMode)? new VertexPosition2DColor(positions[i] + outlineWidth*normals[i], outlineColors[i]) 
                                     : new VertexPosition2DColor(positions[i], colors[i]);
        }
    }
} 
```

**我希望能够渲染形状及其轮廓，如下所示：** 在绘制扩展的轮廓几何图形时，深度缓冲区用作模板

```
protected override void RenderLocally (GraphicsDevice device)
{
    // Draw shape
    mVertices.outlineDrawMode = true; //mVertices is a VertexOutlineArray instance

    device.RasterizerState = RasterizerState.CullNone;
    device.PresentationParameters.DepthStencilFormat = DepthFormat.Depth16;
    device.Clear(ClearOptions.DepthBuffer, Color.SkyBlue, 0, 0);
    device.DrawUserPrimitives<VertexPosition2DColor>(PrimitiveType.TriangleList, (VertexPosition2DColor[])mVertices, 0, mVertices.Length -2, VertexPosition2DColor.declaration);

    // Draw outline
    mVertices.outlineDrawMode = true;

    device.DepthStencilState = new DepthStencilState {
        DepthBufferWriteEnable = true,
        DepthBufferFunction = CompareFunction.Greater //keeps the outline from writing over the shape
    };
    device.DrawUserPrimitives(PrimitiveType.TriangleList, mVertices.ToArray(), 0, mVertices.Count -2);
} 
```

**但这不起作用，因为我无法将 VertexArray 类作为 T[] 传递。在没有自定义着色器的情况下，我如何修改它或以其他方式实现在 GPU 上进行轮廓计算的目标？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:19:38.617

我想知道您为什么不简单地编写一个使用成对的细三角形作为线来绘制轮廓的类？您可以创建一个通用的折线例程，该例程接收 2d 点的输入和线的宽度，并且该例程会输出一个 VertexBuffer。

我意识到这并没有回答你的问题，但我看不出尝试按照你的方式去做有什么好处。是否有您想要实现的特定效果，或者您是否会非常频繁地操作数据或大量缩放多边形？

* * *

您可能遇到的问题是 Windows Phone 7 的 XNA4 根本不支持自定义着色器。事实上，他们故意将其限制为一组预定义的着色器，因为需要测试的排列数量。目前支持的有：

AlphaTestEffect BasicEffect EnvironmentMapEffect DualTextureEffect SkinnedEffect

你可以在这里阅读它们：

[http://msdn.microsoft.com/en-us/library/bb203872(v=xnagamestudio.40).aspx](http://msdn.microsoft.com/en-us/library/bb203872(v=xnagamestudio.40).aspx)

我没有测试创建或使用具有 Vector2 位置和正常的 IVertexType，因此我无法评论它是否受支持。如果我要这样做，我将只使用 BasicEffect 和 VertexPositionNormal 进行主要的多边形形状渲染，并为每个多边形调整 DiffuseColor。为了渲染轮廓，您使用现有的 VertexBuffer 并通过调用 GraphicsDevice.Viewport.Unproject() 来确定生成 n 像素 2d 屏幕距离（您的轮廓宽度）所需的 3d 坐标距离。

请记住，当您使用 BasicEffect 或任何与此相关的效果时，您必须遍历 CurrentTechnique 的 EffectPass 数组，并在进行 Draw 调用之前为每个 pass 调用 Apply() 方法。

```
 device.DepthStencilState = DepthStencilState.Default;
        device.BlendState = BlendState.AlphaBlend;
        device.RasterizerState = RasterizerState.CullCounterClockwise;

        //Set the appropriate vertex and indice buffers
        device.SetVertexBuffer(_polygonVertices);
        device.Indices = _polygonIndices;

        foreach (EffectPass pass in _worldEffect.CurrentTechnique.Passes)
        {
            pass.Apply();
            PApp.Graphics.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, _polygonVertices.VertexCount, 0, _polygonIndices.IndexCount / 3);
        } 
```

# javascript - 使用 JavaScript 或扩展获取 Firefox 页面信息

> ID：12633856
> 
> 赞同：1
> 
> 时间：2012-09-28T05:02:03.400
> 
> 标签：javascript, firefox, firefox-addon, firebug

当您右键单击 Firefox 选择“查看页面信息”时，您将看到诸如

```
Modified: xxx 
```

是否可以仅使用 JavaScript 扩展来获取此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:06:39.740

有关文档对象的所有属性，请参见[http://www.javascriptkit.com/jsref/document.shtml](http://www.javascriptkit.com/jsref/document.shtml)。 `document.lastModified`包含修改日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:11:32.003

“页面信息”对话框显示[document.lastModified](https://developer.mozilla.org/en-US/docs/DOM/document.lastModified)属性的值，不涉及“魔法”（[prooflink](http://hg.mozilla.org/mozilla-central/file/510300b96e62/browser/base/content/pageinfo/pageInfo.js#l530)）。

# java - OnTouch() 事件仅在 Android 中不适用于第一次触摸

> ID：12633863
> 
> 赞同：2
> 
> 时间：2012-09-28T05:02:50.140
> 
> 标签：java, android, achartengine, ontouchlistener

我正在开发一个 android 应用程序并使用 AChartEngine 来绘制图表。除了我在 OnTouch() 方法中捕获屏幕上的触摸坐标外，一切都正常工作。第一次触摸它不会返回任何坐标，并且 Toast 显示在左上角（由 Toast.setGravity() 设置）。在随后的触摸中，它工作得非常好，只是不是在我第一次点击或触摸屏幕时。我哪里错了？

```
mChartView.setOnClickListener(new View.OnClickListener() {
             Toast test;
            public void onClick(View v) {
              SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
              v.setOnTouchListener(new OnTouchListener() {
               public boolean onTouch(View v, MotionEvent event) {

                      xaxis =  event.getX();
                      yaxis =  event.getY(); 
                      xx = (int) xaxis;
                    yy = (int) yaxis;
            return false;
                    }
                });

              if (seriesSelection != null) {

                  int status_index = seriesSelection.getSeriesIndex();
                  int equipment_index = seriesSelection.getPointIndex();
                  double duration_value = seriesSelection.getValue();

                  if(status_index == 0)
                  {
                      if(equipment_index == 0)
                      {
                          duration_value = EquipmentHoursDuration[0][1];
                      }
                      if(equipment_index == 1)
                      {
                          duration_value = EquipmentHoursDuration[1][1];
                      }
                      if(equipment_index == 2)
                      {
                          duration_value = EquipmentHoursDuration[2][1];
                      }
                      if(equipment_index == 3)
                      {
                          duration_value = EquipmentHoursDuration[3][1];
                      }
                      if(equipment_index == 4)
                      {
                          duration_value = EquipmentHoursDuration[4][1];
                      }
                      String final_status = titles[status_index];
               String final_equipment = EquipmentNamePartial[equipment_index];
                    test = Toast.makeText(
                            SalesBar.this,
                              "Status: " + final_status + '\n'
                            + " Equipment: " + final_equipment + '\n'
                            + " Duration: " + duration_value + " hours", Toast.LENGTH_SHORT);

                   test.setGravity(Gravity.TOP|Gravity.LEFT, xx, yy);

                      test.show();
                  }

                  else
                  {
                 String final_status = titles[status_index];
                 String final_equipment = EquipmentNamePartial[equipment_index];
                 if(equipment_index == 0)
              {
                  duration_value = EquipmentHoursDuration[0][0];
              }
              if(equipment_index == 1)
              {
                  duration_value = EquipmentHoursDuration[1][0];
              }
              if(equipment_index == 2)
              {
                  duration_value = EquipmentHoursDuration[2][0];
              }
              if(equipment_index == 3)
              {
                  duration_value = EquipmentHoursDuration[3][0];
              }
              if(equipment_index == 4)
              {
                  duration_value = EquipmentHoursDuration[4][0];
              }

                test = Toast.makeText(
                        SalesBar.this,
                          "Status: " + final_status + '\n'
                        + " Equipment: " + final_equipment + '\n'
                        + " Duration: " + duration_value + " hours", Toast.LENGTH_SHORT);

                     test.setGravity(Gravity.TOP|Gravity.LEFT, xx, yy);

                      test.show();
                  }
              }
            }
          }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:01:29.863

这是你的代码.....返回`true`而不是`false`

```
 public boolean onTouch(View v, MotionEvent event) {

                      xaxis =  event.getX();
                      yaxis =  event.getY(); 
                      xx = (int) xaxis;
                    yy = (int) yaxis;
            return false; 
```

} });

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T05:52:08.550

当你调用第一个 onClickListener 时，只有第一次触摸。之后，将照常调用 onClickListener。可能您可以尝试将 onClickListener 交换为 onTouchListener。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T06:20:54.630

```
mChartView.setOnTouchListener(new OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                     if (MotionEvent.ACTION_DOWN == event.getAction()) {
                        xaxis =  event.getRawX();

                yaxis =  event.getRawY(); 
                xx = (int) xaxis;
                yy = (int) yaxis;
                    } else if (MotionEvent.ACTION_UP == event.getAction()) {
                        xaxis =  event.getX();
                          yaxis =  event.getY(); 
                          xx = (int) xaxis;
                        yy = (int) yaxis;
                    }
                    else{}

                    return false;
                }
            });

         mChartView.setOnClickListener(new View.OnClickListener() {
             Toast test;
            public void onClick(View v) {
              SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();

              if (seriesSelection != null) {

                  int status_index = seriesSelection.getSeriesIndex();
                  int equipment_index = seriesSelection.getPointIndex();
                  double duration_value = seriesSelection.getValue();

                  if(status_index == 0)
                  {
                      if(equipment_index == 0)
                      {
                          duration_value = EquipmentHoursDuration[0][1];
                      }
                      if(equipment_index == 1)
                      {
                          duration_value = EquipmentHoursDuration[1][1];
                      }
                      if(equipment_index == 2)
                      {
                          duration_value = EquipmentHoursDuration[2][1];
                      }
                      if(equipment_index == 3)
                      {
                          duration_value = EquipmentHoursDuration[3][1];
                      }
                      if(equipment_index == 4)
                      {
                          duration_value = EquipmentHoursDuration[4][1];
                      }
                      String final_status = titles[status_index];
                     String final_equipment = EquipmentNamePartial[equipment_index];
                    test = Toast.makeText(
                            SalesBar.this,
                              "Status: " + final_status + '\n'
                            + " Equipment: " + final_equipment + '\n'
                            + " Duration: " + duration_value + " hours", Toast.LENGTH_SHORT);

                     test.setGravity(Gravity.TOP|Gravity.LEFT, xx, yy);

                      test.show();
                  }

                  else
                  {
                 String final_status = titles[status_index];
                 String final_equipment = EquipmentNamePartial[equipment_index];
                 if(equipment_index == 0)
              {
                  duration_value = EquipmentHoursDuration[0][0];
              }
              if(equipment_index == 1)
              {
                  duration_value = EquipmentHoursDuration[1][0];
              }
              if(equipment_index == 2)
              {
                  duration_value = EquipmentHoursDuration[2][0];
              }
              if(equipment_index == 3)
              {
                  duration_value = EquipmentHoursDuration[3][0];
              }
              if(equipment_index == 4)
              {
                  duration_value = EquipmentHoursDuration[4][0];
              }

                test = Toast.makeText(
                        SalesBar.this,
                          "Status: " + final_status + '\n'
                        + " Equipment: " + final_equipment + '\n'
                        + " Duration: " + duration_value + " hours", Toast.LENGTH_SHORT);

                     test.setGravity(Gravity.TOP|Gravity.LEFT, xx, yy);

                      test.show();
                  }
              }
            }
          }); 
```

# wpf - 从语义上讲，Commands 和 Converters 应该更接近 Views 还是 ViewModels？

> ID：12633865
> 
> 赞同：3
> 
> 时间：2012-09-28T05:03:12.743
> 
> 标签：wpf, xaml, mvvm, ivalueconverter, icommand

我想知道在 MVVM 中我是否应该设计更接近视图或视图模型的转换器和命令。这对我来说是一个灰色地带，因为它们是两种类型的胶水对象，弥合了组件之间的差距。也许这并不重要，但我想知道 Stack Overflow 对此有什么看法。

我曾经将 Converters 放在 ViewModel 命名空间中，因为即使 View 发生变化，它们也经常是可重用的。但是，我看到越来越多的评论使它们更接近视图。请参阅以下问题的最佳答案：
[您的 ViewModel 是否应该将 XAML 元素公开为属性？](https://stackoverflow.com/a/1007767/92430)
[WPF 转换器如何在 MVVM 模式中使用？](https://stackoverflow.com/a/1007580/92430)

命令通常由 ViewModel 公开以实现 UI 事件，因此我也将它们放在 ViewModel 命名空间中。一个经典的例子是[RelayCommands](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)。然后我遇到了一个有趣的模式，即使用命令在主视图和 ViewModel 之间显示对话框。我发现它的简单性非常出色。该命令实际上只是一个代理，但显然是在 UI 领域。是还是不是？请参阅：
[MVVM 和](http://www.daedtech.com/mvvm-and-dialogs)
[使用 MVVM 处理 WPF 中的对话框](https://stackoverflow.com/a/8172200/92430)

那么你认为命令和转换器应该放在 MVVM 中的什么位置呢？看法？视图模型？没关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:37:25.830

我不认为你可以说他们在一个阵营或另一个阵营。正如你所说，它们的目的是在 ViewModel 和 View 之间架起一座桥梁，同时保持它们之间的解耦。在我看来，这就是您应该将它们视为胶水代码的方式。

**转换器**- 您可能会争辩说它们更接近视图，因为它们的职责与如何调整信息以便在 xaml 控件中轻松绑定和显示有关。

此外，理论上您可以为同一个 ViewModel 属性使用两个不同的转换器，具体取决于您希望如何查看它。

但是，如果需要，没有什么能阻止您在其他情况下使用它们，即在根本不涉及视图的地方。

由于您的问题还暗示了将它们放在哪里，因此我将转换器分开放置，而不是在视图文件夹中，也不在 ViewModels 文件夹中，以方便重用。

**命令**- 通常由 MVVM 中的 ViewModel 公开，因此可以说它们更接近 ViewModel，但根据我的经验，它们最常用于促进通过 Bindings 从 ViewModel 调用逻辑。如果我可以直接在 xaml 中绑定 ViewModel 方法调用，我将不再使用命令 - 对于简单的情况。

即使它们通常绑定到 ViewModel，命令也可能在 View 和 ViewModel 之间重用。如果您发现自己复制粘贴了命令代码，您可以将它们分开，将 ViewModel 放在接口后面并重用它们。

此外，命令模式在 MVVM 范围之外还有许多用途。（例如，您可以在应用程序逻辑中使用它来促进“撤消”功能）

至于将它们放在哪里 - 通常我首先将它们放在 ViewModel 中，随着事情变得更加复杂，我会根据需要移动它们。这里有一篇有趣的文章，关于当事情变得复杂时你可以做什么：[如何避免 ViewModel 中的命令混乱？](https://stackoverflow.com/questions/8552566/how-can-i-avoid-command-clutter-in-the-viewmodel)

我知道这是一个主观的答案，但我希望我提供了一些好的论据，并且我愿意接受意见。

# java - HTTPS 重定向问题

> ID：12633869
> 
> 赞同：-2
> 
> 时间：2012-09-28T05:03:22.603
> 
> 标签：java, php, javascript

所以我插入了一个 SLL 证书，现在在我拥有的 web.config 文件的代码中

代码：

```
<system.webServer>
        <rewrite>
            <rules>
                <rule name="removed by me" stopProcessing="true">
                    <match url="(.*)" />
                    <conditions>
                        <add input="{HTTPS}" pattern="(^OFF$)" />
                    </conditions>
                    <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="SeeOther" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer> 
```

现在这很好用，除了我使用的目录之外的所有目录都是站点/文件夹/根目录（我需要访问的所有文件都设置为）现在使用我去时使用的代码让我们说登录并且我在站点/folder/loginfile 并且我登录后，当它应该是 site/folder/root 时，它会将我带到 site/loginsuccess 文件。

如果您还需要什么，请告诉我！

谢谢！

已编辑-----------

成功登录后我的重定向是：

```
header("location:http://Site/folder/memberinterface.php"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:10:48.180

改变

```
header("location:http://Site/folder/memberinterface.php"); 
```

至

```
header("location: http://Site/folder/memberinterface.php");
                 ^
                 ^ 
```

你没有插入`space`这会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:36:54.697

弄清楚了！

我需要改变

`action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="SeeOther" />`至

```
<action type="Redirect" redirectType="Found" url="https://{HTTP_HOST}{REQUEST_URI}" /> 
```

谢谢您的帮助！

# apache - ReverseProxy - 将一些 URL 发送到另一台服务器进行预处理

> ID：12633873
> 
> 赞同：0
> 
> 时间：2012-09-28T05:03:32.720
> 
> 标签：apache, apache2, reverse-proxy, httpd.conf, mod-proxy

有一个托管在 Apache 上的现有应用程序。我想将一些 url（发布表单）发送到另一台服务器（不是 apache - 只是一个程序）进行一些预处理。这就是它的组织方式

1）我在 Apache conf 上添加了一个额外的监听端口（比如 1234）

2）在端口 80 上添加了一个反向代理，以将一些 url 发送到第二台服务器，监听它自己的端口

3）由于实际的 html 托管在 apache 上，第二台服务器在端口 1234 上从 Apache 请求所需的页面。然后它修改 html（post 表单）并提供它。它再次将发布的数据修改并发送回apache。

我可以通过以下步骤实现上述目标 1) 在我现有的 htdocs 目录结构中 - 我创建了 2 个名为 dir1 和 dir2 的新子目录

2）所有需要预处理的表格，我移动到目录dir1。所有处理 post 数据的脚本，我移到 dir2。我更改其他 html 以更新路径。

3）我添加了以下代理配置

`ProxyPass /dir1 http://localhost:1234/dir1`

`ProxyPassReverse /dir1 http://localhost:1234/dir1`

dir2 也类似。

这工作正常，但我想知道这些是否是更好的方法。我正在寻找的主要改进是进行反向代理配置，这样我就不会干扰托管在 htdocs 中的原始应用程序（通过将内容移动到 dir1、dir2 - 更新引用等）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:15:14.160

您描述的设置背后的整个想法有点异国情调。

我想知道为什么你不能简单地重写你想要“拦截”的表单的 url，并让请求或回复由一些脚本语言（如 php 或其他）处理。这样您就不需要第二台服务器，无需在原始应用程序布局内进行任何更改，并且您在 apache 内拥有完整的脚本环境，而不必使用外部程序。

所以是这样的：

```
get form-1.html 
=> deliver form-1.html 
=> submit form-1.html 
=> process form-1.html

get form-2.html 
!=> rewrite to intercept.php?form=form-2.html
=> intercept form-2.html for preparation
=> deliver intercepted form-2.html
=> submit form-2.html
!=> rewrite to intercept.php?form=form-2.html
=> intercept form-2.html for processing
=> process form-2.html 
```

（form-1 不被拦截，form-2 被拦截）

# php - 如何取消设置多个变量？

> ID：12633877
> 
> 赞同：46
> 
> 时间：2012-09-28T05:03:47.243
> 
> 标签：php, variables, unset

> **可能重复：**
> [你能在 PHP 中一次 unset() 多个变量吗？](https://stackoverflow.com/questions/1275766/can-you-unset-many-variables-at-once-in-php)

我有 3 个变量`var1` `var2` `var3`。有没有一种方法可以在不重复使用`unset()`功能的情况下取消设置它们？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-09-28T05:05:58.527

试试这个

```
unset($foo1, $foo2, $foo3); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T05:16:49.197

不要`foreach`为此使用循环。因为它适用于数组的副本。

**查看示例**

[**http://codepad.org/mZOc81J5**](http://codepad.org/mZOc81J5)

如果您想使用循环执行此操作，请使用`for`循环。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T05:05:43.593

像这样使用

```
for($i=0 ; $i<count($array) ; $i++)
{
    unset($array[$i]);
} 
```

你必须为此使用`for`循环。

您可以使用`foreach`循环，但它不会取消设置所有变量一个变量仍然存在。

```
foreach($array as $arr)
{
    unset($array[$arr]);
} 
```

# ruby-on-rails-3 - 如何使用 has_many 访问数据：通过关系

> ID：12633878
> 
> 赞同：0
> 
> 时间：2012-09-28T05:03:51.307
> 
> 标签：ruby-on-rails-3, associations, has-many-through

嗨，我有三种模型：公司、计划和订阅，具有以下关联

```
 class Company < ActiveRecord::Base
      has_one :plan, :through => :subscriptions
      has_many :subscriptions
    end

    class Subscription < ActiveRecord::Base
      belongs_to :plan
      belongs_to :company
    end

   class Plan < ActiveRecord::Base
      has_many :subscriptions
      has_many :companies, :through => :subscriptions
    end 
```

我的申请计划“A”和计划“B”中有两个计划。计划“A”是免费的，“B”是收费的。现在我想让公司注册计划“A”和注册计划“B”的公司。
我想在我的模型中使用这些数据，我知道它们绝对是获得所有这些的简单方法，但是我使用的每一件事都没有给我正确的数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:56:40.693

让公司注册计划“A”和公司注册计划“B”。以计划的对象，然后通过以下关系代码，您将获得公司的数量。这是加入概念。例如。@plan 是计划“A”的对象。然后@plan.companies.count。

我建议使用“多态关联”的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:25:32.950

您需要通过关联插入新记录。这是一个可能有帮助的相关链接。**[如何将记录添加到has_many：通过rails中的关联](https://stackoverflow.com/questions/7297338/how-to-add-records-to-has-many-through-association-in-rails)**

但是伪代码就像

```
1\. You have a company object
2\. you will have company.subscriptions
3\. Insert new Plan objects in company.subscriptions
4\. Save the data. 
```

如果您仍然面临问题，我将尝试添加一些代码示例。

# squid - squid3 无法访问 google.com 或 bing.com

> ID：12633884
> 
> 赞同：6
> 
> 时间：2012-09-28T05:05:02.173
> 
> 标签：squid

我对 squid3 有一个奇怪的问题。它正常工作，我可以通过代理访问大多数网站。但是有些网站喜欢

```
google.com
bing.com 
```

只是似乎被阻止但并非总是如此。重新启动 squid3 似乎没有帮助或清除 /var/spool/squid3 （缓存）目录。

如果我登录到运行 squid3 的机器并且

```
wget --no-proxy google.com 
```

那么没有问题但是如果我通过代理它永远不会响应。大多数其他网站都可以访问，包括我目前通过代理使用的 stackoverflow.com。知道 google.com 和 bing.com 可能有什么特别之处，以便 squid3 以不同的方式对待它们，并且 squid3 conf 文件中是否有任何可能与此类行为相关的设置。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-12T23:32:53.960

我也有同样的问题。我的问题是由 ipv6 连接问题引起的。Squid3 支持 ipv6 和 ipv4 协议。如果您的服务器无法连接 ipv6 并且远程服务器更喜欢 ipv6，那么 squid 也更喜欢 ipv6 并且无法检索访问日志等数据。

首先尝试使用 ping 连接 ipv6。

```
ping6 ivp6.google.com 
```

如果 ping 没有响应，让我们先将 squid3 配置为首选 ipv4。

在 squid.conf 中搜索

```
TAG: dns_v4_first 
```

后

```
#Default:
#dns_v4_first off 
```

添加

```
dns_v4_first on 
```

然后重启squid3服务器

```
service squid3 restart 
```

这是我修复前的访问日志。

```
1352760882.854    796 88.my.ip.108 TCP_MISS/000 0 GET http://connect.facebook.net/en_US/all.js [squiduser] DIRECT/connect.facebook.net -
1352760885.717     69 88.my.ip.108 TCP_MISS/000 0 GET http://www.google.com.tr/complete/search? [squiduser] DIRECT/www.google.com.tr -
1352760886.250     13 88.my.ip.108 TCP_MISS/000 0 GET http://www.google.com.tr/complete/search? [squiduser] DIRECT/www.google.com.tr -
1352760887.011    369 88.my.ip.108 TCP_MISS/000 0 GET http://www.google.com.tr/complete/search? [squiduser] DIRECT/www.google.com.tr -
1352760887.989     42 88.my.ip.108 TCP_MISS/000 0 GET http://www.google.com.tr/complete/search? [squiduser] DIRECT/www.google.com.tr -
1352760888.984     75 88.my.ip.108 TCP_MISS/000 0 GET http://www.google.com.tr/complete/search? [squiduser] DIRECT/www.google.com.tr -
1352760897.351   8165 88.my.ip.108 TCP_MISS/000 0 GET http://www.google.com.tr/search? [squiduser] DIRECT/www.google.com.tr -
1352761072.531  10970 88.my.ip.108 TCP_MISS/000 0 GET http://www.google-analytics.com/__utm.gif? [squiduser] DIRECT/www.google-analytics.com -
1352761072.533  10272 88.my.ip.108 TCP_MISS/000 0 GET http://apis.google.com/js/plusone.js [squiduser] DIRECT/apis.google.com -
1352761072.535  10262 88.my.ip.108 TCP_MISS/000 0 GET http://connect.facebook.net/en_US/all.js [squiduser] DIRECT/connect.facebook.net - 
```

这是我的完整鱿鱼配置。我使用 squid 作为匿名代理服务器。

```
2012/11/14 00:09:02| Processing Configuration File: /etc/squid3/squid.conf (depth 0)
2012/11/14 00:09:02| Processing: auth_param basic program /usr/lib/squid3/ncsa_auth /etc/squid3/squid.passwd
2012/11/14 00:09:02| Processing: auth_param basic children 5
2012/11/14 00:09:02| Processing: auth_param basic realm Squid proxy-caching web server
2012/11/14 00:09:02| Processing: auth_param basic credentialsttl 2 hours
2012/11/14 00:09:02| Processing: acl manager proto cache_object
2012/11/14 00:09:02| Processing: acl localhost src 127.0.0.1/32 ::1
2012/11/14 00:09:02| Processing: acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
2012/11/14 00:09:02| Processing: acl CONNECT method CONNECT
2012/11/14 00:09:02| Processing: http_access allow manager localhost
2012/11/14 00:09:02| Processing: http_access deny manager
2012/11/14 00:09:02| Processing: http_access allow localhost
2012/11/14 00:09:02| Processing: acl ncsaauth proxy_auth REQUIRED
2012/11/14 00:09:02| Processing: http_access allow ncsaauth
2012/11/14 00:09:02| Processing: http_access deny all
2012/11/14 00:09:02| Processing: http_port 8880
2012/11/14 00:09:02| Processing: coredump_dir /var/spool/squid3
2012/11/14 00:09:02| Processing: refresh_pattern ^ftp:      1440    20% 10080
2012/11/14 00:09:02| Processing: refresh_pattern ^gopher:   1440    0%  1440
2012/11/14 00:09:02| Processing: refresh_pattern -i (/cgi-bin/|\?) 0    0%  0
2012/11/14 00:09:02| Processing: refresh_pattern (Release|Packages(.gz)*)$      0       20%     2880
2012/11/14 00:09:02| Processing: refresh_pattern .      0   20% 4320
2012/11/14 00:09:02| Processing: dns_v4_first on
2012/11/14 00:09:02| Processing: forwarded_for delete
2012/11/14 00:09:02| Processing: request_header_access Allow allow all 
2012/11/14 00:09:02| Processing: request_header_access Authorization allow all 
2012/11/14 00:09:02| Processing: request_header_access WWW-Authenticate allow all 
2012/11/14 00:09:02| Processing: request_header_access Proxy-Authorization allow all 
2012/11/14 00:09:02| Processing: request_header_access Proxy-Authenticate allow all 
2012/11/14 00:09:02| Processing: request_header_access Cache-Control allow all 
2012/11/14 00:09:02| Processing: request_header_access Content-Encoding allow all 
2012/11/14 00:09:02| Processing: request_header_access Content-Length allow all 
2012/11/14 00:09:02| Processing: request_header_access Content-Type allow all 
2012/11/14 00:09:02| Processing: request_header_access Date allow all 
2012/11/14 00:09:02| Processing: request_header_access Expires allow all 
2012/11/14 00:09:02| Processing: request_header_access Host allow all 
2012/11/14 00:09:02| Processing: request_header_access If-Modified-Since allow all 
2012/11/14 00:09:02| Processing: request_header_access Last-Modified allow all 
2012/11/14 00:09:02| Processing: request_header_access Location allow all 
2012/11/14 00:09:02| Processing: request_header_access Pragma allow all 
2012/11/14 00:09:02| Processing: request_header_access Accept allow all 
2012/11/14 00:09:02| Processing: request_header_access Accept-Charset allow all 
2012/11/14 00:09:02| Processing: request_header_access Accept-Encoding allow all 
2012/11/14 00:09:02| Processing: request_header_access Accept-Language allow all 
2012/11/14 00:09:02| Processing: request_header_access Content-Language allow all 
2012/11/14 00:09:02| Processing: request_header_access Mime-Version allow all 
2012/11/14 00:09:02| Processing: request_header_access Retry-After allow all 
2012/11/14 00:09:02| Processing: request_header_access Title allow all 
2012/11/14 00:09:02| Processing: request_header_access Connection allow all 
2012/11/14 00:09:02| Processing: request_header_access Proxy-Connection allow all 
2012/11/14 00:09:02| Processing: request_header_access User-Agent allow all 
2012/11/14 00:09:02| Processing: request_header_access Cookie allow all 
2012/11/14 00:09:02| Processing: request_header_access All deny all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T14:29:06.550

请记住，dns_v4_first on 仅适用于较新的 squid3 版本。例如，如果你运行一个 debian6 服务器，你有 squid3-3.1.6，它没有这个配置开关。

对于那些旧版本，您必须编辑配置行

```
tcp_outgoing_address SERVERIP all 
```

其中 SERVERIP 是您的服务器的 IP。

# google-app-engine - App Engine JDO 通过存储的密钥延迟加载对象

> ID：12633889
> 
> 赞同：0
> 
> 时间：2012-09-28T05:05:31.277
> 
> 标签：google-app-engine, jdo

因此，当我加载偶数对象时，我无法加载场地和艺术家对象。基本上，当我创建一个活动时，我会加载特定的艺术家和特定的场地，并将密钥保存在活动的艺术家密钥和场地密钥字段中。但是，当我加载时，它始终为空。我已经在我的场地和艺术家上尝试了注释“@Persistent(defaultFetchGroup = "true")" 和 "@Persistent(mappedBy = "venue") @Element(dependent = "true")"，但艺术家/场地仍然没有运气当我加载一个事件时显示为空（键在那里）。当我尝试使用 defaultFetchGroup 时，它说如果它已经被持久化，我将无法加载父级，我猜这是有道理的。

```
 public class Event {

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key id; 

@Persistent
private Key artistKey;

@Persistent
private Key venueKey;

private Artist artist;

private Venue venue;

//other fields

//getters and setters

}

@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class Venue { 

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key id;

//other fields

//getters and setters

}

@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class Artist { 

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key id;

//other fields

//getters and setters
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:12:55.233

对于关系（在 GAE 中），您必须注意它们是拥有的（与拥有对象一起存储在数据存储中）还是非拥有的（就像它们在所有其他数据存储中一样）。如果是后者，您可以将关系标记为@Unowned。GAE 对影响这一点的实体组有一些限制 - 请参阅他们的文档

# android - 用于删除目的的带有复选框的列表视图

> ID：12633894
> 
> 赞同：0
> 
> 时间：2012-09-28T05:05:55.823
> 
> 标签：android, android-listview

我想在 listview 中实现删除功能。我希望它像大多数常见的 android 应用程序（如电子邮件客户端..等）。我的意思是，当您单击删除按钮时，列表将包含复选框，您可以在其中检查然后继续删除。

我有我的列表视图，但我不确定复选框将如何显示（并将响应点击而不是整个项目响应点击），有任何指针吗？我想在我继续重新发明轮子或将头撞到墙上之前，我会先问你。

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:12:47.757

您可以在列表视图中包含复选框`row.xml`并将其设置`Visibility`为`GONE`，然后当您单击`Button`启用所有`CheckBoxes`设置的布尔值 true 并引用`ListView`. 在布尔值的基础上，将逻辑`getView()`写成

```
if(deleted_button_clicked){
  checkboxes.setVisibility(View.VISIBLE);
}
else{
  checkboxes.setVisibility(View.GONE);
} 
```

进一步删除您必须获取选中的项目并从 ListView 中删除数据并再次刷新 ListView。

**更新**

进一步你可以看看我的博客关于[`ListView with CheckBox`](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:21:50.163

在列表视图中放置一个复选框是一项乏味的工作。我遇到了其中的一些问题，当我找到可行的解决方案时，我将其发布在[这里](https://stackoverflow.com/questions/11190390/checking-a-checkbox-in-listview-makes-other-random-checkboxes-checked-too)。除了删除部分之外，它拥有一切。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T05:13:48.707

使用您的 listView，您可以设置以下...

```
listView.setChoiceMode(CHOICE_MODE_MULTIPLE);
listView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice, fields)); 
```

[请参阅此处](http://www.mubasheralam.com/tutorials/android/how-create-multiple-choice-list)的工作示例

# jquery - 为什么jquery plusslider在google chrome中不起作用但在firefox中起作用

> ID：12633898
> 
> 赞同：0
> 
> 时间：2012-09-28T05:06:12.900
> 
> 标签：jquery, jquery-plugins, slider

我正在使用 jquery plusslider，但问题是它在 Firefox 中工作正常，但滑块在谷歌浏览器中不起作用。同样，每当我将滑块类型用作推子时，滑块在两者中都可以正常工作，但我想将滑块类型用作滑块并且它不工作。问题是什么。提前感谢您的任何帮助/建议和您的时间。谢谢你..

```
$(document).ready(function() {
    $('#slider').plusSlider({ 
        sliderEasing: 'easeInOutExpo', // Anything other than 'linear' and 'swing' requires the easing plugin
        paginationBefore: true,
        createArrows: true,
        width: 1920,
        height:580,
        sliderType: 'slider', // Choose whether the carousel is a 'slider' or a 'fader'
        displayTime: 5000
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:34:46.237

请参阅**[编辑](http://jsfiddle.net/h2je6/)**它将在 Chrome 中工作

```
$('#slider').plusSlider({
        sliderEasing: 'easeInOutExpo', // Anything other than 'linear' and 'swing' requires the easing plugin
        paginationThumbnails: true,
        sliderType: 'slider' // Choose whether the carousel is a 'slider' or a 'fader'
    });​ 
```

你错过了最后`});`

# c# - 优雅处理任务取消

> ID：12633903
> 
> 赞同：39
> 
> 时间：2012-09-28T05:06:41.527
> 
> 标签：c#, exception, task-parallel-library

在将任务用于需要能够取消的大型/长时间运行的工作负载时，我经常使用与此类似的模板来执行任务的操作：

```
public void DoWork(CancellationToken cancelToken)
{
    try
    {
        //do work
        cancelToken.ThrowIfCancellationRequested();
        //more work
    }
    catch (OperationCanceledException)
    {
        throw;
    }
    catch (Exception ex)
    {
        Log.Exception(ex);
        throw;
    }
} 
```

如果任务要转换到取消状态，`OperationCanceledException`则不应将其记录为错误，但不得吞下。任何其他异常都不需要处理，超出本方法的范围。

这总是感觉有点笨拙，默认情况下，Visual Studio 会在抛出时中断（尽管由于我使用了这种模式，我`OperationCanceledException`现在关闭了“用户未处理中断” ）。`OperationCanceledException`

更新：现在是 2021 年，C#9 给了我一直想要的语法：

```
public void DoWork(CancellationToken cancelToken)
{
    try
    {
        //do work
        cancelToken.ThrowIfCancellationRequested();
        //more work
    }
    catch (Exception ex) when (ex is not OperationCanceledException)
    {
        Log.Exception(ex);
        throw;
    }
} 
```

~~理想情况下，我想我希望能够做这样的事情：

```
public void DoWork(CancellationToken cancelToken)
{
    try
    {
        //do work
        cancelToken.ThrowIfCancellationRequested();
        //more work
    }
    catch (Exception ex) exclude (OperationCanceledException)
    {
        Log.Exception(ex);
        throw;
    }
} 
```~~ 即对捕获应用了某种排除列表，但没有当前不可能的语言支持（@eric-lippert：c# vNext 功能:)）。

另一种方法是通过延续：

```
public void StartWork()
{
    Task.Factory.StartNew(() => DoWork(cancellationSource.Token), cancellationSource.Token)
        .ContinueWith(t => Log.Exception(t.Exception.InnerException), TaskContinuationOptions.OnlyOnFaulted | TaskContinuationOptions.ExecuteSynchronously);
}

public void DoWork(CancellationToken cancelToken)
{
    //do work
    cancelToken.ThrowIfCancellationRequested();
    //more work
} 
```

但我真的不喜欢这样，因为从技术上讲，异常可能有多个内部异常，并且在记录异常时没有像在第一个示例中那样多的上下文（如果我做的不仅仅是记录它）。

我知道这是一个风格问题，但想知道是否有人有更好的建议？

我只需要坚持示例1吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T05:39:19.627

所以有什么问题？只需扔掉`catch (OperationCanceledException)`块，并设置适当的延续：

```
var cts = new CancellationTokenSource();
var task = Task.Factory.StartNew(() =>
    {
        var i = 0;
        try
        {
            while (true)
            {
                Thread.Sleep(1000);

                cts.Token.ThrowIfCancellationRequested();

                i++;

                if (i > 5)
                    throw new InvalidOperationException();
            }
        }
        catch
        {
            Console.WriteLine("i = {0}", i);
            throw;
        }
    }, cts.Token);

task.ContinueWith(t => 
        Console.WriteLine("{0} with {1}: {2}", 
            t.Status, 
            t.Exception.InnerExceptions[0].GetType(), 
            t.Exception.InnerExceptions[0].Message
        ), 
        TaskContinuationOptions.OnlyOnFaulted);

task.ContinueWith(t => 
        Console.WriteLine(t.Status), 
        TaskContinuationOptions.OnlyOnCanceled);

Console.ReadLine();

cts.Cancel();

Console.ReadLine(); 
```

TPL 区分取消和故障。因此，取消（即`OperationCancelledException`在任务主体内抛出）*不是故障*。

要点：**不要**在不重新抛出异常的情况下处理任务主体内的异常。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-04T21:53:58.577

以下是您如何优雅地处理任务取消：

## 处理“即发即弃”任务

```
var cts = new CancellationTokenSource( 5000 );  // auto-cancel in 5 sec.
Task.Run( () => {
    cts.Token.ThrowIfCancellationRequested();

    // do background work

    cts.Token.ThrowIfCancellationRequested();

    // more work

}, cts.Token ).ContinueWith( task => {
    if ( !task.IsCanceled && task.IsFaulted )   // suppress cancel exception
        Logger.Log( task.Exception );           // log others
} ); 
```

## 处理 await 任务完成/取消

```
var cts = new CancellationTokenSource( 5000 ); // auto-cancel in 5 sec.
var taskToCancel = Task.Delay( 10000, cts.Token );  

// do work

try { await taskToCancel; }           // await cancellation
catch ( OperationCanceledException ) {}    // suppress cancel exception, re-throw others 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-02T03:50:28.143

C# 6.0 对此有一个解决方案..[过滤异常](http://csharp.2000things.com/2014/11/05/1219-c-6-0-filtering-exceptions/)

```
int denom;

try
{
     denom = 0;
    int x = 5 / denom;
}

// Catch /0 on all days but Saturday

catch (DivideByZeroException xx) when (DateTime.Now.DayOfWeek != DayOfWeek.Saturday)
{
     Console.WriteLine(xx);
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-06-11T13:23:20.217

你可以这样做：

```
public void DoWork(CancellationToken cancelToken)
{
    try
    {
        //do work
        cancelToken.ThrowIfCancellationRequested();
        //more work
    }
    catch (OperationCanceledException) when (cancelToken.IsCancellationRequested)
    {
        throw;
    }
    catch (Exception ex)
    {
        Log.Exception(ex);
        throw;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-08T02:41:06.240

根据[this MSDN blog post](https://blogs.msdn.microsoft.com/andrewarnottms/2014/03/19/recommended-patterns-for-cancellationtoken/)，您应该了解`OperationCanceledException`，例如

```
async Task UserSubmitClickAsync(CancellationToken cancellationToken)
{
   try
   {
      await SendResultAsync(cancellationToken);
   }
   catch (OperationCanceledException) // includes TaskCanceledException
   {
      MessageBox.Show(“Your submission was canceled.”);
   }
} 
```

如果您的可取消方法介于其他可取消操作之间，您可能需要在取消时执行清理。这样做时，你可以使用上面的 catch 块，但一定要正确地重新抛出：

```
async Task SendResultAsync(CancellationToken cancellationToken)
{
   try
   {
      await httpClient.SendAsync(form, cancellationToken);
   }
   catch (OperationCanceledException)
   {
      // perform your cleanup
      form.Dispose();

      // rethrow exception so caller knows you’ve canceled.
      // DON’T “throw ex;” because that stomps on 
      // the Exception.StackTrace property.
      throw; 
   }
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-28T05:39:09.390

我不完全确定您要在这里实现什么，但我认为以下模式可能会有所帮助

```
public void DoWork(CancellationToken cancelToken)
{
    try
    {
        //do work
        cancelToken.ThrowIfCancellationRequested();
        //more work
    }
    catch (OperationCanceledException) {}
    catch (Exception ex)
    {
        Log.Exception(ex);
    }
} 
```

你可能已经注意到我已经从这里删除了 throw 语句。这不会抛出异常，只会忽略它。

如果您打算做其他事情，请告诉我。

还有另一种方式非常接近您在代码中展示的内容

```
 catch (Exception ex)
    {
        if (!ex.GetType().Equals(<Type of Exception you don't want to raise>)
        {
            Log.Exception(ex);

        }
    } 
```

# angularjs - AngularJS - $resource 获取和发布的不同 URL

> ID：12633904
> 
> 赞同：23
> 
> 时间：2012-09-28T05:06:44.957
> 
> 标签：angularjs

$resource 非常棒，它提供了非常方便的方式来处理 Web 服务。如果 GET 和 POST 必须在不同的 URL 上执行怎么办？

例如，GET URL`http://localhost/pleaseGethere/:id` 和 POST URL`http://localhost/pleasePosthere`不带任何参数

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-04-17T06:13:43.013

使用 [actions] 的 'url' 属性覆盖默认 url。

```
$resource(url, [paramDefaults], [actions], options); 
```

例如：

```
$resource('http://localhost/pleaseGethere/:id',{},{
    getMethod:{
        method:'GET',
        isArray:true
    }
    postMethod:{
        url:'http://localhost/pleasePosthere',
        method:'POST',
        isArray:false
    }
} 
```

Angular $resource 的使用：http: [//docs.angularjs.org/api/ngResource/service/$resource](http://docs.angularjs.org/api/ngResource/service/$resource)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-01T19:50:53.617

您应该能够将 URL 作为参数公开。我能够做到这一点：

```
$provide.factory('twitterResource', [
    '$resource',
    function($resource) {
        return $resource(
            'https://:url/:action',
            {
                url: 'search.twitter.com',
                action: 'search.json',
                q: '#ThingsYouSayToYourBestFriend',
                callback: 'JSON_CALLBACK'
            },
            {
                get: {
                    method: 'JSONP'
                }
            }
        );
    }
]); 
```

然后，您可以覆盖`GET`通话中的 URL。

我在真正简短的测试中发现的一个警告是，如果我`http://`在 URL 字符串中包含它，它就不起作用。我没有收到错误消息。它什么也没做。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-05T18:06:49.593

如果将带有参数名称的哈希添加到 $resource 调用中：

```
$resource('localhost/pleaseGethere/:id', {id: '@id'}); 
```

然后 :id 将在调用函数时映射到*id*参数（这将调用*GET localhost/pleaseGethere/123*）：

```
Resource.get({id: 123}); 
```

对于 POST，您只需不分配*id*参数：

```
Resource.post({}, {name: "Joe"}); 
```

将调用正确的 URL，在本例中为*POST localhost/pleaseGethere*（尾部斜杠被 ngResource 剥离）。

有关详细信息，请参阅[http://docs.angularjs.org/api/ngResource.$resource](http://docs.angularjs.org/api/ngResource.%24resource) -> 示例 -> 信用卡资源。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-17T03:08:20.157

除了 Iris Wong 的回答之外，我还想举一个具有多个方法和动作的多个参数的示例：

```
angular
  .module('thingApp')
  .factory('ThingResource', ['$resource', '$state',  returnThing]); 
```

和资源：

```
function returnThing($resource, $state) {
  var mainUrl = '/api/stuffs/:stuffId/thing'
  var params = {stuffId: '@_id', thingMongoId: '@_id', thingNumber: '@_id'}
  return $resource(mainUrl, params, {
    'save': {
      url: '/api/stuffs/:stuffId/thing/:thingMongoId',
      method: 'POST',
      interceptor: {
        responseError: function(e) {
          console.warn('Problem making request to backend: ', e)
          $state.go('oops')
        }
      }
    },
    'get': {
      url: '/api/stuffs/:stuffId/thing/:thingMongoId',
      method: 'GET',
      interceptor: {
        responseError: function(e) {
          console.warn('Problem making request to backend: ', e)
          $state.go('oops')
        }
      }
    },
    'assignThing':{
      method: 'POST',
      url: '/api/stuffs/:stuffId/thing/assign/:thingNumber'
    }
  });
} 
```

它提供了 3 种不同的方法：

```
// POST to http://currnt_base_url/api/stuffs/:stuffId/thing/:thingMongoId
ThingResource.save({
    stuffId:'56c3d1c47fe68be29e0f7652', 
    thingMongoId: '56c3d1c47fe6agwbe29e0f11111'})

// GET to current http://currnt_base_url/api/stuffs/:stuffId/thing/:thingMongoId
ThingResource.get({
    stuffId:'56c3d1c47fe68be29e0f7652', 
    thingMongoId: '56c3d1c47fe6agwbe29e0f11111'})

// POST to http://currnt_base_url/api/stuffs/:stuffId/thing/assign/:thingNumber
ThingResource.assignThing({
    stuffId:'56c3d1c47fe68be29e0f7652', 
    thingNumber: '999998'}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-09T19:38:20.140

按照这种方式：

```
(function () {
    'use strict';

    angular
        .module("app")
        .factory("SomeFactory", SomeFactory);

    function SomeFactory($resource) {
        var provider = "http://stackoverflow.com/:action/:id";
        var params = {"id":"@id"};
        var actions = {
            "create":   {"method": "POST",  "params": {"action": "CreateAwesomePost"}},
            "read":     {"method": "POST",  "params": {"action": "ReadSomethingInteresting"}},
            "update":   {"method": "POST",  "params": {"action": "UpdateSomePost"}},
            "delete":   {"method": "GET",   "params": {"action": "DeleteJustForFun"}}
        };

        return $resource(provider, params, actions);
    }
})(); 
```

我希望它有帮助！享受！

# database - Oracle 快照不工作

> ID：12633906
> 
> 赞同：1
> 
> 时间：2012-09-28T05:07:14.800
> 
> 标签：database, oracle

我创建了一个从 2 个表中获取数据并且刷新率为 1 天的快照。快照数据没有刷新它仍然是一样的。有什么我想念的吗？

这是代码：

```
 CREATE SNAPSHOT test
 REFRESH COMPLETE
        START WITH SYSDATE 
        NEXT sysdate + 1
AS
select item_code,item_conc_code,tran_bran_code,sum(tran_qty) bal_qty
from tranhist a,
     itemmast b
where a.tran_item_code = b.item_code
group by item_code,item_conc_code,tran_bran_code 
```

# c# - 将反射方法转换为已编译的 lambda

> ID：12633907
> 
> 赞同：2
> 
> 时间：2012-09-28T05:07:15.950
> 
> 标签：c#, reflection, lambda

我是 lambda 新手。如果我的问题很简单，请原谅。

我有一个使用反射来设置某些类型的属性的方法：

```
public void WriteId(object obj, int id) {
    var type = obj.GetType();
    var prop = type.GetProperties(BindingFlags.Public | BindingFlags.Instance)
                   .Where(p => p.CanRead && p.CanWrite)
                   .Where(p => p.Name == "Id")
                   .Where(p.PropertyType == typeof(int))
                   .FirstOrDefault();
    if(prop != null)
        prop.SetValue(obj, id, null);
} 
```

你能告诉我如何创建一个做同样工作的 lambda 吗？实际上我想为每种类型创建一个 lambda，编译它，然后缓存它。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T05:15:56.503

我会从 NuGet 安装[FastMember](http://nuget.org/packages/FastMember)，然后使用：

```
var wrapped = ObjectAccessor.Create(obj);
obj["Id"] = id; 
```

这几乎与您所说的一样，除了它碰巧使用`ILGenerator`via `TypeBuilder`（而不是`Expression`） - 但所有缓存等都在那里。

第二种卑鄙的方法是`dynamic`为你做这一切：

```
((dynamic)obj).Id = id; 
```

但是如果你想使用`Expression`其他原因：

```
using System;
using System.Linq.Expressions;   

static class Program
{
    static void Main()
    {
        var obj = new Foo { Id = 2 };
        WriteId(obj, 6);
        Console.WriteLine(obj.Id); // 6
    }

    private static class SneakyCache<T>
    {
        public static readonly Action<T, int> SetId;
        static SneakyCache()
        {
            var obj = Expression.Parameter(typeof(T), "obj");
            var id = Expression.Parameter(typeof(int), "id");
            SetId = Expression.Lambda<Action<T, int>>(
                  Expression.Assign(Expression.Property(obj, "Id"), id),
                  obj, id).Compile();
        }
    }
    public static void WriteId<T>(T obj, int id) where T : class
    {
        SneakyCache<T>.SetId(obj, id);
    }
}
class Foo
{
    public int Id { get; set; }
} 
```

# java - Spring - 如何在视图之间传递消息？

> ID：12633916
> 
> 赞同：2
> 
> 时间：2012-09-28T05:08:43.707
> 
> 标签：java, spring, controller

我有一个显示、编辑和删除帐户的应用程序。

1.  **显示**使用`displayAccounts.jsp`并被`/accounts`url调用
2.  **编辑**使用`editAccount.jsp`并由要编辑的帐户的主键在`/accounts/{id}/edit`哪里调用。`id`
3.  **Delete**没有自己的视图，只是调用`@RequestMapping`Controller中的方法，并由`/accounts/{id}/delete`

成功后，每个操作都会重定向到“显示”页面。

1.  成功执行操作（编辑/删除）后，我想发送一条成功消息，该消息可以显示在“显示”页面上。我怎样才能做到这一点？

2.  由于我没有删除操作的视图，因此我也想在显示页面中显示错误。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T07:57:56.840

使用`RedirectAttributes`是您实现这一目标所需要的。我假设从 EDIT 和 DELETE 操作的 POST 方法中，您使用“redirect:”通过其控制器重定向到 DISPLAY 视图。

为此，您需要`RedirectAttributes attributes`在控制器功能中作为参数。然后在 return 语句之前，您应该添加以下代码行。

```
attributes.addFlashAttribute("successMsg", "Account Edit/Delete successfully"); 
```

或者

```
attributes.addFlashAttribute("errorMsg", "Edit/Delete account is unsuccessful"); 
```

如果出现错误消息。

然后在**displayAccounts.jsp**页面上，您只需要使用`${successMsg}`或显示消息`${errorMsg}`

一旦显示消息，如果您刷新页面，则该消息将不会出现。它只会向用户显示一次。

这非常适合您的场景。即使我用这个。

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T05:27:36.563

如果您的**EDIT**操作打开不同的视图，那么您可以使用以下命令将消息从 Controller 传递到视图

```
ModelAndView  mav = new ModelAndView(); 
```

然后将消息对象设置为

```
mav.addObject("message", "EDIT sucessfully completed"); 
```

最后，设置视图名称

```
mav.setViewName("views/afterEditOperation/"); 
```

您可以直接在视图上使用消息作为**${mesasage}**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T05:35:48.660

在编辑和删除方法的控制器方法中，将消息字符串写入模型中

编辑

```
model.addAttribute("message", "Record Edited Sucessfully");
model.addAttribute("accountList", accountList); 
```

删除

```
model.addAttribute("accountList", accountList);
model.addAttribute("message", "Record Deleted Sucessfully"); 
```

并在您的 displayAccounts.jsp 中编写代码以将此消息显示为

```
<div>
  <span>${message}</span>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T05:14:34.250

在这种情况下，您可以使用**AJAX 。**有了这个，您可以将您的操作从同一页面发送到**控制器**进行删除操作，并从同一页面上的控制器获取消息以显示控制器删除操作的成功/错误消息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T05:33:54.030

如果您想从控制器传递一些消息（错误/成功）以显示页面，而不是下面的代码帮助，

```
@Controller
@RequestMapping("/controllerPath")
public class editDeleteController {

    @RequestMapping(method = RequestMethod.GET)
public String methodName(ModelMap model) { 
        model.addAttribute("message", "Message1");
                model.addAttribute("moremessage", "Message2");
        return "viewName";//veiwName here in your case it is displayPage 
    }
} 
```

在显示页面你会得到它，

```
<h1>Message : ${message}</h1> 
```

如果这对您不起作用，请详细说明。

谢谢

* * *

好吧，我想我明白了你的意思，做一些这样的想法，

```
@RequestMapping(method = RequestMethod.GET)
    public String editDelete(ModelMap model) {

        if(success)
        {
            model.addAttribute("result", "Success");
            return new ModelAndView("redirect:/displaytagView");//Chaining your controller so it will refresh your Accounts
        }else{
            model.addAttribute("result", "Error");
                        return "displayPage";
        }
    } 
```

将控制器链接到 displayPage 控制器，以便显示刷新的数据。试试这个希望它的工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T05:34:23.857

Spring 提供了 ModelMap 类型的对象，你可以把你的数据放在 ModelMap 类型的对象中。这个对象在整个应用程序中都是可以访问的。在这里，您可以放置​​一个 String 类型的变量，其值为 Success 或 Failure（基于条件）。稍后您可以从 jsp 页面访问此模型对象。这里是示例。

```
 @RequestMapping(value="/accounts/{id}/edit ")
 //  public String yourMethod(ModelMap model)
public String yourMethod(HttpServletRequest request,
      HttpServletResponse response,ModelMap model){
   if(someCondition){
     String result = "Success";
    model.addAttribute("result", result);
    }
      else{
          String result="failure";
          model.addAttribute("result", result);
        }
        // return "displayAccounts";
       return new YourControllerClass().yourMethodforAccountDisplay(request, response,model);//this is where you specify account display method with appropriate argument
   } 
```

您可以从 jsp 页面访问结果，如下所示 -

```
 ${result} 
```

请在 Spring 配置文件中启用 viewresolver。

# c - sqlite3_open 如何确定文件数据库是否是新创建的？

> ID：12633919
> 
> 赞同：2
> 
> 时间：2012-09-28T05:09:15.640
> 
> 标签：c, sqlite

sqlite3的新手。

如果我的理解有误，请纠正我？

sqlite3_open ( 文件名, &dbConnection) ->

```
1) This API creates an database [ie: filename], if it does not exists, and sets
the context to dbConnection. 
2) If the database exists already it just sets the context to dbConnection. 
```

情况 (1) 和 (2) 都返回 SQLITE_OK。

问题：如果数据库是第一次创建的，现在是否有可能过滤？

例如： sqlite3_open (... ) if (第一次创建数据库) { create table }

一种可能性是检查文件是否存在，但我不想这样做。sqlite3本身的任何替代方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:13:23.000

如果不存在语法，您可以使用创建表。

![Sqlite 创建表](../Images/2a78e02d578f1c4df3bb9da858ee5ce2.png)

# jquery - JQuery 中的 window.click 事件问题

> ID：12633929
> 
> 赞同：0
> 
> 时间：2012-09-28T05:10:49.037
> 
> 标签：jquery, asp.net, dom, dopostback

我有一个常见的场景，当单击窗口时会关闭弹出 div。我使用的代码是

```
 $(window).load(function (){
   $('.popupstyle').live("click", function(e){
       return false;
    });
    });
   $(document).ready(function(){
   $(window).click(function(){
   $('.popupstyle').hide();
    });
  }); 
```

但问题是没有像 LinkBut​​ton 这样的控件的回发事件正在弹出 div 上工作。在弹出 div 的单击事件中返回 false 会产生问题。它融合了弹出 div 上的所有内容。不明白如何解决一件事会干扰另一件事。现场活动也不适用于第一次点击。有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:37:57.240

@sushanth 是对的。这是因为事件冒泡，这是一个重要的核心 js 概念。`$('.popupstyle').live("click"`虽然在有 2 个侦听器 ( , )的情况下它会绊倒你，`$(window).click`但我们也可以利用冒泡来发挥我们的优势，并使用单个侦听器 ( `$(window).click`) 执行相同的任务。

```
 $(window).click(function(e){
       if( ! $(e.target).hasClass('popupstyle') ){ $('.popupstyle').hide(); } 
  }); 
```

[演示](http://jsfiddle.net/2Wg3e/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:16:25.467

原因是事件冒泡，子元素的事件冒泡到父元素。

防止这种情况的一种方法是在遇到目标元素时使用**e.stopPropagation()**

[检查小提琴](http://jsfiddle.net/sushanth009/5PZdh/)

# java - Hibernate 工具 Pojo Generation 默认使用 Set

> ID：12633935
> 
> 赞同：1
> 
> 时间：2012-09-28T05:11:11.817
> 
> 标签：java, hibernate, jpa-2.0, hibernate-tools

Hibernate 工具 Pojo Generation 默认使用 java.util.Set。我想用 java.util.List 而不是 java.util.Set 生成 POJO。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:22:48.170

如果您使用的是 HBM 文件，则可以使用`<bag>`或`<list>`代替`<set>`

查看 Hibernate 文档：[http ://docs.jboss.org/hibernate/core/3.5/reference/en/html/collections.html#collections-mapping](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/collections.html#collections-mapping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:55:02.207

实际上，Hibernate 在您的数据库结构上创建映射。我有没有索引列的一对多映射，因此它生成“Set”，这对于非索引的一对多映射是正确的。

# wpf - 在地铁应用程序中选择sqlite的查询？

> ID：12633936
> 
> 赞同：0
> 
> 时间：2012-09-28T05:11:17.977
> 
> 标签：wpf, sqlite, select, windows-8, microsoft-metro

我已经看到很多描述在 Metro 应用程序中使用 SQLite 的示例。大多数示例都有 Orderby/Insert/Delete 语句。我可以知道如何使用 Select 语句从预先填充的数据库中获取数据吗？

其次，有人在查询执行后如何将数据存储到数组或arrayList中？

请帮我解决这个问题，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:18:02.247

看看这个例子是否是你要找的：

```
return db.runAsync('SELECT * FROM Table'); 
```

[这是一篇非常有用的文章。](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)

将示例扩展到 C#：

```
SQLiteAsyncConnection conn = new SQLiteAsyncConnection("people");
var query = conn.Table<Person>().Select();
var result = await query.ToListAsync(); 
```

# iphone - Xcode 4.3 中的标头搜索路径是什么？如何使用它？

> ID：12633939
> 
> 赞同：1
> 
> 时间：2012-09-28T05:11:36.993
> 
> 标签：iphone, objective-c, ios, ipad

我想将一个现有项目添加到我的新项目中。我已经添加了是否使用“将文件添加到”项目“。当我要`.h`在我的新`.h`文件中导入它的文件时。它说找不到文件。我试图在搜索路径的标题搜索路径中添加头文件的路径。但我不知道怎么做。

*   我必须在标题搜索路径中添加哪个路径？
*   什么是标头搜索路径中的递归？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:05:26.183

假设您已经包含了第三方库或文件说“JSONKit”，其路径在项目文件夹之外并已添加到您的项目中，那么您必须在标题搜索路径中指定该特定文件夹路径，否则您将收到错误。下面就是一个例子

![在此处输入图像描述](../Images/f4a1ac9908b63bcbb52f653d5208d3f9.png)

# extjs - 如何使用 extjs 将两个图表组合在一个窗口的一行中？

> ID：12633941
> 
> 赞同：0
> 
> 时间：2012-09-28T05:12:00.877
> 
> 标签：extjs

我在一个窗口中有四个图表。它们在一列中一个接一个地显示。我怎样才能有两列，每列包含两个图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:59:42.937

简单的例子：

```
var panel = Ext.create('Ext.Panel', {
    width: 600,
    height: 500,
    title: 'Line Chart',
    renderTo: Ext.getBody(),
    layout: 'column',
    items:[{
        height: 500,
        columnWidth:.5,
        items:[{
            height:250,
            layout:'fit',    
            items:createChart()
        },{
            height:250,
            layout:'fit',    
            items:createChart()
        }]
    },{
        height: 500,
        columnWidth:.5,
        items:[{
            height:250,
            layout:'fit',    
            items:createChart()
        },{
            height:250,
            layout:'fit',    
            items:createChart()
        }]
    }]
}); 
```

示例的其余部分：http: [//jsfiddle.net/fc8wQ/](http://jsfiddle.net/fc8wQ/)

# java - 如何将任意元数据保存和读取到android上的图像

> ID：12633945
> 
> 赞同：1
> 
> 时间：2012-09-28T05:12:36.823
> 
> 标签：java, android

> **可能重复：**
> [可以将自定义元数据添加到 Android 中的图像吗？](https://stackoverflow.com/questions/4080844/can-a-custom-metadata-be-added-to-an-image-in-android)

我试过了，`ExifInterface`但没有用。我观察到，在调用`ExifInterface.setAttribute()`我的文件大小后，我的文件大小增加了，但不确定是否`ExifInterface.setAttribute()`真的在我的目标文件上写了一些东西。

这是代码片段：-

```
ExifInterface exif = new ExifInterface(getPath(selectedImage));
exif.setAttribute("myAttribute", "myValue");
exif.saveAttributes();
ExifInterface exif1 = new ExifInterface(getPath(selectedImage));
Log.d("Company", exif1.getAttribute("myAttribute"));  <----- Getting NPE as exif1.getAttribute("myAttribute") returns null 
```

有没有另一种方法来添加/获取自定义元数据。

# ios - 单击按钮时加载 UIWebView

> ID：12633946
> 
> 赞同：0
> 
> 时间：2012-09-28T05:12:39.287
> 
> 标签：ios

```
-(IBAction)loadWebView
{
  NSString * url = [NSString stringWithFormat:@"%@", [_urlArray objectAtIndex:_urlInt] ];
  NSLog(@"_urlInt: %d",_urlInt);
  NSLog(@"get url: %@",url);
  //[self.webView loadRequest:[NSURLRequest requestWithURL:[ NSURL URLWithString: url ] ] ];
  [self.webView loadRequest:[NSURLRequest requestWithURL:[ NSURL URLWithString:@"http://www.google.com"]]];
} 
```

以上是我在一个 iPad 项目中的代码。

当单击同一个 View Controller 上的按钮或单击不同 View Controller 上的表格行时会触发此方法。

当我单击表格的一行时，_urlArray 和 _urlInt 的值来自表格。我可以在此方法中获取 url，但无法重新加载 UIWebView。但是，当我将 url 修改为 google 主页并单击按钮时，该页面可以重新加载到 google.com。

我无法得到原因。有人可以教我吗？
谢谢...

# objective-c - 应该如何使用 Objective-C 在 iOS 中实现模型？

> ID：12633948
> 
> 赞同：4
> 
> 时间：2012-09-28T05:12:46.213
> 
> 标签：objective-c, ios, cocoa-touch, model-view-controller, model

> 编辑：虽然答案在教我一些东西，但我仍然不知道如何“实施”一个模型。谁能给我一个示例，说明如何创建一个简单的模型类，该模型类具有一些基本功能，可以调用 NSUserDefaults 或 JSON Web 调用，以及如何从我的任何视图控制器访问它？

我刚刚开始 iOS 开发，并且已经到了我的应用程序需要一个模型来与控制器之间的整体数据流交互的地步，但我不确定它们应该如何正确实现。

我知道视图在故事板中，控制器是与这些视图关联的类。

为应用程序实现中心模型的正确方法是什么？我是否创建一个类（即“MyModel.h/.m”）然后从我所有的视图控制器中导入它？

我还看到人们使用 UINavigationController->RootViewController 作为他们的模型，这可行吗？

我已经用谷歌搜索了这个问题并搜索了几个小时的堆栈溢出，但现在我求助于一个新问题。

> 编辑：虽然答案在教我一些东西，但我仍然不知道如何“实施”一个模型。谁能给我一个示例，说明如何创建一个简单的模型类，该模型类具有一些基本功能，可以调用 NSUserDefaults 或 JSON Web 调用，以及如何从我的任何视图控制器访问它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T06:15:24.887

在 iOS 中，`a model (MyModel class) is usually a subclass of NSObject or in the case of Core Data (an iOS framework that helps save data to a database locally on the device) NSManagedObject.`与任何模型对象一样，它包含实例变量和**getter/setter 方法**。大多数面向对象语言都有提供**封装**的机制，在 iOS 中，一个*属性*提供封装，关键字*synthesize*自动生成 getter 和 setter 方法。

`View is subclass from *UIView* which provides the capability for handling touch events and drawing.`**UIKit 框架**包含用于绘制典型界面元素 的类，例如表格（列表）、按钮、文本字段、滑块等。

`Controller is generally a subclass of **UIViewController** that manages a view,`它还负责响应委托消息和目标操作消息。您可以拥有一个 UITableViewController，它是管理**UITableView的****UIViewController的子类**

 **`TabBar and Navigation View Controllers`管理视图控制器数组，但 Navigation VC 将 VC 管理为“<code>stack”数据结构，并且`yes it is a viable usage`

请查看ios 苹果库资源中的[设计模式以供进一步参考，](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html)[这里](http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010443)是一个苹果示例代码，用于了解如何使用模型-视图-控制器设计模式创建网络应用程序

[本](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)教程教您如何开始使用**JSON**，尝试将 FB 集成到您的应用程序中，以了解 JSON 的乐趣和简单性

例如，开始在您的应用程序中 编码**NSUserDefault**

```
// create a standardUserDefaults variable
NSUserDefaults * standardUserDefaults = [NSUserDefaults standardUserDefaults];

// saving an NSString
[standardUserDefaults setObject:@"mystring" forKey:@"string"]; 
```

[这](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)是我开始的一个很好的教程..

快乐编码:)**

# c++ - 了解 std::accumulate

> ID：12633950
> 
> 赞同：46
> 
> 时间：2012-09-28T05:13:00.740
> 
> 标签：c++, stl, accumulate

我想知道为什么`std::accumulate`需要（又名减少）第三个参数。对于那些不知道是什么`accumulate`的人，它是这样使用的：

```
vector<int> V{1,2,3};  
int sum = accumulate(V.begin(), V.end(), 0);
// sum == 6 
```

调用`accumulate`等效于：

```
sum = 0;  // 0 - value of 3rd param
for (auto x : V)  sum += x; 
```

还有可选的第四个参数，允许用任何其他操作替换加法。

我听说的基本原理是，如果您需要说不要相加，而是将向量的元素相乘，我们需要其他（非零）初始值：

```
vector<int> V{1,2,3};
int product = accumulate(V.begin(), V.end(), 1, multiplies<int>()); 
```

但是为什么不像 Python 那样为 设置初始值`V.begin()`，并使用从 . 开始的范围`V.begin()+1`。像这样的东西：

```
int sum = accumulate(V.begin()+1, V.end(), V.begin()); 
```

这适用于任何操作。为什么根本需要第三个参数？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-02-18T19:38:39.773

您做出了一个错误的假设：该类型`T`与`InputIterator`.

但是`std::accumulate`是通用的，允许各种不同的创意积累和减少。

## 示例 #1：在员工之间累积工资

这是一个简单的例子：一个`Employee`类，有很多数据字段。

```
class Employee {
/** All kinds of data: name, ID number, phone, email address... */
public:
 int monthlyPay() const;
}; 
```

你不能有意义地“积累”一组员工。这是没有意义的; 它是未定义的。*但是，您可以定义有关*员工的累积。假设我们要汇总*所有*员工的*所有*月薪。可以这样做：*`std::accumulate`*

 *```
/** Simple class defining how to add a single Employee's
 *  monthly pay to our existing tally */
auto accumulate_func = [](int accumulator, const Employee& emp) {
   return accumulator + emp.monthlyPay();
 };

// And here's how you call the actual calculation:
int TotalMonthlyPayrollCost(const vector<Employee>& V)
{
 return std::accumulate(V.begin(), V.end(), 0, accumulate_func);
} 
```

所以在这个例子中，我们在`int`一个对象集合上累积一个值`Employee`。在这里，累积和与我们实际求和的变量类型不同*。*

## 示例 #2：累积平均值

您也可以`accumulate`用于更复杂的累积类型 - 可能想要将值附加到向量；也许您在输入中跟踪了一些神秘的统计数据；等等。你积累的不一定*只是*一个数字；它可以是更复杂的东西。

例如，这是一个简单的例子，`accumulate`用于计算整数向量的平均值：

```
// This time our accumulator isn't an int -- it's a structure that lets us
// accumulate an average.
struct average_accumulate_t
{
    int sum;
    size_t n;
    double GetAverage() const { return ((double)sum)/n; }
};

// Here's HOW we add a value to the average:
auto func_accumulate_average = 
    [](average_accumulate_t accAverage, int value) {
        return average_accumulate_t(
            {accAverage.sum+value, // value is added to the total sum
            accAverage.n+1});      // increment number of values seen
    };

double CalculateAverage(const vector<int>& V)
{
    average_accumulate_t res =
        std::accumulate(V.begin(), V.end(), average_accumulate_t({0,0}), func_accumulate_average)
    return res.GetAverage();
} 
```

## 示例 #3：累积运行平均值

您需要初始值的另一个原因是，该值并不*总是*您正在进行的计算的默认/中性值。

让我们建立在我们已经看到的平均示例的基础上。但是现在，我们想要一个可以保持*运行*平均值的类——也就是说，我们可以不断地输入新值，并在多个调用中检查*迄今为止的平均值。*

```
class RunningAverage
{
    average_accumulate_t _avg;
public:
    RunningAverage():_avg({0,0}){} // initialize to empty average

    double AverageSoFar() const { return _avg.GetAverage(); }

    void AddValues(const vector<int>& v)
    {
        _avg = std::accumulate(v.begin(), v.end(), 
            _avg, // NOT the default initial {0,0}!
            func_accumulate_average);
    }

};

int main()
{
    RunningAverage r;
    r.AddValues(vector<int>({1,1,1}));
    std::cout << "Running Average: " << r.AverageSoFar() << std::endl; // 1.0
    r.AddValues(vector<int>({-1,-1,-1}));
    std::cout << "Running Average: " << r.AverageSoFar() << std::endl; // 0.0
} 
```

在这种情况下，我们绝对依赖能够设置初始值`std::accumulate`——我们*需要*能够从不同的起点初始化累加。

* * *

总而言之，`std::accumulate`它适用于您在输入范围内迭代并在该范围内*建立*一个单一结果的任何时候。但是结果不需要与范围的类型相同，并且您不能对要使用的初始值做出任何假设——这就是为什么您必须有一个初始实例来用作累加结果的原因。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-28T05:24:19.050

事情就是这样，对于确定范围不为空并且想要从范围的第一个元素开始累积的代码来说，这很烦人。根据用于累积的操作，使用的“零”值并不总是很明显。

另一方面，如果您只提供一个需要非空范围的版本，那么对于不确定他们的范围不为空的调用者来说，这很烦人。给他们增加了额外的负担。

一种观点是，两全其美当然是同时提供两种功能。例如，Haskell 同时提供了`foldl1`and `foldr1`（需要非空列表）和`foldl`and `foldr`（镜像`std::transform`）。

另一种观点是，由于一个可以通过一个简单的转换根据另一个实现（正如您所展示的：`std::transform(std::next(b), e, *b, f)`--`std::next`是 C++11，但这一点仍然存在），因此最好使接口尽可能小它可以在没有真正丧失表达能力的情况下。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T05:16:53.830

因为标准库算法应该适用于任意范围的（兼容）迭代器。所以第一个参数`accumulate`不一定是`begin()`，它可以是介于`begin()`和 之前的任何迭代器`end()`。它也可以使用反向迭代器。

整个想法是将算法与数据分离。如果我理解正确，您的建议需要数据中的某种结构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-28T05:24:37.607

如果你`accumulate(V.begin()+1, V.end(), V.begin())`愿意，你可以写那个。但是如果你认为 v.begin() 可能是 v.end() （即 v 为空）怎么办？if`v.begin() + 1`没有实现怎么办（因为 v 只实现了 ++，没有泛型加法）？如果累加器的类型不是元素的类型怎么办？例如。

```
std::accumulate(v.begin(), v.end(), 0, [](long count, char c){
   return isalpha(c) ? count + 1 : count
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-13T11:46:35.437

确实不需要。我们的代码库有使用`T{}`值的 2 和 3 参数重载。

但是，`std::accumulate`已经很老了；它来自原始的 STL。我们的代码库有奇特的`std::enable_if`逻辑来区分“2 个迭代器和初始值”和“2 个迭代器和归约运算符”。这需要 C++11。我们的代码还使用尾随返回类型 ( `auto accumulate(...) -> ...`) 来计算返回类型，这是 C++11 的另一个特性。*

# php - 在主页上不显示“索引/”的 mod_rewrite 规则 - PHP

> ID：12633953
> 
> 赞同：1
> 
> 时间：2012-09-28T05:13:39.787
> 
> 标签：php, apache, .htaccess, mod-rewrite

我已经看过很多关于这个主题的文章，但我似乎无法让这件事像我想要的那样工作......

我有这个`.htaccess`文件：

```
RewriteEngine on
RewriteRule ^([^/]+)/$ $1.php 
```

一切似乎都很好。例如，当我去的时候

```
localhost/website 
```

内容来自

```
localhost/website/index.php 
```

被显示。这是意料之中的。我的链接在 PHP 中的变量中，如下所示：

```
$home = 'index/'
$contact = 'contact/' 
```

等等等等……

然后我转到其他链接，点击一下，然后点击主页链接，现在的 URL 是这样的：

```
localhost/website/index/ 
```

这是我的`href`观点，所以它是意料之中的......但我真的希望它是：

```
localhost/website 
```

那么我如何使用变量`$home = '';`而不是`$home = index/';`得到我想要的呢？我觉得我错过了应该放在`.htaccess`文件中的东西。

我想我还应该提到我的导航工作方式是我有一个 PHP 循环来检查当前页面，以保持其图形突出显示而不是不突出显示。

此循环检查页面变量，例如`$home`, `$contact`，如果它们等于充满页面变量的数组中的键值，则它使用突出显示的链接集：这具有您所在页面的浅色效果纽扣。

这里的问题是，对于索引页面，我正在使用`'index/'`但我想使用`''`，但这似乎不起作用。它在条件检查时有效，`'index/'`但在检查空字符串 ( `''`) 时无效。

**编辑**

以下是一些可能对我的案例有所帮助的附加代码片段：

```
// Navigation links
$home           =   '';
$contact_us     =   'contact/';

// Button array
$page_nav_lt = array(
$home           =>  $home_but_lt,
$contact_us     =>  $contact_but_lt
);

// Loop conditional (it's _alt below because it's a function in a class)
if ($current_page == $key) {
    $menu_output .= $image_dir . $ds . $page_nav_alt[$key];
    $menu_output .= '" id="alt" class="data-id-yes';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:23:34.433

您可以使用`$home = '';`，并将其添加到您的 .htaccess 中：

```
DirectoryIndex index.php index.html 
```

我以 index.html 为例，但您可以拥有任意数量的默认文件名，它会按顺序检查它们。

编辑：您可以将 home 测试为 ''，但`<a href="">`只会指向当前页面。通常要链接到主页，您会链接到“/”，它指向服务器的根目录。由于您的站点正在子目录中进行测试，因此您希望它是“/site/”。您可以通过将 $root 变量设置为 '/site' 来使您的链接在不同的环境中工作，然后在您将站点移动到根目录时将其更改为 ''。然后您的链接将看起来像“/site/”和“/site/contact”。

# php - 如何使用户名显示为蓝色

> ID：12633956
> 
> 赞同：-2
> 
> 时间：2012-09-28T05:14:01.410
> 
> 标签：php

如何使所有成员的用户名显示为蓝色，而不是用户级别为 1 的用户？这是我的代码：

```
This is the start of the php
 <?php $sql = "SELECT
        topic_id,
        topic_subject
    FROM
        topics
    WHERE
        topics.topic_id = " . mysql_real_escape_string($_GET['id']);

$result = mysql_query($sql);

if(!$result)
{
echo 'The topic could not be displayed, please try again later.';
}
else
{
if(mysql_num_rows($result) == 0)
{
    echo 'This topic doesn&prime;t exist.';
}
else
{
    while($row = mysql_fetch_assoc($result))
    {
        //display post data

        //fetch the posts from the database
        $posts_sql = "SELECT
                    posts.post_topic,
                    posts.post_content,
                    posts.post_date,
                    posts.post_by,
                    users.user_id,
                    users.user_name,
                    users.avatar,
                    users.user_date,
                    users.user_level,
                    users.forum_rank,
                    users.site_rank,
                    users.post,
                    users.signature

                FROM
                    posts
                LEFT JOIN
                    users
                ON
                    posts.post_by = users.user_id
                WHERE
                    posts.post_topic = " .     mysql_real_escape_string($_GET['id']);

        $posts_result = mysql_query($posts_sql);

        if(!$posts_result)
        {
            echo '<tr><td>The posts could not be displayed, please try again later.</tr></td></table>';
        }
        else
        {

            while($posts_row = mysql_fetch_assoc($posts_result))
            {

echo ' <br/>';
echo ' <div class="header" id="post11992">

<div class="reply">
    <div class="h3">
        <table class="replyheader">
            <tr>
                <td>
                    <img src="http://www.naruto-boards.com/images/forum/post_reply.gif" alt="" /> Posted on <b>';
                echo '' . date(" F j, Y, g:i A", strtotime($posts_row['post_date'])) . '';echo '</b>
                </td>   
                <td class="right">
<a href="/messages/send/sasy/">Message</a>
<a href="/forums/topic/31/20/quote/11992/#form">Quote</a>
<a href="/forums/topic/31/20/edit/11992/#form">Edit</a>

                </td>
            </tr>
        </table>        
    </div>
</div>
</div>';
echo '<table class="reply">
<tr>
    <td class="post_userinfo">';
///////////webaster
                if($_SESSION['user_level'] != 1 )
{
//the user is not an admin
echo '';
}
else
{ echo '            <a href="/index.php?area=profile&username=' .             $posts_row['user_name'] . '" class="topicuser_member"><font class="rank5">' .     $posts_row['user_name'] . '</font></a>';}

////////////////admin
if($_SESSION['user_level'] != 2 )
{
//the user is not an admin
echo '';
}
else
{ echo '            <a href="/index.php?area=profile&username=' .     $posts_row['user_name'] . '" class="topicuser_member"><font class="rank4">' . $posts_row['user_name'] . '</font></a>';}

////////////////GM
if($_SESSION['user_level'] != 3 )
{
//the user is not an admin
echo '';
}
else
{ echo '            <a href="/index.php?area=profile&username=' .     $posts_row['user_name'] . '" class="topicuser_member"><font class="rank3">' . $posts_row['user_name'] . '</font></a>';}

////////////////Mod
if($_SESSION['user_level'] != 4 )
{
//the user is not an admin
echo '';
}
else
{ echo '            <a href="/index.php?area=profile&username=' . $posts_row['user_name'] . '" class="topicuser_member"><font class="rank2">' . $posts_row['user_name'] . '</font></a>';}

////////////////Member
if($_SESSION['user_level'] != 5 )
{
//the user is not an admin
echo '';
}
else
{ echo '            <a href="/index.php?area=profile&username=' . $posts_row['user_name'] . '" class="topicuser_member"><font class="rank1">' . $posts_row['user_name'] . '</font></a>';}

////////////////guest
if($_SESSION['user_level'] != 0 )
{
//the user is not an admin
echo '';
}
else
{ echo '            <a href="/index.php?area=profile&username=' . $posts_row['user_name'] . '" class="topicuser_member"><font class="rank0">' . $posts_row['user_name'] . '</font></a>';}

echo'
        <br />Rank: ' . $posts_row['site_rank'] . '         <br     />Status: <img style="margin-bottom: -6px; margin-top: -2px;" src="/images/other/1.gif" alt="" /> <span class="online">online</span>            <br /><img style="min-height: 75px; min-width: 75px; max-height: 75px; max-width: 75px;" src="' .     $posts_row['avatar'] . '" alt="" />
        <br /><b>Forum Rank:</b><br />' . $posts_row['forum_rank'] . '              <br /><br /><b>Posts:</b> ' . $posts_row['post'] . '            <br /><b>Joined on:    </b>
        <br />' . date(" F j, Y, g:i A",     strtotime($posts_row['user_date'])) . '        </td>

    <td>
        <div class="post_container">
            <div class="right">
                <br/>
            </div>
            <table>
                <tr>
                    <td class="post_text">

                        ' .     htmlentities(stripslashes($posts_row['post_content'])) . '
                        <div class="dots"></div><div class="signature lock300580">' . $posts_row['signature'] . '</div>
                    </td>
                </tr>
            </table>
        </div>
    </td>
</tr>
</table>
';}}}}}
?> 
```

使用该代码，我可以为网站管理员获取此代码[http://prntscr.com/gd5s8](http://prntscr.com/gd5s8) 对于访客或任何其他级别，我可以获取此[http://prntscr.com/gd5tf](http://prntscr.com/gd5tf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:26:21.530

据我所知，它是用户名（rank1 等）周围字体标签上的类，因为它似乎是 if 语句块中唯一变化的东西。它根据查看者的用户级别而变化。您可能打算根据 $posts_row 的用户级别对其进行更改。我敢打赌，蓝色样式是基于 rank5 类的，无论是在 css 中还是在某个地方的一些 javascript 中。

如果您想让所有用户名都具有相同的颜色，无论 $posts_row 用户的等级如何，我都建议您去掉 if 语句，因为它们是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:23:01.510

扩展 Erik 在评论中所说的内容：*已经* 为元素¹`rank0`提供了.. `rank5`CSS 类，其中一个*已经*使（或者是？）元素显示为蓝色！`font`^(*`rank1``rank0`*)

 **所以*改变 CSS就足够了：看看 CSS 是做什么用的`rank1`（或`rank0`？），并使其也适用于其他适用的 CSS 类。某处可能涉及到一个 .css 文件，找到它（或适当的内联样式元素）是更改其他关卡玩家名称*呈现中使用的颜色的关键，*

* * *

¹弃用`<font>`标签的这种使用是非常有问题的（ HTML5*不支持*它，自 HTML4.01 以来已弃用！）.. 但它可能会继续作为 CSS 绑定站点工作。但是，我建议`<span>`此时将其更改为（或消除嵌套元素并将类装饰直接添加到`<a>`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T05:23:51.720

您可以在打印用户名之前使用带有 css 类的跨度，以防除级别 1 之外的所有级别，并为该类提供颜色：蓝色

例如：

```
 echo '            <a href="/index.php?area=profile&username=' .     $posts_row['user_name'] . '" class="topicuser_member"><font class="rank4"><span class='blue'> . $posts_row['user_name'] . '</span></font></a>';} 
```

而CSS将是

```
.blue
{
color: blue;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T06:53:51.643

就这样做吧。它很简单：

```
 $username = $post_row['user_name'];
  if($_SESSION['user_level'] == 1)
  {
       echo "<a style='color: blue;' href='index.php?area=profile&username='$username>$username</a>";
  } 
  else
  {
       echo "<a href='index.php?area=profile&username='$username>$username</a>";
  } 
```

快乐编码:)*

# c# - 使用c#将特定行从一个文本文件写入另一个文本文件

> ID：12633962
> 
> 赞同：0
> 
> 时间：2012-09-28T05:15:19.253
> 
> 标签：c#

我正在使用锐利的发展。我正在使用 C# 制作一个 Win App。我希望我的程序检查驱动器 c: 中名为 test 的文本文件，并找到包含 "=" 的行，然后将此行写入驱动器 c: 中其他新创建的文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:26:03.153

这是另一种使用`File.ReadLines`Linq`Where`和`File.AppendAllLines`

```
var path1 = @"C:\test.txt";
var path2 = @"C:\test_out.txt";

var equalLines = File.ReadLines(path1)
                     .Where(l => l.Contains("="));
File.AppendAllLines(path2, equalLines.Take(1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T05:22:38.260

试试这个单行：

```
File.WriteAllLines(destinationFileName,
    File.ReadAllLines(sourceFileName)
        .Where(x => x.Contains("="))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T05:20:05.057

```
using(StreamWriter sw = new StreamWriter(@"C:\destinationFile.txt"))
{
    StreamReader sr = new StreamReader(@"C:\sourceFile.txt");

    string line = String.Empty;

    while ((line = sr.ReadLine()) != null)
    {
        if (line.Contains("=")) { sw.WriteLine(line)); }
    }
    sr.Close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T05:33:45.723

稍微编辑了 Furqan 的答案

```
using (StreamReader sr = new StreamReader(@"C:\Users\Username\Documents\a.txt"))
using (StreamWriter sw = new StreamWriter(@"C:\Users\Username\Documents\b.txt"))
{
    int counter = 0;
    string line = String.Empty;
    while ((line = sr.ReadLine()) != null)
    {
        if (line.Contains("="))
        {
           sw.WriteLine(line);

           if (++counter == 4)
           {
              sw.WriteLine();
              counter = 0;
           }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T05:26:19.323

```
if (File.Exists(txtBaseAddress.Text))
{
    StreamReader sr = new StreamReader(txtBaseAddress.Text);
    string line;
    string fileText = "";
    while ((line = sr.ReadLine()) != null)
    {
        if (line.Contains("="))
        {
            fileText += line;
        }
    } 
    sr.Close();
    if (fileText != "")
    {
        try
        {

            StreamWriter sw = new StreamWriter(txtDestAddress.Text);
            sw.Write(fileText);
            sw.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T05:19:50.147

你尝试过什么吗？

这里有两种读取文件的方法：

1.  使用 File 类中可用的静态方法。ReadAllLines 要具体。如果您正在处理小文件，这已经足够了。接下来，一旦你有了数组，只需使用 LINQ 或任何其他迭代方法找到带有“=”的项目。一旦你得到了这条线，再次使用 File 类来创建数据并将数据写入文件。

2.  如果您正在处理大文件，请使用 Stream。休息保持不变。

# spring-mvc - Tomcat7部署失败：org.apache.catalina.LifecycleException：无法启动组件/w org.springframework.web.servlet.DispatcherServlet

> ID：12633964
> 
> 赞同：4
> 
> 时间：2012-09-28T05:15:32.970
> 
> 标签：spring-mvc, maven-3, tomcat7, web.xml, eclipse-juno

我有一个非常示例的 web.xml，写在下面：

问题是......如果我删除**org.springframework.web.servlet.DispatcherServlet**部分，我可以**成功地**将我的项目部署在 Tomcat7 中作为一个简单的 JSP-Servlet 应用程序。但是，一旦我使用 Spring MVC，我的部署将*失败 - 遇到异常 org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/WebMVCProj2]]*

我该如何解决这个错误？

```
 <?xml version="1.0" encoding="UTF-8"?> 
```

http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0"> Spring Web MVC 应用程序

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>Hello</servlet-name>
    <servlet-class>HelloWorld</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Hello</servlet-name>
    <url-pattern>/HelloServlet</url-pattern>
</servlet-mapping>

<!-- I can remove the part below to make deployment successful -->
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

我从 Enterprise Bundle Repository (EBR) 添加 Spring MVC 依赖项。我还使用 Tomcat7 应该支持的 Eclipse Dynamic Web Module 3.0。我的 jre 是 Tomcat 和我的项目使用的 1.6.x 64 位。我还在 Eclipse 中使用 Web 部署程序集。

这是我的完整例外：

严重：部署 Web 应用程序存档时出错 E:\MyServers\apache-tomcat-7.0.30\webapps\WebMVCProj2.war java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: 无法启动组件 [ StandardEngine[Catalina].StandardHost[localhost].StandardContext[/WebMVCProj2]] at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase. java:877) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963) at org.apache.catalina.startup .HostConfig$DeployWar.run(HostConfig.java:1600) 在 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) 在 java.util.concurrent.FutureTask$Sync。innerRun(FutureTask.java:303) at java.util.concurrent.FutureTask.run(FutureTask.java:138) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) at java.util.concurrent .ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:01:42.007

您应该在 web-inf 文件夹中有 applicationContext.xml，或者您必须在 web.xml 中定义 contextConfigLocation

```
<!-- Spring Context -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:/application-contexts/*.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

如果您可以发布异常跟踪，那将会更有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-28T06:01:20.247

您可以检查您的 servlet 类是否有任何注释，例如**@WebServlet("**。我通过删除 servlet 类中的注释解决了类似的问题。

# c++ - 如何从输入文件读取值到屏幕

> ID：12633965
> 
> 赞同：0
> 
> 时间：2012-09-28T05:15:40.533
> 
> 标签：c++

是

```
cout.put(value); 
```

在 C++ 中将值从文件读取到屏幕是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:32:58.323

假设它`value`是一种可以由 输出的类型`cout`，那么

```
cout << value; 
```

应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:38:46.753

你的问题比较模棱两可。假设您在文件中有一些数据（例如整数），您可以将它们提取到局部变量中并在屏幕上打印出来。

```
...
int k;
ifstream i;
i.open(yourfilename.txt);
k << i;
cout << i;
... 
```

# iphone - 单击iphone中的按钮后如何动态添加文本字段

> ID：12633970
> 
> 赞同：-4
> 
> 时间：2012-09-28T05:16:03.523
> 
> 标签：iphone

如何在单击按钮时动态添加文本字段？

单击按钮时，文本字段应与滚动视图一起出现。

谁能解释我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:23:18.287

你试过什么？可能这就是你所要求的。

```
-(IBAction)buttonClicked:(id)sender
{
    UIScrollView *scrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 100, 100)];
    UITextField *textField=[[UITextField alloc]initWithFrame:CGRectMake(20, 20, 40, 21)];
    [scrollView addSubview:textField];
    [self.view addSubview:scrollView];
} 
```

编辑

如果不是动态的，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIScrollView *scrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 100, 100)];
    UITextField *textField=[[UITextField alloc]initWithFrame:CGRectMake(20, 20, 40, 21)];
    [scrollView addSubview:textField];
    [self.view addSubview:scrollView];
    [scrollView setHidden:YES];
}

-(IBAction)buttonClicked:(id)sender
{
    [scrollView setHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:43:02.917

看看我的代码。

[http://rajneesh071.blogspot.in/2012/09/make-textfield-and-label-dynamically-in.html](http://rajneesh071.blogspot.in/2012/09/make-textfield-and-label-dynamically-in.html)

据此，您可以在滚动视图中创建文本字段和标签的数量，以便您可以根据需要进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:18:46.383

在按钮操作中，您可以创建动态文本字段并将它们添加到您的滚动视图......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T05:23:51.897

您可以使用以下代码以编程方式添加文本字段..

```
UITextField * aTextfield = [[UITextField alloc] initWithFrame:frame]; // give your frame
aTextfield.borderStyle = UITextBorderStyleRoundedRect;
aTextfield.textColor = [UIColor blackColor];
aTextfield.font = [UIFont systemFontOfSize:17.0];
aTextfield.placeholder = @"Suchen";
aTextfield.backgroundColor = [UIColor clearColor];
aTextfield.autocorrectionType = UITextAutocorrectionTypeNo;
aTextfield.keyboardType = UIKeyboardTypeDefault;
aTextfield.returnKeyType = UIReturnKeySearch;
aTextfield.clearButtonMode = UITextFieldViewModeWhileEditing;
aTextfield.delegate = self;

[scrollview addSubview:aTextfield]; 
```

# javascript - 声明 Knockout.js 的视图模型。有两种方法

> ID：12633980
> 
> 赞同：5
> 
> 时间：2012-09-28T05:17:22.220
> 
> 标签：javascript, mvvm, knockout.js, viewmodel, knockout-validation

我将 Knockout.js 用于富客户端应用程序，它将包含大量的 knockout.js ViewModel。在开发过程中，我注意到了两种创建 knockout.js 视图模型的方法。第一种方式。

```
function AppViewModel() {
this.firstName = ko.observable("Bert");
this.lastName = ko.observable("Bertington");} 
```

第二种方式。

```
var appViewModel = {
this.firstName = ko.observable("Bert"),
this.lastName = ko.observable("Bertington")}; 
```

这两种声明 ViewModel 的方法有什么具体区别吗？在[knockout.js 官方页面示例](http://learn.knockoutjs.com/#/?tutorial=intro)中，他们使用了第一种方式。[但是在像Knockout-validations.js](https://github.com/ericmbarnard/Knockout-Validation)这样的第三方框架中使用了第二种方式。我应该使用哪种方式？使用它有什么特别的优势吗？

我发现如果我使用第一种方式，那么我不能使用 Knockout-validations.js 框架。我对这个问题真的很困惑。任何评论表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:07:54.887

第一种方式定义了一个对象构造函数但不实例化一个新对象，你可以通过这种方式传入参数。如果您正在创建多个对象/模型，这肯定会比第二种方式更简洁。

第二种方法是使用对象初始化器语法，这会在内存中使用您设置的任何字段来实例化一个新对象。一般来说，这会产生更小的代码大小；如果您要创建两个结构相同或相似的对象，请使用第一种方式。

没有理由不能使用第一个代替第二个。只需创建一个新对象并将其传递到需要的任何地方。

这：

```
function AppViewModel(fName, lName) {
    var self = this;
    self.firstName = ko.observable(fName);
    self.lastName = ko.observable(lName);
}
...
var appViewModel = new AppViewModel("Bert", "Bertington"); 
```

创建与此相同的对象：

```
var appViewModel = {
    this.firstName = ko.observable("Bert"),
    this.lastName = ko.observable("Bertington")
}; 
```

第一个只允许`AppViewModel`创建更多的 s，例如`new AppViewModel("Joe", "Shmoe")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T03:29:03.480

您描述的差异并非特定于淘汰赛或淘汰赛的库，而是在 JavaScript 社区中广泛争论的语言级别问题。JavaScript 大师 Douglas Crockford 有两篇关于这两个方面的文章：

*   [古典风格](http://www.crockford.com/javascript/inheritance.html)
*   [原型风格](http://javascript.crockford.com/prototypal.html)

从分散的论坛帖子、博客文章和与 JavaScript 程序员的对话来看，社区似乎正在趋向于接受原型风格。你应该使用你喜欢的任何风格。根据文档，看起来 Knockout-Validation 库的设计考虑了经典风格。在这种情况下，古典风格的优势在于它更容易与 Knockout-Validation 库一起使用。原型方式的缺点是很难与这个库一起使用。

# c# - 如何进行子对象自定义验证 mvc3

> ID：12633982
> 
> 赞同：0
> 
> 时间：2012-09-28T05:17:27.997
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我有一个对象（标题），其中包含我想在接受数据之前对其进行自定义验证的子对象（详细信息）列表。我已经尝试过 ModelState.IsValid 和 TryValidateModel，但它似乎没有在子对象上触发 Validate 方法（只有标题对象）。

所以在提交时，我看到了标题的验证，但没有看到子项目。然后，如果我执行 TryValidateModel 我再次看到（断点）验证方法在标题上被调用，但不是在子对象上。

带注释的验证（必须是数字等）似乎正在处理子对象，而不是通过 IValidatableObject 接口添加的自定义逻辑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-16T17:04:48.807

我创建了一个属性（ [ValidateObject] ），它将验证您放在类上的属性，就像您认为它应该做的那样。

```
public class Personne
{
    [ValidateObject]
    public Address Address { get; set; }
    //[...]
} 
```

（地址是一个自定义类。）

它可用于验证：

*   模型上的对象属性。（如上）
*   子对象的集合。

    ```
    [ValidateObject]
    public List<Address> Address { get; set; } 
    ```

*   它支持多级部门，如果“地址”具有类型为“ZipCode”且属性为 [ValidateObject] 的属性，它将被验证。

代码：

```
public class ValidateObjectAttribute : ValidationAttribute
{
    public ValidateObjectAttribute()
    {

    }
    private ValidationContext ValidationContext { get; set; }
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        this.ValidationContext = validationContext;
        var results = new List<ValidationResult>();

        try
        {
            var isIterable = this.IsIterable(value);
            if (isIterable)
            {
                int currentItemPosition = -1;
                foreach (var objectToValidate in value as IEnumerable<object>)
                {
                    currentItemPosition++;
                    var resultTemp = ValidationsForObject(objectToValidate, true, currentItemPosition);
                    if (resultTemp != null)
                        results.AddRange(resultTemp);

                }
                if (results.Count <= 0)
                    results = null;
            }
            else
                results = ValidationsForObject(value);

            if (results != null)
            {
                //Build a validation result 
                List<string> memberNames = new List<string>();
                results.ForEach(r => memberNames.AddRange(r.MemberNames));

                var compositeResultsReturn = new CompositeValidationResult($"Validation for {validationContext.DisplayName} failed!", memberNames.AsEnumerable());
                results.ForEach(r => compositeResultsReturn.AddResult(r));

                return compositeResultsReturn;
            }

        }
        catch (Exception) { }

        return ValidationResult.Success;
    }

    private List<ValidationResult> ValidationsForObject (object objectToValidate, bool IsIterable = false, int position = -1)
    {
        var results = new List<ValidationResult>();
        var contextTemp = new ValidationContext(objectToValidate, null, null);
        var resultsForThisItem = new List<ValidationResult>();

        var isValid = Validator.TryValidateObject(objectToValidate, contextTemp, resultsForThisItem, true);
        if (isValid)
            return null;

        foreach (var validationResult in resultsForThisItem)
        {
            List<string> propNames = new List<string>();// add prefix to properties
            foreach (var nameOfProp in validationResult.MemberNames)
            {
                if (IsIterable)
                    propNames.Add($"{this.ValidationContext.MemberName}[{position}].{nameOfProp}");
                else
                    propNames.Add($"{this.ValidationContext.MemberName}.{nameOfProp}");
            }
            var customFormatValidation = new ValidationResult(validationResult.ErrorMessage, propNames);
            results.Add(customFormatValidation);
        }       

        return results;
    }

    private bool IsIterable(object value)
    {
        ////COULD WRITE THIS, but its complicated to debug...
        //if (value.GetType().GetInterfaces().Any(
        //i => i.IsGenericType &&
        //i.GetGenericTypeDefinition() == typeof(IEnumerable<>)))
        //{
        //    // foreach...
        //}
        Type valueType = value.GetType();
        var interfaces = valueType.GetInterfaces();
        bool isIterable = false;
        foreach (var i in interfaces)
        {
            var isGeneric = i.IsGenericType;
            bool isEnumerable = i.GetGenericTypeDefinition() == typeof(IEnumerable<>);
            isIterable = isGeneric && isEnumerable;
            if (isIterable)
                break;
        }
        return isIterable;
    }
}

public class CompositeValidationResult : ValidationResult
{
    private readonly List<ValidationResult> _results = new List<ValidationResult>();

    public IEnumerable<ValidationResult> Results
    {
        get
        {
            return _results;
        }
    }

    public CompositeValidationResult(string errorMessage) : base(errorMessage)
    {
    }

    public CompositeValidationResult(string errorMessage, IEnumerable<string> memberNames) : base(errorMessage, memberNames)
    {
    }

    protected CompositeValidationResult(ValidationResult validationResult) : base(validationResult)
    {
    }

    public void AddResult(ValidationResult validationResult)
    {
        _results.Add(validationResult);
    }
} 
```

如果您的模型正确绑定，这将起作用:)

您可能想要添加必需的属性，确保对象本身不为空。

```
[Required] 
```

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:38:48.703

我想知道您的根对象是否存在阻止子验证的错误。请参阅[Recursive validation using annotations 和 IValidatableObject](https://stackoverflow.com/questions/8548482/recursive-validation-using-annotations-and-ivalidatableobject) 此 URL 提到了该场景以及从根强制对子节点进行验证的代码

根据从根对象触​​发验证的发布

```
 public IEnumerable Validate(ValidationContext validationContext)
    {
        var context = new ValidationContext(this.Details, validationContext.ServiceContainer, validationContext.Items);
        var results = new List();
        Validator.TryValidateObject(this.Details, context, results);
        return results;
    } 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T05:08:15.790

TryValidateObject 似乎没有触发自定义验证，只有数据注释？通过执行以下操作，我沿着将详细信息验证添加到标头验证的路径：

```
foreach (var detail in this.Details)
{
   var validationResults = detail.Validate(validationContext);
   foreach (var validationResult in validationResults)
   {
      yield return validationResult;
   }
} 
```

这在验证方面有效，但 UI 没有显示错误消息。即使我在 UI 上有 ValidationMessagesFor 。

验证不起作用在这里解决：[MVC3 Master-Details Validation not Displaying](https://stackoverflow.com/questions/12791361/mvc3-master-details-validation-not-displaying)

# asp.net-mvc - MVC c#控制器返回视图（）

> ID：12633983
> 
> 赞同：0
> 
> 时间：2012-09-28T05:17:39.507
> 
> 标签：asp.net-mvc

下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Models = We.Models;
using We.BAL;
using System.Globalization;
using System.IO;
using System.Text;
using System.Web.Helpers;
using System.Diagnostics.CodeAnalysis;
using System.Security.Principal;
using System.Web.Routing;
using System.Web.Security;
using PagedList;
using We.Models.ViewModels;
using We.Models.Interface;
using We.Models.DBData;
using We.Models.Repository;
using System.Data.Sql;
using System.Data.Query;
using System.Data.SqlClient;  

namespace We.Controllers
{
    public class ClientEnquiryController : Controller
    {
      private Models.Interface.IPolicyService _repository;  
      private Models.Repository.PolicyServiceRepository clientenqRepository;    

      public ClientEnquiryController()
           : this(new Models.Repository.PolicyServiceRepository())
      { 
      }

      public ClientEnquiryController(Models.Interface.IPolicyService repository)
      {
        _repository = repository;
      }

      public ActionResult MasterView( string PolicyNo, string carrierCode, string sPol, string languageCode)
      {
        carrierCode = "2";
        sPol = "502-0877220";
        languageCode = "eng";
        return View(_repository.policymaster(carrierCode, sPol, languageCode));            
      } 
```

从我的代码中我是这样返回的：

```
return View(_repository.policymaster(carrierCode, sPol, languageCode)); 
```

如果我想同时返回包含多个语句的视图怎么办？例如：

```
_repository.policymaster(carrierCode, sPol, languageCode);
_repository.policyAgent(carrierCode, sPol, languageCode); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:33:39.567

我认为您可能会受益于使用两个返回对象对视图进行建模。例如，

```
public class MasterViewVM
{
    public PolicyMaster {get; set;}
    public PolicyAgent {get; set;}
} 
```

然后返回带有数据实体的视图模型：

```
public ActionResult MasterView(string PolicyNo, 
    string carrierCode, string sPol, string languageCode)
    {
        carrierCode = "2";
        sPol = "502-0877220";
        languageCode = "eng";
        MasterViewVM model = new MasterViewVM
        {
           PolicyMaster =_repository.policymaster(carrierCode, sPol, languageCode),
           PolicyAgent = _repository.policyAgent(carrierCode, sPol, languageCode)
        };
       return View(model);
    } 
```

另一种可能性是使用子动作。看

[http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)

# php - 通过一个查询从 2 个相关和 1 个不相关的 MySQL 表中获取数据？

> ID：12633984
> 
> 赞同：0
> 
> 时间：2012-09-28T05:17:42.747
> 
> 标签：php, mysql, join, multiple-tables

我正在尝试为我的博客创建一个档案页面，该页面仍在构建中。我有三个不同的 MySQL 表，我需要从中提取数据，其中 1 个与其他 2 个无关。我在[这里](https://stackoverflow.com/questions/11658191/getting-data-from-three-tables-in-one-query)找到了类似的帖子，但看到我对 PHP 的经验不是很丰富，我无法弄清楚如何转换这就是我所需要的。我知道这可以通过执行三个不同的查询轻松完成，但这会给服务器带来不必要的负载并减慢页面加载时间和其他所有事情。

两个相关的类别是“博客”和“类别”，而第三个是内置在博客中的不同应用程序，称为“大脑链接”

以下是相关表的两个查询：

```
 $blogQuery = mysqli_query($link, "SELECT * FROM pub_blogs ORDER BY id DESC") or die ("Could not access DB: " . mysqli_error($link));

    $row = mysqli_fetch_assoc($blogQuery);  
    $blogID = $link->real_escape_string($row['id']);
    $title = $link->real_escape_string($row['title']);
    $date = $link->real_escape_string($row['date']);
    $category = $link->real_escape_string($row['category']);
    $content = $link->real_escape_string($row['content']);

    $blogID = stripslashes($blogID);
    $title = stripslashes($title);
    $date = stripslashes($date);
    $category = stripslashes($category);
    $content = stripslashes($content);

    $catQuery = mysqli_query($link, "SELECT * FROM categories ORDER BY id DESC") or die ("Could not access DB: " . mysqli_error($link));

    $row = mysqli_fetch_assoc($catQuery);
    $catID = $link->real_escape_string($row['id']);
    $catName = $link->real_escape_string($row['name']);
    $description = $link->real_escape_string($row['descriptions']);

    $catID = stripslashes($catID);
    $catName = stripslashes($catName);
    $description = stripslashes($description); 
```

这是第三个不相关的查询：

```
 $brainQuery = mysqli_query($link, "SELECT * FROM brain_links ORDER BY id DESC") or die ("Could not access DB: " . mysqli_error($link));

    $row = mysqli_fetch_assoc($brainQuery);
    $brainID = $link->real_escape_string($row['id']);
    $site_name = $link->real_escape_string($row['site_name']);
    $site_url = $link->real_escape_string($row['site_url']);
    $post_date = $link->real_escape_string($row['post_date']); 
```

是否可以通过一次查询从所有这三个中获取数据？如果没有，有人可以指出某个地方的方向，告诉我如何加入这两个相关的吗？

**博客表在'category'列下保存了category ID来标识它属于哪个category**

我感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:36:03.400

不，您不能使用相同的查询从第三张表中获取数据。Mysql 想要两个表之间的映射。

您可以加入博客和类别，但不能加入大脑链接

对于前两个表做：

```
select * , c.id , c.name , c.descriptions from pub_blogs p  join categories c on c.id = p.category order by id desc ; 
```

对于第三个表，因为没有映射，您不能加入它。

快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:22:15.377

这将从两个表中获取数据。但是，无法从第三个表中获取数据

```
SELECT 
        * 
FROM pub_blogs 
LEFT JOIN categories on categories.id = pub_blogs .category
ORDER BY id DESC 
```

Ajnd 对于第三个表，您无法获取它，因为您无法链接到任何其他表。如果你改变你的表结构，你可以做到。

# c++ - iphone应用程序中iOS + C++中的图像处理

> ID：12633986
> 
> 赞同：0
> 
> 时间：2012-09-28T05:17:54.493
> 
> 标签：c++, objective-c, xcode, class, ios5

我的第一个问题是，如果我使用 opencv 库在 C++ 中编写一个类来检测图像中的任何对象并在 Objective-C（xcode 项目）中调用该 C++ 类，那么这种技术会起作用吗？

和

第二个问题是我如何在我的**iphone 应用程序项目中添加****c/c++**类并在我的传统 ViewController 类中使用它。

 ****到现在为止我所做的是 uder**

：使用一个 ViewController 创建了一个 TabView 应用程序。：在该 ViewController 中添加了一个按钮。：添加了一个 File.c 类，它只是打印字符串。：在我的 ViewController.h 和 ViewController.m 类中导入“File.c”，例如

**我的 ViewController.h 类**

```
#import <UIkit/UIkit.h>
#import "file.c" 
```

**我的 ViewController.m 类**

```
#import "FirstViewController.h"
#import "File.c" 
```

现在按下按钮，我想调用我已经添加到项目中的那个 C 类。我希望得到好的和有益的答案。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:39:09.973

**文件.c**

```
#ifndef testC_File_c
#define testC_File_c
#include <stdio.h>
void say_hello() {
    printf("Hello World!");
}
#endif 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
- (IBAction) buttonDown:(id)sender;
@end 
```

**视图控制器.mm**

```
#import "ViewController.h"
#include "File.c"
@interface ViewController ()

@end

@implementation ViewController

- (IBAction) buttonDown:(id)sender
{
    say_hello();
}
- (void)viewDidLoad
{
    [super viewDidLoad];
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```**

# c# - Visual Studio Designer 自动将项目添加到派生列表视图

> ID：12633987
> 
> 赞同：0
> 
> 时间：2012-09-28T05:17:59.060
> 
> 标签：c#, visual-studio, listview, derived-class

我正在创建多个表单，这些表单将使用相同的数据填充 ListView。所以我想不是在每个表单中单独填充数据，而是创建一个派生的 ListView 并将数据填充放在构造函数中。

我遇到的问题是，当我使用设计器将控件添加到表单时，它会将硬编码的 ListViewItems 添加到设计器文件中的 ListView 中。因此，当应用程序实际运行时，它会创建重复项。

我知道为什么会发生这种情况，但我想找到一种方法来防止它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:37:03.470

经过更多研究，我找到了解决问题的方法。

我需要的是一种仅在“DesignMode”为假时执行我的代码的方法。

由于 DesignMode 在构造函数中始终为 false，因此我对 OnCreateControl 事件进行了覆盖并将其放在那里：

```
protected override void OnCreateControl()
{
    if (!DesignMode)
    {
        // Populate data
    }
    base.OnCreateControl();
} 
```