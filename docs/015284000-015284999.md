# StackOverflow 问答 15284000-15284999

# java - inputText中有多个值？(JSF)

> ID：15284004
> 
> 赞同：1
> 
> 时间：2013-03-07T23:36:27.710
> 
> 标签：java, jsf

有没有办法将 inputText 的返回值与多个属性相关联？

像这样（这是一个示例，语法中不存在 value1 和 value2 标签属性）：

```
<h:inputText id="matricula" 
             value1="#{alunoController.aluno.matricula}" 
             value2="#{alunoHasCursoController.alunoHasCurso.matricula}">
</h:inputText> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:54:09.787

也许只是将 inputText 值直接传递给 bean 方法（[在此处描述](https://stackoverflow.com/questions/11941943/pass-input-text-value-to-bean-method)），在此方法中，您可以将其关联到多个变量/字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:01:48.350

```
<h:inputText
    value1="#{alunoController.aluno.matricula}" 
    value2="#{alunoHasCursoController.alunoHasCurso.matricula}"> 
```

为什么需要副本？这是一个糟糕的设计。Java 是面向对象的，允许您通过多个引用来引用单个对象实例。

您只需要确保`#{alunoHasCursoController.alunoHasCurso}`引用完全相同的`#{alunoController.aluno}`实例。

例如

```
public class AlunoHasCursoController {

    @ManagedProperty("#{alunoController.aluno}")
    private Aluno alunoHasCurso;

    // ...
} 
```

这样你就可以逃脱

```
<h:inputText
    value="#{alunoController.aluno.matricula}"> 
```

或者反过来，取决于上下文和功能要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:00:23.973

使用 an`f:valueChangeListener`将更改发送到第二个 bean。

# c# - 如何将 WindowsIdentity 转换为 NetworkCredential？

> ID：15284017
> 
> 赞同：5
> 
> 时间：2013-03-07T23:37:41.913
> 
> 标签：c#, .net

我们如何将 a 转换`WindowsIdentity`为 a `NetworkCredential`？我正在测试我的 WCF 服务以验证匿名呼叫者是否被阻止。为此，我想做类似的事情：

```
myProxy.ClientCredentials.Windows.ClientCredential = foo(WindowsIdentity.GetAnonymous()); 
```

将 a 转换为a`foo`的方法在哪里`WindowsIdentity``NetworkCredential`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T06:29:27.130

一般来说 foo 不存在。由于 NetworkCredential 是比 WindowsIdentity 更广泛的对象。也就是说，我可以在需要 WindowsIdentity 的地方使用 NetworkCredential，但反之则不行。

原因是出于安全考虑。

NetworkCredential 表示您可以获取此身份并在另一台机器上使用其关联的凭据。

这意味着

1.  您拥有用户凭据，而不仅仅是其身份。
2.  这组凭据非常适合模拟，而不仅仅是本地访问。

我将假设凭据来自另一台机器（由于 WCF）。再次出于安全原因，在进入这台机器时，该网络凭据已转换为 LocalCredential（除非我们谈论的是委派而不是模拟）。客户端计算机授予在服务器计算机上使用其凭据的权利，并且仅在服务器计算机上使用。

如果你想找回 NetworkCredential，你需要做一些叫做委托的事情，因为这就是所谓的多跳问题。这涉及到 Kerberos，一只黑社会的三头恶犬。您不想处理 Kerberos。

一般来说，默认情况下，WCF 代理不会在调用时发送凭据。您通常需要设置 ClientCredentials 或设置

```
proxy.UseDefaultCredentials = true 
```

不提供任何一个通常意味着没有凭据，因此是匿名身份验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T20:59:49.493

回答我自己的问题：
不可能将 a 转换`WindowsIdentity`为 a `NetworkCredential`。要测试匿名调用者是否被阻止，请使用[空会话令牌](http://www.nullsession.net/2009/what-is-a-null-session/)模拟当前线程，然后调用 WCF 服务。注意：不要使用[WindowsIdentity.GetAnonymous](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.getanonymous.aspx)。这种方法是没用的（猜想它被错误地实现了，并且从未被纠正过）。使用空会话令牌模拟当前线程的代码（不进行错误处理）：

```
 public static class Helper
    {
        [DllImport("kernel32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
        private static extern IntPtr GetCurrentThread();

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
        private static extern bool ImpersonateAnonymousToken(IntPtr handle);

        public static void ImpersonateAnonymousUser()
        {            
            ImpersonateAnonymousToken(GetCurrentThread());
        }
    }

        static string ToString(IIdentity identity)
        {
            return string.Format("{0} {1} {2}", identity.Name, identity.IsAuthenticated, identity.AuthenticationType); 
        }

        static void Main(string[] args)
        {            
            Console.WriteLine(ToString(WindowsIdentity.GetCurrent()));
            Helper.ImpersonateAnonymousUser();
            Console.WriteLine(ToString(WindowsIdentity.GetCurrent()));
        } 
```

输出：

```
my machine\me True NTLM
NT AUTHORITY\ANONYMOUS LOGON False 
```

作为对 Edmund 评论的回应，设置`proxy.ClientCredentials.Windows.ClientCredential`为`null`不会做预期的事情 - 以匿名用户的身份提出请求。这是我的完整测试代码及其输出：

服务代码：

```
public class Service1 : IService1
    {
        // note that if client is not authenticated, this code will never get a chance to execute
        // exception will happen before that
        // therefore there is no need to decorate this method with a
        // [PrincipalPermission(SecurityAction.Demand, Authenticated=true)] attribute        
        public string GetData()
        {
            try
            {
                var identity = Thread.CurrentPrincipal.Identity;
                return string.Concat(identity.Name, ",", identity.IsAuthenticated, ",", identity.AuthenticationType);
            }
            catch (Exception e)
            {
                return string.Concat(e.Message, "\\r\\n", e.StackTrace);
            }
        }
    } 
```

服务配置：

```
<services>      
      <service name="WcfService1.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://mymachine/Service1/" />            
          </baseAddresses>                    
        </host>
        <endpoint address="Service1"
                  binding ="customBinding"
                  bindingConfiguration="myHttpBinding"
                  contract="WcfService1.IService1">          
        </endpoint>          
      </service>
    </services>
    <bindings>      
      <customBinding>
        <binding name="myHttpBinding">
            <reliableSession/>          
            <binaryMessageEncoding />          
            <httpTransport maxBufferSize="2147483647"
                           maxReceivedMessageSize="2147483647"
                           authenticationScheme="IntegratedWindowsAuthentication" />
          </binding>
      </customBinding>
    </bindings> 
```

客户端代码：

```
static void MakeRequest()
        {
            try
            {
                using (var svc = new Service1Client())
                {
                    Console.WriteLine(svc.GetData());
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                Console.WriteLine(e.StackTrace);
            }
        }

        static void Test3()
        {            
            Console.WriteLine("using {0}", ToString(WindowsIdentity.GetCurrent()));
            MakeRequest();
            Console.WriteLine();

            Console.WriteLine("setting svc.ClientCredentials.Windows.ClientCredential to null...");
            try
            {
                using (var svc = new Service1Client())
                {
                    svc.ClientCredentials.Windows.ClientCredential = null; 
                    Console.WriteLine(svc.GetData());
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                Console.WriteLine(e.StackTrace);
            }
            Console.WriteLine();

            ImpersonateAnonymousUser();
            Console.WriteLine("using {0}", ToString(WindowsIdentity.GetCurrent()));
            MakeRequest();
            Console.WriteLine();
        } 
```

客户端配置：

```
<bindings>
            <customBinding>
                <binding name="CustomBinding_IService1">
                    <reliableSession />
                    <binaryMessageEncoding />
                    <httpTransport authenticationScheme="Negotiate" />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint address="mymachine/Service1/Service1.svc/Service1"
                binding="customBinding" bindingConfiguration="CustomBinding_IService1"
                contract="ServiceReference1.IService1" name="CustomBinding_IService1">
                <identity>
                    <servicePrincipalName value="host/mymachine" />
                </identity>
            </endpoint>
        </client>
      <behaviors>
        <endpointBehaviors>
          <!-- this setting protects the client by prohibiting the service to assume identity of client
          via imperonation and/or delegation and then doing bad things -->
          <behavior name="ImpersonationBehavior">
            <clientCredentials>
              <windows allowedImpersonationLevel="Identification"/>
            </clientCredentials>
          </behavior>
        </endpointBehaviors>
      </behaviors> 
```

输出：

```
using mymachine\me True Negotiate
mymachine\me,True,Negotiate

setting svc.ClientCredentials.Windows.ClientCredential to null...
mymachine\me,True,Negotiate

using NT AUTHORITY\ANONYMOUS LOGON False
The communication object, System.ServiceModel.Channels.ServiceChannel, cannot be
 used for communication because it is in the Faulted state.

Server stack trace:
   at System.ServiceModel.Channels.CommunicationObject.Close(TimeSpan timeout)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage req
Msg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgDa
ta, Int32 type)
   at System.ServiceModel.ICommunicationObject.Close(TimeSpan timeout)
   at System.ServiceModel.ClientBase`1.System.ServiceModel.ICommunicationObject.
Close(TimeSpan timeout)
   at System.ServiceModel.ClientBase`1.Close()
   at System.ServiceModel.ClientBase`1.System.IDisposable.Dispose()
   at TestClient.Program.MakeRequest() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:08:11.570

我们有一组测试，我们这样做，我们使用这个辅助方法：

```
public static ResponseType CallService(RequestType requestBody, NetworkCredential credential)
{
    ResponseType response;
    using (var channelFactory = new ChannelFactory<IMyService>("BasicHttpBinding_IMyService"))
    {
        channelFactory.Credentials.Windows.ClientCredential = credential;

        var client = channelFactory.CreateChannel();
        var request = new MyRequest()
            {
                MyService = requestBody
            };
        response = client.MyService(request).MyResponse1;
        ((IClientChannel)client).Close();

        channelFactory.Close();
    }
    return response;
} 
```

测试中的用法：

```
var requestBody = GetRequestBody();//another helper method
var credential = new NetworkCredential
    {
        Domain = "MyDomain", 
        UserName = "MyUsername", 
        Password = "MyPassword"
    };
var response = CallService(requestBody, credential);
//Assert various user credentials

var response = CallService(requestBody, null);
//Assert anonymous 
```

# jquery - 使用 Foundation 启动一个新的 Rails 项目

> ID：15284023
> 
> 赞同：3
> 
> 时间：2013-03-07T23:38:03.677
> 
> 标签：jquery, ruby-on-rails-3, gem, zurb-foundation

在开始一个新的 Rails 项目时，最好将库作为 gem 或 cdn 包含在内？我不熟悉明显的优点和缺点。

我希望包括的两件事是 Zurb Foundation 和 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T14:26:59.323

这个[railscasts](http://railscasts.com/episodes/417-foundation)可以帮助你

就个人而言，我从不使用 CDN。

# php - Laravel 在 MAMP 上每次创建新视图时，我都必须将存储/视图 CHMOD 到 777，然后是 775

> ID：15284028
> 
> 赞同：1
> 
> 时间：2013-03-07T23:38:17.010
> 
> 标签：php, views, mamp, laravel, chmod

我正在阅读 Shawn McCool 的书（好书），每次创建新视图并尝试加载它时，都会出现权限错误。

我想知道为什么生成的视图没有读取权限。奇怪的是，如果我`chmod`到 775，我仍然会收到错误，我必须先到 777，然后再到 775。

任何人都可以对此有所了解，为什么会这样？

谢谢！

编辑：

添加新视图后出错

```
file_put_contents(/Users/jason/Sites/laravel1/storage/views/5c4b7b4707d658dffe52d481be6c680e): failed to open stream: Permission denied

Permissions on storage/views
drwxrwxr-x@  7 jason  jason  238 Mar  7 17:15 views 
```

新视图的权限 `-rw-r--r--`

之后的错误`chmod 775 views`

```
 file_put_contents(/Users/jason/Sites/laravel1/storage/views/5c4b7b4707d658dffe52d481be6c680e): failed to open stream: Permission denied 
```

之后的权限`chmod 775 views`

```
drwxrwxr-x@  7 jason  jason  238 Mar  7 17:15 views 
```

之后`chmod 777 views`，它工作

```
drwxrwxrwx@  8 jason  jason  272 Mar  7 17:25 views 
```

之后`chmod 777 views`它仍然有效

```
drwxrwxr-x@  8 jason  jason  272 Mar  7 17:25 views 
```

但这是一个转折点，如果我不使用 viewname.blade.php，我就没有这个问题。如果我做了viewname.php，就没有错误。好像和刀有关系。

## 编辑2：

相关：始终确保对这些文件进行 .gitignore 处理，这样您就不会最终将缓存视图等从您的开发环境中拉到您的服务器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:32:53.767

由于（我认为）Lion，网络服务器不再使用`mod_userdir`，所以 apache 不会以您的用户身份运行，而是作为`_www`替代，请参阅

```
user:~$ ps ax -o pid,user,rgroup,comm | grep -Ee "PID|httpd"
  PID USER             RGID COMM
10317 root                0 /usr/sbin/httpd
16516 _www               70 /usr/sbin/httpd
18497 _www               70 /usr/sbin/httpd
... 
```

现在为您的具有权限`775`、用户`jason`和组的文件夹`jason`

```
drwxrwxr-x@ 7 jason jason 238 Mar 7 17:15 storage/views 
```

Laravel 将尝试为该文件夹中的每个刀片视图创建一个缓存文件。如果不存在这样的文件，它将尝试自动创建该文件。这需要对该文件夹的*写访问权限*，并且由于 Apache 运行时`_www`它需要对该目录的写访问权限，就像*其他*.

但是，一旦文件存在，该文件就归 拥有`_www`，因此 Apache 不再需要对该`storage/views`目录的写访问权。直到创建新视图...

现在你可以做的是：

（请记住，除了 之外还有其他缓存`storage`，`storage/views`因此这里的所有内容都是在整个`storage`文件夹中完成的）

*   要么将`storage`目录设置为`777`（对于开发，这是“好的”）

    ```
    chmod -R 777 storage 
    ```

*   或者（更好）目录到`chown`，这样你可以保留权限，你和 apache 都有足够的访问权限。`storage``jason:_www``775`

    ```
    sudo chown -R jason:_www storage 
    ```

# javascript - Does Node.js support let keyword?

> ID：15284029
> 
> 赞同：5
> 
> 时间：2013-03-07T23:38:23.643
> 
> 标签：javascript, node.js, scope

In Javascript 1.7 the `let` keyword introduces block scope. This is arguably the most needed feature of Javascript and I was wondering if Node.js supports it.

Part of my difficult in ascertaining this is Node runs Google's V8 engine, which comes from such and such standard and I don't know how these line up with the Javascript x.y version numbers.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T23:41:57.913

Yes, the `let` keyword is supported, provided you run Node with the `--harmony` flag. However, I wouldn't recommend using `let` in production software. (by the way, you could have found [this answer](https://stackoverflow.com/a/11326647/339852) via search, before you asked a new question)

# php - PHP：在一个元素上回显类会影响循环回显的所有元素

> ID：15284032
> 
> 赞同：0
> 
> 时间：2013-03-07T23:38:37.770
> 
> 标签：php, css, loops

我有一个回显一些元素的循环。我还有一个 if 语句，如果它包含来自数据库的某个字符串，则将复选框“checked”属性应用于复选框元素，例如：

```
if ($team ==  $row['team1']) {
  $checked1 = "checked='checked'";
}
else {
  $checked1 = "";
}
if ($team ==  $row['team2']) {
  $checked2 = "checked='checked'";
}
else {
  $checked2 = "";
}

echo "<div><input type='radio' name='games" . $i . "' value='" . $row['team1'] . "' " . $checked1 . "></div>";
echo "<div><input type='radio' name='games" . $i . "' value='" . $row['team2'] . "' " . $checked2 . "></div>"; 
```

这似乎工作正常。但我还想在复选框周围的 div 中添加一个类，例如：

```
if ($team ==  $row['team1']) {
  $checked1 = "checked='checked'";
  $div1 = "class='green'";
}
else {
  $checked1 = "";
  $div1 = "";
}
if ($team ==  $row['team2']) {
  $checked2 = "checked='checked'";
  $div2 = "class='green'";
}
else {
  $checked2 = "";
  $div2 = "";
}

echo "<div " . $div1 . "><input type='radio' name='games" . $i . "' value='" . $row['team1'] . "' " . $checked1 . "></div>";
echo "<div " . $div2 . "><input type='radio' name='games" . $i . "' value='" . $row['team2'] . "' " . $checked2 . "></div>"; 
```

问题是该类似乎将其自身应用于循环产生的所有 div。这是循环和回显元素的副产品吗？有没有更好的方法来实现这一点（也许使用 JQuery）。

编辑：添加了 HTML 结果

```
<div class='green'><input  type='radio' name='games1' value='myteam' checked='checked'></div>"
<div><input type='radio' name='games1' value='yourteam' ></div>

<div class='green'><input  type='radio' name='games1' value='myteam' ></div>"
<div><input type='radio' name='games1' value='yourteam' checked='checked'></div>

<div class='green'><input  type='radio' name='games1' value='myteam' ></div>"
<div><input type='radio' name='games1' value='yourteam' checked='checked'></div>

<div class='green'><input  type='radio' name='games1' value='myteam' checked='checked'></div>"
<div><input type='radio' name='games1' value='yourteam' ></div>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:56:56.860

我怀疑问题出在您的循环上，但是我会尝试在您的逻辑之前声明变量。

这将确保它们每次都被清除：

```
$checked1 = "";
$div1 = "";
$checked2 = "";
$div2 = "";

if ($team ==  $row['team1']) {
  $checked1 = ' checked="checked"';
  $div1 = ' class="green"';
}

if ($team ==  $row['team2']) {
  $checked2 = ' checked="checked"';
  $div2 = ' class="green"';
}

echo '<div' . $div1 . '><input type="radio" name="games' . $i . '" value="' . $row['team1'] . '"' . $checked1 . '></div>';
echo '<div' . $div2 . '><input type="radio" name="games' . $i . '" value="' . $row['team2'] . '"' . $checked2 . '></div>'; 
```

此外，如果`$team`为空且`$row[team1]`为空，它将评估为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:49:42.877

（我会发表评论，但我还没有足够的声誉。）

无论如何，你有这个理由吗：

```
$div1 ="class='green'";
$div2 ="class='green'"; 
```

? 当两个变量具有相同的值时，您所有的类看起来都一样。

# css - CSS 元素出现在错误的位置

> ID：15284037
> 
> 赞同：0
> 
> 时间：2013-03-07T23:38:57.690
> 
> 标签：css

我有以下示例代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Example Website</title>
<link rel="stylesheet" type="css" href="style.css">
</head>
<body>
    <div class="left_nav">1 2 3</div>

    <div class="body_main">
        <div class="top_nav_right">Create account Log in</div>

        <div class="top_nav">
            <span>Article Talk</span> <span class="top_nav_right2">Read
                Edit View history</span>
        </div>
</body>
</html> 
```

在我的 CSS 中：

```
.body_main {
    margin-left: 11em;
}

.top_nav_right {
    float: right;
    margin-top: 1em;
    margin-bottom: 1em;
}

.top_nav {
    height: 2.5em;
    margin-top: 3em;
}

.top_nav_right2 {
    float: right;
} 
```

我不确定为什么“创建帐户登录”出现在“阅读编辑查看历史记录”下方。这些都是 div，我在 Create 之后有 Read 。

此外，出于某种原因，只有 Chrome 显示 CSS。我已将 CSS 放入验证器中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:45:30.113

问题是你没有清除你的浮动。

当你浮动`.top_nav_right`时，它会创建一个空间，它下面的元素将尝试填充。由于您将其浮动到右侧，因此额外的空间将位于 的左侧`.top_nav_right`，这将使其`.top_nav`内容出现在左侧（或之前）。

要解决此问题，您可以`.top_nav_right`通过将以下 CSS 定义添加到`.top_nav`

```
clear: both; 
```

你可以在这里看到清除的结果：http: [//jsfiddle.net/P7QTC/2/](http://jsfiddle.net/P7QTC/2/)

您可以在此处了解有关正确清除浮动的原因和方法的更多信息：http: [//css-tricks.com/the-how-and-why-of-clearing-floats/](http://css-tricks.com/the-how-and-why-of-clearing-floats/)

此外，您需要确保关闭所有`<div>`标签。我注意到`.body_main`缺少一个结束标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:42:00.523

部分问题是您的`<link>`类型不正确。它应该是`type="text/css"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:42:57.047

我想你忘了用类'body_main'关闭div的div标签

# apache - 重写 apache 2 的规则以与 angular js 一起使用

> ID：15284038
> 
> 赞同：25
> 
> 时间：2013-03-07T23:38:59.007
> 
> 标签：apache, mod-rewrite, angularjs, rewrite

显然，整个网络上有很多关于 mod 重写的讨论和答案。但是，我很难掌握它们。所以我想我会在这里问。

我要求重写规则来做安迪乔斯林在评论中解释的事情：[https ://stackoverflow.com/a/11100438](https://stackoverflow.com/a/11100438)

这是我当前位于 example.com 根目录的目录结构

*   应用程序/
*   app/index.html（Angular js 应用程序的“根”）
*   api（这将是一个用于 'api' 的 symfony 2 应用程序。我将从 angular 向此处发送 ajax 请求。）

我想将所有请求重定向到 app/index.html，但对 /api 的请求除外。

例如：

[http://example.com/categories/electronics/ipod](http://example.com/categories/electronics/ipod)实际上就像去[http://example.com/app/index.html/categories/electronics/ipod](http://example.com/app/index.html/categories/electronics/ipod)

但是，我希望隐藏 app/index.html 部分。

[然后，对http://example.com/api](http://example.com/api)的请求会有一个例外，因为我需要向这些 url 路径发出 ajax 请求。

感谢任何和所有的帮助/指导。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-04-05T20:47:38.277

这个问题的公认答案已经过时。您现在可以在 Apache 2.2.16+ 的 conf 文件中使用 FallbackResource 指令。

```
FallbackResource /app/index.html 
```

如果您希望 FallbackResource 指令忽略“/api”路由：

```
<Directory /api>
FallbackResource disabled
</Directory> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-08T00:52:35.423

这里有一些东西可以帮助你（把它放在你的 /.htaccess 文件中）：

```
Options +FollowSymLinks
IndexIgnore */*
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !/api

# otherwise forward it to index.html 
RewriteRule ^.*$ - [NC,L]
RewriteRule ^app/. /app/index.html [NC,L] 
```

**注意：**对于较新的 Apache 版本，另请参阅下一个答案，它使用更容易`FallbackResource`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-19T21:22:59.707

这个答案的问题是您仍然需要 404 来查找文件未找到。根据人们构建前端应用程序的方式，人们让 css 或其他文件返回 404 是很常见的，尤其是当他们正在构建更大的动态应用程序或外包前端工作时。此外，角度路由通常与文件系统上的任何内容无关。如果您将其缩小到单个目录，上述方法可能会起作用。例如，我会经常为所有与文件系统布局 (/ajs/) 无关的角度路由使用一个公共前缀。如果你能做到

```
<Directory /ajs>
FallbackResource /app/index.html
</Directory> 
```

然后它会更有意义，但这似乎对我不起作用。无论后端如何，使用公共前缀还可以使后端规则更加简单。例如，如果您不使用反向代理，您可以设置一个简单的服务器正向控制器。它使您的 apache 重写规则建模变得简单。例如：

```
RewriteEngine On
RewriteRule ^/ajs/(.+)$ /index.html 
```

也就是说，我以前没有见过目录/后备方法，所以我有兴趣探索它，因为我需要的唯一重写是角度前进。谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-28T18:43:52.200

这是斯科特弗格森出色答案的细微变化和阐述。我发现使用该`<Location>`指令比使用`<Directory>`. 该`<Directory>`指令采用绝对路径名，在不同的机器上可能不同。

因此，假设您的 Angular 应用程序`index.html`位于`my-app/index.html`Web 服务器的文档根目录下。并且您希望使用`http://localhost/my-app`.

首先确保你的基本href是“/my-app/”。接下来，在您的`httpd.conf`文件中添加：

```
<Location "/my-app">
    FallbackResource /my-app/index.html
</Location> 
```

`/my-app/`如果找不到任何资源，这将导致 Apache 加载 index.html 。

如果您在同一路径下进行 API 调用，例如 say`/my-app/api`那么您可能不应该`FallbackResource`对这些调用应用规则。所以添加：

```
<Location "/my-app/api">
    FallbackResource disabled
</Location> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T14:07:37.940

从我的生产服务器：

```
<VirtualHost *:80>
        ServerName XXX.com

        DocumentRoot /home/www/XXX.com/www

        # Local Tomcat server
        <Location /api/>
          ProxyPass http://localhost:8080/api/
          ProxyPassReverse http://localhost:8080/api/
        </Location>

        RewriteEngine On

        # If an existing asset or directory or API is requested go to it as it is
        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d [OR]
        RewriteCond %{REQUEST_URI} /api
        RewriteRule ^ - [L]

        # If the requested resource doesn't exist (and is not API), use index.html
        RewriteRule ^ /index.html

        ErrorLog logs/XXX.com-error.log
        CustomLog logs/XXX.com-access.log common
</VirtualHost> 
```

请注意，那个“！” 在接受的答案中的“/ api”之前是不正确的。

# eclipse - 在 Eclipse 中查看 WAR 文件的内容

> ID：15284041
> 
> 赞同：1
> 
> 时间：2013-03-07T23:39:14.297
> 
> 标签：eclipse

我试图让 Eclipse 将 WAR 文件扩展名识别为存档类型，以便我可以展开它并像在 JAR 中一样查看内容。我怎样才能做到这一点？

# css - 完整的 CSS 3D 页面 - 相机实现

> ID：15284044
> 
> 赞同：7
> 
> 时间：2013-03-07T23:39:46.100
> 
> 标签：css, 3d, camera, css-transforms

我希望我的页面完全是一个 3D 空间，我对 3d 了解不多，但我的想法是让 body 成为我的视口，世界是我转换后的内容所在的 div。我需要一个函数，它将方向和位置向量（或相机对象？）作为参数，并在内部通过 CSS 转换它使世界 div 转换，以便屏幕面向页面的所需部分。示例页面，简单的房间。

```
<body>
    <div id="world">
        <section id="left-wall">...</section>
        <section id="right-wall">...</section>
        <section id="front-wall">...</section>
        <section id="floor">...</section>
    </div>
</body> 
```

剧本。

```
var cam = Camera(),
    world = document.getElementById("world");
cam.setPosition([x,y,z]);
cam.setOrientation([x,y,z]);
transform(world,cam); // world gets transformed 
```

功能会如何`transform()`？我不确定这是否是正确的方法，或者我是否应该采取不同的做法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-17T17:42:04.583

[Keith Clark 的 CSS3 第一人称射击游戏](http://keithclark.co.uk/labs/css-fps/)似乎使用如下 HTML 结构：

```
<div id="viewport">
    <div id="camera">
        <div id="assembly">
            <!-- Geometry elements inside here -->
        </div>
    </div>
</div> 
```

在他的演示中，“相机”处理旋转，但移动是通过平移“组件”来处理的，“组件”是其余元素的容器。其中一个重要的部分是将透视应用到视口并将preserve-3d应用到相机，以便在其中使用真正的3D空间：

```
#viewport {
    -webkit-perspective: 700px;
}
#camera {
    -webkit-transform-style: preserve-3d;
} 
```

`preserve-3d`由于样式的原因，嵌套在组件内的几何元素的 3D 变换将相对于组件的位置进行解释。

然后我们可以像这样实现你的转换函数：

```
function transform(cameraElem, assemblyElem, camera) {
    var orient = camera.getOrientation();
    var pos = camera.getPosition();
    cameraElem.style.WebkitTransform = "rotateX(" + orient[0] + "deg) " + 
                                       "rotateY(" + orient[1] + "deg) " +
                                       "rotateZ(" + orient[2] + "deg)";
    assemblyElem.style.WebkitTransform = "translate3d(" + (-pos[0]) + "px, " +
                                                          (-pos[1]) + "px, " +
                                                          (-pos[2]) + "px)";
} 
```

当然，以上所有内容仅支持 WebKit 的 3D 转换风格，但扩展它以支持 Mozilla 变体和标准（无前缀）变体应该是一件简单的事情。

# python - Django模型方法不会更新模型字段

> ID：15284052
> 
> 赞同：1
> 
> 时间：2013-03-07T23:40:15.837
> 
> 标签：python, django, web-applications

我有一个具有两种方法的模型对象：`expired`和`pending`. 过期的经理可以正常工作并更新该字段。挂起的管理器不起作用。这是我的代码。

**旁注：**我在视图中将pending设置为true。

*模型.py：*

```
class Job(models.Model):
    expired=models.BooleanField(default=False)
    pending=models.BooleanField(default=False)
    purchased=models.DateTimeField(auto_now_add=True)
    time=models.PositiveIntegerField(blank=False)

    def job_expired(self):
        time=self.time
        date=self.purchased
        end=date+timedelta(days=time)
        #now is defined globally
        if now > end:
            ex=self.expired=True
            #i've tried these two ways below
            self.pending=False
            #or
            ax=self.pending=False
            ax.save()
        else:
            ex=self.expired=False
        return ex 
```

让我重复一遍，它适用于更新过期字段，但不适用于更新待处理字段。我还尝试了一种单独的方法：

```
 def job pending(self):
            if self.expired:
                self.pending=False 
```

这些选项似乎都不起作用。有人可以帮帮我吗。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:21:45.063

```
def job_expired(self):
    time=self.time
    date=self.purchased
    end=date+timedelta(days=time)
    #now is defined globally
    if now > end:
        self.expired = True
        self.pending = False 
        self.save()

        ex = self.expired
    else:
        ex=self.expired=False
    return ex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:56:02.517

为了使更改生效，您需要更新模型然后保存它：

1.  `self.pending = False`
2.  `self.save()`

我也认为你的意思是`field`而不是`manager`. [有关模型管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)的更多信息

# python - 计算出现次数

> ID：15284053
> 
> 赞同：2
> 
> 时间：2013-03-07T23:40:19.103
> 
> 标签：python

我有以下数字列表：

```
l = [2L, 14L, 14L, 14L, 11L, 2L, 2L, 11L, 14L, 11L, 14L, 2L, 2L, 14L, ...] 
```

我如何找出一个数字（例如，`2`）或多个数字（例如，`2`或`5`或`7`）的出现次数？

我打算这样做的方式是使用`for`循环，但我确信有一种更有效的方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T23:42:22.260

`collections.Counter`制作一个字典，将值映射到它们出现的次数：

```
>>> from collections import Counter
>>> l = [2L, 14L, 14L, 14L, 11L, 2L, 2L, 11L, 14L, 11L, 14L, 2L, 2L, 14L]
>>> c = Counter(l)
>>> c
    Counter({14L: 6, 2L: 5, 11L: 3})
>>> c[14L]
    6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T23:42:47.793

```
>>> l.count(2)
5 
```

像馅饼一样简单。如果您有一个想要查找计数的数字列表，您可以尝试，例如：

```
>>> {n: l.count(n) for n in [2, 5, 7]}
{2: 5, 5: 0, 7: 0} 
```

如果您想要对*所有*元素进行计数，我会建议[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)，如另一个答案中所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:55:05.547

`Collections.Counter`在 py2.7 中引入，因此对于 py 2.6 及更早版本，您可以尝试以下操作：

```
In [1]: l = [2L, 14L, 14L, 14L, 11L, 2L, 2L, 11L, 14L, 11L, 14L, 2L, 2L, 14L]

In [2]: dic={}

In [3]: for x in l:
   ...:     dic[x]=dic.get(x,0)+1
   ...:     

In [4]: dic
Out[4]: {2L: 5, 11L: 3, 14L: 6} 
```

或使用`defaultdict`（在 py2.5 中引入）：

```
In [6]: from collections import defaultdict

In [7]: dic=defaultdict(int)

In [8]: for x in l:
    dic[x]+=1
   ...:     

In [9]: dic
Out[9]: defaultdict(<type 'int'>, {2L: 5, 11L: 3, 14L: 6}) 
```

# php - PHP - 解析不同值类型的文件

> ID：15284061
> 
> 赞同：1
> 
> 时间：2013-03-07T23:40:55.917
> 
> 标签：php, string, parsing, floating-point, integer

由于几个原因，我试图在不使用 parse_ini_file 的情况下解析一个 ini 文件。我将文件完美地解析为多维数组，并且能够正确搜索它以及所有内容。我遇到的问题是我希望根据类型解析文件。文件中有字符串、浮点数和整数，我需要将它们原样存储，而不是全部存储为字符串。

用户需要能够获取存储的值，所以基本上他们会执行“使用预算键从标题部分获取浮点数”，这将返回 4.5。但是，如果他们试图从同一部分获取字符串或整数，它将失败。我有它能够获取密钥，但由于它们都存储为字符串，这是唯一有效的方法。我想知道如何将值的类型从字符串更改为整数或浮点数。

任何人有任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:56:47.197

准确预测您正在查看的价值类型将非常困难。字符串可以包含数字，小数点出现在句子中，等等......

如果您正在处理`ini`为自己使用而生成的自定义文件，您可能能够将值的类型编码到 ini 设置中。标准设置可能如下所示 -

```
default_username=Zamereon 
```

因此，您可以将数据类型附加或添加到设置中 -

```
(s)default_username=Zamereon // one character depicting the data type,
(i)default_reputation=1      // you could use strpos.

default_balance=0.5=f // use list($name,$value,$type) = explode('=',$setting) 
```

参考 -

*   [`strpos()`](http://php.net/manual/en/function.strrpos.php)
*   [`list()`](http://php.net/manual/en/function.list.php)
*   [`explode()`](http://php.net/manual/en/function.explode.php)

* * *

另一个建议是***将它们作为字符串保留在已解析的多维数组中，仅在您真正需要它们时进行转换***。在处理来自 ini 文件的一些输入数据的函数或代码行中，您将确切知道需要什么数据类型，如果它是浮点数，只需根据需要[将](http://php.net/manual/en/language.types.type-juggling.php)其转换为浮点数。没有真正需要立即将每个变量转换为正确的形式，因为它们的值不会改变它的文本表示形式；***转换只需要在执行一些进一步的操作之前进行。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:42:53.473

您可以使用[类型转换](http://php.net/manual/en/language.types.type-juggling.php)

> PHP 中的类型转换与 C 中的工作方式非常相似：所需类型的名称写在要转换的变量之前的括号中。

```
<?php
$foo = 10;   // $foo is an integer
$bar = (boolean) $foo;   // $bar is a boolean
?> 
```

> 允许的演员表是：

```
(int), (integer) - cast to integer
(bool), (boolean) - cast to boolean
(float), (double), (real) - cast to float
(string) - cast to string
(array) - cast to array
(object) - cast to object
(unset) - cast to NULL (PHP 5) 
```

# java - 输入只能是字符串

> ID：15284062
> 
> 赞同：0
> 
> 时间：2013-03-07T23:40:56.167
> 
> 标签：java, swing, equals

我正在制作一个 JOptionpane，用户可以在其中输入他的名字。所以不能为空也不能是数字

空白部分正在工作，但现在我必须为数字部分找到解决方案

正如您在我的代码中看到的那样，我创建了一个 while 循环来检查“naam”是否为空。现在我需要找到一种方法来检查“naam”是否不是数字。

```
String naam = JOptionPane.showInputDialog("Geef uw naam in: ");

while (naam.equals("")) {
   JOptionPane.showMessageDialog(null, "Geef een naam in", "Geef naam", JOptionPane.ERROR_MESSAGE);
   naam = JOptionPane.showInputDialog("Geef uw naam in: "); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T23:52:58.077

您可以简单地直接在对话框中过滤输入，而不是搞乱必须显示错误对话框并重新显示对话框......

```
import java.awt.EventQueue;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class TestOptionPane08 {

    public static void main(String[] args) {
        new TestOptionPane08();
    }

    public TestOptionPane08() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JTextField name = new JTextField(10);
                ((AbstractDocument) name.getDocument()).setDocumentFilter(new DocumentFilter() {
                    public String filter(String text) {
                        StringBuilder sb = new StringBuilder(text.length());
                        for (char c : text.toCharArray()) {
                            if (!Character.isDigit(c)) {
                                sb.append(c);
                            }
                        }
                        return sb.toString();
                    }

                    @Override
                    public void insertString(DocumentFilter.FilterBypass fb, int offset, String string, AttributeSet attr) throws BadLocationException {
                        super.insertString(fb, offset, filter(string), attr);
                    }

                    @Override
                    public void replace(DocumentFilter.FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {
                        String filter = filter(text);
                        super.replace(fb, offset, length, filter, attrs);
                    }
                });

                JOptionPane.showMessageDialog(null, name, "Name Please", JOptionPane.QUESTION_MESSAGE);

            }
        });
    }
} 
```

现在，您可以添加`JTextField`to`JPanel`并添加 a`JLabel`甚至错误消息...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:43:40.663

使用[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

```
 if (naam.matches("\\d+")) {/*it is a number*/} 
```

[`String.matches(regexp)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)`true`如果字符串与作为参数给出的正则表达式匹配，则返回。在此示例中，`\\d+`匹配一个或多个数字。

您可以尝试其他模式以禁止包含无效字符（例如“ `My#name`”）的字符串，但这取决于您对“名称字符”的定义。

例如`[A-Z][a-z]*(?:\\s[A-Z][a-z]*)`，匹配具有一个或多个大写字符序列后跟零个或多个小写字符的字符串，每个序列由一个空格分隔，例如`My Name Is X`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:45:27.597

您可以使用正则表达式检查它是否包含任何数字。java中的正则表达式“\\D”代表非数字，“+”代表1或更多。因此，您可以将 while 循环更改为：

```
while (!naam.matches("\\D+")) 
```

这将包括空等号检查，因为您需要至少有一个非数字才能匹配。

# backbone.js - Marionette PushState URL 处理 - 怎么做？

> ID：15284066
> 
> 赞同：2
> 
> 时间：2013-03-07T23:41:39.490
> 
> 标签：backbone.js, marionette, pushstate

我找不到任何关于 Backbone.Marionette 的文章，它使用 pushstate 和 Node.js 或 grunt，或者需要对 URL 处理进行认真讨论的地方。例如，用户应该能够将指向内部页面的链接发送给她的祖母并让该链接正常工作。pushstate 功能似乎特别不适合现实世界。有人可以发表评论并提供一些关于该主题的严肃文章的链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:34:37.960

一般来说，你需要做的只有两件事......

1.  通过调用来告诉 Backbone 使用 pushstate `Backbone.history.start({ pushState: true });`。`root: 'myApp'`如果您的 Marionette 应用程序是从[http://example.com/myApp](http://example.com/myApp)而不是直接在[http://example.com](http://example.com)上提供的，您可能还需要向该参数添加类似的内容。
2.  配置您的 Web 服务器，以便无论用户请求什么 URL，都会返回相同的内容（您的 Marionette 应用程序）（无需进行重定向）。

问题是 #2 的实现方式不同，具体取决于您使用的 Web 服务器类型。而且你还没有告诉我们你在哪个堆栈上。例如，在 ASP.NET 中，这可以通过在 RouteConfig.cs 文件中添加类似这样的内容来设置“catch all”路由来处理：

```
 // all requests (except those explicitly handled by another route)
        // go to HomeController.Index and then the Backbone router examines
        // the URL client-side to determine client-side what to do
        routes.MapRoute(
            name: "Default",
            url: "{*clientRoute}", // this is wildcard which captures the entire URL
            defaults: new { controller = "Home", action = "Index" }
        ); 
```

其他 Web 服务器堆栈将有不同的方式来实现相同类型的东西。

# ios - Cocoapods：关闭 MagicalRecord 注销

> ID：15284067
> 
> 赞同：39
> 
> 时间：2013-03-07T23:41:42.093
> 
> 标签：ios, objective-c, xcode, magicalrecord, cocoapods

关闭 MagicalRecord 注销需要在它首次包含在项目中之前进行#define，但对于由 Cocoapods 管理的项目，我无权在 Pods 项目中添加#define。在这种情况下，如何完全关闭注销？

我花了几个小时想办法做到这一点，在这里发帖希望它能帮助其他人。

编辑：这不是重复的，因为它讨论了*在 Cocoapods 下关闭注销*

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-07T23:41:42.093

您可以使用 post_install 挂钩来修改几乎任何构建设置。只需将此代码添加到您的 Podfile 中：

```
post_install do |installer|
  target = installer.project.targets.find{|t| t.to_s == "Pods-MagicalRecord"}
    target.build_configurations.each do |config|
        s = config.build_settings['GCC_PREPROCESSOR_DEFINITIONS']
        s = [ '$(inherited)' ] if s == nil;
        s.push('MR_ENABLE_ACTIVE_RECORD_LOGGING=0') if config.to_s == "Debug";
        config.build_settings['GCC_PREPROCESSOR_DEFINITIONS'] = s
    end
end 
```

请注意，这只会在**调试**配置中禁用日志记录 - 默认情况下，在**发布**配置中禁用日志记录。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-30T03:16:59.620

就我而言，我正在构建一个依赖于 MagicalRecord 的库。我不希望我的用户必须在他们的 Podfile 中添加 post_install 来消除嘈杂的日志记录，所以我将它添加到我的 podspec 中。

```
 s.prefix_header_contents = '#define MR_ENABLE_ACTIVE_RECORD_LOGGING 0' 
```

这会自动将此`#define`语句添加到 Pods-prefix.pch，这会使使用我的 pod 的项目中的 MagicalRecord 日志记录静音。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-22T09:50:21.783

我为那些使用新的 cocoapods 版本和 MagicalRecord 2.3.0 的人更新了 ank 的答案：

```
post_install do |installer|
  target = installer.pods_project.targets.find{|t| t.to_s == "MagicalRecord"}
  target.build_configurations.each do |config|
    s = config.build_settings['GCC_PREPROCESSOR_DEFINITIONS']
    s = [ '$(inherited)' ] if s == nil;
    s.push('MR_LOGGING_DISABLED=1') if config.to_s == "Debug";
    config.build_settings['GCC_PREPROCESSOR_DEFINITIONS'] = s
  end
end 
```

变化：

*   `project`重命名为`pods_project`
*   目标`Pods-MagicalRecord`重命名为`MagicalRecord`
*   宏`MR_ENABLE_ACTIVE_RECORD_LOGGING`重命名为`MR_LOGGING_DISABLED`，值从更改`0`为`1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-21T07:00:52.260

您可以关闭 Pod 项目的登录功能！

只需添加预处理器宏：

1.  只需进入“Pods”（！！！）项目。

2.  然后找出 Pods-MagicalRecord 目标。

3.  选择“构建设置”选项卡

4.  找到“Apple LLVM 6.1 预处理”->“处理器宏”

5.  推出“处理器宏”并添加到“调试”模式：“MR_ENABLE_ACTIVE_RECORD_LOGGING=0”

就是这样！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-17T12:46:04.650

For the development branch (version 2.3.0 and higher) of Magical Record logging seems to still not work correctly. When imported like this: pod 'MagicalRecord', :git => '[https://github.com/magicalpanda/MagicalRecord](https://github.com/magicalpanda/MagicalRecord)', :branch => 'develop'

I have no logging output on my Xcode console. But I altered the post_install script of the Cocoapod. The following should enable logging: [https://gist.github.com/Blackjacx/e5f3d62d611ce435775e](https://gist.github.com/Blackjacx/e5f3d62d611ce435775e)

With that buildsetting included in GCC_PREPROCESSOR_DEFINITIONS logging of Magical Record can be controlled in 2.3.0++ by using [MagicalRecord setLoggingLevel:]

# php - WP HTML缩小类不起作用

> ID：15284072
> 
> 赞同：4
> 
> 时间：2013-03-07T23:42:00.720
> 
> 标签：php, regex, wordpress, minify

[我在http://www.intert3chmedia.net/2011/12/minify-html-javascript-css-without.html](http://www.intert3chmedia.net/2011/12/minify-html-javascript-css-without.html)上找到了这个脚本。它应该缩小（而不是像类名所暗示的那样压缩）HTML：

```
<?php
class WP_HTML_Compression
{
    // Settings
    protected $compress_css = true;
    protected $compress_js = true;
    protected $info_comment = true;
    protected $remove_comments = true;

    // Variables
    protected $html;
    public function __construct($html)
    {
        if (!empty($html))
        {
            $this->parseHTML($html);
        }
    }
    public function __toString()
    {
        return $this->html;
    }
    protected function bottomComment($raw, $compressed)
    {
        $raw = strlen($raw);
        $compressed = strlen($compressed);

        $savings = ($raw-$compressed) / $raw * 100;

        $savings = round($savings, 2);

        return '<!--HTML compressed, size saved '.$savings.'%. From '.$raw.' bytes, now '.$compressed.' bytes-->';
    }
    protected function minifyHTML($html)
    {
        $pattern = '/<(?<script>script).*?<\/script\s*>|<(?<style>style).*?<\/style\s*>|<!(?<comment>--).*?-->|<(?<tag>[\/\w.:-]*)(?:".*?"|\'.*?\'|[^\'">]+)*>|(?<text>((<[^!\/\w.:-])?[^<]*)+)|/si';
        preg_match_all($pattern, $html, $matches, PREG_SET_ORDER);
        $overriding = false;
        $raw_tag = false;
        // Variable reused for output
        $html = '';
        foreach ($matches as $token)
        {
            $tag = (isset($token['tag'])) ? strtolower($token['tag']) : null;

            $content = $token[0];

            if (is_null($tag))
            {
                if ( !empty($token['script']) )
                {
                    $strip = $this->compress_js;
                }
                else if ( !empty($token['style']) )
                {
                    $strip = $this->compress_css;
                }
                else if ($content == '<!--wp-html-compression no compression-->')
                {
                    $overriding = !$overriding;

                    // Don't print the comment
                    continue;
                }
                else if ($this->remove_comments)
                {
                    if (!$overriding && $raw_tag != 'textarea')
                    {
                        // Remove any HTML comments, except MSIE conditional comments
                        $content = preg_replace('/<!--(?!\s*(?:\[if [^\]]+]|<!|>))(?:(?!-->).)*-->/s', '', $content);
                    }
                }
            }
            else
            {
                if ($tag == 'pre' || $tag == 'textarea')
                {
                    $raw_tag = $tag;
                }
                else if ($tag == '/pre' || $tag == '/textarea')
                {
                    $raw_tag = false;
                }
                else
                {
                    if ($raw_tag || $overriding)
                    {
                        $strip = false;
                    }
                    else
                    {
                        $strip = true;

                        // Remove any empty attributes, except:
                        // action, alt, content, src
                        $content = preg_replace('/(\s+)(\w++(?<!\baction|\balt|\bcontent|\bsrc)="")/', '$1', $content);

                        // Remove any space before the end of self-closing XHTML tags
                        // JavaScript excluded
                        $content = str_replace(' />', '/>', $content);
                    }
                }
            }

            if ($strip)
            {
                $content = $this->removeWhiteSpace($content);
            }

            $html .= $content;
        }

        return $html;
    }

    public function parseHTML($html)
    {
        $this->html = $this->minifyHTML($html);

        if ($this->info_comment)
        {
            $this->html .= "\n" . $this->bottomComment($html, $this->html);
        }
    }

    protected function removeWhiteSpace($str)
    {
        $str = str_replace("\t", ' ', $str);
        $str = str_replace("\n",  '', $str);
        $str = str_replace("\r",  '', $str);

        while (stristr($str, '  '))
        {
            $str = str_replace('  ', ' ', $str);
        }

        return $str;
    }
}

function wp_html_compression_finish($html)
{
    return new WP_HTML_Compression($html);
}

function wp_html_compression_start()
{
    ob_start('wp_html_compression_finish');
}
add_action('get_header', 'wp_html_compression_start');
?> 
```

我的 HTML 在顶部有 IE 条件，如下所示：

```
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"><![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]--> 
```

IE 条件下的所有内容都已正确缩小。结果是一长行的 HTML。问题是 IE 条件句之上的所有内容似乎都没有被缩小。回车仍然保留。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:24:43.667

自定义方法怎么样？

```
public static function html_compress($buffer)
{
    $chunks = preg_split( '/(<pre.*?\/pre>)/ms', $buffer, -1, PREG_SPLIT_DELIM_CAPTURE );
    $buffer = '';
    $replace = array(
        '#[\n\r\t\s]+#'           => ' ',  // remove new lines & tabs
        '#>\s{2,}<#'              => '><', // remove inter-tag whitespace
        '#\/\*.*?\*\/#i'          => '',   // remove CSS & JS comments
        '#<!--(?![\[>]).*?-->#si' => '',   // strip comments, but leave IF IE (<!--[...]) and "<!-->""
        '#\s+<(html|head|meta|style|/style|title|script|/script|/body|/html|/ul|/ol|li)#' => '<$1', // before those elements, whitespace is dumb, so kick it out!!
        '#\s+(/?)>#' => '$1>', // just before the closing of " >"|" />"
        '#class="\s+#'=> 'class="', // at times, there is whitespace before class=" className"
        '#(script|style)>\s+#' => '$1>', // <script> var after_tag_has_whitespace = 'nonsens';
    );
    $search = array_keys($replace);
    foreach ( $chunks as $c )
    {
        if ( strpos( $c, '<pre' ) !== 0 )
        {
            $c = preg_replace($search, $replace, $c);
        }
        $buffer .= $c;
    }
    return $buffer;
} 
```

[GitHub存储库](https://github.com/unamatasanatarai/HTMLCompress)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T05:53:55.627

该站点只是获取了代码并对其进行了重命名。不知何故，使用“他们的”代码比使用实际插件更好？那好吧。

WordPress 和标准 PHP 都有一个更新的版本： [http ://www.svachon.com/blog/html-minify/](http://www.svachon.com/blog/html-minify/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:55:34.320

这里还有其他问题。

我将此“类”简化为单页 PHP 脚本（将任何 $this-> 调用替换为 true（在 ivars 的情况下）或静态函数调用。

然后，我使用长 HTML 输入运行了各种测试，并尝试处理条件注释，包括复制粘贴到您之前拥有的条件 <html> 标记中。每次结果都是单行输出。

总之，有几种可能：

1.  您的 HTML 中还有其他内容将其丢弃（链接到实际页面？）
2.  在添加额外的 HTML 之前发生缩小（很有可能）
3.  其中一个 ivars 不正确（不太可能）
4.  某些内容正在插入`<!--wp-html-compression no compression-->`到您文档的该部分

为什么不在`error_log($html);`minifyHTML($html) 方法的开头插入（或类似的）来查看原始 HTML 的样子。我的猜测是，结果会告诉你为什么它不起作用。（`return $html;`我猜你也可以。）

编辑---这是我的“脚本”，请注意留下了条件注释，并且去除了非条件 HTML 注释。而且我根本不关心行格式，因为这只是您提供的原始课程的一项黑客工作。

```
<?php
$html = <<<EOF
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"><![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Page Title</title>
<meta name="description" content="desc" />
<meta name="keywords" content="c" />
<meta name="robots" content="INDEX,FOLLOW" />
<link rel="icon" href="http://www.stackoverflow.com/" type="image/x-icon" />
<link rel="shortcut icon" href="http://www.stackoverflow.com/" type="image/x-icon" />
<!--[if lt IE 7]>
<script type="text/javascript">
//<![CDATA[
    var BLANK_URL = '';
//]]>
</script>
<![endif]-->
<!--[if lt IE 8]>
<style type="text/css">
    .single-call-to-action .action-text {
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#66000000, endColorstr=#66000000);
    }
    #PaypalSideBar a img {
        left: 0 !important;
        top: 0 !important;
        width: 182px !important;
        height: 96px !important;
    }
</style>
<![endif]-->
<!--[if lt IE 9]>
<style type="text/css">
    .single-call-to-action .action-text {
        -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#66000000, endColorstr=#66000000)";
    }
</style>
<![endif]-->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">jQuery.noConflict();</script>

<link href="//fonts.googleapis.com/css?family=Marck+Script" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="http://www.stackoverflow.com/test.css" media="all" />

<!--[if lt IE 8]><link rel="stylesheet" type="text/css" href="http://www.stackoverflow.com/test.css" media="all" /><![endif]-->
<!--[if lt IE 7]><script type="text/javascript" src="http://www.stackoverflow.com/test.js"></script><script type="text/javascript" src="http://www.stackoverflow.com/test.js"></script><![endif]-->

<script type="text/javascript">
//<![CDATA[
Mage.Cookies.path     = '/';
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
optionalZipCountries = ["US"];
//]]>
</script>
<!-- BEGIN GOOGLE ANALYTICS CODEs -->
<script type="text/javascript">
//<![CDATA[
    var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-x']);
_gaq.push(['_setDomainName', 'http://www.stackoverflow.com/']);
_gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

//]]>
</script>
<!-- END GOOGLE ANALYTICS CODE -->
<script type="text/javascript">
    //<![CDATA[
    window.HDUSeed = 'x';
    window.HDUSeedIntId = setInterval(function() {
        if (document.observe) {
            document.observe('dom:loaded', function() {
                for (var i = 0; i < document.forms.length; i++) {
                    if (document.forms[i].getAttribute('action') && document.forms[i].getAttribute('action').match('contacts/index/post')) {
                        var el = document.createElement('input');
                        el.type = ('hidden');
                        el.name = 'hdu_seed';
                        el.value = window.HDUSeed;
                        document.forms[i].appendChild(el);

                    }
                }
            });
            clearInterval(window.HDUSeedIntId)
        }
    }, 100)
    //]]>
</script>
<script type="text/javascript">//<![CDATA[
        var Translator = new Translate([]);
        //]]></script><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

   <style type="text/css">
   /*default iteaser*/
   #TT2ILTbox {
     background-color: #f3f3f3;
     border: 1px solid #d2d2d2;
     padding: 10px;
     text-align: center;
     width: 280px;
     margin-bottom: 10px;
     margin-top: 10px;
   }

   #TT2ILTbox h2 {
     font-size: 12px;
     font-weight: bold;
     margin: 5px 0 5px 0;
   }

   #TT2ILTcount-line * {
     font-size: 11px;
   }

   #TT2ILTcount-line strong {
     font: bold 11px Arial;
   }

   #TT2ILTcount-line p {
     margin: 5px 0 5px 0;
   }

   #TT2ILTbutton-holder {
     display: -moz-box !important;
     display: block;
     height: 31px;
     text-align: center;
   }

   a.TT2ILTbutton, a.TT2ILTbutton span {
     background-color: #fa002f;
   }

   .TT2ILTbutton * {
     font: bold 12px Arial;

   }

   a.TT2ILTbutton {
     background-image: url('http://static.www.turnto.com/tra2/images/iteaser/1/button-right.png');
     background-repeat: no-repeat;
     background-position: top right;
     display: block;
     height: 31px;
     margin-right: 6px;
     padding-right: 16px;
     text-decoration: none;
     color: white;
   }

   a.TT2ILTbutton span {
     background-image: url('http://static.www.turnto.com/tra2/images/iteaser/1/button-left.png');
     background-repeat: no-repeat;
     display: block;
     line-height: 22px;
     padding: 2px 0 7px 18px;
   }

   a.TurnToIteaSee {
     font-size: 11px;
     text-decoration: none;
     color: #000;
     cursor: pointer;
   }
   </style>

</head>
<body class=" cms-index-index cms-home">
<div class="wrapper">
        <noscript>
        <div class="global-site-notice noscript">
            <div class="notice-inner">
                <p>
                    <strong>JavaScript seems to be disabled in your browser.</strong><br />
                    You must have JavaScript enabled in your browser to utilize the functionality of this website.                </p>
            </div>
        </div>
    </noscript>
    <div class="page">
    </div>
</div>
</body>
</html>

EOF;

function removeWhiteSpace($str)
    {
        $str = str_replace("\t", ' ', $str);
        $str = str_replace("\n",  '', $str);
        $str = str_replace("\r",  '', $str);

        while (stristr($str, '  '))
        {
            $str = str_replace('  ', ' ', $str);
        }

        return $str;
    }

$pattern = '/<(?<script>script).*?<\/script\s*>|<(?<style>style).*?<\/style\s*>|<!(?<comment>--).*?-->|<(?<tag>[\/\w.:-]*)(?:".*?"|\'.*?\'|[^\'">]+)*>|(?<text>((<[^!\/\w.:-])?[^<]*)+)|/si';
        preg_match_all($pattern, $html, $matches, PREG_SET_ORDER);
        $overriding = false;
        $raw_tag = false;
        // Variable reused for output
        $html = '';
        foreach ($matches as $token)
        {
            $tag = (isset($token['tag'])) ? strtolower($token['tag']) : null;

            $content = $token[0];

            if (is_null($tag))
            {
                if ( !empty($token['script']) )
                {
                    $strip = true;
                }
                else if ( !empty($token['style']) )
                {
                    $strip = true;
                }
                else if ($content == '<!--wp-html-compression no compression-->')
                {
                    $overriding = !$overriding;

                    // Don't print the comment
                    continue;
                }
                else if (true)
                {
                    if (!$overriding && $raw_tag != 'textarea')
                    {
                        // Remove any HTML comments, except MSIE conditional comments
                        $content = preg_replace('/<!--(?!\s*(?:\[if [^\]]+]|<!|>))(?:(?!-->).)*-->/s', '', $content);
                    }
                }
            }
            else
            {
                if ($tag == 'pre' || $tag == 'textarea')
                {
                    $raw_tag = $tag;
                }
                else if ($tag == '/pre' || $tag == '/textarea')
                {
                    $raw_tag = false;
                }
                else
                {
                    if ($raw_tag || $overriding)
                    {
                        $strip = false;
                    }
                    else
                    {
                        $strip = true;

                        // Remove any empty attributes, except:
                        // action, alt, content, src
                        $content = preg_replace('/(\s+)(\w++(?<!\baction|\balt|\bcontent|\bsrc)="")/', '$1', $content);

                        // Remove any space before the end of self-closing XHTML tags
                        // JavaScript excluded
                        $content = str_replace(' />', '/>', $content);
                    }
                }
            }

            if ($strip)
            {
                $content = removeWhiteSpace($content);
            }

            $html .= $content;
        }

        echo $html; 
```

# c++ - C/C++ Bug gdb atof(argv[1]) 需要改成idb才能工作

> ID：15284074
> 
> 赞同：0
> 
> 时间：2013-03-07T23:42:02.057
> 
> 标签：c++

我只是不明白为什么这个 C++ 程序不想工作？帮助！

```
#include <iostream>
#include <cstdlib>
#include <cmath>
using namespace std;
int main (int argc, char* argv[])
{
    // convert the text argv[1] to double using atof:
    double r = atof(argv[1]);
    double s = sin(r);
    cout << "Hello, World! sin(" << r << ")=" << s << endl;
    // success
    return 0;
} 
```

报告：

```
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory /home/aleksandar/NetBeansProjects/CppApplication_2'
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk dist/Debug/GNU_Compiler_Collection-Linux-x86/cppapplication_2
gmake[2]: Entering directory /home/aleksandar/NetBeansProjects/CppApplication_2
mkdir -p build/Debug/GNU_Compiler_Collection-Linux-x86
rm -f build/Debug/GNU_Compiler_Collection-Linux-x86/main.o.d
g++ -c -g -MMD -MP -MF build/Debug/GNU_Compiler_Collection-Linux-x86/main.o.d -o build/Debug/GNU_Compiler_Collection-Linux-x86/main.o main.cpp
mkdir -p dist/Debug/GNU_Compiler_Collection-Linux-x86
g++ -o dist/Debug/GNU_Compiler_Collection-Linux-x86/cppapplication_2 build/Debug/GNU_Compiler_Collection-Linux-x86/main.o
gmake[2]: Leaving directory `/home/aleksandar/NetBeansProjects/CppApplication_2'
gmake[1]: Leaving directory `/home/aleksandar/NetBeansProjects/CppApplication_2'

BUILD SUCCESSFUL (total time: 613ms)

RUN FAILED (exit value 1, total time: 78ms) 
```

`/usr/local/netbeans-7.2.1/ide/bin/nativeexecution/dorun.sh: line 33: 7673 Segmentation fault sh "${SHFILE}"` `Press [Enter] to close the terminal ...`

更新：

我已经联系了那所大学的教授，他告诉我的解决方案是：

如果我想在 unix/linux 环境中运行代码，我需要在编译和链接后说：
`c++ -o test.x test.cpp`
然后运行代码：
`./test.x 0.4`
现在它可以工作了。
输出是
`Hello, World! sin(0.4)=0.389418`
但是有人知道在编译器的控制台中输入 0.4 的方法而不是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:45:43.583

`argv[1]`仅在 时有效`argc >= 2`。你应该在你的代码中检查。

并且`argc`仅比`1`使用命令行参数运行程序时更大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T23:45:54.340

这是崩溃的，因为您不一定要向程序发送命令行参数。argv[0] 始终是您正在运行的可执行文件的名称，但不保证 argv[1] 存在或允许被取消引用。

如果您有兴趣从用户那里获得输入，您应该使用位于标头 iostream 中的 std::cin。您可以在程序顶部包含以下代码

```
#include <iostream> 
```

并从用户读取浮点值，您可以执行以下操作（假设使用命名空间 std;）：

```
float var;
cout << "Enter a number: ";
cin >> var; 
```

并且在执行该代码之后， var 将包含用户输入的浮点值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:45:55.707

您没有提供任何命令行参数，因此`argv[1]`会导致分段错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T21:14:34.190

！！！解决了！！！

问题是：gdb 中的错误我需要更改为 intel64/idb 才能工作！！！

我已经尝试了所有不同的编译器和程序来运行它们（Netbeans、Eclipse、Qt Creator .....）

当我改变时：gdb->idb

有效！！！

报告错误：http: [//sourceware.org/bugzilla/show_bug.cgi ?id=15257](http://sourceware.org/bugzilla/show_bug.cgi?id=15257)

# git - 如何使 MSysGit 使用非默认密钥文件名？

> ID：15284075
> 
> 赞同：0
> 
> 时间：2013-03-07T23:42:03.880
> 
> 标签：git, connection, msysgit, msys

为了对多个 GitHub 帐户使用多个密钥（在[此](https://gist.github.com/jexchan/2351996)操作指南之后），我首先要让我的本地系统使用命名为 default 以外的密钥文件`id_rsa`。

我创建了一个密钥对`id_rsa_user`&`id_rsa_user.pub`并将私钥部分添加到 SSH 身份验证代理，并将公钥部分添加到 GitHub（“[生成 SSH 密钥](https://help.github.com/articles/generating-ssh-keys)”）。

然后我`~/.ssh/config`用这个内容创建了文件：

```
#user account
Host github.com-user
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_user 
```

最后，我将项目的远程 URL 从更改`git@github.com:user/project.git`为(s.[对此](https://gist.github.com/jexchan/2351996)`git@github.com-user:user/project.git`操作方法的注释)。

现在它正在我的 VirtualBox-VM (Debian) 和 TortoiseGit 上运行。但是 MSysGit 抛出一个错误：

（试图推送 git@github.com:user/project.git）

```
***@**** /path/to/to/project (master)
$ git push
fatal: The remote end hung up unexpectedly 
```

（试图克隆 git@github.com-user:user/project.git）

```
***@**** /path/to/to/project (master)
$ git clone git@github.com-user:user/project.git .
Cloning into '.'...
fatal: The remote end hung up unexpectedly 
```

（试图克隆 git@github.com:user/project.git ）：

```
***@**** /path/to/to/project (master)
$ git clone git@github.com:user/project.git .
Cloning into '.'... 
```

![在此处输入图像描述](../Images/068cfc76d0f048340558fafdd2dd9512.png)

```
fatal: The remote end hung up unexpectedly 
```

有人知道如何解决这个问题吗？

谢谢

编辑：

添加信息——`ssh -v git@github.com-user`输出：

```
***@**** ~/Desktop/test
$ ssh -v git@github.com-user
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug1: Reading configuration data /c/Users/avex/.ssh/config
debug1: Applying options for github.com-user
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
debug1: identity file /c/Users/avex/.ssh/id_rsa_user type 1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.5p1 Debian-6+squeeze1+github8
debug1: match: OpenSSH_5.5p1 Debian-6+squeeze1+github8 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_4.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-md5 none
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'github.com' is known and matches the RSA host key.
debug1: Found key in /c/Users/avex/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering public key: /c/Users/avex/.ssh/id_rsa_user
debug1: Server accepts key: pkalg ssh-rsa blen 277
debug1: Authentication succeeded (publickey).
debug1: channel 0: new [client-session]
debug1: Entering interactive session.
debug1: Remote: Forced command: gerve user 8d:25:62:90:20:4e:89:99:85:42:2c:d6:0a:03:66:dc
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Remote: Forced command: gerve user 8d:25:62:90:20:4e:89:99:85:42:2c:d6:0a:03:66:dc
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
Hi user! You've successfully authenticated, but GitHub does not provide shell access.
debug1: channel 0: free: client-session, nchannels 1
Connection to github.com closed.
debug1: Transferred: stdin 0, stdout 0, stderr 34 bytes in 0.6 seconds
debug1: Bytes per second: stdin 0.0, stdout 0.0, stderr 61.2
debug1: Exit status 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:12:47.970

检查您的环境变量以获取`GIT_SSH`. 如果已设置，则取消设置以停止将 PuTTY 用于您的 SSH 客户端。您正在尝试使用 openssh 配置选项，因此您想使用 msysgit 中包含的 openssh。

# sql - 在 PostgreSQL 中使用子查询确定行之间的关系

> ID：15284076
> 
> 赞同：1
> 
> 时间：2013-03-07T23:42:10.243
> 
> 标签：sql, postgresql

我试图弄清楚如何在单个查询中完成以下任务。基本上，给定一个用户的 ID，我想返回他是朋友的所有用户的用户配置文件。如果有任何不清楚的地方，我很乐意提供更详细的信息。谢谢！

> **表“用户”：**
> 
> ```
>  user_id  |  col1  |  col2   |  etc
> -----------------------------------------
>  a        |  ***   | ***     |  ***
> -----------------------------------------
>  b        |  ***   | ***     |  *** 
> ```
> 
> **表'users_friends'**
> 
> ```
>  user_id  |  friend_user_id  |  status
> -----------------------------------------
>  a        |  b               |  1
> -----------------------------------------
>  b        |  a               |  1 
> ```

**给定a**的值，在表**users_friends**中查找行

```
user_id = a
status = 1 
```

使用该查询的结果行，在表**users_friends**中查找行

```
user_id = b          (column `user_friend_id` from resulting rows) 
user_friend_id = a   (column `user_id` from resulting rows) 
status = 1 
```

如果返回任何行，请从表“用户”中选择行，其中

```
user_id = b          (column `user_id` from resulting row) 
```

这是我想出的一个非常粗糙的方法。我认为它可以满足我的要求，但我确信有更好的方法来解决它。

```
SELECT * FROM users WHERE user_id IN 
    (SELECT user_id FROM users_friends WHERE friend_user_id IN
              (SELECT user_id FROM users_friends WHERE user_id = 'someuserid' AND status = 1 ) AND status = 1 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:55:45.407

```
select u.*
from
    users u
    inner join
    users_friends f on u.user_id = f.friend_user_id
where
    f.status = 1
    and f.friend_user_id = 'a' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:54:14.093

假设朋友表中没有重复项：

```
SELECT u.user_id, u.col1, u.col2
JOIN users_friends AS f1 ON u.user_id=f1.user_id
JOIN users_friends AS f2 ON f1.user_id=f2.friend_id AND f1.friend_id=f2.user_id
WHERE f1.status=1 AND f2.status=1 AND f2.user_id='a' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:03:53.543

[SQL小提琴](http://sqlfiddle.com/#!1/a720e/1)

```
SELECT u.user_id, u.col1
FROM users_friends AS f
JOIN users AS u
    ON f.friend_user_id = u.user_id
WHERE f.user_id = 'a'
AND f.status = 1 
```

# c - 将文件作为参数传递并读取数据

> ID：15284080
> 
> 赞同：0
> 
> 时间：2013-03-07T23:42:46.880
> 
> 标签：c, file

所以我正在尝试编写一个 C 代码，它将文件名作为参数并读取文件并将其存储到数组中。我已经尝试过但失败了:(

谁能指出我正确的方向？这是我想出的（我知道它可能完全偏离轨道：/）

```
#include <stdio.h>

int main (int argc, char *argv[]) {
   char content[500];
   int k=0;
   FILE* inputF;
   inputF = fopen("argv[0]", "r");

   do {
       fscanf(inputF, "%c", &content[k]);
       k++;
   } while (content[k] != EOF ); 

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T23:45:13.177

您将`"argv[0]"`字符串传递给`fopen`，我确定这不是您要打开的文件的名称。

您应该传递一个指向包含文件名的字符串的指针。

```
inputF = fopen(argv[1], "r"); 
```

`argv[1]`还要注意not 的用法`argv[0]`。

`argv[0]`包含可执行文件的完整文件路径和名称以及`argv[1]`作为命令行参数输入的第一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:49:57.793

有几点可以帮助您入门：

`argc`是参数的数量，第一个`argv`指针是可执行文件的名称。第二个是你想要的。

在尝试使用它之前，您必须检查您的文件指针是否有效。

也许看看使用`fgetc`来读取每个字符，并测试 EOF。

您需要检查是否没有超出`content`缓冲区。

如果你被卡住了，下面是一个使用 do while 的主循环示例：

```
do {
    ch = fgetc(fp);
    content[a] = ch;
    a++;
} while (ch != EOF && a < 500); 
```

这将在您的数组中存储一个 EOF（如果找到）。

# java - Android 蓝牙意图

> ID：15284089
> 
> 赞同：0
> 
> 时间：2013-03-07T23:43:27.243
> 
> 标签：java, android, user-interface, bluetooth, file-transfer

我想通过我的代码发送文件。我知道文件路径，并且我想通过蓝牙来完成。当我调用此意图时，它会显示一个弹出窗口，询问我是否要通过蓝牙、gmail、facebook 等发送文件。

```
 Intent i = new Intent(Intent.ACTION_SEND); i.setType("text/plain");    
   i.putExtra(Intent.EXTRA_STREAM, Uri.parse(path)); 
   startActivity(Intent.createChooser(i, "Send File")); 
```

有没有办法跳过这个弹出步骤并指定我想一直通过蓝牙来做？

另外，如果我知道要将其发送到的蓝牙设备的地址，是否有办法通过意图中的代码来指定它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T07:22:58.307

也许你可以试试这个代码，它对我有用！它只会根据需要选择蓝牙

```
intent.setPackage("com.android.bluetooth"); 
```

# c# - ESQL 不工作

> ID：15284093
> 
> 赞同：2
> 
> 时间：2013-03-07T23:43:38.057
> 
> 标签：c#, entity-framework, entity-sql

我正在研究 WCF、实体框架、自跟踪解决方案。

我的 ESQL 有问题。

```
string cmd = "Select h.achAccId, p.patDOBirth, p.patGender from PatientEntities.AccBases as a, PatientEntities.AccHosps as h, PatientEntities.Patients as p Where h.achAccID = 57348 and p.patPatId = a.acbPatId and h.achAccId = a.acbAccId";

ObjectQuery<dbdatarecord>queryResult = null; 

using (PatientEntities db = new PatientEntities()) PatientEntities is ObjectContext  
{  
    `queryResult = db.CreateQuery<dbdatarecord>(cmd);`  
}

if ((queryResult != null) && (queryResult.Count() > 0))   
{  
    `...`  
} 
```

`queryResult.Count()`导致错误：“'achAccID' 在当前加载的架构中不是'PatientModel.AccHosp' 类型的成员”

我在`PatientModel.edmx`file下找到了，下面`<EntityType Name="AccHosp">`有`<property Name="achAccID" Nullable="false" Type="int">`

那么真正的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:49:50.923

ESQL 没有问题。数据上下文需要刷新。IE。db.Refresh(RefreshMode.StoreWins, db.AccHosps);

# java - SQL Server Reporting Service 2010 WITH JAVA ee 应用程序

> ID：15284102
> 
> 赞同：1
> 
> 时间：2013-03-07T23:44:32.903
> 
> 标签：java, sql-server, reporting-services

我正在尝试将 Sql Server Reporting Service 与 Java EE 应用程序集成。我可以在报告服务器上看到 2 个报告。我正在尝试使用 RS Web 服务来访问服务器。我采取的步骤是

1.  在 Eclipse 中创建动态项目
2.  转到新建 - Web 服务客户端并输入 Web 服务定义为 ://serverName:port/ReportServer/reportservice2010.asmx?wsdl
3.  我在我的项目中看到以下包 com.microsoft.schemas.sqlserver.reporting._2010._03._01.ReportServer com.microsoft.schemas.sqlserver.reporting._2010._03._01.ReportServer.holders

我的代码：

```
com.microsoft.schemas.sqlserver.reporting._2010._03._01.ReportServer.Reporting‌Service2010SoapProxy service = new com.microsoft.schemas.sqlserver.reporting._2010._03._01.ReportServer.ReportingSe‌​rvice2010SoapProxy();
String endPo="://serverName:port/ReportServer/reportservice2010.asmx?wsdl";
service.setEndpoint(endPo);
service.logonUser("serverName\\username", "password",null ); 
```

错误是：

```
AxisFault faultCode: {xml.apache.org/axis}HTTP faultSubcode: faultString: (401)Unauthorized 
```

在此之后，我不确定我需要做什么。请帮我。我还尝试使用代理使用此 Web 服务，但出现错误。请帮助我了解为了在 Java 中使用 SSRS 2010 Web 服务应该做些什么。

问候，尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:28:59.250

我的猜测是您的身份验证设置不正确。

您生成的代理可能使用 HTTP Basic 身份验证，默认情况下报告服务不支持该身份验证。如果您想支持它（如果可以接受？），您需要启用`RSWindowsBasic`身份验证类型。

查看[http://msdn.microsoft.com/en-us/library/bb283249.aspx](http://msdn.microsoft.com/en-us/library/bb283249.aspx)以获取有关如何执行此操作的文档。

正在进行中，您需要研究如何使您的 java 代理与 NTLM 一起工作。

# ruby - Ruby XMLRPC 传递密钥对

> ID：15284107
> 
> 赞同：1
> 
> 时间：2013-03-07T23:44:47.967
> 
> 标签：ruby, xml-rpc

我必须与使用密钥身份验证的 XML-RPC 服务器交互。在接受请求之前，服务器会验证密钥对（ssl 私钥和 ssl 证书）。我知道这很糟糕，但这是我必须解决的问题。

我的问题是：有没有一种简单的方法可以在这个请求中传递密钥和证书？我在 Ruby 中使用 xmlrpc/Client，但文档似乎没有表明可以这样做。我目前的代码如下：

错误：

> /usr/lib/ruby/1.8/net/http.rb:586:in `connect': sslv3 alert handshake failure >(OpenSSL::SSL::SSLError) from /usr/lib/ruby/1.8/net/http.rb:586:in`connect' from /usr/lib/ruby/1.8/net/http.rb:553:in `do_start' from /usr/lib/ruby/1.8/net/http.rb:542:in`start' from /usr/lib/ruby/1.8 /net/http.rb:1035:in `request' from /usr/lib/ruby/1.8/net/http.rb:992:in`post2' 来自 /usr/lib/ruby/1.8/xmlrpc/client.rb:535:in `do_rpc' from /usr/lib/ruby/1.8/xmlrpc/client.rb:420:in`call2' 来自 /usr/lib/ruby/1.8/xmlrpc/client.rb:410 ：在“通话”中

类文件：

```
class RpcRequest

  require "xmlrpc/client"

  # Automatically create the connection
  def initialize(connection_params)
    @connection = XMLRPC::Client.new(connection_params['host'], connection_params['path'], connection_params['port'], connection_params['proxy_host'], connection_params['proxy_port'], connection_params['user'], connection_params['password'], connection_params['use_ssl'], connection_params['timeout'])
  end

  # Make the xml rpc call
    def make_call(method, request_params)
      @response = @connection.call(method, request_params)
    end

end 
```

驱动文件：

```
require 'RpcRequest.rb'
require 'config.rb'
require 'openssl'

# Define parameters for the connection
connect_params = Hash.new
connect_params['host'] = $host
connect_params['path'] = $path
connect_params['port'] = $port
connect_params['proxy_host'] = $proxy_host
connect_params['proxy_port'] = $proxy_port
connect_params['user'] = $user
connect_params['password'] = $password
connect_params['use_ssl'] = $use_ssl
connect_params['timeout'] = $timeout

# Define parameters for the request
request_params = Hash.new
request_params['fname'] = 'Robert'
request_params['lname'] = 'Jones'

request = RpcRequest.new(connect_params)

puts request.inspect

request.make_call('test.hello', request_params) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T11:56:36.987

您可以与客户端实例的 .http 属性进行交互。

# java - Java：将 int 拆分为单独的变量

> ID：15284108
> 
> 赞同：-4
> 
> 时间：2013-03-07T23:44:49.487
> 
> 标签：java

我需要将一个 int 拆分为单独的变量。例如 x=356​​ a=3|| b=5 || c=6

我已经只解决了 3 位数字，但我的程序不适用于 2 位或 4 位数字等。

PS我是初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T23:46:59.880

```
ArrayList<Integer> digits = new ArrayList<Integer>();
    while (number > 0){
digit = number %10;
number/=10;
digits.add(digit);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:00:27.500

怎么样...

```
int test = 12345;
String test2 = String.valueOf(test);
for(int x = 0; x < test2.length(); x++) {       
    System.out.println(test2.charAt(x));
} 
```

# git - 命令来确定当前 HEAD 的上游参考？

> ID：15284109
> 
> 赞同：8
> 
> 时间：2013-03-07T23:44:52.620
> 
> 标签：git, git-branch

我正在寻找我希望是*简单的一行命令*来确定当前签出分支的正确上游引用？

基本上*像*

`git branch --remote HEAD`

哪个（如果有效）会将符号模式 HEAD 转换为当前分支名称，然后该选项`--remote`将其更改为远程跟踪分支的引用。（但它不会那样做！）

如果我有`morehelp`一个配置为的分支

```
remote = origin
merge = refs/heads/morehelp 
```

简单的命令行将返回`refs/remotes/origin/morehelp`它的上游跟踪分支（非常适合`git reset --hard <ref>`通过覆盖更新的情况）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T23:50:24.237

我想你想要

```
git rev-parse --symbolic-full-name @{u} 
```

`@{u}`是上游跟踪分支的缩写，`HEAD`该选项告诉`rev-parse`以您想要的格式打印它，而不是打印 SHA 提交 ID。

从`git help rev-parse`

```
 --symbolic
       Usually the object names are output in SHA1 form (with possible ^ prefix); this option makes them output in a form as close to the original
       input as possible.

   --symbolic-full-name
       This is similar to --symbolic, but it omits input that are not refs (i.e. branch or tag names; or more explicitly disambiguating
       "heads/master" form, when you want to name the "master" branch when there is an unfortunately named tag "master"), and show them as full
       refnames (e.g. "refs/heads/master"). 
```

# objective-c - 使用 GL_STENCIL_TEST 渲染凹多边形

> ID：15284110
> 
> 赞同：1
> 
> 时间：2013-03-07T23:44:58.127
> 
> 标签：objective-c, opengl, polygon, quartz-composer, stencil-buffer

我正在开发一个适用于 Quartz Composer 的自定义几何库，并尝试在插件中绘制一些凹多边形。

我实现了 poly2tri 库，因此用户可以选择是否进行三角测量，但它不适合每帧多边形变换渲染。

我是 OpenGL 的菜鸟，我一直在阅读和测试很多关于模板缓冲区和奇/偶操作的内容，但即使是似乎对其他人有用的代码，也不适用于我。

渲染上下文是 CGLContextObj，我正在使用 NVidia GEForce GT650 开发 MacBook Pro Retina 显示器。我读到所有配置都没有模板缓冲区，但它看起来有时可以工作，尽管不是我想要的那样。

我想知道具有相同配置的人是否正在使用有效的代码并且可以查看我的代码。特别是，我也很好奇请求的通过次数，根据顶点的数量或我猜的“凸面缺陷”......

我的信息来自：

*   [http://fly.cc.fer.hr/~unreal/theredbook/chapter13.html](http://fly.cc.fer.hr/~unreal/theredbook/chapter13.html)
*   [http://commaexcess.com/articles/7/concave-polygon-triangulation-shortcut](http://commaexcess.com/articles/7/concave-polygon-triangulation-shortcut)
*   [http://graphicsbb.itgo.com/solutions/extrude.html](http://graphicsbb.itgo.com/solutions/extrude.html)
*   [http://analysissmusings.wordpress.com/2012/07/13/drawing-filled-concave-polygons-using-the-stencil-buffer/](http://analysesmusings.wordpress.com/2012/07/13/drawing-filled-concave-polygons-using-the-stencil-buffer/)

...但仍然不清楚...

这是我的代码（实际上是其中一个，因为我测试了很多配置）和结果图片。实际上，我曾经将实际渲染放在为每个多边形调用的方法中，但我将其重写为非常清晰：

* * *

**编辑**

事实上，我知道我必须绘制每个三角形，以便反转模板缓冲区中的位值。所以我将我的代码重写为：

```
CGLContextObj cgl_ctx = [context CGLContextObj];

CGLLockContext(cgl_ctx);

GLenum                          error;

if(cgl_ctx == NULL)
    return NO;

glPushAttrib(GL_ALL_ATTRIB_BITS);
glPushClientAttrib(GL_CLIENT_ALL_ATTRIB_BITS);

glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

glDisable(GL_CULL_FACE);
glClear(GL_STENCIL_BUFFER_BIT);
glClearStencil(0);

glEnable(GL_STENCIL_TEST);

glStencilOp(GL_INVERT, GL_INVERT, GL_INVERT);
glStencilFunc(GL_ALWAYS, 1, 1);
glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);

// glColor4d(1., 1., 1., 1.);        ----> does it make sense ?
glBegin(GL_TRIANGLE_FAN); {

    for (int i = 1; i < [vertices count] - 1; i++) {
        // Allways drawing the first vertex
        glVertex2d([[[vertices objectAtIndex:0] objectAtIndex:0] doubleValue], [[[vertices objectAtIndex:0] objectAtIndex:1] doubleValue]);

        // Then two others to make a triangle
        glVertex2d([[[vertices objectAtIndex:i] objectAtIndex:0] doubleValue], [[[vertices objectAtIndex:i] objectAtIndex:1] doubleValue]);
        glVertex2d([[[vertices objectAtIndex:i+1] objectAtIndex:0] doubleValue], [[[vertices objectAtIndex:i+1] objectAtIndex:1] doubleValue]);

    }

}
glEnd();

glStencilOp(GL_ZERO, GL_ZERO, GL_ZERO);
glStencilFunc(GL_EQUAL, 1, 1);
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);

glColor4d(1., 0., 0., 0.5);
glBegin(GL_TRIANGLE_FAN); {
    for (id vertex in vertices) {
        glVertex2d([[vertex objectAtIndex:0] doubleValue], [[vertex objectAtIndex:1] doubleValue]);
    }
    glVertex2d([[[vertices objectAtIndex:0] objectAtIndex:0] doubleValue], [[[vertices objectAtIndex:0] objectAtIndex:1] doubleValue]);
}
glEnd();

glDisable (GL_STENCIL_TEST);

glDisable(GL_BLEND);

glPopClientAttrib();
glPopAttrib();

if((error = glGetError()))
    NSLog(@"OpenGL error %04X", error);

CGLUnlockContext(cgl_ctx);

return (error ? NO : YES); 
```

但它仍然不起作用。这是我的结果以及原始图像和解释的链接。

[http://what-when-how.com/opengl-programming-guide/drawing-filled-concave-polygons-using-the-stencil-buffer-opengl-programming/](http://what-when-how.com/opengl-programming-guide/drawing-filled-concave-polygons-using-the-stencil-buffer-opengl-programming/)

![模板失败](../Images/1b54cfdb2588b4d1df6491b120d29a66.png)

**编辑 2：**

事实上，Quartz Composer 启用的上下文**并没有实现模板缓冲区**。使用模板缓冲区直接在 OpenGL 中渲染似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:18:43.150

```
...
glClearStencil(0);
... 
```

请注意，它[`glClearStencil()`](http://www.opengl.org/sdk/docs/man2/xhtml/glClearStencil.xml)只是设置了一些状态，并没有真正清除模板缓冲区。

尝试`glClear( GL_STENCIL_BUFFER_BIT )`在每个多边形之前添加一个位置。

**编辑：**像这样：

```
#include <GL/glut.h>
#include <glm/glm.hpp>
#include <glm/gtc/type_ptr.hpp>
#include <vector>

std::vector< glm::vec2 > pts;
bool leftHeld = true;
glm::vec2* dragPt = NULL;
void mouse( int button, int state, int x, int y )
{
    glm::vec2 pt( x, glutGet( GLUT_WINDOW_HEIGHT ) - y );

    // left mouse button starts dragging a point
    dragPt = NULL;
    leftHeld = false;
    if( button == GLUT_LEFT_BUTTON && state == GLUT_DOWN )
    {
        leftHeld = true;
        size_t minIdx = 0;
        for( size_t i = 0; i < pts.size(); ++i )
        {
            float newDist = glm::distance( pt, pts[ i ] );
            float oldDist = glm::distance( pt, pts[ minIdx ] );
            if( newDist <= oldDist && newDist < 15.0f )
            {
                minIdx = i;
                dragPt = &pts[ minIdx ];
            }
        }
    }

    // middle mouse button clears all points
    if( button == GLUT_MIDDLE_BUTTON && state == GLUT_UP )
    {
        pts.clear();
    }

    // right mouse button adds a point
    if( button == GLUT_RIGHT_BUTTON && state == GLUT_UP )
    {
        pts.push_back( pt );
    }

    glutPostRedisplay();
}

void motion( int x, int y )
{
    glm::vec2 pt( x, glutGet( GLUT_WINDOW_HEIGHT ) - y );
    if( dragPt && leftHeld )
    {
        *dragPt = pt;
        glutPostRedisplay();
    }
}

void glLine( const std::vector< glm::vec2 >& line, GLenum mode )
{
    glBegin( mode );
    for( size_t i = 0; i < line.size(); ++i )
    {
        glVertex2f( line[i].x, line[i].y );
    }
    glEnd();
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glOrtho( 0, w, 0, h, -1, 1 );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    // draw polygon
    glClear( GL_STENCIL_BUFFER_BIT );
    {
        // fill stencil buffer
        glEnable( GL_STENCIL_TEST );
        glColorMask( GL_FALSE,GL_FALSE,GL_FALSE,GL_FALSE );
        glStencilOp( GL_KEEP, GL_KEEP, GL_INVERT );
        glStencilFunc( GL_ALWAYS, 0x1, 0x1 );
        glBegin( GL_TRIANGLES );
        for( size_t i = 1; i+1 < pts.size(); ++i )
        {
            glVertex2fv( glm::value_ptr( pts[ 0 ] ) );
            glVertex2fv( glm::value_ptr( pts[ i ] ) );
            glVertex2fv( glm::value_ptr( pts[ i+1 ] ) );
        }
        glEnd();

        // fill color buffer
        glColor3ub( 0, 128, 0 );
        glColorMask( GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE );
        glStencilFunc( GL_EQUAL, 0x1, 0x1 );
        glBegin( GL_TRIANGLES );
        for( size_t i = 1; i+1 < pts.size(); ++i )
        {
            glVertex2fv( glm::value_ptr( pts[ 0 ] ) );
            glVertex2fv( glm::value_ptr( pts[ i ] ) );
            glVertex2fv( glm::value_ptr( pts[ i+1 ] ) );
        }
        glEnd();
        glDisable( GL_STENCIL_TEST );
    }

    // draw polygon boundary
    glLineWidth( 1 );
    glColor3ub( 255, 255, 255 );
    glLine( pts, GL_LINE_LOOP );

    // draw vertexes
    glPointSize( 9 );
    glColor3ub( 255, 0, 0 );
    glLine( pts, GL_POINTS );

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE | GLUT_STENCIL );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "GLUT" );
    glutMouseFunc( mouse );
    glutMotionFunc( motion );
    glutDisplayFunc( display );
    glutMainLoop();
    return 0;
} 
```

# android - 带有片段视图流问题的 Android veiwpager

> ID：15284114
> 
> 赞同：0
> 
> 时间：2013-03-07T23:45:23.457
> 
> 标签：android, fragment

我对 android 比较陌生，所以我尝试了一个我认为很简单的应用程序，但我遇到了一个与视图/活动流有关的问题，我无法理解。

我有一个使用 Viewpager 创建选项卡的 fragmentActivity，每个选项卡都是它自己的片段类，这一切都很好并且可以正常工作，但是现在我需要让其中一个选项卡显示一个列表，选择后它会将您带到另一个“视图”，我的问题是如何创建第一个列表，然后如何处理单击该列表中的项目以将您带到新视图，以便选项卡保持原位并且后退按钮不会退出应用程序。

目前，我用一个使用 arrayAdapter 来构建自身的列表片段换出了片段，这在列表中一直有效，但我一生都无法弄清楚如何使用它的 onclick() 方法继续前进下一个屏幕，不会像我说的那样丢失标签或让后退按钮直接退出。

所以我不确定A，列表片段是否是要走的路，或者B是否是如何正确移动到新屏幕

如果需要，我可以发布代码，但它是提到的类的非常通用的实现，所以我不确定代码是否会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:57:33.300

您要处理单击列表中项目的回调是[onListItemClick](http://developer.android.com/reference/android/app/ListFragment.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)。

至于呈现一个新屏幕，您可以使用[FragmentTransaction](http://developer.android.com/reference/android/app/FragmentTransaction.html)将您的片段替换为新片段，如果您在 ViewPager 中执行此操作会有点麻烦。代码看起来像这样：

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.replace(R.id.some_containging_view, new SomeFragment())
    .addToBackStack(null).commit(); 
```

否则，您可以简单地启动一个新的活动，这更简单，但意味着选项卡不会出现在新屏幕上，除非您在那里复制它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:32:26.237

终于在[这里](https://stackoverflow.com/a/15321919/1157354)找到了一个优雅的解决方案，它在我的列表片段周围使用了一个包装器片段，因此寻呼机只关心包装器，同时在包装器中我可以根据我的心愿执行片段事务，一个小提示链接代码使用 getChildFragmentManager( ) 需要从 support.app 更改为常规的 fragmentmanager() 才能使 backstack 工作正常。

# android - 如何从 FragmentActivity 中的 Fragments 访问数据以防止滑动

> ID：15284118
> 
> 赞同：1
> 
> 时间：2013-03-07T23:45:32.770
> 
> 标签：android, android-fragments, android-imageview, android-fragmentactivity

我正在关注 android 开发人员文档中的[BitMapFun](http://developer.android.com/shareables/training/BitmapFun.zip)教程。因为我通常是 Android/Java 编程的新手。

我创建了一个自定义 ImageViewer（称为**TouchImageView**），它允许用户缩放、双击等......并将其应用于**ImageDetailFragment**类。

在**TouchImageView**类中，我有一个**布尔变量，可以检测用户是否放大，**如果它是 zoomedIn，它也会标记图像是否位于边框侧。（因此 zoomedIn 位和屏幕边框很重要）

我想应用此逻辑来启用或禁用 ViewPager 以允许用户滚动到下一页/上一页（读取 Fragment）此 ViewPager 位于实现**FragmentActivity的****ImageDetailActivity**

 **正如我现在的代码一样，如果我向左或向右移动（在放大状态下）而不是移动图像，它将转到下一个片段而不是向左或向右滚动。除非我首先向上或向下移动，否则我可以滚动图像。

所以我想，如果我在 Fragment 中有一个布尔值，我可以检查它以便我的 Activiy 启用/禁用 ViewPager，那么我可以“控制”滚动的工作方式。

这个逻辑正确吗？如果是这样，我如何从我的 DetailActivity 类中的 Fragment 中检索布尔值。我已经尝试使用接口来执行此操作，但是我总是得到一个错误的回复（由于 onCreate 期间片段的初始化？）所以我需要一些可以在显示片段的运行时检索该布尔值的东西。但是从我下面的代码中它永远不会工作。

```
public void onCreate(Bundle savedInstanceState) {
 .... Do stuff like fetching images and caching etc ....
 mPager = (ScrollViewPager) findViewById(R.id.pager);
 mAdapter = new ImagePagerAdapter(getSupportFragmentManager(), imgs.getImagesLocal().length);
 mPager.setAdapter(mAdapter);
    mPager.setPageMargin((int) getResources().getDimension(R.dimen.image_detail_pager_margin));
    mPager.setOffscreenPageLimit(2);

    mPager.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            //v.mAdapter.mCurItem
            ScrollViewPager scroll = (ScrollViewPager) v;
            //Log.d(TAG, "-----------------Current pos is "+ scroll.getCurrentItem());
            ImageDetailFragment frag = (ImageDetailFragment) mAdapter.getItem(scroll.getCurrentItem());
            if(frag.isPageChangeable())
            {
                Log.d(TAG, "-----------------Page is zoomed");
            }else
            {
                Log.d(TAG, "----------------------Page is not Zoomed");
            }
            return false;

        }
    });
} 
```

我得到的片段初始化是。

```
/**
 * The main adapter that backs the ViewPager. A subclass of FragmentStatePagerAdapter as there could be a large number of items in the ViewPager and we don't want to retain
 * them all in memory at once but create/destroy them on the fly.
 */
private class ImagePagerAdapter extends FragmentStatePagerAdapter {

    private final int mSize;

    public ImagePagerAdapter(FragmentManager fm, int size) {
        super(fm);
        mSize = size;
    }

    @Override
    public int getCount() {
        return mSize;
    }

    @Override
    public Fragment getItem(int position) {
        return ImageDetailFragment.newInstance(imgs.getImagesLocal()[position], position, imgs.getImagesLocal().length);
    }
} 
```

如果您想查看完整代码，可以[在此处下载。](http://elfredo.be/ImageGridActivity.zip)

为了防止滑动/甩动，我想使用在此[stackoverflow 帖子中找到的以下信息](https://stackoverflow.com/questions/12918581/android-fragmentactivity-and-prevent-swipe)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:15:54.163

我找到了一个部分解决方案，whiiii！

我实现了链接中提到的[禁用 ViewPager 。](https://stackoverflow.com/questions/7814017/disable-viewpager)然后在 onClick 方法中添加以下内容。

```
public void onClick(View v) {

    TouchImageViewLocal ti = (TouchImageViewLocal) findViewById(R.id.imageView);
    if(ti.isZoomed()){
        Log.d(TAG, "-----------------------------------------is zoomed in? " + ti.isZoomed());
        mPager.setPagingEnabled(false);
    }else
    {
        Log.d(TAG, "-----------------------------------------is zoomed in? " + ti.isZoomed());
        mPager.setPagingEnabled(true);
    } 
```

这允许屏幕在放大时停止/开始滑动，但是，我仍然必须找到边缘检测。:-)**

# gwt - JBOSS 5.0.0 GA 上 GWT 应用程序的部署问题

> ID：15284120
> 
> 赞同：1
> 
> 时间：2013-03-07T23:45:37.373
> 
> 标签：gwt, deployment, war, jboss5.x

在此先感谢您的帮助。我正在尝试将 GWT 应用程序（.war 文件）部署到 JBOSS 5.0.0 GA AS。该应用程序在 Tomcat 7 servlet 容器上部署良好。

以下是服务器日志中有趣的部分：

```
14:53:46,051 ERROR [AbstractKernelController] Error installing to Parse: name=vfszip:/C:/jboss-5.0.0.GA/jboss-5.0.0.GA/server/default/deploy/portal.wa
r state=Not Installed mode=Manual requiredState=Parse
org.jboss.deployers.spi.DeploymentException: Error creating managed object for vfszip:/C:/jboss-5.0.0.GA/jboss-5.0.0.GA/server/default/deploy/portal.w
ar
        at org.jboss.deployers.spi.DeploymentException.rethrowAsDeploymentException(DeploymentException.java:49)
        at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.createMetaData(AbstractParsingDeployerWithOutput.java:337)
        at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.createMetaData(AbstractParsingDeployerWithOutput.java:297)
        at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.createMetaData(AbstractParsingDeployerWithOutput.java:269)
        at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.deploy(AbstractParsingDeployerWithOutput.java:230)
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598)
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:545)
        at org.jboss.system.server.profileservice.ProfileServiceBootstrap.loadProfile(ProfileServiceBootstrap.java:304)
        at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:205)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:405)
        at org.jboss.Main.boot(Main.java:209)
        at org.jboss.Main$1.run(Main.java:547)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.jboss.xb.binding.JBossXBException: Failed to parse source: null
        at org.jboss.xb.binding.parser.sax.SaxJBossXBParser.parse(SaxJBossXBParser.java:203)
        at org.jboss.xb.binding.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:168)
        at org.jboss.deployers.vfs.spi.deployer.JBossXBDeployerHelper.parse(JBossXBDeployerHelper.java:199)
        at org.jboss.deployers.vfs.spi.deployer.JBossXBDeployerHelper.parse(JBossXBDeployerHelper.java:170)
        at org.jboss.deployers.vfs.spi.deployer.SchemaResolverDeployer.parse(SchemaResolverDeployer.java:132)
        at org.jboss.deployers.vfs.spi.deployer.SchemaResolverDeployer.parse(SchemaResolverDeployer.java:118)
        at org.jboss.deployers.vfs.spi.deployer.AbstractVFSParsingDeployer.parseAndInit(AbstractVFSParsingDeployer.java:256)
        at org.jboss.deployers.vfs.spi.deployer.AbstractVFSParsingDeployer.parse(AbstractVFSParsingDeployer.java:239)
        at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.createMetaData(AbstractParsingDeployerWithOutput.java:330)
        ... 22 more
Caused by: java.lang.StackOverflowError
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findResource(URLClassLoader.java:382)
        at java.lang.ClassLoader.getResource(ClassLoader.java:1002)
        at java.lang.ClassLoader.getResource(ClassLoader.java:997)
        at java.lang.ClassLoader.getResource(ClassLoader.java:997)
        at org.jboss.classloader.plugins.loader.ClassLoaderToLoaderAdapter.getResource(ClassLoaderToLoaderAdapter.java:120)
        at org.jboss.classloader.spi.ClassLoaderDomain.getResourceFromParent(ClassLoaderDomain.java:475)
        at org.jboss.classloader.spi.ClassLoaderDomain.beforeGetResource(ClassLoaderDomain.java:431)
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.getResource(BaseClassLoaderDomain.java:400)
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.getResource(BaseClassLoaderDomain.java:1116)
        at org.jboss.classloader.spi.base.BaseClassLoader.getResource(BaseClassLoader.java:410)
        at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1192)
        at org.apache.xerces.parsers.SecuritySupport$6.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.xerces.parsers.SecuritySupport.getResourceAsStream(Unknown Source)
        at org.apache.xerces.parsers.ObjectFactory.findJarServiceProvider(Unknown Source)
        at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)
        at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)
        at org.apache.xerces.parsers.SAXParser.<init>(Unknown Source)
        at org.apache.xerces.parsers.SAXParser.<init>(Unknown Source)
        at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.<init>(Unknown Source)
        at org.apache.xerces.jaxp.SAXParserImpl.<init>(Unknown Source)
        at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(Unknown Source)
        at org.jboss.xb.binding.parser.sax.SaxJBossXBParser.<init>(SaxJBossXBParser.java:92)
        at org.jboss.xb.binding.UnmarshallerImpl.<init>(UnmarshallerImpl.java:56)
        at org.jboss.xb.binding.UnmarshallerFactory$UnmarshallerFactoryImpl.newUnmarshaller(UnmarshallerFactory.java:96)
        at org.jboss.xb.binding.metadata.XsdAnnotation.unmarshal(XsdAnnotation.java:53)
        at org.jboss.xb.binding.sunday.unmarshalling.XsdBinder.bindAttribute(XsdBinder.java:916)
        at org.jboss.xb.binding.sunday.unmarshalling.XsdBinder.bindComplexType(XsdBinder.java:693)
        at org.jboss.xb.binding.sunday.unmarshalling.XsdBinder.bindType(XsdBinder.java:508)
        at org.jboss.xb.binding.sunday.unmarshalling.XsdBinder.bindElement(XsdBinder.java:1143)
        at org.jboss.xb.binding.sunday.unmarshalling.XsdBinder.bindParticle(XsdBinder.java:1025)
        at org.jboss.xb.binding.sunday.unmarshalling.XsdBinder.bindModelGroupParticles(XsdBinder.java:1208)
        at org.jboss.xb.binding.sunday.unmarshalling.XsdBinder.bindParticle(XsdBinder.java:1016) 
```

......

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T15:13:24.043

我有一个类似的问题是由我的一个配置文件命名为 persistence.xml 引起的，它是 Jboss 5 中的保留文件名

# ruby-on-rails - 无法为 ruby on rails 创建数据库

> ID：15284124
> 
> 赞同：0
> 
> 时间：2013-03-07T23:45:43.327
> 
> 标签：ruby-on-rails, macos, rubygems, terminal

我刚刚开始在 Rails 上运行 ruby​​，我仍在忙于设置一切运行.. 我遇到的问题是它一直说 mysql2 不是捆绑包的一部分.. 我已经用谷歌搜索了它，但解决方案没有似乎工作

```
sudo gem install mysql2 
```

ETC..

我得到的东西是

> $ rake db:create rake 中止！请安装 mysql2 适配器：`gem install activerecord-mysql2-adapter`（mysql2 不是捆绑包的一部分。将其添加到 Gemfile。） /Library/Ruby/Gems/1.8/gems/bundler-1.3.2/lib/bundler/rubygems_integration.rb:214:in`gem' /Library/Ruby/Gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/mysql2_adapter.rb:3 /Library/Ruby/Gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in`要求' /Library/Ruby/Gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require' /Library/Ruby/Gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in`load_dependency' /Library/Ruby/Gems/1.8/gems/activesupport-3.2.12/lib/ active_support/dependencies.rb:251:in `require' /Library/Ruby/Gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:50:in`resolve_hash_connection' /Library/Ruby/Gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:29:inestablish_connection `spec' /Library/Ruby/Gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:130:in`'/Library/Ruby/ Gems/1.8/gems/activerecord-3.2.12/lib/active_record/railties/databases.rake:90:in`create_database' /Library/Ruby/Gems/1.8/gems/activerecord-3.2.12/lib/active_record/railties/databases.rake:62 /Library/Ruby/Gems/1.8/gems/activerecord-3.2.12/lib/active_record/railties/databases.rake:62:in`每个'/Library/Ruby/Gems/1.8/gems/activerecord-3.2.12/lib/active_record/railties/databases.rake:62 任务：TOP => db:create（通过使用 --trace 运行任务查看完整跟踪）

这里有人知道我的解决方案吗？（ ps 我看到很多人说它必须添加到 gem 配置中，但是如何？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:49:52.493

您应该确保您的`Gemfile`（位于项目的根目录中）包括

```
gem 'mysql2' 
```

然后运行`bundle install`安装它。

我相信`activerecord-mysql2-adapter`gem 是作为依赖项安装的，但您也可以添加

```
gem 'activerecord-mysql2-adapter' 
```

如果它仍然要求它。

# javascript - Angular - 是其他元素的子元素

> ID：15284129
> 
> 赞同：3
> 
> 时间：2013-03-07T23:45:55.443
> 
> 标签：javascript, jquery, angularjs

我正在尝试找到一种纯 Angular 方法来确定单击的元素是否是另一个元素的子元素。在 jQuery 中，我会使用 has() 但不确定在 Angular 中使用哪种方法，除了遍历所有子项并进行比较。

jQuery：

```
if($(someelement).has(another)) { }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T14:17:28.107

你可以反过来。

您可以询问 A 是否是 B 的祖先，而不是询问 B 是否是 A 的孩子：

```
function isAncestor(ancestor, element) {
    var parent = element.parentNode;
    while (parent && parent!=ancestor) {
        parent = parent.parentNode;
    }
    return parent==ancestor;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T17:02:17.737

我将把它放在这里，因为我试图解决同样的问题，并认为它可能对其他人有用，即使它不是`has()`.

我的第一个解决方案是使用`Element.getBoundingClientRect()`.

如果您正在处理一个矩形目标，您可以检查单击事件的 x 和 y 与`element`（这是一个 angular.element）的边界矩形

```
$document.bind('click', function(evt) {
    var x = evt.x,
        y = evt.y,
        rect = element[0].getBoundingClientRect();

    if(x > rect.left && x < rect.right && y > rect.top && y < rect.bottom) {
        //you've clicked somewhere in the element
    }
}); 
```

IE8+ 工作正常，但 5-7 有一个小错误

[http://www.quirksmode.org/dom/w3c_cssom.html](http://www.quirksmode.org/dom/w3c_cssom.html)

烦人的是，如果您的元素包含不影响其宽度/高度的其他元素，则不起作用。但是你可以使用这个（有点hacky）的解决方案

```
 link: function(scope, element, attrs) {

        var clicked = false;

        element.on('click', eClickHandler);
        $document.on('click', clickHandler);

        function eClickHandler(event) {
            clicked = true;
            $timeout(function() {
                clicked = false;
            });
        }

        function clickHandler(event) {
            if(!clicked) {
                // click occurred outside
            }
        }
    } 
```

# python - 如何在 Python 中分隔字符串中的标点符号？

> ID：15284132
> 
> 赞同：-1
> 
> 时间：2013-03-07T23:46:11.707
> 
> 标签：python, regex

我基本上是从文件中解析数据。在我的代码中的某个时刻，我根据空格字符 --> str.split(" ") 分割文件的每一行。我需要一种方法来分离字符串中可能出现的任何标点符号。

当我说标点符号时，我的意思是任何返回的字符

```
import string
print (string.punctuation) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T23:49:45.230

我会为此使用正则表达式：

```
>>> re.split(r'(\W)', 'This is a sentence. This is another sentence.')
    ['This',
 ' ',
 'is',
 ' ',
 'a',
 ' ',
 'sentence',
 '.',
 '',
 ' ',
 'This',
 ' ',
 'is',
 ' ',
 'another',
 ' ',
 'sentence',
 '.',
 ''] 
```

您可以遍历结果列表，更改单词，然后将`''.join()`其重新转换为在相同位置使用相同标点符号的句子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:49:53.923

坚持原版会更容易，不是吗？你把标点符号放回去的最终目标是什么？如果您只是要重建整条生产线，为什么不先保留它呢？

```
pattern = '['+''.join(string.punctuation)+']+' # Make a char set in regex syntax

for line in file:
    tokens = line.split(' ')
    for token in tokens:
        parsed = parse_token(re.sub(pattern, token))
        # Now do whatever else you might need to do with token and parsed.
    # Remember, you still have access to the `line` string and `tokens` list!

def parse_token(token):
    pass # Do whatever you need to do with your "clean" token here. 
```

# file - 使用 wgets 使用 shell 脚本连接到 txt 文件中的站点

> ID：15284133
> 
> 赞同：0
> 
> 时间：2013-03-07T23:46:19.250
> 
> 标签：file, shell, scripting

我正在尝试创建一个脚本，该脚本使用 wgets 从文件中的列表中访问每个 url。但是，当这样做而不是访问 website.com 时，它将尝试连接到 website.com/r/n。我知道这与文本编辑器中的文本格式有关，但我不确定如何让我的程序忽略这一点。这是我的代码：

```
 #!/bin/bash
    for i in `cat $1`
    do
    wget --spider $i 
    if wget --spider $i 2>&1 | grep --quiet "200 OK" ; then
        echo $i >> connected.txt
    else
        echo $i >> unsuccesful.txt
    fi
    rm wget-log
    done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:53:07.410

将此添加到脚本的顶部

```
dos2unix "$1" 
```

IHTH

# php - PHP遍历关联数组

> ID：15284135
> 
> 赞同：1
> 
> 时间：2013-03-07T23:46:23.403
> 
> 标签：php, associative-array

所以我有以下工作代码：

```
$arrayitertest=Array("Fruit"=>Array("Pear","Peach","Apple","Banana"),"Cars"=>Array("My budget","other cars."));

foreach ($arrayitertest as $key=>$value)
foreach($arrayitertest[$key] as $result) echo $key.":". $result."|"; 
```

但是当我改变它`foreach ($arrayitertest as $key => $value)`时`foreach ($arrayitertest as $key)`会引发一个致命错误（尽管我从未使用过 $key 变量。）

错误是：为 foreach() 提供的参数无效

有人可以告诉我为什么会这样吗？

**编辑：**哇，感谢所有答案....不过，我会接受目前最具体的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T23:53:51.380

就您的错误而言：如果您`$value`从第一个中删除`foreach`,`$key`将成为值并`$arrayitertest[$key]`成为`"pear"`第二个的无效参数`foreach`。

您的程序将在以下时间停止：

```
// this is not going to work
foreach ("pear" as $result) 
```

如果您不需要第一个密钥，则`foreach`可以将其更改为：

```
foreach ($arrayitertest as $value)
{
   foreach($value as $result)
   {
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T23:52:59.900

我认为您误解了键和值的顺序。你说`$value => $key`的是技术上的`$key => $value`。

解析数组的方法是这样的：

```
foreach ($array as $key => $value) {
    foreach ($array[$key] as $v) {
        // $v = Pear (1st iteration), Peach (2nd), Apple (3rd) ... (for key = Fruit) 
        // $v = My Budget (1st iteration), other cars. (2nd) (for key = Cars)
        // notice that $key is also accessible here
    }
} 
```

显然，如果您不需要，`$key`您可以简单地：

```
foreach ($array as $a)
    foreach ($a as $v)
        // use $v here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T23:55:12.950

编码 $value => $key, 将 Fruit, Car, ... 放入 $value。

仅编码 $value 会将诸如 Array("Pear","Peach","Apple","Banana") 之类的数组放入 $value 中，这不是数组的有效索引。

# asp.net-mvc-3 - 如果找不到指定的视图，是否可以渲染部分默认视图或错误视图？

> ID：15284136
> 
> 赞同：0
> 
> 时间：2013-03-07T23:46:26.440
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我正在使用 MVC3。

我想知道如果指定的视图不存在，是否可以呈现错误视图。

即如果“MyTableX”不存在：

```
RenderPartial("MyTableX"); 
```

将返回“Error.cshtml”作为部分视图，在页面中说“未找到部分视图”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:51:04.873

MVC 有一个名为 [HandleError] 的属性，您应该在 BaseController（或每个控制器）上设置它。无需为该属性指定任何选项。

[HandleError] 的问题是它无法处理 404（未找到），因此我们需要创建一个自定义错误控制器并告诉 ASP.NET 使用它（通过配置 web.config 并创建和 ErrorController）：

[http://blog.gauffin.org/2011/11/how-to-handle-errors-in-asp-net-mvc/#.UTknoxyfjmA](http://blog.gauffin.org/2011/11/how-to-handle-errors-in-asp-net-mvc/#.UTknoxyfjmA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:44:00.623

您可以基于此做一些事情 - 诀窍在于获取视图路径。缺少的视图会返回 InvalidOperationException。所以我们真的需要确定视图是否丢失或者它是否是由不同的东西引起的。一种方法是弄清楚如何在过滤器中获取 IView，将其转换为 RazorView 并从中获取路径 - 或者“hacky”方法是执行以下代码，但实际上寻找“视图”和异常消息中的“未找到”。我知道它很难看，但如果你想要今晚有用的东西，那就是我在睡觉前得到的所有东西，否则试着从那个过滤器中获取视图信息。

此链接中来自 Phil Haack 的这段代码可能有助于尝试获取路径名，快速测试导致我无法获取 IView，因为我的 filterContext.ParentActionViewContext 为空。 [在 ASP.NET MVC 中检索当前视图名称？](https://stackoverflow.com/questions/1268763/retrieve-the-current-view-name-in-asp-net-mvc)

所以我写了这个基本的，但同样，任何抛出 InvalidOperationException 的东西都会导致这个。

另请注意，缺少“MissingView.cshtml”可能会导致此处出现无限循环（未经测试的假设）

```
 [AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, Inherited = true, AllowMultiple = true)]
    public class ViewCheckFilterAttribute : FilterAttribute, IExceptionFilter
    {
        public void OnException(ExceptionContext filterContext)
        {
            var exception = filterContext.Exception;
            if (exception is System.InvalidOperationException)
            {
                //ideally here we check to ensure view doesn't exist as opposed
                //to something else raising this exception
                filterContext.Result = new ViewResult
                {
                    ViewName = "~/Views/Shared/MissingView.cshtml"
                };
                filterContext.ExceptionHandled = true;
            }
        }
    } 

```

# machine-learning - 机器学习，分类类型

> ID：15284139
> 
> 赞同：1
> 
> 时间：2013-03-07T23:46:42.387
> 
> 标签：machine-learning, classification, gesture-recognition, pattern-recognition

我正在为我的机器学习 (ML) 课程学习，但我有一个问题，我无法用我目前的知识找到答案。假设我有以下数据集，

```
att1 att2 att3 class
5    6    10   a
2    1    5    b
47   8    4    c
4    9    8    a
4    5    6    b 
```

上面的数据集很清楚，我想我可以在训练我的数据集后对新传入的数据应用分类算法。由于每个实例都有一个标签，因此很容易理解每​​个实例都有一个带有标签的类。现在，我的问题是，如果我们有一个由不同实例（例如手势识别数据）组成的类会怎样。任何类都会有多个指定其类的实例。例如，

```
xcor ycord depth 
45   100   10
50   20    45
10   51    12 
```

以上三个实例属于A类，下面三个实例属于B类，我的意思是这三个数据实例共同构成了该类。对于手势数据，您的手的移动坐标。

```
xcor ycord depth 
45   100   10
50   20    45
10   51    12 
```

现在，我希望将每个传入的三个实例分组为 A 或 B？是否可以在不单独标记每个实例的情况下将所有这些标记为 A 或 B？例如，假设以下组属于 B，所以我希望所有实例一起标记为 B，而不是单独标记为 B，因为它们与 A 类或 B 类的独立相似性？如果可能，我们怎么称呼它？

```
xcor ycord depth 
45   10    10
5    20    87
10   51    44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:31:55.700

您似乎对不同类型的机器学习感到困惑。

**[课堂上给出的数据集是监督](http://en.wikipedia.org/wiki/Supervised_learning)分类**算法的一个例子。也就是说，给定一些数据和一些类，学习一个分类器，该分类器可以预测新的、看不见的数据的类。您可以应用于此问题的分类器包括

*   [决策树](http://en.wikipedia.org/wiki/Decision_tree)_
*   [支持向量机](http://en.wikipedia.org/wiki/Support_vector_machine)
*   [人工神经网络](http://en.wikipedia.org/wiki/Artificial_neural_network)等

**[您描述的第二个问题是无监督](http://en.wikipedia.org/wiki/Unsupervised_learning)分类**问题的示例。也就是说，给定一些没有标签的数据，我们希望找到一种自动方法来通过算法分离不同类型的数据（您的 A 和 B）。解决这个问题的算法包括

*   [K-means 聚类](http://en.wikipedia.org/wiki/K-means)
*   [混合模型](http://en.wikipedia.org/wiki/Mixture_models)
*   [主成分分析](http://en.wikipedia.org/wiki/Principal_component_analysis)，然后进行某种聚类

我会考虑运行因子分析或规范化您的数据，然后运行 ​​K-means 或高斯混合模型。如果它们是可区分的，这应该会发现您的数据的 A 和 B 类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:51:41.213

我没有看到您可能希望将数据集中不确定数量的行分组为给定类的特征的场景。它们要么与一个类独立关联，要么都是特征，因此是唯一的行。就像是：

```
Instead of
xcor ycord depth 
45   10    10
5    20    87
10   51    44 
```

会是这样的：

```
xcor1 ycord1 depth1 xcor2 ycord2 depth2 xcor3 ycord3 depth3  
45      10    10      5    20     87     10     51    44 
```

这与用于建模时间序列的方法几乎相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:58:52.783

看看使用[神经网络识别手写文本](https://www.google.com/search?q=neural%20network%20handwriting)。您可以将手势视为带有额外时间组件的手写图形（因此，给每个像素一个“年龄”。）如果您的训练数据也包含类似的时间数据，那么我认为该技术应该很好地延续。

# spring - 如何在 JSP 中有条件地检查来自 Spring 的空验证错误消息？

> ID：15284141
> 
> 赞同：2
> 
> 时间：2013-03-07T23:46:48.783
> 
> 标签：spring, jsp, jstl, el

我有一个简单的问题。我们可以显示 Spring 的验证器生成的错误消息，如下所示。

```
<form:errors path='edId' cssStyle='font-weight: normal; color: red;'/> 
```

我正在使用一些 HTML`<ul><li></li></ul>`和 CSS 来显示此类消息。因此，即使没有错误，也会不必要地显示空白项目符号。

因此，我需要有条件地在 JSP 页面上检查消息是否实际上是空白的，例如，

```
<c:if test="${not empty edIdError}">
    <form:errors path='edId' cssStyle='font-weight: normal; color: red;'/>       
</c:if> 
```

但是测试这种`if`情况需要将错误消息存储到 JSP 上的某个变量中`<c:set var="edIdError"/>`（例如），这对我来说似乎是不可能的。可能吗？有没有其他方法可以做到这一点？

无论如何，我只想在消息不为空时显示带有一些 HTML 和 CSS 的消息。我正在使用 Spring 3.2.0。

是的，我有不同的情况，不能使用[这种](https://stackoverflow.com/a/14872463/1391249)方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:20:11.260

我忘记了关于`<c:set>`JSTL 标签的一个简单的事情。这是一个容器标签。因此，显然可以`<form:errors>`像下面这样将标签包含在其中。

```
<c:set var="edIdError"><form:errors path='edId'/></c:set> 
```

它将变量设置为`edIdError`来自 Spring 的实际错误消息。因此，现在可以有条件地检查它是否为空（和空），例如，

```
<c:if test="${not empty edIdError}">
    <form:errors path='edId' cssStyle='font-weight: normal; color: red;'/>
</c:if> 
```

在这种情况下不需要使用标签的`value`属性。`<c:set>`我可以根据需要使用 HTML 并在`<c:if>`条件块中应用 CSS。

# sharepoint - 仅使用用户名的 Sharepoint 身份验证

> ID：15284147
> 
> 赞同：1
> 
> 时间：2013-03-07T23:47:29.613
> 
> 标签：sharepoint, forms-authentication, single-sign-on

我目前有一个使用表单身份验证的 MVC 网站。

在这个网站中，我可以通过简单地在 aspnet_Membership 表中拥有一个与用户 ID 相对应的 GUID 来自动登录用户。我所做的只是查询表，然后使用他们的用户名我只需让表单身份验证设置身份验证 cookie。

我目前使用：

```
FormsAuthentication.RedirectFromLoginPage(username, false) 
```

但也可以选择使用：

```
FormsAuthentication.SetAuthCookie(username, false, "/") 
```

现在，我需要在 SharePoint 上做类似的事情。SP 确实有权访问我的会员表。

但是，似乎 SP 使用 SecurityTokens 进行验证：

```
 SecurityToken token = SPSecurityContext.SecurityTokenForFormsAuthentication(new Uri(SPContext.Current.Web.Url), formsClaimsAuthenticationProvider.MembershipProvider, formsClaimsAuthenticationProvider.RoleProvider, strUsername, strPassword);   

        if (null != token)   
        {   
            EstablishSessionWithToken(token);   
            Response.Redirect(strSource);
        } 
```

有没有办法通过简单地提供用户名而不是密码来获取这个令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:36:55.783

不完全确定，但您可以在使用 FBA（基于表单的身份验证）时创建自己的登录页面。在该自定义登录页面中，您可以执行任何您想要对用户进行身份验证的操作。

*   [在 SharePoint 2010 中为 FBA 创建自定义登录页面](http://blogs.msdn.com/b/chunliu/archive/2010/08/21/creating-a-custom-login-page-for-fba-in-sharepoint-2010.aspx)

当然，您必须[首先为 FBA 配置 SharePoint，](http://blogs.technet.com/b/mahesm/archive/2010/04/07/configure-forms-based-authentication-fba-with-sharepoint-2010.aspx)这是[一个相当“复杂”的](http://donalconlon.wordpress.com/2010/02/23/configuring-forms-base-authentication-for-sharepoint-2010-using-iis7/)过程。

如果这还不够，并且 SQLMembershipProvider 不是您想要的，您甚至可以编写自己的成员资格提供程序/角色提供程序，它完全符合您的要求：使用 GUID 等。

# c# - 使用 DAL BLL 函数的 Windows 窗体不显示对象

> ID：15284149
> 
> 赞同：0
> 
> 时间：2013-03-07T23:47:52.320
> 
> 标签：c#, winforms, data-access-layer

我的 EmployeeDB 类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;
using System.Data;

namespace Test
{
    public class EmployeeDB
    {
        private string connectionString;

        public EmployeeDB()
        {
            //my connectionstring info
        }

        public int CountEmployees()
        {
            SqlConnection con = new SqlConnection(connectionString);
            SqlCommand cmd = new SqlCommand("CountEmployees", con);
            cmd.CommandType = CommandType.StoredProcedure;

            try
            {
                con.Open();
                return (int)cmd.ExecuteScalar();
            }
            catch (SqlException err)
            {
                // Replace the error with something less specific.
                // You could also log the error now.
                throw new ApplicationException("Data error.");
            }
            finally
            {
                con.Close();
            }
        }

        public List<EmployeeDetails> GetEmployees()
        {
            SqlConnection con = new SqlConnection(connectionString);
            SqlCommand cmd = new SqlCommand("GetAllEmployees", con);
            cmd.CommandType = CommandType.StoredProcedure;

            // Create a collection for all the employee records.
            List<EmployeeDetails> employees = new List<EmployeeDetails>();

            try
            {
                con.Open();
                SqlDataReader reader = cmd.ExecuteReader();

                while (reader.Read())
                {
                    EmployeeDetails emp = new EmployeeDetails(
                        (int)reader["EmployeeID"], (string)reader["FirstName"],
                        (string)reader["LastName"], (string)reader["TitleOfCourtesy"]);
                    employees.Add(emp);
                }
                reader.Close();

                return employees;
            }
            catch (SqlException err)
            {
                // Replace the error with something less specific.
                // You could also log the error now.
                throw new ApplicationException("Data error.");
            }
            finally
            {
                con.Close();
            }
        }
    }
} 
```

我的员工详细信息类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;

namespace Test
{
    public class EmployeeDetails
    {
private int employeeID;
        private string firstName;
        private string lastName;
        private string titleOfCourtesy;

        public int EmployeeID
        {
            get {return employeeID;}
            set {employeeID = value;}
        }
        public string FirstName
        {
            get {return firstName;}
            set {firstName = value;}
        }
        public string LastName
        {
            get {return lastName;}
            set {lastName = value;}
        }
        public string TitleOfCourtesy
        {
            get {return titleOfCourtesy;}
            set {titleOfCourtesy = value;}
        }

        public EmployeeDetails(int employeeID, string firstName, string lastName,
            string titleOfCourtesy)
        {
            this.employeeID = employeeID;
            this.firstName = firstName;
            this.lastName = lastName;
            this.titleOfCourtesy = titleOfCourtesy;
        }

        public EmployeeDetails(){}

    }
} 
```

当我构建类库并将引用添加到我的 windows 窗体项目时。

这是该课程显示的主要表格的屏幕截图；但是，没有方法。 ![在此处输入图像描述](../Images/18d2c2929b9aceac004ba5ef862a2243.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:06:53.883

要绑定到 DataGrid：

1.  在表单中添加一个 BindingSource (bindingSource)
2.  将 DataGrid 的 DataSource 属性设置为 bindingSource
3.  将 bindingSource 的 DataSource 属性设置为 GetEmployees() 的结果

如果您的库具有以下实现，例如：

```
public interface IDataOperation
{
    List<Employee> GetEmployees();
}

public class DataOperation : IDataOperation
{
    public List<Employee> GetEmployees(){}
} 
```

您的实现应如下所示：

```
IDataOperation dataOperation = new DataOperation();

var bindingSource = new BindingSource();
dataGrid.DataSource = bindingSource;
bindingSource.DataSource = dataOperation.GetEmployees(); 
```

或者，您可以直接以编程方式将 DataGrid 的 DataSource 属性设置为 GetEmployees() 的结果，而不使用 BindingSource：

```
dataGrid.DataSource = dataOperation.GetEmployees(); 
```

编辑：在您的屏幕截图中，您应该在使用它之前实例化您的 EmployeeDB，如下面的代码：

```
Test.EmployeeDB employeeDB = new Test.EmployeeDB();
dataGrid.DataSource = employeeDB.GetEmployees(); // assuming you have a dataGrid control 
```

# mysql - 带有 mysql 的 Visual Basic 组合框

> ID：15284151
> 
> 赞同：1
> 
> 时间：2013-03-07T23:48:03.723
> 
> 标签：mysql, vb.net, combobox

我有这个用 MySQL 表中的数据填充组合框的 VB 代码

```
Dim sStmt As String = "SELECT sequence, name FROM product_categories"
            Dim cmd As New MySqlCommand(sStmt, sqlcon)

            Dim da As MySqlDataAdapter = New MySqlDataAdapter(cmd)
            Dim dt As New DataTable("product_categories")
            da.Fill(dt)

            If dt.Rows.Count > 0 Then
                category.DataSource = dt
                category.DisplayMember = "name" 'What is displayed
                category.ValueMember = "sequence" 'The ID of the row
            End If 
```

在 MySQL 表中的所有数据上方的列表顶部添加一个选项以表示 none 的最简单方法是什么，其值也为 none？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:19:20.827

添加一个 'sequence' 为 0 的行，命名为 'none'

```
Dim newRow = dt.NewRow()
newRow("sequence") = 0
newRow("name") = "none"
dt.Rows.Add(newRow) 
```

当然，您将需要专门处理这一行，如果您决定写回数据库，则不要插入它。

[有关详细信息，请参阅http://msdn.microsoft.com/en-us/library/5ycd1034(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/5ycd1034(v=vs.80).aspx)中的“将新记录插入无类型数据集” 。

# python - 瓶子如何返回二进制文件

> ID：15284154
> 
> 赞同：5
> 
> 时间：2013-03-07T23:48:12.207
> 
> 标签：python, nginx, uwsgi, bottle

我想制作`bottle`python web 服务来提供二进制文件，如 pdf、图片和 exe 并进行身份验证。

是否可以使用瓶子提供所有这些文件？我很难找到一个教程。

怎么样`performance`？Bottle python 是否同时处理数十万次下载？

我打算将它与`nginx` `uwsgi`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:59:33.153

绝对可以使用瓶子来提供这些文件。您只需将它们作为静态文件提供。就身份验证而言，我不相信瓶子带有身份验证支持（据我所知）。但是，就性能而言，这是一个真正取决于您如何部署它的领域。在常规线程环境中，每个请求都有自己的***常规***线程，我非常怀疑您的服务器是否能够轻松地同时处理数十万个请求。但是，文档中指出，这`greenlets`可能可以让您克服此问题。

# 资源：

瓶静态文件服务：[http ://bottlepy.org/docs/dev/tutorial.html#routing-static-files](http://bottlepy.org/docs/dev/tutorial.html#routing-static-files)

瓶子greenlets：[http ://bottlepy.org/docs/dev/async.html#greenlets-to-the-rescue](http://bottlepy.org/docs/dev/async.html#greenlets-to-the-rescue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:06:17.213

如果您不着急，我建议您尝试 uWSGI 1.9（它仍在开发中，但第一个稳定版本将在 10 天内发布）并使用 offload-threads = n（将其设置为 cpu 的数量）。这样，当您从应用程序发送文件时，它将由另一个线程异步（且非阻塞）提供服务，从而突然释放您的工作人员。卸载在 1.4 中也可用，但对于 1.9 中的应用程序来说不是自动的

# fiddler - 如何设置 Fiddler 一次发出多个请求？

> ID：15284155
> 
> 赞同：2
> 
> 时间：2013-03-07T23:48:13.737
> 
> 标签：fiddler

我的提琴手暂存器中有以下请求，想知道如何一次发送所有请求？

我只是在灭火期间对我们的服务器进行抽查，以查看响应代码和响应时间。

```
GET http://xx.xx.xxx.123/api/1/getit?what=this HTTP/1.1
Host: xx.xx.xxx.123
User-Agent: Fiddler
accept: text/xml

GET http://xx.xx.xxx.321/api/1/getit?what=this HTTP/1.1
Host: xx.xx.xxx.321
User-Agent: Fiddler
accept: text/xml

o o o 
```

我真正希望在提琴手的便签本中具有突出显示多个请求并将它们同时发送出去的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:03:06.597

不要使用暂存器，而是保存一个包含所需请求的 SAZ 文件。当您想要播放它们时，加载 SAZ 文件，全选，然后按**R**或**V**键。

（在此处了解有关新验证功能的更多信息：[http://www.telerik.com/automated-testing-tools/blog/eric-lawrence/13-02-08/announcing-fiddler-2-4-3-beta。 .aspx](http://www.telerik.com/automated-testing-tools/blog/eric-lawrence/13-02-08/announcing-fiddler-2-4-3-beta.aspx) )

# plugins - 如何在 Firebreath 插件中获取 NPP 实例？

> ID：15284156
> 
> 赞同：2
> 
> 时间：2013-03-07T23:48:19.620
> 
> 标签：plugins, cookies, npapi, firebreath

在从 FB::PluginCore（或 FB::JSAPIAuto）派生的类中，例如在 onPluginReady() 或 JS 方法处理程序中，我想访问 NPP 实例。获取此指针的最佳做法是什么？

基本目标是能够调用 NPN_SetValueForURL 来设置 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:17:15.033

您可以在 NpapiBrowserHost 对象上调用任何 NPN 函数，这实际上是 BrowserHost。

```
FB::Npapi::NpapiBrowserHostPtr npapiHost = FB::ptr_cast<FB::Npapi::NpapiBrowserHost>(m_host); 
```

我认为它上面有 SetValueForURL，但如果它丢失了，你可以随时添加它并提交拉取请求；只要合理，我都会接受。

# c# - 将 XmlTextReader 编码设置为“windows-1252”

> ID：15284157
> 
> 赞同：5
> 
> 时间：2013-03-07T23:48:20.643
> 
> 标签：c#, .net, xml, encoding

读取 xml 时如何将 XmlTextReader 编码设置为“windows-1252”。我不想使用 xml 中的编码。

```
XmlTextReader xtr = new XmlTextReader(pathToXML); 
```

注意：我必须使用 XmlTextReader 而不是 StreamReader 以保留换行符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T23:52:22.933

```
StreamReader reader = new System.IO.StreamReader(pathToXML, System.Text.Encoding.GetEncoding("Windows-1252"), true);
XmlTextReader xmlReader = new XmlTextReader(reader); 
```

应该管用

# zend-framework2 - 如何在 getList() 中获取额外数据？

> ID：15284158
> 
> 赞同：0
> 
> 时间：2013-03-07T23:48:21.807
> 
> 标签：zend-framework2

我有控制器：

```
class MyController extends AbstractRestfulController{

    protected $myTable;

    public function getList(){
        $results = $this->getMyTable()->fetchAll();
        $data = array();
        foreach($results as $result) {
            $data[] = $result;
        }
        return new JsonModel(array(
            'data' => $data
        ));
    }

[...] 
```

我检查：

```
 curl -i -H "Accept: application/json" http://localhost/myapp/restroute -X GET 
```

没关系。但我想向这个方法发送额外的数据，例如：

```
 curl -i -H "Accept: application/json" http://localhost/myapp/restroute -X GET -d "name=john" 
```

如何在 getList() 方法中读取这些数据？

我可以使用 create($data) 方法，但不知何故它不适合我（create 方法用于创建等）。例如，我想要获取由 $_GET 中的变量限制的某些类型的对象的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T07:43:23.257

在`AbstractRestfulController`中，有一个名为的辅助方法`processBodyContent`非常适合您尝试执行的操作：

```
public function getList()
{
    $content = $this->processBodyContent($this->getRequest());
    $name = array_key_exists('name', $content) ? $content['name'] : '';

    // ...
} 
```

当您使用 GET 思想时，您应该考虑这样做：

```
 curl -i -H "Accept: application/json" http://localhost/myapp/restroute?name=john -X GET 
```

然后，您可以`getList()`像这样检索：

```
public function getList()
{
    $name = $this->params()->fromQuery('name');

    // ...
} 
```

# iphone - 系统函数的汇编代码（iPhone）

> ID：15284160
> 
> 赞同：0
> 
> 时间：2013-03-07T23:48:26.550
> 
> 标签：iphone, assembly, system, system-calls

可能是一个非常愚蠢的问题，但是有人可以解释为什么不能编写汇编代码来触发系统功能或控制硬件吗？例如，是否不可能编写代码来关闭/打开屏幕，甚至是设备的手机？

我不是在谈论越狱设备，也不是为应用商店制作应用程序。带有程序集以调用系统函数的普通应用程序。

如果确实可能，任何人都有一个很好的参考或起点来完成这些任务？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:29:51.707

iPhone 使用受内存保护的操作系统，其中每个用户进程都包含在自己的虚拟内存地址空间中。地址空间受内存管理单元 (MMU) 硬件保护，尝试访问操作系统为进程分配的区域之外的内存将导致异常。操作系统为自己保留硬件内存范围，并且不使其可供用户进程使用。因此，不可能从用户进程直接连接到硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:06:07.667

当然可以从汇编代码中调用系统函数。您认为 C 或 C++ 应用程序是做什么的？它正是这样做的。C/C++ 和汇编代码最终都会（在编译时）转换为 CPU 执行的机器代码。

我不确定指南在哪里可以做这样的事情，但是您当然可以在调试器中运行 C 程序并查看它如何调用各种系统函数，或者您可以反汇编该程序并阅读反汇编而不运行该程序调试器。

在任何情况下，用汇编程序编写的程序都不会比用 C 编写的程序对设备有更多的控制权。操作系统应该限制对 CPU 级别的某些 I/O 设备和内存区域的直接访问，其中没有汇编和C的区别，对CPU来说都是一样的，只是机器码中的一堆指令。

# ios - 在后台启动应用程序时如何避免加载视图控制器/视图？

> ID：15284163
> 
> 赞同：2
> 
> 时间：2013-03-07T23:49:02.647
> 
> 标签：ios, objective-c, memory-management

由于位置事件，我正在开发一个可以在后台启动的应用程序。从日志中我看到，当这种情况发生时，我的初始 viewController 也会被加载。有没有办法只在应用程序实际激活时才加载？初始视图控制器是通过情节提要设置的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:03:21.230

您可以按如下方式抑制应用程序窗口的自动设置：在情节提要中选择初始视图控制器，转到属性检查器并取消选择“初始场景 -> 是初始视图控制器”。这将产生一个警告，因为该场景现在无法到达。转到身份检查器并设置 Storyboard ID。

为了让应用程序在您需要时正常工作，请手动设置窗口...

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    BOOL condition = /* whatever condition that makes you want to present the UI */
    if (!application.keyWindow.rootViewController && condition) {
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        // use the your view controller subclass here if you've made one
        UIViewController *vc= [storyboard instantiateViewControllerWithIdentifier:@"the identifier"];
    application.keyWindow.rootViewController = vc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:59:59.403

在您的 App Delegate 中设置位置管理器并在那里处理位置事件。将 App Delegate 设置为该位置经理的代表。

# php - 这可以在不使用两个 for 循环的情况下计算吗

> ID：15284165
> 
> 赞同：0
> 
> 时间：2013-03-07T23:49:28.247
> 
> 标签：php, algorithm, sorting

我在数组中有以下数据结构，我正在尝试计算总持续时间：

```
 $elements = array(
                        'elementfrom-work' => "09:00",
                        'elementto-work' => "17:00",
                        'elementdays-work' => "5",

                        'elementfrom-karate' => "18:00",
                        'elementto-karate' => "20:00",
                        'elementdays-karate' => "3",

                        'elementfrom-stamp' => "21:00",
                        'elementto-stamp' => "22:00",
                        //it doest have the default days 'elementdays-stamp' set
                         //so it will take the default 7
                        'element-simple1' => "4", //it will take the default 7
                        'element-simple2' => "8",  //it will take the default 7
                        'element-simple3' => "1",
                        'elementdays-simple3' => "1", //day is set
    ); 
```

我已经设法做到了，但是我的代码很混乱，对于每个项目，它都会获取子字符串并运行另一个 for 循环以检查是否存在其他不简单的元素（例如天）。

我正在尝试计算每个项目的总持续时间，例如结果是：

```
Work:40
Karate:6
Stamp:7
Simple1=28
Simple2=56
Simple3=1

total duration:138 
```

这可以在没有两个 for 循环的情况下完成吗？如何？如果不可能，您将如何计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:54:32.837

看起来您知道日期项目的预期名称...检查它是否存在而不是循环，迭代数组键，当您到达“elementfrom-work”时，您可以检查数组是否有键“elementdays-work”的重复以 N 级复杂度搜索此项目...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:02:04.897

我实际上发现这个问题很有趣，因此您可以执行以下操作：

```
$elements[] = array(
    'elementfrom-work' => "09:00",
    'elementto-work' => "17:00",
    'elementdays-work' => "7",

    'elementfrom-karate' => "18:00",
    'elementto-karate' => "20:00",
    'elementdays-karate' => "3",

    'elementfrom-stamp' => "21:00",
    'elementto-stamp' => "22:00",

    'a' => "21:00",
    'b' => "22:00"
); 
```

并使用这两个功能：

```
function negative($x)
{
    if($x < 0)
    {
        return -$x;
    }
    return $x;
}

function isTime($string)
{
    $split = explode(":", $string);

    if(isset($split[1]))
    {
        return true;
    }
    return false;
}

foreach($elements as $key => $val)
{
    $total = 0;
    $temp = 0;
    $i = 0;
    foreach($val as $innerKey => $time)
    {
        $isTime = isTime($time);
        $split = explode(":", $time);
        $h = $split[0];

        switch($i)
        {
            case 0:
                $temp -= $h;
                break;

            case 1:
                $temp += $h;
                break;

            case 2:
                if($isTime)
                {
                    $mult = $temp *= 7;
                    $unsigned = negative($mult);
                    $total += $unsigned;
                    $temp = 0;
                    $temp -= $h;
                    $i = 0;
                    break;
                }
                $mult = $temp *= $h;
                $unsigned = negative($mult);
                $total += $unsigned;
                $temp = 0;
                $i = -1;
                break;

            default:
                 break;
        }
        $i++;
    }
    echo $total;
} 
```

你对进位的想法有点时髦，但类似的东西应该可行。

# java - Coldfusion 运行时源代码

> ID：15284172
> 
> 赞同：0
> 
> 时间：2013-03-07T23:49:50.983
> 
> 标签：java, coldfusion, decompiling, coldfusion-8, cfml

再会，

我想知道是否可以查看/调试/破解 Coldfusion.runtime 源代码。

具体来说，我遇到了如下所示的内存不足错误：

```
allocLargeObjectOrArray: [C, size 8388624 
java.lang.OutOfMemoryError: allocLargeObjectOrArray: [C, size 8388624 at
java.util.Arrays.copyOf(Arrays.java:2882) at
java.io.CharArrayWriter.write(CharArrayWriter.java:105) at
coldfusion.runtime.CharBuffer.replace(CharBuffer.java:37) at
coldfusion.runtime.CharBuffer.replace(CharBuffer.java:50) at
coldfusion.runtime.NeoBodyContent.write(NeoBodyContent.java:254) at
[My Code] 
```

我想知道 CharBuffer 正在替换什么以及为什么，它正在复制什么数组以及为什么等等，以便我可以调整我的代码。

我的代码 cfloop 通过查询输出其字段，包括“IIf”语句和“de”函数调用。

我知道我可以修改代码，并等待它再次崩溃（或不崩溃），但我更愿意确切地了解问题所在，而不是使用试错法。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:49:55.967

第一个选项是设置[HeapDumpOnOutOfMemoryError](http://www.oracle.com/technetwork/java/javase/memleaks-137499.html#gdyrr)，然后在[JHAT](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)中打开转储以查找占用空间的内容。鉴于错误代码试图复制一个大缓冲区，内存中应该已经有一个。那应该指向错误的方向

您几乎可以肯定地执行以下操作，但如果您愿意：

*   安装 Eclipse
*   安装为其存在的 java 反编译器之一
*   创建一个新项目
*   将 cfusion.jar 添加到项目中
*   阅读代码
*   将 ColdFusion 配置为侦听端口以进行调试 (-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1044)
*   设置一些断点
*   使用上面的端口在 Eclipse 中设置远程调试会话

这应该使您能够在线程出错时停止线程并检查变量。您的代码中的某些内容似乎正在创建一个 8.3 meg 字符串。能够检查内存可能会有很大帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:18:13.173

获取免费的 Java 反编译器：http: [//jd.benow.ca/](http://java.decompiler.free.fr/?q=jdgui)。

在您的 ColdFusion 安装目录中搜索该`cfusion.jar`文件。

用反编译器打开它。`CharBuffer`应该在里面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T04:06:46.720

最后，它只是归结为 Coldfusion 如何缓冲其页面。

它管理自己的[java.io.CharArrayWriter](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java.io/CharArrayWriter.java.html)实现，参见第 88 行，当 char[] 变满时，它的大小将翻倍。

对我来说似乎很合理。但是我们的一些页面非常大，8mb * 20 个并发页面请求意味着大量的 RAM 活动。

我只需要努力减小我们页面的大小......

# c# - 无法使用隐式 SSL smtp 服务器发送电子邮件

> ID：15284178
> 
> 赞同：0
> 
> 时间：2013-03-07T23:50:41.677
> 
> 标签：c#, ssl, smtp, smtpclient

[我通过复制这篇知识库文章](http://support.microsoft.com/kb/555287)中的代码编写了一个示例程序，并在用户信息方面稍作编辑。它使用已弃用的 .NET 库 System.Web.Mail 来执行此操作，因为新的 System.Net.Mail 不支持隐式 SSL。我在端口 465 上使用 Google smtp 服务器对其进行了测试，这是他们的隐式电子邮件端口，一切正常。然而，当我把它交给客户在他的网络上测试它时，没有任何东西被发送/接收，这是错误：

```
2013-03-07 15:33:43 - The transport failed to connect to the server.
2013-03-07 15:33:43 -    at System.Web.Mail.SmtpMail.LateBoundAccessHelper.CallMethod(Object obj, String methodName, Object[] args)
2013-03-07 15:33:43 -    at System.Web.Mail.SmtpMail.CdoSysHelper.Send(MailMessage message)
2013-03-07 15:33:43 -    at System.Web.Mail.SmtpMail.Send(MailMessage message) 
```

在电子邮件 SSL 方面，我不是很精通，所以这是我对根本原因的可能理论：

假设他正在使用正确的 smtp 服务器和正确的端口（SSL 端口），我想知道是否有以下任何原因可能是原因：

1.  他们在邮件服务器上使用 SSL，但他没有在运行我的程序的机器上安装证书，即使他在同一个域中并且使用相同的电子邮件域作为发件人。

2.  他们正在使用 SSL，但他们可能使用 NTLM 或匿名身份验证，而我的程序使用基本身份验证。

对不起，如果我提供的信息很少，因为我自己在这个领域很陌生，所以我还在研究更多。

你知道我可以做些什么来确保我的小测试程序可以使用隐式 SSL 电子邮件服务器的 smtp 服务器发送吗？

编辑：我确实在我的代码中添加了以下行以表明我正在使用 SSL。

```
oMsg.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpusessl", "true"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T04:01:22.300

也许现在回答太晚了，但看看[https://sourceforge.net/p/netimplicitssl/wiki/Home/](https://sourceforge.net/p/netimplicitssl/wiki/Home/)

您可以将邮件发送到端口 465，而无需修改代码。

从项目的维基页面：

```
var mailMessage = new MimeMailMessage();
mailMessage.Subject = "test mail";
mailMessage.Body = "hi dude!";
mailMessage.Sender = new MimeMailAddress("you@gmail.com", "your name");
mailMessage.IsBodyHtml = true;
mailMessage.To.Add(new MimeMailAddress("yourfriend@gmail.com", "your friendd's name")); 
mailMessage.Attachments.Add(new MimeAttachment("your file address"));
var emailer = new SmtpSocketClient();
emailer.Host = "your mail server address";
emailer.Port = 465;
emailer.EnableSsl = true;
emailer.User = "mail sever user name";
emailer.Password = "mail sever password" ;
emailer.AuthenticationMode = AuthenticationType.PlainText;
emailer.MailMessage = mailMessage;
emailer.OnMailSent += new SendCompletedEventHandler(OnMailSent);
//Send email
emailer.SendMessageAsync();

// A simple call back function:
private void OnMailSent(object sender, AsyncCompletedEventArgs asynccompletedeventargs)
{
    Console.Out.WriteLine(asynccompletedeventargs.UserState.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:07:29.720

在这里，我使用 gmail smtp 使用 c# 发送邮件。请参阅下面的代码。它会给你一个洞察力，这些东西是如何工作的。将 gmail 设置替换为您的电子邮件服务器设置。不要担心安全证书，它们将由框架本身处理。

```
 public static bool SendMail(string to, string subject, string body)
    {
        bool result;
        try
        {
            var mailMessage = new MailMessage
            {
                From = new MailAddress("your email address")
            };

            mailMessage.To.Add(new MailAddress(to));
            mailMessage.IsBodyHtml = true;
            mailMessage.Subject = subject;
            mailMessage.Body = body;
            var userName = "your gmail username";
            var password = "your gmail password here";
            var smtpClient = new SmtpClient
            {
                Credentials = new NetworkCredential(userName, password),
                Host = smtp.gmail.com,
                Port = 587,
                EnableSsl = true
            };

            smtpClient.Send(mailMessage);
            result = true;
        }
        catch (Exception)
        {
            result = false;
        }
        return result;
    } 
```

您引用的那段代码也很老旧。CDO 在 ASP 应用程序中用于发送邮件。我想你还没有向下滚动查看

```
Article ID: 555287 - Last Review: April 7, 2005 - Revision: 1.0
APPLIES TO
Microsoft .NET Framework 1.1 
```

你指的是一个很旧的代码......无论如何按照显示的代码，一切都会好起来的......

**更新**

我的错，我没有仔细阅读。但

> 我将保留上面的代码，因为它可能对您或任何其他人有所帮助，他们以后需要通过 SSL over gmail 或任何其他服务器的邮件功能。

. 那么在这种情况下，您需要一些第三方应用程序。我为您找到了一个图书馆[，请参见此处](http://www.emailarchitect.net/easendmail/ex/c/3.aspx)

# javascript - 在 javascript 中舍入或舍入的更好方法

> ID：15284179
> 
> 赞同：2
> 
> 时间：2013-03-07T23:50:55.840
> 
> 标签：javascript

我在用javascript四舍五入或四舍五入时遇到了这个问题。好吧，它完成了工作，但在某些情况下它无法正确完成工作。

例如。

价格为 0.30，折扣为 15%，结果应为 0.255 或 0.26。（这在某种程度上还可以）

价格为 79.99，折扣 50%，结果应该是 40。（实际结果为 39.995）

尝试将此作为参考[使用 toFixed(2) 和数学舍入来获得正确的舍入](https://stackoverflow.com/questions/2861055/using-tofixed2-and-math-round-to-get-correct-rounding)

也做了这个过程`Math.round(value*Math.pow(10,dec))/Math.pow(10,dec);`

有任何想法吗？

谢谢

这是我的初步测试。虽然这只是一个初始测试，但如果最后两位数字大于 5，我所做的检查然后将`Math.ceil`其应用于`0.255`to ，`0.26`但是当使用`39.99`结果时仍然`39.99`应该`39.99`使用`Math.round`，以便结果为`40`.

如果需要四舍五入或需要四舍五入，我想要完成的是能够向上或向下舍入任何数字。

**更新**

我能够解决我自己的问题。（至少对我的特定环境）

[http://jsfiddle.net/xMj3M/4/](http://jsfiddle.net/xMj3M/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:11:27.500

这是因为浮动的处理方式。我建议您仅将原始数字设为整数，因此您可以从`7999`. 如果你使用这个方法，你会得到正确的结果。

一般来说，尤其是在处理金钱的时候，总是先以便士为单位工作，然后以货币的格式输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:03:30.297

你可以试试：

```
var someNumber = 36.7327;
var someNumberRoundedTo2Decimals = (Math.round((someNumber * 100)) / 100);
// = 36.73 
```

基本上这会将小数点向右移动 2 位..

```
3673.27 
```

然后将其四舍五入为 int

```
3673 
```

然后将小数点左移 2 位

```
36.73 
```

# function - 用函数作为参数定义函数

> ID：15284181
> 
> 赞同：0
> 
> 时间：2013-03-07T23:51:02.740
> 
> 标签：function, functional-programming, ocaml

我目前正在尝试定义一个 ('a -> 'a) -> 'a -> 'a 类型的函数，它接受一个 'a -> 'a 类型的函数和一个 'a 类型的参数并调用该函数两次关于论点。我对 OCaml 比较陌生，但我确实知道如何定义一个函数，但我没有运气尝试和错误，或者谷歌试图让一个函数将一个函数作为参数然后应用该函数两次。

任何提示或指示将不胜感激，在此先感谢。

编辑：感谢下面的杰弗里，我的问题现在解决了。

# 让 f4 ga = g (ga );;

val f4 : ('a -> 'a) -> 'a -> 'a =

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:56:17.043

OCaml 推断类型，因此如果您将参数用作函数，它会推断它是一个函数。这是一个例子：

```
# let f g = g 8 + g 10;;
val f : (int -> int) -> int = <fun>
# (~-);;
- : int -> int = <fun>
# f (~-);;
- : int = -18 
```

要理解该示例，请注意这`(~-)`是普通的整数否定运算符。

**更新**：提示您更复杂的问题。您需要*测试*的值`n`。也许一个`if`声明会起作用？第二个提示：如果使用递归，则不需要使用循环。如果要使用循环，请不要使用递归。（我个人建议使用递归，就像在学习钢琴时弹奏音阶一样。）

# ruby - ruby：如何在数组中查找非唯一元素并打印每个元素的出现次数？

> ID：15284182
> 
> 赞同：19
> 
> 时间：2013-03-07T23:51:03.537
> 
> 标签：ruby, arrays

我有

```
a = ["a", "d", "c", "b", "b", "c", "c"] 
```

并且需要打印类似的东西（按出现次数降序排序）：

```
c:3
b:2 
```

我了解第一部分（发现非唯一）是：

```
b = a.select{ |e| a.count(e) > 1 }
=> ["c", "b", "b", "c", "c"] 
```

或者

```
puts b.select{|e, c| [e, a.count(e)] }.uniq

c
b 
```

如何输出每个非唯一且出现次数向后排序？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T00:00:50.070

```
puts a.uniq.
       map { | e | [a.count(e), e] }.
       select { | c, _ | c > 1 }.
       sort.reverse.
       map { | c, e | "#{e}:#{c}" } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-08T00:02:32.730

该`group_by`方法经常用于此目的：

```
a.group_by{ |i| 一世 }
{
    “一个” => [
        [0] “一”
    ],
    “d” => [
        [0] "d"
    ],
    "c" => [
        [0] "c",
        [1] "c",
        [2] "c"
    ],
    "b" => [
        [0] "b",
        [1] “乙”
    ]
}

```

我喜欢：

```
a.group_by{ |i| i }.each_with_object({}) { |(k,v), h| h[k] = v.size }
{
    “一” => 1，
    "d" => 1,
    "c" => 3,
    "b" => 2
}

```

或者：

```
哈希[a.group_by{ |i| i }.map{ |k,v| [k, v.size] }]
{
    “一” => 1，
    "d" => 1,
    "c" => 3,
    "b" => 2
}

```

其中之一可能会抓挠你的痒。从那里你可以使用一个小测试来减少结果：

```
哈希[a.group_by{ |i| i }.map{ |k,v| v.size > 1 && [k, v.size] }]
{
    "c" => 3,
    "b" => 2
}

```

如果您只想打印信息，请使用：

```
将 a.group_by{ |i| i }.map{ |k,v| "#{k}: #{v.size}" }
一个：1
d: 1
三：3
乙：2

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T00:26:56.310

怎么样：

```
a.sort.chunk{|x| a.count(x)}.sort.reverse.each do |n, v|
  puts "#{v[0]}:#{n}" if n > 1
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T00:32:52.937

我个人喜欢这个解决方案：

```
 a.inject({}) {|hash, val| hash[val] ||= 0; hash[val] += 1; hash}.
   reject{|key, value| value == 1}.sort.reverse.
   each_pair{|k,v| puts("#{k}:#{v}")} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-08T10:24:19.333

从 Ruby 2.7 开始，您可以使用[`Enumerable#tally`](https://rubydoc.info/stdlib/core/Enumerable:tally)和编号的块参数：

```
a = ["a", "d", "c", "b", "b", "c", "c"]
puts a.tally.filter { _2 > 1 }.sort_by { -_2 }.map &:first 
```

在这里，`Enumerable#tally`返回一个类似于 的哈希`{ 'a' => 1, 'b' => 2, ... }`，然后您必须对其进行过滤和排序。排序后，哈希将折叠为嵌套数组，例如`[['b', 2], ...]`. 最后一步是获取每个数组元素的第一个参数，使用`&:first`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T00:00:02.633

这会给你一个哈希`element => occurrences`：

```
b.reduce(Hash.new(0)) do |hash, element|
  hash[element] += 1
  hash
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T00:06:18.187

```
puts a.uniq.
     map { |e| a.count(e) > 1 ? [e, a.count(e)] : nil }.compact.
     sort { |a, b| b.last <=> a.last } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T00:08:05.000

```
a.reduce(Hash.new(0)) { |memo,x| memo[x] += 1; memo } # Frequency count.
  .select { |_,count| count > 1 } # Choose non-unique items.
  .sort_by { |x| -x[1] } # Sort by number of occurrences descending.
# => [["c", 3], ["b", 2]] 
```

还：

```
a.group_by{|x|x}.map{|k,v|[k,v.size]}.select{|x|x[1]>1}.sort_by{|x|-x[1]}
# => [["c", 3], ["b", 2]] 
```

# java - 如果是这样的话，超级做什么可以有人解释一下吗

> ID：15284183
> 
> 赞同：0
> 
> 时间：2013-03-07T23:51:03.720
> 
> 标签：java, android

我正在浏览网络并查找代码示例并尝试理解它们。在这个我相信 super 什么都不做是正确的。在 ecipe 它告诉我它来自 Objects 类。在 Java 中有一个教程。

我正在尝试了解我将对象创建为“ArrayAdapter”和“ListAdapter”之间的联系，并且在 Android 4 开放模板中他们使用“ListFragment”，所以即使我不明白这是我也会相信的正确学习这种将列表添加到页面以进行“主详细信息”选择的方式。

链接[Java 教程](http://developer.android.com/reference/java/lang/Object.html):: [Android 文档](http://developer.android.com/reference/java/lang/Object.html "安卓"):: [ArrayAdapter 教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

我想我只是错过了船。

```
public class Weather {
public int icon;
public String title;

public Weather(){
    super();
}

public Weather(int icon, String title) {
    super();
    this.icon = icon;
    this.title = title;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T23:55:52.027

永远不需要调用`super()`构造函数，因为如果你不这样做，编译器会为你插入这条指令。

所以

```
public Foo() {
    // some instructions
} 
```

和

```
public Foo() {
    super();
    // some instructions
} 
```

是严格等价的。构造函数必须做的第一件事是调用一个超类构造函数。如果您忘记执行此操作，编译器会通过插入`super()`调用为您执行此操作。如果超类没有可见的无参数构造函数，则会出现编译错误。

当您想要（或需要）调用`super(someArguments)`不是无参数构造函数的基类的构造函数时，通常需要调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:58:19.350

说 super() 什么都不做是不正确的。它调用其超类的无参数构造函数。即使该类直接从 java.lang.Object 继承，也会调用 Object 的构造函数，尽管它什么也不做。当然 JVM 优化器会很快消除这种无用的调用。

# c - 引用 C 中的嵌套结构

> ID：15284188
> 
> 赞同：1
> 
> 时间：2013-03-07T23:51:34.110
> 
> 标签：c, data-structures

因此，基本上，我在两个不同的 .h 文件（vcard.h 和 bst.h）中定义了两种不同的结构，它们都包含在当前文件中。以下是结构定义：

```
struct bst {
  vcard *c;
  bst *lsub;
  bst *rsub;
};

struct vcard {
  char *cnet;
  char *email;
  char *fname;
  char *lname;
  char *tel;
}; 
```

在我的 bst 插入函数中，我正在尝试运行以下命令：

```
bst *bst_insert(bst *t, vcard *c){

    if (strcmp(c->cnet, t->c.cnet) > 0){
    ...
    }
} 
```

编译器吐回以下错误：

“bst.c:28：错误：在非结构或联合的情况下请求成员 'cnet'”

我是否错误地调用了 t->c.cnet？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T23:53:26.263

c 是一个指针，你需要 t->c->cnet

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:53:50.230

应该是`t->c->cnet`因为 c 是指向 a 的指针`vcard`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:07:46.043

只是一个侧面答案，您还可以使用`.`运算符来访问指向结构的指针的成员。由于优先级，您只需要先用括号取消引用指针，然后您就可以像这样访问该成员`t->(*c).cnet`。该`->`符号是作为一种速记方式创建的。

# java - 从 JSON 中提取字段的最简单方法

> ID：15284194
> 
> 赞同：-1
> 
> 时间：2013-03-07T23:52:00.023
> 
> 标签：java, regex, json

**更新：**我应该马上提到这一点：我首先考虑了一个 Java/JSON 映射框架，但我的经理不希望我向项目添加更多依赖项，所以这是一个选项。[JSON-Java](http://json.org/java/) jar 已经在我们的类路径中，所以我可以使用它，但仍然无法通过树木看到森林如何使用它。

我的 Java 程序正在收到以下格式的 JSON（尽管值会一直变化）：

```
{"order":{"booze":"1","handled":"0","credits":"0.6",
    "execute":0,"available":["299258"],"approved":[],
    "blizzard":"143030","reviewable":["930932","283982","782821"],
    "units":"6","pending":["298233","329449"],"hobbit":"blasphemy"}} 
```

我正在寻找最简单、高效、可靠的方法来从这个 JSON 字符串中挑选特定值并将它们聚合到`List<Long>`.

具体来说，我希望提取和聚合所有“ **id** ”，即您在 、 和 字段中看到`available`的所有数值`approved`。这些字段中的每一个都是一个由 0+“ids”组成的数组。因此，在上面的示例中，我们看到了以下 id 细分：`reviewable``pending`

*   `available`: 有 1 个 id (299258)
*   `approved`: 有 0 个 ID
*   `reviewable`: 有 3 个 id (930932, 283982, 782821)
*   `pending`: 有 2 个 id (298233, 329449)

我需要一些 Java 代码来运行并生成`List<Long>`包含所有 6 个提取的 id 的 a，没有特定的顺序。id 只需要将其放入列表中。

这感觉就像一个非常复杂、令人费解的正则表达式，我什至不确定从哪里开始。非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T23:55:35.377

IMO 最简单的方法是使用 json 库，例如[gson](https://code.google.com/p/google-gson/)、[jackson](http://jackson.codehaus.org/)、[json.org](http://json.org/java/)等，将 de JSON 解析为一个对象，并`List<Long>`使用您需要的属性值创建一个新对象。

带有 gson 的伪代码：

```
class Order {
   long[] available;
   long[] approved;
   ...
}

Order order = gson.fromJson("{ your json goes here }", Order.class);

List<Long> result = new ArrayList<Long>();
result.add(order.getAvailable());
result.add(order.getApproved());
... 
```

带有 json.org/java 的伪代码：

```
JSONObject myobject = new JSONObject("{ your json goes here"});
JSONObject order = myobject.getJSONObject("order");

List<Long> result = new ArrayList<Long>();
for (int i=0; i<order.getJSONArray("approved").length(); i++) {
    Long value = order.getJSONArray("approved").getLong(i);
    result.add(value);
}
... 
```

# jquery - 如何从另一个网站抓取特定 DIV 并将其加载到我的网站？

> ID：15284195
> 
> 赞同：0
> 
> 时间：2013-03-07T23:52:16.117
> 
> 标签：jquery, html, web-scraping

我看了又看，似乎找不到任何我想要的东西。我不是最擅长 javascript，所以现在我正在寻求帮助。我在我的网站上使用**JQuery 。**我希望能够从**NewEgg**或**Walmart**或**Bestbuy**等网站调用特定元素（如 #body 或 #item ，**而不是 iframe 或弹出窗口**），并将其显示到我网站上已设置的预定义 div 中。只要它至少加载内容，如果不是 css 那很好，我对 css 很好。例子：

```
<div id="webscrape" class"www.blah.com/blahhh">
  <div id="website's div">content of specific newegg or reddit div/divs</div></div> 
```

我还希望能够拥有 2 个 javascript，一个用于将页面调用为原始数据到预定义的 div，另一个用于设置网站和 div 元素的参数。基本上我希望 jquery 在预定义的 div 之间准确地提取数据在其他网站上的显示方式。我想要这个，所以我可以显示 4-5 星产品的新闻和自定义搜索。如果可能的话，我还希望能够在一页上调用多个 div。我看了又看，找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:58:22.510

由于跨站点脚本规则，这是不可能的 - 您需要从现有站点复制所有代码并手动更新（这是复制写入侵权），或者您需要查看该站点是否具有某种产品显示 API第三方可以使用。

API 通常是某种服务器端语言，如 PHP 或 .net 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:58:23.527

我正在开发类似的东西（不完全是你在做什么）。[由于跨站点脚本问题](http://en.wikipedia.org/wiki/Cross-site_scripting)，使用 javascript 是不可能的

Javascript 可以调用来自同一个域的内容，对于不同的域，使用服务器端技术，我使用的是 PHP。

使用 js 你可以调用一个 php 文件，该文件可以获取该站点的内容。

```
$.get("webscrape.php", {"site":"http://www.scrapeme.com"}, function(data){
 alert(data); 
}); 
```

刚刚遇到这个**跨域 Jquery 插件** ，如果你愿意，你可以试一试.. 它使用 YQL

[跨域jquery github](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

[例子](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

# apache - 为什么在使用 mod_python sendfile 时会附加换行符？

> ID：15284198
> 
> 赞同：0
> 
> 时间：2013-03-07T23:52:26.577
> 
> 标签：apache, http, download, newline, mod-python

我正在从 Fedora 17 服务器提供一个网站。该网站允许用户单击并从文件列表中下载。但是，当用户单击下载文件时，会附加一个换行符 (0A)。这会更改文件的 md5sum。

**HTML**

```
<a href="download.psp?id={{obj.Id}}"/> 
```

**游戏机**

```
<%
import shared

filePath = shared.getFileFromId(req, form['id'])

req.sendfile(filePath)
%> 
```

使用重定向和直接 apache 下载可解决此问题。但我需要能够设置内容处置文件名。

Windows 和 linux 作为客户端会发生这种情况。还有火狐和chrome。服务器始终是 fedora 17。文本文件和二进制文件都会出现这种情况。设置 HTTP 标头（到目前为止）没有帮助。

任何帮助表示赞赏。

*mod_python 版本 3.3.1-18
python 版本：2.7.3
httpd 版本：2.2.22-4*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:58:02.857

正在评估您的 PSP 页面，并在`sendfile`. 您可以编辑文件，使“>”是最后一个字符，或者将其重写为纯 Python 脚本。

# excel - 显示和隐藏用户表单 - 堆栈错误

> ID：15284199
> 
> 赞同：0
> 
> 时间：2013-03-07T23:52:34.057
> 
> 标签：excel, vba, userform

我在 Excel 中有一个数据驱动工具，它有 5 个多页用户表单。每个表单都包含许多数据字段（所有表单中超过 250 个）。每个字段由 13 个控件组成。所以它们相当大。

该系统允许用户通过单击“显示评论”按钮来打开每个字段的评论表单。它使用基于类的事件连接起来，使用以下代码：

```
Private Sub mShowGroup_Click()
    Dim fm As formCommentDisplay 'the form to be shown

    'Snip not relevant code

    HideDataEntry 
    fm.Show
    ShowDataEntry
End Sub 
```

HideDataEntry 子隐藏了主数据输入表单，因此只有评论表单可见。这是必需的，因为用户可以使用 printscreen 显示评论的打印版本 - 如果表单未隐藏，则用户无法关闭打印屏幕。

问题是如果用户打开多个评论表单，堆栈就会溢出。原因是 ShowDataEntry 子。

```
Sub ShowDataentry()
    Dim fForm as Variant

    For each fForm in UserForms
        fForm.Show
    Next fForm
End Sub 
```

代码显示了适当的数据输入表单，但由于表单是模态的，它将保留在堆栈中。然后下次显示评论表单时，堆栈将增加，并增加，直到出现堆栈错误。

我正在努力想办法解决这个问题。由于控件的数量众多，我不希望每个控件都有事件代码。这就是为什么事件代码在一个类中，并通过对象集合触发的原因。一个想法是我隐藏了表单，然后当代码完成时使用表单中的事件触发器重新显示表单 - 但我认为这是不可能的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:48:04.600

我最终将 ShowDataEntry 的调用移至最初调用表单的位置。

我检查是否仍然加载任何表单并假设我想显示它们。由于这是在加载表单的同一个循环中，因此堆栈被有效地重置为最初打开表单时的状态。

# python - bzrlib 版本与 OSX 上的 bzr 程序不匹配

> ID：15284203
> 
> 赞同：1
> 
> 时间：2013-03-07T23:52:43.970
> 
> 标签：python, version-control, bazaar

每当我在 OSX 上运行 bzr 命令时，都会收到以下错误消息：

```
bzr: WARNING: bzrlib version doesn't match the bzr program.
This may indicate an installation problem.
bzrlib is version 2.5.1 from /usr/local/Cellar/bazaar/2.5.1/libexec/bzrlib
bzr is version 2.6.0 from /Library/Python/2.7/site-packages/bzr-2.6b2-py2.7-macosx-10.8-intel.egg/EGG-INFO/scripts/bzr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:52:43.970

由于某种原因，安装搞砸了。如果我查看 bzr 脚本，版本不是 5.1。

```
brew uninstall bzr
brew install bzr 
```

卸载并重新安装解决了我的问题。

# keyboard - 达到 QWERTY 键盘上的那些标点符号键？

> ID：15284208
> 
> 赞同：-3
> 
> 时间：2013-03-07T23:53:06.930
> 
> 标签：keyboard, typing

您是否在所有正确的键上使用所有手指正确打字？我发现在编码时访问标准 QWERTY 布局上的常用标点符号非常令人沮丧。括号、方括号、尖括号、引号等用的太多了，但我总是想念这些键，因为它们有时是一个延伸。我知道有备用键盘布局（DVORAK 等），但我不知道我是否愿意完全重新学习不太常见的键盘布局。您的标点符号键快速准确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:56:21.563

这只是习惯的问题。假设您可以触摸打字，那只是练习。此外，请确保您的键盘始终相同，无论是在家里还是在工作中，这样您的手指就不会感到困惑。

如果你不能触摸打字，我建议你先解决这个问题，因为当你不得不整天打字作为你的日常工作时，它非常有帮助。

# asynchronous - Async.Start 与 Async.StartChild

> ID：15284209
> 
> 赞同：15
> 
> 时间：2013-03-07T23:53:18.753
> 
> 标签：asynchronous, f#

假设`asyncSendMsg`不返回任何内容并且我想在另一个异步块中启动它，但不等待它完成，这之间有什么区别：

```
async {
    //(...async stuff...)
    for msg in msgs do 
        asyncSendMsg msg |> Async.Start
    //(...more async stuff...)
} 
```

和

```
async {
    //(...async stuff...)
    for msg in msgs do 
        let! child = asyncSendMsg msg |> Async.StartChild
        ()
    //(...more async stuff...)
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-08T00:02:32.197

主要区别在于，当您使用 启动工作流时`Async.StartChild`，它将与父级共享取消令牌。如果取消父级，所有子级也将被取消。如果您使用 启动孩子`Async.Start`，那么它是一个完全独立的工作流程。

这是一个演示差异的最小示例：

```
// Wait 2 seconds and then print 'finished'
let work i = async {
  do! Async.Sleep(2000)
  printfn "work finished %d" i }

let main = async { 
    for i in 0 .. 5 do
      // (1) Start an independent async workflow:
      work i |> Async.Start
      // (2) Start the workflow as a child computation:
      do! work i |> Async.StartChild |> Async.Ignore 
  }

// Start the computation, wait 1 second and than cancel it
let cts = new System.Threading.CancellationTokenSource()
Async.Start(main, cts.Token)
System.Threading.Thread.Sleep(1000)    
cts.Cancel() 
```

在此示例中，如果您使用 开始计算`(1)`，则所有工作项将在 2 秒后完成并打印。如果您使用`(2)`它们，它们将在主工作流程取消时全部取消。

# c++ - 作为网络服务运行时使用参数启动可执行文件

> ID：15284212
> 
> 赞同：1
> 
> 时间：2013-03-07T23:53:38.053
> 
> 标签：c++, windows, winapi, shell, process

如果我作为网络服务运行，如何使用提供的参数启动可执行文件？我尝试在我的程序（作为网络服务运行）中使用 ShellExecuteEx：

```
try
{

    DWORD dwErr;
    TCHAR bufProgName[1000] = _T("");
    TCHAR bufParameters[1000] = _T("");

    ::lstrcat(bufProgName,_T("C:\\NotMyFault\\x86\\NotMyFault.exe"));
    ::lstrcat(bufParameters,_T(" -help"));

    SHELLEXECUTEINFO ShExecInfo;
    ZeroMemory(&ShExecInfo,sizeof(ShExecInfo));
    ShExecInfo.cbSize=sizeof(ShExecInfo);
    ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS;
    ShExecInfo.hwnd = NULL;
    ShExecInfo.lpVerb = NULL;
    ShExecInfo.lpFile = bufProgName;        
    ShExecInfo.lpParameters = bufParameters;
    ShExecInfo.lpDirectory = NULL;
    ShExecInfo.nShow = SW_SHOWNORMAL;
    ShExecInfo.hInstApp = NULL; 
    int res = ShellExecuteEx(&ShExecInfo);
    if(!res)
    {
        dwErr = GetLastError();
        return -1;
    }

}
catch(...)
{
    std::cout<<"ShellFail: " << dwError;
    return -1;

} 
```

但这所做的只是启动 NotMyFault.exe 作为用户网络服务运行（我从任务管理器中看到），但它没有提供帮助。其他参数（“-crash”）也是如此。

我知道这是仓促编写的代码，但我需要看看作为网络服务运行的进程（如我的）是否可以成功地做到这一点。当我以另一个用户身份运行它时（通过双击可执行文件），它似乎工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:28:11.600

您的服务在会话 0 中运行。您的交互式桌面在不同的会话中。因此，当您的服务启动进程时，您将看不到任何内容。因为它在与服务相同的会话中启动，在会话 0 中。

如果您希望该服务在交互式桌面上启动一个进程，尽管很困难：[在 Windows Vista 和更高版本中从 Windows 服务启动一个交互式进程](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx)。

# python - 在 python 中使用 np.vstack 向 numpy 矩阵问题添加行（标题）

> ID：15284213
> 
> 赞同：2
> 
> 时间：2013-03-07T23:53:38.563
> 
> 标签：python, matrix, numpy

我有一个像这样的numpy矩阵：

```
>>> matrix
[['M' 'G' 'H' 'H' 'H' 'H' 'H' 'H' 'S' 'H' 'M' 'A' 'A' 'A' 'M']
 ['A' 'A' 'T' 'E' 'D' 'D' 'I' 'R' 'G' 'Q' 'L' 'Q' 'S' 'H' 'G']] 
```

我想在这个矩阵中添加一个新行，然后像这样进行：

```
length_seqs = matrix.shape[1]
header = np.arange(length_seqs)

matrix_with_header = np.vstack((header,matrix)) 
```

但是当我打印这个新矩阵时，它显示如下：

```
>>> print matrix_with_header
[['0' '1' '2' '3' '4' '5' '6' '7' '8' '9' '1' '1' '1' '1' '1']
 ['M' 'G' 'H' 'H' 'H' 'H' 'H' 'H' 'S' 'H' 'M' 'A' 'A' 'A' 'M']
 ['A' 'A' 'T' 'E' 'D' 'D' 'I' 'R' 'G' 'Q' 'L' 'Q' 'S' 'H' 'G']] 
```

如您所见，当需要打印多个数字时，它不会并且只显示第一个数字。对此有任何解释和解决方案吗？任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:55:38.867

您的`dtype`矩阵的 可能`'S1'`意味着一切都是 1 字符长的字符串。将其更改`'S2'`为允许更长的字符串。

例如：

```
In [1]: import numpy as np

In [2]: a = np.array(['hi','hello'])

In [3]: a.dtype
Out[3]: dtype('|S5')

In [4]: a = np.array(['hi','hello'], dtype='S2')

In [5]: a
Out[5]: 
array(['hi', 'he'], 
      dtype='|S2') 
```

# python - 在第二个 POST 中始终清空多部分编码的文件

> ID：15284220
> 
> 赞同：0
> 
> 时间：2013-03-07T23:54:09.123
> 
> 标签：python, python-requests

我需要通过 POST 在两个不同的网站上发送文件。所以，我使用 Requests 库。

第二个响应中的照片始终为零大小。即使我更改网站顺序。

```
import requests

data = {'id': 1}

f = open('/tmp/photo7.jpg', 'rb')
image = {'image': ('photo7.jpg', f)}

# works fine
requests.post('http://site.com/', data=data, files=image)
# empty file
requests.post('http://othersite.com/', data=data, files=image) 
```

可能是什么问题呢？

我认为问题在于文件对象在文件中的当前位置（可能，在第一次响应后在文件末尾），但我不确定。

我无法正确地进行 seek(0)，回溯： http: [//pastebin.com/gnD2c1AR](http://pastebin.com/gnD2c1AR)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:20:18.990

使用`seek`是正确的方法，但是您将 seek 的*结果*（将为 0）而不是文件句柄传递给`requests.post`这一行：

```
files = {'image': ('photo7.jpg', f.seek(0))} 
```

试试这个：

```
...
requests.post('http://site.com/', data=data, files=image)
f.seek(0)
requests.post('http://othersite.com/', data=data, files=image) 
```

# python - AutoField 对象没有属性 '_meta - field._meta.verbose_name

> ID：15284225
> 
> 赞同：1
> 
> 时间：2013-03-07T23:54:20.117
> 
> 标签：python, django

```
def export_as_xls(modeladmin, request, queryset):
    """
    Generic xls export admin action.
    """
    if not request.user.is_staff:
        raise PermissionDenied
    opts = modeladmin.model._meta

    wb = Workbook()
    ws0 = wb.add_sheet('0')
    col = 0
    field_names = []
    # write header row
    for field in opts.fields:
        ws0.write(0, col, field._meta.verbose_name)
        field_names.append(field._meta.verbose_name)
        col = col + 1 
```

如果我尝试导出到 xls，则会出现此错误：

> “AutoField”对象没有属性“_meta”

与：`field.name`这个工作，但我需要详细的名字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:41:06.253

对于字段，您应该只使用`field.verbose_name`

_meta 在 Model 实例上可用，但在 Field 实例上不可用

# tablesorter - 使用 tablesorter 进行服务器端分页

> ID：15284228
> 
> 赞同：4
> 
> 时间：2013-03-07T23:54:31.677
> 
> 标签：tablesorter

使用 tablesorter 的寻呼机插件可以进行服务器端分页吗？看起来默认选项要求您一次将所有行加载到浏览器的内存中。由于我有这么多记录，这实际上是不可能的，我宁愿一次加载一页。tablesorter 寻呼机插件是否支持此功能？如果是这样，我错过了什么，因为文档显示了这个例子：

```
// process ajax so that the data object is returned along with the total number of rows
    // example: { "data" : [{ "ID": 1, "Name": "Foo", "Last": "Bar" }], "total_rows" : 100 }
    ajaxProcessing: function(ajax){
      if (ajax && ajax.hasOwnProperty('data')) {
        // return [ "data", "total_rows" ];
        return [ ajax.data, ajax.total_rows ];
      }
    }, 
```

那，以及我能够找到的其他示例，看起来它一次将所有行加载到 ajax 处理函数的内存中。

[http://mottie.github.com/tablesorter/docs/example-pager.html](http://mottie.github.com/tablesorter/docs/example-pager.html)

**更新：**

在[http://mottie.github.com/tablesorter/docs/example-pager-ajax.html](http://mottie.github.com/tablesorter/docs/example-pager-ajax.html)看到 AJAX 寻呼机后，我还有几个问题：

1.  排序列表 = [[2,0],[3,0]]。在Ajax URL中，我是否自己转换为&col[2]=0&col[3]=0的真实格式？
2.  ajaxProcessing 的文档说：

    处理 ajax 以便返回以下信息： // [ total_rows (number), rows (array of array), headers (array; optional) ]

看起来 total_rows 是数据库中的行数，而不是浏览器内存中的行数或表中显示的行数。那是对的吗？下一个问题：我了解数组“行”数组的格式。但是实际上应该包含哪些行？文档说它是“所有行”，但它只是表中显示的行的当前页面吗？是用户迄今为止翻阅的所有行吗？我认为这不是数据库中的所有行，因为这会完全破坏这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:37:57.557

要包含排序列和方向，只需`col`在 url 模板中的示例中包含服务器端变量：

```
ajaxUrl : "http:/mydatabase.com?page={page}&size={size}&{sortList:col}&{filterList:fcol}", 
```

这`{page}`是用户正在查看的当前页面，`{size}`是要在浏览器中显示的行数。

包括`&{sortList:col}`（`col`匹配用于排序列和方向的服务器端变量）以包括排序。并包含`&{filterLost:fcol}`（`fcol`匹配用于过滤列的服务器端变量）以包含任何过滤。寻呼机插件为您将字符串格式化为`&col[2]=0&col[3]=0`（或其他）。

如果您查看该`ajaxProcessing`函数，它所做的只是重新格式化来自服务器的**当前行集**的 ajax 数据以显示（不是所有行）以匹配此所需格式：

```
// process ajax so that the following information is returned:
// [ total_rows (number), rows (array of arrays), headers (array; optional) ]
// example:
[
  100,  // total rows
  [
    [ "row1cell1", "row1cell2", ... "row1cellN" ],
    [ "row2cell1", "row2cell2", ... "row2cellN" ],
    ...
    [ "rowNcell1", "rowNcell2", ... "rowNcellN" ]
  ],
  [ "header1", "header2", ... "headerN" ] // optional
] 
```

如果您的数据库中有不确定的行数，只需 return `0`... 它*应该*仍然可以工作，但是`totalPages`and`totalRows`变量将不准确。

# c# - 访问 COM 对象

> ID：15284230
> 
> 赞同：0
> 
> 时间：2013-03-07T23:54:34.507
> 
> 标签：c#, c++, visual-studio-2010, com

我有使用 cpp COM 对象的 ac# 解决方案。COM 对象和 c# 应用程序都是专门为 64 位系统构建的。当我从 VS 2010 运行时，该解决方案可以正常工作。但是，在我将它安装在不同的系统（64 位）上后，找不到 COM 对象。

我认为这是因为它在安装过程中没有注册，但我似乎在这样做时遇到了麻烦。当我尝试

```
regsvr32 ComObject.dll 
```

我收到一条错误消息，指出“模块 'ComObject.dll' 无法加载。确保二进制文件存储在指定路径或对其进行调试以检查二进制文件或相关 .DLL 文件是否存在问题。

我从 dll 所在的目录中调用 regsvr32，并且我三次检查名称是否输入正确。我尝试在安装程序中注册它，将 dll 注册开关设置为 vsdrfCOM，并收到警告“无法为名为‘ComObject.dll’的文件创建注册信息。这很可能是因为 dll 是在单独的解决方案中构建并添加的将此解决方案作为资源。

因此，我可以将它安装在我的开发系统上，并且运行良好。我认为这是因为 VS 已经注册了 dll。（目前，该 dll 不是安装程序的一部分，因为它会导致问题，因此我将其复制到调试文件夹中。

有谁知道我可能做错了什么？

附加信息：

根据 David Heffernan 的指示，我以正确的方式运行 Dependency Walker。以下是我收到错误消息“找不到入口点 DllRegisterServer”之前的最后几行。

```
...
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "DrawThemeText") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFCBB61F8.
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "EndBufferedAnimation") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFCBB4F98.
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "GetBufferedPaintDC") called from "DUSER.DLL" at address 0x000007FEFC58069D and returned 0x000007FEFCBC0BC0.
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "GetBufferedPaintTargetDC") called from "DUSER.DLL" at address 0x000007FEFC58069D and returned 0x000007FEFCBC0B5C.
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "EndBufferedPaint") called from "DUSER.DLL" at address 0x000007FEFC58069D and returned 0x000007FEFCBB4F98.
GetProcAddress(0x000007FEFC570000 [DUSER.DLL], "FindGadgetFromPoint") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFC581F40.
GetProcAddress(0x000007FEFC570000 [DUSER.DLL], "ForwardGadgetMessage") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFC582CAC. 
```

按确定后，我得到：

```
LoadLibraryW("comctl32.dll") called from "USER32.DLL" at address 0x00000000779A91DC.
LoadLibraryW("comctl32.dll") returned 0x000007FEFCC10000.
GetProcAddress(0x000007FEFCC10000 [COMCTL32.DLL], "RegisterClassNameW") called from "USER32.DLL" at address 0x00000000779A91F9 and returned 0x000007FEFCC38024.
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "BufferedPaintStopAllAnimations") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFCBCE408.
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "BufferedPaintUnInit") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFCBBFA04.
GetProcAddress(0x000007FEFC570000 [DUSER.DLL], "DisableContainerHwnd") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFC57A38C.
GetProcAddress(0x000007FEFCBB0000 [UXTHEME.DLL], "BufferedPaintUnInit") called from "DUSER.DLL" at address 0x000007FEFC58069D and returned 0x000007FEFCBBFA04.
GetProcAddress(0x000007FEFC570000 [DUSER.DLL], "DUserFlushMessages") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFC57A8A0.
GetProcAddress(0x000007FEFC570000 [DUSER.DLL], "DUserFlushDeferredMessages") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFC57A830.
GetProcAddress(0x000007FEFC570000 [DUSER.DLL], "DeleteHandle") called from "COMCTL32.DLL" at address 0x000007FEFCC2FD99 and returned 0x000007FEFC574BB8.
GetProcAddress(0x00000000779A0000 [USER32.DLL], "UnregisterMessagePumpHook") called from "DUSER.DLL" at address 0x000007FEFC57B8A9 and returned 0x00000000779A8564.
DllMain(0x0000000180000000, DLL_PROCESS_DETACH, 0x0000000000000000) in "MAPIEX64.DLL" called.
DllMain(0x0000000180000000, DLL_PROCESS_DETACH, 0x0000000000000000) in "MAPIEX64.DLL" returned 1 (0x1).
DllMain(0x000007FEFB5F0000, DLL_PROCESS_DETACH, 0x0000000000000000) in "MAPI32.DLL" called.
DllMain(0x000007FEFB5F0000, DLL_PROCESS_DETACH, 0x0000000000000000) in "MAPI32.DLL" returned 1 (0x1).
DllMain(0x0000000051AF0000, DLL_PROCESS_DETACH, 0x0000000000000000) in "MFC100.DLL" called.
DllMain(0x0000000051AF0000, DLL_PROCESS_DETACH, 0x0000000000000000) in "MFC100.DLL" returned 1 (0x1).
DllMain(0x000007FEF9E60000, DLL_PROCESS_DETACH, 0x0000000000000000) in "MSIMG32.DLL" called.
...
Exited "REGSVR32.EXE" (process 0x23A0) with code 4 (0x4). 
```

除了提到 DllRegisterServer 之外，没有特定的错误消息。我确实以管理员身份运行。运行时，模块列表中出现另一个错误：打开文件时出错。该系统找不到指定的路径。这是有道理的，因为它是一个空字符串。这旁边有一个问号，所以我认为它是延迟加载。

我在 regsvr32.exe 上再次运行 Dependency Walker，得到以下错误：

```
LoadLibraryExW("C:\Program Files\Project\ComObject.dll", 0x0000000000000000, LOAD_WITH_ALTERED_SEARCH_PATH) returned NULL. Error: The specified module could not be found (126). 
```

我还在日志文件的顶部发现了这些错误：

```
Error: Modules with different CPU types were found.
Warning: At least one delay-load dependency module was not found.
Warning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module. 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:21:20.610

这可能是一个依赖问题。使用 Dependency Walker 解决它。使用 Profile 菜单启动一个进程。运行 regsvr32。指定命令行参数和工作目录。

我的猜测是问题是缺少 MSVC 运行时，但该工具将揭示导致失败的原因。

您需要运行 Dependency Walker 提升，以便注册可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:43:44.767

Windows 经常对是否应该从`System32`或`SysWOW64`目录运行应用程序感到困惑。

尝试显式运行 64 位版本`regsvr32`：

```
%SystemRoot%\System32\regsvr32.exe ComObject.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:14:34.617

感谢 David Hefferman 和 WhozCraig；您的信息帮助我开始使用 Dependency Walker，在我弄清楚如何解释它发现的内容后，我可以看到它将被证明是一个强大的工具。它还帮助我找出可能的问题。

最后，我选择了不同的方向。我将 cpp 项目添加到我的主项目中，然后在我的安装程序中使用了输出。这导致它正确注册。我仍然不确定这与运行 regsvr32 有何不同，但无论有什么不同，它都会导致事情开始工作。

# asp.net - Server.transfer 在子文件夹中查找资源

> ID：15284234
> 
> 赞同：0
> 
> 时间：2013-03-07T23:54:52.333
> 
> 标签：asp.net, response.redirect, server.transfer

我在根文件夹中有一个页面，在根目录中的文件夹中有另一个页面。

文件夹结构

```
->root->files->foo.aspx
->root->default.aspx
->root->foo.js 
```

当我从文件文件夹（foo.aspx）中的页面执行 server.transfer 到 root（default.aspx）中的页面时，我的 javascripts（foo.js）不会加载，因为页面会在子文件夹中查找文件（文件）。也就是说，页面在 ->root->files 中查找 javascript。

有没有办法让服务器在文件所在的地方寻找javascript？

PS：这只是一个例子，不是真实的场景，我有不同的文件夹级别需要在根目录下引用文件。

response.redirect 不是我正在寻找的答案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:00:56.483

检索 .js 文件、图像等内容的*附加请求***由浏览器**在检索到页面后完成。
由于`Server.Transfer`在不更改 URL 的情况下显示不同的页面，因此浏览器认为 url 是`http://yoursite.com/files/foo.aspx`而不是`http://yoursite.com/default.aspx`。
在您的 HTML 中，您声明附加内容（.js 文件）位于*同一目录*中：

```
<script src="foo.js" /> 
```

并且由于浏览器认为他在`files`目录中，所以他在那里寻找它。

（这是设计使然...）

一种解决方法是放置完整的 URL 而不是相对的 URL：

```
<script src="http://yoursite.com/foo.js" /> 
```

甚至

```
<script src="/foo.js" /> 
```

# racket - 定义磁盘区域错误？

> ID：15284243
> 
> 赞同：2
> 
> 时间：2013-03-07T23:55:30.847
> 
> 标签：racket

在“如何设计程序”的第 2.2 章中，定义的结构如下所示

```
(define (area-of-disk r) 
  (* 3.14 (* r r))) 
```

然而，当我在 DrRacket 中输入并评估它时，它会突出显示`(* 3.14 (* r r))`表达式，但没有给出错误通知。我已经从最新指南中剪切并粘贴了示例，以及类似的错误突出显示结果。我在 Windows7 上运行 DrRacket v 5.3.3。

**定义**方法的正确结构是什么？

编辑:: 它毕竟有效，我只是不清楚为什么会出现突出显示。书中没有明确说明该论点将在评估时突出显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:46:10.680

我非常有信心您看到的是“您尚未评估此代码”突出显示。这是 DrRacket 让您知道您有未经测试的代码的方式，它应该在您添加测试用例后立即消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:11:10.263

它对我来说很好。你不小心把`#lang racket`顶部的线剪掉了吗？如果是这样，把它放回去，你应该很高兴。

# javascript - 模态在ie9中不从顶部滑动

> ID：15284251
> 
> 赞同：0
> 
> 时间：2013-03-07T23:55:46.250
> 
> 标签：javascript, jquery, css, jquery-ui, twitter-bootstrap

当您单击登录或注册按钮时，会打开一个模态......在 chrome 浏览器中，模态会从顶部向下滑动......在 ie9 浏览器中它只是打开......如何修复滑动ie 9浏览器中的问题...

在下面提供我的代码

[http://jsfiddle.net/KNPZB/10/embedded/result/](http://jsfiddle.net/KNPZB/10/embedded/result/)

```
 <script type="text/javascript">
      $('#myModal').modal({ show: false })
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<div id="myModal" class="modal hide fade" style="width: 427px; height: 226px;">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>
      </div>
      <div class="modal-body" style="width: 336px;">

        <form method="post" class="navbar-form pull-right" action="http://intra.defie.co/Account/">
              <input class="span2" type="text" name="email" placeholder="Email" style="width: 263px; margin-top: 19px; margin-bottom: 10px;"><br>
              <input class="span2" type="password" name="password" placeholder="Password" style="width: 263px;"><br>
              <button type="submit" class="btn" style="margin-top: 13px; margin-left: 100px;">Sign in</button>
            </form>

      </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:42:27.207

您包含的 javascript 文件中至少有几个问题。

1.  在本`<head>`节中，您甚至在加载**jquery之前就包含了****bootstrap.js**。因为看起来您直到页面底部附近才加载 jquery。bootstrap.js 需要**在**jquery 之后。

*****   您尝试使用**无效路径**在页面顶部加载 bootstrap.js ，然后在页面底部加载所有将包含在 bootstrap.js 中的 bootstrap javascript 文件。您只需要一种方法：使用 boostrap.js（放在**jquery 之后**），或者只加载您需要的引导插件（再次，放在**jquery 之后**）。在引导站点上查看源代码，看看他们是如何做到的。twitter.github.com/bootstrap/

    *   在头部和底部附近，您在 jquery 本身加载之前调用 jquery 函数，因此如果您使用 F12 打开浏览器控制台，您将`Uncaught ReferenceError: $ is not defined`在 Chrome 和`SCRIPT5009: '$' is undefined`IE9 中看到。

    *   除了所有的 javascript 源文件问题之外，**bootstrap.css**文件也有一个无效的路径并且没有加载。**** 

 ****我怀疑一旦您解决了这些问题，您的页面可能会以预期的行为运行；当然，这将是一个很好的起点。****

# maya - maya 更改为以像素为单位工作

> ID：15284262
> 
> 赞同：-1
> 
> 时间：2013-03-07T23:56:44.327
> 
> 标签：maya

在 Maya 中工作时，单位默认为厘米。我知道您可以将其更改为毫米，但有没有办法将其更改为以像素为单位？例如，假设我想制作一个 20 像素宽的对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:27:05.767

这可能不是非编程相关 Maya 问题的论坛，但无论如何这里有一个答案。

简短的回答是否定的，在 Maya 中无法使用像素作为建模单元。Maya（或任何 3D 软件）中的 3D 对象基本上与分辨率无关。从某种意义上说，它就像 Adob​​e Illustrator，您可以在对象上越来越远地放大，并且仍然会以相同的保真度进行绘制。那是因为您正在处理 3D 空间中的理论点。它们之间绘制的线可以分成无限小的部分。

渲染时像素很重要，如果您希望对象的*图像*为 20 像素宽，那么您必须将渲染设置设置为特定大小，然后在相机中构图对象，使其为 20像素宽。我可能不会那样做，但这是可能的。同样，因为它基本上与分辨率无关，所以您可以根据渲染分辨率使您的对象变大或变小。

# sql - 将 SQL Server 2012 结果粘贴或导入 Excel 2007 时。SQL Server 结果显示 2600 行，但 excel 显示超过 5000

> ID：15284264
> 
> 赞同：1
> 
> 时间：2013-03-07T23:56:54.897
> 
> 标签：sql, excel, import, sql-server-2012, paste

在将 SQL Server 2012 结果导入 Excel 2007 时，我们看到了一个问题。SQL Server 结果显示 2600 行，但 Excel 显示超过 5000 行。我们很确定查询不是问题，因为它在另外两台机器上运行良好。

一台机器运行Vista，包括问题框在内的其他两台机器都运行Windows 7。问题框运行SQL Server 2012，另外两台机器运行SQL Server 2005。三台机器都使用Excel 2007。

我们有一份报告要在早上交付，但无法在第三个盒子上运行结果。知道什么可能导致这个问题吗？

# java - 打印出一个链表

> ID：15284265
> 
> 赞同：5
> 
> 时间：2013-03-07T23:57:06.367
> 
> 标签：java, string, printing, linked-list

当我尝试打印出我的对象链接列表时，它给了我这个：

linkedlist.MyLinkedList@329f3d

有没有办法简单地覆盖它以打印为字符串？

```
package linkedlist;

import java.util.Scanner;

public class LinkedListTest {

    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        String item;

        MyLinkedList list = new MyLinkedList();
        System.out.println("Number of items in the list: " + list.size());

        Object item1 = "one";
        Object item2 = "two";
        Object item3 = "Three";

        list.add(item1);
        list.add(item2);
        list.add(item3);

        System.out.println("Number of items in the list: " + list.size());

        System.out.println(list);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T00:01:58.917

如果您的列表实现了您可以使用的 java.util.list 接口，则此行将列表转换为数组并打印出该数组。

```
System.out.println(Arrays.toString(list.toArray())); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T00:04:41.083

好吧，默认情况下，java 中的每个类都`toString`从`Object`类中获取方法。`toString`方法 from将`Object class`打印`class name`后跟`@`and `hash code`。

您可以[覆盖 toString](http://www.slideshare.net/fmshaon/effective-java-always-override-tostring-method)方法`LinkedList`。例如：

```
class MyLinkedList extends LinkedList
{

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "MyLinkedList [size=" + size + ", first=" + first + ", last="
                + last + ", modCount=" + modCount + "]";
    }

} 
```

然后你可以打印它：

```
 MyLinkedList list = new MyLinkedList ();
 System.out.println(list); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T00:00:11.563

您可以派生链表类并覆盖 toString 方法...

# php - 在用户选择保存位置之前，PHP ZIP 存档被复制到根目录

> ID：15284267
> 
> 赞同：1
> 
> 时间：2013-03-07T23:57:23.443
> 
> 标签：php, header, download, zip

看起来像添加

取消链接（$文件名）；

到底部似乎可以解决它：

==================================================== ====================

所以我想做的是从 2 个字符串创建一个 zip 文件，然后发送一些标题，告诉浏览器打开一个“另存为”对话框并下载 zip 文件。

它工作正常，但是当用户单击下载链接时，zip 文件的副本被复制到 php 脚本所在的 php 文件夹的根目录中，此时弹出“另存为”对话框。有人知道为什么会这样吗？我认为问题可能出在标题中。我只想在用户指定的位置保存 1 个副本。

```
$string1 = "Some data Some data Some data Some data Some data Some data";
$string2 = "Some data Some data Some data Some data Some data Some data";

$filename = "test.zip";

$zip = new ZipArchive();

if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) {
   exit("cannot open <$filename>\n");
}

$zip->addFromString("string1.html", $string1);
$zip->addFromString("string2.html", $string2);

$zip->close();

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"".$filename."\"");
header("Content-Transfer-Encoding: binary");

clearstatcache();

header("Content-Length: ".filesize($filename));
readfile($filename);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:03:25.900

嗯，就是`open($filename, ZIPARCHIVE::CREATE)`这样......我会这样做：

```
->open($tempfile = tempnam(sys_get_temp_dir(),'yourzip_'), ZIPARCHIVE::CREATE)
 ....
 header("Content-Disposition: attachment; filename=\"".$filename."\"");
 ...
 header("Content-Length: ".filesize($tempfile));
 readfile($tempfile);
 unlink($tempfile); 
```

请注意，您的“test.zip”文件名只需要在标题中，您可以随意调用临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:06:00.100

我认为只要您调用该文件，该文件就会保存在您的服务器上`$zip->open()`。

我对 ZipArchive 的工作方式不是很熟悉，但如果它要求您调用该`open()`方法才能工作，您可以尝试使用`php://memory`此问题中描述的协议：

[字符串到 php 中的压缩流](https://stackoverflow.com/questions/11488752/string-to-zipped-stream-in-php)

注意：以上链接仅与如何使用`php://memory`协议有关。

# php - 如何使用基于 HTML 表单输入的名称使用 PHP 创建文件夹？

> ID：15284278
> 
> 赞同：1
> 
> 时间：2013-03-07T23:58:43.520
> 
> 标签：php

我想使用 PHP 创建一个文件夹，其名称基于 HTML 表单的输入值。

Μy html代码如下：

```
<input  name="foldername" id="foldername" > 
```

虽然我拥有的 PHP 如下：

```
if (isset($_POST['createDir'])) {
    //get value of inputfield
    $dir = $_POST['dirname'];
    //set the target path ??
    $targetfilename = PATH . '/' . $dir;
    if (!file_exists($dir)) {
        mkdir($dir); //create the directory
        chmod($targetfilename, 0777); //make it writable
    }
} 
```

我的代码似乎不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:01:24.527

您输入的名称是“文件夹名称”，但在 PHP 中您指的是“目录名称”——这些名称必须相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:23:24.680

```
<?php
// You are passing in a hidden field or something for this, right?
if (isset($_POST['createDir']) and ! empty($_POST['foldername']) 
{
    $dir  = $_POST['foldername']; // This must match the "name" of your input
    $path = PATH . '/' . $dir;
    is_dir($path) or mkdir($path, 0777, true);
}

print_r($_POST); exit; // just so we can help you debug a little... 
```

# unit-testing - 协作网络应用程序的端到端 UI 测试？

> ID：15284281
> 
> 赞同：4
> 
> 时间：2013-03-07T23:58:56.050
> 
> 标签：unit-testing, angularjs, jasmine, end-to-end

我们有一个协作网络应用程序，其中在用户 A 的浏览器中执行的操作将对用户 B 的浏览器产生副作用。聊天室是应用程序的一部分，也是我们尝试测试的一个很好的例子。

我们当前的堆栈是：

*   前端的 AngularJS
*   Express 在 Node 上运行以提供静态文件
*   Socket.IO 运行在 Node 上，用于处理客户端浏览器之间的 Web 套接字通信
*   为我们的构建过程提供早午餐
*   Angular Seed 是我们测试的起点
*   Jasmine 用于实际测试框架
*   Testacular 运行测试

进行测试的最佳方法是什么？“最好”是指“任何”。完整的集成测试需要 2 个浏览器和 2 个 Web 服务器（HTML 和 Web 套接字）。两个 Web 服务器都在 Node 上运行，因此至少它与 Testacular 的其余部分处于相同的环境中。

在我看来，这将需要

1.  启动我们的套接字服务器实例
2.  在 Jasmine 中启动 Web 浏览器，并保留对该浏览器 A 的引用
3.  启动另一个浏览器，浏览器 B，并保留该引用。
4.  向浏览器 A 发出命令并在浏览器 B 中测试由此产生的变化。

有没有人遇到过这种测试的文档或示例（最好是在带有 Jasmine 的 Testacular 中，但我们对选项持开放态度）？甚至关于使用哪些搜索词的建议也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:39:48.813

我不确定我的建议是否会对您有所帮助，但无论如何。

我想到的第一个工具是[Selenium](http://docs.seleniumhq.org/)。好消息（基于您当前使用的堆栈）是您可以`JavaScript`用于编写测试。下面是一个示例，它搜索术语“Cheese” `Google`，然后将结果页面的标题输出到控制台：

```
var driver = new webdriver.Builder().build();
driver.get('http://www.google.com');

var element = driver.findElement(webdriver.By.name('q'));
element.sendKeys('Cheese!');
element.submit();

driver.getTitle().then(function(title) {
  console.log('Page title is: ' + title);
});

driver.wait(function() {
  return driver.getTitle().then(function(title) {
    return title.toLowerCase().lastIndexOf('cheese!', 0) === 0;
  });
}, 3000);

driver.getTitle().then(function(title) {
  console.log('Page title is: ' + title);
});

driver.quit(); 
```

我认为使用 Selenium 2 有可能“打开”更多浏览器实例——这意味着您将能够测试它们之间的副作用/交互。

作为替代方案，您还可以查看使用 Selenium 或（Spudley 也提到）[Sahi](http://sahi.co.in/)作为测试[驱动程序的](http://www.thoughtworks-studios.com/twist/2.3/help/meet_twist_drivers.html)[WindMill](https://github.com/windmill/windmill/wiki/_pages)项目、[UItest.js](https://github.com/tigbro/uitest.js)或商业产品[Twist](http://www.thoughtworks-studios.com/twist-agile-testing)。

# objective-c - 从 nsarray 中删除的打印元素

> ID：15284288
> 
> 赞同：0
> 
> 时间：2013-03-07T23:59:36.483
> 
> 标签：objective-c, memory-management

我正在玩objective-c并进行了样本测试。在非弧环境中，我有以下代码：

```
NSNumber * one;
NSLog(@"At first one retain count is: %d",[one retainCount]);

one = [[NSNumber alloc]initWithInt:5];
NSNumber * two = [[NSNumber alloc]initWithInt:1];
NSNumber * three =[[NSNumber alloc]initWithInt:2];

NSLog(@"After initializing %d",[one retainCount]);

NSMutableArray * array = [NSMutableArray arrayWithObjects:one,two,three, nil];
NSLog(@"After adding to array it is: %d",[one retainCount]);

NSString * a = [array objectAtIndex:0];
NSLog(@"Assigning to variable a: %d",[one retainCount]);
NSLog(@" %@ ",a);
[one release];
[array removeObjectAtIndex:0];
NSLog(@"after releasing and removing from array %d",[one retainCount]);
NSLog(@" %@ ",a); 
```

似乎我无法使用 nslog 变量 a 但我可以做到。我得到以下输出；

> 2013-03-07 17:57:09.706 采访[33491:11303] 首先保留计数为：3
> 2013-03-07 17:57:09.707 采访[33491:11303] 初始化后 2
> 2013-03-07 17： 57:09.707 采访[33491:11303] 添加到数组后为：3
> 2013-03-07 17:57:09.707 采访[33491:11303] 分配给变量 a：3
> 2013-03-07 17:57:09.707 采访[33491:11303] 5
> 2013-03-07 17:57:09.707 采访[33491:11303] 释放并从阵列 1 中删除后
> 2013-03-07 17:57:09.708 采访[33491:11303] 5

即使我应该解除变量 a ，我怎么可能仍然使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:55:55.403

你会被告知很多次你不应该使用`retainCount`，但你的问题是：

> 即使我应该解除变量 a ，我怎么可能仍然使用它？

当一个对象被释放时，这仅仅意味着用于它的内存被添加到可用内存池中。之前使用的内存没有被完全覆盖以删除其中存储的所有痕迹。

此外，当您调用`[one release]`它时，仅表明您不再对存储在其中的值所引用的对象感兴趣`one`（并且因此对象的内存*可能*会返回到空闲池），它*不会*改变存储在`one`自身中的值。所以在调用之后`one`仍然包含对对象所在位置的引用，或者仍然是......

如果您希望确保不使用过时的参考，您可以使用如下代码：

```
 [one release]; one = nil; 
```

最后，您在分配对象之前报告您的第一个`NSLog`输出：

```
2013-03-07 17:57:09.706 Interview[33491:11303] At first one retain count is: 3 
```

当你甚至从未分配过一个对象时，你怎么能拥有 3 的保留计数？答案是你很幸运你的代码没有崩溃；当一个局部变量（您`one`看起来是这样）被创建时，它以垃圾内容开头 - 调用使用该垃圾作为对象引用的方法是不明智的。请记住，Objective-C 不是一种“安全”的语言，不会保护您免受此类错误的影响。请注意，实例和全局变量被初始化为 0/nil，并且在 Objective-C 中支持在 nil 上调用方法——您只需返回 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T00:09:58.167

因为您永远无法完全确定您的对象没有保留在框架的其他地方。确保您遵守内存管理策略，并让框架担心它的义务。

此外，不要使用`retainCount`. 苹果明确告诉你[不要使用它](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/retainCount)，并且不保证说实话。

直接来自[文档](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/retainCount)：**不要使用这种方法。**

> ## 特别注意事项
> 
> 这种方法在调试内存管理问题时没有任何价值。因为任何数量的框架对象可能已经保留了一个对象以保存对它的引用，而同时自动释放池可能在一个对象上保存了任何数量的延迟释放，所以您不太可能从中获得有用的信息方法。
> 
> 要了解您必须遵守的内存管理的基本规则，请阅读“<a href="https://developer.apple.com/library/mac/documentation/cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#/ /apple_ref/doc/uid/20000994" rel="nofollow">内存管理策略”。要诊断内存管理问题，请使用合适的工具：
> 
> *   [Clang 静态分析器](http://clang-analyzer.llvm.org/)通常可以在您运行程序之前发现内存管理问题。
> *   Instruments 应用程序中的 Object Alloc 工具（请参阅[*Instruments 用户指南*](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652)）可以跟踪对象分配和销毁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T00:58:12.587

看这里，这更清楚地解释了一切：

[http://www.whentouseretaincount.com](http://www.whentouseretaincount.com)

# ios - 调试 NSManagedObjectContext

> ID：15284290
> 
> 赞同：1
> 
> 时间：2013-03-07T23:59:45.220
> 
> 标签：ios, objective-c

在调试时，如果我有一个 NSManagedObjectContext，有没有办法查看里面有什么对象。

基本上我有一个保存错误，因为保存了一个不符合 NSCoding 的 CGColor。但我不知道这个 CGColor 是从哪里来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:22:40.873

我同意 JR（下文）的观点，即您应该设置一个异常断点以在故障点获取堆栈跟踪。

另一个想法：虽然自动保存很方便，但它并不总是在调试的最佳时间发生。当您想要验证您的对象时，您可能会发现进行强制显式保存的调试操作很有帮助：

```
[self.document closeWithCompletionHandler:^(BOOL success) {
     if (!success) NSLog(@“failed to close document %@”, self.document.localizedName);
  }]; 
```

有了这个或类似的东西，您可以在不同的点开始保存，以查看您的对象何时损坏。请记住，保存是异步的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T00:05:18.820

好吧，退后一步，想想你的错误是从哪里来的。

您正在尝试`CGColorRef`通过该`NSCoding`机制对 a 进行编码。这显然是不支持的，会导致抛出异常。您应该在调试器中添加一个异常断点，以检查执行此错误分配的位置。然后，您应该能够弄清楚您的问题。

如果您发现这与您的问题无关，那么您确实可以通过该`-registeredObjects`方法内省在您的上下文中放置的对象。

# python - 引用 csh 的字符串

> ID：15284292
> 
> 赞同：0
> 
> 时间：2013-03-07T23:59:49.497
> 
> 标签：python, csh, tcsh, quoting

就这个问题而言，“csh”是指 tcsh。

我知道避免使用 csh 进行编程的标准建议。但是，有时需要与现有的 csh 代码交互，然后可能需要为 csh 引用一个字符串。换句话说，问题是如何在 csh 语法中表示任意字节字符串。

以下 csh_escape_arg 函数是否正确？也就是说，是否存在一个字符串，如果将其添加到测试中的字符串列表中，会导致该测试失败？如果有这样的字符串，我该如何修复我的函数以使所有字符串都通过测试？

```
import string
import subprocess
import unittest

# Safe unquoted
_safechars = frozenset(string.ascii_letters + string.digits + '@%_-+:,./')

def csh_escape_arg(str_):
    """Return a representation of str_ in csh.

    Based on the standard library's pipes.quote
    """
    for c in str_:
        if c not in _safechars:
            break
    else:
        if not str_:
            return "''"
        return str_
    str_ = str_.replace("\\", "\\\\")
    str_ = str_.replace("\n", "\\\n")
    str_ = str_.replace("!", "\\!")
    # use single quotes, and put single quotes into double quotes
    # the string $'b is then quoted as '$'"'"'b'
    return "'" + str_.replace("'", "'\"'\"'") + "'"

def csh_escape(args):
    return " ".join(csh_escape_arg(arg) for arg in args)

def get_cmd_stdout(args, **kwargs):
    child = subprocess.Popen(args, stdout=subprocess.PIPE, **kwargs)
    stdout, stderr = child.communicate()
    rc = child.returncode
    if rc != 0:
        raise Exception("Command failed with return code %d: %s:\n%s" % (rc, args, stderr))
    else:
        return stdout

class TestCsh(unittest.TestCase):

    def test_hard_cases(self):
        for angry_string in [
            "\\!\n\"'`",
            "\\\\!\n\"'`",
            "=0",
            ]:
            out = get_cmd_stdout(["tcsh", "-c", csh_escape(["echo", "-n", angry_string])])
            self.assertEqual(out, angry_string)

unittest.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:02:30.423

1) 对于 tcsh，您还需要引用“=”以防止目录堆栈替换。2）我认为你的算法也会有一个带有不成对双引号的字符串的问题。3）另一种方法是以字符串不受替换的方式编写目标脚本。例如，通过将字符串写入文件，然后让脚本将字符串从文件读取到变量中，例如

```
set a = `cat file` 
```

然后根据需要使用变量。

# asp.net - 将记录集从 C# 代码隐藏作为 Json 传递到 aspx 页面

> ID：15284293
> 
> 赞同：0
> 
> 时间：2013-03-07T23:59:49.207
> 
> 标签：asp.net, json, client-side, json.net

在 Page_Load 我得到的数据像

```
var products = BLL.Presenters.Products.GetAll(); 
```

如果大约有 10 个产品，它会返回一个列表。

我想将该产品列表作为 json 传递给 aspx 页面，然后使用 JSON 对象执行一些客户端操作。

如何在不使用隐藏字段的情况下将 JSON 对象从代码隐藏中的记录集中传递到 aspx 页面？

ps 我们已经在使用来自其他 JSON 内容的 Newtonsoft.Json 库。

**- 更新 -**

我无法让这个工作。我现在在 JS 中执行 ajax 调用（没有代码隐藏）并获取所需的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:34:52.517

将一块 JSON 传递给页面的一种方法是直接在页面上呈现它。

```
<script type="text/javascript">
    var myData = <%= MyJsonString %>;
</script> 
```

`MyJsonString`上面是你的代码后面的一个属性，它包含作为 JSON 数据字符串的序列化对象结构。如果您愿意，它可以是一个方法调用。无论哪种方式，它都必须能够在调用页面的渲染方法之前返回 JSON 字符串。

显然，您需要将它加载到适合您的应用程序的位置。如果我这样做，它通常在一个小函数内，所以它不是全局的，它在实际使用数据的某个地方调用 .js 文件中的另一个函数。

还要注意呈现字符串后的分号（尽管我相信分号在 javaScript 中并不是绝对必要的，但我的老 C/C++/C# 程序员似乎无法放弃它们。）

请注意，它正在渲染，`<%= %>`因此不会发生 HTML 编码。这很重要，否则 JSON 字符串会出现乱码，并且在脚本块中没有任何意义。

最后，我已经有几年没有做过 WebForms 开发了，所以我可能对一些细节感到生疏——我希望以上内容对你有意义并且对你有用。

**更新**

我只记得 WebForms 有一个“文字”控件，这很可能是您想要的，以符合约定。像这样的东西，也许：

```
<script type="text/javascript">
    var myData = <asp:Literal runat="server" id="MyJsonLiteralControl" />;
</script> 
```

在您后面的代码中，将文字控件的 Text 设置为您生成的 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:15:29.900

创建要发送到 ASPX 页面的对象的视图模型。这可以与您的正常运行时代码中使用的类完全相同。一旦你有了这个类，你就可以使用 AutoMapper 从一个对象类转换到另一个对象类。然后，您可以将此新映射的对象添加到您的返回视图。

```
var products = BLL.Presenters.Products.GetAll().ToList();
Mapper.CreateMap<Products, ProductsViewModel>()
var output = Mapper.Map<IEnumerable<Products>, List<ProductsViewModel>>(products);
return View("Index", output); 
```

您的 ViewModel 类应该看起来像这样。

```
public class ProductsViewModel
{
      public string Name {get; set;}
      public string UPC {get; set;}
      public double? Price {get; set;}
} 
```

我假设您有更多字段，但这只是为了说明。如果您将 ViewModel 类中的字段命名为与主对象类中的相同，AutoMapper 将自动从一种类型转换为另一种类型，从而允许您将对象通过 ViewBag 推送到您的 ASPX 页面。

# css - 内容不可见且 div 延伸

> ID：15284294
> 
> 赞同：0
> 
> 时间：2013-03-07T23:59:50.883
> 
> 标签：css, html, margin, padding

这是我的html。我遇到的问题是'box1' div 甚至不显示并且'nav' 栏会自行扩展。我不知道为什么...

```
<div id="nav">
    <ul>
        <li><a class="selected" href="link1">Home</a></li>
        <li><a href="link2">Services</a></li>
        <li><a href="link3">About</a></li>
        <li><a href="link4">Gallery</a></li>
        <li><a href="link5">Contact</a></li>
    </ul>
</div> <!--#nav-->
<div id="content">
    <div class="wrapper">
        <div class="box1">
            TEXT
        </div> <!--#box1-->
        <div class="box1">
            IMAGE
        </div> <!--#box1-->
    </div> <!--#wrapper-->
</div> <!--#content--> 
```

和CSS...

```
#nav {
    background-color: #000;
}
#nav ul {
    margin: 0 auto;
    width: 80%;
}
#nav li {
    display: inline;
}
#content {
    margin: 0 auto;
    width: 80%;
    min-width: 720px;
}
.box1 {
    width: 40%;
    height: 100px;
    float: left;
    position: relative;
    padding-left: 6.33%;
} 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:42:58.300

```
.box1 {
    width: 40%;
    height: 100px;
    position: relative;
    padding-left: 6.33%;
    border: 1px solid #000;
    margin: 0 auto;
} 
```

预览 >> [http://jsfiddle.net/XJA4T/](http://jsfiddle.net/XJA4T/)

# xcode - 沙盒 OS X 应用程序有什么方法可以拦截击键？

> ID：15284300
> 
> 赞同：3
> 
> 时间：2013-03-08T00:00:22.223
> 
> 标签：xcode, macos, sandbox, entitlements, keystrokes

因此，我在这里使用了 Dave Delong 的出色代码来拦截 OS X 中的击键，而我的应用程序不需要聚焦，不幸的是，当我尝试在控制台中使用“拒绝隐藏控制”消息对其进行沙箱处理时，我的应用程序崩溃了。

一点点挖掘发现，在一年前这是不可能的，但从那以后有什么变化吗？或者这是否意味着我的应用程序无法进入 Mac App Store，因为它依赖于能够拦截击键？有没有我在这里错过的权利？

# asp.net-mvc - 使用 Razor / form post 映射字符串键值对列表

> ID：15284302
> 
> 赞同：0
> 
> 时间：2013-03-08T00:00:29.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我的 Razor 视图中有一些 HTML，基本上是 3 行的一对 Select 和 Input 元素：（ *可能超过 3 个）*

```
<select name="SocialNetwork[1]">
    <option>Skype</option>
    <option>Twitter</option>
    <option>Facebook</option>
</select>

<input name="SocialNetworkUsername[1]" type="text" />

<select name="SocialNetwork[2]">
    <option>Skype</option>
    <option>Twitter</option>
    <option>Facebook</option>
</select>

<input name="SocialNetworkUsername[2]" type="text" />

<select name="SocialNetwork[3]">
    <option>Skype</option>
    <option>Twitter</option>
    <option>Facebook</option>
</select>

<input name="SocialNetworkUsername[3]" type="text" /> 
```

当表单发布到我的控制器方法时：

```
public ActionResult SaveDetails(MyModel model)
{
} 
```

我如何“映射” SocialNetwork 的价值观 | SocialNetworkUsername 到模型？就像是：

```
public class MyModel
{
    public string SomeProperty { get; set; }
    public string SomeOtherProperty { get; set; }

    public Dictionary<string,string> SocialNetworks { get; set; }
} 
```

如果有更合适的东西，我不会“卡住”使用字典

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:58:51.070

您可以使用编辑器模板来实现此目的。

编辑器模板将允许您在主视图中循环浏览社交网络列表，并使用 @Html.EditorFor 帮助器呈现您的下拉列表并使模型绑定变得容易。

首先，您的模型应该代表一个单一的社交网络

在您的模型中，您需要包含下拉列表值的属性以及所选值的属性。您还需要一个属性来包含 SocialNetworkUsername

```
public IEnumerable<SelectListItem> SocialNetworks { get; set; }
public string SelectedSocialNetwork { get; set; }

public string SocialNetworkUserName { get; set; } 
```

要使您的编辑器模板添加一个新文件夹 /Views/Shared/EditorTemplates

在 EditorTemplates 文件夹中创建一个名为 MyClass 的新视图（或任何您的模型类名称）

您需要遵循这些命名约定，因为编辑器模板无需其他配置即可工作。

在 MyClass.cshtml 中，您需要允许编辑单个社交网络

```
@model MyModel

@Html.DropDownListFor(m => m.SelectedSocialNetwork, Model.SocialNetworks)

@Html.TextBoxFor(m => m.SocialNetworkUserName) 
```

然后在您的主视图中，您使用 MyModel 列表作为视图的模型，并使用 for 循环来呈现您的编辑器模板。

```
@model List<MyModel>

@using(Html.BeginForm())
{
    for (var i = 0; i < Model.Count; i++)
    {
        Html.EditorFor(Model[i])
    }
} 
```

在您的控制器中，只需更改您的操作方法参数以接受 MyClass 列表和模型绑定就可以神奇地工作；）

# desire2learn - 可以使用desire2learn 远程插件将自定义外部学习工具链接插入课程模块吗？

> ID：15284305
> 
> 赞同：0
> 
> 时间：2013-03-08T00:00:38.807
> 
> 标签：desire2learn

我们想使用 Desire2Learn 远程插件通过课程构建器配置自定义 LTI 外部学习工具链接，但我不清楚是否应该使用远程插件 API 以及如何使用远程插件 API 来实现此目的。

这就是我们想要做的：

当用户使用 Course Builder 将我们的远程插件的实例添加到模块时，我们的插件将显示一个 UI 来配置我们的 LTI 工具的特定实例。当教师通过我们的插件 UI 完成对实例的配置后，我们希望在模块中放置插件的位置创建一个外部学习工具链接。然后当学生点击模块链接时，他们将看到外部学习工具而不是插件 UI。

[当我们的插件 UI 以类似于 Book Widget 示例 ( http://devs.valence.desire2learn.com/2013/02/15/](http://devs.valence.desire2learn.com/2013/02/15/remote-plugins-the-bookwidget-sample-2) ) 的方式执行时，我们可能能够使用 Valence API 创建链接[remote-plugins-the-bookwidget-sample-2](http://devs.valence.desire2learn.com/2013/02/15/remote-plugins-the-bookwidget-sample-2)）将书籍添加到课程中。但是，我不确定我们如何确切知道在哪里创建链接，或者是否可以使用 Valence API 创建 LTI 外部工具链接。

此外，当您在课程构建器中使用插件时，您可以将插件拖到模块中的特定位置，例如在两个现有项目之间。执行插件时，我在 LTI 启动参数中看不到任何内容，告诉我们除此参数之外的位置：

custom_links_import_service_url:_https://mydomain.desire2learndemo.com/d2l/lms/remoteplugins/coursebuilder/ImportService.d2l?parentNode=541&pluginId=85834c62-3fc6-455d-b89a-e99bbf70f1ce

该 URL 具有模块的节点 (parentNode=541)，但没有告诉我们插件放置在模块中的哪个位置。

启动还包括一个返回 URL 参数，但返回该参数似乎只是刷新页面，甚至没有将原始插件启动 url 添加到模块中。我看到文本“插入操作已取消”。在弹出窗口的顶部，课程构建器会刷新。

launch_presentation_return_url:_https://mydomain.desire2learndemo.com/d2l/lms/remoteplugins/courseBuilder/return.d2l?ou=6671&parentNode=541&pluginId=85834c62-3fc6-455d-b89a-e99bbf70f1ce

希望对我们想做的事情的描述是有意义的，并感谢您对我们如何做到这一点的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:48:02.997

这个问题有几个方面。

**通过 API 创建 LTI 链接**。我们目前不支持通过学习框架 API 创建 LTI 链接，但这是我们即将于 2013 年春季发布的 10.2 版本的路线图。即将推出的 API 将允许调用者注册新的 LTI 链接对象，并围绕快速链接设计已注册的 LTI 链接（其中包含可用于启动 LTI 链接的 URL）。

**在课程内容模块中定位内容主题**。目前我们的 API 仅支持在模块中创建、修改或删除主题；我们不提供 API 来在模块的包含主题列表中精确定位主题。放置在模块中的新项目始终位于模块包含的事物列表的底部。您传递的`parentNode`值确实是父内容模块的 ID，当您使用 API 添加主题时，您会将其添加到该模块中。

**页面返回**。D2L LE 工具消费者的当前行为是，当工具提供者重定向到 时`launch_presentation_return_url`，LMS 会刷新页面（因此，您在重定向到返回 URL 之前插入的任何链接都会出现在刷新的页面中）。如果您需要将用户的注意力引导到有关 LTI 启动状态的任何内容，那么您的 UX 需要在重定向回返回 URL 之前处理给用户的消息。

在截至 2013 年 3 月的 LMS 部署版本上，页面返回 LTI 工具提供者需要将`?lt_msg=`查询字符串参数与返回 URL 一起发送，尽管此参数可以具有空值。在 2013 年 3 月提供的服务包之后，工具提供商不再需要将该查询参数发送回返回 URL：返回 URL 的任何请求都需要刷新页面，无论它是否包含查询参数。

# php - Wordpress 显示特定类别下的所有帖子

> ID：15284311
> 
> 赞同：0
> 
> 时间：2013-03-08T00:01:24.447
> 
> 标签：php, wordpress, list, categories

我正在尝试显示子子类别下的所有帖子。但是我的代码继续呈现父类别，然后是所有帖子，然后是子类别和所有帖子。我不断获得更多我想要的类别。此侧边栏仅在 single.php 中使用。

我的类别结构如下所示。

*   家长
    *   孩子 1
        *   童童 1.1
        *   童童 1.2
    *   孩子 2
        *   儿童-儿童 2.2

在 Child-child 下我有帖子，我想如何渲染它。

```
<div id="child-child-title">
    <ul>
        <li class="post">title + post meta data</li>
        <li class="post">title + post meta data</li>
        <li class="post">title + post meta data</li>
    </ul>
</div> 
```

这是我正在使用的内容，它正在渲染每个类别（无论是父母还是孩子）以及网站上的每个帖子。

```
<?php global $post; $categories = get_the_category();foreach ($categories as $category) : ?>
<h4>&raquo; <?php echo $category->name; ?></h4>
<ul>

<?php
foreach((get_the_category()) as $category) {
    $cat_ids=$cat_ids . $category->cat_ID . ',';
}
$cat_ids=substr($cat_ids, 0, -1);
//----------
?>

<?php $posts = get_posts('numberposts=20&amp;category='. $cat_ids);foreach($posts as $post) : ?>
<a href='<?php the_permalink() ?>'><?php the_title(); ?></a></li><br>
<?php endforeach; ?>
<li><strong><a href="<?php echo get_category_link($category->term_id);?>"><?php echo $category->name; ?> </a></strong></li>
<?php endforeach; ?>
</ul> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:41:30.970

使用来自特定类别的查询帖子

```
query_posts( array ( 'category_name' => 'my-category-slug', 'posts_per_page' => -1 ) ); 
```

有关使用此功能的更多参考，请访问[类别功能参考](http://codex.wordpress.org/Function_Reference/query_posts#All_Posts_in_a_Category)

但是，对于子类别（或子类别），“类别名称”并不总是有效。而是使用'category-slug'。

# sql - 如何让名称出现在两个视图中？

> ID：15284313
> 
> 赞同：0
> 
> 时间：2013-03-08T00:01:30.807
> 
> 标签：sql, database

我有一个非常大的视图，其中包含 500 万条包含重复名称的记录，每一行都有唯一的事务编号。还存在包含唯一名称的 9000 条记录的另一个视图。现在我想在第一个视图中检索其名称出现在第二个视图中的记录

```
select * from v1 where name in (select name from v2) 
```

但是查询需要很长时间才能运行。有没有捷径的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:03:33.123

您是否尝试仅使用`INNER JOIN`. 这将返回两个表中存在的所有行：

```
select v1.* 
from v1 
INNER JOIN v2
 on v1.name = v2.name 
```

如果您需要帮助学习`JOIN`语法，这里有一个很棒的[可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

您可以添加`DISTINCT`将删除查询返回的任何重复值的关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T00:03:50.813

使用`JOIN`.

这`DISTINCT`将允许您仅返回列表中的唯一记录，因为您是从另一个表加入的，并且一条记录可能在另一个表上有多个匹配项。

```
SELECT  DISTINCT a.*
FROM    v1 a
        INNER JOIN v2 b
            ON a.name = b.name 
```

为了获得更快的性能，请在两个表的列`NAME`上添加索引，因为您是通过它加入的。

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# r - grep 在两个字符串上

> ID：15284316
> 
> 赞同：1
> 
> 时间：2013-03-08T00:01:47.760
> 
> 标签：r, regex

我正在努力在一个字符串中抓取两个不同的元素。

字符串看起来像这样，

```
str <- c('a_abc', 'b_abc', 'abc', 'z_zxy', 'x_zxy', 'zxy') 
```

我已经尝试过使用不同的选项`?grep`，但我做错了，正在做这样的事情，

```
grep('[_abc]:[_zxy]',str, value = TRUE) 
```

而我想要的是，

```
[1] "a_abc" "b_abc" "z_zxy" "x_zxy" 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:06:03.847

这应该工作：`grep('_abc|_zxy', str, value=T)`

`X|Y``X`匹配或匹配时`Y`匹配

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T00:09:41.217

使用普通括号`(`，而不是方括号`[`

```
grep('_(abc|zxy)',str, value = TRUE)
[1] "a_abc" "b_abc" "z_zxy" "x_zxy" 
```

为了使`grep`更灵活一点，您可以执行以下操作：

```
grep('_.{3}$',str, value = TRUE) 
```

这将匹配一个下划线`_` 后跟任何字符`.`三遍，`{3}`紧接着是字符串的结尾`$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T00:03:29.750

在这种情况下，只需这样做：

```
str[grep("_",str)] 
```

会工作......在你的具体情况下它更复杂吗？

# java - 打开之前在 SQLite 中创建数据库

> ID：15284317
> 
> 赞同：0
> 
> 时间：2013-03-08T00:01:48.103
> 
> 标签：java, android, sqlite, database-create

我希望针对数据库中已经存在的表查询我的用户名。但是当我执行我的代码时，由于“SQLite 返回错误代码：1，msg = near”=：语法错误，我的应用程序强制关闭。

这是 DBAdapter.java 文件

```
package com.example.usernammepassword;

import android.content.ContentValues;

public class DBAdapter {
    public static final String KEY_NAME = "UserName";
    public static final String KEY_PASS = "Password";
    private static final String TAG = "DBAdapter";
    private static final String DATABASE_NAME = "Test";
    private static final String DATABASE_TABLE = "UsernamePassword";
    private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE =
        "create table if not exists UsernamePassword (UserName text not null primary key, Password text not null);";

private final Context context;
DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx)
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db1)    {
        try {
            db1.execSQL(DATABASE_CREATE);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
}

public DBAdapter open() throws SQLException {

public void close() {

public long insertNewUser(String UserName, String Password) {

public boolean deleteUser(String UserName)

public Cursor getAllUserNamesAndPasswords()
{
    return db.query(DATABASE_TABLE, new String[] { KEY_NAME,
            KEY_PASS}, null, null, null, null, null);
}

public Cursor getPasswordForUserName(String UserName) throws SQLException

public boolean updatePasswordForUserName( String UserName, String Password) { 
```

}

和 MainActivity.java 文件

```
package com.example.usernammepassword;

import android.os.Bundle;

public class MainActivity extends Activity {

    private String md5(String in) {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            EditText text = (EditText)findViewById(R.id.editText1);
            EditText text1 = (EditText)findViewById(R.id.editText2);
            String userid = text.getText().toString();
            String pass = text1.getText().toString();

            Toast.makeText(MainActivity.this,"Entered "+userid+" and password entered is "+pass,Toast.LENGTH_LONG).show();

            pass = md5(pass + "@string/salt");

            Toast.makeText(MainActivity.this,"Password after adding a salt and md5 hashing is now equal to " + pass,Toast.LENGTH_LONG).show();

            DBAdapter db = new DBAdapter(MainActivity.this);
            db.open();
            Cursor c = db.getPasswordForUserName(userid);
            if(c.moveToFirst())
            {
                if(c.getString(1) == pass)
                {
                    Toast.makeText(MainActivity.this, "Authentication Succeded", Toast.LENGTH_SHORT).show();
                    //proceed
                }
                else
                {
                    Toast.makeText(MainActivity.this, "@string/AuthFail", Toast.LENGTH_SHORT).show();
                    //AuthFailure
                }
            }
            else
            {
                Toast.makeText(MainActivity.this,"@string/UserNotFound", Toast.LENGTH_SHORT).show();
                //where to from here
            }

        }

    });

}

public boolean onCreateOptionsMenu(Menu menu) { 
```

}

日志猫： ![在此处输入图像描述](../Images/98ce4ec09adc2f289a4e87bcde566e0e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:48:18.677

您可能将表名从某事更新为`UserNamePassword`，但没有更改`DATABASE_VERSION`，这将触发`onUpgrade()`。当然`onUpgrade()`也必须实施以创建适当的表。

# java - Java中的变量范围效率

> ID：15284321
> 
> 赞同：1
> 
> 时间：2013-03-08T00:02:05.297
> 
> 标签：java, scope

一个快速的性能/内存问题：

如果有区别，还有什么更好的呢？

这个

```
int x;
for (int i = 0; i < 10000; i++)
{
 x = i;
 //do something
} 
```

或这个

```
for (int i = 0; i < 10000; i++)
{
 int x = i;
 //do something
} 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:04:33.423

完全相同...定义变量（原始/引用）只是计算它将存在的位置（作为堆栈指针的偏移量）。这是由编译器完成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T00:04:29.527

我认为它们在组装方面都是相同的（有时只做一个大的堆栈推送比一堆本地变量的推送弹出更快）。在第二种情况下，它只会缩小 x 的范围，即使它们都产生相同的字节码。

# java - Android Drawables：outofmemoryerror VERSUS“无法绘制回收位图”错误

> ID：15284323
> 
> 赞同：3
> 
> 时间：2013-03-08T00:02:27.747
> 
> 标签：java, android, android-layout

我已经阅读了大量关于这两个错误的帖子，但似乎找不到适合我的解决方案。我有一个基本的动物列表视图活动。当您单击列表中的某个项目时，它会打开 AnimalViewActivity 并在 ImageView 中显示一个简单的 png 图像。

这是我为 ImageView 设置图像的地方：

```
public void getImage() {

    String imageName = myService.yourAnimals.get(key).getType();
    System.out.println(imageName);

    Resources res = getResources();
    int resourceId = res.getIdentifier(imageName, "drawable", getPackageName() );
    Drawable drawable = res.getDrawable( resourceId );
    image.setImageDrawable( drawable );
} 
```

然后当我离开 AnimalViewActivity 返回 listview 活动时，我这样做：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    //((BitmapDrawable)image.getDrawable()).getBitmap().recycle();
    image.getDrawable().setCallback(null);
    //System.gc();
    System.out.println("Destroy image!");
} 
```

如果我取消注释 recycle() 行，我会收到“无法绘制回收位图”错误。如果我让它保持原样，我会得到 bitmapfactory 的 outofmemoryerror。

java.lang.IllegalArgumentException：无法绘制回收位图或 java.lang.OutOfMemoryError android.graphics.BitmapFactory.nativeDecodeAsset（本机方法）

在我打开 ViewAnimalActivity 大约 20 次并且应用程序崩溃后，这些错误中的任何一个都会发生。唯一似乎永远有效的是 System.gc() ，但我知道这不是一个好的解决方案。

我在android4.1中测试，但是minSDK设置为android3.0

我读到位图回收的 javaVM 错误在 3.0 中已修复？

出于某种原因，如果不显式调用 gc，垃圾收集的速度不够快。这些图像很小，大多在 100-300kB 之间。

有任何想法吗？

编辑： image.setImageDrawable(null);似乎更快乐

我想我之前在 Android2.2 上设置它时也尝试过，但到目前为止，Android3.0 对它很满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:10:37.263

[recycle() 的文档](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)明确指出它用于“高级用途”。实际上，将引用设置为 null 更为重要。

> 这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

此外，还可以在绘制[位图之前查看它是否已被回收](http://developer.android.com/reference/android/graphics/Bitmap.html#isRecycled%28%29)。（发布您的 logcat 以查看您遇到错误的位置。您可以添加代码以验证 Bitmap 是否已被回收并重新加载）。

总的来说，我认为你最好看看告诉你如何有效[显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)的 Android 培训课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:45:36.147

你为什么不先尝试将drawable设置为null，然后回收它？问题可能是因为当你回收它时drawable仍然在图像上，从而导致“无法绘制回收的位图错误”。如果您首先将其设置为 null，从而将实际的 ImageView（或您正在使用的任何内容）设置为 null，然后将其回收，这可能会解决您的问题。

编辑：哇！我完全忘记了如果您将可绘制对象设置为空，那么您将无法检索您要回收的位图。尝试先将其分配给一个变量，然后再循环它。

# javascript - 向从角度资源查询返回的集合添加方法

> ID：15284332
> 
> 赞同：6
> 
> 时间：2013-03-08T00:03:06.787
> 
> 标签：javascript, angularjs

我有一个从查询中返回数组的资源，如下所示：

```
.factory('Books', function($resource){
    var Books = $resource('/authors/:authorId/books');
    return Books;
}) 
```

是否可以将原型方法添加到从此查询返回的数组中？（注意，不是`array.prototype`）。

例如，我想将方法​​添加`hasBookWithTitle(title)`到集合中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T03:46:03.367

ricick 的建议是一个很好的建议，但是如果您想在返回的数组上实际拥有一个方法，那么您将很难做到这一点。基本上，您需要做的是围绕 $resource 及其实例创建一些包装器。您遇到的问题是 angular-resource.js 中的这行代码：

```
var value = this instanceof Resource ? this : (action.isArray ? [] : new Resource(data)); 
```

这是设置 $resource 的返回值的地方。发生的情况是在执行 ajax 请求时填充并返回“值”。当 ajax 请求完成时，该值返回到上面的“值”中，但通过引用（使用 angular.copy() 方法）。数组的每个元素（对于像 query() 这样的方法）都是您正在操作的资源的一个实例。

因此，您可以扩展此功能的一种方法是这样的（未经测试的代码，因此如果不进行一些调整可能无法工作）：

```
var myModule = angular.module('myModule', ['ngResource']);
myModule.factory('Book', function($resource) {
    var service = $resource('/authors/:authorId/books'),
        origQuery = service.prototype.$query;

    service.prototype.$query = function (a1, a2, a3) {
        var returnData = origQuery.call(this, a1, a2, a3);
        returnData.myCustomMethod = function () {
            // Create your custom method here...
        return returnData;
        }
    }

    return service;
}); 
```

同样，您将不得不稍微弄乱它，但这是基本思想。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T00:28:05.657

这可能是创建自定义服务扩展资源并向其添加实用程序方法的好案例，而不是向默认资源服务的返回值添加方法。

```
var myModule = angular.module('myModule', []);
myModule.factory('Book', function() {
    var service = $resource('/authors/:authorId/books');
    service.hasBookWithTitle = function(books, title){
        //blah blah return true false etc.
    }
    return service;
}); 
```

然后

```
books = Book.list(function(){
    //check in the on complete method
    var hasBook = Book.hasBookWithTitle(books, 'someTitle');
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T19:02:53.650

查看 angular-resource.js 中的代码（至少对于 1.0.x 系列），您似乎无法为任何类型的默认行为添加回调（这对我来说似乎是正确的设计）。

如果您只是在单个控制器中使用该值，则可以在调用`query`资源时传入回调：

```
var books = Book.query(function(data) {
    data.hasBookWithTitle = function (title) { ... };
]); 
```

或者，您可以创建一个服务来装饰 Books 资源，将所有调用转发到 get/query/save/etc.，并使用您的方法装饰数组。示例在这里：[http://plnkr.co/edit/NJkPcsuraxesyhxlJ8lg](http://plnkr.co/edit/NJkPcsuraxesyhxlJ8lg)

```
app.factory("Books",
  function ($resource) {
    var self = this;
    var resource = $resource("sample.json");

    return {
      get: function(id) { return resource.get(id); },
      // implement whatever else you need, save, delete etc.
      query: function() {
        return resource.query(
          function(data) { // success callback
            data.hasBookWithTitle = function(title) {
              for (var i = 0; i < data.length; i++) { 
                if (title === data[i].title) {
                  return true;
                }
              }
              return false;
            };
          },
          function(data, response) { /* optional error callback */}
        );
      }
    };
  }
); 
```

第三，我认为这更好，但这取决于您的要求，您可以采用功能方法并将 hasBookWithTitle 功能放在您的控制器上，或者如果需要共享逻辑，则在实用程序服务中。

# c# - 在生产服务器上使用 mail.live.com 发送邮件失败

> ID：15284348
> 
> 赞同：0
> 
> 时间：2013-03-08T00:04:52.150
> 
> 标签：c#, .net, email, smtpclient

我有一个简单的脚本来发送 MailMessage 电子邮件。这工作并发送在本地运行的电子邮件。但是，当部署到生产服务器时，我收到此错误

```
Authentication failed because the remote party has closed the transport stream.

Description: An unhandled exception occurred during the execution of the current web    request. Please review the stack trace for more information about the error and where it  originated in the code. 

Exception Details: System.IO.IOException: Authentication failed because the remote party has closed the transport stream.

Source Error: 

An unhandled exception was generated during the execution of the current web request. >Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

邮件代码：

```
try
{
   SmtpClient smtp = new SmtpClient();
   smtp.EnableSsl = true;
   smtp.DeliveryMethod = SmtpDeliveryMethod.Network; 
   smtp.Send(message);
}

catch (Exception ex)
{
   throw ex;
} 
```

配置设置：

```
 <system.net>
    <mailSettings>
     <smtp from="support@domain.com">
       <network host="smtp.live.com" password="password" port="587" userName="support@domain.com"  enableSsl="true"/>
     </smtp>
    </mailSettings>
  </system.net> 
```

任何想法为什么它在生产中失败？

注意使用 Gmail 时相同的代码有效（更改端口和主机配置设置后）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:29:29.953

在网络服务器上添加 SSL 证书解决了这个问题。

# android - 将 Android 源代码插件与 Eclipse ADT 捆绑包一起使用

> ID：15284353
> 
> 赞同：1
> 
> 时间：2013-03-08T00:05:27.290
> 
> 标签：android, eclipse, plugins, adt

我按照[android.com 的](http://developer.android.com/sdk/installing/bundle.html)说明使用 android 开发人员工具 (ADT) 包安装 eclipse。然后，我在 eclipse 中执行 Help > Install New Software... 尝试安装我在旧的 eclipse 安装中愉快地使用了至少一年的 [Android Source Plugin 。](http://adt-addons.googlecode.com/svn/trunk/source/com.android.ide.eclipse.source.update/)

尝试使用 Java Rel7 安装它，我收到一个错误，我发现一些错误报告是由于在 Java Rel7 上运行 eclipse。所以我尝试运行Java Rel5，但是这个版本的eclipse需要Java Rel6。所以我安装了 Java Rel6 并尝试在其上运行 eclipse 并安装 Android Source Plugin，但这也失败了。

还有其他人遇到这样的事情吗？知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:35:24.193

您可以尝试分别安装 eclipse 和 SDK。最近我不得不在不同的机器上安装 android 几次，这就是我采取的方法。您可以从 eclipse 网站[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载 eclipse 。（我有 Java EE 开发人员的第一个选项 Eclipse IDE）。

安装后，您可以使用本指南[http://mobile.tutsplus.com/tutorials/android/android-sdk-installation/安装 android sdk](http://mobile.tutsplus.com/tutorials/android/android-sdk-installation/)

还要确保如果你想在手机上测试你进入 android sdk 管理器（安装 SDK 时应该出现在 eclipse 中的某个地方）并在那里下载更新。

# ruby-on-rails - 如何将 rb 注册为 rails 中的模板处理程序

> ID：15284359
> 
> 赞同：0
> 
> 时间：2013-03-08T00:06:07.360
> 
> 标签：ruby-on-rails

好吧，因为我在我的视图文件中使用了很多帮助方法，并且我避免在我的大多数视图文件中使用 html。

例子

> myview.html.erb

```
<%=myhelper @myobject%> 
```

所以我最终每次为每个文件都使用 erb 处理标签。

```
<%=%> 
```

我想将 .rb 注册为模板处理程序或任何其他扩展名。所以我的模板看起来像

> myview.html.rb

```
myhelper @myobject 
```

我对如何继续一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:47:52.483

我找到了，看来 railscasts 已经涵盖了那部分。

它的表演笔记，值得一看。

[https://github.com/railscasts/379-template-handlers/blob/master/store-after/config/initializers/ruby_template_handler.rb](https://github.com/railscasts/379-template-handlers/blob/master/store-after/config/initializers/ruby_template_handler.rb)

没有 ruby​​ 的东西在没有 erb 标签的情况下很容易阅读和渲染。

# javascript - javascript - 如何在特定时间段内的特定天数的特定周内向用户激活表单

> ID：15284364
> 
> 赞同：0
> 
> 时间：2013-03-08T00:06:27.090
> 
> 标签：javascript, html, arrays, forms, date

我正在为 IE 制作一个 web 表单。

我已经完成了我的表格，但我需要用户只能在周日下午 6 点之后的偶数周内使用该表格，直到周一（第二天）下午 3 点。无论用户在哪里，这都需要在 EST 中。

我没有经常使用 Javascript，并且对如何做到这一点完全不知所措。我遇到的最大麻烦是确定今天是一年中的一个偶数周。（即使是几周也是工资周，这只是应该使用表格的时候。）

我希望今天的日期在偶数周标准中作为第一个过滤器。我已经编写了 if、if else 语句以确定今天的日期和时间是否符合我的标准要求`.getUTCDay()`和`.getUTCHours()`.

我正在考虑使用一组合格的周日和周一日期，但不确定如何编写 if 语句来查看今天的日期是否在数组中。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:10:28.753

您可以使用 JavaScript`Date`对象（参见：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date ）查看当前日期，您甚至可以将其解析为您喜欢的任何格式。然后做你的表单逻辑。

对于更精细的`Date`操作，您可以查看**Moment.js [http://momentjs.com/](http://momentjs.com/)**，它是一个非常全面的处理日期/时间的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:48:13.840

您的第一个问题是在正确的时间获取日期对象。时区“EST”用于世界上至少 3 个不同时区的不同时区，但我假设您想要 UTC-05:00 的美国东部标准时间。

Javascript 日期对象的核心是 UTC 时间值，因此您可以获取本地日期对象，减去 5 小时，然后使用 UTC 方法获取等效的美国东部时间时区的值。一旦你有了那个日期对象，你只需要在[这里](https://stackoverflow.com/questions/6117814/get-week-of-year-in-javascript-like-in-php/6117889#6117889)得到每个答案的周数， 除了你应该使用UTC方法而不是普通的日期方法（例如getUTCFullYear而不是getFullYear）。

请注意，这将忽略客户端位置的夏令时，并且 EST 不指示夏令时是否有效。它通常被赋予不同的时区指示符（例如，使用美国东部标准时间和夏令时的地方调用他们的时区 EDT，这将是 UTC-04:00）。

这是一些应该完成这项工作的代码，请注意它只是经过轻微测试。我决定包含本地时区偏移量，以使其保持一致并且可能更容易理解。

```
// Returns true or false if current date is 
// an even week of the year in timezone UTC-5:00
// Adjust local date object to be UTC-5:00 object
// Provide a date object to test, or undefined for
// current date
function isPayWeek(d) {
  d = d? new Date(d) : new Date();

  // Adjust for local timezone and US EST in minutes
  d.setMinutes(d.getMinutes() + d.getTimezoneOffset() - 300);

  // return true if week number is even (note: zero is even)
  return !(getWeekNumber(d)[1] % 2)
}

function getWeekNumber(d) {
  d = new Date(d);
  d.setHours(0,0,0);
  d.setDate(d.getDate() + 4 - (d.getDay()||7));

  var yearStart = new Date(d.getFullYear(),0,1);
  var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7)

  // Return array of year and week number
  return [d.getFullYear(), weekNo];
}

var d = new Date(2013,0,20,20,0,0); // 2013-01-20T10:00:00Z
var w = getWeekNumber(d); // week 3, 2013
alert(d + '\n' + 'week: ' + w + '\n' + isPayWeek(d)); // false

var d = new Date(2012,11,31,20,0,0); // 2012-12-31T10:00:00Z
var w = getWeekNumber(d); // week 1, 2013

alert(d + '\n' + 'week: ' + w + '\n' + isPayWeek(d)); // false

var d = new Date(2013,0,7,20,0,0); // 2013-01-07T10:00:00Z
var w = getWeekNumber(d); // week 2, 2013

alert(d + '\n' + 'week: ' + w + '\n' + isPayWeek(d)); // true 
```

# java - 是否有“超类”方式来定义泛型类型或仅“扩展”？

> ID：15284365
> 
> 赞同：3
> 
> 时间：2013-03-08T00:06:34.313
> 
> 标签：java, generics

这个想法是做类似下面的事情，并让编译器在编译时检查 toLoad 是一个可以包含 AType 对象的数组（即：AType 扩展或者是 T NOT T 扩展或者是 AType）。有没有办法用泛型做到这一点？

```
private List<AType> aList_;

<T superclassof AType> T[] loadArray(T[] toLoad) {
    for(int i = 0; i < alist_.size(); ++i) {
        toLoad[i] = (T)aList_.get(i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:08:41.720

改变我的答案。是的，有一个“超级”关键字可用于泛型，但我认为它不会在这里工作。

这里解释一下它是如何使用的：[java generics super keyword](https://stackoverflow.com/questions/3847162/java-generics-super-keyword)

您可能应该做的是返回`Collections.toArray()`列表并将其绑定到您正在使用的类型（它本身可能是通用的）。我不认为你真的需要将返回类型定义为任何东西的超类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T00:16:19.400

不...... Java不允许类型变量的下限，即使有一些有效的用例......就像你的一样。

如果你使用`List`，我们可以使用带下限的通配符`List<? super A>`。但不适用于数组。

```
<L extends List<? super A> L load(L toLoad) 
{
    for(int i = 0; i < alist_.size(); ++i) 
        toLoad.set(i, aList_.get(i) );
    return toLoad;
} 
```

不过，我们可以将数组包装在 List 中。

```
Object[] array = new Object[length];

load(new Wrapper<>(array));

class Wrapper<E> implements List<E>
{
    E[] array;

    Wrapper(E[] array){ this.array=array; }

    E set(int index, E element)
    {
        check index<array.length
        array[index] = element;
    } 
```

# jquery - Jquery用html标签替换字符串中的空格

> ID：15284366
> 
> 赞同：0
> 
> 时间：2013-03-08T00:06:39.430
> 
> 标签：jquery, html, replace

我想用 html`<br />`标签替换字符串中的空格，最好的方法是什么？目前我有这个代码用“-”替换空格。

```
$(".msn").each(function() {
    $(this).text($(this).text().replace(/ /g, '-'));
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T00:09:50.487

```
$(".msn").html(function(i, oldHTML) {
    return oldHTML.replace(/ /g, '<br/>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:08:12.937

尝试使用`.html()`而不是`.text()`：

```
$(".msn").each(function() {
    $(this).html($(this).html().replace(/ /g, '<br />'));
}); 
```

# url-rewriting - 如何修复 %2520？

> ID：15284368
> 
> 赞同：-2
> 
> 时间：2013-03-08T00:06:54.383
> 
> 标签：url-rewriting, get

我创建了一个网站。我网站上的所有链接都是正确的。

但是如果我从谷歌索引到我的网站，他在 URL 中设置了 %2520 而不是 %20。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:09:34.827

仔细检查实际显示在 HTML 中的链接。看起来“%20”再次转义为“%2520”（“%”的十六进制值为 25。）

编辑：也可能是谷歌在链接不正确时抓取了您的网站，并且它根本还没有更新。解决方案可能是等待 Google 再次抓取您的网站。

# jquery - DIV 或 jQuery 用幻灯片/显示显示？

> ID：15284369
> 
> 赞同：1
> 
> 时间：2013-03-08T00:07:02.573
> 
> 标签：jquery, html, slide, expand

我正在尝试完成一个项目以显示图像，以便其他两个图像像翅膀一样出现？这个例子是这样的：

![在此处输入图像描述](../Images/6abd24b451685745f6eef6b9a7d56a46.png)

我试过用 DIV 和一些 jQuery 来做，但我只能让一个以错误的方式显示或显示，比如上下或从角落滑入，而不是从中间滑入。

任何人都知道一个简单的方法来做到这一点？

jsfiddle.net/fTJPu/17/embedded/result

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:16:06.173

您可以使用 JQuery UI slide() 函数。

[jQuery UI 幻灯片演示](http://api.jqueryui.com/slide-effect/)

在基本图像下方的 css 中具有较低 z-index 的翅膀并隐藏。

使用滑动功能切换和滑出机翼。API 将允许您在时间延迟的情况下向左或向右滑动。

你所拥有的 jsFiddle 会很好。

更新：这是[jsFiddle](http://jsfiddle.net/uWYzg/2/)。我没有像你那样使用表格，而是使用 div。我觉得它看起来更干净一些。基本上，翅膀从隐藏开始，toggle() 将显示它。我使用了 UI 滑块。

html:

```
<div class="angelBox">
    <div class="angelBody">
        <div class="leftWing wing"></div>
        <div class="rightWing wing"></div>
    </div>
</div>
    <br/><br/>
    Click on the Blue Box 
```

CSS：

```
.angelBox{
    margin-left:100px;
}
.angelBody{
    position:relative;
    width:150px;
    height:150px;
    background-color:blue;

 }

.wing{
    width:70px;
    height:50px;
    background-color:grey;
    display:none;
}
.leftWing{
    position:absolute;
    left:-70px;
    top:50px;
}
.rightWing{
   position:absolute;
    right:-70px;
    top:50px;
} 
```

Javascript：

```
$('.angelBody').click(function(){
    $('.leftWing').toggle("slide", { direction: "right" }, 500);
    $('.rightWing').toggle("slide", { direction: "left" }, 500);
}); 
```

元素是绝对定位的，但它们位于相对定位的容器中，因此您可以将整个“小部件”移动到您喜欢的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:36:36.960

当所有其他方法都失败时，您通常可以使用 .animate() 强制执行您想要的行为。

我可能会设置两个不同的动画调用，每个机翼上一个。我将每个机翼的初始宽度设置为小于基础图像的宽度，将基础图像的 z-index 设置为高于机翼，然后执行以下操作：

```
$('#image2').animate({
    'width': image2Width,
    'left': (leftEdgeOfBaseImage - image2Width)
}, delay);

$('#image3').animate({
    'width': image3Width,
    'left': rightEdgeOfBaseImage
}, delay); 
```

# c++ - 为什么编译器没有为我的未实例化模板类的静态成员变量生成代码？

> ID：15284377
> 
> 赞同：1
> 
> 时间：2013-03-08T00:07:58.357
> 
> 标签：c++, templates, static-initialization

这个问题很难说，主要是因为术语类实例化与模板实例化。我有一个充满静态函数和成员的模板类。此模板的每个特化都需要在首次使用之前完成一些初始化。

我最初的计划是只给模板类一个静态`initializer`成员，它将在动态初始化的构造过程中初始化模板类的静态成员。

但是，这是行不通的。除非我在`initializer`类中显式调用代码，否则编译器不会为它生成任何代码或存储。

例如：

```
template<typename Tag>
class WorkerPool
{
    struct WorkerInitializer
    {
        void foo() { }
        WorkerInitializer() { WorkerPool<Tag>::start(); }
    };
    friend struct WorkerInitializer;
    static WorkerInitializer _initializer;

    static void start() { std::cout << "Started" << std::endl; }

public:
    static void async() { std::cout << "Async" << std::endl; }
};

template<typename T> typename WorkerPool<T>::WorkerInitializer 
WorkerPool<T>::_initializer;

struct GenericWorker { };
int main()
{
    WorkerPool<GenericWorker>::async();
} 
```

输出只是“异步”。

但是，如果我将其更改为调用`WorkerPool<T>::async()`调用`_initializer.foo()`，那么初始化程序确实会被编译并正确构造，正如我所期望的那样。

为什么编译器拒绝为我的静态成员生成代码？

我用 Visual Studio 2010/2012、gcc 和 clang 进行了测试，都产生了相同的结果；我的静态成员没有构造。这让我认为标准需要这种行为，但我无法理解为什么会这样。

# php - 表格数据每行上的编辑和删除按钮？

> ID：15284380
> 
> 赞同：1
> 
> 时间：2013-03-08T00:08:21.807
> 
> 标签：php, mysql, sql, database, html-table

我正在做一个电影库作为学校作业，并且有来自数据库表的电影列表，我希望在每一行旁边都有一个编辑和删除选项。

我想为它使用编辑/删除链接。喜欢：

```
"<a href='moviestorage.php?edit=" . $id . "'>Edit</a>" 
```

但我不确定如何获取每部电影的 id，以便将其从数据库中删除。我应该写什么查询？我需要有一个单独的 delete.php 文件吗？我是个新手，所以请多多包涵:) 下面你可以看到我已经完成的代码。

```
 <?php 

        require 'connect.inc.php';

//This feels incomplete... I´m trying here to fish the ID...
        $id = "SELECT id from movies";
        $query = "DELETE FROM movies WHERE id='$id'";

        $query = "SELECT * FROM movies, categories WHERE movies.genre_id = categories.genre_id";
        $result = mysql_query($query);

        if (!$result) die ("Database access failed:" .mysql_error()) ;

        $rows = mysql_num_rows($result);

        echo '<table><tr><th>Title</th><th>Release year</th><th>Genre</th><th>Director</th><th>Update</th><th>Delete</th></tr>';

        for ($j = 0 ; $j < $rows ; ++$j) {
        echo '<tr><td>' . mysql_result($result,$j,'title') . '</td>' ;
        echo '<td>' . mysql_result($result,$j,'release_year') . '</td>' ;
        echo '<td>' . mysql_result($result,$j,'genre') . '</td>' ;
        echo '<td>' . mysql_result($result,$j,'director') . '</td>' ;
        echo '<td>'."<a href='edit_movie.php?edit=" . $id . "'>Edit</a>".'</td>' ;
        echo '<td>'."<a href='delete.php?delete=" . $id . "'>Delete</a>".'</td></tr>' ;

        }
        echo '</table>'; 

        include 'add_movie.php';
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:12:22.137

我建议您为每一行使用一个带有删除和编辑按钮以及带有 ID 的隐藏字段的表单。然后，您可以将该表单发布到正确的脚本并确定要在那里采取的行动。

如果您必须使用链接来删除项目，至少让链接指向另一个确认页面，其中包含用户必须提交的表单并发布到您的删除脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:40:40.373

如果您必须在新页面上**编辑和删除，那么您可以通过这种方式放置超链接**

```
 echo "<a href=\"edit.php?id=".mysql_result($result,$j,'id')."\"><strong>EDIT</strong>";

  echo "<a href=\"delete.php?id=".mysql_result($result,$j,'id')."\"><strong>delete</strong>"; 
```

对于**删除**的确认，您可以在删除链接上使用它

```
 echo "<a href=\"delete.php?id=".mysql_result($result,$j,'id')."\" onclick=\"return confirm('You want to delete your own account???');\"><strong>delete</strong>"; 
```

比使用获取下一页上的**id**

```
 $id = $_GET['id']; 
```

希望对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T15:02:30.140

如果您需要一个简单有效的解决方案，请使用数据表。:) 请在谷歌搜索。花了一些时间研究如何实现它，它将为将来节省大量时间。

# python - 从包安装 Python，终端没有更新？

> ID：15284381
> 
> 赞同：2
> 
> 时间：2013-03-08T00:08:23.547
> 
> 标签：python

安装 3.3.0 后，终端仍然显示 Python 2.7.2

我是 python 新手——只想在 Mac 10.8 上获得一个好的开发环境。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T00:10:38.980

使用`python3`代替`python`：

```
$ python3
Python 3.2.3 (default, Oct 19 2012, 19:53:57) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T00:11:16.193

参见[PEP 394](http://www.python.org/dev/peps/pep-0394/)：

> 这个 PEP 提供了一个约定，以确保 Python 脚本可以继续在 *nix 系统之间移植，而不管 Python 解释器的默认版本（即由 python 命令调用的版本）。
> 
> *   `python2`将引用 Python 2.x 的某些版本
> *   `python3`将引用 Python 3.x 的某些版本
> *   `python`应该引用与 python2 相同的目标，但可能在某些前沿分布上引用 python3

您已安装 Python 2 和 Python 3，因此该`python`命令指的是`python2`. 如果您想要 Python 3，请使用`python3`命令显式执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T16:34:30.630

你有几个选择

1.  在你的 bash`~/.bash_profile`添加`alias python='python3'`
2.  而不是使用`python`命令使用`python3`。
3.  通过自制软件安装 python3

# iphone - Xcode 使用 xcode 4.6 创建适用于 iOS 5.1 的工作应用程序

> ID：15284382
> 
> 赞同：1
> 
> 时间：2013-03-08T00:08:28.137
> 
> 标签：iphone, xcode, ios5.1, xcode4.6, ios6.1

我可以在我的 6.1 iOS 上运行我的应用程序，但不能在 5.1 上运行我在 Project 和 Target 上都将 iOS 部署目标设置为 5.1 当我运行 5.1 的模拟时它工作正常但是当我在我的 iPhone 上尝试它时它崩溃了提交了我所有的代码，认为这是问题所在，但同样的事情不断发生

XIB 和自动布局未启用

iPhone模拟没有错误我尝试创建一个新项目并且只有一个标签，但我仍然得到相同的结果

有人可以发送指向适用于 5.1 的单个视图项目的链接吗，该程序可能是空白的，我只想与我的比较一下，看看有什么不同/错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:57:27.957

听起来您可能正在尝试使用特定于 iOS6 的 API（UICollectionView 或类似的东西）。

您需要插入设备并运行它，然后查看控制台指示的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:21:45.853

您已为`ViewController.xib`. 有两种方法可以解决这个问题。在该 xib 上禁用自动布局：

1) [Xcode 4.3 未在 Size Inspector 中显示 Autoresizing 面板](https://stackoverflow.com/questions/9370072/xcode-4-3-not-presenting-autoresizing-panel-in-size-inspector/9370105#9370105)

或者使用多种方法之一来启用自动布局，同时保持向后兼容：

2)[在 iOS 6 中启用自动布局，同时保持向后兼容 iOS 5](https://stackoverflow.com/questions/12411980/enabling-auto-layout-in-ios-6-while-remaining-backwards-compatible-with-ios-5)

# sql - 在 ms 访问中运行不匹配查询（向导）时如何忽略大小写

> ID：15284383
> 
> 赞同：0
> 
> 时间：2013-03-08T00:08:34.437
> 
> 标签：sql, ms-access-2007

在 ms 访问中运行不匹配查询向导时，我得到大小写差异的记录

有没有办法摆脱那里的大小写敏感性

干杯

沙巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:13:20.437

将搜索词和列转换为大写（或小写），类似于：

```
WHERE UCASE(column1) = UCASE(?) 
```

# objective-c - 目标 c 中的 Aes-128 cfb8 加密

> ID：15284384
> 
> 赞同：3
> 
> 时间：2013-03-08T00:08:39.863
> 
> 标签：objective-c, xcode, cocoa, aes

我目前正在尝试在目标 c 中加密 aes-128 cfb8 格式的字符串。我到处寻找，但似乎找不到有效的解决方案。Bouncy castle 是一个理想的解决方案，但它仅适用于 java 和 c#。openssl 是这里的最佳选择吗？我似乎找不到任何详细的方法来实际使用 openssl 进行加密。请引导我走向正确的方向。切换到另一种加密不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T18:02:57.143

CommonCryptor 应该支持 CFB-8 使用`kCCModeCFB8`. 有关详细信息，请参阅[CCCrypt 的手册页](https://developer.apple.com/library/ios/documentation/System/Conceptual/ManPages_iPhoneOS/man3/CCCrypt.3cc.html)。

也就是说，我总是警告人们要非常小心地使用任何像 CommonCryptor 这样的低级库手动实现这种东西。做错事非常容易。例如，您必须使用 KDF 从密码正确生成密钥（您不能只是将密码按字节复制到密钥数据中），并且 IV 必须是随机的，否则 CFB 会失去一些安全性（更具体地说，您绝不能重用相同的密钥和IV）。

如果您不熟悉这些问题，请参阅[使用 CommonCrypto 正确加密 AES](http://robnapier.net/blog/aes-commoncrypto-564)和 Mike Ash 的[星期五问答 2012-08-10：CommonCrypto 之旅](http://www.mikeash.com/pyblog/friday-qa-2012-08-10-a-tour-of-commoncrypto.html)。您需要为 CFB-8 更改的一项是将调用替换为调用`CCryptorCreate`，`CCCryptorCreateWithMode`传递`kCCModeCFB8`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T17:24:51.380

我目前正在为医疗单位制定安全协议。我绝对相信 openssl 是加密数据的最佳方法。尽可能使用本机文件系统来卸载工作并减少开发时间，而不会引入错误代码。话虽如此，我对objective-c还是很陌生。

1.  使用你的 Objective-C 程序来构建命令行。
2.  使用您的objective-c 程序将该命令行传递给shell。
3.  让外壳处理您的加密。
4.  从 shell 接收 openssl 结果并处理结果以确定是否发生任何错误。@"" 表示没有错误。

祝你好运。抱歉，我无法提供任何详细的 Objective-C 代码，我这周刚开始使用 Objective-C，并且熟悉使用其他语言编写所有代码库。但是每种语言都有一个 shell 接口，毫无疑问，这是你最好的选择。

# ruby-on-rails - Rails：如果它存在于数组中，则显示相应的记录

> ID：15284388
> 
> 赞同：0
> 
> 时间：2013-03-08T00:09:02.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个客户模型，可以为每个客户分配一个可选的永久编号。
这些数字在整个客户模型中都是唯一的。

我想创建一个列出数字的表格，以及客户姓名（如果他们已分配给相应的号码）。像这样：

假设约翰有#2，简有#4

```
# | Name
--------
1 | 
2 | John
3 | 
4 | Jane
5 | 
```

我的控制器有这个：

```
@customers_with_numbers = Customer.where("permanent_num IS NOT NULL") 
```

我的观点会是这样的：

```
<table>
  <tr>
    <th>#</th>
    <th>Name</th>
  </tr>
  <% (1..15).each do |i| %>
  <tr>
    <td><%= i %></td>
    <td><% somehow show the appropriate name here %></td>
  </tr>
  <% end %>
</table> 
```

我不知道应该如何显示适当的名称。

随意编辑问题标题，我不知道如何措辞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:12:55.263

尝试

```
<td><% @customers_with_numbers.detect { |c| c.permanent_num == i }.try(:name) %></td> 
```

# ruby-on-rails - Rails - 每个 ID 的表或所有内容都是一个表？

> ID：15284389
> 
> 赞同：0
> 
> 时间：2013-03-08T00:09:02.007
> 
> 标签：ruby-on-rails, database-design, model

我对 Rails 很陌生-一般来说是 Web 开发，我不确定如何实现以下内容

> 我有一个很大的书籍清单，每本书都有一个特定的 book_ID，对于每个 book_ID，我都有该书的 x 个副本，每个副本都有它们独有的详细信息。

我在想的是我应该有一个主表，其中包含该特定书籍的详细信息，并且从这个主表中，我将为每个特定的 book_ID 引用一个表。

例子

> 书——《10只苹果的蜜蜂》、《20只有趣的蜜蜂》……
> 
> 10 - book 1, book 2, book 3, .... #book x 指的是 book_id 为 10 的特定书。

这听起来像是正确的方法吗？如果是这样，我如何在 Rails 中完成此操作？如何自动创建任意数量的使用 book_ID 作为表名的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:20:29.147

我正在翻译`book_id`可以重命名为`reference number`. 在一个非常基本的层面上，我会做

使用脚手架创建 Book 类（以及控制器和视图）

`rails generate scaffold Book name:string title:string reference_no:integer`

您现在可以添加您的书籍，例如第一本、标题为“Apple's bees”且参考编号为 10 的新书。

然后创建另一个名为 Copy 的单独类，您可以使用`has_many`与 Books 的关系

```
class Copy
  belongs_to :books
end 
```

在您的 Book 课程中：

```
class Book
  has_many :copies
end 
```

就这在数据库中的外观而言，您将有两个表：书籍和副本。

副本表中的每条记录都会有一个`reference`它所属的书。

# jquery - 如何使用 jquery 在将返回 xml 的 url 上发出获取请求？

> ID：15284391
> 
> 赞同：-2
> 
> 时间：2013-03-08T00:09:11.390
> 
> 标签：jquery, xmlhttprequest, same-origin-policy

我正在尝试访问商店的 api 并取回 xml 响应，目前我正在使用 xmlhttprequest

```
function GetInfo()
{
    var xmlHttp = null;

    xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", "http://partner.tcgplayer.com/x2/phl.asmx/p?pk=TCGTEST&s=New Phyrexia&p=Flameborn Viron", false );
    xmlHttp.send( null );
    alert(xmlHttp.responseText);

} 
```

（这里的jsfiddle：http: [//jsfiddle.net/YXRdu/](http://jsfiddle.net/YXRdu/)）

但我没有任何成功。我觉得这可能是由于相同的来源访问策略，但我真的不确定如何解决它。我用谷歌搜索了这个问题，但我不确定如何在我无权访问的远程服务器上实现 cors。我知道该 url 是有效的，当我在浏览器中输入它时，我会返回一个 xml 数据。

我真的不确定我做错了什么，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:15:50.057

检查服务器是否允许跨域工作的 JSONP。如果没有，您必须在服务器端（您自己的服务器）获取 XML，然后您可以通过 AJAX 将其发送到 Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:24:11.563

```
function GetInfo()
{
    var test = $('#cardname').val();

   var jqxhr = $.get('http://partner.tcgplayer.com/x2/phl.asmx/p?pk=TCGTEST&s=New%20Phyrexia&p=Flameborn%20Viron', function(data) {
alert(data);

}).done(function() { alert("second success"); })
.fail(function() { alert("error"); })
.always(function() { alert("finished"); });
}

GetInfo(); 
```

存在跨域问题：

> XMLHttpRequest 无法加载 [http://partner.tcgplayer.com/x2/phl.asmx/p?pk=TCGTEST&s=New%20Phyrexia&p=Flameborn%20Viron](http://partner.tcgplayer.com/x2/phl.asmx/p?pk=TCGTEST&s=New%20Phyrexia&p=Flameborn%20Viron)。Access-Control-Allow-Origin 不允许来源[http://fiddle.jshell.net 。](http://fiddle.jshell.net)

您应该尝试服务器端方法。

# javascript - 创建自定义连接

> ID：15284392
> 
> 赞同：-1
> 
> 时间：2013-03-08T00:09:22.123
> 
> 标签：javascript, cordova, connection, mxgraph

我想在两个节点之间创建一个特定的连接。该连接将具有图像。这可能吗？

我使用 mxGraph，javascript。

[http://upload.wikimedia.org/wikipedia/commons/0/08/Simple_stock_and_flow_diagram.gif](http://upload.wikimedia.org/wikipedia/commons/0/08/Simple_stock_and_flow_diagram.gif)

对不起我的英语不好。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:12:22.573

您需要（我在这里查看 v2 API）创建自己的边缘形状，很可能基于 mxConnector（在形状文件夹中）。paintEdgeShape 定义了边缘的渲染，您使用画布 API 来定义该绘图（请参阅 mxAbstractCanvas2D 的 API 规范）。

# php - 从 PHP5.4.x 开始的会话问题

> ID：15284408
> 
> 赞同：3
> 
> 时间：2013-03-08T00:11:00.947
> 
> 标签：php, session, rackspace, symphony-cms

我遇到了一个奇怪的 Sessions 错误，不幸的是我无法在本地重现。[在我的日志文件中，我在查看引用此文件](https://github.com/symphonycms/symphony-2/blob/master/symphony/lib/core/class.session.php)的页面时随机收到以下错误

```
session_start(): user session functions not defined on line 84 of file /var/www/vhosts/example.com/symphony/lib/core/class.session.php 
```

据我所知，这个 Session 处理程序看起来相当标准，所以我很困惑为什么这是一个错误？

`PHP 5.4.6-1ubuntu1.1 (cli) (built: Nov 15 2012 01:18:34)`实时环境托管在 Rackspace 上，是运行 PHP 5.4.6 ( )的负载均衡器后面的两台服务器。据我所知，我们有两台数据库服务器，其中一台配置为写入，另一台配置为读取（通过 Rackspace）。

我的本地环境要简单得多，只有一个数据库的 PHP 5.4.10，所以虽然我认为环境可能正在发挥作用，但我对如何解决这个问题非常感兴趣，首先是客户，但也是个人，所以会话类可以变得更加健壮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:37:31.040

Brendo，您在评论时收到的错误`ini_set('session.save_handler', 'user')`很可能是因为您没有安装 PHP memcache 模块。如果 Rackspace 将您的服务器配置为将会话保存到 memcache 服务器，您可能需要通过修改 php.ini 文件或 memcache.ini 文件来启用 PHP memcached 模块，`session.save_handler = memcached`而不是`session.save_handler = memcache`.

如果上述方法不起作用，您可以通过运行检查是否安装了任一 PHP 模块，`dpkg -l | grep memcache`以查看是否返回了任一 PHP 模块。

# java - 使用列表打开 AlertDialog 时出错

> ID：15284409
> 
> 赞同：0
> 
> 时间：2013-03-08T00:11:02.530
> 
> 标签：java, android, android-alertdialog

我需要一些帮助才能`AlertDialog`从我的应用程序中运行。当有一些错误时它不会编译。尤其是在`alertDialog.setItems(items, new DialogInterface.OnClickListener()`与`setItems()`.

请看一下。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_nastavenie_casu);
    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);

    final CharSequence[] items = {"30 minút", "45 minút", "60 minút", "75 minút", "90 minút"};

    Button tlacidlo = (Button) findViewById(R.id.spusti);
    EditText pripomienka = (EditText) findViewById(R.id.upozornit_za);

    pripomienka.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Intent myIntent = new Intent(view.getContext(), agones.class);
            // startActivityForResult(myIntent, 0);

            AlertDialog alertDialog = new AlertDialog.Builder(NastavenieCasu.this).create(); //Read Update
            alertDialog.setTitle("hi");
            alertDialog.setItems(items, new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // do something
                }

                alertDialog.show();  
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:13:35.603

[`setItems()`](https://developer.android.com/reference/android/app/AlertDialog.Builder.html#setItems%28java.lang.CharSequence%5b%5d,%20android.content.DialogInterface.OnClickListener%29)是 AlertDialog.Builder 类的一部分，而不是 AlertDialog。尝试：

```
AlertDialog.Builder builder = new AlertDialog.Builder(NastavenieCasu.this); 
builder.setTitle("hi");
builder.setItems(items, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        // 
        // do something
    }

AlertDialog alertDialog = builder.create();
alertDialog.show(); 
```

# java - 如何为我的程序创建基于 Web 的客户端

> ID：15284410
> 
> 赞同：-2
> 
> 时间：2013-03-08T00:11:04.943
> 
> 标签：java, php, html, vb.net

我需要一些关于如何/从哪里开始的帮助...我有一个用 vb.net 编写的程序（我打算将其转换为 Java），没什么特别的，它基本上执行许多 bat 文件，打开特定文件夹，主要是命令行任务。

我希望能够从网络浏览器控制这个程序，从一个简单地用可点击按钮模仿我的程序的 gui 的网页，所以当我点击浏览器上的一个按钮时，它会执行命令，就像我坐在前面一样使用我的程序的 PC。

到目前为止我收集到的是我需要使用网络服务器。我正在考虑使用 Java Socket 和 ServerSocket 创建自己的……这会是要走的路吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:13:36.387

我建议您将应用程序功能公开为一组 HTTP 服务，然后您可以为该应用程序创建一个 Web 客户端（或未来的移动客户端）。如果您需要双向通信。您可以使用网络套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:24:28.063

创建您自己的网络服务器将是很多工作。为什么不使用像 Glassfish、Apache Tomcat 或 Jetty 这样的开源 Java 服务器。

我建议查看 JAX-RS 之类的东西来创建 RESTful Web 服务。这是一个[很好的教程](http://www.vogella.com/articles/REST/article.html)，它将引导您完成从头开始启动和运行基本 REST 服务的所有步骤。

# jquery - 调试 jQuery ajax 500 内部服务器错误

> ID：15284413
> 
> 赞同：11
> 
> 时间：2013-03-08T00:11:19.423
> 
> 标签：jquery, ajax

我的工作 CodeIgniter 站点在 MediaTemple 上托管时出现 500 内部服务器错误。它发生在 jQuery Ajax 调用期间。

我不知道出了什么问题。是控制器的错误还是模型的错误？我的阿贾克斯电话：

```
$.ajax({
    url: "<?php echo site_url('invites/save_email') ?>",
    type: 'POST',
    data: form_data,
    success: function(msg) {
    window.location.href = "<?php echo site_url('invites/moreinvites')?>"
        return true;
    },
    error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
        alert(xhr.responseText);
    }
}); 
```

xhr.responseText 已返回给我`<p>The action you have requested is not allowed.</p>`。但是，这是什么意思？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-08T00:19:58.663

您可以尝试在错误回调中使用`alert(xhr.responseText);`或`console.log(xhr.responseText);`（后者将显示在您的浏览器控制台中，例如firebug），这样做您可以获得与异常相关的消息（如果有）。

```
error: function (xhr, ajaxOptions, thrownError) {
           alert(xhr.status);
           alert(xhr.responseText);
           alert(thrownError);
       } 
```

或者

```
error: function (xhr, ajaxOptions, thrownError) {
           console.log(xhr.status);
           console.log(xhr.responseText);
           console.log(thrownError);
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T18:24:01.180

请[在此处](https://stackoverflow.com/a/21786593/14533)查看我的回复。它是关于如何使用 CodeIgniter 和 jQuery 进行 ajax 调试的完整说明。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-07T14:08:02.420

您需要配置 webconfig 文件以接收 POST 请求。

```
 <system.web>

    <webServices>
      <protocols>
        <add name="HttpPost" />
      </protocols>
    </webServices>
 </system.web> 
```

# code-signing - 导入pfx时无法导入以下密钥文件错误

> ID：15284421
> 
> 赞同：27
> 
> 时间：2013-03-08T00:12:12.770
> 
> 标签：code-signing, pfx

我在 stackoverflow 上彻底研究了这个问题，我看到了很多答案，但没有一个对我们有用。我们最近从 comodo 购买了一个代码签名证书，我们将用它来签署我们的 c# WPF .net4 应用程序。
我们已按照[以下 URL上的说明进行操作](https://support.comodo.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=1078)

然后在“项目属性->唱歌->签署程序集”下将证书导入Visual Studio。然后我们尝试构建项目并得到以下错误：

无法导入以下密钥文件：comodo.pfx。密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书，手动将证书安装到具有以下密钥容器名称的强名称 CSP：VS_KEY_xxxxxxxxxxxxxxx。

我们在互联网上找到了许多解决方案，并尝试了以下方法：

*   单击更改密码并在所有 3 个位置使用相同的密码
*   sn -i [comodo].pfx VS_KEY_xxxxxxxxxxxxx
*   尝试将其转换为无密码 snk 文件并使用它而不是 .pfx
*   尝试以管理员身份运行 Visual Studio 并导入密钥
*   尝试创建非常简单的准系统项目并与之签名
*   尝试了 Visual Studio 2010 和 2012
*   我们尝试将以下内容添加到程序集中 [程序集：AssemblyKeyFile("path to key file")]
*   在 postbuild "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\signtool.exe" 中添加了事件 sign /f "$(ProjectDir)[keyfile].pfx" /p [thepassword] /v "$(ProjectDir)obj\Release\$(TargetFileName)"
*   在 .csproj 文件的一个部分中添加：

*   下载[http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)并点击错误的“应用修复”

到目前为止，我们还没有成功。我们可以使用密码很好地导入密钥，这样我们就知道密码是正确的。我们也知道这对于在 clickonce 发布中签署清单非常有效。只是为了确保我们没有任何其他问题，我们关闭了 cilckonce 签名，只是试图签署程序集。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-11-26T15:23:28.273

您可以简单地打开“ **`Project`> `Property`>`Signing`** ”并取消选中“签署 ClickOnce 清单”复选框。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-08T15:33:26.770

我了解到 Visual Studio 似乎不能很好地处理从属证书。
我在多台机器（不同的 OS/VS 组合）上尝试了几个证书，结果相同。
我终于发现这是一种解决方法：

*   签署程序集

    `signtool sign /f "[path to pfx]" /p [password] /v "[path to assembly]"`

*   使用 mageUI 构建您的安装程序（请参阅“[手动部署 ClickOnce 应用程序](http://msdn.microsoft.com/en-us/library/xc3tc5xx.aspx)”）

Visual Studio 的问题似乎是它不喜欢证书链接。这可以通过在没有链接的情况下导入/导出证书来解决。下一个问题通过[使用 certutil 和 export 与 AT_SIGNATURE](http://blogs.msdn.com/b/andrekl/archive/2008/01/08/strong-name-signing-in-visual-studio-2005-requires-keyspec-2-at-signature.aspx "这里")来解决。我能够将它导入 VS 并构建，但它似乎没有签署程序集。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-06-19T16:00:56.613

我得到了类似的错误。通过从 Windows 资源管理器的上下文菜单中选择**安装 PFX解决了这个问题。**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-24T09:57:14.767

另一个“为我工作”...

在 Windows 资源管理器中右键单击 PFX，选择“安装 PFX”并在向导中提供密码。然后在VS的项目属性中，在“签名”下选择“更改密码”并重新输入密码。在此之前，只有以管理员身份运行 VS 才能工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-12T17:53:05.103

我能想到的最佳解决方案是转到项目->属性->选择一个强名称密钥文件下拉列表并选择“新建”->创建密钥，然后转到顶部的证书部分->单击从文件中选择并选择您创建的新密钥 --> 构建解决方案 --> 发布。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-31T15:25:20.013

For me following worked, First Install certificate by double clicking on it. then,

Project Properties -> Signing -> If 'Sign the ClickOnce manifests' is checked -> click on 'Select from file' and select .pfx file and it should show all the certificate valid details like Issued to, Issued By, Intended Purpose etc.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-07T12:54:34.617

我遇到过同样的问题。我正在许多计算机上从拇指驱动器构建应用程序，并相信这就是原因。

我发现使用“sn -i [comodo].pfx VS_KEY_xxxxxxxxxxxxx”方法取得了成功。我做了以下步骤：

1.  以管理员身份运行“开发人员命令提示符”（在开始->所有程序->Visual Studio->工具中找到）
2.  导航到您的密钥目录（对我来说，这是我的项目目录的根目录，而不是解决方案目录）
3.  执行“sn -i mykey.pfx VS_KEY_xxxxxxxxxxxxx”（mykey.pfx和VS_KEY_xxxxxxxxxxxxx都在build错误信息中）
4.  如果需要，请输入密码

当我在没有以管理员身份运行“开发人员命令提示符”的情况下尝试此操作时，在运行“sn -i mykey.pfx VS_KEY_xxxxxxxxxxxxx”时得到帮助显示文本，但它不起作用。诀窍是确保我以管理员身份运行开发提示。

对于上下文，我使用的是 VS Community 2013.5、Window 7 x64 Professional 和 NET Framework 4.7

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-26T04:13:39.063

1.  导航到项目属性 --> 签名
2.  请从下拉列表中选择相应的 *.pfx 文件。
3.  输入用于代码签名的先前密码。（密码：询问已签署程序集并创建自签名证书和代码签名的人）
4.  （可选）它会自动将您的证书添加为受信任的。可以使用管理控制台窗口查看（运行 MMC 命令并添加证书添加快照以查看证书）

[![在此处输入图像描述](../Images/58316abea398441fca5a780c73fcfa9a.png)](https://i.stack.imgur.com/eHq0f.png)

# ruby-on-rails - Rails 在 fields_for 中构建 fields_for 一次

> ID：15284422
> 
> 赞同：2
> 
> 时间：2013-03-08T00:12:17.263
> 
> 标签：ruby-on-rails, nested-forms, fields-for

在我的

```
<%= nested_form_for @object do |f| %> 
```

我有一个像这样的nested_form：

```
<%=f.fields_for :nested, :url => { :action => "new" } do |build| %>
   <%= render 'nested_fields', :f => build %>
<% end %> 
```

在那个nested_field 里面，我有另一个fields_for :nested2

我的问题是：我希望 nested2 在调用 nested 时出现 1 次。我在嵌套控制器的新操作中尝试了

```
@nested = Nested.new
@nested.nested2.build 
```

但这仅适用于“真正的”新动作。有没有解决这个问题的方法？

我正在使用“nested_form”gem。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:28:27.483

`fields_for`允许您指定要为其呈现字段的特定对象，因此如果您希望您的`nested_fields`部分包含单个新构建`nested2`模型的嵌套字段，您可以在`fields_for`调用本身中执行此操作，如下所示：

```
# '_nested_fields.html.erb'

...
<%= f.fields_for :nested2, f.object.build_nested2 do |build| %>
  <%= ... %>
<% end %> 
```

这是假设`Nested` `has_one :nested2`，如果它是一个`has_many`关联，则`fields_for`参数会略有不同：

```
<%= f.fields_for :nested2s, f.object.nested2s.build do |build| %> 
```

`f.object`允许您访问表单构建器的对象，然后您可以使用它的关联方法（基于关联类型）在该点构建新对象。

# iphone - iOS 通知覆盖静音模式 - iPhone 闹钟应用

> ID：15284431
> 
> 赞同：3
> 
> 时间：2013-03-08T00:13:19.637
> 
> 标签：iphone, ios, push-notification, alarm

我正在开发一个闹钟应用程序

通过通知中心的警报+音乐频道

如果 iPhone 设置为静音模式，它不会激活

许多用户要求警报覆盖静音模式

这可能吗？

干杯!

```
(void)addLocalNotification:(myAlarmData *)ma WeekDay:(int)mweekday
{
    UILocalNotification *noti = [[UILocalNotification alloc] init];

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    NSDate *now = [NSDate date];

    NSDateComponents *dcom = [gregorian components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit |NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit | NSWeekdayCalendarUnit) fromDate:now];

    [dcom setWeekday:mweekday];
    [dcom setHour:ma.mHour];
    [dcom setMinute:ma.mMinute];
    [dcom setSecond:0];

    NSDate *fireDate = [gregorian dateFromComponents:dcom];

    noti.fireDate = fireDate;
    noti.timeZone = [NSTimeZone localTimeZone];
    noti.alertBody = [NSString stringWithFormat:@"Wake up %@!", [GlobalData gSettings].name];
    noti.soundName = [NSString stringWithFormat:@"%@.caf", ma.soundName];
    noti.alertAction = @"OK";

    noti.repeatInterval = NSWeekCalendarUnit;

    noti.userInfo = [[[NSDictionary alloc] initWithObjectsAndKeys:
                      ma.mid, @"mid",
                      [NSString stringWithFormat:@"%d", mweekday], @"day",
                      ma.soundName, @"sound",
                     [NSString stringWithFormat:@"%d", ma.snooze], @"snooze",
                      ma.title, @"title",
                      @"Close", @"action",
                      @"real", @"more",
                      nil] autorelease];

    [[UIApplication sharedApplication] scheduleLocalNotification:noti];

    [noti release];
    [gregorian release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:39:11.203

我们可以覆盖静音开关来播放声音。

在这种情况下，这取决于 iOS 在触发通知时如何播放声音。

你在设备上检查过这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:18:29.627

你应该看看[AudioSession 类别](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html)。

AVAudioSessionCategoryPlayback 应该可以解决问题。

# css - CSS：在 IE7-8 中使用 rgba 的边框颜色

> ID：15284435
> 
> 赞同：1
> 
> 时间：2013-03-08T00:13:41.850
> 
> 标签：css, internet-explorer, internet-explorer-8, internet-explorer-7

我能找到的大部分资源都与渐变有关。这与渐变无关。

有没有人发现一种方法可以`rgba`在`border-color`IE7 和/或 IE8 的属性中使用？

例子：

```
p {
    background-color: #D00;
    border: 1px solid rgba(0,0,0,.75);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:36:58.407

如果您可以完全控制要应用它的 HTML，则可以使用具有第二种背景颜色（充当边框）的包装器来实现

```
<style type="text/css">
.p-wrapper {
    background-color: rgba(0,0,0,.5);
    padding: 1px;
}
.p-wrapper p {
    background-color: #D00;
}
</style>
<!--[if IE]>
<style type="text/css">
.p-wrapper {
    background: transparent;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F000000,endColorstr=#7F000000);
    zoom: 1;
}
</style>
<![endif]--> 
```

然后作为 HTML：

```
<div class="p-wrapper">
    <p>Hello World</p>
</div> 
```

虽然如果这真的只是 1px，我会按照 Cristy 的建议做，只指定一个 RGB 后备

# ruby-on-rails-3 - 在设计的 :authenticate_user 之后添加过滤器？

> ID：15284437
> 
> 赞同：2
> 
> 时间：2013-03-08T00:14:34.507
> 
> 标签：ruby-on-rails-3, devise, namespaces

我想在`:authenticate_user!`.

目前，我的基本命名空间控制器中有一个典型设置：

```
module Admin
  class AdminController < ApplicationController
    before_filter :authenticate_user!
  end
end 
```

但是对此的任何变化都不起作用：重定向不会发生，因此用户仍然可以在不应该访问的情况下获得访问权限。

```
# Doesn't work
before_filter :admin_only
def admin_only
  :authenticate_user!
end

# Doesn't work
before_filter do
  :authenticate_user!
end

# Doesn't work
before_filter [:authenticate_user!] 
```

如果这些变体中的任何一个可行，我可以添加我的额外过滤代码。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:16:50.710

只需在过滤方法之前附加您的额外内容

```
before_filter :authenticate_user!, :my_extra_before_filter_method 
```

`authenticate_user!`将首先执行，然后是您的自定义过滤器

更新：你也可以打电话`before_filter`两次

```
before_filter :authenticate_user!
before_filter :my_extra_before_filter_method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:20:17.307

[This answer](https://stackoverflow.com/a/7747912/1157) to [a similar question](https://stackoverflow.com/questions/6425231/i-want-to-override-authenticate-user-and-current-user-method-of-devise-gem)说明了以下内容：

> *Devise 在后台使用 Warden* [https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb)
> 
> *因此，您可以在 Warden 中添加一个新策略来验证您的用户。见* [https://github.com/hassox/warden/wiki/Strategies](https://github.com/hassox/warden/wiki/Strategies)

**是否要添加第二个过滤器？或者也许只是覆盖？**

# c# - 控件应该在 ViewModel 中吗？

> ID：15284438
> 
> 赞同：3
> 
> 时间：2013-03-08T00:14:41.887
> 
> 标签：c#, windows-phone-7, mvvm, mvvm-light

我正在尝试学习 MVVM 并在我的手机应用程序中使用 MVVM 灯，但我对如何访问某些信息有点困惑。

我试图尽可能不使用事件背后的代码，因为这似乎不是真正的 MVVM 方式，但我遇到了一个我不知道该怎么做的问题。

我正在使用 Google 身份验证，并在每次浏览器加载后检查 Naviagted 事件。

```
public ICommand BrowserNavigated
{
   get
   {
      return new RelayCommand<NavigationEventArgs>(e =>
      {
         var d = e;
         var a = d;
      });
   }
} 
```

但是我还需要实际的对象控件（我想访问该页面吐出的 html），但我不知道如何获取它。

```
 private void wbGoogle_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {
        var d = e;
        var d2 = d;
    } 
```

在上面的代码中，我可以将“发件人”转换为 Web 浏览器对象，但我以 MVVM 方式执行此操作，我不知道如何访问它。

我的 ViewModel 中是否应该为 WebBrowser 提供其他属性或其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:32:24.830

在 MVVM 中，允许使用代码隐藏，但可能首选绑定。但是，不允许有 GUI 控件/事件（硬耦合）。

可能有一些方法可以避免代码落后，但是如果您必须处理事件，从事件中获取数据并在后面的代码中设置 ViewModel 的属性，那么这比添加 UI 代码更好。到您的 ViewModel，这显然不符合 MVVM。

也许您可以创建某种 EventTrigger 来设置 Web 浏览器的属性，您可以通过数据绑定来创建可以在 XAML 中设置的可重用触发器？（可能有很多方法可以巧妙地避免代码落后并创建可重用的代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:45:39.057

您的 ViewModel 应该完全不知道 View 或特定控件。是否保持你观点背后的代码清晰，是一个宗教问题。

If you want to keep it clean, which I recommend whenever possible, there are a number of concepts, which allow you to do so.

First, you need to design your View/ViewModel relationship in a way, that all data relevant for the ViewModel is present 'at all times' in the ViewModel or can be passed to the ViewModel via `CommandParameter` of a `ICommand`. In your case, if the page of the Webbrowser is controlled by (i.e. might be set from) the ViewModel, the ViewModel should hold a property, which is bound to the `Source` property of the browser. If the ViewModel just needs to 'know' the Uri when the `BrowserNavigated` is executed, just pass it as a `CommandParameter`.

`Navigated`其次，对于您的特定情况，您希望在引发 WebBrowser 事件时在 ViewModel 上执行命令。与往常一样，有多种选择。我更喜欢框架附带的选项：`EventTrigger`in`System.Windows.Interactivity`允许您通过绑定将任何控件的任何事件传递给命令。

这样，可以从 ViewModel 设置 Uri：

```
<WebBrowser Source="{Binding BrowserPageUri}" Name="wbGoogle">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Navigated" >
            <i:InvokeCommandAction Command="{Binding BrowserNavigated}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</WebBrowser> 
```

这样，您可以将 Uri 作为命令的参数处理：

```
<WebBrowser Name="wbGoogle">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Navigated" >
                <i:InvokeCommandAction Command="{Binding BrowserNavigated}" 
                                       CommandParameter="{Binding Source, ElementName=wbGoogle}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </WebBrowser> 
```

当然，这只允许您在 WebBrowser 中访问页面的 Uri，而不是页面本身。如果您需要绑定到页面对象本身，则需要使用附加属性扩展 WebBrowser，以使该`Document`属性可绑定。这很简单：

[WebBrowser 的附加文档属性](http://www.michelvandervlugt.net/PermaLink,guid,a31d5ba1-cf6a-46c7-a4ff-7cecd7308fcc.aspx)

将此属性附加到您的 WebBrowser 后，您可以像在上面的代码中一样定义 WebBrowser 的绑定，只是使用附加的属性，而不是`Source`属性。

请注意，绑定到附加属性的语法是：

```
{Binding Path=(WebBrowserExtentions.Document)} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T22:15:08.980

MVVM 非常适合数据绑定，并且通过使用 MVVMLight 等工具包，也可以巧妙地处理处理用户交互的事件。

然而，有时，控件喜欢`WebBrowserControl`或`ApplicationBar`对此提出挑战。它们可能很难或不可能与事件触发器绑定，或者具有复杂的行为。在这些情况下，如果您在后面的 View 代码中处理从控件获取信息的过程并将简单的消息向下发送到 VM，则会更简单。

当然，您可以创建一个更新属性的事件，编写一个附加属性，或者使用 3rd 方库；并且有些案例需要这种方法。

在您的示例中，我个人*将*使用代码隐藏来处理`Navigated`事件并发送一条消息（或您的虚拟机上的方法调用），其中包含虚拟机想要的所有内容。

例如：

```
private void wbGoogle_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
    var vm = (TypeOfMyViewModel) this.DataContext;
    //... read your HTML, get URL etc ...
    vm.WebBrowserNavigatedTo(url, html, loadTime);
} 
```

同样，如果从您的 VM 引发的事件会导致您的视图中发生许多事情，那么将消息或事件发送到您的视图并让视图更新代码中的控件会更简单。

关键是保持 MVVM 的角色不同，例如避免 ViewModel 对 View 的直接依赖。接口可以在这里提供帮助，以及 MVVMLight 及其替代品附带的消息传递。

# vba - 通过 powershell 在工作簿中的多个工作表上运行宏

> ID：15284440
> 
> 赞同：0
> 
> 时间：2013-03-08T00:14:55.453
> 
> 标签：vba, powershell, excel

我正在使用以下 Powershell 脚本在工作簿中的工作表上运行一些宏。我想要做的是打开一个工作簿，在特定工作表上运行某个宏，然后将工作簿保存到不同的位置。出于测试目的，我只是在所有工作表上运行它。

这是我到目前为止所拥有的：

```
$excel = New-Object -ComObject excel.application
$xlfileformat = [Microsoft.Office.Interop.Excel.XlFileFormat]::xlOpenXMLWorkbook
$workbook = $excel.Workbooks.Open($(join-path -path R:\TestOutput\Nick -childpath tmp.xlsm))
$worksheets = $Workbook.Worksheets | ForEach-Object {$_.name}
ForEach ($Worksheet in $Worksheets) {
    $WS = $Workbook.Worksheets.Item($Worksheet)
    $excel.Run("RunMacro")
    $workbook.save()
} #End ForEach
$workbook.saveas($(join-path -path "R:\TestOutput\Nick" -childpath "Test_Output-post"), $xlfileformat)
$excel.quit() 
```

使用此脚本，我希望宏可以在工作簿中的所有工作表上运行，但是，只有最后一个工作表应用了宏。起初我没有`$workbook.save()`那里。我添加它是因为我虽然每次加载新工作表时都会重新初始化工作簿，因此会丢失上次运行的更改。但这并没有解决问题。

我知道我可以修改 VBA 脚本本身，但我想最终将它变成一个函数，其中宏和工作表作为变量输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:14:55.453

当我打字时，我找到了答案。问题是，我从未激活过我选择的工作表。下面的代码解决了这个问题：

```
$excel = New-Object -ComObject excel.application
$excel.DisplayAlerts = $false
$xlfileformat = [Microsoft.Office.Interop.Excel.XlFileFormat]::xlOpenXMLWorkbook
$workbook = $excel.Workbooks.Open($(join-path -path R:\TestOutput\Nick -childpath tmp.xlsm))
$worksheets = $Workbook.Worksheets | ForEach-Object {$_.name}
ForEach ($Worksheet in $Worksheets) {
    $WS = $Workbook.Worksheets.Item($Worksheet)
    $WS.Activate()
    $excel.Run("RunMacro")
} #End ForEach
$workbook.saveas($(join-path -path "R:\TestOutput\Nick" -childpath "Test_Output-post"), $xlfileformat)
$excel.quit() 
```

修复是`$WS.Activate()`在循环中添加命令。

# android - 时间不能运行早午餐？

> ID：15284445
> 
> 赞同：0
> 
> 时间：2013-03-08T00:15:48.310
> 
> 标签：android, linux, bash, sh

我的`time`命令有问题。我使用`/usr/bin/time`所以我可以使用`-f`and`-o`修饰符。

我的脚本是：

```
make clean
repo sync -j5
. ./platform_manifest/manual_add_kernel_manifest.sh \
  && . build/envsetup.sh \
  && /usr/bin/time -o log$day$month.log -f "Buildtime: %E" brunch aokp_mako-eng 
```

该脚本是 android ROM 自动构建系统的一部分。

当它到达时间部分时，我得到：

```
/usr/bin/time: cannot run brunch: No such file or directory
Command exited with non-zero status 127
Buildtime: 0:00.00 
```

早午餐可以正常使用常规`time`命令，但我无法将其输出路由到文件，这就是我`/usr/bin/time`首先使用的原因。如果有办法做到这一点，那对我来说很好，因为我可以`real:`用`| awk '{ print $2 }'`.

任何帮助表示赞赏！

Ubuntu 12.04，已安装所有更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:38:49.477

我不知道是什么，但即使是内置的*can ，**非*内置程序也找不到它`brunch`的最可能原因是它是 shell 函数或 Bash 别名。*`time``time`*

 **不管是不是这样。. .

> [...] 我无法将 [常规`time`命令的] 输出路由到文件 [...]

你可以写：

```
{ time brunch aokp_mako-eng ; } 2>"log$day$month.log" 
```

将（以及其他所有内容）包装`time`到其 STDERR 已被重定向到文件的命令列表中。**

# html - 如何让一个 div 填充另一个 div 的 100% 高度

> ID：15284448
> 
> 赞同：0
> 
> 时间：2013-03-08T00:16:01.793
> 
> 标签：html, css

[http://jsfiddle.net/eDYDD/](http://jsfiddle.net/eDYDD/)

上面看到的是一个 jsfiddle，主要解释了我想要做什么。我似乎无法`#main_info`填充 100% 的高度`#main`，所以边框将填充 100% 的 div，你知道，看起来不错。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:21:32.003

在 CSS 中，除非父级具有固定高度，否则您不能让子级填充 100% 的高度，而不需要一些技巧。

1.  您可以使用 display table 使元素表现得像表格，确保子元素填写父元素。
2.  您可以使用背景图像，使您的案例中的border-right 由父元素直观地管理。
3.  您可以使用 JavaScript 来维护这两个元素的外观。

其中哪一项适用于您实际上取决于您的用例。由于此时您的头像信息只是右边框，因此创建视觉边框`#main_info`可能是最简单的方法。

使用基于表格的布局也可以很好地解决这个问题，但需要额外的标记来确保您拥有一个`table`元素、一个`row`元素和一个`cell`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:22:10.203

使用绝对定位。

```
#main {
    position: relative;
}
#main_info {
height: 100%;
    position: absolute;
} 
```

[http://jsfiddle.net/eDYDD/3/](http://jsfiddle.net/eDYDD/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:22:48.877

看看[使用跨浏览器 CSS 的等高列](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)：

> 使用 CSS 创建等高的列并不像最初看起来那么容易。本教程重点介绍了多列布局出现的显示问题，然后展示了一个适用于所有常见 Web 浏览器的简单解决方案。此处显示的方法 100% 无 CSS hack、无图像和无 JavaScript，因此它甚至可以在最严格编码的网站上使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T00:23:45.680

我修改了你的[jsfiddle](http://jsfiddle.net/eDYDD/4/)。其他答案错过了最简单的解决方案，即继承`min-height`父元素的属性：

```
#main_info {
    width: 20%;
    min-height: inherit;
    border-right: 1px solid #E4E4E4;
} 
```

# .net-3.5 - 如何使用 MSBuild 部署 ASP.NET 网站项目

> ID：15284451
> 
> 赞同：2
> 
> 时间：2013-03-08T00:16:16.607
> 
> 标签：.net-3.5, msbuild, asp.net-3.5

我正在尝试创建一个批处理文件来构建一个包含多个项目和一个 ASP.NET 网站项目的解决方案。输出应该是包含 ASP.NET 网站预编译结果的“构建”文件夹。

使用以下方法，正在编译所有项目，并为每个目录下的各个项目创建构建文件夹。对于网站，使用所有必需的 dll 和 .aspx 文件创建新文件夹“precompiled”。

但我需要将 ASP.NET 网站文件放在一个“构建”文件夹中，并且必须在单独的 BIN 文件夹中完成其余 C# 库的编译。

```
<Target Name="Build">
     <MakeDir Directories="$(OutputPath)" Condition="!Exists('$(OutputPath)')" />
     <MSBuild Projects="@(Solution)" Properties="OutputPath=\Build"/>
</Target>

<PropertyGroup>   
     <OutputPath>Build\</OutputPath>
</PropertyGroup> 
```

我读过编译网站项目，必须使用“aspnet_compiler”任务。但是它没有编译项目依赖，导致引用错误。在我单独编译项目后，它工作正常。

简而言之，它应该是用于 C# 项目的 MSBuild，而 asp.net 项目应该编译到单独的“build”文件夹中。任何见解表示赞赏。

# mysql - 返回 MySQL 中同一天的所有行

> ID：15284460
> 
> 赞同：0
> 
> 时间：2013-03-08T00:17:17.950
> 
> 标签：mysql, sql, database

我将日期作为字符串存储在数据库中，如下所示：

2013 年 3 月 8 日 --> 3 月 8 日

我试图只选择与当天同一天的行：

```
SELECT * FROM wp_aerezona_booking WHERE DATE_SUB(CURDATE(),INTERVAL 1
                                         DAY) <= STR_TO_DATE(date, '%m/%d/%Y') 
```

以上是我尝试过的，但它返回了很多结果，应该只返回 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:26:00.513

这应该已经工作了：

```
SELECT * FROM wp_aerezona_booking 
WHERE STR_TO_DATE('03/08/2013', '%m/%d/%Y') = CURDATE(); 
```

通过使用`DATE_SUB`您从当天减去 1 天。你看的不是今天，而是昨天。这也`<=`让你看着昨天和之前的所有日子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:20:44.667

那你不想要`<=`，但你想要`=`。`date`如果小于或等于昨天的日期，前者将获得所有结果。我不确定你是否想要`DATE_SUB`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:09:59.587

如果您想要与今天的日期相同的日期，那么您必须使用“=”运算符。

```
SELECT * 
FROM wp_aerezona_booking 
WHERE  STR_TO_DATE(date, '%m/%d/%Y')= CURDATE() 
```

# java - 如何使用按钮退出应用程序

> ID：15284461
> 
> 赞同：0
> 
> 时间：2013-03-08T00:17:21.377
> 
> 标签：java, android, activity-finish

我正在开发一个应用程序，在我的主菜单中我有 4 个按钮。问题是我的按钮之一（退出按钮），如果我点击它意图我以前的活动..请帮助我..我尝试使用完成（ ) 和 system.exit(0) 但它不起作用..帮助非常感谢！

```
public class MainMenu extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);

    Button btnaniking =(Button) findViewById(R.id.baniking);
    btnaniking.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(new Intent("myapp.animalkingdom.ANIKING") );
    }
});
    Button btnwhoami =(Button) findViewById(R.id.bwhoami);
    btnwhoami.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(new Intent("myapp.animalkingdom.WHOAMI") );
    }
});
    Button btncredits =(Button) findViewById(R.id.bcredits);
    btncredits.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(new Intent("myapp.animalkingdom.CREDITS") );
    }
});
    Button btnexit = (Button) findViewById(R.id.bexit);
    btnexit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
            System.exit(0);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:39:10.537

不要打破 Android 的范式。何时关闭应用程序不是由您决定的。让用户和操作系统来处理。

如果，无论出于何种原因，你真的必须这样做。你可以打电话`finish()`。这将关闭当前活动，如果活动是历史堆栈中唯一的活动，则最终导致应用程序关闭。

# php - 添加新的 XML 根节点

> ID：15284462
> 
> 赞同：1
> 
> 时间：2013-03-08T00:17:23.113
> 
> 标签：php, xml, dom, simplexml

我需要在以下 XML 中添加一个新的根节点

```
<?xml version="1.0"?>
<unit>
<source> 
<id>ANCH02</id> 
<uri>http://www.hamiltonisland.biz/tabid/339/Default.aspx</uri> 
</source>
</unit> 
```

成为

```
<?xml version="1.0"?>
        <units>
        <unit>
        <source> 
        <id>ANCH02</id> 
        <uri>http://www.hamiltonisland.biz/tabid/339/Default.aspx</uri> 
        </source>
        </unit>
        </units> 
```

我怎么能这样做？SimpleXMLElement 似乎没有这个功能。我还查看了这个 DomNode 示例[http://php.net/manual/en/domnode.insertbefore.php](http://php.net/manual/en/domnode.insertbefore.php)但它似乎无法添加新的根节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:28:17.130

这似乎有效

```
$units = $dom->createElement('units');
$units->appendChild($dom->documentElement);
$dom->appendChild($units); 
```

[**演示**](http://codepad.org/shgzWoxM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:24:14.123

DOM文档：

```
$yourDOMDOMDocument ... <--- already loaded XML
$doc = new DOMDocument();
$doc->appendChild($doc->createElement('Units'));
$doc->documentElement->appendChild($doc->importNode($yourDOMDocument->documentElement)); 
```

或者。如果您已经将 XML 作为 SimpleXMLElement ：

```
$yourSimpleXML ... <--- already loaded XML
$doc = new DOMDocument();
$doc->appendChild($doc->createElement('Units'));
$domnode = dom_import_simplexml($yourSimpleXML);
$doc->documentElement->appendChild($doc->importNode($domnode));
//if you want it back as SXE:
$newSimpleXMLElement = simplexml_import_dom($doc); 
```

# maven - maven3 主要资源 vs 测试资源

> ID：15284465
> 
> 赞同：2
> 
> 时间：2013-03-08T00:18:06.110
> 
> 标签：maven, maven-3

“src/main/resources”与“src/test/resources”

将“src/main/resources”复制到类路径以进行测试还是仅复制“src/test/resources”？使我的主要资源也成为我的测试资源的最佳方法是什么？希望避免有重复的配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:39:00.273

你的理解是正确的。执行时`mvn clean test`，所有java类、测试类、主资源和测试资源都会生成/复制到`${basedir}/target/classes` 和`${basedir}/target/test-classes`. 它们在类路径中可用。

通常`src/main/resources`是一个静态的，它将被打包到我们的工件中。无论如何，它们都是一些用例，允许参与者根据我们的工件定义他们的资源。在`src/test/resources`单元测试期间来确保这一点。

不仅如此，我们还可以在 上定义任何特定的单元测试`src/test/resources`，例如用于 javaee 单元测试的 arquillian 配置。

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T19:05:20.943

请注意，如果您`build/resources/*`的 pom 中有一部分手动包含内容，那么这可能意味着不再包含默认的 src/main/resources（即，通过指定某些内容，您已经失去了默认值）。

所以添加这个似乎也可以解决它：

```
 <resource>
    <directory>src/main/resources</directory>
  </resource> 
```

# symfony - Symfony2 简单的多对多问题

> ID：15284466
> 
> 赞同：0
> 
> 时间：2013-03-08T00:18:10.123
> 
> 标签：symfony, symfony-2.1, symfony-forms

我有一个简单的问题，我有两个与多对多相关的表，Post 和 Category，完整的 PostType 形式是 CategoryType 的集合，但是问题从这里开始......

我按照说明书收集表单上的说明来保存数据，我只是没有得到想要的结果。这是代码：

```
class Post
{
/**
 * 
 * @ORM\ManyToMany(targetEntity="Categories", inversedBy="posts", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="AnCat",
 *  joinColumns={
 *     @ORM\JoinColumn(name="post_id", referencedColumnName="id")
 *  },
 *  inverseJoinColumns={
 *     @ORM\JoinColumn(name="categories_id", referencedColumnName="id")
 *  }
 * )
 **/
protected $categories;

public function __construct()
{
    $this->categories = new \Doctrine\Common\Collections\ArrayCollection();
}

public function addCategory($categories)
{
    foreach ($categories as $category) {
        $category->addPosts($this);
    }
    $this->categories[] = $categories;
}

class Categories
{
/**
 * 
 * @ORM\ManyToMany(targetEntity="Post", mappedBy="categories")
 */
protected $posts;

public function __construct()
{
    $this->posts = new ArrayCollection();
}

/**
 *
 * @param Post $post
 * @return Categories
 */
public function addPosts(Post $posts)
{
   // I tried it but I get the same result!
   /*if (!$this->posts->contains($posts)) {
        $this->posts->add($posts);
    }*/

    $posts->addCategory($this);
    $this->posts[] = $posts;
}

class PostType extends AbstractType
{

->add('Categories', 'collection', array('type' => new CategoriesType(), 
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
                'prototype_name' => '__categ__',
                'by_reference' => false
            ))

class CategoriesType extends AbstractType
{
     ->add('category', 'entity', array(
            'attr' => array('class' => 'cat'),
            'class' => 'MyBusinessBundle:Categories',
            'property' => 'category',
            'label' => 'Categories'
        )) 
```

问题是插入一个新的字段Category，而不是创建一个简单的关系Post-Category。我不明白我错在哪里..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:09:42.987

在您的 postType 中，将集合类型更改为实体类型

```
 class PostType extends AbstractType
    {
    $builder->add('Categories', 'entity',
        array( 'label' => 'Categories',
            'required' => false,
            'expanded' => true,
            'class' => 'xxx\xxxBundle\Entity\Categories',
            'property' => 'title',
            'multiple' => true,
        )); 
```

在您的帖子创建表单中，您将拥有带有类别的复选框。如果您想要一个多选字段，请更改扩展为 false

# php - 将 JSON 对象中的所有字符更改为 ASCII

> ID：15284470
> 
> 赞同：-1
> 
> 时间：2013-03-08T00:18:29.300
> 
> 标签：php, json, special-characters

我正在寻找一种方法来遍历 json 对象并将所有字符切换为 HTML 安全字符，`htmlspecialchars()`例如使用该函数。

我想我可以循环并创建一个新的 json 对象并更改字符，但我认为必须有更优化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:34:24.773

按照建议，[`array_walk_recursive`](http://php.net/manual/en/function.array-walk-recursive.php)可能是最好的选择：

```
$array = json_decode($json, true);
array_walk_recursive($array, function(&$value) {
    $value = encoding_function($value);
});
$json = json_encode($array); 
```

`encoding_function`您选择对值进行编码的函数在哪里？那可能是`htmlspecialchars`或其他。

或者，您可以将整个混乱包装为一个函数本身：

```
function json_walk_recursive($json, callable $function) {
    $array = json_decode($json, true);
    array_walk_recursive($array, function(&$value) use($function) {
        $value = $function($value);
    });
    return json_encode($array);
}

echo json_walk_recursive('{"foo":"bar","baz":{"qux":"zip"}}', function($value) {
    return strtoupper($value);
});

// {"foo":"BAR","baz":{"qux":"ZIP"}} 
```

这个例子可以在很多方面进行优化；比如`$function`直接`array_walk_recursive`传递*给**_** _当前形式；但我离题了*）

此外，您还需要错误恢复和其他此类必需品。

# c - 用malloc分配内存？

> ID：15284471
> 
> 赞同：1
> 
> 时间：2013-03-08T00:18:30.410
> 
> 标签：c, memory-management, malloc

以下是代码片段：

```
int main(void) {

    char sizing[] = "manshcanshcnams cndhan sndhcna snshans";
    char *xyz = malloc(sizeof(char));
    printf("%ld\n",sizeof(xyz));
    xyz = sizing;    // IT SHOULD FAIL HERE
    printf("Fail %s\n",xyz );
    return 0; 
```

}

如您所见，我正在尝试为 xyz 分配更多内存，然后再分配它可以容纳的内存。但输出不会失败。这是未定义的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:20:09.600

您不能使用 复制字符串`=`。`xyz = sizing`只需修改变量`xyz`，使其指向数组`sizing`，而不是指向您分配的内存。

因此，您的内存已泄漏，但没有未定义的行为（除了您忘记包含`<stdio.h>`and `<stdlib.h>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:21:54.030

您所做的只是告诉指针*xyz*指向与*sizing*相关的内存地址。没有理由会失败。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T00:45:26.060

我的理解是，`malloc()`除非它不能分配它所要求的内存量，否则它不应该失败。但是，当您使用它时，您需要在不再需要它时释放该内存，否则您的程序将请求越来越多的内存，最终请求*将*失败，因为您没有释放任何东西。

此外，并非所有非法内存操作都会导致错误，例如（*代码编辑 2013-03-08 基于 Kludas 观察到先前版本无法编译*）：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char myString[4];
    strcpy(myString, "abcdefghijklmnopqrstuvwxyz");  /* This overflows the buffer */
                                                     /* but MIGHT NOT cause an    */
                                                     /* immediate crash!          */
    printf("myString = [%s]\n", myString);
    return 0;
} 
```

这可能会或可能不会触发错误，但这肯定是非法的，因为我将 26 个字符写入一个只能包含 4 个项目（三个字符加上终止 NULL）的数组。

# c# - GetWindowThreadProcessId 竞争条件风险

> ID：15284472
> 
> 赞同：1
> 
> 时间：2013-03-08T00:18:31.723
> 
> 标签：c#, .net, winapi, pinvoke, unmanaged

阅读[另一个问题](https://stackoverflow.com/questions/6569405/how-to-get-active-process-name-in-c)的评论，我发现使用`GetWindowThreadProcessId`Windows API 方法时存在遇到竞争条件的风险。这是多大的风险？

请允许我提供我正在尝试的背景。我正在用 C# 编写一个计时应用程序供我个人使用。我的意图是在活动窗口发生变化时让应用程序检测（通过 Win API 调用），以便我可以记录正在使用的应用程序的时间。我已经找到了检测活动窗口何时更改的代码；现在我正在尝试确定与该窗口关联的进程。我在 SO 上找到了几篇指向`GetWindowThreadProcessId`解决方案的帖子，但正如我所提到的，使用它似乎存在潜在问题。如果`GetWindowThreadProcessId`这不是一个安全的方法，那么我愿意接受其他选择。

我希望将代码完全保留在 C# 中，但我并不（完全）反对在必要时将部分代码移到 C/C++ 中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:34:37.300

比赛是不可避免的。没有 API 可以自动执行您想要的操作。

但这是一场相当良性的比赛。会出什么问题？在您询问之前，窗口已关闭。所以你得到一个错误，然后再试一次。您需要做的就是了解竞争条件并优雅地检查和处理错误。

# c - 打印一个字符 *

> ID：15284473
> 
> 赞同：15
> 
> 时间：2013-03-08T00:18:38.307
> 
> 标签：c, char, printf

我提前为这个愚蠢的问题道歉！

这是我的结构定义：

```
struct vcard {
  char *cnet;
  char *email;
  char *fname;
  char *lname;
  char *tel;
}; 
```

我正在尝试使用函数 vcard_show(vcard *c) 打印此结构的表示，但编译器正在抛出警告：

```
void vcard_show(struct vcard *c)
{
    printf("First Name: %c\n", c->fname);
    printf("Last Name: %c\n", c->lname);
    printf("CNet ID: %c\n", c->cnet);
    printf("Email: %c\n", c->email);
    printf("Phone Number: %c\n", c->tel);
} 
```

编译时：“警告：格式 '%c' 需要类型 'int'，但参数 2 的类型为 'char *'”

%c 不是 char* 的符号吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-08T00:20:44.510

您想使用`%s`，它用于字符串 (char*)。`%c`用于单个字符（char）。

类型后的星号`*`使其成为指向类型的指针。所以`char*`实际上是一个指向字符的指针。在 C 中，通过将指针传递给字符串的第一个字符，字符串是按引用传递的。通过将字符串最后一个字符之后的字节设置为 NULL (0) 来确定字符串的结尾。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T00:20:35.867

a 的属性类型编码`char *`是`%s`。`%c`是一个`char`（不是指针只是一个`char`）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T00:27:12.870

除非你有一些你没有告诉我们的 typedef，否则你应该`vcard_show()`这样声明：

```
void vcard_show(struct vcard *c) 
```

# ruby-on-rails - 带有`respond_with`的未定义方法

> ID：15284474
> 
> 赞同：1
> 
> 时间：2013-03-08T00:18:48.067
> 
> 标签：ruby-on-rails, ruby

编辑：我想知道为什么 Ruby/Rails 决定寻找`word_list_url`在我的控制器中调用的函数。通常，为什么在 RoR 中完成所有事情都是有道理的，但这对我来说没有意义。

我正在尝试`respond_with`在我的一个控制器功能中对对象进行建模，如下所示：

```
def create
   @word_list = WordList.new(params[:word_list])
   @word_list.key = randomKey
   if @word_list.title == nil then @word_list.title = "No Title"
   end
   if @word_list.words == nil then @word_list.words = "Empty"
   end
   @word_list.save
   respond_with @word_list
end 
```

然后我像这样调用API：

```
curl -v -H "Content-Type: application/json" -X POST -d '{"title":"New Word List", "words":"Words\nFor\nThe\nWord\nList"}' http://localhost:3000/create.json 
```

但我得到了错误：

```
NoMethodError (undefined method `word_list_url' for #<WordListsController:0x007fb34c95ca98>):
  app/controllers/word_lists_controller.rb:42:in `create' 
```

但是，这是模型：

```
class WordList < ActiveRecord::Base
  attr_accessible :key, :title, :words
end 
```

它从哪里得到“方法`word_list_url`”？我不完全确定发生了什么。我有我的`respond_to`：

```
respond_to :json, :xml 
```

这里发生了什么？如果我使用`render`而不是`respond_with`，一切正常。

* * *

目前，在其他功能中，`respond_with`工作得很好。例如：

```
 def show
    lists = WordList.where(:key => params[:id].upcase)
    if lists.length > 0 then @word_list = lists.first
    elsif numberValue(params[:id]).between?(0, WordList.count) then @word_list = WordList.find(params[:id])
    end
    respond_with(@word_list)
  end 
```

* * *

路线：

```
create POST   /create(.:format) word_lists#create
update PUT    /update(.:format) word_lists#update
       GET    /:id(.:format)    word_lists#show 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:27:10.317

如果您查看[http://api.rubyonrails.org/classes/ActionController/Responder.html](http://api.rubyonrails.org/classes/ActionController/Responder.html)，您会发现对 xml 格式的支持扩展到

```
format.xml { render :xml => @word_list, :status => :created, :location => @word_list } 
```

我认为`:location`使用`url_for`可能会导致您的错误。尝试

```
respond_with @word_list do |format|
  format.xml { render :xml => @word_list, :status => :created }
end 
```

# javascript - 如何找到一个对象必须旋转以面对另一个对象的角度，JS HTML5 CANVAS

> ID：15284479
> 
> 赞同：0
> 
> 时间：2013-03-08T00:19:18.237
> 
> 标签：javascript, html, canvas, rotation

好的，所以我有两个对象，一个播放器和一个光标。我有两个对象的位置，我只需要找到玩家必须旋转以面对光标的度数或弧度数。

我正在用 Javascript 制作这个游戏，并且游戏在画布中运行。所以我更喜欢在 Update() 或 Draw() 函数中放置一个代码来更新一个变量，我可以在每次调用 Draw() 函数时使用它来旋转我的播放器。

我认为会有一些公式可以用于此，但我自己无法找到它，坦率地说，如果我有的话，我可能不知道该怎么做。所以，如果你们中的一个人能帮我解决这个问题，那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:32:19.847

好的，让我们假设以下内容：
1）除了一个玩家（你知道它的位置）和一个光标（你知道它的位置），你还知道玩家的当前轮换（我想你有一个顶部-俯视一个人，你可以看到他面对的方向）。我假设这是因为您询问玩家必须旋转多远才能面对光标，这意味着玩家有旋转。如果玩家总是面向一个方向并且其他所有东西都围绕他们旋转，那么同样的方法也可以，只是你不需要在最后减去玩家的旋转。
2) 球员轮换相对于“右”（正 x 轴）。
3) 球员轮换以弧度为单位。

如果这是真的，那么您将执行以下操作：
1）计算出从“右”到光标的旋转（如果您移动所有内容以使玩家位于原点）。为此，您需要执行 Math.atan2(cursor.y - player.y,cursor.x - player.x); - 这会给你弧度的角度。
2）从这个角度减去玩家的旋转。

达达？

# iphone - iOS 6 横向问题

> ID：15284481
> 
> 赞同：0
> 
> 时间：2013-03-08T00:19:25.887
> 
> 标签：iphone, ios, objective-c, orientation, uiinterfaceorientation

在 iOS 中，关闭模态视图控制器（强制仅以纵向显示）后，如果设备处于横向模式，则呈现模态视图控制器的视图控制器不会正确旋转回横向。

'willAnimateRotationToInterfaceOrientation' 方法被调用，所以我可以管理我的子视图等的旋转，但是实际的视图控制器不会旋转到横向。所以我的子视图看起来应该是横向的，但界面是纵向模式。

烦人的是它在 iOS 5 模拟器中运行良好。IE。关闭模态视图控制器后，呈现视图控制器旋转回横向。

有没有人经历过类似的事情，或者知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:15:17.487

For IOS 6 u need to handle the orientation with this methods.

```
- (BOOL)shouldAutorotate; {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations; {
    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown);
    }
    else{
        return UIInterfaceOrientationMaskLandscape;
    }
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation; {
    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        return UIInterfaceOrientationPortrait;
    }
    else{
        return UIInterfaceOrientationLandscapeLeft;
    }
} 
```

# ruby - 如何将多个范围与 google api ruby 客户端结合起来？

> ID：15284483
> 
> 赞同：3
> 
> 时间：2013-03-08T00:19:42.097
> 
> 标签：ruby, google-api, google-api-ruby-client

我正在使用[google api ruby​​ 客户端](https://github.com/google/google-api-ruby-client)！并想结合几个范围，例如[https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)和[https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me)？

到目前为止，我似乎只能使用 client.authorization.scope = ' [https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me) '

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T05:58:07.930

您需要做的就是传递一个`Array`范围。

# c++ - 有条件地编译为 Win32 GUI 或 Linux 控制台应用程序

> ID：15284487
> 
> 赞同：0
> 
> 时间：2013-03-08T00:19:59.240
> 
> 标签：c++, linux, conditional-compilation, win32gui

我的任务是编写一个有条件地编译为 Windows 下的 Win32 GUI 应用程序或 Linux 下的控制台应用程序的应用程序。

到目前为止，我最大的绊脚石就是弄清楚如何设置这个项目。我通常在 Visual Studio 2012 中工作，并且在创建新的 C++ Win32 项目时可以在控制台应用程序和 GUI 应用程序之间进行选择。我觉得这是在设置一些项目属性和与编译器相关的东西，这将使在 Linux 下编译同一个项目并让它生成控制台应用程序变得困难。

我并不十分关心条件编译的东西，我只是想弄清楚我是否应该通过 Windows 上的命令行而不是使用 Visual Studio 来编译这些东西，以及如何将目标应用程序设置为结束执行此操作时作为 GUI 或控制台应用程序。

希望我已经清楚地解释了自己，我认为很明显我很迷茫。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:22:04.137

这似乎是其中一种情况，您最好通过创建一个包含大部分功能的库，然后为该库添加两个或三个前端以将其功能公开为控制台应用程序或 GUI 程序。

试图将一堆 Win32 GUI 的东西打进一个控制台应用程序项目是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:35:19.003

我建议使用跨平台工具包，例如 wxWidgets 或 Qt。这样，您就不会被绑定到一个特定的平台架构。这些框架还包含有关如何使用各种编译器/开发环境正确设置项目的大量文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T02:29:22.087

这是您可以至少在 Windows 端使用项目的预处理器定义来定义两者的东西。在这里讨论！

[Windows 和 Linux 上的 C++ 编译：ifdef 开关](https://stackoverflow.com/questions/6649936/c-compiling-on-windows-and-linux-ifdef-switch)

并将您的代码部分样式化为：

```
#ifdef WIN32   // Windows system specific
#include <windows.h>
#else          // Unix based system specific
#include <sys/time.h>
#endif 
```

继续以这种方式分离所有跨平台代码。不要忘记在 Properties --> Configuration Properties --> C/C++ --> Preprocessor 下将 WIN32 添加到您的项目属性中

# php - ExtJS Ajax 调用不起作用

> ID：15284490
> 
> 赞同：0
> 
> 时间：2013-03-08T00:20:15.060
> 
> 标签：php, mysql, extjs

我正在尝试根据 php 文件返回的计数在面板内创建添加面板。但是，我对如何使用返回的 JSON 数据感到困惑。此外，当我使用 firebug 进行检查时，我没有看到 Ajax 调用启动。我的代码如下：

应用程序.js

```
 var ds = Ext.create('Ext.data.Store',({
            proxy: {
                type:'ajax',
                  url:'data.php',
                  reader: {
                type : 'json',    
                id: 'Completion_ID',  
                root: "myInventory",
                fields:
                        [{name: 'PMNumber', type: 'int', mapping: 'PMNumber'},
                        ]
                    }
           }

           })
        );

Ext.onReady(function() 
{

ds.load();

Ext.create('Ext.panel.Panel', {
    renderTo: document.getElementById('aa'),
    title: 'Marks Entry',
    height: 500,
    width: 880,
    bodyStyle:'padding:15px 15px 15px 15px',
    layout: {
            type: 'table',
            //3 by 3 Grid
            columns: parseInt([{ dataIndex: 'PMNumber'}])
        },
     items: [{ 
             // Blank Panels so html is ''
            xtype:'panel',
            html: '2003010001 &nbsp;' 
        },{
            xtype:'panel',
            html: '2003010002  &nbsp;'

        },{
            xtype:'panel',
            html: '2003010003  &nbsp;' 
        },{
            xtype:'panel',
            html: '2003010004' 
        },
        {
            xtype:'panel',
            html: '2003010005' 
        },
        {
            xtype:'panel',
            html: '2003010006' 
        },
        {
            xtype:'panel',
            html: '2003010007' 
        },
        {
            xtype:'panel',
            html: '2003010008' 
        },
        {
            xtype:'panel',
            html: '2003010009'
        },
        ],    
});
}); 
```

数据.php

```
<?php
//connection String
$con = mysql_connect($myhost, $myuser, $mypass) or die('Could not connect: ' . mysql_error());
//Select The database
$bool = mysql_select_db($myDB, $con);
if ($bool === False){
    print "can't find $database";
}
// Gather all pending requests
$query = "SELECT
count(*) AS  PMNumber
FROM marks " ;
$result = mysql_query($query, $con); 
if (mysql_num_rows($result) > 0){
while($obj = mysql_fetch_object($result))
    {
        $arr[] = $obj;
    }
// Now create the json array to be sent to our datastore
$myData = array('myInventory' => $arr);
echo json_encode($myData);
return; 
exit();
}
else { // If no requests found, we return nothing
$myData = array('myInventory' => '');
echo json_encode($myData);
return; 
exit();
}
?> 
```

独立调用时php文件返回的JSON数据：

```
{"myInventory":[{"PMNumber":"3"}]} 
```

.html 文件：

```
<html>
<head>
    <title>Hello Ext</title>

    <link rel="stylesheet" type="text/css" href="../extjs/resources/css/ext-all.css">
    <script type="text/javascript" src="../extjs/ext-debug.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
</head>
<body style="padding: 50px 20px 0 20px;">
    <div id="aa" style="wdith:900px;height:500px"></div>
</body>
</html> 
```

有人知道我在哪里失踪吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:28:23.570

Ext.data.Store 是一个代表数据绑定小部件或其他数据消费者管理表格数据的对象。它将那些数据消费者从数据采集和转换的细节中抽象出来。

如果你想要求 Store 直接加载数据（而不是绑定一个或多个小部件到它），那么你可以调用它的["load" 方法](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-load)。

我强烈建议您在继续之前阅读有关此主题的[白皮书](http://docs.sencha.com/ext-js/4-0/#!/guide/data)以及 ExtJS 架构文档的其余部分。

# typescript - TypeScript 不编译引用的文件

> ID：15284492
> 
> 赞同：2
> 
> 时间：2013-03-08T00:20:22.470
> 
> 标签：typescript

我正在使用 TypeScript 编译一些相互引用的文件。这些文件相互引用。

问题是当我编译它们时，它也包括它引用的文件的编译内容。

例子：

```
// in Foo.ts
class Foo {}

// in Bar.ts
/// <reference path='./Foo.ts'/>
class Bar extends Foo {} 
```

如果我尝试只编译 Bar.ts，输出也将包含 Foo 的代码。

基于另一个线程（如下所述），如果您使用 --out 参数，它看起来会这样做。但是，我需要使用 out 参数，但不希望它被链接（因为我会自己连接起来）。

有谁知道如何分离这两个功能？

注意：这不是[引用 TypeScript 文件在输出中包含整个文件](https://stackoverflow.com/questions/13461758/referencing-typescript-file-includes-whole-file-in-output)的副本，因为这纯粹是为了使用 Web Essentials。我直接使用命令行编译器，虽然问题是相似的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:28:42.333

如果您将目录名（而不是文件名）传递给 -out 开关，您将获得单独的编译。您需要 0.8.2 或更高版本才能执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T00:52:00.137

我正在遭受同样的事情。 [这是关于 codeplex 的讨论](http://typescript.codeplex.com/discussions/432797)，其中还引用了[有关 references 的错误](http://typescript.codeplex.com/workitem/466)。如果有帮助，请投票。

我们正在构建一个模块化的 SDK，所以这个重复的代码是一个真正的问题。我们最终只将引用用于 Visual Studio 工具，并使用自定义构建系统来生成 JavaScript。系统为所有依赖模块构建 .d.ts decls，然后使用这些 decls 构建依赖模块，传递`--noresolve`标志以防止`<reference ...>`被拾取。

# ruby-on-rails - 使用 Rails 迁移添加一个数据库列并基于另一列填充它

> ID：15284495
> 
> 赞同：11
> 
> 时间：2013-03-08T00:20:37.410
> 
> 标签：ruby-on-rails, activerecord, migration, rails-activerecord, rails-migrations

我正在编写迁移以将列添加到表中。该列的值取决于另外两个现有列的值。最好/最快的方法是什么？目前我有这个但不确定这是否是最好的方法，因为组表可能非常大。

```
class AddColorToGroup < ActiveRecord::Migration
  def self.up
    add_column :groups, :color, :string
    Groups = Group.all.each do |g|
      c = "red" if g.is_active && is_live 
      c = "green" if g.is_active
      c = "orange"
      g.update_attribute(:type, c)
    end
  end

  def self.down

  end
end 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-18T06:06:21.153

像这样从迁移中引用模型通常不是一个好主意。问题是迁移按顺序运行并随时更改数据库状态，但您的模型根本没有版本控制。无法保证编写迁移时存在的模型将来仍与迁移代码兼容。

例如，如果您将来更改`is_active`or`is_live`属性的行为，则此迁移可能会中断。这种较旧的迁移将首先针对新模型代码运行，并且可能会失败。在您的基本示例中，它可能不会突然出现，但是在添加字段并且无法运行验证之前，这已经让我在部署中烧毁了（我知道您的代码正在跳过验证，但总的来说这是一个问题）。

我最喜欢的解决方案是使用纯 SQL 进行所有此类迁移。看起来你已经考虑过了，所以我假设你已经知道在那里做什么。

另一种选择是，如果您有一些繁琐的业务逻辑或只是希望代码看起来更像 Railsy，则在迁移文件本身*中写入迁移时，包含模型的基本版本。*例如，您可以将此类放在迁移文件中：

```
class Group < ActiveRecord::Base
end 
```

就您而言，仅此一项就足以保证模型不会损坏。假设此时`active`和`live`是表中的布尔字段（因此将来无论何时运行此迁移），您根本不需要任何代码。如果您有更复杂的业务逻辑，则可以将其包含在此特定于迁移的模型版本中。

您甚至可以考虑将模型中的整个方法复制到迁移版本中。如果您这样做，请记住，您不应该从那里引用应用程序中的任何外部模型或库，如果它们将来有可能发生变化。这包括 gem，甚至可能包括一些核心 Ruby/Rails 类，因为 gem 中的 API 破坏性更改非常常见（我在看你，Rails 3.0、3.1 和 3.2！）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T01:01:29.443

我强烈建议改为进行三个总查询。始终利用数据库而不是循环遍历数组中的一堆项目。我认为这样的事情可以奏效。

出于编写本文的目的，我假设 is_active 检查一个活动字段，其中 1 是活动的。我假设 live 也是一样的。

**Rails 3 方法**

```
class AddColorToGroup < ActiveRecord::Migration
  def self.up
    add_column :groups, :color, :string
    Group.where(active: 1, live: 1).update_all(type: "red")
    Group.where(active: 1, live: 0).update_all(type: "green")
    Group.where(active: 0, live: 0).update_all(type: "orange")
   end
 end 
```

随时查看 update_all 的[文档](http://apidock.com/rails/ActiveRecord/Relation/update_all)。

**Rails 2.x 方法**

```
class AddColorToGroup < ActiveRecord::Migration
  def self.up
    add_column :groups, :color, :string
    Group.update_all("type = red", "active = 1 AND live = 1")
    Group.update_all("type = red", "active = 1 AND live = 0")
    Group.update_all("type = red", "active = 0 AND live = 0")
   end
 end 
```

[Rails 2 文档](http://apidock.com/rails/ActiveRecord/Base/update_all/class)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T00:23:43.010

我会这样做

```
after_create
# or
after_save 
```

在您的 ActiveRecord 模型中：

```
class Group < ActiveRecord::Base
  attr_accessor :color

  after_create :add_color

  private

  def add_color
    self.color = #the color (wherever you get it from)
  end

end 
```

或者在迁移中，您可能必须执行一些这样的 SQL：

```
execute('update groups set color = <another column>') 
```

这是 Rails 指南中的一个示例：

[http://guides.rubyonrails.org/migrations.html#using-the-up-down-methods](http://guides.rubyonrails.org/migrations.html#using-the-up-down-methods)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-20T20:00:31.907

在类似的情况下，我最终使用直接 SQL 添加列`add_column`，然后使用直接 SQL 更新列的值。[根据Jim Stewart 的回答](https://stackoverflow.com/a/15470644/1108305)，我使用了直接 SQL 而不是模型，因为那时它不依赖于模型的当前状态与基于正在运行的迁移的表的当前状态。

```
class AddColorToGroup < ActiveRecord::Migration
  def up
    add_column :groups, :color, :string
    execute "update groups set color = case when is_active and is_live then 'red' when is_active then 'green' else 'orange' end"
  end

  def down
    remove_column :groups, :color
  end
end 
```

# ms-access - 使用 Access 2010 sql 显示到记录

> ID：15284496
> 
> 赞同：0
> 
> 时间：2013-03-08T00:20:40.337
> 
> 标签：ms-access, ms-access-2010

我创建了一个名为 cust 的表。有列，customer_number 地址和余额。客户编号范围为 100-105。我想要做的是获得客户编号 102 和 104 的余额。这是我尝试过的，但没有显示任何结果。客户 102 的余额为 300，104 的余额为 1900。这是我尝试过的：

```
select customer_number, balance
from Cust
Where customer_number = '102' and customer_number = '104'; 
```

但是当我查看输出时，我没有看到这两条记录出现。我知道这与我的 where 子句有关，但我似乎无法弄清楚是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:22:49.130

将 更改`and`为`or`。使用`and`将意味着您正在寻找同时具有 customer_number 102 和 customer_number 104 的记录，这实际上没有意义......

# javascript - 处理 javascript 函数中的无参数

> ID：15284501
> 
> 赞同：3
> 
> 时间：2013-03-08T00:21:08.787
> 
> 标签：javascript, internet-explorer-8, jquery-1.7

我在 javascript 方面几乎没有经验，但在其他编程语言中，可以为函数中缺少的参数设置默认值。

例如，假设我有一个功能

```
function foo(a , b)
  return a + b 
{ 
```

我希望能够使用 1 个参数或 2 个参数调用上述函数

**一种参数情况：**

```
foo(2)   //a =2 and b would be automatically set to a default no argument value, 
```

**两个参数案例：**

```
foo(1,2)  // a = 1 , b = 2 => 3 
```

这在与 IE 8 兼容或使用 Jquery 1.7.2 的 javascript 中是否可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:24:39.810

JavaScript 函数允许您使用比指定更少的参数调用它们。

您要完成的工作可能是执行以下操作：

```
function foo(a , b){
  if(typeof b === "undefined"){
      b=3;
  }
  return a + b; 
}
foo(5);//return 3; 
```

我强烈建议您检查`undefined`而*不是*依赖`||`运营商。我花了几个小时调试做出这种假设的代码，但在通过`0`或另一个错误值时失败了。JavaScript 类型系统可能会变得非常棘手，例如`"0"`是 falsy。

ECMAScript Harmony（下一个版本）允许像其他语言一样使用以下语法的默认参数

```
function foo(a , b=3){
  return a + b;
} 
```

不过，这在 IE8 中不像第一个版本那样工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T00:24:18.073

是的，这是可能的。如果未传递参数，则会得到一个特殊值“未定义”。以下对我有用：

```
function foo(a, b) {
  a = a || defaultForA;
  b = b || defaultForB;

} 
```

由于 Javascript 处理转换为布尔值的方式，在上面的代码片段中，以下所有内容都将被视为未定义：

```
undefined
null
0
"" (empty string)
false 
```

因此，如果这些值对您很重要，您将需要显式测试未定义而不是上面使用的笼统“如果不是假”测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T00:24:27.913

不，但您可以使用三级运算符或 if 语句手动模拟此效果（只需确保检查`undefined`！）：

```
function foo(a, b) {
    b = (typeof b === "undefined") ? 2 : b;

    return a + b;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T00:24:57.397

未定义的参数评估为 false，因此您可以在函数 foo 的开头执行以下操作：

```
a = a || 0;
b = b || 0; 
```

这样，如果 a 或 b 存在，它们将被评估为自己的值，否则为 0。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T00:27:01.677

您可以测试是否收到参数：

```
function foo(a, b) {
  if(typeof b === "undefined") {b = 2;}
} 
```

通过测试“未定义”，您还可以接受评估为假的参数（如`null`or`""`或`0`or `false`）

# qt - 你可以设置一个 QWidget 来占据一个 QTreeWidget 的整个列吗？

> ID：15284510
> 
> 赞同：3
> 
> 时间：2013-03-08T00:21:49.740
> 
> 标签：qt, qt5, qtreewidget

我有一个自定义`QTreeWidget`子类，用于显示曲目名称/等。在我的 MIDI 编辑器项目（[https://github.com/waddlesplash/ragingmidi](https://github.com/waddlesplash/ragingmidi)）中。我想向此树小部件添加另一列，但一个小部件占据整个列，而不是每个项目的小部件。

这是可能的还是我必须找出其他解决方案？

**编辑**：我正在尝试完成这样的事情：[http](http://www.anvilstudio.com/compose.jpg) ://www.anvilstudio.com/compose.jpg - 查看标题视图中的最后一个“列”（“L/R 平衡”之后的第三个）显示所有行/notes （这是完全自定义的，无论如何都是用 VB.NET 和封闭源代码编写的）。

**编辑 2**：您看不到它，但最后一列滚动而其他列在上图中滚动。在他们的方法中，您必须使用鼠标滚动。我想要一个滚动条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:35:08.263

查看 Qt 文档，似乎有几个选项可以实现这一点，但是在您决定哪种方法最适合您的需求之前，需要解决一些重要因素。

1.  此自定义树列中显示的内容是静态的还是动态的？
2.  从 QTreeWidget 到自定义树列是否存在一对一的行映射？

如果您的自定义树列内容是静态的并且存在一对一的 rows 映射，则使用[QTreeWidget::setItemWidget ( QTreeWidgetItem * item, int column, QWidget * widget )](http://qt-project.org/doc/qt-4.8/qtreewidget.html#setItemWidget)函数就足够了。

但是，如果您的自定义树列的内容是动态的，或者没有一对一的行映射，这将需要更复杂的方法。

如 QTreeWidget 文档中所述；“如果要显示自定义动态内容或实现自定义编辑器小部件，请使用 QTreeView 和子类 QItemDelegate。”

QItemDelegate 及其子类为插入到 Qt 项目视图（如 QTreeView、QListView、QTableView 等）的项目执行所有绘图工具。这实质上允许您控制插入到 QTreeView 类中的任何项目的所有绘图操作，除了能够跨多行扩展内容之外，还允许您绘制动态内容。

为 QListWidget 实现了类似的方法后，我建议使用[QStyledItemDelegate](http://qt-project.org/doc/qt-4.8/qstyleditemdelegate.html)代替[QItemDelegate](http://qt-project.org/doc/qt-4.8/qitemdelegate.html)，因为它允许您更轻松地将此小部件与应用程序的样式布局集成。由于您没有详细说明此自定义 QWidget 的确切用途，您可能还需要[QItemEditorCreator](http://harmattan-dev.nokia.com/docs/library/html/qt4/qitemeditorcreator.html)、[QItemEditorCreatorBase](http://qt-project.org/doc/qt-4.8/qitemeditorcreatorbase.html)和[QItemEditorFactory](http://harmattan-dev.nokia.com/docs/library/html/qt4/qitemeditorfactory.html)提供的附加工具。如果可以的话，我会发布我在这里开发的类似小部件，但遗憾的是它是专有软件套件的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:34:33.690

这并不完全漂亮，因为当自定义小部件位于最右边的列并且该列变窄时会出现问题，但这是一个开始：

```
#include <QtGui>

class TreeWidget : public QTreeWidget
{
    Q_OBJECT
public:
    TreeWidget();

    QRect columnRect(int column) const;

private slots:
    void repositionColumnWidget();

private:
    QPushButton * mColumnWidget;
};

TreeWidget::TreeWidget()
    : mColumnWidget(new QPushButton("Custom Column Button", viewport()))
{
    const int COLUMN_COUNT = 6;
    setColumnCount(COLUMN_COUNT);
    for (int row = 0; row < 400; ++row)
    {
        QStringList columns;
        for (int column = 0; column < COLUMN_COUNT; ++column)
        {
            columns << QString("row %1, column %2").arg(row + 1).arg(column + 1);
        }
        addTopLevelItem(new QTreeWidgetItem(columns));
    }
    for (int column = 0; column < COLUMN_COUNT; ++column)
    {
        resizeColumnToContents(column);
    }
    repositionColumnWidget();
    mColumnWidget->show();
    connect(header(), SIGNAL(sectionResized(int,int,int)), this, SLOT(repositionColumnWidget()));
    connect(header(), SIGNAL(sectionMoved(int,int,int)), this, SLOT(repositionColumnWidget()));
    connect(verticalScrollBar(), SIGNAL(valueChanged(int)), this, SLOT(repositionColumnWidget()));
    connect(horizontalScrollBar(), SIGNAL(valueChanged(int)), this, SLOT(repositionColumnWidget()));
}

QRect TreeWidget::columnRect(int column) const
{
    int itemCount = topLevelItemCount();
    if (!itemCount)
    {
        return QRect();
    }
    int columnX = header()->sectionViewportPosition(column);
    int columnY = visualItemRect(topLevelItem(0)).top();
    int columnWidth = header()->sectionSize(column);
    int columnHeight = visualItemRect(topLevelItem(itemCount-1)).bottom() - columnY + 1;

    return QRect(columnX, columnY, columnWidth, columnHeight);
}

void TreeWidget::repositionColumnWidget()
{
    mColumnWidget->setGeometry(columnRect(3));
}

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    a.setQuitOnLastWindowClosed(true);

    TreeWidget treeWidget;

    treeWidget.resize(800, 600);
    treeWidget.show();

    return a.exec();
}

#include "main.moc" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:47:10.073

一周后我想到的是劫持 H 滚动条`QTreeWidget`，然后让滚动条只滚动最后一列。因为现在，当窗口为 620x670 像素时，所有的列都适合，谁还有这么小的屏幕？

除非有人对为什么这是一个坏主意有更好的解决方案或反对意见，否则这就是我要做的方式。

# cassandra - 如何使用 pycassa get_range 以反向排序顺序获取行？

> ID：15284512
> 
> 赞同：2
> 
> 时间：2013-03-08T00:21:52.107
> 
> 标签：cassandra, pycassa

我想让 pycassa 中的 get_range 返回的行处于反向排序顺序..即从完成到开始。我知道存在一个参数 column_reversed 用于以反向排序顺序获取列，但是我如何为行完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:07:24.137

Cassandra 本身不支持以相反的顺序获取一系列行。它也不支持以正常的排序顺序获取行，除非您使用的是保留顺序的分区程序，这几乎不推荐使用。这篇文章有点老了，但仍然很好地涵盖了这个主题：[http ://ria101.wordpress.com/2010/02/22/cassandra-randompartitioner-vs-orderpreservingpartitioner/](http://ria101.wordpress.com/2010/02/22/cassandra-randompartitioner-vs-orderpreservingpartitioner/)

# git - 如果您处于集中式模型并且从不强制执行，那么 git pull --rebase 是否安全？

> ID：15284514
> 
> 赞同：4
> 
> 时间：2013-03-08T00:22:00.063
> 
> 标签：git, rebase

关于 rebase 的安全性有很多 git 问题，并且似乎达成共识，只要你记得重写公共历史是粗鲁的，你应该是安全的，即如果没有任何提交你没有推送到 repo你正在拉，你是安全的。

但是，有一个答案让我停下来：

[https://stackoverflow.com/a/2597107/1339987](https://stackoverflow.com/a/2597107/1339987)

> 提交到一个分支。推。合并到另一个分支（假设您要维护两个基线，一个补丁分支和一个新开发分支）。意识到其他提交已被推送到您正在跟踪的服务器分支。拉——变基。突然间，您针对新哈希重新进行了每个提交 - 并破坏了合并提交。

我试着玩这个，但无法重现有问题的场景（我可能需要创建一个更复杂的合并，但到目前为止还没有这样做）。所以我要求对这种情况进行解释，最好是一组标准，在这些标准下，我可以安全且相对盲目地依赖 rebase pulls。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T01:00:02.340

有问题的情况实际上是可能的，但后果并不像你想象的那么严重。`git config gc.reflogexpireunreachable`一旦在 git 中提交了某些内容，您至少不能在 30 天内丢失该工作（默认情况下，由 配置）。

如果发生上述情况并且您检测到它，您始终可以在变基之前恢复到该分支的上一个提示。您可以通过查看`git reflog`或指定结帐时间来找到此提示，例如：`git checkout 'HEAD@{5 minutes ago}'`。

在我使用 git 的这些年里，我从来没有使用过，`git pull --rebase`因为 pull 命令的运行水平通常比我想的要高。我更喜欢做同样的事情：

```
git fetch origin
git rebase -i origin/branch 
```

明确的分支名称和交互选项 on`git rebase`意味着我始终知道正在重新设置的内容。有时，当我做错事时，我会惊讶地发现我的变基编辑器中有一个巨大的提交列表。

此外，当我在开发一个短期或中期功能时，我几乎总是在本地进行 rebase，而不是合并上游更改。当我最终将它们推送到中央存储库时，这使我的更改对我来说更加清晰并简化了历史记录。

因此，总而言之，该命令与任何其他 git 命令一样安全，但您需要了解它会做什么以及如何做到这一点，以免出现意外情况。

另请注意：`git rebase`可以选择尝试保留合并。看起来没有一种简单的方法可以用`git pull --rebase`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:03:17.400

如果历史已经公开，重写历史是不礼貌的。如果更改是本地的，那么没有人可以粗鲁。

如果你确实改变了一些东西，并且 a`git pull`不仅仅是快进，你会得到一个合并，因此历史会有点混乱。如果您的更改尚未完成，我更愿意使用它`git pull --rebase`来保持历史整洁（并合并上游更改）。

小心，任何历史重写都会创建以前从未存在过的提交，因此没有被读取/测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:24:02.543

这基本上就是[gerrit 的](http://code.google.com/p/gerrit/)功能。只有授权用户推送到实际的仓库；大多数只是推送到 gerrit 审查服务器，让 gerrit 进行合并。最终，当您拉取时，您将获得存储库的“集中式”版本，并且相关`repo`工具负责始终重新定位您的分支而不是合并。

在这个模型中，用户总是使用 rebase 拉取。到目前为止，它在 Android 上运行良好。

# android - 无法在 Android 4.1.2 及更高版本中创建新的 Socket

> ID：15284518
> 
> 赞同：0
> 
> 时间：2013-03-08T00:22:12.717
> 
> 标签：android, sockets, freeze

在 Android 2.3.3（API lvl 10）中，以下代码有效，但在 Android 4.1.2 及更高版本中，它会挂起并在创建套接字时超时。

```
int port = 2890;
InetAddress server_addr = InetAddress.getByName("10.1.1.3");
Socket s = new Socket(server_addr,port); 
```

我已经看到其他关于这可能是由主线程使用的 IPv6 地址和/或套接字引起的帖子，但我的代码仅使用 IPv4 并且在后台服务的单独线程中运行。它在模拟器中或在真实设备上运行时的行为也相同。

任何想法/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:24:28.233

在我在 ICS 4.0+ 上运行的项目上。它运作良好

```
sk = new Socket(_ServerIP, PORT); 
```

# java - 货币格式仅适用于一个动态 EditText 而不适用于其他

> ID：15284519
> 
> 赞同：0
> 
> 时间：2013-03-08T00:22:39.347
> 
> 标签：java, android, android-edittext, textwatcher

以下`for`循环`x`根据项目的大小添加行数：

```
for (int i = 0; i < shoppingQuantityAndItems.size(); i++) {
    TableRow label = new TableRow(this);

    EditText quantity = new EditText(this);
    quantity.setInputType(InputType.TYPE_CLASS_NUMBER);
    quantity.setText(shoppingQuantityAndItems.get(i).get(0));
    System.out.println("Size: "
            + shoppingQuantityAndItems.get(i).get(0));
    label.addView(quantity);

    TextView items = new TextView(this);
    items.setText(shoppingQuantityAndItems.get(i).get(1));
    System.out.println("Item: "
            + shoppingQuantityAndItems.get(i).get(1));
    label.addView(items);

    price = new EditText(this);
    price.setId(i);
    price.setInputType(InputType.TYPE_CLASS_NUMBER
            | InputType.TYPE_NUMBER_FLAG_DECIMAL);
    price.setText("");
    label.addView(price);
    updatePrice(price.getId());

    CheckBox ch = new CheckBox(this);
    ch.setChecked(false);
    label.addView(ch);

    table.addView(label);
} 
```

因为我希望每个不同的价格`EditText`字段在用户输入它们时具有不同的值，所以我使用它们的唯一 ID 调用一个方法：

```
public void updatePrice(int id){
    updatedPrice = (EditText) price.findViewById(id);
    updatedPrice.addTextChangedListener(new TextWatcher() {

        private String current = "";

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (!s.toString().equals(current)) {
                updatedPrice.removeTextChangedListener(this);
                String cleanString = s.toString().replaceAll("[£,.]", "");
                double parsed = Double.parseDouble(cleanString);           
                String formated = NumberFormat.getCurrencyInstance()
                        .format((parsed/100));          
                current = formated;
                updatedPrice.setText(formated);
                updatedPrice.setSelection(formated.length());
                updatedPrice.addTextChangedListener(this);
            }
        } 
```

我只是想知道是否有人可以告诉我如何确保当我在这些文本字段中输入一个数字时，只有那个值会改变，而其他值不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:32:32.033

您使用了错误的`EditText`小部件。

`updatedPrice`大概是您班级的数据成员。这不是一个好主意，因为您没有这些`EditText`小部件之一。

此外，您`onTextChanged()`假设`updatedPrice`将指向正确的`EditText`小部件 - 用户碰巧正在输入的小部件 - 从统计上讲，这不太可能。

假设其余代码实际上是您想要的，那么您需要更改：

```
updatedPrice = (EditText) price.findViewById(id); 
```

成为：

```
final EditText updatedPrice = (EditText) price.findViewById(id); 
```

这将导致您的`TextWatcher`匿名内部类使用`updatedPrice`您在调用时检索到的，而不是您在类的数据成员中拥有的`updatePrice()`一些随机数。`EditText`

或者，你可以自己`TextWatcher`做`findViewById()`。无论哪种方式都应该有效。

我建议您只删除`updatedPrice`数据成员并修复其余代码，因为您可能还有其他类似的错误。

# jsp - 如何将多个参数传递到显示中：Struts 2 中的列标记

> ID：15284524
> 
> 赞同：1
> 
> 时间：2013-03-08T00:22:56.723
> 
> 标签：jsp, struts2, tags, displaytag, param

我正在尝试将多个 (3) 参数从`display:column`标签传递给 URL。我正在尝试使用这样的代码。但对象作为`null`.

```
<display:column class="nowrap" url="/secure/Edit.action"
                value="Edit" >
      <s:param  name="file.no"   value="#file.no" />
  <s:param  name="file.id"   value="#file.id" />
  <s:param  name="file.channel"   value="#file.channel" />
</display:column> 
```

我也尝试过使用`%{file.no}`而不是`#`，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:16:32.603

尝试这个：

```
<s:url id="editUrl" namespace="/secure" action="Edit"><s:param  name="file.plsid"   value="%{file.plsid}" /><s:param  name="file.clientno"   value="%{file.clientno}" />
<s:param  name="file.inschannel"   value="%{file.inschannel}" /></s:url> 
<display:column class="nowrap" url="<s:property value="%{editUrl}"/>" value="Edit" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:27:16.690

我找到了我的问题的解决方案，我不必对我的操作类等进行任何 Java 代码更改/更改。

只是我已将 attr 添加到属性值并处理了它！

谢谢你的时间。，

# c# - Sitecore - 如何使用键名（不是 GUID）正确填充 Item.Fields 哈希表？

> ID：15284525
> 
> 赞同：0
> 
> 时间：2013-03-08T00:22:59.707
> 
> 标签：c#, .net, sitecore

这对于 Sitecore 来说有点奇怪......基本上我正在从 Content API 访问一个项目，但它没有使用基于字段文本的键填充 Item.Fields 哈希表（我想我会称之为字段名称），而是使用 GUID。

例如，这是我用来获取项目的一些代码：

```
var database = global::Sitecore.Configuration.Factory.GetDatabase("master");
var item = database.GetItem("/sitecore/content/Home");
item.Fields.ReadAll();  // edit, per recommendation... does not work
Sitecore.Data.Fields.Field f = item.Fields["SomeText"];
Assert.IsNotNull(f):  // This fails 
```

如果我设置断点并进行调试，我可以看到 Item.Fields 哈希表中有值（实际上是正确的值），但是键都是基于 GUID 而不是“字段名称”，因为大多数代码示例与使用这个 API 建议。

**编辑：** 经过仔细检查，DisplayName 和 Name 字段作为空字符串从 API 返回（注意这些在 Sitecore 中明确定义，因此仍然不确定问题是什么）。看起来这些*可能*与 GUID 一起用作哈希表的某种键。

**问题：** 我在这里做错了什么吗？我已经发布了数据模板和内容项。显然，正在建立连接，因为我从 API 获取结果，甚至是正确的值，而不是我期望用来引用数据值的键。

参考：

*   [http://sdn.sitecore.net/upload/sitecore6/content_api_cookbook-a4.pdf](http://sdn.sitecore.net/upload/sitecore6/content_api_cookbook-a4.pdf) - 查看第 28 页顶部的示例，他们访问“标题”字段。此外，请查看下面 4.1.1“如何访问系统字段”中的直接示例，其中他们使用静态助手和在私有静态构造函数中实例化的 GUID。这是访问“用户定义”字段的首选方法吗？

Sitecore 示例数据的屏幕截图（将 GUID 视为键）：

![在此处输入图像描述](../Images/9a91996ec80124b972531eb22e843267.png)

来自上述链接文档的代码示例：

访问“标题”字段：

```
Sitecore.Data.Database master = Sitecore.Configuration.Factory.GetDatabase("master");
Sitecore.Data.Items.Item home = master.GetItem("/sitecore/content/home");
Sitecore.Data.Fields.Field titleField = home.Fields["title"];
if(titleField!=null)
{
  home.Editing.BeginEdit();
  titleField.Value = "//TODO: replace with appropriate value";
  home.Editing.EndEdit();
} 
```

访问系统字段“ArchiveDate”：

```
Sitecore.Data.Database master = Sitecore.Configuration.Factory.GetDatabase("master");
Sitecore.Data.Items.Item sample = master.GetItem("/sitecore/content/home/sample");
Sitecore.Data.Fields.DateField archiveField =
sample.Fields[Sitecore.FieldIDs.ArchiveDate]; 
```

反编译 Sitecore.Kernel.dll 我们可以看到：

```
public static class FieldIDs
{
    // stripped down version

    /// <summary>The ID of the 'Archive date' field.</summary>
    public static ID ArchiveDate;

    static FieldIDs()
    {
        FieldIDs.ArchiveDate = new ID("{56C15C6D-FD5A-40CA-BB37-64CEEC6A9BD5}");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T06:56:03.193

如果我理解正确，您希望 Fields 集合返回该项目的**所有**可用字段，即使它们没有值。默认情况下，Sitecore 只会返回那些有值的字段。

`ReadAll()`您可以通过在访问字段集合之前调用该方法来解决此问题。所以在你的例子中：

```
item.Fields.ReadAll();
Sitecore.Data.Fields.Field f = item.Fields["SomeText"];
Assert.IsNotNull(f):  // This succeeds 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-24T12:45:57.733

我有相同症状的问题。对我来说，根本原因是出版问题。包含我的模板的文件夹未发布，尽管模板本身已发布。所以我可以在调试器中看到具有正确值和 id 的字段，但看不到名称。解决方案是确保我的模板的所有父级也都已发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:27:56.820

所以，我最终选择了我在问题中提到的路线（这是 Sitecore 内部使用的，@technophoria414 提到，Sitecore 开发人员最佳实践）。

基本上：

```
namespace MyProject.Core.Data.Sitecore.Fields
{
    public static class ContentItem
    {
        // stripped down version

        public static ID DESCRIPTION_TEXT;

        static ContentItem()
        {
            DESCRIPTION_TEXT= new ID("{56C15C6D-FD5A-40CA-BB37-64CEEC6A9BD5}");  // this will be some GUID out of Sitecore 
        }
    }
} 
```

用法将是这样的：

```
var query = string.Format("fast:/sitecore/content/HomePageItems//*[@ContentSlug='{0}']", input);
var item = Database.SelectSingleItem(query);
var descriptionText = item.Fields[ContentItem.DESCRIPTION_TEXT].Value; 
```

# php - 是否可以从另一个调用 php 脚本？

> ID：15284526
> 
> 赞同：0
> 
> 时间：2013-03-08T00:23:03.533
> 
> 标签：php

我对 php 很陌生，但我对 c# java 和 vb 有一些经验。我在我的网站上写了一个简单的联系表格，它会向我发送一封电子邮件以及向用户发送一封确认电子邮件。这工作得很好。现在我想将该人的姓名和电子邮件地址添加到数据库中以供将来邮寄。如果我要在 java 或 c# 中执行此操作，这两个活动将被拆分为 2 个或可能更多的类，以用于您可能需要通过电子邮件发送或添加到数据库的其他情况。这可能在php中还是我应该把它全部写在一个文件中？

谢谢！（编辑）这是我写的一些代码：

```
<?php

                    $to = "craigsmith866@gmail.com";
                    $subject = "New Contact";
                    $message = "A new contact named : " .  $_POST["fname"] . " " . $_POST["lname"] . "\n" . "has written you a message:" . "\n" . "\n" . $_POST["comment"];
                    $from = ($_POST["email"]);
                    mail($to,$subject,$message,"From" . " " . $_POST["email"]);
                    echo "<p> Thank you for your time helping me to build a better website!</p> <br/> <p> You will recieve an email confirmation shortly </p> <br/> <p> You will be redirected in 5 seconds</p>" ;
                    $return_message = "Thank you for your comments and suggestions. \n If you required further assistance I will be with you shortly. \n \n Yours, \n  \n Craig A. Smith  \n  \n Original Message: \n" . $_POST["comment"];
                    mail($from,"Thank You!",$return_message);
                ?> 
```

这是用户单击提交后运行的脚本。（头部还有一些验证，以确保所有字段都已填写）

如何将联系表单中的信息发送到将添加到数据库的下一个脚本？我可以很容易地把它全部写在一个脚本中，但这个网站是我第一个使用 php 的网站，也是我的主页，我将在我的简历上做广告。我现在正在找工作，因为我刚毕业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:26:42.720

您可以将所有内容写入一个或拆分到文件中，在大型项目中，为了获得良好的项目结构，最好拆分为文件，这种方法是过程编程，您也可以并且应该使用您提到的 Classes 编写，甚至使用 MVC 框架等作为**[CodeIgniter](http://ellislab.com/codeigniter)**（简单易学和很棒的文档非常强大），但还有更多。

**编辑：**

如果你想让它变得非常简单和程序化（假设你用 mysql 设置了一个数据库并清除了讨厌的**[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)**）：

```
mysql_connect("localhost","username","password");
mysql_select_db("database");
$sql = "INSERT INTO contacts (`id`, `fname`, `email`) VALUES ('', '".mysql_real_esacpe_string($_POST["fname"])."', '".mysql_real_esacpe_string($_GET["email"])."')";
mysql_query($sql); 
```

# iphone - MFMailComposer 挂起应用程序 - 没有崩溃报告 - 用户升级 iOS 后发生

> ID：15284527
> 
> 赞同：0
> 
> 时间：2013-03-08T00:23:06.707
> 
> 标签：iphone, ios, objective-c, ipad

**编辑：我最终联系了 Apple DTS。在我提供了受影响用户的堆栈截图后，DTS 决定我应该向 Apple BugReporter 提交错误。所以，在这一点上，我认为这是 MFMailComposer 的问题，但尚未解决。Apple 错误编号为 13602051**

我有一个在应用程序中一次又一次出现的错误。

一些升级他们的 iOS 版本的用户报告他们不能再在我的应用程序中使用电子邮件导出，该应用程序使用 MFMailComposer。应用程序冻结，并且不生成崩溃报告。

我的代码非常简单，我无法重现报告的错误，但现在许多用户表示这会在 iOS 更新后发生。这是代码：

```
// using ARC, so no reference counting
MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
controller.mailComposeDelegate = self;
@autoreleasepool {
  if (gpxFilePath) {
    NSData *gpx = [NSData dataWithContentsOfFile:gpxFilePath];
    [controller addAttachmentData:gpx mimeType:@"text/gpx" fileName:[self cleanFileName]];
    gpx = nil;
  }
}
[controller setSubject:subject];
[controller setMessageBody:body isHTML:YES];
[[MAP_APP_DELEGATE mainController] presentModalViewController:controller animated:YES]; 
```

调用此方法后，电子邮件视图出现，但随后无响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T18:43:08.280

This should solve your problem.

```
[[MAP_APP_DELEGATE mainController] presentModalViewController:controller animated:YES];

 controller = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:06:02.763

我正在使用 iOS 6.1 的下一个代码，它适用于我。

```
if ([MFMailComposeViewController canSendMail]) {
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc]init];
    mailer.mailComposeDelegate = self;
    [mailer setSubject:@"subject"];
    User *user = [user_array objectAtIndex:1];
    NSArray *toRecipients = [NSArray arrayWithObjects:@"mail address", nil];
    [mailer setToRecipients:toRecipients];
    NSArray *cc = [NSArray arrayWithObjects:@"mail address", nil];
    [mailer setCcRecipients:cc];
    NSDictionary *dic = [one array objectAtIndex:0];

    NSString *description = [dic objectForKey:@"Description"];

    NSString *emailBody = description;

    [mailer setMessageBody:emailBody isHTML:NO];
    [self presentViewController:mailer animated:YES completion:nil];
    [mailer release];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                    message:@"Your device doesn't support the composer sheet"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
} 
```

请记住，模拟器无法发送电子邮件，因此在这种情况下将显示警报视图。

注 1：presentModalViewController 在 iOS 6.0 中已弃用

注意 2：尝试发送没有数据的电子邮件以检查这是否是导致问题的原因

# linux - 使用 Linux 组和用户权限设置朋友共享空间

> ID：15284537
> 
> 赞同：0
> 
> 时间：2013-03-08T00:23:58.313
> 
> 标签：linux, permissions

我想通过以下方式设置一个 linux 共享空间：我希望一个用户可以调用 admin 来访问所有其他用户的主目录。我希望能够创建用户 A、B、C、D、E，并且除了主文件夹（和 /tmp/ 如果需要）之外，他们都不查看任何其他文件夹。
我不希望他们能够查看任何其他文件。我将使用它，这样我就可以为他们创建一个用户，他们可以登录查看/编辑他们的主文件夹中的文件，而不是其他任何东西（或将文件 scp 到其中）

我该怎么做呢？我的第一个想法是创建一个组并将它们全部放在该组中，但我不希望他们能够查看彼此的文件。我注意到 /home/* 中的文件夹只能由所有者读取、写入和执行：

```
[test2@XXX home]$ pwd
/home
[test2@XXX home]$ ll
drwx------  3 test2       test2        4096 Mar  7 18:54 test2 
```

那么这是足够的权限吗？
例如 /home/A/ 中的文件是

```
[test2@XXX~]$ pwd
/home/test2
[test2@XXX~]$ ll
total 4
drwxrwxr-x 2 test2 test2 4096 Mar  7 18:54 testdir
-rw-rw-r-- 1 test2 test2    0 Mar  7 18:54 testfile 
```

用户 B 不能正确写入这些文件吗？如果是这样，我需要做什么才能让用户管理员能够查看所有这些 /home/ 文件夹但没有其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:25:14.353

首先，您需要一个用户“Admin”，他将对用户 A、B、C、D、E 的所有主目录拥有 rwx 权限。这里我假设您的“Admin”用户不是**root**。

您可以参考此[链接](https://superuser.com/questions/532332/how-to-give-user-rwx-access-to-another-user)来实现此功能。

现在您不希望任何用户 A、B、C、D、E 看到彼此的文件，但是您的主目录 ( **/home/user** ) 中存在一个**公共**文件夹，用于与其他用户共享文件。如果其他用户想要访问此公用文件夹，则应在主目录上设置世界的执行位。

 **如果您不需要允许其他人访问您的主文件夹（其他人或用户，例如网络服务器的**www-data**），您可以使用**chmod o-rwx "$HOME"**（从 " other"，相当于**chmod 750 "$HOME"**因为默认权限是 750)。否则，您也应该更改 umask 设置，以防止新创建的文件默认获得世界的读取权限。

对于系统范围的配置，编辑**/etc/profile**；可以在**~/.profile**中配置每个用户的设置。我更喜欢对所有用户使用相同的策略，因此我将编辑**/etc/profile**文件并附加以下行：

> 掩码 027

您需要重新登录才能应用这些更改，除非您在 shell 中。在这种情况下，您可以在 shell中运行**umask 027 。**

现在要修复现有权限，您需要删除其他的读/写/执行权限：

> chmod -R o-rwx ~

现在，如果您决定与所有人共享**~/Public**文件夹，请运行以下命令：

*   **chmod o+x ~ -**允许所有人进入目录（**x**），但不能获得目录列表（不应该添加**r ）**

*   **查找 ~/Public -type f -exec chmod o+r {} \;** - 允许所有人阅读**~/Public中的文件**

*   **查找 ~/Public -type d -exec chmod o+rx {} \;** - 允许每个人进入目录并列出他们的内容**

# mysql - 求和订单总数Mysql

> ID：15284539
> 
> 赞同：0
> 
> 时间：2013-03-08T00:23:58.597
> 
> 标签：mysql

我对 Mysql 相当陌生，需要帮助尝试组合两个 mysql 查询，这些查询为订单总数中的每个“storeid”提供“总数”。我目前正在使用两个查询来获得结果：

```
SELECT storeid, storenum, name  FROM store ORDER BY storeid DESC

SELECT SUM((1+0.07125)*qty*discprice) as total FROM items WHERE orderid IN (SELECT orderid      FROM orders WHERE store = '".$row['storeid']."' AND date >= '2012-01-01' AND date < '2013-01-01') 
```

我正在运行一个while循环并使用“storeid”运行第二个查询。但是，我知道我可以做到这一点，这是一个查询并按“storeid”分组，并为所有商店合并创建一个总数。但我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:43:27.780

诀窍是连接三个表，然后在`items`表上使用聚合函数。

```
SELECT stores.storeid, stores.storenum, stores.name, SUM((1+0.07125)*items.qty*items.discprice) as total 
FROM stores
LEFT JOIN orders ON orders.storeid=stores.storeid AND orders.date>='2012-01-01' AND orders.date<'2013-01-01' 
LEFT JOIN items  ON items.orderid=orders.orderid
GROUP BY stores.storeid, stores.storenum, stores.name 
```

这是做什么的：

它将从`stores`表中选择每个商店，并汇总该商店中的订单。我选择了 LEFT JOIN 而不是直接 JOIN，因此在该时间跨度内没有任何顺序的存储仍然会显示为 NULL。

PS 我没有你的数据库架构的副本，上面的 SQL 查询实际上可能无法按预期工作 - 它只是应该为你指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:44:25.980

```
SELECT s.storeid, s.storenum, s.name
       SUM((1+0.07125)*i.qty*i.discprice) AS total
FROM items AS i
LEFT JOIN orders AS o 
    ON i.orderid=o.orderid
LEFT JOIN stores AS s 
    ON o.store=s.storeid
WHERE o.date >= '2012-01-01'
  AND o.date < '2013-01-01'
GROUP BY s.storeid, s.storenum, s.name; 
```

# java - How to get more the one value of the same key using Java

> ID：15284544
> 
> 赞同：0
> 
> 时间：2013-03-08T00:24:17.463
> 
> 标签：java, json

I'm receiving an JSON String in my Server which has only two parameters: name and number. Find example below:

```
{"name":"outlet.jpg","numbar":"2"},{"name":"image.jpg","number":"3"}, {"name":"testing.jpg","number":"1"} 
```

I'm trying to unpack this values in a String Array. How can I do it?

This is what I have so far:

```
JSONObject jsonObject;

        try {
            jsonObject = new JSONObject(jsonString.substring(1, jsonString.length()-1));
            String name = jsonObject.getString("name");
            String number = jsonObject.getString("number");
            System.out.println("nome: " + name + " number: " + number);
        } catch (JSONException e) { 
            e.printStackTrace();
        } 
```

There's no getString() in jsonObject which returns an Array. This example is only getting the first element of the JSON String.. How can I receive an String Array for each key of JSON String?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T00:37:25.203

You are using the wrong type. What you want is a [JSONArray](http://www.json.org/javadoc/org/json/JSONArray.html#JSONArray%28java.lang.String%29).

This JSON:

```
[{"name":"outlet.jpg","number":"2"},{"name":"image.jpg","number":"3"}, {"name":"testing.jpg","number":"1"}] 
```

And this code:

```
JSONArray json = new JSONArray(jsonString);
for(int index = 0; index < json.length(); index++) {
    JSONObject jsonObject = json.getJSONObject(index);
    String name = jsonObject.getString("name");
    String number = jsonObject.getString("number");
    System.out.println("name: " + name + " number: " + number);
} 
```

Should produce this output:

```
name: outlet.jpg number: 2
name: image.jpg number: 3
name: testing.jpg number: 1 
```

# security - 授予对 S3 存储桶子集的 LIST 权限

> ID：15284546
> 
> 赞同：0
> 
> 时间：2013-03-08T00:24:22.577
> 
> 标签：security, rest, amazon-web-services, amazon-s3

我在 S3 中有一个存储桶，其中包含许多用户的文件，如下所示：

```
mybucket
  /user1/file1.jpg
  /user1/file2.jpg
  /user2/doc1.jpg
  /user2/doc2.jpg 
```

我正在使用 S3 REST API 向用户授予 POST 到他们在 S3 存储桶中的子文件夹的权限。发布的路径（例如，“user1/”）包含在签名中，因此用户无法发布到其他用户的子文件夹。

我想使用 S3 REST API 来授予用户权限以获取其子文件夹中的文件内容。但是，根据此处的文档：

[http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html)

URL 可以过滤存储桶的内容，如下所示：

```
GET /?prefix=user1 HTTP/1.1 
```

但是要签名的字符串没有前缀：

```
GET\n
\n
\n
Tue, 27 Mar 2007 19:42:41 +0000\n
/bucket/ 
```

这意味着 user1 可以修改 URL 并查看其他 user2 的子目录内容（！？！？）。

有没有办法限制列出的文件内容，还是我必须为每个用户创建一个单独的存储桶？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:38:12.113

您可以使用不同 IAM 用户的凭证对 GET URL 进行签名，每个用户都拥有您希望他们看到的路径的权限。

# java - 用Java反转数组的程序

> ID：15284549
> 
> 赞同：0
> 
> 时间：2013-03-08T00:24:38.987
> 
> 标签：java, arrays

我正在尝试使用下面显示的代码反转数组，但没有成功。该程序的输出是`7,0,0`而不是`7,1,2`它应该是。

代码：

```
import java.util.Arrays;

public class ReverseArray
{
    public static void main(String[] args)
    {
        int[] data = {1, 2, 7};
        int[] dataR = reverseArray(data);
        System.out.println("Original Array: " + Arrays.toString(data));
        System.out.println("Reverse Array: " +  Arrays.toString(dataR));
    }
    public static int[] reverseArray(int[] data)
    {
        int[] reversedData = new int[data.length];
        int i;
        for(i=0; i < data.length; i++);
        {
            reversedData[i] = data[(data.length - i -1)];
        }
        return reversedData;
    }
} 
```

感谢所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T00:29:46.500

这是你的问题：

```
for(i=0; i < data.length; i++); 
```

删除`;`. 你写它的方式，首先有一个循环，计数`i`到`data.length`，然后是一个试图访问`reversedData[data.length]`一次的范围块。那不会飞

有趣的是：最初，可能我们都没有看到问题所在；在 IDE 中使用格式化规则会很快告诉你哪里出了问题：你会发现你的代码在按照你习惯的规则格式化时看起来不像它应该的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:29:54.723

您应该使用临时变量来交换数组中的值。例如像这样：

```
for(int i = 0; i < validData.length / 2; i++)
{
    int temp = validData[i];
    validData[i] = validData[validData.length - i - 1];
    validData[validData.length - i - 1] = temp;
} 
```

或者

```
ArrayUtils.reverse(int[] array) 
```

都在[这个](https://stackoverflow.com/questions/2137755/how-do-i-reverse-an-int-array-in-java)问题中描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:44:16.933

好球，G.巴赫。我也不确定你问题的第一部分。看起来原始数组是`1, 2, 7`. 不是相反`7, 2, 1`吗`7, 1, 2`？

也就是说，您似乎`data.length`每次都访问可能会减慢速度。我可能会因此创建一个局部变量：

```
public static int[] reverseArray(int[] data)
{
    int arr_length = data.length
    int[] reversedData = new int[arr_length];
    int j = arr_length - 1;
    for(int i=0; i < arr_length; i++);
    {
        reversedData[i] = data[j--];
    }
    return reversedData;
} 
```

请注意在被访问后如何`j`自动递减，保持整洁。此外，我们将数组的长度保存到了一个局部变量中，因此访问起来更加高效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-15T06:24:35.117

```
import java.io.*;
import java.util.*;
import java.text.*;
import java.math.*;
import java.util.regex.*;

public class Solution {

    public static void main(String[] args) {
        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */
        Scanner in=new Scanner(System.in);
        int size=in.nextInt();
        int array[]=new int[size];

        for(int i=0;i<size;i++){
            array[i]=in.nextInt();
        }
        for(int i=size-1;i>=0;i--)
        {
            System.out.print(array[i]+" ");
        }

        }

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-06T05:01:49.153

```
import java.io.*;
import java.util.*;
import java.text.*;
import java.math.*;
import java.util.regex.*;

public class ReverseArray 
{

    public static void main(String[] args) 
    {

        System.out.println("Enter the array Size");
        Scanner in=new Scanner(System.in);
        int size=in.nextInt();
        System.out.println("Enter the array Elements");
        int array[]=new int[size];

        for(int i=0;i<size;i++){
            array[i]=in.nextInt();
        }
        System.out.println("reverse of entered are given below for Size : " +size );
        for(int i=size-1;i>=0;i--)
        {
            System.out.print(array[i]+" ");
        }

        }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-24T11:57:50.160

**输入：**

输入要反转的值的数量 7

1 2 3 4 6 7 8

**输出：** 反转数组：[8, 2, 3, 4, 6, 7, 1]

反转数组：[8, 7, 3, 4, 6, 2, 1]

反转数组：[8, 7, 6, 4, 3, 2, 1]

**编码：**

```
public class Test{

    public static void main(String[] args){

         System.out.println("Enter the number of values to reverse");

         Scanner sc = new Scanner(System.in);

         int n  = sc.nextInt();
         int num[] = new int[n];    
         for(int i=0; i < num.length; i++) 
             num[i] = sc.nextInt();

         reverseArray(num, n-1);

    }

    private static void reverseArray(int num[], int end) {
        int start = 0;
        int temp;

        while(start < end) {
            temp = num[start];
            num[start] = num[end];
            num[end] = temp;
            start++;
            end--;
            System.out.println("Reversed Array :"+ Arrays.toString(num));

        }

    }

} 
```

# python - python递归函数未初始化默认参数值

> ID：15284552
> 
> 赞同：0
> 
> 时间：2013-03-08T00:24:43.090
> 
> 标签：python

所以我有一个辅助函数，它应该打印出二叉树的内部节点和叶子（未排序）。因为我在上课，所以我不会提供代码，但我可以告诉你，我已经编写了代码，它适用于我投入其中的第一个节点：

```
def helper(root, internals=[], leaves=[]):
    #function code here...
>>> helper(node)
    ([13, 14, 27], [10, 11, 12, 17, 19]) 
```

据我所知，这是正确的输出。*但是，当我在另一个*节点上再次调用相同的函数时，输出将被覆盖为前一个：

```
>>> helper(pen)
    ([13, 14, 27, 6, 8, 14], [10, 11, 12, 17, 19, 2, 4, 10, 12]) 
```

这是不正确的，因为树`pen`没有元素 13、14、27 或 10、11、12、17、19。有人可以解释这里发生了什么吗？我必须针对不同的情况测试我的功能，而无需每次都重新启动 shell。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T00:28:02.990

*当遇到函数定义时*，即 Python 看到该行时，会评估默认参数`def`。然后它们被绑定到函数本身。

使用可变默认参数，绑定到函数的默认参数可能会更改，这会导致一些相当令人惊讶的结果。

通常的建议：`None`用作默认值，并根据需要创建实际的默认值：

```
def foo(bar=None):
    if bar is None:
        bar = []
    ... 
```

# javascript - 如何从 grunt 任务中运行 grunt 任务？

> ID：15284556
> 
> 赞同：50
> 
> 时间：2013-03-08T00:25:02.947
> 
> 标签：javascript, node.js, gruntjs

我创建了一个新的 grunt 任务，在其中我想使用 grunt-contrib-concat 将几个文件连接在一起。

我浏览了文档，但没有发现任何暗示能够做到这一点的东西。这似乎是一个微不足道的用例，所以我可能只是在看一些东西。

更新1：

我还希望能够从我的自定义任务中配置此任务。

例如，我在自定义任务中创建了一个文件列表。获得该列表后，我想将它们传递给 concat 任务。我怎样才能做到这一点？

我希望能够做这样的事情。

```
grunt.task.run('concat', { src: ['file1','file2'], dest: 'out.js'}) 
```

更新 2：

为了实现我想要的，我必须手动配置 grunt 任务。这是一个例子，向我展示了我想要的东西。

[https://github.com/gruntjs/grunt-contrib/issues/118#issuecomment-8482130](https://github.com/gruntjs/grunt-contrib/issues/118#issuecomment-8482130)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-08T17:47:53.213

这是一个在任务中手动配置任务然后运行它的示例。

[https://github.com/gruntjs/grunt-contrib/issues/118#issuecomment-8482130](https://github.com/gruntjs/grunt-contrib/issues/118#issuecomment-8482130)

```
 grunt.registerMultiTask('multicss', 'Minify CSS files in a folder', function() {
        var count = 0;
        grunt.file.expandFiles(this.data).forEach(function(file) {
            var property = 'mincss.css'+count+'.files';
            var value = {};
            value[file] = file;
            grunt.config(property, value);
            grunt.log.writeln("Minifying CSS "+file);
            count++;
        });
        grunt.task.run('mincss');
    }); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-08T00:36:28.803

来自[https://github.com/gruntjs/grunt/wiki/Creating-tasks](https://github.com/gruntjs/grunt/wiki/Creating-tasks)

```
grunt.registerTask('foo', 'My "foo" task.', function() {
  // Enqueue "bar" and "baz" tasks, to run after "foo" finishes, in-order.
  grunt.task.run('bar', 'baz');
  // Or:
  grunt.task.run(['bar', 'baz']);
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-18T10:42:09.310

感谢 Arron 为我们指出了他自己问题的正确方向。grunt.config 是上面示例中的关键。此任务将覆盖 browserify 任务的 src 属性

任务定义：

```
 grunt.registerTask('tests', function (spec) {

    if (spec) {
      grunt.config('browserify.tests.src', spec);
    }

    grunt.task.run(['jshint', 'browserify:tests', 'jasmine']);

  }); 
```

任务调用：

```
grunt tests 
```

或者

```
grunt tests:somewhere/specPath.js 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T17:45:50.527

如果您觉得懒惰，我最终发布了一个 npm 模块，该模块将您的任务中的配置转发到您要运行的子任务中：

[https://www.npmjs.org/package/extend-grunt-plugin](https://www.npmjs.org/package/extend-grunt-plugin)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-26T11:38:51.923

# 我们如何从一个任务中多次运行相同的任务，例如。

```
grunt.registerTask('asyncfoo', 'My "asyncfoo" task.', function() {

  var done = this.async();
  // Run some sync stuff.
  grunt.log.writeln('Processing task...');
  var versions = Object.keys(versionConf);

  setTimeout(function() {
    versions.forEach(function(version) {
      console.info(version);
      //process.env.version = version;
      grunt.config('port', versionConf[version].port);
      grunt.task.run('test-perf');
    })
    done();
  }, 1000);

}); 
```

我想每次根据版本运行带有差异端口的 test-perf。

# c++ - glGetString 在 Nvidia 上返回空指针，但在 AMD 上不返回

> ID：15284560
> 
> 赞同：1
> 
> 时间：2013-03-08T00:25:23.970
> 
> 标签：c++, opengl

我在 Nvidia 卡上遇到 glGetString 问题。我有一个适当的上下文设置，并且在三台带有 AMD 卡的独立 PC 上一切正常。我在使用 SOIL 进行图像加载时遇到了问题。我的应用程序在两个 Nvidia 测试系统上的 SOIL 中的 strstr 调用出现了段错误，但不是 AMD 系统。

我发现当 SOIL 检查扩展时，glGetString 在 Nvidia 系统上给出了一个指向 strstr 的空指针。我的应用程序以 GL3.3 卡为目标，因此我修改了 SOIL 代码以使用未弃用的 glGetIntegerv 和 glGetStringi 枚举扩展方法。现在一切正常。

我的问题已经解决了，但我很困惑为什么它首先是一个问题。只是 Nvidia 和 AMD 执行弃用的方式有所不同吗？

# c++ - 何时删除缓冲区对象？

> ID：15284561
> 
> 赞同：2
> 
> 时间：2013-03-08T00:25:35.693
> 
> 标签：c++, opengl, vbo

我从[这个问题](https://stackoverflow.com/questions/9113154/proper-way-to-delete-glsl-shader)中了解到，一旦程序链接，着色器对象就可以被分离和删除。

缓冲区对象的行为是否与 VAO 相似？我可以在初始化 VAO 后删除它们（在`Scene::Scene()`下面的末尾），还是应该让我的代码保持原样，每次我想使用它们时绑定它们？

场景.h：

```
class Scene
{
public:
    void render();
    Scene();
    ~Scene();
private:
    GLuint vertexArray;
    GLuint vertexBuffer;
    GLuint indexBuffer;
    GLuint program;
}; 
```

场景.cpp：

```
#include <GL/glew.h>
#include <stdio.h>

#include "Scene.h"

namespace
{
    void printProgramInfoLog(GLuint program);
    void printShaderInfoLog(GLuint shader);
}

void Scene::render()
{
    glBindVertexArray(vertexArray);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glUseProgram(program);

    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, 0);

    glUseProgram(0);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    glBindVertexArray(0);
}

Scene::Scene()
{
    const float vertices[] =
    {
        -1.0f, -1.0f, 0.0f,
         1.0f, -1.0f, 0.0f,
         1.0f,  1.0f, 0.0f,
        -1.0f,  1.0f, 0.0f,
    };

    const unsigned short indices[] =
    {
        0,
        1,
        2,
        0,
        2,
        3,
    };

    const char* vertexShaderSource[] =
    {
        "#version 330\n",
        "\n",
        "in vec3 position;\n",
        "\n",
        "out vec2 fspos;",
        "\n",
        "void main()\n",
        "{\n",
        "    gl_Position = vec4(position, 1.0);\n",
            "fspos = vec2(position.x, position.y);\n",
        "}\n",
    };

    const char* fragmentShaderSource[] =
    {
        "#version 330\n",
        "\n",
        "precision highp float;\n",
        "\n",
        "in vec2 fspos;",
        "\n",
        "out vec4 color;\n",
        "\n",
        "void main()\n",
        "{\n",
        "    color = vec4(abs(fspos.x), abs(fspos.y), 0.0, 1.0);\n",
        "}\n",
    };

    //-------------------------------
    // Create and bind vertex array.
    //-------------------------------
    glGenVertexArrays(1, &vertexArray);
    glBindVertexArray(vertexArray);

    //--------------------------------------
    // Create, bind and fill vertex buffer.
    //--------------------------------------
    glGenBuffers(1, &vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    //-------------------------------------
    // Create, bind and fill index buffer.
    //-------------------------------------
    glGenBuffers(1, &indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);

    //-----------------
    // Create program.
    //-----------------
    program = glCreateProgram();

    //----------------------------------
    // Create and attach vertex shader.
    //----------------------------------
    GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(vertexShader, sizeof(vertexShaderSource) / sizeof(vertexShaderSource[0]), vertexShaderSource, 0);
    glCompileShader(vertexShader);
    printShaderInfoLog(vertexShader);
    glAttachShader(program, vertexShader);

    //------------------------------------
    // Create and attach fragment shader.
    //------------------------------------
    GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(fragmentShader, sizeof(fragmentShaderSource) / sizeof(fragmentShaderSource[0]), fragmentShaderSource, 0);
    glCompileShader(fragmentShader);
    printShaderInfoLog(fragmentShader);
    glAttachShader(program, fragmentShader);

    //---------------
    // Link program.
    //---------------
    glLinkProgram(program);
    printProgramInfoLog(program);

    //-----------------------
    // Set up shader inputs.
    //-----------------------
    GLint position = glGetAttribLocation(program, "position");
    glEnableVertexAttribArray(position);
    glVertexAttribPointer(position, 3, GL_FLOAT, GL_FALSE, 0, 0);

    //------------------------------------
    // Detach and delete fragment shader.
    //------------------------------------
    glDetachShader(program, fragmentShader);
    glDeleteShader(fragmentShader);

    //----------------------------------
    // Detach and delete vertex shader.
    //----------------------------------
    glDetachShader(program, vertexShader);
    glDeleteShader(vertexShader);

    //----------------------
    // Unbind vertex array.
    //----------------------
    glBindVertexArray(0);

    //!!!!!!!!!!!!!!!!!!!
    // Unbinding and deleting the buffers here and only binding the VAO in
    // render() works just fine, but is it okay to do this or should I leave
    // it as is?
    //!!!!!!!!!!!!!!!!!!!
}

Scene::~Scene()
{
    glDeleteProgram(program);
    glDeleteBuffers(1, &indexBuffer);
    glDeleteBuffers(1, &vertexBuffer);
    glDeleteVertexArrays(1, &vertexArray);
}

namespace
{
    void printProgramInfoLog(GLuint program)
    {
        int logLength;
        glGetProgramiv(program, GL_INFO_LOG_LENGTH, &logLength);
        if (logLength > 0)
        {
            char* log = new char[logLength];
            glGetProgramInfoLog(program, logLength, 0, log);
            fprintf(stderr, "%s", log);
            delete[] log;
        }
    }

    void printShaderInfoLog(GLuint shader)
    {
        int logLength;
        glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &logLength);
        if (logLength > 0)
        {
            char* log = new char[logLength];
            glGetShaderInfoLog(shader, logLength, 0, log);
            fprintf(stderr, "%s", log);
            delete[] log;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:40:16.060

VAO 不*存储*数据。它们存储缓冲区对象绑定和顶点格式。缓冲区对象仍然是数据存储的持有者。

所以不，不要那样做。

# c++ - c++中的循环继承

> ID：15284564
> 
> 赞同：2
> 
> 时间：2013-03-08T00:26:02.570
> 
> 标签：c++, inheritance, virtual

我有三个类，我想在另一个类中使用它们中的每一个：

```
class Object
{
public:
    Object();
    ~Object();

protected:

   int x;
   int y;
private:
  Line l;
  Circle c;
}; 

class Line : public Object
{
public:
    Line ()
        {
           x = x+y;
         }
    ~Line ();

private:
}; 

class Circle : public Object
{
public:
    Circle()
        {
           x = x/y;
         }
    ~Circle();

private:
}; 
```

所以这里的问题是我在编译时收到一个错误，上面写着 base undefined，我尝试使用`#define`and `#ifdefine`，但它不起作用。

理想情况下，我想做的是让一个对象`main`调用，所有其他要使用的变量都将设置在那里，同时这个对象可能不同，因此它可能是 a`Line`或`Circle`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:37:19.507

你不可以做这个。编译器不可能做到这一点。

相反，您必须拥有指向对象的指针，而不是它们的直接实例。

然后对类进行所谓的“前向”声明：

```
class Circle;
class Line;
class Object
{
    Line* line;
    Circle* circle;
} 
```

当然，最好使用智能指针而不是原始指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T00:40:38.130

考虑一下：

1.  每个`Object`包含一个`Line`;
2.  每个`Line`都是一个`Object`；
3.  因此，每个都`Object`包含一个`Object`;
4.  当然，`Object`它又包含一个`Object`;
5.  其中包含一个`Object`... 等等，直到你累了。

这是建立**无限递归数据结构**的尝试，您可能会明白为什么不允许这样做。

相反，使用[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)和（智能）指针（`unique_ptr<>`似乎是这里的最佳选择）来打破相互依赖并允许终止递归结构（指针可以为空）：

```
#include <memory>

// Forward declarations
class Line;    
class Circle;

class Object
{
public:
    Object();
    ~Object();
protected:
   int x;
   int y;
private:
  std::unique_ptr<Line> l;
  std::unique_ptr<Circle> c;
};

class Line : public Object
{
public:
    Line ()
        {
           x = x+y;
         }
    ~Line ();
};

class Circle : public Object
{
public:
    Circle()
        {
           x = x/y;
         }
    ~Circle();
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T01:06:25.567

我的猜测是，您希望任何对象都是原始图形对象，例如线或圆，或者是复合对象，即。包含其他几个对象的对象。

您实际上几乎就在那里：您应该做的是：

*   从 Object中删除`Object`子类实例（请参阅其他答案，因为这是一个设计错误），

*   创建第四个类继承`Object`：

    ```
    class Compound : public Object {
      public:
        Compound(){
        }
      private:
       Line line;
       Circle circle;
    }; 
    ```

现在，如果您想以通用方式操作对象列表，这很容易。您只需要在 上定义临时虚拟方法`Object`，并在子类中覆盖它们（例如`draw`方法）。

有关该概念的更多解释，请参阅[本教程](http://www.cplusplus.com/doc/tutorial/polymorphism/)关于多态性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T00:41:24.897

你不能做你刚才描述的事情。基类不得包含派生自它的类。当一个类派生时，它包含基类的所有组件。因此，在您的示例中，对象包含一条线和一个圆。圆包含包含圆和线的对象 - 你可以看到我们可以像 1/3 中的 3 的数量一样...

您可以拥有指向 Line 或 Circel 类对象的引用或指针，例如

```
class Line;
class Circle 
```

您需要在 Object 类之前使用上述行 - 它告诉编译器“有一个类 Line 和一个类 Circle。我稍后会谈到它们实际包含的内容......”

```
class Object
{
public:
    Object();
    ~Object();

protected:

   int x;
   int y;
private:
  Line* l;
  Circle* c;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T00:38:56.950

为了使成员变量具有给定类型（如“ `Circle c`”），类定义必须已经出现在翻译单元中。所以，在这种情况下，你问的是不可能的。

然而，一个指向对象的指针只需要编译器知道一个符号（例如'Circle'）代表一个类。您可以通过[前向类声明](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)来做到这一点。所以一个选项是

```
class Circle;
class Line;

class Object {
public:
    ...
    Circle *c;
    Line *l;
}

class Line: public Object { ... }

class Circle: public Object { ... } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T00:40:10.340

在您的代码中，一个`Object`对象包含一个`Circle`子对象（数据成员），该子对象又包含一个`Object`子对象（基类子对象），它......

这会产生*无限大小*，这是相当不好的。

但是，解决方案非常简单：不要从`Object`.

# neo4j - 密码查询未找到节点

> ID：15284565
> 
> 赞同：0
> 
> 时间：2013-03-08T00:26:17.640
> 
> 标签：neo4j, cypher

我在这样的 Java 项目中创建了嵌入式 Neo4J：

```
graphDb = new GraphDatabaseFactory()
            .newEmbeddedDatabaseBuilder("db")
            .setConfig(GraphDatabaseSettings.node_keys_indexable, "movieId, userId, rating, genre")
            .setConfig(GraphDatabaseSettings.node_auto_indexing, "true")
            .newGraphDatabase(); 
```

我已经验证了索引已创建，并且它具有我期望的名称：

```
Index<Node> index = graphDb.index().forNodes("movieId");
System.out.println("::: Verify Index Name :::");
System.out.println(index.getName()); 
```

控制台显示：

```
::: Verify Index Name :::
movieId 
```

我可以使用 Java API 找到节点

```
ReadableIndex<Node> graphDbIndex = graphDb.index().getNodeAutoIndexer().getAutoIndex();
Node movie = graphDbIndex.get("movieId", 2).getSingle();
System.out.println("::: Get with Java API Result :::");
System.out.println("MovieId: " + movie.getProperty("movieId"));
System.out.println("Title: " + movie.getProperty("title")) 
```

控制台显示

```
::: Get with Java API Result :::
MovieId: 2
Title: Jumanji (1995) 
```

但是当我尝试使用 Cypher 时，这就是结果

```
ExecutionEngine engine = new ExecutionEngine(graphDb);
ExecutionResult result = engine.execute("start movie=node:movieId(movieId='2') return movie, movie.title");
System.out.println("::: get with Cypher Result :::");
System.out.println(result); 
```

控制台显示

```
::: get with Cypher Result :::
+---------------------+
| movie | movie.title |
+---------------------+
+---------------------+
0 row
8 ms 
```

我做错了什么还是我错过了一些明显的事情？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:52:17.007

id 是字符串吗？尝试使用 lucene 索引语法：

```
start movie=node:node_auto_index('movieId:2') 
return movie, movie.title 
```

# java - 扩展 java.util.Random 以控制数字的生成

> ID：15284566
> 
> 赞同：2
> 
> 时间：2013-03-08T00:26:27.457
> 
> 标签：java, random

您好，我有以下任务：

首先，我得到这段代码，它使用一种方法生成随机数 100 次：

```
public class Q3 {
    public static void printDiceRolls(Random randGenerator) {

        for (int i = 0; i < 100; i++) {
            System.out.println(randGenerator.nextInt(6) + 1);
        }
    }

    public static void main(String[] args) {
        Random man = new Random();
        printDiceRolls(man);
    }
} 
```

其次，我被要求创建一个`LoadedDice`扩展类的`Random`类：

```
public class LoadedDice extends Random {
    // instance variables - replace the example below with your own
    public int nextInt(int num) {
        // code right here
        return 3;
    }
} 
```

然后我被要求覆盖`public int nextInt ( int num )`并执行以下操作

> 重写公共 int nextInt(int num) 方法，使得新方法有 50% 的机会总是返回可能的最大数字（即 num-1），并且有 50% 的机会返回 Random 的 nextInt 方法将返回

我不太明白在这种情况下我的重写方法应该做什么。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:36:55.427

使用另一个 Random 实例给您 50% 的机会（例如 nextInt(100) >= 50），然后基于此返回一个常数或一个真正的随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:38:31.393

我想这样做的一种方法是使用（另一种？）具有均匀分布的随机数生成器并将其设置为返回 0 或 1。0/1 将是您做出决定的 50%....返回 super.nextInt 或最大数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:35:07.900

对我来说，该函数似乎`nextInt(int)`提供了一个介于 1 和输入之间的数字。在根`Random`类中，此函数在该范围内找到一个随机数。他们想要你做的是改变它，以便一半时间它会返回范围内的随机数，但另一半时间它会给出最大数字。

在他们给出的示例中，您正在掷骰子，因此范围是 1-6。通常，`nextInt`会找到一个介于 1 和 6 之间的随机数。但是您的新函数只会在一半时间内完成。另一半时间，它将返回 6。

我对如何实现它有一个想法，但是走那么远似乎是作弊。^^;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T00:41:24.560

```
if(super.nextBoolean())
    return num-1;
return super.nextInt(num); 
```

如果`num<Integer.MAX/2`，我们可以

```
int x = super.nextInt(num*2);
return Math.min(x, num-1); 
```

# c++ - “队列”允许的底层容器

> ID：15284567
> 
> 赞同：0
> 
> 时间：2013-03-08T00:26:38.063
> 
> 标签：c++

队列允许的底层容器是什么？

在以下语法中：

```
queue<int, list<int> > q; 
```

列表是唯一允许的吗？（在列表、双端队列、向量中）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:28:30.803

[C++11 N3485](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf) § 23.6.3.1/1 说：

> 任何支持操作 front()、back()、push_back() 和 pop_front() 的序列容器都可以用于实例化队列。特别是，可以使用 list (23.3.5) 和 deque (23.3.3)。

所以只要它是一个序列容器并且有合适的成员函数，它就可以工作。但是，操作被委托给底层容器，所以当有性能要求时应该记住这一点。

# android - ImageButton 颜色不改变 onPressed(), onFocus()

> ID：15284575
> 
> 赞同：1
> 
> 时间：2013-03-08T00:28:02.730
> 
> 标签：android, imagebutton, android-ui, android-drawable

我想在按下、聚焦和单击时更改按钮颜色，但我想我一定做错了什么，我的代码不起作用。有人请指教吗？谢谢！

这是我`soundbtn.xml`的可绘制对象：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
        android:drawable="@drawable/sound_onpress_mdp" /> <!-- pressed -->
    <item android:state_focused="true"
        android:drawable="@drawable/sound_onpress_mdp" /> <!-- focused -->
    <item android:drawable="@drawable/sound" /> <!-- default -->
</selector> 
```

然后我`ImageButton`在布局中添加了背景：

```
<ImageButton
    android:id="@+id/imageSound"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/soundbtn"
    android:contentDescription="@string/image_desc"
    android:src="@drawable/sound" /> 
```

这是我的 Java 代码：

```
private ImageButton btnSound;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_new_game);

    btnSound =(ImageButton) findViewById(R.id.imageSound);
    btnSound.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            btnSound.setBackgroundResource(R.drawable.soundbtn);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:31:47.493

尝试删除

```
 android:src="@drawable/sound" 
```

和

```
 btnSound.setBackgroundResource(R.drawable.soundbtn); 
```

您只需

```
 android:background="@drawable/soundbtn" 
```

因为它调用具有目标可绘制对象的项目，如“按下”或“聚焦”。

# javascript - 这里有什么问题？复选框不起作用

> ID：15284588
> 
> 赞同：0
> 
> 时间：2013-03-08T00:29:11.943
> 
> 标签：javascript, forms, checkbox, hidden

我正在尝试制作复选框来隐藏/显示段落，但由于某种原因，当我单击复选框时，段落不会出现，这是 JavaScript 代码：

```
function showPara()
{
    document.getElementById("first").style.visibility=(document.formex.firstpara.checked) ? "block" : "hidden";
    document.getElementById("second").style.visibility=(document.formex.secondpara.checked) ? "block" : "hidden";
    document.getElementById("third").style.visibility=(document.formex.thirdpara.checked) ? "block" : "hidden";
    return true:
} 
```

这是HTML代码：

```
<p id="first">This is a paragraph</p>
<p id="second">This is a paragraph</p>
<p id="third">This is a paragraph</p>

<form name="formex">
    <input type="checkbox" name="firstpara" onClick="showPara();"/>First Paragraph<br />
    <input type="checkbox" name="secondpara" onClick="showPara();"/>Second Paragraph<br />
    <input type="checkbox" name="thirdpara" onClick="showPara();"/>Third Paragrpah<br />
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T00:34:23.833

没有`visibility: block`，所以`hidden`没有被改变。使用`visibility: visible`. `return true;`您在函数 ( vs. `return true:`)中也有语法错误。

[http://jsfiddle.net/frKXN/1/](http://jsfiddle.net/frKXN/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T00:32:29.897

`visibility`CSS 属性可以有两个值：`hidden`或`visible`。

您将其设置为`block`，这是行不通的。`display`您可能将它与可以设置为 的属性`block`和`none`其他一些值混淆了。

# android - 为什么 Eclipse 没有检测到我在布局文件中添加的新 onClick 方法

> ID：15284589
> 
> 赞同：0
> 
> 时间：2013-03-08T00:29:18.140
> 
> 标签：android, eclipse, onclick

这是我的完整布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:orientation="horizontal" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:onClick="showButtons"
            android:text="@string/buttons_label" />
    </RelativeLayout>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/relativeLayout1"
        android:layout_centerHorizontal="true"
        android:onClick="showSpinners"
        android:text="@string/spinners_label" />

</RelativeLayout> 
```

这里是我称之为 showSpinner 的地方：

```
private void showSpinners(View clickedButton){
        goToActivity(SpinnerActivity.class);
} 
```

Eclipse 用黄色的 showSpinner 下划线表示它从未在本地使用过，我的猜测是它没有在布局文件中检测到我的 onClick 属性。我想知道为什么它不起作用，我应该怎么做才能使它起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:36:01.213

将您的方法更改为：

```
public void showSpinners(View clickedButton) {
    // do the work
} 
```

该方法需要在类（[源](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)）之外可见。

# java - 使用正则表达式检索字符串中的重复值

> ID：15284590
> 
> 赞同：0
> 
> 时间：2013-03-08T00:29:19.450
> 
> 标签：java, regex, twitter4j

如果我在这种情况下误解了 Regex 的使用，请提前道歉。

我想从字符串中检索重复的字段。有问题的字符串看起来像这样 -

> TrendsJSONImpl{asOf=2013 年 3 月 8 日星期五 00:04:26 GMT，trendAt=2013 年 3 月 8 日星期五 00:04:26 GMT，>trends=[TrendJSONImpl{name='#TheBiggestLies', url='URL', query=' %23TheBiggestLies'}, TrendJSONImpl{name='#ICanHonestlySay', >url='URL', query='%23ICanHonestlySay'}, >TrendJSONImpl{name='#EuTenhoUmaQuedaPor', url='URL', query='%23EuTenhoUmaQuedaPor '}, >TrendJSONImpl{name='#CitePessoasExclusivamenteSuas', url='URL', 查询='%23CitePessoasExclusivamenteSuas'},

从这个字符串中，我想检索字段“名称”并将其添加到列表中。此字符串代表 Twitter 上的热门话题，每次调用生成它的方法时都会发生变化。

理想的输出是这样的 -

#最大的谎言

#ICan诚实地说

#CitePessoasExclusivamenteSuas

在此处之前的文章之后，我尝试使用以下代码提取名称字段 -

```
UI.model = new DefaultListModel();
            String trendsInfo = //FUNCTIONWHICHRETRIEVESSTRING
                    Matcher m = Pattern.compile("{name=").matcher(trendsInfo);
            Pattern p = Pattern.compile(
                    "{name='(.*),",
                    Pattern.DOTALL);
            Matcher matcher = p.matcher(trendsInfo);

            while (matcher.find()) {
                for (int i = 0; i < 20; i++) {
                    String output = m.group(i);
                    UI.model.addElement(output);
                    System.out.println(m.group(i));
                }
            } 
```

不幸的是，这返回了一个非法重复异常，我不确定如何处理同一字段的多个查询。在这件事上的任何帮助将不胜感激。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:34:46.710

`{`是正则表达式的重复运算符，因此您需要像这样对其进行转义：`\\{`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:34:47.880

你得到例外的原因是你的正则`{`表达式中有这个字符。它是一个保留字符，因此必须转义 ( `\\{`)。

除此之外，您似乎缺少第二个`'`（在逗号之前）。使用惰性正则表达式也可能是一个好主意，因此最终版本将是这样的：`\\{name='(.*?)',`. 也许您甚至想添加哈希字符以使其更准确：`\\{name='(#.*?)',`...

# android - 无法使用 ACTION_PICK 意图选择特定图像

> ID：15284592
> 
> 赞同：3
> 
> 时间：2013-03-08T00:29:47.653
> 
> 标签：android, android-intent

我正在使用这样的意图：

```
Intent intent = new Intent(Intent.ACTION_PICK,
        android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI); 
```

在`onActivityResult()`我有这个：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode != Activity.RESULT_OK) {
        return; // user cancelled
    }

    Uri imageUri = data.getData();
    if (imageUri == null) {
        // (code to show error message goes here)
    return;
    }

    // Get image path from media store
    String[] filePathColumn = { android.provider.MediaStore.MediaColumns.DATA };
    Cursor cursor = this.getContentResolver().query(imageUri, filePathColumn,
            null, null, null);

    if (cursor == null || !cursor.moveToFirst()) {
        // (code to show error message goes here)
        return;
    }

    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    String imagePath = cursor.getString(columnIndex);
    cursor.close();

    if (imagePath == null) {
        // error happens here
    }
} 
```

当我从*“帖子”*、*“个人资料照片”*（见截图）等特定相册中选择图像时，我无法在`onActivityResult()`. 可以毫无问题地选择其他相册中的图像。

![厨房截图](../Images/5d4e38bd1729d15f2de665a9ccd80f63.png)

我尝试添加`intent.putExtra("return-data", true)`但`data.getExtras()`返回`null`.`onActivityResult()`

这里有[类似的问题](https://stackoverflow.com/questions/12078870/action-pick-with-mediastore-images-media-internal-content-uri-allowing-users-to)，但没有人回答。

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T06:28:47.230

啤酒花这将帮助你....

ACTIVITYRESULT_CHOOSEPICTURE 是调用 startActivity(intent, requestCode) 时使用的 int；

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  if(requestCode == ACTIVITYRESULT_CHOOSEPICTURE) {
    BitmapFactory.Options options = new BitmapFactory.Options();
    final InputStream ist = ontext.getContentResolver().openInputStream(intent.getData());
    final Bitmap bitmap = BitmapFactory.decodeStream(ist, null, options);
    ist.close();
  }
} 
```

如果上面的代码不起作用，而不仅仅是参考这个链接......它会很好地展示方式

[http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/](http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:36:17.047

试试这个：

```
String selectedImagePath = imageUri.getEncodedPath(); 
```

它适用于我使用画廊图像选择器

也许是这样：

```
bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), data.getData()); 
```

# python - 从站点内的多个链接中抓取数据

> ID：15284594
> 
> 赞同：-1
> 
> 时间：2013-03-08T00:29:56.790
> 
> 标签：python, web-scraping, scraperwiki

我想使用 scraperwiki 和 python 来构建一个从不同站点刮取大量信息的刮板。我想知道是否可以指向单个 URL，然后从该站点内的每个链接中刮取数据。

例如：一个站点将包含有关不同项目的信息，每个项目都在其自己的单独链接中。我不需要这些链接的列表，而是其中包含的实际数据。

刮板将在每个链接上寻找相同的属性。

有谁知道我如何或是否可以这样做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:14:08.993

使用 urllib2 查看 BeautifulSoup。

[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

一个（非常）粗略的链接刮板示例如下所示：

```
from bs4 import BeautifulSoup
import urllib2

c = urllib2.urlopen(url)
contents = c.read()
soup = BeautifulSoup(contents)
links = soup.find_all(a): 
```

然后只需编写一个 for 循环来多次执行此操作即可！

# java - 运行时的 Java 数组初始化

> ID：15284597
> 
> 赞同：0
> 
> 时间：2013-03-08T00:30:28.320
> 
> 标签：java

我正在开发基于 Java 的 COM 程序，当我以这种格式发送数据时，它可以工作：

```
serialPort.writeBytes( new byte[] { (byte)3, (byte)0, (byte)0, 
                                    (byte)0, (byte)4, (byte)5} ); 
```

但是当我这样做时它没有，我在哪里做错了？

```
byte[] bcode = null;
bcode[0] = (byte)3;
bcode[1] = (byte)0;
bcode[2] = (byte)0;
bcode[3] = (byte)0;
bcode[4] = (byte)4;
bcode[5] = (byte)5;
serialPort.writeBytes(bcode); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:32:02.390

在第二个示例中，您没有创建数组，而是分配了它`null`。您不能引用不存在的数组的数组元素。你可以做

```
byte[] bcode = new byte[6]; 
```

这将创建具有 6 个字节空间的数组。然后单独分配您的值。

# facebook - Facebook Open Graph - 通过自定义参数过滤自定义操作

> ID：15284598
> 
> 赞同：0
> 
> 时间：2013-03-08T00:30:38.493
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph

我正在构建一个 facebook 应用程序，用户可以从我们的用户为我们的每个产品提交的照片库中“喜欢”“图片”（这些是动作和对象名称）。每当用户喜欢一张图片时，我也会发送一个（必需的）自定义参数，即产品 ID。

有没有办法检索当前用户对特定产品 ID 的喜爱行为？我正在使用 javascript fb sdk。我试图将尽可能多的 facebook 相关内容从我的后端系统中排除，所以我宁愿不在我的数据库中存储用户数据。

感谢您的任何帮助/建议，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:35:52.320

您需要自己进行过滤，但是是的，您可以这样做。尝试类似的东西

```
// This will return everything the user has loved
FB.api('/me/<your app namespace>:love', function(response) {
  for(var i = 0; i < response.data.length; i++) {
    var post = response.data[i];
    // Make sure that this is a post about loving a pic
    // and that the product_id is what we're looking for
    if(post.data.hasOwnProperty('pic') &&
       post.data.hasOwnProperty('product_id') &&
       post.data.product_id == desiredProductId) {
      // This is a post for loving a pic for the desired product id
    }
  }
}); 
```

# ruby-on-rails - public_activity 删除

> ID：15284599
> 
> 赞同：0
> 
> 时间：2013-03-08T00:30:45.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 public_activity 在我的 rails 应用程序上为指南模型工作。但是删除指南存在问题。更新和创建指南很好。

错误说

```
ActiveRecord::RecordNotSaved (You cannot call create unless the parent is saved):
  app/controllers/guidelines_controller.rb:228:in `destroy' 
```

指南控制器.rb

```
def destroy
    @guideline = Guideline.find(params[:id])
    @guideline.destroy
   @guideline.create_activity :destroy, owner: current_user

    respond_to do |format|
      format.html { redirect_to guidelines_url }
      format.json { head :no_content }
    end
  end

def update

    @guideline = Guideline.find(params[:id])
    if @guideline.update_attributes(params[:guideline])
     @guideline.create_activity :update, owner: current_user
    end

def create
    @guideline = current_user.guidelines.new(params[:guideline])
    if @guideline.save
      @guideline.create_activity :create, owner: current_user
    end 
```

指南.rb

```
include PublicActivity::Common 
```

查看 public_activity/guideline/_destroy.html.erb

```
deleted a guideline 
<% if activity.trackable %>
    <%= link_to activity.trackable.title, activity.trackable %>
<% else %>
    which can no longer be viewed
<% end %> 
```

导轨日志说

```
Processing by GuidelinesController#destroy as HTML
  Parameters: {"authenticity_token"=>"SpdYUFk0Bv1KuVg6oEuDUU4MI3eD6C1nV/3bmd5Xhsg=", "id"=>"9-jannit"}
  Guideline Load (0.2ms)  SELECT "guidelines".* FROM "guidelines" WHERE "guidelines"."id" = ? LIMIT 1  [["id", "9-jannit"]]
   (0.1ms)  begin transaction
  Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE "comments"."guideline_id" = 9
  SQL (0.7ms)  DELETE FROM "guidelines" WHERE "guidelines"."id" = ?  [["id", 9]]
  SOLR Request (224.9ms)  [ path=#<RSolr::Client:0x007f9ebdc5ea50> parameters={data: <?xml version="1.0" encoding="UTF-8"?><delete><id>Guideline 9</id></delete>, headers: {"Content-Type"=>"text/xml"}, method: post, params: {:wt=>:ruby}, query: wt=ruby, path: update, uri: http://localhost:8982/solr/update?wt=ruby, open_timeout: , read_timeout: } ]
   (3.3ms)  commit transaction
   (0.1ms)  begin transaction
  SOLR Request (4.8ms)  [ path=#<RSolr::Client:0x007f9ebdc5ea50> parameters={data: <?xml version="1.0" encoding="UTF-8"?><delete><id>Guideline 9</id></delete>, headers: {"Content-Type"=>"text/xml"}, method: post, params: {:wt=>:ruby}, query: wt=ruby, path: update, uri: http://localhost:8982/solr/update?wt=ruby, open_timeout: , read_timeout: } ]
   (0.1ms)  commit transaction
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
Completed 422 Unprocessable Entity in 254ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:11:37.653

也许您可以尝试`:autosave => true`在您的关联中进行设置。例如：

```
class User < ActiveRecord::Base  # or wherever location the guidelines association is being set
  has_many :guidelines, :autosave => true
 ...
end 
```

# python - Python PIL 与未压缩的 16 位 TIFF 图像作斗争

> ID：15284601
> 
> 赞同：11
> 
> 时间：2013-03-08T00:30:58.553
> 
> 标签：python, python-imaging-library, tiff

我的系统是 Mac OS X v10.8.2。我有几个 2560x500 未压缩的 16 位 TIFF 图像（灰度、无符号 16 位整数）。我首先尝试使用 PIL 加载它们（通过 Homebrew 安装，版本 1.7.8）：

```
from PIL import Image
import numpy as np

filename = 'Rocks_2ptCal_750KHz_20ms_1ma_120KV_2013-03-06_20-02-12.tif'
img = Image.open(filename)

# >>> img
# <PIL.TiffImagePlugin.TiffImageFile image mode=I;16B size=2560x500 at 0x10A383C68>

img.show() 

# almost all pixels displayed as white.  Not correct.  
# MatLab, EZ-draw, even Mac Preview show correct images in grayscale.

imgdata = list(img.getdata()) 

# most values negative:
# >>> imgdata[0:10]
# [-26588, -24079, -27822, -26045, -27245, -25368, -26139, -28454, -30675, -28455]

imgarray = np.asarray(imgdata, dtype=np.uint16) 

# values now correct
# >>> imgarray
# array([38948, 41457, 37714, ..., 61922, 59565, 60035], dtype=uint16) 
```

负值相差 65,536... 可能不是巧合。

如果我假装通过 PIL 更改像素并恢复为 TIFF 图像（只需将数组作为图像放回）：

```
newimg = Image.fromarray(imgarray) 
```

我收到错误：

```
File "/usr/local/lib/python2.7/site-packages/PIL/Image.py", line 1884, in fromarray
    raise TypeError("Cannot handle this data type")
TypeError: Cannot handle this data type 
```

`Image.fromarray()`我在 PIL 文档中找不到。我已经尝试通过加载`Image.fromstring()`，但我不了解 PIL 文档，并且几乎没有示例。

如上面的代码所示，PIL 似乎将数据“检测”为`I;16B`. 从我从 PIL 文档中可以看出，模式`I`是：

```
*I* (32-bit signed integer pixels) 
```

显然，这是不正确的。

我在 SX 上发现很多帖子表明 PIL 不支持 16 位图像。我找到了使用 pylibtiff 的建议，但我相信这只是 Windows？

我正在寻找一种在 Python 中处理这些 TIFF 图像的“轻量级”方式。我很惊讶它是如此困难，这让我相信这个问题对其他人来说是显而易见的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T11:32:31.820

*事实证明，Matplotlib 用两*行代码处理 16 位未压缩的 TIFF 图像：

```
import matplotlib.pyplot as plt
img = plt.imread(filename)

# >>> img
# array([[38948, 41457, 37714, ..., 61511, 61785, 61824],
#       [39704, 38083, 36690, ..., 61419, 60086, 61910],
#       [41449, 39169, 38178, ..., 60192, 60969, 63538],
#       ...,
#       [37963, 39531, 40339, ..., 62351, 62646, 61793],
#       [37462, 37409, 38370, ..., 61125, 62497, 59770],
#       [39753, 36905, 38778, ..., 61922, 59565, 60035]], dtype=uint16) 
```

等等。我想这不符合我作为“轻量级”的要求，因为 Matplotlib（对我来说）是一个沉重的模块，但是将图像放入 Numpy 数组非常简单。我希望这可以帮助其他人快速找到解决方案，因为这对我来说并不明显。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-14T16:04:36.920

试试[Pillow](http://pillow.readthedocs.org/en/latest/)，“友好”的 PIL 前叉。他们最近在 numpy 数组接口中添加了对 16 位和 32 位图像的更好支持。此代码适用于最新的 Pillow：

```
from PIL import Image
import numpy as np

img = Image.open('data.tif')
data = np.array(img) 
```

# java - 在 Java 中使用 set 和 map 从文件中读取特定关键字

> ID：15284604
> 
> 赞同：-3
> 
> 时间：2013-03-08T00:31:11.970
> 
> 标签：java, file, map, set

我创建了一个包含文本的文件。我想读取特定的单词，如“end”、“so”和“because”，用`set`​​于存储这些关键字，并`map`用于显示所有关键字和重复次数。你能告诉我我应该怎么做吗？

已编辑

这是我的草稿：

```
openButton.addActionListener(new ActionListener() { 
    public void actionPerformed(ActionEvent e) { 
        JFileChooser fileChooser = new JFileChooser(); 
        int chosenFile = fileChooser.showOpenDialog(null);
        if(chosenFile == JFileChooser.APPROVE_OPTION){ 
            File selectedFile = fileChooser.getSelectedFile(); 
            String extension = getExtension(selectedFile.getName()); 
            if ( selectedFile.canRead()) 
                Set<String> keywordList = new HashSet<String>();k
                keywordList.add("and"); 
                keywordList.add("so"); 
                keywordList.add("because”); 
```

我不知道如何从这里使用 map 来细化关键字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:44:56.250

我同意 emecas....请提供一些代码...这不是您可以使用现成代码的地方...

这是供您使用的伪代码..

```
Loop through each line of file (use Scanner)
{
    Split current line using space as delimeter and make array ( Use String.split function)
    Loop through each word of array  
    {
        See if word is in Set( using contains method of set)
        If in set
        {
            see if word is in map (use map.get method)
            if present
            {
                put <word,1> in map
            }
            else
            {
                use get method to get current cound of word from map.
                Increment by one.
                put <word,incremented count> in map
            }
        }

    }
} 
```

# css - HTML5 - 如何为特定单元格指定固定宽度？

> ID：15284606
> 
> 赞同：8
> 
> 时间：2013-03-08T00:31:25.763
> 
> 标签：css, html

在 HTML5 中，如何为表格单元格指定固定宽度？HTML4 中可用的大多数`<col>`属性在 HTML5 中不再有效。

为了清楚起见，我知道我可以做到`<td style="width:150px">`，但这并不能保持列宽固定。无论单元格的内容是什么，我都希望宽度固定为 150px。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:36:58.807

您可以`width`使用`col`. 根据您正在执行的操作，使用 的固定宽度子项来强制其宽度也可能会有所帮助，因为由于其显示类型`<td>`，通过单独设置宽度这不起作用。`<td>``table-cell`

[http://jsfiddle.net/ywSvr/](http://jsfiddle.net/ywSvr/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-17T22:05:20.697

采用`colgroup`

```
<table>
  <colgroup>
     <col span="1" style="width: 15%;">
     <col span="1" style="width: 70%;">
     <col span="1" style="width: 15%;">
  </colgroup>
  <thead></thead>
  <tbody></tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T02:21:34.897

通过添加使用***其他***表算法**`table-layout: fixed`**：

*   [无论单元格中的文本量如何，如何设置表格列宽恒定？](https://stackoverflow.com/questions/4457506/css-how-to-set-the-table-column-width-constant-regardless-of-the-amount-of-text/4457905#4457905)
*   [我以前的演示答案](https://stackoverflow.com/questions/10525744/css-table-cell-equal-width/10526275#10526275)（用于`div`显示为表格，但与`table`默认显示的元素相同）

# ios - PDKeychainBindingsController：如何重置钥匙串中的项目？

> ID：15284608
> 
> 赞同：2
> 
> 时间：2013-03-08T00:31:32.500
> 
> 标签：ios, objective-c, keychain

我正在使用 PDKeychainBindingsController，但它没有方法将 AllKeychainItems 重置为 Apple 的 KeychainItemWrapper，谁能告诉我如何执行相同的任务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:30:37.270

尝试创建一个新方法：

```
- (void)resetKeychainItems {
     bindings = [PDKeychainBindings sharedKeychainBindings];
     [bindings removeObjectForKey:@"..."];
     [bindings removeObjectForKey:@"..."];
      ...
 } 
```

# spotify - 关注/订阅 Spotify 的艺术家按钮

> ID：15284610
> 
> 赞同：1
> 
> 时间：2013-03-08T00:31:46.060
> 
> 标签：spotify, subscribe

简单的问题：是否有代码可以在网页上嵌入“Spotify 关注艺术家”按钮，或者有模板来创建直接将点击转化为关注者的 URL？不是一个全面的编码器，但可以管理一个基于 PHP 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:45:19.757

Web API 用于元数据（搜索和查找）并且未经身份验证，因此无法执行任何用户特定的操作。Libspotify 可以为用户执行经过身份验证的操作，但它目前不包含任何关注艺术家的功能。

Apps API 将在未来包含此功能，但它位于 Spotify 客户端内部，无法在 Spotify 之外的网页上使用。（它在预览 API 中可用：[https](https://developer.spotify.com/technologies/apps/docs/preview/views/views-buttons-subscribebutton.html) ://developer.spotify.com/technologies/apps/docs/preview/views/views-buttons-subscribebutton.html ）

**简而言之**：不，目前任何 API 中都没有任何功能可以从网页跟踪艺术家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T12:48:23.993

您现在可以这样做： [https ://developer.spotify.com/technologies/widgets/spotify-follow-button/](https://developer.spotify.com/technologies/widgets/spotify-follow-button/)

对于 Avicii ( `spotify:artist:1vCWHaC5f2uS3yhpwWbIA6`)，复制下面的代码并将其粘贴到您的网站上：

```
<iframe src="https://embed.spotify.com/follow/1/?uri=spotify:artist:1vCWHaC5f2uS3yhpwWbIA6&size=detail&theme=light"
  width="300" height="56" scrolling="no" frameborder="0" style="border:none;
  overflow:hidden;" allowtransparency="true">
</iframe> 
```

但是出于某种原因，即使我登录了网络播放器，我也必须再次登录才能显示我是否已经在关注艺术家。

# servicestack - 自托管服务栈，需要访问表单元素

> ID：15284614
> 
> 赞同：1
> 
> 时间：2013-03-08T00:32:04.310
> 
> 标签：servicestack

我需要在 winform 应用程序中自托管一个 servicestack 服务器，并且想知道访问表单元素和全局变量的正确方法。在 Run 方法中，如何引用 Main 来访问和修改主窗体中的 AccessCount、UpdateLog、LogBox.Text？

这是我的基本工作示例：

```
namespace Test
{    
    public partial class Main : Form
    {
        private static readonly string ListeningOn = ConfigUtils.GetAppSetting("ListeningOn"); 

                    public int AccessCount;

        public Main()
        {
            InitializeComponent();

            var appHost = new AppHost();
            appHost.Init();
            appHost.Start(ListeningOn);

            UpdateLog("Started listening on: ");

            UpdateLog(string.Format("AppHost Created at {0}, listening on {1}", DateTime.Now, ListeningOn)); 

        }

        public void UpdateLog(string data)
        {
            LogBox.Text +=  DateTime.Now.ToString("hh:mm:ss:fff") + " - " + data + "\n";
        }

        public class AppHost : AppHostHttpListenerBase
        {

            public AppHost() : base("StarterTemplate HttpListener", typeof(HelloService).Assembly) { }

            public override void Configure(Funq.Container container)
            {

            }
        }
    }

    [Description("ServiceStack's Hello World web service.")]
    [Route("/hello")]
    [Route("/hello/{Name*}")]
    public class Hello : IReturn<HelloResponse>
    {
        public string Name { get; set; }
    }

    public class HelloResponse : IHasResponseStatus
    {
        public string Result { get; set; }
        public ResponseStatus ResponseStatus { get; set; }
    }

    public class HelloService : ServiceBase<Hello>
    {
        protected override object Run(Hello request)
        {
                            // HOWTO reference Main to access and modify AccessCount, UpdateLog, LogBox.Text in the main form?

            return new HelloResponse { Result = "Hello, " + request.Name };
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:57:40.070

我对 WinForms 没有真正的经验，所以我在打开的 Windows 中循环并调用该方法的解决方案可能不是一个现实的解决方案。至少，我认为这很有趣。我还做了一些其他更改：

*   使 HelloService 继承自 Service（新 Api）
*   您的 Run 方法受到保护，我将其公开并更改为 Any()

代码：

```
public partial class Main : Form
{
    private static readonly string ListeningOn = "http://*:1337/";
    public int AccessCount;

    public Main()
    {
        InitializeComponent();

        var appHost = new AppHost();
        appHost.Init();
        appHost.Start(ListeningOn);
        UpdateLog("Started listening on: ");

        UpdateLog(string.Format("AppHost Created at {0}, listening on {1}", DateTime.Now, ListeningOn)); 
    }

    public void UpdateLog(string data)
    {
        LogBox.Text +=  DateTime.Now.ToString("hh:mm:ss:fff") + " - " + data + "\n";
    }

}

public class AppHost : AppHostHttpListenerBase
{
    public AppHost() : base("StarterTemplate HttpListener", typeof(AppHost).Assembly) { }

    public override void Configure(Funq.Container container)
    {

    }
}

[Description("ServiceStack's Hello World web service.")]
[Route("/hello")]
[Route("/hello/{Name*}")]
public class Hello : IReturn<HelloResponse>
{
    public string Name { get; set; }
}

public class HelloResponse : IHasResponseStatus
{
    public string Result { get; set; }
    public ResponseStatus ResponseStatus { get; set; }
}

public class HelloService : Service
{
    public object Any(Hello request)
    {
        // HOWTO reference Main to access and modify AccessCount, UpdateLog, LogBox.Text in the main form?
        foreach(var fm in Application.OpenForms)
        {
            if (((Form)fm).Name == "Main") //Find the form by name
            {
                ((Main) fm).Invoke(new Action<Form, string>(UpdateLog), fm, request.Name); //Can only make changes to WinFrom controls from master thread so 'delegating' method back to form
            }
        }
        return new HelloResponse { Result = "Hello, " + request.Name };
    }

    public void UpdateLog(Form fm, string name)
    {
        ((Main)fm).AccessCount++;
        ((Main)fm).UpdateLog(name);
    }
} 
```

# textpad - TextPad：如何停止自动重新加载的哔声

> ID：15284615
> 
> 赞同：3
> 
> 时间：2013-03-08T00:32:07.710
> 
> 标签：textpad

伙计们，我喜欢 TextPad 并且已经使用了很长时间。我希望我可以阻止 TextPad 执行一项功能。当菜单中的文件设置为自动重新加载时，有谁知道如何阻止 TextPad 在每次更新文件时发出 BEEP：Configure.Preferences？

非常感谢，阿维

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T00:45:10.583

这个问题对于 StackOverflow 来说确实是题外话，但无论如何......这应该有效：

取消选中“声音警报”设置`Configure -> Preferences... -> View`

# node.js - 尝试使用 Browserify 模块时出现 esprima 错误

> ID：15284617
> 
> 赞同：1
> 
> 时间：2013-03-08T00:32:22.593
> 
> 标签：node.js, coffeescript, npm, browserify

好的，所以我环顾四周，在网上找不到有关此错误的任何信息。

我正在尝试使用以下方式运行 Browserify：

browserify 应用程序/main.coffee -w -o public/client_bundle.js

它正在产生错误消息：

/usr/local/lib/node_modules/browserify/node_modules/module-deps/node_modules/detective/node_modules/esprima/esprima.js:3859 throw e; ^ 错误：第 4 行：throwError (/usr/local/lib/node_modules/browserify/node_modules/module-deps/node_modules/detective/node_modules/esprima/esprima.js:1161:21) 处出现意外令牌非法 (/usr /local/lib/node_modules/browserify/node_modules/module-deps/node_modules/detective/node_modules/esprima/esprima.js:1089:9）在前瞻（/usr/local/lib/node_modules/browserify/node_modules/module-deps /node_modules/detective/node_modules/esprima/esprima.js:1118:18）匹配（/usr/local/lib/node_modules/browserify/node_modules/module-deps/node_modules/detective/node_modules/esprima/esprima.js:1239 ：

我不知道发生了什么。我认为这可能与弄乱/不兼容的节点模块有关。我已经完全删除了 node/npm 和所有 node_modules 并重新安装它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T01:05:54.243

要使用 运行`coffeescript`，您需要添加更多选项：

```
$ browserify -c 'coffee -sc' main.coffee > bundle.js 
```

或者更好的是，使用 coffeeify 模块：

```
$ npm install coffeeify
$ browserify -t coffeeify main.coffee > bundle.js 
```

# javascript - 如何获取使用浏览按钮选择的文件的内容？

> ID：15284625
> 
> 赞同：2
> 
> 时间：2013-03-08T00:33:04.237
> 
> 标签：javascript, jquery, python, html, dom

您创建一个浏览按钮并让用户浏览目录，直到他选择一个文件。并且整个路径和文件名出现在浏览按钮复合体的文本元素中。那么，如何打开该文件以提取数据并对其采取行动呢？

这是我在这方面的进展：

```
 <div id="browseFile" style="z-index: 1; left:-1040px; width:400px">
        <input id="browse4File" name="/static/Import/Example Portfolio 1.csv" type="file" accept="text/plain" maxlength="200" style="left:20px; width: 200px;" /><br/>
        <span style="position:relative;top:72px; left:320px; top:73px;">
            <!--<button type="button" onclick="javascript:importFile()" style="font-size:16px;">Save</button>-->
            <button type="button" onclick="javascript:u=document.getElementById('browse4File').value ;alert(u);" style="font-size:16px;">Save</button>
        </span>
    </div> 
```

并且 Alert() 确实显示了文件名，但没有显示路径。安全问题……没问题！但是我怎样才能打开这个文件？我将其发送到后端吗？我在带有cherrypy的服务器上使用Python。

或者 JavaScript 可以提取文件的内容吗？

请帮忙...

TIA

肯恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:41:35.060

使用 html 4 是不可能的，使用 html 5 您可以使用[文件 API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。在此处查看浏览器[支持](http://www.html5rocks.com/en/features/file_access)

前任：

```
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ae3VH/)

# javascript - 为什么在书签中附加到 innerHTML 会覆盖整个页面？

> ID：15284627
> 
> 赞同：4
> 
> 时间：2013-03-08T00:33:21.770
> 
> 标签：javascript, bookmarklet

我有这个小书签：

```
javascript:document.getElementsByTagName("div")[0].innerHTML+="Chuck Norris"; 
```

现在它显然*应该*占据`div`页面上的第一个，并将 Chuck Norris 添加到其中。

相反，当粘贴在地址栏上时，Chuck Norris 会覆盖该页面。

为什么会这样？

*注意：这不会在 Safari 上发生...*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T00:44:43.003

您没有取消操作。添加无效0；然后结束。

```
javascript:document.getElementsByTagName("div")[0].innerHTML+="Chuck Norris";void 0; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T00:42:49.897

我不确定确切的问题是什么，但我通过制作一个 textNode 并附加它来让它工作：

```
javascript:var d=document.getElementsByTagName("div")[0];var n=document.createTextNode("Chuck Norris");d.appendChild(n); 
```

# bids - 是否有 Microsoft 版本的 SQL Server Data Tools - 适用于 x64 的 Visual Studio 2012 的商业智能？

> ID：15284628
> 
> 赞同：1
> 
> 时间：2013-03-08T00:33:34.580
> 
> 标签：bids

我正在尝试安装以下工具：[http ://www.microsoft.com/en-us/download/details.aspx?id=36843](http://www.microsoft.com/en-us/download/details.aspx?id=36843)

这是 Visual Stuido 2012 的投标。

目前，此页面上唯一可用的下载是 x86 版本，由于以下失败条件而出错：“安装功能的 CPU 架构与指定实例匹配”。

我注意到在上面的下载 URL 中，x64 被列为支持，但没有下载该文件的 x64 版本。有人建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:24:07.793

通过选择安装新实例而不是在安装程序中增加现有的 sql 服务器来解决它。

# javascript - 尝试使用 Dojo 捕获 HTTP 401

> ID：15284631
> 
> 赞同：0
> 
> 时间：2013-03-08T00:34:09.863
> 
> 标签：javascript, http, dojo

使用 Dojo 与服务器通信时，是否可以在浏览器拦截之前捕获 401 状态代码？

我正在使用 Dojo 1.8 与通过 SSL 使用基本身份验证的 RESTful 服务器进行通信。客户端捕获客户端的用户名和密码，然后将它们包含在对服务器的请求中，如下所示：

```
request.get(this.url, {
  handleAs: "json",
  user: creds.username,
  password: creds.password
}).then(
  function(user) {
    console.log("user", user);
  },
  function(error) {
    console.log("error", error);
  }); 
```

当客户端凭据正确时，这可以正常工作。但是如果凭据错误，浏览器会在我的错误函数得到它之前拦截返回的 401 状态代码。

我已经看到有关此问题的其他讨论，包括服务器在身份验证错误时返回 401 以外的其他内容的解决方法。但是，在我走这条路之前，我想知道是否有办法让我的代码在浏览器之前获得 401 状态。

或者，在 SSL 上使用除基本身份验证之外的其他东西会使这更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:43:56.927

我找不到阻止浏览器拦截 401 状态代码的方法，但我解决了这个问题。这是我在其他人遇到这个问题时所做的。仅当您可以控制需要身份验证时服务器返回的内容时，这才有效。

首先，当需要身份验证时，我让服务器返回 400 状态码。我正在使用 Apache Shiro，所以这只涉及创建 BasicHttpAuthenticationFilter 的子类并像这样覆盖 sendChallenge()：

```
protected boolean sendChallenge(ServletRequest request, ServletResponse response) {
  HttpServletResponse httpResponse = WebUtils.toHttp(response);
  httpResponse.setStatus(HttpServletResponse.SC_BAD_REQUEST);
  String authcHeader = getAuthcScheme() + " realm=\"" + getApplicationName() + "\"";
  httpResponse.setHeader(AUTHENTICATE_HEADER, authcHeader);
  return false;
} 
```

就我而言，我不希望注销重定向到 JSP 页面，因此我将 Shiro 的 LogoutFilter preHandle() 方法子类化为：

```
protected boolean preHandle(ServletRequest request, ServletResponse response) throws Exception {
  Subject subject = getSubject(request, response);
  try {
    subject.logout();
  }
  catch (SessionException ise) {
    // Log exception
  }
  return false;
} 
```

然后我将过滤器添加到我的 shiro.ini 文件中：

```
[main]
myAuth = com.example.filters.MyBasicAuthFilter
noRedirectLogout = com.example.filters.NoRedirectLogoutFilter

[urls]
/protected/** = myAuth
/logout = noRedirectLogout 
```

您可以使用不同的状态码，只需确保在客户端上检查相同的状态码。

接下来我创建了一个 LoginController 来处理登录和注销：

```
define([], function() {
  var string = {};    
  string.getBytes = function(str) {
    console.log("string.getBytes:str", str);
    var bytes = [];
    for (var i = 0; i < str.length; ++i) {
      bytes.push(str.charCodeAt(i));
    }
    return bytes;
  };
  return string;
});

...

_authorize: function(url, username, password) {
  var namepw = new String(username + ":" + password);
  var authstr = "Basic " + base64.encode(utilString.getBytes(namepw));

  var def = new Deferred();
  request.get(url, {
    handleAs: "json",
    headers : {
      Authorization: authstr
    }
  }).then(
    function(data) {
      def.resolve(data);
    },
    function(err) {
      if (err.response.status == 400) {
        def.progress();
      }
      else {
        def.reject(err);
      }
    });
  return def;
},

login: function(url, user, passwd) {
  return this._authorize(url, user, passwd);
},

logout: function(url) {
  return this._authorize(url, "#fakeuser#", "#fakepw#");
}; 
```

使用控制器登录的代码会返回一个 Deferred，并且可以做相应的事情：

```
var auth = this.controller.login(creds);
Deferred.when(auth,
  function(data) {
    if (data != null) {
      // Successful login
    }
    else {
      // Non-authentication error
    }
  },
  function(err) {
    // Non-authentication error
  },
  function(updt) {
    // Invalid username or password
  }
); 
```

调用注销的代码也会返回一个 Deferred：

```
controller.logout("/logout").then(function(val) {
  // Successful logut
}, function(err) {
  // Error attempting to logout
}); 
```

注销通过让注销过滤器返回成功（状态 == 200）而不管用户名密码，并传递浏览器将捕获的无效用户名和密码。希望这一切对某人有所帮助。

# unity3d - 在运行时修改材质

> ID：15284632
> 
> 赞同：0
> 
> 时间：2013-03-08T00:34:13.797
> 
> 标签：unity3d

我想在运行时修改材质的参数。该参数称为“Radio 1”，并在自定义着色器中定义。我需要对材质进行更改以影响所有正在使用它的对象，但这是行不通的。我该怎么做？

我尝试获取使用该材料的对象之一并修改 sharedMaterial，还尝试加载该材料并像这样修改它：

```
var mater = Resources.Load("BGRingMat") as Material;
mater.SetFloat("Radio2", bgRingMaterialRadio2); 
```

我根本看不到任何影响。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:59:12.817

我刚刚测试了你的情况。它应该能够按照您的意愿工作。如果你没有得到任何 nullrefs，我能想象的唯一错误是“Radio2”是一个错误的变量名。如果您尝试使用错误的名称修改变量，您将不会收到任何错误。在您的文本中，您将变量称为“Radio 1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:16:17.517

全局修改此材质的所有实例的着色器值：

```
Material mat = Resources.Load("BGRingMat") as Material;
mat.SetFloat( "Radio2", bgRingMaterialRadio2); 
```

或修改 1 个对象：

```
renderer.material = Resources.Load("BGRingMat") as Material;
renderer.material.SetFloat( "Radio2", bgRingMaterialRadio2); 
```

请注意，如果您先直接修改对象的材质，然后尝试使用共享材质，则不会发生任何事情：

```
Material mat = Resources.Load("BGRingMat") as Material;

// Sets Radio2 to bgRingMaterialRadio2
renderer.material.SetFloat( "Radio2", bgRingMaterialRadio2);

// Doesn't do anything to the current object as this object now has its own copy.
mat.SetFloat( "Radio2", 0.0f); 
```

# objective-c - 未调用 UIWebView 委托方法

> ID：15284639
> 
> 赞同：0
> 
> 时间：2013-03-08T00:34:43.910
> 
> 标签：objective-c, cocoa-touch, uiwebview

该`BOOL`功能不适用于这些 Web 视图。我想知道如何解决它。我可能遗漏了一些小细节。

```
-(void)viewDidLoad{    
    UIWebView *webView = [[UIWebView alloc] 
                           initWithFrame:CGRectMake(0, 119, 
                              self.view.bounds.size.width, 
                              self.view.bounds.size.height - 165)];
    webView.backgroundColor = [UIColor whiteColor];
    webView.userInteractionEnabled = NO;
    webView.opaque = NO;
    [webView loadHTMLString:self.item.description 
             baseURL:[NSURL URLWithString:self.item.link]];
    [self.view addSubview:webView];

}

-(BOOL) webView:(UIWebView*)inWeb 
        shouldStartLoadWithRequest:(NSURLRequest*)inRequest 
        navigationType:(UIWebViewNavigationType)inType{
    if (inType == UIWebViewNavigationTypeLinkClicked) {
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:39:41.240

您尚未在 webView 上设置委托。

# django - 用于在主页上发布 cmsplugin-blog 条目列表的模板标签

> ID：15284640
> 
> 赞同：0
> 
> 时间：2013-03-08T00:34:46.610
> 
> 标签：django, plugins, content-management-system, templatetag

我将 cmsplugin-blog 与 Django-cms 一起使用。我想在主页中显示最新博客条目的列表（不与插件挂钩）。为此，我创建了一个模板标签。我可以获得一组条目，但不知道如何呈现它们的标题。谁能指出我正确的方向？

这是代码。

cmsplugin_blog_tags.py：

```
17 # blog post widget
18 @register.inclusion_tag('cmsplugin_blog/entry_list_1_snippet.html', takes_context=True)
19 def render_entries_widget(context, entry_num):
20     request = context["request"]
21     language = get_language_from_request(request)
22     kw = get_translation_filter_language(Entry, language)
23     
24     return {
25         'entries': Entry.published.filter(**kw)[0:entry_num],
26     } 
```

entry_list_1_snippet.html：

```
 1 {% load i18n placeholder_tags cmsplugin_blog_tags simple_translation_tags %}
 2 
 ...
 3 <div id="featposts-widget-2" class="widget featposts">
 4   <div class="widget-wrap">
 5     <h3 class="widgettitle"><span><a href="/blog">{% trans "VFOSS Blog" %}</a></span></h3>
 6     <div class="cat-posts-widget textwidget">
 7 
 8       {% for entry in entries|annotate_with_translations %}
           # line 9 does not work. Probably no request.
 9         {% with entry|get_preferred_translation_from_request:request as title %}
           # no excerpt showed.
10         {% with entry.placeholders|choose_placeholder:"blog_excerpt" as excerpt %}
11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:03:06.123

I achieved this by injecting a list into the context with templatetag and included other html for rendering the list.

the tag:

```
 # blog post widget
 20 @register.tag
 21 def get_latest_entries(parser, token):
 22   bits = token.contents.split()
 23   if len(bits) != 4:
 24     raise TemplateSyntaxError, "(cmsplugin_blog) get_latest_entries tag takes exactly 3 arguments)"
 25   if bits[2] != 'as':
 26     raise TemplateSyntaxError, "second argument to the get_latest_links tag must be 'as'"
 27   return LatestEntriesNode(bits[1], bits[3])
 28 
 29 class LatestEntriesNode(Node):
 30   def __init__(self, num, varname):
 31     self.num, self.varname = num, varname
 32 
 33   def render(self, context):
 34     request = context["request"]
 35     language = get_language_from_request(request)
 36     kw = get_translation_filter_language(Entry, language)
 37     context[self.varname] = Entry.published.filter(**kw)[:self.num]
 38     return '' 
```

Placing the tag where the list should appear:

```
 14 {% block entries_widget %}
  15   {% get_latest_entries 3 as blog_entries %}
  16   {% if blog_entries %}
  17     {% include "cmsplugin_blog/widget_latest_entry_include.html" %}
  18   {% else %}
  19     <p>{% trans "No entries" %}</p>
  20   {% endif %}
  21 {% endblock %} 
```

# php - 允许用户上传文件需要什么权限？

> ID：15284645
> 
> 赞同：0
> 
> 时间：2013-03-08T00:35:11.767
> 
> 标签：php, http, authentication, iis, permissions

我们将网站从 IIS 6 迁移到 IIS 8 并切换到 2012 windows server！

用户过去可以将图像上传到站点并将它们存储在 2012 Windows 服务器上。

这不再起作用，我认为这可能是权限问题。

用户进行身份验证的方式是通过简单的数据库查找。

一旦他们可以访问该网站，他们就可以上传图片。请注意，这与 Windows 身份验证无关。

**服务器需要哪些权限才能允许匿名用户上传文件？**

# internet-explorer - 如何在 Twebbrowser 中禁用谷歌即时搜索？

> ID：15284646
> 
> 赞同：0
> 
> 时间：2013-03-08T00:35:18.567
> 
> 标签：internet-explorer

我想利用谷歌搜索解释的搜索参数，例如“num=100”。除非在浏览器中禁用即时搜索，否则这将不起作用。我正在使用 twebbrowser 如何关闭即时搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:38:18.113

它在您的偏好页面上：

[http://www.google.com/preferences](http://www.google.com/preferences)

# windows - 如何阻止 Windows 服务器锁定文件？

> ID：15284651
> 
> 赞同：0
> 
> 时间：2013-03-08T00:35:48.213
> 
> 标签：windows, windows-server-2003, windows-server, file-locking

我必须使用一个错误的会计应用程序，它会锁定数据文件并且在停止使用它时不会释放锁。因此，下一个尝试访问该文件的人会被拒绝访问。

这可以通过用Unlocker删除文件锁句柄来临时解决，但是每次都必须这样做，很烦人。

有没有办法配置（Windows 2003 服务器）禁用一个特定文件的文件锁定？我找到了一些关于如何在系统范围内禁用文件锁定的信息，但我不想对整个服务器执行此操作，只需一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T07:21:23.103

我发现 Unlocker 提供了一个命令行界面来运行它。所以我创建了一个批处理文件，它运行解锁器并按需解锁这个文件。不理想，但它比其他选项更不烦人：

解锁器 "C:\Path\File.lck" /S /D

# python - Python-整数输入，输入字母的错误信息

> ID：15284652
> 
> 赞同：-1
> 
> 时间：2013-03-08T00:35:57.300
> 
> 标签：python, python-3.x

```
print("this program will calculate the area")

input("[Press any key to start]")

width = int(input("enter width"))

while  width < 0 or width > 1000:
    print ("please chose a number between 0-1000")
    width = int(input("enter width"))

height = int(input("Enter Height"))

while  height < 0 or height > 1000:
    print("please chose a number between 0-1000")
    widht = int(input("Enter Height"))

area = width*height

print("The area is:",area 
```

我添加了一条错误消息，用于输入低于或高于所述数字的数字，但是如果可能的话，如果用户输入字母或根本没有输入，我想向用户显示一条错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:40:05.100

尝试在尝试中换行输入行，除了：

```
try:
 width = int(input("enter width"))
except:
 width = int(input("enter width as integer")) 
```

或更好：将其包装在一个函数中：

```
def size_input(message):
   try:
      ret = int(input(message))
      return ret
   except:
      return size_input("enter a number")

width = size_input("enter width") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T00:42:08.267

如果传递给它的参数无效，您可以使用`try-except`,`int()`引发异常：

```
def valid_input(inp):
    try:
        ret=int(inp)
        if not 0<ret<1000:
            print ("Invalid range!! Try Again")
            return None
        return ret
    except:
        print ("Invalid input!! Try Again")
        return None
while True:
    rep=valid_input(input("please chose a number between 0-1000: "))
    if rep:break
print(rep) 
```

**输出：**

```
please chose a number between 0-1000: abc
Invalid input!! Try Again
please chose a number between 0-1000: 1200
Invalid range!! Try Again
please chose a number between 0-1000: 123abc
Invalid input!! Try Again
please chose a number between 0-1000: 500
500 
```

# ios - console.log 中的 Worklight 通知错误

> ID：15284656
> 
> 赞同：0
> 
> 时间：2013-03-08T00:36:11.447
> 
> 标签：ios, notifications, apple-push-notifications, ibm-mobilefirst

我正在试用 Worklight 通知入门指南的模块 41。

isPushSupported 返回 true - isSubscribed 返回 false 并且其他 2 个按钮从未启用 - 这让我很感兴趣 - 问题！

所以检查 console.log 我看到了这个：

```
 tail -f console.log 
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:480)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
  at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:207)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
  at [internal classes]
[ERROR   ] FWLSE0048E: Unhandled exception caught: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
[ERROR   ] SRVE0777E: Exception thrown by application class 'com.worklight.core.auth.impl.AuthenticationContext.checkAuthentication():506'
com.worklight.server.auth.impl.WorkLightAuthenticationException
  at com.worklight.core.auth.impl.AuthenticationContext.checkAuthentication(AuthenticationContext.java:506)
  at com.worklight.core.auth.impl.AuthenticationContext.login(AuthenticationContext.java:578)
  at com.worklight.core.auth.impl.AuthenticationServiceBean.login(AuthenticationServiceBean.java:108)
  at com.worklight.gadgets.serving.handler.LoginOnDemandHandler.doPost(LoginOnDemandHandler.java:69)
  at com.worklight.gadgets.serving.GadgetAPIServlet.doGetOrPost(GadgetAPIServlet.java:125)
  at com.worklight.gadgets.serving.GadgetAPIServlet.lockedGetOrPost(GadgetAPIServlet.java:87)
  at com.worklight.gadgets.serving.GadgetAPIServlet.doPost(GadgetAPIServlet.java:81)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
  at [internal classes]
[ERROR   ] SRVE0777E: Exception thrown by application class 'org.jboss.resteasy.core.SynchronousDispatcher.unwrapException():329'
org.jboss.resteasy.spi.UnhandledException: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
  at org.jboss.resteasy.core.SynchronousDispatcher.unwrapException(SynchronousDispatcher.java:329)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:305)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:198)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:174)
  at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:518)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:480)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
  at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:207)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
  at [internal classes]
[ERROR   ] FWLSE0048E: Unhandled exception caught: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
[ERROR   ] SRVE0777E: Exception thrown by application class 'org.jboss.resteasy.core.SynchronousDispatcher.unwrapException():329'
org.jboss.resteasy.spi.UnhandledException: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
  at org.jboss.resteasy.core.SynchronousDispatcher.unwrapException(SynchronousDispatcher.java:329)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:305)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:198)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:174)
  at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:518)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:480)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
  at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:207)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
  at [internal classes]
[ERROR   ] FWLSE0048E: Unhandled exception caught: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
[ERROR   ] SRVE0777E: Exception thrown by application class 'org.jboss.resteasy.core.SynchronousDispatcher.unwrapException():329'
org.jboss.resteasy.spi.UnhandledException: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
  at org.jboss.resteasy.core.SynchronousDispatcher.unwrapException(SynchronousDispatcher.java:329)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:305)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:198)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:174)
  at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:518)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:480)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
  at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:207)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
  at [internal classes]
[ERROR   ] FWLSE0048E: Unhandled exception caught: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
[ERROR   ] SRVE0777E: Exception thrown by application class 'com.worklight.core.auth.impl.AuthenticationContext.checkAuthentication():506'
com.worklight.server.auth.impl.WorkLightAuthenticationException
  at com.worklight.core.auth.impl.AuthenticationContext.checkAuthentication(AuthenticationContext.java:506)
  at com.worklight.core.auth.impl.AuthenticationContext.login(AuthenticationContext.java:578)
  at com.worklight.core.auth.impl.AuthenticationServiceBean.login(AuthenticationServiceBean.java:108)
  at com.worklight.gadgets.serving.handler.LoginOnDemandHandler.doPost(LoginOnDemandHandler.java:69)
  at com.worklight.gadgets.serving.GadgetAPIServlet.doGetOrPost(GadgetAPIServlet.java:125)
  at com.worklight.gadgets.serving.GadgetAPIServlet.lockedGetOrPost(GadgetAPIServlet.java:87)
  at com.worklight.gadgets.serving.GadgetAPIServlet.doPost(GadgetAPIServlet.java:81)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
  at [internal classes]
[ERROR   ] SRVE0777E: Exception thrown by application class 'org.jboss.resteasy.core.SynchronousDispatcher.unwrapException():329'
org.jboss.resteasy.spi.UnhandledException: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
  at org.jboss.resteasy.core.SynchronousDispatcher.unwrapException(SynchronousDispatcher.java:329)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:305)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:198)
  at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:174)
  at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:518)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:480)
  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
  at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:207)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
  at [internal classes]
[ERROR   ] FWLSE0048E: Unhandled exception caught: org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]
org.springframework.dao.InvalidDataAccessApiUsageException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02]; nested exception is <openjpa-1.2.2-r422266:898935 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: Multiple DISTINCT aggregates are not supported at this time. {SELECT COUNT(DISTINCT t0.DEVICE), COUNT(DISTINCT t1.ID) FROM NOTIFICATION_DEVICE t0 INNER JOIN NOTIFICATION_USER t1 ON t0.USERSUBSCRIPTIONID = t1.ID WHERE (t0.APPLICATIONID IN (?, ?) AND t0.PLATFORM = ?)} [code=30000, state=42Z02] 
```

每次我运行应用程序时似乎都会触发异常。我看到客户端没有例外。

有人可以提出问题吗！？我在应用程序描述符旁边有 apns-certificate-production.p12，否则我的应用程序看起来很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:45:55.493

事实证明，答案是这些错误消息与实际问题无关 - 由于其中一个 javascript 文件中遗漏了一个简单的“）”，因此代码根本没有运行。

# constants - 如何在企业架构师中定义一个常量成员函数？

> ID：15284659
> 
> 赞同：0
> 
> 时间：2013-03-08T00:36:18.167
> 
> 标签：constants, class-diagram, enterprise-architect, member-functions

我无法获得 **int getId() const; 由企业架构师生成的成员函数

如何在企业架构师中指定*常量成员函数？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:27:45.537

只需选择您的班级并按 F10 即可调出操作对话框。选择左侧的高级选项卡。在修饰符部分检查“是查询”

这对应于指定方法不修改任何字段的 Const 关键字。

[您可以在Sparx Systems 网站](http://www.sparxsystems.com)的[在线帮助文​​档](http://www.sparxsystems.com/enterprise_architect_user_guide/9.3/modeling_basics/operationsmainpage.html)中阅读有关此表单的更多信息。

# html - text-decoration:none 是否会覆盖 font-weight:900？

> ID：15284667
> 
> 赞同：0
> 
> 时间：2013-03-08T00:36:55.197
> 
> 标签：html, css, fonts, bold, text-decorations

我在菜单中使用等宽字体文本作为超链接。为了消除下划线，我使用了 text-decoration:none。这会阻止我使字体更粗吗？

[http://www.fccorp.us/index.php](http://www.fccorp.us/index.php) -> 左侧蓝色框中的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:38:36.893

不会。文字装饰对字体粗细没有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:39:22.597

No`text-decoration`对 没有任何影响`font-weight`。它们是两个完全不同的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:40:54.597

它不会。字体粗细不受装饰影响。在评论中链接到 jsfiddle

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T00:41:12.207

等宽字体在加粗时看起来并没有特别的不同。尝试将其设置为 Courier。

# facebook-c#-sdk - 如何从 fql 查询中提取字符串数据

> ID：15284670
> 
> 赞同：0
> 
> 时间：2013-03-08T00:37:12.517
> 
> 标签：facebook-c#-sdk

真的是初学者的问题。

据我了解，以下代码查询 facebook 朋友。如何获取我所有朋友的名字和姓氏作为字符串，以便将其放入列表框中？

谢谢

```
private async void FqlAsyncExample()
{
        try
        {
            // query to get all the friends
            var query = string.Format("SELECT uid,pic_square,first_name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1={0})", "me()");

            dynamic parameters = new ExpandoObject();
            parameters.q = query;
            dynamic result = await _fb.GetTaskAsync("fql", parameters);

            TotalFriends.Text = string.Format("You have {0} friend(s).", result.data.Count);
        }
        catch (FacebookApiException ex)
        {
            // handle error message
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:47:15.557

result.data 的数据类型是 IEnumerable。你最好的选择是做这样的事情。

```
dynamic friends = result.data;
foreach(var friend in friends)
{
    Console.WriteLine(friend.first_name);
} 
```

这会将您每个朋友的名字输出到控制台。由于您使用的是动态对象，因此无论您在 . 需要是 JSON 键字段的确切名称。在您的情况下，选项将是

```
friend.uid
friend.pic_square
friend.first_name 
```

这些都可以很容易地转换为字符串的类型（实际上就是它们），但是 uid 也可以转换为 long。

为了获得所有朋友的姓氏，您必须将 FQL 修改为如下内容：

```
SELECT uid,pic_square,first_name,last_name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) 
```

由于您在原始查询中遗漏了“last_name”。

# sorting - 具体确定项目顺序的排序的正确术语是什么？

> ID：15284671
> 
> 赞同：0
> 
> 时间：2013-03-08T00:37:15.260
> 
> 标签：sorting, terminology

例如，如果我想对这些行进行排序：

```
A | 1
A | 2
B | 0 
```

我只使用第一列，前两行没有具体的顺序。如果我在第二列上使用辅助排序键，那么我每次都会得到一个相同的顺序。有人可以提醒我区分这两种情况的正确术语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:44:44.737

我相信我正在寻找的术语是“总订单”。在总排序中，集合中的每个元素都可以与其他元素进行比较，并且它们具有明确定义的顺序。

更正式的：[http ://en.wikipedia.org/wiki/Total_order](http://en.wikipedia.org/wiki/Total_order)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:43:24.497

你在寻找“稳定”吗？通常，这意味着相同的键在排序时保持相同的顺序。使用辅助键将确保值与主键的原始顺序一致。

# php - 将数字四舍五入到最接近的间隔

> ID：15284674
> 
> 赞同：8
> 
> 时间：2013-03-08T00:37:19.543
> 
> 标签：php

所以我有一个预定义的间隔，可以是 5、10、15 等

如果有人输入 20，我需要它根据间隔四舍五入。所以如果是15分钟的间隔，它会自动到30，如果是45分钟的间隔，它会自动到45

基本上任何 <= 间隔都成为间隔 间隔之间的任何东西都成为下一个最高间隔

当可能有一种我不知道的简单方法时，我不想编写一些复杂的 php 函数来执行此操作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T00:41:23.993

四舍五入将是：

```
$ceiled = $interval * ceil( $value / $interval); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:46:33.457

```
roundedInput  = (Ceiling( Input / Interval)) * Interval 
```

所以，给定输入 20 和间隔 15，你会得到：

20/15 = 1.33

1.33 向上取整 = 2

2 * 15 = 30

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T00:47:25.250

$Rounded = Ceil($value / $interval) * $interval;

# python - 返回两个相互对应的列表？

> ID：15284680
> 
> 赞同：0
> 
> 时间：2013-03-08T00:38:27.810
> 
> 标签：python

我正在编写一个程序，它采用我定义的两个函数并返回 n 个单词及其频率。问题是，我的程序只返回频率。我尝试将单词和频率压缩在一起，但没有奏效。从你所看到的，我接近这个错误吗？

```
def computeWordFrequencies(filename): #my function
    f = open(filename,'r')
    j = f.read() 
    OriginalL1 = parse(j)
    L1 = unique(parse(j))
    L2 = [OriginalL1.count(freq) for freq in L1]
    L = [L1, L2]
    return L

def mostFrequentWords(word,frequency,n):
   words = word
   freqs = sorted(frequency,reverse=True)
   return freqs[:n]

L = computeWordFrequencies('file.txt') #takes a file and returns words & their frequencies
words = zip(*sorted(zip(L[0],L[1])))
freqs = L[1]
print mostFrequentWords(words,freqs,100) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:42:27.610

```
def mostFrequentWords(word,frequency,n):
   my_list = zip(word,frequency) #combine the two lists
   my_list.sort(key=lambda x:x[1],reverse=True) #sort by freq
   words,freqs = zip(*my_list[:n]) #take the top n entries and split back to seperate lists
   return words #return our most frequent words in order 
```

应该工作得更好......

# c# - Windows Phone 8 应用 IsolatedStorageException / SecurityException 在发布时构建，而不是调试构建

> ID：15284684
> 
> 赞同：0
> 
> 时间：2013-03-08T00:38:55.780
> 
> 标签：c#, sqlite, visual-studio-2012, windows-phone-8

我有一个使用 Sqlite 的 Windows Phone 8 应用程序，它在调试版本中运行良好，但显然没有在发布版本中定位文件。

在发布版本中运行应用程序时，控制台上会显示一长串异常。

这是一个片段：

```
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
A first chance exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll
An exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
A first chance exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll
An exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
A first chance exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll
An exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Security.SecurityException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
A first chance exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll
An exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary 
```

……不断地。有没有人有过这种只在发布版本中弹出的异常的经验？而且，调试这个的最佳方法是什么？我什至不确定我的代码的哪一部分导致了这种情况？

为简洁起见，详细信息如下：

很明显，除其他外，我的数据库文件没有被定位。我在应用程序的目录中本地存储了一个 sqlite 数据库文件，当应用程序启动时，它被复制到本地文件夹，并从那里读取和写入。这在所有调试版本中都没有问题，但是现在，我看到“无法打开数据库文件：”的日志记录错误（更多内容见下文），然后是（迄今为止正确的）数据库文件的路径，并且没有我的 UI 元素涉及对数据库的调用正在出现。

我提到了记录消息。显然，我没有在发布版本中使用 System.Diagnostic.Debug 获得控制台打印，但我有一个写入文件的日志系统，可以在应用程序中读取该文件。

这似乎工作正常，我可以在应用程序中正常阅读。

此外，我最初在使用 SQLite 的发布版本中弹出了一些错误，但这些错误似乎来自使用旧版本的 SQLite c# 代码，并在我按照以下说明进行操作后清除：[A Workaround To Use SQLite In A Windows Phone 8应用](http://architects.dzone.com/articles/workaround-use-sqlite-windows)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:54:12.207

`SecurityException`您应该在调试器下运行您的 Release 版本，并通过更改 Visual Studio 的 Debug>>Exceptions 菜单中的设置来找出抛出的位置。

这至少可以让你找到它的来源。

# haskell - 给定列表长度、项目和填充项目生成列表

> ID：15284687
> 
> 赞同：4
> 
> 时间：2013-03-08T00:39:03.567
> 
> 标签：haskell, polymorphism

首先，抱歉标题不好，我真的不知道该怎么称呼它。这是我的一项家庭作业的问题：

“编写并测试`center`接受三个参数的（多态）Haskell 函数的定义：

1.  `arg1`类型列表`[a]`，
2.  `arg2`type的宽度`Int`，和
3.  `arg3`类型的填充项`a`，

并返回

`arg2`类型的长度列表`[a]`，

包含`arg1`以填充项为中心的列表（即，前面的项数`arg1`和后面的项数之差`arg1`最多为 1）。

例如，`center "abcd" 7 '-'`可以产生`"--abcd-"`或`"-abcd--"`（根据您的选择）。”

我不希望你实际为我编写这个函数，因为它是家庭作业，但我只需要一些关于如何解决这个问题的指导，也许还有我可能会发现对解决这个问题有用的任何 Haskell 函数的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:27:14.810

不需要递归（就您而言）。结果将由夹在左右填充列表之间的输入列表组成。`++`运算符可以连接列表：

```
center s w f = lfill ++ s ++ rfill where
  n = ... -- compute the total amount of fill required
  nl = ... -- divide the total fill into left  amount
  nr = ... -- divide the total fill into right amount
  lfill = ... -- replicate f nl times
  rfill = ... -- replicate f nr times 
```

该`where`子句包含创建左右填充列表的代码。

填充项目的总数 ( `n`) 将是`w`和 的长度之差`s`。填充项目的数量必须在左 ( `nl`) 和右 ( `nr`) 之间除以 2 并向上 ( `ceiling`) 或向下 ( `floor`) 舍入。您可以计算左侧金额，然后通过从总金额中减去左侧金额来计算右侧金额，或者您可以将左侧计算为除法`floor`，将右侧计算为`ceiling`除法。获得左右填充量后，您可以使用它`replicate`来创建`f`项目列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:00:02.220

# **类型指导**

## **明确写下类型注释**

你说（模数单词），

> 编写并测试一个（多态）Haskell 函数中心的定义，该函数中心接受三个参数：
> [a] 类型的 arg1、Int 类型的 arg2、a 类型的 arg3，返回 [a] 类型的列表

在这里，我想您应该做的第一件事是写下函数的类型签名。
显式地写函数的类型注解（签名）是一个很大的指导，

为了帮助你，有一个例子，

> 如果我的函数采用两个参数：
> Int 类型的 arg1、arg2 或类型 [a] 并返回类型 a

我将编写以下类型注释，

```
fun :: Int -> [a] -> a 
```

然后你的功能变成了

```
center :: ... -> ... -> ... -> 
```

## **请注意，关于您的术语**

您的函数的定义与给定示例之间存在一些差异，

考虑到这一点，

> 返回类型为 [a] 的长度为 arg2 的列表

对我来说，类型 [a] 声音的列表，就像类型 [[a]]，但你把这个例子，

> 例如， center "abcd" 7 '-' 可以产生 "--abcd-" 或 "-abcd--" （根据您的选择）。

你看到任何类型 [[a]] 吗？
这是尝试纠正此问题的另一个很好的指导。

* * *

# **算法，指导**

现在，让我们来看看邪恶的部分，算法的部分，

我们有两个主要案例要处理。

## **绑定案例**

如果第一个参数小于或等于列表的长度，那么您可以
抛出异常**或**只检索原始列表而不进行任何更改。无论如何，在这两种情况下，我们都不应该关心它第三个参数的值，不是吗？

作为一个练习，试着用 Haskell 翻译前面的句子。

此外，当传递的列表为空时会发生什么？
请记住，任何非空列表都可以表示为 (x:xs)，其中 x = 头列表，xs = 尾列表。
那么大多数时候当你遇到一个处理列表作为输入的函数时，你也必须管理这些情况。

可能是中心看起来有点像这样，

```
center []     .. .. = ....  
center (x:xs) .. .. = .... 
```

## **一般情况**

没关系，绑定案例已经被管理，我们可以更专注于功能，如果我们参考你的例子，我们会在输入方面对其进行分解。

```
"--abcd-" <=> ("--" ++ ("abcd" ++ "-")) 
```

其中， (++) 是连接运算符，

```
"left," ++ "middle," ++ "right" => "left,middle,right" 
```

现在，您是否注意到以下财产的持有？

```
(length "--") + (length "abcd") + (length "-") = 7 
```

有什么灵感吗？

最后的提示，尝试将以下指令评估为 ghci，

```
replicate 2 '-' 
```

让我知道，如果您还有其他问题，但剩下的算术部分似乎很简单，我的意思是，它不依赖于一些 Haskell 知识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T00:41:58.183

使用宽度并将其除以一半以找到中位数。您将遇到以非整数中位数结束的特殊情况。这可以使用天花板和地板功能来解决。然后你可以用中位数做一些事情......比如填充的索引。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-08T01:17:32.887

你可能需要

复制，长度，地板，++

函数的骨架可能类似于

复制...++...++ 复制....

... 必须充满一些东西。

# javascript - JSONP、Portholes 和其他跨域策略

> ID：15284692
> 
> 赞同：1
> 
> 时间：2013-03-08T00:39:27.930
> 
> 标签：javascript, cross-domain

我目前正在开发一个将使用至少两个域的 SaaS 平台：

*   (a) [http://example.com](http://example.com)
*   (b) [https://example.com](https://example.com)

并且可能会使用其他自定义域...

*   (c) [http://example.net](http://example.net)
*   (d) [http://example.org](http://example.org)
*   (e) [https://example.net](https://example.net)
*   (f) [https://example.org](https://example.org)

我正在尝试设计一种策略，以在使用所有域时启用相当多的安全性，同时将所有远程调用和“小部件”交互整合到*Domain(b)* [ [https://example. com](https://example.com) ]。

（快速说明 - 我使用“小部件”作为一般术语。这些在源 HTML 页面上，而不是 iframe 插件或 javascript 文档写入。）

在浏览了关于 Portholes、JSONP、跨域脚本、浏览器安全模型等的大量文档之后……我想出了这个总体思路。我希望得到一些反馈...

1.  登录到“网络”会为*Domain(b)*创建一个辅助 cookie -- *WidgetSession*
2.  访问所有域获取 Domain(b)/javascript/utils.js
3.  访问 Domain(b) 以外的域获取 Domain(b)/api/widget-session.js ，它有一个回调来将活动的*WidgetSession*注册到 utils.js javascript 包中。
4.  所有 API 交互都通过*WidgetSession* cookie 进行，该 cookie 仅对一定数量的活动有效。

使用这种策略，我似乎能够绕过所有浏览器安全锁定，涉及的工作不多，并且对消费者的风险/风险最小化+很少。

谁能指出任何陷阱或提供更好的建议？

我尝试采用 iframe 方法（使用 porthole.js 库），它可以跨域工作，但是在涉及协议时，我一直在浏览器中被阻止。这听起来更简单、更安全，尽管它不会从缓存中受益太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:44:01.697

据我了解，来自 3rd 方域的 cookie 已经被 safari 拒绝，并且将来也会被 Firefox 拒绝。

此外，将 JSONP 与 cookie 结合使用（总是？）容易受到 CSRF 攻击。

**我在stackoverflow上的编辑**评论被破坏了，所以在这里回复。Firefox/Safari 的问题是猜测，所以我不能 100% 确定。实际上，我认为最好的方法是 iframe 方法。我猜“舷窗”就是这样做的。如果您在跨越 http / https 时遇到问题，请确保您同时支持两者。如果“客户端”在 https url 上运行，您的 iframe 也应该从 https 提供。

# ruby - 将 pp 的结果（或输出到控制台的任何内容）放入字符串

> ID：15284694
> 
> 赞同：36
> 
> 时间：2013-03-08T00:39:29.490
> 
> 标签：ruby

我们知道

```
require 'pp'
a=["value1", "value2", "value3"]
pp a 
```

pretty 将数组作为输出打印到控制台。如何将漂亮的输出转换为字符串（包含使事情变得漂亮的换行符的字符串等）？

...目的是从方法中返回那个漂亮的字符串。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-08T00:47:20.603

```
string_value = a.pretty_inspect 
```

`#pretty_inspect`当您第一次需要“pp”时也会出现 - 请参阅：[http ://ruby-doc.org/stdlib-2.1.0/libdoc/pp/rdoc/Kernel.html#method-i-pretty_inspect](http://ruby-doc.org/stdlib-2.1.0/libdoc/pp/rdoc/Kernel.html#method-i-pretty_inspect)

如果您想要输出到`irb`控制台的版本是

```
 string_value = a.inspect 
```

并且没有任何必要的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T01:53:11.167

这是捕获以下输出的一种[非常简单](http://www.ruby-forum.com/topic/43725#9018)`pp`的方法：

```
需要'pp'

asdf = {'a' => 1, :b => 2, 'c' => %w[ho daddy]}
foo = PP.pp(asdf, '')
放富
=> {"a"=>1, :b=>2, "c"=>["ho", "daddy"]}

```

捕获 STDOUT，它是和使用的默认通道，`puts`以及`print`诸如`pp`搭载之类的东西，有点复杂：

```
require 'pp'
require 'stringio'

asdf = {'a' => 1, :b => 2, 'c' => %w[ho daddy]}
puts 'Writing to STDOUT...'
pp asdf

# remember the old STDOUT stream...
old_stdout = $stdout

# ...and create a new stream that writes to a string.
captured_stdio = StringIO.new('', 'w')
$stdout = captured_stdio

# This is all captured...
puts 'Capturing to buffer...'
pp asdf

# reset STDOUT
$stdout = old_stdout
puts 'Capturing off...'

# show what we got...
puts captured_stdio.string 
```

以及打印的内容：

```
Writing to STDOUT...
{"a"=>1, :b=>2, "c"=>["ho", "daddy"]}
Capturing off...
Capturing to buffer...
{"a"=>1, :b=>2, "c"=>["ho", "daddy"]} 
```

上面的最后两行是`captured_stdio`通过替换正常`$stdout`通道来存储的。写入的任何内容（将是 STDOUT）都已存储。切换回原始通道恢复正常打印，并停止将其他任何内容写入`captured_stdio`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-02T09:19:56.757

另一种使用 stringio 的方法，无需更改 $stdout：

```
require 'pp'
require 'stringio'

a=["value1", "value2", "value3"]

sio = StringIO.new
PP.pp( a, sio )

puts sio.string 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T01:51:53.163

如果要将输出保存为字符串，可以使用`stringio`

这是一个例子：

```
#!/usr/bin/env ruby

require 'stringio'
require 'pp'

def output_to_string
  sio = StringIO.new
  old_stdout, $stdout = $stdout, sio
  yield
  $stdout = old_stdout # restore stdout
  sio.string
end

result = output_to_string do
  puts "hello"
  pp ["value1", "value2", "value3"]
end

puts "result: #{result}" 
```

如果您执行此代码，您将得到：

```
result: hello
["value1", "value2", "value3"] 
```

# html - 图像徽标未重定向到另一个页面

> ID：15284698
> 
> 赞同：0
> 
> 时间：2013-03-08T00:39:57.710
> 
> 标签：html, css

我在一个标签内给出了我的标志......但是当我点击标志时它不会重定向到另一个页面......只有当我点击标志的底部时它才会重定向......如何制作标志重定向到另一个页面.......在下面提供我的代码......

[http://jsfiddle.net/KNPZB/10/embedded/result/](http://jsfiddle.net/KNPZB/10/embedded/result/)

```
.navbar .brand {
float: left;
display: block;
padding: 8px 20px 12px;
margin-left: -20px;
font-size: 20px;
font-weight: 200;
line-height: 1;
color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:52:17.553

这是因为你有`<div class="nav-collapse collapse" style="height: 0px;">`超过标志。

添加

```
position: relative;
z-index: 1000; 
```

到`.navbar .brand {}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:49:32.363

尝试将`height`属性设置为图像的实际高度。

# debugging - FB 调试器发现我的 og:image 不够大并强制分配一个，但我的所有文件都很大

> ID：15284701
> 
> 赞同：2
> 
> 时间：2013-03-08T00:40:07.823
> 
> 标签：debugging, facebook-graph-api, thumbnails

我正在使用 joomla。在 FB 调试器中测试页面时： http: [//tommigotphotography.com/en/galleries/wildlife](http://tommigotphotography.com/en/galleries/wildlife)

它正确找到了所有图像，但警告我提供的 og:image 太小，它会选择它为缩略图找到的图像之一。

但是，我所有的图像都是最小 400 像素。

我使用了一个名为 Content - Perfect Link with Article Images on Facebook PRO 的 joomla 插件来强制动态生成 og 属性，旨在保证我的文章中的所有图像都被 FB 拾取。

根据 Graph API 和抓取的 URL 输出，该插件似乎工作正常。

调试器如何找到所有图像，所有图像都大于 FB 要求并且仍然抛出我：

```
Provided og:image is not big enough. Please use an image that's at least 200x200 and     preferably 1500x1500\. (Maximum image size is 5MB.) Image     'http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-    images_wildlife_wildlife-200902201651-tmp.jpg' will be used instead. 
```

这是原始开放图显示的内容：

```
Meta Tag    <meta property="fb:admins" content="1316152835" />
Meta Tag    <meta property="og:title" content="wildlife" />
Meta Tag    <meta property="og:type" content="article" />
Meta Tag    <meta property="og:url"  content="http://tommigotphotography.com/en/galleries/wildlife" />
Meta Tag    <meta property="og:site_name" content="TomMigotPhotography" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201303021431-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201303021355-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201208191617-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201208191511-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201207231745-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201205261600-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201201221557-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201112220317-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-201005061325-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-200902201651-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-200902201509-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-200902201157-tmp.jpg" />
Meta Tag    <meta property="og:image" content="http://tommigotphotography.com/media/djmediatools/cache/700x400-toheight-images_wildlife_wildlife-200902181319-tmp.jpg" /> 
```

我要在 FB 上发布一些公告，直到 FB 让我能够选择合适的图像，我才能这样做。

我希望我已经彻底了解了他的细节。

干杯，汤姆

# eclipse - Eclipse EGIT：当前分支未配置为拉取

> ID：15284706
> 
> 赞同：12
> 
> 时间：2013-03-08T00:40:33.710
> 
> 标签：eclipse, git, egit

我正在和我的一个朋友一起开发一个基于瓷砖的 RPG，他不得不离开几周，我们决定是时候使用版本控制/git。我开始后悔了。几个小时后，我们设法让它工作到这样的地步：

1.  我在 github 上创建了一个存储库，将他添加为协作者。
2.  我将eclipse中的项目提交到git，推送
3.  他拉，把它导入他的工作区
4.  我做了一些更改，提交推送，他拉动更改。
5.  他进行了一些更改，提交并成功推送。更改出现在[repo](https://github.com/arynaq/KLT)
6.  我尝试进行更改，出现错误（见图），但不成功。
7.  我做了一些改变，尝试提交，得到错误，不成功。

本质上，我们锁定了一个他可以更新而我不能更新的项目。如果这很重要，我是回购所有者。

在尝试“从上游获取”时： ![](../Images/7a988fba0562a602eafce03a84f0fbca.png)

在尝试“拉”时： ![](../Images/ffbde7a78be6a221adc0bbb0f5cb569e.png)

在提交和推送时： ![](../Images/60f940f9a9b55a53f06f98487bcaefe1.png)

我们现在几乎陷入困境。我们宁愿不使用Skype来发送文件，在某些时候我们将成为专业人士，这似乎太乏味了。

按照要求： ![在此处输入图像描述](../Images/77cdf7b411fecaa74da3338e280594c7.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T07:42:22.693

EGit 中的错误消息“此分支未配置为拉取”是本地创建并推送的分支的典型代表。

那不会设置该分支的合并部分。
请参阅“[当前分支未配置为 pull 配置中未`branch.master.merge`找到 key 的](https://stackoverflow.com/a/9711056/6309)值”

```
[branch "master"]
  remote = origin
  merge = refs/heads/master 
```

要解决这个问题，一种方法是重命名当前`master`分支，并且在`Git Repositories`视图中：

*   右击“ `Branches`”/“ `Switch to`”/“ `New Branch`”
*   下拉“ `Source ref`”列表，选择“ `master`”分支（**拉取策略**“ `merge`”、“ `Checkout new branch`”勾选）
*   点击“ `finish`”

应该正确配置新分支

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-21T20:29:40.980

这在带有 EGit 的 Eclipse IDE 中对我有用：

```
    打开窗口->显示视图->其他->Git->Git Repositories
    在 Git 存储库视图中右键单击您的存储库 -> 属性
    单击“添加条目...”按钮
    键：branch.master.remote
    价值：原产地
    好的
    单击“添加条目...”按钮
    键：branch.master.merge
    价值：裁判/负责人/大师
    好的
    右键单击您的回购 - >拉

```

顺便提一句。当拉动也是主控时，我正在从远程和本地分支中提取主控。

# jquery - 如何使用 jQuery 获取不同的 ID？

> ID：15284710
> 
> 赞同：2
> 
> 时间：2013-03-08T00:40:52.893
> 
> 标签：jquery

我有以下 jQuery 代码，它读取与代码中显示的 ID 匹配的网页的所有 ID：

```
$('.tooltip[id*="_UI_A_"]').each(function(){
    console.log(this.getAttribute('id'));
}); 
```

但是，在运行此代码时，它会返回以下 ID：

```
P2000_UI_A_5000_0
P2000_UI_A_5000_1
P2000_UI_A_5000_2
P2000_UI_A_5000_3
P2000_UI_A_5065
P2000_UI_A_5100 
```

我的问题是，基于上面返回的 ID，我不想返回任何“_0 到 _3”ID（这是一个无线电组），而只想返回不同的值，当涉及到这些 ID 时。

所以我最终所追求的数据实际上只是：

```
P2000_UI_A_5000
P2000_UI_A_5065
P2000_UI_A_5100 
```

如何根据我的原始 jQuery 代码实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:47:05.547

**更新**

忽略前面的答案，因为它`.unique()`应该只用于 DOM 元素的数组（*不是任何数组*）

改用它（*再次使用[`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)and[`slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)来获得正确的部分`id`*）

```
var allIds = $('.tooltip[id*="_UI_A_"]').map(function () {
    return this.id.split('_').slice(0, 4).join('_');;
    }).get();

var uniqueIds = $.grep(allIds,function(v,k){
                return $.inArray(v,allIds) === k;
            }); 
```

该变量保存按它们在 DOM 中出现的顺序列出`uniqueIds`的 id（*固定）*

要使用每个`id`，您可以在数组上使用任何循环或

```
$.each( uniqueIds, function(index, value){
  // do what you want with value 
  console.log(value);
}); 
```

* * *

**原始答案**（*使用错误的功能*）

 ~~怎么样

```
$.unique( $('.tooltip[id*="_UI_A_"]').map(function(){
    return (this.id.split('_').slice(0,4).join('_');
}).get() ); 
```

~~该代码使用该[`$.unique()`](http://api.jquery.com/jQuery.unique/)方法来保持结果的唯一性，并且还通过使用和仅保留每个字符串的前 4 部分（*由 分隔的部分）`_`*[`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)[`slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:47:54.983

您可以使用`:not`选择器：

```
$('.tooltip[id*="_UI_A_"]:not(radio)').each(function(){
    console.log(this.getAttribute('id'));
}); 
```

我不完全确定这是否有效，但它比`.map()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:23:48.380

您可以使用`.filter()`：

```
$('.tooltip[id*="_UI_A_"]').filter(function(){
    return this.id && this.id.match(/_UI_A_\d+$/);
}); 
```

这将为您提供一个 jQuery 对象，其中仅包含所需的对象。您显然可以调整正则表达式以包含或排除您想要的任何 id 集。如果您只想得到一个包含 ID 的字符串数组，那么您可以这样做：

```
var ids = [];
$('.tooltip[id*="_UI_A_"]').each(function(){
    if (this.id && this.id.match(/_UI_A_\d+$/)) {
        ids.push(this.id);
    }
}); 
```~~

# c# - Visual Studio 有序测试运行两次

> ID：15284712
> 
> 赞同：4
> 
> 时间：2013-03-08T00:40:55.547
> 
> 标签：c#, visual-studio, unit-testing, visual-studio-2012, mstest

所以我有一个非常简单的设置来初始化 LocalDB 数据库以运行一些集成测试。

在我的设置中，我正在初始化我的测试，如下所示：

```
[AssemblyInitialize]
public static void AssemblyInitialize(TestContext context)
{
    AppDomain.CurrentDomain.SetData(
    "DataDirectory", Path.Combine(AppDomain.CurrentDomain.BaseDirectory, ""));

    System.Data.Entity.Database.SetInitializer(new MyDatabaseInitializer());
}

public class MyDatabaseInitializer : System.Data.Entity.DropCreateDatabaseAlways<Context>
{
    protected override void Seed(Context context)
    {
        // Add entities to database.
        context.Blogs.AddOrUpdate(x => x.Title, new Blog
        {
            BlogId = Guid.NewGuid(),
            Title = "some Title"
        });

        context.SaveChanges();
    }
} 
```

我有三个这样的测试：

```
[TestMethod]
[DeploymentItem("Database1.mdf")]
[DeploymentItem("UnitTestProject1.dll.config")]
public void initialize()
{

}

[TestMethod]
public void TestMethod1()
{
    var ctx = new Context();

    var res = ctx.Blogs.ToList();

    res.Should().NotBeNull().And.HaveCount(1);
}

[TestMethod]
public void it_should_be_able_to_add_a_new_blog()
{
    var ctx = new Context();

    ctx.Blogs.Add(new Blog {BlogId = Guid.NewGuid(), Title = "OMFG " + DateTime.Now.ToShortDateString()});

    ctx.SaveChanges();

    ctx.Blogs.Should().HaveCount(2);
} 
```

我有一个 OrderedTest 文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<OrderedTest name="orderedtest1" storage="c:\users\jolmos\documents\visual studio 2012\projects\consoleapplication9\unittestproject1\orderedtest1.orderedtest" id="cc545e78-c463-4f38-88fc-ac8b49b420be" xmlns="http://microsoft.com/schemas/VisualStudio/TeamTest/2010">
  <TestLinks>
    <TestLink id="d0380f08-e99f-ebae-e5cd-9ae8196521cb" name="initialize" storage="bin\debug\unittestproject1.dll" type="Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <TestLink id="5b688acc-bf10-4c7e-4b60-69d8596bdd90" name="TestMethod1" storage="bin\debug\unittestproject1.dll" type="Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <TestLink id="0c248cf5-fa4f-6c24-b151-3ffdbae30f10" name="it_should_be_able_to_add_a_new_blog" storage="bin\debug\unittestproject1.dll" type="Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </TestLinks>
</OrderedTest> 
```

![在此处输入图像描述](../Images/7fbbdd06e34ec4406ee21ebde9f9c889.png)

顺便说一句，测试效果很好……但是……

**出于某种原因，我的测试运行了两次**

所以我在每个测试上都有一个断点，当我点击*测试 | 调试 | 所有 Tests*，**即使`AssemblyInitialize`方法执行两次，测试也会执行两次 =(**

### 更新 1

我刚刚发现测试是在我的文件夹下的两个不同的文件夹中创建的，`TestResults`相差1秒

*下图中的名字只是我的网络用户名*

![在此处输入图像描述](../Images/0643f228c89e0d8e349b8c945d3bef6e.png)

我的配置中缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T07:42:56.217

> 出于某种原因，我的测试运行了两次

您的测试运行两次，因为它们作为简单的单元测试和有序测试的一部分运行。

> 甚至 AssemblyInitialize 方法都执行了两次

如果您打开该`bin\debug`文件夹，您将看到您的 orderedtest 包含在其中`orderedtest1.orderedtest`。您已经打开它，所以您看到它是一个简单的 xml 文件。此文件未编译到程序集中。

当 Visual Studio 开始执行你的测试时，它首先选择单元测试。因此，它初始化它们包含的程序集。当它们完成时，它不知道有序测试包含来自同一程序集的测试，因此`AssemblyCleanup`执行。当它开始执行有序测试时，它必须重新初始化程序集以测试其中包含的单元测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T01:05:11.340

这是因为您的 Ordered Test 本身就是一个测试，因此运行所有测试意味着所有单独的测试都会像 Ordered 测试一样运行，因此其中包含的那些测试将运行两次。

您可以使用测试列表编辑器有选择地运行测试（*Test\Windows\Test List Editor*）。

# python - Python gtk 显示多个小部件

> ID：15284713
> 
> 赞同：0
> 
> 时间：2013-03-08T00:41:00.450
> 
> 标签：python, gtk

我正在尝试通过 gtk 和 webview 以及关闭按钮显示 HTML，但我收到一条错误消息，提示“GTKWindow 一次只能包含一个小部件”

我从 pygtk 文档中获得了一个关闭窗口示例，并尽我所能对其进行了调整

```
#!/usr/bin/env python

# example helloworld.py

import pygtk
pygtk.require('2.0')
import gtk
import webkit
import gobject

class HelloWorld:

    # This is a callback function. The data arguments are ignored
    # in this example. More on callbacks below.
    def hello(self, widget, data=None):
        print "Hello World"

    def delete_event(self, widget, event, data=None):
        # If you return FALSE in the "delete_event" signal handler,
        # GTK will emit the "destroy" signal. Returning TRUE means
        # you don't want the window to be destroyed.
        # This is useful for popping up 'are you sure you want to quit?'
        # type dialogs.
        print "delete event occurred"

        # Change FALSE to TRUE and the main window will not be destroyed
        # with a "delete_event".
        return False

    def destroy(self, widget, data=None):
        print "destroy signal occurred"
        gtk.main_quit()

    def __init__(self):
        # create a new window
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)

        # When the window is given the "delete_event" signal (this is given
        # by the window manager, usually by the "close" option, or on the
        # titlebar), we ask it to call the delete_event () function
        # as defined above. The data passed to the callback
        # function is NULL and is ignored in the callback function.
        self.window.connect("delete_event", self.delete_event)

        # Here we connect the "destroy" event to a signal handler.  
        # This event occurs when we call gtk_widget_destroy() on the window,
        # or if we return FALSE in the "delete_event" callback.
        self.window.connect("destroy", self.destroy)

        html = "<h1>Hello!</h1>"

        view = webkit.WebView()
        view.load_html_string(html, '')
        self.window.add(view)

        # Sets the border width of the window.
        self.window.set_border_width(10)

        # Creates a new button with the label "Hello World".
        self.button = gtk.Button("Close Window")

        # When the button receives the "clicked" signal, it will call the
        # function hello() passing it None as its argument.  The hello()
        # function is defined above.
        self.button.connect("clicked", self.hello, None)

        # This will cause the window to be destroyed by calling
        # gtk_widget_destroy(window) when "clicked".  Again, the destroy
        # signal could come from here, or the window manager.
        self.button.connect_object("clicked", gtk.Widget.destroy, self.window)

        # This packs the button into the window (a GTK container).
        self.window.add(self.button)

        # The final step is to display this newly created widget.
        self.button.show()

        # and the window
        self.window.show()

    def main(self):
        # All PyGTK applications must have a gtk.main(). Control ends here
        # and waits for an event to occur (like a key press or mouse event).
        gtk.main()

# If the program is run directly or passed as an argument to the python
# interpreter then create a HelloWorld instance and show it
if __name__ == "__main__":
    hello = HelloWorld()
    hello.main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:38:03.730

从 子类化的每个小部件`GtkBin`只能包含一个小部件。`GtkWindow`是 的子类`GtkBin`。使用`GtkBox`、或类似容器作为中间容器`GtkGrid`，`GtkPaned`在您的窗口中添加多个小部件。

```
GtkWindow → GtkBox → 1\. YourWidget
                   → 2\. SomeOtherWidget 
```

# xstream - Xstream XML 到 JavaObject 不显示 xml 标记文本

> ID：15284714
> 
> 赞同：0
> 
> 时间：2013-03-08T00:41:03.610
> 
> 标签：xstream

```
Need help! 
```

我有 xml 并使用 Xstream 将其转换为 java 对象，当我将相同的 java 对象转换为 xml 并验证 xml 标签及其值时，我找不到值 xml 标签的文本：

```
XML :

<?xml version="1.0" encoding="UTF-8"?>
<record name="ncwtrial.xml" type="content">
  <item name="Root">
        <value>
          <item name="Main">
             <value>
                <item name="ContentID">
                 <value>007NMG</value>
                </item>
             </value>
           </item>
         </value>
    </item>
 </record> 
```

// 但是在验证时得到这个：（值没有到来）

```
<?xml version="1.0" encoding="UTF-8"?>
<record name="ncwtrial.xml" type="content">
  <item name="Root">
        <value>
          <item name="Main">
             <value>
                <item name="ContentID">
                 <value/>
                </item>
             </value>
           </item>
         </value>
    </item>
 </record> 
```

//我的java类：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    XStream xstream = new XStream(new DomDriver());

    xstream.alias("record",Record.class);
    xstream.alias("item",Item.class);
    xstream.alias("value",Value.class);

    // use attribute
    xstream.useAttributeFor("name", String.class);
    xstream.useAttributeFor("type", String.class);
    xstream.addImmutableType(Value.class);

    xstream.addImplicitCollection(Item.class, "value");
    xstream.addImplicitCollection(Value.class, "item");
   // xstream.aliasType("value", String.class);

    xstream.processAnnotations(Item.class);
    xstream.processAnnotations(Value.class);              

    Record record = (Record) xstream.fromXML(new File("C:/pankaj/temp/original.xml")); 

      // verifying Java object by converting it back to XML  
    System.out.println(xstream.toXML(record));
}

// Record.java

    /**
     * 
     */
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "item"
    })

    @XmlRootElement(name = "record")
    public class Record {

        @XmlAttribute(required = true)
        @XmlJavaTypeAdapter(CollapsedStringAdapter.class)

        @XStreamAlias(value="type")
        protected String type;

        @XmlAttribute(required = true)
        @XmlJavaTypeAdapter(NormalizedStringAdapter.class)
        @XStreamAlias(value="type")
        protected String name;

        @XStreamImplicit
        protected List<Item> item;

        /**
         * Gets the value of the type property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getType() {
            return type;
        }

        /**
         * Sets the value of the type property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setType(String value) {
            this.type = value;
        }

        /**
         * Gets the value of the name property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getName() {
            return name;
        }

        /**
         * Sets the value of the name property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setName(String value) {
            this.name = value;
        }

        /**
         * Gets the value of the item property.
         * 
         * <p>
         * This accessor method returns a reference to the live list,
         * not a snapshot. Therefore any modification you make to the
         * returned list will be present inside the JAXB object.
         * This is why there is not a <CODE>set</CODE> method for the item property.
         * 
         * <p>
         * For example, to add a new item, do as follows:
         * <pre>
         *    getItem().add(newItem);
         * </pre>
         * 
         * 
         * <p>
         * Objects of the following type(s) are allowed in the list
         * {@link Item }
         * 
         * 
         */
        public List<Item> getItem() {
            if (item == null) {
                item = new ArrayList<Item>();
            }
            return this.item;
        }

        @Override
        public String toString() {
            return "Record [type=" + type + ", name=" + name + ", item=" + item
                    + "]";
        }

    }

// Item.java

    /**
     * 
     */
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "item"
    })

    @XmlRootElement(name = "record")
    public class Item {

        @XmlAttribute(required = true)
        @XmlJavaTypeAdapter(NormalizedStringAdapter.class)
        @XStreamAlias(value="name")
        protected String name;

       /*@Override
        public String toString() {
            return "Item [name=" + name + ", value=" + value + "]";
        }*/

        @XStreamImplicit 
         protected List<Value> value;

        /**
         * Gets the value of the name property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getName() {
            return name;
        }

        /**
         * Sets the value of the name property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setName(String value) {
            this.name = value;
        }

        /**
         * Gets the value of the value property.
         * 
         * <p>
         * This accessor method returns a reference to the live list,
         * not a snapshot. Therefore any modification you make to the
         * returned list will be present inside the JAXB object.
         * This is why there is not a <CODE>set</CODE> method for the value property.
         * 
         * <p>
         * For example, to add a new item, do as follows:
         * <pre>
         *    getValue().add(newItem);
         * </pre>
         * 
         * 
         * <p>
         * Objects of the following type(s) are allowed in the list
         * {@link Value }
         * 
         */

       public List<Value> getValue() {
            if (value == null) {
                value = new ArrayList<Value>();
            }
             return this.value;
        }

    }

    // Value.java

    /**
     * 
     */
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "value"
    })

    @XmlRootElement(name = "item")
    public class Value {

        @XmlValue
        public String value;

        @XStreamImplicit(itemFieldName="item")
        protected List<Item> item;

        /**
         * Gets the value of the value property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getvalue() {
            return value;
        }

        @Override
        public String toString() {
            return "Value [value=" + value + ", item=" + item + "]";
        }

        /**
         * Sets the value of the value property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setvalue(String value) {
            this.value = value;
        }

        public List<Item> getItem() {
            if (item == null) {
                item = new ArrayList<Item>();
            }
            return this.item;
        }

    } 
```

# mysql - 返回大型结果的组合 SQL 查询

> ID：15284716
> 
> 赞同：1
> 
> 时间：2013-03-08T00:41:05.090
> 
> 标签：mysql, sql, performance, join

我需要从 mysql 数据库收集数据，以使我们能够向在给定天数内未活跃的客户发送促销电子邮件，但仅限于从未向我们注册促销积分的客户。数据库比较大，有超过50,000个客户，查询没有注册积分的客户的customer_id单独处理一个多小时。所以我想，如果我把范围缩小到在给定时间内没有登录的客户，然后只搜索那些 customer_id，它会更快。但是，我尝试组合这两个查询完全失败，返回“操作数应包含 1 列”错误。

考虑到我需要在查询中接收的数据，是否有可能实现。

第一个需要 1 小时的查询：

```
SELECT c.customers_id
FROM customers c 
LEFT JOIN codes_redeem_history pc 
ON pc.customer_id=c.customers_id
WHERE pc.customer_id IS NULL 
```

在给定时间内第二次查询客户：

```
SELECT ci.customers_info_date_of_last_logon, ci.customers_info_id, c.customers_email_address, c.customers_lastname, c.customers_firstname 
FROM customers c, customers_info ci 
WHERE c.customers_id = ci.customers_info_id 
GROUP BY c.customers_email_address 
HAVING max(ci.customers_info_date_of_last_logon) <= subdate(now(),INTERVAL 30 DAY) 
ORDER BY c.customers_lastname, c.customers_firstname ASC 
```

我是如何尝试的，但未能将它们结合起来：

```
SELECT c.customers_id
FROM customers c 
LEFT JOIN codes_redeem_history pc 
ON pc.customer_id=c.customers_id
WHERE pc.customer_id IS NULL
AND c.customers_id
IN
(Select ci.customers_info_date_of_last_logon, ci.customers_info_id, c.customers_email_address, c.customers_lastname, c.customers_firstname 
FROM customers c, customers_info ci 
WHERE c.customers_id = ci.customers_info_id 
GROUP BY c.customers_email_address 
HAVING max(ci.customers_info_date_of_last_logon) <= subdate(now(),INTERVAL 30 DAY) 
ORDER BY c.customers_lastname, c.customers_firstname ASC) 
```

我可以从错误消息中看到，它不允许在查询的 IN(SELECT ) 部分进行如此复杂的查询，但我不知道如何重新排列它，或者它是否可行。

SQL 大师有什么建议吗？

谢谢

在要求略有变化之后，我可以在这方面提供更多帮助。

除了较早的答案，我尝试稍微更改查询以允许选择时间跨度，而不是将其固定为 30 天。我使用了 HAVING MAX( ci.customers_info_date_of_last_logon ) >= '" . $ndate . "' ，其中 $ndate 是一个包含所需日期的变量。显然它不起作用，因为日期与 30 天不同。我似乎无法使用 WHERE 条件代替 HAVING MAX。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:44:41.903

第一个查询需要很长时间才能完成的原因是，*我几乎可以肯定*，因为您缺少定义它们关系的列的索引，通过执行以下行来更改表，

```
ALTER TABLE codes_redeem_history ADD INDEX (customer_id);
ALTER TABLE customers ADD INDEX (customers_id);
ALTER TABLE customers_info ADD INDEX (customers_info_id); 
```

完整的查询，

```
SELECT  c.customers_id
FROM    customers c 
        LEFT JOIN codes_redeem_history pc 
        ON pc.customer_id=c.customers_id
        LEFT JOIN
        (
            Select  c.customers_id 
            FROM    customers c 
                    INNER JOIN customers_info ci
                        ON c.customers_id = ci.customers_info_id 
            GROUP   BY c.customers_email_address 
            HAVING  MAX(ci.customers_info_date_of_last_logon) <= subdate(now(),INTERVAL 30 DAY)
        ) d ON c.customers_id = d.customers_id
WHERE   pc.customer_id IS NULL AND 
        d.customers_id IS NOT NULL 
```

**更新 1**

```
SELECT  c.customers_id
FROM    customers c 
        INNER JOIN customers_info ci
            ON c.customers_id = ci.customers_info_id 
        LEFT JOIN codes_redeem_history pc 
            ON c.customers_id = pc.customer_id
WHERE   pc.customer_id IS NULL
GROUP   BY c.customers_email_address 
HAVING  MAX(ci.customers_info_date_of_last_logon) <= subdate(now(),INTERVAL 30 DAY) 
```

# ruby-on-rails - rails 结果集和更新到/从多个数据库

> ID：15284719
> 
> 赞同：1
> 
> 时间：2013-03-08T00:41:22.940
> 
> 标签：ruby-on-rails, database, client, resultset

我有一个相当独特的情况。首先，我们有一个用 php 编写的遗留应用程序正在迁移到 rails。因为我们是 saas，所以我们有一个 APPLICATION 数据库，其中包含大量主数据，例如登录数据，其中包含 db 身份验证凭据，最终我们使用这些凭据连接到 CLIENT 数据库和 webapp。由于客户端安全等原因，所有数据都必须隔离到各个客户端数据库中。我们对此没有任何选择。

为了更进一步，CLIENT 数据库保存了诸如运输和库存数据之类的数据，我们需要从我们的主 APPLICATION 数据库/webapp 访问这些数据。

所以，我们要解决的问题就是这个。APPLICATION 数据库/webapp 有一个管理部分，因此我们可以管理所有客户的发货和库存。这个 webapp 需要查看所有客户的发货和库存，以及更新发货状态（在途、已发货）和库存。

因此，我还没有弄清楚创建一个使用 APPLICATION 数据库的应用程序的 rails 应用程序的最佳方法是什么，然后查询和更新隔离的 CLIENT dbs 中的所有 CLIENT 数据。

我会尽量缩短这一点。

Master APPLICATION webapp 有一个界面，可以在所有 100 个 CLIENT dbs 中搜索发货日期并在表格中显示发货数据。此外，我们需要深入了解货件行以更新任何库存数据并更新货件状态等。

我想我的问题是这在 rails 中甚至是可能的，还是由于您在 database.yml 文件中定义数据库连接的方式而限制了 ActiveRecord？我知道有一种方法可以解决这个问题，但是我对 Rails 还很陌生，我想确保我们做对了。显然，性能并不是超级关键，但就这样吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:47:50.500

也许试试[DbCharmer](http://dbcharmer.net/) ( [github](https://github.com/kovyrin/db-charmer) )。它可能支持你想要做的事情。或者也许是[数据结构](https://github.com/mperham/data_fabric)

# javascript - 如何在运行长 javascript 代码时处理用户输入事件？

> ID：15284726
> 
> 赞同：3
> 
> 时间：2013-03-08T00:41:41.660
> 
> 标签：javascript, events, settimeout, delay, setinterval

我有一个长时间运行的 javascript 代码来处理某种渲染（webgl）。这是某种“自适应渲染”，我会随着时间的推移越来越精确地计算表面（这意味着场景的“分辨率”变得越来越精确）。

只要用户不按键或移动鼠标，我希望它运行。[如此处](https://stackoverflow.com/questions/672732/prevent-long-running-javascript-from-locking-up-browser)所述，我可以使用 setTimeout 或 setInterval，给 javascript 一些时间来处理其他事件。

我已经在这个[jsFiddle](http://jsfiddle.net/uLVD6/)上测试了 setTimeout 和 setInterval 延迟，我观察到以下结果：

```
setTimeout delay: 15-20 ms
setInterval delay: 2-4 ms 
```

它很快，但在我的情况下仍然很难使用。我需要能够做出反应，完成一些计算并在**16 毫秒**内渲染，以给用户以**60 fps**运行的印象。

所以这里的问题（S）：

1）是否有其他（更聪明的）方法来检查是否有一些传入的用户输入事件需要处理？

2）还有什么我可以用来制作“用户可中断的长时间运行代码”的东西吗？（也许是网络工作者？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:54:44.550

您必须将代码分成小块并在计时器滴答声上运行每个块。在每个计时器滴答之间，可以处理用户事件，如果您希望停止长时间运行的计时器驱动进程的执行，您可以设置一个标志。

没有其他方法可以处理事件或检查未决事件。您必须返回到主事件循环，这意味着您的 javascript 执行线程需要完成。而且，在返回到事件循环后，您可以执行更多代码的唯一方法是响应事件或使用计时器。这就是 javascript 的编写和架构方式。

您唯一的其他选择是使用网络工作者，但它们不能接触 DOM，不能在旧版浏览器中工作，并且只能通过消息传递与主事件循环进行通信。适合做计算，但不适合做动画。

# android - 如何使用 Webview 获取 Google OAuth2 令牌

> ID：15284727
> 
> 赞同：1
> 
> 时间：2013-03-08T00:41:48.233
> 
> 标签：android, oauth-2.0, android-webview, access-token, google-oauth

我正在尝试使用 webviews 在我的 android 应用程序中实现 OAuth2。

我遇到的一个问题是在用户允许我的应用访问他们的帐户后，我被重定向到包含令牌的页面，但我无法获取令牌并将其设置为变量。

如何在我的 WebViewClient onPageFinished 方法中自动获取此令牌？

本来打算按页面标题去的，很容易搞定，但是发现页面标题好像有个截断的token（如果token是asdfgh.12345则标题只包含asdfgh）

似乎没有获取页面html的方法，所以我无法解析它并以这种方式获取。

我在某处读到应该设置 oauth_token cookie，但除非我错误地抓取 cookie，否则谷歌似乎没有设置 oauth_token cookie。

在尝试获取令牌时我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:07:57.217

我假设您使用令牌作为 response_type。

一种方法是重写 WebViewClient 的 shouldOverrideUrlLoading 方法：

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.startsWith(REDIRECT_URI)) {
            // grab the token from the url
            ...
            return true;
        }
        return false;
    }
}); 
```

# python - 将另一个元素添加到 python 迭代器

> ID：15284729
> 
> 赞同：-2
> 
> 时间：2013-03-08T00:41:51.700
> 
> 标签：python, dictionary

我通过一些黑盒函数在python中获得了一个对象*oData*（归类为可迭代对象）：

```
oData = someFunction() 
```

当我这样做时：

```
HttpResponse( oData ) 
```

我得到：

```
{'A':0.0, 'B':1.0, 'C':1.0 } 
```

我做不到

```
HttpResponse( type(oData) ) 
```

我只是收到一个 500 服务器错误。为什么这不仅仅是一个字符串？我如何让它输出我需要的信息？反正那是次要的。

**最终我想要做的是将 oData 作为一个字典对象，这样我就可以像这样向它添加一个元素：**

```
{ 'A':0.0, 'B':1.0, 'C':1.0, 'New':'myValue' } 
```

**我怎么做？**

----- 编辑：只是为了澄清一些事情......（也省略了上面一些不相关的信息）

oData 确实是具有`__iter__()`方法定义的不可变对象。我寻求的答案可能涉及以某种方式克隆其数据，以便我可以附加到它。我试过这个没有运气

```
oCopy = ( i for i in oData ) 
```

在 PHP 中，我会简单地收集键值对并将它们存储到关联数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:48:20.547

当您调用 时`type(oData)`，您会得到 - 不出所料 - 一个[`type`](http://docs.python.org/3/library/functions.html#type)不可迭代的对象（这甚至意味着什么？）。

您需要该对象的字符串表示形式。用于[`str`](http://docs.python.org/3/library/functions.html#str)：

```
HttpResponse( str(type(oData)) ) 
```

将为您提供类型的名称，并且

```
oData['New'] = 'myValue'
HttpResponse( str(oData) ) 
```

会返回类似的东西

```
{ 'A':0.0, 'B':1.0, 'C':1.0, 'New':'myValue' } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:30:50.780

根据您对另一个答案的评论，我打赌`oData`是[`namedtuple`](http://docs.python.org/2/library/collections.html#collections.namedtuple)s 的列表，并且`HttpResponse`正在做某种魔术将其转换为您看到的结果。观察这个演示，它给出了你提到的同样的错误：

```
>>> from collections import namedtuple
>>> X = namedtuple('X', ['A', 'B', 'C'])
>>> x = X(1,2,3)
>>> dict([x])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: dictionary update sequence element #0 has length 3; 2 is required 
```

这可以解释为什么你不能修改它。元组，命名或任何其他类型，都是不可变的。

我能想到的将其转换为 a 的最简单方法`dict`是使用[`vars`](http://docs.python.org/2/library/functions.html#vars)

```
>>> dict(vars(x))
{'A': 1, 'C': 3, 'B': 2} 
```

由于`someFunction`返回一个可迭代对象，因此您需要遍历每个元素以将所有行转换为`dict`s：

```
oDataDicts = [dict(vars(r)) for r in oData] 
```

如果您期望 1，您可以尝试提取第一个元素，但这意味着更多代码处理没有 1 的情况。

通常，调用`vars`返回 a `dict`，但对于`namedtuple`，它似乎返回 a [`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)。如果`OrderedDict`不打扰您，您可以停止对 的额外调用`dict`。

此外，我强烈建议您更明确地说明要包含在响应中的输出。依赖`HttpResponse`的行为可能会使以后更难记住代码应该做什么。如果您想发送 JSON 响应，将其显式转换为 JSON 将是一个好主意。

# c - C中的FIFO（命名管道）

> ID：15284733
> 
> 赞同：2
> 
> 时间：2013-03-08T00:42:08.323
> 
> 标签：c, named-pipes, fifo

最近，我的任务是定制我们小组经常使用的应用程序之一。该应用程序是用 C 语言编写的，我没有太多经验。我找到了一些我正在尝试做的功能示例，但到目前为止还无法将其完全集成到我的测试平台中。

要求很简单：打开一个命名管道并推送一些数据，以便另一个组可以读取管道并使用它做一些事情。必须这样做，以免中断服务器执行其操作。

我的应用程序有一个名为 history 的数组，其中包含我所追求的所有必要值。到目前为止，我尝试实现这一目标的结果喜忧参半。请看下面的代码片段：

```
DCmass_add_history(history, history_num);

int fd;
char * myfifo = "/tmp/fooPipe";

/* create the FIFO (named pipe) */
mkfifo(myfifo, 0666);

/* open FIFO (named pipe) */
fd = open(myfifo, O_WRONLY);
  for (i = 0; i < history_num; i++) {

  /* Write our data to our FIFO (named pipe) */
  fprintf(fd, "%d %d %f %f", history[i].id, history[i].clock, history[i].value, history[i].ns);

}
close(fd); 
```

我以前在使用`write`而不是时取得了一些成功，`fprintf`但无法将任何变量放入我的管道中。

从前面的堆栈溢出示例，[堆栈溢出示例](https://stackoverflow.com/questions/2784500/how-to-send-a-simple-string-between-two-programs-using-pipes)中，我能够得到一个基本的阅读器来测试我的管道，以及上面的基本代码来打开我的管道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:45:56.867

您在线收到的警告[`fprintf()`](http://man7.org/linux/man-pages/man3/sprintf.3.html)应该是一个提示。

如果你想使用，你必须使用它`fprintf()`打开一个，而不是：`FILE *`[`fopen()`](http://man7.org/linux/man-pages/man3/fopen.3.html)[`open()`](http://man7.org/linux/man-pages/man2/open.2.html)

```
FILE *fd = fopen(myfifo, "w"); 
```

并使用[`fclose()`](http://man7.org/linux/man-pages/man3/fclose.3.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T08:00:15.623

你可以这样写，如果你想使用 FifoFile

```
char * mesg;
// allocating for mesg; and then 

sprintf(msg, "%d %d %f %f", history[i].id, history[i].clock, history[i].value, history[i].ns);

write(fd, msg, sizeof(msg)); 
```

我希望，它对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:50:42.447

您需要保持对缓冲的严格控制。我想[setlinebuf()](http://man7.org/linux/man-pages/man3/setbuf.3.html)会有所帮助，但我总是喜欢使用 snprintf() 将变量格式化为缓冲区并 write() 完全在我的控制之下。一次整行。

使用 printf() 可能会发生更大的缓冲区，一旦在没有 setlinebuf() 的情况下积累了足够多的行，则只有部分行会格式化。通过显式使用 write() 和足够小的缓冲区以确保原子写入（检查本地操作系统的限制），您可以确保没有分割线。

读者在阅读 fifos 时需要非常小心，以注意到这样的分割线以继续阅读到 \n，但这里每个人都非常小心，这可能是你的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-07T21:54:57.650

这不会给你想要的

```
int fd; 
```

文件任务

```
FILE *fd = fopen(fileName , option); 
```

文件名，例如 temp.txt 、 database.txt

选项 - r（可读）

-w（可写）

-r+ 和 w+（在最后一行添加文本进行读写）

# ruby - 不要使用 google api ruby 客户端请求离线访问

> ID：15284736
> 
> 赞同：2
> 
> 时间：2013-03-08T00:42:30.173
> 
> 标签：ruby, google-api, google-api-ruby-client

我正在使用[google api ruby​​ 客户端](https://github.com/google/google-api-ruby-client)！并希望将请求限制为在线访问。我希望这是默认设置，但应用程序总是告诉用户它将“在我不使用应用程序时执行这些操作”，并且在 url 中显示“oauth2/auth?access_type=offline&approval_prompt=force&client_id=... "

我想要的只是用户电子邮件（“ [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email) ”）。是否可以在不要求离线访问的情况下要求它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:02:38.377

生成 时`authorization_uri`，将`:access_type`参数集传递给`:online`。

# ruby - 在Ruby中访问哈希的哈希

> ID：15284737
> 
> 赞同：1
> 
> 时间：2013-03-08T00:42:32.147
> 
> 标签：ruby, xml, hash

我正在尝试获取在 xlm 中传递的事件日志条目，将它们转换为哈希，然后存储到数据库中。

我目前正在使用 XmlSimple gem 将 xml 输入转换为哈希。

测试样本输入：

```
require 'xmlsimple'

h = XmlSimple.xml_in('
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="Service Control Manager" Guid="{555908d1-a6d7-4695-8e1e-26931d2012f4}" EventSourceName="Service Control Manager" />
  </System>
</Event>
', { 'KeyAttr' => 'name' })

puts "#{h}" 
```

这将返回：

```
{"xmlns"=>"http://schemas.microsoft.com/win/2004/08/events/event", "System"=>[{"Provider"=>[{"Name"=>"Service Control Manager", "Guid"=>"{555908d1-a6d7-4695-8e1e-26931d2012f4}", "EventSourceName"=>"Service Control Manager"}]}]} 
```

如何访问系统提供程序 GUID？

我可以通过执行以下操作返回所有系统元素：

```
puts "#{h['System']}" 
```

然而

```
puts "#{h['System']['Provider'}" 
```

回报：

```
can't convert String into Integer (TypeError) 
```

我已经尝试将结果转换为没有运气的字符串。我的 XmlSimple 格式是否错误？我是否访问了错误的密钥？还有另一种方法可以做到这一点吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:44:36.817

看起来你只是错过了一个 close `]`。散列应该嵌套任意深而没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:44:45.953

`h['System']`是一个数组。利用：

```
h['System'][0]['Provider'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T00:45:38.803

`[]`开头的表示`"System"`它的值是一个哈希数组。你可以这样做：

```
puts "#{h['System'][0]['Provider'}" 
```

同时`"Provider"`它本身是一个数组，所以你必须为它做同样的事情，例如：

```
puts "#{h['System'][0]['Provider'][0]['Guid']" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T00:45:41.960

小心数组

```
h["System"].first["Provider"].first["Guid"] 
```

# asp.net - Asp.net css 阻止 div 扩展页面高度

> ID：15284738
> 
> 赞同：0
> 
> 时间：2013-03-08T00:42:34.127
> 
> 标签：asp.net, css, vb.net, xhtml

所以问题是我试图在 ASP.NET 中设计一个 XHTML 页面，而当我只是想将控件放入`div`.

我在大多数 div 中使用相对，因为我读过关于使用绝对是不好的做法。希望这是一个简单的修复，这是我倾向于编写的一些代码类型。请注意，在这些控件中的 4 或 5 个之后，页面将开始在高度上扩展，即使屏幕周围仍有 900+px 的空间。

下面的示例使用图像按钮，但所有其他控件也会发生这种情况。如果我如上所述添加其中的 4-5 个，它将开始扩展我试图停止的页面。

```
<div class = "MyHeader">
    <asp:ImageButton ID="MyHeaderBTN" runat="server" Height="33" Width= "95" ImageUrl="~/Images/anyURL.png" onmouseover="this.src='/Images/anyURLHover.png'" onmouseout="this.src='Images/anyURL.png'"/>
</div> 
```

这是CSS类

```
.MyHeader
{
    height: 35px;
    left: 160px;
    position: relative;
    top: -116px;
    width: 100px;
} 
```

**编辑**：希望这可以清除它（对不起，我不知道如何使用 JSfiddle）。最终，我要做的是在添加任何新 div 时阻止网页高度增加。所以没有（或只有几个）我得到想要的页面，在添加一些 div 后，页面的大小会增加，在底部留下更多的空白空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:52:26.793

感谢 JohnyTee 建议在 main 中更改 Max-Height 以及减少 Min-Height，我能够停止页面扩展，并且我似乎能够继续添加相关项目。

谢谢

# binary-search - 查找数组中的最小索引，使得某个键小于或等于 Array[index]

> ID：15284741
> 
> 赞同：0
> 
> 时间：2013-03-08T00:42:41.323
> 
> 标签：binary-search

我正在尝试稍微更改二进制搜索，因此我想找到最小索引，以便 Array[index] >= key. 因此，如果我有一个类似的数组`int A[5] = {1,5,10,15,20}`并且我调用`search(A, 12, 5)`（其中 5 只是数组的长度），它将返回`=> 3`since `A[3] = 15 >= 12`。如果我搜索超过 20 的东西，它只会给我`5`返回或其他任意数字。

我正在尝试将它写得尽可能接近传统的二进制搜索。有什么帮助吗？

（这里是传统的二分查找）

```
int binarysearch(int A[], int key, int length) {
    int low = 0;
    int high = length - 1;
    while (low <= high) {
        int mid = (low + high) / 2;
        if (key < A[mid]) {
            high = mid - 1;
        } else if (key > A[mid]) {
            low = mid + 1;
        } else {
            return mid;
        }
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:59:08.000

我认为最好的方法是在密钥小于中间条目时添加一个检查，该中间条目将查看前一个条目。如果键大于该条目，我们就有答案（因为如果您从列表中降级，则该条目不会大于该键）。所以，代码看起来像这样：

```
int low = 0;
int high = length - 1;
while (low <= high)
{
    int mid = (low + high) / 2;
    if (key < A[mid])
    {
        high = mid - 1;
        if (high < 0 || key > A[high])
        {
            return mid
        }    
    }
    else if (key > A[mid])
    {
        low = mid + 1;
    }
    else
    {
    return mid;
    }
}
return -1; 
```

如果您的列表允许重复，它需要更复杂，但它应该可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T01:01:50.870

而不是`return -1`，只是返回`mid`

# javascript - 使用 Rails 的 DataTables - 动态显示和隐藏列

> ID：15284742
> 
> 赞同：0
> 
> 时间：2013-03-08T00:42:45.290
> 
> 标签：javascript, html, ruby-on-rails-3.2, coffeescript, datatables

我为我的 Rails 应用程序安装了 DataTables gem，并按照[这个 Railscast](http://railscasts.com/episodes/340-datatables?view=asciicast)开始。一切正常。

我的目标是允许我的应用程序的用户隐藏和显示列，因此我阅读[了本指南](http://www.datatables.net/release-datatables/examples/api/show_hide.html)。

我从该页面复制了初始化 javascript，将其翻译为[http://js2coffee.org](http://js2coffee.org)上的咖啡脚本，并将以下内容粘贴到我的 app/assets/javascripts/drivers.js.coffee 文件中：

```
fnShowHide = (iCol) ->
  oTable = $("#drivers").dataTable()
  bVis = oTable.fnSettings().aoColumns[iCol].bVisible
  oTable.fnSetColumnVis iCol, (if bVis then false else true)
$(document).ready ->
  $("#drivers").dataTable
    sScrollY: "200px"
    bPaginate: false 
```

然后回到[DataTables指南](http://www.datatables.net/release-datatables/examples/api/show_hide.html)，我查看了“Toggle column”链接的源代码，发现了这个：`<a href="javascript:void(0);" onclick="fnShowHide(0);">Toggle column 1<br></a>`。

所以我将它粘贴到我的 app/views/drivers/index.html.erb 文件中，结果如下：

```
<a href="javascript:void(0);" onclick="fnShowHide(0);">Toggle column 1<br></a>
<a href="javascript:void(0);" onclick="fnShowHide(1);">Toggle column 2<br></a>

<table id="drivers" class="display table table-striped table-bordered table-hover table-condensed">
  <thead>
    <tr>
      <th>Last Name</th>
      <th>First Name</th>
    </tr>
  </thead>
  <tbody>
    <% @drivers.each do |driver| %> 
    <tr>
      <td><%= link_to(driver.last_name, driver) %></td>
      <td><%= driver.first_name %></td>
    </tr>
    <% end %>
  </tbody>
</table> 
```

当我访问该站点时，链接正在显示，但它们不起作用。由于我是 Rails、javascript 和一般编程的新手，我假设我遗漏了一些明显的细节。

# sql-server-2008 - 为什么在使用 TOP/SET ROWCOUNT 方法分页时不能使用两列来选择起始行更新：实际上你可以

> ID：15284745
> 
> 赞同：0
> 
> 时间：2013-03-08T00:42:57.713
> 
> 标签：sql-server-2008, tsql

## 原文标题：为什么在 T-SQL 的比较中使用像“{Bad”这样的值会影响结果？

我创建了一个存储过程来处理大表的分页。该过程的重要部分如下：

```
DECLARE @first_id NVARCHAR(250);
DECLARE @first_parent NVARCHAR(250);

SET @skip = @skip + 1

SELECT TOP(@skip) @first_id = id,
                  @first_parent = parent
FROM   [dbo].[DATA]
WHERE  RowSet = @rowset
       AND FieldID = @field_id
       AND ( parent = @parent
              OR @parent IS NULL )
ORDER  BY parent,
          id;

SELECT TOP(@max) id,
                 [Description],
                 Closed,
                 Hold,
                 Access,
                 [Type],
                 parent
FROM   [dbo].[DATA]
WHERE  parent >= @first_parent
       AND id >= @first_id
       AND RowSet = @rowset
       AND FieldID = @field_id
       AND ( parent = @parent
              OR @parent IS NULL )
ORDER  BY parent,
          id 
```

它工作正常，除非@first_parent 是'{Problem'，当这种情况发生时结果中的一半行被跳过。是'{'吗？这是在 SQL Server 2008 R2 上运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:40:33.547

感谢 Martin Smith 让我找出解决这个问题的最低限度。该问题与“{”或任何其他字符无关。问题是尝试使用 TOP 来分页，其中 2 列用于选择起始行。

为了强调为什么使用两列不起作用，请以下表为例

```
-----------------------
| Parent       |   Id |
|--------------|------|
| 1            |   1  |
| 1            |   2  |
| 1            |   3  |
| 2            |   1  |
| 2            |   2  |
| 2            |   3  |
| 3            |   1  |
| 3            |   2  |
| 3            |   3  |
----------------------- 
```

你运行上面的存储过程，最终的选择，填充数据而不是变量，将是：

```
SELECT TOP(@max) id,
             [Description],
             Closed,
             Hold,
             Access,
             [Type],
             parent
FROM   [dbo].[DATA]
WHERE  parent >= '1'
   AND id >= '2'
   AND RowSet = @rowset
   AND FieldID = @field_id
   AND ( parent = @parent
          OR @parent IS NULL )
ORDER  BY parent,
      id 
```

当您查看时，很明显为什么没有返回所有预期结果。所以道德是，如果您尝试使用 SET ROWCOUNT/TOP 分页方法，您只能使用一列来选择起始行。

## 更新：2013-3-12

经过进一步的研究/努力，事实证明，如果您可以将列视为一列，则可以使用分页的 TOP/SET ROWCOUNT 方法，如下所示：

```
DECLARE @startat NVARCHAR(500)
SELECT TOP(@skip) @startat = COLUMN1 + <separator> + COLUMN2 + <separator> +... + COLUMNN
  FROM <TABLE>
  WHERE <WHATEVER YOU NEED> -- Optional
  ORDER BY COLUMN1, COLUMN2, ... COLUMNN

SELECT TOP(@max) <columns you want>
    WHERE <WHATEVER YOU NEED> AND COLUMN1 + <separator> + COLUMN2 + <separator> +... + COLUMNN >= @startat
    ORDER BY COLUMN1, COLUMN2, ... COLUMNN 
```

@skip 和 @max 是您的分页参数。

分隔符应该是小于数据中任何允许的字符的字符，对我来说 CHAR(13) 效果很好。它是必需的，否则您最终会遇到上述问题。

另请注意，这要求所有列都是文本或可转换为文本。如果您的列允许 NULL 值，我建议使用 COALESCE(COLUMN, N'')。

# xml - 在 Google Apps 脚本中嵌套 HtmlTemplate

> ID：15284750
> 
> 赞同：2
> 
> 时间：2013-03-08T00:43:15.197
> 
> 标签：xml, templates, google-apps-script

我正在尝试使用 Google Apps 脚本创建 XML 文档，而最有效的方法是将一个模板嵌套在另一个模板中。是否可以从另一个模板内部调用`HtmlService.createTemplateFromFile()`和？`evaluate()`

我的尝试没有奏效，所以我想知道它是否可行。

**更新**：

```
<?
  for (var i = 0; i < data.length; ++i) {
     Logger.log(i + ' testResults ' + data[i])
     var p = HtmlService.createTemplateFromFile('rvaProductTemplate');
     p.data = data[i] 
     ?>
     <?!= p.evaluate().getContent() ?>
     <?
  } 
?> 
```

它工作得很好，但我想知道是否有必要关闭脚本，打开强制打印脚本，然后重新打开脚本。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:50:07.630

是的，这完全有可能。

```
HtmlService.createTemplate("Look ma, nested templates:" + 
    "<?!= HtmlService.createTemplate('it works!').evaluate().getContent() ?>") 
```

发布不适合您的代码段。

# c++ - C++ 中的稀疏图实现和性能

> ID：15284765
> 
> 赞同：8
> 
> 时间：2013-03-08T00:44:24.453
> 
> 标签：c++, algorithm, graph, breadth-first-search, directed-acyclic-graphs

我目前正在研究 C++ 中的有向图数据结构（此项目没有 Boost GL）。主要应用程序将识别连接的组件和接收器。这些图预计是稀疏的（E ~ 4V 上 num 边的上限）并且都是统一的权重。我正在尝试在邻接列表、关联列表或其他一些我还没有听说过的表示之间做出决定（adj. matrix 不是稀疏的选项 bc）。瓶颈可能是整体空间和图初始化的速度：图将从潜在的巨大数组初始化，这样数组中的每个元素最终都会成为一个顶点，其有向边指向其相邻元素之一。要获得每个顶点的边，必须首先比较其所有相邻元素。

我的问题是：（1）哪种表示通常初始化更快，并且 BFS 遍历也很快，（2）有哪些算法（除了普通 BFS）可以找到连接的组件？我知道使用 BFS 是 O(V+E)（我认为这是最佳的），但我担心中间队列的大小，因为图形宽度随高度呈指数增长。

对图形实现没有太多经验，因此我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T01:14:43.003

考虑如下布局：

![在此处输入图像描述](../Images/bb2c702807cf3fc5566f5781d21e46e7.png)

邻接列表可以实现为 [Nx4] 的数组（在这种情况下，n 为 3，而 4，因为您说 4 是您的情况下的最大边数），格式如下：

```
2  3  0  0
3  0  0  0
0  0  0  0 
```

上面的表示假设顶点的数量是按排序顺序排列的，其中数组的第一个索引由 给出`(v-1)`。

另一方面，关联列表要求您定义一个顶点列表、一个边列表和它们之间的连接元素（关联[列表 - 图](https://stackoverflow.com/questions/3904103/graph-incidence-list-implementation)）。

正如您所说，与邻接矩阵相比，两者在空间使用方面都很好，因为您的图非常稀疏。

我的建议是使用邻接列表，您可以将其初始化为内存中的 [Nx4] 连续数组（因为您说一个顶点最多有 4 条边）。这种表示将更快地初始化。（**此外，这种表示在缓存效率方面的表现会更好。**）

但是，如果您希望图形的大小动态且频繁地变化，则关联列表可能会更好，因为它们通常作为非连续空间的列表实现（请参阅上面的链接）。在这种情况下，邻接数组的解除分配和分配可能是不可取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:35:41.733

为您的目的实现图的最有效方法可能是结合每个顶点的邻接列表以及将顶点对映射到边（如果存在）的散列结构。这将需要 O(|V|+ |E|) 空间用于邻接列表， O(|E|) 用于散列结构并为您提供预期的 O(1) `containsEdge(vertex v, vertex w)`，`insertEdge(vertex v, vertex w)`并`removeEdge(vertex v, vertex w)`通过使用映射来获取所需的指针快速修改顶点的邻接表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-20T16:44:33.483

邻接矩阵适用于密集图，但它们被证明对于大型稀疏图是不好的选择。以下是稀疏图的简单操作的时间和空间复杂性。

[稀疏图大 O 时空复杂度](https://i.stack.imgur.com/Kmgeq.png)

考虑 100 万个节点的图的平均边数小于 4。大多数现代计算机不足以容纳邻接矩阵，因为它们的空间复杂度为 O(n*n) - 即 RAM 需要几个 TB。然而，它可以轻松安装在具有基本配置且 RAM 要求为几 MB 的廉价笔记本电脑中。

# batch-file - 如何使用批处理文件将文件移动到相应的文件夹

> ID：15284772
> 
> 赞同：0
> 
> 时间：2013-03-08T00:44:53.867
> 
> 标签：batch-file

```
@echo off
for %%j in (*.pdf) do (
    java -jar pdfbox-app-1.7.1.jar PDFToImage %%j
)

if exist *.jpg (
    for %%i in (*.jpg) do (
        mkdir %%~ni
        tesseract %%i %%~ni.txt
        move %%i %%~ni
        move %%~ni.txt %%~ni
    )
) 
```

所以我有这个命令，它基本上可以转换：

1.  将 pdf 文件转换为 jpg 文件。
2.  对于所有 JPG 文件，它会创建相应的文件夹。
3.  它使用 tesseract 软件将图像文件转换为文本文件。
4.  将 JPG 文件移动到我刚刚创建的相应文件夹中（**works**）。
5.  将文本文件移动到我刚刚创建的相应文件夹中（不起作用）。

谁能告诉我如何制作它，以便它将文本文件移动到相应的文件夹中，就像我对图像文件所做的那样？所以最后对于每个文件夹，它将包含图像文件和文本文件。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:11:16.390

为什么不首先告诉 tesseract 将文件放在正确的位置，这样您就不必再移动它了 :-)

此外，您确实应该在文件名周围加上引号，以防万一您遇到名称中包含空格的文件。

```
@echo off
for %%j in (*.pdf) do (
    java -jar pdfbox-app-1.7.1.jar PDFToImage "%%j"
)

if exist *.jpg (
    for %%i in (*.jpg) do (
        mkdir "%%~ni"
        tesseract "%%i" "%%~ni\%%~ni.txt"
        move "%%i" "%%~ni"
    )
) 
```

如果出于某种奇怪的原因， tessereact 坚持将文件放在当前文件夹中，则更改当前文件夹。

```
@echo off
for %%j in (*.pdf) do (
    java -jar pdfbox-app-1.7.1.jar PDFToImage "%%j"
)

if exist *.jpg (
    for %%i in (*.jpg) do (
        mkdir "%%~ni"
        pushd "%%~ni"
        tesseract "..\%%i" "%%~ni.txt"
        popd
        move "%%i" "%%~ni"
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:56:09.287

我强烈怀疑 tesseraxt 非常聪明，将实际转换作为一个单独的过程启动，然后终止。因此，当批处理尝试移动 .txt 文件时，结果可能不会被写入。

就个人而言，我会尝试（航空代码）

```
...
    tesseract %%i %%~ni.txt
    call :transfer %%~ni
...
...
goto :eof
:transfer
setlocal
set count=6
:tloop
if exist %1.txt move %1.jpg %1&move %1.txt %1&goto :eof
set /a count-=1
:: wait 1 second...
if %count% gtr 0 ping -n 2 127.0.0.1 >nul &goto tloop
echo could not find %1.txt after 6 seconds...
goto :eof 
```

# url - CMS Made Simple Htaccess Mod_Rewrite 不工作

> ID：15284776
> 
> 赞同：0
> 
> 时间：2013-03-08T00:45:03.833
> 
> 标签：url, content-management-system, seo

我在我的 CMS Mad simple 1.7 网站上使用 Mod_Rewrite 启用了“Pretty URL's”，它似乎工作正常，301 重定向工作正常，大多数重写工作正常。但是，不是将 URL 更改为 www.domain.com/page-title，而是将它们重写为 www.domain.com/?page=page-title

有人可以帮忙吗？！

```
# BEGIN Optional settings

# Turns off directory browsing
# not absolutely essential, but keeps people from snooping around without 
# needing empty index.html files everywhere
Options -Indexes

# Deny access to config.php
# This can be useful if php ever breaks or dies
# Use with caution, this may break other functions of CMSms that use a config.php
# file.  This may also break other programs you have running under your CMSms
# install that use config.php.  You may need to add another .htaccess file to those
# directories to specifically allow config.php.
<Files "config.php">
order allow,deny
deny from all
</Files>

# Sets your 403 error document
# not absolutely essential to have, 
# or you may already have error pages defined elsewhere
ErrorDocument 403 /forbidden403.shtml

# No sense advertising what we are running
ServerSignature Off

# END Optional Settings

# BEGIN CMSMS and Rewrite Rules
# Make sure you have Options FollowSymLinks
# and Allow on
Options +FollowSymLinks

RewriteEngine On

# Might be needed in a subdirectory
RewriteBase /

# URL Filtering helps stop some hack attempts
#IF the URI contains a "http:"
RewriteCond %{QUERY_STRING} http\: [OR]
#OR if the URI contains a "["
RewriteCond %{QUERY_STRING} \[ [OR]
#OR if the URI contains a "]"
RewriteCond %{QUERY_STRING} \] [OR]
#OR if the URI contains a "<script>"
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
#OR script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
#OR any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) 
RewriteRule ^.*$ - [F,L] 
# END Filtering

# CMSMS Rewriting
# Set assume mod_rewrite to true in config.php and clear CMSMS cache
RewriteCond %{REQUEST_FILENAME} !-f [NC]
RewriteCond %{REQUEST_FILENAME} !-d [NC]
RewriteRule ^(.+)$ index.php?page=$1 [QSA]
RewriteRule ^index\.(php|htm|html|asp|cfm|shtml|shtm)/?$ / [R=301,L]

RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule (.*) http://www.domain.com/$1 [R=301,L]
# END CMSMS

# END Rewrite rules 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:10:43.720

CMSMS 1.7 是一个非常旧的版本 - 它已不受支持，您应该尽快更新。

在 CMSMS docs 文件夹中，您将找到一个有效的 .htaccess 版本

# python - 确定二维列表中的列表总和是奇数还是偶数

> ID：15284784
> 
> 赞同：0
> 
> 时间：2013-03-08T00:45:39.723
> 
> 标签：python

我是 Python 新手，我在做作业时遇到了问题。作业问题如下：

实现函数 evenrow()，它接受一个二维整数列表，如果表的每一行总和为偶数，则返回 True，否则返回 False（即，如果某些行的总和为奇数）

结果应该是这样的：

```
evenrow([[1,3], [2,4], [0,6]])

True

evenrow([[1,3], [3,4], [0,5]])

False 
```

这是我的功能现在的样子：

```
def evenrow(lst):
    mysum = 0
    for i in lst:
        mysum += sum(i)
        if mysum % 2 == 0:
            return True
        else:
            if mysum %2 ==1:
                return False 
```

出于某种原因，无论我输入什么，我的函数都会一直给我 True。有什么我忽略的吗？任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T00:48:27.267

仅检查偶函数中的奇数以短路并在最后返回 true

```
def even2d(list2d):
   for sub_list in list2d:
       if sum(sub_list)%2 == 1:
           return False
   return True 
```

反之亦然以检查奇数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T01:01:12.997

我认为 Joran Beasley 的答案最适合您当前的知识水平，但值得看到一种更 Pythonic、更高阶的方法来解决问题：

```
def even2d(list2d):
    return all(sum(row) % 2 == 0 for row in list2d) 
```

你可能不会马上明白这一点，但我想我可以解释一下。

首先，如果序列中的每个值都为真，该`all`函数就会返回。`True`这很明显——另外，它避免了“向后思考”的需要（“所有行都是偶数，除非有一行是奇数”）。诀窍是，中间的那个表达式是什么序列？

首先，您将如何获得一系列行总和？

```
row_sums = []
for row in list2d:
    row_sum = sum(row)
    row_sums.append(row_sum) 
```

Python 允许您在列表推导中缩写此模式：

```
row_sums = [sum(row) for row in list2d] 
```

当然，这个表达式`sum(row)`可以更复杂一些，比如`sum(row) % 2 == 0`：

```
row_evens = [sum(row) % 2 == 0 for row in list2d] 
```

所以：

```
def even2d(list2d):
    row_evens = [sum(row) % 2 == 0 for row in list2d]
    return all(row_evens) 
```

现在我们几乎完成了，但是您可以使用生成器表达式使其变得更好，它为您提供一种“惰性列表”，在您需要它们之前不会计算值。您所要做的就是将方括号变成括号：

```
def even2d(list2d):
    row_evens = (sum(row) % 2 == 0 for row in list2d)
    return all(row_evens) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T00:52:24.247

一旦你`return`从一个方法开始，你就不能通过循环“返回”。相反，如果您发现奇数行，则应该返回`False`，因为一旦找到，就不需要再检查任何行。否则，如果您浏览了所有行并且没有找到奇数，那么您知道它们都是偶数并且可以返回`True`。

```
def evenrow(lst):
    for i in lst:
        if sum(i) % 2 == 1:
            return False
    return True 
```

或者，如果你觉得厚脸皮，看看你是否能弄清楚这个超级短名单理解版本是如何工作的：

```
def evenrow(lst):
    return not len([x for x in lst if sum(x) % 2]) 
```

# android - ListView 适配器

> ID：15284786
> 
> 赞同：0
> 
> 时间：2013-03-08T00:45:42.227
> 
> 标签：android, android-listview, listadapter, android-adapter

我想创建一个`ListView`适配器来显示多个数据，例如`Username`, `Comment`,`Date`和`Rating`一起显示在一行中。这就像在论坛中显示评论一样。我有 4 个数组，每个数组都存储其中一个值（、`Username`和`Comment`）。我尝试使用以下代码为此创建自定义适配器。但我真的不知道实现这一点的正确方法。我尝试运行它，它只显示和. 我不确定这段代码是否是正确的实现方式。`Date``Rating``Username``Date`

```
Float f = Float.parseFloat(commentRating[position]);
holder.cmtRating.setRating(f); 
```

**内容.java**：

```
list = (ListView) findViewById(R.id.commentlist);
adapter=new CommentAdapter(ContentScreen.this);
list.setAdapter(adapter);

public class CommentAdapter extends BaseAdapter {

    private Activity activity;
    private LayoutInflater inflater=null;

    public CommentAdapter(Activity a) {
        activity = a;
        inflater = (LayoutInflater) activity.getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return commentText.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public class ViewHolder{
        public TextView cmtUser;
        public TextView cmtText;
        public RatingBar cmtRating;
        public TextView cmtTime;
        public ImageView image;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        ViewHolder holder;
        if (convertView == null) {
            vi = inflater.inflate(R.layout.comment, null);
            holder = new ViewHolder();
            holder.cmtUser = (TextView) vi.findViewById(R.id.commentby);
            holder.cmtText = (TextView) vi.findViewById(R.id.comment);
            holder.cmtRating = (RatingBar) vi.findViewById(R.id.commentrating);
            holder.cmtTime = (TextView) vi.findViewById(R.id.commentcreatedby);
            vi.setTag(holder);
        } else
            holder=(ViewHolder)vi.getTag();

        holder.cmtUser.setText(commentBy[position]);
        holder.cmtText.setText(commentText[position]);
        Float f = Float.parseFloat(commentRating[position]);
        holder.cmtRating.setRating(f);
        holder.cmtTime.setText(commentCreatedTime[position]);
        return vi;
    }
} 
```

任何答案和意见表示赞赏。

**编辑**

评论.xml

```
<TextView
    android:id="@+id/comment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/commentcreatedby"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/commentby"
    android:paddingLeft="5dp"
    android:paddingTop="5dp"/>

<TextView
    android:id="@+id/commentcreatedby"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:paddingRight="5dp"
    android:paddingTop="5dp"/>

<TextView
    android:id="@+id/commentby"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:paddingLeft="5dp"
    android:paddingTop="5dp" />

<RatingBar
    android:id="@+id/commentrating"
    style="?android:attr/ratingBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/comment"
    android:layout_alignParentRight="true"
    android:layout_marginRight="16dp" /> 
```

内容.xml

```
<include
    android:id="@+id/top_header"
    android:layout_width="match_parent"
    layout="@layout/header" />

<TextView
    android:id="@+id/content_desc"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/top_header"
    android:padding="10dip"/>

<ImageView
    android:id="@+id/content_image"
    android:layout_width="fill_parent"
    android:layout_height="160dip"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/content_desc"
    android:padding="10dip" />

<ListView
    android:id="@+id/commentlist"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/content_price" >

</ListView>

<TextView
    android:id="@+id/content_price"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/content_image"
    android:layout_marginLeft="29dp"
    android:layout_marginTop="44dp"
    android:padding="10dip"
    android:textSize="20dp" />

<Button
    android:id="@+id/content_subscribe"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/commentlist"
    android:layout_alignParentRight="true"
    android:layout_marginRight="38dp"
    android:padding="20dip"
    android:paddingRight="20dip"
    android:text="Subscribe" /> 
```

**更新**

评级也有效。但它与日期叠加在一起。至于评论，我仍然无法正常工作。

**更新（已解决）** 显然这是我的comment.xml 安排出现了某种问题。一旦我重新安排它，评论就会出现，一切正常。谢谢大家的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:56:56.527

我可以看到这可能发生的两个原因：

1.  您最后两个数组未填充数据/或未填充空数据以及未显示它们的原因。（不太可能，因为当您尝试访问数组中的空位置时会收到空指针异常）

2.  您的行布局不显示最后两个数据参数。（我将基于这个原因，请向您展示行布局 XML，以便我们检查它）

在方法中设置数据之前，请检查并将每行的 4 个数组中的所有数据打印到日志中`getView`。

# ruby-on-rails-3.2 - 使用rails 3.2思考狮身人面像索引错误

> ID：15284788
> 
> 赞同：1
> 
> 时间：2013-03-08T00:45:58.947
> 
> 标签：ruby-on-rails-3.2, indexing, thinking-sphinx

我在我的 ubuntu 12.04 中安装 Thinking sphinx 时遇到问题。

每当我运行 rake ts:index 时，我都会得到以下信息。

```
Generating configuration to /home/tom/digmenu/config/development.sphinx.conf
Sphinx 2.0.6-id64-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file '/home/tom/digmenu/config/development.sphinx.conf'...
FATAL: no indexes found in config file '/home/tom/digmenu/config/development.sphinx.conf'
Generating configuration to /home/tom/digmenu/config/development.sphinx.conf
Sphinx 2.0.6-id64-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file '/home/tom/digmenu/config/development.sphinx.conf'...
FATAL: no indexes found in config file '/home/tom/digmenu/config/development.sphinx.conf' 
```

模型.rb

define_index 做索引 :name, as : :re_name end

狮身人面像的配置文件

```
indexer
{
}

searchd
{
  listen = 127.0.0.1:9306:mysql41
  log = /home/tom/digmenu/log/development.searchd.log
  query_log = /home/tom/digmenu/log/development.searchd.query.log
  pid_file = /home/tom/digmenu/log/development.sphinx.pid
  workers = threads
  binlog_path = /home/tom/digmenu/tmp/binlog/development
} 
```

我完全不知道为什么这不起作用！配置在索引期间生成但退出。

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:36:34.653

你可能已经解决了你的问题，但无论如何。也许它会帮助别人。

出现此问题的原因是您可能正在使用 Thinking Sphinx 3.0 或更高版本，但以旧方式定义索引，就像在 Thinking Sphinx 2.* 和更早版本中所做的那样。索引定义不再在模型本身中，而是在单独的文件中，这些文件放在`app/indices`. 还有许多其他更改，因此最好仔细阅读新文档。

3.0 的文档在 README 文件中：[https ://github.com/pat/thinking-sphinx/](https://github.com/pat/thinking-sphinx/)

“官方”文档仍然是指旧版本，其工作方式不同： http: [//pat.github.com/ts/en/](http://pat.github.com/ts/en/)

# opengl-es-2.0 - 如何在 xcode 项目中使用 GLMath？

> ID：15284792
> 
> 赞同：0
> 
> 时间：2013-03-08T00:46:11.757
> 
> 标签：opengl-es-2.0, xcode4.6

[这个链接](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)让我相信我可以从我的 xcode 项目中利用 GLMath。

引用：

> GLM数学。在 iOS 5 之前，几乎每款游戏都需要自己的数学库以及常用的向量和矩阵操作例程。现在有了 GLMath，大多数常见的数学例程都为您准备好了！

我搜索了一下，但找不到如何将这一切联系起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:41:50.033

if you include the GLKit framework in your project (check your project settings under build phases -> link binary with...) you can get it by importing `<GLKit/GLKMath.h>` but if you import `<GLKit/GLKit.h>` you will get it anyway

# java - Java 的决策结构

> ID：15284803
> 
> 赞同：-1
> 
> 时间：2013-03-08T00:47:23.173
> 
> 标签：java

我对以下作业有疑问：

> 创建一个程序，提示用户输入两个值：电影评级和他或她的年龄。使用决策结构，根据输入的评级和年龄确定是否允许用户在影院观看电影。最后，将这个决定的结果显示给用户。

这是我的代码，在发布此代码之前，我在 NetBeans 中执行了 Alt+Shift+F：

```
 /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package age;

    /**
     *
     * @author Jason
     */
    import java.util.Scanner;

    public class Age {

        public static void main(String[] args) {

            Scanner user_input = new Scanner(System.in);

            String user_age;
            System.out.print("Enter your age: ");
            user_age = user_input.next();

            String mrating;
            System.out.print("Enter the movie rating: ");
            mrating = user_input.next();

        }

    {  
        if ( user_age < 13 + mrating = G);{
        System.out.print( "You are of the right age for this movie");
        }
        else{
        System.out.print(" You are not of correct age for this movie");
        }

        if ( user_age >= 13 + mrating = PG13);{
        System.out.print( "You are of the right age for this movie");
        }
        else{
        System.out.print(" You are not of correct age for this movie");
        }

        if ( user_age >= 17 + mrating = R);{
        System.out.print( "You are of the right age for this movie");
        }
        else{
        System.out.print(" You are not of correct age for this movie");
        } 

    }
} 
```

如果我将 Age 的结束括号移动到`if`语句开始之前。我可以让显示器询问用户的年龄和评级，然后程序以没有结果结束。如果我把括号留在那里，程序就会完全出错。我是 Java 新手，很困惑，我一直在研究这本书和网站，但我开始感到困惑。此外，`user_age`and`mrating`得到一个错误，指出未使用变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:53:06.630

首先，您不能将 a `String`(eg `user_age`) 与整数进行比较。用于在与另一个整数比较之前`Integer.parseInt(String)`转换为一个。`int`

其次，您不应该使用`==`比较两个字符串值。使用`equals`方法比较两个字符串值。

第三，`&&`在您的条件中使用布尔运算符表示“和”，而不是`+`.

第四，删除每个 if 语句的条件后面的分号。`;`否则，如果条件为真，编译器会认为这是要执行的块。

可能还有其他错误；这些是我找到的前 4 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:59:23.600

您需要确保所有代码都在`main()`方法内。这是使用 Alt-Ctrl-F 格式化代码的原因之一。如果您检查代码中的大括号，您会看到它在语句`main()`之前结束。`if`您可以通过删除`if`语句之前的右大括号和左大括号来解决此问题。

您的代码中可能还存在其他问题。如果您需要帮助修复它们，请发布完整的编译器错误，以便我们为您提供帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T00:52:44.030

由于这是任务，我不会完全帮助......你现在必须确保你的程序的逻辑正确性......

我已经解决了所有编译错误...很多语法问题...请阅读一些初学者的 Java 书籍。

下面将让你开始......

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package age;

/**
 *
 * @author Jason
 */
import java.util.Scanner;

public class Age
{

    public static void main(String[] args)
    {

        Scanner user_input = new Scanner(System.in);

        System.out.print("Enter your age: ");
        int user_age = Integer.parseInt(user_input.next());

        String mrating;
        System.out.print("Enter the movie rating: ");
        mrating = user_input.next();

        if (user_age < 13 && mrating == "G")
        {
            System.out.print("You are of the right age for this movie");
        }
        else
        {
            System.out.print(" You are not of correct age for this movie");
        }

        if (user_age >= 13 && mrating == "PG13")
        {
            System.out.print("You are of the right age for this movie");
        }
        else
        {
            System.out.print(" You are not of correct age for this movie");
        }

        if (user_age >= 17 && mrating == "R")
        {
            System.out.print("You are of the right age for this movie");
        }
        else
        {
            System.out.print(" You are not of correct age for this movie");
        }

    }
} 
```

# r - 对组进行采样以匹配预期比例的算法

> ID：15284810
> 
> 赞同：3
> 
> 时间：2013-03-08T00:47:55.500
> 
> 标签：r, sas, frequency

我需要找到一种对组进行抽样的方法，以便观察到的比例与预期的比例相匹配。我想在每个组中保留尽可能多的观察结果。

简单示例：A 组 = 302 (60.3%) B 组 = 199 (39.7%)

我期望的比例是 46.6% 和 53.4%，所以在这种情况下，我将保留 B 组中的所有观察值，并对 A 组进行 0.576 采样，以获得 174 个观察值。它是否正确？

无论如何，是否可以在 SAS 或 R 中编写一条规则，为您提供 n 个组的适当采样率？我的实际问题涉及 14 个组，计数范围从 2 到 77：

A 组 = 77，观察 = 21.51%，预期 = 15.10%

B 组 = 5，观察 = 1.4%，预期 = 0.54%

C 组 = 2，观察 = 0.56%，预期 = 1.62%

等等

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:32:55.017

我相信您可以使用 PROC SURVEYSELECT 来实现这一点。您需要将每组的预期采样率存储在单独的数据集中，然后在 PROC SURVEYSELECT 语句中应用选项“SAMPRATE=SAS 数据集”。有关详细信息，请参阅有关此过程的在线文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:07:46.380

这是一个狡猾的小功能：

```
minsamp <- function(obs,expect) {

  ## get the groups where the number of people available
  ## isn't enough to simply multiply it out
  underrep <- obs[which(obs - expect * sum(obs) < 0)]

  # name of the smallest underrepresented group
  urname <- names(which.min(underrep))

  # get the final result
  round(expect * (obs[urname]/expect[urname]))

} 
```

还有一个例子（基于你的`simple example`：

```
obs <- c(a=302,b=199)
expect <- c(a=0.466,b=0.534)

> minsamp(obs,expect)
  a   b 
174 199 
```

你可以看到它起作用了：

```
> prop.table(minsamp(obs,expect))
        a         b 
0.4664879 0.5335121 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:26:04.690

我假设您正在绘制数据集的简单随机样本 (SRS)。在这种情况下，*预计*会得到群体的“代表性不足”和/或“代表性过高”。就推理而言，这*不是*问题。如果您正在抽取样本以估计某些总体特征，例如总数或比例，那么您不必担心样本中的频率与总体中的频率不匹配。事实上，这些频率仅*在平均上*相等，即在所有可能的样本上。通常的估算人员已经“考虑”了这一点。

另一方面，可以强制频率匹配；但我们将进入复杂样本领域。该领域的一些优秀作者是 Särndal 等人。（1992 年）和蒂莱（2006 年）。一些谷歌搜索会告诉你他们的工作有多广泛。在您的实际案例中，我相信您正在寻找一个*分层*样本，即由在人口群体中抽取的子样本形成的样本。如果您在每个组中抽取简单的随机样本，那么在 R 中实现一个不超过 10 行代码的例程是很简单的。

但是，如果您想要准备好东西，请查看 R 的“采样”包：http: [//cran.r-project.org/web/packages/sampling/index.html](http://cran.r-project.org/web/packages/sampling/index.html)

请注意，如果您选择复杂样本方法，则必须格外小心，因为这是一个具有许多微妙之处的理论。估计器采用不同的形式（例如，谷歌，“Horvitz-Thompsom 估计器”），它们的采样分布更难以描述，并且使用该分布的正态近似通常是非常粗略的近似。

仅提及所涉及的一些微妙之处，在分层样本的情况下，考虑确定应该为每个层（人口组）分配多少抽样单位的问题，因为样本必须具有固定的单位总数。比例分配（即匹配样本和总体中各组的比例）*不一定*是最佳解决方案。有关简要讨论，请参阅 Cochran (1997)，或参阅上述书籍了解更多详细信息。

# c# - 二进制搜索文本框

> ID：15284816
> 
> 赞同：0
> 
> 时间：2013-03-08T00:48:29.790
> 
> 标签：c#, asp.net, listbox

我有一个文本框，我需要输入文件名，但文件名不必是整个文件名，只是部分文件名。

例如

iexplorere.exe 将存储在列表框中。然后我必须输入woule 是“iexpl”，然后结果将出现在带有完整文件名的消息框中。

我在使用二进制搜索方法时遇到了问题。

到目前为止，我的代码是：

```
private void btnSearch_Click(object sender, RoutedEventArgs e)
{

        fValue = bList.BinarySearch(sValue, StringComparison.OrdinalIgnoreCase);
        MessageBox.Show("The Following Files were found \n" + fValue);
    }
    catch (Exception)
    {
        // Alerts the user path file doesnt exist
        MessageBox.Show("The File Doesn't Exist!");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:57:50.533

[`BinarySearch`](http://msdn.microsoft.com/en-us/library/5tzt7yz3.aspx)并不意味着*部分搜索*，所以这是你的第一个问题。它试图使用二进制搜索算法匹配一个确切的术语。

如果您的列表框包含所有类型的项目，`String`您可以试试这个：

```
fValue = bList.Cast<String>()
    .FirstOrDefault(t =>
                    t.StartsWith(sValue, StringComparison.OrdinalIgnoreCase)); 
```

这将获得一个`IEnumerable`类型`String`，然后找到以您在中的值开头的第一个项目`sValue`。

编辑：既然你标记了这个 ASP .NET，你可能会尝试这个班轮。这将获得所有匹配项的*集合*，而不仅仅是上面的第一个：

```
var matchingItems = lstbxResults.Items
    .Cast<ListItem>()
    .Where(t => t.Text.StartsWith(sValue)); 
```

# html - HTML/CSS - 响应式 3 列导航栏

> ID：15284818
> 
> 赞同：2
> 
> 时间：2013-03-08T00:48:54.517
> 
> 标签：html, css, alignment, multiple-columns

真的很努力如何实现这一点。

我想做一个导航栏，以页面为中心 960px。此导航栏中有 3 个不同的部分或列。最左边的最小，200px。中间的总是居中，总是 20px。最右边的最小为 300 像素，并与右侧对齐。在完整的 960 像素处，它看起来像这样： ![在此处输入图像描述](../Images/6d637e23c938b3205a73d7ab3a11e837.png)

在 740 像素时，它看起来像这样： ![在此处输入图像描述](../Images/df44f990ebdc598c7c0bca9e1070a997.png)

在 620 像素时，它看起来像这样： ![在此处输入图像描述](../Images/1d6dbd85a21a0a1b4bec12f7e0337ee5.png)

在 520px 时，它看起来像这样： ![在此处输入图像描述](../Images/d4b1017614a944a5fd74d4ef89c4701c.png)

在此之下，它会进入一些替代设计，所以不用担心。这样做的最佳方法是什么？

编辑：这就是我目前所拥有的。它在 960px 处工作，但是当你调整它的大小时，中间的 div 不会停留在中心，因为有填充。当它变得太小时，它也会分崩离析，进入 2 行。

```
.left {
    float: left;
    width: 300px;
}
.right {
    float: right;
    width: 400px;
}
.middle {
    width: 100%;
    padding: 0 100px;
    height: 39px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:37:41.490

您应该只需要一个媒体查询。在下面的示例中，当窗口缩小时，黄色 div 将居中直到 620 像素，然后它会与粉色 div 一起滑动，直到 520 像素才会滚动。不确定您是在寻找这个还是@jhunlio 的解决方案。

html

```
<div class="wrapper">
    <div class="left-col"></div>
    <div class="inner-wrapper">
        <div class="middle-col"></div>
        <div class="right-col"></div>
        <br class="clean" />
    </div>
</div> 
```

css

```
body{
  margin: 0px;
}
.clean{
  clear: both;
}
.wrapper{
  height: 100px;
  position: relative;
  min-width: 520px;
}
.inner-wrapper{
  position: absolute;
  top: 0px;
  right: 0px;
  width: calc(50% + 10px);
  height: 100%;
}
.left-col{
  background: green;
  width: 200px;
  height: 100%;
}
.middle-col{
  width: 20px;
  height: 100%;
  float: left;
  background-color: yellow;
}
.right-col{
  float: right;
  width: 300px;
  background: pink;
  height: 100%;
}

@media screen and (max-width: 620px){
  .inner-wrapper{
    width: auto; 
  }
} 
```

小提琴[http://jsfiddle.net/BkFup/2/](http://jsfiddle.net/BkFup/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:22:29.927

html

```
<div class="navWrap">
    <div class="nav">
        <div class="navLeft"></div>
        <div class="navCenterWrap">
            <div class="navCenter"></div>
        </div>
        <div class="navRight"></div>
    </div>
</div> 
```

css

```
.navWrap {margin:auto; width:960px;}
.nav {
    float:left;
    width:100%;
}
.navLeft {
    width:20%;
    float:left;
    padding:10px 0;
    background-color:green;
}
.navCenterWrap {
    margin:auto;
    width:5%;
}
.navCenter {
    float:left;
    width:100%;
    padding:10px 0;
    background-color:yellow;
}
.navRight {
    width:30%;
    float:right;
    padding:10px 0;
    background-color:blue;
}

@media screen and (max-width: 740px){ 
    .navWrap {
        width:100%;
    }
}

@media screen and (max-width: 520px){ 
    .navWrap {
        width:100%;
    }
    .navLeft {
      width:40%; 
        margin:0;
    }
    .navCenterWrap {
        width:5%;
        float:left;
    }
    .navRight {
        width:55%;
        margin:0;
    }
} 
```

注意：*滚动小提琴以查看效果*
工作[演示](http://jsfiddle.net/jhunlio/RgywE/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T02:07:13.603

这是一个棘手的问题，因为它确实需要像素完美的媒体查询才能完成：

[http://codepen.io/cimmanon/pen/cmJhx](http://codepen.io/cimmanon/pen/cmJhx)

```
<nav>
  <div class="a">a</div>
  <div class="b">b</div><!--
  --><div class="c">c</div>
</nav> 
```

注意注释掉的空格^^

```
body {
  margin: 0;
  padding: 0;
}

@media (min-width: 520px) and (max-width: 620px) {
  nav {
    text-align: right;
  }

  nav div {
    text-align: left;
    display: inline-block;
  }

  .a {
    float: left;
  }
}

@media (min-width: 620px) {
  nav {
    position: relative;
    overflow: hidden;
  }

  .a {
    float: left;
    min-width: 200px;
  }

  .b {
    position: absolute;
    top: 0;
    left: 50%;
    margin-left: -10px;
  }

  .c {
    float: right;
    min-width: 300px;
  }
}

/* colors! */

.a {
  background: green;
  min-width: 200px;
}

.b {
  background: yellow;
  width: 20px;
}

.c {
  background: pink;
  min-width: 300px;
} 
```

当然，问题是如果您的第一个/最后一个元素不够大，无法容纳它们的子元素。因为中间元素绝对定位在 620px 断点处的页面中间，所以不能有任何出错的余地。

# c++ - 未解决的外部符号 LNK2019 混乱

> ID：15284819
> 
> 赞同：0
> 
> 时间：2013-03-08T00:49:01.823
> 
> 标签：c++, lnk2019

堆栈溢出，

我一直在尝试解决我的 LNK2019 错误，但没有成功。我在这里看到了几个类似的帖子，所以我给了这个问题它的正当程序并阅读了其他帖子（并试图自己解决它）。我的理解可能存在根本性的错误，因此我感谢您愿意提供帮助。我最近从 python 切换到 C++，所以请原谅 n00bishness。

我学到的是这个错误通常是由不同的库编译引起的——但我不确定这对我来说是怎么回事。如果重要的话，我正在使用斯坦福 C++ 库。使用 VC++ 2008。

```
#include <iostream>
#include "lexicon.h"
#include "queue.h"
#include "simpio.h"
#include "vector.h"
#include "console.h"

using namespace std;
void findchoices(string &startword, string &endword);

int main(Lexicon &choices) {
    string startword = getLine("Enter start word (RETURN to quit): ");
    string endword = getLine("Enter end word (RETURN to quit): ");

    if (startword == "") return 0;
    if (endword == "") return 0;

    //cout<< startword << " " << endword << endl;

    findchoices(startword, endword);

    //foreach (string j in choices) {
    //  cout << j << endl;
    //}

    return 0;
}

void findchoices(string &startword, string &endword) {
    Lexicon english("EnglishWords.dat");
    Lexicon choices;

    foreach (string i in english) {if (i.length() == startword.size()) choices.add(i);}
    foreach (string i in choices) {cout<<i<<endl;}

} 
```

就是这样。

错误：

```
1>StanfordCPPLib.lib(main.obj) : error LNK2019: unresolved external symbol "int __cdecl Main(void)" (?Main@@YAHXZ) referenced in function "int __cdecl Main(int,char * *)" (?Main@@YAHHPAPAD@Z)
1>G:\assign2-wordladder-randomwriter-PC\WordLadder\Debug\WordLadder.exe : fatal error LNK1120: 1 unresolved externals 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:51:20.240

为什么你定义`main`为`int main(Lexicon &choices)`？将其更改为：

```
int main() {
    //...
} 
```

# iostream - Nsight 和库的问题

> ID：15284823
> 
> 赞同：0
> 
> 时间：2013-03-08T00:49:54.760
> 
> 标签：iostream, nsight

警告：新手问题！我在 Nsight IDE 中创建一个新的空项目，然后创建一个文件“hello.cpp”：

```
#include <iostream>
using namespace std;

int main ()
{
  cout << "Hello World!";
  return 0;
} 
```

调试器输出：

```
In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status
make: *** [new] Error 1 
```

它没有找到 cout，即使我看到它在那里（实际上我看到它已包含在 Nsight 窗口的右上角）。除了这个简单的问题外，我在 Nsight 中的许多库都有问题，Code::Blocks 中的相同代码没有任何问题！Nsight 的工作方式是否不同？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T22:32:32.240

我发现 Nsight Eclipse 对文件的扩展非常特别。

在我的安装中，我必须明确地将“.h”写到头文件中，`#include <iostream.h>`否则它们将无法识别。

我发现的另一个问题是源文件本身的扩展名。Nsight 不喜欢您有 .c 扩展名，因为某些标头中包含的某些实例未找到。每当我将扩展名更改为 .cu、.cpp 或 .cc 时，实例都会与相应的标头链接。

我建议您将标题扩展名“.h”。让我们知道它是否以这种方式工作。

# javascript - javascript 和 node.js：哎呀

> ID：15284825
> 
> 赞同：2
> 
> 时间：2013-03-08T00:50:17.613
> 
> 标签：javascript, arrays, node.js, oop

我有一个问题 node.js 结构与 javascript oop。我使用另一个类创建了一个类。

```
var base = function (name) {    
    this.Rows = new Array();    
};

var top = function (name) {
    this.name = name;   
};

top.prototype = new base();

var myClass = new top("");
myClass.Rows.push("a");
console.log(myClass.Rows);
var myClass2 = new top("test");
myClass2.Rows.push("b");
console.log(myClass2.Rows); 
```

此代码返回以下结果；

```
[ 'a' ]
[ 'a', 'b' ] 
```

但是我不必被算法发现为这段代码的结果？

```
[ 'a' ]
[ 'b' ] 
```

谢谢你的帮忙。

已解决：我解决了这个问题。重构代码；

```
var base = function (name) {
  this.Rows = new Array();
}

var top = function(name) {
  top.prototype.constructor.call(this, name);
  this.name = name;
}

top.prototype = Object.create(new base()); 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:53:31.283

这就是 JavaScript 原型继承的工作原理。

这对于语言的新手来说似乎相当混乱:)

两个对象`myClass`都`myClass2`具有相同的原型（在 中设置`top.prototype = new base();`）

这意味着当您访问他们的`Rows`属性时，因为他们都没有，所以他们访问了他们的原型之一。因为两者都是相同的，所以它们都作用于同一个对象。如果您将该行添加`console.log(myClass2.Rows);`到代码的末尾，它也会输出 `[ 'a', 'b' ]`

原型继承似乎让初学者感到困惑，因为在经典语言中，如果类`A`扩展类`B`，那么所有`A`的属性都会被复制到`B`——在 JavaScript 中情况并非如此。

如果将代码重构为以下内容，则可以完成相同的功能：

```
var base = function () {    

};

base.prototype.getRows = function(){
    return this.rows;
}

var top = function (name) {
    this.name = name;   
    this.rows= [];    
};

top.prototype = new base();

var myClass = new top("");
myClass.getRows().push("a");
console.log(myClass.getRows());
var myClass2 = new top("test");
myClass2.getRows().push("b");
console.log(myClass2.getRows()); 
```

这将产生您期望的“经典”结果。

然而，JavaScript 的原型模型更侧重于共享**功能**。我可能会将您的代码重构为：

```
var myClass = {Rows:[]},myClass2 = {Rows:[]}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T00:59:04.297

是的，原型是共享的。我认为您打算使用这种类型的继承：

```
var base = function (name) {
    this.Rows = new Array();
};

var top = function (name) {
    base.call(this,name); // this replaces your prototype
    this.name = name;
};

var myClass = new top("");
myClass.Rows.push("a");
console.log(myClass.Rows);
var myClass2 = new top("test");
myClass2.Rows.push("b");
console.log(myClass2.Rows); 
```

call 将调用该函数，就好像它是一个方法一样，因此它将对象设置为`base`，然后您使用特定属性覆盖它。正如 nrabinowitz 在评论中所指出的，这不会继承任何原型方法。

也是我最初的建议，我很喜欢，但与上述相比没有任何好处：

```
var top = function (name) {
    this.super=base; // these two lines replace your prototype
    this.super(name);
    this.name = name;
}; 
```

该方法将“base”变成一个成员函数，然后调用它。它将“top”设置为新的“base”对象，然后对其进行自定义。我选择“super”作为变量名，因为它类似于 Objective C 的风格。

# file - UNIX 文件权限

> ID：15284826
> 
> 赞同：-4
> 
> 时间：2013-03-08T00:50:29.070
> 
> 标签：file, unix, permissions

如何为用户添加读、写、执行权限；该组可以阅读；和其他用户不能做任何事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:55:09.030

（我建议最好在 Unix 或 SuperUser StackExchange 站点上问这个问题）

Chmod 是你的朋友。

引用[http://www.dartmouth.edu/~rc/help/faq/permissions.html](http://www.dartmouth.edu/~rc/help/faq/permissions.html)：

```
chmod g+w myfile 
```

给“myfile”组写权限，不理会所有其他权限标志

```
chmod g-rw myfile 
```

删除对“myfile”的读写访问权限，保留所有其他权限标志

```
chmod g+rwxs mydir 
```

授予对目录“mydir”的完整组读/写访问权限，同时设置 set-groupID 标志，以便在其中创建的目录继承该组

```
chmod u=rw,go= privatefile 
```

显式授予用户读/写访问权限，并撤销所有组和其他访问权限，以文件“privatefile”

```
chmod -R g+rw . 
```

授予组对该目录及其内部所有内容的读写访问权限（-R = 递归）

```
chgrp -R medi . 
```

将此目录的所有权更改为组“medi”及其内部的所有内容（-R = 递归）。发出此命令的人必须拥有所有文件，否则将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:53:32.553

命令行 ;

chmod 740 文件名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:07:05.117

如果你想用符号表示法试试这个：

chmod u=rwx,g=r,o= 文件

# tsql - 使用 T-SQL 查找字符串中连字符倒数第二个位置之后的字符

> ID：15284830
> 
> 赞同：0
> 
> 时间：2013-03-08T00:50:52.450
> 
> 标签：tsql

我的数据库中有一个列，其字段看起来像 XYZ-13-1234-12345-6789-1

我想返回字符串 XY-6789-1，所以我要删除 13-1234-12345。

我知道如何使用 SUBSTRING 来获取第一个字符，并且我使用 SUBSTRING(RTRIM(myString), LEN(myString), 1) 来获取最后一个字符。

我尝试使用 REVERSE，但它会向后返回数字，所以我得到 9876 而不是得到 6789，这不起作用。

这是我到目前为止所想出的……它工作得很好，但看起来很糟糕！

```
SUBSTRING(LTRIM(RTRIM(myString)), 1, 2) + '-' + REVERSE(SUBSTRING(REVERSE(LTRIM(RTRIM(myString))), (CONVERT(INT, CHARINDEX('-', REVERSE(LTRIM(RTRIM(myString))))) + 1), CONVERT(INT, CHARINDEX('-', (SUBSTRING(REVERSE(LTRIM(RTRIM(myString))), (CONVERT(INT, CHARINDEX('-', REVERSE(LTRIM(RTRIM(myString))))) + 1), LEN(myString))))) - 1)) + '-' + SUBSTRING(LTRIM(RTRIM(myString)), LEN(myString), 1) AS NewColumnFormat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:29:53.110

您还可以使用[SQL Server Central 中](http://www.sqlservercentral.com/scripts/Miscellaneous/30497/)的函数。使用该功能`CHARINDEX2`将允许您使用以下方法解决它：

```
SELECT LEFT('XYZ-13-1234-12345-6789-1', dbo.CHARINDEX2('-','XYZ-13-1234-12345-6789-1', 1)) + RIGHT('XYZ-13-1234-12345-6789-1', dbo.CHARINDEX2('-', REVERSE('XYZ-13-1234-12345-6789-1'), 2) - 1) 
```

仍然不是那么好，但可能比您的原始解决方案更容易阅读。

# iphone - 带有多个导航控制器的 iPhone 滑动菜单 iOS xcode

> ID：15284831
> 
> 赞同：0
> 
> 时间：2013-03-08T00:51:16.127
> 
> 标签：iphone, xcode, ios5, ios6

我一直在尝试使用情节提要为 iPhone 应用程序创建一个滑动菜单。我玩过很多我在 StackOverflow 和 code4apps 示例上在线找到的代码示例，但是所有这些都是基于 xibs 的，我运气不佳。我已经阅读了[Ray Wenderlich 的教程](http://www.raywenderlich.com/)和[Apple 文档](http://developer.apple.com)以及 StackOverflow 和 Youtube，但到目前为止我还没有运气。

我已经设法设置了一个带有 8 个圆形矩形按钮的滚动视图，但是当我尝试从这些按钮中设置一个转场到导航控件时，唯一的选择是动作转场 - 推然后崩溃并出现错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Pushing a navigation controller is not supported' 
```

我已经尝试过模态和自定义，但模态会弄乱顶部栏导航，我不知道自定义代码来阻止这个错误。

任何关于我哪里出错的帮助都会很棒，这是披头士乐队爱情应用程序的[一个示例，每张幻灯片上有 4 个按钮。](http://www.youtube.com/watch?v=Cloj-deVmfg)- 以及页面控制的指示 - 这正是我试图实现的目标..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:16:24.150

内置故事板 segues 仅适用于 UINavigationController 等内置类。您将需要一个自定义 UIStoryBoardSegue

# symfony - 带有 Doctrine ORM 的 Silex 身份验证系统

> ID：15284837
> 
> 赞同：4
> 
> 时间：2013-03-08T00:51:42.700
> 
> 标签：symfony, doctrine, silex

我正在使用教义 orm 在 silex 中开发身份验证系统，并且在此文档[http://silex.sensiolabs.org/doc/providers/security.html#defining-a-custom-user-provider](http://silex.sensiolabs.org/doc/providers/security.html#defining-a-custom-user-provider)下面的架构中有信息声音像那样：

“如果你使用 Doctrine ORM，Doctrine 的 Symfony 桥提供了一个用户提供者类，它能够从你的实体中加载用户。”

我正在使用 Dotrine ORM 提供程序，所以我决定使用 Symfony\Bridge\Doctrine\Security\User 中的 EntityUserProvider 类，问题是这个类的构造函数，因为第一个参数有“ManagerRegistry $registry”。

我应该从silex那里放什么？是否有专门的服务或对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T06:15:33.810

在 Symfony2 上下文中，根据 Doctrine 和 Symfony Doctrine Bridge 源代码，您需要注入调用的服务，该服务`doctrine`接受 a `connection`、 an `entity manager`、 the`default connection`和 the`default entity manager`作为参数。该服务定义在`vendor\{...}\Doctrine\Bundle\DoctrineBundle\Resources\config\dbal.xml`.

*（此服务是扩展抽象类的实例，`Doctrine\Bundle\DoctrineBundle\Registry`该抽象类`Symfony\Bridge\Doctrine\ManagerRegistry`扩展`Doctrine\Common\Persistence\AbstractManagerRegistry`最终实现接口`Doctrine\Common\Persistence\ManagerRegistry`，即类型提示类。）*

[正如根据 Doctrine 的 Silex 提供程序文档](http://silex.sensiolabs.org/doc/providers/doctrine.html)的前几行所述，不提供 ORM 服务。由于您使用自定义提供程序来使用 ORM，因此您需要注入此`doctrine`服务的等效项。

# xml - 自定义图表工具

> ID：15284840
> 
> 赞同：1
> 
> 时间：2013-03-08T00:51:50.937
> 
> 标签：xml, business-rules, diagramming

我们有一个在 XML 中存储规则的自定义业务规则引擎。XML 目前由相当技术人员编辑和理解。

围绕这些业务规则的管理正在持续开发几个用例：

1.  以图表方式表示现有的业务规则，从而对现有规则有更广泛的理解；

2.  构建允许业务用户使用图表工具创建这些规则的功能

我们正在考虑探索 Visio 2010 (BPMN 2.0 Notation) 的路径，以使用可能的 xml 转换层绘制图表。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:36:17.820

之前已经说过很多次了，但我要再说一遍，因为我在业务规则行业（大学，而不是供应商），业务规则正在迅速成为任何 IT 开发中非常重要的一部分。

您的团队很可能会花费大量金钱、时间和精力来重新发明轮子。创建可以评估您的规则的代码通常不是问题。而且您似乎已经解决了。现在您正面临其中最具挑战性的部分：UI。

尽管所有书籍都说业务规则最重要的一点是业务逻辑与主系统的分离，但实际上拥有业务规则引擎最重要的一点是让业务人员能够自己创建这些规则，不打扰程序员。这意味着一个坚实的用户界面。

有一些具有出色用户界面的业务规则引擎可以完成您需要的一切，而且它们可以以更少的钱更有效地完成这些工作。其中一些是免费的或有免费选项。

以[Drools](http://en.wikipedia.org/wiki/Drools)为例。这是一个超级表演者。但它只对程序员有用，除非您将[Guvnor](http://www.jboss.org/drools/drools-guvnor.html)添加到图片中。在 Guvnor 之前，Drools 只在那些更关心评估性能而不是可用性的大公司中流行。

因此，在您自己进行如此庞大的构建规则 UI 的项目之前，至少先看看其中的一些。如果您在 Java 平台上，请考虑使用 Drools。您还可以查找位于 MS Workflow Foundation 中内置的规则引擎之上的商业 UI 组件。所有这些引擎都以 XML 格式保存它们的规则，它们都有很棒的 UI（或 UI 组件），而且都是免费的或相对便宜的（可能除了 InRule 和 BizTalk。）

我确实希望这可以帮助您节省您的团队将要经历的所有麻烦和费用:)

# android - 运行应用程序和导出未签名应用程序有什么区别？

> ID：15284847
> 
> 赞同：1
> 
> 时间：2013-03-08T00:52:33.160
> 
> 标签：android, eclipse, apk, android-build

`.apk`运行应用程序和导出未签名的应用程序（关于构建的）文件有什么区别？

由于我的应用程序无法导出并*转换为 Dalvik 格式失败并出现错误 1* ​​，但是当通过*Run as Android App*运行它时，它会运行并安装在设备上。

我搜索了所有问题并尝试了所有答案，但没有任何效果，我什至不知道如何调试它，没有错误，日志中也没有问题。

仅供参考，我的应用程序使用：

*   ActionBarSherlock（杰克沃顿）
*   ViewPagerIndicator（由 JakeWarton 提供）
*   拉取刷新
*   谷歌广告
*   谷歌分析

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:56:19.373

如果您将其导出为未签名，则任何 Android 手机都无法使用该应用程序，即使您将设置设置为接受第三方来源也是如此。尝试导出签名的应用程序，您必须创建自己的签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:58:12.167

在这两种情况下，您都将私钥应用于应用程序，只是在其中一种情况下，它是[调试密钥](http://developer.android.com/tools/publishing/app-signing.html)（至少在 Eclipse 环境中是自动生成的），而在另一种情况下，它可以用于发布例如，在 Google Play 上。

（来自链接）：

> 关于签署 Android 应用程序的要点是：
> 
> 所有申请都必须签名。如果未签名，系统将不会在模拟器或设备上安装应用程序。为了测试和调试您的应用程序，构建工具使用由 Android SDK 构建工具创建的特殊调试密钥对您的应用程序进行签名。

我实际上遇到了您的问题，但在我的情况下，我通过在 Eclipse 中清理我的应用程序（和关联的库）并重复导出过程来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:52:25.177

所有安卓应用都必须签名。只需忘记“导出未签名的应用程序”。您应该知道的区别在于您可以导出已签名应用程序的方式：

1.  直接从 Eclipse 运行应用程序 - 它与使用本地化在 ~/.android/ 中的默认 android SDK 密钥库的“导出签名应用程序”相同。**无法使用此密钥库发布应用程序**。默认密钥库具有以下配置：
    *   密钥库名称：“debug.keystore”
    *   密钥库密码：“android”
    *   密钥别名：“androiddebugkey”
    *   密钥密码：“android”
2.  使用您自己的密钥库导出签名的应用程序 - 为此，您需要生成自己的密钥库，设置上述参数并在导出应用程序时使用它。**以这种方式签名的应用程序可以发布**。

有关为您的应用签名的更多信息，请访问[应用签名页面](http://developer.android.com/tools/publishing/app-signing.html)。

# spring - Spring 3 - 基于另一个对象属性的运行时动态自动装配

> ID：15284851
> 
> 赞同：15
> 
> 时间：2013-03-08T00:52:58.160
> 
> 标签：spring, spring-mvc

我正在开发一个 Spring 3.1 MVC 应用程序，对于我的一个场景，我必须编写一个 DAO 的两个实现。我想知道如何根据另一个对象的属性在服务层中自动装配它。

例如，

```
 class Vehicle {
        private name;
        private type;
        ..
        ..
        ..
    } 

    @Service
    class VehicleServiceImpl implements VehicleService {

            // There are two implementations to this DAO
            // if Vehicle.type == "CAR", inject CarDAO
            // if Vehicle.type == "TRAIN", inject TrainDAO 
            @Autowired
            private VehicleDAO vehicleDAO ;

    }

    @Repository
    class CarDAO implements VehicleDAO {

    }

    @Repository
    class TrainDAO implements VehicleDAO {

    } 
```

如果我的车辆是汽车，我需要自动连接 CarDAO，如果是火车，我需要自动连接 TrainDAO

在 spring 3.1 中实现这一点的最佳方法是什么。

我希望使用上下文属性占位符或 @Qualifier 注释，但这两者都仅限于基于某些属性的查找。我不确定如何根据另一个对象的属性在运行时执行此操作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T03:38:13.703

我的解决方案如下：

VehicleDao接口中的方法isResponsibleFor：

```
interface VehicleDao {
    public boolean isResponsibleFor(Vehicle vehicle);
} 
```

示例实现：

```
@Repository
class CarDAO implements VehicleDAO {
    public boolean isResponsibleFor(Vehicle vehicle) {
        return "CAR".equals(vehicle.getType());
    }
} 
```

然后自动装配[VehicleService 中所有 VehicleDao 实现](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-autowired-annotation)的列表：

```
public class VehicleServiceImpl implements VehicleService {

    @Autowired
    private List<VehicleDao> vehicleDaos;

    private VehicleDao daoForVehicle(Vehicle vehicle) {
         foreach(VehicleDao vehicleDao : vehicleDaos) {
              if(vehicleDao.isResponsibleFor(vehicle) {
                   return vehicleDao;
              }
         }

         throw new UnsupportedOperationException("unsupported vehicleType");
    }

    @Transactional
    public void save(Vehicle vehicle) {
         daoForVehicle(vehicle).save(vehicle);
    }
} 
```

这样做的好处是您在以后添加新的车辆类型时不需要修改服务 - 您只需要添加一个新的 VehicleDao 实现。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-11T14:17:38.850

有一个更清洁的选择来完成这个策略。我们知道 Spring 足够聪明，可以在它看到它可以控制的 bean 的地方注入，所以当它看到`VehicleDAO`带有`@Autowire`or`@Resource`注释的你时，它会正确地注入那个具体的实现。

记住这一点，这将适用于您要求 Spring 执行依赖注入的任何地方，例如使用 a`Map<>`或 a `List<>`。

```
// Injects the map will all VehicleDAO implementations where key = the
// concrete implementation (The default name is the class name, otherwise you 
// can specify the name explicitly).
@Autowired
private Map<String, VehicleDAO> vehicleDAO;

// When you want to use a specific implementaion of VehicleDAO, just call the  
// 'get()' method on the map as in:
...
vehicleDAO.get("carDAO").yourMethod();
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:32:00.350

由于 Vehicle 是`@Model`一个运行时值，因此您将无法将其用于自动装配值。

车辆必须作为参数传递给服务方法。

公共接口 VehicleService { void doSomething(Vehicle vehicle); }

假设两者`CarDao`都`TrainDAO`实现了相同的`VehicleDao`服务，否则它将没有多大意义。

所以在你的`VehicleServiceImpl`我建议你写一个方法`getVehicleDao(Vehicle v){}`来获取正确的 dao 实例。

```
public class VehicleServiceImpl implements VehicleService {

    @Resource(name="carDAO")
    private VehicleDao carDAO ;

    @Resource(name="trainDAO")
    private VehicleDao trainDAO ;

    private VehicleDao getDao(Vehicle v){
        if(v instanceof Train){
            return trainDao;
        } else if(v instanceof Car) {
            return carDao;
        } else {
            throw new RuntimeException("unsupported vehicle type");
        }
    }

    void doSomething(Vehicle vehicle){
        VehicleDao dao = getDao(vehicle);
        dao.doSomethind(vehicle);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-25T08:09:10.047

请注意：以前的解决方案非常简单，但是 spring 正在创建每个 bean 的每个实例。

所以我的解决方案是创建抽象类 VehicleService 而不是接口

然后在 appContext

```
@Bean
@Primary
VehicleService paymentProviderService()
{
    return ...new (your requested instance by your own)...
} 
```

# sql - SQL Server 查询，不得使用子查询

> ID：15284857
> 
> 赞同：1
> 
> 时间：2013-03-08T00:53:28.050
> 
> 标签：sql, sql-server, sql-server-2008

为简单起见，使用简单的表/字段名称：

```
SELECT A.a
FROM A LEFT JOIN B ON A.a = B.a
WHERE B.a IS NULL
AND B.a NOT IN (
    SELECT B.a FROM B WHERE B.b = 'literal'
) 
```

`A`它应该从表中返回表中`a`不存在字段`B`的行，这些行`B.b`等于特定值（作为参数传递）。

```
A.a
-------
1
2
3

B.a      B.b
-----   -----
1       'literal'
1       'abc'
2       'def' 
```

考虑到这些数据，查询应该返回：

```
A.a
------
2
3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:02:41.313

我希望我能正确理解你想要达到的目标。

```
SELECT A.a 
FROM A
LEFT JOIN B
    ON A.a = B.a
    AND B.b = 'literal'
WHERE B.a IS NULL 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d7a44/1)

[SQL Fiddle](http://sqlfiddle.com/#!3/12a9a/2)与 @Ozzyberto 具有相同的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:47:07.073

```
create table A (a int)

insert into A
select 1
union all
select 2
union all
select 3

create table B (a int, b varchar(10))

insert into B
select 1, 'literal'
union all
select 2, 'abc'
union all 
select 3, 'def'

select A.a
from A
LEFT JOIN B
on A.a = B.a
where B.b <> 'literal' or B.b is null 
```

# php - 在滑块显示中显示多个图像

> ID：15284874
> 
> 赞同：0
> 
> 时间：2013-03-08T00:55:25.410
> 
> 标签：php, javascript, html, css

我正在玩幻灯片放映，我想学习如何让我的图像在框中向左或向右滑动。

波纹管代码正在显示图像，但我想知道如何让它向一个方向移动，一次显示 3-4 张图像。您知道服装店如何始终显示带有最新商品的滑块（一次多张图片）。所以我想知道这是怎么做到的。多谢你们，

```
<?php
include('includes/connect.php');        
$sql = mysql_query("SELECT * FROM partnerlogos"); 
 ?>
 <div class="modal" style="margin-left:0px;width:100%">
 <?php
while($row = mysql_fetch_array($sql)){
?>
   <a href="<?php echo $row['company_url']; ?>">
        <img width="140" height="70" src="<?php echo $row['logo_url']; ?>" />
   </a>
<?php }?>

</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-06-09T23:22:49.923

```
<?php
//so LIISTEN CAREFULLY
/*
we have to TABLE  in data base first one is 'emglish'->where article is added
and second TABLE is 'images' where we will insert ARTICLE id which is called 'artid' also insert 'id' which is picture id and 'fullname' which is image name 
which has changed name with str_shuffle(). 
*/
//this is where you enter article and upload images--->         
$form = '
        <center>
            <form action="" method="POST" id="form" enctype="multipart/form-data">
            <br><p>title: </p><input type="text" name="title" class="inputadtext" id="d" /><br><br>
            <input type="file" name="files[]" multiple /><br><br>
            <p>short story:</p><textarea cols="60" rows="10" name="shortstory"   class="inputadtext"></textarea><br><br>
            <p>full story: </p><textarea cols="60" rows="20" name="fullstory" class="inputadtext"></textarea><br><br>
                        <input type="submit" name="submit" value="Add Tour" class="inputadtext" />
            </form>
            </center>
        ';
        if(isset($_POST['submit'])){
            $title = mysql_real_escape_string($_POST['title']);
            $short_story = mysql_real_escape_string($_POST['shortstory']);
            $full_story = mysql_real_escape_string($_POST['fullstory']);
            if($title && $short_story && $full_story){
                mysql_query("INSERT INTO emglish VALUES ('', '$title', '$short_story', '$full_story', '', 'en','','')");
                $query = mysql_query("SELECT id FROM emglish WHERE title='$title'");
                $fetch = mysql_fetch_assoc($query);
                $id = $fetch['id'];
                $files = $_FILES['files'];
                    foreach($files['name'] as $p=>$n){
                        $type = $files['type'][$p];
                        $subtype = substr($type, 6);
                        $tmp = $files['tmp_name'][$p];
                        #$hashedname = md5(md5($name));
                        $title = $_POST['title'];
                        /**/
                        $string="qwertyuiopasdfghjklzxcvbnm1234567890";
                        $hashedname = str_shuffle($string);
                        $fullname = $hashedname . ".$subtype";
                        if($subtype=="jpeg" or $subtype=="jpg" or $subtype=="png"){
                        #inserting IMAGE NAME into text
                        mysql_query("INSERT INTO images VALUES ('$fullname', '', '$id')") or die(mysql_error());
                        move_uploaded_file($tmp, "../upload/".$fullname);
                    echo "<span style='float:left;margin-left:30px;'><img width='100px' height='100px' src='../upload/$fullname'><br><span style='color:skyblue;'><b>Upload complete</b></span></span></center>";
                        }else
                            echo "<center><span style='color:red'><b>Not an Image</b></span> <b>$n</b>";
                    }
/*
   after that you are echoing your pictures and article title...
   for css you have to give them classs and not an IDs i mean container and header which is decleared in the following code....
*/
        $q = mysql_query("SELECT * FROM emglish WHERE lang='$lang' order by id DESC");
        while($fetch = mysql_fetch_array($q)){
        echo "<span id='showarticle'>";
         $dbtitle = $fetch['title'];
         $id=$fetch['id'];
         $subtitle = mb_substr($dbtitle, 0, 70) . '...';
        $pic_query = mysql_query("SELECT * FROM images WHERE artid='$id'");
        echo "<p style='margin-bottom:8px;float:left;width:540px;word-wrap:break-word;'><a href='./index.php?page=fullstory&id=$id&lang=$lang'><b>" . $subtitle . "</a></b></p>";
        echo "<a href='./index.php?page=fullstory&id=$id&lang=$lang'>";
        echo "<b>" . $f['title'] . "</b><br><br>";
        echo "<center><div class='container2'>
            <div class='header3'>
        ";
            while($pic_fetch = mysql_fetch_array($pic_query)){
            $picture = $pic_fetch['fullname'];
            echo "<img style='width:400px;height:400px;border-radius:5px;' src='./upload/". $picture ."'  />";
            }
        echo "</div></div></center>";
        echo "</a>";
        echo "</span>";
/*
after that you can cycle this image and this slider with jquery cycle plugin....
*/
?> 
```

# xslt - 转换 XML 时如何从处理指令中提取信息？

> ID：15284875
> 
> 赞同：3
> 
> 时间：2013-03-08T00:55:34.740
> 
> 标签：xslt, xpath, processing-instruction

在更改我们的 DTD 之后，我正在转换一些 XML 文件。

其中一项更改涉及将处理指令更改为其他元素的属性 - 但我无法从指令中选择特定信息。我无法找到很多关于如何使用 PI 的信息——我发现的几乎所有内容都是关于如何创建它们的——但我确实设法找到了这个：[http://doccookbook.sourceforge.net/html/en/dbc。 common.pi.html](http://doccookbook.sourceforge.net/html/en/dbc.common.pi.html)

例如 - 原始 XML：

```
<?Fm Condition FM8_SYSTEM_HIDEELEMENT Dark%20Grey NO_OVERRIDE hide AsIs?>
<?Fm Condition FM8_TRACK_CHANGES_ADDED Forest%20Green SINGLE_UNDERLINE show AsIs?>
<?Fm Condition FM8_TRACK_CHANGES_DELETED Red STRIKETHROUGH show AsIs?>

<products>
    <?Fm Condstart p-version?>
    <prod>
        <form>inj</form>
        <strength>10, 20, 50</strength>
    </prod>
    <?Fm Condend p-version?>

    <?Fm Condstart e-version?>
    <prod>
        <form>inj</form>
        <strength>10</strength>
        <packsize>0.4&nbsp;mL (syringe), 4</packsize>
    </prod>
    <prod>
        <form>inj</form>
        <strength>20</strength>
        <packsize>0.4&nbsp;mL (syringe), 4</packsize>
    </prod>
    <prod>
        <form>inj</form>
        <strength>50</strength>
        <packsize>0.4&nbsp;mL (syringe), 4</packsize>
    </prod>
    <?Fm Condend e-version?>
</products> 
```

我试过这个 XSL 模板

```
<xsl:template match="processing-instruction()">
    <xsl:choose>
        <xsl:when test="'Condstart'">
            <xsl:text>ELEPHANTS</xsl:text>
        </xsl:when>

        <xsl:otherwise>
            <xsl:copy />
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

但是它将文档中的所有处理指令都变成了“大象”——而不仅仅是我要选择的那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:36:53.303

**你想要这样的东西：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "processing-instruction()[starts-with(.,'Condstart')]">
  <xsl:text>ELEPHANTS</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的（针对格式正确的）XML 文档时：**

```
<?Fm Condition FM8_SYSTEM_HIDEELEMENT Dark%20Grey NO_OVERRIDE hide AsIs?>
<?Fm Condition FM8_TRACK_CHANGES_ADDED Forest%20Green SINGLE_UNDERLINE show AsIs?>
<?Fm Condition FM8_TRACK_CHANGES_DELETED Red STRIKETHROUGH show AsIs?>
<products>
    <?Fm Condstart p-version?>
    <prod>
        <form>inj</form>
        <strength>10, 20, 50</strength>
    </prod>
    <?Fm Condend p-version?>
    <?Fm Condstart e-version?>
    <prod>
        <form>inj</form>
        <strength>10</strength>
        <packsize>0.4&#xA0;mL (syringe), 4</packsize>
    </prod>
    <prod>
        <form>inj</form>
        <strength>20</strength>
        <packsize>0.4&#xA0;mL (syringe), 4</packsize>
    </prod>
    <prod>
        <form>inj</form>
        <strength>50</strength>
        <packsize>0.4&#xA0;mL (syringe), 4</packsize>
    </prod>
    <?Fm Condend e-version?>
</products> 
```

**产生了想要的正确结果**：

```
<?Fm Condition FM8_SYSTEM_HIDEELEMENT Dark%20Grey NO_OVERRIDE hide AsIs?>
<?Fm Condition FM8_TRACK_CHANGES_ADDED Forest%20Green SINGLE_UNDERLINE show AsIs?>
<?Fm Condition FM8_TRACK_CHANGES_DELETED Red STRIKETHROUGH show AsIs?>
<products>
    ELEPHANTS
    <prod>
        <form>inj</form>
        <strength>10, 20, 50</strength>
    </prod>
    <?Fm Condend p-version?>
    ELEPHANTS
    <prod>
        <form>inj</form>
        <strength>10</strength>
        <packsize>0.4 mL (syringe), 4</packsize>
    </prod>
    <prod>
        <form>inj</form>
        <strength>20</strength>
        <packsize>0.4 mL (syringe), 4</packsize>
    </prod>
    <prod>
        <form>inj</form>
        <strength>50</strength>
        <packsize>0.4 mL (syringe), 4</packsize>
    </prod>
    <?Fm Condend e-version?>
</products> 
```

# ruby - 为什么我的插入排序比归并排序快？

> ID：15284876
> 
> 赞同：2
> 
> 时间：2013-03-08T00:55:41.140
> 
> 标签：ruby, algorithm, sorting

```
# sort.rb
class Array
  def insertion
    (1..self.count).each do |i|
      (i..0).each do |j|
        first = j - 1
        second = j
        if self[second] > self[first]
          swap(second, first)
        end
      end
    end
    self
  end

  def mergesort
    return self if self.size <= 1
    mid = self.size / 2
    left = self[0, mid]
    right = self[mid, self.size-mid]
    merge_array(left.mergesort, right.mergesort)
  end

  # helpers

  def merge_array(left, right)
    sorted = []
    until left.empty? or right.empty?
      if left.first <= right.first
        sorted << left.shift
      else
        sorted << right.shift
      end
    end
    sorted.concat(left).concat(right)
  end

  def swap(previous, current)
    copy = self[previous]
    self[previous] = self[current]
    self[current] = copy
  end
end 
```

我的 rspec 文件：

```
require './sort'

unsorted = 5000.downto(1).to_a.shuffle

describe Array, "#insertion" do
  it "sorts using insertion sort" do
    time = Time.now
    unsorted.insertion.should eq(unsorted.sort)
    puts "insertion"
    puts Time.now - time
  end
end

describe Array, "#merge" do
  it "sorts using merge sort" do
    time = Time.now
    unsorted.mergesort.should eq(unsorted.sort)
    puts "merge"
    puts Time.now - time
  end
end 
```

我们知道插入排序应该比归并排序慢，因为插入排序的运行时间平均为 O(n^2)，而归并排序为 O(n*log(n))。但是，当我运行上面的测试代码时，合并比插入慢 10 倍以上。

```
插入
0.001294 秒

。合并
0.017322 秒

```

我的猜测是我使用了一些计算量大的方法，比如`shift`and `concat`，但是相差 10 倍就太夸张了。

如何改进归并排序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T02:05:56.733

这里有很多东西：

1.  这不是插入排序，而是冒泡排序。
2.  `(i..0).each`什么都不做，因为范围不能以相反的顺序排列（您的规范没有通过）。改为使用`downto`。
3.  逻辑本身就是错误的，如果您的最后一个索引位于字符串的开头，那么您想在第二个元素小于第一个元素时进行交换。
4.  您的规范使用相同的数组，但是插入方法会改变数组，所以当它到达合并排序时，它已经被排序了。
5.  没有很好的理由将这些放在 Array 上（除了它的新颖性之外），一般来说，猴子补丁是一种不好的做法（我会解释原因，但这有点超出了这个响应的范围）。
6.  可以通过多次赋值来简化交换方法`self[a], self[b] = self[b], self[a]`。
7.  `first`, `second`, `previous`, ,的名字`next`都令人困惑。他们的名字暗示他们是元素，但实际上他们是索引，我会重命名为`index1`（也许`first_index`是，但这可能会变得冗长）。
8.  为什么要在`count`和之间切换`size`？这很令人困惑，看起来就像您复制和粘贴了其他人的代码（事实上，其中一个函数会改变数组而另一个不会，一般来说，合并排序看起来像是由知道的人编写的他们在做什么，而“插入”排序没有）。
9.  合并排序可能更慢，因为它会在不需要的地方创建大量数组（它没有副作用，但从性能的角度来看，最好只`dup`使用数组，然后根据 start 和结束索引。
10.  这些测试不是很有用，因为它们只对一个数组进行排序。假设数组已经基本排序，那么冒泡排序必须执行的交换很少，所以它只是迭代数组多次就完成了。
11.  这些调用之间可能会发生环境差异（优化、垃圾收集状态），最好使用 Benchmark 库。它[`bmbm`](http://rdoc.info/stdlib/benchmark/Benchmark.bmbm)试图最小化这些差异。
12.  因为您在 timer 内运行测试`unsorted.insertion.should eq(unsorted.sort)`，所以您不仅在为排序计时，还在`unsorted.sort`为 Ruby 和 RSpec 断言计时。最好将排序包装在时序代码中，然后输出结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T01:11:44.243

想法：

*   尝试将您的测试大小增加到数十万，并在几个不同的数组上取平均值，因为与合并排序相比，插入排序在最好的情况下会非常快
*   在合并中预先分配数组而不是动态构建数组，因为您应该知道大小
*   从时间匹配中提取正确性（...应该）调用

# sql - SQL：删除所有行，除了

> ID：15284878
> 
> 赞同：1
> 
> 时间：2013-03-08T00:55:56.147
> 
> 标签：sql, sql-delete

我想删除所有行：

```
 DELETE FROM `users logins` WHERE `userid` = '$user->id' 
```

但是，我想防止该行被删除，如果`token = $user->token`

我正在构建一个重置密码功能，一旦密码被休息，我需要从他们所有的设备上注销用户，除了他们正在使用的设备。

这可以通过单个 SQL 语句实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:57:43.253

根据条件添加

```
DELETE FROM `users logins` 
WHERE `userid` = '$user->id' AND
      `token` <> '$user->token' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T00:59:24.713

```
DELETE FROM `users logins` 
    WHERE `userid` = '$user->id' AND
          `token` != '$user->token' 
```

# javascript - 我应该如何实现这个jquery插件？

> ID：15284882
> 
> 赞同：0
> 
> 时间：2013-03-08T00:56:31.980
> 
> 标签：javascript, jquery

我正在使用 jquery 循环插件创建图片幻灯片。这非常简单，我理解该代码并且我已经让它自己工作了。但我正在尝试实施到一个已经存在的网站并且遇到了一些麻烦。该网站分为 html、css 和 js 文件的单独文件。

这段代码应该放在头部的脚本标签中，但为了站点的目的，它需要放在 js 文件中。我想我的问题是我是否需要对以下代码做任何事情以使其准备好放入 js 文件中，例如将其放入函数中？我已经尝试过了，没有任何运气。（而且我已经加载了 jquery 文件）。

$('.rotatorA').cycle({ fx: 'fade', timeout: 3000 });

$('.rotatorB').cycle({ fx: 'fade', delay: 1000, timeout: 3000 });

我对 jquery 还很陌生，我还没有找到太多关于这方面的信息，所以我真的很感激一些帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:01:28.300

确保它在`document.ready`回调中，即：

```
$(document).ready(function() {
    $('.rotatorA').cycle({ fx: 'fade', timeout: 3000 });
    $('.rotatorB').cycle({ fx: 'fade', delay: 1000, timeout: 3000 }); 
}); 
```

但无论它是在`<head>`标签中还是在外部脚本中，这都是必需的……我提到它是因为你在复制脚本时可能忽略了它？

FYI`$(function()`可作为缩写版本的`$(document).ready(function()`

还要确保您没有加载任何其他库，例如 MooTools。如果是这种情况，那么您需要稍微修改您的代码并`jQuery.noConflict()`在加载 jQuery 后立即添加一个脚本。

# javascript - 如何使用 Apple 的 UIAutomation JS 框架发出 Web 请求

> ID：15284883
> 
> 赞同：1
> 
> 时间：2013-03-08T00:56:39.653
> 
> 标签：javascript, node.js, ios-ui-automation

[是否可以使用 Apple 提供的 JS UIAutomation](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html)框架进行简单的 Web 请求？

我尝试了几种变体，包括浏览器的[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)

```
var request = new XMLHttpRequest() 
```

和[节点的http](http://nodejs.org/api/http.html)

```
var request = require('http') 
```

但我无法弄清楚如何使用它们中的任何一个。任何可能有效的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:10:02.343

不，这是不可能的，或者至少不是以简单的方式。

它可以使用`UIAHost`在 iOS 5 中添加的对象来完成。

看这个问题和答案：[Issuing a synchronous HTTP GET request or invoking shell script in JavaScript from iOS UIAutomation](https://stackoverflow.com/questions/6191814/issuing-a-synchronous-http-get-request-or-invoking-shell-script-in-javascript-fr)

# java - 如何使用 java.nio.file.Path 访问本地项目文件？

> ID：15284884
> 
> 赞同：0
> 
> 时间：2013-03-08T00:56:52.097
> 
> 标签：java, path, nio

我是 java.nio 世界的新手。

我的 Java 模块中有一个日志文件 app.log。（我正在使用 Intellij 11）。

在一个模块中，我有测试文件夹，我有一个本地文件 app.jar。

我想使用 Files.newInputStream(path) 方法将此文件读入 InputStream。

问题是在 Windows 中，我必须为输入路径提供完整的值，

```
Path path = Paths.get("C:\\Perforce\\depot\\Project\\module\\src\\test\\a\\b\\c\\app.jar"); 
```

我不确定是否有人获得此代码并在他们的机器上具有类似的文件夹结构来访问 app.jar

我将文件 app.jar 保存在编写测试的本地文件夹中。有没有办法可以概括这条路径？如果我的 Test 类位于 app.jar 所在的同一文件夹下，是否有任何机制可以避免提及完整的本地路径？

谢谢，维杰博尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:59:08.930

@杰弗里

是的，它必须与 intellij 文件系统有关。

通常，项目根目录是搜索文件的位置。如果我的项目根目录是**C:\perforce\depot\TestProject\Main**然后**Paths.get("app.jar")**尝试在**C:\perforce\depot\TestProject\Main\app.jar中查找文件**

实际上我有一个模块**com.xyz**在这个模块中我有 src 文件夹，我有测试根文件夹，我有 app.jar 文件。

因此，我必须实际调用

```
Paths.get("com.x.y.z/src/test/app.jar"). 
```

这解决了我的问题。

谢谢，

维杰·博尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:20:41.240

使用相对路径。Paths.get() 将根据当前用户目录解析相对路径名。此目录由系统属性 user.dir 命名，通常是调用 Java 虚拟机的目录。

也就是说，如果 app.jar 直接在您的 app_home 文件夹下，而 app_home 是您运行 java.exe 的位置，那么 Paths.get("app.jar") 应该可以工作。

# c++ - 如何在链接时修复 Makefile 错误“无法识别的引用”？

> ID：15284886
> 
> 赞同：0
> 
> 时间：2013-03-08T00:56:56.383
> 
> 标签：c++, g++, makefile

我在链接时得到以下信息：

```
BServer.cpp:(.text+0x58e5): undefined reference to `dbusServer::dbusServer(char*, int)'
BServer.cpp:(.text+0x58f4): undefined reference to `dbusServer::~dbusServer()' 
```

运行 make 时的 g++ 输出为：

```
g++ dbusServer.o PCounter.o BServer.o -o PCounter -L./BAPI/lib -L./usr/local/lib/libdbus -lBAPIx64 -m64 -lstdc++ -lpthread -lboost_system -lboost_program_options -L./home/ben/Downloads/libdbus-3.0.3/src/ -ldbus -L/home/ben/workspace/IntegratedPCounter/src/PCounter 
```

我`/home/ben/workspace/IntegratedPCounter/src/PCounter`包括`'#include "dbusServer.h'`来自`BServer.cpp`

然后我尝试创建一个`dbusServer`in的实例`BServer`，如下所示：

```
dbusServer modserver("192.168.0.9",5432); 
```

这是 dbus 的头文件：

```
// Define the number of devices to be managed
#include <dbus.h>
#define ADDRESS_START    0
#define ADDRESS_END      7

#ifndef dbusSERVER_H_
#define dbusSERVER_H_

class dbusServer {
dbus_t *ctx;
int nb;
typedef struct regHL
{
    uint16_t hibits;
    uint16_t lowbits;
};
private:
    void SplitCount(int); //To-do determine of the value needs to be split
    void addDevice(int);

public:
    dbusServer(char *, int);

    ~dbusServer();

    int WriteDeviceCounts(int, int);
    int AddDevice(int);
    int resetDeviceCounts(int);
 };
 #endif /* dbusSERVER_H_ * 
```

这是dbus代码：

```
#include <dbus.h>;
#include <errno.h>
#include "dbusServer.h"
//Using boost program options to read command line and config file data
#include <boost/program_options.hpp>
#include <syslog.h>
using namespace std;

namespace po = boost::program_options;
//alias program option namespace

    int nb = 0;
    dbus_t *ctx;
    int rc;
    int dbusServer::dbusServer(char *IPAddress, int port) {
        nb = 0;
        // TODO Auto-generated constructor stub
        int socket;
        ctx = dbus_new_tcp(IPAddress, port);
        dbus_mapping_t *mb_mapping;
    mb_mapping = dbus_mapping_new(500, 500, 500, 500);
    if (mb_mapping == NULL) {
        fprintf(stderr, "Failed to allocate the mapping: %s\n",
                dbus_strerror(errno));
        dbus_free(ctx);
        return (-1);
    }

    socket = dbus_tcp_listen(ctx, 1);
    dbus_tcp_accept(ctx, &socket);

    return (0);
}

dbusServer::~dbusServer() {
    // TODO Auto-generated destructor stub
    dbus_mapping_free (mb_mapping);
    dbus_close(ctx);
    dbus_free(ctx);
}

int writeDeviceCounts(uint32_t counts, int device) {
    //split the 32 bit value from the counting device
    uint16_t highBits = (counts & 0xFFFFFFFF00000000) >> 16; // get the high bits
    uint16_t lowBits = (counts & 0xFFFFFFFF); //get the low bits

    return (-1);
}

int addDevice(int device_id) {
    //increment the device counter
    return(-1);

}

void removeDevice(int device_id) {

}

void resetDeviceCounts(int device_id) {

} 
```

在第 58 页的“Safe C++”一书（Kushnir, V., O'Reilly Press, 2012）中，有一个错误的类创建示例，尤其是在编写析构函数方面。但是，更正后的实现看起来可以解决我的一些问题。

我想知道的一件事是如何避免在 C++ 中实现类时出现问题，这样这些事情就不会出现。必须有一个通用白话中的注意事项列表，可以引导人们远离问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:58:29.783

```
undefined reference to dbusServer::dbusServer(char*, int)
undefined reference to dbusServer::~dbusServer()' 
```

这些错误意味着您告诉编译器这些函数存在......

```
class dbusServer {
    dbusServer(char *, int);
    ~dbusServer();
}; 
```

...并且编译器决定使用它们。

但你从来没有写过它们。它们是未定义的。

**编辑：**

在您的一个源文件中，您需要：

```
dbusServer::dbusServer(char *, int)
{
    // Your code
}

dbusServer::~dbusServer()
{
    // Your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T02:37:43.973

您的 dbusServer.cpp 有问题。删除类似的行`class dbusServer {`，它会使您的 dbusServer(...) 被引用为`dbusServer::dbusServer::dbusServer(...)`.

从 .cpp 文件中的类定义中提取您的成员函数代码。

总之，在 *.h 中声明的类为

```
class dbusServer{
    dbsusServer(char*, int);
    ...
}; 
```

它在 *.cpp 中的实现应该是

```
dbusServer::dbusServer(char*, int){
...
} 
```

代替 ：

```
class dbusServer{
     dbusServer::dbusServer(char*, int){
      ...
     }
}; 
```

另外，构造函数也不对。

```
int dbusServer::dbusServer(char *IPAddress, int port) { 
```

它应该是：

```
dbusServer::dbusServer(char *IPAddress, int port) { 
```

# xpath - 使用 XPath 创建元素

> ID：15284890
> 
> 赞同：0
> 
> 时间：2013-03-08T00:57:02.617
> 
> 标签：xpath, vb6, msxml

我正在寻找一种将 XPath 转换为 CreateElement 的简单方法。（我的背景是 C#，但这个项目是针对 VB6 的）作为我的知识的一个例子，如果你用 .NET 创建一个比现有目录下面的目录更深的目录，它将创建所有目录一直到你的目录要求。

例如，让我们将其作为查询：`/rootnode/booklets/booklet[@dds="100"]`

# iphone - 将数据从一个屏幕传递到另一个屏幕

> ID：15284905
> 
> 赞同：-4
> 
> 时间：2013-03-08T00:58:26.923
> 
> 标签：iphone, ios, objective-c, xcode

所以在你们对我的问题提出质疑之前，请听我说完。我知道这是一个被问得太多的问题，但我想知道如何做到这一点的最佳方法。我在我的应用程序中创建了一个共享功能，允许该应用程序使用用户的数据并在他们的 Facebook（或 twitter）上发布他们喜欢我的应用程序的信息。对于我的 tableviewcontroller 上的每个单独项目，我每次都想要不同的消息。例如：

如果单元格 = 1，那么消息 = 这个 如果单元格 = 2，那么消息 = 那等等。

我有一个 TableViewController .h 和 .m，以及一个 DisplayViewController .h 和 .m 我需要将单元格数据从 TableViewController 获取到 DisplayViewController。

我应该使用核心数据吗？有非核心数据解决方案吗？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:07:20.233

如何在控制器之间传递数据的标准 Stack Overflow 答案在这里仍然适用：

*   [在视图控制器之间传递数据](https://stackoverflow.com/a/9736559/1271826)

这描述了如何在控制器之间传递数据。在确定从表视图传递到下一个控制器的内容方面，取决于您是否使用 segue：

*   如果您不使用 segues，您`didSelectRowAtIndexPath`将获取给定的适当数据`indexPath`；

*   如果您正在使用 segues，您`prepareForSegue`只需查看您的表格视图`indexPathForSelectedRow`以确定需要传递的内容。

在控制器之间传递数据当然不需要 Core Data。仅在控制器之间传递数据是多余的。坦率地说，它正在解决一个不同的问题，即数据持久性问题。如果您需要在应用程序的不同用途中保存的数据，或者您正在处理*大量*数据，那么一些持久存储是有意义的。但是到目前为止，您在这里所描述的一切都表明这是您正在努力解决的问题。您是否使用 Core Data 只是一个非常不同的问题，并且与在控制器之间传递数据实际上没有太大关系（尽管它可以在该上下文中使用）。

# android - 如何将类路径添加到我的 Android Ant 构建系统？

> ID：15284910
> 
> 赞同：2
> 
> 时间：2013-03-08T00:58:50.723
> 
> 标签：android, ant, configuration

我有一个包含`.jar`文件（库）副本的 Android 项目。我想在我的 Ant 类路径中包含这个 JAR 文件，以便在我构建时 Ant 可以链接它。

我已将路径添加到我的`.classpath`文件中，如下所示：

```
<classpath>
    <classpathentry kind="lib" path="mylibfolder/mylib.jar"/>
</classpath> 
```

但是，当我从命令行运行时，Ant 无法将引用链接到库`ant debug`。

我的问题是，如何配置 Ant 以使其包含这个类路径？注意：我在无头服务器上构建，所以我不能使用 Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:05:16.857

`ant debug`如果您将`.jar`文件放入`libs`文件夹中，应该会自动链接它。

# java - Intellij 代码格式化，Java 新行注解

> ID：15284911
> 
> 赞同：100
> 
> 时间：2013-03-08T00:58:51.103
> 
> 标签：java, formatting, intellij-idea

我正在使用 IntelliJ 12，它把我的成员变量注释放在同一行，我讨厌！如何设置代码格式化程序以将注释保留在单独的行上？

谢谢！

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-03-08T01:01:19.223

导航到**Preferences → Editor → Code Style → Java → Wrapping and Braces 选项卡**，然后找到**Field annotations**部分并选中**Do not wrap after single annotation**选项。

在 IntelliJ v14 中：

![eIntelliJ v14 Java 样式首选项](../Images/d305959bb1c8383c2c1a5423eddc8623.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-08T01:02:47.440

在 IntelliJ 12 中，您可以在此处的设置中找到它（右下角）：

![在此处输入图像描述](../Images/061bdf5c23a1df314a026ba3713433f7.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-08T17:03:15.640

我认为以上所有答案都是正确的，但对于 Mac 用户来说，这是一步一步的：

1.  点击“IntelliJ IDEA”
2.  点击“首选项”
3.  转到左侧导航窗口中的“代码样式”，您将在其下方看到“Java”并单击它！
4.  查找首选项窗口右侧的标题选项卡“环绕和大括号”。
5.  此时，您要在“字段注释”下查找名为“在单个注释后不换行”的项目。单击“确定”，您就完成了！

![在此处输入图像描述](../Images/c931afef91fe6cb729fbd5e6baf00ed7.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-11T01:51:22.410

2.3.3 版或 Android Studio 似乎对我没有任何帮助。我放弃并*在重新格式化时检查了 Keep*下的*换行符*。当我添加换行符时，我必须非常小心。

 *[![在此处输入图像描述](../Images/7f4d0c691a81fe8fe2a5891b9e12601f.png)](https://i.stack.imgur.com/GjJPk.png)*

# ajax - .on('click') 带有来自另一个 ajax 内容的 ajax 内容

> ID：15284914
> 
> 赞同：0
> 
> 时间：2013-03-08T00:59:04.017
> 
> 标签：ajax, jquery

尝试使用 ajax 内容触发事件，其父元素也加载了 ajax。

```
<div id="content"><!-- NOT ajax-loaded -->
    <div id="location"> <!-- #location IS ajax-loaded -->
        <div id="add_location> <!-- #add_location IS ajax-loaded from a #location event -->

            <input type="text" id="add_location_city_example" />
            <input type="text" id="add_location_state_example" />

            <input type="submit" id="add_location_confirm" />

       </div>
    </div>
</div>

$(function(){
  $('#content').on('click', '#add_location_confirm', function(){
    console.log('debug 1');
    add_location();
    // will not be called
  });

  $('#location').on('click', '#add_location_confirm', function() {
      console.log('debug 2');
      // will not be called either
      add_location();
  });
}); 
```

如果我有 onclick="add_location()" 和函数 add_location() { console.log('debug 3); } 在我的 .js 中，那么它显然会被调用，但是我无法得到 $('#add_location_city_example').val() 因为它都不会在 dom 中。

注意：使用 1.9.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:46:56.860

我已经使用了一段时间，它可以更轻松地处理您所描述的情况+页面上几乎所有点击只有一个偶数分配，包括将来会出现在页面上的元素：

```
$(document).bind('click', function (e) {
   var target = $(e.target);
   if (target.is('#content')) {
      e.preventDefault();
      // do whatever
   } else if (target.is('#location')) {
      e.preventDefault();
      // do whatever else
   }
}); 
```

或者在你的情况下，它可能更像这样：

```
$(document).bind('click', function (e) {
   var target = $(e.target);
   if (target.is('#add_location_confirm')) {
      e.preventDefault();
      if (target.closest('#location').length == 0) { // not yet have location injected via ajax
          // do something
      } else {
          // location has been injected, do something else
      }
}); 
```

# ruby-on-rails - 单击图片并更新rails上的数据库行

> ID：15284920
> 
> 赞同：0
> 
> 时间：2013-03-08T00:59:26.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, helper, link-to

我需要能够单击图像（从一堆图像中）并根据单击的图像更新配置文件表。

我认为的图像列表：

```
 <% @pages_selection.each do |pages_selection| %>
    <img> 
      <%= link_to image_tag(pages_selection.page_picture, '#') %>
    </img>
 <% end %> 
```

然后我的控制器中有一个方法，称为 save_new_scores_to_profile，它可以平均图片中的数据并更新配置文件值。

单击我的 link_to （图像）时，如何调用我的控制器方法？有这样的东西吗？

```
if link_to clicked
   perform_controller_or_helper_method
end 
```

因为用户需要选择多个图像，所以我希望它们在单击图像后留在页面上（这就是为什么我将链接指向“#”。如果有帮助，我在页面末尾还有一个提交按钮。

我愿意使用 link_to 以外的东西。

编辑：

这是我现在在路线上的位置

```
 resources :preferences do
   member do
     get 'save_new_scores_to_profile'
     get 'checked_average_with_profile'
   end
 end 
```

和观点：

```
<% @pages_selection.each do |pages_selection| %>
    <img> 
      <%= link_to image_tag(pages_selection.page_picture, :controller =>      
          :checked_average_with_profile, :action => :save_new_scores_to_profile, :image_id 
          => pages_selection.id) %>
    </img>
<% end %> 
```

我的控制器中有函数 checked_average_with_profile 和 save_new_scores_to_profile ，我知道它们可以工作（在使用辅助函数测试之后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:39:55.253

```
link_to image_tag(pages_selection.page_picture, :controller => :my_controller, :action => :save_new_scores_to_profile, :image_id => pages_selection.page_picture.id ) 
```

在 my_controller 中输入您的控制器的名称。使用 :image_id 您已经传递了一个参数，您可以在控制器操作中使用 params 散列来引用该参数，例如：`params[:image_id]`。

在该控制器操作中完成所有工作（或使用辅助方法的其他调用），找到具有该 image_id 的图片并创建一个 redirect_to`@picture_with_that_id`

# ios - iOS 6 - 响应键盘完成按钮状态

> ID：15284921
> 
> 赞同：0
> 
> 时间：2013-03-08T00:59:42.300
> 
> 标签：ios, cocoa-touch

在 iOS Apprentice Series 电子书中，您应该构建一个 Checklist 应用程序。这些教程让您完成并在按钮栏上创建一个完成按钮，该按钮根据 UITextField 对象内的文本被禁用和启用。

```
- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range     replacementString:(NSString *)string
{
NSString *newText = [theTextField.text stringByReplacingCharactersInRange:range withString:string];

self.doneBarButton.enabled = ([newText length] > 0);

return YES;
} 
```

现在，如果文本字段为空，则键盘设置为禁用完成按钮（在键盘上）。有没有办法观察键盘完成按钮的状态并让完成按钮栏按钮相应地反映它？

IE，当键盘完成按钮被启用时，按钮栏完成按钮被启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:11:14.763

`UITextField``enablesReturnKeyAutomatically`通过该属性支持您想要的。此属性来自`UITextInputTraits`协议。

当你创建你的`UITextField`，设置这个属性。

```
self.textField.enablesReturnKeyAutomatically = YES; 
```

这意味着如果文本字段为空，则 Return 键（无论其标记如何）将自动禁用。输入文本时它会自动启用。

无法观察此状态，因此您必须实现您已经拥有的代码`textField:shouldChangeCharactersInRange:replacementString:`来更新您的其他“完成”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:41:56.520

您可以使用以下事件在文本字段上添加目标。

```
UIControlEventEditingDidBegin    
UIControlEventEditingChanged     
UIControlEventEditingDidEnd      
UIControlEventEditingDidEndOnExit
UIControlEventAllEditingEvents 
```

示例：在`viewDidLoad`

```
[_textField addTarget:self action:@selector(textFieldEditing:) forControlEvents:UIControlEventAllEditingEvents]; 
```

行动方法：

```
- (void)textFieldEditing:(id)sender
{
    _doneButton.enable = ([[sender text] length]>0);
} 
```

# delphi - 识别运行 Delphi 7 程序的服务器

> ID：15284922
> 
> 赞同：2
> 
> 时间：2013-03-08T00:59:49.983
> 
> 标签：delphi, delphi-7

Delphi 7 程序的不同版本已部署在各种服务器上。为了帮助解决报告的错误，我正在尝试编写一个函数来识别程序从哪个服务器运行。

以下代码为我获取本地计算机名称。

```
sbAll.Panels.Items[1].Text := 'Server: ' + GetEnvironmentVariable('COMPUTERNAME'); 
```

假设程序的绝对路径为：

```
\\Swingline\Programs\Folder\Program.exe 
```

`Server: Swingline`无论它是从哪台计算机上运行的，我如何让它返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T01:05:28.950

您可能可以使用 Application.ExeName，用斜杠分割它并获取第二个元素......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:36:37.563

这是我根据@Zdravko 的建议最终使用的代码。

```
List := TStringList.Create;
try
  ExtractStrings(['\'], [], PChar(Application.ExeName), List);
  if (List.Text[2] = ':') then  // On local computer, Ex. J:\Programs\Foo.exe
    sbAll.Panels.Items[1].Text := 'Server: ' + ntComputer.ComputerName
  else   // In the case of \\Swingline\Programs\Folder\Program.exe
    sbAll.Panels.Items[1].Text := 'Server: ' + UpperCase(List[0]);
finally
  List.Free;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:27:50.593

您可以在不使用字符串列表的情况下执行此操作...

```
function ExeLocation: String;
var
  S: String;
begin
  S:= ParamStr(0);
  if Copy(S, 2, 2) = ':\' then begin
    Result:= GetEnvironmentVariable('COMPUTERNAME');
  end else
  if Copy(S, 1, 2) = '\\' then begin
    Delete(S, 1, 2);
    Result:= Copy(S, 1, Pos('\', S)-1);
  end;
end; 
```

请记住，如果您通过机器的 IP 地址引用文件，则只会返回 IP 地址。例如`\\192.168.1.123\SomeFolder\SomeFile.exe`只会返回`192.168.1.123`. 我寻找了其他方法，但我对该部门的知识不够深入，无法深入挖掘真正的机器名称。这可能是可能的，但我只是不认为它是可能的。

# python - 将单元素子列表转换为普通元素

> ID：15284926
> 
> 赞同：1
> 
> 时间：2013-03-08T01:00:28.683
> 
> 标签：python, sublist

我有以下列表：

```
[['identificator', [6036971], [1112221]], ['gender', ['Male'], ['Female']]] 
```

我怎样才能将单个元素列表变成普通元素，像这样？

```
[['identificator', 6036971, 1112221], ['gender', 'Male', 'Female']] 
```

我将其用作 csv.writer.writerow 的输入，并将括号打印为字符串：-/

发生这种情况的代码在这里[https://github.com/TheChymera/E2att/commit/4dd5e391b3ec7a4d630cef7c8c8fa803ede3e808#quest.py](https://github.com/TheChymera/E2att/commit/4dd5e391b3ec7a4d630cef7c8c8fa803ede3e808#quest.py) - 我遇到问题的变量是这样创建的：

```
def lefilter(keep=None):
data, filters, _ = get_data()
mask = filters[:,-1] == keep
lefilter = filters[mask][:,:-1]
value = data[:,lefilter.astype(np.bool)[0]]
if keep != 'gender':
    value = value.astype(np.integer)
return value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:05:34.183

我能够使用以下代码解决我的问题：

```
for ixr, row in enumerate(leresults):
    for ixe, el in enumerate(row):
        if len(el)==1:
            leresults[ixr][ixe] = el[0] 
```

我确信有一种更优雅的方法可以做到这一点，但现在我很高兴它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:01:44.463

你知道`itertools`模块吗？

`itertools.chain.from_iterable(your_list_here)`. 如果您不对其进行迭代，请将其包装在一个列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:11:26.437

```
map(lambda x: x[0] if isinstance(x, list) else x, list_item) 
```

# acl - SonataAdminBundle 和 ACL 类范围权限

> ID：15284927
> 
> 赞同：0
> 
> 时间：2013-03-08T01:00:31.813
> 
> 标签：acl, sonata-admin

对不起我的英语不好...

在我的项目中，我将 ACL 与 SonataAdminBundle 一起使用，但我不明白他们为什么这样做，您需要在数据库中创建一条记录，即使我只想使用没有对象范围的类范围。

此外，例如，当您创建评论时，SonataAdminBundle 会自动在 acl_object_identities 中创建一个条目，它会使该操作数据库变得混乱。

我创建了一个角色，该角色有权完全访问表中的所有记录，而不管记录是谁创建的，但 SonataAdminBundle 只显示它们并禁止编辑。SonataAdminBundle 的文档如下：

> 因为检查了对象 ACL 权限，所以必须已创建对象的 ACL，否则 AclVoter 将拒绝非超级管理员用户尝试编辑另一个非超级管理员用户的 EDIT 访问权限。这是在使用 Admin 创建对象时自动完成的。如果对象也在 Admin 之外创建，请查看 AclSecurityHandler 中的 createSecurityObject 方法。

但为什么？如何避免这种情况？

不想写钩子。

提前感谢您对此的任何评论和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T20:13:14.207

您可以使用生成对象 ACL`php app/console sonata:admin:generate-object-acl`

# ruby-on-rails - 使用设计 gem 创建引用用户的数据库的正确方法是什么？

> ID：15284930
> 
> 赞同：0
> 
> 时间：2013-03-08T01:00:41.107
> 
> 标签：ruby-on-rails, model

我正在创建一个简单的 web 应用程序来跟踪卡路里作为学习 Ruby on Rails 的一种方式。我正在使用 gem 设计让用户登录。我的下一步是生成模型。我打算使用：

```
rails generate model Tracker calories:integer consumed_on:datetime 
```

但问题是我不知道如何将此数据与登录用户相关联。这个生成模型命令我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:07:04.283

```
rails generate model Tracker user_id:integer calories:integer consumed_on:datetime 
```

这将在引用用户表的数据库中生成具有外键的模型。当然这不是你要做的全部，你必须在你的模型和控制器中放入其他代码来组合这两列，创建视图，更新`config/routes.rb file`..

另外：不要忘记运行 rake db:migrate 在数据库中创建关系表。

您可以在这里查看它是如何完成的（您的 Tracker 模型/表格是他们的 Micropost）：

[http://ruby.railstutorial.org/chapters/a-demo-app#sec-microposts_resource](http://ruby.railstutorial.org/chapters/a-demo-app#sec-microposts_resource)

# xml - 正则表达式删除崇高文本2中的空格

> ID：15284931
> 
> 赞同：0
> 
> 时间：2013-03-08T01:00:41.340
> 
> 标签：xml, regex, wordpress, sublimetext2

我在 xml 文件中有这个字符串：

```
<wp:meta_value><![CDATA[1 600 €               ]]></wp:meta_value> 
```

我希望它是：

```
<wp:meta_value><![CDATA[1600 €]]></wp:meta_value> 
```

我正在尝试在 sublime text 2 的查找工具中执行此操作，到目前为止我有 find ：

```
 <wp:meta_value>(.*?)</wp:meta_value> 
```

和替换：

```
 <wp:meta_value>$1</wp:meta_value> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:25:26.737

您可能想查看正则表达式[的教程。](http://www.regular-expressions.info/tutorial.html)你想找到

```
_+ 
```

哪里`_`是空格，替换为

```
_ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:59:40.480

搜索`\s\+]`并替换为`]`

我对崇高不熟悉。如果上述方法不起作用，则可能需要`]`将搜索字符串中的`\]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T15:18:47.380

按`Ctrl + H`打开查找和替换选项。

找什么：`\s+`

用。。。来代替：`\s`

`\s`寻找空格。`+`寻找 的重复`\s`。将其`\s`替换为将连续空格替换为单个空格。

这适用于 Sublime v3。

# java - Graphics2D动画，不明白为什么paintComponent只绘制一次形状然后停止

> ID：15284932
> 
> 赞同：0
> 
> 时间：2013-03-08T01:01:01.983
> 
> 标签：java, swing, java-2d, paintcomponent

Graphics2D 动画，无法理解为什么paintComponent 只绘制一次形状然后停止。我也无法理解为什么我的计时器计数器变量没有增加。我已经为此努力了一个多小时，有人可以将我推向正确的方向吗？

## 俄罗斯方块

```
package Tetris;
import javax.swing.JLabel;
import java.util.ArrayList;
public class Tetri {

private int xCoords= (int)(Math.random()*10);
private int yCoords=0;
private int shapeType;
private int orientation=0;

public Tetri(int shapeT){
    shapeType = shapeT;

}
public int getOrient(){
    return orientation;
}
public void setOrient(int orient){
    orientation = orient;
}
public void setXCoords(int coords){
    xCoords = coords;

}
public int getXCoords(){

    return xCoords;
}
public void setYCoords(int coords){
    yCoords = coords;
}
public int getYCoords(){

    return yCoords;
}

public int getShape(){

    return shapeType;
}

} 
```

## 移动矩形

```
package Tetris;
import javax.swing.JFrame;
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.JPanel;
import java.awt.Color;
import javax.swing.Timer;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.util.ArrayList;
public class MovingRectangle {

public static void main(String[] args){
    new MovingRectangle();
}

public MovingRectangle() {
    EventQueue.invokeLater(new Runnable(){
        @Override
        public void run(){
            JFrame frame = new JFrame("Tetris");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new GridLayout(0,1));
            frame.add(new TestPane(Color.RED));
            frame.setSize(1000,800);
            frame.setVisible(true);

        }

    });
} 
```

## 测试窗格

```
public class TestPane extends JPanel {

    private Graphics g0;
    private int unit = 50;
    private ArrayList<Tetri> shapeList = new ArrayList<Tetri>();
    int timercount =1;

    public TestPane(Color foreground){
        setForeground(foreground);
        this.setBackground(Color.BLUE);
        Timer timer = new Timer(2000,new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e){
            System.out.println("timercount :"+timercount);
            timercount = timercount++;
            shapeList.add(new Tetri((int)(Math.random()*2)));
            System.out.println("shapeList size : "+shapeList.size());
            repaint();
            }
        });
        timer.start();

    }
    @Override
    public void paintComponent(Graphics g){
        g0 = g;
        super.paintComponent(g);
        if(shapeList.size()>0){

        Tetri current = shapeList.get(0);

            if(current.getShape()==0){
                                                             createShape0(current.getXCoords(),current.getYCoords(),current.getOrient());
            }
            if(current.getShape()==1){
                createShape1(current.getXCoords(),current.getYCoords(),current.getOrient());
            }
            current.setYCoords(current.getYCoords()+50);
        }
        else{shapeList.add(new Tetri((int)(Math.random()*2)));}

    }
    public void createShape0(int xc,int yc,int orien){
        int yPixel= yc*50;
        int xPixel= xc*50;

        Graphics2D g2d = (Graphics2D) g0.create();
        g2d.setColor(Color.RED);
        if(orien==0){
            g2d.drawRect(xPixel, yPixel, unit*4, unit);
        }
        if(orien==1){
            g2d.drawRect(xPixel, yPixel, unit, unit*4);
        }

    }
    public void createShape1(int xc,int yc, int orien){
        int yPixel= yc*50;
        int xPixel= xc*50;

        Graphics2D g2d = (Graphics2D) g0.create();
        g2d.setColor(Color.GREEN);
        if(orien==0){
        g2d.drawRect(xPixel, yPixel, unit*3, unit);
        g2d.drawRect(xPixel+50, yPixel+50,unit,unit);
        }
        if(orien==1){
        g2d.drawRect(xPixel+50, yPixel-50, unit, unit*3);
        g2d.drawRect(xPixel, yPixel,unit,unit);
        }
        if(orien==2){
            g2d.drawRect(xPixel, yPixel, unit*3, unit);
            g2d.drawRect(xPixel+50, yPixel-50,unit,unit);
        }
        if(orien==3){
            g2d.drawRect(xPixel+50, yPixel-50, unit, unit*3);
            g2d.drawRect(xPixel+100, yPixel,unit,unit);
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:20:26.323

我有一个清单，但让我们从最明显的开始。

你的“运动”计算很遥远。

```
int yPixel = yc * 50;
int xPixel = xc * 50; 
```

这导致您的形状“跳跃”预期更大的距离......事实上，我根本找不到任何理由让您“修改”这些值。简单地让它们读作......

```
int yPixel = yc;
int xPixel = xc; 
```

形状移动得很好...

**代码审查**

*   不要维护对您未创建的任何图形上下文的任何引用。这些引用可以在其他 UI 组件之间共享，并且不能保证引用在一个绘制周期中，在下一个绘制周期中会相同。如果要绘制到图形上下文，请将其作为参数传递给需要进行绘制的方法。
*   如果您创建了一个图形上下文 ( `Graphics2D g2d = (Graphics2D) g.create();`)，那么您有责任在`g2d.dispose()`完成后处理它 ( )。否则你会慢慢消耗系统资源，直到你的应用程序崩溃（从经验来看——这是一个很难找到的错误；））

你似乎正在艰难地处理这个过程。`Shape`您应该根据`Tetri`知道如何“绘制”自身的知识为每个创建一个类。这样你就可以在你的绘画循环中简单地将图形上下文传递给它，而不用关心。这使得随着时间的推移添加新部件变得更加容易。

如果您将这些部分中的每一个都基于 a `java.awt.Shape`，则转换形状和旋转它们会变得非常容易。

看看[2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)，特别是[Working with Geometry](http://docs.oracle.com/javase/tutorial/2d/geometry/index.html)

# java - 调试 Android SDK 库

> ID：15284933
> 
> 赞同：0
> 
> 时间：2013-03-08T01:01:09.687
> 
> 标签：java, android, c, debugging, android-source

我现在想要一种方法来逐步浏览 SDK 库（包括 C 和 Java 代码）以准确定位正在发生的事情。到目前为止，我已经安装了 NDK 并启动并运行了 GDB。我能够附加到这个过程。我试过了`bt`，`strace`但这并没有提供任何有用的信息。

1.  我需要做些什么才能从 SDK 进入 Java 代码（以及本机 C 代码，如果涉及）并逐行浏览代码？

2.  有没有办法可以使用 GDB 提供更多有用的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T13:38:48.333

Android 是多进程 UI 框架，不同的各方通过 binder 进行通信。作为 sdk 开发人员，如果在出现提示时将源 jar 附加到 ADT 项目，您应该能够进入客户端 Java 源。如果要调试应用的 JNI 代码，可以使用 NDK 调试工具。如果你想深入这些层或调试多个进程，那就很棘手了。

请查看[调试 Android Java 应用程序的原生库](http://apienthusiast.blogspot.com/2014/07/debugging-native-framework-code-of.html)文章以了解如何进入客户端原生框架库。

如果要调试 system_server（承载核心框架服务的进程）的 Java 代码，请查看[调试 Android Java 框架服务](http://apienthusiast.blogspot.com/2014/06/debugging-android-java-framework.html)一文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:58:30.400

我已经能够部分回答我的问题，不幸的是，答案并不容易。

**调试 Java**

要调试 Java 源代码，您需要获取 Android 本身的源代码。位于此处：`source.android.com`. 那里提供了有关如何下载源代码的说明。说明声称您需要在 OSX 或 Linux 上执行这些步骤，尽管可能使用 Cygwin。[如此处](http://blog.michael-forster.de/2008/12/view-android-source-code-in-eclipse.html)所述，这些文件不在一个一致的位置。我使用前面提到的页面上提供的[python 脚本](http://pastebin.com/Anreer3B)来生成源的 zip 文件。将 Java 文件放在一个位置后，您所要做的就是在进入编译后的 Java 代码时将 Eclipse 指向这些文件。

**调试本机**

我仍在这部分工作，到目前为止，我能够使用 Cygwin 的 GDB 连接到我的应用程序，但还没有真正进入本机 C 文件。据推测，这些库需要在调试模式下构建。

# android - 三星 GS 4 将成为用于 Android 布局目的的大型或普通尺寸设备吗？

> ID：15284934
> 
> 赞同：2
> 
> 时间：2013-03-08T01:01:10.590
> 
> 标签：android, android-layout, galaxy

即将推出的三星 Galaxy S4。

报告规格：1080 x 1920 4.99 英寸对角线

如果我将其插入到 AVD 中的新设备定义中，则生成的设备大小列为“正常”，而密度列为“xxhdpi”，屏幕比例较长。

**但是**，如果我放入**5.00**英寸的对角线，尺寸将变为“大”。

信任什么？

**更一般地说：** AVD 设备管理器是否与 Android 设备上使用的逻辑完全匹配，以确定从哪个布局存储桶中提取（除非制造商覆盖）？

*编辑：关于上述句子的注意事项：当您输入对角线和屏幕尺寸时，AVD 下拉菜单将根据这些值自动配置自己。*

*请哦，请不要将我引导到可怕的“支持多个屏幕”页面，该页面没有给出确切的逻辑。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:03:42.040

> 三星 GS 4 将成为用于 Android 布局目的的大型或普通尺寸设备吗？

当其他人都知道时，您会知道设备何时发货。三星可以选择任何它想要的屏幕尺寸。

> AVD 设备管理器是否与 Android 设备上用于确定要从哪个布局存储桶中提取的逻辑完全匹配（除非制造商覆盖）？

不，“AVD 设备管理器”使用您在创建设备定义时选择的任何屏幕尺寸存储桶。有一个下拉列表列出了各种选择。

# python - 如何比较列表中的元素

> ID：15284936
> 
> 赞同：1
> 
> 时间：2013-03-08T01:01:17.817
> 
> 标签：python, algorithm, list, slice

我在算法方面遇到了一些问题（要找到最大值和最小值），而不是算法本身，而是实现，让我解释一下：

假设列表是`n = [0,1,1,2,3,5,8,13,-1,99]`；`len(n) = 10` 然后`globalMin, globalMax = n[0], n[0]`#从列表中跳过1次迭代

现在我要做的是按“对”进行比较，所以由于我已经使用了 n[0]，我开始比较 n[1] 和 n[2] 以找到这两个之间的最大值和最小值，然后将其与y 全局最小值，最大值，然后是 n[3] 和 n[4] 并将 nm 与我的全局值进行比较，然后是 n[5] 和 n[6] .. 直到我必须比较 n[9] 和 n[ 10]，如您所见，我的列表中不存在 n[10]。我想我可以使用下面的代码通过列表切片来解决这个问题：

```
 for i in range(1, len(n), 2):

    if n[i:i+1] > n[i+1:i+2]:
      minl, maxl = n[i+1:i+2], n[i:i+1] # minl = local min; maxl = local max
    else:
      maxl, minl = n[i+1:i+2], n[i:i+1] 
```

但是，如果我的最后一个元素只有一个（如上例所示），这将不起作用，因此，您可以猜到，如果 min 或 max 是我列表中的最后一个元素，它将被忽略。我一直在尝试用索引或列表切片来解决这个问题，但一点运气都没有，有什么建议吗？我必须以“Pythonic”的方式执行此操作，并确保在不使用导入的情况下使其尽可能简单和简短。我已经计算出基于下一张图片的算法的其余部分：[图片](http://postimage.org/image/o5tneccql/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:08:35.083

您可以先检查列表的长度，如果它是奇数长度，那么您可以将最后一个元素附加到列表的末尾。追加是一种`O(1)`操作，所以不会影响时间复杂度。

您可以使用 while 循环：

```
In [78]: lis = [0,1,1,2,3,5,8,13,-1]

In [79]: if len(lis)%2 !=0 :  #if the list is of odd length then append the last item to it
    lis.append(lis[-1])
   ....:     

In [80]: i=0

In [81]: while i<len(lis)-1:
    if lis[i]>lis[i+1]:
        local_max,local_min=lis[i],lis[i+1]
    elif lis[i]<lis[i+1]:    
        local_max,local_min=lis[i+1],lis[i]
    else:
        local_max,local_min=lis[i],lis[i+1]
    print local_min,local_max
    i+=2
   ....:     
0 1
1 2
3 5
8 13
-1 -1 
```

或者您可以使用迭代器：

```
In [86]: it=iter(lis)

In [87]: lis = [0,1,1,2,3,5,8,13,-1]

In [88]: if len(lis)%2 !=0 :
    lis.append(lis[-1])
   ....:     

In [89]: it=iter(lis)

In [90]: for _ in xrange(len(lis)/2):
   ....:     a,b=next(it),next(it)
   ....:     if a>b:
   ....:         local_max,local_min=a,b
   ....:     elif a<b:    
   ....:         local_max,local_min=b,a
   ....:     else:    
   ....:         local_max,local_min=a,b
   ....:     print local_min,local_max    
   ....:     
0 1
1 2
3 5
8 13
-1 -1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:21:44.200

我认为这是最 Pythonic 的实现：

```
from itertools import zip_longest

n = [0, 1, 1, 2, 3, 5, 8, 13, -1, 99]
global_min = global_max = n[0]

groups = [iter(n)] * 2
for a, b in zip_longest(*groups):
    if b is not None:
        if a > b:
            local_min, local_max = b, a
        else:
            local_min, local_max = a, b
    else:
        local_min = local_max = a
    if local_min < global_min:
        global_min = local_min
    if local_max > global_max:
        global_max = local_max

print(global_min, global_max) 
```

我们使用[`itertools.zip_longest()`](http://docs.python.org/3.3/library/itertools.html#itertools.zip_longest)（[`itertools.izip_longest()`](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)在 2.x 中）对项目进行分组，并重复使用相同迭代器的列表。然后我们循环这个，它给我们成对的值。然后我们进行检查，如果该值是最后一个，我们将其分配为`local_min`and `local_max`，否则，我们比较两个值并根据需要进行分配。

然后我们比较（并可能更新）`global_min`和`global_max`。

# php - Magento：改进搜索引擎（变形，不相关的词删除等）

> ID：15284938
> 
> 赞同：0
> 
> 时间：2013-03-08T01:01:22.743
> 
> 标签：php, magento

我有兴趣知道我是否可以检测到搜索字符串中的变形（例如狗/狗），删除不重要的词（“美国制造”->“in”和“the”不重要）等用户为 Magento 搜索引擎输入的内容，无需在一个大的 PHP 代码块中硬编码如此多的场景。我可以在一定程度上处理这个搜索字符串，但它会看起来不卫生和丑陋。

使其成为“智能”搜索引擎的任何建议或指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:02:52.463

使用这个类：

```
class Inflection
{
    static $plural = array(
    '/(quiz)$/i' => "$1zes",
    '/^(ox)$/i' => "$1en",
    '/([m|l])ouse$/i' => "$1ice",
    '/(matr|vert|ind)ix|ex$/i' => "$1ices",
    '/(x|ch|ss|sh)$/i' => "$1es",
    '/([^aeiouy]|qu)y$/i' => "$1ies",
    '/(hive)$/i' => "$1s",
    '/(?:([^f])fe|([lr])f)$/i' => "$1$2ves",
    '/(shea|lea|loa|thie)f$/i' => "$1ves",
    '/sis$/i' => "ses",
    '/([ti])um$/i' => "$1a",
    '/(tomat|potat|ech|her|vet)o$/i'=> "$1oes",
    '/(bu)s$/i' => "$1ses",
    '/(alias)$/i' => "$1es",
    '/(octop)us$/i' => "$1i",
    '/(ax|test)is$/i' => "$1es",
    '/(us)$/i' => "$1es",
    '/s$/i' => "s",
    '/$/' => "s"
    );

    static $singular = array(
    '/(quiz)zes$/i' => "$1",
    '/(matr)ices$/i' => "$1ix",
    '/(vert|ind)ices$/i' => "$1ex",
    '/^(ox)en$/i' => "$1",
    '/(alias)es$/i' => "$1",
    '/(octop|vir)i$/i' => "$1us",
    '/(cris|ax|test)es$/i' => "$1is",
    '/(shoe)s$/i' => "$1",
    '/(o)es$/i' => "$1",
    '/(bus)es$/i' => "$1",
    '/([m|l])ice$/i' => "$1ouse",
    '/(x|ch|ss|sh)es$/i' => "$1",
    '/(m)ovies$/i' => "$1ovie",
    '/(s)eries$/i' => "$1eries",
    '/([^aeiouy]|qu)ies$/i' => "$1y",
    '/([lr])ves$/i' => "$1f",
    '/(tive)s$/i' => "$1",
    '/(hive)s$/i' => "$1",
    '/(li|wi|kni)ves$/i' => "$1fe",
    '/(shea|loa|lea|thie)ves$/i'=> "$1f",
    '/(^analy)ses$/i' => "$1sis",
    '/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i' => "$1$2sis",
    '/([ti])a$/i' => "$1um",
    '/(n)ews$/i' => "$1ews",
    '/(h|bl)ouses$/i' => "$1ouse",
    '/(corpse)s$/i' => "$1",
    '/(us)es$/i' => "$1",
    '/s$/i' => ""
    );

    static $irregular = array(
    'move' => 'moves',
    'foot' => 'feet',
    'goose' => 'geese',
    'sex' => 'sexes',
    'child' => 'children',
    'man' => 'men',
    'tooth' => 'teeth',
    'person' => 'people',
    'admin' => 'admin'
    );

    static $uncountable = array(
    'sheep',
    'fish',
    'deer',
    'series',
    'species',
    'money',
    'rice',
    'information',
    'equipment'
    );

    public static function pluralize( $string )
    {
global $irregularWords;

// save some time in the case that singular and plural are the same
    if ( in_array( strtolower( $string ), self::$uncountable ) )
        return $string;

    // check for irregular singular forms
    foreach ( $irregularWords as $pattern => $result )
    {
        $pattern = '/' . $pattern . '$/i';

        if ( preg_match( $pattern, $string ) )
            return preg_replace( $pattern, $result, $string);
    }

    // check for irregular singular forms
    foreach ( self::$irregular as $pattern => $result )
    {
        $pattern = '/' . $pattern . '$/i';

        if ( preg_match( $pattern, $string ) )
            return preg_replace( $pattern, $result, $string);
    }

    // check for matches using regular expressions
    foreach ( self::$plural as $pattern => $result )
    {
        if ( preg_match( $pattern, $string ) )
            return preg_replace( $pattern, $result, $string );
    }

    return $string;
    }

    public static function singularize( $string )
    {   
global $irregularWords;
    // save some time in the case that singular and plural are the same
    if ( in_array( strtolower( $string ), self::$uncountable ) )
        return $string;

// check for irregular words
    foreach ( $irregularWords as $result => $pattern )
    {
        $pattern = '/' . $pattern . '$/i';

        if ( preg_match( $pattern, $string ) )
            return preg_replace( $pattern, $result, $string);
    }

// check for irregular plural forms
    foreach ( self::$irregular as $result => $pattern )
    {
        $pattern = '/' . $pattern . '$/i';

        if ( preg_match( $pattern, $string ) )
            return preg_replace( $pattern, $result, $string);
    }

// check for matches using regular expressions
    foreach ( self::$singular as $pattern => $result )
    {
        if ( preg_match( $pattern, $string ) )
            return preg_replace( $pattern, $result, $string );
    }

    return $string;
    }

    public static function pluralize_if($count, $string)
    {
    if ($count == 1)
        return "1 $string";
    else
        return $count . " " . self::pluralize($string);
    }
} 
```

如果您有时间使用变形用法的标准方法：[http ://en.wikipedia.org/wiki/Inflection](http://en.wikipedia.org/wiki/Inflection)

您可以将数组与 XML 相结合，以便将所有变形数据放入，看看 codeigniter 如何非常友好地进行变形：http: [//ellislab.com/codeigniter/user-guide/helpers/inflector_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/inflector_helper.html)

许多框架支持内置的屈折变化，但它主要只关注英语。对于其他语言，您应该编写自己的...或使用 unicode.org 以及其他语言的一些变形标准（如果需要）。

# django - Django Queryset only() 和 defer()

> ID：15284939
> 
> 赞同：25
> 
> 时间：2013-03-08T01:01:23.243
> 
> 标签：django, django-models

在现实世界中，人们使用 QuerySet 方法的频率是`defer()`多少`only()`？我想我真的听说过很多关于它们的事情，直到最近我才遇到这些方法。

请参阅此处的文档。 [https://docs.djangoproject.com/en/dev/ref/models/querysets/](https://docs.djangoproject.com/en/dev/ref/models/querysets/)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-08T01:13:08.963

这些方法主要用于优化应用程序的性能。

一般来说，如果你没有性能问题，你不需要优化。而如果你不需要优化，你就不需要这些功能。这是一个具有许多高级`QuerySet`功能的案例，例如`select_related`或`prefetch_related`。

至于“它们在现实世界中的使用频率”，这并不是一个真正可以回答的问题。它们在需要时使用。如果您不需要它们，请不要使用它们。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-11-02T07:34:16.777

`defer()`并且`only()`彼此有些相反。两者都收到`field_names`. `defer()`不会查询，列列表，作为参数传递给它。与它相反，`only()`将只查询列的列表，作为参数传递给它。

两者都在一个场景中使用，其中

*   您希望通过避免不必要的列获取来进行优化

*   您正在 python 代码中实现视图。例如，管理员必须显示 X 号。列数，必须向用户显示 Y 号。列数，必须向访客显示 z 列数。

# r - 按每日的特定时间切割 POSIXct

> ID：15284943
> 
> 赞同：5
> 
> 时间：2013-03-08T01:01:30.387
> 
> 标签：r, time-series, posixct

我有兴趣计算时间序列数据集中特定时间段的平均值。

给定这样的时间序列：

```
dtm=as.POSIXct("2007-03-27 05:00", tz="GMT")+3600*(1:240)
Count<-c(1:240)
DF<-data.frame(dtm,Count) 
```

在过去，我已经能够计算每日平均值

```
DF$Day<-cut(DF$dtm,breaks="day")
Day_Avg<-aggregate(DF$Count~Day,DF,mean) 
```

但现在我正试图将一天分成特定的时间段，我不知道如何设置我的“休息时间”。

与从 0:00:24:00 开始的每日平均值相反，例如，我怎样才能获得中午到中午的平均值？

或者更奇特的是，我如何设置中午到中午的平均值，不包括晚上 7 点到早上 6 点的夜间时间（或者相反，只包括早上 6 点到晚上 7 点的白天时间）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T02:04:11.087

让我快速重复你的代码。

```
dtm <- as.POSIXct("2007-03-27 05:00", tz="GMT")+3600*(1:240)
Count <- c(1:240)
DF<-data.frame(dtm,Count)

DF$Day<-cut(DF$dtm,breaks="day")
Day_Avg<-aggregate(DF$Count~Day,DF,mean) 
```

如果您在函数调用中每次偏移 12 小时，您仍然可以使用`cut`with break on `"day"`。我会保存中午到中午开始的那一天，所以我会减去 12 小时。

```
# Get twelve hours in seconds
timeOffset <- 60*60*12
# Subtract the offset to get the start day of the noon to noon
DF$Noon_Start_Day <- cut((DF$dtm - timeOffset), breaks="day")
# Get the mean
NtN_Avg <- aggregate(DF$Count ~ Noon_Start_Day, DF, mean) 
```

排除某些时间的一种方法是将日期转换为`POSIXlt`. 然后，您可以访问`hour`其他内容。

```
# Indicate which times are good (use whatever boolean test is needed here)
goodTimes <- !(as.POSIXlt(DF$dtm)$hour >= 19) & !(as.POSIXlt(DF$dtm)$hour <= 6)
new_NtN_Avg <- aggregate(Count ~ Noon_Start_Day, data=subset(DF, goodTimes), mean) 
```

我在stackoverflow上的这个问题上找到了一些帮助：[r-calculate-means-for-subset-of-a-group](https://stackoverflow.com/questions/9342891/r-calculate-means-for-subset-of-a-group)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T03:46:21.463

`xts`是时间序列分析的完美软件包

```
library(xts)

originalTZ <- Sys.getenv("TZ")

Sys.setenv(TZ = "GMT")

data.xts <- as.xts(1:240, as.POSIXct("2007-03-27 05:00", tz = "GMT") + 3600 * (1:240))

head(data.xts)
##                     [,1]
## 2007-03-27 06:00:00    1
## 2007-03-27 07:00:00    2
## 2007-03-27 08:00:00    3
## 2007-03-27 09:00:00    4
## 2007-03-27 10:00:00    5
## 2007-03-27 11:00:00    6

# You can filter data using ISO-style subsetting
data.xts.filterd <- data.xts["T06:00/T19:00"]

# You can use builtin functions to apply any function FUN on daily data.
apply.daily(data.xts.filtered, mean)
##                      [,1]
## 2007-03-27 18:00:00   7.5
## 2007-03-28 18:00:00  31.5
## 2007-03-29 18:00:00  55.5
## 2007-03-30 18:00:00  79.5
## 2007-03-31 18:00:00 103.5
## 2007-04-01 18:00:00 127.5
## 2007-04-02 18:00:00 151.5
## 2007-04-03 18:00:00 175.5
## 2007-04-04 18:00:00 199.5
## 2007-04-05 18:00:00 223.5

# OR

# now let's say you want to find noon to noon average.

period.apply(data.xts, c(0, which(.indexhour(data.xts) == 11)), FUN = mean)
##                      [,1]
## 2007-03-27 11:00:00   3.5
## 2007-03-28 11:00:00  18.5
## 2007-03-29 11:00:00  42.5
## 2007-03-30 11:00:00  66.5
## 2007-03-31 11:00:00  90.5
## 2007-04-01 11:00:00 114.5
## 2007-04-02 11:00:00 138.5
## 2007-04-03 11:00:00 162.5
## 2007-04-04 11:00:00 186.5
## 2007-04-05 11:00:00 210.5

# now if you want to exclude time from 7 PM to 6 AM
data.xts.filtered <- data.xts[!data.xts %in% data.xts["T20:00/T05:00"]]

head(data.xts.filtered, 20)
##                     [,1]
## 2007-03-27 06:00:00    1
## 2007-03-27 07:00:00    2
## 2007-03-27 08:00:00    3
## 2007-03-27 09:00:00    4
## 2007-03-27 10:00:00    5
## 2007-03-27 11:00:00    6
## 2007-03-27 12:00:00    7
## 2007-03-27 13:00:00    8
## 2007-03-27 14:00:00    9
## 2007-03-27 15:00:00   10
## 2007-03-27 16:00:00   11
## 2007-03-27 17:00:00   12
## 2007-03-27 18:00:00   13
## 2007-03-27 19:00:00   14
## 2007-03-28 06:00:00   25
## 2007-03-28 07:00:00   26
## 2007-03-28 08:00:00   27
## 2007-03-28 09:00:00   28
## 2007-03-28 10:00:00   29
## 2007-03-28 11:00:00   30

period.apply(data.xts.filtered, c(0, which(.indexhour(data.xts.filtered) == 11)), FUN = mean)
##                          [,1]
## 2007-03-27 11:00:00   3.50000
## 2007-03-28 11:00:00  17.78571
## 2007-03-29 11:00:00  41.78571
## 2007-03-30 11:00:00  65.78571
## 2007-03-31 11:00:00  89.78571
## 2007-04-01 11:00:00 113.78571
## 2007-04-02 11:00:00 137.78571
## 2007-04-03 11:00:00 161.78571
## 2007-04-04 11:00:00 185.78571
## 2007-04-05 11:00:00 209.78571

Sys.setenv(TZ = originalTZ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T02:59:19.140

中午到中午的问题可以很容易地用数值解决。关键是（格林威治标准时间）一天的开始`time_t`值始终可以被 86400 整除。这是由 POSIX 指定的。例如，参见：[http ://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

```
cuts <- unique(as.numeric(DF$dtm) %/% (86400/2)) * (86400/2)  # half-days
cuts <- c(cuts, cuts[length(cuts)]+(86400/2))                 # One more at the end
cuts <- as.POSIXct(cuts, tz="GMT", origin="1970-01-01")       # Familiar format
DF$halfday <-  cut(DF$dtm, cuts)                              # This is the cut you want.

Halfday_Avg <- aggregate(Count~halfday, data=DF, FUN=mean)

Halfday_Avg
##                halfday Count
## 1  2007-03-27 00:00:00   3.5
## 2  2007-03-27 12:00:00  12.5
## 3  2007-03-28 00:00:00  24.5
## 4  2007-03-28 12:00:00  36.5
## 5  2007-03-29 00:00:00  48.5
## 6  2007-03-29 12:00:00  60.5
## 7  2007-03-30 00:00:00  72.5
## 8  2007-03-30 12:00:00  84.5
## 9  2007-03-31 00:00:00  96.5
## 10 2007-03-31 12:00:00 108.5
## 11 2007-04-01 00:00:00 120.5
## 12 2007-04-01 12:00:00 132.5
## 13 2007-04-02 00:00:00 144.5
## 14 2007-04-02 12:00:00 156.5
## 15 2007-04-03 00:00:00 168.5
## 16 2007-04-03 12:00:00 180.5
## 17 2007-04-04 00:00:00 192.5
## 18 2007-04-04 12:00:00 204.5
## 19 2007-04-05 00:00:00 216.5
## 20 2007-04-05 12:00:00 228.5
## 21 2007-04-06 00:00:00 237.5 
```

现在扩展它来解决剩下的问题。这里给出的是早上 6 点到晚上 7 点的时间范围。

```
intraday <- as.numeric(DF$dtm) %% 86400

# Subset DF by the chosen range
New_Avg <- aggregate(Count~halfday, data=DF[intraday >= 6*3600 & intraday <= 19*3600,], FUN=mean)

New_Avg
##                halfday Count
## 1  2007-03-27 00:00:00   3.5
## 2  2007-03-27 12:00:00  10.5
## 3  2007-03-28 00:00:00  27.5
## 4  2007-03-28 12:00:00  34.5
## 5  2007-03-29 00:00:00  51.5
## 6  2007-03-29 12:00:00  58.5
## 7  2007-03-30 00:00:00  75.5
## 8  2007-03-30 12:00:00  82.5
## 9  2007-03-31 00:00:00  99.5
## 10 2007-03-31 12:00:00 106.5
## 11 2007-04-01 00:00:00 123.5
## 12 2007-04-01 12:00:00 130.5
## 13 2007-04-02 00:00:00 147.5
## 14 2007-04-02 12:00:00 154.5
## 15 2007-04-03 00:00:00 171.5
## 16 2007-04-03 12:00:00 178.5
## 17 2007-04-04 00:00:00 195.5
## 18 2007-04-04 12:00:00 202.5
## 19 2007-04-05 00:00:00 219.5
## 20 2007-04-05 12:00:00 226.5 
```

# php - Apache、MySQL 和 PHP 的竞争条件

> ID：15284944
> 
> 赞同：3
> 
> 时间：2013-03-08T01:01:33.540
> 
> 标签：php, mysql, apache

我的理解是 Apache 为每个传入请求创建一个单独的 PHP 进程。这意味着，如果我有执行以下操作的代码：

1.  检查记录是否存在
2.  如果记录不存在，则创建它

那么这很容易受到竞争条件的影响，不是吗？如果两个请求同时进入，并且它们都同时命中 (1)，它们都会返回 false，然后都尝试插入新记录。

如果是这样，人们如何处理这个问题？围绕这两个请求创建一个 MySQL 事务会解决问题，还是我们需要做一个全表锁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:06:49.543

据我所知，您无法跨不同连接创建事务。也许一种解决方案是将您正在检查的列设置为唯一的。这样，如果有两个连接到`10`, 并且`10`不存在。他们都将尝试创建`10`. 一个会先完成插入行，一切都很好；那么后面一秒钟的连接将失败，因为该列不是唯一的。如果您捕获了引发的异常，那么您随后可以`SELECT`从数据库中获取记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:33:29.070

老实说，我很少遇到这种情况。通常可以通过重新评估业务需求来缓解这种情况。即使两个不同的用户试图插入完全相同的数据，我也会推迟对用户重复的管理，而不是应用程序。

但是，如果有理由在应用程序逻辑中强制执行唯一约束，我会使用`INSERT IGNORE... ON DUPLICATE KEY UPDATE...`查询（当然，在表中使用相应的 UNIQUE 索引）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:28:09.233

我认为在第二步处理错误应该就足够了。如果两个进程尝试创建一条记录，那么只要您正确配置了 MySQL 表，其中一个就会失败。在正确的字段中使用 UNIQUE 是解决问题的一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T01:30:21.997

Apache 不会“为每个传入请求创建单独的 PHP 进程”。它要么使用进程池（默认，prefork 模式），要么使用线程。

正如您所提到的，竞争条件也可能被称为（或导致）数据库“死锁”。@[看看什么是数据库中的死锁？](https://stackoverflow.com/questions/2774935/what-is-deadlock-in-a-database)

在需要的地方使用事务应该可以解决这个问题，是的。
通过确保检查记录是否存在并在事务中创建它，整个操作是原子的。
因此，其他请求不会尝试创建重复记录（或者，根据实际查询，创建不一致或进入实际死锁）。

另请注意，MySQL （尚）不支持嵌套事务：事务中不能有事务，因为第一次提交将提交所有内容。

# asp.net-mvc - 我的 web.config 中没有定义角色管理器部分

> ID：15284946
> 
> 赞同：5
> 
> 时间：2013-03-08T01:01:35.797
> 
> 标签：asp.net-mvc

我在 VS 2010 express 上创建了一个新的 mvc4 项目。现在我想将角色添加到数据库。我正在使用包管理器控制台运行 update-database 命令来插入角色，它给了我以下错误

```
PM> Update-Database -verbose
Using StartUp project 'eManager.Web'.
Using NuGet project 'eManager.Web'.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'eManager.Web' (DataSource: .\SQLEXPRESS, Provider: System.Data.SqlClient, Origin: Configuration).
No pending code-based migrations.
Running Seed method.
System.Configuration.Provider.ProviderException: The Role Manager feature has not been enabled.
   at System.Web.Security.Roles.EnsureEnabled()
   at System.Web.Security.Roles.RoleExists(String roleName)
   at eManager.Web.Migrations.Configuration.Seed(DepartmentDb context) in C:\Users\Administrator\Desktop\eManager\eManager.Web\Migrations\Configuration.cs:line 26
   at System.Data.Entity.Migrations.DbMigrationsConfiguration`1.OnSeed(DbContext context)
   at System.Data.Entity.Migrations.DbMigrator.SeedDatabase()
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.SeedDatabase()
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run() 
```

**角色管理器功能尚未启用。**

我需要启用角色管理器，但在 web.config 中找不到该部分

以下是 web.config 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=eManager.Web;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\eManager.mdf " providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>

          <!--<add key="enableSimpleMembership" value="true" />-->

    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
      <compilation debug="true" targetFramework="4.5">
          <assemblies>
              <add assembly="WebMatrix.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
              <add assembly="WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
          </assemblies>
      </compilation>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T04:05:42.183

该部分默认情况下不存在，但您可以添加它。

放在里面`<system.web>`

例如

```
<system.web>
   <roleManager defaultProvider="CustomRoleProvider" >
     <providers>
       <clear />
       <add name="CustomRoleProvider" type="MyNamespace.CustomRoleProvider" />
     </providers>
   </roleManager>
   <compilation debug="true" targetFramework="4.0" />
.... 
```

# gcc - 了解 gcc -S 输出

> ID：15284947
> 
> 赞同：16
> 
> 时间：2013-03-08T01:01:36.520
> 
> 标签：gcc, assembly, x86-64

我在 x86_64 上的下面非常复杂的程序上做了 gcc -S：

```
int main() {
    int x = 3;
    x = 5;
    return 0;
} 
```

我得到的是：

```
 .file   "main.c"
        .text
.globl main
        .type   main, @function
main:
.LFB0:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        movq    %rsp, %rbp
        .cfi_def_cfa_register 6
        movl    $3, -4(%rbp)
        movl    $5, -4(%rbp)
        movl    $0, %eax
        leave
        .cfi_def_cfa 7, 8
        ret
        .cfi_endproc
.LFE0:
        .size   main, .-main
        .ident  "GCC: (GNU) 4.4.7 20120313 (Red Hat 4.4.7-3)"
        .section        .note.GNU-stack,"",@progbits 
```

我想知道是否有人可以帮助我理解输出或向我推荐一些链接解释。具体来说，是什么`cfi ,LFB0,LFE0 , leave`意思？关于这些，我能找到的只是[这篇文章](https://stackoverflow.com/questions/2529185/what-are-cfi-directives-in-gnu-assembler-gas-used-for)，但无法完全理解它的用途。另外，`ret`在这种情况下怎么办？我猜它会返回到`__libc_start_main()`哪个反过来会调用`do_exit()`，对吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T01:15:43.603

这些`.cfisomething`指令导致编译器生成附加数据。当指令导致异常时，此数据有助于遍历调用堆栈，因此可以找到并正确执行异常处理程序（如果有）。调用堆栈信息对于调试很有用。该数据很可能进入可执行文件的单独部分。它没有插入您的代码指令之间。

`.LFsomething:`只是那些额外的异常相关数据可能引用的常规标签。

`leave`并且`ret`是 CPU 指令。

`leave`相当于：

```
movq    %rbp, %rsp
popq    %rbp 
```

它取消了这两条指令的效果

```
pushq   %rbp
movq    %rsp, %rbp 
```

以及通过从`rsp`.

`ret`从函数返回。它从堆栈中弹出返回地址并跳转到该地址。如果是`__libc_start_main()`那个被调用`main()`的，那么它会返回那里。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-08T01:14:59.610

1.  `.LFB0, .LFE0`只不过是本地标签。

2.  `.cfi_startproc`在每个函数的开头使用，函数的结尾发生在`.cfi_endproc`.

    *   这些汇编器指令帮助汇编器将调试和堆栈展开信息放入可执行文件中。
3.  该`leave`指令是一个 x86 汇编指令，它执行恢复调用函数的堆栈帧的工作。

最后在`ret`指令之后，会发生以下事情：

*   `%rip`包含返回地址
*   `%rsp`指向调用者推送的参数，这些参数不适合用于在 amd64 上传递参数的六个寄存器（%rdi、%rsi、%rdx、%rcx、%r8、%r9）
*   被调用的函数可能有废弃的参数
*   `%rax``%rax`包含返回值（如果函数为 void ，则为垃圾）（或者`%rdx`如果其大小 >8 字节但 <=16 字节¹则包含返回值）
*   `%r10`,`%r11`可能会被丢弃
*   `%rbp`, `%rbx`, `%r12`, `%r13`, `%r14`,`%r15`必须包含调用时的内容

可以在[此处（SO question）](https://stackoverflow.com/questions/18133812/where-is-the-x86-64-system-v-abi-documented)和[此处（标准 PDF）](https://github.com/hjl-tools/x86-psABI/wiki/X86-psABI)找到其他信息。

或者，在 32 位上：

*   `%eip`包含返回地址
*   `%esp`指向调用者推送的参数
*   被调用的函数可能有废弃的参数
*   `%eax`包含返回值（如果函数为空，则为垃圾）
*   `%ecx`,`%edx`可能会被丢弃
*   `%ebp`, `%ebx`, `%esi`,`%edi`必须包含调用时的内容

# boost - 包含/标题的提升指南

> ID：15284953
> 
> 赞同：0
> 
> 时间：2013-03-08T01:02:28.160
> 
> 标签：boost

是否有包含提升标头的官方规则/指南？我想知道直到最近我几乎总是使用 format `#include <boost/library.hpp>`。然后我遇到了**Boost.Timer**，其文档指出该库有 2 个版本，一个已弃用，一个新版本。

不推荐使用的版本位于 .`<boost/timer.hpp>`而新版本位于`<boost/timer/timer.hpp>`. 这两个版本看似没有任何交互就存在...

所以我想：“显然应该更喜欢'内部'标题”。因此，我查看了一些我更经常使用的标头，并注意到例如`<boost/format.hpp>`仅包含`boost/format`一些外部依赖项的标头。所以包括特定的标题似乎不是最好的主意。

所以我想：“好吧，也许这是一个过渡性的人工制品，他们正在朝着这个`boost/library/header'`计划努力”。

我注意到新的**Boost.Atomics**库 - 只是最近才添加的 - 并且惊呆了：有一个标题`boost/atomics.hpp`和一个带有同名标题的文件夹。

现在我有些困惑：是否有关于哪些标头被视为公共标头（类似于标准标头）以及 api 的内部方面从哪里开始的官方指南？还是完全由图书馆决定其标题的结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:55:43.603

据我所知，[Boost Library Requirements and Guidelines](http://www.boost.org/development/requirements.html)没有定义头文件的范围和分离。[Boost Header Policy](http://www.boost.org/development/header.html)定义了允许 headers 与其他 headers 共存的准则。然而，许多库通过以下方式提供了区别：

*   为用户可能想要的类型/功能的逻辑划分提供单独的文件。
*   将库内部的头文件放在`detail`目录中。
*   在命名空间中声明内部类型、函数等`detail`。

有些甚至通过将定义放在目录中来将函数声明与其在头文件中的定义分开来进行另一层区分`impl`。

假设包含最高级别的头文件是安全的。此外，包含更具体的文件通常应该是安全的。例如：

*   如果我想要`boost::thread`,`boost::mutex`和`boost::lock`, 或者不介意额外的包含, 那么我可以包含`boost/thread.hpp`.
*   如果我只想要`boost::thread`，那么我会包括`boost/thread/thread_only.hpp`。我不会直接包括`boost/thread/detail/thread.hpp`.

# sql - 如何授予自己对本地 Access 表的读取权限？

> ID：15284954
> 
> 赞同：1
> 
> 时间：2013-03-08T01:02:30.657
> 
> 标签：sql, visual-studio, ms-access, server-explorer

我试图通过创建与它的连接然后在服务器资源管理器中运行查询来查看我的 SQL 语句（MS Access）是否在 Visual Studio 中完成了它应该做的事情。

我想知道这两个查询之间是否有任何区别：

```
SELECT        duckbill_.id, duckbill_.pack_size, duckbill_.description, duckbill_.vendor_id, duckbill_.department, duckbill_.subdepartment, duckbill_.unit_cost, duckbill_.unit_list, duckbill_.open_qty, duckbill_.UPC_code, 
                         duckbill_.UPC_pack_size, duckbill_.crv_id, duckbill__vendors.vendor_item
FROM            duckbill_, duckbill__vendors
WHERE        (duckbill_.vendor_id = duckbill__vendors.vendor_id) 
```

和：

```
SELECT        duckbill_.id, duckbill_.pack_size, duckbill_.description, duckbill_.vendor_id, duckbill_.department, duckbill_.subdepartment, duckbill_.unit_cost, duckbill_.unit_list, duckbill_.open_qty, duckbill_.UPC_code, 
                         duckbill_.UPC_pack_size, duckbill_.crv_id, duckbill__vendors.vendor_item
FROM            (duckbill_ LEFT OUTER JOIN
                         duckbill__vendors ON duckbill_.vendor_id = duckbill__vendors.vendor_id) 
```

...但它甚至不会让我执行查询。我可以连接到数据库，但显然不能连接到各个表。我收到此错误：

```
*SQL Execution Error
<My SQL statement>
Error Message: Record(s) cannot be read; no read permission on 'duckbill_'.* 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-24T18:06:43.657

我仍然想在 Visual Studio 的服务器资源管理器（或任何其他 Jet 查询工具）中执行此操作。这是我为修复它所做的：

1.  Shift + 双击 mdb 文件
2.  转到数据库工具选项卡
3.  单击用户和权限 > 用户和组权限
    *   如果此处没有用户显示，您可能首先需要访问用户和权限 > 用户和组帐户来创建一个。
4.  选择`Admin`我连接的用户
5.  在“对象名称：”下单击顶部项目，然后单击最后一个表以将它们全部选中
6.  单击所有权限复选框（或只读复选框，如果您愿意）
7.  申请; 关闭访问。

现在 Visual Studio 的服务器资源管理器能够在“Admin”用户下连接和运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:26:53.020

我能够找出我需要做的事情：

```
Won) In Windows Explorer, hold shift and 2-click the MDB you want to work with.
Too) In Access, select Objects | Queries, then "Create query in Design view"
3) Close the "Show table" dialog
Fore) Right-click in the pane and select "SQL View" 
```

你现在有一块空白的画布可以“做你的伤害”

# java - Java随机插入字符串

> ID：15284958
> 
> 赞同：1
> 
> 时间：2013-03-08T01:02:56.020
> 
> 标签：java, string, random

如何将随机变量插入字符串？我创建了一个变量，它让我在我想要放入一个字符的字符串中获得一个随机位置，但我不知道如何使用该随机值来将该字符放在那个特定位置。这是我为获取随机变量所做的代码-

```
r=0+Math.random()*intTop; 
```

我知道这给了我一个双倍，这就是为什么我稍后会施放它。intTop 是我将放入 char 的字符串的长度。我做了这个子字符串，但它不起作用，-

```
stringTop=stringTop.substring((int)r,lastBot); 
```

lastBot 是我想在字符串的位置 r 插入的 char 变量。请帮助我真的被卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:08:51.337

Java 字符串是不可变的，这意味着您不能就地修改字符串。相反，您应该创建一个新字符串。您可以通过将原始字符串分成两部分并在其间插入新字符来完成此操作。像这样的东西，

```
stringTop.substring(0, r) + lastBot + stringTop.substring(r); 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:47:43.213

将字符放在字符串的某个位置

```
 char[] chars = str.toCharArray();
    chars[r] = c;
    str = new String(chars); 
```

或者

```
 StringBuilder sb = new StringBuilder(str);
    sb.setCharAt(r, c);
    str = sb.toString(); 
```

# c++ - 对 foo::bar static ofstream 的未定义引用

> ID：15284959
> 
> 赞同：0
> 
> 时间：2013-03-08T01:03:05.893
> 
> 标签：c++

我一直在尝试编译过去三天构建的程序，但我不知道如何让它停止抛出错误。我不断收到编译错误“未定义对 Foo::bar 的引用”，其中“bar”是 Foo.h 文件中声明的静态 ofstream。

**Foo.h**

```
Class Foo
{
    public:
          <insert methods>
    private:
          static ofstream& bar;
 } 
```

**Foo.cpp**

```
#include <iostream>
#include <fstream>
#include <sstream>
#include "EventReport.h"
using namespace std;

Foo::Foo()
{
   bar.open("foobar.txt");
} 
```

我不断在 Foo.cpp 的“栏”上收到错误消息（文件中有多个）。关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:05:11.473

```
undefined reference to Foo::bar 
```

该错误意味着您告诉编译器该对象存在...

```
class Foo {
      static ofstream& bar;
}; 
```

...编译器决定使用它。

但你从未定义它。它是未定义的。

将此添加到 Foo.cpp：

```
ofstream& Foo::bar = (something); 
```

# php - 带有图像的随机版本号以强制缓存

> ID：15284960
> 
> 赞同：0
> 
> 时间：2013-03-08T01:03:17.797
> 
> 标签：php, javascript, html, random, version

我很少有随机的 php 脚本，其中包含 HTML 代码的各个部分、样式表和图像。但最近我遇到了缓存问题。

我向样式表添加了一个随机版本号以强制它成为一个新样式表。

```
 <script>document.write('<link rel="stylesheet" href="/css/fonts/rotate.php?dev=' + Math.floor(Math.random() * 100) + '" type="text/css" media="screen" />');</script> 
```

如何对图像做类似的事情？

```
<script>
document.write("<IMG SRC=" + "/images/rotate.php" + ">");

</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T01:07:12.013

您可以将以下标头添加到**rotate.php**：

```
 header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
  header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
  header("Cache-Control: no-store, no-cache, must-revalidate"); 
  header("Cache-Control: post-check=0, pre-check=0", false); 
  header("Pragma: no-cache"); 
```

您也可以通过 .htaccess 文件尝试：

```
<Directory />
    <filesMatch "rotate.(html|htm|js|css|php)$">
    FileETag None
    <ifModule mod_headers.c>
    Header unset ETag
    Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
    </ifModule>
    </filesMatch>
</Directory> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-08T01:04:54.203

您可以在最后添加随机乱码参数。

```
"/images/rotate.php?dev=" + Math.floor(Math.random() * 101) 
```

# sed - 是否可以告诉 sed 每行最多执行一次替换？

> ID：15284962
> 
> 赞同：3
> 
> 时间：2013-03-08T01:03:36.223
> 
> 标签：sed

是否可以使用 sed 封装以下伪代码？

```
for line in lines:
    if line == "foo":
        print "FOO"
    else:
        print "- " + line 
```

这是我尝试的第一件事：

```
> echo 'foo
> bar
> baz' | sed -e 's/^foo$/FOO/' -e 's/^/- /'
- FOO
- bar
- baz 
```

这是不正确的，因为*两个*替换都应用于第一行。

是否可以告诉 sed 每行最多执行一次替换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:12:00.817

您可以通过在其前面加上一个模式来限制替换影响的行：

```
sed -e '/^foo$/! s/^/- /' -e '/^foo$/ s//FOO/' infile 
```

更好的选择是使用`t`分支命令，如果先前的替换成功，它将转到下一行：

```
sed 's/^foo$/FOO/; t; s/^/- /' infile 
```

或者更便携：

```
sed -e 's/^foo$/FOO/' -e t -e 's/^/- /' infile 
```

两种情况下的输出：

```
FOO
- bar
- baz 
```

# wordpress - 侧边栏导航仅在 Safari 中不可见

> ID：15284966
> 
> 赞同：0
> 
> 时间：2013-03-08T01:03:53.417
> 
> 标签：wordpress, browser, safari, navigation, compatibility

我正在为 wordpress 开发我的投资组合网站，由于某种原因，我无法识别我的页面链接在 safari 中不可见，但它们在所有其他经过测试的浏览器中都可以正常工作。

[http://www.jcstudios.org/about/](http://www.jcstudios.org/about/)

它们应该在页面左侧的侧边栏中，如您在 firefox、chrome、ie 等中看到的那样，但在 safari 中却没有。有谁知道可能是什么原因造成的或有解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:08:40.687

我在 Safari 5 中看不到侧边栏。尝试修复侧边栏中的代码错误，看看是否有效： http://validator.w3.org/check?uri= [http%3A//www.jcstudios.org / about/&doctype=内联&ss=1&group=0&user-agent=W3C_Validator/1.654](http://validator.w3.org/check?uri=http%3A//www.jcstudios.org/about/&doctype=Inline&ss=1&group=0&user-agent=W3C_Validator/1.654)

并使用开发工具查看 404ing 的三个图像：

```
about/images/close.png
about/images/loading.gif
wp-content/themes/images/header.jpg 
```

# python - 基于 FK 的 Django 查询——获取所有，而不是任何

> ID：15284978
> 
> 赞同：1
> 
> 时间：2013-03-08T01:05:26.797
> 
> 标签：python, mysql, django

我需要找到一个包含所有状态 = 已完成的订单项目的订单。它看起来像这样：

```
FINISHED_STATUSES = [17,18,19]
if active_tab == 'outstanding':
    orders = orders.exclude(items__status__in=FINISHED_STATUSES) 
```

但是，此查询仅给我提供**任何**具有已完成状态的订单项目的订单。我将如何进行查询，以便仅检索具有已完成状态的**所有订单项目的那些订单？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:55:43.240

我认为您需要在这里进行原始查询：

将您的订单和项目模型设置为订单和项目：

```
# raw query
sql = """\
  select `orders`.* from `%{orders_table}s` as `orders`
  join `%{items_table}s` as `items`
  on `items`.`%{item_order_fk}s` = `orders`.`%{order_pk}s`
  where `items`.`%{status_field}s` in (%{status_list}s)
  group by `orders`.`%{orders_pk}s`
  having count(*) = %{status_count)s;
""" % {
        "orders_table": Orders._meta.db_table,
        "items_table":  Items._meta.db_table,
        "order_pk":     Orders._meta.pk.colum,
        "item_order_fk":Items._meta.get_field("order").colum,
        "status_field": Items._meta.get_field("status").colum,
        "status_list":  str(FINISHED_STATUSES)[1:-1],
        "status_count": len(FINISHED_STATUSES),
    }

orders = Orders.objects.raw(sql) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:48:17.303

我能够通过一种骇人听闻的方式完成这项工作。首先，我添加了一个额外的布尔列，`is_finished`. 然后，要查找至少有一个未完成项目的订单：

```
orders = orders.filter(items__status__is_finished=False) 
```

这给了我所有未完成的订单。

做相反的事情得到完成的订单：

```
orders = orders.exclude(items__status__is_finished=False) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:58:46.223

添加布尔字段是个好主意。这样，您就可以在模型中清楚地定义业务规则。

现在，假设您仍然想在不借助添加字段的情况下执行此操作。考虑到不同的情况，这很可能是一项要求。不幸的是，您不能真正在 Django ORM 中使用子查询或任意连接。但是，您可以使用and构建`Q`对象并在 having 子句中进行隐式连接。`filter()``annotate()`

```
from django.db.models.aggregates import Count
from django.db.models import Q
from functools import reduce
from operator import or_

total_items_by_orders = Orders.objects.annotate(
    item_count=Count('items'))
finished_items_by_orders = Orders.objects.filter(
    items__status__in=FINISHED_STATUSES).annotate(
    item_count=Count('items'))
orders = total_items_by_orders.exclude(
    reduce(or_, (Q(id=o.id, item_count=o.item_count)
                 for o in finished_items_by_orders))) 
```

请注意，使用原始 SQL 虽然不太优雅，但通常会更有效。

# python - .py 文件没有在 OSX Finder 的 IDLE 中打开？

> ID：15284984
> 
> 赞同：0
> 
> 时间：2013-03-08T01:06:15.160
> 
> 标签：python, python-2.7, osx-mountain-lion, python-idle, finder

我最近在 OSX 10.8.2 上从 python.org 重新安装了 Python 2.7.3，现在当我在 Finder 中双击 .py 文件或右键单击/打开时，什么也没有发生（实际上我什么都看不到） - 有/空闲（2.7.3）。（**编辑：** IDLE 已被设置为打开 .py 文件的默认程序；“右键单击”部分只是为了说明我无法以任何方式打开它们。）

我安装了 Tcl/Tk 8.5.13（在我重新安装 Python 后重新安装），我可以很好地打开 IDLE，所以这不是没有正确版本的 Tcl/IDLE 无法工作的问题TK。我也可以`idle -e file.py`毫无问题地从终端打开 .py 文件。

我确实注意到，当我以这种方式打开文件时，Python Launcher 会激活，而当我在 Finder 中双击 .py 文件时，Python Launcher 会激活（尽管再次，当我这样做时，实际上什么也没有发生——我的 Dock 中有 IDLE 图标并且它不会开始弹跳或任何东西）。这可能是 Python 启动器问题吗？如果没有，有人知道这里发生了什么吗？

**更新：**我尝试先打开 IDLE，然后双击 .py 文件，这很有效。因此，当您尝试在 Finder 中打开 .py 文件时，这似乎只是 IDLE 未打开的问题。

我知道这意味着我现在至少有其他三种方法可以在 IDLE 中打开我的 .py 文件，但我真的很喜欢能够导航到 Finder 中的文件并在 IDLE 本身尚未打开时打开它。因此，如果可能的话，我仍然真的很想解决这个问题（我也真的很讨厌那些本来应该可以工作的东西却没有用）。

**更新：**根据 Ned Deily 的建议，我使用 Console.app 检查了错误并发现：

```
3/8/13 10:42:38.006 AM com.apple.launchd.peruser.501[276]: ([0x0-0x199199].org.python.IDLE[1975]) Exited with code: 1 
```

`.py`每当我尝试在 Finder 中双击文件时都会弹出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:28:17.377

确保您已将预期实例`IDLE`设置为所有`.py`文件的默认应用程序。一种方法是`.py`在 Finder 窗口中选择一个文件，然后选择`Finder -> File -> Get Info`菜单项（或`Cmd-I`）。在该`Open with:`部分中，下拉应用程序菜单项并选择所需的`IDLE`；如果您安装了多个副本`IDLE`，请选择`Other..`列表底部的菜单项并使用文件选择器选择正确的`IDLE`. 然后，单击`Change all...`按钮`Use this application to open all documents like this one`。您现在应该能够`.py`通过双击在所需的 IDLE 中启动文件。如果这不起作用，请检查`system.log`是否记录了任何错误消息。您可以使用`Console`检查日志的实用程序 ( `/Applications/Utilities/Console.app`)。

# function - Erlang：从梁可执行文件调用 rr(?MODULE)？

> ID：15284986
> 
> 赞同：2
> 
> 时间：2013-03-08T01:06:32.417
> 
> 标签：function, erlang, initialization, record

我不完全确定如何在 Erlang 模块中定义 Erlang 函数。我收到以下错误：

```
11> invoke_record:invoke().
** exception error: undefined function erlang:rr/1 
```

从这个简单的代码中，尝试调用`rr(?MODULE).`Beam 可执行文件中的 from 以“初始化”记录，这样就不需要每次都从 shell 调用它。

```
-module(invoke_record).
-export([invoke/0]).
-record(process, {pid,
                reference="",
                lifetime=0
                }).
invoke() ->
    erlang:rr(?MODULE). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:26:54.173

该命令`rr("file.hrl").`旨在仅在 shell 中用于调试目的。

正如其他用户在他们的答案中强调的那样，在您的 erlang 代码中导入 .hrl 文件中包含的记录（或函数）的正确方法在于使用 command `-include("file.hrl')`。

一旦将`.hrl`文件包含在代码中（通常在基于 OTP 行为的模块中，这在`-export(...)`部分之后完成），您就可以毫无问题地引用 Erlang 记录（或函数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T01:10:28.840

`rr`是一个shell命令。你不能使用它编译的代码。

[http://www.erlang.org/doc/man/shell.html](http://www.erlang.org/doc/man/shell.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T12:40:55.787

如果您的意图是在 shell 中读取许多记录定义，为了方便调试，您可以编写一个包含所有需要的包含语句的文件，并在 shell 中简单地调用 rr 一次。

在 rec.hrl 中：

```
-include("include/bank.hrl").
-include("include/reply.hrl"). 
```

并在外壳中

```
1> rr("rec.hrl").
[account,reply]
2> 
```

启动虚拟机时，我没有找到任何自动执行此操作的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-20T14:46:56.300

在处理项目时，您可以在纯文本文件中收集要用于该特定项目的所有必要的包含和其他命令行参数。制作纯文本文件后，您可以启动 shell：

```
erl -args_file FileName 
```

其中 FileName 是纯文本文件的名称。请注意，**erl 接受的所有命令行参数都是允许的**。另请参阅[ERTS 参考手册中的erl 标志](http://erlang.org/doc/man/erl.html)

# import - opencart，导入客户

> ID：15284991
> 
> 赞同：5
> 
> 时间：2013-03-08T01:07:00.637
> 
> 标签：import, opencart

我对此有 3 个疑问。

我有一个新的 Opencart 网站和 500 多个客户要添加。我找到了几个导入客户扩展，但支持似乎已经消失，而且似乎没有 1.5.5.1 的工作版本，所以我正在考虑使用 xls 文件导入 mysql。

我的查询如下：

查询1：我似乎需要上传2个表：（a）地址；(b) 客户。这些是唯一需要更改的表吗？

查询 2：我看到密码是 MD5 加密的。我已经拥有所有 500 多个客户的密码 - 我是否必须将这些密码转换为 MD5，或者我可以使用未加密的密码并且数据库为我进行加密？

查询 3：如何处理 Customer 表中的 Salt 字段？我可以把这个留空吗？

3 倍 MTIA ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T06:55:15.783

**查询 1**：这些应该足够了（还有其他表，例如`customer_ip`etc，但这不会引起任何问题

**查询 2**：数据库不会为您加密密码

**查询3**：不，你不能把salt留空（除非你编辑密码检查代码，这显然不推荐）

**那么你应该怎么做？**

**为每个客户**首先生成这样的盐

```
 $salt = substr(md5(uniqid(rand(), true)), 0, 9) 
```

然后像这样加密密码：

```
$password = sha1($salt . sha1($salt . sha1($password))) 
```

然后将这些变量保存在数据库中。

你可以看看`system/library/customer.php`and `catalog/model/account/customer.php`，了解事情是如何运作的

# ruby - 访问 Ruby 线程

> ID：15284997
> 
> 赞同：1
> 
> 时间：2013-03-08T01:07:33.300
> 
> 标签：ruby

可能甚至不是一个有效的问题，但我如何才能看到这个块包含的内容：

```
spec = Thread.current[:spec]
print spec # gives => #<RSpec::Core::ExampleGroup::Nested_1:0x7f61991d90c8> 
```

我可以看到分配给它的任何方法或其中的任何方法吗？

如果需要更多上下文，我正在尝试了解规范在此处的功能中执行的操作，但未在任何地方使用（至少直接使用）

[https://github.com/amfranz/rspec-hiera-puppet/blob/master/lib/rspec-hiera-puppet/puppet.rb#L7](https://github.com/amfranz/rspec-hiera-puppet/blob/master/lib/rspec-hiera-puppet/puppet.rb#L7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:35:58.930

要查看属性，请执行以下操作：

```
spec.inspect 
```

如果要访问这些属性：

```
spec.propertyyouwant 
```

# arrays - 如何构造一个单元格以在 Matlab 中以特定格式存储值？

> ID：15284999
> 
> 赞同：0
> 
> 时间：2013-03-08T01:08:01.697
> 
> 标签：arrays, matlab, matrix, cell, combinations

我有一个代码可以在两个小于特定值的数组之间寻找最佳组合。该代码一次仅使用数组 B 的每一行中的一个值。

```
B =
       1           2           3
      10          20          30
     100         200         300
    1000        2000        3000 
```

我使用的代码是：

```
B=[1 2 3; 10 20 30 ; 100 200 300 ; 1000 2000 3000];
A=[100; 500; 300 ; 425];
SA = sum(A);
V={}; % number of rows for cell V = num of combinations -- column = 1                
n = 1;
for k = 1:length(B)                    
    for idx = nchoosek(1:numel(B), k)'  
       rows = mod(idx, length(B));
       if ~isequal(rows, unique(rows)) %if rows not equal to unique(rows)
           continue  %combination possibility valid      
       end %Ignore the combination if there are two elements from the same row 
       B_subset = B(idx);
       if (SA + sum(B_subset) <= 2000) %if sum of A + (combination) < 2000
           V(n,1) = {B_subset(:)}; %iterate cell V with possible combinations
           n = n + 1;
        end
    end
end 
```

但是，我想以不同于此代码将它们存储在单元格中的方式显示结果。

而不是在单元格中显示结果，`V`例如：

```
[1]
[10]
[300]
[10;200]
[1000;30]
[1;10;300] 
```

这是首选：（每行 X 列在单元格中占据特定位置）这里，这意味着它们应该排列为`cell(1,1)={[B(1,x),B(2,y),B(3,z),B(4,w)]}`。`x y z w`具有所选值的列在哪里。所以显示的输出是：

```
[1;0;0;0]
[0;10;0;0]
[0;0;300;0]
[0;10;200;0]
[0;30;0;1000]
[1;10;300;0] 
```

在每个答案中，通过从矩阵 B 的第 1 到第 4 行中选择一个值来确定组合。每行有 3 列，并且每行一次只能选择一个值。但是，如果不能使用例如 B(1,2)，它将被替换为零。例如，如果第 1 行`B`不能使用，那么`B(1,1:3)`将是单个 0。结果将是 [0;x;y;z]。

*   因此，如果`2`从第*1 行*中选择，并且`20`从第*2 行*中选择，而第*3*和*第 4*行不包括在内，它们应该显示 0。所以答案将是 [2;20;0;0]。
*   如果仅使用*第 4 行*（例如 1000），则答案应为 [0;0;0;1000]

* * *

总之，我想实现以下内容：

*   每个单元格包含`length(B)`B 中每一行的值（基于组合）
*   未用于组合的每个值都应为 0 并打印在单元格中

我目前正在尝试实现这一点，但我的方法不起作用..如果您需要更多信息，请告诉我。

**编辑**

我已尝试在下面的 dfb 答案中实现代码，但遇到困难，请查看答案，因为它包含解决方案的一半。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:24:32.093

我的 MATLAB 超级生锈，但这样的东西不能满足您的需要吗？

```
arr =  zeros(1,len(B))
arr(idx) = B_subset(:)
V(n,1) = {arr} 
```