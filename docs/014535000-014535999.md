# StackOverflow 问答 14535000-14535999

# ruby-on-rails - rails 中 form_for 方法的这行代码有什么作用？

> ID：14535001
> 
> 赞同：0
> 
> 时间：2013-01-26T07:51:08.550
> 
> 标签：ruby-on-rails, ruby

这行代码来自 rails 中的 form_for 方法是做什么的？

> object = record.is_a?(Array) ? record.last : 记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:58:47.930

首先，[这是实际的代码行](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/form_helper.rb#L424)和完整的上下文：

```
def form_for(record, options = {}, &block)
  raise ArgumentError, "Missing block" unless block_given?
  html_options = options[:html] ||= {}

  case record
  when String, Symbol
    object_name = record
    object = nil
  else
    object = record.is_a?(Array) ? record.last : record
    raise ArgumentError, "First argument in form cannot contain nil or be empty" unless object
    object_name = options[:as] || model_name_from_record_or_class(object).param_key
    apply_form_for_options!(record, object, options)
  end
  [...]
end 
```

它说：如果`record`是一个数组，则将数组的最后一个元素分配给`object`，否则将`record`其自身分配给`object`。

因此，基本上，它描述了当您不知道您将获得一组记录还是仅获得一条记录时如何处理这种情况。

在几种情况下，您将数组传递到`form_for`.

命名空间路由：

```
<%= form_for([:admin, @post]) do |f| %>
  ...
<% end %> 
```

嵌套资源：

```
<%= form_for([@document, @comment]) do |f| %>
 ...
<% end %> 
```

请注意，在每种情况下，它都是表单实际用于的数组中的最后一个元素；较早的元素提供上下文（在命名空间或嵌套上）。更多在[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:03:13.110

它检查变量`record`是否为数组，如果是，则获取数组中的最后一个元素，如果不是，则获取记录本身。

这对于嵌套路由很有用，例如，如果您有一个属于 User 的模型 Book，并且在您的路由中嵌套它们：

```
# config/routes.rb

resources :users do
  resources :books
end 
```

然后对于您需要指定的资源`form_for [@user, @book] do |f|`

* * *

有关带有嵌套资源的 form_for 的更多信息：[带有嵌套资源的 form_for](https://stackoverflow.com/questions/2034700/form-for-with-nested-resources#answer-4611932)

它还使用 is_a? 方法：[http ://ruby-doc.org/core-1.9.3/Object.html#method-i-is_a-3F](http://ruby-doc.org/core-1.9.3/Object.html#method-i-is_a-3F)

和三元运算符：[Ruby 三元运算符没有 else](https://stackoverflow.com/questions/2174419/ruby-ternary-operator-without-else#answer-2175392)

# php - 如何删除 zend 框架 URL 中的操作部分

> ID：14535005
> 
> 赞同：0
> 
> 时间：2013-01-26T07:51:49.683
> 
> 标签：php, zend-framework, url

我正在使用 zend 框架，我的网址是这样的：

```
http://target.net/reward/index/year/2012/month/11 
```

url 显示我在奖励控制器和索引操作中。其余的是我的参数。问题是我在整个程序中使用索引操作，我想从 URL 中删除该部分以使其像这样：

```
http://target.net/reward/year/2012/month/11 
```

但是年份部分被误认为是动作部分。有什么办法吗？！！！提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:36:08.093

看看[路线](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)。使用路由，您可以将任何 URL 格式重定向到您指定的控制器/操作。例如，在`.ini`配置文件中，这将执行您想要的操作：

```
routes.myroute.route = "reward/year/:myyear/month/:mymonth"
routes.myroute.defaults.controller = reward
routes.myroute.defaults.action = index
routes.myroute.defaults.myyear = 2012
routes.myroute.defaults.mymonth = 11
routes.myroute.reqs.myyear = "\d+"
routes.myroute.reqs.mymonth = "\d+" 
```

首先，您定义 URL 应匹配的格式。以冒号开头的词`:`是变量。之后，您定义默认值和对参数的任何要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:09:00.340

您可以使用 controller_plugin 来控制 url 。
因为你想创建一个插件文件（/library/plugins/controllers/myplugin.php）。
然后使用 preDispatch() 方法，您可以获得请求的 url 元素，然后为您的控制器自定义它。
**myplugin.php**

```
class plugins_controllers_pages extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        $int = 0;
        $params = $this->getRequest()->getParams();  
        if($params['action'] != 'index' ) AND !$int)
        {
             $int++;
             $request->setControllerName($params['controller']);
             $request->setActionName('index');
             $request->setParams(array('parameter' => $params['action']));
             $this->postDispatch($request);
        }
    }
} 
```

# python - 请求之间的神秘字典持久性？

> ID：14535007
> 
> 赞同：1
> 
> 时间：2013-01-26T07:52:03.590
> 
> 标签：python, django, dictionary

我有一系列函数都传递一个 dict，但是在每个实例中，dict 应该以`{}`. 但是，我发现在对不同视图的顺序请求中，dict 正在记住数据，从而导致以后出现问题。

以下是相关代码：

```
def picasa_sync_friend(user_profile, friend_id, force_update=False):
    logger.warn('picasa_sync_friend')
    data, error = picasa_query_by_profile('albums', user_profile, replace=(friend_id))
    ....

def picasa_sync_albums(user_profile, friend_id="default"):
    logger.warn('picasa_sync_albums')
    data, error = picasa_query_by_profile('albums', user_profile, replace=(friend_id))
    ...

def picasa_sync_pictures(user_profile, album_id, force_update=False, full_update=False):
    friend_id = picasa_get_album(user_profile, album_id).friend.foreign_reference
    subject = 'photos' if full_update else 'thumbs'
    logger.warn('picasa_sync_pictures')
    data, error = picasa_query_by_profile(subject, user_profile, replace=(friend_id, album_id))
    ...

def picasa_query_by_profile(subject, user_profile, args={}, replace=(), format='xml'):
    logger.warn('picasa_query_by_profile: %s' % args)
    access_token = picasa_get_token(user_profile).access_token
    response = picasa_query(subject, access_token, args=args, replace=replace)
    ...

def picasa_query(subject, access_token='', args={}, replace=()):
    logger.warn('picasa_query: %s' % args)
    url, request_args, method = picasa_query_params(subject, access_token=access_token, args=args, replace=replace)
    ...

def picasa_query_params(subject, access_token='', args={}, replace=()):
    method = 'GET'
    base_url = 'https://accounts.google.com/o/oauth2/'
    logger.warn('picasa_query_params (before): %s' % args)
    if subject == 'albums':
        args['access_token'] = access_token
        subject = ''
        base_url = 'https://picasaweb.google.com/data/feed/api/user/%s' % replace
        args['kind'] = 'album'
        args['v'] = '2.0'
        args['fields'] = 'entry(title,gphoto:id,gphoto:numphotos,published)'
    elif subject == 'photos':
        args['access_token'] = access_token
        base_url = 'https://picasaweb.google.com/data/feed/api/user/%s/albumid/%s' % replace
        args['v'] = '2.0'
        args['kind'] = 'photo'
        args['fields'] = 'entry(gphoto:id,content(@src),gphoto:width,gphoto:height)'
        subject = ''
    elif subject == 'thumbs':
        args['access_token'] = access_token
        base_url = 'https://picasaweb.google.com/data/feed/api/user/%s/albumid/%s' % replace
        args['v'] = '2.0'
        args['kind'] = 'photo'
        args['fields'] = 'entry(gphoto:id,content(@src),gphoto:width,gphoto:height)'
        args['max-results'] = ALBUM_THUMBNAIL_LIMIT
        subject = ''
    logger.warn('picasa_query_params (after ): %s' % args)
    url = '%s%s' % (base_url, subject)
    return url, args, method 
```

所以问题出现了，我有一个视图，它调用`picasa_sync_friend`然后`picasa_sync_albums`将所有专辑数据返回给客户端。

然后对于每个专辑，客户端发出一个**单独**的请求，调用`picasa_sync_pictures`每个`album_id`.

初始好友/相册请求的记录器输出如下所示：

```
WARNING 2013-01-26 07:27:23,611 picasa_sync_friend
WARNING 2013-01-26 07:27:23,617 picasa_query_by_profile: 
    {}
WARNING 2013-01-26 07:27:23,633 picasa_query:
    {}
WARNING 2013-01-26 07:27:23,633 picasa_query_params (albums:before):
    {}
WARNING 2013-01-26 07:27:23,633 picasa_query_params (:after ):
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'}

WARNING 2013-01-26 07:27:24,388 picasa_sync_albums
WARNING 2013-01-26 07:27:24,388 picasa_query_by_profile: 
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'}
WARNING 2013-01-26 07:27:24,389 picasa_query: 
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'}
WARNING 2013-01-26 07:27:24,389 picasa_query_params (before): 
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'}
WARNING 2013-01-26 07:27:24,389 picasa_query_params (after ):
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'} 
```

请注意，在`picasa_sync_albums`->`picasa_query_by_profile`中，已经填充了首字母`args`dict，尽管事实上`picasa_sync_albums`没有将任何数据发送到 args 数组键。

上面的记录器输出结束了朋友/相册请求，接下来要输入的是单个相册的图片列表，该列表直接转到`picasa_sync_pictures`：

```
WARNING 2013-01-26 07:27:25,981 picasa_sync_pictures
WARNING 2013-01-26 07:27:25,998 picasa_query_by_profile:
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'}
WARNING 2013-01-26 07:27:26,011 picasa_query:
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'}
WARNING 2013-01-26 07:27:26,020 picasa_query_params (before):
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'v': '2.0'}
WARNING 2013-01-26 07:27:26,022 picasa_query_params (after ):
    {'access_token': u'xxx', 'fields': 'entry(gphoto:id,content(@src),gphoto:width,gphoto:height)', 'kind': 'photo', 'max-results': 4, 'v': '2.0'} 
```

请注意，尽管这应该是一个新请求，但在`picasa_query_by_profile`args 中已经包含了。`'kind': 'album'`

如果我然后刷新页面，再次调用朋友/相册，我会得到以下日志输出：

```
WARNING 2013-01-26 07:45:32,589 picasa_sync_friend
WARNING 2013-01-26 07:45:32,593 picasa_query_by_profile:
    {'access_token': u'xxx', 'fields': 'entry(gphoto:id,content(@src),gphoto:width,gphoto:height)', 'kind': 'photo', 'max-results': 4, 'v': '2.0'}
WARNING 2013-01-26 07:45:32,597 picasa_query:
    {'access_token': u'xxx', 'fields': 'entry(gphoto:id,content(@src),gphoto:width,gphoto:height)', 'kind': 'photo', 'max-results': 4, 'v': '2.0'}
WARNING 2013-01-26 07:45:32,598 picasa_query_params (before): 
    {'access_token': u'xxx', 'fields': 'entry(gphoto:id,content(@src),gphoto:width,gphoto:height)', 'kind': 'photo', 'max-results': 4, 'v': '2.0'}
WARNING 2013-01-26 07:45:32,600 picasa_query_params (after ):
    {'access_token': u'xxx', 'fields': 'entry(title,gphoto:id,gphoto:numphotos,published)', 'kind': 'album', 'max-results': 4, 'v': '2.0'} 
```

这是它开始真正影响应用程序的地方，因为它正在应用诸如`max-results`专辑列表之类的东西，这是不可取的。

现在我可以通过非常明确并删除不应该适用于某些主题的 dict 项目来解决所有这些问题，但这使得这非常难以维护，并且计划是让这段代码可扩展为许多不同的主题，所以它需要要灵活，不那么容易出轨。

我很确定我在这里遗漏了 python/django 的一些基本部分，但我完全无法解释上述行为！感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:07:12.890

你不应该使用可变值作为 Python 函数的默认参数。考虑以下：

```
def f(arg={}):
  print arg
  if 'count' in arg:
    arg['count'] += 1
  else:
    arg['count'] = 1

f()
f()
f() 
```

令人惊讶的是，这会打印出来

```
{}
{'count': 1}
{'count': 2} 
```

发生的情况是`{}`in被评估一次，并且每次调用`f(arg={})`时都会传递相同的字典。`f()`因此，任何更改都会`args`在调用中持续存在。

修复上述代码的一种方法是：

```
def f(arg=None):
  if not arg:
    arg = {}
  print arg
  if 'count' in arg:
    arg['count'] += 1
  else:
    arg['count'] = 1 
```

您的代码中的以下函数会受到此问题的影响：

```
def picasa_query_by_profile(subject, user_profile, args={}, replace=(), format='xml'):
def picasa_query(subject, access_token='', args={}, replace=()):
def picasa_query_params(subject, access_token='', args={}, replace=()): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:07:01.337

不要使用可变变量作为默认值。像这样更改所有代码案例：

```
def picasa_query(subject, access_token='', args={}, replace=()):
    ... 
```

对此：

```
def picasa_query(subject, access_token='', args=None, replace=()):
    if args is None:
        args = {}
    ... 
```

函数的默认值仅在创建函数对象时评估*一次*，并且从那时起将同一对象用作默认值。这是最常见的[python 陷阱](https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines)之一。

# yii - 如何使用获取参数设置限制和偏移量

> ID：14535008
> 
> 赞同：1
> 
> 时间：2013-01-26T07:52:04.020
> 
> 标签：yii

我有三个模型命名：

1.  内容
2.  类别
3.  内容类别

内容和类别之间是这样的`MANY_MANY`关系：

```
public function relations()
{
    return array(
        'contents'=>array(self::MANY_MANY, 'Content',
                'tbl_content_category(category_id, content_id)',
                'order'=>'contents.id DESC',
                'limit'=>'10',
                'offset'=>'30',
        ),
    );
} 
```

它运作良好。但我想`offset`从`$_GET`变量中设置参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:11:57.710

刚设置

```
'limit'=> Yii::app()->request->getQuery('limit', 10),
'offset'=> Yii::app()->request->getQuery('offset', 30), 
```

# javascript - onClick 运行 javascript 功能不起作用

> ID：14535009
> 
> 赞同：2
> 
> 时间：2013-01-26T07:52:04.637
> 
> 标签：javascript, onclick

我有以下html代码

```
<div id="userMenu">
  <ul>
    <li id="tab1">
      <div onclick="displayTab(1);" class="tab">Transaction History</div>
    </li>
    <li id="tab2">
      <div onClick="displayTab(2)" class="tab">Top Up</div>
    </li>
    <li id="tab3">
      <div onclick="displayTab(3);" class="tab">Profile</div>
    </li>
  </ul>
</div>
<div style="clear: both; margin: 15px; border: 2px solid #99ffff;">
  <div id="content1" class="tabContent">
    Content1
  </div>
  <div id="content2" class="tabContent" style="display: none;">
    Content2
  </div>
  <div id="content3" class="tabContent" style="display: none;">
    Content3
  </div>
</div> 
```

javascript

```
function displayTab(tabNo){ alert(tabNo);
  for(i = 1; i < 4; i++){
    document.getElementById('content'+i).style.display = 'none';
  } 
  document.getElementById('content'+tabNo).style.display= 'block';
} 
```

为什么显示选项卡无法激活？如果我将 onclick 更改为`onclick="alert('1')"`，它会起作用。我在 Opera 和 Firefox 上试过，结果都是一样的。错误控制台告诉我有一个

> ReferenceError：未定义的变量 displayTab

请注意，这不是完整的代码。更疯狂的事实是，如果我按原样使用该代码（我放在这里的那个），它可以工作并且在错误控制台中没有错误。帮助，有人吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-26T08:04:21.427

尝试使用

```
onClick="javascript:displayTab(1)" 
```

# android - 如何处理 Android 设备的帧缓冲区？

> ID：14535010
> 
> 赞同：3
> 
> 时间：2013-01-26T07:52:16.010
> 
> 标签：android, ffmpeg, framebuffer

我想处理 Android 的帧缓冲区。我有一个扎根的 Galaxy R(SHV-E170K) 用于测试，我在其上运行以下命令：

```
adb pull /dev/graphics/fb0 fb0 
```

然后，我运行 ffmpeg 命令：

```
ffmpeg -vcodec rawvideo -f rawvideo -pix_fmt rgb0 -s 540x960 -i fb0 -f image2 -vcodec png frame-%d.png 
```

但是我得到了错误的图像。

![FFMPEG 图像](../Images/9ba7591eceb660cc2bcc7f04ee63f6b0.png)

如何正确处理 android 的帧缓冲区？

谢谢。

# oracle - Oracle Fusion Middleware 11g Web 层实用程序安装

> ID：14535020
> 
> 赞同：0
> 
> 时间：2013-01-26T07:54:28.403
> 
> 标签：oracle

在步骤 7 安装 Oracle fusion Middleware 11g Web 层实用程序时，出现以下错误并停止安装过程。

> 安装失败。准备会话失败严重：无法从命令行或响应文件获取以下变量的值：MYORACLESUPPORT_USERNAME(MyOracleSupportUsername) 静默安装无法继续。

我无法弄清楚什么是错的，请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:18:20.090

该消息表明您正在进行静默安装，因此您是否按照文档中的说明创建/修改了响应[文件](http://docs.oracle.com/cd/E27559_01/install.1112/e35859/silent_install.htm)？这里`MYORACLESUPPORT_USERNAME`提到[了](http://docs.oracle.com/cd/E24269_01/doc.11120/e23960/silent_install.htm)，但它与其他参数的交互并不总是很明显。[这里](http://docs.oracle.com/cd/E11882_01/em.112/e12255/oui3_response_files.htm#sthref268)有更多细节。

假设您不想获得安全更新，则需要设置`DECLINE_SECURITY_UPDATES`为`TRUE`（尽管我似乎记得无论如何都必须提供 MSO 凭据，但不确定我看到的是哪个版本，这似乎是一个错误）。如果您确实需要安全更新，请将其保留`FALSE`并将 MSO 凭据设置为适当的值。

# c++ - 类模板的“类没有构造函数”错误

> ID：14535027
> 
> 赞同：3
> 
> 时间：2013-01-26T07:56:05.843
> 
> 标签：c++, insert, linked-list

我正在制作一个链表，我只想在列表的前面添加一个节点。我究竟做错了什么？

`Node.h`

```
 #pragma once

 namespace list_1
 {
template <typename T>
struct Node
{
    T data;
    Node<T> *next;

    // Constructor
    // Postcondition: 
    Node<T> (T d);
};

template <typename T>
Node<T>::Node(T d)
{
    data = d;
    next = NULL;
}
 } 
```

`list.h`

```
template <typename T>
void list<T>::insert_front(const T& entry)
{
    Node<T> *temp = head;

    if(temp == NULL)
        temp->next = new Node(entry);
    else
    {
        while (temp->next != NULL)
        {
           temp = temp->next;
        }

        temp->next = new Node(entry);
    }
} 
```

错误信息;

```
 1>------ Build started: Project: Linked List, Configuration: Debug Win32 ------
 1>  list_test.cpp
 1>c:\...\linked list\list.h(54): error C2955: 'list_1::Node' : use of class template requires template argument list
 1>          c:\...\linked list\node.h(7) : see declaration of 'list_1::Node'
 1>          c:\...\linked list\list.h(48) : while compiling class template member function 'void list_1::list<T>::insert_front(const T &)'
 1>          with
 1>          [
 1>              T=double
 1>          ]
 1>          c:\...\linked list\list_test.cpp(33) : see reference to class template instantiation 'list_1::list<T>' being compiled
 1>          with
 1>          [
 1>              T=double
 1>          ]
 1>c:\...\linked list\list.h(54): error C2514: 'list_1::Node' : class has no constructors
 1>          c:\...\linked list\node.h(7) : see declaration of 'list_1::Node'
 1>c:\...\linked list\list.h(62): error C2514: 'list_1::Node' : class has no constructors
 1>          c:\...\linked list\node.h(7) : see declaration of 'list_1::Node'
 ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T08:02:40.410

阅读错误信息：

> 使用类模板需要模板参数列表

`new Node(entry)`应该`new Node<T>(entry)`

# java - Hibernate如何在小数点后2位写Detachedcriteria？

> ID：14535046
> 
> 赞同：1
> 
> 时间：2013-01-26T07:59:07.377
> 
> 标签：java, hibernate, detachedcriteria

这里我有 2 个值示例价格和折扣价格。当我使用 mysql

```
select price, discountPrice from stockItem where price = discountPrice; 
```

我没有找到记录。

在我改为

```
select price, discountPrice from stockItem where FORMAT(price,2) = FORMAT(discountPrice,2); 
```

我能够查询出记录。

我可以知道在hibernate中如何用小数点后2位写Detachedcriteria吗？

这是当前代码：

```
DetachedCriteria criteria = DetachedCriteria.forClass(StockItem.class);
criteria.add(Restrictions.eqProperty("price", "discountPrice"));
return getHibernateTemplate().findByCriteria(criteria); 
```

有办法写吗？

在 mysql 中我们看到是 10.70。我只怀疑实际数字是 10.700000000000001。有没有办法识别这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:25:31.253

尝试：

```
criteria.add(Restrictions.sqlRestriction("FORMAT(price,2) = FORMAT(discountPrice,2)")); 
```

通过使用 sqlRestriction() 您可以将文字 SQL 片段插入到查询中

# c++ - 使用 C++ 的基本终端输出 - 问题

> ID：14535050
> 
> 赞同：0
> 
> 时间：2013-01-26T07:59:39.530
> 
> 标签：c++, macos, gcc, terminal, clang

好吧，这个问题听起来可能有点含糊，但这里有两件事我需要做，我肯定需要一些输入：

*   **`cout`输出带有颜色的东西（例如使用）** *（注意：我的`TERM`环境变量设置为`xterm-color`如果这有什么不同；另外，是否有任何统一的方式来输出与纯 mac 和 *nix 终端兼容的彩色文本，以便代码是可移植的）*

*   **在终端屏幕上的相同位置输出一些东西。**好的，这听起来也令人困惑。让我们以一个简单地输出进度百分比的终端应用程序为例。它通常不会为此开始新的一行。新值显示在同一位置。这怎么可能？*（作为一个曾经是 DOS 时代的 Borland Pascal 人，我唯一能想到的就是直接访问视频内存……或者不是？）*

所以......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:08:41.117

您可能想使用[ncurses](http://www.gnu.org/software/ncurses/)库。[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)也可用于着色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T08:29:58.467

1)

您可以尝试 Color cout ，但这不是可移植的。我试过（ANSI转义码）类似

```
cout << "\033[1;31mbold red text\033[0m\n";

cout << "\33[0;31m" << "Enter Your String here" << "\33[0m" << std::endl ; 
```

您还可以查看 [如何将彩色文本输出到 Linux 终端？](https://stackoverflow.com/questions/2616906/how-do-i-output-coloured-text-to-a-linux-terminal)

2)

您是否正在寻找类似手表或顶级应用程序的东西，它们在同一位置显示输出。

# ios - 从 UIButton 为 UIView 设置动画

> ID：14535056
> 
> 赞同：-1
> 
> 时间：2013-01-26T08:00:24.243
> 
> 标签：ios, animation

我想从设置按钮带来选项视图。选项视图将只有 2 个带有图标的按钮。它应该看起来像条带。

任何人都可以在这方面帮助我...

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-26T08:20:18.690

你甚至用谷歌搜索过这个问题吗？谷歌“动画 UIView”，你会看到很多信息。

如果您需要特定信息，请向我们提供一些源代码，以便我们研究特定问题。

# wordpress - Wordpress + OpenX PHP 调用 = 标头已发送

> ID：14535058
> 
> 赞同：0
> 
> 时间：2013-01-26T08:00:35.923
> 
> 标签：wordpress, header, openx, invocation, zone

我们有一个小型 Wordpress 门户，它使用本地 OpenX 安装来满足其广告需求。WP 主题是使用 OpenX 区域的 PHP 调用代码构建的，这就是问题所在。在调用代码调用的 OpenX 函数中，有一个标头指令，它用 GB 的“标头已发送”消息填充我们的 error_log（输出在 header.php 中开始）。如果有人遇到这个问题并解决了（最好不要用js替换所有区域），请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:28:17.907

问题出在wordpress中，openx安装上没有header.php

# java - 在 Windows 7 上运行 javamail 程序时出错

> ID：14535062
> 
> 赞同：0
> 
> 时间：2013-01-26T08:01:50.217
> 
> 标签：java, jakarta-mail, noclassdeffounderror

我正在尝试运行一个程序来使用 javamail 发送邮件。

它编译成功，但是当我运行它时，它给出了下面提到的错误。

**线程“主”java.lang.NoClassDefFoundError 中的异常：javamail1_4_5/SendEma il（错误名称：SendEmail）**

**问题**

1.  除了在 classpath 中复制 mail.jar 和 activation.jar 之外，运行该程序是否需要任何设置。我已经复制了 C:\Program Files\Java\jdk1.7.0\jre\lib\ext 和 .java 文件中的这两个文件位于 java\jdk1.7.0\bin 文件夹中。

2.执行这个程序是否需要任何服务器？

**这是代码**

```
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public class SendEmail
{
   public static void main(String [] args)
   {    
      // Recipient's email ID needs to be mentioned.
      String to = "abc@gmail.com";

      // Sender's email ID needs to be mentioned
      String from = "xyz@gmail.com";

      // Assuming you are sending email from localhost
      String host = "localhost";

      // Get system properties
      Properties properties = System.getProperties();

      // Setup mail server
      properties.setProperty("mail.smtp.host", host);

      // Get the default Session object.
      Session session = Session.getDefaultInstance(properties);

      try{
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);

         // Set From: header field of the header.
         message.setFrom(new InternetAddress(from));

         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(to));

         // Set Subject: header field
         message.setSubject("This is the Subject Line!");

         // Now set the actual message
         message.setText("This is actual message");

         // Send message
         Transport.send(message);
         System.out.println("Sent message successfully....");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:30:33.160

> java.lang.NoClassDefFoundError：javamail1_4_5/SendEmail（错误名称：SendEmail）

这基本上意味着您已将类文件放在名为的文件夹中`javamail1_4_5`，并且您试图将其作为`java javamail1_4_5.SendEmail`. 此类应具有`package`与文件夹匹配的声明。

```
package javamail1_4_5; 
```

但是，`SendEmail`错误消息中的名称暗示根本没有包。您有 2 个选项：

1.  将该包声明添加到类的顶部（并重新编译）。
2.  `cd`进入`javamail1_4_5`文件夹并通过`java SendEmail`.

* * *

**与具体问题无关**，将与 JRE 本身无关的任意 JAR 文件放在 JRE 中，`/lib`或者`/lib/ext`是一种不好的做法。它完全破坏了便携性。使用`-cp`or`-classpath`参数或将其打包在 JAR 中。如有必要，使用 bat/cmd 文件保存重复的命令。将源/类文件放在 JRE 的安装文件夹中也没有任何意义。您不需要这样做。

# android - 安卓无法打开前置摄像头录制

> ID：14535066
> 
> 赞同：0
> 
> 时间：2013-01-26T08:02:50.037
> 
> 标签：android, android-camera, android-mediaplayer

我正在尝试使用前置摄像头进行录制。我的代码在后置摄像头上运行良好。

问题出在 getFrontCameraId() 和 getCameraInstance()

这是我的代码..

```
public class AndroidVideoCapture extends Activity{

private Camera myCamera;
  private MyCameraSurfaceView myCameraSurfaceView;
  private MediaRecorder mediaRecorder;

Button myButton;
SurfaceHolder surfaceHolder;
boolean recording;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      recording = false;

      setContentView(R.layout.activity_android_video_capture);

      //Get Camera for preview
      myCamera = getCameraInstance();
      if(myCamera == null){
       Toast.makeText(AndroidVideoCapture.this,
         "Fail to get Camera",
         Toast.LENGTH_LONG).show();
      }

      myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
      FrameLayout myCameraPreview = (FrameLayout)findViewById(R.id.videoview);
      myCameraPreview.addView(myCameraSurfaceView);

      myButton = (Button)findViewById(R.id.mybutton);
      myButton.setOnClickListener(myButtonOnClickListener);
  }

  Button.OnClickListener myButtonOnClickListener
  = new Button.OnClickListener(){

@Override
public void onClick(View v) {
 // TODO Auto-generated method stub
 if(recording){
              // stop recording and release camera
              mediaRecorder.stop();  // stop the recording
              releaseMediaRecorder(); // release the MediaRecorder object

              //Exit after saved
              finish();
 }else{

  //Release Camera before MediaRecorder start
  releaseCamera();

        if(!prepareMediaRecorder()){
         Toast.makeText(AndroidVideoCapture.this,
           "Fail in prepareMediaRecorder()!\n - Ended -",
           Toast.LENGTH_LONG).show();
         finish();
        }

  mediaRecorder.start();
  recording = true;
  myButton.setText("STOP");
 }
}};
public int getFrontCameraId() {
    CameraInfo ci = new CameraInfo();
    for (int i = 0 ; i < Camera.getNumberOfCameras(); i++) {
        Camera.getCameraInfo(i, ci);
        if (ci.facing == CameraInfo.CAMERA_FACING_FRONT) return i;
    }

    return -1; // No front-facing camera found
}
  private Camera getCameraInstance(){
// TODO Auto-generated method stub
      Camera c = null;
      try {
          int index = getFrontCameraId();
          if (index == -1)
           c = Camera.open(index);
       //   c = Camera.open(); // attempt to get a Camera instance
      }
      catch (Exception e){
          // Camera is not available (in use or does not exist)
      }
      return c; // returns null if camera is unavailable
}

private boolean prepareMediaRecorder(){
   myCamera = getCameraInstance();
   mediaRecorder = new MediaRecorder();

   myCamera.unlock();
   mediaRecorder.setCamera(myCamera);

   mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
   mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

   mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

   mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
      mediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
      mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M

   mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface());

   try {
       mediaRecorder.prepare();
   } catch (IllegalStateException e) {
       releaseMediaRecorder();
       return false;
   } catch (IOException e) {
       releaseMediaRecorder();
       return false;
   }
   return true;

}

  @Override
  protected void onPause() {
      super.onPause();
      releaseMediaRecorder();       // if you are using MediaRecorder, release it first
      releaseCamera();              // release the camera immediately on pause event
  }

  private void releaseMediaRecorder(){
      if (mediaRecorder != null) {
          mediaRecorder.reset();   // clear recorder configuration
          mediaRecorder.release(); // release the recorder object
          mediaRecorder = null;
          myCamera.lock();           // lock camera for later use
      }
  }

  private void releaseCamera(){
      if (myCamera != null){
          myCamera.release();        // release the camera for other applications
          myCamera = null;
      }
  }

public class MyCameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{

private SurfaceHolder mHolder;
   private Camera mCamera;

public MyCameraSurfaceView(Context context, Camera camera) {
       super(context);
       mCamera = camera;

       // Install a SurfaceHolder.Callback so we get notified when the
       // underlying surface is created and destroyed.
       mHolder = getHolder();
       mHolder.addCallback(this);
       // deprecated setting, but required on Android versions prior to 3.0
       mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
   }

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int weight,
  int height) {
       // If your preview can change or rotate, take care of those events here.
       // Make sure to stop the preview before resizing or reformatting it.

       if (mHolder.getSurface() == null){
         // preview surface does not exist
         return;
       }

       // stop preview before making changes
       try {
           mCamera.stopPreview();
       } catch (Exception e){
         // ignore: tried to stop a non-existent preview
       }

       // make any resize, rotate or reformatting changes here

       // start preview with new settings
       try {
           mCamera.setPreviewDisplay(mHolder);
           mCamera.startPreview();

       } catch (Exception e){
       }
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
 // TODO Auto-generated method stub
 // The Surface has been created, now tell the camera where to draw the preview.
       try {
           mCamera.setPreviewDisplay(holder);
           mCamera.startPreview();
       } catch (IOException e) {
       }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
 // TODO Auto-generated method stub

}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:06:19.267

您的模块中有错误的条件

```
private Camera getCameraInstance() {

// TODO Auto-generated method stub
      Camera c = null;
      try {
          int index = getFrontCameraId();
          if (index == -1)
           c = Camera.open(index);
       //   c = Camera.open(); // attempt to get a Camera instance
      }
      catch (Exception e){
          // Camera is not available (in use or does not exist)
      }
      return c; // returns null if camera is unavailable
} 
```

它应该是

```
private Camera getCameraInstance() {

// TODO Auto-generated method stub
      Camera c = null;
      try {
          int index = getFrontCameraId();
          if (index != -1)
           c = Camera.open(index);

      }
      catch (Exception e){
          // Camera is not available (in use or does not exist)
      }
      return c; // returns null if camera is unavailable
} 
```

# sed - 用 awk 或 sed 减去第一列中的数字

> ID：14535071
> 
> 赞同：0
> 
> 时间：2013-01-26T08:03:43.343
> 
> 标签：sed, awk

我有一个如下所示的文本文件。我想减去第一列中的数字，然后在输入文件中添加一个带有计算值（绝对值）的新列，而不是打印输出。如何使用 awk 或 sed 对多个文件执行此操作？

```
46-104   46   3.95073
46-46    46   1.45997
50-50    50   1.51589
52-100   52   4.16567 
```

期望的输出

```
46-104   46   3.95073   58
46-46    46   1.45997   0
50-50    50   1.51589   0
52-100   52   4.16567   48 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:17:49.173

这是使用的快速方法`awk`：

```
awk '{ split($1,a,"-"); print $0, (a[1]-a[2] >= 0 ? a[1]-a[2] : a[2]-a[1]) | "column -t" }' file 
```

结果：

```
46-104  46  3.95073  58
46-46   46  1.45997  0
50-50   50  1.51589  0
52-100  52  4.16567  48 
```

对于多个文件，假设您当前的工作目录中只有感兴趣的文件：

```
for i in *; do awk '{ split($1,a,"-"); print $0, (a[1]-a[2] >= 0 ? a[1]-a[2] : a[2]-a[1]) | "column -t" }' "$i" > "$i.temp" && mv "$i.temp" "$i"; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:21:14.063

使用 awk：

```
function abs(value)
{
    return (value<0?-value:value);
}

{
    split($1, v, "-")        
    print $0, "\t", abs(v[1]-v[2])
} 
```

[在线演示](http://ideone.com/J0sqgQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T08:37:48.140

这可能对您有用（GNU sed 和 bc）：

```
sed -r 'h;s/(\S+).*/echo \1|bc/e;H;x;s/\n-?/ /' file 
```

*   `h`将该行复制到保留空间 (HS)
*   `s/(\S+).*/echo \1|bc/e`在模式空间中做数学
*   `H`将换行符和答案附加到 HS 中的原始行
*   `x`交换 PS 和 HS
*   `s/\n-?/ /`用空格替换换行符和任何负号

沿着同样的路线使用 awk：

```
 awk '{split($1,a,"-");b=a[1]-a[2];sub(/-/,"",b);print $0,b}' file 
```

# javascript - 如何在 textarea 上设置克拉位置时考虑 Windows 换行符 ( \r\n )？

> ID：14535072
> 
> 赞同：1
> 
> 时间：2013-01-26T08:03:51.830
> 
> 标签：javascript, textarea, newline

我一直在研究一些代码，可以在您在文本区域中键入时修改克拉位置。对于大多数浏览器，换行符是“\n”，但在 IE 8 及以下版本中，换行符是“\r\n”，它的长度是正常换行符的两倍。在设置我的克拉位置时，我该如何解释这种差异？我找到了这个[资源](http://www.sitepoint.com/line-endings-in-javascript/)，但我不确定如何实施它来纠正我的问题。我认为这就像在将“\r\n”剥离为“\n”之后计算换行符的数量一样简单，然后将该数量乘以 2 并将其添加到我的克拉位置，但它不起作用。

小提琴：[http ://bit.ly/TAQxiV](http://bit.ly/TAQxiV)

第 67-116 行用于获取和设置克拉位置和 textarea 内容。

有问题的脚本：http: [//jakiestfu.github.com/Behave.js/](http://jakiestfu.github.com/Behave.js/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:27:56.230

最简单的解决方案可能是测试那些特定版本的 IE ，并在其余时间修改一些变量以适应`2`这种情况。`1`

您可以使用该`BrowserDetect`对象来执行此操作。

```
BrowserDetect.browser // the name of the browser
BrowserDetect.version // the version of the browser 
```

# php - PHP/MySQL：按 ASC 排序艺术家，然后按 ASC 按艺术家排序歌曲？

> ID：14535074
> 
> 赞同：1
> 
> 时间：2013-01-26T08:04:47.897
> 
> 标签：php, mysql, sql, select

我正在开发一个音乐播放器，我想列出所有按艺术家排序的歌曲，这些歌曲来自 AZ (ASC)。信息存储在一个包含*艺术家*、*文件*、*歌曲*等的表格中。

我尝试使用 while 循环首先订购 AZ 的艺术家，然后是艺术家 AZ 的歌曲，但这不起作用。我从未完全理解任何类型的循环，因此将不胜感激！

我使用的查询之一是`SELECT * FROM musicinfo WHERE user='$user' ORDER BY artist ASC`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:13:20.053

所以你需要多重排序吗？只需将其添加到您的`ORDER BY`子句中即可。

```
SELECT * 
FROM   musicinfo 
WHERE  user = '$user' 
ORDER  BY artist ASC, file ASC 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# linux - 是否有可能 Accept 为同一台机器上的不同 tcp 连接返回相同的套接字值

> ID：14535077
> 
> 赞同：1
> 
> 时间：2013-01-26T08:05:24.750
> 
> 标签：linux, sockets

是否有可能accept()（在redhat Enterprise 4/linux kernel 2.6上）为来自同一应用程序和同一台机器的同一进程的不同tcp连接返回相同的套接字值？

我很惊讶，当我检查日志文件时，许多连接在服务器端具有相同的套接字值！这怎么可能？！！

顺便说一句，我正在使用 TCP 阻塞套接字来监听。

```
 main(){
        int fd, clientfd, len, clientlen; 
        sockaddr_in address, clientaddress;

        fd = socket(PF_INET, SOCK_STREAM, 0);
        ....
        memset(&address, 0, sizeof address);

        address.sin_address = AF_INET;
        address.sin_port = htons(port); 
        ....
        bind(fd, &address, sizeof address);
        listen(fd, 100);
        do {
             clientfd = accept(fd, &clientaddress, &clientlen); 

             if (clientfd < 0) {
             ....
             } 

             printf("clientfd = %d", clientfd);  

             switch(fork()){
             case 0:

                    //do something else
                    exit(0);
             default:
                     ...
             }

          } while(1);
    } 
```

我的问题是为什么`printf("clientfd = %d");` 为不同的连接打印相同的数字！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:09:45.463

如果服务器在多个进程中运行（例如 Apache 的 mpm worker 模型），那么每个进程都有自己的文件描述符，从 0 开始编号。

换句话说，不同的进程很可能会获得完全相同的套接字文件描述符编号。但是，fd number 并没有真正的意义。它们仍然引用不同的底层对象和不同的本地 TCP 端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:10:31.660

套接字只是一个数字。它是内核数据结构的挂钩。

顺便说一句，TCP 使用 IP。查找 RFC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T22:40:29.187

那 printf() 根本不打印任何 FD。它缺少一个 FD 参数。您看到的可能是返回地址或堆栈上的任何其他任意垃圾。

# apache - 在开发环境中设置根目录

> ID：14535079
> 
> 赞同：0
> 
> 时间：2013-01-26T08:06:16.283
> 
> 标签：apache, virtualhost

我有一个 linux 服务器，我在上面进行所有的 Web 开发。我找不到虚拟主机的示例。

我需要一种方法来设置虚拟主机（我认为），这样即使我在运行 [http://dev.example.com/blah](http://dev.example.com/blah)我也需要将该 URL 视为不同的站点。

我知道我不能使用子域，因为要访问服务器，我必须浏览子域。

如果您需要任何澄清，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:40:15.410

虚拟主机是使用`<VirtualHost>`apache 配置文件中的一个部分设置的，通常是`httpd.conf`, 。`apache2.conf`看起来像

```
<VirtualHost *:80>
    ServerAdmin webmaster@dev.example.com
    ServerName dev.example.com
    DocumentRoot /var/www
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>
</VirtualHost> 
```

您可以`DocumentRoot`根据自己的方便进行更改。

在少数版本的发行版中，主要琐碎配置文件的不同部分`httpd.conf`被隔离到单独的文件中。

例如，最新 ubuntu 上的 apache2 每个虚拟主机都有单独的文件，位于`/etc/apache2/sites-enabled/`

您可能`000-default`已经在这个设置了默认主机（localhost）的目录中找到了，您可以复制它并开始编辑以定义一个新的虚拟主机。使用上面的代码段，您将配置新主机。关键是设置`DocumentRoot`到不同的目录`dev.example.com`以配置为不同的站点。我假设您的开发机器能够解决设置的内容，`ServerName`否则您可能也想在`/etc/hosts`基于 debian 的 linux 上对其进行配置。

# javascript - 数组随机化时增加维度

> ID：14535082
> 
> 赞同：1
> 
> 时间：2013-01-26T08:06:36.567
> 
> 标签：javascript, arrays, push, slice

阿洛

我正在做我的一个小项目，其中一部分涉及采用已经创建的二维数组并将其随机化。

所以我有一些看起来像这样的东西：

```
foo = [[1,2],[3,4],[5,6],[7,8]];

randomizeFoo = function(){ 
    var randomizedFoo = [];
    newFoo = foo;
    for(i = 0; i < newFoo.length; i++){
        count = Math.random() * newFoo.length;
        randomizedFoo.push(newFoo.slice(count, count + 1));
    }
    return randomizedFoo; 
}; 
```

这确实随机化了数组，但我最终得到了这样的结果：

```
randomizedFoo = [[[7,8]],[[1,2]],[[5,6]],[[3,4]]] 
```

我漂亮的 2D 阵列现在是一个 3D 阵列，其中最低级别的阵列现在在一个额外的级别下进行了毛刺。我意识到这并不是什么大不了的事，我的其余代码只需要补偿，但它让我烦恼有两个原因：

1.  这是额外的复杂性，这从来都不是好事。
2.  我不喜欢我的代码在我不知道原因的情况下做事。

有人对它为什么这样做有任何想法吗？我放了一个二维数组，我想要一个二维数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:13:25.300

您可以从此[答案](https://stackoverflow.com/questions/13208121/javascript-making-an-random-array/13208363#13208363)中获取脚本并使用`map`它：

```
foo = range(0, foo.length-1, true).map(function(i) {
  return foo[i];
}); 
```

**演示： http:** [//jsbin.com/ayepeh/1/edit](http://jsbin.com/ayepeh/1/edit) (ctrl + enter 刷新)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:25:50.253

这是因为您使用的是切片。只需使用 count 作为 foo 的索引。如： randomFoo.push(foo[count]);

确保首先计数一个 int。

# android - 为每个选项卡添加图像或样式

> ID：14535085
> 
> 赞同：0
> 
> 时间：2013-01-26T08:07:04.760
> 
> 标签：android, android-tabhost, android-tabs

我有许多标签的应用程序，我想为每个标签添加图像或样式，请问如何？

```
th = (TabHost) findViewById(R.id.tabhost_template_two_tabs);
th.setup();
// all tab
spec = th.newTabSpec("All");
spec.setIndicator("All");
spec.setContent(R.id.tab_template_two_tabs_all);
th.addTab(spec);
// favorite tab
spec = th.newTabSpec("Favorite");
spec.setIndicator("Favorite");
spec.setContent(R.id.tab_template_two_tabs_favorite);
th.addTab(spec);
th.setCurrentTab(1); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:32:59.483

试试这个：从你的 OnCreate() 方法调用这个：

```
 setTabs(); 
```

然后把这段代码

```
 private void setTabs()
{
    addTab(R.drawable.ic_icon1, Activity.class, "All");
    addTab(R.drawable.ic_icon2, Activity1.class, "Favorite");
}

private void addTab(int drawableId, Class<?> c, String labelId)
{
    final TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab"+ labelId);  

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);

    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);
    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);

} 
```

然后在drawable文件夹中创建tab_indicator.xml并放置此代码。您可以在按下时设置不同的颜色，聚焦等...

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Non focused states -->
<item android:state_focused="false" android:state_selected="false"
    android:state_pressed="false" android:drawable="@drawable/tab_unselected" />
<item android:state_focused="false" android:state_selected="true"
    android:state_pressed="false" android:drawable="@drawable/tab_selected" />

<!-- Focused states -->
<item android:state_focused="true" android:state_selected="false"
    android:state_pressed="false" android:drawable="@drawable/tab_focus" />
<item android:state_focused="true" android:state_selected="true"
    android:state_pressed="false" android:drawable="@drawable/tab_focus" />

<!-- Pressed -->
<item android:state_selected="true" android:state_pressed="true"
    android:drawable="@drawable/tab_focus" />
<item android:state_pressed="true" android:drawable="@drawable/tab_press" />
  </selector> 
```

在布局中创建 tab_indicator.xml 并输入以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="0dip"
android:layout_height="55dip"    
android:layout_weight="1"
android:orientation="vertical"

android:background="@drawable/tab_indicator"
android:padding="5dp">

<ImageView android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:src="@drawable/icon"

/> 

<TextView android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" 
    android:layout_centerHorizontal="true"
    style="?android:attr/tabWidgetStyle"
/>    
     </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:16:59.270

您可以将图像设置为选项卡，如下所示：

> ```
> tabHost.newTabSpec("All").setIndicator(null,res.getDrawable(R.drawable.icon)).setContent(R.id.tab_template_two_tabs_all); 
> ```

或者设置样式试试这个：

> ```
>  tabHost.newTabSpec("All").setIndicator(null,res.getDrawable(R.style.myStyle)).setContent(R.id.tab_template_two_tabs_all); 
> ```

# php - URL GET 参数中的队列空间

> ID：14535087
> 
> 赞同：0
> 
> 时间：2013-01-26T08:07:16.830
> 
> 标签：php, url, get

当我有这样的网址时

`site.com/index.php?name=JON%20%20%20%20%20%20%20SMIT`

我在 index.php 文件中打印`$_GET['name']`变量，结果是`Jon Smit`.

也就是说，JON 和 SMIT 之间的队列空间被替换为一个空间。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:12:43.677

HTML 忽略了多余的空格，所以无论你在名称中输入多少空格，当它在浏览器中输出时，浏览器只会显示一个空格。您需要用`&nbsp;`（不间断空格）替换您的空格，以确保浏览器显示所有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:09:53.863

这应该保留空格：

```
print rawurldecode($_GET['name']); 
```

这将打印多余的空格，但是您的浏览器可能会忽略多余的空格。 [文档](http://uk1.php.net/urldecode)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T08:11:08.210

特殊字符（如空格）在 URL 中的编码方式是如何定义的，另请参阅[Wiki](http://en.wikipedia.org/wiki/Percent-encoding)。[您可以通过urlencode](http://de2.php.net/manual/de/function.urlencode.php)进行 URL 编码，反之则为[urldecode](http://de1.php.net/manual/de/function.urldecode.php)

仅关于 ONE Space：查看页面的来源（即 HTML 代码），在 Firefox 中，例如通过 Ctrl+U，会有更多的空格。但是：浏览器只显示其中之一。如果你想将它们保留在输出中，你可以使用类似的东西

```
echo '<pre>' . $_GET['name'] . '</pre>'; 
```

或者

```
echo str_replace(' ', '&nbsp;', $_GET['name']); 
```

# jquery - 更改textarea jQuery中的文本

> ID：14535090
> 
> 赞同：4
> 
> 时间：2013-01-26T08:07:33.007
> 
> 标签：jquery, textarea

我正在尝试更改 textarea 内的文本`id="code"`但`$("#code").val(newtext)`不起作用..可能是什么问题？如果这很重要，我正在使用 CodeMirror 突出显示里面的文本谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:13:32.537

[textarea](http://www.w3schools.com/tags/tag_textarea.asp)没有 value 属性；因此，最好使用`.text()`函数

```
$("#id").text(newValue); 
```

更新：好吧，我曾经在我的旧项目中遇到过这个问题，但是在更改为 .text() 之后，它就可以工作了（从[这里](https://stackoverflow.com/questions/415602/set-value-of-textarea-in-jquery)得到解决方案）。我知道这`.val`也可以应用，但是如果你遇到这样的麻烦（可能是因为你的浏览器兼容性，jquery 版本......）并且你确定你的选择器代码是正确的，那么选择任何一种方式（val或文字）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:22:36.627

```
encodeURIComponent($("#code").val(newtext)) 
```

# javascript - 如何使用“window.getSelection()”获取 HTML

> ID：14535091
> 
> 赞同：0
> 
> 时间：2013-01-26T08:07:39.153
> 
> 标签：javascript, internet-explorer, google-chrome, w3c

我的代码：

```
<p id="p">
    123<span>abc</span>456
</p>
<script>
    document.getElementById("p").onmouseup=function(){
         if (window.getSelection) {
             //code
         }
         else if (document.selection) {   
             alert(document.selection.createRange().htmlText)  //IE6 7 8
         }
    }
</script> 
```

在“//code”处写什么，我可以在 chrome 或 FF 中获得相同的 htmlText？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:25:54.317

[http://jsfiddle.net/kyP83/](http://jsfiddle.net/kyP83/)

```
document.getElementsByTagName('p')[0].onmouseup = function() {
    if (typeof window.getSelection === 'function') {
        //code
        var selObj = window.getSelection(); 
        alert(selObj);
        var selRange = selObj.getRangeAt(0);             
    } else if (document.selection) {   
        alert(document.selection.createRange().htmlText)  //IE6 7 8
    }
} 
```

# cocos2d-iphone - cocos2dx如何清除CCAnimationCache

> ID：14535092
> 
> 赞同：0
> 
> 时间：2013-01-26T08:07:43.470
> 
> 标签：cocos2d-iphone, cocos2d-x

在 cocos2d-x 中，我将动画缓存在 CCAnimationCache 中。但是我怎样才能清除所有的动画缓存呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:40:03.543

你应该试试

```
CCAnimationCache::sharedAnimationCache()->purgeSharedAnimationCache(); 
```

它释放所有 CCAnimation 对象和共享实例。否则你也可以使用

```
removeAnimationByName("youAnimationName"); 
```

这将删除您想要的特定动画。

希望这对你有帮助.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:15:39.233

在 cocos2d 中，我们使用这些调用...在 cocos2d-x 中找到相同的 api

```
[[CCDirector sharedDirector] purgeCachedData];
[[CCTextureCache sharedTextureCache] removeAllTextures];
[CCTextureCache purgeSharedTextureCache];
[[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];
[CCSpriteFrameCache purgeSharedSpriteFrameCache]; 
```

# c++ - 如何通过野牛动作插入或返回或将对象传递给野牛解析器？

> ID：14535094
> 
> 赞同：1
> 
> 时间：2013-01-26T08:08:29.770
> 
> 标签：c++, bison

我有一个 GUI 程序，它使用 bison 来解析文件（包含 IC 的引脚连接列表）。输入文件就像->

```
3 = NAND2(1, 2)
6 = NAND2(4, 5)
8 = NAND2(9, 10)
11 = NAND2(12, 13) 
```

并且（简化的）语法就像->

```
start : spec { cout << "Parse Complete!"; }
      ;

spec : '{' expr_list '}'
     ;

expr_list : expr_list expr | expr
          ;

expr : INT '=' FUNC '(' args ')' { /*WANT TO INSERT ACTION HERE */ }
     ; 
```

在提到的地方，我想执行一个操作——在我的容器（a `map`）中插入解析的值。bison 生成的文件是`.cpp`，但实际上它是 C 否则。我可以轻松地包含所需的头文件。我也可以简单地调用非成员函数（如`cout`）。

我的问题是-如何在（容器类型的）对象中插入值？我可以在语法文件中创建一个对象，但是如何返回它呢？

其他方法是在 GUI 代码中创建一个对象（容器类型），然后将其传递给解析器。

请告诉任何方法如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:28:51.780

通过返回值优化，我很想按值返回地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:31:01.750

解决办法是`extern`。

我在我的 GUI（我在其中调用解析器）的**.cpp**文件中创建了（全局）对象，例如：

```
QStringList *icNameList; 
```

然后在头文件中（包含在野牛文件中）

```
extern QStringList *icNameList; 
```

最后在野牛文件中，我可以执行以下操作：

```
abc : xyz { icNameList->append(getTokenString()); }
    ; 
```

# dynamic - 将静态库链接到共享库时丢失符号

> ID：14535097
> 
> 赞同：1
> 
> 时间：2013-01-26T08:08:42.350
> 
> 标签：dynamic, shared, symbols, elf

将静态库和 .o 文件链接到共享库时，我遇到了缺少符号的问题。我检查了静态库的符号表，我需要的函数通常在表中列出，如下所示：

```
...
00000000 g     F .text  000000b0 av_int2dbl
...
000000b0 g     F .text  00000060 av_int2flt 
```

但是当我生成共享库时，`av_int2dbl`还有 `av_int2flt`一些其他函数丢失（它们通常都列在静态符号表中），我使用了一种愚蠢的方法来解决这个问题，通过在 .o 文件中创建一个虚拟函数，并引用丢失的函数形式虚拟函数，共享库的DYNAMIC SYMBOL TABLE增加了一些以前漏掉的函数，但奇怪的是`av_int2dbl`还是`av_int2flt`漏掉了。

谁能告诉我，生成共享库时删除符号的原则是什么？

如果`ld`将删除所有未引用的符号，为什么.o 文件中定义的函数（这些函数没有从其他位置引用）仍然存在于共享库中？为什么`av_int2dbl`和`av_int2flt`在虚拟函数中显式调用，而反汇编丢失了这两个函数？

以下是 .o 文件中定义的虚拟函数：

```
int my_dummy_funcs(void)
{   
     av_rdft_init(0x01,0x1);
     av_rdft_calc(NULL, NULL);
     av_rdft_end(NULL);

     av_int2dbl(1);
     av_int2flt(1);

     av_resample(NULL,NULL,NULL,NULL,0,0,0);
     av_resample_close(NULL);
     av_resample_init(0,0,0,0,0,1.0);

     return 0;

} 
```

反汇编虚拟函数如下：

```
0008951c <my_dummy_funcs>:
8951c:  e3a00001    mov r0, #1
89520:  e92d40d0    push    {r4, r6, r7, lr}
89524:  e1a01000    mov r1, r0
89528:  e3a04000    mov r4, #0
8952c:  e24dd010    sub sp, sp, #16
89530:  eb03a21e    bl  171db0 <av_rdft_init>
89534:  e1a01004    mov r1, r4
89538:  e1a00004    mov r0, r4
8953c:  e3a06000    mov r6, #0
89540:  eb03a22f    bl  171e04 <av_rdft_calc>
89544:  e1a00004    mov r0, r4
89548:  eb03a231    bl  171e14 <av_rdft_end>
8954c:  e1a01004    mov r1, r4
89550:  e1a02004    mov r2, r4
89554:  e1a03004    mov r3, r4
89558:  e1a00004    mov r0, r4
8955c:  e58d4000    str r4, [sp]
89560:  e58d4004    str r4, [sp, #4]
89564:  e3a07000    mov r7, #0
89568:  e58d4008    str r4, [sp, #8]
8956c:  eb0e4a62    bl  41befc <av_resample>
89570:  e1a00004    mov r0, r4
89574:  e3437ff0    movt    r7, #16368  ; 0x3ff0
89578:  eb0e4a4a    bl  41bea8 <av_resample_close>
8957c:  e1a00004    mov r0, r4
89580:  e1a01004    mov r1, r4
89584:  e1a02004    mov r2, r4
89588:  e1a03004    mov r3, r4
8958c:  e58d4000    str r4, [sp]
89590:  e1cd60f8    strd    r6, [sp, #8]
89594:  eb0e495f    bl  41bb18 <av_resample_init>
89598:  e1a00004    mov r0, r4
8959c:  e28dd010    add sp, sp, #16
895a0:  e8bd80d0    pop {r4, r6, r7, pc} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:59:09.170

> 但是当我生成共享库时，av_int2dbl 和 av_int2flt 以及其他一些函数丢失了

最可能的原因：它们被标记为`HIDDEN`在常规符号表中，*这*告诉链接器不要将它们导出到动态符号表中。

您可以通过运行来验证这个假设

```
readelf -s libfoo.a | grep av_int2dbl 
```

（并学习使用`readelf`而不是`objdump`在 ELF 平台上使用）。

# javascript - 如何在文档就绪时隐藏滑动 div

> ID：14535100
> 
> 赞同：0
> 
> 时间：2013-01-26T08:09:18.183
> 
> 标签：javascript, jquery

`.nav`我试图通过单击另一个 div ( ) 来上下滑动div ( `#toggleMenu`)

现在我的问题是当我运行页面时 ( `.nav`) div 弹出得非常快。我用 `$(".nav").hide();`来隐藏 div，但这是在`.nav`非常快速地加载 ( ) 之后发生的。

这是我的代码

```
$(document).ready(function() {
    $(".nav").hide(); 
    $("#toggleMenu").click(function () {
        $('.nav').slideToggle();
    });
}); 
```

CSS样式如下：

```
.nav {
    border: 0px solid #ccc;
    border-width: 0px 0;
    list-style: none;
    margin: 0;
    padding: 0;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:17:22.383

如果我理解正确，该`.nav`元素会在页面加载时隐藏之前闪烁。

您可以将 display:none 添加到规则中，并比 JavaScript 更快地`.nav`跳过CSS 加载。`$(".nav").hide();`

请记住，如果有人禁用了 JavaScript，它不会优雅地回退。

另一种选择是`slideUp()`在文档就绪时使用平滑动画，例如 。这样，您的页面在加载时不会看起来很奇怪。

# javascript - 用淘汰赛绑定锯齿状阵列

> ID：14535102
> 
> 赞同：1
> 
> 时间：2013-01-26T08:09:28.887
> 
> 标签：javascript, knockout.js, jagged-arrays

我在 knout-js 中绑定锯齿状数组时遇到问题。我搜索了很多，但找不到任何东西。举个简单的例子，

```
<div data-bind="foreach: items">
<div  data-bind="style: { textAlign: align, backgroundColor:  bgColor, fontFamily: fontFamily, fontSize: size, color: color }, text: title"></div>
</div> 
```

这是我的数组，

```
var items = [{
                    title: 'A',
                    align: 'right',
                    fontFamily: 'helvetica',
                    color: '#777777',
                    bgColor: '#ffffff'
            }, 
            {
                    title: 'A',
                    align: 'right',
                    size: 'large',
                    fontFamily: 'helvetica'
            }
            {
                    size: 'large',
                    fontFamily: 'helvetica',
                    color: '#777777'
            }] 
```

显然有时某些财产丢失了？所以我得到*** is not defined* 错误。如何处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:16:08.430

你有两个选择。您可以确保您的 ViewModel 没有锯齿状。这可以通过对您的模型使用淘汰映射插件并让它使用您类型的构造函数来很好地完成。这样你甚至可以定义默认值

另一种选择是引用 $data 上下文中的值。IE：

```
<div  data-bind="style: { textAlign: $data.align, backgroundColor:  $data.bgColor, fontFamily: $data.fontFamily, fontSize: $data.size, color: $data.color }, text: $data.title"></div> 
```

小提琴：http: [//jsfiddle.net/drdamour/Xp9Er/](http://jsfiddle.net/drdamour/Xp9Er/)

# sql - 在 SQL Server 中删除第二行或相同的数字

> ID：14535110
> 
> 赞同：3
> 
> 时间：2013-01-26T08:11:39.690
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在使用 SQL Server。我使用了这段代码：

```
 select distinct A.CustomerNo, A.INV_Nr, B.Code, A.Price 
 from INVOICE A.
      INVOICE_LINE B
 where
      A.IVC_Nr = B.IVC_Nr 
```

输出是这样的：

```
| CustomerNo   |    INV_Nr   |   Code   | Price |
=================================================
| 1100021      |    500897   |   1404   | 2500  |
| 1100021      |    500897   |   1403   | 2500  |
| 1100022      |    500898   |   1405   | 3500  |
| 1100023      |    500899   |   1405   | 3000  |
| 1100023      |    500899   |   1403   | 3000  | 
```

如何删除第二行并仅获取相同数字的第一行，应该是这样的：

```
| CustomerNo   |    INV_Nr   |   Code   | Price |
=================================================
| 1100021      |    500897   |   1404   | 2500  |
| 1100022      |    500898   |   1405   | 3500  |
| 1100023      |    500899   |   1405   | 3000  | 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T08:16:00.237

由于问题是用 标记`SQL Server 2005+`，因此您可以使用`Common Table Expression`and `Window Function`。

```
WITH recordsList
AS
(
    SELECT  A.CustomerNo, A.INV_Nr, B.Code, A.Price ,
            ROW_NUMBER() OVER (PARTITION BY A.CustomerNo
                                ORDER BY B.Code DESC) rn
    FROM    INVOICE A
            INNER JOIN INVOICE_LINE B
                ON A.IVC_Nr = B.IVC_Nr
)
SELECT  CustomerNo, INV_Nr, Code, Price
FROM    recordsList
WHERE   rn = 1 
```

*   [SQLFiddle Demo（*略有改动*）](http://www.sqlfiddle.com/#!3/e1f28/1)

# ios - 使用 touch 方法将 UIButton 从一个视图拖到另一个视图

> ID：14535118
> 
> 赞同：1
> 
> 时间：2013-01-26T08:12:53.830
> 
> 标签：ios, ios6, uiview, drag-and-drop, uibutton

大家好，

我第一次使用“触摸方法”所以面临某些问题。在我的应用程序中，mainview 中有 2 个子视图。我正在尝试将 uibutton 从一个视图拖放到另一个视图。我正在尝试很多事情，但无法进行拖放。

请帮我。

提前致谢。

```
My Code :

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
        CGPoint touchPoint = [[touches anyObject] locationInView:self.viewblue];
        for (UIButton *iView in self.view.subviews) {
            if ([iView isMemberOfClass:[UIButton class]])
            {
                if (touchPoint.x > iView.frame.origin.x &&
                    touchPoint.x < iView.frame.origin.x + iView.frame.size.width &&
                    touchPoint.y > iView.frame.origin.y &&
                    touchPoint.y < iView.frame.origin.y + iView.frame.size.height)
                {
                    self.btnalpha = iView;
                    touchOffset = CGPointMake(touchPoint.x - iView.frame.origin.x,
                                                   touchPoint.y - iView.frame.origin.y);

                    homePosition = CGPointMake(iView.frame.origin.x,
                                                    iView.frame.origin.y);

                    [self.viewblue bringSubviewToFront:self.btnalpha];
                }
            }
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [[touches anyObject] locationInView:self.viewblue];

    CGRect newDragObjectFrame = CGRectMake(touchPoint.x - touchOffset.x,
                                           touchPoint.y - touchOffset.y,
                                           self.btnalpha.frame.size.width,
                                           self.btnalpha.frame.size.height);
    self.btnalpha.frame = newDragObjectFrame;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [[touches anyObject] locationInView:self.viewblue];

    if (touchPoint.x > self.vieworange.frame.origin.x &&
        touchPoint.x < self.vieworange.frame.origin.x + self.vieworange.frame.size.width &&
        touchPoint.y > self.vieworange.frame.origin.y &&
        touchPoint.y < self.vieworange.frame.origin.y + self.vieworange.frame.size.height )
    self.btnalpha.frame = CGRectMake(self.homePosition.x, self.homePosition.y, self.btnalpha.frame.size.width, self.btnalpha.frame.size.height);
}

- (void) drag
{
    str_scramble =@"IH";

    for (int i = 0; i < 2; i++)
    {
        self.btnalpha = [[UIButton alloc] init];
        [self.btnalpha setFrame:CGRectMake(i * 50 + 10, 5, 42, 42)];
        char letter = [str_scramble characterAtIndex:i];
        self.btnalpha.backgroundColor = [UIColor grayColor];
        self.btnalpha.titleLabel.font = [UIFont boldSystemFontOfSize:20];
        [self.btnalpha setTitle:[NSString stringWithFormat:@"%c", letter] forState:UIControlStateNormal];
        [self.btnalpha addTarget:self action:@selector(touchesBegan:withEvent:) forControlEvents:UIControlEventTouchDown];
        [self.btnalpha addTarget:self action:@selector(touchesMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside];
        [viewblue addSubview:self.btnalpha];
        NSLog(@"string : --> %@", self.btnalpha.titleLabel.text);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:20:46.100

您应该使用 touchDrag 方法，如 touchDragEnter、touchDragExit、touchDragInside 或 touchDragOutside 来拖动 UIButton。

这些所有事件都是 UIControlEvents

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T11:33:49.423

根据关于事件处理指南的苹果文档，
当你第一次触摸按钮时，它会变成第一响应者。所以，你的 ViewController 中的 touchesBegan:withEvent 不会被调用。

禁用 UIbutton 的 userInteraction，现在 viewcontroller 将成为第一响应者并开始接收触摸事件。
button.userInteractionEnabled=否；

即使您将手势添加到 ViewController 或任何这些视图，当您触摸按钮时，它们也不会响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T15:51:08.677

我正在使用 PanGestureRecognizer，效果很好。

```
UIPanGestureRecognizer *drag = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(dragButton:)];
            drag.delegate = self;
            drag.view.tag = position;
            [button addGestureRecognizer:drag];

- (void)dragButton:(UIPanGestureRecognizer *)gesture
{
    buttonPicked = [allObjects objectAtIndex:gesture.view.tag -1];
    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalPoint = buttonPicked.center;
    }
    else
    {
        buttonPicked.center = [gesture locationInView:self.view];
    }
} 
```

*   如果您想对结束手势进行某种特殊处理（例如仅在某个位置下降） - 您可以使用 UIGestureRecognizedStateEnd。

*   如果它仍然不起作用 - 在 UIGestureRecognizerStateBegan 中，尝试从子视图中删除按钮并将其添加到主视图中，并在 UIGestureRecognizerStateEnd 检查按钮在哪个子视图中并添加它而不是主视图。应该做的伎俩。

祝你好运。

# c# - 主窗口文本框从其他文件中的类访问

> ID：14535119
> 
> 赞同：0
> 
> 时间：2013-01-26T08:13:18.097
> 
> 标签：c#, .net, wpf

所以我有一个主窗口，里面有很多其他的窗口实例

```
MainWindow
{
    Window1 win1= new Window1();
    Window2 win2 = new Window2();
    // ....... and so on 

    private keydownevent(  ,key e)
    {  
        if(e.keu==key.return)
        {
            //some logic here
            if(some condition)
            {
                win1.show();
            }
            else if(some condition)
           {
                win2.show()
           }
           // ....
        }
    }
}
// and in window1 lets say 
Window1
{
    foo_class fcl = new foo_class();
    click_button()
    {
        // do some logic
        fc1.function in class;
    }
 } 
```

现在文本框内容是一个条形码，我想在显示 window1 并完成窗口 1 中的 click_button 时清除 MainWindow 中的文本框

////////// 我试过了

```
 MainWindow win= (MainWindow)Application.Current.MainWindow;
             win.txtBlock1.Text = ""; 
```

放入 foo_class 和 button_click 但它抛出错误 window1 can't be cast to mainwindow

我也试过

创建一个构造函数，该构造函数将 keydown 函数中的参数作为文本框作为 window(texbox) 但这将每次创建一个新实例，但我只想在实例化 mainwindow 时创建实例并继续使用该 window1 实例

请建议一些在主窗口中清除文本框的方法？我应该把那个方法放在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:28:30.350

创建`Window`s 时，您可以将 设置`Owner`为`this`。IE：

```
public class MainWindow
{
    Window1 win1 = new Window1();
    Window2 win2 = new Window2();

    ...

    //in code, before call Show() on win1 or win2
    //set win1/win2.Owner = this;
} 
```

然后，当您需要清除父级时，您只需调用即可获得对父级的引用`((MainWindow)this.Owner).txtBlock1.Text = "";`。

这一切都假设`Window1`and`Window2`实际上是 的子类`Window`，或者您实际上打算将`win1`and声明`win2`为 Window。

编辑：

`MainWindow`如评论中所述，另一种方法是通过新的构造函数提供对构造函数的实例的引用，`win1`并且`win2`如果它们是 window 的子类。

我还建议您在`MainWindow`调用时创建一个新方法，`ClearText`这样您就不必公开文本框名称。

# groovy - 带有多个计数器的 Groovy for 循环？

> ID：14535123
> 
> 赞同：0
> 
> 时间：2013-01-26T08:14:22.123
> 
> 标签：groovy

在 groovy 中进行以下工作 -

```
for(def i=0;i<10;i++)
    print i 
```

但这在 Java 中有效，C++ 在 groovy 中不起作用 -

```
for(def i=0,j=0;i<10;i++,j++)
    print i + ' ' + j 
```

为什么？如何使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:59:13.333

它不会工作，因为 Groovy 不接受[for 循环](http://groovy.codehaus.org/Looping)中的多个表达式。尝试这个：

```
[0..10,0..10].transpose().each{ i, j ->
    println i + ' ' + j
} 
```

达到同样的效果。

更新以使其更通用。此更新相当于用`i++`,递增`j+=3`。

```
(0..<10).collect{[it, it+3]}.each{ i, j ->
    println i + ' ' + j
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:59:08.670

你有没有试过这个：

```
for( def ( int i, int j ) = [ 0, 0 ]; i < 10; i++, j++ ) 
```

如果这不起作用，则可能由于最后一部分而失败。

C++ 有一个显式的逗号运算符，这就是它允许这样的构造的方式。

Java 没有逗号运算符，但大概允许这样的构造作为对 for 循环的破解。

如果 Groovy 不允许这样做，很可能是因为它不允许这种 hack。

# c - 使用更改参数执行 C 应用程序的 Bash 脚本

> ID：14535124
> 
> 赞同：2
> 
> 时间：2013-01-26T08:14:38.050
> 
> 标签：c, bash

我有一个名为 Test 的 C 应用程序。测试采用单个 int 参数。我想用许多不同的参数运行测试，所以我制作了以下 bash 脚本：

```
#!/bin/bash
for i in {0..5}
do
    ./Test "$i" 
done 
```

但是，这会执行`./Test "$i"`而不是`./Test 0, ./Test 1`等。将其更改为`./Test $i`仅执行`./Test $i`5 次。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:16:40.943

```
for i in {0..5}
do
    ./Test " $i" 
done 
```

或者

```
for i in {1..5}; do exec "./Test $i" ; done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:24:29.860

尝试

```
#!/bin/bash
for i in `seq 0 5`
do
    ./Test $i 
done 
```

要在 bash 中创建序列，您可以使用`seq`，它的优点是可以在任何与 bourne 兼容的 shell 中工作（也就是说，它可以在任何*地方*`seq`工作，因为它是一个外部程序，它是循环变得更便携）。*`for`*

 *是的，它在`./Test`调用方面没有区别，但它提供了一个在修复之前拖延的*尊重*`./Test`理由。*

# tfs - 在 Team Foundation Server 2012 更新 1 中更改一周的第一天

> ID：14535127
> 
> 赞同：4
> 
> 时间：2013-01-26T08:15:43.510
> 
> 标签：tfs, settings, administration

我想在**TFS 2012 update 1中更改一周的第一天并在****迭代**设置中使用它，但我找不到任何地方可以这样做。有什么地方可以改变吗？

**我更改了区域和语言**中的第一天，但​​它不影响 TFS 日期选择器。而且我想改变周末，因为我们在我们的国家使用不同的日历。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T05:58:14.523

如果我理解您的问题，您想更改休息日，因此您需要自定义流程模板，在通用流程配置设置中您可以更改周末天数。

请参阅此链接：

[如何更改默认休息日](http://social.msdn.microsoft.com/Forums/en-US/TFSvnext/thread/e301237d-4ab5-4c3e-8925-c93a18c5214a)

**更新于 2013 年 6 月 31 日**

* * *

只需在浏览器设置中添加第一种语言是阿拉伯语，它会起作用，但当然日历将是阿拉伯语，请参见图片：

![在此处输入图像描述](../Images/c9cfed3d175e689be8314ae80805dbbc.png)

# cocos2d-iphone - cocos2d-iphone：init 方法无法正常工作

> ID：14535129
> 
> 赞同：1
> 
> 时间：2013-01-26T08:15:57.733
> 
> 标签：cocos2d-iphone

我正在学习 Strougo/Wenderlich 教程（太空海盗项目）。我在第 4 章遇到了麻烦。

**在 RadarDish.m 中：**

```
 -(void)initAnimations
        {
          [self setTransmittingAnim: [self loadPlistForAnimationWithName:@"transmittingAnim" andClassName:NSStringFromClass([self class])]];
        }

     -(void)changeState:(CharacterStates)newState {
          [self stopAllActions];
          id action = nil;
          [self setCharacterState:newState];
          switch (newState) {
          .
          .
          case kStateIdle:
          action = [CCAnimate actionWithAnimation:transmittingAnim
                               restoreOriginalFrame:NO];
          break;             }
          if (action != nil) {
          [self runAction:action];
                             }
}
 -(id)init
    {
    self=[super init];
     if  (self!=nil) {
    .
    .
    [self initAnimations];
    .
    .
    }
  return self;
    } 
```

与教程中的代码完全相同。失败：
`*** Assertion failure in -[CCAnimate initWithAnimation:], /Users/macowner/Documents/examples/SpaceViking/SpaceViking/libs/cocos2d/CCActionInterval.`

使用带断点的调试器，我注意到传输动画的值 = nil。

所以，如果我把线与

```
[self setTransmittingAnim: 
[self loadPlistForAnimationWithName:@"transmittingAnim" andClassName:NSStringFromClass([self class])]]; 
```

在这种情况下， `-(void)changeState`动画可以正常工作。

为什么`[self initAnimations]`from`(id)init`不被调用？我使用 cocos2d v.2 模板。
非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:24:45.237

我遇到了问题，因为我一直在使用 cocos 2d v.2.0 构建项目，而教程是基于 cocos 2d 模板 v.1.xx 如果你要按照“学习 Cocos2D”这本书，我强烈建议你加载 cocos2d-iphone 1.0.1 版。这里是链接[下载 cocos2d 1.xx 分支](http://www.cocos2d-iphone.org/download "下载 cocos 2d")

如果你还想使用最新的 cocos2d 模板，我可以给你一些建议：

*   按照此链接[cocos2d v2.0 迁移指南中的说明进行操作](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3amigrate_to_v2.0)
*   您将有很多弃用和更改需要修复，因此请使用[此链接](https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/cocos2d/cocos2d/ccDeprecated.m) 了解如何修复这些弃用和更改。

    现在就我在这里提到的问题的解决方案说几句话。在每个 GameObjects、EnemyObjects 和 PowerUps 中，我添加了一个方法来覆盖`initWithFrameName`.

    ```
     -(id) initWithSpriteFrameName:(NSString*)frameName{
        if ((self=[super init])) {
            if ((self = [super initWithSpriteFrameName:frameName])) {

                CCLOG(@"### RadarDish initialized");
                [self initAnimations];                                   // 1
                characterHealth = 100.0f;                                // 2
                gameObjectType = kEnemyTypeRadarDish;                    // 3
                [self changeState:kStateSpawning];                       // 4

            }  
        }  
    return self;  
        } 
    ```

        这允许 GameObject 和 GameCharacter init 方法在 CCSprite 的`initWithSpriteFrameName`方法运行之前运行。
             Viking GameObject 必须有一个稍微不同的解决方案，因为它是用`initWithSpriteFrame`而不是`initWithSpriteFrameName`. 但是，覆盖实现与上面RadarDish的示例基本相同。

# javascript - 如何使用 onload 命令在框架上加载任何网站

> ID：14535139
> 
> 赞同：0
> 
> 时间：2013-01-26T08:17:24.540
> 
> 标签：javascript, url, frames

我只想用 4 个框架在一页中打开 4 个页面。但不知道如何。

我想在同一页面上看到 facebook、youtube、ebay 和 amazon。

我使用 onload 事件并尝试在 JS 中查找代码以转到页面 url，但我一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:27:45.017

不需要 JavaScript，只需设置标签的`src`属性即可。`<iframe>`

您应该知道，尽管许多网站都会摆脱这些框架。我怀疑 Facebook 肯定会。

# php - PDO order by throws 错误

> ID：14535140
> 
> 赞同：1
> 
> 时间：2013-01-26T08:17:27.697
> 
> 标签：php, pdo

我很困惑。

**这是有效的：**

```
$sql = 'SELECT * FROM TABLE ORDER BY DATEOFUPLOAD DESC'; 
$stmt = $conn->prepare($sql); 
$stmt->execute(); 
```

**这不是：**

```
$sql = 'SELECT * FROM TABLE ORDER BY DATEOFUPLOAD :orderbydateofupload'; 
$stmt = $conn->prepare($sql); 
$stmt->bindValue(':orderbydateofupload', $orderbydateofupload, PDO::PARAM_STR);  
$stmt->execute(); 
```

我已经检查并设置`$orderbydateofupload`了`$orderbydateofupload='DESC'`，所以它绝对不是空的。

最后一行 ( `$stmt->execute()`) 出现错误：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''DESC'' at line 1' in /home/gh6534/public_html/query.php:77 Stack trace: #0 /home/gh6534/public_html/query.php(77): PDOStatement->execute() #1 {main} thrown in /home/gh6534/public_html/query.php on line 77 
```

我还尝试使用该列作为参数：

```
$sort = 'DATEOFUPLOAD';
$sql = 'SELECT * FROM TABLE ORDER BY :sort :orderbydateofupload'; 
$stmt = $conn->prepare($sql); 
$stmt->bindParam(':sort', $sort);
$stmt->bindParam(':orderbydateofupload', $orderbydateofupload);
$stmt->execute(); 
```

这不会引发异常，但会在没有任何排序的情况下查询所有项目。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:25:52.770

试试这个

```
$orderbydateofupload = 'ASC';  //Or DESC

if($orderbydateofupload == 'DESC')
    $sql = 'SELECT * FROM TABLE ORDER BY DATEOFUPLOAD DESC'; 
else
    $sql = 'SELECT * FROM TABLE' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:31:01.220

您不能将标识符与 PDO 绑定，因为**准备好的语句只能与 data 一起使用**，而不能与标识符或语法关键字一起使用。
因此，您必须使用*whitelisting*，如[我之前发布的示例所示](https://stackoverflow.com/a/8255054/285587)

这就是为什么在我自己的类中我使用标识符占位符，它将整个代码变成一行（当您只需要按字段设置顺序时）：

```
$data = $db->getAll('SELECT * FROM TABLE ORDER BY ?n',$sort); 
```

但是使用关键字白名单是唯一的选择：

```
$order = $db->whiteList($_GET['order'],array('ASC','DESC'),'ASC');
$data  = $db->getAll("SELECT * FROM table ORDER BY ?n ?p", $sort, $order); 
```

# javascript - 页面加载时未调用fancybox

> ID：14535143
> 
> 赞同：0
> 
> 时间：2013-01-26T08:18:07.090
> 
> 标签：javascript, jquery, fancybox

我正在尝试在页面 laod 上的 asp.net mvc 视图中使用 Fancybox，并在[http://fancybox.net/blog上使用此示例 6](http://fancybox.net/blog)

我的html是：

```
<head>
    <title>Home Page</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
</head>
<body>
    <div class="page">

        <div id="main">
            <link rel="stylesheet" type="text/css" href="../../Content/FancyBox/jquery.fancybox.css" />
<script type="text/javascript" src="../../Content/FancyBox/jquery.fancybox.js"></script>
<script>
    $(document).ready(function () {
        $("#dialog-user-login").trigger('click');       
    });
</script>

<div id="dialog-user-login">
    I am here
</div>

        </div>

    </div>
</body> 
```

但是页面加载时不调用fancybox。我的代码中是否缺少任何内容？

[**已编辑**]

尝试了这个，但也没有奏效：

```
$(document).ready(function () {
    $("#dialog-user-login").fancybox({
        'showCloseButton'   : false,
        'titlePosition'         : 'inside',
        'titleFormat'       : formatTitle
    });
$("#dialog-user-login").trigger('click'); 
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T15:02:36.010

有点晚了，但我希望这能回答任何类似的问题：

```
$(function() {
    $.fancybox.open([{
        //o $("#myDiv").html() aunque este ultimo muestra los datos en bruto 
        content: $("#myDiv").text()
    }]);                
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:24:32.513

使用 jquery 插件时，你应该在你想要的元素上调用它..

这是你如何为花哨的盒子做的

```
$(document).ready(function () {
    $("#dialog-user-login").fancybox({
        'showCloseButton'   : false,
        'titlePosition'         : 'inside',
        'titleFormat'       : formatTitle
    });
$("#dialog-user-login").trigger('click'); 
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:58:20.253

尽管我想将此作为评论发布...

无论如何，对于 DotnetSparrow，我最近自己创建了一个站点并实现了 fancybox，它运行良好。

在前。5 & 6，我在我的页面上试过了，效果也很好。

正如其他人所评论的那样，您的 html 缺少很多，您基于它的博客是片段，而不是整套指令......

请遵循以下内容：

1.首先按照本说明的第一段：**http** [:](http://fancyapps.com/fancybox/#instructions) //fancyapps.com/fancybox/#instructions

2.在HTML中

```
<a id="urLink" title="Login" href="#dialog-user-login">Login Here</a>  
<div id="dialog-user-login" style="display:none">
    I am here
</div> 
```

3.在javascript中

```
<script type="text/javascript">
$(document).ready(function() {
    //attach fancybox on ur <a> tag
    $("#urLink").fancybox({
        'scrolling' : 'no',
        'titleShow' : false,
        'onClosed'  : function() { $("#login_error").hide(); }
    });

    //if you want to show the login in fancybox on load
    $("#urLink").trigger('click');
});
</script> 
```

# java - 正方体识别修复？

> ID：14535145
> 
> 赞同：0
> 
> 时间：2013-01-26T08:18:25.753
> 
> 标签：java, android, ocr, tesseract

我已经能够将我的代码导出到应用程序中，并使用本[教程](http://gaut.am/making-an-ocr-android-app-using-tesseract/) 中的 Tess-Two 文件将 tesseract 集成到其中。但是现在我遇到了问题；当图片被发送到 tesseract 时，它每次只返回相同的随机字符：`'f' wig, W fin. A. " 5' ' ,{ >>zv' ' ~" > ';>'`. 似乎是什么问题？

```
ImageView iv;
TextView tv;
protected Bitmap _image; 
protected Bitmap bmp; 
public static String The_path = "/mnt/sdcard/DCIM/100MEDIA/TESS.jpg";
public static String lang = "eng";
public static final String DATA_PATH = Environment.getExternalStorageDirectory().toString() + "/SimpleAndroidOCR/";
private int pageSegmentationMode = TessBaseAPI.PageSegMode.PSM_AUTO;

@Override
public void onCreate(Bundle savedInstanceState) {
    try {

        AssetManager assetManager = getAssets();
        InputStream in = assetManager.open("tessdata/eng.traineddata");
        //GZIPInputStream gin = new GZIPInputStream(in);
        OutputStream out = new FileOutputStream(DATA_PATH + "tessdata/eng.traineddata");

        //Transfer bytes from in to out
        byte[] buf = new byte[1024];
        int len;
        //while ((len = gin.read(buf)) > 0) {
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        //gin.close();
        out.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    };  
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    iv = (ImageView) findViewById(R.id.imageView1);
    tv = (TextView) findViewById(R.id.textView1);

    Button but = (Button) findViewById(R.id.button1);
    Button but2 = (Button) findViewById(R.id.button2);
    but.setOnClickListener(new OnClickListener() {
        public void onClick(View v){
            //File file = new File( _path );
            //Uri outputFileUri = Uri.fromFile( file );

            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            //intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );
            startActivityForResult(intent, 0);
        }
    });

    but2.setOnClickListener(new OnClickListener() {
        public void onClick(View v){
            TessBaseAPI baseApi = new TessBaseAPI();
            baseApi.setDebug(true);
            baseApi.setPageSegMode(pageSegmentationMode);
            baseApi.init(DATA_PATH, lang); 
            // DATA_PATH = Path to the storage
            // lang for which the language data exists, usually "eng"
             try {     
                  baseApi.setImage(ReadFile.readBitmap(bmp));
                  String recognizedText = baseApi.getUTF8Text();
                  txt(recognizedText);

             } catch(RuntimeException e) {

             }
             baseApi.end();

        }

        private void txt(String txt) {
            // TODO Auto-generated method stub
            tv.setText(txt);
        }
    });
}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    super.onActivityResult(requestCode, resultCode, data);
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPreferredConfig = Bitmap.Config.ARGB_8888;
    options.inSampleSize = 4;

    Bitmap bitmap = BitmapFactory.decodeFile(The_path, options);
    try {
        ExifInterface exif = new ExifInterface(The_path);
        int exifOrientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);

        int rotate = 0;

        switch (exifOrientation) {
        case ExifInterface.ORIENTATION_ROTATE_90:
            rotate = 90;
            break;
        case ExifInterface.ORIENTATION_ROTATE_180:
            rotate = 180;
            break;
        case ExifInterface.ORIENTATION_ROTATE_270:
            rotate = 270;
            break;
        }

        if (rotate != 0) {

            // Getting width & height of the given image.
            int w = bitmap.getWidth();
            int h = bitmap.getHeight();

            // Setting pre rotate
            Matrix mtx = new Matrix();
            mtx.preRotate(rotate);

            // Rotating Bitmap
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, false);
        }
    bitmap = toGrayscale(bitmap);
    bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
    } catch (IOException e) {

    }
    _image = (Bitmap) data.getExtras().get("data");
    iv.setImageBitmap(_image);
    bmp = bitmap;

}  public static Bitmap toGrayscale(Bitmap bmpOriginal){        
    int width, height;
    height = bmpOriginal.getHeight();
    width = bmpOriginal.getWidth();    

    Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
    Canvas c = new Canvas(bmpGrayscale);
    Paint paint = new Paint();
    ColorMatrix cm = new ColorMatrix();
    cm.setSaturation(0);
    ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
    paint.setColorFilter(f);
    c.drawBitmap(bmpOriginal, 0, 0, paint);
    return bmpGrayscale;
} 
```

这是添加灰度函数后的新日志猫：（接收一组新的重复出现的随机字符）

```
 01-26 10:21:36.973: D/libEGL(1389): loaded /system/lib/egl/libEGL_adreno200.so
            01-26 10:21:36.973: D/libEGL(1389): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
            01-26 10:21:36.973: D/libEGL(1389): loaded /system/lib/egl/libGLESv2_adreno200.so
            01-26 10:21:36.983: I/Adreno200-EGL(1389): <eglInitialize:269>: EGL 1.4 QUALCOMM build: Nondeterministic AU_full_mako_PARTNER-ANDROID/JB-MR1-                DEV_CL2946718_release_AU (CL2946718)
            01-26 10:21:36.983: I/Adreno200-EGL(1389): Build Date: 11/04/12 Sun
            01-26 10:21:36.983: I/Adreno200-EGL(1389): Local Branch: 
            01-26 10:21:36.983: I/Adreno200-EGL(1389): Remote Branch: m/partner-android/jb-mr1-dev
            01-26 10:21:36.983: I/Adreno200-EGL(1389): Local Patches: NONE
            01-26 10:21:36.983: I/Adreno200-EGL(1389): Reconstruct Branch: NOTHING
            01-26 10:21:37.043: D/OpenGLRenderer(1389): Enabling debug mode 0
            01-26 10:21:45.502: E/BitmapFactory(1389): Unable to decode stream: java.io.FileNotFoundException: /mnt/sdcard/DCIM/100MEDIA/TESS.jpg: open failed: ENOENT (No such file or directory)
            01-26 10:21:45.502: E/JHEAD(1389): can't open '/mnt/sdcard/DCIM/100MEDIA/TESS.jpg'
            01-26 10:21:45.512: D/AndroidRuntime(1389): Shutting down VM
            01-26 10:21:45.512: W/dalvikvm(1389): threadid=1: thread exiting with uncaught exception (group=0x417b0930)
            01-26 10:21:45.522: E/AndroidRuntime(1389): FATAL EXCEPTION: main
            01-26 10:21:45.522: E/AndroidRuntime(1389): java.lang.RuntimeException:                 Failure delivering result ResultInfo{who=null, request=0, result=-1, data=Intent { act=inline-data (has extras) }} to activity {com.cam.calc/cam.calc.Main}: java.lang.NullPointerException
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3319)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3362)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.app.ActivityThread.access$1100(ActivityThread.java:141)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1282)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.os.Handler.dispatchMessage(Handler.java:99)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.os.Looper.loop(Looper.java:137)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.app.ActivityThread.main(ActivityThread.java:5039)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at java.lang.reflect.Method.invokeNative(Native Method)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at java.lang.reflect.Method.invoke(Method.java:511)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at dalvik.system.NativeStart.main(Native Method)
            01-26 10:21:45.522: E/AndroidRuntime(1389): Caused by: java.lang.NullPointerException
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at cam.calc.Main.onActivityResult(Main.java:388)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at android.app.Activity.dispatchActivityResult(Activity.java:5293)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     at     android.app.ActivityThread.deliverResults(ActivityThread.java:3315)
            01-26 10:21:45.522: E/AndroidRuntime(1389):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:37:16.817

您需要在 OCR 之前处理图像，至少将图像转换为黑白（灰度）可以增强结果：

```
bitmap = toGrayscale(bitmap);
bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true); 
```

您可以使用 OpenCV 或任何图像处理库，对于像灰度这样的简单任务，它的使用范围很广

```
import android.graphics.*;

public static Bitmap toGrayscale(Bitmap bmpOriginal)
    {        
        int width, height;
        height = bmpOriginal.getHeight();
        width = bmpOriginal.getWidth();    

        Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
        Canvas c = new Canvas(bmpGrayscale);
        Paint paint = new Paint();
        ColorMatrix cm = new ColorMatrix();
        cm.setSaturation(0);
        ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
        paint.setColorFilter(f);
        c.drawBitmap(bmpOriginal, 0, 0, paint);
        return bmpGrayscale;
    } 
```

此外，如果图像太大，您可能需要裁剪图像并获取包含您要识别的字符和数字的区域，这也使 OCR 引擎的工作更容易/更准确，有时它会阻止您出现 OutOfMemoryException。

# ruby-on-rails - Rails 3.2 不使用捆绑的 gem，Capistrano 需要 sudo gem install 并且 rbenv 没有找到 rails

> ID：14535146
> 
> 赞同：1
> 
> 时间：2013-01-26T08:18:32.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, rbenv

我有 2 个 Rails 3.2.11 应用程序在带有 Nginx、Unicorn 和 Postgresql 的 Ubuntu 12.04 服务器上运行。部署是由 git 和 capistrano 完成的。

安装第二个应用程序后，我发现 Capistrano 在 cap 部署期间会失败，因为它“找不到 gem 源”，我需要使用 sudo 安装每个缺少的 gem。在此之后，cap deploy 工作正常，应用程序也是如此。从任一应用程序的当前目录运行 bundle install 报告使用所有正确的 gem。

我很困惑 Capistrano 需要在更新我的应用程序之前找到 gem，因为我过去的经验（我认为）是我可以从当前目录运行 bundle install 以在 cap 部署后安装任何新的或更新的 gem。

今天，我决定在我的开发笔记本电脑上使用 rbenv 更新我的 Ruby 版本。我需要从 .rbenv/plugins/ruby-build 运行 git pull ，然后运行 ​​rbenv rehash 然后我可以安装新的 Ruby 版本。很好，ruby-v 报告了新版本 19.3-p374。

现在，当我从我的应用程序开发目录运行 rails server (rails s) 时，我得到 rbenv: rails: command not found。rails的`rails' command exists in these Ruby versions: 1.9.3-p327\. rbenv version reports 1.9.3-p374\. Rbenv which rails and bundle install both report "command not found: with rbenv error "The`命令存在于以下 Ruby 版本中：1.9.3-p327"。

所以，我认为有两个问题是相关的：-

1.  如何使用 bundle install 让我的服务器上的每个应用程序独立运行自己的 gem？我不想冻结这些宝石，我很高兴让这两个应用程序同时保持最新状态。我是否应该继续使用 sudo 安装所需的 gem？

2.  如何解决新版本的rbenv找不到rails的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:19:36.413

我需要再次重新安装所有 gem。Gem 安装捆绑程序，然后从每个应用程序目录进行捆绑更新。

# objective-c - NSString 删除空格，只留下一个

> ID：14535147
> 
> 赞同：0
> 
> 时间：2013-01-26T08:18:45.257
> 
> 标签：objective-c, parsing, nsstring

> **可能重复：**
> [如何删除 NSString 中多余的空白空间？](https://stackoverflow.com/questions/3870298/how-do-you-remove-extra-empty-space-in-nsstring)

我试图弄清楚如何从字符串中删除所有空格但只留下一个。那就是如果我有一个字符串

```
"this    is  my     test  string" 
```

结果是

```
"this is my test string" 
```

谢谢

**更新**：在这里找到答案 [删除 NSString 中的多个空格](https://stackoverflow.com/questions/12136970/removing-multiple-spaces-in-nsstring)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:30:37.287

你可以试试这个：

```
NSString *string=@"this    is  my     test  string";

NSCharacterSet *spaces = [NSCharacterSet whitespaceCharacterSet];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF != ''"];
NSArray *tempArray = [[string componentsSeparatedByCharactersInSet:spaces] filteredArrayUsingPredicate:predicate];
string = [tempArray componentsJoinedByString:@" "]; 
```

# sharepoint-2010 - Sharepoint 2010 全球导航节点

> ID：14535148
> 
> 赞同：0
> 
> 时间：2013-01-26T08:18:49.247
> 
> 标签：sharepoint-2010, navigation

美好的一天，我正在寻找制作**自定义顶部导航菜单**的解决方案。

我有网站集和 3-4 个嵌套网站。内置顶部导航菜单显示如下链接：

**| 网站收藏链接 | 嵌套站点1 | 嵌套站点2 |** 等等

当我使用：

> myWeb = SPContext.Current.Web.Site.RootWeb;
> PublishingWeb publishingWeb = PublishingWeb.GetPublishingWeb(myWeb);
> SPNavigationNodeCollection nodeColl = publishingWeb.Navigation.GlobalNavigationNodes;
> foreach (SPNavigationNode node in nodeColl)
> {
> //节点处理 }

我只有 NestedSite1 和 NestedSite2 作为没有主节点的节点，因为它不在那里。

**所以我想知道如何获取第一个节点？** （内置导航菜单也显示）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:35:31.933

发现自己，如果有人会面对它，试试这个：

```
SPContext.Current.Site.RootWeb 
```

# symfony - symfony2教义2 postLoad和单表继承

> ID：14535150
> 
> 赞同：1
> 
> 时间：2013-01-26T08:19:51.457
> 
> 标签：symfony, doctrine-orm

我有一个带有[Doctrine 2 Single Table Inheritance](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html#single-table-inheritance)的实体结构，如下所示：

```
/**    
*
* @ORM\Table(name="animal")
* @ORM\InheritanceType("SINGLE_TABLE")
* @ORM\DiscriminatorColumn(name="animaltype", type="integer")
* @ORM\DiscriminatorMap({1 = "Cat", 2 = "Dog"}) 
*/
class Animal
.
.
. 
```

这是继承的实体：

```
/**    

* @ORM\Entity  
*/
class Dog extends Animal 
```

现在我想用[postload 事件](https://doctrine-orm.readthedocs.org/en/latest/reference/events.html?highlight=postload#postload)对对象做一些事情：

我从 LifecycleEventArgs 对象中获取了 Dog 对象，但仅使用了 Dog 实体的属性，此时侦听器对从 Animal 实体继承的属性一无所知。我究竟做错了什么？有人知道吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T16:44:59.090

这些属性在您的 Animal 类中是私有的。我刚刚做了类似的事情，但是您需要使用元数据来获取`postLoad`方法中的对象属性。

```
$MetaData = $em->getClassMetadata(get_class($entity)); 
```

然后，您可以使用以下命令获取所有字段名称（格式正确，不带“_”）

```
foreach (array_keys($MetaData->reflFields) as $value) {

} 
```

为了使用这些字段的吸气剂，您可以这样做：

```
//this will become $entity->getSomeFieldValue()  
//it will eval to false if this doesn't exist
if ($entity->{'get' . ucfirst($value)}()) {} 
```

您的整个代码将类似于：

```
//Your listener class

private $reg;

public function __construct(Registry $reg) {
    $this->reg = $reg;
}

public function postLoad( LifecycleEventArgs $eventArgs ){

     $entity = $eventArgs->getEntity();

     $em = $this->reg->getManager();

     $MetaData = $em->getClassMetadata(get_class($entity ));
     foreach (array_keys($MetaData->reflFields) as $value) {
         if ($entity->{'get' . ucfirst($value)}()) {
             //here you can get the $entity->someGetter() values
         }
     }
} 
```

在你的 service.yml 你会做：

```
arguments: ['@doctrine']
tags:
    - { name: doctrine.event_listener, event: postLoad } 
```

请记住，除非您将父类变量切换为，否则`protected`没有`private`真正的方法可以直接读取它们。如果您需要任何澄清，请告诉我，但是这种带有元数据的方法对我来说效果很好。它还为您提供关联

# java - 如何让java输出英文错误而不是其他语言？

> ID：14535155
> 
> 赞同：13
> 
> 时间：2013-01-26T08:20:35.570
> 
> 标签：java, localization

我的系统是中文的，当我的java程序出现错误时，可能会输出非英文的错误信息，无法阅读：

```
Caused by: java.io.IOException: CreateProcess error=2, 系统脮也禄碌陆指露 
```

或者：

```
IOException occured : Cannot run program "cmd /C tsc hello.ts": 
CreateProcess error=2, ϵͳÕҲ»µ½ָ¶ 
```

是否可以让java始终输出英文错误信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-30T19:11:02.293

答案分为两部分。

1.  Java 根据默认语言环境显示错误消息。定义默认语言环境的三个系统属性`user.language`：`user.country`和`user.variant`。如果您有权访问 Java VM 命令行，则可以使用`-D`命令行开关设置这些属性。例如，这足以将 Java 切换到通用英语：

    ```
    java -Duser.language=en com.my.Class 
    ```

2.  您可以定义一个`JAVA_TOOL_OPTIONS`环境变量并在那里指定您的选项。在这种环境中启动的任何 JVM 都会像在命令行上一样选择这些选项。

# java - JTable 单元格颜色随事件变化

> ID：14535163
> 
> 赞同：1
> 
> 时间：2013-01-26T08:22:13.930
> 
> 标签：java, swing, jtable, background-color, tablecellrenderer

我创建了一个`JTable`包含金融工具价格的。我已将表连接到在线经纪人，并通过 API 接收实时提要。我的表格现在可以正确显示新价格出现时发生变化的单元格值（我创建了一个“InstrumentListener”。我想要的是：当单元格值发生变化时，单元格背景颜色会改变 150 毫秒，然后返回白色。如果值高于前一个单元格值，颜色应切换为`Color1`，如果值低于，颜色应切换为`Color2`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:43:15.230

教程文章[*Using Custom Renderers*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)展示了如何更改表格单元格的背景颜色。教程文章[*如何使用摆动计时器*](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)展示了如何有效地标记时间；调用`setRepeats(false)`并恢复原始颜色`actionPerformed()`。从人为因素的角度来看，150 毫秒有点短。考虑让颜色*褪色*，如此[处](https://stackoverflow.com/a/2124507/230513)和[此处](https://stackoverflow.com/a/2234020/230513)所示，超过一秒钟左右。

# datatable - 如何更新 vb.net 中的现有数据表

> ID：14535164
> 
> 赞同：0
> 
> 时间：2013-01-26T08:22:17.977
> 
> 标签：datatable

希望你做得很好。我真的需要一些帮助。实际上我正在开发一个用于创建发票的小型应用程序。我发现真正困难的一件事是当您必须编辑发票时。在我的应用程序中，它会生成一个发票编号，然后您填写描述、数量、单价和总金额等详细信息。起初，这被保存在数据库中，打印并显示给头部以供批准。如果有任何错误，用户必须返回应用程序并更改发票。这就是我卡住的地方。应用程序可以撤回发票。但是一旦进行了更改，我必须将其保存回数据库，并且此更改只能用于特定记录。例如，

发票 001

序列号 数量 单价 总计 1 油漆 2 2000 4000 2 油漆 3 1000 3000 3 油漆 1 2000 2000

可以说有一个错误和要进行的修改

序列号 数量 单价 总计 1 油漆 2 2000 4000 2 油漆 3 1000 3000 3 油漆 2 2000 4000

我应该怎么做这个改变？

我可以使用任何技术或逻辑吗？

我需要在这里使用数据表吗？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:31:19.453

好吧，您对正在使用的数据库技术/适配器一无所知，但它应该类似于......

```
con.Open()
cmd.Connection = con
cmd.CommandText = "UPDATE invoices SET serial = @serial, descr = @descr, qty = @qty ... etc... WHERE invoiceId = @invoiceId"
cmd.Parameters.AddWithValue("@serial", Form.txtSerial.Text)
cmd.Parameters.AddWithValue("@descr", Form.txtDescr.Text)
cmd.Parameters.AddWithValue("@qty", Form.txtQty.Text)
... etc...

cmd.ExecuteNonQuery() 
```

进一步阅读：[关于在 VB.NET 中更新表的 MSDN 帖子](http://social.msdn.microsoft.com/Forums/pl-PL/Vsexpressvb/thread/541e0787-fde6-4423-9885-7afa60aa0ed4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:39:59.083

```
 Newfun()'Function for open the connection

    Dim query As String = "update tBL_GageType set GageType = '" & name & "' where GID=" & id
    Dim cmd As New OleDbCommand(query)
    cmd.Connection = New OleDb.OleDbConnection(connectionString)
    cmd.Connection.Open()
    cmd.ExecuteNonQuery() 
```

# php - 用于从电子邮件中提取详细信息并存储在 mongodb 中的 PHP 脚本

> ID：14535165
> 
> 赞同：0
> 
> 时间：2013-01-26T08:22:51.447
> 
> 标签：php, mongodb

我正在尝试编写简单的 php 脚本来从收到的电子邮件中提取详细信息（发件人的电子邮件地址、主题名称和内容）并将详细信息存储在 mongodb 数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T10:04:16.033

The easiest way would be to name your PHP (CLI) script in Postfix's configuration entry `mailbox_command`. It is suggested in this post: [Postfix - How to process incoming emails?](https://stackoverflow.com/questions/5299113/postfix-how-to-process-incoming-emails) and documented here: [Postfix documentation](http://www.postfix.org/postconf.5.html#mailbox_command).

# user-interface - 当网格中有枚举列时，grid.AddRow() 上的 Kendo ui Grid Hierarchy 错误

> ID：14535166
> 
> 赞同：1
> 
> 时间：2013-01-26T08:22:55.183
> 
> 标签：user-interface, enums, grid, kendo-ui

我有一个 Kendo Grid Hierarchy 和一个实体，该实体具有一个枚举属性和其他一些具有其他 .net 原始类型的属性，并且网格上还有一个名为 AddNewRecord 的工具栏按钮。当用户按下 AddNewRecord 按钮时，它必须向网格添加新行并在网格中显示部分视图（因为它是层次网格）。当我在实体中评论枚举属性时，一切正常；否则，AddNewRecord 按钮什么也不做。有谁知道问题是什么？提前致谢

```
.ToolBar(toolbar => toolbar.Custom().Text("AddNewRecord").Url("#").HtmlAttributes(new {@class="testClass"}))
        .ClientDetailTemplateId("EntityTemplate")
        .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model => model.Id("Id"))
        .Read(read => read.Action("BaseInfoGeneralForm", "BaseInfo"))

    $(".testClass").click(function () {
        var grid = $("#Grid").data("kendoGrid");
        grid.addRow();
        $(".k-grid-edit-row").appendTo("#grid tbody");//Add New Row
        grid.expandRow(grid.tbody.find("tr.k-master-row").first());//Expand newly added row

public class FileStatus : EntityBase
{
    public FileStatus()
    {
    }

    public virtual string Title { get; set; }

    public virtual Status Ended { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T04:48:28.593

```
}
   this.expandRow(this.tbody.find("tr.k-master-row")[0]);
   this.expandRow(this.tbody.find("tr.k-master-row")[1]);
   this.expandRow(this.tbody.find("tr.k-master-row")[2]);
   this.expandRow(this.tbody.find("tr.k-master-row")[3]);
   this.expandRow(this.tbody.find("tr.k-master-row")[4]);
}, 
```

# uiwebview - 如何在 uiwebview 中打开 iTunes 链接

> ID：14535167
> 
> 赞同：2
> 
> 时间：2013-01-26T08:23:05.347
> 
> 标签：uiwebview, itunes

是否可以在 uiwebview 中加载应用商店链接。我试图在 uiwebview 中打开它，但它没有在那里加载。我不希望用户在单击我的应用程序中的 url 时离开我的应用程序。可能吗？

问候
潘卡伊

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T03:46:57.040

iTunes 内容在移动设备上没有“iTunes 预览”页面 - iOS 会自动识别 itunes.apple.com 链接并打开商店。

如果您想将用户保留在您的应用程序中，请使用 SKStoreProductViewController 将商店打开到特定的内容。用户关闭工作表后，它们仍在您的应用程序中。

[http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html)

# php - 设计投票系统

> ID：14535168
> 
> 赞同：3
> 
> 时间：2013-01-26T08:23:09.140
> 
> 标签：php, javascript, jquery, html, css

我在这里制作了一个示例投票系统：[示例投票系统](http://ankursinha.net/polls/voting.php)

然而，经过反复尝试，我无法让它按照我想要的方式设置样式，因为开发人员在这里使用了太多的 div。字体变得太大或与数字重叠或不成比例等。

我希望它看起来像这样：

![设计投票系统](../Images/f485c35c6bef3330a0ad6b75c88d3fc1.png)

这是我的代码：

```
 <!DOCTYPE html>
<head>
<title>Sample Polling System</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(function() {
$(".vote").click(function() 
{
var id = $(this).attr("id");
var name = $(this).attr("name");
var dataString = 'id='+ id ;
var parent = $(this);
if(name=='up')
{
$(this).fadeIn(200).html('<img src="dot.gif" align="absmiddle">');
$.ajax({
type: "POST",
url: "up_vote.php",
data: dataString,
cache: false,
success: function(html)
{
parent.html(html);
}  
}); 
}
else
{
$(this).fadeIn(200).html('<img src="dot.gif" align="absmiddle">');
$.ajax({
type: "POST",
url: "down_vote.php",
data: dataString,
cache: false,
success: function(html)
{
parent.html(html);
}
});
}
return false;
});
});
</script>

<style type="text/css">
body
{
font-family:'Georgia', Times New Roman, Times, serif;
}
#main
{
height:100px; 
width:800px;
}
a
{
color:#DF3D82;
text-decoration:none;

}
a:hover
{
color:#DF3D82;
text-decoration:underline;

}
.up
{
height:40px; font-size:24px; text-align:center; background-color:gray; margin-bottom:2px;
-moz-border-radius: 6px;-webkit-border-radius: 6px;
}
.up a
{
color:#FFFFFF;
text-decoration:none;

}
.up a:hover
{
color:#FFFFFF;
text-decoration:none;

}
.down
{
height:40px; font-size:24px; text-align:center; background-color:gray; margin-top:2px;
-moz-border-radius: 6px;-webkit-border-radius: 6px;
}

.down a
{
color:#FFFFFF;
text-decoration:none;

}
.down a:hover
{
color:#FFFFFF;
text-decoration:none;

}
.box1
{
float:left; height:80px; width:50px;
}
.box2
{
float:left; width:440px; text-align:left;
margin-left:10px;height:60px;margin-top:10px;
font-size:18px;
}
img
{
border:none;
padding-top:7px;
}
</style>
</head>
<body>
<div align="center">
<h3>Sample Polling System</h3><hr>
<?php
include('config.php');
$sql=mysql_query("SELECT * FROM Messages  LIMIT 9");
while($row=mysql_fetch_array($sql))
{
$msg=$row['msg'];
$mes_id=$row['mes_id'];
$up=$row['up'];
$down=$row['down'];
?>
<div id="main">
<div class="box1">
<div class='up'><a href="" class="vote" id="<?php echo $mes_id; ?>" name="up"><?php echo $up; ?></a><!--Tried placing here, didn't work--></div>
<div class='down'><a href="" class="vote" id="<?php echo $mes_id; ?>" name="down"><?php echo $down; ?></a></div>
</div><!-- tried to put this box below box2 but still didn't work -->
<div class='box2' ><?php echo $msg; ?></div>
</div><!-- tried atleast 10 permutations and combinations, couldn't get it work-->
<hr>
<?php
}
?>
</div>
</body>
</html> 
```

请帮我得到我想要达到的效果。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:38:15.207

我修复了你的代码：

```
 <!DOCTYPE html>
<head>
<title>Sample Polling System</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(function() {
$(".vote").click(function() 
{
var id = $(this).attr("id");
var name = $(this).attr("name");
var dataString = 'id='+ id ;
var parent = $(this);
if(name=='up')
{
$(this).fadeIn(200).html('<img src="dot.gif" align="absmiddle">');
$.ajax({
type: "POST",
url: "up_vote.php",
data: dataString,
cache: false,
success: function(html)
{
parent.html(html);
}  
}); 
}
else
{
$(this).fadeIn(200).html('<img src="dot.gif" align="absmiddle">');
$.ajax({
type: "POST",
url: "down_vote.php",
data: dataString,
cache: false,
success: function(html)
{
parent.html(html);
}
});
}
return false;
});
});
</script>

<style type="text/css">
body
{
font-family:'Georgia', Times New Roman, Times, serif;
}
#main
{
width:800px;
overflow:hidden;
}
a
{
color:#DF3D82;
text-decoration:none;

}
a:hover
{
color:#DF3D82;
text-decoration:underline;

}
.up
{
height:40px; font-size:24px; text-align:center; background-color:gray; margin-bottom:2px;
-moz-border-radius: 6px;-webkit-border-radius: 6px; float:left; width:40px; 
}
.up a
{
color:#FFFFFF;
text-decoration:none;

}
.up a:hover
{
color:#FFFFFF;
text-decoration:none;

}
.down
{
height:40px; font-size:24px; text-align:center; background-color:gray; margin-top:2px;
-moz-border-radius: 6px;-webkit-border-radius: 6px; float:left; margin-left:40px; width:40px; 
}

.down a
{
color:#FFFFFF;
text-decoration:none;

}
.down a:hover
{
color:#FFFFFF;
text-decoration:none;

}
.box1
{
float:left; clear:both;
}
.box2
{
float:left; width:440px;  text-align:left;
font-size:18px; 
}
img
{
border:none;
padding-top:7px;
}
</style>
</head>
<body>
<div align="center">
<h3>Sample Polling System</h3><hr>
<?php
include('config.php');
$sql=mysql_query("SELECT * FROM Messages  LIMIT 9");
while($row=mysql_fetch_array($sql))
{
$msg=$row['msg'];
$mes_id=$row['mes_id'];
$up=$row['up'];
$down=$row['down'];
?>
<div id="main">
<div class='box2' ><?php echo $msg; ?></div>
<div class="box1">
<div class='up'><a href="" class="vote" id="<?php echo $mes_id; ?>" name="up"><?php echo $up; ?></a></div><span style="margin-top:10px; float:left; margin-left:10px;">People Agree to This</span>
<div class='down'><a href="" class="vote" id="<?php echo $mes_id; ?>" name="down"><?php echo $down; ?></a></div><span style=" margin-top:10px; float:left; margin-left:10px;">People Disagree to This</span>
</div><!-- tried to put this box below box2 but still didn't work -->

</div><!-- tried atleast 10 permutations and combinations, couldn't get it work-->
<hr>
<?php
}
?>
</div>
</body>
</html> 
```

看看[http://jsfiddle.net/qCwZd/](http://jsfiddle.net/qCwZd/)

`#box2`这是放在上面的标题`#box1`，我给了它 a`float:left;`并`#box1`得到了 a`float:left;`和 a`clear:both;`所以它可以显示在新行上。

我`span`在每个灰色框旁边添加了一个，第一个说**人们同意这个**，其他**人不同意这个**，他们被赋予了一个`float:left;`放在灰色框旁边，还有一些`margin-left`。我删除了一些`height`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:46:35.413

首先你应该改变你的标记。您正在使用多个具有相同名称（'main'）的 elemtn ID，这是错误的。在一个 HTML 页面中，相同 ID 的元素宽度不应超过 1 个。

我建议您执行以下操作，而不是您的标记：

```
<div align="center">
<h3>Sample Polling System</h3><hr>
<div id="main">

 <div class="row">
  <div class="wrapper">
   <div class="item">
    <div class="box1">
     <div class='up'><a href="" class="vote" id="13" name="up">2</a></div>
     <div class='down'><a href="" class="vote" id="13" name="down">0</a></div>
    </div><!--end box1-->
    <div class='box2' >Sachin Tendulkar is GOD</div>
   </div><!--end item-->

  <div class="item">
    <div class="box1">
     <div class='up'><a href="" class="vote" id="13" name="up">2</a></div>
     <div class='down'><a href="" class="vote" id="13" name="down">0</a></div>
    </div><!--end box1-->
    <div class='box2' >Sachin Tendulkar is GOD</div>
   </div><!--end item-->
 </div><!--end wrapper-->
</div><!--end row-->

</div><!--end main--> 
```

然后你的CSS可以简单地是：

```
#main{width:100%;}
.row{width:100%; border-bottom:1px solid black;}
.wrapper{width:800px; margin:0 auto;}
.item{width:400px; float:left;} 
```

你可以在这里看到一个工作示例：http: [//jsfiddle.net/gHmDv/](http://jsfiddle.net/gHmDv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-19T18:18:59.177

我在这里做了一个投票系统。我从 Stackoverflow 的投票中获取了颜色。我用剪辑路径制作了“图标”，并给了它们一个三角形。使用单选按钮，我将标签与名称属性连接起来，如果您现在单击三角形，则单选按钮被激活并且三角形变为橙色。这是代码（您可以省略 javascript 代码）：

```
var number = 0;
var count = document.getElementById("voteCounter");

function plusOne() {
  number = 1;
  count.innerHTML = number;
}

function minusOne() {
  number = - 1;
  count.innerHTML = number;
}
```

```
* {
  margin: 0;
  padding: 0;
  font-family: 'Roboto', sans-serif;
}

#vote {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 50px;
  font-size: 25px;
  color: #6C737B;
}

#upvote {
  background: #BCC0C3;
  height: 50px;
  width: 40px;
  clip-path: polygon(50% 60%, 0% 100%, 100% 100%);
  margin-bottom: 10px;
  cursor: pointer;
}

#downvote {
  background: #BCC0C3;
  height: 50px;
  width: 40px;
  clip-path: polygon(50% 40%, 100% 0%, 0% 0%);
  margin-top: 10px;
  cursor: pointer;
}

input[type="radio"] {
  display: none;
}

input[id="upvoteRadio"]:checked ~ #upvote {
  background: #E5863D;
}

input[id="downvoteRadio"]:checked ~ #downvote {
  background: #E5863D;
}
```

```
<div id="vote">
  <input type="radio" id="upvoteRadio" name="vote" value="upvote">
  <label for="upvoteRadio" id="upvote" onclick="plusOne()"></label>
  <p id="voteCounter">0</p>
  <input type="radio" id="downvoteRadio" name="vote">
  <label for="downvoteRadio" id="downvote" onclick="minusOne()"></label>
</div>
```

# php - 带有 PHP 后备的 jQuery 联系表单

> ID：14535174
> 
> 赞同：0
> 
> 时间：2013-01-26T08:24:00.977
> 
> 标签：php, validation, mootools, contact-form

我已经按照这个教程学习了如何使用 PHP 和 jQuery 制作联系表格。对于我的理解，这个想法是让 jquery 工作并将 php 作为“备份”。

我按照教程没有任何问题。或者我是这么想的......但最后似乎 jQuery 不起作用。验证时我总是得到一个“闪烁”（页面刷新）。

这是我试图在其中使用它的页面：http: [//dccf.site88.net/test/dccf.php](http://dccf.site88.net/test/dccf.php)

这是PHP：

```
// Set email variables
$email_to = 'luis_bento@hotmail.com';
$email_subject = 'Message from DCCF site';

// Set required fields
$required_fields = array('fullname','email','comment');

// set error messages
$error_messages = array(
    'fullname' => 'Please enter a Name to proceed.',
    'email' => 'Please enter a valid Email.',
    'comment' => 'Please enter a Message to continue.'
);

// Set form status
$form_complete = FALSE;

// configure validation array
$validation = array();

// check form submittal
if(!empty($_POST)) {
    // Sanitise POST array
    foreach($_POST as $key => $value) $_POST[$key] = remove_email_injection(trim($value));

    // Loop into required fields and make sure they match our needs
    foreach($required_fields as $field) {       

        // the field has been submitted?
        if(!array_key_exists($field, $_POST)) array_push($validation, $field);

        // check there is information in the field?
        if($_POST[$field] == '') array_push($validation, $field);

        // validate the email address supplied
        if($field == 'email') if(!validate_email_address($_POST[$field])) array_push($validation, $field);
    }

    // basic validation result
    if(count($validation) == 0) {

        // Prepare our content string
        $email_content = 'New Website Comment: ' . "\n\n";

        // simple email content
        foreach($_POST as $key => $value) {
            if($key != 'submit') $email_content .= $key . ': ' . $value . "\n";
        }

        // if validation passed ok then send the email
        mail($email_to, $email_subject, $email_content);

        // Update form switch
        $form_complete = TRUE;
    }
}
function validate_email_address($email = FALSE) {
    return (preg_match('/^[^@\s]+@([-a-z0-9]+\.)+[a-z]{2,}$/i', $email))? TRUE : FALSE;
}
function remove_email_injection($field = FALSE) {
   return (str_ireplace(array("\r", "\n", "%0a", "%0d", "Content-Type:", "bcc:","to:","cc:"), '', $field));
}
?>

        <div id="formWrap">
    <h2>If you like our project, have any questions, or would like more information, please send us a message.</h2><!-- end of "Form Message" h2 -->
    <div id="form">
    <?php if($form_complete === FALSE): ?>
    <form action="dccf.php" method="post" id="comments_form">
        <div  class="row">
            <div class="label">Your Name:</div><!-- end of .label -->
            <div class="input">
                <input type="text" id="fullname" class="detail" name="fullname" value="<?php echo isset($_POST['fullname'])? $_POST['fullname'] : ''; ?>" /><?php if(in_array('fullname', $validation)): ?><span class="error"><?php echo $error_messages['fullname']; ?></span><?php endif; ?>
            </div><!-- end of .input -->
            <div class="context">e.g. John Smith or Jane Doe</div><!-- end of .context --> 
        </div><!-- end of .row -->

        <div  class="row">
            <div class="label">Your Email:</div><!-- end of .label -->
            <div class="input">
                <input type="text" id="email" class="detail" name="email" value="<?php echo isset($_POST['email'])? $_POST['email'] : ''; ?>" /><?php if(in_array('email', $validation)): ?><span class="error"><?php echo $error_messages['email']; ?></span><?php endif; ?>
            </div><!-- end of .input -->
            <div class="context">e.g. youremail@somewhere.com</div><!-- end of .context --> 
        </div><!-- end of .row -->

        <div  class="row">
            <div class="label">Your Message:</div><!-- end of .label -->
            <div class="input">
                <textarea id="comment" name="comment" class="mess"><?php echo isset($_POST['comment'])? $_POST['comment'] : ''; ?></textarea><?php if(in_array('comment', $validation)): ?><span class="error"><?php echo $error_messages['comment']; ?></span><?php endif; ?>
            </div><!-- end of .input -->
        </div><!-- end of .row -->

        <div class="submit">
            <input type="submit" id="submit" name="submit" value"Send Message" />
        </div><!-- end of .submit -->

        </form>
        <?php else: ?>
        <p class="thanks">Thank you for your Message! We will get back to you as soon as possible.</p>
        <?php endif; ?>
    </div><!-- end of #form -->
</div><!-- end of #formWrap --> 
```

和java脚本：在：

```
 <script type="text/javascript">
    var nameError = '<?php echo $error_messages['fullname']; ?>';
    var emailError = '<?php echo $error_messages['email']; ?>';
    var commentError = '<?php echo $error_messages['comment']; ?>';
</script> 
```

在validation.js中：

```
 window.addEvent('domready', function() {
// Get the form
var form = $('comments_form');

//  if the form is found...
if (form) {
    // obtain error fields
    var name = $('fullname');
    var email = $('email');
    var comment = $('comment');

    // Set the default status
    var isValid = true;

    // input error function for the error messages
    var addError = function (field, msg) {
        field.addClass('error'); // Add error class to field
        var error = field.getParent().getElement('span') || new Element('span', {'class': 'error'}); // add error message if not already placed
        error.set('text', msg); // error text msg
        error.inject(field, 'after'); // Insert error message after field
    };

    // detach error function used to delete any error messages and remove the error class
    var removeError = function (field) {
        field.removeClass('error'); // Remove error class from form fields
        var error = field.getParent().getElement('span'); // find any existing error messages

        // destroy if error message
        if (error) {
            error.destroy();
        }
    };

    //  insert submit form event
    form.addEvent('submit', function (e) {
        // Test name length
        if (name.get('value').length === 0) {
            isValid = false;
            addError(name, nameError);
        } else {
            isValid = true;
            removeError(name);
        }

        // check email length
        if (email.get('value').length === 0) {
            isValid = false;
            addError(email, emailError);
        // check email validity
        } else if (!email.get('value').test(/^([a-zA-Z0-9\+_\-]+)(\.[a-zA-Z0-9\+_\-]+)*@([a-zA-Z0-9\-]+\.)+[a-zA-Z]{2,6}$/)) {
            isValid = false;
            addError(email, emailError);
        } else {
            isValid = true;
            removeError(email);
        }

        // check comment length
        if (comment.get('value').length === 0) {
            isValid = false;
            addError(comment, commentError);
        } else {
            isValid = true;                     
            removeError(comment);
        }

        // If form invalid then stop event happening
        if (!isValid) {
            e.stop();
        }
    });
}   
}); 
```

谢谢您的帮助！=)

编辑：在控制台上出现了几个**错误**（在加载页面时，没有提交表单）：

*   视口参数键“width_device-width”无法识别和忽略。dccf.php:8
*   TypeError：“未定义”不是函数（评估“form.addEvent”）validation.js：4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:09:09.617

由于您的代码存在很多问题，因此我删除了之前的答案。

这是删除了所有错误的 jQuery 等价物，所以它

1.  如果仅填写了后面的字段之一，则不再允许提交
2.  没有使用 string.test(regex) 而是使用正确的 regex.test(string)
3.  在名称字段中使用全名而不是名称
4.  每次按下提交时重置 isValid

[演示](http://jsfiddle.net/mplungjan/mjCxd/)

```
$(function() {
  // Get the form
  var form = $('#comments_form');

  //  if the form is found...
  if (form) {

    // input error function for the error messages
    var addError = function (field, msg) {
        field.addClass('error'); // Add error class to field
        var error = field.parent().find('span') || $('<span>', {'class': 'error'}); // add error message if not already placed
        error.html(msg); // error text msg
        field.after(error); // Insert error message after field
    };

    // detach error function used to delete any error messages and remove the error class
    var removeError = function (field) {
        field.removeClass('error'); // Remove error class from form fields
        var error = field.parent().find('span'); // find any existing error messages

        // destroy if error message
        if (error) {
            error.remove();
        }
    };

    //  insert submit form event
    form.on('submit', function (e) {

        // Set the default status
        var isValid = true;

        // Test name length
        var name = $("#fullname");
        if (name.val().length === 0) {
            isValid = false;
            addError(name, nameError);
        } else {
            removeError(name);
        }

        // check email length
        var email = $("#email");
        var emailVal = email.val();
        if (emailVal.length === 0) {
            isValid = false;
            addError(email, emailError);
        // check email validity
        } else if (!/^([a-zA-Z0-9\+_\-]+)(\.[a-zA-Z0-9\+_\-]+)*@([a-zA-Z0-9\-]+\.)+[a-zA-Z]{2,6}$/.test(emailVal)) {
            isValid = false;
            addError(email, emailError);
        } else {
            removeError(email);
        }

        // check comment length
        var comment = $("#comment");
        console.log(comment.val())
        if (comment.val().length === 0) {
            isValid = false;
            addError(comment, commentError);
        } else {
            removeError(comment);
        }

        // If form invalid then stop event happening
        if (!isValid) {
            e.preventDefault();
        }
    });
  }   
}); 
```

# opencv - 代码块 12.11 opencv imshow 不工作

> ID：14535179
> 
> 赞同：0
> 
> 时间：2013-01-26T08:24:17.390
> 
> 标签：opencv, codeblocks

我写这样的代码：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace std;
using namespace cv;

int main()
{
    Mat image = imread("lena.jpg");
    if(!image.data)
    {
        cout << "error" <<endl;
        return -1;
    }

    namedWindow("window");
    imshow("window",image);
    waitKey(27);
    return 0;
} 
```

在代码块 12.11 中：

它无法显示图像，并且窗口说

```
 XX.exe has stopped working
        windows is checking for a solution to the problem... 
```

在 qtcreator 2.4.1

结果没问题。

我试过 cvImageShow 都可以

代码块 12.11 的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:00:50.157

我解决了这个问题。

我在代码块 12.11 中更改了 gcc 版本

我将 gcc 4.6.1 下载到 /Program Files/codeblocks/MinGW

然后opencv程序由于缺少libgcc_s_dw2-1.dll而无法工作

谷歌 libgcc_s_dw2-1.dll 并将其放入 /Program Files/codeblocks/MinGW/bin

成功！

也许这个链接：[OpenCV program cannot run because missing "libgcc_s_dw2-1.dll" in Code::Block](https://stackoverflow.com/questions/12700935/opencv-program-cannot-run-because-of-missing-libgcc-s-dw2-1-dll-in-codeblock) 可能有助于解决这类问题。

# qt - Qt - 编码 GUI 的方法

> ID：14535180
> 
> 赞同：0
> 
> 时间：2013-01-26T08:24:22.197
> 
> 标签：qt, dialog, window

我有一个使用 Qt Creator 制作的 Qt 程序。我制作了一个 .ui 对话框（mainwindow.ui），并在 ui 编辑器中添加了控件和插槽。这些最终会在 mainwindow.cpp 中创建方法，例如。

```
void MainWindow::on_btnRunJohn_clicked() 
```

在这些方法中，我直接访问控件以更新它们，例如。

```
ui->txtConfigFileName->setText("Some text to put in the text box"); 
```

我知道在 Qt 中有很多管理窗口对话框的方法（例如 QML、子类化），但我想知道这种方法是否不是最优的，或者以某种方式限制了事情。这是在 Qt 中编码的合理方式，还是有更好的方法来管理对话框？我很高兴预先定义控件，即。我不需要在运行时添加/删除控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:07:49.290

实际上，如果你想改变 Ui 的行为，这就是你必须走的路。

我建议你可以使用**Multiple Inheritance**，就像这样：

```
class A : public QDialog, public Ui::A
{
    // class methods and members
} 
```

这将帮助您轻松使用 Ui 小部件。

# java - 使用ArrayList获取二维数组数据

> ID：14535185
> 
> 赞同：1
> 
> 时间：2013-01-26T08:24:39.890
> 
> 标签：java, recursion, multidimensional-array, arraylist, pass-by-reference

我的输入是 0 和 1 的文本文档网格，然后我将其放入二维整数数组中。

我的目标是“映射”网格中的 1。我必须确定有多少组 1，每组有多少，并创建一个带有 1 组标签的输出文本。

例如，我收到以下文本：

```
1 0 1 0 0 1 0
1 1 1 0 1 1 0
1 0 0 0 1 0 0
0 0 1 0 0 0 1
0 0 1 1 1 1 1 
```

我总共有三个组，然后必须像这样吐出来：

```
1 0 1 0 0 2 0
1 1 1 0 2 2 0
1 0 0 0 2 0 0
0 0 3 0 0 0 3
0 0 3 3 3 3 3 
```

在进行递归时，我创建了一个二维整数 ArrayList 以可扩展到组和组成员。我之前认为如果我只是将第二组的所有“成员”更改为 2，那么它们应该在原始二维数组中更改，因为数组是通过引用传递的。

我错了吗？让我知道是否还需要提供任何其他信息。

提前致谢。

编辑：如果使用 ArrayList.contains() 函数，我似乎有一个问题，例如它是否包含实际的“1”而不是包含 int[][] array[0][1]。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:30:47.473

对我来说听起来很像区域标签算法。也许[这](http://en.wikipedia.org/wiki/Connected-component_labeling)会有所帮助

# teamcity - 防止 TeamCity 中的意外构建

> ID：14535187
> 
> 赞同：14
> 
> 时间：2013-01-26T08:25:05.813
> 
> 标签：teamcity

我想创建一个手动触发的 Team City 构建，将我们的网站部署到其实时环境中。我很犹豫要不要这样做，因为我担心人们会意外触发构建。

我知道我可以通过阻止大多数人访问或通过使部署过程稍微更难（例如两个步骤）来半解决这个问题。

有没有更好的技术？是否有可能有一个“你确定吗？” 风格对话？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-27T06:40:59.197

首先，您应该接受 John Hoerr 的建议，并阻止人们运行它，除非他们是极少数人。

但我们可以做得更好，并防止应该能够运行构建的人误点击。添加一个[配置参数，它是一个复选框](http://confluence.jetbrains.net/display/TCD7/Typed+Parameters)。这样，当有人点击“运行”按钮时，它很快就会失败。他们必须点击运行按钮上的省略号，然后单击消息旁边的复选框，例如*您确定吗？*.

为此，请添加名称如 的参数`confirm`，然后点击*编辑*链接。在弹出窗口中，单击**Spec**旁边的*编辑*按钮。*将类型*更改为. 将*选中的值*设置为，将*未选中的值*设置为。或其他对您有意义的值。***`Checkbox`*`true`*`false`*****

 *****单击`Save`以保存 Spec，然后返回到*Edit Parameter*弹出窗口。将*值*设置为`false`。这是复选框的默认值。

作为您在脚本中做的第一件事，检查参数`%confirm%`是否设置为字符串`"true"`或是否设置为`"false"`. 如果`"false"`您想`exit 1`立即：运行构建的人没有选中该`confirm`复选框。

如果需要，您可以每次都弹出*Run Custom Build弹出窗口。*为此，在`Edit parameter specification`窗口中，将*Display*更改为`Prompt`。默认值仍然是不进行部署，但每次都会弹出对话框。

您还可以使显示在文本框旁边的标签不是参数的名称，而是任意字符串。在`Edit parameter specification`弹出窗口中，让Pinky 之`label`类的东西*发誓要这样做？*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T01:37:24.973

我们这样做的方式是一个两步过程。这两个步骤都仅限于我们的部署团队。让我们以生产 Web 服务器代码为例：

1.  从 Teamcity 手动运行构建，构建生产代码并将其部署到一个面向非公众的生产服务器 -`Deploy`服务器。`Staging`由于我们在生产中广泛使用缓存和 CDN，这与我们的环境有点不同。
2.  第二个“构建”是从 Teamcity 手动运行的，它本质上只是命令行/powershell 脚本的触发器，用于将代码从`Deploy`服务器部署到生产服务器。

由于两个版本的访问都受到限制，因此它几乎可以完全防止意外部署到生产环境。例如，如果少数几个有权访问生产构建的工程师中的一个进来并意外运行了第二个部署脚本而没有运行第一个构建，它只会从部署服务器重新部署代码，即已经投入生产。这不会造成任何损害。

虽然我当然信任参与我们部署过程的所有工程师，但我喜欢两步生产过程的保证。安全总比后悔好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T09:41:19.263

我认为通过使用 TeamCity 的基于角色的访问来防止大多数人运行生产部署，您走在了正确的轨道上。对于确实拥有特权的队友，我鼓励他们从仪表板中隐藏/删除*Deploy to Prod*配置。您可以通过单击配置右侧的**X来执行此操作。**这对我们来说是防止偶然误点击的有效方法。当您确实想要运行*Deploy to Prod*构建时，您可以通过项目页面直接浏览到它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-15T17:32:21.367

对于生产环境，我们需要确认部署到的域。这是实现此目的的简单方法：

1.  编辑部署构建步骤。
2.  单击以添加新的配置参数。
3.  设置以下参数规格：
    *   标签：确认目标
    *   说明：确认部署到的生产环境。
    *   显示：提示
    *   类型：文本
    *   允许值：正则表达式
    *   模式：**[在您的域中输入（请记住前面带有斜线的句点）]**
    *   验证消息：部署到错误的域，dweeb！*****

# c++ - 改变 switch() 中的数据，累积

> ID：14535188
> 
> 赞同：0
> 
> 时间：2013-01-26T08:25:07.933
> 
> 标签：c++, accumulator

我正在做一个在 C++ 中刺激 ATM 并且累加器有一些问题的项目，我的问题是：我正在使用 switch（这里是案例 1）来更改在包含 switch 的函数中声明的 2 个变量的值（ )，但是值仅在案例 1 内部发生变化，并且它们将自身重置为原始值（如 const 声明），因此当我尝试打印检查和保存（在案例 3 和 4 中）时，它会打印出原始金额（1000） . 所以我不知道我在这里做错了什么。问题不在于金额，我尝试用数值替换金额，但仍然不起作用。请帮忙

```
int transactions()
{   
    double checking = 1000.00, saving = 1000.00;
    double amount;
    switch (inputRange(menu()))
    {
    case 1: system("cls");
            amount = getAmount("Enter an amount to transfer from checking to saving: ");
            checking -= amount; 
            saving += amount;
            cout << checking << " " << saving; // they only change inside case 1
            cout << "\nTransaction completed! \n\nPress ENTER to return to main menu...";
            cin.ignore(99,'\n');
            break; 
```

更新***我已经知道了伙计们，谢谢，只是忘记了&，这行得通

```
 int transactions(double &checkBal, double &saveBal)
{       
    double amount;

    //set precision
    cout << fixed << showpoint << setprecision(2);

    switch (inputRange(menu()))
    {
    case 1: system("cls");
            checkingToSaving (getAmount("Enter an amount to transfer from checking to saving: "), checkBal, saveBal);
            cout << "\nTransaction completed! \n\nPress ENTER to return to main menu...";
            cin.ignore(99,'\n');
            break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:28:34.750

问题是，`checking`并且`saving`仅在对`transactions()`.

它们在`transactions()`被调用、被初始化、你的代码改变它们时就出现了，它们在`transactions()`返回的那一刻消失了。当再次调用该函数时，整个循环重复。

这两个变量需要存在于函数之外（可能作为某个类的数据成员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:33:04.363

声明一个“客户”类，（包括姓名、地址、储蓄、支票等成员）。在“事务”之外创建实例并将实例作为参数传入。

那，或数据库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T09:02:40.407

您当前问题的粗略答案是使用静态变量：

```
int transactions()
{   
    static double checking = 1000.00;
    static double saving = 1000.00;
    .
    . 
```

这种方法只给你一个检查和保存的实例。如果您想扩展您的程序以拥有多个帐户，您应该考虑使用类实例来保存数据：

```
class Account{
    double checking;
    double saving;
public:
    int transactions();
}; 
```

# python - 不匹配任何字符串的最快正则表达式

> ID：14535191
> 
> 赞同：5
> 
> 时间：2013-01-26T08:25:23.823
> 
> 标签：python, regex

不匹配*任何*字符串的最快执行正则表达式是什么？这似乎是一件无用的事情，但考虑一个将*强制*正则表达式作为过滤器的程序（这实际上是我的场景）。我尝试了一些，并发现`b(?<!b)`它是表现最好的，因为它`b`很少出现在输入中。

这是我编写的用于测试不同模式的速度的python代码：

```
#!/usr/bin/env python

import re
import time

tests = [
  r'a\A',
  r'b\A',
  r'a^',
  r'b^',
  r'[^\s\S]',
  r'^(?<=a)',
  r'^(?<=b)',
  r'a(?<!a)',
  r'b(?<!b)',
  r'\Za',
  r'\Zb',
  r'$a',
  r'$b'
]
timing = []
text = 'a' * 50000000

for t in tests:
  pat = re.compile(t)
  start = time.time()
  pat.search(text)
  dur = time.time() - start
  timing.append((t, dur))

timing.sort(key=lambda x: x[1])
print('%-30s %s' % ('Pattern', 'Time'))
for t, dur in timing:
  print('%-30s %0.3f' % (t, dur)) 
```

在我的机器上，我得到以下时间：

```
Pattern                        Time
b(?<!b)                        0.043
b\A                            0.043
b^                             0.043
$a                             0.382
$b                             0.382
^(?<=a)                        0.395
\Za                            0.395
\Zb                            0.395
^(?<=b)                        0.414
a\A                            0.437
a^                             0.440
a(?<!a)                        0.796
[^\s\S]                        1.469 
```

*更新：为一些建议的正则表达式添加了基准。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:24:36.307

单个字符是有效的正则表达式。不是“魔术”的单个字符匹配自身。如果你能识别出一个永远不会出现在你的文本中的字符，你可以从中创建一个模式。

ASCII NUL，字符 0 怎么样？

我在您的测试程序中又插入了一个字符串，即字符串：`'\0'`

它与您的最佳模式一样快：`b(?<!b)`

好的，你已经在字符串末尾有了一个字符。*字符串开头之前*的一个字符怎么样？这不可能： `'x^'`

啊哈！这比在字符串结束后检查字符要快。但它与您的最佳模式一样快。

我建议用`b`ASCII NUL 替换它并称之为好。当我尝试这种模式时：`\0(?<!\0)`

它赢了一小部分。但实际上，在我的电脑上，上面讨论的所有这些都非常接近，以至于没有太多可以区分它们的地方。

结果：

```
Pattern                        Time
\0(?<!\0)                      0.098
\0                             0.099
x^                             0.099
b(?<!b)                        0.099
^(?<=x)                        1.416
$b                             1.446
$a                             1.447
\Za                            1.462
\Zb                            1.465
[^\s\S]                        2.280
a(?<!a)                        2.843 
```

那很*有趣*。感谢您发布问题。

编辑：*啊哈*！我重写了程序以使用真实输入数据进行测试，得到了不同的结果。

我从古腾堡计划下载了“威廉莎士比亚全集”作为文本文件。（奇怪，它给出了一个错误`wget`但让我的浏览器得到它......某种防止自动复制的措施？） URL：[http ://www.gutenberg.org/cache/epub/100/pg100.txt](http://www.gutenberg.org/cache/epub/100/pg100.txt)

这是结果，然后是我运行的修改后的程序。

```
Pattern                        Time
\0(?<!\0)                      0.110
\0                             0.118
x^                             0.119
b(?<!b)                        0.143
a(?<!a)                        0.275
^(?<=x)                        1.577
$b                             1.605
$a                             1.611
\Za                            1.634
\Zb                            1.634
[^\s\S]                        2.441 
```

所以是的，我肯定会选择第一个。

```
#!/usr/bin/env python

import re
import time

tests = [
  r'x^',
  r'\0',
  r'[^\s\S]',
  r'^(?<=x)',
  r'a(?<!a)',
  r'b(?<!b)',
  r'\0(?<!\0)',
  r'\Za',
  r'\Zb',
  r'$a',
  r'$b'
]
timing = []
#text = 'a' * 50000000
text = open("/tmp/pg100.txt").read()
text = text * 10

for t in tests:
  pat = re.compile(t)
  start = time.time()
  pat.search(text)
  dur = time.time() - start
  timing.append((t, dur))

timing.sort(key=lambda x: x[1])
print('%-30s %s' % ('Pattern', 'Time'))
for t, dur in timing:
  print('%-30s %0.3f' % (t, dur)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:29:36.500

这可能不是您正在寻找的那种答案，但我摆弄了几分钟，我能做的最好的事情就是：`'a{%d}' % (len(input)+1)`. 或者，换句话说，*将您的模式计算为最大量词长于 string 的已知长度的任何字符*。这显然只有在您可以访问输入字符串时才有效。它似乎也可以很好地扩展。我把 texts 变量取出来`texts = [os.urandom(20000) for x in range(20000)]`，在那种情况下`a{20001}`仍然打卡在`0.013`.

但是，我还没有计算获取字符串长度和生成模式的操作成本，这显然是你必须在野外处理的。

更新脚本：

```
import os
import re
import time

tests = [
  r'\0(?<!\0)',
  r'\0',
  r'x^',
  r'a{2001}',
  r'a(?<!a)',
  r'b(?<!b)',
  r'\Za',
  r'\Zb',
  r'$a',
  r'$b'
]
texts = [os.urandom(2000) for x in range(20000)]
flag = 0

for t in tests:
    pat = re.compile(t)
    start = time.time()
    for text in texts:
        if pat.search(text):
            print('%-30s %10s' % (t, "FAILED"))
            flag = 1
            break
    if flag == 0:
        dur = time.time() - start
        print('%-30s %0.3f' % (t, dur))
    else:
        flag = 0 
```

基准：

```
\0(?<!\0)                      0.058
\0                                 FAILED
x^                             0.055
a{2001}                        0.022
a(?<!a)                        0.060
b(?<!b)                        0.073
\Za                            0.798
\Zb                            0.797
$a                             0.757
$b                             0.767 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:57:49.147

`(?!)`通常我们使用直接失败的简短方便。

如果你想更明确 Perl/PCRE可以使用`(*FAIL)`or动词。`(*F)`

# python - 需要使用 gae python 的装饰器登录。传递参数？

> ID：14535196
> 
> 赞同：2
> 
> 时间：2013-01-26T08:26:07.887
> 
> 标签：python, google-app-engine

我正在尝试使用 python gae 制作所需的登录装饰器。

```
import utils

def login_required(func):
    def check_login(self, *args, **kw):
        user_cookie = self.request.cookies.get("username")
        user_logged_in = False
        if user_cookie and utils.check_user_login("username"):
            username = user_cookie.split('|')[0]
            user_logged_in = True
            return func(self, *args, **kw)
        else:
            self.redirect('/login') 

    return check_login

class Handler(webapp2.RequestHandler):
    @login_required
    def render_with_login(self, template, template_values={}):
        self.render(template, template_values) 
```

我想将装饰器中的用户名和 user_logged_in 值传递给模板。有可能这样做吗？是的，我应该如何修改上面的代码？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:35:55.873

我相信您遇到的问题是可变范围。user_logged_in 和 username 对于您的 check_login 是本地的，并在返回新的 render_with_login 函数之前执行，然后再执行。

我认为您最好的选择可能是通过更改将您的用户名和 user_logged_in 作为关键字参数传递给您的 render_with_login 函数：

```
 return func(self, *args, **kwargs) 
```

到

```
 return func(self, username=username, user_logged_in=user_logged_in, *args, **kwargs) 
```

顺便说一句，我不是 python 专家，所以我对范围界定部分并不肯定，但这是我最好的猜测。无论如何，这很容易测试。

# php - 将代理与 file_get_contents 一起使用

> ID：14535197
> 
> 赞同：5
> 
> 时间：2013-01-26T08:26:39.113
> 
> 标签：php, proxy, file-get-contents

我正在从一个网站（比如 x.com）获取我的应用程序的数据。我使用 php 函数 file_get_contents() 来获取数据。可以肯定的是，我的服务器的 ip 地址将显示在 x.com 的日志中。有没有办法在不使用代理的情况下隐藏我的服务器的 IP？

**如果我有代理，如何将它与 file_get_contents() 一起使用**？

我需要在 HTTP POST 和 HTTP GET 方法中发送请求

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-26T08:46:50.237

test.php 使用[http://ifconfig.me/ip](http://ifconfig.me/ip)

从[http://www.php.net/manual/en/function.file-get-contents.php修改的代码](http://www.php.net/manual/en/function.file-get-contents.php)

```
<?php

// Create a stream
$opts = array(
        'http'=>array(
            'method'=>"GET",
            'header'=>"Accept-language: en\r\n" .
            "Cookie: foo=bar\r\n",
            'proxy' => 'tcp://221.176.14.72:80',
            )
);

$context = stream_context_create($opts);

// Open the file using the HTTP headers set above
$file = file_get_contents('http://ifconfig.me/ip', false, $context);

var_dump($file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T23:31:40.893

绝对同意farmer1992。

对于任何`file_get_contents`对 SSL + 代理有问题的人，PHP 的 stream_context_create 存在一个已知错误：

[https://bugs.php.net/bug.php?id=63519](https://bugs.php.net/bug.php?id=63519)

幸运的是，解决方法很简单。基本上，上下文创建者在将“https”目标 URL 解析为代理和 SSL 配置时会感到困惑。您只需在 SSL 配置中设置**SNI_server_name ：**

```
$targetUrl = "https://something.com";
$sniServer = parse_url($targetUrl, PHP_URL_HOST);
$params = array('your'=>'post','params'=>'here');
$ctxConfig = array(
    'http' => array(
        'method' => 'POST',
        'header'  => 'Content-type: application/x-www-form-urlencoded'."\r\n",
        'content' => http_build_query($params),
        'proxy' => 'tcp://12.34.56.78:3128',
        'request_fulluri' => true
    ),
    'ssl' => array( 
        'SNI_enabled' => true,
        'SNI_server_name' => $sniServer
    )
);
$context = stream_context_create($ctxConfig);
file_get_contents($targetUrl,false,$context) 
```

希望这可以节省一些时间！

# java - 创建所需内存大小的文件

> ID：14535199
> 
> 赞同：0
> 
> 时间：2013-01-26T08:26:47.467
> 
> 标签：java, arrays, file-io, size

> **可能重复：**
> [在 Java 中创建具有给定大小的文件](https://stackoverflow.com/questions/245251/create-file-with-given-size-in-java)

说，我想创建一个大小为 1KB 的文件，这种方法可行吗？我创建了一个类似的 java 数组

```
char[] s = new char[1024]; //1KByte 
```

并使用写入器将其写入新创建的 *.txt 文件，文件的大小会精确到 1Kb 吗？如果没有，我应该如何创建所需大小的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:44:42.663

Java`char`类型为 16 位长，[OutputStreamWriter](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStreamWriter.html)对象是面向字符串的，而不是面向字节的。根据[writer 的输出编码](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStreamWriter.html#OutputStreamWriter%28java.io.OutputStream,%20java.nio.charset.Charset%29)，您可以获得例如 2 KB 的文件，或者甚至是在字符集上无法预测的内容，每个字符的字节数是可变的。

您最好直接使用[OutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html)，或者在循环中使用 a`byte[]`或使用[write(int)](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#write%28int%29)。这将保证你得到你所要求的。

# javascript - IE8的jQuery问题

> ID：14535205
> 
> 赞同：3
> 
> 时间：2013-01-26T08:27:52.797
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8, cross-browser

作为学习 jQuery 的一个步骤，我正在尝试创建数独，其中我在 div 块中生成了从 1 到 89 的数字（留下 10 个可整除的数字）。我的代码在 Google chrome 中运行良好，但 IE8 生成的 div id 不同。

请检查这个**[小提琴](http://jsfiddle.net/venkateshwar/Mwb2E/3/)**

我非常怀疑这个错误一定是因为 jQuery 的某些方法不兼容。问题可能在以下步骤中：

```
var lastNumId = parseInt(_idGen.toString().substr(-1), 10);
var secondLastNumId = parseInt(_idGen.toString().charAt(_idGen.length - 2), 10); 
```

在上面做同样的事情时，我使用了不同的技术，因为如果我这样做，那么它在 Chrome 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:41:52.837

`substr`IE 直到版本 9 才支持使用负索引。

只需使用模运算符即可获取数字的最后一位。这也适用于 IE8：

```
var lastNumId = _idGen % 10; 
```

# ffmpeg - 在 cPanel 上安装 FFMPEG

> ID：14535206
> 
> 赞同：2
> 
> 时间：2013-01-26T08:27:54.010
> 
> 标签：ffmpeg, cpanel

我已经在 cPanel 上安装了 cumulus 视频脚本，但现在无法上传视频。这是我收到的错误：

> 发现以下错误。请更正它们并重试。
> 
> *   FFMPEG 的路径无效

我已将“ffmpeginstaller.7.4.tar.gz”上传到我域的公共根目录，并已解压缩文件。但是，它仍然给出 FFMPEG 路径无效的错误。

我尝试将“adtube.run-time.co.za/ffmpeginstaller.7.4.tar.gz”的目录作为 ffmpeg 路径放在 cumulus 脚本管理面板设置中，但仍然没有运气。

这是[我的网站](http://www.adtube.run-time.co.za)。

请有人能指出我做错了什么的正确方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:35:35.470

FFMPEG 功能应安装在您的托管服务器中。如果要将其安装到服务器中，则需要 root 访问权限。如果您在专用/VPS 服务器中，则可以使用 root 安装它。在共享主机的情况下，您需要联系您的主机提供商安装[FFMPEG](http://hioxindia.com/ffmpeg-hosting.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:19:43.660

您必须使用具有 root 权限的 VPS 或专用服务器来安装 FFMPEG，这是安装 ffmpeg 的一个方向[http://help.digipower.vn/questions/139/How+to+Install+ffmpeg](http://help.digipower.vn/questions/139/How+to+Install+ffmpeg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T06:48:40.310

为 Cpanel 和 Centos 服务器安装 ffmpeg。（此时）

[http://forums.cpanel.net/f5/ffmpeg-318681.html](http://forums.cpanel.net/f5/ffmpeg-318681.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-22T18:25:12.597

您可以从这里使用 FFMPEG 静态构建 [https://johnvansickle.com/ffmpeg/](https://johnvansickle.com/ffmpeg/)

# php - 更新和读取事件之间的Mysql同步

> ID：14535208
> 
> 赞同：1
> 
> 时间：2013-01-26T08:28:07.157
> 
> 标签：php, mysql, yii

我在一个传感器项目中工作，其中许多传感器输出存储在 mysql 表中的数据。我正在使用 highcharts 来可视化这些数据。

我的问题是，当我使用实时模式时，每秒对我的数据库进行一次 ajax 调用，由于 ajax 调用仅获取最新的数据，因此未显示某些数据，并且某些点在我推送数据的时间之间默认同步来自传感器以及使用 ajax 获取它们的时间。我尝试手动同步，但失败了。

我在问是否有一个参数可以添加到我的 sql 查询中以仅获取尚未读取的数据，即使我在一秒钟内推送 3 个数据并在一秒钟内进行 ajax 调用，我也只能得到未读取的数据不是最新的。

我不知道这个解决方案是否真的存在，而且我对 php 和 mysql 还很陌生，我只将它们用于研究目的，我需要最简单和最小的解决方案！

EDITI:: 使用 last_point_id 和 last_point_info 创建新表 last_point

我正在使用 yii 框架，我无法使用 yii 库进行更新查询，所以我使用了这段代码

```
$modelSensor = SensorInfo2::model()->findBySql('SELECT * FROM information_sensors  
         where sensors_id= "'.$s['sensors_id'].'"  ; ');    

   $sResult = array(intval($modelSensor->information_time ),intval($modelSensor-

                                                        >information_value ));

        foreach ($modelSensor as $up) // for each value that I get from previous query 
                                       //   I want to use it to  
                                        //    update  last_point table

          {

        $connection = yii::app()->db;

         $sql = 'UPDATE last_point  SET last_point_info = 
         "'.$up['information_time'].'"' ;

         $command=$connection->createCommand($sql);
         $command->execute();

         }

        $json = CJSON::encode($sResult);

            echo $json ;

            Yii::app()->end(); 
```

对于我的 ajax 查询没有问题，我仍然得到我的数据，但是另一个表中的 last_point_info 行变为零！任何的想法 ？这两个表应该如何连接？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:54:27.787

您需要保留最后一个点的最后检索时间。您可以将其保存在内存变量中，或者如果您愿意，可以将其保存在数据库表中以持久保存它。假设您将 lastRetrievedTime 保存在另一个名为 lastPoint 的表中。

然后在最后一个点之后检索点，您需要像这样的查询 smtg

选择 point_id、point_name、point_time FROM sensors_info、lastPoint WHERE point_time > lastPoint.lastRetrievedTime ORDER BY point_time ASC LIMIT 3

此查询会将您在应用程序中检索到的最后一个点之后收集的前 3 个点变为您。如果您删除该`LIMIT`选项，它将返回您在最后一个检索点之后检索到的所有点。检索最后一个点后，您只需要更新 lastPoint 表，以便它再次将 lastRetrieved 时间保留在其记录中。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:40:52.767

我使用了 2 个 cdbcreteria 一个来获取条件，另一个使用第一个 cdbcreteria 作为条件来获取[mydata](https://stackoverflow.com/questions/14763774/cdbcriteria-condition-from-another-cdbcriteria)

最后我用这个代码用foreach语句更新另一个表中的时间

```
foreach ($sensors as $sensor)  {
 $lastPointId = 1;  
 $lastPoint = LastPoint::model()->findByPk($lastPointId);
 $lastPoint->last_point_info = $sensor->information_time;
 if ( ! $lastPoint->save()) {
throw new CException('Unable to save last point.');
}
} 
```

# c - 从此示例代码中获取 libev 远程 IP 地址？

> ID：14535214
> 
> 赞同：0
> 
> 时间：2013-01-26T08:29:04.260
> 
> 标签：c, libevent, libev

我正在尝试从以下链接学习 libevent/libev（在本例中为 libev）：http: [//www.ibm.com/developerworks/aix/library/au-libev/](http://www.ibm.com/developerworks/aix/library/au-libev/)

我想知道如何找出远程 IP 地址是什么，以便我可以构建自己的 DHT。

我猜它与**传入**的结构有关，但我只是不知道。

这是使用传入变量的回调代码，其余代码请单击上面的链接。

```
void buf_read_callback(struct bufferevent *incoming,
                       void *arg)
{
  struct evbuffer *evreturn;
  char *req;

  req = evbuffer_readline(incoming->input);
  if (req == NULL)
    return;

  evreturn = evbuffer_new();
  evbuffer_add_printf(evreturn,"You said %s\n",req);
  bufferevent_write_buffer(incoming,evreturn);
  evbuffer_free(evreturn);
  free(req);
} 
```

基本上，示例代码提供了一个由 libev 事件驱动的“服务器”，您可以通过远程登录服务器 ip:port 对连接到服务器，它只会回显您对它说的所有内容——请注意“您说 % s\n"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:36:34.480

我会在调用时存储远程地址`accept()`，然后将其与新连接相关联。但是，您也可以只[`getpeername()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/getpeername.html)在回调中使用。libev 对此没有什么特别之处，只需获取 FD 编号并像在 C 中一样进行网络编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T10:14:55.673

有例子：

```
struct sockaddr_in ip_adr_get;
int ip_adr_len;

ip_adr_len = sizeof(ip_adr_get);
getpeername(fd, &ip_adr_get, &ip_adr_len);

printf("IP address is: %s\n", inet_ntoa(ip_adr_get.sin_addr));
printf("Port is: %d\n", (int) ntohs(ip_adr_get.sin_port)); 
```

# php - json_encode 替换数字的特定字符串（对于 flot.js）

> ID：14535216
> 
> 赞同：2
> 
> 时间：2013-01-26T08:29:41.840
> 
> 标签：php, javascript, jquery, mysql, flot

嗨，我已经对此进行了广泛的搜索，并在很多方面进行了调整，但我就是无法做到正确。

我的目标是从反馈表中检索 mysql 数据并绘制一个 flot.js 图表。到目前为止，我可以用这个检索数据：

```
$query = "SELECT flavor,  COUNT(flavor) FROM $tbl_name GROUP BY flavor";
$result = mysql_query($query);  

while($rows = mysql_fetch_array($result))
{
$dataset1[] = array($rows['flavor'],$rows['COUNT(flavor)']);
} 
```

这会检索风味评级（优秀、好、平均或差）并计算每个在反馈中使用的次数，数组如下所示：

```
[["average","1"],["bad","1"],["excellent","1"],["good","2"]] 
```

flot.js 需要我的 x,y 值是数字，所以当我调用 $dataset1 时，我设法使用 JSON_NUMERIC_CHECK 将数值更改为整数，所以现在它看起来像这样：

```
[["average",1],["bad",1],["excellent",1],["good",2]] 
```

我不知道如何将单词“优秀、好、平均和坏”转换为简单的数值，例如：单词“优秀”应该是 1，“好”应该是 2 等等，所以我的浮点数据输出像：

```
[[3,1],[4,1],[1,1],[2,2]] 
```

这是我的浮动 javascript：

```
$(function () {

$.plot(
   $("#graph"),
   [
    {
      label: "Flavor",
      data: <?php echo json_encode($dataset1, JSON_NUMERIC_CHECK); ?>,
      bars: {
        show: true,
        barWidth: 0.5,
        align: "center"
      }   
    }
 ],
 {
   xaxis: {
     ticks: [
       [1, "excellent"],
       [2, "good"],
       [3, "average"],
       [4, "bad"]
     ]
   }   
 }
); 
```

});

有没有人遇到过这样的事情？我以错误的方式接近它吗？任何帮助将不胜感激。

我也研究了很多，尽量不要重复发帖，如果已经回答，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:37:47.080

在追加到数组之前替换值...

```
while($rows = mysql_fetch_array($result))
{
    switch ($rows['flavor']) {
        case 'excellent':
            $number = 1;
            break;
        case 'good':
            $number = 2;
            break;
        case 'average':
            $number = 3;
            break;
        case 'bad':
            $number = 4;
    }
    $dataset1[] = array($number, $rows['COUNT(flavor)']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:32:20.103

你的问题不是你想的那样；`json_encode()`试图通过保留原始 PHP 数据类型来做正确的事情，而从 MySQL 数据库中出来的数据是字符串。

想要数字？找到这个位：

```
$dataset1[] = array($rows['flavor'],$rows['COUNT(flavor)']); 
```

并将其更改为：

```
$dataset1[] = array($rows['flavor'],(int)$rows['COUNT(flavor)']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T20:04:41.717

我认为最好在 javascript 中对其进行排序，这样您就不会`flavors to integers`在两个位置对映射进行硬编码：

```
dataForFlot = [];
ticksForFlot = [];

flavorToIntMap = {'excellent':1, 'good':2, 'average':3, 'bad':4}; // this is our data to tick mapping
originalData = [["average",1],["bad",1],["excellent",1],["good",2]]; // from your PHP

$.each(originalData, function(){ dataForFlot.push([flavorToIntMap[this[0]],this[1]]);});// convert the data to how flot wants it
$.each(flavorToIntMap, function(k,v){ticksForFlot.push([v,k]);}); // convert our mapping to the how flot wants the ticks 
```

# c# - 查找表匹配的最佳方法

> ID：14535218
> 
> 赞同：0
> 
> 时间：2013-01-26T08:30:12.777
> 
> 标签：c#, match, keyword

我需要一种基于多个关键字在对象列表中查找匹配行的方法。在下面的代码示例中，FindID() 函数是我需要实现的函数。

规则是：

1.  表中的某些行以 * 作为值（通配符），这意味着它们将匹配任何值。
2.  匹配的优先级是从左到右（即匹配左侧的值更重要）

一些例子：

`FindID("John", "Black", "Brown");` - 应该返回 1，完全匹配

`FindID("John", "Red", "Green");` - 应该返回 5（不是 7），匹配 "John" 和其他两个通配符 (*)

`FindID("John", "Red", "Brown");` - 应该返回 6，匹配 "John" 和 "Brown" 以及一个通配符

`FindID("Brian", "Grey", "Grey");` - 应该返回 8，匹配三个通配符

下面的代码是完整的，可以执行。

有谁知道这样做的最佳方法？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TableScan
{
    class Program
    {
        public static TableClass _MyTable = new TableClass();

        public class TableRow
        {
            public int ID;
            public string Name;
            public string Hair;
            public string Eyes;

            public TableRow(int _ID, string _Name, string _Hair, string _Eyes)
            {
                ID = _ID;
                Name = _Name;
                Hair = _Hair;
                Eyes = _Eyes;
            }
        }

        public class TableClass
        {
            public List<TableRow> Table = new List<TableRow>();
        }

        static void Main(string[] args)
        {
            // ID       Name        Hair        Eyes
            // 1        John        Black       Brown
            // 2        Paul        Brown       Green
            // 3        Ringo       Blond       Blue
            // 4        George      Red         Blue
            // 5        John        *           *
            // 6        John        *           Brown
            // 7        *           Red         *
            // 8        *           *           *
            // 9        Paul        *           *

            CreateTable();

            ShowTable();

            FindID("John", "Black", "Brown");  // should return 1, complete match

            FindID("John", "Red", "Green");  // should return 5 (not 7), matched on "John" and the other two wildcards (*)

            FindID("John", "Red", "Brown");  // should return 6, matched on "John" and "Brown" and one wildcard

            FindID("Brian", "Grey", "Grey");  // should return 8, matched on three wildcard

            while (Console.ReadKey().Key == 0) { }
        }

        static int FindID(string _Name, string _Hair, string _Eyes)
        {
            // needs to be implemented

            return 0;
        }

        static void CreateTable()
        {
            _MyTable.Table.Add(new TableRow(1, "John", "Black", "Brown"));
            _MyTable.Table.Add(new TableRow(2, "Paul", "Brown", "Green"));
            _MyTable.Table.Add(new TableRow(3, "Ringo", "Blond", "Blue"));
            _MyTable.Table.Add(new TableRow(4, "George", "Red", "Blue"));
            _MyTable.Table.Add(new TableRow(5, "John", "*", "*"));
            _MyTable.Table.Add(new TableRow(6, "John", "*", "Brown"));
            _MyTable.Table.Add(new TableRow(7, "*", "Red", "*"));
            _MyTable.Table.Add(new TableRow(8, "*", "*", "*"));
            _MyTable.Table.Add(new TableRow(9, "Paul", "*", "*"));
        }

        static void ShowTable()
        {
            foreach(TableRow _TableRow in _MyTable.Table)
            {
                Console.WriteLine("{0} {1} {2} {3}", _TableRow.ID, _TableRow.Name, _TableRow.Hair, _TableRow.Eyes);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:47:33.397

好吧，今晚已经死了，这是基于评论的解决方案，请参见[http://ideone.com/rR46Ws](http://ideone.com/rR46Ws)

```
static bool match(TableRow row, string _Name, string _Hair, string _Eyes)
        {
                return (row.Name == _Name || row.Name == "*") && (row.Hair == _Hair || row.Hair == "*") && (row.Eyes == _Eyes || row.Eyes == "*");
        }

        static int score(TableRow row)
        {
                //can assume these already "match"
                var score = 0;
                score +=  row.Name == "*" ? 1000 : 2000; 
                score +=  row.Hair == "*" ? 100 : 200; 
                score +=  row.Eyes == "*" ? 10 : 20; 
                return score;
        }

        static int FindID(string _Name, string _Hair, string _Eyes)
        {

            var s = from row in _MyTable.Table
                        where match(row, _Name, _Hair, _Eyes)
                        orderby score(row) descending
                        select row;

            var match = s.FirstOrDefault();
            if(match != null) return match.ID;
            return -1; //i guess?
        } 
```

# java - Java：如何删除两个字符串之间第一次出现的匹配子字符串？

> ID：14535221
> 
> 赞同：8
> 
> 时间：2013-01-26T08:30:28.270
> 
> 标签：java, regex

如果我有两个字符串..说

```
string1="Hello dear c'Lint and dear Bob" 
```

和

```
string2="dear" 
```

我想**比较字符串**并**删除**第一次出现的匹配子字符串..
*上述字符串对的结果是：*

`Hello c'Lint and dear Bob`

这是我编写的代码，它接受输入并返回匹配的出现：

```
System.out.println("Enter your regex: ");
BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));

String RegEx = bufferRead.readLine();
Pattern pattern = Pattern.compile(RegEx);
System.out.println("Enter input string to search: ");
bufferRead = new BufferedReader(new InputStreamReader(System.in));
Matcher matcher = pattern.matcher(bufferRead.readLine());

boolean found = false;
while (matcher.find()) {
    System.out.println("I found the text:\"" + matcher.group() +
            "\" starting at index \'" +
            matcher.start() + 
            "\' and ending at index \'" + 
            matcher.end() + 
            "\'");
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T08:34:58.640

您可以*使用*：

```
string result = string1.replaceFirst(Pattern.quote(string2), ""); 
```

或者您可以完全避免使用正则表达式：

```
int index = string1.indexOf(string2);
if (index == -1)
{
    // Not found. What do you want to do?
}
else
{
    String result = string1.substring(0, index) + 
                    string1.substring(index + string2.length());
} 
```

`index`您可以使用并且`string2.length()`非常轻松地在此处报告该地区。当然，如果您*希望*能够匹配正则表达式模式，您应该使用它们。

编辑：正如另一个答案中所述，这两个都`"dear"`将从`"and_dear_Bob"`离开中删除`"and__Bob"`- 下划线代表空格。所以你最终会在单词之间有两个空格。它也不强制匹配是一个完整的单词。它完全符合您的描述，但它并没有给您显然想要的结果。

**编辑：** 代码输出的首选：`Hello c'Lint and dear Bob` Hello 和 c'Lint 在中间有两个空格字符。虽然这段代码：

```
string result = string1.replaceFirst(Pattern.quote(string2+" "), "")); 
```

摆脱额外的空白字符。

# c# - 在 OpenAuth.RequestAuthentication 中添加 Facebook 权限

> ID：14535229
> 
> 赞同：1
> 
> 时间：2013-01-26T08:32:12.687
> 
> 标签：c#, asp.net, .net, facebook, oauth

我在 Visual Studio 中使用 Asp.Net 4.5 为我的网站实现 Facebook 登录。特别是，我`Microsoft.AspNet.Membership.OpenAuth`在 .Net 框架中使用和相关的类。

我可以毫无问题地从 Facebook 检索基本信息；但是，我需要为用户的更多 Facebook 信息请求权限。

为了清楚起见，以下方法`OpenAuthProviders.asxc.cs`将用户引导到 Facebook 并弹出 Facebook 对话框询问用户权限：

```
OpenAuth.RequestAuthentication(provider, redirectUrl); 
```

此函数重定向到以下格式的 URL：

```
https://www.facebook.com/dialog/oauth?client_id=xxx&redirect_uri=xxx&__provider__=facebook&__sid__=xxx&scope=email 
```

我的问题是，目前 URL 中的范围始终是`email`. 我们如何通过`OpenAuth.RequestAuthentication`函数向范围添加更多内容，例如用户生日、用户图片 URL？

如果我必须编写一个新的更深层次的函数来直接与 Facebook 对话来实现这一点，那么为什么我首先使用这个 OpenAuth 类似乎有点违反直觉。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T21:44:54.567

首先，如果您使用的是 Visual Studio 2012，那么在构建您的网站时会内置参考架构来处理 Facebook OAuth。它广泛建议通过 Nuget 添加 Facebook C# SDK 以启用对 FacebookClient 的调用。

其次，用户名并不总是电子邮件地址。Facebook 允许用户使用他们的手机号码创建一个帐户，而无需电子邮件地址。因此，不要依赖此字段来始终为您提供电子邮件地址。相反，您可以调用 Facebook OAuth 客户端为您获取此信息。

了解第一次调用 Facebook Oauth 以获取反馈至关重要，它只会返回以下变量：

*   id（可以是邮箱或手机）
*   名称（用户的全名）
*   链接（链接到他们在 Facebook 上的个人资料页面）
*   性别（男性或女性..这里的选择很少）
*   访问令牌

获得访问令牌后，您可以使用它来调用其他变量。要查看您可以通过 Facebook 客户端访问的内容，请查看[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/) 以获取各种变量的完整列表。（新手警告：我还没有弄清楚如何调用所有这些，但重要的部分很容易。）

Scott MitzFacken 提供了一篇关于在 MVC 网站中使用 OAuth 提供程序的优秀教程，他将带您完成每个步骤，除了最重要的一步：使用访问令牌取出 Extradata，然后将其放入您的数据库。按照他的教程进行操作，直到您将此代码添加到 ExternalLoginCallback 方法中：

```
 if (result.ExtraData.Keys.Contains("accesstoken"))
{
    Session["facebooktoken"] = result.ExtraData["accesstoken"];
} 
```

好的，您已经以正确的方法获得了访问令牌。现在从 Facebook 获取数据并进入您的应用程序。在检查用户是否已经存在之后，我修改了 ExternalLoginConfirmation 方法：

```
 // Check if user already exists
                if (user == null)
                {

                    var client = new Facebook.FacebookClient(Session["facebooktoken"].ToString()); 
                    dynamic response = client.Get("me", new { fields = "first_name, last_name, email" });
                    model.FirstName = response["first_name"];
                    model.LastName = response["last_name"];
                    model.EmailAddy = response["email"];

                    // Insert name into the profile table
                    db.UserProfiles.Add(new UserProfile { UserName = model.UserName, FullName = model.FullName, Gender = model.Gender, FirstName= model.FirstName, LastName =model.LastName, EmailAddy=model.EmailAddy});
                    db.SaveChanges(); 
```

1.  这假设您已将 Facebook C# SDK 应用于您的项目。
2.  Facebook 字段是在一组“”中请求的，用逗号分隔。
3.  在我的示例中，model.XXX 指的是用户配置文件字段。
4.  然后我将用户配置文件字段转换为 response["XXX"] 字符串。
5.  由于 Facebook Oauth 客户端，保存用户配置文件记录时，还会保存其他字段。

我不确定你是否还需要这个答案......希望不是。对于像我这样一整天都在努力解决这个问题的菜鸟，我希望这个答案能对这个问题有所了解

干杯，祝你好运！

[标签：c#] [标签：facebook] [标签：dotnetopenoauth]

# php - 如何分别循环多个SELECT

> ID：14535235
> 
> 赞同：0
> 
> 时间：2013-01-26T08:33:09.353
> 
> 标签：php

我有两个查询，我想在单独的 while 循环中得到结果，查询工作正常，但我不知道如何在 while 循环中分离结果。

**php**

```
$query = "
SELECT 1 as query, title FROM $tablename WHERE category='category1' LIMIT 10
UNION
SELECT 2 as query, title FROM $tablename WHERE category='category2' LIMIT 10
";

$result = mysqli_query($connection, $query) or trigger_error(mysqli_error($connection), E_USER_ERROR);

while($row = mysqli_fetch_assoc($result[1])){
    echo $row['title'].'<br />';
}
while($row = mysqli_fetch_assoc($result[2])){
    echo $row['title'].'<br />';
} 
```

请查看并建议任何可能的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:43:01.540

```
$query = "
SELECT 1 as query, title FROM $tablename WHERE category='category1 LIMIT 10'
UNION
SELECT 2 as query, title FROM $tablename WHERE category='category2 LIMIT 10'
";

$result = mysqli_query($connection, $query) or trigger_error(mysqli_error($connection), E_USER_ERROR);

$qResult1 = array();
$qResult2 = array();

while($row = $result->fetch_assoc()){
    if($row['query'] == 1) $qResult1[] = $row;
    else $qResult2[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:47:56.907

为什么不分开两个查询？

```
$query1 = "SELECT title FROM $tablename WHERE category='category1' LIMIT 10";

$result = mysqli_query($connection, $query1) or trigger_error(mysqli_error($connection), E_USER_ERROR);

while($row = mysqli_fetch_assoc($result1)){
    echo $row['title'].'<br />';
}

$query2 = "SELECT title FROM $tablename WHERE category='category2' LIMIT 10";
$result = mysqli_query($connection, $query2) or trigger_error(mysqli_error($connection), E_USER_ERROR);

while($row = mysqli_fetch_assoc($result2)){
    echo $row['title'].'<br />';
} 
```

或者您可以循环类别。

```
$catgories = array('category1', 'category2');

foreach($categories as $cat){
    $query = "SELECT title FROM $tablename WHERE category = {$cat} LIMIT 10";
    $result = mysqli_query($connection, $query) or trigger_error(mysqli_error($connection), E_USER_ERROR);
    echo $cat.'<br />'
    while($row = mysqli_fetch_assoc($result)){
        echo $row['title'].'<br />';
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T08:36:43.430

```
$query = "
  SELECT 1 as query, title FROM $tablename WHERE category='category1' LIMIT 10
  UNION
  SELECT 2 as query, title FROM $tablename WHERE category='category2' LIMIT 10
";

$result = mysqli_query($connection, $query) or trigger_error(mysqli_error($connection), E_USER_ERROR);

while($row = mysqli_fetch_assoc($result)){
    echo $row['title'].'<br />';
} 
```

而已。while 循环的每次迭代都会检索下一个结果。

# qt - QLineEdit::textEdited() 等效于 QTextEdit？

> ID：14535240
> 
> 赞同：5
> 
> 时间：2013-01-26T08:33:33.120
> 
> 标签：qt, qt4, qt5, qtextedit, qlineedit

在`QLineEdit`中，有一个`textEdit()`信号，仅在用户更改文本时发出，而不是在您调用时发出`setText()`，

那么 中的等价物是`QTextEdit`什么？我只看到一个`textChanged()`信号，文档说明只要文本文档更改就会发出它。

**编辑**

我想实现一个自动保存功能，当然还有 QTimer，

因此，当您开始编辑文档时，计时器启动，当超时时，我将文本保存在小部件中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T14:59:27.777

您可以`QTextEdit`在自己插入/修改内容时阻止小部件的信号，然后在完成后释放块。这样做只会在用户更改内容时发出信号。

```
bool QObject::blockSignals(bool block) 
```

# php - 如何在 PHP 中使用 fopen 从外部 html 读取自定义文本

> ID：14535241
> 
> 赞同：1
> 
> 时间：2013-01-26T08:33:50.273
> 
> 标签：php, html, fopen

我想从外部网站读取指定的单词，我有一个关于手机的网站，我想从数据库中为所有型号实施价格，所以在我的帮助下，`fopen()` 我`website.com/nokia5500.html`将从网站源打开一个类似的 etxternal 网站以获取价格（外部网站是一个购物网站）提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:00:44.800

您可以尝试使用[curl](http://cn2.php.net/manual/zh/book.curl.php)，[file_get_content](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:17:39.090

您可以使用[cURL](http://php.net/manual/en/book.curl.php)或[file_get_content](http://php.net/manual/en/function.file-get-contents.php)来请求外部网站，正如星家所说。
然后，使用[QueryPath](http://querypath.org/)或[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)解析 HTML 文档并获取所需的特定文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:39:28.260

您可以使用 YQL：http: [//developer.yahoo.com/yql/](http://developer.yahoo.com/yql/) Yahoo! 查询语言

# javascript - parseInt 有什么问题？

> ID：14535242
> 
> 赞同：14
> 
> 时间：2013-01-26T08:33:53.440
> 
> 标签：javascript

> **可能重复：**
> [javascript - Array.map 和 parseInt](https://stackoverflow.com/questions/262427/javascript-array-map-and-parseint)

我偶然发现了以下代码片段：

```
> ['10','10','10','10','10'].map(parseInt);
[10, NaN, 2, 3, 4] 
```

这里发生了什么事？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T08:38:24.983

首先查阅[Array.prototype.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)的文档。关键是这一行：

> callback 使用三个参数调用：元素的值、元素**的索引**和被遍历的 Array 对象。

（强调我的）

然后检查[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)的文档：

> parseInt 函数将其第一个参数转换为字符串，对其进行解析，并返回一个整数或 NaN。如果不是 NaN，则返回值将是第一个参数的十进制整数表示形式，该参数采用指定基数（基数）中的数字。例如，基数 10 表示从十进制数、8 位八进制数、16 位十六进制数等转换。对于大于 10 的基数，字母表中的字母表示大于 9 的数字。例如，对于十六进制数（以 16 为基数），使用 A 到 F。

和：

> 如果 radix 未定义或为 0，JavaScript 假定如下：
> 
> *   如果输入字符串以“0x”或“0X”开头，则基数为 16（十六进制）。
>     
>     
> *   如果输入字符串以“0”开头，则基数为八（八进制）。这个特性是非标准的，一些实现故意不支持它（而是使用基数 10）。由于这个原因，在使用 parseInt 时总是指定一个基数。
>     
>     
> *   如果输入字符串以任何其他值开头，则基数为 10（十进制）。

所以第一个电话是：

```
parseInt('10',0, ['10','10',...]) // => 10 (because radix=0) 
```

第二个是：

```
parseInt('10',1, ['10','10',...]) // => NaN because radix is 1 
```

第三：

```
parseInt('10',2, ['10','10',...]) // => 2 because 10 in binary is the number "2" 
```

等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T08:39:03.007

来自[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Tricky_use_case)：

> parseInt 通常与一个参数一起使用，但需要两个。第二个是基数 对于回调函数，Array.prototype.map 传递 3 个参数：元素、索引、数组。 parseInt 忽略第三个参数，但不会忽略第二个，因此可能会造成混淆。

所以实际上你`parseInt`被传递了以下值：

```
// 1st run:
parseInt( '10', 0 );
// 2nd run:
parseInt( '10', 1 );
// etc. 
```

所以你每次都使用不同的基数，导致看到的结果。

# java - Java：允许工作线程杀死主线程

> ID：14535243
> 
> 赞同：0
> 
> 时间：2013-01-26T08:33:56.420
> 
> 标签：java, multithreading, concurrency

我正在编写一个简单的 HTTP 服务器，其中主线程循环`ServerSocket.accept`循环并将任何传入的套接字传递给工作线程，然后工作线程将处理它们并发送回响应。但是，我想在特殊情况下关闭整个服务器的关闭请求。我无法使用工作线程强制主线程跳出`accept`循环并终止。

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:37:47.317

您是否尝试过中断工作线程`workerThread.interrupt();`？

这应该会`accept`抛出一个`InterruptedException`，您可以捕获它，清理需要清理的内容并退出工作线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:23:45.017

您可能会想出 100 种 hacky 方法来做到这一点，但我只能在设计合理的应用程序中看到 2 种方法。

1.  这是处理代码的中断。

    ```
    while (acceptNextRequest()) {
        // Processing code
        if (shouldExitNow()) {
            break;
        }
        // More processing
    }
    // Proper exiting code 
    ```

2.  在接受下一个请求之前检查是否该退出：

    ```
    while (!shouldExitBeforeNextRequest() && acceptNextRequest()) {
        // Processing code
    }
    // Proper exiting code 
    ```

这两种解决方案都确保正确关闭所有连接、向所有应用程序关闭侦听器发出通知等。

如果您从 Web 应用程序执行 System.exit()，您将关闭整个 Web 服务器应用程序（Tomcat、JBoss 或任何用途），这通常不是您希望在应用程序中执行的操作。

如果您在容器中运行应用程序，请不要弄乱主线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T09:02:31.740

[就像在这个线程](https://stackoverflow.com/questions/2983835/how-can-i-interrupt-a-serversocket-accept-method)中提到的那样，您可以在服务器套接字上调用 close() ，这将导致在接受调用中出现异常。

# javascript - JavaScript 没有被调用

> ID：14535245
> 
> 赞同：0
> 
> 时间：2013-01-26T08:34:32.210
> 
> 标签：javascript, html

我有以下 JavaScript 代码。加载页面时不会调用它。甚至警报都没有显示； **moment.min.js**放在同一个文件夹中..

```
<script type='text/javascript' src="moment.min.js">
alert("Testing Hello...")
var mysql_date = '2013-01-25 10:00:00';
var date = moment(mysql_date , 'YYYY-MM-DD HH:mm:ss'); // new moment.js object.

// To display the date in a different format use:
var date_format1 = date.format('MMM, Do'); // Format here would be Jan, 25th
var date_format2 = date.format('MMMM, Do, YYYY'); // January, 25th, 2013
alert(date_format1);
alert(date_format2);
console.log(date_format1, date_format2);
</script> 
```

请让我知道为什么加载页面时未加载此脚本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:37:03.357

内容或 src

试试这个

```
<script type='text/javascript' src="moment.min.js">
</script>

<script>
alert("Testing Hello...")
var mysql_date = '2013-01-25 10:00:00';
var date = moment(mysql_date , 'YYYY-MM-DD HH:mm:ss'); // new moment.js object.

// To display the date in a different format use:
var date_format1 = date.format('MMM, Do'); // Format here would be Jan, 25th
var date_format2 = date.format('MMMM, Do, YYYY'); // January, 25th, 2013
alert(date_format1);
alert(date_format2);
console.log(date_format1, date_format2);
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T08:40:55.807

对于在页面上调用 JavaScript 并包含下面的 JavaScript 文件是解决方案

```
<script type='text/javascript' src="moment.min.js"> </script>
<script type='text/javascript'>
window.onload=function() {
  alert("Testing Hello...")
  var mysql_date = '2013-01-25 10:00:00';
  var date = moment(mysql_date , 'YYYY-MM-DD HH:mm:ss'); // new moment.js object.

  // To display the date in a different format use:
  var date_format1 = date.format('MMM, Do'); // Format here would be Jan, 25th
  var date_format2 = date.format('MMMM, Do, YYYY'); // January, 25th, 2013
  alert(date_format1);
  alert(date_format2);
  console.log(date_format1, date_format2);
};
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T08:38:43.800

`src`当您直接包含 javascript 时，为什么要包含属性？

将代码添加进去`moment.min.js`，然后写`<script src="moment.min.js"></script>`

**或者**

```
<script src='moment.min.js'></script>
<script>
alert("Testing Hello...")
var mysql_date = '2013-01-25 10:00:00';
var date = moment(mysql_date , 'YYYY-MM-DD HH:mm:ss'); // new moment.js object.

// To display the date in a different format use:
var date_format1 = date.format('MMM, Do'); // Format here would be Jan, 25th
var date_format2 = date.format('MMMM, Do, YYYY'); // January, 25th, 2013
alert(date_format1);
alert(date_format2);
console.log(date_format1, date_format2);
</script> 
```

# apache-karaf - 在 Karaf 中完成线程转储

> ID：14535247
> 
> 赞同：3
> 
> 时间：2013-01-26T08:35:14.770
> 
> 标签：apache-karaf

当我使用`dev:create-dump`时，转储中的线程堆栈不完整。是否可以将 Karaf 配置为：

1.  转储全栈？
2.  检测死锁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-13T14:09:01.300

`dev:create-dump`: 创建一个包含信息的存档

你真正需要的是：

`dev:dump-create`

这将在 $KARAF_HOME/ 中创建一个文件

在我的情况下，文件名就像 2015-04-13_140239.zip

[http://karaf.apache.org/manual/latest/developers-guide/developer-commands.html](http://karaf.apache.org/manual/latest/developers-guide/developer-commands.html)

zip 文件包含您需要的所有内容，而且不仅如此：

```
bundles.txt
environment.txt
features.txt
memory.txt
threads.txt 
```

# iphone - 在核心图形中绘制阴影很慢

> ID：14535257
> 
> 赞同：1
> 
> 时间：2013-01-26T08:36:34.290
> 
> 标签：iphone, ios, objective-c, ipad

我有以下代码在我的 UIView drawRect 上绘制内部阴影：

```
//add some inner shadow to the card box
    CGContextSaveGState(context);

    CGMutablePathRef cardPath = CGPathCreateMutable();
    CGPathAddRect(cardPath, NULL, CGRectInset(mainRect, -42, -42));
    CGPathAddPath(cardPath, NULL, mainPathRef);
    CGPathCloseSubpath(cardPath);

    // Add the visible paths as the clipping path to the context
    CGContextAddPath(context, mainPathRef);
    CGContextClip(context);

    // Now setup the shadow properties on the context
    UIColor *innerShadowColor = [UIColor colorWithWhite:133/255.f alpha:1.0];
    CGContextSetShadowWithColor(context, CGSizeMake(0.0f, 1.0f), 30.0f, [[UIColor orangeColor] CGColor]);

    // Now fill the rectangle, so the shadow gets drawn
    [innerShadowColor setFill];
    CGContextSaveGState(context);
    CGContextAddPath(context, cardPath);
    CGContextEOFillPath(context);
    CGContextRestoreGState(context);

    // Release the paths
    CGPathRelease(cardPath);

    CGContextRestoreGState(context);

    CGPathRelease(mainPathRef); 
```

问题是这真的很慢。有什么办法可以加快这段代码的速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:00:54.863

如果可能的话，我会在图像编辑器中创建阴影，将其保存为 png，然后根据需要调整大小和平铺。

另一个想法是使用[CALayer](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/shouldRasterize)`shouldRasterize`的属性。它将缓存绘图结果并在您的视图保持不变时使用它。在这种情况下，性能取决于您修改视图内容的频率。

# mysql - MySQL：服务器以错误的编码返回记录

> ID：14535259
> 
> 赞同：0
> 
> 时间：2013-01-26T08:36:42.970
> 
> 标签：mysql, encoding, collation

我有 cp1251_general_ci 编码的数据库（有一些历史原因）。一切都很完美，直到我换了一个主人。现在我遇到了一个问题。他们的服务器通过 utf-8 查询返回记录。我想解决这个问题，不要触摸 HTML 输出。所以我看到了这样的方式——强制服务器只在 cp1251_general_ci 中提供内容。我想重点是 MySQL 连接排序规则。如果是这样，我假设接下来的事情： 1\. 将当前数据库复制到指向 MySQL 连接排序规则 AS cp1251_general_ci。之后使用此数据库并删除源数据库。或 2\. 添加到数据库查询**COLLATION**。如果它是对的/错的，或者你有更好的方法，我会很高兴听到你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:55:42.980

谢谢大家的精彩回答！:) 为了解决这个问题，我做了自己的调查。这是一个解决方案：

```
mysql_query ("set character_set_client='cp1251'");
mysql_query ("set character_set_results='cp1251'");
mysql_query ("set collation_connection='cp1251_general_ci'"); 
```

所以重点是强制服务器在查询/回答期间设置正确的编码。现在它完美地工作了。

# c - 从堆栈基指针偏移的局部变量

> ID：14535266
> 
> 赞同：5
> 
> 时间：2013-01-26T08:37:03.727
> 
> 标签：c, assembly, x86

我正在尝试了解有关堆栈和基指针的更多信息。以下示例汇编代码来自 gcc 在 IA32 上编译的二进制文件的 objdump。

```
08048e0b <func_3>:
8048e0b:    55                      push   %ebp
8048e0c:    89 e5                   mov    %esp,%ebp
8048e0e:    83 ec 28                sub    $0x28,%esp
8048e11:    8d 45 f0                lea    -0x10(%ebp),%eax
8048e14:    89 44 24 0c             mov    %eax,0xc(%esp)
8048e18:    8d 45 f4                lea    -0xc(%ebp),%eax
8048e1b:    89 44 24 08             mov    %eax,0x8(%esp)
8048e1f:    c7 44 24 04 65 9b 04    movl   $0x8049b65,0x4(%esp) 
```

我知道基指针`%ebp`是用来引用函数参数和局部变量的。通常正偏移量是传递给函数的参数，负偏移量是局部变量？

上线`8048e18: 8d 45 f4 lea -0xc(%ebp),%eax`-0xc(%ebp) 指的是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T08:40:21.740

该函数的参数基于 (`%ebp) + (positive value)`在您的情况下，您有 1 个参数。

并且`(%ebp) - (positive value)`是局部变量，你有 2 个。

[见下图](http://www.unixwiz.net/techtips/win32-callconv-asm.html)：

![在此处输入图像描述](../Images/85072a3a542cd813c32f91405257718e.png)

您也可以阅读有关[调用约定](http://www.unixwiz.net/techtips/win32-callconv-asm.html)的信息。

# iphone - UIWebView 未使用 .xib 加载

> ID：14535270
> 
> 赞同：0
> 
> 时间：2013-01-26T08:37:43.670
> 
> 标签：iphone, ios, uiwebview

对于我的 iphone 应用程序，我正在设置一个`tabBarContoller`显示 webView ( `PDFViewController`) 的选项卡。

我遇到的问题是`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "PDFViewController" nib but the view outlet was not set.'`

好的，我可以在我的另一个带有情节提要的项目中设置这个 webView 没问题，所以我知道问题出在`nib`文件上。

在我的应用程序委托中，我设置了 VC（所以我可以将它放在`tabBarController`

```
PDFViewController *pdfVC = [[PDFViewController alloc] initWithNibName:nil bundle:nil];
  pdfVC.tabBarItem.image = [UIImage imageNamed:@"second"];

  NSArray *controllers = [NSArray arrayWithObjects:frontPageNavController, campusNavController, opinionNavController, sportsNavController, pdfVC, nil];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = controllers; 
```

在我的 .xib 中，我只设置了一个视图。

这是我的`PDFViewController.m`：

```
@implementation PDFViewController 

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
  self = [super initWithNibName:@"PDFViewController" bundle:nibBundleOrNil];
  if (self) {
    // Custom initialization
  }
  return self;
}

- (void)viewDidLoad
{
  [super viewDidLoad];

  UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,self.view.bounds.size.width,self.view.bounds.size.height)];

  NSURL *targetURL = [NSURL URLWithString:@"http://issuu.com/miamistudent/docs"];
  NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
  [webView loadRequest:request];

  [self.view addSubview:webView];
} 
```

知道什么可能导致此错误吗？我尝试在我的 PDFViewController.xib 中设置一个普通的 ViewController - 但这似乎没有任何帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:01:12.477

*   右键单击您的视图并将参考​​出口设置为您的文件所有者视图
*   否则转到您的目标-> 构建阶段-> 复制捆绑资源检查 .Xib 是否存在，如果不添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:01:24.643

在您的 nib 文件中，您必须将视图与视图控制器连接起来，因为 PDFViewController 需要视图。

# c# - n个连续整数的随机排列

> ID：14535274
> 
> 赞同：3
> 
> 时间：2013-01-26T08:37:54.450
> 
> 标签：c#, algorithm

> **可能重复：**
> [使用 Random 和 OrderBy 是否是一个好的随机播放算法？](https://stackoverflow.com/questions/1287567/is-using-random-and-orderby-a-good-shuffle-algorithm)

给定一个从0开始的n个连续数的整数数组，即

```
0,1,2,..n 
```

我希望随机生成一个数字排列，

说给定

```
0,1,2,3 
```

一个可能是`3,1,2,0`

如何轻松实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T09:13:16.013

首先创建一个所需大小的整数数组，并用不断增加的连续数字填充它；

```
int n = 10;
int[] array = new int[n + 1];
for (int i = 0; i <= n; i++)
{
    array[i] = i;
}
Shuffle(array); 
```

你可以使用 Knuth / Fisher-Yates shuffle

```
/// <summary>
/// Knuth shuffle
/// </summary>        
public void Shuffle(int[] array)
{
    Random random = new Random();
    int n = array.Count();
    while (n > 1)
    {
        n--;
        int i = random.Next(n + 1);
        int temp = array[i];
        array[i] = array[n];
        array[n] = temp;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-26T08:56:23.963

这是使用 LINQ 和随机生成器的简单方法。

```
int[] numbers = new int[] { 1,2,3,4,5,6,7,8,9 };

Random rnd = new Random();
int[] MyRandomNumbers = numbers.OrderBy(x => rnd.Next()).ToArray(); 
```

参考：[使用 .NET 随机化数组的最佳方法](https://stackoverflow.com/questions/108819/best-way-to-randomize-a-string-array-with-net)

# java - CWAC - 带有 ArrayAdapter 的 EndlessAdapter

> ID：14535275
> 
> 赞同：1
> 
> 时间：2013-01-26T08:37:58.453
> 
> 标签：java, android, commonsware-cwac, endlessadapter

每个人都过得怎么样，在过去的一周里，我一直在试图弄清楚用无限适配器包裹我的适配器到底意味着什么，但没有成功。我已经尝试了我所有有限的知识，到目前为止我正在输掉这场战斗。我已经在线阅读了几个示例，并阅读了无尽的适配器说明，但这并没有真正帮助。有人可以解释一下包装我的适配器的含义吗？

我的列表视图如下：

```
package com.bopbi.ui;

import java.sql.Date;
import java.text.SimpleDateFormat;
import java.util.ArrayList;

import com.bopbi.R;
import com.bopbi.model.LocationAdapter;
import com.bopbi.model.LocationList;
import com.bopbi.model.LocationModel;
import com.bopbi.model.PullToRefreshListView.OnRefreshListener;
import com.bopbi.util.RestClient;
import com.bopbi.model.PullToRefreshListView;
import com.bopbi.util.RestClient.RequestMethod;
import com.google.android.maps.GeoPoint;
import com.google.gson.Gson;

import android.app.ActionBar;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.SystemClock;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ListRest extends ListActivity {

LocationManager lm;
GeoPoint userLocation;

//static String[] TITLE;
//static String[] DESCRIPTION;

ArrayList<LocationModel> locationArray = null;
LocationAdapter locationAdapter;
LocationList list;

//PullToRefreshListView lv;
TextView loadingText;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayShowTitleEnabled(false);
  //  actionBar.show();
  //  actionBar.setDisplayShowHomeEnabled(true);

    setContentView(R.layout.activity_home);

   // lv = (PullToRefreshListView) findViewById(R.id.list);

    locationArray = new ArrayList<LocationModel>();
    locationAdapter = new LocationAdapter(ListRest.this, R.layout.dublet, locationArray);
    ((PullToRefreshListView) getListView()).onRefresh();

 //   lv.setTextFilterEnabled(true);
    setListAdapter(locationAdapter);
    //this.getListView().scrollTo(0,160);
    //this.getListView().scrollTo(0,0);
    // Set a listener to be invoked when the list should be refreshed.
    ((PullToRefreshListView) getListView()).setOnRefreshListener(new OnRefreshListener() {
        @Override
        public void onRefresh() {
            // Do work to refresh the list here.
            try {
                new LocationSync().execute("http://exposezvous.com/list.php");
            } catch(Exception e) {} 
        }
    });

        try {
            new LocationSync().execute("http://exposezvous.com/list.php");
        } catch(Exception e) {} 

}

private class LocationSync extends AsyncTask<String, Integer, LocationList> {

    @Override
    protected void onPreExecute() {

}   

    protected LocationList doInBackground(String... urls) {
        LocationList list = null;
        int count = urls.length;

        for (int i = 0; i < count; i++) {
            try {           
                // ntar diganti service
                RestClient client = new RestClient(urls[i]);

                try {
                    client.Execute(RequestMethod.GET);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                String json = client.getResponse();

                list = new Gson().fromJson(json, LocationList.class);

                //
            } catch(Exception e) {}
        }
        return list;
    }

    protected void onProgressUpdate(Integer... progress) {

    }

    protected void onPostExecute(LocationList loclist) {

        // Obtain MotionEvent object
        long downTime = SystemClock.uptimeMillis();
        long eventTime = SystemClock.uptimeMillis() + 100;
        float x = 1.0f;
        float y = 10.0f;
        // List of meta states found here: developer.android.com/reference/android/view/KeyEvent.html#getMetaState()
        int metaState = 0;
        MotionEvent motionEvent = MotionEvent.obtain(
            downTime, 
            eventTime, 
            MotionEvent.ACTION_MOVE, 
            x, 
            y, 
            metaState
        );  

        for(LocationModel lm : loclist.getLocations())
       {
     locationArray.add(lm);
        }
        locationAdapter.notifyDataSetChanged();
     // Call onRefreshComplete when the list has been refreshed.

   ((PullToRefreshListView) getListView()).onRefreshComplete();
    ((PullToRefreshListView) getListView()).onTouchEvent(motionEvent);

    ((PullToRefreshListView) getListView()).setLastUpdated("Last Updated on Jan 24, 2013 8:27 PM");
    }

}
} 
```

我的自定义适配器如下：

```
package com.bopbi.model;

import java.util.List;

import android.content.Context;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.bopbi.R;

public class LocationAdapter extends  ArrayAdapter<LocationModel> {

int resource;
String response;
Context context;
private LayoutInflater mInflater;
private final ImageDownloader imageDownloader = new ImageDownloader();
public int count;

public LocationAdapter(Context context, int resource,
        List<LocationModel> objects) {
    super(context, resource, objects);
    this.resource = resource;
    mInflater = LayoutInflater.from(context);
}

static class ViewHolder {
    TextView username;
    ImageView image;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    // Get the current location object
    LocationModel lm = (LocationModel) getItem(position);

    // Inflate the view
    if (convertView == null) {

        convertView = mInflater.inflate(R.layout.dublet, null);
        holder = new ViewHolder();

        holder.username = (TextView) convertView
                .findViewById(R.id.username);
        holder.image = (ImageView) convertView
                .findViewById(R.id.profilePic);

        // .findViewById(R.id.it_location_description);

        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.username.setText(lm.getName());
    //String url = "http://***********/small_profile_pic_white_bigger.jpg";

    ImageDownloader.Mode mode = ImageDownloader.Mode.CORRECT;
    imageDownloader.setMode(mode);
    imageDownloader.download(lm.getImage(), holder.image);
    return convertView;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:09:32.340

如果我理解正确，您正在尝试将 EndlessAdapter 与 LocationAdapter 一起使用。

Commonsware 的 EndlessAdapter的[文档](https://github.com/commonsguy/cwac-endless)提到 EndlessAdapter 提供的构造函数之一将现有的 ListAdapter 作为其参数。包装适配器涉及将 LocationAdapter 作为参数传递给 EndlessAdapter 的子类。

```
private class EndlessLocationAdapter extends EndlessAdapter
{
  public EndlessLocationAdapter(LocationAdapter adapter)
    {
    super(adapter);
    }

  @Override
  protected boolean cacheInBackground() throws Exception
    {
    //Fetch more data
    }
//Other methods such as getPendingView(), appendCachedData()
} 
```

在你的活动中

```
locationArray = new ArrayList<LocationModel>();
LocationAdapter locationAdapter = new LocationAdapter(ListRest.this, R.layout.dublet, locationArray);
EndlessLocationAdapter endlessLocAdapter = new EndlessLocationAdapter(locationAdapter);
setListAdapter(endlessLocAdapter); 
```

# joomla - 如何在 Joomla 中发送任务变量

> ID：14535282
> 
> 赞同：0
> 
> 时间：2013-01-26T08:38:51.657
> 
> 标签：joomla, joomla2.5

我在 joomla (virtuemart) 中有一个带有 url 的菜单项

```
index.php?option=com_virtuemart&view=manufacturer 
```

现在，在制造商视图的 view.html.php 中，我添加了一个名为 jump 的函数

```
function jump(){echo "hello";} 
```

我在 url 中添加了 task=jump 使其变为

```
index.php?option=com_virtuemart&view=manufacturer&task=jump 
```

但是即使现在执行默认显示功能而不是跳转功能。为什么？请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:46:54.307

这个url中的任务 `index.php?option=com_virtuemart&view=manufacturer&task=jump`会执行`jump`默认控制器的功能。所以如果有任何函数`jump`将 `controller.php`不会执行视图的跳转功能。如果要执行任何其他控制器的跳转，请使用此结构`task=controllername.taskname`

阅读更多 - [http://docs.joomla.org/JController_and_its_subclass_usage_overview](http://docs.joomla.org/JController_and_its_subclass_usage_overview) https://groups.google.com/forum/?fromgroups=#!topic/joomla-dev-general/ZkNhbX2x1Es [http://docs.joomla.org/ How_Joomla_pieces_work_together](http://docs.joomla.org/How_Joomla_pieces_work_together)

希望这很清楚。

# php - 将 XML 路径传递给函数不返回值

> ID：14535287
> 
> 赞同：0
> 
> 时间：2013-01-26T08:40:06.947
> 
> 标签：php, xml, simplexml

我有以下 PHP 函数，它在 -> 之后为我的 SimpleXML 采用 XML 路径。

```
function parseRecipeData($xmlPath) {
    global $db_recipe_type;
    global $db_recipe_filename;
    global $xml;

    $xml = simplexml_load_file($db_recipe_filename);
    // var_dump($xml);

    // Get data from XML Field
    $requestedInfo = $xml->$xmlPath;
    //var_dump($requestedInfo);

    return $requestedInfo;
} 
```

我的问题是 PHP 第 1 行不返回任何内容，而 PHP 第 2 行返回 XML 值。请注意，这`$recipeSize = "batch->attributes()->quantity";`是在我的应用程序顶部定义的，应该是全局范围。我的 XML 树位于此代码的其余部分下方。

1：`<?php echo parseRecipeData($recipeSize); ?>`

2：`<?php echo $xml->batch->attributes()->quantity; ?>`

**XML 结构**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE recipe>
<recipe>
  <batch quantity="2.13 gal"/>
</recipe> 
```

谁能明白为什么一个 PHP 行会返回一个函数并且不考虑它们应该解析为相同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:39:01.407

这不是它的工作原理：您必须运行`eval()`以将字符串“batch->attributes()->quantity”转换为您可以使用的东西。这充其量是一种令人讨厌的方法。

如果您使用[XPath](http://php.net/manual/en/simplexmlelement.xpath.php)并将 XPath 字符串传递给函数会更优雅。查看文档，字符串应如下所示：

```
/recipe/batch@quantity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:54:00.050

您可以创建另一个函数：

```
function getRecipeData() {
    global $db_recipe_type;
    global $db_recipe_filename;
    global $xml;

    $xml = simplexml_load_file($db_recipe_filename);

    return $xml;
} 
```

用法：

```
getRecipeData()->batch['quantity']; 
```

另一个解决方案就像 Pekka 建议使用 xpath 查询它。

# java - 在java中声明增量变量

> ID：14535291
> 
> 赞同：-3
> 
> 时间：2013-01-26T08:40:35.973
> 
> 标签：java

我正在尝试声明一个每次满足条件时都会递增的变量，因为我需要输出满足条件的次数。

变量：

```
String[] letters = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"};

-----this part is inside an if-----
String yourname = request.getParameter("yourname").toLowerCase();
            String crushname = request.getParameter("crushname").toLowerCase();
            yourname = yourname.replace(" ","");
            crushname = crushname.replace(" ","");
            String[] a_yourname = yourname.split("(?!^)");
            String[] a_crushname = crushname.split("(?!^)"); 
```

基本上我正在尝试用 Java 编写这个 PHP 代码：

```
if($yourname[$x] == $letters[$y]){
        if($yourname[$x] == 'a'){
            $y_a++;
        }
        if($yourname[$x] == 'b'){
            $y_b++;
        }
        if($yourname[$x] == 'c'){
            $y_c++;
        } 
```

}

这是我的 Java 部分：

```
int y_a=0;
int y_b=0;
            for(int x=0;x<a_yourname.length;x++){
                for(int y=0;y<letters.length;y++){
                    if(a_yourname[x] == letters[y]){
                            if(a_yourname[x] == "a"){
                                    y_a++;
                            }
                            if(a_yourname[x] == "b"){
                                    y_b++;
                            } 
```

不要介意缺少的结束标签，每当我打印 y_a 时，它总是返回 0，我猜是因为我将它初始化为保持 0，但是我如何让它初始化的值不会覆盖增加的值呢？

我知道这对某些人来说非常简单，但我真的是一个 PHP 人，而且我对 Java 真的不太了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:42:19.690

a_yourname[x] == "a" 在 java 中不起作用。你需要 a_yourname[x].equals("a") 代替。

或者 a_yourname[x] == 'a' 如果 a_yourname 是一个字符数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:46:29.933

您的基本问题是，您尝试使用`==`.

然而，在 Java`==`中，只比较对象标识（当与对象一起使用时，例如字符串）而不是它们的内容！

要比较 Java 中对象的内容，请使用`equals()`（用于相等）或`compareTo()`（用于排序）。所以在你的情况下，它应该说：

```
if( a_yourname[x].equals( letters[y] ) ){
    if( "a".equals( a_yourname[x] ) ){
      y_a++;
    }
    if( "b".equals( a_yourname[x] )){
      y_b++;
    }
} 
```

假设，你真的是指这里的字符串比较。

如果您要比较`char`或单个字符，请转身将`"`其`"a"`标记`'`为这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T08:46:23.293

只需将您变量从代码所在的函数中删除即可。

例如：

```
int y_a=0;
int y_b=0;

void function()
{
 for(int x=0;x<a_yourname.length;x++){
                for(int y=0;y<letters.length;y++){
                    if(a_yourname[x] == letters[y]){
                            if(a_yourname[x] == "a"){
                                    y_a++;
                            }
                            if(a_yourname[x] == "b"){
                                    y_b++;
                            }
} 
```

# c++ - IEEE 浮点与自定义浮点性能

> ID：14535310
> 
> 赞同：7
> 
> 时间：2013-01-26T08:44:39.790
> 
> 标签：c++, performance, floating-point, fixed-point

我正在使用没有浮点单元的处理器，因此我必须为用户界面使用固定或自定义浮点类型。

对于这三种类型，说乘法的性能如何：

1.  IEEE 浮点 (32)
2.  具有 16 位有符号值和有符号 16 位指数的自定义 32 位浮点类
3.  32 位固定十进制

我想要一些可以扩展到具有浮点单元的处理器的东西，自定义浮点是否会与 IEEE 浮点在性能方面具有竞争力？我听说 IEEE 浮点数在没有 FPU 的处理器上的性能很糟糕，是不是因为 24 位值不是原生的，所以它必须做疯狂和/或运算？也就是说，自定义浮点类会缓解该性能问题吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T09:24:31.873

软件模拟的 IEEE 浮点数/双精度数很慢，因为需要检查和正确处理许多边缘情况。

*   +/-无穷大输入
*   输入中的非数字
*   +/-0 输入
*   输入中的规范化与非规范化数字以及尾数中的隐式“1”
*   拆箱包装
*   规范化/非规范化
*   不足和溢出检查
*   正确的舍入，这可能导致额外的（反）规范化和/或下溢/溢出

如果您将上述内容粗略地算作一些原始微操作（列表中的每个项目为 1），您将接近 10。在最坏的情况下还会有更多。

因此，如果您对 IEEE 兼容的浮点运算感兴趣，预计每个模拟运算都比其对应的整数运算慢 30 倍（CodesInChaos 的评论是及时的，每次加法/乘法需要 38 个时钟）。

您可以通过选择浮点格式来减少一些角落：

*   只有一个零
*   没有非数字
*   仅归一化数字
*   尾数中没有隐含的“1”
*   指数和尾数各占整数个字节
*   无或原始舍入
*   可能，没有无穷大
*   可能，2的补码尾数
*   可能，没有指数偏差

定点算术可能会变得更加高效。但它通常的问题是您必须事先知道输入和中间结果的所有范围，以便您可以选择正确的格式以避免溢出。您可能还需要支持多种不同的定点格式，例如 16.16、32.32、8.24、0.32。C++ 模板可能有助于减少此处的代码重复。

无论如何，你能做的最好的事情就是定义你的问题，用浮点和定点算法解决它，观察两者中哪一个最适合哪个 CPU 并选择获胜者。

**编辑**：对于更简单的浮点格式的示例，请查看[MIL-STD-1750A 的 32 位浮点格式](http://www.xgc.com/manuals/m1750-ada/m1750/c189.html#AEN322)：

```
 MSB                                         LSB MSB          LSB
------------------------------------------------------------------
| S|                   Mantissa                 |    Exponent    |
------------------------------------------------------------------
  0  1                                        23 24            31 
```

浮点数表示为小数尾数乘以 2 的指数次方。在浮点运算开始时，所有浮点数都被假定为归一化或浮点零，并且所有浮点运算的结果都被归一化（归一化的浮点数具有尾数的符号和相反值的下一位）或浮点零。浮点零定义为 0000 0000 [16]，即零尾数和零指数 (00 [16] )。扩展浮点零定义为 0000 0000 0000 [16]，即零尾数和零指数。32 位浮点数的机器表示示例：

```
十进制数十六进制表示法  
（尾数 x Exp）  
0.9999998 x 2 127      7FFFFF 7F  
0.5 x 2 127    400000 7F  
0.625 x 2 4    500000 04  
0.5 x 2 1      400000 01  
0.5 x 2 0      400000 00  
0.5 x 2 -1     400000 法郎  
0.5×2 -128   400000 80  
0.0 x 2 0      000000 00  
-1.0 x 2 0     800000 00  
-0.5000001 x 2 -128    BFFFFF 80  
-0.7500001 x 2 4   9FFFFF 04  

```

# vb.net - 我想显示修复时间并计算剩余时间

> ID：14535311
> 
> 赞同：-1
> 
> 时间：2013-01-26T08:44:42.437
> 
> 标签：vb.net, datetime, time, timestamp

我有一个开始时间，例如 12:00:00，结束时间是 14:00:00 我想计算 2 小时的差异。并向用户展示 2 小时的挠痒痒时间。

在 vb.net 中怎么做？我应该使用 AJAX 计时器吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:03:14.363

你的问题模棱两可。我会按我的理解回答。首先添加 2 小时的考试开始时间作为结束时间。从结束时间减去系统时间。用计时器更新它。

# android - 物体移动时如何提高定位精度

> ID：14535314
> 
> 赞同：0
> 
> 时间：2013-01-26T08:44:55.183
> 
> 标签：android, gps, locationmanager

实际上，我正在做一个 gps 应用程序，它将在移动时测量两个地理点之间的距离。但是，当我的设备是静态的时，仍然会计算距离，因为位置更改会更新旧的和新的地理点，然后计算距离。以下是我在程序中使用的设置：

```
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setAltitudeRequired(false);
criteria.setBearingRequired(false);
criteria.setCostAllowed(true);
criteria.setPowerRequirement(Criteria.POWER_LOW); 
```

当 locationChanged 时，它会更新新旧 GeoPoint 并计算距离。

而且，我正在使用网络提供商进行室内测试。

请善意建议，因为我真的需要一些帮助。谢谢你。

# mysql - MySql:: 使用 Limit 和 OrderBy

> ID：14535318
> 
> 赞同：0
> 
> 时间：2013-01-26T08:45:34.737
> 
> 标签：mysql, sql

当我尝试运行此查询时，我在最后一行出现语法错误，这发生在我添加**Limit**和**orderby**之后：

```
DROP PROCEDURE IF EXISTS `SP_GetFilesInfo`;

CREATE DEFINER = `root`@`localhost` PROCEDURE `SP_GetFilesInfo`(pFileID varchar(20),pFileName varchar(100),pExrtention int,pParentID varchar(20),pSize int,pReferenceID int,pIndex int,pNumOfRec int)
BEGIN
SELECT  FileID,
                FileName,
                FilePath,
                Size,
                Exrtention,             
                ParentID,
                IsFolder,
                ModificationDate,               
                filesrefrences.ReferenceID,
                filesrefrences.RefrenceCount,
                filesrefrences.RefrenceKey
from filesinfo LEFT OUTER JOIN filesrefrences ON   (filesrefrences.ReferenceID = filesinfo.ReferenceID)

WHERE       (pFileID=-99 OR pFileID is NULL OR filesinfo.FileID=pFileID)
                AND (pFileName='' OR pFileName is NULL OR filesinfo.FileName LIKE CONCAT('%', pFileName,'%'))
                AND (pExrtention=-99 OR pExrtention is NULL OR filesinfo.Exrtention =pExrtention)
                AND (pParentID=-99 OR pParentID is NULL  OR filesinfo.ParentID=pParentID)               
                AND (filesinfo.ReferenceID= pReferenceID OR pReferenceID=-99 OR pReferenceID is NULL)
                AND (filesinfo.Size=pSize OR pSize=-99 OR pSize is NULL)  ORDER BY IsFolder DESC LIMIT 0;           
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:47:05.120

如果（*要显示的记录*数）未提供，则 的值`LIMIT`应大于 0`duration`

 *```
ORDER BY IsFolder DESC 
LIMIT 1; 
```

*   [限制 - MySQL 命令](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

如果您提供了*duration*，则结果中第一条记录的索引为零，例如

```
ORDER BY IsFolder DESC 
LIMIT 0, 1; 
```

哪里`0`是*索引*，`1`是*持续时间**

# sql - 如何根据 SQL Server 中的行创建多个列

> ID：14535329
> 
> 赞同：1
> 
> 时间：2013-01-26T08:46:55.640
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表名考勤大师

```
id  ||name ||attn_hours || attn_date
---------------------------------------------
142 || abc || 2.00 || 2013-01-17 00:00:00.000
142 || abc || 3.00 || 2013-01-18 00:00:00.000
143 || pqr || 3.00 || 2013-01-17 00:00:00.000
143 || pqr || 2.00 || 2013-01-18 00:00:00.000 
```

我想在多列中使用不同的名称和出勤时间，列名称为 attn_date，如下所示

```
id  ||name ||2013-01-17||2013-01-18
---------------------------------
142 || abc || 2.00 || 3.00
143 || pqr || 3.00 || 2.00 
```

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:13:21.007

尝试这个：

```
SELECT
  Id, name, [2013-01-17], [2013-01-18]
FROM Tbl
PIVOT
(
  MAX(attn_hours)
  FOR attn_date in ([2013-01-17], [2013-01-18])
) A 
```

或这个：

```
SELECT
  Id, 
  name,
  MAX(CASE WHEN attn_date = '2013-01-17' THEN attn_hours END) [2013-01-17],
  MAX(CASE WHEN attn_date = '2013-01-18' THEN attn_hours END) [2013-01-18]
FROM Tbl
GROUP BY Id, Name 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/4b335/3)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:55:10.283

您需要对数据进行透视。在 sql server 2008 中，您可以按照指南 @ [http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx执行此操作](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

那么你就可以理解为什么会这样了：[http ://sqlfiddle.com/#!3/3f8a3/1/0](http://sqlfiddle.com/#!3/3f8a3/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:42:00.163

尝试这个：

```
DECLARE @Dates VARCHAR(8000)
Declare @Month int=1

SELECT @Dates = COALESCE(@Dates + '], [', '') + cast(attn_date as varchar(20)) FROM 
(select distinct attn_date from tbl where month(attn_date)=@Month) as a

Set @Dates='['+@Dates+']'

--SELECT @Dates

Declare @query varchar(max)

Set @query=
'SELECT
Id, name, ' + @Dates + ' 
FROM Tbl
PIVOT
(
  MAX(attn_hours)
  FOR attn_date in (' + @Dates + ' )   
) A'

print @query

exec(@query) 
```

# requirejs - 防止缓存由requirejs的文本插件解析的下划线模板

> ID：14535331
> 
> 赞同：5
> 
> 时间：2013-01-26T08:47:15.273
> 
> 标签：requirejs, underscore.js

我正在使用 RequireJS 文本插件来加载模板，然后在视图中进行评估。问题是模板被缓存了。因此，在我清除缓存之前，呈现的模板始终具有旧内容。

我猜 RequireJS 文本插件缓存了文本模板。

有没有办法阻止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T14:26:46.403

这非常简单，并记录在 RequireJS 页面上。您需要做的就是在`urlArgs`您的 require.config 中添加一个：

```
urlArgs: "bust=" +  (new Date()).getTime() 
```

请注意，如文档中所述，上述代码仅适用于开发环境，您需要将其删除或为生产代码设置版本号。如果您使用任何类型的后端，这也可以轻松完成，因为您始终可以使用模板系统注入这样的值。

[http://requirejs.org/docs/api.html#config-urlArgs](http://requirejs.org/docs/api.html#config-urlArgs)

# vb.net - 如何通过 vb.net Webbbrowser 控件更改值

> ID：14535333
> 
> 赞同：-1
> 
> 时间：2013-01-26T08:47:33.277
> 
> 标签：vb.net, webbrowser-control, getelementbyid

从此导航调用开始：

```
Webbrowser.Navigate("localhost") 
```

该`Webbrowser.Document`对象拥有一个参考。到具有以下属性的 HTML 对象：

```
id="first"
name="first"
type="text"
value="something" 
```

我的问题是；如何更改值？

我看过一些关于如何通过以下方式获取元素的帖子`getElementById`：

```
Webbrowser.Document.getElementById("first") 
```

但我仍然不知道如何改变它`value`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T07:43:56.783

我找到了：

```
Webbrowser.Document.getElementById("user").setAttribute("value", "username") 
```

或者如果元素没有`id`：

```
Webbrowser.Document.getElementByTagName("input").getElementByName("user").item(0).setAttribute("value", "username") 
```

# php - 什么时候使用准备好的语句？

> ID：14535337
> 
> 赞同：1
> 
> 时间：2013-01-26T08:48:17.570
> 
> 标签：php, mysql, mysqli, prepared-statement, web-traffic

我有几个问题。

规格：MySql 数据库；服务器端语言 PHP 5.3.10

1）什么时候应该使用准备好的语句？

我正在构建一个有用户的 webapp。我不断地在数据库中检索/插入数据。我目前没有使用准备好的语句，我想知道这是否是错误的做事方式？

```
/**
     * Register a new user into the database.  Please make sure to
     * hash the password.
     * @param type $fName First name of the user - String value.
     * @param type $lName Last name of the user - String value.
     * @param type $email Email address of the user - String value.
     * @param type $hashedPassword - String value.
     * @return boolean true if sucessful or false if failed.
     */
    function registerUser($fName, $lName, $email, $hashedPassword)
    {
        //Establish a connection.
        $mysqli = new $mysqli($GLOBALS['dbServer'], $GLOBALS['dbUserName'], $GLOBALS['dbPassword'], $GLOBALS['dbName']);

        //Check if connection failed.
        if($mysqli->connect_error)
        {
            die('Connect Error (' .$mysqli->connect_errno . ') '
                    .$mysqli->connect_error);
        }

        //Insert data into the table and check if the attempt was sucessful.
        if($mysqli->query("INSERT INTO user_info(email, password, fName, lName) VALUE  ('$email', '$hashedPassword', '$fName', '$lName')"))
        {
            return true;
        }
        return false;            
    } 
```

这是将值插入数据库并确保它成功的正确方法吗？或者，我可以使用准备好的语句，我想知道

2）我将如何使用准备好的语句？我为什么要（如果你建议我这样做）？

我预计每天大约有 20,000 次访问该网站。或者让我们假设这是多少......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:51:41.797

您应该始终使用准备好的语句。这将防止任何 SQL 注入的机会（前提是准备工作正确）。我猜您还想知道何时可以使用常规查询来提高效率；硬件总是可以升级的。注意二阶 SQL 注入（[示例](http://www.esecforte.com/blog/second-order-sql-injection/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:12:39.030

除了[已经回答](https://stackoverflow.com/a/8265319/285587)的“我为什么要”这个问题之外，您的代码中还有一些内容需要更正。

1.  在每个函数中创建新的数据库连接不是要走的路。
    在引导文件的某处创建一次，然后使用`global`关键字访问它。
2.  死在代码中间是另一个禁忌。
3.  将许多运算符塞入一行并没有什么好处，反而会使代码难以阅读和支持。
4.  与 PDO 不同，Mysqli 无法帮助减少代码中的重复，因此，程序员必须小心。

所以，这个功能就像

```
function registerUser($fName, $lName, $email, $hashedPassword)
{
    global $mysqli;

    //Insert data into the table and check if the attempt was sucessful.
    $sql = "INSERT INTO user_info(email, password, fName, lName) VALUES (?,?,?,?)";
    $sth = $mysqli->prepare($sql);
    foreach (func_get_args() as $i => $value) {
        $sth->bindValue($i+1, $value, PDO::PARAM_STR);
    }
    $mysqli->execute();
    return !$mysqli->error;
} 
```

# c# - 解决没有为 \u0027System.String\u0027 类型定义的无参数构造函数

> ID：14535344
> 
> 赞同：2
> 
> 时间：2013-01-26T08:49:04.657
> 
> 标签：c#, jquery, .net, ajax, webmethod

我已经阅读了对同一问题的其他回复，但无法解决这个问题。我正在尝试将 JSON 字符串发布到我的服务器（.NET），对其进行解析并存储一些值 - 代码如下。一切正常（即数据最终在我的数据库中，但它仍然抛出 500 错误）。已经用 Fiddler 等进行了调查，但没有成功

我的代码中可能还有很多其他问题 - 现在只是进行一些实验，但不胜感激任何建议......

首先，jQuery 帖子：

```
function PostData(value) {
        $.ajax({
            type: "POST",
            url: "Default.aspx/PostData",
            data: JSON.stringify({ postedData: value }),
            contentType: "application/json",
            dataType: "json",
            success: function (msg) {
                console.log("success: " + msg.d);
            },
            error: function (xhr, textStatus, error) {
                console.log("error:" + xhr.statusText + "  " + textStatus + "  " + error);
            }
        });
    } 
```

接下来，服务器端的齿轮：

```
[WebMethod]
public static string PostData(string postedData)
{
    _PostData(postedData);
    return null;
}

public static void _PostData(string postedData)
{
    JObject o = JObject.Parse(postedData);
    string id = (string)o.SelectToken("id");

    using (SqlConnection sql = new SqlConnection(connectionString))
    using (SqlCommand cmd = sql.CreateCommand())
    {
        try
        {
            cmd.CommandText = "INSERT into Table1 (userId, data) VALUES (@userIdValue, @dataValue)";
            cmd.Parameters.AddWithValue("@userIdValue", id);
            cmd.Parameters.AddWithValue("@dataValue", postedData);

            sql.Open();
            cmd.Connection = sql;
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex.Message);
        }
    }
} 
```

# android - 有没有办法在 Android 应用程序中嵌入浏览器？

> ID：14535346
> 
> 赞同：5
> 
> 时间：2013-01-26T08:49:51.003
> 
> 标签：android, cordova, browser, chromium-embedded

我正在做一个需要管理请求（html/javascript）和更多其他事情的项目。我在 windows 上使用了[Chromiumembedded](http://code.google.com/p/chromiumembedded/)。现在我需要类似的东西用于android。

我搜索了有关 android 编程并花了一些时间在[Phonegap](http://phonegap.com/)上。据我所知，它会打开一个 webview 并为一些设备功能（如相机）提供一些 javascript API。所以Phonegap不会帮助我。

我想知道是否有任何方法可以嵌入 Chrome 或任何其他可以嵌入到 android 应用程序中的浏览器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T08:56:16.133

Android 有一个[WebView](http://developer.android.com/reference/android/webkit/WebView.html)组件，它基本上是一个浏览器。您可以将它放在应用程序中的任何位置，并且可以启用默认禁用的 JavaScript。支持 HTML 5。我在生产中使用它并完全推荐。

不幸的是，3.x 版本有一个[不支持字符串查询的错误](http://code.google.com/p/android/issues/detail?id=17535)，该错误可能存在于某些页面的 URL 中。在错误网站中，此问题显示为已关闭并已修复。我什至没有意识到这一点，因为我们对所有东西都使用 4.1.0。该版本已经修复了该错误。对于早期版本，[此处](http://bricolsoftconsulting.com/2012/05/15/fixing-the-broken-honeycomb-and-ics-webview/)提供了一些解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:56:20.247

试试`android.webkit.WebView`它相当于iOS的`UIWebView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:52:35.767

使用 android.webkit.WebView

设置视图，例如：

```
WebView mywebview = (WebView) findViewById(R.id.webview); 
```

并加载应用程序的 url：

```
mywebview.loadUrl("http://www.example.com"); 
```

或者

```
mywebview.loadUrl("file:///android_asset/html_no_copy/test.html"); 
```

并在您的应用程序中启用 javascript，设置：

```
WebSettings webSettings = mywebview.getSettings();
webSettings.setBuiltInZoomControls(true);
webSettings.setJavaScriptEnabled(true); 
```

尝试阅读文档：http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

# java - ojdbc6.jar 和 ojdbc14.jar 有什么区别？

> ID：14535347
> 
> 赞同：6
> 
> 时间：2013-01-26T08:49:58.517
> 
> 标签：java, oracle, jboss, oracle11g

> **可能重复：**
> [ojdbc14.jar 与 ojdbc6.jar](https://stackoverflow.com/questions/3209647/ojdbc14-jar-vs-ojdbc6-jar)

**ojdbc6.jar**和**ojdbc14.jar**有什么区别？

我正在使用**jBoss 5.1.0 GA**和**Oracle 数据库 11g R2 XE**和**jdk1.7.0_02**。

我应该使用哪个 jar 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T09:05:40.713

两个 jar 都可以工作，但 ojdbc6.jar 更好，它适用于 Java 6。较新的 Java 版本添加了旧版本中不可用的功能，新事物`Since`在 javadoc 中用标记标记，例如 Java 7`Connection.abort`标记为

```
Since: 1.7 
```

如果您调用 jar 中缺少的方法，您将得到 java.lang.AbstractMethodError

# atk4 - 如何将表单添加到 CompleteLister ATK4

> ID：14535348
> 
> 赞同：2
> 
> 时间：2013-01-26T08:50:03.470
> 
> 标签：atk4, agiletoolkit

我想为 CompleteLister 的每一行添加一个简单的表单。我试过这个：

```
<?php
class page_list extends Page {
    function init(){
        parent::init();

        $l = $this->add('Lister_Comment',null,'comm_list_spot','comm_list_spot');
        $l->setModel('Comment');
    }
    function defaultTemplate(){
        return array('view/comment_list');
    }
}
class Lister_Comment extends CompleteLister {
    function formatRow(){
        parent::formatRow();

        $f = $this->add('Form');
        $f->addField('line','com_text');
        $f->addSubmit();
        $this->current_row_html['commm'] = $f->getHTML();
    }

}
?> 
```

` 但它不起作用。我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:09:21.020

表单是一个微妙的视图，它需要正确地放在渲染树中。以下是如何更好地实现这一点：

1.  手动迭代模型
2.  在迭代内部，添加一个包含列表行内容的视图
3.  使用 add() 的第三个参数在 comm 标记内添加一个新表单

这应该会更好。

# wordpress - WordPress插件在编辑器中插入代码

> ID：14535352
> 
> 赞同：-1
> 
> 时间：2013-01-26T08:51:18.513
> 
> 标签：wordpress

我有关于在 WordPress 上编程并寻找插件以在帖子中插入代码并将其包装的博客

```
<pre><code data-language="..."> 
```

你知道这个插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:35:28.603

尝试谷歌搜索你的问题。您会发现[在您的博客中显示和突出显示代码的 12 个 WordPress 插件](http://speckyboy.com/2009/02/19/12-wordpress-plugins-to-display-and-highlight-code-within-your-blog/)是最佳结果。

如果他们不适合，请查看页面上的任何其他结果。

# php - PHP 可捕获的致命错误

> ID：14535353
> 
> 赞同：0
> 
> 时间：2013-01-26T08:51:29.087
> 
> 标签：php

我正在尝试使用 wsdl2php 在 PHP 中使用 Web 服务，但无法完成。生成的 Web 服务客户端代码和结果是：

```
class CreateProfile {

  public $firstname;
  public $email;
  public $lastname;
  public $mobile;
  public $password;
  public $provider;
  public $uniqueID;
  public $username;
}

class CreateProfileResponse {

  public $CreateProfileResult;
}

class Profile_WebService extends SoapClient {

  private static $classmap = array(

  'CreateProfile' => 'CreateProfile',
  'CreateProfileResponse' => 'CreateProfileResponse',
);

public function Profile_WebService($wsdl = "http://domain/wcfservice/Profile.WebService.asmx?WSDL", $options = array()) {
foreach(self::$classmap as $key => $value) {
  if(!isset($options['classmap'][$key])) {
    $options['classmap'][$key] = $value;
  }
}
parent::__construct($wsdl, $options);
}

public function CreateProfile(CreateProfile $parameters) {
  return $this->__soapCall('CreateProfile', array($parameters),       array(
          'uri' => 'http://domain/',
          'soapaction' => ''
         )
     );
  }

} 
```

我想像这样使用它：

```
$client = new Profile_WebService();
$client->CreateProfile(array('provider' => 'ENERGIZER','username' => 'ENGtest1','password' => '1369','uniqueId' => '102030405062')); 
```

但它一直在说：

```
PHP Catchable fatal error:  Argument 1 passed to Profile_WebService::CreateProfile() must be an instance of CreateProfile, array given, called. 
```

你能启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:59:25.337

`CreateProfile`需要一个对象，而不是数组。所以这：

```
$client = new Profile_WebService();
$client->CreateProfile(array('provider' => 'ENERGIZER','username' => 'ENGtest1','password' => '1369','uniqueId' => '102030405062')); 
```

可以快速切换到这个：

```
$client = new Profile_WebService();
$CreateProfile_array = array('provider' => 'ENERGIZER','username' => 'ENGtest1','password' => '1369','uniqueId' => '102030405062');
$CreateProfile_object = (object)$CreateProfile_array;
$client->CreateProfile($CreateProfile_object); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:00:11.797

创建一个 CreateProfile 的新类实例：

```
$createProfile = new CreateProfile(); 
```

为其分配变量：

```
$createProfile->firstname = 'Fred';
$createProfile->email = 'test@example.com';
...
... 
```

然后将该对象传递给您的方法：

```
$client = new Profile_WebService();
$client->CreateProfile($createProfile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:03:38.517

您告诉 PHP 期望在`CreateProfile()`type 的函数 1 参数中`CreateProfile`。

但是在这一行`$client->CreateProfile(array('provider' => 'ENERGIZER','username' => 'ENGtest1','password' => '1369','uniqueId' => '102030405062'));`中，您传递的是数组类型的变量。

您必须将该数组类型转换为 type `object`，如下所示：

```
$client->CreateProfile((object) array('provider' => 'ENERGIZER','username' => 'ENGtest1','password' => '1369','uniqueId' => '102030405062')); 
```

# android - 滚动时如何将数据从服务器加载到列表视图？

> ID：14535354
> 
> 赞同：11
> 
> 时间：2013-01-26T08:51:29.777
> 
> 标签：android, listview

我有一个显示图像和文本的列表视图。我想一次显示 8 个列表视图行，从服务器下载数据。当用户滚动列表视图时，我需要下载更多数据表单服务器并在列表视图中显示项目。我使用 AsyncTask 从服务器下载数据。

```
@Override
    protected Void doInBackground(Void... params) {
        getData();// get data first time. 8 data items.
        return null;
    }

   @Override
   protected void onPostExecute(Void result) {

        super.onPostExecute(result);
        pd.dismiss();
        lv= (ListView) findViewById(R.id.lvn);
        yt = new YouTubeAdapter(Youtube.this,msg,title,thumb);
        lv.setAdapter(yt);
        lv.setOnScrollListener(new EndLessScroll());

    } 
```

获取数据代码

```
 public void getData()
{
    HttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
    HttpGet request = new HttpGet("http://gdata.youtube.com/feeds/api/users/mbbangalore/uploads?v=2&alt=jsonc");     
    try
    {
    HttpResponse response = httpclient.execute(request);
    HttpEntity resEntity = response.getEntity();
    String _response=EntityUtils.toString(resEntity); // content will be consume only once

    JSONObject json = new JSONObject(_response);

    jsonArray = json.getJSONObject("data").getJSONArray("items");
    for (int i = 0; i < 8; i++) {
        JSONObject jsonObject = jsonArray.getJSONObject(i);

        String title1 = jsonObject.getString("title");
        title.add(title1);
        String thumbUrl = jsonObject.getJSONObject("thumbnail").getString("sqDefault");
        URL url1 = new URL(thumbUrl);
        Bitmap bmp = BitmapFactory.decodeStream(url1.openConnection().getInputStream());
        thumb.add(bmp);
        String url;
        try {

            url = jsonObject.getJSONObject("player").getString("default");
            msg.add(url);
        } catch (JSONException ignore) {
        }
    }
    } 
    catch(Exception e1)
        {
            e1.printStackTrace();
        }

    httpclient.getConnectionManager().shutdown();
} 
```

滚动时加载数据

```
 class EndLessScroll implements OnScrollListener {

    private int visibleThreshold = 5;
    private int currentPage = 0;
    private int previousTotal = 0;
    private boolean loading = true;

    public EndLessScroll() {
    }
    public EndLessScroll(int visibleThreshold) {
        this.visibleThreshold = visibleThreshold;
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) 

         if (lv.getLastVisiblePosition() >= lv.getCount());
             {System.out.println("............................"+"first"+ firstVisibleItem+"visible"+visibleItemCount+"total"+ totalItemCount);
               for (int i= totalItemCount; i < jsonArray.length(); i++) {
                   try
                   {
                   JSONObject jsonObject = jsonArray.getJSONObject(i);
                   // The title of the video
                   String title1 = jsonObject.getString("title");
                   title.add(title1);
                   System.out.println("title"+title);
                   String thumbUrl = jsonObject.getJSONObject("thumbnail").getString("sqDefault");
                   URL url1 = new URL(thumbUrl);
                   Bitmap bmp = BitmapFactory.decodeStream(url1.openConnection().getInputStream());
                   thumb.add(bmp);
                   String url;
                    url = jsonObject.getJSONObject("player").getString("default");
                       msg.add(url);
                   } catch (JSONException ignore) {
                     //  url = jsonObject.getJSONObject("player").getString("default");
                   }
                   catch(Exception e)
                   {

                   }
                   yt.notifyDataSetChanged();
               }
         }
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
    }
} 
```

现在的问题。我可以滚动显示 8 个列表视图行。假设服务器有 10000 个数据项。当用户向下滚动时，我需要一次在列表视图中显示 8 个项目下载其余项目。当用户向下滚动时，应该下载并显示新数据，直到用户能够看到第 10000 个数据。这段代码有什么问题？？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T09:52:08.207

如果您不想使用滚动检测器，另一种方法是从适配器触发下载，当从 请求最后一个项目时`getView()`，运行任务并将更多项目附加到适配器的集合中。然后调用`notifyDataSetChanged()`。

更新：

[请参阅此处](https://gist.github.com/anonymous/b4d3597e913327afadd5)的演示要点。

# c# - SqlDependency (Service Broker) 与计时器查询相比效率如何？

> ID：14535356
> 
> 赞同：2
> 
> 时间：2013-01-26T08:51:44.233
> 
> 标签：c#, .net, sql-server-2008, sqldependency

当我的数据库（SQL Server 2008）的一个表中添加了新记录时，我需要通知我的软件（C#、.NET 3.5）的用户（大约 100 个客户端）。如果我理解正确，这种操作应该符合缓存失效的条件，这正是它的`SqlDependency`用途，如果我错了，请纠正我。

为此，我可以看到 2 个选项：

1.  `SqlDependency`这将使我能够收到几乎实时的通知。
2.  通过一些计时器检查表。

但我以前从未使用`SqlDependency`过，也不知道它到底有多可靠？我的意思是，我可以让我的应用程序`SqlDependency.Start()`在一天开始时运行，并确保它无论如何都会监听通知 10 个小时吗？当然，我知道我必须对服务查询通知做出正确反应。就数据库性能而言，与计时器查询相比，这样做真的更好吗？数据库实际上有什么显着差异吗？

我正在考虑使用`SqlDependency`主要是因为我不确定让我的所有用户每 5 分钟打开连接并查询同一个数据库中的同一个表是一个最佳主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T21:07:58.103

我也一直在寻找 SqlDependency 类的性能指标，但遗憾的是没有找到。但如果我不得不猜测，我会说 SqlDependency 比外部轮询机制更有效，因为其他一切都保持不变（包括轮询间隔 = SqlDependency 的内部轮询间隔）。我这样说是因为在外部轮询时，您必须考虑每个轮询请求产生的开销。使用 SqlDependency，服务被优化以减少开销（至少，开销会小于外部轮询）。只是我的两分钱，但我在[Using SQLDependency vs.periodic polling of a table (performance impact)](https://stackoverflow.com/questions/14203704/using-sqldependency-vs-periodic-polling-of-a-table-performance-impact)中读到，效果完全相反。我将进行自己的测试并回发适合我的场景的内容。

# java - 一些菜鸟wsdl问题

> ID：14535359
> 
> 赞同：0
> 
> 时间：2013-01-26T08:52:54.747
> 
> 标签：java, web-services, soap, wsdl

```
<xsd:element name="loginResponse">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="loginReturn" type="tns:test"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>

<xsd:complexType name="test">
    <xsd:sequence>
        <xsd:element minOccurs="0" maxOccurs="1" name="tx" type="xsd:int"/>
        <xsd:element minOccurs="0" maxOccurs="1" name="result" type="xsd:int"/>
        <xsd:element minOccurs="0" maxOccurs="1" name="name_space" type="xsd:string"/>
    </xsd:sequence>
</xsd:complexType> 
```

我只想问为什么使用类型`tns:test`？如何在 complextype name="test" 中获取 tx、结果、命名空间值，因为这是我应该根据他们给我的 api 得到的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:03:03.537

**`tns`是目标名称空间前缀**，它应该定义在您的 WSDL 或 XSD 文件（包括`test`）的顶部。

您没有写出如何访问这些值，但我假设您的代码在不同的命名空间中工作，因此`test`无法识别。很可能有一种方法允许您通过元素名称**和命名空间**获取值。请注意，在这种情况下，命名空间不是`tns`在源文件顶部定义的 URL，而是 URL。

如果您不熟悉命名空间：*每个 XML 元素都与一个命名空间相关联，就像 Java 中的类是包的一部分一样。在 XML 中没有`import`声明，因此您必须按名称和命名空间来命名元素。为了保持文件可读，您可以定义命名空间前缀（可能是缩写）。*

# c# - 复选框控件不可见。如何让它可见

> ID：14535361
> 
> 赞同：0
> 
> 时间：2013-01-26T08:54:03.243
> 
> 标签：c#, asp.net, checkbox, radio-button

我在我的网页中看不到复选框和单选按钮。我不明白我在哪里犯错。在我的第一个模板中没有问题。但是，更改模板后，复选框和单选按钮出现问题。

这是代码：

```
<div class="grid_12">
    <div class="box round first fullpage" style="height: 330px">
        <h2>E-mail Ayarları</h2>
        <div class="block">
            <asp:button id="btn_mail_ekle" runat="server" text="Ekle" cssclass="btn btn-small" onclick="btn_mail_ekle_Click" />
            <div class="gvclass">
                <p>
                    <span>
                        <asp:gridview runat="server" id="GridView4" cellpadding="4"
                            width="100%" rowstyle-wrap="True"
                            rowstyle-height="30px" pagesize="20" emptydatatext="Görüntülenecek Öğe Bulunmamaktadır....."
                            gridlines="Horizontal" horizontalalign="Left"
                            onrowcancelingedit="GridView4_RowCancelingEdit"
                            onrowediting="GridView4_RowEditing" onrowupdating="GridView4_RowUpdating">
                            <RowStyle BackColor="White" HorizontalAlign="Left" VerticalAlign="Middle" Wrap="true" />
                            <Columns>
                               <asp:CommandField CancelText="İptal" EditText="Düzenle" ShowEditButton="True" UpdateText="Güncelle" ButtonType="Link" ItemStyle-ForeColor="#008f0d">
                                    <ItemStyle ForeColor="#008F0D"></ItemStyle>
                               </asp:CommandField>
                               <asp:TemplateField>
                                    <ItemTemplate>
                                        <asp:CheckBox runat="server" Enabled="False" ID="CheckBox1">
                                        </asp:CheckBox>
                                    </ItemTemplate>
                                    <HeaderTemplate>
                                    </HeaderTemplate>
                               </asp:TemplateField>
                               <asp:TemplateField>
                                    <ItemTemplate>
                                        <asp:CheckBox ID="CheckBox2" runat="server" Enabled="False">
                                        </asp:CheckBox>
                                    </ItemTemplate>
                                    <HeaderTemplate>
                                    </HeaderTemplate>
                               </asp:TemplateField>
                               <asp:TemplateField>
                                    <ItemTemplate>
                                        <asp:CheckBox ID="CheckBox3" runat="server" Enabled="False">
                                        </asp:CheckBox>
                                    </ItemTemplate>
                                    <HeaderTemplate>
                                    </HeaderTemplate>
                               </asp:TemplateField>
                            </Columns>
                            <PagerStyle BackColor="#f2f2f5" Height="30px" />
                            <HeaderStyle HorizontalAlign="Left" VerticalAlign="Middle" CssClass="tablesorter" Wrap="true" ForeColor="#b94309" />
                            <AlternatingRowStyle BackColor="White" />
                        </asp:gridview>
                    </span>
                </p>
            </div>
        </div>
    </div>
</div> 
```

生成的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="ctl00_Head1"><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>
    BCS Acil Uyarı Sistemleri
</title><link id="ctl00_Link1" rel="icon" href="images/sirket_logo.jpg" type="image/ico" /><link rel="stylesheet" type="text/css" href="css/reset.css" media="screen" /><link rel="stylesheet" type="text/css" href="css/text.css" media="screen" /><link rel="stylesheet" type="text/css" href="css/grid.css" media="screen" /><link rel="stylesheet" type="text/css" href="css/layout.css" media="screen" /><link rel="stylesheet" type="text/css" href="css/nav.css" media="screen" />
    <!--[if IE 6]><link rel="stylesheet" type="text/css" href="css/ie6.css" media="screen" /><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" type="text/css" href="css/ie.css" media="screen" /><![endif]-->
    <link href="css/fancy-button/fancy-button.css" rel="stylesheet" type="text/css" />
    <!--Jquery UI CSS-->
    <link href="css/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" /><link href="uyari_mesajlari.css" rel="stylesheet" type="text/css" />
    <!-- BEGIN: load jquery -->
    <script src="js/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="js/jquery-ui/jquery.ui.widget.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.accordion.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.effects.core.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.effects.slide.min.js" type="text/javascript"></script>
    <!-- END: load jquery -->
    <!--jQuery Date Picker-->
    <script src="js/jquery-ui/jquery.ui.widget.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.datepicker.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.progressbar.min.js" type="text/javascript"></script>
    <!-- jQuery dialog related-->
    <script src="js/jquery-ui/external/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.mouse.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.draggable.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.position.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.resizable.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.ui.dialog.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.effects.core.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.effects.blind.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui/jquery.effects.explode.min.js" type="text/javascript"></script>
    <!-- jQuery dialog end here-->
    <script src="js/jquery-ui/jquery.ui.accordion.min.js" type="text/javascript"></script>
    <!--Fancy Button-->
    <script src="js/fancy-button/fancy-button.js" type="text/javascript"></script>
    <script src="js/setup.js" type="text/javascript"></script>
    <!-- Load TinyMCE -->
    <script src="js/tiny-mce/jquery.tinymce.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            setupTinyMCE();
            setupProgressbar('progress-bar');
            setDatePicker('date-picker');
            setupDialogBox('dialog', 'opener');
            $('input[type="checkbox"]').fancybutton();
            $('input[type="radio"]').fancybutton();
        });
    </script>
    <!-- /TinyMCE -->
    <style type="text/css">
        #progress-bar
        {
            width: 400px;
        }
    </style>
   <style type="text/css">
   @font-face {
    font-family: 'allerregular';
    src: url('aller_rg-webfont.eot');
    src: url('aller_rg-webfont.eot?#iefix') format('embedded-opentype'),
         url('aller_rg-webfont.woff') format('woff'),
         url('aller_rg-webfont.ttf') format('truetype'),
         url('aller_rg-webfont.svg#allerregular') format('svg');
    font-weight: normal;
    font-style: normal;

}
</style>
</head>
<body>
    <form name="aspnetForm" method="post" action="emailayarlari.aspx" id="aspnetForm">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTExMDQ0MjAyNzYPZBYCZg9kFgICAw9kFggCBw8PFgIeBFRleHQFXcSwWk3EsFIgRFIuU1VBVCBTRVJFTiBHw5bEnsOcUyBIQVNUQUxJS0xBUkkgVkUgQ0VSUkFIxLBTxLAgRcSexLBUxLBNIFZFIEFSQcWeVElSTUEgSEFTVEFORVPEsGRkAgkPDxYCHwAFC1nDlk5FVMSwQ8SwZGQCDQ9kFgQCAw8QZGQWAQIBZAIHDzwrABEDAA8WBB4LXyFEYXRhQm91bmRnHgtfIUl0ZW1Db3VudAIGZAEQFgAWABYADBQrAAIWCB4ETmFtZQUNRS1tYWlsIEFkcmVzaR4KSXNSZWFkT25seWgeBFR5cGUZKwIeCURhdGFGaWVsZAUNRS1tYWlsIEFkcmVzaRYIHwMFD0VrbGVubWUgWmFtYW7EsR8EaB8FGSlcU3lzdGVtLkRhdGVUaW1lLCBtc2NvcmxpYiwgVmVyc2lvbj00LjAuMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWI3N2E1YzU2MTkzNGUwODkfBgUPRWtsZW5tZSBaYW1hbsSxFgJmD2QWDgIBD2QWBAIEDw8WAh8ABRViaWxnZXVndXIzNUBnbWFpbC5jb21kZAIFDw8WAh8ABRE1LjEuMjAxMyAwOToxMzowMmRkAgIPZBYEAgQPDxYCHwAFC2FAZ21haWwuY29tZGQCBQ8PFgIfAAURNS4xLjIwMTMgMDk6MzA6MTBkZAIDD2QWCAICD2QWAgIBDxAPFgIeB0NoZWNrZWRnZGRkZAIDD2QWAgIBDxAPFgIfB2dkZGRkAgQPDxYCHwAFF2RmZ2ZkZ2ZkZ2ZkZ0BnZmRnZGYuY29tZGQCBQ8PFgIfAAUSMTcuMS4yMDEzIDA4OjM1OjQwZGQCBA9kFgQCBA8PFgIfAAUTZHNmc2Rmc2RxZGRzZmRzZkBmZGRkAgUPDxYCHwAFETUuMS4yMDEzIDEwOjA5OjU5ZGQCBQ9kFggCAQ9kFgICAQ8QDxYCHwdnZGRkZAICD2QWAgIBDxAPFgIfB2dkZGRkAgQPDxYCHwAFE3Nmc2RmZHNmcUBnbWFpbC5jb21kZAIFDw8WAh8ABRIxNy4xLjIwMTMgMDg6MzU6MzFkZAIGD2QWCAIBD2QWAgIBDxAPFgIfB2dkZGRkAgIPZBYCAgEPEA8WAh8HZ2RkZGQCBA8PFgIfAAUNYXNhc2RAZHdkLmNvbWRkAgUPDxYCHwAFEjE4LjEuMjAxMyAxNDozMTowM2RkAgcPDxYCHgdWaXNpYmxlaGRkAhEPDxYCHwAFATFkZBgBBRZjdGwwMCRpY2VyaWskR3JpZFZpZXc0DzwrAAwBCAIBZBUWtJcUUzmZk3PytkzgdEfSUt8ugg+6lsE3h5GHEpZK" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<script src="/WebResource.axd?d=yJIFJSsFhN9bXVMtwTWZ9tox5KoRRyadljm7eI8i6oRKK9oDUTFQGzg_fFFeTxGMjKwHAVVAalwU0CPBdixzJ7ubiq2_qArXVFlOZTfOzb01&amp;t=634897507112455790" type="text/javascript"></script>

<script type="text/javascript">
//<![CDATA[
var __cultureInfo = {"name":"tr-TR","numberFormat":{"CurrencyDecimalDigits":2,"CurrencyDecimalSeparator":",","IsReadOnly":true,"CurrencyGroupSizes":[3],"NumberGroupSizes":[3],"PercentGroupSizes":[3],"CurrencyGroupSeparator":".","CurrencySymbol":"₺","NaNSymbol":"NaN","CurrencyNegativePattern":8,"NumberNegativePattern":1,"PercentPositivePattern":2,"PercentNegativePattern":2,"NegativeInfinitySymbol":"-Sonsuz","NegativeSign":"-","NumberDecimalDigits":2,"NumberDecimalSeparator":",","NumberGroupSeparator":".","CurrencyPositivePattern":3,"PositiveInfinitySymbol":"Sonsuz","PositiveSign":"+","PercentDecimalDigits":2,"PercentDecimalSeparator":",","PercentGroupSeparator":".","PercentSymbol":"%","PerMilleSymbol":"‰","NativeDigits":["0","1","2","3","4","5","6","7","8","9"],"DigitSubstitution":1},"dateTimeFormat":{"AMDesignator":"","Calendar":{"MinSupportedDateTime":"\/Date(-62135596800000)\/","MaxSupportedDateTime":"\/Date(253402293599999)\/","AlgorithmType":1,"CalendarType":1,"Eras":[1],"TwoDigitYearMax":2029,"IsReadOnly":true},"DateSeparator":".","FirstDayOfWeek":1,"CalendarWeekRule":0,"FullDateTimePattern":"d MMMM yyyy dddd HH:mm:ss","LongDatePattern":"d MMMM yyyy dddd","LongTimePattern":"HH:mm:ss","MonthDayPattern":"d MMMM","PMDesignator":"","RFC1123Pattern":"ddd, dd MMM yyyy HH\u0027:\u0027mm\u0027:\u0027ss \u0027GMT\u0027","ShortDatePattern":"d.M.yyyy","ShortTimePattern":"HH:mm","SortableDateTimePattern":"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss","TimeSeparator":":","UniversalSortableDateTimePattern":"yyyy\u0027-\u0027MM\u0027-\u0027dd HH\u0027:\u0027mm\u0027:\u0027ss\u0027Z\u0027","YearMonthPattern":"MMMM yyyy","AbbreviatedDayNames":["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"],"ShortestDayNames":["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],"DayNames":["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],"AbbreviatedMonthNames":["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara",""],"MonthNames":["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık",""],"IsReadOnly":true,"NativeCalendarName":"Gregoryen Takvim","AbbreviatedMonthGenitiveNames":["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara",""],"MonthGenitiveNames":["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık",""]},"eras":[1,"MS",null,0]};//]]>
</script>

<script src="/ScriptResource.axd?d=yoQFui4I7K7TNE1XYHnxTFvQK0CsITxXEkVIT0tJ6T6V903Fg7lPRzdYu4NZ8T7aRBSKh7SAY3KRbdTmOikXBX1y2KFvp7AQ22PxnV_FHoU4MkAs5aoqFb0jxg5uftDn0&amp;t=7f16157c" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=evsQDCIZ_UCKfQSF0nBOLhubsUsnpp-rmYbiV0U5aYUvA9ijSIGhnt1mle399YwMY1l74A1hrgtzc4yWji409rHpVyqbslDdb8eOrlZW_6ZLNax8TS8zIBVfHgrkaCnSzNkNaaMVLmYGrK2nQasg6Q2&amp;t=7f16157c" type="text/javascript"></script>

    <script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ctl00$ScriptManager1', 'aspnetForm', [], [], [], 90, 'ctl00');
//]]>
</script>

  <div class="container_12">
        <div class="grid_12 header-repeat">
            <div id="branding">
                <div class="floatleft" style=" color:White">
                   <img id="ctl00_Image1" src="images/kontrol.gif" align="left" style="height:50px;border-width:0px;" /> 

                             </div>
                             <div style=" float:left; padding-left:20px">
 <img id="ctl00_Image7" src="images/bcs.png" align="left" style="height:50px;width:120px;border-width:0px;" />

                             </div>
                             <div style=" float:left; color:White; padding-left:20px; padding-top:20px">
                             <span id="ctl00_Label27">İZMİR DR.SUAT SEREN GÖĞÜS HASTALIKLARI VE CERRAHİSİ EĞİTİM VE ARAŞTIRMA HASTANESİ</span>
                             </div>
                <div class="floatright">
                    <div class="floatleft">
                        <img src="images/img-profile.jpg" alt="Profile Pic" /></div>
                    <div class="floatleft marginleft10">
                    <span class="small grey">Merhaba  <span id="ctl00_lblKullanici">YÖNETİCİ</span>
                    <a id="ctl00_LinkButton1" href="javascript:__doPostBack(&#39;ctl00$LinkButton1&#39;,&#39;&#39;)">Çıkış</a>  
                    </span>
                        <br />
                        <span class="small grey">Son Giriş Tarihi:</span>
                        <br />
                        <span class="small grey"></asp:Label></span>
                    </div>
                </div>
                <div class="clear">

                </div>
            </div>
        </div>
        <div class="clear">
        </div>
        <div class="grid_12">
            <ul class="nav main">
                <li class="ic-form-style"><a href="#"><span>Müdahale Ekipleri ve Kullanıcılar</span></a>
                    <ul>
                        <li><a href="mudahaleekipleri.aspx">Ekipler ve BCS Kullanıcıları</a> </li>
                        <li><a href="kullanicilar.aspx">Konsültasyon Kullanıcıları</a> </li>
                        <li><a href="klinikler.aspx">Konsültasyon Klinikler</a> </li>
                    </ul>
                </li>
                <li class="ic-grid-tables"><a href="#"><span>Sistem Ayarları</span></a>
                <ul>
                        <li><a href="dahilinumaralar.aspx">Dahili Numaralar</a> </li>
                        <li><a href="sistemayarlari.aspx">Sistem Ayarları</a> </li>
                        <li><a href="emailayarlari.aspx">E-mail Ayarları</a> </li>
                        <li><a href="pagerayarlari.aspx">Pager Cihazları</a> </li>
                        <li><a href="mudahalesorulari.aspx">Müdahale Raporu Soruları</a> </li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="clear">
        </div>

         <div class="grid_12" style="min-height:1200px">   

<div style=" padding-top:1%; padding-left:1%; padding-right:1%">

</div>

<div class="grid_12">
            <div class="box round first fullpage">
                 <h2>E-mail Zaman Ayarları</h2>
                 <div class="block">
        <div class="gvclass">
                <p><span>
            <select name="ctl00$icerik$ddl_mail_ayarlari" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl00$icerik$ddl_mail_ayarlari\&#39;,\&#39;\&#39;)&#39;, 0)" id="ctl00_icerik_ddl_mail_ayarlari" class="fontcevir" style="width:60%;">
    <option value="0">Mail g&#246;nderilmesini istemiyorum.</option>
    <option selected="selected" value="1">Her g&#252;n saat 00:01&#39;de aşağıdaki adreslere mail g&#246;nderilmesini istiyorum.</option>
    <option value="2">Her hafta pazartesi g&#252;n&#252; saat 07:00&#39;de aşağıdaki adreslere mail g&#246;nderilmesini istiyorum.</option>
    <option value="3">Her ayın 1\. g&#252;n&#252; saat 07:00&#39;de aşağıdaki adreslere mail g&#246;nderilmesini istiyorum.</option>

</select>
        </span>      
        </p>
    </div>
    </div>
    </div>
    </div>
    <div class="grid_12">
            <div class="box round first fullpage" style=" height:330px">
                 <h2>E-mail Ayarları</h2>
                 <div class="block">

                    <input type="submit" name="ctl00$icerik$btn_mail_ekle" value="Ekle" id="ctl00_icerik_btn_mail_ekle" class="btn btn-small" />
                         <div class="gvclass">
                <p><span>
            <div>
    <table cellspacing="0" cellpadding="4" align="Left" rules="rows" border="1" id="ctl00_icerik_GridView4" style="width:100%;border-collapse:collapse;">
        <tr class="tablesorter" align="left" valign="middle" style="color:#B94309;">
            <th scope="col">&nbsp;</th><th scope="col">
                       Günlük
                       </th><th scope="col">
                       Haftalık
                       </th><th scope="col">
                       Aylık
                       </th><th scope="col">E-mail Adresi</th><th scope="col">Eklenme Zamanı</th>
        </tr><tr align="left" valign="middle" style="background-color:White;height:30px;">
            <td style="color:#008F0D;"><a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Edit$0&#39;)" style="color:#008F0D;">Düzenle</a>&nbsp;<a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Delete$0&#39;)" style="color:#008F0D;">Sil</a></td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl02_CheckBox1" type="checkbox" name="ctl00$icerik$GridView4$ctl02$CheckBox1" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl02_CheckBox2" type="checkbox" name="ctl00$icerik$GridView4$ctl02$CheckBox2" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl02_CheckBox3" type="checkbox" name="ctl00$icerik$GridView4$ctl02$CheckBox3" disabled="disabled" /></span>
                       </td><td>bilgeugur35@gmail.com</td><td>5.1.2013 09:13:02</td>
        </tr><tr align="left" valign="middle" style="background-color:White;height:30px;">
            <td style="color:#008F0D;"><a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Edit$1&#39;)" style="color:#008F0D;">Düzenle</a>&nbsp;<a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Delete$1&#39;)" style="color:#008F0D;">Sil</a></td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl03_CheckBox1" type="checkbox" name="ctl00$icerik$GridView4$ctl03$CheckBox1" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl03_CheckBox2" type="checkbox" name="ctl00$icerik$GridView4$ctl03$CheckBox2" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl03_CheckBox3" type="checkbox" name="ctl00$icerik$GridView4$ctl03$CheckBox3" disabled="disabled" /></span>
                       </td><td>a@gmail.com</td><td>5.1.2013 09:30:10</td>
        </tr><tr align="left" valign="middle" style="background-color:White;height:30px;">
            <td style="color:#008F0D;"><a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Edit$2&#39;)" style="color:#008F0D;">Düzenle</a>&nbsp;<a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Delete$2&#39;)" style="color:#008F0D;">Sil</a></td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl04_CheckBox1" type="checkbox" name="ctl00$icerik$GridView4$ctl04$CheckBox1" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl04_CheckBox2" type="checkbox" name="ctl00$icerik$GridView4$ctl04$CheckBox2" checked="checked" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl04_CheckBox3" type="checkbox" name="ctl00$icerik$GridView4$ctl04$CheckBox3" checked="checked" disabled="disabled" /></span>
                       </td><td>dfgfdgfdgfdg@gfdgdf.com</td><td>17.1.2013 08:35:40</td>
        </tr><tr align="left" valign="middle" style="background-color:White;height:30px;">
            <td style="color:#008F0D;"><a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Edit$3&#39;)" style="color:#008F0D;">Düzenle</a>&nbsp;<a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Delete$3&#39;)" style="color:#008F0D;">Sil</a></td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl05_CheckBox1" type="checkbox" name="ctl00$icerik$GridView4$ctl05$CheckBox1" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl05_CheckBox2" type="checkbox" name="ctl00$icerik$GridView4$ctl05$CheckBox2" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl05_CheckBox3" type="checkbox" name="ctl00$icerik$GridView4$ctl05$CheckBox3" disabled="disabled" /></span>
                       </td><td>dsfsdfsdqddsfdsf@fd</td><td>5.1.2013 10:09:59</td>
        </tr><tr align="left" valign="middle" style="background-color:White;height:30px;">
            <td style="color:#008F0D;"><a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Edit$4&#39;)" style="color:#008F0D;">Düzenle</a>&nbsp;<a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Delete$4&#39;)" style="color:#008F0D;">Sil</a></td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl06_CheckBox1" type="checkbox" name="ctl00$icerik$GridView4$ctl06$CheckBox1" checked="checked" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl06_CheckBox2" type="checkbox" name="ctl00$icerik$GridView4$ctl06$CheckBox2" checked="checked" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl06_CheckBox3" type="checkbox" name="ctl00$icerik$GridView4$ctl06$CheckBox3" disabled="disabled" /></span>
                       </td><td>sfsdfdsfq@gmail.com</td><td>17.1.2013 08:35:31</td>
        </tr><tr align="left" valign="middle" style="background-color:White;height:30px;">
            <td style="color:#008F0D;"><a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Edit$5&#39;)" style="color:#008F0D;">Düzenle</a>&nbsp;<a href="javascript:__doPostBack(&#39;ctl00$icerik$GridView4&#39;,&#39;Delete$5&#39;)" style="color:#008F0D;">Sil</a></td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl07_CheckBox1" type="checkbox" name="ctl00$icerik$GridView4$ctl07$CheckBox1" checked="checked" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl07_CheckBox2" type="checkbox" name="ctl00$icerik$GridView4$ctl07$CheckBox2" checked="checked" disabled="disabled" /></span>
                       </td><td>
                       <span disabled="disabled"><input id="ctl00_icerik_GridView4_ctl07_CheckBox3" type="checkbox" name="ctl00$icerik$GridView4$ctl07$CheckBox3" disabled="disabled" /></span>
                       </td><td>asasd@dwd.com</td><td>18.1.2013 14:31:03</td>
        </tr>
    </table>
</div>
        </span>
        </p>
    </div>
    </div>
    </div>
    </div>

       </div>

    <div class="clear">
        </div>
    </div>
    <div class="clear">
    </div>
    <div id="site_info">
        <p>
            <a href="#">Kontrol Bilgi Sistemleri</a>. Tüm Hakları Saklıdır.
        </p>
    </div>

    </form>
</body>
</html> 
```

# mongodb - 在数据库中存储对象

> ID：14535366
> 
> 赞同：-6
> 
> 时间：2013-01-26T08:55:08.817
> 
> 标签：mongodb, object, inheritance, overloading, database

想象一个具有属性**x**和属性**y**的类**A**以及具有属性**Z**并从其父**级 A**继承所有属性的类**B。**My Class **Hello**女巫是**B**，现在应该可以访问**A**和**B**的所有属性。每个属性都可以在每个阶段被覆盖。

 ******继承和重载/覆盖-但我想将此类对象存储在数据库中，并通过简单的 api 进行读写访问。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:23:57.423

MongoDB 是面向文档的，可以将数据保存为对象和数组。您必须编写函数将数据从/到 mongodb 转换为您的对象结构并使用它。

[此链接向您展示如何将对象保存到数据库中](https://stackoverflow.com/questions/6405106/inserting-a-php-object-into-a-mongo-db)******

# ipad - 转换后的通用应用程序不显示 iPad 界面

> ID：14535371
> 
> 赞同：0
> 
> 时间：2013-01-26T08:56:24.413
> 
> 标签：ipad, ios-universal-app

目前我正在构建一个 iPhone 应用程序。昨天我试图将其转换为通用应用程序。它有效，但它只显示标签栏，但没有别的。我创建了一些 Web 视图和表视图，但 iPad 模拟器没有显示任何内容，只有选项卡栏。iPhone 模拟器运行良好，我可以看到所有标签、网络视图等...我为 iPhone 和 iPad 创建了一个 Storyboard。

我不知道为什么 iPad 模拟器不显示任何内容。

希望您能够帮助我。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:11:00.573

检查您是否在目标常规设置中更改了故事板名称，如下图所示。

![在此处输入图像描述](../Images/f5aa18305df78d1900d526bdcfc96393.png)

为您的应用使用正确的名称。还要检查项目的 info.plist 文件是否已正确更新：

![在此处输入图像描述](../Images/25798bd16569d151ce850c2538a1b22f.png)

（第二个条目用于 iPad）。

如果没问题，请尝试进行清洁并重建。

# linux - 粘贴linux脚本

> ID：14535378
> 
> 赞同：3
> 
> 时间：2013-01-26T08:58:06.110
> 
> 标签：linux, bash

我有一个小问题，希望能得到您的帮助。

我需要使用粘贴命令将不同的文本文件合并在一起：

```
paste -d, ~/Desktop/*.txt  > ~/Desktop/Out/merge.txt 
```

但是，文件被无序合并。（文本文件编号为 1、2、3 等）

我正在使用`*.txt`，因为不同场景存在不同数量的文件。

你介意帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:14:54.390

如果您使用现代 bash，您可以编写：

```
paste -d, ~/Desktop/{1..10}.txt  > ~/Desktop/Out/merge.txt 
```

如果没有，你必须使用类似的东西：

```
paste -d, $(seq 1 10 | sed 's@.*@~/Desktop/&.txt) > ~/Desktop/Out/merge.txt 
```

如果您不知道目录中有哪些文件，可以列出并排序它们：

```
cd ~/Desktop/
paste -d, $(ls -1d *.txt| sort -n) > ~/Desktop/Out/merge.txt 
```

例子：

```
$ touch {1..20}.txt
$ echo $(ls -1 | sort -n)
1.txt 2.txt 3.txt 4.txt 5.txt 6.txt 7.txt 8.txt 9.txt 10.txt 11.txt 12.txt 13.txt 14.txt 15.txt 16.txt 17.txt 18.txt 19.txt 20.txt 
```

示例 2：

```
$ echo hello > 1.txt
$ echo dear > 5.txt
$ echo friend > 11.txt
$ paste -d, $(ls -1d *.txt| sort -n)
hello,dear,friend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:21:16.460

```
paste -d, $(ls ~/Desktop/*.txt) > ~/Desktop/Out/merge.txt 
```

* 被替换为按字母顺序排列的目录文件名列表。

> ### [3.5.8 文件名扩展](http://www.gnu.org/software/bash/manual/bashref.html#index-pathname-expansion-95)
> 
> Bash 在每个单词中扫描字符“*”、“?”和“[”。如果出现这些字符之一，则该词被视为一个模式，并替换为按字母排序的与该模式匹配的文件名列表。

所以文件名不必是连续的；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:26:22.073

这是一个相当长的方法来做同样的事情，但在一条线上。

```
paste -d, $(ls ~/Desktop/*.txt | awk -F/ '{print $NF"/"$0}' | sort -n | cut -d/ -f2-) > ~/Desktop/merge.txt 
```

我喜欢一个衬里:-)

# ruby-on-rails-3 - i18n 本地化 gem

> ID：14535379
> 
> 赞同：2
> 
> 时间：2013-01-26T08:58:35.947
> 
> 标签：ruby-on-rails-3, internationalization, gem

我需要本地化一个 gem。gem 确实处理文本。在处理文本时，它正在监听不同的单词，例如**Friday**或**Next Week**。现在我也想听它的翻译，比如**Freitag**和**Nächste Woche**。

我只需要创建 yaml 文件并在 ruby​​ 类中使​​用 t 方法吗？还是有更好的方法来做到这一点？

感谢你们！

# ios - 设备旋转度数

> ID：14535380
> 
> 赞同：0
> 
> 时间：2013-01-26T08:58:42.403
> 
> 标签：ios, cocoa-touch

我正在开发一个允许用户像方向盘一样旋转 iOS 设备的应用程序。我有兴趣获得旋转度数的粗略近似值（根本不必精确）。有这方面的API吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:02:16.360

是的。它被称为[核心运动](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CoreMotion_Reference/_index.html)。

# java - 有或没有泛型的Instanceof

> ID：14535384
> 
> 赞同：8
> 
> 时间：2013-01-26T08:59:19.190
> 
> 标签：java, generics, instanceof

我对 Java 中的泛型和运算符有疑问`instanceof`。

进行这样的*instanceof 检查*是不可能的：

```
if (arg instanceof List<Integer>)  // immposible due to
                                   // loosing parameter at runtime 
```

但可以运行这个：

```
if (arg instanceof List<?>) 
```

现在是我的问题 -**和****之间有什么区别** 吗？`arg instanceof List` **`arg instanceof List<?>`**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T09:00:49.297

Java 泛型是通过*擦除*实现的，也就是说，附加的类型信息 ( `<...>`) 在运行时将不可用，但会被编译器擦除。它有助于静态类型检查，但不适用于运行时。

由于`instanceof`将在运行时而不是在编译时执行检查，因此您无法`Type<GenericParameter>`在`instanceof ...`表达式中进行检查。

`List`至于您的问题（您可能似乎已经知道泛型参数在运行时不可用）和之间没有区别`List<?>`。后者是一个通配符，它​​基本上表示与不带参数的类型相同的东西。这是一种告诉编译器“我知道我不知道这里的确切类型”的方式。

`instanceof List<?>`归结为`instanceof List`- 完全相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T09:17:19.137

`List and List < ? >`不一样，但在这种情况下，当您使用**instanceof**运算符时，它们的含义相同。

**instanceof**不能与泛型一起使用，因为泛型在运行时不存储任何类型信息（由于擦除实现）。

这一点可以通过以下主要方法清除。我已经声明了两个列表（一个是整数类型，另一个是字符串类型）。并且**instanceof**的行为相同`List and List < ? >`

```
public static void main(String[] args){
    List<Integer> l = new ArrayList<Integer>();
    List<String> ls = new ArrayList<String>();

    if(l instanceof List<?>){
        System.out.print("<?> ");
    }

    if(l instanceof List){
        System.out.print("l ");
    }

    if(ls instanceof List<?>){
        System.out.print("<?> ");
    }

    if(ls instanceof List){
        System.out.print("ls ");
    }
     } 
```

输出是： `<?> l <?> ls`

在上面的 main 方法中，所有 if 语句都为真。所以很明显，在这种情况下`List and List<?>`是相同的。**

# node.js - 如何使用 Kue 处理计划的、重复的工作？

> ID：14535387
> 
> 赞同：4
> 
> 时间：2013-01-26T08:59:46.150
> 
> 标签：node.js, worker, job-queue, kue

在我的 webapp 中，用户可以创建需要在每个月的特定日期生成和发送的定期发票。例如，可能需要在每月 5 日发送发票。

我正在使用 Kue 来处理我所有的后台作业，所以我也想在这种情况下这样做。

我目前的解决方案是使用每小时`setInterval()`创建一个工作。`processRecurringInvoices`然后，此作业将从数据库中查找所有定期发票，并`generateInvoice`为每个定期发票创建一个单独的作业。

然后，该`generateInvoice`作业将实际生成发票，如果需要，还将创建一个`sendInvoiceToEmail`通过电子邮件发送发票的作业。

目前这个解决方案对我来说看起来不错，因为它很好地分离了关注点，但是，我有以下问题：

1.  我不确定是否应该等待所有“子”作业完成，然后再调用主要`processRecurringInvoices`作业的 done()？
2.  我应该在哪里处理错误？我应该将它们交还给`processRecurringInvoices`工作还是应该为每项工作单独处理它们？
3.  我如何确保如果处理需要很长时间（超过一个小时），并且其中一个`processRecurringInvoices`或任何一个子作业仍在运行，`processRecurringInvoices`则不会再次创建该作业？有点像一份独特的工作，还是相互排斥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-16T22:22:55.110

1.  与“processRecurringInvoices”不同，将其视为启动其他单独发票处理作业的作业可能更容易。以这种方式考虑，一旦发票处理作业已入队，您可以安全地调用 done() 来启动它们的作业。
2.  以问题 1 中描述的方式思考问题，应在每个单独的发票处理作业中处理错误。如果在查找潜在发票作业时发生错误，则可能会在 processRecurringInvoices 作业中进行处理。
3.  您可以使用它`kue.Job.rangeByType()`来搜索当前活跃的工作。如果作业处于活动状态，您可以跳过再次启动它。

# c# - 哪些类型的数据可以存储在 cookie 中？

> ID：14535388
> 
> 赞同：12
> 
> 时间：2013-01-26T09:00:07.367
> 
> 标签：c#, asp.net

我正在使用 C# 学习 ASP.net，我想知道我们是否可以在 cookie 中存储字符串以外的数据，例如日期/时间或十进制或双精度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T09:03:17.030

您可以序列化为 a`string`并反序列化回该类型的任何类型的数据都可以存储在 cookie 中。例如：`Object`, `DateTime`, `Int`,`Decimal`等。

* * *

这完全取决于您的编码逻辑；字符串几乎可以转换回任何东西，

*   目的
*   诠释
*   十进制
*   约会时间
*   参考您可能为来宾用户保留的任何临时表/值

* * *

> 是否可以从 cookie 中获取对象？

不，不是你想要的那样直接。不要考虑 ASP.NET。想一想[HTTP cookie](http://en.wikipedia.org/wiki/HTTP_cookie)实际上是什么。它是一个 HTTP 标头。HTTP 标头只是纯字符串值。HTTP 协议中不存在对象的概念。

因此，您需要将拥有的 .NET 对象序列化为字符串，然后将其反序列化。

.NET 中有不同的序列化程序可供您使用。例如，使用[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)然后[Base64 编码](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)生成的字节数组以存储到 cookie 中。

反序列化是逆过程——您从 cookie 中读取值（始终是字符串），然后[Base64 将](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)其解码为字节数组，然后使用`BinaryFormatter`.

请记住，cookie 的大小是有限的，并且会因不同的浏览器而异。所以不要期望将大对象放入cookies。该值将被剥离，您将获得损坏的数据。如果对象的总序列化值大于 2k 个字符，我不会使用它们。

让我们举例说明前面描述的过程：

```
public class cookieTest
{
    testC test;
    public cookieTest()
    {
        test = new testC();
    }
    public testC GetTestC
    {
        get
        {
            var cookie = HttpContext.Current.Request.Cookies["test"];
            return Deserialize<testC>(cookie.Value);
        }
        set
        {
            var cookie = new HttpCookie("test");
            cookie.Expires = DateTime.Now.AddHours(8);
            cookie["first"] = Serialize(value);
            System.Web.HttpContext.Current.Response.Cookies.Add(cookie);
        }
    }

    private static string Serialize<T>(T instance)
    {
        using (var stream = new MemoryStream())
        {
            var serializer = new BinaryFormatter();
            serializer.Serialize(stream, instance);
            return Convert.ToBase64String(stream.ToArray());
        }
    }

    private static T Deserialize<T>(string value)
    {
        using (var stream = new MemoryStream(Convert.FromBase64String(value)))
        {
            var serializer = new BinaryFormatter();
            return (T)serializer.Deserialize(stream);
        }
    }
} 
```

### [信用与参考](https://stackoverflow.com/questions/12996305/c-sharp-cookie-cannot-convert-type-string-to-x)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T09:05:30.930

数据始终存储为 type `String`。但是，由于您是存储数据的人，因此您应该知道数据类型。因此，在读回数据时，您可以使用适当的转换函数来获取您需要的任何数据类型。

# java - 正则表达式匹配任何电子邮件

> ID：14535389
> 
> 赞同：0
> 
> 时间：2013-01-26T09:00:09.317
> 
> 标签：java, regex

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

我正在开发一个 Python 应用程序，它匹配任何电子邮件地址，即使它包含 at 、 dot 甚至单词之间的空格。

帮助我开发正则表达式以获得预期的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:52:41.520

您可以使用如下表达式：

```
[\w.+]+(?:@|\s+at\s+|\s*\(at\)\s*)(?:[\w+-]+(?:\.|\s+dot\s+))+\w+ 
```

# iphone - 如何使用命令行将 ipa/app 文件安装到 iPhone 中？

> ID：14535392
> 
> 赞同：31
> 
> 时间：2013-01-26T09:00:21.513
> 
> 标签：iphone, ios, ipa

我想知道如何仅使用命令行将 ipa/app 文件安装到 iPhone 中？

该设备可能没有越狱或已经越狱。

我尝试使用命令行：`xcodebuild`，但失败了。我没有找到如何设置目的地的参数，可能是一个真实的设备，而不是一个模拟器。

我有什么选择？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-01T17:59:48.323

我知道的三种方式：

*   [这些人用 Ruby 编写了一个工具](http://gamua.com/blog/2012/03/how-to-deploy-ios-apps-to-the-iphone-via-the-command-line/)来做到这一点。它使用[Fruitstrap](https://github.com/ghughes/fruitstrap)库，而后者又使用 Apple 的私有 API 之一，因此将来可能会中断。

*   您也可以单独使用 Fruitstrap，但是您需要一个 .app 目录，而我上面链接的 Transporter Chief 工具同时支持 .app 和 .ipa 部署（根据您的回答要求）。

无论哪种情况，您都需要安装 XCode 才能使其工作，但设备不需要越狱。

*   第三，该库还有一个[用于 OS X 的二进制分发版](https://github.com/benvium/libimobiledevice-macosx)`libimobiledevice`，它使 Linux 机器能够与 iOS 设备通信。这有几个不同的工具，其中一个可以使用以下语法将有效的签名 IPA 安装到设备：

    ```
    ideviceinstaller -i myapp.ipa 
    ```

    这种方法的优点是它不需要 XCode 甚至 iTunes。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-11-05T14:33:43.833

使用新的 Apple Configurator 2 应用程序，您可以从菜单中**安装自动化工具...。**这将增加对命令行工具“cfgutil”的支持。

cfgutil 允许您从命令行使用`cfgutil install-app <AbsolutePathToIpa>`. 我们在构建服务器上使用它来使用最新构建自动更新设备。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-13T11:51:16.050

我刚刚收集了一篇文章（要点）如何实现这一点，使用

1.-[深圳](https://github.com/nomad/shenzhen) **马特图书馆**

2.- **Phonegap 的库** [ios-deploy](https://github.com/phonegap/ios-deploy)

在这里阅读：

**[如何生成和安装 IPA 文件](https://gist.github.com/phynet/38afad2170907d2c1ccd)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-14T06:21:03.033

我试过 libimobiledevice-macosx。在 iPhone 5 上运行良好。iOS 版本 6.1.4。我能够安装应用程序并查看 xcode 中的日志输出 :) 谢谢！

# c# - 在 linq 查询中附加字符串 where 条件

> ID：14535393
> 
> 赞同：1
> 
> 时间：2013-01-26T09:00:21.960
> 
> 标签：c#, entity-framework, linq-to-entities

```
string StrWhere = string.Empty;
StrWhere = " AND ID =5";
String StrQuery ="SELECT * FROM CITY_MAS WHERE + StrWhere"; 
```

我想在 LINQ 中实现同样的目标。类似于以下查询的内容...

```
var result = from c in db.CITY_MAS   
         where + StrWhere
         select new { c.ID,c.Name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:10:24.463

您可以使用 Dynamic Linq 动态添加条件。

请参阅[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:28:57.610

您可以使用 DynamicLINQ（也可以与 LINQ to SQL 一起使用） - 请参阅[Maarten 的帖子](https://stackoverflow.com/a/14535444/266919)- 或者您可以使用以下方法：

`ObjectQuery<T>`包含一个`Where`允许定义字符串自定义谓词的方法。因此，您的查询可以重写如下：

```
var strWhere = "it.ID = 5";
var result = objSet.Where(strWhere); 
```

在 where 子句中，`it`指的是当前对象/表 - 类似于`this`c#。是`objSet`一个`ObjectSet<CITY>`（继承自`ObjectQuery<T>`）。

视情况而定，您使用 an`ObjectContext`或 a`DbContext`的方式会`objSet`有所不同：

*   对象上下文

在一个`ObjectContext` `CITY`已经是一个`ObjectSet<CITY>`所以不需要真正的额外操作，所以：

```
var objSet = db.CITY; 
```

*   DbContext（EF 代码优先）

这`CITY`是一个`DbSet<CITY>`并且描述的方法覆盖`Where`不可用。但是，每个`DbContext`都有一个基础`ObjectContext`，您可以使用它来执行一些更复杂的查询。你只需要得到它，然后创建`ObjectSet`：

```
// assuming: using System.Data.Entity.Infrastructure;

var var objContext = ((IObjectContextAdapter)ctx).db;
var objSet = objContext.CreateObjectSet<CITY>(); 
```

另请参阅[此博客文章](http://zeitknecht.de/2012/07/21/sorting-with-entity-framework-code-first-and-mvc/)以了解其他用途。`ObjectSet<T>.Where`可以在[此处](http://msdn.microsoft.com/en-us/library/bb338811.aspx)找到有关该方法的完整文档。

# c++ - 捕获从其参数抛出的函数中的异常

> ID：14535399
> 
> 赞同：2
> 
> 时间：2013-01-26T09:01:41.867
> 
> 标签：c++, function, exception, c++11

```
void foo(int arg);
int foo2() {throw std::out_of_range("error!"); return 5;}

//Now I do this like that:
try { foo(foo2()); }
catch(std::out_of_range) {} 
```

而我想要做的是在 foo 函数中捕获异常。但是我不知道如何将 try 块放入参数列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:04:48.293

你不能，因为在执行之前没有抛出异常`foo()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T09:25:02.607

你不能。您要么需要将调用拉出`foo2`调用 to `foo`，然后在调用例程中处理异常，因此 -

```
int param;
try { 
   param = foo2(); 
} catch(std::out_of_range) {}
foo(param); 
```

或`foo2`作为函数传递给`foo`，并在内部对其进行评估`foo`，如下所示 -

```
void foo(int (*arg_func)()) {
  int arg;
  try { 
    arg = arg_func();
   } catch(std::out_of_range) {
    std::cout << "out of range ";
   }
} 
```

然后调用看起来像这样——

```
foo(foo2); 
```

当然，现在您总是必须将函数传递给`foo`，而不是文字或表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T13:00:42.720

大多数时候，我更喜欢@iagreen 的解决方案。但在他/她的解决方案中，存在*依赖问题*：

*   应该`foo`知道`foo2`的签名吗？

当然，我们可以在您最初的通话中得出一些结论`foo(foo2())`

1.  的返回值`foo2`应该可以*转换为 int*
2.  `foo`不需要知道`foo2`'s 参数的数量和它们的类型，甚至不需要知道之前调用的函数是什么`foo`

所以我认为***Variadic Template***的实现在大多数情况下更合适。

```
template < typename F, typename... Args >
void foo( F f, Args&&... args ) {
    int ret = f( std::forward<Args>(args)... );
    std::cout << "ret = " << ret << std::endl;
} 
```

# php - PHP只上传图片错误！如何解决这个问题？

> ID：14535402
> 
> 赞同：0
> 
> 时间：2013-01-26T09:02:22.340
> 
> 标签：php, file-upload, restriction

> **可能重复：**
> [严格标准 php 错误](https://stackoverflow.com/questions/14448316/strict-standards-php-error)

嗨，php 中的上传脚本有问题。我试图让它只接受图像，但我得到一个错误，我不知道如何修复它。当我删除唯一的图像部分时它工作正常。我希望有一个人可以帮助我 ：）

我得到的错误代码：

> **严格标准：**只有变量应该通过引用在第 3 行的 C:\xampp\htdocs\upload_file.php 中传递无效文件

upload_file.php 代码：

```
<?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:05:42.007

您不能调用`end()`的结果`explode()`，因为它需要一个变量作为第一个参数。

根据[文档](http://us3.php.net/manual/en/function.end.php#refsect1-function.end-parameters)：

> 数组。这个数组是通过引用传递的，因为它被函数修改了。这意味着您必须将一个实变量传递给它，而不是一个返回数组的函数，因为只有实际变量可以通过引用传递。

像这样做：

```
$foo = explode('.', $_FILES['file']['name']);
$extension = end($foo); 
```

另一种方法是停用严格的错误检查，但我想删除错误会更好。

# visual-studio - Visual Studio 2012 命令窗口不支持“xsd”命令吗？

> ID：14535404
> 
> 赞同：23
> 
> 时间：2013-01-26T09:02:35.117
> 
> 标签：visual-studio, visual-studio-2012, xsd, xsd.exe, command-window

我读过可以直接在 Visual Studio (2010) 中运行 xsd 命令。我的机器上有 VS 2012，当我运行时

```
xsd XMLFile.xml 
```

我明白了

> 命令“xsd”无效。

那么，VS 2012 中是否不支持“xsd”命令，还有其他方法可以在 VS 2012 中执行“xsd”吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-26T09:36:59.003

xsd.exe 可从 VS2012 的“开发人员命令提示符”中获得，而不是 VS2012 IDE 中的命令窗口。

“VS2012 的开发人员命令提示符”本身可以从开始菜单 -> 所有程序 -> Microsoft Visual Studio 2012 -> Visual Studio 工具 -> Visual Studio Command Prompt For VS2012 启动

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-07T09:41:24.003

在 Visual Studio 2012 下，有一个名为**Past Special**的功能 ，它可以从 xml 文件生成类。

![VS 2012 中的特殊粘贴](../Images/1f6faac04c93bd38dfcf53ca4e56adb5.png)
请参阅此处：[将 XML 或 JSON 粘贴为 Visual Studio 中的类](http://www.developerbyte.com/others/paste-xml-or-json-as-a-class-in-visual-studio)。

*请注意，此功能至少需要 .NET 4.5。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-09T05:22:31.060

## 如何调出 Visual Studio 命令提示符：

他们说一张图片值一千字（适用于 Visual Studio 2017 - 社区版/Windows 10）：

[![如何调出 Visual Studio 命令提示符。](../Images/2bef6549a16076c0b7a29d0854bd7631.png)](https://i.stack.imgur.com/XgxxT.gif)

1.  调出 Visual Studio 命令提示符。
2.  现在对相关的 XML 文件运行 XSD 命令。

就这么简单！

# dart - Dart（在对象上）有类似“CheckSum”的东西吗？

> ID：14535411
> 
> 赞同：0
> 
> 时间：2013-01-26T09:03:38.667
> 
> 标签：dart, checksum

出于测试目的，我正在尝试设计一种方法来验证统计测试的结果在版本、平台等之间是否相同。在我们的对象集合中，有很多事情发生，包括整数、数字、日期、字符串等等。

最后，我想“知道”整个实例化对象集的总和为相同的值（只需执行诸如添加所有内部属性的 checkSum 之类的操作）。

我可以为每个内部值编写低级代码以返回 checkSum，但我在想也许这样的东西已经存在。

谢谢！

_swarmii

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:39:22.230

听起来您应该使用该[`serialization`](http://api.dartlang.org/docs/releases/latest/serialization.html)库（[通过 Pub 安装](http://pub.dartlang.org/packages/serialization)）。

这是一个简单的示例，可以帮助您入门：

```
import 'dart:io';
import 'package:serialization/serialization.dart';

class Address {
  String street;
  int number;
}

main() {
  var address = new Address()
    ..number = 5
    ..street = 'Luumut';

  var serialization = new Serialization()
    ..addRuleFor(address);

  Map output = serialization.write(address, new SimpleJsonFormat());

  print(output);
} 
```

然后根据您想要做什么，我相信您可以根据您的目的微调代码。

# opengl - 交错顶点提交对性能有何帮助？

> ID：14535413
> 
> 赞同：5
> 
> 时间：2013-01-26T09:04:23.983
> 
> 标签：opengl

我已经阅读并看到了其他问题，这些问题通常都指向将顶点位置和颜色等交错到一个数组中的建议，因为这可以最大限度地减少从 cpu 发送到 gpu 的数据。

我不清楚的是 OpenGL 是如何做到这一点的，即使使用交错数组，您仍然必须对位置和颜色指针进行单独的 GL 调用。如果两个指针都使用同一个数组，只是设置为从该数组中的不同点开始，那么绘图调用是否不会复制数组两次，因为它是两个不同指针的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T09:13:02.967

这主要是关于缓存。例如，假设我们有 4 个顶点和 4 种颜色。您可以通过这种方式提供信息（对不起，我不记得确切的函数名称）

```
glVertexPointer(..., vertex);
glColorPointer(..., colors); 
```

它在内部所做的是读取顶点 [0]，然后应用颜色 [0]，然后再次使用颜色 [1] 应用顶点 [1]。如您所见，例如，如果 vertex 的长度为 20 兆字节，那么 vertex[0] 和 colors[0] 将至少相距 20 兆字节。

现在，另一方面，如果您提供像 { vertex0, color0, vertex1, color1, etc.} 这样的结构，将会有很多缓存命中，因为 vertex0 和 color0 是在一起的，vertex1 和 color1 也是如此。

希望这有助于回答问题

编辑：在第二次阅读时，我可能没有回答这个问题。您可能想知道 OpenGL 是如何知道从该结构中读取哪些值的？就像我之前说的那样，使用 { vertex, color, vertex, color } 这样的结构，你告诉 OpenGL 顶点在位置 0，偏移量为 2（所以下一个将在位置 2，然后是 4，等等）和颜色从位置 1 开始，偏移量也为 2（所以位置 1，然后是 3，等等）。

另外：如果您想要一个更实际的示例，请查看此链接[http://www.lwjgl.org/wiki/index.php?title=Using_Vertex_Buffer_Objects_(VBO)](http://www.lwjgl.org/wiki/index.php?title=Using_Vertex_Buffer_Objects_(VBO))。您可以在那里看到它如何只提供一次缓冲区，然后使用偏移量来有效地渲染。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T12:08:26.647

我建议阅读：[Vertex_Specification_Best_Practices](http://www.opengl.org/wiki/Vertex_Specification_Best_Practices)

**h4lc0n**提供了很好的解释，但我想添加一些额外的信息：

*   当您的数据经常更改时，交错数据实际上会损害性能。例如，当您更改点精灵的位置时，您会更新 POS，但 COLOR 和 TEXCOORD 通常是相同的。然后，当数据交错时，您必须“触摸”其他数据。在这种情况下，最好有一个 VBO 仅用于 POS（或通常用于经常变化的数据），而第二个 VBO 用于恒定数据。
*   对 VBO 布局给出严格的规则并不容易，因为它是特定于供应商/驱动程序的。您的用法也可能与其他人不同。一般来说，需要为您的特定测试用例做一些基准测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:34:13.053

您还可以为分离不同的属性提出论据。假设 GPU 不是一个接一个地处理一个顶点，而是并行处理一堆（例如 16 个）顶点，在执行顶点着色器时会得到类似的结果：

*   读取所有 16 个顶点的属性 A
*   执行一些计算
*   读取所有 16 个顶点的属性 B
*   执行更多计算
*   ……

因此，您一次读取多个顶点的一个属性。从这个推理看来，交错属性实际上会损害性能。当然，这只有在带宽受限或由于某种原因无法隐藏内存延迟时才可见（例如，需要许多寄存器的复杂着色器将减少在给定时间可以运行的顶点数量） .

# matlab - 在matlab中使用reshape函数时出错

> ID：14535415
> 
> 赞同：0
> 
> 时间：2013-01-26T09:04:41.433
> 
> 标签：matlab

这是我程序中的一段代码

```
%read in the message image and reshape it into a vector
file_name='innocence.bmp';
message=double(imread(file_name));
Mm=size(message,1);   %height 
Nm=size(message,2);   %Width 
message_vector=round(reshape(message,Mm*Nm,1)./2); 
```

我收到此错误

```
??? Error using ==> reshape
TO RESHAPE the number of elements must not change.
Error in ==>dwt at 31  message_vector=round(reshape(message,Mm*Nm,1)./2); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:16:06.723

如果您只想将 [Mm x Nm] 矩阵重塑为 [1 x Mm*Nm] 向量，您可以使用：

```
message_vector=round(message(:)/2); 
```

# c# - 从 n 个连续数字中随机选择数字

> ID：14535421
> 
> 赞同：1
> 
> 时间：2013-01-26T09:05:50.630
> 
> 标签：c#, algorithm

给定一个从0开始的n个连续数的整数数组，即

```
0,1,2,..n 
```

我希望`n/2`随机选择数字。

说`n=5` 那么一个可能的集合是`0,3,5`。

如何轻松实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:19:58.157

您可以遍历数字并确定每个数字应该出现在结果中的概率：

```
int n = 5;
int left = (n + 1) / 2;
int[] result = new int[left];
Random rnd = new Random();

for (int i = 0; left > 0; i++) {
  if (rnd.Next(n + 1 - i) < left) {
    result[result.Length - left] = i;
    left--;
  }
} 
```

注意：这将始终产生排​​序结果。

### 编辑：

这是一个创建 200000000 个结果的测试运行，计算生成的组合（其中二进制数表示组合，例如 100110 是 0、3、4）：

```
010011 : 9999164
110001 : 10003346
010101 : 9990975
100101 : 9998154
101001 : 10006305
100110 : 10003350
101010 : 10000583
101100 : 9995335
011001 : 10000007
001011 : 10001492
001110 : 10001158
100011 : 9994680
110100 : 9998226
110010 : 9999954
011010 : 10002269
000111 : 10004752
010110 : 9996886
011100 : 9999196
111000 : 10001094
001101 : 10003074 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T09:09:33.177

我发现这样做的最简单方法是不完整的[Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。在 n/2 次迭代后停止。

洗牌实际上适用于两个数组，即随机选择的数字和尚未使用的数字池，因此可供选择。碰巧这两个数组的总大小是原始数组长度，因此可以通过分区将它们存储在适当的位置。

在 n/2 次迭代之后，表示已选择数字的分区是从原始数组中随机选择的。

另一种看待这一点的方式是，完全洗牌结果的前 n/2 个数字不会被 n/2+1 次或洗牌的后续迭代所改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T09:10:14.923

使用[Fisher-Yates Shuffle](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，然后选择`n/2`数组中的第一个项目。

正如@Patricia Shanahan 在她的回答中指出的那样，只需要`n/2`使用 Fisher-Yates 对数组中的第一个项目进行洗牌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T09:16:55.143

一种有效地使用二进制属性对选择进行编码的方法是：

1.  生成一个随机的 32 位无符号整数。

2.  这样做 n/32 次，并将它们放入一个名为 mask 的数组中

3.  这些随机整数的位选择所选数字。具体来说，如果单词大小为 32，那么如果 (masks[i/32] >> (i%32)) && 1 为真，则将选择 i。

由于随机 32 位整数平均有 16 个 0 和 16 个 1，因此此方法将接近您的 n/2 值。

假设你得到的 1 的实际数量是 W 并且与 n/2 相差 k，k = W - n/2

如果您选择的数字太少，则生成一个 0 到 n 范围内的随机整数，转到由该数字索引的那个位，并将遇到的第一个 0 更改为 1，向前搜索。

这样做k次。

在 k 太多的情况下，将遇到的第一个 1 更改为零。

这样做的好处是它也是存储子集的最紧凑的结构，每个位选择一个整数。你只需要范围，这个掩码数组，你就有你的选择。

此外，您生成的随机数必须比其他 shuffle 方法少 16 倍，从而提高效率。

最后，这种效率的提高随着字的大小而增加。对于 64 位无符号长整数，您获得的随机数比“n/2 交换排列方法”所需的随机数少 32 倍

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T09:13:03.013

一种方法是使用带有 Next 的 Random 对象来生成向量编号的索引。您将新的生成值添加到 ArrayList 或 HashSet 之类的结构中以记住它。对于每次新生成的索引，您都要验证该结构中是否存在该值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T22:55:57.963

写的时候不允许Linq`algorithm`吗？

```
int[] arrInts = new int[] {0, 1, 2, 3, 4, 5, 6};
var r = new Random();
var randomInts = arrInts.OrderBy(i => r.Next(arrInts.Length))
                        .Take(arrInts.Length/2)
                        .ToArray(); 
```

编辑：我不是 100% 确定性能，但使用`.AsParallel()`before可能会更好`.OrderBy()`。

我喜欢使用 Linq，因为它非常易读，而且我花了大约 5 秒来编写算法，而不是用几分钟来编写“手动”排序和循环。

# javascript - 如何在没有 jQuery 的情况下完成“使用 jQuery 的不可能的简单图像随机化器”

> ID：14535427
> 
> 赞同：0
> 
> 时间：2013-01-26T09:06:45.263
> 
> 标签：javascript, jquery

我想将随机`background-image`注入一个div。我[遇到](http://briancray.com/posts/simple-image-randomizer-jquery/)了以下代码，它使用 jQuery 库完美地做到了这一点：

**设置图像数组：**

```
var images = ['image1.jpg', 'image2.jpg', 'image3.jpg', 'image4.jpg', 'image5.jpg']; 
```

**使用先前定义的数组设置随机背景的 div：**

```
$('#div').css({'background-image': 'url(images/' + images[Math.floor(Math.random() * images.length)] + ')'}); 
```

事情是这样的——我想这样做而不必加载 jQuery 库。我喜欢上面代码的简单性，但我是 Javascript 语言的新手，我不知道要重新格式化它以便在没有 jQuery 的情况下使用。

我花了一些时间寻找上述代码的 Javascript 替代方案，但它们都相对冗长或不必要的“忙”。非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:15:21.260

这也可以在纯 JS 中轻松完成：

```
var div = document.querySelector('#div');
div.style.backgroundImage = 'url(images/' + 
   images[Math.floor(Math.random() * images.length)] + ')'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:16:40.357

一个普通的 javascript 代码可能是

`document.getElementById('div').style.backgroundImage = 'url(images/'+images[Math.floor(Math.random() * images.length)]+')';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:11:11.757

jQuery 如此受欢迎的原因是因为它允许在所有平台和浏览器上创建如此清晰简洁的代码。因此，如果您真的打算在纯 JavaScript 中重新创建那种清洁度……我怀疑这是可能的。我可能会建议您尝试将其重新创建为一个项目来自学 JavaScript，但我怀疑任何人都可以提出使用 jQuery 作为基础的更简洁的解决方案。

# android - 推特文字和图片

> ID：14535430
> 
> 赞同：0
> 
> 时间：2013-01-26T09:07:14.210
> 
> 标签：android, android-intent, twitter

按照这个简单的代码：

```
String tweetUrl = "https://twitter.com/intent/tweet?text=PUT TEXT HERE &url="+"https://www.google.com";
Uri uri = Uri.parse(tweetUrl);
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

也可以与那些文本和图像共享吗？不使用`twitter4j`库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-10T08:42:38.077

Try this it is worked for me. I will use it for share my product details. i will get details of product like name,image,description from the server and display in app and then share it to twitter.

Get image url from server.

```
URL url = ConvertToUrl(imgURL);
        Bitmap imagebitmap = null;
        try {
            imagebitmap = BitmapFactory.decodeStream(url.openConnection()
                    .getInputStream());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

Post image and text on twitter.

```
// post on twitter
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_SEND);
            intent.putExtra(
                    Intent.EXTRA_TEXT,
                    "Check this out, what do you think?"
                            + System.getProperty("line.separator")
                            + sharedescription);
            intent.putExtra(Intent.EXTRA_SUBJECT, sharename);
            intent.setType("image/*");
            intent.putExtra(Intent.EXTRA_STREAM,
                    getImageUri(HomeActivity.this, imagebitmap));
            intent.setPackage("com.twitter.android");
            startActivity(intent); 
```

Convert Uri String to URL

```
private URL ConvertToUrl(String urlStr) {
    try {
        URL url = new URL(urlStr);
        URI uri = new URI(url.getProtocol(), url.getUserInfo(),
                url.getHost(), url.getPort(), url.getPath(),
                url.getQuery(), url.getRef());
        url = uri.toURL();
        return url;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

Convert Bitmap to Uri

```
public Uri getImageUri(Context inContext, Bitmap inImage) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
    String path = MediaStore.Images.Media.insertImage(
            inContext.getContentResolver(), inImage, "Title", null);
    return Uri.parse(path);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:21:19.173

# function - 方案 - 将太多参数传递给函数不会导致错误？

> ID：14535433
> 
> 赞同：0
> 
> 时间：2013-01-26T09:07:31.310
> 
> 标签：function, functional-programming, scheme

给定以下代码：

```
(define (g x y) (* x y)) 

(define (f x y z)
   (define (h x y)(g (+ x y) x z))h) 
```

请注意，我将`3`参数传递到`g`, where`g`只接受`2`。

但是，解释器没有显示错误消息，为什么？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:13:15.923

你实际上并没有在这里调用 h ，只是返回它。正确格式化您的代码应如下所示：

```
(define (f x y z)
    (define (h x y)
        (g (+ x y) x z))
    h) 
```

因此，当您调用 (f 1 2 3) 时，您会返回 h。如果你打电话

```
((f 1 2 3) 1 2) 
```

那么解释器会给出一个错误。

# javascript - 无法使用循环在画布中加载多个图像

> ID：14535436
> 
> 赞同：0
> 
> 时间：2013-01-26T09:08:18.140
> 
> 标签：javascript, html, kineticjs

我正在尝试循环加载多个图像，但不知道为什么它不起作用。

```
 LoadCharactersImages2:function(Layer,roomObject)
    {
        var imgs = Array(5);
        var ImgBanners = Array(5);
        var sources = Array(5);
        var locationX = 100;            //x coordinate location of image
        var self = this;
            self.ImgloadCount = 0;

        sources[0] = "images/pacman/pacman_right.png";
        sources[1] = "images/pacman/pinkdown.png";
        sources[2] = "images/pacman/redleft.png";
        sources[3] = "images/pacman/yellowup.png";
        sources[4] = "images/pacman/blueright.png";

        for(var i = 0 ; i < 5;i++)
        {
            imgs[i] = new Image();
            imgs[i].src = sources[i];

            imgs[i].onload = function() {
                 ImgBanners[i] = new Kinetic.Image({
                  x: locationX,
                  y: 100,
                  image: imgs[i],
                });

                Layer.add(ImgBanners[i]);
                self.ImgloadCount++;
                self.AddtoStage(Layer,self);
                self.LoadUsersImages(self,roomObject,Layer);
            }

            locationX = locationX + 100;                
        }

    },

    AddtoStage:function(layer,self)
    {
        if(self.ImgloadCount == 5)
            self.stage.add(layer);
    }, 
```

`AddtoStage`加载所有图像后，将向舞台添加图层。现在为什么它没有在画布上显示图像是什么问题？

**编辑：**

现在我编辑了代码以使用@zeta建议的闭包但仍然没有成功。这是编辑后的代码。

```
 imgs[i].onload = (function(index){

         return function() {
             ImgBanners[index] = new Kinetic.Image({
              x: locationX,
              y: 100,
              image: imgs[index],
            });
                Layer.add(ImgBanners[index]);
                self.ImgloadCount++;
                self.AddtoStage(Layer,self);
                self.LoadUsersImages(self,roomObject,Layer);
                Layer.draw();
         }
        })(i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:03:52.700

你需要一个闭包：

```
 imgs[i].onload = (function(index){
             return function() {
                 ImgBanners[index] = new Kinetic.Image({
                  x: locationX,
                  y: 100,
                  image: imgs[index],
                });
             })(i); 
```

也可以看看：

*   [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T09:11:40.743

我通过从语句中删除返回函数解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:12:46.853

请看一下那个链接。在咖啡脚本循环中加载图像

[https://gist.github.com/4589644](https://gist.github.com/4589644)

# javascript - 创建 javascript 对象

> ID：14535437
> 
> 赞同：1
> 
> 时间：2013-01-26T09:08:41.497
> 
> 标签：javascript, loops

**设置：** 嗨。我正在尝试学习创建/实例化对象。我在想我应该能够创建多个对象，这些对象可能具有不同数量的类似作品（例如收集新闻文章），并且无论创建的顺序如何，都会“报告完成”。到目前为止，我对此还不清楚，所以这是一个基本示例，后面是所述问题：

```
function test(count){
    this.count = count;
    for(var i = 0; i< count; i++){}
    console.log(i);
}

new test(1000);
new test(10); 
```

**实际问题：**

根据上面的代码，我希望第二个实例首先打印，但事实并非如此。设置它的正确方法是什么，以便哪个对象完成其工作将首先打印？

*****修改我的问题***** 对不起......我真正想问的是如何设置对象以具有更多的异步行为。我是 Stack 的新手，所以如果我应该关闭/移动这个问题，请告诉我。**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:12:05.457

您没有创建不同的并行执行线程：第一个线程`test(1000)`在下一行开始之前完全执行。

在 Javascript 中，当您不使用 webworkers（您可能不应该使用）时，您的所有代码始终在单个线程中执行。该线程由浏览器根据事件唤醒，并在浏览器调用的函数返回时重新进入睡眠状态。

请注意，即使使用线程，即使在自然并行的语言中，您也几乎无法保证什么循环首先结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:12:30.707

一般来说，JavaScript 是使用同步执行模型，即事件队列。所有调用都放在这里，基本上是按照它们在源代码中出现的顺序（尊重它们所在的范围）。

因此，如果您启动某个功能，则在该功能完成之前不会执行任何其他操作。在您的情况下，您将两个调用都放在事件队列中，但第二个调用只会在第一个调用完成后执行。

但是，也有例外：[Worker](https://developer.mozilla.org/en-US/docs/DOM/Worker)或[AJAX 请求](https://developer.mozilla.org/en-US/docs/AJAX)。

这里的执行在通常的事件队列之外，您可以在执行完成后使用消息处理程序或回调来使用结果。但是，在大多数情况下，您无法确定调用的完成顺序，因为有很多情况会影响执行顺序（网络延迟、cpu 使用率等）。

就您而言，无论如何，您似乎都想加载外部资源。所以看看 AJAX 是如何工作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T09:12:51.167

第二个实例不先打印的原因是第一个调用`new test(1000)`在下一行`new test(10)`开始执行之前运行完成。

如果您希望第二个调用首先运行，请交换两行...

编辑：顺便说一句，任何体面的编译器都会完全删除这一行：

```
for(var i = 0; i< count; i++){} 
```

所以你甚至不能指望第一个电话比第二个电话花费更多的时间......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T09:13:02.440

只有在第一个对象被实例化后，第二个实例才会被实例化。
所以它首先打印 1000 之后`new test(10)`
因为它是单线程程序**

# code-generation - Xtend 模板符号

> ID：14535438
> 
> 赞同：0
> 
> 时间：2013-01-26T09:09:16.800
> 
> 标签：code-generation, xtend

我对 Xtend 模板表示法有疑问。

我想`«i=i+1»`在模板方法中做

```
def generateSomething() '''
...
«i=i+1»
... 
''' 
```

这`«i=i+1»`显然只是为了计算 i 更高，但它也显示了 i 在生成的文件中的值。但我不想要那个。有没有办法在不改变方法的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:31:57.430

您可以使用块表达式：

```
def generateSomething() '''
...
«{i=i+1 ''}»
... 
''' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:31:32.983

如果可以为您的代码使用[AtomicInteger](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html#getAndIncrement%28%29)而不是 int，那么这应该可以工作。

```
val i = new AtomicInteger
val generated = '''
        ...
        «i.andIncrement»
        ... 
        ''' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:50:27.087

`«FOR i : 0..iMaxInclusive» some text «somelist.get(i)» more text «ENDFOR»`

# c++ - 客观 c++ 运算符删除

> ID：14535449
> 
> 赞同：1
> 
> 时间：2013-01-26T09:11:11.867
> 
> 标签：c++, memory-management, memory-leaks

我在 Xcode 命令行应用程序中有以下代码：

```
#import <Foundation/Foundation.h>

#include <string>
#include <vector>
#include <iostream>

using namespace std;

int main(int argc, const char * argv[])
{
    vector<string> *pv = new vector<string>;
    vector<string> &v = *pv;

    v.push_back("juy");
    v.push_back("zxc");

    cout << v[0] << endl << v[1] << endl;

    delete pv;

    cout << v[0] << endl << v[1] << endl;

    cout << pv->operator[](0) << endl << pv->operator[](1) << endl;
    return 0;
} 
```

当我运行它时，这是输出：

> ```
> juy  
> zxc  
> juy  
> zxc  
> juy  
> zxc 
> ```

问题是：operator`delete`在objective-c++ 中工作吗？它会导致内存泄漏吗？

没有错误，没有异常，也没有警告！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:18:00.953

您的代码没有内存泄漏。但是，它在 之后的以下两行中具有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)`delete`：

```
cout << v[0] << endl << v[1] << endl;

cout << pv->operator[](0) << endl << pv->operator[](1) << endl; 
```

换句话说，在你之后`delete pv`，你是不允许取消引用`pv`的。如果你的程序在你崩溃的时候没有崩溃，并且如果内存仍然包含旧数据，那没有任何意义。行为仍未定义。

# symfony - 学说 2 属性不存在

> ID：14535451
> 
> 赞同：0
> 
> 时间：2013-01-26T09:11:31.230
> 
> 标签：symfony, doctrine-orm

这是我的实体：

```
/**
* @ORM\Table(name="Animal")
* @ORM\HasLifecycleCallbacks 
*/
class Animal {

    /**
    * @var integer $id
    * 
    * @ORM\Column(name="id", type="integer", nullable=false)
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="IDENTITY")     
    */
    private $id;

    /**
    * @var localizedcontent $lctitle
    *
    * @ORM\ManyToOne(targetEntity="localizedcontent",fetch="EAGER", cascade={"persist"})
    * @ORM\JoinColumn(name="lcTitle", referencedColumnName="pkId", nullable=false)
    */
    private $lctitle;

    /**
    * @var localizedcontent $lcdescription
    *
    * @ORM\ManyToOne(targetEntity="localizedcontent",fetch="EAGER", cascade={"persist"})
    * @ORM\JoinColumn(name="lcDescription", referencedColumnName="pkId", nullable=false)
    */
    private $lcdescription;

    /**
    * @ORM\PostLoad
    */
    public function postLoad(){
      $lct = $this->lctitle;
      $lcd = $this->lcdescription;          
    } 
```

这是我的 dql：

```
SELECT a,lct FROM Animal JOIN e.lctitle lct WHERE a.id=:id 
```

当我开始 xdebug 时，它告诉我 lcdescription 是一个代理对象并且 lctitle 不存在。我不知道为什么。我认为 postLoad 事件为时过早，因为此时尚未加载本地化内容，对吗？是否有其他侦听器可以读取与 Animal 对象相关的 lctitle 的值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:15:38.933

Doctrine 总是返回代理。这些类继承自实体类。如果您声明您的关系受保护而不是私有，这可能会有所帮助。

```
/**
* @var localizedcontent $lctitle
*
* @ORM\ManyToOne(targetEntity="localizedcontent",fetch="EAGER", cascade={"persist"})
* @ORM\JoinColumn(name="lcTitle", referencedColumnName="pkId", nullable=false)
*/
protected $lctitle; 
```

或者你可以写一个 getter 并在你的 post-load 函数中调用它

```
public function getLctitle() {
    return $this->lctitle;
}

public function getLcdescription() {
    return $this->lcdescription;
}

/**
* @ORM\PostLoad
*/
public function postLoad(){
  $lct = $this->getLctitle();
  $lcd = $this->getLcdescription();          
} 
```

# node.js - Nodejs 邮件合并

> ID：14535454
> 
> 赞同：1
> 
> 时间：2013-01-26T09:12:01.803
> 
> 标签：node.js, templates, mailmerge

nodejs 中是否有任何库可以用来创建模板进行邮件合并。我看到很多云服务

*   [http://saaspose.com/](http://saaspose.com/)
*   [http://www.docmosis.com/](http://www.docmosis.com/)

这是唯一的选择还是在nodejs中有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:50:48.047

我刚刚发布了[node-livedocx](https://github.com/kingsquare/node-livedocx)。这可能会帮助你！

# mac-app-store - 在不访问共享内存的情况下提交沙盒 MonoMac 应用程序？

> ID：14535456
> 
> 赞同：4
> 
> 时间：2013-01-26T09:12:09.133
> 
> 标签：mac-app-store, monomac

我在 MacAppStore 中有一个基于沙盒 MonoMac 的应用程序，该应用程序的最新更新已推送到 MAS 我收到来自 Apple 的消息，该应用程序访问 /dev/shm，并且允许此更新，但以后的更新不得访问 /开发/shm。我没有在我的应用程序中使用任何共享内存，所以我假设这是因为 MonoMac 的某些部分正在使用共享内存（这是有道理的）。将来我怎么可能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T13:49:54.170

共享内存访问是由`/dev/shm`探测文件夹时性能计数器的初始化引起的。`MONO_DISABLE_SHARED_AREA`为了避免这种情况，引入了一个名为的环境变量。请参阅[mono-mmap.c](https://github.com/mono/mono/blob/master/mono/utils/mono-mmap.c)源文件以了解更多信息。

**更新**：[此变量的错误](https://bugzilla.xamarin.com/show_bug.cgi?id=12655)已在 3.0 系列中修复。

# algorithm - 需要解释来计算字符串的美感

> ID：14535462
> 
> 赞同：1
> 
> 时间：2013-01-26T09:12:53.647
> 
> 标签：algorithm

[这](https://www.facebook.com/hackercup/problems.php?pid=475986555798659&round=185564241586420)是一个问题的链接。

根据问题陈述，很明显字符串的美是其字母的总和。

而 From*每个字母的美感是介于 1 和 26 之间的整数，包括 1 和 26，没有两个字母具有相同的美感*

据此，我怎么能假设一封信的美丽。

他们是如何将“ **ABbCcc** ”的美度计算为 152 的？

*我不需要问题的解决方案，我只需要对给定输出的解释。*

您的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:14:53.510

字母 c 的美是 26，b 是 25，a 是 24

总计=24+25*2+26*3=152

# c# - 在 C++ 中为 Windows Phone 8 使用 C# dll

> ID：14535468
> 
> 赞同：3
> 
> 时间：2013-01-26T09:13:08.780
> 
> 标签：c#, windows-phone-8, windows-phone, c++-cx, winprt

我有一个使用 Visual Studio 2012 创建的 Windows Phone 8 应用程序 - Visual C++ 下的“Windows Phone Direct3D 应用程序（仅限本机）”项目，以及一个使用目标平台“Windows Phone”的 Visual C# 组下的“Windows Phone 类库”项目创建的库操作系统 8.0”。我只需要在 C++ 代码中使用 C# dll。限制是我不能改变应用程序的架构，所以主入口点必须在 C++ 项目中，并从这里以某种方式调用用 C# 编写的代码。

如果我尝试在 C++ 应用程序中引用 C# dll，我会收到此错误

> 无法添加对 [dllname] 的引用，因为这两个项目针对不同的运行时。

基于[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714080(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714080(v=vs.105).aspx)，我还尝试通过 Visual C++“Windows Phone Runtime”间接引用 C# dll组件”，但是当我尝试添加对运行时组件的引用时，我再次遇到相同的错误。我试图更改一些项目设置，但没有任何效果。在我在网上找到的所有示例和演示中，对于 WP8，主要入口点始终是 C#。只有一些关于 Windows 商店应用程序的提示似乎表明可以从 C++ 使用 C#，但我没有找到任何参考明确说明我在 wp8 上的场景是可能的或不可能的。

提前感谢任何分享解决方案或任何建议的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T05:47:03.547

迟到的答案，但简短的故事是你不能。在 Windows 8 C# 中，WinRT dll 是完整的 WinRT dll，然后可以被任何框架（WinJS、Native 等）使用，但对于手机来说却不是这样。

在手机上，C# 可以使用 C++ WinRT 对象（来自 C++ dll），但反之则不行。您可以通过让您的 C# dll 调用您的 C++ dll 并传递函数指针来创建诡计，但仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T13:22:21.367

我喜欢这个： http: [//www.developer.nokia.com/Community/Wiki/C%2B%2B_support_from_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/C%2B%2B_support_from_Windows_Phone_8)。您可以将接口注入到 .winmd C++ 端元数据中，该接口可以在 C# 中引用和实现。比使用委托要干净得多...仍然必须从 C# 启动...

# c# - 正则表达式需要小修复

> ID：14535469
> 
> 赞同：0
> 
> 时间：2013-01-26T09:13:09.227
> 
> 标签：c#, regex, validation, email

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)
> [电子邮件验证 - 正则表达式](https://stackoverflow.com/questions/1903356/email-validation-regular-expression)

我使用下面的正则表达式来验证电子邮件地址。但是我们发现这个正则表达式接受了“*”或“/”，但它不应该！

```
Regex.IsMatch(email, 
   @"^(?("")(""[^""]+?""@)|(([0-9a-z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-z])@))" +
   @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-z][-\w]*[0-9a-z]*\.)+[a-z0-9]{2,17}))$",
   RegexOptions.IgnoreCase, 
   TimeSpan.FromMilliseconds(250)); 
```

请我需要你的帮助来改进 RE 以不允许“*”或“/”仅供参考上面的代码在 C# 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:30:19.793

你需要一个大的修复..

如果您想验证电子邮件地址正则**表达式**不是正确的选择。

[按照SLaks](https://stackoverflow.com/questions/1903356/email-validation-regular-expression/1903368#1903368)的建议使用[MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

```
try 
{
   address = new MailAddress(address).Address;
   //address is valid here
} 
catch(FormatException) 
{
   //address is invalid
} 
```

* * *

但如果你沉迷于正则表达式..就这样做

```
.*@.* 
```

# android - 将图像分享到我的应用程序后返回文件管理器/图库

> ID：14535473
> 
> 赞同：0
> 
> 时间：2013-01-26T09:13:21.657
> 
> 标签：android, intentfilter

我正在使用意图过滤器将图像共享到我的应用程序。上传活动是（B），我的应用程序中的主要活动是（A）。所以从文件管理器/图库发送到活动（B）的图像然后用户点击上传，我杀死（B）活动

```
 finish(); 
```

我正在使用

```
 onActivityResult() 
```

方法来检查用户是否来自上传活动，并使用 finish() 函数结束主活动 (A)。现在我杀死了我的应用程序，但系统将用户带到家或应用程序列表。我希望系统将用户带回文件管理器或图库以分享更多照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:47:08.647

我必须在清单文件中向 Activity 添加一个属性，您必须更改使用 Activity 的方式在 Activity 标记中添加此代码

```
 android:launchMode="singleTask" 
```

更多信息：http: [//developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

# html - 用户如何使输入类型日期为空？

> ID：14535475
> 
> 赞同：7
> 
> 时间：2013-01-26T09:14:12.983
> 
> 标签：html, date, input

我希望使用 HTML5 DATE 中的新输入属性，只有一个问题，在项目的逻辑中，用户必须可以选择删除该值，但我看不到，如何在此输入上设置空值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T05:04:01.513

假设您要将值显示为`dd/mm/yyyy`，然后单击`Clear`按钮。

![在此处输入图像描述](../Images/fd4c8d134d8eb6062e0b1dd4b95c5e4e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T02:02:28.833

在 Chrome 上的 HTML5 中，日期选择器弹出窗口底部有一个“清除”按钮（在“今天”旁边）

```
<input type="date" value=""> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-13T04:19:43.950

`<input type="date" name="NameItAnythingYouWant" value="">`

# sql - sql中的主键到底是什么意思

> ID：14535477
> 
> 赞同：1
> 
> 时间：2013-01-26T09:14:44.447
> 
> 标签：sql

我创建了一个这样的表：

```
CREATE TABLE Persons
(
    P_Id int NOT NULL,
    LastName varchar(255) NOT NULL,
    FirstName varchar(255),
    Address varchar(255),
    City varchar(255),
    PRIMARY KEY (P_Id)
) 
```

但我无法理解主键的用途

```
PRIMARY KEY (P_Id) 
```

在那张桌子上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:19:29.257

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms191236%28v=sql.105%29.aspx)：

> 表通常具有一列或列组合，其中包含唯一标识表中每一行的值。这一列或多列称为表的主键 (PK)，并强制执行表的实体完整性。您可以通过在创建或修改表时定义 PRIMARY KEY 约束来创建主键。

# ruby-on-rails - 使用 ruby curl easy.http_put（数据）发布文件

> ID：14535478
> 
> 赞同：2
> 
> 时间：2013-01-26T09:14:44.447
> 
> 标签：ruby-on-rails, ruby, http, curl, put

我的任务是在 ruby​​ 中使用 HTTP PUT 发送文件。

在命令提示符下，我可以使用以下命令获得成功响应。

```
curl -X PUT -vN https://myexample.com/blah/myaccount --insecure -H "Connection: keep-alive" -H "Content-Type: audio/wav" -H "Content-Transfer-Encoding: base64" -d @/myfile.wav 
```

尝试在 ruby​​ 中使用 Curl::Easy 发送请求时。我收到一个错误响应代码，说明音频有问题。

```
c = Curl::Easy.new("https://myexample.com/blah/myaccount")
c.timeout = 30
c.ssl_verify_host = false
c.http_put ( "Content-Transfer-Encoding=base64;Connection=keep-alive;Content-Type=audio%2fwav;#{File.read(/myfile.wav)}") 
```

# java - SQL PreparedStatement；我做对了吗？

> ID：14535482
> 
> 赞同：0
> 
> 时间：2013-01-26T09:15:22.533
> 
> 标签：java, sql, sql-server, jdbc, prepared-statement

我正在构建一个 Web 应用程序，在静态类和数据库之间有一个（非池）全时（jdbc）连接。预计这是一个低流量站点，并且静态方法是同步的。为了加快对产品信息的访问，我第一次尝试 PreparedStatements。当我在 localhost 上进行测试时，确保我是唯一一个运行该应用程序的人。我似乎很清楚，我准备好的语句比我在此过程中早些时候使用的未准备好的语句要慢。这可能不是一个公平的比较。未准备好的语句从一个表中得到一个结果集，然后就完成了。从下面的代码可以看出，我对准备好的语句所做的事情涉及三个表和多个查询。但由于这是我第一次，我会很感激评论和评论。这确实有效；IE

下面的第一个方法 (initialize()) 在应用程序首次启动时从 servlet init() 方法调用一次。第二种方法 (getItemBatch()) 检索有关与产品名称 (Titel) 匹配的尽可能多的产品项目的信息。我的小开发/测试数据库只有不到 100 个（总计）项目，每个名称只有 1-3 个项目匹配；大多数情况下只有 1\. 服务器应用程序和数据库在同一台机器上，我通过 localhost 从浏览器访问。与获取上述主产品列表（所有项目）相比，我对持续可感知的等待详细产品数据感到惊讶。

```
 public static boolean initialize (Connection connArg, String dbNameArg, String dbmsArg) {

    con = connArg;
    dbName = dbNameArg;
    dbms = dbmsArg;
    sqlserver_con = connArg;

    ItemBatchStatement =
          "select Cartnr, Hgrupp, Prisgrupp, Moms from dbo.Centralartregister " +
           "where Titel = ?";

    ForArtNrStatement =
          "select Artnr, Antal from dbo.Artikelregister " +
           "where Cartnr = ? and Antal > 0";

    ItemHgruppStatement =
            "select Namn from dbo.Huvudgrupper " +
             "where Hgrupp = ?";

    try {
      con.setAutoCommit(false);
      getItemBatch = con.prepareStatement(ItemBatchStatement);
      getForArtNr = con.prepareStatement(ForArtNrStatement);
      getItemHgrupp = con.prepareStatement(ItemHgruppStatement);
    } catch (SQLException e) {
      return(false);
    } finally {
      try {con.setAutoCommit(true);} catch (SQLException e) {}
    }
    return(true);
  } 
```

-

```
 public static synchronized String getItemBatch (String Titel) throws SQLException {

    String ret_xml;
    ResultSet rs  = null;
    ResultSet rs1 = null;
    ResultSet rs2 = null;

    Titel = charChange(Titel);
    ret_xml = "<ItemBatch Titel='" + Titel + "'>";
    try {
      con.setAutoCommit(false);
      getItemBatch.setString(1,Titel);
      rs = getItemBatch.executeQuery();
      while (rs.next()) {
        getForArtNr.setInt(1,rs.getInt("Cartnr"));
        rs1 = getForArtNr.executeQuery();
        getItemHgrupp.setInt(1,rs.getInt("Hgrupp"));
        rs2 = getItemHgrupp.executeQuery();
        if (rs1.next() && rs2.next()) {
          ret_xml += "<item><Hgrupp>" + rs2.getString("Namn") + "</Hgrupp><Price>" + rs.getInt("Prisgrupp") + "</Price><Moms>" + rs.getInt("Moms") + "</Moms><Cartnr>" + rs.getInt("Cartnr") + "</Cartnr><Artnr>" + rs1.getInt("Artnr") + "</Artnr></item>";
        }
      }
      ret_xml += "</ItemBatch>";
      return(ret_xml);
    } catch (SQLException e) {
      return("SQLException: " + e);
    } finally {
      try {con.setAutoCommit(true);} catch (SQLException e) {}
      if (rs != null) {rs.close();}
      if (rs1 != null) {rs1.close();}
      if (rs2 != null) {rs2.close();}
    }
  } 
```

.

**更新：**我仍在谷歌搜索并寻找做得更好的方法。让我补充一点供您考虑。

我正在通过 servlet 的 destroy() 方法关闭准备好的语句；调用上述方法“initialize()”以创建它们的同一个 servlet。我们的想法是创建一次（并且只有一次）并让所有用户永远都可以使用它们（即直到应用程序或服务器关闭）。我要找一种伪存储过程。我会直接使用存储过程，但是数据库的存在是为了支持另一个应用程序（他们的内部销售系统），我打算将它用于互联网销售只读...避免与他们的维护工作产生任何潜在冲突或协议等，不做任何事情来改变他们的数据库设置。我建议我的应用程序使用限制为只读权限的新帐户。想想看，我没有 t 测试我是否可以在该模式下使用 Prepared Statements；似乎它应该工作。

每个结果集都在创建它们的方法的 finally 块中关闭。我想这样可以吗？我为多个结果集（在后两个）重复使用相同的 RS 变量名称，但只关闭一次。可是等等！我什至需要那个吗？ResultSet 在方法的范围内声明。如果在不关闭旧的情况下重置它们不会导致泄漏，那么退出该方法应该也可以自行完成。它是一种静态方法，但每次使用时都会重置 ResultSets（至少）。因此，最多只有一组 ResultSet 句柄可供重用；不失控“泄漏”。

我想知道我是否可以同时在循环中发送两个选择请求，只需将它们变成一个用';'分隔的准备好的语句。或者刚刚发现“MultipleActiveResultSets=True”；允许 SQL Server 在单个连接上处理多个事务请求的文档……仍在调查此问题。或者有没有另一种方法来创建一个准备好的语句，通过一次提交来获取所有数据？（在我看来，往返次数太多了。）最后，我可能会从使用连接池中得到提升，但我还没有这样做。现在在我的项目中这是低优先级，但我可能必须在我们上线之前完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:32:42.603

如果你创建 web 应用程序并使用一些 web 容器，如 tomcat、jetty 等，你总是可以使用 jdbc 数据源和连接池。很简单。很好的解释在[这里](http://www.javaranch.com/journal/200601/JDBCConnectionPooling.html)

如果您不想使用连接池，我想最好使用上面链接中描述的方法范围连接

# android - 在视图分页器中显示视图后做动画（android）

> ID：14535483
> 
> 赞同：0
> 
> 时间：2013-01-26T09:15:23.460
> 
> 标签：android, view, android-viewpager, android-animation

嗨，我是 android 新手，我正在做一个简单的应用程序。我的应用程序包含一个简单的活动，它包含视图寻呼机。我的视图寻呼机没有屏幕 3。所以我的视图寻呼机工作正常。我的第一个和第二个屏幕包含一个按钮，当我单击该按钮时，它将转到第三个屏幕`setCurrentItem(2);`。

现在我想要的是，当我进入第三个屏幕时，它将渲染一个视图，并且只有在完全渲染该视图后几秒钟才会执行一些动画，例如翻转动画。

当我单击按钮时实际发生了什么，它直接转到该屏幕但不呈现该默认视图。它直接启动动画...

我的代码看起来像

```
public class HelpActivity extends Activity {

    private final int NUM_SCREENS = 3;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.help);
        mInflater = LayoutInflater.from(this);

        vp = (ViewPager) findViewById(R.id.pager);
        PagerAdapter pagerAdapter = new MyPagerAdapter();
        vp.setAdapter(pagerAdapter);

        }

    private OnClickListener signin = new OnClickListener() {

        @Override
        public void onClick(View arg0) {

                vp.setCurrentItem(2);
                // ******* do some animation on view 3 in pager views ....          
        }

    };

    private class MyPagerAdapter extends PagerAdapter {

        @Override
        public int getCount() {
            return NUM_SCREENS;
        }

        @Override
        public Object instantiateItem(View collection, int position) {

            View view = null;
            Typeface tf = Typeface.createFromAsset(getAssets(),
                    "fonts/sf_cartoonist_hand_bold.ttf");
            if (position == 0) {
                // display view1
                // on button click call sign in

            } else if (position == 1) {
                //display view 2
                //on button click call sign in
            } else if (position == 2) {

                //display view 3

            }

            ((ViewPager) collection).addView(view, 0);

            return view;
        }
    }

} 
```

单击按钮后我需要什么，它会跳到 view3 显示几秒钟，然后做动画……怎么做？需要帮助……谢谢……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:34:41.067

使用`Runnable`你可以保持你的动画，直到你的视图没有正确加载它，你必须测量你的视图加载多少秒，所以你可以根据你的视图加载时间传递延迟，如下所示：

```
Runnable runnableimage = new Runnable() {
            public void run() {
            //HERE YOUR ANIMATION
                image.startAnimation(animFast);

            }
        }; 
```

它在之后开始你的动画`2000 MilliSec`

> handler.postDelayed(runnableimage, 2000);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:36:59.760

`animate()`与启动延迟一起使用：

`mView.animate().rotationBy(360).setDuration(3000).setStartDelay(2000).start();`

# javascript - 如何在 JavaScript 中将 UTF8 字符编码为 Base64

> ID：14535484
> 
> 赞同：2
> 
> 时间：2013-01-26T09:15:26.063
> 
> 标签：javascript, encoding, utf-8, base64

我在处理中文时尝试过这样，但输出是~~乱码~~乱码：

```
var a = "你好";
undefined
a
"你好"
a = unescape(encodeURIComponent(a));
"ä½ å¥½"
a
"ä½ å¥½" 
```

与处理英语相比：

```
var a = "Hello";
undefined
a
"Hello"
a = unescape(encodeURIComponent(a));
"Hello" 
```

这是我的整个代码：

```
var content = $("div#test").html();
content = unescape(encodeURIComponent( content ));
content = window.btoa(content);
content = "data:image/svg+xml;filename:{{ request.session.access_token.uid }}.svg;base64," + content; 
```

**更新：**

我想要做的是将生成的 SVG 编码为数据 url 供用户下载。我通过首先将 SVG 转换为画布（使用 CanVG）并使用 html2canvas 生成 base64 来解决这个问题......最后它工作了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:39:11.920

尝试往返此，它工作正常：

```
decodeURIComponent(escape(window.atob(window.btoa(unescape(encodeURIComponent("‌​東京")))))) 
```

一些中间结果是否看起来是乱码是无关紧要的。

其中`window.btoa(decodeURIComponent(escape(unescape(encodeURIComponent("東京")))))`一条评论的问题是呼叫不平衡且顺序不正确。

# netbeans - 如何关闭 Netbeans 中奇怪的“框”光标和选择行为？

> ID：14535485
> 
> 赞同：81
> 
> 时间：2013-01-26T09:15:33.430
> 
> 标签：netbeans

我在 Netbeans 中有一些奇怪的行为。我想我不小心输入了一些组合键，弄乱了光标和选择行为。在图像中，您会明白我的意思：通常，如果您选择多行文本，您会在右侧屏幕截图中看到行为。

但我有左侧屏幕截图中的行为。此外，尝试使用 Shift 在某个位置插入文本，将其插入到右侧一些位置（= 不是光标所在的位置）。此外，当光标闪烁时，它会显示为虚线。

![网豆比较](../Images/a9105a363a973779452d84c6b15b1d85.png)

左侧屏幕截图中的选择被很好地绘制的事实并没有让我想到一个错误，而是一个功能。我似乎找不到再次关闭它的组合键。

所以我的问题是，这个功能是什么？为什么它存在，我用什么组合键打开它？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-01-26T09:32:43.663

一种可能是您安装[了矩形选择插件](http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=1174)。

然而，更有可能的候选者是编辑器核心中的[矩形选择功能](https://blogs.oracle.com/netbeansphp/entry/rectangular_selection)。在编辑工具栏上找到按钮，然后将其关闭。根据下面的有用评论，可以使用以下方法意外打开（并再次关闭）：

*   在 Windows 和 Linux 上：`Ctrl`++`Shift``R`
*   在 Mac 上：`Shift`+ `Meta`+`R`
*   在 Mac 上，如果上述方法不起作用：有些人报告说`Shift`++对他们`Command`有用`R`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-02T19:11:18.897

这个组合键 (Ctrl+Shift+R) 用于在 Eclipse 中打开类型等，所以当切换到 Netbeans 时，很多人会遇到这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-23T20:03:16.307

您可以使用它来编写与 sublime text 内容相同的多行

请参阅此示例：

[https://blogs.oracle.com/netbeansphp/entry/rectangular_selection](https://blogs.oracle.com/netbeansphp/entry/rectangular_selection)

# apache2 - centos 6.3 上的 Apache2 选项索引

> ID：14535487
> 
> 赞同：1
> 
> 时间：2013-01-26T09:15:40.980
> 
> 标签：apache2, centos, option, virtualhost, indexing

在新安装的 Centos 6.3 上

我从 Ubuntu 导入了虚拟主机的配置。这是配置的一部分

```
DocumentRoot /otherhome/test.cofares.net
ServerName test.cofares.net

<Directory "/otherhome/test.cofares.net">
  allow from all
  Options +Indexes
</Directory> 
```

[对http://test.cofares.net](http://test.cofares.net)的请求 我在错误日志中收到以下错误

```
Directory index forbidden by Options directive: /otherhome/test.cofares.net/ 
```

目录索引适用于子目录[http://test.cofares.net/test](http://test.cofares.net/test)是好的

任何建议缺少什么？

相同的配置适用于 Ubuntu Server 12.04。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:23:18.070

经过一番挖掘，我注意到这是一个全局规则（在 conf.d/welcome.conf 中），它阻止索引任何虚拟服务器的 / 目录

通过删除它现在可以了

这是必须改变的规则

```
<LocationMatch "^/+$">
  Options -Indexes
  ErrorDocument 403 /error/noindex.html
</LocationMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:38:17.863

尝试这个。并确保在应用后重新启动 apache：

```
<Directory "/otherhome/test.cofares.net">
  Options +Indexes FollowSymLinks
  AllowOverride all
  Order Allow, Deny
  Allow from All
  Satisfy All
</Directory> 
```

也许可以试试这个`Satisfy Any`：

```
<Directory "/otherhome/test.cofares.net">
  Options +Indexes FollowSymLinks
  AllowOverride all
  Order Allow, Deny
  Allow from All
  Satisfy Any
</Directory> 
```

**编辑：**那些似乎没有工作？然后试试这个。注意我正在设置整个`<VirtualHost>`指令并从指令中删除引号`<Directory>`：

```
<VirtualHost *:80>
   DocumentRoot /otherhome/test.cofares.net
   ServerName test.cofares.net

   <Directory /otherhome/test.cofares.net>
     Options Indexes FollowSymLinks
     Allow from All
   </Directory>

</VirtualHost> 
```

# python - pyqt - QGraphicsScene 的上下文菜单

> ID：14535491
> 
> 赞同：2
> 
> 时间：2013-01-26T09:16:27.783
> 
> 标签：python, contextmenu, pyqt4, qgraphicsscene

我有一个 QGraphicsScene，我将显示一个上下文菜单。但什么也没发生。

这是我的代码：

```
class graphicsScene(QtGui.QGraphicsScene):
  def __init__ (self, parent = None):
    super(graphicsScene, self).__init__ (parent)

  def contextMenuEvent(self, event):
    self.popMenu = QtGui.QMenu()
    self.popMenu.addAction(QtGui.QAction('test0', None))
    self.popMenu.addAction(QtGui.QAction('test1', None))
    self.popMenu.addSeparator()
    self.popMenu.addAction(QtGui.QAction('test2', None))
    self.popMenu.exec_(event.globalPos())

  def mousePressEvent(self, event):
    super(graphicsScene, self).mousePressEvent(event)
    pos = event.scenePos()
    item = self.itemAt(pos)

    if event.button() == QtCore.Qt.LeftButton:
      #do something

    elif event.button() == QtCore.Qt.RightButton:
      self.contextMenuEvent(event) 
```

我不知道如何解决这个问题。

谢谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:03:24.970

这可能会有所帮助：

```
class Table(QtGui.QGraphicsView):
  def __init__(self, parent=None):
    super(Table, self).__init__(parent)
    self.setScene(QtGui.QGraphicsScene())
    self.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)

  def contextMenuEvent(self, event):
    menu = QtGui.QMenu()
    menu.addAction('sample')
    menu.exec_(event.globalPos()) 
```

# ruby - 搜索数组并测试是否相等

> ID：14535494
> 
> 赞同：0
> 
> 时间：2013-01-26T09:16:54.893
> 
> 标签：ruby, arrays

我有两个班级：`Item`和`ItemCollection`。`Item`有几个属性：`attr1`、`attr2`、`attr3`等，并`ItemCollection`包含一个实例数组`Item`，以及一些操作方法。

问题 1：这是处理对象集合的适当方式吗？

我想要一个方法： ，它为实例数组中的某个项目`ItemCollection#itemExists(needleItem)`返回`true`if 。`needleItem.attr1 == attr1``ItemCollection`

问题2：最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:40:32.367

看起来你可以数数。[http://ruby-doc.org/core-1.9.3/Array.html#method-i-count](http://ruby-doc.org/core-1.9.3/Array.html#method-i-count)

简单的代码是：

```
def check_needle
  c = ItemCollection.count { |i|
      needleitem.attr1 == i.attr1 # Each time this value returns true it enumerates
  }

  c > 1
  # or 
  if c > 1 then return true end
end 
```

我想 needleitem 在数组中？如果是这样，c 的任何大于 1 的计数都应该没问题。如果不是，则 c 的任何大于 0 的计数都应满足。再加上你得到总数。

-道格拉斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:52:49.167

> 问题 1：这是处理对象集合的适当方式吗？

您可以从中派生您的`ItemCollection`类`Array`并免费获取其方法。

> 问题2：最好的方法是什么？

我看到两个选项（假设您遵循我之前的建议）：

1.  使用简单迭代的覆盖`include?`方法：`ItemCollection``each`

    ```
    class ItemCollection < Array
      def include?(item)
        self.each do |i|
          return true if i.attr1 == item.attr1
        end
        return false
      end
    end 
    ```

2.  为实例提供您自己的相等性测试并使用源自( s with equal 的`Item`默认版本将始终被视为相等)：`include?``Array``Item``attr1`

    ```
    class Item
      def initialize(attr1, attr2, attr3)
        @attr1, @attr2, @attr3 = attr1, attr2, attr3
      end

      attr_accessor :attr1, :attr2, :attr3

      def ==(another)
        self.attr1 == another.attr1
      end
    end 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T09:59:26.213

如果 ItemCollection 只保存数组和一些方法（没有其他相关数据）——那么就真的不需要那个额外的类了。只需使用数组并将方法定义为简单函数即可。

至于搜索数组——道格拉斯的答案可能是最好的。但是，另一种方法（可能效率较低）是使用从数组中的对象中`Array#map`提取`attr1`，然后`array#include?`搜索所需的值。例如

```
 collectionArray.map(&:attr1).include?(attr_to_find) 
```

语法等价于`&:attr1`{ |x| x.attr1 }

并用于将对象数组映射到仅包含所需属性的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:08:45.457

一个 ruby​​ 数组实例有超过 100 个方法，不包括 Object. 他们中的许多人非常灵活。该`any?`方法（包含在[enumerable](http://www.ruby-doc.org/core-1.9.3/Enumerable.html)中）采用一个块，允许您指定何时返回 true 的条件。

```
class Item < Struct.new(:attr1, :attr2)
end
p item_collection = Array.new(10){|n| Item.new(rand(10), n)}
#[#<struct Item attr1=7, attr2=0>, #<struct Item attr1=5, attr2=1>,
#<struct Item attr1=8, attr2=2>, #<struct Item attr1=3, attr2=3>, 
#<struct Item attr1=9, attr2=4>, #<struct Item attr1=8, attr2=5>, 
#<struct Item attr1=1, attr2=6>, #<struct Item attr1=6, attr2=7>, 
#<struct Item attr1=4, attr2=8>, #<struct Item attr1=6, attr2=9>]

p item_collection.any?{|i| i.attr1 == 3}
#true 
```

当 item_collection 应该有一个非常特殊的方法时，那么一种可能是在 item_collection 数组上定义它：

```
def item_collection.very_special_method
  self.select{|i| i.attr1 == i.attr2}
end
p item_collection.very_special_method
# [#<struct Item attr1=3, attr2=3>] 
```

# css - 更改 YUI 3 Treeview 中的默认文件夹图标

> ID：14535495
> 
> 赞同：0
> 
> 时间：2013-01-26T09:17:08.170
> 
> 标签：css, treeview, icons, yui

树视图中的默认图标（使用gallery-yui-treeview）是带有箭头或页面图标的文件夹图标。我想将其更改为加号/减号。我想需要对使用的皮肤做些什么，但我不知道是什么以及如何做。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:54:21.487

看看这个关于 YUI 皮肤的页面：http: [//yuilibrary.com/yui/docs/tutorials/skins/](http://yuilibrary.com/yui/docs/tutorials/skins/)

使用要显示的文件夹创建自己的精灵（默认为：tree_view_icons_blue_01_arrow_beside_folders.gif）

然后，覆盖显示文件夹的跨度，如下所示：

```
<style>
.yui3-treeview-label-content{
    background-image: url("my_new_folder_sprite.png");
}
</style> 
```

# c - 在 linux 下使用 C 控制 C920 Logitech HD Pro 网络摄像头

> ID：14535500
> 
> 赞同：0
> 
> 时间：2013-01-26T09:17:52.627
> 
> 标签：c, linux, webcam, logitech

他们是否有任何 C api 来控制 C920 Logitech HD Pro 网络摄像头。Cam 在 windows 下带有一个控制器来控制其方向并可以跟踪人脸，我需要在 linux 下使用 C 来做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T17:52:55.547

这是一个旧帖子，所以也许它不再相关。也是 IANA 专家......但显然这个网络摄像头是 UVC 兼容的，所以 UVC 驱动程序将是查看的地方。我有一个，它可以在我的 Ubuntu 12 64 位系统上运行（尽管每次系统进入睡眠状态时它都会消失）。

# c++ - 如何阻止 QNetworkAccessManager 获得回复 C++

> ID：14535502
> 
> 赞同：0
> 
> 时间：2013-01-26T09:18:22.303
> 
> 标签：c++, qt, asynchronous, xmlhttprequest, qnetworkaccessmanager

嗨，我有一个`QNetworkAccessManager`用于发送请求以从服务器获取图像数据的请求。此调用是异步的。我用它打了多个电话。每次调用都是通过打开一个新实例来完成的，`QNetworkAccessManager`所以当发生特定情况时，我想停止`QNetworkAccessManager`接收来自其网络请求的回复。有什么办法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:28:38.420

不要为每个请求使用新的 QNetworkAccessManager，而是共享管理器。通常只有一个很好。当然，如果应用程序设计建议它可以有多个 - 但是例如在单个控制对象中管理多个它们通常是不必要的。只需一个管理器与控制网络请求的对象具有相同的生命周期。

要取消正在运行的操作，请保持 QNetworkReply* 指针 QNetworkAccessManager::get/put/post 返回并在您的条件发生时调用[abort() 。](http://qt-project.org/doc/qt-4.8/qnetworkreply.html#abort)连接到[finished() 信号](http://qt-project.org/doc/qt-4.8/qnetworkreply.html#finished)以将它们从簿记中删除（否则最终会出现悬空指针）。

如果这变得太复杂，请考虑使用命令模式。[在这个答案](https://stackoverflow.com/questions/4334696/command-pattern-purpose/4338191#4338191)中，我描述了为什么我发现它在这种情况下特别有用。

# cloud-foundry - 云铸造上传java.war错误

> ID：14535504
> 
> 赞同：0
> 
> 时间：2013-01-26T09:18:40.020
> 
> 标签：cloud-foundry

崩溃时间：2013-01-26 17:14:45 +0800

Errno::EINVAL: 无效参数 - C:/DOCUME~1/lihengxu/LOCALS~1/Temp/.vmc_aaaa_files/E:

C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:247:in `mkdir' C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:247:in`fu_mkdir' C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:221:in `block (2 levels) in mkdir_p' C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:219:in`reverse_each' C:/Ruby193/lib /ruby/1.9.1/fileutils.rb:219:in `block in mkdir_p' C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:205:in`each' C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:205:in `mkdir_p' cfoundry-0.4.19/lib/cfoundry/zip.rb:27:in`block in unpack' ruby​​zip-0.9.9/lib/zip/ zip_entry_set.rb:35:in `each' rubyzip-0.9.9/lib/zip/zip_entry_set.rb:35:in`each' ruby​​zip-0.9.9/lib/zip/zip_central_directory.rb:109:in `each' rubyzip-0.9.9/lib/zip/zip_file.rb:132:in`block in foreach' ruby​​zip-0.9.9/lib/zip/zip_file.rb:90:in `open' rubyzip-0.9.9/lib/zip/zip_file.rb:131:in`foreach' cfoundry -0.4.19/lib/cfoundry/zip.rb:24:in `unpack' cfoundry-0.4.19/lib/cfoundry/upload_helpers.rb:58:in`prepare_package' cfoundry-0.4.19/lib/cfoundry/upload_helpers.rb:42:in `upload' vmc-0.4.7/lib/vmc/cli/app/push.rb:119:in`block in upload_app'interact-0.5.1/lib/interact/progress .rb:98:in `with_progress' vmc-0.4.7/lib/vmc/cli/app/push.rb:118:in`upload_app' vmc-0.4.7/lib/vmc/cli/app/push.rb:100:in `setup_new_app' vmc-0.4.7/lib/vmc/cli/app/push.rb:82:in`push' Mothership-0.3.5/lib/mothership/base.rb:61:在`run' mothership-0.3.5/lib/mothership/command.rb:68:in`块调用'manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113:in`call' manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113:in`块（2级）在'mothership-0.3.5/lib/mothership/callbacks.rb: 74:in `with_filters' manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:112:in`block in 'mothership-0.3.5/lib/mothership/command.rb:78:in `instance_exec' mothership-0.3.5/lib/mothership/command.rb:78:in`block (2 levels) in invoke' Mothership-0.3.5/lib/mothership/command.rb:82:in `instance_exec' mothership-0.3.5/lib/mothership/command.rb:82:in`invoke' Mothership-0.3.5/lib/mothership/base.rb:50:in`execute' vmc-0.4.7/lib/vmc/cli.rb:106:in`执行'mothership-0.3.5/lib/mothership.rb:45:in `start' vmc-0.4.7/bin/vmc:11:in`' C:/Ruby193/bin/vmc:23:in `load' C:/Ruby193/bin/vmc:23:in`'

我能怎么做？

# machine-learning - 从多个分类器计算分数

> ID：14535506
> 
> 赞同：3
> 
> 时间：2013-01-26T09:18:53.650
> 
> 标签：machine-learning, classification

我正在尝试确定大型集合中的成对项目之间的相似性。这些项目有几个属性，我能够计算每个属性的离散相似度分数，介于 0 和 1 之间。我根据属性使用各种分类器：TF-IDF 余弦相似度、朴素贝叶斯分类器等。

在将所有这些信息编译成所有项目的最终相似度得分时，我陷入了困境。我不能只取一个未加权的平均值，因为 1）什么是高分取决于分类器和 2）某些分类器比其他分类器更重要。另外，有些分类器应该只考虑它们的高分，即高分表示较高的相似性，但低分没有意义。

到目前为止，我已经通过猜测计算了最终分数，但是越来越多的分类器使这成为一个非常糟糕的解决方案。有什么技术可以确定一个最佳公式，它将获取我的各种分数并只返回一个？重要的是要注意系统确实会收到人工反馈，这就是一些分类器开始工作的方式。

最终，我只对每个项目最相似的排名感兴趣。绝对分数本身没有意义，只有它们的顺序很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:14:22.953

有一本关于集成分类器主题的好书。它在线：[组合模式分类器](http://www.ccas.ru/voron/download/books/machlearn/kuncheva04combining.pdf)

本书有两章（第 4 章和第 5 章）关于标签输出的融合以及如何获得单个决策值。

本章定义了一组方法，包括：

1- 加权多数票

2-朴素贝叶斯组合

3- ...

我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T12:57:20.160

获得一本关于**合奏分类**的书。关于如何学习分类器的良好组合已经有很多工作。有很多选择。您当然可以学习权重并进行加权平均。或者您可以使用纠错码。等。

无论如何，请阅读“集成分类”，这就是您需要的关键字。

# c# - 在 Xml 标记中编写特殊字符（Google 产品 Xml 供稿）

> ID：14535507
> 
> 赞同：1
> 
> 时间：2013-01-26T09:18:54.947
> 
> 标签：c#, xml, xml-serialization, google-product-search

我正在使用 C# 处理谷歌产品提要 xml

我可以使用 XmlSerializer 生成一个 xml，但我不能只解决一个问题；

在 xml 提要示例中，产品 id 必须是这样的；

```
 ...
    <item>
        <title>Super item</title>
        <link>http://www.bla.com/13007/2202170/</link>
        <description>Test description</description>
        <g:id>1234678</g:id>
    </item>
    ... 
```

但正如您在 xml 元素标记中看到的特殊“：”字符。

因此，当我在我的财产上写“[XmlElement("g:id")]”时，例如；

```
 [DataMember]
    [XmlElement("g:id")]
    public int Id { get; set; } 
```

XmlSerializergeneretad 我的 xml 标签喜欢；< g_X003A_id > 生成的 xml 看起来像这样；

```
...
<item>
    <title>Super item</title>
    <link>http://www.bla.com/13007/2202170/</link>
    <description>Test description</description>
    <g_X003A_id>1234678</g_X003A_id>
</item>
... 
```

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:57:03.177

我解决了这个问题；

```
 [DataMember]
        [XmlElement("id", Namespace = "http://base.google.com/ns/1.0")] //g:id
        public int Id { get; set; } 
```

# sql - 从列中的表中选择所有

> ID：14535508
> 
> 赞同：0
> 
> 时间：2013-01-26T09:19:14.897
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我`GUID`在读取表格时使用此过程创建一个数字。

存储过程正常工作，但只显示两列，`id`和`EventId`。

我需要显示Beyond和的所有`dbo.ASFC_App_Timetable`其他列。`id``EventId`

其他列是`EventTitle`和`EventNote`例如。

您能否为我提供解决此问题的代码示例？

```
 CREATE PROCEDURE SPROCGetAllEventsForStudent
    AS
    BEGIN
        SELECT convert(uniqueidentifier,
               stuff('62799568-6EF2-4C95-84E7-4953A6959C99',1,len(rn),convert(varchar,rn))) id,
               T.EventId
        FROM ( 
          select x.EventId,  ROW_NUMBER() over (order by x.EventId) rn
          FROM dbo.ASFC_App_Timetable as x ) T
    END 
```

目前是显示..我也需要显示其他列：

```
22799568-6EF2-4C95-84E7-4953A6959C99    AB-TT-E1-2/TU12
32799568-6EF2-4C95-84E7-4953A6959C99    PU-A2-2 -Z/CL12
42799568-6EF2-4C95-84E7-4953A6959C99    PU-A2-2 -Z/CL12
52799568-6EF2-4C95-84E7-4953A6959C99    PU-A2-2 -Z/CL12
62799568-6EF2-4C95-84E7-4953A6959C99    PU-A2-2 -Z/CL12
72799568-6EF2-4C95-84E7-4953A6959C99    PU-A2-2 -Z/CL12
82799568-6EF2-4C95-84E7-4953A6959C99    PU-A2-2 -Z/CL12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:22:35.110

为什么不能在子查询中添加其他列？

```
SELECT convert(uniqueidentifier,
       stuff('62799568-6EF2-4C95-84E7-4953A6959C99',1,len(rn),convert(varchar,rn))) id,
       T.EventId, 
       T.EventTitle , 
       T.EventNote
FROM 
    ( 
        select  x.EventId, 
                x.EventTitle , 
                x.EventNote, 
                ROW_NUMBER() over (order by x.EventId) rn
        FROM    dbo.ASFC_App_Timetable as x 
    ) T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:22:42.893

我认为这确实有效。

```
SELECT EventTitle,
       EventNote,
       convert(uniqueidentifier,
       stuff('62799568-6EF2-4C95-84E7-4953A6959C99',1,len(rn),convert(varchar,rn))) id,
       T.EventId
FROM ( 
         select x.EventId,
              EventTitle,
              EventNote,
              ROW_NUMBER() over (order by x.EventId) rn
         FROM dbo.ASFC_App_Timetable as x
     ) T 
```

为什么不使用`NEWID()`生成`GUID`？

```
SELECT NEWID() Id
      EventId,
      EventTitle,
      EventNote
 FROM dbo.ASFC_App_Timetabl 
```

# paypal - 每个项目的详细信息 ci-merchant 和 PayPal Express

> ID：14535517
> 
> 赞同：0
> 
> 时间：2013-01-26T09:20:06.050
> 
> 标签：paypal, ci-merchant

我正在使用 ci-merchant，我想使用 PayPal Express 进行购物车结账。

这是我正在使用的代码：

```
$this->load->library('merchant');
$this->merchant->load('paypal_express');
$settings = $this->merchant->default_settings();
$settings = array(
    'username' => 'bla bla bla.gmail.com',
    'password' => 'bla bla bla',
    'signature' => 'bla bla bla',
    'test_mode' => true);
$this->merchant->initialize($settings);
$params =array(
            'amount' => $this->cart->format_number($this->cart->total()),
            'currency' => 'EUR',
            'return_url' => 'https://www.example.com/checkout/payment_return/123',
            'cancel_url' => 'https://www.example.com/checkout',
            'description' => 'Esto es desc'
                    );

$response = $this->merchant->purchase($params); 
```

使用上面的代码，我被重定向到 PayPal 就好了，但是在 items 列我只看到一个独特的项目。

现在我想添加**每件商品的描述、数量和价格**。但我不知道在**哪里包含我的 items 数组，以及我应该使用哪种格式**。我在 ci-merchant 文档上找不到它。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:29:59.787

您只需要设置您的 $params 以包含使其工作所需的所有字段，并且您需要确保您使用的是 63.0 或更高版本。

不过，这可能有点棘手，因为任何 Express Checkout 流程都可能包含超过 1 笔付款，并且包含的​​每笔付款可能包含超过 1 件商品，因此您最终会在参数中添加 0、1、2 等。

这是一个 SetExpressCheckout 示例，其中包含 1 笔付款，上面有 2 件商品。

```
[REQUESTDATA] => Array
    (
        [USER] => ***
        [PWD] => ***
        [VERSION] => 97.0
        [BUTTONSOURCE] => AngellEYE_PHPClass
        [SIGNATURE] => ***
        [METHOD] => SetExpressCheckout
        [MAXAMT] => 200.00
        [RETURNURL] => http://paypal.angelleye.com/standard/samples/DoExpressCheckoutPayment.php
        [CANCELURL] => http://paypal.angelleye.com/paypal/class/cancel.php
        [ALLOWNOTE] => 1
        [HDRIMG] => http://paypal.angelleye.com/images/hdrimg.jpg
        [SOLUTIONTYPE] => Sole
        [LANDINGPAGE] => Billing
        [BRANDNAME] => Angell EYE
        [CUSTOMERSERVICENUMBER] => 555-555-5555
        [BUYEREMAILOPTIONENABLE] => 1
        [PAYMENTREQUEST_0_AMT] => 100.00
        [PAYMENTREQUEST_0_CURRENCYCODE] => USD
        [PAYMENTREQUEST_0_ITEMAMT] => 80.00
        [PAYMENTREQUEST_0_SHIPPINGAMT] => 15.00
        [PAYMENTREQUEST_0_TAXAMT] => 5.00
        [PAYMENTREQUEST_0_DESC] => This is a test order.
        [PAYMENTREQUEST_0_NOTETEXT] => This is a test note before ever having left the web site.
        [PAYMENTREQUEST_0_PAYMENTACTION] => Sale
        [L_PAYMENTREQUEST_0_NAME0] => Widget 123
        [L_PAYMENTREQUEST_0_DESC0] => Widget 123
        [L_PAYMENTREQUEST_0_AMT0] => 40.00
        [L_PAYMENTREQUEST_0_NUMBER0] => 123
        [L_PAYMENTREQUEST_0_QTY0] => 1
        [L_PAYMENTREQUEST_0_ITEMURL0] => http://www.angelleye.com/products/123.php
        [L_PAYMENTREQUEST_0_ITEMCATEGORY0] => Digital
        [L_PAYMENTREQUEST_0_NAME1] => Widget 456
        [L_PAYMENTREQUEST_0_DESC1] => Widget 456
        [L_PAYMENTREQUEST_0_AMT1] => 40.00
        [L_PAYMENTREQUEST_0_NUMBER1] => 456
        [L_PAYMENTREQUEST_0_QTY1] => 1
        [L_PAYMENTREQUEST_0_ITEMURL1] => http://www.angelleye.com/products/456.php
        [L_PAYMENTREQUEST_0_ITEMCATEGORY1] => Digital
    ) 
```

这会在重定向到 PayPal 时导致以下结果。

![在此处输入图像描述](../Images/71a98b37d06efc86d27bd0fae8ea0971.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:53:17.963

CI Merchant 不支持开箱即用地在 PayPal 中列出订单项目。有一个[pull request](https://github.com/expressodev/ci-merchant/pull/11)支持这一点，但在我们解决一些税收计算和舍入问题之前，它不会合并到 master 中。

在正式支持之前，您可能想尝试使用分叉版本来实现这一点，或者只是自己编辑 PayPal 驱动程序以传递项目数据。

# linux - 在linux中递归运行命令

> ID：14535521
> 
> 赞同：3
> 
> 时间：2013-01-26T09:21:12.963
> 
> 标签：linux, recursion, find

我试图想出一个可以`mp3gain FOLDER/SUBFOLDER/*.mp3`在每个子文件夹中运行的命令，但我无法理解为什么这个命令不起作用：

```
find . -type d -exec mp3gain \"{}\"/*.mp3 \; 
```

运行时，每个文件夹和子文件夹都会出错`Can't open "./FOLDER/SUBFOLDER"/*.mp3 for reading`。

如果我手动运行命令，`mp3gain "./FOLDER/SUBFOLDER"/*.mp3`它可以工作。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:13:39.680

如果你有一个固定的数据结构，比如

```
folder1/subfolder1/
folder1/subfolder2/
folder2/subfolder1/
[...] 
```

并使用`zsh`，或者`bash version >=4.0`您可以尝试

```
mp3gain **/*.mp3 
```

但要确保检查输出

```
ls **/*.mp3 
```

在您认真对待 mp3gain 之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:25:29.907

当您`mp3gain "./FOLDER/SUBFOLDER"/*.mp3`从 shell 运行时，`*.mp3`在传递给`mp3gain`. 运行它时`find`，不涉及任何 shell，并且按`*.mp3`字面意思传递给`mp3gain`. 后者不知道如何处理通配符（因为通常它不需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:25:41.640

嗯。刚刚尝试了这个来测试如何通过替换来解析目录`mp3gain`并且`echo`它可以工作：

```
find . -type d -exec echo {}\/\*.mp3 \; 
```

尝试运行您的命令版本，但`echo`要自己查看文件输出：

```
find . -type d -exec echo \"{}\"/*.mp3 \; 
```

似乎引号妨碍了您的原始命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-15T22:24:49.693

这行得通...

```
find /music -name *mp3 -exec mp3gain -r -k {} \; 
```

# java - 通过 Java 客户端将文件上传到 CKAN/datahub.io 中的数据集

> ID：14535523
> 
> 赞同：8
> 
> 时间：2013-01-26T09:21:16.357
> 
> 标签：java, post, apache-commons-httpclient, ckan

我正在测试通过 API 的 Java 客户端将文件上传到 CKAN/datahub.io 上的数据集。

```
public String uploadFile()
        throws CKANException {

    String returned_json = this._connection.MultiPartPost("", "");

    System.out.println("r: " + returned_json);
    return returned_json;
} 
```

和

```
 protected String MultiPartPost(String path, String data)
            throws CKANException {
        URL url = null;

        try {
            url = new URL(this.m_host + ":" + this.m_port + path);
        } catch (MalformedURLException mue) {
            System.err.println(mue);
            return null;
        }

        String body = "";

        HttpClient httpclient = new DefaultHttpClient();
        try {
            String fileName = "D:\\test.jpg";

            FileBody bin = new FileBody(new File(fileName),"image/jpeg");
            StringBody comment = new StringBody("Filename: " + fileName);

            MultipartEntity reqEntity = new MultipartEntity();
            reqEntity.addPart("bin", bin);
            reqEntity.addPart("comment", comment);
            HttpPost postRequest = new HttpPost("http://datahub.io/api/storage/auth/form/2013-01-24T130158/test.jpg");
            postRequest.setEntity(reqEntity);
            postRequest.setHeader("X-CKAN-API-Key", this._apikey);
            HttpResponse response = httpclient.execute(postRequest);
            int statusCode = response.getStatusLine().getStatusCode();
            System.out.println("status code: " + statusCode);

            BufferedReader br = new BufferedReader(
                    new InputStreamReader((response.getEntity().getContent())));

            String line;
            while ((line = br.readLine()) != null) {
                body += line;
            }
            System.out.println("body: " + body);
        } catch (IOException ioe) {
            System.out.println(ioe);
        } finally {
            httpclient.getConnectionManager().shutdown();
        }

        return body;
    } 
```

我收到 POST 请求的 2 个响应：

*   当我尝试上传的 jpeg 为 2.83 Mb 时出现 413 错误（“请求实体太大”）。当我将文件缩小到更小的尺寸时，这会消失。文件大小上传有限制吗？

*   500 错误（“内部服务器错误”）。这就是我卡住的地方。这可能与我在 datahub.io 上的数据集未“启用数据存储”这一事实有关？（我在数据集中的资源文件旁边看到一个禁用的“数据 API”按钮，工具提示说：“由于数据存储已禁用，此资源的数据 API 不可用”

=> 是这个 500 错误的可能原因吗？如果是这样，我如何从客户端启用它？（指向 Python 代码的指针会很有用！）

谢谢！
PS：我用于测试目的的数据集：http: [//datahub.io/dataset/testapi](http://datahub.io/dataset/testapi)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T16:59:38.457

只有有权访问异常日志的人才能告诉您为什么会发生 500。

但是，我会检查您的请求是否与您从与数据存储一起编写的 python 客户端获得的请求相同：[https : **//github.com/okfn/ckanclient/blob/master/ckanclient/init** .py# L546](https://github.com/okfn/ckanclient/blob/master/ckanclient/__init__.py#L546)

您在多部分请求中发送“bin”图像缓冲区和“comment”file_key。请注意，每次上传都必须更改 file_key，因此请添加时间戳或其他内容。也许您需要`Content-Type:`为二进制文件添加一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:47:40.870

我一直在经历与这个问题的海报相同的麻烦。经过相当多的反复试验，我想出了一个解决问题的办法。就我而言，我对想要上传到的 CKAN 存储库有一些控制权。如果你不这样做，你的问题可能无法解决......

我假设您使用的是 1.8 版本的 CKAN？

首先，检查 CKAN 存储库是否已设置为允许文件上传，如果没有，请将其配置为允许。这可以使用此处发布的步骤在服务器上完成：http: [//docs.ckan.org/en/ckan-1.8/filestore.html#local-file-storage](http://docs.ckan.org/en/ckan-1.8/filestore.html#local-file-storage)

接下来应该解决您提到的 413 错误。这与服务器的一般配置有关。就我而言，CKAN 是通过 nginx 托管的。我在 nginx.conf 文件中添加了“client_max_body_size 100M”行。例如看这篇文章：[http ://recursive-design.com/blog/2009/11/18/nginx-error-413-request-entity-too-large/](http://recursive-design.com/blog/2009/11/18/nginx-error-413-request-entity-too-large/)

然后就只剩下500错误了。在撰写本文时，CKAN 的 api 文档还有些不成熟......它确实说你必须像你为文件上传所做的那样构建一个请求。但是，此请求只是请求文件上传的权限。如果您的凭据检查文件上传（并非每个用户都可能被允许上传文件），响应包含一个对象，告诉您将文件发送到哪里......由于不明确的 api，您最终合并了这两个请求。

以下场景显示了处理文件上传的两个请求的后续处理。在您的情况下，场景中的某些步骤可能会有所不同，因为存储库的设置略有不同。如果您收到错误消息，请务必检查响应的正文以获取线索！

这是我使用的身份验证请求：

```
String body = "";
String generatedFilename=null;

HttpClient httpclient = new DefaultHttpClient();

try {

    // create new identifier for every file, use time
    SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyyMMMddHHmmss");
    dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));
    String date=dateFormatGmt.format(new Date());
    generatedFilename=date +"/"+filename;

    HttpGet getRequest = new HttpGet(this.CKANrepos+ "/api/storage/auth/form/"+generatedFilename);
    getRequest.setHeader(CKANapiHeader, this.CKANapi);

    HttpResponse response = httpclient.execute(getRequest);
    int statusCode = response.getStatusLine().getStatusCode();
    BufferedReader br = new BufferedReader(
             new InputStreamReader((response.getEntity().getContent())));

    String line;
    while ((line = br.readLine()) != null) {
         body += line;
    }
    if(statusCode!=200){
         throw new IllegalStateException("File reservation failed, server responded with code: "+statusCode+
          "\n\nThe message was: "+body);

    }
}finally {
     httpclient.getConnectionManager().shutdown();
} 
```

现在，如果一切顺利，服务器会响应一个 json 对象，其中包含在进行实际文件上传时要使用的参数。就我而言，该对象看起来像：

```
{file_key:"some-filename-to-use-when-uploading"} 
```

不过请务必检查 json 对象，因为我了解到可能存在需要更多或不同参数的自定义 ckan 存储库。

然后可以在实际的文件上传中使用这些响应：

```
 File file = new File("/tmp/file.rdf");
        String body = "";

        HttpClient httpclient = new DefaultHttpClient();

        try {

            FileBody bin = new FileBody(file,"application/rdf+xml");

            MultipartEntity reqEntity = new MultipartEntity();
            reqEntity.addPart("file", bin);

            reqEntity.addPart("key", new StringBody(filename));

            HttpPost postRequest = new HttpPost(this.CKANrepos+"/storage/upload_handle");
            postRequest.setEntity(reqEntity);
            postRequest.setHeader(CKANapiHeader, this.CKANapi);
            HttpResponse response = httpclient.execute(postRequest);
            int statusCode = response.getStatusLine().getStatusCode();
            BufferedReader br = new BufferedReader(
                    new InputStreamReader((response.getEntity().getContent())));

            String line;
            while ((line = br.readLine()) != null) {
                body += line;
            }
            if(statusCode!=200){
                getWindow().showNotification("Upload Statuscode: "+statusCode,
                        body,
                        Window.Notification.TYPE_ERROR_MESSAGE);

            }
        }finally {
            httpclient.getConnectionManager().shutdown();
        } 
```

如您所见，file_key 属性现在已转换为简单的“key”属性。*我不知道为什么。*

这将使您的文件上传。对此上传请求的响应将包含一个 json 对象，告诉您文件上传到哪里。**编辑：**实际上似乎我的ckan用一个简单的html页面响应告诉我文件已上传...我必须解析页面以确认文件已正确上传:(

就我而言，该文件位于

```
this.CKANrepos +"/storage/f/"+location 
```

其中 location 是身份验证阶段返回的文件名。

在前面的代码片段中：

```
//the location of your ckan repository, including /api and possibly version, e.g.
this.CKANrepos = "http://datahub.io/api/3/";
this.CKANapiHeader="X-CKAN-API-Key";
this.CKANapi = "your ckan api key here"; 
```

# ruby - 无法使 airbrake gem 适应 Sinatra 应用程序

> ID：14535526
> 
> 赞同：2
> 
> 时间：2013-01-26T09:21:21.090
> 
> 标签：ruby, rubygems, sinatra, airbrake

我正在像这样使用airbrake gem：

```
require 'airbrake'

Airbrake.configure do |config|
  config.api_key = 'XXXXX'
  config.development_environments = ["development", "test", "cucumber"]
end

use Airbrake::Rack
enable :raise_errors 
```

但它仍在开发中发送空气制动通知。

我的环境保存在`ENV['RACK_ENV']`.

我不想破解这个，有“外部”解决方案吗？

另外，我确实想在开发中提出异常-我只是不希望它们被发送到空气制动..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:05:41.560

您可以使用[`configure`](http://www.sinatrarb.com/intro.html#Configuration)块仅在生产中设置 Airbrake：

```
configure :production do
  require 'airbrake'

  Airbrake.configure do |config|
    config.api_key = 'XXXXX'
  end

  use Airbrake::Rack
end 
```

如果您希望在多个环境中启用 Airbrake，则可以指定一个列表，例如：

```
configure :production, :staging do
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:21:40.427

@matt 的回答应该很好用，但是如果您想在设置中间件而不是在 Sinatra 应用程序中时在 rackup 文件中执行此操作，您可以这样做：

```
use Airbrake::Rack if ENV['RACK_ENV'] == "production" 
```

我经常用中间件来做这件事。

# objective-c - 在 Objective-C 中使用“Self”关键字

> ID：14535527
> 
> 赞同：4
> 
> 时间：2013-01-26T09:21:20.843
> 
> 标签：objective-c, oop, self

> **可能重复：**
> [Objective-C - 何时使用'self'</a>](https://stackoverflow.com/questions/2385980/objective-c-when-to-use-self)
> 
> [](https://stackoverflow.com/questions/2385980/objective-c-when-to-use-self)

 [我不能很好地理解objective-c中“self”关键字的重要性和用法。这是我的第一个 OOP 语言，所以我陷入了一些概念。我什么时候应该使用“自我”？为什么有用？

感谢您的回答！](https://stackoverflow.com/questions/2385980/objective-c-when-to-use-self) 

[编辑：我不明白为什么这是](https://stackoverflow.com/questions/2385980/objective-c-when-to-use-self)[Objective-C的重复帖子-当](https://stackoverflow.com/questions/2385980/objective-c-when-to-use-self)没有我想要的“自我”解释时，何时使用“自我”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T09:25:33.667

`self`是 Objective-C 中的一个特殊变量，在实例方法中，该变量指的是调用该方法的消息的接收者（对象），而在类方法`self`中将指示正在调用哪个类。

`self`指正在执行当前方法的实际对象，它是运行时环境自动传递给您的实例方法的不可见参数。

# google-chrome-devtools - 有没有办法使用谷歌浏览器为整个代码块创建断点

> ID：14535528
> 
> 赞同：1
> 
> 时间：2013-01-26T09:21:30.540
> 
> 标签：google-chrome-devtools

我想在 Chrome 控制台中选择一大段连续的代码，并为所有行添加断点，而不是一一添加。我想知道这是否可行，如果可以，如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:59:58.077

`F10`如果您已经遇到断点，可以让您一次一步地单步执行您的代码！

有四种方法可以在断点处结束：

*   在您的代码中设置一个（在您要调试的序列的顶部，然后您可以跳过）
*   按 Chrome 开发者工具中的“暂停”按钮
*   将语句`debugger;`放在源代码中要中断的行上（通常很方便！）
*   打开“暂停例外”（底部的第四个按钮，看起来像一个圆圈中的暂停按钮），它在“不暂停”、“暂停所有例外”和“暂停未处理的例外”之间切换。

享受！

# jquery - 从容器 div 中的 td 加载 div，一次一个？

> ID：14535529
> 
> 赞同：0
> 
> 时间：2013-01-26T09:21:30.560
> 
> 标签：jquery

我检查了类似的问题，但找不到答案。

我有这个 HTML：

```
<table>
<td>
<a href="#">click me</a>
<div class="showme"><p>test</p></div>
</td>
<td>
<a href="#">click me</a>
<div class="showme"><p>test 2</p></div>
</td>
<td>
<a href="#">click me</a>
<div class="showme"><p>test 3</p></div>
</td>
</table>

<div class="container" rel="showme"></div> 
```

我想要的：我希望 div.showme 本来是隐藏的，当点击 TD 内的链接时，div.showme 会加载到 div.container 中。

我尝试了什么：

```
jQuery(document).ready(function($) {

    $("td a").click(function() {  
        $(".showme").html($(this).attr('rel'));
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:29:05.683

将您的CSS设置为最初隐藏“showme”

```
.showme { display:none} 
```

并将您的 schipt 更改为此

```
jQuery(document).ready(function($) {

    $("td a").click(function() {  
        $(this).next().load($(this).attr('href'));
    });

}); 
```

请记住，您无法使用 javascript 打开外部链接，如果这是您想要做的，那么您可能想要使用 iframe 而不是 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:11:36.330

也许这会做你想做的

```
$(function(){
        $("table td>a").click(function(e){
            e.preventDefault();
            //get the html content
            var cont = $(this).parent().children(".showme").html();
            //add it to the desired div
            $(".container").html(cont);
        });
    }); 
```

你需要一点CSS

```
.showme{
display: none; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:42:20.490

在您的 html 中添加一个 div

```
<table>
    <td>
        <a href="#">click me</a>
        <div class="showme">
            <p>
                test</p>
        </div>
    </td>
    <td>
        <a href="#">click me</a>
        <div class="showme">
            <p>
                test 2</p>
        </div>
    </td>
    <td>
        <a href="#">click me</a>
        <div class="showme">
            <p>
                test 3</p>
        </div>
    </td>
</table>
<div class="container"></div> 
```

和这样的脚本

```
 <style>
.showme { display:none}
</style>

<script type="text/javascript">
    jQuery(document).ready(function ($) {
        $("td").click(function () {
            var tow = $(this);
            tow.find('div[class="showme"]').css('display', 'block');
            $('.container').html(tow.find('div[class="showme"]'));
        });
    });
</script> 
```

# dictionary - 从 wordweb lst 文件中提取词表

> ID：14535530
> 
> 赞同：1
> 
> 时间：2013-01-26T09:21:35.133
> 
> 标签：dictionary, nlp

**嗨..我正在做一个自然语言处理项目（它将在 JAVA 上）......一段文本进入，它（将）从段落中提取信息并将其添加到它的数据库中......就像给它维基百科的文本，它将更新其数据库...首先，我必须从段落中识别动词、名词、形容词等（所有预先知道的事实）。**

它可以使用字典数据库来完成，我可以从中查询一个单词是动词、名词、形容词还是其他东西......

**但问题是我找不到要下载的字典数据库...或者有没有其他方法可以做到这一点...如果我不清楚请告诉我...！！**

# php - 带有先前获取参数的 HTML 表单 GET 方法

> ID：14535531
> 
> 赞同：4
> 
> 时间：2013-01-26T09:21:57.607
> 
> 标签：php, html

我在带有获取参数的页面上有一个表单：
index.php?PageID=12

然后，我在该页面上有多个表单，当用户选择详细信息时，这些表单会构建页面详细信息。

我的问题是当表单发布时，Get 会覆盖其他 get 参数。

我可以使用 post 但只能将信息发回一次，因为在提交下一个表单时会擦除 post 值；

这个想法是表格建立一个这样的地址；

1.  `?PageID=12`
2.  `?PageID=12&Section=48`
3.  `?PageID=12&Section=48&Event=1456`

当用户选择更多项目时，依此类推。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T14:21:01.947

对于具有`method=get`在属性中指定的查询字符串参数的表单，`action`将被忽略。添加隐藏表单字段等参数：

```
<form action="index.php" method="get">
<input type="hidden" name="PageID"  value="12">
<input type="hidden" name="Section" value="48">
<input type="hidden" name="Event"   value="1456">
</form> 
```

您可以使用服务器端脚本或 JavaScript 将查询字符串参数添加为隐藏表单字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:00:33.407

将传入的 $_GET 参数放在隐藏字段中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T10:13:50.327

您可以使用下面的代码，您可以在其中初始化已经需要发布的参数

```
<form action="index.php" method="get"> 
```

这里所有的参数都会加入 index.php?.......

所以如果你需要默认传递一些参数那么你可以写 index.php?para=1......

但不要将其留空表单操作值，默认情况下它会考虑与地址栏中相同的 url。

愿这对你有帮助...... :)

# android - 单个活动基于片段的应用程序和后退按钮

> ID：14535535
> 
> 赞同：1
> 
> 时间：2013-01-26T09:22:49.160
> 
> 标签：android, android-fragments

我得到了这个应用程序，它几乎只使用一项活动。我将碎片放入的主要区域。但是现在返回按钮呢？

当然我可以覆盖`onBackPressed()`但是用什么？

我`FragmentTransaction.replace()`每次都使用方法将一个片段推入它的持有人。我可能对某个主题缺乏了解，但不应该有一些片段内置堆栈，这将允许我指向`onBackPressed()`堆栈中的前一个片段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:28:53.043

不要覆盖 onBackPress。您可以将任何片段事务添加到后台堆栈。[有一种特殊的方法可以做到这一点。](http://developer.android.com/reference/android/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29)

# php - 我可以从 php 代理页面获取 ajax 参数吗？

> ID：14535542
> 
> 赞同：1
> 
> 时间：2013-01-26T09:23:53.103
> 
> 标签：php, xml, ajax

我想从远程域（多个 xml 文件）获取 xml 数据我正在尝试使用 php 代理代码获取我的 xml，并将结果返回给要解析的 ajax 回调函数。我的代码是：

```
<html>
<head>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$.ajax({
    type: "POST",
    url: 'proxy.php',
    parameters : {country : 'england'},
    dataType: "xml",
    success: parseXml
 });

function parseXml(xml) {
    console.log(xml);
    $(xml).find("category").each(function() {
        var name = $(this).attr('name');
        var file_group = $(this).attr('file_group');
        $("#live").append('<ul class="contests"><li class="contest_name"><table class="title_table" border="0"><tr><td><input type="checkbox" class="checkbox"></td><td class="name"><h3>'+ name +'</h3></td><td class="contest_image"><a href="#"><img src="./include-images/standing.png"></img></a></td></tr></table></li></ul>');
        $(this).find("match").each(function() {
        var time = $(this).attr('time');
        var status = $(this).attr('status');
        var ht_score = $(this).find('ht').attr('score');
        var localteam = $(this).find('localteam').attr('name');
        var visitorteam = $(this).find('visitorteam').attr('name');
        var goals_localteam = $(this).find('localteam').attr('goals');
        var goals_visitorteam = $(this).find('visitorteam').attr('goals');
        $("#live").append('<ul class="contests"><li class="fixture"><table class="fixture_table" border="0"><tr><td><input type="checkbox" class="checkbox"></td><td class="status">'+ status +'</td><td class="localteam">'+ localteam +'</td><td class="goals_localteam">'+ goals_localteam +'</td><td class="space">-</td><td class="goals_visitorteam">'+ goals_visitorteam +'</td><td class="visitorteam">'+ visitorteam +'</td><td class="ht_score">'+ ht_score +'</td></tr></table></li></ul>');
    });
    });
}

</script>
</head>
<body>

<div id='live'></div>
</body>
</html> 
```

我的 php 代理是：

```
<?php
// Set your return content type
header('Content-type: application/xml');

// Website url to open

$daurl = 'http://www.example.com/getfeed/b4998d59890f4280827e3b126a628af0/soccernew/home';

// Get that website's content
$handle = fopen($daurl, "r");

// If there is something, read and return
if ($handle) {
    while (!feof($handle)) {
        $buffer = fgets($handle, 4096);
        echo $buffer;
    }
    fclose($handle);
}
?> 
```

我很容易为一个链接获取数据，但我想让该链接（$daurl）根据 ajax 参数进行更改。我的问题是我无法从 php 代理页面获取任何 ajax 参数我尝试了 GET、POST 但它只是不起作用它似乎总是 $_POST 和 $_GET 数组是空的并且不保存我的 ajax 参数有人可以帮助我吗？ ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:50:35.150

使用`data : {country : 'england'}`而不是`parameters : {country : 'england'}`这样：

```
$.ajax({
    type: "POST",
    url: 'proxy.php',
    data: {country : 'england'},
    dataType: "xml",
    success: parseXml
 }); 
```

# html - 如果我关心 SEO，可以使用巨大长度的表格标签生成二维码吗？

> ID：14535545
> 
> 赞同：2
> 
> 时间：2013-01-26T09:24:29.103
> 
> 标签：html, seo

我正在使用插件生成二维码。它应该将 QR 生成为图像，但它会生成如下代码所示的表格。

那么这个二维码最多1800行。
现在，我将此代码放在页面内容的顶部。
在我看来，谷歌机器人会厌倦分析这个巨大的无用的表格标签。

我应该删除这个二维码表吗？还是真的没关系？
有人对此有任何想法吗？

```
<div class="qrcode">
    <table>
        <tr>
        <td class="black"/>
        <td class="black"/>
        <td class="black"/>
        <td class="black"/>
        <td class="black"/>
        <td class="black"/>
        <td class="black"/>
            .
            .
            .
        <td class="black"/>
        <td class="black"/>
        <td class="white"/>
        <td class="white"/>
        <td class="white"/>
        <td class="white"/>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:28:11.220

> 谷歌机器人会厌倦分析这个巨大的无用表格标签

Googlebot 不会*厌倦*为您的网页编制索引。但是，Google 搜索结果列表包括搜索关键字位于距页面开头不超过**520 KB**的页面。所以如果你在页面的开头放了很多“*无用的Table标签*”，相关的内容会定位在520KB之后，那么你的搜索结果就会受到影响。

请查看[搜索引擎索引限制：机器人在哪里停止？](http://www.sitepoint.com/indexing-limits-where-bots-stop/)文章描述了不同网络蜘蛛的局限性。

*但是带有无用代码*的长页面也会影响客户的体验。长页面很可能需要更多时间来显示。将页面加载时间增加 100 毫秒（这似乎不是那么多）可能对您的网站很*危险*。

请查看[毫秒是金钱](http://www.carbon60.com/milliseconds-are-money-how-much-performance-matters-in-the-cloud/)文章以获取更多详细信息。那篇文章的一些引述：

> 云行业的大佬们已经深入挖掘并证明了这些毫秒很重要：
> 
> *   Amazon.com 的加载时间每增加**100 毫秒**，销售额就会下降**1%**（Kohavi 和 Longbotham 2007）。
> *   Google 发现，从 0.4 秒内加载 10 个结果页面到在 0.9 秒内加载 30 个结果页面的变化减少了 20% 的流量和广告收入（Linden 2006）。

我希望这将帮助您就您的网站页面结构做出正确的决定。

# javascript - javascript原型类，这个在jquery中点击

> ID：14535548
> 
> 赞同：2
> 
> 时间：2013-01-26T09:24:48.437
> 
> 标签：javascript, jquery, click, prototype, this

我做了一个javascript原型类。

在一个方法中，我创建了一个 jquery 点击。但是在这个点击中，我想执行我的构建功能。

当我尝试在 jquery 中执行原型函数时，单击它会失败，因为 jquery 将其用于其他用途。

我尝试了一些不同的东西，但我无法让它工作。

```
Game.prototype.clicks = function(){
    $('.flip').click(function(){

        if(cardsPlayed.length < 2) //minder dan 2 kaarten gespeeld
        {
            $(this).find('.card').addClass('flipped');
            cardsPlayed.push($(this).find('.card').attr('arrayKey'));

            console.log(cardsPlayed[cardsPlayed.length - 1]);

            console.log(playingCards[cardsPlayed[cardsPlayed.length - 1]][0]);

            if(cardsPlayed.length == 2)// two cards played
            {
                if(playingCards[cardsPlayed[0]][0] == playingCards[cardsPlayed[1]][0])
                { // same cards played
                    console.log('zelfde kaarten');
                    playingCards[cardsPlayed[0]][0] = 0; //hide card one
                    playingCards[cardsPlayed[1]][0] = 0; //hide card two
                    //rebuild the playfield
                    this.build(); //error here
                }
                else
                {
                    //differend cards
                }

            }
        }

        return false;
    }).bind(this);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:10:59.490

问题是您试图引用`this`单击的`.flip`元素`$(this).find('.card')` *以及*`Game`. 不能有双重人格，所以其中一个参考需要改变。`this.build()``this`

`Game`正如 Licson 已经建议的那样，最简单的解决方案是在处理程序的范围内保留一个指向对象的变量`click`。然后，只需`this`在处理程序内部使用被点击的元素（就像在 jQuery 处理程序中一样）并`self`用于`Game`对象。

```
Game.prototype.clicks = function() {
    // Keep a reference to the Game in the scope
    var self = this;

    $('.flip').click(function() {
        if(cardsPlayed.length < 2) //minder dan 2 kaarten gespeeld
        {
            // Use this to refer to the clicked element
            $(this).find('.card').addClass('flipped');
            // Stuff goes here...
            // Use self to refer to the Game object
            self.build();
        }
    }); // Note: no bind, we let jQuery bind this to the clicked element
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:40:53.727

我想你想要这样的东西：

```
function class(){
    var self = this;
    this.build = function(){};
    $('#element').click(function(){
        self.build();
    });
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T09:30:23.753

如果我理解正确，在现代浏览器中，您可以简单地使用`bind`：

```
function MyClass() {
  this.foo = 'foo';
  $('selector').each(function() {
    alert(this.foo); //=> 'foo'
  }.bind(this));
} 
```

否则，只需缓存`this`在一个变量中，通常`self`并在必要时使用它。

# java - java性能：字符串文字

> ID：14535549
> 
> 赞同：0
> 
> 时间：2013-01-26T09:24:51.273
> 
> 标签：java, memory-management

我想知道字符串文字和java性能之间的关系。

例如，使用以下语句的次数会对性能产生任何影响。我有数千个课程，而且我们多次使用以下语句：

```
1) buffer.append(",");
2) buffer.append("}");

3)String.append("10,000 times...same lines") // printing same lines in many classes
3)String.someStringMethod("same line many times") // using any String method 
```

**这是否会在内存**管理等方面对性能产生影响。我们有更清洁的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:48:05.430

对没有意义的例子发表评论真的很困难。然而：

*   一般来说，Java 字符串文字没有特别的效率问题。
*   一般来说，将字符串文字作为参数的方法没有特别的效率问题。
*   如果一段特定的代码执行得足够频繁，则字符串连接/构建可能会带来效率问题。但是，如果您需要构建字符串，那么您无能为力。

有一两件事值得采取措施避免。主要的是这样的：

```
 String s = "";
   for (/* lots of times */) {
       // do stuff
       s += someOtherString;
   } 
```

问题是这会生成然后丢弃大量临时字符串。更有效的方法是：

```
 StringBuilder sb = new StringBuilder();
   for (/* lots of times */) {
       // do stuff
       sb.append(someOtherString);
   }
   String s = sb.toString(); 
```

但是，如果分析器告诉您这段特定的代码是一个瓶颈，那么优化这种事情可能才值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:55:25.923

1.  您编写的任何代码都会影响性能，因此最好使用 ",}" 调用一个 append() 而不是 2 个 append。

2.  java.lang.String 类中没有方法 append。

3.  没有任何 String 方法对 String 对象进行更改。相反，像 String.substring()、String.concat()、String.replace() 这样的方法会创建新的 String 对象。这意味着与使用 StringBuffer 相比，性能受到的影响更大。

4.  所以通常 StringBuffer 方法比 String 的方法快。但是，最近引入了新的类，称为 StringBuilder。与 StringBuilder 只有一个区别 - 它不是线程安全的。在现实世界的情况下，线程管理由更高级别的容器负责，因此无需确保每个类的线程安全。在这些情况下，建议您使用 StringBuilder。那应该是最快的。

5.  为了进一步提高 StringBuilder 的性能，您必须知道生成的字符串长度以分配适当大小的 StringBuilder。如果它太大，你会浪费一些内存，但这通常是一个小问题。如果它太小，StringBuilder 将不得不重新创建内部字符数组以腾出空间容纳更多字符。这会使特定的 append() 调用变慢。实际上，这不是慢的调用，而是调用垃圾收集来清理内存。

6.  String 类的特定方法可能比 StringBuffer/StringBuilder 中的方法更好或更快，但是您必须更具体地回答您的问题才能让我回答。

# css - 定位上一个和下一个按钮（在 NivoSlider 上）

> ID：14535550
> 
> 赞同：1
> 
> 时间：2013-01-26T09:24:52.507
> 
> 标签：css, button, nivo-slider

我在页面上使用 nivoSlider。我根据自己的需要调整了一个主题，但我现在希望在图像旁边有 Prev 和 Next 按钮（Prev 在左侧，Next 在右侧站点），而不是在图像顶部。

你可以在这里看到测试页面：http: [//dccf.site88.net/test/dccf.php](http://dccf.site88.net/test/dccf.php)

这是html：

```
<div class="slider-wrapper theme-default">
    <div id="slider" class="nivoSlider">
        <img src="_imgs/photos/fashion3.jpg" alt="Doncare Care Child Foundation" />
        <img src="_imgs/photos/fashion4.jpg" alt="Doncare Care Child Foundation" />
        <img src="_imgs/photos/fashion7.jpg" alt="Doncare Care Child Foundation" />
        <img src="_imgs/photos/fashion9.jpg" alt="Doncare Care Child Foundation" />
        <img src="_imgs/photos/GardenWork1.jpg" alt="Doncare Care Child Foundation" />
        <img src="_imgs/photos/GardenWork2.jpg" alt="Doncare Care Child Foundation" />
        <img src="_imgs/photos/GardenWork3.jpg" alt="Doncare Care Child Foundation" />
        <img src="_imgs/photos/GardenWork4.jpg" alt="Doncare Care Child Foundation" />
    </div><!-- enf of #slider --> 
  </div><!-- end of .sliderWrapper --> 
```

和 CSS（来自基本模板）：

```
 .nivoSlider {
position:relative;
width:600px;
height:auto;
overflow: hidden;
margin:auto;
margin-top:1em;
}
.nivoSlider img {
position:absolute;
top:0px;
max-width: 600px;
max-height:420px;
}
.nivo-main-image {
display: block !important;
position: relative !important; 
width: 600px !important;
height:420px !important;
margin:auto;
}

/* If an image is wrapped in a link */
.nivoSlider a.nivo-imageLink {
position:absolute;
top:0px;
width:100%;
height:100%;
border:0;
padding:0;
margin:auto;
z-index:6;
display:none;
}
/* The slices and boxes in the Slider */
.nivo-slice {
display:block;
position:absolute;
z-index:5;
height:100%;
top:0;
margin:auto;
}
.nivo-box {
display:block;
position:absolute;
z-index:5;
overflow:hidden;
margin:auto;
}
.nivo-box img {
display:block;
margin:auto;
}

/* Caption styles */
.nivo-caption {
position:absolute;
left:0px;
bottom:0px;
background:#000;
color:#fff;
width:100%;
z-index:8;
padding: 5px 10px;
opacity: 0.8;
overflow: hidden;
display: none;
-moz-opacity: 0.8;
filter:alpha(opacity=8);
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */
}
.nivo-caption p {
padding:5px;
margin:0;
}
.nivo-caption a {
display:inline !important;
}
.nivo-html-caption {
display:none;
}
/* Direction nav styles (e.g. Next & Prev) */
.nivo-directionNav a {
position:fixed;
top:50%;
z-index:9;
cursor:pointer;
}
.nivo-prevNav {
left:0px;
}
.nivo-nextNav {
right:0px;

}
/* Control nav styles (e.g. 1,2,3...) */
.nivo-controlNav {
text-align:center;
padding: 15px 0;
}
.nivo-controlNav a {
cursor:pointer;
}
.nivo-controlNav a.active {
font-weight:bold;
} 
```

和主题 CSS：

```
.theme-default .nivoSlider {
position:relative;
background:#fff url(loading.gif) no-repeat 50% 50%;
margin-bottom:10px;
-webkit-box-shadow: 0px 1px 5px 0px #4a4a4a;
-moz-box-shadow: 0px 1px 5px 0px #4a4a4a;
box-shadow: 0px 1px 5px 0px #4a4a4a;
}
.theme-default .nivoSlider img {
position:absolute;
display:none;
margin:auto;
}
.theme-default .nivoSlider a {
border:0;
display:block;
margin:auto;
}

.theme-default .nivo-controlNav {
text-align: center;
padding:0;
}
.theme-default .nivo-controlNav a {
display:inline-block;
width:10px;
height:10px;
background:url(bullets.png) no-repeat;
text-indent:-9999px;
border:0;
margin: 0 2px;
margin-bottom:1em;
}
.theme-default .nivo-controlNav a.active {
background-position:0 -10px;
}

.theme-default .nivo-directionNav a {
display:block;
width:30px;
height:30px;
background:url(arrows6.png) no-repeat 0px 0;
text-indent:-9999px;
border:0;
opacity: 1;
/*  -webkit-transition: all 200ms ease-in-out;
-moz-transition: all 200ms ease-in-out;
-o-transition: all 200ms ease-in-out;
transition: all 200ms ease-in-out;

}*/}
.theme-default a.nivo-nextNav {
position:absolute;
background-position:-30px 0;
right:2px;
z-index:9999;
}
.theme-default a.nivo-nextNav:hover {
background:url(arrows6.png) no-repeat -30px -30px;
right:2px;
}.theme-default a.nivo-nextNav:active {
background:url(arrows6.png) no-repeat -30px -60px;
right:2px;
}
.theme-default a.nivo-prevNav {
position:absolute;
left:2px;
}
.theme-default a.nivo-prevNav:hover {
background:url(arrows6.png) no-repeat 0px -30px;
left:2px;
}
.theme-default a.nivo-prevNav:active {
background:url(arrows6.png) no-repeat 0px -60px;
left:2px;
}

.theme-default .nivo-caption {
font-family: Helvetica, Arial, sans-serif;
}
.theme-default .nivo-caption a {
color:#fff;
border-bottom:1px dotted #fff;
}
.theme-default .nivo-caption a:hover {
color:#fff;
}

.theme-default .nivo-controlNav.nivo-thumbs-enabled {
width: 100%;
}
.theme-default .nivo-controlNav.nivo-thumbs-enabled a {
width: auto;
height: auto;
background: none;
margin-bottom: 5px;
}
.theme-default .nivo-controlNav.nivo-thumbs-enabled img {
display: block;
width: 120px;
height: auto;
} 
```

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:32:12.587

`.nivoSlider`- 在这个类中，您必须删除`overflow:hidden`，然后您必须更改按钮的左右两侧：

```
.nivoSlider{
     overflow:hidden; (remove it)
} 
```

进而：

```
.theme-default a.nivo-prevNav{
     left: -35px; (about)
}

.theme-default a.nivo-prevNav:hover{
     left: -35px; (about)
}

.theme-default a.nivo-nextNav{
     right: -35px; (about)
}
.theme-default a.nivo-nextNav:hover{
     right: -35px; (about)
} 
```

# android - 从 DB 游标向微调器添加默认的 None 值

> ID：14535555
> 
> 赞同：0
> 
> 时间：2013-01-26T09:25:13.090
> 
> 标签：android, android-spinner

我有一个微调器，其中填充了以 Cursor 形式返回的 DB 值。但它总是选择第一个值。我需要的是有一个“无”值而不是 od ffirst DB 值。我知道当我们有硬编码的字符串时我们可以做到这一点，但我怎么能用光标..？

我的微调器代码 -

```
Cursor c = listNamesDbHelper.fetchAllUserLists();
        startManagingCursor(c);
        Log.i(TAG, "cursor list names--->>" + c.getCount());
        // create an array to specify which fields we want to display
        String[] from = new String[c.getCount() + 1];
        from = new String[]{listNamesDbHelper.KEY_LIST_NAME};

        //from[0] = "None";
        // create an array of the display item we want to bind our data to
        int[] to = new int[]{R.id.ModifyTaskListNameItem};

        // create simple cursor adapter
        /*SimpleCursorAdapter adapter =
          new SimpleCursorAdapter(this, R.layout.choose_list_modify_task, c, from, to );
        adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );*/
        // get reference to our spinner

        CustomSpinnerItemsAdapter adapter = new CustomSpinnerItemsAdapter(this,c,from,to);
        Spinner s = (Spinner) findViewById( R.id.spinnerListSelection );
        s.setAdapter(adapter); 
```

在此先感谢，雷

# c++ - 为什么 PRIu64 在此代码中不起作用？

> ID：14535556
> 
> 赞同：31
> 
> 时间：2013-01-26T09:25:18.767
> 
> 标签：c++, printf, c++03

根据[这个答案](https://stackoverflow.com/a/8132440/252576)，我尝试打印 a `uint64_t`，但它给了我一个错误：

> 错误：在 'PRIu64' 之前需要 ``)'

以下是显示我正在尝试做的最小代码：

```
#define __STDC_FORMAT_MACROS
#include <inttypes.h>
#include <cstdio>

class X {
  X() {
    uint64_t foo = 0;
    printf("%07" PRIu64 ": ", foo);
  }
};

int main() {} 
```

这个最小的代码可以编译，但我的实际代码没有。但是，我已经尝试`X::X()`在我的实际代码中使用完全相同的 2 行，但这不起作用。

我应该寻找什么来进一步调试？我的实际代码也是`#include`其他标题。这会导致问题吗？包含标题的顺序是否重要？

**编辑** `PRIu64`在我的机器上定义如下：

```
# if __WORDSIZE == 64
#  define __PRI64_PREFIX    "l"
#  define __PRIPTR_PREFIX   "l"
# else
#  define __PRI64_PREFIX    "ll"
#  define __PRIPTR_PREFIX
# endif

# define PRIu64     __PRI64_PREFIX "u" 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-10T12:38:37.883

在 C++ 中，宏不会仅通过包含文件来自动定义。

您需要添加以下内容：

```
#define __STDC_FORMAT_MACROS 1 
```

前

```
#include <inttypes.h> 
```

[如何打印 uint64_t？失败：“格式中的虚假尾随 '%'”](https://stackoverflow.com/questions/8132399/how-to-printf-uint64-t)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-06-15T17:22:03.047

我刚刚在自己的代码中发现此问题的另一种可能性是，如果`<inttypes.h>` *在*您定义`__STDC_FORMAT_MACROS`. 例如：

**Utils.h**（也许最初是为 C 编写的，就像我们的例子一样）：

```
#include <inttypes.h>

// ... Function declarations 
```

**我的文件.cpp**：

```
#include "Utils.h"

#define __STDC_FORMAT_MACROS
#include <inttypes.h> 
```

由于`inttypes.h`已经被 包含`Util.h`，编译器不会再次包含它，也看不到 . 的声明`__STDC_FORMAT_MACROS`。

解决方案是编辑`Utils.h`以包含`#define __STDC_FORMAT_MACROS`，或确保在执行任何包含之前定义它`MyFile.cpp`。

```
#define __STDC_FORMAT_MACROS
#include "Utils.h"
#include <inttypes.h> 
```

最初的设置实际上在 Ubuntu 上的 GCC 4.8 上编译得很好，但是在用于 PowerPC 的旧 ltib GCC 4.3 工具链上失败了，这使得它一开始更加令人困惑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-26T10:27:26.933

`PRIu64`没有定义你使用它的地方。

用字符串替换它，`"llu"`您的代码将编译（但这不是修复，它只是演示了问题）

也许`include`缺少了。也许超过 zealos 包括守卫，并且它被包含在没有魔法令牌的情况下阻止`define`. 也许你的 pch 坏了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-14T16:16:50.550

如果你在 android JNI 平台上。把它放在你的 Android.mk 中：

```
LOCAL_CPPFLAGS := -D__STDC_FORMAT_MACROS 
```

# html - DIV 与 UL、LI 性能

> ID：14535557
> 
> 赞同：7
> 
> 时间：2013-01-26T09:25:22.983
> 
> 标签：html, css, performance, web-applications

如果我们正在设计一个复杂的网页，那么 DIV 和 UL html 标签之间是否存在性能差异。哪个更轻，在浏览器中加载更快。如果我可以同时使用 div 和 li 进行设计，那么我应该选择什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T09:27:38.553

它们只是标签。在 DOM 方面，它们之间的差异为零；唯一的区别在于呈现（CSS，您可以自定义任何一种方式）和含义（语义）。

如果您有*清单*，请使用`<ul>`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T09:59:34.490

请检查这个，它可能对您决定非常有用

[为什么我应该使用“li”而不是“div”？](https://stackoverflow.com/questions/549689/why-should-i-use-li-instead-of-div)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:05:06.827

没有任何区别

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T07:06:56.760

ul"" 是一个无序列表，从被标记开始并在远离边界的缩进位置列出。就好像您为列表中的每个项目单独按下了 Tab 按钮。“div”将在边界处标记并列出相同的列表，这意味着列表及其标记将与其所在的 div 的左边界对齐

# c# - 从自然数中选择一个数字 < n 排除可能性

> ID：14535558
> 
> 赞同：0
> 
> 时间：2013-01-26T09:25:25.223
> 
> 标签：c#, algorithm

给定 n 个自然数从 0 开始， `b`这是一个介于 0 到 n 之间的数字，我希望随机选择一个不包括 的数字`b`。

说 n 是 5 那么要选择的数字是`{0,1,2,3,4,5}` b 是 4，

那么我的随机选择来自`{0,1,2,3,5}`

一种方法是执行 while 循环，直到 random.nextInteger() 找不到 4。

除了使用 while 循环之外，还有什么容易做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:41:17.180

我会写一个简单的扩展：

```
// N.B. : min is inclusive, max is exclusive; so range is: [min,max) - {toExclude}
public static int Next(this Random rand, int min, int max, int toExclude)
{
    int v = rand.Next(min, max - 1);
    if (v < toExclude)
        return v;
    return v + 1;
} 
```

用法：

```
var random = new Random();
var val = random.Next(0,6,4); // 6 because max is exclusive in C# random.Next() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:42:02.873

如果您愿意，这是另一种方法：

```
import random

def random_unifrom(n,b):
    assert b < n and n > 0 and b > 0
    nMinusOneList = [i for i in range(n) if i != b]    
    lSize = len(nMinusOneList)
    randIndex = random.randint(0, lSize-1)
    return nMinusOneList[randIndex] 
```

为了简单起见，我用python编写了这个。创建 nMinusOneList 的复杂度为 O(n)。返回随机索引复杂度取决于您使用的随机函数。

最后，如果您采用这种方法而不是 while 循环，您不会丢失任何东西，但即使您使用 while 循环方法，如果随机函数是随机的 (!!)，那么您应该没有问题。但是，我上面的方法从一开始就排除了您不需要的数字。

在 C# 中，我在 python 中使用的一行可能是几行，其中包含一个范围为 0 到 n 的 for 循环，条件是 x（for 循环索引）不等于 b，在构建列表时，然后您将获得排除 b 的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:30:04.753

在我的选择中，您的方法是最好的。它简单而优雅，即使`m=2`它是`O(1)`平均的（预期的重绘次数是`1/2 + 1/4 + 1/8 + .... < 1`）。

如果你想避免无限循环的最坏情况，还有另一种选择，尽管我怀疑它会对性能产生真正的影响。

1.  在 [0,1] 范围内绘制一个随机双精度数。顺其自然`d`。如果`d < b/m`：在 [0,b) 范围内绘制一个数字并返回它。
2.  Else ( `d > b/m`) - 在范围内绘制一个随机数`[b+1,m]`并返回它。

请注意，它确实是均匀分布的，因为： range
中有`m+1`数字`0,...,m`，但只有`m`“有效”数字（不包括`b`）。
范围内有`b`数字`0,1,...,b-1`- 所以假设均匀分布，数字在这个范围内的概率是`b/m`- 正是`P(d < b/m)`。

在 java 中，它看起来类似于：

```
int m = 5, b = 4;
Random r = new Random();
double d = r.nextDouble();
if (d < ((double)b)/m) {
    System.out.println(r.nextInt(b));
} else { 
    System.out.println(r.nextInt(m-b) + b + 1);
} 
```

# php - 如何使用isset作为密码

> ID：14535560
> 
> 赞同：1
> 
> 时间：2013-01-26T09:25:30.667
> 
> 标签：php, post, if-statement, passwords, isset

我正在给这个简单的 html 表单提供密码，并使用 php 来执行此操作

唯一有效的密码应为“testing”（不带引号）。如果用户没有输入密码，则向他们发出“请输入密码”的警告，并且根本不再对数据进行处理。如果用户没有输入有效密码“testing”（不带引号），则告诉用户“密码无效，抱歉”，不再对数据进行任何处理。（使用“if”语句来确定他们是否输入了密码等……）

但我似乎无法弄清楚有人可以帮帮我吗？

html编码是

```
<form action = "lab.php" method = "post" name = "lab_form">
what is your last name: <input type = "text" name = "last"><br />
what is your student number (password): <input type = "password" name = "number">
</form> 
```

我对我的 php 所做的就是这样......但根本没有工作......我所学到的只是 $_POST 和 isset 现在。我想知道如何使用 $_POST、isset 和 if 语句来完成这项工作......

```
<?php
echo $_POST["last"] . "<br/>"; 

if (isset($_POST["number"]))
{
    echo "The variable $_POST[number] exists.";
}
else if (!(isset($_POST["number"])))
{
    echo "Please enter a password.";
}
else
{
    echo "No variable called $_POST[number]";
}
?> 
```

我知道我在做什么不会有意义....但是...是的:(

不过还是先谢谢了^_^

PS我知道在php代码中我应该添加类似

```
if($_POST["number"] == testing) 
```

并继续，但问题是我什至无法让它显示其他部分，所以我还没有尝试将“测试”作为密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:26:55.740

小错误。也用`empty()`。

```
<?php
echo $_POST["last"] . "<br/>"; 

if (isset($_POST["number"]))
{
    echo "The variable $_POST[number] exists.";
}
elseif (empty($_POST["number"]))
{
    echo "Please enter a password.";
}
elseif (!isset($_POST["number"]))
{
    echo "No variable called $_POST[number]";
}
?> 
```

# python - Python从浮点数组到纹理

> ID：14535565
> 
> 赞同：2
> 
> 时间：2013-01-26T09:26:14.027
> 
> 标签：python, textures, pyopengl, glteximage2d

我需要从浮点矩阵（[0..1]）创建纹理。纹理应该显示一个灰色方块，但只显示一个白色矩形:(

我有这个代码：

```
def _generate_image(self):
    i_len = len(self._data)*Config().get_pixels_per_tile()
    j_len = len(self._data[0])*Config().get_pixels_per_tile()
    data =  ''.join([ chr(int(c*255)) for f in self._data for c in f for _ in range(3*Config().get_pixels_per_tile()) ])
    print data
    return ImageFromData(data, j_len, i_len, GL_RGB, GL_UNSIGNED_BYTE)

class ImageFromData(object):
    def __init__(self, data, width, height, colors, type_):
        self.w = width
        self.h = height
        self.image = glGenTextures(1)
        glBindTexture(GL_TEXTURE_2D, self.image)
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR)
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR)
        glTexImage2D( GL_TEXTURE_2D, 0, colors, width, height, 0, colors, type_, data ) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:42:16.790

我认为您在将图像转换为字符串时可能会犯错误，因为`for`您在那里有一组看起来很讨厌的嵌套循环:-)

所以你的原始数据是像素行和列的浮动强度值的两个嵌套列表，你要复制它们三次以填充 RGB 通道？我想你想要这个：

```
def pixlist2string(pixlist):
    tmp = []
    for row in pixlist:
        for pix in row:
            for channel in xrange(3):
                tmp.append(chr(int(255*pix)))
    return ''.join(ss for ss in tmp) 
```

不过，这是一种非常迂回的做事方式。无需转换为 8 位整数 - 只需告知`glTexImage2D`输入数据类型为`GL_FLOAT`0 和 1 之间的标准化值即可。同样，如果将输入格式设置为单一，则无需复制输入像素来填充 RGB 通道 -频道（`GL_INTENSITY`,`GL_LUMINANCE`等`GL_RED`）。

我还强烈建议使用 Numpy 数组来保存您的输入像素数据。然后，您可以将数组本身传递给`glTexImage2D`而无需摆弄字符串转换。

# java - Happens-Before 易失性领域的关系

> ID：14535567
> 
> 赞同：3
> 
> 时间：2013-01-26T09:26:17.177
> 
> 标签：java, multithreading, concurrency

在 Java Concurrency In Practice 中，它说

> 对 volatile 字段的写入发生在对同一字段的每次后续读取之前

这是否意味着如果**两个线程尝试同时读取和写入 volatile 字段**，**JVM 将确保写入操作先于读取操作**，或者无论如何都会存在竞争条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:27:46.550

会有一个竞争条件。结果将取决于谁先到达：

*   如果写入是第一个，happens-before 保证读取将看到新值。
*   如果读取是第一个，那么最近发生的较早写入保证读取将看到该写入的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T09:34:57.730

在Java 规范中， *happens-before*关系具有极其特殊的含义。[Oracle在其并发教程中](http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html)概述了它的含义。

重要的是要理解这种关系是随着在 CPU 上花费的时间而定义的。换句话说，它与事件发生的初始顺序无关：在您的应用程序中，写入或读取可能首先出现。

而是说，**如果**首先执行写入，**那么**在所有线程执行后续读取操作之前，该写入的效果将对所有线程可见。它只是提供内存一致性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T09:41:58.627

如果对 volatile 字段的写入发生在读取该字段之前，那么 volatile 将保证读取的值是**最新**值。

**注意 volatile 不保证原子性，它保证可见性。**

# php - php从数据库输出到html表

> ID：14535571
> 
> 赞同：1
> 
> 时间：2013-01-26T09:26:58.220
> 
> 标签：php, html, mysql, database, output

我的数据库中有表*条目*的结构：

```
id | card | event | time | day | hm 
```

*   > **id** - 是每个条目的唯一 ID。
*   >**卡**- 是数字。
*   >**事件**- 是数字（0、1、2 或 3）
*   >**时间**- 是 mysql_timestamp
*   > **day** - 是添加条目时的月份日期（日期（“​​j”，时间（））
*   >**嗯**- 一些其他信息...

我想在 html 表中显示**一个月的所有条目。**现在我正在使用这个简单的查询：

```
$sql = "SELECT event, time, day, hm FROM `entries` 
WHERE card=$card_t 
AND YEAR(time)=$year 
AND MONTH(time)=$month
AND event IN (0,1,3) 
ORDER BY `time` ASC;"; 
```

输出条件：表必须至少一天有一行（1 月为 31 行）。如果第 (1-31) 天没有条目，则行必须是：如果天行只有两个条目，则必须是：

```
<tr>
   <td>$day_number</td>
   <td>$time_of_first_event</td>
   <td>$first_event</td>
   <td>$time_of_last_event</td>
   <td>$last_event</td>
 </tr>

 if there is more than two entries a day two must be (I will hide second one with jquery later):

  <tr>
   <td>$day_number</td>
   <td>$time_of_first_event</td>
   <td>$first_event</td>
   <td>$time_of_last_event</td>
   <td>$last_event</td>
 </tr>
 <tr>
     <table>
       <tr>
        <td>$time</td>
        <td>$event</td>
       </tr>
     </table>
 </tr> 
```

所以它看起来像：

```
| 1 | no entry                                          |
| 2 | no entry                                          |
| 3 | no entry                                          |
| 4 | time_first | event_fisrt | time_last  |event_last |
                 | time2 | event 2                      |
                 | time3 | event 3                      |
| 5 | no entry                                          |
... 
```

但是我现在得到的只是 31 行的输出，如果一天的输出超过了这一天的行并显示这一天的所有行：

```
| 1 | no entry       |
| 2 | no entry       |
| 3 | no entry       |
| 4 | time1 event 1  |
| 4 | time2 event 2  |
| 4 | time3 event 3  |
| 5 | no entry       |
... 
```

请帮帮我，对错误深表歉意，英语不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:37:14.987

如果我理解正确，您想对输出进行分组。建立组的标准是日期。一种方法是在循环之前定义一个变量，在其中存储最后处理条目的日期。在输出条目之前，您检查条目的日期是否与此变量中的日期相同......然后您仍然在一个组中并且应该以不同的方式输出它。

由于您的输出格式非常特殊，在您的情况下实现这一点可能有点困难。首先循环查询结果并将条目存储在多维数组中可能更容易，其中日期是第一级的键，在下一级存储与该日期相关的所有条目。所以你得到：

```
array (
   'xxxx-xx-xx' => array(entry1, entry2, entry3),
   'yyyy-yy-yy' => array(entry1),
   ...
) 
```

然后你可以在这个数组上做另一个循环，并`if (count($array[$currentKey]) == 1)`用来检查这个日期是否只有一个事件或更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:47:02.167

`GROUP_CONCAT`在 sql 和`explode`foreach 循环中使用

```
$sql = 

"SELECT 
        GROUP_CONCAT(event SEPARATOR ","), GROUP_CONCAT(time SEPARATOR ","), 
        day , GROUP_CONCAT(hm SEPARATOR ",") FROM `entries` 
    WHERE 
        card=$card_t 
        AND YEAR(time)=$year 
        AND MONTH(time)=$month
        AND event IN (0,1,3) 
    GROUP BY 
        day
    ORDER BY 
        `time` ASC;"; 
```

在 foreach 中，

```
foreach ($entries as $entry) {
    if ($entry['event'] == "") {
        echo '<tr>';
             echo '<td>'.$no++.'</td>';
             echo '<td>No events</td>';
             ...................
        echo </tr>';
        continue;
    }

    $events = explode("," , $entry['event']);
    if (count($events) > 0) {
       // Have multiple row here
       foreach($events as $event) {
           ........................
       }
    } else {
        echo '<tr>';
             echo '<td>'.$no++.'</td>';
             echo '<td>'.$entry['event'].'</td>';
             ...................
        echo </tr>';
    }
} 
```

# c# - Sitecore WFFM - 使用 Session 中的数据预加载表单

> ID：14535572
> 
> 赞同：3
> 
> 时间：2013-01-26T09:27:07.943
> 
> 标签：c#, .net, sitecore, sitecore6, web-forms-for-marketers

我正在尝试在 Sitecore 中创建一个 WFFM 表单来编辑当前用户的配置文件，该配置文件存储在 Session 中（与 Session 不同`Sitecore.Context.User.Profile`）。为此，我正在寻找一种方法来使用会话中的配置文件数据预加载表单的字段。

这可以做到吗？我正在使用 Sitecore CMS 6.5 和 WFFM 2.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:43:37.743

WFFM 不能开箱即用地做到这一点。我们选择了另一种方法来解决问题。在表单呈现下，您可以`/sitecore/layout/Renderings/Modules/Web Forms for Marketers/Form`在`Parameters`其中添加`FormTemplate`带有自定义用户控件的参数以呈现表单：

```
FormTemplate=/sitecore modules/web/Web Forms for Marketers/Control/CustomSimpleFormAscx.ascx 
```

在这个用户控件中，我们循环遍历每个字段并根据用户的自定义属性设置输入字段的值。当然，您可以将其增强到其他字段，例如 select 等。这是一些示例代码：

```
public partial class CustomSimpleFormAscx : SitecoreSimpleFormAscx
{
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        FillInUserData(this.FieldContainer);
    }

    private void FillInUserData(System.Web.UI.Control control)
    {
        foreach (System.Web.UI.Control child in control.Controls)
        {
            if (child is BaseControl)
            {
                if (child is InputControl)
                {
                    InputControl field = (InputControl)child;
                    field.Text = Sitecore.Context.User.Profile.GetCustomProperty(field.ControlName);
                }
            }

            FillInUserData(child);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:40:54.450

我建议您反编译`FormRenderer`WebControl 并构建自己的来执行此操作。这是通过 WFFM 模块呈现表单的标准表示控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:23:00.847

似乎问题的解决方案涉及更多。首先，我将所有个人资料信息从会话移至`Sitecore.Context.User`'s `Profile`。为此，必须实现自定义用户配置文件类。使用这种方法，我知道需要从这个自定义配置文件而不是会话预加载表单字段。

为此，我在内容树下创建了一个名为“配置文件变量”的文件夹，它以点表示法表示需要读取的自定义配置文件属性。例如：`{ DisplayName: "Home Telephone", Value: "ContactDetails.HomeTelephone" }`。

最后，我创建了一个自定义 WFFM 字段类型，基于 Single Line Text 字段类型，该类型还有一个属性，`PreloadField`从“配置文件变量”节点获取值，以及`OnInit`我从上下文用户的配置文件中读取的自定义字段类型反射存储在其中的属性的值`PreloadField`并将文本字段的`Text`属性设置为该值。

希望这可以帮助其他人寻找类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T05:50:11.217

我正在寻找做类似的事情。在 WFFM 的 2.3 版本中，有一些规则操作允许您从用户配置文件中设置字段的值。

请参阅操作：使用用户配置文件特定字段选项中的默认值，直到您选择表单字段时的规则。

您可以使用全名、电子邮件、评论或任何其他自定义属性。

不包括的一个字段是 UserName 字段。您可以编写自定义操作返回用户名字段。

# php - 红豆 php R::getAll 不返回任何记录

> ID：14535573
> 
> 赞同：1
> 
> 时间：2013-01-26T09:27:15.310
> 
> 标签：php, mysql, redbean

这是数据库结构，使用红豆 php 生成：

```
CREATE TABLE `attrib` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `type` tinyint(3) unsigned DEFAULT NULL,
  `value` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=10 ;

CREATE TABLE `attrib_photo` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `attrib_id` int(11) unsigned DEFAULT NULL,
  `photo_id` int(11) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UQ_e472845bf988796e2d3eceb91e2745b95f3aa534` (`attrib_id`,`photo_id`),
  KEY `index_for_attrib_photo_attrib_id` (`attrib_id`),
  KEY `index_for_attrib_photo_photo_id` (`photo_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=19 ;

CREATE TABLE `photo` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `filepath` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `date` set('1') COLLATE utf8_unicode_ci DEFAULT NULL,
  `iscolored` tinyint(3) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=4 ;

ALTER TABLE `attrib_photo`
  ADD CONSTRAINT `attrib_photo_ibfk_1` FOREIGN KEY (`attrib_id`) REFERENCES `attrib` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `attrib_photo_ibfk_2` FOREIGN KEY (`photo_id`) REFERENCES `photo` (`id`) ON DELETE CASCADE; 
```

我正在手动构建查询：

```
 output of R::debug(); R::getAll($sql);
        select filepath 
        from photo 
        inner join attrib as attrib4 on attrib4.type = 4 and attrib4.value in ("Dmitry") 
        inner join attrib_photo as attrib_photo4 on attrib_photo4.attrib_id = attrib4.id and attrib_photo4.photo_id = photo.id WHERE 1=1 LIMIT 0,25

Array ( ) 
 resultset: 0 rows
 [] 
```

结果集是空的，但基础包含记录，这些记录符合要求，并且在 phpMyAdmin 中手动运行 sql 会显示它们。

查询有什么问题，我可以处理任何其他调试信息来解决问题吗？谢谢。

**更新：** 缺少一点细节，在原始查询中，我使用 unicode 字符串进行照片属性搜索。经过一番调查，我发现 php 代码可以正常工作，并且在 mysql 端发生了错误的编码转换。决定将整个数据库的排序规则更改为 utf8_unicode_ci。感谢您的关注，对于遗漏相关信息深表歉意。

# ios - Core Data、iCloud 和两个持久性存储失败

> ID：14535578
> 
> 赞同：2
> 
> 时间：2013-01-26T09:27:44.170
> 
> 标签：ios, core-data, icloud, persistent-storage

我有一个带有单个持久存储的现有数据模型，一切都很好。

现在，在 WWDC 2012 视频“使用 iCloud 与核心数据”（#227）之后，我在我的模型中定义了两个配置，“云”和“本地”，同时保持原来的“默认”。我已经将我的实体分为“云”和“本地”。在我的代码中，我只添加了两个相应的持久存储：

```
 NSDictionary *options = @{NSMigratePersistentStoresAutomaticallyOption: @YES,
                            NSInferMappingModelAutomaticallyOption: @YES};
  if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                  configuration:@"Cloud"
                                                            URL:[self cloudPersistentStoreURL]
                                                        options:options
                                                          error:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
  }

  if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                  configuration:@"Local"
                                                            URL:[self localPersistentStoreURL]
                                                        options:options
                                                          error:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
  } 
```

这些添加就好了。后来，在运行应用程序时，我尝试正常保存一些初始试用数据，抛出以下异常：

> NSUnderlyingException=无法解析如何将对象分配给商店；某些对象可能已分配给商店；使用 [[managedObject objectID] persistentStore] 找出现在的情况；使用 [managedObjectContext assignObject:toStore:] 来理顺事情

我用谷歌搜索了其中的一部分，没有任何点击，Apple 的故障排除核心数据文档似乎没有讨论这个问题。我不知道是什么原因造成的，也不知道去哪里找。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:39:06.937

确保您没有从一家商店到另一家商店的关系。相关实体必须位于同一配置内。

例如，您将实体`Book`配置为存储在`Cloud`和`Author`存储到`Local`. 两者都是相关的。当您现在将 an 分配`Author`给 a`Book`并保存时，CoreData 无法处理该关系并会引发您看到的错误。

# c# - 如何在 Asp.Net 中获取网络计算机名称和网络 IP“不是互联网 IP”

> ID：14535579
> 
> 赞同：0
> 
> 时间：2013-01-26T09:27:44.210
> 
> 标签：c#, asp.net, ip

因为我要创建维护请求页面，所以任何员工都可以在没有互联网的情况下从我们的本地网络使用这个页面，我想获取提出请求的计算机名称和 Ip，

我搜索并阅读了这一点，但如果我得到的大多数是：如何获取互联网 IP 或主机名和 IP，但我的问题是“如何在 Asp.Net 中获取网络计算机名称和网络 IP“非互联网 IP” “？？

我发现的一些关于 Internet Ip 和主机信息的信息是：

```
using System.Net;
//Get the Host name:

    string strHostName = string.Empty;
    strHostName = Dns.GetHostName();

    // Then using host name, get the IP address list..
    IPHostEntry ipEntry = Dns.GetHostByName(strHostName);
    //Get the IP address
    IPAddress[] addr = ipEntry.AddressList;
    for (int i = 0; i < addr.Length; i++)
    {
        Response.Write("IP Address {0}: {1} " + i + addr[i].ToString() + ", HostName: " + strHostName);
    } 
    // end of host info. 
```

并以这种方式获取互联网信息：

```
Response.Write("Your IP Address: " + Request.UserHostAddress + "<BR>");
Response.Write("Your Computer Name: " + System.Net.Dns.GetHostEntry(Request.UserHostAddress).HostName); 
```

那么有什么方法可以获取计算机的本地IP和名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:17:23.027

If you have DNS correctly configured to be updated with the names of computers as they connect and disconnect, then you can use reverse resolution to get from the client IP address back to the host name.

If your web site is inside the firewall, the connected user host address will be the internal address and can be resolved. If the site is hosted outside (or possibly in the DMZ) then you will not be able to get the name without requiring the user to provide it - or by running some trusted code on the client to access the local information.

# jquery - jQuery 在 jsFfiddle 中工作，但不在我的 PC 中

> ID：14535583
> 
> 赞同：0
> 
> 时间：2013-01-26T09:28:13.560
> 
> 标签：jquery, export-to-excel

[此示例](http://jsfiddle.net/xhYcD/218/)在 jsFiddle 中运行良好，但将表格导出到 Excel 工作表中

我保存在PC中，如下面的代码

```
<html>
<head>
  <title>Table Export</title>
  <script src="jquery.js"></script>

  <script type="text/javascript">
$("#btnExport").click(function (e) {
    window.open('data:application/vnd.ms-excel,' + encodeURIComponent($('#dvData').html()));
    e.preventDefault();
});
</script>
</head>

<body>
  <br/>
<div id="dvData">
<table>
    <tr>
        <th>Column One </th>
        <th>Column Two</th>
        <th>Column Three</th>
    </tr>
    <tr>
        <td>row1 Col1</td>
        <td>row1 Col2</td>
        <td>row1 Col3</td>
   </tr>
   <tr>
        <td>row2 Col1</td>
        <td>row2 Col2</td>
        <td>row2 Col3</td>
   </tr>
      <tr>
        <td>row3 Col1</td>
        <td>row3 Col2</td>
        <td>row3 Col3</td>  
   </tr>
</table>
</div>
<br/>
<a href="" id="btnExport">edit</a>
</body>
</html> 
```

但这不起作用并导出文件，但其他 jQuery 示例有效，有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:30:37.787

像这样使用准备好的文档

```
 <script type="text/javascript">
  $(document).ready(function(){
  $("#btnExport").click(function (e) {
     window.open('data:application/vnd.ms-excel,' +encodeURIComponent($('#dvData').html()));
    e.preventDefault();
  });
  });
  </script> 
```

# windows-8 - 模拟非标准分辨率

> ID：14535584
> 
> 赞同：1
> 
> 时间：2013-01-26T09:28:18.257
> 
> 标签：windows-8, resolution, windows-store-apps

我正在开发一个针对特定设备的项目，该设备的分辨率为 1280 x 800。我知道商店应用程序的限制意味着对该分辨率的功能支持有限（没有快照视图等)，但我想知道是否有办法将模拟器配置为以非标准分辨率工作。目前我们开发的所有屏幕都是盲目的（或至少在 1366x768 的分辨率下），因为我们没有实际的设备可以构建。结果，我们真的不知道布局在设备上的外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:03:30.957

单击模拟器右边缘的更改分辨率按钮。按下第 9 个按钮，图标看起来像 LCD 显示屏。1200x800 是下拉列表中提供的分辨率之一。如果我知道如何制作屏幕截图，我会发布一个屏幕截图，模拟器的效果有点太好了；）

# c++ - Boomerang 反编译器失败

> ID：14535600
> 
> 赞同：1
> 
> 时间：2013-01-26T09:29:57.303
> 
> 标签：c++, decompiling, boomerang

我需要反编译一个源代码丢失了很长时间的windows程序。

为此，我在 Windows 7 中使用了回旋镖。但是，它看起来坏了，给出了这个消息并退出：

```
Could not open dynamic loader library Win32BinaryFile.dll (error #998) 
```

谷歌搜索它没有给出有用的结果。查看[回旋镖源代码](http://boomerang.sourceforge.net/doxy/BinaryFileFactory_8cpp-source.html)，它显然来自此：

```
00137     hModule = LoadLibraryA(libName.c_str());
00138     if(hModule == NULL) {
00139         int err = GetLastError();
00140         fprintf( stderr, "Could not open dynamic loader library %s (error #%d)\n", libName.c_str(), err);
00141         fclose(f);
00142         return NULL;
00143     } 
```

即`LoadLibraryA`失败，状态为 998。

我能做些什么来解决这个问题？

**编辑，四个小时后：**

我要反编译的程序是我和一个朋友在 2005 年实现的工作。与此同时，源代码刚刚消失，我们没有看到。现在，在 2013 年，当我们搜索它时，什么也没找到。回想起来，它可能在 2008 年或 2010 年丢失了，有两次我的计算机硬件崩溃，我需要买一台新计算机（并因此丢失了大量数据）。我们有几个备份分散在几个地方，但经过详尽的搜索，我一无所获。

我知道，由于 Boomerang 是开源的，我可以获取它的源代码并对其进行破解。然而，这种任务并不是我最初打算做的，因为重点只是反编译我的程序，我想我错过了一些简单的东西，因为它无法加载明显存在的 DLL。

我不需要返回确切的代码，只需要一个已实现算法的确切细节的草图。有了这个，我可以再次重写其余部分。

# c# - c#插件（反射）

> ID：14535602
> 
> 赞同：1
> 
> 时间：2013-01-26T09:30:18.860
> 
> 标签：c#, plugins, reflection

我无法通过反射创建插件解决方案。当我单击一个 menuItem 时，我想在我的窗口中加载并显示另一个程序。我想我需要 3 个项目。

1.  单击 menuItem 时想要加载另一个程序的客户端程序
2.  我要加载的程序
3.  插件类

代码客户端程序

```
private void nQueensToolStripMenuItem_Click(object sender, EventArgs e)
    {

        // Create an assembly object to load our classes
        string path = Application.StartupPath + "\\NQueens.dll";
        Assembly ass = Assembly.LoadFile(path);

        Type objType = ass.GetType("NQueens.NQueen");

        // Create an instace of NQueens.NQueen
        var instance = Activator.CreateInstance(objType);

        // public static bool berekenQueens()
        objType.InvokeMember("berekenQueens",
            BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Static,
            null, instance, null);

        // private static bool bordValidatie
        objType.InvokeMember("bordValidatie",
            BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Static,
            null, instance, null);
    } 
```

班级

```
[AttributeUsage(AttributeTargets.Class)]
public class myPluginAttribute : Attribute
{
    private bool _bIsPlugin;
    public Boolean IsPlugin
    {
        get { return _bIsPlugin; }
        set { _bIsPlugin = value; }
    }
    private string _sDescription;
    public string Description
    {
        get { return _sDescription; }
        set { _sDescription = value; }
    }

    public myPluginAttribute(Boolean b, String desc)
    {
        IsPlugin = b;
        Description = desc;
    }
} 
```

NQueens（单击菜单项时我想加载的程序）NQueens.cs

```
public class NQueen
{
   public static bool berekenQueens(int Row, int N, bool[,] bord)
   {
       if (Row >= N) return true; 

       for (int Col = 0; Col < N; Col++)
       {
           //Q toevoegen
           bord[Row, Col] = true;

           //Q + Q volgende Row  controleren
           if (bordValidatie(Row, Col, bord, N) && berekenQueens(Row + 1, N, bord))
           {
               return true;
           }

           //Q verwijderen indien niet door controle
           bord[Row, Col] = false;

       }
       return false;
   }

   private static bool bordValidatie(int currentRow, int currentCol, bool[,] currentBord, int N)
   {
       int colstep = 1;
       for (int i = currentRow - 1; i >= 0; i--)
       {
           //rechte lijn 
           if (currentBord[i, currentCol])
               return false;

           //linker diagonaal
           if (currentCol - colstep >= 0)
           {
               if (currentBord[i, currentCol - colstep])
                   return false;
           }
           //rechter diagonaal
           if (currentCol + colstep < N)
           {
               if (currentBord[i, currentCol + colstep])
                   return false;
           }
           colstep += 1;
       }
       return true;
   }

} 
```

主窗口（nqueens）

```
public partial class MainWindow : Window
{
    public int iN { get { return Convert.ToInt32(txtN.Text); } set { txtN.Text = "" + value; } }
    private bool[,] spelbord;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        spelbord = new bool[iN, iN];
        NQueen.berekenQueens(0, iN, spelbord);

        visualise(iN, spelbord);
    }

    private void visualise(int N, bool[,] bord)
    {
        gridTekenen();

        for (int row = 0; row < N; row++)
        {
            for (int col = 0; col < N; col++)
            {
                Rectangle rect = new Rectangle();
                rect.Stretch = Stretch.Fill;

                TextBlock txtB = new TextBlock();

                if (spelbord[row, col])
                {
                    SolidColorBrush mySolidColorBrush = new SolidColorBrush();
                    mySolidColorBrush.Color = Colors.LightGreen;
                    rect.Fill = mySolidColorBrush;

                    txtB.Text = "Q";
                }

                rect.SetValue(Grid.ColumnProperty, col);
                rect.SetValue(Grid.RowProperty, row);

                txtB.SetValue(Grid.ColumnProperty, col);
                txtB.SetValue(Grid.RowProperty, row);

                gridPaneel.Children.Add(rect);
                gridPaneel.Children.Add(txtB);
            }
        }
    }

    private void gridTekenen()
    {
        gridPaneel.ShowGridLines = true;
        int grooteGrid = int.Parse(txtN.Text);

        RowDefinition rowDef;
        ColumnDefinition colDef;

        for (int i = 0; i < grooteGrid; i++)
        {
            rowDef = new RowDefinition();

            GridLengthConverter myGridLengthConverter = new GridLengthConverter();
            GridLength gl1 = (GridLength)myGridLengthConverter.ConvertFromString(150 + "*");
            rowDef.Height = gl1;

            colDef = new ColumnDefinition();
            colDef.Width = gl1;

            gridPaneel.RowDefinitions.Add(rowDef);
            gridPaneel.ColumnDefinitions.Add(colDef);
        }

    }
} 
```

我一直试图让这件事正常工作。如何让我的程序显示 NQueens 程序？我的客户端程序如何知道 NQueen 的方法并使用它们？

编辑：我对 nQueensToolStripMenuItem_Click 方法进行了一些更改。现在这正确吗？现在如何在我的窗口中显示 NQueens 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:39:36.633

据我所知，您将需要一个通用接口，这有助于与“扩展”进行通信。然后，您将拥有三个项目：

*   您的核心应用程序
*   仅包含接口的库（即 IPlugin）
*   你的扩展。

查看[codeproject](http://www.codeproject.com/Articles/4691/Plugin-Architecture-using-C)以更好地了解插件的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:43:43.553

一个更简单的模式是带有接口的经典“工厂模式”。我之前做过这个来创建插件，它真的很简单：

1) 创建一个接口，其中包含您曾经用来与插件“对话”的所有属性和方法。在（几乎）不会改变的基类/程序集中定义它。

2) 创建一个框架 UI 应用程序，该应用程序可能具有插件界面的一个库存实现，可能是默认菜单，因此您可以轻松调试并获得正确的界面。

3）现在动态加载...创建一个配置字符串，列出一些应该加载的文件。很好地允许它是可配置的，而不是硬编码路径，同样为了安全，永远不要只在路径中加载程序集，你不知道谁可以通过文件权限的后门将它们放在那里。

4）在启动时使用方法中的程序集加载来遍历每个文件，一旦加载，使用反射来查询接口，寻找你的插件接口。存储加载的接口/插件的集合并根据需要使用它们。

显然，当您拥有一个 UI 时，您将有一种方法来创建子菜单项和窗口，并将它们的父项适当地设置为您的框架应用程序菜单或客户区。然后，您将在界面上定义一些事件来处理诸如被单击的项目之类的事件。定义一个标准的“工具”或命令界面也很有意义，因此您可以以相同的方式处理菜单项和工具栏项。

# sql - 创建windows azure Sql表

> ID：14535604
> 
> 赞同：1
> 
> 时间：2013-01-26T09:30:28.800
> 
> 标签：sql, azure, azure-sql-database

在创建 Windows Azura SQL 数据库时，您可以使用此脚本。

下面显示的脚本应该防止两个表具有完全相同的名称时可能发生的冲突。

我的问题是：谁能详细解释这段代码是如何工作的注意：我有很好的数据库背景和 SQL 的使用

`IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Department]') AND type in (N'U'))`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:39:41.487

[sys.objects - MSDN](http://msdn.microsoft.com/en-us/library/ms190324.aspx)：

> 为在数据库中创建的每个用户定义的、模式范围的对象包含一行。

sys.objects.type：

> U = 表（用户定义）

[OBJECT_ID - MSDN](http://msdn.microsoft.com/en-us/library/ms190328.aspx)：

> 返回模式范围对象的数据库对象标识号。

因此，您通过将对象名称传递给`OBJECT_ID`指定类型应为表的函数来查询返回的对象 ID 是否存在。

如果它不存在，它不会返回任何行，因此不满足包装语句中的条件：`IF NOT EXISTS`

# jquery - 获取我的复选框的选中值

> ID：14535605
> 
> 赞同：0
> 
> 时间：2013-01-26T09:30:34.413
> 
> 标签：jquery, css

我有以下html代码：

```
<tr>
    <td class="right">
        <label class="input-control tiny-checkbox" onclick="">
            <input type="checkbox" value="0"/>
            <span class="helper"></span>
        </label>
    </td>
    ... 
```

我有以下 jQuery 代码：

```
$("table tbody tr td").click(function () {
    var col = $(this).parent().children().index($(this));
    var row = $(this).parent().parent().children().index($(this).parent());

    if (col == 0) {
        // col checkbox -> highlight the line (on/off)
        var checked = $(this).children(':checkbox').is(':checked'); 
```

即使选中了复选框，选中的 var 也永远不会为真。我不知道为什么。

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:35:08.463

您必须使用`find`inside of，`children`因为 children 会检查直接子元素，而不是孙子元素。

```
 var checked = $(this).find(':checkbox').is(':checked'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:41:11.260

使用该`find()`方法而不是`children()`因为复选框不是`td`

```
$("table tbody tr td").click(function () {
    var col = $(this).parent().children().index($(this));
    var row = $(this).parent().parent().children().index($(this).parent());

    if (col == 0) {
        // col checkbox -> highlight the line (on/off)
        var checked = $(this).find('input:checkbox').is(':checked');
    }
}); 
```

演示：http: [//jsfiddle.net/MShgq/](http://jsfiddle.net/MShgq/)

# php - PHP上传图片HTTPS

> ID：14535606
> 
> 赞同：0
> 
> 时间：2013-01-26T09:30:34.570
> 
> 标签：php, apache, https, upload

我有一个表格可以很好地发送图像，复制它们并调整它们的大小。

我使用 GeoTrust 证书在 SSL 中切换了网站。除文件上传外，一切正常。

表格是这样的：

```
<form name='sendAvatar' method='post' action='if_avatar_resize.php' enctype='multipart/form-data' target="If_avatar_resize"> 
```

因此，我将文件上传到具有以下代码的 iframe 中：

```
if (!copy($_FILES['file_image']["tmp_name"], $dest_file)) {
  echo $_FILES['file_image']["tmp_name"]."The copy of the file failed..\n".$dest_file ;
} else {
  echo $_FILES['file_image']["tmp_name"]."Copy of the file OK " ;
} 
```

上传完全相同的文件，当网站在 HTTPS 中时，我一直有错误消息“文件的副本失败”

所以我检查了目录 /tmp 以查看文件是否已上传：

没有 SSL：

```
-sh-3.2$ ll phpW7XSL6
-rw------- 1 apache apache 2279079 Jan 26 00:52 phpW7XSL6
-sh-3.2$ ll phpW7XSL6
ls: phpW7XSL6: No such file or directory 
```

使用 SSL：

```
-sh-3.2$ ll phpbcUxyG
-rw------- 1 apache apache 2160218 Jan 26 00:53 phpbcUxyG
-sh-3.2$ ll phpbcUxyG
ls: phpbcUxyG: No such file or directory 
```

因此，无论格式是否为 HTTPS，文件的上传都可以正常工作，并且文件上传到 /tmp

另一方面，如果文件以 HTTPS 上传，则文件的副本不起作用。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T09:48:34.237

是的，我们不能将 $_FILES http 站点发送到 https 站点。换句话说，move_uploaded_files() 函数仅用于将[http://abc.com](http://abc.com)之类的文件移动到[http://xyz.com](http://xyz.com)而不是 https:site

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T09:27:00.883

我注意到一个类似的问题。

在测试了我在纯 HTTP 和 HTTPS 上的上传后：似乎在 SSL 模式下，超过 PHP`upload_max_filesize`或`post_max_size`完全失败，并且 $_FILES[...]["tmp_name"] 没有填充。

由于这是一个新安装的服务器，默认设置为@2M，我的上传测试超过了这个值。

我仍在寻找一些文档来支持这一点，以及一种仍然检测更强大错误的优雅方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:40:47.557

代码变化不大

```
if (!move_uploaded_file($_FILES['file_image']["tmp_name"], $dest_file)) {
  echo $_FILES['file_image']["tmp_name"]."Upload file failed..\n".$dest_file ;
} else {
  echo $_FILES['file_image']["tmp_name"]."Upload file Successfully..\n" ;
} 
```

愿这会对你有所帮助...... :)

# c# - 从 C++ Windows Phone 8 应用程序引用 Facebook SDK C# WP8 的问题

> ID：14535609
> 
> 赞同：3
> 
> 时间：2013-01-26T09:30:48.660
> 
> 标签：c#, c++, facebook, facebook-c#-sdk, windows-phone-8

我尝试在 Visual C++ VS2012 下的“Windows Phone Direct3D App（仅限本机）”项目类型的应用程序中引用 facebook.dll - wp8 分支，但出现错误：

> 无法添加对 [dllname] 的引用，因为这两个项目针对不同的运行时。

限制是我不能更改应用程序的体系结构，因此主入口点必须在 C++ 项目中，并从这里以某种方式调用用 C# 编写的用于 facebook 的代码。

基于[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714080(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714080(v=vs.105).aspx)，我还尝试通过 Visual C++“Windows Phone Runtime”间接引用 C# dll组件”，但我又得到了同样的错误。我试图更改一些项目设置，但没有任何效果。尝试在 C++ 中使用 C# dll，在我在网上找到的所有示例和演示中，对于 wp8，主要入口点始终在 C# 中。只有一些关于 Windows 商店应用程序的提示似乎表明可以从 C++ 使用 C#，但我没有找到任何参考明确说明我在 wp8 上的场景是可能的或不可能的。

如何从我的 WP8 应用程序使用 facebook SDK？或者我有什么选择？

提前感谢任何分享解决方案或任何建议的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:13:40.023

C++ 项目不能只调用 WP8 中的任何 C# DLL。你必须改变类的构建方式。启动一个新的 C# XAML + C++ D3D 项目并查看 IDrawingSurfaceManipulationHandler 和 Direct3DInterop。基本上，您必须重新创建和重新编译 Facebook C# SDK 才能在 WP8 C++ 中使用它。

但是，在我的机器上安装和使用 WP8 C# 项目上的 Facebook SDK 可以正常工作。您是否考虑过使用混合的 C# 和 C++ 项目？它确实有一个小的性能命中，但只要你使用 DrawingSurfaceBackgroundGrid，你应该仍然有相对较好的性能。

# c++ - (Class*)(0) 在 C++ 中是什么意思

> ID：14535611
> 
> 赞同：0
> 
> 时间：2013-01-26T09:31:05.677
> 
> 标签：c++, pointers

我遇到了一些代码，如下所示：

```
if(instance != (Class*)(0)) 
```

有人可以描述这是在做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:33:25.300

它检查是否`instance`不指向 address `0`，强制转换`Class*`为多余的。

如果`instance`是一个对象，它调用`bool operator != (const Class*) const`;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:34:14.507

If`instance`是一个指针，这将检查它是否是`NULL`. 演员阵容是多余的。

如果`instance`不是指针（例如某个类的实例），则语义取决于类，因为运算符重载进入图片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T09:35:11.753

简而言之：它测试指针是否为空。

详细说明：表达式`(Class*)(0)`实际上是从 0（即`NULL`）到类型指针的类型转换`Class`，然后将该指针（它是一个常量 NULL）与**指针**变量进行比较`instance`。

一个例子：

```
void Check(YourClass *instance)
{
   if(instance != (YourClass*)(0))
      // do this
} 
```

现在重要的问题是**为什么**。为什么不简单地作为：

```
 if(instance != 0)
      // do this 
```

好吧，它只是为了代码可移植性。一些编译器可能会发出`Class*`正在比较的警告`int`（因为`NULL`只是`0`，即`int`）。许多静态分析工具也可能会抱怨使用类类型指针进行简单的 NULL 检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T09:36:31.960

它检查您要比较的指针是否指向`NULL`. `(Class *)`演员阵容是不必要的。它等价于 C++0x 中的以下内容：

```
if (instance != nullptr) 
```

Assuming that instance is a pointer, which it most certainly is.

# ios - UITableView 滚动疯狂

> ID：14535613
> 
> 赞同：0
> 
> 时间：2013-01-26T09:31:38.887
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个表格视图，它从核心数据数组中获取数据。当我尝试将对象“Post”的值分配给某物或 NSLog 时，表格滚动滞后。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CellCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Post *post = [array objectAtIndex:indexPath.row];
    // If I comment out the NSLog the scroll is smoothly
    NSLog(@"%@", post.title);    
    // Same thing for the line below
    cell.textLabel.text = post.title;
    return cell;
} 
```

**编辑：**

我正在使用 StackMob v1.2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:25:08.867

首先，您应该添加“Midhun MP”建议的代码。

如果这对滞后问题没有帮助...那么我认为 post.title 必须太重而不能使用该方法（因为该方法被调用太多次）（请不要让 post.title 使用互联网连接得到字符串？！是吗？）

解决方案：
1）在您的应用程序中的第一件事：创建一个 array2 并将您需要的所有 post.title 放入其中（每次帖子更改时，您都应该更新该 array2）
2）使用此 array2 获取单元格的文本：单元格.textLabel.textPost=[array2 objectAtIndex:indexPath.row];
3）我不能 100% 确定 NSLog 是否有问题，因为我还没有测试过（可能是……但这应该只发生在调试期间……在发布模式下你不应该在那里）但它很容易测试和查看（只需评论 NSLog 行）

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:39:20.340

使用`NSLog`肯定会导致性能问题，尤其是在`cellForRowAtIndexPath`频繁调用的方法中。

请查看这些文章了解详情：

1.  [**在发布版本中删除 NSLog**](http://www.cimgf.com/2009/01/24/dropping-nslog-in-release-builds/)
2.  [**NSLog 替代品的演变**](http://iphoneincubator.com/blog/debugging/the-evolution-of-a-replacement-for-nslog)

**编辑 ：**

您的实施也会导致缓慢。

您缺少 tableviewCells 的分配。

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
 if(cell == nil)
 {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
 } 
```

# phalcon - 如何直接使用控制器的 var_dump 输出？

> ID：14535614
> 
> 赞同：8
> 
> 时间：2013-01-26T09:31:47.527
> 
> 标签：phalcon

```
class IndexController extends \Phalcon\Mvc\Controller
{
    public function indexAction()
    {
        $custom = "Custom variable";
        var_dump($custom);
    }
} 
```

不使用模板中的变量如何显示结果？

PS Echo 功能的结果也被抑制了。我知道这是错误的方法，但它是调试变量的快速方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-02T07:39:50.877

如果您没有看到控制器的输出，请检查您的模板文件中是否有以下行：

```
{{ content() }} 
```

您可以在代码的任何位置使用 php 的 var_dump：

```
var_dump($var);exit; 
```

出口; 是停止这条线之后发生的任何事情。

您还可以使用 volt 函数将 vars 转储到 volt 模板中：

```
{{dump(var)}} 
```

dump() 与 var_dump() 相同 以下是一些更有用的 volt 函数：

[http://docs.phalconphp.com/en/latest/reference/volt.html#functions](http://docs.phalconphp.com/en/latest/reference/volt.html#functions)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T19:54:03.700

控制器中有一个隐式渲染级别，在渲染的第一个视图中，您必须调用 getContent() 方法：

```
<div class="controller-output"><?php echo $this->getContent(); ?></div> 
```

或伏特：

```
{{ content() }} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T20:39:09.057

好的，谢谢[twistedxtra](https://stackoverflow.com/users/1022921/twistedxtra)的提示！

就我而言，我使用 Twig。为了解决我的问题，我向 Twig 添加了一项功能：

```
$function = new \Twig_SimpleFunction('content', function() use($view) {
    return $view->getContent();
});

$this->_twig->addFunction($function); 
```

现在它可以在模板中使用：

```
{{ content()|raw }} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-26T10:22:06.067

根据您的上述代码，我了解您需要执行 $custom 值。有以下2种方式

1 - 你可以写 var_dump($custom); 然后放 die(); 这样之后就无法执行任何代码。

1.  您可以编写 echo $custom 来执行 $custom 的值。但是你必须在它之后停止脚本执行。

有时可能会发生代码已编写但由于模板或视图文件执行，它会覆盖您的代码。您必须检查源代码是否打印了您在控制器中编写的标签上方的任何内容。

愿这对你有帮助........:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-25T19:29:15.397

我知道我来晚了，但是，打电话

```
exit; 
```

在你的 var_dump() 之后

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-28T23:14:57.540

您可以在操作中完全禁用视图：

```
class IndexController extends \Phalcon\Mvc\Controller
{
    public function indexAction()
    {
        $custom = "Custom variable";
        $this->view->disable();
        var_dump($custom);

    }
} 
```

甚至使用自己的调试方法：

```
class IndexController extends \Phalcon\Mvc\Controller
{
    public function indexAction()
    {
        $custom = "Custom variable";
        $this->debug($custom);

    }

    public function debug($data)
    {
        $this->view->disable();
        var_dump($data);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T10:59:15.777

Phalcon\Mvc\View\Engine\Twig() 更改为：

```
https://gist.github.com/4690638 
```

并使用：

```
{{condent()|raw}}
{{linkTo('#', 'title')|raw}} 
```

这是我的叉子;-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-25T00:28:46.227

更简单的方法是在使用 volt 时在 var_dump 表达式上方设置“$this->view->disable()”。也许这也适用于其他模板引擎。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-12T22:43:51.303

为什么不使用好旧的

```
echo "<pre>" . print_r($custom,TRUE) . "</pre>"; 
```

打印出漂亮有序的数组。必须从控制器和视图中添加它。在 Controller 的情况下，输出放置在 Controller 的视图之上。

# mysql - MySQL 无法停止和验证

> ID：14535618
> 
> 赞同：0
> 
> 时间：2013-01-26T09:32:27.000
> 
> 标签：mysql

我试图为我做的第二个 Wordpress 博客设置新数据库

```
root@TheLove:/# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 108

mysql> CREATE DATABASE wp_name CHARACTER SET utf8 COLLATE utf8_general_ci;
Query OK, 1 row affected (0.00 sec)

mysql> GRANT ALL PRIVILEGES ON wp_name.* TO name@name.com IDENTIFIED BY 'password';
Query OK, 0 rows affected (0.00 sec)

mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)

mysql> 
mysql> quit
Bye 
```

之后，当我想停止/重新启动/身份验证时出现此错误

```
mysql -uroot
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

/etc/init.d/mysql stop
Stopping MySQL database server: mysqld failed!

mysqld --skip-grant-tables
130126  0:23:57 [Note] Plugin 'FEDERATED' is disabled.
130126  0:23:57  InnoDB: Initializing buffer pool, size = 8.0M
130126  0:23:57  InnoDB: Completed initialization of buffer pool
InnoDB: Unable to lock ./ibdata1, error: 11
InnoDB: Check that you do not already have another mysqld process
InnoDB: using the same InnoDB data or log files.
130126  0:23:57  InnoDB: Retrying to lock the first data file
InnoDB: Unable to lock ./ibdata1, error: 11
InnoDB: Check that you do not already have another mysqld process
InnoDB: using the same InnoDB data or log files. 
```

所以我做了

```
pkill mysql
/etc/init.d/mysql start

Starting MySQL database server: mysqld.
Checking for corrupt, not cleanly closed and upgrade needing tables..
root@TheLove:/# ERROR 1045 (28000): Access denied for user 'debian-sys-maint'@'localhost' (using password: YES) 
```

还尝试了位于 cat /etc/mysql/debian.cnf 的密码

```
Starting MySQL database server: mysqld.
Checking for corrupt, not cleanly closed and upgrade needing tables..
root@TheLove:/# ERROR 1045 (28000): Access denied for user 'debian-sys-maint'@'localhost' (using password: YES)
cat /etc/mysql/debian.cnf 
```

在阅读了很多教程后我无法弄清楚这一点也发现有些人以前遇到过这个问题并且他们无法解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:40:13.187

尝试再次关闭您的 MySQL（或干脆杀死它）。现在您可以使用跳过的授权表手动启动 mysqld。然后你可以重置你的密码

```
shell> mysqld --skip-grant-tables & 
shell> mysql 
mysql> SET PASSWORD FOR 'root'@'localhost' = PASSWORD('newpassw0rd'); 
mysql> flush privileges; 
```

在我看来，您最近使用`mysql.user`表中的不同凭据从 mysqldump 恢复或迁移了数据库。在您使用之前，这通常没有影响`flush privileges;`

# python - 从python中的每个元素中删除换行符

> ID：14535619
> 
> 赞同：2
> 
> 时间：2013-01-26T09:32:35.610
> 
> 标签：python, list, readlines

我打开一个文本文件，现在文本文件中的每个元素都由换行符分隔。当我使用`readlines()`它时，它会在列表中保留这个换行符，这是在每个元素之后，所以看起来像这样`[zebra\n, ant\n,]`我想知道是否有一个简单的函数或一段代码可以用来删除这个换行符的所有元素！

这是我到目前为止写的代码

```
filelist=file.readlines()
file.close()
return filelist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:36:24.433

尝试：

```
filelist = [line.rstrip('\n') for line in file] 
```

# java - 为什么我的代码中出现这些括号错误？

> ID：14535625
> 
> 赞同：-3
> 
> 时间：2013-01-26T09:32:54.167
> 
> 标签：java, eclipse, syntax, static-members, brackets

我真的不确定为什么要这样做，但这似乎是括号的问题。在 Eclipse 中为 Android 运行这段代码时出现以下错误：

```
private static final String TWITTER_ACCESS_TOKEN_URL = "http://api.twitter.com/oauth/access_token";
private static final String TWITTER_AUTHORZE_URL = "https://api.twitter.com/oauth/authorize";
private static final String TWITTER_REQUEST_URL = "https://api.twitter.com/oauth/request_token";

public static final String itemOfClothing;
public static final String clothingEmotion;
public static final String user;<<<<<<<<<<<<<<<<<<<<< Syntax error on token ";", { expected after this token

itemOfClothing = "pants";
clothingEmotion = "I'm feeling left in the dark";
user = "stuart";

public static String MESSAGE = itemOfClothing +": " + clothingEmotion + "! #" + user + "EmotionalClothing"; <<<<<<<<<<<<<<<<<<<<<< Syntax error, insert "}" to complete Block

public TwitterApp(Activity context, String consumerKey, String secretKey) {
    this.context = context; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:37:31.077

您应该仅在声明点或在构造函数中初始化字符串。您不能在顶级课程中发表声明。你可以在那里声明。

因此，一种解决方案是，更改以下语句：-

```
public static final String itemOfClothing;
public static final String clothingEmotion;
public static final String user;

/** You can't have below assignments directly under the top-level class **/
itemOfClothing = "pants";
clothingEmotion = "I'm feeling left in the dark";
user = "stuart"; 
```

到： -

```
public static final String itemOfClothing = "pants";
public static final String clothingEmotion = "I'm feeling left in the dark";
public static final String user = "stuart"; 
```

或者，另一种解决方案是，在构造函数中移动这些赋值，在这种情况下，您还必须在该构造函数中移动`initialization`of `MESSAGE`。

而且，如果这些变量应该是`constants`，我假设它们是`public static final`，那么你应该使用`ALL_CAPS_WITH_UNDERSCORE`它们来命名它们。

# javascript - iOS 中的 node.js 和 phantom.js？

> ID：14535629
> 
> 赞同：0
> 
> 时间：2013-01-26T09:34:01.990
> 
> 标签：javascript, objective-c, node.js, phantomjs

如何在 iOS 中获取此脚本编写的表中的项目：

```
<script type="text/javascript" src="//www.google.com/trends/embed.js?hl=en-US&cat=0-14&date=today+7-d&cmpt=q&content=1&cid=RISING_QUERIES_0_0&export=5&w=300&h=420"></script> 
```

`node.js`任何好的教程可能`phantom.js`适用于iOS？

# mysql - 过滤掉特定的ID

> ID：14535631
> 
> 赞同：0
> 
> 时间：2013-01-26T09:34:27.920
> 
> 标签：mysql

所以我有这张表，我只想看 AB。

```
ID     CODE       COUNT   
102    AB         9
101    AB         8
100    AC         23    //not important!!!!
99     AB         7
98     AB         6
97     AB         5
96     AB         0 
```

我希望这张桌子看起来像这样

```
ID    NEWID     CODE       COUNT   
102   102       AB         9
101   101       AB         8
99    100       AB         7
98    99        AB         6
97    98        AB         5
96    97        AB         0 
```

如何获得一个在代码为 AB 的地方连续计数的新 ID？

然后将其用于 SELECT 查询，初始表应保持不变，因此这不是更新表，而只是制作虚构的 NEWID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:00:28.647

您可以使用用户变量创建一个计数器来完成此操作（只需一个查询！）：

```
SELECT t.ID, @NEWID := COALESCE(@NEWID - 1, t.ID) AS NEWID, t.CODE, t.COUNT
FROM
    (SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
    (SELECT @NEWID := NULL) _uv; 
```

```
mysql> SELECT t.ID, @NEWID := COALESCE(@NEWID - 1, t.ID) AS NEWID, t.CODE, t.COUNT
    -> FROM
    ->     (SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY I
D DESC) t,                                                                        
    ->     (SELECT @NEWID := NULL) _uv;
+------+-------+------+-------+
| ID   | NEWID | CODE | COUNT |
+------+-------+------+-------+
|  102 |   102 | AB   |     9 |
|  101 |   101 | AB   |     8 |
|   99 |   100 | AB   |     7 |
|   98 |    99 | AB   |     6 |
|   97 |    98 | AB   |     5 |
|   96 |    97 | AB   |     0 |
+------+-------+------+-------+
6 rows in set (0.03 sec) 
```

* * *

**编辑：**这是一个[SQL Fiddle](http://sqlfiddle.com/#!2/e0b8b/1/0)。（多么酷的工具。我不知道这存在！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:48:50.310

尝试这个：

```
SELECT MIN(ID) - 1
FROM tab
WHERE CODE = 'AB'
INTO @i;

SELECT tab.ID, (@i := @i + 1) AS NEWID, tab.COUNT
FROM tab
WHERE tab.CODE = 'AB'
ORDER BY tab.ID; 
```

另见[http://sqlfiddle.com/#!2/2b52e2/1](http://sqlfiddle.com/#!2/2b52e2/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:47:36.257

你可以使用这个：

```
SELECT
   Id, @newid := @newid - 1 as NEWID, CODE, CNT
FROM Tbl,
(SELECT @newid := MAX(ID) + 1 FROM Tbl) A
WHERE CODE != 'AC'
ORDER BY NEWID DESC 
```

**[SQL 小提琴](http://sqlfiddle.com/#!2/c4b2c/7)**

# php - 与票价重叠的日期

> ID：14535632
> 
> 赞同：0
> 
> 时间：2013-01-26T09:34:33.543
> 
> 标签：php, mysql

我有这个查询：

```
SELECT  price.car_number1, car_from, car_to, car_fares
FROM    price, car
WHERE   car.car_number1 = price.car_number1 
```

输出如下所示：

```
car_number1    car_from     car_date      car_fare
------------------------------------------------------
BAL2018        2013-01-21   2013-01-26    $555         
BAL2018        2013-01-27   2013-01-28    $111
BAL2019        2013-01-26   2013-01-27    $211 
BAL2020        2013-01-26   2013-01-27    $545 
```

`2013-01-21`现在假设在从to的费率的 UI 结果中使用希望`2013-01-28`，我想以某种或其他方式打印每辆车在各自日期的价格，并且如果汽车没有分配票价，它应该显示为`N/A`。

请让我知道我是否可以在 mysql 或任何 PHP 中执行此操作

我想让它看起来像这样（如示例）

```
 01-21   01-22 01-23 01-24 01-25  01-26 01-27 01-28 
 BAL2018   $555    $555  $555  $555  $555   $555  $111  $111
 BAL2019   N/A     N/A   N/A   N/A   N/A    $211  $211  N/A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:13:06.447

In the example below `calendar` is a simple utility table holding all dates that could ever be required. Personally, I'd most likely handle the missing values and, certainly, the pivoting at the application level, for ease of scalability.

```
DROP TABLE IF EXISTS fares;

CREATE TABLE fares
( vehicle_id VARCHAR(12) NOT NULL 
, fare_start DATE NOT NULL
, fare_end DATE NULL
, fare DECIMAL(5,2) NOT NULL 
, PRIMARY KEY(vehicle_id,fare_start)
);

INSERT INTO fares VALUES 
('BAL2018','2013-01-21','2013-01-26',555.00),
('BAL2018','2013-01-27','2013-01-28',111.00),
('BAL2019','2013-01-26','2013-01-27',211.00), 
('BAL2020','2013-01-26','2013-01-27',545.00);

DROP TABLE IF EXISTS vehicles;

CREATE TABLE vehicles
(vehicle_id VARCHAR(12) NOT NULL PRIMARY KEY
,description VARCHAR(12) NOT NULL
);

INSERT INTO vehicles VALUES 
('BAL2018','vehicle01'),
('BAL2019','vehicle02'),
('BAL2020','vehicle03');

SELECT * FROM calendar WHERE dt BETWEEN '2013-01-20' AND '2013-01-28';
+------------+
| dt         |
+------------+
| 2013-01-20 |
| 2013-01-21 |
| 2013-01-22 |
| 2013-01-23 |
| 2013-01-24 |
| 2013-01-25 |
| 2013-01-26 |
| 2013-01-27 |
| 2013-01-28 |
+------------+

 SELECT c.dt,v.vehicle_id,f.fare_start,f.fare_end,f.fare FROM calendar c
   JOIN vehicles v
   LEFT
   JOIN fares f
     ON f.vehicle_id = v.vehicle_id
    AND c.dt BETWEEN f.fare_start AND f.fare_end
  WHERE c.dt BETWEEN '2013-01-20' AND '2013-01-28';
+------------+------------+------------+------------+--------+
| dt         | vehicle_id | fare_start | fare_end   | fare   |
+------------+------------+------------+------------+--------+
| 2013-01-20 | BAL2018    | NULL       | NULL       |   NULL |
| 2013-01-20 | BAL2019    | NULL       | NULL       |   NULL |
| 2013-01-20 | BAL2020    | NULL       | NULL       |   NULL |
| 2013-01-21 | BAL2018    | 2013-01-21 | 2013-01-26 | 555.00 |
| 2013-01-21 | BAL2019    | NULL       | NULL       |   NULL |
| 2013-01-21 | BAL2020    | NULL       | NULL       |   NULL |
| 2013-01-22 | BAL2018    | 2013-01-21 | 2013-01-26 | 555.00 |
| 2013-01-22 | BAL2019    | NULL       | NULL       |   NULL |
| 2013-01-22 | BAL2020    | NULL       | NULL       |   NULL |
| 2013-01-23 | BAL2018    | 2013-01-21 | 2013-01-26 | 555.00 |
| 2013-01-23 | BAL2019    | NULL       | NULL       |   NULL |
| 2013-01-23 | BAL2020    | NULL       | NULL       |   NULL |
| 2013-01-24 | BAL2018    | 2013-01-21 | 2013-01-26 | 555.00 |
| 2013-01-24 | BAL2019    | NULL       | NULL       |   NULL |
| 2013-01-24 | BAL2020    | NULL       | NULL       |   NULL |
| 2013-01-25 | BAL2018    | 2013-01-21 | 2013-01-26 | 555.00 |
| 2013-01-25 | BAL2019    | NULL       | NULL       |   NULL |
| 2013-01-25 | BAL2020    | NULL       | NULL       |   NULL |
| 2013-01-26 | BAL2018    | 2013-01-21 | 2013-01-26 | 555.00 |
| 2013-01-26 | BAL2019    | 2013-01-26 | 2013-01-27 | 211.00 |
| 2013-01-26 | BAL2020    | 2013-01-26 | 2013-01-27 | 545.00 |
| 2013-01-27 | BAL2018    | 2013-01-27 | 2013-01-28 | 111.00 |
| 2013-01-27 | BAL2019    | 2013-01-26 | 2013-01-27 | 211.00 |
| 2013-01-27 | BAL2020    | 2013-01-26 | 2013-01-27 | 545.00 |
| 2013-01-28 | BAL2018    | 2013-01-27 | 2013-01-28 | 111.00 |
| 2013-01-28 | BAL2019    | NULL       | NULL       |   NULL |
| 2013-01-28 | BAL2020    | NULL       | NULL       |   NULL |
+------------+------------+------------+------------+--------+ 
```

27 rows in set (0.00 sec)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:53:07.860

只是在没有实际数据的情况下猜测，但是像这样？

```
SELECT  car.car_number1, car.car_from, car.car_to, 
            ifnull(price.car_fares,'N/A') as car_fare
FROM    car left join price ON car.car_number1=price.car_number1
WHERE   car.car_from >= '2013-01-21' and car.car_to < '2013-01-28' 
```

我假设该`car_fares`字段在`price`表中，所有其他字段都在`car`表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:40:27.480

恕我直言，最好的折衷方案是在 MySQL 中选择日期范围，然后使用 PHP 提供任何缺失的信息。

请原谅我可能过于挑剔，但有一次我被以下所有问题所困扰，所以我将为一个看似简单的问题提供一个显然复杂的解决方案:-)

日期选择算法可能会出现一个问题，因为“第二天”并不是人们想象的那么明确的表达方式——当切换夏令时时，有些日子是 23 小时或 25 小时，有些日子有额外的一秒钟，以便 $ts += 86400 将您从 D:M:Y 00:00:00 带到 D:M:Y 23:59:59 而不是 D+1:M:Y 00:00:00。

[直到您在 7 月（或者是 6 月？）因为闰秒](http://en.wikipedia.org/wiki/Leap_second)而失去 15 个酒店房间预订之前，这似乎很挑剔。这不是我的代码，但我是必须进行清理的人。

另一个问题是，如果您有“1 月 1 日”的 CAR_FROM 和“12 月 31 日”的 CAR_TO，并且您想要 3 月 21 日至 28 日之间的价格，那么该行将是相关的，即使没有行指定 3 月的日期. 所以你需要注意重叠。

最后，您可能有一个从 1-1-2013 到 31-12-2013 的条目，然后您可能有一个从 2013 年 5 月 1 日到 2013 年 5 月 17 日的条目，并且您希望第二个条目优先于5 月 1 日至 17 日的范围。实际上，如果客户改变主意，您需要一种快速从一个优先系统选择到另一个系统的方法。

所以你可以这样做：

```
<?php

    $start = mktime(12, 0, 0, $month1, $day1, $year1);
    $stop  = mktime(12, 0, 0, $month2, $day2, $year2);

    $DATE_FORMAT = 'd-m-Y'; // This might be a define, actually

    // Use these dates in MySQL query. This takes care
// of most date problems.

    $SQL_From = date('Ymd000000', $start);
    $SQL_To   = date('Ymd235959', $stop);

    // We create a date array initialized with N/A, and use
    // a date format as a key
$empty = array();
    for ($ts = $start; $ts <= $stop; $ts += 86400)
    {
        $date = date($DATE_FORMAT, $ts);
        $empty[$date] = 'N/A';
    }

/*
To select dates overlapping [FROM-TO], consider that we do NOT want
a date when its TO is less than our FROM of interest:
    [from -- car -- to]   [FROM     TO]
and neither when its from is more than our TO of interest:
    [FROM     TO] [from -- car -- to]  
So we want all dates except those, and this means
    WHERE NOT ( car_to < SQL_From OR car_from > SQL_To)

But since NOT (A OR B) is logically equal to A AND B, we get this
not very intuitive, but very efficient query

    $query = ...
SELECT  price.car_number1, car_from, car_to, car_fares
FROM    price JOIN car ON car.car_number1 = price.car_number1
WHERE   car_from < $SQL_To AND car_to > $SQL_From
ORDER BY car_number1, car_from;

    The precedence is given by car_from: later dates win over earlier dates.
    But you might have a PRIORITY field that overrides all, so that PRIORITY=0
    means normal and PRIORITY 99 means "THESE are the prices, damn your eyes!";
    to achieve that, you can now simply "ORDER BY car_number1,priority,car_from."

*/

$cars = array();

// Now we retrieve all car data, with PDO or whatever

while($tuple = SQLFetchRow(...))
{
    // If this is a new car, we initialize its array to all N/A

    if (!isset($cars[$tuple['car_number1']))
        $prices = $empty;
    else
        $prices = $cars[$tuple['car_number1'];

    // Now we check our tuple and see what prices have changed
    // MySQL retrieves date in Y-M-D format

    list($y,$m,$d)  = explode('-', $tuple['car_from']);
    $from       = mktime(12, 0, 0, $m, $d, $y);
    list($y,$m,$d)  = explode('-', $tuple['car_to']);
    $to     = mktime(12, 0, 0, $m, $d, $y);

    // This will overwrite any existing data with fresher data
        for ($ts = $from; $ts <= $to; $ts += 86400)
        {
            $date = date($DATE_FORMAT, $ts);
            $prices[$date] = $tuple['car_fare'];
        }

    // Now we save the modified array into $cars.
    $cars[$tuple['car_number1'] = $prices;
}

// And finally we print the results into a variable,
    // so it will be easier to wrap this into a helper function.

$row = '<tr>';
$row .= '<th>-</th>';
foreach($empty as $date => $dummy)
    $row = '<th>'.$date.'</th>';
$row .= '</tr>';

$table  = '<table>' . $row;

foreach($cars as $plate => $prices)
{
    $row = '<tr><td>'.$plate.'</td>';
    foreach($prices as $dummy_date => $price)
        $row .= '<td>'.$price.'</td>';
    $row .= '</tr>';

    $table .= $row;
}
$table  .= '</table>';

print $table;
?> 
```

# java - “LinearLayout”中的白色边框和透明度

> ID：14535644
> 
> 赞同：19
> 
> 时间：2013-01-26T09:35:59.970
> 
> 标签：java, android, border, transparency, android-drawable

我想添加一个线性布局，具有透明背景和白色边框。问题是：据我用谷歌搜索，我只能实现两者之一。

这是我所做的：

1.  将以下内容另存为可绘制的border.xml

    ```
     <?xml version="1.0" encoding="utf-8"?>
      <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
      <item> 
           <shape android:shape="rectangle">
           <solid android:color="#FFFFFF" /> 
      </shape>
      </item>   
         <item android:left="5dp" android:right="5dp" android:top="5dp" android:bottom="5dp" >  
         <shape android:shape="rectangle"> 
         </shape>
       </item>    
      </layer-list> 
    ```

2.  我现有的页面布局

    ```
     <LinearLayout
            android:id="@+id/quiz"
            android:layout_width="150dp"
            android:layout_height="120dp"
            android:background="#66041414"          <-------- replaced it with android:background="@drawable/border"
            android:orientation="vertical"
            android:layout_marginLeft="5dp" >

             ......
           </LinearLayout> 
    ```

当包含边框时，我的背景变得不透明。

我希望最终结果如下：

![参考图像](../Images/4071060b7481a13fd48fd5ae0f0fe9e0.png)

完全坚持下去。只是想找到一种方法来实现它。任何建议都会很有帮助。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-26T09:53:51.343

**布局背景的可绘制对象：**

如果需要，您可以更改角形状的半径。但是中风会创建一个边框，而实心部分是我们正在制作的透明背景。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <corners
      android:radius="2dp"
      android:topRightRadius="0dp"
      android:bottomRightRadius="0dp"
      android:bottomLeftRadius="0dp" />
  <stroke
      android:width="1dp"
      android:color="@android:color/white" />
  <solid android:color="@android:color/transparent"/>
</shape> 
```

**和我的测试 layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:id="@+id/ll2"
        android:layout_height="50dp"
        android:layout_width="50dp"
        android:background="@drawable/my_transparent_linear_layout"></LinearLayout>
</LinearLayout> 
```

**它有效，以下是证明：**

![在此处输入图像描述](../Images/475d70b3be262ee3e7483623cfe3e54e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T09:43:55.710

用于背景的 XML 可绘制对象：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<corners android:radius="30dp" />
<stroke android:width="5dp" android:color="#ffffffff"/>
<solid android:color="#66000000"/>
</shape> 
```

随意调整半径、宽度和深色透明度（#ff 和#66 部分）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T09:44:37.297

为此，您可以使用两个布局`aligned`，一个在另一个之上，然后`transparent`为设置背景`top view`并将白色边框设置为`bottom view`. 你可以在里面做这件事`relative layouts`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-26T09:57:40.823

@Ali Imran 确实提出了很好的建议，请查看以下方式，希望对您有所帮助。

*返回.xml*

```
<?xml version="1.0" encoding="UTF-8"?> 
    <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle"> 
         <stroke android:width="1dp" android:color="#dd7b7a"/>
         <corners android:bottomRightRadius="10dp" android:bottomLeftRadius="10dp" 
         android:topLeftRadius="10dp" android:topRightRadius="10dp"/> 
         <solid android:color="#dd7b7a"/>
     </shape> 
```

*主要的.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    >
<LinearLayout 
     android:padding="4dip"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/back"
    android:gravity="center_horizontal"
    >
<LinearLayout  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
   android:background="@drawable/tile_mode" // your transparent image
    />
</LinearLayout>  
</LinearLayout> 
```

也可以通过下面的链接，使用方式`xml`适合你。

[带笔画的圆角位图图像](https://stackoverflow.com/questions/14473113/bitmap-image-with-rounded-corners-with-stroke/14473235#14473235)

# eclipse - 在文件的 Eclipse 选项卡中显示包含文件夹的名称

> ID：14535649
> 
> 赞同：6
> 
> 时间：2013-01-26T09:36:09.413
> 
> 标签：eclipse, tabs, editing

我在 N 个文件夹中有相同的文件集，其中一个，比如**blank.xhtml**。这些文件包含一些相似的信息，每次我在选项卡之间切换时，都很难弄清楚哪个文件来自哪个文件夹。当我打开其中一个进行编辑并碰巧从另一个文件夹中打开同名文件时，我会感到困惑，而且经常会编辑错误的文件：使我的辛勤工作付诸东流。所以我想知道是否有办法在选项卡中显示包含文件夹的名称，例如**G-06/blank.xhtml**或**G-07/blank.xhtml**。我将非常感谢任何能指出我如何做到这一点的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T23:11:51.213

作为对*Maroun*答案的补充，还有一个替代解决方案。
**这不是您想要**的（选项卡标题中的全名），但有时可能很有用。

在“Project Explore”视图（“Navigator”视图也是如此）单击“ **Link with Editor** ”按钮。这样，每当您选择在编辑器中打开的某个文件时，它将在“项目资源管理器”视图中自动选择/突出显示（见图）。

这是图片： ![在此处输入图像描述](../Images/52b4c74ff507277a66a4a7d80627136e.png)

也许这对你也有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-30T10:08:14.387

如果将鼠标悬停在包含文件名的选项卡上，则会出现一个显示完整路径的弹出窗口。不完全是您想要的，但它应该有所帮助。（这与 Mac 上的 Eclipse Neon.3 Release 4.6.3 一起使用）。

# python - 我将如何找到具有静态角元素的 4x4 矩阵的所有可能排列？

> ID：14535650
> 
> 赞同：0
> 
> 时间：2013-01-26T09:36:08.900
> 
> 标签：python, math, matrix, permutation, itertools

到目前为止，我一直在使用 python 来生成矩阵排列来寻找幻方。所以到目前为止我一直在做的（对于 3x3 矩阵）是我使用 itertools.permutations 找到集合 {1,2,3,4,5,6,7,8,9} 的所有可能排列，存储它们作为一个列表，做我的计算并打印我的结果。

现在我想找出 4 阶的幻方。因为找到所有排列意味着 16！可能性，我想通过在角落放置可能的元素来提高效率，例如 1, 16 在对角线的一个角上，4, 13 在对角线的两个角上。

那么我如何找到某些元素未移动的集合 {1,2....16} 的排列是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:47:03.417

只需将放置的数字从排列集中拉出来。然后将它们插入到生成的排列中的适当位置。

对于您的示例，您将取出 1、16、4、13。在（2、3、5、6、7、8、9、10、11、12、14、15）上排列，对于每个排列，插入 1 , 16, 4, 13 您已预先选择放置它们的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:41:33.680

```
#Rajiv Ravishankar
#rravisha
#21-301 Assignment #1, Qns 4

from numpy import matrix
import itertools

def eligCheck(m):
    #We know certain properties of magic squares that can help identify if a 3x3 matrix is a magic square or not
    #These properties include the following checks listed below.
    #
    #
    #The main purpose of this function is to check is a 3x3 matrix is a magic square without having to add all the 
    #rows, columns and diagonals.
    flag=0
    #Check 1 if the matrix is indeed 4x4
    if (len(m)==4 and len(m[0])==4 and len(m[1])==4 and len(m[2])==4):
        flag=flag+1
    #Check 2 if the 2nd diagonal adds up
    if (m[0][3] + m[1][2] + m[2][1] + m[3][0] == 34):
        flag=flag+1
    #Checks 2 if the first diagonal adds up 
    if (m[0][0] + m[1][1] + m[2][2] + m[3][3] == 34):
        flag=flag+1
    #To save resources and increase efficency, only if all three checks return true will we add the rows and columns to check.      
    if (flag==3):
        return True
    else:
        return False

def elementAdder(m):
    #This function is to be called only AFTER eligCheck() returns TRUE for a given matrix.  Since a 4x4 matrix that satisfies the checks 
    #in eligCheck() does not mean that it is a magic square, we add each row, each column and both diagonals an see if the sum
    #is equal to 15\.  Splitting into two function save processing power.
    #
    #
    #Checking if all rows add up to 15
    flag=0
    #Check 1 if row 1 adds up
    if (m[0][0]+m[0][1]+m[0][2]+m[0][3] == 34):
        flag=flag+1
    else:
        return False
    #Check 2 if row 2 adds up   
    if (m[1][0]+m[1][1]+m[1][2]+m[1][3] == 34):
        flag=flag+1
    else:
        return False    
    #Check 3 if row 3 adds up
    if (m[2][0]+m[2][1]+m[2][2]+m[2][3] == 34):
        flag=flag+1
    else:
        return False
    #Check if row 4 adds up
    if (m[3][0]+m[3][1]+m[3][2]+m[3][3] == 34):
        flag=flag+1
    else:
        return False    
    #Check 4 if column 1 adds up    
    if (m[0][0]+m[1][0]+m[2][0]+m[3][0] == 34):
        flag=flag+1
    else:
        return False
    #Check 5 if column 2 adds up    
    if (m[0][1]+m[1][1]+m[2][1]+m[3][1] == 34):
        flag=flag+1
    else:
        return False
    #Check 6 if column 3 adds up
    if (m[0][2]+m[1][2]+m[2][2]+m[3][2] == 34):
        flag=flag+1
    else:
        return False
    #Check 7 if column 4 adds up    
    if (m[0][3]+m[1][3]+m[2][3]+m[3][3] == 34):
        flag=flag+1
    else:
        return False
    #Note that diagonal checks have already been verified in eligCheck() represents the diagonal from left to right

    #The strategy here is to set flag as zero initially before the additiong checks and then run each check one after the other.  If a
    #check fails, the matrix is not a magic square.  For every check that passes, flag is incremented by 1\.  Therefore, at the end of 
    #all the check, if flag == 8, it is added proof that the matrix is a magic square.  This step is redundant as the program has been 
    #written to stop checks as soon as a failed check is encountered as all checks need to be true for a magic square.
    if flag==8:
        print m
        return True
    else:
        print "**** FLAG ERROR: elementAdder(): Line 84 ***" 
        print m

def dimensionScaler(n, lst):
    #This function converts and returns a 1-D list to a 2-D list based on the order.  #Square matrixes only.
    #n is the order here and lst is a 1-D list.
    i=0
    j=0
    x=0
    #mat = [[]*n for x in xrange(n)]
    mat=[]
    for i in range (0,n):
        mat.append([])
        for j in range (0,n):
            if (j*n+i<len(lst)):
                mat[i].append(lst[i*n+j])
    return mat

#mtrx=[]

def matrixGen():
#Brute forcing all possible 4x4 matrices according to the previous method will require 16!*32*16 bits or 1.07e6 GB of memory to be allocated in the RAM (impossible today)./, we 
#use an alternative methos to solve this problem.
#
#
#We know that for the sums of the diagonals will be 34 in magic squares of order 4, so we can make some assumtions of the corner element values 
#and also the middle 4 elements.  That is, the values of the diagonals.
#The strategy here is to assign one set of opposite corner elements as say 1 and 16 and the second as 13 and 4
#The remaining elements can be brute forced for combinations untill 5 magic squares are found.
    setPerms=itertools.permutations([2,3,5,6,7,8,9,10,11,12,14,15],12)
    final=[0]*16
    count=0
    #print final
    for i in setPerms:
        perm=list(i)
        setCorners=list(itertools.permutations([1,4,13,16],4))

        for j in range(0,len(setCorners)):
            final[0]=setCorners[j][0]
            final[1]=perm[0]
            final[2]=perm[1]
            final[3]=setCorners[j][1]
            final[4]=perm[2]
            final[5]=perm[3]
            final[6]=perm[4]
            final[7]=perm[5]
            final[8]=perm[6]
            final[9]=perm[7]
            final[10]=perm[8]
            final[11]=perm[9]
            final[12]=setCorners[j][2]
            final[13]=perm[10]
            final[14]=perm[11]
            final[15]=setCorners[j][3]
            if eligCheck(dimensionScaler(4,final))==True:
                elementAdder(dimensionScaler(4,final))

matrixGen() 
```

# php - ModRewrite 在网站管理员工具中导致重复标题错误

> ID：14535653
> 
> 赞同：0
> 
> 时间：2013-01-26T09:36:42.457
> 
> 标签：php, .htaccess

我使用重写规则将 server.php 重定向到对 seo 更友好的链接。然而，网站管理员工具报告说我有数百个重复的标题错误。看起来谷歌正在索引 server.php 和 seo 友好的版本。知道如何解决这个问题吗？

```
rewritecond %{http_host} ^minecraftserverfinder.com [nc]
rewriterule ^(.*)$ http://www.minecraftserverfinder.com/$1 [r=301,L]
RewriteRule ^([0-9]+)(.*)$ server.php?s=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:46:52.830

最快/最简单的方法是存储页面应该具有的 URL，`/article/58-cute-cat-pictures`然后在页面加载后检查它[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)，然后使用[`header()`](http://php.net/manual/en/function.header.php)to send [`301`](http://en.wikipedia.org/wiki/HTTP_301)。

```
if( $url != $_SERVER['REQUEST_URI']){
    $url = build_absolute_url( $url); // For location header
    header('HTTP/1.1 301 Moved Permanently');
    header("Location: $url");
    exit();
} 
```

这种方式应该很好地处理 URL。

# objective-c - 从 c 函数访问目标 c 变量

> ID：14535660
> 
> 赞同：3
> 
> 时间：2013-01-26T09:37:40.643
> 
> 标签：objective-c

我有一个目标 c 类，它有一个`NSString`具有如下属性的对象：

```
@property (nonatomic,retain) NSString *data; 
```

现在，从 ac 函数，我想做 : `data=@"abc";`，但 c 函数看不到`data`。

我将如何从同一个类中的纯 c 函数访问数据？我尝试在 c 函数中创建该类的对象，但它崩溃了。

编辑 ：

我也尝试使用参数调用 obj c 函数，我可以调用该函数但没有参数：（在 C 函数中）

```
 NSString *ran=@"";
    [refToSelf postNotification:ran]; 
```

不通过就这样做`ran`是有效的。我怎么通过`ran` ？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T18:55:00.880

如果您在 Objective-C 文件中有 C 函数，那么要求很简单；你需要一个你想弄乱的对象的引用。

```
void func(MyClass* anObj) {
    [anObj setData: @"foo"];
    anObj.data = @"foo"; // same as the line above
}

@interface MyClass:NSObject
@property(nonatomic,copy) NSString *data;
@implementation MyClass
- (void) callCFunc
{
     func(self);
     // the "data" property will now be set to @"foo"
}
@end 
```

不多也不少。在 C 函数中调用方法与从方法中调用其他实例或类的方法完全没有什么不同。实际上，方法只不过是带有默认值`self`和`_cmd`参数的 C 函数。

目前尚不清楚您对编辑的要求。如果你“不能通过`ran`”，那么这意味着你正在调用一个没有参数的方法：

```
- (void)postNotification; 
```

如果你想通过`ran`，那么你需要一个可以使用参数的方法：

```
- (void)postNotification:(NSString*)data; 
```

# c# - 在 Lambda 表达式的 for 循环中获取当前索引

> ID：14535665
> 
> 赞同：2
> 
> 时间：2013-01-26T09:38:11.100
> 
> 标签：c#, razor, lambda

> **可能重复：**
> [在表达式树中获取方法参数的值](https://stackoverflow.com/questions/5181269/getting-the-values-of-method-parameters-inside-expression-trees)

给定以下代码：

```
@for (int i = 0; i < Model.FormerAddresses.Count; i++)
{
    <li>@Html.Editable(m => m.FormerAddresses[i].Street)</li>
} 
```

如何在“可编辑”扩展中获取“i”的值？我知道我可以通过执行以下操作来获取此表达式的值：

```
var value = ((LambdaExpression)expression).Compile().DynamicInvoke(MyViewModel); 
```

但是我如何获得'i'的值？这应该是可能的，因为编译表达式会返回正确的结果，但我找不到方法来找出它是如何完成的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T15:36:38.910

找到了！感谢 StackOverflow。我猜是使用了错误的搜索词。

答案链接： [在表达式树中获取方法参数的值](https://stackoverflow.com/questions/5181269/getting-the-values-of-method-parameters-inside-expression-trees)

# c# - 部署alchemy websocket服务器c#

> ID：14535676
> 
> 赞同：2
> 
> 时间：2013-01-26T09:40:07.203
> 
> 标签：c#, asp.net, websocket

我对如何部署[炼金术 Web 套接字服务器](http://alchemywebsockets.net/)有疑问。服务器是 C# 控制台应用程序，它也有安装 exe 文件。

在他们的网站上写道： *“您可以将 Alchemy Websockets 作为控制台应用程序、Windows 服务、Mono 下的 Linux 守护程序或任何最适合您的配置运行。”*

如何部署？

我有 asp.NET MVC 应用程序使用此服务器聊天，但我不知道如何将我的站点与单独的项目（服务器作为控制台应用程序）部署到托管服务提供商。

感谢您的帮助！

# c# - java中的Xml序列化器

> ID：14535678
> 
> 赞同：0
> 
> 时间：2013-01-26T09:40:22.890
> 
> 标签：c#, java

> **可能重复：**
> [.NET 的 XmlSerializer 的 Java 替代品是什么](https://stackoverflow.com/questions/6107627/what-is-java-alternative-for-nets-xmlserializer)

该类在 c# 中到底做了什么`XmlSerializer`，我如何在 java 中使用相同的功能？

以下只是c#中的一部分代码（java中可以有这个方法吗？）

```
public static List<PinglishString> LoadPinglishStrings(string filePath)
{
    var serializer = new XmlSerializer(typeof(List<ListOfString>));
    TextReader stream = null;
    try
    {
        stream = new StreamReader(File.Open(filePath, FileMode.Open, FileAccess.Read), Encoding.UTF8);
        List<ListOfString> list = serializer.Deserialize(stream) as List<ListOfString> ?? new List<ListOfString>();
        return list;
    }
    finally
    {
        if (stream != null)
            stream.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:48:50.377

使用[Java 架构进行 XML 绑定 (JAXB)](http://jaxb.java.net/tutorial/)

例子：

```
 // create JAXB context and instantiate marshaller
    JAXBContext context = JAXBContext.newInstance(SomeClass.class);
    Marshaller m = context.createMarshaller();
    m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

    // Write to System.out
    m.marshal(instanceOfSomeClass, System.out); 
```

Marshaller --> XMLSerializer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:54:15.897

[XmlSerializers](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)将对象序列化和反序列化到 XML 文档中和从 XML 文档中提取。这使您能够控制如何将对象编码为 XML。

对于 Java 发现了这个[xerces-J-API](http://xerces.apache.org/xerces-j/apiDocs/org/apache/xml/serialize/XMLSerializer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:43:34.437

XmlSerializer：在 XML 文件中保存对象列表。XmlDeSerializer - 做相反的事情

我正在使用这个库：[xstream](http://xstream.codehaus.org/)

# jquery - jQuery检测图像大小

> ID：14535680
> 
> 赞同：0
> 
> 时间：2013-01-26T09:40:51.417
> 
> 标签：jquery, image, image-size

使用以下函数，我可以将 img 宽度应用于其周围的 div：

```
$(document).ready(function(){

  $('.imagecontainer').each(function() {
    $(this).width( $(this).find('img').attr('width') );
  });

}); 
```

问题是这仅在 img 具有 width 属性时才有效。即使 img 标签没有 width 属性，如何将 img 宽度添加到周围的 .imagecontainer div 中？我可以使用 load() 函数显示图像宽度，但没有胶水如何将其应用于 div 宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:42:08.127

采用

```
$(this).find('img').width() 
```

这会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:47:40.450

using`attr`给出属性值，如果未定义，它将不起作用。您可以使用

```
 $(this).width = $(this).find('img').width; 
```

# objective-c - 从可可应用修改浏览器插件列表

> ID：14535682
> 
> 赞同：0
> 
> 时间：2013-01-26T09:41:00.293
> 
> 标签：objective-c, macos, cocoa, browser-plugin

我正在尝试从 OS X 上的 Cocoa 应用程序列出和修改浏览器的[navigator.plugins](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.plugins)。我没有找到列出安装在 OS X 上的插件列表的方法。在 Windows 上，我可以检查注册表并修改它。
非常感谢任何线索，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:00:33.637

OS X 上的 Web 浏览器枚举磁盘上多个位置的 Internet 插件。浏览器之间共享的插件位于`/Library/Internet Plug-Ins`和`~/Library/Internet Plug-Ins`中，而特定于应用程序的 Internet 插件通常位于 中`[[NSBundle mainBundle] builtInPlugInsPath]`。修改浏览器看到的 Internet 插件列表的唯一方法是将插件包移出包含搜索路径的目录。

# java - 编译错误：- 缺少包

> ID：14535683
> 
> 赞同：1
> 
> 时间：2013-01-26T09:41:08.963
> 
> 标签：java, maven, web-applications, servlets, maven-2

`maven`这几天我在学习。在制作 Web 应用程序期间，它显示错误。

当我在源位置添加 servlet 并将这些更改添加到`web.xml`. 它显示`package missing errors`.

我在代码中的导入是：-

1.  导入java.io.*；
2.  导入 javax.servlet.*；
3.  导入 javax.servlet.http.*；

当我`mvn compile`在`command prompt`. `windows`它显示错误。

错误如下：-

1.  包 javax.servlet 不存在。
2.  包 javax.servlet.http 不存在。
3.  与上述两个相关的一些错误。

帮助我。寻找您的友好回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:49:23.880

您可能只需将依赖项添加到您的 web.xml。

也许在这里检查：http: [//mvnrepository.com/artifact/javax.servlet/servlet-api](http://mvnrepository.com/artifact/javax.servlet/servlet-api)

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:50:13.643

我不确定您是如何首先创建 Web 应用程序的。您可以使用 Maven 为您创建一个示例 webApp，只需一个简单的命令。您可以使用最新的 Maven 版本（我使用 Maven 3.04）来使用以下命令

```
 mvn archetype:generate 
```

然后它列出了提供的模板，并要求您选择一个数字。

然后选择 436，它是 Java 版本 5 的 Java EE webapp 模板（您可以选择您喜欢的任何版本）

```
Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): 247: 436
Choose org.codehaus.mojo.archetypes:webapp-jee5 version: 
1: 1.0
2: 1.0.1
3: 1.1
4: 1.2
5: 1.3
Choose a number: 5: 5 
```

然后给出以下所需参数

```
Define value for property 'groupId': : Priya.MyWebTutorial.org
Define value for property 'artifactId': : MyLearnersApp
Define value for property 'version':  1.0-SNAPSHOT: : 
Define value for property 'package':  Priya.MyWebTutorial.org: : 
Confirm properties configuration:
groupId: Priya.MyWebTutorial.org
artifactId: MyLearnersApp
version: 1.0-SNAPSHOT
package: Priya.MyWebTutorial.org
 Y: : 
```

您将在同一文件夹中创建一个 webapp 模板，可以使用。您将在生成的 pom.xml 中添加了依赖项，如下所示

```
 <dependencies>
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>servlet-api</artifactId>
  <version>2.5</version>
  <scope>provided</scope>
</dependency>
<dependency>
  <groupId>javax.servlet.jsp</groupId>
  <artifactId>jsp-api</artifactId>
  <version>2.1</version>
  <scope>provided</scope>
</dependency> 
```

当您编译此 Web 应用程序时，您的应用程序所需的 servlet 和 jsp jar 会由 Maven 自动下载到您的本地存储库中。

# algorithm - 决策变量的数量与目标空间维度？

> ID：14535690
> 
> 赞同：1
> 
> 时间：2013-01-26T09:41:33.277
> 
> 标签：algorithm, optimization, evolutionary-algorithm

这两个有区别吗？

在优化问题（尤其是进化优化）的背景下，我遇到了术语**决策变量**，正如它的定义和实践所表明的那样，这些是我们想要找到最佳值以找到最佳目标函数值的变量。

令我困惑的是，有时**决策变量的数量**和问题的**维度**是分开处理的。他们不一样吗？例如，如果我有一个`f(x1,x2)`想要优化的 2D 函数，不是`x1`决策`x2`变量吗？所以，这两个数字都是 2，不是吗？

这两者有什么不同的问题吗？约束优化问题有什么不同吗？

或者，如果它们始终相同，为什么术语不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:23:59.697

根据维基百科，[数学优化](http://en.wikipedia.org/wiki/Mathematical_optimization)问题可以表示为：

*   给定一个函数 f: A -> R，从集合 A 到实数 R
*   寻求一个值 x0，这样对于 A 中的所有 x，f(x0) 都小于 f(x) 以实现最小化。

函数 f 接受参数 x0，这是决策变量。所以空间A，问题空间是一维的。问题的维数和决策变量的个数是同一个概念。如果 f 需要两个参数 f(x0, x1)，则将有两个决策变量。

目标空间的维数是函数 f 返回的变量个数。在我们的例子中，f 将一组解 A 映射到实数 R。因此，目标空间的维数为 1。

我们可以定义一个多目标优化问题，其中函数 f 返回一个向量，或者我们尝试一次优化多个函数 f_k。然后问题将被定义为：

*   给定一组函数 (f1, f2, ..., fk)：A -> R^k，从集合 A 到实数 R^k
*   寻求一个值 x0，例如 (f1(x0), f2(x0), ..., fk(x0)) 支配所有 x 的每个 (f1(x), f2(x), ..., fk(x))在 A 中进行最小化。

The problem dimension is 1 and the objective space has k dimensions. The objectives can be combined to a single objective using a weighted sum or can be optimized using a concept of multi-criteria dominance such as the [Pareto dominance](http://en.wikipedia.org/wiki/Pareto_dominance).

# configuration - 在gwan服务器中设置多个IP地址指向单个域名

> ID：14535693
> 
> 赞同：0
> 
> 时间：2013-01-26T09:42:01.923
> 
> 标签：configuration, listener, g-wan, virtual-hosts

谁能解释如何在 gwan 服务器中将多个 Internet IP 点设置为单个域？
如何在 gwan 服务器中设置监听器和虚拟主机？
例如，abc.com 由
123.456.345.34 和 345.567.789.56 和 123.123.123.112 和 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:01:50.403

如果您阅读[http://gwan.ch/faq#listener](http://gwan.ch/faq#listener)，您可以看到答案。如果要在 gwan 服务器实例上使用，只需使用 /gwan/0.0.0.0_80/$abc.com 0.0.0.0 将在端口 80 上侦听系统上设置的所有 IP 地址。这是最简单、最灵活的解决方案。

但是为什么同一个域有 3 个 ip 地址呢？通常，当您有三个不同的服务器以循环方式应答或其他高可用性配置时使用此选项...

而且您知道 IP 地址以 255 结尾；）

# javascript - 在 HTML5 Canvas 上使用字体样式

> ID：14535700
> 
> 赞同：1
> 
> 时间：2013-01-26T09:42:35.067
> 
> 标签：javascript, html, canvas, fonts, kineticjs

我正在尝试使用动态 JS 库在画布上添加文本。Kinetic JS 提供了`setFontStyle()`支持字体​​样式的方法。

[http://kineticjs.com/docs/symbols/Kinetic.Text.php#setFontStyle](http://kineticjs.com/docs/symbols/Kinetic.Text.php#setFontStyle)

根据文档它支持“正常”、“斜体”或“粗体”。但是，如果我想同时应用粗体和斜体，我该怎么办。我还想在文本下划线。我如何在动力学 JS 中做事。

没有人告诉我吗:'(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:29:21.420

就像已经提到的 EliteOctagon 一样，KineticJS 还不支持下划线文本。这主要是由于 html canvas 元素不支持文本修饰（包括下划线）。

添加（多种）字体样式，相对容易。最推荐的方法是在开始时定义它，如下所示：

```
var text = new Kinetic.Text({
    x: 0,
    y: 0,
    fontSize: 20,
    fontStyle: 'bold italic'
    fill: 'black',
}); 
```

如果您需要在其他时间设置不同的字体样式而不是启动，您可以使用`setFontStyle()`您提到的方法。例如像这样：

```
var text = new Kinetic.Text();
text.setFontStyle('bold italic'); 
```

# ruby - 在 ListStore 的每一行中放置一个 GTK::Button

> ID：14535710
> 
> 赞同：0
> 
> 时间：2013-01-26T09:45:16.320
> 
> 标签：ruby, gtk, gtk2

嗨，我已经构建了一个工具，该工具显示数据库的内容工作正常，但用户必须在单击行中的按钮时删除行。

这就是我现在用来设置 ListStore

```
def setup_tree_view(treeview)
 renderer = Gtk::CellRendererText.new
 renderer.foreground = "#ff0000"
 column   = Gtk::TreeViewColumn.new("Bestellnummer", renderer, :text => ID)
 treeview.append_column(column)
 renderer = Gtk::CellRendererText.new
 column   = Gtk::TreeViewColumn.new("Produkt", renderer,  :text => PRODUCT)
 treeview.append_column(column)
 renderer = Gtk::CellRendererText.new
 column   = Gtk::TreeViewColumn.new("Kunde", renderer, :text => CUSTOMER)
 treeview.append_column(column)
 renderer = Gtk::CellRendererText.new
 renderer = Gtk::CellRendererText.new
 column   = Gtk::TreeViewColumn.new("Kontakt", renderer, :text => CONTACT)
 treeview.append_column(column)
 renderer = Gtk::CellRendererToggle.new
 renderer.set_activatable true
 renderer.signal_connect('toggled') do |renderer, path|
   @handler.updateData ((@store.get_iter path).get_value ID), "ordered", toInt( (!((@store.get_iter path).get_value ORDERED)))
   @store.clear
   showData @handler.start
 end

 column   = Gtk::TreeViewColumn.new("Bestellt", renderer, :active => ORDERED)
 treeview.append_column(column)
 renderer = Gtk::CellRendererToggle.new
 renderer.signal_connect('toggled') do |renderer, path|
   @handler.updateData ((@store.get_iter path).get_value ID), "arrived", toInt( (!((@store.get_iter path).get_value ARRIVED)))
   @store.clear
   showData @handler.start
 end
 column   = Gtk::TreeViewColumn.new("Angekommen", renderer, :active => ARRIVED)
 treeview.append_column(column)
 renderer = Gtk::CellRendererToggle.new
 renderer.signal_connect('toggled') do |renderer, path|
   @handler.updateData ((@store.get_iter path).get_value ID), "informed", toInt( (!((@store.get_iter path).get_value ORDERED)))
   @store.clear
   showData @handler.start
 end
 column   = Gtk::TreeViewColumn.new("Informiert", renderer, :active => INFORMED)
 treeview.append_column(column)
end 
```

现在我想添加一个新列，其中是打开删除对话框的按钮，但我找不到允许我将按钮放入其中的单元格渲染器。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:25:59.020

你是对的，没有像 GtkButton 那样工作的单元格渲染器，所以唯一的方法是编写你自己的单元格渲染器对象。

[这](http://scentric.net/tutorial/sec-custom-cell-renderers.html)是编写自己的渲染器的指南，虽然它是为 C 编写的，但原理是相同的。

# c# - 使用多数据库或单数据库哪个更好？

> ID：14535711
> 
> 赞同：0
> 
> 时间：2013-01-26T09:45:23.327
> 
> 标签：c#, database, sqlite

我有一个`sqlite`数据库，`73 MB`当我从硬盘运行我的应用程序时，它的第一个查询很快，但是当我运行我的应用程序表单 DVD 时，第一个查询需要大约 30 秒才能运行。

所以我想问一下当我的应用程序从 DVD 运行时到底发生了什么？

我可以通过将数据库吐出到一些小部分来提高数据库的第一次查询速度吗？

这是我的查询：

```
var SQlQuery = string.Format("SELECT ContentText FROM TblBookContent " +
                  "WHERE (BookID = {0}) AND (BookContentIndex={1}) Limit 1", bookid, BookContentIndex);
            string ConString = string.Format("Data Source={0}{1}.s3db;Version = 3;",
                CFAddress.ADatabase, DBName.BooksDB);

            using (SQLiteConnection connection = new SQLiteConnection(ConString))
            {
                connection.Open();
                using (SQLiteCommand command = new SQLiteCommand(SQlQuery, connection))
                {
                    using (SQLiteDataReader reader = command.ExecuteReader())
                    {
                        while (reader.Read())
                        {
                            CHtmlDesign.HtmlFile = reader["ContentText"].ToString();
                        }
                    }
                }
                connection.Close();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:18:41.397

我想这更多地与 DVD 驱动器上的寻道时间有关。与硬盘相比，CD 和 DVD 的寻道时间相当慢（HDD 转速为 5000+ RPM，数据库服务器通常配备转速超过 11000RPM 的 HDD），而 CD 和 DVD 的转速要慢得多且速度可变（可能约为 250 CD 为 500 RPM，DVD 为 600 至 1300 RPM）

这些 RPM 部分决定了寻道时间，因为如果您需要磁盘另一部分上的数据，则必须加快或减慢到正确的旋转速度，并等待要返回读磁头的磁盘部分。而且，如果您没有及时将读取头移动到磁盘的一部分，则必须等待另一次旋转。

CD 和 DVD 非常擅长线性访问（例如音频或视频录制），但随机访问却很糟糕，因为查找所需信息需要时间。

# jquery - jQuery 拖放可重排的内容

> ID：14535714
> 
> 赞同：2
> 
> 时间：2013-01-26T09:45:40.483
> 
> 标签：jquery, html, css, jquery-ui, drag-and-drop

我目前正在设计一个内联文本编辑器。用户将能够将图像拖放到他们想要的任何地方的编辑器中。

编辑器完全`iFrame`基于，在样式和格式化方面严重依赖嵌套`div`的 s。现在，如果我用户将图像拖到内容的中间并将其拖放到那里，我希望将拖放区上方的内容打包成一个`div`，将图像放在它下方，将拖放区下方的内容打包成另一个`div`并放置在图像下方。

但我不知道如何`div`根据坐标将 a 分成两部分（可以从 jQuery 放置处理程序中获得）。谁能给我一个关于如何做的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T23:32:54.250

我想我明白了你想要做什么的要点，我制作了一个简短的脚本来展示一种可能性。我将文本拆分为每个字符一个 div，并使这些 div 可排序，以便我可以将图像拖放到文本中间

HTML

```
<span class="sortable">
       <img id="image" src="https://si0.twimg.com/profile_images/1842775519/profile_normal.png" />
        <input type="text" size="1" id="tb"/>
</span> 
```

Javascript

```
$(function () {
    $(".sortable").sortable();  //Makes panel sortable (needs jquery and jquery UI)
    $("#tb").keyup(function () { //binds keyup event on the input box
        $('<div>' + $(this).val() + '</div>').insertBefore(this);  //adds the input box value to a new div and inserts it into the DOM before the input box itself
        $(this).val(''); // empties the input
    });
}); 
```

CSS

```
* {
    float:left
}
.sortable {
    border: solid 1px black;
    width:200px;
    float:left
} 
```

在这里看到一个工作小提琴 [http://jsfiddle.net/urbanbjorkman/cFfS9/1/](http://jsfiddle.net/urbanbjorkman/cFfS9/1/)

这可能是一个有点疯狂的解决方案大块文本。而且它仍然需要做很多工作（显然因为这只是几行 javascript）

但是将文本保留在一个 div 中并不是不可想象的。然后在 sortstart 事件中将其拆分为单独的元素。在 sortstop 事件中，将所有连接的文本重新连接在一起，并将图像留在原处。从而为您提供您所要求的内容，其中一个 div 一分为二，中间有图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:53:23.283

你的问题让我有点困惑。但是你有没有研究过 jQuery UI api 中的可拖动和可排序。

[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

[http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)

它们非常适合启用自分类容器。鉴于它们适用于 div，您应该能够让它们为此工作。（给定一点 jQuery 肘部润滑脂）

# objective-c - 在Objective-C的解析函数内部或外部分配和初始化NSArrays？

> ID：14535716
> 
> 赞同：0
> 
> 时间：2013-01-26T09:46:21.717
> 
> 标签：objective-c, arrays, parsing, memory-management, nsarray

我试图了解在 Objective-C ARC 应用程序中分配我的数组的位置更好：

**案例1**：解析函数之外的alloc和init数组

```
- (void)viewDidLoad { // or another method

    // other code
    // here I alloc and init arrays:

    dataSource2 = [[NSMutableArray alloc] init]; 
    dataSource3 = [[NSMutableArray alloc] init]; 
    dataSource4 = [[NSMutableArray alloc] init]; 
    dataSource5 = [[NSMutableArray alloc] init]; 
    dataSource6 = [[NSMutableArray alloc] init]; 
    dataSource7 = [[NSMutableArray alloc] init]; 
    dataSource8 = [[NSMutableArray alloc] init]; 
    dataSource9 = [[NSMutableArray alloc] init]; 
}

- (void)parseFunction {

    // parsing code
    // do something with arrays and iterate, example: 

       for (int i = 1; i < [arrays count]; ++i) {
            [dataSource2 addObject:object2];
            [dataSource3 addObject:object3];
            [dataSource4 addObject:object4];
            [dataSource5 addObject:object5];
            [dataSource6 addObject:object6];
            [dataSource7 addObject:object7];
            [dataSource8 addObject:object8];
            [dataSource9 addObject:object9];
        }
} 
```

**案例 2**：解析函数内部和迭代周期外部的 alloc 和 init 数组

```
- (void)viewDidLoad { // or another method

    // other code
}

- (void)parseFunction {

    // here I alloc and init arrays: 

    dataSource2 = [[NSMutableArray alloc] init]; 
    dataSource3 = [[NSMutableArray alloc] init]; 
    dataSource4 = [[NSMutableArray alloc] init]; 
    dataSource5 = [[NSMutableArray alloc] init]; 
    dataSource6 = [[NSMutableArray alloc] init]; 
    dataSource7 = [[NSMutableArray alloc] init]; 
    dataSource8 = [[NSMutableArray alloc] init]; 
    dataSource9 = [[NSMutableArray alloc] init]; 

    // parsing code
    // do something with arrays and iterate, example:

       for (int i = 1; i < [arrays count]; ++i) {

            [dataSource2 addObject:object2];
            [dataSource3 addObject:object3];
            [dataSource4 addObject:object4];
            [dataSource5 addObject:object5];
            [dataSource6 addObject:object6];
            [dataSource7 addObject:object7];
            [dataSource8 addObject:object8];
            [dataSource9 addObject:object9];
        }
} 
```

**案例 3**：解析函数和迭代周期内的 alloc 和 init 数组

```
- (void)viewDidLoad { // or another method

    // other code
}

- (void)parseFunction {

    // parsing code, alloc init and iterate, all in the same cycle:

       for (int i = 1; i < [arrays count]; ++i) {

       dataSource2 = [[NSMutableArray alloc] init]; 
       dataSource3 = [[NSMutableArray alloc] init]; 
       dataSource4 = [[NSMutableArray alloc] init]; 
       dataSource5 = [[NSMutableArray alloc] init]; 
       dataSource6 = [[NSMutableArray alloc] init]; 
       dataSource7 = [[NSMutableArray alloc] init]; 
       dataSource8 = [[NSMutableArray alloc] init]; 
       dataSource9 = [[NSMutableArray alloc] init]; 

            [dataSource2 addObject:object2];
            [dataSource3 addObject:object3];
            [dataSource4 addObject:object4];
            [dataSource5 addObject:object5];
            [dataSource6 addObject:object6];
            [dataSource7 addObject:object7];
            [dataSource8 addObject:object8];
            [dataSource9 addObject:object9];
        }
} 
```

好吧，我的应用程序在所有 3 种情况下都没有崩溃，但我想阅读关于我应该在哪里分配大量数组的**说明：这是同一件事吗？**还是在性能和​​内存分配方面有一个最佳位置，以避免一些问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:53:54.613

第三个是错误的。您正在多次创建/分配所有数组并仅存储最后一个。

1号和2号都不错。这取决于您的要求。如果您确定在调用方法时只需要一次这些数组，而不是在其他地方。然后2就好了。但是如果你调用它两次，那么它会像 3。

但是，所有属性都在 viewDidLoad 方法中初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:01:22.823

案例 3：

完全不正确：在每次迭代中，您都在“重置”数组内容；在循环结束时，您的数组将只包含您添加的最后一个元素；

情况1：

您在视图生命周期中初始化一次数组；然后*每次*执行 parse 函数时，都会向这些相同的数组*添加新元素；*随着您不断调用 parse 方法，数组将变得越来越大，并且将包含所有解析的“历史”；

案例二：

每次输入 parse 函数时，都会“重置”数组，然后用新元素填充它们；在循环结束时，数组将只包含最后一个解析任务的结果。

因此，在 1 和 2 之间，这取决于您要做什么；这两件事都有道理，我敢打赌2。

编辑：

回复您的其他问题（评论）：

> 谢谢@sergio，到目前为止，你的解释是最好的；但是在 ViewController 内分配和初始化数组的危险和问题是什么？

我不会谈论危险或问题：它可以很好地工作，至少对于简单的应用程序来说是这样。

另一方面，假设您想在 2 级视图中显示您解析的内容：首先是项目列表（想象一个表格）；然后，当您选择一个项目时，您将移动到另一个视图，显示有关该项目的更多详细信息。

在这种情况下，您将有 2 个不同的控制器需要访问相同的数据。如果您的阵列仅由一个控制器管理，那么另一个则*依赖*于此。如果您添加更多控制器和访问相同数据的视图，事情可能会变得更加复杂。

因此，这是一个“良好设计”并为变化做好准备的问题：如果您通过 ad-hoc 类（模型-视图-控制器中的模型）管理您的数据，您将获得一个更清晰有序的依赖关系图.

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T10:09:30.070

正如其他人所说，第三种选择是完全错误的。但是其他两个选项也不是很好。你真的不应该在视图控制器中拥有你的数据模型和解析代码。创建一个类来处理您的数据模型，您可以在其中进行所有解析并将其传递给您的视图控制器，例如在您的 init 方法中。不要让您的视图控制器创建该数据模型对象。

阅读[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)和[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T10:02:52.320

或者您可以设法在字典数组中完成所有这些事情，然后您不必跟踪 N 个数据源数组：

你可以做的是：

MasterArray -> 持有所有子数组的键 -> 在一个键上添加子数组数据。并动态释放这些子数组，因此在内存中您将只有一个 masterArray 而不是 N 个数据源数组。

例如：

MasterArray { '0' = ( { 一些数组对象 ) };

'1' = ( { 一些数组对象 ) };

希望能帮助到你。

# php - 在 Web 服务器上上传和移动图像文件 - 图像未上传

> ID：14535717
> 
> 赞同：0
> 
> 时间：2013-01-26T09:46:42.720
> 
> 标签：php

我看不到目标文件夹中上传的任何图像。我也试过 if (move_uploaded_file($HTTP_POST_FILES['memphoto']['tmp_name'], $target.$HTTP_POST_FILES['memphoto']['name'])) 而不是 if(copy($_FILES['photo'] ['tmp_name'], $uploadimages)) 但没有得到任何结果。有谁能够帮我。

```
<?php
  if ((isset($_FILES['photo']) && ($_FILES['photo']['size'] > 0)) 
  {
   $typ = $_FILES['photo']['type'];
   if($typ == "image/gif" || $typ == "image/png" || $typ == "image/jpeg" || $typ ==  "image/pgif" || $typ == "image/ppng" || $typ =="image/pjpeg" || $typ =="image/jpg")
   {
        $uploaddir = "images/";
        $uploadimages = $uploaddir.basename($_FILES['photo']['name']);
        if(copy($_FILES['photo']['tmp_name'], $uploadimages))
        {
           echo "File successfully copied";
           $query = "UPDATE $tbl_name SET photo='$uploadimages WHERE ID='$ID' ";
           if (!mysql_query($query))
           {
              die('Error: ' . mysql_error());
              mysql_close();
           }
        }
        else{echo "Copy unsuccessful";}
    }
    else{
                echo "Incorrect file type";
    }             

  }
  else {
  echo "No Photo/Signature file selected/uploaded.";
   }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:46:05.190

我总是使用[move_uploaded_file()](http://php.net/manual/en/function.move-uploaded-file.php)将上传的图像移动到目标目录。

```
$uploadimages = $uploaddir.$_FILES['photo']['name'];
if(move_uploaded_file($_FILES['photo']['tmp_name'], $uploadimages)){
    echo 'uploaded';
}else{
    echo 'upload failed';
} 
```

确保你有`enctype="multipart/form-data"`你的表单标签。

```
<form method="post" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-18T12:23:58.560

索引.php

```
 <form action="<?php echo $_SERVER["PHP_SELF"];?>" method="POST" enctype="multipart/form-data">
      Select image to upload:
      <input type="file"   name="photo" />
      <input type="submit" name="submit" value="Upload Image" />
    </form>

<?php
  $file_dir  = "uploads";

  /* Check if folder not exists, then create it */
  if (!file_exists($file_dir)) {
    mkdir($file_dir, 0777, true);
  }

  if (isset($_POST["submit"])) {    

    $file_name   = $_FILES['photo']['name'];
    $file_size   = $_FILES['photo']['size'];
    $file_tmp    = $_FILES['photo']['tmp_name'];
    $file_error  = $_FILES['photo']['error'];
    $file_type   = $_FILES['photo']['type'];

    /* check if files error = 0 [there are file uploaded] */
    if ($file_error === UPLOAD_ERR_OK) {

      /* location file save */
      $file_target = $file_dir .  DIRECTORY_SEPARATOR .  $file_name; /* DIRECTORY_SEPARATOR = / or \ */

      $file_secure = array('image/gif', 'image/pgif', 'image/png', 'image/ppng', 'image/jpeg', 'image/pjpeg', 'image/jpg');

      $errors = [];

      /* Check if file already exists */
      if (file_exists($file_target)) {
        $errors[] = "Sorry, <strong>{$file_name}</strong> already exists.";
      }

      /* Check file size */
      if ($file_size == 0) {
        $errors[] = "Sorry, <strong>{$file_name}</strong> = {$file_size}";
      }

      /* Check current file formats with file secure */
      if (in_array($file_type, $file_secure) === false) {
        $errors[] = "Sorry, <strong>{$file_current}</strong> type not allowed";         
      }

      /* Check if image file is a actual image or fake image ['mime'] */            
      if (getimagesize($file_tmp) == false) {
        $errors[] = "Sorry, <strong>{$file_name}</strong> is not an image.";
      }

      /* Check for Error */
      if (!empty($errors)) {                            

        /* Check errors and display them */                 
        foreach ($errors as $key => $value) {
          echo "$key = $value <br />";
        }

        echo "<br />";
        echo "<strong>{$file_name}</strong> could not uploaded. <hr />";                            

      /* if everything is ok, try to upload file */
      } else {

        if (move_uploaded_file($file_tmp, $file_target)) {

          echo "<strong>{$file_name}</strong> successfully copied.";

          /* update file_target into database */                                    
          $query = "UPDATE {$tbl_name} SET photo={$file_target} WHERE ID={$ID} ";
          if (!mysql_query($query)) {
            die('Error: ' . mysql_error());
            mysql_close();
          } else {
            echo "<strong>{$file_name}</strong> has been save into database.";                                          
          }                                 

        } else {

          echo "Sorry, <strong>{$file_name}</strong> UNsuccessfully copied.";

        }

      }                 

    /* check if files error = 4 [there are NOT file uploaded] */                    
    } else { /* UPLOAD_ERR_NO_FILE */

      echo "No file was uploaded";

    }

  }    
?> 
```

# c# - 注册表单中的密码文本框对页面加载有一定的价值

> ID：14535722
> 
> 赞同：2
> 
> 时间：2013-01-26T09:47:30.657
> 
> 标签：c#, asp.net

我正在创建一个注册表单，以下是密码和确认密码字段的设计代码

```
<tr>
    <td class="style14">
        <asp:Label ID="lblPass" runat="server" Text="Password"></asp:Label>
        <asp:TextBox ID="txtPass" runat="server" Width="150px" EnableTheming="True" 
                TextMode="Password" ></asp:TextBox>
    </td>
</tr>
<tr>
    <td class="style23">
        <asp:Label ID="lblCnfPass" runat="server" Text="Confirm Password"></asp:Label>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:TextBox ID="txtCnfPass" runat="server" Width="150px" TextMode="Password" 
                    CausesValidation="True"></asp:TextBox>
        <asp:CompareValidator ID="CompareValidator1" runat="server" 
                    ErrorMessage="Paswword doesnot Match" ValidationGroup="register"  ControlToCompare="txtCnfPass" 
                    ControlToValidate="txtPass">Paswword doesnot Match</asp:CompareValidator>
    </td>
    <td>
        &nbsp;
    </td>
</tr> 
```

问题是当我运行页面时，密码文本框填充了一些值，如图[所示](http://i.stack.imgur.com/EtJPx.png)。我该如何删除它？还有一点是，当我将 TextMode 属性从密码更改为单行时，就没有这样的问题了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:31:15.963

问题基本上是由于Mozilla Firefox浏览器。Mozilla Firefox 密码管理器将密码放入存储的输入字段之前的最后一个输入字段。只需在身份验证控件中放置一个隐藏的虚拟文本框（或输入）字段，即可在您的密码输入字段之前。有关更多详细信息，请阅读此处的说明 [https://wiki.mozilla.org/Firefox%3aPassword_Manager](https://wiki.mozilla.org/Firefox%3aPassword_Manager)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:24:04.173

我认为价值来自浏览器的自动填充功能。清除浏览器历史记录，包括保存的密码，然后重试。阿希克

# python - Python中的“可散列”是什么意思？

> ID：14535730
> 
> 赞同：286
> 
> 时间：2013-01-26T09:48:07.330
> 
> 标签：python

我尝试搜索互联网，但找不到 hashable 的含义。

当他们说物体是`hashable`或者`hashable objects`是什么意思？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2013-01-26T09:49:08.690

来自[Python 词汇表](http://docs.python.org/2/glossary.html)：

> 如果一个对象的哈希值在其生命周期内永远不会改变（它需要一个`__hash__()`方法），并且可以与其他对象进行比较（它需要一个`__eq__()`or`__cmp__()`方法），那么它就是可哈希的。比较相等的可散列对象必须具有相同的散列值。
> 
> 哈希性使对象可用作字典键和集合成员，因为这些数据结构在内部使用哈希值。
> 
> Python 的所有不可变内置对象都是可散列的，而没有可变容器（例如列表或字典）是可散列的。默认情况下，作为用户定义类实例的对象是可散列的；它们都比较不相等，它们的哈希值是它们的`id()`.

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2016-06-23T08:44:55.300

这里的所有答案对 python 中的可散列对象都有很好的解释，但我相信首先需要理解散列这个术语。

**散列**是计算机科学中的一个概念，用于创建高性能、伪随机访问数据结构，其中大量数据将被快速存储和访问。

例如，如果您有 10,000 个电话号码，并且您希望将它们存储在一个数组中（这是一种将数据存储在连续内存位置并提供随机访问的顺序数据结构），但您可能没有所需数量的连续内存位置。

因此，您可以改为使用大小为 100 的数组，并使用哈希函数将一组值映射到相同的索引，这些值可以存储在链表中。这提供了类似于数组的性能。

现在，哈希函数可以简单到将数字除以数组的大小，然后将余数作为索引。

有关更多详细信息，请参阅[https://en.wikipedia.org/wiki/Hash_function](https://en.wikipedia.org/wiki/Hash_function)

这是另一个很好的参考：http: [//interactivepython.org/runestone/static/pythonds/SortSearch/Hashing.html](http://interactivepython.org/runestone/static/pythonds/SortSearch/Hashing.html)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-07-03T08:20:01.717

任何不可变的（可变的手段，可能会改变）都可以被散列。除了要查找的哈希函数，如果一个类有它，例如。`dir(tuple)`并寻找`__hash__`方法，这里有一些例子

```
#x = hash(set([1,2])) #set unhashable
x = hash(frozenset([1,2])) #hashable
#x = hash(([1,2], [2,3])) #tuple of mutable objects, unhashable
x = hash((1,2,3)) #tuple of immutable objects, hashable
#x = hash()
#x = hash({1,2}) #list of mutable objects, unhashable
#x = hash([1,2,3]) #list of immutable objects, unhashable 
```

**不可变类型列表：**

```
int, float, decimal, complex, bool, string, tuple, range, frozenset, bytes 
```

**可变类型列表：**

```
list, dict, set, bytearray, user-defined classes 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-05-25T06:45:26.413

根据Python词汇表的理解，当您创建可散列的对象实例时，也会根据实例的成员或值计算出一个不可更改的值。例如，该值可以用作字典中的键，如下所示：

```
>>> tuple_a = (1, 2, 3)
>>> tuple_a.__hash__()
2528502973977326415
>>> tuple_b = (2, 3, 4)
>>> tuple_b.__hash__()
3789705017596477050
>>> tuple_c = (1, 2, 3)
>>> tuple_c.__hash__()
2528502973977326415
>>> id(a) == id(c)  # a and c same object?
False
>>> a.__hash__() == c.__hash__()  # a and c same value?
True
>>> dict_a = {}
>>> dict_a[tuple_a] = 'hiahia'
>>> dict_a[tuple_c]
'hiahia' 
```

我们可以发现 和 的哈希值`tuple_a`相同`tuple_c`，因为它们具有相同的成员。当我们`tuple_a`用作 中的键时`dict_a`，我们可以发现 for 的值`dict_a[tuple_c]`是相同的，这意味着当它们用作字典中的键时，它们返回相同的值，因为哈希值相同。对于那些不可散列的对象，该方法`__hash__`定义为`None`：

```
>>> type(dict.__hash__) 
<class 'NoneType'> 
```

我猜这个哈希值是在实例初始化时计算的，而不是以动态方式计算的，这就是为什么只有不可变对象是可哈希的。希望这可以帮助。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2020-05-19T12:07:41.387

Hashable = 能够被散列。

好的，什么是哈希？散列函数是一个函数，它接受一个对象，比如“Python”之类的字符串，并返回一个固定大小的代码。为简单起见，假设返回值是一个整数。

当我在 Python 3 中运行 hash('Python') 时，我得到 5952713340227947791 作为结果。不同版本的 Python 可以自由更改底层哈希函数，因此您可能会得到不同的值。重要的是，无论现在我运行多少次 hash('Python')，使用相同版本的 Python 总是会得到相同的结果。

但是 hash('Java') 返回 1753925553814008565。因此，如果我正在散列的对象发生变化，结果也会发生变化。另一方面，如果我正在散列的对象没有改变，那么结果保持不变。

为什么这很重要？

例如，Python 字典要求键是不可变的。也就是说，键必须是不变的对象。字符串在 Python 中是不可变的，其他基本类型（int、float、bool）也是如此。元组和冻结集也是不可变的。另一方面，列表不是不可变的（即它们是可变的），因为您可以更改它们。同样，dicts 是可变的。

所以当我们说某些东西是可散列的，我们的意思是它是不可变的。如果我尝试将可变类型传递给 hash() 函数，它将失败：

```
>>> hash('Python')
1687380313081734297
>>> hash('Java')
1753925553814008565
>>>
>>> hash([1, 2])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list'
>>> hash({1, 2})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'set'
>>> hash({1 : 2})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'dict'
>>>
>>> hash(frozenset({1, 2}))
-1834016341293975159
>>> hash((1, 2))
3713081631934410656 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-05-29T00:13:44.767

在 Python 中，任何不可变对象（例如整数、布尔值、字符串、元组）都是可散列的，这意味着它的值在其生命周期内不会改变。这允许 Python 创建一个唯一的哈希值来识别它，字典可以使用它来跟踪唯一的键和集合来跟踪唯一的值。

这就是 Python 要求我们对字典中的键使用不可变数据类型的原因。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-14T20:31:47.743

在 python 中，这意味着对象可以是集合的成员，以便返回索引。也就是说，它们具有唯一的身份/ id。

例如，在 python 3.3 中：

数据结构列表是不可散列的，但数据结构元组是可散列的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-06-15T07:30:15.547

让我给你一个工作示例来理解 python 中的可散列对象。我在这个例子中使用了 2 个元组。元组中的每个值都有一个唯一的哈希值，它在其生命周期内永远不会改变。所以基于这个有值，两个元组之间的比较就完成了。我们可以使用 Id() 获取元组元素的哈希值。

![2个元组之间的比较](../Images/024f1f7ca72adee208aef5d845b21e30.png)![2个元组之间的等价](../Images/7e0fc62c080e604b9a2884ed438b126e.png)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2019-11-04T06:59:59.880

为了从头开始创建哈希表，所有值都必须设置为“无”，并在出现需求时进行修改。可散列对象是指可修改的数据类型（字典、列表等）。另一方面，集合一旦分配就不能重新初始化，因此集合是不可散列的。而 set() 的变体——frozenset()——是可散列的。

# javascript - 如何检查div元素是否为空

> ID：14535733
> 
> 赞同：22
> 
> 时间：2013-01-26T09:48:49.870
> 
> 标签：javascript, jquery, operators

> **可能重复：**
> [使用 jQuery 检查 html 元素是否为空](https://stackoverflow.com/questions/6813227/checking-if-an-html-element-is-empty-with-jquery)

我有一个像这样的空 div：

```
<div id="cartContent"></div> 
```

我需要检查它是否为空。如果它是空的，它需要返回 true 然后一些

添加元素。如果不是，则返回 false 并执行其他一些函数。检查是否有任何东西的最佳方法是什么

div中的元素？

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-26T09:52:08.280

使用纯 JavaScript

```
 var isEmpty = document.getElementById('cartContent').innerHTML === ""; 
```

如果您使用的是 jquery，则可以这样做

```
 var isEmpty = $("#cartContent").html() === ""; 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-26T09:50:35.360

您可以使用本机 JavaScript：

```
if document.getElementById('cartContent').innerHTML === "" { 
```

您可以使用[`.is()`](http://api.jquery.com/is/)：

```
if( $('#leftmenu').is(':empty') ) { 
```

或者您可以只测试该[`length`](http://api.jquery.com/length/)属性以查看是否找到了一个：

```
if( $('#leftmenu:empty').length ) { 
```

您可以使用`$.trim()`删除空格（如果这是您想要的）并检查内容的长度：

```
if( !$.trim( $('#leftmenu').html() ).length ) { 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-26T10:02:33.313

就像其他人已经注意到的那样，您可以`:empty`像这样在 jQuery 中使用：

```
$('#cartContent:empty').remove(); 
```

`#cartContent`如果 div 为空，它将删除它。

但是人们在这里建议的这种技术和其他技术可能无法满足您的要求，因为如果它有任何包含空格的文本节点，则它不会被认为是空的。所以这不是空的：

```
<div> </div> 
```

虽然您可能想将其视为空的。

前段时间我遇到了这个问题，我写了这个小 jQuery 插件 - 只需将它添加到您的代码中：

```
jQuery.expr[':'].space = function(elem) {
  var $elem = jQuery(elem);
  return !$elem.children().length && !$elem.text().match(/\S/);
} 
```

现在你可以使用

```
$('#cartContent:space').remove(); 
```

如果 div 为空或仅包含空格，它将删除 div。当然你不仅可以删除它，还可以做任何你喜欢的事情，比如

```
$('#cartContent:space').append('<p>It is empty</p>'); 
```

你可以`:not`这样使用：

```
$('#cartContent:not(:space)').append('<p>It is not empty</p>'); 
```

我提出了这个测试，它可靠地完成了我想要的，你可以把它从插件中取出来作为一个独立的测试：

这将适用于 jQuery 对象：

```
function testEmpty($elem) {
  return !$elem.children().length && !$elem.text().match(/\S/);
} 
```

这将适用于 DOM 节点：

```
function testEmpty(elem) {
  var $elem = jQuery(elem);
  return !$elem.children().length && !$elem.text().match(/\S/);
} 
```

这比使用要好，`.trim`因为上面的代码首先测试被测元素是否有任何子元素，如果有，它会尝试找到第一个非空白字符然后停止，如果它甚至不需要读取或改变字符串一个不是空格的字符。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-26T09:50:24.093

您可以使用 is 功能

```
if( $('#cartContent').is(':empty') ) { } 
```

或使用长度

```
if( $('#cartContent:empty').length ) { } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-26T09:50:17.030

```
var empty = $("#cartContent").html().trim().length == 0; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-26T09:52:13.020

```
if ($("#cartContent").children().length == 0) 
{
     // no child
} 
```

# ember.js - ember.js - 路由器 v2 模板路径

> ID：14535736
> 
> 赞同：0
> 
> 时间：2013-01-26T09:48:51.403
> 
> 标签：ember.js

我正在查看路由器 v2，我发现我必须像这样声明模板的完整路径：

```
WZ.ApplicationRoute = Em.Route.extend
  renderTemplate: ->
    @render('app/templates/nav/nav', outlet: 'nav') 
```

我可以使用 templateName 属性创建一个视图，但我真的不想这样做。

有没有一种方法可以像这样定义我的模板：

```
@render('nav', outlet: 'nav') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:19:57.353

在典型环境中，您不需要在呈现模板时指定完整路径。Ember 没有做任何神奇的事情。它检查具有指定名称的模板`Ember.TEMPLATES`。启动您的应用程序并从 JS 控制台尝试：

```
Ember.keys(Ember.TEMPLATES) 
```

我的猜测是您的模板将在下面`app/templates/nav/nav`而不是导航下。

如何解决此问题取决于您用于编译车把模板的内容。大多数构建系统将允许您指定模板名称的基本路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:59:56.040

Ember 使用它的约定来查找模板，它可以是直接的名称，也可以是名称的路径。如果您只键入`nav`，则 ember 假定它是名称。

关于这一点的最佳文档始终是源代码，在这种情况下是（文件：packages/ember-routing/lib/system/route.js）：

```
render: function(name, options) {
  if (typeof name === 'object' && !options) {
    options = name;
    name = this.routeName;
  }

  name = name ? name.replace(/\//g, '.') : this.routeName;

  var container = this.container,
      view = container.lookup('view:' + name),
      template = container.lookup('template:' + name);

  if (!view && !template) { return; }

  this.lastRenderedTemplate = name;

  options = normalizeOptions(this, name, template, options);
  view = setupView(view, container, options);

  appendView(this, view, options);
} 
```

对您的问题的回答是行

```
name = name ? name.replace(/\//g, '.') : this.routeName; 
```

因此，ember 的模板名称可以是您为模板指定的名称，也可以是基于所有斜杠转换为点的路径的名称（按照 ember 的约定）。

**更新，8.2.2013 - 在评论中回答@sudhanshu 的问题**

使用模板的默认方式是为您的应用程序配置路由器：

```
App.Router.map(function() {
  this.route("members");
  this.route("member",     { path: "/members/:refId" } );
  this.route("membernew",  { path: "/member/new" } );
}); 
```

上面的小例子展示了路由器的 3 个特性：

*   “members”只是名称并应用约定，即没有定义路径。因此，emberjs 将自动使用该路径`/members`。
*   “成员”使用动态 URL 部分来识别资源并加载正确的成员。在这里，您必须定义路径。
*   “membernew”还定义了路径，因为我不想使用默认值`/membernew`

按照相同的约定，emberjs 将尝试使用您在路由器中定义的名称加载模板。在上面的示例中，emberjs 期望车把模板具有名称“members”、“member”和“membernew”。

上面没有显示的一个功能是将路由级联到资源中。请查看[http://emberjs.com/guides/routing/](http://emberjs.com/guides/routing/) emberjs 团队就该主题编写了一个非常好的指南。

所以，总的来说，emberjs 是基于一些很好的约定，可以让你避免很多编码行。但是，您必须遵守约定。对于更复杂的应用程序，这通常是不可能的。

# java - 将字节数组保存到文件时显示的丑陋字符

> ID：14535737
> 
> 赞同：1
> 
> 时间：2013-01-26T09:48:54.143
> 
> 标签：java, bufferedreader, dataoutputstream

我在服务器中有一个文本文件。我正在从客户端下载该文件。我已经给出了应该保存的文件路径`fi`。

创建的文本文件，其中包含一些难看的字符，而不是字符串。我该如何纠正它？

输出的格式是；

```
sNULdNULiNULdNUL 
```

打印文本文件中的一个字符，然后是粗体**NUL 。**这是什么，我怎样才能摆脱它？

```
FileOutputStream f= new FileOutputStream(fi);

DataOutputStream d= new DataOutputStream(f);

String fc;
while((fc  = re.readLine()) !=null)  
{  
System.out.println(fc);
d.writeChars(fc);
d.flush();

} 
```

更新

```
€À€À€À€À€À€À€À€À€À€À€À€À€À€À€ 
```

更新 2

```
InputStreamReader st= new InputStreamReader(
                    s.getInputStream());
            re= new BufferedReader(st); 
```

`s`是这里`socket`。`re`已初始化为`BufferedReader re;`

```
try {
            s= new Socket("localhost", "2222");
        } catch (IOException ex) {
             ex.printStackTrace();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:24:30.477

字符串，当您希望将它们存储在内存中、将它们写入文件或通过 Internet 发送它们时，需要将它们编码为字节。有许多编码系统可以做到这一点。

`writeChars`将每个字符写为两个字节，这就是您已经看到的。

`writeUTF`做了一些人类不可读的事情：

> 使用 Java 修改的 UTF-8 编码以与机器无关的方式将字符串写入底层输出流。
> 
> 首先，两个字节被写入输出流，就好像通过 writeShort 方法给出了后面的字节数。这个值是实际写出的字节数，而不是字符串的长度。在长度之后，使用修改后的 UTF-8 字符编码按顺序输出字符串的每个字符。如果没有抛出异常，则写入的计数器将增加写入输出流的字节总数。这将至少是 str 长度的两倍，最多是 str 长度的两倍。

如果您想将字符写入文件，不用大惊小怪，使用[FileWriter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)。在大多数情况下，它会假定编写人类可读文件的正确默认值。

```
FileWriter fw = new FileWriter(filename);
BufferedWriter bw = new BufferedWriter(fw);

while((fc  = re.readLine()) !=null) {  
    bw.write(fc);
    bw.newLine();
    bw.flush();
}
bw.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:58:27.900

`writeChars`将每个字符作为 2 字节值写入底层输出流，首先是高字节。因此，如果您的流中有多字节字符，它将导致输出中显示难看的字符。为您的流使用正确的编码

~~尝试用`d.writeChars(fc);`.Hope`d.writeUTF(fc);`替换~~

如果我让您正确使用`US-ASCII`输入输入流的编码。

```
InputStreamReader st= new InputStreamReader(
                s.getInputStream(),"US-ASCII");
        re= new BufferedReader(st); 
```

# vba - 复制 Excel 单元格，评估内容，并复制循环单元格内容的文件作为文件名

> ID：14535752
> 
> 赞同：1
> 
> 时间：2013-01-26T09:51:08.923
> 
> 标签：vba, excel

![要复制的单元格 - 创建文件路径](../Images/750cc605b8ad4dcc826488a74ff19268.png)

我为此添加了一个附加图像。DocType 列自动从“Doc Types”表复制到此表。内容可以根据填写的单元格数量变化和变化。所以公式创建第一列，我需要 vb 来评估文件路径列的结果，并将`"C:\test\images\tester.TIF"`所需的次数复制到那里创建的文件路径。我目前拥有的下面的代码要简单得多，但我不知道该往哪个方向发展。

```
    子 CopyEmTWO()
        暗淡为工作表
        将字符串变暗为字符串
        将 strOut 调暗为字符串
        暗淡 strFile 作为字符串
        将 strLPart 变暗为字符串
        将 strRPart 调暗为字符串
        Dim lngCnt 作为字符串
        调暗文件只要
        设置 ws = Sheets("MRT")
        lngCnt = Application.CountA(ws.Columns("A"))
        如果 lngCnt = 0 则退出 Sub
        strIn = "C:\inserver6\script\Toolbelt\MRTesting\"
        strOut = "C:\inserver6\script\Toolbelt\MRTesting\"
        strFile = "MRTesting.tif"
        '提取文件名的字符串部分并在复制循环之外键入
        strLPart = Left$(strFile, InStr(strFile, ".") - 1)
        strRPart = Right$(strFile, Len(strFile) - Len(strLPart))
        对于 lngFiles = 1 到 lngCnt
            FileCopy strIn & strFile, strOut & strLPart & "(" & lngFiles & ")" & strRPart
        下一个
    结束子

```

我还是一个新手，我已经花了 8 小时的时间来解决这个问题，但还是做不好。这是我用于简单枚举和复制的工作代码。如果它需要一种完全不同的方法，请提供您的任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:45:45.300

如果我正确理解了输入（屏幕非常有帮助），以下代码将完成这项工作：

```
Sub CloneImage()

Dim SampleFile As String
Dim SampleFileExt As String
Dim OutputFolder As String
Dim ResultFile As String
Dim CurrentName As String
Dim FSO As Object
Dim i As Long
Dim CopyCount As Long

SampleFile = "D:\DOCUMENTS\1.gif"
OutputFolder = "D:\DOCUMENTS\1\"
Set FSO = CreateObject("Scripting.FileSystemObject")
CopyCount = 0
Application.ScreenUpdating = False

If FSO.FileExists(SampleFile) = True Then
    SampleFileExt = "." & FSO.GetExtensionName(SampleFile)
Else
    MsgBox "Source file:" & vbNewLine & SampleFile & vbNewLine & "does not exist!"
    Exit Sub
End If

If FSO.FolderExists(OutputFolder) = False Then FSO.CreateFolder OutputFolder

For i = 2 To ThisWorkbook.ActiveSheet.Range("A1").CurrentRegion.Rows.Count

    CurrentName = ThisWorkbook.ActiveSheet.Cells(i, 1).Value
    ResultFile = OutputFolder & CurrentName & SampleFileExt
    ThisWorkbook.ActiveSheet.Cells(i, 2).Formula = ResultFile
    ThisWorkbook.ActiveSheet.Cells(i, 3).Formula = CurrentName & ": " & ResultFile
    If FSO.FileExists(ResultFile) = False Then
        FSO.CopyFile SampleFile, ResultFile
        CopyCount = CopyCount + 1
    Else
        MsgBox "Destination file:" & vbNewLine & ResultFile & vbNewLine & "already exists!"
    End If

Next i

ThisWorkbook.ActiveSheet.Range("A1").CurrentRegion.Columns.AutoFit

Application.ScreenUpdating = True
Set FSO = Nothing

MsgBox i - 2 & " string(s) processed," & vbNewLine & CopyCount & " file(s) created in:" & vbNewLine & OutputFolder

End Sub 
```

假设和限制：

1.  将警告丢失的源文件。
2.  文件扩展名将从源中获取。
3.  将自动创建输出文件夹（如果不存在）。
4.  将警告已经存在的目标文件。
5.  带有处理的字符串/文件数量的最终消息。

示例文件也共享：[https ://www.dropbox.com/s/jhbkwzuxzt01kzs/CloneImage.xlsm](https://www.dropbox.com/s/jhbkwzuxzt01kzs/CloneImage.xlsm)

希望这会有所帮助。

# html - 在 div 前后添加换行符的最佳方法是什么？

> ID：14535753
> 
> 赞同：4
> 
> 时间：2013-01-26T09:51:16.943
> 
> 标签：html, line-breaks

有人向我展示了一个 html 以使用 div 标签来显示一些包含背景图像的文本

```
<div class='main'>
   <div class='img1'>
      SOME TITLE TEXT
   </div>  
</div>";
<div class='img2'>"
  SOME DESCRIPTION TEXT HERE
</div>" 
```

这里 img1 和 img2 类包含两个背景图像，img2 的相应 div 将显示在 img1 旁边（没有间隙）。我需要重复整个模式几次以显示具有不同内容但格式相同的内容。

```
<!-- GROUP 1 -->  
<div class='main'>
   <div class='img1'>
      SOME TITLE TEXT 1
   </div>  
</div>";
<div class='img2'>"
  SOME DESCRIPTION TEXT HERE 1
</div>"
<!-- GROUP 2 -->  
<div class='main'>
   <div class='img1'>
      SOME TITLE TEXT 2
   </div>  
</div>";
<div class='img2'>"
  SOME DESCRIPTION TEXT HERE 2
</div>" 
```

但我发现，如上图所示，任何两个组之间都没有分离。坦率地说，我真的没有html经验，我只是从别人那里复制代码。但是在网上搜索后，我找到了
命令，我尝试在组之间添加该标签，但似乎中断比我预期的要多。有没有其他方法可以插入间隙较小的分隔符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T09:56:04.503

你可以像这样给予`margin`：`top``bottom`

```
margin: 10px 0; 
```

以上将应用`10px`顶部和底部的边距。您还可以使用单个属性，例如`margin-top`和`margin-bottom`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T09:53:41.397

一种方法是使用 css 来设置元素的样式。

```
<style>
.main
{
  margin-bottom: 10px;
}
</style> 
```

您可以根据需要进行更改..不确定您要分隔什么 div

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T09:54:43.303

添加换行符有两种主要方法：通过换行`<br>`标记和通过段落标记`<p>`。所以你所要做的就是把这些标签放在你的标签之间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-07T00:57:55.120

将子 div 添加到如下所示的 span

```
<div class="class1" >
   <span class="span1">
         data1 
       <br>
       <span class="span2">
            data2
       </span>
    </span>
</div> 
```

CSS：

```
 .span1{
      display:inline-block;
    }
    .span2{
      display:inline-block;     
    }

    </div> 
```

# delphi - 如何获取由多个 IHTMLElements 组成的 IHTMLElementCollection obj？

> ID：14535755
> 
> 赞同：5
> 
> 时间：2013-01-26T09:51:40.613
> 
> 标签：delphi, pascal, mshtml, ihtmldocument2

伙计们：我在 object-pascal 编程中遇到了一个关于“如何获取由多个 IHTMLElements 组成的 IHTMLElementCollection obj”的问题，我的代码如下：

```
function TExDomUtils.GetElementsByClassName(vDoc:IHTMLDocument3; strClassName:string):IHTMLElementCollection;
var
  vElementsAll : IHTMLElementCollection;
  vElementsRet : IHTMLElementCollection;
  vElement : IHTMLElement;
  docTmp : IHTMLDocument2;
  I ,J: Integer;
begin
  J := 0;
  vElementsAll := vDoc.getElementsByTagName('*');
  for I:=0 to vElementsAll.length - 1 do
  begin
    vElement := vElementsAll.item(I,0) as IHTMLElement;
    if vElement.getAttribute('class',0) = strClassName then
    begin
      // how to get an IHTMLElementCollection obj which composed of several IHTMLElements?
      J := J + 1;
    end;

  end;

  Result := vElementsRet;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T14:09:15.950

您可以简单地创建自己的容器类，例如`TList<IHTMLElement>`或`array of IHTMLElements`：

```
type
  THTMLElements = array of IHTMLElement;

function GetElementsByClassName(ADoc: IDispatch; const strClassName: string): THTMLElements;
var
  vDocument: IHTMLDocument2;
  vElementsAll: IHTMLElementCollection;
  vElement: IHTMLElement;
  I, ElementCount: Integer;
begin
  Result := nil;
  ElementCount := 0;
  if not Supports(ADoc, IHTMLDocument2, vDocument) then
    raise Exception.Create('Invalid HTML document');
  vElementsAll := vDocument.all;
  SetLength(Result, vElementsAll.length); // set length to max elements
  for I := 0 to vElementsAll.length - 1 do
    if Supports(vElementsAll.item(I, EmptyParam), IHTMLElement, vElement) then
      if SameText(vElement.className, strClassName) then
      begin
        Result[ElementCount] := vElement;
        Inc(ElementCount);
      end;
  SetLength(Result, ElementCount); // adjust Result length
end; 
```

***用法：***

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  WebBrowser1.Navigate('http://stackoverflow.com/questions/14535755/how-to-get-an-ihtmlelementcollection-obj-which-composed-of-several-ihtmlelements');
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  Elements: THTMLElements;
  I: Integer;
begin
  // show Tags information for SO page:
  Elements := GetElementsByClassName(WebBrowser1.Document, 'post-tag');
  ShowMessage(IntToStr(Length(Elements)));
  for I := 0 to Length(Elements) - 1 do
    Memo1.Lines.Add(Elements[I].innerHTML + ':' + Elements[I].getAttribute('href', 0));
end; 
```

* * *

将结果返回为 , 的主要问题`IHTMLElementCollection`是它`IHTMLElementCollection`是由*内部*创建的`IHTMLDocument`，我找不到任何方法来创建新实例`IHTMLElementCollection`并向其添加元素的引用，例如：

```
vElementsRet := CoHTMLElementCollection.Create as IHTMLElementCollection 
```

将导致`Class not registered`异常。

# php - 我怎样才能得到这个会话值

> ID：14535756
> 
> 赞同：0
> 
> 时间：2013-01-26T09:51:43.377
> 
> 标签：php, arrays, session

来自用户的 HTML 可以选择不同类别下的主题。选定主题后，我将它们保存在会话中。没关系。我是这样做的...

```
$_SESSION['select-subjectes'] = $_POST['select-subjectes']; 
```

这是结果`echo '<pre>', print_r($_SESSION['select-subjectes']), '</pre>';`

```
 Array
(
    [Grade 5 (Scholarship Exam)] => Array
        (
            [0] => 3:2
            [1] => 3:3
        )

    [Grade 11 (O/L)] => Array
        (
            [0] => 5:8
            [1] => 5:10
        )

    [Graduation Level] => Array
        (
            [0] => 7:24
            [1] => 7:46
            [2] => 7:82
        )

) 
```

现在我需要将这些值插入到数据库中。`3:2`这种值的意思是冒号前面的数字是类别ID，冒号后面的数字是主题ID。我的问题是当我尝试分别获取这些值以插入数据库时​​。

我试过这样的东西..但它不工作..

```
if ( isset($_SESSION['select-subjectes'])) {                        
    $data = array();
    $data = $_SESSION['select-subjectes'];

    foreach($data as $key => $value) {

        $pieces = explode(":", $value);
        $catId = $pieces[0];
        $subId = $pieces[1];

        $q = "INSERT INTO category_subject ( category_id, subject_id ) VALUES ( ?, ? )";            
        $stmt = mysqli_prepare( $dbc, $q );         
        mysqli_stmt_bind_param( $stmt, 'ii', $catId, $subId );          
        mysqli_stmt_execute( $stmt ); 
    }       
} 
```

希望有人能帮助我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:56:01.287

你的`$data`数组是一个数组数组。`$key`您的代码中的第一个是...

```
Grade 5 (Scholarship Exam) 
```

……而且`$value`是……

```
Array(
    [0] => 3:2
    [1] => 3:3
) 
```

...所以这就是它失败的原因。

使用嵌套`foreach`循环访问您想要的元素...

```
foreach($data as $data_array) {
    foreach($data_array as $key => $value) {
        $pieces = explode(":", $value);
        $catId = $pieces[0];
        $subId = $pieces[1];

        $q = "INSERT INTO category_subject (category_id, subject_id) VALUES (?, ?)";
        $stmt = mysqli_prepare($dbc, $q);
        mysqli_stmt_bind_param($stmt, 'ii', $catId, $subId);
        mysqli_stmt_execute($stmt);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:56:48.717

你必须像这样对它做两个`foreach`循环：

```
foreach($data as $array){
 foreach($array as $key => $value) {

        $pieces = explode(":", $value);
        $catId = $pieces[0];
        $subId = $pieces[1];

        $q = "INSERT INTO category_subject ( category_id, subject_id ) VALUES ( ?, ? )";            
        $stmt = mysqli_prepare( $dbc, $q );         
        mysqli_stmt_bind_param( $stmt, 'ii', $catId, $subId );          
        mysqli_stmt_execute( $stmt ); 
    }     

} 
```

# php - 使用 mysql 查询作为条件

> ID：14535766
> 
> 赞同：0
> 
> 时间：2013-01-26T09:52:47.627
> 
> 标签：php, mysql, sql

我在 mySQL 数据库中有一个表，我在其中放置了一个使用 php 从 android 应用程序检索到的值。现在这个值是一个 UniqueID，所以我一直在计算它，这样我就可以知道我的应用程序被访问了多少次。当一个新的 UniqueID 到达时，它以 count=1 添加到数据库中，当一个现有的 UniqueID 被检索时，它的计数简单地增加。我多次尝试了我的 php 脚本，但没有运气。我附上我的 php 脚本以供参考。

```
<?php

ini_set('default_charset', 'utf-8');
header('Content-Type: text/html; charset=UTF-8');
$n=$_POST['UniqueID'];  
$count=1;  
$Today=date("F j, Y, g:i a");

mysql_connect("localhost","root","");  
mysql_select_db("farm-o-pedia");

$con="select userid from uniqueid";  
$result=mysql_query($con) or die(mysql_error());  
if($result=$n)  
{  

$upd="update uniqueid set count=count+1 where userid=$n";  
$result=mysql_query($upd) or die(mysql_error());  
}  
else  {  
$que="insert into uniqueid (userid,count,date) values($n,\"$count\",\"$Today\")";    
$sql=mysql_query($que) or die(mysql_error());  
}

mysql_close();
?> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:18:01.640

另一种方法是利用 MySQL 的`ON DUPLICATE KEY UPDATE`

首先要做的是`UNIQUE`在列上定义一个约束`userid`（*如果它是 PRIMARY KEY 则跳过这一步。*），

```
ALTER TABLE uniqueid ADD CONSTRAINT tb_uq UNIQUE (userid) 
```

执行查询后，`ON DUPLICATE KEY UPDATE`现在可以正常工作了。

你将有 no`SELECT`和 other `IF`。

```
INSERT INTO UNIQUEID (userID `count`, date)
VALUES ('idHere', 0, NOW())
ON DUPLICATE KEY 
UPDATE `count` = `count` + 1; 
```

*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:00:13.443

mysql_query 返回一个**结果集**，而不是单个结果，因此：

```
$con="select userid from uniqueid";  
$result=mysql_query($con) or die(mysql_error());  
if($row=mysql_fetch_assoc($result)) { //if a row is found in resultset, then you already have this id in your table
    $upd="update uniqueid set count=count+1 where userid=$n";  
    $result=mysql_query($upd) or die(mysql_error());  
} else {  
    $que="insert into uniqueid (userid,count,date) values($n,\"$count\",\"$Today\")";    
    $sql=mysql_query($que) or die(mysql_error());  
} 
```

此外，您应该开始使用 mysqli 函数而不是 mysql，因为不推荐使用 mysql 函数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T10:00:23.963

看看这条线`if($result=$n)`——这永远行不通。部分比较运算符`==`也不`=`是结果字符串由查询结果而不是单个值组成。

将行替换为：

```
if (mysql_num_rows($result)===1) 
```

其次，您应该真正考虑转义您的查询，并且最好从使用已弃用的 mysql_* 函数更改为 PDO 或 mysqli。

# java - Executors：如果任务是递归创建的，如何同步等待所有任务完成？

> ID：14535770
> 
> 赞同：13
> 
> 时间：2013-01-26T09:53:20.877
> 
> 标签：java, concurrency, threadpoolexecutor

[我的问题与这里](https://stackoverflow.com/questions/3929361/how-to-wait-for-all-tasks-in-an-threadpoolexecutor-to-finish-without-shutting-do)的这个问题密切相关。正如在那里发布的那样，我希望主线程等到工作队列为空并且所有任务都完成。然而，在我的情况下，问题是每个任务都可能递归地导致提交新任务进行处理。这使得收集所有这些任务的未来有点尴尬。

我们当前的解决方案使用忙等待循环来等待终止：

```
 do { //Wait until we are done the processing
      try {
        Thread.sleep(200);
      } catch (InterruptedException e) {
        throw new RuntimeException(e);
      }
    } while (!executor.getQueue().isEmpty()
             || numTasks.longValue() > executor.getCompletedTaskCount()); 
```

numTasks 是一个随着每个新任务的创建而增加的值。这行得通，但我认为由于忙于等待，这不是很好。我想知道是否有一种好方法可以让主线程同步等待，直到被显式唤醒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T22:38:23.827

非常感谢您的所有建议！

最后，我选择了一些我认为相当简单的东西。我发现[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)几乎是我所需要的。它会一直阻塞，直到计数器达到 0。唯一的问题是它只能倒计时，不能倒计时，因此在我的动态设置中不起作用，任务可以提交新任务。`CountLatch`因此，我实现了一个提供附加功能的新类。（见下文）然后我使用这个类如下。

主线程调用`latch.awaitZero()`，阻塞直到latch达到0。

任何线程，在调用`executor.execute(..)`调用之前`latch.increment()`。

任何任务，就在完成之前，调用`latch.decrement()`.

当最后一个任务终止时，计数器将达到 0，从而释放主线程。

欢迎进一步的建议和反馈！

```
public class CountLatch {

@SuppressWarnings("serial")
private static final class Sync extends AbstractQueuedSynchronizer {

    Sync(int count) {
        setState(count);
    }

    int getCount() {
        return getState();
    }

    protected int tryAcquireShared(int acquires) {
        return (getState() == 0) ? 1 : -1;
    }

    protected int acquireNonBlocking(int acquires) {
        // increment count
        for (;;) {
            int c = getState();
            int nextc = c + 1;
            if (compareAndSetState(c, nextc))
                return 1;
        }
    }

    protected boolean tryReleaseShared(int releases) {
        // Decrement count; signal when transition to zero
        for (;;) {
            int c = getState();
            if (c == 0)
                return false;
            int nextc = c - 1;
            if (compareAndSetState(c, nextc))
                return nextc == 0;
        }
    }
}

private final Sync sync;

public CountLatch(int count) {
    this.sync = new Sync(count);
}

public void awaitZero() throws InterruptedException {
    sync.acquireSharedInterruptibly(1);
}

public boolean awaitZero(long timeout, TimeUnit unit) throws InterruptedException {
    return sync.tryAcquireSharedNanos(1, unit.toNanos(timeout));
}

public void increment() {
    sync.acquireNonBlocking(1);
}

public void decrement() {
    sync.releaseShared(1);
}

public String toString() {
    return super.toString() + "[Count = " + sync.getCount() + "]";
}

} 
```

请注意，可以将`increment()`/`decrement()`调用封装到自定义的`Executor`子类中，例如 Sami Korhonen 所建议的，或者impl 所建议的with `beforeExecute`and 。`afterExecute`看这里：

```
public class CountingThreadPoolExecutor extends ThreadPoolExecutor {

protected final CountLatch numRunningTasks = new CountLatch(0);

public CountingThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit,
        BlockingQueue<Runnable> workQueue) {
    super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);
}

@Override
public void execute(Runnable command) {
    numRunningTasks.increment();
    super.execute(command);
}

@Override
protected void afterExecute(Runnable r, Throwable t) {
    numRunningTasks.decrement();
    super.afterExecute(r, t);
}

/**
 * Awaits the completion of all spawned tasks.
 */
public void awaitCompletion() throws InterruptedException {
    numRunningTasks.awaitZero();
}

/**
 * Awaits the completion of all spawned tasks.
 */
public void awaitCompletion(long timeout, TimeUnit unit) throws InterruptedException {
    numRunningTasks.awaitZero(timeout, unit);
}

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-18T23:37:53.643

Java 7 提供了一个适合此用例的同步器，称为[Phaser](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html)。它是 CountDownLatch 和 CyclicBarrier 的可重复使用的混合体，可以增加和减少注册方的数量（类似于可递增的 CountDownLatch）。

在这种情况下使用移相器的基本模式是在创建时向移相器[注册](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html#register%28%29)任务，并在完成时[到达](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html#arrive%28%29)。当到达方的数量与注册的数量相匹配时，移相器“前进”到下一个阶段，当它发生时通知任何[等待线程。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html#awaitAdvance%28int%29)

这是我创建的等待递归任务完成的示例。出于演示目的，它天真地找到了斐波那契数列的前几个数字：

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ForkJoinPool;
import java.util.concurrent.Phaser;
import java.util.concurrent.atomic.AtomicLong;

/**
 * An example of using a Phaser to wait for the completion of recursive tasks.
 * @author Voxelot
 */
public class PhaserExample {
    /** Workstealing threadpool with reduced queue contention. */
    private static ForkJoinPool executors;

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws InterruptedException {
        executors = new ForkJoinPool();
        List<Long> sequence = new ArrayList<>();
        for (int i = 0; i < 20; i++) {
            sequence.add(fib(i));
        }
        System.out.println(sequence);
    }

    /**
     * Computes the nth Fibonacci number in the Fibonacci sequence.
     * @param n The index of the Fibonacci number to compute
     * @return The computed Fibonacci number
     */
    private static Long fib(int n) throws InterruptedException {
        AtomicLong result = new AtomicLong();
        //Flexible sychronization barrier
        Phaser phaser = new Phaser();
        //Base task
        Task initialTask = new Task(n, result, phaser);
        //Register fib(n) calling thread
        phaser.register();
        //Submit base task
        executors.submit(initialTask);
        //Make the calling thread arrive at the synchronization
        //barrier and wait for all future tasks to arrive.
        phaser.arriveAndAwaitAdvance();
        //Get the result of the parallel computation.
        return result.get();
    }

    private static class Task implements Runnable {
        /** The Fibonacci sequence index of this task. */
        private final int index;
        /** The shared result of the computation. */
        private final AtomicLong result;
        /** The synchronizer. */
        private final Phaser phaser;

        public Task(int n, AtomicLong result, Phaser phaser) {
            index = n;
            this.result = result;
            this.phaser = phaser;
            //Inform synchronizer of additional work to complete.
            phaser.register();
        }

        @Override
        public void run() {
            if (index == 1) {
                result.incrementAndGet();
            } else if (index > 1) {
                //recurrence relation: Fn = Fn-1 + Fn-2
                Task task1 = new Task(index - 1, result, phaser);
                Task task2 = new Task(index - 2, result, phaser);
                executors.submit(task1);
                executors.submit(task2);
            }
            //Notify synchronizer of task completion.
            phaser.arrive();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-26T16:18:30.523

这实际上是一个相当有趣的问题。我必须警告我没有完全测试代码。

这个想法是简单地跟踪任务执行：

*   如果任务成功排队，计数器加一
*   如果任务被取消且尚未执行，则计数器减一
*   如果任务已执行，则计数器减一

当调用shutdown并且有挂起的任务时，委托不会在实际的ExecutorService上调用shutdown。它将允许对新任务进行排队，直到挂起的任务计数达到零并且在实际的 ExecutorService 上调用关闭。

```
public class ResilientExecutorServiceDelegate implements ExecutorService {
    private final ExecutorService executorService;
    private final AtomicInteger pendingTasks;
    private final Lock readLock;
    private final Lock writeLock;
    private boolean isShutdown;

    public ResilientExecutorServiceDelegate(ExecutorService executorService) {
        ReadWriteLock readWriteLock = new ReentrantReadWriteLock();
        this.pendingTasks = new AtomicInteger();
        this.readLock = readWriteLock.readLock();
        this.writeLock = readWriteLock.writeLock();
        this.executorService = executorService;
        this.isShutdown = false;
    }

    private <T> T addTask(Callable<T> task) {
        T result;
        boolean success = false;
        // Increment pending tasks counter
        incrementPendingTaskCount();
        try {
            // Call service
            result = task.call();
            success = true;
        } catch (RuntimeException exception) {
            throw exception;
        } catch (Exception exception) {
            throw new RejectedExecutionException(exception);
        } finally {
            if (!success) {
                // Decrement pending tasks counter
                decrementPendingTaskCount();
            }
        }
        return result;
    }

    private void incrementPendingTaskCount() {
        pendingTasks.incrementAndGet();
    }

    private void decrementPendingTaskCount() {
        readLock.lock();
        if (pendingTasks.decrementAndGet() == 0 && isShutdown) {
            try {
                // Shutdown
                executorService.shutdown();
            } catch (Throwable throwable) {
            }
        }
        readLock.unlock();
    }

    @Override
    public void execute(final Runnable task) {
        // Add task
        addTask(new Callable<Object>() {
            @Override
            public Object call() {
                executorService.execute(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            task.run();
                        } finally {
                            decrementPendingTaskCount();
                        }
                    }
                });
                return null;
            }
        });
    }

    @Override
    public boolean awaitTermination(long timeout, TimeUnit unit)
            throws InterruptedException {
        // Call service
        return executorService.awaitTermination(timeout, unit);
    }

    @Override
    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks)
            throws InterruptedException {
        // It's ok to increment by just one
        incrementPendingTaskCount();
        try {
            return executorService.invokeAll(tasks);
        } finally {
            decrementPendingTaskCount();
        }
    }

    @Override
    public <T> List<Future<T>> invokeAll(
            Collection<? extends Callable<T>> tasks, long timeout, TimeUnit unit)
            throws InterruptedException {
        // It's ok to increment by just one
        incrementPendingTaskCount();
        try {
            return executorService.invokeAll(tasks, timeout, unit);
        } finally {
            decrementPendingTaskCount();
        }
    }

    @Override
    public <T> T invokeAny(Collection<? extends Callable<T>> tasks)
            throws InterruptedException, ExecutionException {
        // It's ok to increment by just one
        incrementPendingTaskCount();
        try {
            return executorService.invokeAny(tasks);
        } finally {
            decrementPendingTaskCount();
        }
    }

    @Override
    public <T> T invokeAny(Collection<? extends Callable<T>> tasks,
            long timeout, TimeUnit unit) throws InterruptedException,
            ExecutionException, TimeoutException {
        incrementPendingTaskCount();
        try {
            return executorService.invokeAny(tasks, timeout, unit);
        } finally {
            decrementPendingTaskCount();
        }
    }

    @Override
    public boolean isShutdown() {
        return isShutdown;
    }

    @Override
    public boolean isTerminated() {
        return executorService.isTerminated();
    }

    @Override
    public void shutdown() {
        // Lock write lock
        writeLock.lock();
        // Set as shutdown
        isShutdown = true;
        try {
            if (pendingTasks.get() == 0) {
                // Real shutdown
                executorService.shutdown();
            }
        } finally {
            // Unlock write lock
            writeLock.unlock();
        }
    }

    @Override
    public List<Runnable> shutdownNow() {
        // Lock write lock
        writeLock.lock();
        // Set as shutdown
        isShutdown = true;
        // Unlock write lock
        writeLock.unlock();

        return executorService.shutdownNow();
    }

    @Override
    public <T> Future<T> submit(final Callable<T> task) {
        // Create execution status
        final FutureExecutionStatus futureExecutionStatus = new FutureExecutionStatus();
        // Add task
        return addTask(new Callable<Future<T>>() {
            @Override
            public Future<T> call() {
                return new FutureDelegate<T>(
                        executorService.submit(new Callable<T>() {
                            @Override
                            public T call() throws Exception {
                                try {
                                    // Mark as executed
                                    futureExecutionStatus.setExecuted();
                                    // Run the actual task
                                    return task.call();
                                } finally {
                                    decrementPendingTaskCount();
                                }
                            }
                        }), futureExecutionStatus);
            }
        });
    }

    @Override
    public Future<?> submit(final Runnable task) {
        // Create execution status
        final FutureExecutionStatus futureExecutionStatus = new FutureExecutionStatus();
        // Add task
        return addTask(new Callable<Future<?>>() {
            @Override
            @SuppressWarnings("unchecked")
            public Future<?> call() {
                return new FutureDelegate<Object>(
                        (Future<Object>) executorService.submit(new Runnable() {
                            @Override
                            public void run() {
                                try {
                                    // Mark as executed
                                    futureExecutionStatus.setExecuted();
                                    // Run the actual task
                                    task.run();
                                } finally {
                                    decrementPendingTaskCount();
                                }
                            }
                        }), futureExecutionStatus);
            }
        });
    }

    @Override
    public <T> Future<T> submit(final Runnable task, final T result) {
        // Create execution status
        final FutureExecutionStatus futureExecutionStatus = new FutureExecutionStatus();
        // Add task
        return addTask(new Callable<Future<T>>() {
            @Override
            public Future<T> call() {
                return new FutureDelegate<T>(executorService.submit(
                        new Runnable() {
                            @Override
                            public void run() {
                                try {
                                    // Mark as executed
                                    futureExecutionStatus.setExecuted();
                                    // Run the actual task
                                    task.run();
                                } finally {
                                    decrementPendingTaskCount();
                                }
                            }
                        }, result), futureExecutionStatus);
            }
        });
    }

    private class FutureExecutionStatus {
        private volatile boolean executed;

        public FutureExecutionStatus() {
            executed = false;
        }

        public void setExecuted() {
            executed = true;
        }

        public boolean isExecuted() {
            return executed;
        }
    }

    private class FutureDelegate<T> implements Future<T> {
        private Future<T> future;
        private FutureExecutionStatus executionStatus;

        public FutureDelegate(Future<T> future,
                FutureExecutionStatus executionStatus) {
            this.future = future;
            this.executionStatus = executionStatus;
        }

        @Override
        public boolean cancel(boolean mayInterruptIfRunning) {
            boolean cancelled = future.cancel(mayInterruptIfRunning);
            if (cancelled) {
                // Lock read lock
                readLock.lock();
                // If task was not executed
                if (!executionStatus.isExecuted()) {
                    decrementPendingTaskCount();
                }
                // Unlock read lock
                readLock.unlock();
            }
            return cancelled;
        }

        @Override
        public T get() throws InterruptedException, ExecutionException {
            return future.get();
        }

        @Override
        public T get(long timeout, TimeUnit unit) throws InterruptedException,
                ExecutionException, TimeoutException {
            return future.get(timeout, unit);
        }

        @Override
        public boolean isCancelled() {
            return future.isCancelled();
        }

        @Override
        public boolean isDone() {
            return future.isDone();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T10:13:20.303

为什么不用计数器？例如：

```
private AtomicInteger counter = new AtomicInteger(0); 
```

并在将任务提交到队列之前将计数器加一：

```
counter.incrementAndGet(); 
```

并在任务结束时减一：

```
counter.decrementAndGet(); 
```

支票将类似于：

```
// ...
while (counter.get() > 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T15:32:13.693

You could use an atomic counter to count the submit (like has been said, before actually submitting). Combine this with a semaphore and release it in the `afterExecute` hook that a `ThreadPoolExecutor` provides. Instead of busy-waiting, call `semaphore.acquire( counter.get())` after the first round of jobs has been submitted. But the number of acquires will be too small when calling acquire since the counter may increase later on. You would have to loop the acquire calls, with the increase since the last call as the argument, until the counter does not increase anymore.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T11:23:16.817

由于最后一个任务不知道它是最后一个，我实际上认为如果不记录任务启动和完成时间，就不可能 100% 正确完成这项工作。

如果没记错的话，该`getQueue()`方法会返回一个队列，其中仅包含仍在等待执行的任务，而不是当前正在运行的任务。此外，`getCompletedTaskCount()`是近似的。

我正在考虑的解决方案是这样的，使用像 Eng.Fouad's answer 中的原子计数器和一个[Condition](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Condition.html)来通知主线程唤醒（为简单起见请原谅快捷方式）：

```
public class MyThreadPoolExecutorState {

    public final Lock lock = new ReentrantLock();
    public final Condition workDone = lock.newCondition();
    public boolean workIsDone = false;

}

public class MyThreadPoolExecutor extends ThreadPoolExecutor {

    private final MyThreadPoolExecutorState state;
    private final AtomicInteger counter = new AtomicInteger(0);

    public MyThreadPoolExecutor(MyThreadPoolExecutorState state, ...) {
        super(...);
        this.state = state;
    }

    protected void beforeExecute(Thread t, Runnable r) {
        this.counter.incrementAndGet();
    }

    protected void afterExecute(Runnable r, Throwable t) {
        if(this.counter.decrementAndGet() == 0) {
            this.state.lock.lock();
            try {
                this.state.workIsDone = true;
                this.state.workDone.signal();
            }
            finally {
                this.state.lock.unlock();
            }
        }
    }

}

public class MyApp {

    public static void main(...) {

        MyThreadPoolExecutorState state = new MyThreadPoolExecutorState();
        MyThreadPoolExecutor executor = new MyThreadPoolExecutor(state, ...);

        // Fire ze missiles!
        executor.submit(...);

        state.lock.lock();
        try {
            while(state.workIsDone == false) {
                state.workDone.await();
            }
        }
        finally {
            state.lock.unlock();
        }

    }

} 
```

它可能会更优雅一点（也许只是`getState()`在你的线程池执行程序中提供一个或其他东西？），但我认为它应该完成工作。它也未经测试，因此实施后果自负...

值得注意的是，如果没有要执行的任务，这个解决方案肯定会失败——它会无限期地等待信号。因此，如果您没有要运行的任务，甚至不必费心启动执行程序。

* * *

**编辑：**重新考虑，增加原子计数器应该在提交时发生，而不是在任务执行之前立即发生（因为排队可能导致计数器过早地下降到 0）。重写这些方法可能是有意义的`submit(...)`，也可能是`remove(...)`和`shutdown()`（如果你使用它们）。不过，总体思路保持不变。（但我想得越多，它就越不漂亮。）

我还会检查课程的内部结构，看看您是否可以从中收集任何知识：http: [//hg.openjdk.java.net/build-infra/jdk7/jdk/file/0f8da27a3ea3/src/share/类/java/util/concurrent/ThreadPoolExecutor.java](http://hg.openjdk.java.net/build-infra/jdk7/jdk/file/0f8da27a3ea3/src/share/classes/java/util/concurrent/ThreadPoolExecutor.java)。这个`tryTerminate()`方法看起来很有趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-26T10:03:05.853

Java 7 已经通过其[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)执行器合并了对递归任务的支持。只要任务本身不是太琐碎，它就[非常易于使用并且可以很好地扩展。](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)本质上，它提供了一个受控接口，允许任务等待任何子任务的完成，而不会无限期地阻塞底层线程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-26T10:06:19.057

如果您知道要等待的线程数，并且可以在 CountDownLatch 的帮助下粘贴一行代码来增加每个线程的数量（ [http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ CountDownLatch.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html) ) 它可以解决你的问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-26T09:57:21.867

您链接到的答案中的建议选项之一是使用[CompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)

您可以将主线程中的忙碌等待替换为：

```
while (true) {
    Future<?> f = completionService.take(); //blocks until task completes
    if (executor.getQueue().isEmpty()
         && numTasks.longValue() == executor.getCompletedTaskCount()) break;
} 
```

请注意，`getCompletedTaskCount`它只返回一个近似数字，因此您可能需要找到更好的退出条件。

# iphone - 每次视图控制器处于活动状态时，我都试图打开相机

> ID：14535772
> 
> 赞同：1
> 
> 时间：2013-01-26T09:53:24.130
> 
> 标签：iphone, objective-c

每次加载某个视图控制器时，我都会尝试打开 iPhone 相机。但是它只打开一次，如果我再次加载视图控制器，它不会打开相机。每次进入视图控制器时如何打开相机？

```
 - (void)viewDidLoad {
[super viewDidLoad];

  UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
    [imagePickerController setSourceType:UIImagePickerControllerSourceTypeCamera];
}

// image picker needs a delegate,
[imagePickerController setDelegate:self];

// Place image picker on the screen
[self presentModalViewController:imagePickerController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:58:00.490

用下面的方法写上面的代码

```
- (void)viewDidAppear:(BOOL)animated {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:58:20.197

您可能希望使用`viewDidAppear:`而不是`viewDidLoad`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T09:59:27.140

**编写以下代码：**

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.actionsheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Take Photo with Camera", @"Select from Library", nil];
    [self.actionsheet showInView:self.view];

  self.imgPicker=[[UIImagePickerController alloc] init];
  self.imgPicker.delegate=self;
  self.imgPicker.wantsFullScreenLayout = YES;
  self.imgPicker.allowsEditing=YES;

}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex == 0)
    {
        if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
            self.imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        else
            self.imgPicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        [self presentViewController:self.imgPicker animated:YES completion:nil ];

        self.btnBlure.tag = 102;
    }
    else if (buttonIndex==1)
    {
        self.imgPicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        [self presentViewController:self.imgPicker animated:YES completion:nil ];

        self.btnBlure.tag = 103;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T10:56:39.890

如果你看`viewController life cycle`，你会注意到

> viewDidLoad() 仅在您第一次加载时调用一次，之后当您再次切换到同一个 viewController 时，它不会调用 viewDidLoad。而不是调用 viewDidLoad 它调用`- (void) viewWillAppear:(BOOL)animated`.
> 
> 然后你必须写你的相机打开代码

`- (void) viewWillAppear:(BOOL)animated`方法

现在，无论何时以及多少次您推送或展示您的 viewController，它都会打开相机。

# apache-flex - 如何将 Flex 3.6 项目转换为 Flex 4.6 项目 (SDK)？

> ID：14535779
> 
> 赞同：0
> 
> 时间：2013-01-26T09:54:38.313
> 
> 标签：apache-flex, flex4, flex3

如何将我的 Flex 3.6 项目 SDK 转换为 Flex 4.6 SDK？

我正在做以下方式

```
right click on Project-->Properties-->Flex Compiler-->click on Use Specific SDK radioButton and select 3.6 to 4.6. 
```

什么时候这样做我有很多编译错误？

给我建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:38:40.183

两个 SDK 之间没有直接的转换，因为 Flex4.6 有很多不同，并且不完全向后兼容。

该任务的难易程度取决于您的 Flex3.6 项目使用什么。例如，如果您在 3.6 中使用 Flex 状态，则需要对代码进行大量更改才能将代码移植到 4.6，因为这方面存在很大差异。

# jquery - jQuery 选择器不工作（[attribute~=value]）

> ID：14535794
> 
> 赞同：0
> 
> 时间：2013-01-26T09:57:27.297
> 
> 标签：jquery, ruby-on-rails-3, jquery-selectors

我有很多这样的div

```
<div class="msg_header msg_header_for-219 media data-message="219">
...
</div> 
```

我用

```
$(".msg_header_for-<%= msg.id %>").css("background-color", "red"); 
```

选择一个特定的 id 并将其涂成红色。

我想将其余的 div 涂成白色

所以我有 2 行

```
$("[class~='msg_header_for']").css("background-color", "white");
$(".msg_header_for-<%= msg.id %>").css("background-color", "red"); 
```

据我了解，第一个将选择类名中带有 msg_header_for 的任何类并将其设为白色。第二个将选择一个特定的并将其涂成红色。

红色部分有效。白色的没有。

我不明白为什么第一个选择器不起作用。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:01:24.093

来自 jQuery 文档：

> `[attribute~='value']`选择具有指定属性的元素，其值包含**给定单词**， **由空格分隔**。

因此，您需要`[attribute*='value']`或[寻找](http://api.jquery.com/category/selectors/)合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:03:19.700

> 据我了解，第一个将选择类名中带有 msg_header_for 的任何类

但是您的班级名称是`msg_header_for-###`数字`###`，而不是数字`msg_header_for`。这不会选择带有数字的类名，因为它不是确切的类名，并且`~=`属性选择器仅查找由空格分隔的标记，而不是任何其他符号。换句话说，您的属性选择器`[class~='msg_header_for']`实际上等同于`.msg_header_for`（至少对于 HTML 类）。

如果您需要通过带前缀的类名进行选择，您应该可以使用它来代替：

```
$("[class*='msg_header_for-']").css("background-color", "white"); 
```

对于更复杂的情况，您可以使用[this answer](https://stackoverflow.com/questions/4524412/jquery-selector-to-target-any-class-name-of-multiple-present-starting-with-a-p/4524477#4524477)中的另一个示例，但如果您的标记是可预测的，那么您可能*不需要*如此复杂的选择器：

```
$("[class^='msg_header_for-'], [class*=' msg_header_for-']").css("background-color", "white"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T10:03:16.557

来自：[http ://www.w3.org/TR/CSS2/selector.html#matching-attrs](http://www.w3.org/TR/CSS2/selector.html#matching-attrs)

```
[att~=val] 
```

> 表示具有 att**属性的元素，其值为以空格分隔**的单词列表，其中一个恰好是“val”。如果“val”包含空格，它永远不会代表任何东西（因为单词是用空格分隔的）。如果“val”是空字符串，它也永远不会代表任何东西。

您可以做的是创建一个对所有人都通用的类，然后选择该类。

```
<div class="msg_header msg_header_for-100"></div> 
```

进而：

```
$(".msg_header").css("background-color", "white");
$(".msg_header_for-<%= msg.id %>").css("background-color", "red"); 
```

# java - 如何使用 JPA2.0 将属性映射为 DB 中的 Class 和 Id

> ID：14535795
> 
> 赞同：0
> 
> 时间：2013-01-26T09:57:30.157
> 
> 标签：java, jpa, jpa-2.0

我有一个模型，每个类都扩展实体：

```
@MappedSuperclass
public abstract class Entity implements Serializable {
    private Long id;
    .
    .
    .
} 
```

现在，在我的模型中，每个实体都可以有一个属性：

```
@javax.persistence.Entity
public class Attribute extends Entity {
    private Entity entity;
    private String name;
    private String value;
    .
    .
    .
} 
```

我的问题是：如何映射类 Attribute 的实体属性？我的想法是将此属性存储为 entityClass 和 entityId，但我仍然不知道如何使用 JPA 来实现这一点？

* * *

扩展实体的具体类的示例：

```
@javax.persistence.Entity
public class Ball extends Entity {
    private Set<Attribute> attributes;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "entity")
    public Set<Attribute> getAttributes() {
        return attributes;
    }

    public void setAttributes(Set<Attribute> attributes) {
        this.attributes = attributes;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:26:02.523

在 JPA 中没有简单的方法可以做到这一点。您可以将关系映射为 @Transient 并为 id 和类添加两个 @Basic 映射（可能使用属性 get/set 方法）。然后在模型代码中执行查询。

如果您使用的是 EclipseLink，您可以使用 @VariableOneToOne，

看，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_variableonetoone.htm#CHDDFDGF](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_variableonetoone.htm#CHDDFDGF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:49:49.397

根据您的评论，您需要在映射的超类中建立双向关系。不幸的是，您不能在 JPA 中这样做。原因是 a`MappedSuperClass`不是实体，其字段`MappedSuperClass`属于不同的子类。

来源[JPA 2.0 规范](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec/)(2.11.2)

（我不知道您到底想做什么，但是：）看来您正在尝试坚持持久性模型的元模型。如果您需要阅读它：您可以使用[`EntityManagerFactory.getMetamodel()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html#getMetamodel%28%29)

# python - pynotify 不适用于守护进程

> ID：14535803
> 
> 赞同：1
> 
> 时间：2013-01-26T09:59:00.223
> 
> 标签：python, daemon, pynotify

我正在尝试创建小型通知守护程序

pynotify 在主线程中工作但是 pynotify 在守护进程运行周期中不起作用。在显示方法程序之后只是等待我在这里获取守护进程示例：http: [//www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)

我的守护进程：

```
import pynotify
import sys, time
from daemon import Daemon
class NotifyDaemon(Daemon):
    def run(self):
        i = 9
        while True:
            pynotify.init('icon-summary-body')
            n = pynotify.Notification('Test', 'text ')
            print 'Test from stdout'# OK but only one message
            n.show() # not OK
            time.sleep(1)
if __name__ == "__main__":
    if not pynotify.init('icon-summary-body'):
        print 'PyNotify init failed!'
        exit(2)
    daemon = NotifyDaemon('/tmp/reminderdaemon.pid', stdout='/dev/stdout')
    if len(sys.argv) == 2:
        if 'start' == sys.argv[1]:
            n = pynotify.Notification('Daemon starts!')#this message is ok
            n.show()# OK
            daemon.start()
        elif 'stop' == sys.argv[1]:
            daemon.stop()
        elif 'restart' == sys.argv[1]:
            daemon.restart()
        else:
            print "Unknown command"
            sys.exit(2)
        sys.exit(0)
    else:
        print "usage: %s start|stop|restart" % sys.argv[0]
        sys.exit(2) 
```

操作系统：Ubuntu WM：很棒

有出路吗？PS对不起我的写作错误。非我母语的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:33:19.483

您可以放弃守护程序代码。如果您想要一个在启动时运行的进程，请使用 upstart。您需要做的就是在其中放置一个`/etc/init/my_server.conf`包含以下内容的文件：

```
description "My Server"
author "Dark Daiver dark@dd.com"

start on runlevel [2345]
stop on runlevel [!2345]

respawn

exec python /home/dd/my_server.py 
```

如果进程也死了，那将重生。

因此，如果您的`my_server.py`文件中只有：

```
import pynotify

if __name__ == "__main__":

   pynotify.init('icon-summary-body')
   n = pynotify.Notification('Test', 'text ')

   while True:
        n.show() # not OK
        time.sleep(1) 
```

这将在启动时开始并每秒显示一次通知。

# android - GPS图标在第一次修复后应该消失的地方变得稳定

> ID：14535804
> 
> 赞同：0
> 
> 时间：2013-01-26T09:59:00.603
> 
> 标签：android

通过 GPS 获取位置时出现问题：当 GPS 获取第一个位置时，我的 GPS 图标消失并在 1 分钟后重新出现这是正常的，但在一个设备中，在获得第一个位置后 GPS 图标变得稳定并保持稳定，直到 GPS 超出范围或我必须关闭应用程序，我不明白为什么会这样？

# ruby-on-rails - rails，如果在创建新记录之前存在具有相同列值的记录，则删除记录

> ID：14535810
> 
> 赞同：2
> 
> 时间：2013-01-26T09:59:33.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有一个与照片对象有“has_many”关系的对象人

```
has_many :photos, :foreign_key => 'person_id', :dependent => :destroy 
```

在照片上：

```
belongs_to :person, :foreign_key => 'person_id' 
```

我想做的事。在人员更新期间，如果用户向该人上传了具有相同“种类”（这是照片的属性）的新照片，那么旧种类将被从数据库中删除

例如：如果已存在具有相同 'person_id' 和相同“种类”的照片记录，则正在对上传带有种类“脸”的照片的人执行更新，它将首先被删除（不更新），并且只有然后保存新记录

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T10:06:31.497

您的逻辑足够复杂，无法构建到框架中，您可以在控制器或模型中执行所需的操作，只需找到要替换的照片，如果存在则将其销毁并创建新的

```
photo = person.photos.where(kind: "face").first
photo.destroy if photo

# procede with creating new photo object 
```

# sockets - TCP 客户端的端口和 TCP 服务器的端口是否共享相同的地址空间？

> ID：14535813
> 
> 赞同：3
> 
> 时间：2013-01-26T09:59:39.287
> 
> 标签：sockets, networking, tcp, conflict, port-number

在同一台机器上，如果一个 tcp 客户端占用了 12345 端口，例如客户端连接了 google.com，然后一个 tcp 服务器尝试将它的监听端口绑定到 12345，这是否允许？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:03:53.800

答案是“取决于”（取决于操作系统和套接字选项）。

在具有两个套接字的 Linux`SO_REUSEADDR`上，所描述的确切情况是可能的：

```
$ sudo netstat -panl |grep 12300
tcp        0      0 127.0.0.1:12300         0.0.0.0:*               LISTEN      3591/nc         
tcp        0      0 127.0.0.1:12300         127.0.0.1:25            ESTABLISHED 3547/nc         
tcp        0      0 127.0.0.1:25            127.0.0.1:12300         ESTABLISHED 3548/exim4 
```

...但只有当客户首先到达那里时。当服务器已经在监听时，客户端不能绑定相同的端口（并且永远不会自动分配给客户端 IIRC）。

在 Windows 上，无论有无`SO_REUSEADDR`，*port 都是端口*并且`bind`失败（无论是服务器还是首先执行此操作的客户端）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-26T10:11:49.280

不，端口就是端口。

那说：冲突很少存在，因为通常服务器在客户端请求非指定端口之前启动（即客户端从不设置端口号，他的机器需要一个空闲端口）。

大多数服务器都有预定义的端口。

[http://www.webopedia.com/quick_ref/portnumbers.asp](http://www.webopedia.com/quick_ref/portnumbers.asp) http://www.ietf.org/rfc/rfc1700.txt?number=1700

和范围：

[http://www.tcpipguide.com/free/t_TCPIPApplicationAssignmentsandServerPortNumberRang-2.htm](http://www.tcpipguide.com/free/t_TCPIPApplicationAssignmentsandServerPortNumberRang-2.htm)

如您所见，已注册的端口转到 49151 并从那里保留以供动态使用。因此，客户端端口通常来自服务不应使用的 49152 以上范围。

# ruby-on-rails - 将rails应用程序更改为ajax时如何定义控制器

> ID：14535814
> 
> 赞同：0
> 
> 时间：2013-01-26T09:59:39.277
> 
> 标签：ruby-on-rails, ajax

我有一个运行良好的简单 rails 应用程序，但我想将其更改为使用 ajax。我已经使用 Ajax 升级了其他部分，但我在控制器代码方面遇到了问题。所以：

1) 我已将 remote: true 添加到 form_for。

2) 我的控制器代码有问题。目前它看起来像这样：

```
def create #saving new materials
    @material = Material.new(params[:material])
    @material.user_id = current_user.id if current_user
    if @material.save
      flash[:success] = "Content Successfully Created"
      redirect_to @material
    else
      render 'new'
    end
end 
```

问题是我知道我需要一个 respond_to 块，但我不知道把它放在哪里。我是新手，如果这是一个愚蠢的问题，我深表歉意。

仅供参考 - js 代码很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:25:22.020

像这样的东西应该工作：

```
def create #saving new materials
  @material = Material.new(params[:material])
  @material.user_id = current_user.id if current_user
  respond_to do |format|
    if @material.save
      flash[:success] = "Content Successfully Created"
      format.html { redirect_to @material }
      format.js
    else
      format.html { render 'new' }
      format.js
    end
  end
end 
```

# iphone - 识别键盘事件

> ID：14535822
> 
> 赞同：0
> 
> 时间：2013-01-26T10:00:24.657
> 
> 标签：iphone, xcode

如何识别用户何时按下键盘上的键？它的委托方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:05:49.467

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSLog(@"%@",[NSString stringWithFormat:@"%d", [string length]]);

    if (string.length==0)
    {
        NSLog(@"This is BackSpace");
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:31:36.437

将 textFields 文本设置为零宽度的空格字符`\u200B`。如果您在显示为空的文本字段上按 backspce，它实际上会删除您的空间。然后你可以重新插入空间。但插入符号不移动它仍然位于相同的位置，但它会删除空间。

或者只是你可以检查长度

```
- (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
     NSCharacterSet *nonNumberSet = [[NSCharacterSet characterSetWithCharactersInString:@"stringsss."] invertedSet];

    if (range.length == 1) {
       return string;
    }
    else {
       return ([string stringByTrimmingCharactersInSet:nonNumberSet].length > 0);
    }   
 } 
```

检查这些问题的答案问了很多次。 [一](https://stackoverflow.com/questions/1977934/detect-backspace-in-uitextfield?rq=1)

[二](https://stackoverflow.com/questions/4351358/detect-backspace-in-uitextfield-on-a-blank-textfield?lq=1)

[三](https://stackoverflow.com/questions/12259566/notifications-of-backspace-key-ios?rq=1)

# ios - 在 Core Data 中设置一对多关系的单数侧

> ID：14535827
> 
> 赞同：0
> 
> 时间：2013-01-26T10:00:43.180
> 
> 标签：ios, xcode, core-data, ios6

我有一个小功能，可以通过我的核心数据模型中的关系查询对象。

我已经建立了关系的多方关系。但是，我无法弄清楚如何正确设置关系的单数方面，因为它被认为是`NSSet`，而且我不知道该怎么做。

![数据模型](../Images/349f82dc00333a893cae4d7c216315b2.png)

我尝试将对象放在`NSSet`我想分配给另一个“对多”实体的对象中，但这返回了错误。

我尝试查看文档，发现的唯一示例是多对多关系。

我尝试在 SO 上进行一些搜索，但找不到提出这个特定问题的人。

希望有人能理解我的要求，并帮助我！

**编辑：**

为了帮助大家形象化，我设置了关系的“shindys”端，但现在我试图设置“user”端，正如你所见，这是一个单一的关系。

**编辑：**

在下面@Mundi 的回答之后，我将其作为我的数据模型：

![在此处输入图像描述](../Images/469000a900f1e7d36bd1a76668c677b2.png)

一切都是正确的，我只需要能够获取用户的所有朋友 shindy 以及他们自己的朋友。您可以将其与 Twitter 的主页提要进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:41:17.660

在我看来，您的数据模型设置错误。

一个用户可以有许多消息。一条消息至少有两个用户（发件人和收件人）。我不知道 shindy 是什么，但是按照您的设置方式，一个用户只有一个 shindy，可以在多个用户之间共享。

如果这是正确的，您需要更改数据模型的消息部分并使其成为多对多，或者更好地建立两个描述发送者和接收者的关系。

```
Message                       User
  sender <<-------------------->sentMessages
  receivers <<---------------->>receivedMessages 
```

~~此外，您应该将用户属性“shindys”重命名为“shindy”，因为它只是单数。~~既然我们知道 shindy 是一个聚会，您应该将这种关系更改为多对多。

因此，如果每个用户只有一个 shindy（无论是什么，请说明），要按 shindy 对用户进行排序，您可以使用这样的排序描述符

```
[NSSortDescriptor sortDescriptorWithKey:@"shindy.timePosted" ascending:NO]; 
```

但是，如果您想按 shindy 过滤（如果有多个用户，则所有用户都属于一个 shindy），则必须使用谓词，如下所示

```
[NSPredicate predicateWithFormat:@"ANY shindies.profileID = %@", 
                                                someUser.profileID]; 
```

或使用其他方法来识别 shindy。

# django - Django 与 django 管道 / Amazon s3 / Cloudfront：版本控制资产

> ID：14535828
> 
> 赞同：4
> 
> 时间：2013-01-26T10:00:48.410
> 
> 标签：django, heroku, amazon-s3, assets, amazon-cloudfront

我们最近搬到了 Heroku avec，我们决定将我们的资产存储在 Amazon S3 上，并使用 Cloudfront 发行版。

我使用 Django Pipeline 来压缩/编译我的资产，但我没有设法让它指向正确的版本。当我运行“collectstatic”管理命令时，它运行良好：

后处理“css/compress_profile_school.css”为“css/compress_profile_school.82973855aca5.css”后处理“css/compress_profile.css”为“css/compress_profile.d120536e24f9.css”后处理“css/compress_document.css”为“ css/compress_document.864dd7603769.css ...

但是当我运行该应用程序时，它没有指向正确的版本（它使用没有哈希的版本）。

该应用程序在此处运行：http: [//dev.unishared.com/](http://dev.unishared.com/)

似乎 Django 捆绑的静态文件应用程序也无法指向正确的版本。

每次我推送新的资产版本时，我都必须使我的 Cloudfront 发行版失效，这需要时间..

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:23:50.633

不要 setup `PIPELINE_STORAGE`，除非你真的知道自己在做什么，否则 setup `STATICFILES_STORAGE`。请参阅[存储文档](http://django-pipeline.readthedocs.org/en/latest/storages.html#using-with-other-storages)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:21:02.307

多亏了cyberdelia，我设法让它工作了。

首先，“CachedFilesStorage”仅在您的 DEBUG 设置关闭（= False）时将 hashname 放在文件名中。它在我的生产服务器上运行良好。

从这里开始，“collectstatic”命令正在 S3 上上传正确的文件（名称中带有哈希）。我遇到了第二个问题：缓存的 URL 指向 S3 存储桶，而不是“STATIC_URL”设置中定义的 Cloudfront。我认为这与我的自定义存储使用的 django-storages / boto 有关，它适用于 S3 而不是 Cloudfront：

```
class S3PipelineStorage(PipelineMixin, CachedFilesMixin, StaticStorage):
pass 
```

（静态存储是一个 S3BotoStorage 子类，其位置设置为“静态”）。

现在，我必须找到一种方法让它在 Cloudfront 而不是 S3 上正常工作。

谢谢你的帮助！

**编辑：**

我想通过这篇文章让它工作：[Django-compressor: how to write to S3, read from CloudFront?](https://stackoverflow.com/questions/8688815/django-compressor-how-to-write-to-s3-read-from-cloudfront)

当您定义“自定义域”键时，它将使用 Cloudfront 域而不是 Amazon S3。

我忘了提到我必须将 AWS_QUERYSTRING_AUTH 设置为 False 才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T23:58:24.117

您的情况可能会有所不同，但通常最好不要使用 S3 提供此内容。

摘自[白噪声文档](http://whitenoise.evans.io/en/latest/index.html)

> 我不应该使用 Django-Storages 之类的东西将我的静态文件推送到 S3 吗？
> 
> 不，你不应该。这种方法的主要问题是 Amazon S3 目前无法有选择地向您的用户提供 gzip 压缩的内容。Gzipping 可以显着减少 CSS 和 JavaScript 所需的带宽。但是，尽管当今使用的所有浏览器都可以解码 gzip 压缩的内容，但您的用户可能会使用无法正确处理 gzip 压缩内容的蹩脚的公司代理或防病毒扫描程序。Amazon S3 强制您选择是不向任何人（浪费带宽）或所有人（冒您的网站因某些用户中断的风险）提供压缩内容。
> 
> ……剪……
> 
> 处理静态文件的基于推送的方法的第二个问题是它增加了部署过程的复杂性和脆弱性：特定于存储后端的额外库、额外的配置和身份验证密钥以及必须在特定点运行的额外任务部署以使一切正常工作。

我使用 django-pipelines 在部署时加入和缩小我的内容，使用白噪声来提供静态内容，并使用 Cloudfront CDN 进行缓存。

我遵循[了这个如何](http://whitenoise.evans.io/en/latest/django.html)开始。

这也意味着我只为 CDN 点击付费，而不是 CDN + S3。

# javascript - 网络音频 api：如何检查音频图？

> ID：14535829
> 
> 赞同：3
> 
> 时间：2013-01-26T10:01:06.980
> 
> 标签：javascript, webkit, web-audio-api

Web Audio Api[规范](http://www.w3.org/TR/webaudio/#APIOverview-section)说：

> [...] AudioContext 接口，其中包含表示 AudioNode 之间连接的音频信号图。

我有一个带有 +/- 30 个节点连接节点的项目。
我正在尝试编写测试来检查图表的设置是否正确。因此我需要检查结果图。
但是，我无法访问/检查最终图表，也无法找到有关如何执行此操作的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-12T13:07:22.583

Firefox 有一个 Web Audio 检查器，您可以使用它。在您的开发人员工具中启用它，您可以获得所有连接节点的图表。您甚至可以修改节点的属性，例如双二阶滤波器。

![在此处输入图像描述](../Images/795208fa355ce3eb88348a3747f82ba9.png)

[https://hacks.mozilla.org/2014/06/introducing-the-web-audio-editor-in-firefox-developer-tools/](https://hacks.mozilla.org/2014/06/introducing-the-web-audio-editor-in-firefox-developer-tools/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-25T01:08:44.480

您可以使用[Web Audio Inspector Chrome 扩展](https://chrome.google.com/webstore/detail/web-audio-inspector/cmhomipkklckpomafalojobppmmidlgl)。

[![在此处输入图像描述](../Images/d51ee2b1a73a6ecb7303e13dd73d697b.png)](https://i.stack.imgur.com/KoRYP.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:55:28.823

实际上没有办法直接检查图形；您需要维护自己的指针等来检查图表。这部分是为了鼓励/启用良好的垃圾收集行为。

# air - OSMF AIR（桌面）加载本地视频文件

> ID：14535830
> 
> 赞同：0
> 
> 时间：2013-01-26T10:01:09.207
> 
> 标签：air, desktop, local, osmf

我是 OSMF 的新手。目前，我正在尝试在现有的针对桌面 AIR 的 Flex 项目中使用它（该项目之前一直使用 spark 视频播放器）。

我举了这个例子： http: [//jodieorourke.com/view.php ?id=150&blog=news](http://jodieorourke.com/view.php?id=150&blog=news)

但是，当我尝试使用本地路径加载视频文件时，它不起作用。

如果我使用 flash.filesystem.File.resolvePath() 然后得到一个“app:/(...)”路径，它会在运行时在下面一行崩溃，可能是因为“mediaFactory.createMediaElement()”方法不能理解这条路：

```
 protected function playMedia():void
    {
        if( _mediaPlayer )
        {
            if( _element )
            {
                if( _container.containsMediaElement( _element ) )
                {
                    _container.removeMediaElement( _element );
                }
            }
            _element = _mediaFactory.createMediaElement( new URLResource( _source ) );
            _mediaPlayer.media = _element;
            _container.addMediaElement( _element ); // crash on this line
        }
    } 
```

如果我尝试使用像 'file:///c:/blablabla/bla/bla.flv' 这样的绝对路径，我会得到一个白屏和以下跟踪：

```
*** Security Sandbox Violation ***
Connection to 'file:///c:/blablabla/bla/bla.flv halted - not permitted from app:/blabla.swf 
```

所以，我想知道：是否可以使用 OSMF 加载和播放本地视频文件？

如果是，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:23:08.117

Oups，实际上，似乎以下工作：

```
var myFilePath:String = File.applicationDirectory.nativePath + "/" + myFileName;
mediaFactory.createMediaElement( new URLResource( myFilePath )); 
```

所以 OSMF 能够读取本地文件^^！

# java - 使用字符串使用最大内存

> ID：14535834
> 
> 赞同：1
> 
> 时间：2013-01-26T10:01:53.390
> 
> 标签：java, string, garbage-collection

有没有办法利用系统的最大内存使用`strings`？我`runtime`用来显示可用内存。我试过这段代码：

```
class Mem{
       public static void main(String[] args) {
              System.out.println(Runtime.getRuntime().maxMemory());
              System.out.println(Runtime.getRuntime().totalMemory());
              System.out.println(Runtime.getRuntime().freeMemory());
              String str=new String("Hi");
              for(long i=0;i<1000000;i++){
                     str+="aa";
                     //System.out.println(i);
              }      
              System.out.println(Runtime.getRuntime().freeMemory());
       }
} 
```

但是，`garbage collector`每隔几次迭代就会起作用并释放内存。是否可以让它利用最大内存并在`gc`释放它之前显示可用内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:04:15.047

一种快速分配和持有大量内存的方法是

```
List<byte[]> bytes = new ArrayList<>();
for(int i = 0; i < 1000; i++)
    bytes.add(new byte[10000000]); // 10 MB 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T10:06:02.223

`str+="aa";`每次创建一个新字符串并重新分配`str`，以便旧字符串有资格进行垃圾回收。

但是，如果您迭代得足够多，它将在某个阶段耗尽内存。

您应该将 for 循环放在 try/catch 块中，捕获 OutOfMemoryError 并将您的 print 语句包含在 catch 块中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T10:06:41.277

最后，您的字符串仅包含 200 万个字符。如果你想让你的代码耗尽内存，改变

```
 str += "aa"; 
```

到

```
 str += str; 
```

这将使字符串呈指数增长，即使迭代次数不多，垃圾收集也无济于事。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-26T10:13:50.823

尝试类似的东西

```
 System.out.println(Runtime.getRuntime().maxMemory());
    System.out.println(Runtime.getRuntime().totalMemory());
    System.out.println(Runtime.getRuntime().freeMemory());
    String str = new String(new char[32_000_000]);
    System.out.println(Runtime.getRuntime().totalMemory());
    System.out.println(Runtime.getRuntime().freeMemory()); 
```

请注意，`str += "aa"`这太慢了，您可能会得出错误的结论。在您的情况下，GC 无法释放任何内存

# bash - bash shell 加减法

> ID：14535836
> 
> 赞同：0
> 
> 时间：2013-01-26T10:02:08.803
> 
> 标签：bash, shell

我有一个文本文件。

文本文件中的信息是

```
Book1:Author1:10.50:50:5
Book2:Author2:4.50:30:10 
```

第一个是书名，第二个是作者名，第三个是价格，第四个是数量，第五个是销量。

我正在尝试更新 noCpySold。所以当我这样做时，可用数量（第 4 列）会下降，而销售数量（第 5 列）会上升。

```
read -p $'No of copies sold: ' noCpySold

sed -re "s/${Title}:${Author}:([^:]+):([^:]+)([^:]+)/${Title}:${Author}:\1:\1-${noCpySold}:\1+$noCpySold/g" BookDB.txt > tempBook.txt
mv -f tempBook.txt BookDB.txt 
```

我测试了这段代码，但减法和加法没有更新..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:03:15.663

```
awk -F: 'BEGIN {OFS=":"} { $4--; $5++; print $0}' filename >newfile
 mv newfile filename 
```

这是一个 awk 示例。编辑：

```
 num_sold=13
    awk -F: -v sold=$num_sold 'BEGIN {OFS=":"} { $4-=sold; $5+=sold; print $0}' filename >newfile
     mv newfile filename 
```

# django - django admin 链接到 OneToOneField

> ID：14535837
> 
> 赞同：1
> 
> 时间：2013-01-26T10:02:25.600
> 
> 标签：django, django-admin

我有以下型号：

```
class OrderData(models.Model):
    data = models.TextField()

class Order(models.Model):
    order_data = models.OneToOneField(OrderData) 
```

在我的订单详细信息页面的管理界面中，我需要 OneToOne 字段作为链接而不是下拉列表。

我试图通过编写自定义 OrderAdmin 来解决它：

```
class OrderAdmin(admin.ModelAdmin):
    readonly_fields = ('order_data',)

    def order_data(self, instance):
        return "<a href=\"/\">index</a>"

    address_report.short_description = "Order_data"
    address_report.allow_tags = True

admin.register(Order, OrderAdmin) 
```

但似乎它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:43:24.840

定义一个小部件：

```
class OrderDataLinkWidget(Widget):
    def render(self, name, value, attrs=None):
        url ="/admin_url_to_use/%s"%value #or use reverse
        return "<a href='%s'>order data</a>"%(url, ) 
```

在 admin.py 中使用 formfield_overrides：

```
class OrderAdmin(admin.ModelAdmin):
    formfield_overrides = {
        models.OneToOneField: {'widget': OrderDataLinkWidget},
    } 
```

或者，如果您有更多 OneToOneField，请定义自定义管理表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:35:35.620

这一个，但我使用gratelli应用程序：

```
class BankAccountAdmin(admin.ModelAdmin):
    raw_id_fields = ('user', 'bank')
    related_lookup_fields = { 'user': ['user'], 'bank': ['bank'],} 
```

如果您不想使用它，您可以在 forms.py 中而不是在 admin.py 中对其进行编码

# java - 如何将 1 亿行加载到内存中

> ID：14535846
> 
> 赞同：4
> 
> 时间：2013-01-26T10:03:34.240
> 
> 标签：java, sql, jdbc, out-of-memory

我需要将 1 亿多行从 MySQL 数据库加载到内存中。我的 java 程序失败，`java.lang.OutOfMemoryError: Java heap space` 我的机器中有 8GB RAM，并且在我的 JVM 选项中给出了 -Xmx6144m。

这是我的代码

```
public List<Record> loadTrainingDataSet() {

    ArrayList<Record> records = new ArrayList<Record>();
    try {
        Statement s = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY, java.sql.ResultSet.CONCUR_READ_ONLY);
        s.executeQuery("SELECT movie_id,customer_id,rating FROM ratings");
        ResultSet rs = s.getResultSet();
        int count = 0;
        while (rs.next()) { 
```

知道如何克服这个问题吗？

* * *

### 更新

我遇到了[**这篇文章**](https://stackoverflow.com/questions/1080852/fastest-way-to-iterate-through-large-table-using-jdbc)，并根据下面的评论更新了我的代码。似乎我能够以相同的 -Xmx6144m 数量将数据加载到内存中，但这需要很长时间。

这是我的代码。

```
...
import org.apache.mahout.math.SparseMatrix;
...

@Override
public SparseMatrix loadTrainingDataSet() {
    long t1 = System.currentTimeMillis();
    SparseMatrix ratings = new SparseMatrix(NUM_ROWS,NUM_COLS);
    int REC_START = 0;
    int REC_END = 0;

    try {
        for (int i = 1; i <= 101; i++) {
            long t11 = System.currentTimeMillis();
            REC_END = 1000000 * i;
            Statement s = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
                    java.sql.ResultSet.CONCUR_READ_ONLY);
            s.setFetchSize(Integer.MIN_VALUE);
            ResultSet rs = s.executeQuery("SELECT movie_id,customer_id,rating FROM ratings LIMIT " + REC_START + "," + REC_END);//100480507
            while (rs.next()) {
                int movieId = rs.getInt("movie_id");
                int customerId = rs.getInt("customer_id");
                byte rating = (byte) rs.getInt("rating");
                ratings.set(customerId,movieId,rating);
            }
            long t22 = System.currentTimeMillis();
            System.out.println("Round " + i + " completed " + (t22 - t11) / 1000 + " seconds");
            rs.close();
            s.close();
        }

    } catch (Exception e) {
        System.err.println("Cannot connect to database server " + e);
    } finally {
        if (conn != null) {
            try {
                conn.close();
                System.out.println("Database connection terminated");
            } catch (Exception e) { /* ignore close errors */ }
        }
    }
    long t2 = System.currentTimeMillis();
    System.out.println(" Took " + (t2 - t1) / 1000 + " seconds");
    return ratings;
} 
```

加载前 100,000 行需要 2 秒。加载第 29 个 100,000 行需要 46 秒。我在中间停止了这个过程，因为它花费了太多时间。这些时间是可以接受的吗？有没有办法提高这段代码的性能？我在 8GB RAM 64 位 Windows 机器上运行它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T10:09:34.767

一亿条记录意味着每条记录最多可能占用 50 个字节以适应 6 GB + 一些额外空间用于其他分配。在 Java 中 50 个字节算不了什么；a`Object[]`每个元素占用 32 个字节。您必须找到一种方法来立即使用`while (rs.next())`循环中的结果，而不是完全保留它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T10:25:46.370

> 问题是我在 s.executeQuery( 行它自己得到 java.lang.OutOfMemoryError

您可以将查询拆分为多个：

```
 s.executeQuery("SELECT movie_id,customer_id,rating FROM ratings LIMIT 0,300"); //shows the first 300 results
    //process this first result
    s.executeQuery("SELECT movie_id,customer_id,rating FROM ratings LIMIT 300,600");//shows 300 results starting from the 300th one
    //process this second result
    //etc 
```

当找不到更多结果时，您可以做一段时间停止

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-05T13:53:13.610

您可以调用`stmt.setFetchSize(50);`并`conn.setAutoCommitMode(false);`避免将整个 ResultSet 读入内存。

这是文档所说的：

根据光标获取结果

默认情况下，驱动程序一次收集查询的所有结果。这对于大型数据集可能很不方便，因此 JDBC 驱动程序提供了一种将 ResultSet 基于数据库游标并仅获取少量行的方法。

少量的行缓存在连接的客户端，当用尽时，通过重新定位游标来检索下一个行块。

笔记：

*   基于游标的结果集不能在所有情况下使用。有许多限制会使驱动程序默默地退回到一次获取整个 ResultSet。
*   与服务器的连接必须使用 V3 协议。这是服务器 7.4 及更高版本的默认设置（仅受支持）。-
*   连接不得处于自动提交模式。后端在事务结束时关闭游标，因此在自动提交模式下，后端将在可以从中获取任何内容之前关闭游标。-
*   必须使用 ResultSet 类型创建语句 `ResultSet.TYPE_FORWARD_ONLY`。这是默认设置，因此无需重写代码即可利用这一点，但这也意味着您不能向后滚动或以其他方式在 ResultSet 中跳转。-
*   给出的查询必须是单个语句，而不是用分号串在一起的多个语句。

**示例**：设置 fetch`size`以打开和关闭游标。

将代码更改为游标模式就像将语句的获取大小设置为适当的大小一样简单。将提取大小设置回 0 将导致所有行都被缓存（默认行为）。

```
Class.forName("com.mysql.jdbc.Driver");
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/test?useCursorFetch=true&user=root");
// make sure autocommit is off 
conn.setAutoCommit(false); 
Statement st = conn.createStatement();

// Turn use of the cursor on. 
st.setFetchSize(50);
ResultSet rs = st.executeQuery("SELECT * FROM mytable");
while (rs.next()) {
   System.out.print("a row was returned.");
} 
rs.close();

// Turn the cursor off. 
st.setFetchSize(0);
rs = st.executeQuery("SELECT * FROM mytable");
while (rs.next()) {
   System.out.print("many rows were returned.");
} 
rs.close();

// Close the statement. 
st.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-03T06:41:27.840

您将不得不重新设计并将数据分块加载到内存中。

例子

1）使用适当的 SQL（sql 只选择 100 万条）从 DB 加载前 100 万条记录并处理 2）加载另一个类似的块。

单独的 setFetchSize 并不能解决这个问题。

# web-services - 使用 Web 服务更新自定义共享点列表中的列

> ID：14535851
> 
> 赞同：4
> 
> 时间：2013-01-26T10:04:09.847
> 
> 标签：web-services, sharepoint

我正在尝试使用 Web 服务更新自定义共享点列表的几列。我正在尝试使用 Lists Web 服务的 UpdateListItems() 来实现这一点。我确实得到了成功代码，即“0x00000000”，但是当我检查列表中的值时，我发现它们都更新了，但只有一个。流程如下：

*   使用 List Web 服务的 AddList() 创建自定义列表。
*   更新列表以设置四个自定义字段。
*   更新视图。

现在，如果我以编程方式更新列表中的项目，则 4 列中的 3 列会更新，但第四列不会更新。奇怪的是我也得到了第四列的成功代码。我不确定我哪里出错了。我已经比较了来自 msdn 链接的代码，它们都是一样的。我很确定代码中没有问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:48:24.607

我最近遇到了类似的问题。问题是我试图更新列表中的只读字段。请检查以确保您正在更新的任何列表/列表字段都未标记为只读。如果是这样，请在触发更新之前更新列表字段以将 ReadOnly 设置为 false。希望这可以帮助。

# html - 表格边框左下角

> ID：14535856
> 
> 赞同：10
> 
> 时间：2013-01-26T10:05:25.523
> 
> 标签：html, html-table

我需要按照以下示例创建边框。

HTML：

```
<table width="770">
  <tr>
    <td>picture (border only to the left and bottom ) </td>
    <td>text</td>
  </tr>
  <tr>
    <td>text</td>
    <td>picture (border only to the left and bottom) </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-26T10:09:42.550

您可以使用以下样式：

```
style="border-left: 1px solid #cdd0d4;"  
style="border-bottom: 1px solid #cdd0d4;"
style="border-top: 1px solid #cdd0d4;"
style="border-right: 1px solid #cdd0d4;" 
```

有了这个你想要你必须使用

```
<td style="border-left: 1px solid #cdd0d4;border-bottom: 1px solid #cdd0d4;"> 
```

或者

```
<img style="border-left: 1px solid #cdd0d4;border-bottom: 1px solid #cdd0d4;"> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T10:09:56.573

给一个班级`.border-lb`，给这个CSS

```
.border-lb {border: 1px solid #ccc; border-width: 0 0 1px 1px;} 
```

和 HTML

```
<table width="770">
  <tr>
    <td class="border-lb">picture (border only to the left and bottom ) </td>
    <td>text</td>
  </tr>
  <tr>
    <td>text</td>
    <td class="border-lb">picture (border only to the left and bottom) </td>
  </tr>
</table> 
```

### 截屏

![](../Images/e64a8b40b5f61b791bdc687764aa0ba4.png)

### 小提琴：http: [//jsfiddle.net/FXMVL/](http://jsfiddle.net/FXMVL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:14:50.253

您需要使用此处所示的边框属性：[jsFiddle](http://jsfiddle.net/pAzRF/)

HTML：

```
<table width="770">
    <tr>
        <td class="border-left-bottom">picture (border only to the left and bottom ) </td>
        <td>text</td>
    </tr>
    <tr>
        <td>text</td>
        <td class="border-left-bottom">picture (border only to the left and bottom) </td>
    </tr>
</table>` 
```

CSS：

```
td.border-left-bottom{
    border-left: solid 1px #000;
    border-bottom: solid 1px #000;
} 
```

# android - Android自定义微调器需要更改背景颜色

> ID：14535857
> 
> 赞同：1
> 
> 时间：2013-01-26T10:05:47.907
> 
> 标签：android, sdk, spinner

我知道这个主题之前已经讨论过很多次了，但我很难让它与我的自定义微调器一起工作。

因为我有一个自定义微调器设置来按照本教程显示图形和文本： [http ://android-er.blogspot.sk/2010/12/custom-arrayadapter-for-spinner-with.html](http://android-er.blogspot.sk/2010/12/custom-arrayadapter-for-spinner-with.html)

这很好，但是如果我使用 java mypsinner.setBackground(COLOR.LTGRAY) 中的微调器引用更改背景颜色，然后对自定义行执行相同的操作， row.setBackground(COLOR.LTGRAY) 它确实将两者都更改为相同的颜色，但随后我松开了微调器效果，它看起来是 2D 而不是平坦的，并且下拉箭头也消失了。我必须为此做一个图形吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:16:37.053

您会丢失这些细节，因为默认微调器背景是带有阴影、斜角和箭头等的详细九色块图像，而不是颜色。

# r - 如何获取列表的子集？

> ID：14535860
> 
> 赞同：0
> 
> 时间：2013-01-26T10:05:59.297
> 
> 标签：r

> **可能重复：**
> [在矩阵 R 子集中选择行的一些值](https://stackoverflow.com/questions/12529625/select-some-values-of-a-row-in-a-matrix)
> [具有多个键的数据帧](https://stackoverflow.com/questions/14465996/r-subset-a-data-frame-with-multiple-keys)

说我有一个清单

> > 测试

```
 V1    V2   V3
1  1   one  uno
2  2   two duos
3  3 three tres
4  4 four cuatro 
```

和一个向量`a<-c("one","three")`。

我想获取列表的子集，`test`其中第二列的元素来自 vector `a`。

所以在这种情况下，答案应该是这样的，

```
 V1    V2   V3
1  1   one  uno
2  3 three tres 
```

我想要一些 `test[test[,2]=="one",]`符合多个值的东西。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:23:51.927

您正在寻找的是`%in%`（尽管您也可以使用`match`and `subset`）。见下文。

```
df <- data.frame(V1=1:4, V2=c("one", "two", "three", "four"), stringsAsFactors = FALSE)
fil <- c("one", "three")

> df
#   V1    V2
# 1  1   one
# 2  2   two
# 3  3 three
# 4  4  four

> fil
# [1] "one"   "three"

# subset df by column V2 using fil

# using %in%
df[df$V2 %in% fil, ]

# using subset
subset(df, V2 %in% fil)

# using match
df[!is.na(match(df$V2, fil)), ] # (or) 
df[which(!is.na(match(df$V2, fil))), ]

# all gives
#   V1    V2
# 1  1   one
# 3  3 three 
```

# c++ - 浮点数和无符号字符数组之间的联合？

> ID：14535865
> 
> 赞同：3
> 
> 时间：2013-01-26T10:06:43.337
> 
> 标签：c++, floating-point

我正在解析一个字节流，一旦接收到它，就会形成一个`uint8`. 事先知道数组内容应该是什么，可以是整数、字符串或浮点数。所需要的只是将数据重新解释为这些类型。不过，浮动引起了我的一些担忧。

**我的问题**是，以下结构是否会按预期工作而不会遇到任何意外？（内存别名、填充、字节序等）如果没有，用尽可能少的代码实现这一目标的最佳方法是什么？

```
union BytesToFloat{
    float f;
    uint8 bytes[4];
} 
```

作为背景，此数据来源于保存数据，因此写入数据的计算机可能与读取数据的计算机不同。

*编辑*

在阅读了关于字节序的评论之一之后，这种结构和帮助功能是否更合适，或者字节序仍然是一个问题（或者除此之外还有其他问题）

```
union IntToFloat{
    float f;
    uint32 i;
};

uint32 CharToLong(unsigned char * c){
    uint32 val = c[0];
    val <<= 8;
    val |= c[1];
    val <<= 8;
    val |= c[2]; 
    val <<= 8;
    val |= c[3];
    return val;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:54:05.593

您可以`union`通过`4`将`sizeof(float)`.

但是，您必须面对网络上的其他问题。无法保证连接的两端都使用 IEEE 754 浮点格式（例如，IBM 的 zSeries 大型机）。也不能保证双方使用相同的字节顺序（英特尔架构使用小端，大多数其他架构使用大端）。您需要知道源计算机和目标计算机的字节顺序才能正确解释数据（但是 IBM 用于与 SQL DBMS 通信的 DRDA 协议就是这样工作的，采用“接收者正确”约定）。

字节顺序和字节顺序问题是实际问题；除非您希望使用大型机系统，否则浮点格式往往不是问题（它们往往是 IEEE 754 的顽固分子，主要是因为它们的格式在 IEEE 754 标准化之前就已经确定了）。

通常，传送数据的最佳方式是使用纯[文本](http://www.catb.org/~esr/writings/taoup/html/textualitychapter.html)格式。它具有易于调试和避免许多（但不是全部）数字表示的难题的优点。但是，如果您的主要协议是二进制的，那么将其更改为浮点文本会看起来很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:18:35.087

是的，可能会有惊喜。在两端。

该代码将如何工作将在读写时定义。

从好的方面来说，传输介质（网络或磁盘）通常非常慢，以至于添加代码以使读/写具有确定性不会对性能产生重大影响。

另一个好处是代码很少需要在任意平台上运行。确保你正在做的事情在你支持的每个平台上都有效，并且你很好。

# java - Java中的特定字符串输入

> ID：14535866
> 
> 赞同：0
> 
> 时间：2013-01-26T10:06:48.510
> 
> 标签：java, string, input, syntax-error

我正在制作一个程序，要求输入一个 5 位字符串，其中包含一个字母，然后是一个“-”和 3 个数字。（例如：A-123）我正在使用带有分隔符“-”的拆分来拆分字母和数字，但如果输入与确切的格式不同，整个事情就会崩溃。所以我的问题是如何阻止任何不符合特定格式的输入。

到目前为止我使用的代码：

```
public Room(String Combo) {

   if (Combo.length() == 5){
      String delimiter = "-";
      String[] temp = Combo.split(delimiter);
      long FloorRoomNo = Integer.parseInt(temp[1]);
      long Floor = FloorRoomNo/100;
      long RoomNo = FloorRoomNo/100;

      this.Floor = (int)Floor;
      this.RoomNo = (int)RoomNo;
      Buildning = temp[0]:
   }else{
      System.err.println("Wrong input length");
      System.exit(-1);
   }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T10:08:55.750

您可以使用`String#matches`方法来检查给定的输入是否处于特定模式。该方法需要一个正则表达式。你可以像这样使用它： -

```
if (combo.matches("[a-zA-Z]-\\d{3}")) {
    // valid format
} 
```

`if`如果您的输入字符串是您描述的形式，上述条件将返回 true。IE： -

```
[a-zA-Z]   // Start with a letter
 -         // Followed by a hyphen
\\d{3}     // And then 3 digits. 
```

请关注`Java Naming Convention`。以小写字母开头命名变量。

* * *

正如评论中指出的，如果您使用上述方法，您甚至不需要拆分。您可以使用`capture groups`. 因此，将上述模式更改为： -

```
([a-zA-Z])-(\\d{3}) 
```

你的字母和数字分别在*第 1*组和*第 2 组*。但是你必须在这里使用`Pattern`和`Matcher`类。

# python - django - 已安装的应用程序 - 错误：没有名为 apps.finance 的模块

> ID：14535868
> 
> 赞同：0
> 
> 时间：2013-01-26T10:07:24.550
> 
> 标签：python, django

我想更改我的应用程序在哪里的目录。我的 django 项目在这个目录中：

```
'/home/user/djcode/dev/myproject' 
```

当我开始这个项目时，我的应用程序在这个目录中：

```
'/home/user/djcode/dev/myproject' 
```

Aslo 在 settings.py 我添加了这一行（在 INSTALLED_APPS 中）：

```
'finance', 
```

一切正常。

后来我想更改我的应用程序目录，所以我将我的应用程序移动到：

```
'/home/user/djcode/dev/myproject/myproject/apps' 
```

在 settings.py 中，我将“财务”更改为这一行（在 INSTALLED_APPS 中）：

```
'myproject.apps.finance' 
```

当我运行 python manage.py runserver 命令时，我得到了这个错误：

```
Error: No module named apps.finance 
```

我知道我可以直接将路径添加到我的应用程序所在的位置，所以我认为它会解决它。但是有没有办法在不将其添加到 .pth 文件中的情况下指定此路径？

我的意思是如果 python 知道`/home/user/djcode/dev/myproject`为什么它找不到路径`/home/user/djcode/dev/myproject/myproject/apps`？

也许我只是在 installed_apps 中错误地指定了？

我也在这个项目中使用了 virtualenv，所以 django 是使用 virtualenv 安装的。但我认为它不相关，因为它找到了我的项目所在的位置，但如果它们位于较低的目录级别，则无法找到应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:20:54.010

或者它可能是循环导入？或者您的应用程序目录中可能没有**init** .py？

# android - 如何在 ListView 中显示 SQLite 查询的输出

> ID：14535869
> 
> 赞同：0
> 
> 时间：2013-01-26T10:07:43.207
> 
> 标签：android, sqlite, android-listview

我正在学习安卓。我正在尝试学习 SQLite 数据库，但我遇到了问题。我无法读取 Cursor 的输出并将其显示在 ListView 中。这是我的 MainActivity.java 代码-

```
package com.example.addname;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {

    Button b1, b2;
    EditText t1;
    ListView lv1;
    SQLiteDatabase db;
    Cursor c;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        t1 = (EditText) findViewById(R.id.editText1);
        lv1 = (ListView) findViewById(R.id.listView1);

        db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
        db.execSQL("CREATE TABLE IF NOT EXISTS Names(Name VARCHAR)");
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                if (t1.getText().toString().equals("")) {
                    t1.setText("Enter Name");
                }

                else {
                    String input = t1.getText().toString();
                    db.execSQL("INSERT INTO Names VALUES(" + "'" + input + "'"
                            + ")");
                }

            }
        });

        b2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                c = db.rawQuery("SELECT * FROM Names",null);
                int count = c.getCount();
                String values[] = new String[count+1];
                int i = 0;

                do
                { 
                    values[i]= c.getString(c.getColumnIndex("Name"));
                    i++;
                }

                while(c.moveToNext());

                ArrayAdapter<String> adapter = new ArrayAdapter<String>(getBaseContext(),
                          android.R.layout.activity_list_item, android.R.id.text1,values);

                lv1.setAdapter(adapter);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是 activity_main.xml 代码 -

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="25dp"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:text="@string/button1" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button2" >
    </ListView>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_below="@+id/button1"
        android:layout_marginTop="24dp"
        android:text="@string/button2" />

</RelativeLayout> 
```

当我点击“显示”按钮时，我收到错误“不幸的是 addname 已停止”（addname 是我的项目名称）。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:34:21.610

```
 c = db.rawQuery("SELECT * FROM Names",null);
            int count = c.getCount();
            String values[] = new String[count+1];
            int i = 0;

   while(c.moveToNext())

            { 
                values[i]= c.getString(c.getColumnIndex("Name"));
                i++;
            }

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(getBaseContext(),
                      android.R.layout.activity_list_item, android.R.id.text1,values);

            lv1.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:25:25.840

使用[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)而不是 ArrayAdapter。

```
c = db.rawQuery("SELECT * FROM Names",null);

while(c.isAfterLast() == false){
        c.moveToNext();
}

ListAdapter adapter = new SimpleCursorAdapter(this,
                android.R.layout.activity_list_item,
                c,
                new String[] {"Name"},
                new int[] {android.R.id.text1},0);

lv1.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:30:32.207

用这个替换 do...while 部分

```
while(c.moveToNext())
 {
      values[i]= c.getString(c.getColumnIndex("Name"));
       i++;
  } 
```

# psycopg2 - 在 Mountain Lion 上安装 Psycopg2 适配器

> ID：14535870
> 
> 赞同：0
> 
> 时间：2013-01-26T10:07:52.647
> 
> 标签：psycopg2, postgresql-9.2

我是一个尝试学习 django 的初学者。我想安装 Postgresql。

```
Anurags-MacBook-Pro:psycopg2-2.4.6 anurag_prasad$ python setup.py install
running install
running build
running build_py
running build_ext
building 'psycopg2._psycopg' extension
clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/psycopgmodule.c -o build/temp.macosx-10.8-intel-2.7/psycopg/psycopgmodule.o
unable to execute clang: No such file or directory
error: command 'clang' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:13:23.300

您需要安装[Xcode 命令行工具](https://developer.apple.com/downloads/index.action?name=Command%20Line%20Tools)，以便`clang`编译器可用于编译 pyscopg2 模块的本机部分。

# python - 使用 numpy.ma 屏蔽空白值

> ID：14535871
> 
> 赞同：1
> 
> 时间：2013-01-26T10:08:11.490
> 
> 标签：python, numpy

我无法`numpy.ma`处理我的数据。我确定我以前用它来屏蔽空白值，但不知道如何。这是一段代码，显示了我遇到的问题。

```
import numpy as np
import numpy.ma as ma

x = np.array([[0.0, 1.1, '', 2.2, ''],[3.3,'', 4.4, '', 5.5]])
for index, value in np.ndenumerate(x):
    if value == '':
        x[index] = None
x = ma.masked_values(x, None)
print x 
```

这打印：

```
[['0' '1' 'N' '2' 'N']
 ['3' 'N' '4' 'N' '5']] 
```

我想要做的是得到一个被掩盖的浮点数组，其中任何缺失的值都被掩盖了。决赛`print`应产生：

```
[[0.0 1.0 -- 2.0 --]
 [3.0 -- 4.0 -- 5.0]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:12:06.973

如果您用 替换空字符串`NaN`，则以下内容将起作用：

```
In [19]: x = np.array([[0.0, 1.1, np.nan, 2.2, np.nan],[3.3,np.nan, 4.4, np.nan, 5.5]])

In [20]: m = ma.masked_array(x, np.isnan(x))

In [21]: print(m)
[[0.0 1.1 -- 2.2 --]
 [3.3 -- 4.4 -- 5.5]] 
```

更改`''`to最简单的地方`np.nan`是在将它们放入之前`np.array`。

# xpath - 带有 XPath 扩展的 WSO2 Developer Studio

> ID：14535872
> 
> 赞同：1
> 
> 时间：2013-01-26T10:08:20.157
> 
> 标签：xpath, wso2, wso2esb, synapse, wso2developerstudio

我们在 WSO2 ESB 4.5.1 中使用额外的 XPath 变量扩展了 Apache Synapse。在 synapse.properties 中，我们指向新的 XPath 类：synapse.xpath.var.extensions=com.avintis.esb.xpath.CountXpathVariableResolver,com.avintis.esb.xpath.UUIDXpathVariableResolver

**从 wso2server.bat 开始，** 一切正常，上述扩展正常工作。

**但是从 eclipse 的 Developer Studio**开始，服务器可以正常启动并且可以正常工作，但是我们的**XPath 扩展无法识别并且无法正常工作**。

我刚刚看到服务器启动参数确实包含我们的库和类，以及正确的 synapse.properties 和声明。那么从eclipse开始这里可能有什么问题？

环境：WSO2-ESB 4.5.1，Developer Studio 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:14:43.787

要使用 Developer Studio 修复错误，请按照以下说明进行操作。

1.  如果您从 Eclipse 运行 ESB 服务器实例，请停止它。

2.  在 Eclipse 的 Servers 视图中双击 ESB Server，它将打开 Eclipse Server Overview 编辑器

3.  单击“Open Launch Configuration”链接按钮，它将打开 Eclipse Server Launch 配置对话框。

4.  切换“Arguments”选项卡并添加`-Dconf.location="<ESB_HOME>/repository/conf"`到 VM Argements 部分。确保将该`<ESB_HOME>`部分替换为您的实际服务器位置。例如：`-Dconf.location="/home/harshana/wso2esb-4.5.1/repository/conf"`

5.  在 Dev Studio 中启动 ESB 实例并尝试变量

现在您应该可以毫无问题地使用它了。

/哈莎娜

# sql-server - ssis xml 配置 - 配置覆盖包 - ssis 会在你不告诉它的情况下更改配置吗？

> ID：14535873
> 
> 赞同：2
> 
> 时间：2013-01-26T10:08:26.647
> 
> 标签：sql-server, ssis

我昨天工作了一整天，试图消除我的 XML 配置文件中不正确的连接字符串的影响。我浏览了每个包，删除了错误的连接管理器并使用正确的服务器名称重新添加它。每次我这样做时，我都会通过删除它来明确更新配置，然后使用覆盖选项重新添加它。但后来我犯了一个可怕的错误，即拉起父包，它使用了不同的 xml 配置，它再次将连接管理器更新为错误的服务器名称。

我将配置从父包中提取出来并再次开始修复子包。修复了子包后，我从其现在的 xml 配置免费父级中调用了其中一个。看到它再次连接错误的服务器，我感到非常震惊和失望。

这怎么可能发生？

我还通过 wordpad++ 注意到配置文件已更新。我的假设是，当父级的配置更新连接管理器时，SSIS**会自动更新现在更正的配置文件**并再次破坏它。

当 SSIS 的组件发生变化时，它真的会自动更新配置文件吗？真的是双向的吗？如果是这样，它的行为完全令人困惑——比如乒乓球，或者把手指放在堤坝里。我准备建议我们永远不要使用 XML 配置！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:56:40.373

**更新：**我错了。请参阅下面的评论。

所以我认为你对 SSIS 中的配置如何工作有一个（可能有两个）基本的误解。

使连接管理器可配置的标准过程是：

1.  创建连接管理器，将其指向您在 BIDS 中的本地/开发连接。
2.  为连接管理器的 ConnectionString、ServerName 和 DatabaseName 属性创建一个配置。（如果是文件，添加filePath等）
3.  在随后的包中，只需创建相同的连接管理器，添加配置，将其指向您现有的配置文件，然后选择“Reuse Existing ...”（**而不是“Overwrite”**，这会丢弃您在步骤 2 中所做的所有工作。 )
4.  将包部署到服务器，并将 XML 文件部署到服务器上的同一本地位置。
5.  修改服务器上的 XML 文件以指向该服务器的正确数据库连接（开发、登台、生产等）
6.  当您在该服务器上运行包时，它将在运行时使用该 XML 文件，并在运行时使用服务器各自的数据库。
7.  完全可选：我们实际上为每个数据源使用一个 XML 文件并明确命名连接管理器。这意味着我们可以通过连接管理器的命名约定“保证”我们所有需要使用某个数据库的包都访问完全相同的数据库。我们将这些数据源存储在项目级别，然后从数据源创建新连接，然后添加具有匹配名称的配置，“重用现有”，点击确定，一切就绪。

所以你有一个误解是删除连接管理器。配置文件不会“更新”连接管理器。连接管理器的属性是**在设计时**设置的，并且是您在 BIDS 中双击它时看到的任何内容。这些被硬编码到包中（查看代码并自己查看）并且只能在连接管理器编辑器本身中进行更改。因此，没有“故障”连接管理器之类的东西，删除它也没有任何意义——只要在编辑器中测试连接时获得“成功”，该连接管理器就可以使用。

您的第二个误解是配置文件是如何工作的。**配置文件只是在运行时**用自己的值替换包**执行**中的属性。它根本不修改包。相反，SSIS 包本身永远不会修改配置文件。这只能使用 BIDS 流程之外的文本编辑器**或**通过 BIDS 配置编辑器来完成 - 我相信这是发生的。

 ****我无法通过您提供的一般时间表来准确判断，但您使用“覆盖”选项表明您基本上允许最后发生的任何配置编辑“赢得”设置所有文件将使用的值的特权对于那个特定的连接。

无论如何，我会（正如您可能猜到的那样）完全推荐使用 XML 配置，因为它们（或者曾经是，我认为！）非常简单，并且在我看来是多层 SSIS 环境最简单的部署选项。****

# ruby-on-rails - Rails 3.1、Postgres 9.1.4、hstore 未知操作错误

> ID：14535874
> 
> 赞同：3
> 
> 时间：2013-01-26T10:08:27.197
> 
> 标签：ruby-on-rails, postgresql, hstore

我正在尝试将 hstore 数据列添加到现有的 STI 模型。

类似于[Postgres HStore Errors - Unknown Operator](https://stackoverflow.com/questions/11962436/postgres-hstore-errors-unknown-operator)但据我所知，我已经安装了 hstore 扩展。我已经删除了数据库并从迁移中重建它而没有错误，但规范仍然失败。

```
Mac OS X 10.8.2
Rails 3.1.10
psql (PostgreSQL) 9.1.4 
```

用户.rb

```
has_many :targets

def complete_targets
  targets.where("data @> (:key => :value)", key: 'complete', value: 'true')
end 
```

目标.rb

```
belongs_to :user
serialize :data, ActiveRecord::Coders::Hstore 
```

setup_hstore 迁移：

```
class SetupHstore < ActiveRecord::Migration
  def self.up
    execute "CREATE EXTENSION IF NOT EXISTS hstore"
  end

  def self.down
    execute "DROP EXTENSION IF EXISTS hstore"
  end
end 
```

添加数据列迁移：

```
class AddDataToRecords < ActiveRecord::Migration
  def change
    add_column :records, :data, :hstore
  end
end 
```

添加索引迁移：

```
class AddHstoreIndexes < ActiveRecord::Migration
  def up
    execute "CREATE INDEX records_gin_data ON records USING GIN(data)"
  end

  def down
    execute "DROP INDEX records_gin_data"
  end
end 
```

错误：

```
ActiveRecord::StatementInvalid:
PG::Error: ERROR:  operator does not exist: unknown => unknown
LINE 1: ...records"."user_id" = 244 AND (data @> ('complete' => 'true')... 
```

尝试通过直接查询创建扩展时的 Navicat 输出：

```
CREATE EXTENSION hstore Error : ERROR:  extension "hstore" already exists 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T10:23:34.213

在您的情况下，也许这是一个简单的数据类型问题，请尝试：

```
data @> ('complete'::text => 'true'::text) 
```

但是该`=>`运算符已被弃用（并已在 9.2 中删除），最好使用以下`hstore()`格式：

```
(data @> hstore('complete','true')) 
```

# r - R 引用 引用哪一年？

> ID：14535875
> 
> 赞同：5
> 
> 时间：2013-01-26T10:08:42.230
> 
> 标签：r, citations

大多数时候，我的 R 版本和软件包都是最新的。现在我想知道使用`citation("somepackage")`. 基本上所有的包都是2012年的。我怎样才能知道他们第一次出现的真实日期？还是我真的应该引用最新版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T10:17:38.400

医学领域的规范似乎是在文中引用这样的话：

```
We used Stata version 9.2 (Stata Corporation, East Nowhere, Texas, 2006). 
```

该规范主张引用您实际使用的版本的年份。而且，在我看来，如果您希望后续作者能够复制您的结果，这是有道理的。

整个新兴领域都在试图弄清楚如何引用论文以外的东西（例如，参见[Heather Piwowar 的工作](http://dx.doi.org/10.1038%2F493159a)）。如果有一篇关于您想要的 R 版本的*Journal of Statistical Software*文章（对于软件包而不是基本 R），您可以引用它。或引用*R Journal*的相关版本更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T14:22:57.017

为什么没有人提到显而易见的？R本身有一个`citation()`命令：

```
edd@max:~$ R --silent -e 'citation()'
R> citation()

To cite R in publications use:

  R Core Team (2012). R: A language and environment for statistical computing. 
  R Foundation for Statistical Computing, Vienna, Austria.
  ISBN 3-900051-07-0, URL http://www.R-project.org/.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {R: A Language and Environment for Statistical Computing},
    author = {{R Core Team}},
    organization = {R Foundation for Statistical Computing},
    address = {Vienna, Austria},
    year = {2012},
    note = {{ISBN} 3-900051-07-0},
    url = {http://www.R-project.org/},
  }

We have invested a lot of time and effort in creating R, please cite it 
when using it for data analysis. See also ‘citation("pkgname")’ for citing 
R packages.

R> 
R> 
edd@max:~$ 
```

# php - 在 Listdata() 中加载关系值

> ID：14535877
> 
> 赞同：0
> 
> 时间：2013-01-26T10:08:45.713
> 
> 标签：php, yii

我需要知道如何在 listData() 中调用关系，

例如，以正常方式我们可以这样称呼它：

```
$model->section->section_name ; 
```

在我的代码中，我只是将值打印为数字，但我需要从课程表中打印字符串值。

```
public function coursesList($section_id) {

        $data=Msection::model()->findAll('section_id=:section_id', 
                array(':section_id'=>(int)$section_id));

        return CHtml::listData($data,'course_id','course_id');
 //// can i call it like : ///listData($data,'course_id->course->course_name','course_id');
        } 
```

我可以这样称呼它：

```
listData($data,'course_id->course->course_name','course_id'); 
```

如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:20:05.430

如果您使用的是 php 5.3 或更高版本，则可以在 ListData 中调用匿名函数，其中参数是此时列表正在处理的模型：

```
CHtml::listData($data,'id',function($course) {
    return CHtml::encode($course->course_name);
}); 
```

来源：[Yii 文档](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail)

# c# - 使用 var、动态和 linq 组合的奇怪行为变化

> ID：14535879
> 
> 赞同：5
> 
> 时间：2013-01-26T10:09:07.460
> 
> 标签：c#, linq, dynamic, var

我（懒惰地）`var`在以下代码的原始版本中使用，并在代码的完全不同部分得到了一个奇怪的运行时异常。将“var”更改为“int”修复了运行时异常，但我不太明白为什么。我将代码归结为这个例子；

```
public class Program
{
    private static List<string> Test(string i) { return new List<string> {i}; }
    private static dynamic GetD() { return 1; }

    public static void Main()
    {
        int value1 = GetD();   // <-- int
        var result1 = Test("Value " + value1);
        // No problem, prints "Value 1", First() on List<string> works ok.
        Console.WriteLine(result1.First());

        var value2 = GetD();   // <-- var
        var result2 = Test("Value " + value2);
        // The below line gives RuntimeBinderException 
        // 'System.Collections.Generic.List<string>' does not contain a 
        // definition for 'First'
        Console.WriteLine(result2.First());
    }
} 
```

我可以看到“var”的类型是动态的而不是 int，但是为什么该类型会传播到并影响调用的返回值的行为`Test()`？

编辑：也许我应该澄清我的问题；我可以看到`dynamic`传播到`result2`，我无法理解的是，为什么当 IDE 清楚地表明`List<string> Test(string)`是调用的方法时，它仍然将返回值推断为动态的。这是IDE比编译器更聪明的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:15:59.597

问题是 First 是扩展方法而不是实例方法，并且运行时绑定器在动态区分扩展方法和实例方法时遇到了麻烦。

你可以在这里阅读更多内容：

[扩展方法和动态对象](https://stackoverflow.com/questions/5311465/extension-method-and-dynamic-object-in-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:18:17.833

你的代码是这样编译的：

```
public static void Main()
{
    int value1 = GetD();   // <-- int
    List<string> result1 = Test("Value " + value1);
    // No problem, prints "Value 1", First() on List<string> works ok.
    Console.WriteLine(result1.First());

    dynamic value2 = GetD();   // <-- var
    dynamic result2 = Test("Value " + value2);
    // The below line gives RuntimeBinderException 
    // 'System.Collections.Generic.List<string>' does not contain a 
    // definition for 'First'
    Console.WriteLine(result2.First());
} 
```

`result2`是动态对象，则不支持扩展方法（用作扩展方法）。

但是，您可以这样做：

```
Console.WriteLine(Enumerable.First(result2)); 
```

### 更新

你的 IDE 没那么聪明。尝试添加新方法：

```
private static List<int> Test(int i) { return new List<int> { i }; } 
```

它将为您提供两种可能性。

### 更新2

C# 规范的第 7.6.5 段：

> 如果以下至少一项成立，则调用表达式是动态绑定的（第 7.2.2 节）：
> 
> *   主表达式具有编译时类型动态。
> *   可选参数列表的至少一个参数具有编译时类型动态，并且主表达式没有委托类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:48:17.080

您可以看到下面的 iamge 清楚地显示了可能是什么问题。

![GetType() 值](../Images/2f1559981a3a70ab4194cd53c9b53fd0.png)

result2 的 GetType() 表明它是动态对象。

此外，动态关键字不支持扩展方法

# macos - 谢尔宾斯基三角形 OpenGL

> ID：14535890
> 
> 赞同：0
> 
> 时间：2013-01-26T10:10:36.207
> 
> 标签：macos, opengl, xcode4.5

我正在尝试学习 OpenGL。我尝试了我在这[本书](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/)中找到的一些代码，但程序的输出只是一个白屏，输出应该是谢尔宾斯基三角形。

有什么问题？我正在 Mac OS X 10.8 和 Xcode 4.5 上开发

```
#include "Angel.h"
#include <iostream>

const int numPoints = 5000;
typedef vec2 point2;

void init(){

    point2 points[numPoints];
    point2 vertices[3] = {
        point2(-1.0, -1.0), point2(0.0, 1.0), point2(1.0, -1.0)
    };

    points[0] = point2(0.25, 0.5);

    for (int k = 1; k < numPoints; k++) {
        int j = rand()%3;
        points[k] = (points[k-1]+vertices[j])/2.0;
    }

    GLuint program = InitShader("vertex.glsl", "fragment.glsl");
    glUseProgram(program);

    GLuint abuffer;
    glGenVertexArraysAPPLE(1, &abuffer);
    glBindVertexArrayAPPLE(abuffer);

    GLuint buffer;
    glGenBuffers(1, &buffer);
    glBindBuffer(GL_ARRAY_BUFFER, buffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(points), points, GL_STATIC_DRAW);

    GLuint location = glGetAttribLocation(program, "vPosition");
    glEnableVertexAttribArray(location);
    glVertexAttribPointer(location, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));

    glClearColor(1.0, 1.0, 1.0, 1.0);

}

void display(){
    glClear(GL_COLOR_BUFFER_BIT);
    glDrawArrays(GL_POINTS, 0, numPoints);
    glFlush();
}

int main(int argc, char** argv){

    glutInit(&argc, argv);

    glutInitDisplayMode(GLUT_RGBA | GLUT_3_2_CORE_PROFILE);

    glutInitWindowSize(640, 480);

    glutCreateWindow("Sierpinski Gasket");

    init();

    glutDisplayFunc(display);

    glutMainLoop();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:59:41.073

在您的示例中，您似乎错过了着色器程序附加阶段。使用可编程管道时，您必须提供至少一个编译到着色器程序中的顶点和片段着色器。然后在渲染循环中，在调用 glDrawArrays() 或任何其他几何相关方法之前你必须通过 glUseProgram 绑定着色器程序。否则你的 GPU 不知道如何处理顶点数据。看看[这个](http://www.arcsynthesis.org/gltut/)很棒的教程，它非常详细地解释了你开始使用现代 OpenGL 所需要知道的一切。我认为，如果我没记错的话，在 OSX 上工作时，您将不得不对某些 API 方法使用扩展，因为它支持 GL 3.2。

> 如何附加着色器？我真的什么都不知道。

好吧，看，你必须知道如何去做，否则你无法继续编写 OpenGL 应用程序。仔细阅读教程，以牢牢掌握着色器程序的工作原理以及为什么需要它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:46:40.113

最后 ！代码已完成，着色器按应有的方式附加。

`.h`中包含的文件有问题`Angel.h`，而不是`<OpenGL/OpenGL.h>`应该是`<OpenGL/gl3.h>`. 要更改的第二件事是删除`APPLE`函数的后缀`glGenVertexArrayAPPLE`和`glBindVertexArrayAPPLE`.

显然，Apple 及其 OpenGL 的实现存在问题，可能并非所有的东西都与他们所拥有的兼容，但我将这个话题交给了专家，如果有人在那里请澄清这一点。

# c++ - 尽可能传递 const 引用参数

> ID：14535891
> 
> 赞同：2
> 
> 时间：2013-01-26T10:10:36.880
> 
> 标签：c++, parameters, constants, pass-by-reference

> **可能重复：**
> [C++：我如何决定是通过引用还是通过值传递参数？](https://stackoverflow.com/questions/9442202/c-how-do-i-decide-if-to-pass-params-by-ref-or-by-value)

以下函数由[C++ Primer 第 5 版](https://rads.stackoverflow.com/amzn/click/com/0321714113)第 211 页和第 214 页编写。此函数将返回给定字符在字符串中的第一次出现位置，并告知该字符在该字符串中出现的次数。

```
string::size_type find_char(const string &s, char c, string::size_type &occurs)
{
      // Compares the given character with string 
      // Records the first occurrence of that character
      // The change in &occurs is reflected back to the original variable
} 
```

作者建议在传递参数时使用“避免复制的`const`引用”，对于函数不改变的参数使用“引用参数”。**他们为什么不做`char c`参考`const`参数？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T10:16:49.290

> 他们为什么不做`char c`参考`const`参数？

`char``const`是如此之小，通常通过值而不是通过引用（或其他方式）传递它更便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:34:35.580

正如@NPE 所说，`char`与所有内置类型一样，可以像指针或引用一样轻松地按值传递。

从技术上讲，虽然在创建指针或对内置类型的引用以及按值传递方面没有速度差异，但是在取消引用该指针或引用以访问底层值时，性能会受到影响。编译器确实有一些可用的优化策略，涉及引用可能意味着按值传递并不快。但一般来说，您不应该依赖优化器可能会或可能不会做的事情。大多数时候它不会按照你的想法做。

一般的经验法则是通过值传递内置类型，通过引用（或指针）传递用户定义的类型。有些情况会迫使你打破这条规则，但当你遇到它们时你就会知道它们。

# python - 我的 python 代码有什么问题？我正在尝试制作一个生成器代码，它用生成器替换字符串以给出最终字符串

> ID：14535893
> 
> 赞同：-1
> 
> 时间：2013-01-26T10:10:52.447
> 
> 标签：python

```
def make_converter(match, replacement):        
    d={match : replacement}         
    return d

def apply_converter(converter, string):    
    c1= "".join(str(x) for x in converter.keys())
    c2= "".join(str(x) for x in converter.values())
    print c1,c2
    c3=string.find(c1)
    if c3==-1:
        return string
    string=string.replace(c1,c2,1)
    apply_converter(converter,string)

# For example,

c1 = make_converter('aa', 'a')
print apply_converter(c1, 'aaaa')
#>>> a

c = make_converter('aba', 'b')
print apply_converter(c, 'aaaaaabaaaaa')
#>>> ab 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:21:03.713

您没有返回递归的结果。`string`如果未找到匹配项，您的函数将返回输入，否则将不返回任何内容！

你要：

```
return apply_converter(converter, string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:25:15.943

除了不返回结果外，我还进行了一些其他清理：

```
def make_converter(match, replacement):        
    return (match, replacement)

def apply_converter(converter, string):    
    old, new = converter
    replaced = string.replace(old, new, 1)
    while replaced != string:
        string = replaced
        replaced = string.replace(old, new, 1)
    return string 
```

# template-engine - 百里香叶错误

> ID：14535895
> 
> 赞同：1
> 
> 时间：2013-01-26T10:11:01.357
> 
> 标签：template-engine, thymeleaf

这是我的模板示例：

```
<tr th:with="negNumber = ${myNum < 0}">
...
</tr> 
```

我收到以下异常消息：

```
Caused by: org.xml.sax.SAXParseException: The value of attribute "th:if" associated with an element type "null" must not contain the '<' character. 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:59:44.830

XML 规定不应在属性值中使用 < 和 > 符号，因此应将它们替换为`&lt;`and`&gt;`

例子：

```
th:if="${prodStat.count} gt; 1” 
```

请注意，这些运算符存在文本别名：gt(>)、lt(<)、ge(>=) 和 le(<=)。还有 eq (==) 和 neq(!=)。

我希望这能解决你的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T07:36:03.720

<、>、" 和 & 符号应在标签属性内转义。使用`&lt;`解决您的问题。

# xcode - 如何从 64 个 UILabel 中选择一个

> ID：14535896
> 
> 赞同：0
> 
> 时间：2013-01-26T10:11:09.690
> 
> 标签：xcode

基本上如何执行以下操作，但对于 64 个标签：

```
int lblInt = arc4random() % 64
if (lblInt == 0) {
    lbl.text = @"Letter";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:16:17.577

为什么不使用数组来代替？

```
NSMutableArray *arr = [NSMutableArray array];
for (int i = 0; i < 64; i++) {
    UILabel *lbl = [[UILabel alloc] initWithFrame:someFrame];
    [arr addObject:lbl];
    [someSuperview addSubview:lbl];
    [lbl release];
} 
```

然后，您可以使用以下代码使每个标签显示一个随机字母：

```
for (UILabel *lbl in arr) {
    int r = arc4random() % 64;
    if (r < 26) {
        lbl.text = [NSString stringWithFormat:@"%c", 'a' + r];
    } else if (r < 52) {
        lbl.text = [NSString stringWithFormat:@"%c", 'A' + r - 26];
    } else if (r < 62) {
        lbl.text = [NSString stringWithFormat:@"%c", '0' + r - 52];
    } else {
        // whatever the last two characters should be
    }
} 
```

# c++ - buildroot 文件系统和交叉编译：动态链接的应用程序失败但静态可以。如何链接到 uClibc

> ID：14535897
> 
> 赞同：2
> 
> 时间：2013-01-26T10:11:16.703
> 
> 标签：c++, static-linking, dynamic-linking, buildroot, uclibc

我有一个 buildroot 创建的文件系统，我正在尝试在 lighttpd 服务器上执行一些 c 代码。

我创建了一个简单的 C 模块，它只打印出几行 html。代码如下所示：

```
#include "stdio.h"

int main(void) {
  printf( "Content-Type: text/plain\n\n" );
  printf("testing C code\n");
  return 0;
} 
```

我正在使用来自 Ubuntu 存储库的编译器来编译它`arm-linux-gnueabi-gcc -o test.cgi test.c`。如果我用 flag 编译`-static`，它会运行得很好，我可以看到显示的 html。但是在没有静态标志的情况下编译，执行失败如下：

```
# ./test.cgi 
-sh: ./first.cgi: not found 
```

我想知道原因是否是 c 库错误，我应该链接到由 buildroot 编译的 uClibc。在我的 buildroot 文件夹`output/host/usr/arm-unknown-linux-uclibcgnueabi/sysroot/lib`中，我可以看到以下文件：

```
-rwxr-xr-x 1 jlumme jlumme  25444 Jan 26 17:13 ld-uClibc-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     21 Jan 26 17:12 ld-uClibc.so.0 -> ld-uClibc-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme  13191 Jan 26 17:13 libcrypt-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     20 Jan 26 17:13 libcrypt.so.0 -> libcrypt-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     21 Jan 26 17:13 libc.so.0 -> libuClibc-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme  13383 Jan 26 17:13 libdl-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     17 Jan 26 17:13 libdl.so.0 -> libdl-0.9.33.2.so
-rw-r--r-- 1 jlumme jlumme    135 Jan 26 17:15 libgcc_s.so
-rw-r--r-- 1 jlumme jlumme 180152 Jan 26 17:15 libgcc_s.so.1
-rwxr-xr-x 1 jlumme jlumme  64555 Jan 26 17:13 libm-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     16 Jan 26 17:13 libm.so.0 -> libm-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme   4772 Jan 26 17:13 libnsl-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     18 Jan 26 17:13 libnsl.so.0 -> libnsl-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme  79059 Jan 26 17:13 libpthread-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     22 Jan 26 17:13 libpthread.so.0 -> libpthread-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme   4776 Jan 26 17:13 libresolv-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     21 Jan 26 17:13 libresolv.so.0 -> libresolv-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme  13927 Jan 26 17:13 librt-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     17 Jan 26 17:13 librt.so.0 -> librt-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme 284451 Jan 26 17:13 libuClibc-0.9.33.2.so
-rwxr-xr-x 1 jlumme jlumme   4955 Jan 26 17:13 libutil-0.9.33.2.so
lrwxrwxrwx 1 jlumme jlumme     19 Jan 26 17:13 libutil.so.0 -> libutil-0.9.33.2.so 
```

是`libuClibc-0.9.33.2.so`我要找的文件吗？我怎样才能将我的应用程序与它联系起来？

在我的目标板上，我可以在`/usr/lib`

```
lrwxrwxrwx    1 root     root            15 Jan 26  2013 libbz2.so -> libbz2.so.1.0.6
lrwxrwxrwx    1 root     root            15 Jan 26  2013 libbz2.so.1 -> libbz2.so.1.0.6
lrwxrwxrwx    1 root     root            15 Jan 26  2013 libbz2.so.1.0 -> libbz2.so.1.0.6
-rwxrwxr-x    1 root     root         57924 Jan 26  2013 libbz2.so.1.0.6
lrwxrwxrwx    1 root     root            16 Jan 26  2013 libelf.so -> libelf.so.0.8.12
lrwxrwxrwx    1 root     root            16 Jan 26  2013 libelf.so.0 -> libelf.so.0.8.12
-rwxr-xr-x    1 root     root         69924 Jan 26  2013 libelf.so.0.8.12
lrwxrwxrwx    1 root     root            16 Jan 26  2013 libpcre.so -> libpcre.so.1.0.0
lrwxrwxrwx    1 root     root            16 Jan 26  2013 libpcre.so.1 -> libpcre.so.1.0.0
-rwxr-xr-x    1 root     root         88804 Jan 26  2013 libpcre.so.1.0.0
lrwxrwxrwx    1 root     root            19 Jan 26  2013 libpcrecpp.so -> libpcrecpp.so.0.0.0
lrwxrwxrwx    1 root     root            19 Jan 26  2013 libpcrecpp.so.0 -> libpcrecpp.so.0.0.0
-rwxr-xr-x    1 root     root         27436 Jan 26  2013 libpcrecpp.so.0.0.0
lrwxrwxrwx    1 root     root            21 Jan 26  2013 libpcreposix.so -> libpcreposix.so.0.0.0
lrwxrwxrwx    1 root     root            21 Jan 26  2013 libpcreposix.so.0 -> libpcreposix.so.0.0.0
-rwxr-xr-x    1 root     root          5576 Jan 26  2013 libpcreposix.so.0.0.0
lrwxrwxrwx    1 root     root            19 Jan 26  2013 libsqlite3.so -> libsqlite3.so.0.8.6
lrwxrwxrwx    1 root     root            19 Jan 26  2013 libsqlite3.so.0 -> libsqlite3.so.0.8.6
-rwxr-xr-x    1 root     root        516472 Jan 26  2013 libsqlite3.so.0.8.6
lrwxrwxrwx    1 root     root            19 Jan 26  2013 libstdc++.so -> libstdc++.so.6.0.14
lrwxrwxrwx    1 root     root            19 Jan 26  2013 libstdc++.so.6 -> libstdc++.so.6.0.14
-rwxr-xr-x    1 root     root        418936 Jan 26  2013 libstdc++.so.6.0.14
-rw-r--r--    1 root     root          2422 Jan 26  2013 libstdc++.so.6.0.14-gdb.py
lrwxrwxrwx    1 root     root            16 Jan 26  2013 libxml2.so -> libxml2.so.2.8.0
lrwxrwxrwx    1 root     root            16 Jan 26  2013 libxml2.so.2 -> libxml2.so.2.8.0
-rwxr-xr-x    1 root     root       1063556 Jan 26  2013 libxml2.so.2.8.0
drwxrwxr-x    2 root     root          4096 Jan 26  2013 lighttpd
-rw-r--r--    1 root     root           195 Jan 26  2013 xml2Conf.sh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:00:51.453

要构建您的应用程序，您必须使用 Buildroot 生成的交叉编译器，位于 `output/host/usr/bin/<name-of-architecture>-gcc`.

在这里，您使用的是针对使用`eglibc`C 库的系统的 Ubuntu ARM 交叉编译器。但是使用 Buildroot 生成的系统使用的是`uClibc`C 库。因此，使用 Ubuntu ARM 交叉编译器构建的二进制文件绝对没有机会在这个 Buildroot 生成的系统上运行。

只需使用 Buildroot 为您生成的交叉编译器。

# oauth - ASP.NET MVC4 谷歌 oAuth

> ID：14535898
> 
> 赞同：5
> 
> 时间：2013-01-26T10:11:17.420
> 
> 标签：oauth, asp.net-mvc-4, google-oauth

我试图在 MVC 4 项目中配置 Google oAuth。[根据Hanslemans 优秀视频](http://www.asp.net/vnext/overview/aspnet/oauth-in-the-default-aspnet-45-templates)，它开箱即用

我能够注册、登录、注销等，但我拥有的唯一信息是电子邮件地址。我希望能够从 Google 获取名字、姓氏和图片

[这个博客](http://blogs.msdn.com/b/webdev/archive/2012/08/22/extra-information-from-oauth-openid-provider.aspx)概述了这是可能的——但是当我浏览它时，所有可用的都是电子邮件地址。这很明显，因为这就是我们要求许可的全部内容。

所以我的问题是如何向 Google 索取更多信息以及如何访问它。我知道它可以编写我自己的 oAuth 访问权限，但我认为它可以使用开箱即用的 MVC 4 代码。

首先十分感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T21:55:31.260

我认为这属于 DotNetOpenAuth.AspNet version="4.0.3.12153" 包中的错误。您需要编写自己的客户提供商，然后您可以从中获取数据

[http://blogs.msdn.com/b/pranav_rastogi/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx](http://blogs.msdn.com/b/pranav_rastogi/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx)

您应该能够使用 GetExtraData 来获取您正在寻找的数据！

# user-interface - 如何在 Meteor 中更改个人资料名称？

> ID：14535901
> 
> 赞同：10
> 
> 时间：2013-01-26T10:11:46.807
> 
> 标签：user-interface, meteor

我想知道如何在 Meteor 中更改用户个人资料信息。我使用 accounts-base 包创建了一个应用程序，因此我可以使用用户帐户快速管理所有相关内容。这真的很棒。

在官方文档中它说：

> profile：一个对象（默认情况下）用户可以使用任何数据创建和更新。

但是我怎么能让用户改变它呢？

关于同一主题，`{{loginButtons}}`默认情况下使用标签，当用户登录时，我得到以下图像：

![在此处输入图像描述](../Images/f7024dd168580c220b7438462b2a18e1.png)

有没有可能添加`Change profile`或`Change email`类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-26T12:34:52.320

目前`accounts-ui`没有内置更改配置文件按钮，您必须手动进行。

例如，如果你这样做

```
Meteor.users.update({_id:Meteor.user()._id}, {$set:{"profile.name":"Carlos"}}) 
```

您可以更改上面的屏幕，`accounts-ui`您必须显示名称而不是您要单击以显示上面对话框的电子邮件。

电子邮件有点棘手，您必须从服务器执行此操作，因为（可能在 meteor.methods/call 中）您无法修改来自客户端的电子邮件内容，我建议添加新电子邮件并对其进行验证而不是更改现有的电子邮件（因为它也是他们的登录名）。或者**先对其进行验证**，然后再对其进行更改，以免将某人的电子邮件更改为无法恢复密码的内容。

```
Meteor.users.update({_id:Meteor.user()._id}, {$addToSet:{"emails":{address:"newemail@newemail.com","verified":false}}}); 
```

或者，如果您希望用户拥有一封电子邮件，他们可以更改：

```
Meteor.users.update({_id:Meteor.user()._id}, {$set:{"emails":[{address:"newemail@newemail.com"}]}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-21T14:50:43.753

要扩展此答案，最好将此代码放入[（已验证）](https://github.com/meteor/validated-method) Meteor 方法中。

*   使用[CallPromiseMixin](https://github.com/Didericis/callpromise-mixin)在前端使用 async/await 语法调用此方法
*   使用[simpl-schema](https://www.npmjs.com/package/simpl-schema)验证用户名参数

```
// imports/api/methods.js

const NO_SPECIAL_CHARACTERS_REGEX = /^[^`~!@#$%^&*()_|+=?;:'"<>{}\[\]\\/]*$/;

export const updateProfileName = new ValidatedMethod({
    name: 'users.updateProfileName',
    mixins: [CallPromiseMixin],
    validate: new SimpleSchema({
        name: { type: String, regEx: NO_SPECIAL_CHARACTERS_REGEX, min: 1, max: 50 },
    }).validator(),
    run({ name }) {
        if (!this.userId) {
            throw new Meteor.Error('User needs to be signed in to call this method');
        }
        return Meteor.users.update({ _id: this.userId }, { $set: { 'profile.name': name } });
    },
}); 
```

然后在前端

```
// imports/ui/changeName.js

Template.changeName.events({
    // ...

    async 'submit #change-name-form'(event, instance) {
        event.preventDefault();
        try {
            await updateProfileName.callPromise({ name: instance.$('#profile-name').val() });
        } catch (e) {
            // do something with the error
        }
    },
}); 
```

# algorithm - 在大小为 n 的两个数组中找到第 n 个最大数的算法

> ID：14535905
> 
> 赞同：7
> 
> 时间：2013-01-26T10:12:31.133
> 
> 标签：algorithm, language-agnostic

我有这个问题：

> 给定两个大小为 n 的排序列表（存储在数组中），找到一个 O(log n) 算法，计算两个列表并集中的第 n 个最大元素。

我可以看到这里可能有一个技巧，因为它需要第 n 个最大元素，并且数组的大小也为 n，但我不知道它是什么。我在想我可以适应计数排序，这行得通吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T10:33:17.157

比较 A[n/2] 和 B[n/2]。如果相等，它们中的任何一个都是我们的结果。该算法的其他停止条件是当两个数组的大小均为 1 时（最初或在几个递归步骤之后）。在这种情况下，我们只选择 A[n/2] 和 B[n/2] 中的最大值。

如果 A[n/2] < B[n/2]，则对 A[] 的后半部分和 B[] 的前半部分递归地重复此过程。

如果 A[n/2] > B[n/2]，则对 B[] 的后半部分和 A[] 的前半部分递归地重复此过程。

由于在每一步问题大小（在最坏的情况下）减半，我们将得到 O(log n) 算法。

* * *

始终将数组大小除以 2 以使索引仅在`n`2 的幂时才能正常工作。选择索引（对于任意`n`）更正确的方法是对一个数组使用相同的策略，但为另一个数组选择补充索引`j=n-i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:33:40.067

Evgeny Kluev 给出了一个更好的答案——我的答案是 O(n log n)，因为我不认为它们是被排序的。

我可以添加的是一个非常好的视频的链接，该视频解释了二进制搜索，由 MIT 提供：

[https://www.youtube.com/watch?v=UNHQ7CRsEtU](https://www.youtube.com/watch?v=UNHQ7CRsEtU)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:48:07.040

```
public static void main(String[] args) {  

int[] fred = { 60, 5, 7, 3, 20, 3, 44 };  

int[] tmp = new int[fred.length];  
go(fred, 1, tmp, 3);  
}  

public static void go(int[] fred, int cnt, int[] tmp, int whatPosition) {  
int max = 0;  
int currentPosition = 0;  
for (int i = 0; i < fred.length; i++) {  
if (i == 0)  
max = fred[i];  
else {  
if (fred[i] > max) {  
max = fred[i];  
currentPosition = i;  
}  
}  
}  
System.arraycopy(fred, 0, tmp, 0, fred.length);  
tmp[currentPosition] = 0;  
cnt++;  
if(cnt != whatPosition)  
go(tmp, cnt, tmp, whatPosition);  
else{  
for (int i = 0; i < tmp.length; i++) {  
if (i == 0)  
max = tmp[i];  
else {  
if (tmp[i] > max) {  
max = tmp[i];  
}  
}  
}  
System.out.println(max);  
}  

} 
```

# flash - 如何将 matplotlib 图表转换为唯一的交互式文件

> ID：14535907
> 
> 赞同：0
> 
> 时间：2013-01-26T10:12:49.460
> 
> 标签：flash, svg, matplotlib, interactive

我正在开发一个财务报告分析应用程序，主要用于处理数字并相应地绘制条形/线/饼形/散点图。该应用程序基于 Pandas 和 matplotlib，运行良好。最终用户只需将参数发送给我，应用程序就会运行并生成 SVG 格式的图表文件，然后我可以将文件通过电子邮件发送给最终用户。

现在的问题是：SVG文件是静态的，失去了交互能力，最终用户希望图表在鼠标单击或悬停在关键点或区域上时显示相关注释。

我在我的机器上添加了 matplotlib 图表的交互功能，但它依赖于我安装的环境。最终用户在 Windows 上运行，不会安装 python/matplotlib 等，他们想要的只是一个可以双击然后与内容交互的单个文件。

我现在想要的是：将 matplotlib 图表转换为那种文件的最简单方法。有点像将图片转换为 Flash 或动态 SVG 或用户可以交互的任何文件。

是否有任何 python 现有包或对此有任何想法？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:14:14.657

[stackoverflow 搜索](https://stackoverflow.com/search?q=matplotlib+interactive+svg)找到了[答案](https://stackoverflow.com/questions/8994357/want-to-make-static-svg-plot-from-matplotlib-interactive-via-the-browser/10542968#10542968)，该答案指向[matplotlib.org 上的一个示例](http://matplotlib.org/examples/user_interfaces/svg_histogram.html)。假设用户将在 Web 浏览器中打开此文件，这应该可以工作。如果他用 Inkscape 或静态 SVG 查看器打开它，那么就没有办法给他提供交互式体验。您当然也可以上传图表并向他发送链接。这可能是最方便的，并确保他在浏览器中查看它。

或者，考虑使用[d3.js](http://d3js.org/)代替 matplotlib。它使用 JavaScript 生成的 SVG 并具有惊人的图表功能。向其中添加所需的交互行为可能更容易。

当鼠标悬停在某个元素上方时显示信息的快速解决方案是使用`<title>`SVG 中的元素。任何`<title>`元素的内容都将在悬停时显示为提示信息。看[这个例子](http://tinkerbin.com/LkHSyW9j)：

```
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="150">
  <rect width="50" height="50">
    <title>This is a rectangle</title>
  </rect>
  <circle cx="75" cy="75" r="25">
    <title>This is a circle</title>
  </circle>
  <text y="120">
    <tspan>Move your mouse over the</tspan>
    <tspan x="0" dy="20">elements to see the title text.</tspan>
  </text>
</svg> 
```

# c# - 开始使用 protobuf-net

> ID：14535913
> 
> 赞同：34
> 
> 时间：2013-01-26T10:13:41.350
> 
> 标签：c#, protobuf-net

我正在尝试开始使用 protobuf.net。

我已经从[这里](http://code.google.com/p/protobuf-net/downloads/detail?name=protobuf-net%20r622.zip)下载了最新版本，实现了一个`[ProtoContract]`类，现在我正在尝试按照[文档](http://code.google.com/p/protobuf-net/)`ProtoBuf.Serializer.Serialize`中的描述对其进行序列化进行序列化。问题是，没有这样的方法。

如何写入`[ProtoContract]`磁盘？

**更新** 显然，我有错误的版本或其他东西，但这是我的`Serialize`班级的样子：

![我看到的 protobuf.net 序列化程序类](../Images/785382682d993ea79e49d980a3a8f036.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-26T10:21:13.620

这必须帮助您开始使用它：[Source & Credit](http://code.google.com/p/protobuf-net/wiki/GettingStarted) & [Marc Gravell](https://stackoverflow.com/users/23354/marc-gravell)

* * *

最简单的入门方法就是编写数据：

```
class Person {
    public int Id {get;set;}
    public string Name {get;set;}
    public Address Address {get;set;}
}
class Address {
    public string Line1 {get;set;}
    public string Line2 {get;set;}
} 
```

这是一个好的开始，但对于 protobuf-net 来说，这本身是不够的。与 XmlSerializer 不同，成员名称未在数据中编码 - 相反，您必须选择一个整数来标识每个成员。此外，为了表明意图，有必要表明我们打算将这种类型序列化（即它是一个数据协定）：

```
[ProtoContract]
class Person {
    [ProtoMember(1)]
    public int Id {get;set;}
    [ProtoMember(2)]
    public string Name {get;set;}
    [ProtoMember(3)]
    public Address Address {get;set;}
}
[ProtoContract]
class Address {
    [ProtoMember(1)]
    public string Line1 {get;set;}
    [ProtoMember(2)]
    public string Line2 {get;set;}
} 
```

由于“protocol buffers”是一种二进制格式，protobuf-net 主要基于 Stream 类；这使得使用各种实现变得简单。例如，要写入文件：

```
var person = new Person {
    Id = 12345, Name = "Fred",
    Address = new Address {
        Line1 = "Flat 1",
        Line2 = "The Meadows"
    }
};
using (var file = File.Create("person.bin")) {
    Serializer.Serialize(file, person);
} 
```

这会将一个 32 字节的文件写入“person.bin”。在上面可能并不明显，但 Serialize 是一种通用方法 - 该行也可以是：

```
using (var file = File.Create("person.bin")) {
    Serializer.Serialize<Person>(file, person);
} 
```

但大多数时候我们可以让编译器的泛型类型推断为我们完成这项工作。反序列化数据

我们还需要找回数据！

```
Person newPerson;
using (var file = File.OpenRead("person.bin")) {
    newPerson = Serializer.Deserialize<Person>(file);
} 
```

这将从“person.bin”中读取数据。注意我们这次需要告诉它类型（the ），否则代码非常相似。

* * *

更新：[下载这个包](http://protobuf-net.googlecode.com/files/protobuf-net%20r282.zip) ![一切似乎都很好](../Images/dcee49b7979e37a268512687d563f09f.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-26T10:42:35.090

听起来您已经选择了一个“CoreOnly”构建，可能适用于 iOS 或 Unity？这意味着您正在使用 google-code 下载。该软件包的根目录中有一个“我需要什么文件.txt”，它解释了不同构建的用途。您可能应该使用“完整”构建。或者更简单地说，使用仅包含“完整”构建的 NuGet 部署。

如果您想使用“CoreOnly”，您可能应该使用单独的“预编译”工具来生成自定义序列化程序，然后：

```
 var ser = new MyCustomSerializer();
 ser.Serialize(...); 
```

此方案主要用于 Windows Phone、Silverlight、iOS 等轻框架 - 其中元编程/反射要么非常有限，要么完全不允许。

# octave - 八度音阶图像的 DCT

> ID：14535915
> 
> 赞同：3
> 
> 时间：2013-01-26T10:13:44.637
> 
> 标签：octave

根据 dct2的 Octave[文档](http://octave.sourceforge.net/signal/function/dct2.html)， `dct2 (x)`计算矩阵的二维离散余弦变换，`x`但是当我尝试以下代码时出现错误，我可能做错了什么？

```
A= imread('img.jpg')
[m,n]=size(A)
B=dct2(A) 
```

它返回一个错误：

```
ERROR: 'dct2' undefined near line 4 column 3 
```

我试过检查是否`A`是矩阵，它是矩阵，那么错误在哪里？我在 Windows 上使用 OCtave 3.2.4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T10:34:32.567

Octave 没有找到函数定义。您必须首先安装信号包，您可以从[http://octave.sourceforge.net/signal/index.html](http://octave.sourceforge.net/signal/index.html)下载它，并在文件的同一文件夹中，提示 octave 并调用：

```
pkg install signal-1.2.0.tar.gz 
```

或者，正如@carandraug 在评论中所建议的那样，从 Octave 3.4 开始，您可以通过键入以下内容自动下载和安装软件包：

```
pkg install -forge signal 
```

如果出现权限错误，请尝试`sudo octave`在安装后添加提示：

```
pkg load signal 
```

在使用`dct2`函数之前。

# codeigniter - Codeigniter 重复视图加载器

> ID：14535921
> 
> 赞同：0
> 
> 时间：2013-01-26T10:14:04.093
> 
> 标签：codeigniter, repeat

我注意到在处理 Codeigniter 控制器时，我似乎得到了很多重复的代码。更准确地说，每当我加载视图时。因此，假设我有一个名为 login 的控制器，它具有以下索引方法：

```
$data['title'] = 'Login';
$data['main_content'] = 'forms/login';
$this->load->view('frontpage', $data); 
```

然后我有一个带有以下索引方法的首页控制器：

```
$data['title'] = 'Welcome';
$data['main_content'] = 'content/welcome';
$this->load->view('frontpage', $data); 
```

几乎唯一改变的是 $data 内部的内容，我想知道是否有某种方法可以使这些代码成为更通用的代码，以便消除任何代码重复。

我一直在玩弄创建一个单独的方法来处理这个问题（将 $data 作为参数传递并让该方法到视图加载）或在类中初始化 $data 数组并仅使用 $this- 更改内容的想法>。我想对此发表一些专业意见。我的思维方式是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:34:41.097

我建议为每个“视图”设置单独的视图。这种方法既简化了控制器，又消除了视图文件中对（杂乱）逻辑的需求：

```
public function index()
{
  $data['title'] = 'Welcome';
  $this->load->view('content/welcome', $data);
}

public function login()
{
  $data['title'] = 'Login';
  $this->load->view('forms/login', $data);
} 
```

然后在您的视图文件中使用包含来添加标题等。

（示例视图/forms/login.php）

```
<?php include(APPPATH.'/views/includes/header.php'); ?>

<!--login form ....  -->

<?php include(APPPATH.'/views/includes/footer.php'); ?> 
```

（注意：视图内部不需要逻辑：`if ($main_content == 'forms/login'):`等等......）

# macros - 用列值计算的多个系列图

> ID：14535926
> 
> 赞同：1
> 
> 时间：2013-01-26T10:14:45.893
> 
> 标签：macros

我对宏很陌生，并且一直在使用 SQL 等更简单的语言。任何帮助将不胜感激！！

我很确定我的代码看起来很有趣~

目标：

1.  图 COLUMN(H) AS X, COLUMN(I) AS Y
2.  将列 (J) 评估为设置 4 个不同范围的行范围的值
3.  范围1 <= 5, 5 <范围2 <= 10, 10 <范围3 <= 15, 范围4 > 15
4.  在散点图上返回不同系列的相应范围

**以下是我尝试过的宏：**

```
Private Sub GRAPH()

Application.ScreenUpdating = False
FINALROW = Sheet1.Range("A65536").End(xlUp).Row
RowRange = Sheet1.Range(J2, "J" & FINALROW).Row

If RowRange <= 5 Then
ROW5 = WorksheetFunction.Max(Rows(H2, "H" & FINALROW)).Row
End If

If RowRange <= 10 Then
ROW10 = WorksheetFunction.Max(Rows(H2, "H" & FINALROW)).Row
End If

If RowRange <= 15 Then
ROW15 = WorksheetFunction.Max(Rows(H2, "H" & FINALROW)).Row
End If

sheetname = ActiveSheet.Name

Charts.Add
ActiveChart.ChartType = xlXYScatterLinesNoMarkers
ActiveChart.SetSourceData Source:=Columns("H:I")

ActiveChart.SeriesCollection(1).XValues = Range("H" & ROW5, lastcell2)
ActiveChart.SeriesCollection(2).XValues = Range("H" & ROW10, lastcell2)
ActiveChart.SeriesCollection(3).XValues = Range("H" & ROW15, lastcell2)
ActiveChart.SeriesCollection(4).XValues = Range("H" & FINALROW, lastcell2)

ActiveChart.SeriesCollection(1).YValues = Range("I" & ROW5, lastcell2)
ActiveChart.SeriesCollection(2).YValues = Range("I" & ROW10, lastcell2)
ActiveChart.SeriesCollection(3).YValues = Range("I" & ROW15, lastcell2)
ActiveChart.SeriesCollection(4).YValues = Range("I" & FINALROW, lastcell2)

End Sub 
```

# matlab - MATLAB 简单元胞数组索引。请帮忙 ：）

> ID：14535931
> 
> 赞同：0
> 
> 时间：2013-01-26T10:15:20.557
> 
> 标签：matlab, indexing

请原谅我这个高度新手的问题，但我真的希望我能尽快得到答案！

我有一个 1x2928 单元阵列，每个单元中有 58x58 双矩阵。
我要做的就是将每个 58X58 矩阵的 (12,47) 中的值从 249 单元格数组中提取到 280 中。

我敢打赌，答案一定很简单，但我已经搜索和搜索，我正在自学，所以现在任何帮助都会非常棒！

万谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:57:49.923

更完整的答案：

```
cfrom = 249;
cto   = 280;
ri    = 12;
ci    = 47;
vals  = cellfun( @(x) x(ri,ci), cellArr(cfrom:cto) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:41:34.623

我想这可能会有所帮助

```
cell{ii}(12,47) 
```

与`ii = 249,...,280`.

然后你可以使用`for`循环或`cellfun`在索引上运行它`ii`，

# ruby - 如何在 selenium-webdriver 中为 phantomjs 驱动程序设置一个用户代理？

> ID：14535933
> 
> 赞同：2
> 
> 时间：2013-01-26T10:15:42.323
> 
> 标签：ruby, selenium-webdriver, phantomjs

甚至可能吗？我目前有：

```
 require 'selenium-webdriver'

 phantomjs_useragent = {"phantomjs.page.settings.userAgent" => "Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543a Safari/419.3"}
 driver = Selenium::WebDriver.for :phantomjs
 driver.capabilities.merge!(phantomjs_useragent)
 driver.navigate.to "http://whatsmyuseragent.com/"
 puts driver.first(:tag_name => 'body').text 
```

这让我明白了，这不是我放入的用户代理：

您的用户代理：Mozilla/5.0 (Macintosh; Intel Mac OS X) AppleWebKit/534.34 (KHTML, like Gecko) PhantomJS/1.8.1 Safari/534.34

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T10:38:13.103

根据[这个建议](https://github.com/SeleniumHQ/selenium/pull/8)：

```
capabilities = Selenium::WebDriver::Remote::Capabilities.phantomjs("phantomjs.page.settings.userAgent" => "Custom Agent/1.0")
Selenium::WebDriver.for :phantomjs, :desired_capabilities => capabilities 
```

为 selenium-webdriver-2.31 及更高版本合并

# c# - 在 MS word 中自动复制用户选择的文本

> ID：14535934
> 
> 赞同：0
> 
> 时间：2013-01-26T10:15:53.503
> 
> 标签：c#, ms-word, copy

我正在为 MS Office Word 创建一个功能区按钮，该按钮应在单击该按钮时复制用户选择的文本。问题是我找不到有关如何执行此操作的任何参考。

我曾尝试使用 SendKeys 方法向单词 app 发送`CTRL`+`C`信号，但没有成功。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:43:40.770

```
ActiveDocument.ActiveWindow.Selection.Copy 
```

# html - 为什么无序列表项顶部有空格？

> ID：14535935
> 
> 赞同：2
> 
> 时间：2013-01-26T10:15:57.863
> 
> 标签：html, css, firefox, html-lists

**问题：**无序列表项目顶部有一个空格。这个空间出现在 Firefox 18.0.1

**HTML：**

```
<ul>
<li>
    <a href="">
        <h3>Lorem ipsum</h3>
        <p>It is a long established fact that a reader will be distracted by the readable content</p>
    </a>
</li>
<li>
    <a href="">
        <h3>Lorem ipsum</h3>
        <p>It is a long established fact that a reader will be distracted by the readable content</p>
    </a>
</li>
<li>
    <a href="">
        <h3>Lorem ipsum</h3>
        <p>It is a long established fact that a reader will be distracted by the readable content</p>
    </a>
</li> 
```

**CSS：**

```
ul {
    list-style: square;
    margin-left: 20px
} 
```

**工作演示：http:** [//jsfiddle.net/vpdd7/](http://jsfiddle.net/vpdd7/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:31:04.730

这似乎是列表样式与前面/包含块元素（例如`h3`和）的内联元素冲突的问题`p`。如果您不会出现此问题

*   [设置`ul`为`list-style-type: none`](http://jsfiddle.net/BoltClock/vpdd7/7)

*   [设置`li`为除`display: list-item`](http://jsfiddle.net/BoltClock/vpdd7/3)

*   [设置`a`为`display: block`](http://jsfiddle.net/BoltClock/vpdd7/4)

*   [完全删除`a`元素](http://jsfiddle.net/BoltClock/vpdd7/5)

*   [设置`h3`为除`display: block`](http://jsfiddle.net/BoltClock/vpdd7/6)

[我在CSS2.1 规范](http://www.w3.org/TR/CSS21/generate.html#list-style)中找不到任何可以确定此行为是 Firefox 中的错误还是其他浏览器中的错误的内容。实际上，在 下[`list-style-position`](http://www.w3.org/TR/CSS21/generate.html#propdef-list-style-position)，它表示标记框（包含项目符号）的确切位置或布局是未定义的，即使相对于由`li`元素本身（主框）或其任何子元素创建的框也是如此。

鉴于您的情况，第三个选项可能是最好的解决方法，它不会对布局造成太大影响（如果有的话）。如果您无论如何要将列表项的全部内容转换为链接，则不妨将其显示为块。这样，所有东西都安全地包含在一个块盒中，其渲染定义非常明确且完全可靠。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T10:30:04.847

h3 元素显示为块元素。这意味着它们占据了浏览器窗口的整个宽度，并且在它们的上方和下方都有一个空间。您需要更改 h3 标签以显示为内联元素，这样它们就不会破坏文档的流程。您可以将块元素更改为内联元素，如下所示：

CSS：

```
 h3{
      display:inline;
  } 
```

这是更新的[jsFiddle](http://jsfiddle.net/vpdd7/2/)

# php - 发送带有附件的电子邮件

> ID：14535937
> 
> 赞同：0
> 
> 时间：2013-01-26T10:16:00.533
> 
> 标签：php, email, sendmail

正如我在标题中所说，我需要一些帮助来发送电子邮件问题是附件没有发送。这是我使用的代码...

代码的第 1 部分：

```
<?php    
if(isset($_POST['action'] ) ){    
$action=$_POST['action'];    
$message=$_POST['message'];    
$emaillist=$_POST['emaillist'];    
$from=$_POST['from'];    
$replyto=$_POST['replyto'];    
$subject=$_POST['subject'];    
$realname=$_POST['realname'];     
$file_name=$_POST['file'];    
$contenttype=$_POST['contenttype'];    
        $message = urlencode($message);    
        $message = ereg_replace("%5C%22", "%22", $message);    
        $message = urldecode($message);    
        $message = stripslashes($message);    
        $subject = stripslashes($subject);    
}    
   ?> 
```

代码的第 2 部分

```
<?    
 if ($action){    
        if (!$from && !$subject && !$message && !$emaillist){    
        print "Please complete all fields before sending your message.";    
        exit;    
    }    
    $allemails = split("\n", $emaillist);    
            $numemails = count($allemails);      
          for($x=0; $x<$numemails; $x++){    
                $to = $allemails[$x];    
                if ($to){    
                $to = ereg_replace(" ", "", $to);    
                $message = ereg_replace("&email&", $to, $message);    
                $subject = ereg_replace("&email&", $to, $subject);    
                print "Sending mail to $to.......";    
                flush();    
                $header = "From: $realname <$from>\r\nReply-To: $replyto\r\n";    
                $header .= "MIME-Version: 1.0\r\n";    
                $header .= "Content-Type: text/$contenttype\r\n";    
                $header .= "Content-Transfer-Encoding: 8bit\r\n\r\n";    
                $header .= "$message\r\n";    
                mail($to, $subject, "", $header);    
                print "Done<br>";    
                flush();    
               }    
               }    
}    
?> 
```

我认为问题出在“内容类型”上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:27:59.820

对于文件，您必须使用 $_file 尝试使用以下代码，其工作正常

```
 $from = $email;
    $subject = "Contact Form ";
    $h = "From: $from\r\n";
    $uid = md5(date('r', time()));
    $to = 'abc@abc.com';

    if (isset($_FILES['attachment']) && $_FILES['attachment']['error'] == 0) {
        $fileatt = $_FILES['attachment']['type'];
        $ext = strrchr($fileatt, '.');
        $ftype = "";
        if ($ext == ".doc")
            $ftype = "application/msword";
        if ($ext == ".jpg")
            $ftype = "image/jpeg";
        if ($ext == ".gif")
            $ftype = "image/gif";
        if ($ext == ".zip")
            $ftype = "application/zip";
        if ($ext == ".pdf")
            $ftype = "application/pdf";
        if ($ftype == "")
            $ftype = "application/octet-stream";
        $content = chunk_split(base64_encode(file_get_contents($_FILES['attachment']['tmp_name'])));
        $filename = $_FILES['attachment']['name'];
    } else {
        $fileatt = '';
        $ftype = "";
        $content = '';
        $filename = '';
    }
    $h .= "Reply-To: " . $to . "\r\n";
    $h .= "MIME-Version: 1.0\r\n";
    $h .= "Content-Type: multipart/mixed; boundary=\"" . $uid . "\"\r\n\r\n";
    $h .= "This is a multi-part message in MIME format.\r\n";
    $h .= "--" . $uid . "\r\n";
    $h .= "Content-type:text/html; charset=iso-8859-1\r\n";
    $h .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $htmlMessage .= 'Name : ' . $name . '<br>';
    $htmlMessage .= 'Email :' . $email . '<br>';
    $htmlMessage .= 'Compnay Name :' . $companyname . '<br>';

    $h .= $htmlMessage . "\r\n\r\n";
    $h .= "--" . $uid . "\r\n";
    $h .= "Content-Type: " . $ftype . "; name=\"" . $filename . "\"\r\n";
    $h .= "Content-Transfer-Encoding: base64\r\n";
    $h .= "Content-Disposition: attachment; filename=\"" . $filename . "\"\r\n\r\n";
    $h .= $content . "\r\n\r\n";
    $h .= "--" . $uid . "--";
    mail($to, $subject, strip_tags($htmlMessage), str_replace("\r\n", "\n", $h)); 
```

# csv - 将数据从 csv 文件注册到 mnesia 数据库

> ID：14535938
> 
> 赞同：1
> 
> 时间：2013-01-26T10:16:01.820
> 
> 标签：csv, erlang

我想将 csv 文件中的数据存储在 mnesia 数据库中（特别是在名为“ **user** ”的表中）

我在这个论坛中找到了这种解决方案：

创建名为**csv.erl 的**文件：

```
%%% --- csv parser in Erlang. ------
%%% To help process large csv files without loading them into
%%% memory. Similar to the xml parsing technique of SAX

-module(csv).
-compile(export_all).

parse(FilePath,ForEachLine,Opaque)->
    case file:open(FilePath,[read]) of
        {_,S} ->
            start_parsing(S,ForEachLine,Opaque);
        Error -> Error
    end.

start_parsing(S,ForEachLine,Opaque)->
    Line = io:get_line(S,''),
    case Line of
        eof -> {ok,Opaque};
        "\n" -> start_parsing(S,ForEachLine,Opaque);
        "\r\n" -> start_parsing(S,ForEachLine,Opaque);
        _ -> 
            NewOpaque = ForEachLine(scanner(clean(clean(Line,10),13)),Opaque),
            start_parsing(S,ForEachLine,NewOpaque)
    end.

scan(InitString,Char,[Head|Buffer]) when Head == Char -> 
    {lists:reverse(InitString),Buffer};
scan(InitString,Char,[Head|Buffer]) when Head =/= Char ->
    scan([Head|InitString],Char,Buffer);
scan(X,_,Buffer) when Buffer == [] -> {done,lists:reverse(X)}.
scanner(Text)-> lists:reverse(traverse_text(Text,[])).

traverse_text(Text,Buff)->
    case scan("",$,,Text) of
        {done,SomeText}-> [SomeText|Buff];
        {Value,Rem}-> traverse_text(Rem,[Value|Buff])
    end.

clean(Text,Char)-> 
    string:strip(string:strip(Text,right,Char),left,Char). 
```

创建功能**测试：**

```
test()->

    ForEachLine = fun(Line,Buffer)-> io:format("Line: ~p~n",[Line]),Buffer end,

 InitialBuffer = [],

 csv:parse("/home/include/user.csv",ForEachLine,InitialBuffer). 
```

但是此解决方案仅在 Erlang 控制台中显示数据（它显示 csv 文件中的每一行），但我的目标是将 csv 文件中的这些行存储在用户表中。

我已经创建了用户记录

```
-record(user, {id, firstname, lastname, birthday}). 
```

将行从 csv 文件注册到**用户**表，我尝试使用

```
test()->

    ForEachLine = fun(Line,Buffer)-> io:format("Line: ~p~n",[Line]),Buffer end,

 InitialBuffer = [],

 csv:parse("/home/test/user.csv",ForEachLine,InitialBuffer),

   F = fun() ->
         Line=#user{},
         mnesia:write(Line),                               
         {ok}

     end,
     {atomic, Val} = mnesia:transaction(F),
     Val. 
```

但是这个函数不会在用户表中插入数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:26:17.040

你需要做几件事：

*   在 mnesia 中创建一个模式来保存您的数据。那就是创造一个`#user{}`记录。
*   把你的台词做成类型的记录`R = #user{}`
*   `mnesia:write(R)`在事务内部调用。为了使其更快，您可以在同一个事务中批量写入几次，或者简单地使用`mnesia:dirty_write(R)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:11:37.707

我是这个模块的作者。现在，您已传递给库以应用于它找到的每一行的功能对象，您可以根据自己的喜好对其进行自定义。例如：

```
F = 乐趣（线，_）->
        [Id,Firstname, Lastname, Birthday] = 线，
        U = #用户{
            身份证=身份证，
            名字 = 名字，
            姓氏 = 姓氏，
            生日=生日
        },
        mnesia:dirty_write(U),
        []
    结尾。

```

现在，请记住，如果文件的格式非常好`.csv`，这意味着每一行都与下一行相同，那么模式匹配就可以了，就像我在`Fun`上面所做的那样。通常，标题（文件中的第一行`.csv`）将显示整个数据集中的列，以便前面的行可以使用第一行作为模板。

把它放在一边，看看这条线，然后把它`Line`转换成一个 erlang 记录。您可以将该`Buffer`变量用作计数器，因为它随后会在每次`Fun`调用时更新。请记住，`Fun`退出时带有更新的`Buffer`变量，以便它可以将其应用于`.csv`文件中的下一行。因此，如果您`recursion`非常了解，您的 Buffer 变量可以是一个整数，从开始，然后在每次调用`Zero`结束时递增它。`Fun`这是一个例子：

```
F = 乐趣（线，计数器）->
        [Id,Firstname, Lastname, Birthday] = 线，
        U = #用户{
            身份证=身份证，
            名字 = 名字，
            姓氏 = 姓氏，
            生日=生日
        },
        mnesia:dirty_write(U),
        计数器 + 1
    结尾。

```

在上面的示例中，您`Buffer`现在只是一个计数器。这将自动显示从文件插入到 mnesia 的记录总数`.csv`。

请记住 erlang 数据结构的通用性。你的`Fun`，只要它被构造成带有两个变量，第一个是 Line，你可以将它自定义为任何东西。在 内部`Fun`，您甚至可以将 发送`Line`到另一个 erlang 节点或 erlang 进程。像这样：

```
F = 乐趣（线路，服务器）->
        [Id,Firstname, Lastname, Birthday] = 线，
        U = #用户{
            身份证=身份证，
            名字 = 名字，
            姓氏 = 姓氏，
            生日=生日
        },
        服务器 ！{from_csv,U}
        服务器
    结尾。

```

在上面的示例中，您的`Buffer`变量是一个常量，它是您将从文件中发送每条记录的进程的`Pid`或。总之， Buffer 变量可能会或可能不会在每次后续调用下一行时更新，这取决于您。您可能只是在. 然后，每个都必须进行模式匹配，然后转换为适当的。`Registered Name``.csv``Fun``Fun``Line``Mnesia record`

* * *

**主要答案编辑**

现在，在库模块中，我假设`delimiter`您的`.csv`文件是`comma`. 在那个模块中，我想让你看一下函数：`traverse_text/2`，它目前看起来像这样：

```
traverse_text(Text,Buff)->
    case scan("",$,,Text) of
        {done,SomeText}-> [SomeText|Buff];
        {Value,Rem}-> traverse_text(Rem,[Value|Buff])
    结尾。

```

请更改上述功能以反映您`DELIMITER`的 . 例如，如果`delimiter`是 a `semi-colon ( ; )`，则该函数变为：

```
traverse_text(Text,Buff)->
    case scan("",$;,Text) of
        {done,SomeText}-> [SomeText|Buff];
        {Value,Rem}-> traverse_text(Rem,[Value|Buff])
    结尾。

```

因此，如果您`delimiter`有所不同，只需按照我在上面显示的那样更改该功能（我希望您看到符号在哪里，在哪里看到`dollar sign, followed by your actual delimiter`）。然后，重新编译并重新加载该模块。如果您遇到更多挑战，请告诉我。

# algorithm - 函数的复杂度是多少 f(n) = f(n-1)+f(n-2)+f(n-3)+...+1

> ID：14535939
> 
> 赞同：1
> 
> 时间：2013-01-26T10:16:11.687
> 
> 标签：algorithm, time-complexity

计算 n 的这个函数的时间复杂度是多少。

```
int rec(int n)
{
    if (n<=1) {
        return n ;
    }
    int i;
    int sum=0;
    for (i=1; i<n; i++) {
       sum=sum+rec(i); 
    }
    return sum ;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T10:35:55.960

好吧，让我们打破这个

```
 (1)        f(n) = f(n-1) + f(n-2) + ... f(1) + 1 
```

然而，

```
 (2)        f(n-1) = f(n-2) + ... f(1) + 1 
```

所以将（2）插入（1）给出

```
 (3)        f(n) = f(n-1) + f(n-1) = 2 f(n-1) 
```

并且 f(2) = 1，所以这显然是 2 ^n（详情：[无法计算出这种递归的复杂性](https://stackoverflow.com/questions/14423832/can-not-figure-out-complexity-of-this-recurrence/14424445#14424445)）。好吧，实际上是 2 ^(n-1)但在大 O 中，这并不重要，因为^(-1)与 /2 相同。

# javascript - 如何达到以下效果？

> ID：14535941
> 
> 赞同：-4
> 
> 时间：2013-01-26T10:16:26.997
> 
> 标签：javascript, jquery, html

如果我们打开以下网站 - [http://www.gazelle.com/](http://www.gazelle.com/)并将鼠标悬停在图像上，我们会看到图像上的一些效果（所有图像都变灰，只有一个图像是彩色的）。

拜托，叫出效果的名字吧，我自己研究再多写代码，就是看不懂核心思想。

我试图查看代码。首先，我认为他们会在鼠标悬停时更改图像，但事实并非如此。我看到只有图像显示： http: [//m0-beta.gazelle.com/images/pages/index/main_stack_products.png](http://m0-beta.gazelle.com/images/pages/index/main_stack_products.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:25:29.633

每个`<li>`元素都有您发现的背景图像。并且`background-position`每个`<li>`. （这样每个`<li>`显示一个图像）

有一个 css 规则（它也可以是一个 javascript 函数），当您的鼠标光标位于一个图像上时，它会改变其他图像的不透明度。即，如果您将鼠标放在 ipad 上，所有其他人`<li>`的不透明度都将设置为 0.5

这是网站实现效果的方式。

编辑：如果您检查 HTML 元素，您可能会看到所有这些行为发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:28:39.850

两个样式规则就足够了。假设有一个 .container 元素，其中包含许多 .image 元素。.image 元素可以是带有背景精灵图像的 IMG 或 DIV 或 LI，如您提到的示例中那样，没关系。效果可以这样实现：

```
.container:hover .image { opacity: .5; }
.container:hover .image:hover { opacity: 1; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T10:37:41.027

我会通过使用 CSS 和 :hover CSS 伪类来做到这一点，如下所示：

```
<ul>
    <li class="one">Object 1</li>
    <li class="two">Object 2</li>
    <li class="three">Object 3</li>
</ul> 
```

和

```
ul li {
    width: 110px;
    height: 180px;
    text-align: center;
    display: inline-block;
    background: url('http://m0-beta.gazelle.com/images/pages/index/main_stack_products.png') no-repeat 0 0;
}
ul:hover > li {
    opacity: 0.6;
}
ul li:hover {
    opacity: 1;   
}
ul li.one {
    background-position: -110px 20px;   
}
ul li.two {
    width: 120px;
    background-position: -230px 20px;   
}
ul li.three {
    width: 100px;
    background-position: -365px 20px;   
} 
```

[http://jsfiddle.net/xESQK/](http://jsfiddle.net/xESQK/)

另一种解决方案是使用相同 HTML 的 jQuery（可以在此处使用超时）：

```
$(document).ready(function() {
    $('ul li').bind('mouseover', function() {
        $siblings = $(this).siblings();
        $siblings.animate({"opacity": "0.4"}, "fast"); 
    }).bind('mouseout', function() {
        $siblings.css('opacity', 1).stop(); 
    });
}); 
```

[http://jsfiddle.net/xESQK/2/](http://jsfiddle.net/xESQK/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T10:30:13.257

你可以这样使用。[演示](http://jsfiddle.net/xhYcD/220/)

```
$(document).ready(function() {

    $('#special a').bind('mouseover', function(){
        $(this).parent('li').css({position:'relative'});
        var img = $(this).children('img');
        $('<div />').text(' ').css({
            'height': img.height(),
            'width': img.width(),
            'background-color': 'orange',
            'position': 'absolute',
            'top': 0,
            'left': 0,
            'opacity': 0.5
        }).bind('mouseout', function(){
            $(this).remove();
        }).insertAfter(this);
    });

}); 
```

# iphone - CIFeature：只有人脸检测吗？我可以添加行为吗？

> ID：14535944
> 
> 赞同：2
> 
> 时间：2013-01-26T10:16:56.973
> 
> 标签：iphone, ios, objective-c, cocoa-touch, core-image

我在核心图像指南中阅读了以下内容：

Core Image 框架提供：

*   访问内置图像处理过滤器
*   特征检测能力
*   支持自动图像增强
*   将多个过滤器链接在一起以创建自定义效果的能力

我看到了 API，发现特征检测功能是使用 CIFeature 实现的，但根据文档 CIF​​eature 当前仅支持检测人脸。

我可以通过扩展类来实现其他类型的检测吗？如果没有，Apple 是否计划在未来公开此类 API？例如，我不想检测人脸，而是想检测图像中的宠物或电视。

我进行了研究，我认为剩下的唯一方法是利用 OpenCV 等开源项目。

如果我能得到更多的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:28:50.043

我想向您指出一个开源项目[GPUImage](https://github.com/BradLarson/GPUImage)。使用这个框架，您可以编写自己的过滤器来检测与面部不同的特征。该框架已经嵌入了一些过滤器来检测特征。

# linux - 在 rpc 中登录的用户数

> ID：14535946
> 
> 赞同：4
> 
> 时间：2013-01-26T10:17:11.110
> 
> 标签：linux, networking, rpc

我是 rpc 的新手，即 iam 处于学习阶段我想找出从以下程序登录的用户的数量，我像这样编译“cc samrpc.c -lrpcsvc”，但它显示的错误和警告是

```
 samrpc.c: In function ‘main’:
 samrpc.c:9:1: warning: incompatible implicit declaration of built-in function ‘exit’       [enabled by default]
  samrpc.c:13:1: warning: incompatible implicit declaration of built-in function ‘exit’    [enabled by default]
/tmp/ccxyIUNJ.o: In function `main':
samrpc.c:(.text+0x51): undefined reference to `rnusers'
collect2: error: ld returned 1 exit status 
```

你能详细告诉我如何编译程序吗？我需要注意的是：samrpc.c 是程序名称，我的程序在下面

```
 #include <stdio.h>
 int main(argc, argv)
 int argc;
 char **argv;
 { 
 int num;
  if (argc != 2) {
 fprintf(stderr, "usage: rnusers hostname\n");
 exit(1);
 }
 if ((num = rnusers(argv[1])) < 0) {
 fprintf(stderr, "error: rnusers\n");
 exit(-1);
 }
 printf("%d users on %s\n", num, argv[1]);
 return 0;
 } 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-12-18T16:13:34.750

检查您的代码

> ld 返回 1 退出状态意味着您对主函数有未定义的引用**由于哪个链接器找不到程序的入口点**
> 
> > 在您的代码 main 中没有正确定义您的运行时参数也没有正确传递

```
#include <stdio.h>
#include<process.h>
int main(int argc,char ** argv)
{
 int num;
  if (argc != 2) {
 fprintf(stderr, "usage: rnusers hostname\n");
 exit(1);
 }
 if ((num = rnusers(argv[1])) < 0) {
 fprintf(stderr, "error: rnusers\n");
 exit(-1);
 }
 printf("%d users on %s\n", num, argv[1]);
 return 0;
 } 
```

正确定义 main 并且它应该可以工作

# multithreading - 多线程中 ABA 的真实示例

> ID：14535948
> 
> 赞同：14
> 
> 时间：2013-01-26T10:17:34.780
> 
> 标签：multithreading, concurrency, atomic, compare-and-swap

我正在寻找一些在多线程代码中引起问题的*ABA 问题的真实示例。*

在执行原子*比较和交换*指令时，并发代码中会出现 ABA 问题。如果线程在执行比较和交换之前立即中断，则第二个线程可能会将比较和交换的目标从其初始值 A 更改为不同的值 B。如果然后将值更改回 A在第一个线程恢复之前，尽管目标值发生了变化，比较和交换仍将成功。

在许多情况下，ABA 不是问题。以共享引用计数为例：即使 refcount 并发改变我们也没有问题，只要我们从不从已经下降到 0 的 refcount 增加。所以我们显然只关心目标是否匹配交换时的期望值，而不是过去是否发生变化。

维基[百科页面](http://en.wikipedia.org/wiki/ABA_problem)有一个受 ABA 影响的无锁堆栈实现示例，但到目前为止，我个人还没有在生产代码中遇到过这个问题。我只是好奇是否有人有一些关于 ABA 的好战争故事要分享。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T00:36:10.320

假设您想使用传统的链表实现有序列表。假设您想在列表中添加一个新值 V。首先，你要找到合适的位置，使用辅助指针AUX插入新元素，并将其定位在最后一个值小于V的节点，同时保存AUX->next，以便在CAS操作中进行比较。一旦有了引用，您将 NEW->next 指向 AUX->next，然后使用 CAS，如果 AUX->next 仍然是您保存的相同引用，则将 AUX->next 切换为 NEW。它应该是这样的：

```
AUX = list.HEAD;
WHILE( AUX->next.value < V)
    AUX = AUX->next;
OLD = AUX->next; //line 4
NEW->next = AUX->next; //line 5
IF( CAS(AUX->next, NEW, OLD)) //line 6
    Success!!!
ELSE
    Try again or whatever 
```

这是最简单的方法。问题是在第 4 行和第 5 行之间，另一个线程可能已经删除了“OLD”，然后插入了另一个小于 V 但仍大于 AUX.value 的元素 X。如果发生这种情况，并且分配给值为 X 的节点的内存与曾经拥有 OLD 的地址相同，则 CAS 将成功，但列表不会被排序。如果第二个线程的动作发生在第 5 行和第 6 行之间，您将丢失值为 X 的节点。所有这些都是因为 ABA 问题。

# qt - Qt 将信号与自定义插槽匹配

> ID：14535950
> 
> 赞同：0
> 
> 时间：2013-01-26T10:17:40.627
> 
> 标签：qt, signals-slots, qwidget

我正在尝试使用 QAction（QMenu 成员条目）打开一个新窗口。准确地说：我想要`actionAbout`预定义的信号`activated`以匹配`MainWindow`自定义插槽`open AboutWindow`- 这就是我遇到的麻烦。

我知道我可以`connect`在源 main_window.cpp 文件中手动使用 Qt 函数，或者只是在 Qt Creator 中单击它，但是我的自定义插槽没有显示，所以我无法选择它。也许我的槽函数声明是错误的（无效参数），这就是为什么 QtCreator 不允许我在 GUI 中选择我的自定义槽`signals & slots`。谁能指出我应该怎么做才能让 QtCreator 在下拉列表中显示我的自定义插槽以及连接函数调用应该如何？

这是我的 main_window.h 文件内容：

```
＃包括
#include “about_window.h”

命名空间 ui {
    类主窗口；
}

类 MainWindow : 公共 QMainWindow
{
    Q_OBJECT

上市：
    显式 MainWindow(QWidget *parent = 0);
    〜主窗口（）；

公共插槽：
   无效 openAboutWindow();

私人的：
    ui::主窗口 *ui;
    Ui::AboutWindow *aboutWindow;
};

```

这是 main_window.cpp：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow（父），
    ui(新的 Ui::MainWindow)
{
    ui->setupUi(这个);
    连接（actionAbout，信号（激活（）），这个，SLOT（openAboutWindow（这个））；
}

主窗口::~主窗口()
{
    删除用户界面；
}

无效 MainWindow::openAboutWindow(QWidget *parent)
{
   aboutWindow = new Ui::AboutWindow(parent); // 一定要在某个地方销毁你的窗口
   aboutWindow->show();
}

```

编译器对构造函数和 openAbutWindow 大喊大叫：

```
../Application/main_window.cpp：在构造函数'MainWindow::MainWindow(QWidget*)'中：
../Application/main_window.cpp:9:13：错误：未在此范围内声明“actionAbout”
../Application/main_window.cpp:9:80: 错误：在 ';' 之前预期 ')' 令牌
../Application/main_window.cpp：在成员函数'void MainWindow::openAboutWindow(QWidget*)'中：
../Application/main_window.cpp:19:44：错误：无效使用不完整类型'struct Ui::AboutWindow'
../Application/about_window.h:7:11: 错误：'struct Ui::AboutWindow' 的前向声明
../Application/main_window.cpp:20:15：错误：无效使用不完整类型'struct Ui::AboutWindow'
../Application/about_window.h:7:11: 错误：'struct Ui::AboutWindow' 的前向声明

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:33:10.900

```
../Application/main_window.cpp:9:13: error: ‘actionAbout’ was not declared in this scope 
```

错误信息说明了一切，`QAction`定义在哪里？应该是`ui->actionAbout`吗？

```
connect(actionAbout, SIGNAL(activated()), this, SLOT(openAboutWindow(this)); 
```

`openAboutWindow()`不接受任何参数，并且不管`this`是实例不是类型。

# php - 从浏览器打印到 pos 打印机（php 中的网络应用程序）

> ID：14535954
> 
> 赞同：1
> 
> 时间：2013-01-26T10:18:14.120
> 
> 标签：php, printing

> **可能重复：**
> [通过网络直接打印到打印机（如 POS 打印机）的最佳方式是什么？](https://stackoverflow.com/questions/1174555/whats-the-best-way-to-directly-print-to-a-printer-like-pos-printer-over-the-w)

我想从浏览器将一些简单的文本打印到 POS 打印机（许多不同的型号）。可能有不同的型号，但可以肯定的是打印机将连接到 Windows 计算机并安装其驱动程序。打印机可能通过 USB、串行或以太网连接。因此，我希望 Windows 计算机的用户能够在我的 Web 应用程序中按下按钮（单击）并打印到特定的 POS 打印机。该网络应用程序是用 php 编写的，并使用 jquery。所以我要问的是，这怎么可能，这是最简单和最好的方法。我应该使用javascript还是其他什么？有图书馆吗？如果有多个 pos 打印机型号，我会面临兼容性问题吗？

以下内容可以完成我需要的工作吗？

[http://code.google.com/p/jzebra/](http://code.google.com/p/jzebra/)

# facebook - Facebook。批准权限后错误的重定向链接

> ID：14535960
> 
> 赞同：0
> 
> 时间：2013-01-26T10:19:01.373
> 
> 标签：facebook, facebook-graph-api, redirect, permissions

所以我有一个小问题，当用户第一次使用我的应用程序时，它被重定向到：

```
http://www.facebook.com/MY_APP.../?state=f5c913239670dc934fae1274a81fa538&code=AQAmY5k8gRRt7woNKmpc_6z2eHgT-2B3prjNEDYFma1KqpQDKob-CS_bWfqd0qPkQD-tGoVdKUK8twGZRnLhoiotpZ3SlBeo3uusfmMyWDYStv-D79RvQEP8m9M8S8GYlbN3x1eLEd4D3RajWokTNAhRP8a1VB9VSKAb35xXFzg3PkheRKHqjr-nex5jcjM7Nv2B_JEV1w8AzM2LJg2M9kAb#_=_ 
```

我得到错误：`page not found`

在许可批准期间，我的链接是：`https://www.facebook.com/dialog/oauth?client_id=456080124457246&redirect_uri=http%3A%2F%2Fpadekime.wu.lt%2Fplaukai%2Findex.php&state=2c46a86dae43af0467da756bc3e52779&scope=publish_stream%2Cphoto_upload`

我添加了重定向链接，现在它转到：

```
http://www.padekime.wu.lt/plaukai/kontekstas/?state=5abfd521df3c68ae55f26ad51a704743&code=AQDMmpZC-_Yxatq4xuAE60Tl2qW4pXCvDeghrbMGGu3Lg1X8zqrk-lvxRc3VOoYvgoLvATJhcsyykZnPoM7XI2sXih-nJhKrjx-HS3GFapELmC4KvX4KyN-VU-znHopkA-q_zcuIffJ0tY79CXPn7mo05BpxfvPntXaUAe7ymLf1p8Kg29eERaP5nw1dChbwwZ13FNY7BXD2ymAsFHPNH5zw#_=_ 
```

`http://www.facebook.com/Padekime/app_456080124457246`在没有/?state=.....的情况下，可以在获得许可后正常进入我的应用程序吗？

我的代码现在看起来像：

```
<?php 
require_once('images/Facebook.php');

  $facebook = new Facebook(array(
    'appId'  => '456080124457246',
    'secret' => 'e2956a6e1de8791363faedb1ef44c408',
  ));

  # Get User ID
  $user = $facebook->getUser();

  if ($user) {
    try {
$redirectUri = 'http://www.padekime.wu.lt/plaukai/kontekstas/';
  # Photo Caption
  $photoCaption = 'Patarimų plaukams sužinojau čia http://goo.gl/otwhf';

  # Absolute Path to your image.
  $imageUrl = 'http://padekime.wu.lt/plaukai/images/PlaukaiNeuzvedus.jpg'; // Example URL

  # Post Data for Photos API
  $post_data = array(
      'message' => $photoCaption,
      'url' => $imageUrl,
      'redirect_uri' => $redirectUri

  );

      $apiResponse = $facebook->api('/me/photos', 'POST', $post_data);

    } catch (FacebookApiException $e) {
      $user = null;
      error_log($e);
    }
  } else {
$redirectUri = 'http://www.padekime.wu.lt/plaukai/kontekstas/';
    $loginUrl = $facebook->getLoginUrl( array(
        'scope' => 'publish_stream,photo_upload',
        'redirect_uri' => $redirectUri
    ));
    echo("<script>top.location.href = '" . $loginUrl . "';</script>");
  }
?> 
```

据我了解，问题出在此处，但我无法解决。

```
$loginUrl = $facebook->getLoginUrl( array(
    'scope' => 'publish_stream,photo_upload'    
));
echo("<script>top.location.href = '" . $loginUrl . "';</script>"); 
```

因此，如果您对此有所了解，请帮助我，非常感谢。

**解决方案：**

我将 ?ref=ts 添加到 $redirectUri：

`$redirectUri = 'http://www.facebook.com/Padekime/app_456080124457246?ref=ts';`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:34:56.827

解决方案：

我将 ?ref=ts 添加到 $redirectUri：

$redirectUri = ' [http://www.facebook.com/Padekime/app_456080124457246?ref=ts](http://www.facebook.com/Padekime/app_456080124457246?ref=ts) ';

# cakephp - 带有 CakePHP 的 ExtJS 4 - 选项卡中显示的 PDF（webroot 中的 mod_rewrite）

> ID：14535964
> 
> 赞同：0
> 
> 时间：2013-01-26T10:19:38.467
> 
> 标签：cakephp, extjs4, cakephp-2.2

我在 app/webroot/files/Users.pdf 中使用 TCPDF 创建了一个 PDF。现在，当我在浏览器中输入一个 URL 时，我会下载一个 PDF 并且效果很好。

但是当我将相同的 URL 放在 Ext-JS 4 中时，`panel`我得到：

```
No FilesController found 
```

如果我真的想要 URL，如何禁用 mod_rewrite `/php/app/webroot/files/Users.pdf`？非常感谢。:)

这是面板：

```
var tab = controller.tabs.add(Ext.widget('panel', {
                                    //icon: 'icons/doc_pdf16.png',
                        title: module,
                        layout: 'fit',
                        id: tabid+'Tab',
                        closable: true, 
                        items: [{ 
                                        xtype: 'box',
                                        autoEl: {
                                            tag: 'iframe',
                                            style: 'height: 100%; width: 100%',
                                            src: 'php/app/webroot/files/Users.pdf'
                                        }
                                    }] 
                                })); 
```

**编辑！** URL 更改为：src: 'php/files/Users.pdf' 现在它会下载它，但我希望它在我的选项卡中呈现。一些标题或什么？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:48:07.273

下载和显示之间的决定取决于标题。所以将内容配置设置为内联： header('Content-Disposition: inline; filename="??.pdf"');

# php - AJAX 联系表单发送空参数

> ID：14535966
> 
> 赞同：0
> 
> 时间：2013-01-26T10:19:56.357
> 
> 标签：php, ajax

ajax 函数返回一个表单。我想将此表单值发送到其他 ajax 函数。

Chrome 没有问题，但 Firefox 无法做到这一点并发送空值！

例如，我返回一个带有 ajax 的编辑表单，而编辑按钮功能无法获取/发布表单值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:19:52.647

听起来您有事件处理程序问题。也许你所有的事件处理代码都是在你的新表单存在于 dom 之前运行的？如果没有示例代码，我们不知道您是如何尝试完成此任务的。也许，在您的表单标签中，包含一个 onsubmit 属性来处理您的提交：

```
<form onsubmit="sendForm(this); return false;">
<script>
    function sendForm(obj) {
        var data = $(obj).serialize();
        $.post('myEndpoint.cfm',data, function(response){
            // response handling code here.

        });
    }
</script> 
```

# dojo - Dojo 1.8 XMLStore

> ID：14535972
> 
> 赞同：1
> 
> 时间：2013-01-26T10:20:48.050
> 
> 标签：dojo

如何在 Dojo 1.8 API 中定义 XML 存储

在旧 API 中，我们定义它是这样的

```
var store = new dojox.data.XmlStore({url: "books.xml", rootItem: "book"});
var gotBooks = function(items, request){
  for(var i = 0; i < items.length; i++){
    var item = items[i];
    console.log("Located book: " + store.getValue(item, "title");
  }
}
var request = store.fetch({query: {isbn:"A9B57*"}, onComplete: gotBooks}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:24:02.030

这是books.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<books>
  <book>
      <isbn>1</isbn>
      <title>Title of 1</title>
      <author>Author of 1</author>
  </book>
  <book>
      <isbn>2</isbn>
      <title>Title of 2</title>
      <author>Author of 2</author>
  </book>
  <book>
      <isbn>3</isbn>
      <title>Title of 3</title>
      <author>Author of 3</author>
  </book>
  <book>
      <isbn>4</isbn>
      <title>Title of 4</title>
      <author>Author of 4</author>
  </book>
  <book>
      <isbn>5</isbn>
      <title>Title of 5</title>
      <author>Author of 5</author>
  </book>
  <book>
      <isbn>6</isbn>
      <title>Title of 6</title>
      <author>Author of 6</author>
  </book>
</books> 
```

**您可以使用以下代码查看这个新 API：**

```
<script type="text/javascript" src="web/dojo/dojo.js" data-dojo-config="async: true"></script>

<script>
 require(["dojox/data/XmlStore"],
          function(XmlStore){
      var store = new XmlStore({url: "http://localhost:8080/DojoProject/book.xml", rootItem: "book"});
      var gotBooks = function(items, request){
        for(var i = 0; i < items.length; i++){
          var item = items[i];
          console.log("Located book: " + store.getValue(item, "title"));
        }
      }
      var request = store.fetch({query: {isbn:"1"}, onComplete: gotBooks});

          });
</script> 
```

# css - 奇怪的文本定位

> ID：14535979
> 
> 赞同：0
> 
> 时间：2013-01-26T10:21:28.687
> 
> 标签：css

我不明白为什么#intro 中的段落中的文本以这样的方式定位自己：[http](http://www.physoc.org.uk/) ://www.physoc.org.uk/ （“大家好……”文本靠近顶部页）。

我只有在#intro 上有样式：

```
#intro {
    position:relative;
    top:160px;
    height:87px;
    background-color: rgba(255,255,255,0.6);
    border-radius: 10px;
    moz-border-radius: 10px;
    webkit-border-radius: 10px;
    font-size: 18px;
    font-weight:bold;
} 
```

， 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:27:06.897

尝试这个：

```
#intro p {
    margin: none;
    position: relative;
    top: -140px;
    left: 10px;
} 
```

### 截屏：

![](../Images/07a1181d98bfba62d2d1ee587962a157.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:30:38.827

或者你可以这样做：

```
#intro{ position: absolute; width: inherit; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:45:42.140

尝试给 p 标签绝对定位：

```
 #intro{
       position:absolute;
   } 
```

# javascript - 以页面为基础添加 Kickstrap 应用程序，无需额外的文件

> ID：14535980
> 
> 赞同：1
> 
> 时间：2013-01-26T10:21:38.877
> 
> 标签：javascript, kickstrap

我正在使用 Kickstrap 1.3.0 并希望使用类似`<?php $this->enableKickstrapApp('myapp'); ?>`. 此方法会将应用程序名称放入应用程序数组中，并且布局模板可以在页面中的任何位置生成任何代码来激活应用程序。

但我不知道如何加载应用程序。文档说我应该添加一个特定于页面的较少文件。但我不想自动生成这样一个额外的文件（如果没有更好的解决方案，我会这样做）。`loadApp()`API 文档中还提到了一个 API 方法。但是源代码中似乎没有`loadApp`。也没有记录如何获取 API 对象（也许这应该是一个全局方法——我找不到它）。在 GitHub 上的一个可能已经过时的文档中，我找到了编写 pageApps 数组的技巧。但是扫描“pageApps”的源代码也没有结果。

有什么方法可以动态激活应用程序（或在全局 ks 变量中）而无需额外的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:24:08.737

这样可行：

```
var ks = {
    apps: ['myapp']
} 
```

当然必须在加载之前定义`kickstrap.js`。

# c# - 如何在我不能使用线程的情况下让返回以使用回调系统？

> ID：14535981
> 
> 赞同：2
> 
> 时间：2013-01-26T10:21:40.390
> 
> 标签：c#, unity3d, yield-return

所以我想做一个有一堆静态方法的对象。这些方法是远程服务器的 API。我正在阅读并认为我可以使用统一`StartCoroutine`方法，但在这种情况下不可用，所以现在我不知道该去哪里。

一般的想法是我希望能够调用我的对象的一个​​方法，将它传递给一个委托并让 id 离开并完成它的工作。完成后，使用结果调用委托。我不能使用线程，因为 Unity3D 不是线程安全的。

我知道 c# 有这个`yield`东西，我已经在几个地方读过它，但它仍然让我感到困惑。如何重构下面的代码，以便完成我正在尝试做的事情？

```
public class Server
{
        private static string baseURL = "http://localhost/game.php";
        private static Hashtable session_ident = new Hashtable();

        //--- Public API
        public delegate void DeviceSeenCallback(bool seen);
        public static void DeviceSeen(DeviceSeenCallback callBack) {
                StartCoroutine(DoDeviceSeen(callBack));
        }

        public delegate void AuthenticateCallback(bool authenticated, string errorMessage);
        public static void Authenticate(string username, string passwordHash, AuthenticateCallback callBack) {
                StartCoroutine(DoAuthenticate(username, passwordHash, callBack));
        }

        //--- Private API
        private static IEnumerator DoDeviceSeen(DeviceSeenCallback callBack)
        {
                WWWForm form = new WWWForm();
                form.AddField("deviceID", SystemInfo.deviceUniqueIdentifier);

                WWW www = new WWW(baseURL + "?cms=seen", form.data, session_ident);
                        yield return www;

                // Check for errors
                callBack(ResultIsOk(www.text));
        }

        private static IEnumerator DoAuthenticate(string username, string passwordHash, AuthenticateCallback callBack)
        {
                WWWForm form = new WWWForm();
                form.AddField("deviceID", SystemInfo.deviceUniqueIdentifier);
                form.AddField("deviceType", SystemInfo.deviceType.ToString() + "||" + SystemInfo.deviceModel);
                form.AddField("user", username);
                form.AddField("pass", passwordHash);

                WWW www = new WWW(baseURL + "?cms=auth", form.data, session_ident);
                        yield return www;

                if (ResultIsOk(www.text)) {
                        callBack(true, "");
                } else {
                        int code;
                        string message;
                        ResultGetError(www.text, code, message);
                        callBack(false, message);
                }
        }

        private static bool ResultIsOk(string resultText) {
                return false;
        }

        private static void ResultGetError(string resultText, out int code, out string message) {
                code = -1;
                message = "Some Error Message";
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:40:41.287

您在使用 Unity 时经常遇到的技巧是，您的代码运行的唯一上下文是在脚本回调期间。

这基本上意味着最终在某个地方，您必须在场景中拥有一个游戏对象，并将 MonoBehaviour 附加到所述对象，该对象调用您想要重复运行的代码。

除了在继承自 MonoBehaviour 的类的实例中没有可用的 StartCoroutine 之外，您还存在一个问题，即您需要在每一帧左右执行代码以检查某些内容。除了制作一个 MonoBehaviour 之外，没有真正的解决方法，只需接受它。

一个常见的模式是创建一个单例游戏对象，它要么调用了 DontDestroyOnLoad，要么根据每个场景的需要重新创建。您甚至可以将一个对象指定为与特定类或任何东西无关的“协程存储桶”。从字面上看，它是一个空的 MonoBehaviour，它的唯一目的是启动协程。

您可以通过将 Server 类设置为 MonoBehaviour 来快速解决此问题：

然后通过添加一个单例属性：

```
 private static Server ServerObject {
        get { 
            if (_serverObject == null) {
                var gameObj = new GameObject("Server Object");
                _serverObject = gameObj.AddComponent<Server>();
                GameObject.DontDestroyOnLoad(_serverObject); // Optional
            }
            return _serverObject;
        }
    }
    private static Server _serverObject; 
```

（单身很恶心，但在这种情况下这是必要的邪恶）

然后通过将所有`StartCoroutine`调用更改为在单例 MonoBehaviour 实例上调用：

```
 public static void DeviceSeen(DeviceSeenCallback callBack) {
            this.ServerObject.StartCoroutine(DoDeviceSeen(callBack));
    } 
```

[GoKit](https://github.com/prime31/GoKit)使用这种模式并创建了一个名为“Go”的 GameObject，它处理补间的所有逻辑。由于 Unity 没有提供一种方法来指定在不附加到游戏对象的情况下定期运行的脚本，因此这是我们能做的最好的事情。

如果您的 Server 类将保持很多状态，或者它不是必须保留在场景中的一部分，则建议您不要调用`DontDestroyOnLoad`它。如果场景发生变化并且 ServerObject 游戏对象被删除，对 _serverObject 的后续检查将显示为 null 并因此被重新实例化（因为 Unity 重载了 null 转换运算符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:31:44.987

为了统一，您通常必须进行手动线程处理（除非您的线程不对 Unity API 进行任何调用）。也就是说，例如`Authenticate`将一个轮询其结果的函数（没有阻塞调用！）推送到私有静态列表中。然后提供一个静态`Update`方法，它遍历列表并调用每个轮询方法，如果它表明它已经完成，则将其删除。当每个轮询方法完成时，它应该调用相关的回调。安排让您的应用程序`Update`定期调用此静态方法（例如，在通常的统一更新过程中）。

# java - 在 Java 中将常规日期转换为儒略日期，反之亦然

> ID：14535983
> 
> 赞同：6
> 
> 时间：2013-01-26T10:21:51.880
> 
> 标签：java, date, converter, julian-date

我编写了一个简单的代码，将常规日期转换为儒略日期。

这是需要相同转换的人的代码：

```
 public int convertToJulian(String unformattedDate)
    {
    /*Unformatted Date: ddmmyyyy*/
    int resultJulian = 0;
    if(unformattedDate.length() > 0)
    {
     /*Days of month*/
     int[] monthValues = {31,28,31,30,31,30,31,31,30,31,30,31};

     String dayS, monthS, yearS;
     dayS = unformattedDate.substring(0,2);
     monthS = unformattedDate.substring(3, 5);
     yearS = unformattedDate.substring(6, 10);

     /*Convert to Integer*/
     int day = Integer.valueOf(dayS);
     int month = Integer.valueOf(monthS);
     int year = Integer.valueOf(yearS); 

         //Leap year check
         if(year % 4 == 0)
         {
          monthValues[1] = 29;    
         }
         //Start building Julian date
         String julianDate = "1";
         //last two digit of year: 2012 ==> 12
         julianDate += yearS.substring(2,4);

         int julianDays = 0;
         for (int i=0; i < month-1; i++)
         {
          julianDays += monthValues[i];
         }
         julianDays += day;

             if(String.valueOf(julianDays).length() < 2)
             {
              julianDate += "00";
             }
             if(String.valueOf(julianDays).length() < 3)
             {
              julianDate += "0";
             }

        julianDate += String.valueOf(julianDays);
    resultJulian =  Integer.valueOf(julianDate);    
 }
 return resultJulian;
} 
```

此代码将 01.01.2013 转换为 113001

我想要做的是将儒略日期转换为没有时间细节的常规日期。例如：朱利安日期是 113029 ==> 常规日期 29.01.2013

请给我你的想法如何做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:06:55.163

如果你想要 113029 ==> 29.01.2013 试试

```
 String j = "113029";
    Date date = new SimpleDateFormat("Myydd").parse(j);
    String g = new SimpleDateFormat("dd.MM.yyyy").format(date);
    System.out.println(g); 
```

输出

```
29.01.2013 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T10:32:30.647

```
public static int[] julianToGregorian(double injulian) {
    int JGREG= 15 + 31*(10+12*1582);     
    int jalpha,ja,jb,jc,jd,je,year,month,day;
    double julian = injulian + 0.5 / 86400.0;
    ja = (int) julian
    if (ja>= JGREG) {
        jalpha = (int) (((ja - 1867216) - 0.25) / 36524.25);
        ja = ja + 1 + jalpha - jalpha / 4;
    }

    jb = ja + 1524;
    jc = (int) (6680.0 + ((jb - 2439870) - 122.1) / 365.25);
    jd = 365 * jc + jc / 4;
    je = (int) ((jb - jd) / 30.6001);
    day = jb - jd - (int) (30.6001 * je);
    month = je - 1;
    if (month > 12) month = month - 12;
    year = jc - 4715;
    if (month > 2) year--;
    if (year <= 0) year--;

    return new int[] {year, month, day};
} 
```

# android - 如何 ListView longClick 选择器？

> ID：14535991
> 
> 赞同：1
> 
> 时间：2013-01-26T10:22:59.047
> 
> 标签：android, android-listview, android-selector

我想在 longclick 上更改我的自定义列表视图的背景颜色。这是我的选择器，但只运行 onClick。我能做些什么 ？

***表行选择器.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_selected="true" 
        android:drawable="#8D2EE4" />

    <item android:state_activated="true" 
        android:drawable="@color/ThemeBlue" />

    <item android:state_activated="true" android:state_focused="false"
        android:drawable="@color/ThemeBlue" />   

    <item android:state_pressed="true" >
        <shape>
            <gradient
                android:startColor="#0266e9"
                android:endColor="#0484f2"
                android:angle="90" />

        </shape>
    </item>

    <item android:state_focused="true" >
        <shape>
            <gradient
                android:startColor="#bbccff"
                android:endColor="#dce4fd"
                android:angle="90" />                                
        </shape>
    </item>

    <item>        
        <shape>
            <solid android:color="#00000000"></solid>
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:29:34.147

将 LongClickListener (http://developer.android.com/reference/android/view/View.OnLongClickListener.html) 添加到表格行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:40:06.170

尝试这个 ：

```
YourList.setOnItemLongClickListener(new OnItemLongClickListener(){ 
    @Override   
    public boolean onItemLongClick(AdapterView parentView, View childView, int position, long id) {
    return true;}}); 
```

# sql - 将生产数据库中的表中的数据归档到辅助归档数据库中的同一表

> ID：14535992
> 
> 赞同：0
> 
> 时间：2013-01-26T10:23:13.573
> 
> 标签：sql

您好上周我被要求在 sql db 中存档一些表，我是 SQL 新手，我在其他问题中看到了一些代码。任何人都可以解释声明@nextid 表和UniqueID int 以下代码的内容，该代码不是我的，并且归功于所有者。

在我的情况下，我有一个主键调用附件ID，在数据库调用产品中名为附件的表中，日期列是附件日期。我不确定我是要替换 UniqueID 还是什么？如果可以的话请帮忙。

```
DECLARE @NextIDs TABLE(UniqueID int primary key)
DECLARE @ThreeYearsAgo datetime
SELECT @ThreeYearsAgo = DATEADD(d, -(3 * 365), GetDate())

WHILE EXISTS(SELECT 1 
             FROM [ISAdminDB].[dbo].[MyTable] 
             WHERE [MyTable].[DateTime] < @ThreeYearsAgo)
BEGIN 
    BEGIN TRAN 
       INSERT INTO @NextIDs(UniqueID)
        SELECT TOP 1000 UniqueID 
          FROM [ISAdminDB].[dbo].[MyTable] 
          WHERE [MyTable].[DateTime] < @ThreeYearsAgo

       INSERT INTO [ISArchive].[dbo].[MyTable] (<Fields>) 
        SELECT (<Fields>) 
        FROM  [ISAdminDB].[dbo].[MyTable] AS a
        INNER JOIN @NextIDs AS b ON a.UniqueID = b.UniqueID

       DELETE [ISAdminDB].[dbo].[MyTable]
       FROM  [ISAdminDB].[dbo].[MyTable] 
       INNER JOIN @NextIDs AS b ON a.UniqueID = b.UniqueID 

       DELETE FROM @NextIDs

       COMMIT TRAN
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:41:11.300

@NextIDs 是一个表变量。这里数据从 isadmin mytable 移动到表变量 @NextIDs 然后从 @NextIDs 移动到 isarchive mytable 之后 isadmin mytable 数据被删除

# database - 应用程序后端和网络？

> ID：14535995
> 
> 赞同：0
> 
> 时间：2013-01-26T10:23:23.903
> 
> 标签：database, networking

我不确定我使用的标题是否好，但希望我的问题会更好。

我有一个 Java 应用程序可以跟踪 PennyAuction 网站（例如 beezid.com）上的数据，并最终将所有数据上传到数据库。客户端将下载一个 java 应用程序并在他们的本地机器上运行它，但是这个本地机器应用程序必须能够访问数据库并获取所有数据。

我所做的只是java应用程序编程，所以这对我来说都是全新的。任何人都可以帮助我提供能够实现这一目标的解决方案吗？

这就是我能想到的：

1.  服务器将 24/7 运行后端应用程序，并使用 JDBC 将数据上传到数据库。
2.  单独的数据库服务器。

我不知道客户端应用程序应该如何连接到数据库。

任何有关此类内容的教程的帮助/链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:32:23.877

如果数据库位于公共 IP 上，您实际上可以让您的客户端直接连接到数据库。

一种架构上更好的方法是使用 Web 服务。这将使您的系统更加安全、健壮和可扩展。

Web 服务是通过万维网 (WWW) 的超文本传输​​协议 (HTTP) 进行通信的客户端和服务器应用程序。正如万维网联盟 (W3C) 所描述的，Web 服务提供了在各种平台和框架上运行的软件应用程序之间进行互操作的标准方法。由于使用了 XML，Web 服务的特点是它们具有很好的互操作性和可扩展性，以及它们的机器可处理描述。Web 服务可以以松散耦合的方式组合以实现复杂的操作。提供简单服务的程序可以相互交互以提供复杂的增值服务。