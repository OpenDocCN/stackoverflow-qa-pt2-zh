# StackOverflow 问答 15402000-15402999

# matlab - matlab gui中的数据处理-从文件和文本框中读取并传递给函数

> ID：15402005
> 
> 赞同：1
> 
> 时间：2013-03-14T05:39:42.880
> 
> 标签：matlab, user-interface

今天我的任务（由我的教授，谢谢先生）在 Matlab 中为我编写的脚本创建一个 GUI。该脚本用于设置一些值（从文本文件中读取、操作、分配给变量），然后调用三个函数来实际计算一些东西并将绘图打印到文件中——我猜这很简单。

我现在必须在 gui 中制作所有输入部分，我猜输出可以保持原样（计算很长，所以没有什么可以显示可能不耐烦的进度条）。

我对所有的句柄、hObject 等都很困惑，希望有人能指导我。

这是我到目前为止所做的：

我模拟的对象有几层，它们有两个属性，厚度和光学功能。我在“编辑文本”中输入厚度并使用按钮加载文件。

```
 % --- Executes on button press in load_cathode.
function load_cathode_Callback(hObject, eventdata, handles)
[filename, pathname] = uigetfile('*.txt');
loaddata = fullfile(pathname,filename);
cathode_nk=load(loaddata); handles.cathode = [cathode_nk(:,1)'; cathode_nk(:,2)'.^2-cathode_nk(:,3)'.^2+2*i*cathode_nk(:,2)'.*cathode_nk(:,3)'];
%assignin('base','cathode',cathode_nk) 
```

对于 EditText

```
function d_cathode_Callback(hObject, eventdata, handles)
handles.d_cathode=str2double(get(hObject,'String')); 
```

我会这样做几次，最后得到几个句柄。*命名*事物和handles.d_*名称*。

我如何继续使用这些数据来实际调用我的软件的功能部分，以及当我按下最后一个按钮时如何获取 EditText。据我了解，handles 结构在所有 GUI 上共享，对吗？

感谢到目前为止阅读的任何人，如果有人可以帮助我，特别感谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:06:59.297

使用这个模板：

```
function d_cathode_Callback(hObject, eventdata, handles);
%in main file make empty struct handles= guihandles(gcf); guidata(gcf, handles);
%and load struct in function
handles = guidata(hObject);
%body ...
handles.d_cathode=str2double(get(hObject,'String'));
%save changes
guidata(hObject, handles);
%now use the same way to access to handles.d_cathode in other function 
```

# java - 许多人使用休眠注释进行映射？

> ID：15402006
> 
> 赞同：0
> 
> 时间：2013-03-14T05:39:44.487
> 
> 标签：java, hibernate, hibernate-annotations

我的数据库中有 3 个表。

我在这里开发的架构。

一名员工可以参加多个会议，一名员工可以参加多个会议。

[http://sqlfiddle.com/#!4/653a40](http://sqlfiddle.com/#!4/653a40)

我在我的应用程序中使用休眠。

这是我的pojos。

```
@Entity
@Table(name="emp")
public class Employee
{
@Id
    @Column(name="user_id")
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long id;

    @Column(name="Name")
    private String name;

    @Column(name="salary")
    private String salary;

    @ManyToMany(cascade = {CascadeType.ALL})
    @JoinTable(name="emp_meeting", 
            joinColumns={@JoinColumn(name="user_id")}, 
            inverseJoinColumns={@JoinColumn(name="meetingId")})
private Set<MEETING> meetings= new HashSet<MEETING>();

   // getter and setter
}

@Entity
@Table(name="MEETING")
public class MEETING{

    @Id
    @Column(name="meetingId")
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int mid;

    @Column(name="agenda")
    private String agenda;

    @ManyToMany(mappedBy="meetings")
    private Set<Employee> emps= new HashSet<Employee>();

    //gettter and setter
} 
```

这个对吗？因为我不知道如何插入第三张表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:24:22.817

您不需要在第三个表中显式插入。当您使用 Cascade.ALL 级联级别时，任何保存/持续调用具有填充会议集的员工都会导致映射表中的自动保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:44:13.910

As you association table has no more information than the two foreign key of your main tables, the insertion in this table is managed by hibernate when you associate your objects `Employee` and `MEETING`. So to me your mapping is correct, if you encounter problems, don't forget to associate in both direction (that is, in java, if you are adding an employee to a meeting, you should add the meeting to this employee and vice-versa)

(On another topic : your class name should respect java convention naming and be `Meeting` instead of `MEETING`).

# javascript - 给错误页面单击锚标记-页面加载

> ID：15402014
> 
> 赞同：1
> 
> 时间：2013-03-14T05:40:08.570
> 
> 标签：javascript, jquery, html

如何给出错误消息，在页面加载时单击任何锚标记。

例如：如果我单击 onlink，现在页面正在加载，此时用户单击页面中的任何其他锚标记会报告一些警报消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:50:30.183

使用 ajax 函数/ jquery 检查

```
if ($(document).ready())
 //do process on click
else
  alert ("not ready"); //Error message 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:59:15.167

可能是这样的：

```
$(function () {
   var count = 0;
   if (count == 0) {
      $('button').click(function () {
        alert('Error');
      });

      $(window).load(function () {
        count++;
        if (count != 0) {
            $('button').click(function () {
                alert('Good.');
            });
        }
      });
   }
}); 
```

在`doc ready`使用 a`var count`时，它的值`0` `at the time of loading`将强制按钮`alert('Error')`，当窗口完全加载时`alert(Good);`。

# c++ - 如何使用所有格式将一个 QTextDocument 部分复制到另一个

> ID：15402022
> 
> 赞同：1
> 
> 时间：2013-03-14T05:40:54.907
> 
> 标签：c++, qt, qtextdocument

我需要制作一个非常大的 QTextDocument 的预览版副本（在富文本模式下）。所以，我需要它的`clone()`功能，但能够指定限制。即`clone (int maxChars)`。正如我从`clone()`源代码中了解的那样，它只是将一个文档作为单个 QTextDocumentFragment 复制到另一个文档。所以，我不能以我需要的方式修改这个过程。

任何想法如何实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:39:32.697

可能您想要执行以下操作：

1.  `QTextCursor`与您`QTextDocument`作为父母一起创建
2.  打电话`cursor.movePosition(QTextCursor::Start)`。这会将光标的位置设置为文档的开头
3.  呼叫`cursor.movePosition(QTextCursor::NextWord, QTextCursor::KeepAnchor, n)`，`n`您希望选择的单词数量在哪里。
4.  打电话`cursor.selection()`。此方法将返回选定的`QTextDocumentFragment`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:10:52.097

如果使用富文本（通过 html 标记指定），请执行以下操作：

```
// assuming some QTextDocument named 'source', return rich text as html QString object
QString html = source.toHtml();

// pass substring to new QTextDocument instance
QTextDocument dest(html.mid(startChar,endChar)); 
```

其中 startChar 和 endChar 是来自源 QTextDocument 的 html 字符串的整数索引。

# mysql - 关于最大值的内连接表

> ID：15402025
> 
> 赞同：9
> 
> 时间：2013-03-14T05:41:18.733
> 
> 标签：mysql, sql, select, greatest-n-per-group

我正在尝试编写一个 MySQL 查询，在其中提取卖家的信息和她最受欢迎的产品。这是由页面浏览量最多的产品决定的，即`MAX(page_views)`.

下面的查询只是随机抽取一个产品，而不是页面浏览量最多的产品。

```
"SELECT 
     seller.id, seller.language, seller.shop_name,seller.story, 
     seller.eng_story, product.id, product.image_thumb, product.title, 
     product.eng_title, product.price, MAX(product.page_views) 
  FROM seller 
     INNER JOIN product ON seller.id=product.seller_id 
  WHERE seller.handpicked='y' AND seller.shop_active='y' 
  GROUP BY seller.id 
  ORDER BY product.page_views
  LIMIT 0,5" 
```

或者更好地说，`page_views`实际上是正确的数字，但是我如何让其他**产品字段**（id、图像、标题等）与页面浏览量最多的产品相关。

表数据：

卖方：

```
id | language | shop_Name | story     | eng_story   | handpicked | active
1  |   1      | mitienda  | hola mundo| Hello world | Y          | Y
2  |   1      | sisenor   | bonita    | beautiful   | N          | Y
3  |   2      | new_world | mi vida   | my life     | Y          | Y 
```

产品：

```
id | seller_id | image_thumb | title    | eng_title | price | page Views
1  |  1        | /images/..  | sombrero | hat       | $5    | 10
2  |  1        | /images/..  | bufanda  | scarf     | $25   | 30
3  |  2        | /images/..  | arte     | art       | $15   | 15
4  |  3        | /images/..  | joyeria  | jewlery   | $10   | 1
5  |  2        | /images/..  | canasta  | basket    | $21   | 13
6  |  3        | /images/..  | ropa     | clothes   | $13   | 6 
```

预期结果（精简）：

```
seller.id | shop_name | product.id | pageviews | title    | price
  1       |  miteinda |     2      |    30     |  bufanda | $25
  3       |  newworld |     6      |     6     |  ropa    | $13 
```

结果应列出精心挑选的卖家信息以及按浏览量列出的最受欢迎的产品。卖家按浏览量排序，总共限制为 5 个卖家。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T06:30:41.853

```
SELECT  a.ID SellerID,
        a.Shop_Name,
        b.ID ProductID,
        b.pageViews,
        b.title,
        b.Price
FROM    seller a
        INNER JOIN Products b
            ON a.id = b.seller_ID
        INNER JOIN
        (
            SELECT  seller_ID, MAX(pageViews) max_view
            FROM    products
            GROUP   BY seller_ID
        ) c ON  b.seller_ID = c.seller_ID AND
                b.pageViews = c.max_View
WHERE   a.handpicked = 'Y' AND a.active = 'Y' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/16e7a/3)

输出

```
╔══════════╦═══════════╦═══════════╦═══════════╦═════════╦═══════╗
║ SELLERID ║ SHOP_NAME ║ PRODUCTID ║ PAGEVIEWS ║  TITLE  ║ PRICE ║
╠══════════╬═══════════╬═══════════╬═══════════╬═════════╬═══════╣
║        1 ║ mitienda  ║         2 ║        30 ║ bufanda ║ $25   ║
║        3 ║ new_world ║         6 ║         6 ║ ropa    ║ $13   ║
╚══════════╩═══════════╩═══════════╩═══════════╩═════════╩═══════╝ 
```

# java - Javadoc 格式化程序和 readthedocs/sphinx 一样漂亮？

> ID：15402028
> 
> 赞同：1
> 
> 时间：2013-03-14T05:41:28.687
> 
> 标签：java, python, javadoc, python-sphinx

当我想到 Java 自动文档时，我觉得，嗯，很丑。并不是说它没有用，而是我被 readthedocs / sphinx 宠坏了。有没有一个包可以让你的 javadocs 很漂亮？

*   丑陋的例子： http: [//cmusphinx.sourceforge.net/sphinx4/javadoc/](http://cmusphinx.sourceforge.net/sphinx4/javadoc/)
*   漂亮的例子：http: [//pyjnius.readthedocs.org/en/latest/api.html](http://pyjnius.readthedocs.org/en/latest/api.html)

没有冒犯 javadoc 的创建者。很明显，功能是重点，而不是形式。

# php - php make_time() 和 date() 函数

> ID：15402029
> 
> 赞同：0
> 
> 时间：2013-03-14T05:41:37.013
> 
> 标签：php, date, time, makefile

我的系统时间应该是`11.09 AM`. 当我使用`date()`and`mktime()`函数时，它会显示不同的时间，例如`05.00 AM`.

我不明白。帮助我获得正确的系统时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:48:17.173

`php.ini`根据您当地的时区支持检查​​您的时区设置或设置类似的内容 -

```
<?php

$timezone = "Asia/Calcutta";
if(function_exists('date_default_timezone_set')) date_default_timezone_set($timezone);
echo date('d-m-Y H:i:s'); 
```

时区支持列表并相应检查 -

[http://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:49:11.960

您应该在访问日期之前调整时区。在php中有一个设置时区的函数

```
<?php
date_default_timezone_set("Asia/Calcutta");  //setting timezone
date("l, M-d-Y, H:i:s");
?> 
```

这是所有时区的列表

[http://php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

# php - all 项目中只有一个 mysql 连接

> ID：15402040
> 
> 赞同：1
> 
> 时间：2013-03-14T05:42:46.437
> 
> 标签：php, mysql

我想知道是否有一种方法可以让我始终打开一个连接到我的数据库。我在我的网站中使用此代码：

mysql 类

```
class Mysql{
public static $Server   = "localhost";
static $User = 'root';
static $Password = '';
static $DataBaseName = 'teca.v1';
static $Connection;
static $DataBase;
static $LoadConnection = 0;
static $CharSet = "utf8";

static $TRANS =false;
static $TRSS  = array();

public function __construct(){
    if(Mysql::$LoadConnection==0){
        Mysql::$Connection = mysql_connect(Mysql::$Server,Mysql::$User,Mysql::$Password);
        Mysql::$DataBase   = mysql_select_db(Mysql::$DataBaseName,Mysql::$Connection);
        $charset=Mysql::$CharSet;
        mysql_query("SET NAMES $charset");
        Mysql::$LoadConnection=1;
    }
}
} 
```

模型类

```
class Model extends Mysql{
protected $datamembers = array();
protected $PrimaryKey="Id";
protected $TableName ="Table";
public $UnProtectedExecute = FALSE;

public  function ReadyString($value)
{
    if($this->UnProtectedExecute == TRUE)
        return addslashes($value);
    else
        return $value;
}
public function __set($variable, $value){
    $this->datamembers[strtolower($variable)] = $value;
}

public function __get($variable){
    return $this->datamembers[strtolower($variable)];
} 
```

和我的一个对象：

```
class LibraryFiles extends Model{
    public $TableName   = 'library_files';
} 
```

但我不知道这是否正确，只是这段代码为我的项目中的所有对象创建了 1 个连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:50:44.243

您正在寻找一个 PHP 单例数据库类。使用下面的链接来了解这个想法。我想我不必在这里重复所有内容。

[http://www.matthewelliston.com/php-singleton-database-class/](http://www.matthewelliston.com/php-singleton-database-class/)

[用于数据库连接的全局或单例？](https://stackoverflow.com/questions/130878/global-or-singleton-for-database-connection)

[在 PHP5 中创建单例设计模式](https://stackoverflow.com/questions/203336/creating-the-singleton-design-pattern-in-php5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:51:10.050

你的设计没有多大意义。`MySQL`您应该为和创建单独的类`Model`。该类`MySQL`应该被实例化一次并在整个脚本中使用。所以它应该只建立一个连接。然后让`Model`使用类的实例对`MySQL`数据进行操作。

# mysql - 我的经纬度5公里范围内的抓取区域

> ID：15402042
> 
> 赞同：1
> 
> 时间：2013-03-14T05:42:59.490
> 
> 标签：mysql, coordinates

我想使用mysql获取我的经纬度5KM以下的区域。我使用了以下代码，但它实际上停止在我的确切坐标处显示该点。

```
and (acos(sin(1.3963) * sin(field_latitude_value) + cos(1.3963) * cos(field_latitude_value) * cos(field_longitude_value - (-0.6981))) * 6371 <= 5) 
```

我在谷歌搜索后得到了代码。如果有人知道线索，请帮助我。

# apache - 显示的 apache maven 版本与已安装的版本不同

> ID：15402047
> 
> 赞同：0
> 
> 时间：2013-03-14T05:43:32.220
> 
> 标签：apache, maven

我已经安装了 maven 2.2.1 并测试了 mvn -v 命令。但它显示了 Maven 版本 2.0.11。（我以前安装过它并与 2.2.1 共存）为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:32:11.810

确保以下两个环境变量指向您的 2.2.1 安装：

*   M2_HOME
*   PATH（指向 %M2_HOME%/bin）

mvn -v 的输出使用 M2_HOME 环境变量，但保持 PATH 和 M2_HOME 一致也很重要。

# coldfusion - Ehcache.Cache.put 不适用于特定的 ColdFusion 元素（大约需要 4 秒）

> ID：15402048
> 
> 赞同：2
> 
> 时间：2013-03-14T05:43:36.167
> 
> 标签：coldfusion, ehcache, coldfusion-9

我正在使用带有 Ehcache 的 ColdFusion 9

Ehcache 运行良好，但由于我重新安装了我的机器`Ehcache.Cache.put`，拒绝处理特定元素，但正在处理大量其他元素。

`Cache.put`不抛出异常，大约需要 4 秒才能返回。我尝试放入缓存的元素是一个 ColdFusion 组件，并且只有 7ko 左右。我不使用序列化。

缓存配置为：

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"
         maxBytesLocalHeap="300m">

<sizeOfPolicy maxDepth="99999999" maxDepthExceededBehavior="continue"/>

<defaultCache 
    eternal="false" 
    timeToIdleSeconds="300" 
    timeToLiveSeconds="1200" 
    overflowToDisk="false"
    statistics="true"> 
```

我把它改成

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"
    maxEntriesLocalHeap="900">

<defaultCache 
    eternal="false" 
    timeToIdleSeconds="300" 
    timeToLiveSeconds="1200" 
    overflowToDisk="false"
    statistics="true"
    maxEntriesLocalHeap="100"> 
```

这行得通！从 a 更改`maxBytesLocalHeap`为`maxEntriesLocalHeap`config 会有所不同！我认为可能内部尺寸计算不起作用。使用`maxEntriesLocalHeap`不需要大小计算，这就是它适用于新配置的原因。

所以为什么：

1.  是`Cache.put`不是`maxBytesLocalHeap`只处理一个特定的元素？
2.  没有例外？
3.  `Cache.put`功能需要4秒？
4.  全新机重新安装出现这个问题？

如果您有任何线索，请告诉我。我真的需要切换回`maxBytesLocalHeap`.

PS：

*   该应用程序还使用 JDK 1.6、MachII、Hibernate 和 ColdSpring

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T00:48:48.057

ColdFusion 元素的 Ehcache 大小调整过深，会处理每个 Java 底层对象，如 ColdFusion 框架对象等......

我通过设置过滤器解决了我的问题。我使用`net.sf.ehcache.sizeof.filter`指向包含 FQCN 或字段的文本文件位置的系统属性，以便调整引擎忽略。资料来源：[http ://forums.terracotta.org/forums/posts/list/6371.page](http://forums.terracotta.org/forums/posts/list/6371.page)

我`net.sf.ehcache.sizeof.filter`通过使用以下参数启动 Java VM 进行设置`-D`：

```
-D net.sf.ehcache.sizeof.filter=/My/Path/To/File.config 
```

我的过滤器配置文件包含：

```
coldfusion.runtime.NeoPageContext
coldfusion.runtime.CfJspPage
coldfusion.monitor.memory.MemoryTrackable
coldfusion.monitor.sql.QueryStat
coldfusion.monitor.memory.MemoryTrackerProxy
javax.servlet.ServletContext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T01:56:36.537

请注意，在 ColdFusion 11 下，如果您要存储 Hibernate 对象的实例，则需要添加一些额外的排除项。最终名单是：

```
coldfusion.runtime.NeoPageContext
coldfusion.runtime.CfJspPage
coldfusion.monitor.memory.MemoryTrackable
coldfusion.monitor.sql.QueryStat
coldfusion.monitor.memory.MemoryTrackerProxy
javax.servlet.ServletContext
org.hibernate.engine.spi.SessionImplementor
org.hibernate.internal.SessionImpl
org.hibernate.internal.SessionFactoryImpl 
```

# plot - Stata 错误：未在协变量列表中找到

> ID：15402054
> 
> 赞同：0
> 
> 时间：2013-03-14T05:43:49.803
> 
> 标签：plot, stata

我想绘制两个变量之间的交互作用。

```
margins   SentiSat_Rounded#PriceReduction 
```

我收到以下错误：

```
'SentiSat_Rounded' not found in list of covariates
r(322); 
```

变量存在于数据集中。此外，如果数据集中不存在变量，则会引发不同的错误，例如

```
variable X not found 
```

您能否建议未出现在协变量列表中是什么意思？

为了找到协变量，我遇到了这段代码：program covars, rclass version 8

```
 capture local Covars : colnames e(b) 
    if _rc error 301 

    tempname b 
    mat `b' = e(b) 
    tokenize `Covars' 
    local k = 0 

    forval j = 1/`= colsof(`b')' {
        if "``j''" != "_cons" & `b'[1,`j'] != 0 { 
            local covars "`covars'``j'' " 
            local ++k 
        }
    }

    if `k' { 
        di as txt "{p}`covars'{p_end}" 
        return local covars "`covars'" 
        c_local covars "`covars'" 
    }   
end 
```

我跑了

```
covars 
```

之后..在协变量列表中，未列出上述变量..该协变量列表与我的数据集中的变量不同吗？Stata 如何确定什么是协变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:01:53.137

协变量是之前模型中使用的协变量。也就是说`margins`，在您的情况下，始终遵循建模命令，`xtmixed`并且协变量是该模型调用中命名的响应（第一个命名变量）以外的变量。

您可能知道协变量是预测变量，甚至是自变量或通过其他一些术语。但是对于 Stata 来说，协变量当然不仅仅是数据集中的任何变量。它们必须已在您的模型调用中命名。

如果您不清楚这一点，请向我们展示您调用`xtmixed`前的确切命令。`margins`

毫不奇怪，Stata 不能对不在数据集中的变量做任何事情！

# java - 如何使用多个包或源文件编译和运行 Java 代码

> ID：15402058
> 
> 赞同：2
> 
> 时间：2013-03-14T05:44:26.323
> 
> 标签：java, build, compilation

我一直在自学 Java，但我只使用 Eclipse 作为编译和运行我的项目的方法，并且想看看我将如何仅使用命令行编译和运行以下文件结构（不想只需`.jar`从 Eclipse导出文件）。

文件结构如下：

```
src/
    model/
        file1.java
        file2.java
    app/
        main.java (contains main method)
        file3.java
        images/
            1.gif
            2.gif
    view/
        file4.java
        file5.java 
```

我还需要编译的图像文件，因为我将它们用于几件事。我知道`javac`应该使用该命令来构建`.class`文件，但是对于我将使用此文件结构（以及图像文件）编译（和运行）它的人感到困惑。任何帮助，将不胜感激。

注意：我正在尝试在 Ubuntu 12.04 上编译和运行，并且严格尝试使用命令行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:53:33.110

尝试以下

```
javac -classpath ./lib/*.jar ./src/*/*.java 
```

如果您的 java 类使用 3d 方库，请提供正确的 jar 库路径。最好使用具有适当目录结构的构建工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:51:02.430

你可以说

```
javac src/*/*.java 
```

但这将无条件地重新编译，会因更多文件而烦人，并且当您拥有的文件多于命令行无法处理时会中断。

明智的做法是使用[Ant](http://ant.apache.org)或[Maven](http://maven.apache.org)（Maven 在大多数情况下更容易/更好）。您编写构建脚本（`build.xml`或`pom.xml`分别）并运行构建器（`ant`或`mvn`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:27:45.470

曾几何时，我用 Windows 批处理文件编译 Java 项目。我记得每当我向项目中添加新包时，我都必须回去费力地编辑它们。

借助 Linux shell 的强大功能，您实际上可以制作一个体面的命令行构建脚本，而无需执行以下操作：

```
#!/bin/bash

set -e          # quit on error
set -u          # quit if we attempt to use undefined environment variable
set -x          # show commands as they're executed (remove this line if done debugging)

# Run this script from the project root directory

cd src

# Create directory structure
find . -type d | xargs -n 1 -I I --verbose mkdir -p ../dist/class/I

# Use javac to compile files
find . -name "*.java" | javac @/dev/stdin -d ../dist/class

# Copy assets
find . -type f -and -not -name "*.java" | xargs -n 1 -I I --verbose cp I ../dist/class/I

# Jar command
jar cvf ../dist/$(basename $(readlink -f ..)) -C ../dist/class . 
```

您应该将其保存在项目根目录中名为“build.sh”的文件中。此脚本缺少一些功能。有很多冗长，所以你可以确切地看到发生了什么。它不能很好地处理带有空格或其他奇怪字符的文件名。如果您想要一个可运行的 jar 文件，则必须编写一个清单文件并将其包含在“jar”命令中。如果您的项目使用 Java 类库之外的任何外部依赖项，则必须将 -cp 开关添加到 javac 命令行，或导出 CLASSPATH 环境变量。

上面的脚本会将资产复制到 jar 文件中。假设您在运行时提取资产，这将进行一个文件分发。Stackoverflow 可以告诉您有关[如何在 Java 中的虚拟文件系统中处理单个文件中的资产的](https://stackoverflow.com/questions/8683850/how-to-handle-assets-in-single-file-within-a-virtual-file-system-in-java)更多信息。

作为替代方案，您可以简单地将资产从源目录复制到目标目录。

作为风格问题，大多数人将他们的资产保存在与源代码不同的目录中。例如，您的两个 .gif 文件将位于 assets/app/images 而不是 src/app/images 下。只要你能说服你的构建系统做你想做的事，在技术上没有必要这样做，但我见过的大多数项目都将它们分开。

# api - 获取给定公司名称的基本股票和公司信息

> ID：15402059
> 
> 赞同：0
> 
> 时间：2013-03-14T05:44:31.310
> 
> 标签：api, finance, stock

给定公司名称，例如 Google，我希望能够识别到公司资料页面的链接，例如

*   谷歌财经（例如[https://www.google.com/finance?q=NASDAQ%3AGOOG](https://www.google.com/finance?q=NASDAQ%3AGOOG)）
*   彭博（[http://www.bloomberg.com/quote/GOOG:US](http://www.bloomberg.com/quote/GOOG:US)）

并提取公司信息，例如。“ *Google Inc. 是一家全球技术公司，通过其网站提供基于网络的搜索引擎。该公司提供广泛的搜索选项，包括网络、图像、群组、目录和新闻搜索*”

我该怎么做，我想我需要一些 API 来根据公司名称识别股票代码，然后以某种方式构建到适当站点的 URL？彭博社似乎有一个 API，但它非常大，有人能指出我正确的方向吗？

对于第一个要求，从另一个问题看来，对 Yahoo Finance API 的查询可以解决问题：

> [http://autoc.finance.yahoo.com/autoc?query=yahoo&callback=YAHOO.Finance.SymbolSuggest.ssCallback](http://autoc.finance.yahoo.com/autoc?query=yahoo&callback=YAHOO.Finance.SymbolSuggest.ssCallback)

但它似乎没有提供构建彭博 URL 所需的信息（缺少国家信息？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:58:46.767

**编辑：**

看起来 LinkedIn 已经显着改变了他们的 API（参见[https://developer.linkedin.com/support/developer-program-transition](https://developer.linkedin.com/support/developer-program-transition)）。

因此，接受的答案不再有效。

稍微搜索一下就表明存在各种“免费增值”提供商，例如[https://clearbit.com/](https://clearbit.com/)和[https://www.fullcontact.com/developer/company-api/](https://www.fullcontact.com/developer/company-api/)，但 YMMV。

**原始答案：**

LinkedIn 有一个 API 可以满足您的要求。

*公司资料 API：根据公司 ID 或通用名称检索并显示一个或多个公司资料。返回基本的公司资料数据，例如名称、网站和行业。返回其他公司内容的句柄，例如 RSS 流和 Twitter 提要。*

[https://developer-programs.linkedin.com/documents/company-lookup-api-and-fields](https://developer-programs.linkedin.com/documents/company-lookup-api-and-fields)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T00:47:29.010

Programmable Web 上有一个完整的 Web 编程 API 目录，目前有 8000 多个 API。我认为他们应该拥有你需要的一切。[http://www.programmableweb.com/apis](http://www.programmableweb.com/apis)

# android - 以编程方式创建布局设计支持 android 中的所有屏幕

> ID：15402060
> 
> 赞同：-5
> 
> 时间：2013-03-14T05:44:33.097
> 
> 标签：android, android-layout, android-screen-support

我在我的 android 应用程序中以编程方式创建了布局。

在这里，我开发了带有图像的水平列表视图。

我必须运行该应用程序，这意味着我得到了

*   在小屏幕上显示 2 张图像。
*   在中等屏幕上显示 3 张图像。
*   5幅图像显示在大屏幕上。

但我希望在所有屏幕上显示相同的设计。我希望在小、中、大和超大屏幕上显示 3 个图像。

我怎样才能做到这一点？

可以显示吗？.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:50:54.740

![创建图像中指定的文件夹](../Images/1d3e19b2385193341dc9d14b12c8b375.png)

您必须创建具有以下名称的文件夹：

**1) 布局**

**2) 布局-大**

3) 布局-xlarge

**4) 布局-480x320**

在 xml 中创建布局并在其他相关布局中调整布局设置。您将 xml 布局文件（名称相同）放在所有这些文件夹中并相应地设计它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:28:30.120

**您可以通过在res/layout、res/layout-small、res/layout-large**等中创建**XML**布局来实现此目的。

 **但是，如果您仍然想从 Java 类中进行布局，那么学习Android 中的[BUILD](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)或 go 可以通过以下问题：-

[使用代码确定设备屏幕类别（small、normal、large、xlarge）](https://stackoverflow.com/questions/5015094/determine-device-screen-category-small-normal-large-xlarge-using-code)

如果您遇到任何问题，请告诉我们。**

# iphone - 进入 TabBar 控制器的主屏幕

> ID：15402064
> 
> 赞同：0
> 
> 时间：2013-03-14T05:44:57.950
> 
> 标签：iphone, ios, objective-c, xcode, uitabbarcontroller

我是 Xcode 和原生开发的初学者。所以仍然试图弄清楚很多基本的东西。

我希望我的应用程序加载并显示 5 个选项卡项，并且没有选择任何一个。这个想法是有一个“主”屏幕，其中包含标签栏项目，用户可以单击这些项目来移动到应用程序的不同部分。我知道您的标签栏项目必须处于选中状态。

有解决这个问题的方法吗？

我正在考虑在应用程序启动时用户登陆的单独视图控制器。这个视图将有自己的标签栏视图，就像标签栏控制器一样。因此，当我点击任何选项卡项目时，我会将用户引导至相应的选项卡视图。我能做的最好的事情是将主页选项卡栏项目控制拖动到相应的选项卡视图，这在它显示视图而不是选项卡栏控制器的选项卡栏的范围内起作用。

我知道它令人困惑，所以让我知道我可以做些什么来使它更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:58:32.903

您只需向初始控制器（“主”屏幕）添加一个标签栏，并在其标签栏中具有与标签栏控制器控制的标题和图像相同的标题和图像。然后，当用户选择其中一个选项卡时，您将窗口的根视图控制器切换到选项卡栏控制器。

我认为您也可以通过做两件事来使用标签栏控制器来做到这一点。将第一个选项卡的选定图像设置为与未选定图像相同，这样即使选择了该选项卡，它也不会看起来像。其次，在控制器中为第一个选项卡提供一个视图，该选项卡位于该控制器的“正常”视图之上，即您的“主页”视图。当您想显示该控制器的正常视图时，只需将其删除或将其移到后面即可。

# asp.net-mvc - MVC View Page 和 MVC View Content Page 的区别

> ID：15402067
> 
> 赞同：2
> 
> 时间：2013-03-14T05:45:05.417
> 
> 标签：asp.net-mvc

何时使用 MVC View Page 和 MVC View Content Page？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:19:20.483

**The MVC View Page is for creating a page, the MVC VewP Content Page is used when you want to create a page and specify a Master Page with it.

It's the same as ASP.NET Webforms Web Form and Web Content Form.

ViewPage and ViewContentPage are the same thing. The difference is that ViewContentPage expects to be the content of a master page and when you select a ViewContentPage it prompts you to select a master file.

The end result is that a page that derives from the class page is created and in the instance of a regular ViewPage the html in the page starts with an Html tag and in the case of a ViewContentPage the html starts with an asp:Content tag**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:22:53.137

MVC View Page 用于创建页面，当您要创建页面并使用它指定 Master Page 时使用 MVC View Content Page。

# javascript - 如何在android平台上使用JS api更改默认搜索引擎？

> ID：15402068
> 
> 赞同：0
> 
> 时间：2013-03-14T05:45:06.463
> 
> 标签：javascript, android, search-engine, mobile-browser

如何在android平台上使用JS api更改默认搜索引擎？我们可以在 iphone 上设置默认搜索引擎，而不是手动设置。但是想知道如何在android上做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T03:34:50.400

window.external.AddSearchProvider 可能是最接近的一个。但我之前从未在 Android 上测试过。

PC 中的 Firefox 会弹出一个确认框，并带有一个复选框以将其设置为默认搜索引擎。PC中的Chrome弹出没有复选框的确认，并且无法将其设置为默认值。对于 IE，MSDN 表示他们将提供一个带有复选框的确认框以设置为默认值。

参考： [https ://developer.mozilla.org/en-US/docs/Adding_search_engines_from_web_pages](https://developer.mozilla.org/en-US/docs/Adding_search_engines_from_web_pages) [http://msdn.microsoft.com/en-us/library/aa744112%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa744112%28v=vs.85%29.aspx)

# asp.net - asp.net 中的文本框没有更新它的文本

> ID：15402071
> 
> 赞同：0
> 
> 时间：2013-03-14T05:45:20.077
> 
> 标签：asp.net

'正在处理 asp.net 任务，我必须向用户显示配置文件信息，并且如果用户想要编辑它，还必须对其进行编辑。

现在，我的问题是：

我能够向用户显示配置文件信息，但是在编辑它时（我使用相同的文本框来编辑配置文件信息）'在同一个文本框中获取文本的先前值，即来自我的数据库。即使我已将其替换为新文本，文本框中的文本也不会被替换。

在下面的代码中`txtEditName`，它从数据库中获取它的值。我想在点击事件时进行编辑，`btnSaveChanges`但是当我调试代码时，我开始知道来自数据库的值仍然存在。

我的测试箱是：

```
<asp:TextBox ID="txtEditName" runat="server" Width="200px" Height="25px" Enabled="false"></asp:TextBox> 
```

我的 aspx.cs 代码是：

```
BALSuperAdminProfile objSuperAdminProfile = new BALSuperAdminProfile();
DataTable dt;
int sa_id = 1;

void showSuperAdminInfo()
     {
          try
           {
               dt = objSuperAdminProfile.getSuperAdminProfileDetails(sa_id);

               txtEditName.Text = dt.Rows[0][2].ToString();
           }
         catch (Exception Ex)
                {
                    lblResult.Text = "Could Not load Database. Please try Again latter.";
                }
            }

            protected void Page_Load(object sender, EventArgs e)
            {
                showSuperAdminInfo();
            }

            protected void btnSaveChanges_Click(object sender, EventArgs e)
            {
                string name=txtEditName.Text;
                try
                {
    dt = objSuperAdminProfile.editSuperAdminProfile(sa_id, name,);
                    lblResult.Text = dt.Rows[0][0].ToString();
                    showSuperAdminInfo();
                }
                catch (Exception Ex)
                {
                    lblResult.Text = Ex.Message;
                }

            }

            protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
            {
                txtEditName.Enabled = true;       
            }
        } 
```

可能是什么问题呢？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:04:11.770

将您的检索代码写在

```
If(!isPostBack)
{
} 
```

在页面加载时使该文本框属性 ReadOnly:True

当您单击编辑按钮时，将 Readonly 设置为 false 并编写更新代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:32:33.253

在文本框中显示名称时，您正在使用 showSuperAdminInfo() 中的 row[0][0] 元素

```
txtEditName.Text = dt.Rows[0][2].ToString(); 
```

在标签中显示结果时，您在 btnSaveChanges_Click() 中使用了不同的索引

```
lblResult.Text = dt.Rows[0][0].ToString(); 
```

要检查的另一件事是您的业务层中的函数 editSuperAdminProfile() 。

# php - 通过 PHP 在 MS Word 文件中包含页眉和页脚

> ID：15402072
> 
> 赞同：0
> 
> 时间：2013-03-14T05:45:28.623
> 
> 标签：php

```
header('Content-Type: application/ms word');
header("Content-Disposition: attachment; filename = filename.docx");
header('Content-Transfer-Encoding: binary');
header("Pragma: no-cache");
header("Expires: 0");
header('Cache-Control: must-revalidate'); 
```

我使用上面的代码从数据库中下载了一个包含一些数据的 word 文件。

现在，我想在文件的每一页上添加公司的徽标和名称、页码。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:02:50.070

你用谷歌多久了？

现在我不确定[PHPDocX](http://www.phpdocx.com/)，但[PHPWord](https://github.com/PHPOffice/PHPWord)仍处于起步阶段，但我认为它应该能够处理您的问题。

此外，如果他们的 github 页面不起作用，请尝试他们的[codeplex](http://phpword.codeplex.com/)页面。我不太确定他们的代码库中的哪一个是最新的/正在处理的（尽管我很确定它是 github）。

# java - 获取失败断言的描述

> ID：15402073
> 
> 赞同：1
> 
> 时间：2013-03-14T05:45:30.040
> 
> 标签：java, unit-testing, selenium

在我的测试方法中，我有 3-4 个断言，当测试失败时，我怎么知道哪个断言失败了？这是我的Java代码...

```
assertTrue(Utilities.SomeTest(driver, UserName, Password));                
assertTrue(checkData(url, "1", "7", "2012", "30", "8", "2012"));
assertTrue(verifyNo("7", 1)); 
```

这里我的第二个断言失败（我在调试代码后发现），但在控制台中我得到了这个描述。

```
Failed: java.lang.AssertionError: null 
```

我怎样才能知道失败的确切方法名称，在这种情况下是 checkData。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:48:15.533

假设这是 junit，您可以传递一个字符串作为第一个参数，`assertTrue`如果失败将显示该参数：

```
assertTrue("Utilities test failed", Utilities.SomeTest(driver, UserName, Password));
assertTrue("checkData failed", checkData(url, "1", "7", "2012", "30", "8", "2012"));
assertTrue("verifyNo failed", verifyNo("7", 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:48:19.263

您可以使用：

```
assertTrue(String message, boolean condition); 
```

因此一旦断言失败，它将打印一条有意义的消息。

基本上每个`assertXYZ`都有一个版本，您可以在其中指定 String 作为第一个参数。

# jquery - jQuery 如何通过 LABEL 标签包装表单输入和下一个文本？

> ID：15402080
> 
> 赞同：0
> 
> 时间：2013-03-14T05:46:13.247
> 
> 标签：jquery, word-wrap

我有这个：

```
...
<input type="checkbox" />
AAA
<p>BBB</p>
<div>CCC</div>
... 
```

并希望通过 LABEL 标签包装输入和下一个文本，如下所示：

```
...
<label>
    <input type="checkbox" />
    AAA
</label>
<p>BBB</p>
<div>CCC</div>
... 
```

我怎么能通过 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:52:07.827

```
$('.parent').contents().filter(function(){
     return this.localName === 'input' || this.nodeType === 3;
}).wrapAll('<label></label>'); 
```

[http://jsfiddle.net/Cja4H/](http://jsfiddle.net/Cja4H/)

或者：

```
$('input[type=checkbox]').each(function(){
   $(this).add(this.nextSibling).wrapAll('<label/>');
}); 
```

[http://jsfiddle.net/BkpgX/](http://jsfiddle.net/BkpgX/)

# c - 编写可以从命令行使用附加参数运行的 C 程序

> ID：15402081
> 
> 赞同：1
> 
> 时间：2013-03-14T05:46:14.270
> 
> 标签：c, function

我正在学习 C 编程，但遇到了一个我在任何地方都找不到答案的问题。

我想做的是编写一个 C 程序，我可以直接从终端使用附加参数运行它，例如

```
cat -n input.txt - nosuchfile.txt input.txt 
```

我想知道的是如何编写任何函数以便可以像上面那样运行它（编译后），所以程序所做的可能不是很重要，但为了完整起见， cat 获取输入文件列表并将它们打印到标准输出。它具有完整的错误处理（因此文件 nosuchfile.txt），还可以包括行号 (-n) 并从标准输入 (-) 获取输入。

为了澄清起见，我之前编写了可以编译源文件的程序，并使用 eg 运行程序`./cat`，如果需要输入，则在此命令开始运行程序后已获取此信息。因此，终端看起来像这样：

```
gcc ...
./cat
-n input.txt - nosuchfile.txt input.txt 
```

我想知道如何能够像这样运行程序

```
gcc...
cat -n input.txt - nosuchfile.txt input.txt 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:52:03.910

在大多数系统中，main 有 2 或 3 个明确定义的参数：

```
#include <stdio.h>
int main(int ac, char **av) { printf("%d %s\n", ac, av[0]); return 0; } 
```

将打印参数的数量（+1）和程序的名称。 `av[1]`将包含指向包含第一个参数（如果 ac>1）等的字符串的指针。

第三个可能的参数`, char **env)`（在某些系统下）将包含指向环境变量的指针。

**编辑**[gnu getopt 库](http://www.gnu.org/software/libc/manual/html_node/Getopt.html) 有助于解析命令行*，就像在一般的 unix/gnu 实用程序中使用的那样*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:53:34.357

您可以使用命令行参数：

```
#include <stdio.h>

int main( int argc, char *argv[] ) // argc is the (c)ount of arguments, argv is the (v)alues
{
  printf( "\nCommand-line arguments:\n" );

  for( int count = 0 ; count < argc ; count++ )
  {
    printf( "  argument %d = %s\n", count, argv[count] );
  }

  return 0;
} 
```

# django - Django OneToOneField 错误

> ID：15402083
> 
> 赞同：2
> 
> 时间：2013-03-14T05:46:18.103
> 
> 标签：django

我的应用程序允许用户创建板和添加图片。

我的目标是尝试将板与图片列表中的主图片相关联。我会尽力解释我的情况。我正在尝试在每个板上显示图片列表中的主图片，因为当用户创建板时他可以将图片添加到他的板上，现在我想将其中一张图片与板显示相关联。我给你举个例子![在此处输入图像描述](../Images/af483d3c3ab2b64783daf023fe72e4e1.png)

因此，我尝试使用 OneToOneField 将板与主图片相关联，但在创建板时出现此错误 pet_board.picture_id may not be NULL

我的模型.py

```
class Board(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
    def __unicode__(self):
        return self.name

class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board ,related_name='lo')

    image = models.FileField(upload_to="images/",blank=True,null=True)
    description = models.TextField()
    def __unicode__(self):
        return self.description 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:14:23.543

```
class Board(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)

    def __unicode__(self):
        return self.name

    def primary_picture(self): 
        return Picture.objects.filter(board=self, is_primary=True)

    def ordinary_picture(self): 
        return Picture.objects.filter(board=self, is_primary=False)

class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board ,related_name='lo')
    image = models.FileField(upload_to="images/",blank=True,null=True)
    description = models.TextField()
    is_primary = models.BooleanField(default=False)

    def __unicode__(self):
        return self.description

{% for b in person.get_board %}  
    My Primary Pictures:
    {% for primary in b.primary_picture %}
        <img src="{{ primary.image.url }}">
    {% endfor %}

    My Ordinary Pictures:
    {% for ord in b.ordinary_picture %}
        <img src="{{ ord.image.url }}">
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:50:58.220

**模型.py**

```
class Board(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)

class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board)
    image = models.FileField(upload_to="images/",blank=True,null=True)
    description = models.TextField()
    is_primary = models.BooleanField(default=False)

    def __unicode__(self):
        return self.description 
```

**视图.py**

```
def index(request):
    obj_board = Board.objects.get(user=request.user)
    obj_image = obj_board.picture_set.filter(is_primary=True)
    print obj_image.image.url  # output url in dev-server for tests
    # ... do something and return httpresponse 
```

# python - 在打印语句中包含一个整数

> ID：15402084
> 
> 赞同：1
> 
> 时间：2013-03-14T05:46:18.993
> 
> 标签：python

我正在尝试这个，其中`i`是一个整数：

```
sys.stdout.write('\thello world %d.\n' % i+1) 
```

它说“不能连接str和int”。我尝试了各种组合：

```
int(i) + 1
i + int(1) 
```

...但它不工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T05:49:25.507

```
sys.stdout.write('\thello world %d.\n' % (i+1)) 
```

注意括号。

（`%`运算符比运算符绑定得更紧密`+`，因此您最终尝试将 1 添加到格式化字符串，这是一个错误。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:50:06.923

怎么样：

```
sys.stdout.write('\thello world %d.\n' % (i+1)) 
```

Python 将您的方式解释为 ('...' % i) + 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:03:37.153

`str.format`如果您的 Python 版本足够新以支持它（Python2.6+），则首选^†看到您甚至不需要担心`%`and的优先级`+`。

```
sys.stdout.write('\thello world {}.\n'.format(i+1)) 
```

或者正如问题的标题所暗示的 - 使用打印语句

```
print '\thello world {}.'.format(i+1) 
```

在 Python3 中，`print`是一个函数，所以你需要这样调用它

```
print('\thello world {}.'.format(i+1)) 
```

* * *

† 在 Python2.6 中你需要使用`{0}`而不是普通的`{}`

# playframework-2.0 - 播放框架2.0，oneToOne级联删除导致持久化异常

> ID：15402088
> 
> 赞同：2
> 
> 时间：2013-03-14T05:46:20.950
> 
> 标签：playframework-2.0, ebean, cascading-deletes

我正在使用 Play 2.0 框架，我有三个类`Patient`，`Visit`和`Puberty`. `Patient`并且`Visit`有 ManyToOne 关系，而`Visit`and`Puberty`有一对一的关系（我知道，在数据库设计中这是不好的做法，但是`Visit`有很多变量，我想将它们分开）。

```
public class Patient{
    @Id
    public Long id;
    @OneToMany (mappedBy="patient", cascade=CascadeType.ALL)
    public List<Visit> visits;
}

public class Visit{
    @Id
    public Long id;
    @ManyToOne (cascade=CascadeType.ALL)
    public Patient patient;
    @OneToOne(mappedBy="visit", cascade={CascadeType.ALL}) 
    public Puberty puberty;
}

public class Puberty{
    @Id
    public Long id;
    @OneToOne
    public Visit visit;
} 
```

当我`patient.delete()`用访问调用没有青春期的地方时，它工作正常，但是当访问中有青春期信息时，出现以下错误：

> play.api.Application$$anon$1: 执行异常[[PersistenceException: ERROR execution DML bindLog[] error[参照完整性约束违规：“FK_PUBERTY_DATA_VISIT_7: PUBLIC.PUBERTY_DATA FOREIGN KEY(VISIT_ID) REFERENCES PUBLIC.VISIT(ID) (100) "; SQL 语句：\n 从访问中删除 where id=? 和患者ID =？[23503-168]]]] 在 play.api.Application$class.handleError(Application.scala:289) ~[play_2.10.jar:2.1.0] 在 play.api.DefaultApplication.handleError(Application.scala: 383）[play_2.10.jar:2.1.0] 在 play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply（PlayDefaultUpstreamHandler.scala:132）[play_2.10.jar:2.1 .0] 在 play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:128) [play_2.10.jar:2.1.0] 在 play.api.libs。concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0] at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise. scala:113) [play_2.10.jar:2.1.0] javax.persistence.PersistenceException: 错误执行 DML bindLog[] 错误[引用完整性约束违规：“FK_PUBERTY_DATA_VISIT_7: PUBLIC.PUBBERTY_DATA FOREIGN KEY(VISIT_ID) REFERENCES PUBLIC.VISIT(身份证）（100）”；SQL 语句：\n 从访问中删除 where id=? 和患者ID =？[23503-168]] 在 com.avaje.ebeaninternal.server.persist.dml.DmlBeanPersister.execute(DmlBeanPersister.java:97) ~[avaje-ebeanorm-server.jar:na] 在 com.avaje.ebeaninternal.server。 persist.dml.DmlBeanPersister.delete(DmlBeanPersister.java:48) ~[avaje-ebeanorm-server.jar:na] 在 com.avaje.ebeaninternal.server.persist.DefaultPersistExecute。executeDeleteBean(DefaultPersistExecute.java:109) ~[avaje-ebeanorm-server.jar:na] at com.avaje.ebeaninternal.server.core.PersistRequestBean.executeNow(PersistRequestBean.java:489) ~[avaje-ebeanorm-server.jar :na] 在 com.avaje.ebeaninternal.server.core.PersistRequestBean.executeOrQueue(PersistRequestBean.java:511) ~[avaje-ebeanorm-server.jar:na] 在 com.avaje.ebeaninternal.server.persist.DefaultPersister.delete （DefaultPersister.java:635）~[avaje-ebeanorm-server.jar:na] 引起：org.h2.jdbc.JdbcSQLException：参照完整性约束违反：“FK_PUBERTY_DATA_VISIT_7：PUBLIC.PUBLIC.PUBBERTY_DATA FOREIGN KEY(VISIT_ID) REFERENCES PUBLIC.VISIT (ID) (100)"; SQL语句：delete from visit where id=? 和患者ID =？[23503-168] 在 org.h2.message.DbException.getJdbcSQLException(DbException.java:329) ~[h2.jar:1.3.

我怀疑它与播放删除东西的命令有关，它试图在青春期之前删除访问，有没有办法使用级联来克服这个问题？或者我应该在访问中覆盖我的删除方法以自己指定它？

请帮忙...谢谢

# jquery - IE9中的jquery事件传播问题

> ID：15402089
> 
> 赞同：1
> 
> 时间：2013-03-14T05:46:30.870
> 
> 标签：jquery, css, internet-explorer

嗯，这是一个奇怪的问题，我不知道如何调试这个问题，所以任何提示和建议都值得赞赏。

我有一个日历（yui-calendar），它与里面的所有东西都是绝对定位的，相对定位。我想做的是，如果我在日历外单击，它应该关闭，否则不会...

```
$('html').click(function(e){
        console.log("Event reached html level "+$(e.target).attr("class"));
        if($(".yui-calcontainer.withtitle").is(":visible"))
        {
            $(".yui-calcontainer.withtitle").hide();
        }
    })

    $(".yui-calcontainer.withtitle,#calendar_img_1").click(function(e){
        console.log("Event reached icon level "+$(e.target).attr("class"));
        e.stopPropagation();
    }); 
```

这在 FF 甚至 IE8 中都可以正常工作，但在 IE9 中，日历内的任何点击似乎都会冒泡到 html 级别。奇怪的是，`.yui-calcontainer.withtitle`即使它在页面中，它也完全忽略了它，但可以正常使用`#calendar_img_1`它基本上是我单击以打开日历的图标。

[您可以在此处查看问题](http://wholesaleflowersinc.com/flowers/white-alstroemeria-flower-3.html)（单击页面右侧“选择交货日期”部分中的图标）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:50:16.813

试试`cancelBubble`..

尝试这个

```
 $(".yui-calcontainer.withtitle,#calendar_img_1").click(function(e){
  if(e.stopPropagation){  // check stoppropogation is avilable
     e.stopPropagation();  //use stopPropogation
  }else{
     e.cancelBubble = true;  // for ie
  }
}); 
```

关于[cancelBubble 的链接](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:21:10.270

虽然我无法确切说明为什么它在 IE9 中不起作用，但这是我在弹出窗口之外单击时关闭的典型方法。这是事件处理程序之间的一种微妙的舞蹈；-)

```
function openCalendar()
{
  // show the calendar
  $('#calendar').show();

  // setup one-time event handlers to close it
  $(document)
    .one('click', closeCalendar)
    .one('keydown', function(e) {
      if (e.which==27) {
        closeCalendar();
      }
    });

  // make sure we stop propagation, otherwise the calendar is closed immediately
  return false;
}

function closeCalendar()
{
    if ($("#calendar").is(":visible")) {
        $("#calendar").hide();
    }
    // we don't need these anymore
    $(document).unbind('click keydown');
}

// make sure events don't bubble up from clicking on the calendar itself
$("#calendar").on('click', function(e) {
  return false;
});

// register the click handler to open it
$('.open-calendar').on('click', openCalendar); 
```

[**演示**](http://jsbin.com/igocap/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:26:31.007

虽然这并不是问题的完全解决方案，但我确实设法通过迂回解决方案暂时解决了它。但由于在性能方面这是一个非常昂贵的解决方案，我仍然愿意接受其他想法和建议，说明为什么在我的情况下传播不会在 IE9 中停止。

无论如何，我所做的是，在 html 点击处理程序中，检查当前事件目标是否是 yui-calendar 的子项，如果是，我跳过关闭它。

```
$('html').click(function(e){
        if($(".yui-calcontainer.withtitle").is(":visible") && $(e.target).parents(".yui-calcontainer.withtitle").length<=0)
        {
            $(".yui-calcontainer.withtitle").hide();
        }
    }) 
```

# android - 使用 SurfaceView 时出现 NullPointerException

> ID：15402090
> 
> 赞同：0
> 
> 时间：2013-03-14T05:46:32.853
> 
> 标签：android, multithreading, nullpointerexception, surfaceview

我想用 SurfaceView 创建演示应用程序。**但是在一行“ GameThread = gameView.getThread();** ”中收到错误 NullPointerException这是我的整个代码片段

主要活动：

```
 public class MainActivity extends Activity {

GameView gameView;
TutorialThread GameThread;
Button btnStart, btnStop;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("OnCreate -", "I am in onCreate method..");
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    // get handles to the GameView from XML and the Tutorial thread.
    gameView = (GameView) findViewById(R.id.gameView);

    //Log.d("OnCreate -", ""+gameView.TAG);

    GameThread = gameView.getThread();

    //GameThread.start();
    ClickListener clickListener = new ClickListener();

    // look up the happy shiny button
    btnStart = (Button) findViewById(R.id.btnStart);
    btnStart.setOnClickListener(clickListener);

    btnStop = (Button) findViewById(R.id.btnStop);
    btnStop.setOnClickListener(clickListener);

    setContentView(R.layout.activity_main);
}

  class ClickListener implements View.OnClickListener {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {

        case R.id.btnStart:
            /*
             * if (GameThread.mState == GameThread.STATE_PLAY) {
             * GameThread.setGameState(TutorialThread.STATE_RUNNING);
             * 
             * }
             */
            makeToast("This is Start Button");
            break;

        case R.id.btnStop:
            /*
             * if (GameThread.mState == GameThread.STATE_RUNNING) { //
             * GameThread.setGameState(TutorialThread.STATE_PLAY); }
             */
            makeToast("This is Stop Button");
            break;

        }

    }

    private void makeToast(String string) {
        // TODO Auto-generated method stub
        Toast.makeText(MainActivity.this, string,      Toast.LENGTH_LONG).show();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

和 GameView 类是： -

```
 public class GameView extends SurfaceView implements SurfaceHolder.Callback {

String TAG = "GameView";
private TutorialThread _thread;

public GameView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
    getHolder().addCallback(this);
    _thread = new TutorialThread(getHolder(), context);
    setFocusable(true);
}

public TutorialThread getThread() {
    return _thread;
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    _thread.setRunning(true);
    _thread.start();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

    // we have to tell thread to shut down & wait for it to finish, or else
    // it might touch the Surface after we return and explode
    boolean retry = true;
    _thread.setRunning(false);
    while (retry) {
        try {
            _thread.join();
            retry = false;
        } catch (InterruptedException e) {
            // we will try it again and again...
        }
    }
   }

  }

  class TutorialThread extends Thread {
String TAG = "TutorialThread";
private SurfaceHolder _surfaceHolder;
private boolean _run = false;
Bitmap bitmapDroid;

/**
 * State-tracking constants.
 */

public static final int STATE_PLAY = 0;
public static final int STATE_RUNNING = 1;
public int mState = STATE_PLAY;

Resources mRes;

/** Handle to the application context, used to e.g. fetch Drawables. */
private Context mContext;

float droidx = 200, droidy = 200;

public TutorialThread(SurfaceHolder surfaceHolder, Context context) {
    _surfaceHolder = surfaceHolder;
    mContext = context;
    mRes = context.getResources();
    // create droid and load bitmap
    bitmapDroid = BitmapFactory
            .decodeResource(mRes, R.drawable.ic_launcher);

}

public void setRunning(boolean run) {
    _run = run;
}

@Override
public void run() {
    Canvas c;
    while (_run) {
        c = null;
        try {
            c = _surfaceHolder.lockCanvas(null);
            synchronized (_surfaceHolder) {
                onDraw(c);
            }
        } finally {
            // do this in a finally so that if an exception is thrown
            // during the above, we don't leave the Surface in an
            // inconsistent state
            if (c != null) {
                _surfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
}

public void onDraw(Canvas canvas) {

    canvas.drawColor(Color.rgb(187, 255, 255));
    canvas.drawBitmap(bitmapDroid, droidx - (bitmapDroid.getWidth() / 2),
            droidy - (bitmapDroid.getHeight() / 2), null);

}

  } 
```

布局声明为：

```
 <com.example.surfaceviewdemo.GameView
    android:id="@+id/gameView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:49:23.880

您需要首先设置您的内容视图，然后才能从布局中获取您的视图。所以，

`setContentView(R.layout.activity_main);`

应该出现在您的上方

`gameView = (GameView) findViewById(R.id.gameView);`

# url - Yii 中关于 urlManager 不接受字符串作为 id 的错误 404

> ID：15402093
> 
> 赞同：0
> 
> 时间：2013-03-14T05:46:43.547
> 
> 标签：url, yii

`urlManager`为了接受字符串ID ，正确的规则是什么？它*在 actionView 上显示错误 404。网址：/sampleSite/index.php/transaction/I201303001*。

这就是我的`urlManager`样子：

```
 'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>true,
        'rules'=>array(

            '<controller:\w+>/<id:\d+>'                     =>'<controller>/view',  
            '<controller:\w+>/<action:\w+>/<id:\d+>'    =>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>/<id:>'       =>'<controller>/<action>', 
            '<controller:\w+>/<action:\w+>'             =>'<controller>/<action>',

        ),
    ), 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:43:50.280

尝试使用 regExp 接受任何字符串（包括数字）

```
'rules'=>array(

        '<controller:\w+>/<id:[a-zA-Z0-9-]+>'                     =>'<controller>/view',  
        '<controller:\w+>/<action:\w+>/<id:\d+>'    =>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>/<id:>'       =>'<controller>/<action>', 
        '<controller:\w+>/<action:\w+>'             =>'<controller>/<action>',

    ), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:53:13.287

```
'rules'=>array(
            '<module:\w+>/<controller:\w+>/<id:\w+>'                     =>'<module>/<controller>/view',  
            '<module:\w+>/<controller:\w+>/<action:\w+>/<id:\w+>'    =>'<module>/<controller>/<action>',
            '<module:\w+>/<controller:\w+>/<action:\w+>'             =>'<module>/<controller>/<action>',
            '<controller:\w+>/<id:\w+>'                     =>'<module:\w+>/<controller>/view',  
            '<controller:\w+>/<action:\w+>/<id:\w+>'    =>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'             =>'<controller>/<action>',

        ), 
```

# css - CSS 选择器在 IE10 中不起作用

> ID：15402097
> 
> 赞同：1
> 
> 时间：2013-03-14T05:47:10.720
> 
> 标签：css, css-selectors, internet-explorer-10

我有一个这样的 CSS 选择器

```
table[id^="tblBody_"] tbody tr td input[type="checkbox"]
{
    margin-top:-3px;
} 
```

**HTML**

```
<table id="tblBody_tblApplicationWizardPageDetail">
<tbody>
<tr>
  <td>
    <input id="chkDisplayedBit" type="checkbox"/>
  </td>
</tr>
</tbody>
</table> 
```

我必须将此css应用于表格ID开头的表格单元格中存在的复选框`tblBody_`

这个东西在 IE8 中运行良好，但在 IE10 中不行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:13:52.093

问题不在选择器中，您可以通过`outline: solid red`在规则中添加来看到。并且设置一个正的边距是有效的。问题似乎在于 IE 处理复选框元素上的负边距的方式。我不知道实际的 IE 8 是否也有这个问题，但是 IE 10 中的 IE 8 仿真模式有它。

简单的解决方法是使用相对定位而不是负边距：

```
position: relative; top: -3px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:58:05.620

如果您的 html 类似于以下代码段，它将起作用：

```
<table id="tblBody_32">
    <tbody>
        <tr>
            <td>
                <input type="checkbox" />
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:06:38.283

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Example</title>
    <style type="text/css">
        *{ margin: 0px; padding: 0px; }
        table[id^="tblBody_"]{ border-collapse:collapse; border-spacing:0; margin: 20px auto; width: 200px; }
        table[id^="tblBody_"] tbody tr td{ border:1px solid #ddd; width: 90px;padding: 5px;  }
        table[id^="tblBody_"] tbody tr td input[type="checkbox"] { margin-left: 20px; }
    </style>
</head>
<body>
    <table id="tblBody_abc">        
        <tbody>
            <tr>
                <td>1</td>
                <td><input type="checkbox" name="hobbit" id="hobbit"></td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

我用这个，效果很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T06:09:39.353

```
E[foo^="bar"] 
```

> 一个 E 元素，其 "foo" 属性值正好以字符串 "bar" 开头

```
selector level 3 
```

在[caniuse.com](http://caniuse.com)中，他们编写了 IE 10.0 支持 css3 选择器，[参见](http://caniuse.com/#search=selectors)[msdn](http://msdn.microsoft.com/en-us/library/hh781508%28v=vs.85%29.aspx#attribute_selectors) 的相同IE 10 支持属性选择器

如果一切都不起作用，请使用[selectivizr](http://selectivizr.com/)是一个 JavaScript 实用程序，它在 Internet Explorer 6-8 中模拟 CSS3 伪类和属性选择器 [] 在 IE10 中肯定有效。

# ios - 使用 CorePlot 框架时显示 int 值

> ID：15402098
> 
> 赞同：1
> 
> 时间：2013-03-14T05:47:30.140
> 
> 标签：ios, objective-c, xcode, core-plot

我已按照此[链接](http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/)绘制图表。一切都很好，但我唯一需要改变的是我必须在 x 轴上显示 intvalues 而不是 floatvalues（而不是 0.0 ， 2.0 ...我必须显示 0,2，...）。如果我不清楚，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T08:48:41.287

您可以使用类似这样的方法从轴中删除浮点数

```
 CPTXYAxis *y = axisSet.yAxis;
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setMaximumFractionDigits:0];

y.labelFormatter = formatter; 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:53:59.093

您可以为 CPTAxis 类上的轴标签设置数字格式化程序。将格式化程序设置为没有小数位，它应该可以正常工作。

# java - Java 中的子字符串和 if 语句

> ID：15402101
> 
> 赞同：0
> 
> 时间：2013-03-14T05:47:46.053
> 
> 标签：java, substring

我是一个相当新的程序员，作为我正在做的几个项目的一部分，我正在使用子字符串。在所有这些中，我都遇到了 if 语句的问题。假设我有两个变量，一个是其他字符串的子字符串，另一个应该与第一个子字符串等效。如果我尝试在 if 语句中检查它们是否相等（它们应该是），它会返回 false 和 == 检查。这里有一些代码来演示。

```
public class Substringproblem{

    static void method(){

                String random="somestring";

                String randomsubstring=random.substring(0,3);

                String should_be_randomsubstring="som";

               if(randomsubstring==should_be_randomsubstring){
                     System.out.println("Success");
               }else{
                     System.out.println("Failure");
                             System.out.println(randomsubstring);
               }
               }
               public static void main(String[] args) {
                         method();
               }

} 
```

我觉得我错过了一些非常明显的东西，但我一直在寻找一些东西，但没有发现任何像这样的东西。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:48:49.127

```
randomsubstring.equals(should_be_randomsubstring) 
```

您正在比较 String 对象引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:50:40.180

```
randomsubstring.equals(should_be_randomsubstring) 
```

或者

```
randomsubstring.equalsIgnoreCase(should_be_randomsubstring)(If you want to ignore cae use this) 
```

代替

```
randomsubstring==should_be_randomsubstring) 
```

每当您比较字符串使用`.equals()`或`.equalsIgnoreClas()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T05:50:47.280

在java中比较两个字符串总是使用`equals()`方法。您的代码应如下所示：

```
if(randomsubstring.equals(should_be_randomsubstring)){
             System.out.println("Success");
       }else{
             System.out.println("Failure");
                     System.out.println(randomsubstring); 
```

*   '==' 运算符**不比较**String 对象中存在的文本内容。它只比较 2 个字符串指向的引用，即对象引用。因此，在您的情况下，它将返回 false。
*   `equals()`当您需要比较 String 对象中存在的文本内容时使用该方法。当两个 String 对象包含相同的内容时，此方法返回 true。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T05:53:18.217

使用`String.equals(String anotherString)`函数比较字符串，而不是 == 运算符。该函数检查字符串的实际内容，== 运算符检查对对象的引用是否相等。

```
public class SubstringProblem {

    public static void main(String[] args) {
        method();
    }

     static void method() {
         String random = "somestring";
         String randomsubstring = random.substring(0,3);
         String should_be_randomsubstring = "som";

         if (randomsubstring.equals(should_be_randomsubstring)) {
             System.out.println("Success");
         } else {
             System.out.println("Failure");
             System.out.println(randomsubstring);
       }
     }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T06:11:55.737

您应该使用**`equals`**比较 String 对象。

根据您的平均代码更改：

```
if(should_be_randomsubstring.equals(randomsubstring)){
      System.out.println("Failure")  
}else{ 
     System.out.println("Success");   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T07:06:12.333

考虑你在堆内存中有一个 String 对象，那么你可以有多个引用变量指向同一个对象。

```
Ex. String ref1 = "Test"; 
    String ref2 = ref1;
    String ref3 = ref1; 
```

所以 String ref1, ref2 和 ref3 指向同一个 String `"Test"`。因此，要检查这些引用是否相等，我们必须使用`==`运算符。这将返回相应的值。
（equals 也会返回`true`，但目的不同）

String 的 Equals 方法检查 String 对象的实际内容。所以在上述情况下，如果我创建

```
String ref4= new String("Test"); 
```

ref1 不等于 ref，== 运算符将返回 false，因为这两个对象在堆内存中的存在不同。

如果我按方法比较两个对象，`equals`那么它将返回`true`，因为内容为真。

# Imp 注意子字符串中的内存泄漏

还要深入研究子字符串方法，`memory leak`如果我们不明智地使用它会导致。字符串的子字符串方法使用旧字符串的`value[]`数组对象来存储子字符串。
前任。你有一个字符串，比如 1 GB，如果用 500 MB 创建一个子字符串，那么它将返回 500 MB 字符集和 1 GB`value[]`数组对象。这意味着您仍然有 1 GB value[] 数组对象，其中包含 500 MB 数据。所以造成内存泄漏。
如何避免？

```
String some1 = new String(some2.substring(5)); // use such call 
String someStr = some2.substring(5); //don't use this way 
```

# php - 在 wamp Server 中配置计划任务

> ID：15402103
> 
> 赞同：0
> 
> 时间：2013-03-14T05:47:56.913
> 
> 标签：php, wampserver

如何在*wamp 服务器中配置**计划任务*？

# xaml - 命令未从 Silverlight 5 MVVM 中的 ItemsControl 执行

> ID：15402106
> 
> 赞同：0
> 
> 时间：2013-03-14T05:48:06.130
> 
> 标签：xaml, mvvm, binding, silverlight-5.0

我使用过 ItemsControl 并将其添加到 wrappanel 中。

```
<toolkit:WrapPanel Height="Auto" Width="Auto" Orientation="Horizontal" >

  <ItemsControl ItemsSource="{Binding ParcelViewModel.FavoriteParcelImages}" Height="Auto" Width="Auto"  >
    <ItemsControl.ItemsPanel>
      <ItemsPanelTemplate>

        <toolkit:WrapPanel Grid.Column="2" Grid.Row="1" Grid.RowSpan="3" Height="Auto" Width="Auto" Orientation="Horizontal"  />

      </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
      <DataTemplate>
        <Border BorderThickness="1" BorderBrush="LightGray" Margin="3" Height="Auto" Width="200" >

          <StackPanel Orientation="Horizontal" Width="200">
            <Grid Width="200">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="70"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
              </Grid.ColumnDefinitions>
              <StackPanel Grid.Row="0" Grid.Column="0" Height="100" HorizontalAlignment="Left">
                <!--<Image Source="/PropMgmt;component/Assets/Images/office-building-icon.png" Margin="0,5,0,0" Width="50" Height="50"  />-->
                <Image Source="{Binding DisplayImage.Source}" Height="50" Width="50"></Image>

                <StackPanel Margin="15,0,0,0">
                  <StackPanel Orientation="Horizontal">
                    <Image Source="/PropMgmt;component/Assets/Images/circle_orange.png" Width="10" />
                    <TextBlock Text="{Binding ReservedCount}" Margin="5,0,0,0"></TextBlock>
                  </StackPanel>
                  <StackPanel Orientation="Horizontal">
                    <Image Source="/PropMgmt;component/Assets/Images/circle_green.png" Width="10" />
                    <TextBlock Text="{Binding VaccantCount}" Margin="5,0,0,0"></TextBlock>
                  </StackPanel>
                  <StackPanel Orientation="Horizontal">
                    <Image Source="/PropMgmt;component/Assets/Images/circle_red.png" Width="10" />
                    <TextBlock Text="{Binding LeasedCount}" Margin="5,0,0,0"></TextBlock>
                  </StackPanel>
                </StackPanel>

              </StackPanel>
              <StackPanel Grid.Row="0" Grid.Column="1">
                <TextBlock Text="Code:" FontWeight="Bold"></TextBlock>
                <TextBlock Text="{Binding Code}"></TextBlock>
                <TextBlock Text="Name:" FontWeight="Bold"></TextBlock>
                <TextBlock Text="{Binding Title}"></TextBlock>
                **<HyperlinkButton Content="{Binding Title}"  Command="{Binding GetUnitListForParcel}" ></HyperlinkButton>**

                <TextBlock Text="Year of Construction:" FontWeight="Bold"></TextBlock>
                <TextBlock Text="{Binding Year_Of_Construction}"></TextBlock>
              </StackPanel>
            </Grid>
          </StackPanel>

        </Border>
      </DataTemplate>
    </ItemsControl.ItemTemplate>
  </ItemsControl>

</toolkit:WrapPanel> 
```

在 DataTemplate 中添加了超链接按钮。但我不明白为什么 HyperlinkBut​​ton 上的命令不起作用？

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:39:49.307

你需要改变你的绑定：

```
<HyperlinkButton Content="{Binding Title}" Command="{Binding YourViewModelName.GetUnitListForParcel, Source={StaticResource Locator}}" /> 
```

# ios - ios 闹钟应用程序拒绝与 AppStore 审查指南 2.16

> ID：15402115
> 
> 赞同：2
> 
> 时间：2013-03-14T05:48:44.143
> 
> 标签：ios, avaudioplayer, info.plist

我的闹钟应用收到了应用审核流程的拒绝：

> 2.16：多任务应用程序只能将后台服务用于其预期目的：VoIP、音频播放、位置、任务完成、本地通知等。
> 
> 2.16
> 
> 我们发现您的应用使用后台模式，但不包含需要该模式持续运行的功能。此行为不符合 App Store 审核指南。
> 
> 我们注意到您的应用在 Info.plist 的 UIBackgroundModes 键中声明支持音频，但不包含需要持久音频的功能。
> 
> 如 iOS 应用程序编程指南中所述：
> 
> “此密钥旨在供在后台向用户提供可听内容的应用程序使用，例如音乐播放器或流音频应用程序。”
> 
> 因此，在应用程序处于后台时向用户提供可听内容或从 UIBackgroundModes 键中删除“音频”设置是合适的。
> 
> 对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> *   包括您的拒绝问题的完整详细信息
> *   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。
> 
> 有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。
> 
> 如果您在重现此问题时遇到困难，请尝试使用 Xcode 的存档功能中所述测试工作流程”。

我已经发送了一封邮件通知我需要后台模式来播放警报，当它发出警报并且用户按下使应用程序进入后台的“主页”按钮时。然后我得到了回复：

> 你好，
> 
> 感谢您联系我们以提供有关您的应用 Kill Ants（闹钟）的更多信息。我已将此信息添加到您的应用记录中。
> 
> 以后，您可以将此信息直接添加到您的应用记录中，方法是将此信息包含在您的应用的审阅说明中，或者在您的应用处于拒绝状态时在调解中心回复。当您以其中任何一种方式提供信息时，无需通过电子邮件或联系我们表格提供信息。
> 
> 您可以在此处的 iTunes Connect 开发人员指南中找到有关“编辑和更新应用程序信息”的更多信息：
> 
> 当调解中心或审查说明不再处于指南中提及的可编辑状态时，您可以继续通过 iTunes Connect 联系我们，使用以下步骤：
> 
> 1.  去
> 2.  选择“应用审查”
> 3.  选择“继续沟通”，然后添加您的信息或问题。
> 
> 我希望这些信息对你有用。
> 
> 此致，
> 
> 应用审核小组

我该如何处理这个问题？我的应用程序实际上需要 backgroundMode 在后台播放闹钟音乐。有人有同样的问题吗？你如何解决它？

# ios - webdav 搜索返回 405

> ID：15402125
> 
> 赞同：0
> 
> 时间：2013-03-14T05:49:22.323
> 
> 标签：ios, webdav

我正在为 webdav 构建客户端应用程序。我已经实现了 MKCOl、删除、道具查找、移动、复制等 webdav 协议，并且运行良好。当我尝试实现搜索方法时，服务器返回：

> 405 方法不允许

我正在使用 apache2 服务器，我需要在服务器中进行任何配置更改吗？我从链接中了解到[如何获取部署在 Linux WebDav 上的文件夹和文件的列表？](https://stackoverflow.com/questions/3099428/how-to-get-the-list-of-folders-and-files-deployed-on-linux-webdav)有些服务器不支持搜索方法，链接给出的建议是使用webdav`propfind`方法，所以我想知道深度无穷大的propfind对于具有大量集合的文件系统是否可行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T17:40:39.490

您可以制作`PROPFIND`请求以[限制返回的字段](http://www.webdav.org/specs/rfc2518.html#rfc.section.8.1.1)。如果您将此请求限制为可搜索的参数，它可能适合您。

> [is] 深度无限对于具有大量集合的文件系统是可行的

当然，这取决于集合有多大。您将收到集合中每个项目的数百字节数据。包含数百万个对象的集合可能会产生相当大的响应！

# javascript - 寻找关于我的 URL 解析脚本 (Javascript) 的一般反馈

> ID：15402132
> 
> 赞同：0
> 
> 时间：2013-03-14T05:50:00.517
> 
> 标签：javascript, text-parsing

我对Javascript相当陌生，并组装了以下内容（部分来自在线示例，其余部分由我完成）：

这很可靠，我只是想知道我违反了多少最佳实践。如果有人很好地提供有关此脚本后半部分的一般反馈，那将不胜感激。

包含的两个功能是 (1) 在页面上捕获传入网站访问者的推荐数据，包括用于分析的 URL 查询字符串，并将其存储到 cookie。(2) 当访问者完成一个表单时，该脚本将读取 cookie 的 URL 值，将该 URL 解析为段，并将段数据写入表单上预先存在的隐藏输入中。

这将捕获和解析的示例 URL：[http ://example.com/page?utm_source=google&utm_medium=abc&utm_campaign=name1&utm_adgroup=name2&utm_kw=example1&kw=example2&mt=a&mkwid=xyz&pcrid=1234](http://example.com/page?utm_source=google&utm_medium=abc&utm_campaign=name1&utm_adgroup=name2&utm_kw=example1&kw=example2&mt=a&mkwid=xyz&pcrid=1234)

```
function storeRef() { //this function stores document.referrer to a cookie if the cookie is not already present
    var isnew = readCookie('cookiename'); //set var via read-cookie function's output
        if (isnew == null) {
            var loc=document.referrer; 
            createCookie('cookiename',loc,0,'example.com'); //create cookie via function with name, value, days, domain 
        }
}

function printQuery() { //function to parse cookie value into segments
    var ref=readCookie('cookiename'); //write cookie value to variable
    var refElement = ref.split(/[?&]/); //create array with variable data, separated by & or ?. This is for domain info primarily.
    var queryString = {}; //From http://stevenbenner.com/2010/03/javascript-regex-trick-parse-a-query-string-into-an-object/
    ref.replace(
        new RegExp("([^?=&]+)(=([^&]*))?", "g"),
        function($0, $1, $2, $3) { queryString[$1] = $3; } 
    );
//write segments to form field names below.     
    document.getElementsByName('example1')[0].value = refElement[0]; //exampleX is a form hidden input's name. I can not use getElementById here.
//need to be able to manually define these, which is why they aren't in a loop, though I'm not sure how to loop an array referenced in this way
    document.getElementsByName('example2')[0].value = queryString['utm_source']; 
    document.getElementsByName('example3')[0].value = queryString['utm_medium'];
    document.getElementsByName('example4')[0].value = queryString['utm_term'];
    document.getElementsByName('example5')[0].value = queryString['utm_content'];
    document.getElementsByName('example6')[0].value = queryString['utm_campaign'];
    document.getElementsByName('example7')[0].value = queryString['utm_adgroup'];
    document.getElementsByName('example8')[0].value = queryString['utm_kw'];
    document.getElementsByName('example9')[0].value = queryString['kw'];
    document.getElementsByName('example10')[0].value = queryString['mt'];
    document.getElementsByName('example11')[0].value = queryString['mkwid'];
    document.getElementsByName('example12')[0].value = queryString['pcrid'];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:09:25.963

如果除非您想跟踪访问您网站的访问者，为什么您需要使用 cookie 来存储数据？

# android - 不同的版本在市场上如何运作？

> ID：15402135
> 
> 赞同：1
> 
> 时间：2013-03-14T05:50:13.477
> 
> 标签：android, version, apk, google-play

我已经为谷歌游戏市场完成了我的入门应用程序。我想做一个免费和付费的版本，所以我想知道的是：

我可以为免费版本注释掉付费版本中的部分，并在对话框中更具体地使用相同的项目引用市场上的付费版本，只是使用不同的版本号和导出的 apk 吗？

我想知道，因为我听说市场不会让 apk 具有相同的包名称，但我之前使用过的应用程序如果你有付费版本，你就不能有免费版本，所以我猜测它的所有关于版本#

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:16:34.103

您是对的，Google Play 不允许上传具有相同包名的 APK。Play 商店使用包名称将不同的应用程序与其他应用程序区分开来。

但是，您认为它是处理相同应用程序（免费和付费）的版本有点偏离轨道。

但是（再次）相同应用程序的免费和付费版本可以在使用相同 Google 帐户下载的同一设备上共存。应用程序中可能存在检查并通知用户的功能。但这不是 Google Play 商店提供的机制。

以一个名为 FriendCaster 的应用程序为例。（*我是一名独立的自由职业者，与 FriendCaster 或 OneLouder Apps 无关*）

1.  FriendCaster 的免费版本是：[https ://play.google.com/store/apps/details?id=uk.co.senab.blueNotifyFree](https://play.google.com/store/apps/details?id=uk.co.senab.blueNotifyFree)

2.  如果同一个应用程序的付费版本是：[https ://play.google.com/store/apps/details?id=uk.co.senab.blueNotify](https://play.google.com/store/apps/details?id=uk.co.senab.blueNotify)

它们都具有相同的版本，但包名称不同（结尾不同）。您将能够在一台设备上同时安装这两个应用程序。

就我而言，我为我的应用程序的免费和付费版本使用相同的代码库。唯一的区别是（显然）付费版本已从 XML 中删除了所有广告。

我使用两个不同的 Eclipse 工作空间来保持我的免费版本和付费版本彼此分开。这比其他任何事情都更方便。您可以很好地将这两个项目放在同一个 Eclipse 工作空间中。

但是，根据您对 OP 的评论，您不能使用同一个项目导出两个具有不同包名称的不同 APK。如果您已完成付费版本，则需要为免费版本创建一个新项目。您需要独立导出每个项目的 APK。

为了保持代码库的一致性，我尽可能避免使用硬代码。例如，在打开应用程序的 Google Play 详细信息页面的 Activity 中，我没有在其中硬编码我的包名称，而是使用如下内容：

```
Uri playUri = Uri.parse("market://details?id=" + Feedback.this.getPackageName());
Intent openGooglePlay = new Intent(Intent.ACTION_VIEW, playUri);
try {
    startActivity(openGooglePlay);
} catch (ActivityNotFoundException e) {

    // SHOW A TOAST
    String tstMessage = "Could not launch the Play Store app.";
    showToast.showToast(tstMessage);
} 
```

我希望我对这篇文章有所了解。如果您需要任何澄清，请随时询问。:-)

# css - 使用 Twitterbootstrap 创建的网站的导航栏在 Internet Explorer 中不起作用

> ID：15402137
> 
> 赞同：0
> 
> 时间：2013-03-14T05:50:16.350
> 
> 标签：css

我使用 twitter bootstrap 创建了一个网站。

除 Internet Explorer 外，所有浏览器都运行良好。导航栏背景图像不会出现在所有版本的 Internet Explorer 中，而是显示黑色背景。

抱歉没有发布链接。

网站链接是[http://www.dreamsmedia.org/ajmat/index.html](http://www.dreamsmedia.org/ajmat/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:14:03.840

在您的`bootstrap.css`文件中，查找`.navbar-inverse .navbar-inner`选择器并删除：

`filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffffffff', GradientType=0);`

在`.navbar-inner`删除时：

`filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffffffff', GradientType=0);`

# mysql - MySQL查询很慢。索引列上的计数（*）

> ID：15402141
> 
> 赞同：5
> 
> 时间：2013-03-14T05:50:28.530
> 
> 标签：mysql, sql, performance, innodb

该表在 InnoDB 表中。以下是一些可能有用的信息。

```
EXPLAIN SELECT COUNT(*) AS y0_ FROM db.table this_ WHERE this_.id IS NOT NULL;

+----+-------------+-------+-------+---------------+---------+---------+------+---------+--------------------------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref  | rows    | Extra                    |
+----+-------------+-------+-------+---------------+---------+---------+------+---------+--------------------------+
|  1 | SIMPLE      | this_ | index | PRIMARY       | PRIMARY | 8       | NULL | 4711235 | Using where; Using index |
+----+-------------+-------+-------+---------------+---------+---------+------+---------+--------------------------+
1 row in set (0.00 sec)

mysql> DESCRIBE db.table;
+--------------+--------------+------+-----+---------+-------+
| Field        | Type         | Null | Key | Default | Extra |
+--------------+--------------+------+-----+---------+-------+
| id           | bigint(20)   | NO   | PRI | NULL    |       |
| id2          | varchar(28)  | YES  |     | NULL    |       |
| photo        | longblob     | YES  |     | NULL    |       |
| source       | varchar(10)  | YES  |     | NULL    |       |
| file_name    | varchar(120) | YES  |     | NULL    |       |
| file_type    | char(1)      | YES  |     | NULL    |       |
| created_date | datetime     | YES  |     | NULL    |       |
| updated_date | datetime     | YES  |     | NULL    |       |
| createdby    | varchar(50)  | YES  |     | NULL    |       |
| updatedby    | varchar(50)  | YES  |     | NULL    |       |
+--------------+--------------+------+-----+---------+-------+
10 rows in set (0.05 sec) 
```

解释查询给了我结果。但是实际的查询已经运行了很长一段时间。我怎样才能解决这个问题？我究竟做错了什么？

我基本上需要弄清楚`photos`这张表中有多少。最初，原始编码器有一个检查过的查询`WHERE photo IS NOT NULL`（花费了 3 小时以上），但我更改了此查询以检查该`id`列，因为它是主键。我预计那里会有巨大的性能提升，并期待在一秒钟内得到答案，但似乎并非如此。

我需要对数据库进行哪些优化？我认为查询很好，但如果我错了，请随时纠正我。

编辑：mysql Ver 14.14 Distrib 5.1.52，用于 redhat-linux-gnu (x86_64) 使用 readline 5.1

PS：出于某种疯狂的原因，我重命名了表格。我实际上没有名为 db 的数据库和名为 table 的表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T06:08:03.500

“长”有多长？这个表有多少行？

MyISAM 表会跟踪它有多少行，所以一个简单的 COUNT(*) 几乎总是会立即返回。

另一方面，InnoDB 的工作方式不同：InnoDB 表不跟踪它有多少行，所以当你 COUNT(*) 时，它实际上必须去计算每一行。如果您有一张大桌子，这可能需要几秒钟。

编辑：尝试`COUNT(ID)`代替`COUNT(*)`，其中`ID`没有 NULL 的索引列在哪里。那*可能*跑得更快。

EDIT2：如果您将文件的二进制数据存储在 longblob 中，您的表将非常庞大，这会减慢速度。

可能的解决方案：

1.  使用 MyISAM 而不是 InnoDB。
2.  保持您自己的计数，可能在插入和删除时使用触发器。
3.  将二进制数据剥离到另一个表中，或者最好是常规文件。

# android - 如何获取在listview android中单击了哪个按钮或图像？

> ID：15402144
> 
> 赞同：0
> 
> 时间：2013-03-14T05:50:34.830
> 
> 标签：android, listview, onitemclicklistener

你可以在图像中检查它我在listview左侧imageview和右侧buttonview中有2个视图，其他是textview但是当imageview调用开始另一个活动时我必须调用不同的活动，如果点击按钮而不是被称为不同的活动那么怎么能我在列表视图中获得特定的按钮或图像点击事件

活动类.java

```
liststipciations.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position,
            long l) {

    Log.e("list stipcitaions", "-->"+liststipciations.getItemIdAtPosition(position));

    }
}); 
```

适配器类.java

```
public class LazyAdapterStipciationsAdvertise extends BaseAdapter implements OnClickListener{

    private static final String TAG_SHOWTEXT="showtext";
    String showtext;

    private static final String TAG_PRODUCTINFO="product_info";
    String productinfo;

    private static final String TAG_THUMBIMAGE="thumbsrc";
    String thumbimage;

    private static final String TAG_STIPCIATED="stipciated";
    String stipciated;

    private static final String TAG_DISTANCE="distance";
    private Activity activity;
    private ArrayList<HashMap<String, String>> result; 
    private static LayoutInflater inflater=null;
    public GridImageLoader gridimageLoader; 
    int imageWidth;
    int imageheight;
    Context context; 
    int width;
    int height;

    int layoutwidth;
    int layoutheight;

    public LazyAdapterStipciationsAdvertise(Activity a, ArrayList<HashMap<String, String>> r)
    {
        activity = a;
        result=r;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        gridimageLoader=new GridImageLoader(activity.getApplicationContext());

        width = a.getWindowManager().getDefaultDisplay().getWidth();
        height=a.getWindowManager().getDefaultDisplay().getHeight();

        imageWidth = ((width*18)/100);
        layoutheight=((height*20)/100);

    }

    public int getCount() {
        return result.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public static class ViewHolder
    {
        public TextView textpromotional;
        public TextView textdistance;
        public ImageView imageadvertise;
        public ImageView imagestipciate;
        public ImageView imagestipciated;

    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View vi=convertView;
        ViewHolder holder;
        if(convertView==null)
        {
            vi = inflater.inflate(R.layout.stipciationslist, null);
             holder=new ViewHolder();
            holder.textpromotional=(TextView)vi.findViewById(R.id.textpromotional);
            holder.textdistance=(TextView)vi.findViewById(R.id.textdistance);
            holder.imageadvertise=(ImageView)vi.findViewById(R.id.imageadvertise);
            holder.imageadvertise.setLayoutParams(new LinearLayout.LayoutParams(imageWidth,imageWidth));

            holder.imagestipciate=(ImageView)vi.findViewById(R.id.imagestipciate);
            holder.imagestipciated=(ImageView)vi.findViewById(R.id.imagestipciated);
            vi.setTag(holder);
        }
        else

            holder=(ViewHolder)vi.getTag();

        holder.textpromotional.setText(result.get(position).get(TAG_SHOWTEXT));
        holder.textdistance.setText(result.get(position).get(TAG_DISTANCE));
        holder.imageadvertise.setTag(result.get(position).get(TAG_THUMBIMAGE));
        holder.imageadvertise.setId(1);

        if(result.get(position).get(TAG_STIPCIATED).equals("1"))
        {
            holder.imagestipciated.setVisibility(View.VISIBLE);
            holder.imagestipciated.setId(2);
            holder.imagestipciate.setVisibility(View.INVISIBLE);
        }
        if(result.get(position).get(TAG_STIPCIATED).equals("0"))
        {
            holder.imagestipciate.setVisibility(View.VISIBLE);
            holder.imagestipciate.setId(3);
            holder.imagestipciated.setVisibility(View.INVISIBLE);
        }
        gridimageLoader.DisplayImage(result.get(position).get(TAG_THUMBIMAGE), activity, holder.imageadvertise);
        return vi;
    }

    public static float convertDpToPixel(float dp, Context context){
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * (metrics.densityDpi/160f);
        return px;
    }

} 
```

![在此处输入图像描述](../Images/e466eebb43fe4aba9ea87ff67f115ec3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:01:51.373

您可以`setOnClickListener`在方法中实现按钮以及图像`getView`。希望下面的代码对您有所帮助。

```
Button myButton

public View getView(int position, View convertView, ViewGroup parent)
{
    myButton = (Button)convertView.findViewById(R.id.myButton);

    myButton.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Intent intent = new Intent(CurrentActivity.this, OtherActivity.class);
            startActivity(intent);
        }
    });
} 
```

# java - Android广播接收器给出错误

> ID：15402149
> 
> 赞同：0
> 
> 时间：2013-03-14T05:50:48.920
> 
> 标签：java, android, broadcastreceiver

还有一个问题。试图使用广播接收器来触发警报（警报管理器）。

使用如下代码：package com.suncco.shangxinbao.service；

```
import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

import com.suncco.shangxinbao.model.ScheduledSms;

public class SmsTimerService extends BroadcastReceiver {

public SmsTimerService(Context context, int timeoutInSeconds,
        ScheduledSms sms) {

    Intent myIntent = new Intent(context, SmsTimerService.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
            sms.getRequestCodeForListener(), myIntent, 0);
    AlarmManager alarmManager = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 5); // should be timeoutInSeconds instead of 5
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
            pendingIntent);
}

@Override
public void onReceive(Context context, Intent intent) {
    Log.w("Karl", "yay");
} 
```

在清单中，我把它作为接收者：

```
 <receiver
        android:name="com.suncco.shangxinbao.service.SmsTimerService"
        android:process=":remote" /> 
```

我像这样创建我的 SmsTimerService 对象：

```
 SmsTimerService smsTimerService = new SmsTimerService(this,5,sms); 
```

这是众所周知的错误......

```
java.lang.RuntimeException: Unable to instantiate receiver     
com.suncco.shangxinbao.service.SmsTimerService: java.lang.InstantiationException: 
com.suncco.shangxinbao.service.SmsTimerService 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:25:34.780

由于没有空的构造函数，例如**SmsTimerService()** ，因此您将遇到无法实例化接收器错误。关键是您需要一个空的构造函数，以便在接收意图时创建此接收器。**如果你不实现任何构造函数也没关系。但是，如果你实现一个带参数的构造函数，你还需要实现一个空的！**

所以你可以做这样的事情。请注意，我没有研究您在创建意图时实际想要做什么。

```
public class SmsTimerService extends BroadcastReceiver {

    private void doAction(Context context, int timeoutInSeconds, ScheduledSms sms) {
        Intent myIntent = new Intent(context, SmsTimerService.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
        sms.getRequestCodeForListener(), myIntent, 0);
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.SECOND, 5); // should be timeoutInSeconds instead of         
        alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        // you get to replace sms with something!
        doAction(context, 5, sms); // original u do - > new SmsTimerService(this,5,sms);
    }
} 
```

# android - 更改底部菜单项背景

> ID：15402150
> 
> 赞同：2
> 
> 时间：2013-03-14T05:50:54.163
> 
> 标签：android, actionbarsherlock

单击设备菜单按钮后，如何更改底部显示的菜单项的背景

![在此处输入图像描述](../Images/feca4b0bbb5699c8951ad11711c69840.png)

我正在使用**ActionBarSherlock**，顶部的 ActionBar 有蓝色背景。以为底部菜单的背景也是如此。但它是白色的。看起来像默认值。所以，这个图标在那个白色背景上看起来不太好。我怎样才能将其更改为蓝色。

**我试过这个：**

```
<item name="android:panelBackground">@drawable/blue</item> 
```

但是没有用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:07:50.383

我有类似的要求，我找到了这个可行的解决方案。使用以下

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    addOptionsMenuHackerInflaterFactory();
    return true;
}

@SuppressWarnings("rawtypes")
static Class       IconMenuItemView_class = null;
@SuppressWarnings("rawtypes")
static Constructor IconMenuItemView_constructor = null;

// standard signature of constructor expected by inflater of all View classes
@SuppressWarnings("rawtypes")
private static final Class[] standard_inflater_constructor_signature = 
new Class[] { Context.class, AttributeSet.class };

protected void addOptionsMenuHackerInflaterFactory()
{
    final LayoutInflater infl = getLayoutInflater();

    infl.setFactory(new Factory()
    {
        public View onCreateView(final String name, 
                                 final Context context,
                                 final AttributeSet attrs)
        {
            if (!name.equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView"))
                return null; // use normal inflater

            View view = null;

            if (IconMenuItemView_class == null)
            {
                try
                {
                    IconMenuItemView_class = getClassLoader().loadClass(name);
                }
                catch (ClassNotFoundException e)
                {
                    // this OS does not have IconMenuItemView - fail gracefully
                    return null; // hack failed: use normal inflater
                }
            }
            if (IconMenuItemView_class == null)
                return null; // hack failed: use normal inflater

            if (IconMenuItemView_constructor == null)
            {
                try
                {
                    IconMenuItemView_constructor = 
                    IconMenuItemView_class.getConstructor(standard_inflater_constructor_signature);
                }
                catch (SecurityException e)
                {
                    return null; // hack failed: use normal inflater
                }
                catch (NoSuchMethodException e)
                {
                    return null; // hack failed: use normal inflater
                }
            }
            if (IconMenuItemView_constructor == null)
                return null; // hack failed: use normal inflater

            try
            {
                Object[] args = new Object[] { context, attrs };
                view = (View)(IconMenuItemView_constructor.newInstance(args));
            }
            catch (IllegalArgumentException e)
            {
                return null; // hack failed: use normal inflater
            }
            catch (InstantiationException e)
            {
                return null; // hack failed: use normal inflater
            }
            catch (IllegalAccessException e)
            {
                return null; // hack failed: use normal inflater
            }
            catch (InvocationTargetException e)
            {
                return null; // hack failed: use normal inflater
            }
            if (null == view) // in theory handled above, but be safe... 
                return null; // hack failed: use normal inflater

            // apply our own View settings after we get back to runloop
            // - android will overwrite almost any setting we make now
            final View v = view;
            new Handler().post(new Runnable()
            {
                public void run()
                {
                    v.setBackgroundDrawable(getResources().getDrawable(R.drawable.menubuttonselector));
                         // here use your own selector drawable 
                    try
                    {
                        // in Android <= 3.2, IconMenuItemView implemented with TextView
                        // guard against possible future change in implementation
                        TextView tv = (TextView)v;
                        tv.setTextColor(Color.WHITE);
                    }
                    catch (ClassCastException e)
                    {
                        // hack failed: do not set TextView attributes
                    }
                }
            });

            return view;
        }
    });
} 
```

**警告：**

这是一个黑客解决方案。因为我需要它，一旦我无法给出足够的时间来确定是否有任何副作用。但它完美地为我服务。希望对你有帮助

# haskell - 结合 foldl 和 foldr

> ID：15402152
> 
> 赞同：1
> 
> 时间：2013-03-14T05:50:59.403
> 
> 标签：haskell, fold

我自己发现`foldl`(or `foldl'`) 是当您想要将列表汇总为一个结果 (ie `sum`)`foldr`时的最佳方法，并且是当您想要生成另一个 (甚至可能是无限的) 列表 (ie `filter`) 时的最佳方法。

所以我正在考虑将这两者结合起来的处理。所以我做了这个功能`sum_f`。`sum_f`相当简单，它所做的只是将列表的元素相加，但如果它找到一个`f x`为真的元素，它会将当前结果作为列表的元素作为输出，并从该点开始求和。

代码在这里：

```
sum_f :: (Num a) => (a -> Bool) -> [a] -> [a]
sum_f f = 
  let
    sum_f_worker s (x:xs) = 
      let
        rec_call z = sum_f_worker z xs
        next_sum = s + x
      in
        next_sum `seq` if (f x) then next_sum : (rec_call 0) else rec_call next_sum
    sum_f_worker _ [] = []
  in
    sum_f_worker 0 
```

例如，现在让我们对所有按 2 的任意幂分组的正整数求和。这应该输出以下内容：

```
[1, 2, 3+4, 5+6+7+8, 9+10+11+12+13+14+15+16, ...] 
```

IE

```
[1, 2, 7, 26, 100, ...] 
```

我们可以这样做：

```
import Data.Bits

main = 
  let
    power_of_two x = (x .&. (x - 1)) == 0 -- .&. is bitwise and
  in
    print $ take 25 $ sum_f power_of_two [(1::Integer)..] 
```

现在，上面的函数（我相信）在恒定空间（如`foldl'`）中运行，即使组呈指数增长。此外，它适用于无限列表（如`foldr`）。

我想知道我是否可以在没有显式递归的情况下使用前奏函数编写上述内容（即只有前奏函数内部的递归）。还是结合这里的`foldl`and的思想`foldr`意味着这里的递归不能用标准的前奏函数来完成，需要显式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:26:47.267

您想要的内容可以仅使用正确的折叠来表达，如下所示：

```
{-# LANGUAGE BangPatterns #-}

sum_f :: (Num a) => (a -> Bool) -> [a] -> [a]
sum_f p xs = foldr g (const []) xs 0
  where
    g x f !a = if p x then x+a:f 0 else f (x+a)

Prelude Data.Bits> sum_f (\x -> x .&. pred x == 0) [1..10]
[1,2,7,26] 
```

它适用于无限列表：

```
Prelude Data.Bits> take 10 . sum_f (\x -> x .&. pred x == 0) $ [1..]
[1,2,7,26,100,392,1552,6176,24640,98432] 
```

# d3.js - 在 d3 上具有 UTM 坐标的 LineString

> ID：15402161
> 
> 赞同：1
> 
> 时间：2013-03-14T05:51:34.427
> 
> 标签：d3.js, gis, geojson

我正在尝试使用 d3 实现一些映射。在我从使用命令 d3.svg.line() 转移到 d3.geo.path() 并重组为 Geojson 之后发生了一些问题。

我在 UTM 坐标区 48N 上绘制了线串部分，如下所示

```
{"type":"FeatureCollection","features":[
{"type":"Feature","id":"02","properties":{"name":"LMC1"},"geometry":{"type":"LineString","coordinates":[
[375221,1.92031e+06],[375287,1.92027e+06],..]}},..]} 
```

我使用墨卡托设置投影

```
var projection = d3.geo.mercator(),
path = d3.geo.path().projection(projection); 
```

此结果显示复杂的行字符串 JavaScript 控制台

```
Error: Problem parsing d="M521120.2777777778,111.9000492736892L620.2810464730694,... 
```

我在投影上做错了吗？还是 geo.path 还不支持 UTM？有谁有想法吗？

[您还可以在http://jsfiddle.net/agadoo/qNCcV/](http://jsfiddle.net/agadoo/qNCcV/)上看到我的此代码示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:59:41.510

您不能将 UTM 坐标与`d3.geo`（还）一起使用。在将数据传递给 d3 之前，您必须将它们转换为例如墨卡托投影。[Mike 的教程](http://bost.ocks.org/mike/map/)中介绍了这个（以及更多）。

# scons - 如何在scons的变体目录中生成目标文件

> ID：15402162
> 
> 赞同：1
> 
> 时间：2013-03-14T05:51:37.000
> 
> 标签：scons

我在 python 2.7.1 中使用 scons 我的问题是，我想在构建目录中生成目标文件。但目标文件正在我的源目录中创建。

我的代码是：

```
env.Library('Liba', Glob(builddir + '/*.c')) 
```

你能告诉我如何在build目录中生成目标文件吗

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:52:00.570

在 SCons 术语中，您所要求的称为变体目录，或简称为`VariantDir`. 您有几个选项可以将目标放置在 VariantDir 中，如此[处](http://www.scons.org/doc/production/HTML/scons-user/c3361.html)所述。

您可以使用`VariantDir()`具有以下语法的函数：

```
VariantDir(variant_dir, src_dir, [duplicate]) 
```

`duplicate`参数是 a ，`boolean`表示是否要将源代码复制到变体目录。

使用 VariantDir 的另一种方法是，如果您具有 SConstruct 和 SConscript 脚本文件的层次结构，则在使用 SConscript() 函数调用辅助 SConscripts 时，其中一个参数是`variant_dir`，如下所述：

```
SConscript(dirs=subdirs, [name=script, exports, variant_dir, duplicate]) 
```

请注意，该`SConscript()`函数也有`duplicate`参数。

# vb.net - 使用本地管理员帐户登录 vb.net 程序

> ID：15402164
> 
> 赞同：0
> 
> 时间：2013-03-14T05:51:39.997
> 
> 标签：vb.net, authentication, administrator

我编写了一个需要用户使用本地管理员帐户登录的程序。但是每台 PC 的本地管理员帐户名称都不同，因此我无法对用户名进行硬编码。

下面的代码只检索了管理员组中的用户，而不是身份验证。可以帮忙？1.如何验证用户名和密码？2.如何强制用户仅使用本地用户帐户登录。

```
 Dim localMachine As New DirectoryEntry("WinNT://" & "localhost")
        Dim admGroup As DirectoryEntry = localMachine.Children.Find("Administrators", "group")
        Dim members As Object = admGroup.Invoke("members", Nothing)
        For Each groupMember As Object In CType(members, IEnumerable)
            Dim member As New DirectoryEntry(groupMember)
            MsgBox(member.Name)
        Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:02:06.287

确保您的应用程序以管理权限运行的最佳和最简单的方法是[嵌入一个](http://msdn.microsoft.com/en-us/library/bb756929.aspx)满足此类需求的清单。

您*永远不*应该对这样的东西进行硬编码，并且 UAC 的存在意味着不能保证作为 Administrators 组成员的用户目前对您的进程具有管理权限。

VB.NET 编译器自动将默认清单嵌入到您的应用程序中，但该默认清单不请求管理权限。因此，您需要添加一个自定义清单。
要获得一个，请按照下列步骤操作：

1.  在解决方案资源管理器中右键单击您的项目。
2.  从上下文菜单中选择“属性”。
3.  切换到“应用程序”选项卡。
4.  单击“查看 Windows 设置”以打开清单文件。
5.  进行以下修改：

```
 <requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

# delphi - 格式化机器后Delphi XE License失效

> ID：15402168
> 
> 赞同：0
> 
> 时间：2013-03-14T05:52:05.253
> 
> 标签：delphi, delphi-xe

我有一个 delphi XE 许可证。我格式化我的机器并再次安装Delphi，当我尝试注册我的许可证时，它说该帐户已达到限制。我应该如何进一步进行？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:28:16.623

引用他们的网站：“如果您已达到产品注册限制并有正当理由增加它，请联系 Embarcadero 客户支持：[http](http://www.embarcadero.com/support) ://www.embarcadero.com/support ”

# macros - 在通用 lisp 宏中扩展参数列表

> ID：15402172
> 
> 赞同：4
> 
> 时间：2013-03-14T05:52:24.743
> 
> 标签：macros, common-lisp

我正在尝试自学普通的 lisp，并且作为宏编写的练习，我正在尝试创建一个宏来定义任意深度的嵌套循环。我正在使用 sbcl，使用 emacs 和 slime。

首先，我编写了这个双循环宏：

```
(defmacro nested-do-2 (ii jj start end &body body)
  `(do ((,ii ,start (1+ ,ii)))
       ((> ,ii ,end))
     (do ((,jj ,ii (1+ ,jj)))
         ((> ,jj ,end))
       ,@body))) 
```

然后我可以使用如下：

```
(nested-do-2 ii jj 10 20 (print (+ ii jj))) 
```

顺便说一句，我最初使用 gensym 编写了这个宏来生成循环计数器 (ii, jj)，但后来我意识到如果我无法访问正文中的计数器，宏就毫无用处。

无论如何，我想概括宏以创建一个嵌套执行循环，该循环将嵌套到任意级别。这是我到目前为止所得到的，但它并不完全有效：

```
(defmacro nested-do ((&rest indices) start end &body body)
  `(dolist ((index ,indices))
     (do ((index ,start (1+ index)))
          ((> index ,end))
        (if (eql index (elt ,indices (elt (reverse ,indices) 0)))
            ,@body)))) 
```

我想调用如下：

```
(nested-do (ii jj kk) 10 15 (print (+ ii jj kk))) 
```

但是，列表没有正确扩展，我最终在调试器中出现以下错误：

```
error while parsing arguments to DEFMACRO DOLIST:                                              
  invalid number of elements in                                                                
    ((INDEX (II JJ KK))) 
```

如果不明显，嵌入式 if 语句的重点是仅在最内层循环中执行主体。这对我来说似乎不是很优雅，也没有经过真正的测试（因为我还不能扩展参数列表），但这并不是这个问题的重点。

如何在宏中正确展开列表？是宏语法有问题，还是函数调用中列表的表达式有问题？任何其他意见也将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:59:19.300

这是一种方法 - 从每个索引的底部（循环体）构建结构：

```
(defmacro nested-do ((&rest indices) start end &body body)
  (let ((rez `(progn ,@body)))
    (dolist (index (reverse indices) rez)
      (setf rez
            `(do ((,index ,start (1+ ,index)))
                 ((> ,index ,end))
               ,rez))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:38:20.573

[除了反对票，这确实有效，而且也很漂亮！]

只是为了清楚地说明宏定义的递归性质，这里是一个 Scheme 实现：

```
(define-syntax nested-do
  (syntax-rules ()
    ((_ ((index start end)) body)
     (do ((index start (+ 1 index)))
         ((= index end))
       body))

    ((_ ((index start end) rest ...) body)
     (do ((index start (+ 1 index)))
         ((= index end))
       (nested-do (rest ...) body))))) 
```

使用上面的作为模板，这样的事情可以完成：

```
(defmacro nested-do ((&rest indices) start end &body body)
  (let ((index (car indices)))
    `(do ((,index ,start (1+ ,index)))
         ((> ,index ,end))
       ,(if (null (cdr indices))
            `(progn ,@body)
            `(nested-do (,@(cdr indices)) ,start ,end ,@body)))))

* (nested-do (i j) 0 2 (print (list i j)))
(0 0) 
(0 1) 
(0 2) 
(1 0) 
(1 1) 
(1 2) 
(2 0) 
(2 1) 
(2 2) 
NIL 
```

请注意，对于所有 Common-Lisp 宏，您需要使用“gensym”模式来避免变量捕获。

# c# - Jquery Lightbox 不适用于 MasterPage

> ID：15402180
> 
> 赞同：0
> 
> 时间：2013-03-14T05:53:22.860
> 
> 标签：c#, javascript, jquery, master-pages, lightbox

我以前使用过灯箱和变体，但无法使其正常工作。希望有人有一些建议，因为我远非 javascript 专家。C#/ASP 网站有一个 MasterPage，其他所有页面都使用该 MasterPage。链接也是通过代码动态生成的。我的测试有两个结果：要么它就像一个普通链接一样工作并将我重定向到图像，要么当我点击它时它什么也不做。

在 MasterPage 头中：

```
<script src="../js/jquery-1.7.2.min.js"></script>
<script src="../js/lightbox.js"></script> 
```

在页面代码中：

```
DynLink.ImageUrl = "~/PostPhotos/Thumbnails/" + Path.GetFileNameWithoutExtension(image.Photo) +     "_thumb100_100" + Path.GetExtension(image.Photo).Replace("//","/"); 
DynLink.NavigateUrl = "~/PostPhotos/Thumbnails/" + Path.GetFileNameWithoutExtension(image.Photo) + "_thumblowres" + Path.GetExtension(image.Photo); 
DynLink.Attributes.Add("rel", "lightbox"); 
```

生成的链接（通过萤火虫检查）：

```
<a href="PostPhotos/Thumbnails/grumpy_cat_christmas_9_thumblowres.jpg" rel="lightbox">
<img alt="" src="PostPhotos/Thumbnails/grumpy_cat_christmas_9_thumb100_100.jpg">
</a> 
```

图像显示得很好，当我用萤火虫检查它时，一切似乎都很好（它具有“rel”属性等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:59:57.513

因为您的元素是动态添加的......在将动态生成的元素附加到文档中之后调用灯箱，将起作用......

```
DynLink.ImageUrl = "~/PostPhotos/Thumbnails/" + Path.GetFileNameWithoutExtension(image.Photo) +     "_thumb100_100" + Path.GetExtension(image.Photo).Replace("//","/"); 
DynLink.NavigateUrl = "~/PostPhotos/Thumbnails/" + Path.GetFileNameWithoutExtension(image.Photo) + "_thumblowres" + Path.GetExtension(image.Photo); 
DynLink.Attributes.Add("rel", "lightbox");
//your append code..
$('#dynamicelementID').lightbox(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:59:22.193

请确保您在母版页某处的 document.ready 中配置灯箱

```
$(document).ready(function(){

$('YourLightBoxSelector').lightbox(); 

}); 
```

# linux - 基于 linux 的 USB Gadget 设备的静态主机 RNDIS IP

> ID：15402186
> 
> 赞同：2
> 
> 时间：2013-03-14T05:53:42.343
> 
> 标签：linux, usb, rndis

我必须在基于 Linux 的板和主机（可以是 WinXP/Win7/Ubuntu 等）之间建立 RNDIS 连接。

当我使用 RNDIS 电缆连接板时，所有主机都识别并开始解析 IP 地址。在主板方面，我通过在启动时执行命令来提供静态 IP

```
ifconfig usb0 169.254.1.1 netmask 255.255.0.0 up 
```

但是主机需要很长时间来协商 RNDIS IP，并且每次都会出现一些不可预测的 IP，例如`169.254.abc.xyz`.

我想为`169.254.1.2`与此 Linux 板连接的任何主机分配一个静态 RNDIS IP（例如）。有人可以帮我确定如何实现这一目标吗？在主机端，我不使用任何特殊的 RNDIS 驱动程序。下载默认的 USB-Ethernet 驱动程序。Linux 版本为 2.3.62。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:28:41.677

好的..我得到了答案....实际上我们必须通过接口usb0启动一个dhcp服务器。因此，每当 USB 主机尝试寻找 dhcp IP 时，在设备上运行并在 usb0 接口上列出的 dhcp 服务器将应答呼叫并分配一个 IP。要修复一个 IP，只需在 IP 池中分配一个 IP（可以在 udhcpd.conf 文件中完成）

将服务器 udhcpd 启动为：

```
busybox udhcpd /etc/udhcpd.conf 
```

以下是我使用的 dhcpd.conf 示例：

```
# Sample udhcpd configuration file (/etc/udhcpd.conf)
# Values shown are defaults

# The start and end of the IP lease block
start       169.254.10.102
end     169.254.10.102

# The interface that udhcpd will use
interface   usb0

# The maximum number of leases (includes addresses reserved
# by OFFER's, DECLINE's, and ARP conflicts). Will be corrected
# if it's bigger than IP lease block, but it ok to make it
# smaller than lease block.
#max_leases 254

# The amount of time that an IP will be reserved (leased to nobody)
# if a DHCP decline message is received (seconds)
#decline_time   3600

# The amount of time that an IP will be reserved
# if an ARP conflict occurs (seconds)
#conflict_time  3600

# How long an offered address is reserved (seconds)
#offer_time 60

# If client asks for lease below this value, it will be rounded up
# to this value (seconds)
#min_lease  60

# The location of the pid file
#pidfile    /var/run/udhcpd.pid

# The location of the leases file
#lease_file /var/lib/misc/udhcpd.leases

# The time period at which udhcpd will write out leases file.
# If this is 0, udhcpd will never automatically write leases file.
# Specified in seconds.
#auto_time  7200

# Every time udhcpd writes a leases file, the below script will be called
#notify_file            # default: no script
#notify_file    dumpleases  # useful for debugging

# The following are bootp specific options
# next server to use in bootstrap
#siaddr     192.168.0.22    # default: 0.0.0.0 (none)
# tftp server name
#sname      zorak       # default: none
# tftp file to download (e.g. kernel image)
#boot_file  /var/nfs_root   # default: none

# Static leases map
#static_lease 00:60:08:11:CE:4E 192.168.0.54
#static_lease 00:60:08:11:CE:3E 192.168.0.44

# The remainder of options are DHCP options and can be specified with the
# keyword 'opt' or 'option'. If an option can take multiple items, such
# as the dns option, they can be listed on the same line, or multiple
# lines.
# Examples:
#opt    dns 192.168.10.2 192.168.10.10
option  subnet  255.255.255.0
#opt    router  192.168.10.2
#opt    wins    192.168.10.10
#option dns 129.219.13.81   # appended to above DNS servers for a total of 3
option  domain  local
option  lease   864000      # default: 10 days
#option msstaticroutes  10.0.0.0/8 10.127.0.1       # single static route
#option staticroutes    10.0.0.0/8 10.127.0.1, 10.11.12.0/24 10.11.12.1
# Arbitrary option in hex form:
option  0x08    01020304    # option 8: "cookie server IP addr: 1.2.3.4"

# Currently supported options (for more info, see options.c):
#opt lease      NUM
#opt subnet     IP
#opt broadcast  IP
#opt router     IP_LIST
#opt ipttl      NUM
#opt mtu        NUM
#opt hostname   STRING      # client's hostname
#opt domain     STRING      # client's domain suffix
#opt search     STRING_LIST # search domains
#opt nisdomain  STRING
#opt timezone   NUM     # (localtime - UTC_time) in seconds. signed
#opt tftp       STRING      # tftp server name
#opt bootfile   STRING      # tftp file to download (e.g. kernel image)
#opt bootsize   NUM     # size of that file
#opt rootpath   STRING      # (NFS) path to mount as root fs
#opt wpad       STRING
#opt serverid   IP      # default: server's IP
#opt message    STRING      # error message (udhcpd sends it on success too)
#opt vlanid     NUM     # 802.1P VLAN ID
#opt vlanpriority NUM       # 802.1Q VLAN priority
# Options specifying server(s)
#opt dns        IP_LIST
#opt wins       IP_LIST
#opt nissrv     IP_LIST
#opt ntpsrv     IP_LIST
#opt lprsrv     IP_LIST
#opt swapsrv    IP
# Options specifying routes
#opt routes     IP_PAIR_LIST
#opt staticroutes   STATIC_ROUTES # RFC 3442 classless static route option
#opt msstaticroutes STATIC_ROUTES # same, using MS option number
# Obsolete options, no longer supported
#opt logsrv     IP_LIST # 704/UDP log server (not syslog!)
#opt namesrv    IP_LIST # IEN 116 name server, obsolete (August 1979!!!)
#opt cookiesrv  IP_LIST # RFC 865 "quote of the day" server, rarely (never?) used
#opt timesrv    IP_LIST # RFC 868 time server, rarely(never?) used
# TODO: in development
#opt userclass  STRING      # RFC 3004\. set of LASCII strings. "I am a printer" etc
#opt sipserv    STRING LIST # RFC 3361\. flag byte, then: 0: domain names, 1: IP addrs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:13:41.237

在测试一段时间 udhcpd 服务器时抛出错误。所以我几乎没有改变。首先创建 /var/lib/misc/udhcpd.lease 文件然后我将 conf 文件修改为：

```
# Sample udhcpd configuration file (/etc/udhcpd.conf)
# Values shown are defaults

# The start and end of the IP lease block
start       169.254.10.102
end     169.254.10.103

# The interface that udhcpd will use
interface   usb0

# The maximum number of leases (includes addresses reserved
# by OFFER's, DECLINE's, and ARP conflicts). Will be corrected
# if it's bigger than IP lease block, but it ok to make it
# smaller than lease block.
max_leases  1

# The amount of time that an IP will be reserved (leased to nobody)
# if a DHCP decline message is received (seconds)
#decline_time   3600

# The amount of time that an IP will be reserved
# if an ARP conflict occurs (seconds)
#conflict_time  3600

# How long an offered address is reserved (seconds)
#offer_time 60

# If client asks for lease below this value, it will be rounded up
# to this value (seconds)
#min_lease  60

# The location of the pid file
pidfile /var/run/udhcpd.pid

# The location of the leases file
lease_file  /var/lib/misc/udhcpd.leases

# The time period at which udhcpd will write out leases file.
# If this is 0, udhcpd will never automatically write leases file.
# Specified in seconds.
#auto_time  7200

# Every time udhcpd writes a leases file, the below script will be called
#notify_file            # default: no script
#notify_file    dumpleases  # useful for debugging

# The following are bootp specific options
# next server to use in bootstrap
#siaddr     192.168.0.22    # default: 0.0.0.0 (none)
# tftp server name
#sname      zorak       # default: none
# tftp file to download (e.g. kernel image)
#boot_file  /var/nfs_root   # default: none

# Static leases map
#static_lease 00:60:08:11:CE:4E 192.168.0.54
#static_lease 00:60:08:11:CE:3E 192.168.0.44

# The remainder of options are DHCP options and can be specified with the
# keyword 'opt' or 'option'. If an option can take multiple items, such
# as the dns option, they can be listed on the same line, or multiple
# lines.
# Examples:
#opt    dns 192.168.10.2 192.168.10.10
option  subnet  255.255.255.0
#opt    router  192.168.10.2
#opt    wins    192.168.10.10
#option dns 129.219.13.81   # appended to above DNS servers for a total of 3
option  domain  local
option  lease   864000      # default: 10 days
#option msstaticroutes  10.0.0.0/8 10.127.0.1       # single static route
#option staticroutes    10.0.0.0/8 10.127.0.1, 10.11.12.0/24 10.11.12.1
# Arbitrary option in hex form:
#option 0x08    01020304    # option 8: "cookie server IP addr: 1.2.3.4"

# Currently supported options (for more info, see options.c):
#opt lease      NUM
#opt subnet     IP
#opt broadcast  IP
#opt router     IP_LIST
#opt ipttl      NUM
#opt mtu        NUM
#opt hostname   STRING      # client's hostname
#opt domain     STRING      # client's domain suffix
#opt search     STRING_LIST # search domains
#opt nisdomain  STRING
#opt timezone   NUM     # (localtime - UTC_time) in seconds. signed
#opt tftp       STRING      # tftp server name
#opt bootfile   STRING      # tftp file to download (e.g. kernel image)
#opt bootsize   NUM     # size of that file
#opt rootpath   STRING      # (NFS) path to mount as root fs
#opt wpad       STRING
#opt serverid   IP      # default: server's IP
#opt message    STRING      # error message (udhcpd sends it on success too)
#opt vlanid     NUM     # 802.1P VLAN ID
#opt vlanpriority NUM       # 802.1Q VLAN priority
# Options specifying server(s)
#opt dns        IP_LIST
#opt wins       IP_LIST
#opt nissrv     IP_LIST
#opt ntpsrv     IP_LIST
#opt lprsrv     IP_LIST
#opt swapsrv    IP
# Options specifying routes
#opt routes     IP_PAIR_LIST
#opt staticroutes   STATIC_ROUTES # RFC 3442 classless static route option
#opt msstaticroutes STATIC_ROUTES # same, using MS option number
# Obsolete options, no longer supported
#opt logsrv     IP_LIST # 704/UDP log server (not syslog!)
#opt namesrv    IP_LIST # IEN 116 name server, obsolete (August 1979!!!)
#opt cookiesrv  IP_LIST # RFC 865 "quote of the day" server, rarely (never?) used
#opt timesrv    IP_LIST # RFC 868 time server, rarely(never?) used
# TODO: in development
#opt userclass  STRING      # RFC 3004\. set of LASCII strings. "I am a printer" etc
#opt sipserv    STRING LIST # RFC 3361\. flag byte, then: 0: domain names, 1: IP addrs 
```

实际上，我试图通过 static_lease 提供 IP，任何连接的人都提供相同的固定 IP 但无法成功。

# jakarta-ee - 替代 EJB 和 EJB Timerservice 的最佳技术是什么？

> ID：15402189
> 
> 赞同：0
> 
> 时间：2013-03-14T05:54:01.323
> 
> 标签：jakarta-ee, ejb, jms, timer-jobs

我们有一个使用 EJB 2.0 开发的应用程序。我们将无状态会话 bean 与 ejb 计时器服务一起使用。我们计划完全删除 ejb，但我们需要计时器服务。我知道 JMS 提供计时器服务，但正在寻找强大的技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:06:54.340

如果您正在寻找 EJB 的替代方案，我可能会推荐[Spring Framework](https://stackoverflow.com/questions/1779169/spring-vs-ejb-can-spring-replace-ejb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:45:12.583

我认为最流行的计时器框架是[Quartz](http://www.quartz-scheduler.org/)，它很容易与 Spring Framework 集成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T04:35:56.840

您可以使用 Spring/Quartz，但为了尽可能保持便携性，我建议您使用 EJB 3.2 (Java EE7)。计时器服务更简单，并且整个 EJB 都得到了改进（不再使用 XML）。您熟悉 EJB，考虑到您对框架的熟悉程度，目前是一个不错的选择。

# code-generation - 喷气式飞机是否有可能不止一个 xml 输入？

> ID：15402190
> 
> 赞同：0
> 
> 时间：2013-03-14T05:54:12.460
> 
> 标签：code-generation, eclipse-m2t-jet

我们可以给jet（java发射器模板）提供一个以上的xml输入吗？如果可以的话，请给我一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:27:25.610

您不能直接执行此操作，但您可以使用多种技术将多个 XML 指定为输入。

您可以在另一个 XML 文件中命名一个 XML 文件，或者创建第三个 XML 文件来简单地命名两个输入（或者您有多少输入）。假设您有一个在 JET 的输入 XML 中命名的 XML 文件：

```
<inputs>
   <input name="...full file name here..." />
<inputs> 
```

您可以像这样加载此文件以在 JET 中使用：

```
<c:load url="{/inputs/input/@name}" var="root"/> 
```

load 标记读取文件（默认为 XML，但可以输入其他类型。）并通过您指定的变量名称（在本例中为“root”）使其内容可用。通常 url 属性需要一个作为文件名的字符串值，但由于我们使用模型之外的属性，我们使用大括号和 xpath 表示法来指示要用作文件名的属性值。

加载文件后，您可以访问其内容。例如，如果该 XML 文件中的根元素是并且它有一个名为 company 的属性，那么您的属性可以使用 c:get 访问该属性值

```
<c:get select="$root/policies/@company" /> 
```

您可以加载任意数量的文件。只需使用不同的变量名来引用每个已解析文件的根即可。

您可能会变得更复杂一些，并使用命名约定将多个文件存储在同一目录中。然后，您可以只指定一个目录路径并为所有输入派生文件名。

# constraints - POI - 无法为一系列单元格创建自定义验证

> ID：15402195
> 
> 赞同：1
> 
> 时间：2013-03-14T05:54:35.343
> 
> 标签：constraints, apache-poi, validation

我需要检查用户是否在单元格 A1:A10 中输入了有效数字。在 Excel 中，我会选择单元格，然后创建自定义验证器并将公式设置为 =isNumber("$A$1:$A10") 尝试使用 POI 执行此操作让我陷入困境：这是我尝试过的：

```
CellRangeAddressList addressList = new CellRangeAddressList(0, 10, 0, 0);
        XSSFDataValidationHelper dvHelper = new XSSFDataValidationHelper(sheet);
        DataValidationConstraint customConstraint = dvHelper.createCustomConstraint("isNumber(\"$A$0:$A$10\"");
        XSSFDataValidation validation = (XSSFDataValidation)dvHelper.createValidation(customConstraint, addressList);
        validation.setShowErrorBox(true);
        sheet.addValidationData(validation); 
```

当我尝试在 Excel 中打开它时，出现错误，并且 Excel 禁用了验证

在此先感谢-anish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T14:48:22.567

```
CellReference crStartCell = new CellReference(startRow, column, true, true); // 0-based row and column index
CellReference crEndCell = new CellReference(endRow, column, true, true);
XSSFDataValidationConstraint dvConstraint = (XSSFDataValidationConstraint) dvHelper.createCustomConstraint("ISNUMBER("+crStartCell.formatAsString()+":"+crEndCell.formatAsString() +")"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T08:39:43.647

您可以将该 excel 转换为 csv，而不是使用 SuperCSV 执行验证。它会很长，但更容易。

# android - Android 中 SeekBar 实现的回调

> ID：15402198
> 
> 赞同：0
> 
> 时间：2013-03-14T05:54:46.780
> 
> 标签：android, callback, seekbar

为 seekbar 实现了以下回调：

```
void onProgressChanged(Seekbar seekBar, int progress, boolean fromTouch);

void onStartTrackingTouch(Seekbar seekBar);

void onStopTrackingTouch(Seekbar seekBar); 
```

1.  但是当在搜索栏上按下 OK 时会收到什么回调？

2.  onStartTrackingTouch() 在用户刚刚开始移动搜索栏时被接收。当用户完成移动搜索栏时收到 onStopTrackingTouch()。我在这些定义中是正确的还是这两个回调是为了别的什么？

有人可以帮忙解决这两个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:24:09.940

你是什​​么意思

> 但是当在搜索栏上按下 OK 时会收到什么回调？

你有一个应该实现某些东西的确定按钮吗？如果是这样，您可以在进度更改时使用整数值来保存进度，然后当您按下确定按钮时，您可以执行任何您想要的操作。看这个例子

```
 seekerSpacing.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            doSomethingAfterTracking();
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            doSomethingWhenTrackingStarts();
        }

        /**
        * seekBar   The SeekBar whose progress has changed
        * progress  The current progress level. This will be in the range 0..max where max was set by setMax(int). (The default value for max is 100.)
        * fromUser  True if the progress change was initiated by the user.
        */
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            setMyCurrentProgress(progress);
            doSomeOtherMethodIfRequired();
        }
    }); 
```

您可以查看 Android[文档](http://developer.android.com/reference/android/widget/SeekBar.OnSeekBarChangeListener.html)以获得正确的解释。但这里有一个快速的总结。

`onStartTrackingTouch`只要您触摸搜索栏，就会调用该方法。当您触摸搜索栏滑块时，将始终调用此方法

`onStopTrackingTouch`只要您放开搜索栏，就会调用该方法。当您放开搜索栏滑块时，将始终调用此方法。

`onProgressChanged`只要搜索栏的进度发生更改，就会调用该方法。该方法只会在进度发生变化时调用

# android - 媒体播放器准备失败

> ID：15402201
> 
> 赞同：2
> 
> 时间：2013-03-14T05:55:06.433
> 
> 标签：android, audio, media-player, record

在过去的 8 小时里，我一直在做的只是想出一个简单的录音机/播放应用程序。我希望能够以 3GP 录制音频，然后将其自动加载到音频中`MediaPlayer`以便我可以播放。我 80% 确定它正在录制并保存到代码中指定的位置，但是当我尝试将其加载到我的媒体播放器中时，我总是会收到此错误。我也尝试加载`toto_africa.mp3`文件以确保它不是录制文件的问题，它仍然给我这个错误。任何有关此错误的帮助将不胜感激，因为我到处寻找答案。我想一个更具体的问题是：我如何正确地让我的`MediaPlayer`沟通`MediaRecorder`和运作正常？

* * *

## 日志猫

```
03-14 00:32:18.708: E/appPath:(4443): /data/data/com.jordan.tester/files
03-14 00:32:18.708: E/(1) Length of de file mon'?(4443): 0
03-14 00:32:24.408: E/Are ya dead maan?(4443): Kiss the Lucky egg
03-14 00:32:24.688: E/IS da file alive?(4443): true
03-14 00:32:24.688: E/IS da file a file?(4443): true
03-14 00:32:24.688: E/(2) Length of de file mon'?(4443): 4515
03-14 00:32:28.362: V/MediaPlayer(4443): constructor
03-14 00:32:28.362: V/MediaPlayer(4443): setListener
03-14 00:32:28.368: V/MediaPlayer(4443):setDataSource(/data/data/com.jordan.tester/files/temp.3gp)
03-14 00:32:28.368: V/MediaPlayer(4443): prepare
03-14 00:32:28.368: V/MediaPlayer(4443): message received msg=100, ext1=1, ext2=-2147483648
03-14 00:32:28.368: E/MediaPlayer(4443): error (1, -2147483648)
03-14 00:32:28.368: V/MediaPlayer(4443): signal application thread
03-14 00:32:28.368: V/MediaPlayer(4443): prepare complete - status=1
03-14 00:32:28.378: D/MediaPlayer(4443): create failed:
03-14 00:32:28.378: D/MediaPlayer(4443): java.io.IOException: Prepare failed.: status=0x1
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.media.MediaPlayer.prepare(Native Method)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.media.MediaPlayer.create(MediaPlayer.java:638)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.media.MediaPlayer.create(MediaPlayer.java:615)
03-14 00:32:28.378: D/MediaPlayer(4443):    at com.jordan.tester.Main.startPlaying(Main.java:120)
03-14 00:32:28.378: D/MediaPlayer(4443):    at com.jordan.tester.Main.onClick(Main.java:89)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.view.View.performClick(View.java:2419)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.view.View$PerformClick.run(View.java:8865)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.os.Handler.handleCallback(Handler.java:587)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.os.Looper.loop(Looper.java:143)
03-14 00:32:28.378: D/MediaPlayer(4443):    at android.app.ActivityThread.main(ActivityThread.java:5061)
03-14 00:32:28.378: D/MediaPlayer(4443):    at java.lang.reflect.Method.invokeNative(Native Method)
03-14 00:32:28.378: D/MediaPlayer(4443):    at java.lang.reflect.Method.invoke(Method.java:521)
03-14 00:32:28.378: D/MediaPlayer(4443):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-14 00:32:28.378: D/MediaPlayer(4443):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-14 00:32:28.378: D/MediaPlayer(4443):    at dalvik.system.NativeStart.main(Native Method)
03-14 00:32:28.378: E/TESTER(4443): java.lang.NullPointerException 
```

## 我的代码

```
package com.jordan.tester;

import java.io.File;
import java.io.IOException;

import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Main extends Activity implements OnClickListener {

    private Button beginRecord, beginPlay, stopRecord, stopPlay;
    private MediaPlayer player;
    private MediaRecorder recorder;
    private String TESTER_TAG = "TESTER";

    private File file;
    private String tempPath = "R.raw.toto_africa";
    private String fn = "temp.3gp";
    private File appPath;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        beginRecord = (Button) findViewById(R.id.beginRecord);
        beginPlay = (Button) findViewById(R.id.beginPlay);
        stopRecord = (Button) findViewById(R.id.stopRecord);
        stopPlay = (Button) findViewById(R.id.stopPlay);

        beginRecord.setOnClickListener(this);
        beginPlay.setOnClickListener(this);
        stopRecord.setOnClickListener(this);
        stopPlay.setOnClickListener(this);

        file = new File(this.getFilesDir(), fn);
        file.delete();

        appPath = this.getFilesDir();
        Log.e("appPath:", appPath.toString());
        file = new File(this.getFilesDir(), fn);
        tempPath = file.getAbsolutePath();
        Log.e("tempPath:", tempPath);

        Log.e("(1) Length of de file mon'?", String.valueOf(file.length()));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {

        case R.id.beginRecord:
            try {
                startRecording();

            } catch (Exception e) {
                Log.e(TESTER_TAG, e.toString());
            }
            break;
        // ////////////////////////////////////////////////////////////
        case R.id.beginPlay:
            try {
                startPlaying();
            } catch (Exception e) {
                Log.e(TESTER_TAG, e.toString());
            }
            break;
        // ///////////////////////////////////////////////////////////
        case R.id.stopRecord:
            try {
                stopRecording();
            } catch (Exception e) {
                Log.e(TESTER_TAG, e.toString());
            }
            break;
        // /////////////////////////////////////////////////////////////
        case R.id.stopPlay:
            try {
                stopPlaying();
            } catch (Exception e) {
                Log.e(TESTER_TAG, e.toString());
            }
            break;
        }
    }

    private void startPlaying() {
        ditchMediaPlayer();

        try {
            player = MediaPlayer.create(getBaseContext(), Uri.parse(tempPath));
            player.start();
        } catch (IllegalStateException e) {
            Log.e(TESTER_TAG, e.toString());
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        }
    }

    private void stopPlaying() {
        // /
    }

    private void stopRecording() {
        if (recorder != null) {
            Log.e("Are ya dead maan?", "Kiss the Lucky egg");
            recorder.stop();
            recorder.release();
            Log.e("IS da file alive?", String.valueOf(file.exists()));
            Log.e("IS da file a file?", String.valueOf(file.isFile()));
            Log.e("(2) Length of de file mon'?", String.valueOf(file.length()));
        }
    }

    private void startRecording() {
        ditchMediaRecorder();
        // File outFile = new File(OUTPUT_FILE);
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(tempPath);

        try {
            recorder.prepare();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        recorder.start();
    }

    private void ditchMediaRecorder() {
        if (recorder != null) {
            recorder.release();
        }
    }

    private void ditchMediaPlayer() {
        if (player != null) {

            try {
                player.release();
            } catch (Exception e) {
                Log.e(TESTER_TAG, e.toString());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T00:27:54.887

从您的 logcat 日志中，我发现`setDataSource`您的部分`Create`失败了。从您的日志中，

```
03-14 00:32:28.368: V/MediaPlayer(4443):setDataSource(/data/data/com.jordan.tester/files/temp.3gp)
03-14 00:32:28.368: V/MediaPlayer(4443): prepare
03-14 00:32:28.368: V/MediaPlayer(4443): message received msg=100, ext1=1, ext2=-2147483648 
03-14 00:32:28.368: E/MediaPlayer(4443): error (1, -2147483648) 
```

作为 的一部分`prepare`，播放器引擎实现等待`finishSetDataSource`. 如果底层播放器引擎无法设置 a `DataSource`，它将返回`UNKNOWN_ERROR`对应于`0x80000000`or的 an `-2147483648`。

我相信问题出在传递给`setDataSource`. 从上面复制的日志中，字符串是`/data/data/com.jordan.tester/files/temp.3gp`，我觉得它与文件或流源的任何已知实现方法都不匹配。

为了解决您的问题，我建议您将 a 附加`file://`到您的输入字符串，即传递给 create 的字符串可以是`file:///data/data/com.jordan.tester/files/temp.3gp`或在 Java 本身中打开文件并将文件描述符传递给`create`.

# html - 如何通过 标签？

> ID：15402203
> 
> 赞同：1
> 
> 时间：2013-03-14T05:55:17.557
> 
> 标签：html, xslt, abbr

以下是我的xml代码：

```
<abbr>
<title>world health organization</title>who</abbr>
was founded in 1948\. 
```

在上面的代码中，我希望 xslt 输出为：

```
<abbr title="world health organisation">who<abbr> 
```

我编写了以下 XSLT 代码：

```
<xsl:template match ="abbr">
&lt;abbr title="<xsl:value-of select ="title"/>"&gt;
<xsl:value-of select ="."/>&lt;/abbr&gt;
</xsl:template> 
```

我得到了：

```
<abbr title="world health organization">
world health organizationwho</abbr> 
```

我哪里做错了？

的输出

```
<xsl:value-of select"."/> 
```

是

```
world health organisationwho 
```

（世界卫生组织+世卫组织）

现在，我不想要第一部分。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:10:38.237

由于`title`是 的子级`abbr`，`title`的文本是 的字符串值的一部分`abbr`。请试试这个：

```
<xsl:template match ="abbr">
  <abbr title="{title}">
    <xsl:apply-templates select="text()"/>
  </abbr>
</xsl:template> 
```

顺便说一句，您是否`xsl:output method="text"`在 XSLT 中使用？如果您使用 XSLT 生成 XML，那么您应该使用`method="xml"`. 这就是 XSLT 的用途。

# java - Java中的executeUpdate方法是线程安全的吗？

> ID：15402204
> 
> 赞同：7
> 
> 时间：2013-03-14T05:55:18.810
> 
> 标签：java, mysql, multithreading, jdbc

在我的应用程序中，有**多个线程试图插入**MySQL**数据库**。executeUpdate**方法**使用**线程安全**吗？我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T06:01:33.193

虽然`executeUpdate`方法本身可能是线程安全的，但准备好的语句并非旨在同时使用。这是因为每个实例都会存储您的参数，直到`executeUpdate`指示它将参数发送到 MySQL。此外，由于事务是通过`Connection`对象管理的，因此在不同步的情况下同时共享连接可能会给您带来不希望的提交/回滚行为。

为了使来自多个线程的插入同时工作，每个线程都需要使用自己的`Connection`，并制作自己的`PreparedStatement`. 在同一个数据库上同时使用多个准备好的语句是线程安全的，因为并发是在 RDBMS 端管理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:10:04.090

Javadoc 中没有说明 a `Connection,`a`PreparedStatement,`或 a`ResultSet`是线程安全的，因此它们的方法都不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:22:33.803

`executeUpdate()`用于多个线程不是线程安全的。

您可以建立多个连接，以便每个线程使用自己的 JDBC 连接到数据库。

# c# - 追加抛出异常

> ID：15402207
> 
> 赞同：1
> 
> 时间：2013-03-14T05:55:27.400
> 
> 标签：c#

我试图用下面的代码创建一个固定长度（左对齐）的批处理文件。

当我使用 Append 它抛出异常“是一种方法，但像一种类型一样使用”。

```
 string batFilePath = @"c:\mockforbat.bat";
        if (!File.Exists(batFilePath))
        {
            using (FileStream fs = File.Create(batFilePath))
            {
                fs.Close();
            }
        }

        //write
        using (StreamWriter sw = new File.AppendText(batFilePath))
        {
            string a = String.Format("{0,-24}{1,-5}{2,5}", "CostCenter", "CostObject", "ActivityType");
            sw.WriteLine(@a);

        }
        Process process = Process.Start(batFilePath);
        process.WaitForExit(); 
```

请有人纠正我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:57:04.000

`new`从该行删除运算符

```
using (StreamWriter sw = new File.AppendText(batFilePath)) 
```

它应该读

```
using (StreamWriter sw = File.AppendText(batFilePath)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:18:05.750

```
string batFilePath = @"c:\mockforbat.bat";
using(var fs = new FileStream(batFilePath , FileMode.OpenOrCreate, FileAccess.Write))
{
    using(var sw = new StreamWriter(fs))
    {
        string a = String.Format("{0,-24}{1,-5}{2,5}", "CostCenter", "CostObject", "ActivityType");
        sw.WriteLine(a);
    }
} 
```

# javascript - Meteor Startup JQuery DOM Elements Not Ready (JQueryUI Draggable)

> ID：15402211
> 
> 赞同：4
> 
> 时间：2013-03-14T05:56:02.353
> 
> 标签：javascript, jquery, templates, meteor, startup

在 Meteor 文档中，它说`Meteor.startup`将在 DOM 和所有模板都被处理后调用。但是，我的代码`Meteor.startup`就像 DOM 元素不存在一样。

在 .js 中：

```
Meteor.startup(function () {
  console.log($('.draggable').length);
}); 
```

在 .html 中：

```
<template name="item">
  <div class="draggable ui-widget-content">
  </div>
</template> 
```

在控制台中我看到：

> 0

但是在页面上我可以看到我的项目。事实上，如果我`Template.item.rendered`在事件中或`mouseover`事件中包含我的 JQuery，我会得到正确的数组长度。那么为什么该`startup`函数没有准备好使用我的 DOM 元素呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T01:48:54.487

我猜你的代码看起来像这样，但如果我错了请告诉我：

```
<template name="list">
  {{#each items}}
    {{> item}}
  {{/each}}
</template> 
```

助手使用`{{#each ...}}`游标对象来响应游标上的数据更改。因此，在您的情况下，如果该数据来自服务器（例如订阅），则在 Meteor.startup 时，数据可能尚未加载。因此，最初您的列表将为空。然后，随着数据的传输，`item`将为每个数据项呈现一个新模板。如果你想让一个特定的项目可拖动，你可以把那个 jQuery 代码放在`Template.item.rendered`回调中。

这有帮助吗？

# grails - grails 2 集成测试

> ID：15402218
> 
> 赞同：-1
> 
> 时间：2013-03-14T05:57:17.563
> 
> 标签：grails, integration, integration-testing

我在 Grails 2.x 中创建了一个集成测试，目的是测试几个控制器，以便在 Web 应用程序中模拟完整的用户流程。

首先，我保存了两个简单的域对象记录，在我的测试用例中实例化了两个控制器实例。这两个简单的类是： - 类别（产品的类别）和 - 商店（销售产品的迷你市场）我编写了两种测试方法来控制控制器实例（StoreController 和 CategoryController）并且工作正常，创建了一个类别记录并也有几个店铺记录。

然后，我编写了第三种方法来尝试保存产品记录。该记录必须引用一个类别。因此，我从以前的方法中获取类别实例，并尝试将其传递给 ProductController 以及其他 Product 参数。

由于未知原因，我只能通过在 Web 浏览器中输入数据的 Web 应用程序实例来创建产品记录，而不能通过测试类代码创建产品记录。我认为问题出在 Product 和 Category 之间的关系上，但我不知道应该如何将参数从测试用例传递给 ProductController 以创建新的 Product 记录。

这是我的产品类：

```
class Product {

    int id

    String barCode
    String shortDesc
    String longDesc
    String format

    Category category
    static belongsTo = [category: Category]    

    //static hasManySurveyRecord = [surveyRecord: SurveyRecord]

    static constraints = {

            id        editable: false
            barCode   blank: false, nullable: false, maxSize: 64
            shortDesc blank: false, nullable: false, maxSize: 32
            longDesc  blank: false, nullable: false, maxSize: 128
            category  blank: false
    }

    static mapping = {
        table 'product_catalog'
        version false

        columns {
                id column: 'id'
                barCode column: 'bar_code'
                shorDesc column: 'short_desc'
                longDesc column: 'long_desc'
                format column: 'format'
        }
    }

    String toString() {

        return longDesc
    }
} 
```

这是我的类别课程：

```
class Category {

    int id

    String description

    static hasManyProduct = [products: Product]

    static constraints = {

            id            editable: false
            description   blank: false, nullable: false, maxSize: 64
    }

    static mapping = {
        table 'categories'
        version false

        columns {
                id column: 'id'
                description column: 'description'
        }
    }

    String toString() {

        return description
    }
} 
```

这是我对这个应用程序的集成测试：

```
static transactional = false

static storeList  = []
static storesData = []

static categoryIns
static categoryData = []

static productIns  = new Product()
static productData = []

@Before
void setup() {

    storesData.add([zipCode: 926260001, address: "first test avenue, first city, CA"    , description: "first testing store"])
    storesData.add([zipCode: 926260002, address: "second test avenue, second city, CA"  , description: "second testing store"])
    storesData.add([zipCode: 926260003, address: "third test avenue, third city, CA"    , description: "third testing store"])
    storesData.add([zipCode: 926260004, address: "fourth test avenue, fourth city, CA"  , description: "fourth testing store"])
    storesData.add([zipCode: 926260005, address: "fifth test avenue, fifth city, CA"    , description: "fifth testing store"])
    storesData.add([zipCode: 926260006, address: "sixth test avenue, sixth city, CA"    , description: "sixth testing store"])
    storesData.add([zipCode: 926260007, address: "seventh test avenue, seventh city, CA", description: "seventh testing store"])
    storesData.add([zipCode: 926260008, address: "eighth test avenue, eighth city, CA"  , description: "eighth testing store"])

    categoryData = [description: "testing category"]

    productData = [barCode: "0114B", shorDesc: "The short testing description", longDesc: "The long testing description ....", format: "1 LT"]
}

@Test
void _01__createStores() {

    def storeCtl = new StoreController()

    (0..7).each { i ->

            def model = storeCtl.create()

            assert model.storeInstance != null

            storeCtl.response.reset()

            storeCtl.params.putAll( storesData.get(i) )
            storeCtl.save()

            assert Store.count() == (i+1)

    }

    storeList.addAll( Store.list() )

    assert storeList.size() == Store.list().size()
}

@Test
void _02__createCategory() {

    // Test if there is a previous store list created
    assert storeList.size() == Store.list().size()

    def categoryCtl = new CategoryController()

    def model = categoryCtl.create()

    assert model.categoryInstance != null

    categoryCtl.response.reset()

    categoryCtl.params.putAll( categoryData )
    categoryCtl.save()

    assert Category.count() == 1

    categoryIns = Category.list()[0]
}

@Test
void _03__createProduct() {

    // Test if there is a previous store list created
    assert storeList.size() == Store.list().size()
    // Test if there is a previous category created
    assert categoryIns != null
    assert categoryIns.id > 0

    def productCtl = new ProductController()

    def model = productCtl.create()

    assert model.productInstance != null

    productCtl.response.reset()

    productData.put("category", [id: categoryIns.id])
    productData.put("category.id", categoryIns.id)
    productCtl.params.putAll( productData )
    //productCtl.params.category = Category.get(categoryIns.id) 
    productCtl.save()

    assert Product.count() == 1
} 
```

这是我的 ProductController 代码摘录：

```
def save() {
    def productInstance = new Product(params)
    if (!productInstance.save(flush: true)) {
        render(view: "create", model: [productInstance: productInstance])
        return
    }

    flash.message = message(code: 'default.created.message', args: [message(code: 'product.label', default: 'Product'), productInstance.id])
    redirect(action: "show", id: productInstance.id)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:24:52.580

这两个建议都很好。经过数小时试图弄清楚出了什么问题，多亏了你，我才明白了我愚蠢的错误：字段“shortDesc”被拼错为“shorDesc”。所以，我的书的一个小提示已经写了。非常感谢！

# android - 发布仅适用于高密度和大屏幕尺寸智能手机的 Android 应用程序

> ID：15402219
> 
> 赞同：1
> 
> 时间：2013-03-14T05:57:26.867
> 
> 标签：android, android-manifest

如何将我的安卓应用程序限制在高密度和大屏幕尺寸的手机上？我不希望它可用于平板电脑，因为我计划为平板电脑发布不同的 apk。

我在这里阅读了谷歌的文档：[Declaring an App is Only for Handsets](http://developer.android.com/guide/practices/screens-distribution.html)

并将其添加到我的清单中

```
<compatible-screens>

<screen android:screenSize="normal" android:screenDensity="hdpi" />
<screen android:screenSize="normal" android:screenDensity="xhdpi" />
<screen android:screenSize="normal" android:screenDensity="xxhdpi" />

</compatible-screens> 
```

我想知道 Note 2、xperia z 和即将推出的 S4 等设备以及许多其他 5.0 英寸及以上的手机是否属于 android:screenSize="normal" 或 android:screenSize="large"

如果我包含 android:screenSize="large" 那么它不会允许 7 英寸平板电脑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:28:42.523

本文可能对您有所帮助：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

Xperia Z 和其他设备采用大屏幕尺寸。这些设备上的屏幕密度也是 xxhdpi。如果您只打算使用此版本的应用程序定位平板电脑，我建议您仅支持 xlarge 设备。

您应该使用[支持屏幕](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)标签，而不是Android 开发者网站推荐的[兼容屏幕。](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

# mysql - 如何将数据从csv文件导出到mysql数据库？

> ID：15402224
> 
> 赞同：3
> 
> 时间：2013-03-14T05:57:35.197
> 
> 标签：mysql, csv, export-to-csv

如何将数据从csv文件导出到mysql数据库？有任何查询或其他方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:59:18.270

我认为您`IMPORT`的意思是.，方法如下：

```
load data local infile 'yourCSVfilepath.csv' into table tableNameHERE
fields terminated by ','
optionally enclosed by '"'
lines terminated by '\r\n' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:13:31.140

要将数据从 Mysql 导出到 csv，请使用此

```
SELECT *
INTO OUTFILE '/tmp/tablename.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM tablename 
```

要将 csv 导入 Mysql，请使用此

```
LOAD DATA INFILE 'c:/tablename.csv' INTO TABLE tablename 
```

# asp.net-mvc - 在控制器中获取下拉选择值

> ID：15402227
> 
> 赞同：1
> 
> 时间：2013-03-14T05:57:57.460
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的视图包含下拉列表。填充下拉列表代码：

```
public ActionResult Create()
{
  var architects = (from ar in db.ArchitectMasters where ar.IsActive == 1 select ar).ToList();
  ProjectMaster ps = new ProjectMaster();
  ViewBag.ArchitectID = new SelectList(architects, "ArchitectID", "ArchitectName",ps.ArchitectID);
  return View();
} 
```

查看代码：

```
 <div class="editor-label">
        @Html.Label("Architect")
    </div>
    <div class="editor-field">
         @Html.Hidden("ArchitectID")
         @Html.DropDownList("ArchitectID ", (IEnumerable<SelectListItem>)ViewBag.ArchitectID)
    </div> 
```

后期创建方法：

```
 public ActionResult Create(ProjectMaster projectmaster, long ArchitectID, FormCollection data)
    {
         if (ModelState.IsValid)
        {
            //string dropDownSelectedValue = data.Get("ArchitectName");
            //ViewBag.ArchitectID = data["ArchitectName"];
            long architectname = long.Parse(ArchitectID.ToString());
             db.ProjectMasters.Add(projectmaster);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
    } 
```

如何在我的控制器中获取下拉列表的选定值？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:02:59.760

我猜您可以从 Model/FormCollection 中检索 ActionResult 中的选定值。通常遵循以下方式来获取控制器中下拉列表的选定值。

```
public ActionResult Create(ProjectMaster projectmaster, long ArchitectID, FormCollection data)
    {
         if (ModelState.IsValid)
        {
            int id=projectmaster.ArchitectID;
           //another way int id=data["ArchitectID"];  

            return RedirectToAction("Index");
        }
    } 
```

# php - PHP SOAP 和 NuSOAP 哪个更好？

> ID：15402233
> 
> 赞同：25
> 
> 时间：2013-03-14T05:58:32.733
> 
> 标签：php, soap, nusoap

PHP SOAP 或 NuSOAP 哪个更好？请帮帮我？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-14T06:03:52.457

[PHP SOAP](http://php.net/manual/en/book.soap.php)从 PHP 5.0.1 开始可用。如果您使用的是 PHP4，则必须使用[NuSOAP](http://nusoap.sourceforge.net/)。

原生 PHP 代码通常在性能上更好并且相对没有错误，所以如果 PHP SOAP 可用，请使用它。此外，NuSOAP 在其官网上没有太多的文档。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-14T06:03:30.187

虽然有一些细微差别要提，但我认为 NuSoap 更好：

1.  Nusoap 有一些预定义的方法，如果使用 Soap，您应该编写一些自己的方法。
2.  因为 SOAP 性能瓶颈是服务器响应时间，所以不用担心使用像 Nusoap 这样的预定义类。
3.  在 Nusoap 中处理 UTF-8 要容易得多。
4.  Nusoap 提供了一些很好的函数来创建 SOAP 服务器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-20T12:31:31.957

使用nusoap，无需编写WSDL文件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-10T14:32:21.940

Nusoap 不再维护。最高支持 PHP 4.X 版本。较新的版本可能会开始出现问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-10T08:25:44.657

使用 Nusoap 的另一个优点是你得到的结果已经在一个数组中。普通 PHP 你得到一个对象，你需要自己转换成一个数组。我做了一个小基准测试 Nusoap 比我自己的实现快几微秒，包括转换为数组。Nusoap = -1370852340.1761 原生 PHP = -1370852340.2057

```
 public function objectToArray($obj) 
{
    if(!is_array($obj) && !is_object($obj)) 
    return $obj;

    if(is_object($obj)) 
    $obj = get_object_vars($obj);

    return array_map(array($this, 'objectToArray'), $obj);
} 
```

# monodevelop - 命名空间“OpenTK”中不存在 GLControl

> ID：15402237
> 
> 赞同：2
> 
> 时间：2013-03-14T05:58:51.640
> 
> 标签：monodevelop, opentk

我使用 OpenTK 和 MonoDevelop。我使用 GLcontext

```
GLcontrol glControl1 = new GLControl(); 
```

我发现错误：

```
'GLControl' does not exist in the namespace 'OpenTK' 
```

我将 OpenTK.dll、OpenTK.GLControl.dll、OpenTK.dll.config 添加到我的项目中。

有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T07:26:44.857

确保为您的架构使用正确的库。因此，对于 x86，请确保您拥有 x86 库。对于 x64，请确保您拥有 x64 库。确保将启动项目的架构设置为使用配置管理器匹配库的架构。在 64 位机器上，它通常默认设置为“任何 CPU”的组合。将此更改为正确的平台。

这就是我这样做的方式：创建一个新的测试风形应用程序。我想做一个 64 位应用程序，所以我使用配置管理器将我的启动应用程序设置为 x64。使用 NuGet 安装 opentk.glcontrol。它会自动将 OpenTK 解析为依赖项并安装它。

这是一些添加控件并将背景颜色设置为天蓝色的代码：

```
using OpenTK;
using OpenTK.Graphics.OpenGL4;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private OpenTK.GLControl _glControl;
        public Form1()
        {
            InitializeComponent();

            _glControl = new OpenTK.GLControl();
            _glControl.Dock = DockStyle.Fill;
            this.Controls.Add(_glControl);

            _glControl.Load += control_Load;
            _glControl.Paint += control_Paint;

        }

        private void control_Paint(object sender, PaintEventArgs e)
        {
            _glControl.SwapBuffers();
        }

        private void control_Load(object sender, EventArgs e)
        {
            GL.ClearColor(Color.SkyBlue);
            GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);
        }
    }
} 
```

# jquery - 如何使用 Ajax onclick 加载 Wordpress Post

> ID：15402239
> 
> 赞同：6
> 
> 时间：2013-03-14T05:58:55.603
> 
> 标签：jquery, ajax, wordpress, loops, post

我花了几个小时阅读和尝试教程。我似乎找不到可行的解决方案，而且我知道它应该很容易，但我在 AJAX 方面遇到了困难。:(

我想从 div 中的链接加载 Post 内容。下面是我所拥有的。有人可以帮我处理 JavaScript 方面的问题吗？谢谢！

```
<ul>
    <?php query_posts('post_type=artwork&posts_per_page=-1'); ?>
    <?php if(have_posts()) : while(have_posts()) : the_post(); ?>
    <li class="mytab">
      <span>
         <h3><?php the_title(); ?></h3>
         <a href="#"><?php the_post_thumbnail('Project'); ?></a>
      </span>
    </li>
    <?php endwhile; endif; wp_reset_query(); ?>
</ul>

<div id="loadAjaxHere"></div> 
```

我想在 div #loadAjaxHere 中加载这段代码

```
<div class="myArtwork">
   <h2><?php the_title(); ?></h2>
   <div class="text"><?php the_content(); ?></div>
</div> 
```

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T00:24:49.063

好的，经过长时间的反复试验，我想我已经解决了这个问题。

这似乎有效，但如果这不是正确的方法，请告诉我

Javascript：

```
jQuery.noConflict();
jQuery(document).ready(function($){
    $.ajaxSetup({cache:false});
    $("a.ajax").click(function(){
        var post_url = $(this).attr("href");
        var post_id = $(this).attr("rel");
        $("#tabs").html('<div class="loading">loading...</div>');
    $("#tabs").load(post_url);
    return false;
    });
}); 
```

我要显示帖子内容的页面（我正在使用称为“艺术品”的自定义帖子类型：

```
<ul class="container">
  <?php query_posts('post_type=artwork&posts_per_page=-1'); ?>
  <?php if(have_posts()) : while(have_posts()) : the_post(); ?>
  <li class="mytab">
    <h3><?php the_title(); ?></h3>
    <a href="<?php the_permalink(); ?>" rel="<?php the_ID(); ?>" class="ajax"><?php the_post_thumbnail('Project'); ?></a>
  </li>
  <?php endwhile; endif; wp_reset_query(); ?>
</ul>

<!-- LOAD SINGLE POST CONTENT IN #TABS -->
<div id="tabs"></div> 
```

还有单篇文章“single-artwork.php”。注意：不要使用 get_header 或 get_footer 等：

```
<?php if(have_posts()) : while(have_posts()) : the_post(); ?>
  <div class="tabcontent" id="tab-<?php the_ID(); ?>">
    <?php the_content(); ?>
  </div>
<?php endwhile; endif; ?> 
```

谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-10T16:49:33.920

补充一下，如果您只想加载单个帖子的一部分，您可以修改

```
$("#tabs").load(post_url); 
```

到

```
$("#tabs").load(post_url + ".tabcontent" ); 
```

这只会加载 div.tabcontent 中的所有内容

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-16T23:04:43.777

Barry 的回答是关于能够通过在 URL 的末尾添加一个 css 选择器表达式来加载部分页面是正确的。但是，url 和选择器之间需要有一个空格，如下所示：

```
$("#tabs").load(post_url + " .tabcontent" ); 
```

否则传递给的字符串`.load()`将是`http://example.com.tabscontent`. 但它应该是`http://example.com .tabscontent`。

另外，聪明人说一句，使用这种方法将阻止 jQuery 加载和执行标签内的任何代码`<script>`。但是，仅在`.load(post_url);`没有选择器的情况下使用将成功加载和执行标签中的`<script>`代码。

[在此处](http://api.jquery.com/load#script-execution)阅读更多相关信息。

# javascript - 如何防止重复提交

> ID：15402241
> 
> 赞同：1
> 
> 时间：2013-03-14T05:58:59.907
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:28:39.170

此示例代码可能有助于解决您的问题。

**HTML**

```
<a href="http://www.google.com" target="_blank" >Google</a>
<a href="http://www.yahoo.com"  target="_blank">Yahoo</a>
<a href="http://www.stackoverflow.com"  target="_blank">Stackoverflow</a> 
```

**JS：**

```
$('a').click(function(e){
    $this = $(this);
    if($this.data('disabled') == 'true'){
        e.preventDefault();
        setTimeout(function(){$this.data('disabled', 'false')}, 10); //Enable the anchor tag after 10 milliseconds
    }else{
        $this.data('disabled', 'true');
    }    
}); 
```

**演示：http:** [//jsfiddle.net/rUrk4/6/](http://jsfiddle.net/rUrk4/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:31:09.197

我有简单的解决方案，

把这个jQuery代码放在当然包括JQuery之后

```
<script type="text/javascript" src ="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>

<script type="text/javascript">$('a:visited').click(function(){return false;});</script> 
```

这将阻止点击您页面中所有访问过的链接。:)

所以第一次点击会工作第二次不会..

我希望这么多解释会做:)

# jquery - 单击外部并隐藏 Div

> ID：15402242
> 
> 赞同：1
> 
> 时间：2013-03-14T05:59:02.833
> 
> 标签：jquery

当您单击文档时，我正在尝试执行简单的隐藏 div。我似乎无法让它工作。我基本上希望 div 在您单击按钮时打开。然后，如果您单击其他任何位置（不在 div 上），它就会关闭。

这是脚本：

```
$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();

$('.show_hide').click(function(){
    $('.slidingDiv').slideToggle();
    $(document).one(function(){
        $('.show_hide').show();
    });
});
}); 
```

这是CSS（这是正确的CSS，下面有正确的JQuery！）

```
.slidingDiv {
background-color: #FFF;
border:3px solid #000;
border-radius:0 0 15px 15px;
float:right;
height:175px;
padding:20px;
position:relative;
top:-18px;
width:300px;
z-index:100;
display:none;
}

.show_hide {

} 
```

和html：

```
<div class="slidingDiv">Hello</div> 
```

任何帮助都是极好的。

这是我现在正在运行的全部内容，包括脚本：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(function(){ //<----shorter version of doc ready. this one can be used ->jQuery(function($){ 
      $('.show_hide').click(function(e){ // <----you missed the '.' here in your selector.
          e.stopPropagation();
          $('.slidingDiv').slideToggle();
      });

    $('.slidingDiv').click(function(e){
        e.stopPropagation();
    });

    $(document).click(function(){
       $('.slidingDiv').slideUp();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T06:05:13.707

在您的情况下，您需要停止事件以向父级冒泡`.stopPropagation()`：

```
$('.show_hide').click(function(e){ // <----you missed the '.' here in your selector.
    e.stopPropagation();
    $('.slidingDiv').slideToggle();
});
$('.slidingDiv').click(function(e){
    e.stopPropagation();
});

$(document).click(function(){
     $('.slidingDiv').slideUp();
}); 
```

[查看演示小提琴](http://jsfiddle.net/yKhfP/)

**来自文档**：

```
event.stopPropagation() 
```

> 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

**仅供参考**：

我不知道这是否需要告诉你，但你应该这样做：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
   $(function(){ //<----shorter version of doc ready. this one can be used ->jQuery(function($){ 
      $('.show_hide').click(function(e){ // <----you missed the '.' here in your selector.
          e.stopPropagation();
          $('.slidingDiv').slideToggle();
      });
      $('.slidingDiv').click(function(e){
          e.stopPropagation();
      });

      $(document).click(function(){
          $('.slidingDiv').slideUp();
      });
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:12:52.427

操作，

您需要做的是将`click`事件绑定到要控制显示 的元素`<div>`，并将事件绑定`click`到`document`，以处理隐藏。话虽如此，在你的 show 功能上使用很重要`e.stopPropagation()`，这样你的事件就不会冒泡`document`，从而隐藏你的`<div>`;

小提琴：http: [//jsfiddle.net/qYfWv/](http://jsfiddle.net/qYfWv/)

### JS

```
$(document).ready(function () {
    $('button').click(function (e) {
        $('div').fadeIn();
        e.stopPropagation();
    });
    $(document).click(function (e) {
        $('div').fadeOut();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:47:24.507

Jai 的代码应该可以工作。如果代码在小提琴中而不是在您的网站上工作，那应该意味着您没有正确包含 jQuery。您确定要在代码中包含 jQuery 库吗？

您可以使用 CDN，例如 Google 的 jQuery CDN。只需将其添加到您的 HTML 代码中：

`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:59:47.630

```
$('.show_hide').click(function(){ 
```

你忘记了 show_hide 是一个类

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T06:11:21.227

insted 绑定到“文档”绑定到 dom 正文标记。

`$('body').on('click', function(e){/* Magic here */})`

# c++ - C++ 异常和 ld 符号警告

> ID：15402243
> 
> 赞同：6
> 
> 时间：2013-03-14T05:59:10.623
> 
> 标签：c++, exception, ld, icc

我正在玩在 C++ 中创建异常，并且我有以下测试代码：

```
#include <iostream>
#include <stdexcept>
#include <new>
using namespace std;

class Myerror : public runtime_error {
    private: 
        string errmsg;
    public:
        Myerror(const string &message): runtime_error(message) { }
};

int main(int argc, char *argv[]) {
    throw Myerror("wassup?");
} 
```

我正在编译这个：

> icpc -std=c++11 -O3 -m64

编译后，我收到此 ld 警告：

> ld：警告：在 _main 中直接访问全局弱符号 __ZN7MyerrorD1Ev 意味着在运行时不能覆盖弱符号。这可能是由使用不同可见性设置编译的不同翻译单元引起的。

如果我使用 g++ 而不是 icpc，我不会收到此警告。

我无法理解这意味着什么，以及导致此警告产生的原因。代码按预期运行，但是我想取消正在发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:19:01.957

尝试以下操作：

```
#include <iostream>
#include <stdexcept>
#include <new>
using namespace std;

class Myerror : public runtime_error {
    public:
        Myerror(const string &message) throw(): runtime_error(message) { }
        virtual ~Myerror() throw() {}
};

int main(int argc, char *argv[]) {
    throw Myerror("wassup?");
} 
```

为什么需要未使用的字符串 errmsg？

# mysql - iOS 应用程序开发 - 数据库

> ID：15402247
> 
> 赞同：0
> 
> 时间：2013-03-14T05:59:24.597
> 
> 标签：mysql, ios, database

我目前正在开发一个 iOS 应用程序，需要将数据存储在数据库中（不是本地）。我对 Core Data 做了一些研究，但我想将数据存储在 Web 服务器上。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:07:21.833

您必须通过诸如 RESTful 服务之类的 API 来做到这一点。我会做这样的事情：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://my.website.com/restService"]];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[[NSString stringWithString:@"value1=test&value2=test2"] dataUsingEncoding:NSUTF8StringEncoding]];

NSURLResponse *urlResponse = nil;
NSError *error = nil;

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:12:12.280

如果您想将数据存储在服务器上的某处并且您没有服务器 - 您可以使用以下之一：1) iCloud 2) Parse - 您可以在 parse.com 上创建数据库并直接使用 Parse API 使用该数据库。查看[https://parse.com/docs/index](https://parse.com/docs/index) 了解更多详情。

# java - facebook graph API 不像提要不工作

> ID：15402248
> 
> 赞同：0
> 
> 时间：2013-03-14T05:59:32.387
> 
> 标签：java, facebook-graph-api, facebook-like, feed

我无法喜欢用户朋友的提要。如果会话用户已发布提要，则不同的工作。我正在使用图形 api 端点 /feed-id/likes。也使用相同的端点，我能够喜欢提要，只面对不同的问题。得到以下响应： { "error": { "message": "(#200) 此应用程序禁止向其他用户发布动态消息", "type": "OAuthException", "code": 200 } }重大更改宣布只有对用户 ID 与会话用户不同的 [user_id]/feed 的调用才会失败。那么为什么我在尝试对 feed-id/likes 执行 DELETE 时遇到问题，当 feed-id/likes 上的 POST 似乎工作正常时也是如此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:41:09.907

我有同样的问题并以这种方式解决：

XXXX_YYYY 是您的 feed-id，您可以使用 Method.POST 调用 feed-id/likes 来为它点赞，但不同的是，您必须使用 Method.DELETE 来使用 YYYY/likes。

PS：确保在您的权限中您拥有“publish_stream”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T06:57:04.490

我明白了

```
"error": {
    "message": "(#100) The parameter url is required",
    "type": "OAuthException",
    "code": 100
  } 
```

`YYYY/likes`使用 Method调用时`DELETE`。

# python - # TypeError: 'list' 对象不可调用 #

> ID：15402250
> 
> 赞同：0
> 
> 时间：2013-03-14T05:59:38.740
> 
> 标签：python, typeerror

好的，所以我正在学习 python，我只是想在 Maya 中编写一个脚本，我可以在其中重新定位场景中的关节。我不断收到一条错误消息

```
# TypeError: 'list' object is not callable # 
```

如果有人能帮我解决这个问题，我将不胜感激！！

```
selJnt = cmds.ls (selection=True)

for allJnts in selJnt():

     get_jnt_rx = cmds.getAttr (allJnts + ".rx")
     get_jnt_ry = cmds.getAttr (allJnts + ".ry")
     get_jnt_rz = cmds.getAttr (allJnts + ".rz")

     cmds.setAttr ((allJnts + ".jointOrientX,"), get_jnt_rx)
     cmds.setAttr ((allJnts + ".jointOrientY"), get_jnt_ry)
     cmds.setAttr ((allJnts + ".jointOrientZ"), get_jnt_rz)

     cmds.setAttr ((allJnts + ".rx,"), 0)
     cmds.setAttr ((allJnts + ".ry,"), 0)
     cmds.setAttr ((allJnts + ".rz,"), 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:07:36.247

删除括号：

```
for allJnts in selJnt():
                     ^^ THESE 
```

在这里，`selJnt`是一个列表，您试图将其视为一个函数。

# android - 如果外部不可用，如何在内部存储上创建目录

> ID：15402253
> 
> 赞同：1
> 
> 时间：2013-03-14T05:59:47.200
> 
> 标签：android

当应用程序第一次运行时，我正在从我的应用程序创建一个 DIR。这是此代码

```
 if (!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
        Log.d("MyApp", "No SDCARD");
} else {
    File directory = new File(Environment.getExternalStorageDirectory()+File.separator+"MyContactsBackUp");
    directory.mkdirs();
} 
```

现在我想知道的是，如果缺少外部存储，那么我如何在内部存储上创建 DIR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:02:34.470

在下面的代码中，您可以在内部存储中创建目录结构：-

```
File fil = new File(Activitythis.getFilesDir().getPath()); 
```

# python - 如何将起始序列号传递给 Django factory_boy 工厂？

> ID：15402256
> 
> 赞同：9
> 
> 时间：2013-03-14T05:59:49.267
> 
> 标签：python, django, class-method, factory-boy

factory_boy 默认`1`用于序列。如何传递一个数字以用作不同的起始数字？我可以对`_setup_next_sequence()`方法进行子类化，但是如何给它一个变量来使用？

```
# File: models.py
from django.db import models

class Book(models.Model):
    title = models.CharField(max_length=100) 
```

```
# File: factories.py
from .models import Book
import factory

class BookFactory(factory.Factory):
  FACTORY_FOR = BookModel  
  title = factory.Sequence(lambda n: u'Title #{}'.format(n))

  @classmethod
  def _setup_next_sequence(cls):      
      # Instead of defaulting to starting with number 1, start with starting_seq_num.
      # But how do I set starting_seq_num?
      return starting_seq_num 
```

```
# File: make_data.py
from factories import BookFactory

# somehow set starting sequence number here?

BookFactory().create() 
```

我正在使用 factory_boy 1.2.0（通过`pip install factory_boy`）
factory_boy 代码：[https ://github.com/dnerdy/factory_boy](https://github.com/dnerdy/factory_boy)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-07T19:03:01.740

除了[Rob Bednark的回答](https://stackoverflow.com/a/15418343/5456690)

我们可以使用[`reset_sequence()`](http://factoryboy.readthedocs.org/en/latest/reference.html#factory.Factory.reset_sequence)函数，它将计数器**重置**为**特定值**。

```
# File: make_data.py
import factories

factories.BookFactory.reset_sequence(100)
my_book = factories.BookFactory().create()
print(my_book.title) # Title #100 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-21T13:11:40.463

**更新：`factory_boy`现在处理它！**

在`factory_boy`（`2.8.1`至今）的最新版本中，现在可以[将序列计数器强制](http://factoryboy.readthedocs.io/en/latest/recipes.html#forcing-the-sequence-counter)为定义值：

> 在每次调用的基础上强制值
> 
> 为了强制计数器进行特定的`Factory`实例化，只需在 `__sequence=42`参数中传递值：

```
class AccountFactory(factory.Factory):
        class Meta:
            model = Account
        uid = factory.Sequence(lambda n: n)
        name = "Test" 
```

然后在控制台中：

```
>>> obj1 = AccountFactory(name="John Doe", __sequence=10)
>>> obj1.uid  # Taken from the __sequence counter
10
>>> obj2 = AccountFactory(name="Jane Doe")
>>> obj2.uid  # The base sequence counter hasn't changed
1 
```

也可以将计数器重置为特定值：

```
>>> AccountFactory.reset_sequence(42)
>>> AccountFactory().uid
42
>>> AccountFactory().uid
43 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T19:21:07.583

我找到了两种解决方法：

1.  使用模块变量
2.  使用类定义之外的类属性集

**使用模块变量：**

```
# File: factories.py
from .models import Book
import factory

starting_seq_num = 0

class BookFactory(factory.Factory):
  FACTORY_FOR = BookModel  
  title = factory.Sequence(lambda n: u'Title #{}'.format(n))

  @classmethod
  def _setup_next_sequence(cls):      
      # Instead of defaulting to starting with 0, start with starting_seq_num.
      return starting_seq_num

# File: make_data.py
import factories

factories.starting_seq_num = 100    
factories.BookFactory().create() 
```

**使用类定义之外的类属性集：**

```
# File: factories.py
from .models import Book
import factory

class BookFactory(factory.Factory):
  # Note that starting_seq_num cannot be set here in the class definition,
  # because Factory will then pass it as a kwarg to the model's create() method
  # and cause an exception.  It must be set outside the class definition.
  FACTORY_FOR = BookModel  
  title = factory.Sequence(lambda n: u'Title #{}'.format(n))

  @classmethod
  def _setup_next_sequence(cls):      
      return getattr(cls, 'starting_seq_num', 0)

# File: make_data.py
from factories import BookFactory

BookFactory.starting_seq_num = 100
BookFactory().create() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-24T01:32:55.787

第三种也是最简单的方法：

```
# File: factories.py
from .models import BookModel
import factory

class BookFactory(factory.Factory, starting_seq_num):
  FACTORY_FOR = BookModel  
  title = factory.Sequence(lambda n: u'Title #{}'.format(n + starting_seq_num))

# File: make_data.py
import factories

book = factories.BookFactory(512).create()  #Start with 512 
```

我自己只是从 Factory Boy 开始，在 Python 方面也没有太多经验，所以我可能会遗漏一些东西，但你知道我要去哪里。为了更清楚，我想我实际上更喜欢它被关键字：

```
class BookFactory(factory.Factory, title_seq_start=-1):
...
book = factories.BookFactory(title_seq_start=512).create() 
```

# jquery - Jquery ajax onclick 将所有 ajax 提交到 php 并返回一些东西

> ID：15402259
> 
> 赞同：0
> 
> 时间：2013-03-14T06:00:05.367
> 
> 标签：jquery

我想创建一个函数，将表单内的所有复选框发布到 php 页面。php 页面会做一些处理并返回一个值。该值将显示给我设置的名为 results 的 div。他们所做的每一次检查都会张贴表格并返回一些东西。（该值将告诉用户还要检查什么或他们必须做什么才能正确填写表格）

我的代码只提交一个检查过的复选框，而不是之前检查过的另一个复选框。

有人可以帮忙吗...

谢谢！！

表单看起来像这样，带有更多复选框。

```
<input name="picture[1][categories][]" type="checkbox" value=1>
<input name="picture[1][categories][]" type="checkbox" value=2>
<input name="picture[2][categories][]" type="checkbox" value=1>
<input name="picture[2][categories][]" type="checkbox" value=2>
<input name="picture[3][categories][]" type="checkbox" value=1>
<input name="picture[3][categories][]" type="checkbox" value=2>
<div id="result"> 
```

我的 jquery 函数看起来像

```
$("input").click(function() {
    event.preventDefault();

    $("#result").html('');

    var values = $("checkbox").serialize();

    $.ajax({ url: 'http://example.com/check.php',
         data: values,
         type: 'post',
         success: function(output) {
                      // alert(output);
                       $("#result").html(output);
                  }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:54:54.050

一种更简单的方法是在将表单发送到 php 脚本之前使用客户端站点验证。这样你就不会在用户按下提交时不断地调用服务器，只有当数据有效时。

使用调用验证脚本的提交按钮，如果成功则将数据发送到您的 php 脚本。例如

你的html

```
<button id="submit" onclick="validateForm()">Submit</button> 
```

在你的 js/jquery

```
$(document).ready(function(){

    $('#submit').click(function(){
        if(validateForm){

        //send form to php script for further processing
        var formData = $('form').serialize();
        $.post('yourScript.php',formData,formSent);//your script, form data, callback function
        }//end if
    });//end click funciton

});//end document ready

function validateForm(){
    $('form').find('input').each(function() {
    //validate each input item in your form
    //highlight any input errors
    }//end each
   // and return true or false based on the results
   return result;
}//end validateForm

function formSent(data){
    alert('Form has been sent!');
    //display returned data from php script into your results div
    $('#yourDiv').html(data);

}//end formSent 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:23:55.283

将所有复选框放在一个表单中，然后在表单上尝试 $("#form").serialize()。

第二件事，我认为它只会发送选中的复选框。我想这可能会对你有所帮助。

我不明白的第三件事是为什么有重复的复选框，我的意思是所有都是两次，具有相同的名称和值？

# javascript - 使用字符串变量作为 json 对象名称

> ID：15402262
> 
> 赞同：0
> 
> 时间：2013-03-14T06:00:27.273
> 
> 标签：javascript, jquery, json

我有一个由 UI 创建的动态字符串变量（`valkey`在下面的代码中），我想使用该变量作为 JSON 键来从 TestObj 获取一个值，这是一个 JSON 对象。但是尝试使用以下代码返回了错误。

```
 var valkey=$('#cityfrm').val()+"_TO_"+$('#cityto').val();

 if($('#cityfrm').val()!="NIL" || $('#cityto').val()!="NIL")   
   {

    $.each(TestObj.valkey, function() { 
        var durn=this.duration;
        var prc=this.price;
        var curlegs=this.legs;
        // updating ui
     });
   } 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:03:26.217

`TestObj.valkey``valkey`将查找in中的密钥`TestObj`，在您的情况下这是未定义的，这就是您收到错误的原因。

如果要从变量中查找键，则需要使用语法`TestObj[valkey]`。

前任：

```
var valkey=$('#cityfrm').val()+"_TO_"+$('#cityto').val();

if($('#cityfrm').val()!="NIL" || $('#cityto').val()!="NIL") {
    $.each(TestObj[valkey], function() { 
        var durn=this.duration;
        var prc=this.price;
        var curlegs=this.legs;
        // updating ui
    });
} 
```

# fortran - 当文件在主程序中有 open 语句时，Fortran 有没有办法从子程序写入输出文件。

> ID：15402265
> 
> 赞同：4
> 
> 时间：2013-03-14T06:00:43.220
> 
> 标签：fortran, main, output, subroutine

在 Fortran 中，当文件在主程序中有 open 语句时，我试图从子程序写入输出文件。换句话说，我如何将文件单元号（终端号）从主程序传递给子程序。对此的任何想法都非常感谢。例如，我的代码如下所示，

```
program main1
open(unit=11,file='output.dat')
call subroutine1
...
call subroutine1
...
end program main1

subroutine subroutine1
write(11,*)'dummy'
...
write(11,*)'dummy'
...
end subroutine subroutine1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T06:45:45.280

通过传递表示打开文件的整数：

```
module mod1
  implicit none
contains
  subroutine subroutine1(fp)
    integer, intent(in) :: fp
    write(fp,*)'dummy'
    write(fp,*)'dummy'
  end subroutine subroutine1
end module mod1

program main1
  use mod1
  implicit none
  integer :: fp
  fp = 11
  open(unit=fp,file='output.dat')
  call subroutine1(fp)
  close(fp)
end program main1 
```

# android - keytool 错误 java.io.ioexception 无效的密钥库格式

> ID：15402268
> 
> 赞同：2
> 
> 时间：2013-03-14T06:00:50.220
> 
> 标签：android

只是似乎无法理解为什么我一直得到这个。

我正在使用导出向导导出并签署 APK，但我不断收到此消息。

![在此处输入图像描述](../Images/fa9d0311c22a8c2410e63eca6eb78756.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T15:28:14.867

你在用日食吗？尝试检查下面的链接，也许它可能会有所帮助。 [使用现有的 .keystore 签署 android apk](https://stackoverflow.com/questions/8607792/sign-android-apk-with-existing-keystore)

谢谢你。

# java - 在 Java 中处理异常 - 如何给用户另一个机会？

> ID：15402271
> 
> 赞同：2
> 
> 时间：2013-03-14T06:01:07.877
> 
> 标签：java, exception, exception-handling, try-catch

大家好，我已经尝试回答这个问题好几个小时了：
编写一个程序，要求用户输入一组浮点值。当用户输入一个不是数字的值时，给用户第二次输入该值的机会。两次机会后，退出阅读输入。添加所有正确指定的值并在用户输入数据后打印总和。使用异常处理来检测不正确的输入。

我尝试了一些不同的东西，但我总是遇到同样的问题。一旦输入不是数字的东西，程序就会输出提示输入另一个输入的消息，但是没有给出机会，也就是说，在 1 个不正确的输入之后，它会打印该消息并直接跳到打印总和。我能做的最好的就是在下面我只是不确定如何解决这个问题。任何帮助是极大的赞赏。

```
import java.util.Scanner;
import java.util.InputMismatchException;
public class q6{
public static void main(String[] args){
    Scanner in = new Scanner(System.in);
    boolean firstChance = true;
    boolean secondChance = true;
    double sum = 0;
    while (secondChance){
        try{
            while (firstChance){
                try{
                    System.out.print("Please enter a number: ");
                    double input = in.nextDouble();
                    sum = sum + input;
                }
                catch (InputMismatchException ex){
                    firstChance = false;
                }
            System.out.print("Please enter a number to continue or something else to terminate: ");
            double input = in.nextDouble();
            sum = sum + input;
            firstChance = true;
            }
        }
        catch (InputMismatchException e){
            secondChance = false;
        }
    }
    System.out.print("The sum of the entered values is " + sum);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:10:44.393

当您遇到*“错误”*输入时，您需要**打破循环。**然后，您需要再次设置为**true**，这样您就可以访问第二个，您还需要一个计数器来计算尝试次数（我将其命名为）：`while`*`firstChance`**`while``chances`***

 ***```
int chances = 0;
while (secondChance){
    firstChance = true;
    try{
        while (firstChance){
            try{
                System.out.print("Please enter a number: ");
                double input = in.nextDouble();
                sum = sum + input;
            }
            catch (InputMismatchException ex){
                chances ++;
                in = new Scanner(System.in);
                firstChance = false;
            }
            if(!firstChance && chances < 2)
                break;
            if(chances >= 2) {
                System.out.print("Please enter a number to continue or something else to terminate: ");
                double input = in.nextDouble();
                sum = sum + input;
                firstChance = true;
            }
        }
    }
    catch (InputMismatchException e){
    secondChance = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:11:38.660

由于将输入解析为 double 不成功，因此扫描仪不会越过给定的输入。从[javadoc 扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextDouble%28%29)

> 将输入的下一个标记扫描为双精度。如果下一个标记无法转换为有效的双精度值，此方法将抛出 InputMismatchException。**如果翻译成功，扫描仪会前进超过匹配的输入**。

由于翻译不成功，所以不前进。因此，在 catch 块中，您可以调用[in.next()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)来跳过令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:14:15.740

> 我只是不确定如何解决这个问题

伪代码可能如下：

```
BEGIN

    MAX_INPUT = 2;
    i = 0;

    WHILE i < MAX_INPUT

        TRY
            num = GET_NUM();
        CATCH
            continue;
        FINALLY
            i++

    END WHILE

END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T06:14:25.430

您可以使用整数计数器而不是布尔变量 firstChance 和 secondChance 并执行以下操作：

```
int attempts = 0;
while(attempts < 2) {
    try {
        //Get user input - possible exception point
        //Print sum
    } catch(InputMismatchException e) {
        attempts++;
        //Continue?
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T06:16:26.213

```
import java.util.*;

public class q6 {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        double inputNumber, sum = 0.0;
        int correctCount = 0, wrongCount = 0;

        while(wrongCount <=1) {
            System.out.println("Please enter a numeric floating value:");
            try {
                inputNumber = in.nextDouble();
                correctCount++;
                sum += inputNumber;
                if(correctCount >= 2)
                    break;
            } catch(InputMismatchException e) {
                wrongCount++;
                in = new Scanner(System.in);
                continue;
            }
        }
        System.out.println(sum);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T06:25:57.153

正如我的评论中所述，为了不处理 Scanner 错误读取，最好使用[`Scanner#nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)并读取数据 as `String`，然后尝试将其解析为`double`using [`Double#parseDouble(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)，因为此方法已经抛出[`NumberFormatException`](http://docs.oracle.com/javase/7/docs/api/java/lang/NumberFormatException.html)并且您可以处理此错误。此外，您的代码最好可以处理 1 个以上的请求（如果您的老师或其他人要求这样做）：

```
final int REQUEST_TIMES = 2;
double sum = 0;
for(int i = 1; i <= REQUEST_TIMES; i++) {
    while (true) {
        try {
            if (i < REQUEST_TIMES) {
                System.out.print("Please enter a number: ");
            } else {
                System.out.print("Please enter a number to continue or something else to terminate: ");
            }
            String stringInput = in.nextLine();
            double input = Double.parseDouble(stringInput);
            sum += input;
        } catch (NumberFormatException nfe) {
            System.out.println("You haven't entered a valid number.");
            break;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T06:49:06.077

逻辑是读取一次输入，如果正确则显示总和，否则再次读取输入并在输入正确时显示总和。

```
public class q6 {

    static int trial = 0;

    public static void main(String[] args) {
        double sum = 0;

        while (trial <= 2) {
            Scanner in = new Scanner(System.in);
            try {
                trial++;
                System.out.print("Please enter a number: ");
                double input = in.nextDouble();
                sum = sum + input;
                trial=3;
            } catch (InputMismatchException ex) {
                trial++;
                if (trial == 4){
                    System.out.println("You have entered wrong values twice");
                }
            }
        }
        if (trial <= 3){
            System.out.print("The sum of the entered values is " + sum);
        }
    } 
```

上述程序只是一个粗略的想法，您可以对其进行改进以适应您的需要。***

# android - 使用 MediaPlayer 类播放视频

> ID：15402280
> 
> 赞同：16
> 
> 时间：2013-03-14T06:01:53.540
> 
> 标签：android, video, media-player

我正在尝试利用`MediaPlayer`类来播放视频文件。问题是视频根本没有显示，尽管我可以听到视频播放中的声音。

以下是活动代码

```
public class MainActivity extends Activity implements OnClickListener {

private SurfaceView surfaceView;
private Button btnPlay;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init();
    addListener();

}

private void init() {
    // TODO Auto-generated method stub
    surfaceView = (SurfaceView) findViewById(R.id.surfaceView1);
    btnPlay = (Button) findViewById(R.id.btnPlay);
}

private void addListener() {
    // TODO Auto-generated method stub

    btnPlay.setOnClickListener(this);
}

MediaPlayer mediaPlayer = null;

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.btnPlay:
        try{
        if (mediaPlayer != null) {
            mediaPlayer.reset();
            mediaPlayer.release();
        }else{
        getWindow().setFormat(PixelFormat.UNKNOWN);
        MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.wildlife);
        SurfaceHolder surfaceHolder = surfaceView.getHolder();

        surfaceHolder.setFixedSize(176, 144);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        mediaPlayer.setDisplay(surfaceHolder);
        mediaPlayer.start();}
        }catch (Exception e) {
            Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
        }
        break;

    default:
        break;
    }
  }
   } 
```

以下是布局xml的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<SurfaceView
    android:id="@+id/surfaceView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" />

<Button
    android:id="@+id/btnPlay"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/surfaceView1"
    android:layout_alignTop="@+id/surfaceView1"
    android:text="@string/play" />

</RelativeLayout> 
```

请告诉我需要做什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:09:22.407

设置表面视图的高度和宽度以填充 xml 文件中的父级。

```
 <SurfaceView
android:id="@+id/surfaceView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:12:33.217

将**SurfaceView 布局设置为 wrap_content** **不会调整视频以正确的纵横比播放。**

你可以参考这个答案链接

[https://stackoverflow.com/a/6283676/1441666](https://stackoverflow.com/a/6283676/1441666)

还有这个博客**[使用 android.media.MediaPlayer 在surfaceview 上播放媒体](http://android-er.blogspot.in/2012/03/play-media-on-surfaceview-using.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T14:46:28.290

好吧，我不知道您是否需要特定情况，但是您是否已经尝试过[FullscreenVideoView](https://github.com/rtoshiro/FullscreenVideoView)？

它试图抽象出所有这些 SurfaceView 问题，并且您只能专注于 UI 按钮。在它打开时，您可以继承 FullscreenVideoView 并根据需要进行自定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-03T11:11:06.867

你可以重写类的`onSizeChanged()`函数`SurfaceView`来获取和设置视图的大小。

```
protected void onSizeChanged (int w, int h, int oldw, int oldh) 
```

当屏幕尺寸发生变化时，就会调用这个类。

作为第二种选择，您可以通过设置布局参数来设置大小（不确定这是否适用于 ScrollView）：

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    android.view.ViewGroup.LayoutParams lp = this.getLayoutParams();
    lp.width = 1000; // required width
    lp.height = 1000; // required height
    this.setLayoutParams(lp);
} 
```

# iphone - 将 UIKeyboardFrameEndUserInfoKey 转换为视图或窗口坐标

> ID：15402281
> 
> 赞同：28
> 
> 时间：2013-03-14T06:01:55.270
> 
> 标签：iphone, ios, cocoa-touch, uiview, uikeyboard

对于常量`UIKeyboardFrameEndUserInfoKey`，在 Apple 文档中它说：

> 这些坐标不考虑由于界面方向更改而应用于窗口内容的任何旋转因素。因此，在使用它之前，您可能需要将矩形转换为窗口坐标（使用 convertRect:fromWindow: 方法）或视图坐标（使用 convertRect:fromView: 方法）。

所以如果我使用`[view1 convertRect:rect fromView:view2]`

我将为上述参数插入什么以使其正确转换旋转值？IE：

视图1 = ? 矩形 = ? （我假设的键盘框架） view2 = ?

一直在尝试一些事情并得到一些有趣的东西。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-22T03:05:45.913

第一个视图应该是您的视图。第二个视图应该为零，表示窗口/屏幕坐标。因此：

```
NSDictionary* d = [notification userInfo];
CGRect r = [d[UIKeyboardFrameEndUserInfoKey] CGRectValue];
r = [myView convertRect:r fromView:nil]; 
```

现在，就您的视图而言，您有了键盘将占据的矩形。如果您的视图是当前视图控制器的视图（或其子视图），则现在考虑旋转等。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-05-17T18:10:01.607

我尝试了接受的答案，发现它实际上并没有在视图中提供键盘的 CGRect 。我发现我必须将 CGRect 从 UIScreen 对象转换为 UIWindow 对象，并从 UIWindow 对象转换为 UIView 对象：

```
NSValue * keyboardEndFrame;
CGRect    screenRect;
CGRect    windowRect;
CGRect    viewRect;

// determine's keyboard height
screenRect    = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
windowRect    = [self.view.window convertRect:screenRect fromWindow:nil];
viewRect      = [self.view        convertRect:windowRect fromView:nil]; 
```

我使用上面的方法来调整根视图的大小，使其不被键盘隐藏：

```
NSTimeInterval  duration;
CGRect          frame;

// determine length of animation
duration  = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

// resize the view
frame              = self.view.frame;
frame.size.height -= viewRect.size.height;

// animate view resize with the keyboard movement
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:duration];
self.view.frame = frame;
[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T13:31:20.143

```
+ (void)parseKeyboardNotification:(NSNotification *)notification
                 inRelationToView:(UIView *)view
                             info:(void(^)(NSTimeInterval keyboardAnimationDuration, CGRect keyboardFrameInView, UIViewAnimationOptions keyboardAnimationOptions))callback
{
    NSParameterAssert(notification != nil);
    NSParameterAssert(view != nil);

    NSDictionary *userInfo = [notification userInfo];

    UIViewAnimationCurve animationCurve = [userInfo[UIKeyboardAnimationCurveUserInfoKey] integerValue];
    UIViewAnimationOptions animationOption = animationCurve << 16; // https://devforums.apple.com/message/878410#878410
    NSTimeInterval animationDuration = [userInfo[UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    // http://stackoverflow.com/a/16615391/202451
    CGRect screenRect    = [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    CGRect windowRect    = [view.window convertRect:screenRect fromWindow:nil];
    CGRect viewRect      = [view        convertRect:windowRect fromView:nil];

    callback(animationDuration, viewRect, animationOption);
} 
```

可以这样使用

```
- (void)keyboardWillShowOrHide:(NSNotification *)notification
{    
    [AGKeyboardInfo parseKeyboardNotification:notification inRelationToView:self.view info:^(NSTimeInterval keyboardAnimationDuration, CGRect keyboardFrameInView, UIViewAnimationOptions keyboardAnimationOptions) {

        [UIView animateWithDuration:keyboardAnimationDuration delay:0 options:keyboardAnimationOptions animations:^{

             // do any modifications to your views

        } completion:nil];
    }];
} 
```

# iphone - ios中地图上的路径跟踪

> ID：15402284
> 
> 赞同：1
> 
> 时间：2013-03-14T06:02:06.217
> 
> 标签：iphone, map, path, tracking

有人帮助我，请我从过去几天一直坚持下去......

我的任务在这里。

在我的应用程序中，我需要集成地图，因为它打开它应该显示当前用户位置，因为我在走路时按下开始按钮它开始跟踪从我按下开始按钮的位置到我按下停止位置的路径。覆盖的距离在此间隔内应逐个导航跟踪，并收集开始和停止位置坐标以计算距离。

我添加了地图工具包框架，核心位置框架工作，还添加了地图视图，还实现了显示当前用户位置的方法。现在

这是我的代码

```
-(void)startSignificantChangeUpdates
  {
      // Create the location manager if this object does not
        // already have one.
        if (nil ==   self.locatioManager)
        {
           self.locatioManager = [[CLLocationManager alloc] init];
           self.locatioManager.delegate = self;
           [self.locatioManager startMonitoringSignificantLocationChanges]; 
        }
    }

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
    {
        // If it's a relatively recent event, turn off updates to save power
        CLLocation* location = [locations lastObject];
        NSDate* eventDate = location.timestamp;
        NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];

        if (abs(howRecent) < 15.0) {
            // If the event is recent, do something with it.
            NSLog(@"latitude %+.6f, longitude %+.6f\n",location.coordinate.latitude,location.coordinate.longitude);
        }

        MKCoordinateRegion ref=MKCoordinateRegionMakeWithDistance([location coordinate], 250,250);
        [self.myMapView setRegion:ref animated:YES];
 } 
```

请引导我从这里追踪路径，也可以收集坐标。

# java - 使一个矩形绕一圈 - Java/Swing

> ID：15402287
> 
> 赞同：0
> 
> 时间：2013-03-14T06:02:14.380
> 
> 标签：java, swing, animation, geometry

我的数学不是那么好，所以我在我想要做的一个应用程序中遇到了一些麻烦一个圆圈。想象一个只有一辆车的环形交叉路口，永远绕圈子。

如果我能得到一些帮助如何做到这一点，那么我将能够以示例为基础，最重要的是学习。

如果有人可以为我写一个简单的例子，我将不胜感激。没有背景没有图像，只是一个矩形“驱动”在一个圆圈周围。我正在使用 java 和 Swing。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:11:41.177

抱歉，我不确定是否可以清楚地了解您的确切需求。如果您需要绘制在圆内移动的矩形，您可以使用 sin/cos 函数。

像这样的东西：

```
double r = 50.0; // radius (it might radius of your circle, but consider dimensions of rectangle to make sure you are drawing inside of circle, e.g. circleRadius - rectangeDimesion / 2.0)
for (int f = 0; f < 360; f++) {
    double x = Math.sin(Math.toRadians((double)f)) * r;
    double y = Math.cos(Math.toRadians((double)f)) * r;
    // draw rectangle on [x, y] coordinates
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:10:56.997

如果您知道绕圈的半径，您所需要的只是三角函数和车辆与绕圈形成的角度。你可以看看[这个](http://www.mathsisfun.com/sine-cosine-tangent.html)简单的介绍，它应该能让你朝着正确的方向开始。

另一方面，另一种方法是使用[转换矩阵](http://en.wikipedia.org/wiki/Transformation_matrix)，从包含两个点（您的 X 和 Y 坐标）的矩阵开始，然后将它们转换为新的坐标。

然后，您可以旋转矩形以模拟车辆转弯。

如果您的数学背景有限，第一个选项可能更容易掌握。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:12:16.413

这更像是一个扩展评论而不是答案。

我会将问题分成几个更简单的问题，并分别处理每个问题：

*   绘制具有指定中心位置和长轴方向的矩形。
*   确定围绕原点运行的物体的中心点和长轴方向。请注意，要使长轴成为切线，它需要垂直于通过中心的半径。
*   平移整个系统，使其围绕所需点而不是原点运行。

# php - 如何将评论设置为未读/已读多个用户

> ID：15402288
> 
> 赞同：-4
> 
> 时间：2013-03-14T06:02:24.627
> 
> 标签：php, css, phpmyadmin

我的项目中有一个开发博客。我想将设置评论的功能添加为用户未读，直到他/她看到评论。假设管理员发表评论，因此该项目中的所有用户都应该将该评论视为未读

谁能帮忙

```
should i use $_SESSION or i have to use database tables? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:06:23.253

您应该使用数据库。至少创建 3 个表：`user`, `comment`,`userReadComment`因为用户阅读评论是多对多的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:07:08.027

这需要对项目进行适当的设计。

你是什​​么意思 ：

> 我想要它在 php 代码中......任何人都可以帮助......我完全卡住了

?

您必须仅使用数据库。就这么简单，一旦你有了评论表，你可以在其中引用它的 ID 并连同你做用户 ID ......如果它存在，它会读取，否则它不存在！

或者

您可以设置已读或未读的枚举。

你能展示你到目前为止做了什么吗？

# javascript - public.init 在下面的代码中做了什么

> ID：15402290
> 
> 赞同：0
> 
> 时间：2013-03-14T06:02:29.900
> 
> 标签：javascript

我正在学习 javascript 并试图了解以下代码的作用。不明白为什么创建公共对象，然后 public.init 做什么？

整个代码位于[http://jsfiddle.net/UqV4g/43/](http://jsfiddle.net/UqV4g/43/)

```
var geoLocateAddress = function () {
var public = {};

public.init = function() {
    public.initEventHandlers();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:04:36.473

public 是一个对象，`public.init = function...`这段代码在`public`对象中创建了一个新成员，一个函数，所以以后你可以`public.init();`使用这个函数。

# twitter-bootstrap - 为什么引导程序没有具有 100% 宽度但具有最大宽度的元素？

> ID：15402291
> 
> 赞同：1
> 
> 时间：2013-03-14T06:02:31.290
> 
> 标签：twitter-bootstrap, css

我一直在尝试在流畅的引导布局中调整输入字段的大小。

要调整它们的大小，您可以使用 input-mini 到 input-xxlarge 大小。一旦容器变得太小，这些导致字段将溢出其父容器，因此在流体设计中似乎存在问题。

这留下了 spanX 大小和输入块级类，它们的大小相对于它们的父级，但存在如果容器太宽则输入也太宽的问题。input-block-level 使输入占用 100% 的空间。

我还注意到 input-block-level 类将 box-sizing 更改为border-box，这导致输入尊重其周围容器的填充，并且不会溢出容器等于其内部填充的量。如果您只是将输入框的宽度设置为 100%，由于其内部填充和框模型，它将溢出。

无论如何，似乎有一堆额外的 input-mini 到 input-large 类，但不是具有以下样式：

```
width: X; 
```

具有以下样式：

```
max-width: X;
width: 100%;
box-sizing: border-box;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box 
```

会有帮助吗？

这似乎是人们想要的一件显而易见的事情，因为它可以让他们的输入不会收缩得太大，但当他们的容器变得太小时时会适当地收缩。我在这里问的原因是如此明显，我担心我一定错过了一些东西，而且这种方法一定有问题。

谢谢

# c# - 抽象可重用库中的组合根

> ID：15402292
> 
> 赞同：5
> 
> 时间：2013-03-14T06:02:34.413
> 
> 标签：c#, design-patterns, dependency-injection, composition

在我的第一个问题中

[找到 .NET 库的正确组合根](https://stackoverflow.com/questions/14681779/locate-the-correct-composition-root-for-a-net-library)

帮助澄清依赖注入。Steven 的详尽回答指出（*如果可能的话，用几句话*）可重用的库是一个特殊的案例，我们可以在这里使用`poor-man-injection`（参见完整的答案）。

[研究AutoFixture](https://github.com/AutoFixture)的源代码，您可以注意到主程序集到处使用 DI，而不依赖于容器；[Mark Seemann](http://blog.ploeh.dk/)书中很好地解释了一些事情。

问题是：**有人可以在不使用容器的情况下引入一种模式（或良好实践）来抽象组合根吗？**

**补充说明（可选）：**

`Fixture`回到组合根出现在类型构造函数中的 AutoFixture ；我认为`*Relays`该类用于以类似的方式对实例进行分组，某些 DI 库具有模块的概念。有趣的是，有一个名为的类型`BehaviourRoot`位于图的顶部（这是我正在搜索的那种抽象吗？）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T07:06:17.770

[组合根模式](http://blog.ploeh.dk/2011/07/28/CompositionRoot)的描述明确指出它可以在没有 DI 容器的情况下实现。该模式独立于容器的使用，可以在有或没有容器的情况下使用。

组合根是应用程序的**入口点**。根据定义，它**没有调用者**，因此抽象它是没有意义的。

引用上面的文章：

> 组合根是一个*应用程序基础结构组件*。
> 
> 只有应用程序应该有组合根。**库和框架不应该**.

（加粗我的重点）

AutoFixture 是一个库，因此没有合成根。`Fixture`课程是[Façade](http://en.wikipedia.org/wiki/Facade_pattern)，本着建立一个对[DI 友好的图书馆](https://stackoverflow.com/a/2047657/126014)的精神。

# c# - 有没有办法使用 ENVDTE 选择项目？

> ID：15402294
> 
> 赞同：3
> 
> 时间：2013-03-14T06:02:43.443
> 
> 标签：c#, com, envdte

我想向使用 ENVDTE 的项目添加服务引用。唯一的方法是通过以下命令弹出“添加服务参考”窗口：

```
_applicationObject.ExecuteCommand("Project.AddServiceReference", string.Empty); 
```

但此命令仅适用于当前选定的项目。有没有办法选择要添加服务引用的特定项目？

`DTE2.SelectedProjects`无法选择项目，只能帮助检索选定的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T19:30:32.127

您必须像这样浏览解决方案树：

```
var se = _applicationObject.ToolWindows.SolutionExplorer;  
var proj = se.GetItem("PathToYourProject");
proj.Select(vsUISelectionType.vsUISelectionTypeSelect); 
```

启动命令后。

PathToYourProject 是一个“伪”XPath。如果您在名为“Solution”的解决方案中处理名为“Project”的项目，您的路径将是：“Solution\Project”

如果您的项目位于解决方案文件夹中，请注意。这有点棘手。您必须像这样展开解决方案文件夹：

```
var solutionFolder = se.GetItem("PathToYourSolutionFolder");
if (!solutionFolder .UIHierarchyItems.Expanded)
{
    solutionFolder .UIHierarchyItems.Expanded = true;
} 
```

然后您通过这种方式检索并选择您的项目：

```
var proj = solutionFolder .UIHierarchyItems.Item("ProjectName");
proj.Select(vsUISelectionType.vsUISelectionTypeSelect); 
```

最后，我不确定，但您可能必须在启动命令之前选择项目的“服务引用”节点。

# powershell - Azure 部署脚本不断抱怨“未设置 CurrentStorageAccount”

> ID：15402296
> 
> 赞同：4
> 
> 时间：2013-03-14T06:02:51.637
> 
> 标签：powershell, deployment, azure

我想使用 Bamboo（一种持续集成解决方案）进行自动化部署。我在这里（[http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#script](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#script)）找到了一段脚本来提供帮助。主要代码片段：

```
#configure powershell with Azure 1.7 modules
Import-Module Azure

#configure powershell with publishsettings for your subscription
$pubsettings = $subscriptionDataFile
Import-AzurePublishSettingsFile $pubsettings
Set-AzureSubscription -CurrentStorageAccount $storageAccountName -SubscriptionName $selectedsubscription
write-host $storageAccountName
write-host "$selectedsubscription"

#set remaining environment variables for Azure cmdlets
$subscription = Get-AzureSubscription $selectedsubscription
$subscriptionname = $subscription.subscriptionname
$subscriptionid = $subscription.subscriptionid
$slot = $environment

#main driver - publish & write progress to activity log
Write-Output "$(Get-Date –f $timeStampFormat) - Azure Cloud Service deploy script started."
Write-Output "$(Get-Date –f $timeStampFormat) - Preparing deployment of $deploymentLabel for $subscriptionname with Subscription ID $subscriptionid."

Publish

$deployment = Get-AzureDeployment -slot $slot -serviceName $servicename
$deploymentUrl = $deployment.Url

Write-Output "$(Get-Date –f $timeStampFormat) - Created Cloud Service with URL $deploymentUrl."
Write-Output "$(Get-Date –f $timeStampFormat) - Azure Cloud Service deploy script finished." 
```

我刚刚尝试通过执行从 cmd 运行此脚本`powershell E:\CI\OCZDeployment\publish_cloud_service.ps1 -environment Staging -serviceName "ocz" -storageAccountName "t2vsoft" -packageLocation OCZ.cspkg -cloudConfigLocation ServiceConfiguration.Cloud.cscfg -subscriptionDataFile E:\CI\OCZDeployment\SubscriptionDataFile.publishsettings -selectedsubscription "Development Subscription"`

，其中从 Azure 下载 publishsettings 文件。

但我不断收到错误消息：

> New-AzureDeployment ：未设置 CurrentStorageAccount。使用 Set-AzureSubscription subname -CurrentStorageAccount storageaccount 进行设置。

它肯定已在片段中设置。我什至尝试将 Set-AzureSubscription 行复制并粘贴到 New-AzureDeployment 函数中。没运气。

帮我！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:32:40.667

固定的。不知道究竟是什么原因，但我通过执行删除了所有已注册的天蓝色订阅：

```
PS> Get-AzureSubscription | ForEach-Object { Remove-AzureSubscription $_.SubscriptionName } 
```

并通过执行重新导入订阅：

```
PS> Import-AzurePublishSettingsFile xxx.publishsettings 
```

这一切都奏效了！:)

订阅列表中确实有一些类似名称的订阅。可能存在冲突，因为 azure 脚本不知道他们真正想要哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T16:06:09.413

如果您有多个订阅，则需要确保将要使用的订阅设置为默认值。这可以通过以下方式完成：

```
Select-AzureSubscription -SubscriptionName "{subscriptionName}" -Default 
```

如果您不确定您的订阅名称是什么，您可以使用以下命令查看您的所有订阅：

```
Get-AzureSubscription 
```

# java - 使用 getServletConfig 获取文件名时出错

> ID：15402299
> 
> 赞同：1
> 
> 时间：2013-03-14T06:03:22.673
> 
> 标签：java, file, servlets, jasper-reports, servletconfig

我正在使用`JasperReport`Java Web 应用程序中的生成报告。

我有以下行来获取报告文件。

```
JasperReport report = (JasperReport) JRLoader.loadObject(getServletConfig().getServletContext().getRealPath("\rpts\report1.jasper")); 
```

但是当我尝试使用上面的行时，我得到了`FileNotFoundException`. 但是当我尝试使用以下行时，程序成功执行。

```
JasperReport report = (JasperReport) JRLoader.loadObject(getServletConfig().getServletContext().getRealPath("//rpts//report1.jasper")); 
```

所以，我想知道第一行有什么问题？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:11:55.733

Java 语言（和其他语言）需要`\\`（双反斜杠）在`String`s 中才能读取单个`\`. 您的第一种方式应该更改为

```
JasperReport report = (JasperReport) JRLoader.loadObject(getServletConfig()
    .getServletContext().getRealPath("\\rpts\\report1.jasper")) 
```

尽管如此，最好使用`/`甚至更好地检查路径[`File#separator`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#separator)，如下所示：[File.separator vs Slash in Paths](https://stackoverflow.com/q/2417485/1065197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:11:36.040

您提供的路径应该是 servlet 路径。通常，servlet 路径具有正斜杠`/`。

请试试这个`/rpts/report1.jasper"`。

# javascript - 删除 Javascript 二维数组中的重复项

> ID：15402305
> 
> 赞同：0
> 
> 时间：2013-03-14T06:03:30.780
> 
> 标签：javascript

我已经在第一列排序了 2D Javascript 数组

```
var arr = [[12.485019620906078, 236.90974767017053|166.7059999999991|244.15878139435978|156.54100000000025], 
[12.735148445872, 238.038907254076|203.3000000000006|245.7107245706185|213.46500000000034], 
[47.15778769718685, 238.038907254076|203.3000000000006|244.15878139435978|156.54100000000025], 
[47.580051233708595, 236.90974767017053|166.7059999999991|245.7107245706185|213.46500000000034]
]; 
```

我正在尝试根据数组的 [i][1] 部分中的最后两个值删除重复项

```
244.15878139435978|156.54100000000025
245.7107245706185|213.46500000000034 
```

使用以下未提供正确输出的功能

```
function remDupes(arr)
{
    for(var i=0; i<arr.length-1; i++)
    {
        var i1 = arr[i][1].split("|");

        var item1 = i1[2]+"|"+i1[3];

        for(var j=i+1; j<arr.length; j++)
        {
            var i2 = arr[j][1].split("|");

            var item2 = i2[2]+"|"+i2[3];
            if(item1 == item2)
            {
                arr.splice(j,1);
            }
        }
    }
return arr;
} 
```

我正在寻找这样的最终数组。

```
[
[12.485019620906078, 236.90974767017053|166.7059999999991|244.15878139435978|156.54100000000025], 
[12.735148445872, 238.038907254076|203.3000000000006|245.7107245706185|213.46500000000034]
] 
```

# database - 如何在纯关系模型中表达一对一的关系？

> ID：15402308
> 
> 赞同：0
> 
> 时间：2013-03-14T06:03:37.703
> 
> 标签：database, relational-database

例如，实体 A（主键：a）和 B（主键：b）参与关系 C。这是一对一的关系。我认为 C(a, b) 还不够，对吧？那么如何用纯关系模型来表达呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:23:50.273

如果是一对一的，则不需要第三张表来表达关系。您可以向 B 添加一个引用 A (foreign key) 的字段，或者相反。我通常会在子实体中有一个指向父实体的列。

事实上，如果 B 可以被认为是 A 的子实体，因为它是一对一的关系，有些模型会将 B 的字段包含在与 a 相同的表中，然后您不需要 B 的标识符列。这样，您只需要一个表。

只有当它是多对多关系时，C 才是必需的。

# asp.net - 如何在 elmah 主题行中实现机器名称？

> ID：15402315
> 
> 赞同：3
> 
> 时间：2013-03-14T06:03:54.627
> 
> 标签：asp.net, asp.net-mvc, elmah, elmah.mvc

我想在 ELMAH 主题行中携带机器名称。正如在开发环境中想要跟踪机器错误来自哪个机器。所以我想用正确的机器名称实现主题行。我该做什么？

```
<elmah>
    <errorMail name="exceptionMail" 
       from="devsupport@abc.co.in" 
       to="devsupport@abc.co.in" 
       async="true"  
       subject="Error log from [should come machine name here]" 
       smtpPort="0" 
       useSsl="true"/>
    <security allowRemoteAccess="yes" />
</elmah> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:23:02.647

据我所知，仅在配置中没有办法做到这一点 - 你必须编写一些代码来处理这个要求。

另一方面 - 编写该代码似乎非常简单明了。

请参阅 Scott Mitchell 撰写的这篇博客文章[自定义 ELMAH 的错误电子邮件](https://web.archive.org/web/20130323080204/http://scottonwriting.net/sowblog/archive/2011/01/06/customizing-elmah-s-error-emails.aspx)，了解如何操作。

# java - 运行 WordCount.java 时显示错误

> ID：15402316
> 
> 赞同：2
> 
> 时间：2013-03-14T06:03:54.723
> 
> 标签：java, hadoop, word-count

我试过这段代码：

```
javac -verbose -classpath /var/root/hadoop-1.0.4/hadoop-1.0.4-core.jar WordCount.java -d /Users/amrita/desktop/hadoop/javatrail/wordcount_classes 
```

我只是收到以下错误：

```
parsing started WordCount.java]
[parsing completed 12ms]
[search path for source files: /var/root/hadoop-1.0.4/hadoop-1.0.4-core.jar]
[search path for class files: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jsfd.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar,/System/Library/Frameworks/JavaVM.framework/Frameworks/JavaRuntimeSupport.framework/Resources/Java/JavaRuntimeSupport.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/ui.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/laf.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/sunrsasign.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jsse.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jce.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/charsets.jar,/Library/Java/Extensions/RXTXcomm.jar,/System/Library/Java/Extensions/AppleScriptEngine.jar,/System/Library/Java/Extensions/dns_sd.jar,/System/Library/Java/Extensions/j3daudio.jar,/System/Library/Java/Extensions/j3dcore.jar,/System/Library/Java/Extensions/j3dutils.jar,/System/Library/Java/Extensions/jai_codec.jar,/System/Library/Java/Extensions/jai_core.jar,/System/Library/Java/Extensions/mlibwrapper_jai.jar,/System/Library/Java/Extensions/MRJToolkit.jar,/System/Library/Java/Extensions/QTJava.zip,/System/Library/Java/Extensions/vecmath.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/apple_provider.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/dnsns.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/localedata.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/sunjce_provider.jar,/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/sunpkcs11.jar,/var/root/hadoop-1.0.4/hadoop-1.0.4-core.jar]
[loading java/io/IOException.class(java/io:IOException.class)]
WordCount.java:5: package org.apache.hadoop.fs does not exist
import org.apache.hadoop.fs.Path;
                           ^
WordCount.java:6: package org.apache.hadoop.conf does not exist
import org.apache.hadoop.conf.*;
^
WordCount.java:7: package org.apache.hadoop.io does not exist
import org.apache.hadoop.io.*;
^
WordCount.java:8: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.*;
^
WordCount.java:9: package org.apache.hadoop.util does not exist
import org.apache.hadoop.util.*;
^
[loading java/lang/Object.class(java/lang:Object.class)]
[loading java/lang/String.class(java/lang:String.class)]
[loading java/lang/Exception.class(java/lang:Exception.class)]
WordCount.java:11: cannot find symbol
symbol  : class MapReduceBase
location: class org.myorg.WordCount
    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
                                    ^
WordCount.java:11: cannot find symbol
symbol  : class Mapper
location: class org.myorg.WordCount
    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
                                                             ^
WordCount.java:11: cannot find symbol
symbol  : class LongWritable
location: class org.myorg.WordCount
    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
                                                                    ^
   [total 406ms]
48 errors 
```

我的类路径有什么问题吗？如果是这样，我怎样才能获得正确的类路径？我的 WordCount.java 在 /Users/amrita/.... 和 hadoop 在 root 中，是否有任何权限问题？我无法生成 WordCount.class

源代码：WordCount.java

```
package org.myorg;
import java.io.IOException;
import java.util.*;

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;
public class WordCount {
    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
        private final static IntWritable one = new IntWritable(1);
        private Text word = new Text();
        public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
            String line = value.toString();
            StringTokenizer tokenizer = new StringTokenizer(line);
            while (tokenizer.hasMoreTokens()) {
                word.set(tokenizer.nextToken());
                output.collect(word, one);
            }
        }
    }
    public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {
         public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
             int sum = 0;
             while (values.hasNext()) {
                 sum += values.next().get();
             }
             output.collect(key, new IntWritable(sum));
         }
    }
    public static void main(String[] args) throws Exception {
        JobConf conf = new JobConf(WordCount.class);
        conf.setJobName("wordcount");
        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(IntWritable.class);
        conf.setMapperClass(Map.class);
        conf.setCombinerClass(Reduce.class);
        conf.setReducerClass(Reduce.class);
         conf.setInputFormat(TextInputFormat.class);
         conf.setOutputFormat(TextOutputFormat.class);
         FileInputFormat.setInputPaths(conf, new Path(args[0]));
         FileOutputFormat.setOutputPath(conf, new Path(args[1]));
         JobClient.runJob(conf);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:20:48.467

我创建了导入 hadoop 类的简单程序：

```
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;
public class WordCount {
    public static void main(String args[]) {
        System.out.println("test");
    }
} 
```

并使用此命令对其进行编译`javac -classpath "C:\Users\user\Desktop\hadd2\*" WordCount.java`。在目录`C:\Users\user\Desktop\hadd2\*`中，我从 hadoop 页面（[http://ftp.ps.pl/pub/apache/hadoop/common/stable/hadoop-1.0.4-bin.tar.gz](http://ftp.ps.pl/pub/apache/hadoop/common/stable/hadoop-1.0.4-bin.tar.gz)）下载了 *.jars。应用程序编译成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T12:47:40.937

hduser@Linux:~/hadoop$ javac -classpath /home/hduser/hadoop/hadoop-core-1.1.2.jar -d wordcount_classes WordCount.java

hduser@Linux:~/hadoop$

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:38:50.133

这里的编译器抱怨 MapReduce 类。如果您的 hadoop 库中没有，请检查其类路径或导入语句。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-16T05:29:45.830

[解决了]

我使用的`new hadoop api`是 pgm 和`old api`

# security - Spring MVC - 将 .Exe 文件更改为 .txt 使浏览器更改内容类型

> ID：15402317
> 
> 赞同：2
> 
> 时间：2013-03-14T06:04:11.577
> 
> 标签：security, spring-mvc, file-upload

在我的基于 Spring MVC 3.0 的应用程序中，我试图通过一些验证来测试文件上传功能。在一项验证中，我将 .exe(executable) 文件更改为 .txt ，并期望该 exe 文件不应上传到系统中。但它会被上传。

我正在检查文件的内容类型，但在这种情况下，一旦更改了文件扩展名，它的内容类型也会从“application/octet-stream”更改为“text/plain”。

我正在 Firefox 和 Google Chrome 上进行测试。并且在控制器级别使用 MultipartFile 读取上传的文件。

在这种情况下，我有什么方法可以获取文件的原始内容类型“application/octet-stream”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:27:27.283

当我们在上传文件之前更改文件的扩展名时..这取决于操作系统的天气 MIME 类型是否会改变。此外，浏览器有责任找出 Mime 类型并将其设置到控制器中正在读取的请求标头中。

# java - 如何在android中将HashMap转换为json数组？

> ID：15402321
> 
> 赞同：22
> 
> 时间：2013-03-14T06:04:39.360
> 
> 标签：java, android, arrays, json

我想**将[HashMap](https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)转换为[json 数组](https://www.w3schools.com/js/js_json_arrays.asp)**我的代码如下：

```
Map<String, String> map = new HashMap<String, String>();

map.put("first", "First Value");

map.put("second", "Second Value"); 
```

**我已经尝试过了，但是没有用**。有什么解决办法吗？

```
JSONArray mJSONArray = new JSONArray(Arrays.asList(map)); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-14T06:20:19.723

试试这个，

```
public JSONObject (Map copyFrom) 
```

通过从给定映射复制所有名称/值映射来创建一个新的 JSONObject。

参数 copyFrom 一个映射，其键是字符串类型，其值是支持的类型。

如果地图的任何键为空，则引发 NullPointerException。

基本用法：

```
JSONObject obj=new JSONObject(yourmap); 
```

**从 JSONObject 获取 json 数组**

**编辑：**

```
JSONArray array=new JSONArray(obj.toString()); 
```

**编辑：（**如果发现异常，那么您可以更改为@krb686 评论中提到的）

```
JSONArray array=new JSONArray("["+obj.toString()+"]"); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-04-07T12:09:18.830

由于 android API Lvl 19，您可以简单地执行`new JSONObject(new HashMap())`. 但是在较旧的 API lvls 上，您会得到丑陋的结果（简单地将 toString 应用于每个非原始值）。

我从 JSONObject 和 JSONArray 收集了方法来简化和漂亮的结果。您可以使用我的解决方案类：

```
package you.package.name;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.lang.reflect.Array;
import java.util.Collection;
import java.util.Map;

public class JsonUtils
{
    public static JSONObject mapToJson(Map<?, ?> data)
    {
        JSONObject object = new JSONObject();

        for (Map.Entry<?, ?> entry : data.entrySet())
        {
            /*
             * Deviate from the original by checking that keys are non-null and
             * of the proper type. (We still defer validating the values).
             */
            String key = (String) entry.getKey();
            if (key == null)
            {
                throw new NullPointerException("key == null");
            }
            try
            {
                object.put(key, wrap(entry.getValue()));
            }
            catch (JSONException e)
            {
                e.printStackTrace();
            }
        }

        return object;
    }

    public static JSONArray collectionToJson(Collection data)
    {
        JSONArray jsonArray = new JSONArray();
        if (data != null)
        {
            for (Object aData : data)
            {
                jsonArray.put(wrap(aData));
            }
        }
        return jsonArray;
    }

    public static JSONArray arrayToJson(Object data) throws JSONException
    {
        if (!data.getClass().isArray())
        {
            throw new JSONException("Not a primitive data: " + data.getClass());
        }
        final int length = Array.getLength(data);
        JSONArray jsonArray = new JSONArray();
        for (int i = 0; i < length; ++i)
        {
            jsonArray.put(wrap(Array.get(data, i)));
        }

        return jsonArray;
    }

    private static Object wrap(Object o)
    {
        if (o == null)
        {
            return null;
        }
        if (o instanceof JSONArray || o instanceof JSONObject)
        {
            return o;
        }
        try
        {
            if (o instanceof Collection)
            {
                return collectionToJson((Collection) o);
            }
            else if (o.getClass().isArray())
            {
                return arrayToJson(o);
            }
            if (o instanceof Map)
            {
                return mapToJson((Map) o);
            }
            if (o instanceof Boolean ||
                    o instanceof Byte ||
                    o instanceof Character ||
                    o instanceof Double ||
                    o instanceof Float ||
                    o instanceof Integer ||
                    o instanceof Long ||
                    o instanceof Short ||
                    o instanceof String)
            {
                return o;
            }
            if (o.getClass().getPackage().getName().startsWith("java."))
            {
                return o.toString();
            }
        }
        catch (Exception ignored)
        {
        }
        return null;
    }
} 
```

然后，如果您将 mapToJson() 方法应用于您的地图，您可以获得如下结果：

```
{
  "int": 1,
  "Integer": 2,
  "String": "a",
  "int[]": [1,2,3],
  "Integer[]": [4, 5, 6],
  "String[]": ["a","b","c"],
  "Collection": [1,2,"a"],
  "Map": {
    "b": "B",
    "c": "C",
    "a": "A"
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T06:28:03.773

映射由键/值对组成，即每个条目有两个对象，而列表的每个条目只有一个对象。您可以做的是提取所有[Map.Entry<K,V>](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)，然后将它们放入数组中：

```
Set<Map.Entry<String, String> entries = map.entrySet();
JSONArray mJSONArray = new JSONArray(entries); 
```

*或者，有时将键或*值提取到集合中很有用：

```
Set<String> keys = map.keySet();
JSONArray mJSONArray = new JSONArray(keys); 
```

或者

```
List<String> values = map.values();
JSONArray mJSONArray = new JSONArray(values); 
```

注意：如果您选择使用*键*作为条目，则无法保证顺序（该`keySet()`方法返回 a `Set`）。那是因为`Map`接口没有指定任何顺序（除非`Map`恰好是 a `SortedMap`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-14T11:06:02.337

这是最简单的方法。

只需使用

```
JSONArray jarray = new JSONArray(hashmapobject.toString); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T06:06:54.363

您可以使用

`JSONArray jarray = JSONArray.fromObject(map );`

# jquery - 使用jQuery生成文章列表的正确方法

> ID：15402322
> 
> 赞同：4
> 
> 时间：2013-03-14T06:04:41.027
> 
> 标签：jquery, html

我在这里的第一个问题:)。我实际上需要以对象数组的形式加载数据，如下所示：

```
var data = [
{
    'id': '1',
    'firstName': 'Megan',
    'lastName': 'Fox',
    'picture': 'images/01.jpg',
    'bio': 'bla bla bla bla.'
},
{
    'id': '2',
    'firstName': 'Robert',
    'lastName': 'Pattinson',
    'picture': 'images/02.jpg',
    'bio': 'bli bli bli bli.'
} 
```

然后我想使用这种结构在 HTML 中显示数据：

```
<div class="wrapper">
    <article>
        <header>
            <h2>[firstName 1 here]<h2>
        </header>
        <section>
            <p>[bio 1 here]</p>
        </section>
    </article>
    <article>
        <header>
            <h2>[firstName 2 here]<h2>
        </header>
        <section>
            <p>[bio 2 here]</p>
        </section>
    </article>
</div> 
```

我创建的JS函数如下：

```
var loadArtists = function() {
    var $tmpHtml = '';
    for (var artist in artists) {
        var objArtist = artists[artist],
        fullname = objArtist.firstName + ' ' + objArtist.lastName,
        bio = objArtist.bio,
        id = objArtist.id,
        pic = objArtist.picture;

        $tmpHtml += '<article><header data-id="' + id + '"><h2>' + fullname + '</h2></header><section data-id="' + id + '"><div class="imgContainer"><img alt="' + fullname + '" src="' + pic + '" /></div><h2 class="hiddenName">' + fullname + '</h2><p>' + bio + '</p></section></article>'; 
    }

    $('div.wrapper').append($tmpHtml);
}; 
```

这些代码好吗？或者有（有）更好、更优雅的方式来构建 HTML？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:17:42.437

感谢您的回答。我最终使用**[Mustache.js](https://github.com/janl/mustache.js)**来改进我的代码。感谢 Murali 提供的 jQuery 模板链接，这使我对一些可用的 HTML 模板库进行了更多研究。我没有选择 jQuery 模板的原因是它已经停产并且不再从 jQuery 团队获得支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:42:56.500

使用[jTemplates](http://jtemplates.tpython.com/)。

或者

[使用string.format](https://stackoverflow.com/a/14062431/1400155)格式化您的模板字符串

# extjs - Sencha Touch - hasParent() 返回 false；getParent() 返回未定义；在具有父级的组件上

> ID：15402324
> 
> 赞同：0
> 
> 时间：2013-03-14T06:04:51.337
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我有一个简单的视图，左侧有一个列表，右侧有一个容器来显示点击列表项的详细信息，定义如下：

```
Ext.define('app.view.activity.ListContainer', {
    extend: 'Ext.Container',
    alias: 'widget.activitylistcontainer',
    requires: [
        'app.view.activity.List',
        'app.view.activity.ListDetail'
    ],
    config: {
        layout: {
            type: 'hbox'
        },
        items: [
            {
                xtype: 'activitylist',
                flex: 4
            },
            {
                xtype: 'activitylistdetail',
                flex: 5
            }
        ]
    }
}); 
```

当`activity.List`Store 加载时，我想`activity.ListDetail`显示 Store 中第一条记录的详细信息。我的问题是我无法访问，`activity.ListContainer`因为它未被识别为`activity.List`.

```
onActivityListInitialize: function(component, options){
    var activityStore = Ext.create('app.store.Activity');

    activityStore.on('load', function(store, records, successful, operation, eOpts){
        var activityListHasContainer = component.hasParent(),
            activityListContainer = component.getParent(),
            activityListContainerUp = component.up('activitylistcontainer');
        console.log(component, component.parent, activityListHasContainer, activityListContainer, activityListContainerUp);
    });

    component.setStore(activityStore);
} 
```

的输出`console.log`是`Object, undefined, false, undefined, undefined`。我包含`component.parent`在其中是`log`因为当我检查对象时有一个`parent`属性，但无论出于何种原因，它都会`undefined`在`log`退出时显示。

有人可以帮助阐明这一点吗？在煎茶中`activity.ListContainer`不被视为父母吗？`activity.List`还是我的应用程序中的其他东西与此有关？如果它有帮助，`activity.ListContainer`是在一个`navigationview`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:36:51.987

结果在事件触发`activity.ListContainer`时不存在。`activity.ActivityList initialize`我的解决方案是将此方法移至`activity.ListContainer initialize`事件中。

# wamp - WAMP 服务器收到错误“无法执行菜单项（内部错误）”

> ID：15402325
> 
> 赞同：8
> 
> 时间：2013-03-14T06:04:53.480
> 
> 标签：wamp, wampserver

我下载了 2.2 版的 WAMP 服务器并安装在 Windows 7 64 位机器上。

但问题是它会引发以下详细信息的错误：

* * *

**`Aestan Tray Menu`**

```
Could not execute menu item (internal error)
[Exception] Could not perform service action:
The service has not been started 
```

* * *

谁能告诉我它的确切含义以及解决方案（如果已知）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T06:07:42.597

1.  左键单击托盘的 WAMP 图标，选择重新启动所有服务。

别的

2.  在所有服务中选择停止服务，然后重新启动..

3.  重新启动计算机并重新运行。

如果没有，请检查您的配置是否有错误。

* * *

或者

转到 Wampsever->Apache->httpd.conf 并更改行

听 0.0.0.0:80 听 [::0]:80 作为听 0.0.0.0:8080 听 [::0]:8080

*复制行查找和替换..

这是 youtube 中的解决方案[https://www.youtube.com/watch?v=nct5BBn6hW8](https://www.youtube.com/watch?v=nct5BBn6hW8)

# python - 简单的 PRNG 算法有不同的 Python/C 输出 - 整数溢出差异？

> ID：15402326
> 
> 赞同：2
> 
> 时间：2013-03-14T06:04:59.730
> 
> 标签：python, c, algorithm, prng

**编辑：**事实证明，我在 C 版本的测试代码中输入了种子值（这与我在这个问题中粘贴的不同），所以我得到了不同的输出。感谢大家。

我需要在 C 程序中生成伪随机数，然后稍后将种子传递给 Python 程序并生成相同的数字。

PRNG 是我考虑过的东西，所以我查找了一个实现（在 C 中）：

```
static unsigned long next = 1;

/* RAND_MAX assumed to be 32767 */
int myrand(void) {
    next = next * 1103515245 + 12345;
    return((unsigned)(next/65536) % 32768);
} 
```

还有一个*幼稚*的端口：

```
next = 1

def myrand():
    global next
    next = next * 1103515245 + 12345
    return (next / 65536) % 32768 
```

但是，它们都产生不同的值。我猜`next`在 C 实现中会溢出，这就是为什么这两个函数会产生不同的值。但是在 Python 中，数字没有明确的类型，它们不会溢出，也不是无符号的。如何在 Python 中复制这种行为？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:24:02.840

您不想在这里使用全局变量，这个问题更适合生成器函数。此外，您当然不想`next`在 python 中用作变量名，因为它隐藏了一个非常有用的内置名称（实际上我在下面使用它！）

```
def myrand(seed=1):
    n = seed
    while True:
      n = n * 1103515245 + 12345
      yield (n // 65536) % 32768

g = myrand()
print(next(g))
print(next(g))
print(next(g)) 
```

这在 python3 上对我有用，显然不需要溢出处理，并且匹配你的前 3 个输入。您能否再发布一些，以便我们可以看到它们在哪里/为什么会出现分歧？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:10:46.523

取每个计算模 (%) 2^32（假设 32 位整数宽度）应该可以工作。

```
next = 1
modulo = 2**32
def myrand():
    global next
    next = ((next * 1103515245) + 12345) % modulo
    return (next / 65536) % 32768 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:15:41.050

```
next = 1
def myrand():
    global next
    next = next * 1103515245 + 12345
    return (next & 0xFFFFFFFF / 65536) % 32768 
```

# php - php count 为服务器上的空数组解决方案返回 1

> ID：15402333
> 
> 赞同：-2
> 
> 时间：2013-03-14T06:05:24.613 标签 + jQuery .clone() =?
> 
> 标签：php

我需要使用服务器或 mysql 将 php 计数返回 0 为空。实际上，在我的情况下，我在很多地方都使用了计数功能，当我将代码上传到客户端服务器时，php 计数返回 1 表示空。所以它会产生很多问题。如果有任何解决方案，请回复我。我不想更改所有使用计数的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:14:11.467

如果我没有误会您的意思，那么您将一个**非数组**元素传递给`count`.
看下面的示例代码..

**代码 1：**

```
$var = false;
echo count($var); // print 1 
```

**代码 2：**

```
$var = array();
echo count($var); // print 0 
```

**代码 3：**

```
$var = array('');
echo count($var); // print 1 
```

所以最好检查元素是否为数组。

```
if(is_array($var))
{
   $var = array_filter($var);
   echo count($var);
}
else
{
   echo 0;
} 
```

请参阅**[键盘](http://codepad.org/POyUAkSX)**。

# amazon-web-services - AWS S3 - 放置对象和获取对象

> ID：15402348
> 
> 赞同：3
> 
> 时间：2013-03-14T06:07:34.167
> 
> 标签：amazon-web-services, amazon-s3

我一直在使用 s3.php 和函数 putObjectFile() 将对象放到 S3 上。但现在我看到这是贬值了。我一直在寻找可以使用的最佳课程。

用于放置和获取对象的最佳 AWS 类是什么？

此外，如果您有一些基本示例或包含如何执行这两个功能的示例的页面，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:11:42.640

使用[putObject](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation#putObject)方法替代`putObjectFile`：

```
<?php

    // Simple PUT:
    if (S3::putObject(S3::inputFile($file), $bucket, $uri, S3::ACL_PRIVATE)) {
        echo "File uploaded.";
    } else {
        echo "Failed to upload file.";
    }

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:16:09.653

Zend 为 S3 操作提供了很好的组件

[http://framework.zend.com/manual/1.12/en/zend.service.amazon.s3.html#zend.service.amazon.s3.objects](http://framework.zend.com/manual/1.12/en/zend.service.amazon.s3.html#zend.service.amazon.s3.objects)

你可以谷歌它以获取大量 PHP 示例。

# prolog - 如何在 Prolog 上编写代码？

> ID：15402350
> 
> 赞同：0
> 
> 时间：2013-03-14T06:07:49.613
> 
> 标签：prolog, zebra-puzzle

请你解释一下我将如何在 Prolog 上编码这个东西？

梅森、亚历克斯、史蒂夫和西蒙站在警察队伍中。其中一位金发碧眼、英俊且没有疤痕。其中两个不是金发碧眼的人站在梅森的两侧。亚历克斯是唯一站在一个英俊男人旁边的人。史蒂夫是唯一一个没有站在一个伤痕累累的男人旁边的人。谁是金发，英俊，不害怕？

我在这里，

p --> 站立(x,y)

twoOfThem（不是金发，站在梅森的两边）

```
standing(mason,[x,y]):-
         blond([x,y]) == false. 
```

亚历克斯只有一个站在旁边正好一个帅哥

```
standing(alex,x):-
         handsome(x). 
```

史蒂夫只是没有站在无伤大雅的旁边。

```
standing(steve,x):- 
         unscared(x). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:00:04.240

在不使用 CLP(FD) 的情况下，您应该使用 Prolog 的组合能力以适当的方式表达问题和约束。例如

```
puzzle(Name) :-

    L = [[mason, Pos1, Blond1, Handsome1, UnScared1],
         [alex,  Pos2, Blond2, Handsome2, UnScared2],
         [steve, Pos3, Blond3, Handsome3, UnScared3],
         [simon, Pos4, Blond4, Handsome4, UnScared4]
        ],

   permutation([1,2,3,4], [Pos1,Pos2,Pos3,Pos4]),
   maplist(yn,
       [Blond1, Handsome1, UnScared1,
        Blond2, Handsome2, UnScared2,
        Blond3, Handsome3, UnScared3,
        Blond4, Handsome4, UnScared4
       ]),
... 
```

每个变量（那些以大写字母开头的符号！）都是一个人的属性，并且可以假定来自域的值。yn/1 这是一个服务事实，允许这些二进制值假设是或否：

```
yn(y).
yn(n). 
```

然后可以用这种方式表达约束（这里只是第一个）

```
...
   % Two of them who are not blond are standing on either side of Mason.
   member([mason, I1, _,_,_], L),
   member([_,     I2, n,_,_], L),
   member([_,     I3, n,_,_], L),

   (I2>I1, I3>I1 ; I2<I1, I3<I1),
... 
```

解决方案将是

```
 % One of them is blond, handsome, and unscarred.
   member([Name,  _, y, y, y], L). 
```

我不确定我是否理解每个约束（英文），确实我的程序没有找到解决方案。

该程序相当慢，并且需要 CLP(FD)。如果您对 CLP(FD) 解决方案感兴趣，请编辑您的问题（例如添加适当的标签）。

# python - 为什么 Buildout 不下载我的依赖项？

> ID：15402353
> 
> 赞同：0
> 
> 时间：2013-03-14T06:07:57.200
> 
> 标签：python, setuptools, buildout

过去，Buildout 似乎一直都能正常工作，但我似乎无法让它下载我的依赖项。这是我的`buildout.cfg`：

```
[buildout]
parts = python_section
develop = .
eggs = buildoutstarter
versions = versions

[versions] 

[python_section]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs} 
```

这是我的`setup.py`：

```
#!/usr/bin/env python

from setuptools import setup, find_packages

setup(
    name = "buildoutstarter",
    version = "0.1.0",
    license = "LGPL",
    packages = find_packages('src'),
    package_dir = { '': 'src'},
    install_requires = ['setuptools',
        'jinja2',
    ],
) 
```

不幸的是，running`bin/buildout`似乎根本没有下载 Jinja。事实上，运行`find . -iname "*jinja*"`不会产生任何东西，所以很明显 Buildout 没有对包做任何事情。为什么不下载包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:26:20.697

Buildout 将使用已经安装在你的 python 中的包，`site-packages`除非你告诉它不要：

```
include-site-packages = false 
```

`include-site-packages`默认设置为`true`。

您还可以将允许从您的站点包中满足的包列入白名单：

```
include-site-packages = true
allowed-eggs-from-site-packages = jinja2,mako 
```

这只*允许*从您的站点包中获取和包，但没有别的`jinja2`。`mako`

`allowed-eggs-from-site-packages`支持 glob，`*`默认设置为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:44:24.227

Buildout 实际上比我最初想象的要“聪明”一些。由于我的机器上已经满足了依赖项'jinja2 == 2.6'，它只是创建了一个指向该包的链接，这就是它没有下载它的原因。有趣的。

# python - Pyramid：如何为应用程序指定基本 URL

> ID：15402355
> 
> 赞同：2
> 
> 时间：2013-03-14T06:08:05.307
> 
> 标签：python, config, pyramid

假设我的应用程序在 domain 提供`www.example.com`。

我应该如何（在哪里？）在 Pyramid 配置文件中指定它，以便函数`request.route_url`自动选择它并生成正确的 URL。

（我认为`[server:main]`不是这个地方）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:53:09.467

url 生成函数`route_url`,`static_url`都`resource_url`依赖于 WSGI environ 字典，它们从中获取生成完整 URL 所需的所有基本参数。

因此，一种方法是在请求创建时修改 WSGI 环境字典，并修改所需的参数。事件非常适合这种事情：

```
from pyramid.events import NewRequest
from pyramid.events import subscriber

@subscriber(NewRequest)
def mysubscriber(event):
    event.request.environ['HTTP_HOST'] = 'example.com' 
```

在此之后，`route_url`将`example.com`作为基本 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:09:41.437

是的，适当的反向代理将沿着适当的标头转发到您的 wsgi 服务器。有关 nginx 食谱，请参阅金字塔食谱。

# ruby - 当 HTTP 调用针对代理且没有代理运行时，Ruby 如何处理

> ID：15402356
> 
> 赞同：0
> 
> 时间：2013-03-14T06:08:08.070
> 
> 标签：ruby

我的 HTTP 代码针对代理或无代理运行。就像是：

```
 @uri = URI(testrail_url)

  # With Proxy
  # proxy_url = "http://URL:port"
  # proxy_uri = URI(proxy_url)
  # proxy = Net::HTTP::Proxy(proxy_uri.host, proxy_uri.port)
  # @http = proxy.new(@uri.host, 443) 

  # Without Proxy
  @http = Net::HTTP.new(@uri.host, 443) 
```

请建议一种方法来处理基于网络的同一块中的代码是在代理还是无代理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:11:53.887

在我的建议之下。理想情况下，将其放在一个单独的模块中。

```
require 'net/http'

proxy = {
  host: 'proxy host',
  port: 8080,
  user: 'login',
  password: 'password'
}

uri_str = "http://google.com"

begin
  uri = URI.parse(uri_str)
  http = if proxy
    ::Net::HTTP::Proxy(
      proxy[:host],
      proxy[:port],
      proxy[:user],
      proxy[:password]
    ).new(uri.host, uri.port)
  else
    ::Net::HTTP.new(uri.host, uri.port)
  end  
  response = http.get(uri.request_uri)

rescue Exception => e  
   puts "There was an error: #{uri_str} #{e.message}"
   puts "Backtrace:\n\t#{e.backtrace.join("\n\t")}"   
end 
```

# php - session_start 如何知道是恢复还是开始会话？

> ID：15402363
> 
> 赞同：1
> 
> 时间：2013-03-14T06:09:02.113
> 
> 标签：php, session

我不完全明白它是如何`session_start`工作的？例如，这是一个名为 的脚本：

测试器.php

```
<html>
 <body> <head> <title> tester.php </title> </head>

   <?php
     session_start();
     $_SESSION['Mir Taqi Mir'] = "Dekh toh dil ke jaan se uthta hai,yeh dhuan sa kahaan se uthta hai";
   ?>

   <a href='./try.php'>Click to follow</a>

 </body>
</html> 
```

和一个名为`try.php`：

```
session_start();

if(isset($_SESSION['Mir Taqi Mir']))
 {
   echo "Value of the session variable :".$_SESSION['Mir Taqi Mir'];
 } 
```

当我跟进时`try.php`，`tester.php`如何`session_start`知道它必须恢复会话而不是开始新会话？

[文档](http://php.net/manual/en/function.session-start.php)说明：`session_start() creates a session or resumes the current one based on a session identifier passed via a GET or POST request, or passed via a cookie.`什么标识符？我不明白这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:13:12.583

如果您查看 cookie，应该有一个`PHPSESSID`包含随机字符串的 cookie，PHP 使用该字符串来识别会话。如果它不存在，它将创建一个新的并设置该 cookie（前提是它能够这样做，即尚未发送标头等）。尝试做一个`var_dump($_COOKIE);`on `try.php`。

# windows - 最容易为 Windows 设置本地网络服务器

> ID：15402370
> 
> 赞同：0
> 
> 时间：2013-03-14T06:09:42.640
> 
> 标签：windows, webserver

我喜欢 Mac 的 POW，Windows 最相似的解决方案是什么？

在 Windows 电脑上运行本地网络服务器以进行网站测试/开发的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:29:03.880

这取决于您想从哪种编程语言/平台开始。最简单的方法是使用 windows 集成的 IIS。

1.  视窗 XP/2000。单击开始，然后单击运行，键入**inetmgr.exe**并按 Enter。您将打开 iis 窗口。如果没有，您需要默认安​​装此功能。
2.  Windows 7/Server 2008。单击开始然后运行，键入**optionalfeatures**并按 Enter。在弹出的窗口中选中“Internet 信息服务”，然后单击“确定”以“启用”该功能。

![启用 IIS](../Images/46c7553bfb1cda3e552cca9e23a02bf2.png)

有关使用 IIS 托管网站的更多信息，请参阅[ASP.net](http://www.asp.net)。

如果您不喜欢 C#/VB.net 等。您仍然可以在 windows 中下载并安装[Apache Tomcat](http://tomcat.apache.org/download-70.cgi)以使用 Java、PHP 和其他语言。

# php - Mysql max_connection 限制

> ID：15402374
> 
> 赞同：0
> 
> 时间：2013-03-14T06:10:18.133
> 
> 标签：php, mysql

我必须将mysql的max_connection限制增加到1000。

通过 SET GLOBAL max_connection=1000 编辑 /etc/my.cnf。

它更新了 max_connections=1000 的变量大小，但是当我分别用 100,200...400 个并发用户测试我的站点时，max_connection 不能超过 150。

请帮我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:17:09.980

1.  重新启动您的服务器。要使任何配置生效，都需要重新加载。

2.  它不适用于“并发用户”，这意味着您可以打开多少个连接。

3.  带宽起着重要的作用。你得到的响应头是什么？你确定它只是 MySQL 吗？1000 个并发用户 = 1000 个并发数据库查询。绕线机制呢？

4.  你想要做的是`max_user_connections`而不是`max_connections`。当你写“*我分别用 100,200...400 个并发用户测试我的网站，但 max_connection 不能超过 150.*”时，我假设它

# iphone - 如何在 Xcode 中打开全屏摄像头

> ID：15402376
> 
> 赞同：1
> 
> 时间：2013-03-14T06:10:24.637
> 
> 标签：iphone, ios, xcode, camera

我正在开发一个应用程序，我需要在其中保持打开全屏摄像头并在其上添加一个按钮（右下角）。我用谷歌搜索但找不到任何健康的解决方案。提前致谢。祝你有美好的一天。 **已编辑**

```
 - (void) showCameraUI {
    [self startCameraControllerFromViewController: self
                                    usingDelegate: self];
}

- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                                   UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    NSLog(@"Start Camera Controller method...");
    UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Displays a control that allows the user to choose picture or
    // movie capture, if both are available:
    cameraUI.mediaTypes =
    [UIImagePickerController availableMediaTypesForSourceType:
     UIImagePickerControllerSourceTypeCamera];

    // Hides the controls for moving & scaling pictures, or for
    // trimming movies. To instead show the controls, use YES.
    cameraUI.allowsEditing = NO;

    cameraUI.delegate = delegate;

    [controller presentModalViewController: cameraUI animated: YES];
    return YES;
} 
```

PS：我还在`UINavigationControllerDelegate,UIImagePickerControllerDelegate`头文件中添加了协议，但它仍然没有打开相机并显示项目的默认视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:05:43.060

你可以简单地使用像波纹管这样的相机来捕捉图像，我在我的代码中使用了这个波纹管方法：-

```
-(void)btnCemeraOpen
{
        UIImagePickerController * picker = [[UIImagePickerController alloc] init];
        picker.delegate = self;

        if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {       
                picker.sourceType = UIImagePickerControllerSourceTypeCamera;
                [self presentModalViewController:picker animated:YES];
        }
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self dismissModalViewControllerAnimated:YES];
    yourImageView.image = [info valueForKey:@"UIImagePickerControllerOriginalImage"];
    if(yourImageView==nil)
    {

    }
    else
    {
      //DO logic

    }

    return;
} 
```

# iphone - 在 imageview 中调整线条以适合我们的头部

> ID：15402377
> 
> 赞同：10
> 
> 时间：2013-03-14T06:10:30.950
> 
> 标签：iphone, ios, uiimageview, uibezierpath, bezier

我正在开发一个与 HairTryOn 相同的应用程序，所有事情都已完成。但问题显示在下图中。我想根据图像中的显示使用蓝线根据客户面部设置发型。我使用了以下代码

```
 testVw = [[UIView alloc]initWithFrame:CGRectMake(100,100, 100, 100)];
    testVw.backgroundColor = [UIColor clearColor];
    [self.view addSubview:testVw];    

    resizeVw = [[UIImageView    alloc]initWithFrame:CGRectMake(testVw.frame.size.width-25, testVw.frame.size.height-25, 25, 25)];
    resizeVw.backgroundColor = [UIColor clearColor];
    resizeVw.userInteractionEnabled = YES;
    resizeVw.image = [UIImage imageNamed:@"button_02.png" ];

    [testVw addSubview:resizeVw];

    UIPanGestureRecognizer* panResizeGesture = [[UIPanGestureRecognizer alloc] 
    initWithTarget:self action:@selector(resizeTranslate:)];

    [testVw addGestureRecognizer:panResizeGesture]; 
```

`resizeTranslate:`方法：

```
-(void)resizeTranslate:(UIPanGestureRecognizer *)recognizer
{
        if ([recognizer state]== UIGestureRecognizerStateBegan) 
        {
            prevPoint = [recognizer locationInView:testVw.superview];
            [testVw setNeedsDisplay];
        }
        else if ([recognizer state] == UIGestureRecognizerStateChanged)
        {
            if (testVw.bounds.size.width < 20)
            {

                testVw.bounds = CGRectMake(testVw.bounds.origin.x, testVw.bounds.origin.y, 20,testVw.bounds.size.height);
                imgvw.frame = CGRectMake(12, 12, testVw.bounds.size.width-24, testVw.bounds.size.height-27);
                resizeVw.frame =CGRectMake(testVw.bounds.size.width-25, testVw.bounds.size.height-25, 25, 25);
                rotateVw.frame = CGRectMake(0, testVw.bounds.size.height-25, 25, 25);
                closeVw.frame = CGRectMake(0, 0, 25, 25);            
            }

            if(testVw.bounds.size.height < 20)
            {
                testVw.bounds = CGRectMake(testVw.bounds.origin.x, testVw.bounds.origin.y, testVw.bounds.size.width, 20);
                imgvw.frame = CGRectMake(12, 12, testVw.bounds.size.width-24, testVw.bounds.size.height-27);
                resizeVw.frame =CGRectMake(testVw.bounds.size.width-25, testVw.bounds.size.height-25, 25, 25);
                rotateVw.frame = CGRectMake(0, testVw.bounds.size.height-25, 25, 25);
                closeVw.frame = CGRectMake(0, 0, 25, 25);
            }

            CGPoint point = [recognizer locationInView:testVw.superview];
            float wChange = 0.0, hChange = 0.0;

            wChange = (point.x - prevPoint.x); //Slow down increment
            hChange = (point.y - prevPoint.y); //Slow down increment 

            testVw.bounds = CGRectMake(testVw.bounds.origin.x, testVw.bounds.origin.y, testVw.bounds.size.width + (wChange), testVw.bounds.size.height + (hChange));
            imgvw.frame = CGRectMake(12, 12, testVw.bounds.size.width-24, testVw.bounds.size.height-27);

            resizeVw.frame =CGRectMake(testVw.bounds.size.width-25, testVw.bounds.size.height-25, 25, 25);
            rotateVw.frame = CGRectMake(0, testVw.bounds.size.height-25, 25, 25);
            closeVw.frame = CGRectMake(0, 0, 25, 25);

            prevPoint = [recognizer locationInView:testVw.superview];

            [testVw setNeedsDisplay];
    }
    else if ([recognizer state] == UIGestureRecognizerStateEnded)
    {
        prevPoint = [recognizer locationInView:testVw.superview];
        [testVw setNeedsDisplay];
    }
} 
```

此代码调整完整视图的大小。但我只想调整那些用手指移动的部分。 ![在此处输入图像描述](../Images/c35ae5f968a59a3e0cb354a67a782676.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:52:05.983

我看不出你的原语是如何构造的。但是您需要根据触摸区域对点集进行分区，然后根据需要进行缩放。如果您将线条转换为贝塞尔曲线，则操作曲线会更容易，因为您无需对形状进行大量调整，只需稍作修改即可。

# node.js - 节点 js 在 VPS 机器上给出“RangeError：超出最大调用堆栈大小”

> ID：15402382
> 
> 赞同：3
> 
> 时间：2013-03-14T06:10:51.457
> 
> 标签：node.js, phantomjs

我正在使用 Phantom JS 加载第三方 URL。然后有一个带有“phantom”模块的 node+express 服务器，它从 Phantom JS 返回 html。

该代码在我的 mac 中运行完美，但是当我尝试在 VPS 中运行它时，节点给出了

> RangeError：超出最大调用堆栈大小

```
function scrape(url, func){

var phantom = require('phantom');

phantom.create('--load-images=no', function(ph){

    return ph.createPage(function(page){
        page.set('settings.loadImages', false) ;
        return page.open(url, function(status){
            //page.injectJs('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', function() {
                return page.evaluate((function(){

                    var scripts = document.getElementsByTagName('script'),
                        links   = document.getElementsByTagName('link'),
                        images  = document.getElementsByTagName('img'),
                        objects = document.getElementsByTagName('object');

                    for(i in objects){                      
                        if((obj = objects[i]) && obj.data){
                            if(obj.getAttribute('data') != obj.data){
                                obj.setAttribute('data', obj.data);

                                var params = obj.getElementsByTagName('param');
                                for(var j in params){
                                    if((par = params[j]) && par.value){

                                        console.log(par.name);

                                        if(par.getAttribute('value') != par.value){
                                            par.setAttribute('value', par.value);
                                        }

                                        if(par.name == "allowscriptaccess" ){
                                            par.setAttribute('value', "always");
                                            par.value = "always";
                                        }

                                    }
                                }
                            }
                        }                               
                    }                           

                    for(i in scripts){                      
                        if((script = scripts[i]) && script.src){
                            if(script.getAttribute('src') != script.src){
                                script.setAttribute('src', script.src);
                            }
                        }                               
                    }

                    for(i in links){
                        if((link = links[i]) && link.href ){
                            if(link.getAttribute('href') != link.href){
                                link.setAttribute('href', link.href);
                            }
                        }
                    }

                    for(i in images){
                        if((image = images[i]) && image.src){
                            if(image.getAttribute('src') != image.src){
                                image.setAttribute('src', image.src);
                            }
                        }                               
                    }

                    var baseTag = document.getElementsByTagName('base');

                    if(baseTag.length == 0){
                        var baseTag = '<base id="test" href="'+ document.domain +'" />';
                        var head = document.getElementsByTagName('head');

                        head[0].innerHTML = baseTag + head[0].innerHTML;
                    }

                    return document.getElementsByTagName('html')[0].outerHTML;

                }), function(result){
                    ph.exit(); (func)(result); 
                });
            //});                   
        });
    });
});
}
exports.scrape = scrape; 
```

# node.js - Express + Consolidate + Hogan：`错误：找不到模块'hogan'`，代码直接来自整合文档

> ID：15402387
> 
> 赞同：0
> 
> 时间：2013-03-14T06:10:58.633
> 
> 标签：node.js, express, coffeescript, hogan.js

`Error: cannot find module 'hogan'`当我向此处在 Coffeescript 中实现的 node.js 服务器发送请求时，我得到了一个：

[https://gist.github.com/wmayner/306c89d7f8fbeed3f098](https://gist.github.com/wmayner/306c89d7f8fbeed3f098)

我已经安装了依赖项`hogan.js`、、[`consolidate`](https://github.com/visionmedia/consolidate.js)和`express`。

我[`consolidate`](https://github.com/visionmedia/consolidate.js)几乎完全复制了 的文档（在下面复制）中的示例代码，所以我很难看到这个错误来自哪里。看起来它应该工作。

从[`consolidate`文档](https://github.com/visionmedia/consolidate.js)：

```
var express = require('express')
  , cons = require('consolidate')
  , app = express();

// assign the swig engine to .html files
app.engine('html', cons.swig);

// set .html as the default extension 
app.set('view engine', 'html');
app.set('views', __dirname + '/views'); 
```

我还尝试将 `hogan = require('hogan.js')' 声明为依赖项。

任何人都知道为什么会这样？

* * *

**注意：**上面的要点与`consolidate`文档的不同之处在于我将 设置`view engine`为`hogan`而不是`html`. 这是因为我宁愿使用而`.hogan`不是`.html`用于我的模板文件扩展名（我已经尝试过`.html`并且我得到了同样的错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:53:15.493

您的要点设置`hogan`为`view engine`，但这应该`html`与 Consolidate 文档中的一样：

```
// tell Express to use Consolidates 'hogan' renderer for .html templates
engines = require 'consolidate'
engine = 'hogan'
app.engine 'html', engines[engine]

// tell Express to use '.html' as extension to find views with .render()
app.set 'view engine', 'html' 
```

**编辑：**意识到也许您想`.hogan`用作模板文件的扩展名，您可以改用它：

```
app.engine 'hogan', engines[engine]
app.set 'view engine', 'hogan' 
```

# asp.net-mvc-3 - 如何在带有模型的 mvc3 剃须刀中使用 dropdownlistfor

> ID：15402388
> 
> 赞同：0
> 
> 时间：2013-03-14T06:11:01.490
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, html.dropdownlistfor

我想在我的视图中使用下面的属性和下拉框。我怎么能 ？我已经尝试了很多方法，但
请帮助

```
public IEnumerable<SelectListItem> Topic
{
    get
    {
        return  new[]
        {
            new SelectListItem { Value = "1", Text = "Science", Selected=true },
            new SelectListItem { Value = "2", Text = "History" },
            new SelectListItem { Value = "3", Text = "Physics" },
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:54:34.303

您尚未添加视图代码。

基本上你需要`@model` 像这样在你的视图中添加一个：

```
@model MySampleApplication.Models.ModelName 
```

然后在您看来，您应该像这样访问：

```
@Html.DropdownListFor(m=>m.Topic, Model.Topic) 
```

来自 Scott Allen[的带有 ASP.NET MVC 的 DropDownListFor](http://odetocode.com/blogs/scott/archive/2013/03/11/dropdownlistfor-with-asp-net-mvc.aspx)

希望能帮助到你

* * *

**编辑**

假设您有这样的模型类：

```
public class MyModel
{
public IEnumerable<SelectListItem> Topic
{
    get
    {
        return  new[]
        {
            new SelectListItem { Value = "1", Text = "Science", Selected=true },
            new SelectListItem { Value = "2", Text = "History" },
            new SelectListItem { Value = "3", Text = "Physics" },
        };
    }
}
} 
```

试试这样：

```
public ActionResult Index() 
{
   MyModel model=new MyModel();
   return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:56:11.463

*试试这个*

**模型**

```
public SelectList Topic
            {
                get
                {
                    return new SelectList(
                      new List<SelectListItem> {
                      new SelectListItem { Value = "1", Text = "Science", Selected = true },
                      new SelectListItem { Value = "2", Text = "History" },
                      new SelectListItem { Value = "3", Text = "Physics" }
                    },"Value","Text"
                    );
                }
            }

public int selectedType {get;set;} 
```

**看法**

```
@Html.DropDownListFor(model => model.selectedType , Model.Topic) 
```

# c - Windows 需要相同的时间来执行内联和非内联函数。为什么？

> ID：15402392
> 
> 赞同：3
> 
> 时间：2013-03-14T06:11:29.907
> 
> 标签：c

我编写了一个自定义 C 代码，其中包含 main 和另一个由 main 调用的函数。我多次执行此功能（〜100万）。在一个代码中，我将此函数声明为 __inline，而在另一个代码中，我将其声明为 __declspec(noinline)。我使用 WinDBG 监视了反汇编，发现后者像普通函数调用一样使用 push pop 和分支，而前者没有使用此类指令并正确内联函数。然而他们两人的时间却完全一样。以下是代码：（在 A9 cortex CPU (Tegra 3) 上执行此代码）

```
__inline int multifunc(int a, int b);

int main(int argc, char **argv) {

    unsigned long int timeBefore, i;
    unsigned long int timeAfter;
    unsigned int a[11500], j, k, l;
    double elapsed;
    timeBefore = GetTickCount();
    printf("\n%ld", timeBefore); 

    for(l=1; l<300;l++)
    {
for(i=0; i<11500; i++)
{
    j = i+l;
    k=1;
    a[i] = multifunc(j, k);
}

    }
printf("\n%ld", timeBefore);
    timeAfter = GetTickCount();

    printf("\n%ld", timeAfter);

    return -1;
}

__inline int multifunc(int a, int b)
{
    int d;
    d = a+b;
printf("%d", d);
    return d;
} 
```

谁能解释我为什么？我为第二次测试所做的只是将 __inline 更改为 __declspec(noinline)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:19:46.123

`printf()`通话费用非常昂贵。函数调用时间与执行所需的时间相比相形见绌`printf()`。

## 实证检验

`printf()`比函数调用慢多少？你不会得到相同的结果。我正在使用 Linux、X11 和 xterm。

## 10 ^(9 次)函​​数调用

```
__attribute__((noinline))
static int function(int x)
{
    return x;
}
int main(int argc, char *argv[])
{
    int i, a = 0;
    for (i = 0; i < 1000000000; i++)
        a += function(i);
    return a;
} 
```

## 10 ⁵ `printf()`

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    int i;
    for (i = 0; i < 100000; i++)
        printf("%d\n", i);
    return 0;
} 
```

## 结果

我系统上的挂钟时间显示该`printf()`程序花费的时间是带有函数调用的程序的 7.6 倍，这意味着该程序花费的时间是函数调用`printf()`的 76,000 倍。将内联决策留给您的编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:19:52.720

您的函数包括一个 printf。打印到控制台比调用单个函数慢几个数量级，所以不管它是否内联，大部分时间都花在了 printf 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:20:18.843

只是猜测，您正在内联一个带有 a 的函数`printf`。**由于 printf 指令远不止是几个 push**，因此内联的好处几乎是 0。请注意，您标记`Windows`的时间是相同的：我想 Linux 上也会发生同样的情况。

# c - C 中的文件 I/O 管理

> ID：15402393
> 
> 赞同：3
> 
> 时间：2013-03-14T06:11:35.817
> 
> 标签：c, file-io

我的第一篇文章 :)，我从 C 语言开始，作为进入编程领域的基本学习步骤。我正在使用以下代码从文本文件中读取字符串，使用该字符串名称创建目录并打开一个文件以写入该创建的目录。但我无法在制作的目录中创建文件，这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <direct.h>
#include <string.h>

int main()
{
    char file_name[25], cwd[100];
    FILE *fp, *op;

    fp = fopen("myfile.txt", "r");

    if (fp == NULL)
    {
        perror("Error while opening the file.\n");
        exit(EXIT_FAILURE);
    }

    fgets(file_name, 25, fp);

    _mkdir(file_name);

       if (_getcwd(cwd,sizeof(cwd)) != 0) 
    {
      fprintf(stdout, "Your dir name: %s\\%s\n", cwd,file_name);

        op = fopen("cwd\\file_name\\mynewfile.txt","w");
        fclose(op);
    }
    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:19:20.787

您需要在打开之前将文件名（带有路径）存储在 c 字符串中。你打开的是`cwd\file_name\mynewfile.txt`. 我怀疑您的目录名为`cwd`. 样本可能是：

```
char file_path[150];
sprintf(file_path, "%s\\%s\\mynewfile.txt", cwd, file_name);
op = fopen(file_path,"w"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:31:11.360

采用

```
#include <sys/stat.h>
#include <sys/types.h> 
```

代替

```
#include <direct.h> 
```

并修改

```
op = fopen("cwd\\file_name\\mynewfile.txt","w”); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:25:47.953

我看到您正在使用返回值。这对初学者来说是一个好的开始。您可以通过包含“errno.h”来优化您的错误消息。而不是打印您自己的错误消息调用

```
printf("%s", strerror(errno)); 
```

这样你会得到更精确的错误信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T06:19:22.360

`op = fopen("cwd\\file_name\\mynewfile.txt","w”);`

您实际上是在将字符串文字“cwd”和“file_name”作为文件路径的一部分传递，而我认为您实际上是要将具有这些名称的变量的内容放在那里。您可能必须为路径拼凑一个字符串。尝试查看 strcat()

[http://www.cplusplus.com/reference/cstring/strcat/](http://www.cplusplus.com/reference/cstring/strcat/)

# javascript - jQuery Autocomplete，将多个自动完成实例绑定到同一个文本输入

> ID：15402395
> 
> 赞同：0
> 
> 时间：2013-03-14T06:11:37.470
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-autocomplete

我正在尝试`jQuery autocomplete`使用单个文本字段控制两个搜索。

我可以`jQuery autocomplete`使用以下代码添加到输入：

```
 $("search-input").bind("autocompleteselect", jQuery.proxy(function (event, ui) {
      //List element select callback
    }, this)).autocomplete({
        appendTo:"#result-list-1",
        source: function (request, response) {
            $.ajax({
                url://some rest url,
                dataType: "jsonp",          
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                },    
                success: function (data) {
                       alert("fb sucess"); 
                    response($.map(data.data, function (item) {
                     //data mapping instructions
                    }));
                },
            });
        }
    }).data("autocomplete")._renderItem = jQuery.proxy(function (ul, item) {
        return $("<li></li>").data("item.autocomplete", item).append("some html to append").appendTo(ul);
    })
} 
```

当我再次尝试将其`$("search-input")`与自动完成功能的其他参数一起应用时，它可以工作，但会撤消原始功能。

任何人都可以建议一种方法来设置第二个自动完成而不撤消第一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:30:26.607

```
// getter
var oldsource = $( ".selector" ).autocomplete( "option", "source" );

var newsource = [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" ]; //A new json object

//Merge it with old source
$.merge(oldsource, newsource);

// setter
$( ".selector" ).autocomplete( "option", "source", oldsource); 
```

# javascript - 只为 kendotreeview 选择两个复选框

> ID：15402405
> 
> 赞同：0
> 
> 时间：2013-03-14T06:12:00.740
> 
> 标签：javascript, kendo-ui

我的应用程序中有一个带有复选框的树视图，有一个问题是通过页面加载仅选择两个复选框，剩余的必须处于禁用状态。（即，如果取消选择剩余的一个复选框处于启用状态）。

[我的小提琴：](http://jsfiddle.net/RHh67/47/)

```
 Code: 
           var tree= $("#treeview").kendoTreeView({
            checkboxes: {
                checkChildren: true
            },

            dataSource: [{
                id: 1, text: "My Project", expanded: true, spriteCssClass: "rootfolder", items: [
                    {
                        id: 2, text: "OrderID", expanded: true, spriteCssClass: "folder", items: [
                            { id: 3, text: "a"  },
                            { id: 4, text: "b"  },
                            { id: 5, text: "c" },
                            { id: 6, text: "d" },
                            { id: 7, text: "e" }
                        ]
                    }

                ]
            }]
        }).data("kendoTreeView");

          tree.dataSource.bind("change", function (e) { 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T06:27:03.083

尝试类似的东西

```
function updateChks(){
    var checkboxes = $('#treeview input:checkbox');
    var selected = checkboxes.filter(':checked');
    checkboxes.not(selected).prop('disabled', selected.length > 1)
}

$('#treeview').on('click', 'input:checkbox', updateChks);

updateChks(); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/MM2BE/1/)

# android - 即使我的程序多次绘制包含在同一块中的线条，我也不能在 android 中多次绘制位图

> ID：15402408
> 
> 赞同：0
> 
> 时间：2013-03-14T06:12:24.370
> 
> 标签：android

即使我的程序多次绘制包含在同一块中的线条，我也不能在 android 中多次绘制位图。这是我的代码：

```
Bitmap cache,backup;
cache = Bitmap.createBitmap(480,800,paint);

switch(event.getAction()){

case MotionEvent.ACTION_DOWN:

backup = Bitmap.createBitmap(cache);
return true;

case MotionEvent.ACTION_MOVE:
canvas.drawLine(downX,downY,moveX,moveY,paint);
canvas.drawBitmap(backup,0,0,paint);

return true;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:18:34.440

在你的活动课上

```
public class MyActivity extends Activity
{
protected void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState); 
MyView mv= new MyView(this);
setContentView(mv);
} 
```

}

```
 public class MyView extends View {

 private Bitmap  mBitmap;
 private Canvas  mCanvas;
  private Paint   mBitmapPaint;
 private Paint   mBitmapPaint;
 Context mcontext;

 public MyView(Context c) {
    super(c);
    mcontext=c;
    mBitmapPaint = new Paint();
    mBitmapPaint.setColor(Color.RED);//paint color set to red
}
// is called when your view is first assigned a size, and again if the size of your view changes for any reason.
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);
}
//called everytime view is refreshed.
@Override
protected void onDraw(Canvas canvas) {
   //do your draw here. draw lines and bitmaps.

            Display display = ( (Activity) mcontext).getWindowManager().getDefaultDisplay();  
        float w = display.getWidth(); 
        float h = display.getHeight();
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
            //draw lines as border for the screen 
            canvas.drawLine(0, 0, w, 0,mBitmapPaint);
        canvas.drawLine(0, 0, 0, h,mBitmapPaint);
        canvas.drawLine(w,h,w,0,mBitmapPaint);
        canvas.drawLine(w, h, 0,h , mBitmapPaint);
}
  @Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();//refresh 
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();//refresh 
            break;
        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();//refresh view
            break;
    }
    return true;
}
   private void touch_start(float x, float y) {
   //do want should be done on touch start
}
private void touch_move(float x, float y) {
  //do want should be done on touch move
}
private void touch_up() {
    //do want should be done on touch up
}
} 
```

根据您的需要修改上述内容。更多信息可在 androdi 开发人员站点中找到。[http://developer.android.com/training/custom-views/custom-drawing.html](http://developer.android.com/training/custom-views/custom-drawing.html)

# java - SOAP 调用中的 java.net.SocketException

> ID：15402409
> 
> 赞同：3
> 
> 时间：2013-03-14T06:12:29.580
> 
> 标签：java, exception, soap

我正在寻找专家对这个问题的意见。

我有一个通过 SOAP API 与远程系统连接的 java 应用程序。我们在多台笔记本电脑上运行相同的应用程序（客户端），并根据需要访问各种环境（开发、测试和生产）。一切都很好，除了一台笔记本电脑的生产请求（仅）间歇性失败。我得到的例外如下：

```
Mar 14, 2013 10:53:31 AM org.apache.cxf.phase.PhaseInterceptorChain doIntercept
INFO: Interceptor has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Connection reset
    at org.apache.cxf.interceptor.AbstractOutDatabindingInterceptor.writeParts(AbstractOutDatabindingInterceptor.java:95)
    at org.apache.cxf.interceptor.BareOutInterceptor.handleMessage(BareOutInterceptor.java:68)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:220)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:466)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:299)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:251)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)
    at $Proxy49.fareMasterPricerTravelBoardSearch(Unknown Source)
    at com.ace.amadeus.service.impl.MasterPriceSearchServiceImpl.fareMasterTravelBoardSearch(MasterPriceSearchServiceImpl.java:309)
    at com.ace.amadeus.controller.MasterPricerController.onSubmit(MasterPricerController.java:321)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.ctc.wstx.exc.WstxIOException: Connection reset
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:313)
    at org.apache.cxf.interceptor.AbstractOutDatabindingInterceptor.writeParts(AbstractOutDatabindingInterceptor.java:93)
    ... 35 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.security.ssl.InputRecord.readFully(InputRecord.java:312)
    at sun.security.ssl.InputRecord.read(InputRecord.java:350)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:861)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1262)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1289)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1273)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:523)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1087)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleHeadersTrustCaching(HTTPConduit.java:1836)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.onFirstWrite(HTTPConduit.java:1794)
    at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:42)
    at org.apache.cxf.io.AbstractThresholdOutputStream.write(AbstractThresholdOutputStream.java:69)
    at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:96)
    at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:311)
    ... 36 more

javax.xml.ws.soap.SOAPFaultException: Connection reset
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:145)
    at $Proxy49.fareMasterPricerTravelBoardSearch(Unknown Source)
    at com.ace.amadeus.service.impl.MasterPriceSearchServiceImpl.fareMasterTravelBoardSearch(MasterPriceSearchServiceImpl.java:309)
    at com.ace.amadeus.controller.MasterPricerController.onSubmit(MasterPricerController.java:321)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.cxf.interceptor.Fault: Connection reset
    at org.apache.cxf.interceptor.AbstractOutDatabindingInterceptor.writeParts(AbstractOutDatabindingInterceptor.java:95)
    at org.apache.cxf.interceptor.BareOutInterceptor.handleMessage(BareOutInterceptor.java:68)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:220)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:466)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:299)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:251)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)
    ... 28 more
Caused by: com.ctc.wstx.exc.WstxIOException: Connection reset
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:313)
    at org.apache.cxf.interceptor.AbstractOutDatabindingInterceptor.writeParts(AbstractOutDatabindingInterceptor.java:93)
    ... 35 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.security.ssl.InputRecord.readFully(InputRecord.java:312)
    at sun.security.ssl.InputRecord.read(InputRecord.java:350)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:861)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1262)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1289)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1273)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:523)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1087)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleHeadersTrustCaching(HTTPConduit.java:1836)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.onFirstWrite(HTTPConduit.java:1794)
    at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:42)
    at org.apache.cxf.io.AbstractThresholdOutputStream.write(AbstractThresholdOutputStream.java:69)
    at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:96)
    at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:311)
    ... 36 more 
```

你知道可能发生了什么吗？提醒您，这种情况仅发生在许多运行相同代码和配置的笔记本电脑中的一台上，仅在生产环境中（它在所有其他环境中运行良好。从来没有任何问题），而且只是有时。

还有一件事：如果我在同一台笔记本电脑上使用 SOAPUI 拨打电话，也不例外。

非常感谢您的时间和回应。

谢谢你。

**编辑**

此外，有一条消息仅在这台特定的笔记本电脑上不断弹出（在 Eclipse 日志中）。我不确定这可能是一个原因：

```
Mar 14, 2013 12:19:30 PM org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver handleHttpRequestMethodNotSupported
WARNING: Request method 'HEAD' not supported 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T15:36:55.963

听起来不太可能，但这是因为 JDK 版本。我们将 JDK 版本从 1.7 降级到 1.6，它运行完美。

原来，我们用了整整一个月的时间才发现这是版本不兼容：o

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:58:22.477

根据给出的信息，根本错误是：

> 不支持请求方法“HEAD”

你可以告诉你的控制器支持`HEAD`使用`setSupportedMethods(String[] supportedMethodsArray)`.

参考： http: [//forum.springsource.org/showthread.php?11794-Request-method-HEAD-not-supported-how-to-avoid-this-error](http://forum.springsource.org/showthread.php?11794-Request-method-HEAD-not-supported-how-to-avoid-this-error)

# c++ - 无效的用户定义转换

> ID：15402411
> 
> 赞同：2
> 
> 时间：2013-03-14T06:12:31.570
> 
> 标签：c++

请查看此程序及其产生的错误：

```
#include <iostream>
using namespace std;
    class A
    {
    public:

        virtual void f(){}
        int i;
    };

    class B : public A
    {
    public:
        B(int i_){i = i_;} //needed
        B(){}              //needed
        void f(){}
    };

    int main()
    {

        //these two lines are fixed(needed)
        B b;
        A & a = b;

        //Assignment 1 works
        B b1(2);
        b = b1;

        //But Assignment 2  doesn't works
        B b2();
        b = b2; // <-- error
    } 
```

编译时，我收到以下错误：

```
$ g++ inher2.cpp 
inher2.cpp: In function ‘int main()’:
inher2.cpp:32:10: error: invalid user-defined conversion from ‘B()’ to ‘const B&’ [-fpermissive]
inher2.cpp:14:6: note: candidate is: B::B(int) <near match>
inher2.cpp:14:6: note:   no known conversion for argument 1 from ‘B()’ to ‘int’
inher2.cpp:32:10: error: invalid conversion from ‘B (*)()’ to ‘int’ [-fpermissive]
inher2.cpp:14:6: error:   initializing argument 1 of ‘B::B(int)’ [-fpermissive] 
```

你能帮我找出问题吗？谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T06:18:04.150

你的“B b2();” 是 C++ 的“***令人头疼的解析***”问题（[参见此处](http://en.wikipedia.org/wiki/Most_vexing_parse)——“***最令人头疼的解析***”进一步使用了模棱两可的语法）。

它看起来 C++ 编译器您正在声明一个函数（预声明）。

一探究竟：

```
int foo(); //A function named 'foo' that takes zero parameters and returns an int.

B b2(); //A function named 'b2' that takes zero parameters and returns a 'B'. 
```

当您稍后执行以下操作时：

```
b = b2; 
```

看起来您正在尝试将函数 ( **b2** ) 分配给变量 ( **b** )。要调用具有零参数的构造函数，请在不带括号的情况下调用它，你会没事的：

```
B b2; 
```

有关更多信息，请参阅：

*   [理解“最令人头疼的解析”——为什么允许模棱两可的语法？](https://stackoverflow.com/questions/11535388/understanding-most-vexing-parse-why-allow-ambiguous-syntax)
*   [最令人头疼的解析：为什么不 A a(()); 工作？](https://stackoverflow.com/questions/1424510/most-vexing-parse-why-doesnt-a-a-work)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:17:37.717

```
B b2(); 
```

它是函数声明，**而不是**变量声明！

函数名`b2`不带参数，返回类型为 的对象`B`。

在 C++ 中搜索*令人烦恼的解析。*

# ios - 如何从 NSData 对象获取 JSON 对象数组

> ID：15402416
> 
> 赞同：19
> 
> 时间：2013-03-14T06:12:55.080
> 
> 标签：ios, objective-c, json, swift, nsdata

所以我使用了一个 HTTP GET 方法，它返回一个 JSON 对象数组，这些对象存储在 NSData 中。数组如下所示：

```
[{"created_at":"2013-03-09T04:55:21Z","data_type":"image","id":5354,"latitude":37.785834,"longitude":-122.406417,"name":"tempObject","privacy":"public","radius":1000.0,"updated_at":"2013-03-09T04:55:21Z","user_id":101},{"created_at":"2013-03-10T20:57:08Z","data_type":"image","id":5364,"latitude":37.785834,"longitude":-122.406417,"name":"tempObject","privacy":"public","radius":1000.0,"updated_at":"2013-03-10T20:57:08Z","user_id":101}] 
```

我将如何提取这些 JSON 对象并从 NSData 中遍历它们？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-14T06:18:33.597

如果您使用的是 iOS 5.0 及更高版本，您可以这样做：

目标-C：

```
NSError *error = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:myNSData options:kNilOptions error:&error];

if (error != nil) {
    NSLog(@"Error parsing JSON.");
}
else {
    NSLog(@"Array: %@", jsonArray);
} 
```

迅速：

```
do {
    let jsonArray = try JSONSerialization.jsonObject(with: myNSData, options:[])
    print("Array: \(jsonArray)")
}
catch {
    print("Error: \(error)")
} 
```

# java - Eclipse 自动完成视图变宽并阻塞了整个屏幕

> ID：15402417
> 
> 赞同：-4
> 
> 时间：2013-03-14T06:13:06.630
> 
> 标签：java, android, eclipse, autocomplete, editor

我正在使用具有自动完成功能的 eclipse Indigo 3.7.2 开发 Android 应用程序。我想我不小心按下了键盘上的一些组合键，使自动完成视图挡住了我的一半屏幕。谁能告诉我如何重置它的视图大小？谢谢！

![在此处输入图像描述](../Images/5defcb460948b67b7e0a4e1ed2cf95f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:35:38.673

Eclipse 可能会记住`workspace/.metadata`目录中内容辅助 UI 对话框的大小。

尝试编辑此文件：`<workspace_dir>/.metadata/.plugins/org.eclipse.jdt.ui/dialog_settings.xml`

查找如下所示的部分：

`<section name="completion_proposal_size"> </section>`

在我的工作区中，这里没有特殊设置，但您的工作区中可能有一些特殊设置。

# javascript - 创建一个href来调用函数“javascript”

> ID：15402424
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:13:27.473
> 
> 标签：javascript

我正在尝试使用 javascript 创建“a href”标签，但我不想将其用作网络链接，而是想用它来执行某些步骤！那我该怎么办？

```
 var a = document.createElement('a');
        a.attributes('href', 'function () { nn = 0 }' );// ?
        a.textContent = " " + pn.length + " ";
        document.getElementById("pagingN").appendChild(a);
        num[i] = num[i] + n; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:16:23.073

在这里使用属性没有多大好处。只需将功能分配给`onclick`属性。

```
var a = document.createElement('a');

a.onclick = function() { nn = 0; };
a.href = "#";
a.textContent = " " + pn.length + " ";

document.getElementById("pagingN").appendChild(a);
num[i] = num[i] + n; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:21:42.890

请试试 ：

a.attributes('href', 'javascript:function () { nn = 0 }' );// ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:26:44.160

```
<html>
<head>
</head>
<body>
    <div id="container"></div>
    <script>
    var a = document.createElement('a');
        a.setAttribute('href', 'javascript:hello()' );// ?
        a.textContent = "anchor";
        document.getElementById("container").appendChild(a);

    function hello(){
        alert("Hello World");
    }   
</script>
</body>
</html> 
```

只需在 href 值中添加“javascript:”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T06:30:52.630

您可以通过执行类似的操作来禁用锚标记的默认行为 -

```
a.onclick=function(e){
    e.preventDefault();
} 
```

注意：您可以使用一种非常方便的方法来添加事件 - addListener 但为了简单起见，我还是使用 onclick ！

# ios - 在类的 init 函数中初始化 NSArray

> ID：15402426
> 
> 赞同：1
> 
> 时间：2013-03-14T06:13:34.507
> 
> 标签：ios, memory-leaks

```
- (id) init
{
    if (self = [super init])
    {

        self.mdAudios = [NSMutableArray array];
        self.mdPhotos = [NSMutableArray array];
        self.mdVideos = [NSMutableArray array];
        self.mdVrs = [NSMutableArray array];
    }

    return self;
} 
```

Instruments 说我的自定义初始化函数正在泄漏内存，是吗？

# android - 可以使用什么编码将二进制数据发送到 PHP？

> ID：15402430
> 
> 赞同：1
> 
> 时间：2013-03-14T06:13:57.607
> 
> 标签：android, network-programming

我正在尝试将存储在 Android 手机上的一些二进制数据作为文件发送到用 PHP 创建的 Web 服务。

我已经尝试过使用`MultiPart`，`ValuePair`但没有运气..！

我还用 Java 创建了一个控制台应用程序，它从 Windows 上的静态位置读取二进制文件并使用相同的 PHP 服务，并且使用它可以正常工作`MultiPart`，下面是它的代码：

```
MultipartEntity mpEntity = new MultipartEntity();
ContentBody cbFile = new FileBody(file,"text/plain");      
mpEntity.addPart("qLog", new StringBody(readFileAsString(file.getAbsolutePath()),
        Charset.defaultcharset)));
mpEntity.addPart("fileName", new StringBody(fileName));
mpEntity.addPart("personid", new StringBody(userid)); 
```

功能`readFileAsString()`是：

```
private String readFileAsString(String filePath) throws IOException {
    StringBuffer fileData = new StringBuffer();
    BufferedReader reader = new BufferedReader(new FileReader(filePath));
    char[] buf = new char[1024];
    int numRead=0;
    while ((numRead=reader.read(buf)) != -1) {
        String readData = String.valueOf(buf, 0, numRead);
        fileData.append(readData);
    }
    reader.close();

    return fileData.toString();
} 
```

但是当我在 Android 上执行此操作时，它不会维护二进制值。我认为的原因是由于Android中的默认编码是UTF-8。

你能在这里帮忙吗？如何获取从 Android 发送到 PHP 服务的二进制数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:30:43.803

您可以使用[`InputStreamBody`](http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/content/InputStreamBody.html)代替`StringBody`：

```
MultipartEntity mpEntity = new MultipartEntity();
mpEntity.addPart("qLog", new InputStreamBody(new FileInputStream(file),
        file.getName());
mpEntity.addPart("fileName", new StringBody(fileName));
mpEntity.addPart("personid", new StringBody(userid)); 
```

* * *

*已编辑*

或者你可以使用[`FileBody`](http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/content/FileBody.html)更简洁。

# ruby-on-rails - 使用 axlsx 导出到公用文件夹

> ID：15402442
> 
> 赞同：10
> 
> 时间：2013-03-14T06:14:36.010
> 
> 标签：ruby-on-rails, axlsx

我正在使用 axlsx gem 来创建 excel 文件。我在我的项目主目录中将它们序列化为 xlsx 文件。但我希望在我的 rails 应用程序的公共文件夹中创建文件，或者用户可以直接下载而不将其保存在服务器中。我怎样才能做到这一点？？这是生成 xlsx 文件的控制器

```
def export_excel
    p = Axlsx::Package.new
    wb = p.workbook 
    wb.add_worksheet(:name => "Basic Worksheet") do |sheet|
    (1..10).each { |label| sheet.add_row [label, rand(24)+1] }
    sheet.add_chart(Axlsx::Bar3DChart, :start_at => "A14", :end_at => "F24") do |chart|
        chart.add_series :data => sheet["B1:B10"], :labels => sheet["A1:A10"], :title => sheet["A1"]
    end
  end
  p.serialize('charts.xlsx')    

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:20:40.787

```
p = Axlsx::Package.new
# ...
outstrio = StringIO.new
p.use_shared_strings = true # Otherwise strings don't display in iWork Numbers
outstrio.write(p.to_stream.read)
outstrio.string 
```

这将产生 xls 文件的文件内容。然后，您可以将`send_data`其提供给用户，也可以将其保存到磁盘上的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T03:10:03.710

迟到的答案：您也可以使用 axlsx_rails gem。它为 axlsx 添加了一个模板处理程序，使得生成和提供 xlsx 文件变得非常容易：

[https://github.com/straydogstudio/axlsx_rails](https://github.com/straydogstudio/axlsx_rails)

它允许您将所有 axlsx 代码放在视图中，并带有部分。如果你在 Rails 中做很多 xlsx，它很方便。

当然，序列化也可以正常工作，或者像@fearpi 提到的那样进行流式传输。

# python - 计算python字典中值的重复次数

> ID：15402446
> 
> 赞同：2
> 
> 时间：2013-03-14T06:15:11.183
> 
> 标签：python, django, dictionary

我有一本以下格式的字典。在这本词典中，存在不同类型的区域，但存在多次。我想从中生成另一个字典，其中将包含一个附加键“Count”，并且该键将包含重复区域（即“Full Run or Half Run or Semi Run”）的次数。

```
[
{'zip_zone': u'Full Run', 'zipcode': u'14042', 'longitude': -78.516154}, 
{'zip_zone': u'Full Run', 'zipcode': u'14101', 'longitude': -78.51734}, 
{'zip_zone': u'Full Run', 'zipcode': u'14706', 'longitude': -78.493761}, 
{'zip_zone': u'Half Run', 'zipcode': u'14709', 'longitude': -78.024817}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14711', 'longitude': -78.119974}, 
{'zip_zone': u'Full Run', 'zipcode': u'14714', 'longitude': -78.256921}, 
{'zip_zone': u'Half Run', 'zipcode': u'14715', 'longitude': -78.157392}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14717', 'longitude': -78.210567}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14719', 'longitude': -78.86951}, 
{'zip_zone': u'Half Run', 'zipcode': u'14727', 'longitude': -78.268103}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14731', 'longitude': -78.658909}, 
{'zip_zone': u'Half Run', 'zipcode': u'14735', 'longitude': -78.087607}, 
{'zip_zone': None, 'zipcode': u'14737', 'longitude': -78.431625}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14739', 'longitude': -78.139046}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14741', 'longitude': -78.5907}, 
{'zip_zone': u'Special Run', 'zipcode': u'14743', 'longitude': -78.4098}, 
{'zip_zone': u'Special Run', 'zipcode': u'14744', 'longitude': -78.167853}, 
{'zip_zone': u'Half Run', 'zipcode': u'14748', 'longitude': -78.639987}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14753', 'longitude': -78.640416}, 
{'zip_zone': u'Special Run', 'zipcode': u'14754', 'longitude': -78.18395}, 
{'zip_zone': u'Special Run', 'zipcode': u'14755', 'longitude': -78.800866}, 
{'zip_zone': u'Half Run', 'zipcode': u'14760', 'longitude': -78.426015}, 
] 
```

输出字典应该看起来像

```
[
{'zip_zone': u'Full Run', 'zipcode': u'14042', 'longitude': -78.516154, 'count': 4}, 
{'zip_zone': u'Full Run', 'zipcode': u'14101', 'longitude': -78.51734, 'count': 4}, 
{'zip_zone': u'Full Run', 'zipcode': u'14706', 'longitude': -78.493761, 'count': 4}, 
{'zip_zone': u'Half Run', 'zipcode': u'14709', 'longitude': -78.024817, 'count': 6}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14711', 'longitude': -78.119974, 'count': 7}, 
{'zip_zone': u'Full Run', 'zipcode': u'14714', 'longitude': -78.256921, 'count': 4}, 
{'zip_zone': u'Half Run', 'zipcode': u'14715', 'longitude': -78.157392, 'count': 6}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14717', 'longitude': -78.210567, 'count': 7}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14719', 'longitude': -78.86951, 'count': 7}, 
{'zip_zone': u'Half Run', 'zipcode': u'14727', 'longitude': -78.268103, 'count': 6}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14731', 'longitude': -78.658909, 'count': 7}, 
{'zip_zone': u'Half Run', 'zipcode': u'14735', 'longitude': -78.087607, 'count': 6}, 
{'zip_zone': None, 'zipcode': u'14737', 'longitude': -78.431625, 'count': 0}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14739', 'longitude': -78.139046, 'count': 7}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14741', 'longitude': -78.5907, 'count': 7}, 
{'zip_zone': u'Special Run', 'zipcode': u'14743', 'longitude': -78.4098, 'count': 4}, 
{'zip_zone': u'Special Run', 'zipcode': u'14744', 'longitude': -78.167853, 'count': 4}, 
{'zip_zone': u'Half Run', 'zipcode': u'14748', 'longitude': -78.639987, 'count': 6}, 
{'zip_zone': u'Semi Run', 'zipcode': u'14753', 'longitude': -78.640416, 'count': 7}, 
{'zip_zone': u'Special Run', 'zipcode': u'14754', 'longitude': -78.18395, 'count': 4}, 
{'zip_zone': u'Special Run', 'zipcode': u'14755', 'longitude': -78.800866, 'count': 4}, 
{'zip_zone': u'Half Run', 'zipcode': u'14760', 'longitude': -78.426015, 'count': 6}, 
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T06:35:24.177

这是 Python 集合模块中 Counter 类的一个很好的用例。

```
import collections

# u is your input list of dictionaries, entries in u will be modified in place

c = collections.Counter(e["zip_zone"] for e in u)
for e in u:
    e["count"] = c[e["zip_zone"]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:33:40.283

也许不是很漂亮，但您可以尝试使用[defaultdict](http://docs.python.org/2/library/collections.html?highlight=collections#collections.defaultdict)：

```
from collections import defaultdict

output = defaultdict(list)

for line in origData:
    output[line['zip_zone']].append(line)

for line in origData:
    line['Count'] = len(output[line['zip_zone']])

print origData 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:34:53.000

我不太确定您的问题，但以下代码可能会按照问题中的表达方式执行您想要的操作：

```
input = [
{'zip_zone': u'Full Run', 'zipcode': u'14042', 'longitude': -78.516154},
{'zip_zone': u'Full Run', 'zipcode': u'14101', 'longitude': -78.51734},
{'zip_zone': u'Full Run', 'zipcode': u'14706', 'longitude': -78.493761},
{'zip_zone': u'Half Run', 'zipcode': u'14709', 'longitude': -78.024817},
{'zip_zone': u'Semi Run', 'zipcode': u'14711', 'longitude': -78.119974},
{'zip_zone': u'Full Run', 'zipcode': u'14714', 'longitude': -78.256921},
{'zip_zone': u'Half Run', 'zipcode': u'14715', 'longitude': -78.157392},
{'zip_zone': u'Semi Run', 'zipcode': u'14717', 'longitude': -78.210567},
{'zip_zone': u'Semi Run', 'zipcode': u'14719', 'longitude': -78.86951},
{'zip_zone': u'Half Run', 'zipcode': u'14727', 'longitude': -78.268103},
{'zip_zone': u'Semi Run', 'zipcode': u'14731', 'longitude': -78.658909},
{'zip_zone': u'Half Run', 'zipcode': u'14735', 'longitude': -78.087607},
{'zip_zone': None, 'zipcode': u'14737', 'longitude': -78.431625},
{'zip_zone': u'Semi Run', 'zipcode': u'14739', 'longitude': -78.139046},
{'zip_zone': u'Semi Run', 'zipcode': u'14741', 'longitude': -78.5907},
{'zip_zone': u'Special Run', 'zipcode': u'14743', 'longitude': -78.4098},
{'zip_zone': u'Special Run', 'zipcode': u'14744', 'longitude': -78.167853},
{'zip_zone': u'Half Run', 'zipcode': u'14748', 'longitude': -78.639987},
{'zip_zone': u'Semi Run', 'zipcode': u'14753', 'longitude': -78.640416},
{'zip_zone': u'Special Run', 'zipcode': u'14754', 'longitude': -78.18395},
{'zip_zone': u'Special Run', 'zipcode': u'14755', 'longitude': -78.800866},
{'zip_zone': u'Half Run', 'zipcode': u'14760', 'longitude': -78.426015},
];
output=[];
zipZoneCnt={};
for item in input:
        if item['zip_zone'] in zipZoneCnt.keys():
                zipZoneCnt[item['zip_zone']]+=1;
        else:
                zipZoneCnt[item['zip_zone']]=1;
zipZoneCnt[None]=0;
for item in input:
        item['count']=zipZoneCnt[item['zip_zone']];
print zipZoneCnt;
for item in input:
        print item; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T06:37:38.087

`collections.Counter`救援。

```
from collections import Counter
a = [
 {'zip_zone': u'Full Run', 'zipcode': u'14042', 'longitude': -78.516154}, 
 {'zip_zone': u'Full Run', 'zipcode': u'14101', 'longitude': -78.51734}, 
 {'zip_zone': u'Full Run', 'zipcode': u'14706', 'longitude': -78.493761}, 
 {'zip_zone': u'Half Run', 'zipcode': u'14709', 'longitude': -78.024817}, 
 {'zip_zone': u'Semi Run', 'zipcode': u'14711', 'longitude': -78.119974},
]

# to obtain the counts:
c = Counter( x['zip_zone'] for x in a )
c
= Counter({u'Full Run': 3, u'Semi Run': 1, u'Half Run': 1})

# to update original structure in place:
for x in a:
     x['count'] = c[x['zip_zone']]

a

[{'count': 3,
  'longitude': -78.516154,
  'zip_zone': u'Full Run',
  'zipcode': u'14042'},
 {'count': 3,
  'longitude': -78.51734,
  'zip_zone': u'Full Run',
  'zipcode': u'14101'},
 {'count': 3,
  'longitude': -78.493761,
  'zip_zone': u'Full Run',
  'zipcode': u'14706'},
 {'count': 1,
  'longitude': -78.024817,
  'zip_zone': u'Half Run',
  'zipcode': u'14709'},
 {'count': 1,
  'longitude': -78.119974,
  'zip_zone': u'Semi Run',
  'zipcode': u'14711'}] 
```

# ios - 在 Phonegap 2.5 中加载外部 URL 时出错

> ID：15402447
> 
> 赞同：5
> 
> 时间：2013-03-14T06:15:13.483
> 
> 标签：ios, cordova, uiwebview

我从头开始创建了一个新的 Phonegap 2.5 项目，并且我一直在尝试在其中加载一个外部 URL，但是在加载实际 URL 之前，我一直在启动时弹出输入框。我首先得到一个带有网站 URL 的弹出窗口，然后在输入框中显示“DeviceInfo”、“Device652321624”。如果我单击取消，它会在加载网站之前再弹出 2 次。在网站本身上，它会加载一些相对 URL，但其他会导致整个页面刷新并再次弹出输入框。

我通过设置来设置URL `<content src="http://phonegap.example.com" />`，这只是一个带有Javascript的常规网站。我什至尝试注释掉所有 Phonegap 特定代码（不再`ondeviceready`调用），但它仍然会导致问题。`http://www.google.com`为我加载，所以我不确定还有什么要检查的。它适用于我开发的 Android 版本。

如果有帮助，我还在 XCode 日志中看到了这条消息：`Resetting plugins due to page load.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:29:02.673

我今天遇到了完全相同的问题。我通过检查cordova.js文件的包含来修复它（这个js是在您使用`create`命令创建项目时生成的。（在重命名的cordova项目版本中称为cordova.js。可能在phonegap中的phonegap.js？）

无论如何，我的包括：

```
<script type="text/javascript" src="js/cordova.js"></script> 
```

而 je js 文件位于项目根目录中：

我把它改成

```
<script type="text/javascript" src="cordova.js"></script> 
```

现在一切都很好。

此外，`create`Android 的“”命令会生成不同的 js 文件。确保使用为 ios 生成的新的。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T22:18:25.247

问题是您使用的是android 的cordova.js 而不是ios 的cordova.js。只要确保您使用的是正确的。

# wordpress - Fishpig Wordpress Magento - http://example.com/blog 解析为 www.example.com 而不是 www.example.com/blog

> ID：15402449
> 
> 赞同：0
> 
> 时间：2013-03-14T06:15:36.113
> 
> 标签：wordpress, .htaccess, magento

我在生产服务器上有一个可用的 Fishpig Wordpress Magento 实例。

所有绿色勾号显示它已成功配置并且在访问时

```
http://www.example.com/blog 
```

有用。但是，当我尝试并访问时

```
http://example.com/blog 
```

它让我回到 www.example.com 的 magento 主页。

我尝试将 wordpress 中的 url 设置为[http://example.com/blog](http://example.com/blog)和[http://www.example.com/blog](http://www.example.com/blog)但在这两种情况下它总是将我发送到 site.com 的主页。

这是一个问题，因为大多数有经验的网络用户在尝试访问某个位置时不会键入 www。

我的 htaccess 是由 Wordpress 生成的，看起来像

DirectoryIndex index.html index.php

```
<IfModule mod_rewrite.c>

#wp generated
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

请注意，wordpress 站点文件位于 site.com/wp，它是 fishpig 扩展，它直接从不存在的 /blog 路径排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:12:30.210

首先，首先，解决问题的一种方法是简单地将您的 Magento 网站设置为默认没有 www。在网址中。

在 Magento 中，转到系统 > 配置 > Web。

在“安全”和“不安全”选项卡中，找到“基本 URL”。

该值应如下所示：

```
http://www.site.com/ 
```

替换对域的所有引用，使其显示：

```
http://site.com/ 
```

不幸的是，它可能在整个网站上出现了很多。你需要在服务器的其他地方做同样的事情。

但是，如果您真的希望您的站点/博客显示 www.，则必须在 Magento 中正确转发 .htaccess 文件。我不太热衷于 Magento 的 .htaccess 文件的工作原理，但我确实知道如何转发 url 并保留其所有附加页面（但是，Magento 的设置可能会干扰）。

代码应如下所示：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^site.com$ [NC,OR]
RewriteRule ^(.*)$ http://www.site.com$1 [R=301,L] 
```

同样，我不知道这将如何与 Magento 的设置一起工作，但我已经成功使用上面的代码将 url 重定向到我想要的正确 url。不过，上面的代码实际上是在 wordpress 网站上使用的。

检查 Magento 的 .htaccess 文件中的重写规则并尝试将其放在上面。不过要小心；如果您弄乱了 .htaccess 文件，很容易导致 500 个内部服务器错误，因此请务必保留备份。

试试这个，我希望它有所帮助。

# python - Python：在没有锁定机制的情况下通过多个线程同时访问一个函数

> ID：15402452
> 
> 赞同：3
> 
> 时间：2013-03-14T06:15:46.743
> 
> 标签：python, multithreading, function, locking

当多个线程访问同一个函数时，我们是否需要显式地实现**锁**机制。

我有一个使用线程的程序。有两个线程，`t1`和`t2`。`t1`is for `add1()`and `t2`is for `subtract1()`. 两个线程同时访问同一个函数`myfunction(caller,num)`

**1\. 我在给定程序中使用变量定义了一个简单的锁定机制`functionLock`。这是可靠的还是我们需要修改它。**

```
import time, threading

functionLock = '' # blank means lock is open        

def myfunction(caller,num):
    global functionLock
    while functionLock!='': # check and wait until the lock is open
        print "locked by "+ str(functionLock)
        time.sleep(1)

    functionLock = caller # apply lock

    total=0
    if caller=='add1':
        total+=num
        print"1\. addition finish with Total:"+str(total)
        time.sleep(2)
        total+=num
        print"2\. addition finish with Total:"+str(total)
        time.sleep(2)
        total+=num
        print"3\. addition finish with Total:"+str(total)

    else:
        time.sleep(1)
        total-=num
        print"\nSubtraction finish with Total:"+str(total)

    print '\n For '+caller+'() Total: '+str(total)

    functionLock='' # release the lock

def add1(arg1, arg2):

    print '\n START add'
    myfunction('add1',10)
    print '\n END add'        

def subtract1():

  print '\n START Sub'  
  myfunction('sub1',100)   
  print '\n END Sub'

def main():

    t1 = threading.Thread(target=add1, args=('arg1','arg2'))
    t2 = threading.Thread(target=subtract1)
    t1.start()
    t2.start()

if __name__ == "__main__":
  main() 
```

输出如下：

```
START add
START Sub
1\. addition finish with Total:10
locked by add1
locked by add1
2\. addition finish with Total:20
locked by add1
locked by add1
3\. addition finish with Total:30 
locked by add1
 For add1() Total: 30
 END add
Subtraction finish with Total:-100
 For sub1() Total: -100
 END Sub 
```

**2.我们不使用锁可以吗？**

即使我不使用上述程序中定义的锁定机制，线程 t1 和 t2 的结果也是相同的。这是否意味着python在多个线程访问同一个函数时会自动实现锁。

`functionLock`上面程序中不使用锁的程序的输出，,

```
START add
START Sub
1\. addition finish with Total:10
Subtraction finish with Total:-100
For sub1() Total: -100
END Sub
2\. addition finish with Total:20
3\. addition finish with Total:30
For add1() Total: 30
END add 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:19:44.540

虽然我不太了解 Python，但我想说这就像任何其他语言一样：

只要不涉及在函数之外声明的变量，因此可以在线程之间共享，就不需要锁。您的功能似乎并非如此。

但是，到控制台的输出可能会出现乱码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:20:31.753

当您认为您正在编写的代码是关键部分代码时，您需要锁定，即代码片段是否正在修改线程之间的共享状态，如果不是，那么您无需担心锁定。

是否应该锁定方法是一种设计选择，理想情况下，您应该锁定更接近线程的共享状态访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:34:59.680

1.  在您的代码中，您实现自己的[自旋锁](http://en.wikipedia.org/wiki/Spinlock)。虽然这是可能的，但我认为在 Python 中不建议这样做，因为它可能会导致性能问题。

2.  我使用了一个著名的搜索引擎（以 开头`G`），查询“python lock”。第一个结果之一是：[Python 中的线程同步机制](http://effbot.org/zone/thread-synchronization.htm)。它看起来像是一篇不错的文章。

3.  对于代码本身：只要在共享资源上执行的操作不是原子的，您就应该锁定。目前看起来您的代码中没有这样的资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T17:44:22.813

除了这个线程上关于忙于等待变量的其他评论之外，我想指出您没有使用任何类型的原子交换这一事实可能会导致并发错误。即使您的测试执行不会导致它们出现，如果以不同的时间执行足够多的重复，可能会出现以下事件序列：

线程 #1 执行`while functionLock!=''`并获取`False`. 然后，线程#1 被中断（被抢占以执行其他操作），线程#2 执行同一行，`while functionLock!=''`也得到`False`. 在这个例子中，两个线程都进入了临界区，这显然不是你想要的。特别是，在线程修改的任何行中`total`，结果可能不是您所期望的，因为两个线程可以同时在该部分中。请参见以下示例：

`total`是`10`。为简单起见，假设`num`始终为 1。 Thread#1 执行`total+=num`，它由三个操作组成：(i) 加载 的值`total`，(ii) 将其相加，`num`以及 (iii) 将结果存储在 中`total`。如果在 (i) 之后，Thread#1 被抢占并且 Thread#2 然后执行`total-=num`，`total`则设置为`9`。然后，线程#1 恢复。但是，它已经加载`total = 10`了 ，所以它加 1 并存储`11`到`total`变量中。这有效地改变了 Thread#2 在无操作中的递减操作。

请注意，在@ron-klein 链接的维基百科文章中，代码使用了一个`xchg`操作，该操作以原子方式将寄存器与变量交换。这对于锁的校正至关重要。总之，如果您想避开难以调试的并发错误，请不要实现自己的锁来替代原子操作。

[编辑] 我刚刚注意到它实际上`total`是你代码中的一个局部变量，所以这永远不会发生。但是，我相信您没有意识到这是您的代码完美运行的原因，因为您确认“这是否意味着当多个线程访问同一函数时，python 会自动实现锁。”，这是不正确的。请尝试添加`global total`到开头`myfunction`，并多次执行线程，您应该会在输出中看到错误。[/编辑]

# magento - 如何在magento产品页面上显示总价？

> ID：15402453
> 
> 赞同：1
> 
> 时间：2013-03-14T06:15:51.537
> 
> 标签：magento, magento-1.7, magento-1.6

我想在产品页面上显示总价，例如[http://www.4imprint.co.uk/tag/61/Ballpens/product/300090/Bic-Protusion-Grip-Pen](http://www.4imprint.co.uk/tag/61/Ballpens/product/300090/Bic-Protusion-Grip-Pen)。任何人都知道该怎么做。我应该使用 $_product->getFinalPrice();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-17T01:52:25.287

你想要的答案是`<?php echo $_product->getFinalPrice();?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T08:33:39.343

这甚至更好：

```
<?php echo $this->helper('checkout')->formatPrice(Mage::getSingleton('checkout/cart')->getQuote()->getGrandTotal()); ?> 
```

# javascript - 需要帮助建立一个逻辑序列来处理解释的场景

> ID：15402456
> 
> 赞同：0
> 
> 时间：2013-03-14T06:15:55.493
> 
> 标签：javascript, jquery-ui, jquery

这是这种情况：

有一个带有许多输入字段的界面和一个“保存”按钮来更新输入。保存将包括许多过程，例如验证、用户确认、添加评论或取消更新。

要离开此界面，有许多选项，例如单击选项卡、单击不同的按钮、按键盘快捷键等。

当用户试图离开时，预期的行为是系统应该检查未更新的字段，如果有的话，它应该要求用户更新或忽略它。

如果用户选择“忽略”，没问题，继续导航。

但是如果用户选择“更新”，那么系统应该暂停当前导航并执行包含许多其他过程的更新处理程序。在成功完成这些更新程序后，系统应从暂停点继续暂停界面导航过程。

对于示例：

```
//something like this
$('#nxtPage').live("click", function(){
  if (any field value changed){
    var usrConf = confirm('You wanna update?')
    if (usrConf){
      // proceed with the updating processes by calling them
      callDefaultFldUpdate(); // where this function includes many other procedures, so the return status wont help.
    }
  }
  // the default page navigation process starts here
  moveToNextPage();
} 
```

因此，在更新程序之后，系统应继续进行导航程序。

希望情况很清楚，并期待大家提出有用的建议来使用 javascript && jquery 构建这个逻辑。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:24:57.927

设置一个全局变量，类似于`isChanged = false;`然后绑定一个函数以形成更改事件。

```
$(document).on('change', 'form', function(){
    window.isChanged = true;
} 
```

验证`isChanged`代码中的变量，例如

`if (any field value changed){`可以说`if(isChanged == true){`

# iphone - ios中的NSDate转换

> ID：15402457
> 
> 赞同：2
> 
> 时间：2013-03-14T06:16:03.683
> 
> 标签：iphone, ios, objective-c, nsdateformatter

我得到一个`NSString Sun Feb 24 2013 00:00:00 GMT+0530 (India Standard Time)` 我想要的

将其转换为`dd-mm-yy` ios 。这就是我尝试的没有得到输出，因为我

通缉。将字符串转换为日期对象：

```
 NSString  *dateStr = @"Sun Feb 24 2013 00:00:00 GMT+0530 (India Standard Time) " ;
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"EE, d LLLL yyyy HH:mm:ss Z"];
    NSDate *date = [dateFormat dateFromString:dateStr];    
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"yyyy-MM-dd hh:mm:ss a"];
    NSDate *myDate = [df dateFromString: stripped]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-05T05:45:05.717

```
 NSDateFormatter *sdateFormatter = [[NSDateFormatter alloc] init];
sdateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[sdateFormatter setDateFormat:@"E MMM d yyyy HH:mm:ss 'GMT'zzz '(IST)'"];
NSDate *sdate = [sdateFormatter dateFromString:stringDate]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:24:42.740

```
@"Sun Feb 24 2013 00:00:00 GMT+0530 (India Standard Time) " 
```

消除

```
 (India Standard Time) 
```

然后进行格式化

```
NSString  *dateStr = @"Sun Feb 24 2013 00:00:00 GMT+0530" ;
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"EE LLLL dd yyyy HH:mm:ss Z"];
    NSDate *date = [dateFormat dateFromString:dateStr];
    [dateFormat setDateFormat:@"dd-MM-yyyy"];

    NSLog(@"%@",[dateFormat stringFromDate:date]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:30:15.980

试试这个

```
NSString  *dateStr = @"Sun Feb 24 2013 00:00:00 GMT+0530 (India Standard Time) " ;
NSString *clippedString = [dateStr substringToIndex:dateStr.length - 23];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EE LLLL dd yyyy HH:mm:ss Z"];

NSDate *date = [formatter dateFromString:clippedString];

[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss a"];
NSString *newDateString = [formatter stringFromDate:date]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T06:32:31.670

首先去掉“GMT+0530（印度标准时间）”文字，

```
 NSString  *dateStr = @"Sun Feb 24 2013 00:00:00" ;
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
   [dateFormat setDateFormat:@"EEE MMM d yyyy HH:mm:ss"];
    NSDate *date = [dateFormat dateFromString:dateStr]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T06:32:46.093

试试这个：它对我有用

```
NSString  *dateStr = @"Sun Feb 24 2013 00:00:00 GMT+0530";
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"EE MMM d yyyy HH:mm:ss Z"];

NSDate *date = [[NSDate alloc] init];
date = [dateFormat dateFromString:dateStr]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T06:48:37.240

```
NSString  *dateStr = @"Sun Feb 24 2013 00:00:00 GMT+0530" ;
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC+0530"]];
[dateFormatter setDateFormat:@"EE LLL dd yyyy HH:mm:ss zzz"];
NSDate *date = [dateFormatter dateFromString:dateStr];

[dateFormatter setDateFormat:@"yyyy-MM-dd hh:mm:ss a"];
NSString *newDateString = [dateFormatter stringFromDate:date];
NSLog(@"date : %@",newDateString); 
```

# backbone.js - 在backbonejs中处理僵尸视图的失败方法

> ID：15402458
> 
> 赞同：0
> 
> 时间：2013-03-14T06:16:05.220
> 
> 标签：backbone.js, backbone-views

所以我在我的主干应用程序中遇到了同样著名的僵尸视图问题。我试过这个成为超级英雄：P

```
var Router=Backbone.Router.extend({
             routes:{
                  "":"loadDashboard",
                  "home":"loadDashboard",
                  'post-leads':"loadPostLeads"
                },
                initialize:function(){
                window.currentView=null;
                },

            loadPostLeads:function(){
            require(['views/post-leads'],function(leads){
            if(window.currentView!=null)
            {window.currentView.remove();}
            window.currentView=new leads();
            window.currentView.render();
            })

        },

              loadDashboard: function(){
        require(['views/dashboard'],function(dashboard){
            if(window.currentView!=null)
            {window.currentView.remove();}
            window.currentView=new dashboard();
            window.currentView.render();
            })
        }
          }); 
```

这行不通。我想要一些简单的东西，不想为此使用木偶或类似的东西。上面怎么了？这是一个明智的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:07:57.857

原则上你应该做什么，但有些事情 Backbone 无法清理，因为它不知道它们。

首先，您应该确保您使用的是最新版本的 Backbone（`0.9.9`或更新版本）。对事件绑定代码进行了一些改进，这使得该`View.remove`方法更容易进行所有必要的清理。

常见的陷阱是：

**监听模型事件**：

```
//don't use other.on (Backbone doesn't know how to clean up)
this.model.on('event', this.method);

//use this.listenTo (Backbone cleans up events when View.remove is called)
//requires Backbone 0.9.9
this.listenTo(this.model, 'event', this.method); 
```

**监听视图范围之外的 DOM 事件**：

```
//if you listen to events for nodes that are outside View.el
$(document).on('event', this.method);

//you have to clean them up. A good way is to override the View.remove method
remove: function() {
  $(document).off('event', this.method);
  Backbone.View.prototype.remove.call(this);
} 
```

**直接参考**：

```
//you may hold a direct reference to the view:
this.childView = otherView;

//or one of its methods
this.callback = otherView.render;

//or as a captured function scope variable:
this.on('event', function() {
  otherView.render();
}); 
```

**闭包**：

```
//if you create a closure over your view, or any method of your view, 
//someone else may still hold a reference to your view:
method: function(arg) {
  var self = this;
  return function() {
    self.something(x);
  }
} 
```

避免以下陷阱应该可以帮助您正确清理视图。

**根据评论编辑**：

啊，你没有在你的问题中提到完整的问题。据我所知，您的方法的问题在于您试图将两个视图呈现到同一个元素中：

```
var View1 = Backbone.View.extend({el:"#container" });
var View2 = Backbone.View.extend({el:"#container" }); 
```

并且当您删除时`View1`，`View2`不会正确呈现。

`el`您应该将视图呈现**为**元素，而不是指定视图。在您的页面上，您应该有一个`#container`元素，并将视图的元素附加到容器中。

```
loadPostLeads: function () {
  var self = this;
  require(['views/post-leads'], function (leads) {
    self.renderView(new leads());
  })
},

loadDashboard: function () {
  var self = this;
  require(['views/dashboard'], function (dashboard) {
    self.renderView(new dashboard());
  })
},

renderView: function(view) {
  if(window.currentView) {
    window.currentView.remove();
  }

  //the view itself does not specify el, so you need to append the view into the DOM
  view.render();
  $("#container").html(view.el);

  window.currentView = view;
} 
```

# ios - 拖放问题

> ID：15402461
> 
> 赞同：0
> 
> 时间：2013-03-14T06:16:21.817
> 
> 标签：ios, uiscrollview, drag-and-drop

我正在开发一个 iPhone 应用程序。在那个应用程序中，我在滚动视图中有一些图像。要求是将这些图像拖放到视图中，反之亦然。我可以从滚动视图中拖动图像并将其放在 self.view 中。但是当我尝试反向时，意味着将这些图像从 self.view 拖放到滚动视图中，这对我来说会产生问题。我正在使用手势。所以我希望它可以通过手势来完成。

这是我的代码。

y=0；

```
for (int i=0; i<tileImgArray.count; i++)
{
    imgScroll=[[UIImageView alloc]init];
    imgScroll=[[dragImages objectAtIndex:i]valueForKey:@"Image"];
    imgScroll.frame=CGRectMake(5, y, 40, 30);
    imgScroll.userInteractionEnabled=YES;
    [srlPuzzlePieces addSubview:imgScroll];
    y=y+50;
}

NSMutableArray *draggableSubjects = [[NSMutableArray alloc] initWithArray:dragImages];
NSMutableArray *droppableAreas = [[NSMutableArray alloc] initWithObjects:play_view, nil];
_dragDropManager = [[DragDropManager alloc] initWithDragSubjects:draggableSubjects andDropAreas:droppableAreas];
_dragDropManager.dragImages=dragImages;
[draggableSubjects release];
[droppableAreas release];
[dragImages release];

panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:_dragDropManager action:@selector(dragging:)];
[[self view] addGestureRecognizer:panGesture];
[panGesture release];

srlPuzzlePieces.contentSize=CGSizeMake(0,y); 
```

以下是我的拖放文件逻辑

[拖放文件逻辑](https://www.dropbox.com/sh/bn5424fcpo3gh2t/ZmEbvaSNuW)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:42:19.857

你可以参考[https://github.com/spoletto/SPUserResizableView](https://github.com/spoletto/SPUserResizableView)进行拖放。

# asp.net - 亚马逊云上的 ASP.NET 网站

> ID：15402465
> 
> 赞同：3
> 
> 时间：2013-03-14T06:16:37.863
> 
> 标签：asp.net, amazon-web-services, amazon-ec2

我有一个 asp.net 网络应用程序。我需要将发布的文件上传到 AWS 并通过浏览器访问它。我已经下载了 S3 浏览器并使用访问密钥和秘密访问密钥创建了我的帐户。然后我将发布的文件上传到所需的存储桶。但是当我访问 Default.aspx 时，浏览器显示错误：

此页面包含以下错误：

第 1 行第 2 列的错误： StartTag：无效元素名称 下面是第一个错误之前的页面呈现。

我刚刚检查了将示例 html 页面上传到该路径，我可以成功访问它。我需要在 EC2 上做些什么来启动我的网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:38:47.557

[看到这个答案](https://stackoverflow.com/a/281039/808532)：

> 看起来好像浏览器试图显示它认为是 XML 文件的内容，因为它在第一行的第二个字符上给出了错误。所以我认为该文件没有被解析，而是立即按原样返回。检查您的 IIS 服务器是否配置正确，以及它是否在返回页面之前实际解析了您的 ASP 标记。

您可能在 IIS 中遇到配置问题。尝试使用命令行中的以下命令在您的服务器上使用[IIS 重新注册 ASP.Net ：](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v=vs.80%29.aspx)

```
aspnet_regiis.exe -i 
```

exe 文件位于服务器上相应框架版本的以下目录中：

```
C:\WINDOWS\Microsoft.NET\Framework 
```

还要确保`aspnet_regiis`您使用的版本与 IIS 中应用程序的应用程序池框架版本相同。

# php - 为什么我不能使用 JQuery 隐藏和显示元素？

> ID：15402469
> 
> 赞同：1
> 
> 时间：2013-03-14T06:16:53.600
> 
> 标签：php, jquery

这是我在其中渲染表格行的 PHP 代码块：-

实际上，我想要实现的是，在单击第一行中的按钮时，我应该能够显示下一行，该行以前通过在文档就绪脚本中使用 .hide() 隐藏。

```
 <?php
         echo "<tr>";
            echo "<td>"."<button id= \"btnnumber_". $i ." \"  class=\"btn info toggler\" data-value=\" $val\">Show Info  <i class=\"icon-arrow-down\"></i></button>"."</td>"; // On click of this button I am taking its id in Jquery getting the number at end creating the id of the next row in the Jquery script.
         echo "</tr>";

         echo "</tr>";
            echo "<tr id=\"row_$i \" class=\"info_row\">";// This row is dynamically generated one each row has its unique id like 0 row is having id row_0,1 row is having id row_1 etc.
            echo "<td id=\"student_count\">"."students count:"."</td>";
            echo "<td id=\"start_date\">"."start date: "."</td>";
            echo "<td id =\"end_date\">"."end date: "."</td>";
            echo "<td></td>";
        echo "</tr>";

 ?> 
```

该行最初设置为使用以下 JQuery 隐藏在准备好的文档中：-

```
 $(function(){

              $('.info_row').hide();// On document load I am hiding all the element with class info_row.

              $('.toggler').toggle(function(){// Then I am toggling between hide and show.

               var currentId = $(this).attr('id');
               var number = currentId.substr(currentId.length - (currentId.length - currentId.indexOf("_") - 1));
               var rowId = 'row_' + number;
               $("#" + rowId).show();
             }, function(){

              var currentId = $(this).attr('id');
              var lastChar = currentId.substr(currentId.length - (currentId.length - currentId.indexOf("_") - 1));
              var rowId = 'row_' + lastChar; 
              $("#" + rowId).hide();

      });  
    }); 
```

我无法实现切换，即行没有像我试图实现的那样隐藏和显示。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:36:24.207

这条线看起来有问题

```
 echo "<tr id=\"row_$i \" 
```

因为在 id 中有一个虚假的空间。

```
echo "<tr id=\"row_$i\" 
```

# android - Android Web 服务 xml 解析

> ID：15402470
> 
> 赞同：1
> 
> 时间：2013-03-14T06:16:56.983
> 
> 标签：android, parsing, listview, soap

我正在创建两个 java 文件，一个是 Main.java 和 Category.java

我正在添加库文件 ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar

但是这里的输出没有显示。

我正在做肥皂 XML 解析。

这里是文本视图，但我想要一个列表。请帮我

主.java

```
public class Main extends Activity {

private static String SOAP_ACTION = "http://tempuri.org/HelloWorld";

private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "HelloWorld";

private static String URL = "http://sygnetinfosol.com/webservice.asmx";

/** Called when the activity is first created. */
@SuppressWarnings("static-access")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //Initialize soap request + add parameters
//        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        

    SoapObject request = GetSoapObject(METHOD_NAME);
    SoapSerializationEnvelope envelope = GetEnvelope(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    envelope.addMapping(NAMESPACE, "Category",new Category().getClass());

    try {
    androidHttpTransport.call(SOAP_ACTION, envelope);

    SoapObject response = (SoapObject) envelope.getResponse();
    Category[] Allrooms = RetrieveFromSoap(response);

    TextView actv = (TextView)findViewById(R.id.resultbox);
    actv.setHint(Allrooms[0].Text1);
    } catch (Exception e) {
    e.printStackTrace();
    }
    }
    public static SoapObject GetSoapObject(String MethodName)
    {
    return new SoapObject(NAMESPACE,MethodName);
    }
    public static SoapSerializationEnvelope GetEnvelope(SoapObject Soap)
    {
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(Soap);
    return envelope;
    }

    public static Category[] RetrieveFromSoap(SoapObject soap)
    {
        Category[] categories = new Category[soap.getPropertyCount()];
    for (int i = 0; i < categories.length; i++) {
    SoapObject pii = (SoapObject)soap.getProperty(i);
    Category category = new Category();
    Category.Text1 = pii.getProperty(0).toString();
    Category.Text2= pii.getProperty(1).toString();
    Category.Text3= pii.getProperty(2).toString();
    categories[i] = category;
    }
    return categories;
    }
  } 
```

类别.java

```
public class Category implements KvmSerializable{    

public static String Text1;
public static String Text2;
public static String Text3;

public Category(){}

public Category(String lat, String longi, String address) {

    Text1 = lat;
    Text2 = longi;
    Text3 = address;
}

public Object getProperty(int arg0) {

    switch(arg0)
    {
    case 0:
        return Text1;
    case 1:
        return Text2;
    case 2:
        return Text3;
    }

    return null;
}

public int getPropertyCount() {
    return 3;
}

public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch(index)
    {
    case 0:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "Text1";
        break;
    case 1:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "Text2";
        break;
    case 2:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "Text3";
        break;
    default:break;
    }
}

public void setProperty(int index, Object value) {
    switch(index)
    {
    case 0:
        Text1 = value.toString();
        break;
    case 1:
        Text2 = value.toString();
        break;
    case 2:
        Text3 = value.toString();
        break;
    default:
        break;
    }
}
} 
```

日志猫

```
03-14 11:59:05.417: W/PackageManager(59): Code path for pkg : com.pxr.tutorial.soap.weather changing from /data/app/com.pxr.tutorial.soap.weather-2.apk to /data/app/com.pxr.tutorial.soap.weather-1.apk
03-14 11:59:05.417: W/PackageManager(59): Resource path for pkg : com.pxr.tutorial.soap.weather changing from /data/app/com.pxr.tutorial.soap.weather-2.apk to /data/app/com.pxr.tutorial.soap.weather-1.apk
03-14 11:59:05.422: D/PackageManager(59):   Activities: com.pxr.tutorial.soap.weather.Main
03-14 11:59:05.462: I/ActivityManager(59): Force stopping package com.pxr.tutorial.soap.weather uid=10039
03-14 11:59:06.276: I/installd(35): move /data/dalvik-cache/data@app@com.pxr.tutorial.soap.weather-1.apk@classes.dex -> /data/dalvik-  cache/data@app@com.pxr.tutorial.soap.weather-1.apk@classes.dex
03-14 11:59:06.282: D/PackageManager(59): New package installed in /data/app/com.pxr.tutorial.soap.weather-1.apk
03-14 11:59:07.162: D/dalvikvm(257): GC_EXPLICIT freed 154 objects / 11496 bytes in 87ms
03-14 11:59:07.192: I/ActivityManager(59): Force stopping package com.pxr.tutorial.soap.weather uid=10039
03-14 11:59:07.282: D/dalvikvm(119): GC_EXPLICIT freed 791 objects / 44936 bytes in 85ms
03-14 11:59:07.392: D/dalvikvm(59): GC_EXPLICIT freed 9323 objects / 576216 bytes in 149ms
03-14 11:59:07.662: W/RecognitionManagerService(59): no available voice recognition services found
03-14 11:59:07.872: D/dalvikvm(157): GC_EXPLICIT freed 1881 objects / 96152 bytes in 421ms
03-14 11:59:07.982: D/dalvikvm(59): GC_EXPLICIT freed 4037 objects / 225296 bytes in 105ms
03-14 11:59:08.042: I/installd(35): unlink /data/dalvik-cache/data@app@com.pxr.tutorial.soap.weather-2.apk@classes.dex
03-14 11:59:08.102: D/AndroidRuntime(575): Shutting down VM
03-14 11:59:08.112: D/dalvikvm(575): Debugger has detached; object registry had 1 entries
03-14 11:59:08.702: D/AndroidRuntime(588): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
03-14 11:59:08.702: D/AndroidRuntime(588): CheckJNI is ON
03-14 11:59:08.852: D/AndroidRuntime(588): --- registering native functions ---
03-14 11:59:09.572: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.pxr.tutorial.soap.weather/.Main }
03-14 11:59:09.912: I/ActivityManager(59): Start proc com.pxr.tutorial.soap.weather for activity com.pxr.tutorial.soap.weather/.Main: pid=594 uid=10039 gids={3003}
03-14 11:59:09.922: D/AndroidRuntime(588): Shutting down VM
03-14 11:59:09.922: D/jdwp(588): Got wake-up signal, bailing out of select
03-14 11:59:09.922: D/dalvikvm(588): Debugger has detached; object registry had 1 entries
03-14 11:59:09.952: I/dalvikvm(588): JNI: AttachCurrentThread (from ???.???)
03-14 11:59:09.952: I/AndroidRuntime(588): NOTE: attach of thread 'Binder Thread #3' failed
03-14 11:59:11.171: I/ActivityManager(59): Displayed activity com.pxr.tutorial.soap.weather/.Main: 1269 ms (total 1269 ms)
03-14 11:59:16.412: D/dalvikvm(119): GC_EXPLICIT freed 728 objects / 42320 bytes in 158ms
03-14 11:59:21.422: D/dalvikvm(265): GC_EXPLICIT freed 109 objects / 5360 bytes in 150ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:03:28.460

```
ok I will send you all the classes and xml files. check and learn the web services concept.       

 LazyAdapter.java

        public class LazyAdapter extends BaseAdapter {
            java.net.URL urlImage;
            InputStream is ;
            private Activity activity;
            private ArrayList<HashMap<String, String>> twitterList;
            private static LayoutInflater inflater=null;

            public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
                activity = a;
                twitterList=d;
                inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            }

            public int getCount() {
                return twitterList.size();
            }

            public Object getItem(int position) {
                return position;
            }

            public long getItemId(int position) {
                return position;
            }

            public View getView(int position, View convertView, ViewGroup parent) {
                View vi=convertView;
                if(convertView==null)
                    vi = inflater.inflate(R.layout.list_item, null);

                TextView id = (TextView)vi.findViewById(R.id.playerId); // title
                TextView name = (TextView)vi.findViewById(R.id.playerName); // artist name
                TextView country = (TextView)vi.findViewById(R.id.countryName); // duration
                ImageView flag=(ImageView)vi.findViewById(R.id.countryFlag); // thumb image

                HashMap<String, String> valueList = new HashMap<String, String>();
                valueList = twitterList.get(position);

                // Setting all values in listview
                id.setText(valueList.get(WSDemoFootBallActivity.TAG_ID));
                name.setText(valueList.get(WSDemoFootBallActivity.TAG_NAME));
                country.setText(valueList.get(WSDemoFootBallActivity.TAG_COUNTRYNAME));
                String countryFlag = valueList.get(WSDemoFootBallActivity.TAG_COUNTRYFLAG);
                try {
                    urlImage = new java.net.URL(countryFlag);
                    is = (InputStream) urlImage.getContent();

                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                 Drawable d = Drawable.createFromStream(is, null);
                flag.setImageDrawable(d);
                return vi;
            }
        }

    SingleMenuItemActivity.java

    public class SingleMenuItemActivity  extends Activity {

        URL url;
        Bitmap bimage;
        java.net.URL urlImage;
        InputStream is ;
        private static final String TAG_ID = "id";
        private static final String TAG_NAME = "name";
        private static final String TAG_COUNTRYNAME = "countryName";
        private static final String TAG_COUNTRYFLAG = "countryFlag";
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.single_list_item);

            // getting intent data
            Intent in = getIntent();

            // Get JSON values from previous intent
            String playerId = in.getStringExtra(TAG_ID);
            String playerName = in.getStringExtra(TAG_NAME);
            String countryName = in.getStringExtra(TAG_COUNTRYNAME);
            String countryFlag = in.getStringExtra(TAG_COUNTRYFLAG);

            // Displaying all values on the screen
            TextView lblId = (TextView) findViewById(R.id.playerId);
            TextView lblName = (TextView) findViewById(R.id.playerName);
            TextView lblCountryName = (TextView) findViewById(R.id.countryName);
            ImageView lblCountryFlag = (ImageView) findViewById(R.id.countryFlag);
            try {
                urlImage = new java.net.URL(countryFlag);
                is = (InputStream) urlImage.getContent();

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
             Drawable d = Drawable.createFromStream(is, null);
            lblId.setText(playerId);
            lblName.setText(playerName);
            lblCountryName.setText(countryName);
            lblCountryFlag.setImageDrawable(d);

        }

    }

    main.xml

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
        <!-- Main ListView 
             Always give id value as list(@android:id/list)
        -->
        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

    </LinearLayout>

    list_item.xml

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="10dp" >
        <ImageView
            android:id="@+id/countryFlag"
            android:layout_width="70dp"
            android:layout_height="50dp"
            android:gravity="left"
            android:src="@drawable/ic_launcher" >
        </ImageView>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/playerId"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingBottom="2dip"
                android:paddingTop="6dip"
                android:textColor="#43bd00"
                android:textSize="16sp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/playerName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingBottom="2dip"
                android:textColor="#acacac" >
            </TextView>

            <TextView
                android:id="@+id/countryName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:textColor="#5d5d5d" >
            </TextView>
        </LinearLayout>

    </LinearLayout>

    single_list_item.xml

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingBottom="2dip"
                android:paddingTop="6dip"
                android:text="PlayerId :"
                android:textColor="#43bd00"
                android:textSize="16sp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/playerId"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingBottom="2dip"
                android:paddingTop="6dip"
                android:textColor="#43bd00"
                android:textSize="16sp"
                android:textStyle="bold" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingBottom="2dip"
                android:text="PlayerName :"
                android:textColor="#acacac"
                android:textSize="16sp" >
            </TextView>

            <TextView
                android:id="@+id/playerName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingBottom="2dip"
                android:textColor="#acacac" >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:text="CountryName :"
                android:textColor="#5d5d5d" >
            </TextView>

            <TextView
                android:id="@+id/countryName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:textColor="#5d5d5d" >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:text="CountryFlag :"
                android:textColor="#43bd00" >
            </TextView>

            <ImageView
                android:id="@+id/countryFlag"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left" >
            </ImageView>
        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:35:40.687

请参阅下面的示例代码，以使用 SOAP 从 Web 服务中检索数据。它将对您有很大帮助。让我知道你有任何疑问。

```
import java.io.IOException;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;

import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.TextView;

public class WSDemoFootBallActivity extends Activity  {

SoapObject resultinMethod;
TextView tvResult;
URL url;
Bitmap bimage;
ListView list;
LazyAdapter adapter;
static final String TAG_ID = "id";
static final String TAG_NAME = "name";
static final String TAG_COUNTRYNAME = "countryName";
static final String TAG_COUNTRYFLAG = "countryFlag";

private static final String METHOD_NAME = "AllPlayerNames";
private static final String SOAP_ACTION = "";
private static final String NAMESPACE = "http://footballpool.dataaccess.eu";
private static final String URL = "http://footballpool.dataaccess.eu/data/info.wso?WSDL&quot";
//you can get these values from the wsdl file^

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("bSelected", true);

    SoapSerializationEnvelope sse=new SoapSerializationEnvelope(SoapSerializationEnvelope.VER11);
    sse.setOutputSoapObject(request);
    sse.dotNet=true;

    HttpTransportSE htse=new HttpTransportSE(URL);
    try {
        htse.call(SOAP_ACTION, sse);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    SoapObject res=(SoapObject) sse.bodyIn;

    final ArrayList<HashMap<String, String>> valuesList = new ArrayList<HashMap<String, String>>();

    for (int i = 0; i < res.getPropertyCount(); i++) {

        SoapObject  namesObject = (SoapObject) res.getProperty(i);
        for(int j=0;j<namesObject.getPropertyCount();j++)
        {
            Object objectNames=namesObject.getProperty(j);
            SoapObject soapObjectIds = (SoapObject)objectNames;
            SoapObject soapObjectNames=(SoapObject) objectNames;
            SoapObject soapObjectCountryNames = (SoapObject)objectNames;
            SoapObject soapObjectCountryFlag = (SoapObject)objectNames;

            String id = soapObjectIds.getProperty("iId").toString();
            String stringNames=soapObjectNames.getProperty("sName").toString();
            String countryName = soapObjectCountryNames.getProperty("sCountryName").toString();
            String countryFlag = soapObjectCountryFlag.getProperty("sCountryFlagLarge").toString();     

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, stringNames);
            map.put(TAG_COUNTRYNAME, countryName);
            map.put(TAG_COUNTRYFLAG, countryFlag);

            // adding HashList to ArrayList
            valuesList.add(map);
        }
    }
    /**
     * Updating parsed JSON data into ListView
     * */

    // selecting single ListView item
    ListView list = (ListView) findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, valuesList);        
    list.setAdapter(adapter);
    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

             HashMap<String, String> map = new HashMap<String, String>();
                map = valuesList.get(position);
            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_ID,map.get(WSDemoFootBallActivity.TAG_ID));
            in.putExtra(TAG_NAME,map.get(WSDemoFootBallActivity.TAG_NAME));
            in.putExtra(TAG_COUNTRYNAME, map.get(WSDemoFootBallActivity.TAG_COUNTRYNAME));
            in.putExtra(TAG_COUNTRYFLAG,map.get(WSDemoFootBallActivity.TAG_COUNTRYFLAG));
            startActivity(in);

        }
    });
}
} 
```

# c# - 如何检查 NLog 是否写入数据库

> ID：15402472
> 
> 赞同：0
> 
> 时间：2013-03-14T06:17:03.620
> 
> 标签：c#, .net, database, connection-string, nlog

在我们的应用程序中，我们使用 nlog 进行日志管理。我们在文本文件和数据库中写入日志。在某些情况下，日志会写入文本文件，但不会写入数据库。我怀疑这是由于动态设置连接字符串时出现的一些问题。我该如何调试呢？有没有办法在控制台中编写 NLog 生成的 sql 查询和响应？也让我知道是否有一些解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:23:58.383

您可以将 nlog 配置为自行记录有关 nlog 的日志：

[NLog 内部日志](http://nlog-project.org/wiki/Internal_logging)

```
<nlog internalLogFile="c:\log.txt" internalLogLevel="Trace">
   <targets>
      <!-- target configuration here -->
   </targets>
   <rules>
      <!-- log routing rules -->
   </rules>
</nlog> 
```

或看看：

[日志无法正常工作，如何排除故障](http://nlog-project.org/wiki/Logging_is_not_working_-_how_to_troubleshoot_it?)

# r - 我如何读取包含一些附加文本数据的 csv 文件

> ID：15402473
> 
> 赞同：1
> 
> 时间：2013-03-14T06:17:04.573
> 
> 标签：r, csv

我需要在 R 中读取一个 csv 文件。但是该文件在某些​​行中包含一些文本信息，而不是逗号值。所以我无法使用 read.csv(fileName) 方法读取该文件。文件内容如下：

```
name:russel date:21-2-1991
abc,2,saa
anan,3,ds
ama,ds,az
,,

name:rus date:23-3-1998
snans,32,asa
asa,2,saz 
```

我只需要将每个名称、日期对的值存储为数据框。为此，我如何读取该文件？

实际上我需要的输出是

```
>dataFrame1
    abc,2,saa
    anan,3,ds
    ama,ds,az
>dataFrame2
    snans,32,asa
    asa,2,saz 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T06:41:26.117

`scan`您可以使用`grep`和函数读取数据并`sub`提取重要值。

文本：

```
text <- "name:russel date:21-2-1991
abc,2,saa
anan,3,ds
ama,ds,az
,,

name:rus date:23-3-1998
snans,32,asa
asa,2,saz" 
```

这些命令生成带有名称和日期值的数据框。

```
# read the text
lines <- scan(text = text, what = character())
# find strings staring with 'name' or 'date'
nameDate <- grep("^name|^date", lines, value = TRUE)
# extract the values
values <- sub("^name:|^date:", "", nameDate)
# create a data frame
dat <- as.data.frame(matrix(values, ncol = 2, byrow = TRUE,
                            dimnames = list(NULL, c("name", "date")))) 
```

结果：

```
> dat
    name      date
1 russel 21-2-1991
2    rus 23-3-1998 
```

* * *

**更新**

要从不包含名称和日期信息的字符串中提取值，可以使用以下命令：

```
# read data
lines <- readLines(textConnection(text))
# split lines
splitted <- strsplit(lines, ",")
# find positions of 'name' lines
idx <- grep("^name", lines)[-1]
# create grouping variable
grp <- cut(seq_along(lines), c(0, idx, length(lines)))
# extract values
values <- tapply(splitted, grp, FUN = function(x)
                                        lapply(x, function(y)
                                                    if (length(y) == 3) y))
create a list of data frames
dat <- lapply(values, function(x) as.data.frame(matrix(unlist(x),
                                                       ncol = 3, byrow = TRUE))) 
```

结果：

```
> dat
$`(0,7]`
    V1 V2  V3
1  abc  2 saa
2 anan  3  ds
3  ama ds  az

$`(7,9]`
     V1 V2  V3
1 snans 32 asa
2   asa  2 saz 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T06:24:24.720

我会首先将整个文件作为字符列表读取，即文件中每一行的字符串，这可以使用`readLines`. 接下来，您必须找到新日期的数据开始的位置，即查找`,,`，查看`grep`。然后获取每个数据块的第一个条目，例如`str_extract`从`stringr`包中使用。最后，您需要拆分所有剩余的数据字符串，请参阅`strsplit`。

# ios - 在哪里释放在同一类的不同方法中使用的 NSArray

> ID：15402486
> 
> 赞同：0
> 
> 时间：2013-03-14T06:17:55.290
> 
> 标签：ios, objective-c, cocoa-touch

在我的 iOS 项目中，我正在创建一个`NSArray`可以包含整数值的对象。这个类中有几个函数可以完成它们的任务`NSArray`。所以我想创建`NSArray`为该类的私有属性。在`viewDidLoad`我为这个数组分配内存，即

```
myArray = [[NSArray alloc] init]; 
```

`myArray`将在这个类的几个方法中使用。当我分析我的代码时，它显示内存泄漏，因为我正在分配`myArray`而不是释放它。

如果我写信或警告仍然存在`[myArray release]`。如果我在使用此数组的类的最后一个方法中释放，xCode 将不允许我这样做。`dealloc``viewDidUnload``myArray`

这是我在我的类 .h 文件中声明它的方式

```
@interface FightVC : UIViewController
{
    NSArray *myArray;
} 
```

我想知道什么是可能的解决方案。其他然后使用`autorelease`. 我不想让它公开，所以我不把这个数组写成属性。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:56:42.480

使用`@property`另一个答案中提到的私有可能是最好和最干净的方法。原始实例变量不是一种非常现代的做事方式。但是，如果您要走这条路，您可以为您的 ivar 实现一个 getter，在其中释放旧的 ivar 并保留新的 ivar：

```
- (void)setMyArray:(NSArray *)array {
    [myArray release];
    myArray = [array retain];
} 
```

无论如何，这就是典型的模式（这就是`@property`自动为你做的事情）。

之后，您可以创建数组，使用 setter，然后释放对象：

```
NSArray *newArray = [[NSArray alloc] init];
[self setMyArray:newArray];
[newArray release]; 
```

这应该可以防止分析仪对你发牢骚。不过，有几件事让我印象深刻：

1）`[[NSArray alloc] init]`不太可能做你想做的事。它将创建一个空的、不可变的数组。您可能想要一个 NSMutableArray，或者您想要使用不同的初始化程序使用其中已有的对象来实例化它。

2) `NSArray`s 本身并不适合保存整数，它们保存对象。您可以使用 an`NSPointerArray`或将整数放入 NSNumbers 并将它们放入`NSArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:28:19.217

要将属性设为私有，您必须创建一个匿名类别。

在您的 .m 文件中：

```
@interface myClass ()

@property (nonatomic, retain) NSArray *myPrivateArray;

@end

@implementation myClass

// Class code here

@end 
```

要释放您的数组，只需将属性设置为 nil。

```
self.myPrivateArray = nil; 
```

# firefox - 集成到 openlayers 的谷歌地图在 Firefox 和 Internet Explorer 中不可见

> ID：15402487
> 
> 赞同：1
> 
> 时间：2013-03-14T06:18:00.443
> 
> 标签：firefox, google-maps-api-3, openlayers

我将谷歌地图作为基础层（wms 层）与 openlayers 集成。系统工作正常，所有浏览器都正确显示了基础层谷歌地图。

然后我更新了Firefox。现在 Firefox 已停止显示谷歌地图（wfs 图层）。但它仍然显示 wfs 功能。

我也在 google chorme 和 Internet Explorer 中尝试过（最新版本）。谷歌浏览器正常显示一切。但是互联网浏览器也有同样的问题。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:48:25.730

如果您在代码中使用本地文件路径，则新版本的 IE 和 Firefox 不支持地图输出。尝试使用您要访问的文件的 url，或者将所有文件放入一个文件夹，然后在 ie 或 firefox 中使用。那可能会解决它。

# c# - 在 C# 中将平面文本文件转换为 XML

> ID：15402493
> 
> 赞同：0
> 
> 时间：2013-03-14T06:18:17.107
> 
> 标签：c#, xml, linq-to-xml, xelement

我有一个`.txt`文件，我必须在文件中更改它`xml`。我的`.txt`文件是`pipe-delimited ("|", vertical bar)`纯文本文件。像这样：

```
169055|759656025621|Dos|Justamente Tres|Kill Rock Stars|256|PUNK|CD-JEWEL CASE|06/24/1996|D 
```

现在我必须将此文本文件更改为 xml 文件，并且我必须为此 xml 添加父子节点。我必须使用 Linq to xml 和 XElement。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:38:25.833

```
//path of your RDF file i.e. txt file used delimeter |

String filePath = Path.Combine(HostingEnvironment.ApplicationPhysicalPath, @"RdfFile/RDF.txt");

IEnumerable<String> source = File.ReadLines(filePath);

 XElement scans = new XElement("Test",

        from str in source
        let fields = str.Split('|')
        select new XElement("Product",
           new XAttribute("Action", FileName),
           new XAttribute("EnsureDefaultVariant", "1"),
           new XAttribute("ID", fields[0]),

            new XElement("Summary", fields[2]),
            new XElement("ImageFilenameOverride", fields[1])

            )

    );
//path in which xml file you want to save result.

 String filePath_Xml = Path.Combine(HostingEnvironment.ApplicationPhysicalPath,
 @"XMLFile/RDF__Scans_Add_XMLFile.xml");

 scans.Save(filePath_Xml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:10:34.710

***将您的输入文本文件作为`c:\sample.txt`. 包含如下行（分隔符的数量可能会有所不同，每条记录都会产生或多或少的字段）：***

```
169055|759656025621|Dos|Justamente Tres|Kill Rock Stars|256|PUNK|CD-JEWEL CASE|06/24/1996|D
xx|xx|xx|xx|xx|xx|xx|xx|xx|xx
... 
```

**然后你可以这样开始：**

```
public static void Main() {
            XElement root = new XElement("root");//create a root node
            foreach (String ln in File.ReadAllLines(@"c:\sample.txt")){//<-- read lines
                string[] fields = ln.Split('|'); //<-- change field separator here & split fields
                XElement record = new XElement("record"); //create a child node (i.e., parent of filelds)
                int pos = 0;
                foreach (String sp in fields){
                    pos += 1;
                    XElement field = new XElement(string.Format("field_{0}", pos.ToString())); // prepare child nodes
                    field.Add(sp);
                    record.Add(field); // add to parent node
                }
                root.Add(record); // add to root
            }
            Console.Write (root.ToString());  // display the result on console
            Console.ReadKey(); // waiting for you........
        } 
```

**控制台上的结果：**

```
<root>
  <record>
    <field_1>169055</field_1>
    <field_2>759656025621</field_2>
    <field_3>Dos</field_3>
    <field_4>Justamente Tres</field_4>
    <field_5>Kill Rock Stars</field_5>
    <field_6>256</field_6>
    <field_7>PUNK</field_7>
    <field_8>CD-JEWEL CASE</field_8>
    <field_9>06/24/1996</field_9>
    <field_10>D</field_10>
  </record>
  <record>
    <field_1>xx</field_1>
    <field_2>xx</field_2>
    <field_3>xx</field_3>
    <field_4>xx</field_4>
    <field_5>xx</field_5>
    <field_6>xx</field_6>
    <field_7>xx</field_7>
    <field_8>xx</field_8>
    <field_9>xx</field_9>
    <field_10>xx</field_10>
  </record>
</root> 
```

**希望这可以帮助。**

# c# - 首次运行时自动将应用程序复制/安装到 Program Files

> ID：15402496
> 
> 赞同：0
> 
> 时间：2013-03-14T06:18:38.407
> 
> 标签：c#, .net, winforms

第一次执行应用程序时，我希望将此正在运行的应用程序复制到 C:\Program Files\

假设我把这个应用程序给我的朋友，然后他第一次执行它，这个应用程序必须复制到 C:\Program Files\

如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:21:21.463

您正在尝试创建 Click Once 类型的应用程序。检查链接[单击一次部署](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:52:38.263

执行时不能移动 EXE 文件，您将：

*   具有将 EXE 复制到另一个位置的代码

`IO.File.Copy()`

*   或有安装程序

[`Click Once`](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx)安装到一个非常[安全的位置](https://stackoverflow.com/questions/2359026/how-to-get-folder-path-for-clickonce-application)，而不是程序文件。它不需要管理员。

如果您将 a 添加[`MSI setup project`](http://msdn.microsoft.com/en-us/library/19x10e5c(v=vs.71).aspx)到您的解决方案中，您可以看到[将安装路径硬编码](https://stackoverflow.com/questions/2676140/visual-studio-2008-setup-project-fixing-the-location-of-installed-kit/2677159#2677159)到 C:\Program Files\

如果您选择 MSI 解决方案，您将需要管理员安装。因为 setup.exe 负责下载/安装组件（例如 dotnet），所以它需要 Admin 才能执行。

如果您知道要安装您的应用程序的 PC 已经具有 .Net Framework 等，那么避免 UAC 提示的最简单方法是运行 MSI 而不是 setup.exe。运行 MSI 不会要求管理员。

您还可以按照此答案将[升级安装到同一文件夹](https://stackoverflow.com/questions/11474320/install-to-same-path-when-upgrading-application/11490003#11490003)。

# sql-server - 如何动态地将数据从一台服务器传输到另一台服务器..？

> ID：15402508
> 
> 赞同：0
> 
> 时间：2013-03-14T06:19:29.243
> 
> 标签：sql-server

我有许多包含类似数据库的链接服务器，现在我被要求制作一个存储过程来将数据从一台服务器的数据库传输到另一台服务器的数据库。但我应该将目标服务器名称、源服务器名称、目标数据库名称、源数据库名称作为参数提供给存储过程。我可以使用动态 sql 在同一服务器的不同数据库之间执行此操作。

```
 SET @dynsql =N'INSERT INTO '+@destinationDBname+N'..UIElement (UIElementID,UIElementName)
    SELECT @LatestUIElementId,UIElementName  
    FROM '+QUOTENAME(@sourceDBname)+N'.dbo.UIElement WHERE UIElementID = @OldUIElementId'
    EXEC sp_executesql @dynsql,N'@LatestUIElementId int',@LatestUIElementId =@LatestUIElementId 
```

但找不到可以在服务器之间使用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:27:23.333

在我看来，您的查询中缺少目标服务器。从我上面看到的你只有目标数据库。

目标服务器的查询应如下所示

```
select * from [Server].database.schema.table 
```

# apache - Fedora Apache：VirtualHost 没有获取 DirectoryIndex

> ID：15402511
> 
> 赞同：0
> 
> 时间：2013-03-14T06:19:47.300
> 
> 标签：apache, fedora, virtualhost

我的 Fedora 18 机器上的虚拟主机有问题。

```
http://127.0.0.1 works correctly and brings up index.html

http://127.0.0.1:9000 also works correctly.

http://localhost works 

http://localhost:9000 does NOT work.  

It just redirects to http://localhost 
```

为什么不能以同样的方式对待 localhost 和 127.0.0.1 ？

这是我的 httpd-vhosts.conf 的内容：

提前致谢。

```
Listen 9000

  DirectoryIndex index.html welcome.html

NameVirtualHost *:80
NameVirtualHost *:9000

<VirtualHost *:80>
  ServerName saraslights
  ServerAdmin ratteri@gmail.com
  ServerAlias saraslights
  DocumentRoot "/var/www/html/opencart"
  ErrorLog "logs/saraslights-errors.log"
  CustomLog "logs/saraslights-access.log" common
</VirtualHost>

<VirtualHost *:9000>
  ServerName wordpress
  ServerAdmin ratteri@gmail.com
  ServerAlias wordpress
  DocumentRoot /var/www/html/wordpress
  ErrorLog "logs/wordpress-errors.log"
  CustomLog "logs/wordpress-access.log" common
</VirtualHost> 
```

# documentation - markdown/pandoc的全站编译？

> ID：15402512
> 
> 赞同：16
> 
> 时间：2013-03-14T06:19:52.780
> 
> 标签：documentation, markdown, pandoc, pelican

使用[Sphinx-doc](http://sphinx-doc.org/)，您可以创建一堆 ReStructureText 文件，其中一个`index.rst`文件包含一个目录宏，该宏自动从其他包含的文件生成目录，以及一个`conf.py`充当编译配置的文件。然后，您可以将该批次编译成单个 python-doc 样式的站点，其中包含索引、导航工具和搜索功能。

是否有任何类似的降价工具（最好是 pandoc 风格的降价）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T06:53:56.333

**一些与 Markdown 一起使用的静态站点生成器**：

*   [Jekyll](http://jekyllrb.com/)非常流行，也是[GitHub 页面](http://pages.github.com/)背后的引擎。
*   Python 变体：[Hyde](http://ringce.com/hyde)或[Pelican](http://docs.getpelican.com/en/3.1.1/)
*   [nanoc （在](http://nanoc.ws/)[GitHub API 文档](http://developer.github.com/v3/)中使用 f.ex. ）
*   [Middlemanapp](http://middlemanapp.com/)：也许是最好的？

我认为它们都没有使用 pandoc（可能是因为它是用 Haskell 编写的），但它们都使用增强的 Markdown 语法或者可以配置为使用 pandoc。

**从 Markdown 生成网站的其他有趣方法：**

*   Markdown-基于文件的*Wiki*：f.ex。[Gollum](https://github.com/github/gollum)，也被 GitHub 使用的 Wiki-Engine
*   [电报](https://telegr.am/index)：商业；由 Lift-Scala 框架的发明者 David Pollak 编写

**使用 Pandoc 的引擎：**

*   [Gitit](http://gitit.net/) : Pandoc 维基
*   [Pandoc-Plugin for Ikiwiki](https://github.com/dubiousjim/pandoc-iki)
*   [Yst 静态站点生成器](http://github.com/jgm/yst)
*   [Gouda - 从 Markdown 文件目录生成站点](http://www.unexpected-vortices.com/sw/gouda/)
*   [Rippledoc - 从 Markdown 文件的嵌套目录生成可导航站点](https://github.com/uvtc/rippledoc)

**静态站点生成器的最终列表**

静态站点生成器的一个很好的概述：http: [//staticsitegenerators.net/](http://staticsitegenerators.net/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-28T12:42:44.273

[Pandoc](http://johnmacfarlane.net/pandoc/README.html)，GNU [make](http://www.gnu.org/software/make/)和[sed](http://www.grymoire.com/Unix/Sed.html)命令，加上一些[CSS](http://reference.sitepoint.com/css)，是您从[Markdown](http://daringfireball.net/projects/markdown/syntax#overview)开始完全自动化创建静态网站所需的一切。

Pandoc 提供了三个命令行选项，可以提供页面之间的导航以及基于页面内标题创建目录 (TOC)。使用 CSS，您可以使导航和 TOC 以您想要的方式显示和运行。

> -B 文件，--include-before-body=文件
> 
> 在文档正文的开头（例如在 HTML 中的标记之后，或在 LaTeX 中的 \begin{document} 命令之后）包括 FILE 的内容，逐字逐句。这可用于在 HTML 文档中包含导航栏或横幅。此选项可重复使用以包含多个文件。它们将包含在指定的顺序中。暗示 --standalone。
> 
> --toc，--目录
> 
> 包括一个自动生成的目录。
> 
> --toc-depth=NUMBER
> 
> 指定要包含在目录中的节级别数。默认值为 3（这意味着将在内容中列出级别 1、2 和 3 的标题）。

事实上，[我的个人网站就是这样建立的](http://hamwaves.com/gedit/en/index.html)。查看其[makefile](http://hamwaves.com/pandoc/article/en/makefile)以了解更多详细信息。[它都是在GNU GPL 版本 3](http://www.gnu.org/licenses/gpl.html)下获得许可的自由开放源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-27T22:23:59.340

如果您可以不使用 Pandoc，[mkdocs](http://www.mkdocs.org/)似乎可以满足您的需求。

如果你确实想使用 Pandoc 风格的 Markdown，你可以查看[pdsite](http://pdsite.org)。我把它写成一种使用更多输入格式（如 emacs org-mode）和没有 Python 依赖项的 mkdocs 样式站点生成的方法 - 你传入一个 Markdown 文件的文件夹并得到一个 HTML 站点（包括自动生成的多级导航链接）。它类似于 Serge Stroobandt 的方法，因为它只是一个 shell 脚本（但它确实需要您`tree`安装）。不幸的是，它还没有搜索功能，虽然这不会太难添加......

# perl - 根据管道分隔的字符串提取多行

> ID：15402522
> 
> 赞同：0
> 
> 时间：2013-03-14T06:20:25.660
> 
> 标签：perl

我正在编写一个 Perl 脚本，它将根据国家/地区字段每 3 行提取一次，并将其分成 2 个文本文件。数据如下所示：

```
INVHDR|JPN|
INVDET|4254|
INVTOT|3325|
INVHDR|AUS|
INVDET|9685|
INVTOT|1431|
INVHDR|JPN|
INVDET|3368|
INVTOT|1126|
INVHDR|NZL|
INVDET|1458|
INVTOT|5698| 
```

所有等于 JPN 的字段 2 将被连接在一起输出应该是文本文件 1

```
INVHDR|JPN|
INVDET|4254|
INVTOT|3325|
INVHDR|JPN|
INVDET|3368|
INVTOT|1126| 
```

以及没有 JPN 将被放在另一个文本文件中，而另一个输出应该是文本文件 2

```
INVHDR|AUS|
INVDET|9685|
INVTOT|1431|
INVHDR|NZL|
INVDET|1458|
INVTOT|5698| 
```

我是 perl 的新手，需要一些帮助来启发我。谢谢你帮我干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:23:15.000

尝试这个：

```
use strict;
use warnings;

open my $output1, '>output1.txt'
    or die "Can't open output1.txt for writing: $!\n";

open my $output2, '>output2.txt'
    or die "Can't open output2.txt for writing: $!\n";

my @data = <>;
for (my $i = 0; $i < @data; $i += 3) {
    my $result = join q{}, @data[$i..$i+2];
    my $output = $data[$i] =~ /JPN\|$/ ? $output1 : $output2;
    print $output $result;
}

close $output1;
close $output2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:44:11.727

我试过用这个：

```
sed -n -e '/JPN/,+2w file1' -e '/JPN/,+2!w file2' yourfile 
```

# android - Android-如何在触摸移动时在画布上移动图像并获取图像的精确坐标？

> ID：15402527
> 
> 赞同：0
> 
> 时间：2013-03-14T06:20:41.440
> 
> 标签：android, image, canvas

我成功地将图像移动到画布上并获取图像的坐标，但是当我将坐标传递给下一个活动以将背景图像与可移动图像结合时，图像的 x 坐标不会改变，但 y co纵坐标变化并向上移动，当我向下移动屏幕图像移动增加时，变化也不是静态的。

这是代码-----

```
 class ImageMove extends SurfaceView implements SurfaceHolder.Callback {

private int mActivePointerId = INVALID_POINTER_ID;
private static final int INVALID_POINTER_ID = -1;
private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;

public float mPosX;
public float mPosY;
public float mLastTouchX;
public float mLastTouchY;

//For Fetching image
private Bitmap bmp;
private Drawable image;
private byte[] byteArray;
private ByteArrayBuffer baf = null;

//For Rotation
int direction = 0;
int degree = 0;
private float centerX ;
private float centerY ;
private float newX ;
public float newY ;
private float rotateX;
private float rotateY;
private float imgX;
private float imgY;
GameThread thread;
int screenW; //Device's screen width.
int screenH; //Devices's screen height.

int initialY ;
float dY; //Image vertical speed.
int ImageW;
int ImageH;
int bgrW;
int bgrH;
int angle;
int bgrScroll;
int dBgrY; //Background scroll speed.
float acc;
Bitmap image, bgr;

//Measure frames per second.
long now;
int framesCount=0;
int framesCountAvg=0;
long framesTimer=0;
Paint fpsPaint=new Paint();

//Frame speed
long timeNow;
long timePrev = 0;
long timePrevFrame = 0;
long timeDelta;

public ImageMove(Context context) {
    super(context);
    image = BitmapFactory.decodeResource(getResources(),R.drawable.bubble); //Load a  image.
   bgr = BitmapFactory.decodeResource(getResources(),R.drawable.grd); //Load a background.

   bgrW = bgr.getWidth();
   bgrH = bgr.getHeight();

   imageW = image.getWidth();
    imageH = image.getHeight();

    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener()); 
    //Set thread
    getHolder().addCallback(this);

    setFocusable(true);
}

@Override
public void onSizeChanged (int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    //This event-method provides the real dimensions of this custom view.
    screenW = w;
    screenH = h;
    System.out.println(w+"  X  "+h);
    bgr = Bitmap.createScaledBitmap(bgr, w, h, true); //Scale background to fit the screen.
    bgrW = bgr.getWidth();
    bgrH = bgr.getHeight();

}

//***************************************
//*************  TOUCH  *****************
//***************************************
@Override
public synchronized boolean onTouchEvent(MotionEvent ev) {

     mScaleDetector.onTouchEvent(ev);

        final int action = ev.getAction();

        if (action == MotionEvent.ACTION_DOWN) {
            final float x = ev.getX();
            final float y = ev.getY();

            mLastTouchX = x;
            mLastTouchY = y;
            mActivePointerId = ev.getPointerId(0); 
        }

        if (action == MotionEvent.ACTION_MOVE) {

            System.out.println("MOVE");
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

        }

        if (action == MotionEvent.ACTION_UP) {
            System.out.println("UP");
            mActivePointerId = INVALID_POINTER_ID;

        }

        if (action == MotionEvent.ACTION_CANCEL) {
            System.out.println("CANCEL");
            mActivePointerId = INVALID_POINTER_ID;
        }

        if (action == MotionEvent.ACTION_POINTER_UP) {
            System.out.println("ACTN_POINTER_UP");
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
            >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
            final int pointerId = ev.getPointerId(pointerIndex);
            if (pointerId == mActivePointerId) {
                // This was our active pointer going up. Choose a new
                // active pointer and adjust accordingly.
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mLastTouchX = ev.getX(newPointerIndex);
                mLastTouchY = ev.getY(newPointerIndex);
                mActivePointerId = ev.getPointerId(newPointerIndex);
            }

        }

        return true;
}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Rect fromRect1 = new Rect(0, 0, bgrW - bgrScroll, bgrH);
    Rect toRect1 = new Rect(bgrScroll, 0, bgrW, bgrH);

    Rect fromRect2 = new Rect(bgrW - bgrScroll, 0, bgrW, bgrH);
    Rect toRect2 = new Rect(0, 0, bgrScroll, bgrH);

    if (!reverseBackroundFirst) {
        canvas.drawBitmap(bgr, fromRect1, toRect1, null);
        //canvas.drawBitmap(bgrReverse, fromRect2, toRect2, null);
    }
    else{
        canvas.drawBitmap(bgr, fromRect2, toRect2, null);
        //canvas.drawBitmap(bgrReverse, fromRect1, toRect1, null);
    }

     canvas.drawText(mPosX+ "  X  "+mPosY, 40, 70, fpsPaint);
     canvas.drawText(imageW+ "  X  "+imageH, 40, 100, fpsPaint); 

     canvas.drawText(screenW+ "  X  "+screenH, 40, 150, fpsPaint);
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    thread = new GameThread(getHolder(), this);
    thread.setRunning(true);
    thread.start();
}
@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    boolean retry = true;
    thread.setRunning(false);
    while (retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {

        }
    }
}

class GameThread extends Thread {
    private SurfaceHolder surfaceHolder;
    private ImageMove imageView;
    private boolean run = false;

    public GameThread(SurfaceHolder surfaceHolder, ImageMove imageView) {
        this.surfaceHolder = surfaceHolder;
        this.imageView = imageView;
    }

    public void setRunning(boolean run) {
        this.run = run;
    }

    public SurfaceHolder getSurfaceHolder() {
        return surfaceHolder;
    }

    @Override
    public void run() {
        Canvas c;
        while (run) {
            c = null;

            //limit frame rate to max 60fps
            timeNow = System.currentTimeMillis();
            timeDelta = timeNow - timePrevFrame;
            if ( timeDelta < 16) {
                try {
                    Thread.sleep(16 - timeDelta);
                }
                catch(InterruptedException e) {

                }
            }
            timePrevFrame = System.currentTimeMillis();

            try {
                c = surfaceHolder.lockCanvas(null);
                synchronized (surfaceHolder) {
                   //call methods to draw and process next fame
                    gameView.onDraw(c);
                }
            } finally {
                if (c != null) {
                    surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

        invalidate();
        return true;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:50:50.500

我得到了答案实际上我是在没有全屏的情况下获取坐标，而我收到的坐标实际上是根据全屏的

# java - Java 无法获得修改后 Int 的正确值

> ID：15402533
> 
> 赞同：0
> 
> 时间：2013-03-14T06:21:03.943
> 
> 标签：java, swing, methods

所以我有三个类，一个是主 GUI，一个用于方法的类和一个用于登录窗口的类。

在我的方法课中，我有

```
public int IsLoggedOn = 0;

public int returnLoggedinValue (){
    return  this.IsLoggedOn ;
}
public int setLoggedOn(){
    System.out.println("logged on ");
    return 1;
} 
```

在我拥有的按钮的登录窗口动作监听器中

```
methodWin meth = new methodWin ();
methodWin.IsLoggedOn = methodWin.setLoggedOn();
System.out.println("logged in value "+methodWin.IsLoggedOn); 
```

然后返回主 GUI 以结束启动登录窗口的操作侦听器

```
methodWin meth = new methodWin ();
int ar = meth.IsLoggedOn;
System.out.println("ar is "+ ar);
if (ar==1){
    System.out.println("user is logged in");
    jTextField1.setEnabled(true);
    jButton1.setEnabled(true);
} 
```

我遇到的问题是，如果我从登录窗口中打印出 IsLoggedOn 的值，它已正确地将其更改为“1”，但是当我检查 IsLoggedOn 的值时又回到主 GUI，我得到“0”

抱歉，这对整个 Java 来说都是新手，不太清楚为什么没有看到更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:27:14.800

在每种情况下，您都初始化了一个新的 methodWin 实例，只有在登录窗口中，您才会将初始值从 0 更改为 1，这并没有完成。在主 GUI 中，初始值没有被触及，所以它保持为 0。

我假设你会想以某种方式只初始化一个 methodWin 实例并让两组代码都引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:57:08.050

你可以试试这个：

```
 public class MethodWin{
     private int isLoggedOn=0;
     private static MethodWin objectMethodWin = new MethodWin();
     private MethodWin(){}
     public static MethodWin getInstance(){
         return objectMethodWin;
     }
     public void setIsLoggedOn(int value){
         this.isLoggedOn=value;
     }
     public int getIsLoggedOn(){
         return this.isLoggedOn;
     }
 } 
```

在您的登录窗口操作中：

```
 MethodWin meth = MethodWin.getInstance();
 meth.setIsLoggedOn(1);
 System.out.println("logged in value "+ meth.getIsLoggedOn); 
```

在主 GUI 中：

```
 MethodWin meth = MethodWin.getInstance();
 int ar = meth.getIsLoggedOn();
 System.out.println("ar is "+ ar);
 if (ar==1){
     System.out.println("user is logged in");
     jTextField1.setEnabled(true);
     jButton1.setEnabled(true);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:28:56.673

```
 methodWin.IsLoggedOn = methodWin.setLoggedOn(); 
```

在日志中，您将 IsLoggedOn 的值设置为 1；但在主 GUI 中你没有这样做。

将 IsLoggedOn 声明为静态

```
 public static int IsLoggedOn = 0; 
```

我希望这会有所帮助

# javascript - 带有 XmlDataSource 的客户端上的 Realod DataList

> ID：15402538
> 
> 赞同：0
> 
> 时间：2013-03-14T06:21:32.040
> 
> 标签：javascript, jquery, asp.net

您好，我想在定期的时间间隔后使用 jquery 或 javscript 在客户端重新加载 Datalist，以便我可以获得最新的 RSS 新闻提要，这是我的代码

```
<asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="http://www.example.com/category/test/feed/"
   XPath="rss/channel/item"></asp:XmlDataSource>
<asp:DataList ID="dlRss" runat="server" DataSourceID="XmlDataSource1">
   <ItemTemplate>
      <label style="color: #222222; float: left; font-size: 16px; margin-top: 5px; width: 190px;">
      <%#  XPath("title")%></label>
      <label style="color: #444444; display: inline-block; font-size: 11px; margin-bottom: 5px;
         width: 190px;">
      <%# Convert.ToDateTime(XPath("pubDate")).ToShortDateString() + " @" + Convert.ToDateTime(XPath("pubDate")).ToShortTimeString()%></label>
      <label style="color: #444444; display: inline-block; font-size: 13px; width: 190px;">
      <%#XPath("description").ToString().Length <= 200 ? XPath("description") : XPath("description").ToString().Substring(0,200) + "...<a href='" + XPath("link").ToString() + "' target='_blank'>more</a>"%></label>
      <br />
   </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:28:28.160

您不能`DataSource`在客户端设置。
但是您可以做的是`reload`在特定时间间隔后显示您的页面。
**否则**，您将不得不使用带有 jtemplate 和 jquery 的 http 处理程序。

这里有一些链接可以帮助你
[http://johnnycoder.com/blog/2008/12/18/jtemplates-with-jquery-ajax-and-json/](http://johnnycoder.com/blog/2008/12/18/jtemplates-with-jquery-ajax-and-json/)
[http://www.dotnetcurry.com/ShowArticle.aspx?编号=573](http://www.dotnetcurry.com/ShowArticle.aspx?ID=573)

# visual-studio-2010 - TFS SCC：如何获取 Visual Studio 的待更改面板中列出的新文件

> ID：15402541
> 
> 赞同：3
> 
> 时间：2013-03-14T06:21:46.987
> 
> 标签：visual-studio-2010, tfs, tortoisesvn

我们正在尝试使用 Microsoft Team Foundation Server 源代码控制来替代 SVN。

因此，如果这种过渡的摩擦最小，那就太好了。

例如，在 SVN 中，每当我在文件夹中创建新文件，然后使用“Tortoise SVN 检查修改”时，我都会得到一个添加文件、删除文件和编辑文件的主列表。

我知道在 Visual Studio 的 TFS SCC 中，等价的是 Pending Changes 面板。但是，此面板仅列出已编辑的文件。我怎样才能获得该面板中列出的新文件，就像 SVN 一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:45:28.100

工作流程实际上取决于您使用`Local Workspaces`的是传统的`Server Workspaces`. 当您来自 SVN 时，`Local Workspaces`可能会很合适。

**本地工作区（TFS 2012 的新功能）**

`Local Workspaces`是 TFS 在 DVCS 上的尝试，实际上为您提供了更像 SVN 的体验。带有本地工作空间的`pending changes`窗口分为以下区域：

*   `Included Changes`- 这实际上是**已经**在源代码管理中已更改的文件。

*   `Excluded Changes`- 这些都是工作区中不在源代码管理中的所有文件。这就像您`Added`在 SVN 中的文件。

**服务器工作区**

`Server Workspaces`是传统的 TFS 工作区方法。**在**显式添加项目之前，它不在源代码管理中。

这里有一篇关于差异的更详细的文章：http: [//msdn.microsoft.com/en-gb/library/bb892960.aspx](http://msdn.microsoft.com/en-gb/library/bb892960.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:43:53.520

将新文件拖放到`Source Control Explorer`Visual Studio 中的正确文件夹中，然后会询问是否还有需要从源代码管理中排除的文件。如果这样做了，它们就在`Pending changes window`. 像 SVN 这样的实现是从 Visual Studio 2012 开始的，但它仍然会出现问题并且不在那个面板中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T17:43:46.167

我看到这是一个老问题，但我相信答案就在 Visual Studio 的“ **Pending Changes Panel** ”本身。请注意“**排除的更改 (nnn)** ”部分。在该标题下方，您应该会找到“ **Detected: nnn add(s)** ”。您可以在此处看到您的“新文件”。

对于它的价值，我发现“Pending Changes”是一个笨拙的功能，因为它似乎永远不会感知上下文。我发现我经常不得不“清除”许多与手头的解决方案/项目根本无关的文件。

# python - 将变量从 python 传递到 shell 脚本

> ID：15402550
> 
> 赞同：0
> 
> 时间：2013-03-14T06:22:41.377
> 
> 标签：python, bash, shell, wxpython, wxwidgets

嗨，伙计们，我是脚本新手，我正在用 python 和 wxpython 做小项目，它可以实现自动化。现在我在将变量从 python 发送到 shell 脚本时遇到问题。我必须连接 ftp，然后下载一个用 BASH（第一个脚本）编写的文件。该 bash 脚本调用另一个 bash 脚本（第二个脚本），该脚本也在 ftp 服务器中。但是第一个脚本中没有硬编码 2 个脚本名称。所以我必须从我的 python 脚本中发送那个“脚本名称”，这是我现在无法做到的。所以我需要你的帮助来解决我的问题，已经通过谷歌但找不到任何东西。

提前致谢。

我已经尝试直接运行它，但它仍然不需要第二个参数，所以我已经完成了一次脚本。发现，

当 $2 $3 $7 已经在第一个脚本中配置时（这些在 myproject.sh 中内置）

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:28:50.677

最快和最简单的方法是让您的 Python 脚本创建一个使用 bash 语法设置变量名的文件，然后让您的第一个 bash 脚本获取它。采购它基本上会设置该变量。

因此，在 Python 中，您希望在某处输出该文件：

```
name_of_script="/path/to/second/script.sh"

with open("/my/path/scriptnamevar.sh", "w") as f:
    #Output to bash-recognized variable setting syntax
    f.write("SCRIPT_NAME={}".format(name_of_script)) 
```

然后在你的第一个脚本中，你只需要 source scriptnamevar.sh （或者你决定调用它的任何东西）。

```
source /my/path/scriptnamevar.sh

# This should output whatever name_of_script was in python
echo $SCRIPT_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:36:21.093

您可以使用命令行参数。由于您使用 subprocess 来调用第一个 bash 脚本，您可以将其修改为如下所示：

```
subprocess.call(["bashScript1Name", "bashScript2Name"]) 
```

然后在 bashScript1Name 中，第二个脚本的名称将在变量 $1 中

# android - SDK模拟器Eclipse中的Android进程acore错误

> ID：15402551
> 
> 赞同：-4
> 
> 时间：2013-03-14T06:22:52.743
> 
> 标签：android, process, android-emulator

当我在 android SDK 模拟器上运行和测试 android 应用程序时，它首先显示此错误并在 1 分钟后自动显示。我不知道如何克服它。请整理一下 您可以在下面提到的屏幕截图中看到错误： ![在此处输入图像描述](../Images/e7a5aa92ade0605fbb92e703b0df9209.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:33:22.003

有几个已知的修复程序已经设法解决了这个类似的问题。

1.  AVD 没有足够的 RAM。尝试通过从 AVD 管理器中编辑来增加 AVD 的 RAM。*来源：[https ://stackoverflow.com/a/9384040/450534](https://stackoverflow.com/a/9384040/450534)*

2.  您使用的 AVD 可能已损坏。解决方案是删除当前的 AVD 并使用相同的设置创建新的（如果这对您的应用程序运行很重要）。*来源：[https ://stackoverflow.com/a/2199621/450534](https://stackoverflow.com/a/2199621/450534)*

# php - zoneminder 没有为流创建本地 unix 套接字

> ID：15402561
> 
> 赞同：2
> 
> 时间：2013-03-14T06:23:46.443
> 
> 标签：php, sockets, ubuntu

我的配置是：

*   Ubuntu 精确 12.04
*   Zoneminder（来自 ubuntu 官方存储库）1.25.0
*   阿帕奇 2.2.22
*   php 5.3.10

基本上我的系统日志（和由 apache zoneminder cgi-bin 创建的 web_php.log）显示

```
03/12/13 17:42:20.307107 web_php[5514].ERR [socket_sendto( /var/run/zm/zms-347773s.sock ) failed: No such file or directory] at /usr/share/zoneminder/includes/functions.php line 2322 
```

当我查看 /var/run/zm

```
srwxr-xr-x  1 www-data www-data    0 Mar 12 17:42 zmdc.sock
-rw-r--r--  1 www-data www-data    5 Mar 12 17:42 zm.pid
srwxr-xr-x  1 www-data www-data    0 Mar 13 18:01 zms-347773w.sock 
```

请注意套接字文件名中的 w 与 s。关于为什么没有创建 s 文件的任何想法。

# php - 拉取所有相关行 MySQLi

> ID：15402563
> 
> 赞同：0
> 
> 时间：2013-03-14T06:23:56.977
> 
> 标签：php, mysql, mysqli

我必须从别人制作的表格中取出并将其打印到网页上。问题是，该列名存储在行中。例如：

```
FIELD_NAME| FIELD_VALUE
______________________
first-name| John
last-name | Smith 
```

这就是我要获取数据的方式

```
$tableRow = '';
$sql ="SELECT * FROM `wp_cf7dbplugin_submits` WHERE form_name = '".$nameOfForm."' ";
$result = $mysqli->query($sql);
while($tableData = $result->fetch_assoc()){

$fieldName = $tableData['field_name'];
$fieldValue = $tableData['field_value'];

//FIRST NAME
if($fieldName == 'first-name'){
$firstName = $fieldValue;
}
//LAST NAME
if($fieldName == 'last-name'){
$lastName = $fieldValue;
}

//BUILD A ROW FOR THE TABLE
$tableRow .='
<th>'.$firstName.'</th>
<th>'.$lastName.'</th>
';

} 
```

当我这样做时 ，它只会显示一个结果，`$tableRow =`而不是 `$tableRow .=` 它只会显示一个结果，但是当我这样做时，`$tableRow .=`它只会显示空的但正确数量的 s。

如何使用从这样的表中提取的所有结果填充 html 表？

编辑：我忘了提到整个表是这样的：

```
<table id="theTable">
            <thead>
                <tr>
                    <th style="width:100px;">First Name</th>
                    <th style="width:100px;">Last Name</th>

                </tr>
            </thead>
            <tbody id="rowsGoHere">

            </tbody>
        </table> 
```

我通过 ajax 回显 PHP 结果，

```
//ECHO BACK RESULTS
    $JSONData = array("true", $tableRow); 
    echo $_GET['callback']."(".json_encode($JSONData).")"; 
```

并用它来插入表格

```
var trueEncV = encodeURIComponent("true");

                $.getJSON("pullTableData.php?callback=?",
                      {
                        trueV: trueEncV
                      }, 
                      function(dataBack){
                        alert(dataBack);
                        $('#rowsGoHere').html(dataBack[1]);
                    }
                ) 
```

这一切都很好，花花公子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:33:16.853

根据您更新的代码，`<tr>`标签丢失了。此外，`<tbody>`您应该使用`<td>`标签而不是`<th>`标签。

```
$tableRow .='
  <tr>
    <td>'.$firstName.'</td>
    <td>'.$lastName.'</td>
  </tr>
'; 
```

你能试一下吗

```
echo json_encode($JSONData); 
```

代替

```
echo $_GET['callback']."(".json_encode($JSONData).")"; 
```

# python - 从 TXT 文件中删除标点和大写

> ID：15402569
> 
> 赞同：0
> 
> 时间：2013-03-14T06:24:15.120
> 
> 标签：python

我在python中有一个小问题。我有脚本：

```
import nltk
def analyzer():
    inputfile=raw_input("Which file?: ")
    review=open(inputfile,'r')
    review=review.read()
    tokens=review.split()

    for token in tokens:
        if token in string.punctuation:         
            tokens.remove(token)
        token=tokens.lower() 
```

它应该导入一个txt文件，将其拆分为单词，然后删除标点符号并将所有转换为小写。应该不难吧？它只是原封不动地返回标点符号和大写字母。没有错误信息，它似乎只是忽略了部分代码。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:35:47.507

我假设您已`string`导入模块。换行

```
if token in string.punctuation:         
     tokens.remove(token)
     token=tokens.lower() 
```

和

```
token = token.translate(None,string.punctuation).lower() 
```

此外，字符串在 python 中是不可变的，因此分配给它们只是重新绑定它不会更改原始标记的名称。如果您想更改令牌，则可以执行以下操作

```
tokens = [token.translate(None,string.punctuation).lower() for token in tokens] 
```

我个人会像这样清理整个事情：

```
def read_tokens(path):
    import string
    with open(path) as f:
        tokens = f.read().split()
        return [ token.translate(None, string.punctuation).lower() for token in tokens ]

read_tokens(raw_input("which file?")) 
```

请注意，这只是对您的原始意图的忠实翻译，这意味着“单词”`'test.me'`会变成`['testme']`而不是`['test','me']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:48:14.803

您的代码中有几个问题：

一、`split()`不能拆分标点符号

其次，如果使用`for token in tokens`,`token`实际上是元素的副本，`tokens`所以`token`更改就不会更改`tokens`。

试试这个：

```
import string
import re
def analyzer():
    inputfile=raw_input("Which file?: ")
    review=open(inputfile,'r')
    review=review.read()
    tokens=[e.lower() for e in map(string.strip, re.split("(\W+)", review)) if len(e) > 0 and not re.match("\W",e)]

    print tokens

analyzer() 
```

该模式`[FUNC(x) for x in LIST if COND]`给出了一个由 FUNC(x) 构造的列表，其中 x 是当 COND 为真时来自 LIST 的元素。您可以参考[filter](http://docs.python.org/2/library/functions.html#filter)和[map](http://docs.python.org/2/library/functions.html#map)。对于正则表达式部分，您可以查看[re](http://docs.python.org/2/library/re.html)

# svn - SVN 可以根据文件的修订次数来判断或排序文件吗？

> ID：15402580
> 
> 赞同：0
> 
> 时间：2013-03-14T06:25:13.370
> 
> 标签：svn, version-control

我想知道有没有办法找到在 svn 中最常受到影响的文件。例如，如果一个文件被修改了 100 次，而其他文件只被修改了 30-40 次，我想识别那个被修改了 100 次的文件。

那可能吗？

感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:40:10.590

我有一个库用于 SVN 存储库的统计信息，虽然它没有直接回答您的问题，但它提供了很多关于存储库的见解。

该程序称为[StatSVN](http://www.statsvn.org/)。这是来自他们的概述：

> StatSVN 从 Subversion 存储库中检索信息并生成描述项目开发的各种表格和图表，例如
> 
> *   代码行的时间线
> *   每个开发人员的代码行
> *   时钟时间的活动
> *   作者活动
> *   每个模块的作者活动
> *   作者最近提交的链接到 ViewVc
> *   每个目录的统计信息
> *   文件数
> *   平均文件大小
> *   最大的文件
> *   ***修订最多的文件***
> *   目录大小
> *   存储库标签 每个版本的 LOC 数。
> *   具有文件计数和代码行的存储库树
> *   LOC和Churn LOC的演变和每天的变化量
> *   Repo 映射过去 30 天的 repo 的动态分层视图

# ios - “应用程序未能通过代码验证”Phonegap 构建应用程序无法上传到 App Store

> ID：15402583
> 
> 赞同：2
> 
> 时间：2013-03-14T06:25:19.033
> 
> 标签：ios, cordova, codesign, phonegap-build

我已经使用 Phonegap 开发了一个应用程序。我可以使用开发证书构建应用程序进行测试。该应用程序运行良好。

现在我想将应用上传到应用商店。但我得到一个错误说

“应用程序失败的共同签名验证。签名失败，包含不允许的权利，或者没有使用 iPhone 证书签名。”

![在此处输入图像描述](../Images/9cfcf14a998dce1c7bed2c630bd6721e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:43:44.463

在谷歌搜索了很多时间后，我找到了解决方案。更多详情请参考链接 - >[点击这里](http://community.phonegap.com/nitobi/topics/app_store_submission_application_failed_codesign_verification?page=1)

> 需要注意的一件事是，还请确保通过选择与密钥关联的证书而不是密钥来导出 .p12。（这确保我们拥有正确的通用名称和有效的证书）

这是问题的根源。有一天它可能会帮助某人。

# java - 使用 C 和 JAVA 实现 FUSE

> ID：15402584
> 
> 赞同：0
> 
> 时间：2013-03-14T06:25:24.570
> 
> 标签：java, mysql, c, samba, fuse

我正在尝试在**Mysql 数据库**之上创建一个**fuse 文件系统**，并从**Windows 客户端**使用它，并且此客户端请求通过SAMBA传递到**linux 端的 Java 服务器！**

 ******我需要知道如何设置这种实现

**在职的：**

第 1 步：Windows 端的客户端将登录。

第2步：登录后用户给出一个'ls'命令。

第 3 步：此命令应作为 C 函数处理

第 4 步：C 函数依次使用 JSONCpp 或 Thrift 将命令作为参数发送给 Java 服务器

第 5 步：此函数调用在 Linux 上运行的 Java 服务器。

第 6 步：Java Server 与 Mysql 数据库交互并获取结果

第 7 步：此结果应显示在 windows 的客户端上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:43:14.637

1.  编写一个包含您要处理的回调的 fuse 文件系统。
2.  通过 Java 代码侦听的本地套接字转发熔断器回调。
3.  Java 服务器运行查询并通过套接字返回结果（在 2 中）。
4.  Fuse 系统返回它从套接字读取的信息（在 2 中）
5.  通过 samba 共享您的保险丝系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:41:53.257

我不完全了解您想从哪种语言调用哪种语言功能。

但是有两种主要的跨语言交流方式。

*   **您可以简单地使用 Sockets**。在语言 A 的程序中创建一个侦听特定端口的套接字连接。在另一种语言 B 中，将参数传递给 A 程序中正在侦听输入的函数。它将执行该函数并将输出返回给 B 的程序。您可以在线轻松找到 JAVA 和 C 的套接字示例。

*   **通过扩展语言进行交流**。这比套接字更底层。它基本上是从另一种语言 B 中调用另一种语言 A 的函数/库。例如，您可以[像这样](http://docs.python.org/2/extending/extending.html)将 Python 扩展到C。[您可以使用Java Native Interface](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)从 JAVA 调用 C 库函数。

根据您的使用和舒适程度，您可以使用上述任何一种方法来实现跨语言服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T06:38:36.410

对于 windows 端，你可以从 DokanMirror 开始。实现大多数回调，并且是一个足够好的框架。Linux 端将主要是您自己的代码，如 Socket 接口。使用 TCP/IP 套接字是一种过度杀伤，请注意线程挂起和超时。

一个。使登录成为一个用户空间应用程序，它将直接连接到您的 linux 端并进行身份验证。湾。然后，此用户空间应用程序将安装和挂载一个虚拟驱动器（使用 dokan）。C。在 dokan-callbacks（在用户空间）中，您可以使用 tcp/ip 连接到您的 linux 机器。

你说的超过桑巴是什么意思？如果您打算共享您的文件系统，那么 perreal 的答案（第 5 点）是正确的。******

# iphone - 连接间隔核心蓝牙

> ID：15402588
> 
> 赞同：4
> 
> 时间：2013-03-14T06:25:48.237
> 
> 标签：iphone, ios, core-bluetooth

有什么方法可以通过 Core Bluetooth 更改连接间隔？我正在将大块数据传输到外围设备，并且传输数据需要花费很多时间。我想减少这个时间。

如果可以使用核心蓝牙从 iOS 写入或更新连接间隔，请告诉我。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T07:52:23.127

仅通过从外围设备向 iOS 发送连接参数更新。Min:20ms (parameter=16) Max:40 (parameter=32) 是根据CoreBluetooth 的最佳合法参数。实际上，当 Min=10 Max=20 或 30 时，CoreBluetooth 将选择大约 20ms 而不是 30ms，这样您将获得更好的性能。烦人的我们无法设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T14:23:05.183

```
[_manager setDesiredConnectionLatency:CBPeripheralManagerConnectionLatencyLow forCentral:_central]; 
```

我在我创建的 iOS 外设应用程序上使用了这种方法。你仍然不能低于 20 毫秒。非常令人沮丧，因为我需要低于 16 毫秒。目前看来不可能，除非它是 HID 配置文件（它们允许 11.25 毫秒）——但您无法从 iOS 设备创建 HID 配置文件。

> 如果您在 Bluetooth Smart 链接的另一端有 iOS 设备，Apple 会对最小连接间隔施加自己的限制。这个值是 20ms 而不是官方蓝牙 4.0 规范的最小值 7.5ms。Apple 这样做是为了确保单个应用程序不会占用蓝牙硬件上的所有可用带宽，和/或过快耗尽电池。有关此限制的详细信息，请参阅 Apple 蓝牙设计指南 (PDF) 第 18 页的连接参数部分。
> 
> 请注意，iOS 不允许您从 iOS 端设置或请求连接参数。CoreBluetooth CBCentralManager 对象的 connectPeripheral 方法采用“选项”参数，但这不包括连接参数。相反，slave 必须在连接后使用新的所需参数请求连接更新，然后 iOS 将根据上面链接的设计指南文档中的标准接受或拒绝它们。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-22T18:12:28.577

我相信做到这一点的方法是使用计时器。

请参阅：[如何在 Objective-C 中编写计时器？](https://stackoverflow.com/questions/3519562/how-do-i-write-a-timer-in-objective-c)

现在，这就是我表示连接间隔的方式。您可以在函数的回调中使用它： - (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error

另外，从Corebluetooth框架来看，目前还没有办法从Central端更新连接间隔。

但是，我对您的连接间隔信息感兴趣，henrik。

# jsf-2 - 单击 a 时调用支持 bean 操作方法

> ID：15402590
> 
> 赞同：3
> 
> 时间：2013-03-14T06:26:05.890
> 
> 标签：jsf-2

如何使`mainDiv`可点击并调用支持 bean 操作方法？

```
<h:panelGroup layout="block" id="mainDiv">
    <h:panelGroup layout="block" style="float:left;">
        <h:outputText value="#{messageItem.sendBy.registerName}"/>
    </h:panelGroup>
    <h:panelGroup layout="block" style="float:right;">
        <h:outputText value="#{messageItem.sendDate}">
            <f:convertDateTime pattern="HH:mm"/>
        </h:outputText>
    </h:panelGroup>
</h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:28:21.437

最简单的方法是将其内容包装在 中`<h:commandLink>`，如有必要，使用`<f:ajax>`. 使用 CSS`display:block`让链接跨越整个 div。

```
<h:panelGroup layout="block" id="mainDiv">
    <h:commandLink action="#{bean.action}" style="display:block;">
        <f:ajax />
        ...
    </h:commandLink>
</h:panelGroup> 
```

或者，鉴于您使用 PrimeFaces 的问题历史记录，您也可以使用`<p:remoteCommand>`.

```
<h:panelGroup layout="block" id="mainDiv" onclick="functionName()">
    ...
</h:panelGroup>
<p:remoteCommand name="functionName" action="#{bean.action}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T01:59:21.283

你可以`f:ajax`使用`panelGroup`

```
<h:panelGroup>
    <f:ajax event="click" listener="#{adminPanel.test}"></f:ajax>
    xxx
</h:panelGroup> 
```

结果html：

```
<span id="j_idt169" onclick="mojarra.ab(this,event,'click',0,0)">
    xxx
</span> 
```

# android - 在android中不调用隐式意图

> ID：15402593
> 
> 赞同：4
> 
> 时间：2013-03-14T06:26:17.700
> 
> 标签：android, android-intent

这是我的android清单文件：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".view.MainActivity"
            android:label="@string/app_name" 
            android:screenOrientation="reverseLandscape">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />

                <data
                    android:host="mocha"
                    android:path="/RTT/reset"
                    android:scheme="content" />
            </intent-filter>
        </activity>
        <activity
            android:name="ihpc.mocha.fakertt.view.SessionTimeOutActivity"
            android:label="@string/app_name" 
            android:screenOrientation="reverseLandscape">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />

                <data
                    android:host="mocha"
                    android:path="/RTT/sessionTimeOut"
                    android:scheme="content" />
            </intent-filter>
        </activity>
    </application> 
```

它表明我在这里注册了隐式意图

```
<data android:host="mocha"
 android:path="/RTT/reset"
 android:scheme="content" /> 
```

现在当我从另一个应用程序调用它时

```
Intent gameInfoIntent = new Intent(Intent.ACTION_VIEW);
                gameInfoIntent.setData(Uri.parse("content://mocha/RTT" 
                        + "/reset"));
                gameInfoIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                PackageManager packageManager = getPackageManager();
                List<ResolveInfo> activities = packageManager
                        .queryIntentActivities(gameInfoIntent, 0);
                boolean isIntentSafe = activities.size() > 0;    
                if (isIntentSafe) {
                    startActivity(gameInfoIntent);
                    finish();
                } else {
                } 
```

它显示没有找到活动

```
"content://mocha/RTT/reset" 
```

我也尝试将此代码从相同的活动中调用以进行测试，但结果是相同的。

请建议我在哪里以及我做错了什么？

更新：

我可以通过在评论中添加建议的代码来调用会话超时活动。我已经像这样更新了我的清单：

```
 <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="mocha"
                android:path="/RTT/reset"
                android:scheme="content" />
        </intent-filter>
    </activity>
    <activity
        android:name="ihpc.mocha.fakertt.view.SessionTimeOutActivity"
        android:label="@string/app_name" 
        android:screenOrientation="reverseLandscape">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="mocha"
                android:path="/RTT/sessionTimeOut"
                android:scheme="content" />
        </intent-filter>
    </activity>
</application> 
```

但我仍然无法调用主要活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:42:04.913

`manifest`我已经通过在我的文件中添加以下行来解决我的问题

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /> 
```

这是我的新外观清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ihpc.mocha.rtt"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="12" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:largeHeap="true"
        android:theme="@android:style/Theme.NoTitleBar" >
        <activity
            android:name="ihpc.mocha.rtt.MainScene"
            android:label="@string/app_name"
            android:screenOrientation="reverseLandscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>
            <intent-filter>

                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />

                <data
                    android:host="mocha"
                    android:path="/RTT/reset"
                    android:scheme="content" />
            </intent-filter>
        </activity>
        <activity
            android:name="ihpc.mocha.rtt.SessionTimeOutActivity"
            android:label="@string/app_name"
            android:screenOrientation="reverseLandscape" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />

                <data
                    android:host="mocha"
                    android:path="/RTT/sessionTimeOut"
                    android:scheme="content" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

希望这对其他开发人员也有帮助！！！

# regex - 正则表达式程序不打印

> ID：15402594
> 
> 赞同：3
> 
> 时间：2013-03-14T06:26:26.840
> 
> 标签：regex, perl

我正在尝试从文件中读取数据并按顺序打印包含所有小写元音（'a'、'e'、'i'、'o'、'u'）的单词（每行一个）。他们不需要彼此相邻

```
#!/usr/local/bin/perl
#$data_file = "words.txt;
open (MYFILE, $data_file) or die "can't find file - $!";

while (<MYFILE> =~ m/.*a.*e.*i.*o.*u.*/i)
{
    print "$_";
}

close(MYFILE); 
```

它没有打印任何东西：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T06:41:33.007

问题不是正则表达式，而是你如何使用文件句柄，试试这个：

```
while (<MYFILE>) {
    print if /.*a.*e.*i.*o.*u.*/i;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T06:44:51.273

我认为你的正则表达式很好。您遇到的错误是您从文件中读取的方式。另外，你在你的帖子中评论了它，不知道这是不是错误。

```
#!/usr/local/bin/perl

use strict;
use warnings;

my $data_file = "words.txt";
open (my $MYFILE, "<", $data_file) or die "can't find file - $!";

while (my $line = <$MYFILE>)
{
    chomp($line);
    print "$line\n" if $line =~ m/.*a.*e.*i.*o.*u.*/i;
}

close ($MYFILE); 
```

你应该总是`use strict;`和`use warnings;`. 您还应该使用 open 的三参数版本来指定它是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:45:35.210

我会这样做：

```
% perl -ne 'print if /a.*e.*i.*o.*u/' < words.txt 
```

使用 Perl 作为瑞士军刀。

实际上，我会这样做：

```
% cat words.txt | perl -ne 'print if /.*/' | head 
```

然后，当它显示 word.txt 的前 10 行时，我会：

```
% cat words.txt | perl -ne 'print if /a/' | head 
```

然后

```
% cat words.txt | perl -ne 'print if /a.*e/' | head 
```

：

```
% cat words.txt | perl -ne 'print if /a.*e.*i.*o.*u/' | head
% cat words.txt | perl -ne 'print if /a.*e.*i.*o.*u/' | less
% cat words.txt | perl -ne 'print if /a.*e.*i.*o.*u/' | less > results.txt 
```

作为琐事，请注意“更少”（和“更多”）在不写入终端时充当传递。

这种风格一次一步地开发您的程序，您可以在其中看到每一步的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:17:52.047

MYFILE 在列表上下文中。因此，将 m// 应用于列表将作用于 MYFILE 的标量上下文。

# ios - UIButton 子类：buttonWithType: 返回 UIButton 还是子类实例？

> ID：15402599
> 
> 赞同：0
> 
> 时间：2013-03-14T06:26:50.060
> 
> 标签：ios, objective-c, uibutton

如果我子类化`UIButton`并使用它的`buttonWithType:`方法创建一个`button`，它会返回我一个`UIButton`或子类实例吗？

例如：

```
@interface MyButton : UIButton
@end

MyButton *button = [MyButton buttonWithType:UIButtonTypeCustom]; 
```

或者我必须使用`alloc`and`initWithFrame`来代替？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:28:04.803

抱歉，我刚刚从 Apple 的文档中找到了这个：

> 此方法是一个方便的构造函数，用于创建具有特定配置的按钮对象。如果您将 UIButton 子类化，则此方法不会返回您的子类的实例。如果要创建特定子类的实例，则必须直接分配/初始化按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:01:56.097

`buttonWithType`是一个`class method`，`UIButton`它返回`UIButton`类型，虽然你`MyButton`继承`UIButton`，它也不能返回`MyButton`类型

更多信息你可以看到我之前的答案：[这个](https://stackoverflow.com/questions/14555717/custom-class-inheriting-from-uibutton-not-detected-in-iskindofclass/14555793#14555793)

# ios - Xcode 的自动拼写检查器

> ID：15402600
> 
> 赞同：18
> 
> 时间：2013-03-14T06:26:53.537
> 
> 标签：ios, xcode

是否有任何拼写检查器（或插件）`Xcode`会*自动*对我的所有字符串进行拼写检查？例如

```
self.label.text = @"Spell check this"; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-31T03:42:19.060

你不需要插件，你只需要打开“打字时检查拼写”

**编辑 > 格式 > 拼写和语法 > 键入时检查拼写**

![在此处输入图像描述](../Images/63495d9ab1945e83a995a34a4bb72662.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-06T15:16:09.703

[Scribe 插件](https://scribeplugin.com)可以做到这一点（除其他外）。您可以将其设置为仅检查字符串，或同时检查字符串和注释。

完全披露：我是插件的作者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:31:07.203

无论您在引号中写什么，都被视为字符串。

**XCode 不是文字处理器**，它可能是一些方法名、选择器、密码，所以任何 IDE 都无法为您提供拼写检查。

编译器确实对变量进行拼写检查，而不是对常量字符串进行拼写检查。

即使你想要，这里也适合你：

**编辑 -> 格式 -> 拼写和语法 -> 立即检查文档 (cmd + ;)**

# html - 关于 float none 和 float left 元素的负边距的混淆

> ID：15402601
> 
> 赞同：2
> 
> 时间：2013-03-14T06:26:54.487
> 
> 标签：html, css

我觉得 CSS 比 C++ 更难更令人困惑，因此我几乎没有问题。

考虑以下 html 正文

```
<div id="mydiv1">12345~~~~~~~~/</div><div id="mydiv2">+_______67890</div> 
```

和 CSS

```
#mydiv1 {
    float: left;
    background-color: red;
    margin-right: -30px;
}

#mydiv2 {
    float: left;
    background-color: blue;
} 
```

看起来像这样（在我最新的 Chrome 中）

![在此处输入图像描述](../Images/8b004c48cc7687bb8af183af63a33d54.png)

这对我来说很有意义，因为第二个 div 是浮动的，并且它浮动在第一个 div 上。

另一方面，如果我`mydiv2`仅从内容移动中删除浮动属性，但背景框保持在同一个位置。

![在此处输入图像描述](../Images/700088795cac8a045dae358f2b44a793.png)

1）你能解释一下为什么吗？

现在我将删除边距和浮动，并为两个 div 添加宽度以制作 CSS

```
#mydiv1 {
    background-color: red;
    width: 220px;
}

#mydiv2 {
    background-color: blue;
    width: 240px;
} 
```

它会看起来像这样

![在此处输入图像描述](../Images/341c716b9906d17ec384f73a6c83f3db.png)

但是如果我添加`float: left`它`#mydiv1`突然看起来像这样

![在此处输入图像描述](../Images/b7175152e55adc9091b2e9db6f94ee97.png)

2) 为什么第二个 div 变成两倍高？我通过将`z-index`第一个 div 设置为 -1 来检查它。

PS。我在 CodeAcademy 上完成了教程，并在 smasmingmagazine.com 上阅读了与浮动/保证金相关的文章。可悲的是，它并没有让一切都变得一清二楚。如果你们可以建议可以向我解释这些问题的在线资源或书籍，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:02:42.747

`<div>`是一个*块级*元素，因此它自然地填充了它所在容器的宽度。它使得它的相邻元素在它的上方/下方，但不在它旁边。

现在，当您应用`float`到*块级*元素时，它不再填充容器的宽度，而是填充`width`其内容的宽度。它也失去了强迫它的邻居高于/低于它的能力。

*注意*：棘手的一点是包含*浮动*元素的容器将没有适当的`height`，因为*浮动*元素不再是常规内容流的一部分。（以下是解决方法：[http](http://www.quirksmode.org/css/clearing.html) ://www.quirksmode.org/css/clearing.html ）

关于问题的最后一部分，如果是*浮动*元素，例如。*, 在块级*`#mydiv1`旁边，例如。#mydiv2，然后元素包裹或围绕*浮动*元素流动。这是人们在新闻文章中获取文本以环绕图像的方式之一。*`block-level`*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:01:55.163

当您从 div2 中删除浮动时，它会在浮动 div1 后面，因为浮动元素不会从其内容中获取任何高度。你可以说它脱离了元素的垂直流动。但是，它仍然从内容中占用水平空间。因此，一旦您“了解规则”，结果就如预期的那样。这也应该解释其他示例中的双倍高度。

这是来自[css-tricks.com的一篇很棒的文章](http://css-tricks.com/all-about-floats/)

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:05:00.117

如果我们不给任何像 div 这样的块级元素提供浮动或宽度，那么它会占据容器的整个宽度。

代替浮动，您可以提供一些宽度和显示：内联块。此 display 属性将内联显示内容，其行为类似于块级元素。**

# ruby-on-rails - Redirect_to 和返回渲染

> ID：15402605
> 
> 赞同：6
> 
> 时间：2013-03-14T06:27:05.510
> 
> 标签：ruby-on-rails

```
 def confirm_invite_new_tutor
    redirect_with_msg = false
    @game_school = GameSchool.find(params[:id])
    existing_user_emails = params[:all_emails][:existing_user] || []
    new_users = params[:param_game_school][:game_school_invites_attributes]

if existing_user_emails.present?
      existing_user_emails.each do |existing_user|
        // some code
      end
      redirect_with_msg = true
    end
    if new_users.present? 
      if @game_school.update_attributes(params[:param_game_school])
        redirect_with_msg = true
      else
         render :invite_tutor_form
      end
    end
    if redirect_with_msg 
      redirect_to @game_school, notice: "daw"
     else
      redirect_to @game_school 
    end
  end 
```

如果我正在执行此操作，则会收到错误消息

在此操作中多次调用渲染和/或重定向。请注意，您只能调用渲染或重定向，并且每个操作最多调用一次。另请注意，重定向和渲染都不会终止操作的执行，因此如果您想在重定向后退出操作，则需要执行“redirect_to(...) and return”之类的操作。

如果我使用 return 它会将我带到其他页面，甚至没有显示 flash msg。如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T06:32:15.623

每次您使用`render`或`redirect`在控制器中，其余代码的任何部分都不应该有渲染或重定向，除非它确定它不会被传递。使用您的代码

```
if new_users.present? 
  if @game_school.update_attributes(params[:param_game_school])
    redirect_with_msg = true
  else
    render :invite_tutor_form
  end
end 
```

如果更新属性时验证失败，则您正在运行`render :invite_tutor_form`. 但是代码将继续运行代码的下一部分，即

```
if redirect_with_msg 
  redirect_to @game_school, notice: "daw"
 else
  redirect_to @game_school 
end 
```

所以你得到那个错误。最简单的解决方案是`return`在调用后添加`render`

```
if new_users.present? 
  if @game_school.update_attributes(params[:param_game_school])
    redirect_with_msg = true
  else
    render :invite_tutor_form
    return
  end
end 
```

请注意，当您在包含 的 if 块之后进行更多处理（例如更新其他属性或发送电子邮件）时`return`，这部分代码将不会被执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:30:38.180

`and return`在每个末尾添加`redirect_to`或`render` 如下所示

```
`redirect_to @game_school  and return` 
```

这对你有用

# wso2 - 如何知道 wso2DSS 中的错误消息

> ID：15402606
> 
> 赞同：0
> 
> 时间：2013-03-14T06:27:07.117
> 
> 标签：wso2, wso2esb, wso2dss

是否有 WSO2 数据服务错误代码的链接或参考？

我收到错误代码“401000”，500000，我需要知道该错误代码的确切含​​义，我正在向后端发送错误代码，但我还需要在 WSO2ESB 中发送确切的消息，我们有参数调用 get-property('ERROR_MESSAGE ') .WSO2DSS 中是否有任何属性可以显示确切的错误消息

```
ERROR_CODE = 500000, ERROR_MESSAGE = null, 
```

并将此消息直接发送到后端

```
{"insert_dept_operation":{"deptno":"","deptname":"hr","deptid":"7"}} 
```

实际上dss错误如下

```
 ERROR {org.apache.axis2.transport.http.CommonsHTTPTransportSender} -  DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: emp_DataService
Location: /emp_DataService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: insert_emp_operation
Current Params: {eno=9, esal=45, ename=kk}
Nested Exception:-
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "emp_pkey"
  Detail: Key (eno)=(9) already exists.

org.apache.axis2.AxisFault: DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: emp_DataService
Location: /emp_DataService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: insert_emp_operation
Current Params: {eno=9, esal=45, ename=kk}
Nested Exception:-
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "emp_pkey"
  Detail: Key (eno)=(9) already exists. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:20:50.090

您所指的错误代码实际上是由 ESB 定义的错误代码，而不是来自 DSS。在 DSS 中，我们不提供这样的代码，而只是在故障消息中给出一个“DS 代码”，这里显示为“DATABASE_ERROR”。ESB 错误代码及其含义可在此处找到 [1]。

[1] [http://docs.wso2.org/wiki/display/ESB460/Error+Handling+and+Error+Codes](http://docs.wso2.org/wiki/display/ESB460/Error+Handling+and+Error+Codes)

干杯，安佳娜。

# php - imagettftext 函数中文本的右对齐

> ID：15402611
> 
> 赞同：2
> 
> 时间：2013-03-14T06:27:35.610
> 
> 标签：php

我正在创建带有一些文本的图像，当旋转为 0 时它很好，但是`rotation is > 0`由于文本对齐，图像看起来很糟糕，因为默认情况下对齐是左对齐。因为每个值都是动态的，所以我们无法修复它，请帮助我。

```
$message = 'Thanks, Deep, for making time to have a coffee today Purushottam';
$no_of_characters_line = $temp_data['no_of_characters_line'];
$lines = explode('|', wordwrap($message, $no_of_characters_line, '|'));
// Starting Y position and X position
$y = $temp_data['position_from_top'];
$x = $temp_data['position_from_left'];
$font_size = $temp_data['font_size'];
$rotation_angle = $temp_data['rotation'];
$line_height = $temp_data['line_height'];   

foreach ($lines as $line)
    {
    imagettftext($im, $font_size,$rotation_angle, $x, $y, $black, $font, $line);
    // Increment Y so the next line is below the previous line
    $y += $line_height;
    } 
```

我还附上了示例模板。![在此处输入图像描述](../Images/af2610a81097eada60e5eca76804d944.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:20:27.010

您可以使用[imagettfbbox](http://php.net/manual/en/function.imagettfbbox.php)来计算以像素为单位的字符串大小。然后，使用宽度，您将能够计算将文本向右对齐所需的偏移量。此外，请查看[imagettftext](http://www.php.net/manual/en/function.imagettftext.php)文档以获取一些文本对齐示例。

# java - 实现接口方法时不允许@Override

> ID：15402615
> 
> 赞同：90
> 
> 时间：2013-03-14T06:27:56.387
> 
> 标签：java, extjs, intellij-idea, overriding, gxt

我有标题中提到的问题。您可以说这个线程与另一个线程重复：[如何关闭 IntelliJ IDEA 中注释的错误验证？](https://stackoverflow.com/questions/1525947/how-do-i-turn-off-error-validation-for-annotations-in-intellij-idea)

但是那里给出的解决方案不起作用。他们说我需要采取以下措施：

> 在项目结构中 | 项目对话框，在接口中将项目语言级别更改为 6.0 - @Override。

但是，目前项目语言级别是 6.0，但我仍然看到错误。

维克，这是窗口，在语言级别下没有 JVM 版本（不幸的是，我无法发布图片，因为我有 10 个声望）

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-03-14T09:06:13.927

如果您的项目有多个模块，还要检查每个模块是否使用 6 级或更高级别的语言，或使用项目的语言级别（请参阅 参考资料`Project Settings > Modules > xxx > Language level`）。

修改后，您可能需要重新加载项目。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-07-12T06:07:45.507

在您的模块/项目中，右键单击以查看上下文菜单：

![在此处输入图像描述](../Images/991eff9621876d7fb00697fd725b68f9.png)

选择`Open Module Settings`或按下`F4`。在设置窗口中：

![在此处输入图像描述](../Images/b5e7de1aef9ffc9e3a52f5d41df6b798.png)
设置`Choose Language level`部分的值。

您也应该`Project language level`通过这种方式检查：按`Ctrl`+ `Alt`+ `Shift`+`S`

![在此处输入图像描述](../Images/aa1f5532d5e551f64adb0c556be69a39.png)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-10-21T12:55:46.637

**更简单的解决方案 - 内联**

1.  将插入符号放在`@Override`单词上并将插入符号移动到左侧，直到出现红色灯泡图标。然后点击它。

    [![在此处输入图像描述](../Images/cbf218c6be7ced0d8b68c17186e37484.png)](https://i.stack.imgur.com/UEBL9.png)

2.  单击**将语言级别设置为 6 - 在界面中覆盖**

    [![在此处输入图像描述](../Images/304931073adfeb136bfceae813c94aac.png)](https://i.stack.imgur.com/R2W06.png)

* * *

上述方法是以下方法的**替代**方法：

1.  转到**文件 > 项目结构...**或按`Ctrl`+ `Alt`+ `Shift`+`S`

    [![在此处输入图像描述](../Images/8024a05269eb0902cb5bb627f2b14a35.png)](https://i.stack.imgur.com/Cy6eA.png)

2.  转到**项目设置 > 模块 > 源 > 语言级别**，然后选择 6 或大于 6 的任何级别。

    [![在此处输入图像描述](../Images/187a625ecfac0f8997c87fb24b52f68b.png)](https://i.stack.imgur.com/bckSt.png)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-01-17T02:22:19.770

如果您使用的是 maven，请将 maven 编译器插件添加到项目的 pom.xml 文件中。

```
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

这为我解决了这个问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-14T07:41:52.340

每个模块还有一个语言级别。请检查项目结构中的模块设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-13T23:30:46.203

我在使用多模块 maven 项目时第一次遇到这个问题。正如其他答案/ IDE 建议的那样，我们需要设置语言级别。

为了使项目 IDE 不可知，我没有更改 IDE 的设置，而是使用以下属性更新父 pom，从而解决了该问题。

```
<properties>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
</properties> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-08T02:42:11.920

Jidea **2020.1.2及以上版本**，

1.  转到**项目结构**[ `Ctrl`+ `Alt`+ `Shift`+ `S` ]
2.  选择**模块**子部分
3.  **选择**每个**模块**
4.  在源部分下，**检查语言级别**
5.  **根据需要**更改语言级别****

 **[![在此处输入图像描述](../Images/c68f19966a011742d18e53b466b1e1b3.png)](https://i.stack.imgur.com/1M1VL.jpg)

笔记：

如果您在此更改后遇到以下错误，

```
Error:java: Compilation failed: internal java compiler error 
```

您还必须更改目标字节码版本。

1.  转到**设置**[ `Ctrl`+ `Alt`+ `S` ]
2.  选择**Java 编译器**
3.  在表格中选择模块
4.  更改字节码版本以映射您在上一步中为语言级别选择的内容

[![在此处输入图像描述](../Images/e23292af10aee740acf4d8c595225244.png)](https://i.stack.imgur.com/kH9MV.jpg)**

# java - Java 终结器：可接受的用例？

> ID：15402621
> 
> 赞同：1
> 
> 时间：2013-03-14T06:28:16.363
> 
> 标签：java, garbage-collection, finalizer

我有一个控制器类，在其操作过程中，它使用它维护的执行器来执行任务。如果我只是让 gc 在控制器超出范围时清理它，那么 JVM 似乎并没有死。我假设这是因为默认执行程序没有超时，或者在很长一段时间后超时。

鉴于在控制器仍可访问时永远不应该关闭执行器，并且在控制器被垃圾收集后不会使用执行器，使用终结器是否是安全/可接受的使用：

`@Override public void finalize() { executor.shutdown(); }`

我之所以这么问，是因为每次关于终结器的讨论似乎都归结为*“除非非常具体的情况，否则不要使用，我不会详细说明”。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:32:29.303

executor 没有死的原因是线程不是守护线程，所以它保持 JVM 活着。见`Thread.setDaemon(boolean)`。

现在不是使用终结器的好时机。终结器应该只用于清理本地资源（例如通过 JNI 访问的资源）。

# django - django 站点地图 http://example.com

> ID：15402622
> 
> 赞同：25
> 
> 时间：2013-03-14T06:28:17.557
> 
> 标签：django, sitemap

对不起我的英语不好，但我不是英语！

我尝试用我的 django 项目生成一个 sitemap.xml。

在我的项目中，我没有模型（我的数据库是空的），我只有静态 url（比如 'home' 或 'About' ）。

我成功生成了一个 sitemap.xml，但我有“ [http://example.com](http://example.com) ”而不是我的域名。

这是我的 sitemap.xml：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url>
<loc>
http://example.com/accueil
</loc>
<lastmod>
2013-03-14
</lastmod>
<changefreq>
weekly
</changefreq>
</url>
<url>
<loc>
http://example.com/cv
</loc>
<lastmod>
2013-03-14
</lastmod>
<changefreq>
weekly
</changefreq>
</url>
<url>
<loc>
http://example.com/portfolio
</loc>
<lastmod>
2013-03-14
</lastmod>
<changefreq>
weekly
</changefreq>
</url>
<url>
<loc>
http://example.com/a_propos
</loc>
<lastmod>
2013-03-14
</lastmod>
<changefreq>
weekly
</changefreq>
</url>
</urlset> 
```

和我的 urls.py：

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.conf.urls.static import static

from sitemaps import BasicSitemap
# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

sitemaps= {
    'pages' : BasicSitemap(['accueil','cv','portfolio','apropos'])
}

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'portfolio.views.home', name='home'),
    # url(r'^portfolio/', include('portfolio.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
    url(r'^', include('portail_portfolio.urls')),
    url(r'^sitemap\.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': sitemaps}) 
```

)

```
urlpatterns += staticfiles_urlpatterns() + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

还有我的sitemaps.py：

```
from django.contrib.sitemaps import Sitemap
from django.core.urlresolvers import reverse
#from portail_portfolio.models import Entry

from datetime import datetime

class BasicSitemap(Sitemap):

    def __init__(self, names):
        self.names = names

    def items(self):
        return self.names

    def changefreq(self, obj):
        return 'weekly'

    def lastmod(self, obj):
        return datetime.now()

    def location(self,obj):
        return reverse(obj) 
```

我希望你能理解我的英语，我希望你能帮助我！

亲切地，

寿司

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-14T06:35:08.640

`django.contrib.sitemaps`依靠`django.contrib.sites`.

进入您的管理部分`/admin/sites/site/1/`并更改您在那里看到的域名。

# android - Horizo ntalScrollView 子项不可见

> ID：15402624
> 
> 赞同：0
> 
> 时间：2013-03-14T06:28:21.447
> 
> 标签：android, cocos2d-x, horizontalscrollview

我在说 MainMenuActivity 中有一个带有 LinearLayout 的 Horizo​​ntalScrollView，我用 3 个按钮填充它。让我们称之为 State1。

```
A         B           C 
```

单击其中一个按钮--> 从 LinearLayout 中删除这些按钮，并将其他 3 个自定义视图添加到同一个 LinearLayout。让我们称之为 State2

```
E         F          G 
```

单击任何 EFG 会启动另一个活动。为了从 state1 到 state2，我为每个 EFG 膨胀 View 并将这些视图添加到 LinearLayout。

我的问题：回到我的 MainMenu Activity 后，我希望 ScrollView 显示 EF G。由于某些其他原因它没有显示（我进入 Cocos2dx）。它显示 AB C。

当从任何活动返回到 MainMenu 时，我能够为 State2 增加视图，但视图在屏幕上不可见。LinearLayout 应该有 3 个孩子，但它们不可见。事实上整个 LinearLayout 是不可见的。

它第一次工作（从ABC到EFG）。但不是我第二次直接进入 EFG State

我的 Horizo​​ntalScrollView 看起来像这样

```
<HorizontalScrollView
      android:id="@+id/mainHZScrollView"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_weight="1" 
      android:clipChildren="true"
      android:scrollbars="none"
      android:background="@android:color/black">

      <LinearLayout
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:orientation="horizontal"
         android:isScrollContainer="true"
          android:layout_gravity="center_vertical"
          android:id="@+id/scrollInnerLayout"
          android:background="@android:color/white">

      </LinearLayout>

  </HorizontalScrollView> 
```

这就是我为 EF G 填充 ScrollView 的方式。

```
private void fillScrollViewWithRoomList(ArrayList<HashMap<String, String>> roomArr){
    Log.d("MainAct",  "fillScrollViewWithRoomList: "+roomArr.toString());

    HorizontalScrollView mainMenuScroll = (HorizontalScrollView) findViewById(R.id.mainHZScrollView);
    LinearLayout scrollInnerLayout = (LinearLayout) mainMenuScroll.findViewById(R.id.scrollInnerLayout);

     //Remove Existing Contents
    scrollInnerLayout.removeAllViews();

    for (int i = 0; i < roomArr.size(); i++) {
        Log.d("MainAct",  "fillScrollViewWithRoomList  For Loop ");

        View roomView = View.inflate(this, R.layout.room_view, null);

        /*
         * Get contents from ArrayList and 
         * Fill roomView TextViews Here 
         */             

        scrollInnerLayout.addView(roomView);
    }

    int inScrollChildCnt = scrollInnerLayout.getChildCount();
    Log.d("MainAct",  "inScrollChildCnt  "+ inScrollChildCnt);
    Log.d("MainAct",  "fillScrollViewWithRoomList Complete"); 
```

}

在 onResume() 中，我检查要在 ScrollView 中显示的内容。roomArr 的数据来自服务器。从 onResume() 发送的请求。我在处理程序中解析它并显示。所以一切都在 UI Thread 上完成。roomArr 打印所有值并且 inScrollChildCnt = 3，这是 roomArr 的计数。

# c# - 使用 LINQ 的不同字典

> ID：15402625
> 
> 赞同：4
> 
> 时间：2013-03-14T06:28:22.153
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试使用 LINQ 获取不同值的字典。我试过用这个：

```
var roleRefList = 
    xDocument.Root.Descendants()
             .Where(x => x.Name.LocalName.Equals("roleRef") && 
                         !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")))) && 
                         !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")))))
             .Select(l => new {
                  roleUri = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")).Value,
                  href = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")).Value
              })
             .Distinct()
             .ToDictionary(a => a.roleUri); 
```

这里的问题是，当其中有重复的条目时，`roleUri`就会发生错误。我正在解析 XML 文档并制作 xElement 属性的字典，`roleUri`以及`roleref`它们是否存在于 xElement 中。

另一种解决方法是使用 for 循环：

```
Dictionary<string, string> roleRefList = new Dictionary<string, string>();
            foreach (XElement element in xDocument.Root.Descendants().Where(x => x.Name.LocalName.Equals("roleRef")))
            {
                string roelUri = Convert.ToString(element.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")));
                string href = Convert.ToString(element.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")));
                if (!string.IsNullOrEmpty(roelUri) && !string.IsNullOrEmpty(href) && !roleRefList.ContainsKey(roelUri))
                {
                    roleRefList.Add(roelUri, href);
                }
            } 
```

但我想使用 LINQ 来实现它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T06:54:53.690

您可以编写自己的`Distinct`方法`Func<T,TKey>`作为参数。您可以在此处找到示例：[基于 LINQ 中任意键的不同对象列表](https://stackoverflow.com/questions/742682/distinct-list-of-objects-based-on-an-arbitrary-key-in-linq)

使用该方法，您应该能够编写：

```
var roleRefList = xDocument.Root.Descendants().Where(x => x.Name.LocalName.Equals("roleRef") && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")))) && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")))))
                           .Select(l => new
                           {
                               roleUri = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")).Value,
                               href = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")).Value
                           }).Distinct(l => l.roleUri).ToDictionary(a => a.roleUri); 
```

**更新**

或者您可以使用分组：

```
var roleRefList = xDocument.Root.Descendants().Where(x => x.Name.LocalName.Equals("roleRef") && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")))) && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")))))
                           .Select(l => new
                           {
                               roleUri = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")).Value,
                               href = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")).Value
                           })
                           .GroupBy(l => l.roleUri)
                           .ToDictionary(g => g.Key, g => g.FirstOrDefault()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:20:13.950

Duplicate attributes are **not allowed** in XML. If you will have two `roleURI` attributes in `roleRef` element then you will get exception during XDocument loading:

> 'roleURI' is a duplicate attribute name. Line 42, position 42.

So, actually your code should look like this:

```
var xdoc = XDocument.Load("foo.xml");
XNamespace ns = "http://www.adventure-works.com"; // put your namespace here

Dictionary<string, string> roleRefList = 
   xdoc.Root.Descendants(ns + "roleRef")
       .Select(r => new {
             Uri = (string)r.Attribute("roleURI"),
             Href = (string)r.Attribute("href")
       })
       .Where(r => !String.IsNullOrEmpty(r.Uri) && !String.IsNullOrEmpty(r.Href))
       .ToDictionary(r => r.Uri, r => r.Href); 
```

Result will be same as with your *for* loop. Sample xml:

```
<root xmlns="http://www.adventure-works.com">
  <roleRef/>
  <roleRef roleURI=""/>
  <roleRef href=""/>
  <roleRef roleURI="" href=""/>
  <roleRef roleURI="a" />
  <roleRef roleURI="" href="b"/>
  <roleRef roleURI="c" href="d"/>
</root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:07:20.077

实现这一目标的几种方法：

**1）**您可以使用自定义相等比较器调用 distinct 方法。为了实现这一点，您需要先编写一个包含 roleUri 和 href 字段的类。就像是：

```
 public class AttributePair 
    {
      public string RoleUri {get; set;}
      public string Href {get; set;}
    } 
```

下一步是为您的班级编写相等比较器：

```
 public class AttributePairComparer : IEqualityComparer<AttributePair>
    {
        public bool Equals(AttributePair x, AttributePair y)
        {
            return x.RoleUri.Equals(y.RoleUri);
        }

        public int GetHashCode(AttributePair obj)
        {
            return obj.RoleUri.GetHashCode();
        }
    } 
```

之后，我们只需将相等比较器的实例传递给 distinct 方法：

```
 var roleRefList = xDocument.Root.Descendants().Where(x => x.Name.LocalName.Equals("roleRef") && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")))) && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")))))
                       .Select(l => new AttributePair
                       {
                           RoleUri = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")).Value,
                           Href = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")).Value
                       }).Distinct(new AttributePairComparer()).ToDictionary(a => a.RoleUri, a => a.Href); 
```

我同意这个解决方案非常复杂，但可以这么说，这是实现所需结果的经典方式。

**2)**另一种解决方案是来自[MoreLinq的](http://code.google.com/p/morelinq/)[DistinctBy](http://code.google.com/p/morelinq/wiki/OperatorsOverview)方法。您可以在其中将 lambda 表达式作为参数传递：

```
 var roleRefList = xDocument.Root.Descendants().Where(x => x.Name.LocalName.Equals("roleRef") && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")))) && !string.IsNullOrEmpty(Convert.ToString(x.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")))))
                       .Select(l => new
                       {
                           roleUri = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("roleURI")).Value,
                           href = l.Attributes().FirstOrDefault(a => a.Name.LocalName.Equals("href")).Value
                       }).DistinctBy(p => p.roleUri).ToDictionary(a => a.roleUri, a => a.href); 
```

**3)** C# 的首席架构师 Anders Hejlsberg 提出了使用 GroupBy 的解决方案。你可以在[这里阅读。](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/6834054e-e1c1-49db-970c-370a9012c675)

# c++ - Windows DLL 向后兼容性

> ID：15402626
> 
> 赞同：0
> 
> 时间：2013-03-14T06:28:22.393
> 
> 标签：c++, windows, dll, backwards-compatibility, detours

我正在使用 MS detours 3.0 Express 创建一个 DLL 来绕过应用程序的功能。
我使用 StudPE 进入 dll API 并将其连接到应用程序。
一切正常，除了**它不能在 windows XP 上运行**。

Windows 7 工作正常。而且我不知道为什么它不能在 Windows XP 上运行。

我使用 Microsoft Visual Studio 2012 在 Windows 7 x64 机器上编译它。

我正在调用 DllMain 我的代码是：（只是相关代码 - 不完整）

```
extern "C" __declspec(dllexport) INT APIENTRY DllMain(HMODULE hDLL, DWORD Reason, LPVOID Reserved)
{
    switch(Reason) {
    case DLL_PROCESS_ATTACH:    //Do standard detouring
        DisableThreadLibraryCalls(hDLL);
        //AllocConsole();
        //
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourAttach(&(PVOID&)pSend, MySend);
        if(DetourTransactionCommit() == NO_ERROR) {
            cout << "[" << MySend << "] successfully detoured." << endl;
        }
        break;

    case DLL_PROCESS_DETACH:
        DetourTransactionBegin();   //Detach
        DetourUpdateThread(GetCurrentThread());
        DetourDetach(&(PVOID&)pSend, MySend);
        DetourTransactionCommit();
        break;
    }
    return TRUE;
} 
```

在 WinXP 上，当我尝试运行挂钩的应用程序时没有任何反应。

# sql - 如何在 Sql Server 中使用 Xquery 在存储 XML 数据的列中搜索字符

> ID：15402632
> 
> 赞同：1
> 
> 时间：2013-03-14T06:28:49.547
> 
> 标签：sql, sql-server, tsql, sql-server-2005, xquery

有一个名为 FileImage 的列包含 XML 数据。

```
<root>
  <Image>    
    <File_image>02Jan12- Mfg--7.jpg</File_image>
    <Page_no>7</Page_no>
    <Logo>N</Logo>
  </Image>
</root> 
```

我想搜索标签之间的文本是否包含空格字符。这是为了检查无效的文件名。

```
SELECT *
FROM mytable
where fileimage.exist('
   /Image:file_image//text()
    [contains(., " ")]') = 1 
```

但
*XQuery [mytable.FileImage.exist()] 显示错误：名称“Image”不表示命名空间。*

这该怎么做 ？我正在使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:39:40.973

```
SELECT *
FROM mytable
where fileimage.exist('
   /root/Image/File_image//text()
    [contains(., " ")]') = 1 
```

# html - 2013 年 HTML5 视频的现状

> ID：15402637
> 
> 赞同：6
> 
> 时间：2013-03-14T06:28:53.550
> 
> 标签：html, video, html5-video

我一直在我的网站上使用 Flash 视频来嵌入视频。我的旧 2.2.x android 播放它们很好，但我注意到很多新的 android 设备以及苹果设备不会播放我的视频，因为 flashplayer 正在消失，所以我正在研究解决方案 - HTML5 视频似乎是新事物。

我刚刚花了 2 个小时搜索谷歌并阅读了很多东西，但其中大部分来自 1、2 或 3 年前 - 从我读过的内容来看，使用 html5 视频标签似乎仍然需要每个要转换为多种格式的视频，全屏是某种供应商特定的扩展——在每个支持它的浏览器上都不同。

所以我的问题是，HTML5 视频标签现在是否可以完全替代 Flash 播放器，还是在 2013 年仍然需要​​针对六种最流行的浏览器进行特定于浏览器的黑客攻击的笨拙方案？

它可以在 PC、Mac、Android 和 iPhone 上运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:20:54.793

caniuse.com 是一个很好的资源，可以提供很好的数据来回答这个问题。

截至目前...~92% 的网络用户浏览器[支持 HTML video 标签](http://caniuse.com/#feat=video)。没有的主要是 Opera Mini（约 4.5%）。对于这些用户，您可以使用 Flash 后备，这实际上并没有太多工作。有一些非常简单的解决方案可以为您处理这个问题，例如 videoJS、jPlayer 和 JWPlayer。

目前，您确实需要以两种（可能是三种）格式进行编码。大约 92% 的用户[支持 MPEG-4/h.264](http://caniuse.com/#feat=mpeg4)。Opera Mini 和 IE8 不支持。

只有大约[71% 的用户可以支持全屏](http://caniuse.com/#feat=fullscreen)HTML 视频，因此对于 Android 和 iOS（主要）所有版本，您能做的最好的事情就是将视频设置为 100% 的浏览器窗口。如果全屏很重要，那么您将需要使用 Flash。

所以，简而言之，是的，HTML5 视频确实需要一些额外的工作，但在这一点上，要做到正确并不难，而且它是一个朝着更好的稳定性和统一性方向发展的标准。例如，YouTube 使用它（带有后备），如果这表明它已准备好迎接黄金时段。

# mks - 未更改文件中的 PTC 完整性检查

> ID：15402643
> 
> 赞同：0
> 
> 时间：2013-03-14T06:29:18.950
> 
> 标签：mks, mks-integrity

在使用 CLI 调用通过脚本测试 PTC 完整性的性能时，我们执行以下操作。
我们正在尝试创建项目的不同版本并收集这样做所花费的时间。为此，项目（内容）的不同版本在单独的文件夹中可用。
该脚本执行以下操作
- 锁定项目

> si lock --yes --recurse --cpid=:bypass

*   删除沙箱的内容，除了 .pj 文件

*   将下一个版本的内容从对应的本地副本复制到沙箱。这模拟了对沙箱中的某些工件所做的更改。

*   查找丢失的文件，将其收集到一个数组中

> si viewsandbox --batch --yes --recurse --sandbox= path\project.pj --filter=changed:missing --fields=name

*   循环遍历上面的数组并删除每个成员

> si drop --cpid=:bypass --yes --batch --sandbox=path\project.pj each_member

*   签入所有“更改”的成员/文件

> "si ci --recurse --nocheckinUnchanged --filter=changed:working --nounexpand --cpid=:bypass --sandbox=path\project.pj --description="test"

*   找非会员，收集到arrat

> si viewnonmembers --batch --yes --recurse --fields=absolutepath --sandbox= path\project.pj --cwd=path

*   循环遍历数组并添加每个非成员

> si add --createSubprojects --nounexpand --batch --cpid=:bypass --sandbox=path\project.pj each_non-member

*   开锁

> si 解锁 --action=remove --yes --recurse

*   创建检查点。

> si 检查点 --yes --sandbox=\project.pj --label=Lab​​elName --description="test"

以上步骤是针对我需要创建的此类项目版本的数量完成的。

在项目策略中，设置了“按引用存储文本=true”。
完整性版本为 10。

现在我的问题。：对于我通过上述步骤创建的每个版本的项目，它正在为所有文件创建一个新版本，无论它是否被更改。当查看此类文件的成员历史记录时，它不会显示创建的 2 个版本之间的任何差异。你遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T22:09:52.737

这是因为您删除了沙箱中的所有文件。新文件具有不同的时间戳，因此 PTC 将它们视为新文件。PTC 没有真正的 DIFF，afaik 它只检查时间戳（最后一次更改）。

我能想到的只是删除已更改的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T08:23:13.800

您可以将沙箱配置为通过校验和检查差异。[![在此处输入图像描述](../Images/b41f4f8e02b171181410fc860957b73c.png)](https://i.stack.imgur.com/tZ1Tr.png)

这可以/应该由您的管理员默认为所有沙盒设置。

# android - 存储自定义对象的 ArrayList

> ID：15402650
> 
> 赞同：1
> 
> 时间：2013-03-14T06:30:16.813
> 
> 标签：android, sqlite, serialization, storage, sharedpreferences

我有一个名为 AccActivity 的自定义对象数组。

```
public class AccActivity {
    AccData Data;
    AccData fData;
    AccData lpfData;

    int[] crossings;
    float[] sd;
    int type = -1;
    private float[] minMax;
    float spread = 0.30f;
    int rate = 8;
    float alpha = 0.30f;
    float avResAcc;
    float[] peakDistances;
    int[] peakNumber;
    ArrayList<Integer> peakIndicesX;
    ArrayList<Integer> peakIndicesY;
    ArrayList<Integer> peakIndicesZ; 
```

AccData 对象如下所示：

```
public class AccData {
    private ArrayList<Float> xData;
    private ArrayList<Float> yData;
    private ArrayList<Float> zData;
    private float[] averageNoise; 
```

现在，我在互联网上研究了这个问题，显然有三种在 android 中存储数据的选项——它们似乎都不适合我

SharedPrefs - 不，因为它用于存储原始键值首选项

序列化 - 保存到文件 - 不确定 - 我只看到了用于非自定义对象类型的示例，我将如何解决它？

SQLite - 不，堆栈溢出的另一个答案说：“我怎样才能将我的自定义对象存储在数据库中？

除非您使用对象数据库，否则您不需要。您将对象的表示存储在数据库中。”

他们提到的这个对象数据库是什么？

有人可以告诉我如何保存和检索我拥有的这个 arrayList 吗？

编辑：我不关心 SDK 兼容性，可以选择最高的，因为这是一个单独的研究项目

EDIT2：目标：关闭并重新打开手机后，我希望在打开应用程序时自动检索 ArrayList 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:32:42.597

你可以很好地使用`Serialization`. 如果是自定义对象，请确保您的自定义对象接口以及该对象中`implements`的`Serializable`任何自定义对象也应该是`Serializable`.

**例如：-**

```
class CustomObject implements Serializable
{
     public String name;
}

ArrayList<CustomObject> objectList = new ArrayList<CustomObject>(); 
```

所以`objectList`现在是可序列化的，你也可以在`Intent`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:04:45.717

您可以将 AccData 中的每个数组序列化为[JSON](http://developer.android.com/reference/org/json/package-summary.html)并将其存储在[SQLite 数据库](http://developer.android.com/guide/topics/data/data-storage.html#db)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:36:33.190

回答您的对象数据库问题，至少有 2 个对象数据库可在 Android 上运行 - [db4o](http://www.db4o.com/android/)和[Perst](http://www.mcobject.com/android)。

# c# - 在 C# 应用程序中创建宽带 ppoe 拨号连接

> ID：15402654
> 
> 赞同：1
> 
> 时间：2013-03-14T06:30:26.733
> 
> 标签：c#, ras, dial-up

我是一名学生，正在开发一个应用程序，该应用程序可以帮助用户检查一组拨号连接上的互联网连接速度。

```
string[,] connections = new string[5, 2] { { "username", "password" }, { "username", "password" },{ "username", "password" },{ "username", "password" },{ "username", "password" } }; 
```

连接存储在上面列出的数组中，我正在寻找最简单的方法来拨打它们并通过从远程服务器下载文件来测试每个连接的速度。专家们可以帮我一个好的解决方案吗？

谢谢你。

## 笔记

我已经尝试过 DOTRAs，我正在尝试使用但无法完全弄清楚如何建立连接。

```
RasEntry.CreateDialUpEntry 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T21:37:12.207

[DotRas](http://dotras.codeplex.com)是[Windows RAS API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373643%28v=vs.85%29.aspx)的包装器，它使用电话簿文件来存储如何连接到远程 RAS 服务器的信息，然后是一个实际拨打该条目的命令。SDK 中包含的示例虽然只演示了如何进行 VPN 连接，但可以毫不费力地将相同的原理应用于拨号连接。唯一的区别是在创建条目时调用 CreateDialUpEntry 而不是 CreateVpnEntry。

**第 1 步：创建条目**

您需要首先创建您的条目并将其添加到电话簿中，以便以后拨号操作可以找到它：

```
string path = RasPhoneBook.GetPhoneBookPath(RasPhoneBookType.User);
using (RasPhoneBook pbk = new RasPhoneBook()) 
{
    pbk.Open(path);
    // Find the device that will be used to dial the connection.
    RasDevice device = RasDevice.GetDevices().Where(o => o.Name == "Your Modem Name" && o.DeviceType == RasDeviceType.Modem).First();

    RasEntry entry = RasEntry.CreateDialUpEntry("Your Entry", "5555551234", device);
    // Configure any options for your entry here via entry.Options
    pbk.Entries.Add(entry);
} 
```

这将在电话簿中获得一个名为“Your Entry”的条目和一个电话号码“555-555-1234”。请记住，您需要知道要在条目上配置的设置，以确保连接成功。

**第 2 步：拨号**

```
using (RasDialer dialer = new RasDialer()) 
{
    dialer.EntryName = "Your Entry";
    dialer.PhoneBookPath = path;
    dialer.Credentials = new NetworkCredential("User", "Password");
    dialer.Dial();
} 
```

这将使用指定的凭据建立与“您的条目”的连接。

**第三步：断开入口**

为了断开连接，您需要找到活动连接并在其上调用 HangUp。

```
RasConnection conn = RasConnection.GetActiveConnections().Where(o => o.Name == "Your Entry").First();
conn.HangUp(); 
```

我希望这能回答你的问题！

编辑：我想补充一点，如果正在测试的机器上已经存在连接，您可以直接跳到第二步并拨打它们。

# iphone - 无法通过 iPhone 配置实用程序在设备上安装应用程序

> ID：15402655
> 
> 赞同：1
> 
> 时间：2013-03-14T06:30:33.193
> 
> 标签：iphone, ios

最近 iPhone 配置实用程序发生了一些变化，我无法在设备上安装应用程序。它曾经运行良好，但在我将 iTunes 更新到 11.0.2 并将 iPhone 更新到 6.1.2 之后，一切都发生了变化（我想）。

症状是：

*   每次启动 iTunes 时，我都会收到“未知错误 (-42110)”消息。
*   iPhone 配置实用程序经常滞后和死机。
*   iPhone 配置实用程序显示错误“无法将应用程序传输到设备。错误：kAMDUndefinedEror。”

任何想法如何解决它？

PS：Mac mini、Windows 7 家庭高级版 64 位

UPD：通过删除 C:\ProgramData\Apple Computer\iTunes\SC Info 文件夹修复了 iTunes“未知错误 (-42110)”问题。但 iPhone 配置实用程序仍然无法安装应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:35:35.153

哦..您已将设备更新到 6.1.2，所以我认为您需要用于 MAC 的 Mountain Lion 操作系统。因为它也不能与狮子 10.7.5 一起使用。将您的系统更新为山狮。它会再次好起来的。

# java - 通过 Jettison 将 Java 对象（不带 @XmlRootElement）编组为 JSON

> ID：15402659
> 
> 赞同：2
> 
> 时间：2013-03-14T06:30:44.750
> 
> 标签：java, json, jakarta-ee, jaxb, jettison

我已经使用 Jettison 将 JAXB 对象（包含 @XmlRootElement）编组为 JSON。但是我无法将没有 @XmlRootElement 之类的注释的简单 java 对象转换为 JSON。我想知道“是否必须让 @XmlRootElement 将对象编组为 JSON？”

当我尝试将 java 对象编组为 Json 时出现以下异常

```
com.sun.istack.SAXException2: unable to marshal type "simpleDetail" as an element because it is missing an @XmlRootElement annotation 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:29:23.257

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JAXB (JSR-222) 规范不包括 JSON 绑定。您可以使用提供本机 JSON 绑定的 EclipseLink JAXB (MOXy)，而不是使用 Jettison 库的 JAXB 实现。下面是一个例子。

**JAVA模型**

**富**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    private List<Bar> mylist;

} 
```

**酒吧**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Bar {

    private int id;
    private String name;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示代码**

**演示**

MOXy 不需要`@XmlRootElement`注释，您可以使用该`JSON_INCLUDE_ROOT`属性告诉 MOXy 忽略任何`@XmlRootElement`注释的存在。当根元素被忽略时，您需要使用`unmarshal`采用类参数的方法来指定要解组的类型。

```
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Foo.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum15404528/input.json");
        Foo foo = unmarshaller.unmarshal(json, Foo.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输入.json/输出**

我们看到输入或输出中不存在根元素。

```
{
   "mylist" : [ {
      "id" : 104,
      "name" : "Only one found"
   } ]
} 
```

**附加信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:46:51.780

只需阅读这`@XmlRootElement`并不总是必要的。请阅读[这个博客](http://weblogs.java.net/blog/kohsuke/archive/2006/03/why_does_jaxb_p.html)，在底部你会发现它是如何完成的`@XmlRootElement`。还要通过[JAXB 生成的 No @XmlRootElement](https://stackoverflow.com/questions/819720/no-xmlrootelement-generated-by-jaxb)帖子中的答案。

# ios - ASIFormDataRequest

> ID：15402660
> 
> 赞同：1
> 
> 时间：2013-03-14T06:30:50.820
> 
> 标签：ios, asihttprequest, asiformdatarequest

我用户

```
{
ASIFormDataRequest *rq = [ASIFormDataRequest requestWithURL:url];    
[rq setDelegate:self];
[rq startAsynchronous];
} 
```

但它不能访问 requestFinished 或 requestFailed 函数；为什么？

# html - 为什么插入图像会使页面向左移动

> ID：15402665
> 
> 赞同：2
> 
> 时间：2013-03-14T06:31:01.257
> 
> 标签：html

大家好，我有一个问题，为什么我的网站的整个页面在我插入图像时会略微向左移动（10 - 30 像素左右），而当我删除它时又恢复正常。任何帮助都将不胜感激。

html代码-

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
    <head>
    <meta name="description" content="Random Text">
    <meta name="keywords" content="Random words">
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">

    <title>X</title>
    <link href="menusheet.css" rel="stylesheet" type="text/css">
    <link href="style.css" type="text/css" rel="stylesheet">
</head>
<body>
<div id="header">
    <div id="logo"><img src="images/bar.png" alt="knives"/></div>
</div>
    <div id="wrapper">  
        <!-- Black Menu -->
        <div id="menu_wrapper" class="black">
        <div class="left"></div>
            <ul id="menu">
        </div>
    </div>  

<div id="content">
<div id="container">
    <div id="adsense">

    </div>

    <div id="stepsbox">
    </div>
</div>

<h4>Factory edges</h4><img src="images/factoryangle.png" alt="Factory angles" style="float:left; margin-right: 20px; width: 175px; height: 175px;"/>
    </div>
            <div id="footer">
        <div id="footerleft">
        <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="sitemap.html">Site Map</a></li>
    </ul>
    </div>
    <div id="footercenter">
        &copy; 2013 x.com
    </div>
</div> 
```

```
CSS - 

body {
width: 960px;
margin: 0 auto;
font-family: Arial, Verdana, sans-serif;
color: black;
background-image: url(images/bg.jpg) ;
background-repeat: no-repeat;   
background-size: cover;
}   

#wrapper {
width: 960px;
margin: 0 auto;
}

#content {
width: 920px;
height: 100%;
overflow: hidden;
background-color: white;
padding: 0px 20px 0px 20px;
margin: 0px 0px 0px 0px;
}

#container {
width: 300px;
height: 550px;
float: right;
background-color: black;
margin-left: 10px;
}

#adsense {
width: 300px;
height: 250px;
float: right;
background-color: yellow;
}

#stepsbox {
float:right;
width: 250px;
height: 220px;
padding: 15px 15px 15px 15px;
background-color: #E0E0E0;
margin: 10px 0px 5px 10px;
}

#header {
height: 70px;
background: white;
width: 960px;
margin: 0 auto;
}   

#footer { 
height: 60px;
font-size: 80%; 
padding: 5px 5px 5px 5px;
background-color: #333333;
color: white;
}

#footerleft {
width: 300px;
height: 50px;
float: left;
}

#footercenter {
width: 620px;
height: 40px;
float: right;
text-align: right;
padding: 5px 5px;
border-style:solid;
border-width:5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:41:51.240

看不到您的图像...：D，但是在您的位置，我将这段代码插入到 css 中

```
img{
margin: 0px;
padding: 0px;
border: 0px;
} 
```

这将删除图像标签周围的所有空格...尝试并期待...它，如果您插入图像链接会很高兴... :) 很容易理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:04:56.633

谈论哪个图像“标志”或

```
<h4>Factory edges</h4><img src="images/factoryangle.png" alt="Factory angles" style="float:left; margin-right: 20px; width: 175px; height: 175px;"/> 
```

如果工厂边缘是图像，则在之后添加
一个

```
<h4>Factory edges</h4><br />
<img src="images/factoryangle.png" alt="Factory angles"style="float:left; margin:0 20px 0 0; width:175px; height:175px;" /> 
```

还要在样式中添加这个

```
#content{margin:0 auto; } 
```

与内容中的其他属性

我认为这会做，如果不是请详细解释.. :)

# wordpress - 在第 304 行获得关于 WPML 插件函数-string-translation.php 的警告

> ID：15402670
> 
> 赞同：0
> 
> 时间：2013-03-14T06:31:12.817
> 
> 标签：wordpress

我在我的 WordPress（版本 3.5.1）站点中使用 WPML 插件（版本：2.0.4.1），但是当我尝试激活二十一个主题时，之后会收到此警告。

警告：在 C:.....\wp-content\plugins\sitepress-multilingual-cms\inc\functions-string-translation.php 中为 foreach() 提供了无效参数，第 304 行警告：为 foreach( ) 在 C:.....\wp-content\plugins\sitepress-multilingual-cms\inc\functions-string-translation.php 第 304 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:56:27.183

WPML 2.0.4.1 真的不应该在 WordPress 3.5 上运行。它是在 WordPress 3.2 存在之前发布的。从那时起，我们对 WPML 进行了 1000 多项更改，包括大量兼容性更新和错误修复。

我知道这并不能解决您面临的问题，但我试图解释您正在尝试让一个非常旧的版本在最有可能无法工作的地方工作。

# c++ - mfc - 带有富文本的消息框

> ID：15402671
> 
> 赞同：2
> 
> 时间：2013-03-14T06:31:15.073
> 
> 标签：c++, windows, mfc, richtext

我希望能够在消息框中显示格式化文本（如粗体文本、项目符号、斜体等）。

我遇到了[这篇精彩的文章](http://www.codeproject.com/Articles/24/TCX-Message-Box-derived-from-CWnd)，但似乎无法让它发挥作用。我在同一个链接上使用演示应用程序。

有人可以帮我吗？我试过调试/理解该代码是徒劳的。

约束：（不是我的选择）

*   必须与 Windows XP 兼容。
*   我正在使用 Visual C++ 6。

**它应该如何显示：**

![它应该如何显示](../Images/b0bd9b0d64c325bfbd90e544d567749a.png)

* * *

**它的实际显示方式：**

![在此处输入图像描述](../Images/2c946e1b41c99713008474f736c0e3ca.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:37:01.720

只需使用 RichEdit2 控件创建一个对话框弓...

在 InitInstance 中，添加以下调用：

```
// Init RichEdit Library

AfxInitRichEdit2(); 
```

在您的对话框中，为 RichEdit 控件创建一个变量并将其更新为：

```
// Turn Word Wrap on (based on window width)

m_RichEditMsg.SetTargetDevice( NULL, 0);

// Set Base Text

strText = "{\\rtf1\\ansi\\fs20 ";
strText += "{\\colortbl;\\red0\\green0\\blue0;\\red0\\green0\\blue255;\\red0\\green255\\blue255;\\red0\\green255\\blue0;\\red255\\green0\\blue0;}";
    strText += "{\\f1\\cb1\\cf2\\b Main Title} \\par\\par \\fs18 Other text to add {\\b In Bold} no more in bolb ... \\par";
str.Format( "\\par Id: {\\b %s}", m_strProgId);
strText += str;
strText+= "\\par \\par {\\f1 \\b Please Confirm ...} \\par}";

// Update Controls

m_RichEditMsg.SetWindowText( strText); 
```

只需构建您自己的信息，您就会获得粗体、颜色、...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T15:52:13.307

多亏了 DavidK 非常有用的建议，我已经解决了这个问题（请参阅对问题的评论）。[Windows 2000](http://www.codeproject.com/Articles/24/TCX-Message-Box-derived-from-CWnd#xx516xx)的FIX注释巧妙地解决了这个问题。

# android - 在 android 4.0.3 中无法从 /vendor/lib 加载 lib

> ID：15402672
> 
> 赞同：2
> 
> 时间：2013-03-14T06:31:18.893
> 
> 标签：android, loadlibrary, vendor

我将应用程序预装到 /vendor/app 中，并将 lib 预装到 /vendor/lib 中。当我启动应用程序时，捕获到异常：

```
> E/AndroidRuntime( 2446):        at
> android.app.Activity.performCreate(Activity.java:4465)
> E/AndroidRuntime( 2446):        at
> android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
> E/AndroidRuntime( 2446):        at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
> E/AndroidRuntime( 2446):        at
> android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
> E/AndroidRuntime( 2446):        at
> android.app.ActivityThread.access$600(ActivityThread.java:123)
> E/AndroidRuntime( 2446):        at
> android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
> E/AndroidRuntime( 2446):        at
> android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(
> 2446):        at android.os.Looper.loop(Looper.java:137)
> E/AndroidRuntime( 2446):        at
> android.app.ActivityThread.main(ActivityThread.java:4424)
> E/AndroidRuntime( 2446):        at
> java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(
> 2446):        at java.lang.reflect.Method.invoke(Method.java:511)
> E/AndroidRuntime( 2446):        at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> E/AndroidRuntime( 2446):        at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> E/AndroidRuntime( 2446):        at
> dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime( 2446):
> Caused by: java.lang.UnsatisfiedLinkError: Couldn't load
> jni_factory_test: findLibrary returned null E/AndroidRuntime( 2446):  
> at java.lang.Runtime.loadLibrary(Runtime.java:365) E/AndroidRuntime(
> 2446):        at java.lang.System.loadLibrary(System.java:535) 
```

我的环境是：

```
export LD_LIBRARY_PATH /vendor/lib:/system/lib 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-20T07:03:25.087

尝试使用带有供应商库路径的 system.load 调用

# java - 不同结构的Jtable

> ID：15402673
> 
> 赞同：0
> 
> 时间：2013-03-14T06:31:22.333
> 
> 标签：java, swing, jtable, jscrollpane, rounded-corners

我有默认（矩形或方形）结构的 jTable。我想让 jTable 的角更圆。

有什么方法或方法可以做到这一点吗？

我已经检查了[JTable API](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)，但没有发现任何可用的东西。

作为参考，我附上了这张图片。

![在此处输入图像描述](../Images/f97a7f366fe6c712a204c5bed8579a9d.png)

**图片说明——**

我想让突出显示的区域更圆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:56:12.300

搜索 JTable API 的外观是错误的搜索位置。JTable 类与表相关属性的实现有关。[`TableUI`](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/TableUI.html)将是可以定义外观的类。查看 Java 教程中的[外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:15:21.653

```
public class JtableExample {

     public static void main(String args[]) {
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            Object rowData[][] = { { "Row1-Column1", "Row1-Column2", "Row1-Column3" },
                { "Row2-Column1", "Row2-Column2", "Row2-Column3" } };
            Object columnNames[] = { "Column One", "Column Two", "Column Three" };
            JTable table = new JTable(rowData, columnNames);

            JScrollPane scrollPane = new JScrollPane(table);
            frame.add(scrollPane, BorderLayout.CENTER);
            Border roundedBorder = new LineBorder(Color.black, 5, true); // the third parameter - true, says it's round
            scrollPane.setBorder(roundedBorder);
            frame.setSize(300, 150);
            frame.setVisible(true);

          }

} 
```

# asp.net - 带有 PUT 的 ASP.NET Web API 路由

> ID：15402674
> 
> 赞同：4
> 
> 时间：2013-03-14T06:31:23.470
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api-routing

我正在尝试为我认为非常简单的事情设置 Web API 路由。但是，Web API 中的路由似乎与不同的 HTTP 动词不一致。假设我有这个控制器有这些动作......

```
public class AvalancheController : ApiControllerBase
{

    // GET api/avalanche
    public IEnumerable<Avalanche> Get() {}

    // GET api/avalanche/5
    public Avalanche Get(int id) {}

    // GET api/avalanche/ActionTest/5
    [ActionName("ActionTest")]
    public Avalanche GetActionTest(int id) {}

    // GET api/avalanche/ActionTest/2
    [ActionName("ActionTest2")]
    public Avalanche GetActionTest2(int id) {}

    // POST api/avalanche
    public void Post([FromBody]Avalanche value) {}

    // PUT api/avalanche/5
    public void Put(int id, [FromBody]Avalanche value) {}

    // PUT api/avalanche/test/5
    [ActionName("Test")]
    public void PutTest(int id, [FromBody]Avalanche value) {}

    // DELETE api/avalanche/5
    public void Delete(int id) {}
} 
```

我定义了以下路线...

```
 config.Routes.MapHttpRoute(
        name: "ActionRoutes",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional },
        constraints: new
            {
                controller = "Avalanche",
                action = "(ActionTest|ActionTest2|Test)"
            }
    );

    config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    ); 
```

然后我最终定义了以下路线......

```
GET api/Avalanche/ActionTest/{id}
GET api/Avalanche/ActionTest2/{id}
PUT api/Avalanche/Test/{id}
GET api/Avalanche   
POST api/Avalanche  
DELETE api/Avalanche/{id} 
```

为什么不选择默认 PUT 路由？默认 GET 和默认 PUT 的路由有什么不同？我已经尝试以各种可以想象的方式装饰这些功能，但我得到了相同的结果。

主要是我想知道如何获取默认的 PUT 路由。如果您对如何修改这些路由有任何建议，这样我就不必为每个控制器指定一个路由来指定动作名称，这也很棒。

谢谢！

伊恩

编辑：我今天早上注意到以下路线也没有被定义..

```
GET api/Avalanche/{id} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:06:40.157

很高兴您找到了解决问题的方法。但我会根据我对 REST 服务的学习提供我的反馈。REST webservice 的想法是将每个 url 解析为一个资源（或者可能是实体），并根据 HttpVerb 来决定操作。在这种情况下，您有三个 GET 操作，可以很好地配合您的修改。

但我认为控制器也可以重新安排为具有单一的 GET 操作并具有单一的责任，从而更好的可维护性。例如：

**雪崩控制器**

```
public class AvalancheController : ApiControllerBase
{
    public IEnumerable<Avalanche> GET()
    {

    }

    public void POST(Avalanche avalanche)
    {

    }
} 
```

可以假设在顶层处理所有雪崩，下面是要定义的操作。

GET：返回所有雪崩
POST：插入新的雪崩
PUT：未使用
DELETE：未使用

**雪崩详细信息控制器**

```
public class AvalancheDetailsController : ApiControllerBase
{
    public Avalanche GET(int id)
    {

    } 

    public int PUT(int id)
    {

    }

    public int DELETE(int id)
    {

    }
} 
```

可以假设处理单个雪崩，下面是要定义的操作。

GET：返回单个雪崩
POST：未使用
PUT：更新单个雪崩
DELETE：删除单个雪崩

现在我假设我们对控制器有明确的区分。在您提到的 OP 中，可以有不同的 GET 操作，但它只返回单个`Avalanche`. 因此，我会更改 GET 方法以将对象作为输入并检查值，即

```
public class AvalanceRequest
{
  public int? Id {get;set;}
  public string Name {get;set;}
}

   public class AvalancheDetailsController : ApiControllerBase
    {
        public Avalanche GET(AvalanceRequest request)
        {
           //write business logic based on parameters
           if(request.Id.HasValue)
           //return avalanche;
           if(request.Name.IsNullOrEmpty())
           //return avalanche
        } 
        //other methods
  } 
```

处理 URL，我并没有真正使用 WebAPI，而是尝试使用 ServiceStack 来开发 REST 服务。它允许附加 url 独立于控制器名称。

**Url**
api/Avalanche --> AvalancheController (操作基于HttpVerb调用)
api/Avalanche/Id --> AvalancheDetailsController (操作基于HttpVerb调用)

我不知道是否可以在 WebAPI 中同样附加 url，否则您最终将拥有默认配置并通过调用。api/Avalanche 和 api/AvalancheDetails/id。

```
 config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    ); 
```

我很抱歉发了这么长的帖子，希望它有意义。

# sql - 有效累进和

> ID：15402675
> 
> 赞同：0
> 
> 时间：2013-03-14T06:31:23.563
> 
> 标签：sql, performance, oracle

我有下表：

```
+----+-------+
| id | value |
+----+-------+
|  1 |    10 |
|  2 |    11 |
|  3 |    12 |
+----+-------+ 
```

我想即时计算一列来计算`value`所有先前行的总和，以得出如下结果：

```
+----+-------+--------+
| id | value | offset |
+----+-------+--------+
|  1 |    10 |      0 |
|  2 |    11 |     10 |
|  3 |    12 |     21 |
+----+-------+--------+ 
```

什么是有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:31:23.563

**[归功于 Egor](https://stackoverflow.com/a/15383910/1083652)** **Skriptunoff**。

```
select 
  id,
  value,
  nvl(
    sum(value) over (
      order by id rows between unbounded preceding and 1 preceding
    ), 0) as offset
from table 
```

分析函数的伟大之处`sum`在于它是渐进式的，因为在每次迭代中，引擎都会记住为前一行计算的值，并且只将`value`前一行添加到总数中。换句话说，对于`offset`要计算的每个，它都将前一行`offset`与相加`value`。这是非常有效的，并且可以很好地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:57:10.797

如果您的`id`值将按顺序排列，`1,2,3 etc..`那么

```
select a.*,(select sum(decode(a.id,1,0,b.value)) off_set from table b where b.id<=a.id-1)
from table a; 
```

如果您`id's`不在序列中，请尝试以下代码

```
select a.*,(select sum(decode(a.rn,1,0,b.value)) off_set from (select table.*,rownum rn from table) b 
           where b.rn<=a.rn-1)
from (select table.*,rownum rn from table) a; 
```

# c# - 如何使 EF 在保存时更新我的 ModifiedDate？

> ID：15402677
> 
> 赞同：2
> 
> 时间：2013-03-14T06:31:27.157
> 
> 标签：c#, entity-framework

我有以下使用：

```
using System;
using System.Data;
using System.Data.Entity;
using System.Data.Entity.ModelConfiguration.Conventions; 
```

和以下代码：

```
 public override int SaveChanges() 
    {
    foreach (var stateinfo in this.ChangeTracker.Entries(DataContext)
        .Where(e => e.Entity is StateInfo && (e.State == EntityState.Added || e.State ==  EntityState.Modified))
        .Select(e => e.Entity as StateInfo))
    ) {
        stateinfo.ModifiedDate = DateTime.Now;
       }
    return base.SaveChanges();
    } 
```

然而，这给出了一个错误，我不明白为什么。错误消息是它说

> 错误 3“System.Collections.Generic.IEnumerable”不包含“Where”的定义，并且找不到接受“System.Collections.Generic.IEnumerable”类型的第一个参数的扩展方法“Where”（您是否缺少使用指令还是程序集引用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:33:37.333

请导入`System.Linq namespace`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:36:30.433

由于[`Enumerable.Where<T>`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)方法属于 `System.Linq`命名空间，因此您需要将其添加到代码顶部。来自*MSDN*；

```
Namespace:  System.Linq
Assembly:  System.Core (in System.Core.dll) 
```

But.. *come on*, this is really a basic issue. You can find your solution using Google with just takes a few seconds. Please show a little more effort to solve the problems `;)`

# objective-c - 在 iOS 中存储 UIImagePicker 选取的图像

> ID：15402678
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:31:32.037
> 
> 标签：objective-c, uiimagepickercontroller, xcode4.3, sup

我正在使用 Objective C 进行 iOS 本机开发。我想实现相机

我的应用程序中的功能。我使用`UIImagePickerController`. 一世

我能够拍摄图像并将其存储在**iPAD**的照片库中。现在我必须存储

它的`BASE 64`格式。我使用**SUP 2.1.3**作为我的中间件。为此

我必须做的步骤？请帮我解决这个问题？为此，我们必须先转换

从IPAD的图像到`BASE 64`权利？请提出一些建议？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T07:07:55.170

您可以使用以下代码获取图像数据：

```
NSData* data = UIImageJPEGRepresentation(yourImage, 1.0f);
[Base64 initialize];
NSString *strEncoded = [Base64 encode:data]; 
```

# java - 如何让我的 Jython 脚本同步调用 Java 方法？

> ID：15402681
> 
> 赞同：1
> 
> 时间：2013-03-14T06:31:46.820
> 
> 标签：java, python, scripting, jython

我有一个 Java 库，它使用 Jython 允许用户添加自定义脚本以与库的特定部分进行交互。

让 Java 为脚本提供数据很容易，但假设我想在 Jython 脚本中遵循这种模式：

```
data = do_stuff()
# Heavy lifting! have the java lib do this
results = java_lib_help_me_out(data)
do_stuff_with_results(results) 
```

可以轻松做到这一点吗？我意识到我可以使库充当服务并使用 REST 进行交互，或者我可以使用回调并使过程更加迂回：

```
data = do_stuff()
#heavy lifting
java_lib_help_me_out(data, callback)
...
def callback(results):
    do_stuff_with_results(results) 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:42:40.417

只需让您的 java_lib_help_me_out() 函数将数据作为 Java 类或数组或其他任何内容返回，如下所示：

```
public String[] java_lib_help_me_out()
{
    return new String[] { "one", "two", "three" };
} 
```

Jython 应该能够自动对其进行内省，并让您做所有您期望的事情。

如果这不起作用，也许发布更多详细信息？

# output - 将所有 proxytunnel 输出捕获到文件中

> ID：15402682
> 
> 赞同：1
> 
> 时间：2013-03-14T06:31:47.900
> 
> 标签：output, io-redirection, proxytunnel

当我使用带有 proxytunnel 的 ssh 命令时，我总是得到类似的输出

```
 Via xxx.yyy.zzz.aaa:pppp -> bbb.ccc.ddd.eee:443 -> remotesvr:22 
```

在我得到命令的输出之前

我想将所有输出捕获到一个文件中，包括这些`"Via ..."`东西。

作为使用`*ls*`我尝试过的命令 的示例

```
*ssh remotesvr ls 2>&1 > $TMPfile* 
```

但`Via xxx...`线路仍然到达我的终端而不是`$TMPfile`.

如何将所有输出捕获到`$TMPfile?`

# magento-1.7 - Magento 在产品页面上的联系 form.phtml 上获取当前查看的产品名称

> ID：15402685
> 
> 赞同：0
> 
> 时间：2013-03-14T06:32:08.977
> 
> 标签：magento-1.7, contact-form

您好，我需要在产品页面上显示的联系人上显示产品名称。所以基本上我希望我的联系表将显示当前查看的产品名称，如果有人可以帮助我这样做，请提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:19:59.377

当您在产品视图页面上时，您应该能够从注册表访问当前产品：

```
<?php $product = Mage::registry('product') ?> 
```

# ruby - 将代码从视图中带入 Rails 中的弹出窗口

> ID：15402687
> 
> 赞同：1
> 
> 时间：2013-03-14T06:32:16.997
> 
> 标签：ruby, ruby-on-rails-3, facebox

我想在单击链接时将此代码从我的视图 html 中带入弹出窗口中这在 Ruby on Rails 中可能吗？我已经让弹出窗口工作了，但我想知道只显示评论的代码：

```
<div class = "comments"><% if post.comments.exists? %>
  <% post.comments.each do |comment| %>
  <%= image_tag("http://www.gravatar.com/someavatarlink %) <!-- Retrieves Gravatar -->
    <%= link_to comment.user.name, comment.user %>
            <span class="timestamp"><%= time_ago_in_words(comment.created_at) %> ago</span>
    <span class="content2"><%= comment.comment_content %></span>
    <% end %>
<% end %></div> 
```

为 _comment_form.html.erb 添加了 Ajax 调用

```
 <%= link_to "Link", comment, :remote => true %>
      Comments
    <% end %></div></div> 
    <div id ="modal" class = "comments"><% if post.comments.exists? %>
      <% post.comments.each do |comment| %>
      <%= link_to comment.user.name, comment.user %>
                <span class="timestamp"><%= time_ago_in_words(comment.created_at) %> ago</span>
        <span class="content2"><%= comment.comment_content %></span>
        <% end %>
    <% end %></div> 
```

将 def show 添加到评论控制器中

```
class CommentsController < ApplicationController
     def new
    @post = post.new(params[:post])
    end

def show
  @comment = Comment.find(params[:id])
  respond_to do |format|
    format.js
  end

   def create
    @post = post.find(params[:micropost_id])
    @comment = Comment.new(params[:comment])
    @comment.post = @post
    @comment.user = current_user
    if @comment.save
       redirect_to(:back)
    else
      render 'shared/_comment_form'
    end
  end
end 
```

创建 show.erb.js 并将其放入 'comments' 和 'shared' 文件夹

```
$("#popup").html('<%= escape_javascript(render "comments") %>'); 
```

然后最后写了我的部分内容，在 comments/_comment.html.erb

```
<% if post.comments.exists? %>
  <% post.comments.each do |comment| %>

    <%= link_to comment.user.name, comment.user %>
            <span class="timestamp"><%= time_ago_in_words(comment.created_at) %> ago</span>
    <span class="content2"><%= comment.comment_content %></span>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:47:35.480

**1\. Ajax call**

To retrieve the data you use an Ajax call.

```
<%= link_to "Link", comment, :remote => true %> 
```

Rails will evaluate these requests and will look for a .js view first (it will use .html if it does not exist).

Make also sure that the controller accepts requests to .js like

```
def show
  @comment = Comment.find(params[:id])
  respond_to do |format|
    format.js
  end
end 
```

**2\. write js view**

Add a `show.erb.js` view to your Comments . This is a JavaScript file with ERB evaluation. In this template use your js popup code and tell it to fill a div with your html code like so:

```
$("#popup").html('<%= escape_javascript(render @comment) %>'); 
```

This will render the comment. The only thing we need then is a partial to render the html of the comment.

**3\. write partial for html**

Write a partial for the view part you want to have in the popup. This can then be used in a normal html view or the js view. To make it work with the code above call it `_comment.html.erb`

To know more about partials you can check the guides here:
[http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

# sql-server-2008 - 安装 2008 r2 后如何测试 Sql server 2005 查询

> ID：15402688
> 
> 赞同：1
> 
> 时间：2013-03-14T06:32:24.727
> 
> 标签：sql-server-2008, sql-server-2005

我已经安装了 sql server 2008 r2 Management studio，但是服务器有 sql server 2005 数据库。有什么原因我可以测试将在我在 sql server 2008 中编写的 sql server 2005 上运行的查询。

我有在 sql server 2008 中有效但在 2005 年无效的示例查询。

```
CREATE TABLE #Tmp
(
    NoOfMembers int,
    AverageAge int
)
insert into #Tmp(NoOfMembers,AverageAge)       

Values((Select Count(*)NoOfMembers  From Customer where Confirmed = 1),
(Select AVG(CONVERT(int,Age)) AverageAge From Customer where Confirmed = 1)
)
select * From #Tmp 
```

提前感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:39:01.147

您可以针对 2005 sql server 使用 sql 2008 management studio，而不会出现问题。如果您的 SQL 语句针对数据库触发并且在 sql 2005 中不起作用，则服务器将回答错误消息。

如果您有一个 sql 2008 并且想要针对 2005 进行测试，您可以将兼容模式设置为 2005，这也可以。

您发布的 sql 语句希望在您的值部分使用子查询。这在 sql2005 上不起作用并产生错误。如果您在 2005 年需要它，请创建一个标量函数，例如并使用它。

编辑：好吧，如果你想在没有语句的情况下使用 sql 将数据插入表中，`VALUES`你可以这样做：

```
CREATE TABLE #Tmp
(
    NoOfMembers int,
    AverageAge int
)

INSERT INTO #Tmp(NoOfMembers,AverageAge)       
SELECT COUNT(*), AVG(CONVERT(int,Age)) 
FROM Customer WHERE Confirmed = 1

SELECT * FROM #Tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:02:37.530

> 好吧，这就是你可以让它工作的方法`SQL Server 2005`。

```
CREATE TABLE #Tmp
(
    NoOfMembers int,
    AverageAge int
)

insert into #Tmp(NoOfMembers,AverageAge)       
    (Select Count(*), AVG(CONVERT(int,Age)) From Customer where Confirmed = 1)

select * From #Tmp 
```

# java - 如何在java中将a字符串转换为日历对象

> ID：15402696
> 
> 赞同：0
> 
> 时间：2013-03-14T06:32:57.370
> 
> 标签：java, calendar

我将以下字符串输入到我的方法中 String xymessage="Your item(s) will be ready Today for Pick up by 10:00 am";

现在如何将此字符串转换为日历对象。

我能够提取这一天，即。无论是“今天”还是“明天”。还有时间，即。“10:00 am”使用这两个参数作为输入，即。今天和上午 10:00 我可以将其转换为日历对象吗？示例代码片段：

```
String xymessage="Your item(s) will be ready Today for pickup by 10:00 a.m.        ";
if(null != xyMessage){
    //removing empty spaces.
    xyMessage=xyMessage.trim();
    LOGGER.debug("sellerId:"+delivSeller.getSellerId()+" and xymessage:"+xyMessage);
    if(xyMessage.contains("Today")){
        //this means its today
        String[] xyArray = xyMessage.split("pickup by");
        if(xyArray.length == 2){
            String timeVal=xyArray[1];
        }
    }else{
        //this means its tomorrow
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:46:18.637

用于`Calendar cal = Calendar.getInstance()`获取具有当前日期和时间的日历对象。使用[add()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#add%28int,%20int%29)、[get()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#get%28int%29)和[set()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#set%28int,%20int%29)方法，您可以正确设置日历对象。例如，要将日期更改为明天的，您可以执行以下操作：`cal.add(Calendar.DAY_OF_MONTH, 1);`

设置小时，`cal.set(Calendar.HOUR, hr);`其中 hr 使用要设置的小时进行初始化。类似的分钟等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:58:57.930

您可以将 SimpleDateFormat 用于您想要的格式。但是当您使用 am 或 pm 而不是简单的 AM/PM 时，它会有点复杂。如果对“今天”条件有帮助，请检查以下代码：这里的变量“时间”是您提取的内容，例如“上午 10:00”

```
 SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
    Date date = new Date();
    String timeArray[]=time.split(" ");
    String minArray[]=timeArray[0].split(":");
    date.setHours(Integer.parseInt(minArray[0]));
    date.setMinutes(Integer.parseInt(minArray[1]));
    if(!timeArray[1].startsWith("a")){
        date.setHours(date.getHours()+12);
    }
    Calendar cal = Calendar.getInstance();
    cal.setTime(date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:01:38.607

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
/**
 *
 * @author Administrator
 */
public class Test {

  public static void main(String[] args) throws ParseException {
    SimpleDateFormat sdf = new SimpleDateFormat("hh:mm aa");
    SimpleDateFormat finalFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm aa");
    Calendar today = Calendar.getInstance();
    Calendar tomorrow = Calendar.getInstance();
    tomorrow.add(Calendar.DATE, 1);

    String xyMessage = "Your item(s) will be ready Today for pickup by 10:00 a.m.        ";
    if (null != xyMessage) {
      //removing empty spaces.
      xyMessage = xyMessage.trim();
      if (xyMessage.contains("Today")) {
        //this means its today
        String[] xyArray = xyMessage.split("pickup by ");
        String time = xyArray[1].replace(".", "");

        today.set(Calendar.HOUR_OF_DAY, sdf.parse(time).getHours());
        System.out.println("calendar:" + finalFormat.format(today.getTime()));

      } else {
        //this means its tomorrow
        String[] xyArray = xyMessage.split("pickup by ");
        String time = xyArray[1].replace(".", "");

        tomorrow.set(Calendar.HOUR_OF_DAY, sdf.parse(time).getHours());
        System.out.println("calendar:" + finalFormat.format(tomorrow.getTime()));
      }
    }
  }
} 
```

只需使用 SimpleDateFormat("hh:mm aa")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:09:39.873

试试下面的代码。

```
 String val = "10:00 a.m";
    val = val.replace(".", "");

    SimpleDateFormat dateFormat = new SimpleDateFormat("hh:mm a");
    Calendar temp = Calendar.getInstance();
    temp.setTime(dateFormat.parse(val));

    Calendar cal = Calendar.getInstance();

    if ("tomorrow".equalsIgnoreCase("YOUR_STRING")) {
        cal.add(Calendar.DAY_OF_YEAR, 1);
    }

    cal.set(Calendar.HOUR_OF_DAY, temp.get(Calendar.HOUR_OF_DAY));
    cal.set(Calendar.MINUTE, temp.get(Calendar.MINUTE));

    System.out.println(cal.get(Calendar.DAY_OF_MONTH) + ":"
            + (cal.get(Calendar.MONTH) + 1) + ":"
            + cal.get(Calendar.HOUR_OF_DAY) + ":"
            + cal.get(Calendar.MINUTE));
} 
```

# c++ - 我将道路存储为矩形数组，如何检测汽车与道路之间的碰撞

> ID：15402697
> 
> 赞同：0
> 
> 时间：2013-03-14T06:32:58.957
> 
> 标签：c++, collision-detection

道路没有任何高程，y 坐标为 0。汽车是 3d，但对于碰撞检测，可以将其视为 2d 矩形。

我的结构：

```
struct rectangle
{
    // 4 coordinates of the rectangle
    float x1_left, y1_left;
    float x1_right, y1_right;

    float x2_left, y2_left;
    float x2_right, y2_right;

    double thetaSlope;
}; 
```

我有构成道路的所有这些矩形的数组，最初汽车在第一个矩形内。

我搜索了碰撞检测并发现 - 两个矩形之间的简单 2d 碰撞检测，但是如何确定我的汽车是否位于特定的矩形中，汽车应该能够轻松地从一个矩形移动到另一个矩形，但不能从侧面出来矩形。

我正在寻找一个相当简单的解决方案。![道路顶视图](../Images/5de22d733430b87e51856520dbaebb05.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:56:33.443

创建 Point2d 类并将矩形定义为点的容器。例如：

```
 struct rectangle
    {
        Point2d p1;
        Point2d p2;
        Point2d p3;
        Point2d p4;

        double thetaSlope;
    }; 
```

或者

```
 struct rectangle
    {
        Point2d points[4];

        double thetaSlope;
    }; 
```

有了这个抽象代码就更简单了。

您应该将矩形的边标记为可穿透或不可穿透。在碰撞检测中只参与不可穿透的侧面。

我认为使用多边形而不是矩形是更简单的解决方案。您可以将整个地图定义为一个大多边形，而不要处理从一个矩形到另一个矩形的移动。

# android - 如何在android中创建应用程序文件夹

> ID：15402702
> 
> 赞同：1
> 
> 时间：2013-03-14T06:33:19.830
> 
> 标签：android

我在 onCreate() 方法的第一个活动上创建应用程序文件夹，但文件夹没有创建。这里是代码

```
 if (!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
        File fil = new File(this.getFilesDir().getPath()+File.separator+"MyContactsBackUp");
        fil.mkdirs();

} else {
    File directory = new File(Environment.getExternalStorageDirectory()+File.separator+"MyContactsBackUp");
    directory.mkdirs();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T06:45:20.980

试试这个代码

```
if (android.os.Environment.getExternalStorageState().equals(
    android.os.Environment.MEDIA_MOUNTED)) {

       File podcastFolder = new File(Environment.getExternalStorageDirectory() + File.separator
                                             + getString(R.string.app_name));
} else {
            /* save the folder in internal memory of phone */

    File podcastFolder = new File("/data/data/" + getPackageName()
                    + File.separator + getString(R.string.app_name));

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T06:39:49.093

试试这个。

```
File f = new File(android.os.Environment.getExternalStorageDirectory(),File.separator+"MyContactsBackUp/");
f.mkdirs(); 
```

或用于应用程序的内部存储器，而不是编写硬核刺痛使用。

```
File f = new File(getCacheDir(),File.separator+"MyContactsBackUp/");
f.mkdirs(); 
```

# sql-server-2008 - 使用 Pivot 时将记录存储到动态查询内的临时表中。

> ID：15402705
> 
> 赞同：0
> 
> 时间：2013-03-14T06:33:26.107
> 
> 标签：sql-server-2008, pivot-table, temp-tables

我是 sql 编程的新手。

我想存储从数据透视查询返回的记录作为结果集。

Pivot 的列是动态选择的。

我的查询是：

```
declare @cols nvarchar(max)

set @cols=STUFF((select distinct ',[' + LTRIM(rtrim(year(Dt)))+']' from temp FOR XML PATH('')),1,1,'');

EXEC('select * from 
(select YEAR(Dt)[year],Software,Ver from temp)T
Pivot(count([year]) for [year] in ('+@cols+'))PVT') 
```

我想将此结果存储到临时表中以供进一步报告。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:11:33.507

> 试试下面的查询。您将不得不使用`INTO`.

```
declare @cols nvarchar(max)

set @cols=STUFF((select distinct ',[' + LTRIM(rtrim(year(Dt)))+']' 
from temp 
FOR XML PATH('')),1,1,'');

EXEC('select * INTO ##temptable from 
    (select YEAR(Dt)[year],Software,Ver from temp)T
    Pivot(count([year]) for [year] in ('+@cols+'))PVT') 
```

# javascript - Gmarker自定义图标未显示全尺寸

> ID：15402707
> 
> 赞同：0
> 
> 时间：2013-03-14T06:33:31.007
> 
> 标签：javascript, google-maps-api-3

我们已经设法使用自定义图标创建标记，我们首先定义图标，例如

```
var pIcon = new google.maps.MarkerImage('alertIcon/P.png',
                                         new google.maps.Size(15, 15)); 
```

然后我们以这种方式定义标记。

```
var marker = new google.maps.Marker({
                            position: point,
                            map: map,                          
                            icon: yIcon
                        }); 
```

现在的问题是自定义图标出现了，但只是其中的一部分，而不是我们在 V2 中的完整图标，这可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:45:25.773

Google 地图标记的图标只需是图标图像 URL 的字符串。创建 MarkerImage 可能会导致 Google 地图 api 缩小自定义图标的大小。

```
 var pIcon = "alertIcon/P.png" 
```

这就是定义图标时所需的全部内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:51:03.193

```
var pIcon = new google.maps.MarkerImage('alertIcon/P.png',
    // This might be where you're running into trouble, set
    // Size(w,h) to the dimensions of the image
    new google.maps.Size(72, 95),
    // This is the origin, probably want to keep it at 0,0
    new google.maps.Point(0,0),
    // This is the anchor. For Point(x,y) x should be
    // half the image width and y should be the height
    new google.maps.Point(36, 95)
); 
```

# oop - 将处理两个类之间关系的方法放在哪里？

> ID：15402711
> 
> 赞同：2
> 
> 时间：2013-03-14T06:33:57.867
> 
> 标签：oop, design-patterns, architecture

在我的应用程序中，我有产品在生产线的工作站之间移动。产品在一个工位的每一次通过都会记录一个结果：成功失败。产品和站点之间的关系是多对多的。

如果我用程序语言编程，我将具有以下功能：

```
get_last_pass_result($station_id, $product_id) {...} 
```

这将返回此特定产品最后一次通过此特定站点的结果。

现在，您将如何用 OOP 术语对这种逻辑进行建模？我肯定会有类站和类产品。但我应该这样做（php语法）：

```
$station->get_last_product_pass_result($product_id) 
```

或者

```
$product->get_last_pass_on_station_result($station_id) 
```

这种情况似乎是对称的，我想知道两者之间存在哪些考虑因素（甚至可能是第三种解决方案？）

我无法在此处提供有关该领域的所有现有信息，但请随意包括以下考虑事项：如果 [关于该领域的假设] 那么 [您的设计解决方案]，如果感觉合适

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:03:02.763

我的看法，但基于 DDD 原则，所以我不知道这是否适合您的需求，但无论如何......

所以你有一个**Station**和一个**Product**。我会说它们都是可以相互引用的实体，但是您正在谈论的逻辑包含这些实体，并且可能会被放入像*ProductPassingService*这样的域服务中，并带有像*GetLastPassFor(product, station)*这样的操作。

此域服务将负责使用底层域实体 Station 和 Product（以及用于查询它们的存储库）并执行不属于 Station 和 Product 的逻辑。它使实体 Station 和 Product 保持清洁，避免过多的责任。

此外，域实体不应使用存储库（[DDD - 实体不能直接访问存储库的规则](https://stackoverflow.com/questions/5694241/ddd-the-rule-that-entities-cant-access-repositories-directly)），因此此逻辑属于域服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:53:52.960

我不完全清楚 是`Product`代表一种产品（例如椅子）还是代表产品的单个实例（例如chair-001、chair-002）。从您的示例来看，似乎是后者，所以我将使用它，否则`get_last_pass_result`没有多大意义。

我相信我会介绍一种`Path`类型（尽管对领域了解不多）。现在，根据其他用例，这可能是聚合根（在 DDD 术语中）或不是。

这意味着它可以通过`Product`实例或直接从 DB/repository/whatever 访问。使用路径实例，我可以简单地做：

```
var path = product.GetPath(); // if it is accessible only via product
var path = Path.GetPathForProduct(product); // or pathRepository.GetPathFor(), or ...
var result = path.LastResult; 
```

这种方法将工厂流程与产品本身分离，并支持其他一些场景（例如，找到平均持续时间等......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T20:35:09.277

与往常一样 - 这取决于您如何使用它。

但是探索频道上有一个很好的“它是如何工作的”示例——一家汽车工厂。在槽式输送机的行程中，汽车接收越来越多的附加部件。每辆汽车都附有一种*工作计划*——为了完成任务而要完成的工作列表。当它通过生产线时，负责一项工作的人会为工作完成打分。因此，当发现缺陷时 - 您肯定知道来源。

因此，回到程序方法。首先，使用结构+过程方法而不是纯 oop 更自然。但这当然取决于你。

其次 - 我建议将“产品”与“生产线日志”对象分开，该对象与产品具有一对一的关系，但在产品发布后可能没有必要。“生产线日志”存储与工作站处理的对象相关的事件。此外，您可以将其用作时间表，即包含如何处理特定产品的说明（作为汽车，是否包含或不包含某些功能，如空调或雾灯）。工人应将“计划中的”行动标记为“完成”。

在现在的术语中，它也可以用“事件溯源”术语来表达：在移动过程中，产品修改被写入日志；因此可以通过一个一个地重播修改事件来重新构建一个产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T06:42:19.480

我建议将其放入产品中。我关心的是产品的数量很大，但站应该是固定的，在那个产品的对象中记录特定产品的状态是很自然的。对于车站来说，可能只需要记录一些统计数据。

# c# - 为什么 SSIS 上的变量不能给出值？

> ID：15402714
> 
> 赞同：0
> 
> 时间：2013-03-14T06:34:26.877
> 
> 标签：c#, logging, path, ssis, expressionbuilder

你好在这个问题之前我已经问过Stckoverflow [Create Dynamic Path For SSIS Logging with SSIS log provider for Text files](https://stackoverflow.com/questions/15335796/create-dynamic-path-for-ssis-logging-with-ssis-log-provider-for-text-files)

我遵循建议，但我的日志文件没有创建？为什么会这样？是否无法动态更改 SSIS 文本日志文件连接的日志记录？它只是静态连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T02:20:09.673

我得到了这个链接的答案：[set filepath from database in SSIS variable for logging](https://stackoverflow.com/questions/15432836/set-filepath-from-database-in-ssis-variable-for-logging)

```
IDTSVariables100 varCollection = null;
this.VariableDispenser.LockForRead("User::FilePath");
string XlsFile;

XlsFile = varCollection["User::FilePath"].Value.ToString(); 
```

我需要的是：

```
this.VariableDispenser.LockForRead("User::FilePath"); 
```

# android - 更新在 SQLite 数据库中不起作用

> ID：15402716
> 
> 赞同：1
> 
> 时间：2013-03-14T06:34:33.730
> 
> 标签：android, database, sqlite

我有一段代码在单击列表项时更新表中的一行。这是代码，

```
 list_replace.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> Parent,View v, int Position, long id) {

            ContentValues cvs = new ContentValues();

           cvs.put(COLUMN_NAME_READING_MODE, ReadingMode);
           cvs.put(COLUMN_NAME_PASTDATETIME, StartDate);
           cvs.put("EndDateTime", CurrentDateTime);
           cvs.put(COLUMN_NAME_READINGVALUE,Reading);
           DB.update(TABLE_NAME, cvs, "_Id =" + id, null);

          DB.close();

        }
    }); 
```

但我没有在我的表中看到任何更新的记录。请纠正我。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:39:58.907

```
list_replace.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> Parent,View v, int Position, long id) {

        ContentValues cvs = new ContentValues();

       cvs.put(COLUMN_NAME_READING_MODE, ReadingMode);
       cvs.put(COLUMN_NAME_PASTDATETIME, StartDate);
       cvs.put("EndDateTime", CurrentDateTime);
       cvs.put(COLUMN_NAME_READINGVALUE,Reading);
       SQLiteDatabase db = context.openOrCreateDatabase(DATABASE_NAME,
            Context.MODE_PRIVATE, null);   // add this line
       db.update(TABLE_NAME, cvs, "_Id =" + id, null);

       db.close();

    }
}); 
```

# python - 使用 python "re" 获取子字符串的位置

> ID：15402721
> 
> 赞同：2
> 
> 时间：2013-03-14T06:35:09.790
> 
> 标签：python, regex

这是一个由随机 0,1 组合而成的字符串，例如

```
number='111111111111111111111111000000000000000000000000000000000111111111111111111111111' 
```

如何使用 python 的 re 来获取所有的“1 * ...”及其位置？

这是我的：

```
re.compile(r"1+").findall(number) 
```

只是得到“1 ...”，我必须做更多的工作才能得到它的位置

所有的“1 ...”，它的开始和结束位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T06:42:02.967

使用`match.span()`：

```
import re

number = '111111111111111111111111000000000000000000000000000000000111111111111111111111111'
for m in re.finditer(r'1+', number):
    print m.span() 
```

这将打印每次运行的开始和结束位置：

```
(0, 24)
(57, 81) 
```

`m.group(0)`将为您提供匹配字符串。

# php - 从 mysql 数据库显示图像的问题

> ID：15402727
> 
> 赞同：1
> 
> 时间：2013-03-14T06:35:32.737
> 
> 标签：php, mysql, image

我已经在这个问题上工作了很长一段时间并且做了研究，但我什么也没做

可以找到特定于我的问题。我正在为我的每个用户建立一个个人资料页面，他们

在我们的网站上注册。在此注册期间，用户添加配置文件数据以及

个人资料图片。用户登录正常并正确显示所有内容，但在显示时

uploadimage 它返回上传文件的名称，而不是实际的图像；

```
 Profile Page for testuser</br>
    Username: testuser</br>
    Name: testuser</br>
    Birthdate: January Day, 1980</br>
    Member Role: Tester</br>
    Genre: cool stuff</br>
    Personal Details</br>
    E-mail: test@yahoo.com</br>
    Profile Image: pic.jpg</br>
    Location: test, California 90100</br> 
```

登录代码如下。请帮忙！

```
 <?php   
        $img_url = "uploads";

        //loginscript.php

        //check if variables were received
        if(($_POST['username']!=NULL) && ($_POST['password']!=NULL)):
        //if yes, proceed with script
        //get POST variables and use md5 for password encryption

        $uname = $_POST['username'];
        $pass = $_POST['password'];

        //connect to database
        $link = dbconnect();

        //check username validity
        $validUser = checkUsername($uname);

        //throw error on invalid username
        if(!$validUser){
        die('The specified user does not exist!');
        }

        //compare username/password
    $sql = "SELECT COUNT(*) FROM tbldatabase WHERE username = '$uname' AND password = $pass'";      
        $query = mysql_query($sql);                                                                              
        if(!$query){ die('MySQL failed with error: '.mysql_error());    }                               
        //throw error on username/pass mismatch
        if(!mysql_result($query,0,0)){                                                                  
                //if result < 1, username/password mismatch
                die('The password entered does not match test');
            }

            //validation successful, login (or just display info)
            $sql = "SELECT ID FROM tbldatabase WHERE username = '$uname'";                                  
            $query = mysql_query($sql);                                                                     
            if(!$query){ die('MySQL failed with error: '.mysql_error());    }                               
            $UID = mysql_result($query,0,0);                                                                

            $data = getTableData('tbldatabase',$UID);
            $uInfo =  mysql_fetch_array($data, MYSQL_BOTH);

            ?>
            <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title><?=$uInfo['username'] ?>'s Page</title>
            <style type="text/css">
            #apDiv1 {
    position: absolute;
    width: 200px;
    height: 115px;
    z-index: 1;
}
            #apDiv2 {
    position: absolute;
    width: 200px;
    height: 115px;
    z-index: 1;
}
            </style>
            </head>
            <body>
           <?php ?> <b>Profile Page for <?=$uInfo['username'] ?> </b><br />
            Username: <?=$uInfo['username'] ?><br />
          Name: <?=$uInfo['firstname'].' '.$uInfo['lastname'] ?><br />
      Birthdate: <?=$uInfo['bmonth'].' '.$uInfo['bdate'].', '.$uInfo['byear'] ?> <br />
            Member Role: <?=$uInfo['memberrole'] ?><br />
            Music Genre: <?=$uInfo['genre'] ?><p />
            <p><b>Personal Details</b><br />
            E-mail: <?=$uInfo['email'] ?><br />
            Profile Image: <?=$uInfo['Image'] ?><br /> 
    Location: <?=$uInfo['city'].', '.$uInfo['state'].' '.$uInfo['zipcode'] ?><?php ?>
            </p>
            <p>&nbsp;</p>

            </body> 
            </html>
        <?
        else: 
   die('necessary information requested from profile page is missing or omitted');

        endif; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:37:56.013

将图像包装在`img`标签内

```
<img src="<?=$uInfo['Image'] ?>" alt="" /> 
```

还要确保 src 指向它所在的路径`image`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:42:16.453

图像应始终显示在标签中

代替

```
 Profile Image: <?=$uInfo['Image'] ?><br /> 
```

和

```
 Profile Image: <img src="<?=$uInfo['Image'] ?>" alt='no image available'><br /> 
```

并且图像的路径应该是正确的。

# sharepoint - Sharepoint 中的最大 Webpart 属性大小

> ID：15402734
> 
> 赞同：1
> 
> 时间：2013-03-14T06:35:59.053
> 
> 标签：sharepoint, sharepoint-2010, web-parts

Sharepoint 2010 中 Web 部件的最大属性大小（例如，我可以在字符串属性中存储多少字节）是多少？

在[MSDN 上的这篇文章中，](http://msdn.microsoft.com/en-us/library/dd585794%28v=office.11%29.aspx)它在 Web.config 中设置为 1048576。

```
<SharePoint>
    <WebPartLimits PropertySize="1048576"/> 
```

在我的 Sharepoint 2010 安装中，我在 Web.config 中有一个类似的条目：

```
<SharePoint>
    <WebPartLimits MaxZoneParts="50" PropertySize="1048576" /> 
```

这意味着我最多可以在一个属性中存储 1 MB。

但是我进行了测试，能够在字符串属性中存储 16300000 个字符（UTF8 中大约 16 MB），我停止添加更多字符，因为这对我来说已经足够了。

但我想知道为什么这是可能的，因为 Web.config 说它是最大的。1MB？

# css - Bootstrap 下拉菜单出现在 IE7 中的 Flexslider 下方

> ID：15402742
> 
> 赞同：1
> 
> 时间：2013-03-14T06:36:31.030
> 
> 标签：css, twitter-bootstrap, internet-explorer-7

![在此处输入图像描述](../Images/030c578f36f8c45aab41265aaf21263b.png)下拉菜单（当您将鼠标移到右侧的登录链接上时）在除 IE7 之外的所有浏览器中都正确显示。

在 IE 7 中，它出现在使用 FlexSlider 插件创建的滑动图像下方。

[http://www.dreamsmedia.org/ajmat/index.html](http://www.dreamsmedia.org/ajmat/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-30T14:23:36.590

我知道我的回答很晚，但如果有人有同样的问题！

尝试这个 ： `.slidercontainer {position:absolute; z-index: -1000}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:30:50.317

将 z-index 添加到登录表单的导航栏容器 div。例如，使用内联 CSS：

```
<div class="nav_block container" style="z-index: 1000;">
  ...
    <div class="dropdown-menu ie7 pull-right" id="login-form" aria-labelledby="login-form"> 
```

在这种情况下，z-index 仅与其父级相关，因此将 z-index 添加到 login-form div 不会解决问题。这是由于 div 堆叠上下文。有关堆叠上下文的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)

# linux - 如何从 linux 中的文件中打印特定范围的行？

> ID：15402744
> 
> 赞同：15
> 
> 时间：2013-03-14T06:36:46.267
> 
> 标签：linux, unix

如果我有一个包含 100,000 行的文件，如何打印指定范围内的行，例如第 15010 到 15020 行？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-14T06:38:18.860

### `sed`：

```
$ sed -n '15010,15020p' input.txt 
```

### `awk`：

```
$ awk '15010<=NR && NR <=15020' input.txt 
```

### `head/tail`：

```
$ head -n 15020 input.txt | tail -n $((15020-15010+1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:40:05.840

您可以使用`head`和`tail`：

```
head -15020 f.txt | tail -11 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:42:02.833

尝试头部和尾部的组合。就像是：

```
head  -15010 filename | tail -11 
```

# android - 查看 ListView 导致 ClassCast 异常

> ID：15402750
> 
> 赞同：0
> 
> 时间：2013-03-14T06:37:18.807
> 
> 标签：android, android-listview, classcastexception, ondraw

我正在使用相对布局（RL）来保存列表视图（lv）和一些其他小部件，如文本视图（tv）、编辑文本（et），然后是几个按钮（btn），最后是一个进度条（铅）。

**场景**
**1.**当我将子视图添加到父容器视图即。相对布局(rl)，顺序为：
**RL(Btn1->Btn2->tv1->tv2->LV->pb)。**
那么我们就没有问题，我的意思是没有例外，没有问题。
**2.**但是当我像
**RL(tv1->tv2->LV->Btn1->Btn2->pb) 那样进行排序更改时。**
然后我得到一个类播异常。

注意：这两个按钮应该在列表视图上方，因为它们都是社交网站按钮，我指的是 Facebook 和 Twitter。

XML 代码：

```
<RelativeLayout
    android:id="@+id/rlfornews"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dip"
    android:layout_marginTop="5dip"
    android:background="@drawable/newsbg"
    android:orientation="vertical"
    android:paddingBottom="5dip" >

    <Button
        android:id="@+id/btnbasetw"
        android:layout_width="30dip"
        android:layout_height="30dip"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginBottom="10dip"
        android:layout_marginLeft="5dip"
        android:layout_marginRight="10dip"
        android:background="@drawable/twitter_icon"
        android:visibility="gone" />

    <Button
        android:id="@+id/btnbasefb"
        android:layout_width="30dip"
        android:layout_height="30dip"
        android:layout_centerVertical="true"
        android:layout_marginBottom="10dip"
        android:layout_toLeftOf="@id/btnbasetw"
        android:background="@drawable/facebook_icon"
        android:visibility="gone" />

    <TextView
        android:id="@+id/tvnewscon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="3dip"
        android:background="@drawable/newstitle"
        android:gravity="center_vertical"
        android:paddingLeft="8dip"
        android:shadowColor="@color/black"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:text="@string/news"
        android:textColor="@color/white" />

    <TextView
        android:id="@+id/tvfornews"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvnewscon"
        android:layout_marginTop="10dip"
        android:gravity="center"
        android:text="@string/no_data_found"
        android:visibility="gone" />

    <ListView
        android:id="@+id/lvdashboardnews"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/tvnewscon"
        android:padding="4dip"
        android:visibility="visible" >
    </ListView>

    <ProgressBar
        android:id="@+id/pbfornews"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />
</RelativeLayout> 
```

注意：进度条可能在下方，但它只是为了用户信息，一些数据正在加载。当我获得该数据时，我正在使其对 VIEW.GONE 状态的可见性，并且列表视图已经存在！我的问题是，当我遵循第一个场景时，即使我一直都有一个进度条，但我没有得到 Class Cast 异常。但是当我更改为场景 2 时，我得到了例外。那为什么我会得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:00:29.230

1.  我不确定这些，但可能是因为您使用了 android:layout_below = "@id/textview" 而不是使用这些 android:layout_below = "@+id/textview" 所有 UI。

2.  如果您可以使用 LinearLayout 来完成这些 UI。

# cakephp-1.2 - cakephp电子邮件重复电子邮件组件问题

> ID：15402752
> 
> 赞同：0
> 
> 时间：2013-03-14T06:37:25.103
> 
> 标签：cakephp-1.2

我正在使用 cakephp 1.2.8 来安排时事通讯，我们正在使用电子邮件组件并在 cron 作业中设置 URL。

我们面临的问题是，它多次发送电子邮件。我们已经签入了日志和 cron。cron 和代码都没有问题。如何识别问题？蛋糕1.2有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:14:32.263

您可以使用单独的表来存储待处理的电子邮件。每次发送电子邮件前检查表格。发送电子邮件后，从表中删除电子邮件。它可能会解决您的问题。

# android - 通过图形 API 发布到 Facebook 页面时如何隐藏应用程序源

> ID：15402755
> 
> 赞同：0
> 
> 时间：2013-03-14T06:37:54.347
> 
> 标签：android, facebook, facebook-graph-api

我已通过 Graph API 作为实际页面成功发布到粉丝页面。

问题是该帖子说它是在“通过应用程序名称的时间”发布的。有什么办法可以隐藏这一点，所以我的帖子看起来就像我直接在 Facebook 上输入的一样？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:53:30.327

*简短的回答：*没有。

*略长的回答：*

不幸的是，如果要提供这样的功能，则必须由 Facebook 通过其 SDK / API 提供。但是，到目前为止，只要通过任何第三方应用程序发布任何内容，他们将继续在其帖子上贴上*通过应用程序的名称*印章。

为什么我说 Facebook 必须实现这样的功能是因为 Twitter 正是这样做的。我想是在 2012 年年中的某个时候。这样做可能是为了在整个平台上实现平等。* 来源：[http](http://thenextweb.com/twitter/2012/08/28/twitter-longer-displays-client-tweet-posted-web-emphasizing-first-party-reading-experience/) ://thenextweb.com/twitter/2012/08/28/twitter-longer-displays-client-tweet-posted-web-emphasizing-first-party-reading-experience/ *

我怀疑这是因为与 Facebook 平台相比，您只能执行一组有限的操作（在 Twitter 上发布时）。在 Facebook 上，您在向平台发布内容时有多种选择。图片、视频、链接、状态更新。而且我什至没有计算 Open Graph 操作。

您可以考虑向 Facebook 提交[功能请求](https://developers.facebook.com/policy/contact/)。如果他们认为该建议值得包含，他们可能会这样做。

# postgresql - 使用 Keter 重新部署 Yesod 应用程序而不重新创建数据库

> ID：15402759
> 
> 赞同：3
> 
> 时间：2013-03-14T06:38:04.757
> 
> 标签：postgresql, haskell, yesod

我正在使用 Yesod 编写我的第一个应用程序，并且我已经将它带到了可以运行的状态，但我想继续向它添加一些小东西。到目前为止，每次我通过交换新包重新部署 keter 时，都会为该应用程序重新创建数据库。如果没有这种影响，我该如何重新部署？我对 postgres 不是很熟悉，所以解决方法也很好。

编辑：我还用 SQLite 搭建了它，如果这有什么不同的话。我一直在寻找，仍然无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T23:37:46.180

与公认的答案相反，您实际上可以这样做。在 sqlite.yml 配置中，您只需将路径设置为它可以访问的位置。

我当前的设置是，我已经创建了一个文件夹，`/opt/keter/database`然后我的生产配置是，

```
Production:
  database: /opt/keter/database/HsCMS_production.sqlite3
  poolsize: 100
  <<: *defaults 
```

这将使数据库在部署中保持持久。您应该知道，当您更改数据库时，它仍然需要进行迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T01:45:29.637

我最终想出的答案是，如果它是用 Sql-lite 搭建的，我无法让它保留数据。

# android - 安卓png性能

> ID：15402761
> 
> 赞同：1
> 
> 时间：2013-03-14T06:38:25.533
> 
> 标签：android, image, performance

我已经问了几次类似的问题，但仍然没有解决我的问题，所以我想我会以另一种方式来解决，看看是否有人可以帮助我。

我正在为 Android 编写游戏；这是我第一次尝试这么大/复杂的程序。该游戏是一个 2d 动作/益智游戏，我使用 Canvas 而不是 OpenGL ES 进行绘图。

一切都很顺利，除了我尝试绘制 pngs/bmps/jpgs 时，我自己导入的任何图像。我可以使用内置的 Android 画布 drawShape 方法（包括许多带有 Alpha 内容的 Paints）绘制形状和动画，直到奶牛回家，并保持超过 60fps，但只要我尝试添加自己的图像（例如，60kb png 从 Photoshop 中保存）我立即看到性能受到重大影响。屏幕上 png 的大小越大，点击量就越大（这是有道理的）。

我有一个简单的问题可以帮助我理解我是否在这里做错了什么：

如果您使用 Canvas 绘制方法在屏幕上绘制一个红色矩形，我是否应该期望可以导入并显示一个相同尺寸的红色矩形而不损失性能？我已经对这个问题进行了大量研究，但我仍然不清楚为什么 Android（或 Nexus 7）会对我的图像造成如此困难。

帆布是问题吗？我是否需要移植到 Libdgx 或 AndEngine（我认为这将是一个过程......）？

如果有帮助，这就是我加载资产的方式：

```
@Override
public Image newImage(String fileName, ImageFormat format) {
    Config config = null;
    if (format == ImageFormat.RGB565)
        config = Config.RGB_565;
    else if (format == ImageFormat.ARGB4444)
        config = Config.ARGB_4444;
    else
        config = Config.ARGB_8888;

    Options options = new Options();
    options.inPreferredConfig = config;     

    InputStream in = null;
    Bitmap bitmap = null;

    try {
        in = assets.open(fileName);
        bitmap = BitmapFactory.decodeStream(in, null, options);
        if (bitmap == null)
            throw new RuntimeException("Couldn't load bitmap from asset '"
                    + fileName + "'");
    } catch (IOException e) {
        throw new RuntimeException("Couldn't load bitmap from asset '"
                + fileName + "'");
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
            }
        }
    }   

    if (bitmap.getConfig() == Config.RGB_565)
        format = ImageFormat.RGB565;
    else if (bitmap.getConfig() == Config.ARGB_4444)
        format = ImageFormat.ARGB4444;
    else
        format = ImageFormat.ARGB8888;

    return new AndroidImage(bitmap, format);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T17:39:23.197

画布比 GLSurfaceView 慢，但在 Nexus 7 上应该在一个屏幕上处理 300 个位图而不会出汗。

在 onDraw 中搜索您的性能问题。观看实时游戏设计中的提示和技巧： [http ://www.google.com/events/io/2010/sessions/writing-real-time-games-android.html](http://www.google.com/events/io/2010/sessions/writing-real-time-games-android.html)

# c# - C#.NET 助记符意外行为

> ID：15402765
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:38:51.363
> 
> 标签：c#, behavior, mnemonics

我的 Windows 应用程序中有几个具有助记符的按钮。现在，如果我按下多个键，按钮点击的事件会被触发，因为我使用了助记符。但行为并不像预期的那样，因为第二个按钮事件处理程序在第一个按钮事件处理程序完成执行之前被执行，而且我已经编写了我的代码，在第一个按钮的事件处理程序中我禁用了我的第二个按钮，仍然是第二个按钮事件处理程序正在执行。这里的问题是由于助记符。请建议我尽快处理助记符的更好方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:01:16.750

如果您的逻辑与您的按钮相关联，请更改它。让您的按钮仅操作实现您的逻辑的对象。然后，您可以检查该对象是否允许请求的操作（即先前的操作是否已完成。

或者，您可以在运行时禁用按钮，然后在 when.finished 时重新启用。

# javascript - 带有 AJAX 源的 Bootstrap Typeahead：未按预期返回数组

> ID：15402768
> 
> 赞同：3
> 
> 时间：2013-03-14T06:39:04.037
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap, bootstrap-typeahead

我在让引导程序预先输入以与 AJAX 源一起正常工作时遇到了很多麻烦。

如果我提醒正在返回的数组，它非常好，即使我对它进行硬编码来测试它。当您输入近似匹配时，它似乎大多数时候什么都不返回，或者只返回数组中的几个项目。

这是我目前所拥有的：

```
$('#companyNameInput').typeahead({
      source: function(query, process){

          $.ajax({
            url: ROOT+'Record/checkCompanyName',
            async: false,
            data: 'q='+query,
            type: 'POST',
            cache: false,
            success: function(data)
            {
              companiesFinal = [];
              map = {};
              companies = $.parseJSON(data);
              $.each(companies, function(i, v){
                map[v.name] = v.id;
                companiesFinal.push(v.name);
              })
            }
          })
          process(companiesFinal);

          // return ['test1', 'test2'] This works fine
          return companiesFinal;
      } 
```

有谁知道为什么这可以正常工作？

* * *

这是从我的 PHP 脚本返回的对象数组的示例。ID 为 1 和 1216 的对象显示在 typeahead 下拉列表中，但其他对象都没有。我看不到任何模式或线索，说明为什么只有这些会显示而不是其他。

```
[
   {
      "id": "1265",
      "score": "40",
      "name": "LMV AB"
   },
   {
      "id": "10834",
      "score": "33",
      "name": "Letona"
   },
   {
      "id": "19401",
      "score": "33",
      "name": "Lewmar"
   },
   {
      "id": "7158",
      "score": "33",
      "name": "Lazersan"
   },
   {
      "id": "3364",
      "score": "33",
      "name": "Linpac"
   },
   {
      "id": "1216",
      "score": "33",
      "name": "L H Evans Limted"
   },
   {
      "id": "1",
      "score": "33",
      "name": "LH Evans Ltd"
   },
   {
      "id": "7157",
      "score": "33",
      "name": "Lazersan"
   }
] 
```

最后是过去的数组`process(companiesFinal)`：

```
["LMV AB", "Letona", "Lewmar", "Lazersan", "Linpac", "L H Evans Limted", "LH Evans Ltd", "Lazersan"] 
```

* * *

有人有任何线索吗？我仍然完全不知道为什么这仍然不起作用:(

* * *

```
$('#companyNameInput').typeahead({
      source: function(query, process){

        companyTOut = setTimeout(function(){
          return $.ajax({
            url: ROOT+'Record/checkCompanyName',
            data: 'q='+query,
            type: 'POST',
            dataType: 'json',
            cache: false,
            success: function(data)
            {
              var count = 0;
              var companiesFinal = [];
              map = [];
              $.each(data, function(i, v){
                map[v.name] = [v.id, v.score];
                companiesFinal.push(v.name);
              })
              process(companiesFinal);

            }
          })
        }, 250)
      },
      minLength: 2,
      highlighter: function(item)
      {
        $('#companyNameInput').closest('.control-group').removeClass('success')
        companyLocked = false;
        return '<span class="unselectable" title="'+map[item].score+'">'+item+'</span>';
      },
      updater: function(item)
      {
        selectedEntityId = map[item][0];
        selectedCountryScore = map[item][1];
        lockCompany(selectedEntityId);
        return item;
      }
    }); 
```

* * *

```
$output .= '['.$output;
    foreach($results as $result) {
      $output .= '{"id":"'.$result['id'].'",';
      $output .= '"score":"'.$result['score'].'",';
      $output .= '"name":'.json_encode($result['name']).'},';
    }
    header('Content-Type: application/json');
    echo substr($output, 0, strlen($output)-1).']'; 
```

* * *

“parm”的控制台输出：

```
[Object, Object, Object, Object, Object, Object]
0: Object
id: "25024"
name: "part"
score: "75"
__proto__: Object
1: Object
id: "15693"
name: "pari"
score: "75"
__proto__: Object
2: Object
id: "28079"
name: "Pato"
score: "50"
__proto__: Object
3: Object
id: "18001"
name: "PASS"
score: "50"
__proto__: Object
4: Object
id: "15095"
name: "PSR"
score: "33"
__proto__: Object
5: Object
id: "22662"
name: "PRP"
score: "33"
__proto__: Object
length: 6
__proto__: Array[0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:58:26.200

### 更新 2

啊，您的服务返回的项目实际上与查询不匹配`parm`。您的 typeahead 查询是`'parm'`，返回的结果都不匹配。您可以覆盖`matcher`typeahead 插件使用的功能，请参阅[文档](http://twitter.github.com/bootstrap/javascript.html#typeahead)。只需实现它`return true`以匹配您的服务返回的所有结果。

### 更新 1

这是一个更新版本，将名称映射到一个 id，以后可以使用。一个[jsfiddle 可用](http://jsfiddle.net/serra/w93aR/16/)。

```
var nameIdMap = {};

$('#lookup').typeahead({
    source: function (query, process) {
        return $.ajax({
            dataType: "json",
            url: lookupUrl,
            data: getAjaxRequestData(),
            type: 'POST',
            success: function (json) {
                process(getOptionsFromJson(json));
            }
        });
    },
    minLength: 1,
    updater: function (item) {
        console.log('selected id'+nameIdMap[item]);
        return item;
    }
});

function getOptionsFromJson(json) {
    $.each(json, function (i, v) {
        nameIdMap[v.name] = v.id;
    });

    return $.map(json, function (n, i) {
        return n.name;
    });
} 
```

### 原始答案

您需要使调用异步并`process`从成功回调中调用回调，如下所示：

```
$('#companyNameInput').typeahead({
    source: function (query, process) {
        $.ajax({
            url: ROOT + 'Record/checkCompanyName',
            // async: false, // better go async
            data: 'q=' + query,
            type: 'POST',
            cache: false,
            success: function (data) {
                var companiesFinal = ... // snip
                process(companiesFinal);
            }
        })
    }
}); 
```

有效，`return ['test1', 'test2'];`因为源函数基本上设置为：

```
// do ajax stuff, but do nothing with the result
// return the typeahead array, which the typeahead will accept as the result:
return ['test1', 'test2']; 
```

*笔记*

有一条线要填充`companiesData`：

```
var companiesFinal = return $.map(data, function (n, i) { n.name; }); 
```

你可能想用`var`;声明你的变量。否则它们将具有全球范围，这会咬你。

# netbeans-7 - 无法在 NetBeans 中使用 composer 安装包

> ID：15402769
> 
> 赞同：2
> 
> 时间：2013-03-14T06:39:12.053
> 
> 标签：netbeans-7, symfony-2.1, composer-php

我在 XAMPP 上使用 symfony2.1，使用 NetBeans 7.3 作为 IDE。我想`friendofsymfony/rest-bundle`通过在需要部分添加这些行来安装包

`"friendsofsymfony/rest-bundle": "0.11.0",`

然后我右键单击项目，然后 Composer > Update

我在输出窗口上得到的是

```
D:\xampp\php\php.exe C:\ProgramData\Composer\bin\composer --ansi --no-interaction update

# This file must be saved with Unix line endings, or cygwin will choke

DIR=`dirname "$0"`;
DIRECTORY=$(cd "${DIR}" && pwd)

if command -v 'cygpath' >/dev/null 2>&1; then
  DIRECTORY=`cygpath -m $DIRECTORY`;
fi

PHAR="$(echo $DIRECTORY | sed 's/ /\ /g')/composer.phar"
php "${PHAR}" $*
Done. 
```

并且该软件包未安装。

我做对了吗？如何在 NetBeans 上使用 Composer 正确安装包？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T21:39:18.370

你使用 Windows 吗？工具 -> PHP -> Composer -> Composer：选择 composer.phar 文件！

然后再试一次。

# linux - 如何grep和替换

> ID：15402770
> 
> 赞同：313
> 
> 时间：2013-03-14T06:39:15.203
> 
> 标签：linux, grep, replace

我需要在目录内的所有文件和子目录中递归搜索指定的字符串，并将该字符串替换为另一个字符串。

我知道找到它的命令可能如下所示：

```
grep 'string_to_find' -r ./* 
```

但是我怎样才能`string_to_find`用另一个字符串替换每个实例呢？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2013-03-14T06:53:32.400

另一种选择是使用 find 然后通过 sed 传递它。

```
find /path/to/files -type f -exec sed -i 's/oldstring/new string/g' {} \; 
```

* * *

## 回答 #2

> 赞同：232
> 
> 时间：2013-03-14T06:42:44.307

我得到了答案。

```
grep -rl matchstring somedir/ | xargs sed -i 's/string1/string2/g' 
```

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2016-02-01T15:37:11.990

You could even do it like this:

**Example**

```
grep -rl 'windows' ./ | xargs sed -i 's/windows/linux/g' 
```

This will search for the string '**windows**' in all files relative to the current directory and replace '**windows**' with '**linux**' for each occurrence of the string in each file.

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2014-01-25T07:52:37.977

这在 OS X 上最适合我：

```
grep -r -l 'searchtext' . | sort | uniq | xargs perl -e "s/matchtext/replacetext/" -pi 
```

资料来源： http: [//www.praj.com.au/post/23691181208/grep-replace-text-string-in-files](http://www.praj.com.au/post/23691181208/grep-replace-text-string-in-files)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-14T06:42:32.117

通常不使用 grep，而是使用`sed -i 's/string_to_find/another_string/g'`or `perl -i.bak -pe 's/string_to_find/another_string/g'`。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-03T06:22:14.740

其他解决方案混合了正则表达式语法。要使用 perl/PCRE 模式进行**搜索**和替换，并且只处理匹配的文件，这非常有效：

```
grep -rlIZPi 'match1' | xargs -0r perl -pi -e 's/match2/replace/gi;' 
```

`match1`并且`match2`通常相同，但`match2`可以包含仅与替换相关的更高级功能，例如捕获组。

翻译：`grep`递归并列出匹配的文件名，每个都用空分隔以保护任何特殊字符；管道任何`xargs`需要空分隔列表的文件名；如果收到任何文件名，请将它们传递`perl`给执行实际替换。

对于*区分大小写的*匹配，从表达式中删除`i`标志`grep`和`i`模式修饰符`s///`，但**不要**`i`从其`perl`自身中删除标志。要包含二进制文件，请`I`从`grep`.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-07-11T08:34:13.183

在 git repo 中使用`find`和使用时要非常小心！`sed`如果您不排除二进制文件，则可能会出现此错误：

```
error: bad index file sha1 signature 
fatal: index file corrupt 
```

要解决此错误，您需要`sed`通过将您的替换`new_string`为您的`old_string`. 这将还原您替换的字符串，因此您将回到问题的开头。

搜索字符串并替换它的正确方法是跳过`find`并`grep`改为使用以忽略二进制文件：

```
sed -ri -e "s/old_string/new_string/g" $(grep -Elr --binary-files=without-match "old_string" "/files_dir") 
```

@hobs 的学分

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-29T06:27:36.547

这是我要做的：

```
find /path/to/dir -type f -iname "*filename*" -print0 | xargs -0 sed -i '/searchstring/s/old/new/g' 
```

这将查找包含`filename`在文件名中的所有文件`/path/to/dir`，而不是对于找到的每个文件，搜索带有的行`searchstring`并替换`old`为`new`。

尽管如果您想省略在文件名中查找带有`filename`字符串的特定文件，而不是简单地执行以下操作：

```
find /path/to/dir -type f -print0 | xargs -0 sed -i '/searchstring/s/old/new/g' 
```

这将执行与上述相同的操作，但对`/path/to/dir`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-09-12T17:16:29.947

另一种选择是将 perl 与 globstar 一起使用。

`shopt -s globstar`在您的`.bashrc`（或任何地方）启用允许`**`glob 模式以递归方式匹配所有子目录和文件。

因此 using`perl -pXe 's/SEARCH/REPLACE/g' -i **`将递归替换`SEARCH`为`REPLACE`。

该`-X`标志告诉 perl “禁用所有警告”——这意味着它不会抱怨目录。

globstar 还允许您执行一些操作，例如`sed -i 's/SEARCH/REPLACE/g' **/*.ext`，如果您想在所有具有扩展名的子文件中`SEARCH`替换为.`REPLACE``.ext`

# javascript - 如何在使用 Angular js 单击时将 html 模板附加到 div/指令？

> ID：15402772
> 
> 赞同：3
> 
> 时间：2013-03-14T06:39:20.467
> 
> 标签：javascript, html, templates, button, angularjs

我有这种情况：

```
<somebutton></somebutton> 
```

...

```
app.directive("somebutton", function(){
    return {
        restrict: "E",

        scope: {
          // not sure what i can do here
        },

        template: '<button ng-click="loadTemplate()" type="button">Text</button>',

        link: function(scope, element){
            scope.loadTemplate = function(){

                //TODO: append "home.html" template inside body directive
            }
        }
    }
}); 
```

...

```
<script type="text/ng-template" id="home.html">
    <div>home</div>
</script> 
```

...

```
<div body ></div> 
```

这样做的其他方法可能是在 html 中使用按钮而不是模板

```
<button ng-click="loadTemplate()" type="button">Text</button> 
```

然后可能有一个控制器，它具有`loadTemplate()`加载模板的方法

但我不确定如何做到这一点。

令人困惑？是的 ：）

关于这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T07:14:07.537

看看`ngInclude`它是否符合您的需求。您可以将其绑定到模板 url 以动态更改加载的模板。

查看[文档](http://docs.angularjs.org/api/ng.directive%3angInclude)以获取示例以及这个[简单的 plnkr](http://plnkr.co/edit/wc6ak9nC5WjpDWf6NrzE?p=preview)。

```
<body>
  <button ng-click="template='home.html'">Home</button>
  <button ng-click="template='home2.html'">Home 2</button>
  <div ng-include src="template"></div>
</body>
<script type="text/ng-template" id="home.html">
    <div>loaded home</div>
</script>
  <script type="text/ng-template" id="home2.html">
    <div>loaded home 2</div>
</script> 
```

**另请注意**，大多数 AngularJS 应用程序可能使用内置路由来根据 url 加载适当的控制器和视图。有关更多信息，请参阅[$route上](http://docs.angularjs.org/api/ng.%24route)[的教程](http://docs.angularjs.org/tutorial/step_07)和文档/示例。

# android - Android：第三级后的可扩展列表视图问题

> ID：15402773
> 
> 赞同：1
> 
> 时间：2013-03-14T06:39:20.620
> 
> 标签：android, android-layout, android-listview, android-ui

可扩展列表视图：

我正在尝试通过在 android 中使用 Expandable 列表视图来实现如下所示的场景，但是在两级正常扩展之后，第三级扩展无法在视图中正确容纳。我怀疑使用可扩展列表视图是否可以实现两级以上的层次结构。请向我提出相同的建议，并让我知道相同实施的任何其他替代方案。
![可扩展列表视图。](../Images/a5b995c4aed597ec9f0955b8321cdede.png)

![在此处输入图像描述](../Images/a5b995c4aed597ec9f0955b8321cdede.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:13:02.833

请参阅本教程，它将帮助您如何在 android 中实现 4 级可扩展列表视图。[http://www.sfonge.com/forum/topic/4-level-expandable-list](http://www.sfonge.com/forum/topic/4-level-expandable-list)。让我知道它是否对您有帮助。

# silverlight - 使用 ExecuteQueryAsync 时接收响应延迟或无响应

> ID：15402778
> 
> 赞同：0
> 
> 时间：2013-03-14T06:39:40.927
> 
> 标签：silverlight, sharepoint, sharepoint-clientobject

我正在使用`ExecuteQueryAsync`多个列表将数据填充到`List<ListItemCollection>`. 收到所有响应后，我将数据绑定到我的 Silverlight 应用程序。

ExecuteQueryAsync 理想情况下可以成功或失败。我基本上会跟踪收到的成功和失败响应总数，并且一旦收到的计数与总请求匹配。在收到所有响应并将数据绑定到应用程序之前，我会显示一个等待图标。现在的问题是，例如，我发出 12 个请求，但我只收到 10 或 11 个响应。我似乎不明白为什么我没有收到最后几个请求的响应。我既不走向成功也不走向失败。

有人面临这个问题吗？您能否帮助我了解导致此问题的原因以及为什么既没有收到成功也没有收到响应的原因。如果我执行相同的操作，它会起作用。这个问题时不时地发生，我不知道如何解决这个问题。

```
var requestCount = 0;
var responseCount = 0;
List<ListItemCollection>() bindingData;
public function getData(){
   showWaitIcon();
   //Some Code here to form the CAML query
   bindingData = new List<ListItemCollection>();
   for(int i=0; i<10; i++){
      //Some Code here to create the Client Context to query each Document Library or List
      clientContext.RequestTimeout = -1;
      clientContext.Load(clientContext.Web);
      ListItemCollection _lstItems;
      clientContext.Load(_lstItems);
      clientContext.ExecuteQueryAsync(onQuerySucceeded, onQueryFailed);
      requestCount++;
   }
}

private void onQuerySucceeded(object sender, ClientRequestSucceededEventArgs args)
{
     responseCount++;
     this.Dispatcher.BeginInvoke(BindData);
}

private void onQueryFailed(object sender, ClientRequestFailedEventArgs args)
{
     responseCount++;
     this.Dispatcher.BeginInvoke(BindData);
}

private function BindData(){
    if(requestCount == responseCount() {
        hideWaitIcon();
        bindToSilverlightView(bindingData);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:59:44.973

在不查看您的代码的情况下，我能想到的最可能的原因是您有一个同步问题，也就是说，您的两个或多个请求几乎同时收到结果并试图修改您所在的变量跟踪已答复请求的数量。您可能需要使用“锁”或类似结构来确保两个线程不会同时访问该代码块。

# codeigniter - codeigniter select 语句不返回任何内容

> ID：15402781
> 
> 赞同：0
> 
> 时间：2013-03-14T06:39:46.530
> 
> 标签：codeigniter, codeigniter-2

我正在尝试从数据库中获取一些匹配用户名和密码的记录。我使用了以下代码：

```
$data = array(
    'username' => $username ,
    'password' => $password
);    
//show_error('Password: ' . $password . "    Username: " . $username);
/*Query database for details matching username & password*/
$this->db->select('*');
$this->db->from('users');
$this->db->where('username', $username);
$this->db->where('password', $password);
$result = $this->db->get();
$queryResult;
//show_error('ResultSet Rows: ' . $result->num_rows());
if($result->num_rows() > 0)
{
    $queryResult = $result->result_array();
}else{
    $queryResult = "Error retrieving data from table";
}

return $queryResult; 
```

当 num_rows() 函数输出时，它显示 0。这只能表示没有选择任何内容。查询有问题吗？

问候，

PS 我正在使用 show_error() 函数来跟踪变量值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:43:01.190

对于测试使用这个

```
$data = array(
    'username' => $username ,
    'password' => $password
);    

$this->db->select('*');
$this->db->from('users');
$this->db->where('username', $username);
$this->db->where('password', $password);
$result = $this->db->get()->row();

echo '<pre>';
print_R($result); 
```

为了更多的使用`$this->db->last_query()` ，它将输出最后一个查询运行，您可以在 phpmyadmin 中复制和测试

# c# - 日期时间格式错误 C# , Oracle

> ID：15402783
> 
> 赞同：2
> 
> 时间：2013-03-14T06:39:54.913
> 
> 标签：c#, oracle, datetime, stored-procedures

在我的应用程序中，我捕获了一个“时间戳”。我稍后在调用存储过程时使用此时间戳。目前我收到错误：

> ORA-01830：日期格式图片在转换整个输入字符串之前结束 ORA-06512：在第 2 行

我需要小时、分钟和秒，因为表中的列必须是唯一的。

这是我获取日期时间的方法：

```
private void getDate()
    {
        conn.Open();
        string query;
        query = "select to_char(sysdate, 'dd/mon/yyyy hh24:mi:ss') as CurrentTime from dual";
        OracleCommand cmd = new OracleCommand(query, conn);
        OracleDataReader dr = cmd.ExecuteReader();
        dr.Read();
        text = dr[0].ToString();
        dr.Close();
        conn.Close();
    } 
```

这就是我调用该过程的方式：

```
 OracleCommand cmd = new OracleCommand();
        cmd.Connection = conn;
        conn.Open();
        OracleTransaction trans = conn.BeginTransaction();
        cmd.CommandTimeout = 0;
        cmd.CommandText = "dc.hhrcv_insert_intrnl_audit_scn";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("pn_pallet_id", OracleDbType.Number).Value = palletid;
        cmd.Parameters.Add("pn_emp_id_no", OracleDbType.Number).Value = empid;
        cmd.Parameters.Add("pd_intrnl_audit_scan_datetime", OracleDbType.VarChar).Value = text;
        cmd.Parameters.Add("pn_company_id_no", OracleDbType.VarChar).Value = companyIdNo2;
        cmd.Parameters.Add("pn_order_no", OracleDbType.Number).Value = orderNo2;
        cmd.Parameters.Add("pn_carton_code", OracleDbType.Number).Value = carton_Code2;
        cmd.Parameters.Add("pn_no_of_full_carton", OracleDbType.Number).Value = txtNoOfCartons.Text;
        cmd.Parameters.Add("pn_no_of_packs", OracleDbType.Number).Value = txtNoOfPacks.Text;
        cmd.Parameters.Add(new OracleParameter("pv_error", OracleDbType.VarChar));
        cmd.Parameters["pv_error"].Direction = ParameterDirection.Output;
        string pv_error;
        cmd.ExecuteNonQuery();
        pv_error = cmd.Parameters["pv_error"].Value.ToString();
        if (pv_error.ToString() == "")
        {
            trans.Commit();
            frmMsgAudit ms = new frmMsgAudit(empid,palletid,orderno,text);
            ms.Show();
            this.Hide();
        }
        else
        {
            trans.Rollback();
            MessageBox.Show("" + pv_error, "Error");
        }
        conn.Close(); 
```

得到错误：

> cmd.ExecuteNonQuery();
> 
> ORA-01830：日期格式图片在转换整个输入字符串之前结束 ORA-06512：在第 2 行

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:55:36.163

感谢所有快速回复！

grrr ..我真的需要坐下来一步一步地走完所有的路！无论如何，这是问题所在：

在存储过程中我有：

```
...
begin
insert into dc_internal_audit_scan (pallet_id_no,
                                    internal_audit_scan_emp,
                                    internal_audit_scan_datetime,
                                    company_id_no,
                                    order_no,
                                    carton_code,
                                    no_of_full_cartons,
                                    no_of_packs,
                                    last_update_datetime,
                                    username)      
                            values (ln_pallet_id_no,
                                    pn_emp_id_no,
                                    **pd_intrnl_audit_scan_datetime,**
                                    pn_company_id_no,
                                    pn_order_no,
                                    pv_carton_code,
                                    pn_no_of_full_cartons,
                                    pn_no_of_packs,
                                    sysdate,
                                    lv_emp_username);
end; 
```

现在：

```
...
begin
insert into dc_internal_audit_scan (pallet_id_no,
                                    internal_audit_scan_emp,
                                    internal_audit_scan_datetime,
                                    company_id_no,
                                    order_no,
                                    carton_code,
                                    no_of_full_cartons,
                                    no_of_packs,
                                    last_update_datetime,
                                    username)      
                            values (ln_pallet_id_no,
                                    pn_emp_id_no,
                                    **TO_DATE(pd_intrnl_audit_scan_datetime,'dd/mon/yyyy hh24:mi:ss'),**
                                    pn_company_id_no,
                                    pn_order_no,
                                    pv_carton_code,
                                    pn_no_of_full_cartons,
                                    pn_no_of_packs,
                                    sysdate,
                                    lv_emp_username);
end; 
```

> TO_DATE(pd_intrnl_audit_scan_datetime,'dd/mon/yyyy hh24:mi:ss')

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:48:40.210

~~看起来这条线是错误的；~~

 ~~```
 query = "select to_char(sysdate, 'dd/mon/yyyy hh24:mi:ss') 
```~~ 

~~在这里做什么`24`？~~

试试看；

```
query = "select to_char(sysdate, 'dd/mon/yyyy hh:mi:ss AM') 
```

从[`ORA-01830 Error`](http://www.techonthenet.com/oracle/errors/ora01830.php)

> 您尝试输入日期值，但输入的日期与日期格式不匹配。

**编辑**：由于 ABCade[*警告我*](https://stackoverflow.com/questions/15402783/datetime-format-wrong-c-sharp-oracle/15402902#comment21776174_15402902),`hh24`是有效的 oracle 格式，但我仍然相信您`sysdate`的格式并且`'dd/mon/yyyy hh24:mi:ss'`是不同的格式。

# ruby-on-rails - 无法从其他机器访问 MailCatcher

> ID：15402784
> 
> 赞同：6
> 
> 时间：2013-03-14T06:39:55.333
> 
> 标签：ruby-on-rails

我在本地机器上的 rails 项目上使用 MailCatcher，它像往常一样使用 localhost:1080 端口。现在我想在 IE6 上测试邮件布局，所以我尝试从其他 Windows 机器（使用 machineip:1080）访问它，但我无法访问 MailCatcher ...

我尝试访问端口 3000 上的站点窗体 Windows 机器是可访问的。MailCatcher 有什么限制吗？或者以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-05T23:52:39.830

退出 Mailcatcher 并尝试使用以下选项运行它：

```
mailcatcher --http-ip=0.0.0.0 
```

[https://github.com/sj26/mailcatcher/issues/51](https://github.com/sj26/mailcatcher/issues/51)

# java - java中的构造函数让我难过

> ID：15402790
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:40:07.737
> 
> 标签：java, constructor

问题是：

1.  写一个类的定义`Clock`。
2.  该类具有三个实例变量：一个 int 类型称为 hours，另一个 boolean 类型称为 isTicking，最后一个 Integer 类型称为 diff。
3.  您还应该编写一个带有三个参数的构造函数——一个 int、一个 boolean 和另一个 int。
4.  构造函数应将实例变量设置为提供的值。

这是我到目前为止所拥有的

```
public class Clock {
    private int hours; 

    private boolean isTicking;

    private Integer diff;

    public  Clock ( int hours, boolean isTicking, Integer diff;) {
        this.hours = hours; this.isTicking = isTicking; this.diff = diff;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:44:56.930

这看起来不错，除了虚假的分号：

```
public  Clock ( int hours, boolean isTicking, Integer diff;
                                                          ^ THIS 
```

删除它，你会很高兴的。

> 修复它伙计们 - 显然，我应该使用“int”而不是“Integer”。但为什么？

据我所知，通过使用，`Integer`您已按照信中的说明进行操作。问你的导师。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:45:20.757

```
public  Clock ( int hours, boolean isTicking, Integer diff;) 
```

应该

```
public  Clock ( int hours, boolean isTicking, Integer diff) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:48:16.633

必须删除整数差异后的冒号，然后它将运行良好。它应该是

```
public  Clock ( int hours, boolean isTicking, int diff) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:03:52.970

```
public  Clock ( int hours, boolean isTicking, Integer diff;) 
```

后面不需要分号`Integer diff`

# c# - 如何使用等待或线程等待事件发生

> ID：15402793
> 
> 赞同：3
> 
> 时间：2013-03-14T06:40:19.380
> 
> 标签：c#, .net, multithreading, winforms, listbox

在winforms中说我有一个列表框。

而且我还有一个线程等待列表框中有一些项目。

假设当前列表框为空，因此线程必须等待。

现在说在列表框中有一些项目线程必须开始执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:47:37.013

Did you think of Timers which can periodic checks the listbox items if there is some item than start your thread and stop checking .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:05:57.830

您可以使用线程，但我认为使用基于事件的处理方法会更好。默认情况下，ListBox 类没有添加项目的事件，但您可以扩展该类以创建自己的。以下是您将如何执行此操作的示例：

```
public class MyListBox : ListBox
{
    private const int LB_ADDSTRING = 0x180;
    private const int LB_INSERTSTRING = 0x181;

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == LB_ADDSTRING || m.Msg == LB_INSERTSTRING)
        {
            OnItemAdded(this, new EventArgs());
        }
        base.WndProc(ref m);
    }

    public event EventHandler ItemAdded;
    protected void OnItemAdded(object sender, EventArgs e)
    {
        if (ItemAdded != null)
            ItemAdded(sender, e);
    }
} 
```

一旦你完成了这个类，只需在你的表单上使用它。

```
public partial class Form1 : Form
{
    MyListBox lb = new MyListBox();

    public Form1()
    {
        InitializeComponent();

        this.Controls.Add(lb);
        lb.ItemAdded += lb_ItemAdded;
    }

    void lb_ItemAdded(object sender, EventArgs e)
    {
        // process item here...
    }       
} 
```

# django - 模型查询集上使用的 python 切片语法是否在数据库级别执行？

> ID：15402794
> 
> 赞同：0
> 
> 时间：2013-03-14T06:40:29.397
> 
> 标签：django, django-models

模型：

```
class person(models.Model)
    name = models.CharField()
    ... 
```

如果我使用

```
persons = person.objects.order_by('name')[0:25] 
```

在代码中，切片是在数据库级别（转换为 SELECT * FROM person ORDER BY name LIMIT 25）还是在“代码”级别执行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:47:13.853

是的，切片被翻译成 SQL 的`LIMIT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:30:31.687

我认为这取决于何时执行。

Django 的 ORM QuerySet 是“惰性的”，因为它们在被迭代之前不会真正运行。这使您可以执行以下操作：

```
persons = person.objects.filter(age__gte=25)
persons = persons.filter(age__lte=50)
persons = persons.exclude(age=30)
persons = persons.order_by('name')
persons = persons[:25]
for person in persons:
    print person.name 
```

意思是“让所有 25 岁以上、50 岁以下的人（不包括 30 岁的人）按他们的名字排序，并给我前 25 条记录。

因为它是惰性的，所以当您实际进入循环`QuerySet`时，所有这些代码只会创建一个数据库调用。`for`

所以，是的，从技术上讲，当 ORM 进入循环时，order_by 转换为 LIMIT。

然而，ORM 在幕后所做的是为数据库返回的每条记录创建一个 Python 列表。所以，假设我们在上述之后继续：

```
for person in persons: # SQL command is compiled and run, with a list returned
    print person.name
persons = persons[:10] # Django just slices the list we already have in memory. 
```

这可能看起来微不足道，或者是一个边缘案例，但了解幕后发生的事情很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:14:15.323

[这在文档中](https://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets)非常清楚（答案是肯定的）：

> 使用 Python 数组切片语法的子集将 QuerySet 限制为一定数量的结果。这相当于 SQL 的 LIMIT 和 OFFSET 子句。

# oracle - 仅获取组内的最新记录

> ID：15402796
> 
> 赞同：0
> 
> 时间：2013-03-14T06:40:34.780
> 
> 标签：oracle

你好再次非常慷慨的人。我想弄清楚如何获得组内的最新记录？图片附在下面：

![在此处输入图像描述](../Images/c1f8e286adcd481383ad9cd0504358da.png)

根据上面的结果集，晶圆编号 7 和 11 有两次插入。我的问题是，在这样的情况下，某个晶圆编号有多个插入，我应该只显示最近的两次插入. 如何在查询中执行此操作？这是我到目前为止的查询：

```
SELECT wipdata.wafernumber
      ,wipdata.specname
      ,wipdata.insertionnumber
      ,wipdata.insertionreasonname
      ,wipdata."Total Good DPW"
      ,wipdata."Accept Bins B1"
      ,wipdata."Accept Bins B2"
      ,wipdata."Accept Bins B3"
      ,wipdata."Accept Bins B4"
      ,wipdata."Reject Continuity"
      ,wipdata."Total Rejects"
      ,wipdata."Probe Mark Insp"
      ,wipdata."Ink Dot Insp"
      ,wipdata."Visual Insp"
      ,wipdata."Comments"
      ,wipdata."Operator"
      ,wipdata."Inspector"
      ,wipdata."Engineer"
      ,wipdata."Supervisor"
      --,mh.wipdatavalue "MH"
      ,wipdata."TPE Disposition"
      ,wipdata."Supervisor Disposition"
      ,wipdata."Check Code"
      ,wipdata."Laser power Setup"
      ,wipdata."Laser Trim Energy"
      ,wipdata."Duan Ink"
      ,wipdata."Inked Edges"
      ,wipdata."100% Visual Qty"
      ,wipdata."New Total GDPW"
      ,wipdata."Yield"
      ,wipdata.txndate 
      ,DECODE(SUBSTR(wipdata.specname,0,4),'5267','12345', wipdata.equipmentid) equipmentid
FROM
(
SELECT c.containername
      ,wl.specid
      ,wl.specname
      ,wl.wiptrackinggroupkeyid
      ,wl.wiplothistoryid
      ,wld.wiplotdetailshistoryid
      ,wldd.wiplotdetailsdatahistoryid
      ,wldw.wafernumber
      ,wldd.wipdatanamename
      ,TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0))   AS "Total Good DPW"
      ,ab1.wipdatavalue "Accept Bins B1"
      ,ab2.wipdatavalue "Accept Bins B2"
      ,ab3.wipdatavalue "Accept Bins B3"
      ,ab4.wipdatavalue "Accept Bins B4"
      ,rc.wipdatavalue "Reject Continuity"
      ,wldw.processwaferrejectsqty "Total Rejects"
      ,pmi.wipdatavalue "Probe Mark Insp"
      ,idi.wipdatavalue "Ink Dot Insp"
      ,vip.wipdatavalue "Visual Insp"
      ,comments.wipdatavalue "Comments"
      ,oper.wipdatavalue "Operator"
      ,insp.wipdatavalue "Inspector"
      ,engr.wipdatavalue "Engineer"
      ,supv.wipdatavalue "Supervisor"
      --,mh.wipdatavalue "MH"
      ,tpeDispo.wipdatavalue "TPE Disposition"
      ,supvDispo.wipdatavalue "Supervisor Disposition"
      ,cc.Wipdatavalue "Check Code"
      ,lps.Wipdatavalue "Laser power Setup"
      ,lte.Wipdatavalue "Laser Trim Energy"
      ,di.Wipdatavalue "Duan Ink"
      ,ie.Wipdatavalue "Inked Edges"
      ,vq.Wipdatavalue "100% Visual Qty"
      ,ntg.Wipdatavalue "New Total GDPW"
      , CASE WHEN (TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0))) = 0 THEN NULL 
            ELSE ROUND((TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0)) )
       /(TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0)) +
      wldw.processwaferrejectsqty - TO_NUMBER(NVL(rc.wipdatavalue,0))) * 100, 2) END AS "Yield"
      ,wldd.txntimestamp txndate 
      ,wldw.wafersequence
      ,wldw.equipmentid
      ,wl.insertionnumber
      ,wl.insertionreasonname
FROM a_wiplothistory wl
JOIN Container C ON wl.containerid = c.containerid 
JOIN a_wiplotdetailshistory wld ON wl.wiplothistoryid = wld.wiplothistoryid
JOIN a_wiplotdetailsdatahistory wldd ON wld.wiplotdetailshistoryid = wldd.wiplotdetailshistoryid 
LEFT JOIN a_wiplotdetailswafershistory wldw ON wldw.wiplotdetailshistoryid = wld.wiplotdetailshistoryid AND wldd.waferscribenumber = wldw.waferscribenumber
LEFT JOIN a_wiplotdetailsdatahistory ab1 ON wld.wiplotdetailshistoryid = ab1.wiplotdetailshistoryid AND ab1.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab1.wipdatanamename)) = 'WS_ACCEPT BIN1'
LEFT JOIN a_wiplotdetailsdatahistory ab2 ON wld.wiplotdetailshistoryid = ab2.wiplotdetailshistoryid AND ab2.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab2.wipdatanamename)) = 'WS_ACCEPT BIN2'
LEFT JOIN a_wiplotdetailsdatahistory ab3 ON wld.wiplotdetailshistoryid = ab3.wiplotdetailshistoryid AND ab3.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab3.wipdatanamename)) LIKE 'WS_%ACCEPT BIN3'
LEFT JOIN a_wiplotdetailsdatahistory ab4 ON wld.wiplotdetailshistoryid = ab4.wiplotdetailshistoryid AND ab4.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab4.wipdatanamename)) LIKE 'WS_%ACCEPT BIN4'
LEFT JOIN a_wiplotdetailsdatahistory tr ON wld.wiplotdetailshistoryid = tr.wiplotdetailshistoryid AND tr.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(tr.wipdatanamename)) = 'WS_TOTAL REJECTS'
LEFT JOIN a_wiplotdetailsdatahistory rc ON wld.wiplotdetailshistoryid = rc.wiplotdetailshistoryid AND rc.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(rc.wipdatanamename)) = 'WS_REJECT CONTINUITY'
LEFT JOIN a_wiplotdetailsdatahistory pmi ON wld.wiplotdetailshistoryid = pmi.wiplotdetailshistoryid AND pmi.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(pmi.wipdatanamename))  LIKE 'WS_PM/LASER%'
LEFT JOIN a_wiplotdetailsdatahistory idi ON wld.wiplotdetailshistoryid = idi.wiplotdetailshistoryid AND idi.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(idi.wipdatanamename)) LIKE 'WS_INK%DOT%'
LEFT JOIN a_wiplotdetailsdatahistory vip ON wld.wiplotdetailshistoryid = vip.wiplotdetailshistoryid AND vip.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(vip.wipdatanamename)) LIKE 'WS_VISUAL%'
LEFT JOIN a_wiplotdetailsdatahistory comments ON wld.wiplotdetailshistoryid = comments.wiplotdetailshistoryid AND comments.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(comments.wipdatanamename)) = 'WS_COMMENTS'
LEFT JOIN a_wiplotdetailsdatahistory oper ON wld.wiplotdetailshistoryid = oper.wiplotdetailshistoryid AND oper.waferscribenumber = wldd.waferscribenumber AND (TRIM(UPPER(oper.wipdatanamename)) = 'WS_OPERATOR' OR TRIM(UPPER(oper.wipdatanamename)) = 'WS_OPERATOR_GRID')
LEFT JOIN a_wiplotdetailsdatahistory insp ON wld.wiplotdetailshistoryid = insp.wiplotdetailshistoryid AND insp.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(insp.wipdatanamename)) = 'WS_INSPECTOR'
LEFT JOIN a_wiplotdetailsdatahistory engr ON wld.wiplotdetailshistoryid = engr.wiplotdetailshistoryid AND engr.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(engr.wipdatanamename)) LIKE 'WS_%ENGINEER'
LEFT JOIN a_wiplotdetailsdatahistory supv ON wld.wiplotdetailshistoryid = supv.wiplotdetailshistoryid AND supv.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(supv.wipdatanamename)) = 'WS_SUPERVISOR'
LEFT JOIN a_wiplotdetailsdatahistory tpeDispo ON wld.wiplotdetailshistoryid = tpeDispo.wiplotdetailshistoryid AND tpeDispo.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(tpeDispo.wipdatanamename)) = 'WS_TPE DISPOSITION'
LEFT JOIN a_wiplotdetailsdatahistory supvDispo ON wld.wiplotdetailshistoryid = supvDispo.wiplotdetailshistoryid AND supvDispo.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(supvDispo.wipdatanamename)) = 'WS_SUPV DISPOSITION'
--LEFT JOIN a_wiplotdetailsdatahistory mh ON wld.wiplotdetailshistoryid = mh.wiplotdetailshistoryid AND mh.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(mh.wipdatanamename)) = 'WS_MH'
LEFT JOIN a_wiplotdetailsdatahistory cc ON wld.wiplotdetailshistoryid = cc.wiplotdetailshistoryid AND cc.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(cc.wipdatanamename)) = 'WS_CHECK CODE'
LEFT JOIN a_wiplotdetailsdatahistory lps ON wld.wiplotdetailshistoryid = lps.wiplotdetailshistoryid AND lps.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(lps.wipdatanamename)) = 'WS_LASER POWER SETUP(P/F)'
LEFT JOIN a_wiplotdetailsdatahistory lte ON wld.wiplotdetailshistoryid = lte.wiplotdetailshistoryid AND lte.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(lte.wipdatanamename)) LIKE 'WS_LASER TRIM ENERGY%'
LEFT JOIN a_wiplotdetailsdatahistory di ON wld.wiplotdetailshistoryid = di.wiplotdetailshistoryid AND di.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(di.wipdatanamename)) = 'WS_DUAL INK (Y/N)'
LEFT JOIN a_wiplotdetailsdatahistory ie ON wld.wiplotdetailshistoryid = ie.wiplotdetailshistoryid AND ie.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ie.wipdatanamename)) = 'WS_INKED EDGES (Y/N)'
LEFT JOIN a_wiplotdetailsdatahistory vq ON wld.wiplotdetailshistoryid = vq.wiplotdetailshistoryid AND vq.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(vq.wipdatanamename)) LIKE 'WS_100%VISUAL%QTY'
LEFT JOIN a_wiplotdetailsdatahistory ntg ON wld.wiplotdetailshistoryid = ntg.wiplotdetailshistoryid AND ntg.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ntg.wipdatanamename)) = 'WS_NEW TOTAL GDPW'

WHERE c.containername =:lotID  AND  (TRIM(UPPER(wldd.wipdatanamename)) = 'WS_ACCEPT BIN1'  OR ( (TRIM(UPPER(wldd.wipdatanamename)) LIKE 'WS_LASER TRIM ENERGY%' AND wl.specname LIKE '5207_%' ) 
                                                                                                OR (TRIM(UPPER(wldd.wipdatanamename)) LIKE 'WS_100%VISUAL%QTY' AND SUBSTR(wl.specname,0,4) = '5267' )  ) )

UNION ALL

SELECT c.containername
      ,wl.specid
      ,wl.specname
      ,wl.wiptrackinggroupkeyid
      ,wl.wiplotid
      ,wld.wiplotdetailsid
      ,wldd.wiplotdetailsdataid
      ,wldw.wafernumber
      ,wldd.wipdatanamename
      ,TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0))  AS "Total Good DPW"
      ,ab1.wipdatavalue "Accept Bins B1"
      ,ab2.wipdatavalue "Accept Bins B2"
      ,ab3.wipdatavalue "Accept Bins B3"
      ,ab4.wipdatavalue "Accept Bins B4"
      ,rc.wipdatavalue "Reject Continuity"
      ,wldw.processwaferrejectsqty "Total Rejects"
      ,pmi.wipdatavalue "Probe Mark Insp"
      ,idi.wipdatavalue "Ink Dot Insp"
      ,vip.wipdatavalue "Visual Insp"
      ,comments.wipdatavalue "Comments"
      ,oper.wipdatavalue "Operator"
      ,insp.wipdatavalue "Inspector"
      ,engr.wipdatavalue "Engineer"
      ,supv.wipdatavalue "Supervisor"
      --,mh.wipdatavalue "MH"
      ,tpeDispo.wipdatavalue "TPE Disposition"
      ,supvDispo.wipdatavalue "Supervisor Disposition"
      ,cc.Wipdatavalue "Check Code"
      ,lps.Wipdatavalue "Laser power Setup"
      ,lte.Wipdatavalue "Laser Trim Energy"
      ,di.Wipdatavalue "Duan Ink"
      ,ie.Wipdatavalue "Inked Edges"
      ,vq.Wipdatavalue "100% Visual Qty"
      ,ntg.Wipdatavalue "New Total GDPW"
      , CASE WHEN (TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0))) = 0 THEN NULL 
            ELSE ROUND((TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0)) )
       /(TO_NUMBER(NVL(ab1.wipdatavalue,0)) + TO_NUMBER(NVL(ab2.wipdatavalue,0)) + TO_NUMBER(NVL(ab3.wipdatavalue,0)) + TO_NUMBER(NVL(ab4.wipdatavalue,0)) +
      TO_NUMBER(NVL(wldw.processwaferrejectsqty,0)) - TO_NUMBER(NVL(rc.wipdatavalue,0))) * 100, 2) END AS "Yield"
      ,wldd.txntimestamp txndate 
      ,wldw.wafersequence
      ,wldw.equipmentid
            ,wl.insertionnumber
      ,wl.insertionreasonname
FROM a_wiplot wl
JOIN Container C ON wl.containerid = c.containerid 
JOIN a_wiplotdetails wld ON wl.wiplotid = wld.wiplotid
JOIN a_wiplotdetailsdata wldd ON wld.wiplotdetailsid = wldd.wiplotdetailsid 
LEFT JOIN a_wiplotdetailswafers wldw ON wldw.wiplotdetailsid = wld.wiplotdetailsid AND wldd.waferscribenumber = wldw.waferscribenumber
LEFT JOIN a_wiplotdetailsdata ab1 ON wld.wiplotdetailsid = ab1.wiplotdetailsid AND ab1.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab1.wipdatanamename)) = 'WS_ACCEPT BIN1'
LEFT JOIN a_wiplotdetailsdata ab2 ON wld.wiplotdetailsid = ab2.wiplotdetailsid AND ab2.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab2.wipdatanamename)) = 'WS_ACCEPT BIN2'
LEFT JOIN a_wiplotdetailsdata ab3 ON wld.wiplotdetailsid = ab3.wiplotdetailsid AND ab3.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab3.wipdatanamename)) LIKE 'WS_%ACCEPT BIN3'
LEFT JOIN a_wiplotdetailsdata ab4 ON wld.wiplotdetailsid = ab4.wiplotdetailsid AND ab4.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ab4.wipdatanamename)) LIKE 'WS_%ACCEPT BIN4'
LEFT JOIN a_wiplotdetailsdata tr ON wld.wiplotdetailsid = tr.wiplotdetailsid AND tr.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(tr.wipdatanamename)) = 'WS_TOTAL REJECTS'
LEFT JOIN a_wiplotdetailsdata rc ON wld.wiplotdetailsid = rc.wiplotdetailsid AND rc.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(rc.wipdatanamename)) = 'WS_REJECT CONTINUITY'
LEFT JOIN a_wiplotdetailsdata pmi ON wld.wiplotdetailsid = pmi.wiplotdetailsid AND pmi.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(pmi.wipdatanamename)) LIKE 'WS_PM/LASER%'
LEFT JOIN a_wiplotdetailsdata idi ON wld.wiplotdetailsid = idi.wiplotdetailsid AND idi.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(idi.wipdatanamename))  LIKE 'WS_INK%DOT%'
LEFT JOIN a_wiplotdetailsdata vip ON wld.wiplotdetailsid = vip.wiplotdetailsid AND vip.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(vip.wipdatanamename)) LIKE 'WS_VISUAL%'
LEFT JOIN a_wiplotdetailsdata comments ON wld.wiplotdetailsid = comments.wiplotdetailsid AND comments.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(comments.wipdatanamename)) = 'WS_COMMENTS'
LEFT JOIN a_wiplotdetailsdata oper ON wld.wiplotdetailsid = oper.wiplotdetailsid AND oper.waferscribenumber = wldd.waferscribenumber AND (TRIM(UPPER(oper.wipdatanamename)) = 'WS_OPERATOR' OR TRIM(UPPER(oper.wipdatanamename)) = 'WS_OPERATOR_GRID')
LEFT JOIN a_wiplotdetailsdata insp ON wld.wiplotdetailsid = insp.wiplotdetailsid AND insp.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(insp.wipdatanamename)) = 'WS_INSPECTOR'
LEFT JOIN a_wiplotdetailsdata engr ON wld.wiplotdetailsid = engr.wiplotdetailsid AND engr.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(engr.wipdatanamename)) LIKE 'WS_%ENGINEER'
LEFT JOIN a_wiplotdetailsdata supv ON wld.wiplotdetailsid = supv.wiplotdetailsid AND supv.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(supv.wipdatanamename)) = 'WS_SUPERVISOR'
LEFT JOIN a_wiplotdetailsdata tpeDispo ON wld.wiplotdetailsid = tpeDispo.wiplotdetailsid AND tpeDispo.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(tpeDispo.wipdatanamename)) = 'WS_TPE DISPOSITION'
LEFT JOIN a_wiplotdetailsdata supvDispo ON wld.wiplotdetailsid = supvDispo.wiplotdetailsid AND supvDispo.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(supvDispo.wipdatanamename)) = 'WS_SUPV DISPOSITION'
--LEFT JOIN a_wiplotdetailsdata mh ON wld.wiplotdetailsid = mh.wiplotdetailsid AND mh.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(mh.wipdatanamename)) = 'WS_MH'
LEFT JOIN a_wiplotdetailsdata cc ON wld.wiplotdetailsid = cc.wiplotdetailsid AND cc.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(cc.wipdatanamename)) = 'WS_CHECK CODE'
LEFT JOIN a_wiplotdetailsdata lps ON wld.wiplotdetailsid = lps.wiplotdetailsid AND lps.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(lps.wipdatanamename)) = 'WS_LASER POWER SETUP(P/F)'
LEFT JOIN a_wiplotdetailsdata lte ON wld.wiplotdetailsid = lte.wiplotdetailsid AND lte.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(lte.wipdatanamename)) LIKE 'WS_LASER TRIM ENERGY%'
LEFT JOIN a_wiplotdetailsdata di ON wld.wiplotdetailsid = di.wiplotdetailsid AND di.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(di.wipdatanamename)) = 'WS_DUAL INK (Y/N)'
LEFT JOIN a_wiplotdetailsdata ie ON wld.wiplotdetailsid = ie.wiplotdetailsid AND ie.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ie.wipdatanamename)) = 'WS_INKED EDGES (Y/N)'
LEFT JOIN a_wiplotdetailsdata vq ON wld.wiplotdetailsid = vq.wiplotdetailsid AND vq.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(vq.wipdatanamename)) LIKE 'WS_100%VISUAL%QTY'
LEFT JOIN a_wiplotdetailsdata ntg ON wld.wiplotdetailsid = ntg.wiplotdetailsid AND ntg.waferscribenumber = wldd.waferscribenumber AND TRIM(UPPER(ntg.wipdatanamename)) = 'WS_NEW TOTAL GDPW'

WHERE c.containername =:lotID  AND  (TRIM(UPPER(wldd.wipdatanamename)) = 'WS_ACCEPT BIN1'  OR ( (TRIM(UPPER(wldd.wipdatanamename)) LIKE 'WS_LASER TRIM ENERGY%' AND wl.specname LIKE '5207_%' ) 
                                                                                                OR (TRIM(UPPER(wldd.wipdatanamename)) LIKE 'WS_100%VISUAL%QTY' AND SUBSTR(wl.specname,0,4) = '5267' )  ) )
) wipdata
WHERE wipdata."Total Good DPW" <> 0 AND wipdata."Total Rejects" <> 0
ORDER BY wipdata.wafersequence; 
```

我知道你们会帮忙的，非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:48:28.023

使用分析函数。这是一般形式：

```
SELECT wipdata.wafernumber
  ,wipdata.specname
  ,MAX(wipdata.insertionnumber) insertionnumber
  ,MAX(wipdata.insertionreasonname) KEEP (DENSE_RANK LAST ORDER BY wipdata.insertionnumber) insertionreasonname
  ,MAX(wipdata."Total Good DPW") KEEP (DENSE_RANK LAST ORDER BY wipdata.insertionnumber) "Total Good DPW"
  ,MAX(wipdata."Accept Bins B1") KEEP (DENSE_RANK LAST ORDER BY wipdata.insertionnumber) "Accept Bins B1"
  ,MAX(wipdata."Accept Bins B2") KEEP (DENSE_RANK LAST ORDER BY wipdata.insertionnumber) "Accept Bins B2"
   ......
FROM
(
......
) wipdata
WHERE wipdata."Total Good DPW" <> 0 AND wipdata."Total Rejects" <> 0
GROUP BY 
wipdata.wafernumber,wipdata.specname
ORDER BY wipdata.wafersequence; 
```

希望您能看到如何应用它的要点。这并不漂亮，但它是最有效的方法之一。我建议您首先尝试使用字段子集并一点一点地添加额外的字段以停止出现语法错误。如果您需要有关语法错误的帮助，请发回 FULL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:21:05.133

尝试：

```
select waffernumber, specname, insertionnumber
from
(
select waffernumber, specname, insertionnumber, rank() over (partition by waffernumber order by insertionnumber desc) rn
from t
  ) 
where rn = 1 
```

哪里 t 是您的查询（我为示例简化了它）

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/45357/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:10:28.080

通过以下方式在您的订单前添加：

```
and wipdata.insertionnumber = (select max (x.insertionnumber) from (make a query that just     retrun "insertionnumber" and "wafernumber" ) x where x.wafernumber=wipdata.wafernumber) 
```

我希望它有效。

# c# - 从 asp.net 中的 gridview 导出 excel 工作表

> ID：15402800
> 
> 赞同：0
> 
> 时间：2013-03-14T06:40:59.247
> 
> 标签：c#, javascript, jquery, asp.net, jquery-plugins

我正在从我与虚拟数据绑定的 gridview 中导出 excel 表。我正在使用导出 excel 的 jquery 方法，但它不起作用。我在 jquery 中有以下功能。

```
<script type="text/javascript">
    function exportToExcel() 
    {
        var oExcel = new ActiveXObject("Excel.Application");
        var oBook = oExcel.Workbooks.Add;
        var oSheet = oBook.Worksheets(1);
        var detailsTable = document.getElementById('<%= gvSearchResult.ClientID %>');
        alert(detailsTable);
        for (var y=0;y<detailsTable.rows.length;y++) 
        // detailsTable is the table where the content to be exported is 
        { 
            for (var x=0;x<detailsTable.rows(y).cells.length;x++) 
            { 
                var cellData = detailsTable.rows(y).cells(x).innerText;
                var cellHTML = detailsTable.rows(y).cells(x).innerHTML;

                if (cellHTML.toLowerCase().indexOf("<table") == -1 && cellHTML.toLowerCase().indexOf("schedule") == -1) // check to omit page numbers
                {
                    oSheet.Cells(y+1,x+1) = cellData;
                }
            } 
        } 
        oExcel.Visible = true; 
        oExcel.UserControl = true; 
    } 
```

我使用上述功能。我有一个点击按钮，我想导出 Excel 工作表。按钮如下：

```
<asp:Button runat="server" ID="btnClickXport" Text="Xport2Xcel" OnClientClick="exportToExcel()" /> 
```

它不工作。我实际上测试了 new ActiveXobject("Excel.Application"); 在开始导致问题。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:54:54.980

我已使用此 jquery 插件将 html 表导出到 csv： [https ://code.google.com/p/jqtable2csv/](https://code.google.com/p/jqtable2csv/)

示例用法：

```
$("#my-table").table2csv({
    callback: function (csv, name) {
        jQuery.post(
            url, encodeURIComponent(csv),
             function (data) {
                 location.href = "/file?csv=" + csv + "&name=" + name;
             }
        );
}); 
```

话虽如此...如果您使用的是 ASP.Net，您可能希望处理此服务器端，因为 javascript 在旧浏览器上启动下载存在一些挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:07:10.113

您可以尝试以下代码将 a 导出`datagridview`到 excel ：

```
protected void ExportResultToExcel(string fileName)
    {
        Response.Clear();
        Response.Buffer = true;
        Response.ContentType = "application/vnd.ms-excel";
        Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
        Response.Charset = "";
        this.EnableViewState = false;

        System.IO.StringWriter sw = new System.IO.StringWriter();
        System.Web.UI.HtmlTextWriter htw = new System.Web.UI.HtmlTextWriter(sw);

        gvSearchResult.RenderControl(htw);

        Response.Write(sw.ToString());
        Response.End();
    } 
```

# android - 如何使自定义列表视图可单击每个项目以访问其位置

> ID：15402804
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:41:35.800
> 
> 标签：android, listview, clickable

如何制作每个项目可点击的自定义列表视图（我的意思是，我正在制作一个包含一个图像按钮、两个文本视图的列表视图，我想在用户单击项目时访问位置，然后它不显示可点击。）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:52:16.067

**代码：**

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {

       // here position variable holding the ListView position which clicked by user 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:43:55.607

我想这会对你有所帮助..

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() 
 { 
      @Override 
      public void onItemClick(AdapterView arg0, View arg1,int position, long arg3) 
      { 

      } 
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:46:52.877

You can achieve this in the `getView` method of the `Adapter` you have applied to your **customListView**.

It would roughly be like using `View v=customView.findViewById(id of your view i.e image etc.)` also you have to set **onClickListener** on the particular view element i.e `v` in my case.

-- Edit --

[A similar question](https://stackoverflow.com/q/13874376/1503130) Go through this linked question and the accepted answer also.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:34:11.440

您可以在包含`Button`, 和 2的列表视图中扩展自定义布局，`TextView`如下所示：

**listview_row.xml**

> ```
>  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>          android:layout_width="match_parent"
>          android:layout_height="match_parent"
>           android:orientation="horizontal" >
> 
> <TextView
>     android:id="@+id/textView2"
>     android:layout_width="75dp"
>     android:layout_height="75dp"
>     android:scaleType="fitXY"
>      />
> 
> <TextView
>     android:id="@+id/textView1"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_marginLeft="5dp"
>     android:layout_marginRight="0dp"
>     android:layout_marginTop="15dp"
>     android:text="Medium Text"
>     android:textSize="15dp" />
> 
>   <ImageButton
>     android:id="@+id/imageview1"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:src="@drawable/ic_launcher"
>       />
> 
>    </LinearLayout> 
> ```

在您的主要活动布局中添加列表视图，如下所示：

**主要的.xml**

> ```
>  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>             android:layout_width="fill_parent"
>             android:layout_height="fill_parent"
>             android:orientation="vertical" >
>   <ListView
>             android:id="@+id/listView1"
>             android:layout_width="match_parent"
>             android:layout_height="wrap_content" >
>  </ListView>
> </LinearLayout> 
> ```

如上所述创建布局后，创建一个适配器类以在您的列表视图中添加自定义布局，并扩展`BaseAdapter`.

> ```
>  public class App_Adapter extends BaseAdapter implements OnClickListener{ 
> ```

在那个 adpater 类的`getView`方法中，您需要扩展您的布局。

> ```
>  @Override
>   public View getView(int position, View convertView, ViewGroup parent) {
>          // TODO Auto-generated method stub
>          View mView=convertView;
>             if (convertView == null)  
>               mView = inflater.inflate(R.layout.listview_row, null);
> 
>            TextView text1=(TextView)mView.findViewById(R.id.textView1));
>            TextView text2=(TextView)mView.findViewById(R.id.textView2));
>            ImageButton imagbtn=(ImageButton)mView.findViewById(R.id.imageview1);
>          //set the image button click listener
>       imagbtn..setOnClickListener(this);
>    return mView;
>    } 
> ```

之后，在您的活动中，您可以访问列表视图并为其设置 onItemclick 侦听器以访问列表视图的列表项，如下所示：

> ```
>  public void onCreate(Bundle savedInstanceState) {
>         super.onCreate(savedInstanceState);
>         setContentView(R.layout.main); 
>       ListView lv = (ListView)findViewById(R.id.listView1);
>     lv.setAdapter(new App_Adapter());
>     lv.setOnItemClickListener(new AdapterView.OnItemClickListener() 
>      { 
>        @Override 
>        public void onItemClick(AdapterView arg0, View arg1,int position, long arg3) 
>       { 
>         } 
>       });
>      } 
> ```

# asp.net-mvc - MVC捕获异常后在哪里可以找到错误信息

> ID：15402817
> 
> 赞同：0
> 
> 时间：2013-03-14T06:42:37.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3, error-handling

在 MVC 应用程序中哪里可以找到 log.info 正在写入的文件。我想查看错误，但找不到将错误保存到的位置。

```
private readonly ILog log = LogManager.GetLogger(typeof(TermsController));

try { 

// some code to test

}
catch (Exception ex)
{
log.Info (ex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:45:01.867

那将取决于你如何[`configured Log4Net`](http://www.codeproject.com/Articles/15923/Configure-Log4Net-in-ASP-NET-2-0)。如果你还没有配置它，它不会写任何地方。

所以基本上在你的 web.config 中你可以`log4net`注册一个部分：

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/> 
```

这可能看起来像这样：

```
<log4net>
    <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
        <param name="File" value="c:\\Logs\\Log4Net.log"/>
        <layout type="log4net.Layout.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n"/>
        </layout>
    </appender>

    <root>
        <level value="DEBUG" />
        <appender-ref ref="LogFileAppender" />
    </root>    
</log4net> 
```

然后在你的`Application_Start`你必须调用：

```
log4net.Config.XmlConfigurator.Configure(); 
```

并且日志将被写入`c:\logs\log4net.log`文件。

# ruby-on-rails - 为什么 Heroku git 会推送到我的暂存应用程序，但不再推送到我的生产应用程序

> ID：15402819
> 
> 赞同：0
> 
> 时间：2013-03-14T06:42:40.913
> 
> 标签：ruby-on-rails, git, heroku

直到最近，我在将 git 推送到我的暂存应用程序和 Heroku 上的生产应用程序时都没有遇到任何问题。

最近，我让我的暂存应用程序在我的生产应用程序之前获得了一些提交，同时我摆弄了一个问题。

现在我仍然可以成功地 git push 到我的暂存应用程序，但是每当我尝试 git push 到我的生产应用程序时，我都会得到：

```
$ git push heroku master
Counting objects: 227, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (176/176), done.
Received disconnect from 50.19.85.156: 10: user closed connection
error: pack-objects died of signal 13
error: failed to push some refs to 'git@heroku.com:testivate.git' 
```

我估计我的整个应用程序小于 10MB，因为我本地系统上的应用程序文件夹为 84.4MB，但它包含一个 75.7MB /tmp/ 文件夹，我已通过`.gitignore`文件从我的提交中排除。

如何诊断和解决此问题？

# emacs - 查找 cygwin emacs 是否在 emacs 中的 X 下运行

> ID：15402820
> 
> 赞同：1
> 
> 时间：2013-03-14T06:42:42.687
> 
> 标签：emacs, elisp

变量

```
"system-type" 
```

在 emacs-nox.exe 和 emacs.exe（在 X 下运行）下都设置为“cygwin”。如何查找 Emacs 是否在 X 中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:09:57.027

尝试调用函数`window-system`。文档字符串说：

```
(window-system &optional FRAME)

The name of the window system that FRAME is displaying through.
The value is a symbol:
 nil for a termcap frame (a character-only terminal),
 'x' for an Emacs frame that is really an X window,
 'w32' for an Emacs frame that is a window on MS-Windows display,
 'ns' for an Emacs frame on a GNUstep or Macintosh Cocoa display,
 'pc' for a direct-write MS-DOS frame.

FRAME defaults to the currently selected frame.

Use of this function as a predicate is deprecated.  Instead,
use `display-graphic-p' or any of the other `display-*-p'
predicates which report frame's specific UI-related capabilities. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:34:52.137

AFAIK Cygwin-X11 版本的 Emacs 就像 GNU/Linux 版本一样，它可以同时具有 tty 帧和 X11 帧。

因此，即使您启动“emacs -nw”，您也可以稍后从同一个 Emacs 实例创建 X11 帧（例如 via`emacsclient`或 via `M-x make-frame-on-display`）。这意味着，如果您希望该案例运行良好，即使在“非 X11”案例中，您也需要应用您的“仅 X11”自定义，但您可能希望以仅影响 X11 帧的方式执行此操作而不是 tty 帧。

# mysql - 将 ssl 与 mysql 集成 - 拒绝访问

> ID：15402828
> 
> 赞同：7
> 
> 时间：2013-03-14T06:43:24.703
> 
> 标签：mysql, ssl, access-denied

我正在尝试通过引用[this](http://www.chriscalender.com/?p=448)`ssl`来进行设置。 我能够完成前 3 个步骤，但第 4 个步骤有问题，如下所示：`mysql`

```
GRANT ALL PRIVILEGES ON *.* TO 'ssluser'@'localhost' IDENTIFIED BY 'ssluser' REQUIRE SSL;
FLUSH PRIVILEGES; 
```

然后我重新启动mysql服务器。

在我尝试运行时执行此语句后`mysql -ussluser -pssluser -P3306 --ssl-key="C:\Program Files\MySQL\MySQL Server 5.5\certs\ca-cert.pem"`，
它显示以下错误：**用户'ssluser'@'localhost'的访问被拒绝（使用密码：YES）**
我在这里使用*3306*，因为它是我的默认端口。

当我已经执行了*GRANT*语句时，它怎么能说*拒绝访问。*

 ***注意**

*   我在使用*GRANT*语句`mysql -ussluser -pssluser` **之前**执行了并且我能够连接到.*`REQUIRE SSL``mysql`*

**   如果我尝试`SHOW GRANTS FOR 'ssluser'@'localhost';`
    我得到

    ```
    GRANT ALL PRIVILEGES ON *.* TO \'ssluser\'@\'localhost\' IDENTIFIED BY PASSWORD \'*C56A6573BEE146CB8243543295FD80ADCE588EFF\' REQUIRE SSL WITH GRANT OPTION 
    ```

    *   在执行*GRANT*语句之前，我能够通过*ssluser连接到**工作台*。但现在它**拒绝访问**错误。

    ****   当我使用`show global variables like 'have_%ssl';`我得到

    have_openssl 已禁用 have_ssl 已禁用

    *   当我使用它时，`SHOW STATUS LIKE 'Ssl_cipher';`我得到

    ssl_cipher _________

    *   我已经创建了所有服务器和客户端**证书**并将它们放在根目录`certs`内的目录中。`mysql server`**** 

 ****我从几天开始尝试，但一无所获。任何帮助表示赞赏。

我是第一次这样做。谁能指导我完成详细的程序来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-29T16:11:47.320

我今天遇到了类似的错误消息，这就是我发现的。

1.  GRANT 的“REQUIRE SSL”选项只需要 SSL 进行连接，不需要提供客户端证书。
2.  mysql CLI 没有像我预期的那样处理 SSL。例如，在 MySQL 5.5 上，该`--ssl`选项似乎并没有真正启用 SSL 传输。
3.  我必须添加`--ssl-cipher=DHE-RSA-AES256-SHA:AES128-SHA`让 mysql 客户端真正使用 SSL 并允许使用客户端进行身份验证的选项。

以下是我用来设置新用户的确切步骤：

```
CREATE USER 'ssl-user'@'%' identified by '<password>';
GRANT USAGE ON *.* TO 'ssl-user'@'%' identified by '<password>' REQUIRE SSL;
GRANT ALL PRIVILEGES ON `your-database`.* TO 'ssl-user'@'%'; 
```*****

# java - 我们可以锁定无状态会话 bean 实例吗？

> ID：15402830
> 
> 赞同：0
> 
> 时间：2013-03-14T06:43:30.223
> 
> 标签：java, multithreading, locking, istatelesssession

伙计们，

出于某种原因，我尝试达到无状态会话 bean 池的最大大小。

我可以使用大量线程来做到这一点，通过“同时”查找我的无状态会话 bean，但它需要消耗许多循环或许多线程来做到这一点，因为有时它会从池中选择创建的 bean 实例。结果，无法达到 Max-size。

所以，我的问题在这里：我们能不能找到一种方法来锁定实例（不像做大量的数学计算任务），保持“工作”状态并且不发送回空闲池，那么我们可以使用 Thread[ max-pool-size] 以达到目标，而无需执行一些烦人的循环。

谢谢，

# xml - 如何将 StreamReader 转换为 XDocument？

> ID：15402834
> 
> 赞同：2
> 
> 时间：2013-03-14T06:43:52.890
> 
> 标签：xml, windows-phone-7, linq-to-xml, streamreader, isolatedstorage

我将 XML 数据存储在 IsolatedStorage 中，同时从 IsolatedStorage 读取数据。我需要将 StreamReader 转换为 XDocument。以下代码我用来将 StreamReader 转换为 XDocument。我收到如下错误：“缺少根元素”

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {                   
                IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile("AllHeadLine.xml", FileMode.Open);
                using (StreamReader reader = new StreamReader(isoFileStream))
                {                        
                    displayXmlData.Text = reader.ReadToEnd();                       
                    XDocument offlineHeadline = XDocument.Load(reader);

                }
            } 
```

编辑：XML 内容

```
<category><catname>ರಾಜ್ಯ&lt;/catname><img>http://www.udayavani.com/udayavani_cms/gall_content/2013/3/2013_3$thumbimg113_Mar_2013_235853890.jpg</img><heading>ನನ್ನ ಮಗನ ಬಗ್ಗೆ ಹೆಮ್ಮೆ ಇದೆ&lt;/heading><navigateurl>some Url </navigateurl></category> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T06:47:54.597

看看你在做什么：

```
using (StreamReader reader = new StreamReader(isoFileStream))
{                        
    displayXmlData.Text = reader.ReadToEnd();                       
    XDocument offlineHeadline = XDocument.Load(reader);
} 
```

`StreamReader`您正在从via中读取所有数据`ReadToEnd`，*然后*尝试将其加载到`XDocument`. 没有更多数据可读取！几个选项：

*   将其读取为字符串，然后使用该字符串设置`displayXmlData.Text` *并*解析为带有[`XDocument.Parse`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx). （如果 WP7 不支持，请使用 a`StringReader`和`XDocument.Load`
*   彻底摆脱`ReadToEnd`通话，生活无设置`displayXmlData.Text`。目前尚不清楚这是必需的还是仅用于诊断目的。

除非您真的需要逐字逐句的文件文本，否则我实际上会完全避免创建`StreamReader`，并直接从`Stream`. 这也将让 LINQ to XML 进行编码检测。

```
using (var storage = IsolatedStorageFile.GetUserStoreForApplication())
{                   
    using (var stream = storage.OpenFile("AllHeadLine.xml", FileMode.Open))
    {
        XDocument offlineHeadline = XDocument.Load(stream);
        ...
    }
} 
```

# meteor - 如何使用 Meteor 向客户端发送非基于集合的推送？

> ID：15402837
> 
> 赞同：3
> 
> 时间：2013-03-14T06:44:01.067
> 
> 标签：meteor

我想将文件上传到 Meteor 应用程序，一旦在服务器上处理了上传的文件，就向客户端（仅向上传文件的人）推送一些关于成功上传的通知。我想我知道如何通过连接到 Express 来进行文件上传，但是我如何只向这个客户端推送（或回调）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:43:09.003

使用方法：[http ://docs.meteor.com/#methods_header](http://docs.meteor.com/#methods_header)

**服务器端js**

```
Meteor.methods({
    'mytask' : function(var1,var2) { 
        //do stuff
        return {url:'a url'};
    }
}); 
```

**客户端js**

```
//Run this to call the method
Meteor.call("mytask", "www.google.com", "www.bing.com", function(err, result) {
    if(!err) {
        alert(result);
    }
} 
```

# c - adding two long ints in C

> ID：15402838
> 
> 赞同：0
> 
> 时间：2013-03-14T06:44:05.600
> 
> 标签：c

I am having a hard time adding two long ints, essentially what I want is the 'total' time it took using these two variables and I keep on getting 0.

```
struct rusage rusage;
getrusage(RUSAGE_SELF, &rusage); 
printf("TOTAL TIME \n");
printf("%ld.%06ld", (rusage.ru_utime.tv_sec, rusage.ru_utime.tv_usec), 
                    (rusage.ru_stime.tv_sec, rusage.ru_stime.tv_usec)); 
```

It prints out a 0\. I am able to print out the the user time, system time, but I can't add them. Please help.

*What the author wants isn't to add just two `long` integers, but to add two `timeval` structures' seconds and microseconds respectively.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:52:14.490

像这样的东西，但这可以写得更好：

```
 struct rusage rusage;
  struct rusage tusage;
  getrusage(RUSAGE_SELF, &rusage); 
  printf("TOTAL TIME \n");
  tusage.ru_utime.tv_sec = rusage.ru_utime.tv_sec + rusage.ru_stime.tv_sec;
  tusage.ru_utime.tv_usec = rusage.ru_utime.tv_usec + rusage.ru_stime.tv_usec;
  tusage.ru_utime.tv_sec += tusage.ru_utime.tv_usec / 1000000;
  tusage.ru_utime.tv_usec = tusage.ru_utime.tv_usec % 1000000;
  printf("%ld.%06ld\n", tusage.ru_utime.tv_sec, tusage.ru_utime.tv_usec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:48:27.350

您的代码既不显示结构也不显示填充方式。但是 printf 参数列表将两次 tv_usec 成员传递给函数。您使用逗号运算符并使用括号中最右边的成员 (tv_usec)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:53:32.860

您可以执行以下操作：

```
#include <sys/time.h>
struct timeval  StartTime, EndTime;
gettimeofday(&StartTime, NULL);
/...

// Your program

.../
gettimeofday(&EndTime, NULL);

printf ("Total time = %f seconds\n",
         (double) (tv2.tv_usec - tv1.tv_usec)/1000000 +
         (double) (tv2.tv_sec - tv1.tv_sec)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:00:27.553

也许我不明白这一点，请尝试以下操作：

```
#include <stdio.h>
#include <sys/time.h>
#include <sys/resource.h>
#include <stdlib.h>
int main(){
int i=0;
struct rusage rusage;
for(i=0;i<10000000;i++)
{
        free(malloc(4096));
}
getrusage(RUSAGE_SELF, &rusage);
printf("TOTAL TIME \n");
printf("%ld.%06ld\n",rusage.ru_utime.tv_sec, rusage.ru_utime.tv_usec);
printf("%ld.%06ld\n",rusage.ru_stime.tv_sec, rusage.ru_stime.tv_usec);
printf("%ld.%06ld\n",rusage.ru_stime.tv_sec+rusage.ru_utime.tv_sec, rusage.ru_stime.tv_usec+rusage.ru_utime.tv_usec);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T07:06:08.873

我也不懂你的意思。也许是

```
double total_time = (rusage.ru_utime.tv_sec + rusage.ru_stime.tv_sec) / 1000.0
  + (rusage.ru_utime.tv_usec + rusage.ru_stime_tv_usec) * 1000 
```

total_time 的单位是 ms。

# jquery - Error when call json from the link with username+pass

> ID：15402841
> 
> 赞同：0
> 
> 时间：2013-03-14T06:44:35.797
> 
> 标签：jquery

```
$.ajax({
    url: 'http://handshake.aid-dcc.asia/api/customer/get_user_list',
    type: 'POST',
    cache: true,
    dataType: 'json',
    beforeSend: function(xhr) {
        xhr.setRequestHeader("Authorization", 'Basic J25hbWFwcDpKbTZzdUdyayc=')
    },
    sucess: function(result) {
        alert('done');
    }
}); 
```

My problems are:

I load json file from url: http:handshake.aid-dcc.asia/api/customer/get_user_list. But The link will require username + pass when we open it. So, I used "Authorization" with EncodeBase64('username:password') in my code. I received some errors:

1.  OPTIONS http:handshake.aid-dcc.asia/api/customer/get_user_list 401 (Authorization Required)
2.  XMLHttpRequest cannot load http:handshake.aid-dcc.asia/api/customer/get_user_list. Origin http:localhost is not allowed by Access-Control-Allow-Origin.

What's wrong with my code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:19:00.340

if you are using Chrome, you can start it with the parameter `--disable-web-security`

Or

use `dataType: 'jsonp'`

# iphone - Edit averagePowerForChannel of avaudioplayer in iphone

> ID：15402842
> 
> 赞同：1
> 
> 时间：2013-03-14T06:44:43.070
> 
> 标签：iphone, ios, avaudioplayer, avaudiosession

I am playing the .mp3 file by using AVaudioplayer:-

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"Speech"ofType:@"mp3"]];    
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];    
    if (error)
    {
        NSLog(@"Error in audioPlayer: %@",
              [error localizedDescription]);
    } else {
        audioPlayer.delegate = self;
        audioPlayer.numberOfLoops=-1;
        [audioPlayer prepareToPlay];
        [audioPlayer play];
    }
    audioPlayer.meteringEnabled = YES;
    audioPlayer.volume=0;
    NSTimer *playerTimer = nil;
    if (!playerTimer)
    {
        playerTimer = [NSTimer scheduledTimerWithTimeInterval:0.001
                                                       target:self selector:@selector(monitorAudioPlayer)
                                                     userInfo:nil
                                                      repeats:YES];
    }

    [audioPlayer updateMeters];

-(void)monitorAudioPlayer{

    [audioPlayer updateMeters];

    for (int i=0; i<audioPlayer.numberOfChannels; i++)
    {        
        float power = [ audioPlayer averagePowerForChannel: i ];
        float peak = [ audioPlayer peakPowerForChannel: i ];
}
} 
```

And in written i get the float number of power for that audioplayer. Is there any way to change the power of peak value of this audio player so that the sound get change to some funnysound or something other. It is possible by using audiosession or some other thing. I had done this by using DIRAC. But in that i am not able to get the powervalue.AS it always return the static powervalue.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:37:10.367

平均和峰值功率电平不可写；它们是样本数据的计算特征。

`player.volume = x`其中 x 大于 1.0 将在声音从扬声器中出来之前放大声级。如果你把它设置为一个像 20 或 100 这样愚蠢的高数字，它最终会听起来很有趣！

如果你想对样本做更多有趣的事情，我认为你必须使用像 RemoteIO 或 AudioQueue 这样的低级 API。

# javascript - Ember.js Injecting a Dependency Into Controllers, Routes and Data Store Adapter

> ID：15402843
> 
> 赞同：2
> 
> 时间：2013-03-14T06:44:48.030
> 
> 标签：javascript, web, dependency-injection, ember.js, ember-data

I'm trying to inject a dependency into a data-store adapter, so it's available from its "init" method, onwards, but I'm having trouble. I'm the method outlined in [http://livsey.org/blog/2013/02/10/integrating-pusher-with-ember/](http://livsey.org/blog/2013/02/10/integrating-pusher-with-ember/) to create a "Pusher" object

```
Ember.Application.initializer({
  name: "pusher",
  initialize: function(container, application) {
    // Original code from blog post
    // use the same instance of Pusher everywhere in the app
    container.optionsForType('pusher', { singleton: true });

    // register 'pusher:main' as our Pusher object
    container.register('pusher', 'main', application.Pusher);

    // inject the Pusher object into all controllers and routes
    container.typeInjection('controller', 'pusher', 'pusher:main');
    container.typeInjection('route', 'pusher', 'pusher:main');

    // My guessed addition
    container.typeInjection('adapter', 'pusher', 'pusher:main');
    container.typeInjection('store', 'pusher', 'pusher:main');
  }
}); 
```

But this doesn't seem to work, as in

```
this.get('pusher'); 
```

is undefined in the adapter's init method. Indeed, the adapter's init method method seems to run before the init method of Pusher. How can I get the same object into both the routes and my custom store adapter, without resorting to global variables?

# android - wan to highlight particular positions( which ll have to be fetched from the database) in the list view

> ID：15402850
> 
> 赞同：1
> 
> 时间：2013-03-14T06:45:04.093
> 
> 标签：android, listview

```
 List<Integer> values;
   String[] mListContent={"Sunday", "Monday", "Tuesday", "Wedneday", "Thursday", "Friday", "Saturday"};
   Intent myIntent = getIntent();
   iid = myIntent.getExtras().getLong("curr_id");
   values = datasource.getDays(iid);
   ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.simple_selectable_list_item, mListContent); 
   setListAdapter(adapter);
   ListView listView = getListView();
   listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
   for(ii=0; ii<values.size(); ii++)
   {
      listView.setItemChecked(values.get(ii),true);
      Log.i(" values: " + values.get(ii)," ");
   } 
```

I have a file named textcolorselector.xml for list, that goes

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" android:color="#000" />
<item android:state_checked="true" android:color="#000" />
<item android:state_active="true" android:color="#000" />
<item android:state_selected="true" android:color="#000" />
<item android:color="#888" />   
</selector> 
```

say like i have 7 defaut rows in my list and wanna highlight only certain positions

the values from the database are retreived perfectly,in the database i have saved only the position values of the list ie 0,1,...6 for sunday, monday,...saturday respectively, the problem is extracting values of "values" list is not being changed as set.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:34:59.887

您设置选择器的事实并不意味着它将用于“检查”项目。甚至更多 - 选择器与检查状态无关。

您需要做的是提供您自己的视图来`ArrayAdapter`实现`Checkable`状态并为其提供自己的可绘制对象。

# ipad - Create and maintain session in iphone

> ID：15402851
> 
> 赞同：0
> 
> 时间：2013-03-14T06:45:14.473
> 
> 标签：ipad, ios6

I am going to create an application in ipad in which I don't want to manage the session on server side to avoid the server calls.

So, how can I create and maintain the session in the application locally.

# javascript - 将长数字字符串转换为数组

> ID：15402859
> 
> 赞同：0
> 
> 时间：2013-03-14T06:45:51.750
> 
> 标签：javascript, arrays, string

所以，假设我有一个由一个非常大的数字组成的字符串，例如“123456789101112131415”。如何将该字符串转换为包含这些值的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:48:47.477

很容易做到：

```
"123456789101112131415".split("") 
```

# iphone - Place a image relative to iPad and iPhone

> ID：15402862
> 
> 赞同：1
> 
> 时间：2013-03-14T06:46:08.083
> 
> 标签：iphone, ios, objective-c, ipad, resolution

In my app there is a feature where you can drag and drop a image ,image is in a `UIimageView`. Its a universal app.I need to store the x,y coordinates relative to **2048x1536** .I use `CGPointApplyAffineTransform` to calculate the relative point .And inverse the transform to iPhone screen to find the relative position on iPhone screen. Due to pixel density variation i am not getting the relative position correctly.

```
CGFloat TARGET_WIDTH  =2048.00;
CGFloat TARGET_HEIGHT =1536.00;

CGPoint thispoint=    CGPointApplyAffineTransform(imageView.frame.origin, CGAffineTransformMakeScale(TARGET_HEIGHT/self.view.frame.size.height, TARGET_WIDTH/self.view.frame.size.width)); 
```

This is the code i find the relative point .

And i inverse the transform with iPhone view size how do i calculate the relative with the density of pixels iPad and iPhone.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:17:23.280

测试这个，

```
CGFloat TARGET_WIDTH  =2048.00;
CGFloat TARGET_HEIGHT =1536.00;
CGFloat xScaleFactor = TARGET_WIDTH / self.view.frame.size.width;
CGFloat yScaleFactor = TARGET_HEIGHT / self.view.frame.size.height;
CGPoint thispoint = CGPointMake(imageView.frame.origin.x*xScaleFactor, imageView.frame.origin.y*yScaleFactor); 
//point with respect to your given target size 
```

# javascript - AngularJS 缓存 REST 请求

> ID：15402867
> 
> 赞同：6
> 
> 时间：2013-03-14T06:46:48.717
> 
> 标签：javascript, rest, caching, angularjs

我是 angularJS 新手，对缓存等有疑问。

我有一个包含两个步骤的向导，我希望能够单击返回和下一步，并在用户拥有它们时仍然填写表单。

在我的 page1Partial 我有这个：

```
<li ng-repeat="pick in picks | orderBy:orderProperty">
<b><span ng-bind="pick.name"/></b>
<input type="checkbox" ng-model="pick.checked" ng-click="updateBasket(pick)">
</li> 
```

当我转到下一页时，然后单击返回，复选框被清除，这是因为我再次调用了对 java 服务的 RESful 调用。如何缓存此响应？

从我的控制器，这每次都会影响我的 REST Web 服务。

```
$scope.picks = Pick.query(); 
```

我的服务

```
angular.module('picksService', ['ngResource']).
    factory('Pick', function ($resource) {
        return $resource('rest/picks/:id', {}, {
            'save': {method: 'PUT'}
        });
    }); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T10:07:03.353

从 1.1.2 ( [commit](https://github.com/angular/angular.js/commit/af89daf4641f57b92be6c1f3635f5a3237f20c71) ) 开始，所有 $httpConfig 选项都直接暴露在 $resource 操作对象中：

```
return {
  Things: $resource('url/to/:thing', {}, {
    list : {
      method : 'GET',
      cache : true
    }
  })
 }; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-14T07:13:03.893

如果你替换`$resource`为`$http`then 你可以直接使用下面的代码

```
$http({
    method: 'PUT',
    url: 'url',
    cache:true
}); 
```

# javascript - How do i combine user input change text method and an if statement?

> ID：15402874
> 
> 赞同：0
> 
> 时间：2013-03-14T06:47:15.773
> 
> 标签：javascript, if-statement, input

I want to combine these two blocks in the script. I want it so that when you type river into the text box i can give a good job statement or post a link. I don't know what to use as the variable in the second statement. Which is the if statement.

```
var userInput.value=river;
if(userInput.value)=="river"){
document.write("hey");
}
<br/>
function changeText2(){
var userInput=document.getElementById('userInput').value;
document.getElementById('boldStuff2').innerHTML=userInput;
}

</script>
<p>What has a mouth but can't chew?<b id='boldStuff2'>???</b></p>
<input type='text' id='userInput' value='Enter Answer Here'/>
<input type='button' onclick='changeText2()' value='Answer'/>

</head>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:52:59.913

该代码的前三行不仅在逻辑上是错误的，而且也是不必要的。尝试一个简单的版本

```
<script>
function changeText2(){
var userInput=document.getElementById('userInput').value;

if(userInput.toLowerCase()=="river")
{
alert("Good Job");
}

document.getElementById('boldStuff2').innerHTML=userInput;
}

</script>
<p>What has a mouth but can't chew?<b id='boldStuff2'>???</b></p>
<input type='text' id='userInput' value='Enter Answer Here'/>
<input type='button' onclick='changeText2()' value='Answer'/>

</head>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:54:31.073

在你的 JScript 代码中设置这个函数

```
 function changeText2(){
     var userInput=document.getElementById('userInput').value;
     if(userInput=="river")
     {
      document.write("");
     }
     document.getElementById('boldStuff2').innerHTML=userInput;
   } 
```

# iphone - set the cursor position on textview

> ID：15402875
> 
> 赞同：1
> 
> 时间：2013-03-14T06:47:20.577
> 
> 标签：iphone, ios

I want to to set the cursor position based on the x,y coordinates on the text view. For example I want cursor position on (10,5,300,462), I want to insert the text this frame only based on cursor.

In view did load i set the delegate and use the `NSMakeRange()` function

```
- (void)viewDidLoad
    {
        [super viewDidLoad];
         _TextView.delegate=self;
           _TextView.editable = YES;
          [_TextView setSelectedRange:NSMakeRange(5,0)];
    } 
```

I create a text view with frame of (10,22,300,462) and added to the view. My reqirement is i want display the cursor on text base on x,y coordinates x=10 after and y=5 after in the text view ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:07:34.497

你好堆栈溢出社区。我希望我不要回答太晚。

```
- (NSUInteger) textOffsetFromPoint: (CGPoint *) position
{
    // this gives you the nearest UITextPosition
    UITextPosition * closestPosition = [textView closestPositionToPoint:tapPoint];

    // and this "translate" UITextPosition into an integer
    NSUInteger offset = [textView offsetFromPosition:textView.beginningOfDocument 
                                          toPosition:closestPosition];
    return offset;
} 
```

然后是 Sunny 建议的代码。

```
[self performSelector:@selector(setCursorPosition:) withObject:textView afterDelay:0.01];

- (void)setCursorPosition:(UITextView *)textview
{
    textview.selectedRange = NSMakeRange([self textOffsetFromPoint:position], 0);
} 
```

查看 UITextInput 协议参考以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:45:15.913

像这样尝试它会在我的情况下工作它正在工作，

```
- (void)textViewDidBeginEditing:(UITextView *)textview 
{ 
    [self performSelector:@selector(setCursorPosition:) withObject:textview afterDelay:0.01]; 
} 

- (void)setCursorPosition:(UITextView *)textview 
{ 
    textview.selectedRange = NSMakeRange(10, 0); 
} 
```

# iphone - issue in Changing date formate

> ID：15402881
> 
> 赞同：2
> 
> 时间：2013-03-14T06:47:38.923
> 
> 标签：iphone, ios

i have one array of string something like below

```
newlymadeArray(
"03/05/2013",
"09/22/2013",
"03/02/2013",
"03/02/2013",
"08/22/2013",
"11/02/2013",
"07/08/2013",
"08/31/2013",
"05/13/2013",
"07/11/2013",
"10/07/2013",
"02/20/2013" 
```

)

current formate is MM/dd/yyyy

i want to change it to dd/MM/yyyy

i am using following code for this

```
 NSLog(@"_newlymadeArray%@",_newlymadeArray);
//logic for changing date formate
for( int i=0; i<_newlymadeArray.count; i++){
    NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
    [dateFormatter1 setDateFormat:@"MM/dd/yyyy"];
    NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
    [dateFormatter2 setDateFormat:@"dd/MM/yyyy"];

    NSDate *old = [dateFormatter1 dateFromString:[_newlymadeArray objectAtIndex:i]];
    NSLog(@"old %@",old);

    NSString *old1 =[dateFormatter1 stringFromDate:old];

    NSDate *new = [dateFormatter2 dateFromString:old1];
    NSLog(@"new %@",new);

    NSString *string = [dateFormatter2 stringFromDate:new];
    NSLog(@"string %@",string);

    [_convertedBdates addObject:string];

        }

      NSLog(@"_convertedBdates%@",_convertedBdates); 
```

this is what im getting as output

```
 old 2013-03-04 18:30:00 +0000
  new 2013-05-02 18:30:00 +0000
  string 03/05/2013
  old 2013-09-21 18:30:00 +0000
  new (null)
 string (null)
 ] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:     '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'
 *** First throw call stack: 
```

my questions are why old get printed 2013-03-04 instead of 05/03/2013 at the end of first time loop it gets printed 03/05/2013 instead of 05/03/2013 and when loop is running second time it gets null value in new so thats why adding null value in array program get crashed

plz tell me what im doing wrong ?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T06:57:55.480

这是*永远*不合适的：

```
NSString *old1 =[dateFormatter1 stringFromDate:old];
NSDate *new = [dateFormatter2 dateFromString:old1]; 
```

你是说，“使用一个格式化程序格式化一个日期......然后使用另一个格式化程序对其进行解析。”

您已经解析了旧格式的值。您现在需要在新的*格式化*程序中对其进行格式化。

我不是 Objective-C 开发人员，但我怀疑你只是想要：

```
NSDate *date = [dateFormatter1 dateFromString:[_newlymadeArray objectAtIndex:i]];
NSString *string = [dateFormatter2 stringFromDate:date];
[_convertedBdates addObject:string]; 
```

请注意只涉及*一个*日期，但有两个字符串（原始格式和新格式）。

另请注意，无需在循环的每次迭代中创建一对新的格式化程序。在循环*之前*创建它们并重用它们：

```
NSDateFormatter *oldFormatter = [[NSDateFormatter alloc] init];
[oldFormatter setDateFormat:@"MM/dd/yyyy"];
NSDateFormatter *newFormatter = [[NSDateFormatter alloc] init];
[newFormatter setDateFormat:@"dd/MM/yyyy"];

for (int i = 0; i < _newlymadeArray.count; i++) {
    NSDate *date = [oldFormatter dateFromString:[_newlymadeArray objectAtIndex:i]];
    NSString *string = [newFormatter stringFromDate:date];
    [_convertedBdates addObject:string];
} 
```

（当然，您可能*还想*检查`date`循环内是否为 null，以处理错误数据。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:56:58.980

试试这个：

```
NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
[dateFormatter1 setDateFormat:@"MM/dd/yyyy"];
NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
[dateFormatter2 setDateFormat:@"dd/MM/yyyy"];
for( int i=0; i<_newlymadeArray.count; i++){

    NSDate *old = [dateFormatter1 dateFromString:[_newlymadeArray objectAtIndex:i]];
    NSLog(@"old %@",old);

    if (old) {
        NSString *newDateString = [dateFormatter2 stringFromDate:old];
        NSLog(@"new %@",newDateString);
        [_convertedBdates addObject:newDateString];
    }
}
[dateFormatter1 release];
[dateFormatter2 release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:06:12.097

```
NSDateFormatter *fromDateFormatter = [[NSDateFormatter alloc] init];
[fromDateFormatter setDateFormat:@"MM/dd/yyyy"];

NSDateFormatter *toDateFormatter = [[NSDateFormatter alloc] init];
[toDateFormatter setDateFormat:@"dd/MM/yyyy"];

for (NSString *dateString in newlyMadeArray)
{
    NSDate *date = [fromDateFormatter dateFromString:dateString];
    NSString *newDateString = [toDateFormatter stringFromDate:date];
    [_convertedBdates addObject:newDateString];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:00:59.463

首先，您应该将字符串“MM/dd/yyyy”转换为“dd/MM/yyyy”。

```
for( int i=0; i<_newlymadeArray.count; i++){
    NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
    [dateFormatter1 setDateFormat:@"MM/dd/yyyy"];
    NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
    [dateFormatter2 setDateFormat:@"dd/MM/yyyy"];

    NSDate *old = [dateFormatter1 dateFromString:[_newlymadeArray objectAtIndex:i]];
    NSLog(@"old %@",old);

NSArray *arr = [[_newlymadeArray objectAtIndex:i] componentsSeparatedByString:@"/"];
    NSString *old1 = [NSString stringWithFormat:@"%@/%@/%@",[arr objectAtIndex:1],[arr objectAtIndex:0],[arr objectAtIndex:2]];
    NSDate *new = [dateFormatter2 dateFromString:old1];
    NSLog(@"new %@",new);

    NSString *string = [dateFormatter2 stringFromDate:new];
    NSLog(@"string %@",string);

    [_convertedBdates addObject:string];

        } 
```

# python - While 1 vs While True。哪个更pythonic？

> ID：15402884
> 
> 赞同：1
> 
> 时间：2013-03-14T06:47:57.197
> 
> 标签：python, loops, syntax

我已经看到在 Python 中编写相同的两种方式：

```
while 1: 
   # do something here 
```

和

```
while True:
   # do something here 
```

**哪个更pythonic？**

*我已经知道这`True` [已经是一个关键字](https://stackoverflow.com/questions/3815359/while-1-vs-for-whiletrue-why-is-there-a-difference)，[差异](https://stackoverflow.com/questions/8953439/while-true-or-while-1)等，但我在问哪个更pythonic*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:51:51.110

没有实际区别。 `1`并且`True`在 python 中是相等的，这在未来也得到了保证，所以可以使用你最喜欢的外观。

至于哪个是pythonic，我认为完全避免这种循环是pythonic，除非在极少数情况下你确实打算有一个无限循环。

您几乎总是可以使用显式终止条件而不是 break 语句来编写它们，并且*显式优于隐式*。

* * *

两者在标准库中的使用频率大致相同。96 次出现`while True`：

```
/usr/lib/python2.7$ grep -rn "while True:"
_abcoll.py:292:            while True:
_abcoll.py:478:            while True:
_abcoll.py:531:            while True:
argparse.py:1807:            while True:
base64.py:287:    while True:
base64.py:302:    while True:
calendar.py:162:        while True:
chunk.py:28:while True:
chunk.py:34:    while True:
codecs.py:458:        while True:
codecs.py:529:        while True:
ConfigParser.py:478:        while True:
decimal.py:2141:            while True:
decimal.py:2331:            while True:
decimal.py:2681:        while True:
decimal.py:2990:            while True:
decimal.py:3124:        while True:
decimal.py:3205:            while True:
decimal.py:5695:            while True:
difflib.py:1466:        while True:
difflib.py:1556:        while True:
difflib.py:1573:        while True:
difflib.py:1580:        while True:
filecmp.py:67:        while True:
fractions.py:245:        while True:
gzip.py:202:            while True:
gzip.py:208:            while True:
gzip.py:248:                while True:
gzip.py:502:        while True:
httplib.py:273:        while True:
httplib.py:406:        while True:
httplib.py:411:            while True:
httplib.py:572:        while True:
httplib.py:610:        while True:
httplib.py:747:        while True:
locale.py:134:            while True:
mailbox.py:217:            while True:
mailbox.py:534:        while True:
mailbox.py:652:                while True:
mailbox.py:814:        while True:
mailbox.py:850:        while True:
mailbox.py:856:                while True:
mailbox.py:1221:        while True:
mailbox.py:1227:        while True:
mailbox.py:1246:        while True:
mailbox.py:1251:        while True:
mailbox.py:1279:        while True:
mailbox.py:1342:            while True:
mailbox.py:1352:                while True:
mailbox.py:1359:                while True:
mailbox.py:1364:            while True:
mailbox.py:1385:            while True:
mailbox.py:1395:            while True:
mimetypes.py:243:            while True:
pdb.py:1312:    while True:
pickletools.py:1841:    while True:
posixpath.py:299:    while True:
pty.py:146:    while True:
pyclbr.py:196:                    while True:
pyclbr.py:284:    while True:
pyclbr.py:308:    while True:
py_compile.py:146:        while True:
pydoc.py:537:        while True:
pydoc.py:1762:        while True:
_pyio.py:559:        while True:
_pyio.py:953:            while True:
_pyio.py:1013:            while True:
_pyio.py:1896:        while True:
sets.py:356:            while True:
shlex.py:123:        while True:
socket.py:349:            while True:
socket.py:372:            while True:
socket.py:427:                while True:
socket.py:445:            while True:
socket.py:474:            while True:
socket.py:514:        while True:
SocketServer.py:153:    while True:
ssl.py:196:            while True:
subprocess.py:476:    while True:
sysconfig.py:406:    while True:
tarfile.py:529:            while True:
tarfile.py:534:            while True:
tarfile.py:566:            while True:
tarfile.py:836:            while True:
tarfile.py:859:        while True:
tarfile.py:902:        while True:
tarfile.py:1168:            while True:
tarfile.py:1384:        while True:
tarfile.py:1579:                while True:
tarfile.py:2317:        while True:
tarfile.py:2379:        while True:
tarfile.py:2508:        while True:
threading.py:255:                while True:
uu.py:105:        while True:
_weakrefset.py:97:        while True:
zipfile.py:579:        while True: 
```

和 116 次出现`while 1`。请注意，较旧的代码更有可能具有这种形式，因为`bool`在早期的 python 中并不总是存在。

```
/usr/lib/python2.7$ grep -rn "while 1:" *.py
aifc.py:309:        while 1:
aifc.py:962:        while 1:
audiodev.py:252:    while 1:
binhex.py:257:    while 1:
binhex.py:265:    while 1:
binhex.py:295:            while 1:
binhex.py:377:        while 1:
binhex.py:481:    while 1:
binhex.py:492:        while 1:
cgi.py:251:        while 1:
cgi.py:683:        while 1:
cgi.py:696:        while 1:
cgi.py:729:        while 1:
code.py:227:        while 1:
compileall.py:141:            while 1:
DocXMLRPCServer.py:41:        while 1:
fpformat.py:141:        while 1:
ftplib.py:199:            while 1:
ftplib.py:407:        while 1:
ftplib.py:431:        while 1:
ftplib.py:462:        while 1:
ftplib.py:484:        while 1:
ftplib.py:691:                while 1:
ftplib.py:709:                while 1:
ftplib.py:731:                while 1:
ftplib.py:747:                while 1:
ftplib.py:904:        while 1:
getpass.py:97:    while 1:
heapq.py:346:    while 1:
heapq.py:348:            while 1:
imaplib.py:864:        while 1:
imaplib.py:987:        while 1:
_LWPCookieJar.py:111:            while 1:
mailbox.py:2021:        while 1:
mailbox.py:2039:        while 1:
mailbox.py:2050:        while 1:
mailbox.py:2109:        while 1:
mailbox.py:2117:        while 1:
mailbox.py:2164:        while 1:
mailbox.py:2172:        while 1:
mailcap.py:63:    while 1:
markupbase.py:269:        while 1:
markupbase.py:323:        while 1:
markupbase.py:345:            while 1:
markupbase.py:358:        while 1:
mhlib.py:305:        while 1:
mhlib.py:616:            while 1:
mhlib.py:915:    while 1:
mhlib.py:920:            while 1:
mimetools.py:240:    while 1:
mimetools.py:247:    while 1:
mimetypes.py:213:        while 1:
mimify.py:86:        while 1:
mimify.py:98:    while 1:
mimify.py:111:    while 1:
mimify.py:135:    while 1:
mimify.py:164:    while 1:
mimify.py:241:    while 1:
mimify.py:266:    while 1:
mimify.py:292:    while 1:
mimify.py:315:    while 1:
mimify.py:390:            while 1:
mimify.py:407:        while 1:
_MozillaCookieJar.py:58:            while 1:
multifile.py:15:while 1:
multifile.py:114:        while 1:
netrc.py:38:        while 1:
netrc.py:58:                while 1:
netrc.py:73:            while 1:
nntplib.py:239:            while 1:
nntplib.py:559:        while 1:
nntplib.py:583:        while 1:
os.py:545:            while 1:
pdb.py:40:    while 1:
pickle.py:856:            while 1:
platform.py:166:    while 1:
platform.py:966:    while 1:
quopri.py:70:    while 1:
quopri.py:128:    while 1:
random.py:394:        while 1:
random.py:464:        while 1:
random.py:517:            while 1:
random.py:540:            while 1:
re.py:310:        while 1:
rfc822.py:148:        while 1:
shlex.py:287:    while 1:
shutil.py:48:    while 1:
site.py:424:        while 1:
smtplib.py:352:        while 1:
smtplib.py:847:    while 1:
sre_parse.py:307:    while 1:
sre_parse.py:325:    while 1:
sre_parse.py:393:    while 1:
sre_parse.py:406:                while 1:
sre_parse.py:425:            while 1:
sre_parse.py:536:                        while 1:
sre_parse.py:549:                        while 1:
sre_parse.py:573:                    while 1:
sre_parse.py:600:                    while 1:
sre_parse.py:640:                while 1:
sre_parse.py:708:    while 1:
sre_parse.py:718:                    while 1:
telnetlib.py:587:        while 1:
telnetlib.py:608:        while 1:
telnetlib.py:616:        while 1:
telnetlib.py:732:        while 1:
tokenize.py:286:    while 1:                                   # loop over lines in stream
urllib.py:266:                while 1:
urlparse.py:282:    while 1:
wave.py:135:        while 1:
weakref.py:153:        while 1:
weakref.py:359:        while 1:
xdrlib.py:214:        while 1:
xmllib.py:187:        while 1:
xmlrpclib.py:1461:        while 1:
zipfile.py:1095:            while 1: 
```

# ios - GPUImageMovieWriter starting new recording

> ID：15402885
> 
> 赞同：0
> 
> 时间：2013-03-14T06:48:03.467
> 
> 标签：ios, objective-c, avassetwriter, gpuimage

Can i reuse an existing `GPUImageMovieWriter` (after calling `finishRecording`) or is there a method to pause and resume the recording?

I get error if i call `startRecoding` after a `finishRecording`.

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: '*** -[AVAssetWriter addInput:] Cannot call method when status is 2' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T21:03:27.293

调用后不能调用`startRecording()`同一个 movieWriter 实例`finishRecording()`。

`finishRecording()`将视频的完成块写入文件，因此添加到视频文件的所有后续帧无论如何都是无用的。如果您想要实现的是暂停录制一段时间并在暂停后再次在末尾附加视频，您可能应该创建一个不录制的“暂停”状态，而只需测量暂停的时间量，然后再次恢复录制时使用调整后的帧时间。

干杯! 维杰

# wamp - 发送电子邮件需要设置哪些 php.ini 参数？

> ID：15402887
> 
> 赞同：8
> 
> 时间：2013-03-14T06:48:09.593
> 
> 标签：wamp, php

我想从我的 PHP 代码发送电子邮件，但我收到了警告消息。那么要设置的 php.ini 参数是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T06:53:17.240

检查/更改您的 PHP 邮件配置：

打开您的 php.ini 文件（如果您不知道它在哪里，请参见下文） 搜索读取 [mail function] 添加/更改邮件服务器的详细信息的行。这可以是本地邮件服务器或 ISP 的邮件服务器。保存/关闭 php.ini 文件 重新启动您的网络服务器

首次打开 php.ini 文件时邮件设置的示例：

```
[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25

; For Win32 only.
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
;sendmail_path = 
```

附加信息在回显中，`phpinfo()`您可以查看您的 PHP 配置详细信息。您可以通过创建一个包含以下行的 .php 文件来做到这一点：`<?php phpinfo(); ?>`. 当您在浏览器中运行它时，您将看到 PHP 配置变量的完整列表。只需搜索包含 php.ini 的行并`sendmail_path`查看您需要使用的值。

另一个想法是您可以`ini_set()`像这样正确配置您的邮件设置

如果您的邮件脚本继续失败，请将以下代码添加到您的电子邮件脚本的顶部。

```
// Please specify your Mail Server - Example: mail.example.com.
ini_set("SMTP","mail.example.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'example@YourDomain.com'); 
```

# vim - Is it possible to find the unicode string in Vim of Windows?

> ID：15402891
> 
> 赞同：0
> 
> 时间：2013-03-14T06:48:19.807
> 
> 标签：vim

I found some info about the grep(findstr) in Vim of Windows can't support unicode.

Just wondering if any other way to find the unicode string in Vim of Windows???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:39:32.917

我在 Windows 上使用[GnuWin 端口`grep`](http://gnuwin32.sourceforge.net/)，一个简短的测试表明它能够在文本文件中找到 UTF-8 字符串。

或者，您可以使用内置的`:vimgrep`. 它比较慢，因为它将每个文件读入 Vim 缓冲区，但您可以使用 Vim 的完整正则表达式语法，它利用`'fileencodings'`Vim 内置的检测功能。

# c#-4.0 - 如何使用查询选择 Access Database 2007 中的所有表

> ID：15402892
> 
> 赞同：0
> 
> 时间：2013-03-14T06:48:20.573
> 
> 标签：c#-4.0, ms-access-2007

我在 C#.net 中工作。我想使用 Query 选择 Access 数据库中的所有表名。谁能告诉...如何使用查询从访问数据库中选择所有表名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:59:37.973

像下面这样尝试它会帮助你...

```
string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\myAccess2007file.accdb;Persist Security Info=False;";
OleDbConnection conn = new OleDbConnection(connectionString);
conn.Open();
DataTable tables = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables,new object[]{null,null,null,"TABLE"});
conn.Close(); 
```

现在数据表“表”具有所有访问表信息..

# tsql - Tsql，联合改变结果顺序，联合全部不

> ID：15402899
> 
> 赞同：2
> 
> 时间：2013-03-14T06:48:34.957
> 
> 标签：tsql, sql-order-by, union, union-all

我知道`UNION`删除重复项，但即使没有重复项，它也会更改结果顺序。

我有两个 select 语句，在任何地方都没有 order by 语句

我想联合他们有或没有（全部）

IE

```
SELECT A 
UNION (all) 
SELECT B 
```

“选择B”实际上什么都不包含，不会返回任何条目

如果我使用“Select A union Select B”，结果的顺序与“Select A”不同

如果我使用：

```
SELECT A 
UNION ALL 
SELECT B 
```

结果的顺序与“Select A”本身相同，“Select A”中根本没有重复。

为什么是这样？这是不可预测的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T07:15:09.160

从 SQL 查询中获得特定顺序的结果的*唯一*`ORDER BY`方法是使用子句。其他任何事情都只是依赖于巧合和您发出查询时服务器的特定（暂时）状态。

因此，如果您想要/需要特定订单，请使用`ORDER BY`.

* * *

至于*为什么*它会改变结果的顺序——首先，`UNION`（没有`ALL`）保证从结果中删除所有重复项——不仅仅是来自不同查询的重复项——所以如果第一个查询返回重复的行而第二个查询不返回任何行，`UNION`仍然必须消除它们。

确定一袋结果中是否有重复项的一种常见、简单的方法是对这些结果进行排序（以系统最方便的任何排序顺序） - 这样，重复项最终彼此相邻，因此您可以只需遍历这些排序的结果和`if(results[index] == results[index-1]) skip;`.

因此，您通常会发现`UNION`（不带`ALL`）查询的结果已按任意顺序排序。但是，为了再次强调原点，没有定义应用的排序，当然也不应该依赖 - 软件的任何补丁、索引或统计数据的更改都可能导致系统在下一次选择不同的排序顺序执行查询的时间 - 除非有`ORDER BY`子句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T07:15:45.573

One of the most important points to understand about SQL is that a table has no guaranteed order, because a table is supposed to represent a set (or multiset if it has duplicates), and a set has no order. This means that **when you query a table without specifying an ORDER BY clause, the query returns a table result, and SQL Server is free to return the rows in the output in any order**. If the results happen to be ordered, it may be due to optimization reasons. The point I'm trying to make is that any order of the rows in the output is considered valid, and no specific order is guaranteed. The only way for you to guarantee that the rows in the result are sorted is to explicitly specify an ORDER BY clause.

# jquery-plugins - 什么是“插件创作”？

> ID：15402903
> 
> 赞同：1
> 
> 时间：2013-03-14T06:48:41.080
> 
> 标签：jquery-plugins, plugins, naming-conventions, naming, conventions

我第一次在 jQuery 文档中看到**插件创作术语：http:** [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

什么是“插件创作”？与*“插件开发”*、*“插件教程”*、*“插件架构”*有什么区别？

在[http://docs.jquery.com/Talk:Plugins/Authoring](http://docs.jquery.com/Talk:Plugins/Authoring)中写道：

*最好将此页面重命名为“插件开发”或使用另一个常见的开发词而不是“创作”。我对导航也有同样的感觉。“创作”是一种创造性的选择，但并不是真正的首选。我是唯一一个？*

*我倾向于同意*

*是的，我同意“插件开发”可能是“创作”的更好选择。你认为它现在引起了一些混乱吗？在我看来，这将是改变的最大原因。*

# php - MySQL 查询以下内容应该是什么？

> ID：15402904
> 
> 赞同：1
> 
> 时间：2013-03-14T06:48:42.113
> 
> 标签：php, mysql

我希望在仪表板上显示即将到来的生日记录。我有 MySQL 表“联系人”

有字段`dob (DATE YYYY-MM-DD)`。我要检索生日即将到来的所有记录

在接下来的 15 天内。例如：生日是 1986-03-24 它应该是结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T06:51:22.620

看看 MySQL`DATE_ADD`和`INTERVAL`.

通过使用以下两者，您可以获得未来 15 天的记录。

```
SELECT * FROM user WHERE dob BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 15 DAY) 
```

用于出生率比较。

```
MAKEDATE(YEAR(NOW() + INTERVAL 15 DAY), DAYOFYEAR(birthday)) BETWEEN CURDATE() AND CURDATE() + INTERVAL 15 DAY 
```

*   [**SQLFiddle 演示**](http://www.sqlfiddle.com/#!2/28d77/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:50:54.523

您必须将 mysql 查询中的日期用作：

```
 SELECT FROM table_name WHERE timestamp_row BETWEEN 
    '2011-01-01 00:00:00' AND '2011-01-02 23:59:59'; 
```

您正在做用户的 B'Day 日期，因此希望这能起到格式化和选择日期的作用

```
select id from my_table
 where
 timestamp < date_format(date_add(CURRENT_TIMESTAMP(), interval 1 day),
         '%Y%m%d000000' ) AND timestamp >=  date_format(CURRENT_TIMESTAMP(),
         '%Y%m%d000000') 
```

这种方式也可以

```
SELECT * FROM person WHERE IF  ( MONTH( NOW() ) < 12, 
     MONTH( birthdate ) = MONTH( NOW() ) + 1, MONTH( birthdate ) = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:23:42.003

您可以使用此查询。试用

```
SELECT * FROM TableName
WHERE REPLACE(BirthDate, DATEPART(YEAR, BirthDate), DATEPART(YEAR, GETDATE())) BETWEEN GETDATE() AND DATEADD(DAY, 15, GETDATE()) 
```

# android - 绝对 latout margin 对 android 2.2 有不同的影响

> ID：15402905
> 
> 赞同：0
> 
> 时间：2013-03-14T06:48:43.150
> 
> 标签：android, android-layout

我为我的 android 应用程序设计了一个 xml 布局，我使用布局边距顶部和左侧将一些东西放在一个特殊的地方，在 android 2.3 及更高版本上一切都很好，所有元素都在自己的位置，但在 adroid 2.2 (fedora) 元素上是' t 在自己的地方（有时更高，有时更低）这是我的 xml 布局有什么问题

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/carbg"
    android:layout_width="2000dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="-400dp" android:layout_alignParentBottom="true" android:layout_alignParentRight="true">

<ImageView
    android:contentDescription="@string/app_name"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/SplashImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="240dp"
    android:src="@drawable/cars" 
    android:layout_marginLeft="180dp"
    android:adjustViewBounds="false" android:scaleType="center"/>

<ImageView
    android:contentDescription="@string/app_name"
    android:id="@+id/imageView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="397dp"
    android:layout_marginTop="290dp"
    android:src="@drawable/driver1" android:visibility="visible" android:scaleType="center"/>

<ImageView
    android:contentDescription="@string/app_name"
    android:id="@+id/imageView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/driver2" android:layout_marginLeft="355dp" android:layout_marginTop="290dp" android:visibility="invisible" android:scaleType="center"/>

<ImageView
    android:contentDescription="@string/app_name"
    android:id="@+id/splashsigns"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/splashsign"
    android:visibility="invisible"
    android:layout_marginLeft="320dp"
     android:layout_marginTop="245dp" android:scaleType="center"/>

<ImageView
    android:contentDescription="@string/app_name"
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="630dp"
    android:layout_marginTop="264dp"
    android:src="@drawable/danger"
    android:visibility="invisible" android:layout_marginRight="5dp" android:scaleType="center"/>

 <ImageView
     android:contentDescription="@string/app_name"
     android:id="@+id/imageView2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:src="@drawable/wheel" android:layout_marginTop="363dp" android:layout_marginLeft="535dp" android:scaleType="center"/>

 <ImageView
     android:contentDescription="@string/app_name"
     android:id="@+id/imageView1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:src="@drawable/wheel" android:layout_marginTop="361dp" android:layout_marginLeft="206dp" android:scaleType="center"/> 
```

我的问题出在所有图像视图上 ![在此处输入图像描述](../Images/1653b3836ebd52c6c2a3999b4cb9198f.png)

问题是android icone

![在此处输入图像描述](../Images/9cfbf1397bfe99a357e9b0f8f0b9c40f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:55:11.913

你必须尝试不同的选项，`android:scaleType`它会帮助你解决这个问题，我用`android:scaleType="matrix"`你尝试不同的方法解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:57:43.317

试试这些：

```
<ImageView
android:contentDescription="@string/app_name"
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/SplashImageView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginTop="240dp"
android:src="@drawable/cars" 
android:layout_marginLeft="180dp"
android:adjustViewBounds="false" android:scaleType="fitCenter"/> 
```

# sql - 子查询在 MS SQL 中返回超过 1 个值

> ID：15402912
> 
> 赞同：2
> 
> 时间：2013-03-14T06:49:23.673
> 
> 标签：sql, sql-server, sql-server-2008

在 MS Sql 中。

```
SELECT a.SellerID, 
       SUM(TransactionFee) as TransactionFees,
SUM(Quantity*a.PriceItem) as TransactionValue,
COUNT(*) as OrdersWithTransactionFees, 
            SUM(Quantity) as Qty,
            (SELECT SUM(a.Quantity*a.PriceItem) as WholeMonthTransactionValue 
            from BuyProductDetails where SellerID = a.SellerID) as aa
FROM BuyProductDetails as a
WHERE MONTH(a.OrderDate)=3
AND YEAR(a.OrderDate)=2013
AND TransactionFee IS NOT NULL
GROUP BY a.SellerID 
```

我有上面的查询......它似乎无法运行。

基本上，我有这张表**BuyProductDetails**存储来自不同卖家的所有订单。

有些订单会有 TransactionFee。

现在，我需要计算这些带有 TransactionFee 的订单的总销售额，以及这些卖家的总销售额，包括那些没有 TransactionFee 的订单。

结果集应具有以下字段：

1.  卖家ID
2.  交易费用总额
3.  总销售额
4.  有交易费的订单数量
5.  订购数量
6.  该卖家的总销售额

但是当我运行这个 sql 时，它返回以下错误：

```
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. 
```

任何帮助深表感谢。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:02:46.933

尝试过这样的事情吗？

```
 SELECT a.SellerID, 
    SUM(TransactionFee) as TransactionFees,
    SUM(Quantity*a.PriceItem) as TransactionValue,
    COUNT(*) as OrdersWithTransactionFees, 
    SUM(Quantity) as Qty,
    MIN(a.WholeMonthTransactionValue) as WholeMonthTransactionValue
  FROM BuyProductDetails as a,
(SELECT b.SellerID, 
        SUM(b.Quantity*b.PriceItem) as WholeMonthTransactionValue,
        MONTH(b.OrderDate),
        YEAR(b.OrderDate)
 FROM BuyProductDetails b 
 GROUP BY b.SellerID,
    MONTH(b.OrderDate) as MonthID,
    YEAR(b.OrderDate) as YearID) as aa
    WHERE MONTH(a.OrderDate)=3
      AND YEAR(a.OrderDate)=2013
      AND TransactionFee IS NOT NULL
      AND a.SellerID = aa.SellerID
      AND MONTH(a.OrderDate)=aa.MonthID
      AND YEAR(a.OrderDate) = aa.YearID
    GROUP BY a.SellerID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:43:53.657

[您可以在CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)表达式中使用更有效的选项

```
SELECT a.SellerID, 
       SUM(CASE WHEN TransactionFee IS NOT NULL THEN TransactionFee END) AS TransactionFees,
       SUM(CASE WHEN TransactionFee IS NOT NULL THEN Quantity * PriceItem END) AS TransactionValue,
       COUNT(CASE WHEN TransactionFee IS NOT NULL THEN 1 END) as OrdersWithTransactionFees, 
       SUM(CASE WHEN TransactionFee IS NOT NULL THEN Quantity END) as Qty,
       SUM(Quantity * PriceItem) AS WholeMonthTransactionValue         
FROM BuyProductDetails AS a
WHERE MONTH(a.OrderDate) = 3 AND YEAR(a.OrderDate) = 2013
GROUP BY a.SellerID 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/2bdb9/1)上的演示[](http://sqlfiddle.com/#!3/2bdb9/1)

 ****或者只是在子查询中添加正确的别名**

```
SELECT a.SellerID, 
       SUM(TransactionFee) as TransactionFees,
       SUM(Quantity*a.PriceItem) as TransactionValue,
       COUNT(*) as OrdersWithTransactionFees, 
       SUM(Quantity) as Qty,
       (SELECT SUM(d.Quantity * d.PriceItem)
        FROM BuyProductDetails d
        WHERE d.SellerID = a.SellerID) as WholeMonthTransactionValue 
FROM BuyProductDetails as a
WHERE MONTH(a.OrderDate)=3
AND YEAR(a.OrderDate)=2013
AND TransactionFee IS NOT NULL
GROUP BY a.SellerID 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/2bdb9/3)上的演示[](http://sqlfiddle.com/#!3/2bdb9/3)**

# python - 如何在 Django 模板中进行日期检查

> ID：15402914
> 
> 赞同：0
> 
> 时间：2013-03-14T06:49:25.373
> 
> 标签：python, sql, django

我想在每个月的第 10 天之后隐藏一些数据。如何实施此检查？

我不想在视图中做任何功能。并且在 Templates 中应该有一些在网站上公开使用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:08:00.597

您可以在模板中执行此操作

```
{% if your_date.day < 10 %}
    {# show the data #}
{% else %}
    {# hide data #}
{% endif %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T07:00:36.737

```
{% if date.day <= 10 %}
    //show data
{% else %}
    //no data
{% endif %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:20:47.647

这实际上与这个问题完全相同： [在 Django 模板 Django 中获取特定日期](https://stackoverflow.com/questions/15401591/get-particular-date-in-django-template-django)

我在那个中完全回答了。

# javascript - ExtJS 视口一个项目访问另一个项目

> ID：15402918
> 
> 赞同：0
> 
> 时间：2013-03-14T06:49:37.150
> 
> 标签：javascript, extjs

我在 ExtJS 中创建了一个具有多种布局（西、中、北）的视口。其中之一是我添加了点击处理程序的网格。此单击应该以其中一种布局打开 HTML 或 PHP 文件，但我不确定如何从西部的单击处理程序访问中心的项目。

```
 Ext.create('Ext.Viewport', {
        layout: {
            type: 'border',
            padding: 5
        },
        defaults: {
            split: true
        },
        items: [{
            region: 'north',
            border:false,
            collapsible: false,
            resizable:false,
            title: 'North',
            split: true,
            height: 30,
            html: 'north'
        },{
            region: 'west',
            collapsible: true,
            title: 'Navigation',
            split: true,
            width: '10%',
            xtype: 'gridpanel',
            itemid:'projectgrid',
            hideHeaders: true,
            columns: [{header: 'NID', dataIndex: 'NavName', flex: 1}],
            store: navStore,
            listeners: {
                itemclick: function(dv, record, item, index, e) {
                    alert(record.get('NavPage'));
                }
            }

        },{
            region: 'center',
            layout: 'border',
            border: false,
            id: 'renderArea',
            items: [{
                region: 'center',
                html: 'center center',
                title: 'Center',
                items: [cw = Ext.create('Ext.Window', {
                    xtype: 'window',
                    closable: false,
                    minimizable: true,
                    title: 'Constrained Window',
                    height: 200,
                    width: 400,
                    constrain: true,
                    html: 'I am in a Container',
                    itemId: 'center-window',
                    minimize: function() {
                        this.floatParent.down('button#toggleCw').toggle();
                    }
                })]
            }]
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:07:36.910

如果您为要访问的组件提供 itemId `foo`，您可以执行类似的操作，向上导航到视口，然后向下导航以找到合适的视口子项。

`dv.up('viewport').down('#foo')`

# meteor - 后台任务未与 Meteor 中的任何客户端连接

> ID：15402920
> 
> 赞同：19
> 
> 时间：2013-03-14T06:49:51.510
> 
> 标签：meteor

我想在 Meteor 应用程序的后台运行一些独立于客户端的常规任务（比如抓取一些页面）。所以它们不应该在任何客户端线程中，但是一旦它们完成，我想用信息更新所有客户端。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T08:39:00.940

在您的服务器端代码上运行它们。如果你的意思是每天定时任务或其他东西：

您可以将 cron 作业与 Tom Coleman 的 cron 包一起使用：[https](https://github.com/tmeasday/meteor-cron) ://github.com/tmeasday/meteor-cron 。

您需要先安装[陨石包管理器](https://github.com/oortcloud/meteorite)：`npm install meteorite -g`然后在项目目录中安装 cron 包`mrt add cron-tick`

**服务器js**

```
var MyCron = new Cron();

// this job will happen every day (60 seconds * 60 * 24)
MyCron.addJob(60*60*24, function() {
    //Scrape your stuff

    //Update your collections
}); 
```

一旦您运行更新/插入/编辑，它们就会被推送到所有客户端。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-04T13:06:01.470

要以允许任意外部进程更新 Meteor 客户端的方式执行此操作，请使用与 Meteor 关联的 DDP 协议。您的服务器进程可以写入 DDP 通道，并且当他们这样做时，您的客户端将更新。查看这篇文章的示例和用例，可能与您的类似：

[使用节点 ddp-client 从节点插入流星集合](https://stackoverflow.com/questions/14639700/)

该协议相当简单，该帖子显示了一个 node.js 进程写入实时更新客户端的 Mongo 集合的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:04:26.797

您可以尝试在服务器上调用 a [`Meteor.setInterval`](http://docs.meteor.com/#meteor_setinterval)（可能在 中`Meteor.startup`）。这应该可行，尽管它可能不如 cron 解决方案灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T20:33:02.460

转到[http://atmospherejs.com](http://atmospherejs.com)并搜索[cron](https://atmospherejs.com/packages/cron)

我发现最好的一个是[percolate:synced-cron](https://atmospherejs.com/percolate/synced-cron)

**安装**

`meteor add percolate:synced-cron`

**基本**

```
SyncedCron.add({
  name: 'Crunch some important numbers for the marketing department',
  schedule: function(parser) {
    // parser is a later.parse object
    return parser.text('every 2 hours');
  },
  job: function() {
    var numbersCrunched = CrushSomeNumbers();
    return numbersCrunched;
  }
});

SyncedCron.start(); 
```

**先进的**

[查看他们的文档](https://atmospherejs.com/percolate/synced-cron)

# c# - 关联 IComMethodEvents

> ID：15402925
> 
> 赞同：10
> 
> 时间：2013-03-14T06:50:24.353
> 
> 标签：c#, c++, delphi, monitoring, com+

在实现[IComMethodEvents](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679467%28v=vs.85%29.aspx)时，您会得到三个事件。

1.  方法调用
2.  方法异常
3.  OnMethodReturn

我试图做的目标是记录 COM+ 组件中每个方法的调用时间。

可以通过在[COMSVCSEVENTINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681731%28v=vs.85%29.aspx)`lTime`结构中使用和检索事件的时间，因此通过在两者中记录该时间，我应该能够计算调用时间，但我如何确定这两个事件是相关的。`lMicroTime``OnMethodCall``OnMethodReturn`

通过测试它看起来我应该能够使用即时（JIT）激活对象`oid`。

这样做有什么问题还是有其他方法？

一个可能的问题是，我看到`oid`它经常被重用，所以如果事件由于某种原因被无序触发，实现关联可能会有点困难。

**更新1：**

进一步的测试表明，这`oid`在多用户场景中是不够的。同时使用相同的对象，因此必须至少使用`oid`和来完成相关性`original caller`。一个后续问题是：如何从 COM+ 事件订阅者那里获取原始调用者？

**更新 2：**

刚刚找到[IComMethod2Events](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687091%28v=vs.85%29.aspx)。不同之处在于事件具有执行调用的线程的标识符。在测试中看起来很有希望，我无法想象相关性可能会失败的情况。COM+ 组件的线程模型是`Any Apartment`.

**更新 3**

在这篇文章中，使用[了创建 COM+ PerfMon 计数器来监视 COM+ 数据](http://msdn.microsoft.com/en-us/library/aa289138%28VS.71%29.aspx) `oid`。我认为这在多线程公寓中是不够的。

[注意：我最终将在 Delphi 中实现这一点，所以我添加了 Delphi 标记。我还添加了 C# 标记，因为用于实现接口的语言很可能根本不重要。更新：暂时添加 c++ 标签只是为了引起以前实际使用过这些东西的人的注意。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:14:48.580

> ...如果由于某种原因事件被无序触发...

他们从不这样做。COM+ 系统事件发布者使用 COM+ 事件服务触发这些事件。从事件发布者的角度来看，事件的调用是同步的。当发布者触发一个事件时，它不会继续下一个事件，直到所有订阅者完成对触发事件的处理。很自然，`OnMethodReturn/OnMethodException`事件在匹配事件之前不会发布`OnMethodCall`。我记得在 COM+ 事件中阅读过有关竞争条件/中断订阅的 KB。据我所知，所有这些错误都已在 Windows 2000 的各种 Service Pack 中得到解决。不过，诚然，我不会尝试在这方面保持最新状态。

在实现时`IComMethod2Events`，您订阅与 for 相同的临时订阅`IComMethodEvents`。所以触发事件的顺序也是一样的。

> ...因此必须使用至少`oid`和`original caller`...进行相关性

在这一点上，我真的不确定您是否正确解释了测试结果。你是如何测试的，究竟是什么？

`oid`应该已经封装了所有需要的信息，即使在具有 JIT 和池的“多客户端”场景中也是如此。上次我实现了这样的事件监听器（已经有一段时间了），依靠`oid`工作正常。不过，我的环境中的大多数组件都是用 VB6 编写的（因此，住在 STA 中）。然而，即使使用 STA，您也可以在单个线程的不同执行阶段进行多次调用。由于 COM+ STA 线程池中的线程数有上限，您可能会遇到以下情况：调用 A 在特定线程上开始，调用 B 在同一线程上开始，调用 B 返回，调用 A 返回。我不记得在`oid`没有“有关呼叫者的一些附加信息”的情况下跟踪呼叫有任何问题。

您考虑的实施理念大体上是规范的。`COM+ spy`平台 SDK 附带的示例使用`oid`参数来跟踪单个调用。您可以在 中找到应用程序的源代码`<Path to SDK samples>\Samples\com\administration\spy`。该示例已经使用此实现有一段时间了（至少从 Windows 2003 开始​​）。而今天是 MTA 甚至 COM+ 引入之后的一个世纪。如果有缺陷，样本将在此时更新。希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:25:12.443

MSDN 链接“ [Creating COM+ PerfMon Counters to Monitor COM+ Data](http://msdn.microsoft.com/en-us/library/aa289138%28v=vs.71%29.aspx) ”似乎与您的目标差不多（尽管我认为在托管 C++ 中）。

相关的部分是这个，我猜：

```
void IComMethodEvents.OnMethodCall(ref COMSVCSEVENTINFO ei, ulong
    lObjID, ref Guid gClsID, ref Guid gIID, uint nIndex)
{
    //Make sure that monitoring is enabled and that our performance
    //counter has been initialized.
    if (Monitor && pcMethodDuration != null)
    {
    try
    {                    
        //We are going to store the initial value in a Sorted List 
        //collection. To do this we are going to need a key that
        //represents this call.
        string strKey = lObjID.ToString() + gClsID.ToString() + 
            gIID.ToString() + nIndex.ToString(); 
```

这可能是您思考 oid（在他们的示例中为 lObjID）的解决方案。不知道这是否涵盖了您的多用户场景，您必须尝试一下。该页面包含有关该主题的很多详细信息，因此希望您能够弄清楚。祝你好运。

# ios - UITouchUpInside 不调用委托方法

> ID：15402927
> 
> 赞同：0
> 
> 时间：2013-03-14T06:50:30.407
> 
> 标签：ios, ios5, ios4

我有一个 MYView 类（UIView 的子类），我将 MyView 作为子视图添加到我当前的 ViewController 中。MyView 有一个按钮，如果触发了 TouchUpInsideEvent，它会调用委托方法。我的问题是，当我点击按钮时，控件转到委托方法，但是如果我触发 TouchUpinsideEvent prgramaticaaly，它不会调用委托方法。这是我的代码：

我的视图.h

```
@protocol MyViewDelegate;
@interface MyView : UIView
@property(nonatomic,assign)id<MyViewDelegate> delegate;

@protocol MyViewDelegate <NSObject>
- (void)selctedOption:(MyView *)slideView withOption:(UILabel *)option withIndex:   (NSInteger *)labelIndex;

@end 
```

我的视图.m

```
toggleButton = [UIButton buttonWithType:UIButtonTypeCustom];
[toggleButton setTitle:@"" forState:UIControlStateNormal];

//adding target works fine it goes to the finishedDraggingVertical:withEvent method and from there I am calling the delegate method

[toggleButton addTarget:self action:@selector(finishedDraggingVertical:withEvent:)
       forControlEvents:UIControlEventTouchUpInside];

toggleButton.frame = CGRectMake(frame.origin.x, frame.origin.y, frame.size.width, height);

toggleButton.backgroundColor=[UIColor colorWithRed:0.1 green:1.1 blue:0.3 alpha:0.2];
[toggleButton.layer setBorderWidth:10.0];
[toggleButton.layer setBorderColor:[[UIColor lightGrayColor] CGColor]];
toggleButton.layer.cornerRadius=10.0;

[self addSubview:toggleButton];
 **//But If I fire the event programatically this doesn't work it goes to finishedDraggingVertical:withEvent but from there it does not go to the delegate method.**
 [toggleButton sendActionsForControlEvents:UIControlEventTouchUpInside] 
```

MyViewController.h

```
@interface MyViewController : UIViewController  <MyViewDelegate> 
```

我的视图控制器.m

//这里我添加myView并实现委托方法

```
- (void)viewDidLoad
{
 [super viewDidLoad];
 MyView *myiew1=[[MyView alloc]init];
 myiew1.delegate=self;

[self.view addSubview:slideView1];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:38:03.983

我知道这是一种解决方法，但是您是否尝试过以下问题的公认答案：

[UIControl：sendActionsForControlEvents 省略 UIEvent](https://stackoverflow.com/questions/11382816/uicontrol-sendactionsforcontrolevents-omits-uievent)

此外，检查您检索的操作是否`[self actionsForTarget:target forControlEvent:controlEvent]`与您之前在代码中设置的操作一致。如果没有，那就有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:43:59.587

发生这种情况可能是因为您在调用后设置了委托：

```
 [toggleButton sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

我假设您在视图的`init`or`initWithFrame`方法中添加了 toggleButton，并且上面的代码行也在同一行中。

`delegate`如果您在内部的委托方法调用之前打印出对象`finishedDraggingVertical:withEvent`，您可能会得到`Nil`.

# php - PHP & CSV：删除或忽略以不同长度行的字符开头的行

> ID：15402929
> 
> 赞同：0
> 
> 时间：2013-03-14T06:50:35.990
> 
> 标签：php, csv

我有 CSV 文件，它在第一列中使用键，并且每个都有不同的行长。

在文件的顶部，标题行以“M”开头，然后以“C”开头的行，然后是“A”，像这样在整个文件中交替出现。

```
M   P395, 177   177, 13/03/13, , , , , , , FALSE,   1904.2, , , , , , , , , , , , , , 
C   QTM0039326, X6  100013424,  Example, , Example  WA  6754    AU, FALSE,  TRUE    FALSE, N,   FALSE, FALSE, FALSE Example Example Brisbane,   Brisbane City   QLD 4000    AU, , , , , , Example   TRACKADV
A   0.1, , , FALSE  FALSE   0, , , , , , , , , , , , , , , , , , , , , 
C   QTM0039226  7021130 X6  100013427,  Example, , Example  NSW 2795    AU  427181931   FALSE,  TRUE    FALSE, N    0, FALSE, FALSE, FALSE  Example Example, , Brisbane QLD 4000    AU  Example Example Example, , Example  QLD 4211    AU, Example TRACKADV
A   4.1 0   0   0, ARTICLE CONTAINS CONSUMER GOOD(S)    FALSE   FALSE   0   0,  FALSE   FALSE   FALSE   FALSE   FALSE, FALSE, , , , , , , , , , , , , , , , 
C   QTM0039214  7021130 X6  100013440   Example, Example, , Example QLD 4502    AU  32858429    FALSE,  TRUE    FALSE, N    0, FALSE, FALSE, FALSE  Example Example, , Brisbane QLD 4000    AU  Example Example Example, , Example  QLD 4211    AU, Example TRACKADV
A   1.35    0   0   0, ARTICLE CONTAINS CONSUMER GOOD(S)    FALSE   FALSE   0   0,  FALSE   FALSE   FALSE   FALSE   FALSE, FALSE, , , , , , , , , , , , , , , , 
C   QTM0039296  7021130 X6  100013349, Metro Auto Spares    Example, , Example  TAS 7310    AU  427236691   FALSE,  TRUE    FALSE, N    0, FALSE, FALSE, FALSE  Example Example, , Brisbane QLD 4000    AU  Example Example Example, , Example  QLD 4211    AU, Example TRACKADV
A   5.25    0   0   0, ARTICLE CONTAINS CONSUMER GOOD(S)    FALSE   FALSE   0   0,  FALSE   FALSE   FALSE   FALSE   FALSE, FALSE, , , , , , , , , , , , , , , , 
C   QTM0039300  7021130 X6  100013345,  Example, , Example  QLD 4303    AU  402131430   FALSE,  TRUE    FALSE, N    0, FALSE, FALSE, FALSE  Example Example, , Brisbane QLD 4000    AU  Example Example Example, , Example  QLD 4211    AU, Example TRACKADV
A   0.6 0   0   0, ARTICLE CONTAINS CONSUMER GOOD(S)    FALSE   FALSE   0   0,  FALSE   FALSE   FALSE   FALSE   FALSE, FALSE, , , , , , , , , , , , , , , , 
C   QTM0039242  7021130 X6  100008683,  Example, , Example  SA  5034    AU  403468706   FALSE,  TRUE    FALSE, N    0, FALSE, FALSE, FALSE  Example Example, , Brisbane QLD 4000    AU  Example Example Example, , Example  QLD 4211    AU, Example TRACKADV
A   0.6 0   0   0, ARTICLE CONTAINS CONSUMER GOOD(S)    FALSE   FALSE   0   0,  FALSE   FALSE   FALSE   FALSE   FALSE, FALSE, , , , , , , , , , , , , , , , 
C   QTM0039065  7021130 X6  100013177,  Example, , Example  VIC 3136    AU  61397233661 FALSE,  TRUE    FALSE, N    0, FALSE, FALSE, FALSE  Example Example, , Brisbane QLD 4000    AU  Example Example Example, , Example  QLD 4211    AU, Example TRACKADV 
```

我只需要 C 行中的数据。有没有一种快速的方法可以删除以“M”和“A”开头的所有行，或者在脚本中忽略这些行？

如果我从目标文件中手动删除所有 M & A 行，我可以使用它来获取我想要的数据，但是由于行长度不同，无论新行字符如何，我都无法使用此方法。

```
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",", "\n")) !== FALSE) 
    {
        echo $data[0] . " - ". $data[1] . " - ". $data[4] . "<br/><hr>" ;
    }

    fclose($handle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:09:19.973

一种方法是

```
preg_replace_all('#^([MCA])\s#im',"$1,",$file); 
```

然后将其解析为普通的 CSV

```
while($line=fgetcsv($f))
{
    if($line[0]=="M" || $line[0]=="A") continue;
    /* ... */
} 
```

如果你使用 PHP >=5.3，你可以使用另一种方式：[`str_getcsv`](http://www.php.net/manual/en/function.str-getcsv.php)

```
while($line=fgets($f))
{
    if(preg_match('#^[MA]\s#i',$line)) continue;
    $line=str_getcsv(substr($line,2));
    /* ... */
} 
```

这种方法的一个缺点是，如果您的 CSV 包含类似 的`"multiline \n column"`内容，它将中断。

关于变长问题，您可能有兴趣知道[`fgetcsv`](http://www.php.net/manual/en/function.fgetcsv.php)只需要一个参数即可工作（PHP >=5）；将所有其他参数保留为默认值，它将读取每个 CSV 行的全长。

# orbeon - 未经授权的 Orbeon 表单错误

> ID：15402931
> 
> 赞同：0
> 
> 时间：2013-03-14T06:50:51.043
> 
> 标签：orbeon, xforms

我使用 orbeon xform 引擎作为我的 Java 应用程序的单独部署。我遵循了单独部署所需的所有步骤，但是在使用 Orbeon 实现 xfroms 时出现以下错误：

“Orbeon 表单 - 未经授权 您无权访问此页面。”

在 tomcat orbeon 日志文件中，它显示以下错误：

```
392 INFO  ProcessorService  - Context listener - Context initialized.
522 INFO  ProcessorService  - Servlet initialized.
724 INFO  ProcessorService  - /xforms-renderer - Received request
192 INFO  PageFlowControllerProcessor  - unauthorized {controller: "oxf:/ops/xforms/xforms-renderer-page-flow.xml", method: "POST",  path: "/xforms-renderer", status-code: "403"}
205 INFO  ProcessorService  - /xforms-renderer - Timing: 2465 
```

我在我的 servlet 中使用 RequestDispatcher 来转发我对所需 XForm 的请求

```
ServletContext context= getServletContext();
RequestDispatcher rd= context.getRequestDispatcher("/xforms-jsp/orbeon/form.jsp");
rd.forward(request, response); 
```

我能够在实现集成部署时呈现 xfrom。

愿你指导我哪里出错了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:40:14.177

如果您使用[单独部署](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-with-java-applications#TOC-Separate-deployment)，您应该在您的 中使用 Orbeon servlet 过滤器`web.xml`，并且您不需要`RequestDispatcher`在自己的代码中使用 a。我现在用 4.0 仔细检查了它以验证它是否有效。（我想知道是什么让您相信您需要使用自己的`RequestDispatcher`，因为我在单独的部署文档中没有看到任何关于此的内容。）

但是请注意，由于[这个问题](https://github.com/orbeon/orbeon-forms/issues/877)，现在您还需要在HTML 中添加`orbeon`类`<body>`，否则正确的样式将不适用。这只是暂时的，修复此问题后将自动为您添加课程。

# android - 安卓日期时间

> ID：15402935
> 
> 赞同：0
> 
> 时间：2013-03-14T06:51:04.280
> 
> 标签：android, multithreading, datetime

我想创建一个显示当前时间的小时和分钟的时钟，例如下午 02:15。我现在想要的是在每 60 秒后明显更新分钟部分，因为它在我们的系统中发生更改。所以我想知道保持时间更新的最佳方法是什么谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:53:52.803

.xml 文件的代码，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/txtTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

活动文件的代码，

```
package com.example.demoproject;

import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.os.Bundle;
import android.text.format.Time;
import android.widget.TextView;

public class MainActivity extends Activity 
{
    private static TextView textview;
    private Timer timer;
    private Time today;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textview = (TextView ) findViewById( R.id.txtTime );

        today = new Time(Time.getCurrentTimezone());
        timer = new Timer();
        timer.schedule(new RemindTask(), 1000, 1000 );
    }

    private class RemindTask extends TimerTask
    {
        public void run()
        {

            runOnUiThread(new Runnable() 
            {
                 public void run() 
                 {
                        today.setToNow();
                        textview.setText(today.format("%k:%M:%S"));  // Current time
                }
            });
        }
    }
} 
```

# web-services - AFNetworking 响应

> ID：15402936
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:51:04.840
> 
> 标签：web-services, ios5, afnetworking

```
MyHttpClient *sharedHttpClient = [MyHttpClient sharedClient];
[sharedHttpClient getPath:BASERURL_GENERAL_APPEND_PATH parameters:reqParameter success:^(AFHTTPRequestOperation *mOperation , id responseObject){
   NSLog(@"%@",responseObject);

}failure:^(AFHTTPRequestOperation *operation , NSError *error){

   //code for failure

}]; 
```

我收到请求成功，但它返回响应数据为 NSData 类型，我需要响应字符串。请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:07:15.657

您可能正在寻找文档[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)`NSString`中的 initWithData:encoding

否则，您可能需要检查您的 Web 服务返回`content-type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:25:09.463

在成功块内试试这个：

```
NSString* response = [mOperation responseString]; 
```

如果此字符串为 nil，则可能存在编码问题。检查您的 Web 服务的内容类型。

# r - 二次插值插补法

> ID：15402939
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:51:17.830
> 
> 标签：r

谁能告诉我如何使用二次插值来估算缺失的数据。我知道该`zoo`软件包提供线性和三次插值。

1.  二次插值怎么样？
2.  如何检查推算的值是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:25:41.617

*大量的赞成票鼓励我将我的评论变成答案。*

由于以下原因，二次插值很少见：两个数据点定义一条线，四个数据点定义一条三次曲线。因此，您可以使用插值间隙任一侧的一个或两个数据点进行插值。对于三次情况，您还可以使用四个自由度来匹配间隙两侧的函数值和斜率，这会导致三次样条插值。

但是，对于二次曲线，您需要具有三个自由度。所以你需要三个点来定义插值形状，你不能均匀地分布在间隙的两侧。

可能的解决方案”：

*   您可以进行**非对称**插值，即在左侧使用两个数据点，但在该位置右侧使用一个点。结果也可能是不对称的。
*   您可以进行**分段**二次**逼近**，使用三个以上的点来拟合二次曲线。但是通过近似值，曲线不会通过您的数据点，因此碎片不会正确排列。
*   您可以对整个数据集进行**全局**二次**近似**，但这根本不是插值。
*   您可以使用两个自由度来匹配段的每一端的一个数据点，并使用第三个自由度以某种对称方式塑造曲线，例如要求**中间的斜率**为零。但结果可能会比简单的线性插值更“摇摆不定”，所以我认为它是劣等的。

我不会建议这些，但我想不出更好的答案来回答你的问题。对于每次计算，您可以验证给定的实现是否与设计理念相匹配，但由于我认为所有的设计理念都有缺陷，这种正确性仍然不能确保插值实际上有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:45:59.880

对于多项式插值和可视化结果拟合，我想您可能会尝试以下方式：

```
x <- runif(100,-2,2)
y <- x**2-rnorm(100) # an approximately quadratic relation between x and y. 
plot(x,y)
quadratic.model <- lm(y ~ x + I(x**2))
int <- function(x) predict(quadratic.model,list(x=x))
plot(int,xlim=c(-2,2),col="navy",add=T)
segments(x,y,x,int(x),col="red") 
```

...“正确性”当然只能衡量插补和观察之间的距离。

# java - java.sql.Timestamp 抛出错误

> ID：15402944
> 
> 赞同：0
> 
> 时间：2013-03-14T06:51:45.780
> 
> 标签：java, android, timestamp

我正在使用以下方法获取当前时间：

```
import java.sql.Timestamp;
public class TimeFormat
{
        public static Timestamp getCurrentDateAndTime()
        {
            String strFormat = new String("yyyy-MM-dd HH:mm:ss");
            SimpleDateFormat formatter = new SimpleDateFormat(strFormat);
            java.util.Date theDate = new java.util.Date();
            theDate = (java.util.Date) formatter.parse(formatter.format(theDate));
            Timestamp rtnTS = new Timestamp(theDate.getTime());
            return rtnTS;
        }
} 
```

现在创建另一个类作为数据模型：

```
public class InvoiceObject extends java.lang.Object implements Serializable
{
    public Integer mId;
    public Timestamp mTimeIssued;

    public InvoiceObject()
    {
            this.mId = new Long("0");
            Timestamp tempTime = TimeFormat.getCurrentDateAndTime(); //successful
        this.mTimeIssued = tempTime; //here throwing error
    }
} 
```

不明白为什么在分配当前日期时会抛出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:09:27.913

```
mport java.io.Serializable;
import java.sql.Timestamp;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;

public class TT {

    /**
     * @param args
     * @throws Exception 
     * @throws Exception 
     */
    public static Timestamp getCurrentDateAndTime() throws Exception
    {
        String strFormat = new String("yyyy-MM-dd HH:mm:ss");
        SimpleDateFormat formatter = new SimpleDateFormat(strFormat);
        java.util.Date theDate = new java.util.Date();
        theDate = (java.util.Date) formatter.parse(formatter.format(theDate));
        Timestamp rtnTS = new Timestamp(theDate.getTime());
        return rtnTS;
    }
    public static void main(String[] args) throws Exception {

        InvoiceObject i=new InvoiceObject();
        System.out.println(i.getmTimeIssued());
        }

}
class InvoiceObject extends java.lang.Object implements Serializable
{
    public Integer mId;
    public Timestamp mTimeIssued;

    public InvoiceObject()
    {
           // this.mId = new Long("0");
            Timestamp tempTime;
            try {
                tempTime = TT.getCurrentDateAndTime();
                  this.mTimeIssued = tempTime;
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } //successful
       //here throwing error
    }
    public Timestamp getmTimeIssued() {
        return mTimeIssued;
    }
} 
```

# java - 向 Java Jersey RESTful Web 服务添加身份验证机制

> ID：15402947
> 
> 赞同：1
> 
> 时间：2013-03-14T06:51:49.717
> 
> 标签：java, web-services, jersey

我正在使用**Java jersey Restful webservice**。
如何向此球衣网络服务添加**身份验证机制**，一旦通过身份验证，我需要保留会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:09:04.393

您需要向执行身份验证的 Jersey 服务器添加一个过滤器。Jersey 提供了一个使用基本身份验证的方法`HttpBasicAuthFilter`，并且在网上还有许多其他使用不同身份验证方案的示例。

您不应将会话与 REST 一起使用，因为它会随着时间的推移在多个请求之间创建链接；每个 REST 请求都应该是独立的，并且不依赖于之前发生的任何事情。每个 REST 请求都应该有自己的身份验证参数。

# scala - 为什么Lift会逃避这个 价值？

> ID：15402953
> 
> 赞同：0
> 
> 时间：2013-03-14T06:52:09.203
> 
> 标签：scala, lift

我的默认模板中有（大致）这个 LIFT 化的 HTML：

```
<html>
  <head>
    <title>FooBar Application | <lift:bind name="page-title"/></title>
  </head>
  <body>
    <h1><lift:bind name="page-title" /></h1>
    <div id="page-content">
        <lift:bind name="page-content" />
    </div>
  </body>
</html> 
```

...然后在我的主模板中：

```
<lift:surround at="page-content">
  <lift:bind-at name="page-title">Home</lift:bind-at>
</lift> 
```

...在生成的 HTML 中给了我这个：

```
<html>
  <head>
    <title>FooBar Application | &lt;lift:bind name=&quot;page-title&quot;/&gt;</title>
  </head>
  <body>
    <h1>Home</h1>
    <div id="page-content">
    </div>
  </body>
</html> 
```

为什么`<lift:bind>`标签中的标签`<title>`被逃脱了，而标签中的标签`<body><h2>`不在？以及如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:24:39.180

页面是通过 定义的`SiteMap`吗？如前所述，`<title>`它可能是一种特殊情况，它在几个地方被解释——其中一些可能会进行转义。如果可以的话，我会尝试以两种方式之一设置页面标题：

通过`Sitemap`你可以使用`Title` `Loc Param`这里引用的：[Dynamic title with Lift](https://stackoverflow.com/questions/10657651/dynamic-title-with-lift/14755517#14755517)

你也可以有类似的东西：`<title data-lift="PageTitle"></title>`让它调用一个名为`page-title`. 其中，代码段将类似于：

```
class PageTitle { 
  def render = "*" #> "FooBar Application | Home"
} 
```

# php - 获取子域（如果有）

> ID：15402958
> 
> 赞同：0
> 
> 时间：2013-03-14T06:52:23.913
> 
> 标签：php

PHP中是否有任何预定义的方法可以从url获取子域（如果有）？

url 模式可能是：

```
http://www.sd.domain.com
http://domain.com
http://sd.domain.com
http://domain.com 
```

其中 sd 代表子域。

现在方法必须为每种情况返回不同的值：

> **案例 1** -> 返回**sd**
> 
> **案例 2** -> 返回**false**或**空**
> 
> **案例 3** -> 返回**sd**
> 
> **案例 4** -> 返回**false**或**空**

我找到了一些很好的链接

[PHP函数获取URL的子域](https://stackoverflow.com/questions/5292937/php-function-to-get-the-subdomain-of-a-url)

[从 url 获取子域？](https://stackoverflow.com/questions/12997473/get-subdomain-from-url)

但不适用于我的案例。

任何帮助将是最明显的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:03:09.457

尝试这个。

[更新] 我们定义了一个常量 _SITE_ADDRESS，例如 www.mysite.com，您可以为此使用文字。

它在我们的系统中运行良好，似乎正是出于这个目的。

```
public static function getSubDomain()
{
    if($_SERVER["SERVER_NAME"] == str_ireplace('http://','',_SITE_ADDRESS)) return ''; //base domain
    $host = str_ireplace(array("www.", _SITE_ADDRESS), "", strtolower(trim($_SERVER["HTTP_HOST"])));
    $sub =  preg_replace('/\..*/', '', $host);
    if($sub == $host) return ''; //this is likely an ip address
    return $sub;
} 
```

* * *

该功能有一个外部注释，但没有链接，对于任何基于此代码的原始开发人员，我们深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:12:31.563

好的，我在这里创建一个脚本 :)

```
$url = $_SERVER['HTTP_HOST'];
$host = explode('.', $url);
if( !empty($host[0]) && $host[0] != 'www' && $host[0] != 'localhost' ){
    $domain = $host[0];
}else{
    $domain = 'home';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:53:26.803

所以，有几种可能...

首先，当然是正则表达式：

```
(http://)?(www\.)?([^\.]*?)\.?([^\.]+)\.([^\.]+) 
```

第三个括号中的条目将是您的子域。当然，如果您的 url 是 https:// 或 www2 （全部查看...），则正则表达式会中断。所以这只是开始工作的初稿。

我的第二个想法是，就像你`explode`的一样，输入网址。我想到了这样的事情：

```
function getSubdomain($url) {
    $parts = explode('.', str_replace('http://', '', $url));
    if(count($parts) >= 3) {
        return $parts[count($parts) - 3];
    }
    return null;
} 
```

我在这个函数背后的想法是，如果一个 url 被子`.`域分割，几乎总是结果数组中的倒数第三个条目。必须首先剥离协议（参见案例 3）。当然，这当然可以做得更优雅。

我希望我能给你一些想法。

# android - Android活动在后退按钮按下时关闭整个应用程序

> ID：15402960
> 
> 赞同：-2
> 
> 时间：2013-03-14T06:52:35.370
> 
> 标签：android, button, android-activity, back

我的应用程序中有一个主要活动。该活动创建了另外两个活动（在不同的时间）。一个是设置活动，另一个是自定义活动。

现在我的问题是当我在设置活动中并按下后退按钮时，它返回到主要活动。很棒，就像它应该的那样。但是现在当我在我的自定义活动中并按下后退按钮时，整个应用程序都会关闭？？它不会像应有的那样返回到主要活动。

我不确定为什么会这样，因为我实例化两个类的方式是相同的，并且清单文件对于两个活动都是相同的。

调用活动的代码：

```
Intent intent = new Intent(this, SettingsActivity.class);
startActivity(intent); 
```

和

```
Intent intent = new Intent(this, PacketActivity.class);
startActivity(intent); 
```

清单文件：

```
<activity
    android:name="com.example.tcptester.SettingsActivity"
    android:label="@string/title_activity_settings" >
</activity>
<activity
    android:name="com.example.tcptester.PacketActivity"
    android:label="@string/title_activity_packet">
</activity> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:54:32.563

我发现了问题，

以为我会为可能有同样问题的任何其他人发布答案，

问题出在我的 switch 语句中：我遗漏了 return true。

```
 switch (item.getItemId()) {
    case R.id.menu_packet: {
        Intent intent = new Intent(this, PacketActivity.class);
        startActivity(intent);
        /*-->>>>> i did not have this here:*/ return true;
    }
    case R.id.menu_settings: {
        Log.i("Menu Item Clicked", "Settings");
        Intent intent = new Intent(this, SettingsActivity.class);
        startActivity(intent);
        return true;
    }       
    default: {
        return super.onOptionsItemSelected(item);
    }
    } 
```

# wordpress - 将恢复 wp-config.php 删除/重置当前 WP 数据库

> ID：15402961
> 
> 赞同：1
> 
> 时间：2013-03-14T06:52:37.180
> 
> 标签：wordpress

我们的 WordPress 中的 wp-config.php 文件突然丢失了。我们没有进行任何重新安装或卸载。

我们搜索了备份文件夹并找到了该文件的副本。如果我只是从备份中复制粘贴原始文件，我不确定我们的 WP 数据库会发生什么。

恢复的 wp-config.php 文件包含正确的数据库名称和数据库相关信息（密码等）。

如果我恢复了那个文件，它会删除我们 WP 数据库的当前内容，尤其是 wp_posts 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:06:10.397

不，从备份中恢复`wp-config.php`文件不会删除您的网站内容。该文件包含 WordPress*连接*到数据库所需的信息，但它不包含站点内容本身。一旦配置好（当你第一次设置 WordPress 站点时），`wp-config.php`文件的内容就永远不会改变。

# php - 在包含中使用完整链接是错误的吗？

> ID：15402967
> 
> 赞同：1
> 
> 时间：2013-03-14T06:53:00.293
> 
> 标签：php

我已经阅读了很多关于此的不同输入，所以我想我会在这里问。

在 php 包含中使用完整链接有什么错误或危险吗？

例子，

```
<?php include('http://www.domain.com/blah.php'); ?>

<?php
define('WEB_ROOT', './');  // relative path to /
include('layout.php');
?> 
```

与使用相比

```
<?php
include('../blah.php');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:55:55.367

`include('http://www.domain.com/blah.php')`出去并向 Web 服务器发出实际的 HTTP 请求，在 Web 服务器处理完 URL 内容后返回 URL 的内容，就像您在浏览器中输入该 URL 时看到的那样。

`include('../blah.php')`包括磁盘上一级目录中的本地文件。

两者是完全不同的东西，当您想要包含本地文件时，您不想包含 URL ***。***即使这两个被认为是同一个文件，PHP 也无法知道这一点。访问 URL 和访问本地文件路径是完全不同的事情。无法推断两者是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:58:22.930

`<?php include('http://www.domain.com/blah.php'); ?>`很危险，你不能百分百知道你会得到什么代码！！！因为 PHP 执行 HTTP 请求，而有些人可以执行 ManInTheMiddel 攻击并更改您将获得的代码并破解您的网站。

# android - 无法将图像从 sd 卡加载到 gridview

> ID：15402969
> 
> 赞同：0
> 
> 时间：2013-03-14T06:53:13.837
> 
> 标签：android

嗨，我想将从相机捕获的所有图像加载到网格视图中。但我得到了这个奇怪的例外。如果我只是尝试加载 2 或 3 张图像，一切都很顺利，但是当我尝试加载所有图像时，就会出现错误。`sdcard`我的.here 中有大约 20 张图片是我的代码。

```
package com.example.imagegridview;

import java.io.File;
import java.util.ArrayList;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.Menu;
import android.widget.GridView;
import android.widget.Toast;

@SuppressLint("NewApi")
public class MainActivity extends Activity {

    ArrayList<Bitmap> data;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String sdCardRootPath = Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_DCIM).toString()+"/Camera";
        File rootFolder = new File(sdCardRootPath);
        File[] picFiles = rootFolder.listFiles();
        data = new ArrayList<Bitmap>();
        for (File pic:picFiles) {
            Bitmap b= BitmapFactory.decodeFile(pic.getAbsolutePath());
            data.add(b);
        }
        GridView gv = (GridView) findViewById(R.id.gridview);
        gv.setAdapter(new MAdapter(this,data));

    }

} 
```

适配器

```
package com.example.imagegridview;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.Bitmap;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;

public class MAdapter extends BaseAdapter {

    Context c;
    ArrayList<Bitmap> b;
    public MAdapter(Context c,ArrayList<Bitmap> data){
        this.c = c;
        this.b = data;
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return b.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return b.get(arg0);
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageView iv = new  ImageView(c);
        iv.setImageBitmap(b.get(arg0));
        return iv;
    }

} 
```

布局.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical">
<GridView
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"/>

</LinearLayout> 
```

日志猫

```
03-13 23:39:22.632: E/AndroidRuntime(13228): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:562)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:371)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:399)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at com.example.imagegridview.MainActivity.onCreate(MainActivity.java:32)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.app.ActivityThread.access$2300(ActivityThread.java:126)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.os.Looper.loop(Looper.java:123)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at android.app.ActivityThread.main(ActivityThread.java:4633)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at java.lang.reflect.Method.invokeNative(Native Method)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at java.lang.reflect.Method.invoke(Method.java:521)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
03-13 23:39:22.632: E/AndroidRuntime(13228):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:22:23.760

我建议在直接添加图像之前，先缩放每个图像。来自相机的图像实际上会相当大，当你尝试添加 20 个这样的图像时，它必然会在移动设备上溢出。因此，在您上传之前缩放每张图片，并确保它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:58:25.417

你可能想通过这个文档

[https://developer.android.com/training/displaying-bitmaps/index.html](https://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T12:53:06.423

在加载之前调整位图大小，即使用下面的代码解码位图，然后使用该位图。`

```
 public Bitmap decodeFile(File f, int size) {

            try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = size;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        o2.outWidth = width_tmp;
        o2.outHeight = height_tmp;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }
    return null;
}` 
```

# android - 如何在android中创建一个csv文件

> ID：15402976
> 
> 赞同：11
> 
> 时间：2013-03-14T06:53:53.783
> 
> 标签：android

我正在尝试在 .csv 文件中获取我的所有联系人。我已经完成了获取联系人的第一部分，现在剩下的是将文件写入 .csv 文件。请告诉我如何在 android 中创建 .csv 文件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-14T07:02:54.310

检查下面的代码以生成 CSV 文件。无需使用 jar 文件。

您必须将一个 csv 文件保存到 SD-CARD 中。

```
public void exportEmailInCSV() throws IOException {
    {

        File folder = new File(Environment.getExternalStorageDirectory()
                + "/Folder");

        boolean var = false;
        if (!folder.exists())
            var = folder.mkdir();

        System.out.println("" + var);

        final String filename = folder.toString() + "/" + "Test.csv";

        // show waiting screen
        CharSequence contentTitle = getString(R.string.app_name);
        final ProgressDialog progDailog = ProgressDialog.show(
                MailConfiguration.this, contentTitle, "even geduld aub...",
                true);//please wait
        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {

            }
        };

        new Thread() {
            public void run() {
                try {

                    FileWriter fw = new FileWriter(filename);

                    Cursor cursor = db.selectAll();

                    fw.append("No");
                    fw.append(',');

                    fw.append("code");
                    fw.append(',');

                    fw.append("nr");
                    fw.append(',');

                    fw.append("Orde");
                    fw.append(',');

                    fw.append("Da");
                    fw.append(',');

                    fw.append("Date");
                    fw.append(',');

                    fw.append("Leverancier");
                    fw.append(',');

                    fw.append("Baaln");
                    fw.append(',');

                    fw.append("asd");
                    fw.append(',');

                    fw.append("Kwaliteit");
                    fw.append(',');

                    fw.append("asd");
                    fw.append(',');

                    fw.append('\n');

                    if (cursor.moveToFirst()) {
                        do {
                            fw.append(cursor.getString(0));
                            fw.append(',');

                            fw.append(cursor.getString(1));
                            fw.append(',');

                            fw.append(cursor.getString(2));
                            fw.append(',');

                            fw.append(cursor.getString(3));
                            fw.append(',');

                            fw.append(cursor.getString(4));
                            fw.append(',');

                            fw.append(cursor.getString(5));
                            fw.append(',');

                            fw.append(cursor.getString(6));
                            fw.append(',');

                            fw.append(cursor.getString(7));
                            fw.append(',');

                            fw.append(cursor.getString(8));
                            fw.append(',');

                            fw.append(cursor.getString(9));
                            fw.append(',');

                            fw.append(cursor.getString(10));
                            fw.append(',');

                            fw.append('\n');

                        } while (cursor.moveToNext());
                    }
                    if (cursor != null && !cursor.isClosed()) {
                        cursor.close();
                    }

                    // fw.flush();
                    fw.close();

                } catch (Exception e) {
                }
                handler.sendEmptyMessage(0);
                progDailog.dismiss();
            }
        }.start();

    }

} 
```

在清单中添加此权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# ios - UITableView 和 ScrollView 中的另一个视图

> ID：15402978
> 
> 赞同：1
> 
> 时间：2013-03-14T06:54:02.030
> 
> 标签：ios, objective-c, cocoa-touch, uitableview, uiscrollview

我有`UITableView`和`UIView`（用于显示图像幻灯片）里面`UIScrollView`。表格视图是动态的，我想自动调整表格视图的高度以显示所有单元格（并禁用表格视图的滚动），滚动视图应该同时显示幻灯片和表格视图并且可以滚动，我知道如何用代码做到这一点，但我想要了解是否可以在 xcode 大小检查器选项卡中使用以前的（iOS5 和早期）自动调整大小方法在界面生成器中执行（不使用 iOS6 自动布局）（见图![xcode中的旧自动调整大小方法](../Images/8822046c9f81b86ea6ef96c890d1ad96.png)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:01:51.007

我认为仅使用界面生成器很难做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:08:11.853

您可以通过界面生成器设置对象。但是为了保持滚动条件，您需要以编程方式进行。此外，要使表格视图高度动态化，您需要以编程方式完成。

# nginx - nginx子域到目录，重定向太多，为什么？

> ID：15402984
> 
> 赞同：0
> 
> 时间：2013-03-14T06:54:24.650
> 
> 标签：nginx, subdomain

这是我的配置：

```
server {
    listen       80;
    server_name ~^(?<sb>.+)\.a\.b\.c\.com$;
    access_log  /data/logs/nginx/tas.access.log  main;
    location / {
        proxy_intercept_errors on;
        proxy_pass http://b.c/a/$sb/;
        proxy_set_header Host $host;
        proxy_redirect off;
    }
} 
```

和浏览器报告许多重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:22:03.013

如果，如你所说，你想代理到 localhost:8082，你需要在 proxy_pass 行中这样说：

```
server {
    listen 80;
    server_name ~^(?<sb>.+)\.a\.b\.c\.com$;
    access_log /data/logs/nginx/tas.access.log main;
    location / {
        proxy_intercept_errors on;
        proxy_pass http://localhost:8082/a/$sb/;
        proxy_set_header Host $host;
        proxy_redirect off;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:10:00.227

没有所有信息，很难猜测发生了什么。根据评论，我的猜测是您正在使用虚拟主机，以便上游站点也由同一个 nginx 提供服务。所以这条线是问题所在：

```
proxy_set_header Host $host; 
```

nginx 变量 $host 指向当前的 Host 标头（与 server_name 匹配）。因此，如果您再次为上游设置相同的主机头，那么 nginx 将在上面找到相同的位置块，因为 nginx 依赖于主机头来找到合适的服务器。因此重定向循环。

放

```
proxy_set_header Host your_upstream_server_name 
```

届时将修复它。

# c# - MVC - 有没有办法在模型中声明具有相同属性、不同名称的多个属性

> ID：15402991
> 
> 赞同：7
> 
> 时间：2013-03-14T06:54:46.803
> 
> 标签：c#, asp.net-mvc

我需要声明一个模型的很多属性，它们都具有相同的属性。我想知道在 MVC 中是否有任何方法可以做到这一点。

```
[Required]
[Range(0, 4, ErrorMessage = "Integrity is required.")]
public int Integrity { get; set; }

[Required]
[Range(0, 4, ErrorMessage = "Empathy is required.")]
public int Empathy { get; set; } 
```

我有一堆使用这两个属性（必需和范围）的字段，唯一不同的是属性的名称。有没有办法以减少重复的方式声明这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:22:38.990

没有任何内置功能可以满足您的要求，但是您可以使用 ModelValidatorProviders 实现此功能。您必须创建自己的提供程序并将其传递给 MVC。创建您自己的属性，该属性将接受注释类型以及应该应用它的属性数组。然后您可以相应地在该属性中编写所需的逻辑。看看这个链接它肯定会给你提示如何完成这个..

**[CustomModelValidatorProvider](http://www.codeproject.com/Articles/541244/Conditional-ASP-NET-MVC-Validation-using-Data-Anno)**

# memory - 如何获得 memcahe 的使用

> ID：15402992
> 
> 赞同：1
> 
> 时间：2013-03-14T06:54:52.160
> 
> 标签：memory, memcached

我们在服务器中使用 Memcache 几个月了，现在我想检查它正在使用的内存？

当我们使用**stats**命令时，我们得到了以下输出。

```
STAT bytes_read 226428688048
STAT bytes_written 205477506872
STAT limit_maxbytes 1073741824 
```

这意味着什么，我们如何计算使用的内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:04:19.697

[您可以在此Oracle 文档](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/ha-memcached-stats-general.html)中找到有关 Memcached 统计指标的信息。[我在Memcached wiki](https://code.google.com/p/memcached/wiki/NewStart?tm=6)中找不到它。我不确定描述是否准确，但这是我的阅读方式。

*   bytes 是 Memcached 使用的字节数**（这是您要查找的内容）**
*   bytes_read 是从 Memcached 读取的总字节数
*   bytes_read 是写入 Memcached 的总字节数
*   limit_maxbytes 是 Memcached 可以使用的最大字节数

我找到了有关如何在内部使用内存的[文档；](https://code.google.com/p/memcached/wiki/NewUserInternals)你可能会感兴趣。

# ssis - SSIS 根据配置创建新文件夹

> ID：15402993
> 
> 赞同：0
> 
> 时间：2013-03-14T06:54:53.640
> 
> 标签：ssis

每次运行我的 SSIS 包时，我都必须创建一个新文件夹。我能够使用与`ConnectionManagerType = FILE`和的新连接来做到这一点`ConnectionString = C:\Test`。我正在使用这个连接字符串`file system task`来检查文件夹是否已经存在，然后它不会做任何其他事情它会创建一个`new`文件夹。到这里为止，一切都运行良好。问题是现在我需要根据运行包时选择的配置创建一个新文件夹

说如果选择了 UAT， ![在此处输入图像描述](../Images/dc33d53ec40cd127b332972318c27c54.png) 那么文件夹名称应该是`c:\Test_UAT`，对于配置类型 =`Development`文件夹名称应该是`c:\Test_Development`

请帮助我实现这一目标。请具体一点，因为我对 SSIS 很陌生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:34:30.617

你需要`expression`为`File connection Manager`

`Configuration`1.创建数据类型的变量`String`

2.右键单击`File Connection Manager`您创建的并选择`Properties`

3.单击表达式并在对话框中选择`connection string` 属性

![在此处输入图像描述](../Images/b8266925a0fd01b6bed05234ba9666a3.png)

![在此处输入图像描述](../Images/73387b3ba4072a6fd658028ffbe4a0c7.png)

4.单击表达式并写入文件夹位置

![在此处输入图像描述](../Images/1a8cb34b627084b751eca9188b1b6fc9.png)

5.文件系统任务将具有以下配置。在源连接中选择您创建的文件连接管理器

![在此处输入图像描述](../Images/5e7d83e7acafdadb97b4d21db6c9e5c8.png)

如果将配置值更改为`Test`或`Development`，将在上面指定的位置创建相应的文件夹

```
Updated : 
```

在配置中添加变量只需单击。`SSIS Package Configuration`编辑您的配置文件。选择变量并单击值复选框

配置完成后，您可以更改中的值，`xml config file`这将`SSIS`在`runtime` ![在此处输入图像描述](../Images/b8c4ef7e8c7847a7b8a1495740ce4e8e.png)

# freebase - 您如何确定 Freebase 中的域是否是 commons/base？

> ID：15402996
> 
> 赞同：1
> 
> 时间：2013-03-14T06:54:54.740
> 
> 标签：freebase, mql

我看到Freebase中topic之间的关系是这样开始的：

/user/foo/... /music/album/... /base/talships/...

我是否应该只检查关系是否以“base”或“user”开头，在这种情况下，域不是公共域？因此，如果它以“base”或“user”以外的任何单词开头，那么它就是一个公共域。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:50:42.540

是的，通常您可以通过查看 ID 来判断某物是用户域还是基础。然而，最可靠的方法是在 MQL 中，如下所示：

```
{
  "id": "/music/album",
  "/type/type/domain": {
    "/freebase/domain_profile/category": [{
      "id": null
    }]
  }
}​ 
```

任何具有该类别`/category/commons`的域都是 Freebase 公共域。

# android - 通过 USB 电缆将 arduino 与 android 连接

> ID：15402999
> 
> 赞同：1
> 
> 时间：2013-03-14T06:55:23.893
> 
> 标签：android, arduino

我只是想问一下，我可以像使用 arduino mega adk 板一样使用 USB 电缆将 android 手机连接到新的 arduino due 板吗？