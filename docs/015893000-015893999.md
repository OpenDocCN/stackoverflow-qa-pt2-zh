# StackOverflow 问答 15893000-15893999

# telerik - 如何在客户端重置 Telerik 下拉列表控件值

> ID：15893000
> 
> 赞同：0
> 
> 时间：2013-04-09T03:54:29.043
> 
> 标签：telerik

我想在清除按钮单击时重置下拉列表选择并设置默认消息。

```
 <telerik:RadDropDownList ID="radDrpDwn_User" runat="server" Width="325px" DefaultMessage="--select--">
 </telerik:RadDropDownList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T21:56:34.970

首先，telerik 中没有任何名为 (RadDropDownList) 的控件，兼容的控件是 RadComboBox 控件，因此您可以使用以下内容定义它；

```
<telerik:RadComboBox ID="radDrpDwn_User" runat="server" Width="325px" DefaultMessage="--select--">
</telerik:RadComboBox> 
```

并在清除按钮中：

```
protected void Clear_Click(object sender,EventArgs e)
{
radDrpDwn_User.ClearSelection();

} 
```

问候

# c++ - 如何告诉 C++ 使用不同的函数（与另一个函数同名）？

> ID：15893003
> 
> 赞同：2
> 
> 时间：2013-04-09T03:54:52.773
> 
> 标签：c++

我的程序中包含两个库，它们都具有相同的函数名称，但我需要能够同时使用这两个库，但我还需要 C++ 知道我指的是哪一个（在某些地方我只会指非此即彼）。我这样做的原因是因为我正在制作自己的库，并且我想为我的函数命名，但它们与我包含的其他库中的函数冲突，更糟糕的是，有些我的库中的函数实际上使用了其他人库中具有相同名称的函数。

顺便说一下，我的库只是一个 .h/.cpp 文件。此外，在调用 MY 函数时，我不想要任何额外的行李，例如 myNameSpace::myFunc()。我只想称它为 myFunc()。但是，我不介意使用命名空间调用其他人的函数（尽管我不想修改他们的库以防我破坏某些东西）。（顺便说一句，我对 C++ 完全陌生）

这是我的新（测试 - 到目前为止）代码：不工作 W/错误：错误 C2668：'myFunc'：对重载函数的模糊调用

主程序.cpp

```
 #include "otherslib.h"
    #include "mylib.h"
    #include <iostream>

    using namespace myNamespace;

    int main(){

        std::cout << myFunc() << std::endl;

        return 0;
    } 
```

mylib.h

```
 #pragma once

    namespace myNamespace{
        int myFunc();
    } 
```

mylib.cpp

```
 #include "mylib.h"

    namespace myNamespace{
        int myFunc(){
            return 1;
        }
    } 
```

其他lib.h

```
 #pragma once

    int myFunc(); 
```

其他lib.cpp

```
 #include "otherslib.h"

    int myFunc(){
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:57:25.723

您应该在命名空间中定义函数，并在调用它们时使用命名空间。

```
namespace myNamespace
{
    int myFunc(etc) { ... }
}

int main() {
    cout << myNamespace::myFunc();
} 
```

为避免必须一直指定命名空间，您可以执行以下操作：

```
namespace myNamespace
{
    int myFunc(etc) { ... }

    int main() 
    {
        // Call your own myFunc:
        myFunc();

        // Call their myFunc:
        ::myFunc();
    }
} 
```

# node.js - 请求不以 node.js 结尾（曾经工作）

> ID：15893005
> 
> 赞同：6
> 
> 时间：2013-04-09T03:55:03.450
> 
> 标签：node.js

我有这段代码：

```
var app = require('http').createServer(function(req, res){
    console.log(req);
    req.addListener('end', function () {
        fileServer.serve(req, res);

    });
});

var statics = require('node-static');
var fileServer = new statics.Server('./');

app.listen(1344, '127.0.0.1');

app.on('error', function(err){
    console.log(err);
}) 
```

它工作得很好，直到我做了一些更改，节点给出了一个错误，当我回去时，那个错误不再存在，而是像在`end`事件没有被触发之前那样工作。所以，里面的任何东西`req.addListener('end', function (){});`都不会被调用。

即使我运行另一个使用相同事件的 node.js，也不会被触发。就像请求的结束事件被破坏一样。但这怎么可能呢？

已经不是第一次发生了。上次我最终重新安装了节点（在尝试了很多不同的东西之后）。我宁愿找到解决方案，这样我才能理解问题！

注意：原始代码包括 socket.io 和其他类型的连接，但我刚刚粘贴了应用程序卡住的这段代码。

了解如何调试问题也很有用！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T16:47:11.283

@InspiredJW 指出这一点应该得到赞扬，因为我忘记了它，但毫无疑问，你的问题是因为可读流的变化。为了让`end`事件被调用，您要么必须将侦听器附加到`data`事件，要么必须调用`stream.resume()`.

```
require('http').createServer(function(req, res){
    req.addListener('end', function () {
        // won't ever get called in node v0.10.3
    });
});

require('http').createServer(function(req, res){
    req.addListener('end', function () {
        // will get called in node v0.10.3 because we called req.resume()
    });
    req.resume();
});

require('http').createServer(function(req, res){
    req.on('data', function (chunk) {  });

    req.addListener('end', function () {
        // also will get called because we attached a data event listener
    });
}); 
```

[http://nodejs.org/api/stream.html#stream_compatibility](http://nodejs.org/api/stream.html#stream_compatibility)

# javascript - 使用 .NET 中的 JavaScript 确定 pageLoad() 中是否以及哪些部分回发发生

> ID：15893011
> 
> 赞同：5
> 
> 时间：2013-04-09T03:55:31.273
> 
> 标签：javascript, .net, ajax, postback

据我了解，使用 ASP.NET AJAX 进行部分页面更新会导致调用 JavaScript pageLoad() 事件处理程序。

我的问题：是否有从 pageLoad() 函数中确定 JavaScript 的通用方法...

i) 回发是否是部分页面更新。

ii) 如果是，更新了哪个面板。

我的应用程序结合使用 .NET UpdatePanels 和 Telerik RadAjaxPanels。我正在寻找一种通用（最好是 JavaScript）解决方案，它不需要我为每个面板指定唯一的客户端回调函数，也不需要在每个回发事件处理程序中设置一些标志来向客户端标识自己。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T04:17:16.753

要确定回发是否是部分更新，您可以使用`ScriptManager.GetCurrent(this.Page).IsInAsyncPostBack`. 这是一个例子：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Page.IsPostBack)
    {
        // get a reference to ScriptManager and check if we have a partial postback
        if (ScriptManager.GetCurrent(this.Page).IsInAsyncPostBack)
        {
            // partial (asynchronous) postback occured
            // insert Ajax custom logic here
        }
        else
        {
            // regular full page postback occured
            // custom logic accordingly                
        }
    }
} 
```

要获取导致 PostBack 的更新面板，您可以查看`ScriptManager.GetCurrent(Page).UniqueID`并分析它。这是一个这样做的例子：

```
public string GetAsyncPostBackControlID()
{
    string smUniqueId = ScriptManager.GetCurrent(Page).UniqueID;
    string smFieldValue = Request.Form[smUniqueId];

    if (!String.IsNullOrEmpty(smFieldValue) && smFieldValue.Contains("|"))
    {
        return smFieldValue.Split('|')[0];
    }

    return String.Empty;
} 
```

* * *

**参考：**

*   [http://forums.asp.net/t/1562871.aspx/1](http://forums.asp.net/t/1562871.aspx/1)
*   [获取在 AJAX UpdatePanel 中触发回发的 ASP.NET 控件](https://stackoverflow.com/questions/3821569/get-asp-net-control-which-fired-a-postback-within-a-ajax-updatepanel)

# ios - iOS Apple Map 原生链接 - URL Scheme 示例

> ID：15893012
> 
> 赞同：2
> 
> 时间：2013-04-09T03:55:38.320
> 
> 标签：ios, objective-c, maps

在我的一个项目中，我在核心数据存储中捕获纬度/经度坐标，然后在带有附件 PDF 的电子邮件中提供此信息。在接收端，我希望另一个 iPhone 用户方便能够单击该链接，然后在 Apple 地图中转到该位置

我发现原生苹果地图出现了，但它只是一个没有引脚的开放地图视图：

```
NSString *appleLink2 = [NSString stringWithFormat:@"http://maps.apple.com/maps   
ll=%@,%@",self.lat,self.lon]; 
```

我正在以一种常见的方式创建可点击的`CGRect`，并且`NSURL`

从表面上看，我可能应该得到街道地址而不是纬度/经度坐标，并使用地址来获得更好的地图分辨率......想法？

另外，我正在寻找 Apples URL Schemes 的示例来查询文档中提到的字符串，但找不到任何真实的 示例... `ll =`、、、、。我理解and ，并且很惊讶我在任何地方都找不到任何参考或真实示例。`son =``t =``z =``saddr``daddr`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T04:31:21.910

如果您希望将图钉放置在 Apple 地图应用程序的地图上，请在 URL 中使用“q”而不是“ll”：

```
NSString *appleLink2 = [NSString stringWithFormat: @"http://maps.apple.com/maps?q=%@,%@", self.lat, self.lon]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:51:36.403

以下苹果链接包含问题的所有详细信息

[http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:19:29.387

用于`NSString`_`URL`

```
NSString *appleLink2 = [NSString stringWithFormat:@"http://maps.apple.com/maps   
ll=%@,%@",self.lat,self.lon];

NSURL *myUrl = [NSURL URLWithString:[appleLink2 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

然后使用 myUrl 作为 URL。

# java - 在 zip 文件中附加 XML 文件和其他 PDF 文件

> ID：15893013
> 
> 赞同：0
> 
> 时间：2013-04-09T03:55:45.937
> 
> 标签：java, xml, zip

我有一个 xml 文档的输出流。我将所有 PDF 文件附加到一个 zip 文件中。完成所有 PDF 文件的附加后，我想附加 xml 文档。但我得到的只是空的 xml 文件。

这就是我正在做的

```
byte b[] = new byte[10240];
ZipOutputStream zout = new ZipOutputStream(getOutputStream("ExampleForms.zip", attach));
for(int i = 0; i < pdfs.length; i++){
    File f = File.createTempFile(pdfs[i].NAME, ".pdf");
    FileOutputStream fo = new FileOutputStream(f);
    pdfs[i].render(fo);
    fo.close();
    InputStream in = new FileInputStream(f);
    ZipEntry e = new ZipEntry(pdfs[i].NAME + ".pdf");
    zout.putNextEntry(e);
    int len=0;
    while((len=in.read(b)) != -1) {
          zout.write(b,0,len);
    }
    in.close();
    zout.closeEntry();
    f.delete();
}       
/* out is my outputstream in which i have written xml document */
File f = File.createTempFile("SampleXmlFile.xml");
FileOutputStream fo = new FileOutputStream(f);
fo.write(out.toString().getBytes());
fo.close();
InputStream is = new FileInputStream(f);
ZipEntry e = new ZipEntry("MyXmlFile",".xml");
zout.putNextEntry(e);
int lent = 0;
while((lent = is.read(bt)) != -1){
   zout.write(bt,0,lent);
}
is.close();
zout.closeEntry();
zout.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:15:38.730

1）很可能`out`是空的

2) 为什么要使用临时文件？采用

```
 zout.write(out.toString().getBytes()); 
```

# c - 在 C 中计算重复项

> ID：15893015
> 
> 赞同：-1
> 
> 时间：2013-04-09T03:56:13.510
> 
> 标签：c, arrays, duplicates

如果我有一个数组设置为：

```
test[10] = {1,2,1,3,4,5,6,7,8,3,2} 
```

我想返回数字 3，因为有重复的 1、重复的 2 和重复的 3。我怎样才能做到这一点？效率无所谓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:39:45.463

您可以使用此代码，

```
int main()
{
 int test[10] = {1,2,1,3,4,5,6,7,8,3,2};
 int i,j,dupliCount = 0;
 for (i =0; i<(sizeof(test)/sizeof(int));i++)
  {
  for(j=i+1;j<(sizeof(test)/sizeof(int));j++)
   {
    if (test[i] == test[j])
     {
      ++dupliCount;
      break;
     }
   }
  }
printf("duplicate count %d",dupliCount);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:59:11.570

首先，您必须对数组进行排序，以便更容易找到重复项。

这是排序（冒泡排序）的示例：

```
void bubbleSort(int numbers[], int array_size) {
    int i, j, temp;

    for (i = (array_size - 1); i > 0; i--) {
        for (j = 1; j <= i; j++) {
            if (numbers[j-1] > numbers[j]) {
                temp = numbers[j-1];
                numbers[j-1] = numbers[j];
                numbers[j] = temp;
            }
        }
    }
} 
```

然后再次循环并查找`values[i]`是否`==`要`values[i+1]`

**注意：**当您创建 for 循环时，使其长度缩短 1 以进行补偿，`values[i+1]`这样它就不会超出范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T04:07:26.917

我花了一些时间来调试这个。`int test[11] = {1,2,1,3,4,5,6,7,8,3,2}`因为不应该`int test[10]`。每个元素都有 0 到 10 的订阅。所以总共有 11 个元素。

```
 #include <stdlib.h>
    #define LEN (11)
    int test[LEN] = {1,2,1,3,4,5,6,7,8,3,2};
    void sort(int n, int *test){//sort them, use whatever you like
        int i,j,y;
        for (i=0;i<n;++i){
            for (j=i+1;j<n;++j)
                if (test[i]>test[j]){
                    y=test[i];
                    test[i]=test[j];
                    test[j]=y;
                }
            }
    }
    int main(){
        sort(LEN,test);//sort first
        int cnt = 0 , i ;
        for(i=1;i<LEN;++i)
            cnt += (test[i]==test[i-1]);//count duplicates
        printf("%d\n",cnt);//print result

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T07:17:11.713

如果**内存空间无关紧要**（我的意思是您**不受内存使用的限制**）但**运行时间很重要**，并且**您知道数组中的值不大于数组的大小**，那么`Bucket Sort`听起来像是工作。它将在 O(n) 而不是 O(nlgn) 中完成工作（如果您决定先对数组进行排序）。

```
int main()
{
    int test[LEN] = {1,2,1,3,4,5,6,7,8,3,2};
    int ndup = 0;
    int bucket_array[LEN] = {0};

    for (i = 0; i < LEN; i++) {
        if (bucket_array[test[i]]++) {
            ndup++;
        }
    }

    printf("%d duplicates\n", ndup);
    return 0;
} 
```

我还没有编译它，但我想它应该可以完成这项工作。

**注意**：非常感谢 jim balter 的有用评论。

# ios - 为什么这个准备 segue 不起作用？

> ID：15893017
> 
> 赞同：0
> 
> 时间：2013-04-09T03:56:27.640
> 
> 标签：ios, xcode, uitableview, storyboard, segue

当我单击 tableview 时，我想将 currentbook 详细信息发送到另一个视图控制器“detailpage”，而这里它不发送任何值？为什么它也显示错误？![在此处输入图像描述](https://i.stack.imgur.com/350Ii.png)

错误：未知接收器“tableview”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T04:05:40.697

为什么要创建两个 GMMDetailPage 对象？此外，您很可能应该拥有`self.tableView`而不仅仅是 tableView。最好将 tableView 传递给`prepareForSegues:sender:`这样的方法：

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
[self performSegueWithIdentifier:@"bookItem" sender:tableView]; }`

# ios - 以编程方式设置约束

> ID：15893022
> 
> 赞同：26
> 
> 时间：2013-04-09T03:56:51.563
> 
> 标签：ios, objective-c, uiviewcontroller, uiscrollview, nslayoutconstraint

我正在尝试如何使用 UIScrollView。经过一番折腾，我终于掌握了窍门。但现在我似乎遇到了另一个障碍。

在这个简单的应用程序中，我有一个滚动视图，为了让它工作，我必须将视图的底部空间设置为滚动视图约束为 0，如此处所述[，](https://stackoverflow.com/a/15516706/1077789)它工作正常。我是通过IB做的。

现在我遇到了一个场景，我必须以编程方式完成那部分。我在`viewDidLoad`方法中添加了以下代码。

```
NSLayoutConstraint *bottomSpaceConstraint = [NSLayoutConstraint constraintWithItem:self.view
                                                                             attribute:NSLayoutAttributeBottom
                                                                             relatedBy:NSLayoutRelationEqual
                                                                                toItem:self.scrollView
                                                                             attribute:NSLayoutAttributeBottom
                                                                            multiplier:1.0
                                                                              constant:0.0];
[self.view addConstraint:bottomSpaceConstraint]; 
```

但这似乎不起作用。它在控制台窗口中输出以下消息，我不知道该怎么做。

**无法同时满足约束。以下列表中的至少一个约束可能是您不想要的。试试这个：（1）查看每个约束并尝试找出您不期望的；(2) 找到添加了一个或多个不需要的约束的代码并修复它。（注意：如果您看到不理解的 NSAutoresizingMaskLayoutConstraints，请参阅 UIView 属性 translatesAutoresizingMaskIntoConstraints 的文档）（“”，“”）**

有人可以告诉我该怎么做吗？我还在[此处](http://www52.zippyshare.com/v/15239751/file.html)附加了一个演示项目，以便您对这个问题有更好的了解。

**更新：**

首先感谢您的回复。使用答案中提到的方法，我能够让它工作。然而，在稍微不同的情况下，它不是。现在我正在尝试以编程方式将视图加载到视图控制器上。

如果我可以进一步解释。有 2 个视图控制器。第一个是 a `UITableViewController`，第二个是 a `UIViewController`。里面那个`UIScrollView`. 还有多个`UIView`s 并且其中一些视图的高度超过了屏幕的正常高度。

显示`UITableViewController`选项列表。根据用户的选择，一个特定`UIView`的批次将被加载`UIViewController`到`UIScrollView`.

在这种情况下，上述方法不起作用。滚动没有发生。由于我要单独加载视图，我是否必须做一些不同的事情？

我在[这里](http://www72.zippyshare.com/v/15876364/file.html)上传了一个演示项目，以便您可以看到它的实际效果。请查看并从表格视图列表中`Email.xib`选择**电子邮件。**

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-09T04:55:20.757

根据对您的代码的审查，一些评论：

1.  当视图出现时，您通常不需要调整约束。如果您发现自己这样做了，这通常意味着您没有正确配置故事板（或至少没有有效地配置）。您真正需要设置/创建约束的唯一时间是（a）您正在以编程方式添加视图（我的建议是工作比它的价值更多）；或 (b) 您需要对约束进行一些运行时调整（参见下面第 3 点下的第三个项目符号）。

2.  我并不是要详细说明它，但是您的项目有一堆冗余代码。例如

    *   您正在为滚动视图设置框架，但这是由约束控制的，因此什么都不做（即当应用约束时，任何手动设置的`frame`设置都将被替换）。一般来说，在自动布局中，不要尝试`frame`直接更改：编辑约束。但是，无论如何都不需要改变约束，所以这一点没有实际意义。

    *   您正在为滚动视图设置内容大小，但在自动布局中，这也受（子视图的）约束控制，因此这是不必要的。

    *   您正在为滚动视图设置约束（已经为零），但是您没有将 NIB 中的视图添加到滚动视图中，也破坏了那里的任何意图。最初的问题是如何更改滚动视图的底部约束。但它的底部约束已经为零，所以我认为没有理由再次将其设置为零。

3.  我建议对您的项目进行更彻底的简化：

    *   通过将视图存储在 NIB 中，您的生活变得更加艰难。如果您留在故事板世界中，那就容易多了。如果您真的需要，我们可以帮助您完成 NIB 的工作，但为什么要让自己的生活如此艰难呢？

    *   使用单元原型来促进表格中单元的设计。您还可以定义从单元到下一个场景的转场。这消除了编写任何代码的`didSelectRowAtIndexPath`需要。`prepareForSegue`显然，如果您有一些需要传递到下一个场景的内容，请务必使用`prepareForSegue`，但到目前为止您所展示的内容都不需要这样做，因此我在示例中对其进行了注释。

    *   假设您正在寻找以编程方式更改约束的实际示例，我已经设置了场景，以便文本视图将根据文本视图中的文本以编程方式更改其高度。`IBOutlet`与往常一样，在更改 IB 为我创建的现有约束时，我认为设置约束并直接编辑约束的`constant`属性会更有效，而不是遍历约束以找到有问题的约束，这就是我所做的。所以我将视图控制器设置为文本视图的委托，并编写了一个`textViewDidChange`更新文本视图高度约束的代码：

        ```
        #pragma mark - UITextViewDelegate

        - (void)textViewDidChange:(UITextView *)textView
        {
            self.textViewHeightConstraint.constant = textView.contentSize.height;
            [self.scrollView layoutIfNeeded];
        } 
        ```

        请注意，我的文本视图有两个高度约束，一个强制性的最小高度约束和一个中等优先级约束，我根据文本量在上面进行了更改。要点是它说明了以编程方式更改约束的实际示例。您根本不必纠结于滚动视图的底部约束，但这显示了您何时可能想要调整约束的真实示例。

* * *

当您在 IB 中添加滚动视图时，它会自动获取您需要的所有约束。您可能不想以编程方式添加约束（至少在不删除现有底部约束的情况下不会）。

两种方法可能更简单：

1.  为您现有的底部约束创建一个`IBOutlet`，比如说`scrollViewBottomConstraint`。然后你可以做

    ```
    self.scrollViewBottomConstraint.constant = 0.0; 
    ```

2.  或者最初在 IB 中创建您的视图，其中底部约束为 0.0，然后您根本不需要以编程方式执行任何操作。如果要布局长滚动视图及其子视图，请选择控制器，将其模拟指标从“推断”设置为“自由形式”。然后你可以改变视图的大小，将滚动视图的顶部和底部约束设置为零，在滚动视图内布局你想要的一切，然后当视图在运行时呈现时，视图将被适当地调整大小，因为你'已将滚动视图的顶部和底部约束定义为 0.0，它将正确调整大小。它在 IB 中看起来有点奇怪，但是当应用程序运行时它就像一个魅力。

3.  如果您决定添加一个新约束，您可以以编程方式删除旧的底部约束，或者将旧的底部约束的优先级设置得尽可能低，这样您的新约束（具有更高优先级）将优先，并且旧的、低优先级的底部约束将不会被优雅地应用。

但是你绝对不想只添加一个新的约束。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-01T23:23:34.827

可以创建出口来表示视图控制器中的布局约束。只需在界面生成器中选择您想要的约束（例如，通过您正在安排的视图的测量窗格上的“选择和编辑”）。然后转到出口窗格并将“新引用出口”拖到您的代码文件（.h 或 .m）。这会将约束绑定到`NSLayoutConstraint`您可以从控制器访问并动态调整的实例（通常通过`constant`属性，因为它根本不是常量而命名不佳）。

![在此处输入图像描述](https://i.stack.imgur.com/zr4DM.png)

*（请注意，在 XCode 6 中，您可以双击约束来选择它进行编辑。）*

![在此处输入图像描述](https://i.stack.imgur.com/RvHwa.png)

但是，在界面构建器中调整布局时要小心，因为您最终可能会删除约束并且必须将其重新绑定到插座。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-09T04:56:59.500

查看控制台信息，我觉得您在添加两个相同类型的约束时会产生歧义。

因此，不要创建和添加新的约束，而是尝试更新已经在约束数组中的先前约束。

```
for(NSLayoutConstraint *constraint in self.view.constraints)
    {
        if(constraint.firstAttribute == NSLayoutAttributeBottom && constraint.secondAttribute == NSLayoutAttributeBottom &&
           constraint.firstItem == self.view && constraint.secondItem == self.scrollView)
        {
            constraint.constant = 0.0;
        }
    } 
```

希望这可以帮助

甚至 Rob 的回答也会奏效！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-18T17:02:14.697

您可以使用[https://github.com/SnapKit/Masonry](https://github.com/SnapKit/Masonry)以编程方式添加约束。

它是 AutoLayout NSLayoutConstraints 的强大功能，具有简化的、可链接的和富有表现力的语法。支持 iOS 和 OSX 自动布局。

```
UIView *superview = self.view;

UIView *view1 = [[UIView alloc] init];
view1.translatesAutoresizingMaskIntoConstraints = NO;
view1.backgroundColor = [UIColor greenColor];
[superview addSubview:view1];

UIEdgeInsets padding = UIEdgeInsetsMake(10, 10, 10, 10);

[superview addConstraints:@[
//view1 constraints
[NSLayoutConstraint constraintWithItem:view1
                             attribute:NSLayoutAttributeTop
                             relatedBy:NSLayoutRelationEqual
                                toItem:superview
                             attribute:NSLayoutAttributeTop
                            multiplier:1.0
                              constant:padding.top],

[NSLayoutConstraint constraintWithItem:view1
                             attribute:NSLayoutAttributeLeft
                             relatedBy:NSLayoutRelationEqual
                                toItem:superview
                             attribute:NSLayoutAttributeLeft
                            multiplier:1.0
                              constant:padding.left],

[NSLayoutConstraint constraintWithItem:view1
                             attribute:NSLayoutAttributeBottom
                             relatedBy:NSLayoutRelationEqual
                                toItem:superview
                             attribute:NSLayoutAttributeBottom
                            multiplier:1.0
                              constant:-padding.bottom],

[NSLayoutConstraint constraintWithItem:view1
                             attribute:NSLayoutAttributeRight
                             relatedBy:NSLayoutRelationEqual
                                toItem:superview
                             attribute:NSLayoutAttributeRight
                            multiplier:1
                              constant:-padding.right],]]; 
```

短短几行

这是使用 MASConstraintMaker 创建的相同约束

```
UIEdgeInsets padding = UIEdgeInsetsMake(10, 10, 10, 10);

[view1 mas_makeConstraints:^(MASConstraintMaker *make) {
    make.top.equalTo(superview.mas_top).with.offset(padding.top); //with is an optional semantic filler
    make.left.equalTo(superview.mas_left).with.offset(padding.left);
    make.bottom.equalTo(superview.mas_bottom).with.offset(-padding.bottom);
    make.right.equalTo(superview.mas_right).with.offset(-padding.right);
}]; 
```

甚至更短

```
[view1 mas_makeConstraints:^(MASConstraintMaker *make) {
    make.edges.equalTo(superview).with.insets(padding);
}]; 
```

尽力而为；）

# d3.js - 如何将持续时间直方图的时间数据添加到其条形图？

> ID：15893034
> 
> 赞同：0
> 
> 时间：2013-04-09T03:58:41.083
> 
> 标签：d3.js

我正在使用许多 D3[持续时间直方图](http://bl.ocks.org/mbostock/3048166)，每个都有不同的持续时间。我想将每个条表示的时间范围的开始时间绑定到每个条的 HTML 中的一个 div id。这些信息将通过 jQuery 访问。

例如，00:10 有一个酒吧。我想在酒吧的 div 中添加“00:10”。

我想不通的是如何把握这些时间。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:40:30.883

要添加属性，只需使用`selection.attr()`例如：

```
bar.append("rect")
    .attr("x", 1)
    .attr("width", x(data[0].dx) - 1)
    .attr("height", function(d) { return height - y(d.y); })
    .attr("data-time", function(d){return formatMinutes(d.x)}) 
```

但是，如果您只是想通过点击访问 API，请查看 d3 的`selection.on()`：

```
bar.append("rect")
    .attr("x", 1)
    .attr("width", x(data[0].dx) - 1)
    .attr("height", function(d) { return height - y(d.y); })
    .on("click", function(d){ 
        accessAPI(formatMinutes(d.x))
    }) 
```

例如。[http://jsfiddle.net/3saQW/](http://jsfiddle.net/3saQW/)

我建议了解 d3.js 如何绑定数据。甚至可能不需要 jQuery。这是一个很好的教程系列：[http ://alignedleft.com/tutorials/d3/binding-data/](http://alignedleft.com/tutorials/d3/binding-data/)

# php - 多维数组格式化

> ID：15893035
> 
> 赞同：0
> 
> 时间：2013-04-09T03:58:55.227
> 
> 标签：php, arrays, multidimensional-array, foreach

我正在做一个个人项目来创建一个关键字生成工具。我已经设置了一个递归函数来循环遍历多维数组，以找出提供的关键字列表中的所有可能组合。

```
public function recurseful($start, $args)
{
if (is_array($args))
    {
        foreach ($args[0] as $value)
        {
            $this->output[] = trim("{$start} {$value}");
            if (count($args) > 1)
            {
                $this->recurseful($value, array_slice($args, 1));
            }
        }
    }
return;
} 
```

我传入：

```
$data = array(
    array('New York', 'New York City'),
    array('hotel', 'lodging','motel'),
);

$results = recurseful('', $data); 
```

它成功地迭代并为我提供了各种关键字组合的列表。但是，它将它们全部返回到一个*$output*数组中。该函数旨在从 $Data[0]（或者更确切地说是 $args[0]）中获取值，并将它们与给定的任何其他关键字匹配。

我宁愿他们回来

```
1st ('New York', 'New York City')
2nd ('New York hotel', 'New York lodging', 'New York motel')
3rd ('New York City hotel', 'New York City lodging', 'New York City motel') 
```

它目前将所有这些匹配项返回为一个。我如何让他们去不同的阵列？由于*第一个*是 的精确匹配`$data[0]`，这很容易获得，但是在遍历所有可能的组合以获取 中的一个值后，我将如何强制一个新数组`$data[0]`？（因此，如果 中有 3 个值`$data[0]`，则会返回 3 个额外的数组）。

**屏幕截图** 用户将所需的单词选择输入到电子表格中。 ![初始输入](https://i.stack.imgur.com/In42i.jpg)

结果将与此类似。所以我想将每一列数据放入它自己的数组中。 ![预期产出](https://i.stack.imgur.com/18Q7W.jpg) 上面的当前解决方案只是将所有内容放入自己的数组中，因此将在同一列中返回。

![var_dump](https://i.stack.imgur.com/oLyjh.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:52:31.127

经过同事的更多思考和帮助，我已经找到了一个可行的解决方案。

```
function permutate($data, $limit){
    $this->limit = $limit;
    $this->data = $data;
    $this->numLevels = count($this->data);

    $this->possiblePermutations = 1;
    foreach ($this->data as $array){
        $this->possiblePermutations *= count($array);
    }
    for ($i = 0; $i < $this->numLevels - 0; $i++){
        $this->permutations[$i] = array();
    }

    $this->recurse(0, 0, '');

    return $this->permutations;
}

private function recurse($currentLevel, $level, $string){
    if ($this->numPerms == $this->limit) 
        return;

    foreach ($this->data[$level] as $val){
        if ($this->numPerms == $this->limit) 
            return;

        $newString = "$string $val";
        if ($level == $currentLevel){
            $this->permutations[$level][] = trim($newString);
            $this->numPerms++;
        }

        if ($level < $this->numLevels - 1 AND $level <= $currentLevel){
            $this->recurse($currentLevel, $level + 1, $newString);
        }
    }

    if (! $level AND $currentLevel < $this->numLevels){
        $this->recurse($currentLevel + 1, 0, '');
    }
} 
```

这给了我想要的结果。

# c# - 参数字典包含参数的空条目

> ID：15893036
> 
> 赞同：3
> 
> 时间：2013-04-09T03:58:55.960
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我有两个视图页面使用相同的控制器和模型作为更改页面布局的一种方式，但我无法显示我的第二页。这是我的错误信息：`The parameters dictionary contains a null entry for parameter id of non-nullable type for method system.web.mvc.actionaresult ListView(int32) in UserController`

不知道是什么导致了问题，除了只是更改视图布局外，我对第一个视图页面（工作）使用了相同的代码。

**第一个视图**

```
<div>
<a href="/Roster/ListView">Click Here for List view</a>
</div>

<section id="users" data-bind="foreach: Users">
    <div id="nameImage">
        <figure id="content">
            <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
            <figcaption>
                <a title="Email" id="emailIcon" class="icon-envelope icon-white" data-bind="attr:{'href':'mailto:' + Email()}"></a>
                <a title="Profile" id="profileIcon" class="icon-user icon-white"></a>
            </figcaption>
        </figure>
        <p data-bind="text:Name"></p>
        </div>
    </section>
</section> 
```

**列表显示**

```
<div class="accordion-inner">
<div data-bind="foreach: Users">
    <div>
        <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
        <p data-bind="text:Name"></p>
    </div>
</div> 
```

**控制器**

```
 public ActionResult View(int id)
    {
        // get the menu from the cache, by Id
        ViewBag.SideBarMenu = SideMenuManager.GetRootMenu(id);
        ViewBag.UserApiURL = "/api/User/" + id.ToString();
        return View(); 
    }

    public ActionResult ListView(int id)
    {
        // get the menu from the cache, by Id
        ViewBag.SideBarMenu = SideMenuManager.GetRootMenu(id);
        ViewBag.UserApiURL = "/api/User/" + id.ToString();
        return View();
    }
} 
```

**API 控制器**

```
private UserService _userService = new UserService();

    public IEnumerable<User> Get(int? id)
    {
        if (id.HasValue)
        {
            return _userService.GetUsers(id.Value);
        }
        throw new HttpResponseException(HttpStatusCode.NotFound);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:03:43.563

您编写以下链接`href="/Roster/ListView"`，但操作**ListView**需要`parameter id`，此处缺少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T04:05:49.493

URL`/Roster/ListView`缺少 ID 值。您需要：

1.  将 URL 更改为类似`/Roster/ListView/123`
2.  `int`通过将类型从 更改为来更改操作方法以允许可为空的整数`int?`。然后在 action 方法中，您需要检查`id`参数是否为 null 并适当处理，例如返回错误或忽略 id。

# c++ - 如何在 Qt5 中创建/读取/写入 JSON 文件

> ID：15893040
> 
> 赞同：70
> 
> 时间：2013-04-09T03:59:19.903
> 
> 标签：c++, json, qt, qt5

Qt5 有一个新的 JSON 解析器，我想使用它。问题在于，通俗地说，这些函数的作用以及如何用它编写代码并不太清楚。那或者我可能读错了。

我想知道在 Qt5 中创建 JSON 文件的代码以及“封装”的含义。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-09-12T17:05:33.947

**示例：从文件中读取 json**

```
/* test.json */
{
   "appDesc": {
      "description": "SomeDescription",
      "message": "SomeMessage"
   },
   "appName": {
      "description": "Home",
      "message": "Welcome",
      "imp":["awesome","best","good"]
   }
}

void readJson()
   {
      QString val;
      QFile file;
      file.setFileName("test.json");
      file.open(QIODevice::ReadOnly | QIODevice::Text);
      val = file.readAll();
      file.close();
      qWarning() << val;
      QJsonDocument d = QJsonDocument::fromJson(val.toUtf8());
      QJsonObject sett2 = d.object();
      QJsonValue value = sett2.value(QString("appName"));
      qWarning() << value;
      QJsonObject item = value.toObject();
      qWarning() << tr("QJsonObject of description: ") << item;

      /* in case of string value get value and convert into string*/
      qWarning() << tr("QJsonObject[appName] of description: ") << item["description"];
      QJsonValue subobj = item["description"];
      qWarning() << subobj.toString();

      /* in case of array get array and convert into string*/
      qWarning() << tr("QJsonObject[appName] of value: ") << item["imp"];
      QJsonArray test = item["imp"].toArray();
      qWarning() << test[1].toString();
   } 
```

* * *

**输出**

```
QJsonValue(object, QJsonObject({"description": "Home","imp": ["awesome","best","good"],"message": "YouTube"}) ) 
"QJsonObject of description: " QJsonObject({"description": "Home","imp": ["awesome","best","good"],"message": "YouTube"}) 
"QJsonObject[appName] of description: " QJsonValue(string, "Home") 
"Home" 
"QJsonObject[appName] of value: " QJsonValue(array, QJsonArray(["awesome","best","good"]) ) 
"best" 
```

* * *

**示例：从字符串中读取 json**

如下将 json 分配给字符串并使用`readJson()`前面显示的函数：

```
val =   
'  {
       "appDesc": {
          "description": "SomeDescription",
          "message": "SomeMessage"
       },
       "appName": {
          "description": "Home",
          "message": "Welcome",
          "imp":["awesome","best","good"]
       }
    }'; 
```

* * *

**输出**

```
QJsonValue(object, QJsonObject({"description": "Home","imp": ["awesome","best","good"],"message": "YouTube"}) ) 
"QJsonObject of description: " QJsonObject({"description": "Home","imp": ["awesome","best","good"],"message": "YouTube"}) 
"QJsonObject[appName] of description: " QJsonValue(string, "Home") 
"Home" 
"QJsonObject[appName] of value: " QJsonValue(array, QJsonArray(["awesome","best","good"]) ) 
"best" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-03T19:51:32.280

遗憾的是，许多 JSON C++ 库的 API 使用起来并不简单，而 JSON 旨在易于使用。

因此，我在上面的答案之一中显示的 JSON doc 上的[gSOAP 工具中尝试了](http://www.genivia.com/tutorials.html)[jsoncpp](http://www.genivia.com/doc/xml-rpc-json/html/index.html)，这是使用 jsoncpp 生成的代码，用于在 C++ 中构造 JSON 对象，然后以 JSON 格式将其写入 std::cout：

```
value x(ctx);
x["appDesc"]["description"] = "SomeDescription";
x["appDesc"]["message"] = "SomeMessage";
x["appName"]["description"] = "Home";
x["appName"]["message"] = "Welcome";
x["appName"]["imp"][0] = "awesome";
x["appName"]["imp"][1] = "best";
x["appName"]["imp"][2] = "good";
std::cout << x << std::endl; 
```

这是 jsoncpp 生成的代码，用于从 std::cin 解析 JSON 并提取其值（`USE_VAL`根据需要替换）：

```
value x(ctx);
std::cin >> x;
if (x.soap->error)
  exit(EXIT_FAILURE); // error parsing JSON
#define USE_VAL(path, val) std::cout << path << " = " << val << std::endl
if (x.has("appDesc"))
{
  if (x["appDesc"].has("description"))
    USE_VAL("$.appDesc.description", x["appDesc"]["description"]);
  if (x["appDesc"].has("message"))
    USE_VAL("$.appDesc.message", x["appDesc"]["message"]);
}
if (x.has("appName"))
{
  if (x["appName"].has("description"))
    USE_VAL("$.appName.description", x["appName"]["description"]);
  if (x["appName"].has("message"))
    USE_VAL("$.appName.message", x["appName"]["message"]);
  if (x["appName"].has("imp"))
  {
    for (int i2 = 0; i2 < x["appName"]["imp"].size(); i2++)
      USE_VAL("$.appName.imp[]", x["appName"]["imp"][i2]);
  }
} 
```

此代码使用 gSOAP 2.8.28 的 JSON C++ API。我不希望人们更改库，但我认为这种比较有助于正确看待 JSON C++ 库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-20T00:19:12.167

QT 下的 JSON 实际上是相当令人愉快的——我很惊讶。这是一个如何创建具有某种结构的 JSON 输出的示例。

请原谅我没有解释这些字段的含义——它是一个业余无线电处理输出脚本。

这是 QT C++ 代码

```
void CabrilloReader::JsonOutputMapper()
{
  QFile file(QDir::homePath() + "/1.json");
  if(!file.open(QIODevice::ReadWrite)) {
      qDebug() << "File open error";
    } else {
      qDebug() <<"JSONTest2 File open!";
    }

  // Clear the original content in the file
  file.resize(0);

  // Add a value using QJsonArray and write to the file
  QJsonArray jsonArray;

  for(int i = 0; i < 10; i++) {
      QJsonObject jsonObject;
      CabrilloRecord *rec= QSOs.at(i);
      jsonObject.insert("Date", rec->getWhen().toString());
      jsonObject.insert("Band", rec->getBand().toStr());
      QJsonObject jsonSenderLatObject;
      jsonSenderLatObject.insert("Lat",rec->getSender()->fLat);
      jsonSenderLatObject.insert("Lon",rec->getSender()->fLon);
      jsonSenderLatObject.insert("Sender",rec->getSender_call());
      QJsonObject jsonReceiverLatObject;
      jsonReceiverLatObject.insert("Lat",rec->getReceiver()->fLat);
      jsonReceiverLatObject.insert("Lon",rec->getReceiver()->fLon);
      jsonReceiverLatObject.insert("Receiver",rec->getReceiver_call());
      jsonObject.insert("Receiver",jsonReceiverLatObject);
      jsonObject.insert("Sender",jsonSenderLatObject);
      jsonArray.append(jsonObject);
      QThread::sleep(2);
    }

  QJsonObject jsonObject;
  jsonObject.insert("number", jsonArray.size());
  jsonArray.append(jsonObject);

  QJsonDocument jsonDoc;
  jsonDoc.setArray(jsonArray);
  file.write(jsonDoc.toJson());
  file.close();
  qDebug() << "Write to file";
} 
```

它需要一个内部 QT 结构（一个指向 CabrilloRecord 对象的指针列表......您只需忽略它）并提取一些字段。然后这些字段以嵌套的 JSON 格式输出，如下所示。

```
[
    {
        "Band": "20",
        "Date": "Sat Jul 10 12:00:00 2021",
        "Receiver": {
            "Lat": 36.400001525878906,
            "Lon": 138.3800048828125,
            "Receiver": "8N3HQ       "
        },
        "Sender": {
            "Lat": 13,
            "Lon": 122,
            "Sender": "DX0HQ       "
        }
    },
    {
        "Band": "20",
        "Date": "Sat Jul 10 12:01:00 2021",
        "Receiver": {
            "Lat": 36.400001525878906,
            "Lon": 138.3800048828125,
            "Receiver": "JA1CJP      "
        },
        "Sender": {
            "Lat": 13,
            "Lon": 122,
            "Sender": "DX0HQ       "
        }
    }] 
```

我希望这能加快其他人在这个主题上的进展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:55:07.253

一个关于如何使用它的例子会很棒。[Qt 论坛](http://www.qtcentre.org/threads/52857-reading-JSON-file-in-Qt5)上有几个例子，但你说得对，应该扩展官方文档。

`QJsonDocument`它本身确实不会产生任何东西，您必须将数据添加到其中。这是通过`QJsonObject`,`QJsonArray`和`QJsonValue`类完成的。顶级项需要是数组或对象（因为`1`不是有效的 json 文档，`{foo: 1}`而是。）

# c - 使用 sigaltstack 结构不知道存储大小

> ID：15893043
> 
> 赞同：1
> 
> 时间：2013-04-09T03:59:35.773
> 
> 标签：c, linux, unix, struct

我正在使用 sigalstack 结构，详细信息位于：

[在这里（MAC OSX）](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/sigaltstack.2.html)

[这里（Linux）](http://man7.org/linux/man-pages/man2/sigaltstack.2.html)

我只是这样声明

```
struct sigaltstack aa; 
```

我不断收到以下错误

```
error: storage size of ‘aa’ isn’t known 
```

我阅读并检查[了“名称”的存储大小未知](https://stackoverflow.com/questions/4045550/storage-size-of-names-isnt-known)，但我只是声明它，所以它并不真正适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:02:24.453

您不能像那样只使用未初始化的备用堆栈。您必须在其字段中为堆栈分配空间并在其`ss_sp`字段中设置相应的大小`ss_size`。

您链接的 man7 链接对此有更多信息。实际上，它在页面底部提供了一个示例：

```
stack_t ss;

ss.ss_sp = malloc(SIGSTKSZ);
if (ss.ss_sp == NULL)
    /* Handle error */;
ss.ss_size = SIGSTKSZ;
ss.ss_flags = 0;
if (sigaltstack(&ss, NULL) == -1)
    /* Handle error */; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:07:21.973

您链接到的[Mac OS](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/sigaltstack.2.html)页面显示（在“旧版概要”部分中）：

> ### 兼容性
> 
> 使用（过时的）`sigaltstack`结构将导致编译器诊断。使用`stack_t`，在 中定义`<signal.h>`。

这表明您不应尝试使用`struct sigaltstack`. 该页面还显示了您应该如何在 Mac OS 上执行此操作。Linux 页面还显示了您应该如何使用该`stack_t`类型，并且根本没有提及`struct sigaltstack`。

# java - 休眠条件连接到包含外键的表

> ID：15893044
> 
> 赞同：1
> 
> 时间：2013-04-09T03:59:35.873
> 
> 标签：java, sql, hibernate, hibernate-criteria

我有两张桌子：

```
Client (clientId, firstName, lastName, gender)

Event (clientId, eventId) 
```

我需要使用 Criteria 表示类似于以下内容的查询：

```
SELECT c.clientId, c.firstName, c.lastName, c.gender, MAX(eventId)
FROM Client c JOIN Event e ON c.clientId = e.clientId
GROUP BY c.clientId, c.firstName, c.lastName, c.gender 
```

我试过这个：

```
final Criteria criteria = session.createCriteria(Client.class);
criteria.setFetchMode("Event", FetchMode.JOIN);
criteria.setProjection(Projections.projectionList().add(Projections.groupProperty("clientId")).add(Projections.max("eventId"))); 
```

但它会在消息的最后一行引发异常：

> HibernateQueryException：无法解析属性：eventId of：客户端

如何指定表之间的联接，该`Client`表本身不包含与事件表相关的`clientId`列，但表上的列`Event`是返回表的外键`Client`？

正如你所看到的，它真的被排除在外了`Client`，我只需`eventId`要从`Event`表中选择最大值。此外，正如我所提到的，我正在尝试对基于`Client`该类的现有 Criteria 查询进行更改。它用于检索所有活动客户端的所有列。我只需要在查询结果中添加一列 - 最大值`eventId`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:13:24.547

使用别名

```
Criteria criteria = session.createCriteria(Event.class, "et").
createAlias("et.Client", "ct").
setProjection(Projections.projectionList().         
add(Projections.groupProperty("et.clientId")).
add(Projections.max("et.eventId"))); 
```

有关标准的更多详细信息，请参阅[标准查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-projection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:16:38.643

这是显而易见的。因为`Client`类没有`eventId`属性，并且您的标准是为`Client`类定义的。

**当尝试在 A 的 Criteria 中使用 B 类的属性时，您必须使用别名。**

您所要做的就是像这样修改您的代码：

```
final Criteria criteria = session.createCriteria(Event.class, "event");
criteria.createAlias("event.client", "client");
criteria.setProjection(Projections.projectionList().add(Projections.groupProperty("clientId")).add(Projections.max("eventId"))); 
```

* * *

**已更新**（根据您的评论）

由于您的查询需要`Event`类，因此您必须有一个`Criteria`此类。所以你必须这样：

```
final Criteria criteria = session.createCriteria(Event.class, "event");
criteria.createAlias("event.client", "client");
//The criteria below, is returning clientId
DetachedCriteria eventCr = DetachedCriteria.forClass(Event.class, "event");
eventCr.setProjection(Projections.projectionList().add(Projections.groupProperty("clientId")).add(Projections.max("eventId")));
//Now using subqueries you can achieve your goal
criteria.add(Subqueries.propertyIn("clientId", eventCr)); 
```

我不确定你在寻找什么，但我希望我给了你一些好的提示。`Subqueries.propertyEq`如果您的查询必须返回单个 id，您可能想尝试一下。

# java - 用于 JAVA 的 TWAIN/WIA 实现

> ID：15893046
> 
> 赞同：8
> 
> 时间：2013-04-09T03:59:46.370
> 
> 标签：java, 64-bit, wia, twain, image-scanner

我正在开发一个与扫描仪交互的应用程序（Java Applet）。我知道我需要一个 Twain 库或 WIA 库才能使其在 Windows 中工作。但我不确定两者有什么区别？我正在尝试使用这个库：

[http://thorntonzone.com/manuals/Compression/Fax,%20IBM%20MMR/MMSC/mmsc/uk/co/mmscomputing/device/twain/index.html](http://thorntonzone.com/manuals/Compression/Fax,%20IBM%20MMR/MMSC/mmsc/uk/co/mmscomputing/device/twain/index.html)

JAR 文件链接已损坏，所以我从这里得到它。 [http://rsbweb.nih.gov/ij/plugins/twain-scan.html](http://rsbweb.nih.gov/ij/plugins/twain-scan.html)

以及来自这里的 DLL：http: [//sourceforge.net/projects/twain-dsm/ ?source=dlp](http://sourceforge.net/projects/twain-dsm/?source=dlp)

但是，它没有检测到源。这是错误日志：

[http://pastebin.com/cB9gL0ip](http://pastebin.com/cB9gL0ip)

我在 64 位机器上。有人成功了吗？

TWAIN 规范太长无法遵循，我还没有找到任何关于 WIA 实施的资源。

非常感谢任何帮助/指针/资源。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T21:16:50.963

# 使用同位模式

对于 java 中的 twain 设备控制，**所有组件都需要处于相同的模式。**即 JRE、Twain DSM（源管理器）和 Twain 驱动程序（扫描仪驱动程序）**都需要为 32 位或全部为 64 位。**没有混合。

64 位 Windows 的默认安装包含 Twain DSM 的 32 位模式。你说你已经下载了 64 位 DSM。扫描仪的驱动程序很可能是 32 位的，这就是找不到它的原因。

您有 2 个选项：

## 将其全部保留为 64 位。

*   使用 64 位 TWAINDSM.DLL。
*   确保您的 JRE/JDK 是 64 位的。
*   确保您的扫描仪具有 64 位驱动程序。

我的扫描仪没有可用的 64 位驱动程序，但我使用 64 位“虚拟扫描仪”测试了 64 位配置并且它工作正常。

## 全部保持 32 位（推荐）

*   使用 32 位 TWAINDSM.DLL。
*   确保您的 JRE/JDK 是 32 位的。
*   使用扫描仪的 32 位驱动程序（可能是默认的）。

您可以在此处下载 32 位和 64 位[twain 虚拟扫描仪](http://sourceforge.net/projects/twain-samples/files/TWAIN%202%20Sample%20Application/)。

注意：我提到 JDK 是因为如果您从 IDE 运行代码，它可能指向与系统默认值不同的 JRE。真实的故事，发生在我身上。

# vb.net - 来自 Arraylist 元素的函数调用不起作用

> ID：15893048
> 
> 赞同：0
> 
> 时间：2013-04-09T04:00:00.860
> 
> 标签：vb.net, function, arraylist

我试图让一个类分配的函数起作用，但是当程序遇到有问题的特定行时，它会死掉，并且在该行之后什么都不会执行。程序没有锁定，只是当前执行路径死了。

我尝试过运行调试，但发生了很多相同的情况。一旦我点击应该从存储在 Arraylist 元素中的对象调用函数的链接，应该调用的实际函数处的断点就不会被命中，并且不会发生任何进一步的事情。

```
Public Structure Appliances

    ' Create New Appliance object
    Public Sub New(name As String, pusage As Double)
        aName = name
        aPUsage = pusage
    End Sub

    ' Create New Washer Object
    Public Sub New(name As String, pusage As Double, wusage As Double)
        aName = name
        aPUsage = pusage
        aWUsage = wusage
    End Sub

    ' Functions
    Public Function getAName()
        Return aName
    End Function

    Public Function getAPUsage()
        Return aPUsage
    End Function

    Public Function getAWUsage()
        Return aWUsage
    End Function

    Dim aName As String ' Appliance Name
    Dim aPUsage As Double ' Appliane Power Usage
    Dim aWUsage As Double ' Appliance Water Usage

End Structure

...

Public Class Form1

...
    Dim appList As New ArrayList() ' Create an arraylist appliance objects
    Public appTemp As Appliances ' To store appliance objects until they can be added to the arraylist

...
    Private Function getAppInfo()
        getAppInfo = Nothing

        Do While fInStream.Peek() <> -1

            s = fInStream.ReadLine() ' Get a line from the file and set s to it

            Dim words As String() = s.Split(New Char() {","c}) ' Split the line contents along commas and set those parts into words

            words(0) = words(0).Replace("_", " ") ' Reaplce underscores with spaces

            If (words.Count = 3) Then ' If words contains the washer appliance
                appTemp = New Appliances(words(0), Double.Parse(words(1)), Double.Parse(words(2)))
                appList.Add(appTemp)

            Else ' For all other appliances
                appTemp = New Appliances(words(0), Double.Parse(words(1)))
                appList.Add(appTemp)

            End If

        Loop
    End Function

    Private Function setUsage(name As String)
        setUsage = Nothing

        ' Find appliance
        For i = 0 To appList.Count
            If (name = appList(i).getAName()) Then
                If (name = "Washer") Then
                    s = appList(i).getWUsage() ' !!!This is the line where the execution dies at, nothing after this line is processed and the function call is not completed
                    txtbGPH.Text = s
                End If

                MsgBox("Test 1")
                Exit For

            ElseIf (i = appList.Count) Then
                MsgBox("Appliance could not be found")
            End If
        Next
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:29:49.050

如果您只想插入一种类型，请使用 a`List(Of X)`而不是：`ArrayList`

```
Dim appList As New List(Of Appliances) 
```

除非必要，否则我建议您在方法中声明您的 temp var。无论如何，在这种情况下你不需要它，你可以通过这种方式添加你的 var：

```
appList.Add(New Appliances(words(0), Double.Parse(words(1)))) 
```

使用这种用法（使用列表），您将不需要使用`arraylistObj.Item(i).Method()`，您可以简单地使用常用方式：

```
s = appList(i).getWUsage() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:15:20.630

没关系，我刚才想通了。我不知道数组列表不是“数组列表”而是一个集合。我认为它可能会像其他面向集合的对象一样，并且您必须使用 .item(i) 来访问元素，事实证明就是这样。

`txtbGPH.text = appList.item(i).getAWusage()`

在 OP 中指示的有问题的行执行后产生正确的行为和其余代码，就像在被调用函数处设置的断点一样。

# sql - Oracle 相当于 PostgreSQL 的子选择到数组？

> ID：15893052
> 
> 赞同：1
> 
> 时间：2013-04-09T04:00:21.233
> 
> 标签：sql, oracle11g

Oracle 中是否有等效的方法可以从子选择中获取数组，所以如果子选择的结果中有不止一行，最终结果中仍然只有一行？

例如：

```
select c.name, array(select order_id from ORDER o where o.customer_id = c.id)
from CUSTOMER c; 
```

每个客户只会返回一行，其中每个返回行中的第二个值是 order_id 的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:46:38.093

您可以使用[CURSOR](http://docs.oracle.com/cd/B28359_01/server.111/b28286/expressions006.htm#i1035107)：

```
select c.name, cursor(select order_id from ORDER o where o.customer_id = c.id)
from CUSTOMER c; 
```

然后，您的数据库接口将有某种方式从游标结果中获取结果。

# mysql - 登录系统的基础知识是什么

> ID：15893054
> 
> 赞同：-1
> 
> 时间：2013-04-09T04:00:40.327
> 
> 标签：mysql, database, authentication, login-system

我正在做一个关于登录系统的项目。我想知道登录系统的基础知识，包括其身份验证方法，以便被称为“高级”登录系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:03:25.900

嗯，您需要密码确认，密码重置的秘密问答，检查用户是否为管理员，检查是否被阻止，密码强度取决于输入的字符等。

# iphone - 裁剪图像以对结果进行处理

> ID：15893056
> 
> 赞同：1
> 
> 时间：2013-04-09T04:00:57.060
> 
> 标签：iphone, ios, objective-c, xcode

我想识别写在图像中的文本，所以我想要裁剪这个图像以在所需部分上进行处理，而不是在所有图像上。所以知道我该怎么做吗？这是我在图像上使用的代码：

```
NSString*ret= [self DoProcess:capturedImage]; 
```

这是我想裁剪捕获的图像以对其进行处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:06:22.500

您可以为要提取的图像部分定义一个 CGRect ，然后使用以下方法：

```
CGRect cropRect = ...;
UIImage *cropped = [UIImage imageWithCGImage:CGImageCreateWithImageInRect([fullImage CGImage], cropRect) scale:fullImage.scale orientation:fullImage.imageOrientation]; 
```

# php - 如何不通过 git 将 sqlite db 上传到 heroku？

> ID：15893057
> 
> 赞同：1
> 
> 时间：2013-04-09T04:01:02.487
> 
> 标签：php, facebook, git, sqlite, heroku

由于我之前托管它的网站上缺乏 SSL 安全性，我正在创建一个 Facebook 应用程序并将其迁移到 Heroku。我在我的应用程序中使用 SQLite DB 和 PHP。我是 git 新手，对它了解不多。真的只是如何将我的本地 repo 推送到 heroku 的服务器的基础知识。我有一个关于不上传文件的问题。将来我可能需要对我的应用程序进行一些更改，但是目前当我将我的 repo 重新推送到 heroku 时，我的数据库将被清除并仅使用我当前存储在本地数据库中的数据进行刷新。我查看了“.gitignore”文件和“git update-index --assume-unchanged filename.ext”。但这些方法都不起作用。我'

谢谢你，布莱斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:25:00.960

```
git update-index --assume-unchanged filename.ext 
```

只要您没有明确地重新添加文件（例如使用`git add .`），就真的应该工作。用于`git status`确保在提交之前文件未标记为已修改。

另一种选择是在生产中部署不同的数据库文件；这样，对您的开发数据库的更改并不重要。

# gdb - GDB 脚本 - 仅在不调试核心文件时执行命令

> ID：15893058
> 
> 赞同：0
> 
> 时间：2013-04-09T04:01:09.957
> 
> 标签：gdb, core-file

我正在添加一些我认为对我的 GDB 启动脚本有用的功能。一些启动命令仅适用于“实时”目标，或者具有仅对实时目标有意义的组件。我希望能够测试核心文件的存在（或不存在），并根据需要跳过或修改这些命令。

我在 Python API 中四处查看，但找不到任何东西可以告诉我劣质文件是核心文件还是实时程序。我对在 GDB 本身或 Python GDB 脚本接口中工作的脚本解决方案很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:02:47.757

看起来没有办法做到这一点。

我希望有一个属性 on `gdb.Inferior`，但[没有一个](http://sourceware.org/gdb/onlinedocs/gdb/Inferiors-In-Python.html#Inferiors-In-Python)。

[在 GDB bugzilla](http://sourceware.org/bugzilla/enter_bug.cgi?product=gdb)中提交功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-03T17:49:48.200

`info proc status`返回`"unable to handle request"`核心文件，而对于实时进程，它返回几行，第一行看起来像：`"process 1234"`.

您可以运行该命令并使用`execute_output()`此处的函数将其第一个输出行与该字符串进行比较：[https ://github.com/crossbowerbt/GDB-Python-Utils/blob/master/gdb_utils.py](https://github.com/crossbowerbt/GDB-Python-Utils/blob/master/gdb_utils.py)

# javascript - 仅从 Internet Explorer 上的文件输入中获取文件名

> ID：15893066
> 
> 赞同：7
> 
> 时间：2013-04-09T04:01:53.633
> 
> 标签：javascript, html

我只需要从 HTML 输入文件中返回文件名。

```
<input type="file" id="whatever" /> 
```

我用来获取文件名的 JavaScript 代码是：

```
document.getElementById("whatever").value; 
```

在 Firefox 中它只给出我想要的文件名，但在 IE 中我得到完整路径。

我认为字符串操作是获得名称的唯一方法。

在 JavaScript 中仅获取名称（扩展名）的最简单/最短的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T04:07:23.297

你可以试试这个

```
var path = document.getElementById("whatever").value;
var fileName = path.match(/[^\/\\]+$/);
console.log(fileName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T04:06:37.850

我希望这行得通。

```
var fullFileName = document.getElementById("whatever").value;
var fileName = fullFileName.substr(fullFileName.lastIndexOf("\\")+1, fullFileName.length); 
```

这是那个小提琴的[小提琴](http://jsfiddle.net/bittu4u4ever/4NcjW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:07:30.313

```
var path = document.getElementById("whatever").value;
var filename = path.substring(path.lastIndexOf("/") + 1); 
```

这将为您提供最后一个之后的所有内容`/`，但也与缺少`/`s 兼容。如果您还需要处理`\`可爱的路径分隔符，您总是可以先使用它：

```
path.replace(/\\/g, "/") 
```

# c++ - C++ valgrid 错误：大小为 8 的读取无效，地址 0x8 未堆栈、malloc 或（最近）释放？

> ID：15893067
> 
> 赞同：1
> 
> 时间：2013-04-09T04:01:55.533
> 
> 标签：c++, cplex

我编译了我的代码并运行了它，但它给了我分段错误。

所以我使用 valgrid 测试了我的可执行程序。我收到以下消息：

```
==7932== Invalid read of size 8
==7932==    at 0x491840: IloExpr::operator+=(IloNumLinExprTerm) (in /home/hna/g)
==7932==    by 0x43F261: main (in /home/hna/g)
==7932==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==7932== 
==7932== 
==7932== Process terminating with default action of signal 11 (SIGSEGV)
==7932==  Access not within mapped region at address 0x8
==7932==    at 0x491840: IloExpr::operator+=(IloNumLinExprTerm) (in /home/hna/g)
==7932==    by 0x43F261: main (in /home/hna/g)
==7932==  If you believe this happened as a result of a stack
==7932==  overflow in your program's main thread (unlikely but
==7932==  possible), you can try to increase the size of the
==7932==  main thread stack using the --main-stacksize= flag.
==7932==  The main thread stack size used in this run was 8388608.
==7932== 
==7932== HEAP SUMMARY:
==7932==     in use at exit: 88,192 bytes in 55 blocks
==7932==   total heap usage: 56 allocs, 1 frees, 88,224 bytes allocated
==7932== 
==7932== LEAK SUMMARY:
==7932==    definitely lost: 0 bytes in 0 blocks
==7932==    indirectly lost: 0 bytes in 0 blocks
==7932==      possibly lost: 0 bytes in 0 blocks
==7932==    still reachable: 88,192 bytes in 55 blocks
==7932==         suppressed: 0 bytes in 0 blocks
==7932== Rerun with --leak-check=full to see details of leaked memory
==7932== 
==7932== For counts of detected and suppressed errors, rerun with: -v
==7932== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2) 
```

我的代码是这样的。任何人都可以帮我调试吗？谢谢！

```
int main()
{   
   int m[8][8];
   m[0][0] = 6; m[1][1] = 6; m[2][2] = 6; m[3][3] = 6;
   m[0][4] = 4; m[1][4] = 4; m[2][5] = 4; m[3][5] = 4;
   m[4][7] = 10; m[5][6] = 10;

IloEnv env;

try {
IloModel model(env);
int n = 4;
int r = 2;
int color = 5;
int N = n*r;
int addupto = 10;

IloArray<IloArray<IloNumVarArray> > x(env, N);  //change to IntVarArray 0~1 to use this for getValues

for(int i=0; i<N; i++) {
    x[i] = IloArray<IloNumVarArray> (env, N);
    for(int j=0; j<N; j++) {
        x[i][j] = IloNumVarArray(env, color);
        for(int k=0; k<color; k++) {
            x[i][j][k] = IloNumVar(env, 0.0, 1.0, ILOINT);
        }
    }
}

IloArray<IloArray<IloExpr> > sumOfColors(env, N);

for(int i=0; i<N; i++) {
    sumOfColors[i] = IloArray<IloExpr>(env, N);
    for(int j=0; j<N; j++) {
        sumOfColors[i][j] = IloExpr(env);
    }
}
for(int i=0; i<N; i++) {
    for(int j=0; j<N; j++) {
        for(int k=0; k<color; k++) {
        sumOfColors[i][j] += x[i][j][k];
        }
    }
}

IloArray<IloArray<IloRange> > range_sumOfColors = IloArray<IloArray<IloRange> >(env, N);

for(int i=0; i<N; i++) {
    range_sumOfColors[i] = IloArray<IloRange> (env, N);
    for(int j=0; j<N; j++) {
        range_sumOfColors[i][j] = IloRange(env, 1, sumOfColors[i][j], 1);
    }
}

IloArray<IloArray<IloExpr> > weightedSumBR = IloArray<IloArray<IloExpr> >(env, r);

for(int i=0; i<r; i++) {
    weightedSumBR[i] = IloArray<IloExpr>(env, r);
    for(int j=0; j<color; j++) {
        for(int k=i*n; k<(i+1)*n; k++) {
            for(int l=0; l<N; l++) {
                 weightedSumBR[i][j] += m[k][l]*x[k][l][j];
            }
        }
    }
}

IloArray<IloArray<IloRange> > range_weightedSumBR(env, r);

for(int i=0; i<r; i++) {
    range_weightedSumBR[i] = IloArray<IloRange>(env, r);
    for(int j=0; j<color; j++) {
        range_weightedSumBR[i][j] = IloRange(env, 0, weightedSumBR[i][j], addupto);
    }
}

IloArray<IloArray<IloExpr> > weightedSumBC(env, r);

for(int i=0; i<r; i++) {
     weightedSumBC[i] = IloArray<IloExpr>(env, r);
     for(int j=0; j<color; j++) {
         for(int k=0; k<N; k++) {
             for(int l=i*n; l<(i+1)*n; l++) {
                 weightedSumBC[i][j] += m[k][l]*x[k][l][j];
             }
         }
     }
}

IloArray<IloArray<IloRange> > range_weightedSumBC(env, r);

for(int i=0; i<r; i++) {
    range_weightedSumBC[i] = IloArray<IloRange>(env, r); 
    for(int j=0; j<color; j++) {
        range_weightedSumBC[i][j] = IloRange(env, 0, weightedSumBC[i][j], addupto);
    }
}

for(int i=0; i<N; i++) {
    for(int j=0; j<N; j++) {
        model.add(range_sumOfColors[i][j]);
    }
}

for(int i=0; i<r; i++) {
    for(int j=0; j<color; j++) {
        model.add(range_weightedSumBR[i][j]);
        model.add(range_weightedSumBC[i][j]);
    }
}

IloCplex cplex(env);
cplex.extract(model);
cplex.solve();
cplex.out() << "solution status = " << cplex.getStatus() << endl;
cplex.out() << endl;

IloArray<IloArray<IloNumArray> > xcp (env, N);  //change to IntVarArray 0~1 to use this for getValues

for(int i=0; i<N; i++) {
    xcp[i] = IloArray<IloNumArray> (env, N);
    for(int j=0; j<N; j++) {
        xcp[i][j] = IloNumArray(env, color);
        for(int k=0; k<color; k++) {
            xcp[i][j][k] = IloNum(env, 0.0, 1.0, ILOINT);
        }
    }
}

    for(int i=0; i<N; i++) {
        for(int j=0; j<N; j++) {
            cplex.out() << cplex.getValues(x[i][j], xcp[i][j]) << endl;
        }
    }

    if (cplex.getStatus() == IloAlgorithm::Infeasible){
        //    cplex.out() << endl << "*** the model is not infeasible ***" << endl;

        ofstream outdata; 
        outdata.open("badmatrix.csv");
        if (!outdata){cerr << "Error: file could not be opened" << endl;
            exit(1);}
        else{
            size_t it1;
            size_t it2;
            size_t n = 8; //m.size();
            for (it1=0;it1<n;it1++){
                for (it2 = 0; it2<n; it2++){
                    outdata << matr[it1][it2] << endl;}}  
        }
        outdata.close();
        env.end();
        cplex.out() << "Infeasible matrix detected" << endl;
        return 1;
    }
}
catch(IloException& e) {
    cerr << " ERROR: " << e << endl;
}
catch(...) {
    cerr << " ERROR: " << endl;
}
env.end();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:20:51.080

`weightedSumBC[][]`将两个索引都定义为范围超过`r`，但`j`上升到`color`

所以改变：

```
 weightedSumBC[i] = IloArray<IloExpr>(env, r); 
```

到：

```
 weightedSumBC[i] = IloArray<IloExpr>(env, color); 
```

这里有类似的问题：

```
for(int i=0; i<r; i++) {
    range_weightedSumBC[i] = IloArray<IloRange>(env, r); 
    for(int j=0; j<color; j++) {
        range_weightedSumBC[i][j] = IloRange(env, 0, weightedSumBC[i][j], addupto);
    }
} 
```

改成：

```
range_weightedSumBC[i] = IloArray<IloRange>(env, color); 
```

# sip - Cloud Foundy 平台是否支持 SIP 和 RTP？

> ID：15893082
> 
> 赞同：1
> 
> 时间：2013-04-09T04:03:31.577
> 
> 标签：sip, cloud-foundry, rtp

我想在 Cloud Foundry 之上构建一个会议应用程序。云代工是否支持 SIP 和 RTP 协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:34:57.700

入站 Cloud Foundry 仅通过路由器组件支持 HTTP 和 HTTPS，将任何其他端口上的流量路由到应用程序将不起作用。

# r - 以编程方式对数据框的列求和？

> ID：15893083
> 
> 赞同：3
> 
> 时间：2013-04-09T04:03:32.260
> 
> 标签：r

假设我有以下数据框：

```
dd <- data.frame(x1 = c(1, 2, 3), x2 = c(3, 4, 5), x3 = (5, 6, 7)) 
```

我想创建一个新列，如下所示：

```
dd$x.sum <- dd$x1 + dd$x2 + dd$x3 
```

但是，我不想写出加法（假设我实际上有 100 列`x1, x2, ..., x100`要加在一起），而是想以编程方式编写它。就像是：

```
dd$x.sum <- sum(sapply(1:3, function(i) { 
                              return(dd[paste0("x", i)]) 
                            })) 
```

除了那行不通。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T04:28:32.647

您也可以使用`Reduce`with `+`，尽管这不会有`na.rm` 参数

```
dd <- data.frame(matrix(runif(1e6),ncol=1000))

dd$sum <-     Reduce('+', dd[paste0('X',seq_len(1000))])

# some benchmarking
xx <- paste0("X", seq_len(1000))
library(microbenchark)
microbenchmark(Reduce('+', dd[xx]), rowSums(dd[xx]))
## Unit: milliseconds
##                expr      min       lq   median       uq      max neval
## Reduce("+", dd[xx]) 14.93642 15.19713 15.56077 15.78606 31.92162   100
##    rowSums(dd[xx]) 30.79629 31.44574 31.67192 32.14342 58.07938   100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:16:10.210

不需要迭代：

```
dd$sum <- rowSums(dd[paste0("x", 1:3)]) 
```

但是，如果你想迭代，你可以自己遍历索引：

```
dd$sum <-  rowSums(sapply(paste0("x", 1:3), function(ind) dd[[ind]])) 
```

* * *

该`sum(sapply(...))`语句无法正常工作的原因`sapply`是返回一个列表，并且`sum`不能将列表作为参数

# c - 在C中将元素添加到链表的前面

> ID：15893084
> 
> 赞同：6
> 
> 时间：2013-04-09T04:03:33.467
> 
> 标签：c, data-structures, linked-list

我正在关注关于链接列表的斯坦福 CS Ed 图书馆教程。我正在尝试在链接列表的前面添加一个新列表，但根据我从下面定义的 Length 函数获得的打印输出，它不起作用。

```
#include <stdio.h>
#include <stdlib.h>

//build new struct for node
//node has value and points to next node
struct node{
    int value;
    struct node *next;
};

//declare a new struct node that contains 3 nodes (head, middle, tail)
struct node *Build123(){
    struct node *head, *middle, *tail = NULL;

    head = malloc(sizeof(struct node));
    middle = malloc(sizeof(struct node));
    tail = malloc(sizeof(struct node));

    head->value = 3;
    head->next = middle;

    middle->value = 5;
    middle->next = tail;

    tail->value = 9;
    tail->next = NULL;

    return head;
};

//declare a function Length and variable counter to calculate size of list
int Length(struct node *head) {
    int count = 0;
    struct node *iterator = head;
    while (iterator != NULL) {
        count++;
        iterator = iterator->next;
    }
    return count;
}

//declare function Push to add new lists that would be added to the front
void Push (struct node **headRef, int value){
    struct node *newNode;
    newNode = malloc(sizeof(struct node));
    newNode->value = value;
    newNode->next = *headRef;
}

int main(){
    //instantiate the 3 element linked list named beast
    struct node *beast = Build123();

    //add 2 elements to the front of the linked list via pass by reference
    Push(&beast, 6);
    Push(&beast, 12);

    //calculate length of linked list after elements have been added
    int len = Length(beast);

    //print length of linked list to screen 
    printf("%d\n",len);
    return 0;
} 
```

我得到`3`，当我期望得到`5`。请您帮我找出代码中阻止我获得期望值的错误吗？尽管进行了很多修补，但我无法弄清楚为什么。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:06:29.123

问题在于，当您执行类似于指向`Push(&beast, 6);`什么的操作时，函数 Push 不会改变。`beast`尽管 Push 将更多元素添加到链表中，但当您稍后在 beast 上调用 Length 时，它会在与 beast 最初在开始时拥有的同一节点上调用它 - 所以它完全不知道额外添加的节点。

在 Push() 结束时，你需要这样做：

`*headRef = newNode;`

这样这`beast`将正确地指向列表的新开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T04:06:21.513

您不会`headRef`在`Push`函数中进行修改，因此您的列表头部实际上永远不会改变。 `beast`始终指向它被创建指向的原始节点。添加这一行：

```
*headRef = newNode; 
```

在`Push()`中，您将被设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T04:23:05.097

在`push()`方法结束时，您必须添加：

`*headRef = newNode`

这是因为`headRef`应该始终指向链表中的第一个节点。

# python - ImportError：python 中没有对语言“eng”的本地化支持

> ID：15893085
> 
> 赞同：5
> 
> 时间：2013-04-09T04:03:33.903
> 
> 标签：python, database-connection, mysql-python

我`ImportError: No localization support for language 'eng'`在 Python 中使用 MySQL 连接器时得到了。我的追溯如下。

```
Traceback (most recent call last):
  File \"DB_Module.py\", line 151, in QueryDatabase
  File \"\\share\app\Modules\mysql\connector\__init__.py\", line 44, in Connect
  File \"\\share\app\Modules\mysql\connector\connection.py\", line 106, in __init__
  File \"\\share\app\Modules\mysql\connector\connection.py\", line 325, in connect
  File \"\\share\app\Modules\mysql\connector\connection.py\", line 288, in _open_connection
  File \"\\share\app\Modules\mysql\connector\network.py\", line 326, in open_connection
  File \"\\sfs\show_time\Showtime_Package\showtime\Modules\mysql\connector\errors.py\", line 160, in __init__
  File \"\\share\app\Modules\mysql\connector\locales\__init__.py\", line 52, in get_client_error
ImportError: No localization support for language 'eng' 
```

而我当前使用的 SQL 是

```
SELECT * FROM systemdetails 
WHERE System_ID = 'System1' LIMIT 1 
```

谁能告诉我如何解决这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-27T10:15:11.827

为了让 MySql 连接器打印实际的错误字符串 - 它需要 "locales" 目录中的 eng/client_error 文件。

我个人只是手动创建了目录“eng”并从此链接复制粘贴文件：http: [//pydoc.net/Python/mysql-connector-python/1.0.7/mysql.connector.locales.eng.client_error /](http://pydoc.net/Python/mysql-connector-python/1.0.7/mysql.connector.locales.eng.client_error/)

```
> mkdir eng
> touch eng/__init__.py
> vi eng/client_error.py
> ... copy-paste, save, and exit. 
```

我再次运行代码，并收到：

```
2013: Lost connection to MySQL server during query 
```

你可能会得到一个不同的错误，但希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-28T08:58:48.830

当您使用 pyInstaller 或 py2exe 再次编译时，只需将其用于导入语言环境。

```
from mysql.connector.locales.eng import client_error
import mysql.connector as mc 
```

它们将包括修复错误所需的模块。

# sql-server - 插入/选择仅插入一行

> ID：15893086
> 
> 赞同：3
> 
> 时间：2013-04-09T04:03:36.213
> 
> 标签：sql-server, sql-insert

我的 SQL 插入/选择有问题。

```
INSERT INTO TBLPMHISTORY(RELEQUIPMENTID,DTETHISPMDUE,STRCAMPUS,STRROOM)
(SELECT INTEQUIPMENTID,DTEPMDATENEXTDUE,STRCAMPUS,STRROOM
FROM TBLEQUIPMENT
WHERE DTEPMDATENEXTDUE BETWEEN GETDATE() AND DATEADD("DAY",21,GETDATE())) 
```

它似乎只在新表中插入一行，但是当我自己运行语句的 SELECT 部分时，它返回 84 行。

我不确定是否有限制批量插入的东西，但任何帮助将不胜感激。

创建 PMHISTORY 表的代码如下：

```
CREATE TABLE TBLPMHISTORY( 
INTPMHISTORYID INT NOT NULL PRIMARY KEY IDENTITY, 
RELEQUIPMENTID INT NOT NULL FOREIGN KEY REFERENCES TBLEQUIPMENT(INTEQUIPMENTID), 
STRDESCRIPTION VARCHAR(64) DEFAULT 'Preventative Maintenance', 
DTETHISPMDUE DATETIME, 
YSNPMDONE BIT DEFAULT '0', 
YSNPMCONVERTEDTOJOB BIT DEFAULT '0', 
INTRELATEDJOBNUMBER INT DEFAULT '0', 
STRCAMPUS VARCHAR(30), 
STRROOM VARCHAR(30)) 

CREATE UNIQUE NONCLUSTERED INDEX [IX_PMHistory_DTETHISPMDUE] ON TBLPMHISTORY( DTETHISPMDUE) WITH (IGNORE_DUP_KEY = ON) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:14:32.913

可能您的表 TBLPMHISTORY 中有约束，例如 DTETHISPMDUE 不能为空，并且选择可能包含该列的空值。它不必完全是该列，它可以是目标表中的任何其他列。您应该检查源表中的无效记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:24:32.183

您的索引正在使用`IGNORE_DUP_KEY = ON`.

这意味着违反该索引唯一性的插入行将被忽略，即不插入。

通常，您会将此选项设置为`OFF`.

# mysql - MySQL 多选，多 Where 子句

> ID：15893090
> 
> 赞同：3
> 
> 时间：2013-04-09T04:03:59.713
> 
> 标签：mysql, select

我不想为一项操作运行数百个 SELECT 查询，而只想运行一个大查询，我希望这会减轻我的服务器上的负载。

```
SELECT (
(SELECT link_type_id FROM connections WHERE (node_to_id = '0' AND node_from_id = '1') OR (node_from_id = '1' AND node_to_id = '0')),
(SELECT link_type_id FROM connections WHERE (node_to_id = '0' AND node_from_id = '2') OR (node_from_id = '2' AND node_to_id = '0'))
) 
```

此查询中将有更多 SELECTS，但即使这两个也不起作用。当我运行此代码时，我收到错误：

```
Operand should contain 1 column(s). 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T04:30:47.127

您可以在下面尝试，但您可能需要`UNION`

```
SELECT link_type_id FROM connections 
WHERE (node_to_id = '0' AND node_from_id = '1') 
OR (node_from_id = '1' AND node_to_id = '0')
UNION
SELECT link_type_id FROM connections 
WHERE (node_to_id = '0' AND node_from_id = '2') 
OR (node_from_id = '2' AND node_to_id = '0') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T04:11:47.187

这是由列外的括号引起的。甚至像这样简单的事情：

```
SELECT ((SELECT 1), (SELECT 1)) 
```

会产生这个错误——问题是 MySQL 只能显示一列每…好吧…列，并且整个`()`包裹一列。如果删除外括号，它将`SELECT`在单独的列中显示每个括号。

# android - 需要 Android 布局帮助

> ID：15893093
> 
> 赞同：2
> 
> 时间：2013-04-09T04:04:33.200
> 
> 标签：android, layout, android-linearlayout

我很难让我的布局工作......

我想要做的是有两个微调器和一个按钮，一旦单击按钮，我将根据微调器中选择的值显示结果。

```
 -----------
| Spinner 1 |      
 -----------
 -----------
| Spinner 2 |      
 -----------
 -----------
| Button    |      
 -----------

Result 1
Result 2
Result 3
Result 4
Result 5 
```

我曾尝试将结果放在 ListView 中，但我面临的问题是，一旦单击按钮，我可以多次看到 Spinner1、Spinner2 和 Button 本身的重复。

布局的xml如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:entries="@array/country_arrays"
    android:prompt="@string/country_prompt" />    

    <Spinner
    android:id="@+id/spinner2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:entries="@array/country_arrays"
    android:prompt="@string/country_prompt" />

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/done" />

<LinearLayout
    android:id="@+id/moreContent"
    android:layout_width="match_parent"
    android:visibility="visible"
    android:orientation="vertical"    
    android:layout_height="wrap_content"    
    >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world"
    android:textColor="#ff0000"
    android:textSize="12sp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:contentDescription="@string/hello_world"
    android:gravity="center_vertical"
    android:text="@string/hello_world"
    android:textColor="#0000ff"
    android:textSize="12sp" />
</LinearLayout> 
```

有人可以告诉我哪里出错了吗？

代码如下：

```
package ms.timetable;

import java.io.FileNotFoundException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Iterator;
import java.util.Map;
import java.util.TreeMap;
import java.util.Map.Entry;

import android.os.AsyncTask;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class MainActivity extends ListActivity {
final Context context = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    addListenerOnButton();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void addListenerOnButton() {

    Button button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            RetreiveFeedTask rft = new RetreiveFeedTask();
            rft.execute();
        }
    }); 
}

@SuppressLint("NewApi")
private class RetreiveFeedTask extends AsyncTask<Void, Void, String> {

    TreeMap<String, String> _timetable = null; 

    @Override
    protected String doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        _timetable = FetchTimetableInfo();
        return null;
    }

    protected void onPostExecute(String str){
        if (_timetable != null){
            ArrayList<TimeTable> tarr = new ArrayList<TimeTable>();

            Iterator<Entry<String, String>> it = _timetable.entrySet().iterator();

            String toastText = "";

            while (it.hasNext())
            {
                Map.Entry<String, String> pairs = (Map.Entry<String, String>)it.next();

                String key = pairs.getKey();
                String value = pairs.getValue();

                toastText = toastText + key + " --- " + value + "\n";
                //System.err.println(key + " --- " + value);
                TimeTable tt = new TimeTable();
                tt.set_line(value);
                String [] tem = key.split("---");

                tt.set_arrival(tem[1]);
                tt.set_departure(tem[1]);

                tarr.add(tt);
            }   

            //Toast.makeText(context, toastText, Toast.LENGTH_LONG).show();
            //tmap.add(_timetable);
            setListAdapter((ListAdapter) new TimetableAdapter(getApplicationContext(), tarr));
        }
    }

    private TreeMap<String, String> FetchTimetableInfo(){
        Spinner spinner1 = (Spinner) findViewById(R.id.spinner1);
        Spinner spinner2 = (Spinner) findViewById(R.id.spinner2);
        String origin = (String) spinner1.getSelectedItem();
        String destination = (String) spinner2.getSelectedItem();
        //String val = String.valueOf(spinner1.getSelectedItem());
        ArrayList<String> linesServOrigin = LineStation.GetServingLines(origin);
        ArrayList<String> linesServDest = LineStation.GetServingLines(destination);

        linesServOrigin.retainAll(linesServDest);

        //ArrayList<String> preferredLines = linesServOrigin.re.retainAll(linesServDest);

        Log.e(this.getClass().toString(), "Selected value is : " + linesServOrigin.get(0));

        try 
        {   
            for (int k = 0; k < linesServOrigin.size(); k++)
            {
                String url = "http://tt.ptv.vic.gov.au/tt/XSLT_REQUEST?itdLPxx_lineMain=" + LineStation.GetLineMain(linesServOrigin.get(0)) + "&itdLPxx_lineID=" + LineStation.GetLineID(linesServOrigin.get(0)) + "&itdLPxx_output=html";

                DataManager dm = new DataManager(url, getApplicationContext());

                ArrayList<String> stationData = dm.GetStationsData();
                ArrayList<ArrayList<String>> timetableData = dm.GetTimetableData();

                ArrayList<String> originTimetable = null;
                ArrayList<String> originTimetable1 = null;
                ArrayList<String> destinationTimetable = null;
                ArrayList<String> destinationTimetable1 = null;

                int origPos = 0;
                int destPos = 0;

                int ctr = 0;

                for (int i = 0; i < stationData.size(); i++)
                {
                    if (stationData.get(i).equals(origin) || (origin + " - DEP").equals(stationData.get(i)))
                    {
                        //originTimetable = timetableData[i];
                        origPos = i;
                    }
                    else if (stationData.get(i).equals( destination) || (destination + " - ARR").equals(stationData.get(i)))
                    {
                        //destinationTimetable = timetableData[i];
                        destPos = i;
                    }

                    if (origPos != 0 && destPos != 0)
                    {
                        break;
                    }
                }

                if (origPos > destPos)
                {
                    dm.SwitchDirection();
                    stationData = dm.GetStationsData();
                    timetableData = dm.GetTimetableData();
                }

                for (int i = stationData.size() - 1; i >= 0; i--)
                {
                    if (stationData.get(i).equals(origin) || (origin + " - DEP").equals(stationData.get(i)))
                    {
                        if (originTimetable == null)
                        {
                            originTimetable = timetableData.get(i);
                        }
                        else if (originTimetable1 == null)
                        {
                            originTimetable1 = timetableData.get(i);
                        }
                    }
                    else if (stationData.get(i).equals(destination) || (destination + " - ARR").equals(stationData.get(i)))
                    {
                        if (destinationTimetable == null)
                        {
                            destinationTimetable = timetableData.get(i);
                        }
                        else if (destinationTimetable1 == null)
                        {
                            destinationTimetable1 = timetableData.get(i);
                        }
                    }
                }

                TreeMap<String, String> ttable = new TreeMap<String, String>();            

                if (originTimetable != null && destinationTimetable != null)
                {
                    //int curtime = Integer.parseInt(DateTime.Now.ToString("HHmm", CultureInfo.CurrentCulture));
                    String temp = new SimpleDateFormat("HHmm").format(Calendar.getInstance().getTime());

                    int curtime =Integer.parseInt(temp);
                    System.err.println("Origin timetable size = " + originTimetable.size());
                    System.err.println("Destination timetable size = " + destinationTimetable.size());

                    for (int j = 0; j < originTimetable.size(); j++)
                    {
                        if (Integer.parseInt((originTimetable.get(j))) > curtime)
                        {
                            if (Integer.parseInt((destinationTimetable.get(j))) == -1)
                            {
                                if (destinationTimetable1 == null || (Integer.parseInt(destinationTimetable1.get(j)) == -1))
                                {
                                    continue;
                                }
                            }
                            else if (destinationTimetable1 != null && Integer.parseInt(destinationTimetable1.get(j)) == -1)
                            {
                                if (destinationTimetable == null || (Integer.parseInt(destinationTimetable.get(j)) == -1)) 
                                {
                                    continue;
                                }
                            }

                            ctr++;

                            if (destinationTimetable1 != null)
                            {
                                if (Integer.parseInt(originTimetable.get(j)) < Integer.parseInt(destinationTimetable1.get(j)))
                                {
                                    ttable.put(originTimetable.get(j) + " --- " + destinationTimetable1.get(j), linesServOrigin.get(k));
                                }
                            }
                            else
                            {
                                if (Integer.parseInt(originTimetable.get(j)) < Integer.parseInt(destinationTimetable.get(j)))
                                {
                                    ttable.put(originTimetable.get(j) + " --- " + destinationTimetable.get(j), linesServOrigin.get(k));
                                }
                            }

                            if (ctr == 5)
                            {
                                break;
                            }
                        }
                    }

                    ctr = 0;

                    if (originTimetable1 != null)
                    {
                        for (int j = 0; j < originTimetable1.size(); j++)
                        {
                            if (originTimetable1 != null && Integer.parseInt(originTimetable1.get(j)) > curtime)
                            {

                                if (Integer.parseInt(destinationTimetable.get(j)) == -1)
                                {
                                    if (destinationTimetable1 == null || (Integer.parseInt(destinationTimetable1.get(j)) == -1))
                                    {
                                        continue;
                                    }
                                }
                                else if (destinationTimetable1 != null && Integer.parseInt(destinationTimetable1.get(j)) == -1)
                                {
                                    if (destinationTimetable == null || (Integer.parseInt(destinationTimetable.get(j))) == -1)
                                    {
                                        continue;
                                    }
                                }                                

                                ctr++;

                                if (destinationTimetable1 != null)
                                {
                                    if (Integer.parseInt(originTimetable1.get(j)) < Integer.parseInt(destinationTimetable1.get(j)))
                                    {
                                        ttable.put(originTimetable1.get(j) + " --- " + destinationTimetable1.get(j), linesServOrigin.get(k));
                                    }
                                }
                                else
                                {
                                    if (Integer.parseInt(originTimetable1.get(j)) < Integer.parseInt(destinationTimetable.get(j)))
                                    {
                                        ttable.put(originTimetable1.get(j) + " --- " + destinationTimetable.get(j), linesServOrigin.get(k));
                                    }
                                }

                                if (ctr == 5)
                                {
                                    break;
                                }
                            }
                        }
                    }

                    Iterator<Entry<String, String>> it = ttable.entrySet().iterator();

                    //foreach (KeyValuePair<String, List<String>> item in lineStations)
                    while (it.hasNext())
                    {
                        Map.Entry<String, String> pairs = (Map.Entry<String, String>)it.next();

                        String key = pairs.getKey();
                        String value = pairs.getValue();

                        System.err.println(key + " --- " + value);
                    }   

                    return ttable;
                }
            }

        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
}

class TimeTable{
    private String _departure, _arrival, _line;

    public TimeTable(){     
    }

    public TimeTable(String departure, String arrival, String line){
        _departure = departure;
        _arrival = arrival;
        _line = line;           
    }

    public String get_departure() {
        return _departure;
    }

    public void set_departure(String _departure) {
        this._departure = _departure;
    }

    public String get_arrival() {
        return _arrival;
    }

    public void set_arrival(String _arrival) {
        this._arrival = _arrival;
    }

    public String get_line() {
        return _line;
    }

    public void set_line(String _line) {
        this._line = _line;
    }
}
} 
```

适配器如下：

```
package ms.timetable;

import java.util.ArrayList;
import ms.timetable.MainActivity.TimeTable;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup; 
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class TimetableAdapter extends ArrayAdapter<TimeTable>{
private final Context context;
private final ArrayList<TimeTable> values; 

public TimetableAdapter(Context context, ArrayList<TimeTable> values){
    super(context, R.layout.activity_main, values);
    this.context = context;
    this.values = values;
} 

public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.activity_main, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.textView1);
    TextView textView2 = (TextView) rowView.findViewById(R.id.textView2);

    //System.err.println("Position is : "+position);
    TimeTable tt = values.get(position);
    textView.setText(tt.get_departure());
    textView2.setText(tt.get_arrival());
    return rowView;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:37:17.510

问题是由于

```
View rowView = inflater.inflate(R.layout.activity_main, parent, false); 
```

在`getView()`方法。

您正在连续膨胀整个activity_main，然后将其添加到列表视图中。在单独的 xml 中而不是 activity_main 中为结果放置一行。所以你将有一个新的 xml 文件，比如 row.xml，其中包含：

```
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world"
    android:textColor="#ff0000"
    android:textSize="12sp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:contentDescription="@string/hello_world"
    android:gravity="center_vertical"
    android:text="@string/hello_world"
    android:textColor="#0000ff"
    android:textSize="12sp" /> 
```

所以你必须膨胀为

```
View rowView = inflater.inflate(R.layout.row, parent, false); 
```

然后在activity_main.xml 中的listview 中添加生成的行。这样你的问题就会得到解决。希望能帮助到你。

# c - 从程序集 (x86) 和进程切换的 C 回调函数

> ID：15893094
> 
> 赞同：2
> 
> 时间：2013-04-09T04:04:39.663
> 
> 标签：c, assembly, callback, operating-system, x86

此代码适用于我的本科操作系统课程。我试图在 new_sp 的同一堆栈上调用一个函数，然后返回到 new_sp 正在做的任何事情。它不起作用，我什至不确定如何调试它。建议或解决方案会很棒。我试图通过如果有什么我遗漏了请告诉我。

注意：它是我们在课堂上使用的特殊操作系统（xinu）的一部分。该函数是从 c 代码中调用的。我使用的参考：[http ://www.unixwiz.net/techtips/win32-callconv-asm.html](http://www.unixwiz.net/techtips/win32-callconv-asm.html)

这部分代码是在进程退出之前将进程保存到堆栈中的部分。new_sp 指向的堆栈也以这种方式保存。

```
 .text
    .globl  callsw

    /*---------------------------------------------------------------------
    * callsw -  call is callsw(&old_sp, &new_sp, &call_back)
    *---------------------------------------------------------------------*/
callsw:
    /*keep all of the old contex switch instructions so it will work with
      with cxtsw*/
    pushl   %ebp          /* push ebp onto stack          */
    movl    %esp,%ebp       /* record current SP in ebp     */
    pushfl                  /* record flags                 */
    pushal                  /* save general regs on stack   */

    /* save old segment registers here, if multiple allowed */

    movl    8(%ebp),%eax    /* Get mem location in which to */
    /*  save the old process's SP   */
    movl    %esp,(%eax)     /* save old process's SP        */
    movl    12(%ebp),%eax   /* Get location from which to   */ 
```

这里开始切换到回调函数的代码。我希望回调函数运行，然后返回执行与 new_sp 堆栈相关的代码。

```
 /* Switch to a new stach instead */

    movl    (%eax),%esp     /* pick up new process's SP     */

    /* restore new seg. registers here, if multiple allowed */

    popal                   /* restore general registers    */
    movl    (%ebp),%eax     /*keep old ebp for acess to arg 3*/
    movl    4(%esp),%ebp    /* pick up ebp before restoring */
    /*   interrupts                 */
    popfl                   /* restore interrupt mask       */
    add     $4,%esp         /* skip saved value of ebp      */
/* Switch to a new call back instead */

    movl    (%eax),%esp     /* pick up new process's SP     */

    /* restore new seg. registers here, if multiple allowed */

    popal                   /* restore general registers    */
    movl    (%ebp),%eax     /*keep old ebp for acess to arg 3*/
    movl    4(%esp),%ebp    /* pick up ebp before restoring */
    /*   interrupts                 */
    popfl                   /* restore interrupt mask       */
    add     $4,%esp         /* skip saved value of ebp      */ 
```

这是我尝试设置堆栈并跳转到新进程的地方。我调用的函数是没有参数也没有返回值的 ac 函数。

```
 pop     %ebx /* save the ra*/

    movl    %esp,%ebp /* move the base pointer to the bottom of the stack */
    add     -18,%ebp /* move stack down*/
    /*set up stack and jump */
    movl    %ebp,%esp /* nothing on stack they are = */
    movl    %ebx, 0(%ebp) /* save ebp to stack */
    movl    %ebx, 4(%ebp) /* save ra */
    movl    16(%eax),%ecx
    JMP (%ecx)     /* jump to call_back        */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:44:19.823

我认为你的问题在这里：

```
popal                   /* restore general registers    */
movl    (%ebp),%eax     /*keep old ebp for acess to arg 3*/ 
```

`popal`从保存在您要切换到的堆栈中的寄存器中恢复所有寄存器（包括 ebp）。所以`movl (%ebp),%eax`从新堆栈中加载一个值（实际上是`%ebp`属于调用者的值`callsw`。所以当你以后做

```
movl    (%eax),%esp     /* pick up new process's SP     */ 
```

你没有得到新进程的 SP——你从堆栈的上两层（callsw 的调用者的调用者）获取帧指针。

# autorun - 如何通过 USB 自动运行 C .exe 文件？

> ID：15893097
> 
> 赞同：0
> 
> 时间：2013-04-09T04:04:56.187
> 
> 标签：autorun

我有 ac 程序（即 .exe），我想通过 USB 在自动运行模式下执行该程序，当 USB 开启时，文件应该运行。我让它自动运行文件，即 autorun.inf 。在自动运行文件中，内容是 [autorun] action=v1.exe open=v1.exe

但它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:08:25.677

您使用什么操作系统？我认为自动运行在 Windows 7 中被禁用。请参阅：http: [//blogs.technet.com/b/srd/archive/2009/04/28/autorun-changes-in-windows-7.aspx](http://blogs.technet.com/b/srd/archive/2009/04/28/autorun-changes-in-windows-7.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:13:41.940

如果您[在 Windows 7 中使用 win 7 AutoRun 更改，请阅读此内容](http://blogs.technet.com/b/srd/archive/2009/04/28/autorun-changes-in-windows-7.aspx)

恶意软件正在使用这种活动，因此请尽量避免，否则您将失去信任级别。

# asp.net - ASP.NET SqlDataSource，如 SelectCommand

> ID：15893098
> 
> 赞同：1
> 
> 时间：2013-04-09T04:04:59.270
> 
> 标签：asp.net, sql, sqldatasource

我正在研究asp.net。我有一个`SqlDataSource`在 selectcommand 上硬编码的查询：

```
<asp:SqlDataSource ID="DataSource1" runat="server" CancelSelectOnNullParameter="False"
    ConnectionString="<%$ ConnectionStrings:S.Properties.Settings.ConnectionString %>" 
    SelectCommand="SELECT * FROM [table]
    WHERE ([col1] like Case @col1_param When null Then col1 Else @col1_param End)
    and  ([col2] like Case @col2_param When null Then col2 Else @col2_param End)"
    SelectCommandType="Text">
    <SelectParameters>
        <asp:ControlParameter ControlID="TextBox1" Name="col1_param" PropertyName="Text"
            Type="String" />
        <asp:ControlParameter ControlID="TextBox2" Name="col2_param" PropertyName="Text"
            Type="String" />
    </SelectParameters> 
```

我想要的是，如果您仅在一个文本框中输入数据，则数据将仅在 where 子句上根据该文本框值显示。如果没有为两个文本框放置任何值，则查询会像没有位置一样执行。

现在使用此代码，如果您将一个文本框放在一个文本框上，则不会显示任何数据。如果所有文本框都为空，则相同。

我不想使用 sql 存储过程。

我该如何解决这个问题？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:23:10.207

假设它在没有输入文本时传递 null ，否则您将需要检查空字符串

```
SelectCommand="SELECT * FROM [table]
    WHERE ([col1] like '%@col1_param%' or @col1_param is null)
    and  ([col2] like '%@col2_param%' or @col2_param is null)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:24:26.183

听起来您希望查询可以选择搜索列。

您可以使用格式

```
WHERE @col1_param IS NULL OR [col1] LIKE '%@col1_param%' 
```

属性处理未指定参数的情况。

请参阅[我关于该问题的问题](https://stackoverflow.com/questions/205526/how-do-i-create-a-stored-procedure-that-will-optionally-search-columns)以获得完整答案。当然它是作为一个存储过程完成的，但是这个概念对于你的 SQLDataSource 也是一样的。

# javascript - JQuery Ascensor JS 插件不工作

> ID：15893099
> 
> 赞同：1
> 
> 时间：2013-04-09T04:05:03.130
> 
> 标签：javascript, jquery, html

我正在尝试利用 Ascensor JQuery 插件构建一个单页滚动网站，但在正确设置它时遇到了很多麻烦。[http://kirkas.ch/ascensor/](http://kirkas.ch/ascensor/)上的文档很有帮助，但我仍然必须遗漏一些东西。我想要的是一个简单的三层布局，从上到下。似乎我的“建筑物”的布局生成正确，但我无法在“级别”之间移动。箭头键和我的链接根本不移动页面。我可以得到一些关于我的代码的帮助吗？任何指导表示赞赏。

谢谢，布雷特

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Ascensor Test</title>
<script src="jquery-1.9.1.js"></script>
<script src="jquery.scrollTo-1.4.3.1.js"></script>
<script src="jquery.ascensor.js"></script>
<script src="jquery.easing.1.3.js"></script>
<script>
$(document).ready(function()
{
    $('#house').ascensor(
    {
        AscensorName:'ascensor',
        ChildType:'div',
        AscensorFloorName:'Home | Implementation | HTML',
        Time:1000,
        Easing:'easeInOutCubic',
        WindowsOn:1,
        Direction:'y',
        AscensorMap:'1|1 & 2|1 & 3|1',
        KeyNavigation: true,
        Queued:false,
        QueuedDirection:"x"
    });
});
</script>

<style>
body
{
    margin: 0;
    padding: 0;
}

#house
{
    overflow: hidden;
    border: 5px solid black;
}

#navigation
{
    z-index: 1000;
    position: fixed;
    top: 50px;
    left: 50px;
}

#ascensorFloor1
{
    background-color: orange;
}
</style>

</head>

<body>

    <div id="navigation">
        <a href="#" class="ascensorLink ascensorLink1">Floor 1</a>
        <a href="#" class="ascensorLink ascensorLink2">Floor 2</a>
        <a href="#" class="ascensorLink ascensorLink3">Floor 3</a>
    </div>

    <div id="house">
        <div>
            Floor 1
        </div>
        <div>
            Floor 2
        </div>
        <div>
            Floor 3
        </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:13:40.347

问题不在于 ID，因为它是生成它们的插件。所以你不应该把它们放在你的标记中。我和你有同样的问题，在经历了很多“开/关切换的东西”之后，我发现问题出在关键导航声明中。如果将其设置为 false，它将开始工作。不要问我为什么，但是“KeyNavigation:false”让插件工作。真可惜，因为按键导航是我喜欢该插件的一件事……无论如何，试试这个，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:25:20.370

问题不是你，它在“jquery-1.9.1.js”中。我尝试自己实现 ascensor，并认为问题在于该插件不适用于 jQuery 的最后更新。该版本最初使用 1.5.1。查看 Git 中的 jQuery ( [https://github.com/seekvence/ascensor](https://github.com/seekvence/ascensor) )。我试图找出原因，但看不出有什么原因！甚至尝试使用 jQuery 迁移插件，但效果不佳！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:08:53.233

缓动：'easeInOutCubic' - 不工作

删除：缓动：'easeInOutCubic'，

或：缓动：'线性'，..））

# javascript - 需要计算 2 个输入字段并显示在第 3 个

> ID：15893105
> 
> 赞同：0
> 
> 时间：2013-04-09T04:05:52.567
> 
> 标签：javascript, html

我想将数量乘以价格并总共“显示”。Total 需要命名为“金额”，以便将总成本转移到网关。如您所见，我正在尝试创建一个能够使用数量的解决方法。

这里的所有信息都是为​​了测试目的，所以不是个人的。

```
<script type="text/javascript">
function totalprice() {
    var qty = document.getElementById("quantity").value;
    var price = 219999;
    var total = (qty * price);
    document.getElementById("tot").value = total;
}
</script>

<form action="https://gateway.charityclear.com/hosted/" method="post"> 
<input type="hidden" name="merchantID" value="0000992">
<input type="hidden" name="countryCode" value="826"> 
<input type="hidden" name="currencyCode" value="826">  
<table>
<tr>
<td>Full Name </td><td><input type="text" name="customerName" value=></td></tr>
<tr>
<td>Full Shipping Address <br>(including Country)<br>(must be same as billing     address)</td><td><textarea rows="4" name="customerAddress" value=></textarea></td></tr>
<tr>
<td>Post Code </td><td><input type="text" name="customerPostCode" value=></td>          </tr>
<tr>
<td>Email Address </td><td><input type="text" name="customerEmail" value=></td> </tr>
<tr>
<td>Phone Number <br>(required for delivery)</td><td><input type="text" name="customerPhone" value=></td></tr>

<input type="hidden" name="redirectURL" value="http://www.UKRobstep.com/order- successful.html">
<tr><td></td>
</tr>
<tr><td><input type="hidden" name="orderRef" value="Colour">Colour</td>
<td>
<select name="orderRef">
<option value="Select a Colour">Select a Colour
<option value=" Robin M1 in Black">Black
<option value=" Robin M1 in White "> White
<option value=" Robin M1 in Red"> Red
<option value=" Robin M1 in Yellow ">Yellow
<option value=" Robin M1 in Silver/Grey "> Silver/Grey
</select></td>
</tr>
<tr><td>

Quantity</td><td><input type="text" name="quantity" id="quantity" class="field"  value="1" /></td></tr>
<tr><td>Price Per Unit</td><td><input type="text" name="price" id="price" class="field" value="£2199.99" readonly="readonly"/>
<input type="hidden" name="amount" id="tot" class="field" value=""/>
</td></tr>

</table>
<INPUT TYPE="image" SRC="http://www.weebly.com/uploads/9/8/2/8/9828047/5792561_orig.png" BORDER="0" ALT="Pay Now" > 
</form> 
```

我希望有人可以提供帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:10:10.343

利用`parseInt();`

**例子**

```
function totalprice()
{
    var qty = document.getElementById("quantity").value;
    var price = 219999;
    var total = (parseInt(qty) * price);
    -------------^^^^^^^^^--------------
    document.getElementById("tot").value = total;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:31:44.630

你只是想在用户输入数量后获得价值吗？我不确定你所说的“绕过”是什么意思。这是按下回车键后返回值的一种方式。

```
<script>
 function totalprice() {
    var KeyID = event.keyCode;
    if(KeyID == 13){
      var qty = document.getElementById("quantity").value;
      var price = 219999;
      var total = (qty * price);
      document.getElementById("tot").value = total;
             alert(total);
  }
  else{
  }
}

</script>

 <form action="https://gateway.charityclear.com/hosted/" method="post"> 
 <input type="hidden" name="merchantID" value="0000992">

 <input type="hidden" name="countryCode" value="826"> 
 <input type="hidden" name="currencyCode" value="826">  
 <table>
 <tr>
 <td>Full Name </td><td><input type="text" name="customerName" value=></td></tr>
 <tr>
 <td>Full Shipping Address <br>(including Country)<br>(must be same as billing      
 address)</td><td><textarea rows="4" name="customerAddress" value=></textarea></td>
</tr>
 <tr>
 <td>Post Code </td><td><input type="text" name="customerPostCode" value=></td>          
</tr>
 <tr>
 <td>Email Address </td><td><input type="text" name="customerEmail" value=></td> </tr>
 <tr>
 <td>Phone Number <br>(required for delivery)</td><td><input type="text" 
name="customerPhone" value=></td></tr>

 <input type="hidden" name="redirectURL" value="http://www.UKRobstep.com/order- 
successful.html">
 <tr><td></td>
 </tr>
 <tr><td><input type="hidden" name="orderRef" value="Colour">Colour</td>
 <td>
 <select name="orderRef">
 <option value="Select a Colour">Select a Colour
 <option value=" Robin M1 in Black">Black
 <option value=" Robin M1 in White "> White
 <option value=" Robin M1 in Red"> Red
 <option value=" Robin M1 in Yellow ">Yellow
 <option value=" Robin M1 in Silver/Grey "> Silver/Grey
 </select></td>
 </tr>
 <tr><td>

 Quantity</td><td><input type="text" name="quantity" id="quantity" class="field"    
value="1" onkeydown="return totalprice(this, event);"  /></td></tr>
 <tr><td>Price Per Unit</td><td><input type="text" name="price" id="price"  
class="field" value="£2199.99" readonly="readonly"/>
 <input type="hidden" name="amount" id="tot" class="field" value=""/>
</td></tr>

 </table><INPUT TYPE="image"    
SRC="http://www.weebly.com/uploads/9/8/2/8/9828047/5792561_orig.png" BORDER="0" 
ALT="Pay    Now" > </form> 
```

# wolfram-mathematica - Mathematica 无法正确导出 gif

> ID：15893106
> 
> 赞同：1
> 
> 时间：2013-04-09T04:05:54.120
> 
> 标签：wolfram-mathematica, export, gif

我正在尝试将图像导出到 Mathematica（版本 7）中的 .gif 文件。让我们举一个基本的例子：

```
Export["pic.gif",Graphics[{Circle[]}]] 
```

没有错误消息，实际上创建了一个 pic.gif 文件，但该文件完全是空白的；4 KB 大小，0x0 尺寸，如果我打开文件没有窗口出现。

我试过弄乱格式，比如

```
Export["pic.gif",Graphics[{Circle[]}],"GIF"] 
```

和

```
Export["pic.gif",Graphics[{Circle[]}],"Image"] 
```

但无济于事。导出适用于其他文件类型（尝试使用 .jpg 和 .png 没有问题），所以我不确定问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:04:07.983

版本 7 在 MAC OS X 版本 9.01（最新）上已经有好几年了，这工作得很好 yehuda

# java - 如何在我编写的类中覆盖 compareTo 方法来比较存储在类中的字符串？

> ID：15893129
> 
> 赞同：1
> 
> 时间：2013-04-09T04:07:43.750
> 
> 标签：java, string, comparable, compareto

我写了一个类，MyClass，每个实例都有一个字符串“名称”字段。我想重写 compareTo 方法，以便在调用时比较每个实例的两个“名称”字段。

这是我到目前为止所拥有的：

```
public class MyClass implements Comparable<MyClass>{

    public String name;
    public int age;

    public MyClass(String name) {
        this.name = name;
        this.age = 0;
    }

    public String getName() {
        return this.name;
    }

    @Override
    public int compareTo(MyClass mc) {
        return this.name.compareTo(mc.name);
    }

} 
```

当我将此类的实例添加到我编写的有序列表容器中时，它们没有按我想要的顺序添加，即字母顺序。有序列表似乎不是问题，因为我通过添加以正确顺序添加的字符串来测试它。

下面是有序列表的 add() 方法：

```
public boolean add(E obj) {
    Node<E> newNode = new Node(obj);
    Node<E> current = head, previous = null;
    if (current == null) { // EMPTY list
        head = tail = newNode;
        currentSize++;
        modCounter++;
        return true;
    }
    while (current != null
            && ((Comparable<E>) obj).compareTo(current.data) > 0) {
        previous = current;
        current = current.next;
    }
    if (previous == null) {         // One item in list, inserted node must go in FIRST position
        newNode.next = current;
        head = newNode;
    } else if (current == null) {   // Inserted node must go at the END of the list
        previous.next = newNode;
        tail = newNode;
    } else {                        // Inserted node is somewhere in the MIDDLE of the list
        newNode.next = current;
        previous.next = newNode;
    }
    currentSize++;
    modCounter++;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:10:32.010

您已经回答了您的问题，但是关于按字母顺序排列字符串，您必须知道的一件事是大小写很重要。如果您在不区分大小写的情况下进行严格比较，那么您应该将两个字符串都大写或小写：

```
return this.name.toLowerCase().compareTo(mc.name.toLowerCase()); 
```

否则因案而`"Bravo"`前。`"alpha"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:17:42.767

我建议将它添加到树中......所以你在添加时订购它

```
import java.util.TreeSet;

TreeSet tree = new TreeSet();
tree.add(instanceOfMyClass); 
```

因为你添加了类似的接口，所以树集知道如何处理它

如果这可行，您似乎仍在比较有序列表中的字符串，您现在应该检查 compareTo 的返回值是否小于/等于/等于 0；

# c# - 如何从文档中的特定位置读取表格？

> ID：15893130
> 
> 赞同：3
> 
> 时间：2013-04-09T04:07:45.803
> 
> 标签：c#, ms-word

当我使用以下行时，它会读取该特定文档的所有表格：

```
 foreach (Microsoft.Office.Interop.Word.Table tableContent in document.Tables) 
```

但我想读取特定内容的表格，例如从一个标识符到另一个标识符。

标识符可以是[SRS oraganisation_123 **]**到另一个标识符**[SRS Oraganisation_456]的形式**

我只想在上述标识符之间阅读表格。

假设第 34 页包含我的标识符，所以我想从该点读取所有表，直到遇到第二个标识符。我不想阅读剩余的表格。

请向我询问有关问题的任何澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:29:45.433

如果对您有帮助，请浏览以下代码。

```
System.Data.DataTable dt = new System.Data.DataTable();
           foreach (Microsoft.Office.Interop.Word.Cell c in r.Cells)
            {
                if(c.Range.Text=="Content you want to compare")
                  dt.Columns.Add(c.Range.Text);
            }
            foreach (Microsoft.Office.Interop.Word.Row row in newTable.Rows)
            {
                System.Data.DataRow dr = dt.NewRow();
                int i = 0;
                foreach (Cell cell in row.Cells)
                {
                    if (!string.IsNullOrEmpty(cell.Range.Text)&&(cell.Range.Text=="Text you want to compare with"))
                    {
                        dr[i] = cell.Range.Text; 
                    }
                }
                dt.Rows.Add(dr);
                i++;
            } 
```

通过以下链接的第三个数字答案。

[使用 Open XML SDK 替换 Word 文件中的书签文本](https://stackoverflow.com/questions/3308299/replace-bookmark-text-in-word-file-using-open-xml-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:34:19.780

不确定您的程序是如何构建的……但是如果您可以访问 tableContent 中的标识符，那么您应该能够编写一个 LINQ 查询。

```
var identifiers = new List<string>();
identifiers.Add("myIdentifier");

var tablesWithOnlyTheIdentifiersIWant = document.Tables.Select(tableContent => identifiers.Contains(tableContent.Identifier)

foreach(var tableContent in tablesWithOnlyTheIdentifiersIWant)
{
     //Do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:59:41.893

假设开始和结束标识符存储在名为`myStartIdentifier`和的变量中`myEndIdentifier`-

```
 Range myRange = doc.Range();
    int iTagStartIdx = 0;
    int iTagEndIdx = 0;

    if (myRange.Find.Execute(myStartIdentifier))
        iTagStartIdx = myRange.Start;

    myRange = doc.Range();    
    if (myRange.Find.Execute(myEndIdentifier))
        iTagEndIdx = myRange.Start;

    foreach (Table tbl in doc.Range(iTagStartIdx,iTagEndIdx).Tables)
    {
       // Your code goes here
    } 
```

# testing - Laravel Artisan 错误“LARAVEL_ENV”未被识别为内部或外部命令

> ID：15893134
> 
> 赞同：1
> 
> 时间：2013-04-09T04:08:39.253
> 
> 标签：testing, laravel

对于我的一生，我无法解决这个问题，Fresh Laravel 安装在 WAMP（win7 64）之上，添加了适当的路径变量等，并且 arisan 正在响应，但是如果我运行“php artisan test”，我会得到：

'LARAVEL_ENV' 不是内部或外部命令、可运行程序或批处理文件。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:06:03.647

请参阅此提交，它破坏了 Windows 中的功能：[https ://github.com/laravel/laravel/commit/4046313ecd4934e09a621ee930ee31f88262475e](https://github.com/laravel/laravel/commit/4046313ecd4934e09a621ee930ee31f88262475e)

Oli 在论坛中给出的解决方案是更改 runner.php 中的代码：

```
protected function test() {
    ...
    putenv('LARAVEL_ENV='.Request::env());
    passthru('phpunit --configuration '.$esc_path, $status);
    ...
} 
```

你应该可以`php artisan --env=test test`再次使用

# mysql - 提高mysql中的查询性能

> ID：15893137
> 
> 赞同：1
> 
> 时间：2013-04-09T04:08:44.323
> 
> 标签：mysql, join, group-by

我用过这个查询

```
SELECT  COUNT(CASE WHEN C <= 1 THEN 1 END) AS nooffamiliesHavingcount1,
        COUNT(CASE WHEN C BETWEEN 2 AND 4 THEN 1 END) AS nooffamiliesHavingcountbetween2And4,
        COUNT(CASE WHEN C > 4 THEN 1 END) AS nooffamiliesHavingcountgreaterthan3
FROM    (   SELECT  COUNT(*) AS C
            FROM    user where user_id = (select user_id from location where location_id in(select location_id from country where state_name='STATE'))
            GROUP BY House_No
        ) t 
```

> 这里子查询返回大约 10000 条记录。用户表有 10,00,000 条记录。它花费了太多时间。然后它说的错误是服务器消失了。我正在使用mysql。

我从谷歌搜索。但我没有运气。

我需要对我的表进行哪些更改。如何通过提高查询性能成功执行此查询。请建议我。提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:34:01.247

试试这个查询

```
SELECT 
  COUNT(CASE WHEN C <= 1 THEN 1 END) AS nooffamiliesHavingcount1,
  COUNT(CASE WHEN C BETWEEN 2 AND 4 THEN 1 END) AS nooffamiliesHavingcountbetween2And4,
  COUNT(CASE WHEN C > 4 THEN 1 END) AS nooffamiliesHavingcountgreaterthan3
FROM  
  (SELECT 
    COUNT(*) AS C
  FROM 
    user u,  
    location l, 
    country c 
  where 
    l.state_name='STATE' AND 
    l.some_other_column_id= 4 AND  <------- Add your condition
    c.location_id = l.location_id AND 
    u.user_id = l.user_id 
  GROUP BY 
    u.House_No) t 
```

使用正确的连接，因为它很容易理解..

```
SELECT 
  COUNT(CASE WHEN C <= 1 THEN 1 END) AS nooffamiliesHavingcount1,
  COUNT(CASE WHEN C BETWEEN 2 AND 4 THEN 1 END) AS nooffamiliesHavingcountbetween2And4,
  COUNT(CASE WHEN C > 4 THEN 1 END) AS nooffamiliesHavingcountgreaterthan3
FROM  
  (SELECT 
    COUNT(*) AS C
  FROM 
    user u
  INNER JOIN  
    location l
  ON 
    l.state_name='STATE' AND 
    l.some_other_column_id= 4   <------- Add your condition
    u.user_id = l.user_id 
  INNER JOIN
    country c 
  ON 
    c.location_id = l.location_id 
  GROUP BY 
    u.House_No) t 
```

**已编辑**

在大多数情况下，JOIN 比子查询快，而且子查询更快的情况很少见。我接受使用子查询更合乎逻辑且易于理解，但是在性能方面它不如连接好。如果您使用连接，您的数据库将自行优化您的查询，而子查询则不会。尝试对两个查询都使用解释，您将清楚地了解查询是如何执行的。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:26:41.543

你可以试试下面：

选择 COUNT（CASE WHEN COUNT( *) <= 1 THEN 1 END）作为 nooffamiliesHavingcount1，COUNT（CASE WHEN COUNT(* ) 在 2 和 4 之间然后 1 END）作为 nooffamiliesHavingcountbetween2And4，COUNT（CASE WHEN COUNT(*) > 4 THEN 1 END） AS nooffamiliesHavingcountgreaterthan3 FROM User user Inner JOIN (select user_id from location loc Inner Join country con on loc.location_id =con.location_id where state_name='STATE' )as temp

在 user.user_id =temp.user_id 组 by House_No

# c# - 如何获得名称未知的 DbEntityEntry EntityKey 对象

> ID：15893141
> 
> 赞同：13
> 
> 时间：2013-04-09T04:09:09.573
> 
> 标签：c#, entity-framework-5

我不应该能够使用 DbEntityEntry 的复杂属性方法或属性方法来获取 EntityKey 对象吗？我找不到任何示例[MSDN](http://msdn.microsoft.com/en-us/library/gg679271%28v=vs.103%29.aspx)，但我认为这在 Entity Framework 5 中是可能的。我不知道实体键或实体的名称，因为我使用的是通用存储库接口。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-09T07:40:54.157

如果你有一个`DbEntityEntry`对象，你`EntityKey`首先找到被包裹的对象`ObjectContext`：

```
var oc = ((IObjectContextAdapter)dbContext).ObjectContext; 
```

然后你可以找到实体键

```
oc.ObjectStateManager.GetObjectStateEntry(dbEntityEntryObject.Entity)
    .EntityKey 
```

**编辑**

我创建了两种扩展方法，让您接近您想要的：

```
public static EntityKey GetEntityKey<T>(this DbContext context, T entity)
    where T : class
{
    var oc = ((IObjectContextAdapter)context).ObjectContext;
    ObjectStateEntry ose;
    if (null != entity && oc.ObjectStateManager
                            .TryGetObjectStateEntry(entity, out ose))
    {
        return ose.EntityKey;
    }
    return null;
}

public static EntityKey GetEntityKey<T>( this DbContext context
                                       , DbEntityEntry<T> dbEntityEntry)
    where T : class
{
    if (dbEntityEntry != null)
    {
        return GetEntityKey(context, dbEntityEntry.Entity);
    }
    return null;
} 
```

现在你可以做

```
var entityKey = dbContext.GetEntityKey(entity); 
```

或者

```
var entityKey = dbContext.GetEntityKey(dbEntityEntryObject); 
```

运行时将选择正确的重载。

请注意，当实体具有复合键时，您建议的语法 ( `dbEntityEntryObject.Property<EntityKey>()`) 不起作用。您必须`EntityKey`从实体本身获取。

# ios - 无法再次翻转图层，CALayer，CATransform3DRotate。

> ID：15893144
> 
> 赞同：0
> 
> 时间：2013-04-09T04:09:42.213
> 
> 标签：ios, objective-c, calayer, catransform3drotate

我想做的是：

1.  单击一个按钮进行垂直翻转。
2.  再次单击一个按钮，图层将其翻转回来，依此类推...

代码如下：

```
 @interface ViewController (){
        CALayer *plane;
    }
    @end

    @implementation ViewController

    -(void)viewDidLoad
    {
        [super viewDidLoad];

        [self addALayer];

    }
    - (void)addALayer{

        plane                   =   [CALayer layer];
        plane.backgroundColor   =   [[UIColor orangeColor] CGColor];
        //[plane insertSublayer:normalBackground atIndex:0];

        plane.opacity           =   1;
        plane.frame             =   CGRectMake(0, 0, 300, 100);
        plane.position          =   CGPointMake(250, 150);
        plane.anchorPoint       =   CGPointMake(0.5, 0.5);
        plane.borderColor       =   [UIColor whiteColor].CGColor;
        plane.borderWidth       =   3;
        plane.cornerRadius      =   10;
        [self.view.layer addSublayer:plane];

    }
- (IBAction)click:(id)sender {
        BOOL isClicked                  =   ((UIButton*)sender).selected;
        ((UIButton*)sender).selected    =   !((UIButton*)sender).selected;
        CATransform3D transfrom         =   CATransform3DIdentity;
        transfrom.m34                   =   -1.0/ 500;
        if ( !isClicked ) 
            transfrom                   =   CATransform3DRotate(transfrom, degToRad(180.0), 1, 0, 0);
        else 
            transfrom                   =   CATransform3DRotate(transfrom, degToRad(-180.0), 1, 0, 0);

        plane.transform                 =   transfrom;
    } 
```

但是，在第 1 步，我可以看到图层翻转了 180 度，当我再次单击该按钮时，没有任何反应。

我在中间错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:36:10.413

下面的代码仅获取发件人的选定状态。并且状态只设置一次。检查下面的修改代码。

```
// Have a global variable
 BOOL isClicked 

- (IBAction)click:(id)sender {
        CATransform3D transfrom         =   CATransform3DIdentity;
        transfrom.m34                   =   -1.0/ 500;
        if ( !isClicked ) {
            transfrom                   =   CATransform3DRotate(transfrom, degToRad(180.0), 1, 0, 0);
        isClicked                       =   true;
        }
        else{ 
            transfrom                   =   CATransform3DRotate(transfrom, degToRad(360.0), 1, 0, 0); // OR CAN ALSO BE 0
        isClicked                       =   false;
        }
        plane.transform                 =   transfrom;
    } 
```

# android - 有意图地传递数据

> ID：15893146
> 
> 赞同：1
> 
> 时间：2013-04-09T04:09:49.293
> 
> 标签：android, android-intent

为什么这行不通？只是试图将可编辑的字符串从一个活动传递到另一个活动。但我无法让它工作。通过意图传递的字符串是否必须预先定义？如果是这样，我该如何传递可编辑的字符串？

```
 @Override
  public void onClick(View v) 
     {
             // TODO Auto-generated method stub
         textOut.setText(textIn.getText());

            Intent intent = new  Intent(TutorialOne.this,MainActivity.class);
        intent.putExtra("text", textIn.getText());
        startActivity(intent);
     }

public class MainActivity extends Activity 
  {

TextView gettext;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    gettext = (TextView) findViewById(R.id.textView1);
    Intent intent = getIntent();
    intent.getExtras().getString("text");
    String s = intent.getStringExtra("text");
    gettext.setText(s);
    gettext.setTextColor(Color.WHITE);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:19:20.450

使用 this 而不是 this。

```
 @Override
  public void onClick(View v) 
     {
             // TODO Auto-generated method stub
        textOut.setText(String.valueOf(textIn.getText()));
        Intent intent = new  Intent(TutorialOne.this,MainActivity.class);
        intent.putExtra("text", String.valueOf(textIn.getText()));
        startActivity(intent);
     } 
```

而不是这个。

```
 @Override
  public void onClick(View v) 
     {
             // TODO Auto-generated method stub
         textOut.setText(textIn.getText());

            Intent intent = new  Intent(TutorialOne.this,MainActivity.class);
        intent.putExtra("text", textIn.getText());
        startActivity(intent);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:46:21.810

像这样尝试获取字符串

```
 if (getIntent().getExtras() != null) {
        String  mstr = getIntent().getExtras().getString("text");               
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:51:07.777

```
@Override
  public void onClick(View v) 
     {
             // TODO Auto-generated method stub
        textOut.setText(String.valueOf(textIn.getText()));
        Intent intent = new  Intent(TutorialOne.this,MainActivity.class);
        String text = textIn.getText().toString().trim();
        intent.putExtra("text", text);
        startActivity(intent);
     } 
```

使用此代码

# video - BIOS int 10h 服务 0 和 EGA 模式

> ID：15893150
> 
> 赞同：1
> 
> 时间：2013-04-09T04:10:33.677
> 
> 标签：video, assembly, x86, dos, bios

我花了很多时间试图找出当调用**BIOS INT 10**服务**0**来设置视频模式时会发生什么。是否可以使用 EGA 端口手动执行这些操作？

我找到了来自不同来源的文档，但找不到只设置特定模式的东西。我开始认为“视频模式”不仅仅是一个寄存器值，它是 EGA 中的一堆设置。

需要明确的是，我在 DOSBox 和 QEMU 下仅使用文本模式（0、1、2、3 和 7）进行练习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:58:06.473

在网上查找`Tauron VGA Utilities`. 包中的代码仅使用视频寄存器而不使用任何 BIOS 功能来设置各种视频模式（文本和图形）。这些模式中的大多数似乎都可以在 DosBox 下工作，我只是尝试过。

# ember.js - 使用 ember-data 通过 id 查找一些记录

> ID：15893151
> 
> 赞同：0
> 
> 时间：2013-04-09T04:10:47.943
> 
> 标签：ember.js, ember-data, travis-ci

我正在尝试为 Travis-CI Mobile 加载一些最喜欢的存储库，我正在尝试将它们放在[一起](https://github.com/floydpink/Travis-CI-www)

我拥有的是一组存储库 ID，如下所示：

```
var favoriteRepos = ["668498","557554","7934","207993"]; 
```

我们如何使用 ember-data 修订版 12、[Travis 自定义 RESTAdapter](https://github.com/travis-ci/travis-web/blob/master/assets/scripts/app/store/rest_adapter.coffee)和[Travis API](https://api.travis-ci.org/docs/)加载所有这些存储库？

到目前为止，这是我尝试失败的方法：

```
// This is in the repo model - https://github.com/floydpink/Travis-CI-www/blob/master/js/app/models/Repo.js
Repo.reopenClass({
  favorites     : function (favorites) {
    // favorites would be an array of repo-ids like  ["451069","538603"]
    var faves = Ember.ArrayProxy.create({
      isLoadedBinding : 'content.isLoaded',
      content         : Ember.A([])
    });
    favorites.forEach(function (favorite) {
      faves.pushObject(Repo.find(favorite));
    });
    return faves;
  }
});

// And in FavoritesController
this.set('content', Repo.favorites(favoriteRepos)); 
```

所以一般的问题是，我们如何使用 ember-data 按 id 加载一些不同的记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:28:56.053

你应该能够做到：

```
Repo.reopenClass({
  favorites     : function (favorites) {
    // favorites would be an array of repo-ids like  ["451069","538603"]
    return Ember.ArrayProxy.createWithMixins({
      content: favorites.map(function(id) { return Repo.find(id); }),
      isLoaded: function() {
        return this.everyProperty('isLoaded');
      }.property('@each.isLoaded');
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:40:36.727

如果您的车把模板如下所示：

```
{{#if isLoaded}}
  {{#each controller}}
    ...
  {{/each}}
{{/if}} 
```

然后它就行不通了，因为你从来没有在你的阵列上设置`isLoaded`过。`true`根据您使用的数据实现，您可以执行以下操作：

```
Repo.reopenClass({
  favorites: function (ids) {
    // ids would be an array of repo-ids like  ["451069","538603"]
    var loadCount = 0;
    var favorites = Em.A();
    ids.forEach(function(id) {
      var favorite = Repo.find(id);
      favorites.pushObject(favorite);
      favorites.then(function() {
        loadCount++;
        if (loadCount == ids.length) {
          favorites.set('isLoaded', true);
        }
      });
    });
    return favorites;
  }
}); 
```

`isLoaded`一旦从服务器加载了所有收藏夹，该属性就会设置为 true。

# python - 在 MySQL 子查询中使用 Python 变量

> ID：15893153
> 
> 赞同：3
> 
> 时间：2013-04-09T04:11:11.523
> 
> 标签：python, mysql, sql

```
team = input("Enter the team name: ")

cursor = db.cursor()

sql = "SELECT * FROM `flash_data_archive` WHERE `event_id` IN (SELECT `alternate_id` from `event_list` where `category` = %s)" % team 

cursor.execute(sql) 
```

让用户为“团队”输入的字符串用于 sql 子程序中的类别字段的正确表示法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:13:09.910

`% team`从字符串中删除。相反，它应该是`.execute`.

```
cursor.execute(sql, team) 
```

这将正确地逃脱它。

# .net - 为什么我的 RichTextBox 没有激活它的事件 vb.net

> ID：15893154
> 
> 赞同：0
> 
> 时间：2013-04-09T04:11:14.030
> 
> 标签：.net, vb.net, events, richtextbox

好的，所以我在 stackoverflow 上找到了这段代码，并在我的项目中将它实现到了一个新的类文件中。

```
 Imports System
Imports System.Collections.Generic
Imports System.Text
Imports System.Runtime.InteropServices
Imports System.Windows.Forms

Namespace WindowsFormsApplication1

    Public Class MyRichTextBox
        Inherits RichTextBox
        <DllImport("user32.dll", CharSet:=CharSet.Auto)> _
        Public Shared Function GetScrollPos(ByVal hWnd As IntPtr, ByVal nBar As Integer) As Integer
        End Function

        <DllImport("user32.dll")> _
        Private Shared Function SetScrollPos(ByVal hWnd As IntPtr, ByVal nBar As Integer, ByVal nPos As Integer, ByVal bRedraw As Boolean) As Integer
        End Function

        Private Const SB_HORZ As Integer = &H0
        Private Const SB_VERT As Integer = &H1

        ''' <summary>
        ''' Gets and Sets the Horizontal Scroll position of the control.
        ''' </summary>
        Public Property HScrollPos() As Integer
            Get
                Return GetScrollPos(DirectCast(Me.Handle, IntPtr), SB_HORZ)
            End Get
            Set(ByVal value As Integer)
                SetScrollPos(DirectCast(Me.Handle, IntPtr), SB_HORZ, value, True)
            End Set
        End Property

        ''' <summary>
        ''' Gets and Sets the Vertical Scroll position of the control.
        ''' </summary>
        Public Property VScrollPos() As Integer
            Get
                Return GetScrollPos(DirectCast(Me.Handle, IntPtr), SB_VERT)
            End Get
            Set(ByVal value As Integer)
                SetScrollPos(DirectCast(Me.Handle, IntPtr), SB_VERT, value, True)
            End Set
        End Property
    End Class
End Namespace 
```

在我将代码实现到我的项目中后，我意识到要替换我的 RichTextBox，我将不得不更改我的大部分代码。为了寻求一种更快的方法来做到这一点，我将以下代码放在我的 form1_Load 事件中。

```
 RichTextBox1 = New MyRichTextBox 
```

所以现在 RichTextBox1 是 MyRichTextBox

并且因为 MyRichTextBox 实现了 RichTextBox 它应该具有相同的事件。

但是我的 RichTextbox.TextChanged 事件不起作用。现在，如果我从 form1_load 中删除上面的那一行，它就可以正常工作。怎么了？

**编辑**

所以我发现 MyRichTextBox 没有与 RichTextBox 相同的事件......我将如何添加这些事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:13:27.430

试试这个代码。

在类中添加 textchanged 事件

例子

```
 Imports System
    Imports System.Collections.Generic
    Imports System.Text
    Imports System.Runtime.InteropServices
    Imports System.Windows.Forms
    Namespace WindowsFormsApplication1

        Public Class MyRichTextBox
            Inherits RichTextBox
            <DllImport("user32.dll", CharSet:=CharSet.Auto)> _
            Public Shared Function GetScrollPos(ByVal hWnd As IntPtr, ByVal nBar As Integer) As Integer
            End Function

            <DllImport("user32.dll")> _
            Private Shared Function SetScrollPos(ByVal hWnd As IntPtr, ByVal nBar As Integer, ByVal nPos As Integer, ByVal bRedraw As Boolean) As Integer
            End Function

            Private Const SB_HORZ As Integer = &H0
            Private Const SB_VERT As Integer = &H1

......
.........
..........
........
......

''' Add the Event

            Protected Overrides Sub OnTextChanged(ByVal e As System.EventArgs)

                MsgBox(Me.Text)
                MyBase.OnTextChanged(e)
            End Sub

        End Class

    End Namespace 
```

在加载事件中

```
 Dim RichTextBox1 As New WindowsFormsApplication1.MyRichTextBox
    Me.Controls.Add(RichTextBox1) 
```

# hibernate - 在休眠中保存大量记录的最佳方法

> ID：15893156
> 
> 赞同：1
> 
> 时间：2013-04-09T04:11:18.287
> 
> 标签：hibernate, save

我有 5000 条记录要保存。从数据库的角度来看，最好的方法是什么，是否在休眠中保存单个记录（保存（记录）5000次）或保存所有（5000条记录的列表）......？由于这种情况经常出现，因此建议我最好的一个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:01:43.900

在 Hibernate 中使用功能批量插入。

> Batch Insertion 是 hibernate 的一项强大功能，当您从其他系统批量导入数据时特别有用。如果不使用休眠的批处理功能，在插入许多记录时，应用程序的性能可能会急剧下降。

这是普通保存和批量插入的简单[比较。](http://javainnovations.blogspot.in/2008/07/batch-insertion-in-hibernate.html)

还有[官方文档。](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:35:24.287

一次保存 5000 条记录可能会耗尽内存并获取`OutOfMemoryException`，因为 5000 个实例可能会占用相当大的内存。

一次保存一条记录意味着您不使用 JDBC 的批处理功能，该功能可以更有效地插入记录。

`hibernate.jdbc.batch_size`因此，为了获得最佳性能，您应该通过设置一些非零值来告诉 hibernate 使用 JDBC 的批处理功能。一次保存的记录数应等于 的值`hibernate.jdbc.batch_size`。

此外，您应该清除会话以释放内存，以防止在每批结束时内存耗尽。您还可以禁用二级缓存以减少不必要的开销。

参考： [Hibernate 批量大小混淆](https://stackoverflow.com/questions/6687422/hibernate-batch-size-confusion/6689079#6689079)

# java - 如何将“MM-dd-yyyy hh:mm”字符串日期格式转换为 GMT 格式？

> ID：15893159
> 
> 赞同：1
> 
> 时间：2013-04-09T04:11:42.483
> 
> 标签：java, android

我的日期格式就像“MM-dd-yyyy hh:mm”，它不是当前日期，我必须将此日期发送到服务器，但在发送之前需要将此日期更改为 GMT 格式，但是当我通过以下代码更改时：

```
private String[] DateConvertor(String datevalue)
        {
            String date_value[] = null;
            String strGMTFormat = null;
            SimpleDateFormat objFormat,objFormat1;
            Calendar objCalendar;
            Date objdate1,objdate2;
            if(!datevalue.equals(""))
            {
            try
            {
            //Specify your format
                objFormat1 = new SimpleDateFormat("MM-dd-yyyy,HH:mm");
                objFormat1.setTimeZone(Calendar.getInstance().getTimeZone());

                objFormat = new SimpleDateFormat("MM-dd-yyyy,HH:mm");
                objFormat.setTimeZone(TimeZone.getTimeZone("GMT"));

            //Convert into GMT format
            //objFormat.setTimeZone(TimeZone.getDefault());//);
             objdate1=objFormat1.parse(datevalue);
            //
            //objdate2=objFormat.parse(datevalue);

            //objFormat.setCalendar(objCalendar);
            strGMTFormat = objFormat.format(objdate1.getTime());
            //strGMTFormat = objFormat.format(objdate1.getTime());
            //strGMTFormat=objdate1.toString();
            if(strGMTFormat!=null && !strGMTFormat.equals(""))
             date_value = strGMTFormat.split(",");
            }
            catch (Exception e)
            {
                e.printStackTrace();
                e.toString();
            }
            finally
            {
            objFormat = null;
            objCalendar = null;
            }
            }
            return date_value;

        } 
```

它没有改变所需的格式，我已经尝试通过上面的代码首先尝试获取当前时区，然后在转换 GMT 之后尝试将字符串日期更改为该时区。任何人指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:26:26.840

试试下面的代码。第一个 sysout 打印获取默认操作系统时区的日期对象，即在我的情况下为 IST。在将日期转换为 GMT 时区后，第二个 sysout 以所需格式打印日期。

如果您知道日期字符串的时区，请在格式化程序中进行设置。我假设您在 GMT 时区需要相同的日期格式。

```
SimpleDateFormat format = new SimpleDateFormat("MM-dd-yyyy,HH:mm");

Date date = format.parse("01-23-2012,09:40");
System.out.println(date);

format.setTimeZone(TimeZone.getTimeZone("GMT"));
System.out.println(format.format(date)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T04:28:03.253

您需要使用 TimeZone 的[`getRawOffset()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimeZone.html#getRawOffset%28%29)方法：

```
Date localDate = Calendar.getInstance().getTime();
TimeZone tz = TimeZone.getDefault();
Date gmtDate = new Date(date.getTime() - tz.getRawOffset()); 
```

它

> 返回添加到 UTC 以获得该时区的标准时间的时间量（以毫秒为单位）。因为这个值不受夏令时影响，所以称为原始偏移量。

如果您也想考虑 DST（您可能想要这个 ;-)）

```
if (tz.inDaylightTime(ret)) {
    Date dstDate = new Date(gmtDate.getTime() - tz.getDSTSavings());

    if (tz.inDaylightTime(dstDate) {
        gmtDate = dstDate;
    }
} 
```

如果您正处于夏季时间更改的边缘，并且例如通过转换回到标准时间，则需要最后一次检查。

希望有帮助，

-汉内斯

# lua - 我的 lua 脚本加载 .so 库，如何使用 Lua 5.2 编写宿主程序？

> ID：15893165
> 
> 赞同：3
> 
> 时间：2013-04-09T04:12:17.450
> 
> 标签：lua, luabind

我搜索并尝试了几天。问题是这样的：

我编写了一个加载共享库的脚本`locker.so`，它与 lua 解释器一起运行良好，但我无法写出正确的主机程序。

我的 lua 脚本`load_so.lua`非常简单：

```
locker = require("locker")
print(type(locker))
for k, v in pairs(locker) do
    print(k, v)
end 
```

我的主机程序是：

```
int main(int argc, const char *argv[])
{
    lua_State * L = luaL_newstate();
    luaL_openlibs(L);

    if (luaL_dofile(L, "load_so.lua") != 0) {
        fprintf(stderr, "luaL_dofile error: %s\n", lua_tostring(L, -1));
        lua_pop(L, 1);
    }
    lua_close(L);
    return 0;
} 
```

当我运行我的主机程序时，错误打印出来：

```
luaL_dofile error: error loading module 'locker' from file './locker.so':
    ./locker.so: undefined symbol: lua_pushstring 
```

还有locker.c：

```
static int elock_get(lua_State * L) {...}

static int elock_set(lua_State * L) {...}

static const struct luaL_Reg lockerlib[] = {
    {"get", elock_get},
    {"set", elock_set},
    {NULL, NULL}
};

int luaopen_locker(lua_State *L)
{
    //luaL_newlib(L, lockerlib);
    //lua_pushvalue(L, -1);
    //lua_setglobal(L, LOCKER_LIBNAME);
    //set_info(L);
    luaL_newlibtable(L, lockerlib);
    luaL_setfuncs(L, lockerlib, 0);
    return 1;
} 
```

大多数文章、书籍、问题都展示了如何在 Lua 5.1 中执行此操作，是的，该程序在 Lua 5.1 中正确运行。但是我怎样才能让它支持 Lua 5.2，为什么？

PS：我不想在我的 C 主机程序中加载库`luaL_requiref(L, "locker", luaopen_locker, 1)`，因为我不知道 Lua 脚本中会加载哪个 .so 库。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:20:35.417

在 Linux 中，如果你`liblua.a`静态链接到你的主程序，你需要 `-Wl,-E`在链接时使用导出 Lua API 符号；这就是标准命令行解释器的构建方式。

# javascript - 为什么在 Jasmine 中，我们不能将期望放在外部函数中？

> ID：15893168
> 
> 赞同：0
> 
> 时间：2013-04-09T04:12:53.307
> 
> 标签：javascript, jasmine

如果使用 Jasmine 1.3.1，我使用

```
describe("TryTry", function() {

    var i;

    function checkForSituation(a) {
        // say, if this is made into a function because 
        //   there are a lot of processing

        console.log("THERE", a); 
        expect(foo(3, a)).toEqual( 3 + a );
    }

    for (i = 0; i < 5; i++) {
        console.log("HERE", i); 

        it("should add for " + i, function() {

            checkForSituation(i);

        });

    }

}); 
```

而 foo 只是：

```
function foo(a, b) {
    return a + b;
} 
```

我希望它检查 0 到 4，然后打印出来

```
HERE 0
THERE 0
HERE 1
THERE 1
  ... 
```

但相反，它只是在 Chrome 的控制台中打印为：`HERE 0, HERE 1, ...`然后`THERE 5`五次。有人知道为什么`expect`不能将 an 放在这样的外部函数中，如果我需要在函数中放入许多步骤，在 Jasmine 中该怎么做？

附带说明一下，有时在 JavaScript 中，我觉得开发了一种全新的语言，而您通常可以做的事情却行不通——并且想知道可以做些什么来防止这种事情发生，而不知道它的发生会发生。

如果您想尝试一下，它位于[https://github.com/jianlin/jasmine-looping-an-it-calling-function-that-does-expect](https://github.com/jianlin/jasmine-looping-an-it-calling-function-that-does-expect)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:20:31.910

我从来没有使用过 Jasmine，所以我不知道其中大部分是做什么的，我绝对不知道是做什么`it`的，但这似乎是 Javascript 中常见的关闭问题。

这通常发生在异步事物（如`event`处理程序）尝试访问`i`其回调中的迭代器（）时。到那时，循环已经完成并且`i`是最后一个值。使用闭包，`i`可以捕获并正确传递 的值。如果`it`是异步的，您将无法获得`console.log`您想要的结果顺序 - “HERE”将首先出现，然后是“THERE”。

你可以试试这段代码：

```
it("should add for " + i, (function(i) {
    return function () {
        checkForSituation(i);
    };
})(i); 
```

# java - Listview：按下后退按钮后如何保持突出显示/选中？

> ID：15893171
> 
> 赞同：5
> 
> 时间：2013-04-09T04:13:13.047
> 
> 标签：java, android, listview

当我们按下后退按钮时，如何保持列表视图保持突出显示？是否可以？我已经浏览了这个[链接](https://stackoverflow.com/questions/14952134/listview-selected-item-color-changed-when-come-back-from-other-activity-in-andro)，但没有回复。

我设法设置背景、图像和文本，以便在用户按下列表时进行更改。

我的xml之一：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

 <item 
    android:state_pressed="true"
    android:drawable="@color/light_grey" />

<item android:state_selected="true"
    android:drawable="@color/light_grey"/>

<item android:state_activated="true"
    android:drawable="@color/light_grey"/>

<item android:state_focused="false"
    android:drawable="@color/white" /> 
```

通知行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:background="@drawable/activated_bg" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_gravity="center"
        android:layout_marginLeft="5dp"
        android:padding="4dp"
        android:src="@drawable/checkbox" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.73"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/id_row"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="gone" />

        <TextView
            android:id="@+id/title_row"
            android:layout_width="match_parent"
            android:layout_height="25dp"
            android:layout_marginTop="5dp"
            android:layout_marginLeft="5dp"
            android:padding="2dp"
            android:text="Title"
            android:textColor="#000000"
            android:textSize="16sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/content_row"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="gone" />

        <TextView
            android:id="@+id/sendtime_row"
            android:layout_width="match_parent"
            android:layout_height="25dp"                
            android:layout_marginLeft="5dp"
            android:maxLength="100"
            android:paddingBottom="2dp"
            android:paddingLeft="3dp"
            android:paddingRight="3dp"
            android:text="Date"
            android:textColor="#808080"
            android:textSize="15sp" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:26:19.213

您可以每次在 OnItemSelectedListener 中记录位置，并在用户返回后调用 mListView.setSelection(pos)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:12:05.240

在哪个 Activity 你有 listview 把这个：

将此创建为全局变量：`Bundle savedInstanceState;`

```
@Override
    protected void onRestart() {
        // TODO Auto-generated method stub
        onCreate(savedInstanceState);
        super.onRestart();
    } 
```

在`onCreat`e 中处理您的`ListView`或从您设置`adapter`到的位置`ListView`。

**这是简单的示例如何执行此操作：**

```
package com.example.testapp;

import com.example.main.util.testActivity;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class MainActivity extends ListActivity {

    private static final String[] COUNTRIES = new String[] { "Belgium",
            "France", "France_", "Italy", "Germany", "Spain" };
    private MyArrayAdapter adapter;
    Bundle savedInstanceState;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        adapter = new MyArrayAdapter(MainActivity.this);
        getListView().setAdapter(adapter);
    }

    private class MyArrayAdapter extends BaseAdapter {

        private LayoutInflater mInflater;

        public MyArrayAdapter(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return COUNTRIES.length;
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.my_spinner_style, null);
                holder = new ListContent();

                holder.name = (TextView) v.findViewById(R.id.textView1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.name.setText("" + COUNTRIES[position]);
            holder.name.setOnClickListener(mOnTitleClickListener3);

            return v;
        }

    }

    static class ListContent {

        TextView name;

    }

    public OnClickListener mOnTitleClickListener3 = new OnClickListener() {
        public void onClick(View v) {
            final int position = getListView().getPositionForView(
                    (View) v.getParent());
            v.setBackgroundColor(Color.RED);
            startActivity(new Intent(MainActivity.this, testActivity.class));
            // Log.d("you are click on Ratings", "you are click on Ratings");
            // v.setBackgroundColor(Color.WHITE);
        }
    };

    protected void onRestart() {
        // adapter.notifyDataSetChanged();
        onCreate(savedInstanceState);
    };
} 
```

或者你也可以做同样风格的反向。意味着您必须在进行下一个活动后取消选择该 litview。您可以在列表项单击或您使用过的任何内容中执行此操作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:04:05.587

您可以使用这些方法在 listView 上进行选择

```
 mListView.setSelector(Color.BLUE);//or any other color or drawable
    mListView.setSelection(position); //for selected position 
```

在这里，您可以将该位置用作列表视图的选定位置。您必须在选择后存储该位置。因此，当您按下返回按钮并再次返回该活动时，选定位置将保持选中状态。

# java - 列出一个包的所有子包

> ID：15893174
> 
> 赞同：12
> 
> 时间：2013-04-09T04:13:45.380
> 
> 标签：java, spring

我正在寻找一种方法来列出 Java 中任意包的所有子包。

像这样的东西：

```
Package basePackage = getPackage("com.mypackage");
for(Package subPackage : basepackage.getSubPackages()){
  System.out.println(subPackage.getName());
} 
```

有没有办法做到这一点？提前致谢。

IDE（比方说 Netbeans）是如何做到的？ ![在此处输入图像描述](https://i.stack.imgur.com/UiovO.png)

更新：

我正在尝试查找 MyBatis 的所有映射器包。在我的项目中，所有映射器包都必须命名为“*.mappers”。例如：“abmappers”或“abcmappers”。问题是我只知道基本包，不知道它下面有多少个映射器包。

更新：这是我尝试使用反射库的代码：

```
private Set<String> getPackagesNames() {
    Reflections reflections = new Reflections("com.mypackage");
    Set<Class<? extends Object>> allClasses = reflections.getSubTypesOf(Object.class);
    Set<String> packageNames = new HashSet<>();

    for( Iterator<Class<? extends Object>> it = allClasses.iterator(); it.hasNext(); ) {
        Class<? extends Object> subClass= it.next();
        packageNames.add(subClass.getPackage().getName());
    }

    return packageNames;
} 
```

不知道为什么这不起作用。这里没有找到类......

**更新**

这是我的代码。有点慢，但就我而言，性能并不是那么大的问题。我以前从未使用过 Spring，所以如果有更好的方法，请告诉我。谢谢。

```
 private static Set<String> getPackages(String basePackage) throws IOException, ClassNotFoundException {
        Set<String> packagesNames = new HashSet<>();

        ResourcePatternResolver resourcePatternResolver = new PathMatchingResourcePatternResolver();
        MetadataReaderFactory metadataReaderFactory = new CachingMetadataReaderFactory(resourcePatternResolver);

        String packageSearchPath = ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX + resolveBasePackage(basePackage) + "/" + "**/*.class";
        Resource[] resources = resourcePatternResolver.getResources(packageSearchPath);
        for( Resource resource : resources ) {
                MetadataReader metadataReader = metadataReaderFactory.getMetadataReader(resource);    
                Class aClass = Class.forName(metadataReader.getClassMetadata().getClassName());
                String packageName = aClass.getPackage().getName();
                packagesNames.add(packageName);
            }
        }
        return packagesNames;
    }

    private static String resolveBasePackage(String basePackage) {
        return ClassUtils.convertClassNameToResourcePath(SystemPropertyUtils.resolvePlaceholders(basePackage));
    } 
```

大部分代码是从[如何从类路径中的 Java 包中读取所有类中复制的？](https://stackoverflow.com/questions/1456930/how-do-i-read-all-classes-from-a-java-package-in-the-classpath/5343940#5343940)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-18T08:42:04.830

我想获取包的最简单方法是获取类加载器的所有包

```
Package.getPackages() 
```

并用你的包名过滤它

```
packageName.startsWith("com.yourcompany.yourpackage") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:28:27.163

1) 从包中加载任何类并获取其 URL

```
URL u = Test.class.getResource(""); 
```

2）判断是文件还是jar。

2) 使用 File.list() 查找目录或 JarFile.getEntries 查找子包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T09:30:25.277

详细说明：IDE实际上读取了依赖项的JAR文件。在 JAR 文件中，它只是一个目录结构。这与 Java ClassLoader 存储它的方式不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-02T15:44:39.680

解决此问题的另一种可能方法是使用系统类加载器加载类路径中的所有 jars / zip 文件，然后简单地检查这些文件。

性能不会很好。因为我们正在检查 jar / zip 文件，但它确实有效。

这是一些示例代码：

```
import java.net.URL;
import java.net.URLClassLoader;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.Arrays;
import java.util.LinkedHashSet;
import java.util.Set;
import java.util.TreeSet;
import java.util.jar.JarInputStream;
import java.util.stream.Collectors;
import java.util.zip.ZipEntry;

public class ClasspathLister {

    public static void main(String[] args) {
        listPackages("com/fasterxml").forEach(s -> {
            System.out.printf("%s%n", s.replace("/", ".").replaceAll("\\.$", ""));
        });
    }

    private static Set<String> listPackages(String prefix) {
        URLClassLoader sysloader = (URLClassLoader) ClassLoader.getSystemClassLoader();
        return Arrays.stream(sysloader.getURLs())
            .filter(u -> u.toString().matches("(?i).+(\\.jar|\\.zip)$"))
            .flatMap(u -> listJar(u, prefix).stream())
            .collect(Collectors.toCollection(TreeSet::new));
    }

    private static Set<String> listJar(URL u, String prefix) {
        Set<String> packages = new LinkedHashSet<>();
        try (JarInputStream in = 
            new JarInputStream(Files.newInputStream(Paths.get(u.toURI())))) {
            ZipEntry ze;
            while ((ze = in.getNextEntry()) != null) {
                if (ze.isDirectory() && ze.getName().startsWith(prefix)) {
                    packages.add(ze.getName());
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return packages;
    }
} 
```

这将输出如下内容：

```
com.fasterxml
com.fasterxml.jackson
com.fasterxml.jackson.annotation
com.fasterxml.jackson.core
com.fasterxml.jackson.core.base
com.fasterxml.jackson.core.filter
com.fasterxml.jackson.core.format
com.fasterxml.jackson.core.io
com.fasterxml.jackson.core.json
com.fasterxml.jackson.core.sym
com.fasterxml.jackson.core.type
com.fasterxml.jackson.core.util
com.fasterxml.jackson.databind
com.fasterxml.jackson.databind.annotation
com.fasterxml.jackson.databind.cfg
com.fasterxml.jackson.databind.deser
com.fasterxml.jackson.databind.deser.impl
com.fasterxml.jackson.databind.deser.std
com.fasterxml.jackson.databind.exc
... 
```

# ssh - MySQLDump 从通过 SSH 连接的远程服务器到本地机器

> ID：15893176
> 
> 赞同：32
> 
> 时间：2013-04-09T04:13:56.710
> 
> 标签：ssh, mysqldump

```
mysqldump -h xxx.xxx.xxx.xxx -u username -ppassword databasename > C:\path\to\store\file 
```

它似乎在文件下载时暂停，但完成后没有文件出现。

我在命令行中有什么问题吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-09T05:14:53.537

像这样使用：

```
mysqldump -P3306  -h192.168.20.151 -u root -p database > c:/my.sql 
```

希望能帮到你：）

* * *

linux版

```
mysqldump -u root -p databasename > ~/Downlaods/filename.sql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:36:26.910

只需`mysqldump -h xxx.xxx.xxx.xxx -u username -ppassword databasename > C:\path\to\store\file`从本地计算机上的命令提示符运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:17:44.640

我不明白你为什么在你的问题中涉及 ssh 但是......

首先尝试相同的命令而不将其重定向到文件，以查看您可以连接到数据库。

其次确保您可以写入该位置（尝试在同一路径中创建和编辑文件）。

如果那些工作你的命令应该工作。

# android - 可以在主活动中实例化的 XML 布局中的类

> ID：15893177
> 
> 赞同：0
> 
> 时间：2013-04-09T04:13:58.320
> 
> 标签：android, xml, view

所以我有这个xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="10sp"
    android:id="@+id/lengthLayout"
    android:background="@color/gray2"
     >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >

        <EditText
            android:id="@+id/inputLength"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="0.3"
            android:hint="@string/temperatureHint"
            android:inputType="number"
            android:textSize="30sp"
            tools:ignore="NestedWeights" />

        <Spinner
            android:id="@+id/lengthUnits"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="0.7" />
    </LinearLayout>

  <View
            android:layout_width="fill_parent"
            android:layout_height="15dp"
     />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" 
       >
        <ListView 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:verticalSpacing="10sp"
            android:horizontalSpacing="10dp"
            android:gravity="center"
            android:id="@+id/results_length"
            android:divider="@android:color/transparent"
            android:dividerHeight="5sp"

                      >

        </ListView>

        </LinearLayout>
</LinearLayout> 
```

我想创建一个将使用此 XML 文件中的资源的类。这样当类在主活动中被实例化时，它会将视图添加到应用程序中。

```
public class LengthFragment extends View implements OnClickListener, OnItemSelectedListener{

 Context rContext;

public LengthFragment(Context context){
    super(context);
    rContext = context;

    inflate(context, R.layout.view_length, null);
} 
```

这就是我在主要活动中所做的

```
LengthFragment lF = new LengthFragment(testapp.this); 
```

我什至尝试将主要活动的充气机传递给 lengthfragment 并使用该充气机给视图充气，但它不起作用，它所做的只是给了我一个空白视图。谢谢。

当我在主要活动 LinearLayout l1 = (LinearLayout) getLayoutInflater().inflate(R.layout.view_length, null);

但我想在主要活动之外创建这个视图，但只是在主要活动中实例化一个类。

# html - 根据内部文本展开 div

> ID：15893179
> 
> 赞同：1
> 
> 时间：2013-04-09T04:14:07.863
> 
> 标签：html, css

我的 HTML 中有以下 div 元素。它们充当按钮。

```
 <div id="button-section">
    <!-- Section for function buttons -->
      <div class="fn-button">
      <!-- Function button -->
        <span>My Current Checks</span>
      </div>
      <div class="fn-button">
      <!-- Function button -->
        <span>All Current Checks</span>
      </div>
      <div class="fn-button">
      <!-- Function button -->
        <span>Add New order</span>
      </div>
  </div> 
```

这是我用于那里元素的 CSS。

```
 #button-section{
width: 100%;
height: 150px;
position: fixed;
bottom: 0;
background-color: rgb(229, 229, 255);
 }

 .fn-button{
width: 130px;
height: 50px;
float: left;
margin: 10px 0px 0px 20px;
border-radius: 10px;
background: rgb(111, 111, 111);
box-shadow: inset 1px 4px 12px rgb(0, 0, 0);
text-align: center;
 }

 .fn-button span{
padding: 0px;
margin: 0px 0px 0px 0px;
color: white;
vertical-align: -17px;
font-size: 20px;
 } 
```

问题是，我需要根据每个 div 元素内的文本调整宽度。！为此，我必须为每个元素定义宽度或找到另一种方法。下图将显示我的 div 情况。

![显示错误](https://i.stack.imgur.com/KmbXP.png)

如何根据内部文本动态扩展 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:17:09.957

`width`从 div ( `width: 130px`) 中删除规则。

这最终看起来有点皱巴巴，但你可以用一些填充来解决这个问题

```
padding-left: 5px;
padding-right: 5px; 
```

[http://jsfiddle.net/ExplosionPIlls/zXN6C/](http://jsfiddle.net/ExplosionPIlls/zXN6C/)

# sql - Entity Framework 究竟何时触发 SQL 命令？

> ID：15893180
> 
> 赞同：1
> 
> 时间：2013-04-09T04:14:12.580
> 
> 标签：sql, ef-code-first, entity-framework-5

假设我有如下代码：

```
public void TestWhenSqlFires()
{
    var db = new Db(); // EF DbContext
    var items = db.SimpleObjects; // SimpleObject implements interface IId
    var byId = WhereId(items, 1);
    var array = byId.ToArray();
}

protected IEnumerable<IId> WhereId(IEnumerable<IId> items, int id)
{
    return items.Where(i => i.Id == id);
} 
```

在 TestWhenSqlFires() 中的哪一行，SQL 将实际针对数据库运行？

[（这是一个从对此答案](https://stackoverflow.com/a/15845220/176877)的评论中衍生出来的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:14:12.580

一种找出和测试自己的方法：

打开 SQL Server Management Studio，打开一个新查询，选择 EF 将运行的数据库并运行此查询：

```
SELECT top 10 deqs.last_execution_time AS [Time], dest.TEXT AS [Query]
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY deqs.last_execution_time DESC 
```

这会告诉您过去对数据库运行的 10 个查询。

在 TestWhenSqlFires() 的第一行设置断点，运行您的代码，然后在遍历每一行后运行上述查询。你会找到：

```
// C# Line 1
var db = new Db();

--SQL Line 1
SELECT TABLE_SCHEMA SchemaName, TABLE_NAME Name FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_TYPE = 'BASE TABLE'

// C# Line 2
var items = db.SimpleObjects;

--SQL Line 2
SELECT COUNT(*) FROM [sys].[databases] WHERE [name]=@1

SELECT [GroupBy1].[A1] AS [C1] FROM (
    SELECT COUNT(1) AS [A1] FROM [dbo].[__MigrationHistory] AS [Extent1]
) AS [GroupBy1]

(@1 nvarchar(4000))SELECT TOP (1) [Project1].[C1] AS [C1],
    [Project1].[MigrationId] AS [MigrationId],
    [Project1].[Model] AS [Model]  FROM (
        SELECT [Extent1].[MigrationId] AS [MigrationId],
            [Extent1].[Model] AS [Model], 1 AS [C1]
            FROM [dbo].[__MigrationHistory] AS [Extent1]
     )  AS [Project1]  ORDER BY [Project1].[MigrationId] DESC

// C# Line 3
var byId = WhereId(items, 1);

--SQL Line 3

// C# Line 4
var array = byId.ToArray();

--SQL Line 4
SELECT [Extent1].[Id] AS [Id], [Extent1].[Stuff] AS [Stuff]
    FROM [dbo].[SimpleObject] AS [Extent1] 
```

最终的 SQL 查询是 EF 实际获取数据。之前的查询只是在预热 - 验证数据库是否存在，它正在使用 EF5 迁移历史，并且它与当前的迁移历史哈希匹配。

所以答案是 - 第 4 行，之后`.ToArray()`被调用（或任何枚举集合的调用，如 .ToList()、foreach 等）。值得注意的是，将其传递给接受 IEnumerable 的方法，即使涉及特定的 Generic，也不会枚举集合，因此不会在必要之前触发 SQL。

# linux - 是否可以在同一个 SVN 存储库的不同目录中创建从文件 A 到文件 B 的链接？

> ID：15893183
> 
> 赞同：0
> 
> 时间：2013-04-09T04:14:16.913
> 
> 标签：linux, svn, symlink

在同一个 SVN 存储库中，我有两个目录`backend/`和`product/`，它们都包含一个名为`test.xml`.

我怎样才能从`product/test.xml`to建立一个链接`backend/test.xml`，这样在我修改文件`product/test.xml`并完成之后，我会通过执行`SVN commit`来获得修改？`test.xml``SVN up backend/test.xml`

顺便说一句，SVN Externals 似乎不起作用，还是我以错误的方式使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:07:52.847

是的，您可以使用它`svn externals`来实现您想要的（[SVN 1.6+](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)，大约下降了三分之二）。

首先，您需要文件夹中的`svn delete`test.xml和. 然后，在文件夹中，您可以这样设置您的外部：`backend\``svn commit``backend\`

`me@computer:/backend$ svn propset svn:externals "^/Projects/SomeProject/product/test.xml test.xml" .`

[（有关此 SO 答案](https://stackoverflow.com/questions/294256/favorite-non-obvious-feature-of-svn#3094369)中的特殊`^`（插入符号）字符的信息）。

值得注意的是，这将覆盖该`svn:externals`路径上属性的先前值。如果您需要设置多个外部，请以`svn.externals`以下格式保存这些（命名为 ）的文本文件：

```
(path01) (name01)
(path02) (name02)
(path03) (name03)
.
.
.
(pathN) (nameN) 
```

并使用 -F 开关，如下所示：

`svn propset svn:externals -F svn.externals .`

您可以使用像[RabbitVCS](http://rabbitvcs.org/)这样的 GUI 客户端更轻松地做到这一点。

希望这可以帮助。

# android - 使用联机设备进行调试时，我使用哪个 Google Maps API 密钥？

> ID：15893184
> 
> 赞同：0
> 
> 时间：2013-04-09T04:14:23.183
> 
> 标签：android, google-maps, google-maps-api-3, api-key

我知道有很多关于使用 Google Maps API 密钥的问题，但是自从 V1 消失以来，这些问题都没有得到解答。我在 MapView 上加载地图图块时遇到问题。我正在使用从调试密钥库派生的 API 密钥，并且正在使用通过 USB 连接的 Nexus 7 进行调试。我相信我在某处读到过，如果您使用 USB 调试，调试密钥将不起作用 - 这是真的吗？如果我无法让虚拟设备在我的机器上运行，我该如何解决这个问题？MapView 显示正常，但我收到“服务器返回 3”错误，我理解这与密钥不匹配有关。这是我的布局文件中的视图，以及我的manfiest：

```
<com.google.android.maps.MapView
  android:id="@+id/map"
  android:layout_width="fill_parent"
  android:layout_height="100dp"
  android:clickable="true"
  android:apiKey="AIzaSyDXlQso2Xzo4vhLt3gqZAFuoYt081cao8M"
  android:visibility="visible"
/> 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.casson.sherpy"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission   android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"     android:permission="android.permission.ACCESS_FINE_LOCATION">
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name="com.casson.sherpy.MainActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

<meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="AIzaSyDXlQso2Xzo4vhLt3gqZAFuoYt081cao8M"/>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:32:57.197

在调试的情况下使用调试键没有问题。这可能是由于您的清单中缺少使用库声明。但我真的建议从 V1 升级到当前版本 - 在那里处理密钥要容易得多（您只需将密钥和 appname 放入网站，而不是放在 xml 中）。

# c++ - 重载结构运算符作为映射键

> ID：15893190
> 
> 赞同：2
> 
> 时间：2013-04-09T04:14:51.213
> 
> 标签：c++

嗨，我在重载结构的运算符以用作键时遇到问题。这是我打算用作映射键的结构，基本上它有2个字符数组：

```
struct FConfig
{
    char product[3];
    char exchange[4];
    bool operator < (const FConfig &rhs) const
    {
        return (strcmp(product, rhs.product) < 0 || 
                 strcmp(exchange, rhs.exchange <0));
    }
}; 
```

我的比较是只要产品或交换中的一个不等于 rhs，那么密钥就被认为是唯一的。我使用它，在运行时我得到“无效的运算符 <”。我在创建密钥方面完全是新手，所以在覆盖 < 运算符时我仍然无法理解逻辑。感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:18:45.987

您对应该如何`operator <`工作的困惑很常见。你希望它看起来像这样：

```
bool operator < (const FConfig &rhs) const
{
   int product_comparision = strcmp(product,rhs.product);
   if (product_comparision<0) return true;
   if (product_comparision>0) return false;
   return strcmp(exchange,rhs.exchange)<0;
} 
```

由于`product`是您的主键，因此您唯一考虑辅助键的时间是主键值是否相等。

# java - 小型Java程序中没有主类+嵌入为小程序

> ID：15893196
> 
> 赞同：1
> 
> 时间：2013-04-09T04:15:20.683
> 
> 标签：java, web, applet

我的代码有问题。具体这个。当我在 Netbeans 中编译它时，它显示“无法找到或加载主类表单”，但我在代码中看到了它……我做错了什么？

其次，要将它嵌入到网页中，我可以编译它吗？谢谢您的帮助。我对 Java GUI 的东西只有一周的了解。

```
package gui;

import java.applet.Applet;
import java.awt.*;
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.*;

class Form {
    private static void display() {
        JTextField field1 = new JTextField();
        JTextField field2 = new JTextField();
        JTextField field3 = new JTextField();
        JTextField field4 = new JTextField();
        JTextField field5 = new JTextField();
        JPanel panel = new JPanel(new GridLayout(0, 1));
        panel.add(new JLabel("Username:"));
        panel.add(field1);
        panel.add(new JLabel("Password:"));
        panel.add(field2);
        panel.add(new JLabel("Repeat Password:"));
        panel.add(field3);
        panel.add(new JLabel("Email address:"));
        panel.add(field4);
        panel.add(new JLabel("Repeat email address:"));
        panel.add(field5);
        int result = JOptionPane.showConfirmDialog(null, panel, "Form",
            JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);
    }
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                display();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:22:12.850

将您的课程公开，主要方法将被找到并正常运行。

# django - 具有多字段的 Django 模型，未保存。数据群设计得当吗？

> ID：15893198
> 
> 赞同：0
> 
> 时间：2013-04-09T04:15:35.650
> 
> 标签：django, django-models, django-forms, many-to-many

对于具有多对多字段的模型，我认为我没有正确填充数据。我想创建一个带有星期几的模型，以便人们可以选择他们想要接收邮件通知的任何日期。生成的 html 看起来是正确的。即我可以选择复选框天，但是当我单击提交底部时，只有所有其他字段才能正确保存在数据库中，而不是选择星期几。关于数据模型的方式，我确定我犯了一个非常简单的错误。但我看不到它。以下工作应该有效吗？这是我一周中的几天的模型：

```
DAYS_OF_WEEK = (
('1', 'Monday'),
('2', 'Tuesday'),
('3', 'Wednesday'),
('4', 'Thursday'),
('5', 'Friday'),
('6', 'Saturday'),
('7', 'Sunday'),
)

class Days(models.Model):
    days = models.CharField(max_length=1, choices=DAYS_OF_WEEK) 
```

邮件通知模型中引用天数的部分：

```
class Preferences(models.Model):
    user = models.ForeignKey(User)
    mail_days = models.ManyToManyField(Days) 
```

选择日期的表格部分在这里：

```
DAYS_OF_WEEK = (
    ('1', 'Monday'),
    ('2', 'Tuesday'),
    ('3', 'Wednesday'),
    ('4', 'Thursday'),
    ('5', 'Friday'),
    ('6', 'Saturday'),
    ('7', 'Sunday'),
    )

mail_days = forms.MultipleChoiceField(required=False,
            widget=CheckboxSelectMultiple, choices=DAYS_OF_WEEK) 
```

表格显示正确，即出现星期几的复选框。当我选择这些框并点击提交时，一切看起来都很好。但是如果我再次选择表单，复选框都是空的。我更改的表单的其他字段已正确保存。

我想也许我看到了一个问题。这是为 days 模型创建的 SQL 数据库表。它是空的。它没有填充任何东西。不应该吗？

```
CREATE TABLE `myapp_days` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `days` varchar(1) NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

LOCK TABLES `todo_days` WRITE;
UNLOCK TABLES; 
```

选定的日期将保存到名为 myapp_preferences_my_days 的表中：

```
CREATE TABLE `myapp_preferences_mail_days` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `preferences_id` int(11) NOT NULL,
  `days_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `preferences_id` (`preferences_id`,`days_id`),
  KEY `myapp_preferences_mail_days_2d9474d5` (`preferences_id`),
  KEY `myapp_preferences_mail_days_96c2dc77` (`days_id`)
  ) ENGINE=MyISAM AUTO_INCREMENT=16 DEFAULT CHARSET=latin1;

LOCK TABLES `myapp_preferences_mail_days` WRITE;
INSERT INTO `myapp_preferences_mail_days` VALUES (15,1,6),(14,1,4),(13,1,5);
UNLOCK TABLES; 
```

对我的问题有任何见解吗？非常感谢。

# javascript - 防止在剑道网格中编辑一行？

> ID：15893199
> 
> 赞同：4
> 
> 时间：2013-04-09T04:15:37.170
> 
> 标签：javascript, jquery, html, kendo-ui, kendo-grid

我正在使用剑道网格，在编辑一行时，我正在检查该行是否可编辑。因此，如果所选行不可编辑，如何使其不可编辑。我正在执行`edit`网格的签入功能。

代码

```
$("#grid").kendoGrid({
    dataSource : ds,
    selectable : "multiple",
    sortable   : true,
    filterable : false,
    reorderable: true,
    scrollable : false,
    toolbar    : ["create"],
    columns: [
                { field: "event", width: "120px", title: "Event Type"},
                { field: "event_id", width: "120px", title: "Event ID"},
                { field: "addr_no_or_type", width: "120px", title:"Address"},
                { field: "event_rate", width: "100px", title: "Rate"},
                { field: "sched_date", width: "100px", title: "Scheduled"},
                { field: "complete_date", width: "100px", title:"Completed"},
                { field: "serial_no", width: "100px", title: "Serial #"},
                { command: ["edit", "destroy"], title: "Options", width: "170px"}
            ],
    editable: "inline",
    edit    : function(e){
        selectedRowIndex        =   $("#grid").data("kendoGrid").select().index();
        if (selectedRowIndex >= 0) {
            var grid            =   $("#grid").data("kendoGrid");
            var selectedItem    =   grid.dataItem(grid.select());
            var slno            =   selectedItem.serial_no;
            if(slno!=0){
                grid.cancelRow();
            }
        }
    }
}); 
```

但是当我使用它时，我在控制台中收到以下错误。

```
Uncaught TypeError: Cannot call method 'delegate' of null 
```

有人可以建议一种方法来解决它。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T06:34:05.830

在当前情况下，我建议使用 dataBound 事件来遍历 dataSource[视图](http://docs.kendoui.com/api/framework/datasource#methods-view)数据并检查当前记录是否满足给定条件以禁用它的编辑按钮：

```
function onDataBound(e) {
    //this solution makes all rows editable / not editable initially
    var grid = e.sender;
    var data = grid.dataSource.view();

    for (var i = 0; i < data.length; i++) {
        //check your custom condition
        if (data[i].OrderID % 2 == 0) {
            var editButton = grid.tbody.find("tr[data-uid='" + data[i].uid + "'] .k-grid-edit");
            editButton.addClass("k-state-disabled").removeClass("k-grid-edit");
            //or
            //grid.tbody.find("tr[data-uid='" + data[i].uid + "'] .k-grid-edit").remove();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T09:37:33.100

同意，即使我通过更改事件实现了行残疾功能。这是代码：

```
 function onRowSelect(val) {
    var curCell = $("#abc").find(".k-state-selected");
    if (curCell[0].innerText.indexOf('ABCD')>-1) {
        curCell[0].disabled = true;
    }

...

@(Html.Kendo().Grid<xyz>()
.Name("abc")  
.Selectable()   
.Events(e=>e.Change("onRowSelect")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T07:26:42.120

```
function onGridCellEdit(e) {

    this.closeCell();
} 
```

这个函数将在编辑行时被调用，一旦这个函数被命中，这将不允许改变。

# android - 当用户展开或折叠通知栏时，不会调用任何活动生命周期方法

> ID：15893208
> 
> 赞同：3
> 
> 时间：2013-04-09T04:17:01.067
> 
> 标签：android, android-notifications, android-lifecycle

当用户展开或折叠通知栏时，不会调用任何活动生命周期方法。有谁能告诉我，

*   **用户刚刚展开通知栏时**会调用哪个生命周期方法？****

***   我们如何通过程序**检测用户扩展或不扩展的通知栏**？** 

 **提前致谢。**

# javascript - 淡化 div 的背景图像和其中的文本

> ID：15893213
> 
> 赞同：1
> 
> 时间：2013-04-09T04:17:44.483
> 
> 标签：javascript, jquery, css

使用 jQuery，我想在“框”内循环浏览 3 个不同的背景图像和 3 组文本，每 6 秒淡入下一个。

CSS：

```
.box {
background: url(/filepath/to/image.jpg) no-repeat center center;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
} 
```

HTML：

```
<div class="box">
<h1>Headline</h1>
<h2>Sub-text</h2>
</div> 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:24:56.513

最好的*方法*是相当主观的，但是您可以使用`setInterval`并设置 3 种具有不同背景图像和文本的样式规则。您可能需要预加载图像。

```
.boxy {
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center center;
}
.box1 {
    background-image: url(/filepath/to/image1.jpg);
    opacity: .8;
}
/* other boxes omitted for brevity */ 
```

然后你可以做类似的事情：

```
var boxen = [3, 1, 2];
setInterval(function () {
    boxen.push(boxen.shift());
    $(".box").removeClass(boxen.map(function (elem) { return "box" + elem; })
        .addClass("box" + boxen[0]);
}, 6000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:40:12.713

您不能在同一元素的背景图像之间淡入淡出。我的建议是插入三个（或者你想要的任何数量，真的）图像，绝对放置在彼此之上，然后在它们之间淡入淡出。

您也可以对想要淡出的文本元素执行相同的操作，或者您可以构建一系列包含两者任意组合的 div。

实际上，您可以采取几乎无限种方法来实现您所描述的效果，但尝试淡化背景图像并不是其中之一。

```
<div class="box">
    <div class="slide bg1">
        <!-- content -->
    </div>
    <div class="slide bg2">
        <!-- content -->
    </div>
    <div class="slide bg3">
        <!-- content -->
    </div>
</div> <!-- END .box --> 
```

风格...

```
.box {
    position: relative; /* Set to relative to keep the containing .slide divs, ahem, relative */
}
.slide {
    position: absolute;
    top: 0px;
    left: 0px;
}
.bg1 { /* There are more elegant ways of targeting the individual slides, I'm just being lazy... */
    background-image: src('/dir/img.jpg');
}
.bg2{}
.bg3{} /* Etc, etc... */ 
```

子 div 之间的淡入淡出不仅可以让您更改背景图像的外观，还可以更改您可能想要淡入淡出的任何其他内容（或与此相关的任何其他内容）。

至于 javascript，有一千零一个资源完全涵盖了这一点，所以我会顺从他们（谷歌它！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:27:08.287

我认为您应该考虑使用一些 jQuery 滑块插件，例如 Awkward [Showcase](http://showcase.awkwardgroup.com/)或[jQuery 循环](http://jquery.malsup.com/cycle/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T04:22:21.183

使用 jQuery 函数 setInterval() 间隔 6 秒。3个元素之间的淡入淡出效果和迭代很容易实现......

```
var loop = 1;
var id = setInterval(function() {

if(loop === 3)
{
    loop = 1; //reset loop back
   //clearInterval(id); cancel interval
}
alert(" loop: "+loop);
//TODO: fadding + changing text here maybe in separate function...

loop++;

}, 6000); 
```

# html - 我想要一个具有“淡出效果”的背景图像。CSS3

> ID：15893217
> 
> 赞同：3
> 
> 时间：2013-04-09T04:18:26.287
> 
> 标签：html, css, gradient

是否可以从图像中心到图像左侧对图像实现淡出透明效果

我尝试了以下方法，但没有得到任何结果

```
#content {
display: block;
width: 960px;
margin: auto;
margin-top: 48px;
background-image: url(../images/feature-image-wild-horse.jpg),    -moz-linear-gradient(left, #444444, #999999); /* FF3.6+ */
overflow: hidden; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:33:32.170

一种解决方案是使用模糊的插入框[阴影](http://jsfiddle.net/n1ck/NkHdh/4/)（[https://developer.mozilla.org/en/docs/CSS/box-shadow）：http://jsfiddle.net/n1ck/NkHdh/4/](https://developer.mozilla.org/en/docs/CSS/box-shadow)

```
#content {
    width:350px;
    height:350px;
    background-image: url(http://placekitten.com/350/350);
    -moz-box-shadow: inset 70px 0px 50px -10px white;
    -webkit-box-shadow: inset 70px 0px 50px -10px white;
     box-shadow:inset 70px 0px 50px -10px white;
} 
```

* * *

如果要使用渐变，可以使用`:before`获取渐变来叠加背景图片，否则看不到渐变。

这是一个如何实现这一目标的示例：http:
[//jsfiddle.net/n1ck/brqcu/2/](http://jsfiddle.net/n1ck/brqcu/2/)

```
#content {
    width:350px;
    height:350px;
    background-image: url(http://placekitten.com/350/350);
}

#content:before {
    width:350px;
    height:350px;
    content:'';
    display:block;
    background: -moz-linear-gradient(left, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%, rgba(255, 255, 255, 1)), color-stop(100%, rgba(255, 255, 255, 0)));
    background: -webkit-linear-gradient(left, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
    background: -o-linear-gradient(left, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
    background: -ms-linear-gradient(left, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
    background: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#00ffffff', GradientType=1);
} 
```

# python - 我想收集所有以特定文本结尾的角色和事件？

> ID：15893227
> 
> 赞同：0
> 
> 时间：2013-04-09T04:19:44.280
> 
> 标签：python, regex, perl, collections, splunk

我想收集指定文本之前或以它结尾的所有数据，我尝试了以下方法：

```
 .{30}Value_*|.{55}Value2_* 
```

但是您必须在指定的结束文本之前指定要收集多少个字符，我只想收集所有字符（请注意，我在这里处理 Python/Perl 正则表达式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:32:18.930

尝试类似：

```
"(.+?)Value_*|(.+?)Value2_*" 
```

在不确切知道您的数据是什么样子的情况下，我无法获得更具体的信息。将其分解：`.+`匹配一个或多个字符，同时`?`使其不贪婪，因此它不会一次消耗整行，最后括号捕获匹配项（至少在 Python 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:47:37.630

我错过了什么吗？我不清楚尾随`_*`（零个或多个下划线）的意义是什么，但不会

```
^(.*)Value 
```

做你需要的？

# java - Java LISP 实现几乎可以工作

> ID：15893228
> 
> 赞同：0
> 
> 时间：2013-04-09T04:19:49.343
> 
> 标签：java, lisp, stack, s-expression

```
package PJ2;
import java.util.*;

public class SimpleLispExpressionEvaluator
{
    // Current input Lisp expression
    private String inputExpr;

    // Main expression stack & current operation stack, see algorithm in evaluate()
    private Stack<Object> exprStack;
    private Stack<Double> currentOpStack;

    // default constructor
    // set inputExpr to "" 
    // create stack objects
    public SimpleLispExpressionEvaluator()
    {
    // add statements
        inputExpr = "";
        exprStack = new Stack<Object>();
        currentOpStack = new Stack<Double>();
    }

    // default constructor
    // set inputExpr to inputExpression 
    // create stack objects
    public SimpleLispExpressionEvaluator(String inputExpression) 
    {
    // add statements
        if(inputExpression == null)
        {
            throw new SimpleLispExpressionEvaluatorException();
        }

        inputExpr = inputExpression;
        exprStack = new Stack<Object>();
        currentOpStack = new Stack<Double>();

    }

    // set inputExpr to inputExpression 
    // clear stack objects
    public void reset(String inputExpression) 
    {
    // add statements
     if(inputExpression == null)
     {
         throw new SimpleLispExpressionEvaluatorException();
     }

     inputExpr = inputExpression;
     exprStack.clear();
     currentOpStack.clear();
    }

    // This function evaluate current operator with its operands
    // See complete algorithm in evaluate()
    //
    // Main Steps:
    //      Pop operands from exprStack and push them onto 
    //          currentOpStack until you find an operator
    //      Apply the operator to the operands on currentOpStack
    //          Push the result into exprStack
    //
    private void evaluateCurrentOperation()
    {
    // add statements
        String currOp;
        boolean numeric = true;
        do{
            currOp = (String.valueOf(exprStack.pop()));

            try{
                Double number = Double.parseDouble(currOp);
                currentOpStack.push(number);

            }catch(NumberFormatException nfe){
                numeric = false;
            }
        } while(numeric);

        double result;
        switch (currOp) {
            case "*":
                result = currentOpStack.pop();
                while(!currentOpStack.isEmpty()){
                    result *= currentOpStack.pop();
                }
                break;
            case "/":
                result = currentOpStack.pop();
                while(!currentOpStack.isEmpty()){
                    result /= currentOpStack.pop();
                }
                break;
            case "+":
                result = currentOpStack.pop();
                while(!currentOpStack.isEmpty()){
                    result += currentOpStack.pop();
                }
                break;
            case "-":
                result = currentOpStack.pop();
                while(!currentOpStack.isEmpty()){
                    result -= currentOpStack.pop();
                }
                break;

            default:
                result = currentOpStack.pop();
                break;
        }

        exprStack.push(result);

    }

    /**
     * This function evaluates current Lisp expression in inputExpr
     * It return result of the expression 
     *
     * The algorithm:  
     *
     * Step 1   Scan the tokens in the string.
     * Step 2       If you see an operand, push operand object onto the exprStack
     * Step 3           If you see "(", next token should be an operator
     * Step 4       If you see an operator, push operator object onto the exprStack
     * Step 5       If you see ")", do steps 6,7,8 in evaluateCurrentOperation() :
     * Step 6           Pop operands and push them onto currentOpStack 
     *                  until you find an operator
     * Step 7           Apply the operator to the operands on currentOpStack
     * Step 8           Push the result into exprStack
     * Step 9    If you run out of tokens, the value on the top of exprStack is
     *           is the result of the expression.
     */
    public double evaluate()
    {
        // only outline is given...
        // you need to add statements/local variables
        // you may delete or modify any statements in this method

        // use scanner to tokenize inputExpr
        Scanner inputExprScanner = new Scanner(inputExpr);

        // Use zero or more white space as delimiter,
        // which breaks the string into single character tokens
        inputExprScanner = inputExprScanner.useDelimiter("\\s*");

        // Step 1: Scan the tokens in the string.
        while (inputExprScanner.hasNext())
        {

            // Step 2: If you see an operand, push operand object onto the exprStack
            if (inputExprScanner.hasNextInt())
            {
                // This force scanner to grab all of the digits
                // Otherwise, it will just get one char
                String dataString = inputExprScanner.findInLine("\\d+");

        // more ...
                exprStack.push(Double.parseDouble(dataString));
            }
            else
            {
                // Get next token, only one char in string token
                String aToken = inputExprScanner.next();
                char item = aToken.charAt(0);

                switch (item)
                {
                case '(':
                    break;

                case ')':
                    evaluateCurrentOperation();
                    break; 

                case'*':
                    exprStack.push("*");
                    break;

                case'+':
                    exprStack.push("+");
                    break; 

                case'/':
                    exprStack.push("/");
                    break;

                case'-':
                    exprStack.push("-");
                    break;  

                // Step 3: If you see "(", next token shoube an operator
                // Step 4: If you see an operator, push operator object onto the exprStack
                // Step 5: If you see ")"  do steps 6,7,8 in evaluateCurrentOperation() :
                    default:  // error
                        throw new SimpleLispExpressionEvaluatorException(item + " is not a legal expression operator");
                } // end switch
            } // end else
        } // end while

        // Step 9: If you run out of tokens, the value on the top of exprStack is
        //         is the result of the expression.
        //
        //         return result
        return Double.parseDouble(String.valueOf(exprStack.pop()));
    }

    //=====================================================================

    // This static method is used by main() only
    private static void evaluateExprTest(String s, SimpleLispExpressionEvaluator expr)
    {
        Double result;
        System.out.println("Expression " + s);
    expr.reset(s);
        result = expr.evaluate();
        System.out.printf("Result %.2f\n", result);
        System.out.println("-----------------------------");
    }

    // define few test cases, exception may happen 
    public static void main (String args[])
    {
        SimpleLispExpressionEvaluator expr= new SimpleLispExpressionEvaluator();
        String test1 = "(+ (- 6) (* 2 3 4) (/ (+ 3) (* 1) (- 2 3 1)))";
        String test2 = "(+ (- 632) (* 21 3 4) (/ (+ 32) (* 1) (- 21 3 1)))";
        String test3 = "(+ (/ 2) (* 2) (/ (+ 1) (+ 1) (- 2 1 )))";
        String test4 = "(+ (/2))";
        String test5 = "(+ (/2 3 0))";
        String test6 = "(+ (/ 2) (* 2) (/ (+ 1) (+ 3) (- 2 1 ))))";
        String test7 = "( + 100 )";
        String test8 = "( + 100 5 5 5 )";
        String test9 = "(*(/100 5)4      10)";
        String test10 ="( + 100 )";
        String test11 ="( + ( - 6 ) ( * 2 3 4 ) ( / ( + 3 ) ( * 1 ) ( - 2 3 1 ) ) )";
        String test12 ="( + ( - 632 ) ( * 21 3 4 ) ( / ( + 32 ) ( * 1 ) ( - 21 3 1 ) ) )";
        String test13 ="";
        String test14 ="";

    evaluateExprTest(test1, expr);
    evaluateExprTest(test2, expr);
    evaluateExprTest(test3, expr);
    evaluateExprTest(test4, expr);
    evaluateExprTest(test5, expr);
    evaluateExprTest(test6, expr);
    evaluateExprTest(test7, expr);
    evaluateExprTest(test8, expr);
    evaluateExprTest(test9, expr);
    evaluateExprTest(test10, expr);
    evaluateExprTest(test11, expr);
    evaluateExprTest(test12, expr);
    //evaluateExprTest(test13, expr);
    //evaluateExprTest(test14, expr);
    }
} 
```

当我运行它时，仅测试 3、4、5、7、8、9、10 工作正常，基于：http: [//joeganley.com/code/jslisp.html](http://joeganley.com/code/jslisp.html)

```
Expression (+ (- 6) (* 2 3 4) (/ (+ 3) (* 1) (- 2 3 1)))
Result 28.50
-----------------------------
Expression (+ (- 632) (* 21 3 4) (/ (+ 32) (* 1) (- 21 3 1)))
Result 885.88
-----------------------------
Expression (+ (/ 2) (* 2) (/ (+ 1) (+ 1) (- 2 1 )))
Result 5.00
-----------------------------
Expression (+ (/2))
Result 2.00
-----------------------------
Expression (+ (/2 3 0))
Result Infinity
-----------------------------
Expression ( + 100 )
Result 100.00
-----------------------------
Expression ( + 100 5 5 5 )
Result 115.00
-----------------------------
Expression (*(/100 5)4      10)
Result 800.00
-----------------------------
Expression ( + 100 )
Result 100.00
-----------------------------
Expression ( + ( - 6 ) ( * 2 3 4 ) ( / ( + 3 ) ( * 1 ) ( - 2 3 1 ) ) )
Result 28.50
-----------------------------
Expression ( + ( - 632 ) ( * 21 3 4 ) ( / ( + 32 ) ( * 1 ) ( - 21 3 1 ) ) )
Result 885.88
----------------------------- 
```

这些结果仅在我删除测试 6 时出现，因为它给出了异常并停止执行。知道我哪里出错了吗？

如果 6 未注释掉，则会出错：

```
Exception in thread "main" java.util.EmptyStackException
    at java.util.Stack.peek(Unknown Source)
    at java.util.Stack.pop(Unknown Source)
    at PJ2.SimpleLispExpressionEvaluator.evaluateCurrentOperation(SimpleLispExpressionEvaluator.java:143)
    at PJ2.SimpleLispExpressionEvaluator.evaluate(SimpleLispExpressionEvaluator.java:248)
    at PJ2.SimpleLispExpressionEvaluator.evaluateExprTest(SimpleLispExpressionEvaluator.java:292)
    at PJ2.SimpleLispExpressionEvaluator.main(SimpleLispExpressionEvaluator.java:321) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T07:00:02.857

那不是真正的 Lisp。那只是前缀形式的算术表达式。大约是 Lisp 的 0.1%。Lisp 有点多：函数、符号、cons 单元格、列表操作……

您的测试表达式 6 在末尾有一个额外的括号。

通常，您应该开发代码，以便可以轻松检测到语法错误。这意味着错误检测、错误处理和错误报告。一个典型的 Lisp 系统（比如 SBCL、CLISP、...）会以简单的英语向用户报告额外的括号。

# java - Java - 突出显示两个字符之间的文本 - JTextPane

> ID：15893235
> 
> 赞同：0
> 
> 时间：2013-04-09T04:20:25.620
> 
> 标签：java, swing, highlighting, jtextpane

我需要能够突出显示两个字符内的单词。例如， ：

```
//Highlight whatever is in between the two quotation marks
String keyChars = " \" \" "; 
```

我已经为此苦苦挣扎了好几个星期了。我查过它，读过源代码，写过代码，但我还没有弄清楚我是如何做到这一点的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:32:00.517

以下代码片段有效。

```
ed=new JEditorPane();
ed.setText("This \"text\" contains \"quotes\". The \"contents\" of which are highlighted");
Pattern pl;
pl=Pattern.compile("\"");
Matcher matcher = pl.matcher(ed.getText());
int end=0,beg=0;
while(matcher.find())
{
    beg=matcher.start();
    matcher.find(); //finding the next quote
    end=matcher.start();
    DefaultHighlightPainter d =  new DefaultHighlightPainter(Color.YELLOW);
    try {
        ed.getHighlighter().addHighlight(beg+1, end,d);
    } catch (BadLocationException ex) {
        ex.printStackTrace();
    }
} 
```

# python - Python 3.0 使用 turtle.onclick

> ID：15893236
> 
> 赞同：1
> 
> 时间：2013-04-09T04:20:27.357
> 
> 标签：python, onclick, coordinates, turtle-graphics

所以这是我的问题，我必须为我的 CS 课拍一张照片，用海龟进行估计真的很令人沮丧。我打算使用 .onclick() 来显示我的位置。

```
import turtle as t
def getPos(x,y):
    print("(", x, "," ,y,")")
    return

def main():
    t.onclick(getPos)
    t.mainloop()
main() 
```

海龟文档似乎说 onclick 将在一个接受两个变量的函数中传递坐标。

[http://docs.python.org/3.1/library/turtle.html#turtle.onclick](http://docs.python.org/3.1/library/turtle.html#turtle.onclick)

注意：当我点击箭头时它会起作用，但这不是我想要的。我想单击屏幕上的其他位置以找出我应该将箭头发送到的坐标！

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:04:06.327

您需要使用 Screen 类。但是，如果你想远离 OOP，你可以使用内置的方法`turtle.onscreenclick(func)`。

代替

```
def main():
    t.onclick(getPos)
    t.mainloop()
main() 
```

和

```
def main():
    t.onscreenclick(getPos)
    t.mainloop()
main() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:32:00.970

自己找到解决方案真是太棒了。

你有没有浏览过文档`turtle`？

[http://docs.python.org/2/library/turtle.html](http://docs.python.org/2/library/turtle.html)

看起来您可以导入`screen`以及`turtle`从模块导入。 `screen`有`onclick`自己的事件，可以按照您的期望进行。

请注意以下有关如何访问`screen`对象的行：

```
The function Screen() returns a singleton object of a TurtleScreen subclass.
This function should be used when turtle is used as a standalone tool for
doing graphics. As a singleton object, inheriting from its class is not
possible. 
```

免责声明：我以前从未使用过乌龟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:27:45.060

好吧，我想出了一个解决办法。它不是一个完美的解决方案，但效果很好。因为只有当你点击箭头时 onclick 才会响应，所以我让箭头包含了整个屏幕。然后我把它藏了起来。你需要做的是将鼠标悬停在你想去的位置上，按“a”，当它变黑时点击屏幕。然后外壳将显示您需要的坐标。确保你总是回到 (1000,0)。

```
import turtle as t

def showTurtle():
    t.st()
    return

def getPos(x,y):
    print("(", x, "," ,y,")")
    return

def hideTurtle(x,y):
    t.ht()
    return

def main():
    t.speed(20)
    t.shapesize(1000,1000)
    t.up()
    t.goto(1000,0)
    t.ht()
    t.onkey(showTurtle,"a")
    t.listen()
    t.onclick(getPos)
    t.onrelease(hideTurtle)
    t.mainloop()
main() 
```

此外，如果我班上的任何人发现这个，我是宾厄姆顿的一名 CS 学生，如果你使用这个，我建议不要留下任何痕迹。教授已经看到了这一点，并且会认出它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T07:32:27.490

您必须首先获取海龟正在绘制的屏幕对象，然后调用屏幕对象的 onclick()。这是一个例子：

```
import turtle as t

def getPos(x,y):
    print("(", x, "," ,y,")")
    return

def main():
    s = t.getscreen()
    s.onclick(getPos)
    t.mainloop()

main() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-10T11:40:29.420

Python 3.7 版本。

```
import turtle as t

def click(x,y):
  print('Clicked:', x, y)

def main():
  s = t.Screen()
  s.onclick(click)

  s.mainloop()

main() 
```

请注意，打印是在控制台上进行的，而不是在 Turtle 上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-07T08:16:30.320

我有一个小的儿童编码器，但我学到了很多东西。

我喜欢只为有人说你创造了好东西而编写代码，但我也喜欢分享我学到的东西。

你来这里是为了代码**onclick 代码**在**这里**：

您需要执行以下操作：

```
# import package 
import turtle 

# screen object 
wn = turtle.Screen() 

# method to perform action 
def fxn(x, y): 
  turtle.goto(x, y) 
  turtle.write(str(x)+","+str(y)) 

# onclick action  
wn.onclick(fxn) 
wn.mainloop()` 
```

现在，只需点击屏幕，看看魔术

# javascript - Canvas Kineticjs - 鼠标位置错误

> ID：15893238
> 
> 赞同：0
> 
> 时间：2013-04-09T04:20:28.560
> 
> 标签：javascript, canvas, html5-canvas, kineticjs

我首先有文本行，然后我有画布
但是将鼠标放在画布上它是错误的（现在 y 位置的零 = 文本行的高度）
**[http://jsfiddle.net/dSC26/](http://jsfiddle.net/dSC26/)**

```
<div id="output">output</div>
<div id="container"></div>

yoda.on('mousemove', function(e) {
    $('#output').html('position mouse on canvas: '+'x: ' + e.clientX + ', y: ' + e.clientY); 
}); 
```

我该如何解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:43:47.057

您可以使用`event.offsetX/Y`or`event.layerX/Y`属性。

看看这里-> [http://jsfiddle.net/dSC26/2/](http://jsfiddle.net/dSC26/2/)

```
yoda.on('mousemove', function(e) {
    var offsetX = e.offsetX || e.layerX,
        offsetY = e.offsetY || e.layerY;

    $('#output').html('position mouse on canvas: '+'x: ' + offsetX + ', y: ' +  offsetY); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T05:04:08.137

只需使用 stage.getMousePosition()。这里的例子：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/)

您还可以为触摸事件起诉 stage.getTouchPosition()，或为鼠标或触摸事件起诉 stage.getPointerPosition()

# javascript - 如何通过 Ajax 将返回的字符串从 php 文件存储到 Javascript 变量

> ID：15893242
> 
> 赞同：0
> 
> 时间：2013-04-09T04:21:10.790
> 
> 标签：javascript, html, jquery

我想从 Ajax 调用一个 php 函数并将内容返回到网页。

假设我有一个名为 latest.php 的文件，它返回一些非常简单的 html。

```
$result = "<div> text </div>";
echo $result; 
```

如何编写调用此 php 文件、返回 html 并将其存储在 javascript 变量中的 Ajax 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:25:17.053

简单的方法是使用 jQuery.load() 或 jQuery.ajax()

或者，使用 XMLHttpRequest 的老式方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:29:43.773

Javascript变量：

```
var myVar;
$.get("latest.php", function(data) {
    myVar = data;
}); 
```

插入文档：

```
$.get("latest.php", function(data) {
    $("#myElement").html(data);
}); 
```

或者

```
$("#myElement").load("latest.php"); 
```

# process - 如何将正在运行的 Java 程序从一台机器迁移到另一台机器？

> ID：15893247
> 
> 赞同：0
> 
> 时间：2013-04-09T04:22:04.887
> 
> 标签：process, jvm, runtime, java

假设我在机器 A 上运行了一个 Java 程序，现在我想中断它，保存它的上下文并在机器 B 上恢复它的执行。可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:37:05.997

不，没有什么好的方法可以“冻结”一个进程并在另一台机器上“恢复”它，该进程可能会持有你无法移动的各种状态（打开的文件/套接字等）。

如果它是一个应用程序，您正在编写它以使其可集群化，然后在目标机器上启动另一个节点，等待这两个节点同步并关闭您的原始节点。

如果它不是您正在编写的应用程序或以上内容太多，请在 VM 中运行您的应用程序，并使用 VM 的功能迁移整个 VM 以及其中正在运行的应用程序（因此，只需使用 vmotion）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:40:44.670

您可能会尝试这样的事情 - 您中断程序的点，只需序列化其所有属性/对象并设置一个标志以指示它可以重新开始执行的点。现在将序列化的东西复制到另一台机器并启动程序。您的代码应该能够处理正确存储（序列化）程序状态的条件，并在另一台机器上启动该类时从该点继续。

# go - 使用 []string 字段时出现无法比较的类型错误（Go lang）

> ID：15893250
> 
> 赞同：14
> 
> 时间：2013-04-09T04:22:25.310
> 
> 标签：go

我有一个特定的 Go lang 结构对象，我正在与之交互，我希望它与自身相同。我将函数传递给一个简单地返回它的函数，但它通过接受 interface{} 输入/输出来实现

```
type Animal struct {
    name string
    food interface{}
}

type YummyFood {
    calories int
}

func echo_back(input interface{}) interface{} {
    return input
}

func main() {
    var tiger_food = Food{calories: 1000}
    var tiger = Animal{name: "Larry", food: tiger_food}
    output_tiger := echo_back(tiger)

    fmt.Printf("%T, %+v\n", tiger, tiger)
    fmt.Printf("%T, %+v\n", output_tiger, output_tiger)
    fmt.Println(tiger == output_tiger)
    fmt.Println(tiger == output_tiger.(Animal))

} 
```

运行此程序，您会看到tiger 和 output_tiger 看起来相同并且评估结果相等。伟大的。这就是我所期望的。现在，尝试将此定义用于 YummyFood

```
type YummyFood {
    calories int
    ingredients []string
} 
```

突然之间，echo_back 的输出不会与输入相同，即使使用类型断言也是如此。我得到“恐慌：运行时错误：比较无法比较的类型 YummyFood”

问题是为什么添加[]string类型会导致输入和输出无法比？如何修改 output_tiger 以取回我放入的相同内容（即我希望它与“tiger”相同）。如何反映 output_tiger 以使其等于老虎？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T04:55:49.353

它不会很快，但您可以使用[reflect.DeepEqual()](http://golang.org/pkg/reflect/#DeepEqual)来比较切片（或只是 YummyFood）。它会循环遍历它以比较所有元素。您可能可以创建一个更有效的功能来执行此操作，但如果那里的功能足够快，您将为自己节省一些工作，也许还有一些错误。:-)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T04:26:32.903

Slices ( `[]string`) 没有定义相等性。包含定义了相等的成员的数组和结构将定义相等。

> 请注意，对于切片而言，相等性仍未定义，因此计算通常是不可行的。另请注意，对于结构和数组，有序比较运算符 (< <= > >=) 仍未定义。

来自[http://golang.org/doc/go1.html#equality](http://golang.org/doc/go1.html#equality)

# javascript - 带有序数刻度 yscale 的水平图表，但不是纯平面名称 > 树结构<

> ID：15893253
> 
> 赞同：0
> 
> 时间：2013-04-09T04:22:38.027
> 
> 标签：javascript, svg, d3.js

我正在进行一个项目。该项目包括使用 javascript 和令人惊叹的 d3.js 设计营销仪表板。我需要一个带有序数比例的水平图表，但我有一个树结构而不是纯平面名称。因此，我为垂直标签设计了一棵树，而不是文本...要求：当最终用户单击一个节点时，所有对应的条都折叠到一个条（当然，该条的值是子条。）为了成为直方图，所有条必须从相同的 x 开始。此外，在垂直方向上，从条到条的距离应该相同。

下面的“玩具”程序显示了上面的垂直标签 out 。不幸的是，为了实现理想的布局，我添加了“虚拟节点”。这不是一个解决方案，因为我不知道如何制作“节点折叠功能”。感谢您的时间。

```
 <!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<script type="text/javascript" src="d3/d3.v3.js"></script>
<style>
 .node {
        font: 11px sans-serif; 
       }

 .link {
        fill: none;
       stroke: #ccc;
  stroke-width: 1px;
       }
 </style>
 </head>
 <body>

<div id="viz"></div>

 <script type="text/javascript">

  var treeData = { "name" : " ", "c":[150, 5, 4,0] , "children" :  [
                 { "name" : "Super Specials", "c":[150, 5, 4,10], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }      ]                     }]}
                ,{ "name" : "Package Deals", "c":[50, 15, 4,20], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Audio & Home Theatre", "c":[120, 15, 4,10] , "children" :  [
                   { "name" : "Speaker Packs", "c":[45, 15, 5,23], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }  
                   ,{ "name" : "Portable Radios", "c":[40, 15, 7,26], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                       ,{ "name" : "Amplifiers", "c":[51, 15, 4,26], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                   ,{ "name" : "Accessories", "c":[53, 15, 9,24], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                       ,{ "name" : "Home Theatre Systems", "c":[54, 15, 3,26], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                       ,{ "name" : "Hi-Fi Systems", "c":[56, 15, 4,27], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                        ]}
                    ,{ "name" : "Televisions & Videos", "c":[130, 55, 8,10] , "children" :  [
                   { "name" : "Televisions", "c":[51, 15, 4,26], "children" :  [
                       { "name" : "LED", "c":[45, 15, 5,23]}
                           ,{ "name" : "Plasma", "c":[40, 15, 7,26]}
                           ,{ "name" : "LCD", "c":[51, 15, 4,26]}

                       ]}
                       ,{ "name" : "Players & Recorders", "c":[45, 15, 5,23] , "children" :  [
                           { "name" : "Dvd Players & Recorders", "c":[45, 15, 5,23]}
                           ,{ "name" : "Blu-Ray Players and Recorders", "c":[40, 15, 7,26]}                
                           ]}
                       ,{ "name" : "Set Top Boxes & PVR", "c":[40, 15, 7,26], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                       ,{ "name" : "Accessories", "c":[53, 15, 9,24], "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }

                    ]}
                    ,{ "name" : "Computers & Technology", "c":[140, 66, 4,4], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Whitegoods", "c":[120, 35, 4,7], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Furniture", "c":[50, 25, 12,9], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Cooking", "c":[80, 25, 4,4], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Heating & Cooling", "c":[87, 43, 2,22], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Floor Care", "c":[78, 15, 4,12], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Small Appliances", "c":[78, 17, 14,3], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Personal Grooming", "c":[45, 9, 4,5], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "DIY Security", "c":[47, 5, 9,0], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                    ,{ "name" : "Gadgets", "c":[23, 57, 4,0], "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
            ]};

  //
         var vis = d3.select("#viz").append("svg:svg")
        .attr("width", 800)
        .attr("height", 800)
        .append("svg:g")
        .attr("transform", "translate(100, 0)");

      var labelx=770;
      var labely=650;
     var tree = d3.layout.tree()
           .size([labelx,labely]) .separation(function(a, b) { return 1  });

     //http://mbostock.github.io/d3/talk/20111018/tree.html

     var nodes = tree.nodes(treeData);

     var diagonal = d3.svg.diagonal()
        .projection(function(d) { 

                var retx,rety;

                retx=d.y;
                rety=d.x;
                if(d.children==null)
                {
                    //retx=labely;
                }
                   return [retx, rety]; 
             }
             );

      var link = vis.selectAll("pathlink")
        .data(tree.links(nodes))
        .enter().append("svg:path")
       .style("opacity",  function(d) { 
                    var ret=1;
                    if(d.source.depth==0)
                    {
                        ret=0;
                    }
                return ret;
           })
        .attr("class", "link")
        .attr("d", diagonal);

       var node = vis.selectAll(".node")
        .data(nodes)
        .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })

     var rec = vis.selectAll("g.node")   
        .data(nodes)
        .enter()
        .append("svg:g")

       node.append("svg:circle")
        .attr("r",  function(d) { 
            var ret=4.5;
            if(d.name===" ")
            {
                ret=0.01;
            }
            return ret;
            });

       var txtw=node.append("g")
        .attr("transform", function(d) { return "translate(-8,0)"; });

       var text=txtw.append("svg:text")
        .attr("dx", function(d) {
            var ret=0;
            if(d.children === undefined)
            {
                ret=16;
            } 
            return  ret;})
        .attr("dy", 3)
        //.attr("text-anchor", "end")
        .attr("text-anchor", function(d) { return d.children ? "end" : "end"; })
        .text(function(d) { return d.name; });

        var maxwith=0
        text.each(function() {
            var tmp=this.getBBox().width;
            if(maxwith<tmp)
            {
                maxwith=tmp;
            }
               });
              console.log("maxwith=",maxwith);

      </script>
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:16:39.867

最后我已经解决了。如果有人需要它，只需查看代码。在绿色圆圈的位置，我将放置直方图条。

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <script type="text/javascript" src="d3/d3.v3.js"></script>

<style>

.node circle {

  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node text {
  font-size: 11px;
}

path.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 3px;
}

 .text_small { font-family: sans-serif;  font-size: 11px; }
 .text_big { font-family: sans-serif;  font-size: 16px; }

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1px;
}
/*
 *  to be remnoved after merge with test19.html
 */
/*
 * style for the close,minimize buttoms  start
 */
        .icon {   color:white;  
                  stroke-width:2;
                  fill:white;
                  stroke:gray; }

        .icon_disable{color:white;  
                  stroke-width:2;
                  fill:white;
                  stroke:LightGray ; }
    /*
     *        .buttomcreate{transform: scale(0.1, 0.1);
     */
       .buttomcreate{transform: scale(1, 1);
                    position: relative;}

       .buttomdel {transform: scale(0.0, 0.0);
                  transition:  0.5s;
                  position: absolute;}

        .buttoms {position: absolute;
                      top: 0px;
                     left: 0px;}
/*
 * style for the close,minimize buttoms  end
 * 
 *       display: table-cell;   
 */

   #zoom{
/*
    position:fixed;
*/
         }

   #master{position:static

   }

    .hist_test{
         transform: scale(1, 1);
         transition:  0.5s;
         position: relative;
         background-color:grey;   

    }
    .tooltip{           color:black;  
             background-color:white;
                   box-shadow: 10px 10px 5px; 
                       padding-top:7px;
                       padding-bottom:7px;
                       padding-right:10px;padding-left:10px;
                       border:1px solid;
                       border-radius:9px;
                       opacity:0.95;
                       }

     .menu{            color:black;  
             background-color:white;
                   box-shadow: 10px 10px 5px; 
                       padding-top:4px;
                       padding-bottom:4px;
                       border:1px solid;

                       }
      .menu2{            color:black;  
             background-color:white;
                       padding-top:2px;
                       padding-bottom:2px;
                       padding-right:10px;padding-left:10px;
                  }
      .menu2up{         color:white;  
             background-color:orange;
                padding-right:0px;padding-left:0px;
                      padding-top:2px;
                       padding-bottom:2px;
                       padding-right:10px;padding-left:10px;
                  }

        .selec{
                      opacity:0.5;             
               }

        .icon {   color:white;  
                  stroke-width:2;
                  fill:white;
                  stroke:black;                              
               }

    .axis path,
    .axis line { fill: none; stroke: black;  shape-rendering: crispEdges; stroke-width:1;}
    .axis text { font-family: sans-serif;  font-size: 16px; }

    .axis_names path,
    .axis_names line { fill: none; stroke: black;  shape-rendering: crispEdges; stroke-width:1;}
    .axis_names text { font-family: sans-serif;  font-size: 11px; }
    .axis_name_text_small { font-family: sans-serif;  font-size: 11px; }

    .axis_nameb path,
    .axis_nameb line { fill: none; stroke: black;  shape-rendering: crispEdges; stroke-width:1;}
    .axis_nameb text { font-family: sans-serif;  font-size: 16px; }
    .axis_name_text_big { font-family: sans-serif;  font-size: 16px; }

    .axis_max path,
    .axis_max line { fill: none; stroke: black;  shape-rendering: crispEdges; stroke-width:1;}
    .axis_max text { font-family: sans-serif;  font-size: 25.9px; }

    .hist_title {fill: black; font-family: sans-serif;  font-size: 20px}
    .hist_xaxis {fill: black; font-family: sans-serif;  font-size: 16px}
    .hist_yaxis {fill: black; font-family: sans-serif;  font-size: 16px}
    .hist_green{fill:green}
    .hist_red{fill:red}
    .hist_yellow{fill:yellow}
    .hist_blue{fill:blue}
    .hist_tran{opacity:0.5}

    .options{        
                   box-shadow: inset -5px -5px 5px #888;

                   padding-bottom:7px;
                   padding-right:10px;}

            .iconb {   float:right;
                   }

</style>

  </head>
  <body>

    <div id="viz"></div>

    <script type="text/javascript">

//  bug There is  a bug in the getBBox  width. "Blu-Ray Players and Recorders" returns a letter smaller width for 11px san-serif

 // to be remnoved after merge with test19.html
 var hist_div = d3.select("body").append("div").attr("id","master") ;
 var small=0;

 //   

 var datasetpp = { "name" : " ", "c":[150, 5, 4,0] , "children" :  [
                 { "name" : "Super Specials", "c":[150, 5, 4,10]}
                 //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Package Deals", "c":[50, 15, 4,20]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Audio & Home Theatre", "c":[120, 15, 4,10] , "children" :  [
                   { "name" : "Speaker Packs", "c":[45, 15, 5,23]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                   ,{ "name" : "Portable Radios", "c":[40, 15, 7,26]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                   ,{ "name" : "Amplifiers", "c":[51, 15, 4,26]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                   ,{ "name" : "Accessories", "c":[53, 15, 9,24]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                   ,{ "name" : "Home Theatre Systems", "c":[54, 15, 3,26]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                   ,{ "name" : "Hi-Fi Systems", "c":[56, 15, 4,27]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                    ]}
                ,{ "name" : "Televisions & Videos", "c":[130, 55, 8,10] , "children" :  [
                   { "name" : "Televisions", "c":[51, 15, 4,26], "children" :  [
                       { "name" : "Plasma", "c":[45, 15, 5,23] }
                       ,{ "name" : "LED", "c":[40, 15, 7,26]}
                       ,{ "name" : "LCD", "c":[51, 15, 4,26]}

                       ]}
                   ,{ "name" : "Players & Recorders", "c":[45, 15, 5,23] , "children" :  [
                       { "name" : "Dvd Players & Recorders", "c":[45, 15, 5,23]}
                       ,{ "name" : "Blu-Ray Players and Recorders", "c":[40, 15, 7,26]}                
                       ]}
                   ,{ "name" : "Set Top Boxes & PVR", "c":[40, 15, 7,26]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }
                   ,{ "name" : "Accessories", "c":[53, 15, 9,24]}
                   //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]           }

                    ]}
                ,{ "name" : "Computers & Technology", "c":[140, 66, 4,4]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Whitegoods", "c":[120, 35, 4,7]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Furniture", "c":[50, 25, 12,9]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Cooking", "c":[80, 25, 4,4]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Heating & Cooling", "c":[87, 43, 2,22]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Floor Care", "c":[78, 15, 4,12]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Small Appliances", "c":[78, 17, 14,3]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Personal Grooming", "c":[45, 9, 4,5]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "DIY Security", "c":[47, 5, 9,0]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
                ,{ "name" : "Gadgets", "c":[23, 57, 4,0]}
                //, "children" : [ {"name" : " ", "c":[150, 5, 4,0]  , "children" : [ {"name" : " ", "c":[150, 5, 4,0]                       }]                     }]}
            ]};

    //global
var tick_witdh=40;  
var text_move=10;
var m = [20, 120, 20, 120],
    w = 1280 - m[1] - m[3],
    h = 800 - m[0] - m[2],
    i = 0;

   var w_start=0; 

  datasetpp.x0 = h / 2;
  datasetpp.y0 = 0;

  //var sizeww=datasetpp.length;

      var vis = d3.select("#viz").append("svg:svg")
        .attr("width", 900)
        .attr("height", 1200)
        //.append("svg:g");
        //.attr("transform", "translate(100, 0)");

      var labelx=1;
      var labely=1;
      var tree = d3.layout.tree()
        .size([labelx,labely]) ;
    //  .separation(function(a, b) { return 1  });
        /*
      var labelx=870;
      var labely=850;
      var tree = d3.layout.tree()
        .size([labelx,labely]) ;
*/

     //http://mbostock.github.io/d3/talk/20111018/tree.html

      var nodes = tree.nodes(datasetpp);

      var maxdepth=0;    

      var diagonal = d3.svg.diagonal()
        .projection(function(d) { 
                return [d.y, d.x]; 
             });

            //       console.log("diagonal=",diagonal);

   //=======================
    function toggleAll(d) 
    {
        if (d.children && d.depth>0) 
        {
            d.children.forEach(toggleAll);
            toggle(d);
        }

    }
   // Toggle children.
    function toggle(d) 
    {
        if (d.children) 
        {
            d._children = d.children;
            d.children = null;
        } 
        else 
        {
            d.children = d._children;
            d._children = null;
        }
    }         
    //==================
    function number_of_leaf(nodes)
    {
        var ret=0;
        //
        // for debug
        //

        if(nodes.children!= null) 
        {
            nodes.children.forEach(function(d)
                         {
                                 ret=number_of_leaf(d)+ret;
                           })
        }
        else
        {
            ret=1;
        }

        return ret;
    }
     /*
          var maxdepth=0;    
         nodes.forEach(function(d)
                               {
                                 if(d.depth>maxdepth)    
                                 {
                                    maxdepth=d.depth;
                                 }      
                               })
    */

   //--------------------------------------------------------------
   function update(source) 
   {
        //var duration = d3.event && d3.event.altKey ? 5000 : 500;
        var duration = 1000; 
        var i_step=0;
        var step_width=labely/number_of_leaf(datasetpp);

  // Compute the new tree layout.
        var nodes = tree.nodes(datasetpp).reverse();
         maxdepth=0;    
         nodes.forEach(function(d)
                               {
                                 if(d.depth>maxdepth)    
                                 {
                                    maxdepth=d.depth;
                                 }      
                               })
   //====================================================================
   //
   //
   //
   //=====================================================================
       var i_depth;
       var catigories_max_label_width=new Array(maxdepth+1);
       var catigories_max_label_height=0;
       var current_label_width;
       var current_label_height;
       var max_label_height=0;
       for(i_depth=0;i_depth<maxdepth+1;i_depth++)
       {
         catigories_max_label_width[i_depth]=0;  //catigories[i_depth,i_cat]  
       }
       var w=window.innerWidth;
       var h=window.innerHeight;
       var svg_test=hist_div.append("svg").attr("width",  w).attr("height", h);

       nodes.forEach(function(d)
            {
                   var i_depth=d.depth;
                   var text_test;

                   if(small===0)
                   {
                        text_test = svg_test.append('text').attr('class', 'text_small')
                                .text(d.name)
                   }                
                   else
                   {
                       text_test = svg_test.append('text').attr('class', 'text_big')
                                .text(d.name)
                    }

                   //catigories_max_label_width[i_depth,i_cat]  
                   text_test.each(function() {
                        var tmpbox=this.getBBox();
                        current_label_width=tmpbox.width;
                        if(current_label_width>catigories_max_label_width[i_depth])
                        {
                            catigories_max_label_width[i_depth]=current_label_width;
                        }
                     //
                        current_label_height=tmpbox.height;
                        if(current_label_height>catigories_max_label_height)
                        {
                            catigories_max_label_height=current_label_height;
                        }                     
                  });
            });
         catigories_max_label_height=catigories_max_label_height*1.6;
         w_start=0; 
         for(i_depth=0;i_depth<maxdepth+1;i_depth++)
         {
            w_start=w_start+catigories_max_label_width[i_depth]+text_move;  //catigories[i_depth,i_cat]  
         }
         w_start=tick_witdh+w_start;
         svg_test.remove();
   //====================================================================
   //
   //
   //
   //=====================================================================

  // Normalize for fixed-depth.
        nodes.forEach(function(d) { 
            //
            var numf=number_of_leaf(d);
            if(numf===1)
            {
                i_step++;
                d.x=i_step*catigories_max_label_height;
            }
            else
            {
                d.x=i_step*catigories_max_label_height-(numf-1)*catigories_max_label_height/2;
            }

            var rt=d.name;
    //  d.y = (d.depth)* 180; 
        //  d.y =catigories_max_label_width[d.depth];
            var i_depth;
            var sum=0;
            for(i_depth=0;i_depth<d.depth+1;i_depth++)
            {
                    sum=catigories_max_label_width[i_depth]+sum+text_move;
            }
            d.y =sum;

            //
         });

  // Update the nodes…
  var node = vis.selectAll("g.node")
      .data(nodes, function(d) { return d.id || (d.id = ++i); });

 var node_hist = vis.selectAll(".hist")
      .data(nodes, function(d) { return d.id || (d.id = ++i); });

  // Enter any new nodes at the parent's previous position.
  var nodeEnter = node.enter().append("svg:g")
      .attr("class", "node")
      .attr("transform", function(d) { 
        var ret="translate(" + source.y0 + "," + source.x0 + ")"; 
        return ret;
        })
      .on("click", function(d) { 
        toggle(d);
         update(d);
          });

    var nodeEnter_hist = node_hist.enter().append("circle") 
      .attr("class", function(d,i) { 
                    var ret="hist";
                    if(d.children!= null)
                    {
                        ret="temporary";
                    }                   
                    return ret;
            }) 
       .attr("r", 5) /* function(d,i) { 
                    var ret=5;
                    if(d.children!= null)
                    {
                        ret=1e-6;
                    }                   
                    return ret;
            }) */
      .attr("cx",function(d) { 
                    return source.y0;//w_start;
                  })
      .attr("cy", function(d) { 
                    return  source.x0;
            })
       .attr("fill","green")

    vis.selectAll(".temporary").remove();

    nodeEnter_hist.transition()
      .duration(duration)
      .attr("cx",function(d) { 
                    return w_start;
                  })
      .attr("cy", function(d) { 
                    return  d.x;
            })

  nodeEnter.append("svg:circle")
      .attr("r", 1e-6)
      .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; })
      .style("cursor", function(d) {
                var ret="default";
                if(d.children != null )                 
                {
                    ret="pointer";
                }
            return ret;
         });

  if(small===0)
    {
  nodeEnter.append("svg:text")
      .attr("x", function(d) { 
        return -text_move;
      //    return d.children || d._children ? -10 : 10; 
        })
      .attr("dy", ".35em")
      .attr("text-anchor", function(d) { 
         return "end";
        //return d.children || d._children ? "end" : "start"; 
        })
      .text(function(d) { return d.name; })
       .style("font-size", "11px")
      .style("fill-opacity", 1e-6);
     }
     else
     {
          nodeEnter.append("svg:text")
      .attr("x", function(d) { 
        return -text_move;
      //    return d.children || d._children ? -10 : 10; 
        })
      .attr("dy", ".35em")
      .attr("text-anchor", function(d) { 
         return "end";
        //return d.children || d._children ? "end" : "start"; 
        })
      .text(function(d) { return d.name; })
       .style("font-size", "16px")
      .style("fill-opacity", 1e-6);
     }

  /*
   if(small===0)
    {
        nodeEnter.attr("font-family", "sans-serif")
              .attr("font-size", "11px")
              .attr("fill","black")
    }               
    else
    {
        nodeEnter.attr("font-family", "sans-serif")
              .attr("font-size", "19px")
              .attr("fill","black")
    }
*/

  // Transition nodes to their new position.
  var nodeUpdate = node.transition()
      .duration(duration)
      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

  var nodeUpdate_hist = node_hist
            .attr("class", function(d,i) { 
                    var ret="hist";
                    if(d.children!= null)
                    {
                        ret="temporary";
                    }                   
                    return ret;
            }) 
      .transition()
      .duration(duration)
      .attr("cx",function(d) { 
                    return w_start;
                  })
      .attr("cy", function(d) { 
                    return  d.x;
            })

         vis.selectAll(".temporary").transition()
      .duration(duration)
      .attr("cx",function(d) { 
                    return source.y;//w_start;
                  })
      .attr("cy", function(d) { 
                    return  source.x;
            })
      .remove();

  nodeUpdate.select("circle")
      .attr("r", 
        function(d) { 
                    var ret=4.5;
                    if(d.depth==0)
                    {
                        ret=1e-6;
                    }
                    return ret;
            })

      .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeUpdate.select("text")
      .style("fill-opacity", 1);

  // Transition exiting nodes to the parent's new position.
  var nodeExit = node.exit().transition()
      .duration(duration)
      .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
      .remove();

var node_histExit=node_hist.exit().transition()
      .duration(duration)
      .attr("cx",function(d) { 
                    return source.y;//w_start;
                  })
      .attr("cy", function(d) { 
                    return  source.x;
            })
      .remove();

  nodeExit.select("circle")
      .attr("r", 1e-6);

  nodeExit.select("text")
      .style("fill-opacity", 1e-6);

  // Update the links…
  var link = vis.selectAll("path.link")
      .data(tree.links(nodes), function(d) { return d.target.id; });

  // Enter any new links at the parent's previous position.
  link.enter().insert("svg:path", "g")
      .attr("class", "link")
           .style("opacity",  function(d) { 
                    var ret=1;
                    if(d.source.depth==0)
                    {
                        ret=0;
                    }
                    return ret;
            })
      .attr("d", function(d) {
        var o = {x: source.x0, y: source.y0};
       return diagonal({source: o, target: o});
      })
    .transition()
      .duration(duration)
      .attr("d", diagonal);

//
//
//-----------------------------------------------------------------------------
/*
      var datasetq3 = [ 500];
  vis.selectAll("tt").data(datasetq3).enter().append("circle") 
      .attr("r",20)
      .attr("cx",150)
      .attr("cy",150);
*/

  // Transition links to their new position.
  link.transition()
      .duration(duration)
      .attr("d", diagonal);

  // Transition exiting nodes to the parent's new position.
  link.exit().transition()
      .duration(duration)
      .attr("d", function(d) {
        var o = {x: source.x, y: source.y};
        return diagonal({source: o, target: o});
      })
      .remove();

  // Stash the old positions for transition.
  nodes.forEach(function(d) {
    d.x0 = d.x;
    d.y0 = d.y;
  });
}    

  //   datasetpp.children.forEach(toggleAll);

 //     toggle(datasetpp.children[2]);

  //    toggle(datasetpp.children[1].children[2]);

      update(datasetpp);     
      var ret=number_of_leaf(datasetpp);
    </script>
  </body>
</html> 
```

# google-chrome - 谷歌浏览器开发者工具搞砸了

> ID：15893254
> 
> 赞同：3
> 
> 时间：2013-04-09T04:22:49.643
> 
> 标签：google-chrome, google-chrome-devtools, web-developer-toolbar

我在使用 google chrome 开发人员工具时遇到问题，它们已经无法使用，我认为我没有做任何事情来导致这种情况。有什么想法可以解决吗？

Ubuntu 12.10 上的谷歌浏览器 26.0.1410.43

我怀疑这是问这个问题的最合适的地方，但我不知道我还能在哪里？

![搞砸了 - Google Chrome 开发者工具](https://i.stack.imgur.com/S63LK.png)

安装的扩展：

*   Adblock Plus 1.4
*   任何.DO 1.0.2.5
*   apt-linker 1.2.2
*   BetterChrome - 浏览速度提高 15% 1.0.8
*   Chromify-OSD 2.3.0
*   迪朗道 1.1.2
*   编辑此 Cookie 1.2.1
*   FB 看不见 0.1.4
*   FVD 视频下载器 5.0.3
*   谷歌词典（由谷歌）3.0.17
*   谷歌文档 0.5
*   谷歌快速滚动 2
*   隐形手 3.8.31
*   JSONView 0.0.32
*   MightyText - 发送/接收 SMS 文本消息 9.4
*   Novell 月光 3.99.0.3
*   Outlook.com 通知程序 0.1
*   钟摆 1.0.0
*   邮递员 - REST 客户端 0.8.0.4
*   报告 1.4.1
*   按图片搜索（通过谷歌）1.4.2
*   直接搜索 1.17.8
*   篡改猴 2.12.3124.133
*   Wappalyzer 2.20
*   网页和摄像头截图 7.3.2
*   XML 树 1.9.2.1

# linux - 如何在 BASH 中按创建日期对目录进行排序？

> ID：15893258
> 
> 赞同：3
> 
> 时间：2013-04-09T04:23:14.200
> 
> 标签：linux, bash, unix-timestamp, samba, ext4

我正在尝试创建一个简单的脚本来列出在我的 nas 机器上的一个目录中创建的 16 个最新文件夹，以此来显示添加到我的收藏中的最新电影。

我现在使用的脚本是：

```
#!/bin/bash
rm -f /volume1/new-movies/*
IFS=$'\x0A'
fresh=$(ls -1ct /volume1/movies | head -16)
for folder in $fresh
do
    file=$(find "/volume1/movies/$folder" -maxdepth 1 -type f)
    movie=$(basename "$file")
    ln -s "$file" "/volume1/new-movies/$movie"
done
ls -1 /volume1/new-movies 
```

没关系（电影文件夹将只包含文件夹）。我的问题是这是按文件/文件夹修改时间而不是创建时间排序的。

文件系统是`ext4`并且应该支持 a`birth time`但我没有运气访问它。

```
scott@pandora scripts $ stat  /volume1/movies/example/
  File: '/volume1/movies/example/'
  Size: 4096            Blocks: 8          IO Block: 4096   directory
Device: 902h/2306d      Inode: 373800961   Links: 2
Access: (0755/drwxr-xr-x)  Uid: ( 1028/   scott)   Gid: (  100/   users)
Access: 2013-04-09 13:39:53.243991684 +1000
Modify: 2013-04-06 13:26:00.965998952 +1100
Change: 2013-04-09 11:46:23.280991727 +1000
 Birth: - 
```

但是，samba 显示正确的创建日期/时间似乎没有问题。有没有办法从 bash 访问相同的信息？还是我必须通过直接访问 smb 并列出每个文件夹的创建日期来在 python/other 中编写一些程序来做我需要的事情？

```
scott@pandora scripts $ smbclient \\\\localhost\\movies\\
Enter scott's password:
Domain=[EXAMPLENET] OS=[Unix] Server=[Samba 3.6.9]
smb: \> allinfo "example"
altname: E06KNE~A
create_time:    Fri Jun 18 17:23:49 2010 EST
access_time:    Tue Apr  9 13:39:53 2013 EST
write_time:     Sat Apr  6 13:26:01 2013 EST
change_time:    Sat Apr  6 13:26:01 2013 EST
attributes: DA (30)
smb: \> quit 
```

**编辑：请参阅下面的答案以了解我对此问题的最终解决方案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T04:50:44.160

经过一番摆弄后，我想出了一个解决方案，它似乎比试图依赖`ls -lc`. 这是我现在使用的完整脚本。

```
#!/usr/bin/env sh

# remove the existing symbolic links-
rm -f /volume1/new-movies/*

# retrieve the folder listing from the smbclient (the date used is 'modified'
# which appears closer to 'creation' than anything else)
folders=$(smbclient \\\\localhost\\movies -N -c ls 2>/dev/null)

# format the output for better sorting. eg
# folder DA 0 Mon  2 Oct 12:23:00 2012
# 2012-Oct-2 12:23:00 "folder"
fmt1=$(echo "$folders" | sed -E 's/^  (.*\))\s+DA.* (\w+)\s+([0-9]{1,2})\s+([0-9:]{8})\s+([0-9]{4})$/\5-\2-\3 \4 "\1"/')

# change the month names to numeric representations and pad single digit
# dates to 2 characters. eg.
# 2012-Oct-2 12:23:00 "folder"
# 2012-10-02 12:23:00 "folder"
fmt2=$(echo -e "$fmt1" |sed 's/-Jan-/-01-/;s/-Feb-/-02-/;s/-Mar-/-03-/;s/-Apr-/-04-/;s/-May-/-05-/;s/-Jun-/-06-/;s/-Jul-/-07-/;s/-Aug-/-08-/;s/-Sep-/-09-/;s/-Oct-/-10-/;s/-Nov-/-11-/;s/-Dec-/-12-/;s/-\([0-9]\) /-0\1 /')

# sort the folders in reverse order
sortd=$(echo -e "$fmt2" | sort -r)

# grab the last 16\. (16 items per page are displayed on the wd tv streaming)
latest=$(echo -e "$sortd" | head -16 | cut -d\" -f2)

# loop through each folder using new line rather than dft. space
IFS=$'\x0A'
for l in $latest
do
   # find the movie file in the directory, dont look in subdirectories and
   # only match movie files. skips subtitles, bonus features, etc.
   f=$(find "/volume1/movies/$l" -maxdepth 1 -type f \
   \( -iname \*.avi -o \
      -iname \*.mp4 -o \
      -iname \*.mkv -o \
      -iname \*.mpg -o \
      -iname \*.ts -o \
      -iname \*.m4v \
   \) -exec echo "{}" \;)

   # grab just the filename
   b=$(basename "$f")

   # link the file $f to the new movie folder with just the base name.
   ln -s "$f" "/volume1/new-movies/$b"

done
IFS=
ls -1 /volume1/new-movies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:07:53.813

Linux 文件系统从未用于支持文件创建时间，但显然 ext4 支持。它不能很方便地集成到 ls 和 stat 等标准工具中，但您可以以 root 身份执行此操作：

debugfs -R 'stat /full/path/to/my/file.txt' /dev/sda1

其中 sda1 是您的文件系统所在的设备

# java - Apache Mina 异常

> ID：15893259
> 
> 赞同：0
> 
> 时间：2013-04-09T04:23:29.877
> 
> 标签：java, exception, client-server, apache-mina

我使用 apache mina 为我的示例程序关注了这个[链接。](http://www.techbrainwave.com/?p=912)

这些是我与代码一起使用的 lib 文件。

1.  mina-core-2.0.7.jar
2.  slf4j-api-1.7.5.jar
3.  slf4j-jdk14-1.7.5.jar

我收到以下错误：

```
Exception in thread "main" java.lang.ClassCastException: org.slf4j.impl.JDK14LoggerAdapter cannot be cast to java.util.logging.Logger
    at minafiletrans.MinaServerHandler.<init>(MinaServerHandler.java:12)
    at minafiletrans.Minafiletrans.main(Minafiletrans.java:23)
Java Result: 1 
```

这是我的代码：

```
 package minafiletrans;

import java.util.logging.Logger;
import org.apache.mina.core.service.IoHandlerAdapter;
import org.apache.mina.core.session.IdleStatus;
import org.apache.mina.core.session.IoSession;
import org.slf4j.LoggerFactory;

public class MinaServerHandler extends IoHandlerAdapter

{
    @SuppressWarnings("NonConstantLogger")
    private final Logger logger = (Logger) LoggerFactory.getLogger(getClass());
@Override
public void sessionOpened(IoSession session)
{
// set idle time to 10 seconds
session.getConfig().setIdleTime(IdleStatus.BOTH_IDLE, 10);
session.setAttribute("Values: ");
}
@Override
    @SuppressWarnings("LoggerStringConcat")
public void messageReceived(IoSession session, Object message)
{
logger.info("Message received in the server..");
logger.info("Message is: " + message.toString());
}
@Override
public void sessionIdle(IoSession session, IdleStatus status)
{
logger.info("Disconnecting the idle.");
// disconnect an idle client
session.close(true);
}
@Override
public void exceptionCaught(IoSession session, Throwable cause)
{
// close the connection on exceptional situation
session.close(true);
}

} 
```

我已经添加了所有必需的 lib 文件。那么为什么我会出现这个错误。解决此错误的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:57:29.003

你不应该：导入 java.util.logging.Logger；但导入 org.slf4j.Logger；

# asp.net - ASP.NET MVC - 使用模型对象类型的模型元数据，而不是视图的声明模型

> ID：15893260
> 
> 赞同：3
> 
> 时间：2013-04-09T04:23:41.007
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, modelmetadata, modelmetadataprovider

我声明了模型的接口，类实现了它：

```
public interface IMyModel
{
    [Range(1, 1000)]
    [Display(Name = "ModelProp From Interface")]
    int MyIntProperty { get; set; }
    IMySubModel SubModel { get; }
}

public interface IMySubModel
{
    [Range(1,1000)]
    [Display(Name = "SubModelProp From Interface")]
    int MyIntSubProperty { get; set; }
} 
```

我也有模型实现，具有不同的元数据：

```
public class MyModelImplementation:IMyModel
{
    [Display(Name = "ModelProp From Class")]
    [Range(1, 15)]
    public int MyIntProperty
    {
        get;
        set;
    }
    public IMySubModel SubModel { get; set; }
    public MyModelImplementation()
    {
        SubModel = new MySubModelImplementation();
    }
}

public class MySubModelImplementation: IMySubModel
{
    [Display(Name = "SubModelProp From Class")]
    [Range(1, 15)]
    public int MyIntSubProperty
    {
        get;
        set;
    }
} 
```

我有 View，我在其中使用此模型界面：

```
@model MvcApplicationModelInterface.Models.IMyModel
@using (Html.BeginForm())
{
    <p>Using Lambda Expression:</p>

    @Html.DisplayNameFor(m=>m.MyIntProperty)
    @Html.EditorFor(m=>m.MyIntProperty)
    @Html.ValidationMessageFor(m=>m.MyIntProperty)
    <br/>
    @Html.DisplayNameFor(m=>m.SubModel.MyIntSubProperty)
    @Html.EditorFor(m=>m.SubModel.MyIntSubProperty)
    @Html.ValidationMessageFor(m=>m.SubModel.MyIntSubProperty)
    <br/>

    <p>Using String Expression:</p>

    @Html.DisplayName("MyIntProperty")
    @Html.Editor("MyIntProperty")
    @Html.ValidationMessage("MyIntProperty")
    <br/>
    @Html.DisplayName("SubModel.MyIntSubProperty")
    @Html.Editor("SubModel.MyIntSubProperty")
    @Html.ValidationMessage("SubModel.MyIntSubProperty")
    <br/>
    @Html.ValidationSummary(true)
    <br/>
    <input type="submit" name="btnSubmit" value="btnSubmit" />
} 
```

我有控制器可以正确绑定和初始化模型：

```
 [HttpGet]
    public ActionResult Index()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";
        var model = new MyModelImplementation();
        model.MyIntProperty = 111;
        model.SubModel.MyIntSubProperty = 222;
        return View(model);
    }

    [ActionName("Index"), HttpPost]
    public ActionResult Save([ModelBinder(typeof(MyModelBinder))]IMyModel model)
    {
        return View(model);
    }

    public class MyModelBinder : DefaultModelBinder
    {
        protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
        {
            return new MyModelImplementation();
        }
    } 
```

**问题：**

如果在控制器的操作中返回具有 NOT NULL 模型的视图（*return View(new MyModelImplementation(){...});*），我在屏幕上看到的结果是：

![在此处输入图像描述](https://i.stack.imgur.com/kuZpu.png)

但是，如果控制器的操作返回带有 null 模型的结果（*return View(null);*），那么结果是：

![在此处输入图像描述](https://i.stack.imgur.com/lL9t0.png)

如您所见，Lambda html 帮助程序和字符串表达式帮助程序的行为是不同的，而且这些都不是一致的，并且某些行为看起来像一个错误：

*   *（预期）*对于 Lambda 助手，DisplayName 取自 IMyModel
*   *（意外）*对于字符串表达式，所有元数据都取自 MyModelImplementation 类（换句话说，如果您使用 Html.DisplayNameFor(m=>m.MyIntProperty) - 它显示来自接口的元数据（视图中声明的模型类型），但是如果您使用 Html .DisplayName("MyIntProperty") 它使用 model.GetType()) 的元数据。
*   *（意外）*所有验证规则和字符串总是取自 MyModelImplementation (model.GetType()) 元数据，而不是声明的模型类型 (IMyModel)。
*   *（预期）*对于字符串表达式帮助器模型的属性仅在传递给视图的模型为 NULL 的情况下取自接口
*   *（意外）*对于字符串表达式助手 SubModel 的属性元数据根本不被检索/尊重，以防传递给视图的模型为 NULL

**问题：**

此 ASP.NET MVC 错误/功能的最佳解决方法是什么？如何强制 Html 扩展始终使用默认情况下在视图中声明的模型类型的元数据？我尝试使用 MetadataTypeAttribute，但在这种情况下，实现模型的人将获得覆盖接口中指定的原始元数据的自由，这是我不想允许的。所以我宁愿寻找一些自定义的 ModelMetadataProvider 实现。在 MetadataType 的情况下，某些元数据属性也不受尊重，例如 RequiredAttribute。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:45:11.470

我不相信 和 之间的区别`Editor()`是`EditorFor()`一个错误。我认为这是因为`EditorFor()`可以访问强类型模型的类型信息，而编辑器必须使用反射来获取类型，它返回实际类型而不是使用的接口类型。

我认为您所看到的是强类型版本具有更多上下文，并且可以获取接口信息，而不必简​​单地调用`GetType()`.

验证工作正常，因为您告诉模型绑定器绑定到绑定到 MyModelImplementation 的 MyModelBinder。验证基于您发布到的方法及其采用的参数。

# java - 缺少返回类型且没有 void 的方法？

> ID：15893261
> 
> 赞同：1
> 
> 时间：2013-04-09T04:23:41.567
> 
> 标签：java, methods, return, void

这段代码在我的教科书中，但我不理解的是TestPanels()方法。它没有返回类型，也没有 void。这怎么可能发生？

```
public class TestPanels extends JFrame {

public TestPanels() { 
    JPanel p1 = new JPanel();
    p1.setLayout(new GridLayout(4,3));

    for (int i = 1; i <= 9; i++) {
        p1.add(new JButton(""+i));
    }

    p1.add(new JButton(""+0));
    p1.add(new JButton("Start"));
    p1.add(new JButton("Stop"));

    JPanel p2 = new JPanel(new BorderLayout());
    p2.add(new JTextField("Time to be displayed here"), BorderLayout.NORTH);
    p2.add(p1, BorderLayout.CENTER);

    add(p2, BorderLayout.EAST);
    add(new JButton("Food to be placed here"), BorderLayout.WEST); 

}

public static void main(String[] args) {
    TestPanels frame = new TestPanels();
    frame.setTitle("The Front View of a Microwave Oven");
    frame.setSize(400, 250);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true); 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:24:42.980

它是构造函数而不是方法。请在此处查看文档 - [http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:27:44.220

它是构造函数而不是方法。方法将始终具有返回类型或 void（无返回值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:29:43.287

那不是 a `Method`（它是一个附加到类的函数），而是一个`Constructor`. `Constructors`用于实例化或“创建”对象/类。

这些资源应该可以帮助您进一步了解它们：

构造函数：http: [//www.leepoint.net/notes-java/oop/constructors/constructor.html](http://www.leepoint.net/notes-java/oop/constructors/constructor.html)

方法：[http ://www.tutorialspoint.com/java/java_methods.htm](http://www.tutorialspoint.com/java/java_methods.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T04:30:20.493

它是 object 的构造函数`TestPanels`。在语句中调用它，例如`TestPanels t = new TestPanels()`将创建一个带有 9 `JButton`s 的对象，以及在`TestPanels()`.

它基本上是一种启动对象属性的方法，就像`JButton b = new JButton("Button")`给你一个显示“按钮”的按钮一样。

# java - java.sql.SQLException: [Microsoft][ODBC Microsoft 访问驱动程序]

> ID：15893262
> 
> 赞同：1
> 
> 时间：2013-04-09T04:23:55.697
> 
> 标签：java

我正在使用此程序连接 Ms Access 2007 并获得异常，请帮帮我。例外是，我检查了许多教程，但没有得到最佳解决方案。

> java.sql.SQLException：[Microsoft][ODBC Microsoft Access Driver] 找不到文件“（未知）”。

```
at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)
at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)
at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(JdbcOdbc.java:3072)
at sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:323)
at sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:221)
at multithreading.dbAccess.main(dbAccess.java:14)

import java.sql.*;
public class dbAccess
{
public static void main(String[] args)
{
    try
    {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String database = 
          "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=payroll.mdb;";
        Connection conn = DriverManager.getConnection(database, "", "");
        Statement s = conn.createStatement();

        // create a table
        String tableName = "myTable" + String.valueOf((int)(Math.random() * 1000.0));
        String createTable = "CREATE TABLE " + tableName + 
                             " (id Integer, name Text(32))";
        s.execute(createTable); 
        // enter value into table
        for(int i=0; i<25; i++)
        {
          String addRow = "INSERT INTO " + tableName + " VALUES ( " + 
                 String.valueOf((int) (Math.random() * 32767)) + ", 'Text Value " + 
                 String.valueOf(Math.random()) + "')";
          s.execute(addRow);
        }
        // Fetch table

        String selTable = "SELECT * FROM " + tableName;
        s.execute(selTable);
        ResultSet rs = s.getResultSet();
        while((rs!=null) && (rs.next()))
        {
            System.out.println(rs.getString(1) + " : " + rs.getString(2));
        }

        // drop the table
        String dropTable = "DROP TABLE " + tableName;
        s.execute(dropTable);
        // close and cleanup
        s.close();
        conn.close();
    }

    catch(Exception ex)
    {
        ex.printStackTrace();
    }
}
}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:29:34.883

你可以参考[这个](http://www.easysoft.com/support/kb/kb00686.html)。我会帮你的

另外，转到控制面板-> 管理工具-> 数据源-> 添加-> Microsoft Access Drivers(*mdb,*accdb)-> 确定-> 确定-> 确定。它可能适用于 ODBC 连接。

此外，您必须提供 payroll.mdb 的正确路径

> DBQ=payroll.mdb

# javascript - extjs 4 动态存储

> ID：15893267
> 
> 赞同：1
> 
> 时间：2013-04-09T04:24:35.183
> 
> 标签：javascript, extjs, load, store

我必须更新一些从商店获取数据的标签。我必须将新数据加载到商店中。每 10 秒。这很容易 - 使用`setInternal()`（因为 TaskRunner 不工作 o_0）_ 并调用 store.load 事件。但我的任务要具体得多。我还有一个包含两列的网格，并从存储中获取一些数据，并且一些数据是自定义的。这意味着在具有明确存储数据索引的列之前，存储中有一些带有自定义字符串数据和一些数字数据的新记录......这可能很难用文字来解释，但在代码中它看起来是这样的：

```
//---Store---
Ext.define('App.store.Data', {
    extend: 'Ext.data.Store',
    autoLoad: false,
    storeId:'Data',
    model: 'App.model.DataModel',
    proxy   : {
    type    : 'ajax',
    url: 'http://mybackend',
    reader: {
        type: 'json'
    } 
    },
    data:[first = true],
    listeners:{
        load: function()
        {
            if(first){
            first=false;
            myApp.getController('App.controller.Controller').StoreLoadHandler();
            setInterval(function (){myApp.getController('App.controller.Controller').StoreLoadHandler();},10000);
            }

        }
    }
});
//---Controller---
StoreLoadHandler: function(){
    var store = this.getStore('Data');
    //upload data from base into store
    store.reload(); 
    store.add(
            [
                {
                    fio: 'somedata',
                    //calculate some data and write it into store. All dataindexes are existsin model 
                    operCount: parseInt(this.getStore('Data').first().get('isQuick')),
                    opersvod: (this.getStore('Data').first().get('opersvod')),
                    isQuick:parseInt(this.getStore('Data').first().get('isQuick')),
                    ipk: (this.getStore('Data').first().get('ipk')),
                    allCount: (this.getStore('Data').first().get('allCount')),
                    id: 0
                },
                {
                    fio: 
                    ...
                    id: 1
                },
                {
                    fio: 
                    ...
                    id: 2
                }       
            ]
        );

       //takes my labels and use setText, works brilliant
    Ext.ComponentQuery.query('#TopPanel')[0].items.getAt(0).items.get('inW').setText(this.StoreCalc('iw'));
    Ext.ComponentQuery.query('#TopPanel')[0].items.getAt(1).items.get('isClose').setText(this.StoreCalc('isClose'));
    Ext.ComponentQuery.query('#TopPanel')[0].items.getAt(2).items.get('denied').setText(this.StoreCalc('denied'));
    Ext.ComponentQuery.query('#BottomPanel')[0].items.getAt(0).items.get('allCount').setText(store.getAt(3).get('allCount'));

    //use sort
    store.sort([
    {
        property : 'id',
        direction: 'ASC'
    },
    {
        property : 'fio',
        direction: 'ASK'//'DESC'
    }
    ]);
    store.destroy();
    } 
```

在这种情况下，当我调用`store.load()`方法或`store.reload()`存储中的自定义记录会丢失。如果我从列表中删除此操作，我的自定义数据将保存并在具有 2 列的网格中呈现（数据索引是 - 'fio' 和 'operCount'）......问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:35:47.443

看起来您调用`add`的方法没有存储数据。使用`reload`方法的回调选项：

```
store.reload({callback: function() {
          store.add(...);
  } 
}) 
```

注意：不要从`load`方法中配置重新加载计时器 - 这不利于理解

# wordpress - Wordpress - PHP 致命错误 - functions.php - 在尝试访问 wp-admin 时

> ID：15893268
> 
> 赞同：0
> 
> 时间：2013-04-09T04:24:36.487
> 
> 标签：wordpress, nginx, php, w3-total-cache

我在具有 768 MB RAM 的 Ubuntu 12.04 映像上安装了 W3TC、Nginx、varnish 和 php5-fpm。该站点本身运行良好，但是当我尝试访问 /wp-admin 时，我收到 HTTP 500 内部服务器错误。

我去日志并查看并发现以下错误：

> PHP 消息：PHP 致命错误：从上游读取响应标头时，第 251 行的 /var/www/wp-includes/functions.php 中允许的内存大小为 67108864 字节（试图分配 5184285 字节）

我看过很多帖子，上面说要进行以下设置：

> 在 wp-config.php 或您需要的任何地方增加分配的内存：
> 
> 定义（'WP_MEMORY_LIMIT'，'64M'）；
> 
> 如果 PHP 本身内存不足，您可以通过修改 php.ini 并重新启动 Web 服务器来增加内存。
> 
> memory_limit 256M

但是一直没有运气。我还从以前的备份中恢复了图像，但问题仍然存在。自从我上次能够访问后端以来，没有任何插件被修改或更新。

我也将 WP_DEBUG 设置为 true 并看到了这一点：

> 注意： wp_enqueue_script 被错误调用。在 wp_enqueue_scripts 、 admin_enqueue_scripts 或 init 挂钩之前，不应注册或排队脚本和样式。有关更多信息，请参阅 WordPress 中的调试。（此消息是在 3.3 版中添加的。）在 /var/www/wp-includes/functions.php 的第 2758 行 注意：wp_enqueue_style 调用不正确。在 wp_enqueue_scripts 、 admin_enqueue_scripts 或 init 挂钩之前，不应注册或排队脚本和样式。有关更多信息，请参阅 WordPress 中的调试。（此消息是在 3.3 版中添加的。）在第 2758 行的 /var/www/wp-includes/functions.php 中注意：未定义的变量：在 /var/www/wp-content/themes/organic_magazine/functions.php 中分页第 419 行

# c++ - 递归函数扫描字符串以添加 ASCII

> ID：15893271
> 
> 赞同：1
> 
> 时间：2013-04-09T04:24:43.393
> 
> 标签：c++, string, recursion

所以我试图弄清楚如何做到这一点：

> 编写一个递归函数，将 C 字符串中的所有字符相加。

我在正常执行此操作时有点生疏，但我终于让它与正常的 for 循环一起工作：

```
int countstr(string s)
{ 
int sum = 0;

  if(s.length() == 0)
    {
    exit(0);
    }
  for (unsigned int i = 0; i < s.size(); i++) 
     {
         sum += s[i];
         }
 return sum;

} 
```

然后我可以进入 main 并执行以下操作：

```
int main ()
{
  cout << "This word adds up to " << countstr("HELLO") << " in ASCII " << endl;
} 
```

一切都按原样工作，通过它们的 ASCII 数字对字符串中的字符进行计数和累加。我遇到的问题是试图弄清楚它是如何输入的，因此它可以递归地工作。我知道我需要放弃 for 循环来代替调用函数本身，但我不知道用什么来代替 sum += s[i]; 我已经进入我的 for 循环。我一直在 C 字符串库中四处寻找，但我没有看到任何可以替换 for 循环调用的 [i] 的东西。有谁知道我应该用什么来做到这一点？我不是在寻找代码中的答案，只需要帮助我应该使用什么来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:36:00.287

骨架可能是这样的：

```
int countlen(const char * str)
{
    if (condition)
        return 0;
    else
        return *str + countlen(str + 1);
} 
```

剩下的就看你了：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T04:41:51.900

这是许多方法之一。

```
int reccountstr(string s, int i){
  if(s.size() == i)
    return (0 + s[i]);
  else
    return reccountstr(s, i + 1) + s[i];
} 
```

然后在 main 中，您只需使用零初始参数调用它。

```
cout << "This word adds up to " << reccountstr("HELLO", 0) << " in ASCII " << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T04:40:36.873

```
int countString(char sample[], int i)
{
    if(sample[i] == 0)
        return 0;
    else
        return(1 + countString(sample, i+1));
} 
```

这可能是一种解决方案，如果当前读取的字符不为空（0 或 '\0'），它将返回要读取的当前字符索引在`1 + countString(sample, i + 1)`哪里。`i`

一旦达到 null，它就会返回 0。因此对于三个字符长度，它将执行 1 + 1 + 1 + 0。您可以使用 . 调用该函数`printf("%d\n", countString(yourStringName, 0))`。

1.  所以你的基本情况是`character[index] == empty`

2.  `1 + function(stringName, index + 1)`粗略地说，您的归纳案例是。

此外，这有点超出您的问题范围，但您也可以通过避免不断建立堆栈来提高效率。一种方法是在函数内创建另一个变量，该变量不断累积总计数。[有关这方面的更多信息，请参阅http://c2.com/cgi/wiki?TailRecursion](http://c2.com/cgi/wiki?TailRecursion)上的此链接`tail recursion:`

* * *

**内存更保守的版本：**

```
int countString(char sample[], int i, int total)
{
    if(sample[i] == 0)
        return total;
    else
        return countString(sample, i+1, ++total);
} 
```

你可以用`printf("%d\n", countString(sample, 0, 0));`

# css - CSS 粘性页脚 - 带边距

> ID：15893275
> 
> 赞同：5
> 
> 时间：2013-04-09T04:25:04.047
> 
> 标签：css, sticky-footer

我正在尝试应用粘页脚的这种方法：[http ://code.google.com/p/cleanstickyfooter/](http://code.google.com/p/cleanstickyfooter/)

它工作得很好，但是，我有一个问题。我的特定网站的设计在页面顶部有 34 像素的边距。所以我尝试了几种方法来实现它，无论是做`body {margin-top:34px}`还是做`container {margin-top:34px}`。

然而，在这两种情况下，Sticky Footer 都会搞砸。当我尝试补偿 34px 时，它似乎从来没有成功过。

有任何想法吗？

这是一个小提琴示例：http: [//jsfiddle.net/jrZKb/](http://jsfiddle.net/jrZKb/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T04:54:13.317

使用[Modern Clean CSS Sticky Footer](http://mystrd.at/modern-clean-css-sticky-footer/)，它可以工作（在 FireFox 和 IE9 上）：

[http://jsfiddle.net/jrZKb/1/](http://jsfiddle.net/jrZKb/1/)

```
<body>
    <header> Header</header>
    <article>Lorem ipsum...</article>
    <footer></footer>
</body>

html {
    position: relative;
    min-height: 100%;
}
body {
    margin: 0 0 100px; /* bottom = footer height */
}
header
{
    background-color: green;
}
footer {
    position: absolute;
    left: 0;
    bottom: 0;
    height: 100px;
    width: 100%;
    background-color: blue;
} 
```

# android - 屏幕尺寸上的 Android 游戏位置

> ID：15893277
> 
> 赞同：0
> 
> 时间：2013-04-09T04:25:16.337
> 
> 标签：android, screen

现在我的游戏正在使用直接的 x 和 y 值。我意识到我的 S3 正在将我的图像缩放两倍尺寸以及设备之间的其他一些尺寸不一致。我阅读并了解了一些关于 android dpi 和缩放等的知识。我想知道做位置和东西的正确方法是什么，以便考虑不同的屏幕尺寸。

我认为可以通过设置目标尺寸然后根据目标尺寸与实际屏幕尺寸的比率缩放所有位置值来完成。

我还在某处读到，您可以在缓冲区上绘制并显示拉伸到屏幕大小的缓冲区，但是对于这种方法，android 的自动调整大小会影响绘制的位图吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:31:08.497

这个想法是使用纵横比，android自动调整大小以使您受益。每个安卓屏幕都有自己的纵横比，你的游戏应该使用纵横比并在需要填充屏幕空间的地方填充黑边。所以使用适当的根布局拟合属性。

Android 会自动调整不适合的可绘制对象的大小。因此，如果您只保留一组可绘制对象，则 Android 的调整大小工作会增加，并且它在内部使用位图来调整大小。位图越多，内存利用率越高，清理越多，GC 越多，游戏速度就越慢。所以这里的最佳实践是创建不同的 dpi 不同的图像集来使用。

首先，我建议您购买 3 部手机，三星 y（小屏幕）、三星 s2（好屏幕）和 7 或 10 英寸的标签。将您的原始绘图复制到所有文件夹，只是为了感受游戏并消除所有内存问题。一旦您的游戏运行良好、流畅且在所有手机尺寸上都没有任何内存问题，只需走进平面设计师办公室，向他展示您的游戏在某些手机上看起来有多糟糕。他将创建适用于该 dpi 的图形。

它是一款智能的可绘制分辨率、尺寸和大量测试的游戏:)。

希望这有帮助。

编辑：阅读我在[内存问题中的答案](https://stackoverflow.com/questions/12996210/android-view-inflateexception-binary-xml-file-line-2-error-inflating-class-u/12996233#12996233)

# extjs - 如何使用 Ext.Js 实现对网格中多个字段的实时搜索/过滤？

> ID：15893280
> 
> 赞同：2
> 
> 时间：2013-04-09T04:25:30.027
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我已经在网格上进行了实时搜索。它正在根据我提到的过滤器代码的哪一列进行搜索。但我需要根据多列搜索过滤网格记录。在下面的代码中只搜索名称列，因为只提到了过滤器代码中的名称。我没有得到如何实现多列值搜索？谁能告诉我如何实现？非常感谢。谢谢你 。

**网格代码在这里：**

```
{
                xtype: 'gridpanel',
                flex: 2,
                hidden: false,
                store: store,
                loadMask: true,
                id: 'grid',
                columns: [
                    {id:'id',header: 'ID', width: 100, sortable: true, dataIndex: 'id'},
                    {header: 'Name', width: 150, dataIndex: 'name'},
                    {header: 'Position', width: 150, dataIndex: 'position'},
                    {header: 'Ambition', width: 250, dataIndex: 'ambition'}                    
                ],
                stripeRows: true,               
                title:'Straw Hats Crew',  
            }, 
```

**liveSearch 文本甚至在此处更改：**

```
onTextFieldChange: function(field, newValue, oldValue, options){
        var grid = Ext.getCmp('grid');
        if(newValue==''){
            grid.store.clearFilter();
        }
        else {
            grid.store.clearFilter();
            grid.store.load().filter([
                {id: 'name', property: "name", value: newValue, anyMatch: true}
            ]);            
        }
    }, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T17:32:54.837

像这样的东西应该工作。您可以指定可以检查模型中所有字段的任意过滤器函数。

```
onTextFieldChange: function(field, newValue, oldValue, options){
    var grid = Ext.getCmp('grid');
    grid.store.clearFilter();

    if (newValue) {
        var matcher = new RegExp(Ext.String.escapeRegex(newValue), "i");
        grid.store.filter({
            filterFn: function(record) {
                return matcher.test(record.get('id')) ||
                    matcher.test(record.get('name')) ||
                    matcher.test(record.get('position')) ||
                    matcher.test(record.get('ambition'));
            }
        });
    }
} 
```

# tomcat - 在 jProfiler 中获取没有 catalina 资源的 webapp 的内存使用情况

> ID：15893283
> 
> 赞同：1
> 
> 时间：2013-04-09T04:25:49.713
> 
> 标签：tomcat, web-applications, jprofiler

我正在使用 jProfiler 来确定我的 webapp 消耗了多少内存。我编写了一个简单的“Hello World”应用程序并使用 Tomcat 启动，将 jProfiler 附加到 jvm 并惊讶地看到如此多的内存使用。

截图：http: [//i.stack.imgur.com/YlRVr.png](http://i.stack.imgur.com/YlRVr.png)

我猜显示的内存使用情况是由于 catalina 消耗资源。知道如何找出我的 web 应用程序的实际使用情况，而不需要 catalina 消耗内存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:47:33.960

You have to use the heap walker in JProfiler to find out how the String objects are referenced.

Select java.lang.String in the "Classes" view of the heap walker and create a new object set Then, switch to the "Cumulated incoming references" view and follow the large bars.

# oracle - 如何使用 Oracle 在 Yii 中保存日期

> ID：15893284
> 
> 赞同：0
> 
> 时间：2013-04-09T04:25:55.350
> 
> 标签：oracle, date, yii

如何使用 Oracle 在 Yii 中保存日期？

```
$trx->DATE_TRX=date('Y-m-d');
CDbCommand failed to execute the SQL statement: 
    SQLSTATE[HY000]: General error: 1861
    OCIStmtExecute: ORA-01861: literal does not match format string
        (ext\pdo_oci\oci_statement.c:148).
    The SQL statement executed was: 
        INSERT INTO "TRX" ("IDMEMBER", "DATE_TRX") VALUES (:yp0, :yp1) RETURNING "ID" INTO :RETURN_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:18:45.873

我猜你提供了一个字符文字作为日期，格式为“yyyy-mm-dd”。如果是这样，那么您应该将其显式转换为日期作为插入语句的一部分......

```
INSERT INTO "TRX" ("IDMEMBER", "DATE_TRX")
VALUES (:yp0, to_date(:yp1,'yyyy-mm-dd'))
RETURNING "ID" INTO :RETURN_ID 
```

# c# - “从另一方收到不安全或不正确安全的故障”

> ID：15893286
> 
> 赞同：5
> 
> 时间：2013-04-09T04:26:02.697
> 
> 标签：c#, wpf, wcf

我越来越：

![错误](https://i.stack.imgur.com/EQEK2.png)

> “从另一方收到不安全或不正确安全的故障。有关故障代码和详细信息，请参阅内部故障异常。”

我已经在客户端完成了这项工作，并且在控制台应用程序中也完成了同样的操作，但是出现的错误可能是一些冲突。

我也检查过`app.config`。

代码是：

```
<client>
  <endpoint address="net.tcp://localhost:5054/player" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IPlayerService" contract="PlayerService.IPlayerService" name="NetTcpBinding_IPlayerService">
    <identity>
      <dns value="pident.cloudapp.net"/>
    </identity>
  </endpoint>
  <endpoint address="net.tcp://localhost:5049/public" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IPublicService" contract="Public Service.IPublicService" name="NetTcpBinding_IPublicService"/>
  <endpoint address="net.tcp://localhost:5051/user" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IUserService" contract="User Service.IUserService" name="NetTcpBinding_IUserService">
    <identity>
      <dns value="pident.cloudapp.net"/>
    </identity>
  </endpoint> 
```

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T21:24:54.237

我刚遇到这个问题，不得不关闭 WCF 绑定的安全上下文。您需要在客户端和服务中的绑定上关闭它们。

如果您的 WCF 是 IIS 托管的，则这是配置文件：

```
<ws2007FederationHttpBinding>
    <binding>
        <security mode="TransportWithMessageCredential">
            <message establishSecurityContext="false" />
        </security>
    </binding>
</ws2007FederationHttpBinding> 
```

看到这篇文章： [http ://stack247.wordpress.com/2013/05/28/an-unsecured-or-incorrectly-secured-fault-was-received-from-the-other-party/](http://stack247.wordpress.com/2013/05/28/an-unsecured-or-incorrectly-secured-fault-was-received-from-the-other-party/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T10:53:55.710

在命令提示符下，检查 testclient 是否正确接受参数。

例子：
`C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE>wcftestclient.exe http://localhost:31/AuthenicationService.svc?wsdl`

如果您提供的输入不匹配，则服务存在问题。
相反，您必须重新查看创建的服务。
如果没有发现问题，才去客户端。

# ios - 任何滚动都会调用 UICollectionViewLayout prepareLayout

> ID：15893289
> 
> 赞同：7
> 
> 时间：2013-04-09T04:26:24.753
> 
> 标签：ios, uicollectionview, uicollectionviewlayout

在实现自定义`UICollectionViewLayout`子类时发现了这种奇怪的行为。我设置了除`collectionViewContentSize`. 所有的细胞都出现在我预期的地方，但是`contentView`太长了。看起来大约是应该的两倍。

我实现了下面的方法来获得正确的`contentSize`. 虽然，它现在是预期值，`prepareLayout`每次视图滚动一个像素时都会调用它。这意味着如果我从 0,0 滑动到 0,500，`prepareLayout`就会被调用 500 次！

我有什么`collectionViewContentSize`可能导致这种情况？

```
- (CGSize)collectionViewContentSize {
    UICollectionViewLayoutAttributes *leftAttributes = (UICollectionViewLayoutAttributes *)self.layoutInfo[@"segmentCell"][[NSIndexPath indexPathForItem:[self.collectionView numberOfItemsInSection:0]-1 inSection:0]];
    UICollectionViewLayoutAttributes *rightAttributes = (UICollectionViewLayoutAttributes *)self.layoutInfo[@"segmentCell"][[NSIndexPath indexPathForItem:[self.collectionView numberOfItemsInSection:1]-1 inSection:1]];
    float leftHeight = leftAttributes.frame.size.height + leftAttributes.frame.origin.y;
    float rightHeight = rightAttributes.frame.size.height + rightAttributes.frame.origin.y;
    float maxHeight = leftHeight > rightHeight ? leftHeight : rightHeight;
    return CGSizeMake(self.collectionView.bounds.size.width, maxHeight);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T14:55:19.577

尽管根据文档 [0]`shoulInvalidateLayoutForBoundsChange:`应该默认返回 NO，但事实并非如此。一旦我实现它并让它在所有情况下都返回 NO，`prepareLayout`就不再在每次边界更改时调用它。这似乎是 UICollectionViewLayout 中的一个错误。

[0] [http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewLayout_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewLayout_class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-30T09:46:31.047

您希望发生这种情况的一个原因是，在使用自定义布局时，您可能希望单元格的大小根据内容偏移量而变化，例如当您在 iPhone X 上向上滑动时，Y 值决定了细胞。这使您不必为您可能想要的特定效果处理单独的手势识别器。

# r - 导入数据框时过滤多个csv文件

> ID：15893296
> 
> 赞同：3
> 
> 时间：2013-04-09T04:27:03.797
> 
> 标签：r, csv, import, filter

我有大量要读入 R 的 csv 文件。csv 中的所有列标题都是相同的。但是我只想将每个文件中的那些行导入到变量在给定范围内（高于最小阈值和低于最大阈值）的数据框中，例如

```
 v1   v2   v3
1  x    q    2
2  c    w    4
3  v    e    5
4  b    r    7 
```

过滤 v3 (v3>2 & v3<7) 应导致：

```
 v1   v2   v3
1  c    w    4
2  v    e    5 
```

因此，我将所有 csv 中的所有数据导入一个数据帧，然后进行过滤：

```
#Read the data files
fileNames <- list.files(path = workDir)
mergedFiles <- do.call("rbind", sapply(fileNames, read.csv, simplify = FALSE))
fileID <- row.names(mergedFiles)
fileID <- gsub(".csv.*", "", fileID)
#Combining data with file IDs
combFiles=cbind(fileID, mergedFiles)
#Filtering the data according to criteria
resultFile <- combFiles[combFiles$v3 > min & combFiles$v3 < max, ] 
```

我宁愿在将每个单个 csv 文件导入数据框时应用过滤器。我认为 for 循环将是最好的方法，但我不确定如何。我会很感激任何建议。

```
Edit 
```

在测试了 mnel 的建议后，我得到了一个不同的解决方案：

```
fileNames = list.files(path = workDir)
mzList = list()
for(i in 1:length(fileNames)){
tempData = read.csv(fileNames[i])
mz.idx = which(tempData[ ,1] > minMZ & tempData[ ,1] < maxMZ)
mz1 = tempData[mz.idx, ]
mzList[[i]] = data.frame(mz1, filename = rep(fileNames[i], length(mz.idx)))
}
resultFile = do.call("rbind", mzList) 
```

感谢所有的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:41:19.967

这是一种`data.table`允许您使用的方法`fread`（[比 快`read.csv`](https://stackoverflow.com/a/15058684/1385941)），`rbindlist`这是一种非常适合这种情况的[超快速实现。`do.call(rbind, list(..))`](https://stackoverflow.com/a/15673654/1385941)它还有一个功能`between`

```
library(data.table)
fileNames <- list.files(path = workDir)
alldata <- rbindlist(lapply(fileNames, function(x,mon,max) {
  xx <- fread(x, sep = ',')
  xx[, fileID :=   gsub(".csv.*", "", x)]
  xx[between(v3, lower=min, upper = max, incbounds = FALSE)]
  }, min = 2, max = 3)) 
```

如果单个文件很大并且`v1`总是整数值，则可能值得将其设置`v3`为键，然后使用二进制搜索，导入所有内容然后运行过滤也可能更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T04:43:17.067

如果您想在导入数据之前进行“过滤”，请尝试`read.csv.sql`从[sqldf 包中使用](http://cran.r-project.org/web/packages/sqldf/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:29:08.887

如果您真的被记忆卡住了，那么以下解决方案可能会起作用。它用于`LaF`仅读取过滤所需的列；然后计算将被读取的总行数；初始化完整的data.frame，然后从文件中读取所需的行。（它可能并不比其他解决方案快）

```
library("LaF")

colnames <- c("v1","v2","v3")
colclasses <- c("character", "character", "numeric")

fileNames <- list.files(pattern = "*.csv")

# First determine which lines to read from each file and the total number of lines
# to be read
lines <- list()
for (fn in fileNames) {
  laf <- laf_open_csv(fn, column_types=colclasses, column_names=colnames, skip=1)
  d   <- laf$v3[] 
  lines[[fn]] <- which(d > 2 & d < 7)
}
nlines <- sum(sapply(lines, length))

# Initialize data.frame
df <- as.data.frame(lapply(colclasses, do.call, list(nlines)), 
        stringsAsFactors=FALSE)
names(df) <- colnames

# Read the lines from the files
i <- 0
for (fn in names(lines)) {
  laf <- laf_open_csv(fn, column_types=colclasses, column_names=colnames, skip=1)
  n   <- length(lines[[fn]])
  df[seq_len(n) + i, ] <- laf[lines[[fn]], ]
  i   <- i + n
} 
```

# javascript - 声明式 dojox.grid.datagrid 的 header 有 onclick 事件？

> ID：15893300
> 
> 赞同：0
> 
> 时间：2013-04-09T04:27:21.887
> 
> 标签：javascript, datagrid, dojo, dojox.grid.datagrid

*   是否可以在 dojox.grid.datagrid 的标题中有 onclick。
*   我尝试在标题的 onclick 中调用一个函数.. 但它不起作用。

    ```
    <div class="claro" id="cvsd" name="dataGrid" onclick="getConnect('inner__cvsd');setWidgetproperty(this.id,'xy','inner__cvsd');" ondblclick="editCustomGrid(this.id)" onmouseup="setDocStyle(this.id)" style="height: 200px; left: 44px; position: absolute; top: 114px; width: 950px;">
     <table class="claro" dojotype="dojox.grid.DataGrid" id="inner__cvsd" rowselector="10px" style="height: 180px; width: 400px;">
          <thead>
               <tr>
                    <th field="Column1" id="Column1_2" width="100px" onclick="getConnect();">
                        Column1
                    </th>
               </tr>
          </thead>
     </table>
     <input id="hidden__cvsd" name="dataGrid" style="display:none;" type="hidden"> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:09:00.840

有一个名为的事件`onHeaderCellClick`可能会完成这项工作。如果您需要获取有关事件等的更多信息，我建议您阅读[API 文档](http://dojotoolkit.org/api/1.7/dojox/grid/DataGrid)。我写了一个示例 JSFiddle（网格是通过编程方式创建的，但您也可以这样做），您可以在[此处](http://jsfiddle.net/TMm7y/)找到。

我用来调用事件的代码如下：

```
onHeaderCellClick: function() {
    console.log("Header clicked");  
}, 
```

但是，当然，您可以随心所欲地更改它。

# android - 如何访问 string.xml 中存在的字符串

> ID：15893302
> 
> 赞同：5
> 
> 时间：2013-04-09T04:27:41.487
> 
> 标签：android

我想使用 String.xml 中存在的字符串构建 alertdialog，但 R.string.string1 返回 int。请告诉我在 string.xml 中获取字符串的方法这是我的代码..

```
 public static void showAlert(String alertMessage) {
    final AlertDialog.Builder builder = new AlertDialog.Builder(null);
    builder.setMessage(alertMessage);              
    final AlertDialog alert = builder.create();
    alert.show();
}

 showAlert(R.string.string1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:29:45.370

用于`getResources().getString`从 strings.xml 获取字符串值：

```
String str=getResources().getString(R.string.internetNotAvailable);
showAlert(str); 
```

并且您将 null 传递`AlertDialog.Builder`给以创建 AlertDialog。请传递当前 Activity 上下文而不是 null 以创建`AlertDialog`为：

```
AlertDialog.Builder builder = new AlertDialog.Builder(Your_Current_Activity.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:31:00.267

```
myContext.getResources().getString(R.string.string1); 
```

请注意，这`myContext`是`Context`您当前所在或可以访问的任何内容 - 如果您在 中`Activity`，则可能只是`this`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:46:40.840

用于`getResources().getString(R.string.string1)`获取刺痛`string.xml`

```
public static void showAlert(String alertMessage) {
    final AlertDialog.Builder builder = new AlertDialog.Builder(null);
    builder.setMessage(alertMessage);              
    final AlertDialog alert = builder.create();
    alert.show();
}

 showAlert(getResources().getString(R.string.string1)); 
```

# c++ - 当字符串的最后一个位置是标点符号时程序停止解析

> ID：15893313
> 
> 赞同：3
> 
> 时间：2013-04-09T04:28:47.617
> 
> 标签：c++, string, parsing, iterator

所以我试图从一个文件中读取所有单词，并在我这样做时去掉标点符号。这是剥离标点符号的逻辑：

编辑：该程序实际上完全停止运行，只是想弄清楚这一点

```
ifstream file("text.txt");

string              str;
string::iterator    cur;

for(file>>str; !file.eof(); file>>str){
    for(cur = str.begin(); cur != str.end(); cur++){
         if (!(isalnum(*cur))){
            cur = str.erase(cur);
         }
    }
cout << str << endl;
...
} 
```

假设我有一个文本文件，内容如下：

```
This is a program. It has trouble with (non alphanumeric chars)

But it's my own and I love it... 
```

当我`cout`和`endl;`我的字符串在这个逻辑之后，我会得到

```
This
is
a
program
It
has
trouble
with
non
alphanumeric 
```

这就是所有人。我的迭代器逻辑有问题吗？我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:15:49.290

我看到的迭代器的主要逻辑问题是，对于非字母数字字符，迭代器会增加两次：在`erase`它移动到下一个符号期间，然后`cur++`从`for`循环中增加它，因此它会跳过非字母数字符号之后的每个符号。

所以可能是这样的：

```
string              next;
string::iterator    cur;

cur = next.begin()
while(cur != next.end()){
    if (!(isalnum(*cur))){
        cur = next.erase(cur);
    } else {
        cur++;
    }
} 
```

这只是删除了非字母数字字符。如果您需要标记您的输入，您将不得不执行更多操作，即记住，您是否在一个单词内（已阅读至少一个字母数字字符）并相应地采取行动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T05:28:40.463

*在*构建转换列表时不复制标点符号怎么样。好的。可能矫枉过正。

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <vector>
#include <algorithm>
#include <cctype>
using namespace std;

// takes the file being processed as only command line param
int main(int argc, char *argv[])
{
    if (argc != 2)
        return EXIT_FAILURE;

    ifstream inf(argv[1]);
    vector<string> res;
    std::transform(istream_iterator<string>(inf),
        istream_iterator<string>(),
        back_inserter(res),
        [](const string& s) {
            string tmp; copy_if(s.begin(), s.end(), back_inserter(tmp),
            [](char c) { return std::isalnum(c); });
            return tmp;
        });

    // optional dump to output
    copy(res.begin(), res.end(), ostream_iterator<string>(cout, "\n"));

    return EXIT_SUCCESS;
} 
```

**输入**

```
All the world's a stage,
And all the men and women merely players:
They have their exits and their entrances;
And one man in his time plays many parts,
His acts being seven ages. At first, the infant,
Mewling and puking in the nurse's arms. 
```

**输出**

```
All
the
worlds
a
stage
And
all
the
men
and
women
merely
players
They
have
their
exits
and
their
entrances
And
one
man
in
his
time
plays
many
parts
His
acts
being
seven
ages
At
first
the
infant
Mewling
and
puking
in
the
nurses
arms 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:15:58.433

您应该使用`ispunct`来测试标点符号。如果您还想过滤掉控制字符，您应该使用`iscntrl`.

过滤掉标点符号后，您可以拆分空格和换行符以获取单词。

# asp.net-mvc-4 - MVC4 Web-API - 需要路由映射帮助

> ID：15893318
> 
> 赞同：0
> 
> 时间：2013-04-09T04:29:30.777
> 
> 标签：asp.net-mvc-4, asp.net-web-api-routing

我有一个名为的控制器

**产品** 和我有三个动作

*   **产品**：*接受一个 int 返回一个模型（类）对象*
*   **类别**：*接受一个字符串返回模型（类）对象的数组*
*   **全部**：*无参数返回模型（类）对象的数组*

我正在尝试的是以下映射

**产品**-> api/产品/产品/1

**类别**-> api / 产品 / 类别 / 酱汁

**全部**-> api/产品/全部

由于动作名称支持 URL 结构，所以我尝试了一条通用路线

```
config.Routes.MapHttpRoute(
name: "DefaultApi",
routeTemplate: "api/{controller}/{action}/{id}",
defaults: new { id = RouteParameter.Optional }
); 
```

其他一切正常，但是当我使用此`http://localhost:2271/api/products/category/2`URL时出现以下错误

```
<Error>
<Message>
No HTTP resource was found that matches the request URI 'http://localhost:2271/api/products/category/2'.
</Message>
<MessageDetail>
No action was found on the controller 'Products' that matches the request.
</MessageDetail>
</Error> 
```

另一方面，这个 URL `api/products/category/?cat=abc`&`api/products/category?cat=abc`工作正常...... [cat 是我的接收参数名称]

帮助 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:28:32.420

> 另一方面，这个 URL api/products/category/?cat=abc & api/products/category?cat=abc 工作正常

是的，没错，它会的，这就是 RPC 的做法。如果你想保持 RESTful 的方式，你可以有以下路由配置：

```
config.Routes.MapHttpRoute(
    name: "ProductById",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
);

config.Routes.MapHttpRoute(
    name: "ProductByCategory",
    routeTemplate: "api/{controller}/category/{cat}"
);

config.Routes.MapHttpRoute(
    name: "DefaultByAction",
    routeTemplate: "api/{controller}/{action}",
    defaults: new { action = "Get" }
);

config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

你的控制器看起来像这样：

```
public class ProductsController : ApiController
{
    // api/products/
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };            
    }

    // api/products/5
    [HttpGet]
    public string Get(int id)
    {
        return "Product" + id;
    }

    // api/products/category/fruits
    [HttpGet]
    public string Category(string cat)
    {
        return "Product " + cat;
    }    
} 
```

注意：为简单起见，我返回了字符串，但我假设您将返回 a 的一个实例`Product`，并且您可以轻松更改代码来执行此操作。

# python - 理解 functools.wraps

> ID：15893321
> 
> 赞同：0
> 
> 时间：2013-04-09T04:29:36.647
> 
> 标签：python

我正在使用 Flask-RESTful 并尝试使用[此处显示的技术让我的 REST 端点](http://flask-restful.readthedocs.org/en/latest/extending.html)

主要代码是

```
def authenticate(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        if not getattr(func, 'authenticated', True):
            return func(*args, **kwargs)

        acct = basic_authentication()  # custom account lookup function

        if acct:
            return func(*args, **kwargs)

        restful.abort(401)
    return wrapper

class Resource(restful.Resource):
    method_decorators = [authenticate]   # applies to all inherited resources 
```

我也这样做，它似乎有效，但我不确定会发生什么`@wraps`？
目前对我来说似乎很神奇，我不明白以下内容

a.) 似乎被包装的函数`@wraps`被传递给了包装器，那么包装器返回的是什么？

*可能的答案*：最初传递给函数的所有东西？

如果是的话，我怎样才能传递更多的信息，比如`acct`包含所有内容的对象，以便我的函数接收帐户对象并且我不必为它进行数据库获取？

**更新** 基于示例，我的休息端点看起来像

```
class UserResource(RestResource):
    def get(self, uuid):
        return {'method': 'get user -> ' + uuid} 
```

我称之为

```
curl -X GET http://127.0.0.1:5000/users/validUUID 
```

现在，当我的每个请求都经过身份验证时，我会查看是否存在有效`acct`对象，如果存在，我将控制权委托给端点

**问题**：
由于我实际上是在进行一次数据库调用以找出`acct`对象，因此是否可以在找到有效对象时将其传递给端点`acct`？

这样会发生两件事
a.) 我知道调用已通过身份验证
b.) 我重用`acct`可用于进一步工作的对象，而不是再次调用 DB 并再次`acct`从 validUUID 获取对象

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:35:27.217

`authenticate`是一个装饰器——它接受一个函数并返回该函数的修改版本（通常通过包装函数和包装它来实现）。

现在，包装器的问题在于它们在某些方面的行为通常与原始函数不完全相同——它们可能缺少文档字符串、错误`__name__`（`wrapper`而不是应该调用的名称）以及其他缺陷。如果其他代码正在使用该额外信息，这可能很重要。`functools.wraps`是一个简单的函数，它将原始函数（此处为`func`）的信息添加到包装函数中，因此它的行为更像原始函数。（从技术上讲，它本身就是一个装饰器，这是令人困惑的部分，但您不必担心那个细节。只要知道它是一个很好的工具，可以将属性从包装函数复制到包装函数）。

因此，当你写

```
new_function = authenticate(old_function) 
```

或更常见的

```
@authenticate
def function(...) 
```

`new_function`看起来会更像`old_function`。

# css - 标题 1 和 2 之间的间隙/空间

> ID：15893322
> 
> 赞同：0
> 
> 时间：2013-04-09T04:29:38.780
> 
> 标签：css, html, web

我试图将 h2 放在 h1 的正下方，但它似乎正在创造一个巨大的差距/空间。是否有某种方法可以避免这种情况，或者这是编码错误？谢谢你。

网站链接：http: [//younani.com/armen/musicindex.html](http://younani.com/armen/musicindex.html)

HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>

    <title>Armens website</title>
    <meta charset="utf-8">
</head>
<body>
<div class="clearfix" id="container">
<p><link rel="stylesheet" href="armen.css" /></p>
<h1><i>Four To The Floor</i></h1>
<h2>Artist Management &amp; Events</h2>
<p></p>
<h3>&ldquo;It&rsquo;s not where you take things from,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; it&rsquo;s where you take them to.&rdquo; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - Jean-Luc Godard</h3>
<div id="footer">
<p>Armen Sarkisian &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:fttfmusic@gmail.com">fttfmusic@gmail.com</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<a href="http://www.fttfmusic.com/">www.fttfmusic.com</a></p>
</div>
</div>
</body>
</html> 
```

CSS：

```
h1 {color: #FFFFFF; font-family: ballparkweiner; font-size: 70px;
text-align: center; }

@font-face {
    font-family: 'ballparkweiner';
    src: url('ballw___.eot');
    src: url('ballw___.eot?#iefix') format('embedded-opentype'),
         url('ballw___.woff') format('woff'),
         url('ballw___.ttf') format('truetype'),
         url('ballw___.svg#ballparkweiner') format('svg');
    font-weight: normal;
    font-style: normal;

}

h2 {text-align: center; font-size: 40px; color: #FFFFFF; font-family: Cambria;}

body {background-color: #000000;}

h3 {text-align: center; color: #FFFFFF; }

#footer { font-weight: bold; text-align: center; font-family: Audimat;
    clear: both; width:48%;
        border-radius: 8px;
        background-color:black;
        text-align:center; margin-right:auto;
        margin-left:auto; color: #FFFFFF; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T04:32:11.053

`h*`浏览器中的元素往往有一些 .. 相当大的默认顶部和底部边距。您可以将它们专门设置为一些较小的值，甚至为零：

```
h1, h2 {
    margin-top: 0;
    margin-bottom: 0;
} 
```

您当然可以将这些规则应用于您的特定标题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T04:32:26.943

将此添加到您的CSS：

```
h1, h2 {
    margin: 0px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T04:32:16.213

它`margin`在`h1`和上`h2`。在你的 CSS 中调整它们，例如

```
h1, h2 {margin: 0;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T04:35:35.187

代码：- 你可以试试这个

```
<div id="container" class="clearfix">
<p><link href="armen.css" rel="stylesheet"></p>
<h1 style="margin-bottom: -18px; margin-top: 0px;"><i>Four To The Floor</i></h1>
<h2 style="margin-top: 0px; margin-bottom: 0px;">Artist Management &amp; Events</h2>
<p></p>
<h3>“It’s not where you take things from,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; it’s where you take them to.” <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - Jean-Luc Godard</h3>
<div id="footer">
<p>Armen Sarkisian &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="mailto:fttfmusic@gmail.com">fttfmusic@gmail.com</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<a href="http://www.fttfmusic.com/">www.fttfmusic.com</a></p>
</div>
</div> 
```

参考这个链接[http://css-tricks.com/forums/discussion/3825/solved-h1-and-h2-tags-leaving-too-much-space/p1](http://css-tricks.com/forums/discussion/3825/solved-h1-and-h2-tags-leaving-too-much-space/p1)

# linux - 在 shell 命令中绕过文件头的通用解决方案

> ID：15893336
> 
> 赞同：3
> 
> 时间：2013-04-09T04:30:22.180
> 
> 标签：linux, shell, zsh

我广泛使用管道多个 linux shell 命令，例如：

```
grep BLAH file1 | sed 's/old/new/' | sort -k 1,1 > file3 
```

我的文件通常有一个标题行，而且我经常必须在整个管道中保留它。因此，例如，我想从第 2 行开始进行 grep、sed 和排序，同时保持第 1 行不变。

我正在寻找一些通用解决方案，给定一些命令会保留标题。我通常将标头写入管道之前的文件，然后在管道结束后将其返回。我已经开始使用 zshell，所以我想知道这是否有助于获得更简化的解决方案。

也许是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/0Bb9W.png)

（箭头是图中的管道）

但我不确定如何让它在 zshell 中工作，或者是否有可能。一个问题是我需要在两个管道上使用命令来跟进第一个管道拆分。

有什么创造性的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:48:41.577

Vaughn 和 devnull 已经指导您找到解决方案。虽然它们都包含拼写错误，但我有一些评论要添加，并建议改用它：

```
{ head -n 1 file1; tail -n +2 file1 | grep BLAH | sed 's/old/new/' | sort -k 1,1; } >file3 
```

它的作用是`file1`在一个命令的第一行（您的标头）中执行您的`grep/sed/whatever`魔术，然后在文件的其余部分（没有标头）的第二个命令中执行您的魔法，并将*组合*输出`tail -n +2`重定向到.*`file3`*

 *笔记：

*   如果您的 shell 支持，则在这种情况下，它`{ }`比`( )`构造更可取，因为它不会生成子 shell（但有时需要子 shell）。
*   `head -2`已弃用，您应该使用`-n`类似的参数`head -n 2`
*   `tail -n +2 file1`如果您绝对知道在您的标题中找不到您正在寻找的内容，您可以跳过该部分，但这样肯定更干净。

这应该适用于最新的 shell，顺便说一句（bash、ksh、zsh）。*

# android - Gettine 异常：java.lang.IllegalStateException：数据库未打开

> ID：15893338
> 
> 赞同：1
> 
> 时间：2013-04-09T04:30:31.767
> 
> 标签：android, android-sqlite

尽管这是一个常见错误，并且可能有很多与此异常相关的帖子。但这是奇怪的情况。我`java.lang.IllegalStateException: database not open`在 Android 2.2 中遇到了异常。在剩余的手机中，它运行良好。

日志猫：

```
java.lang.IllegalStateException: database not open
at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1291)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1251)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1331)
at com.mythrii.ilpa.DataHelper.checkRating(DataHelper.java:126)
at com.mythrii.ilpa.SplashActivity$1.run(SplashActivity.java:35)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:144)
at android.app.ActivityThread.main(ActivityThread.java:4937)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method) 
```

我的代码：

```
public class SplashActivity extends ActivityHelper
{
private DataHelper dh;
// Set the display time, in milliseconds (or extract it out as a configurable parameter)
private final int SPLASH_DISPLAY_LENGTH = 3000;
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.act__splash);

    dh = new DataHelper(this);

    dh.inserORupdateRating();
}

protected void onResume()
{
    super.onResume();

        new Handler().postDelayed(new Runnable()
        {
            public void run()
            {
                clearPref();
                PrefBoolEdit("rating",dh.checkRating());//=> Here is the exception
                SplashActivity.this.finish();
                Intent mainIntent = new Intent(SplashActivity.this, HomeActivity.class);
                SplashActivity.this.startActivity(mainIntent);
            }
        }, SPLASH_DISPLAY_LENGTH);

}

protected void onDestroy() 
{
    super.onDestroy();
    if (dh != null) 
    {
        dh.close();
    }
}
} 
```

我正在使用这个构造函数来调用每个活动

数据助手

```
 public DataHelper(Context context) 
   {

      this.context  =   context;
      openHelper    =   new OpenHelper(this.context);
      this.db       =   openHelper.getWritableDatabase();

      Calendar c = Calendar.getInstance();    
      formattedDate = df.format(c.getTime());
   } 
```

检查评级

```
 public boolean checkRating()
   {
       Cursor cursor = this.db.query(TABLE_NAME_1, new String[] { "option" },
               null, null, null, null, null);

       String option = null;
       //String date = null;

       boolean bool = false;

       if (cursor.moveToFirst())
          {
              do {
                  //date     = cursor.getString(0);
                  option = cursor.getString(0);

               } while (cursor.moveToNext());
          }
          if (cursor != null && !cursor.isClosed()) {
              cursor.close();
          }

          if(getRateCount()>0)
          {
              if(!option.equals(ALREADY_RATED))
              {
                  bool = true;
              }
              else 
              {
                  bool = false;
              }
          }
          else 
          {
                bool = false;
          }  
       return bool;
   } 
```

有人可以帮我吗..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:35:27.647

在执行任何操作之前，您应该打开数据库

```
dh.open(); 
```

[看到这个](http://developer.android.com/training/basics/data-storage/databases.html) 和 [这个](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:14:32.717

这可能会帮助您创建 `SQLiteOpenHelper`

```
package org.groundme.sqlite;

import org.groundme.general.General;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class TaskDatabaseHelper extends SQLiteOpenHelper {

 public static final String TAG = "TaskDatabaseHelper";
 public static final String DATABASE_NAME = "MyTask.db";
 public static final int DATABASE_VERSION = 9;

 public static final String TABLE_NAME = "tasklist";
 public static String ID="id";
 public static final String TASK_TITLE = "task_title";
 public static final String TASK_DESC = "task_desc";
 public static final String TASK_DATE = "task_date";
 public static final String TASK_TIME = "task_time";
 public static final String TASK_LOCATION = "task_location";
 public static final String TASK_LAT = "task_lat";
 public static final String TASK_LNG = "task_lng";
 public static final String TASK_STATUS = "status";
 public static final String TASK_TLBASE = "timeloc_base";
 public static final String TASK_DURATION = "task_duration";

 private static final String DATABASE_CREATE = "create table " + TABLE_NAME + "(" + 
   ID + " integer primary key autoincrement ," + 
   TASK_TITLE + " text," +
   TASK_DESC + " text," + 
   TASK_DATE + " text," + 
   TASK_TIME + " text," + 
   TASK_LOCATION + " text ," + 
   TASK_LAT + " text ," + 
   TASK_LNG + " text ," +
   TASK_STATUS + " text ," +
   TASK_TLBASE + " INTEGER default 0," +
   TASK_DURATION + " text)";

 public TaskDatabaseHelper(Context context) {
  super(context, DATABASE_NAME, null, DATABASE_VERSION);
  // TODO Auto-generated constructor stub
  Log.i(General.TAG, TAG + "constructer");
 }

 @Override
 public void onCreate(SQLiteDatabase db) {
  // TODO Auto-generated method stub

  Log.i(General.TAG, TAG + "oncreate");
  db.execSQL(DATABASE_CREATE);

 }

 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  // TODO Auto-generated method stub

  db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
  onCreate(db);

 }         

} 
```

并打开课程并访问它这可能会帮助你。

```
public class TaskData {
public TaskData(Context ctx) {
  Log.i(General.TAG, TAG + "TaskData");
  taskdbhelper = new TaskDatabaseHelper(ctx); 
```

}

```
public void open() throws SQLException {

  Log.i(General.TAG, TAG + "open");
  if (sqlitedb == null) {   
   sqlitedb = taskdbhelper.getWritableDatabase();
  }
 } 
```

}

通过创建`TaskData` `object` 您可以创建您的上下文，在这里您还可以更新、插入、删除函数传递以供进一步使用。

# c# - 检查日期时间字符串是否包含时间

> ID：15893339
> 
> 赞同：30
> 
> 时间：2013-04-09T04:30:39.837
> 
> 标签：c#, datetime, time

我遇到了一个问题。我正在从数据库中获取日期时间字符串，其中一些日期时间字符串不包含时间。但是对于新的要求，每个日期时间字符串都应该包含这样的时间，

1) `1980/10/11 12:00:01` 2) `2010/APRIL/02 17:10:00` 3)`10/02/10 03:30:34`

日期可以是任何格式，后跟时间`24hr`表示法。

我试图通过以下代码检测时间的存在，

```
string timestamp_string = "2013/04/08 17:30";
DateTime timestamp = Convert.ToDateTime(timestamp_string);
string time ="";

if (timestamp_string.Length > 10)
{
    time = timestamp.ToString("hh:mm");
}
else {
    time = "Time not registered";
}

MessageBox.Show(time); 
```

但这仅适用于 No`1)`类型的时间戳。我可以知道如何完成这个关于如何检测时间元素是否存在于这个日期时间字符串中的任务。非常感谢你 ：）

**可能的匹配** [如何验证“日期和时间”字符串是否只有时间？](https://stackoverflow.com/questions/7420399/how-to-validate-if-a-date-and-time-string-only-has-a-time)

**INFO**`Arun Selva Kumar` , `Guru Kara`,提供的三个答案`Patipol Paripoonnanonda`都是正确的，并且检查了时间并符合我的目的。但我`Guru Kara`仅出于易用性和他给出的解释而选择答案。非常感谢：）非常感谢你们所有人：）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-09T05:07:39.450

日期时间组件[TimeOfDay](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)是您所需要的。

MSDN 说*“与 Date 属性不同，它返回一个 DateTime 值，该值表示没有其时间分量的日期，TimeOfDay 属性返回一个表示 DateTime 值的时间分量的 TimeSpan 值。”*

这是一个考虑了所有场景的示例。
由于您确定可以使用的格式，`DateTime.Parse`否则请使用`DateTime.TryParse`

```
var dateTime1 = System.DateTime.Parse("1980/10/11 12:00:00");
var dateTime2 = System.DateTime.Parse("2010/APRIL/02 17:10:00");
var dateTime3 = System.DateTime.Parse("10/02/10 03:30:34");
var dateTime4 = System.DateTime.Parse("02/20/10");

if (dateTime1.TimeOfDay.TotalSeconds == 0) {
    Console.WriteLine("1980/10/11 12:00:00 - does not have Time");
} else {
    Console.WriteLine("1980/10/11 12:00:00 - has Time");
}

if (dateTime2.TimeOfDay.TotalSeconds == 0) {
    Console.WriteLine("2010/APRIL/02 17:10:00 - does not have Time");
} else {
    Console.WriteLine("2010/APRIL/02 17:10:00 - Has Time");
}

if (dateTime3.TimeOfDay.TotalSeconds == 0) {
    Console.WriteLine("10/02/10 03:30:34 - does not have Time");
} else {
    Console.WriteLine("10/02/10 03:30:34 - Has Time");
}

if (dateTime4.TimeOfDay.TotalSeconds == 0) {
    Console.WriteLine("02/20/10 - does not have Time");
} else {
    Console.WriteLine("02/20/10 - Has Time");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-09T04:38:42.227

试试这个，

```
DateTime myDate;
if (DateTime.TryParseExact(inputString, "dd-MM-yyyy hh:mm:ss", 
    CultureInfo.InvariantCulture, DateTimeStyles.None, out myDate))
{
    //String has Date and Time
}
else
{
    //String has only Date Portion    
} 
```

您可以尝试使用此处列出的其他格式说明符， http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-26T12:37:16.677

将[Guru Kara](https://stackoverflow.com/users/386161/guru-kara "Guru Kara 的个人资料")和[Patipol Paripoonnanonda](https://stackoverflow.com/users/2236933/patipol-paripoonnanonda "Patipol Paripoonnanonda 的 SO 个人资料")的答案与 .net 全球化 API 相结合，可以得出：

```
bool HasExplicitTime(DateTime parsedTimestamp, string str_timestamp)
{
    string[] dateTimeSeparators = { "T", " ", "@" };
    string[] timeSeparators = {
        CultureInfo.CurrentUICulture.DateTimeFormat.TimeSeparator,
        CultureInfo.CurrentCulture.DateTimeFormat.TimeSeparator,
        ":"};

    if (parsedTimestamp.TimeOfDay.TotalSeconds != 0)
        return true;

    string[] dateOrTimeParts = str_timestamp.Split(
            dateTimeSeparators,
            StringSplitOptions.RemoveEmptyEntries);
    bool hasTimePart = dateOrTimeParts.Any(part =>
            part.Split(
                    timeSeparators,
                    StringSplitOptions.RemoveEmptyEntries).Length > 1);
    return hasTimePart;
} 
```

这种方法：

*   检测明确的午夜时间（例如“2015-02-26T00:00”）；
*   `TimeOfDay`仅在指示午夜或没有明确时间时搜索字符串；和
*   查找本地格式的显式午夜时间和 .net 可以解析的任何格式的任何非午夜时间。

限制：

*   未检测到非文化本地格式的明确午夜时间；
*   未检测到少于两个部分的明确午夜时间；和
*   不如 Guru Kara 和 Patipol Paripoonnanonda 的方法简单和优雅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-06T21:11:04.900

这就是我现在要做的。它可能并不完美，但可能比将任何 12am 日期时间视为没有时间更好。前提是，如果我最后加上一个完整的时间规范，它会解析它是否只是一个日期，但如果它已经有一个时间组件则失败。

我不得不假设不存在包含 7 个或更少非空白字符的有效日期/时间。似乎“1980/10”解析，但不是“1980/10 01:01:01.001”。

我已经包含了各种测试用例。随意添加你自己的，如果他们失败了，请告诉我。

```
public static bool IsValidDateTime(this string dateString, bool requireTime = false)
{
    DateTime outDate;
    if(!DateTime.TryParse(dateString, out outDate)) return false;

    if (!requireTime) return true;
    else
    {
        return Regex.Replace(dateString, @"\s", "").Length > 7 
&& !DateTime.TryParse(dateString + " 01:01:01.001", out outDate);
    }
}

public void DateTest()
{
    var withTimes = new[]{
    "1980/10/11 01:01:01.001",
    "02/01/1980 01:01:01.001",
    "1980-01-01 01:01:01.001",
    "1980/10/11 00:00",
    "1980/10/11 1pm",
    "1980-01-01 00:00:00"};

    //Make sure our ones with time pass both tests
    foreach(var date in withTimes){
        Assert.IsTrue(date.IsValidDateTime(), String.Format("date: {0} isn't valid.", date));
        Assert.IsTrue(date.IsValidDateTime(true), String.Format("date: {0} does have time.", date));
    }

    var withoutTimes = new[]{
    "1980/10/11",
    "1980/10",
    "1980/10 ",
    "10/1980",
    "1980 01",
    "1980/10/11 ",
    "02/01/1980",
    "1980-01-01"};

    //Make sure our ones without time pass the first and fail the second
    foreach (var date in withoutTimes)
    {
        Assert.IsTrue(date.IsValidDateTime(), String.Format("date: {0} isn't valid.", date));
        Assert.IsFalse(date.IsValidDateTime(true), String.Format("date: {0} doesn't have time.", date) );
    }

    var bogusTimes = new[]{
    "1980",
    "1980 01:01",
    "80 01:01",
    "1980T01",
    "80T01:01",
    "1980-01-01T01",
    };

    //Make sure our ones without time pass the first and fail the second
    foreach (var date in bogusTimes)
    {
        DateTime parsedDate;
        DateTime.TryParse(date, out parsedDate);
        Assert.IsFalse(date.IsValidDateTime(), String.Format("date: {0} is valid. {1}", date, parsedDate));
        Assert.IsFalse(date.IsValidDateTime(true), String.Format("date: {0} is valid. {1}", date, parsedDate));
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T05:14:58.233

日期和时间总是用空格键隔开。最简单的方法是：

```
if (timestamp_string.Split(' ').Length == 2)
{
    // timestamp_string has both date and time
}
else
{
    // timestamp_string only has the date
} 
```

此代码假定日期始终存在。

如果您想进一步了解（如果日期不存在），您可以执行以下操作：

```
if (timestamp_string.Split(' ')
                    .Select(item => item.Split(':').Length > 1)
                    .Any(item => item))
{
    // this would work for any string format that contains date, for example:
    // 2012/APRIL/03 12:00:05 -> this would work
    // 2013/04/05 09:00:01 -> this would work
    // 08:50:45 2013/01/01 -> this would also work
    // 08:50:50 -> this would also work
}
else
{
    // no date in the timestamp_string at all
} 
```

希望这可以帮助！

# php - 限制对通常通过 AJAX 访问的远程 PHP 页面的伪造访问

> ID：15893341
> 
> 赞同：-1
> 
> 时间：2013-04-09T04:30:43.783
> 
> 标签：php, ajax, drupal

我正在建立一个有一点投票系统的 Drupal 站点。我有一个 PHP 页面，它接受参数并相应地更新投票数据库。如何允许通过我的 Drupal 站点上的此 AJAX 访问此页面，但以其他方式限制外部用户访问此 URL 以防止伪造投票？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:34:17.233

AJAX == 常规 HTTP 请求。您无法将 AJAX 请求与“正常访问”区分开来。没有办法阻止这种情况。

为了防止错误投票，您需要在投票系统中建立这种安全性。需要注册、使用会话和随机数或任何必要的东西。但试图“阻止非 AJAX 请求”并不是解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:26:16.953

您可以依赖`'X-Requested-With: XMLHttpRequest'`大多数标准浏览器附加到每个 Ajax 请求的 HTTP 标头。

然而，正如@deceze 指出的那样，它远没有被认为是“安全的”。通过使用 Fiddler 或以编程方式发出包含此标头的“正常”http 请求非常容易。

如果只需要通过简单刷新浏览器地址栏来限制投票，只需更改脚本以使用 http`POST`动词获取投票值。

# android - 在android中获取当前位置和选定地点之间的距离

> ID：15893344
> 
> 赞同：5
> 
> 时间：2013-04-09T04:30:55.987
> 
> 标签：android, geolocation, android-mapview, android-location

我是 android 开发的新手，我想制作一个应用程序，比如在 MapView 上给我当前位置和选定位置之间的距离。

请给我一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:36:17.700

**使用android获取当前位置和选定地点之间的距离。**

```
public static double distFrom(
    double lat1, double lng1, double lat2, double lng2)
{
    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1); 
    double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) * 
        Math.sin(dLng/2) * Math.sin(dLng/2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    double dist = earthRadius * c; 

    return dist; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T03:29:55.383

只有几行代码：

```
Location l1=new Location("One");
l1.setLatitude(location.getLatitude());
l1.setLongitude(location.getLongitude());

Location l2=new Location("Two");
l2.setLatitude(Double.parseDouble(frnd_lat));
l2.setLongitude(Double.parseDouble(frnd_longi));

float distance_bw_one_and_two=l1.distanceTo(l2); 
```

# javascript - 如何用 Javascript 写入表格？

> ID：15893345
> 
> 赞同：1
> 
> 时间：2013-04-09T04:30:58.213
> 
> 标签：javascript, html, html-table, getelementbyid

```
<Script>
function getExperience()
{
    var xp = document.getElementById('txt_XP').value;
    document.getElementByID("plank").innerHTML = xp/30;
}
</Script> 
```

所以这是我的代码，我的问题是我似乎无法用 id 的 planl、oakPlank、teakPlank 和 mahoganyPlank 覆盖表中的数据。我在想我可能对以前做过这种事情的人犯了一个明显的错误，但我似乎无法理解。非常感谢任何帮助，如果有帮助，这里是我的表格片段：

```
<tr>
    <td>Plank</td>
    <td id="plankXP">30</td>
    <td id="plank">0</td>
</tr> 
```

编辑：我没有意识到这可能是相关的，我的错。这是我用来获取输入的表单，在发出警报以查看它是否可以检索 XP 后，它运行正常：

```
<form name="experience" id="experience_frm" action="#">
    Experience: <input type="text" name="XP" id="txt_XP"/>
    <input type="submit" value="Go" onclick="getExperience();"/>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T04:42:30.877

你使用了错误的`document`方法。Javascript 区分大小写。你用过：

```
document.getElementByID 
```

用于获取`id="plank"`元素。但是你需要使用：

```
document.getElementById 
```

注意`d`（最后一个字符）的变化。

通过此更改，一个简单的示例对我有用：

[http://jsfiddle.net/wqZAq/](http://jsfiddle.net/wqZAq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:45:49.540

试试这个

```
<Script>
function getExperience()
{
    var xp = document.getElementById('txt_XP').value;
    var newxp = parseInt(xp);
    var div = newxp/30;
    document.getElementById("plank").innerHTML = div;
}
</Script>
<table>
<tr>
    <td>Plank</td>
    <td id="plankXP">30</td>
    <td id="plank">0</td>
</tr>
</table>
<input type="text" id="txt_XP" name="txt_XP" />
<input type="button" onclick="getExperience();" /> 
```

# dns - HTTP_HOST 中的 IP 地址

> ID：15893351
> 
> 赞同：1
> 
> 时间：2013-04-09T04:31:28.953
> 
> 标签：dns, drupal-7, http-host

我有一个 drupal 站点，我在其中使用使用入站 HTTP_HOST 变量工作的域访问模块。我还必须创建一些子域。为了使这个模块正常工作，$_SERVER['HTTP_HOST'] 变量应该在其中包含域名。但是我得到了我们服务器的 IP 地址。所以我的网站无法正常工作。我正在获取主站点。但子域无法正常工作。全部都指向主站点。

我的网站在我们的服务器上，我们要求主机将我们的域名指向 172.XX.XXX/drupal。我们的子域也指向 172.XX.XXX/drupal。因此，当我输入域名时，它显示的是站点，但 http_host 中有 IP。我们有一个 VPS 主机计划。我应该怎么做才能使其正常工作。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:05:48.127

事情看起来很容易。您只需要告诉您的域名托管服务提供商将您的所有子域指向 172.xxx。ip/drupal。

```
some examples.

a.yourdomain.com => actuall would point to 172.xxx/drupal.

b.yourdomain.com => actuall would point to 172.xxx/drupal.

c.yourdomain.com => actuall would point to 172.xxx/drupal. 
```

之后，您的域访问模块将自动处理您对内容的子域明智访问。注意：从技术上讲，域访问模块将根据您当前的子域名显示内容。

# jsf - 如何将 jboss seam 从 1.1 升级到 2.0？

> ID：15893365
> 
> 赞同：1
> 
> 时间：2013-04-09T04:32:44.747
> 
> 标签：jsf, upgrade, jboss-seam

我们有使用 Jboss seam 1.1 的遗留应用程序。现在我们需要迁移到 jboss seam 2.0，因为我们正在将应用程序从 JSF 1.1 迁移到 JSF 1.2（seam 1.1 支持 JSF 1.1，而 seam 2.0 支持 JSF 1.2）。

进行此迁移需要哪些步骤？我查看了他们的文档和网络，但找不到任何解释这种迁移的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:02:27.140

请参阅[Seam 参考指南](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Web_Platform/5/html/Seam_Reference_Guide/)中的[“第 4 章。从 Seam 1.2 迁移到 Seam 2”](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/4.3/html/Seam_2_Reference_Guide/migration.html)和[“第 2 章。迁移”](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Web_Platform/5/html/Seam_Reference_Guide/Migration.html)。

# r - 位于 R 中的两个元素之间

> ID：15893370
> 
> 赞同：-1
> 
> 时间：2013-04-09T04:32:58.307
> 
> 标签：r

我想检查向量的元素

```
 a = c(0.15, 1.5, 11, 15, 22) 
```

在向量的元素之间

```
 b =c(0, 3, 5, 10, 20, 25) 
```

这意味着它是否是向量`a`的第二个和第三个元素之间的向量的第二个元素`b`，...但不检查 的第一个元素`a`。

我怎样才能在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:56:49.230

以下给出了您想要的：

```
larger <- a[1:length(a)] > b[1:(length(b)-1)]
smaller <- a[1:length(a)] < b[2:length(b)]
between <- larger & smaller
between[1] <- FALSE
a[between] 
```

首先检查 a 中的元素是否小于 b 中的相应元素。然后选择它们是否小于 b 中的下一个元素。将两者结合起来，首先删除不需要的。多田。

# linux-kernel - 如何获取已注册的文件系统列表？

> ID：15893374
> 
> 赞同：0
> 
> 时间：2013-04-09T04:33:26.667
> 
> 标签：linux-kernel

在使用“ddd vmlinux /proc/kcore”调试 linux 内核 3.6.11 时，fs/filesystems.c 中的“file_systems”列表显示为空，包含地址 0x0。

它应该包含所有已注册文件系统的 file_system_type 结构。

为什么列表是空的，或者我在哪里可以看到已注册文件系统的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:40:22.073

为此不需要调试内核。有一个提供信息的 proc API：

```
cat /proc/filesystems 
```

# c# - C# 到 ASP.NET MVC 文件流交叉

> ID：15893387
> 
> 赞同：5
> 
> 时间：2013-04-09T04:34:33.927
> 
> 标签：c#, asp.net-mvc

我已经用 C# 编写了代码并将结果打印到终端以确认它正在工作。我目前正在将一些代码转移到 MVC 4 控制器，并且我已经能够连续合并其中的大部分，但是我遇到了一个部分的问题。

我希望读取一个数据库文件（database.dat），然后我希望写入同一个文件。

在我的控制器中，我有：

> 使用 (FileStream stream = File.OpenRead("database.dat")) 数据库 = (List)formatter.Deserialize(stream);

和

> 使用 (Stream stream = File.Open("database.dat", FileMode.Create)) formatter.Serialize(stream, database);

在这两种情况下，File.OpenRead 和 File.Open 中的“文件”都带有下划线，我收到错误消息：

> 'System.Web.Mvc.Controller.File(byte[], string)' 是一个'方法'，在给定的上下文中是无效的......"

有没有办法在 MVC 中实现相同的结果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T04:39:04.667

如果要在( [http://msdn.microsoft.com/en-us/library/system.io.file.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.aspx) )中使用`File`该类，则必须添加完全限定名称。所以这样的事情应该有效：`System.IO`

```
using (FileStream stream = System.IO.File.OpenRead("database.dat")){
    database = (List)formatter.Deserialize(stream);
} 
```

# c# - 在单个 ItemsControl 中按序数“对齐”两个单独列表的最有效方法是什么？

> ID：15893390
> 
> 赞同：3
> 
> 时间：2013-04-09T04:34:48.993
> 
> 标签：c#, wpf, itemscontrol

出于本示例的目的，过度简化了我们的模型，假设我们有两个数据列表 ListA 和 ListB，它们的类型都是`List<string>`。从数据的角度来看，它们是不相关的。ListA 和 ListB 可以独立添加、删除或更新。

我们要做的是在同一个列表中同时显示它们，按序号位置对齐。

我们的第一种方法是创建一个新的 ListMapping 对象，如下所示：

```
public class ListMapping
{
    public int Index{ get; set; }
    public string StringA{ get; set; }
    public string StringB{ get; set; }
} 
```

然后在 ListA 和 ListB 的序数位置“x”处创建一个`List<ListMapping>`关联的字符串，我们将像这样初始化它：

```
var MappedList = new List<ListMapping>();
var maxItems = Math.Max(ListA.Count, ListB.Count);
for(int index = 0; index < maxItems; index++)
{
    var lm = new ListMapping(){
        Index   = index,
        StringA = (index < ListA.Count) ? ListA[index] : null;
        StringB = (index < ListB.Count) ? ListB[index] : null;
    }
    MappedList.Add(lm);
} 
```

这种方法的问题是我们必须手动管理这个新的 ListMap 对象列表。如果从 ListB 中删除了一个项目，那么我们需要手动将所有 ListMapping.StringB 属性上移一个位置以与新的 ListMapping.StringA“重新对齐”。与插入等相同。

我们的下一个方法是实际上不将字符串值存储在 ListMapping 中，只存储索引，并让 getter 直接从底层列表返回值，就像这样......

```
public class ListMapping
{
    public int Index{ get; set; }
    public string StringA{ get{ (Index < ListA.Count) ? ListA[Index] : null; } }
    public string StringB{ get{ (Index < ListB.Count) ? ListB[Index] : null; } }
} 
```

然后我们会`List<ListMapping>`像这样初始化对象......

```
var MappedList = new List<ListMapping>();
var maxItems = Math.Max(ListA.Count, ListB.Count);
for(int index = 0; index < maxItems; index++)
{
    var lm = new ListMapping(){
        Index   = index
    }
    MappedList.Add(lm);
} 
```

使用这种设计，我们只需要触发任何 ListMapping 的 StringA 和 StringB 属性的属性更改通知，其索引可能会受到 ListA 或 ListB 上的操作的影响。绝对更干净，没有对源对象的引用，但现在他们必须引用 List 对象本身。另外，我们仍然需要手动管理 ListMapping 项目的整体列表，以确保始终至少有 'maxItems' 个项目。更好，但并不理想。

我不禁想知道是否有一种方法可以构造一个 ItemsControl 以具有两个 ItemsSource 属性，然后用它的布局面板和 ItemContainerGenerator 做一些聪明的事情，但这似乎就像我会在 UI 中做我已经在做的事情在数据中。

那么，关于解决这个问题的方法有什么想法吗？

# android - LayoutInflater类的inflate方法中的第二个参数怎么用，Android

> ID：15893403
> 
> 赞同：8
> 
> 时间：2013-04-09T04:36:00.520
> 
> 标签：android, android-arrayadapter, layout-inflater

抽象类的 inflate 方法`LayoutInflater`具有作为`ViewGroup`root 的 inflate 方法的第二个参数。从文档中，它被称为“作为生成层次结构的父级的可选视图”。

有人可以举例说明如何使用此参数吗？你会在里面放什么？A`ViewGroup`可以是任何类型的布局，例如`LinearLayout`.

我不太明白如何处理这个参数。如果您正在膨胀的视图不是在此处输入的布局的一部分，那么它将给出错误。不明白它的目的。

更多来自文档：

`public View inflate (XmlPullParser parser, ViewGroup root)`

`Added in API level 1 Inflate a new view hierarchy from the specified xml node. Throws InflateException if there is an error.`

出于性能原因，视图膨胀在很大程度上依赖于在构建时完成的 XML 文件的预处理。因此，目前无法在运行时使用`LayoutInflater`纯`XmlPullParser`XML 文件。

参数解析器 XML dom 节点包含视图层次结构的描述。

root 可选视图，作为生成的层次结构的父级。返回 膨胀层次结构的根视图。如果提供了 root，则这是根视图；否则它是膨胀的 XML 文件的根。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:37:11.723

inflate 方法返回膨胀 xml 的父 View

*   如果您不传递根 ViewGroup， 则会返回 **膨胀的 xml 根 View**

*   如果您传递根 ViewGroup，则将返回根 ViewGroup**的根 View**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:44:42.520

老实说，我不确定其中的哪一部分让你感到困惑。您可以传入任何 ViewGroup，作为您动态创建的视图的父级。

例如：

```
private static View mView = inflater.inflate(R.layout.fragment_featured, container, false); 
```

这将膨胀容器内的 fragment_featured xml 文件中包含的布局（作为父级）。容器 ViewGroup 的类型取决于您。

# ruby - 使用 Filepicker.io 和 Capybara 进行功能测试

> ID：15893407
> 
> 赞同：1
> 
> 时间：2013-04-09T04:36:22.580
> 
> 标签：ruby, rspec, capybara, filepicker.io, poltergeist

我目前正在对 Filepicker.io 上传表单进行功能测试，但无法让文件上传正常工作。我正在为 Capybara 使用[Poltergeist](https://github.com/jonleighton/poltergeist)驱动程序，并且从我能够进行的调试中，Filepicker iframe 永远不会加载。我已经通过使用 Poltergeist 的远程调试确认了这一点。

这是测试代码的示例：

```
within_fieldset 'Photos' do
  click_button 'Find Photo'
end
within_frame 'filepicker_dialog' do
  attach_file '#fileUploadInput', Rails.root.join('spec', 'files', 'photo.jpg')
end 
```

并产生错误：

```
Failure/Error: within_frame '#filepicker_dialog' do
 Capybara::Poltergeist::TimeoutError:
   Timed out waiting for response to {"name":"push_frame","args":["#filepicker_dialog"]}. It's possible that this happened because something took a very long time (for example a page load was slow). If so, setting the Poltergeist :timeout option to a higher value will help (see the docs for details). If increasing the timeout does not help, this is probably a bug in Poltergeist - please report it to the issue tracker. 
```

尝试通过 javascript 控制台手动触发 Filepicker 也不会产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T15:11:53.510

你试过增加超时吗？

```
Capybara.javascript_driver = :poltergeist
Capybara.register_driver :poltergeist do |app|
  Capybara::Poltergeist::Driver.new(app, {:timeout => 50})
end 
```

因为默认超时是 30

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:04:06.230

Capybara API`within_frame`有点奇怪。它需要一个框架*名称*，而不是框架的 CSS 选择器。所以 Poltergeist 正在寻找一个名为“#filepicker_dialog”的框架——我怀疑这是你的问题。

# mysql - 获取与查询字符串匹配的所有记录，并像谷歌建议的谷歌一样显示

> ID：15893414
> 
> 赞同：0
> 
> 时间：2013-04-09T04:37:38.167
> 
> 标签：mysql, sql, django, django-models

我想做的是，有点类似于谷歌建议。我的客户端页面将通过 ajax 将搜索文本提交到服务器。服务器将抓取该文本并查询与该字符串匹配的所有记录并返回到客户端页面。

**例如** text_frm_client = "Ba"。查询将显示所有以“Ba”开头的记录

* * *

实现我的问题的原始 sql 查询是

```
 **Select * from table_name where column1 LIKE "Ba%" or column2 LIKE "Ba%"** 
```

* * *

现在我想将此查询移植到 django 模型。我发现的有点相似。 [https://docs.djangoproject.com/en/dev/ref/models/querysets/#std:fieldlookup-contains](https://docs.djangoproject.com/en/dev/ref/models/querysets/#std:fieldlookup-contains)

但这仅适用于一个领域。如何使用 django 模型完成 sql 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:42:01.130

您可以使用`Q`

```
data = MyModel.objects.filter(
        Q(column1__contains="Ba") | 
        Q(column2__contains="Ba")
        ) 
```

# php - Codeigniter - 使用 codeigniter 钩子在站点范围内获取数据

> ID：15893418
> 
> 赞同：1
> 
> 时间：2013-04-09T04:38:10.077
> 
> 标签：php, codeigniter

我试图从数据库中获取网站任何页面中的滚动新闻，而不必在网站的每个控制器中传递变量。所以我决定使用钩子而不是在每个控制器中传递滚动变量。

我确实创建了一个这样的类

```
class Scroll
{

 function getScroller()
 {

  $data = array();

  $CI =& get_instance();

  $CI->db->where('a_status','active');
  $CI->db->limit(4);
  $CI->db->order_by('id','desc');

  $Q = $CI->db->get('news');
  if($Q->num_rows() > 0){
    foreach($Q->result_array() as $row){
        $data[] = $row;
    }
  }
  $Q->free_result();
  return $data;
 }

} 
```

我现在得到的是

```
Severity: Notice

Message: Trying to get property of non-object
Call to a member function get() on a non-object in E:\xampp\htdocs\ 
```

谁能帮我怎么做？谢谢，我想在任何控制器的视图中自动获取滚动新闻，而无需传入每个控制器。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:09:37.757

如果您在视图级别上定义它，则无需这样做。

您可以直接在视图中定义数据库请求。

其他方法是使用具有单独视图的分离控制器并通过 iframe 将其加载到页面中。它通常用于稍后可以加载到另一个页面的“网络小部件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:10:04.020

扩展 CI Controller 的核心类应该会给你带来更少的麻烦。 [http://ellislab.com/codeigniter/user-guide/general/core_classes.html](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

*应用程序/核心/MY_Controller.php*

```
class MY_Controller extends CI_Controller {

    public function __construct() {
        parent::__construct();

        //By do this, all controllers who use this class as parent controller
        //will have $news in their views
        $this->load->vars(array( 
             'news' =>  array()
        ));
    }   
} 
```

*应用程序/控制器/welcome.php*

 *```
class Welcome extends MY_Controller {

    public function index()
    {       
        $this->load->view('welcome_message');
    }
} 
```* 

*应用程序/视图/welcome_message.php*

```
var_dump($news); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:36:58.343

使用分离的库或助手并在控制器的构造上调用该方法，例如：

```
class My_Controller extends CI_Controller(){

    function __construct(){
      parent::__construct();
    //load your library
    //call your library method
    }
    } 
```

# .net - 无法加载文件或程序集 Microsoft.Office.Interop.Excel

> ID：15893419
> 
> 赞同：1
> 
> 时间：2013-04-09T04:38:12.610
> 
> 标签：.net, .net-assembly

我已经在安装了 Windows server 2008 r2、iis 7 和 .net framework 3.5.1 的虚拟机上部署了一个网站。

我一直收到以下错误。

=========================================

```
Server Error in '/' Application.

Configuration Error

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Could not load file or assembly 'Microsoft.Office.Interop.Excel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' or one of its dependencies. The system cannot find the file specified.

Source Error: 

Line 46:                <add assembly="stdole, Version=7.0.3300.0, Culture=neutral , PublicKeyToken=B03F5F7F11D50A3A"/>
Line 47:                <!--<add assembly="Microsoft.Office.Interop.Excel, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71E9BCE111E9429C"/>-->
Line 48:                <add assembly="Microsoft.Office.Interop.Excel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" /></assemblies>
Line 49:        </compilation>
Line 50:     

Source File: C:\TFareDemo\web.config    Line: 48 

Assembly Load Trace: The following information can be helpful to determine why the assembly 'Microsoft.Office.Interop.Excel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' could not be loaded.

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

Version Information: Microsoft .NET Framework Version:2.0.50727.5466; ASP.NET Version:2.0.50727.5456 
```

==================================================== ======= 该应用程序具有生成 Excel 报告的功能。我还没有安装 Office，所以我在启动网站时遇到了麻烦。

1.  我已经尝试过很多事情，比如安装 .net framework 1.1 可再发行包。
2.  我还安装了 Office Open XML，因为我在某处阅读它可能会解决问题。

请帮我解决一下这个。我的网站是使用 vs 2005 开发的，我没有在上面提到的虚拟机上安装 vs 2005。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:23:25.433

> 我还没有安装Office

您需要在执行 Excel 处理代码的机器上安装 MS Office（或至少是 Excel）。没有 Excel，它就不会神奇地工作。

# php - 更改数组以显示 the_title Wordpress

> ID：15893420
> 
> 赞同：0
> 
> 时间：2013-04-09T04:38:15.360
> 
> 标签：php, wordpress

我目前有

```
 <?php 
    $attr = array(
        'title' => 'here is a title',
        'alt' => 'here is a alt attribute'
    );
?>
    div class="s-o-column">
        <div class="s-o-thumb"><a href="<?php echo $termlink; ?>"><?php echo wp_get_attachment_image( $term->image_id, 'standard-options-thumb',  false, $attr  ); ?></a>
        <div class="s-o-title"><a href="<?php echo $termlink; ?>"><?php echo $term->name; ?></a></div>
    </div>
</div> 
```

我如何更改它，以便说出标题和 alt；`<?php the_title(); ?>`而不是“这是一个标题”或“这是一个 alt 属性”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:07:17.913

您应该使用[`get_the_title()`](http://codex.wordpress.org/Function_Reference/get_the_title)而不是[`the_title()`](http://codex.wordpress.org/Function_Reference/the_title)因为`get_the_title()`在回显标题时返回标题`the_title()`。

```
$attr = array(
    'title' => get_the_title(),
    'alt' => 'here is a alt attribute'
); 
```

# java - 使用嵌入式 Jetty 将参数传递给资源

> ID：15893421
> 
> 赞同：4
> 
> 时间：2013-04-09T04:38:20.897
> 
> 标签：java, dependency-injection, jersey, jetty, inversion-of-control

我有一个要公开的资源，它有一个带有注入参数的构造函数。但是我没有使用任何注入框架，并且我已经嵌入了 Jetty。

现在 Jetty 使用以下方法扫描资源：

```
ServletContextHandler servletContextHandler = new ServletContextHandler(server, "/server");
ServletHolder jerseyServletHolder = new ServletHolder(ServletContainer.class);
jerseyServletHolder.setInitParameter("com.sun.jersey.config.property.packages", "my.package.to.scan");
servletContextHandler.addServlet(jerseyServletHolder, "/*"); 
```

但它阻止我在构造函数中注入任何东西，所以我必须使用默认构造函数。

我想指定我自己的实例以传递给我的资源构造函数。有没有办法手动实例化资源并将其添加到 servlet 容器中？

是否可以做这样的事情：

```
MyRestResource resource = new MyRestResource(param1, param2);
servletContextHandler.addServlet(resource); 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-19T23:01:56.743

您可以通过使用自定义 ResourceConfig 注册 (Jersey) ServletContainer 来将依赖项注入 Jersey 资源。请查看下面的代码作为创建 TimeResource 类的示例，该类通过构造函数注入时钟。

```
public void start() {
    server = new Server(6666);
    ServletContextHandler handler = new ServletContextHandler();
    handler.setContextPath("");
    // adds Jersey Servlet with a customized ResourceConfig
    handler.addServlet(new ServletHolder(new ServletContainer(resourceConfig())), "/*");
    server.setHandler(handler);
    try {
        server.start();
    } catch (Exception e) {
        throw new RuntimeException("Could not start the server", e);
    }
}

private ResourceConfig resourceConfig() {
    // manually injecting dependencies (clock) to Jersey resource classes
    return new ResourceConfig().register(new TimeResource(clock));
} 
```

包含源代码的完整示例可在以下位置获得：

[http://unclejamal.github.io/2013/09/18/manual-dependency-injection-with-jersey-and-embedded-jetty.html](http://unclejamal.github.io/2013/09/18/manual-dependency-injection-with-jersey-and-embedded-jetty.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:35:26.773

如果`MyRestResource`是 a `Servlet`，那么您可以使用[现有的 servlet holder 构造函数](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/servlet/ServletHolder.html#ServletHolder%28javax.servlet.Servlet%29)。

```
ServletContextHandler servletContextHandler = new ServletContextHandler(server, "/server");
ServletHolder jerseyServletHolder = new ServletHolder(ServletContainer.class);
jerseyServletHolder.setInitParameter("com.sun.jersey.config.property.packages", "my.package.to.scan");
servletContextHandler.addServlet(jerseyServletHolder, "/*");
MyRestResource resource = new MyRestResource(param1, param2);
// wrap resource in a ServletHolder
ServletHolder resourceHolder = new ServletHolder(resource);
// assign resource to a Servlet pathSpec
servletContextHandler.addServlet(resourceHolder, "/rest"); 
```

如果您有一个 servlet，并且想在启动时访问某些设置，请使用[ContextHandler.setAttribute(String, Object)](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/server/handler/ContextHandler.html#setAttribute%28java.lang.String,%20java.lang.Object%29)和[ServletContext.getAttribute(String)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getAttribute%28java.lang.String%29)技术。

在你的服务器启动中

```
ServletContextHandler servletContextHandler = new ServletContextHandler(server, "/server");
ServletHolder jerseyServletHolder = new ServletHolder(ServletContainer.class);
jerseyServletHolder.setInitParameter("com.sun.jersey.config.property.packages", "my.package.to.scan");
servletContextHandler.addServlet(jerseyServletHolder, "/*");
MyRestResource resource = new MyRestResource(param1, param2);
// Set resource as a context attribute
servletContextHandler.setAttribute("rest-1", resource); 
```

然后访问是稍后从 servlet api

```
ServletContext ctx = servletRequest.getServletContext();
MyRestResource resource = (MyRestResource) ctx.getAttribute("rest-1"); 
```

# java - 仅保存最后一次鼠标单击坐标的变量

> ID：15893424
> 
> 赞同：0
> 
> 时间：2013-04-09T04:38:40.673
> 
> 标签：java, awt, mouseevent

这就是我想要完成的。我希望一个项目显示在屏幕上鼠标单击的最后一个位置。目前它有点工作，但每次我点击其他地方时，所说的项目也会移动到那里。我只是希望它是静态的。

这是一些代码：

全局变量 px 和 py。用于按住鼠标点击：

```
private int px = 250; // initial coordinates
private int py = 250; 
```

鼠标点击输入全局 px 和 py：

```
private void testPress(int x, int y) {
    if (!isPaused && !gameOver) {
        // do something..
        px = x;
        py = y;
        girlP.setDestination((px-(girlP.getImage().getWidth(this)/2)), 
                (py-(girlP.getImage().getHeight(this)/2)));

        //System.out.println(px + ", " + py);
    }
} 
```

px 和 py 会不断更新新值。我想要的是一种只按住最后一次鼠标点击的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:07:46.253

请参阅[此问题](https://stackoverflow.com/questions/1695376/msie-and-addeventlistener-problem-in-javascript)以了解如何侦听鼠标事件

您可以使用`event.clickX`and`event.clickY`获取您监听鼠标点击的元素内的坐标，或使用`event.screenX`and`event.screenY`获取文档内的绝对鼠标坐标。

# xml - 使用 Google Refine 解析 XML

> ID：15893426
> 
> 赞同：1
> 
> 时间：2013-04-09T04:38:42.803
> 
> 标签：xml, parsing, google-refine

我正在使用 Google-refine 从 Google 地图下载信息。更具体地说，我想要与给定地址关联的纬度/经度。我已经成功下载了 XML 信息，但是解析它的时间很糟糕。典型的条目如下所示：

[http://maps.googleapis.com/maps/api/geocode/xml?address=543+Boler+Rd,+London,+Ontario&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=543+Boler+Rd,+London,+Ontario&sensor=false)

我的问题是：如何使用 GREL 语言从该输出中提取纬度（或经度值）。

提前致谢，

卡洛斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-27T13:58:15.967

这是一个老问题，我显然第一次错过了，但为了历史记录，你可以这样做：

```
value.parseHtml().select('location lat')[0].ownText().trim().toNumber() 
```

关键的见解是 HTML 解析器也可用于解析 XML。XML 包括边界框信息以及（质心？）点位置，因此请务必使您的选择器表达式足够具体，以获得您想要的。

# oracle - Oracle查询以获取列中所有CAPS的所有条目

> ID：15893427
> 
> 赞同：1
> 
> 时间：2013-04-09T04:38:53.727
> 
> 标签：oracle

我试图找到一个查询，它只获取具有所有大写数据条目的行。我使用了下面的代码

`Select * from Table where REGEXP_LIKE(column, [A-Z]) order by Column`

上面的代码虽然不起作用。

**数据：**
ABD
asb
Adsd
addaddf
ADd
An
DEF

**所需结果**
ABD
DEF

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:00:19.250

最简单的解决方案：

```
select * from table
where column = upper(column)
/ 
```

显然，当转换为大写时，已经全部是大写字母的值将等于自己，而混合大小写的值则不会。

# java - 如何计算二维数组的频率

> ID：15893431
> 
> 赞同：1
> 
> 时间：2013-04-09T04:39:05.800
> 
> 标签：java, arrays

嗨，我正在尝试计算二维数组的频率。我正在尝试以某种方式显示频率，例如，如果表格如下：

0：1 2 0

1：2 0 1

2：1 0 2

我希望能够像这样计算频率：

0：0 2 1

1：2 0 1

2：1 1 1

所以表格应该是多少次 0 出现在第一列中，多少次 1 出现在第一列中，然后依此类推。

到目前为止我的代码是

```
 for (int t = 0; t<s;t++)
    {
        int count= 0 ; 
        for (int p = 0; p<s; p++)
        {
            if(table[p][t] ==p )
            {
                count++

            }
            else if(t+1 != s)
                continue;
            else 
                table[p][t] = count; 
                count = 0;
        }
    } 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:51:15.953

对于每一列，制作一个`HashMap<int, int>`. 键将是条目，值将是该列中的频率，例如该列：

1) 遍历该列的元素

2) 对于列的每个元素，如果它已经作为键存在于 hashmap 中，则获取其值，将其加一并在同一键下添加新值。如果尚未添加，则添加值为 1

为每列制作一个`ArrayList<HashMap<int, int>>`以包含其中一个。

您还可以保留 a`HashMap<int, int>`来计算元素在全球范围内出现的次数。这样，如果您想保留每个元素对每列都有计数的属性，即使该列的计数为 0，您也可以使用这个全局`HashMap`来遍历并在每列的 H`ashMap`中添加不还存在。

`HashMap`是一种数据结构，允许您将值与每个键相关联，并且您可以添加任意数量的条目，这与数组不同，并且条目不必具有连续整数的键。`ArrayList`就像一个数组，但您可以添加和删除它以更改其中包含的元素数量。

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:14:49.630

如果您发布的示例是数组的样子（即唯一可能的值是 0、1 和 2），那么您可以执行以下操作 -

```
int[][] counts = new int[3][3]; //this inits all the elements to 0
//iterate through all the elements in your source array
for(int row=0; row<source.length; row++) {
    for(int col=0; col<source[row].length; col++) {     
        //just increment the appropriate element of the counts array here       
        counts[col][source[row][col]]++; 
    }
} 
```

# c++ - 函数参数列表中用于输出的参数应该在哪里

> ID：15893433
> 
> 赞同：6
> 
> 时间：2013-04-09T04:39:23.980
> 
> 标签：c++, c, coding-style

我正在尝试决定一项关于在我们的 C/C++ 代码中使用函数参数进行输出的策略。

我很清楚，该策略应指示用于输出的所有参数应在函数参数列表的末尾或开头分组在一起，但我不确定是否有任何充分的理由偏爱这些位置中的任何一个。

你知道有什么理由更喜欢在开始或结束时对它们进行分组吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:44:44.173

只是我个人的看法，但**如果它反映了复制或赋值语义，**那么我更喜欢将它们放在开头，就像 C 标准库中的字符串和某些 stdio 函数一样：

```
strcpy(dest, src); 
```

好像

```
dest = src; 
```

和

```
fgets(buf, sizeof(buf), file); 
```

好像

```
buf = contents_of(file); 
```

**但是，**如果由于某种原因****不是这种情况，**那么我喜欢组织事物，使输入先出现，然后输出，所以我将输出参数放在参数列表的末尾。**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-07T11:29:08.100

我再提一点：

输入参数可以有默认值。要使用此功能，此（或这些）参数必须位于函数参数列表的末尾。
因此，出于 user529758 已经说明的相同原因，我也开始将输出参数放在参数列表的开头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T04:41:55.397

有两种思想流派，以 C 库中的不同函数为例：

### 分配顺序

```
memmove(target, source, size); 
```

### 输入然后输出

```
sscanf(source, format, &out1, &out2, &out3); 
```

如果有多个输出，通常将它们放在最后。**

# javascript - 二次曲线的长度

> ID：15893435
> 
> 赞同：1
> 
> 时间：2013-04-09T04:39:26.770
> 
> 标签：javascript, html, canvas, html5-canvas, kineticjs

我在 HTML5 画布上有一个贝塞尔曲线，需要计算出曲线的长度。我怎样才能轻松做到这一点？

让我们说：

```
var canvas = document.getElementById('myCanvas');
var context = canvas.getContext('2d');
context.beginPath();
context.moveTo(188, 130);
context.bezierCurveTo(140, 10, 388, 10, 388, 170);
context.lineWidth = 10; 
```

如何计算我创建的曲线的长度？

//T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:41:45.427

您必须使用您输入的参数以数学方式找到它。

使用此参考：[计算二次贝塞尔曲线段的长度](https://stackoverflow.com/questions/11854907/calculate-the-length-of-a-segment-of-a-quadratic-bezier)

# ruby-on-rails - 使用 Rails 对数据库中的数据进行排序

> ID：15893436
> 
> 赞同：1
> 
> 时间：2013-04-09T04:39:31.943
> 
> 标签：ruby-on-rails

我怀疑我的问题很愚蠢，答案很明显，但我完全坚持了下来。

在控制器中，`movies_controller.rb`我有 method ，它通过调用从数据库中的值`index`填充数组，和 method ，它们的作用几乎相同，但改为使用。`@movies``@movies = Movie.all``sort``@movies = Movie.order(:title)`

如果我从我在 View 中看到的内容中`sort`明确调用，则按我的预期按电影的标题列表排序。但是，如何通过单击链接调用方法？我试试`index``Index.html.haml``sort`

在 Index.html.haml 中：

```
%th= link_to 'Movies title', 'movies', :on_click => 'self.sort' 
```

在 routes.rb 中：

```
match ":controller => movies, :action => sort" => 'movies/index' 
```

什么都没有发生，方法`sort`永远不会执行。实际上，我不知道如何正确地做到这一点。看起来这对每个人来说都是显而易见的，但我除外。

我可以找到简短的答案如何正确地做吗？请朝正确的方向踢我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:43:22.997

为了快速简便，您可以使用“ransack”gem。
对于自己的一些写作，请查看[http://railscasts.com/episodes/228-sortable-table-columns](http://railscasts.com/episodes/228-sortable-table-columns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:45:01.380

如果您正在查找表中的排序数据，那么您需要一些插件来根据某些属性对表进行排序。以下 jquery 插件可帮助您做到这一点，

[https://github.com/linjunpop/jquery-tablesorter-rails](https://github.com/linjunpop/jquery-tablesorter-rails)

或者您可以通过使用 order 子句的背景排序来实现相同的目的。查看以下内容，

[http://railscasts.com/episodes/228-sortable-table-columns](http://railscasts.com/episodes/228-sortable-table-columns)

# html - 如何在表 tds 内自动换行？

> ID：15893437
> 
> 赞同：1
> 
> 时间：2013-04-09T04:39:37.243
> 
> 标签：html, html-table

我表格中的文字似乎延伸了 4000+px：

[http://letschat.info/a-list-of-amazon-questions-and-answers-from-glassdoor/](http://letschat.info/a-list-of-amazon-questions-and-answers-from-glassdoor/)

所以你甚至无法阅读问题和答案。我尝试了以下方法：

[HTML 表格中的自动换行](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)

使用表格布局：固定

和 word-wrap: break-word，但看起来一样。

我不确定我需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:09:29.027

尝试这个

```
#td {
    word-wrap: break-word;
}

#table {
    word-wrap: normal; /* the default, naturally */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:43:37.500

我认为您需要显示“块”？

```
<table id="table">
<tr>
<td>
<a style="width:200px;background-color:aqua;display:block"> Be yourself. Try not to be nervous, they were once in your seat too. 5) Don&#8217;t bluff anyone. Don&#8217;t try to impress them with something if you don&#8217;t know it. Be honest. In the end, it&#8217;ll help you. 6) They say check in at least 15 minutes early. I say, GET THERE 30 to 45 minutes early because there will be traffic, and taxi&#8217;s aren&#8217;t easy to get a hold of from your hotel. Sit in the lobby with other people and TALK TO THEM, relax, laugh, and enjoy it. 7) GET TO THE CHOOPPPA early. Seriously, don&#8217;t be late for your flights in or out of SEATAC. If you&#8217;re not used to SEATAC, There is a train inside the airport that will take you to your gate. TSA takes about 20 minutes to get through. Always come early. 8) Taxi&#8217;s and food are expensive, and although they do take plastic. Use cash. You don&#8217;t want to deal with a stolen credit card on trips during an interview. You don&#8217;t need the stress. If you are there   for approximately 2 nights and 3 days, or even 1 night and 2 days, take approxima
</a>
</td> 
```

# c# - 检索刚刚添加的行的唯一 ID

> ID：15893439
> 
> 赞同：2
> 
> 时间：2013-04-09T04:39:45.937
> 
> 标签：c#, asp.net, sql, database, dataset

我是 asp.net 的新手。我正在通过 SQL 命令执行一个简单的插入查询。现在我想检索这个新插入的行的唯一 id 并将其存储在一个数组中。我不知道如何解决这个问题。

我的代码

```
foreach (GridViewRow gvrow in gvuserdata.Rows)
        {

            string strQuery = "insert into vishalc.[Rental Table] (Car_Id_Reference, UserName, CarName,Price,startdate,enddate)" +
            " values(@carid, @username, @carname,@price,@startdate,@enddate)";
            SqlCommand cmd = new SqlCommand(strQuery);
            cmd.Parameters.AddWithValue("@carid", gvrow.Cells[0].Text);
            cmd.Parameters.AddWithValue("@username", gvrow.Cells[1].Text);
            cmd.Parameters.AddWithValue("@carname", gvrow.Cells[2].Text);
            cmd.Parameters.AddWithValue("@price", gvrow.Cells[3].Text);
            cmd.Parameters.AddWithValue("@startdate", gvrow.Cells[4].Text);
            cmd.Parameters.AddWithValue("@enddate", gvrow.Cells[5].Text);
            cmd.CommandType = CommandType.Text;
            cmd.Connection = con;
            cmd.ExecuteNonQuery();
         //I want to store ID for this row after insert command   
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:07:23.827

将 Select Scope_Identity() 与 Execute Scalar 一起使用：

```
int returnID = 0;
string strQuery = "insert into vishalc.[Rental Table] (Car_Id_Reference, UserName,  
   CarName,Price,startdate,enddate)" + " values(@carid, @username, 
   @carname,@price,@startdate,@enddate); Select Scope_Identity()";
...
returnID = (int)cmd.ExecuteScalar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:00:45.293

请尝试添加输出参数和[SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/ms190315.aspx)输出参数：

```
int RetVal = 0;

foreach (GridViewRow gvrow in gvuserdata.Rows)
{

    string strQuery = "insert into vishalc.[Rental Table] (Car_Id_Reference, UserName, CarName,Price,startdate,enddate)" +
    " values(@carid, @username, @carname,@price,@startdate,@enddate);set @out=SCOPE_IDENTITY()";
    SqlCommand cmd = new SqlCommand(strQuery);
    cmd.Parameters.AddWithValue("@carid", gvrow.Cells[0].Text);
    cmd.Parameters.AddWithValue("@username", gvrow.Cells[1].Text);
    cmd.Parameters.AddWithValue("@carname", gvrow.Cells[2].Text);
    cmd.Parameters.AddWithValue("@price", gvrow.Cells[3].Text);
    cmd.Parameters.AddWithValue("@startdate", gvrow.Cells[4].Text);
    cmd.Parameters.AddWithValue("@enddate", gvrow.Cells[5].Text);

    SqlParameter outpar = new SqlParameter("@out", SqlDbType.Int);
    outpar.Direction = ParameterDirection.Output;
    cmd.Parameters.Add(outpar);

    cmd.CommandType = CommandType.Text;
    cmd.Connection = con;
    cmd.ExecuteNonQuery();

    if (outpar != null)
        RetVal = Convert.ToInt32(outpar.Value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:18:17.860

必须在您的列中设置主键和 Identity="yes"。

然后你可以使用 scopIdentity

```
string strQuery = "insert into vishalc.[Rental Table] (Car_Id_Reference, UserName, CarName,Price,startdate,enddate)" +
            " values(@carid, @username, @carname,@price,@startdate,@enddate); **Select Scope_Identity();**";
            SqlCommand cmd = new SqlCommand(strQuery);
            cmd.Parameters.AddWithValue("@carid", gvrow.Cells[0].Text);
            cmd.Parameters.AddWithValue("@username", gvrow.Cells[1].Text);
            cmd.Parameters.AddWithValue("@carname", gvrow.Cells[2].Text);
            cmd.Parameters.AddWithValue("@price", gvrow.Cells[3].Text);
            cmd.Parameters.AddWithValue("@startdate", gvrow.Cells[4].Text);
            cmd.Parameters.AddWithValue("@enddate", gvrow.Cells[5].Text);
            cmd.CommandType = CommandType.Text;
            cmd.Connection = con;
         **Guid Id=(Guid)(cmd.ExecuteNonQuery());** 
```

请参阅下面的行

**Guid Id=(Guid)(cmd.ExecuteNonQuery())**

你想 guid 。所以我转换为 guid 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T04:54:55.133

我认为您的问题是如何检索数据库中新插入的记录，对吗？如果是这种情况，您可以使用 Scope_Identity() 获取您的

```
int returnID = 0;
string strQuery = "insert into vishalc.[Rental Table] (Car_Id_Reference, UserName,     CarName,Price,startdate,enddate)" + 
" values(@carid, @username, @carname,@price,@startdate,@enddate); Select Scope_Identity()";
cmd.CommandType = CommandType.Text;
cmd.Connection = con;
cmd.ExecuteNonQuery();

SqlDataReader reader = new SqlDataReader();
reader = cmd.ExecuteReader();
returnId = reader("Car_Id_Reference") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T04:45:14.473

嗨，史蒂夫，在您的表中再插入一列，使用 uniqueidentifier 作为数据类型，并将 Guid id 添加到代码隐藏中的列中，这是唯一可识别的

创建 GUID

```
// This code example demonstrates the Guid.NewGuid() method. 

using System;

class CreateGUID
{
    public static void Main() 
    {
    Guid g;
// Create and display the value of two GUIDs.
    g = Guid.NewGuid();
    Console.WriteLine(g);
    Console.WriteLine(Guid.NewGuid());
    }
}

/*
This code example produces the following results:

0f8fad5b-d9cb-469f-a165-70867728950e
7c9e6679-7425-40de-944b-e07fc1f90ae7

*/ 
```

上面的代码仅供您参考，以检查每次生成的唯一 ID 现在您的代码如下所示

```
foreach (GridViewRow gvrow in gvuserdata.Rows)
        {
Guid uniqueRowId = Guid.NewGuid();

            string strQuery = "insert into vishalc.[Rental Table] (uniqueRowId, Car_Id_Reference, UserName, CarName,Price,startdate,enddate)" +
            " values(@uniqueRowId,@carid, @username, @carname,@price,@startdate,@enddate)";
            SqlCommand cmd = new SqlCommand(strQuery);    
          cmd.Parameters.AddWithValue("@uniqueRowId", uniqueRowId);    
            cmd.Parameters.AddWithValue("@carid", gvrow.Cells[0].Text);
            cmd.Parameters.AddWithValue("@username", gvrow.Cells[1].Text);
            cmd.Parameters.AddWithValue("@carname", gvrow.Cells[2].Text);
            cmd.Parameters.AddWithValue("@price", gvrow.Cells[3].Text);
            cmd.Parameters.AddWithValue("@startdate",gvrow.Cells[4].Text);
            cmd.Parameters.AddWithValue("@enddate", gvrow.Cells[5].Text);
            cmd.CommandType = CommandType.Text;``
            cmd.Connection = con;
            cmd.ExecuteNonQuery();
         //I want to store ID for this row after insert command   
        } 
```

注意：确保您已更新 TABLE 中的列

# php - Isset()/Empty()、数组和三元运算符

> ID：15893441
> 
> 赞同：6
> 
> 时间：2013-04-09T04:39:58.670
> 
> 标签：php

当您需要检查数组中是否有任何值时，如果没有 - 为变量设置默认值，您可以执行以下操作

```
$authToken = isset($response['fbData']['authResponse']['accessToken']) ? $response['fbData']['authResponse']['accessToken'] : null; 
```

我想知道，有没有办法让它更具可读性？

有短版的三元运算符

```
$authToken = $sourceVar ?: null; 
```

无需在这里第二次重复源代码，但它不适用于数组，因为如果我使用`$response['fbData']['authResponse']['accessToken']`而不是`$sourceVar`- 我将收到 php 警告消息。

我可以用`@`

```
$authToken = @$response['fbData']['authResponse']['accessToken'] ?: null; 
```

我听说他们在 中的“@”非常快`PHP 5.4`，但无论如何我不喜欢这样。

我可以使用这样的东西

```
$a = isset($response['fbData']['authResponse']['accessToken']) ?: null; 
```

但在这种情况下，我会得到 TRUE 作为结果，结果为`isset()`.

所以，也许有人知道，如何正确地做到这一点？

**Upd1：**建议主题[如何在 PHP 中创建新的运算符？](https://stackoverflow.com/questions/6347694/how-can-i-create-a-new-operator-in-php)没有回答我的问题，因为那里的用户询问“如何更改 PHP”并创建一个新的运算符。我不需要这个。有一些答案如何在不修改 PHP 的情况下做类似的事情，但它们不适用于数组（我不能`$response['fbData']['authResponse']['accessToken']`在函数中传递这样的东西，因为它会生成警告消息）。

**Upd2：问题解决**了，感谢 NikiC（见下面的评论）。这个想法：如果我将数组元素作为链接传递，Php 不会生成警告消息，所以它让我们有机会使用这样的东西：

```
function myIsset (&$var, $defaultVal = null) {
    return isset($var) ? $var : $defaultVal;
}

$authToken = myIsset($response['fbData']['authResponse']['accessToken']); 
```

**UPD2 2015 年 10 月 27 日：** PHP 7 有一个新的很棒的运算符`??`（空合并运算符），它完全解决了这个问题，并且是最好的解决方法：如果它存在并且不为 NULL，它会返回它的第一个操作数；否则返回第二个操作数。

```
$authToken = $response['fbData']['authResponse']['accessToken'] ?? 'any_default_value'; 
```

如果请求的数组键不存在 - 它不会生成`php notice`！

你也可以像这样使用它，寻找非空值：

```
$username = $_GET['user'] ?? $_POST['user'] ?? 'nobody'; 
```

# javascript - onRemove()-事件？

> ID：15893449
> 
> 赞同：2
> 
> 时间：2013-04-09T04:40:43.880
> 
> 标签：javascript, jquery

我遇到了以下情况：我将日期存储在文本输入中，在这些输入之上，显示最小和最大日期。可以添加和删除额外的输入。日期存储在对象数组中`[{id: 1, val: '15.3.13'}, {id: 2, val: '1.4.13'}...]` 。这些输入的 onchange-event 现在检查数组并计算显示在页面顶部的最小和最大日期。但是，如果我添加一个输入，将其设为最小/最大日期，然后将其删除，则不会调用 onchange-event。

jQuery 是否有某种 onremove-event 或者我必须自己解决并手动调用所有内容？

（上面的场景是真实问题的高度简化版本，只是为了了解我在做什么。请不要只说“你为什么不在onclick-method中调用onchange-method删除输入的按钮？”，因为它不是那么容易;-))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T18:56:05.670

你在找这个片段吗？[jQuery - 从 DOM 中删除元素时触发事件](https://stackoverflow.com/questions/2200494/jquery-trigger-event-when-an-element-is-removed-from-the-dom)
如果没有，请提供一些代码。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-06-30T19:03:59.967

您应该使用 jquery 的 $.when() 和 .then()

```
 $.when($('#div').remove()).then(doAfterRemove()); 
```

查看[此 Fiddle 以查看它](http://jsfiddle.net/VD73X/1/)是否正常工作。

# hardware - VHDL：相对于设置正确地为另一个组件计时

> ID：15893454
> 
> 赞同：1
> 
> 时间：2013-04-09T04:41:22.040
> 
> 标签：hardware, vhdl, fpga, hdl

我正在使用 VHDL 开发一个 FPGA 项目。

每次填充时，我都需要将 16 位移位寄存器复制到 FIFO 中（例如，在将 16 个新数据位输入移位寄存器后，我想获取新形成的 16 位字并将其发送到 fifo）

我的问题是，在断言fifo上的时钟线之前，我是否需要在fifo一个时钟的输入处设置数据？这实际上是一个通用的 VHDL 问题，而不是特定于 fifos。

基本上，是否可以在同一操作中设置数据和切换时钟，或者我是否需要一些基本状态机来在一个时钟沿设置数据并在下一个时钟沿切换 fifo 时钟？

例如：

```
fifo_d_in( 7 downto 0 ) <= shift_register;
fifo_clk <= '1'; 
```

或者

```
if( state = one ) then
    fifo_d_in( 7 downto 0 ) <= shift_register;
    state <= two;
elsif( state = two ) then
    fifo_clk <= '1';
end if; 
```

我的直觉告诉我，我必须先设置数据，以满足输入寄存器的设置和保持要求。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:00:45.173

数据必须在时钟沿之前的设置时间内存在，因此在任何可能的数据更改的同时断言时钟可能会导致不稳定的行为。

配置移位寄存器的一种方法是在输入最后一位数据后置位输出。对于 8 位移位寄存器，在第 8 个时钟之后，信号将置位。实现这一点的任何简单方法是使用 3 位计数器，当所有位为 1 时，输出为 1。然后将此信号连接到 fifo 的 CLKEN，以便在第 9 个时钟沿，移位输出的数据寄存器被计时到先进先出。也可以在第 9 个时钟将下一个串行数据位输入移位寄存器。

```
 shift reg             FIFO
       -------------        ---------
      -|DIN   DOUT |--------| DIN   |
       |      FULL |--------| CLKEN |
     - |>          |      --|>      |
     | -------------      | ---------
     |                    | 
CLK ----------------------- 
```

在上图中，在最后一位数据被输入以填充移位寄存器后的瞬间，FULL 将被断言，并在下一个周期被取消断言。 `FULL`可以是组合逻辑。

# jquery - Jquery .animate 仅来自索引页面

> ID：15893455
> 
> 赞同：0
> 
> 时间：2013-04-09T04:41:44.223
> 
> 标签：jquery, jquery-animate

我正在设计一个小型网站，其中标题的高度/位置与其他页面（页面 X 和 Y）不同。我想使用 .animate 仅在用户从索引转到页面 X 或 Y 时为样式更改设置动画，而不是当用户在页面 X 和 Y 之间移动时。

我如何使用 Jquery 来确定用户在哪个页面上，并且仅当用户从索引转到 X 或 Y 时才启动动画？

CSS，标题：

```
header {
width: 100%;
padding: 4% 0 10px;
} 
```

索引标题：

```
.index header {
position: absolute;
top: 130px;
} 
```

X & Y 标题：

```
.work header, .bio header {
padding-top: 2%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:10:02.803

尝试

```
$(function() {
    if (/index.html/.test(document.referrer)) { //Use your index page url in the regex instead of index.html
        //do your animation
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:57:27.420

使用 referrer 确定您来自的页面，如果您来自索引，然后检查是否存在仅在 X 或 Y 上的元素

```
$(document).ready(function() {
   var referrer =  document.referrer;
   if(/*do custom check on referrer to see if you are coming from index */)
   {   
       // to check if you are on X or Y
       if($(".work").length || $(".work").length){
           // trigger animation 
       }
   }

}); 
```

# java - jqwicket PrettyPopin Modal 提交后不返回父页面

> ID：15893458
> 
> 赞同：1
> 
> 时间：2013-04-09T04:41:51.990
> 
> 标签：java, scala, wicket

在检票口网页中，我使用 ListView 来显示对象，并且在该组件的每一行中，都有一个链接可以打开 PrettyPopin 模态窗口以编辑对象。

问题是在提交事件时，模态窗口不会返回父页面或原始页面并重新加载。

首先显示父页面代码

```
class ObjListPanel(pageOrigin: PageBase/*WebPage*/)
  extends Panel("objListPanel") with Serializable {

  add(new ListView[Obj]("listObj", listData) {

    def populateItem(item: ListItem[Obj]) = {
      item.add(new LinkEdit("edit", obj))
    }
  })

  var editObjWinModal = new ModalWindow("modalEditObj")

  editObjWinModal.setPageMapName("modalEditObj")
  editObjWinModal.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {
    def onClose(target: AjaxRequestTarget) = setResponsePage(pageOrigin)
  })
  add(editObjWinModal)

  private class LinkEdit(id: String, obj: Obj) extends Link[String](id) {

    add(new Label("label", new Model[String]() {
      override def getObject: String = "Edit"
    }))

    var prettyOpt = new PrettyPopinOptions()
    var pretty = new PrettyPopinBehavior(prettyOpt.width(550).height(200).followScroll(false))
    add(pretty)

    def onClick() {
      new EditObjPanel(editObjWinModal.getContentId(), this.obj, pageOrigin);

      setResponsePage(new EditObjPage(this.obj, pageOrigin))
    }

  }

} 
```

下面是子页面的代码，实际上是一个面板

```
class EditObjPanel(id: String, obj: Obj, pageOrigin: PageBase/*WebPage*/) extends Panel(id) {

  var form = new Form[Obj]("form") {
    override protected def onSubmit = {

      objController.salvarObj(obj)

      // This method doesn't work
      // after submit the modal didn't close, instead is reloaded again
      setResponsePage(new EditPontoPage(obj, pageOrigin))
    }
  }

  add(form);
  form.setOutputMarkupId(true)

  container = new WebMarkupContainer("container")

  form.add(container);

} 
```

我在这段代码上工作了几个小时，但我没有发现问题所在。

有人可以帮我吗？

# css - 我的 Html 文件没有显示任何样式

> ID：15893459
> 
> 赞同：2
> 
> 时间：2013-04-09T04:41:52.770
> 
> 标签：css, stylesheet

我开始创建一个简单的静态 HTML 网站，但我意识到，出于某种原因，它没有显示任何 css 样式。起初我认为这是一个链接问题，但后来我意识到即使在 HTML 文件中样式属性也不起作用。这是一个简单的例子：

```
<!DOCTYPE html>
<head>
    <link rel="stylesheet" type="text/css" href="../style.css">
    <meta charset="utf-8" />
</head>

<body>
    <p style="text-decoration: underlined;">This is my body green</p>
    <p>This is my body </p>
    <p>This is my body </p>
    <p>This is my body </p>
    <p>This is my body </p>
    <p>This is my body </p>
    <p>This is my body </p>
    <p>This is my body </p>
    <p>This is my body </p>
    <p>This is my body </p>
</body> 
```

和样式表：

```
body {
    background: #c9c9c9;

} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:45:07.080

你有`<p style="text-decoration: underlined;">This is my body green</p>`

你需要`<p style="text-decoration: underline;">This is my body green</p>`

`underline`不是`underlined`。_

在您遵循 Tieson T. 的建议并使用正确的 HTML 标记之后，这将解决您的内联 CSS 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T04:52:57.557

你试试这个

```
 <!DOCTYPE html>
<head>
<link rel="stylesheet" type="text/css" href="../style.css"> --->MAKE SURE OF DESIRED    PATH
<meta charset="utf-8" />
</head>
<body>
<p style="text-decoration: underline;">This is my body green</p>
<p>This is my body </p>
<p>This is my body </p>
<p>This is my body </p>
<p>This is my body </p>
<p>This is my body </p>
<p>This is my body </p>
<p>This is my body </p>
<p>This is my body </p>
<p>This is my body </p>
</body>
</html> ---->Close HTML TAG 
```

# unix - 安装 SimpleDB::Class 时出错

> ID：15893464
> 
> 赞同：0
> 
> 时间：2013-04-09T04:42:18.577
> 
> 标签：unix, amazon-web-services, amazon-simpledb

我尝试从 cpan 安装 SimpleDB::Class 作为 sudo cpan SimpleDB::Class。它需要一个依赖 Memcached::libmemcached。所以我尝试安装它，但它有以下错误。

```
CCLD   clients/memstat
CC     tests/atomsmasher.o
CCLD   tests/atomsmasher
CXX    tests/tests_hashplus-hash_plus.o
./config/depcomp: line 611: exec: g++: not found
make[2]: *** [tests/tests_hashplus-hash_plus.o] Error 127
make[2]: Leaving directory `/home/vanitha/.cpan/build/Memcached-libmemcached-0.4406-    Oq4Z_m/src/libmemcached'
make[1]: *** [install-recursive] Error 1
make[1]: Leaving directory `/home/vanitha/.cpan/build/Memcached-libmemcached-0.4406-  Oq4Z_m/src/libmemcached'
make: *** [install] Error 2
Unable to build libmemcached: Error running cd src/libmemcached && make install

Aborted.
No 'Makefile' created  TIMB/Memcached-libmemcached-0.4406.tar.gz
/usr/bin/perl Makefile.PL INSTALLDIRS=site -- NOT OK
Running make test
Make had some problems, won't test
Running make install
Make had some problems, won't install
could not read metadata file. Falling back to other methods to determine prerequisites 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:04:11.300

`exec: g++: not found`- 这是错误

首先试试这个：`sudo apt-get install g++`

# matlab - 将 Matlab GUI 发送到后台

> ID：15893467
> 
> 赞同：3
> 
> 时间：2013-04-09T04:42:45.637
> 
> 标签：matlab, user-interface, minimize

我的 matlab gui 有一个非常烦人的问题。

一旦我启动我的程序，gui 不能只是发送到后台，它会再次弹出任意次数，直到它决定最终留下。在它真正停留在那里之前，我必须将其最小化至少 10 次。

这是一种常见的行为吗？我没有修改任何 gui 初始化代码，我基本上只是添加了一个按钮来循环执行我的函数。

欢迎任何想法！

干杯，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:18:35.290

是的，我也为此感到恼火。您可以使用隐藏 GUI（在代码中或在命令行中）

```
set(myGuiFigureHandle, 'Visible', 'off') 
```

并用

```
set(myGuiFigureHandle, 'Visible', 'on') 
```

在某些情况下这很好，但如果用户只是想暂时最小化则不行。您可以检测到最小化和隐藏，但随后图形窗口将从任务栏中消失，恢复其可见性的唯一方法是通过代码或命令行。

# c++ - 在 cpp、OpenCV 中使用“选择文件”对话框创建 GUI

> ID：15893468
> 
> 赞同：5
> 
> 时间：2013-04-09T04:42:46.103
> 
> 标签：c++, opencv, user-interface

有什么方法可以让用户在我的带有 OpenCV 的 cpp 控制台应用程序中使用 GUI 手动选择文件？我已经进行了一些研究，但到目前为止还没有找到解决这种微不足道的任务的方法......

提前致谢， JP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:01:32.287

为此，您必须添加任何可用的 gui 库并处理 gui 部分，并将图像处理部分保留为 opnecv。（例如，您可以尝试 Qt ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-29T20:57:57.503

如果你想在 Ubuntu 中打开一个简单的文件打开对话框，你可以这样做：

```
FILE *in;
if (!(in = popen(
        "zenity  --title=\"Select an image\" --file-selection",
        "r"))) {
    return 1;
}

char buff[512];
string selectFile = "";
while (fgets(buff, sizeof(buff), in) != NULL) {
    selectFile += buff;
}
pclose(in);

//remove the "\n"
selectFile.erase(std::remove(selectFile.begin(), selectFile.end(), '\n'),
            selectFile.end());

// path + filename + format
Mat image = imread(selectFile); 
```

# c# - 如何维护一些基本相同但基于相同代码库的软件产品？

> ID：15893470
> 
> 赞同：3
> 
> 时间：2013-04-09T04:42:48.883
> 
> 标签：c#, oop, architecture

请耐心等待，让我解释一下。假设我在一家**汽车保险公司**工作，我们正在尝试开发一个在线门户网站，让我们的客户可以购买**保险单**。假设我们提供 3 种保险产品汽车保险 (CI)、摩托车保险 (MI) 和卡车保险 (TI)。我要说的是，这些产品中的 90% 在我们如何实现它们方面是相似的，但在剩下的 10% 中它们却有很大不同。

让我以C#为例来演示（下面的代码是一个粗略的想法来演示我的问题不是真正的代码）。

```
public class CarInsurancePolicy
{
    //common properties among all 3 insurance products
    public decimal MadeYear {get;set}
    public decimal PurcahsePrice {get;set}

    //specific to this particular product
    public bool HasCentralLocking {get;set}
    public DateTime SpecialDateToDoWithCar {get;set}
}

public class MotorcycleInsurancePolicy
{
    //common properties among all 3 insurance products
    public decimal MadeYear {get;set}
    public decimal PurcahsePrice {get;set}

    //specific to this particular product
    public int EngineStroke {get;set}
    public DateTime SpecialDateToDoWithMotorcycle {get;set}
}

public class TruckInsurancePolicy
{
    //common properties among all 3 insurance products
    public decimal MadeYear {get;set}
    public decimal PurcahsePrice {get;set}

    //specific to this particular product
    public decimal LoadCapacityInTons {get;set}
    public DateTime SpecialDateToDoWithTruck {get;set}
} 
```

正如您所看到的，对于每个策略类，它们的属性大多相同，但与每种类型有很大不同。现在来到数据库部分。

我不知道我是否应该这样做

```
CREATE TABLE BaseInsurancePolicy
(
  //all common columns
)

CREATE TABLE CarInsurancePolicy
(
  //specific to this type of product
)

CREATE TABLE MotorcycleInsurancePolicy
(
  //specific to this type of product
)

CREATE TABLE TruckInsurancePolicy
(
  //specific to this type of product
) 
```

或者我应该这样做

```
CREATE TABLE GiantInsurancePolicyTable
(
  //all columns and everything is NULLABLE
) 
```

现在来到工作流程部分

我们有一些基本的常用步骤来评价任何类型的产品。假设我们考虑到制造年份，KM 旅行等形成一个基本评级，然后根据特定的产品类型，我们有特殊的方法来计算溢价。

```
public class RatingEngingForCar
{
   //can be common step
   public decimal GetPremium() {}

   //specific for car
   private void ApplyA() {}
   private void ApplyC() {}
}

public class RatingEngingForMotorcycle
{
   //can be common step
   public decimal GetPremium() {}

   //specific for motorcycle
   private void ApplyE() {}
   private void ApplyF() {}
}

public class RatingEngingForTruck
{
   //can be common step
   public decimal GetPremium() {}

   //specific for motorcycle
   private void ApplyX() {}
   private void ApplyZ() {}
} 
```

然后我们有 90% 相似但 10% 差异很大的工作流程。然后再生成保险单（实际的保单文件）和发票也是一样的。

所以我不知道我是否应该想出某种通用但灵活的方法来形成基类并开始继承和修改每个产品的特定行为。**或者**我应该从第一个产品中复制过去并修改 2、3、4、5 个产品吗？

在 UI 方面，我正在尝试将我们的 javascript 组件化，以便通常只要 html 结构和 id/name/class 相同，那么将通过包含和启动 JS 自动提供功能。但问题是我需要为每个产品在任何地方复制 HTML。

我不知道我是否已经从非常高的层次上把我的问题解释得足够清楚了。如果不是，我将根据评论更新/澄清。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:12:01.637

在代码方面，这正是面向对象要解决的问题。将通用功能放在基类中，并从中派生出更专业的类。

你可以在数据库中做类似的事情。例如，有一个策略表，其中包含每个常见属性的列和一个 ID。然后，您可以拥有包含其他字段的专家表（例如，一个汽车保险表），其中的一列是您的基表的外键引用。

您可以轻松地向数据库添加一个视图，将所有这些都呈现为一张巨大的表格，因此您可以通过很好地构建它并没有丢失任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:57:39.557

试图回答。我也是，我自己还在学习，我的任何陈述有时在实践中可能是好是坏。

首先要说**的是，前端（UI）不要太在意**。并不意味着它必须被忽略，但它不应该像后端那样重要。任何视图引擎都可以轻松开发，并且可以使用 Telik 和 devexpress 等许多组件来改进您的 UI。正如我在评论中所说，有时您的前端可以更改，可能会更改为移动端、本机应用程序等。如果您一开始就过多地考虑前端，那么 UI 的更改可能会使您的计划工作白费。

接下来，选择您的**业务逻辑将被放置**到的位置。它可以在数据库（sprocs）或应用程序中。我建议将业务逻辑放在应用程序中，因为它比数百个存储过程更容易操作（继承、多态）。

在设计您的应用程序时，请**使用先设计接口的方法**。使用接口设计的好处将为您提供更少的耦合和更多的内聚，并且以后可以轻松地模拟每个组件。在设计过程中坚持`GRASP`和`SOLID`原则。

您可以根据需要使用任何应用程序结构，但就我的经验而言，最模块化和最高可维护性的是使用`Dependency Injection`with`Service->Repository`模式。关于如何维护`DI`（容器等）取决于您。

对于数据库，我建议将其维护在**3NF**中，而不是在大表中。原因是它支持更好的事务操作插入/更新，除非您执行像报告这样的密集查询，否则您不需要大表。不要错过我现在还不擅长的审计和日志记录。

然后使用您认为合适的任何**ORM**将您的数据库映射到应用程序。

最后，您可以将您的后端应用程序附加到 WCF 服务中，这样您的前端只需调用这些服务即可与您的后端进行交互。也不要忘记安全性。

# java - 如何在 Java 中获取非英语单词？

> ID：15893471
> 
> 赞同：3
> 
> 时间：2013-04-09T04:42:51.853
> 
> 标签：java, javascript, http, http-request-parameters

我正在将主题名称中的 இயற்பியல் 从 Javascript 传递到 Java，同时在 javascript 中使用警报。

```
alert(subject name); 
```

இயற்பியல் 显示，而如果我使用

```
String subname=request.getParameter("subject name").toString; 
```

..它不回来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:10:53.657

不要在 URL 参数中添加空格。如果您想传递主题名称，请使用类似的名称，`"&subjectName="+encodeURIComponent(yoursubjectnamevar)`并确保在 Java 中也将其解压缩，因为它现在看起来像`%E0%AE%87%E0%AE%AF%E0%AE%B1%E0%AF%8D%E0%AE%AA%E0%AE%BF%E0%AE%AF%E0%AE%B2%E0%AF%8D`

# intuit-partner-platform - 如何知道用户使用 IPP v2 的 QuickBooks（Pro/Premier/Enterprise）的哪个版本？

> ID：15893472
> 
> 赞同：4
> 
> 时间：2013-04-09T04:42:52.713
> 
> 标签：intuit-partner-platform

编辑：我不是在寻找软件。我希望能够弄清楚用户正在使用哪个版本的软件。从我在这里看到的内容来看，公司对象看起来并不包含此信息： [https ://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Company](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Company)

我知道我们可以获得风味和版本（年份），但我没有看到获得版本的方法。我们想要这个的原因是因为专业版没有销售订单功能，我们的应用程序应该知道这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:21:06.183

我有更好的答案给你。
您可以使用现有的 API [NameValue](https://developer.intuit.com/docs/95_legacy/qbd_v2/qbd_v2_reference/0600_object_reference/namevalue)：响应 DBFlavorNumber 将有一个我在下面列出的数字，您可以确定它是 Pro 还是 Premier

```
<Name>DBFlavorNumber</Name> 
```

QB 风味到 SKU 映射
100 = Basic
101 = QuickBooks Pro 功能代码
102 = QuickBooks Accountant 功能代码
103 = QuickBooks POS 功能代码
104 = QuickBooks Premier 功能代码
105 = QuickBooks Construction SKU 功能代码
106 = QuickBooks Capri 功能代码
107 = QuickBooks Non-利润特征代码
108 = Master Builder ICBS 风格字符串
109 = QB 企业解决方案会计师特征代码
110 = 财务报表风格字符串
111 = 高级医疗保健风格字符串
112 = 企业医疗保健风格字符串
113 = QB 企业承包商风格字符串
114 = 企业非营利风格字符串
115 = 估计器风味字符串
116 = Atom 风味字符串
117 = Highland 风味字符串
118 = 物业管理风味字符串
119 = Premier 零售功能代码
120 = Premier 专业风味字符串
121 = Premier Mfg & Wholesale
122 = QB 企业专业风味字符串
123 = QB 企业零售风味字符串
124 = QB Enterprise Mfg & Wholesale 功能代码
125 = QB Premier 可转换风味字符串
126 = Highland 风味字符串
127 = QuickBooks Lite 风味
128 = QB 企业可转换风味字符串
129 = QB Pro for Mac 风味字符串
130 = QB Mac 风味字符串新用户
131 = QB Premier Vanilla Convertible Flavor String
132 = POS Basic Flavor String
133 = POS Pro 风味字符串
134 = POS Pro 多商店风味字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:09:04.433

Pro 和 Premier 都返回 standard_stratum

企业回报 - bel_stratum

谢谢贾里德
_

# websphere - Websphere MQ 服务器配置

> ID：15893473
> 
> 赞同：5
> 
> 时间：2013-04-09T04:43:00.650
> 
> 标签：websphere, ibm-mq

有人可以帮助我在 WAS 8.5 中配置 Websphere MQ 服务器吗？在创建 WAS MQ 服务器时出现以下错误。

> 错误：WebSphere MQ 队列管理器 MQSERVER 的 WebSphere MQ 服务器 MQSERVER 连接测试失败。CWSJP0050E: 尝试连接到 WebSphere MQ 队列管理器或队列共享组 MQSERVER 失败。WebSphere MQ 原因代码未知 (2538)..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:49:30.843

MQRC 2538 表示“主机不可用”。检查您已指定并指向运行 MQ 队列管理器“MQSERVER”的机器的主机名和端口名。

检查您的队列管理器正在侦听哪个端口。您可以通过在运行队列管理器的机器上使用 MQExplorer 或 runmqsc 命令外壳来做到这一点。在命令提示符下，运行以下命令

```
runmqsc MQSERVER 
```

一旦 runmqsc shell 打开，运行以下命令列出 TCP 侦听器。

```
dis listener(SYSTEM.DEFAULT.LISTENER.TCP) 
```

检查显示的端口号。默认情况下它将为 0。您需要将其更改为某个端口号。要更改端口号，请运行以下命令。

```
alter listner(SYSTEM.DEFAULT.LISTENER.TCP) port(1414) 
```

完成此操作后，您需要通过运行以下命令来启动侦听器

```
start listener(SYSTEM.DEFAULT.LISTENER.TCP) 
```

在此之后，您可以尝试您的测试。

# c# - 使用绝对路径构建依赖项

> ID：15893474
> 
> 赞同：1
> 
> 时间：2013-04-09T04:43:03.230
> 
> 标签：c#, c++, build, external, dependency-management

目前我们使用 Source Safe 并开始迁移到 Subversion。所有外部 SDK（> 500 MB）现在都保存在 Source Safe 中，我正在寻找将它们从 VSS 移动到某个存储库的方法。

我们有 C++（大部分）、C#（很多）、Java（少数）项目。数百个项目。仅限 Windows 平台。

我有几个依赖管理器但不满意：

*   NuGet - 对 .Net 很好，但对 C++ 来说很痛苦
*   常春藤 - 不深入，但似乎不能被 C++ 接受

**第一个问题：我还能检查什么？它应该易于最终开发人员使用。最佳案例 - 在 IDE 中进行简单构建。**

* * *

目前我倾向于下一个解决方案：

分配一些很少使用的驱动器，例如 S: 并将其声明为“DEV HOME”。

然后在这里放置外部：

```
S:\SDK\boost\1.30\...
S:\SDK\boost\1.45\...
S:\SDK\oracle\agile_9.0.0.0\...
S:\SDK\IBM\lotus_8.0\...
S:\SDK\IBM\lotus_9.0\...
S:\Tools\NuGet\nuget.exe
S:\Tools\clr\gacutil.exe 
```

Autobuild 机器将保存此“DEV HOME”的主副本。每个开发人员都应该将必要的 SDK 从自动构建机器复制到本地并使用**subst**创建磁盘。

我找不到这个解决方案的大问题：

*   分支机构。不同分支的项目可以包含对不同版本SDK的引用（例如boost）
*   外部组件的版本不会变化太频繁，所以这里不会有数百个，比如说，boost 版本。
*   易于开发人员设置。
*   任何工具都支持的绝对路径。
*   如果您想使用不太大的 SSD 驱动器作为源，则磁盘空间没有问题。（目前我在符号链接的帮助下将我的外部设备移动到单独的驱动器。但对于其他开发人员来说，这看起来像黑魔法）

小问题：

*   就我个人而言，这不是美丽的解决方案。
*   磁盘 (S:) 可能正忙
*   不能在 Linux 中按原样使用（但目前我们对此不感兴趣）

**第二个问题：这个解决方案有哪些麻烦？**

* * *

**更新 1**：为什么不是相对路径。

1.  外部是否应该与源根目录​​位于一个目录中？：

：

```
externals/...
branch-root-1.0/project_collection_1/project1/...
branch-root-2.0/project_collection_2/... 
```

在这里，所有项目都应该在一个地方或重复的外部。似乎与具有绝对路径的解决方案没有太大区别。

1.  外部应该与源根目录​​在同一个文件夹中？：

：

```
branch-root-1.0/externals/...
branch-root-1.0/project_collection_1/project1/...
branch-root-1.0/project_collection_2/...
branch-root-2.0/externals/... 
```

然后外部将在每个签出的分支中重复。每个分支结帐 + 500MB + 一些额外的设置工作。

好吧，这看起来可以接受，但我看不出它比绝对路径更好。真的，我想知道相对路径的优点，因为我也对绝对路径感到不舒服。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T00:44:16.447

我认为，如果您的平台仅是 Windows 和 Visual Studio，那么 NuGet 是最好的。我喜欢 Nuget 的地方几乎没有配置。例如，您可以在将[Boost Nuget 包](https://www.nuget.org/packages/boost/)安装到项目后立即使用 Boost 库。

*   您不需要配置包含/库路径（您当前的问题）。
*   只要您复制（存储在 SVN/mercurial 中）packages.config 文件，它就会自动在其他计算机上为您的项目安装/配置/更新包。
*   它可以解决/警告包之间的兼容性问题。

我不知道有什么好的跨平台解决方案可以解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:49:01.540

我已经走上了你所拥有的道路......它可以工作。但是，我建议您将所有内容都设置为相对路径，并花时间对您的项目进行相对路径排序。

任何固定目录系统和源代码控制的问题是您可以分支或多次签出您的项目。

此外，虽然 subversion 很好，但值得考虑 Mercurial 或 Git。它们允许 subversion 不允许的许多不同类型的工作流程。考虑如何构建存储库需要更多的工作，但这是非常值得的。与 sourcesafe 相比，这是一个很大的飞跃，根据我的经验，许多来自 sourcesafe 的人最初真的很挣扎/不喜欢 subversion / git / mercurial。它们都要求您更详细地了解版本控制，但这是一件好事，因为它是一个非常好的工具。

# php - Magento 1.7 按订购数量排序 - 畅销产品问题

> ID：15893475
> 
> 赞同：2
> 
> 时间：2013-04-09T04:43:06.803
> 
> 标签：php, magento

有几种情况报告了此查询的标准解决方案不起作用（关于 SO 的类似问题很多，但没有任何明确的解决方案）。

检索“畅销书”集合的方法是使用此查询构建器：

```
 $storeId = Mage::app()->getStore()->getId();
    $collection = Mage::getResourceModel('reports/product_collection');

    $collection->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds());

    $collection = $collection
        ->addFieldToFilter('*')
        ->addOrderedQty()
        ->addStoreFilter()
        ->setStoreId($storeId)
        ->setOrder('ordered_qty', 'desc')
        ->setPageSize(10)
        ->setCurPage(1); 
```

现在，`$collection`结果包含一些虚假值，并且完全缺少重要属性（没有名称、价格等）。我什至无法在 1.7 中尝试[这种核心代码解决方法。](http://blog.baobaz.com/en/blog/bestsellers-list-vs-flat-product-catalog-in-magento)

任何人都可以发布一个经过 Magento 1.7 验证/认证/测试的解决方案吗？（或最新的 Magento 版本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T09:22:49.933

这可能适合您，也可能不适合您，它可能不是最有效的方式，但它为我完成了这项工作，因此在这里它与您的部分代码合并。

```
$storeId = Mage::app()->getStore()->getId();
$collection = Mage::getResourceModel('reports/product_collection');
$collection->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds());

$collection = $collection
    ->addFieldToFilter('*')
    ->addStoreFilter()
    ->setStoreId($storeId)
    ->setPageSize(10)
    ->setCurPage(1);

$collection->getSelect()
    ->joinLeft(
        'sales_flat_order_item AS order_item',
        'e.entity_id = order_item.product_id',
        'SUM(order_item.qty_ordered) AS ordered_qty')
    ->group('e.entity_id')
    ->order('ordered_qty DESC')
; 
```

# objective-c - 同一个viewController中tableView外的label不随tableView滚动

> ID：15893479
> 
> 赞同：1
> 
> 时间：2013-04-09T04:43:19.480
> 
> 标签：objective-c

我想要在同一个视图控制器中的标签和表格视图。我已经在情节提要中添加了对象，但问题是标签没有与表格视图一起滚动。我尝试将标签和表格视图放在滚动视图中，但这也无济于事，因为滚动视图不滚动。

谁能告诉我如何滚动标签和表格视图。

提前致谢。

# sql - Visual Studio 2010 中的 SQL Server 设置错误

> ID：15893483
> 
> 赞同：2
> 
> 时间：2013-04-09T04:43:26.933
> 
> 标签：sql, sql-server, ssdt-bi

我已经用 SSDT 安装了 sql sever 2012。当我使用 SSDT 并创建包时，它给出错误：Microsoft Visual Studio 无法加载此文档：在 sql Server Data Tools (SSDT) 中设计集成服务包，SSDT 必须由这些版本的 sql server 之一安装2012：标准、企业、开发人员或评估。

我正在使用 Sql server 2012 企业版。SSDT 也安装在我的机器上。

我不知道发生了你的错误？？？。请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:50:14.970

**请参阅以下链接中的所有讨论**

[http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/6dce2f25-2f73-4f69-8d37-06483ada79da/](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/6dce2f25-2f73-4f69-8d37-06483ada79da/)

**以及通过这个逐步的方法：**

[http://learnsqlwithbru.com/2011/12/12/getting-started-with-ssdt-sql-server-data-tools/](http://learnsqlwithbru.com/2011/12/12/getting-started-with-ssdt-sql-server-data-tools/)

希望它有帮助。

# python - 在 matplotlib 中编辑堆积条形图的 x 轴刻度标签

> ID：15893484
> 
> 赞同：1
> 
> 时间：2013-04-09T04:43:36.590
> 
> 标签：python, matplotlib

我编写了代码来生成一个堆积条形图，它绘制了 192 个数据条。数据跨越 4 天，每条代表 30 分钟的时间段。

该图产生了 192 个相互重叠的刻度标签，这在外观上显然是不可取的。

为了解决这个问题，我在我的代码中添加了以下几行：

myFmt = mdates.DateFormatter('%d')
ax.xaxis.set_major_formatter(myFmt)

我希望每天都有一个刻度标签，但是当我的图表跨越 4 天或更短时间时，matplotlib 会自动生成不需要的额外刻度标签。当有 5 天或更多天时，不会发生此问题。有什么办法可以强制图表每天只有一个刻度？

![在此处输入图像描述](https://i.stack.imgur.com/bYImB.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:06:08.527

您只需要使用正确的定位器：

```
ax.xaxis.set_major_locator(matplotlib.dates.DayLocator()) 
```

[（文档）](http://matplotlib.org/api/dates_api.html#matplotlib.dates.DayLocator)

# java - 在 Java 6 中编译，在 7 中运行 - 如何指定 useLegacyMergeSort？

> ID：15893487
> 
> 赞同：17
> 
> 时间：2013-04-09T04:43:55.437
> 
> 标签：java, javac

我想知道如果我在 Java 6 中编译，但有人在 Java 7 上运行程序，会使用 Java 6 或 7 版本的 Arrays.sort 吗？

这很重要，因为新的合并排序会引发 IllegalArgumentException，而旧的不会（请参阅[比较方法违反其一般合同！仅限 Java 7](https://stackoverflow.com/questions/7849539/comparison-method-violates-its-general-contract-java-7-only)）

现在，可以使用 Arrays.useLegacyMergeSort 在 Java 7 中进行编译，但显然该标志不适用于 Java 6 - 我们希望在 Mac OS Snow Leopard（使用 6）上兼容。

出于某种原因（请参阅[http://madbean.com/2006/target14/](http://madbean.com/2006/target14/)） -target 编译器标志似乎不会产生兼容的代码，因此我们宁愿在 Java 6 中编译。

有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T04:59:46.947

尝试设置系统属性

`java -Djava.util.Arrays.useLegacyMergeSort=true ...`

请注意，它不是来自 Arrays 公共 API，而是来自 src

```
 /**
     * Old merge sort implementation can be selected (for
     * compatibility with broken comparators) using a system property.
     * Cannot be a static boolean in the enclosing class due to
     * circular dependencies. To be removed in a future release.
     */
    static final class LegacyMergeSort {
        private static final boolean userRequested =
            java.security.AccessController.doPrivileged(
                new sun.security.action.GetBooleanAction(
                    "java.util.Arrays.useLegacyMergeSort")).booleanValue();
    } 
```

# android - 将数据从服务发送到活动时出错

> ID：15893489
> 
> 赞同：2
> 
> 时间：2013-04-09T04:44:09.213
> 
> 标签：android, push-notification, google-cloud-messaging

我的应用是这样描述的：应用会从服务器接收推送信息，并显示在android的通知栏上。当我单击应用程序的通知时，将加载我从服务器获取的 url。但我现在的问题是，我无法将从服务器收到的 url 发送到原始活动。

以下是我运行应用程序时遇到的错误。

```
04-09 11:25:26.503: E/AndroidRuntime(1030): FATAL EXCEPTION:  IntentService[GCMIntentService-810012644757-1]
04-09 11:25:26.503: E/AndroidRuntime(1030): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
04-09 11:25:26.503: E/AndroidRuntime(1030):     at android.app.ContextImpl.startActivity(ContextImpl.java:624)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at com.ketan.demo.GCMIntentService.generateNotification(GCMIntentService.java:118)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at com.ketan.demo.GCMIntentService.onMessage(GCMIntentService.java:70)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:179)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at android.os.Looper.loop(Looper.java:130)
04-09 11:25:26.503: E/AndroidRuntime(1030):     at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我的代码：

```
private static void generateNotification(Context context, String message) {
    int icon = R.drawable.ic_stat_gcm;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);
    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent().setClass(context.getApplicationContext(), DemoActivity.class);
    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);                     
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification);
    notificationIntent.putExtra("URL", message);
    // Launch the new activity and add the additional flags to the intent
    context.getApplicationContext().startActivity(notificationIntent);

    /*Intent i = new Intent().setClass(context.getApplicationContext(), DemoActivity.class);  
    i.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);                     
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
    i.putExtra("URL", message);
    // Launch the new activity and add the additional flags to the intent
    context.getApplicationContext().startActivity(i);*/
} 
```

活动演示

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    checkNotNull(SERVER_URL, "http://10.0.2.2:8080/gcm-demo-server/");
   // checkNotNull(SENDER_ID, "972801588344");
    // Make sure the device has the proper dependencies.
    GCMRegistrar.checkDevice(this);
    // Make sure the manifest was properly set - comment out this line
    // while developing the app, then uncomment it when it's ready.
    GCMRegistrar.checkManifest(this);
    setContentView(R.layout.main);
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        url = extras.getString("URL");
    }
    web=(WebView) findViewById(R.id.webView1);
    if(url==null)
    {    
        web.loadUrl("http://kqxs.vn/trang_chu");
    }else
    {
        web.loadUrl(url);
    }
} 
```

我通过以下方式修复了以下内容

```
 private static void generateNotification(Context context, String message) {
    int icon = R.drawable.ic_stat_gcm;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);
    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context, DemoActivity.class);
    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    notificationIntent.putExtra("URL", message);
    PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification);
} 
```

但是我还有另一个问题，这是我第一次加载正确 url 的唯一应用程序，从第二次开始，在从服务器接收到新的 url 之后，但我的应用程序第一次加载了 url。我已经尝试了很多次，但仍然得到结果，所以......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:49:41.320

请看以下问题：

[Android：意图的 setFlags 和 addFlags 有什么区别](https://stackoverflow.com/questions/6664189/androidwhat-is-difference-between-setflags-and-addflags-for-intent)

`Intent.setFlags :`意味着您正在通过向意图添加新标志来替换旧标志

`Intent.addFlags :`表示您正在附加已添加到意图的新标志

因此，您将需要使用`notificationIntent.addFlags` 而不是`notificationIntent.setFlags` 将 Intent.FLAG_ACTIVITY_NEW_TASK 标志附加到`notificationIntent`意图：

```
.......
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);                  
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
        Intent.FLAG_ACTIVITY_SINGLE_TOP);
....... 
```

# php - Cakephp 在模型和视图之间调用函数

> ID：15893491
> 
> 赞同：1
> 
> 时间：2013-04-09T04:44:25.860
> 
> 标签：php, cakephp, separation-of-concerns

假设我有一个功能：

```
function getCarName() {
   return array(1 => 'BMW', 2 => 'MERCEDEZ BENZ', 3 => 'RENAULT');
} 
```

我将在模型和视图上使用这个函数，我应该在 AppHelper 和 Car Model 上创建两个相同的函数吗？实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:45:29.573

让两个函数做同样的事情通常是个坏主意，因为它违反了[不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的原则。

相反，我会将该函数添加到您的`Car`模型中，然后将数据从您的控制器传递到您的视图，例如：

```
$this->set('carNames', $this->Car->getCarNames()); 
```

然后，汽车名称可通过`$carNames`变量在视图中使用。

# asp.net-mvc-3 - MVC3 Razor 视图未在回发时呈现动态添加的控件

> ID：15893492
> 
> 赞同：1
> 
> 时间：2013-04-09T04:44:32.573
> 
> 标签：asp.net-mvc-3, razor

我必须上传选定的文件并将这些文件显示为回发的链接。在我看来，我将每个上传的文件添加为使用链接

```
 @if (Model.IncidentLogInfoDetails.AttachmentCollection.AttachmentItemCollection.Any())
  {
      foreach (EML.Container.Attachment attachmentItem in Model.IncidentLogInfoDetails.AttachmentCollection.AttachmentItemCollection)
      {
           @Html.ActionLink(attachmentItem.FileName, "testing")
      }
  } 
```

**这是我的控制器动作：**

```
 public ActionResult UploadingFiles(HttpPostedFileBase imageFile)
    {
        // Converting to Attachment object
        Attachment fileAttachment = new Attachment();
        fileAttachment.FileName = "imageFile.FileName";
        fileAttachment.ContentType = imageFile.ContentType;
        fileAttachment.SizeInBytes = imageFile.ContentLength;

        using (MemoryStream ms = new MemoryStream())
        {
            imageFile.InputStream.CopyTo(ms);
            fileAttachment.BinaryData = ms.GetBuffer();
        }

        IncidentDetails incidentDetails = new IncidentDetails();
        incidentDetails.IncidentLogInfoDetails = new IncidentLogInfo();
        incidentDetails.IncidentLogInfoDetails.AttachmentCollection.AttachmentItemCollection = new List<Attachment>();

        incidentDetails.IncidentLogInfoDetails.AttachmentCollection.AttachmentItemCollection.Add(fileAttachment);
        return View("FileUploadingTest", incidentDetails);
    } 
```

我的问题是，即使正在执行循环并创建了操作链接（在调试时），它们在回发后也不会显示。
我错过了什么？

# c# - Sitecore - 更新工作流程历史

> ID：15893495
> 
> 赞同：4
> 
> 时间：2013-04-09T04:44:46.020
> 
> 标签：c#, sitecore, sitecore6

是否可以以编程方式设置工作流注释？例如管理员用户“拒绝”工作箱中的项目，我们要求发表评论。稍后，我们的代理进程检索此评论并发送电子邮件。现在我需要我的自定义模块来做同样的事情（管理员拒绝功能）。

我猜这将与 Sitecore 用于设置工作流注释的代码相同......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:47:06.393

下面是执行任何工作流命令的代码，假设您知道命令项的 ID：

```
public bool Execute(Item item, ID commandId, string comment)
{
    var workflowId = item[FieldIDs.Workflow];

    if (String.IsNullOrEmpty(workflowId))
    {
        throw new WorkflowException("Item is not in a workflow");
    }

    IWorkflow workflow = item.Database.WorkflowProvider.GetWorkflow(workflowId);

    var workflowResult = workflow.Execute(commandId.ToString(), item, comment, false, new object[0]);
    if (!workflowResult.Succeeded)
    {
        var message = workflowResult.Message;
        if (String.IsNullOrEmpty(message))
        {
            message = "IWorkflow.Execute() failed for unknown reason.";
        }
        throw new Exception(message);
    }
    return true;
} 
```

# php - Php - 如何在 API 请求中使用 for 循环

> ID：15893497
> 
> 赞同：1
> 
> 时间：2013-04-09T04:44:53.600
> 
> 标签：php, api, foreach, amazon-web-services, amazon-simpledb

这是一个有效的示例请求，但名称是硬编码的

```
$client->batchDeleteAttributes(array(
    'DomainName' => $domainName,
    'Items' => array(
         array('Name' => '5149572a86deb5161fbb22bdab',),
         array('Name' => '5149572a86deb5161fbf7487b9',),
     )
)); 
```

我可以使用以下循环获取名称值

```
foreach($_POST['d'] as $key => $value)
{

} 
```

我很困惑如何将 foreach 循环与 api 请求集成。我假设我需要使用 foreach 循环创建一个数组，然后在 api 请求中使用该数组，但我不知道语法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:50:21.763

在不知道`$_POST`数据格式的情况下，很难给出详细的解决方案，但是这些方面的内容应该可以让您朝着正确的方向前进：

```
$names = array();
foreach ($_POST['d'] as $value)
{
    $names[] = array('Name' => $value);
} 
```

# c# - 如何在 C# vss 2010 或更低版本中实现安全的 websocket (wss://) 实现？

> ID：15893503
> 
> 赞同：0
> 
> 时间：2013-04-09T04:45:23.973
> 
> 标签：c#, .net-4.0, .net-3.5, websocket, .net-4.5

如何在 C# vss 2010 或更低版本中实现安全的 websocket (wss://) 实现？因为在 .net 4.5 中它实现了 WebSockets。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:53:43.150

我猜你是在谈论 .NET 4.0 和 C# 的 websockets？在那种情况下，我知道支持证书的 XSockets.NET（[http://xsockets.net](http://xsockets.net)）或超级 websocket（我认为在 codeplex 上）。.NET 4 上也可能是其他人

问候乌夫

# php - 两个网页上的 onChange 事件

> ID：15893505
> 
> 赞同：4
> 
> 时间：2013-04-09T04:45:35.710
> 
> 标签：php, drop-down-menu, web, onchange

我有两个网页。一个是main.php，另一个是combo.php。combo.php 包含一个下拉列表，我已将此页面包含在我的 main.php 中。

我想要做的是当有人在我的下拉列表中选择一个选项时，应该有一个警告框指示我选择的项目。

主文件

```
<html>
  <body>
    <form>
      //some elements
      <?php include 'combo.php';?>
    </form>
  </body>
</html> 
```

组合.php

```
<html>
  <body>
    <form>
      //some elements
      <select name="combo">
        <option value="1">America</option>
        <option value="2">England</option>
        <option value="3">India</option>
        <option value="4">Japan</option>
      </select>
      //some elements
    </form>
  </body>
</html> 
```

我无法对我的 combo.php 进行任何更改。onChange 事件和脚本应该在我的 main.php 中。我不知道该怎么做，我也不知道这是否可能。任何有关此事的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:54:54.557

您可以为此使用 Jquery，因为您必须包含此脚本，

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script type="text/javascript">
$(document).ready(function() {

    $("#getSelect").change(function() {
        alert($(this).val());
    });

});
</script> 
```

其中 getSelect 是选择控件的 id。

之后添加下面的php代码。

```
<form>
      //some elements
      <select name="combo" id="getSelect" onChange="return getSelect(this.value)">
        <option value="1">America</option>
        <option value="2">England</option>
        <option value="3">India</option>
        <option value="4">Japan</option>
      </select>
      //some elements
   </form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T04:54:41.177

添加一个像这样的javascript函数：

```
function getValue(val) {
    alert(val);
} 
```

并在您的下拉列表中像这样在 onChange 属性上添加此功能

```
<select name="combo" onchange="getValue(this.value);">
    <option value="1">America</option>
    <option value="2">England</option>
    <option value="3">India</option>
    <option value="4">Japan</option>
</select> 
```

当您更改下拉列表的值时，您应该在警报框中看到值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:03:14.473

如果你可以使用 jQuery，你只需要在你的`main.php`

```
$(document).ready(function() {

    $("#idOfYourSelect").change(function(changeEvent) {
        alert("Your value : " + $(this).val());
    });

}); 
```

假设您`<select>`至少有一个 id `idOfYourSelect`（或名称，或 css 类名 - 可以让您从 javascript 代码中检索它的东西）

这将在`change`事件上添加一个侦听器，并在每次更改值时运行回调。

如果你不能使用jQuery，那会有点复杂，你必须玩浏览器的差异，并使用`addEventLister`或`attachEvent`添加你的监听器。

[attachEvent 文档](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)（适用于旧 IE）

Firefox、webkit 等的[addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener?redirectlocale=en-US&redirectslug=DOM/element.addEventListener)

我建议您使用 jQuery，它将为您处理所有这些差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:10:30.610

好的，如果你不能改变它，那么如果你使用 JQuery，你可以像这样添加

```
$('select[name*="combo"]').change(function() {
      var str = $('select[name*="combo"]').val();
      alert (str);

  }); 
```

在 $(document).ready(function) 中添加这个

# php - 注意：未定义索引：标签

> ID：15893507
> 
> 赞同：1
> 
> 时间：2013-04-09T04:45:40.727
> 
> 标签：php, magento

我有这个烦人的错误：

```
ERR (3): Notice: Undefined index: label  in /var/www/html/www.mysite.com/prod/app/code/core/Mage/Core/Model/Layout.php on line 367 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:50:18.450

您的数组不包含索引为“标签”的项目，因此 PHP 会吐出此错误。

例如：

```
// Works fine.
$i = array();
$i['label'] = "My Value";

echo $i['label']; 
```

但是，这就是您的代码正在执行的操作，它不起作用。

```
$i = array();
$i['somerandomlabel'] = "My Value";

echo $i['label'); // Will fail, 'label' in $i is never set 
```

检查您的代码并确保您确实在某个时间点设置了“标签”。

# verilog - 如何在多个时钟周期内执行 for 循环？

> ID：15893509
> 
> 赞同：3
> 
> 时间：2013-04-09T04:45:52.920
> 
> 标签：verilog

for 循环工作正常，但一切都在一个时钟周期内发生。我如何让它每个周期运行一次迭代？

```
 `timescale 1ns/10ps
    module multiplier (clock,multiplier,multiplicand,start,done,product);

    input   [7:0]   multiplier ,multiplicand;
    input           start;
    input           clock;
    output  [15:0]  product;
    output          done;

    reg     [15:0]  multiplierF ,multiplicandF;
    reg     [15:0]  productF;
    reg             doneF;

    integer i;

    assign product  =   productF;
    assign done     =   doneF;

    task rpa_16;

    input   [15:0]      multiplierF;
    inout   [15:0]      productF;

    assign productF = multiplierF + productF;

    endtask

    always @ (posedge clock or posedge start)
    begin
    if(start)
        begin
            multiplierF     =   0 ;
            multiplicandF   =   0 ;
            productF        =   0 ;
            doneF           =   0 ;
        end
    else
        begin
            multiplierF     =   {8'b0,multiplier};
            multiplicandF    =   {8'b0,multiplicand};  
        end        
    end

    always @(posedge clk)
    begin
            if(!doneF)
                begin
                    for (i=0;i<7;i=i+1)
                        begin
                            if(multiplicand[i])
                                begin
                                rpa_16(multiplierF,productF); 
                                multiplierF =  multiplierF << 1;
                                productF     = productF;                       
                                end
                            else
                                begin
                                multiplierF = multiplierF << 1;
                                end
                        end
                    doneF = 1;
                end
    end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:01:00.467

> 我无法粘贴波形图片，但我希望我在每个上升沿后递增。但是发生了什么，for循环在一个时钟周期内执行，我得到了输出。

For 循环在 verilog 中并不意味着任何顺序。如果你想要一个需要 8 个时钟周期的循环，那么你必须用一个明确的计数器变量来重写它，可能是这样的：

```
always @(posedge clk or negedge reset_)
if(!reset_) begin
   multiplierF <= 0;
   loopcount   <= 0;
   doneF       <= 0;
end else begin
  if(!doneF) begin
     loopcount <= loopcount + 1;
     if(multiplicand[loopcount]) begin
       rpa_16(multiplierF,productF); 
       multiplierF =  multiplierF << 1;
       productF    = productF;                       
     end else begin
       multiplierF = multiplierF << 1;
     end
  end
  if(loopcount == 7) doneF <= 1;
end 
```

此外，您不应该像`multiplierF`在多个 always 块中那样分配变量，您将获得不确定的行为并且可能无法合成。在 posedge clk 上，两个块都会执行，你不知道哪个块会最后执行，所以它可能在不同的模拟器上给出不同的结果。

# scala - 无法在 SBT 0.12.3 中为运行和打包 jar 指定主类

> ID：15893512
> 
> 赞同：3
> 
> 时间：2013-04-09T04:46:09.303
> 
> 标签：scala, sbt, typesafe-stack, typesafe

出于某种原因，我不能同时`run`在 SBT 0.12.3 中指定主类和包装 jar。

问题是，`sbt publish-local`如果我没有明确设置它，它不会将主类的名称放入 jar 的清单中。

但有趣的是，这

```
mainClass in (Compile,run) := Some("Hi") 
```

和

```
mainClass in (Compile,packageBin) := Some("Hi") 
```

分开工作，但这

```
mainClass in (Compile,run,packageBin) := Some("Hi") 
```

导致 SBT 失败并出现以下错误

```
C:\work\test_projects\hw\build.sbt:13: error: reassignment to val
mainClass in (run,Compile,packageBin) := Some("Hi")
                                      ^
[error] Type error in expression 
```

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T17:34:58.773

`(Compile,run)`在_

```
mainClass in (Compile,run) := Some("Hi") 
```

是指定设置具有的四个轴中的两个轴，所以`(Compile,run,packageBin)`没有意义。如果你想从对方那里获取价值，你可以说：

```
mainClass in (Compile,packageBin) <<= mainClass in (Compile,run) 
```

有关更多详细信息，请查看[入门指南](http://www.scala-sbt.org/0.12.4/docs/Getting-Started/More-About-Settings.html#computing-a-value-based-on-other-keys-values)。

# eclipse-plugin - eclipse插件开发中的弹出菜单

> ID：15893514
> 
> 赞同：1
> 
> 时间：2013-04-09T04:46:28.403
> 
> 标签：eclipse-plugin

我想创建一个插件，如果用户右键单击任何文件夹或文件，弹出菜单将打开并且有读取文件的选项。因为我是插件开发的新手，所以我做了一些代码。我的 plugin.xml 如下

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         point="org.eclipse.ui.commands">
      <category
            name="Sample Category"
            id="com_.samsung.plugin.second.commands.category">
      </category>
      <command
            name="Sample Command"
            categoryId="com_.samsung.plugin.second.commands.category"
            id="com_.samsung.plugin.second.commands.sampleCommand">
      </command>
      <command
            defaultHandler="com .samsung.plugin.second.SampleHandler"
            id="com .samsung.plugin.second.Sample"
            name="name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="com_.samsung.plugin.second.commands.sampleCommand"
            class="com_.samsung.plugin.second.handlers.SampleHandler">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="com_.samsung.plugin.second.commands.sampleCommand"
            contextId="org.eclipse.ui.contexts.window"
            sequence="M1+6"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
         <command commandId="com_.samsung.plugin.second"
            label="Read File" style="push">
        </command>
      </menuContribution>

   </extension>
   <extension point="org.eclipse.ui.commands">
    <command defaultHandler="com_.samsung.plugin.second.handler.SampleHandler"
      id="com_.samsung.plugin.second" name="Convert">
    </command>
  </extension>

</plugin> 
```

我在 com_.samsung.plugin.second.handlers 中有一个**SampleHandler**类**；**

但在弹出的 Readfile 选项中不可见。

请建议我这有什么问题。

任何帮助将不胜感激。

谢谢

# mysql - 如何查看 ibdata 文件的内容？

> ID：15893518
> 
> 赞同：3
> 
> 时间：2013-04-09T04:46:48.717
> 
> 标签：mysql

给定一个`mysql` `ibdata`文件（最初位于`/var/lib/mysql/`ubuntu 服务器上），有没有办法以人类可读的格式查看它。

我了解无法将其转换为 CSV。它似乎是某种十六进制格式。

据我了解，该`ibdata`文件基本上是使数据库恢复到当前状态所需的步骤。

本质上，我想查看每个步骤。我没有这些`.frm`表的关联文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:01:22.483

虽然不是人类可读的，但可以为各种目的转换`MySQL ibdata`文件。您是否尝试过 InnoDB 恢复工具？ [https://launchpad.net/percona-data-recovery-tool-for-innodb](https://launchpad.net/percona-data-recovery-tool-for-innodb)

文档位于[http://www.percona.com/docs/wiki/innodb-data-recovery-tool:start](http://www.percona.com/docs/wiki/innodb-data-recovery-tool:start)

# rest - Broadleaf commerce Api 将商品添加到购物中不起作用

> ID：15893519
> 
> 赞同：2
> 
> 时间：2013-04-09T04:46:49.667
> 
> 标签：rest, broadleaf-commerce

[我已经按照其文档（ http://docs.broadleafcommerce.org/current/REST-Tutorials.html](http://docs.broadleafcommerce.org/current/REST-Tutorials.html)）设置了 Broadleaf 以使其运行。设置网站工作正常。但是，当我测试将商品添加到购物车 REST api 时，我发现它导致了我的错误。这是我的输入：

url: localhost:8080/api/cart/2003/100?skuId=100&customerId=1101 请求方式: POST

发现错误：[错误] 02:15:57 DefaultErrorHandler - 工作流 org.broadleafcommerce.core.order.service.exception.RequiredAttributeNotProvidedException 期间发生错误：无法添加到产品 (100) 购物车。未提供必需属性：颜色

我的设置环境是： - Broadleaf commerce 2.2 - MySql 数据库，其数据来自 Braodleaf DemoSite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:13:44.413

您看到这一点是因为您为该特定产品配置了一些必需的产品选项，但没有将这些必需的属性传递到您的请求中。使用如下请求再次尝试您的请求：

本地主机：8080/api/cart/2003/100?customerId=1101&COLOR=BLUE

这假设您有一个与颜色产品选项对应的“蓝色”产品选项值。

话虽如此，这里似乎可能存在错误，因为如果您像以前那样在请求中明确传递了一个 skuId，它应该使用它作为优先级。当前代码假定您通过产品选项值查找（这优先）选择 Sku，然后检查传入的 Sku ID。当系统尝试根据传入的产品选项值（在这种情况下，没有）查找 Sku 时，它会看到您没有传入所需的产品选项（在这种情况下为颜色）并抛出异常.

# c++ - 使用指向字符串的指针初始化指向字符串中字符的指针

> ID：15893522
> 
> 赞同：1
> 
> 时间：2013-04-09T04:47:12.137
> 
> 标签：c++

```
int isPurePalindrome(const char *sentence){ 
int i;     
if (sentence="")     
return 0; 
char *begin; char *end; i=strlen(sentence);//i is now the length of sentence string 
*begin= &sentence(0); 
*end=&sentence[i-1]; 
```

我正在使用开发 C++。我试图将指针“begin”初始化为指向字符串“sentence”中的第一个字符，但它一直给我一个错误，即“赋值从指针生成整数而不进行强制转换”。“*sentence”指向用户在main中输入的字符串。ispalindrome 是我正在编写的函数。如果在 main 中输入的句子是 NULL，它假设返回 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:51:15.067

您的代码存在一些问题：

```
if (sentence="") return 0; 
```

应该

```
if (strcmp(sentence,"")==0) return 0; 
```

* * *

```
char *begin; char *end; 
```

应该

```
const char *begin; const char *end; 
```

* * *

```
*begin= &sentence(0); 
```

应该

```
begin = &sentence[0]; 
```

* * *

```
*end=&sentence[i-1]; 
```

应该

```
end = &sentence[i-1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:01:18.087

```
begin = &sentence[0];
end = &sentence[i - 1]; 
```

这将解决你的问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:51:16.963

您的代码中有很多问题，但导致该错误消息的一个问题是您在不需要时取消引用。你要：

```
begin = &sentence[0];
end = &sentence[i-1]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T05:17:32.137

你应该写`[]`insted of `()`in

```
 *begin= &sentence(0); 
```

在将其分配给开始和结束之前，您应该将句子转换为 (char*)。

```
*begin =  ((char*)sentence)[0];

*end =  ((char*)sentence)[i -1]; 
```

# haskell - Haskell中GHC.Prim中的“let x = x in x”和“data Float#”是什么意思

> ID：15893524
> 
> 赞同：16
> 
> 时间：2013-04-09T04:47:46.577
> 
> 标签：haskell, ghc, haddock

我查看了 GHC.Prim 的模块，发现似乎 GHC.Prim 中的所有数据都定义为`data Float#`没有类似的东西`=A|B`，而 GHC.Prim 中的所有函数都定义为`gtFloat# = let x = x in x`。

我的问题是这些定义是否有意义以及它们的含义。

我检查了 GHC.Prim 的标题，如下所示

```
{-
This is a generated file (generated by genprimopcode).
It is not code to actually be used. Its only purpose is to be
consumed by haddock.
-} 
```

我想这可能与问题有关，谁能向我解释一下。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T04:54:48.963

这是魔法 ：）

这些是“原始运算符和操作”。它们被硬连线到编译器中，因此没有原语的数据构造函数，并且所有函数都是底部的，因为它们不一定在纯 haskell 中可表达。

（底部代表haskell程序中的一个“洞”，一个无限循环或者`undefined`是底部的例子）

换一种方式

这些数据声明/函数将提供对原始编译器内部的访问。GHC.Prim 的存在是为了导出这些原语，它实际上并没有实现它们或任何东西（例如，它的代码实际上没有用）。所有这些都在编译器中完成。

它适用于需要*极度*优化的代码。如果您认为您可能需要它，请[阅读](http://www.haskell.org/ghc/docs/7.8.3/html/users_guide/primitives.html)有关 GHC 中原语的一些有用信息

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-10T01:42:36.163

## jozefg答案的简短扩展......

Primops 正是那些由运行时提供的操作，因为它们不能在语言中定义（或者出于效率的原因不应该定义）。的真正目的`GHC.Prim`不是定义任何东西，而只是导出一些操作，以便 Haddock 可以记录它们的存在。

在 GHC 的代码库中此时使用该构造`let x = x in x`，因为该值`undefined`尚未，嗯，“定义”。（这要等到 Prelude。）但是请注意，循环`let`结构就像 一样`undefined`，在语法上都是正确的，并且可以具有任何类型。也就是说，它是一个具有 ⊥ 语义的无限循环，就像它一样`undefined`。

## ……还有一个旁白

另请注意，通常 Haskell 表达式的`let x = z in y`意思是“将变量更改`x`为表达式中出现的`z`任何位置”。如果您熟悉 lambda 演算，您应该认识到这是将 lambda 抽象应用于术语的简化规则。那么 Haskell 表达式只不过是纯 lambda 演算之上的一些语法吗？让我们来看看。`x``y``\x -> y``z``let x = x in x`

首先，我们需要考虑 Haskell 的 let 表达式的递归性。lambda 演算不允许递归定义，但给定一个原始的定点运算符`fix`1，^(我们)可以显式地编码递归性。例如，Haskell 表达式`let x = x in x`与 具有相同的含义`(fix \r x -> r x) z`。²（我已将`x`应用程序右侧的重命名`z`以强调它`x`与 lambda 内部没有隐式关系）。

应用定点运算符的通常定义`fix f = f (fix f)`，我们对`let x = x in x`reduce（或者更确切地说不是）的翻译如下：

```
(fix \r x -> r x) z                 ==>
(\s y -> s y) (fix \r x -> r x) z   ==>
(\y -> (fix \r x -> r x) y) z       ==>
(fix \r x -> r x) z                 ==>   ... 
```

因此，在语言开发的这一点上，我们已经从（类型化的）lambda 演算的基础上引入了 ⊥ 的语义，并带有内置的定点运算符。迷人的！

* * *

1.  我们需要一个原始的定点运算（即内置于语言中的运算），因为不可能在简单类型的 lambda 演算及其近亲中定义定点组合子。（`fix`Haskell 的 Prelude 中的定义并不矛盾——它是递归定义的，但我们需要一个定点运算符来实现递归。）

2.  如果您以前没有看过这个，您应该阅读 lambda 演算中的定点递归。关于 lambda 演算的文本是最好的（网上有一些免费的），但一些谷歌搜索应该能让你继续前进。基本思想是，我们可以通过对递归调用进行抽象来将递归定义转换为非递归定义，然后使用定点组合器将我们的函数（lambda 抽象）传递给自身。定义良好的递归定义的基本情况对应于我们函数的一个固定点，因此函数会执行，一遍又一遍地调用自己，直到它到达一个固定点，此时函数返回其结果。非常整洁，对吧？

# javascript - Javascript while循环变量

> ID：15893525
> 
> 赞同：-3
> 
> 时间：2013-04-09T04:47:56.123
> 
> 标签：javascript

`myCounter = myCounter + 1;`对于为什么不需要`var`在语句本身之前声明a ，我有点困惑。

```
var myCounter=0;
var lineBreak='<br>';

while (myCounter <= 5) {
    document.write('Hello World' + lineBreak);
    myCounter = myCounter + 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:49:42.940

变量在第一行初始化。

```
var myCounter=0; 
```

引用它的其他两行使用相同的变量

```
while (myCounter <= 5) {
    document.write('Hello World' + lineBreak);
    myCounter = myCounter + 1;
} 
```

如果它没有在顶部初始化（缺少`var`关键字），那么它将被认为是一个“全局”变量。这当然是不好的做法，您应该始终只在需要它们的范围内定义变量。您甚至可以在文件顶部[放置一条`"use strict";`语句](https://developer.mozilla.org/en/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)，以便在未定义变量时抛出异常。

# android - MemoryFile.finalize() 在 ashmem 仍然打开时调用 - 如何处理 - Android

> ID：15893527
> 
> 赞同：1
> 
> 时间：2013-04-09T04:48:03.163
> 
> 标签：android, memory

我在 SO 上看到过关于同一问题的问题，但没有一个问题得到公认的答案。

究竟是什么错误通知？为什么会出现这种情况？

我的应用程序中的游标很少，我确实在他们的工作完成后关闭了它们。但是错误仍然出现。可能是什么原因？

这是代码:::

```
private String fetchContactIdFromPhoneNumber(String phoneNumber) {
    // TODO Auto-generated method stub

    Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(phoneNumber));
    Cursor cFetch = getContentResolver().query(uri,
            new String[] { PhoneLookup.DISPLAY_NAME, PhoneLookup._ID },
            null, null, null);

    String contactId = "";

    if (cFetch.moveToFirst()) {

        cFetch.moveToFirst();

            contactId = cFetch.getString(cFetch
                    .getColumnIndex(PhoneLookup._ID));

    }

    //System.out.println(contactId);
    if(cFetch != null)
    {
        cFetch.close();
    }
    return contactId;       

}

public Uri getPhotoUri(long contactId) {
    ContentResolver contentResolver = getContentResolver();

    Cursor cursor;
    try {
        cursor = contentResolver
                .query(ContactsContract.Data.CONTENT_URI,
                        null,
                        ContactsContract.Data.CONTACT_ID
                                + "="
                                + contactId
                                + " AND "

                                + ContactsContract.Data.MIMETYPE
                                + "='"
                                + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE
                                + "'", null, null);

        if (cursor != null) {
            if (!cursor.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }

    } catch (Exception e) {
        e.printStackTrace();

        return null;
    }

   if(cursor != null)
   {
       cursor.close();
   }

    Uri person = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, contactId);
    return Uri.withAppendedPath(person,
            ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
} 
```

这是我使用游标的代码。我还有一个 contentresolver 对象。我也应该关闭它吗？

最后，这个错误对应用程序有什么影响，因为它似乎并没有中断应用程序的执行。

# cuda - Tesla M2050 上 CUDA 内核的最大线程数

> ID：15893532
> 
> 赞同：1
> 
> 时间：2013-04-09T04:49:04.347
> 
> 标签：cuda

我正在测试一个简单内核的最大线程数。我发现线程总数不能超过4096。代码如下：

```
#include <stdio.h>
#define N 100

__global__ void test(){
    printf("%d %d\n", blockIdx.x, threadIdx.x);
}

int main(void){
    double *p;
    size_t size=N*sizeof(double);
    cudaMalloc(&p, size);
    test<<<64,128>>>();
   //test<<<64,128>>>();
   cudaFree(p);
   return 0;
} 
```

我的测试环境：Tesla M2050 上的 CUDA 4.2.9。代码是用

```
 nvcc -arch=sm_20 test.cu 
```

在检查输出时，我发现缺少一些组合。运行命令

```
./a.out|wc -l 
```

我总是得到 4096。当我检查 cc2.0 时，我只能找到 x,y,z 维度的最大块数是 (1024,1024,512)，每个块的最大线程数是 1024。并且调用内核（要么 要么`<<<64,128>>>`）`<<<128,64>>>`完全在限制范围内。任何的想法？

注意：CUDA 内存操作用于阻止代码，以便显示内核的输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T04:59:14.613

你在滥用内核`printf`，用它来判断你可以运行多少个线程是一个完全荒谬的想法。运行时的输出缓冲区大小有限`printf`，当您运行足够多的线程时，您只是在输出溢出。有一个 API 用于查询和设置`printf`缓冲区大小，使用`cudaDeviceGetLimit`and `cudaDeviceSetLimit`（感谢 Robert Crovella在评论中提供的文档[链接](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#formatted-output)`printf`）。

您可以通过查看文档中的[此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#compute-capabilities)找到给定内核可以运行的最大线程数。

# javascript - 运行时 HTML 页面布局更改

> ID：15893533
> 
> 赞同：0
> 
> 时间：2013-04-09T04:49:05.537
> 
> 标签：javascript, html, frameset

一个 HTML 页面包含三个框架。

```
<frameset cols="30%, *">
 <frame src="frame_a.htm">
  <frameset rows="60%, *">
   <frame src="frame_b.htm">
   <frame src="frame_c.htm">
 </frameset>
</framset> 
```

我需要做的是，在按钮的单击事件中将该框架布局更改为其他两种样式。页面包含三个按钮，1）默认样式，2）样式2，3）样式3

```
<!-- Style-2 -->
<!--
<frameset cols="*, 30%">
 <frameset rows="60%, *">
  <frame src="frame_b.htm">
  <frame src-"frame_c.htm">
 </frameset>
<frame src="frame_a.htm">
</frameset>
-->
<!-- Style-3 -->
<!--
<frameset cols="30%,35%,35%">
  <frame src="frame_a.htm">
  <frame src="frame_b.htm">
  <frame src="frame_c.htm">
</frameset>
--> 
```

当页面加载并且用户单击按钮 2 或 3 并且页面分别更改为样式 2 或 3 时，我该怎么做。

CSS 可能是一个方便的选择，但我不想在这里使用 CSS。在这方面指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:05:03.090

[jsFiddle 演示](http://jsfiddle.net/Class/UuMCU/3/)

该演示不允许我将按钮添加到框架中，因此我添加了一个提示，以便您可以刷新页面并输入新值以查看不同的样式。

HTML：

```
<button id="btn1">Default</button>
<button id="btn2">Style 1</button>
<button id="btn3">Style 2</button> 
```

JS：

```
$('#btn1').click(function () {
    $('#fset1').attr('cols', '30%, *');
    $("#frame1").appendTo("#fset1");
    $("#frame2").appendTo("#fset2");
    $("#frame3").appendTo("#fset2");
    $('#fset2').appendTo("#fset1");
});
$('#btn2').click(function () {
    $('#fset2').appendTo("#fset1");
    $('#fset1').attr('cols', '*, 30%');
    $("#frame1").appendTo("#fset2");
    $("#frame2").appendTo("#fset2");
    $("#frame3").appendTo("#fset1");
});
$('#btn3').click(function () {
    $('#fset1').attr('cols', '30%,35%,35%');
    $("#frame1").appendTo("#fset1");
    $("#frame2").appendTo("#fset1");
    $("#frame3").appendTo("#fset1");
    $('#fset2').appendTo("#fset1");
}); 
```

# python - Python argparse key=value 参数

> ID：15893540
> 
> 赞同：3
> 
> 时间：2013-04-09T04:50:03.807
> 
> 标签：python, parsing, options, argparse

我已经尝试在堆栈溢出时查找此问题的答案，但找不到针对我的特定情况的确切答案。

第一个链接在第一部分有相同的问题，但没有答案（[python argparse: parameter=value](https://stackoverflow.com/questions/14591241/python-argparse-parameter-value)）。这第二个问题是相似的，但我似乎无法让它适用于我的特定情况（[使用 argparse 解析形式为 "arg= val" 的参数](https://stackoverflow.com/questions/5154716/using-argparse-to-parse-arguments-of-form-arg-val)）。

所以我的情况是这样的——我正在重写一个被许多其他脚本使用的 python 包装器（我不想修改这些其他脚本）。`--key=value`目前，python 包装器是使用形式为许多不同参数的命令行参数调用的，但是是手动解析的。我想用 argparse 解析它们。

注意参数名称很笨拙，所以我使用`dest`add_argument 中的选项重命名。

```
parser = argparse.ArgumentParser(description='Wrappin Ronnie Reagan')
parser.add_argument("--veryLongArgName1", nargs=1, dest="arg1", required=True)
parser.add_argument("--veryLongArgName2", nargs=1,   dest="arg2")
parser.add_argument("--veryLongArgName3", nargs=1,  dest="arg3")
userOpts = vars(parser.parse_args()) 
```

其中，虽然显然正确解析了传递的命令行，但将其显示为帮助：

```
usage: testing_argsparse.py [-h] --veryLongArgName1 ARG1
                        [--veryLongArgName2 ARG2]
                        [--veryLongArgName3 ARG3]
testing_argsparse.py: error: argument --veryLongArgName1 is required 
```

但我想要的是所有参数都用`--key=value`格式指定，而不是`--key value`. IE

```
usage: testing_argsparse.py [-h] --veryLongArgName1=ARG1
                        [--veryLongArgName2=ARG2]
                        [--veryLongArgName3=ARG3]
testing_argsparse.py: error: argument --veryLongArgName1 is required 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:20:04.170

```
testing_argsparse.py --veryLongArgName1=foo 
```

作品。argparse 模块同时接受`--veryLongArgName1=foo`和`--veryLongArgName1 foo`格式。

您试图将哪些确切的命令行参数传递给 argparse 导致它不起作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-15T02:56:49.420

有点晚了，但对于任何与 OP 有类似请求的人，您可以使用自定义[HelpFormatter](https://docs.python.org/2/library/argparse.html#formatter-class)。

```
class ArgFormatter(argparse.HelpFormatter):
    def _format_args(self, *args):
        result = super(ArgFormatter, self)._format_args(*args)
        return result and '%%%' + result

    def _format_actions_usage(self, *args):
        result = super(ArgFormatter, self)._format_actions_usage(*args)
        return result and result.replace(' %%%', '=') 
```

然后可以将其传递`ArgumentParser`给以提供所需的行为。

```
parser = argparse.ArgumentParser(
    description='Wrappin Ronnie Reagan',
    formatter_class=ArgFormatter) 
```

这会拦截 args ( `ARG1, ARG2, ...`) 并添加一个自定义前缀，该前缀稍后会被替换（连同不需要的空格）用于`=`符号。return 语句中的`and`确保仅在结果非空时修改结果。

# php - 显示或隐藏使用 php 和 javascript 生成 id 的 div

> ID：15893544
> 
> 赞同：1
> 
> 时间：2013-04-09T04:50:23.467
> 
> 标签：php, javascript

我正在尝试根据 php 函数中的 div id 隐藏或显示 div。我无法使它工作，请帮助我。

Javascript：

```
<script>
showOrHide(id) {
    var elem=getElementById(id);
    if(elem.style.visibility="hidden")
        elem.style.visibility="visible";
    else
        elem.style.visibility="hidden";
}
</script> 
```

PHP 脚本：

```
<?php
function display_link($link_id,$upvote_array,$downvote_array,$divid) {
?>
    <a href="javascript:showOrHide(<?php echo $divid; ?>)">More links</a>
    <div id="<?php echo $divid ?>" style="visibility:hidden;">
    </div>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:58:14.107

这是您的功能的清理版本。

```
function showOrHide(id) {

  var elem = document.getElementById(id);

  elem.style.visibility = (elem.style.visibility === 'hidden')? 'visible' : 'hidden';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:59:37.837

```
<script>
function showOrHide(id){
 var elem = getElementById(id);
 if(elem.style.visibility=="hidden"){
  elem.style.visibility="visible";
 } else {
  elem.style.visibility="hidden";
 }
}
</script>
<?php
function display_link($link_id,$upvote_array,$downvote_array,$divid)
{
?>
<a href="javascript:showOrHide('<?php echo $divid; ?>')">More links</a>
<div id="<?php echo $divid ?>" style="visibility:hidden;">
</div> 
```

1 - 可见性 == '隐藏'

2 - 失踪; 在可见性=“可见”和“隐藏”之后

3 - href="javascript:showOrHide('')" - 在你的 javascript 函数中缺少 ''

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T04:57:31.357

试试这个

```
 <script>
    function showOrHide(id){
     var elem = document.getElementById(id);

  elem.style.visibility = (elem.style.visibility === 'hidden')? 'visible' : 'hidden';
    }

    </script>
    <?php
    function display_link($link_id,$upvote_array,$downvote_array,$divid)
    {
    ?>
    <a  href="javascript:showOrHide(<?php echo $divid; ?>)">More links</a>
    <div id="<?php echo $divid ?>" style="display:hidden;">
    </div>
    <?php
    }
    ?> 
```

# gawk - 使用多个线程/内核来提高 awk 性能

> ID：15893547
> 
> 赞同：2
> 
> 时间：2013-04-09T04:50:36.213
> 
> 标签：gawk, multiple-processes

我有一个包含约 50k 个文件的目录。每个文件有 ~700000 行。我编写了一个 awk 程序来读取每一行并仅在出现错误时打印。一切都运行得很好，但是花费的时间很长 - 大约 4 天！！！！有没有办法减少这个时间？我们可以使用多个内核（进程）吗？以前有人试过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-21T15:53:07.017

`awk`并且`gawk`不会自己为您解决此问题。没有神奇的“使其并行”开关。您将需要在某种程度上重写：

*   **按文件**分片 - 解决此问题的最简单方法是并行运行多个 awks，每个文件一个。您将需要某种调度机制。 [使用最大进程数并行化 Bash 脚本](https://stackoverflow.com/questions/38160/parallelize-bash-script-with-maximum-number-of-processes)显示了如何在 shell 中自己编写它。这将需要更多阅读，但如果您想要更多功能，请查看适合您的问题的[gearman](http://gearman.org/)或[celery](http://www.celeryproject.org/)
*   **更好的硬件**- 听起来您可能需要更快的 CPU 才能使其运行得更快，但这也可能是 I/O 问题。拥有来自 munin 或其他一些监控系统的 CPU 和 I/O 图表将有助于隔离在这种情况下哪个是瓶颈。您是否尝试过在基于 SSD 的系统上运行此作业？如今，这通常很容易获胜。
*   **缓存**- 可能有一些重复的行或文件。如果有足够的重复项，以某种方式缓存处理会很有帮助。如果您计算`md5sum`文件的 CRC/ 并将其存储在数据库中，则可以计算新文件的 md5sum 并跳过处理（如果您已经这样做了）。
*   **完全重写**- 缩放这个`awk`在某些时候会变得荒谬。使用一些[map-reduce](https://en.wikipedia.org/wiki/MapReduce)框架可能是一个好主意。

# android - 如何在 Drag-Sort ListView 中刷新 ListView？

> ID：15893550
> 
> 赞同：4
> 
> 时间：2013-04-09T04:50:59.090
> 
> 标签：android, listview, android-listfragment

我在我的项目中同时实现了 Drag-Sort ListView(DSLV) 和 LazyList，我从 github 下载了 Demo [LazyList](https://github.com/thest1/LazyList)和[Drag-Sort ListView](https://github.com/bauerca/drag-sort-listview) 然后根据我的要求进行集成和修改，

我使用 DSLV 对 ListView 和 LazyList 的项目进行拖动和排序以从 URL 显示图像，我只是从 DSLV 实现“基本用法游乐场”进行拖动和排序，

我在 TestBedDSLV.java 中实现了搜索，但问题是当我从列表中搜索内容时，但我无法更新列表，我尝试了 notifyDataSetChanged 方法但它不起作用，通常我们创建新适配器并传递它像 lv.setAdapter(adapter) 这样的 listview ，但是这里他们只是设置了 ListAdapter，所以我们不能做 lv.setAdapter(adapter)

TestBedDSLV.java

```
package com.mobeta.android.demodslv;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.Menu;
import android.view.MenuInflater;
import android.widget.Button;
import android.widget.EditText;

import com.mobeta.android.dslv.DragSortController;
import com.mobeta.android.dslv.DragSortListView;

public class TestBedDSLV extends FragmentActivity { 

private int mNumHeaders = 0;
private int mNumFooters = 0;

private int mDragStartMode = DragSortController.ON_DOWN;
private boolean mRemoveEnabled = false;
private int mRemoveMode = DragSortController.FLING_RIGHT_REMOVE;
private boolean mSortEnabled = true;
private boolean mDragEnabled = true;

private String mTag = "dslvTag";
Button search;
EditText search_customer;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test_bed_main);

    search = (Button) findViewById(R.id.btn_search);
    search_customer = (EditText) findViewById(R.id.search_product);

    search_customer.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            // here is logic for refresh the list View
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    });

    if (savedInstanceState == null) {
        getSupportFragmentManager().beginTransaction()
                .add(R.id.test_bed, getNewDslvFragment(), mTag).commit();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mode_menu, menu);
    return true;
}

private Fragment getNewDslvFragment() {
    DSLVFragmentClicks f = DSLVFragmentClicks.newInstance(mNumHeaders,
            mNumFooters);
    f.removeMode = mRemoveMode;
    f.removeEnabled = mRemoveEnabled;
    f.dragStartMode = mDragStartMode;
    f.sortEnabled = mSortEnabled;
    f.dragEnabled = mDragEnabled;
    return f;
}
} 
```

DSLVFragmentClicks.java

```
package com.mobeta.android.demodslv;

import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;
import android.os.Bundle;
import android.widget.Toast;

public class DSLVFragmentClicks extends DSLVFragment {

public static DSLVFragmentClicks newInstance(int headers, int footers) {
    DSLVFragmentClicks f = new DSLVFragmentClicks();

    Bundle args = new Bundle();
    args.putInt("headers", headers);
    args.putInt("footers", footers);
    f.setArguments(args);

    return f;
}

AdapterView.OnItemLongClickListener mLongClickListener = 
        new AdapterView.OnItemLongClickListener() {
            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                String message = String.format("Long-clicked item %d", arg2);
                Toast.makeText(getActivity(), message, Toast.LENGTH_SHORT).show();
                return true;
            }
        };

@Override
public void onActivityCreated(Bundle savedState) {
    super.onActivityCreated(savedState);

    ListView lv = getListView();
    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            String message = String.format("Clicked item %d", arg2);
            Toast.makeText(getActivity(), message, Toast.LENGTH_SHORT).show();

        }
    });
    lv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            String message = String.format("Long-clicked item %d", arg2);
            Toast.makeText(getActivity(), message, Toast.LENGTH_SHORT).show();
            return true;
        }
    });
}
} 
```

DSLVFragment.java

```
package com.mobeta.android.demodslv;

import java.util.ArrayList;
import java.util.Arrays;

import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

import com.mobeta.android.dslv.DragSortController;
import com.mobeta.android.dslv.DragSortListView;

public class DSLVFragment extends ListFragment {

ArrayAdapter<String> adapter;

private String[] array;
public static ArrayList<String> list;

private DragSortListView.DropListener onDrop = new DragSortListView.DropListener() {
    @Override
    public void drop(int from, int to) {
        if (from != to) {
            String item = adapter.getItem(from);
            adapter.remove(item);
            adapter.insert(item, to);
        }
    }
};

private DragSortListView.RemoveListener onRemove = new DragSortListView.RemoveListener() {
    @Override
    public void remove(int which) {
        adapter.remove(adapter.getItem(which));
    }
};

protected int getLayout() {
    return R.layout.dslv_fragment_main;
}

/**
 * Return list item layout resource passed to the ArrayAdapter.
 */
protected int getItemLayout() {
    return R.layout.list_item_handle_right;

}

private DragSortListView mDslv;
private DragSortController mController;

public int dragStartMode = DragSortController.ON_DOWN;
public boolean removeEnabled = false;
public int removeMode = DragSortController.FLING_RIGHT_REMOVE;
public boolean sortEnabled = true;
public boolean dragEnabled = true;

public static DSLVFragment newInstance(int headers, int footers) {
    DSLVFragment f = new DSLVFragment();

    Bundle args = new Bundle();
    args.putInt("headers", headers);
    args.putInt("footers", footers);
    f.setArguments(args);

    return f;
}

public DragSortController getController() {
    return mController;
}

/**
 * Called from DSLVFragment.onActivityCreated(). Override to set a different
 * adapter.
 */
public void setListAdapter() {
    array = getResources().getStringArray(R.array.jazz_artist_names);
    list = new ArrayList<String>(Arrays.asList(array));

    adapter = new ArrayAdapter<String>(getActivity(), getItemLayout(),
            R.id.text, list);
    setListAdapter(adapter);
}

/**
 * Called in onCreateView. Override this to provide a custom
 * DragSortController.
 */
public DragSortController buildController(DragSortListView dslv) {
    DragSortController controller = new DragSortController(dslv);
    controller.setDragHandleId(R.id.drag_handle);
    controller.setClickRemoveId(R.id.click_remove);
    controller.setRemoveEnabled(removeEnabled);
    controller.setSortEnabled(sortEnabled);
    controller.setDragInitMode(dragStartMode);
    controller.setRemoveMode(removeMode);
    return controller;
}

/** Called when the activity is first created. */
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mDslv = (DragSortListView) inflater.inflate(getLayout(), container,
            false);

    mController = buildController(mDslv);
    mDslv.setFloatViewManager(mController);
    mDslv.setOnTouchListener(mController);
    mDslv.setDragEnabled(dragEnabled);

    return mDslv;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    mDslv = (DragSortListView) getListView();

    mDslv.setDropListener(onDrop);
    mDslv.setRemoveListener(onRemove);

    Bundle args = getArguments();
    int headers = 0;
    int footers = 0;
    if (args != null) {
        headers = args.getInt("headers", 0);
        footers = args.getInt("footers", 0);
    }
    setListAdapter();
}
} 
```

test_bed_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/search_lay"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/search_product"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="2dp"
        android:layout_weight="1"
        android:background="@drawable/search_back"
        android:hint="Enter Firstname"
        android:imeOptions="actionSearch"
        android:inputType="text"
        android:paddingBottom="2dp"
        android:paddingLeft="5dp"
        android:paddingTop="2dp"
        android:visibility="visible" />

    <Button
        android:id="@+id/btn_search"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_weight="2.5"
        android:text="CANCEL"
        android:textColor="#155280"
        android:textSize="14sp"
        android:textStyle="bold"
        android:visibility="visible" />
</LinearLayout>

<FrameLayout
    android:id="@+id/test_bed"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
<!-- We will add the DSLVFragment inside the FrameLayout in code -->

</LinearLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/znkNy.png)

和其他需要类可以从我上面给出的github链接下载.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:16:58.353

实际上，如果您仔细查看您的代码，那么您会提到一种方法

```
public void setListAdapter() {
    array = getResources().getStringArray(R.array.jazz_artist_names);
    list = new ArrayList<String>(Arrays.asList(array));

    adapter = new ArrayAdapter<String>(getActivity(), getItemLayout(),
            R.id.text, list);
    setListAdapter(adapter);
} 
```

所以正如你所说：“通常我们创建新的适配器并将其传递给 listview 像 lv.setAdapter(adapter) ，但这里他们只是设置 ListAdapter，所以我们不能做 lv.setAdapter(adapter)”

您不能通过根据您的搜索轻松生成数组并将其设置为代码来轻松做到这一点吗？

```
list = new ArrayList<String>(Arrays.asList(array));

        adapter = new ArrayAdapter<String>(getActivity(), getItemLayout(),
                R.id.text, list);
        setListAdapter(adapter); 
```

编辑：我认为你问错了问题。您主要关心的是如何在活动和片段之间进行通信......因为您的搜索功能处于活动状态而列表处于片段中。因此，您需要设置一个接口，该接口基本上将搜索字符串传递给您的片段，您可以在那里创建一个数组并以与您现在相同的方式设置它。

阅读[这个](https://stackoverflow.com/questions/13620711/how-to-pass-data-from-activity-to-fragment)SO 问题和答案。在答案中，您会发现一种在活动和片段之间传递数据的类似方法。

编辑2：您主要关心的是从活动到片段的通信。在活动中声明一个接口，如下所示：

```
 public interface FragmentCommunicator{
       public void passDataToFragment(String someValue);
    }

then call the interface at your text change listener..for example

    FragmentCommunicator mfragmentCommunicator;
    //your onCreate function 
    {
    //your textchangelistenr
    {
    onTextChanged call 
if(mfragmentCommunicator != null)
   mfragmentCommunicator.passDataToFragment(Pass your string here)
    }

then make your fragement implement this interface like

public class someFragment extends Fragment implements FragmentCommunicator
{
//this is your rest of the fragment

@Override
public void passDataToFragment(String somevalue)
{
//This function will get fired each time your text is changed since in your activity you are calling this same function in your textchange listener. the String somevalue will be the string that you passed from your activity

}

//rest of the code
.
.
.
//Don't forget to initialize your interface in fragment itself. Do this in your onAttach
like this
@Override
 public void onAttach(Activity activity){
  super.onAttach(activity);
  context = getActivity();

  ((MainActivity)context).fragmentCommunicator = this;
}

}

} 
```

您可以参考[此](http://laaptu.wordpress.com/tag/android-communication-between-fragment-and-activity/)链接以获得任何进一步的说明。只检查 FragmentCommunicator 的实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:36:26.943

如果您使用数组作为适配器的基本数组列表，只需更新此数组并调用adapater.notifyDataSetChanged()。这肯定会更新 DSLV，因为我在我的一个项目中使用了相同的方法。

# magento - 类别出现在不适当的地方

> ID：15893553
> 
> 赞同：0
> 
> 时间：2013-04-09T04:51:13.380
> 
> 标签：magento, magento-1.7

我[对此](http://toolskaart.com/index.php/pcd-inserts.html)进行了研究，现在它已经上线了。请看一看。问题是名为“硬质合金棒”的类别未分配给“PCD 刀片”类别。但仍然显示。我不知道它有什么问题。请帮助我。![后端](https://i.stack.imgur.com/Qnvhk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:32:37.683

您可能已经启用了在前面使用平面表，这通常是一个好主意。不过，要记住的是在管理面板中执行类别平面数据重新索引。转到系统 > 索引管理并重新索引类别平面数据。

接下来，您应该在系统 > 缓存管理中刷新缓存存储。

如果这没有帮助，请检查您的类别树在商店视图级别上的外观。Magento 允许为每个商店视图拥有不同的类别树。

![在此处输入图像描述](https://i.stack.imgur.com/dyDP2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:17:59.230

![在此处输入图像描述](https://i.stack.imgur.com/J0uic.png)

PCD 刀片下不显示硬质合金棒类别，您的问题到底是什么，我不明白。

# ruby-on-rails - 产生哈希的 JBuilder 循环

> ID：15893558
> 
> 赞同：17
> 
> 时间：2013-04-09T04:51:20.473
> 
> 标签：ruby-on-rails, json, jbuilder

我需要产生哈希的循环，而不是对象数组。我有这个：

```
json.service_issues @service.issues do |issue|
  json.set! issue.id, issue.name
end 
```

结果：

```
service_issues: [
  {
    3: "Not delivered"
  },
  {
    6: "Broken item"
  },
  {
    1: "Bad color"
  },
  {
    41: "Delivery problem"
  }
] 
```

我需要这个：

```
service_issues: {
   3: "Not delivered",
   6: "Broken item",
   1: "Bad color",
   41: "Delivery problem"
} 
```

是否可以在不手动将 AR 结果转换为哈希的情况下执行此操作？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-10T05:27:09.170

Jbuilder 开发人员在这里。

简短的回答：是的。无需将模型数组转换为哈希即可。

```
json.service_issues do
  @service.issues.each{ |issue| json.set! issue.id, issue.name }
end 
```

但事先准备哈希可能会更容易。

```
json.service_issues Hash[@service.issues.map{ |issue| [ issue.id, issue.name ] }] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T11:53:38.147

这个问题已经很老了，但是对于任何对数组（对象）的哈希感兴趣的人，您可以使用以下代码：

```
@bacon_types.each do |bacon_type|
json.set! bacon_type.name, bacon_type.bacons do |bacon|
    bacon.title bacon.title
    ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:15:10.267

你可以这样做

```
Jbuilder.encode do |json|
  json.service_issues @service.issues.inject({}) { |hash, issue| hash[issue.id] = issue.name; hash }
end 
```

代码生成哈希技术可以通过下面的例子来理解。

```
[1] pry(main)> array = [{id: 1, content: 'a'}, {id: 2, content: 'b'}]
=> [{:id=>1, :content=>"a"}, {:id=>2, :content=>"b"}]
[2] pry(main)> array.inject({}) { |hash, element| hash[element[:id]] = element[:content]; hash }
=> {1=>"a", 2=>"b"} 
```

`inject`生成哈希的关键点，每次插入新元素后返回创建的哈希。上面的例子，它是通过 实现的`; hash`。

# c# - 是否有一个 .Net C# 分析器可以报告通用方法的不同类型执行的单独统计信息？

> ID：15893560
> 
> 赞同：2
> 
> 时间：2013-04-09T04:51:27.547
> 
> 标签：c#, .net, generics, profiling, profiler

假设我有一个简单的程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ProfilerTesting
{
    class Program
    {
        static void MyFunc<T>(T t)
        {
            System.Threading.Thread.Sleep(100);
            Console.WriteLine(t);
        }

        static void Main(string[] args)
        {
            IList<string> l = new List<string> { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m" };
            foreach (string s in l)
            {
                MyFunc(s);
            }

            IList<int> g = new List<int> { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
            foreach (int i in g)
            {
                MyFunc(i);
            }
        }
    }
} 
```

当我在采样模式下使用 .Net 分析器（我已经尝试过 EQUATEC 分析器免费版和 Visual Studio 性能工具）分析这个程序时，它只给了我总执行统计信息`MyFunc<T>`。有什么方法可以获取`MyFunc<string>`和的单独执行统计信息`MyFunc<int>`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:06:05.933

我不知道有什么工具可以做到这一点，而且我实际上不认为这是可能的。

如果您查看方法的[通用定义](http://msdn.microsoft.com/en-us/library/ms172192.aspx)，您会发现

> 泛型方法定义是具有两个参数列表的方法：泛型类型参数列表和形式参数列表。类型参数可以作为返回类型出现，也可以作为形式参数的类型出现，如下面的代码所示。

我们可以将您的问题改写为“是否可以通过不同的参数值来区分调用堆栈函数？”。答案是否定的。当然这在某种程度上是可能的，但是没有人会实现它，因为它是非常庞大的数据量，并且很难分析这些数据。

在调用堆栈上，`MyFunc`我们总是只能找到 this is `MyFunc<T>(T t)`，而没有任何关于参数（类型或形式）的信息。

对于您的情况，如果您想单独测量性能，最好将此方法一分为二。

# java - 在 Jython 2.5 中从 Java 代码访问 Python 对象

> ID：15893561
> 
> 赞同：2
> 
> 时间：2013-04-09T04:51:32.520
> 
> 标签：java, compiler-construction, jython-2.5

我有一个使用 Jython 2.1 的应用程序。在应用程序中，我使用 jythonc 将 python 脚本转换为 java 类，然后像任何其他类一样将这些类包含在我的 webapp 中。因此，我能够将包名称分配给 python 脚本并像访问任何其他 java 类一样访问这些类。

现在我计划迁移到 Jython 2.5。Jython 2.5 已删除对 j​​ythonc 的支持。所以我尝试使用

```
jython -m compileall /path/to/my/python/scripts. 
```

当我这样做时，我会在同一个文件夹中获得所有编译的字节码文件。每个文件都有类似 myclass$py.class 的名称（我的 python 文件是 myclass.py）。

我的问题-

1.  首先，我可以在另一个普通的 java 类中访问这些类吗？
2.  如果是这样，我应该使用什么类名？当我像 new myclass() 一样使用它时，我的代码无法编译。
3.  有没有办法，我可以使用compileall为生成的字节码分配/强制一个包名或类名？

笔记 -

*   我需要升级到 jython 2.5，因为我需要它支持的更新版本的 python。
*   我想坚持将 python 代码预编译成字节码，因为我想对字节码进行优化。所以[推荐](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html)的对象工厂方法只是万不得已。我假设对象工厂方法不允许我处理生成的字节码。

任何帮助表示赞赏。

# css - 使用背景图像制作边框

> ID：15893565
> 
> 赞同：1
> 
> 时间：2013-04-09T04:52:02.147
> 
> 标签：css

这个问题看起来像，我要求一个代码，但事实并非如此。我用谷歌搜索了很多次，然后登陆的页面并没有告诉我我想要什么。在谷歌中找不到它可能是我的坏事。

我在某个地方看过它，可能在某个网站上，我不记得了

我有六个png文件，即

> top_right.png、top_left.png、bottom_right.png、bottom_left.png、horizo​​ntal.png、verical.png

我想要做的是一个盒子，用上面的图片做边框。

我认为它必须与背景位置和百分比有关，但我找不到怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:57:35.903

使用逗号分隔它们，例如：

```
body {
    background-image: url(bottom.png), url(top-right.png);
    background-position: center bottom, right top;
    background-repeat: no-repeat;
} 
```

# redirect - 如何在spring框架中修复我的url

> ID：15893567
> 
> 赞同：0
> 
> 时间：2013-04-09T04:52:52.870
> 
> 标签：redirect, spring-mvc

我正在使用 Spring MVC3.2 并且我有一个注册表单（[http://my-server.com:8080/tracks/apks](http://my-server.com:8080/tracks/apks)）。用户将其发布到服务器，验证失败时服务器将返回错误消息。但是我从服务器收到错误消息，URL 与我想要的不同。这是我的代码：

```
Web.xml
<servlet-mapping>
    <servlet-name>tracks</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

applicationContext.xml
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

@Controller
@RequestMapping("/apks")
public class ApkController {

@RequestMapping()
public ModelAndView index() {
    Map<String, Object> modelMap = new HashMap<String, Object>();
    modelMap.put("menus",   AdminService.getMenus("apks"));
    return new ModelAndView("apks", "model", modelMap);
}

@RequestMapping(value = "/insert", method = RequestMethod.POST)
public ModelAndView uploadApk(ApkInfo apkInfo, BindingResult bindingResult) {

     Map<String, Object> modelMap = new HashMap<String, Object>();
     modelMap.put("menus",   AdminService.getMenus("apks"));

     if (!fileExists(apk.getFileName())){

     modelMap.put("message", message); 
     }

     //Do something

     return new ModelAndView("apks", "model", modelMap);
} 
```

调用 uploadApk 后，我期望[http://my-server.com:8080/tracks/apks](http://my-server.com:8080/tracks/apks)但返回的 URL 是[http://my-server.com:8080/tracks/apks/insert](http://my-server.com:8080/tracks/apks/insert)。

我该怎么做才能修复它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:12:19.660

几个观察。

1.  在您的 web.xml 中，您是否指定了 context-paran、servlet 跟踪和侦听器？
2.  您的 spring 配置文件中是否启用了 context:component-scan？
3.  在方法级别使用 requestMapping 将请求映射到特定方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:00:03.353

“返回的 URL”是什么意思？

你应该访问' [http://my-server.com:8080/apks/insert](http://my-server.com:8080/apks/insert) '来调用'uploadApk'方法因为你有

```
@RequestMapping("/apks") 
```

在您的控制器上和

```
@RequestMapping(value = "/insert", method = RequestMethod.POST) 
```

在您的“uploadApk”方法上。

* * *

你是如何调用“uploadApk”方法的？

我认为您应该对此进行更多解释以获得适当的答案。

* * *

由于 web.xml 中 servlet-mapping 的 url-pattern 是“/”，因此您应该删除 url 中的“/tracks”。

'tracks' 只是一个 servlet 名称，而不是一个 servlet 路径。

所以如果你访问 /tracks/apks/insert 那么你会得到一个 404 错误。改为访问 /apks/insert。

* * *

我猜您在调用“uploadApk”方法后可能需要重定向，因为您在问题上附加了“重定向”标签并使用了“返回的 URL”一词。（正确的？）

如果我的猜测是正确的并且您想重定向浏览器，请参阅[SpringMVC 3.2 Redirect View docs](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-redirecting)。

使用以下代码进行重定向。

```
return new RedirectView("url-you-want"); 
```

或者

```
return "redirect:url-you-want" 
```

# python - 在同一模块的字段中加载一个类 - OpenErp

> ID：15893572
> 
> 赞同：1
> 
> 时间：2013-04-09T04:53:36.357
> 
> 标签：python, xml, module, field, openerp

我需要将数据从一个类加载到同一模块中另一个类的字段中。

我需要这个在 xml 视图中显示数据树。

```
class certificados(osv.osv):

_name = 'certificados.certificados'
_description="Certificados de No Produccion"
_inherit = ['mail.thread', 'ir.needaction_mixin']

_columns = {
            'Item' : fields.integer('Item'), 'Registro_Numero' : fields.integer('Registro Numero'),
            'Fecha_de_Emision': fields.date('Fecha de Emision', required=True, select=True),
            'Fecha_de_Solicitud': fields.date('Fecha de Solicitud', required=True, select=True),
            'Fecha_del_Documento': fields.date('Fecha del Documento', required=True, select=True),
            'Vigencia' : fields.integer('Vigencia'), 'cert_ids' : fields.one2many('certificados.line','requisicion_id','Items del Certificado',states={'done': [('readonly', True)]}),
            'descripcion' : fields.text('Descripcion'),
            'notas' : fields.text('Notas'),
            }
certificados()

class certificados_line(osv.osv):

_name = "certificados.line"
_description="Certificados No Produccion"

_columns = {
    'Codigo_Arancelario' : fields.integer('Codigo Arancelario'),
    'product_id' : fields.many2one('product.product', 'Material'),
    'Descripcion_Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
    'Especificaciones_Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
    'Cantidad' : fields.float('Cantidad'), 'Unidad_de_Medida': fields.many2one('product.uom', 'Unidad de Medida'),
    'Precio_Unitario_Declarado' : fields.float('Precio Unitario Declarado'), 'Moneda' : fields.many2one('res.currency', 'Moneda'),
    'Valor_En_Divisas' : fields.float('Valor En Divisas'),
    'requisicion_id' : fields.many2one('certificados.certificados', 'Certificados de No Produccion', ondelete='cascade'),
    'Cantidad_Consumida' : fields.float('Cantidad Consumida'), 'Cantidad_Disponible' : fields.float('Cantidad Disponible'),

}
certificados_line() 
```

我在另一个模块中看到第一个类不会自行关闭，我的意思是，在这个类中，'certificados' 底部不会有'certificados()' 代码。

不知道这是否可能，或者我在这里做错了什么。

certificados 的 'cert_ids' 字段的视图应为以下形式：

```
 <notebook>
                      <page string="Productos">
                            <field name="cert_ids">
                                <tree string="Productos">
                                    <field name="product_id"/>
                                    <field name="Codigo_Arancelario"/>
                                    <field name="Descripcion_Arancelaria"/>
                                    <field name="Especificaciones_Tecnicas"/>
                                    <field name="Cantidad"/>
                                    <field name="Precio_Unitario_Declarado"/>
                                    <field name="Valor_En_Divisas"/>
                                    <field name="Cantidad_Consumida"/>
                                    <field name="notas"/>
                                </tree>
                            </field>
                            <separator string="Observaciones"/>
                            <field name="descripcion"/>
                        </page>
                    </notebook> 
```

我不知道我是否做错了什么，但是 xml 给了我无效的架构错误，并且该字段无法正常工作。

提前致谢！

* * *

经过user1576199的更正，它仍然给我错误，有人知道代码中是否有错误吗？

这些是 Pastebins

[xml](http://pastebin.com/S9LxcbWq)

[Python](http://pastebin.com/EFdW7P5j)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:09:08.150

你好使用这个视图。

```
 <notebook>
                          <page string="Productos">
                                <field name="cert_ids">
                                    <tree string="Productos">
                                        <field name="product_id"/>
                                        <field name="Codigo_Arancelario"/>
                                        <field name="Descripcion_Arancelaria"/>
                                        <field name="Especificaciones_Tecnicas"/>
                                        <field name="Cantidad"/>
                                        <field name="Precio_Unitario_Declarado"/>
                                        <field name="Valor_En_Divisas"/>
                                        <field name="Cantidad_Consumida"/>
                                   </tree>
                                </field>
                                <separator string="Observaciones"/>
                                <field name="descripcion"/>
                            </page>
                        </notebook> 
```

您使用`<field name="notas"/>`了 which 不会在**certificados.line**对象中退出。

# c# - 唯一标识一个随身碟

> ID：15893580
> 
> 赞同：2
> 
> 时间：2013-04-09T04:54:44.267
> 
> 标签：c#, usb-flash-drive

我正在使用[USB 设备](https://stackoverflow.com/questions/15877851/the-name-wm-devicechange-does-not-exist-in-the-current-context)，并且可以识别 USB 设备。但我有一个理论上的问题。它是否显示任何 USB 设备，如便携式 CD 驱动器或特别是闪存驱动器？由于缺少这些硬件，我无法检查所有可能性:)。有什么方法可以识别它是闪存驱动器还是其他 USB 设备。

请不要打败你已经尝试过的东西。我用[谷歌搜索](http://www.google.co.in/#hl=en&q=identify+a+flash+drive+c%23&spell=1&sa=X&ei=Fp5jUcevPM3trQeIxYD4Ag&ved=0CCsQvwUoAA&bav=on.2,or.r_qf.&bvm=bv.44990110,d.bmk&fp=5a8723a815cf09ab&biw=1280&bih=838)了同样的东西，但由于我的经验最少，我找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:58:31.180

请使用类`USBSerialNumber`

```
USBSerialNumber usb = new USBSerialNumber();
string serial = usb.getSerialNumberFromDriveLetter("f:\");
MessageBox.Show(serial); 
```

每个 pendrive 都有唯一的序列号。

您可以将此类用于此目的。

**从以下链接下载：**

[http://www.cfdan.com/posts/Retrieving_Non-Volatile_USB_Serial_Number_Using_C_Sharp.cfm](http://www.cfdan.com/posts/Retrieving_Non-Volatile_USB_Serial_Number_Using_C_Sharp.cfm)

# php - 去掉 PHP 中 () 之间的文本

> ID：15893582
> 
> 赞同：-1
> 
> 时间：2013-04-09T04:54:48.890
> 
> 标签：php

假设你有一个这样的字符串：

`This is a string (with parenthesis stuff)`

您将如何将其更改为

`This is a string`

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:56:48.200

代替它：

```
preg_replace('/\(.*?\)/', '', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:57:37.700

使用正则表达式。

替换`\([^)]*\)`为空字符串。

注意：如果有超过一对括号，这将替换最里面的一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T04:57:58.657

尝试这个

```
 $string = "This is a string (with parenthesis stuff)";
  echo preg_replace("/\([^)]+\)/","",$string); // 'ABC ' 
```

或者你也可以这样做

```
 $str = "This is a string (with parenthesis stuff)";
  $str = trim(preg_replace('/\s*\([^)]*\)/', '', $str)); 
```

# javascript - 延迟加载背景图像/淡入淡出替换背景图像

> ID：15893586
> 
> 赞同：1
> 
> 时间：2013-04-09T04:55:07.453
> 
> 标签：javascript, jquery, html, lazy-loading

我正在构建一个使用 Maximage jquery 插件来运行背景图像幻灯片的站点。由于图像的大小，我决定尝试实施延迟加载方法，该方法将用已在后台下载的高质量图像替换低质量图像。

该代码有效，但问题是有一个明显的闪光，因为`background-image src`maximage 幻灯片的 更改为指向更高质量的图像。

我不确定如何解决这个问题，有没有办法淡入替换 div 的背景图像？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:14:25.793

Could you write it in such a way that once the high quality image is done loading, instead of replacing the low quality image, insert the high quality into DOM as a hidden DIV or something like that.

然后淡出低质量的包装器 DIV，因为您淡入高质量的包装器 DIV（即同步动画）作为动画完成的回调，分离/隐藏低质量的 DIV。不过，这可能仍会导致某些浏览器/设备闪烁，我必须设置一个演示或其他东西才能看到。

# deployment - 访问部署在 tomcat 上的 worklight 服务器时出错

> ID：15893587
> 
> 赞同：0
> 
> 时间：2013-04-09T04:55:07.317
> 
> 标签：deployment, unique, ibm-mobilefirst

我将war文件和适配器文件部署到tomcat，一切都很好，但是当我尝试访问worklight服务器时，请求是

> [http://10.30.3.11:8080/nantian/apps/services/api/attendance/android/query]

并且logcat出现这个错误

> [http://10.30.3.11:8080/nantian/apps/services/api/attendance/android/query]失败。状态：500，响应：服务器无法处理来自应用程序的请求。请稍后再试。[http://10.30.3.11:8080/nantian/apps/services/api/attendance/android/query]无法读取未定义的属性“错误”

并且tomcat出现以下错误：

> java.lang.RuntimeException：唯一约束：发现 2 个实现接口 com.worklight.server.report.api.GadgetReportsService 的 bean（在 4 个 spring 应用程序上下文中）。在 com.worklight.server.bundle.api.ServiceManager.getServiceConsumer(ServiceManager.java:133) 在 com.worklight.core.bundle.CoreServiceManager.getGadgetsReportService(CoreServiceManager.java:47) 在 com.worklight.core.auth.impl .AuthenticationContext.logLoginActivity(AuthenticationContext.java:337) 在 com.worklight.core.auth.impl.AuthenticationContext.checkAuthentication(AuthenticationContext.java:495) 在 com.worklight.core.auth.impl.AuthenticationContext.processRealms(AuthenticationContext.java :396) 在 com.worklight.core.auth.impl.AuthenticationContext.pushCurrentResource(AuthenticationContext.java:373) 在 com.worklight.core.auth.impl。

我确定我只是将一个war文件部署到tomcat，但是我一次又一次地尝试部署war文件来测试应用程序，当然，在部署之前取消部署文件。并且worklight服务器是5.0.5， mysql 5.1.47，tomcat 7.0.37。任何帮助？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:29:55.067

这是使用 IBM Installation Manager 进行的安装吗？如果您使用它在 Tomcat 上安装 Worklight，那么它还在安装期间部署了一个 worklight.war 文件。

确保通过 Tomcat 管理器视图（通常为`http://localhost:8080/manager`）取消部署此 .war 文件。我还会转到文件系统并确保没有其他文件（.war 文件、worklight.home、...）。

接下来，部署您自己的 .war 文件（可能是 nantian.war 或类似文件）。

# android - OpenCv4Android 和 C++ 数据类型之间的混淆

> ID：15893591
> 
> 赞同：8
> 
> 时间：2013-04-09T04:55:22.527
> 
> 标签：android, opencv

我正在尝试使用 OpenCv4Android 为 Android 设备编写一些应用程序。早些时候，我使用的是 Android NDK 和 C++ 本机代码。但这种技术并不是很清楚。所以我切换到最新的 Java API 以及 OpenCv 2.4.4 版本。

我能够编写简单的程序并运行示例。但是，当我尝试为模型 POSE 估计、相机校准例程等高级问题编写一些代码时，我遇到了这种非常奇怪的困惑。一些在 C++ API 中名称非常直观的数据类型在它们的 Java 对应物中并不真正适合。因此，将我的功能从 C++ 移植到 Java 时，我面临着巨大的困难。我在这些功能中面临着完全的困惑

*   Point2f（在 C++ 中）- MatOfPoint2f（在 Java 中）
*   Point3f（在 C++ 中）- MatOfPoint3f（在 Java 中）
*   Point2（在 Java 中）
*   Point3（Java 中）

请帮助我理解 OpenCv Java 中使用的术语及其与 C++ 的类比。

另外，请给我一些参考，在哪里给出这些术语的清晰和清晰的描述（我尝试观看提供的帮助，但它对我没有多大帮助，因为它对于 C++ 和 Java 有点相似）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-21T21:52:31.183

**引用安德烈·帕夫连科的话：**

> 引入了 MatOfXxx 类（例如 MatOfPoint）以避免在 Java 和本机内存之间冗余复制中间数据。例如，您可以通过一个 OpenCV 函数获得大量点，然后将其传递给另一个。
> 
> 在 C++ 中，我们为此使用 std::vector。但是在 Java 中使用 ArrayList 会导致在返回这些点时将所有点数据从本机 OpenCV 级别复制到 Java，并在使用它们调用下一个 OpenCV 函数时将它们复制回来。因此，为了提高效率，我们在这种情况下转而使用 MatOfPoint 类，这是一种 1n 或 n1 维的 Mat，在每个元素中保留一个 Point（即 CV_32SC2 或 CV_64FC2 类型）。
> 
> 您可能知道，Mat 将所有数据保留在本机级别，因此此类对象可以在 OpenCV 调用之间传递而无需数据复制。但是，如果在您的 Java 代码中，您需要直接访问实际的 Points 数据，则可以使用 toArray() 和 fromArray 方法将数据显式传输到 Java 或从 Java 传输数据。
> 
> 例如，要创建一个包含与现有 MatOfKeyPoint 中的点相对应的点的 MatOfPoint2f，您需要：
> 
> *   通过 MatOfKeyPoint.toArray() 将 KeyPoints 加载到 Java
> *   遍历 KeyPoint[] 并创建一个对应的 Point[] （所有的 cv::Point、cv::Point2f 和 cv::Point2d 在 Java 中都表示为 org.opencv.core.Point）
> *   使用 MatOfPoint2f.fromArray() 或 c-tor MatOfPoint2f(Point...pa) 将您的点置于本机级别
> 
> 至于 C++ 与 Java 类型的对应关系：

```
vector<Point>    : MatOfPoint
vector<Point2f>  : MatOfPoint2f
vector<Point3i>  : MatOfPoint3
vector<Point3f>  : MatOfPoint3f
vector<KeyPoint> : MatOfKeyPoint
vector<DMatch>   : MatOfDMatch
vector<Rect>     : MatOfRect
vector<uchar>    : MatOfByte
vector<char>     : MatOfByte
vector<int>      : MatOfInt
vector<float>    : MatOfFloat
vector<double>   : MatOfDouble
vector<Vec4i>    : MatOfInt4
vector<Vec4f>    : MatOfFloat4 
```

# java - 如果 permgen 满了，GC 会运行吗？

> ID：15893592
> 
> 赞同：2
> 
> 时间：2013-04-09T04:55:28.253
> 
> 标签：java, jvm, permgen

我有一个在启动时运行两个或三个完整 GC 的应用程序。有很多堆空间，不需要运行任何 GC（次要或完全）。但是在 gc 日志中，我可以看到 permgen 被填满，然后立即运行完整的 GC。在此之后，permgen 空间增加。最终，一旦加载了所有类，就不再有完整的 GC。

我的问题是，如果 permgen 被填满，VM 是否会运行 GC 以从堆中获取一些内存并为 permgen 添加额外的内存？还是会抛出 OutOfMemory-permgen？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:36:22.143

> 我的问题是，如果 permgen 被填满，VM 是否会运行 GC 以从堆中获取一些内存并为 permgen 添加额外的内存？还是会抛出 OutOfMemory-permgen？

GC 将运行完整的 GC 以尝试释放 permgen 空间中的一些内存。如果这未能释放足够的空间，则会抛出 OOME，说 permgen 已满。

当前或过去的 HotSpot JVM 不会尝试将 permgen 增加到超出其规定的限制，无论是否有正常的堆空间允许这样做。

* * *

在 OOME (permgen) 之前需要进行完整 GC 的原因是：

*   在非 permgen 空间中可能已经引用了 permgen 对象。运行一个完整的 GC 来检查这个。
*   （AFAIK）GC'ing permgen 通常与完整的 GC 相关联......大概是出于同样的原因。它通常是来自普通堆和 GC“根”的引用，它们使 permgen 对象保持可访问性。

Permgen 对象（AFAIK）通常是不可变的，因此不太可能由于 permgen 对象突变而改变可达性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:59:25.083

如果 PermGen 大小达到您的 -XX:MaxPermGen 限制（或默认值），它将抛出 OOM-permgen。

# jquery - 如何从 multiselect2side 选择框中删除所有选项？

> ID：15893593
> 
> 赞同：0
> 
> 时间：2013-04-09T04:55:35.503
> 
> 标签：jquery, jquery-ui, jquery-plugins, multi-select

我使用了 jquery multiselect2side 选择框。我使用下面的代码添加选项

```
$("#myselect").multiselect2side('addOption', {name: opionTitle, value: libraryvalue[i].uri, selected: false}); 
```

同样，我想从选择框中删除所有选项。我使用下面的 jquery 脚本来删除。但它没有工作

```
$("#myselect").empty(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:38:30.180

清空后，您将需要销毁并再次初始化插件。希望这对你有用。

```
$('#myselect').empty().multiselect2side('destroy');
$('#myselect').multiselect2side(); 
```

# google-app-engine - 自动完成谷歌地图 api 用于仅通过地址选择器查找邮政编码

> ID：15893594
> 
> 赞同：2
> 
> 时间：2013-04-09T04:55:40.900
> 
> 标签：google-app-engine, google-maps, google-maps-api-3

我想通过自动完成 Google API 使用地址、城市等搜索邮政编码。我正在使用这样的代码。它提供了所有位置和地点的详细信息，但我只需要邮政，如果有任何建议，请提供。

```
 <!DOCTYPE html>
    <html>
    <head>
    <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes  /base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">   
    </script>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="http://xilinus.com/jquery-addresspicker/src/jquery.ui.addresspicker.js">    
    </script>

    <meta charset=utf-8 />
    <title>JS Bin</title>
    <style type="text/css">
    #map {
            border: 1px solid #DDD; 
            width:300px;
            height: 300px;
            float:left;  
            margin: 0px 0 0 10px;
           -webkit-box-shadow: #AAA 0px 0px 15px;
        }
        div {
            font-family: Arial;
            font-size: 10pt;
            }
     </style>
     <script type="text/javascript">
      $(document).ready(function () {
      var geocoder = new google.maps.Geocoder();
       $("#addresspicker").autocomplete({
        source: function (request, response) {
            geocoder.geocode({ address: request.term }, function (results, status) {
            if (status === google.maps.GeocoderStatus.OK) {
              response($.map(results, function(result) {
                if ($.inArray("street_address", result.types) >= 0) {
                    return result.formatted_address;
                }
              }));
            }
          });
        },
        select: function (event, ui) {
            var parts = ui.item.label.split(",")
                , address1 = parts[0]
                , address2 = parts.slice(1).join(",").trim();
            $("#postal").val(address1 + "\n" + address2);
        }
    });
});
    $(function() {
      var addresspicker = $("#addresspicker").addresspicker();
      var addresspickerMap = $( "#addresspicker_map" ).addresspicker({
          elements: {
            map:      "#map",
            lat:      "#lat",
            lng:      "#lng",
            locality: '#locality',
            country:  '#country'
          }
        });
        var gmarker = addresspickerMap.addresspicker( "marker");
        gmarker.setVisible(true);
        addresspickerMap.addresspicker( "updatePosition");
});
    </script>

 </head>
<body>
<div>
      <label>Address : </label><input id="addresspicker" />
</div>  
  <br/>
  <br/>
  <div>
  <div>
        <label>Address : </label> <input id="addresspicker_map" />   <br/>
            <label>Locality: </label> <input id="locality" disabled=disabled> <br/>
            <label>Country:  </label> <input id="country" disabled=disabled> <br/>
            <label>Latitude:      </label> <input id="lat" disabled=disabled> <br/>
            <label>Longitude:      </label> <input id="lng" disabled=disabled> <br/>
 <label>postal:      </label> <input id="postal" disabled=disabled> <br/>
    </div>
    <br/>
<div id="map"></div>
  </div>
</body>
</html> 
```

提前致谢.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:40:32.773

我没有使用 jquery.ui.addresspicker 但你可能会发现这很有用

您可以使用该`autocomplete.getPlace();`函数获取“可以”包含依赖于搜索查询的邮政编码的 JSON 对象。

我会尽量保留这个香草 JS

这里的文档很好地解释了它 [https://developers.google.com/places/documentation/autocomplete](https://developers.google.com/places/documentation/autocomplete)

```
// autocomplete search restriction (if required)
var options = {
    types: ['(regions)'],
    componentRestrictions: { country: "au" }
}

// create you autocomplete feild
var input = (document.getElementById('addresspicker'));
var autocomplete = new google.maps.places.Autocomplete(input, options);
var infowindow = new google.maps.InfoWindow();

// fired when an autocomplete option is selected or the input is submitted
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    infowindow.close();
    var place = autocomplete.getPlace();

    // pull out the data you need

    ...

}); 
```

我也为此编写了一些验证函数。如果您需要更多帮助，请发表评论，我会添加链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T16:49:41.990

我有同样的问题。

调用 getPlace() 时返回的 PlaceResult 对象不会自动包含邮政编码，并且当它包含邮政编码时，它位于“administrative_area_level_2”字段中。

我现在正在调用主要的 gmap 地理编码服务，以获取与所选城市相关联的邮政编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-30T00:33:10.290

我创建了一个名为 get postal code 的方法，它从地址选择器提供的结果中提取邮政编码。

地址选择器的基本设置和使用地址组件调用函数。

```
addressPicker.bindDefaultTypeaheadEvent($('#addresssearch'));

$(addressPicker).on('addresspicker:selected', function (event, result) {
    var postal_code = getPostalcode(result.placeResult.address_components);
  }); 
```

从地址组件中提取邮政编码的函数。

```
 function getPostalcode(address_components) {
    for(var i = 0; i < address_components.length; i++){
      if (address_components[i]['types'].includes("postal_code")) {
        var final_value = address_components[i]['long_name'];
      }
    }
    return final_value || ''

  } 
```

如果没有可用的邮政编码，它将返回空字符串。

# php - PHP从XML动态创建关联数组

> ID：15893598
> 
> 赞同：0
> 
> 时间：2013-04-09T04:55:57.543
> 
> 标签：php, arrays, loops, dynamic, associative

所以我有这个我正在浏览的 XML，我可以很好地浏览它。我想以这种方式动态创建一个关联数组：

```
$keyName => $valName 
```

下面是 XML 的样子：

```
<dict>
    <key>Major Version</key><integer>1</integer>
    <key>Minor Version</key><integer>1</integer>
    <key>Application Version</key><string>7.6.1</string>
    <key>Tracks</key>
    <dict>
      <key>0</key>
      <dict>
        <key>Track ID</key><integer>0</integer>
        <key>Name</key><string>American Idol 2013</string>
        <key>Artist</key><string>Amber Holcomb</string>
        <key>Album Artist</key><string>Amber Holcomb</string>
        <key>Album</key><string>Unknown Album</string>
        <key>Kind</key><string>MPEG audio file</string>
        <key>Size</key><integer>3645</integer>
        <key>Total Time</key><integer>233000</integer>
        <key>Date Modified</key><date>Thu Mar 14 12:11:12 2013</date>
        <key>Date Added</key><date>Thu Apr 04 16:10:15 2013</date>
        <key>Bitrate</key><integer>128</integer>
        <key>Location</key><string>file://localhost/Z:%5Canthony%5CMusic%5CiTunes%5CiTunes%20Media%5CMusic%5CUnknown%20Artist%5CUnknown%20Album%5CAmber%20Holcomb%20-%20A%20Moment%20Like%20This%20-%20Studio%20Version%20-%20American%20Idol%202013.mp3</string>
        <key>File Folder Count</key><integer>-1</integer>
        <key>Library Folder Count</key><integer>-1</integer>
      </dict> 
```

到目前为止，这是我的代码得到的：

```
$xml = simplexml_load_file(base_url().'uploads/xmlbackup2.xml');
        $varKey = $xml->dict[0]->dict[0]->dict[0]->children();

        $keyName ="";
        $valName ="";

foreach($xml->dict[0]->dict[0]->dict as $dict1){

            foreach($dict1->children() as $dictChild){

                if($dictChild->getName() == "key"){
                    $keyName = $dictChild;
                } else {
                    $valName = $dictChild;
                }

            }

        } 
```

我已经尝试了一些方法，例如创建两个数组并尝试合并它们......但它对我来说失败了，很可能我的代码错误地完成了。

`foreach`基本上，在第二个循环完成后我要做的是将数据放入 SQL 中。但是，我需要先创建关联以使其在 codeigniter 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:06:55.590

这是否像您正在寻找的东西？

```
$myArray = Array();
$currentKey;    
foreach($xml->dict[0] as $dict1){
    foreach($dict1->children() as $dictChild){
        if($dictChild->getName() == "key"){
            $currentKey = $dictChild;
        } else {
            $myArray[(string)$currentKey] = (string)$dictChild;
        }
    }
} 
```

**更新** 我测试了代码，我收到了你收到的警告。转换为字符串似乎可以解决这个问题。下面是我制作的示例文件和我得到的输出。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

$myArray = Array();
$currentKey;

$xml;
if (file_exists('test.xml'))
    $xml = simplexml_load_file('test.xml');

foreach($xml->dict[0] as $dict1){
    foreach($dict1->children() as $dictChild){
        if($dictChild->getName() == "key"){
            $currentKey = $dictChild;
        } else {
            $myArray[(string)$currentKey] = (string)$dictChild;
        }
    }
}

print '<pre>';
print_r($myArray);
print '</pre>';

?>

Array
(
    [Track ID] => 0
    [Name] => American Idol 2013
    [Artist] => Amber Holcomb
    [Album Artist] => Amber Holcomb
    [Album] => Unknown Album
    [Kind] => MPEG audio file
    [Size] => 3645
    [Total Time] => 233000
    [Date Modified] => Thu Mar 14 12:11:12 2013
    [Date Added] => Thu Apr 04 16:10:15 2013
    [Bitrate] => 128
    [Location] => file://localhost/Z:%5Canthony%5CMusic%5CiTunes%5CiTunes%20Media%5CMusic%5CUnknown%20Artist%5CUnknown%20Album%5CAmber%20Holcomb%20-%20A%20Moment%20Like%20This%20-%20Studio%20Version%20-%20American%20Idol%202013.mp3
    [File Folder Count] => -1
    [Library Folder Count] => -1
) 
```

# javascript - 折叠具有多个 tbody 元素的表格行

> ID：15893599
> 
> 赞同：2
> 
> 时间：2013-04-09T04:56:02.723
> 
> 标签：javascript, jquery, html, html-table

我有一个看起来像这样的表：

```
<table>
    <thead>
        <tr><th>Customer</th><th>Order</th><th>Month</th></tr>
    </thead>
    <tbody>
        <tr><td>Customer 1</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 1</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 1</td><td>#3</td><td>March</td></tr>
    </tbody>
    <tbody>
        <tr><td>Customer 2</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 2</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 2</td><td>#3</td><td>March</td></tr>
    </tbody>
    <tbody>
        <tr><td>Customer 3</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 3</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 3</td><td>#3</td><td>March</td></tr>
    </tbody>
    ....
    .... 10s of records like this
</table> 
```

我想让每个 tbody 元素可点击（可折叠），以便在折叠状态下，我会得到里面的内容的摘要（比如，`Customer 1 | 3 Entries`），在展开状态下，我会看到实际的行。

可以对如上所示结构的表执行此操作吗？

JSFiddle在这里：http: [//jsfiddle.net/Ju4xH/](http://jsfiddle.net/Ju4xH/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:10:36.047

这有点乱，动画不起作用（我猜是因为它在`<tr>`s 上，但这是我想出的：

```
$(document).ready(function () {
    $("table").on("click", "tbody", function () {
        var $this = $(this);
        var myTRs = $this.children("tr");

        if ($this.hasClass("collapsed")) {
            $this.removeClass("collapsed");
            myTRs.first().remove();            
            myTRs.show();
        } else {
            $this.addClass("collapsed");
            var newInfo = myTRs.first().children("td").first().text() + " | " + myTRs.length + " entries";
            myTRs.hide();
            $this.prepend($("<tr><td colspan='3'>" + newInfo + "</td></tr>").hide()).find("tr").first().slideDown();
        }
    });
}); 
```

**演示：http:** [//jsfiddle.net/ZhqAf/1/](http://jsfiddle.net/ZhqAf/1/)

当您单击非折叠的`<tbody>`时，它将隐藏行并在新行之前添加您想要的详细信息。当您单击折叠`<tbody>`时，它会删除新的“详细信息”行，并显示原始行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T05:58:22.460

我通过计算其中的行数为每一行包含了标题，`tbody`并且在插入后绑定每个标题上的单击事件以显示该标题的内容`tbody`。

```
$(document).ready(function(){
    $('table tbody').each(function(){
        var num=$(this).children().length;
       // alert(num);
       $(this).before("<div id='header' class='header'>"+num +" entries </div>");
        //alert($(this).html());
        $(this).hide();
    });
    $('.header').on('click',function(){
       $(this).next().slideToggle("slow");
    });
}); 
```

[JS 小提琴链接](http://jsfiddle.net/rahularyansharma/Ju4xH/16/)

**已编辑**

如果您真的想要幻灯片动画，您也可以将所有内容都包装`tbody`在 div 中。所以`slideToggel` 也会给你动画。您可以按如下方式使用它：

```
$(document).ready(function(){
    $('table tbody').each(function(){
        var num=$(this).children().length;
       // alert(num);
       $(this).before("<div id='header' class='header'>"+num +" entries </div>");
        //alert($(this).html());
        $(this).wrap('<div class="new" />');
        $('.new').hide();
    });
    $('.header').on('click',function(){

       $(this).next().slideToggle("slow");
        $(this)
    });
}); 
```

[已编辑部分的 JS FIDDLE 链接](http://jsfiddle.net/rahularyansharma/Ju4xH/19/)

# linux - pkmap_page_table 如何在 kmap 上使用？

> ID：15893601
> 
> 赞同：0
> 
> 时间：2013-04-09T04:56:05.507
> 
> 标签：linux, memory-management, linux-kernel, mmu

pkmap_page_table 有一个内核启动时kmap 的页表指针。
例如，PKMAP_BASE 为 0xFFE00000，FIXADDR_START 为 0xFFF00000，如果内核尝试使用高端内存，则 TTB0 的 PTE 应设置为 0xFFE00000 ~ 0xFFF00000 作为虚拟地址。
那么pkmap_page_table的PTE是如何用来制作地图的呢？
以及如何修改TTB0的PTE与pkmap_page_table的PTE相同？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:26:25.200

我实际上不确定您会出现什么问题，但在“Understading the Linux Kernel”一书中有一些代码 sinnpet 可用。

在[第 309 页上](http://books.google.co.in/books?id=h0lltXyJ8aIC&pg=PT327&lpg=PT327&dq=pkmap_page_table&source=bl&ots=gN5qJ-7bKW&sig=VuWurreevrORcWqOQie0tcIX0AA&hl=en&sa=X&ei=qaNjUfeKHoqQrge1_ICAAQ&redir_esc=y)；最后几行；“一旦进程被唤醒，该函数通过调用检查另一个进程是否已映射页面`page_address()`；如果没有其他进程映射该页面，则内部循环重新启动。”

# mysql - MySQL 错误 - “on 子句”中的未知列“xyz”

> ID：15893602
> 
> 赞同：0
> 
> 时间：2013-04-09T04:56:14.587
> 
> 标签：mysql

我最近将 MYSQL 版本从 4 升级到 5，我收到此错误..

错误号：1054 错误：“on 子句”中的未知列“c.city”

```
`SELECT b.expirydate, a.ben_changed, a.amlnotes, a.processdate, c.phone AS beneficiaryphone, cpstate.statename AS collectionpointstate, cpcity.cityname AS collectionpointcity, cp.agentname    AS  collectionpointname, cp.agentaddress AS collectionpointaddress, cp.agenttelephone AS collectionpointphoneno, b.postcode AS customerpostcode, co.countryname AS bencountryname,  st.statename AS benstatename, ct.cityname AS bencityname, a.depositbankname AS depositbankname, b.address AS customeraddress, b.phone AS customerphone, a.releasedate, a.releasedby,    a.collectiontype, b.mobile AS customermobile, c.mobile AS beneficiarymobile, a.releasemessage, a.releaseorder, a.amlnotes, bf.bankname, a.branchname, a.accountno, a.ordertime, h.agentname     AS payingagentname, a.cashcommission, d.agentname AS officename, a.orderdate, a.orderid, a.orderamount, a.agentcommission, e.username AS orderby, g.currencycode AS fromcurrency,   f.currencycode AS currency, a.exchangerate, a.benamount, b.surname AS customersurname, b.firstname AS customerfirstname, c.surname AS bensurname, c.firstname AS benfirstname, a.orderstatus,   a.saleid, a.benid, a.contactid
FROM contact_master b, ben_master c, agent_master d, sales_master a
LEFT JOIN agent_master cp ON a.collectionofficeid = cp.agentid
LEFT JOIN city_master cpcity ON cp.city = cpcity.cityid
LEFT JOIN state_master cpstate ON cp.state = cpstate.stateid
LEFT JOIN currency_master f ON a.currency = f.currencyid
LEFT JOIN city_master ct ON c.city = ct.cityid
LEFT JOIN state_master st ON c.state = st.stateid
LEFT JOIN country_master co ON c.country = co.countryid
LEFT JOIN currency_master g ON a.fromcurrency = g.currencyid
LEFT JOIN user_master e ON a.orderby = e.userid
LEFT JOIN payingagent_master h ON a.payingagent = h.agentid
LEFT JOIN bank_master bf ON a.bankname = bf.bankid
WHERE a.contactid = b.contactid
AND a.benid = c.benid
AND a.officeid = d.agentid
AND a.contactid =  '2'
AND orderdate & gt ; =  '2013-04-09'
AND orderdate & lt ; =  '2013-04-09'
AND a.orderby !=  'onlinewebsite'
ORDER BY orderdate, ordertime ASC 
LIMIT 0 , 30` 
```

请指教..

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:59:09.503

原因是这样的`there is no column named city in table ben_master`。请确认。
祝你好运！

# jquery - IE8 中的 jQuery 错误 - $ undefined

> ID：15893603
> 
> 赞同：0
> 
> 时间：2013-04-09T04:56:18.430
> 
> 标签：jquery, internet-explorer-8

我浏览了答案，但我仍然不知道为什么会出现此错误。

这是我页面顶部的 HTML 代码：

```
<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>MAGI In a Box - Login</title>
    <link href="css/main.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/grids.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/misc.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/tables/demo_table_jui.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/tables/jquery-ui-1.8.4.custom.css" rel="stylesheet" type="text/css" media="all" />
    <script type="text/javascript" src="js/table_pagination.js"></script>
    <!--Start Style Specific to Project -->
    <link href="css/magi.css" rel="stylesheet" type="text/css" media="all" />
    <!--Start Style Specific to Project -->
    <!-- Add the datepicker stylesheet -->
    <link href="css/datepicker.css" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui.js" type="text/javascript"></script>
    <script>
        function SetFocus() {
            var input = document.getElementById("user_email");
            input.focus();
        }
    </script>
</head> 
```

jquery 是在脚本的其余部分之前定义的，但我收到以下 3 个错误：

> 消息：“jQuery”未定义行：6Char：1Code：0URI：[https](https://demoapp01.smartstream.cognosante.com/MAGIDataEntry/js/jquery-ui.jsMessage) ://demoapp01.smartstream.cognosante.com/MAGIDataEntry/js/jquery-ui.jsMessage：“$”未定义行：9Char：1Code：0URI：[https ://demoapp01.smartstream.cognosante.com/MAGIDataEntry/js/jQuery.collapsible.jsMessage](https://demoapp01.smartstream.cognosante.com/MAGIDataEntry/js/jQuery.collapsible.jsMessage)：对象预期行：3Char：1代码：0URI：[https ://demoapp01.smartstream.cognosante.com/MAGIDataEntry/js/example.js](https://demoapp01.smartstream.cognosante.com/MAGIDataEntry/js/example.js)

如果声明了 jQuery，为什么我仍然会收到这些错误？

这是我第一次发帖，希望格式正确！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:04:18.467

我从错误中注意到您使用访问您的网站`https:`并使用`http:`. 这可能会导致问题。最好的方法是像这样加载 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:00:41.643

试试这个

```
<script>
   $(document).ready(function(){
   function SetFocus () {
   var input = document.getElementById ("user_email");
    input.focus ();}});
 </script> 
```

从以下位置导入 jquery：

[http://jqueryui.com/](http://jqueryui.com/) [此处提供链接]

# vb.net - vb.net 导入不包含任何公共成员

> ID：15893606
> 
> 赞同：0
> 
> 时间：2013-04-09T04:56:43.107
> 
> 标签：vb.net, reference, import

我有一个工作和正在构建的 Sln，其中包含多个项目，都在 VB.net 中。它们位于运行 XP 和 Visual Studio 2010 的虚拟 PC 中。它构建并运行良好。我使用 VS2010 SP1 和 VS 2012 将文件复制到我的 windows 8 电脑。其中几个项目引用了一个帮助项目。最初，他们从项目中引用了 dll。我将其更改为实际项目引用以消除任何 dll 问题。

现在，在我的 Windows 8 电脑中，对辅助项目的每个导入或代码引用都失败了。帮助项目正在建设中。我无法弄清楚为什么导入失败，因为它在 XP 机器上运行良好，并且在 windows 8 pc 上没有任何引用出错。

如果我卸载引用的帮助程序项目，它会在 Windows 8 上构建并运行良好。我清理了整个解决方案，并删除了帮助程序项目创建的每个 dll。我很肯定帮助项目正在创建一个新的 dll 并被其他项目使用。那么..如果我卸载项目，为什么它会起作用。应该是一样的吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:35:47.970

之后我不得不重新创建 sln 文件，它在 win 8 中工作

# windows-phone-7 - 如何在 Windows Phone 7 运行时将 xy 位置赋予图像控制？

> ID：15893607
> 
> 赞同：0
> 
> 时间：2013-04-09T04:56:44.133
> 
> 标签：windows-phone-7, translate-animation

我已经在背景中设置了画布并添加了一些图像片段作为该背景画布的子元素，现在我想将特定的图像控件移动到背景画布的给定 xy 位置，所以我尝试了下面给出的这种代码

bg_Canvas.Children[it].RenderTransform = new TranslateTransform();

```
 TranslateTransform trans = bg_Canvas.Children[it].RenderTransform as TranslateTransform;
            DoubleAnimation animation = new DoubleAnimation();

            animation.To = 80; 
            Storyboard.SetTarget(animation, trans);
            Storyboard.SetTargetProperty(animation, new PropertyPath(TranslateTransform.XProperty));

            Storyboard story = new Storyboard();
            story.Children.Add(animation);

            story.Begin(); 
```

它正在工作，但问题是移动图像控件无法放置在背景画布的正确 x 位置，它一直在从放置图像的位置获取 x 位置，实际上第 0 个 x 位置从放置在画布上的图像控件开始，所以我需要设置用于放置图像控件的背景画布的 x 位置。如果有人知道，我该如何纠正这个问题，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:09:01.357

无需使用翻译，只需告诉画布放置图像的位置：

```
Canvas.SetTop(image, 80);
Canvas.SetLeft(image, 160); 
```

编辑：为了允许您为元素设置动画，您可以阅读有关`Storyboard`- 当您使用它时，在属性中设置动画，放置`"(Canvas.Left)"`或`"(Canvas.Top)"`适当。

如果您使用的是 WP8，您可以修改[本系列文章](http://socialeboladev.wordpress.com/2013/03/01/different-approach-for-animation-in-xaml-using-net-4-5-new-async-functionality-part-1/)中发布的代码以在 Windows Phone 上工作（它是为 Windows 8 编写的）。它使动画（包括在画布上）变得非常容易。

# prolog - 附加 SWi prolog 导致的无限循环

> ID：15893611
> 
> 赞同：0
> 
> 时间：2013-04-09T04:57:02.887
> 
> 标签：prolog, append

我正在尝试向最初为空的列表添加值的代码。使用追加时，程序不断进入无限循环或出栈。

我正在使用 SWI Prolog，我是 Prolog 的新手。

```
getcardvalueList([],[_]).
getcardvalueList([H|Ts],[_]):-
   getcardvalue(H,Val),
   append([_],[Val],Vl),
   getcardvalueList(Ts,Vl).

append([X|Y],Z,[X|W]) :- append(Y,Z,W).
append([],X,X). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:59:57.213

您以一种奇怪的方式使用列表，我不确定该代码的用途。

无论如何，我认为您正在尝试编写[maplist](http://www.swi-prolog.org/pldoc/doc_for?object=maplist/3)，所以可以这样做

```
getcardvalueList(Cards, Values) :-
   maplist(getcardvalue, Cards, Values). 
```

**如果**您尝试这样做，我可以显示“修改后的”代码：

```
getcardvalueList([],[]).
getcardvalueList([Card|Cards],[Val|Vals]):-
  getcardvalue(Card,Val),
  getcardvalueList(Cards,Vals). 
```

无需附加，列表构造是通过 head'arguments 中的模式完成的。请注意，您应该避免重新定义库谓词，例如[append](http://www.swi-prolog.org/pldoc/doc_for?object=append/3) /3。

# windows-phone-8 - SRGS 词典未在 WP8 中加载（或正在使用）

> ID：15893615
> 
> 赞同：1
> 
> 时间：2013-04-09T04:57:18.547
> 
> 标签：windows-phone-8, speech-recognition, sapi

我正在尝试使用 Windows Phone 8 语音识别来识别单词的自定义发音。我正在尝试使用 MSDN 上提供的示例，但效果不佳。首先，我使用的是词典文件 (.pls)，因为内联发音的“sapi”命名空间失败了（对于属性`pron`和`display`属性）——但也许我会将其保存为另一个问题。所以无论如何，这就是我所拥有的：

```
<?xml version="1.0" encoding="utf-8" ?>
<grammar version="1.0" xml:lang="en-US"  tag-format="semantics/1.0" root="thecolor"
         xmlns="http://www.w3.org/2001/06/grammar" >
  <lexicon uri="ms-appx:///SRGSLexicon.pls" />
  <rule id="thecolor">
    <item>blue</item>
  </rule>
</grammar> 
```

那是我的 SRGS 语法。我像这样加载它：

```
 Dim SRGSGrammar As Uri = New Uri("ms-appx:///SRGSGrammar.xml", UriKind.Absolute)
    _myRecognizer.Grammars.AddGrammarFromUri("SRGSGrammar", SRGSGrammar) 
```

我也尝试添加`type="application/pls+xml"`到`lexicon`元素，但这给出了格式异常。

似乎工作得很好。请注意其中的`<lexicon/>`标签。这是我的 PLS 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<lexicon version="1.0"
      xmlns="http://www.w3.org/2005/01/pronunciation-lexicon"
      alphabet="x-microsoft-ups" xml:lang="en-US">
  <lexeme>
    <grapheme> blue </grapheme>
    <phoneme> W S1 AX T CH AX M AX K S2 AA L IH T </phoneme>
  </lexeme>
</lexicon> 
```

（注意：这两个文件都在我的应用程序的根目录中，设置为 Content and Copy if Newer）。

然后我点击了一个名为“speak”的按钮，它确实如此`Dim recoResult = Await _myRecognizer.RecognizeAsync()`。然后我说*whatchamacallit*，它给了我非常低的信心，并说使用的规则是“thecolor”，文本是“blue”。据我所知，它甚至没有使用 PLS。如果我再次这样做并且这次说*blue*，我将获得接近 100% 的信心。

我希望识别 PLS 中的*whatchamacallit ，而不是 SRGS 语法中的**蓝色*，但唯一获得很高置信度的是“蓝色”（99%），这也是结果文本。

我的 PLS*似乎*已加载（我不能 100% 确定，但除了我上面给出的 URI 之外的任何 URI 都会导致*FileNotFound*异常，所以这就是我认为它正在加载的原因）。

注意 -[如何将词典与 SpeechSynthesizer 一起使用？](https://stackoverflow.com/questions/11529164/how-do-i-use-a-lexicon-with-speechsynthesizer)不是这个问题是关于什么的，尽管我们都在 PLS 中使用*了 whatchamacallit*示例。此外，[在 Windows Phone 8 上使用 SSML 进行高级文本到语音转换](http://www.developer.nokia.com/Community/Wiki/index.php?title=Using_SSML_for_advanced_text-to-speech_on_Windows_Phone_8&ampdiff=179293&ampoldid=179291)给了我一些希望，因为它是我见过的唯一 PLS 实现，但可惜它用于不同的技术并且在我的示例中不起作用。

有没有人通过 PLS 文件（或内联）在 WP8 中使用自定义`<Token/>`发音`sapi`？如果是这样，你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:10:58.167

托德，我试图复制你的问题，因为我强烈怀疑它与 uri 方案有关。我没有您的完整代码，但只需将语法和词典文件放在应用程序本地存储的根文件夹中即可复制它。

当我在 C# 中使用 type="application/pls+xml" 时，我没有收到 80045003 错误。相反，我一直得到这个：

> WinRT 信息：发现语法错误：C:\Data\Users\DefApps\AppData{A7C75BFD-F873-4DA9-834C-C4CA3D97AA6B}\Local\SRGSGrammar.xml，第 4 行：无法编译词典文件“ms-appdata:///本地/SRGSlexicon.xml": 0x80004003

我认为这是一个找不到文件指针的错误。当我仔细观察错误消息时，我注意到解析器认为语法文件和词典文件的文件路径不同，即使我使用“ms-appdata:///”来引用两者文件。

事实证明，语法解析器可能无法接受任何特殊的 uri-schemes。我使用 PLS 文件 uri 属性的错误消息中的文件路径的完整路径，并且有效。你会注意到我仍在使用 type="application/pls+xml"

所以我不确定这种解决方法是否是一个可以接受的解决方案......但我相信这可以解决问题的根源。

这是使这项工作的代码（在 C# 中）

SRGSLexicon.pls（未更改）

SRGSGrammar.xml（使用文件路径而不是 uri-scheme）

```
<?xml version="1.0" encoding="utf-8" ?>
<grammar version="1.0" xml:lang="en-US"  tag-format="semantics/1.0" root="thecolor"
         xmlns="http://www.w3.org/2001/06/grammar" >
  <lexicon uri="C:\Data\Users\DefApps\AppData\{A7C75BFD-F873-4DA9-834C-C4CA3D97AA6B}\Local\SRGSLexicon.pls" type="application/pls+xml" />
  <rule id="thecolor">
    <item>blue</item>
  </rule>
</grammar> 
```

我的应用程序代码 (C#)

```
 public MainPage()
    {
        InitializeComponent();
        var srgsGrammar = new Uri("ms-appx:////SRGSGrammar.xml", UriKind.Absolute);
        _recognizerUi.Recognizer.Grammars.AddGrammarFromUri("SRGSGrammar", srgsGrammar);
    }

    readonly SpeechRecognizerUI _recognizerUi = new SpeechRecognizerUI();

    private async void Test_OnClick(object sender, RoutedEventArgs e)
    {
        //I used these next 2 lines to show the FilePath of the SRGSGrammar.xml file, and I used the same folder
        //structure for the lexicon pls file uri (just changed the file name)
        //var fileName = (await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appdata:///local/SRGSGrammar.xml"))).Path;
        //MessageBox.Show(fileName);

        var recoResult = await _recognizerUi.RecognizeWithUIAsync();
        var x = recoResult.RecognitionResult.TextConfidence;
        MessageBox.Show(((int)x).ToString()); //show confidence
    } 
```

我希望这会有所帮助。我认为语法解析器只是不知道如何处理 uri-scheme。

# javascript - 如何将变量值保留在函数之外？

> ID：15893616
> 
> 赞同：0
> 
> 时间：2013-04-09T04:57:22.560
> 
> 标签：javascript, jquery

我有以下两个函数，它们使用 onchange 从下拉菜单中获取输入

```
 <script>

 current_fin = "none";
 current_mat = "Pine";

// Pass the current selection into a variable to use.
function getMaterial()
{
    var mat = document.getElementById("dropdownone");
    var current_mat = mat.options[mat.selectedIndex].text;
$("#price").html("Material is: " + current_mat  + "<br/>" +"Finish is: " + current_fin);
}
function getFinish()
{
    var fin = document.getElementById("dropdowntwo");
     var current_fin = fin.options[fin.selectedIndex].text;
$("#price").html("Material is: " + current_mat  + "<br/>" +"Finish is: " + current_fin);
}
</script> 
```

它所做的只是将所选内容的值写入 div #price。现在，当我改变一个然后另一个时，问题就出现了。如果我在两个框之间切换，变量将恢复为默认值 none 和 pine。我希望他们保留函数之外的值，所以如果我将框 1 切换到橡木，它会保持不变，直到我将其切换回来。我有一种感觉，我在这里遇到了范围问题，但不知道如何进行。我将包含 HTML 以供参考。

```
<select name="material" id="dropdownone" onchange="getMaterial()">
  <option>Pine</option>
  <option>Oak</option>
  <option>Walnut</option>
  <option>Plastic</option>
</select>

<select name="finish" id="dropdowntwo" onchange="getFinish()">
  <option>None</option>
  <option>Finished</option>
</select>

<input type="submit" value="Submit To Cart">

<div id=price>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:59:21.050

```
<script>   

     var current_fin = "none";
     var current_mat = "Pine";   

    // Pass the current selection into a variable to use.
    function getMaterial()
    {
        var mat = document.getElementById("dropdownone");
        current_mat = mat.options[mat.selectedIndex].text;
        $("#price").html("Material is: " + current_mat  + "<br/>" +"Finish is: " + current_fin);
    }

    function getFinish()
    {
        var fin = document.getElementById("dropdowntwo");
         current_fin = fin.options[fin.selectedIndex].text;
        $("#price").html("Material is: " + current_mat  + "<br/>" +"Finish is: " + current_fin);
    } 
```

当您`var current_mat`在函数内部编写时，它会覆盖全局`current_mat`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:24:16.077

```
<!DOCTYPE html>
<html>
<head>

<script>

current_fin = "none";
current_mat = "Pine";

function getMaterial()
{
 var mat = document.getElementById("dropdownone");
 var current_mat = mat.options[mat.selectedIndex].text;
 var fin = document.getElementById("dropdowntwo");
 var current_fin = fin.options[fin.selectedIndex].text;
 document.getElementById("price").innerHTML="Material is: " + current_mat  + "<br/>"   +"Finish is: " + current_fin;
}
function getFinish()
{
var fin = document.getElementById("dropdowntwo");
var current_fin = fin.options[fin.selectedIndex].text;
var mat = document.getElementById("dropdownone");
var current_mat = mat.options[mat.selectedIndex].text;
document.getElementById("price").innerHTML="Material is: " + current_mat  + "<br/>" +"Finish is: " + current_fin;
}

  </script>
  </head>
  <body>

  <select name="material" id="dropdownone" onchange="getMaterial()">
   <option>Pine</option>
   <option>Oak</option>
   <option>Walnut</option>
   <option>Plastic</option>
  </select>

   <select name="finish" id="dropdowntwo" onchange="getFinish()">
      <option>None</option>
      <option>Finished</option>
   </select>

   <input type="submit" value="Submit To Cart">

   <div id="price">

   </div>

    </body>
     </html> 
```

# ruby-on-rails - 可以将旧版本的 Rails 应用程序部署到 Heroku 而不进行回滚吗？

> ID：15893622
> 
> 赞同：0
> 
> 时间：2013-04-09T04:57:52.100
> 
> 标签：ruby-on-rails, ruby, heroku

如果您将 v.15 部署到位于 C:/app 文件夹中的 heroku，但它会导致无法预料的问题。您可以`git add .` `git add -u` `git commit -m "older"`在旧版本上使用 etc 进行典型部署来部署几天前备份的 v.13 吗？

在这个 v.15 部署中，创建了一个新表 - > heroku rake db:migrate 以及

我正在尝试让我的应用程序再次运行，所以我要小心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:31:45.697

是的。只要它是回购历史上的正常提交，就应该没问题。也就是说，完成您正在尝试做的事情的更好方法可能是使用 git 的樱桃挑选功能。

如果您不确定，您可能希望创建第二个应用程序。您可以使用新`heroku fork`功能（工具带 v2.36 的新功能 - 用于`heroku help fork`获取有关它的更多信息）将您的应用程序克隆到新应用程序中。这是从现有应用程序创建暂存环境的好方法。

您可以使用它来查看部署新（旧？）更改将如何工作。希望有帮助！

# c# - 如何在 C# 或 Java 中使用替换或删除命令转换 HTML

> ID：15893626
> 
> 赞同：-5
> 
> 时间：2013-04-09T04:58:01.920
> 
> 标签：c#, java, html

```
 HTML 1  I m getting this in string ->

    S=        
           "<html>  <head> <link rel='stylesheet' type='text/css'
             href='http://www.taxmann.com/css/taxmannstyle.css' /> 
                 </head>  <body ><html>
                <body style='background-color:Black;font-size:30px;color:#fff;'>
        <div id=\"digest\">\r\n   
                   <p class=\"threedigest\">ST : Extended period of limitation 
                cannot be invoked for not paying tax if there was divergence 
        of opinion during relevant 
                period and 
                some judgments were in favour of assessee, 
                as there could be no suppression/wilful mis-statement
         by assessee</p>\r\n   
                 </div></body></html></body></html>" 
```

注意：我得到的这个 HTML 是正确的

```
BUT    String HTML 2 ->

            "<html> 
                     <head> <link rel='stylesheet
                    ' type='text/css' href='http://www.taxmann.com/css/taxmannstyle.css' /> 
                     </head>  <body ><html><body style='background-color:Black;font-size:30px;color:#fff;'>
                    <html>\r\n<head>
                    <link href='http://www.taxmann.com/TaxmannWhatsnewService/Styles/style.css' rel='stylesheet' type='text/css' />
                    \r\n<title>Rs.560-crore tax evasion detected</title>\r\n<style type=\"text/css\">
            \r\nbody
                    {font-family:Arial, Helvetica, sans-serif; font-size:12px; 
                line-height:18px;text-align:justify;}
                    \r\n.w100{width:100%;}\r\n.fl-l{float:left;}\r\n.ffla{font-family:Arial, 
                Helvetica, sans-serif;}
                    \r\n.fs18{font-size:18px;}\r\n.mart10{margin-top:10px;}\r\n.fcred{color:#c81616;}
                \r\n.tc{text-align:center;}\r\n.tu{text-transform:uppercase;}\r\n.lh18{line-height:18px;}\r\n</style>\r\n</head>\r\n<body>\r\n
                <div class=\"w100 fl-l\">\r\n<div class=\"w100 fl-l ffla fs18 mart10 fcred ttunderline tc tu\">
                    Rs.560-crore tax 
vasion detected</div>\r\n\r\n<div class=\"w100 fl-l lh18 mart10\">
                The Central Excise Intelligence, 
Chennai Zone, has detected 164 cases involving excise
                 and service tax evasion of Rs.560 crore in 2012- 13.
     A total of 166 show cause notices
                 have been issued involving Rs.500 crore for 
    various central excise and service 
                tax cases during the year.
 – www.business-standard.com</div>\r\n\r\n
            </div>\r\n</body>\r\n
                    </html>\r\n</body>
    </html></body>
    </html>" 
```

我想将 HTML 2 格式转换为与我尝试了很多但无法做到的 Html1 格式相同的格式。我也尝试删除一些 HTML 内容，但它不起作用，我不知道如何将 Html2 转换为与 Html1 相同，即使我也尝试使用 Java 删除它但无法做到请帮助我！在任何编程语言中使用替换或删除命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:10:48.480

试试这个，在你的代码的第一行删除两个不需要的 html 标签，即来自服务器的响应有两个 html 标签，因为你没有得到正确的响应。尝试删除所有不需要的标签并对齐 html 代码

```
public class TestScriptClass {
public static void main(String[] args) {

    String inputValue=" ";
      inputValue =inputValue+"<html><head> <link rel='stylesheet' type='text/css' href='http://www.taxmann.com/css/taxmannstyle.css' />"+ 
                    "</head>  <body ><html><body style='background-color:Black;font-size:30px;color:#fff;'>"+ 
                    "<html>\r\n<head> <link href='http://www.taxmann.com/TaxmannWhatsnewService/Styles/style.css' rel='stylesheet' type='text/css' />"+ 
                    "\r\n<title>Rs.560-crore tax evasion detected</title>\r\n<style type=\"text/css\">"+ 
                    "  \r\nbody{font-family:Arial, Helvetica, sans-serif; font-size:12px; "+ 
                    " line-height:18px;text-align:justify;} \r\n.w100{width:100%;}\r\n.fl-l{float:left;}\r\n.ffla{font-family:Arial, "+ 
                    "Helvetica, sans-serif;} \r\n.fs18{font-size:18px;}\r\n.mart10{margin-top:10px;}\r\n.fcred{color:#c81616;}"+ 
                    " \r\n.tc{text-align:center;}\r\n.tu{text-transform:uppercase;}\r\n.lh18{line-height:18px;}\r\n</style>\r\n</head>\r\n<body>\r\n"+ 
                    "  <div class=\"w100 fl-l\">\r\n<div class=\"w100 fl-l ffla fs18 mart10 fcred ttunderline tc tu\">"+ 
                    "   Rs.560-crore tax "+ 
                    "vasion detected</div>\r\n\r\n<div class=\"w100 fl-l lh18 mart10\">"+ 
                    " The Central Excise Intelligence, "+ 
                    "Chennai Zone, has detected 164 cases involving excise"+ 
                    "  and service tax evasion of Rs.560 crore in 2012- 13."+ 
                    "  A total of 166 show cause notices"+ 
                    "   have been issued involving Rs.500 crore for "+ 
                    "  various central excise and service "+ 
                    "  tax cases during the year."+ 
                    "– www.business-standard.com</div>\r\n\r\n"+ 
                    " </div>\r\n</body>\r\n"+ 
                    "   </html>\r\n</body>"+ 
                    "  </html></body>"+ 
                    "   </html>";

      String resultValue= inputValue.replace("<html><head> <link rel='stylesheet' type='text/css' href='http://www.taxmann.com/css/taxmannstyle.css' /></head>  <body ><html>", " <html><head> <link rel='stylesheet' type='text/css' href='http://www.taxmann.com/css/taxmannstyle.css' />");

      System.out.println(resultValue);       
}
} 
```

# windows-7 - WiX msi 自定义操作未在 Windows 7 上以有限权限运行

> ID：15893627
> 
> 赞同：2
> 
> 时间：2013-04-09T04:58:06.513
> 
> 标签：windows-7, visual-studio-2012, wix, windows-installer, custom-action

一直在尝试为我的最新项目创建一个 WiX 安装程序。我有一个奇怪的问题，如果我通过 cmd 提示符以管理员身份运行 msi，它可以正常工作，自定义操作会毫不费力地启动并且一切正常，但是如果我双击 msi，自定义操作将不起作用并且安装程序失败。我正在使用 Visual Studio 2012 和 Windows 7。

```
<!--Custom Actions-->
<Binary Id='customShortcut' SourceFile='$(var.CustomDir)\TestInstallerCustom.CA.dll'/>
<Binary Id='customDir' SourceFile='$(var.CustomDir)\TestInstallerCustom.CA.dll'/>
<Binary Id='removeDir' SourceFile='$(var.CustomDir)\TestInstallerCustom.CA.dll'/>

<CustomAction Id='customShortcutId' BinaryKey='customShortcut' DllEntry='CustomShortcut'
              Execute='immediate' Impersonate='no' Return='check' />
<CustomAction Id='customDirId' BinaryKey='customDir' DllEntry='CustomDir'
              Execute='immediate' Impersonate='no' Return='check'/>
<CustomAction Id='removeDirId' BinaryKey='removeDir' DllEntry='RemoveDir'
              Execute='immediate' Impersonate='no' Return='check'/>

<InstallExecuteSequence>
  <Custom Action='customDirId' Before='InstallFinalize'/>
  <Custom Action='customShortcutId' After='InstallFinalize'/>
  <Custom Action="removeDirId" After="InstallValidate">REMOVE="ALL"</Custom>
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:42:56.700

安装的`'immediate'`提升部分不执行自定义操作。因此，它们仅在安装过程中提升，运行提升（如您所见）。要提升自定义操作，它们必须是事务脚本的一部分。为此，请设置`CustomAction`元素`Execute='deferred'`属性。

注意：延迟自定义操作具有 MSI SDK 中记录的其他限制：[“延迟执行自定义操作”主题](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368268%28v=vs.85%29.aspx)。由于自定义操作看起来正在修改机器状态，因此您还需要考虑添加回滚自定义操作以撤消延迟自定义操作所做的更改。

写好自定义动作是相当具有挑战性的。这就是自定义操作是导致安装失败的最大原因的部分原因。如果您可以避免编写自定义操作，我强烈建议您这样做。:)

# c# - 连接字符串中的 Windows 身份验证（ASP .Net 应用程序）

> ID：15893631
> 
> 赞同：1
> 
> 时间：2013-04-09T04:58:41.510
> 
> 标签：c#, sql-server-2005, iis, connection-string

我有一个用于应用程序和数据库服务器的通用 Windows 帐户，例如 ApplicationAdmin。现在我想用不同的 Windows 帐户设置两台服务器。我在同一域 ApplicationAPP 和 ApplicationDB 上为两台服务器创建了两个 Windows 帐户，并在各自的服务器上激活。

我的应用程序在连接字符串中使用 Windows 身份验证。当我从数据库服务器上的 sql server 禁用 ApplicationAdmin 帐户时，我收到错误“用户 'Domain\ApplicationAdmin' 登录失败。原因：该帐户已禁用”。

由于某种原因，我无法从域中删除旧的 ApplicationAdmin 帐户。我们如何更改连接字符串自行获取的默认 Windows 身份验证。我希望该查询字符串将 Windows 身份验证作为我已添加到数据库服务器上的 sql server 的 Domain\ApplicationAPP 。

在排序中，我在应用服务器上有两个活动的 Windows 帐户，我的连接字符串采用旧身份验证，但我要求它采用新配置的用户身份验证。

# django - django过滤日期条件

> ID：15893635
> 
> 赞同：0
> 
> 时间：2013-04-09T04:59:14.777
> 
> 标签：django, python-2.7

我在 March10 发布第一份工作（jobname=job1），它应该从（livedate=march15）开始，并在 3 月 20 日到期。

我在 4 月 15 日发布了第二份工作（工作名称 = 工作 2），它应该从（活日期 = 4 月 20 日）开始，并在 4 月 25 日到期

我在 May20 发布第三份工作（jobname=job3），它应该从（livedate=may25）开始，并在 may30 到期。

## 在使用“jobname”和“livedate”进行过滤时，我必须显示“livedate”应该大于或等于“今天的日期”的作业。

我应该如何写视图？

帮助我并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:03:05.390

```
//order by livedate
jobs = Job.objects.filter(livedate__gte=datetime.date.today()).order_by('livedate')

//or order by livedate with filter by job
jobs = Job.objects.filter(
           jobname=job1, 
           livedate__gte=datetime.date.today()
       ).order_by('livedate') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:20:40.623

视图应该看起来像这样。请记住，该`filter()`方法将返回一个查询集，而不仅仅是一个对象。如果你只想要一个你必须使用的对象`get()`而不是`filter()`

```
import datetime

def yourview(request):
    jobs = Job.objects.filter(jobname="job3", livedate__gte=datetime.date.today())
    context = {'jobs': jobs}
    #render method could differ depending on what version of django you're running
    return render_to_response('template/mytemplate.html', context, context_instance=RequestContext(request)) 
```

# javascript - 性能与可读性：jQuery/JS 中的多个选择器与多个语句

> ID：15893644
> 
> 赞同：4
> 
> 时间：2013-04-09T04:59:28.147
> 
> 标签：javascript, jquery

我正在编写一些 jQuery 代码，它可以同时隐藏或显示大表中的大量表列。我想知道使用这样的代码是否会更快：

```
$("selector 1, selector 2, selector 3").css("display", "none"); 
```

或这样的代码：

```
$("selector 1").css("display", "none");
$("selector 2").css("display", "none");
$("selector 3").css("display", "none"); 
```

所以我使用[jsperf.com 创建了一个性能测试用例](http://jsperf.com/multiple-selectors-vs-multiple-statemtents)。有了这个，我确定第一种类型的代码（使用一个带有多个选择器的长字符串）比第二种类型的代码（一次隐藏一个列）快约 53%。然而，当我写完它时，它会变得难以阅读，看起来像这样：

```
$("#table tr *:nth-child(4), #table tr *:nth-child(5), #table tr *:nth-child(6), #table tr *:nth-child(7), #table tr *:nth-child(8), #table tr *:nth-child(9), #table tr *:nth-child(10), #table tr *:nth-child(11), #table tr *:nth-child(12)").css("display", "none"); 
```

所以我的问题是，对于 jQuery/JS 代码来说，哪个是更大的弊端——性能低下，还是缺乏可读性？我的背景是 Python，因此我倾向于将可读性置于性能之上，而 53% 在现实世界中似乎并不是一个巨大的下降。但另一方面，我计划在部署后缩小我的 JS 代码，因此无论如何它最终都不会可读......尽管我知道那里有去缩小器可以将我的代码返回到其原始可读或不可读的形式。正如你所看到的，我可以围绕这个话题谈论自己，而且我不希望开始辩论或讨论，所以我只是在这里发布这个，以防万一在 jQuery/ JS 社区。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:46:37.127

您可以将选择器存储在一个数组中，然后在需要时加入它们：

```
var selectors = [
    "selector 1",
    "selector 2",
    "selector 3"
];
$(selectors.join(", ")).css("display", "none"); 
```

长选择器起作用的原因是只创建了一个 jQuery 对象，并且只能调用一个浏览器方法，从而提高了速度。我猜`document.querySelectorAll`会被使用，并且可以传递整个选择器并返回结果。虽然 jQuery 会为调用`n`次数调用`document.querySelectorAll`方法`n`数`$().css`。

另一种选择是使用该`.add`方法来“提高”可读性：

```
var selectors = $("selector 1");
selectors.add("selector 2");
selectors.add("selector 3");
selectors.css("display", "none"); 
```

虽然我确信这会比多个选择器/`css`语句更快，但它不会像`document.querySelectorAll`' 使用一个大选择器的能力那样快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T05:10:10.447

也许您只需要考虑编写该代码并拥有两个世界的替代方法。例如：

```
var nth = [4,5,6,7,8,9,10,11,12];

$('#table tr *')
  .filter(':nth-child('+ nth.join('),:nth-child(') +')')
  .css('display', 'none'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T05:04:57.343

它可能应该取决于该代码被命中的频率（它是否在页面的生命周期中运行一次？它是否附加到计时器或点击事件或可能导致它多次触发的东西？）

我总是倾向于可读性而不是效率，直到/除非您确定某段代码是瓶颈并且需要优化。记住关于过早优化的经典编程课程。

另请记住，您的 jsperf 测试可能会因浏览器和客户端（尤其是旧的 IE 和手机）而大不相同。有时，由于 ECMA 实现的差异，即使最新版本的 Firefox 和 Chrome 之间的性能差异也很大！

最后，53% 的差异听起来像是用百分比表示的很多，但请查看以毫秒为单位的时间，并自行确定这是否可能成为应用程序的潜在瓶颈。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T05:05:13.923

绝对重视可读性高于性能。毕竟你使用的是JS。也就是说，您也可以以可读的方式提高性能。例如，使用更易于理解的 for 循环而不是内联的大字符串生成此选择器。

此外，通过缩小，您不应覆盖您的代码。对于任何修改，您仍然会返回到未缩小的版本，对其进行编辑，然后再次缩小。缩小的代码适用于浏览器而不是人眼。因此，任何关于其可读性的评论都是无关紧要的。

# objective-c - 即使在应用程序被删除后，您如何在设备上存储信息？

> ID：15893654
> 
> 赞同：0
> 
> 时间：2013-04-09T04:59:56.773
> 
> 标签：objective-c, xcode

我试图让用户在我的应用程序中尝试一些东西，但只能尝试一次。即使在用户删除应用程序后，我如何存储此信息，以便用户无法重新安装应用程序以再次尝试试用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:25:09.640

您可以使用钥匙串，因为即使应用程序从设备中删除，钥匙串项目也不会被删除。（可以使用“安全擦除”将其删除，如此处所述：[https](https://stackoverflow.com/a/3885110/1187415) ://stackoverflow.com/a/3885110/1187415 ，我对此不确定。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:13:41.070

不幸的是，App Store 的工作方式和沙盒工作方式的结合阻止了这种事情的发生。但是，您可以使用户多次执行该操作变得更加*困难。*只需在 NSUserDefaults 中放一个 BOOL 说明用户已经完成了这件事，然后拒绝再做一次。当然，用户可以删除应用程序（从而删除 NSUserDefaults），重新安装它，然后再做一次——一次。但这将是很多工作，所以有你的威慑力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:15:32.423

如果您对应用程序使用身份验证，则会发生这种情况。解决方案是这样的，将一个身份验证页面作为您的应用程序的起点。一旦用户登录将信息发送到您的服务器。下次即使用户删除您的应用程序并重新安装也无法使用它，您的 Web 服务器响应将被更改。

应用程序-->登录-->服务器-->响应-->打开应用程序->将响应存储在本地持久性中，每次用户重新安装应用程序时都会发生这种情况。让我们假设您的跟踪模块将通过单击按钮打开，单击按钮后，检查并从您的本地持久性中获取信息，并通过您的错误消息向用户提示。

希望这能帮助您了解服务器-客户端模型。祝您好运。

注意：一旦用户删除您的应用程序，与您的应用程序相关的所有数据都将从设备中删除。

# magento - Magento EcomDev PHPUnit 客户夹具未加载

> ID：15893655
> 
> 赞同：2
> 
> 时间：2013-04-09T04:59:59.897
> 
> 标签：magento, phpunit

我有一个案例，我想检查数据库中是否已经存在客户。我为此创建了一个夹具文件：

```
scope:
  website:
    - website_id: 1
      code: main
      name: Main Website
      default_group_id: 1
  group:
    - group_id: 1
      website_id: 1
      name: Main Website Store
      root_category_id: 8
      default_store_id: 1
  store:
    - store_id: 1
      code: default
      website_id: 1
      group_id: 1
      name: Default Store View
      is_active: 1
eav:
  customer:
    - entity_id: 13
      entity_type_id: 1
      website_id: 1
      email: example@example.com
      group_id: 1
      store_id: 1
      is_active: 1
      firstname: john
      lastname: smith 
```

当我运行测试时，我收到错误：

```
Zend_Db_Statement_Exception: SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'sort_order' in order clause is ambiguous 
```

此错误仅在我加载夹具时发生，因此我认为它与 Model_Fixture_Eav 类有关。我不确定应该实施哪些方法来为客户创建 EAV 模型。以前有没有人成功导入客户设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T11:33:22.170

```
东：
    顾客：
        - entity_id：13
          entity_type_id: 1
          属性集ID：0
          网站编号：1
          电子邮件：example@example.com
          group_id：1
          store_id: 1
          is_active: 1
          名字：约翰
          姓氏：史密斯

```

# android - Android 在没有可展开视图的情况下在状态栏中显示通知

> ID：15893658
> 
> 赞同：6
> 
> 时间：2013-04-09T05:00:25.563
> 
> 标签：android, notifications, statusbar

我需要帮助才能做某事。我尝试在 android 状态栏中显示通知。

它将通知用户与服务器的同步正在进行中。

现在，我使用这段代码，它工作正常：

```
 NotificationCompat.Builder builder = new NotificationCompat.Builder(this)
            .setSmallIcon(android.R.drawable.stat_notify_sync).setWhen(System.currentTimeMillis())
            .setAutoCancel(false).setOngoing(true);

    NotificationManager nm = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notif = builder.getNotification();
    nm.notify(1, notif); 
```

唯一的问题是当用户展开状态栏时会创建一个视图。我想要做的只是在状态栏顶部显示一个小图标，没有内容视图。

有人知道该怎么做吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:11:54.220

这是不可能的。

基本原理是：如果用户查看状态栏并看到一个图标，她应该有某种方法可以弄清楚该图标的含义。因此，通知面板中必须有一行与每个图标对应。

我建议创建一个通知，就像您在问题中所做的那样，说明正在进行同步；这是指示当前正在同步哪个应用程序的绝佳机会（因此，如果存在某种问题或同步需要永远，用户就知道哪个应用程序需要关注）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:09:57.123

您可以使用此方法在状态栏上显示通知图标

```
 private void showNotification() {
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    // In this sample, we'll use the same text for the ticker and the
    // expanded notification

    // Set the icon, scrolling text and timestamp
    Notification notification = new Notification(R.drawable.ic_launcher,
            "Service Started", System.currentTimeMillis());
    // The PendingIntent to launch our activity if the user selects this
    // notification
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, MainActivity.class), 0);
    // Set the info for the views that show in the notification panel.
    notification.setLatestEventInfo(this, getText(R.string.service_label),
            "Service Started", contentIntent);
    // Send the notification.
    // We use a layout id because it is a unique number. We use it later to
    // cancel.
    nm.notify(R.string.service_started, notification);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T11:32:43.930

好吧，这对于 InputMethodService 是可能的，只需使用 showStatusIcon(resource_name)。但我认为这对于除了输入服务之外的任何东西都不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T14:26:52.880

```
Context context = TutListDownloaderService.this
.getApplicationContext();
NotificationManager notificationManager = (NotificationManager) context
.getSystemService(NOTIFICATION_SERVICE); 
```

创建通知：

```
Notification updateComplete = new Notification();
updateComplete.icon = android.R.drawable.stat_notify_sync;
updateComplete.tickerText = context.getText(R.string.notification_title);
updateComplete.when = System.currentTimeMillis(); 
```

创建待处理对象：

```
Intent notificationIntent = new Intent(context,TutListActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
notificationIntent, 0);

String contentTitle = context.getText(R.string.notification_title).toString();
String contentText;
if (!result) {
Log.w(DEBUG_TAG, "XML download and parse had errors");
contentText = context.getText(R.string.notification_info_fail).toString();
} else {
contentText = context.getText(
    R.string.notification_info_success).toString();
}
updateComplete.setLatestEventInfo(context, contentTitle, contentText, contentIntent); 
```

最后向用户显示通知：

```
notificationManager.notify(LIST_UPDATE_NOTIFICATION, updateComplete); 
```

# clojure - 如何将字符串转换为 clojure 表达式？

> ID：15893661
> 
> 赞同：3
> 
> 时间：2013-04-09T05:00:39.267
> 
> 标签：clojure

我想在一个字符串中发送一个 clojure 表达式，以便在接收方进行评估，这可能是一个用 compojure 编写的 Web 服务。例如，假设我有字符串“(* 7 6)”，我想将其转换为 '(* 7 6)，然后我可以将其传递给 eval 并得到 42。这个操作在 JavaScript 中是微不足道的，但是不太清楚如何在clojure中做到这一点。提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:03:15.997

这应该可以解决问题：

```
(eval (read-string "(* 7 6)")) ;; 42 
```

或者，简而言之：

```
(load-string "(* 7 6)") ;; 42 
```

# c#-4.0 - 该进程无法访问文件“C:\Photo.jpg”，因为它正被另一个进程使用

> ID：15893668
> 
> 赞同：1
> 
> 时间：2013-04-09T05:00:55.240
> 
> 标签：c#-4.0, file-upload, file-io, image-uploading

我试图通过替换现有文件来调整上传图像的大小并将其保存在特定位置。但这给了我一个错误，说“该进程无法访问文件'C：\ Photo.jpg'，因为它正在被另一个进程使用。”

这是我的代码。

```
private void llblChangePlayerPicture_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            ofdPlayerPicture.Reset();
                ofdPlayerPicture.Filter = "JPEG(*.jpeg,*.jpg)|*.jpeg;*.jpg|Bitmap (*.bmp)| *.bmp |PNGs(*.png)|*.png";
                ofdPlayerPicture.ShowDialog();
                Image newImage;
                if (ofdPlayerPicture.FileName != "")
                {
                    pboPlayerPicture.Image = null;
                    pboPlayerPicture.ImageLocation = null;
                    newImage = Resize(Image.FromFile(ofdPlayerPicture.FileName), new Size(250, 100));
                    SaveJpeg(Program.playerImagePath + regNo + "\\Photo1.jpg", newImage, 100);
               } 
```

这是我的保存图片

```
 public static void SaveJpeg(string path, Image img, int quality)
            {
                EncoderParameter qualityParam = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, quality);
                ImageCodecInfo jpegCodec = GetEncoderInfo("image/jpeg");
                EncoderParameters encoderParams = new EncoderParameters(1);
                encoderParams.Param[0] = qualityParam;
                System.IO.MemoryStream mss = new System.IO.MemoryStream();
                System.IO.FileStream fs = new System.IO.FileStream(path, System.IO.FileMode.Create, System.IO.FileAccess.ReadWrite);
                img.Save(mss, jpegCodec, encoderParams);
                byte[] matriz = mss.ToArray();
                fs.Write(matriz, 0, matriz.Length);

                mss.Close();
                fs.Close();
                mss.Dispose();
                fs.Dispose();
            } 
```

如果我想使用 File.Delete 函数删除 Photo.jpg，它会给我同样的问题。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:29:09.930

找到了解决方案。处理所有对象，以及使用 Image 的图片框。无论是用于同一个控件还是不同控件。每次更改图像时，在主控件中重新创建图片框控件。对我来说非常好。

希望这是有用的。

快乐编码

# html - 为什么 Chrome 会在我的 Div 中添加一个像素

> ID：15893671
> 
> 赞同：1
> 
> 时间：2013-04-09T05:01:10.390
> 
> 标签：html, styles, width, border

我创建了一个 1010px 长，周围有 5px 边框，使其长度为 1020，但是，当我在 chrome 中检查 div 时，尽管代码仍然说它是 1010px 并且它的边框是 5px 它实际上是 1021px

我可以确认左右边框都没有添加像素，因为 div 应该包含 5 个单独的图像，每个图像都是 202px 宽，所以所有 5 个应该完全适合没有间隙，但第一个图像作为它之间的最小间隙和左边框

我以前完美地完成了这项工作，但使用表格，我目前正在重新设计网站以删除所有表格并用 div 替换它们，同时保持完全相同的外观

这是创建 div 的代码

```
<div width="1010" align="center" style="border: 5px solid #9DBFFF; margin:0px; padding:0px;"> 
```

注意：是的，我首先将样式移到 .css 文件中，这是重新设计的另一部分，删除所有样式并将它们放入 .css 文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:45:45.020

您可以尝试在样式属性中使用“宽度”属性，如下所示：

```
<div align="center" style="border: 5px solid #9DBFFF; margin:0px; padding:0px; width:1010px;"> 
```

我检查了 Chrome 中的 div ，它的宽度与 css 中指定的确切宽度相同。

# ios - 使用 GCD 将图像从文件加载到 UICollectionView

> ID：15893677
> 
> 赞同：1
> 
> 时间：2013-04-09T05:01:49.413
> 
> 标签：ios, grand-central-dispatch, uicollectionview

当我拍照时，我将图像文件保存到我在 NSDocuments 目录中创建的文件夹中。（/文档/照片/..png）

然后我在收藏视图的照片文件夹中加载所有照片。由于文件很大，我决定使用 Grand Central 调度在后台线程上执行抓取图像。但是当我向上和向下滚动 UICollectionView 时，我可以看到图像在显示正确的图像之前随机变化。我假设每当我抓取图像时，我只是将它设置在主线程上，但我真的不知道如何处理这个问题。

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    NSUInteger rowNumber = [indexPath row];

    //NSString *imagePath = [self.photoPathArray objectAtIndex:rowNumber];

    NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"Photos"] error:NULL];

    NSString *imagePath = [NSHomeDirectory() stringByAppendingFormat:@"/Documents/Photos/%@",[directoryContent objectAtIndex:rowNumber]];

    NSLog(@"the image path is %@", imagePath);

        imageCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"imageCell" forIndexPath:indexPath];

     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

         UIImage *originalImage = [UIImage imageWithContentsOfFile:imagePath];
         UIImage *thumbNail = [self shrinkImage:originalImage withSize:CGSizeMake(200, 200)];

         dispatch_sync(dispatch_get_main_queue(), ^{
             cell.imageView.image = thumbNail;
         });

     });

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T02:53:14.303

查看 Apple 的示例应用程序：LazyTableImages。我刚刚成功地将它合并到一个集合视图中。

[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

# google-apps-script - 如何在 Web 上向 GDrive UI 添加按钮？

> ID：15893680
> 
> 赞同：0
> 
> 时间：2013-04-09T05:01:58.713
> 
> 标签：google-apps-script, google-drive-api

如何在 Web 上向 GDrive UI 添加按钮？

GDrive API 是否有任何 APY 来扩展 UI？（比如安装可以添加按钮的应用程序）

我想用按钮扩展 Gdrive UI，对我来说最好的选择是在按钮单击时执行 Google Apps 脚本。

我还想访问 GDrive 上的选择选项（对选择的文件夹/文件执行操作）。

我认为 Chrome 插件可以解决使用 javascript 添加按钮并在操作时调用 Google Apps 脚本的问题，但这是一种复杂的方式，我现在不知道该怎么做。

你有什么建议吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:20:00.277

就像你说的，使用 chrome 插件。很容易，但每当谷歌改变某些东西时，它可能会中断。还要警惕随机 dom 属性，因为一些 google js 会通过闭包/ caja 编译等。

# backbone.js - Backbone Marionette：从 CollectionView 获取嵌套/交换视图

> ID：15893681
> 
> 赞同：2
> 
> 时间：2013-04-09T05:02:10.357
> 
> 标签：backbone.js, marionette

所以我一直在玩 Backbone Marionette，并且能够从 json 数据创建一个集合视图。

这是我所拥有的图片

![集合视图](https://i.stack.imgur.com/aZ7oz.jpg),

我试图让每个 itemview 都有一个 onclick 事件，该事件将打开一个嵌套视图，该视图通过下划线模板从 itemview 传递数据。这是一个 swapview 示例（不是我的顺便说一句）：http//jsfiddle.net/VLY4t/14/

这是我的代码的样子（第二张图片）（请注意，我有一个通过 url 散列的骨干路由器，但无法呈现下划线模板）。非常感谢任何帮助。：工作示例是：狗的品种是 <%= name %> ![来自 Itemview 的孩子](https://i.stack.imgur.com/YoJ1V.jpg)

客户端模板和 UI 是这样的：

```
<script type="text/template", id="dogs-template">
<ul><ul>
</script>

<script type="text/template", id="dog-template">
<a href="dogs/<%= name %>"> <%= name %>
</script>

<script type="text/template", id="play-template">
p This dog's breed is <%= name %>
</script> 
```

Javascript是：

```
//Im serving data via RESTful JSON, but the data looks like this
var dogs = [{name: 'yorkie'}, {name: 'pitbull'}, {name: 'dobberman'}, etc]

App = new Backbone.Marionette.Application();

App.addRegions({
mainRegion: "#content",
playRegion: "#play"
});

//Call the backbone history here

App.on("initialize:after", function(options){
  if (Backbone.history){
    Backbone.history.start({pushState: true});
  }
});

//Call the Controller

Controller = {

};

// Start the models n collections

Dog = Backbone.Model.extend({

});

Dogs = Backbone.Collection.extend({
model: Dog,
url: '/jonas',

});

DogView = Backbone.Marionette.ItemView.extend({
template: "#dog-template",
tagName: 'li',
initialize: function(){
        //var moot = _.bindAll(this.model);

    },

events: {
"click" : function() {
      //show new region here

      App.playRegion.show(theplayview);

    }
  }

});

PlayView = Backbone.Marionette.ItemView.extend({
template: '#play-template'

});

DogsView = Backbone.Marionette.CollectionView.extend({
template: "#dogs-template",
itemView: DogView
})

var doggies = new Dogs();
var bob = doggies.fetch({async: false});

var doggyview = new DogsView({collection: doggies});

App.mainRegion.show(doggyview);

var theplayview = new PlayView(this.model);

MyRouter = Backbone.Marionette.AppRouter.extend({
controller: Controller,

    appRoutes: {
        "": "route1",

        "testrouter": "route2",

        "testrouter#dogs": "route3",

        "testrouter#dogs/:id": "route4",

    },

});

App.addInitializer(function(){
console.log("Router is on")
new MyRouter();
});

App.on("initialize:after", function(){

}); 

App.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:07:28.023

尝试像这样连接您的点击处理程序

```
events: {
 "click" : "showView"
},
showView: function() {
  var theplayview = new PlayView(this.model);
  App.playRegion.show(theplayview); 
} 
```

# php - 使用 php domxml 读取 xml 文件时出错？

> ID：15893682
> 
> 赞同：2
> 
> 时间：2013-04-09T05:02:22.387
> 
> 标签：php, xml, domdocument, xml-namespaces

我有一个文件 test.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<item>
<dc:creator><![CDATA[hello world]]></dc:creator>
</item> 
```

和代码php

```
$doc = new DOMDocument();
$doc->load('test.xml');
$items = $doc->getElementsByTagName('item');
foreach ($items as $item) {
   $authors = $item->getElementsByTagName( "dc:creator" );
   $author = $authors->item(0)->nodeValue;
   echo $author;
} 
```

=> error can't get value, 如何得到这个，结果是“hello world”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:08:43.387

您使用了错误的元素名称。该方法`getElementsByTagName`需要本地名称，即`creator`您的情况。

您可以看到，如果您加载示例 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<item>
<dc:creator><![CDATA[hello world]]></dc:creator>
</item> 
```

进入 DOMDocument。你会收到一个警告：

> 警告：DOMDocument::loadXML(): 实体中未定义创建者上的命名空间前缀 dc

因为没有定义命名空间前缀，DOMDocument 将删除它。这会产生以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<item xmlns:dc="ns:1">
<creator><![CDATA[hello world 2]]></creator>
</item> 
```

如您所见，不再有带有*xmlns-prefix* ( ) 的*本地名称* 的元素。`creator` *`dc``<dc:creator>`*

 *但是，就像您为示例粘贴了错误的 XML 一样，并且名称空间前缀很可能*是*在您的真实 XML 中定义的，您只是在询问如何使用名称空间前缀（即冒号之前的部分`:`）访问标签。此处已对此进行了概述：

*   [如何使用php读取<abc:xyz> xml标签？](https://stackoverflow.com/q/3130605/367456)

如果你想要一个元素的标签位于它自己的命名空间内，你需要告诉*DOMDocument*你的意思是哪个命名空间：

```
$dcUri   = $doc->lookupNamespaceUri('dc');
$authors = $item->getElementsByTagNameNS($dcUri, 'creator');
$author  = $authors->item(0)->nodeValue; 
```*

# xpath - 对 xpath 之间数字变化的元素使用正则表达式

> ID：15893694
> 
> 赞同：2
> 
> 时间：2013-04-09T05:03:35.973
> 
> 标签：xpath, selenium, numbers, webdriver

在我的应用程序中，我的收件箱中有邮件，每封邮件都有不同的 ID。我无法点击第一封邮件，因为邮件 ID 每次都在不断变化。

xpath如下：

```
//*[@id='r1295']/td[4]/a/font 
```

在上面的 xpath 中，'r...' 之后的数字不断变化。

如何处理这样的变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:14:26.017

试试 xpath 函数：

```
//*[starts-with(@id, 'r')]/td[4]/a/font 
```

# rotation - 无法从动态 JS 线中获取转换点

> ID：15893697
> 
> 赞同：1
> 
> 时间：2013-04-09T05:03:58.700
> 
> 标签：rotation, coordinates, kineticjs, transformation, splines

我已经能够使用 Kinetic JS 成功绘制一条线，如下所示：

```
var track129 = new Kinetic.Spline({
points: [
{x: 3, y: 400}, 
{x: 196, y: 400}, 
{x: 213, y: 395}, 
{x: 290, y: 345},
{x: 319, y: 324},
{x: 389, y: 253},
{x: 457, y: 184},
{x: 471, y: 173},
{x: 481, y: 173},
{x: 682, y: 173}, // this is where the blue track branches to the red track (129, 009).
{x: 708, y: 171},
{x: 740, y: 186},
{x: 773, y: 218},
{x: 799, y: 240},
{x: 822, y: 251},
{x: 845, y: 254},
{x: 866, y: 251},
{x: 894, y: 238},
{x: 934, y: 204}        
],
stroke: 'blue',
strokeWidth: 2,
lineCap: 'round',
tension: .2
});

layer.add(track129); 
```

然后我使用以下命令旋转该行：

```
track129.setRotationDeg(45); 
```

视觉显示更新。然后我尝试从旋转线中取出转换点，如下所示：

```
var mySpleenPoints = track129.getPoints(); 
```

我最终得到了与我输入时相同的点数组。我试图获得偏移和平移，以查看是否可以得出旋转点的绝对坐标，但我没有运气。谁能帮我提取实际的翻译值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:36:34.583

抱歉，旋转实际上并没有转换点值，所以你得到了正确的输出。如果您想要翻译后的值，则必须编写一个计算坐标的函数。好消息是您拥有执行此操作所需的所有价值观。旋转度数、坐标和绕点旋转。

我认为这是方程（围绕原点旋转）

```
 x' = x * cos(Theta) - y * sin(Theta);
 y' = x * sin(Theta) + y * cos(Theta); 
```

[HTML5 Canvas：旋转时计算 ax,y 点](https://stackoverflow.com/questions/9043391/html5-canvas-calculating-a-x-y-point-when-rotated)

[https://math.stackexchange.com/questions/123098/finding-the-position-of-a-point-after-rotation-why-is-my-result-incorrect](https://math.stackexchange.com/questions/123098/finding-the-position-of-a-point-after-rotation-why-is-my-result-incorrect)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T01:38:26.857

这真是令人恼火的行为。无论如何，谢谢你的帖子。我正在为将来遇到此问题的任何人提供代码。

```
function degToRad(angle) {
return (angle / 180) * Math.PI;
}

function rotateVector ( v, center, angle ) {
var theta = degToRad(angle);        
var s = Math.sin(theta);

var c = Math.cos(theta);

var nx = c * (v.x -center.x) + center.x - s * (v.y - center.y);
var ny = s * (v.x - center.x) + c * (v.y - center.y) + center.y;

v.x = nx;
v.y = ny;

return v;
}; 
```

# merge - SAS 数据步骤合并/修改 2 个数据集，但仍保留主数据集上的完整性约束 (pk)

> ID：15893699
> 
> 赞同：1
> 
> 时间：2013-04-09T05:04:02.667
> 
> 标签：merge, primary-key, sas, proc-sql, datastep

我有如下代码

```
data master;
input id name $ status $;
datalines;
1    B    b
2    C    c
3    A    a
;;;;
run;

PROC SQL;
ALTER TABLE master
ADD PRIMARY KEY (id);
QUIT;

data transaction;
input name $ status $;
datalines;
A    f
F    f
E    e
D    d
B    z
C    x
;;;;
run;

proc sort data = master;
by name;
run;

proc sort data = transaction;
by name;
run; 
```

我想将事务数据集合并到主数据集，并用事务数据集的值更新主数据集的值。为此，我可以使用下面的代码

```
data have;
retain _maxID; 
merge have addon;
by name;
if id = . then id = _maxID + 1;
_maxID = max(id, _maxID);
run; 
```

结果看起来像这样

```
id   name   status
3    A      f
1    B      z
2    C      x
4    D      d
5    E      e
6    F      f 
```

但是，主数据集被重置，我失去了主数据集 id 列的主键约束。

据我所知，合并、设置和更新命令创建新数据集，而不是更新当前数据集。

modify 语句是唯一更新当前数据集的语句，但是将上述代码中的 merge 语句替换为 modify 不起作用。

我可以通过在合并后恢复主数据集的主要约束来解决这个问题，但这不是一个好的解决方案。

除了这个还有其他方法吗？帮助表示赞赏，并提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:02:43.937

正如您所说，唯一不创建新数据集的语句是 MODIFY，但您可以使用它来实现您的目标。[这里](http://www2.sas.com/proceedings/sugi31/264-31.pdf)有一篇关于使用 MODIFY 的好 SUGI 论文

这是您可以使用的代码，我已将 ID 设置为在此示例中有效的当前迭代，但我会检查它是否适合您的实际目的。

```
data master;
modify master transaction;
by name;
select (_IORC_);
    when (%sysrc(_SOK)) replace;
    when (%sysrc(_DSENMR)) do;
        id=_n_;
        output;
        _error_=0;
        end;
    otherwise; 
end;
run; 
```

这里有一个类似的已回答问题，提供了更多详细信息。

链接：-[类似的语句在 sas 中合并 sql](https://stackoverflow.com/questions/11743778/similar-statement-to-merge-sql-in-sas)

# vb.net - 组合框选择中的问题

> ID：15893701
> 
> 赞同：0
> 
> 时间：2013-04-09T05:04:06.460
> 
> 标签：vb.net, combobox

我是 vba excel 的新手，我已经成功放置了一个依赖于下拉列表选择的条件组合框，我面临的问题是每当我点击组合框中的任何项目时，它都不会出现在框中点击。

谁能帮我解决这个问题。

谢谢你

我使用的代码是：

```
 Private Sub ComboBox1_DropButtonClick()
ComboBox1.Clear

If Worksheets("Sheet1").Cells(2, 1).Value = "PHE" Then
With ComboBox1

For row = 1 To 1300
.AddItem Sheets("Sheet2").Cells(row, 6)
Next row
End With

End If

If Worksheets("Sheet1").Cells(2, 1).Value = "HSS" Then
With ComboBox1
For row = 2 To 56
.AddItem Sheets("Sheet2").Cells(row, 8)
Next row
End With

End If

If Worksheets("Sheet1").Cells(2, 1).Value = "Decanter" Then
With ComboBox1
For row = 3 To 249
.AddItem Sheets("Sheet2").Cells(row, 9)
Next row
End With

End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:22:48.647

如果您能够以某种方式解释选择的值，也许您可​​以重置组合框的值。这仅适用于正确选择值的情况，只是在组合框中不可见。

```
ComboBox1.Value = something 
```

此外，这可能会更干净（在此处编写代码，因此可能存在拼写错误）。

```
Private Sub ComboBox1_DropButtonClick()

ComboBox1.Clear

Select Case Worksheets("Sheet1").Cells(2, 1).Value
Case "PHE"
  minrow = 1
  maxrow = 1300
  col = 6
Case "HSS"
  minrow = 2
  maxrow = 56
  col = 8
Case "Decanter"
  minrow = 3
  maxrow = 249
  col = 9
Case Else
  'error handling
End Select

With ComboBox1
  For row = minrow To maxrow
    .AddItem Sheets("Sheet2").Cells(row, col)
  Next row
End With

End Sub 
```

# window - 在开发 windows 8 商店应用程序时

> ID：15893706
> 
> 赞同：-1
> 
> 时间：2013-04-09T05:04:23.797
> 
> 标签：window, windows-store-apps

我是橱窗商店应用程序开发的新手，我也从未在 WPF 中工作太多，但我在 Web 开发和 WCF 服务方面有很好的经验。我的下一个任务是 Window 8 Store App，我需要尽快启动它。我们有 WCF Restful 服务，所以我们只需要创建具有多个页面的 UI。

所以我需要知道的是 - 1\. MVVM 模式是否适合此类应用程序？2\. 我在哪里可以找到橱窗商店应用程序的所有控件？3\. HTML/Javascript 可以和 XAML/C# 一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:40:54.270

**1\. MVVM模式适合这样的应用吗？**

当然是。MVVM 模式可以应用于任何基于 XAML 的开发。有很多可用的框架。

[在 Windows 8 中使用 MVVM 模式 - Laurent Bugnion（MVVM Light 背后的策划者）](http://msdn.microsoft.com/en-us/magazine/jj651572.aspx)

[MVVM 灯](http://mvvmlight.codeplex.com)

[卡利本微](http://caliburnmicro.codeplex.com)

[简单的 MVVM 工具包](http://simplemvvmtoolkit.codeplex.com/)

[JulMar MVVM 助手 + 行为](http://mvvmhelpers.codeplex.com/)

[Kona - 适用于 Windows 8 应用程序的棱镜](http://konaguidance.codeplex.com/)

[Catel - 支持 MVVM 的应用程序开发平台](http://catel.codeplex.com/)

**2\. 我在哪里可以找到橱窗商店应用程序的所有控件？**

[控件列表（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465351.aspx)

[控件列表（使用 JavaScript 和 HTML 的 Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/Hh465453(v=win.10).aspx)

**3\. HTML/Javascript 可以和 XAML/C# 一样吗？**

这是一个讨论的主题，我建议阅读这个 stackoverflow 问题： [我应该选择 HTML5 还是 XAML 进行 Metro 开发？](https://stackoverflow.com/questions/11147012/should-i-choose-html5-or-xaml-for-metro-development)

选择哪种语言完全取决于您。大多数功能在两者中都可用，但 JavaScript 更重要，因为您可以在项目中使用任何 JS。控件几乎相同。

# c++ - 是否有 #ifdef 剥离 C/C++ 实用程序

> ID：15893710
> 
> 赞同：2
> 
> 时间：2013-04-09T05:04:47.783
> 
> 标签：c++, c, c-preprocessor, conditional-compilation

有没有可以删除说`#ifdef PRO_VERSION ... #endif`代码的实用程序？

请不要告诉我有关 Visual Studio 编译器标志或 XCode 的视图后处理源的信息。我不能像控制台应用程序那样方便地自动化它。

我在这里要做的是找到一个现有的实用程序（如果存在）。如果不是......我想我将不得不重新发明轮子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T05:09:55.057

[unifdef](http://dotat.at/prog/unifdef/)可能是您正在寻找的。

从[它的手册](http://dotat.at/prog/unifdef/unifdef.txt)：

> unifdef 实用程序作用于#if、#ifdef、#ifndef、#elif、#else 和#endif 行。仅当命令行上指定的符号足以允许 unifdef 为其控制表达式获取确定值时，才会处理指令。如果结果为假，则删除该指令及其控制下的以下行。如果结果为真，则仅删除指令。如果在命令行上未指定其控制符号，则 #ifdef 或 #ifndef 指令将原样通过。任何具有未知值或 unifdef 无法解析的 #if 或 #elif 控制表达式都将原封不动地通过。

# less - 在 sublime text 2 中设置 Less-Build - Mac OS X

> ID：15893711
> 
> 赞同：0
> 
> 时间：2013-04-09T05:04:50.690
> 
> 标签：less, sublimetext2

我浏览并安装了以下软件包

[https://github.com/berfarah/LESS-build-sublime/blob/master/readme.md](https://github.com/berfarah/LESS-build-sublime/blob/master/readme.md)

我创建了一个名为 style.less 的文件并插入了以下代码（只是为了实验）

```
@bgcolor: red;

body {
background: @bgcolor;
} 
```

保存文件然后点击*command + b*来构建less文件。

当我点击*command + b时，我期望创建一个 style.css*

相反，我在控制台上收到一条消息：

> [Errno 2] 没有这样的文件或目录 [cmd: [u'lessc', u'/Users/staff/Desktop/site/day2/css/style.less', u'/Users/staff/Desktop/site/day2 /css/style.css', u'--verbose']] [目录：/Users/staff/Desktop/ `paperbusiness`/day2/css] [路径：/usr/local/bin:/usr/local/bin:/usr /local/bin:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin] [已完成]

我可能做错了什么？

我需要在 Packages/LESS-build/changeLESSBuildType.sh 中做些什么吗

它包含：

```
#!/bin/bash
PS3='Please enter your choice: '
options=("Normal" "Directory Rewrite" "Quit")
select opt in "${options[@]}"
do
    case $opt in
        "Normal")
            rm LESS.sublime-build
            ln -s LESS-normal.sublime-build-choice LESS.sublime-build
            break;
            ;;
        "Directory Rewrite")
            rm LESS.sublime-build
            ln -s LESS-rewriteDir.sublime-build-choice LESS.sublime-build
            break;
            ;;
        "Quit")
            break
            ;;
        *) echo invalid option;;
    esac
done 
```

谢谢您阅读此篇。非常感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T05:12:58.693

我在 MAC OS X Mountain Lion 上安装 LESS 时遇到了同样的问题，我通过安装 LESS 解决了这个问题：

```
sudo npm install --global less 
```

反而

```
npm install --global less 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:35:18.883

你必须先在你的系统上安装 node.js 和 npm 才能让 sublime text 更少地构建到 css 中。

[从nodejs.org](http://nodejs.org)下载安装程序，运行它。然后打开终端，输入以下内容：

```
npm install --global less 
```

这将安装 node.js 包，您需要从较少的文件构建 css 文件。有关更多信息，请参阅[本教程](http://tech.diaslopes.com/?p=112)。如果这可行，那么崇高文本中的构建系统也应该可以工作。

# css - 将页脚标签移到中心

> ID：15893713
> 
> 赞同：0
> 
> 时间：2013-04-09T05:04:57.970
> 
> 标签：css, center, footer

我正在开发一个改编自[http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)的网站 我想重新定位从左浮动到中心的页脚菜单。我从 3 天开始就一直在做这件事。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:21:43.170

我已经检查了您在上述问题中提供的 URL。导航有`position: fixed`。因此，添加几个 CSS 属性就可以了。您可以添加以下属性。

```
width: 320px;
left: 50%;
margin-left: -160px; 
```

诀窍是给出`left`50%，这使得元素在视口的（垂直）中心之后开始渲染。然后将`margin-left`其作为负数将其稍微拉回左侧。现在，给出`margin-left`元素一半的大小`width`将确保元素被拉回左侧，使其垂直中心与视口的垂直中心重合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:38:59.613

如果您正在谈论页脚上的导航菜单..这是您可以做到的..

1.  将一个类应用于`<nav>`ie`<nav class='scrollNav'>`
2.  为类 scrollNav 添加 CSS 样式表

    ```
    .scrollNav {
        margin: 0 auto;
        width: 400px;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
    } 
    ```

边距将使导航居中。您可以根据菜单栏宽度选择宽度。用绝对值覆盖位置，以便左、右和底部位置起作用。并使左，右，下为0。这样它就会粘在底部..

我希望这有帮助..

谢谢并恭祝安康，

拉胡尔·帕蒂尔

# c# - 如何将授权逻辑与控制器操作分开？

> ID：15893714
> 
> 赞同：2
> 
> 时间：2013-04-09T05:05:10.093
> 
> 标签：c#, asp.net-web-api, authorization

给定以下代码：

```
public class BackupsController : ApiController
{
    private readonly IApiContext context;
    private readonly IBackupService backupService;

    public BackupsController(IApiContext context, IBackupService backupService)
    {
        this.context = context;
        this.backupService = backupService;
    }

    public HttpResponseMessage Get(Guid id)
    {
        if (id == Guid.Empty)
        {
            throw new HttpResponseException(HttpStatusCode.BadRequest);
        }

        IBackupView backup = backupService.Get(id);

        if (backup == null)
        {
            return Request.CreateErrorResponse(HttpStatusCode.NotFound, String.Format("BackupId '{0}' not found.", id));
        }

        if (!IsAuthorizedForBackup(backup))
        {
            throw new HttpResponseException(HttpStatusCode.Forbidden);
        }

        return Request.CreateResponse(HttpStatusCode.OK, backup);
    }

    private bool IsAuthorizedForBackup(IBackupView backup)
    {
        if (context.Principal.IsInRole(MembershipRole.Admin))
        {
            return true;
        }

        if (context.Principal.AllowDataSharing && backup.UserId == context.Principal.UserId)
        {
            return true;
        }

        if (backup.UserId == context.Principal.UserId && backup.Device.Uuid == context.DeviceUuid)
        {
            return true;
        }

        return false;
    }
} 
```

将几乎所有方法主体提取到授权过滤器中是否有意义？如果不检索两次备份，我看不到这样做的方法。

**您将如何将授权问题与控制器操作分开？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:09:24.547

为了将安全逻辑与控制器逻辑分开，我更喜欢使用 Http 标头在浏览器和控制器之间携带安全令牌，并在自定义中检查该标头值`AuthorizeAttribute`

例如;

在`beforeSend`JQuery 的 ajax 函数中设置安全令牌（之前取自服务器，见下文）

```
beforeSend: function (xhr) {
    xhr.setRequestHeader('requestToken', model.requestToken);
} 
```

在自定义中检查令牌`AuthorizeAttribute`

```
public class AuthAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(HttpActionContext actionContext)
    {
        var token = HttpContext.Current.Request.Headers["requestToken"];
        // Do the authorization based on token
    }
} 
```

`[Auth]`使用自定义属性装饰控制器，其操作需要授权，例如：

```
[Auth]
public class SomeController : ApiController 
```

我们可以使用 Http Headers 再次将新令牌发送回客户端

```
HttpContext.Current.Response.Headers["requestToken"] = Guid.NewGuid(); 
```

在客户端，您可以将其存储在 JQuery 的 ajax 函数的成功函数中，以便在请求中发回

```
success: function (res, status, xhr) {
    model.requestToken = xhr.getResponseHeader('requestToken');
} 
```

这可能无法完美处理您的情况，但主要思想是在 Http Headers 中携带（最好是加密的）安全数据并在自定义中处理安全问题`AuthorizeAttribute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:15:43.297

您所要求的在技术上是可行的。假设您实现了一个操作过滤器，并在重写的 OnActionExecuted 中有一些逻辑将状态代码设置为 Forbidden。我没有这样做，这只是一个建议，供您探索可行性。OnActionExecuted 在 action 方法之后运行，它可以访问备份。

另一个更好的选择是使用基于声明的身份并实现 ClaimsAuthorizationManager 的子类。CheckAccess(AuthorizationContext) 接受操作声明和资源声明。与备份相关的属性可以作为资源声明传递。

# sql - Sql .Print maker 生产所有产品

> ID：15893719
> 
> 赞同：0
> 
> 时间：2013-04-09T05:05:26.520
> 
> 标签：sql

我有一个名为“产品”的表。该表中有三列。制造商、型号和类型。模型是主要的，用于与其他表链接。表中的内容是这样的

```
MODEL   MAKER   TYPE
1   A   Laptop
2   A   PC
3   B   Laptop
4   C   Laptop
5   B   Printer
6   D   Printer
7   B   PC
8   D   Printer
9   C   PC
10  A   Printer 
```

我只想要那些制造所有三种产品的制造商。如何获得结果？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:37:47.030

怎么样：

```
SELECT DISTINCT(MAKER) FROM Product 
WHERE MAKER IN (SELECT MAKER FROM Product WHERE TYPE='Laptop')
  AND MAKER IN (SELECT MAKER FROM Product WHERE TYPE='PC')
  AND MAKER IN (SELECT MAKER FROM Product WHERE TYPE='Printer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:15:03.380

**尝试以下查询：**

```
select distinct(Maker) from product where Type="Printer" And Type="PC" And Type="Laptop" 
```

希望它有帮助。

# php - PHP memcache 内部对象

> ID：15893720
> 
> 赞同：0
> 
> 时间：2013-04-09T05:05:43.893
> 
> 标签：php, dom, memcached

我用谷歌搜索了一段时间，一无所获。

在处理 DOM 或 PDO 等内部对象时，是否可以使用 memcache 对其进行缓存？

我知道 PDO 可能无关紧要，因为连接在脚本末尾关闭 - 这可以更改为持久连接 - 使缓存更可行？？？

但真正困扰我的是，缺乏关于是否可以缓存 DOM 对象的内存表示的文档。XML 配置文件可能非常冗长，并且每个请求加载这些配置文件、构建 DOM 可能会严重占用服务器资源。

任何人都有缓存经验，特别是 DOM 对象？我是否应该选择一个 DOM 的 PHP 实现，只是重新解析，初始化 DOM 不是每个请求都需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:03:42.253

您可以缓存 PDO 实例。您将不得不扩展 PDO 类并实现`__wakeup`and`__sleep`魔术方法。

该`__sleep()`方法将在之前`serialize()`和`__wakeup`期间调用`unserialize()`（在手册中没有精确说明）。

您将使用该`__wakeup`方法在 Memcache 反序列化后重新建立连接。

我认为缓存 PDO 实例并没有太大的兴趣。

大多数核心对象不能被缓存。这是因为它们没有正确序列化。只有实现接口的类的实例才`Serializable`可以。

如果类只有公共属性，也许在某些情况下它可以工作。

# python - 在此示例中，如何动态实例化（通过类名作为字符串）要调用 getThings() 的类？

> ID：15893721
> 
> 赞同：6
> 
> 时间：2013-04-09T05:05:44.903
> 
> 标签：python, oop, instantiation, class-method

我想查看 object.__new__() 的源定义，并决定使用这种快速方式来访问该代码。为什么python给我一个`TypeError (is not a type:method)`，什么时候`type()`告诉我这是一个类型：方法？

```
(1)
>>> import inspect
>>> print inspect.getsource(object.__new__)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 701, in getsource
    lines, lnum = getsourcelines(object)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 690, in getsourcelines
    lines, lnum = findsource(object)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 526, in findsource
    file = getfile(object)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 420, in getfile
    'function, traceback, frame, or code object'.format(object))
TypeError: <built-in method __new__ of type object at 0x10a2d9410> is not a module, class, method, function, traceback, frame, or code object

>>> type(object.__new__)
<type 'builtin_function_or_method'>
>>> 
```

我想首先查看定义的原因是因为我试图调用的方法需要一个特定类的实例作为它的第一个参数。

```
(2)
TypeError: unbound method getThings() must be called with FunClass instance as first argument (got SadClass instance instead) 
```

还值得注意的是，FunClass 是 SadClass 的子类，正如错误消息所暗示的，我已经有了一个 SadClass 的实例。我觉得我有我需要调用的一切`getThings()`，但我想知道是否有一种聪明的方法来获取 FunClass 的实例，我可以用它来调用`getThings()`？

我只想声明一个我需要的实例，但我遇到了麻烦，因为最终被调用的类和函数是基于我`getattr()`用来获取类对象（FunClass）的用户方法输入参数（字符串），和一个方法对象（getThings）。我创建 FunClass 实例的尝试在这里结束：

```
(3)
>>> ClassObject = getattr(FunClass,"FunClass")
>>> ClassObject
<class 'FunClass.FunClass'>
>>> ClassObject.__new__()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: object.__new__(): not enough arguments
>>> 
```

最终，我只想能够调用 getThings，我想这需要一个 FunClass 的实例。我还有一个变量 ClassMethod，我尝试使用它来调用该方法。同样，我的类名和方法名以字符串形式出现，我使用 getattr() 来声明对象，如下所示：

```
(4)
>>> ClassMethod = getattr(FunClass, "getThings")
>>> ClassMethod
<unbound method FunClass.getThings> 
```

当我打电话时`ClassMethod()`，我得到了（4）中看到的错误。我可能有不止一个问题，但任何方面的洞察力都会很棒！谢谢。

编辑：

（根据@nneonneo 的回答）

我最终做了：

```
ClassInstance = globals()["FunClass"](self.thing1, self.thing2)
ClassMethod = getattr(ClassInstance, "getThing")
ClassMethod() # to call the function 
```

其中“FunClass”和“getThing”实际上是传递给函数的字符串，可以是任意数量的类/方法组合。Thing1 和 Thing2 需要在其他地方实例化父类 (SadClass)，因此这允许我使用这些现有属性实例化其子类“FunClass”，然后调用 FunClass 的类方法之一。SadClass 有 __init__ 而 FunClass 没有。问题解决了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T05:15:01.257

你为什么要直接打电话`__new__`？只需像这样创建一个新实例：

```
obj = FunClass() 
```

或者，要使用动态名称，`globals()['FunClass']()`.

然后你可以做

```
obj.getThings() 
```

或者，动态地，`getattr(obj, 'getThings')()`.

顺便说一句，你看不到它的来源，`object.__new__`因为它是一个内置方法（因此它是在较低级别实现的，例如 CPython 的 C）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:54:48.627

如果您出于某种原因*确实*需要`__new__`直接调用，而不仅仅是根据 nneonneo 的回答调用该类，您需要了解`__new__`- 无论出于何种原因 - 实际上不是 a `classmethod`，即使它具有 one 的签名，并且您需要显式传入类：

```
inst = ClassObject.__new__(ClassObject) 
```

应该管用。但不要忘记调用类本身并不止于此——您*可能*还想通过调用`inst.__init__()`.

# java - 更新已弃用的 WAS-MQ 代码

> ID：15893732
> 
> 赞同：0
> 
> 时间：2013-04-09T05:07:21.320
> 
> 标签：java, ibm-mq, deprecated

我正在将基于 WAS 6.1 的应用程序迁移到 WAS 7.0 我发现以下两个语句

```
com.ibm.mq.MQEnvironment.securityExit = null; // 1 
```

和

```
MQQueueConnectionFactory factory = new MQQueueConnectionFactory();
factory.setTransportType(JMSC.MQJMS_TP_CLIENT_MQ_TCPIP); // 2 
```

1.  在第 1 行`securityExit`已[弃用](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0m0/topic/com.ibm.mq.java.doc/com/ibm/mq/MQEnvironment.html#securityExit)，文档说：

    *`The security exit used when connecting to a queue manager. It allows you to customise the security flows that occur when an attempt is made to connect to a queue manager. If you want to provide your own security exit, define a class that implements the MQSecurityExit interface and assign securityExit to an instance of that class. If you set this field to null no security exit is called.`*

    我从中了解到的是`com.ibm.mq.MQSecurityExit`需要实现接口。**将 securityExit 分配给该类的实例**是什么意思？

2.  第 2 行`JMSC`已[弃用](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.javadoc.doc/WMQJMSClasses/com/ibm/mq/jms/JMSC.html)。医生说：

    *`This parameter can be passed to MQConnectionFactory.setTransportType(int) to indicate that the application should connect to the queue manager in client TCP/IP mode.`*

    对于界面，文档还说：

    *`Use the constants defined in the classes in the com.ibm.mq.constants package instead`*

    [com.ibm.mq.constants](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/constants/package-summary.html)的文档没有多大帮助。

感谢您在替换已弃用的语句方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:32:20.507

这意味着您需要创建 MQSecurityExit 类的实现实例并设置安全出口属性。像这样的东西

```
 // in MySecurityExit.java
   class MySecurityExit implements MQSecurityExit 
   {
       // you must provide an implementation of the securityExit method
       public byte[] securityExit(MQChannelExit       channelExitParms,
                                  MQChannelDefinition channelDefinition,
                                  byte[]              agentBuffer)
       {
           // your exit code goes here...
       }
   }

   // in your main program...
   MQEnvironment.securityExit = new MySecurityExit();
   ...    // other initialisation
   MQQueueManager qMgr        = new MQQueueManager(""); 
```

该`setTransportType`方法确定您的应用程序如何连接到 WMQ 队列管理器，应用程序和队列管理器是否通过共享内存或套接字或 HTTP 等进行通信。此方法的可能值在[此处定义](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.javadoc.doc/WMQJMSClasses/com/ibm/mq/jms/JMSC.html)

# drupal-7 - 用户注册表单将用户名更改为姓名

> ID：15893734
> 
> 赞同：-1
> 
> 时间：2013-04-09T05:07:24.730
> 
> 标签：drupal-7, user-registration

我想将注册表单的标签从“用户名”更改为名称。我使用了“字符串覆盖”模块。但它没有影响。有没有什么出路。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:48:40.280

实施您的自定义模块并更改注册表单。

```
/**
 * Implements hook_form_FORM_ID_alter().
 */
function MyMODULE_form_user_register_form_alter(&$form, &$form_state) {
  $form['account']['name']['#title'] = 'YOUR REPLACED VALUE'; //Username default
} 
```

MyMODULE 是您的自定义模块名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T05:46:49.970

如果您正在寻找永久更改，那么您可以

> 模块/用户/user.module

在下面

> 功能 user_account_form

行号 1033 将标题更改为

> '#title' => t('名称')

# r - 将字符串转换为个位数并求和

> ID：15893737
> 
> 赞同：9
> 
> 时间：2013-04-09T05:07:54.693
> 
> 标签：r, text, recursion, sum, character

我已经尝试了几个小时来找到解决我认为是一项简单任务的方法，但我失败了。

我有一个由 3 个不同字符组成的字符串`('I','R' & 'O')`，长度从 1 到 6。
例如

```
IRRROO
RRORRR
IIR
RIRRO 
```

每个字符代表一个数字`I=1,R=2,O=3`
，我需要将此字符串转换为单个数字，乘以位置并对结果求和。例如

```
IRRROO ---> (1*1)+(2*2)+(2*3)+(2*4)+(3*5)+(3*6) =52
IIR    ---> (1*1)+(1*2)+(2*3) =9 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T05:12:42.657

因子具有数字等价物。您可以在此示例中很好地利用它：

```
# original
x1 <- "IRRROO"

         # 1    2    3
levs <- c("I", "R", "O")

# split the string and convert to factors, then to numeric
x1f <- as.numeric(factor(strsplit(x1, "")[[1]], levels=levs))

# tally it up 
sum(x1f * seq_along(x1f)) 
```

### 或者作为一个不错的单行函数：

```
sumValue <- function(x, levs=c("I", "R", "O")) 
    sum(seq.int(nchar(x)) *  as.numeric(factor(strsplit(x, "")[[1]], levels=levs)))

sumValue("IRRROO")
# [1] 52
sumValue("IIR")
# [1] 9 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T05:20:37.237

使用命名向量作为输入的替代版本，允许为每个字母分配任意数值：

```
vals <- c(I=1,R=2,O=3)
test <- c("IRRROO","RRORRR","IIR","RIRRO")

sumValue <- function(dat,vals) {
  tmp <- strsplit(dat,"")
  vapply(tmp,function(x) sum(seq_along(x) * vals[x]),numeric(1))
}

sumValue(test,vals)
[1] 52 45  9 33 
```

# php - .zip 文件下载为 .php

> ID：15893738
> 
> 赞同：0
> 
> 时间：2013-04-09T05:07:57.837
> 
> 标签：php, javascript, zipfile

我有一个使用 php 在服务器上生成的 .zip 文件。生成的文件是有效的，我通过 ftp 等下载它来检查它。

我需要创建一种方法让用户在生成此文件后下载该文件，然后删除该文件。这是我要发送的标题。

```
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-control: public");
header("Content-Description: File Transfer");
header('Content-type: application/zip'); 
header("Content-Transfer-Encoding: Binary");
header('Content-Disposition: attachment; filename="'.basename($archive_file_name).'"');
header("Content-Length: " . filesize($this->dirPath."/".$archive_file_name) );
ob_clean();
//echo is_file($this->dirPath."/".$archive_file_name);
readfile($this->dirPath."/".$archive_file_name);
unlink($this->dirPath."/".$archive_file_name);
exit; 
```

上面的代码在我尝试下载前几次时有效，但经过几圈后它开始下载为 .php 文件而不是 .zip

通过转到开始创建 zip 文件的特定链接来触发文件下载。完成后，它会发出标头以开始下载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:32:18.007

你的代码看起来很合适。但是，您需要确保代码的前后空格。
在代码中添加标头时，空间会中断并且不会加载 zip 文件。
再次检查并删除页面顶部和底部的空格。

还有一行写着
readfile($this->dirPath."/".$archive_file_name);
可以从代码中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:31:12.667

试试这个标题，你可以用简历下载我建议使用数据库或日志文件来了解下载的文件，因为这个标题可用下载器下载部分

从下载器获取请求范围，您可以使用 fseek 读取文件范围

```
$Range=@$_SERVER['HTTP_RANGE'];//Range: bytes=843530240-
$Cach="";
if($Range!=""){
  $Range=explode("=",$Range);
  $Cach=(int)trim($Range[1]," -");      
} 
```

缓存控制器

```
function caching_include($file) {
     $headers = $_SERVER;
     // Get the modification timestamp
     if(!(list(,,,,,,,,,$lastModified) = @stat($file))){
           echo Error;
           exit();          
     }
     // Build our entity tag
     $eTag = "ci-".dechex(crc32($file.$lastModified));
     if (false and (strpos(@$headers['If-None-Match'], "$eTag")) &&(gmstrftime("%a, %d %b %Y %T %Z", $lastModified) == @$headers['If-Modified-Since'])) {
        // They already have an up to date copy so tell them
        header('HTTP/1.1 304 Not Modified');
        header('Cache-Control: private');
        header("Pragma: ");
        header('Expires: ');
        header('Content-Type: ');
        header('ETag: "'.$eTag.'"');
        exit;
     } else {
       // We have to send them the whole page
        header('Cache-Control: private');
        header('Pragma: ');
        header('Expires: ');
        header('Last-Modified: '.gmstrftime("%a, %d %b %Y %T %Z",$lastModified));
        header('ETag: "'.$eTag.'"');
     }
  } 
```

下载标题

```
header("Server: SepidarSoft/ir-system");//server name 
header("Date: ".date("a,d b Y H:M:S GMT",time()));
header("X-Powered-By: SepidarSoft");
header("Cache-Control: public");
header("Content-disposition:filename=\"".$BaseName."\"");//file name
caching_include($FPatch);//caching controller 
header("Accept-Ranges:bytes");
header("Content-Transfer-Encoding: binary\n"); 
header("Connection: Keep-Alive");
header("Content-Type: $Type");//file type like application/zip
header("Content-Length: ".($FSize-$Cach)); //length of download it is for resume  
header("Content-Range: bytes ".$Cach."-".($FSize-1)."/".$FSize); //download range it is for resume
header("HTTP/1.1 206 Partial Content",true);
set_time_limit(0); 
```

如果`set_time_limit(0);`在代码中使用如果用户连接断开 php 继续直到完成工作，您的文件将在一个请求后删除您下载或不下载，您可以使用`connection_status()==0`如下检查连接

```
$Speed=102400;
fseek($Handle,$From);//if use resume it is useful 
while(!@feof($Handle) and (connection_status()==0)){
    print(fread($Handle,$Speed));
    flush(); 
            ob_flush(); 
 } 
 if(connection_status()==0){//with this condition you can understand download is down by user 
       unlink($this->dirPath."/".$archive_file_name);
 } 
```

# sql-server - 我可以检查数据库中执行了哪些 T-SQL 语句吗？

> ID：15893740
> 
> 赞同：0
> 
> 时间：2013-04-09T05:08:07.437
> 
> 标签：sql-server, sql-server-2008

我有一个 C# 应用程序，它将在数据库中执行操作，但是我的所有内容都是黑盒的，这是否可能我可以检查 SQL Server 上运行了哪些 T-SQL 语句？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:34:10.257

正如 serge 所说，Profiler 绝对是要走的路，但是当我无法获得批准在生产中启用 Profiler 时，我也喜欢将此查询放在口袋里。

```
SELECT TOP 50 deqs.last_execution_time AS [Time], dest.TEXT AS [Query]
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY deqs.last_execution_time DESC 
```

当然，您将需要修改`TOP 50`以显示或多或少的结果。

注意：我已经使用了很长时间，我忘记了我自己没有想出它。最初我在[SQLAuthority](http://blog.sqlauthority.com/2008/01/03/sql-server-2005-last-ran-query-recently-ran-query/)上找到了它。信用到期！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:24:56.800

是的，您可以 - 使用 SQL Server Profiler：

[使用 SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms187929%28v=sql.105%29.aspx)

# sql-server - 即使循环中发生错误，如何继续光标循环

> ID：15893741
> 
> 赞同：4
> 
> 时间：2013-04-09T05:08:20.220
> 
> 标签：sql-server, tsql

我想将一个表的行插入另一个表。为此，我有以下程序。

```
ALTER PROCEDURE LOADDATA_a
AS 
BEGIN

TRUNCATE TABLE STIDENT_A
DECLARE @SID INT
DECLARE @SNAME VARCHAR(50)
DECLARE @SUB VARCHAR(50)
DECLARE @MARKS INT

DECLARE LOAD_DATA CURSOR FAST_FORWARD FOR  
SELECT SID,SNAME,SUB,MARKS 
FROM student 

OPEN LOAD_DATA   
FETCH NEXT FROM LOAD_DATA INTO @SID,@SNAME,@SUB,@MARKS

WHILE @@FETCH_STATUS = 0   
BEGIN
    BEGIN TRANSACTION

    INSERT INTO STIDENT_A(SID,SNAME,SUB,MARKS) VALUES (@SID,@SNAME,@SUB,@MARKS)

    IF @@ERROR != 0
    BEGIN
        ROLLBACK TRANSACTION
        RETURN
    END
    ELSE
    BEGIN
        COMMIT TRANSACTION
    END
    FETCH NEXT FROM LOAD_DATA INTO @SID,@SNAME,@SUB,@MARKS
END

CLOSE LOAD_DATA   
DEALLOCATE LOAD_DATA

END 
```

每当插入行失败时，游标就会失败并停在那里，但我需要它继续。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T06:00:35.533

显然，您在`RETURN`之后立即收到了一份声明`ROLLBACK TRANSACTION`。您是否尝试过将其删除？

虽然您也可以`TRY/CATCH`改用重写正文，如下所示：

```
...
WHILE @@FETCH_STATUS = 0   
BEGIN
    BEGIN TRY
        INSERT INTO STIDENT_A(SID,SNAME,SUB,MARKS)
        VALUES (@SID,@SNAME,@SUB,@MARKS);
    END TRY
    BEGIN CATCH
      -- this section must have some statement,
      -- so, why not log the erroneous data to the screen at least?
      PRINT @SID;
      PRINT @SNAME;
      PRINT @SUB;
      PRINT @MARKS;
      PRINT '';  -- an empty line as a delimiter
      -- or, perhaps, into a table?
      --INSERT INTO SomeFailLog (SID,SNAME,SUB,MARKS)
      --VALUES (@SID,@SNAME,@SUB,@MARKS);
    END CATCH;
    FETCH NEXT FROM LOAD_DATA INTO @SID,@SNAME,@SUB,@MARKS;
END;
... 
```

但是，如果您知道具体可能导致插入失败的原因，那么提出一个仅生成要插入的有效数据的语句可能会更好。

例如，如果问题是某些 SID`student`已经存在`STIDENT_A`并且您需要省略它们，您可以简单地尝试以下操作*而不是您的过程*：

```
INSERT INTO STIDENT_A (SID, SNAME, SUB, MARKS)
SELECT s.SID, s.SNAME, s.SUB, s.MARKS
FROM student AS s
LEFT JOIN STIDENT_A AS a ON s.SID = a.SID
WHERE a.SID IS NULL
; 
```

如果您在传输数据时指定具体可能出现的问题，我们可能会帮助您找到专门针对该问题的最有效的解决方案。

* * *

***更新****解决评论*

如果问题是 in 的最大长度`SNAME`小于 in`STIDENT_A`的同名列的最大长度`student`并且某些值可能不适合，您可以简单地使用过滤器（子句`WHERE`）将插入的行限制为实际长度的行`SNAME`不超过一定值：

```
INSERT INTO STIDENT_A (SID, SNAME, SUB, MARKS)
SELECT SID, SNAME, SUB, MARKS
WHERE LEN(SNAME) <= @maxlength
; 
```

您可以查询元数据以确定所需列的最大长度。方法有很多种，一种是使用`sys.columns`系统目录：

```
DECLARE @maxlength int;
SELECT @maxlength = max_length
FROM sys.columns
WHERE object_id = OBJECT_ID('STIDENT_A')
  AND name = 'SNAME'
; 
```

要确定哪些行无法插入：

```
INSERT INTO STIDENT_A (SID, SNAME, SUB, MARKS)
SELECT SID, SNAME, SUB, MARKS
WHERE LEN(SNAME) > @maxlength
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T12:53:04.920

尝试这个：-

```
DECLARE @intFlag INT
 SET @intFlag = 0
WHILE (@intFlag <=5)
BEGIN
    begin Try
        if @intFlag = 3
        begin
            SET @intFlag = @intFlag + 'A'
        End
    Else
        begin
            PRINT @intFlag
        end
    End Try

    Begin Catch
        --print 'Error'
        -- continue
    End catch
SET @intFlag = @intFlag + 1
END
GO 
```

# android - 在 HTC Desire S 上，EditText 焦点上没有弹出软键盘

> ID：15893743
> 
> 赞同：1
> 
> 时间：2013-04-09T05:08:24.613
> 
> 标签：android, android-layout, android-edittext, android-keypad

我有一个带有`imeOptions="actionSearch"`. 现在，当我单击 EditText 时，键盘不会在某些 HTC 设备中弹出，例如 HTC Desire S 和 HTC Incredible。EditText xml 如下：

```
<com.myapp.utilities.font.DroidSansEditText
                    android:id="@+id/txtSearchByName"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="0.60"
                    android:background="@drawable/edittext"
                    android:ellipsize="end"
                    android:gravity="left|center_vertical"
                    android:hint="@string/provider_practice"
                    android:imeOptions="actionSearch"
                    android:inputType="textCapWords"
                    android:paddingLeft="10dp"
                    android:paddingRight="5dp"
                    android:singleLine="true"
                    android:tag="byName"
                    android:textColor="#a19d93"
                    android:textSize="15.5sp" /> 
```

`DroidSansEditText`是有的习俗`EditText`。`droid-sans font`DroidSansEditText 如下：

```
public class DroidSansEditText extends EditText {
    public DroidSansEditTextView(Context context) {
        super(context);     
    }

    public DroidSansEditTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public DroidSansEditTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void setTypeface(Typeface tf, int style) {
        if (!isInEditMode()) { //For Graphical layout of xml in eclipse 
            // here Bold style is handled. Same way we can handle italic style
            if (style == 1) { // if bold (Style Constant, normal = 0 | bold = 1
                                // | italic = 2)
                tf = Typeface.createFromAsset(getContext()
                        .getApplicationContext().getAssets(),
                        "DroidSans-Bold.ttf");
            } else {
                tf = Typeface.createFromAsset(getContext()
                        .getApplicationContext().getAssets(), "DroidSans.ttf");
            }
            super.setTypeface(tf, 0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:40:17.317

可能是因为如果此 EditText 处于编辑模式，实际上您没有设置字体？

我的意思是，你为什么需要那个：

```
 if (!isInEditMode()) 
```

如果在编辑模式下要设置另一个字体，请编写**else**语句并在其中设置另一个字体。

因为就目前而言 - 如果 TextView 处于编辑模式，您不会调用 super.setTypeface(); 所以你只需覆盖方法而不做任何事情。请尝试让我知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T19:42:42.547

There is a way to show and hide the keyboard when clicked on edit text to type something.Find below the lines for showing the keyboard implicitly.

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

where edit Text is the Edit Text you are using.and to hide it when touched somewhere else on the screen just do this.Take the top most layout of your screen and implement this on on Touch method of your top layout so that when touched somewhere else other than the edit text keyboard gets dismissed.

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

mgr.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

# java - 找到离目标物体最近的物体（之前和之后）

> ID：15893747
> 
> 赞同：0
> 
> 时间：2013-04-09T05:09:02.260
> 
> 标签：java

我想实现下面给出的两种方法。**SomeObject**有一个Date 类型的字段**createdDate**

```
private SomeObject getNearestObjectBeforeTargetObjectsCreatedDate(List<SomeObject> someObjectList, SomeObject targetObject){

}

private SomeObject getNearestObjectAfterTargetObjectsCreatedDate(List<SomeObject> someObjectList, SomeObject targetObject){

} 
```

假设我有 5 个对象 P1、P2、P3、P4、P5 按创建日期的升序排列。**目标对象是 P3**，那么**第一个方法应该返回 P2**，**第二个应该返回 P4**

目前我已经写了这样的东西

```
private SomeObject getNearestPortFolio(List<SomeObject> someObjectList, SomeObject targetObject){
    SomeObject returnObject = targetObject;

      for(SomeObject someObject : someObjectList) {
        // if the current iteration's date is "before" the target date
          if(someObject.getCreatedDate().compareTo(targetObject.getCreatedDate()) < 0) {

              if (someObject.getCreatedDate().compareTo(returnObject.getCreatedDate()) > 0){
                  returnObject = someObject;
          }

      }
     }
      return returnObject;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:54:21.807

根据您的目的调整以下代码。它相当于`getNearestObjectAfter`. 该函数返回大于目标的下一个元素的索引`key`。没有必要`key`包含在目标列表中。目标列表必须排序。

```
public static <T extends Comparable<? super T>> int upperBound(List<T> list, T key)
{
  int index = Collections.binarySearch(list, key);
  return (0 <= index) ? upperBound(list, key, index) : -index - 1;
}

protected static <T extends Comparable<? super T>> int upperBound(List<T> list, T key, int index)
{
  // -- PRE: 0 <= index < size

  int size = list.size();
  if (list instanceof RandomAccess)
  {
    while (   (++index < size)
           && (0 == list.get(index).compareTo(key)))
    {
      // -- nothing additional to do
    }
  }
  else
  {
    for ( ListIterator<? extends T> I = list.subList(++index, size).listIterator()
        ; I.hasNext()
        ; )
    {
      if (0 == I.next().compareTo(key))
      {
        ++index;
      }
      else
      {
        break;
      }
    }
  }

  return index;
} 
```

这两种方法自然扩展到“不可比较”的对象：

```
public static <T> int upperBound(List<? extends T> list, T key, Comparator<? super T> comparator)
{
  int index = Collections.binarySearch(list, key, comparator);
  return (0 <= index) ? upperBound(list, key, index, comparator) : -index - 1;
}

protected static <T> int upperBound(List<? extends T> list, T key, int index, Comparator<? super T> comparator)
{
  // -- PRE: 0 <= index < size

  int size = list.size();
  if (list instanceof RandomAccess)
  {
    while (   (++index < size)
           && (0 == comparator.compare(list.get(index), key)))
    {
      // nothing additional to do
    }
  }
  else
  {
    for ( ListIterator<? extends T> I = list.subList(++index, size).listIterator()
        ; I.hasNext()
        ; )
    {
      if (0 == comparator.compare(I.next(), key))
      {
        ++index;
      }
      else
      {
        break;
      }
    }
  }

  return index;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:42:17.607

你可以做这样的事情。确保根据您的需要进行必要的更改，但核心逻辑将保持不变。

```
// Note that if the target is the first element, this will return null.
private static String getNearestBefore(List<String> test, String target) {
    String returnObj = null;
    String previous = null;
    for (String someObj : test) {
        if (someObj.equals(target)) { //Insert your condition here
            returnObj = previous;
        }
        previous = someObj;
    }
    return returnObj;
}

// Note that if the target is the last element, this will return null.
private static String getNearestAfter(List<String> test, String target) {
    String returnObj = null;
    boolean nextSatisfied = false;
    for (String someObj : test) {
        if (nextSatisfied) {
            returnObj = someObj;
            break;
        }
        if (someObj.equals(target)) { //Insert your condition here
            nextSatisfied = true;
        }
    }
    return returnObj;
} 
```

# work-stealing - 使用 cilk++ 工作窃取

> ID：15893748
> 
> 赞同：1
> 
> 时间：2013-04-09T05:09:06.893
> 
> 标签：work-stealing, cilk-plus

我是 cilk++ 的新手，我想使用 cilk 的工作窃取调度程序。我找不到太多这方面的信息。有人可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:10:16.950

[http://cilkplus.org](http://cilkplus.org)网站上有很多信息。

您将需要以下之一：

*   英特尔 Compose XE
*   GCC“cilkplus”分支
*   Cilk Plus/LLVM 开发分支

所有这些的指针都可以在[http://cilkplus.org/which-license 获得](http://cilkplus.org/which-license)。

网站上还提供了一个教程——请查看[http://cilkplus.org/cilk-plus-tutorial](http://cilkplus.org/cilk-plus-tutorial)。

*   巴里

# c# - 如何在 SqlDataSource 中参数化更新查询

> ID：15893750
> 
> 赞同：0
> 
> 时间：2013-04-09T05:09:14.723
> 
> 标签：c#, asp.net

![在此处输入图像描述](https://i.stack.imgur.com/npwHK.png)

我正在维护一个旧网站，代码非常混乱。

我想使用 SqlDataSource 来执行更新、选择、插入功能。我真的**不想自己写后端代码**。（其实我已经把所有的代码都写好了，但是旧代码太乱了，无法测试，也没有注释，让我很难检测到bug在哪里，所以我放弃了后端代码，正在使用SqlDataSource）

**相反，我想使用 SqlDataSource 中的 UpdateCommand 来进行更新。** 这是我的更新查询：

```
UPDATE MedicareLocalAccounts SET Account=@Account and PWD=@PWD WHERE DivisionID=@DivisionID 
```

数据源来自 3 个不同的表。

```
 <asp:GridView ID="gv_MediCareLocals" runat="server" AllowPaging="True" AllowSorting="True"
            AutoGenerateColumns="False" DataKeyNames="LUDivisionsUID" ClientIDMode="Static" AutoGenerateEditButton="True"
            EnablePersistedSelection="True" DataSourceID="SqlDataSource1">
            <Columns>
                <asp:HyperLinkField DataTextField="LUDivisionsUID" HeaderText="Division ID" ShowHeader="true"
                    SortExpression="LUDivisionsUID" />
                <asp:BoundField DataField="Division" HeaderText="Medicare Local" ReadOnly="true" SortExpression="Division"/>
                <asp:BoundField DataField="States" HeaderText="State" ReadOnly="true" SortExpression="States" />

                <asp:TemplateField HeaderText="Account">
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Eval("Account") %>' />
                    </ItemTemplate>
                    <EditItemTemplate>
                        <input type="text" clientidmode="Static" runat="server" id="tbAccount" value='<%# Eval("Account") %>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Password">
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Eval("PWD") %>' />
                    </ItemTemplate>
                    <EditItemTemplate>
                        <input type="text" clientidmode="Static" runat="server" id="tbPassword" value='<%# Eval("PWD") %>' />
                    </EditItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

如您所见，我还需要参数化 DivisionID，但 DivisionID 字段没有 ID（不像帐户和密码）。那么如何编写 where 子句以便在当前行中找到 DivisionID 呢？

**更新：** 我已将 DivisionID 列更改为

```
 <asp:TemplateField HeaderText="DivisionID" SortExpression="LUDivisionsUID" >
                        <ItemTemplate>
                            <asp:Label runat="server" ID="lblDivisionID" Text='<%# Eval("LUDivisionsUID") %>'>' ></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField> 
```

但是点击更新按钮后出现错误。

> 在 ControlParameter 'Account' 中找不到控件 'tbAccount'。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：在 ControlParameter 'Account' 中找不到控件'tbAccount'。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：在 ControlParameter 'Account' 中找不到控件 'tbAccount'。]
> System.Web.UI.WebControls.ControlParameter.Evaluate(HttpContext context, Control control) +2155166
> System.Web.UI.WebControls.Parameter.UpdateValue(HttpContext上下文，控制控件）+50
> System.Web.UI.WebControls.ParameterCollection.UpdateValues（HttpContext 上下文，控件控件）+101
> System.Web.UI.WebControls.ParameterCollection.GetValues（HttpContext 上下文，控件控件）+36
> System.Web.UI.WebControls.SqlDataSourceView.InitializeParameters（DbCommand 命令，ParameterCollection 参数，IDictionary excludeList）+257 System.Web.UI.WebControls.SqlDataSourceView.ExecuteUpdate（IDictionary 键，IDictionary 值，IDictionary oldValues）+222
> System.Web。 UI.DataSourceView.Update（IDictionary 键，IDictionary 值，IDictionary oldValues，DataSourceViewOperationCallback 回调）+87
> System.Web.UI.WebControls.GridView.HandleUpdate（GridViewRow row，Int32 rowIndex，Boolean CauseValidation）+1210
> System.Web.UI.WebControls .GridView.HandleEvent(EventArgs e, Boolean CauseValidation, String validationGroup) +738
> System.Web.UI.WebControls.GridView.OnBubbleEvent(Object source, EventArgs e) +89 System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
> System.Web.UI.WebControls.GridViewRow.OnBubbleEvent(对象源，EventArgs e) +88 System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
> System.Web.UI.WebControls.LinkBut​​ton.OnCommand(CommandEventArgs e) +121 System.Web.UI.WebControls .LinkBut​​ton.RaisePostBackEvent(String eventArgument) +156
> System.Web.UI.WebControls.LinkBut​​ton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
> System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument ) +13
> System.Web.UI.Page.RaisePostBackEvent（NameValueCollection postData）+9642898 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+1724

从代码中可以看出，我已经在 GridView 和列上应用了属性 ClientIDMode="Static"。我使用 Chrome 查看为 Account 列生成的 id，发现 id=tbAccount，但 name="ctl00$PageTitlePlaceHolder$gv_MediCareLocals$ctl02$tbAccount"

我认为 Sql UpdateParameter 无论如何都不会使用 name 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:17:35.493

如果你创建一个存储过程，那么它会很容易。为此，请访问此[链接](https://stackoverflow.com/questions/5754869/how-to-write-update-query-to-update-two-tables-with-sql-data-source)

希望它有效。

# php - getimagesize() 期望参数 1 是字符串，给定数组

> ID：15893751
> 
> 赞同：0
> 
> 时间：2013-04-09T05:09:18.223
> 
> 标签：php, getimagesize

我正在使用 getimagesize 来验证图像类型，但不知道如何为多个文件编写脚本。基本上，我有一个允许上传多个图像文件的表单，如下所示。

```
 <input type="file" name="photo[]" class="file" />
  <input type="file" name="photo[]" class="file" />
  <input type="file" name="photo[]" class="file" /> 
```

然后我用它来验证它并通过 phpmailer 发送。

```
<?php
ob_start();
require("class.phpmailer.php");

$errors = array();

if ('POST' === $_SERVER['REQUEST_METHOD'])
{
    $firstname           = sanitize($_POST['firstname']);
    $lastname           = sanitize($_POST['lastname']);
    $email                 = sanitize($_POST['email']);

    if (empty($firstname))
    {
        $errors['firstname'] = "Please provide first name.";
    }
    if (empty($lastname))
    {
        $errors['lastname'] = "Please provide last name.";
    }
    if (!filter_var($email, FILTER_VALIDATE_EMAIL))
    {
        $errors['email'] = "Please provide a valid email address.";
    }

    if (count($errors) === 0)
    {

$imageinfo = array();
  $my_files = $_FILES['photo']['tmp_name'];
  foreach($my_files as $single_file) {
  if(!empty($single_file)) {
  $imageinfo[$single_file] = getimagesize($single_file);
  if ($single_file['mime'] != 'image/png' && $single_file['mime'] != 'image/jpeg')
  { echo "Invalid Image File";
  exit();
  }  }
  }

foreach($_FILES['photo']['tmp_name'] as $photo) 
if(!empty($photo)) {
$mail->AddAttachment($photo);

$message = 'some message';

$mail = new PHPMailer();

$mail->SetFrom($email);
$mail->AddAddress($from);

$mail->Subject  = "Submitted";
$mail->Body     = $message;
$mail->WordWrap = 50;
}

$mail->Send();

header("Location: thankyou.php");
exit();     
}}

function sanitize($value)
{
    return trim(strip_tags($value, $problem=''));
}
?> 
```

我收到**警告的错误消息：getimagesize() 期望参数 1 是字符串，数组给定** 我知道这是因为我的表单正在传递一个数组。如何更改脚本以适用于多个文件/数组？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:17:12.010

有多个文件，`$_FILES['photo']['tmp_name']`所以它是一个数组。

设计为`getimagesize()`只接受一个文件。

所以你需要将每个文件传递给函数

```
$imageinfo = array();
$my_files = $_FILES['photo']['tmp_name'];
foreach($my_files as $single_file) {
  if(!empty($single_file)) {
    $imageinfo[$single_file] = getimagesize($single_file);
  }
}

print_r($imageinfo); // now you have info of all files in an array. 
```

或者你可以试试

```
$imageinfo0 = getimagesize($_FILES['photo']['tmp_name'][0]);
$imageinfo1 = getimagesize($_FILES['photo']['tmp_name'][1]);
$imageinfo2 = getimagesize($_FILES['photo']['tmp_name'][2]); 
```

.... 等等..

# javascript - 执行两个 onsubmit 函数；第二个函数仅在第一个函数为真时执行

> ID：15893754
> 
> 赞同：1
> 
> 时间：2013-04-09T05:09:30.480
> 
> 标签：javascript, function, execute, onsubmit

我有一个电子邮件表单验证脚本。如果第一个函数返回 true（电子邮件字段中没有错误），则将执行第二个函数，这只是一个 url 重定向。有人可以将这两个功能结合起来吗，这样我只需要在表格中输入类似的东西，`onsubmit="return checkForm();"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:11:48.190

从第一个函数中调用第二个函数：

```
function checkForm()
{
    // Your validation logic here
    if (valid)
        doRedirect();
} 
```

# c# - 将 Vector2 添加到列表

> ID：15893755
> 
> 赞同：0
> 
> 时间：2013-04-09T05:09:37.980
> 
> 标签：c#, xna

我有这个代码

```
 public List<Vector2> alienPosition = new List<Vector2>();

    for (int x = 0; x < alienPosition.Count; x++)
        {
            alienPosition[x].Add(new Vector2((x * 20) + 50, 20));
        } 
```

它给了我 Add 不接受一个参数的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:11:14.583

```
 public List<Vector2> alienPosition = new List<Vector2>();
    int someCount = 10;
        for (int x = 0; x < someCount; x++)
            {
                alienPosition.Add(new Vector2((x * 20) + 50, 20));
            } 
```

删除 [i] 索引器并指定循环的结束条件 > 0

简单数组需要 [i]。列表是一种更高级的数据结构，具有直接向列表添加元素的便捷方法。它是列表 API 的一部分，能够添加新条目而无需为新条目指定索引。它会将新条目添加到列表的末尾。

# mysql - 在 INSERT 后触发删除空白行

> ID：15893756
> 
> 赞同：2
> 
> 时间：2013-04-09T05:09:48.443
> 
> 标签：mysql, sql

我已将一组数据插入数据库，现在我想删除所有具有空白值的行。我怎样才能做到这一点？这可以使用触发器来完成吗？

例子：

表 BOOKS 包含`author_name`, `title`, `price`.

插入数据后，我想删除列中所有具有空值的`author_name`行。这是我到目前为止所写的：

```
CREATE TRIGGER trigger1
  AFTER INSERT
  ON  BOOKS
  FOR EACH ROW 
  BEGIN
  DELETE FROM BOOKS WHERE author_name = ''  
END; 
```

这不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:26:26.003

问题是你已经`BEGIN…END`绕过了一个没有用`;`. 但是，如果您放置了 missing `;`，则需要为整个定义引入*元*分隔符，因为如果您不这样做，内部`;`会破坏它。

因此，将 a放在语句`;`的末尾并在触发器定义之前引入 a：`DELETE``DELIMITER`

```
DELIMITER $$
CREATE TRIGGER trigger1
  AFTER INSERT
  ON  BOOKS
  FOR EACH ROW 
BEGIN
  DELETE FROM BOOKS WHERE author_name = '';
END
$$ 
```

或者，由于正文仅包含一个语句，您可以简单地删除`BEGIN…END`：

```
CREATE TRIGGER trigger1
  AFTER INSERT
  ON  BOOKS
  FOR EACH ROW 
DELETE FROM BOOKS WHERE author_name = ''; 
```

# magento - magento：状态：HTTP/1.1 403 Forbidden 在查看 HTTP 请求和响应标头时

> ID：15893769
> 
> 赞同：0
> 
> 时间：2013-04-09T05:10:40.323
> 
> 标签：magento

我使用[http://web-sniffer.net/](http://web-sniffer.net/)来测试我的网站，结果如下：

HTTP 请求标头

```
Connect to ********** on port 80 ... ok

GET / HTTP/1.1[CRLF]
Host: **********[CRLF]
Connection: close[CRLF]
User-Agent: Web-sniffer/1.0.44 (+http://web-sniffer.net/)[CRLF]
Accept-Encoding: gzip[CRLF]
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8[CRLF]
Accept-Language: en-US,en;q=0.5[CRLF]
Accept-Charset: ISO-8859-1,UTF-8;q=0.7,*;q=0.7[CRLF]
Cache-Control: no-cache[CRLF]
Referer: http://web-sniffer.net/[CRLF] 
```

HTTP 响应标头

```
Name    Value   Delim
Status: HTTP/1.1 403 Forbidden
Date:   Tue, 09 Apr 2013 04:58:52 GMT   
Server: Apache  
Expires:    Thu, 19 Nov 1981 08:52:00 GMT   
Cache-Control:  no-store, no-cache, must-revalidate, post-check=0, pre-check=0  
Pragma: no-cache    
Set-Cookie: frontend=d661c78db51b210814a8196466c81849; expires=Tue, 09-Apr-2013 05:58:52 GMT; path=/; domain=www.lebunnybleu.com; HttpOnly  
Connection: close   
Transfer-Encoding:  chunked 
Content-Type:   text/html; charset=UTF-8 
```

那么如何修复“状态：HTTP/1.1 403 Forbidden”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:32:04.760

HTTP 错误 403 - 禁止意味着对您尝试打开的文件/文件夹的访问已被拒绝，无论是故意还是由于配置错误。“403 Forbidden”错误的两个最常见原因是： 1\. 文件权限不正确 2\. .htaccess 文件中的“无索引”使用不当

更正 403 禁止错误：-

> 1.  首先，您需要检查每个文件设置的文件权限。如果出于安全原因将文件或文件夹设置为“世界”可写的“777”，则会显示 403 错误以保护您的网站免受黑客攻击。文件夹的权限应设置为“750”或“755”，文件应设置为“644”
>     
>     
> 2.  一旦您确认所有权限都正确且问题仍然存在，您将需要检查您的 .htaccess 文件。请记住，您的帐户中可以有多个 .htaccess 文件，因此您可能需要搜索/修改 public_html/.htaccess 以外的 .htaccess 文件。例如，如果您有一个位于 public_html/addon_domain 的插件域，您还需要检查该文件夹中的任何 .htaccess 文件。如果实际文件中的其中一行显示“Options All -Indexes”，则只需删除“-Indexes”并保存文件。

# java - Java递归代码

> ID：15893777
> 
> 赞同：0
> 
> 时间：2013-04-09T05:11:31.153
> 
> 标签：java

```
public class Temp {
    public static void main(String[] args) {
        System.out.println(recursion(1, 100));
        System.out.println(recursion(4, 5));
        System.out.println(recursion(99, 100));
        System.out.println(recursion(100, 100));
    }

    public static int recursion(int m, int n) {
        int number = 0;
        if (m == 1) {
            number = ((2 * n) - 1);
        } else {
            number = 2 * recursion(m - 1, n - 1);
        }
        return number;
    }
} 
```

当我运行这段代码时，最后两个测试返回 0，我知道它们应该是大数字，这是为什么呢？我怎样才能弄清楚最后两个的价值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T05:15:43.977

你遇到了算术溢出。An`int`只能存储 -2^31 和 2^31-1 之间的值。要处理这么大的数字，您需要更合适的数据类型，例如`BigInteger`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:20:26.820

在某些时候，您的数量超过了 int 类型的最大值。然后乘法的结果变为负数，然后 - 零。

```
m = 31, n = 32 : number = -1073741824
m = 32, n = 33 : number = -2147483648 
```

下一步将它们相乘（m = 33，n = 34）：

```
System.out.println((-1073741824) * (-2147483648)); 
```

这是0。

从这一点开始，一切都是0。

# django - 使用 postgresql-8.4 和 django 进行全文搜索

> ID：15893778
> 
> 赞同：3
> 
> 时间：2013-04-09T05:11:38.327
> 
> 标签：django, postgresql, full-text-search

可以使用以下 django api 查询使用 mysql 和 django 进行全文搜索

```
Entry.objects.filter(headline__search="search text") 
```

这将正确返回结果集。但这不能与 postgresql 一起使用，同时使用获取如下所示的异常

```
Full-text search is not implemented for this database backend 
```

如何使用与 django-mysql 全文搜索相同的 postgresql 和 django 实现全文搜索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:16:40.867

你可以试试

```
Entry.objects.filter(headline__contains="search text") 
```

或`__icontains`用于不区分大小写的搜索。

正如[django 文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#search)所说`__search`，目前仅适用于 MySQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T11:45:08.037

您可以尝试[Haystack](http://haystacksearch.org/)或用户创建的库[djorm-ext-pgfulltext](https://github.com/niwibe/djorm-ext-pgfulltext)。[阅读https://code.djangoproject.com/ticket/4676](https://code.djangoproject.com/ticket/4676)和[http://bogdan-ivanov.com/entry/full-text-search-postgresql-and-django/](http://bogdan-ivanov.com/entry/full-text-search-postgresql-and-django/)也很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-04T06:37:09.717

对于这些天阅读此问题的用户：

[自 Django 1.10 (2016) 以来，模块django.contrib.postgres.search](https://docs.djangoproject.com/en/dev/ref/contrib/postgres/search/)支持 PostgreSQL 全文搜索。

# php - 将netbeans php项目转换为war文件以部署在远程Web服务器中

> ID：15893780
> 
> 赞同：1
> 
> 时间：2013-04-09T05:11:45.503
> 
> 标签：php, netbeans, war

我一直在搜索 build and clean 以将 netbeans php 项目转换为 war 文件，经过一些搜索后我发现它仅适用于 java 项目。所以我尝试配置路径 var/www ，但显示路径无效，任何人都可以帮助我如何将netbeans项目转换为war文件。我想在另一个系统上测试项目，所以我如何在另一台计算机上访问netbeans项目来测试它的功能，我被卡住了有人帮助

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T20:14:27.527

我强烈建议您使用 WAMP 服务器。请按照以下步骤操作。

1.  从 Netbeans Projects 中剪切您的 PHP 项目并将其粘贴到 C:\wamp\www。
2.  它假定您已经运行了 WAMP 服务器。转到 netbeans，打开您的 php 项目，该项目现在已经在 C:\wamp\www 目录中。
3.  右键单击您的 php 项目>属性>运行配置。您必须从您的 Web 服务器（WAMP 服务器）匹配您的 php 项目的端口号。如果要更改端口，请参阅 httpd.conf。默认情况下，它侦听端口 80。
4.  单击您的 php 项目并按 f6。
5.  瞧！:D

这是我在 NetBeans 上运行 PHP 项目的方式。NetBeans 的 Web 服务器仅为 JAVA 应用程序而设计。WAMP 的 Web 服务器是为 PHP 设计的。

希望能帮助到你 -_-

# xml - 初始数据 Django 夹具问题：从 0 个夹具安装了 0 个对象

> ID：15893789
> 
> 赞同：0
> 
> 时间：2013-04-09T05:12:31.783
> 
> 标签：xml, django, fixtures, django-fixtures

我在通过 xml 文件导入初始数据时遇到了一点麻烦。例如我在 myapp/fixtures/initial_data.xml 中命名这个文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<rows>
  <row>
    <model>myapp.nutrition</model>
    <name>Asiago Cheese Bagel</name>
    <calories>370</calories>
    <protein >17</protein >
    <carbs>56</carbs>
    <fats>8</fats>
    <restaurant >Au Bon Pain</restaurant >
    <price>1.29</price>
  </row>
</rows> 
```

这就是我的模型文件的样子：

```
from django.db import models
class Nutrition(models.Model):
     name= models.CharField(max_length=100)
     calories= models.IntegerField()
     protein= models.IntegerField()
     carbs= models.IntegerField()
     fats= models.IntegerField()
     restaurant= models.CharField(max_length=100)
     price= models.DecimalField(decimal_places=2, max_digits=10) 
```

当我运行 manage.py loaddata myapp/fixtures/initial_data.xml 时，我得到： Installed 0 object(s) from 0 fixture(s)。我也尝试过 JSON 并得到了相同的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:19:24.370

您应该按照 Django 的预期格式化 XML。一种方法是使用 Django 的管理员手动添加和对象，然后使用转储数据

```
manage.py dumpdata --format=xml --indent=4 
```

对于您的情况，这给出了类似

```
<?xml version="1.0" encoding="utf-8"?>
<django-objects version="1.0">
    <object pk="1" model="myapp.nutrition">
        <field type="CharField" name="name">Asiago Cheese Bagel</field>
        <field type="IntegerField" name="Calories">370</field>
        ...
    </object>
</django-objects> 
```

# vb.net - vb.net 多进程

> ID：15893790
> 
> 赞同：0
> 
> 时间：2013-04-09T05:12:32.067
> 
> 标签：vb.net, sendkeys

这是我的场景，我有两个 sendkeys 应用程序（使用计时器），我将其重写为一个，但我有一个问题，例如，如果我启用 timer1，它将发送很多“q”直到我停止它，然后如果我启用 timer2，它将发送“1”然后“2”然后“3”。该过程的输出是

`qqqqq123q123q123q123q123q123`

这不是我想要的，在我合并两个发送键之前，输出会像这样

```
qqqq1qqq2qq3qqqqqq1q2q3qqqq1 
```

两个计时器具有相同的间隔。当我将这两个计时器合并到一个 runnnig 应用程序时发生的事情就像 timer1 然后 timer2 然后 timer1 再次，他们喜欢交替过程而不是同时做。希望可以有人帮帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:03:38.623

看看这个参考：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

它说：

> 此 Windows 计时器专为使用 UI 线程执行处理的单线程环境而设计

所以这是单线程的，因为你的计时器的间隔是一样的。它们将按顺序处理。您应该改用 System.Threading.Thread。请参见下面的示例。您可以创建一个参数化线程对象，该对象将字符串参数作为 sendkeys 应该在该线程上发送的内容。并启动两个或更多线程。

```
using System;
using System.Threading;

// Simple threading scenario:  Start a static method running 
// on a second thread. 
public class ThreadExample {
    // The ThreadProc method is called when the thread starts. 
    // It loops ten times, writing to the console and yielding  
    // the rest of its time slice each time, and then ends. 
    public static void ThreadProc() {
        for (int i = 0; i < 10; i++) {
            Console.WriteLine("ThreadProc: {0}", i);
            // Yield the rest of the time slice.
            Thread.Sleep(0);
        }
    }

    public static void Main() {
        Console.WriteLine("Main thread: Start a second thread.");
        // The constructor for the Thread class requires a ThreadStart  
        // delegate that represents the method to be executed on the  
        // thread.  C# simplifies the creation of this delegate.
        Thread t = new Thread(new ThreadStart(ThreadProc));

        // Start ThreadProc.  Note that on a uniprocessor, the new  
        // thread does not get any processor time until the main thread  
        // is preempted or yields.  Uncomment the Thread.Sleep that  
        // follows t.Start() to see the difference.
        t.Start();
        //Thread.Sleep(0); 

        for (int i = 0; i < 4; i++) {
            Console.WriteLine("Main thread: Do some work.");
            Thread.Sleep(0);
        }

        Console.WriteLine("Main thread: Call Join(), to wait until ThreadProc ends.");
        t.Join();
        Console.WriteLine("Main thread: ThreadProc.Join has returned.  Press Enter to end program.");
        Console.ReadLine();
    }
} 
```

这个例子来自：http: [//msdn.microsoft.com/en-us/library/system.threading.thread.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)

# ios - 在更新 NSFetchedResultsControllers 之前，Core Data 是否真的将任何更改保存到磁盘？

> ID：15893794
> 
> 赞同：0
> 
> 时间：2013-04-09T05:12:50.950
> 
> 标签：ios, objective-c, core-data

这是一个非常具体的问题，我刚刚被它所困扰，所以为了节省其他人的时间和痛苦，这是我的问题深入和解决方案。

例如，当您保存主上下文并触发 NSFetchedResultsController 委托回调时，您能否依赖于您的保存已实际完成这一事实，并且您是否可以在这些回调中安全地执行新的获取请求，假设当前保存的数据将被包括在内?

答案是不。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:12:50.950

如果您的应用程序中有活动的 NSFetchedResultsController (NSFRC) 并具有委托集并正在监视对相关对象的更改，那么这里有一个未记录的小警告，所有 Core Data 开发人员都应该注意。如果您在主上下文上执行保存，并让 NSFRC 在主上下文上工作，那么调用`save:`主上下文实际上将首先更新 NSFRC 并在实际将 MOC 内容保存到之前调用 NSFRC 委托上的`willChangeContent:..`,`didChangeContent:..`等回调磁盘。

这可能有问题的原因是，如果您尝试使用`NSDictionaryResultType` *那些 NSFRC 回调*中的 resultType 执行新的提取请求，那么您的提取请求将不包括任何当前更改。通过当前的更改，我指的是那些首先调用您的 NSFRC 回调的更改。

您看不到这些更改的原因是因为将 resultType 设置为`NSDictionaryResultType`关闭该`includesPendingChanges`属性。因此 fetch 请求仅直接从磁盘获取更改，不会合并上下文中的任何本地更改。

我可以理解为什么使用字典结果类型的任意获取请求不合并上下文中未保存的结果的原因，因为字典可以具有任意结构，而 MOC 正在对图形中的对象和关系进行建模，但是，部分让我感到有趣和惊讶的是，NSFRC 代表在实际完成保存之前收到了更新回调。

这是一些ASCII艺术：

```
    1\. 保存 Main MOC --> | 2\. NSFRC 回调 --> | 3\. 实际保存发生在这里
                         | | |            
                         | | |
                         | ▼ |
                         | NSDictionaryResultType |
                         | 获取请求不会 |
                         | 查看来自 | 的任何更改
                         | 这个当前保存，但是 |
                         | 常规获取请求 |
                         | 会看到这些变化|

```

PS：Core Data 是一个运行在性能有限的设备上的对象图管理框架。有时你必须优化。

# jquery - WebUrlLoaderClient : 10 后同步请求超时

> ID：15893796
> 
> 赞同：0
> 
> 时间：2013-04-09T05:12:54.477
> 
> 标签：jquery, eclipse, cordova

我一直在使用phonegap 开发一个android 应用程序。在应用程序中，我使用 xmlrpcrequest 请求。有时当我发出请求时，可能是由于连接速度慢，请求超时，我收到以下错误

**E/WebUrlLoaderClient(574)：第 0 次尝试 10 秒后同步请求超时**

有没有办法“捕捉”这个错误，或者可能增加超时时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T01:00:05.727

I have this same problem since I updated to phonegap 2.8.1, what version are you using? It does not seem to listen to the ajax argument timeout at all:

```
var dataObj = { 'value': whatever'};
        //navigator.notification.alert(JSON.stringify(dataObj));
        $.ajax({
            type: 'POST',
            url: url,
            async: false,
            data: JSON.stringify(dataObj),
            dataType: 'json',
            timeout: 25000, 
            contentType: 'application/json; charset=utf-8',
            crossDomain: true,
            xhrFields: {
                withCredentials: true
            },
            beforeSend: function(xhr) {
                xhr.setRequestHeader("Authorization", "Basic " + Base64.encode(username + ":" + password));
            },
            success: post_succes,
            error: function(xhr, status, errThrown) {
                var out = "<br>Error status " + status;
                out += "<br>Error request status text: " + xhr.statusText;
                out += "<br>Error request status: " + xhr.status;
                out += "<br>Error request response text: " + xhr.responseText;
                out += "<br>Error response header: " + xhr.getAllResponseHeaders();
                navigator.notification.alert(out);
            }
        }); 
```

I also tried to set this value in the java main: (I know this is not the right property... but desperate figuring it out...)

```
super.setIntegerProperty("loadUrlTimeoutValue", 25000); 
```

it keeps sticking to the 10 seconds....

# iphone - ios--当系统显示高质量图片时

> ID：15893805
> 
> 赞同：0
> 
> 时间：2013-04-09T05:13:38.750
> 
> 标签：iphone, ios, uiview

在我的应用程序中，我使用的是 iPhone 6 模拟器和 xcode 4.6。我在我的应用程序中添加了一个背景imageView，这里我有两张图片，myPic.png(320*480)和myPic@2x.png(640*960)，但是系统只显示myPic.png图片显示高质量的图片。谁能告诉我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:17:26.120

当您在视网膜显示器上运行项目时，它将显示 2x 图像而不是小图像。为此，您必须像这样编写代码。

```
UIImageView * imageView = [[UIImageView alloc] initWithFrame:CGRectMake(270, 17, 30, 30)];
imageView.image = [UIImage imageNamed:@"myPic"]; 
```

不要写图像的扩展名，这样它就会根据你的屏幕显示图像。

# datanucleus - 在使用 Datanucleus 进行增强时出现此错误。任何想法

> ID：15893807
> 
> 赞同：0
> 
> 时间：2013-04-09T05:13:53.157
> 
> 标签：datanucleus

我正在尝试增强一个类（类是在运行时使用注释生成的）。并得到这个错误。DN 说它是空指针。任何想法？

```
22:03:36,816 (pool-7-thread-1) DEBUG [DataNucleus.MetaData] - Registering class "test.TESTClass" as not having MetaData.
22:03:36,817 (pool-7-thread-1) ERROR [DataNucleus.Enhancer] - Error thrown enhancing with ASMClassEnhancer
java.lang.NullPointerException
    at org.datanucleus.enhancer.jdo.JDOMethodAdapter.visitFieldInsn(JDOMethodAdapter.java:103)
    at org.datanucleus.asm.ClassReader.readCode(ClassReader.java:1333)
    at org.datanucleus.asm.ClassReader.readMethod(ClassReader.java:953)
    at org.datanucleus.asm.ClassReader.accept(ClassReader.java:684)
    at org.datanucleus.asm.ClassReader.accept(ClassReader.java:521)
    at org.datanucleus.enhancer.jdo.JDOClassEnhancer.enhance(JDOClassEnhancer.java:427)
    at org.datanucleus.enhancer.DataNucleusEnhancer.enhanceClass(DataNucleusEnhancer.java:927)
    at org.datanucleus.enhancer.DataNucleusEnhancer.enhance(DataNucleusEnhancer.java:534)
    at org.datanucleus.api.jdo.JDOEnhancer.enhance(JDOEnhancer.java:125)
    at com.xxxx.MYClassLoader.findClass(MYAClassLoader.java:615) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:33:02.460

请发布您的课程。

当这种奇怪的事情发生时，我`clean`的项目。（即删除所有已构建的类。在 Eclipse 中`Project > Clean...`：）

并确保您使用的注释基于正确的路径。使用`JDO`注释而不是`Datanucleus`（即使用`javax.jdo.annotations.PersistenceCapable`而不是`org.datanucleus.api.jpa.annotations.PersistenceCapable`，虽然我不确定这是否可能，因为编译器会抱怨它对我来说）

# c# - WPF 如何监听 BindingBase 对象？

> ID：15893808
> 
> 赞同：1
> 
> 时间：2013-04-09T05:14:01.870
> 
> 标签：c#, wpf, binding, datatrigger

我想创建一个特殊`DataTrigger`的继承`TriggerBase<FrameworkElement>`. 与 类似，在类中定义了`DataTrigger`一个类型的属性。`BindingBase``MyDataTrigger`

我怎样才能听它以追踪它的变化？

```
public class MyDataTrigger : TriggerBase<FrameworkElement>
{
    ...

    /// <summary>
    /// [Wrapper property for BindingProperty]
    /// <para>
    /// Gets or sets the binding that produces the property value of the data object.
    /// </para>
    /// </summary>
    public BindingBase Binding
    {
        get { return (BindingBase)GetValue(BindingProperty); }
        set { SetValue(BindingProperty, value); }
    }

    public static readonly DependencyProperty BindingProperty =
        DependencyProperty.Register("Binding",
                                    typeof(BindingBase),
                                    typeof(MyDataTrigger),
                                    new FrameworkPropertyMetadata(null));

} 
```

**更新：**

主要问题是我不知道如何找到`BindingBase`关联的`DependencyProperty`. 我知道如何听 DP；

```
void ListenToDP(object component, DependencyProperty dp)
{
    DependencyPropertyDescriptor dpDescriptor = DependencyPropertyDescriptor.FromProperty(dp, component.GetType());
    dpDescriptor.AddValueChanged(component, DPListener_ValueChanged);
} 
```

`DPListener_ValueChanged`代表在哪里`EventHandler`。这里，*组件*参数值为`this.AssociatedObject`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:10:09.050

好的，找到了！

考虑到这个[答案](https://stackoverflow.com/a/7666555/668342)，Binding 不是 DP。所以我试图找到Binding相关的DP：

```
Type type = Binding.GetType();
PropertyPath propertyPath = (PropertyPath)(type.GetProperty("Path").GetValue(Binding));
string propertyName = propertyPath.Path; 
```

完整代码：

```
public class MyDataTrigger : TriggerBase<FrameworkElement>
{
    ...

    public BindingBase Binding
    {
        get;
        set;
    }

    protected override void OnAttached()
    {
        base.OnAttached();

        if (Binding != null && this.AssociatedObject.DataContext != null)
            //
            // Adding a property changed listener..
            //
            Type type = Binding.GetType();
            PropertyPath propertyPath = (PropertyPath)(type.GetProperty("Path").GetValue(Binding));
            string propertyName = propertyPath.Path;

            TypeDescriptor.GetProperties(this.AssociatedObject.DataContext).Find(propertyName, false).AddValueChanged(this.AssociatedObject.DataContext, PropertyListener_ValueChanged);
    }

    private void PropertyListener_ValueChanged(object sender, EventArgs e)
    {
        // Do some stuff here..
    }
} 
```

# android - 确定进程是否已经死亡？

> ID：15893809
> 
> 赞同：0
> 
> 时间：2013-04-09T05:14:06.027
> 
> 标签：android, aidl

有没有办法确定一个进程是否已经死亡？我有一个系统服务，它在连接到它的每个客户端上存储信息。当托管该客户端的进程终止时，我想清理我的缓存。我在谷歌上搜索过，但似乎这是不可能的:(

我遇到的一种解决方案是使用 Binder 的 linkToDeath，但该设计与我当前的设计并不能很好地融合。有替代方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:03:48.597

Thread的状态你可以通过isAlive()方法来判断这个Thread，或者使用getState()来更精确的判断线程的状态。

Binder 有方法 isBinderAlive()，但我没有使用它，所以无法添加官方文档中未发现的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:12:37.923

使用方法`linkToDeath`是我所知道的唯一一种。

通常这是我会做的：

*   有一个类，`IMySystemService.aidl`由您的系统服务实现。
*   有一个监听器，`IMySystemServiceListener.aidl`由每个客户端实现。
*   添加方法如`IMySystemService.addListener(IMySystemServiceListener listener)`

然后，使用`linkToDeath`系统服务中的侦听器来获取每个客户端死亡时的回调。然后，您可以清理缓存的相关部分。

如果您的项目已经很复杂，您可能已经有一些合适的每个客户端监听器了？

你能回答为什么`linkToDeath`不适合你的设计吗？

缓存的一种常见模式是使用[Wea​​kHashMap](http://developer.android.com/reference/java/util/WeakHashMap.html)作为缓存 - 但这仅在您有一个在客户端消失时被垃圾收集的关键对象时才有效。我相信，反过来，这只能通过使用来实现，`linkToDeath`所以我们回到了开始的地方！

# javascript - 如何使用 phonegap 同步设备日历以添加事件

> ID：15893810
> 
> 赞同：3
> 
> 时间：2013-04-09T05:14:06.617
> 
> 标签：javascript, html, cordova, plugins

我正在开发一个带有日历的电话间隙项目。所以我需要添加提醒和事件（可以在设备日历中完成任何过程）。我正在寻找使用电话间隙为 iPhone 和 Android 同步设备日历的过程。由于我是该领域的新手，请通过一些示例的一些编程步骤指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:22:55.683

您需要使用 JavaScript API 来访问目标设备上的日历。

虽然 PhoneGap 没有提供标准的日历 API（[http://docs.phonegap.com/en/2.5.0/index.html](http://docs.phonegap.com/en/2.5.0/index.html)），但是已经创建了社区插件

Android 版 PhoneGap 日历插件： [https ://github.com/phonegap/phonegap-plugins/tree/master/Android/CalendarPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/CalendarPlugin)

iOS 版 PhoneGap 日历插件： [https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T15:13:42.370

这是一个通用的 Android/iOS 版本： [https ://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin](https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin)

# apache - ColdFusion 服务器配置

> ID：15893811
> 
> 赞同：1
> 
> 时间：2013-04-09T05:14:22.257
> 
> 标签：apache, coldfusion

按照下面 Adob​​e 链接中的说明，我重新安装了 CF9 多服务器配置和 Apache Web 服务器。我的链接

所以现在我的 localhost 根指向 C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs。一切都很好。

所以这是我的问题。我正在努力组织起来。我玩了几个网站。我可以像下面这样设置我的 /htdocs 文件夹并让每个站点都有自己的根。

```
IE
htdocs
---Site1
---Site2
---Site3 
```

到目前为止，当我需要处理它时，我只是将所需的站点移动到等效的 htdocs 中（在此之前我使用的是内置服务器。）。

当然这不是唯一的解决方案？我是在 CF Admin 还是 Apache 中处理这个问题，或者两者兼而有之。您如何管理多个站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:43:36.197

您需要搜索的是 Apache HTTPD 中的 VirtualHosting。VirtualHosting 正在设置 Apache 在不同的目录中托管不同的域名。

我建议看一下 ACME 指南。我现在找不到链接，但你应该可以谷歌它。它介绍了使用 Apache、ColdFusion、MySQL 和 Eclipse 设置开发环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:39:26.907

您需要在 apache conf 文件中设置每个虚拟主机，阅读有关此的文档。您还需要使用本地主机文件来设置域以指向您的本地计算机。

因此，如果您想使用 dev.mysite.com 从 c:\windows\system42\drivers\etc 打开 hosts 文件，您需要在 wondaws vista 或更高版本上以管理员身份运行记事本。

在文件底部输入 127.0.0.1 dev.mysite.com

保存文件 此域现在将解析到您的本地计算机。您现在需要在 apache 中设置与虚拟主机相同的域。

如果您运行的是 windows vista 或 windows 7，那么我建议使用 Iis 而不是 Apache，这样更容易。

# c# - 无法在 devexpress 中加载视图状态

> ID：15893812
> 
> 赞同：1
> 
> 时间：2013-04-09T05:14:22.647
> 
> 标签：c#, asp.net, devexpress

这个问题在 devexpress master detail gridview 中造成了很多麻烦

"Failed to load viewstate. The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request. For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request."

i want to know why this happens in the first place, so that i can check my code. thats why i am not posting my code

Its urgent :)

# sql-server - 将 Sql Server 报告服务托管到 iis

> ID：15893813
> 
> 赞同：1
> 
> 时间：2013-04-09T05:14:25.480
> 
> 标签：sql-server, iis-7, reporting-services

我在商业智能工作室（SQl 服务器报告）中创建了一个解决方案。现在我想将它部署在 IIS 服务器上。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:58:56.790

SSRS 在最近的版本中，包括您提到的版本，不再使用 IIS 作为服务组件。正如评论中提到的，它们直接连接到 Windows http.sys。

如果您在 Business Intelligence Development Studio (BIDS) 中构建了报表，则需要部署到 SSRS 的服务器安装。这是作为 SQL Server 的可选组件安装的。您可以在没有安装 SQL Server 其他组件的计算机上安装 SSRS（服务器），但这通常受到许可协议的限制。如前所述，SSRS 不需要安装 IIS；您可以通过随 SSRS 一起安装的 SQL Server Reporting Services 配置工具指定绑定和配置。

# android - 如何获取联系人的电子邮件 ID

> ID：15893816
> 
> 赞同：1
> 
> 时间：2013-04-09T05:14:29.420
> 
> 标签：android

我正在尝试获取联系人的电子邮件地址。我找到[了如何获取联系电子邮件 ID？](https://stackoverflow.com/questions/6152442/how-to-get-contact-email-id) 但我不能用这个。

我编写了以下代码来获取电子邮件

```
 Cursor c1;
            c1 = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, ContactsContract.Contacts.DISPLAY_NAME);

            if(c1==null)
        return;
                    if(c1.getCount() > 0)
            {
                    while(c1.moveToNext())
                    {

                        String id = c1.getString(c1.getColumnIndex(Contacts._ID));
                                                    if(id==null)
                            continue;
                                                    Cursor email_crsr = getContentResolver().query(CommonDataKinds.Email.CONTENT_URI, null, CommonDataKinds.Phone.CONTACT_ID +" = ?", new String[]{id}, null);
                        if(email_crsr!=null)
                              email = phone_crsr.getString(phone_crsr.getColumnIndex(CommonDataKinds.Email.DATA));

      }
    } 
```

我正在关注异常：04-09 10:38:59.487: E/AndroidRuntime(8150): Caused by: android.database.CursorIndexOutOfBoundsException: 请求索引 -1，大小为 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:21:07.367

这可能会帮助你

```
 public ArrayList<String> getNameEmailDetails(){
        ArrayList<String> names = new ArrayList<String>();
        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                Cursor cur1 = cr.query( 
                        ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
                        ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                                new String[]{id}, null); 
                while (cur1.moveToNext()) { 
                    //to get the contact names
                    String name=cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
//                    Log.e("Name :", name);
                    String email = cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
//                    Log.e("Email", email);
                    if(email!=null){
                        names.add(email);
                    }
                } 
                cur1.close();
            }
        }
        return names;
    } 
```

# ipad - ipad modalviewcontroller 解散时不会进入主视图控制器的viewdidappear

> ID：15893817
> 
> 赞同：1
> 
> 时间：2013-04-09T05:14:32.107
> 
> 标签：ipad, cocoa-touch, ios6, modalviewcontroller, presentmodalviewcontroller

嗨，我有一个 modalview 控制器，在用户成功登录后会在主菜单上弹出。这用于需要保存在 userdefaults 上的其他角色。模态被正确地解除，但之后它没有通过 -viewdidappear 方法。我对其进行了编程，以便在选择角色后，它将加载整个主菜单，其中包含基于角色的填充数据。我曾经做过“presentViewController:roleVC”而不是模态，但决定不再使用它，因为我无法修改 VC 的大小（我希望它以模态样式显示）。无论如何，使用 presentViewController，父 VC 会通过 -viewdidappear，这对我之前非常有效。现在我不确定如何强制它在关闭模式后再次通过 viewdidappear 。

这里有一些屏幕使它更容易理解。

![在此处输入图像描述](https://i.stack.imgur.com/HcZgU.png)

这就是我在该主菜单的 viewdidappear 中的内容。（....将直接流量 VC）

```
if([[NSUserDefaults standardUserDefaults] objectForKey:@"role"] == nil){
        /*UIViewController *roleVC = [storyboard instantiateViewControllerWithIdentifier:@"SBIDRoleViewController"];
        [self presentViewController:roleVC animated:YES completion:^{}];*/
        UIViewController *roleVC = [storyboard instantiateViewControllerWithIdentifier:@"SBIDRoleViewController"];
        roleVC.modalPresentationStyle = UIModalPresentationFormSheet;
        roleVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        [self presentViewController:roleVC animated:YES completion:nil];
        roleVC.view.superview.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
        roleVC.view.superview.bounds = CGRectMake(0, 0, 500, 600);
    }else{
        if([[NSUserDefaults standardUserDefaults] integerForKey:@"role"] == 1){
            MainAdminDashboardViewController *adminVC = (MainAdminDashboardViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"MainAdminDashboardViewControllerID"];
            [self presentViewController:adminVC animated:NO completion:nil];
        }else{
            [self performSegueWithIdentifier:@"SeguePushToMatsFromSwitchBoard" sender:self];
        }
    } 
```

如您所见，segue 在分配角色后被推送。

这是单击按钮时的关闭

```
- (IBAction)btnRole1:(id)sender {
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:2 forKey:@"role"];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

当这个按钮被点击之前（使用presentviewcontroller），它会通过viewdidappear。现在没有了。关于如何处理这个问题的任何建议？我很新，所以一切都乱七八糟，所以任何关于处理这个问题的最佳实践的建议也很重要。

谢谢！

**编辑：** 另外，为了清楚起见，当我在没有编辑其 modalproperties 的**情况**下执行 presentViewController 时（例如，roleVC.modalPresentationStyle = UIModalPresentationFormSheet;）它会关闭 VC，然后会通过 viewdidappear。这就是我之前调用它的方式，并且在我关闭它后它会点击 viewdidappear。

```
UIViewController *roleVC = [storyboard instantiateViewControllerWithIdentifier:@"SBIDRoleViewController"];
            [self presentViewController:roleVC animated:YES completion:^{}]; 
```

**更新：** 所以我尝试在弹出窗口上放置一个协议（委托）。我的问题是这个，如果它试图调用一个segue，它可以完美地工作，这样它就可以替换细节视图。但是，我想在 Splitviewcontroller 之上有一些完全不同的东西，所以我会调用 presentViewcontroller。它不会出现。

这是我的代码。

这是模态VC（角色控制器）

```
@protocol RoleViewDelegate<NSObject>
-(void)dismissVC;
@end
@interface RoleViewVC : UIViewController
@property(nonatomic, strong) id roleViewDelegate; 
```

关于VC的实施

```
-(IBAction)role1:(id)sender{
   if(roleViewDelegate != nil){
       [roleViewDelegate dismissVC];
   }
} 
```

在调用它们的 VC 上

```
-(void)dismissVC{
   [self dismissViewControllerAnimated:YES completion:nil];
   UISToryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
   // pop up another VC that contains tabbed menus to replace Split View
   AdminMenuViewController *adminVC = [storyboard instantiateViewControllerWithIdentifier:@"SBIDAdminVC"];

   [self presentViewController:adminVC animated:YES completion:nil]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:18:59.947

对于那些在弹出视图控制器时可能遇到相同问题并且在关闭后需要做其他事情的人，我使用这个解决了它

[https://stackoverflow.com/a/7194182/639713](https://stackoverflow.com/a/7194182/639713)

基本上，放置一个延迟，因为出于某种原因，模态视图控制器需要一些时间才能被删除。我添加了一个委托，它将调用另一个发生延迟的方法。

# ruby - 未找到 Redmine 插件部分

> ID：15893819
> 
> 赞同：2
> 
> 时间：2013-04-09T05:14:34.450
> 
> 标签：ruby, redmine, partials, redmine-plugins

我一直在关注[Redmine 插件教程](http://www.redmine.org/projects/redmine/wiki/Plugin_Tutorial)并阅读[Hooks](http://www.redmine.org/projects/redmine/wiki/Hooks)上的页面，但我仍然无法使用`render_on`关键字或其他方式渲染我的插件部分。

这是我放置部分内容的地方：

```
app
└── views
    ├── issues
    │   └── _issue_mail_settings_form.html.erb
    └── projects
        └── _mail_settings_form.html.erb 
```

这是我的带有`render_on`关键字的类，它位于`lib`目录中：

```
class MailSettingIssueHooks < Redmine::Hook::ViewListener
  render_on :view_issues_form_details_bottom,            
      :partial => "issues/issue_mail_settings_form"                                                                                                
end 
```

在 init.rb 我只是`require 'mail_setting_issue_hooks'`.

如果我像这样加载 Redmine，我无法查看任何问题的页面 - 我只会收到 404 错误。请求的控制台输出在[此处](http://pastebin.com/DYPPATLf)，尽管它看起来没什么用。

如果我定义了一个名为`view_issues_form_details_bottom`in的方法`MailSettingIssueHooks`并返回一个字符串，那么它会正确呈现。

**关键字如何`render_on`决定在哪里寻找部分，我怎样才能让它工作？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T03:42:40.737

Redmine 加载插件时，会将每个插件的默认视图目录添加`app/views`到全局 Rails 视图路径中。问题是它不**使用**磁盘上的实际目录 - 它假定插件位于`plugins/<name>`，`<name>`您使用的参数在哪里`Redmine::Plugin.register`。

这意味着，如果您`init.rb`看起来像：

```
Redmine::Plugin.register :cool_stuff do
... 
```

但是你的插件的目录实际上是`redmine_cool_stuff`，代码会加载并执行，但不会找到视图。

**解决方案：**确保参数 to`Plugin.register`与您在 redmine 目录中的目录名称相同`plugins`。

# c# - Monodroid OnDismiss 与对话框片段

> ID：15893820
> 
> 赞同：1
> 
> 时间：2013-04-09T05:14:40.497
> 
> 标签：c#, xamarin.android, android-dialogfragment

我有一个`DialogFragment`从使用`ListView`.

在 API 14 中，它运行良好。当`NotifyDataSetChanged()`在 Fragment 中按下 Save 按钮然后将其关闭时调用 。

然而，在 API 8 中，当我们在片段中按下“保存”按钮并返回到主活动后，会引发以下错误。

*“java.lang.IllegalStateException：适配器的内容已更改，但 ListView 未收到通知。确保您的适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。[在 ListView(2131099672,类 android.widget.ListView) 与适配器（类 timepilot.EmployeesAdapter）]"*

`Update()`我可以通过在父活动中编写一个方法来使用一种解决方法，该方法在`NotfiyDataSetChange()`按下 Save 时和之前在片段中简单地调用和调用它`Dismiss()`，并且效果很好，但感觉像是一种不太正确的解决方法。

无论如何要使用 monodroid 为 Dialog Fragment 实现 OnDimissListener 吗？（我已经看到很多使用 android 执行此操作的示例，但无法使用 monodroid 解决）。

更奇怪的是，API 14 中并没有抛出这个错误，只是在 API 8 中。

EmployeeActivity.cs

```
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set up Listview
        SetContentView(Resource.Layout.EmployeeMaster);
        employeesAdapter = new EmployeesAdapter(this);
        listView = FindViewById<ListView>(Resource.Id.employees);
        listView.Adapter = employeesAdapter;

        // Dedicate Buttons
        this.FindViewById<Button>(Resource.Id.button_edit).Click += EditButton_Click;
        this.FindViewById<Button>(Resource.Id.button_add).Click += AddButton_Click;
        this.FindViewById<Button>(Resource.Id.button_settings).Click += SettingsButton_Click;

        // Gestures
        gestureDetector = new GestureDetector(this);
        listView.SetOnTouchListener(this);

        var x = employeesAdapter.Count;
    }

void AddButton_Click(object sender, EventArgs e)
    {
        FragmentTransaction trans = this.SupportFragmentManager.BeginTransaction();
        UserProfileFragment userProfileDialog = new UserProfileFragment();
        userProfileDialog.Show(trans, "profile");          
    }
}
... 
```

UserProfileFragment.cs

```
...
protected void Save()
    {
        String Name = this.Name.Text;
        String Number = this.Number.Text;
        EmployeeManagement.GetInstance().AddEmployee(Name, Number, true);
        EmployeeActivity activity = (EmployeeActivity)this.Activity;
        //activity.Update();
        Dismiss();
    }
... 
```

# ember.js - 访问控制器功能内的内容 ember

> ID：15893833
> 
> 赞同：0
> 
> 时间：2013-04-09T05:16:22.817
> 
> 标签：ember.js

我有这样的路线，控制器，视图。问题是我`reloadTime`从视图中调用了控制器函数，但在`reloadTime`函数中我控制了这个控制器的内容，但它说它是`undefined`。我的问题是如何在 ember 中访问此内容？

```
App.ActivecallsRoute = Ember.Route.extend({
    setupController:function(controller,model){
        $.ajax({
            url:'requests/activecalls.php',
            type:'POST',
            success:function(data){
                App.Cdrglobal.set('active_call',data.length);
                controller.set('content',data);
            }
        })
    }
});

App.ActivecallsController = Ember.ArrayController.extend({
    content:[],
    deleteCall:function(model){
       var obj = this.findProperty('ID',model.ID);
       App.Cdrglobal.set('active_call',App.Cdrglobal.active_call-1);
       this.removeObject(obj);
    },
    reloadTime:function(){
        console.log(this.get('content'));//console undefined
        console.log(this.content);console undefined
    }
});

App.ActivecallsView = Ember.View.extend({
   didInsertElement:function(){
       this.get('controller').reloadTime();
   }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:58:26.273

您正在`content`正确访问该属性。你得到的原因`undefined`是因为该`content`属性实际上是未定义的。

现在之所以你的未定义，是因为 Ember.js 自动将控制器的内容设置为路由中钩子`content`的返回值。`model`

由于你没有定义`model`方法，如果这个钩子的返回值是`undefined`，因此 Ember.js 将控制器`content`属性设置为`undefined`.

解决方案：

创建一个只返回一个空数组的虚拟模型钩子：

```
App.ActivecallsRoute = Ember.Route.extend({
  setupController:function(controller,model){
    $.ajax({
      url:'requests/activecalls.php',
      type:'POST',
      success:function(data){
        App.Cdrglobal.set('active_call',data.length);
        controller.set('content',data);
      }
    });
  },
  model: function() {
    return [];
  }
}); 
```

# c++ - 如何让我自己编写的迭代器支持->？

> ID：15893834
> 
> 赞同：0
> 
> 时间：2013-04-09T05:16:27.363
> 
> 标签：c++, iterator

我正在用 C++ 编写自己的迭代器：

```
class my_iterator {
  entity operator*() {
    ...
  }
  my_iterator& operator++() {
    ...
  }
} 
```

我可以使用 * 运算符取消引用实体。但是，我可以让我的自定义迭代器支持该`->`操作（后跟取消引用实体的某些属性或方法）吗？

我可以实施某个运营商来支持`->`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:19:37.793

是的，如果你想要特殊的行为，你会超载`->`，否则你会用它在指针上的标准行为来获得它。

对于你的情况，你会有类似的东西

```
entity* operator->() {
    return ptr_to_entity;
} 
```

这有点奇怪，因为`->`您的重载返回一个*指向对象*的指针，然后`->`用于该对象。

例如，以上使：

```
my_iterator_instance->foo === ptr_to_entity->foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:18:46.240

是的，它被称为 operator->。但是请记住 operator-> 是特殊的，它应该返回一个指针，并且常规的 operator-> 将应用于该指针。因此，鉴于上面的代码，我无法确切地告诉您如何实现它。如果您填写运营商的详细信息*，我可能会提供更多帮助。

大概是这样的。

```
entity* operator->() {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:20:54.933

看看这个答案：[Common operator to overload](https://stackoverflow.com/a/4421719/99298)。您可以跳到“类似指针类型的运算符”以找到您想要的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T05:23:45.717

[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)的摘录

我强烈建议您阅读以上内容，因为它写得很好

```
 Operators for Pointer-like Types 
```

> 为了定义您自己的迭代器或智能指针，您必须重载一元前缀 > 取消引用运算符 * 和二元中缀指针成员访问运算符 ->：

```
class my_ptr {
    value_type& operator*();
    const value_type& operator*() const;
    value_type* operator->();
    const value_type* operator->() const;
  }; 
```

> 请注意，这些也几乎总是需要 const 和 non-const 版本。对于 >the -> 运算符 value_type 必须是类（或结构或联合）类型，否则它们的 > 实现会导致编译时错误。
> 
> 一元地址运算符永远不应该被重载。
> 
> 对于 operator->*() 看到这个问题。它很少使用，因此很少超载。事实上，即使是迭代器也不会重载它。

# g-wan - 如何通过gwan读写文件

> ID：15893837
> 
> 赞同：0
> 
> 时间：2013-04-09T05:16:48.020
> 
> 标签：g-wan

我是 gwan 的新手，目前通过 gwan 编写读/写静态文件，但是，我发现当我尝试打开文件（对应于传递给 gwan 的某些参数）时，它运行 main() 两次（或无限循环），任何人都可以帮忙吗？谢谢！

这是getanddelivery.c

```
int main(int argc, char *argv[])
{
    global_count = 1;
    printf("Global count : %d\n", global_count);

    xbuf_t *reply = get_reply(argv);
    char *name = 0;

    while(global_count<argc){
            get_arg("zoneid=", &name, global_count, argv);

          if(hadCache(name)){
                    printf("have file\n");
          }else{
                    printf("No file found!\n");
          }
            global_count++;
    }

    xbuf_xcat(reply, "Work!");

    return 200;

} 
```

函数hadCache就是检查静态文件是否存在！再次感谢！！

* * *

谢谢吉尔回答我的问题！我已经修改了代码，它现在可以工作了！但是我尝试在gwan/include/myownfunction.h & hadCache.c下使用自己的头文件和函数文件，发现getanddelivery.c不能正常调用hadCache()函数

```
#include "myownfunction.h"

int main(){ ... } 
```

我自己的函数.h

```
#include <stdio.h>
#include <stdbool.h>

bool hadCache(char* zoneid); 
```

hadCache.c

```
#include "myownfunction.h"

bool hadCache(char* zoneid){...} 
```

但是，如果我在我的 getanddelivery 文件中替换它，它会起作用：

```
Replace this #include "myownfunction.h"
By           #include "hadCache.c" 
```

请你帮助我好吗 ？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:13:28.303

您的问题来自线程不安全的**global_count++；**变量增量，这将导致并发下的破坏。

您应该阅读**原子性**并使用原子增量。请参阅另一个问题：[功能请求：gwan.h 中包含的 atomicAdd() 函数](https://stackoverflow.com/questions/13302161/feature-request-an-atomicadd-function-included-in-gwan-h/13308542#13308542)。

# google-sheets - 在不相邻的列上传播 TRANSPOSE 函数

> ID：15893842
> 
> 赞同：0
> 
> 时间：2013-04-09T05:17:38.947
> 
> 标签：google-sheets, google-docs

*当我在Google Spreadsheets*中创建一个数组并使用`TRANSPOSE`数组上的函数时，我得到一个新数组，其中第一个单元格有`TRANSPOSE`公式，其余单元格有一个`CONTINUE`函数。

我想在新数组的每一列之间放置一个新列，但是每当我添加一列时，新列右侧的数组单元格会向左移动，接管该新列，这样就没有间隙在新的数组单元之间。

我尝试在其他地方剪切和粘贴`CONTINUE`函数，但每次更改都相反。

**关于如何`TRANSPOSE`在不相邻的列上拆分函数的想法？**

注意：我想要这个的原因是我想将每一列的数据添加到新数组中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:45:13.137

使用 NOEXPAND 功能。例如：

`=NOEXPAND(TRANSPOSE(A1:A10))`

这最初会将数组转置为 10 个连续的单元格。但是，您应该能够在该输出中插入列，并相应地移动 CONTINUE 函数。

[https://support.google.com/drive/bin/answer.py?hl=en&answer=71291](https://support.google.com/drive/bin/answer.py?hl=en&answer=71291)

# php - 使用 php 文件处理在两个文本之间添加文本

> ID：15893843
> 
> 赞同：0
> 
> 时间：2013-04-09T05:17:39.183
> 
> 标签：php

我的问题是我们在 php 中有文件处理。在文件处理中，我们有创建文件、写入文件和更新文件。如果我使用 php 文件处理创建文本文件并写入文件，一些你好人并关闭文件。我想更新该文件，但这次更新文件时，我想在 Hello 和 Guys 之间添加文本。例如 Hello hii guy.or guy 单词将被 speed.Hello speed 覆盖。

谢谢请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:08:22.047

您可以使用以下链接或任何其他选项最后附加文本 [http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:31:29.323

即使在任何语言中都是不可能的，您必须读取缓冲区中的文件，然后根据需要进行更改，然后在文件中写下来。另一方面，您最后可以附加文本。

# .net - nHibernate Envers MOD

> ID：15893844
> 
> 赞同：1
> 
> 时间：2013-04-09T05:18:04.403
> 
> 标签：.net, nhibernate, nhibernate-envers

我是 nHibernate Envers 的新手，我在属性级别跟踪实体更改，默认情况下，它会创建属性名称的列，后缀为 _MOD，可以选择更改此后缀。

[http://envers.bitbucket.org/#envers-envers-tracking-properties-changes-queries](http://envers.bitbucket.org/#envers-envers-tracking-properties-changes-queries)

但是，我需要基于 ColumnName_MOD 而不是 PropertyName_MOD 的这些 MOD 标志的列名。

我在哪里可以更改此配置。任何线索都会非常有帮助。

谢谢，苏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:10:37.013

你今天不能。

它以这种方式工作的原因是为了保持一致性——一些“MOD 列”不必“映射”到单个数据库列，而是映射到其属性。例如，组件、具有多列的用户类型等，都使用一个 MOD 列，即使审计数据（可以）表示为多列。

如果你愿意，你可以在这里报告你的问题 [https://nhibernate.jira.com/browse/NHE](https://nhibernate.jira.com/browse/NHE)

# visual-studio - 如何将我在 Visual Studio 中设计的内容上传回 Office 365 服务器？

> ID：15893845
> 
> 赞同：1
> 
> 时间：2013-04-09T05:18:33.920
> 
> 标签：visual-studio, sharepoint

我为开发人员服务器购买了一个 Office 365 来使用共享点发布网页，我安装了 napa，它让我可以选择在 Visual Studio 中工作，在做了一些工作之后我现在不知道如何将文件上传回共享点服务器，它没有自动上传，我不知道出了什么问题。

你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:43:22.040

**Using "Napa" Office 365 Development tools**

1.  Add "Napa" Office 365 Development Tools from the SharePoint Store to your developer site.
2.  Click on Napa on the Site Contents page
3.  Add New Project
4.  Various apps will be available for your choosing. Select App for SharePoint. Give the app a name and click "Create" ![enter image description here](https://i.stack.imgur.com/NvyfP.png)

5.  Within the Napa window, develop your new app ![enter image description here](https://i.stack.imgur.com/6TirJ.png)

6.  Click Run Project to deploy your app to your Office 365 Preview

![enter image description here](https://i.stack.imgur.com/I8alw.png)

7.  Your project is being packaged and installed on your SharePoint Server

![enter image description here](https://i.stack.imgur.com/2dn3j.png)

you can read more about this [here](http://blogs.msdn.com/b/jasonz/archive/2012/07/17/introducing-napa-office-365-development-tools.aspx)

# ios - iOS 应用程序中的 fork() 是否会被 Apple 的审查程序拒绝？

> ID：15893849
> 
> 赞同：9
> 
> 时间：2013-04-09T05:18:48.967
> 
> 标签：ios, app-store, jailbreak

我正在编写一种机制（在 iOS 应用程序中），通过执​​行`fork();`. 有谁知道尝试这个电话是否会违反 App Store 指南？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-26T11:23:16.283

fork() （和其他）不会让你被拒绝；被原版操作系统拒绝的操作在提交时无法复制。我在 appstore 上有使用 fork() 和 system() 调用来检查越狱环境的应用程序，但没有一个被拒绝:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T08:54:48.420

您无法在非越狱设备上的 iOS 应用程序中创建新进程（您会收到诸如“不允许操作”之类的错误），但您可以使用 pthread 库创建新线程。

编辑：但是如果您试图检测设备是否越狱，我认为这不会违反商店指南只是“尝试”进行分叉，但这更像是一个法律问题而不是技术问题。

我在应用商店指南中没有发现任何禁止调用某些低级 API 的内容。这是合乎逻辑的，因为越狱不存在，他们会禁止你做什么你不能做的事情？

我发现的最接近的东西是：

*   在其指定容器区域之外读取或写入数据的应用程序将被拒绝
*   以任何方式或形式下载代码的应用程序将被拒绝
*   安装或启动其他可执行代码的应用程序将被拒绝

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T04:25:32.153

`fork(2)`可能会让你被拒绝。如果您的目的是检查设备是否越狱，您可以检查 APT 的存在。

根据我的经验，尝试检查文件夹是否存在于`/private/{etc,var}/apt`（APT 的配置和缓存目录，Cydia 需要它才能工作但在普通 iOS 设备上不存在）的应用程序`NSFileManager`不会被拒绝。

# grails - Grails Spring Security Core Plugin：控制器不需要身份验证

> ID：15893850
> 
> 赞同：0
> 
> 时间：2013-04-09T05:18:55.400
> 
> 标签：grails, spring-security, grails-plugin

我有

*   圣杯 2.0.4
*   弹簧安全核心：1.2.7.3

我想将一些控制器公开为 Web 服务。（此方法将从域外的 php 应用程序调用）

示例控制器：

```
 def getAnimalJson(){
    def animalList  = Animal.list()
    render "${params.callback}(${animalList as JSON})"
} 
```

如果我登录 grails 应用程序，则从 php 应用程序调用方法成功，但注销时失败。

我希望这个控制器不被 spring securitycore 检查。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:48:38.397

如果没有注释，它应该被允许。您是否在控制器级别进行了注释？或者您使用的是 requestmaps 还是 Config.groovy 地图？如果您正在使用注释，则可以将其添加到该方法

```
@Secured('permitAll') 
```

而且不会有人看管。如果您使用不同的方法，请使用 requestmap 或在 Config.groovy 中执行相同的操作。

# c - 并行运行两个独立线程

> ID：15893854
> 
> 赞同：0
> 
> 时间：2013-04-09T05:19:11.587
> 
> 标签：c, multithreading, sockets

我写了一个有两个线程的服务器程序：

```
1\. For sending data to client side.
2\. For receiving data from client side 
```

现在，当执行它们时，服务器接受请求并创建发送数据的线程并开始向客户端发送数据，但由于它是可连接的，它将一直执行直到完成执行并且没有创建另一个线程并且控制权仍然存在在这个线程中。

为了使两个线程同时运行，我需要申请什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:42:45.443

I think you might be looking for pthread. Here is a sample code I wrote when I learned how threads work. Its a counter. The first thread adds one to a variable each secound, and the other prints it out.

```
#include<pthread.h>     //for simultanius threads
#include<stdio.h>
#include<stdlib.h>      //for the _sleep function

//global variables, both thread can reach thease.
int a = 0;
int run = 1;

void *fv(void)
{
   while( run )
    {
         _sleep(1000);
         a++;
    }
}

int main(){
    pthread_t thread;
    pthread_create( &thread, 0, fv, 0 );
    printf( "%d", a );
    while( a < 60 )
    {
        int last = a;
        while( last == a )
           _sleep(50); //let's not burn the cpu.
        printf( "\r%d", a );
        _sleep(500); //a won't change for a while
    }
    run = 0;
    pthread_join( thread, NULL );
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:17:21.253

我没有误解这个概念，但问题是我正在执行以下步骤：

```
 1\. creating sending thread.
    2\. Making it joinable.
    3\. creating receiving thread.
    4\. Making it joinable. 
```

现在发生了什么，一旦发送线程线程可以加入，接收线程就没有被创建。现在问题解决了正确的顺序是：

```
 1\. creating sending thread.
    2\. creating receiving thread.
    3\. Making  sending thread joinable
    4\. Making  receiving thread joinable. 
```

现在两个线程都是先创建的，然后并行执行。

# hibernate - 任何动态创建模式以支持即席 JSON 对象映射持久性的框架？

> ID：15893856
> 
> 赞同：3
> 
> 时间：2013-04-09T05:19:16.403
> 
> 标签：hibernate, jpa, persistence, dao

这是我试图确定的一个要求——这个传入的 JSON 数据表示一个对象映射（想想嵌套对象，每个对象都有一个或多个属性），我需要将其保存在我的数据库中。现在的问题是我不知道 JSON 数据中会包含哪些属性。当数据进入时，我需要动态构建表和列，并且可以只创建所有字符串类型的列开始。但是如果下一个请求对于给定的对象类型有更多的属性，或者更少的属性，但只是不同的属性集，那么之前创建的对应表应该自动扩展以添加新列，然后允许传入的持久性JSON 数据。对于嵌套对象，每个对象都应该放入单独的表中，如果另外创建某种连接或映射表以维护两者之间的映射，也可以。对象将具有静态“id”属性，可能有一些数字。这需要特别对待，因为没有“id”属性的对象应该被认为是“新”对象，因此应该执行行插入，并且应该在持久化期间为对象生成id。如果对象已经填充了“id”属性，则应将其视为更新操作。还有一个名为“toBeDeleted=true|false”的特殊属性可能会出现在 JSON 对象映射中，最终会触发（级联）删除由 id 标识的对象。这需要特别对待，因为没有“id”属性的对象应该被认为是“新”对象，因此应该执行行插入，并且应该在持久化期间为对象生成id。如果对象已经填充了“id”属性，则应将其视为更新操作。还有一个名为“toBeDeleted=true|false”的特殊属性可能会出现在 JSON 对象映射中，最终会触发（级联）删除由 id 标识的对象。这需要特别对待，因为没有“id”属性的对象应该被认为是“新”对象，因此应该执行行插入，并且应该在持久化期间为对象生成id。如果对象已经填充了“id”属性，则应将其视为更新操作。还有一个名为“toBeDeleted=true|false”的特殊属性可能会出现在 JSON 对象映射中，最终会触发（级联）删除由 id 标识的对象。那么它应该被认为是更新操作。还有一个名为“toBeDeleted=true|false”的特殊属性可能会出现在 JSON 对象映射中，最终会触发（级联）删除由 id 标识的对象。那么它应该被认为是更新操作。还有一个名为“toBeDeleted=true|false”的特殊属性可能会出现在 JSON 对象映射中，最终会触发（级联）删除由 id 标识的对象。

现在问题来了：是否有任何 OR 映射框架，它允许动态扩展模式以保留传入的属性？有没有人处理过这种模式不固定并且需要动态扩展以适应传入数据的要求 - 是否有任何框架支持这种类型的 JSON 持久性行为？

请记住，我试图不创建具有键/值列的表来存储每个对象的属性和值，因为这通常会导致“高”表，这在检索性能方面表现不佳。我真的很想看到每个属性都保留在它自己的列中，而不是作为键/值对类型表中的一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:00:17.777

听起来您正在尝试创建一个 ORM 存储数据，它并非旨在存储，这更像是一个平面数据库或文档存储。我会重新考虑您的设计，因为听起来像 Mongo 这样的东西会更适合，因为它会按照您的要求开箱即用。

# c++ - C++ 链表——如何在不重复相同节点的情况下阅读

> ID：15893860
> 
> 赞同：1
> 
> 时间：2013-04-09T05:19:37.137
> 
> 标签：c++, pointers, linked-list

我正在尝试从文本文件中逐字阅读（并跟踪行号 - 这就是我使用 getline 但这是一个单独的问题的原因）并重复文件的最后一行。我认为这是因为我正在使用 getline() 但我每次都设置一个新节点但是当我 displayAll() 它只打印文件的最后一行。（底部的一些文件和错误示例）。我包括了 Node 类，因为它与这个问题最相关，而 LinkedListOfFiles 主要是支持创建后的完整单词列表的函数。

```
class Node
{
public:

    string getNode(){return node;}
    void setNode(string s){node=s;}
    string getFile(){return file;}
    void setFile(string s){file=s;}
    int getNodeNumber(){return nodeNumber;}
    void setNodeNumber(int ln){if(ln<0)ln=0;nodeNumber=ln;}

    friend class LinkedListOfFiles;

    int number;
    char name; 
    Node * next;

    Node() {pLeft=NULL;pRight=NULL;}
    Node(Node * pS) {pLeft=NULL;pRight=NULL;pData=pS;}
    friend class BSTOfWords;
private:
    Node * pData;
    Node * pLeft;
    Node * pRight;

    //Node * pData;
    Node * pNext;
    Node * pPrev;
    string node;
    string file;
    int nodeNumber;
};

void LinkedListOfFiles::addFile(string fileName)
{
    int line = 0;
    ifstream InputFile;
    InputFile.open (fileName);
    string w = "",next;
    Node * wnode = new Node;
    (*wnode).setFile(fileName);

    while (!InputFile.eof())
    {
        getline(InputFile,next);
        (*wnode).setNode(next);
        line++;
        if (next == "\n"){cout<<"eof found! \n";}
        (*wnode).setNodeNumber(line);
        putAtFront (wnode);
        cout << (*wnode).getFile()+"  "+intToString((*wnode).getNodeNumber())+" "+(*wnode).getNode()+" \n";
        Node * wnode = new Node;
        wnode->pData = wnode->pNext;
    }
    //cout << " outbound to file list: "+(*wnode).getFile()+" \n";
}

void LinkedListOfFiles::putAtFront(Node * ps )
{
    insert(ps,pFront);
}

void LinkedListOfFiles::insert(Node * pNewWords, Node * pFound)
{
    Node * pNewNode;
    pNewNode = new Node;
    (*pNewNode).pData=pNewWords;

    (*((*pFound).pNext)).pPrev=pNewNode;
    (*pNewNode).pNext=(*pFound).pNext;
    (*pNewNode).pPrev=pFound;
    (*pFound).pNext=pNewNode;
}

string LinkedListOfFiles::displayAll()
{
    string result;

    // pointer to current node
    Node * pCurrentNode;

    // make current node the first item in list
    pCurrentNode = (*pFront).pNext;  //pFront points to the sentinal, it's pNext points to the first item in list

    while((*pCurrentNode).pData != NULL)
    {
        result+= (*((*pCurrentNode).pData)).getFile(); //add the currrent node's fileName
        result+="   ";
        result+= intToString((*((*pCurrentNode).pData)).getNodeNumber()); //add the currrent node's lineNumber
        result+="   ";
        result+= (*((*pCurrentNode).pData)).getNode(); //add the currrent node's line of text
        result+="   ";

        result+= "\n";
        pCurrentNode = (*pCurrentNode).pNext;
    }

    return result; // return the string with all the data
} 
```

这是一个文件和它会生成的错误示例

```
Some say the world will end in fire,
Some say in ice.
From what I've tasted of desire
I hold with those who favour fire.
But if it had to perish twice,
I think I know enough of hate
To say that for destruction ice
Is also great
And would suffice. 
```

错误是

```
test.txt   9   And would suffice.
test.txt   9   And would suffice.
test.txt   9   And would suffice.
test.txt   9   And would suffice.
test.txt   9   And would suffice.
test.txt   9   And would suffice.
test.txt   9   And would suffice.
test.txt   9   And would suffice.
test.txt   9   And would suffice. 
```

我现在正在尝试学习 C++ 和链表。这些可能是相似的（如果它们可以帮助您查看此问题）[来自文本文件的链接列表](https://stackoverflow.com/questions/5632902/linked-list-from-text-file?rq=1) [想要读取超过 50,000 个 txt 文件并将它们保存在 C++ 中的链接列表中，](https://stackoverflow.com/questions/12429621/want-to-read-more-than-50-000-txt-files-and-save-them-in-linked-list-in-c) 但它们不同，因为我可能没有正确使用指针来保存每个我前进的节点（一些指针可能指向自我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:35:02.577

addFile 函数中的循环应该是：

```
while(getline(InputFile, next).good())
{
    // do stuff
} 
```

如果 getline 到达文件末尾，则 next 中的值将保持不变。这可能是重复线路的原因。

# jsf - Getter 正在添加额外的 HtmlPanelGrid

> ID：15893862
> 
> 赞同：1
> 
> 时间：2013-04-09T05:19:41.550
> 
> 标签：jsf, jsf-2

我正在创建一个 java 程序，它在 jsf 2.0 的 xhtml 页面中动态添加 jsf 组件。现在我面临一个奇怪的问题。下面是我的 .java 代码和 .xhtml 代码。

首先，在命令按钮操作事件之前调用我的 HtmlPanelGrid 获取器。当它返回网格时，它会在网格对象中添加额外的面板网格。

因此，当我第二次单击该按钮时，globalGrid 子项计数为 2 而不是 1。

我在@ViewScoped 中的范围。

请帮助解决这个问题。

提前致谢。

**testCustom.xhtml**

```
<h:panelGrid binding="#{datatableBean.globalGrid}" />           <h:commandButton value="{bundle.newCaseInfoSheet_addAdditionalParty}" action="# {datatableBean.addNewAdditionalParties}" /> 
```

**数据表Bean.java**

```
public class DatatableBean{   

    public static HtmlPanelGrid globalGrid = new HtmlPanelGrid();
    public int gridCounter = 1;

    public void setGlobalGrid(HtmlPanelGrid globalGrid) {
        this.globalGrid = globalGrid;
    }

    public HtmlPanelGrid getGlobalGrid() {
        return globalGrid;
    }

    public HtmlPanelGrid getAdditionalParties(int i) {

            HtmlPanelGrid mainGrid = null;
            HtmlOutputText LNameText = new HtmlOutputText();

            LNameText.setId("LNameText_"+i);
            LNameText.setValue("Last Name");

            HtmlInputText LNameInputText = new HtmlInputText();
            LNameInputText.setId("LNameInputText_"+i);

            mainGrid = new HtmlPanelGrid();
            mainGrid.setId("mainGrid_"+i);
            mainGrid.setColumns(2);
            mainGrid.getChildren().add(LNameText);
            LNameInputText.setSize(45);
            mainGrid.getChildren().add(LNameInputText);

        return mainGrid;
    }

    public void addNewAdditionalParties() {

        System.out.println("\n In globalGrid Start -------->" + globalGrid.getChildCount() + "" );

        if(gridCounter >= 2)
        {
            globalGrid = (HtmlPanelGrid)session.getAttribute("globalGrid");
            globalGrid.getChildren().clear();
            System.out.println("Grid COunt is --> " + gridCounter);
            for(int i =1; i<=gridCounter; i++)
            {
                globalGrid.getChildren().add(getAdditionalParties(i));
            }
        }
        else
        {
            globalGrid.getChildren().add(getAdditionalParties(1));
        }
        gridCounter++;
        System.out.println("Grid Count after is --> " + gridCounter);
    }
} 
```

# provisioning - 如何在新模式中将新设备 UDID 添加到现有配置文件

> ID：15893863
> 
> 赞同：12
> 
> 时间：2013-04-09T05:19:52.690
> 
> 标签：provisioning, provisioning-profile, ios-provisioning

![在此处输入图像描述](https://i.stack.imgur.com/rGX6F.png)

我只想将新设备 UDID 添加到现有配置文件中，修改配置文件我单击“生成”但它显示下载，没有办法在那里添加设备......请考虑我的问题回复我。先感谢您。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T06:05:40.690

**首先通过单击设备列表中的“+”按钮将设备 udid 添加到设备列表中。然后，添加设备 udid 后，转到配置文件列表。在那里，选择要将设备添加到的配置文件。之后，您将获得一个编辑选项，用于添加您之前添加到设备列表中的新 UDID。您可以在底部找到此选项。**

![点击编辑按钮](https://i.stack.imgur.com/UXWa1.png)

单击编辑按钮后，我们可以选择设备 udid

我希望这能帮到您

**注意**：最初在创建配置文件时，我们必须添加至少一个设备 ID，否则我们在编辑模式下没有添加设备选项。（如果设备计数为“0”（来自屏幕截图），那么我们没有添加设备的选项）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-22T07:38:58.767

转到[https://developer.apple.com/account/ios/device/deviceList.action](https://developer.apple.com/account/ios/device/deviceList.action)中的设备设置，然后查看在您的帐户中添加了多少设备，然后添加其他设备 UDID 并保存。

现在，当您返回配置文件时，您将看到刚刚添加的设备。您可以选择所有设备，然后按生成。现在，您可以轻松下载更新的配置文件。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T18:20:18.050

请注意，在新的 Apple TestFlight 中不再通过 UUID 添加测试人员。

Test Flight 构建现在需要 App Store Distribution Provisioning Profile。门户不允许将 UUID 添加到此类配置文件中。

相反，通过 iTunes Connect 添加“内部测试人员”：

> 内部测试人员是具有管理员或技术角色的 iTunes Connect 用户。它们可以添加到用户和角色中。

添加用户后，请务必单击他们的姓名并翻转“内部测试员”开关。

![内部测试仪拨动开关](https://i.stack.imgur.com/Zj68A.png)

然后，去`App > Prerelease > Internal Testers`邀请他们参与构建。

# mysql - MYSQL 使用区别但包括豁免/排除条件？

> ID：15893871
> 
> 赞同：0
> 
> 时间：2013-04-09T05:20:05.410
> 
> 标签：mysql, distinct

我正在使用计数查询从我的表中选择所有不重复的记录，我正在使用以下内容：

```
function check_profile_views3() {
            global $connection;
            global $_SESSION;
            $query = "SELECT COUNT(DISTINCT profile_id) totalCOUNT2 FROM ptb_profile_views WHERE viewed_profile_id=".$_SESSION['user_id']." AND profile_id!=".$_SESSION['user_id']."";
            $check_profile_views_set3 = mysql_query($query, $connection);
            confirm_query($check_profile_views_set3);
            return $check_profile_views_set3;       
        } 
```

我的桌子看起来像这样：

```
id  |  profile_id | viewed_profile_id
1          3               6
2          3               6
3          4               6
4          -1              6
5          -1              6 
```

所以在这个例子中，我的查询选择了不同的值并且不计算那些在 profile_id 字段中重复的值，

但是，我现在想在此查询中添加一个例外，以计算所有“-1”配置文件 ID 以及计算所有不同的正数。

这可能我还在学习sql吗，所以如果有人能帮助我，我会非常感激。

谢谢

期望的结果

```
the mysql table goes from this:
id | profile_id | viewed_profile_id
1        3               6
2        3               6
3        4               6
4       -1               6
5       -1               6

to this:

end result pulls results from table like this
id | profile_id | viewed_profile_id
1        3               6
2        4               6
3       -1               6
4       -1               6 
```

好的，所以我尝试了 JW 的答案，我试图这样做，但我在某个地方出错了：

这就是我如何进行查询：

```
function check_profile_views3() {
        global $connection;
        global $_SESSION;
        $query = "
        SELECT  a.*
        FROM    ptb_profile_views a
        INNER JOIN
    (
        SELECT  profile_id, MIN(ID) min_ID
        FROM    ptb_profile_views
        WHERE   profile_id > 0
        GROUP   BY profile_id
    ) b ON a.profile_id = b.profile_id AND
            a.ID = b.Min_ID
            UNION
            SELECT  *
            FROM    ptb_profile_views
            WHERE   profile_id < 0";
        $check_profile_views_set3 = mysql_query($query, $connection);
        confirm_query($check_profile_views_set3);
        return $check_profile_views_set3;       
    } 
```

然后我在页面上这样调用它：

```
$check_profile_views_set3 = check_profile_views3();
while ($views3 = mysql_fetch_array($check_profile_views_set3)) { 

echo "". $views3['totalCOUNT2'] .""; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:39:19.807

你能试试这个：

SELECTviewed_profile_id,COUNT(DISTINCT profile_id) totalCOUNT2 FROM ptb_profile_views WHERE profile_id not in (".$_SESSION['user_id']." ,-1) GROUP byviewed_profile_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:45:35.520

尝试这个

```
SELECT id,profile_id,viewed_profile_id 
FROM ptb_profile_views p
INNER JOIN
( SELECT MIN(id) minid FROM ptb_profile_views
  GROUP BY profile_id) x
ON p.id = x.minid
WHERE profile_id > 0
GROUP BY profile_id

UNION

SELECT id,profile_id,viewed_profile_id 
FROM ptb_profile_views 
WHERE profile_id <= 0 
```

# python - Python：为数字添加方法

> ID：15893873
> 
> 赞同：0
> 
> 时间：2013-04-09T05:20:06.807
> 
> 标签：python, date, syntactic-sugar

受到 Ruby 的诱惑，我想在 python 中处理日期时添加一些语法糖。如何实现此方法：(3).days.ago() 或 (4).days.from_now()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:23:52.823

要创建接近您想要的语法，子类*int*以添加新方法（内置*int*类型是不可修改的，因此子类是扩展整数行为的唯一选择）。[*使用datetime 模块*](http://docs.python.org/2.7/library/datetime.html#module-datetime)中的[*timedelta*](http://docs.python.org/2.7/library/datetime.html#timedelta-objects)计算日期偏移量：[](http://docs.python.org/2.7/library/datetime.html#module-datetime)

 *```
>>> from datetime import date, timedelta

>>> class Int(int):
        def days_ago(self):
            return date.today() - timedelta(days=self)
        def days_from_now(self):
            return date.today() + timedelta(days=self)

>>> Int(3).days_ago()
datetime.date(2013, 4, 5)
>>> Int(4).days_from_now()
datetime.date(2013, 4, 12) 
```*

# jsf - 如何在 h:inputText 中指定名称属性？

> ID：15893876
> 
> 赞同：11
> 
> 时间：2013-04-09T05:20:22.853
> 
> 标签：jsf, primefaces

我需要呈现`h:inputText`如下 html 输出：

```
 <input id="yourName" type="text" name="name" />
  <input id="email" type="text" name="email" /> 
```

但`h:inputText`呈现与组件的客户端 ID 相同的名称属性。我想自己指定`name`属性，而不是将客户端 ID 放入其中，以便输入字段可以显示来自先前在其他站点上为相同字段类型提交的值的有意义的自动完成建议。例如，当我使用`name="email"`电子邮件的输入字段时，会向用户显示他之前在其他网站上提交的电子邮件 ID 的建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T11:09:30.033

您无法使用`<h:inputText>`. 它的名称由 JSF 根据客户端 ID 自动生成（而客户端 ID 又基于组件 ID 及其所有命名容器父级）。

无论如何，您基本上有 2 个选项来实现具体的功能要求：

1.  如果没有其他命名容器父级，请指示父级表单不要添加其 ID：

    ```
    <h:form prependId="false"> 
    ```

    然而，这将导致`<f:ajax>`失败。

2.  使用纯 HTML 元素而不是 JSF 组件：

    ```
    <input name="name" value="#{bean.name}" />
    <input name="email" value="#{bean.email}" /> 
    ```

    `@ManagedProperty`您只需通过请求范围的 bean自己收集它们：

    ```
    @ManagedProperty("#{param.name}")
    private String name;

    @ManagedProperty("#{param.email}")
    private String email; 
    ```

    你会错过 JSF 内置的验证/转换工具和 ajax 魔法。

然而，还有一个完全不同的选择：使用 HTML5 `<input type="email">`。这样，浏览器将自动建议所有先前输入的相同类型的电子邮件。这不是本机支持的`<h:inputText>`。但是，您可以使用自定义渲染工具包来使其工作，如[向 Primefaces (3.4) 添加自定义属性 (HTML5) 支持中](https://stackoverflow.com/questions/15575165/adding-custom-attribute-html5-support-to-primefaces-3-4/15577225#15577225)所回答的那样：

```
<h:inputText type="email" ... /> 
```

* * *

**从 JSF 2.2 开始更新**，您终于可以轻松地声明[传递属性](https://docs.oracle.com/javaee/7/tutorial/jsf-facelets009.htm)，而无需自定义渲染工具包。

```
<... xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
...
<h:inputText a:type="email" ... /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-05T04:49:50.357

您可以在不指定 name 属性的情况下做您想做的事情。id 属性就足够了。根据示例尝试以下操作：

```
< h:inputText id="email" ... />

...
$("#email input").click(function (event) {
...
} 
```

代替

```
$("#email input[name='email']").click(function (event) 
```

希望这就是你要找的:)

# c++ - 为什么这个 OpenCV 代码会出现段错误？

> ID：15893879
> 
> 赞同：2
> 
> 时间：2013-04-09T05:20:29.353
> 
> 标签：c++, opencv, segmentation-fault

我正准备并行化我的一些 C++ OpenCV 代码。我遇到了段错误，我无法理解发生了什么。

这是代码：

```
class ExhaustiveComparisonMT
{
    vector<Mat> *m_sigs;
    Mat *m_dist;
public:
    ExhaustiveComparisonMT(vector<Mat> sigs, Mat dist)
    {
        m_sigs = &sigs;
        m_dist = &dist; // gdb breakpoint 1 here
    }

    void operator() (size_t last_row, size_t last_col) const
    {
        Mat diff = (*m_sigs)[0].clone(); // segfault happens here, gdb breakpoint 2 here
        for (size_t i = 0; i != last_row; ++i)
        for (size_t j = 0; j != last_row; ++j)
        {
            cv::absdiff((*m_sigs)[i], (*m_sigs)[j], diff);
            m_dist->at<double>(i, j) = cv::sum(diff).val[0];
        }
    }
};

void
exhaustive_comparison(vector<Mat> sigs, Mat dist)
{
    size_t width = sigs.size();
    ExhaustiveComparisonMT ecmt(sigs, dist);
    ecmt(width, width);
} 
```

基本上，矩阵向量被传递给构造函数。指向向量的指针被保存为成员变量，因此可以在 中再次访问该向量`exhaustive_comparison`。但是，该函数在尝试访问向量的第一个元素时出错。

我试图通过放置两个断点来诊断 gdb 的问题（参见代码）。在断点 1：

```
(gdb) p (*m_sigs)[0]
$1 = (cv::Mat &) @0x7fffee77d010: {flags = 1124024325, dims = 2, rows = 1, cols = 712, data = 0x624ec0 "", refcount = 0x0, datastart = 0x624ec0 "", dataend = 0x6259e0 "", 
  datalimit = 0x6259e0 "", allocator = 0x0, size = {p = 0x7fffee77d018}, step = {p = 0x7fffee77d060, buf = {2848, 4}}} 
```

因此，第一个元素被正确访问。现在，我们转到断点 2 并尝试相同的操作：

```
(gdb) p (*m_sigs)[0]
$2 = (cv::Mat &) @0x7fffee77d010: <error reading variable> 
```

第一个元素似乎不再可访问！它的地址相同（0x7ffee77d010）。这里发生了什么？

最后，如果我向前一步，我会得到：

```
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7a0dd50 in cv::Mat::copyTo(cv::_OutputArray const&) const () from /usr/local/lib/libopencv_core.so.2.4 
```

OpenCV 尝试访问第一个元素来克隆它，但失败了。

为什么第一个元素在构造函数中可以访问，但在`exhaustive_comparison`成员函数中无法访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:26:31.423

```
ExhaustiveComparisonMT(vector<Mat> sigs, Mat dist)
{
        m_sigs = &sigs;
        m_dist = &dist; // gdb breakpoint 1 here
} 
```

您正在传递变量`sigs`并`dist`通过复制 - 意思是，它们的生命周期仅限于此函数。

如果您尝试获取它们的地址并在之后使用它，您将指向未知数据 - 因为离开此功能后，这些对象将被销毁，并且它们的地址将在以后用于其他用途。

如果您想获得作为参数传递的对象的地址，您应该使用引用 - 这样，您实际上将检索原始对象的地址。当然，假设您将左值传递给您的函数并且它们同时没有被破坏，这将起作用。

```
ExhaustiveComparisonMT(vector<Mat> &sigs, Mat &dist)
{
        m_sigs = &sigs;
        m_dist = &dist; // gdb breakpoint 1 here
} 
```

# r - R - 在每一行计算“行邻域”中仅包含 NA 的列数

> ID：15893880
> 
> 赞同：3
> 
> 时间：2013-04-09T05:20:36.313
> 
> 标签：r, apply

您将如何从数据框中创建一个向量，该向量为每一行提供该行中“NA”（或自定义值）的列数以及上面的*n*行和下面的*m*行。

因此，如果*m* = *n* = 1 （即每行中有多少列是 NA 并且在前后有 NA ）并且我的数据框是

```
structure(list(X = 1:8, A = c(3L, NA, 10L, NA, 6L, NA, 5L, NA
), B = c(6L, NA, NA, NA, 8L, NA, 13L, NA), C = c(NA, 12L, 14L,  
NA, NA, NA, 9L, NA), D = c(NA, NA, NA, NA, NA, 11L, 7L, NA)), .Names = c("X", 
"A", "B", "C", "D"), class = "data.frame", row.names = c(NA, 
-8L)) 
```

IE

```
 t X  A  B  C  D
1 1  3  6 NA NA 
2 2 NA NA 12 NA 
3 3 10 NA 14 NA 
4 4 NA NA NA NA
5 5  6  8 NA NA
6 6 NA NA NA 11
7 7  5 13  9  7
8 8 NA NA NA NA 
```

我想要矢量图

```
count
0
1
2
1
1
0
0
0 
```

（如果第一个和最后一个条目是`NA`' 很好）。我试图模仿`COUNTIFS`Excel 中的一个函数，即`COUNTIFS(B2:F2,"",B3:F3,"",B4:F4,"")`第 3 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:57:04.330

这应该会产生预期的结果 -

```
y = is.na(yourDataFrame)

rowSums(y & rbind(rep(F,5), y[-nrow(yourDataFrame),]) & rbind(y[-1,], rep(F,5))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T05:55:30.870

我想我明白你的意思。

假设数据帧被调用`x`。

首先，对于 中的每个 ( `row`, `colum`n) `x`，我们需要查看`NA`该单元格中是否有一个，并且对于之前的行和之后的`NA`行在*同一列*中是否有一个。`n``m`

首先，让我们在单行的情况下执行此操作，例如行`i = 2`。我们也有`n = 1`和`m = 1`（来自问题中的示例）。

```
i <- 2
n <- 1
m <- 1 
```

让我们计算每列中包含的行的 NA 数`i - n`（`i + m`如果当前值为 NA，则`is.na`返回，给出列总和）`TRUE``colSums`

```
y <- colSums(is.na(x[(i - n):(i + m), ]))
# X A B C D 
# 0 1 2 1 3 
```

现在如果我们计算 3 秒，我们只有`NA`在上一行、当前行和下一行中都有一个`NA`（即这里只有 D 列符合条件）：

```
y == n + m + 1
#     X     A     B     C     D 
# FALSE FALSE FALSE FALSE  TRUE 
```

所以满足我们标准的列*数*`i`（因此是输出的第 th 个元素）是：

```
sum(y == n + m + 1)
# 1 
```

然后我们可以将`sapply`其应用于每一行：

```
countifs <- function (df, n, m) {
    sapply(1:nrow(df),
           function (i) {
               nrows <- nrow(df)
               startRow <- max(i - n, 1)
               endRow   <- min(i + m, nrows)
               y <- colSums(is.na(x[startRow:endRow, ]))
               sum(y == n + m + 1)
           })
}

countifs(x, 1, 1)
# [1] 0 1 2 1 1 0 0 0 
```

您还提到您可能希望与自定义值进行比较，而不是`NA`. 在这种情况下`is.na(x[...])`，您可以只做而不是做`x[...] == value`（但不是 if `value`is `NA`，您在其中使用`is.na`）

`sapply`此外，您可以通过仅使用on rows `n + 1`to`nrow(df) - m - 1`并将第一个`n`和最后一个`m`元素自动设置为 0来节省一些工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T06:00:40.437

这是一个函数，它将识别`NA`运行中心的值`length = .length`

```
foo <- function(x,.length){
  x <- is.na(x)
  if( .length < 2L ||.length %%2L == 0L ){stop('.length must be an odd number greater than 2')}
  lx <- length(x)
  if(lx <.length) {return(rep_len(FALSE, lx))}
  midpoints <- seq.int(2L, lx-1L, by = 1L)
  c(FALSE,sapply(midpoints, function(xx) all(x[(xx-1L):(xx+1L)])),FALSE)
} 
```

我们可以将它与 rowSums 一起使用并`sapply`得到你想要的。

```
rowSums(sapply(xx, foo, .length = 3))
## [1] 0 1 2 1 1 0 0 0 
```

* * *

## 无需重新发明轮子（滚动的东西）

或者你可以`rollapply`从`zoo`包中使用

```
library(zoo)
rowSums(sapply(xx, function(x) {
    rollapply(is.na(x), width = 3, fill = FALSE, FUN = all)
   })) 
```

甚至只是

```
rowSums(rollapply(is.na(xx),width=3, FUN=all, fill = FALSE)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T05:30:21.630

您可以使用`describe`just 来获取每列中的 NA 数量。

```
describe(traindata) 
```

输出如下所示：

```
Column_3 
      n missing  unique    Mean     .05     .10     .25     .50     .75     .90     .95 
    646      23     283  0.2792  0.0000  0.0000  0.0000  0.1455  0.4798  0.9305  1.0000 
```

检查`missing`值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T05:51:32.180

我想不出一个矢量化的版本，所以这里是一个使用一个很好的旧 for 循环的版本：

```
x <- structure(list(X = 1:8, A = c(3L, NA, 10L, NA, 6L, NA, 5L, NA
), B = c(6L, NA, NA, NA, 8L, NA, 13L, NA), C = c(NA, 12L, 14L,  
NA, NA, NA, 9L, NA), D = c(NA, NA, NA, NA, NA, 11L, 7L, NA)), .Names = c("X", 
"A", "B", "C", "D"), class = "data.frame", row.names = c(NA, 
-8L))

y <- x
y[is.na(y)] <- -99
out <- vector("numeric", nrow(y))

n <- 1
m <- 1
for (c in (1+n):(nrow(y)-m)) {
    out[c] <- sum((y[(c-n),] == -99) & (y[(c),] == -99) & (y[(c+m),] == -99))
}
out 
```

这应该可以解决问题（即使允许 n 和 m）：

```
> out
[1] 0 1 2 1 1 0 0 0 
```

请注意，我使用了两个技巧。由于使用`NA`s 是有问题的，因此我将它们交换`-99`（尽管这不是完全必要的）。然后我不会遍历前 n 行和最后 m 行。

如果有人提出矢量化版本，他/她肯定会得到我的支持。

# c - 如何增加 _open_osfhandle 使用的 Windows 打开文件打开？

> ID：15893883
> 
> 赞同：1
> 
> 时间：2013-04-09T05:20:46.940
> 
> 标签：c, windows, posix

在 Windows 中，如何增加使用的打开文件限制`_open_osfhandle`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:16:32.103

默认值为 512，但您可以使用[_setmaxstdio](http://msdn.microsoft.com/en-us/library/6e3b887c.aspx)函数更改它。

# mysql - 使用 TOP 子句删除 Mysql 中的查询？

> ID：15893886
> 
> 赞同：1
> 
> 时间：2013-04-09T05:20:58.580
> 
> 标签：mysql

我很难编写查询来删除 Mysql 中重复的前 2 个条目。有人可以帮助我吗。我遇到了如何查询 select 语句而不是删除查询。以下是要求；如果表包含大于或等于 10 个特定记录的值，删除第一条记录（最上面）。以下是我的代码。

```
$result = mysql_query("SELECT * FROM billinfo WHERE tableno='10'") or die(mysql_error());

   $num_rows = mysql_num_rows($result);
    echo  $num_rows;

    $query2='';
   if($num_rows>10)
   {

        $query2 = mysql_query("DELETE * TOP FROM  billinfo Where tableno='10')");
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:25:19.693

首先，您正在检查是否`$num_rows`小于 10，如果我理解正确，您想要相反的情况。

您还没有定义“顶部”的含义——我假设一个字段的最大值，因此我将它写`XX`在查询中。

尝试类似的东西

```
if($num_rows>10) {
   $query2 = mysql_query("DELETE FROM billinfo WHERE tableno='10' ORDER BY XX DESC LIMIT 1");
} 
```

这将删除 1 行（在`LIMIT`part 中定义），并且由于结果集是按其排序的`XX DESC`，因此将是具有最大值的行`XX`。

有关更多信息，请参阅有关[删除的 Mysql 文档](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

# django - Django Paginator 更改 object_list

> ID：15893893
> 
> 赞同：1
> 
> 时间：2013-04-09T05:21:41.907
> 
> 标签：django, django-pagination

有没有办法在不创建新的 Paginator 的情况下更改 Paginator object_list？

我想订购我传递给 Paginator 的查询集。

现在我正在基于有序查询集创建新的分页器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-28T07:57:18.480

好的，自从这个问题发布这么多年之后，我把它放在了我的谷歌搜索命中列表的顶部。我刚刚做了一个简单的测试，证明可以将 paginator.object_list（以 Django QuerySet 开头）更改为字典列表，并且可以在模板中无缝运行。正如[文档](https://docs.djangoproject.com/en/2.2/topics/pagination/)所述，object_list 可以是：“列表、元组、QuerySet 或其他具有 count() 或**len** () 方法的可切片对象。”

因此，可以通过这种方式重新排序列表，或者，正如我需要做的那样，可以从第二个数据库向字典中添加更多字段。您确实需要将替换列表的长度保持为与原始 QuerySet 相同的长度，以便使用 Paginator 对象的所有其他功能。使用 QuerySet 方法 values() 可以让您非常轻松地保留所有字段（感谢[@David Wolever](https://stackoverflow.com/users/71522/david-wolever)提供[此提示](https://stackoverflow.com/questions/7811556/how-do-i-convert-a-django-queryset-into-list-of-dicts)）

这是一些代码：

```
new_object_list = list(records_from_paginator.object_list.values())
reordered_or_changed_object_list = reorder_or_change_object_list(new_object_list)
records_from_paginator.object_list = reordered_or_changed_object_list 
```

# postgresql - PostgreSQL 锁定模式

> ID：15893896
> 
> 赞同：1
> 
> 时间：2013-04-09T05:22:02.377
> 
> 标签：postgresql, locking, relational-database

从这个文档[http://www.postgresql.org/docs/current/static/explicit-locking.html](http://www.postgresql.org/docs/current/static/explicit-locking.html)

我知道 PostgreSQL 提供了各种锁定模式来控制对表中数据的并发访问。

我的问题是我有很多会话将访问我的数据库，但我很困惑我应该制作 1 个 40 列的大表还是许多列更少的表（一对一关系）。

1.  因为当我选择数据时，我会选择所有数据 ---> 当我使用 INNER JOIN 从许多表中选择时需要更多时间，但从 1 个大表中选择需要更少的时间。因此，如果我使用许多表，我的 php 响应会变慢。

2.  但是当我只使用一张表同时许多会话会更新我的表中的数据时，我害怕死锁或延迟，因为命令 UPDATE、DELETE 和 INSERT 在目标表上获取 ROW EXCLUSIVE 锁定模式。一般来说，任何修改表中数据的命令都会获取这种锁定模式。

谁能建议我应该采取哪种最佳方法？一张大桌子还是多张桌子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T05:35:49.907

确实`INSERT`，`UPDATE`或`DELETE`必须获取`ROW EXCLUSIVE`要更新的表的锁定。

但是，这个锁并不妨碍`SELECT`正常工作。`SELECT`只需要`ACCESS SHARE`锁。此锁兼容`ROW EXCLUSIVE`- 换句话说，您可以`SELECT`在其他数据由或更新时完美执行`INSERT`，只要您不获取任何显式锁。`UPDATE``DELETE`

换句话说，你不应该看到使用第二种方法的任何死锁（只是不要使用`SELECT FOR UPDATE`，你会没事的）。

[在PostgreSQL 文档](http://www.postgresql.org/docs/9.2/static/explicit-locking.html)中阅读更多内容。

# jquery - 将 JSON 对象发送到 WCF Rest 服务

> ID：15893899
> 
> 赞同：0
> 
> 时间：2013-04-09T05:22:44.230
> 
> 标签：jquery, asp.net, wcf, rest

我正在尝试通过使用 REST、WCF 和 JSON（所有这些技术的新手）来使我的应用程序正常工作。我的“GET”工作正常。是“POST”给我带来了问题。

正如您将在下面看到的，我使用 JSON.stringify“打包”我的 JSON，然后将 POST 发送到 REST 资源。但是，当对象到达处理请求的 WCF 方法时，该对象始终为空。

这是代码：

```
 $(document).ready(function () {

       var input = {
           Customer: {
               customerId: "1",
               firstname: "luke",
               lastname: "sayaw",
               email: "lumsayaw@gmail.com",
               mobile: "0433395106",
               state: "QLD"
           }
       };

       $.ajax({
           url: 'http://local.rest/restservice.svc/getcustomer',
           contentType: "application/json; charset=utf-8",
           data: JSON.stringify(input),
           dataType: 'json',
           type: 'POST',
           async: true,
           success: function (data, success, xhr) {
               alert('Group saved - ' + data);

               alert('first name: ' + data.firstname);

           },
           error: function (xhr, status, error) {
               alert('Error! - ' + xhr.status + ' ' + error);
           }
       });

   }); 
```

和服务器端代码：

```
namespace RestService
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "RestService" in code, svc and config file together.

public class RestService : IRestService
{

    public string getcustomer(Customer Customer)
    {
        string id = Customer.customerId ;
        return new JavaScriptSerializer ().Serialize (Customer );
    }
}

[DataContract ]
public class Customer
{
    public string customerId {get;set;}
    public string firstname { get; set; }
    public string lastname { get; set; }
    public string email { get; set; }
    public string mobile { get; set; }
    public string state { get; set; }

}

}
namespace RestService
{

[ServiceContract]
public interface IRestService
{

    [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "/getcustomer")]
    [return: MessageParameter(Name = "Customer")]
     string getcustomer(Customer Customer);
}
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:48:58.727

尝试：

```
[OperationContract, WebGet(UriTemplate = "/GetJson", BodyStyle = WebMessageBodyStyle.Bare)] //ResponseFormat = WebMessageFormat.Json
Stream GetJSON(); 

....
return new MemoryStream(Encoding.UTF8.GetBytes(jsonString)); 
```

# html - 如何使用 css 和 html 将垂直子菜单添加到水平菜单？

> ID：15893900
> 
> 赞同：0
> 
> 时间：2013-04-09T05:22:46.207
> 
> 标签：html, css

我想在我的水平菜单中添加一个垂直子菜单。我有像聚光灯一样的菜单风格。我已经尝试了一切，但没有奏效。请帮我。

这是代码：

```
<div class="spotlightmenu">  
    <ul>
        <li><%: Html.ActionLink("Home", "Index", "Home")%>
            <ul>
                <li><%: Html.ActionLink("submenu1", "", "")%></li>
                <li><%: Html.ActionLink("submenu2", "", "")%></li>
                <li><%: Html.ActionLink("submenu3", "", "")%></li>
            </ul>
        </li>
        <%--   <li><%: Html.ActionLink("About", "About", "Home")%></li> --%>
        <li><%: Html.ActionLink("Profile", "", "")%></li>
        <li><%: Html.ActionLink("Register", "Index", "Register")%></li>
        <li><%: Html.ActionLink("About Us", "", "")%></li>
        <li><%: Html.ActionLink("Contact Us", "", "")%></li>
    </ul>
</div> 
```

这是css文件：

```
.spotlightmenu {
    width: 100%;
    overflow:hidden;
}

.spotlightmenu ul {
    margin: 0;
    padding: 0;
    font: bold 14px Verdana; /* font style and size */
    list-style-type: none;
    text-align: left; /* "left", "center", or "right" align menu */
    /* background-color: #0033FF; */
    background-image: url('menu_style.jpg');
    border-radius:40px;  /* for making round corners of the menu */
    /* opacity:0.5; */ 
}

.spotlightmenu li {
    display: inline-block;
    position:relative;
    padding: 5px;
    margin: 0;
    margin-right: 5px; /* right margin between menu items */
}

.spotlightmenu li a {
    display:inline-block;
    padding: 5px;
    padding-top:10px;
    min-width:50px; /* horizontal diameter of spotlight */
    height:30px; /* vertical diameter of spotlight */
    text-decoration: none;
    color: white;
    margin: 0 auto;
    overflow:hidden;
    -moz-transition: all 0.5s ease-in-out; /* CSS3 transition to animate all A properties */
    -webkit-transition: all 0.3s ease-in-out;
    -o-transition: all 0.3s ease-in-out;
    -moz-transition: all 0.3s ease-in-out;
    -ms-transition: all 0.3s ease-in-out;
    transition: all 0.3s ease-in-out;
}

.spotlightmenu li:hover a {
    color: white;
    background: #99CC66;            /* #669900; /* background color of spotlight */
    -webkit-border-radius: 50%; /* large radius to create circular borders */
    -moz-border-radius: 50%;
    border-radius: 50%;
}

.spotlightmenu li a span {
    position:relative;
    top:35%; /* move text down so it appears centered within menu item */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:07:42.963

例如，您可以执行以下操作： HTml:

```
<ul id="navbar">
  <!-- The strange spacing herein prevents an IE6 whitespace bug. -->
   <div class="spotlightmenu">  
        <ul>
          <li>
            <a href="#">helloWorld</a>
          <ul>

          <li><a href="#">SubItem1<a></li>
          <li><a href="#">Subitem2<a></li>
          <li><a href="#">SubItem3<a></li>

          </ul>

          </li>

          <li><a href="#">Section2<a></li>
          <li><a href="#">Section3<a></li>
          <li><a href="#">Section4<a></li>
          <li><a href="#">Section5<a></li>
        </ul>
   </div> 
```

CSS：

```
 .spotlightmenu ul li ul{
        display:none;
}
.spotlightmenu ul li:hover > ul{
        display:block;
        margin:0;
        padding:0;
        position:absolute;
        float:none;
}
.spotlightmenu > ul > li{
        margin:10px;
        background-color: silver;
        border-radius:10px;
        display:inline;
} 
```

这是一个简单的例子，可以做你想做的事。您还可以查看以下链接：

[http://sixrevisions.com/css/30-exceptional-css-navigation-techniques](http://sixrevisions.com/css/30-exceptional-css-navigation-techniques/)

我建议您查看 jquery 和 css3 导航栏，它们确实很酷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T13:33:41.377

您正在寻找的导航栏的一个很好的演示（#copied，但忘记了源链接）。

希望你能有所了解。

## HTML

```
<nav>
<ul>
    <li><a href="">Home</a>
    <li><a href="">Tutorials »</a>
    <ul>
        <li><a href="">Photoshop</a>
        <li><a href="">Illustrator</a>
        <li><a href="">Web Designer »</a>
        <ul>
            <li><a href="">HTML »</a>
            <ul>
                <li><a href="">HTML4</a>
                <li><a href="">HTML5</a>
            </ul>
            <li><a href="">CSS</a>
        </ul>
    </ul>
    <li><a href="">Articles</a>
    <li><a href="">Inspiration</a>
</ul>
</nav> 
```

## CSS

```
nav ul ul{display:none;}
nav ul li:hover > ul{display:block;}
nav ul
{
    background: #efefef;
    background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);
    background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%);
    background: -webkit-linear-gradient(top, #efefef 0%, #bbbbbb 100%);
    box-shadow: 0 0 9 rgba(0,0,0,0.15);
    padding: 0 20px;
    border-radius: 10px;
    list-style: none;
    position: relative;
    display: inline-table;
}
nav ul:after{content: ""; clear:both; display:block;}
nav ul li {float:left;}
nav ul li:hover
{
    background: #4b545f;
    background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -webkit-linear-gradient(top, #4f5964 0%, #5f6975 40%);
}
nav ul li:hover a{color:#fff;}
nav ul li a{display:block; padding:25px 40px; color:#757575; text-decoration:none;}
nav ul ul{background:#5f6975; border-radius:0; padding:0;   position:absolute; top:100%;}
nav ul ul li
{
    float:none; border-top:1px solid #6b727c;
    border-bottom:1px solid #575f6a; position:relative;
}
nav ul ul li a{padding: 15px 40px; color: #fff;}
nav ul ul li a:hover{background:#4b545f;}
nav ul ul ul{position: absolute; left: 100%; top:0;} 
```

# excel - 没有工作簿打开时的excel vba followhyperlink方法

> ID：15893903
> 
> 赞同：1
> 
> 时间：2013-04-09T05:22:56.163
> 
> 标签：excel, vba, excel-2007

作为 xlam 插件的一部分，我在 excel 2007 中创建了一个自定义 UI。自定义选项卡包含一个按钮，单击该按钮可打开网站。

我用了`ThisWorkbook.followHyperlink "address"`

该加载项受密码保护，每当我在 xlam 加载项中单击按钮时，都会导致 excel 崩溃。当我在 .xlsm 文件中使用它时，一切正常。

我认为问题在于`ThisWorkbook`受密码保护。我可以`ActiveWorkbook`改用，但是当没有打开工作簿时应用程序会崩溃。

有什么建议可以解决这个问题吗？（取消保护文件不是一种选择）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:51:14.987

包括来自评论的信息+假设只有在任何活动工作簿打开时才需要这样做......而不是您可以尝试以如下方式更改`Thisworkbook`为`Activeworkbook`：

```
Sub FollowingHyperlink()

   'check if there is anything open
If Not ActiveWorkbook Is Nothing Then
    ActiveWorkbook.FollowHyperlink "http://www.stackoverflow.com"
Else
    'if not... it depends what you have and what you need
    'you could just open any new workbook
    '**This part of code edited**
    'or use this technique to navigate to page using IE:
    Dim ieAPP
    Set ieAPP = CreateObject("InternetExplorer.application")
    ieAPP.Visible = True
    ieAPP.navigate "http://www.stackoverflow.com"
End If

End Sub 
```

# php - Flot饼图从数据库中获取数据

> ID：15893905
> 
> 赞同：3
> 
> 时间：2013-04-09T05:23:20.870
> 
> 标签：php, javascript, mysql, jquery, flot

嗨，我正在尝试从 mysql 数据库中检索数据以创建 flot pie，我的数据看起来像这样

数组中的数据

> $数组 = 数组（）；
> 
> $Array[0] = 数组(); $Array[1] = 数组(); $Array[2] = 数组();
> 
> $Array[0]['label'] = 'A级'; $Array[1]['label'] = 'B级'; $Array[2]['label'] = 'C级';
> 
> $Array[0]['color'] = '#89A54E'; $Array[1]['color'] = '#AA4643'; $Array[2]['color'] = '#4572A7';
> 
> $Array[0]['data'][0] = array(1,700); $Array[1]['data'][0] = array(1,500); $Array[2]['data'][0] = array(1,600);
> 
> 回声 json_encode($Array);

和这个mysql

```
$server = "localhost";
$user="root";
$password="";
$database = "db_test";

$connection = mysql_connect($server,$user,$password);
$db = mysql_select_db($database,$connection);

$query = "SELECT * FROM pie";
$result = mysql_query($query);        

while ($record = mysql_fetch_assoc($result)) {
    $event_array[] = array(
        'label' => $record['label'],
        'color' => $record['color'],
        'data' => $record['data']
    );
}

echo json_encode($event_array); 
```

我的浮动 js

```
 $.ajax
({
    type:'POST', 
    dataType: 'JSON', 
    url:'data.php',
    success: function(data) 
    {    
        $.plot($('#Pie'), data, 
        {
            series: 
            {
                pie: 
                {
                    show: true,
                    innerRadius: 0.4,
                    radius: 1,
                    label: {
                        show: true,
                        radius: 1,
                        formatter: function(label, series) 
                        {
                            return "<div style='font-size:11px; text-align:center; padding:2px; color:white;'>"+label+"<br/>"
                            +Math.round(series.percent)+"%</div>";
                        },

                        background: 
                        {
                            opacity: 0.8
                        }
                    }
                }
            },

            grid: 
            {
                hoverable: true
            },

            legend: 
            {
                show: false
            }
        });
    }
}); 
```

它不会显示任何东西，有没有人可以帮助我。

# apache-flex - 适用于 Flex Mobile 的 Adob e Update 框架在桌面上不起作用。给出错误 1009

> ID：15893909
> 
> 赞同：0
> 
> 时间：2013-04-09T05:23:47.653
> 
> 标签：apache-flex, adobe, flash-builder, flex-mobile

以下是我的控制台上的输出：

[SWF] autoupdate.swf - 解压后 3,204,024 字节私有函数 onError(event:ErrorEvent):void [ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="Unhandled exception TypeError: Error #1009: Cannot access空对象引用的属性或方法。” 错误ID=1009]

我的代码在应用程序创建事件中 (s:ViewNavigatorApplication)

```
protected function viewnavigatorapplication1_creationCompleteHandler(event:FlexEvent):void
{
    setApplicationVersion(); 
    appUpdater.delay = 1;
    appUpdater.isDownloadProgressVisible = true;
    appUpdater.isDownloadUpdateVisible = true

    appUpdater.isInstallUpdateVisible = true;
    appUpdater.isFileUpdateVisible = true;

    appUpdater.updateURL = "http://localhost/updater/update.xml";           
    appUpdater.isCheckForUpdateVisible = false; // sajjad false initially 
    appUpdater.addEventListener(UpdateEvent.INITIALIZED, onUpdate);
    appUpdater.addEventListener(ErrorEvent.ERROR, onError);
    appUpdater.initialize();
}
private function onError(event:ErrorEvent):void
{
    //Alert.show(event.toString());
    trace("private function onError(event:ErrorEvent):void");
    trace(event);
}

private function onUpdate(event:UpdateEvent):void
{
    trace("private function onUpdate(event:UpdateEvent):void");
    appUpdater.checkNow(); // Go check for an update now         } 
} 
```

我添加了 [http://www.adobe.com/devnet/air/articles/air_update_framework.html](http://www.adobe.com/devnet/air/articles/air_update_framework.html)

是否是我试图将 flex 移动应用程序导出为桌面应用程序并且我需要创建一个仅桌面项目的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:23:32.003

更好的建议是您需要***为移动应用程序 (ViewNavigatorApplication) 和桌面 AIR(WindowedApplication) 创建一个单独的项目，***两者都是不同的。Air Application Updater Framework 仅支持 AIR(Desktop) 应用程序，如果您需要 Native Application 的应用程序更新程序，例如 .exe 或 .dmg(MAC)，您可以使用外部 Native 应用程序更新程序库。

**AIR 应用程序更新程序：**

[http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS5b3ccc516d4fbf351e63e3d118666ade46-7ff2.html#WS9CD40F06-4DD7-4230-B56A-88AA27541A1E](http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS5b3ccc516d4fbf351e63e3d118666ade46-7ff2.html#WS9CD40F06-4DD7-4230-B56A-88AA27541A1E)

**本机应用程序更新程序：**

[http://www.riaspace.com/2010/08/nativeapplicationupdater-updater-for-air-apps-packaged-with-native-installers/](http://www.riaspace.com/2010/08/nativeapplicationupdater-updater-for-air-apps-packaged-with-native-installers/) [http://code.google.com/p/nativeapplicationupdater/](http://code.google.com/p/nativeapplicationupdater/)

这些**更新程序框架不支持移动应用程序**。由于移动应用程序（apk-Android 和 ipa-iOS）是移动设备的本机安装程序，因此它们具有不同的更新机制，**您需要在 AppStore(iOS) 或 PlayStore(Android) 中启动新版本**。

请参阅此 Docx 以获取移动应用程序更新： [http ://help.adobe.com/en_US/air/build/WS901d38e593cd1bac-77bd3ea112e2c0a7ed0-8000.html](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac-77bd3ea112e2c0a7ed0-8000.html)

# asp.net-mvc - 从 signalR 调用控制器动作

> ID：15893912
> 
> 赞同：1
> 
> 时间：2013-04-09T05:24:05.153
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr, signalr-hub

有没有办法从 signalR 集线器调用 MVC 控制器操作？我注意到在执行该控制器上下文时为空。有没有办法做到这一点？或者可能是另一种解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:02:57.727

根据我对signalR的理解。我们应该已经实现了“Hub”抽象类。在控制器中应该已经实现了“控制器”，它也是抽象类。假设我们必须从信号集线器调用控制器的操作，该控制器必须实现集线器抽象类。但是我们不能在一个类中实现多个抽象类。因此，这不可能从 signalR 集线器调用控制器的操作。

但是您可以尝试如下：创建一个将实现“Hub”抽象类的类，并在该类中使用模拟创建控制器实例，然后从实现的“Hub”类调用您的操作。

# javascript - 在多个 div 之间自动淡入淡出/显示

> ID：15893913
> 
> 赞同：1
> 
> 时间：2013-04-09T05:24:12.917
> 
> 标签：javascript, jquery

我可以在我的网页上加载一个简单的 jQuery 脚本，它会在三个“盒子”div 中的每一个之间自动淡入淡出并重复？我希望它显示一个 div 5 秒，同时隐藏另外两个，然后运行 ​​1 秒淡入淡出过渡到下一个。

这三个 div 当前堆叠在彼此的顶部。

```
<div class="boxes">

<div class="box1">text1</div>
<div class="box2">text2</div>
<div class="box3">text3</div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:34:38.717

你可以试试这个：

```
$(document).ready(function () {
    var allBoxes = $("div.boxes").children("div");
    transitionBox(null, allBoxes.first());
});

function transitionBox(from, to) {
    function next() {
        var nextTo;
        if (to.is(":last-child")) {
            nextTo = to.closest(".boxes").children("div").first();
        } else {
            nextTo = to.next();
        }
        to.fadeIn(500, function () {
            setTimeout(function () {
                transitionBox(to, nextTo);
            }, 5000);
        });
    }

    if (from) {
        from.fadeOut(500, next);
    } else {
        next();
    }
} 
```

**演示：http:** [//jsfiddle.net/CYJLA/](http://jsfiddle.net/CYJLA/)

我确信它可以被清理和/或更高效，但我只是把它放在一起让它工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T05:28:31.340

[jQuery Cycle](http://jquery.malsup.com/cycle/)很容易设置并且可以做你所要求的。

这是一个例子：http: [//jsfiddle.net/n1ck/4PvU7/](http://jsfiddle.net/n1ck/4PvU7/)

```
$('.boxes').cycle({
    speed: 1000, // speed of the transition
    timeout: 5000 // milliseconds between slide transitions (0 to disable auto advance) 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:44:52.243

[http://jsfiddle.net/Bouillou/UQTY2/52/](http://jsfiddle.net/Bouillou/UQTY2/52/)

```
<div class="boxes">
    <div class="fade-effect box1">text1</div>
    <div class="fade-effect box2">text2</div>
    <div class="fade-effect box3">text3</div>
</div>

jQuery.fn.nextOrFirst = function (selector) {
    var next = this.next(selector);
    return (next.length) ? next : this.prevAll(selector).last();
}

$(document).ready(function () {
    $('div.fade-effect').fadeOut(500);

    var fadeInTime = 1000;
    var intervaltime = 5000;

    //First call
    setTimeout(function () {
        fadeMe($('div.fade-effect').first());
    }, intervaltime);

    function fadeMe(div) {
        div.fadeIn(fadeInTime, function () {
            div.fadeOut(fadeInTime);

            //Recursive call
            setTimeout(function () {
                fadeMe(div.nextOrFirst());
            }, intervaltime);
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:53:12.483

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
    </script>
    <script>
    $(document).ready(function(){
    $(".box2,.box3").css("display","none");
    var a=2;
    function recursive()
    {

    $(".box1,.box2,.box3").css("display","none");  
    $(".box"+a).fadeIn(1000);

    a=Number(a)+1; 
    if(a==4)
    a=1;
    }

    setInterval(function(){recursive()},5000);

    });
    </script>
    </head>
    <body>

    <div class="boxes">

    <div class="box1" c>text1</div>
    <div class="box2">text2</div>
    <div class="box3">text3</div>

    </div>

    </body>
    </html> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-09T05:35:12.770

这是最简单的解决方案之一：

**CSS：**

```
.boxes { position:relative; height:332px; width:500px; }
.boxes div { position:absolute; left:0; top:0; } 
```

**jQuery：**

```
$('.boxes div:gt(0)').hide();
setInterval(function(){
    $('.boxes :first-child').fadeOut().next('div').fadeIn().end().appendTo('.boxes');
}, 3000); 
```

`**[Working Demo](http://jsfiddle.net/qaUtC/)**`

# opencv - 如何将 Qt 4.8.3 和 OpenCV 2.4.3 的可执行文件从 Ubuntu 12.10 转移到 Fedora 14？

> ID：15893918
> 
> 赞同：2
> 
> 时间：2013-04-09T05:24:43.433
> 
> 标签：opencv, qt4, fedora, static-linking, ubuntu-12.10

我在 Ubuntu 12.10 中使用 Qt 4.8.3 和 OpenCv 2.4.3 编译了一个 Qt-GUI 项目。我需要将可执行文件传输到 Fedora 14 才能运行。但是，第一次，它给了我一个错误，无法打开文件并要求我安装 pypar2。我不知道它是什么，所以我只是安装了它，它不再给我任何错误。但是，当我双击可执行文件时，根本没有任何反应。

在我做所有这些之前，我安装了 Qt(qt-devel-4.7.4-7.fc14.i686 & qt-x11-4.7.4-7.fc14.i686) 和 OpenCV(opencv-devel-2.1) 的运行时库.0-6.fc14.i686) 在 fedora 14 中，但版本似乎与我在 Ubuntu 中的版本不匹配。

我还尝试构建项目的依赖项并将它们与项目的包含可执行文件的发布文件夹一起保存在一个文件夹中，我认为这是一种动态链接，也没有响应。我查看了一些静态链接解决方案，但不确定它们，因为我想知道它是否会影响我在 Ubuntu 中的原始配置。

谁能告诉我如何在 Fedora 14 中运行 Ubuntu 编译的可执行文件的步骤或解决方案？谢谢。

# amazon-s3 - CodeIgniter，在 Amazon EC2 实例上调整大小后定位缩略图时出现问题

> ID：15893920
> 
> 赞同：1
> 
> 时间：2013-04-09T05:24:48.463
> 
> 标签：amazon-s3, amazon-ec2, codeigniter-2

我在 Amazon EC2 上生成缩略图时遇到问题。

它在我的本地机器上运行良好，当我将它部署到 Amazon EC2 时出现错误

错误/警告是因为我尝试将缩略图上传到 Amazon S3 并且原始图像上传就好了。

```
Severity: User Warning
Message:  S3::inputFile(): Unable to open input file: /tmp/file_name_thumb.jpg
Filename: libraries/S3.php
Line Number: 263 
```

我的控制器的代码是

```
//This is the config for first image
$config['upload_path'] = sys_get_temp_dir(); // I tried switching this to '/tmp';
$config['allowed_types'] = 'jpg|png';
$config['max_size'] = '500';
$config['max_width'] = '0';
$config['max_height'] = '0';
$config['overwrite'] = TRUE;

$this->load->library('upload', $config);
$this->load->library('image_lib');

//Then I do upload
$data = array('upload_data' => $this->upload->data());

// 2nd Config for resize
$config = array(
   'source_image'   => $data['upload_data']['full_path'], //path of the uploaded image
   'new_image'      => sys_get_temp_dir(), //path to target resize, I tried switching this to '/tmp' also ;
   'create_thumb'   => true,
   'maintain_ratio' => true,
   'width'          => 300,
   'height'         => 300,
   'master_dim'     => 'width',);

$this->image_lib->initialize($config);
$this->image_lib->resize();

// Get the path of thumbnail
$fileTempThumbName = sys_get_temp_dir().'/'.$data['upload_data']['raw_name'].'_thumb'.$data['upload_data']['file_ext']; // I also tried replacing the sys_get_temp_dir() with '/tmp'. 
```

$fileTempThumbName 是我放入的参数

```
$this->s3->putObject($this->s3->inputFile($fileTempThumbName, false),$bucket,$name,$array(),$array()) 
```

我的本地在 OSX 10.8.2 上运行 XAMPP 和 PHP 版本 5.3.1 我的 CodeIgniter 是版本 2.1.3 和[Amazon S3 PHP 类 0.4.0](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)

我还有 chmod 777 我的 Amazon EC2 实例上的 tmp 文件夹。

当我检查 tmp 文件夹时，调整大小的图像不存在。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:12:20.337

问题是我没有在 Amazon EC2 上安装 GD。

After Installing it, everything works quite well.

# java - 如何在listView的每一行中一一显示上传过程的进度条？

> ID：15893932
> 
> 赞同：4
> 
> 时间：2013-04-09T05:25:45.740
> 
> 标签：java, android

我想在列表视图的每一行中设置一个进度条。进度条应该开始或显示上传文件的进度。我想在列表视图的每一行中设置这个进度条。并且进度条将一个一个开始进度在完成一个进度后的每一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:53:08.340

首先，您需要创建一个 custom `ArrayAdapter`，并为每个元素添加一个进度条，您可以通过将 a 添加`ProgressBar`到您充气的布局中来做到这一点。之后你会想要捕捉上传监听器，这样你就可以监听进度，并更新进度条。如果您希望他们一次上传一个，我建议向您的对象添加一个变量或创建一个`ArrayList<Boolean>`以检查以前的元素是否已上传。

[如何创建 ArrayAdapter 的示例](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/) 它还展示了如何为您将要膨胀的行创建布局。

# asp.net-mvc-4 - 如何创建派生自 AuthorizeAttribute 的自定义属性？

> ID：15893936
> 
> 赞同：0
> 
> 时间：2013-04-09T05:26:01.523
> 
> 标签：asp.net-mvc-4, custom-attributes, authorize

用户创建帐户后，他/她需要创建一个个人资料，他/她在其中提交一些将用于信件的信息。我有 2 个这样的控制器需要来自用户个人资料的信息。

我正在尝试创建一个属性，该属性将在让他访问任何操作方法之前检查用户是否已经创建了配置文件。如果没有，用户应该被重定向到**个人资料页面**。

```
public class NotAuthorizedWithoutProfileAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var userName = httpContext.Profile.UserName;
        var repository = new OWRepository();
        var userInfo = repository.GetUserInfo(userName);

        if (userInfo == null)
            return false;
        else
            return true;
    }
} 
```

我遇到的问题是关于用户名，即以下行

```
var userName = httpContext.Profile.UserName; 
```

为什么它给null？然而，这就是我获取登录用户名的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:49:20.483

我不知道您的个人资料配置是什么，但使用它`HttpContextBase.User.Identity.Name`来获取用户名是最安全的。

还可以考虑将您的班级名称更改为更短但也有意义的名称，例如`RequireProfileAttribute`.

# twitter - 无法发送直接消息

> ID：15893938
> 
> 赞同：0
> 
> 时间：2013-04-09T05:26:05.613
> 
> 标签：twitter

在我的应用中使用 MGTwitterEngine 发送直接消息时出错

错误域 = HTTP 代码 = 401“操作无法完成。（HTTP 错误 401。）”

我进行了很多搜索，但没有得到任何适当的解决方案。请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:26:21.083

401 错误似乎表明您有权限问题。响应的正文通常包含识别问题的有用信息。

您的应用程序的其他部分是否正常工作？如果不是，那么您的问题可能与 OAuth 有关。

# javascript - 使用javascript返回每个第三个奇数？

> ID：15893939
> 
> 赞同：0
> 
> 时间：2013-04-09T05:26:06.697
> 
> 标签：javascript, function, math, numbers, range

我要做的只是返回指定范围内的每三个奇数。

这对我来说有点奇怪，我尝试了一些不同的东西，但没有任何值得发布的东西，因为我的尝试没有产生接近我想要的结果，我觉得它超出了我目前的能力范围，任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:35:40.397

尝试

```
<script>
var range = 100;
var j = -1;
for (i = 0; i <= range; i++) {
    if (i % 2 == 1) {
        j++;
        if (j % 3 == 0) {
            alert(i);
        }
    }

 }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:40:47.627

我会避免给你一个直接的代码答案。（钓鱼>吃鱼）。

当您对一组具有相似因子的数字感兴趣时，一个好的经验法则是使用模运算符 (%)。（我不知道这在形式上是否正确，但这是我的想法）。

因此，如果您想要所有偶数，您可以这样做：

```
for (var i = 0; i < range; i++) {
    if (i % 2 == 0) print i;
} 
```

如果你只想要每秒偶数，你能看到如何添加一个计数器吗？最后，你能看到如何改变它，让你每三个奇数得到一个吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:03:01.033

您可以使用数组并过滤：

```
[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]
 .filter( 
       function(a){
        this.x += !!(a%2) ? 1 : 0; 
        return !!(a%3) && !!!(this.x%3);
       }, {x:0});
 //=> [5, 11, 17] 
```

[**也可以看看**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:41:29.033

首先通过模 2 找出范围中的第一个数字是奇数还是偶数。

```
function getEveryThirdOdd(lowerBound, upperBound) {
    var x = (lowerBound+1)%2;

    var list = [];
    var k = 0;

    for(var i = lowerBound+x; i<=upperBound; i=i+6) {
        list[k] = i;
        k++;
    }

    return list;
} 
```

此方法返回从 lowerBound 开始的每三个奇数（不是从零开始的每三个）。如您所见，下部和上部都包含在内。如果 lowerBound 是偶数，则与 2 的模运算将为零。这就是为什么我首先将 1 添加到下界。使其（偶数+1）=奇数。奇数模 2 等于 1，因此从 lowerBound+1 开始：

```
for(var i = lowerBound+x; ...) 
```

# xaml - 在 Windows Store Xaml 应用程序中保存通用列表

> ID：15893945
> 
> 赞同：0
> 
> 时间：2013-04-09T05:26:36.737
> 
> 标签：xaml, windows-store-apps, tombstoning

我正在尝试为 Windows 商店开发 xaml 应用程序。在开发过程中，我遇到了一个问题。我想将对象的通用列表保存到本地存储，但每次我尝试保存列表时，它都会触发“类型不支持”的异常。

任何人都可以帮助我在 Windows 8 应用程序的本地商店中保存和恢复通用列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:38:10.457

看看这篇文章[使用 Windows 运行时访问应用程序数据（Windows 应用商店应用程序） ，除了](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh464917.aspx)[Windows 运行时基本类型](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br205768.aspx)之外，您不能在应用程序设置中存储任何内容。我尝试为自己解决：a）使用[JSON.net](http://json.codeplex.com/)的序列化，在挂起时将数据序列化到文件并在启动时恢复它。b）使用[sqlite](http://sqlite.org/)和[sqlite-net](https://github.com/praeclarum/sqlite-net)在我的应用程序中使用简单的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:56:09.270

谢谢大家的建议。

我通过首先将数据序列化为 jsonstring 并将序列化的数据作为字符串保存在存储中并使用反序列化恢复数据来获得解决方案。

# jquery - Jquery为JSP变量赋值

> ID：15893946
> 
> 赞同：0
> 
> 时间：2013-04-09T05:26:44.887
> 
> 标签：jquery, jsp

我是 Jquery 的新手，我正在使用 Jquery 在下拉字段中填充值。

从下拉列表中选择一个值后，我将值分配给一个隐藏字段。

```
onSelect: function(index,row){
        var val = row.value; 
        alert('val '+val );
                $("#hid").val(val );    
    } 
```

如何将值分配给 JSP 变量，或者如果我使用`request.getParameter("hid");`，是否需要再次提交表单才能获取值？

**编辑 1**

```
$(function(){
$('#comb').combogrid({  
    panelWidth:200, 
    url: 'myservice',  
    idField:'id',  
    textField:'desc'  
    columns: [[  
                {field:'Id',title:'Id',width:20},  
                {field:'desc',title:'Desc',width:80}
            ]],
    onSelect: function(index,row){
        var val = row.value; 
        alert('val '+val );
                $("#hid").val(val );    
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:31:10.590

JSP 是在服务器端运行的 Java 代码。

JavaScript 在您的浏览器上运行。

因此，您不能使用 JavaScript 分配 JSP 变量。

表单提交或ajax 是这种情况的正确选择。

* * *

Ajax 代码片段。

```
onSelect: function(index, row) {

    $.ajax({
        url: '/your-url', // path to your url which gets this ajax request
        method: 'get', // or a http method you want to use
        data: {
            value: row.value
        },
        success: function(response) {
            alert('Boom!' + response);
        }
    });

} 
```

有关更多信息，请参阅[jQuery Ajax API 文档](http://api.jquery.com/jQuery.ajax/)。有很多选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:31:03.313

根据用户对下拉菜单的选择，如果你想在服务器端做一些事情，我建议发送 AJAX 调用或表单提交。

您将无法直接执行以下操作。

```
request.getParameter("hid"); 
```

# android - 为列表视图选择循环的最佳方法是什么

> ID：15893947
> 
> 赞同：0
> 
> 时间：2013-04-09T05:26:52.757
> 
> 标签：android, listview, checkbox

我有一个由复选框列表填充的列表视图..我想添加一个按钮，当我按下它时，它会为列表视图中选择的每个项目执行某项操作..找到选中哪个复选框的最佳方法是什么？我知道我可以使用`setOnCheckedChangeListener`，但是我如何为列表中的每个复选框调用 if？如果我创建一个数组字符串并且每次我的复选框选中它会将其文本添加到数组列表中，然后我可以为每个选定的项目执行循环吗？这是我的代码来填充列表视图

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_database_list);
    File path=new File(ClubCP.SDcardPath);
    List<String> file_lists =   main.directoryPath(path);
    ListView Database_list=(ListView)findViewById(R.id.database_list);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.database_list_item,R.id.chk_database_list_item,file_lists);
    ArrayAdapter<String> adapter1 = new InteractiveArrayAdapter(this,file_lists);
    Database_list.setAdapter(adapter1);

} 
```

我搜索了，我想我必须使用一个 ArrayAdapter ..我正在写它的类..这是我的类包 co.tosca.persianpoem;

```
import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;

public class InteractiveArrayAdapter extends ArrayAdapter<String> {

      private final List<String> list;
      private final Activity context;

      public InteractiveArrayAdapter(Activity context, List<String> list) {
        super(context, R.layout.database_list_item, list);
        this.context = context;
        this.list = list;
      }

      static class ViewHolder {
        protected CheckBox checkbox;
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
          LayoutInflater inflator = context.getLayoutInflater();
          view = inflator.inflate(R.layout.database_list_item, null);
          final ViewHolder viewHolder = new ViewHolder();
          viewHolder.checkbox = (CheckBox) view.findViewById(R.id.chk_database_list_item);
          viewHolder.checkbox
              .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                  ///do sth

                }
              });
          view.setTag(viewHolder);
          viewHolder.checkbox.setTag(list.get(position));
        } else {
          view = convertView;
          ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }

        return view;
      }
    } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:06:59.807

您需要继承 ArrayAdapter 并覆盖该`getView`方法，以便您可以`setOnClickListener`按视图调用。请参阅 ArrayAdapter 文档：[这里](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

```
public View getView (int position, View convertView, ViewGroup parent) {
    View itemView = convertView;
    if (itemView == null) {
        LayoutInflater li = LayoutInflater.from(getContext());
        itemView = li.inflate(R.layout.database_list_item);
    }

    CheckBox cb = (CheckBox)itemView.findViewById(R.id.checkbox); // whatever the id of checkbox is in layout
    cb.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            CheckBox myCb = (CheckBox)v;
            if (myCb.isChecked()) {
                // add position to array representing selected items
            } else {
                // remove position from array
            }
        }
    });

    return itemView;
} 
```

# objective-c - 无法在 iphone5 的 UIActionSheet 中对齐按钮文本

> ID：15893948
> 
> 赞同：1
> 
> 时间：2013-04-09T05:27:01.947
> 
> 标签：objective-c

如何在 iPhone5 的 UIActionSheet 中对齐按钮文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:33:36.247

使用这种方式，您可以在操作表上设置框架、更改字体以及按钮文本的对齐方式。

```
CGRect oldFrame = [(UILabel*)[[sheet subviews] objectAtIndex:0] frame];
UILabel *newTitle = [[[UILabel alloc] initWithFrame:oldFrame] autorelease];
newTitle.font = [UIFont boldSystemFontOfSize:17];
newTitle.textAlignment = UITextAlignmentCenter;
newTitle.backgroundColor = [UIColor clearColor];
newTitle.textColor = [UIColor whiteColor];
newTitle.text = @"Your Title";
[sheet addSubview:newTitle];

[sheet release]; 
```

# c# - 为什么 Jquery 弹出它没有在服务器上唤醒

> ID：15893950
> 
> 赞同：0
> 
> 时间：2013-04-09T05:27:20.353
> 
> 标签：c#, jquery, asp.net-mvc, razor

Jquery 对话框在 IIS 服务器上不起作用，但在我的本地机器上，下面的代码工作正常。在服务器中，映射的 url 不起作用，它会抛出类似“404 resource is not found”的错误。

> jQuery代码

```
$('#new dialog')dialog({
            auto-open: false,
            width: 345,

           top: 76,
            re sizable: false,
            title: 'Add Ad Details',
            modal: true,
            open: function (event, ui) {
                $(this)load("../Ad/ad Manage?atype=" + adtype);
            },
            buttons: false,
            position: {
                my: 'top',
                at: 'top',
                of: $('.maindiv')
            }

        });
        //---------------------------------
        $('.clk')click(function () {
            $('body,HTML').addClass('hide scrolls');
            $.ajaxSetup({
                // Disable caching of AJAX responses */
                cache: false
            });
            idimg = $(this).attr('id');
            $('#dialog').dialog('open');
        });
        $('.tp').click(function () {
            $('body,html').addClass('hidescrolls');
            $.ajaxSetup({
                // Disable caching of AJAX responses */
                cache: false
            });
            adtype = $(this).attr('id');
            $('#newdialog').dialog('open');
        }); 
```

上面的代码在我的本地机器上工作，但在服务器上它不工作，我收到类似“找不到资源错误”的错误，你能告诉我在上面的代码参考中我需要在哪里更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:34:58.280

不确定这是否正确，但在你的脚本中它说（'id​​'），你不应该在那里放一个#ID吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:38:40.133

用于创建 url 使用 MVC 函数：

```
var actionUrl = '@Url.Action("ACTION_NAME", "CONTROLLER_NAME", new { adType = "ADTYPE" })';
actionUrl = actionUrl.replace("ADTYPE",adtype); 
```

并使用它：

```
$(this)load(actionUrl); 
```

我观察到你传递查询字符串的一件事，`atype`而变量说它`adtype`应该与你期望它的服务器端函数相同。

# facebook - 从 facebook 新闻提要中删除的 API 调用 (facebook.stackowerflow)

> ID：15893953
> 
> 赞同：-1
> 
> 时间：2013-04-09T05:28:02.843
> 
> 标签：facebook, feed

我很抱歉交叉发布，但似乎我将问题发布到了一般的stackoverflow（而不是facebook）。（[从 facebook 新闻提要中删除的 API 调用](https://stackoverflow.com/questions/15887114/api-call-to-delete-from-facebook-news-feed)）

能否请你帮忙？当用户（假设是 Arnold）通过我的应用程序发布一些到他朋友的墙（给 Chuck）的链接时，FB 也会在 Chuck 的新闻提要中发布一个帖子（使用相同的链接）。问题是 - 是否有任何 FB API 功能可以从 Chuck 的新闻提要中删除消息？

一旦 Chuck 单击 Arnold 在 Chucks 墙上发布的链接，新闻源上的相同链接将不再有效。所以我需要删除新闻提要帖子（但不是墙上的帖子），因为链接是一次性的，但在新闻提要中看起来像“新”。

在主页部分下的 FB 文档（[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)）（此连接对应于新闻提要）我没有发现任何关于从新闻中删除帖子的能力的提及喂养。

但是，可以删除帖子。论坛上的某个地方提到了将 is_hide=true 设置为新闻提要帖子的功能。

亲爱的伙计们，您能否建议是否有隐藏/删除新闻提要帖子的功能？我在哪里可以找到有关此的文档？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:58:21.870

如果您拥有使用 http delete 方法的适当权限，则可以删除任何 Facebook Graph 对象（或者您可以将 method=delete 附加到您的 api 调用。

例如：http://www.facebook.com/[user_id]/posts/[post_id]?method=delete&access_token=[access_token]

# highcharts - 高架线宽

> ID：15893956
> 
> 赞同：4
> 
> 时间：2013-04-09T05:28:15.867
> 
> 标签：highcharts, highstock

我想设置我的图表 lineWidth 但它有一个奇怪的行为。

鼠标悬停时变为 lineWidth:2（默认），鼠标移出时变为我的 lineWidth 设置。

```
 plotOptions:{
            series:{
                lineWidth: 5
            }
        }, 
```

有什么问题？

演示：http: [//jsfiddle.net/bahar_Agi/HePx3/2/](http://jsfiddle.net/bahar_Agi/HePx3/2/) 谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T12:17:20.570

就在这里。正如我所说，您可以按照 API 中的说明配置状态。

见[http://jsfiddle.net/HePx3/4/](http://jsfiddle.net/HePx3/4/)

```
 plotOptions: {
        series: {
            lineWidth: 5,
            states: {
                hover: {
                    enabled: true,
                    lineWidth: 5
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:32:15.960

这是因为图表有状态。在这种情况下，默认值为 lineWidth:2px 的悬停状态。

您可以禁用状态或对其进行配置，请参阅：http: [//jsfiddle.net/HePx3/3/](http://jsfiddle.net/HePx3/3/)

```
 plotOptions: {
        series: {
            lineWidth: 5,
            states: {
                hover: {
                    enabled: false
                }
            }
        }
    }, 
```

对于 API，请参阅[http://api.highcharts.com/highcharts#plotOptions.line.states.hover](http://api.highcharts.com/highcharts#plotOptions.line.states.hover)

# c# - 在 C# 中用两个不同的表填充 DataGridView 内的 ComboBox？

> ID：15893964
> 
> 赞同：0
> 
> 时间：2013-04-09T05:28:49.367
> 
> 标签：c#, datagridview, filter, datatable, datagridviewcombobox

我能够用一个数据表填充 ComboBox。但我无法在运行时用另一个数据表填充同一个组合框。第一个数据表和第二个数据表包含具有相同列的不同数据。

```
 dtOne= abcd.RetrivData();
            cnsmNm.DataSource = dtOne;
            cnsmNm.DisplayMember = "One_Name";
            cnsmNm.ValueMember = "One_Id"; 
```

第二个数据表

```
 dtSecond= efgh.RetrivData();
            cnsmNm.DataSource = dtSecond;
            cnsmNm.DisplayMember = "One_Name";
            cnsmNm.ValueMember = "One_Id"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:41:43.623

您可以使用[DataTable.Merge 方法](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)。像这样：

```
dtOne.Merge(dtSecond);
cnsmNm.DataSource = dtOne; 
```

# regex - 正则表达式行不包含单词？

> ID：15893966
> 
> 赞同：-1
> 
> 时间：2013-04-09T05:28:59.020
> 
> 标签：regex

我希望有人可以帮助我解决可能是一个简单的正则表达式问题。我需要匹配包含一组单词但不包含另一个单词的行。

例如，我正在搜索的文件包含以下内容：

> 鲍勃有一顶帽子。
> 比尔有一顶帽子。
> 弗雷德有一顶帽子。

我想要做的是匹配所有有“有帽子”的行。除非该行还包含 bob。

那有意义吗 ？

这必须是基本的正则表达式，而不是代码或任何东西，因为我将其输入到文本文件解析程序中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T05:33:41.070

```
^(?=.*\bhas a hat\b)(?!.*\bBob\b).* 
```

`has a hat`如果它包含任何地方并且不包含`Bob`任何地方（以任何顺序） ，则匹配整行。

当然，它也不会匹配像`Fred has a hat. Bob doesn't`.

# php - 存储在excel中的日期在读取和存储在mysql中时变成数字

> ID：15893967
> 
> 赞同：0
> 
> 时间：2013-04-09T05:29:06.797
> 
> 标签：php, mysql, excel, date, format

我正在使用脚本从 excel 文件中读取数据并将其存储在 mysql 数据库表中。除了以“mm-dd-YY”格式存储在excel中的“日期”字段外，它工作正常。问题是“2014 年 2 月 26 日”在 php 中变为“41696”。

我想将此字段以“mm-dd-YY”格式存储在 mysql 数据库表中..

我怎样才能解决这个问题？任何帮助都非常感谢..在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:44:11.350

用函数格式化日期`date`并用 转换为字符串`strtotime`怎么样？

就像是：

```
$str = '02/26/2014';
$date = date('Y-m-d H:i:s',strtotime($str));

echo $date; 
```

这将输出：

`2014-02-26 00:00:00`

在您的情况下，您只需要以不同的方式使用功能：

```
$str = '02/26/2014';
$date = date('m-d-Y',strtotime($str));

echo $date; 
```

这将改为输出：

`02-26-2014`

这样日期就可以存储在数据库中了。

无论如何，通过查看您如何导入 excel 数据会有所帮助。

# html - 如何选择选中的复选框行

> ID：15893968
> 
> 赞同：0
> 
> 时间：2013-04-09T05:29:08.320
> 
> 标签：html, checkbox

我的html页面中有一个表格mysql，每一行都有一个复选框，如果我选中了一些复选框，我怎么能输出我选中的行。现在我知道如何输出所有行，但我不知道如何选择我检查的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:32:57.877

为所有复选框赋予相同的名称，并为每个复选框分配不同的值，例如行主键。

在 servlet 中使用`request.getParameterValues()`，您将获得一个仅包含检查值的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:45:41.190

有更多你可以在 javascript 中检查表行。例子：

```
var allRows = $('#yourTableId tr');
for(var i=0; i<allRows.length; i++) {
   if(allRows[i].find('input:checkbox').checked) {
   //selected row allRows[i]. And you can get value checkbox      allRows[i].find('input:checkbox').value
   }
} 
```

或使用每个循环 jquery：

```
$('#yourTableId tr').each(function(index)) {
   if($(this).find('input:checkbox').checked) {
       //selected row $(this). And you can get value checkbox   $(this).find('input:checkbox').value
   }
} 
```

并在 stackoverflow 中针对此类问题提供更多答案：

[使用jquery获取具有特定类名的所有选中复选框](https://stackoverflow.com/questions/5450104/using-jquery-getting-all-checked-checkboxes-with-a-certain-class-name)

[Jquery在表格行中找到一个复选框](https://stackoverflow.com/questions/5047153/jquery-find-a-checkbox-inside-a-table-row)

[如何检查是否在jQuery中选中了复选框？](https://stackoverflow.com/questions/901712/check-checkbox-checked-property-using-jquery)

# mysql - 多个表的简单内部联接出现问题

> ID：15893969
> 
> 赞同：0
> 
> 时间：2013-04-09T05:29:14.473
> 
> 标签：mysql, sql, inner-join

**编辑：**做了一点改变。添加表`db_supplier (Supplier_ID, Supply_Speed_ID)`并更改`lookup_supply_speed (Supplier_ID, Supplier_Speed)`为`lookup_supply_speed (Supplier_Speed_ID, Supplier_Speed)`

我的桌子：

```
db_supply
 -----------------------------------------------
| Supplier_ID | Supply_Type_ID | Itm_ID | Stock |
|-----------------------------------------------|
| 1           | 1              | 33     | 3     |
|-----------------------------------------------|
| 2           | 2              | 28     | 1     |
 -----------------------------------------------

db_supplier
 ----------------------------------------
| Supplier_ID | Supply_Speed_ID | Etc... |
|----------------------------------------|
| 1           | 1               |        |
|----------------------------------------|
| 2           | 2               |        |
 ----------------------------------------

lookup_supplier_name
 -----------------------------
| Supplier_ID | Supplier_Name |
|-----------------------------|
| 1           | Walter        |
|-----------------------------|
| 2           | Jesse         |
 -----------------------------

lookup_supply_type
 -----------------------------------
| Supply_Type_ID | Supply_Type_Name |
|-----------------------------------|
| 1              | Import           |
|-----------------------------------|
| 2              | Delivery         |
 -----------------------------------

lookup_itm
 ------------------------
| Itm_ID | Itm_Name      |
|------------------------|
| 33     | Pickles       |
|------------------------|
| 28     | Burger        |
 ------------------------

lookup_supply_speed
 ------------------------------------
| Supplier_Speed_ID | Supplier_Speed |
|------------------------------------|
| 1                 | Fast           |
|------------------------------------|
| 2                 | Slow           |
 ------------------------------------

A query for 'Burger' will output this table:
 ----------------------------------------------------------------------
| Supplier_Name | Supply_Type_Name | Itm_Name | Stock | Supplier_Speed |
|----------------------------------------------------------------------|
| Jesse         | Delivery         | Burger   | 1     | Slow           |
 ---------------------------------------------------------------------- 
```

**问题：**我不能生成一个 SQL 语句来获取我的`Supplier_Speed`列，因为`lookup_supply_speed`它没有任何 FK 关联`db_supply`（所有其他表都有）。

下面的 SQL 会给我这个：（我们查询`Itm_Name`例如`Burger`）

```
 -----------------------------------------------------
| Supplier_Name | Supply_Type_Name | Itm_Name | Stock |
|-----------------------------------------------------|
| Jesse         | Delivery         | Burger   | 1     |
 -----------------------------------------------------
SELECT  b.Supplier_Name,
        c.Supply_Type_Name,
        d.Itm_Name,
        a.Stock
FROM    db_supply a
        INNER JOIN lookup_supplier_name b
            ON a.Supplier_ID = b.Supplier_ID
        INNER JOIN lookup_supply_type c
            ON a.Supply_Type_ID = c.Supply_Type_ID
        INNER JOIN lookup_itm d
            ON a.Itm_ID = d.Itm_ID
WHERE   d.Itm_Name = 'Burger' 
```

如何修改它以便我可以加入`lookup_supplier`via`lookup_supply_speed` **然后`db_supplier`**将其加入其余部分？

SQLFiddle：[http ://www.sqlfiddle.com/#!2/9635d/3](http://www.sqlfiddle.com/#!2/9635d/3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:31:58.493

可以引用子句`from`中的表以外的其他表：`on`

```
INNER JOIN lookup_supply_speed ss
    ON ss.Supplier_ID = b.Supplier_ID 
```

（您别名`b`为lookup_supplier。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:55:01.180

这个怎么样？

```
SELECT  f.Supplier_Name,
        b.Supplier_ID,
        c.Supply_Type_Name,
        d.Itm_Name,
        a.Stock,
        e.Supplier_Speed
FROM    db_supply a
        INNER JOIN db_supplier b
            ON a.Supplier_ID = b.Supplier_ID
        INNER JOIN lookup_supplier_name f
            ON f.supplier_ID = b.supplier_ID
        INNER JOIN lookup_supply_type c
            ON a.Supply_Type_ID = c.Supply_Type_ID
        INNER JOIN lookup_itm d
            ON a.Itm_ID = d.Itm_ID
        INNER JOIN lookup_supply_speed e
            ON e.Supplier_Speed_ID = b.Supply_Speed_ID
WHERE   d.Itm_Name = 'Burger' 
```

[http://www.sqlfiddle.com/#!2/be1a2/3](http://www.sqlfiddle.com/#!2/be1a2/3)

# c# - Outlook 更改 & 到 &

> ID：15893970
> 
> 赞同：0
> 
> 时间：2013-04-09T05:29:14.753
> 
> 标签：c#, asp-classic, hyperlink, outlook, html-encode

我有一个 ASP 网站，我想使用模板发送电子邮件。在模板中，我在`<a href="">` *（%CODE% 和 %EMAIL%）*中有两个占位符，它们应该是查询字符串

它看起来有点像这样

`<a href="http://www.foo.com?qs1=example&Code=%CODE%&Email=%EMAIL%" />`

我使用`.Replacement()`Method 来替换这两个字段。

问题是收到邮件后，&字符被替换，`&amp;`查询字符串失效。

我不知道这是 Outlook 问题（2013 年）还是可以在代码中修复。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:41:59.540

＆符号在这种情况下无效。

如果您在 Outlook 可以之前自己“编码”它们......它会为您将其切换回正常状态：

```
<a href="http://www.foo.com?qs1=example&amp;Code=%CODE%&amp;Email=%EMAIL%" /> 
```

所以**你**使用`amp;`，Outlook 会修复它。浏览器做同样的事情。

即使它在页面源代码中看起来不像..如果您单击链接，`amp;`它将被替换为普通的＆符号。

# android - android意图vs观察者

> ID：15893974
> 
> 赞同：2
> 
> 时间：2013-04-09T05:30:07.473
> 
> 标签：android, android-intent

我想知道什么时候我应该在我的 Android 应用程序中支持基于意图的方法而不是经典的 oberserver 设计模式。

使用意图在一项活动中发布事件是否明智？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:52:21.727

**定义**

观察员维护一份家属名单以通知变更。另一方面，Intent 是对操作的抽象描述。它可以被相同或多个应用程序接收以执行任务。

**同步 VS 异步**

观察者是同步的，因为变化是正确的。Intent 是异步的。

**捆绑**

观察者绑定是编译时。另一方面，意图绑定在运行时

**安全的**

对于内部通信观察者非常安全，因为 Intent 将广播消息并且任何人都可以接收消息。

**Intent 在 Android 平台上通过 Observer 提供额外的功能**

*   与第三方应用程序和进程通信。
*   接收系统通知以执行任务
*   第三方应用程序重用应用程序模块。（前拍照）
*   Intent 保持不变，您的应用可以在以后检索数据（Sticky Intent）

*使用意图在一项活动中发布事件是否明智？*

这将取决于您的要求。查看您的要求，看看需要哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:04:54.140

我认为不是因为新的意图通常会带来新的活动，除非您的活动已被声明为单顶活动。无论如何，意图与观察者不太相似。处理程序可以是更好的近似值。

# css - div中文本的垂直居中不起作用

> ID：15893978
> 
> 赞同：2
> 
> 时间：2013-04-09T05:30:24.677
> 
> 标签：css, jquery-mobile

我已经转向[本指南](http://designshack.net/articles/css/how-to-center-anything-with-css/)来解决我在 div 中垂直居中文本的问题。而且我相信理解它所说的，但它仍然不起作用。

```
.number {
    position: relative;
    height:50px;
    margin: -25px 0 0 0;
    top: 50%;
    background-color: #00ff00;
} 
```

这是[fiddle](http://jsfiddle.net/5A9HP/3/)，它重现了问题。我希望绿色区域（.number）在按钮（.numberElement）内垂直居中

我的问题在哪里？我认为 jQuery Mobile 让事情变得复杂并创建了我没有预见到的结构......

谢谢！

桑德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:08:15.523

您需要对您的 css 进行一些更改，如下所示：

```
.numberElement {
    position: absolute;
    width:30%;
    height:200px;
    margin:0px;
    display:table;
}

.numberElement .ui-btn-inner {
    display:table-cell;
    vertical-align:middle;
} 
```

`**[Working Demo](http://jsfiddle.net/5A9HP/4/)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:04:51.360

正如我在您的小提琴中看到的那样，您的 .number 顶级属性无法正常工作。尝试将其从顶部更改为边缘顶部。它将以 margin-top:60px 为中心；

也不要忘记删除 .number 中的行

```
margin: -25px 0 0 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:06:39.343

这是我认为的正确答案

```
.numberElement {
    position: absolute;
    width:30%;
    height:200px;
    margin:0px;
}

.number {
    position: relative;
    height:50px;
    margin: 50px 0;
    line-height:50px;
    top: 50%;
    background-color: #00ff00;
}

#grid {
    position:absolute;
    padding:0px;
    margin:0px;
    border:solid 1px #ff0000;
    height:400px;
    width:400px;
} 
```

# java - 扩展 DefaultChannelGroup

> ID：15893979
> 
> 赞同：0
> 
> 时间：2013-04-09T05:30:33.467
> 
> 标签：java, netty

我想创建一个工作起来很像 Def​​aultChannelGroup 的类，但有一个区别是正在写入的消息属于一个连接，并且与其关联的通道不会将消息写回它。

想想聊天应用程序，我们应该写入所有其他通道，而不是属于编写消息的用户的通道。

查看 DefaultChannelGroup 的实现，似乎我可以添加一个名为 write 的新方法，该方法需要给定的通道和消息，并将迭代非服务器通道并跳过等于给定通道的通道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:08:56.127

您可以扩展 DefaultChannelGroup 以按照您的概述进行操作，但通道组已经是一个迭代器和一组通道。如果你已经有一个频道，你可以直接写入它（即你不需要从 ChannelGroup 中获取它），或者，如果出于某种原因，你真的想从频道组中获取它，你可以调用[ChannelGroup.find(channel.getId())](http://netty.io/3.6/api/org/jboss/netty/channel/group/DefaultChannelGroup.html#find%28java.lang.Integer%29)。

我想如果你这样做是为了缩小到单一渠道的目的，那是化妆品的问题。我不是在平移它....个人喜好！如果它对你更好，那就去吧。

更有趣的场景是对 DefautChannelGroup 进行真正有用的扩展，即为各个通道分配一组编码为位掩码的属性。然后你可能可以做一些事情，比如告诉 BitMaskChannelGroup 使用提供的位掩码参数将此消息写入所有频道，这可能是*居住在新泽西州的所有 21 岁以上的聊天室用户*的编码，或者*所有制造商是 Cisco 的路由设备*。

# backbone.js - 如何通过不重新呈现整个列表来从集合和集合视图中删除项目？是否可以？

> ID：15893980
> 
> 赞同：1
> 
> 时间：2013-04-09T05:30:34.043
> 
> 标签：backbone.js, backbone-views

嗨，我对backbone.js 有点陌生

有没有办法从集合中删除一个项目（并且只是那个项目）并且不必刷新列表。相反，仅从视图和集合中删除该项目，并且视图集合不会发生刷新/重新渲染。或者甚至有可能吗？

这是我的代码片段：

```
var DateModel = Backbone.Model.extend({
    defaults: function() {
        return {
            index: '',
            valueFrom: '',
            valueTo: '',
            status: '',
            showText: '',
            text: ''
        }
    },
});

var DateList = Backbone.Collection.extend({
    model: DateModel
});

var dateList = new DateList();

var DateView = Backbone.View.extend({
    model: new DateModel(),
...
});

var DateListView = Backbone.View.extend({
    model: dateList,
    el: $('#date-list-container'),
    initialize: function() {
        this.listenTo(this.model, 'add', this.render);
        this.listenTo(this.model, 'remove', this.render);
        this.listenTo(this.model, 'reset', this.render);
    },
    render: function() {
                // code for rendering here...
                _.each(this.model.models, function(date){...});
            }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:36:19.217

您可以通过将事件侦听器更改`this.render`为自定义侦听器函数来执行此操作，该函数接收作为参数删除的模型，而不是重新渲染整个视图，只需从视图中删除表示该模型的 HTML 元素。这样，您不必总是重新渲染*整个*视图，这可能会很昂贵，而只需更改已更改的部分。

例如，这一行：

```
this.listenTo(this.model, 'remove', this.render); 
```

将被替换为接收**remove**事件参数的不同事件处理函数：

> **remove** (model, collection, options) — 当模型从集合中移除时。

所以你可能有一个事件监听器函数，比如：

```
modelRemoved: function(model, collection, options) {
  // code to find the HTML element for 'model' and remove it from the DOM
} 
```

然后将其用作**删除**事件的事件处理程序：

```
this.listenTo(this.model, 'remove', this.modelRemoved); 
```

# encryption - 加密 Oracle-Ds.xml 并在 jdbc 代码中解密

> ID：15893981
> 
> 赞同：0
> 
> 时间：2013-04-09T05:30:34.933
> 
> 标签：encryption, jdbc, jboss

服务器：JBOSS 5.x 以下功能是用我的会话 bean 编写的（ejb3 架构）

```
@Remote(OracleDsInteractionRemote.class)
@Local(OracleDsInteractionLocal.class)

@Stateless
@RemoteBinding(jndiBinding="OracleDsInteractionBean/remote")
@LocalBinding(jndiBinding="OracleDsInteractionBean/local")

public class OracleDsInteractionBean implements OracleDsInteractionRemote,OracleDsInteractionLocal
{
@EJB    
@Resource(mappedName="java:/EncryptedDS") 
private DataSource ds1;

 public int getAllValues() throws Exception
{
    System.out.println("************************* ");
    Connection conn = ds1.getConnection();
    Statement st = conn.createStatement();
    String query = "SELECT count(*) FROM DETAILS_DATA";
    ResultSet rs = st.executeQuery(query);
    while (rs.next())
    {
        return rs.getInt(1);
    }
    return -1;

}
} 
```

此函数使用 jdbc 连接从 details_data 表中检索行数。数据源对象 ds1 映射为“EncryptedDS”。“EncryptedDS”的条目在 oracle-ds.xml 中定义如下。

```
<?xml version="1.0" encoding="UTF-8"?>
 <!-- ===================================================================== -->
 <!--                                                                       -->
 <!--  JBoss Server Configuration                                           -->
 <datasources>
   <xa-datasource>
     <jndi-name>EncryptedDS</jndi-name>
     <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>

     <xa-datasource-property name="URL">jdbc:oracle:thin:@182.158.93.26:1521:dbSid</xa-datasource-property>

     <xa-datasource-property name="User">Test</xa-datasource-property>
     <xa-datasource-property name="Password">pass123</xa-datasource-property>

     <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>

        <metadata>
           <type-mapping>Oracle11g</type-mapping>
        </metadata>
    </xa-datasource>
   </datasources> 
```

但问题是任何人都可以进入 $JBOSS_HOME/server/default/deploy 目录并从 oracle-ds.xml 中找到“EncryptedDS”配置。（在 oracle-ds.xml 中，完整的数据库信息以文本形式写入（DatabaseServerIP,Port ,Sid,SchemaName,SchemaPassword))... 如何在 oracle-ds.xml 中存储加密的数据库信息？我的 java 代码将如何解码以建立 jdbc 连接？

# java - 没有 WAR 文件的 Servlet 3.0？

> ID：15893982
> 
> 赞同：4
> 
> 时间：2013-04-09T05:30:39.233
> 
> 标签：java, tomcat, web-applications, jetty, servlet-3.0

是否可以通过以下方式完全启动 webapp：

1）没有战争文件：

[http://stephenh.github.io/2009/01/10/war-less-dev-with-jetty.html](http://stephenh.github.io/2009/01/10/war-less-dev-with-jetty.html) [http://www.jamesward.com/2011/08/23/war-less-java-web -应用](http://www.jamesward.com/2011/08/23/war-less-java-web-apps)

2）没有web.xml（即Servlet-3.0）

3) 从嵌入式 Web 容器（例如，Tomcat 或 Jetty...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:16:07.660

示例项目：[https ://github.com/jetty-project/embedded-servlet-3.0](https://github.com/jetty-project/embedded-servlet-3.0)

你仍然需要 a `WEB-INF/web.xml`，但[它可以是空](https://github.com/jetty-project/embedded-servlet-3.0/blob/master/src/main/webapp/WEB-INF/web.xml)的。这样就可以知道 servlet 支持级别和元数据完整标志。

示例：空的 Servlet 3.0 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    metadata-complete="false"
    version="3.0">
</web-app> 
```

然后，您可以按照[EmbedMe.java](https://github.com/jetty-project/embedded-servlet-3.0/blob/master/src/test/java/com/company/foo/EmbedMe.java)获取有关如何设置的示例。

```
public class EmbedMe {
    public static void main(String[] args) throws Exception {
        int port = 8080;
        Server server = new Server(port);

        String wardir = "target/sample-webapp-1-SNAPSHOT";

        WebAppContext context = new WebAppContext();
        context.setResourceBase(wardir);
        context.setDescriptor(wardir + "WEB-INF/web.xml");
        context.setConfigurations(new Configuration[] {
                new AnnotationConfiguration(), new WebXmlConfiguration(),
                new WebInfConfiguration(), new TagLibConfiguration(),
                new PlusConfiguration(), new MetaInfConfiguration(),
                new FragmentConfiguration(), new EnvConfiguration() });

        context.setContextPath("/");
        context.setParentLoaderPriority(true);
        server.setHandler(context);
        server.start();
        server.join();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T04:02:54.947

我是怎么做到的（嵌入 SpringMVC + Jetty，没有 web.xml 没有战争文件）：

使用 Spring`@WebAppConfiguration`引导您`WebApplicationContext`的`MockServletContext`,

然后只需`new DispatcherServlet(WebApplicationContext)`通过 Jetty 的 ServletContextHandler/ServletHolder 机制注册您的。简单的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-01T15:07:02.380

可以使用不需要 WAR 或任何 XML 的 Jetty 实现嵌入式服务器。您只需指定带注释的类的位置，添加一个额外的类路径。

应该从您可以命名的 main 调用此方法`Server.java`：

```
private static void startServer() throws Exception {
    final org.eclipse.jetty.server.Server server = new org.eclipse.jetty.server.Server(7070);
    final WebAppContext context = new WebAppContext("/", "/");
    context.setConfigurations(new Configuration[] { new AnnotationConfiguration(), new WebInfConfiguration() });
    context.setExtraClasspath("build/classes/main/com/example/servlet");
    server.setHandler(context);
    server.start();
    server.join();
} 
```

我的`src`结构是：

```
-main
  -java
    -com.example
      -json
      -servlet
      -filter
      -util
      Server.java 
```

我希望看到与 Tomcat 类似的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:03:40.757

[请参阅BalusC](http://balusc.blogspot.mx/)的答案，了解[仅使用 Java SE API 的 Java 中的简单 HTTP 服务器](https://stackoverflow.com/questions/3732109/simple-http-server-in-java-using-only-java-se-api)。该示例正在使用该类[`com.sun.net.httpserver.HttpServer`](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html)。

# backbone.js - 有没有办法区分基于用户的模型更改和来自数据库的更改？

> ID：15893984
> 
> 赞同：1
> 
> 时间：2013-04-09T05:30:56.447
> 
> 标签：backbone.js

每次发生变化时，我都想在模型上触发自动保存，但前提是变化来自 UI（即视图）。我的意思是，如果更改来自数据库，那么再次保存它没有意义，它只是来自数据库......

但是`fetch`并且`save`可以触发`change`事件（`fetch`因为它可能带来模型的不同状态，并且可以为新创建的`save`模型带来`id`）

所以在这种情况`change`下，我想知道是什么导致了这种变化。

例如，这是来自视图的呼叫吗？：

```
this.model.set("foo", "bar"); //triggers a change event as foo's value changed 
```

还是同步操作的结果？：

```
model.fetch(); //triggers a change event as the model changed in the DB
model.save(); //triggers a change event as the id was empty 
```

有没有办法区分它们？

`set`一旦我想到的解决方案是用一种方法包装对模型的视图调用`setAttribute`，并触发一个自定义`changeDueToUIAction`事件，但我确信这已经解决了，而且我确信以更好的方式......

还是我完全错过了一些东西，问题是我问错了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:24:36.600

我想说有几个自定义解决方案或多或少涉及样板。还有一个简单的，尽管仍然添加了一些样板。
（没有对 Backbone 进行任何重大更改）您无法知道更改的来源（考虑一下，您将如何在*Model#set*方法中访问它？）。您在侦听器中可以访问的是 2 个对象。第一个是改变的模型。其次是调用 set 方法时传递的选项。所以我想你可以做这样的事情：

```
// in the view
this.model.set('foo', 'bar', {'isFromUI': true});

// in your model
this.listenTo(this, 'change', function(model, flags) {
  if(flags && flags.isFromUI) this.save();
}); 
```

# angularjs - 如何推迟视图渲染，直到从外部源加载某些数据？

> ID：15893985
> 
> 赞同：13
> 
> 时间：2013-04-09T05:30:58.987
> 
> 标签：angularjs, angularjs-scope

`$rootScope`我的应用程序在初始化时需要从外部源加载一些数据。由于数据来自外部来源，因此无法保证加载数据所需的时间。我想推迟视图的渲染，直到数据加载成功。有没有办法做到这一点？

请注意，我没有为此应用程序使用 Angular 路由。

这是一个[简化的演示](http://plnkr.co/edit/qsR6zABnL3TOHeFiJ4bs?p=preview)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T17:39:44.257

在不使用路由解析的情况下完成异步操作之前，没有一种干净的方法可以阻止视图呈现，但是您可以编写自定义指令来完成相同的工作。

但是，如果这只是为了用户体验，那么使用 ngShow 会很顺利：

```
<div ng-show="user.name">
  <!-- content won't be visible until data is set -->
</div> 
```

这是一个更新的 Plunker：[http ://plnkr.co/edit/MXoQNWHvyp9aOXg0QOoC?p=preview](http://plnkr.co/edit/MXoQNWHvyp9aOXg0QOoC?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T23:07:42.940

对我来说，这不仅仅是 UI 闪烁的问题。因为在渲染之前没有加载数据，所以我的引导选择没有选择关联的数据值。我能够通过在包装下拉选择的容器中放置一个“ng-if”来解决问题，如下所示：

```
<div class='bootstrap-select-dropdown-wrapper' ng-if='listofthings.length > 0'>...</div> 
```

希望这可以帮助遇到类似问题的人（注意：我还将 nya-bootstrap-select 模块合并到我的项目中 - bower install nya-bootstrap-select）

# php - 如何使用从 mysql 中提取的 javascript 以格式显示数据？

> ID：15893991
> 
> 赞同：0
> 
> 时间：2013-04-09T05:31:13.117
> 
> 标签：php, javascript, html

这就是我从数据库中提取数据以及当“异常”出现时我想在新行中显示时呈现数据的内容。但我想以适当的方式在单个 sring 中显示它们

```
The requirements of this chapter apply to the following: (1) New buildings or portions thereof used as health care occupancies (see 1.4.1) (2) Additions made to, or used as, a health care occupancy (see 4.6.6 and 18.1.1.4) Exception: The requirement of 18.1.1.1.1 shall not apply to additions classified as occupancies other than health care that are separated from the health care occupancy in accordance with 18.1.2.1(2) and conform to the requirements for the specific occupancy in accordance with Chapters 12 through 17 and Chapters 20 through 42, as appropriate.(3) Alterations, modernizations, or renovations of existing health care occupancies (see 4.6.7 and 18.1.1.4) (4) Existing buildings or portions thereof upon change of occupancy to a health care occupancy (see 4.6.11) Exception*: Facilities where the authority having jurisdiction has determined equivalent safety has been provided in accordance with Section 1.5. 
```

我想按以下顺序动态显示

本章的要求适用于以下情况：

```
(1) New buildings or portions thereof used as health care occupancies (see 1.4.1)

 (2) Additions made to, or used as, a health care occupancy (see 4.6.6 and 18.1.1.4) 

Exception: The requirement of 18.1.1.1.1 shall not apply to additions classified as occupancies other than health care that are separated from the health care occupancy in accordance with 18.1.2.1(2) and conform to the requirements for the specific occupancy in accordance with Chapters 12 through 17 and Chapters 20 through 42, as appropriate.

(3) Alterations, modernizations, or renovations of existing health care occupancies (see 4.6.7 and 18.1.1.4) 

(4) Existing buildings or portions thereof upon change of occupancy to a health care occupancy (see 4.6.11) Exception*: Facilities where the authority having jurisdiction has determined equivalent safety has been provided in accordance with Section 1.5. 
```

虽然我在 javascript 中执行此操作。我在 section_data.title 中获得此内容的位置。我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:49:10.657

我有一种感觉，你的换行符不在 html 中。在将其编码为 JSON 之前尝试`str_replace('\n', '<br>', $queryResultString);`在您的 PHP 中使用（将 $queryResultString 替换为您通过 JSON 发送的任何字符串）。

让我知道这是否有效，或者我们可以尝试其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:52:14.637

使用JavaScript方法“String[] split(String regex)”将字符串按照正则表达式拆分并存储在数组中。然后可以添加断线标签对其进行格式化。

# iphone - 为什么我们调用 doesNotRecognizeSelector: 方法？

> ID：15893996
> 
> 赞同：13
> 
> 时间：2013-04-09T05:31:29.143
> 
> 标签：iphone, ios, objective-c, nsobject

我正在使用套接字编程。我只是想清除与我从[-mobileorchard.com-Chatty](http://www.mobileorchard.com/wp-content/uploads/2009/05/chatty.zip)下载的代码相关的疑问。在研发期间，我在**ChatRoomViewController.m**文件中看到了一个函数调用

```
 [chatRoom broadcastChatMessage:input.text fromUser:[AppConfig getInstance].name]; 
```

当我在**Room.m** 文件中看到，用于执行上述调用；它是

```
- (void)broadcastChatMessage:(NSString*)message fromUser:(NSString*)name
{
    // Crude way to emulate an "abstract" class
    [self doesNotRecognizeSelector:_cmd];
} 
```

我在谷歌上搜索了“doesNotRecognizeSelector:”，根据[Apple](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/doesNotRecognizeSelector:)的错误处理说明，“只要对象收到无法响应或转发的 aSelector 消息，运行时系统就会调用此方法。” 我的问题是为什么开发人员调用**broadcastChatMessage:fromUser:**函数，如果它在那里没有使用并处理哪个方法的“未找到选择器”异常？

根据[Stackovrflow](https://stackoverflow.com/q/1034373/1030951)，它用于创建抽象类，根据这个[Question](https://stackoverflow.com/q/2854522/1030951)，它是为了避免“不完整的实现”警告。

我仍然不明白为什么在[Chatty Code](http://www.mobileorchard.com/wp-content/uploads/2009/05/chatty.zip)中使用该方法，请帮助我了解使用该方法的原因。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T05:39:50.267

这是存在于每个`NSObject`派生对象上的方法，当在运行时调用中无法识别方法时，它会触发异常路径。例如，如果您尝试将消息发送到被`NSString`调用的`-foo`，它将最终到达那里，因为这不是`NSString`.

在这种情况下，Chatty 类`Room`是一个从未直接使用的基类。`LocalRoom`并`RemoteRoom`从中派生，并且这两个类都提供了`-broadcastChatMessage:fromUser`. 从来没有人调用过那个基类版本，但是为了“完整性”，程序员保证子类必须通过实现方法来覆盖它，然后转身调用它来触发异常。

问题是，这并不是特别惯用的 Objective-C。“抽象”类是来自 C++ 和其他语言的概念；它是仅作为子类的“模式”存在的基类。（在 ObjC 中，这通常是通过`@protocol`在没有有意义的状态时创建一个正式的状态来完成的，因为那里（大多数情况下）不在这里）。

请注意，调用`-doesNotRecognizeSelector:`是任意的。这里没有必要避免编译器警告（因为该方法实际上已实现）并且原始作者可以轻松地直接抛出异常，或者什么都不做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T05:39:54.017

在我看来，您已经回答了自己的问题。在 Objective-C 中没有创建抽象类的方法，因此最接近的方法是拥有覆盖抛出异常所需的方法。如果你在子类中重写了这个方法，那么`doesNotRecognizeSelector:`将不再被调用。基本上，这是一种让开发人员承诺在其子类中实现此方法的方法。

此外，正如您所提到的，如果您不将其放入，那么编译器将发出警告，因为头文件中定义的方法不存在任何实现。这将执行与不实现它相同的行为，但编译器会意识到您是故意这样做的。

# java - 字符串切换语句

> ID：15893997
> 
> 赞同：0
> 
> 时间：2013-04-09T05:31:30.663
> 
> 标签：java, string, switch-statement, incompatibility

我正在开发一个 Java 类。在使用具有 String 数据类型的 Switch 语句时，我能得到一些帮助吗？

这是我的代码：

```
 String testString = "Nut";
    switch (testString)
    {
        case "Nut":
            if(NutCount < NutMaxCount) 
                NutCount += 1;
            break;
        case "Caramel":
            if(CaramelCount < CaramelMaxCount)
                CaramelCount += 1;
            break; 
        case "Chocolate":
            if(ChocolateCount < ChocolateMaxCount)
                ChocolateCount += 1;
            break;
        case "Marzipan":
            if(MarzipanCount < MarzipanMaxCount)
                MarzipanCount += 1;
            break;                        
    } 
```

这是我得到的错误：

不兼容的类型 - 找到 java.lang.String 但预期为 int。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:37:22.610

带字符串的开关盒仅适用于[**Java7**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

或者，您可以使用[**enum**](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)代替任何早于**`Java7`**

```
String testString = "Nut";
ValueEnum enumval = ValueEnum.fromString(testString);
switch (enumval) 
{
   case Nut:
            if(NutCount < NutMaxCount) 
                NutCount += 1;
            break;
   case Caramel:
            if(CaramelCount < CaramelMaxCount)
                CaramelCount += 1;
            break; 
   case Chocolate:
            if(ChocolateCount < ChocolateMaxCount)
                ChocolateCount += 1;
            break;
   case Marzipan:
            if(MarzipanCount < MarzipanMaxCount)
                MarzipanCount += 1;
            break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:36:25.887

此链接将引导您访问 Java 7： [http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

您将需要 Java 7，因此您可以`Strings`在 switch 语句中使用。

在 IDE 中创建新项目时（图中的 ide 为 eclispse）确保选择以 1.7 结尾的 Java

![在此处输入图像描述](https://i.stack.imgur.com/P7126.png)

或者

只需让每个字符串对应一个`int`值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:36:46.757

`String type isn't allowed to use as switch condition before JDK7`，
所以请使用`Integer variable`to 代替。

# sql - 带有可选参数的 where 子句中的条件

> ID：15893999
> 
> 赞同：1
> 
> 时间：2013-04-09T05:31:36.697
> 
> 标签：sql, sql-server-2008, stored-procedures

我的存储过程中有输入参数。例如，

```
DECLARE @fromDate DateTime = NULL 
DECLARE @toDate DateTime = NULL
DECLARE @Id int = NULL 
```

我想在 where 子句中写一个条件，例如...如果提供了 fromDate，则必须在 @fromDate 上进行搜索。如果未提供@fromDate，则检查@Id 变量，如果它不为空，则根据@Id 搜索...

就像是...

```
 where 
   CASE 
   when @fromDate is not null
  THEN (@FromDate is null or ([Created] between @FromDate and @ToDate))
    ELSE (@requestId is null or Id=@requestId) 
```

以下解决方案存在一个问题...如果同时提供了@fromDate 和@Id，那么这将对它们进行检测，并且没有任何返回.....条件应该是...如果@fromDate 被给予优先权到@fromDate 即使提供了@Id 并且结果不能依赖于@Id 参数....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:24:35.847

因为您依赖于这两个参数，所以您可以在以下条件下*同时*使用它们：

```
where
(@FromDate is null or ([Created] between @FromDate and @ToDate)) 
or
((@requestId is null or Id=@requestId) 
    and @FromDate is null) ----mix @requestId & @FromDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:36:14.270

你是这个意思吗？请检查：

```
WHERE [Created] BETWEEN 
    (CASE WHEN @FromDate IS NOT NULL THEN @FromDate ELSE [Created] END) AND
    (CASE WHEN @ToDate IS NOT NULL THEN @ToDate ELSE [Created] END) AND
    Id=(CASE WHEN @requestId IS NOT NULL THEN @requestId ELSE Id END) 
```