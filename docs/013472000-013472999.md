# StackOverflow 问答 13472000-13472999

# objective-c - 在 iOS 中使用 JSON 创建动态表单

> ID：13472001
> 
> 赞同：3
> 
> 时间：2012-11-20T11:14:02.920
> 
> 标签：objective-c, json, ios5

我需要使用 JSON 创建一个动态表单。我已经解析了 JSON，但我不知道如何动态创建表单。请建议一些代码或教程。

```
[
    {
        "cssClass": "head"
    },
    {
        "cssClass": "input_text",
        "values": "Text Field",
        "fieldsize": "small",
        "required": "undefined",
        "prevalue": "This is text field",
        "autocaps": "none",
        "fieldesc": "text field description"
    },
    {
        "cssClass": "number",
        "values": "Number ",
        "fieldsize": "small",
        "required": "required",
        "prevalue": "This is Number Field",
        "autocaps": "capitalize",
        "fieldesc": "number field description"
    },
    {
        "cssClass": "email",
        "values": "Email",
        "fieldsize": "small",
        "required": "required",
        "prevalue": "This is email field",
        "autocaps": "none",
        "fieldesc": "email field description"
    },
    {
        "cssClass": "password",
        "values": "Password",
        "fieldsize": "small",
        "required": "required",
        "prevalue": "password",
        "autocaps": "none",
        "fieldesc": "password field description"
    },
    {
        "cssClass": "date",
        "values": "Date",
        "fieldsize": "medium",
        "required": "required",
        "prevalue": "datefield",
        "autocaps": "uppercase",
        "fieldesc": "date field description"
    },
    {
        "cssClass": "time",
        "values": "Time",
        "fieldsize": "small",
        "required": "undefined",
        "prevalue": "time field",
        "autocaps": "uppercase",
        "fieldesc": "time field description"
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:08:37.513

首先，您需要将 JSON 解析为字典，然后使用每个字典条目实例化自定义对象：

```
@interface FormItem : NSObject

@property (nonatomic, retain) NSString * cssClass;
@property (nonatomic, retain) NSString * values;
//etc

+(id)initWithDictionary:(NSDictionary*)dictionary;

@end

@implementation FormItem

+(id)initWithDictionary:(NSDictionary*)dictionary {
    if (self = [super init]) {
        _cssClass = [dictionary valueForKey:@"cssClass"];
        //etc
    }
}

@end 
```

一旦你在 NSArray 中拥有这些对象，例如视图控制器中的 self.formItems，你将使用该列表来绑定你的 tableView。在 cellForRowAtIndexPath: 中，您需要将项目拉出：

```
FormItem *currentItem = self.formItems[indexPath.row]; 
```

此时，您将希望动态创建 UITextField 或您需要的任何其他控件并将它们添加到表格单元格中：

```
if ([currentItem.values isEqualToString:@"Text Field"] {
    UITextField *text = [[UITextField alloc] init...];
    //setup
    [cell.contentView addSubview:text];
} 
```

您可以将这些东西抽象到您的 FormItem 类中，但这是一种快速的方法。

# php - 从 FTP 返回文件树

> ID：13472003
> 
> 赞同：3
> 
> 时间：2012-11-20T11:14:07.927
> 
> 标签：php, file, web-applications, ftp

我正在尝试列出来自 FTP 服务器的文件。我想得到一组子目录和其中的文件作为树，如下所示：

```
folder1
       file1.txt
       file2.txt
folder2
       folder2a
               file1.txt
               file2.txt
               file.3txt
       folder2b
              file1.txt 
```

现在我的数组将类似于

```
[folder1]=>array(file1.txt,file2.txt) 
[folder2]=>array([folder2a]=>array(file1.txt,file2txt,file3.txt)
[folder2b]=>array(file1.txt)) 
```

注意：上面的数组可能不是确切的语法，只是为了让我了解我在寻找什么。我尝试了 ftp_nlist() 但似乎只返回文件和文件夹，而不是子文件夹中的文件。这是我的代码外观的示例

```
 // set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// get contents of the ftp directory
$contents = ftp_nlist($conn_id, ".");

// output $contents
var_dump($contents); 
```

上面它只列出文件夹而不是文件。任何人都知道如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T11:45:21.567

`ftp_nlist()`不递归地获取文件和目录，它只返回指定路径的所有文件和文件夹。您可以编写一个函数以递归方式获取结果。这是某人编写的递归函数示例，我在 PHP **[ftp_nlist()](http://php.net/manual/en/function.ftp-nlist.php)**文档中找到：

```
<?php 
/** 
 * ftpRecursiveFileListing 
 * 
 * Get a recursive listing of all files in all subfolders given an ftp handle and path 
 * 
 * @param resource $ftpConnection  the ftp connection handle 
 * @param string $path  the folder/directory path 
 * @return array $allFiles the list of files in the format: directory => $filename 
 * @author Niklas Berglund 
 * @author Vijay Mahrra 
 */ 
function ftpRecursiveFileListing($ftpConnection, $path) { 
    static $allFiles = array(); 
    $contents = ftp_nlist($ftpConnection, $path); 

    foreach($contents as $currentFile) { 
        // assuming its a folder if there's no dot in the name 
        if (strpos($currentFile, '.') === false) { 
            ftpRecursiveFileListing($ftpConnection, $currentFile); 
        } 
        $allFiles[$path][] = substr($currentFile, strlen($path) + 1); 
    } 
    return $allFiles; 
} 
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T13:11:21.237

```
function remotedirectory($directory)
{
    global $ftp;
    $basedir = "/public_html";
    $files = ftp_nlist($ftp,$basedir.$directory);
    foreach($files as $key => $file)
    {
        if(is_dir("ftp://username:password@doamin/".$basedir.$directory."/".$file))
        {
            $arrfile[] = remotedirectory($directory."/".$file);
        }else{
            $arrfile[] = $directory.'/'.$file;
        }
    }
    return $arrfile;
} 
```

# sql - 无法取消计划传播 (Oracle AQ)

> ID：13472005
> 
> 赞同：1
> 
> 时间：2012-11-20T11:14:14.633
> 
> 标签：sql, oracle, queuing

我在 Oracle DB 中设置了一个队列，已经使用了一段时间，但是传播（到远程服务器）停止工作，现在突然任何操作挂起：我无法禁用/取消计划传播，无法停止/放弃队列本身。查询只挂了几个小时。我该如何清除这东西？

# windows-phone-7 - windows phone 中的重定向页面

> ID：13472009
> 
> 赞同：0
> 
> 时间：2012-11-20T11:14:31.520
> 
> 标签：windows-phone-7, xaml, windows-phone

在我的`mainpage.xaml`中，我检查了本地存储，如果 GetAccept 方法返回 false，我需要重定向到，`Mentions.xaml`但问题是 NavigationService 在此步骤中为 Null，因此我捕获了 nullreferenceexecption

```
 public MainPage()
        {
            CacheManager cache = new CacheManager();
            if (!cache.GetAccept())
            {
                NavigationService.Navigate(new Uri("/Views/AppBar/Mentions.xaml", UriKind.RelativeOrAbsolute));
            }
            InitializeComponent();
            } 
```

我该如何做这个重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:31:11.950

首先按照这个[链接](http://msdn.microsoft.com/en-us/library/ms750478.aspx)

当`NavigationService`当前 Page 引发其 Load 事件时，将实例化，在您的解决方案中，您使用 Un initialized`NavigationService`这就是您的`NullReference Exception`. 因此，如果您手动执行页面的加载事件，那么您将获得 NavigationService 实例，以下代码是手动加载页面加载事件的片段，请在您的 pages`InitializeComponent()`方法之后编写

```
 this.Loaded += (sender, event) =>
  {
      var navigationService = NavigationService;
      navigationService.Navigate(new Uri("/Views/AppBar/Mentions.xaml", UriKind.RelativeOrAbsolute));
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:37:55.870

看来您输入了 += = (sender, events) 您需要删除额外的 =，如下所示。

```
public MainPage() {

    InitializeComponent();
    CacheManager cache = new CacheManager();
    if (!cache.GetAccept())
    {            this.Loaded += (sender, event) =>{
        NavigationService.Navigate(new Uri("/Views/AppBar/Mentions.xaml", UriKind.RelativeOrAbsolute)); };
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:13:20.507

您需要使语法正确。尝试复制我在下面放置的内容。

```
this.Loaded += 
(
    (sender, event) =>
    {
        NavigationService.Navigate(new Uri("/Views/AppBar/Mentions.xaml",
            UriKind.RelativeOrAbsolute))
    }
); 
```

您缺少额外的括号，并且在其中添加了一个额外的分号。

# android - Android 如何管理他们的动画不卡顿？

> ID：13472014
> 
> 赞同：2
> 
> 时间：2012-11-20T11:14:57.347
> 
> 标签：android, animation, view

Android 的 API 15 Animation 类包含以下内容：

```
public boolean getTransformation(long currentTime, Transformation outTransformation) {
      ... code ...
} 
```

该方法计算增量时间并将其发送到插值器，该插值器又根据动画运行的时间返回一个值，该值又应用于变换。

当我构建自己的自定义视图时，我使用 post(Runnable) 方法，然后调用我的逻辑更新、无效，然后在不满足某些条件时再次 post(Runnable)。逻辑调用需要 1 毫秒，覆盖的 onDraw(Canvas) 也需要 1 毫秒。困扰我的是 invalidate() 调用，它经常使我的增量时间上升到 40 以上的值（40 毫秒是每秒 25 帧），并且不建议获得高于该值的值。使用 delta time 来计算在哪里绘制下一帧通常会卡顿并且是不可能的。我不必使用增量时间，而是依赖手机单独更新视图的速度，使其在不同手机上变得越来越慢，这不是一个好主意。

SurfaceViews 是我无法使用的东西，因为它们的结构与其他视图没有凝聚力（主要是 Z 深度问题）。

现在我的问题是，Android 是如何解决动画的？他们不会口吃，他们使用增量时间。他们一定有某种魔法，但我似乎找不到在哪里。很感谢任何形式的帮助。

# node.js - 通过将 http 服务器传送到 http 请求的简单 node.js 代理

> ID：13472024
> 
> 赞同：16
> 
> 时间：2012-11-20T11:15:43.263
> 
> 标签：node.js, http, proxy

尝试通过制作一个简单的 http 代理服务器来了解有关 node.js 的更多信息。使用场景很简单：用户->代理->服务器->代理->用户

以下代码一直有效，直到最后一步。找不到将连接器的输出通过管道传回给用户的方法。

```
#!/usr/bin/env node

var
    url = require('url'),
    http = require('http'),
    acceptor = http.createServer().listen(3128);

acceptor.on('request', function(request, response) {
    console.log('request ' + request.url);
    request.pause();
    var options = url.parse(request.url);
    options.headers = request.headers;
    options.method = request.method;
    options.agent = false;

    var connector = http.request(options);
    request.pipe(connector);
    request.resume();
//  connector.pipe(response); // doesn't work
//  connector.pipe(request); // doesn't work either
}); 
```

使用 tcpflow 我看到来自浏览器的传入请求，然后是传出代理请求，然后是服务器对代理的响应。不知何故，我无法设法将响应重新传输回浏览器。

用管道实现这个逻辑的正确方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-20T12:19:53.487

您不必“暂停”，只需“管道”即可

```
var connector = http.request(options, function(res) {
  res.pipe(response, {end:true});//tell 'response' end=true
});
request.pipe(connector, {end:true}); 
```

http 请求在您告诉它“结束”之前不会完成；

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-20T12:10:48.780

好的。知道了。

更新：注意！如评论中所述，此示例不再有效。很可能是由于 Streams2 API 更改（节点 0.9+）

回到客户端的管道必须在连接器的回调中进行，如下所示：

```
#!/usr/bin/env node

var
    url = require('url'),
    http = require('http'),
    acceptor = http.createServer().listen(3128);

acceptor.on('request', function(request, response) {
    console.log('request ' + request.url);
    request.pause();
    var options = url.parse(request.url);
    options.headers = request.headers;
    options.method = request.method;
    options.agent = false;

    var connector = http.request(options, function(serverResponse) {
            serverResponse.pause();
            response.writeHeader(serverResponse.statusCode, serverResponse.headers);
            serverResponse.pipe(response);
            serverResponse.resume();
    });
    request.pipe(connector);
    request.resume();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-06T13:37:14.797

我使用这篇文章中的示例来代理 http/s 请求。面对cookie在某处丢失的问题。

因此，要解决此问题，您需要处理来自代理响应的标头。

在工作示例下方：

```
req = service.request(options, function(res) {
    response.writeHead(res.statusCode, res.headers);
    return res.pipe(response, {end: true});
});
request.pipe(req, {end: true}); 
```

# c# - 如何使用 Selenium Webdriver (C#) 获取页面名称？

> ID：13472026
> 
> 赞同：6
> 
> 时间：2012-11-20T11:15:50.040
> 
> 标签：c#, selenium, selenium-webdriver

如何使用 Selenium C# Webdriver 获取页面标题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T11:19:48.113

或者我认为

```
driver.Title; 
```

也有效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:00:11.730

driver.Title 是获取页面标题的简单方法。它返回一个字符串。

```
string myTitle = driver.Title; 
```

如果您希望标题作为 IWebElement，那么您也可以通过搜索 DOM 来获取它。

```
IWebElement myTitle = driver.FindElement(By.TagName("title")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-24T11:00:53.220

您可以使用以下命令获取页面的标题：-driver.Title;

下面我写了一个小测试，可以帮助你理解它是如何工作的。

```
public void someTest()
{
 driver.Navigate().GoToUrl("http://google.com");
 String title=driver.Title;
} 
```

# cordova - 当我以 USB 模式连接黑莓设备时无法使用 phonegap 应用程序

> ID：13472031
> 
> 赞同：0
> 
> 时间：2012-11-20T11:16:06.093
> 
> 标签：cordova, blackberry

我有一个 phonegap 应用程序（使用 HTML5 和 jQueryMobile）在我的黑莓设备上运行良好。我以 USB（或同步）模式将我的黑莓设备连接到 PC，在 PC 中打开手机内存并开始使用该应用程序。我得到以下错误显示！

未知错误错误：SECURITY_ERR DOM 异常 18

当我的应用程序尝试进​​行数据库事务时，应用程序也开始抛出 SQl 异常 1。

如果我选择“仅充电”模式连接到 PC，则不会发生此错误！

我不知道为什么会发生这种情况。请有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:34:12.190

我自己没有遇到这个错误，但我看到一个帖子说这是因为当设备插入（或类似的东西）时设备无法写入存储卡。这就是为什么它在您处于“仅充电”模式时起作用的原因。这个错误是完全正常的。希望这对您有所启发，就像我说的那样，这就是我读到的。

# asp.net-mvc - Asp.net MVC 数据注释将 0123 视为非整数

> ID：13472036
> 
> 赞同：0
> 
> 时间：2012-11-20T11:16:19.510
> 
> 标签：asp.net-mvc, asp.net-mvc-4, integer, range, data-annotations

相关：[为什么java中没有（123 == 0123）？](https://stackoverflow.com/questions/10461490/is-not-123-0123-in-java)

对于电话号码，我正在使用 MVC 数据注释进行验证，如下所示

```
[RegularExpression(@"^[\d]{3}$", ErrorMessage = "*")]
[Range(0, 999, ErrorMessage = "*")]
public int IntlCode { get; set; } 
```

值`012`在客户端验证正常但在服务器端没有验证，有人可以解释为什么或什么是错的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:28:02.767

因为它是一个`int`它正在剥离`0`导致你的正则表达式失败的前导

尝试

```
[RegularExpression(@"^\d{1,3}$", ErrorMessage = "*")] 
```

# c# - 控制台应用程序打印“失败：”

> ID：13472042
> 
> 赞同：4
> 
> 时间：2012-11-20T11:16:37.037
> 
> 标签：c#, .net, assert, tracelistener

我有一个控制台应用程序，它读取一些数据，将其填充到类似字典的结构中，对其进行操作，然后生成一些输出文件。

但是，在打印输出时，有时会打印：

```
Fail: 
```

真正不应该的地方。我在 Google 上找不到任何东西（搜索量不大），当​​我在我的解决方案中搜索字符串“fail”时我找不到任何东西（所以这不是我的代码在做的）。

我不知道为什么会发生这种情况，相关块确实经常产生异常，但我捕获了它们，当我使用它`Console.WriteLine`而不是`Trace.WriteLine`它时工作正常，尽管我无法轻易验证这是原因。

我不知道如何解决这个问题。

什么可能导致`Fail:`打印到控制台？

我如何设置断点来停止它？

我什至从哪里开始寻找解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:10:52.397

多亏了阿德里亚诺的直觉，我能够怀疑断言是罪魁祸首。

事实上，打印神秘消息时正在运行的代码块`Fail:`确实调用了这样的断言：

```
Debug.Assert(myString.Length > 0); 
```

显然，“Fail:”应该被理解为“Assertion fail”。我可以通过将其更改为来验证这一点：

```
Debug.Assert(myString.Length > 0, "Assertion failed with myString == \"" + myString + "\"."); 
```

这将`Fail:`消息更改为`Fail: Assertion failed with myString == ""`并消除了混淆，并让我处理了进一步调试的问题（因为我知道断言是生成失败消息的确切行）。

事实证明，在调试模式下，Visual Studio 不会在断言失败时中断，而是简单地将失败消息打印到输出（[此处](https://stackoverflow.com/questions/4826241/break-the-debugger-on-assertion-failed)讨论了启用中断）。就我而言，我一直在使用跟踪侦听器，以便将程序的输出打印到文件以及控制台中。为此，我使用了以下初始化代码：

```
 private static void PrepareListeners()
    {
        Trace.Listeners.Clear();

        var logPath = "/path/to/my/file.txt";
        File.Delete(logPath);
        var textListener = new TextWriterTraceListener(logPath);

        var consoleListener = new ConsoleTraceListener(false);
        consoleListener.TraceOutputOptions = TraceOptions.DateTime;

        Trace.Listeners.Add(textListener);
        Trace.Listeners.Add(consoleListener);
        Trace.AutoFlush = true;
    } 
```

之后我一直在用`Trace.WriteLine`. 跟踪侦听器似乎也在接收断言失败消息。（它们出现在我的日志文件和控制台中。）

# magento - 获取捆绑产品子产品的图像，当前返回占位符

> ID：13472043
> 
> 赞同：0
> 
> 时间：2012-11-20T11:16:41.070
> 
> 标签：magento

## 我的问题：

我需要从类提供的缩减产品对象中检索主要产品图像：`Mage_Bundle_Model_Resource_Price_Index`

我的代码演示了这个问题：

```
$_product = $this->getProduct();
$_options = Mage::helper('core')->decorateArray($this->getOptions());

foreach($_options as $_option):
    $_selections = $_option->getSelections();

    foreach ($_option->getSelections() as $tmpsel) {
        var_dump($tmpsel->getImageUrl());
    } 
```

返回我的占位符图像：

`http://dev.dev/media/catalog/product/cache/7/image/265x/0dc2d03fe217f8c83829496872af24a0/placeholder/default/logo_3.jpg`

## 我可怕而骇人的工作：

为了获得正确的图像 URL，我求助于加载一个全新的产品对象，这非常低效。

```
foreach ($_option->getSelections() as $tmpsel) {
    $product = Mage::getModel("catalog/product")->load($tmpsel->getId());
    $image = Mage::helper('catalog/image')->init($product, 'image');        
    var_dump($image."");
} 
```

这正确返回： `http://dev.dev/media/catalog/product/cache/7/image/0dc2d03fe217f8c83829496872af24a0/M/P/MP1428219-107-Main.jpg`

## 我想做的事：

我希望能够`catalog/image`在选择中使用帮助器（$tmpsel），但是当我尝试时，我最终会再次获得占位符图像。

```
foreach ($_option->getSelections() as $tmpsel) {
    $image = Mage::helper('catalog/image')->init($tmpsel, 'image');      
    var_dump($image."");
} 
```

## 额外信息：

*我想到的任何可以帮助的东西我都会在这里添加*

### 削减产品对象包括对图像的一些参考

```
 'small_image' => string '/M/P/MP1428219-107-Main.jpg'
  'thumbnail' => string '/M/P/MP1428219-107-Main.jpg' 
```

### getSelection() 的描述

在：./app/code/core/Mage/Bundle/Model/Resource/Price/Index.php

`* Retrieve bundle options with selections and prices by product`

该函数使用低级 SQL 来生成集合，因此如果需要，我可以随时扩展它以添加选项，但不确定哪些选项。

* * *

感谢您的阅读，希望有人能给我一个这样做的好方法，会不断更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:01:05.440

Init() 方法需要一个产品对象

```
init(Mage_Catalog_Model_Product $product, $attributeName, $imageFile=null) 
```

尝试

```
<?php echo $this->helper('catalog/image')->init($tmpsel, 'small_image')->resize(40,40); ?> 
```

你没有'image'，但你有'small_image'属性

请参阅[Magento - 如何检索捆绑的选项图像](https://stackoverflow.com/questions/11318915/magento-how-to-retreive-bundled-option-images)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T13:33:36.367

要获取完整的网址，您可以使用以下代码：

```
Mage::getSingleton('catalog/product_media_config')->getMediaUrl($product->getImage()); 
```

限制是只带主图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:00:58.633

哦，哇，我想我可以感谢堆栈溢出让我写下我的想法。

比较完整产品对象和半产品对象后，我可以看到我调用了不正确的属性名称`catalog/image`

```
$image = Mage::helper('catalog/image')->init($tmpsel, 'image'); 
```

本来应该

```
$image = Mage::helper('catalog/image')->init($tmpsel, 'small_image'); 
```

# android - Android kSOAP：在 SAP 上调用 WebService 以获取复杂参数

> ID：13472044
> 
> 赞同：1
> 
> 时间：2012-11-20T11:16:58.550
> 
> 标签：android, sap, ksoap

我正在尝试在 SAP 系统上调用 Web 服务，但在尝试传递复杂参数时遇到问题。

Web 服务有 3 个输入参数。2 字符串和一个复杂参数，它引用包含多个字段的 SAP 结构。这 3 个输入参数称为：-

函数参数

当我调用 Web 服务时，Funtion 和 Repid 被传入 ok，但是，没有任何东西被传递到名为 Parameters 的输入参数中。

我有以下代码来设置复杂的参数输入：-

```
 final ReportExecutionParametersDefinition exeParams = new ReportExecutionParametersDefinition();

    exeParams.setSelname("P_AUART");
    exeParams.setKind("P");
    exeParams.setSign("I");
    exeParams.setOption("EQ");
    exeParams.setLow("ZA");
    exeParams.setHigh(" ");

    final PropertyInfo pinfo = new PropertyInfo();

    pinfo.name = "Parameters";
    pinfo.setValue(exeParams);
    pinfo.type = exeParams.getClass(); 
```

以下代码用于调用 Web 服务：-

```
 KSOAPFactory soapFact = new KSOAPFactory();

            soapFact.initialiseSOAPEnvelope(NAMESPACE, METHOD_NAME, URL);

            soapFact.addProperty("Function", "EXE");
            soapFact.addProperty(pinfo);
            soapFact.addProperty("Repid", reportDef.getReportHeader()
                    .getReport());

            try {
                resp = soapFact.invokeSOAP();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

当我查看 SAP 时，“参数”输入参数中没有传递任何值。

有没有人使用 kSOAP 来调用 SAP Web 服务来填充复杂的输入参数。

任何帮助深表感谢。

谢谢

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:56:43.943

为自己解决了。我从未意识到我需要填充覆盖方法 getProperty、getPropertyCount 和 getPropertyInfo

希望这可以帮助其他有类似问题的人。

# flash - 在 JW Player 控制栏中启用缓冲流进度

> ID：13472046
> 
> 赞同：1
> 
> 时间：2012-11-20T11:17:01.473
> 
> 标签：flash, jwplayer, mediaplayerservices

我有一个 rtmp 点播流（由 Wowza 服务器提供），我已经使用 JWPlayer 对其进行了配置。它运行良好，我想在 JWplayer 控制栏中添加吹流进度，就像 YouTube 视频播放器缓冲流进度一样。

这是我的 JW 播放器代码：

```
<body>
    <div id='mediaspace'>JW test Player with buffer enabled</div>
    <script type='text/javascript' src='jwplayer.js'></script>
    <script type='text/javascript'>
        jwplayer('mediaspace').setup({
            'flashplayer': 'player.swf',
            'file': 'mp4:path1/revolution.2012.101.hdtv-lol.mp4',
            'provider': 'rtmp',
            'frontcolor': '000000',
            'lightcolor': '000000',
            'screencolor': '000000',
            'bufferlength': '20',
            'streamer': 'rtmp://198.105.211.36:1935/mediacache',
            'controlbar': 'bottom',
            'width': '700',
            'height': '400'
          });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:35:29.573

**简答**

RTMP 只存储足够的缓冲区供视频播放而不会暂停，这就是在 JWPlayer 中看不到任何缓冲区的原因。

**长答案**

YouTube 使用[HTTP 伪流](http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash)传输它的内容，允许对视频进行完全缓冲。您当前正在使用[RTMP](http://www.longtailvideo.com/support/jw-player/28854/using-rtmp-streaming)流式传输没有真正缓冲区的视频。

来自[JWPlayer 支持论坛](http://www.longtailvideo.com/support/forums/jw-player/bug-reports/25760/rtmp-no-buffering/)：

> 当播放器从 RTMP 服务器播放内容时，缓冲区不会暴露。这是因为与渐进式下载或 HTTP 伪流不同，RTMP 只会下载足够的内容来显示它而无需暂停，因此播放器不会报告缓冲区百分比。

如果您希望您的观众能够寻找尚未下载的视频部分并能够缓冲视频（适用于慢速互联网连接），您可以切换到[HTTP Pseudo-Streaming](http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:20:09.687

通常，Wowza RTMP 以块的形式提供流。如果我暂停播放器中的流，wowza 服务器也会暂停播放器的块。这导致我们不会从服务器获取数据/块。很清楚，我希望缓冲是不可能的。

对于 HTTP 伪流，它不是那样的，它使用渐进式下载方法。所以缓冲是可能的。

更多信息请参考：[http ://en.wikipedia.org/wiki/Flash_Video](http://en.wikipedia.org/wiki/Flash_Video)

# c# - 将窗口句柄 (IntPtr) 保存在变量中是否会阻止正确处理表单？

> ID：13472049
> 
> 赞同：0
> 
> 时间：2012-11-20T11:17:18.210
> 
> 标签：c#, intptr

我有一个需要执行特定操作的类。根据输入数据，可能会显示一些对话框。这些对话框需要使用父窗口的句柄来调用，以便它们正确居中等。

```
private IntPtr _parentWindow;
...
System.Windows.Forms.MessageBox.Show(System.Windows.Forms.Control.FromHandle(_parentWindow), "message"); 
```

最终关闭父窗体后，我的类的实例仍然存在，_parentWindow 仍然分配了一个值。

这样做安全吗？或者 GC 会不会因为 _parentWindow 被句柄填充而完全处理表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:20:48.513

不，保持窗口句柄的值不会阻止窗口被破坏或其资源被完全释放。

GC不负责释放窗体的非托管资源（所说的资源就是[窗口句柄](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725486%28v=vs.85%29.aspx)，最终通过释放[`DestroyWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632682%28v=vs.85%29.aspx)），也不`IntPtr`以特殊的方式对待成员。

# sass - 指南针的compact（）问题

> ID：13472050
> 
> 赞同：-1
> 
> 时间：2012-11-20T11:17:23.507
> 
> 标签：sass, compass-sass, fuelphp

我刚开始使用 compass，需要在 Fuel 项目中使用它，所以运行 compass create 对我来说不可行。

我已经手动导入了文件，但它`compact()`覆盖了我所有的 mixin，使它们无法工作。

我已经重新安装了 gem，但仍然没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:27:31.020

我认为可能的问题是compact() 函数是由Compass 在Ruby 中定义的，因此没有包含在内。最简单的解决方案是在 Sass 中重新实现该功能。

其他人在这里发布了适当的解决方案：[Bourbon 中的“Compact”函数，未调用 SASS](https://stackoverflow.com/questions/11649016/compact-function-in-bourbon-with-sass-not-called)

# r - 使用 markdownToHTML 格式不正确的方程

> ID：13472051
> 
> 赞同：2
> 
> 时间：2012-11-20T11:17:22.247
> 
> 标签：r, knitr, mathjax, rstudio

将此代码放在 test.md 文件中

```
 $$
       \begin{aligned}
       20x 1  \leqt 70

       \end{aligned}
        $$ 
```

当我使用 RStudio 按钮**Preview Html**时，方程式使用 Mathjax 进行了很好的格式化。但是当我尝试使用`markdownToHTML`函数来做到这一点时：例如

```
 markdownToHTML('test.md', 'test.html'), 
```

方程未格式化。

该错误是由于我的方程式后面的额外空白行（我无法删除它，因为方程式是使用 R 块和 cat 命令生成的）

Rstudio 是否对`.md`文件进行任何后处理以删除 之间的空白行`$$`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:39:46.740

对于 RStudio，我们实际上嵌入了我们自己的 markdown 包版本，它可以将 .md 转换为 .html。我尝试了您的方案，并且也能够重现。我建议将此报告给 Jeff Horner，看看这里是否有他可以修复的错误：

[http://cran.r-project.org/web/packages/markdown/index.html](http://cran.r-project.org/web/packages/markdown/index.html)

[https://github.com/rstudio/markdown](https://github.com/rstudio/markdown)

乔什

产品经理 - RStudio

# asp.net - 从我刚刚写入数据库的行中检索 id

> ID：13472059
> 
> 赞同：0
> 
> 时间：2012-11-20T11:17:48.343
> 
> 标签：asp.net, sql-server, sql-server-2008

如何`id`从刚刚写入数据库的行中检索一个？

基本上，我的 ASP.NET 中有一个函数需要写入两个表的预订表格，但我需要表 1 中写入的 id 也存储在表 2 中。

所以：

1.  写给`table 1`
2.  检索`id`自`table 1`
3.  写给`table 2`

我怎样才能做到这一点？

敬茶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:19:01.633

如果您使用的是**SQL Server** ，请使用`SCOPE_IDENTITY()`

[http://msdn.microsoft.com/en-us/library/ms190315.aspx](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

```
INSERT INTO Table1 ...

DECLARE @RecordID int = SCOPE_IDENTITY()

INSERT INTO Table2 ... VALUES (@RecordID....) 
```

* * *

如果不使用存储过程，您可以将`SELECT`语句附加到 SQL 的末尾：

```
cmd.CommandText = "INSERT INTO Table 1 ...... ; SELECT SCOPE_IDENTITY()"
int recordId = (int)cmd.ExecuteScalar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:24:27.830

在带有 Sql 2008 服务器的 Asp.Net 中，您可以像这样使用**[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)**函数：

```
string query = "INSERT INTO Table1 (id_field) 
                OUTPUT SCOPE_IDENTITY()
                VALUES (...)"; 
```

或者

```
string query = "INSERT INTO Table1 (...) VALUES (...); SELECT SCOPE_IDENTITY() "; 
```

在最后一个示例中，请注意我在同一个请求中执行了一个 INSERT 和一个 SELECT ......

并获得身份使用：

```
int lastId = (int)command.ExecuteScalar(); 
```

# java - 我们可以使用 Web 驱动程序来测试 https:// 网站吗？我正在尝试在 gmail.com 上工作，但它不起作用

> ID：13472062
> 
> 赞同：0
> 
> 时间：2012-11-20T11:18:13.397
> 
> 标签：java, selenium, automated-tests, selenium-webdriver

```
import java.util.concurrent.TimeUnit;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.remote.DesiredCapabilities;

public class MyFirstSelTest {

    public static void main(String args[]){

        WebDriver driver = new FirefoxDriver();

        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

        driver.get("http://www.gmail.com/");

        WebElement un = driver.findElement(By.id("Email"));
        WebElement pwd = driver.findElement(By.id("Passwd"));
        WebElement submitBtn = driver.findElement(By.id("wp-signIn"));

        un.sendKeys("ValidUsername");
        pwd.sendKeys("ValidPassword");
        submitBtn.click();

        driver.quit();
    }
} 
```

Gmail 主页已打开，但未在用户名和密码字段中输入任何数据。有人可以帮助我了解我们需要为此做些什么吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:38:34.347

由于我没有得到问题的原因是提交按钮：

尝试替换为：`WebElement submitBtn = driver.findElement(By.id("signIn"));`您没有正确识别提交按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:46:14.277

尝试使用以下定位器。

```
driver.findElement(By.cssSelector("div.email-div>input[id='Email']")).sendKeys(Email);
driver.findElement(By.cssSelector("div.passwd-div>input[id='Passwd']")).sendKeys(Email);
driver.findElement(By.id("signIn")).click(); 
```

# jquery - JQuery Timepicker 添加到 datepicker 将不起作用

> ID：13472072
> 
> 赞同：0
> 
> 时间：2012-11-20T11:18:45.097
> 
> 标签：jquery, datetimepicker

我正在使用这些 JS/CSS 文件，从`http://jqueryui.com/download/`

```
 <link rel="stylesheet" href="JS/jquery-ui.css" />
    <script src="JS/jquery-1.8.2.js"></script>
    <script src="JS/jquery-ui-1.9.1.custom.js"></script>
    <script src="JS/jquery-ui-1.9.1.custom.min.js"></script>
    <link href="JS/style.css" rel="stylesheet" /> 
```

和

```
 <script src="http://trentrichardson.com/examples/timepicker/jquery-ui-timepicker-addon.js"></script> 
```

这是第一个有效的：

```
 <script>
        $(function () {
            $("#datepicker").datepicker();
        });
    </script> 
```

这个对我不起作用：

```
 <script>          $(function () {
                  $('#timepicker').datetimepicker();
              }); </script> 
```

Datepicker 工作正常，但是当我尝试打开 datetimepicker 时没有任何反应。

我错过了什么？请注意，这是我第一次使用 JQuery，所以它可能非常简单或非常明显。我就是找不到。

```
 <input type="text" id="datepicker" />  <input type="text" id="timepicker" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:25:16.870

我已经通过从我上面发布的网站下载 .js 解决了这个问题。现在它可以工作了。不知道为什么它不适用于外部 JS 文件。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:27:33.823

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="jquery-ui-timepicker-addon.js"></script>
    <script type="text/javascript" src="jquery-ui-sliderAccess.js"></script> 
```

你需要所有的js文件

# android - 应用程序未在 Android 设备上运行 (Tablet OS 4.0.3)

> ID：13472073
> 
> 赞同：0
> 
> 时间：2012-11-20T11:18:51.103
> 
> 标签：android, android-intent, android-widget

最近，我将一个android应用程序上传到Google play，并在各种设备上进行了检查，运行良好。

几天后，我的客户购买了不支持 GPS 的 Android 平板电脑（Samsung Galaxy Tab GT-P3113），但我的应用程序使用了它。现在，当他尝试从 Google Play 下载此应用程序时，他收到“设备不支持”消息。

请帮助我可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:34:00.607

这通常发生**`uses-feature`**在 android 中调用的某些东西由 Play Store 自动检查并且您可能添加了 GPS 硬件，因为您的应用程序说设备不支持。

有关这方面的更多详细信息，您可以访问[此链接。](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:28:46.560

当您从 g play 下载时，它是一个包含应用程序需要/使用的列表。

一种可能是您设置了最低 android sdk 而他的平板电脑低于 .

另一种可能性，但我不确定，也许在您的项目中，您刚刚自定义了设计文件夹而没有默认文件夹：例如：只有 drawable-hdmi，没有 drawable

其他可能性：如果应用程序使用设备必须支持的地图，则在 androidmanifest 中写入它使用的内容。也许您应该做另一个 apk 并更改 manifest ，删除地图并将其仅用于平板电脑。

# c# - 软键盘资本最初

> ID：13472075
> 
> 赞同：5
> 
> 时间：2012-11-20T11:19:05.600
> 
> 标签：c#, xaml, windows-8, windows-store-apps

我希望当用户点击`TextBox`键盘时，最初应该是大写，然后在输入第一个字符后是小写。

我在日历应用程序中看到了这一点。当您点击`Add title`shift 键时，最初是打开的，当您点击它时，`Add a message`它是关闭的。
这是屏幕截图..

屏幕截图 #1

![在此处输入图像描述](../Images/f5e781aea2952c730a75c5ab77e0d2f5.png)

屏幕截图 #2

![在此处输入图像描述](../Images/44ecc15ef51609dde3e6fef432d7766d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T18:46:20.920

我在找这个。在 WP 8 中，它是通过将 InputScope 定义为文本来完成的：

```
<TextBox x:Name="DescriptionTextBox" InputScope="Text"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T00:24:35.847

`InputScope`以下是您可以为屏幕键盘设置 的不同类型的快速摘要。[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh393998(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh393998(v=vs.105).aspx)

这听起来像是`"Text"`为您工作，但`"Chat"`也将从资本开始。不同之处在于`"Chat"`它不会自动更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:17:15.650

您可以将[附加](http://dotnetbyexample.blogspot.hk/2012/03/attached-behaviors-for-windows-8-metro.html)行​​为与您的文本块控件一起使用，该控件侦听按键事件，然后可以根据需要相应地转换字符大小写。

# python - Ngram 模型错误。需要计算困惑度

> ID：13472076
> 
> 赞同：0
> 
> 时间：2012-11-20T11:19:04.380
> 
> 标签：python, nlp, nltk

我收到一个 NGramModel 错误...请告诉我哪里可能出错了。

```
Traceback (most recent call last):
  File "ai7.py", line 87, in <module>
    tt=NgramModel(1, tText, estimator)
NameError: name 'NgramModel' is not defined 
```

我的目标是计算文本的困惑度。

```
f_in = open("science.txt", 'r');
ln = f_in.read()    

words = nltk.word_tokenize(ln)
my_bigrams = nltk.bigrams(words)
my_trigrams = nltk.trigrams(words)

s=""
tText = Text(words)
tText1 = Text(my_bigrams)
tText2 = Text(my_trigrams)
estimator = lambda fdist, bins: LidstoneProbDist(fdist, 0.2)

tt=NgramModel(1, tText, estimator)
tt1=NgramModel(2, tText1, estimator)
tt2=NgramModel(3, tText2, estimator)

print tt.perplexity(tText)
print tt1.perplexity(tText1)
print tt2.perplexity(tText2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:32:13.130

您忘记导入`NgramModel`

您应该执行以下操作：

```
from nltk.model.ngram import NgramModel 
```

# ruby-on-rails - 在 Rails 中重新加载外部文件

> ID：13472083
> 
> 赞同：1
> 
> 时间：2012-11-20T11:19:44.043
> 
> 标签：ruby-on-rails, ruby, plugins, reload

我正在开发一个更大的 Rails 应用程序，它应该能够加载插件。为了实现这一点，我在 before 钩子中读取插件文件并评估它们。但这很糟糕......首先，我想摆脱评估。我尝试使用 require ，但是当我这样做时，文件只会在我启动应用程序时加载一次。

这引出了我的问题：我如何为每个请求（在开发模式下）重新加载外部文件，或者以其他方式处理插件，是否有更好的方法？

问候，CK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:25:17.933

Kernel#load 每次都会加载文件。

Kernel#require 将加载一次。

使用负载而不是要求。

# node.js - 从 WAF 迁移到 GYP - 包括库在内的问题

> ID：13472085
> 
> 赞同：3
> 
> 时间：2012-11-20T11:19:44.883
> 
> 标签：node.js, node-gyp

我正在将一个过时的 npm 包从 WAF 迁移到 GYP，但是在让一切正常工作时遇到了一些问题。它运行一个 WSCRIPT，它似乎包含一个 3rd 方库：

```
import Options
from os import unlink, symlink, popen, sys
from os.path import exists 

srcdir = '.'
blddir = 'build'
VERSION = '0.0.2'

def set_options(opt):
  opt.tool_options('compiler_cxx')

def configure(conf):
  conf.check_tool('compiler_cxx')
  conf.check_tool('node_addon')

  print(sys.platform)  
  if sys.platform == 'darwin':
      conf.check_tool('osx')
      tc_framework = 'TelldusCore'
      conf.env.append_value("FRAMEWORK_TC", tc_framework)
      tc_frameworkpath = '/Library/Frameworks/TelldusCore.framework/'
      conf.env.append_value("FRAMEWORKPATH_TC", tc_frameworkpath)
      tc_lib = tc_frameworkpath + 'Headers/'
      conf.env.append_value("CPPPATH_TC", tc_lib)
  elif sys.platform == 'linux2':
      conf.env.LIB_TC = 'telldus-core'
      #conf.env.LIBPATH_TC = ['/usr/lib']
      #conf.env.CCFLAGS_TC = ['-O0']
      conf.env.CCDEFINES_TC = ['TC']
      #conf.env.LINKFLAGS_TC = ['-g']
  else:
      raise ValueError("Dose not support: %r" % sys.platform)

def build(bld):
  obj = bld.new_task_gen('cxx', 'shlib', 'node_addon')
  obj.target = 'telldus'
  obj.source = 'telldus.cc'
  obj.uselib = "TC" 
```

现在我尝试将其转换为 binding.gyp 脚本，但不确定如何包含该库：

```
{
  "targets": [
    {
    "target_name": "tellduscorejs2",
    "sources": [ "tellduscorejs2.cpp" ],
    "conditions": [
        ['OS=="mac"', {
            'defines': [
                'FRAMEWORK_TC=TelldusCore',
                'FRAMEWORKPATH_TC="/Library/Frameworks/TelldusCore.framework/"',
                'CPPPATH_TC="/Library/Frameworks/TelldusCore.framework/Headers/"'
            ]
        }],
        ['OS=="linux"', {
            'defines': [
                'LIB_TC=telldus-core',
                'CCDEFINES_TC=TC'
            ]
        }]
    ],
    'link_settings': {
        'libraries': [
            ???
        ],
    },
   }
  ]
} 
```

如果有人能指出我是否在正确的路线上，或者我需要更改哪些内容以包含该库，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:17:47.360

实际上，我已经为telldus-core 项目做到了这一点。见[https://github.com/marchaos/telldus-core-js/](https://github.com/marchaos/telldus-core-js/)

我还为设备和传感器添加了事件。

# asp.net-mvc - Asp.net MVC，添加 edmx 会给出可信区域警告

> ID：13472087
> 
> 赞同：1
> 
> 时间：2012-11-20T11:19:51.497
> 
> 标签：asp.net-mvc, edmx, trusted

我有一个正在处理的 ASP.net MVC 4 项目，并正在尝试使用 Database First 向它添加一个 ADO.net EF 模型。

模型（.edmx 文件）的创建似乎成功运行，并且在我指定的文件夹中留下了所需的 .edmx 模型文件。但是，我似乎看不到任何嵌套在此模型下的文件。（根据我的所有研究，我应该能够展开 .edmx 文件并查看下面的 *Context.vb、*Designer.vb、*.edmx.diagram 和 *.tt 文件，但我不能。）

在关于 Database First 的 msdn 文章中，它应该看起来像[这样](http://msdn.microsoft.com/en-us/data/jj206878.aspx)（参见第 4 步）：

注意到这个问题后，我发现在创建 .edmx 模型后出现了一些警告，其中一个是（我已经遮蔽了完整路径的一部分）：

***路径 'P:\IT\...\DAL\EF.Utility.VB.ttinclude' 必须在此计算机本地或您的受信任区域的一部分。如果您已下载此模板，您可能需要使用文件资源管理器中模板文件的属性页面“取消阻止”它。***

该项目存储在我们其中一台服务器上的网络共享中，因此它也可以包含在我们的日常备份和 Windows 卷影副本中。我的理解是，因此出现了上述警告，我需要将我的机器设置为信任该位置。

我已经尝试了我能想到的 [这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bs2bkwxc%28v=vs.80%29.aspx)的所有可能变体， 但绝对没有成功，警告仍然存在。

要么我找错地方了，要么我错过了什么。

有谁知道我可以做些什么来删除此警告并访问嵌套在 .edmx 模型下方的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:07:12.953

也许[这](http://msdn.microsoft.com/en-us/library/bs2bkwxc%28v=vs.80%29.aspx)可能会有所帮助。我从来没有真正处理过跨域工作的信任问题。我倾向于下拉并使用本地副本。

# android - 基于FFmpeg构建Android应用程序报错

> ID：13472093
> 
> 赞同：2
> 
> 时间：2012-11-20T11:20:10.140
> 
> 标签：android, android-ndk

我有下载代码这个[链接](http://www.roman10.net/how-to-build-android-applications-based-on-ffmpeg-by-an-example/)

导入该项目并将其转换为 C/C++ 原生项目。

并将 Builder Settings 设置为 Build Command

```
bash C:\tools\android-ndk-r8b-windows\android-ndk-r8b\ndk-build 
```

运行项目后，我低于**Error**。

```
make: *** Android NDK: Aborting    .  Stop. FFmpegTest

C:\tools\android-ndk-r5b\build\core\prebuilt-library.mk 
```

我在**Windows 7 64 位**和**Eclipse Juno**中开发上述应用程序。

请指导我解决我的错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:30:09.527

在您发布的链接之后，我永远无法为 Android 编译 ffmpeg（尽管我听说其他人确实成功了），就像我永远无法在 Windows 下为 Android 编译 ffmpeg 一样。

我使用以下代码**在ubuntu下轻松编译了ffmpeg**

[http://code.google.com/p/dolphin-player/](http://code.google.com/p/dolphin-player/)。

只是去

`dolphin-player/p/native/ffmpeg/ffmpeg-0.11.1`然后`build_android_r8.sh`从那里跑

在 unix 下编译后，您可以在 windows 下使用生成的 *.so。

[您可以使用免费的VirtualBox](https://www.virtualbox.org/)之类的东西在 windows 下模拟 unix 。

您可以通过抓取一个 dolphin-player 的 apk（适合您的架构）将其重命名为 zip 并从那里提取 libffmeg.so 来完全避免编译。

# vba - Excel根据另一列的值组合/连接一列

> ID：13472096
> 
> 赞同：0
> 
> 时间：2012-11-20T11:20:17.080
> 
> 标签：vba, excel

如果这个问题已经存在，我很抱歉，我搜索了一段时间但找不到任何东西。

我在 Excel 中有 2 列，我需要连接 1 列的值，其中另一列的值相同。作为一个例子，我有这个：

```
A  | B
12 | Value 1
10 | Value 2
13 | Value 3
12 | Value 4
10 | Value 5 
```

我想出去：

```
A  | B
12 | Value 1, Value 4
10 | Value 2, Value 5
13 | Value 3 
```

我有数千行，理想情况下我希望它创建一个包含结果的新工作表而不破坏现有工作表。B 列中还有一些空白值，我希望它忽略而不连接。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:46:15.937

尝试这个：

```
Sub combineValues()
    Dim dic As Dictionary
    Dim key, val, i, p, k
    Set dic = New Dictionary
    For i = 1 To Worksheets(1).Range("A65536").End(xlUp).Row
        key = Worksheets(1).Cells(i, 1).Value
        val = Worksheets(1).Cells(i, 2).Value
        If dic.Exists(key) Then
            dic.Item(key) = dic.Item(key) & ", " & val
        Else
            dic.Add key, val
        End If
    Next
    p = 1
    For Each k In dic.Keys
        Worksheets(2).Cells(p, 1) = k
        Worksheets(2).Cells(p, 2) = dic.Item(k)
        p = p + 1
    Next
End Sub 
```

请注意，您必须在“参考”中包含“Microsoft 脚本运行时”才能使用`Dictionary`.

使用以下 [表 1] 进行测试：

```
1   value 1
2   value 2
3   value 3
1   value 4
1   value 5
3   value 6
3   value 7
2   value 8
1   value 9
2   value 10
2   value 11
2   value 12 
```

结果如下 [表 2]：

```
1   value 1, value 4, value 5, value 9
2   value 2, value 8, value 10, value 11, value 12
3   value 3, value 6, value 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T16:18:32.547

我发现路人的答案效果很好，但就我而言，我有几列可以运行它，在某些情况下还有空单元格。为避免获得 , , , 条目，我添加了以下内容：

```
If val <> "" Then 
```

前

```
dic.Item(key) = dic.Item(key) & ", " & val 
```

# java - 如何将实体从一个 jsf 视图传输到另一个？

> ID：13472102
> 
> 赞同：1
> 
> 时间：2012-11-20T11:20:45.270
> 
> 标签：java, jsf, views, managed-bean, scopes

我有以下结构：

**列表视图.xhtml**

```
<h:dataTable value="#{listBean.myList} ...>
  //for every row I create a commandLink
  <h:commandLink action="editView" value="edit" />
</h:dataTable> 
```

**ListBean.java**

```
@ManagedBean
@ViewScoped
public class ListBean{
   public List<Entity> myList; // also getters and setters
} 
```

**编辑视图.xhtml**

```
<h:inputText value="#{editBean.selectedEntity.name}" /> 
```

**编辑Bean.java**

```
@ManagedBean
@ViewScoped
public class EditBean{
   public Entity selectedEntity; // also getters and setters
} 
```

你知道这个问题：如何将选定的实体从 listView 传输到 editView？我想这应该很简单，但是一整天后，我没有得到它的工作。

我尝试了不同的东西，比如**`@ManagedProperty`**但**`<f:param name="" value="">`**我没有帮助我。所以请告诉我这有多简单和好:)

提前致谢！

* * *

***更新 - 解决方案#1***

感谢 Daniel，一种可行的方法是，当实体由 EntityManager 持有时，您可以通过其 id 访问实体。因此，您将 id 作为请求参数传递。开始了：

**列表视图.xhtml**

```
<h:dataTable value="#{listBean.myList} ...>
  //for every row I create a commandLink, so you can click on that entity to edit it
  <h:commandLink action="editView" value="edit">
     <f:param name="selectedEntityId" value="#{entity.id}" />
  </h:commandLink>
</h:dataTable> 
```

**编辑Bean.java**

```
@ManagedBean
@ViewScoped
public class EditBean{

    private Entity selectedEntity;

    @PostConstruct
    public void init() {
        Map<String, String> params = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
        long selectedEntityId = Long.parseLong(params.get("selectedEntityId"));

        selectedEntity = SomeEntityManagerUtil.getEntity(selectedEntityId);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:49:25.607

如果它们具有相同的范围，也许你应该合并你的 bean？您也可以使用上下文： [jsf-get-managed-bean-by-name](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name)

还要看这个问题： [passing-data-between-managed-components-in-jsf](https://stackoverflow.com/questions/2126943/passing-data-between-managed-components-in-jsf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:37:47.110

一般的想法可能是：

传递`id`该实体的一个并稍后通过该 id 获取一个实体...

您还可以使用转换器并在其中将该 id*转换*为实体...

像这样 ：

```
<h:inputText value="#{editBean.selectedEntity.name}" converter="myEntityConverter"/> 
```

# c# - 无法读取 ReturnUrl 查询字符串

> ID：13472104
> 
> 赞同：2
> 
> 时间：2012-11-20T11:20:50.387
> 
> 标签：c#, asp.net

我已经实现了我的登录页面，它工作正常，但我无法从`ReturnUrl`包含原始请求 URL 的查询字符串参数中读取。

例如，从该页面成功登录时：

```
http://whatever/Login.aspx?ReturnUrl=%2fAdmin%2fmenu-link.aspx 
```

我得到以下信息：

```
Context.Request.QueryString["ReturnUrl"] = null 
Context.Request.Params["ReturnUrl"] = null
Context.Request.Url.ToString() = "http://localhost/Login.aspx"
UrlReferrer = "http://localhost/Login.aspx?ReturnUrl=/Admin/menu-link.aspx" 
```

为什么会这样？

感谢您的回答，但我不在这个特定网站上使用会话状态，所以它不是我的选择。用户第一次被重定向到登录页面（访问受限页面后），我可以正确地看到 page_load 中的查询字符串，但是它在回发时丢失了。

这是我的页面代码，我不知道为什么它没有持续存在：

```
<body>
    <form id="form1" action="Login.aspx" runat="server" defaultbutton="btnLogin">
    //Bunch of html
    <asp:Button TabIndex="5" CausesValidation="true" runat="server" ID="btnLogin" Text="Log In" onclick="btnLogin_Click" /></div>
    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:36:11.147

如果我没听错，您是`ReturnUrl`在登录后尝试获取吗？在您的`button_click`. 它应该可以工作。您的推荐人显示您已经提出另一个请求，丢失了查询字符串部分而没有捕获它

```
string ReturnUrl = Request.QueryString["ReturnUrl"];
Response.Redirect(ReturnUrl); 
```

如果您关心，请在您的`button_click`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:39:35.090

在 Page_Load 事件中检索 QueryString 参数并将其保存在

```
ViewState["ReturnUrl"] = Request.QueryString["ReturnUrl"]; 
```

然后，在按钮单击事件中进行身份验证重定向：

```
Response.Redirect(ViewState["ReturnUrl"].ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T11:29:16.210

> 我正在登录页面上的按钮事件中阅读它。它在同一页上 我不知道为什么会这样

您`form`没有保留`querystring`提交登录按钮的时间，因此它出现在 UrlReferrer 中。

将查询字符串保存到会话变量或将查询字符串附加到`form` `action`属性。

# zebra-printers - ZPL/Zebra 打印机没有赶上新的生产线？

> ID：13472105
> 
> 赞同：2
> 
> 时间：2012-11-20T11:20:54.873
> 
> 标签：zebra-printers, zpl

我正在将 ZPL 代码传递给 Zebra 打印机。在这个 ZPL 代码中，我有一部分会生成一个二维码。二维码的值来自我在为 WM6.5 开发的移动应用程序中使用条形码扫描功能获得的字符串。扫描的字符串结果如下所示： 姓名：John Smith 性别：男性 职位：开发人员

我需要将此字符串传递给数据网格。所以我通过“\n”或环境新行逐行解析它。将它传递给数据网格是可以的。但是当我将字符串结果打印到 Zebra 打印机上的二维码时。新行似乎没有包含在 QR 码中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:58:59.163

如果要传入不可打印的字符，请使用`^FH`命令将其作为十六进制值传入

```
^XA
^FO100,100
^AD^FH
^FDTilde _7e used for hex^FS
^XZ 
```

这将打印出 a`~`而不是 _7e

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:23:31.283

[ISO-8859-1 编码字符](http://www.ic.unicamp.br/~stolfi/EXPORT/www/ISO-8859-1-Encoding.html)

```
HTML     OCTL   HEX   CMP   CHR   MEANING
------ + ---- + --- + --- + --- + ------------------------------
&#010; | \012 | =0A |     |     | Line feed (ASCII NL, newline) 
```

使用`0x0A`而不是`\n`？

# java - 如果我将 .svn 目录从 ASCII 转换为 UTF-8 会发生什么？

> ID：13472106
> 
> 赞同：1
> 
> 时间：2012-11-20T11:20:55.067
> 
> 标签：java, svn, utf-8

我正在将我的 Java 项目从 ASCII 转换为 UTF8。我想知道我是否可以简单地将所有文件转换为 UTF8，还是应该排除一些文件，例如 .svn 目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:22:49.400

如果将其转换为**没有 BOM**的 UTF-8 ，则编码是相同的，不会有任何区别。

# javascript - twitters个人资料图片上传器如何在客户端显示图片预览

> ID：13472111
> 
> 赞同：0
> 
> 时间：2012-11-20T11:21:22.187
> 
> 标签：javascript, image, image-processing

我们最近使用[Fine Uploader](http://fineuploader.com/)添加了图片上传和裁剪到我们的网站；将一组 javascript 库与 HTTP 处理程序混合。

它运行良好，但是对于较大的图像，客户端被迫：

1.  稍等片刻，直到使用 HTTP 处理程序上传图像
2.  再次下载图像，以便与 JCrop 一起使用
3.  图像以全尺寸下载，然后由 JCrop 在客户端调整为较小的图像。

我注意到在 Twitter 上为您的个人资料选择一张图片会立即显示该图片；显然没有服务器端交互。

有谁知道 twitter 如何在不将图像上传到服务器的情况下实现客户端查看图像？或者对平滑上述过程有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:25:57.277

大概是这样的

[http://jsfiddle.net/dmZTm/](http://jsfiddle.net/dmZTm/)

```
var URL = window.URL || window.webkitURL;

$("input").change(function() {
    var file = this.files && this.files[0];

    if (file) {
        var src = URL.createObjectURL(file);
        $("<img>", {
            src: src
        }).appendTo("body");
    }

});​ 
```

# javascript - 适用于 Javascript 的 Google Webfonts 选择器和嵌入器小部件

> ID：13472112
> 
> 赞同：6
> 
> 时间：2012-11-20T11:21:24.270
> 
> 标签：javascript, google-webfonts

是否已经存在允许用户从一种 Google Webfonts 字体中选择他/她的选择的小部件，并且您可以将此小部件嵌入到您自己的 Web 应用程序中？

[http://www.google.com/webfonts](http://www.google.com/webfonts)

某种高级字体选择器对话框，具有强大的搜索和预览功能，允许动态加载 Google Webfonts。

如果尚不存在，Google Webfonts 是否会公开构建此类小部件所需的列表和元数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-20T16:56:27.180

我们创建了一个 Google 字体选择器。

它不会在您滚动时加载所有字体。它只加载被点击的字体。对于字体预览，我们使用加载速度非常快的单个图像。它有700多种字体

[从 github 下载](https://github.com/saadqbal/HiGoogleFonts)

[在此处查看演示](https://cdn.rawgit.com/saadqbal/HiGoogleFonts/master/index2.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T22:32:10.353

我找到了一个项目： [https ://github.com/agoragames/GWFSelect-for-jQuery-UI](https://github.com/agoragames/GWFSelect-for-jQuery-UI)

我注意到一些缺点：

*   [fouc](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)滚动浏览字体列表
*   似乎下载了整个字体而不是所需的字符
*   依赖于 jQuery UI

一个不错的项目，但可能会完成这项工作。请注意，如果您尝试使用它，您可能需要使用自己的 api 密钥。[你可以从谷歌得到一个](https://code.google.com/apis/console/)。

> 如果尚不存在，Google Webfonts 是否会公开构建此类小部件所需的列表和元数据？

他们有一个 api，您可以使用它来构建这样的小部件： [https ://developers.google.com/webfonts/docs/developer_api](https://developers.google.com/webfonts/docs/developer_api)

我想 google docs 使用这个 api 作为他们惊人的字体选择器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-22T09:56:40.090

看看引导表单助手：[http ://bootstrapformhelpers.com/googlefont/](http://bootstrapformhelpers.com/googlefont/)

它们提供了一个非常好的 Google Web 字体选择器，没有 GWFSelect-for-jQuery-UI 提到的缺点，因为它们使用预渲染预览图像和选择框的导出字体列表。

# php - 如何在具有相同字段名称的变量中检索查询结果？

> ID：13472134
> 
> 赞同：-1
> 
> 时间：2012-11-20T11:23:03.533
> 
> 标签：php, sql, variables, syntax

我正在寻找一种允许在 sql 查询之后的 php 语法，例如：

```
$query = "SELECT module, operation FROM webfolders";
$result = mysql_query($query);
$typeContenu = mysql_fetch_array($result); 
```

在与所需字段同名的变量中恢复结果。

对于我的例子，我不想要`$typeContenu['module']`or`$typeContenu['operation ']`而是直接`$module`and `$operation`。

我认为为此，有一个“@”可以放在某个地方……我不记得了。

你明白我想要什么吗？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:26:11.647

为什么不使用[http://php.net/extract](http://php.net/extract) - 从数组中将变量导入当前符号表，但尽量避免使用它，因为它会让人感到困惑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:50:53.523

尝试使用[list()](http://php.net/manual/en/function.list.php)：

```
$query = "SELECT module, operation FROM webfolders";
$result = mysql_query($query);
$typeContenu = mysql_fetch_array($result);

list($module, $operation) = $typeContenu; 
```

您必须定义变量名，但这样您就拥有更多的控制权，并且可以设置任何您想要的简单变量名，而且它比 extract() 更安全。

确保`list()`按照您在 SQL 查询中设置列字段的顺序进行输入。

# r - 如何制作代表我的 z 值的色谱图例？

> ID：13472135
> 
> 赞同：1
> 
> 时间：2012-11-20T11:23:03.750
> 
> 标签：r, plot, legend, grayscale

我设法使用灰度命令制作了一个 3D 散点图，其中第三维表示颜色渐变。不过，当我试图产生与之相吻合的传说时，我碰壁了。我已经有了我想要的颜色范围，我只是不知道如何告诉 R 将它们变成图例。这是我的代码。

```
conocarp.stands<-c(264,330,400,594,600,700,726,730,800,825,825,826,1914,2145,2200,2310,2475,2640,3630,3960,3960,4124,4554,5082,8250,8475,9200,1000)

fimb.size<-c(540,2160,1100,1170,350,850,2340,600,200,738,1080,1300,2416,540,3565,810,648,0,900,0,635,1210,0,900,2340,1152,0,0)

sugar.visits.cono<-c(0.005682,0,0.065,0,0,0.010714,0,0.010274,0.011875,0,0,0,0,0,0.007045,0,0.001414,0.002273,0,0.014141,0.001263,0.006426,0.000769,0.000295,0.005515,0.000186,0.00359,0.004939)

colors <- rev(grey(1:101/101))
zcolor <- colors[round((sugar.visits.cono -min(sugar.visits.cono))/diff(range(sugar.visits.cono))*100 + 1)]
plot(conocarp.stands,fimb.size, pch=1, cex=1.8,ann=FALSE)
points(conocarp.stands,fimb.size,col=zcolor, pch=16, cex=1.5) 
```

zcolor 是我的 z 轴值，应该可以用来生成我的图例。我曾尝试使用各种软件包，即 SDMTools 和字段，但我不应该这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:50:58.973

试试这个，

```
library(ggplot2)

d = data.frame(conocarp.stands = conocarp.stands,
               fimb.size = fimb.size,
               sugar.visits.cono = sugar.visits.cono)

ggplot(data = d, mapping = aes(x = conocarp.stands, y = fimb.size)) +
     geom_point(aes(colour = sugar.visits.cono), shape = 19)

last_plot() + scale_colour_gradient(high="grey10", low="grey90") + theme_bw() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:32:32.037

使用 raster.grid 命令我发现你也可以解决这个问题，但是我不知道如何标记轴。非常感谢巴蒂斯特，我一直在避免使用 ggplots 2 包，但我认为是时候深入研究了。如果对任何人有帮助，这是我使用 raster.grid 的代码：

库（网格）grid.raster（1：101/101，宽度=.075，高度=.1）

# c# - C# 文本框中的独立滚动条

> ID：13472137
> 
> 赞同：-2
> 
> 时间：2012-11-20T11:23:20.097
> 
> 标签：c#, winforms, textbox

在我的项目中，我的文本框需要一个独立的滚动条。所以我创建了一个自定义滚动条。知道如何在文本框中使用我的自定义滚动条（水平和垂直）而不是内置滚动条？

请在下面找到我的示例代码。（在原始代码中，文本框和滚动条是可换肤的。我不能在这里发布实际代码......）

```
public partial class EditControl : Control
{
    int BORDERWIDTH = SystemInformation.Border3DSize.Width;
    int SCROLLBARWIDTH = SystemInformation.VerticalScrollBarWidth;
    CustomTextBox editCtrl;
    VScrollBar vScrollBar = null;
    public EditControl()
    {
        InitializeComponent();
        editCtrl = new CustomTextBox();
        this.Width = 200 + SCROLLBARWIDTH;
        this.Height = 140;

        editCtrl.Width = this.Width - SCROLLBARWIDTH;
        editCtrl.Height = this.Height;
        editCtrl.Multiline = true;
        editCtrl.Left = Left;

        vScrollBar = new VScrollBar();
        vScrollBar.Height = this.Height;
        vScrollBar.Location = new Point(editCtrl.Width, 1);
        vScrollBar.Scroll += new ScrollEventHandler(vScrollBar_Scroll);
        this.Controls.Add(editCtrl);
        this.Controls.Add(vScrollBar);
    }

    private void vScrollBar_Scroll(object sender, ScrollEventArgs e)
    {
        //Code to scroll the text box
        //editCtrl.ScrollTo(position);
    }
    protected override void OnResize(EventArgs e)
    {
        base.OnResize(e);
        editCtrl.Width = this.Width - SCROLLBARWIDTH;
        editCtrl.Height = this.Height;
    }
    public partial class CustomTextBox : TextBox
    {
        public CustomTextBox()
        {
            //InitializeComponent();
        }
        public void ScrollTo(int Position)
        {
           //Code to scroll the contents.
        } 
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:08:48.287

问题已经解决了。我用自定义的滚动条掩盖了文本框的原始滚动条。GetScrollInfo API 用于同步滚动条。

# service - OpenService 功能在 Windows 8 中不起作用 (advapi32.dll)

> ID：13472141
> 
> 赞同：0
> 
> 时间：2012-11-20T11:23:40.050
> 
> 标签：service, windows-8

我在 VB.NET 项目中使用了 OpenService 函数，它在 Windows7 或 Windows XP 中没有问题。

像这样的东西：

```
hService = OpenService(hSCM, sServiceName, ACCESS_TYPE.SERVICE_QUERY_CONFIG Or ACCESS_TYPE.SERVICE_CHANGE_CONFIG) 
```

Windows 8 中的相同功能不起作用...它返回 0 而不是正确的服务句柄。

Windows 8 中发生了什么？你有什么想法吗？

非常感谢。

# c# - C#中的引用继承

> ID：13472145
> 
> 赞同：2
> 
> 时间：2012-11-20T11:24:02.763
> 
> 标签：c#, visual-studio-2010, interface, reference

我有以下问题：

我`IA`在 ProjectA.dll 和 `IB`ProjectB.dll 中有接口（`IB`继承`IA`）。当我尝试`IB`在任何其他项目中实现时，这两个引用都是必需的。嗯，对 ProjectB.dll 的引用的要求是预期的，但我有点困惑，也需要对 ProjectA.dll 的引用。

有谁知道这个功能是如何调用的，我在哪里可以找到有关此行为的详细信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:26:52.007

您将需要对包含您可能实现的任何接口所涉及的类的所有程序集的引用。否则，运行时如何知道任何此类的定义是什么？

# c# - 保持对 Singleton 对象的引用

> ID：13472146
> 
> 赞同：-2
> 
> 时间：2012-11-20T11:24:02.840
> 
> 标签：c#, .net, garbage-collection

我有一个持有 WCF 方法代理的 Singleton 对象。从代码中的几个点调用的这个 Singleton 对象包含为 COM 对象。我的问题是：

1.  是否`GC`可以决定释放该对象，即使我稍后会使用它（例如在 COM 中）？
2.  我如何确定何时`Dispose()`该对象？使用`~Finalizer()`方法是个好主意吗？或者可能是`GC`在我用完之前决定最终确定它？
3.  难道打电话`GC.KeepAlive(this)`就可以解决问题？

谢谢！

编辑：

```
public class Singleton
{
    private static Singleton instance = null;
    public static Singleton GetInstance()
    {
        if (instance == null)
            {
                lock (syncObject)
                {
                    if (instance == null)
                    {
                        instance = new Singleton(); 
                    }
                } 
            }
            return instance;
    }
    public void CallWcfMethod()
    {
        // ....
    }
}

public class Class1
{
    Singleton instance = Singleton.GetInstance();

    public void CallWcfMethod()
    {
        instance.CallWcfMethod();
    }
}

[ComVisible(true)]
public class Class2
{
    Singleton instance = Singleton.GetInstance();

    public void CallWcfMethod()
    {
        instance.CallWcfMethod();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:52:08.610

如果你想停止垃圾收集，你只需要一种方法来保持对对象的引用，最简单和最适合单例的方法就是这样。

```
public class Singleton
{
    public static Singleton Instance
    {
        get{ return sInstance;}
    }
    public void CallWcfMethod()
    {
        // ....
    }

    private static Singleton sInstance;
} 
```

这样你就不需要将它存储在你的每个类中，只需调用`Singleton.Instance.CallWcfMethod();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:53:30.990

如果您的实例被声明为静态，只要 AppDomain 仍然存在，它就不会被收集，此时您很少需要进行任何特定的清理。

# c# - 在通用接口上获取公共成员

> ID：13472149
> 
> 赞同：0
> 
> 时间：2012-11-20T11:24:18.360
> 
> 标签：c#, generics, interface

我的应用程序中的每个实体类都必须实现以下接口：

```
public interface IEntity<T> {
    T Id { get; set; }
} 
```

几乎 100% 的时间 T 的类型将是 int。但是，我必须处理 id 可能是复合 id 的情况。例如，我可以有以下实现：

```
public class User : IEntity<int> {
    public int Id { get; set; }
    ...
}

public class Site : IEntity<int> {
    public int Id { get; set; }
    ...
}

public class UserSite : IEntity<UserSiteIdentifier> {
    public UserSiteIdentifier Id { get; set; }
    ...
}

// Note: IIdentifier doesn't have any members
public class UserSiteIdentifier : IIdentifier {
    public User User { get; set; }
    public Site Site { get; set; }
    ...

    public override ToString() {
        return User.Id + "|" + Site.Id;
    }
} 
```

现在给定一个实体实例（类型未知），我需要检索 id 并将其转换为字符串。我可以说：

```
object entity = ???;
string id;

if (entity is IEntity<int>)
    id = ((IEntity<int>)entity).Id.ToString();
else if (entity is IEntity<IIdentifier>)
    id = ((IEntity<IIdentifier>)entity).Id.ToString(); 
```

但是这段代码并不适合我，因为我必须重复几乎相同的代码来处理复合 id。

如果有人可以向我展示更清洁的解决方案，我将不胜感激。这个应用程序仍然是一个原型，完全可以接受建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:40:07.823

可以引入`IEntity`接口：

```
public interface IEntity<T>:IEntity {
    new T Id { get; set; }
}

 public interface IEntity {
    object Id { get; }
} 
```

在实现两个应该返回相同值的属性时会有一些不便，但这可以通过引入`Entity<T>`隐藏`object Id`属性的基类来克服。

```
public class Entity<T>:IEntity<T> {
    public T Id { get; set; }
    object IEntity.Id { get{ return Id;}  }
} 
```

那么您有问题的代码可能是：

```
object value =...;
var entity = value as IEntity;
string id;
if(entity != null)
    id = entity.Id.ToString(); 
```

# java - 文件编码为 UTF-8

> ID：13472154
> 
> 赞同：0
> 
> 时间：2012-11-20T11:24:39.840
> 
> 标签：java

帮助解决这里的问题是脚本搜索互联网并保存，但他将它们保留为错误的编码，而对于UTP-8，您可以在此处插入程序编码，请插入（当页面保存时，它的内容也是错位字符）

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;
import java.util.Scanner;

public class url{
  public static void main(String[] args) {
        try {
            URL PageUrl;
            URLConnection GetConn = null;
            GetConn = null;
            Scanner sc = new Scanner(new File("C:\\test\\url.txt")); 
            String htmlPage;
            while (sc.hasNext()){
                htmlPage = sc.nextLine();
                PageUrl = new URL(htmlPage);
                GetConn = PageUrl.openConnection();
                GetConn.connect();
                // establish connection:
                Scanner scUrl = new Scanner(GetConn.getInputStream());

                StringBuffer sb = new StringBuffer();
                while(scUrl.hasNext()){
                    sb.append(scUrl.nextLine());
                }
                scUrl.close();

                String htmlFileName = ("C:\\test\\1\\"+title(sb.toString())+".html");
                FileWriter FWriter = new FileWriter(htmlFileName);
                BufferedWriter BWriter = new BufferedWriter(FWriter);

                BWriter.write(sb.toString());
                BWriter.close();
            }// end try
            sc.close();
        }
        catch (IOException io) {
            System.out.println(io);
        }
    }

    private static String title(String str){

        return str.substring(str.indexOf("title>")+6, str.indexOf("</title>"));
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:29:37.910

这

```
new Scanner(GetConn.getInputStream()); 
```

从您的网页获取输入流（面向字节）。但它使用的是 JVM 的默认编码，而您并没有查看实际页面本身的编码。

我可能会使用[JTidy](http://jtidy.sourceforge.net/)之类的库来正确解码/解析 HTML，然后向它询问页面标题。上面的代码可能非常脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:31:30.487

要补充@Brian Agnew的答案-
据我所知应该是：

```
new Scanner(GetConn.getInputStream(),"UTF-8"); 
```

# eclipse - 在构建器中删除特定的 IMarker

> ID：13472158
> 
> 赞同：1
> 
> 时间：2012-11-20T11:24:47.127
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我目前正在从事`Eclipse`插件开发。我需要使用`IMarker`自定义生成器。我正在创建项目标记`org.eclipse.core.resources.IMarker`，我正在使用`IMarker.PROBLEM`两种不同的情况。

如何在不删除项目资源的`IMarker`所有内容的情况下删除和刷新特定内容。`iMarker`

我在实现中尝试`delete()`了方法`IMarker`。但这并没有帮助我。而且我只找到`deleteMarkers()`了项目中实际删除项目资源中所有可用标记的方法。

```
iProject.deleteMarkers(IMarker.PROBLEM, true,
                    IProject.DEPTH_INFINITE);
iProject.refreshLocal(IProject.DEPTH_INFINITE, null); 
```

请帮我解决这个问题，我只想`IMarker`在指定的情况下删除一个特定的。我无法删除单个标记。您可以指出我的任何来源或参考吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:52:01.487

基本上，您可以存储或找到您的特定标记。您可以在选定资源中查找标记（不是在项目中，而是在当前资源中）：

```
IMarker[] problems = null;
int depth = IResource.DEPTH_INFINITE;
try {
   problems = resource.findMarkers(IMarker.PROBLEM, true, depth);
} catch (CoreException e) {
   // something went wrong
} 
```

当您拥有正确的标记时，您可以 1) 通过设置其属性来更新它，或 2) 使用 IMarker.delete() 将其删除。

此处使用的代码片段来自[Mark My Words 教程](http://www.eclipse.org/articles/Article-Mark%20My%20Words/mark-my-words.html)。

# crystal-reports - 如何从水晶报表字符串和整数字段中删除逗号

> ID：13472161
> 
> 赞同：11
> 
> 时间：2012-11-20T11:24:57.163
> 
> 标签：crystal-reports

如何从水晶报表字段中删除逗号 (,)？

我有一个字段名称“年份”，其值为`2012`，但是当我在水晶报表中显示该值时，它包含一个逗号，变为`2,012`。

我怎样才能只显示`2012`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T11:37:26.860

在水晶报表设计器视图中：

右键单击该字段，然后选择`Format object`。`Custom Style`在样式列表中选择，然后单击`Customize`。Untick`Thousands Separator`和任何其他不需要的格式。

否则，您可以尝试选择该字段并从`ThousandSeperator`属性窗口中的属性中删除“，”值。

[![在此处输入图像描述](../Images/1f284eb434d5aad05e85dc9df8d0ae5f.png)](https://i.stack.imgur.com/y4EqJ.gif)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-12-29T09:09:15.410

试试这个公式

```
ToText( ToNumber({variable1}), "#" ) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-11T06:52:18.590

试试下面的代码，

```
Replace (ToText ({Tablename.Year_Field}, 0),"," ,"" ) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-08T15:49:32.753

我只是在猜测，但我相信您已将字段名称嵌入到另一个对象中，例如文本字段。

如果是这种情况，请在设计视图中双击您的文本框，然后选择您遇到问题的文本字段。右键单击并选择“文本格式”，在“字体”选项卡下单击“字体”下拉菜单右侧的“格式公式编辑器”按钮（带有 X-2 的那个）。现在您所要做的就是关闭公式编辑器，然后取消“文本格式”窗口。现在，当您再次右键单击年份字段时，您将有一个新选项来格式化以前灰显的字段。

或者，您可以从嵌套的任何其他对象中删除您的年份字段。这将使您可以访问所有格式选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-10T00:37:33.753

NumberVar cRed; ToText (cRed,"#")

或者

ToText({一些数字字段值},"#")

“#”必须用括号括起来，单引号或双引号。

# ruby - 在 Emacs irb (inferior-ruby-mode) 中，如何从 Ruby 模式缓冲区中自动完成荣誉词？

> ID：13472163
> 
> 赞同：2
> 
> 时间：2012-11-20T11:25:04.227
> 
> 标签：ruby, emacs, autocomplete

在[Emacs irb (inferior-ruby-mode) 中设置自动完成时](https://stackoverflow.com/questions/13465151)，我遇到了无法仅添加 Ruby 模式缓冲区作为 AC 源的问题。我可以例如。在当前目录中添加文件

```
(setq ac-sources '(ac-source-files-in-current-dir)) 
```

或者我可以通过

```
(setq ac-sources '(ac-source-words-in-all-buffer)) 
```

但我真正想要的是只添加*Ruby*模式缓冲区。^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:25:40.103

看看`ac-source-words-in-same-mode-buffers`...我们可以重复使用这种方法来构建我们自己的完成源，例如：

```
 (ac-define-source words-in-ruby-buffers
   '((init . ac-update-word-index)
     (candidates . (ac-word-candidates
                     (lambda (buffer)
                       (eq (buffer-local-value 'major-mode buffer) 'ruby-mode)))))) 
```

会给我们`ac-source-words-in-ruby-buffers`补全源。

PS我没有测试过，但它应该可以工作;-)

# jquery - JQuery - 通过合并函数来简化脚本？

> ID：13472164
> 
> 赞同：2
> 
> 时间：2012-11-20T11:25:09.643
> 
> 标签：jquery, function

我想让这个更好/更简单，所以以后可以添加更多功能？

```
$(function() {
$('#boroughs').change(function() {
$('.boroughs').hide();
$('.fitness').hide();
$('#' + $(this).val()).show();
});
});
$(function() {
$('#b1').change(function() {
$('.fitness').hide();
$('#' + $(this).val()).show();
});
});
$(function() {
$('#b2').change(function() {
$('.fitness').hide();
$('#' + $(this).val()).show();
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:33:06.653

```
 $(function () {
        $('#b1,#boroughs,#b2').change(function () {
            if ($(this).attr('id') == 'boroughs')
                $('.boroughs').hide();
            $('.fitness').hide();
            $('#' + $(this).val()).show();
        });
    }); 
```

# c# - 从设置文件迁移

> ID：13472166
> 
> 赞同：1
> 
> 时间：2012-11-20T11:25:13.023
> 
> 标签：c#, .net

除了配置文件之外，我在我的项目中还使用了一个设置文件，并且我希望不再使用设置文件而不是配置文件。

设置文件是默认的`.net`应用程序设置机制（`ApplicationSettingsBase`），我的配置文件是我序列化和`deserialize`手动的自定义类。

我过去成功地应用了`NeedUpgrade/Upgrade()`逻辑来保留以前版本的设置，但不知何故，似乎设置丢失了。

该项目与早期项目的不同之处在于它是使用 Click-Once 部署的。

为了解决这个问题，我希望完全摆脱设置文件，而是使用存储在静态文件夹 ( `Environment.SpecialFolder.LocalApplicationData`) 中的配置文件，但我不知道如何最好地管理此迁移/更改。

任何建议表示赞赏。

# ruby-on-rails-3 - Rails 关联和创建

> ID：13472172
> 
> 赞同：2
> 
> 时间：2012-11-20T11:25:46.647
> 
> 标签：ruby-on-rails-3

我有几个模型设置为公司和员工。一家公司有很多员工，一家公司显然应该能够管理他们的员工。

这里控制器路由的最佳方法是什么？当公司想要添加新员工时，我应该路由到公司控制器还是员工控制器？

例如，我可以路由到`companies/:id/edit`然后使用具有嵌套属性的表单来添加员工。我也可以只路由到`employees/new`，或者我什至可以使用嵌套资源并路由到`companies/:id/employees/new`。

你怎么看？

顺便说一句，我正在使用`STI`，所以`Company < User`和`Employee < User`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:03:16.757

这是个好问题。以下是我对这三个选项的看法：

1.  路由到`companies/:id/edit`是不可接受的。尽管您确实通过添加员工来编辑公司，但这并不意味着此目的。应该使用此路由来编辑公司名称、位置等公司字段。

2.  路由到员工/新员工是一个不错的选择，但不是我会继续的选择。

3.  这是我认为的最佳选择。在您的情况下，嵌套资源仅在其父资源的上下文中创建，因此您的应用程序的每个方面都应遵循这一点。这包括创建这些嵌套资源的 url，以及创建方法本身，应该通过`@company.employees.create!(params[:employee])`而不是通过`Employee.create...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:06:15.177

我认为这可能不是最好的，但它很方便，易于理解，并且遵循 Rails 方式。您应该使用嵌套路由：

```
resources :companies do
  resources :employees
end 
```

现在你将有一些这样的路线：

```
company_employees    GET    /companies/:company_id/employees(.:format)          employees#index
                     POST   /companies/:company_id/employees(.:format)          employees#create
new_company_employee GET    /companies/:company_id/employees/new(.:format)      employees#new 
```

因此，当您创建新员工时，您知道该员工属于哪个公司，这要归功于`:company_id`. 所有创建新员工、更新、销毁的代码......当然，将被放入`EmployeesController`。然后您需要构建一个嵌套表单来创建属于一家公司的新员工。

如果您想创建、编辑、更新……公司？只需为其创建新资源：

`resources :company`

因此，您可以通过路径编辑公司，如您所写的问题：`companies/:id/edit`。

# java - AppEngine Java 中的 Robots.txt

> ID：13472174
> 
> 赞同：5
> 
> 时间：2012-11-20T11:25:55.423
> 
> 标签：java, google-app-engine, robots.txt

我有一个 Java AppEngine 网络应用程序。我在 appengine 管理控制台的仪表板中注意到，每天都会遇到一个 URI 错误`/robots.txt`。

如何消除错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T11:38:03.640

`robots.txt`是搜索引擎和其他机器人在处理您的网站之前使用的神奇 URL。有关更多详细信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Robots_exclusion_standard)。

在 GAE 上处理此错误的最佳方法是放置一个 robots.txt 文件，并将其定义为您的`app.yaml`for gae/python 中的静态文件：

```
- url: /(robots\.txt)
  static_files: \1
  upload: (robots\.txt) 
```

在`appengine-web.xml`gae/java 中：

```
<?xml version="1.0" encoding="UTF-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0"
                   xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'           xsi:schemaLocation='http://kenai.com/projects/nbappengine/downloads/download/schema/appengine-web.xsd appengine-web.xsd'>
    ....
    <static-files>
        <include path="/favicon.ico" />
        <include path="/robots.txt" />
        <include path="/img/**.png" />
        <include path="/img/**.gif" />
        <include path="/css/**.css" />
</static-files> 
```

当然，您也可以忽略错误，它们对除了您自己以外的任何人都无关紧要（没有人遇到错误）。

# java - 从源代码构建 BouncyCastle 1.47 jar

> ID：13472177
> 
> 赞同：1
> 
> 时间：2012-11-20T11:25:59.993
> 
> 标签：java, build, jar, bouncycastle

所以，我想创建一个新的 BouncyCastle 1.47 jar，它不是 OSGi jar。我已经从他们的[站点](http://www.bouncycastle.org/latest_releases.html)下载了源代码（JDK1.5-1.7 的“带有提供程序和轻量级 API 的 JCE”下的 bcprov-jdk15on-147.tar.gz 文件），但是当我提取它和源代码时，我看不到构建脚本。看他们的wiki，他们说应该是一个使用ant的简单案例。

以前有没有人这样做过，可以告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:34:05.607

OSGI[包](http://en.wikipedia.org/wiki/OSGi#Bundles)只是一个 jar 文件，在`MANIFEST.MF`. 我希望您能够将其用作香草 jar 文件。

# javascript - 为什么我的警报没有显示我希望它显示的 DIV？

> ID：13472179
> 
> 赞同：1
> 
> 时间：2012-11-20T11:26:04.283
> 
> 标签：javascript, jquery, ajax, web

以下代码以“未定义”的形式向屏幕发送警报。我想提醒一下`html`。`#div`

```
 $.ajax({
        type: "POST",
        url: pageurl,
        dataType: "html",
        success: function(data){
            alert($(data).children("#div").html());
        }       
    }); 
```

我可以做类似加载的事情，但我不认为我被允许：

```
 url: pageurl + ' #div' 
```

我该如何解决这个问题？

**更新**：根据@Murali 的建议，我尝试了以下方法，但它的行为仍然不像我想要的那样：

```
<html>
<head>
<script type="text/javascript" src="jquery-1.8.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {  
    $.ajax({
            type: "POST",
            url: 'index.html',
            dataType: "html",
            success: function (data) {                    
                alert($(data).find('#site-content').html());
            }
        });
});
  </script>

<title></title>
</head>
<body>
<div id="site-content">
    some data</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:34:01.780

尝试

改变这个

```
 $(data).children("#div").html() 
```

到

```
 $(data).find('#yourDivId').html() 
```

注意：yourDivId -> 给出 div 的 id。在您提到的“#div”代码中，不确定您的代码是否真的像`<div id='div'>`

**我试过的代码**

**在 Index.html 中**

```
 $.ajax({
            type: "POST",
            url: 'page.html',
            dataType: "html",
            success: function (data) {                    
                $(data).find('#site-content').html();
            }
        }); 
```

**在 Page.html 中**

```
 <head>
<title></title>
</head>
<body>
<div id="site-content">
    some data</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:50:55.563

你确定吗

```
$(data).children("#div") 
```

返回定义的元素？试试这个：

```
String($(data).children("#div").html()); 
```

或尝试

```
console.log($(data).children("#div").html()); 
```

为放心返回的数据是字符串而不是空的。

# javascript - 在自定义数据源中显示进度控制

> ID：13472182
> 
> 赞同：0
> 
> 时间：2012-11-20T11:26:09.900
> 
> 标签：javascript, microsoft-metro

我正在尝试创建自己的数据源。我正在关注[示例代码](http://code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128#content)。

但是我无法找到显示进度控件的方法。我搜索整个示例代码。我无法控制任何进度。

基本上，我不知道如何知道数据源已完成获取数据。任何人都可以给我一个提示/样本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:21:36.677

进度控制标记如下：

```
<progress></progress> or <progress class='win-ring'></progress> 
```

关于知道何时成功检索数据的第二个问题是[promise](http://msdn.microsoft.com/en-us/library/windows/apps/br211867.aspx)的完美工作。

# java - Android ListView 持久化背景

> ID：13472185
> 
> 赞同：4
> 
> 时间：2012-11-20T11:26:13.863
> 
> 标签：java, android, listview, layout, background

我的问题是：是否可以将可绘制资源应用于 ListView 中的 TextView，使其保持其背景颜色，在用户抬起手指离开所述 TextView 后？

考虑：

1.  用户在 ListView 中选择一个项目
2.  列表项突出显示
3.  用户将他/她的手指从物品上移开
4.  该项目不再突出显示

我的问题是，是否可以让对象在步骤 4 中保持突出显示？我目前正在为我的列表项使用可绘制的状态列表。我试过了

`android:state_focused="true"`

`android:state_selected="true"`

`android:state_check="true"`

提前致谢 ：）

**编辑**

解决了。我通过java代码实现了这一点。对于那些感兴趣的人，我做了以下事情：

声明了一个整数变量“previous”，用于存储前一个索引，从第一个项目的 0 开始，并通过 setBackground() 强制突出显示它。

然后，在列表的 onItemClickListener 中，我简单地清除上一个项目的突出显示，突出显示当前，并将 'previous' 设置为当前选定项目的索引。

不知道在 xD 之前我怎么没有想到这一点，我通常擅长解决问题。

我猜在某个时候会发生在我们所有人身上：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:57:33.153

尽管您的方法可行，但这是我想避免的额外代码。实现这一点的步骤如下：

将列表视图的选择模式设置为 singleChoiceMode。

制作这个选择器

```
<?xml 版本="1.0" 编码="utf-8"?>
<选择器 xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/color_light_blue_for_selected_item" android:state_checked="true"/>

</选择器>

```

Set this as the background of your list items.

And it should work.

# javascript - 无法形成正则表达式

> ID：13472187
> 
> 赞同：1
> 
> 时间：2012-11-20T11:26:25.890
> 
> 标签：javascript, regex

我使用下面的正则表达式来检查字母、数字、字符、+ 和 -

```
if (/[^a-z0-9\-\+]+$/i.test(value)) 
        {
            alert ("Only alphabets and numbers are allowed.");
            return;
        } 
```

如果使用了任何特殊字符，这将显示消息。但我面临的一个问题是，如果该值是特殊字符和字母或数字的组合，那么这个条件不满足。例如，如果值为，`%$2`则条件不返回 true 并显示消息。我希望如果存在任何特殊字符，那么条件应该满足并显示消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:28:40.457

你不应该使用`$`锚。在您的情况下，决赛`+`也不是必需的。以下检查字符串是否包含任何不允许的字符：

```
if (/[^a-z0-9\-\+]/i.test(value)) 
{
    alert ("Only alphabets and numbers are allowed.");
    return;
} 
```

您也可以反转条件。（使用`*`或`+`取决于您是否允许空字符串。）以下检查整个字符串是否仅包含允许的字符：

```
if (!/^[a-z0-9\-\+]*$/i.test(value)) 
{
    alert ("Only alphabets and numbers are allowed.");
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:32:53.157

`$`匹配字符串的结尾，`$`在您的情况下不需要

`+`匹配前一个令牌一次或多次，

在您的情况下也不需要

```
 if (/[^a-z0-9\-\+]/i.test(value)) 
    {
        alert ("Only alphabets and numbers are allowed.");
        return;
    } 
```

# javascript - 增强函数原型以在执行之前调用给定函数

> ID：13472188
> 
> 赞同：2
> 
> 时间：2012-11-20T11:26:33.057
> 
> 标签：javascript, function, prototype, aop, function-prototypes

我想为 JavaScript 函数做一个类似 AOP 的“之前”功能。

所以我寻找现有的解决方案并找到了 jQuery 的 aop-plugin。不幸的是，插件只是简单地包装了给定的函数。因此，任何在增强功能之前指向原始功能的对象，仍然指向原始功能。从这些对象调用函数会调用该函数的非增强版本。

我不想用其他函数包装函数，而是想更改函数对象本身，因此以前的引用不会导致意外行为。所以我得到了这样的东西：

```
(function(){}).constructor.prototype.before = function(beforeFunction){
    this.beforeFunction = beforeFunction;
};

/* some magic should happen here: enhance call? */

function logFoo() {
    console.log("Foo");
};
function logBar() {
    console.log("Bar");
};

logFoo(); // logs "Foo"

logFoo.before(logBar);

logFoo(); // should log "Bar", then "Foo" 
```

所以问题是，当调用增强函数时，如何调用 beforeFunction？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T11:30:43.673

函数的主体、参数和引用环境是不可变的，因此您无法增强函数，只能创建新函数。

您可以像这样从一开始就使您的功能可增强：

```
Function.prototype.enhanceable = function() {
    var original = this,
        enhanced = [],
        ret = function() {
            for( var i = 0; i < enhanced.length; ++i ) {
                enhanced[i].apply( this, arguments );
            }

            return original.apply( this, arguments );
        };

    ret.before = function( fn ) {
        enhanced.push( fn );
    };

    return ret;
}; 
```

然后：

```
var logFoo = function() {
     console.log( "foo" );
}.enhanceable();

var logBar = function() {
     console.log( "bar" );
};

logFoo(); //foo

logFoo.before( logBar );

logFoo(); //logs bar, then foo 
```

# ruby - 在派生自 Hash 的类上使用 Object.inspect / Object.to_s

> ID：13472195
> 
> 赞同：0
> 
> 时间：2012-11-20T11:27:13.733
> 
> 标签：ruby

我有一个从哈希派生的类。当我在 IRB 中使用它时，它会将散列的内容转储到控制台。相反，我希望它以与表单中的`Object.inspect/.to_s`（不确定哪个）相同的方式打印`#<MyHash:0x201e4c0>`。我如何实现这一目标？

**编辑**我不得不删除次要问题，因为它导致了混乱。上面的问题是我需要回答的。这是我删除的：

*有没有办法调用继承层次结构中更高的类的方法？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:46:46.030

编写要与他人共享的新类时，其中一项基本工作是定义一些基本方法，其中包括`#inspect`、`#to_s`、`#==`和`#<=>`其他几个方法。所以你自己必须`inspect`在创建一个新类时编写你的函数。

你的职责就这么多。但是现在，对于您的问题，通常可以说是如何在一个类中利用深层祖先的方法，一种方法是这样的：

```
class MyHash < Hash
  def inspect
    Object.instance_method( :inspect ).bind( self ).call
  end
end 
```

在这里，要求是`MyHash`的后代`Object`，否则 UnboundMethod 实例不会绑定到它。（对于`Object`，这显然是正确的，但一般情况可能并非如此。）

评论后更新：

上面的代码允许 MyHash 调用 Object 实例方法`inspect`。要强烈地感知效果，必须使用方法重复该过程`to_s`，该方法由 Object#inspect 调用：

```
class MyHash < Hash
  def inspect
    Object.instance_method( :inspect ).bind( self ).call
  end
end

h = MyHash[ a: 1, b: 2 ]
#=> {:a=>1, :b=>2 }
# The above code did work, but Object#inspect happens to call to_s() instance method
# To see the change

class MyHash
  def to_s
    Object.instance_method( :to_s ).bind( self ).call
  end
end

h.inspect
#=> "#<MyHash:0x90ee01c>" 
```

# ruby - 是否可以从 ruby 方法调用黄瓜步骤？

> ID：13472196
> 
> 赞同：0
> 
> 时间：2012-11-20T11:27:17.357
> 
> 标签：ruby, cucumber

可以[从 step 定义中调用 cucumber step](https://github.com/cucumber/cucumber/wiki/Calling-Steps-from-Step-Definitions)。我想从普通的 ruby​​ 方法调用 step，即：

```
module MyHelpers
  def self.my_method
    step %{My step}
  end
end 
```

目前，当我这样做时，我有

```
undefined method `step' for MyHelpers:Module (NoMethodError) 
```

是否可以从 Ruby 方法调用步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:21:28.430

我不认为你可以调用红宝石方法的步骤。由于“步骤”用于重复使用水豚宝石对黄瓜进行步骤定义。

无需重复即可再次调用您的方法的更好方法，只需将其定义为全局方法并调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T21:54:40.573

为了从另一个步骤定义中调用一个步骤定义，请执行以下操作：

And(/^I delete the integration quote$/) do
step "I delete the quote"
end

And(/^I delete the quote$/) do end

重要的是要记住“And”、“When”和“Then”是继承的，即我不能这样做

Then(/^I delete the integration quote$/) do
step "And I delete the quote"
end

# objective-c - 关于捕获视频截图的问题

> ID：13472197
> 
> 赞同：1
> 
> 时间：2012-11-20T11:27:23.430
> 
> 标签：objective-c, ios, ipad, video, mpmovieplayercontroller

我想在我的 ipad 应用上截取一段视频。

我在SO上搜索，我发现了很多示例代码。我尝试了一切，但似乎没有任何效果。

我尝试了所有这些方法：

* * *

### 1）尝试： MPMoviePlayerController

```
- (void) previewWithPlayer:(NSString*)path image:(UIImageView*)imView
{
  MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:path]];
  UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
  [player stop];
  [player release];

  imView.image = thumbnail;
} 
```

### 2）尝试： AVAssetImageGenerator - v1

```
- (void) generateImage:(NSString*)path image:(UIImageView*)imView
{
  AVAsset *asset = [AVAsset assetWithURL:[NSURL URLWithString:path]];
  AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc]initWithAsset:asset];
  CMTime time = CMTimeMake(1, 1);
  UIImage *thumbnail = [UIImage imageWithCGImage:[imageGenerator copyCGImageAtTime:time actualTime:NULL error:NULL]];
  imView.image = thumbnail;
} 
```

### 13）尝试：AVAssetImageGenerator - v2

```
- (void) generateImage:(NSString*)path image:(UIImageView*)imView
{
  AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:[NSURL URLWithString:path] options:nil];
  AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
  generator.appliesPreferredTrackTransform=TRUE;
  [asset release];
  CMTime thumbTime = CMTimeMakeWithSeconds(2,30);

  AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
    if (result != AVAssetImageGeneratorSucceeded) {
      NSLog(@"couldn't generate thumbnail, error:%@", error);
    }

    UIImage *thumbImg = [[UIImage imageWithCGImage:im] retain];
    imView.image = thumbImg;
    [generator release];
  };

  CGSize maxSize = CGSizeMake(320, 180);
  generator.maximumSize = maxSize;
  [generator generateCGImagesAsynchronouslyForTimes:[NSArray arrayWithObject:[NSValue valueWithCMTime:thumbTime]] completionHandler:handler];
} 
```

但**没有任何**效果。
我试过 MOV，MP4，什么都没有。

路径正确，视频正常。

```
NSString *fPath = [[NSBundle mainBundle] pathForResource:@"VideoA" ofType:@"mp4"];
NSLog(@"%@", fPath);
[self generateImage:fPath image:_ImgA]; 
```

可能是什么问题？我的图像视图什么也不显示，也没有返回错误。
iOS 是 6.0/5.1，在 iPad 模拟器/设备上。

视频为 854×480 像素，H.264，AAC。大约30Mb的大小。

请帮助我，因为我正在为这个问题发疯。

谢谢。

* * *

## 编辑

在设备上返回此错误：

> 无法生成缩略图，错误：Error Domain=NSURLErrorDomain Code=-1 "unknown error" UserInfo=0x1e0a2f30 {NSUnderlyingError=0x1e0a3900 "操作无法完成。(OSStatus error -12935.)", NSLocalizedDescription=unknown error}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:00:44.173

解决了。
诀窍：使用`fileURLWithPath:`，而不是`URLWithString:`。显然，差异是非常非常重要的。

感谢诺亚。[https://stackoverflow.com/a/4201419/88461](https://stackoverflow.com/a/4201419/88461)

# c# - 无法看到按钮 asp.net

> ID：13472200
> 
> 赞同：1
> 
> 时间：2012-11-20T11:27:33.843
> 
> 标签：c#, asp.net, button

我无法在另一个按钮单击事件上看到我的按钮。

**.aspx**

```
<asp:Button ID="btnActivate" runat="server" SkinID="skinLoginButton"
    Text="Activate" ToolTip="Activate" CausesValidation="true"
    ValidationGroup="UserAuthentication" onclick="btnActivate_Click" />

<asp:Button ID="btnhomepage" Visible="false" runat="server" 
    Text="Goto Homepage" CssClass="cssLoginButton" onclick="btnhomepage_Click"/> 
```

**。CS**

```
#region btnActivate_Click
    protected void btnActivate_Click(object sender, EventArgs e)
    {
       this.btnhomepage.Visible = true;
    }
    #endregion 
```

我`this.btnhomepage.Visible = true;`在**.cs**文件中使用。

我的代码或清除有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:00:07.743

```
<asp:Button ID="btnhomepage" Visible="false" runat="server" 
Text="Goto Homepage" CssClass="cssLoginButton" onclick="btnhomepage_Click"/> 
```

在标记中使用 visible 属性时，您将强制您的控件为 visible=false 并永远保持为 false。**asp.net 引擎在渲染**阶段将asp.net 控件渲染为asp.net 页面生命周期中的html 控件。即使您更改了事件背后的任何代码中的控制属性

解决方法：设置控制行为动态时不要使用makup属性

页面生命周期链接：

[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx) [http://www.codeproject.com/Articles/73728/ASP-NET-Application-and-Page-生命周期](http://www.codeproject.com/Articles/73728/ASP-NET-Application-and-Page-Life-Cycle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:44:54.947

从按钮中删除可见属性`btnhomepage`并使其在 Page_Load 中不可见

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack)
   {
        this.btnhomepage.Visible = false;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:41:00.027

尝试这个

```
btnhomepage.Visible = true;
btnhomepage.Enabled = true;
btnhomepage.Style.Add("display", "block"); 
```

# mysql - 在 SQL 中对两行求和（前一行，一个是同一表中的当前行）

> ID：13472201
> 
> 赞同：0
> 
> 时间：2012-11-20T11:27:35.520
> 
> 标签：mysql, sql

我有这张桌子：

```
Date_on      deposited  withdrawal   in_bank
2012-09-1      3000       2000        50000
2012-09-2/t    4000/t        0        54000
2013-09-3/t    3000       2000        55000 
```

现在我想执行一个查询来添加存款金额并从前几天的条目中减去提款`in_bank`。我怎样才能做到这一点？任何人都可以帮助我吗？这是我的查询：

```
select date_on, in_bank,((in_bank+deposited)-withdrawal)
  from  tablename where date_on > '2012-09-01' order by date_on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:31:12.677

```
SELECT today.withdrawal, today.deposited, today.date_on,
  (IFNULL(today.deposited, 0) - IFNULL(today.withdrawal, 0)) + IFNULL((SELECT in_bank FROM tablename AS yesterday WHERE yesterday.date_on = DATE_SUB(today.date_on, INTERVAL 1 DAY)), 0)
FROM tablename AS today
WHERE date_on BETWEEN '2012-09-01' AND '2012-09-02'
ORDER BY date_on ASC 
```

如果找不到前几天的日期，查询将假定余额为零。

添加了一个小提琴 [http://sqlfiddle.com/#!2/d8261/14](http://sqlfiddle.com/#!2/d8261/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:58:19.300

```
SELECT 
  date_on, 
  in_bank, 
  (( ISNULL(in_bank, 0) + ISNULL(in_deposited,0)) - ISNULL(withdrawal,0))
FROM tablename 
WHERE date_on > '2012-09-01' 
ORDER BY date_on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:39:49.390

尝试这个：

```
SELECT
  t1.date_on,
  t1.in_bank,
  (
    SELECT in_bank
    FROM
    (
      SELECT *, (@rownum2 := @rownum2 +1) rank
      FROM Table1,(SELECT @rownum2 :=0 ) t
      ORDER BY date_on 
     ) t2 WHERE t1.rank - t2.rank = 1
   ) - t1.withdrawal - deposited "total"
FROM
(
  SELECT *, (@rownum := @rownum +1) rank
  FROM Table1,(SELECT @rownum :=0 ) t
  ORDER BY date_on 
) t1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f09a5/5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:32:07.767

我对mysql不是很熟悉，但这可能会有所帮助

```
select account.*,D.expectable from account left join 
(
select deposited - withdrawal + in_bank as expectable,DATE_ADD(Date_on,INTERVAL 1 DAY) as nDate from account
)
D on account.Date_on = D.nDate 
```

# ruby-on-rails - 生产和测试环境中的多态关系

> ID：13472203
> 
> 赞同：0
> 
> 时间：2012-11-20T11:27:47.403
> 
> 标签：ruby-on-rails, activerecord

我有一个带有源属性的 ActiveRecord 模型消息，以及两个可以作为源的继承模型：

```
class Message < ActiveRecord::Base
  belongs_to :source, :polymorphic => true
end

class Parent < ActiveRecord::Base
end

class A < Parent
  has_many :messages, :as => :source
end

class B < Parent
  has_many :messages, :as => :source
end 
```

问题是在测试环境中，`message.source_type`属性是 A 还是 B，取决于源的类型。但是当我尝试在生产中使用该应用程序时，`message.source_type`是`Parent`.

```
message = Message.new
a = A.new
message.source = a
# test mode: message.source_type == A
# production mode: message.source_type == Parent 
```

我试图修复`source_type`with `message.source_type = A.to_s`，但没有帮助。您是否知道以与测试环境相同的方式在生产环境中使用我的软件的良好解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:25:29.047

你不应该把你的类叫做 Base，它会给你带来很大的问题，因为 Base 是为一些 ruby​​/rails 类保留的。也许这就是问题所在。

# asp.net-mvc - 禁用某些字段的验证

> ID：13472205
> 
> 赞同：8
> 
> 时间：2012-11-20T11:27:50.620
> 
> 标签：asp.net-mvc

在我的 Razor 视图（ASP.NET MVC 4）中，我有两个用于显示/隐藏某些字段的单选按钮。当第一个单选按钮被选中时，这些字段是不可见的；当第二个单选按钮被选中时，字段变为可见。这是由绑定到单选按钮 onclick 事件的 Javascript 函数完成的。

```
function displayHiddenFields(value) {
  if (value == 'true')
    $('#myDiv').removeClass('hidden');
else
    $('#myDiv').addClass('hidden');
} 
```

我在视图模型上使用数据注释来执行验证。我的问题是不可见的字段也得到了验证。这些字段只有在它们可见时才需要进行验证。我试图操纵输入元素上的 data-val 属性，但这不起作用。

```
$('input1').attr('data-val', value); 
```

我该如何解决我的问题？有没有办法通过使用客户端 Javascript 来禁用对不可见字段的验证？否则，我必须进行回发才能有条件地呈现字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T13:22:55.397

我通过在页面底部添加以下 JavaScript 来解决它：

```
 <script type="text/javascript">
    $(function () {
        var settings = $.data($('form').get(0), 'validator').settings; 
        settings.ignore = ".hidden";
    });
</script> 
```

这样，所有应用了 .hidden 类的输入都将在客户端验证中被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-13T08:56:49.943

```
<button id="Submit" type="submit">Submit</button>
<script type="text/javascript">
    $("#Submit").on("click", function () {
        var validator = $("form").data('validator');
        validator.settings.ignore = "input[type=hidden]";
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:49:30.360

我建议使用 jQuery 验证。您可以有条件地验证您的模型：

```
if($("#field").is(":checked")){
//Add some validation here
}else{
//Default validation here
}
if($("form").valid()){
 //Do processing
} 
```

问题将在后端。如果您使用数据注释，我会假设您也在控制器中验证模型；'Model.isValid()'之类的东西？只要您的两种情况（单击单选按钮 1 或单击按钮 2）始终与“有效”模型相匹配，就可以了。否则，您可能必须关闭某些数据注释。只是根据我的经验。 [jQuery 验证文档](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T07:45:38.880

默认情况下（至少在不显眼的验证的更高版本中）忽略字段设置为“:hidden”（由 jQuery 评估），这比仅检查 class="hidden" 或 type="hidden" 要好得多。

# c - 查找由 fmemopen 创建的文件的大小

> ID：13472210
> 
> 赞同：3
> 
> 时间：2012-11-20T11:27:58.340
> 
> 标签：c, linux, stdio

我正在使用`fmemopen`创建一个变量`FILE* fid`以将其传递给从打开的文件中读取数据的函数。

在该函数的某处，它使用以下代码来找出文件的大小：

```
fseek(fid, 0, SEEK_END);
file_size = ftell(fid); 
```

这在常规文件的情况下效果很好，但在我创建的文件 ID 的情况下，`fmemopen`我总是得到`file_size = 8192`

任何想法为什么会发生这种情况？有没有一种方法可以获得适用于常规文件和使用创建的文件的正确文件大小`fmemopen`？

**编辑：** 我的电话`fmemopen`：

```
fid = fmemopen(ptr, memSize, "r"); 
```

其中`memSize`！= 8192

**编辑2：**

我创建了一个最小的例子：

```
#include <cstdlib>
#include <stdio.h>
#include <string.h>
using namespace std;

int main(int argc, char** argv)
{
    const long unsigned int memsize = 1000000;
    void * ptr = malloc(memsize);
    FILE *fid = fmemopen(ptr, memsize, "r");
    fseek(fid, 0, SEEK_END);
    long int file_size = ftell(fid);
    printf("file_size = %ld\n", file_size);
    free(ptr);
    return 0;
} 
```

顺便说一句，我目前正在另一台计算机上工作，在这里我得到 file_size=0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:30:59.903

在这种情况下`fmemopen`，如果您使用该选项打开，`b`则[SEEK_END 测量内存缓冲区的大小](http://www.kernel.org/doc/man-pages/online/pages/man3/fseek.3.html)。您看到的值必须是默认缓冲区大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:05:43.563

好的，我自己解决了这个谜。文档说：

> 如果 opentype 指定追加模式，则初始文件位置设置为缓冲区中的第一个空字符

然后：

> 对于打开以供读取的流，缓冲区中的空字符（零字节）不算作“文件结尾”。仅当文件位置超过 size 字节时，读取操作才指示文件结束。

这似乎是`fseek(fid, 0, SEEK_END)`缓冲区中的第一个零字节，而不是缓冲区的末尾。

仍在寻找一种适用于标准和 fmemopen 文件的方法。

# aspxgridview - 在 ASPxGridview 中绑定控件？

> ID：13472213
> 
> 赞同：0
> 
> 时间：2012-11-20T11:28:07.243
> 
> 标签：aspxgridview

我有一个ASPxGridview，里面有一个DataItemTepmplete，它包含一个ASPxRadioButtonList 和一个三个ASPxCheckBoxList。在单选按钮列表的 SelectedIndexChange 上，我根据某些值绑定了一个复选框列表。第一次它没有给出错误并且完美绑定，当我更改radiolist的值时，出现一个javascript错误，它是：

Microsoft JSCript 运行时错误：parentNode 为空或不是对象。

我已经尝试过上下颠簸并浪费了一整天的时间试图找出问题所在，但到目前为止还没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:30:54.523

我认为在第一个 SelectedIndexChanged 事件之后发生的回发会破坏您页面中的某些内容。尝试改用 ASPxCheckBoxList 的 ClientSideEvents。

# xml - 如何使用xslt从xml中的属性子项更新属性父项

> ID：13472216
> 
> 赞同：2
> 
> 时间：2012-11-20T11:28:16.437
> 
> 标签：xml, xslt

我是 XSLT 世界的新手，但我有 XML：

```
<Response>
<Campaign Position_Aut="1" Campaign_Id="A" Campaign_Status="Active" >
    <Groups Name="gplust_campaign_test_group"></Groups>
    <Groups Name="g1"><Position PositionId="1-6MOJ6"></Position></Groups>
</Campaign>
<Campaign Position_Aut="1" Campaign_Id="B" Campaign_Status="Active" >
    <Groups Name="g2"></Groups>
</Campaign>
<Campaign Position_Aut="1" Campaign_Id="C" Campaign_Status="Completed" >
</Campaign>
</Response> 
```

我需要更改 xml，所以如果一个 Campaign 有一个 Position，属性 Position_Aut 应该是“0”，而不是“1”，并忽略该 Campaign 的所有子项。这是我需要的 XML 结果：

```
<Response>
<Campaign Position_Aut="0" Campaign_Id="A" Campaign_Status="Active" ></Campaign>
<Campaign Position_Aut="1" Campaign_Id="B" Campaign_Status="Active" ></Campaign>
<Campaign Position_Aut="1" Campaign_Id="C" Campaign_Status="Completed" ></Campaign>
</Response> 
```

XSLT 应该是什么样子？请您的帮助，如果不清楚，请问我。谢谢，巴克布克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:57:10.620

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="@Position_Aut[../Groups/Position]">
  <xsl:attribute name="{name()}">
    <xsl:value-of select="'0'" /> 
  </xsl:attribute>
</xsl:template>

</xsl:stylesheet> 
```

...产生输出...

```
<Response>
  <Campaign Position_Aut="0" Campaign_Id="A" Campaign_Status="Active">
    <Groups Name="gplust_campaign_test_group" />
    <Groups Name="g1">
      <Position PositionId="1-6MOJ6" />
    </Groups>
  </Campaign>
  <Campaign Position_Aut="1" Campaign_Id="B" Campaign_Status="Active">
    <Groups Name="g2" />
  </Campaign>
  <Campaign Position_Aut="1" Campaign_Id="C" Campaign_Status="Completed" />
</Response> 
```

## 更新

要删除 Campaign 的子项，请包含此模板...

```
<xsl:template match="Campaign">
 <xsl:copy>
   <xsl:apply-templates select="@*"/>
 </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:02:30.630

**这是一个简单而完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Campaign[Groups/Position]">
  <Campaign Position_Aut="0">
   <xsl:apply-templates select="@*[not(name()='Position_Aut')]"/>
  </Campaign>
 </xsl:template>
 <xsl:template match="Campaign/node()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Response>
 <Campaign Position_Aut="1" Campaign_Id="A" Campaign_Status="Active" >
    <Groups Name="gplust_campaign_test_group"></Groups>
    <Groups Name="g1"><Position PositionId="1-6MOJ6"></Position></Groups>
 </Campaign>
 <Campaign Position_Aut="1" Campaign_Id="B" Campaign_Status="Active" >
    <Groups Name="g2"></Groups>
 </Campaign>
 <Campaign Position_Aut="1" Campaign_Id="C" Campaign_Status="Completed" >
 </Campaign>
</Response> 
```

**产生了想要的正确结果**：

```
<Response>
   <Campaign Position_Aut="0" Campaign_Id="A" Campaign_Status="Active"/>
   <Campaign Position_Aut="1" Campaign_Id="B" Campaign_Status="Active"/>
   <Campaign Position_Aut="1" Campaign_Id="C" Campaign_Status="Completed"/>
</Response> 
```

**说明**：

正确使用和覆盖[**标识规则**](http://dpawson.co.uk/xsl/sect2/identity.html)——这是最基本的 XSLT 设计模式。

# jquery - 如何使用 jquery 从目标到源 div 取回 jpg“图像”？

> ID：13472220
> 
> 赞同：0
> 
> 时间：2012-11-20T11:28:19.800
> 
> 标签：jquery, image, checkbox

大家好，我正在处理 jquery，我有这样的 html，我想在复选框选择工作时将图像从一个 div 移动到另一个 div，但问题是当我取消选中这里我的代码时，我需要取回该图像跟随

```
 <div class="grid row-fluid">
      <div>
        <span class="span1">                
        <input type="checkbox" class="regular-checkbox" id="Header" />
        <label for="Header"></label>                
        </span> 
        <span class="span1"> <img class="img-polaroid" src="http://placehold.it/140x140"></span> 
       </div>

         <div>
        <span class="span1">                
        <input type="checkbox" class="regular-checkbox" id="Header" />
        <label for="Header"></label>                
        </span> 
        <span class="span1"> <img class="img-polaroid" src="http://placehold.it/140x140"></span> 
       </div>
       </div>

       <div id="div2"></div> 
```

这是我的jQuery

```
 $(function(){
  $('input[type="checkbox"]').click(function(){
    AddToCart(this);
  });
});

function AddToCart(obj) {
  var $this = $(obj).closest('div');
  var img = $this.find('img');
  $('#div2').append(img);
} 
```

它的工作需要取回那些未选中时检查的图像请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:34:10.543

```
$('input').change(function(){
  if($(this).is(':checked')){
    //Do something if it's checked.
  }
  else {
    //Do something if it's not checked.
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:40:51.330

试试这个

```
$('input').change(function(){
   if($(this).is(':checked')){
      var $this = $(this).closest('div');
      var img = $this.find('img');
      $('#div2').append(img);
 }
 else {
      var img = $('#div2').find('img');
      var $this = $(this).closest('div');
      $this.append(img);
 }
}); 
```

代码错误已解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:35:32.910

试试这个..

```
$('#checkboxid').change(function () {
                if ($("#check1").prop('checked') == true) {
                    addtodiv(this);
                } else {
                    addtoprevdiv('#container3');
                }
            });
        function addtodiv(obj) {
            var $this = $(obj).closest('div');
            var img = $this.find('img');
            $('#container3').append(img);
        }
        function addtoprevdiv(obj) {
            var $this = $(obj).closest('div');
            var img = $this.find('img');
            $('#container2').append(img);
        } 
```

# android - 使用 SimpleDateFormat 解析日期字符串

> ID：13472223
> 
> 赞同：2
> 
> 时间：2012-11-20T11:28:43.747
> 
> 标签：android, simpledateformat

我想解析这样发送给我的日期..

```
2011-03-02T09:06:07.404-07:00 
```

**问题是**在使用 SimpleDateFormat 对象时，我得到一个解析异常，我很确定它是因为时区中的冒号。

这是我的 SimpleDateFormat 设置。

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ"); 
```

以下是开发人员文档中可解析日期字符串的可能差异列表。如您所见，它们在时区中都没有冒号。

```
 yyyy-MM-dd 1969-12-31
                     yyyy-MM-dd 1970-01-01
               yyyy-MM-dd HH:mm 1969-12-31 16:00
               yyyy-MM-dd HH:mm 1970-01-01 00:00
              yyyy-MM-dd HH:mmZ 1969-12-31 16:00-0800
              yyyy-MM-dd HH:mmZ 1970-01-01 00:00+0000
       yyyy-MM-dd HH:mm:ss.SSSZ 1969-12-31 16:00:00.000-0800
       yyyy-MM-dd HH:mm:ss.SSSZ 1970-01-01 00:00:00.000+0000
     yyyy-MM-dd'T'HH:mm:ss.SSSZ 1969-12-31T16:00:00.000-0800
     yyyy-MM-dd'T'HH:mm:ss.SSSZ 1970-01-01T00:00:00.000+0000 
```

**我的第二个问题**是当我得到一个时区设置为 Z 的日期字符串时。这是将时区设置为 GMT 的标准，相当于 0000。但是我再次收到 ParseException。这是日期字符串的示例。

```
2011-01-14T10:50:31.520Z 
```

**编辑**

这是我解析日期字符串的方式..

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
Date date = null;
try {
    Log.d("CCDateUtilss", "Need to remove the colon from the date string in the timeszone");
    date = sdf.parse(string);
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
return date.getTime(); 
```

**可能的解决方案**

我可以通过并替换字符串中出现的问题，以便它正确解析还是有一个我不知道的更优雅的解决方案？

**提前致谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:33:13.957

我使用以下方法来解析来自不同来源的文本日期，这些来源可能会返回不同的格式（包括带冒号的时区）：

```
private SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");

private long getTime(String time) throws Exception {
    try {
        return this.format.parse(time).getTime();
    } catch (Exception e) {
        format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
    }
    try {
        return this.format.parse(time).getTime();
    } catch (Exception e) {
        format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
        //For this you may need to manually adjust time offset
    }
    try {
        return this.format.parse(time).getTime();
    } catch (Exception e) {
        format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ssZ");
    }
    try {
        return this.format.parse(time).getTime();
    } catch (Exception e) {
        format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss'Z'");
        //For this you may need to manually adjust time offset
    }
    return this.format.parse(time).getTime();
} 
```

`Note:`如果字符串以 . 结尾，您可能需要手动调整时区偏移量`Z`。

为了效率，这总是首先尝试最后的工作格式。

问候。

# activerecord - Rails STI - 子类中的自定义关联

> ID：13472227
> 
> 赞同：3
> 
> 时间：2012-11-20T11:28:56.553
> 
> 标签：activerecord, sti

```
class Upload < ActiveRecord::Base
    has_many :comments
end

class Gallery < Upload
    has_many :images
end

class MusicAlbum < Upload
    has_many :audio_tracks
end 
```

这应该按预期工作吗？Gallery 和 MusicAlubm 模型是否会从其父模型（上传）继承 :comments 关联并添加自己的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T14:29:51.827

是的，模型只是类，当被继承时，它们会从父类中获取所有方法。因此，由于两者`Gallery`和`MusicAlbum`都是`Upload`模型的后代，它们将具有`has_many :comments`关联，并且两者都将从`uploads`db 表中获取数据（需要有一个`type`列来支持该模型的 STI）

可以在[这里找到一个很好的简单 STI 示例](http://railsforum.com/viewtopic.php?id=3815)

# batch-file - 如何计算批处理文件中使用的总字符数，并在最后通过同一文件输出？

> ID：13472228
> 
> 赞同：0
> 
> 时间：2012-11-20T11:28:54.293
> 
> 标签：batch-file

我需要某种脚本（将其命名为“Alpha”），它可以帮助我计算批处理脚本中使用的总字符数（将其命名为“Beta”）（其数据附加到文本文件中）并输出相同在最终附加的 txt 文件中。

如果可能的话，我们是否可以将 Alpha 放入 Beta 中，而 Beta 及其原始输出将在附加的文本文件中显示 Beta 中的字符。

问候 AK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:06:01.250

您是否尝试过自己研究如何做到这一点？

TYPE 可用于打印文件的内容。

```
type beta.bat 
```

FIND 可用于计算文件中的行数。此命令将打印文件名，后跟行数

```
find /c /v "" beta.bat 
```

您可以通过将文件的内容通过管道传输到命令中来仅打印行数

```
type beta.bat | find /c /v "" 
```

您可以使用`>`运算符将​​任何命令的输出重定向到新文件

```
echo test >file.txt 
```

`>>`您可以使用运算符将​​任何命令的输出附加到现有文件

```
echo test2 >>file.txt 
```

也许您可以使用上面的构建块来编写自己的脚本。

# asp.net-mvc - 从 HttpActionContext 获取会话

> ID：13472229
> 
> 赞同：9
> 
> 时间：2012-11-20T11:28:59.487
> 
> 标签：asp.net-mvc

我正在尝试创建一个权限属性以在我的控制器的每个操作中进行配置，因此这个自定义属性应该从用户那里获取 sessionId。我的代码是这样的：

```
public class PermissionChecker: ActionFilterAttribute
{
    private int _permissionId { get; set; }
    private IUserSelectorService _userService { get; set; }

    public PermissionChecker(int permissionId)
    {
        _permissionId = permissionId;
        _userService = new UserSelectorService();
    }

    public PermissionChecker(int permissionId, IUserSelectorService userService)
    {
        _permissionId = permissionId;
        _userService = userService;
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (_userService.HasPermission(_permissionId, /* here I must pass the session["Id"]*/)){
             base.OnActionExecuting(actionContext);
             return;
        }
        throw new HttpException(401, "Unauthorized");
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T11:31:35.333

用这个

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    if(filterContext.HttpContext.Session != null)
    {
      var id = filterContext.HttpContext.Session["Id"];          
    }
} 
```

**编辑** 鉴于您使用的是 MVC 4 而您没有

```
public override void OnActionExecuting(ActionExecutingContext filterContext) 
```

尝试使用

```
System.Web.HttpContext.Current.Session 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-10T12:27:58.367

如果您尝试使用 ActionFilterAttribute 进行访问，则 OnActionExecting 事件不会提供 HttpContext 与 System.Web.Http 的可访问性。

相反，如果您尝试使用 System.Web.Mvc 访问，它将在 ActionExecutingContext 类的帮助下为您提供带有 onActionExecting 事件的当前会话。

# c# - Silverlight 中“src”标签上未声明的错误

> ID：13472232
> 
> 赞同：0
> 
> 时间：2012-11-20T11:29:14.137
> 
> 标签：c#, silverlight-5.0, windows-phone-8

我有这个转换器类：

```
 namespace WorkflowPhone8.Helpers_and_Extensions
{
    public class InboxItemValueConverters : IValueConverter 
    {
        public object Convert(object value, System.Type targetType,
                                object parameter, CultureInfo culture)
        {
            int urgency = (int)value;
            Brush brush = new SolidColorBrush();

            if (urgency == 0)
            {
                brush = new SolidColorBrush(Colors.Green);
            }
            else if (urgency == 1)
            {
                brush = new SolidColorBrush(Colors.Yellow);
            }
            else if (urgency == 2)
            {
                brush = new SolidColorBrush(Colors.Red);
            }

            return brush;
        }

        public object ConvertBack(object value,  System.Type targetType,
                                  object parameter,  CultureInfo culture)
        {
            return null;
        }

    } 
```

在我的 xaml 中，我引用了这个类，如下所示：

```
<phone:PhoneApplicationPage.Resources>
   <src:InboxItemValueConverters x:Key="converttocolor" /> 
```

当我构建解决方案时，它说：

错误 1 ​​'src' 是一个未声明的前缀。第 71 行，第 6 位。

任何人都知道它为什么这样做？还是我应该以另一种方式引用它？使用 Visual Studio 2012、Windows Phone 8、Silverlight、C#

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:34:09.023

您需要`src`在 XAML 中声明为命名空间。会是这样的。

```
<Window xmlns:src="clr-namespace:WorkflowPhone8.Helpers_and_Extensions;assembly=WorkflowPhone8"> 
```

尽管您的`Window`-class（或者`UserControl`如果您在用户控件中使用它）也将具有其他命名空间，因此只需将正确的命名空间声明附加到 XAML 中的根元素即可。

# simplexml - 在 simplexml 中选择属性

> ID：13472234
> 
> 赞同：0
> 
> 时间：2012-11-20T11:29:26.257
> 
> 标签：simplexml

xml 数据如下所示：

```
<feed>    
    <entry>
      <id>12345</id>
      <title>Lorem ipsum</title>
      <link type="type1" href="https://foo.bar" />
      <link type="type2" href="https://foo2.bar"/>
    </entry>
    <entry>
      <id>56789</id>
      <title>ipsum</title>
      <link type="type2" href="https://foo4.bar"/>
      <link type="type1" href="https://foo3.bar" />
    </entry>
</feed> 
```

我想从特定类型的链接中选择 href 属性的内容。（请注意，类型 1 并不总是第一个链接）

部分有效的代码：

```
for($i=0; $i<=5; $i++) {
    foreach($xml->entry[$i]->link as $a) {
        if($a["type"] == "type2")
            $link = (string)($a["href"]);
    }
} 
```

但是，我想知道是否有不需要 foreach 循环的更快、更优雅的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:34:57.743

您是否尝试过使用 xpath？[http://php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)

这将允许您搜索具有指定标签/属性的节点。

```
$nodes = $xml->xpath('//link[@type="type2"]');
foreach ($node in $nodes)
{
    $link = $node['href'];
} 
```

**// 更新**

如果您只对第一个值感兴趣，则可以跳过 for 循环。该`xpath`函数返回一个对象数组，`SimpleXmlElement`因此您可以使用索引`0`来检索第一个元素，然后是它的属性。

注意 - 如果元素丢失或找不到，`xpath`元素将返回`false`，并且下面的代码将出错。该代码仅用于说明，因此您应该在实现它时验证错误检查。

```
// This will work if the xml always has the required attrbiute - will error if it's missing
$link = $xml->xpath('//link['@type="type2"]')[0]['href']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:33:08.673

使用[xpath](http://php.net/manual/en/simplexmlelement.xpath.php)：

```
$xml->xpath('//link[@type="type2"]'); 
```

更多关于[w3.org的语言](http://www.w3.org/TR/xpath/)

# android - 使用帧动画的自定义进度对话框

> ID：13472236
> 
> 赞同：-1
> 
> 时间：2012-11-20T11:29:25.920
> 
> 标签：android, progressdialog

我需要使用进度对话框在 android 中显示“请稍候”类型的文本和帧动画。可能吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:19:35.630

设置进度对话框的文本和标题非常简单，只需使用 dialog.setMessage("") 和 dialog.setTitle("") 方法即可。至于自定义微调器，这是可能的，但它有点棘手。可以在此处找到解决方案的详细信息：

[自定义 Android 对话框动画](https://stackoverflow.com/questions/5269726/how-to-apply-custom-spinner-image-to-progress-dilalog-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:08:04.890

```
ProgressDialog.show(YourActivity.this, "", "Please wait..."); 
```

要了解有关进度对话框的详细信息，请转到[此链接](http://developer.android.com/reference/android/app/ProgressDialog.html)

# android - 如何制作与 Apple Airplay 配合使用的 Android 应用程序？

> ID：13472238
> 
> 赞同：6
> 
> 时间：2012-11-20T11:29:35.880
> 
> 标签：android, sdk, airplay

我读过一篇关于 Apple Airplay 的文章，也搜索了一些类似[Air bubble](https://play.google.com/store/apps/details?id=com.bubblesoft.android.airbubble&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5idWJibGVzb2Z0LmFuZHJvaWQuYWlyYnViYmxlIl0.)的应用程序，但我仍有一些疑问：

1.  可以为非 iOS 制作 Airplay 应用程序吗？是否存在许可证问题？
2.  Apple 的 MFI 计划（或开发者许可）是否涵盖 Android/Windows 操作系统？
3.  是否有一些适用于 Android 的 Airplay SDK？
4.  如果没有，我应该学习什么来制作 Airplay 接收器/发送器应用程序？

# php - 搜索邮政编码可以在线但不能离线（来自本地数据库）

> ID：13472248
> 
> 赞同：2
> 
> 时间：2012-11-20T11:30:17.550
> 
> 标签：php, javascript, jquery, mysql, ajax

表单中的输入字段采用邮政编码..它的邮政编码匹配它显示刻度线。问题是当我在线填写邮政编码时，它显示像这样的刻度线

[http://i.stack.imgur.com/5Lh3k.png](http://i.stack.imgur.com/5Lh3k.png)（抱歉，我无法在 stackoverflow 中附加图片）

但是在离线时（我正在使用 wamp 服务器）它会继续搜索..

[http://i.stack.imgur.com/ZX000.png](http://i.stack.imgur.com/ZX000.png)

邮政编码已经存储在我的本地 mysql 数据库表中，但我不知道它为什么不工作。我得到了这项工作来找出它，但我失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:20:12.383

你说你在其他人的项目上工作。你看过保存数据库用户名和密码的配置文件吗？还有文档根目录、服务器名称等。我的意思是虽然您在本地计算机上工作，但它可能会从 Internet 或 yourwebste.com 获取参考文件，因此请再次搜索并测试配置文件。另请参阅火灾错误中的任何错误。查看 console.log 输出。

# ssl - 使用 SSL 访问 RDS - 不支持的记录版本 Unknown-0.0

> ID：13472256
> 
> 赞同：5
> 
> 时间：2012-11-20T11:30:48.890
> 
> 标签：ssl, rds

我正在使用 Amazon`RDS MySQL`并连接`SSL`证书（默认证书可在[http://s3.amazonaws.com/rds-downloads/mysql-ssl-ca-cert.pem](http://s3.amazonaws.com/rds-downloads/mysql-ssl-ca-cert.pem)获得），我正在执行以下步骤：

1.  下载了`mysql-ssl-ca-cert.pem`
2.  将上述文件修改为`JKS`格式化
3.  `Spring - Hibernate`并通过模板（ ）从Web应用程序连接`org.springframework.beans.factory.config.PropertyPlaceholderConfigurer`并使用`c3p0`，我们将附加`URL`参数设置为`jdbc:URL/DB?autoReconnect=true&useUniCode=true&characterEncoding=UTF-8&useSSL=true&verifyServerCertificate=false&requireSSL=true`

但我面临以下问题......

```
javax.net.ssl.SSLException: Unsupported record version Unknown-0.0 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T23:53:22.327

基本上这意味着 SSL 解析器丢失了。套接字层传递了一些不符合 SSL 协议的字节。

当您使用 SSL 套接字进行传输时，它会调用格式化和加密例程来创建加密数据包。然后它调用普通套接字层将加密的数据包传输到服务器。服务器的套接字层接收到数据包，然后调用 SSL 包对数据包进行解密。如果数据包不符合 SSL 格式，则会出现不支持版本异常。

所有到达套接字层的字节都被发送到 SSL 包。因此，获得该错误的最简单方法是在建立 SSL 连接后使用纯套接字层传输纯文本消息。

在我的特殊情况下，我遇到了这个错误消息，因为我正在传输额外的字节。让我们看看我是否可以清楚地解释我的错误。

我有一个（例如）100 字节的缓冲区。我用我的 50 字节消息打包缓冲区并调用 SSL 加密例程。生成的数据包长 75 个字节。我调用了 send() 来传输缓冲区。这是一个普通的套接字发送；它完成了我告诉它做的事情，即传输整个 100 字节缓冲区。

在服务器上，接收到全部 100 个字节。SSL 包试图解密包。它发现在收到的前 75 个字节中包含了一个非常好的 SSL 消息。到目前为止，一切都很好。然后它试图弄清楚剩下的 25 个字节是什么意思。它假定这是第二条 SSL 消息并试图对其进行解密。就在那时它窒息并踢出了那个讨厌的例外。

我希望这能给你一些关于在你的代码中寻找什么的线索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-04T09:58:19.040

如果我提供了不受支持的客户端证书，我会发现此错误。清除“-Djavax.net.ssl.keyStore”并在没有客户端证书的情况下进行连接。

另请参阅[http://feed.askmaclean.com/archives/secure-java-connections-by-default.html](http://feed.askmaclean.com/archives/secure-java-connections-by-default.html)：

> 对各种 TLS 版本的支持因使用的 JRE 版本而异。在限制特定 TLS 版本之前，请确保您了解所使用的 JDK 的功能。首次运行上述测试时，Eclipse 使用的是 JRE 1.6.0_45 而不是我预期的 JRE 1.8.0_65，并且使用 TLSv1.0 密码进行连接。当 MySQL 服务器配置为仅允许 TLSv1.1 和 TLSv1.2 时，我收到以下异常：
> 
> 原因：javax.net.ssl.SSLException: com.sun.net.ssl.internal.ssl.InputRecord.readV3Record(InputRecord.java:504) 上不支持的记录版本 Unknown-0.0
> 
> 在禁用 TLSv1.0 之前，应评估旧 JRE 的使用情况——幸运的是，PERFORMANCE_SCHEMA 可以轻松调查客户端 JRE，而无需检查每个应用程序服务器。

# android - 使用片段返回堆栈处理 ActionBar 标题？

> ID：13472258
> 
> 赞同：74
> 
> 时间：2012-11-20T11:30:50.450
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我有一个`Activity`加载位置`ListFragment`，单击后，它会向下钻取一个级别并`ListFragment`显示一种新类型，替换原来的类型（使用`showFragment`下面的方法）。这被放置在后堆栈上。

一开始，活动在操作栏中显示默认标题（即它是根据应用程序的 自动设置的`android:label`）。

当显示层次结构中下一级的列表时，单击的项目名称应成为操作栏的标题。

但是，当按下 时`Back`，我希望恢复原来的默认标题。这不是什么`FragmentTransaction`知道的，所以标题没有恢复。

我已经模糊地阅读过`FragmentBreadCrumbs`，但这似乎需要使用自定义视图。我正在使用 ActionBarSherlock 并且不希望有我自己的自定义标题视图。

这样做的最佳方法是什么？是否有可能没有大量样板代码并且必须跟踪沿途显示的标题？

* * *

```
protected void showFragment(Fragment f) {
  FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
  ft.replace(R.id.fragment_container, f);
  ft.addToBackStack(null);
  ft.commit();
} 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-11-20T12:25:29.807

在每个片段和每个活动中，我都会像这样更改标题。这样，活动标题将始终正确：

```
@Override
public void onResume() {
    super.onResume();
    // Set title
    getActivity().getActionBar()
        .setTitle(R.string.thetitle);
} 
```

在某些情况下，onResume 不会在片段内部调用。在其中一些情况下，我们可以使用：

```
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if(isVisibleToUser) {
        // Set title
        getActivity().getActionBar()
            .setTitle(R.string.thetitle);
    }
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-04-23T07:55:43.377

由于原始答案已经很老了，这也可能会有所帮助。正如文档所述，可能需要注册一个`listener`来监听主机中的后端堆栈更改`Activity`：

```
getSupportFragmentManager().addOnBackStackChangedListener(
        new FragmentManager.OnBackStackChangedListener() {
            public void onBackStackChanged() {
                // Update your UI here.
            }
        }); 
```

然后，在回调方法中识别情况并设置适当的标题，而无需`ActionBar`从`Fragment`.

这是一个更优雅的解决方案，因为`Fragment`不必知道`ActionBar`存在并且`Activity`通常是管理后台堆栈的地方，因此在那里处理它似乎更合适。`Fragment`任何时候都应该只考虑它自己的内容，而不是周围的环境。

更多关于[文档](http://developer.android.com/training/implementing-navigation/temporal.html#back-fragments)中的主题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-10-09T08:46:58.477

让控制活动按如下方式完成所有工作：

监听 backstack 事件（在活动的 onCreate() 中）：

```
// Change the title back when the fragment is changed
    getSupportFragmentManager().addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener() {
        @Override
        public void onBackStackChanged() {
            Fragment fragment = getFragment();
            setTitleFromFragment(fragment);
        }
    }); 
```

从容器中获取当前片段：

```
/**
 * Returns the currently displayed fragment.
 * @return
 *      Fragment or null.
 */
private Fragment getFragment() {
    Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.container);
    return fragment;
} 
```

在内容视图中设置片段：

```
private void setFragment(Fragment fragment, boolean addToBackStack) {
    // Set the activity title
    setTitleFromFragment(fragment);
    .
    .
    .
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-10T10:44:04.600

Warpzit 是对的。这也解决了更改设备方向时的标题问题。此外，如果您将 support v7 用于操作栏，您可以从片段中获取操作栏，如下所示：

```
@Override
public void onResume() {
    super.onResume();
    ((ActionBarActivity)getActivity()).getSupportActionBar().setTitle("Home");
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-15T04:22:44.967

最好让操作系统做尽可能多的工作。假设每个片段都使用 .addToBackStack("title") 正确命名，那么您可以覆盖 onBackPressed 类似这样的内容以实现所需的行为：

```
// this example uses the AppCompat support library
// and works for dynamic fragment titles
@Override
public void onBackPressed() {
    FragmentManager fragmentManager = getSupportFragmentManager();
    int count = fragmentManager.getBackStackEntryCount();
    if (count <= 1) {
        finish();
    }
    else {
        String title = fragmentManager.getBackStackEntryAt(count-2).getName();
        if (count == 2) {
            // here I am using a NavigationDrawer and open it when transitioning to the initial fragment
            // a second back-press will result in finish() being called above.
            mDrawerLayout.openDrawer(mNavigationDrawerFragment.getView());
        }
        super.onBackPressed();
        Log.v(TAG, "onBackPressed - title="+title);
        getSupportActionBar().setTitle(title);
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-06T12:53:48.847

[我使用与Lee 方法](https://stackoverflow.com/a/33716380/5004910)类似的解决方案，但替换了`onBackStackChanged()`方法。

首先，我在将事务添加到后台堆栈时设置片段名称。

```
getSupportFragmentManager().beginTransaction()
                .replace(R.id.frame_content, fragment)
                .addToBackStack(fragmentTitle)
                .commit(); 
```

然后我覆盖该`onBackStackChanged()`方法并`setTitle()`使用最后一个 backstack 条目名称进行调用。

```
@Override
public void onBackStackChanged() {
    int lastBackStackEntryCount = getSupportFragmentManager().getBackStackEntryCount() - 1;
    FragmentManager.BackStackEntry lastBackStackEntry =
            getSupportFragmentManager().getBackStackEntryAt(lastBackStackEntryCount);

    setTitle(lastBackStackEntry.getName());
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-23T20:49:46.547

使用片段方法：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) 
```

每次出现 Fragment 时都会调用它，但 onResume 不会。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-04T18:40:30.907

最好的方法是利用 android 提供的接口 OnBackStackChangedListener 方法 onBackStackChanged()。

假设我们有一个导航抽屉，其中包含用户可以导航到的 4 个选项。在这种情况下，我们将有 4 个片段。让我们先看看代码，然后我会解释工作。

```
 private int mPreviousBackStackCount = 0;
    private String[] title_name = {"Frag1","Frag2","Frag3","Frag4"};
    Stack<String> mFragPositionTitleDisplayed;

    public class MainActivity extends ActionBarActivity implements FragmentManager.OnBackStackChangedListener
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ....
    ....
    ....
    getSupportFragmentManager().addOnBackStackChangedListener(this);
    mFragPositionTitleDisplayed = new Stack<>();
}

public void displayFragment() {
    Fragment fragment = null;
    String title = getResources().getString(R.string.app_name);
    switch (position) {
        case 0:
            fragment = new Fragment1();
            title = title_name[position];
            break;
        case 1:
            fragment = new Fragment2();
            title = title_name[position];
            break;
        case 2:
            fragment = new Fragment3();
            title = title_name[position];
            break;
        case 3:
            fragment = new Fragment4();
            title = title_name[position];
            break;
        default:
            break;
    }
    if (fragment != null) {
        FragmentManager fragmentManager = getSupportFragmentManager();
        fragmentManager.beginTransaction()
                .replace(R.id.container_body, fragment)
                .addToBackStack(null)
                .commit();
        getSupportActionBar().setTitle(title);
    }
}

@Override
public void onBackStackChanged() {
    int backStackEntryCount = getSupportFragmentManager().getBackStackEntryCount();
    if(mPreviousBackStackCount >= backStackEntryCount) {
        mFragPositionTitleDisplayed.pop();
        if (backStackEntryCount == 0)
            getSupportActionBar().setTitle(R.string.app_name);
        else if (backStackEntryCount > 0) {
            getSupportActionBar().setTitle(mFragPositionTitleDisplayed.peek());
        }
        mPreviousBackStackCount--;
    }
    else{
        mFragPositionTitleDisplayed.push(title_name[position]);
        mPreviousBackStackCount++;
    }

} 
```

在显示的代码中，我们有 displayFragment() 方法。这里我根据从导航抽屉中选择的选项显示片段。变量位置对应于从导航抽屉中的ListView或RecyclerView单击的项目的位置。我使用 getSupportActionBar.setTitle(title) 相应地设置了操作栏标题，其中标题存储了适当的标题名称。

每当我们从导航抽屉中单击项目时，都会根据单击给用户的项目显示一个片段。但是在后端，这个片段被添加到 backstack 并且方法 onBackStachChanged() 被命中。我所做的是我创建了一个变量 mPreviousBackStackCount 并将其初始化为 0。我还创建了一个额外的堆栈来存储操作栏标题名称。每当我向后台堆栈添加一个新片段时，我都会将相应的标题名称添加到我创建的堆栈中。在另一侧，每当我按下后退按钮时，都会调用 onBackStackChanged()，并从堆栈中弹出最后一个标题名称，并将标题设置为堆栈的 peek() 方法派生的名称。

例子：

假设我们的 android backstack 是空的：

从导航抽屉中按选择 1：调用 onBackStachChanged() 并将 Fragment 1 添加到 android backstack，backStackEntryCount 设置为 1，将 Frag1 推送到我的堆栈，并且 mFragPositionTitleDisplayed 的大小变为 1。

从导航抽屉中按选择 2：调用 onBackStachChanged() 并将 Fragment 2 添加到 android backstack，backStackEntryCount 设置为 2，并将 Frag2 推送到我的堆栈中，并且 mFragPositionTitleDisplayed 的大小变为 2。

现在我们在 android 堆栈和我的堆栈中都有 2 个元素。当您按下返回按钮时，会调用 onBackStackChanged() 并且 backStackEntryCount 的值为 1。代码进入 if 部分并从我的堆栈中弹出最后一个条目。因此，android backstack 只有 1 个片段 - “Fragment 1”，而我的堆栈只有 1 个标题 - “Frag1”。现在我只是从我的堆栈中 peek() 标题并将操作栏设置为该标题。

请记住：要设置动作蝙蝠标题使用 peek() 而不是 pop() 否则当您打开超过 2 个片段并尝试按返回按钮返回时，您的应用程序将崩溃。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-06T11:10:41.880

您可以使用 onKeyDown 解决！我有一个 bool mainisopen=true <-- MainFragment is Visible other Fragment mainisopen=false

这是我的代码：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && mainisopen == false) {
        mainisopen = true;
        HomeFrag fragment = new HomeFrag();
        FragmentTransaction fragmentTransaction =
                getSupportFragmentManager().beginTransaction();
        fragmentTransaction.replace(R.id.fragmet_cont, fragment);
        fragmentTransaction.commit();
        navigationView = (NavigationView) findViewById(R.id.nav_view);
        navigationView.getMenu().findItem(R.id.nav_home).setChecked(true);
        navigationView.setNavigationItemSelectedListener(this);
        this.setTitle("Digi - Home"); //Here set the Title back
        return true;
    } else {
        if (keyCode == KeyEvent.KEYCODE_BACK && mainisopen == true) {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Wollen sie die App schliessen!");
            builder.setCancelable(true);

            builder.setPositiveButton("Ja!", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    System.exit(1);
                }
            });

            builder.setNegativeButton("Nein!", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    Toast.makeText(getApplicationContext(), "Applikation wird fortgesetzt", Toast.LENGTH_SHORT).show();
                }
            });

            AlertDialog dialog = builder.create();
            dialog.show();

            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-05T05:24:54.043

如此处所述[，](https://medium.com/@elye.project/puzzle-fragment-stack-pop-cause-issue-on-toolbar-8b947c5c07c6)我的解决方案是将此代码添加到 MainActivity onCreate method(): 并更改操作栏标题

```
FragmentManager fragmentManager=getSupportFragmentManager();
fragmentManager.addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener() {
    @Override
    public void onBackStackChanged() {
        Fragment currentFragment = fragmentManager.findFragmentById(R.id.My_Container_1_ID);
        currentFragment.onResume();
    }
}); 
```

并在片段的 onResume() 方法中更改操作栏标题

```
@Override
public void onResume() {
    super.onResume();
    AppCompatActivity activity = (AppCompatActivity) getActivity();
    ActionBar actionBar = activity.getSupportActionBar();
    if(actionBar!=null) {
        actionBar.setTitle("Fragment Title");
        actionBar.setSubtitle("Subtitle");
    }

} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2015-05-28T13:34:19.043

在后按时更新操作栏标题。简单地说

**getActivity.setTitle("标题")**

在 onCreateView 方法中。

# objective-c - 如何在 Objective-C 中动态调整 UITableView 的大小？

> ID：13472259
> 
> 赞同：0
> 
> 时间：2012-11-20T11:30:54.067
> 
> 标签：objective-c, ios, uitableview, ios6, uitoolbar

我刚刚开始使用 iOS 开发，我试图实现一些到目前为止似乎对我不起作用的东西......

情况如下：我有一个 nib 文件，其中放置了一个 UITableView，并且就在 UIToolbar 的下方。效果很好，如果我尝试不同的屏幕尺寸等，缩放效果很好……所以我很高兴。

但问题是：工具栏是否可见是用户可以在应用程序的某处做出的选择。但是，当用户选择看不到工具栏时，我只需调用工具栏上的 setHidden 方法并将其传递给“是”。当我尝试此操作时，工具栏现在消失了，但 UITableView 没有拉伸到屏幕底部，这给了我一个非常难看的结果。

所以最后的问题是：隐藏工具栏时如何自动让视图伸展到底部？我想我将不得不在代码中执行此操作（而不仅仅是某个配置选项），但由于我来自 Android，这对我来说有点奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:40:18.337

您最好的选择可能是在显示/隐藏工具栏时调整 tableview 框架的大小。

```
CGRect frame = myTableView.frame;
frame.size.height += toolbar.frame.height;
myTableView.frame = frame; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T17:08:29.480

因为您使用的是自动布局，所以您希望为 UITableView 创建一个高度约束并通过 IBOutlet 将其与您的视图控制器链接。然后，要修改 UITableView 的高度，只需执行以下操作：

```
_tableViewHeightConstraint.constant += toolbar.frame.height; 
```

您甚至可以使用以下方法对其进行动画处理：

```
[UIView animateWithDuration:0.25 animations:^{
    _tableViewHeightConstraint.constant += toolbar.frame.height;
}]; 
```

请注意，您可能需要`[_tableView layoutIfNeeded]`在更改高度约束后调用。

# android - Android：如何设置视图的高度？

> ID：13472260
> 
> 赞同：1
> 
> 时间：2012-11-20T11:30:55.643
> 
> 标签：android, android-layout

我已经创建了一个按钮并用于`addView()`在`onClickListener()`. 但是如果图表超出范围，它不会自动扩展视图高度。所以我想在绘制所有图表后添加视图高度。我尝试使用`getLayoutParams().height`来修改高度，但它不起作用。

```
public class MainActivity extends Activity {
     private TableLayout layout;
     private Button btnDraw;
     public void onCreate(Bundle savedInstanceState){
           layout=findViewById((TableLayout) findViewById(R.id.tableLayout));
           btnDraw=findViewById((Button) findViewById(R.id.btnDraw));
           btnDraw.setOnClickListener(new OnClickListener(){
                   public void onClick(View arg0) {
                          layout.addView(new Chart(MainActivity.this)
                   }
           });
     }

     class Chart extends View {
           public void onDraw(Canvas c) {                 
                   int addHeight=0;     
                   for(...){ //draw several chart
                        ...
                        addHeight+=500;

                   }
                   FrameLayout.LayoutParams params = (FrameLayout.LayoutParams) layout.getLayoutParams();
                   params.height += addHeight;
                   layout.setLayoutParams(params); 
           }
     }
} 
```

这是xml代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
        <TableLayout
        android:id="@+id/tableLayout" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:stretchColumns="1">
        <TableRow>
            <Button
                android:id="@+id/btnDraw"
                android:layout_span="2" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Draw" />

        </TableRow>
            ...
    </TableLayout>
</ScrollView> 
```

我也尝试`onMeasure(getWidth(),addHeight)`在 for 循环之外调用，但它仍然不起作用。

```
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(widthMeasureSpec, widthMeasureSpec);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:54:14.557

如果你想用八种方式来实现，你的`Chart`类应该实现。`onMeasure()`如果它只是一个 hack，你可以使用[AbsoluteLayout](https://developer.android.com/reference/android/widget/AbsoluteLayout.html)。您也可以设置布局参数，但您应该调用`updateViewLayout()`，甚至可能调用`requestLayout()`.

# javascript - MySQL：使用 JSON 解析时，SUM(column) 总是返回 null

> ID：13472261
> 
> 赞同：0
> 
> 时间：2012-11-20T11:30:56.527
> 
> 标签：javascript, jquery, mysql, parsing, sum

我正在尝试检索一列的总和并用 JSON 解析它。

要检索我使用的总和：

```
SELECT SUM(price) FROM `Fuelconsumption` WHERE `date` like '%09-2012%' 
```

当我直接在我的 SQL Server 中使用这个命令时，我得到一个图形结果，当我尝试通过 JSON 解析它时它不起作用。

这是我的 JSON 和 PHP 代码：

```
case 'getstats':

                    $query="SELECT SUM(price) FROM `Fuelconsumption` WHERE `date` like '%09-2012%'";
                    $result = mysql_query($query);

                    $json = array();
                        while($row = mysql_fetch_array($result))
                        {
                                $json['price']=$row['price'];
                        }
                        print json_encode($json);
                    mysql_close();
    break; 
```

这是我的 JS：

```
xmlhttp = new XMLHttpRequest()

xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var jsontext = xmlhttp.responseText;
        var json = JSON.parse(jsontext);

        console.log(jsontext)

    }
}

xmlhttp.open("GET", "mysql.php?p=getstats" + "&date=09-2012", true);
xmlhttp.send(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:34:49.650

尝试

```
$query="SELECT SUM(price) AS price FROM `Fuelconsumption` WHERE `date` like '%09-2012%'"; 
```

代替

```
$query="SELECT SUM(price) FROM `Fuelconsumption` WHERE `date` like '%09-2012%'"; 
```

另外，为什么你的名字是 jQuerybeast 却使用普通的 Javascript 来创建 Ajax 请求而不是 jQuery？:P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:37:04.950

这是因为价格总和的列在 $row 中不会被命名为价格，它将是 sum(price)。如果您想确定名称，请更改您的 SQL 以容纳别名：

```
SELECT SUM(price) AS sum_of_price FROM `Fuelconsumption` WHERE `date` like '%09-2012%' 
```

然后将其用作`$row['sum_of_price']`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T11:36:42.160

尝试将您的查询更改为：

```
SELECT SUM(price) price
FROM `Fuelconsumption` 
WHERE `date` like '%09-2012%' 
```

# wordpress - 我想创建一个没有侧边栏、徽标、导航菜单的静态 wordpress 页面，用作登录页面

> ID：13472271
> 
> 赞同：0
> 
> 时间：2012-11-20T11:31:28.193
> 
> 标签：wordpress

好的，所以我有一个我自己托管的 wordpress 网站。在这个网站上，我的博客有它自己的主题插件和其他不相关的项目。我正在尝试在 wordpress 中创建一个没有导航菜单、徽标、侧栏或页脚的登录页面。基本上我希望登陆页面是一个 100% 可定制的没有 wordpress 组件的 html 页面。当我研究如何实现这一点时，许多指南都展示了如何创建静态页面，以及如何使其成为登录页面，但是仍然到处都是令人讨厌的 wordpress 组件。我想要一个完全自定义的 wordpress 登陆页面。如何在保持主题的同时做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:35:26.663

使用页面模板。在主题文件夹中，只需创建文件“empty.php”，然后将以下内容添加到该文件的顶部：

```
<?php
/*
Template Name: Some name
*/
?> 
```

然后在 Wordpress admin 中创建一个页面，页面模板为：Some name，然后在设置中将该页面设置为主页。只需在该 php 标记后添加任何内容即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:57:48.090

最干净的方法：

*   在您的主题文件夹中，创建一个名为“page-yourtitle.php”的页面
*   在 WP 管理员中，创建一个名为“yourtitle”的普通页面。可以是空的，只要有标题的一页就够了。

现在，当您访问此页面时，WP 将仅输出 page-yourtitle.php

例如，site.com/yourtitle

在 page-yourtitle 中，如果你想放一些 WP 代码，你只需要添加一个对 get_header(); 的调用即可。

我认为这对您也应该有用： http: [//codex.wordpress.org/images/1/18/Template_Hierarchy.png](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)

# joomla - Joomla 2.5 不能在帮助文件中使用 $this

> ID：13472274
> 
> 赞同：3
> 
> 时间：2012-11-20T11:31:50.740
> 
> 标签：joomla, joomla2.5, joomla-extensions

我在 joomla 2.5 中创建了一个组件和一个插件，组件中有一个`Helper`文件，它将有许多有用的功能，我计划调用它的一个函数，然后通过这段代码调用助手中的另一个函数：

```
$this->getinformation(); 
```

它给了我这个错误：

```
Fatal error: Call to undefined method 
```

我的问题是：

*   为什么我不能在 Joomla 的助手中调用函数？
*   如何在辅助类中调用函数？
*   我在这段代码中遗漏了任何类结构吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:28:54.663

帮助文件通常是静态调用的，而不是使用 $this

首先创建您的帮助文件并添加如下方法：

```
Class myHelper {

    //This method can call other methods
    public static function myMethod($var) {

        //Call other method inside this class like this:
        self::myOtherMethod($var);

    }

    //This method is called by myMethod()
    public static function myOtherMethod($var) {

        //Put some code here

    }

} 
```

只需在您要使用的文档中包含这样的帮助文件：

```
require_once JPATH_COMPONENT.'/helpers/my_helper.php'; 
```

然后像这样使用它：

```
myHelper::myMethod($var); 
```

或者

```
myHelper::myOtherMethod($var); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:32:55.987

您必须包含帮助文件并使用类名调用该函数

在插件或组件中添加以下行：

```
jimport( 'joomla.filesystem.folder' );
require_once JPATH_ROOT . '/components/com_xxxx/helper.php';

classname::functionname(); 
```

或者

如果您正在处理相同的帮助文件意味着然后像这样调用

```
classname::functionname(); 
```

# ios - SKProduct 区域设置中的货币符号不正确

> ID：13472278
> 
> 赞同：0
> 
> 时间：2012-11-20T11:32:16.833
> 
> 标签：ios, ios6, app-store, currency-formatting

我在尝试格式化应用内购买的价格时遇到问题。具体来说，在使用由`SKProduct`.

当前语言环境（“nb_NO”）具有正确的货币符号“kr”。`SKProduct`但是， ("en_NO@currency=NOK")给我的语言环境具有“NOK”作为货币代码和符号。除了使价格渲染看起来很愚蠢之外，`NSNumberFormatter`还提供默认货币符号 ( `¤`)，除非我专门将其设置为其他值。

这发生在 iOS 6 中，但在我的其他具有 iOS 4.3 的测试设备上它工作正常（4.3 SKProduct 区域设置为“nb_NO@currency=NOK”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:30:52.987

在我发布后一两天，这奇迹般地开始自行工作。不知道是重复使用还是有魔仙发现了我的帖子。我想一切都很好，结局很好。。

# c++ - C++/CX 中的 [this] 是什么？（视窗 8）

> ID：13472280
> 
> 赞同：1
> 
> 时间：2012-11-20T11:32:19.870
> 
> 标签：c++, c++11, windows-8, c++-cx

我正在遵循[本](http://msdn.microsoft.com/en-us/library/windows/apps/hh465045.aspx)指南，并且正在点击包含该术语的代码的这些部分`[this]`（只需 Ctrl-F 即可；您会明白我的意思）。

我不确定这是 C++ 的东西还是 C++/CX 的东西，但是，无论哪种方式，我都不知道它是什么。

它是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T11:34:27.680

它被称为“Lambda Closure”，它表示当前实例 ( `this`) 将被传递到 lambda 主体（使您能够使用它的变量并调用它的方法）。

这个页面很好地总结了 Lambda 闭包：
[http ://www.cprogramming.com/c++11/c++11-lambda-closures.html](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)

> [] 不捕获任何内容（或者，焦土策略？）
> [&] 通过引用捕获任何引用的变量
> [=] 通过复制捕获任何引用的变量
> [=, &foo] 通过复制捕获任何引用的变量，但捕获变量foo by reference
> [bar] 通过复制捕获 bar；不要复制任何其他内容
> [this] 捕获封闭类的 this 指针

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T11:34:55.870

它是[lambda 匿名函数](http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B)的语法，它捕获定义它的类的成员。它是 C++11。

# jenkins - 我需要 Jenkins 的声纳和声纳跑步者吗？

> ID：13472283
> 
> 赞同：38
> 
> 时间：2012-11-20T11:32:40.290
> 
> 标签：jenkins, sonarqube, jenkins-plugins, sonar-runner

我想和詹金斯一起设置声纳。但我不确定[Sonar 网站](http://docs.codehaus.org/display/SONAR/Configuring+Sonar+Jenkins+Plugin#ConfiguringSonarJenkinsPlugin-AddingSonarRunner)是否描述了两种不同的方法，或者是否有两个必要的步骤：

据我了解，这是两种不同的方式。如果是这种情况，有什么区别以及优缺点（Sonar 本身和 Sonar runner 之间）？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-20T12:30:50.883

如果您想使用 SonarQube 和 Jenkins 分析项目，这就是您需要的：

*   SonarQube 服务器启动并运行

*   安装了适用于 Jenkins 的 SonarQube Scanner 并配置为指向您的 SonarQube 服务器的 Jenkins 服务器启动并运行

*   配置为在您的项目上运行 SonarQube 分析的作业：

    *   使用默认和标准的 SonarQube 扫描仪（适用于大多数项目）

    *   使用用于 MSBuild 的 SonarQube 扫描仪（用于 .NET 解决方案）

    *   为基于 Maven 的项目使用构建后操作

[一切都在SonarQube Scanner for Jenkins 文档页面](http://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner+for+Jenkins)上进行了更详细的描述。

# css - 字体渲染问题

> ID：13472290
> 
> 赞同：2
> 
> 时间：2012-11-20T11:33:20.133
> 
> 标签：css, fonts, type-conversion

我目前正在建立一个网站，似乎标题中使用的字体在 Windows 机器上没有正确呈现。我已经检查了 Windows 机器是否启用了 cleartype，他们这样做了，我想知道是否有其他人遇到过这个问题或知道原因是什么？

**视窗...**

![在此处输入图像描述](../Images/589f605f5b42c1480be20b7d6e9fb821.png)

**操作系统...**

![在此处输入图像描述](../Images/91fc97f8e705320d8a21596ced9415a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:16:08.300

似乎没有正确[提示](https://en.wikipedia.org/wiki/Font_hinting)特定字体，这会导致 Windows ClearType (mis)renderer 的数字大小不均匀。

您可以尝试使用 FreeType 的[ttfautohint](http://www.freetype.org/ttfautohint/)工具解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:37:50.297

字体在不同操作系统和不同浏览器之间呈现不同的原因有很多。这篇[SixRevisions 文章](http://sixrevisions.com/css/font-face-web-fonts-issues/)在线讨论了使用自定义字体的一些挑战，最后有一个关于字体渲染的部分。外面是一片丛林。

# magento - 为什么 Magento 在 .phtml 文件中返回错误的类？

> ID：13472291
> 
> 赞同：0
> 
> 时间：2012-11-20T11:33:19.727
> 
> 标签：magento

我有 3d 方扩展，可以在后端编辑产品时添加新选项卡。现在我想在那里再添加一个标签。

新标签应该有“添加”按钮，让用户添加新项目，此外它应该有添加项目的列表。首先，我查看了扩展代码。他们使用添加了类似的选项卡

```
extends Mage_Adminhtml_Block_Widget
implements Varien_Data_Form_Element_Renderer_Interface 
```

所以我试着按照他们的方式添加我的。代码如下。

```
 $this->addTab('cancellpolicy', array(
            'label'     => Mage::helper('catalog')->__('Cancellation Policies'),
            'content'   => $this->_translateHtml($this->getLayout()->createBlock('Apptha_Reservation_Block_Adminhtml_Catalog_Product_Edit_Tab_Cancellationpolicy')->toHtml()),
        )); 
```

上面我添加了新选项卡，然后我在下面创建了新的块类

```
class Apptha_Reservation_Block_Adminhtml_Catalog_Product_Edit_Tab_Cancellationpolicy 

extends Mage_Adminhtml_Block_Widget
implements Varien_Data_Form_Element_Renderer_Interface 
{

   /**
 * Form element instance
 *
 * @var Varien_Data_Form_Element
 */
protected $_element;

/**
 * Customer Groups cache
 *
 * @var array
 */
protected $_customerGroups;

/**
 * Websites cache
 *
 * @var array
 */
protected $_websites;

public function __construct(){
    $this->setTemplate('reservation/product/edit/tab/cancellationpolicy.phtml');
}

 public function getProduct(){
    return Mage::registry('product');
}
public function render(Varien_Data_Form_Element_Abstract $element){
    $this->setElement($element);
    return $this->toHtml();
}

protected function _prepareLayout()
{
    $this->setChild('add_button',
        $this->getLayout()->createBlock('adminhtml/widget_button')
            ->setData(array(
                'label'     => Mage::helper('catalog')->__('Add Room Type(s)'),
                'onclick'   => 'roomtypesControl.addItem()',
                'class' => 'add'
            )));   

    return parent::_prepareLayout();
}

 /**
 * Set form element instance
 *
 * @param Varien_Data_Form_Element_Abstract $element
 * @return Apptha_Reservation_Block_Adminhtml_Catalog_Product_Edit_Tab_Cancellationpolicy
 */   
public function setElement(Varien_Data_Form_Element_Abstract $element){
    $this->_element = $element;
    return $this;
}

/**
 * Retrieve form element instance
 *
 * @return Apptha_Reservation_Block_Adminhtml_Catalog_Product_Edit_Tab_Cancellationpolicy
 */
public function getElement(){
    return $this->_element;
}    

public function getWebsites()
{

    if (!is_null($this->_websites)) {
        return $this->_websites;
    }
    $websites = array();
    $websites[0] = array(
        'name'      => $this->__('All Websites'),
        'currency'  => Mage::app()->getBaseCurrencyCode()
    );
    if (Mage::app()->isSingleStoreMode() || $this->getElement()->getEntityAttribute()->isScopeGlobal()) {
        return $websites;
    }
    elseif ($storeId = $this->getProduct()->getStoreId()) {
        $website = Mage::app()->getStore($storeId)->getWebsite();
        $websites[$website->getId()] = array(
            'name'      => $website->getName(),
            'currency'  => $website->getConfig(Mage_Directory_Model_Currency::XML_PATH_CURRENCY_BASE),
        );
    }
    else {
        $websites[0] = array(
            'name'      => $this->__('All Websites'),
            'currency'  => Mage::app()->getBaseCurrencyCode()
        );
        foreach (Mage::app()->getWebsites() as $website) {
            if (!in_array($website->getId(), $this->getProduct()->getWebsiteIds())) {
                continue;
            }
            $websites[$website->getId()] = array(
                'name'      => $website->getName(),
                'currency'  => $website->getConfig(Mage_Directory_Model_Currency::XML_PATH_CURRENCY_BASE),
            );
        }
    }
    $this->_websites = $websites;
    return $this->_websites;
}

public function getValues(){
    return Mage::getModel('reservation/roomtypes')->getCollection()
                ->addEntityIdFilter($this->getProduct()->getId())
                ->addStoreIdFilter($this->getProduct()->getStoreId())
                ->getItems();
}

} 
```

然后添加reservation/product/edit/tab/cancellationpolicy.phtml 模板文件。我得到的模板的开头

```
<?php   Mage::log(get_class($this->getElement())); ?>
<?php $_htmlId      = $this->getElement()->getHtmlId() ?>
<?php $_htmlClass   = $this->getElement()->getClass() ?>
<?php $_storeId     = $this->getProduct()->getStoreId() ?>
<?php $_htmlName    = $this->getElement()->getName() ?>
<?php $_readonly    = $this->getElement()->getReadonly() ?>
<?php $_multiWebsite= 0 && !Mage::app()->isSingleStoreMode() ?> 
```

在这里我得到错误：

致命错误：在 /var/www/vhosts/bluning.com/httpdocs/app/design/adminhtml/default/default/template/reservation/product/edit/tab/ 中的非对象上调用成员函数 getHtmlId()第 10 行的 cancelpolicy.phtml

```
Mage::log(get_class($this->getElement())); 
```

给我“Mage_Core_Block_Template”，但为什么呢？根据我的代码 getElement() 应该返回“Apptha_Reservation_Block_Adminhtml_Catalog_Product_Edit_Tab_Cancellationpolicy”

那么为什么 Magento 在 .phtml 文件中返回错误的类呢？

**UPDATE** config.xml 有部分

```
 <blocks>
        <reservation>
            <class>Apptha_Reservation_Block</class>
        </reservation>

    </blocks> 
```

**UPDATE2** 我已将 Mage::log 放在 getElement 函数中并在调用之后。它返回不同的值：

```
inside: Apptha_Reservation_Block_Adminhtml_Catalog_Product_Edit_Tab_Cancellationpolicy
outside: Mage_Core_Block_Template 
```

疯狂的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:33:06.930

该行：

```
$this->getLayout()->createBlock('Apptha_Reservation_Block_Adminhtml_Catalog_Product_Edit_Tab_Cancellationpolicy') 
```

完全无效。您需要尊重 magento 框架语法。（它不仅仅是一个类实例化）

有关如何在 magento 中访问资源的详细信息，请参阅我的答案：[Get all invoices in Magento](https://stackoverflow.com/questions/13203128/get-all-invoices-in-magento/13203197#13203197)

要使其工作，您需要通过以下方式调用它：

```
$this->getLayout()->createBlock('apptha_reservation/adminhtml_catalog_product_edit_tab_cancellationpolicy') 
```

ps：如果“apptha_reservation”是您在 config.xml 中声明的块 XML 标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:27:01.447

使用调试器我发现了问题。

```
$this->getElement() 
```

它返回 NULL 因为它没有被正确设置。它应该设置在观察者中。代码如下：

```
 public function attachPolicyEditor($observer) {
    $form = $observer->getForm();
    if ($policies = $form->getElement('apptha_hotel_cancellationpolicy')) {
        $policies->setRenderer(
            Mage::getSingleton('core/layout')->createBlock('reservation/adminhtml_catalog_product_edit_tab_cancellationpolicy')
        );
    }
} 
```

attachPolicyEditor 由 adminhtml_catalog_product_edit_prepare_form 观察者调用。

# c++ - openCV 243 使用静态库错误 LNK2019

> ID：13472294
> 
> 赞同：7
> 
> 时间：2012-11-20T11:33:29.133
> 
> 标签：c++, opencv, static-linking

我正在尝试在 64 位 vs10 控制台应用程序中使用 openCV243 静态库。我的操作系统是win7 64位。

我已经包含了以下库：

```
#pragma comment(lib,"../final_test/libs/staticlib/opencv_core243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_highgui243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_imgproc243.lib")       
#pragma comment(lib,"../final_test/libs/staticlib/opencv_video243d.lib")        
#pragma comment(lib,"../final_test/libs/staticlib/opencv_flann243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_features2d243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_objdetect243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_core243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_calib3d243.lib")       
#pragma comment(lib,"../final_test/libs/staticlib/opencv_legacy243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_features2d243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_ml243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/libjpeg.lib")
#pragma comment(lib,"../final_test/libs/staticlib/libpng.lib")
#pragma comment(lib,"../final_test/libs/staticlib/libtiff.lib")
#pragma comment(lib,"../final_test/libs/staticlib/libjasper.lib")
#pragma comment(lib,"../final_test/libs/staticlib/zlib.lib")
#pragma comment(lib,"../final_test/libs/staticlib/IlmImf.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_videostab243") 
#pragma comment(lib,"../final_test/libs/staticlib/opencv_contrib243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_nonfree243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_photo243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_stitching243.lib")
#pragma comment(lib,"../final_test/libs/staticlib/IlmImf.lib")
#pragma comment(lib,"../final_test/libs/staticlib/opencv_ts243.lib") 
```

运行时库是：多线程（/MT）

我收到以下链接错误。

```
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol AVIFileInit referenced in function "void __cdecl icvInitCapture_VFW(void)" (?icvInitCapture_VFW@@YAXXZ)
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol AVIStreamGetFrameOpen referenced in function "public: virtual bool __cdecl CvCaptureAVI_VFW::open(char const *)" (?open@CvCaptureAVI_VFW@@UEAA_NPEBD@Z)
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol AVIStreamInfoA referenced in function "public: virtual bool __cdecl CvCaptureAVI_VFW::open(char const *)" (?open@CvCaptureAVI_VFW@@UEAA_NPEBD@Z)
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol AVIFileGetStream referenced in function "public: virtual bool __cdecl CvCaptureAVI_VFW::open(char const *)" (?open@CvCaptureAVI_VFW@@UEAA_NPEBD@Z)
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol AVIFileOpenA referenced in function "public: virtual bool __cdecl CvCaptureAVI_VFW::open(char const *)" (?open@CvCaptureAVI_VFW@@UEAA_NPEBD@Z)
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol AVIStreamGetFrame referenced in function "public: virtual bool __cdecl CvCaptureAVI_VFW::grabFrame(void)" (?grabFrame@CvCaptureAVI_VFW@@UEAA_NXZ)
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol ICClose referenced in function "protected: void __cdecl CvCaptureCAM_VFW::closeHIC(void)" (?closeHIC@CvCaptureCAM_VFW@@IEAAXXZ)
1>opencv_highgui243.lib(cap_vfw.obj) : error LNK2019: unresolved external symbol ICSendMessage referenced in function "protected: void __cdecl CvCaptureCAM_VFW::closeHIC(void)" (?closeHIC@CvCaptureCAM_VFW@@IEAAXXZ) 
```

...

谁能帮我解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T21:30:37.730

您需要与 MS`vfw32.lib`库链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T15:59:47.760

只需在您的头文件中执行此操作。它应该可以完美运行。

```
#include "opencv2/opencv.hpp"
#pragma comment(lib, "vfw32.lib")
#pragma comment( lib, "comctl32.lib" ) 
```

# java-me - 使用 J2Me 设计类似 NinJump 的游戏的结构

> ID：13472295
> 
> 赞同：-1
> 
> 时间：2012-11-20T11:33:30.537
> 
> 标签：java-me

我正在尝试使用 J2ME 创建类似[NinJump](https://play.google.com/store/apps/details?id=com.bfs.ninjump&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5iZnMubmluanVtcCJd)的游戏，但在动画方面遇到了一些问题。

我的游戏是这样构建的：

*   游戏一开始就启动一个线程。while 循环使用 thread.sleep() 以 20 毫秒的延迟无限运行。
*   墙壁不断倒塌 - 每次主 while 循环运行时，墙壁都会被动画化。
*   忍者使用间隔为 30 毫秒的 TimerTask 进行动画处理。
*   每次玩家跳跃时，玩家精灵被隐藏，并出现另一个精灵，它使用 TimerTask 执行跳跃：20ms 间隔，每次执行任务时精灵都会前进下一帧并且它也会移动（每次 2px） .

问题是当玩家跳跃时，墙壁动画突然变慢。此外，跳跃动画并不流畅，我似乎无法使用不同的动画时间间隔修复它。

我想我实现它的方式有问题。我上面提到的问题怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:44:58.887

不要`TimerTask`用于动画精灵，在主游戏循环中进行。

# ios - IOS stopUpdatingLocation 不会停止某些手机上的 gps

> ID：13472296
> 
> 赞同：0
> 
> 时间：2012-11-20T11:33:35.123
> 
> 标签：ios, gps, cllocationmanager, ios6

嘿，最近几天我遇到了非常奇怪的问题。

我正在编写一个社交应用程序，并且一直在白色和黑色的两部手机（iPhone 5）上对其进行测试。黑色手机是我老板的手机，安装了IOS 6.0.1，白色手机安装了IOS 6.0。

问题是在黑色手机上 stopUpdatingLocation 不会停止 GPS。我只用 gps 创建了空应用程序，我们有同样的错误..但是当我更改捆绑 ID 时，一切正常。

第二个重要的事情是，当我们从黑色手机的备份中恢复白色手机并清除黑色手机时，白色手机上会出现错误，而黑色手机上不会出现错误。所以它似乎与手机设置有关。

反正。我们无法更改捆绑 ID，因为应用程序已经在应用程序商店中（我正在编写它的新刷新版本）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:37:48.350

当有另一个应用程序或苹果使用它时，Gps 不会停止。您可以在设置菜单中看到哪个应用程序在 lila 箭头图标上使用 gps。

# sql-server - 执行 SQL 身份验证后如何在 Windows 批处理文件中运行多个 sqlcmd 语句

> ID：13472298
> 
> 赞同：1
> 
> 时间：2012-11-20T11:33:40.990
> 
> 标签：sql-server, sqlcmd

我正在尝试从 windows文件运行多个`SQLCMD`语句（在 SQL Server 2008 中存档表并创建恢复脚本） 。`.bat`我的脚本的工作方式就像我首先执行 SQL 身份验证，然后输入 SQL 脚本以输出恢复文件

```
sqlcmd -S <Server name>\<instance> -U user
sqlcmd -i ArchiveTable1.sql -o RestoreTable1.sql
sqlcmd -i ArchiveTable2.sql -o RestoreTable2.sql
sqlcmd -i ArchiveTable3.sql -o RestoreTable3.sql 
```

问题是sqlcmd认证后出现提示1>，并没有执行我的下一条语句。进入 Quit 后，我​​的下一条语句将被执行，但在输出文件中我看到身份验证无效错误。我不想对每个 sqlcmd 语句进行 sql 身份验证。

如果我的方法有问题，有人可以指导我使用其他设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:23:35.557

三个sqlcmd执行，三个认证：

```
sqlcmd -S <Server name>\<instance> -U user -i ArchiveTable1.sql -o RestoreTable1.sql
sqlcmd -S <Server name>\<instance> -U user -i ArchiveTable2.sql -o RestoreTable2.sql
sqlcmd -S <Server name>\<instance> -U user -i ArchiveTable3.sql -o RestoreTable3.sql 
```

> 我不想对每个 sqlcmd 语句进行 sql 身份验证

你想要什么无关紧要。你必须做正确的事。如果您对不寻常的要求有理由，请清楚地说明*问题*，不要提供解决方案并要求我们使其发挥作用。

如果您想避免批量重复用户信息和密码，更重要的是，如果您想避免将这些密码批量放置，请使用 sqlcmd 环境变量[`SQLCMDUSER`和`SQLCMDPASSWORD`](http://msdn.microsoft.com/en-us/library/ms162773.aspx)：

> `SQLCMDPASSWORD`环境变量允许您为当前会话设置默认密码。因此，不必将密码硬编码到批处理文件中。

只需设置`SQLCMDUSER`, `SQLCMDPASSWORD`（也许是`SQLCMDSERVER`），然后调用批处理。这样，批处理不需要包含任何硬编码密码。

# macos - 如何将 NSWindow 绑定到另一个 NSWindow？

> ID：13472299
> 
> 赞同：0
> 
> 时间：2012-11-20T11:33:44.077
> 
> 标签：macos, cocoa, nswindow

这两个委托方法要么在 NSWindow 开始移动之前调用，要么在 NSWindow 停止移动之后调用。

```
-(void)windowWillMove:(NSNotification *)notification 
-(void)windowDidMove:(NSNotification *)notification 
```

如何在第一个 NSWindow 移动时重新定位另一个*NSWindow*？我想模拟 NSWindow 的一种物理扩展，在拖动窗口时它不应该落后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:36:30.823

签出`addChildWindow:ordered:`和`setParentWindow:`签入`NSWindow`：

[NSWindow 类参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)

# java - 无法将字符串设置为对象

> ID：13472313
> 
> 赞同：0
> 
> 时间：2012-11-20T11:34:53.520
> 
> 标签：java, android, eclipse, mobile, media-player

让我的代码工作。只是有一个部分有点麻烦。

```
 public void picksound(){

Intent mIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(mIntent, 1);
}

 public void onActivityResult(int requestCode, int resultCode, Intent mIntent) {
if (resultCode == RESULT_OK && null != mIntent) {
    if (requestCode == 1) {

            Uri selectedRing = mIntent.getData();

    }
}}

private void playSong(String selectedRing){
    MediaPlayer mp = new MediaPlayer();
    try {
        mp.setDataSource(selectedRing);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        mp.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mp.start(); 
}

public void alarmmsg(){
    //ringtone player
    playSong(selectedRing);
    // 
```

这就是我正在使用的代码。当我尝试调用 playSong 函数时，我被要求输入一个字符串，它似乎接受的唯一字符串是“null”。有人可以帮忙看看我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:39:55.380

尝试更改此行：

```
MediaPlayer mp = new MediaPlayer(); 
```

对此：

```
MediaPlayer player = MediaPlayer.create(this, Uri.parse("http://www.urltofile.com/file.mp3")); 
```

# iphone - IOS中的main是如何工作的

> ID：13472315
> 
> 赞同：3
> 
> 时间：2012-11-20T11:34:56.333
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我在做我的 IOS 项目时有一个疑问，为了我们的测试目的，我们在 main...

```
printf("start\n");
FILE *fp = fopen("/Users/gui_test/Desktop/ritun/hello_test/hello_test/expt.txt", "a + b");

int a = 5, b = 5;
int c = a + b;

fprintf(fp, "%d\t", c);
fflush(fp);

fclose(fp);

printf("end \n"); 
```

我已在 main 中注释掉以下行以测试文件写入。

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([ofi_video_monetAppDelegate class])); 
```

答案已成功写入文件但两次，有人知道这是为什么吗？如果我尝试其他任何地方，除了 main() 之外，它只写一次，main 中发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:53:33.017

请参阅此[链接](http://cupsofcocoa.com/2010/09/03/objective-c-lesson-1-hello-world/)。它解释了 main 函数的使用。

> main 是每个 C 或基于 C 的程序开始的函数。它是一个保留名称，这意味着您不能拥有名为 main 的函数。main 前面的 int 是函数返回类型的声明。

```
int main (int argc, const char * argv[])
{
        // memory management
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        // printing on the log
        NSLog (@"Hello, World!");

       [pool drain];
//The final line tells the main method to return the value 0\. Remember that the int the preceded main tells the system that this function will return a value. This value is 0\. By convention, a return value of zero indicates that the function was successful.
       return 0;
} 
```

另见[NSAutoreleasePool](http://cocoadev.com/wiki/NSAutoreleasePool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:50:03.737

通过注释掉导致 main 在内部调用两次的以下行返回 0，

```
UIApplicationMain(argc, argv, nil, NSStringFromClass([ofi_video_monetAppDelegate class])); 
```

我返回了 1，它工作正常，文件中有一个条目，没有重复。

# java - 编译包含其他类类型对象的 java 类时找不到符号错误

> ID：13472319
> 
> 赞同：0
> 
> 时间：2012-11-20T11:34:58.133
> 
> 标签：java, package

我有一个包含两个类的 java 包。A类和B类。我需要在B类中创建一个A类型的对象。我不知道发生了什么。请有人帮助我。

**包装包；**

**A级**

**B类**

我正在使用 JDK1.5 和 tomcat 并将它们放在我 D 驱动器的 java 文件夹中。

**D:\java\jdk1.5**

**D:\java\tomcat**

现在，我的包文件夹也在上面的位置

**D:\java\包**

下面是我如何编译我的 java 类文件。

**第一步：编译A.java**

D:\Java\pack> **set path=D:\java\jdk1.5\bin**（为jdk1.5编译器设置路径）

D:\Java\pack> **javac A.java** (成功编译形成**A.class** )

**第 1 步：编译 B.java**

D:\Java\pack> **javac B.java**（在这里，我收到一条错误消息）

以下是错误消息

**错误信息**

**D:\Java\pack>javac B.java**

**B.java:9：找不到符号**

**符号：A级**

**地点：class pack.B**

```
 A a = new A();    //creating an object of A type
            ^ 
```

**B.java:9：找不到符号**

**符号：A级**

**地点：class pack.B**

```
 A a = new A();      //creating an object of A type
                      ^ 
```

**2 个错误**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:36:52.870

```
javac pack\A.java pack\B.java 
```

会成功的。编译器必须能够在一次调用中解决所有问题。如果它正在寻找

```
pack.B 
```

那么对应于

```
pack\B.java 
```

在目录结构中

# c# - 从 silverlight 中的 observablecollection 中删除多个项目

> ID：13472321
> 
> 赞同：3
> 
> 时间：2012-11-20T11:35:03.240
> 
> 标签：c#, silverlight, mvvm

如何从 silverlight 中的 observablecollection 中删除多个项目。在我的项目中，我有一个数据网格填充多个项目。在每一行中也包含一个复选框。如果我通过选择复选框选择多个行并单击删除按钮，我想从集合中删除所有项目。

```
public void delete(object parameter)
    {
      foreach (var x in Book)
        {
              if (x.Ischeck == true)
                 {
                    Book.Remove(x);
                  }
         }
     } 
```

它会导致错误。无法更改 observablecollection

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T11:40:29.633

您可以改用下面提到的代码片段：

```
foreach (var x in Book.ToList())
{
    if (x.Ischeck)
    {
        Book.Remove(x);
    }
} 
```

或者

```
for (int i = Book.Count - 1; i >= 0; i--)
{
    if (Book[i].Ischeck)
    {
        Book.RemoveAt(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T11:38:49.107

我认为错误消息有点不同。更准确地说，它是：

> 收藏已修改；枚举操作可能无法执行。

要解决此问题，一种可能的解决方案是：

```
foreach (var itemToRemove in Book.Where(x => x.Ischeck).ToList())
{
    Book.Remove(itemToRemove);
} 
```

这将获取您要删除的所有项目并将它们放入新列表中。现在，当您从中删除项目时，`Book`不会干扰您当前正在迭代的列表，因为这是一个独立的实例。

`Where`在调用之前使用`ToList`可以将您复制到新列表的引用数量减少到只有那些真正需要复制的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T11:38:46.320

只需获取首先包含的对象的列表：

```
public void delete(object parameter)
{
    foreach (var x in Book.ToList())
    {
        if (x.Ischeck == true)
        {
            Book.Remove(x);
        }
    }
} 
```

这样做的原因是在枚举元素时不能从 observable 集合中删除元素。通过调用 ToList() 您首先枚举整个集合，将其存储在列表中，然后检查要删除的内容。

# xcode - 从按钮执行 Unix 命令 - XCode 目标 - C

> ID：13472322
> 
> 赞同：1
> 
> 时间：2012-11-20T11:35:05.743
> 
> 标签：xcode, unix, button, command, execution

您好我在从按钮执行 Unix 命令时遇到问题。

这是我到目前为止所拥有的：

```
> #import <Cocoa/Cocoa.h>
> 
> @interface  PUPController : NSWindow { }
> - (IBAction)OpenPUP:(id)PUPC;
> - (IBAction)DestinationFolder:(id)PUPC;
> - (IBAction)Exit:(id)PUPC;
> - (IBAction)Unpack:(id)PUPC;
> 
> @end
> 
> #import "OPDFPUE.h"
> 
> @implementation PUPController
> 
> - (IBAction)OpenPUP:(id)PUPC; {
>     NSArray* fileTypes = [[NSArray alloc] initWithObjects:@"PUP", nil];
>     NSOpenPanel* openDlg = [NSOpenPanel openPanel];
>     [openDlg setCanChooseFiles:YES];
>     [openDlg setCanChooseDirectories:NO];
>     [openDlg setAllowsMultipleSelection:NO];
>     [openDlg setMessage:@"Select Playsation 3 System Software Update (PUP) File for Extraction"];
>     if ( [openDlg runModalForTypes:fileTypes] == NSOKButton )
>     {
>         NSArray* files = [openDlg filenames];
>     }
>     NSString * tvarDirectory = [openDlg directory];
>     NSString * tvarFilename = [openDlg filename]; }
> 
> - (IBAction)DestinationFolder:(id)PUPC; {
>     NSSavePanel *saveDlg  = [NSSavePanel savePanel];
>     [saveDlg setMessage:@"Select folder to save extracted contents of the Playsation 3 System Software Update (PUP) File selected"];
>     int tvarInt   = [saveDlg runModal];
>   
>     if(tvarInt == NSOKButton){
>     }
>     else if(tvarInt == NSCancelButton) {
>     return;
>     }
>     else {
>     return;
>     }
>     NSString * tvarDirectory = [saveDlg directory];
>     NSString * tvarFilename = [saveDlg filename]; }
> 
> - (IBAction)Exit:(id)PUPC; {
>     exit(0); } NSTask *pupunpack;
> 
> - (IBAction)Unpack:(id)PUPC {
>     
>     pupunpack=[[NSTask alloc] init];
>     [pupunpack setLaunchPath:@"/usr/bin/pupunpack"];
>     [pupunpack launch];
>      }
>      
>      - (id)init {
>     
>      } @end 
```

如果有人可以提供帮助，那就太好了。基本上我正在做的是插入一个文件，设置目标然后程序将解压缩该文件。我有一个打开的对话框来选择一个 pup 文件，然后是一个保存对话框来选择保存目标。然后我有一个解压按钮，它目前什么都不做。解压按钮需要参数。如果有人可以提供帮助，那就太好了。

我是Objective-C的新手，我试图找到尽可能多的信息，但我似乎无法让它发挥作用。这是我正在使用的 unix 应用程序。

[https://dl.dropbox.com/u/43729201/pupunpack.zip](https://dl.dropbox.com/u/43729201/pupunpack.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:58:35.463

您可能需要将文件名和目标目录添加为命令参数：

```
[pupunpack setArguments:[NSArray arrayWithObjects:tVarFilename, tvarDirectory, nil]]; 
```

# javascript - 显示 Internet Explorer 7 中下一张幻灯片边缘的图像滑块（宽度问题）

> ID：13472324
> 
> 赞同：1
> 
> 时间：2012-11-20T11:35:19.950
> 
> 标签：javascript, jquery, css, internet-explorer, flexslider

我正在构建一个在主页上使用图像滑块的网站。

您可以在这里查看该网站... [http://dev.ridethetrafalgarway.com/front-end/](http://dev.ridethetrafalgarway.com/front-end/)

它运行良好，除了在 Internet Explorer 7 (IE7) 中查看时可以看到下一张幻灯片的边缘。

这让我感到困惑，因为所有项目似乎都设置为使用 950 像素的宽度，但如果您在 IE7 中检查元素，它使用的宽度为 942 像素。

任何关于如何让 IE7 正常工作的想法都将不胜感激！

提前致谢，

汤姆

# opengl - OpenGL“相机”在错误的轴上偏航

> ID：13472326
> 
> 赞同：0
> 
> 时间：2012-11-20T11:35:27.100
> 
> 标签：opengl, lwjgl, vector-graphics

我正在使用 gluLookAt() 设置“相机”位置和方向

```
GLU.gluLookAt(xPosition, yPosition, zPosition,
              xPosition + lx, yPosition, zPosition + lz
              0, 1, 0); 
```

我的 lz 和 lx 变量代表我的前向向量

```
lz = Math.cos(angle);
lx = -Math.sin(angle); 
```

在 3D 世界中转身时，我似乎在绕着一个始终在我面前的轴旋转

我知道这一点是因为我的 xPosition 和 yPosition 变量保持不变，但是当我靠近它并转身时，我似乎在围绕它旋转。

![轴图](../Images/d341504e4e348f9cf40c2f6709723dbe.png)

我知道我在这里使用的数学没有问题，因为我尝试使用过去项目中运行正常但问题仍然存在的代码。

这就是我在渲染循环中所做的

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
//draw scene from user perspective
glLoadIdentity();
GLU.gluLookAt(camera.getxPos(), camera.getyPos(), camera.getzPos(), 
      camera.getxPos()+camera.getLx(), camera.getyPos(),     camera.getzPos()+p1.getLz(),
      0, 1, 0);

glBegin(GL_QUADS);
glVertex3f(-dim, dim, 0);
glVertex3f(dim, dim, 0);
glVertex3f(dim, 0, 0);
glVertex3f(-dim, 0, 0);
glEnd();

pollInput();
camera.update(); 
```

我尝试渲染一个玩家坐标所在的框，我得到了这个结果。摄像机似乎是从玩家坐标后面看的。现在打个比方，它就像一个第三人称游戏，它应该看起来像一个第一人称游戏

这里的小盒子是在相机坐标中渲染的，为了给一些视角，大盒子在前面。

![第三人称](../Images/d204d24eb13612d845ff0677d4082930.png) ![第三人称 2](../Images/9ad89aafbc26125f6aaefd1ffbb8f4c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:01:46.827

解决了！

问题是我最初在矩阵模式设置为 GL_PROJECTION 时调用 gluLookAt()。

在我将矩阵模式设置为 GL_MODELVIEW 并解决了问题之后，我删除了该行并将其移至。

# android - RoboSpice RequestProgress 已更新，但未调用 requestSuccess

> ID：13472331
> 
> 赞同：1
> 
> 时间：2012-11-20T11:36:04.760
> 
> 标签：android, rest, android-networking, robospice

我有一个运行 RoboSpice 的简单演示。

它是扩展的默认服务，`SpringAndroidContentService`可以在他们的 github 上找到。

奇怪的是，当我发送请求时，`Progress`会更新，但我最终没有接到对 的调用`onRequestSuccess`，这是一个简单的 Toast。

我检查了LogCat，没有例外。以下是相关代码：

```
/* RestContentRequest overrider */
@Override
public String loadDataFromNetwork() throws Exception {
    RestTemplate restTemplate = getRestTemplate();
    try {
        String response= restTemplate.getForObject(
            "http://xxx.xxx/mobile.html", String.class);
        //does not get called
        Log.d(LOGTAG, response); 
        return response;
    } catch (HttpClientErrorException e) {
        //Does not get called
        Log.e(LOGTAG, e.toString());
        return e.getLocalizedMessage();
    }
}

private class RequestListener implements RequestListener<String>, RequestProgressListener {

    @Override
    public void onRequestFailure(SpiceException exception) {
        //Does not get called
        debug.setText(exception.getLocalizedMessage());
    }

    @Override
    public void onRequestSuccess(String response) {
        //Does not get called
        Toast.makeText( LoginActivity.this, response, Toast.LENGTH_SHORT ).show();
    }

    @Override
    public void onRequestProgressUpdate(RequestProgress progress) {
            //Gets called
            debug.setText(convertProgressToString(progress));
    }

    private String convertProgressToString( RequestProgress progress ) {
        String status = "";
        switch ( progress.getStatus() ) {
            case READING_FROM_CACHE:
                status = "? cache -->";
                break;
            case LOADING_FROM_NETWORK:
                status = "^ network ^";
                break;
            case WRITING_TO_CACHE:
                status = "--> cache";
                break;

            default:
                status = "";
                break;

        }
        return status;
    }

} 
```

这可能是什么原因？它只需要读取一个带有字符串的页面。（纯文本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:18:04.300

我不知道您在哪个版本的 RoboSpice 上尝试过，但它绝对可以与 RoboSpice 一起使用。你介意试一试吗？最后一个稳定版本是 1.3.1。

你有一个关于 Stack Over Flow 的 RoboSpice 问题，请通知我或标记它。

# vb.net - 在 Vb.net 中将十六进制转换为值 [For Torrent Trackers]

> ID：13472336
> 
> 赞同：1
> 
> 时间：2012-11-20T11:36:17.723
> 
> 标签：vb.net, tracker

我基本上试图实现这一点：[如何从洪流跟踪器中获取对等点](https://stackoverflow.com/questions/3451354/how-to-get-the-peers-from-an-torrent-tracker)

我被困在这里：

> 不仅如此，您还必须将哈希的实际值作为 GET 参数发送。“76a36f1d11c72eb5663eeb4cf31e351321efa3a3”是哈希的十六进制表示，但跟踪器协议指定您需要发送哈希的值（=bytestring）。因此，您必须首先解码十六进制表示，然后对其进行 URL 编码： urllib.urlencode( [('info_hash', '76a36f1d11c72eb5663eeb4cf31e351321efa3a3'.decode('hex'))] ) == 'info_hash=v%A3o%1D%11 %C7.%B5f%3E%EBL%F3%1E5%13%21%EF%A3%A3' # 在 Python 中。

我进行了很多研究，由于我的新手编码技能，我无法在 vb.net 中执行以下操作。谁能启发我？

我需要做同样的事情：从十六进制表示转换为哈希的字节串值。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:32:19.950

我很惊讶没有一种更简单的方法可以将十六进制字符串转换为字节数组，但是我没有快速找到一个，所以这是一个艰难的方法：

```
 Dim hex As String = "76a36f1d11c72eb5663eeb4cf31e351321efa3a3"

  'prepend leading zero if needed
  If hex.Length Mod 2 <> 0 Then
     hex = " " & hex
  End If

  Dim bytes As Byte() = New Byte((hex.Length \ 2) - 1) {}
  For byteNum As Int32 = 0 To bytes.Length - 1

     bytes(byteNum) = Byte.Parse(hex.Substring(byteNum * 2, 2), 
           Globalization.NumberStyles.AllowHexSpecifier)

  Next

  'convert to an ansi string and escape
  Dim final As String =Uri.EscapeDataString( 
        System.Text.Encoding.Default.GetString(bytes)) 
```

# jquery - Internet Explorer 中的 jquery offset().left 问题

> ID：13472337
> 
> 赞同：0
> 
> 时间：2012-11-20T11:36:22.123
> 
> 标签：jquery, internet-explorer, offset

在重新调整浏览器大小时，我在特定位置而不是在所有位置获得 DIV 标记的 offset().left 值减 1。这仅在 Internet Explorer 中。Firefox 和 Chrome 显示常量值。

```
var initPoint = $('#myMenuDIV').offset().left;

<div id="myMenuDIV">
    <table>
        <tr>
            <td><div class="tabName">MenuItem01</div></td>
            <td><div class="tabName">MenuItem02</div></td>
            <td><div class="tabName">MenuItem03</div></td>
            <td><div class="tabName">MenuItem04</div></td>
        </tr>
    </table>
</div>

.tabName {
    cursor: pointer;
    font-family: Verdana,Arial,Helvetica,sans-serif;
    font-size: 11px;
    overflow-x: hidden;
    overflow-y: hidden;
    white-space: nowrap;
    width: 105px;
}​ 
```

div 有一个左边距。所以当我重新调整浏览器的大小时，div 会慢慢地向左移动。在 Firefox 和 chrome 中，移动是恒定的。在 Internet Explorer 中，它在中间略微移动。所以我在偏移量中得到了错误的值。这是IE的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:39:26.423

不确定这是否相关。但是你的项目中有 reset.css 吗？reset.css 克服了浏览器默认填充和间距的问题

请参阅此链接以讨论 reset.css（或谷歌） [https://stackoverflow.com/questions/116754/best-css-reset](https://stackoverflow.com/questions/116754/best-css-reset)

# mysql - MySQL 排名项目：在子查询或 COUNT(*) WHERE foo > bar 中计算行数更好吗？

> ID：13472340
> 
> 赞同：0
> 
> 时间：2012-11-20T11:36:32.340
> 
> 标签：mysql, optimization, query-optimization, ranking

**问题**

我正在查看 MySQL 中的排名用例，但我还没有确定一个明确的“最佳解决方案”。我有一张这样的桌子：

```
CREATE TABLE mytable (
  item_id int unsigned NOT NULL,
  # some other data fields,
  item_score int unsigned NOT NULL,
  PRIMARY KEY (item_id),
  KEY item_score (item_score)
) ENGINE=MyISAM; 
```

其中包含数百万条记录，最常见的写入操作是使用新值更新 item_score。给定一个 item_id 和/或它的分数，我需要得到它的排名，我目前知道两种方法来完成它。

**COUNT() 个得分较高的项目**

```
SELECT COUNT(*) FROM mytable WHERE item_score > $foo; 
```

**分配行号**

```
SET @rownum := 0;
SELECT rank FROM (
    SELECT @rownum := @rownum + 1 AS rank, item_id
    FROM mytable ORDER BY item_score DESC ) AS result
WHERE item_id = $foo; 
```

**哪一个？**

它们的表现相同还是表现不同？如果是这样，为什么它们不同，我应该选择哪一个？

**有更好的主意吗？**

有没有更好/更快的方法？我唯一能想到的就是一个单独的表/memcache/NoSQL/whatever 来存储预先计算的排名，但是我`mytable`每次更新它时仍然需要排序和读出。这让我认为，只有当“读取等级”查询的数量（很多？）大于更新数量时，这才是一个好方法，另一方面，当“读取等级”查询接近更新查询的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:51:31.720

由于您的表上有索引，因此唯一有意义的查询是

```
-- findByScore    
SELECT COUNT(*) FROM mytable WHERE item_score > :item_score; 
-- findById
SELECT COUNT(*) FROM mytable WHERE item_score > (select item_score from mytable where item_id = :item_id); 
```

在 findById 上，因为您只需要 1 个项目 id 的排名，因此在性能方面与加入对应项没有太大区别。

如果您需要许多项目的排名，那么使用连接会更好。

Usign“分配行号”不能在这里竞争，因为它不会使用索引（在你的查询中根本没有，如果我们甚至改进它仍然不是那么好）

使用分配索引也可能存在一些隐藏的陷阱：如果有多个项目具有相同的分数，那么它会给你最后一个的排名。

无关：如果可能，请使用 PDO 以防止 sql 注入。

# c++ - 内联失败：函数体可以在链接时被覆盖

> ID：13472341
> 
> 赞同：14
> 
> 时间：2012-11-20T11:36:34.827
> 
> 标签：c++, g++

我今天从我认为具有 g++-4.6 的 Ubuntu 12.04 升级到具有 g++-4.7.2 的 Ubuntu 12.10。在我的代码中，我有几个函数标记为`__attribute__((always_inline))`. 原因很简单，分析向我展示了它显着提高了代码的性能。它适用于 g++ 4.6，但现在使用 g++ 4.7 我收到错误消息：

> 错误：调用 always_inline 'void func_name(args)' 时内联失败：函数体可以在链接时被覆盖

我无法分享我的实际代码，我试图缩小范围，但是当我更改太多时，错误就会消失，所以这没有帮助。我对此错误消息的根本原因感兴趣。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T11:45:37.253

我无意自己回答这个问题，但我在发布后几分钟意外找到了答案。

此（神秘）错误消息的原因是该函数未标记为`inline`，仅`__attribute((always_inline))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-09T22:06:08.740

For us, the issue was that we failed to also declare the function "static". "**attribute**((always_inline))" means, in plain text, "inline this and never include a function body" and the error message means "the compiler had to include a function body". In our case, since the function wasn't "static", it needed to be available for an external reference.

# php - 在 PHP 中导入用户子类

> ID：13472344
> 
> 赞同：0
> 
> 时间：2012-11-20T11:36:45.890
> 
> 标签：php

我编写了一个包含一些抽象类的小型 PHP 引擎。引擎的用户必须实现这些抽象类的子类，并将它们的子类提供给引擎。引擎必须能够创建和操作这些子类的实例，因此用户不能只创建一个实例并将其传递给引擎。

所以我需要一种方法让用户将他们的子类传递给引擎。一种明显的方法是强制用户给这些子类一个特定的名称并将它们放在特定的目录中，但这似乎有点不雅。知道 PHP 可以将类存储在变量中，我首先尝试将类存储在常量中，所以我有一个包含几个`define`s 的文件，用户将填写其子类的名称和路径。那没有用 - 似乎 PHP 不能将类存储在常量中，只能存储变量。

所以现在我正在尝试相同的方法，但使用变量而不是常量。有一个文件，`UserIncludes.lib.php`，其中要求用户将两个变量设置为其子类的名称。然后这些变量用于在整个引擎代码中调用这些子类。我不确定这是一个好的系统，特别是因为需要使用`global`关键字将变量导入需要它们的每个函数，从而增加了引擎的文书和心理负担。

那么在 PHP 中做这种事情的最佳实践是什么？看来这一定是一项相当普遍的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:50:41.153

只需使用[名称空间](http://php.net/manual/en/language.namespaces.php)，并带有适当的[自动加载功能](http://getcomposer.org/doc/01-basic-usage.md#autoloading)。

这样文件系统就变成了一个透明的层，你只依赖命名约定——实际上是“*强制用户给这些子类一个特定的名称并将它们放在一个特定的目录中*”，但它工作得很好。

# php - 如何多次插入结果集？

> ID：13472346
> 
> 赞同：0
> 
> 时间：2012-11-20T11:36:49.333
> 
> 标签：php, mysql, for-loop, while-loop

我正在尝试将员工 ID ( `Emp_ID`) 输入`schedule`表 30 次。正在从`employee`表中提取员工 ID。它将在第一个循环上工作，但在第二个循环上中断。我得到的错误是

> “致命错误：在第 110 行的 C:\wamp\www\server\roster\dates.php 中的非对象上调用成员函数 fetch_assoc()”

第 110 行是`while`循环。我只能假设这种情况正在发生，因为结果集正在被清空，但我不知道如何解决它。

```
<?php
//Select all of the current Employees by ID number
$sql = ("SELECT Emp_ID FROM employee");

//Run a check on the query to make sure it worked.
//if it failed then print the error.
if(!$result = $mysqli->query($sql))
{
die('There was an error getting the Emp_ID from the employee table [' . $mysqli->error . ']');
}

//Loop through the results...
while($row = $result->fetch_assoc())
    {
    //...and for each employee ID, enter it into the table 30 times.
    for($i = 1; $i <= 30; $i++ )
        {
        $sql = ("INSERT INTO schedule (Emp_ID) VALUES ('" . $row['Emp_ID'] . "')");

            //Run a check on the query to make sure it worked.
            //if it failed then print the error.
            if(!$result = $mysqli->query($sql))
            {
            die('There was an error inserting the Emp_ID into the schedule [' . $mysqli->error . ']');
            }
        }       
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:38:53.053

`$result`已在`while`循环中使用，您不能在循环中使用相同的名称，这将覆盖当前值`$result`

更改`$result`为不同的变量名`$result_insert`（我的意思是在插入查询之后）

`if(!$result_insert = $mysqli->query($sql))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:39:52.957

您正在覆盖 $result 变量。在 while 循环中使用不同的变量名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:45:43.713

在 if 条件中，您使用的是相同的 $result 变量，它将其类型更改为非对象。将其名称更改为其他名称。

# twitter-bootstrap - 使用 Prettify 和 Twitter Bootstrap 突出显示语法

> ID：13472352
> 
> 赞同：0
> 
> 时间：2012-11-20T11:37:16.837
> 
> 标签：twitter-bootstrap, syntax-highlighting, google-code-prettify

我试图在我的`<pre></pre>`标签中突出显示语法，但我使用的是 Bootstrap。我现在正在使用 Prettify，但它不起作用。如果你有修复，请分享！

*我现在拥有的基本代码，刚刚清理完毕。*

```
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="prettify.js"></script>

<pre>
    <?php
        function hw(){
            echo "Hallo World";
        }
    ?>
</pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T00:38:04.570

您缺少一个告诉美化内容是代码的类，并且您可能需要转义您的 PHP 标记：

```
 <pre class="prettyprint">
        &lt;?php
            function hw(){
                echo "Hallo World";
            }
        ?&gt;
    </pre> 
```

另外，请确保您在`prettyPrint()`某个地方打电话。

自述[文件](http://google-code-prettify.googlecode.com/svn/trunk/README.html)建议

```
<body onload="prettyPrint()"> 
```

# javascript - 修复放大和缩小编码

> ID：13472354
> 
> 赞同：0
> 
> 时间：2012-11-20T11:37:21.433
> 
> 标签：javascript, html, css, zooming

我正在使用以下编码

```
<html>
 <head>
  <style>
     #thediv {
     margin:0 auto;
     height:400px;
     width:400px;
     overflow:hidden;
   }
   img {
     position: relative;
     left: 50%;
     top: 50%;
   }
  </style>
 </head>
 <body>
  <input type="button" value ="-" onclick="zoom(0.9)"/>
  <input type="button" value ="+" onclick="zoom(1.1)"/>
  <div id="thediv">
    <img id="pic" src="http://upload.wikimedia.org/wikipedia/commons/d/de/Nokota_Horses_cropped.jpg"/>
  </div>

 <script>
  window.onload = function(){
    zoom(1)
  }
  function zoom(zm) {
    img=document.getElementById("pic")
    wid=img.width
    ht=img.height
    img.style.width=(wid*zm)+"px"
    img.style.height=(ht*zm)+"px"
    img.style.marginLeft = -(img.width/2) + "px";
    img.style.marginTop = -(img.height/2) + "px";
  }
  </script>
 </body>
</html> 
```

用于制作简单的放大和缩小功能。

我这个我有一个图像无限放大的困难。我想固定一个位置来放大和缩小。放大和缩小时图像不得超过该位置。

我正在向此[链接添加小提琴](http://jsfiddle.net/vivekdx/jVYxv/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:21:22.030

[给你](http://jsfiddle.net/jVYxv/8/)：

```
var zoomLevel = 100;
var maxZoomLevel = 105;
var minZoomLevel = 95;

function zoom(zm) {
    var img=document.getElementById("pic");
    if(zm > 1){
        if(zoomLevel < maxZoomLevel){
            zoomLevel++;
        }else{
            return;
        }
    }else if(zm < 1){
        if(zoomLevel > minZoomLevel){
            zoomLevel--;
        }else{
            return;
        }
    }
    wid = img.width;
    ht = img.height;
    img.style.width = (wid*zm)+"px";
    img.style.height = (ht*zm)+"px";
    img.style.marginLeft = -(img.width/2) + "px";
    img.style.marginTop = -(img.height/2) + "px";
}​ 
```

您可以根据需要修改缩放级别。

我稍微修改[了小提琴](http://jsfiddle.net/jVYxv/8/)，因为您只需将 javascript 添加到左下角区域。

# c# - 调用线程无法访问此对象，因为在 wpf 窗口中使用动画时，另一个线程拥有它

> ID：13472355
> 
> 赞同：1
> 
> 时间：2012-11-20T11:37:23.493
> 
> 标签：c#, wpf, multithreading

根据我们的要求，我们必须在新的 UI 线程中打开一个 WPF 窗口。

我们使用以下代码在主 UI 线程的新 UI 线程中打开窗口：

```
Thread winthread = new Thread(new ThreadStart(() =>
{
    SynchronizationContext.SetSynchronizationContext(
        new DispatcherSynchronizationContext(
            Dispatcher.CurrentDispatcher));
    Window windowObj = new Window();
    Grid gridObj = new Grid();
    MyUserControl ctrl = new MyUserControl();
    gridObj.Children.Add(ctrl);
    windowObj.Content = gridObj;

    windowObj.Show();
    System.Windows.Threading.Dispatcher.Run();
}));

winthread.IsBackground = true;
winthread.SetApartmentState(ApartmentState.STA);
winthread.Start(); 
```

`MyUserControl`执行上述代码时，窗口将显示为内容。我正在做一些动画，比如在鼠标双击事件上翻转我的用户控件。

当我双击它时，应用程序开始抛出以下异常：

> 调用线程无法访问此对象，因为不同的线程拥有它。

上线`System.Windows.Threading.Dispatcher.Run()`。

谁能建议这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:05:35.283

你上面的代码很好。无论问题是什么，它都在 MyUserControl 内部——这些类中必须有共享元素或对主线程拥有的对象的引用。您必须确保内部没有任何东西`MyUserControl`是在主线程上创建或拥有的，包括作为参数传递的对象等。

或者，您可能正在尝试使用主线程与（或与内部的组件）进行交互`MyUserControl`。如果您想`ctrl`从外部线程（即：主线程等）执行任何操作，您必须保留对调用的引用`ctrl`并使用调用 - 如下所示：

```
public partial class MainWindow : Window
{
    UserControl1 ctrl;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Thread winthread = new Thread(new ThreadStart(() =>
        {
            SynchronizationContext.SetSynchronizationContext(
                new DispatcherSynchronizationContext(
                    Dispatcher.CurrentDispatcher));
            Window windowObj = new Window();
            Grid gridObj = new Grid();
            ctrl = new UserControl1();
            gridObj.Children.Add(ctrl);
            windowObj.Content = gridObj;

            windowObj.Show();
            System.Windows.Threading.Dispatcher.Run();
        }));

        winthread.IsBackground = true;
        winthread.SetApartmentState(ApartmentState.STA);
        winthread.Start();
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        ctrl.Dispatcher.Invoke(new Action(() => ctrl.AddStuff()));
    }
} 
```

在这里，我制作`UserControl1`了一个带有列表框的简单窗口：

```
public partial class UserControl1 : UserControl
{
    private int i;

    public UserControl1()
    {
        InitializeComponent();
    }

    public void AddStuff()
    {
        listBox1.Items.Add("This is line : " + i.ToString());
        i += 1;
    }
} 
```

在上述情况下，您必须确保主线程使用调用 - 特别是它希望`ctrl`'s Dispatcher 来处理调用。而不是使用自己的调度程序（这会导致跨线程错误），主线程将调用*编组*到`ctrl`的调度程序。

如果您至少可以在`MyUserControl`您遇到异常的地方显示代码行，那将会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T11:39:11.880

听起来像一个调用问题：

相当容易解决，因为您尝试在不同的线程中更改网格/窗口。

更改线程以调用更改

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/360540eb-d756-4434-86f9-a3449f05eb55](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/360540eb-d756-4434-86f9-a3449f05eb55)

# mysql - 概念：在mysql的多个表中构造字段的最佳实践

> ID：13472359
> 
> 赞同：0
> 
> 时间：2012-11-20T11:37:42.440
> 
> 标签：mysql, appcelerator

我有多条公交线路，其中的站点位于多条公交线路上

布置表格的最佳方式是什么

目前我有表1（iphone上的sqlite db）

```
unique id | line_no | direction | etc 
```

表2（在线mysql）

```
unique id | parent_id (= unique id from table1) | lat | lng | line_no | 
```

而不是为每个不同的行设置多个具有相同 lat & lng 的条目，我显然需要为每个包含对父母的引用和行号的单个站点有 2 个额外的列字段

在显示每条线的点的地图中，这不是问题，因为查询只是根据父 ID 提取停靠点，但是当我执行“最近”停靠点查询时，如果停靠点有超过 1 条路线，我会得到多个标记

所以例如在table2（在线mysql）中停止a，我需要

```
unique id | parent_id      | line_no    | lat    | lng

1         | 6, 12, 16, 19, | 2, 4, 7,10 | 55.111 | 12.444 
```

ETC

所以基本上我将如何构建查询，以便当我基于 lat & lng 查询时，我返回的 json 可用于构建例如 tableview & display 6 with 2, 12 with 4 etc, split the pairing so I can do a每个后续链接？

（我在 appcelerator 中执行此操作 - table1 是 iphone 上的 sqlite db，表 2 上的 lat/lng 查询位于 php 的 mysql 数据库上，该数据库创建了一个 json 数组）

如果这有任何意义;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:46:36.403

除非您有充分*的*理由做不同的事情，否则[关系数据库](http://en.wikipedia.org/wiki/Database_normalization)规范化规则定义了如何构建数据库。

在您的情况下，您只需要第三个表来分解表 1（bus_routes）和表 2（bus_stops）之间的 n:m 关系，而不是 bus_stops 中针对 bus_stop 和 bus_route 的每个组合的多个记录。

而且您当前的结构是错误的-如果 bus_routes 中的一条记录由 line_no 和方向唯一定义，那么为什么您也有代理键？

> 但是当我做一个“最近的”停止查询时，如果一个站点有超过 1 条路线，我会得到多个标记

你的 SQL 在哪里？

> table1 是 iphone 上的 sqlite 数据库，表 2 上的 lat/lng 查询在 mysql 数据库上

没有“表2”的“表1”有什么用？

# adobe - 如何在 LiveCycle Designer 中删除 2 个实例

> ID：13472361
> 
> 赞同：2
> 
> 时间：2012-11-20T11:37:46.447
> 
> 标签：adobe, livecycle, livecycle-designer

我有 2 张桌子。表 1 和表 2。Table1 有按钮“添加行”。在两个表中单击时都会添加行。表具有相同的行数。第一个表中的每一行都有一个用于删除当前行的按钮。需要这个按钮删除第二个表中的对应行

脚本：

```
//+ GENERATED - DO NOT EDIT (ID:DBE5BAB4-5E5A-461D-A88D-88E626F6B072 CRC:3827021343)
//+ Type: Action
//+ Result2: RemoveInstance("$Node3","currentindex","")
//+ Result1: RemoveInstance("$Node2","currentindex","")
//+ Node3: form1[0].Page[0].Table2[0].Data_row_table2[0]
//+ Node2: form1[0].Page[0].Table1[0].Data_row_table1[0]
//+ Node1: form1[0].Page[0].Table1[0].Data_row_table1[0].Delete[0]
//+ Condition1: Button("$Node1","click")
//+ ActionName: Delete.click
this.resolveNode('Table1._Data_row_table1').removeInstance(this.parent.index);
if (xfa.host.version < 8) {
    xfa.form.recalculate(1);
}
this.resolveNode('Table2._Data_row_table2').removeInstance(this.parent.index);
if (xfa.host.version < 8) {
    xfa.form.recalculate(1);
}
//- 
```

我如何删除两个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:23:04.533

我找到了解决方案。

必须先从第二个表中删除一行

```
form1.Page.Table1.Data_row_table1.Delete::click - (FormCalc, client)
var row_index = $.parent.index
Table2._Data_row_table2.removeInstance(row_index)
Table1._Data_row_table1.removeInstance(row_index) 
```

# asp.net - 通过 AJAX 和 ASPX 页面写入 XML 文件

> ID：13472362
> 
> 赞同：0
> 
> 时间：2012-11-20T11:37:49.130
> 
> 标签：asp.net, xml, ajax, webforms

我正在尝试使用 $.ajax.post 使用：

```
 $.ajax({
                type: "POST",
                url: "http://localhost/products/SaveXML.aspx",
                data: { name: "John", location: "Boston" }
            }).done(function (msg) {
                alert("Data Saved: " + msg);
            });               
        }); 
```

SaveXML 看起来像：

```
<%@ Page Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script language="c#" runat="server">

public void testMethod()
{              
    string sayHello = "hello world";
}

</script>

<html xmlns="http://www.w3.org/1999/xhtml">
   <head runat="server">
      <title></title>
   </head>
   <body>
   <form id="form1" runat="server"></form>
   </body>
</html> 
```

最后，我想传入一些 XML 并让 SaveXML 处理它。

代码是否需要在代码隐藏中？是否需要标记为 Web 方法？

有人可以告诉我这应该是什么样子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:44:11.357

您可以将 ASP.NET 页面方法与 jQuery 一起使用。

检查这个：

[使用jQuery直接调用ASP.NET AJAX页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:44:03.367

该代码确实需要是服务器端代码（这并不意味着您必须在文件后面有一个代码 - 您所拥有的`testMethod`将可以正常工作，因为它在服务器端上下文中）。

由于您将数据*发布*到`.aspx`页面，因此无需使用 Web 方法。您可以使用`Page_Load`或`OnInit`获取发布的数据（通过`Request`页面属性）并处理其中的发布数据。

# php - 每次提交表单时将项目添加到 xml - xmlwriter PHP

> ID：13472366
> 
> 赞同：3
> 
> 时间：2012-11-20T11:38:06.573
> 
> 标签：php, html, forms, xmlwriter

将帖子值提交到 php 文件时，我有一个 html 表单。然后将这些值读入 xmlwriter，如下所示

```
<?php 
$pastor= $_POST["Speaker"];
$title= $_POST["Title"];
$link= $_POST["podcasturl"];
$download= $_POST["Download"];
$podcastid= $_POST["Podcastid"];
$pubdate= $_POST ["Date"];

$xml = new XmlWriter();
$xml->openURI('podcast.xml'); 
$xml->formatOutput = true;
$xml->startDocument('1.0'); 
$xml->setIndent(4); 
$xml->startElement("podcast");
$xml->writeElement('pastor', $pastor);
$xml->writeElement('title', $title);
$xml->writeElement('link', $link);
$xml->writeElement('download', $download);
$xml->writeElement('podcastid', $podcastid);
$xml->writeElement('pubdate', $pubdate);
$xml->endElement(); 
$xml->endElement();  
$xml->endDocument();
?> 
```

整个系统运行良好。它根据表单创建我需要的 xml。我想不通的是如何让它在每次提交表单时向 xml 添加一个新项目，而不是每次都覆盖相同的条目。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:22:54.727

您应该考虑改用[SimpleXML](http://us3.php.net/manual/en/book.simplexml.php)。`XMLWriter`不打算修改现有的 xml。来自[XMLWriter 的介绍：](http://us3.php.net/manual/en/intro.xmlwriter.php)

> 此扩展表示一个编写器，它提供了一种非缓存、只进的方式来生成包含 XML 数据的流或文件。

使用`SimpleXML`您可以执行以下操作：

```
$xml = simplexml_load_file("podcast.xml");
$podcast = $xml->addChild("podcast");
$podcast->addChild("pastor", $pastor);
$podcast->addChild("title", $title);
$podcast->addChild("link", $link);
$podcast->addChild("download", $download);
$podcast->addChild("podcastid", $podcastid);
$podcast->addChild("pubdate", $pubdate);

$dom = new DOMDocument("1.0");
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;
$dom->loadXML($xml->asXML());
$dom->save("podcast.xml"); 
```

为了让这个例子正常工作，`podcast`xml 元素应该被包装在一个元素中（见下文），并且 `podcast.xml' 文件应该已经存在。尽管后者可以在加载前通过检查来克服。

```
<?xml version="1.0"?>
<podcasts>
  <podcast>...</podcast>
  <podcast>...</podcast>
<podcasts> 
```

# mysql - MySQL - 从今天起 1 个月前订购

> ID：13472371
> 
> 赞同：0
> 
> 时间：2012-11-20T11:38:19.293
> 
> 标签：mysql

从今天起 1 个月内如何订购记录。我尝试了以下方法，但它不起作用。

```
WHERE MONTH(date) = MONTH(CURDATE() -1 month) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:41:10.870

你是这个意思吗？这将为您提供表中`date`字段月份等于当前月份的所有内容 - 1：

```
WHERE MONTH(date) = month(curdate() - interval 1 month) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:41:24.190

```
WHERE MONTH(date) = MONTH(CURDATE() - INTERVAL 1 MONTH) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:56:19.937

很难从你的问题中看出你想要什么，所以我要赌一把，你想显示日期正好是一个月后的记录

```
SELECT *
FROM yourtable
WHERE MONTH(date) = MONTH(DATE_SUB(CURDATE(), INTERVAL 1 MONTH)) 
```

如果我们目前在 11 月，那将获得 10 月的所有条目。

如果你想把它记到当天，所以如果今天是 11 月 20 日，你想从 10 月 20 日起拿东西，你需要这样的东西

```
SELECT *
FROM agentjobsets
WHERE DATE(created_at) = DATE_SUB(CURDATE(), INTERVAL 1 MONTH) 
```

# javascript - 复杂url java脚本的正则表达式

> ID：13472376
> 
> 赞同：-7
> 
> 时间：2012-11-20T11:38:33.667
> 
> 标签：javascript, regex

我有像[http://www.moevenpick-hotels.com/en/pub/hotels_resorts/worldmap/tala_bay_aqaba/welcome.cfm这样的网址](http://www.moevenpick-hotels.com/en/pub/hotels_resorts/worldmap/tala_bay_aqaba/welcome.cfm)

我想为此做正则表达式.......那个正则表达式应该接受单词之间的所有类型的符号，包括点......我的意思是它应该是正确的url

上面的网址是最好的例子..

请告诉我如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:23:39.983

这将匹配有效的主机名，但是，它不检查文件路径：

```
var regExpForWebsite = /^(http:\/\/)?(www\.)[a-zA-Z0-9-\.]+\.(com|org|net|mil|edu|ca|co.uk|com.au|gov|in|f‌r|co.in|gov.in|ac|de|uk.com|us.com|eu.com)/;
regExpForWebsite.test('http://www.moevenpick-hotels.com/en/pub/hotels_resorts/worldmap/tala_bay_aqaba/welcome.cfm');

==>true 
```

# java - 输入任意次数

> ID：13472387
> 
> 赞同：1
> 
> 时间：2012-11-20T11:38:57.007
> 
> 标签：java, input

我正在寻求解决一个编码问题，这需要我在一行中使用一个整数来输入任意次数。我正在使用 an`ArrayList`来存储这些值。

* * *

```
The input will contain several test cases (not more than 10). Each
testcase is a single line with a number n, 0 <= n <= 1 000 000 000.
It is the number written on your coin. 
```

* * *

例如

```
Input:

12
2
3
6 
16
17 
```

* * *

**我尝试在 Java 中输入：**

```
List<Integer> list = new ArrayList<Integer>();
Scanner inp = new Scanner(System.in);
while(inp.hasNext()){
    list.add(inp.nextInt());
    } 
```

* * *

但是，当我尝试打印列表的元素以检查我是否正确输入了输入时，我没有得到任何输出。C中相应的正确代码如下：

* * *

```
unsigned long n;
while(scanf("%lu",&n)>0)
{
   printf("%lu\n",functionName(n));
} 
```

* * *

请帮我用Java解决这个问题。

* * *

*（PS：因此，我无法用 Java 提交解决方案）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:52:22.903

你可以做到这一点！在输入的末尾，您可以指定一些字符或字符串终止符。

**代码：**

```
List<Integer> list = new ArrayList<Integer>();
Scanner inp = new Scanner(System.in);
while(inp.hasNextInt())
{
    list.add(inp.nextInt());
}
System.out.println("list contains");
for(Integer i : list)
{
    System.out.println(i);
} 
```

**样本输入：**

```
10
20
30
40
53
exit 
```

**输出：**

```
list contains
10
20
30
40
53 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:21:21.203

你能做这样的事情：

```
 List<Integer> list = new ArrayList<Integer>();
    Scanner inp = new Scanner(System.in);
    while(inp.hasNextInt()){
        list.add(inp.nextInt());
    } 
```

如果还有其他值，例如字符，则循环结束。

# java - 如何初始化一个真实类的模拟

> ID：13472392
> 
> 赞同：2
> 
> 时间：2012-11-20T11:39:12.480
> 
> 标签：java, testng, mockito

我想在 TestNG 测试用例中模拟一个具体的类。该类可能如下所示（简化示例）：

```
public class Example() {

  private MyHello myHello;

  public Example(MyHello myHello) {
    this.myHello = myHello;
  }

  public String doSomething() {
    return myHello.doSomethingElse();
  }
} 
```

现在我们要模拟`Example`返回一些定义的值：

```
@BeforeMethod
public void setUp() {
  this.example = mock(Example.class);
  when(this.example.doSomething()).thenReturn("dummyValue");
} 
```

这*看起来*很不错，但实际上并非如此。setup 方法的最后一行调用 的实例上的方法`Example`，这个实例没有`MyHello`通过构造函数得到一个，所以我在 setUp 方法中得到一个 NPE。

有没有办法在创建模拟时注入或禁止 Mockito 在*真实*实例`MyHello`上调用该方法？

 ***编辑**

*导致观察到的行为的问题是，该`doSomething()`方法实际上是`final`. 当我试图解决这个问题时，我忽略了这一点。[无论如何，这是 mockito 的一个已知限制](https://stackoverflow.com/a/3794448/105224)。所以我要么删除final，要么为那个类提取一个接口。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:50:16.407

看看使用`doReturn("dummy").when(example).doSomething()`是否可以解决问题。

[Mockito.doReturn](http://mockito.googlecode.com/svn/branches/1.7/javadoc/org/mockito/Mockito.html#doReturn%28java.lang.Object%29)

来自 JavaDoc：

> 在无法使用 when(Object) 的极少数情况下使用 doReturn()。请注意，始终建议将 when(Object) 用于存根，因为它是参数类型安全且更具可读性（尤其是在存根连续调用时）。
> 
> 以下是 doReturn() 派上用场的罕见情况：
> 
> 1.  当监视真实对象并在间谍上调用真实方法时会带来副作用
>     
>     
>     
>     列表列表 = 新的 LinkedList();
>     
>     
>     
>     列表间谍 = 间谍（列表）；
>     
>     
>     
>     //不可能：调用了真正的方法，所以 spy.get(0) 抛出 IndexOutOfBoundsException （列表还为空） when(spy.get(0)).thenReturn("foo");
>     
>     
>     
>     //你必须使用 doReturn() 进行存根：doReturn("foo").when(spy).get(0);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:33:49.837

您可以从`spy`关键字而不是`mock`.

就我从 Mockito 的文档而言，您可以使用 spy 进行部分模拟。

[有关详细说明，您可以从其文档](http://mockito.googlecode.com/svn/branches/1.7/javadoc/org/mockito/Mockito.html)中的主题 13 中受益。*

# android - 以编程方式将列添加到表中

> ID：13472393
> 
> 赞同：4
> 
> 时间：2012-11-20T11:39:24.180
> 
> 标签：android, android-tablelayout

我在以编程方式向表中添加列时遇到了一些麻烦，也许我查找/搜索了错误的关键字，但找不到合适的解决方案。

我得到了这个代码：

```
 ScrollView sv = new ScrollView(this);

         TableLayout ll=new TableLayout(this);
         HorizontalScrollView hsv = new HorizontalScrollView(this);
         TableRow tbrow=new TableRow(this);
         for(int i=0;i<mConnector.idArray.size();i++) {
             tbrow=new TableRow(this);         

                 TextView tv1=new TextView(this);
                 //String s1 = Integer.toString(i);
                 try {
                String insecticide = mConnector.insecticideArray.get(i);
                String wegedoornuis = mConnector.wegedoornluisArray.get(i);
                String dosering = mConnector.doseringArray.get(i);
                String prijs = mConnector.prijsArray.get(i);
                String bestuivers = mConnector.bestuiversArray.get(i);
                String roofvijanden = mConnector.roofvijandenArray.get(i);                    

               // String result = insecticide +" | "+wegedoornuis+" | "+dosering+" | "+prijs+" | "+bestuivers+" | "+roofvijanden;
               // int id = Integer.parseInt(s3);
                 tv1.setId(i);

                 tv1.setText(id);
                 tbrow.addView(tv1);
                 }catch(java.lang.IndexOutOfBoundsException e){

                 }

             ll.addView(tbrow);
         }
         hsv.addView(ll);
         sv.addView(hsv);
         setContentView(sv); 
```

我想要的是每个字符串（在 之后`try{`）都有自己的专栏。就像`String result`（现在评论标志中的内容）。但后来我可以调整列宽。

希望你们知道我的意思，否则我总是可以添加图像来说明。 **编辑** 快速制作图像：

![在此处输入图像描述](../Images/ef6c0cfe857b9154ec1ab1d405c52ab5.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T11:43:51.207

您不能将字符串直接添加到视图中，但您可以使用文本视图来做同样的事情。我将向您展示我曾经做过的一个示例，并让您弄清楚如何为自己使用它。

```
 TableRow row=new TableRow(this.getApplicationContext());
        TableLayout tlayout=new TableLayout(this.getApplicationContext());

        tlayout.setGravity(Gravity.CENTER);
        tlayout.setBackgroundResource(R.color.background);

        row=new TableRow(this);

        TextView text1=new TextView(this.getApplicationContext());
        TextView text2=new TextView(this.getApplicationContext());
        TextView text3=new TextView(this.getApplicationContext());

        text1.setText(R.string.name);
        row.addView(text1);
        text2.setText(R.string.level);
        row.addView(text2);
        text3.setText(R.string.score);
        row.addView(text3);
        tlayout.addView(row);
        for (i=0;i<10;i++)
        {
            row=new TableRow(this.getApplicationContext());
            text1=new TextView(this.getApplicationContext());
            text2=new TextView(this.getApplicationContext());
            text3=new TextView(this.getApplicationContext());

            text1.setText(high_score_name.get(i));
            row.addView(text1);
            text2.setText(""+high_score_level.get(i));
            row.addView(text2);
            text3.setText(""+high_score_score.get(i));
            row.addView(text3);
            tlayout.addView(row);
        } 
```

本质上，`high_scores_....get(i)`返回一个字符串。非常相似的东西应该适用于您的目的。

输出看起来像这样，继续向下 10 行。

```
name1  score1  level1
name2  score2  level2 
```

# ios - 与 AudioUnit 一起播放声音文件

> ID：13472406
> 
> 赞同：2
> 
> 时间：2012-11-20T11:40:11.417
> 
> 标签：ios, core-audio, avaudioplayer, audiounit

我有一个使用`AudioUnit`with 子类型的应用程序`kAudioUnitSubType_VoiceProcessingIO`。输入来自网络流。这很好，但现在我想从文件中播放一个简单的声音（收到推送通知后发出警报声）。这在运行时不起作用`AudioUnit`，只有在它尚未启动或已经处置时才起作用。我什至可以`AudioUnit`在声音文件仍然播放时停止以听到最终样本，因此播放似乎有效，但它是无声的。

我在真实设备上尝试过`AudioServicesPlaySystemSound`但没有成功（可能在模拟器中工作）。`AVAudioPlayer`

这个简单的任务有一个简单的解决方案，还是我需要手动混合基于文件的音频内容？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:34:32.873

您可以使用音频单元构建 AUGraph 并通过 kAudioUnitSubType_AudioFilePlayer 单元播放音频文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T04:16:48.897

尝试

```
OSStatus propertySetError = 0;
UInt32 allowMixing = true;

propertySetError = AudioSessionSetProperty (
                       kAudioSessionProperty_OverrideCategoryMixWithOthers,  // 1
                       sizeof (allowMixing),                                 // 2
                       &allowMixing                                          // 3
                   ); 
```

或者您可以使用 kAudioUnitType_Mixer 类型的 AudioUnit。

```
AudioComponentDescription MixerUnitDescription;
MixerUnitDescription.componentType          = kAudioUnitType_Mixer;
MixerUnitDescription.componentSubType       = kAudioUnitSubType_MultiChannelMixer;
MixerUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
MixerUnitDescription.componentFlags         = 0;
MixerUnitDescription.componentFlagsMask     = 0; 
```

将它们 (mixer_unit,voice_processing_unit) 添加到 AUGraph 中。为混音器单元设置输入总线计数 2。

```
UInt32 busCount   = 2;    // bus count for mixer unit input
status = AudioUnitSetProperty (mixer_unit,
                               kAudioUnitProperty_ElementCount,
                               kAudioUnitScope_Input,
                               0,
                               &busCount,
                               sizeof(busCount)
                               ); 
```

为mixer_unit的每条总线添加渲染回调：

```
for (UInt16 busNumber = 0; busNumber < busCount; ++busNumber) {
        AURenderCallbackStruct inputCallbackStruct;
        inputCallbackStruct.inputProc        = &VoiceMixRenderCallback;
        inputCallbackStruct.inputProcRefCon  = self;

        status = AUGraphSetNodeInputCallback (_mixSaveGraph,
                                              mixerNode,
                                              busNumber,
                                              &inputCallbackStruct
                                              );
        if (status) { printf("AudioUnitSetProperty set callback"); return NO; }            

    } 
```

将mixer_unit的输出总线连接到io_unit的输入总线：

```
status = AUGraphConnectNodeInput (_mixSaveGraph,
                                      mixerNode,         // source node
                                      0,                 // source node output bus number
                                      saveNode,          // destination node
                                      0                  // desintation node input bus number
                                      ); 
```

启动图表，您将收到不同总线号（0 和 1）的读卡器回调，如下所示：

```
static OSStatus VoiceMixRenderCallback(void *                       inRefCon,
                                  AudioUnitRenderActionFlags    *ioActionFlags,
                                  const AudioTimeStamp *        inTimeStamp,
                                  UInt32                        inBusNumber,
                                  UInt32                        inNumberFrames,
                                  AudioBufferList *             ioData )
{
    OSStatus status;
    AURecorder *recorder = (AURecorder*)inRefCon;
    if (inBusNumber == BUS_ONE && (recorder.isMusicPlaying)) {
        //Get data from music file. try ExtAudioFileRead 
    } else if (inBusNumber == BUS_TWO) {
        status = AudioUnitRender(recorder.io_unit, ioActionFlags, inTimeStamp, INPUT_BUS, inNumberFrames, ioData);
       //Get data from io unit's input bus.
        if (status)
        {
            printf("AudioUnitRender for record error");
            *ioActionFlags |= kAudioUnitRenderAction_OutputIsSilence;
        }
    } else {
        *ioActionFlags |= kAudioUnitRenderAction_OutputIsSilence;
    }

    return noErr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:12:39.617

这可能是系统限制。如果您在使用 PlayAndRecord 类别时调用 AudioServicesPlaySystemSound 时您的 iOS 设备没有执行任何操作，请尝试先停止您的 AudioUnit，然后再调用此函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-11T22:51:38.060

我有一个类似的问题。在 VOIP 应用程序中，我必须在通话进行时播放提示音。使用 AVPlayer 播放音调文件将通过接收器以 50% 的音量播放。

对我有用的是在音调文件的持续时间内`AVAudioSessionCategoryPlayAndRecord`来回切换 AVAudioSession 类别。`AVAudioSessionCategoryPlayback`

这里有几个问题：

1.  您必须在即将播放的音频文件**期间**进行切换。
2.  您的 AudioUnit 或输入处理代码应该可以在切换期间保持静音。
3.  类别切换不是免费的。请记住旧设备可能需要更长的时间来打开和关闭麦克风。

我认为发生的事情是扬声器专门分配给 AudioUnit，并且使用 AVAudioPlayer 或 AVPlayer 的任何并行播放都是通过接收器播放的。如果您的音频文件的级别较低，则几乎不会引起注意。此外，当 AudioUnit 处于活动状态且 AVAudioSession 属于 PlayAndRecord 类别时，其他声音文件将被“躲避”。

您可以在连接设备时使用 Mac 的控制台确认这一点，搜索 mediaserverd 并 grep 查找“duck”。

我得到了这样的东西：

```
default 18:36:01.844883-0800 mediaserverd -CMSessionMgr- cmsDuckVolumeBy: ducking 'sid:0x36952, $$$$$$(2854), 'prim'' duckToLevelDB = -40.0000 duckVolume = 0.100 duckFadeDuration = 0.500
default 18:36:02.371953-0800 mediaserverd -CMSystSounds- cmsmSystemSoundShouldPlay_block_invoke: SSID = 4096 with systemSoundCategory = UserAlert returning OutVolume = 1.000000, Audio = 1, Vibration = 2, Synchronized = 16, Interrupt = 0, NeedsDidFinishCall = 0, NeedsUnduckCall = 128, BudgetNotAvailable = 0
default 18:36:02.372685-0800 mediaserverd SSSActionLists.cpp:130:LogFlags: mSSID 4105, mShouldPlayAudio 1, mShouldVibe 1, mAudioVolume 1.000000, mVibeIntensity 1.000000, mNeedsFinishCall 0, mNeedsUnduckCall 1, mSynchronizedSystemSound 1, mInterruptCurrentSystemSounds 0
default 18:36:02.729872-0800 mediaserverd ActiveSoundList.cpp:386:SendUnduckMessageToCM: Notifying CM that sound should unduck now for ssidForCMSession: 4096, token 3569
default 18:36:02.729928-0800 mediaserverd -CMSystSounds- cmsmSystemSoundUnduckMedia: called for ssid 4096
default 18:36:02.729973-0800 mediaserverd -CMSessionMgr- cmsUnduckVolume: 'sid:0x36952, $$$$$$(2854), 'prim'' unduckFadeDuration: 0.500000 
```

# javascript - Javascript 返回错误

> ID：13472407
> 
> 赞同：0
> 
> 时间：2012-11-20T11:40:14.053
> 
> 标签：javascript, function, return

我想从中接收 HTML 代码，`chat.openChat()`但`chat.getHtmlPage()`返回操作是“未定义的”。

```
var chat = {
    openChat : function($url){
        $('#popup').html(chat.getHtmlPage($url)); // It's wrong, UNDEFINED.
    },

    getHtmlPage : function($url){
        $.ajax({
            url: $url
        }).done(function($html) { 
            return $html; // It's OK! $html is with correct html, see with alert().
        });
    }
}

$(document).ready(function(){
    $('.btnChat').click(function(){
        chat.openChat($(this).attr('href')); // It's OK!
        ...
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:46:58.400

默认情况下，AJAX 请求是异步的，因此它会在您从`getHtmlPage`. 即使您将其更改为同步，您仍然会有 undefined in `openChat`，因为您从`done`处理程序返回值，而不是从`getHtmlPage`。

您应该为方法提供回调`getHtmlPage`。例子：

```
var chat = {
    openChat : function($url){
        chat.getHtmlPage($url, function(html) {
            $('#popup').html(html); 
        });
    },
    getHtmlPage : function($url, callback){
        $.ajax({
            url: $url
        }).done(callback);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T11:46:27.220

Ajax 调用是异步的，这就是为什么您不能立即使用 ajax 函数的返回。将结果存储在 $('popup') 中。

你将不得不做这样的事情：

```
openChat : function($url){

    chat.getHtmlPage($url));
},

setHtmlPage : function ($html) {
    $('popup').html($html);
},

getHtmlPage : function($url){

    $.ajax({
        url: $url
    }).done(function($html) { 
        chat.setHtmlPage($html);
    });
} 
```

您可能还想查看有关 ajax 的 jquery 文档。有一种方法可以同步发出 ajax 请求，但这会阻止您的浏览器，并且在较新的版本中已弃用。（毕竟它不是真正的ajax）

[检查关于异步的部分](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T11:45:50.397

它应该是这样的：

```
var chat = {
    openChat : function($url){
        chat.getHtmlPage($url);
    },

    getHtmlPage : function($url){
        $.ajax({
            url: $url
        }).done(function($html) { 
            $('#popup').html($html); 
        });
    }
}

$(document).ready(function(){
    $('.btnChat').click(function(){
        chat.openChat($(this).attr('href')); // It's OK!
        ...
        return false;
    });
}); 
```

AJAX 是异步的。调用它后，脚本执行将转到下一行，并`.done`在请求完成后稍后调用。此外，从 done 中返回也不会执行任何操作。因为它是请求完成后触发的 jquery ajax 事件。并且 jquery 不会将返回值传递给上层代码，即使你让它以同步方式工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:57:12.830

AJAX 中的第一个“A”是“异步”，这意味着：在调用 .done() 时，您的其余代码已经开始执行。有了这些知识，`return`in .done() 就没有任何意义了。
相反，我们只是停用 AJAX 的异步行为，`async: false`在 .ajax-object 中设置。但请注意，这不是 AJAX 的初衷，它可能会在某些浏览器中引起问题。

然后，一个解决方案是将 设置`return`为您的`getHtmlPage`（除了将 async 设置为 false ！）：

```
getHtmlPage : function($url){

    //a new variable to store the ajax-result
    //defining it here, so it's only visible within the scope of getHtmlPage
    var html;

    $.ajax({
        url: $url,
        async: false
    }).done(function($html) {
        //we use the html variable here to store the result 
        html = $html;
    });

    //finally returning the variable
    return html;
} 
```

这样，在 ajax 调用完成之前，您的 return 语句不会被执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T11:58:35.350

**解决方案**

做一个通用功能（最初的想法）。

```
var chat = {

    openChat : function($url, $htmlElement){

        chat.setHtmlPage($url, $htmlElement);
    },

    setHtmlPage : function($url, $htmlElement){

        $.ajax({
            url: $url
        }).done(function($html) { 
            $($htmlElement).html($html);
        });
    }

}

$(document).ready(function(){

    $('.btnChat').click(function(){

        chat.openChat($(this).attr('href'), '#popup');

        ...

        return false;
    });

}); 
```

# c# - 在c#中反序列化json数组数据

> ID：13472412
> 
> 赞同：0
> 
> 时间：2012-11-20T11:40:20.560
> 
> 标签：c#, .net, json, serialization, umbraco

> **可能重复：**
> [JSON 的 C# 自动属性反序列化](https://stackoverflow.com/questions/945585/c-sharp-automatic-property-deserialization-of-json)

大家好，我正在尝试反序列化 json 数据

```
json Data: {"Status":[{"StatusValue":"Test1","StatusValue1":"Test2","StatusValue2":"Test3","StatusValue3":"Test4"},
{"StatusValue":"Test5","StatusValue1":"Test6","StatusValue2":"Test7","StatusValue3":"Test8"},
{"StatusValue":"Test9","StatusValue1":"Test10","StatusValue2":"Test11","StatusValue3":"Test12"}]} 
```

在服务器端 JSON 数据很好，但我无法反序列化它。我在下面编写的用于反序列化 Json 数据的代码。

```
 public static T JsonDeserialize<T>(string jsonString)
    {
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(jsonString));
        T obj = (T)ser.ReadObject(ms);
        return obj;
    } 
```

和我单独创建的类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Xml.Serialization;

namespace CustomDataType
{
    [Serializable]
    [XmlRoot("StatusMain")]
    public class Status
    {
            [XmlElement("statusvalue")]
            public string StatusValue { get; set; }

            [XmlElement("statusvalue1")]
            public string StatusValue1 { get; set; }

            [XmlElement("statusvalue2")]
            public string StatusValue2 { get; set; }

            [XmlElement("statusvalue3")]
            public string StatusValue3 { get; set; }

            public static Status Empty 
            {
                get
                {
                    var schedule = new Status();
                    schedule = null;
                    return schedule;
                }
            }
    }
} 
```

**我正在使用的类：我编写了如下代码**

```
 Status test = new Status();
        test = CustomDataTypes.JsonDeserialize<Status>(JsonDataValue); 
```

**我得到的错误：** ![在此处输入图像描述](../Images/1ee70acf8eba5ec680955a33b44071ca.png)

# r - 在 R boxplot 中圈出一个特定的盒子

> ID：13472413
> 
> 赞同：2
> 
> 时间：2012-11-20T11:40:22.620
> 
> 标签：r, boxplot

是否可以在 R 的箱线图中圈出一个特定的框？这里的假设是我事先知道我必须突出显示哪些框。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T12:39:25.880

我衷心支持@csgillespie 的建议，只是让它变成不同的颜色。

也就是说，我玩了一下，这就是我想出的（使用@Marc的数据）：

```
df <- data.frame(s1=rnorm(100), s2=rnorm(100, mean=2), s3=rnorm(100, mean=-2)) 
```

绘制箱线图并保留用于绘制椭圆的统计信息：

```
foo <- boxplot(df, border=c(8,8,1), lwd=c(1,1,3)) 
```

设置半长轴和半短轴：

```
aa <- 0.5
bb <- foo$stats[4,3]-foo$stats[2,3] 
```

在第三个框周围绘制一个参数化椭圆：

```
tt <- seq(0,2*pi,by=.01)    
lines(3+aa*cos(tt),foo$stats[3,3]+bb*sin(tt)) 
```

![在此处输入图像描述](../Images/af5ce3aab51834d8686257b7e0b38653.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:18:58.167

如果您想使用有点手绘的外观并且可以做一些交互部分（例如，创建一个演示文稿，其中一张幻灯片只显示情节，那么下一张幻灯片包括感兴趣的那个圈子）。

1.  使用该`locator`功能单击感兴趣的绘图部分周围的点，您可能需要设置`type='l'`以便可以看到您正在制作的形状（但随后需要重新创建绘图而不添加线条）

2.  将上面的返回值传递给`xspline`带有其他选项的函数。

例子：

```
boxplot(count ~ spray, data = InsectSprays, col = "lightgray")
tmp <- locator(type='l')  # click on plot around box of interest
boxplot(count ~ spray, data = InsectSprays, col = "lightgray")
xspline(tmp, open=FALSE, border='red', lwd=3) 
```

# jquery - 为什么我的选择选项卡的 switch 语句不起作用？

> ID：13472416
> 
> 赞同：2
> 
> 时间：2012-11-20T11:40:26.230
> 
> 标签：jquery, html, css, switch-statement, case

我正在尝试显示多个图像。单击时，应显示不同的文本。

我尝试通过默认显示与图像 1 关联的文本来执行此操作，给其他图像/文本 a`display: none;`并在用户单击图像时使用`switch`语句更改它。但是，我似乎遗漏了一些东西。我错过了什么？

相关的 JavaScript：

```
 $(document).ready(function(){  
$("#list1 > li").click(function(e){  
    switch(e.target.id){  
        case "case1":  
            //change status &amp;amp;amp; style menu  
            $("#nav1").addClass("active");  
            $("#nav2").removeClass("active");  
            $("#nav3").removeClass("active");  
            $("#nav4").removeClass("active");  
            //display selected division, hide others  
            $("div.test1").fadeIn();  
            $("div.test2").css("display", "none");  
            $("div.test3").css("display", "none");  
            $("div.test4").css("display", "none"); 
        break;  
        case "case2":  
            //change status &amp;amp;amp; style menu  
            $("#nav1").removeClass("active");  
            $("#nav2").addClass("active");  
            $("#nav3").removeClass("active"); 
            $("#nav4").removeClass("active");   
            //display selected division, hide others  
            $("div.test2").fadeIn();  
            $("div.test1").css("display", "none");  
            $("div.test3").css("display", "none"); 
            $("div.test4").css("display", "none"); 
        break;  
        case "case3":  
            //change status &amp;amp;amp; style menu  
            $("#nav1").removeClass("active");  
            $("#nav2").removeClass("active");  
            $("#nav3").addClass("active");  
            $("#nav4").removeClass("active");
            //display selected division, hide others  
            $("div.test3").fadeIn();  
            $("div.test1").css("display", "none");  
            $("div.test2").css("display", "none"); 
            $("div.test4").css("display", "none"); 
        break;  
        case "case4":  
            //change status &amp;amp;amp; style menu  
            $("#nav1").removeClass("active");  
            $("#nav2").removeClass("active");  
            $("#nav4").addClass("active");  
            $("#nav3").removeClass("active");
            //display selected division, hide others  
            $("div.test3").fadeIn();  
            $("div.test1").css("display", "none");  
            $("div.test2").css("display", "none");  
            $("div.test4").css("display", "none");
        break;  
    }  
    //alert(e.target.id);  
    return false;  
});  
    }); 
```

相关HTML：

```
 <div id="slider">
<ul id="list1">
    <li id="nav1" class="active"><a href="#"><img src="test-img.jpg" style="width:156px;height:156px;"></a></li>
    <li id="nav2"><a href="#"><img src="test-img.jpg" style="width:156px;height:156px;"></a></li>
    <li id="nav3"><a href="#"><img src="test-img.jpg" style="width:156px;height:156px;"></a></li>
    <li id="nav4"><a href="#"><img src="test-img.jpg" style="width:156px;height:156px;"></a></li>
</ul>

    <div class="test1">
    <h2>Test tab</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut </p>
        <p>labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut </p>
        <p>aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse </p>
        <p>cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in </p>
        <p>culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>

    <div class="test2">
    <h2>Test tab2</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut </p>
        <p>labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut </p>
        <p>aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse </p>
        <p>cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in </p>
        <p>culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>

    <div class="test3">
    <h2>Test tab3</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut </p>
        <p>labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut </p>
        <p>aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse </p>
        <p>cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in </p>
        <p>culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:44:12.477

您将`id`s 的`li`s 设为`nav1`,`nav2`等。在 switch 案例中，您正在使用`case1`,`case2`等。

改变它，事情应该开始工作了。

话虽如此，您的 jQuery 非常臃肿。它被称为*少写多做 JS 库*是有原因的，你知道的。:-)

**更新**：（在这个[jsBin](http://jsbin.com/izesar/1/edit)上做了一段时间。我知道@roxon 在一分钟前得到了完全相同的答案，但我会在此处发布以确保所花费的时间不是无用的）

```
$("#list1 > li").click(function(){  
  var index = $(this).index();
  $('.active').removeClass('active');
  $(this).addClass('active');

  $('.test').hide().eq(index).fadeIn();
  return false;
}); 
```

这将起作用，只需对 html 结构进行少量更改。与其将 div 类设置为`test1`,`test2`等，不如将所有`div`s 与一个公共类`test`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:01:14.717

## *[jsBin 演示](http://jsbin.com/ajuxuc/1/edit)*

这就是你所需要的：

```
$('#list1 li').eq( 0 ).addClass('active');
$('.test:gt(0)').hide();

$('#list1 li').click(function( e ){
  e.preventDefault();
  var myIndex = $(this).index();

  $(this).addClass('active').siblings('li').removeClass('active');
  $('.test').hide().eq( myIndex ).fadeTo( 400,1 );  
}); 
```

有这个 HTML 结构示例：

```
<div id="slider">
    <ul id="list1">
        <li></li>
        <li></li>    
        <li></li> <!-- if you click this one "myIndex" will be '2' -->
        <li></li>
    </ul>

    <div class="test"></div>   <!-- .eq(0) --> 
    <div class="test"></div>   <!-- .eq(1) -->
    <div class="test"></div>   <!-- this is $('.test').eq(myIndex) -->  
    <div class="test"></div>   <!-- .eq(3) -->
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:52:15.370

```
$(document).ready(function(){  
$("#list1 > li").click(function(e){  
switch(e.target.id){  
    case "nav1":  
        //change status &amp;amp;amp; style menu  
        $("#nav1").addClass("active");  
        $("#nav2").removeClass("active");  
        $("#nav3").removeClass("active");  
        $("#nav4").removeClass("active");  
        //display selected division, hide others  
        $("div.test1").fadeIn();  
        $("div.test2").css("display", "none");  
        $("div.test3").css("display", "none");  
        $("div.test4").css("display", "none"); 
    break;  
    case "nav2":  
        //change status &amp;amp;amp; style menu  
        $("#nav1").removeClass("active");  
        $("#nav2").addClass("active");  
        $("#nav3").removeClass("active"); 
        $("#nav4").removeClass("active");   
        //display selected division, hide others  
        $("div.test2").fadeIn();  
        $("div.test1").css("display", "none");  
        $("div.test3").css("display", "none"); 
        $("div.test4").css("display", "none"); 
    break;  
    case "nav3":  
        //change status &amp;amp;amp; style menu  
        $("#nav1").removeClass("active");  
        $("#nav2").removeClass("active");  
        $("#nav3").addClass("active");  
        $("#nav4").removeClass("active");
        //display selected division, hide others  
        $("div.test3").fadeIn();  
        $("div.test1").css("display", "none");  
        $("div.test2").css("display", "none"); 
        $("div.test4").css("display", "none"); 
    break;  
    case "nav4":  
        //change status &amp;amp;amp; style menu  
        $("#nav1").removeClass("active");  
        $("#nav2").removeClass("active");  
        $("#nav4").addClass("active");  
        $("#nav3").removeClass("active");
        //display selected division, hide others  
        $("div.test3").fadeIn();  
        $("div.test1").css("display", "none");  
        $("div.test2").css("display", "none");  
        $("div.test4").css("display", "none");
    break;  
}  
//alert(e.target.id);  
return false;  
});  
    }); 
```

# linux - 为什么 swtch 函数不保存 xv6 中的所有寄存器值？

> ID：13472417
> 
> 赞同：1
> 
> 时间：2012-11-20T11:40:26.760
> 
> 标签：linux, linux-kernel

我想知道为什么 xv6 上的函数 swtch 没有保存所有的寄存器。我认为在 x86 中它是不同的。有人可以向我解释一下吗？

# vba - 通过 Excel 中的用户窗体将数据输入电子表格

> ID：13472425
> 
> 赞同：0
> 
> 时间：2012-11-20T11:40:58.053
> 
> 标签：vba, excel, excel-2010

我是 Excel 中的 VBA 新手，我有一个基本的用户表单，可以将数据放入工作表中。表格中的数据将输入到单元格 B13 到 G13，然后每隔一个输入应在下一行完成，例如 B14-G14。

我已经有了这段代码，但是它没有将数据输入到正确的单元格中，而是在同一行重复输入...

```
 Private Sub CommandButton1_Click()

Dim lngWriteRow As Long

Dim ws As Worksheet
Set ws = Worksheets("Sheet1")

lngWriteRow = ws.Cells(Rows.Count, 1) _
.End(xlUp).Offset(1, 0).Row

If lngWriteRow < 13 Then lngWriteRow = 13

    ws.Range("B" & lngWriteRow) = TextBox1.Value
    ws.Range("C" & lngWriteRow) = TextBox2.Value
    ws.Range("D" & lngWriteRow) = TextBox3.Value
    ws.Range("E" & lngWriteRow) = ComboBox1.Value
    ws.Range("F" & lngWriteRow) = TextBox4.Value
    ws.Range("G" & lngWriteRow) = ComboBox2.Value

End Sub 
```

我将如何实现这一目标？（下面几行已经有数据了）

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T11:51:45.320

这里的这一行是错误的：

```
lngWriteRow = ws.Cells(Rows.Count, 12) _
.End(xlUp).Offset(1, 0).Row 
```

因为您指的是第 12 列，您不会更改该列 - 因此该行保持不变。

改用这个

```
lngWriteRow = ws.Cells(Rows.Count, 2) _
.End(xlUp).Offset(1, 0).Row 
```

*编辑：*

如果您想要一个**初始**偏移量，要在第 13 行开始数据输入，请使用以下命令：

```
lngWriteRow = ws.Cells(Rows.Count, 2) _
.End(xlUp).Offset(1, 0).Row

if lngWriteRow < 13 then lngWriteRow = 13 
```

您不能使用`Offset(12,0)`，因为您每次都会使用它！

*编辑*

为了清楚起见，当将代码粘贴为工作表宏并多次按 F5 时，这适用于空工作表。因此，除非有解释，否则我认为问题已解决。

```
Private Sub Test()

Dim lngWriteRow As Long

Dim ws As Worksheet
Set ws = Worksheets("Sheet1")

lngWriteRow = ws.Cells(Rows.Count, 2) _
.End(xlUp).Offset(1, 0).Row

If lngWriteRow < 13 Then lngWriteRow = 13

    ws.Range("B" & lngWriteRow) = "test"
    ws.Range("C" & lngWriteRow) = "test"
    ws.Range("D" & lngWriteRow) = "test"
    ws.Range("E" & lngWriteRow) = "test"
    ws.Range("F" & lngWriteRow) = "test"
    ws.Range("G" & lngWriteRow) = "test"

End Sub 
```

*编辑*

经过一些邮寄，这里是这个谜语的解决方案：没有说明，在那些下面有填充的单元格，应该输入。

所以对于 col-B 来说更像

```
title-row
row13
row..
row..
row63
space
other stuff 
```

基本上建议的更正有效 - 但他们在整张纸上寻找 B 列中最后一个填充的单元格，这就是问题所在。

这是解决方案：

```
lngWriteRow = ws.Cells(ws.Range("B12:B63")Rows.Count, 2) _
.End(xlUp).Offset(1, 0).Row 
```

并在途中给您一些解释：

您不能使用`(Rows.Count,1)`代替`(Rows.Count,2)`，因为您要在 BG 列中添加数据，即 2-7。由于方式，您必须使用 2-7，您正在寻找最后一行。如果您使用 1，则当您尝试添加新数据时，您正在寻找 A 列中的最后一个值，该值不会改变。

您不能使用`Offset(12,0)`，因为这会在您每次插入数据时创建一个偏移量 - 所以您最终会得到相隔 12 行的行。

最后，您不能使用`Rows.Count`，因为这是 65536 左右，并且您在要添加的数据下方有数据。`End(xlUp)`将从太远向下查找，并停在 B 列的最后一个单元格，其中包含数据 - 但这不会是 B13，除非 B14-B65536 中没有数据。

希望这有助于理解这里的动态。

# android - 同时调用两个异步任务

> ID：13472430
> 
> 赞同：1
> 
> 时间：2012-11-20T11:41:19.913
> 
> 标签：android, android-asynctask

我想编写一个 android 应用程序来从服务器下载图像（jpg）和 json 对象。为此，我编写了两个异步任务来做到这一点。但是，当我同时调用这两个任务时，只有第一个被加载，第二个没有。谁能解释这个问题并给我一些帮助？

这是我的一段代码：

```
public class Catalog extends Activity {
private TextView text;
private ImageButton image;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_catalog);
   // Intent intent = getIntent();

    /*RelativeLayout m_vwJokeLayout=(RelativeLayout) this.findViewById(R.id.layout1);
    LayoutParams lparams = new LayoutParams(
               LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            TextView tv=new TextView(this);
            tv.setLayoutParams(lparams);
            tv.setText("test");
            m_vwJokeLayout.addView(tv);*/

    image = (ImageButton) findViewById(R.id.imageButton1);
    final String imageUrl="http://137.189.97.18/image/20000338902.jpg";

    text = (TextView) findViewById(R.id.textView1);
    Spinner s = (Spinner) findViewById(R.id.spinner1);
    String[] showcata = getResources().getStringArray(R.array.CatalogSpinner);
    ArrayAdapter <String> adapter = new ArrayAdapter <String>(this,android.R.layout.simple_spinner_item, showcata);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s.setAdapter(adapter);

    s.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
            String selected = parentView.getSelectedItem().toString();
            text.setText(selected);

            //text.setBackgroundColor(getResources().getColor(R.color.Blue));
            /*RelativeLayout m_vwJokeLayout=(RelativeLayout) Catalog.this.findViewById(R.id.layout1);
            LayoutParams lparams = new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            TextView tv=new TextView(Catalog.this);
            tv.setLayoutParams(lparams);
            tv.setText(selected);
            m_vwJokeLayout.addView(tv);*/

            //AsyncTask myTask = new httpconnect(Catalog.this);

            Catalog.httpconnect myTask = new httpconnect(Catalog.this);
            myTask.execute("123");

            Catalog.downloadimage download = new downloadimage(Catalog.this);
            download.execute(imageUrl);
    /*if(selected.equals("Pants"))
        text.setText("RIGHT");*/
        }

        public void onNothingSelected(AdapterView<?> parentView) {
            // your code here
        }

    });

}

public static class httpconnect extends AsyncTask<String, Void, String>{
    public Catalog myActivity;
    public httpconnect(Catalog a)
    {
        myActivity = a;
    }

protected void onPreExecute(){
 //text.setText("load");
}

protected String doInBackground(String... x){
    String result = null;
    InputStream is = null;
    StringBuilder sb=null;

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://137.189.97.18/main2.php");
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("_method", "post"));
        nameValuePairs.add(new BasicNameValuePair("catagory", x[0]));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    }catch(Exception e){

        Log.d("HTTP response error",e.toString());
    }

    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");

        String line="0";
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();

    }catch(Exception e){
    }
    return result;

}

protected void onProgressUpdate(){

}

protected void onPostExecute(String z){
    //text.setText(z);
    Log.d("BAC", z);
    myActivity.text.setText(z);

    String product_id = null;
    String colour_id = null;
    String colour= null;
    String picture= null;

        JSONObject json_data;
        try {
            json_data = new JSONObject(z.trim());
            product_id=json_data.getString("product_id");
            colour_id=json_data.getString("price");
            colour=json_data.getString("colour");
            picture=json_data.getString("picture");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            JSONArray jArray;
            try {
                jArray = new JSONArray(z.trim());
                 JSONObject json_data2=null;
                    for(int i=0;i<jArray.length();i++){
                            json_data2 = jArray.getJSONObject(i);
                            product_id=json_data2.getString("product_id");
                            colour_id=json_data2.getString("colour_id");
                            colour=json_data2.getString("colour");
                            picture=json_data2.getString("picture");
                    }
            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            //e.printStackTrace();
        }

    TextView text2 = (TextView) myActivity.findViewById(R.id.textView2);
    myActivity.text.setText(product_id);
    text2.setText(colour_id);

}
}

public static class downloadimage extends AsyncTask<String, Void, Bitmap>{
    public Catalog myActivity;
    public downloadimage(Catalog a)
    {
        myActivity = a;
    }

protected void onPreExecute(){
 //text.setText("load");
}

protected Bitmap doInBackground(String... x){
    Bitmap bmImg = null;
    URL myFileUrl =null; 
    try {
    myFileUrl= new URL(x[0]);
    } catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
    try {
    HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
    conn.setDoInput(true);
    conn.connect();
    int length = conn.getContentLength();
    int[] bitmapData =new int[length];
    byte[] bitmapData2 =new byte[length];
    InputStream is = conn.getInputStream();

    bmImg = BitmapFactory.decodeStream(is);

    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
    return bmImg;

}

protected void onProgressUpdate(){

}

protected void onPostExecute(Bitmap z){
    //text.setText(z);
    //Log.d("image", z);

    myActivity.image.setImageBitmap(z);
}
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_catalog, menu);
    return true;
} 
```

}

# ssas - 当根中存在重复属性时如何在 SSAS 中创建层次结构

> ID：13472432
> 
> 赞同：2
> 
> 时间：2012-11-20T11:41:21.273
> 
> 标签：ssas, ssas-2008

我有一个类似于以下的维度表结构：

![在此处输入图像描述](../Images/dece37f42f596f8649162416869f263a.png)

理想情况下，层次表示应该是

CodeClassDesc --> CodeDesc

所以 A 将是 A 和 B 的父母；在我的分析服务器多维数据集中，B 将是 A、B 和 C 的父级。问题是因为 CodeClassDesc 在表中有多个条目，它会在我的多维数据集中产生多个重复的父级，每个父级有一个对应的子元素，这不是我认为的真正的层次结构。或者至少不是我正在寻找的预期结果。

我相信这在 SSAS 中是可能的，而无需通过 VIEW 操作表中的数据，但我不知道我错过了什么。

我尝试将 CodeClassDesc 和 CodeDesc 字段定义为复合键，但这不起作用，但我几乎可以肯定有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:24:51.093

在尝试了所有可能的方法排列以获得解决方案后，我得出结论，所需属性的规范化是解决每个对应的子元素都有多个父条目的问题的唯一方法。

因此，我使用 Cube 中我的 DSV（数据源视图）中的 CodeClass 和 CodeClassDesc 字段的 DISTINCT SELECT 创建了表的视图。然后我将 CodeClass 字段设置为逻辑主键，并在它和主表的 CodeClass 字段之间建立关系。

然后，我使用 VIEW 的 CodeClassDesc 字段在我的 Dimension 中创建顶级父级，这为每个值只提供了 1 个不同的记录；并从表中添加 CodeDesc 字段以创建子关系。像魅力一样工作，所以我想答案必须是，如果源有多个记录，则不能创建由每个父级的单个值组成的父级层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T19:37:27.570

在维度结构中，您应该将属性“CodeClassDesc”的属性 KeyColumn 更改为包含“CodeClassDesc”和“CodeDesc”的复合键，然后更改 NameColumn 属性以显示自身

# android - 如何获取自定义报告的 Flurry 数据

> ID：13472435
> 
> 赞同：1
> 
> 时间：2012-11-20T11:41:30.483
> 
> 标签：android, analytics, flurry

我想在我的网站上为我的应用程序获取我的应用程序自定义报告的 Flurry 数据有什么办法吗？

在此先感谢桑吉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:21:01.083

Flurry 有许多 API 可让您导出数据。这些 API 基于 XML 和 JSON 等标准格式，可以集成到 Web 仪表板、数据仓库和您可能用于管理业务的任何其他系统中。有关这方面的更多信息，请访问：http: [//support.flurry.com/index.php](http://support.flurry.com/index.php?title=API) ?title=API （完全披露：我在 Flurry 的支持团队工作）

# mschart - 反转 MS 图表中的 y 轴和条形图

> ID：13472436
> 
> 赞同：1
> 
> 时间：2012-11-20T11:41:31.303
> 
> 标签：mschart

我正在尝试反转 MSChart 中的 Y 轴

从左到右的比例为 5 - 1 因此，如果一个条的值为 2，它将在比例上从 5 填充到 2，分数位于填充条的右侧。

这个链接准确地显示了我想要实现的目标

[http://www.hfi.com/images/graph.png](http://www.hfi.com/images/graph.png)

MS Chart 可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:07:00.303

您是否尝试过在 Y 轴上使用 IsReversed 属性。

# c# - 转换为日期时间“05:10:15D+0”

> ID：13472437
> 
> 赞同：0
> 
> 时间：2012-11-20T11:41:38.637
> 
> 标签：c#, .net, datetime, datetime-format, reuters

我在转换`"05:10:15D+0"`为`DateTime`. 路透社的数据类型为“bftime”，时间为 GMT/UTC。

我不想对它进行子串化，因为我有多个市场数据提供者，如果市场没有开放，它们*只会将此值作为日期发送。*

以下是我尝试转换的方式。ToDateTime

```
MDLastTick =  Convert.ToDateTime(LastTick); 
```

例外：

> 该字符串未被识别为有效的日期时间。从索引 8 开始有一个未知单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:44:54.290

您所拥有的不是日期时间，因为它缺少日期部分。你只有时间，所以考虑使用`TimeSpan.Parse`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:46:47.523

您可以使用此正则表达式来获取时间组件：（`\d{1,2}:\d{1,2}:\d{1,2}`或仅使用前 8 个字符作为子字符串） - 然后`datetime.parse`是匹配时间。您知道它始终是 UTC，因此您可以忽略 D+0。

然而，这只是一个时间，而不是日期时间。

# sharepoint - Sharepoint Central 管理 UI 源位置

> ID：13472438
> 
> 赞同：0
> 
> 时间：2012-11-20T11:41:46.060
> 
> 标签：sharepoint, sharepoint-2010

我确定我在磁盘上看到了一个可以浏览共享点中央管理的 aspx 文件的地方，这样我就可以为自己的页面构建相同的外观。

例如，我想查看来源

```
http://localhost:26538/_admin/Server.aspx 
```

我知道浏览器中的“查看源代码”是可能的，但我在磁盘上的某个地方看到过它们。其他人一直在使用这个吗？你在哪里找到它们？

提前致谢。

/莱克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:21:06.897

您要求的路径是：

> C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\ADMIN

它也被称为`14 hive`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:07:16.663

对于 SharePoint 的任何 /_[anything]/ 目录，它们都以相同的名称返回到相同的位置。我认为其中有 4 或 5 个（_layouts、_admin、_trust、_controltemplates）。

我要做的只是打开 IIS，查看 _[anything] 目录，然后单击 IIS 右上角的“Explore”。正如我所说，所有 SharePoint 网站都为这些虚拟目录共享完全相同的源目录。

# visual-c++ - AdjustTokenPrivileges 失败并出现错误 1300 ERROR_NOT_ALL_ASSIGNED

> ID：13472439
> 
> 赞同：1
> 
> 时间：2012-11-20T11:41:51.343
> 
> 标签：visual-c++, windows-7, mfc, snmp

我已经开发了 SNMP 扩展 DLL 来远程执行一些操作，例如关机、重启等。它在 XP 上运行良好。现在我正在为 Windows 7 迁移 DLL。我已经阅读了来自 MSDN 的文档“session-0 隔离的影响”并按照 DLL 迁移的说明进行操作。例如，我按照链接[如何关闭系统 - msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376871%28v=vs.85%29.aspx)中的说明进行了操作，并为关闭操作编写了相同的代码。但是“AdjustTokenPrivileges”总是返回错误：1300 并非所有引用的权限或组都分配给调用者。

有没有办法解决这个错误？如何使用 VC++ 启用 Windows 7 的关机权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:48:36.703

是的，有一个：将权限分配给调用者（需要注销才能生效）。这需要计算机或域/AD 的管理员来执行。您也可以使用`LsaAddAccountRights()`和以编程方式执行此操作`LsaRemoveAccountRights()`。

考虑一下：每个用户都有一组分配的权限。可以为代表此用户的令牌启用或禁用任何分配的令牌。您要做的是启用从未分配给用户的特权。因此它不能被启用/激活。

但是，我建议您发布您的代码，因为本地用户无法关闭系统是非常不寻常的。默认情况下，此权限通常授予在本地登录的每个人。

# c# - 表单内面板上的 Alt-Tab 通知

> ID：13472440
> 
> 赞同：0
> 
> 时间：2012-11-20T11:41:54.417
> 
> 标签：c#, winforms, focus, panel, alt-tab

我正在尝试清除面板上的一些变量，例如，如果我有一个布尔值，它让我知道当我在面板的表面上单击拖动时我会在发生 MouseUp 事件时将其设置为 false（这可能会也可能不会是正确的方法，但作为一个例子）。

如果在单击拖动时，我然后 alt-tab 到另一个应用程序，面板本身似乎没有收到任何通知，例如 focus-> leave / mouseup，是否有我遗漏的东西，一个我忽略的事件？

似乎有一种方法可以通过使用表单 Deactivate 事件来做到这一点，我想如果我创建一个新的 Panel 类，我可以在我的面板上调用一个挂起类型的方法，但我想知道是否已经存在可以传播所有孩子们在表单上带有一些通知，我们的表单不再是主要焦点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:32:27.003

可靠地获取此类通知需要您使用 Capture 属性。在 MouseDown 事件上将其设置为 true。它确保所有鼠标消息都指向您的面板，即使鼠标不再悬停在面板上。但是，这仍然不包括粗鲁的焦点更改，例如 Alt+Tab 或 Alt+Esc。您还需要实现 MouseCaptureChanged 事件以了解操作系统何时介入。

一般来说，如果你想实现 Drag + Drop，那么你应该使用 DoDragDrop()。当它返回时，无论出于何种原因，您始终可以确定拖动操作已完成。该方法的返回值告诉您发生了什么。请注意，这也支持切换到另一个窗口，尽管它不是很容易发现，但您拖动到任务栏按钮以强制切换。

# ssrs-2008 - tablix 上的条件分页符

> ID：13472441
> 
> 赞同：0
> 
> 时间：2012-11-20T11:41:54.917
> 
> 标签：ssrs-2008

我有一个带有 tablix 的子报告。

子报表具有条件可见性，因此它可能会被隐藏，但是当它出现时，我需要它位于与 tablix 不同的页面上。

我尝试在 tablix 的开头添加一个分页符，但这个分页符总是出现。

有没有办法使分页符有条件？我看不到任何地方可以添加表达式来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:51:15.910

在摆弄设置和其他选项之后，我决定在子报表和 tablix 之间插入一个矩形。

该矩形的高度为毫米，并与子报表一起有条件地隐藏。

矩形允许一个`PageBreak`属性；因此，当它可见时，会出现分页符 - 作为 requirqd。

侧身的方法，但它的工作原理。

# c++ - 通过函数指针调用函数 - 是否取消引用指针？有什么不同？

> ID：13472443
> 
> 赞同：9
> 
> 时间：2012-11-20T11:42:02.560
> 
> 标签：c++, c, function-pointers

我都试过了——`C`而且`C++`都工作得很好。

我对函数指针有点陌生，这是一个简单的代码，让我感到惊讶：

```
#include <assert.h>
void sort( int* arr, const int N );

int main () 
{
    int arr1[] = { 1, 5, 2, 6, 2 }; 
    int arr2[] = { 1, 5, 2, 6, 2 }; 

    void (*sort_ptr)( int*,  const int) = sort;

    sort_ptr( arr1, 5 );
    (*sort_ptr)( arr2, 5 );

    assert( arr1[0] == 1 && arr1[1] == 2 && arr1[2] == 2 && 
            arr1[3] == 5 && arr1[4] == 6 );
    assert( arr2[0] == 1 && arr2[1] == 2 && arr2[2] == 2 && 
            arr2[3] == 5 && arr2[4] == 6 );

    return 0;
}

void sort( int* arr, const int N )
{
    // sorting the array, it's not relevant to the question
} 
```

那么，两者有什么区别

```
sort_ptr( arr1, 5 ); 
```

和

```
(*sort_ptr)( arr2, 5 ); 
```

两者似乎都有效（没有错误，没有警告，排序数组），我有点困惑。哪一个是正确的或两者都是正确的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T11:45:53.513

```
sort_ptr( arr1, 5 ); 
```

和

```
(*sort_ptr)( arr2, 5 ); 
```

两者都是正确的。事实上，您可以添加任意数量的星号，它们都是正确的：

```
(*****sort_ptr)( arr2, 5 ); 
```

函数的名称衰减为指向函数的指针。所以重复取消引用它会产生相同的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:49:29.080

就编译器而言，`sort_ptr`并且`(*sort_ptr)`是相同的。然而，如果`sort_ptr`真的是一个指针，那么显式地取消引用它会让读者更清楚。一般来说; 在一种情况下，您可以直接在指向函数的指针上调用函数这一事实很有用：在模板中，它使指向函数的指针成为函数对象，其行为与带有`operator()()`.

# c# - MVC3 项目中的数据库连接问题

> ID：13472447
> 
> 赞同：1
> 
> 时间：2012-11-20T11:42:04.760
> 
> 标签：c#, asp.net-mvc-3, sql-server-express

我成功地遵循了 contoso 大学教程，让它在 VS 2010 中使用 SQL Express - 在 App_Data 文件夹中创建数据库。本教程遵循 EF Code First 模型。想要查看表中的数据，我在服务器资源管理器中打开了数据库并能够查看表数据。

现在当我再次运行它时，我无法再访问数据库 - 给出的错误是：

> 一个或多个文件与数据库的主文件不匹配。如果您尝试附加数据库，请使用正确的文件重试该操作。如果这是现有数据库，则文件可能已损坏，应从备份中恢复。
> 无法打开登录请求的数据库“SchoolDB”。登录失败。
> 用户“DEV\bwilliams”登录失败。
> 日志文件“C:\ContosoUniversity\ContosoUniversity\ContosoUniversity\App_Data\SchoolDB.ldf”与主文件不匹配。它可能来自不同的数据库，或者之前可能已重建日志。

DEV\bwilliams 将是 Windows 身份验证。

这是我的连接字符串：

```
<add name="SchoolContext"
     connectionString="data source=.\SQLEXPRESS;Initial Catalog=SchoolDB;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|SchoolDB.mdf;User Instance=true"
     providerName="System.Data.SqlClient" /> 
```

我试图在服务器资源管理器中再次打开数据库，它告诉我登录失败。所以我想我可以删除数据库并让 EF 重新创建它 - 但这样做之后，我仍然收到相同的错误。重点是创建一个项目并部署到实际服务器，但我似乎无法解决这些连接问题。

更新：更改连接字符串中的数据库名称会创建新数据库，一切正常。但是，在 VS 2010 的服务器资源管理器中打开它会导致同样的问题。非常令人沮丧。

# java - 使用 JavaCompiler 包在另一个 Java 类中获取编译 Java 源文件的结果

> ID：13472448
> 
> 赞同：1
> 
> 时间：2012-11-20T11:42:05.227
> 
> 标签：java, java-compiler-api

我的类中有以下（简化的）代码，它调用 Java 编译器来处理给定的源文件：

```
package test;
import javax.tools.*;

public class SimpleCompileTest {
    public static void main(String[] args) {
        String fileToCompile = "MyClass.java";

        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        int compilationResult = compiler.run(null, null, null, fileToCompile);

        if(compilationResult == 0){
            System.out.println("Compilation is successful");
        } else {
            System.out.println("Compilation Failed");
        }
    }
} 
```

编译成功，但是现在我如何才能得到 MyClass.java 的结果，如何运行这个编译的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:38:35.003

```
package javacompiler;
import javax.tools.JavaCompiler;
import javax.tools.ToolProvider;
public class COmpilerHello {
    public static void main(String[] args)
    {
        String s="C:/Users/MariaHussain/Desktop/hussi.java";
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        int result = compiler.run(System.in,System.out,System.err,s);
        System.out.println("Compile result code = " + result);
    }
} 
```

查看结果变量的各种值，例如 0,1 2 显示编译状态，是否已编译

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T21:55:36.770

获取 JavaFileManager，设置保存 .class 文件的位置，然后通过（自定义）类加载器加载它：

```
StandardJavaFileManager stdFileManager = compiler.getStandardFileManager(null, Locale.getDefault(), null);

stdFileManager.setLocation(StandardLocation.CLASS_OUTPUT, Arrays.asList(new File("classDir")));

 + custom classloader 
```

* * *

或不存储： [JDK 1.6 中的 JavaCompiler：如何将类字节直接写入 byte[] 数组？](https://stackoverflow.com/questions/2130039/javacompiler-from-jdk-1-6-how-to-write-class-bytes-directly-to-byte-array)

你被指向的地方： [https ://weblogs.java.net/blog/2008/12/17/how-compile-fly](https://weblogs.java.net/blog/2008/12/17/how-compile-fly)

主要思想是使用自定义 MemoryFileManager 作为 JavaFileManager。

# sql-server - 有没有办法生成以 2 的幂递增的身份或序列？

> ID：13472450
> 
> 赞同：7
> 
> 时间：2012-11-20T11:42:18.143
> 
> 标签：sql-server

在我的代码中，我倾向于使用很多标志枚举，这些枚举对应于包含所有行为属性的数据库表。这样，行为属性可以在 SP 和使用枚举的 C# 代码中使用。

我的问题是附加了 Flags 属性的枚举。

有没有办法自动生成 2 的幂作为此类表的标识列（或序列）？

PS：目前我手动将代码放在小表中 - 或以编程方式放在随时间变化的表中 - 我更喜欢自动执行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T11:56:20.053

据我所知，答案是否定的。Identity 是按照你指定的种子值递增的，默认情况下是 1。但是你可以有 2 的倍数。例如 2,4,6,8,10

```
 id INT identity(2, 2)   -- starts at 2, increments by 2 
```

如果你想要别的东西，你可能需要实现你自己的。

计算列

```
create table t
(
   id int identity, 
   power_id as power(2, id), 
   name varchar(50)
)

Results

ID  POWER_ID    TEXT
-------------------------------
1   2           SHORT      ----2^1
2   4           MEDIUM     ----2^2
3   8           LONG       ----2^3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:02:06.973

否：[阅读此处](http://msdn.microsoft.com/library/ms186775.aspx)

但是您可以将身份保留为代理键，然后使用始终为 2^id 的另一列（在插入时使用触发器？）作为您的 2^n 值，或者您可以只使用普通 id，毕竟如果您正在使用Flags 属性你只需要指数，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:46:24.797

在列属性的“身份规范”部分（单击表格上的“设计”后可见），您可以将“身份增量”设置为 2，以生成 1、3、5、7 的 id（如果这是您的话）重新追求？

# date - MySQL 填充空日期值

> ID：13472452
> 
> 赞同：1
> 
> 时间：2012-11-20T11:42:21.250
> 
> 标签：date, return, zero

我正在为我们的个人客户对我们的事件日志数据库运行一些查询。我要返回的是 2012 年以来的所有月份名称以及有多少未公开事件的计数。这适用于与我们合作超过 12 个月的客户，但不适用于与我们合作时间较短的客户。

我的查询是这样的：

```
 SELECT DATE_FORMAT(FROM_UNIXTIME(createdtime/1000), '%Y') as 'Year',
    DATE_FORMAT(FROM_UNIXTIME(createdtime/1000), '%M') as 'Month',
    count(wo.workorderid) as 'Total Logged'
    FROM workorder_threaded wot
    inner join workorder wo
    on wo.workorderid = wot.workorderid
    and wo.siteid = 4806
    and DATE_FORMAT(FROM_UNIXTIME(createdtime/1000), '%Y') <> '2011'
    where wot.workorderid = wot.thd_woid
    GROUP BY DATE_FORMAT(FROM_UNIXTIME(createdtime/1000), '%Y%m') 
```

我得到的输出是这样的：

```
 Year    Month       Total Logged
    2012    August      3
    2012    September   356
    2012    October     212
    2012    November    120 
```

但是我需要以下内容：

```
 Year      Month       Total Logged
    2012      January     0 
    2012      February    0
    2012      March       0
    2012      April       0
    2012      May         0
    2012      June        0
    2012      July        0 
    2012      August      3
    2012      September   356
    2012      October     212
    2012      November    120
    2012      December    0 
```

它不必受年份限制，即呼叫记录数据库中有 2011 年的数据，因此可以修改查询以过滤年份范围。

我知道这没有填充，因为数据不存在，我已经看到了创建数字\日期表并引用它来填充日期的方法，但我正在努力做到这一点。我也改变了 join 和 where 条件无济于事。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:50:09.670

你需要在`LEFT JOIN`这里使用

# javascript - 解释这个令人困惑的 dojo 教程语法声明

> ID：13472453
> 
> 赞同：5
> 
> 时间：2012-11-20T11:42:26.517
> 
> 标签：javascript, dojo, javascript-framework, declare

我正在阅读使用[dojo 的声明](http://dojotoolkit.org/documentation/tutorials/1.8/declare/)创建类的语法。描述令人困惑：

```
The declare function is defined in the dojo/_base/declare module. declare accepts three arguments: className, superClass, and properties.
ClassName

The className argument represents the name of the class, including the namespace, to be created. Named classes are placed within the global scope. The className can also represent the inheritance chain via the namespace.
Named Class

// Create a new class named "mynamespace.MyClass"
declare("mynamespace.MyClass", null, {

    // Custom properties and methods here

});

A class named mynamespace.MyClass is now globally available within the application.

Named classes should only be created if they will be used with the Dojo parser. All other classes should omit the className parameter.
"Anonymous" Class

// Create a scoped, anonymous class
var MyClass = declare(null, {

    // Custom properties and methods here

});

The MyClass is now only available within its given scope.
SuperClass(es)

The SuperClass argument can be null, one existing class, or an array of existing classes. If a new class inherits from more than one class, the first class in the list will be the base prototype, the rest will be considered "mixins".
Class with No Inheritance

var MyClass = declare(null, {

    // Custom properties and methods here

});

null signifies that this class has no classes to inherit from.
Class Inheriting from Another Class

var MySubClass = declare(MyClass, {

    // MySubClass now has all of MyClass's properties and methods
    // These properties and methods override parent's

}); 
```

创建非命名类和没有超类的类的语法完全相同：

```
var MyClass = declare(null, {
    // Custom properties and methods here  
}); 
```

我希望没有任何超类且没有任何名称的类的语法是这样的：

```
var MyClass = declare(null, null, {
    // Custom properties and methods here  
}); 
```

我来自类型语言背景，所以也许我误解了它在 JavaScript 中的工作原理。如果教程语法正确，我无法理解阅读代码（没有任何评论）的人如何知道两者之间的区别。

我本来希望语法是这样的：

```
/*class without a name:*/ declare(null, SuperClass, {})

/*class without a name or super class:*/ declare(null, null, {})

/*class with a name but no super class:*/ declare("ClassName", null, {}) 
```

也许这很冗长，但至少很容易分辨每个参数的用途。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T12:28:29.487

好吧，认为它是一个重载的构造函数：

```
// class with a name
declare(className: String, superClass: Array, classDeclaration: Object);

// class without a name
declare(superClass: Array, classDeclaration: Object); 
```

使用空数组`[]`或`null`不使用`superClass`。

注意：从 Dojo 1.8 开始，不需要命名类，因为`dojo/parser`可以使用模块 id ( `mid`, eg `"mynamespace/MyClass"`) 进行实例化。我认为命名类已经过时并且不利于代码的可维护性。

# ios - 静态库红色

> ID：13472454
> 
> 赞同：-1
> 
> 时间：2012-11-20T11:42:34.040
> 
> 标签：ios, xcode, static-libraries

我从 CocoaControls 下载了 PaperFoldMenuController。

当我打开它时，它似乎没有包含 PaperFold 库。

这与静态库有关吗？我应该去找这个图书馆然后把它复制进去吗？我不太确定这些库应该如何工作。

谢谢，

艾伦

![在此处输入图像描述](../Images/183ecf8c28d5049db30af6847280cc93.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:24:58.987

PaperFold 库是该库的 git 子模块。您要么必须使用 git 手动拉取子模块，要么使用可以为您执行此操作的 git 客户端。我使用源树。它会自动拉出所有子模块。您将随身携带所有文件。

# java - 注释掉 @Test 导致测试失败

> ID：13472455
> 
> 赞同：1
> 
> 时间：2012-11-20T11:42:37.727
> 
> 标签：java, junit

我有一个覆盖基测试类的单元测试。测试设置并拆除。但是，由于特殊原因，我已经注释掉了文件中唯一的测试。即测试类不再有带有@Test 注释的方法。

当我们的持续集成服务器运行所有测试时，它会为这个文件抛出一个错误：

```
java.lang.Exception: No runnable methods 
```

这会引起一些烦恼，是否可以更改规则不在这里抛出错误？我希望它更多地属于 [信息] 违规类别而不是错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:44:51.007

是的，保留注释并在类或测试级别`@Test`添加注释。`@Ignore`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:44:59.313

只需`@Test`用`@Ignore`注释替换。

这还有另一个好处：自动重构仍然反映在您的测试用例类中（但它没有被执行），因此代码不会腐烂，并且在您想要恢复测试时仍然可以编译。

此外，各种工具会报告被忽略的测试，因此您可以跟踪它们。

# c++ - 在 C++ 工厂中删除实例

> ID：13472456
> 
> 赞同：1
> 
> 时间：2012-11-20T11:42:40.587
> 
> 标签：c++, inheritance, factory-pattern, delete-operator

我遇到了这种 C++ 工厂模式，我喜欢所有权属于消费者的方式：

```
class MyClass {
public:
    void Create(MyClass **instance, int some_param);
    void Destroy(MyClass *instance);

    void SomeAction() = 0;
}

// Use it

MyClass *instance;

MyClass::Create(&instance, 5);
instance->SomeAction();
MyClass::Destroy(instance); 
```

但是你如何实施`Destroy`？我想`Create`看起来像：

```
void MyClass::Create(MyClass **instance, int some_param) {
    // Subtype in some way derived from some_param
    if (some_param == 1) {
        *instance = (MyClass *) new MyClassSubClass();
    }
    // if some_param == 2, use MyDifferentSubClass() etc...
} 
```

我已经尝试过以下类似的方法`Destroy`，但无法使其正常工作：

```
void MyClass::Destroy(MyClass *instance) {
    delete instance;
} 
```

也许`delete`需要知道特定的子类（知道它的分配大小）？但这似乎也不起作用：

```
void MyClass::Destroy(MyClass *instance) {
    if (some_param == 1) {
        delete (MyClassSubClass *)instance
    }
} 
```

非常欢迎任何输入或替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:46:31.100

所有`MyClass`需要的是一个虚拟析构函数，编译器/运行时将完成其余的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:46:56.013

`delete(instance);`应该管用。您忘记在 MyClass 中添加虚拟析构函数：

```
class MyClass {
public:
    virtual ~MyClass();

    void Create(MyClass **instance, int some_param);
    void Destroy(MyClass *instance);

    void SomeAction() = 0;
} 
```

# jquery-ui - jQuery 工具提示和下拉菜单（组合框）：IE 9 中的问题

> ID：13472457
> 
> 赞同：2
> 
> 时间：2012-11-20T11:42:46.300
> 
> 标签：jquery-ui, combobox, tooltip, jquery-tooltip

在 IE 9 中，如果我在下拉菜单中应用工具提示，它不允许我选择任何选项。

```
<select title="my tooltip dropdown">
<option>1234</option>
<option>1234</option>
<option>1234</option>
<option>1234</option>
<option>1234</option>
</select>
<br/>
<br/>
<br/>

<select title="my tooltip dropdown">
<option>1234</option>
<option>1234</option>
<option>1234</option>
<option>1234</option>
<option>1234</option>
</select>

$(document).tooltip() 
```

[http://jsfiddle.net/tmSEE/2/](http://jsfiddle.net/tmSEE/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:27:19.893

如果你`select`用`div`or包裹它，它会起作用`span`。

例如

```
<div title="my tooltip dropdown">
<select>
<option>1234</option>
<option>1234</option>
<option>1234</option>
<option>1234</option>
<option>1234</option>
</select>
</div> 
```

[http://jsfiddle.net/tmSEE/5/](http://jsfiddle.net/tmSEE/5/)

# sql - 从对表中创建输出矩阵

> ID：13472460
> 
> 赞同：3
> 
> 时间：2012-11-20T11:43:08.643
> 
> 标签：sql

我有一个角色与权限表，如下所示：

```
role | permission    
r1   | p1
r2   | p1
r2   | p2
r3   | p1
r3   | p2
r3   | p3 
```

我想要的是一个输出表，其中的列是**（角色，然后是每个权限）**。在表中存在权限/角色对的地方我想要一个 1，在它不存在的地方我想要一个 0。

这是输出：

```
role | p1 | p2 | p3
r1   | 1  | 0  | 0
r2   | 1  | 1  | 0
r3   | 1  | 1  | 1 
```

这很容易，但关键是……**角色或权限都不是固定长度的，可以随时添加新的，所以我需要考虑到这一点。**

由于 SQL 的性质，我认为这是不可能的，但我想我会问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:22:05.150

您没有指定您使用的 RDBMS - 所以这里是 MySQL 和 SQL Server 的解决方案。

**MySQL：**

这是一个`PIVOT`但 MySQL 没有`PIVOT`函数，因此您需要使用聚合函数和`CASE`语句来复制它。

静态版本 - 是您事先知道所有值的地方：

```
select role,
  sum(case when permission = 'p1' then 1 else 0 end) p1,
  sum(case when permission = 'p2' then 1 else 0 end) p2,
  sum(case when permission = 'p3' then 1 else 0 end) p3
from yourtable
group by role; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/47c76/6)

如果您事先不知道要转到列的值，则可以使用准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when permission = ''',
      permission,
      ''' then 1 else 0 end) AS ',
      permission
    )
  ) INTO @sql
FROM yourtable;

SET @sql = CONCAT('SELECT role, ', @sql, ' 
                  FROM yourtable 
                   GROUP BY role');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/edc0b/1)

**SQL 服务器：**

sql server 中有一个`PIVOT`函数，您可以对值进行硬编码或使用动态 sql。

静态版本：

```
select *
from 
(
  select role, permission
  from yourtable
) src
pivot
(
  count(permission)
  for permission in ([p1], [p2], [p3])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3cc1e/1)

动态版本：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(permission) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT role, ' + @cols + ' from 
             (
                select role, permission
                from yourtable
            ) x
            pivot 
            (
                count(permission)
                for permission in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3f678/5)

所有版本的结果是：

```
| ROLE | P1 | P2 | P3 |
-----------------------
|   r1 |  1 |  0 |  0 |
|   r2 |  1 |  1 |  0 |
|   r3 |  1 |  1 |  1 | 
```

# php - 将复杂查询转换为 zend_db 选择对象格式

> ID：13472461
> 
> 赞同：1
> 
> 时间：2012-11-20T11:43:10.430
> 
> 标签：php, mysql, zend-framework

我正在使用 ZEND，我无法将以下查询转换为`zend_db`选择对象格式：

```
SELECT *,CASE WHEN @score != score THEN @rank := @rank + 1 ELSE @rank END AS rank,
                @score := score AS dummy_value
                FROM (  SELECT score,username,ID,firstName,lastName
                FROM site_members, 
                    (SELECT @rank := 0, @score := NULL) AS vars 
                    WHERE `status` = 1 AND score > 0
                ORDER BY score DESC) AS h; 
```

像这样：

```
 $select = $this -> db -> select();
    $select -> from('site_members', array('COUNT(*) AS count'));
    $select -> where("ID  = ?", $memberID, Zend_Db::INT_TYPE);
    $row = $this -> db -> fetchRow($select); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:45:24.193

我研究了我的问题并找到了最佳答案：

```
 $inner_query = $this -> db -> select() -> from('site_members', array('score', 'username', 'ID', 'firstName', 'lastName')) 
                                 -> from(array("vars"=>new Zend_Db_Expr('(SELECT @rank := 0, @score := NULL)')))
                                 -> where("site_members.status = ?",1)
                                 -> where("score > 0")
                                 -> order(array("score DESC"));
            $select = $this -> db -> select();
            $select ->from(array("h"=>$inner_query),array(new Zend_Db_Expr('*'), 
                           new Zend_Db_Expr('CASE WHEN @score != score THEN @rank := @rank + 1 ELSE @rank END AS rank'), 
                           new Zend_Db_Expr('@score := score AS dummy_value'))); 
```

# php - 如何使用 PHP 动态加载 dojo 的 1.8 模块？

> ID：13472462
> 
> 赞同：2
> 
> 时间：2012-11-20T11:43:11.263
> 
> 标签：php, ajax, dojo, dgrid

我的主页有 dojox/layout/ContentPane 小部件。这个小部件动态加载任何 Hrefs，其内容包含由 PHP 形成的 Javascript 和 HTML。Javascript

```
 $scriptCode .= 'require(["' . $scriptFile . '", "dojo/ready"], function(PageScript, ready){' . "\n";
        $scriptCode .= '    ready(function(){' . "\n";
        $scriptCode .= '        setTimeout(function(){new PageScript(' . $scriptOptions . '); }, 0);' . "\n";
        $scriptCode .= '    });' . "\n";
        $scriptCode .= '});' . "\n"; 
```

PageScript() 是一个dojo 类绘制小部件和页面逻辑。问题在于，当加载其他href时，旧页面的对象部分地获得了新对象的属性。绘制后移除页面对象，销毁小部件无助于解决问题。

页面脚本

```
define(['dojo/_base/declare', 'common/widget/Card'], function (declare, pageWidget) {
return declare(pageWidget, {
    constructor: function(options){
    }
});
}); 
```

PS。对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:41:38.593

嗯，你的代码和问题没有多大意义。如果您想将动态创建的内容加载到 ContentPane 中，最简单的方法是传入一个 dojo 模板。只需用于`data-dojo-type`创建您需要的任何小部件。如果您需要在小部件加载时运行代码，请将其放在小部件的`startup`函数中。

# ruby - 在 Ruby 中，我可以覆盖三元运算符“吗？”

> ID：13472470
> 
> 赞同：2
> 
> 时间：2012-11-20T11:43:43.093
> 
> 标签：ruby, operator-overloading, overriding

在 Ruby 中，我可以覆盖三元运算符“吗？”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T11:56:27.347

不，你不能：`?:`不是一种方法，所以你不能重新定义它。

[该](http://www.techotopia.com/index.php/Ruby_Operator_Precedence#Operator_Precedence_Table)运算符优先级表显示了哪些运算符是真正的方法，因此可以被覆盖。

# c# - 使用 JQuery 隐藏左列时增加右列宽度（反之亦然）

> ID：13472473
> 
> 赞同：0
> 
> 时间：2012-11-20T11:44:00.890
> 
> 标签：c#, asp.net, jquery-ui

我看过：
[可调整大小的控件](http://jqueryui.com/resizable/)和[这个论坛链接](http://forums.asp.net/t/1560470.aspx/2/10)
，都 没有找到合适的分辨率。

我有一个包含 2 列的页面（没有母版页）。一个列包含一个菜单结构，另一个列包含一个 PDF 查看器。

我希望能够隐藏菜单，并将 PDFviewer 扩展到整页。
不幸的是，我目前只能`Hide()`选择工作。

这是一些代码：

**样式表.css**

```
body {
}

.wrapper {
    margin: 0 auto;
}

.left {
    width: 25%;
    float: left;
    background: #f4f4f4;
    overflow: hidden;
}

.right {
    width: 75%;
    float: right;
    margin-top: -20px;
    padding-top: -20px;
} 
```

**默认.aspx**

```
<div class="wrapper">
                    <div runat="server" id="left" class="left">
                        <div style="padding-top: 10px">
                            <asp:Label runat="server" Text="File List" Font-Size="20px" Font-Bold="True"></asp:Label>
                            - <a id="uploadLink" href="Upload.aspx">Upload</a>
                            <br />
                            <br />
                            <!-- Menu structure -->
                        </div>

                    </div>
                    <div class="right" id="right">
                    <a id="showh1">+</a>
                    <a id="hideh1">-</a>
                        <div style="border: 1px solid grey;">
                            <iframe runat="server" id="pdfHolder" width="100%" seamless="seamless" title="Doc"></iframe>
                        </div>
                    </div>
                    <asp:Label runat="server" ID="lbltest" Text=" ---- " Visible="False"></asp:Label>
</div> 
```

**Default.aspx 上的 Javascript 片段**

```
 <script type="text/javascript">
        $(document).ready(function () {
            $('#hideh1').click(function () {
                $('div.left').hide("Drop");
            });
            $('#showh1').click(function () {
                $('div.left').show("Drop");
            });
        });
    </script> 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:50:23.767

尝试这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#hideh1').click(function () {
            $('div.left').hide("Drop");
            $('div.right').css("width", "100%");
        });
        $('#showh1').click(function () {
            $('div.left').show("Drop");
            $('div.right').css("width", "75%");
        });
    });
</script> 
```

# java - 从其 Java 代码调试 Android 应用程序

> ID：13472478
> 
> 赞同：2
> 
> 时间：2012-11-20T11:44:26.083
> 
> 标签：java, android, eclipse, debugging

我想使用 Eclipse 调试一个 Android 应用程序。我已经从 apk 中提取了 Java 代码（使用 dex2jar，然后使用 jd-gui），我还在 Eclipse 中从现有代码中创建了一个新的 Java 项目，但是现在我被卡住了，因为我有很多未解决的导入（我猜是因为这个项目中没有谷歌的API），不知道怎么调试。事实上，我什至不知道这是否可能......但是从 smali 代码调试是一种痛苦（如果你不知道 smali ，那就更痛苦了：D）。

你们中的任何人都知道这是否可能？有什么指导方针吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:16:10.667

通过 Eclipse 进行调试（如分步执行）需要 AFAIR 调试信息存在于要调试的 APK 中。

此外，即使 APK 包含调试信息，您也会遇到大多数 Java 反编译器不会生成代码，其中反编译的源代码行与 APK 的调试信息中标记的源代码行匹配。因此，您可能能够调试应用程序，但 Eclipse 无法向您显示正确的行号。

在常规的非 Android 项目中使用 jd-gui 时，这已经是一个问题。我认为在 Android 项目中情况更糟。

因此，我只看到一种调试应用程序的方法，你只有反编译的代码：

修复反编译的代码（希望它被完全反编译 - 有时类会因为反编译错误而被忽略）并将其重新编译为带有调试信息的 APK。据我所知，这是唯一的方法。

# python - 查找 2 个列表不同的索引

> ID：13472479
> 
> 赞同：-2
> 
> 时间：2012-11-20T11:44:26.740
> 
> 标签：python, list

我有两个清单。我必须找到这些列表不同的索引。

```
case 1: 
a = "node1 ip up ether 40  46 server low".split()
b = "node1 ip <down> ether <number(s)> server <status>".split()
output = [ [[2],[2]], 
           [[4,5],[4]],
           [[7],[6]]  ]

case 2:
a = ' label 0 12000 '.split()
b = ' label  <number>  <number>'.split()
output = [ [[1,2],[1,2]] ] 
```

a,b 是输入列表，输出是结果列表。b 中与 a 不同的元素都包含在`<>`for 中。`<blabla>` 在案例 1 和案例 2 中，`output[i][0]`给出 的索引`a`并`output[i][1]`给出 的索引`b`。

1.  在案例 1 中，`up`在`<down>`位置 不同`[2,2]`。`40, 46`并`<number(s)>`在位置`[4,5],[4]`等方面有所不同。
2.  在情况 2 中，`output[0][0] = [1,2]`对应于`0 12000`并且`output[0][1] =[1,2]`对应于`<number> <number>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:51:59.977

尝试

```
[k for k, v in enumerate(zip(a,b)) if not v[0] == v[1]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:00:00.927

这给出了给定两种情况的请求输出。

```
import difflib

def diff_indices(a, b):
    sm = difflib.SequenceMatcher(a=a, b=b)
    res = []
    for tag, i1, i2, j1, j2 in sm.get_opcodes():
        if tag == 'replace':
            res.append([range(i1,i2), range(j1,j2)])
    return res

print diff_indices(
    a="node1 ip up ether 40  46 server low".split(),
    b="node1 ip <down> ether <number(s)> server <status>".split())
#[[[2], [2]], [[4, 5], [4]], [[7], [6]]]
print diff_indices(
    a=' label 0 12000 '.split(),
    b=' label  <number>  <number>'.split())
#[[[1, 2], [1, 2]]] 
```

目前尚不清楚您在这种情况下的期望是什么：

```
a = "node1 ip up ether 40  46 server low".split()
b = "node1 ip <down> ether server <status>".split() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:02:38.243

以下应该工作。

```
lista="abcd"
listb="accd"
print [ i for i in xrange(min(len(lista),len(listb))) if lista[i] != listb[i] ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:11:39.770

```
a = "node1 ip up ether 40  46 server low".split()
b = "node1 ip <down> ether <number(s)> server <status>".split()

if len(a) > len(b):
    b,a = a,b

a_it = iter(a)
b_it = iter(b)

diffs = []
a_diff = []
b_diff = []

i = 0
start = 0
while i < len(a):
    j = i
    while j < len(b):
        if a[i] == b[j]:
            if a_diff:
                b_diff = range(start,j)
                diffs.append([a_diff,b_diff])
                a_diff = []
                b_diff = []
            i = i + 1
            start = j + 1
        j = j + 1
    a_diff.append(i)
    i = i + 1

if a_diff:
    b_diff = range(start,j)
    diffs.append([a_diff,b_diff])

print diffs 
```

# c# - Linq to SQL 可选列，sql生成字段

> ID：13472482
> 
> 赞同：1
> 
> 时间：2012-11-20T11:44:33.413
> 
> 标签：c#, linq-to-sql

我的 Linq to SQL 类中有一个在我的数据库中实际上并不存在的属性。

我只在一个查询期间填充此列（即用于排名搜索）

```
 IEnumerable<BookingType> results = db.ExecuteQuery<BookingType>
            (
            "(SELECT  mm.rcount AS SearchRank, 
            b.* FROM (SELECT m.TourID AS myId, COUNT(m.RecordType) AS rcount 
            FROM (((SELECT * FROM Bookings h WHERE h.RecordType = 'H' 
                    AND h.TourArea like '%bull%')
            union
            (SELECT * FROM Bookings t WHERE t.RecordType = 'T' and t.TourGuideName like '%bull%')) ) m group by m.TourID) mm 
            INNER JOIN Bookings b ON mm.myId= b.TourID WHERE b.RecordType = 'H')", "bull"
            ); 
```

这是模型的一部分：

```
 /// <summary>
    /// Unique identifier for a booking
    /// </summary>
    [DataMember]
    [Column(DbType = "int", IsPrimaryKey = true, AutoSync = AutoSync.OnInsert, IsDbGenerated = true)]
    public int? BookingID { get; set; }

    /// <summary>
    /// Search Ranking
    /// </summary>
    [DataMember]
    [Column(DbType = "int")]
    public int? SearchRank { get; set; } 
```

当我针对我的排名搜索查询运行它时，它确实非常有效。当我运行任何其他查询时，我收到错误“SearchRank 字段不存在”，因为它不存在。如果我将 SearchRank 字段放入数据库中，则在进行排名搜索时该字段返回 null（大概是因为我的查询的 b.* 部分也返回 SearchRank。

**有没有办法在我的模型上设置某种“OptionalColumn”属性？**

否则，我必须将 SearchRank 列放入数据库中，然后为 RankedSearch 查询写出每个单独的列名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T08:03:00.000

（我不确定这是否可行）

将 virtual 添加到您的 SearchRank 属性，并从 BookingType 中删除 column 属性

```
e.g. public virtual int? SearchRank { get; set; } 
```

创建一个继承 BookingType 的新类“BookingType2”

在新的类中覆盖 SearchRank 属性并添加 Column 属性。

将您的执行方法的签名更改为 BookingType2

```
e.g. db.ExecuteQuery<BookingType2>(... 
```

如果它有效，您应该能够将结果转换回 BookingType。

# webkit - Webkit 水平 flexbox 选项卡和滚动

> ID：13472486
> 
> 赞同：2
> 
> 时间：2012-11-20T11:44:54.593
> 
> 标签：webkit, flexbox, tabbing

我有一个水平弹性盒，里面有类似的几个元素。每个都包含在一个中以启用项目之间的选项卡。我正在使用嵌入式 webkit，因此需要 Chrome 来查看我想要实现的效果。

我可以在项目之间成功地使用标签，但是如果一个项目离屏幕右侧太远，我希望该项目能够进入视图。但事实并非如此。示例代码可以在这里看到：

[http://jsfiddle.net/sRGWS/](http://jsfiddle.net/sRGWS/)

哪个使用这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
    <style type="text/css">

.flexbox {
display: -webkit-box;
-webkit-box-orient: horizontal;
margin: 5px;
}

.item{
background-color: rgb(255,0,0);
width: 100px;
height: 100px;
margin: 5px;
}
</style>
</head>
<body>
   <div class="flexbox">
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
     <a href=""><div class="item"></div></a>
   </div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
</body>
</html> 
```

# android - 在位图上制作可调整的裁剪矩形

> ID：13472493
> 
> 赞同：0
> 
> 时间：2012-11-20T11:45:05.160
> 
> 标签：android, bitmap, android-canvas, crop

我现在为我的位图做一个裁剪功能。我可以使用 ontouch 事件裁剪我的位图，我随机触摸位图上的 2 个点，并创建一个关于 2 个触摸点协调的新位图。

但是，是否有一种解决方案具有可调整的矩形，可以让放在我的位图上以裁剪感兴趣的区域？

这是我上面提到的代码：

```
 image_view.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                if (x1 == -1 && y1 == -1 && x2 == -1 && y2 == -1) {
                    x1 = (int) event.getX();
                    y1 = (int) event.getY();
                } else if (x1 != -1 && y1 != -1 && x2 == -1 && y2 == -1) {
                    x2 = (int) event.getX();
                    y2 = (int) event.getY();

                    change_to_bitmap_from_array = Bitmap.createBitmap(
                            change_to_bitmap_from_array, x1, y1, x2, y2);

                    image_view.setImageBitmap(change_to_bitmap_from_array);
                    // done.setEnabled(true);
                    x1 = -1;
                    y1 = -1;
                    x2 = -1;
                    y2 = -1;

                }
            }

            return false;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:50:20.733

据我所知，您的问题没有任何正式的解决方案。但是你可以自己做，对矩形使用透明视图，使用绝对坐标的相对布局；控制触摸事件的大小和位置

# javascript - 覆盖浏览器的默认“自动完成”行为

> ID：13472494
> 
> 赞同：0
> 
> 时间：2012-11-20T11:45:10.320
> 
> 标签：javascript, autocomplete, browser

用户确实喜欢`autocomplete`字段，并且在您的应用程序中使用它确实有益。此外，如果您甚至了解基本的 Javascript，则有很多方法可以实现自定义`autocomplete`（ajaxified、dumber、智能等）下拉菜单。

食谱或多或少相同。

*   禁用浏览器的自动完成
*   事件捕获
*   查询匹配数据
*   以相对定位和自定义样式的 ul/div 显示

我的问题：有没有办法使用浏览器自己的`autocomplete`功能来显示自定义数据，以提供更原生的体验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:55:51.293

浏览器的自动补全只是客户端，不能从js访问。
我敢打赌，这是为了防止数据挖掘。

# google-chrome - 代码在 Firefox 中运行良好而不在 Chrome 中

> ID：13472497
> 
> 赞同：0
> 
> 时间：2012-11-20T11:45:14.310
> 
> 标签：google-chrome, w3c

我也经历了几个相同的问题，但没有人能让我理解我的代码中发生了什么。我的代码是：

```
if (navigator.geolocation) {

            console.log(" in navigator If");
            navigator.geolocation.getCurrentPosition(showPosition, null, {
                enableHighAccuracy : true,
                maximumAge : 1000,
                timeout : 0
            });

        } else {
            console.log("in Navigator else");
            alert("Browser doesn't support location detection. Please pass latitude & longitude for current location in URL. Thanks.");
    } 
```

此代码在 Firefox 中运行良好，但在 chrome 中运行良好我使用的是 Mac，Jboss。在 Chrome 中，控制不会进入任何条件（if 和 else 都不是）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:00:45.283

如果您直接从 chrome 上的文件系统运行，则 navigator.geolocation 不起作用。确保文件托管在某个本地 Web 服务器上。

# vim - 如何使所有制表符缩进在 Vim 中对齐

> ID：13472498
> 
> 赞同：2
> 
> 时间：2012-11-20T11:45:15.500
> 
> 标签：vim

我在 DataMapper 文档中看到了以下代码，`Serial`, `String`.. 全部对齐，我可以在 Vim 中做同样的事情吗？

```
class Post
  include DataMapper::Resource

  property :id,         Serial    # An auto-increment integer key
  property :title,      String    # A varchar type string, for short strings
  property :body,       Text      # A text block, for longer string data.
  property :created_at, DateTime  # A DateTime, for any date you might like.
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:58:01.117

你可以试试`Tabularize.vim`插件。运行此命令：

```
:Tabularize /:\w\+,\|#/ 
```

* * *

您需要的是一个匹配分隔符的模式。

*   `:\w\+,`将匹配`:id,`, `:title,`, ...
*   `#`将匹配评论标志

# tkinter - tkinter ttk 入口小部件 -disabledforeground

> ID：13472501
> 
> 赞同：1
> 
> 时间：2012-11-20T11:45:22.570
> 
> 标签：tkinter, configure, ttk, tkinter-entry

`ttk.Entr`当我将状态设置为时，我试图更改小部件中单词的颜色`disabled`，我查阅了手册，有一个名为 的选项`disabledforeground`，所以我写了一个测试片段如下：（顺便说一句，我在 Python 2.7 下）

```
from Tkinter import *
from ttk import *

root=Tk()

style=Style()
style.configure("TEntry",disabledforeground='red')

entry_var=StringVar()
entry=Entry(root,textvariable=entry_var,state='disabled')
entry.pack()

entry_var.set('test')

mainloop() 
```

但结果显示“测试”的颜色没有变化，知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-27T22:54:40.970

我认为 disabledforeground 是 tk 小部件的一个选项，但不是 ttk 小部件的选项。在本页面

[http://wiki.tcl.tk/38127](http://wiki.tcl.tk/38127)

您将在适用于 tk 小部件的部分代码中看到类似的内容：

```
{-disabledforeground disabledForeground} 
```

这里 -disabledforeground 是指一个配置选项， disabledforeground（没有前导减号）是指在页面底部附近定义的颜色：

```
set colors(disabledForeground) {#a3a3a3} ; # -disabledfg 
```

您将在适用于 ttk 小部件的部分代码中看到类似的内容：

```
{map -foreground disabled disabledForeground} 
```

这里 -foreground 是配置选项， disabled 是小部件可以处于的状态。同样， disabledforeground 是小部件处于该状态时要使用的实际颜色。

我不是 Tcl 程序员，所以我在这里从 tkinter 和 ttk 推断，但这是我能想出的对这段代码的唯一合理解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:15:40.123

尝试使用[`Style.map`](http://docs.python.org/3.1/library/tkinter.ttk.html#tkinter.ttk.Style.map)而不是`configure`.

```
from Tkinter import *
from ttk import *

root=Tk()

style=Style()
style.map("TEntry",
          foreground=[("active", "black"), ("disabled", "red")]
          )

entry_var=StringVar()
entry=Entry(root,textvariable=entry_var,state='disabled')
entry.pack()

entry_var.set('test')

mainloop() 
```

# joomla - 取决于数据库行的动态 Joomla 菜单

> ID：13472502
> 
> 赞同：0
> 
> 时间：2012-11-20T11:45:21.600
> 
> 标签：joomla, joomla1.5, joomla2.5, joomla1.7, joomla1.6

我的数据库如下 ![在此处输入图像描述](../Images/e086491ff6a48571cebf6d9f574aeb74.png)

我愿意创建的菜单如下。

![在此处输入图像描述](../Images/8899c8125c6554458ea2895eb3407273.png)

我想要做的是根据表格中的表格行创建一个如上所示的 Joomla 菜单。如果我在表中添加一行，则应自动创建菜单项。

EG：运动表中有 3 行。如图所示，创建了三个菜单。

我该怎么做？鉴于我知道如何从数据库中检索数据。我可以获得运动列表，但我不知道如何将其作为菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:50:07.783

好的，请记住 Joomla 是一个内容管理系统，因此对于内容和菜单项之类的事情，这一切都是通过管理后端完成的。

因此，在管理后端，转到菜单管理器并选择要添加项目的菜单。然后创建一个名为“Sports”的菜单项，并将类型设置为“文本分隔符”。然后为您创建 3 个子菜单项（Sports 1、Sports 2、Sports 3），将类型设置为您想要的任何类型，并将父项设置为“Sports”

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:00:36.743

如果您采用动态方式，那么此表可能不足以容纳您的菜单。您将不得不添加另一个称为 Parent 的列，它指示父项的 id。

您可以使用 jQuery 动态或动态地自动将从数据库获取的数据附加到现有菜单代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:55:45.773

> 在 Joomla 框架中，组件是使用菜单项执行的。如果您进入 Joomla 安装的菜单管理器，则 HelloWorld 菜单项类型尚不存在。在 Joomla 中添加此功能很容易。只需放置一个 site/views/helloworld/tmpl/default.xml 文件，其中包含：

[阅读更多](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_a_menu_type_to_the_site_part)

# c# - 从 linq 结果集中删除项目

> ID：13472503
> 
> 赞同：1
> 
> 时间：2012-11-20T11:45:24.553
> 
> 标签：c#, linq

我正在使用以下代码：

```
var images = from pic in slidePart.Slide.Descendants<DocumentFormat.OpenXml.Presentation.Picture>()
             select pic;

foreach (var image in images)
       image.Remove(); 
```

问题在于只执行一次并且图像包含多个对象的循环。我怎样才能调用 image.Remove 所有对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:49:19.610

试试这个：

```
slidePart
    .Slide
    .Descendants<DocumentFormat.OpenXml.Presentation.Picture>()
    .ToList()
    .ForEach(pic => pic.Remove()); 
```

为什么`.ToList()`打电话？因为您需要确保不修改您正在迭代的集合。

# android - 如何在 ksoap2 中为具有复杂类型的 wcf webservice 方法创建soap请求？

> ID：13472504
> 
> 赞同：2
> 
> 时间：2012-11-20T11:45:33.053
> 
> 标签：android, web-services, android-ksoap2

我已经使用 ksoap2 成功访问了 Web 服务，但我坚持使用数据协定调用 Web 服务方法。

SoapUI 中的 webservice 请求如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"         
xmlns:tem="http://tempuri.org/"   
xmlns:pat="http://schemas.datacontract.org/2004/07/Patient_Service.App_Code.Common">
<soapenv:Header/>
<soapenv:Body>
  <tem:PatientLookups>
     <tem:oPatientDetails>
        <pat:ID>?</pat:ID>
        <pat:Name>?</pat:Name>
        <pat:Age>?</pat:Age>
        <pat:Address>?</pat:Address>
      </tem:oPatientDetails>
   </tem:PatientLookups>
 </soapenv:Body> 
```

参数 ID、姓名、年龄和地址具有不同的命名空间

这是我用来创建请求的代码：

```
request=new SoapObject(NAMESPACE,"PatientLookups");
SoapObject sub_element=new SoapObject(NAMESPACE, "oPatientDetails");

    for(Map.Entry<String,String> entry: properties.entrySet())
        {
            PropertyInfo pi=new PropertyInfo();
            pi.setNamespace(entityNameSpace);
            pi.setName(entry.getKey());
            pi.setValue(entry.getValue());

            sub_element.addProperty(pi);

        }
        request.addSoapObject(sub_element); 
```

但我在 logcat 中得到了这个异常：

```
 SoapFault - faultcode: 'a:DeserializationFailed' faultstring: 'The formatter threw an 
 exception while trying to deserialize the message: There was an error while trying to  
 deserialize parameter http://tempuri.org/:oPatientDetails. The 
 InnerException message was 'Error in line 1 position 411\. Element   
 'http://tempuri.org/:oPatientDetails' contains data from a type that 
 maps to the name 'http://tempuri.org/:oPatientDetails'. The deserializer 
 has no knowledge of any type that maps to this name. Consider using a 
 DataContractResolver or add the type corresponding to 'oPatientDetails' 
to the list of known types - for example, by using the KnownTypeAttribute attribute or 
by adding it to the list of known types passed to DataContractSerializer.'.  Please see 
InnerException for more details.' faultactor: 'null' detail: null
at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:141)
at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:140)
at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:214)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96) 
```

如何使用 ksoap 创建这个肥皂请求？

# c++ - 我应该使用哪个 C++ GUI 库

> ID：13472506
> 
> 赞同：2
> 
> 时间：2012-11-20T11:45:39.650
> 
> 标签：c++, visual-studio-2010, user-interface

我正在开发一个分割工具（用于研究目的，不用于商业用途），我想知道应该使用哪个图形用户界面，因为有很多。
我正在寻找一个相对简单的界面，它允许我在同一个窗口上执行以下操作：

*算法将使用的输入变量
*浏览文件夹并选择图像
*通过单击按钮调用函数
*显示将在算法运行时演变的图像

我正在使用 Visual Studio 2010 使用 C++ 进行编码，并且正在使用其他库，例如 OpenCV，因此 GUI 库必须在 VS2010 上的控制台项目中可编译和使用。到目前为止，我已经尝试过 Qt、FLTK、GTK+，但 Qt 作为 x64 架构上的兼容问题，FLTK 缺乏文档，我不确定它是否能满足我的需求并且 GTK+ 无法正常工作。

非常感谢您给我的任何意见和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:58:41.227

把事情简单化。如果在 Windows 上使用“非快速”版本的 Visual-Studio 使用 C++，只需使用 MFC。

该框架很成熟，网上有大量的参考资料、示例和示例（codeproject、codeguru、MSDN，...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:17:40.417

你试过OpenCV自己的highgui吗？

[http://opencv.willowgarage.com/documentation/python/highgui__high-level_gui_and_media_i_o.html](http://opencv.willowgarage.com/documentation/python/highgui__high-level_gui_and_media_i_o.html)

> “虽然 OpenCV 被设计用于完整的应用程序，并且可以在功能丰富的 UI 框架（如 Qt、WinForms 或 Cocoa）中使用，或者根本不需要任何 UI，但有时需要快速尝试一些功能并可视化结果。这就是 HighGUI 模块的设计目的。”

另请参阅：[OpenCV 和创建 GUI](https://stackoverflow.com/questions/6823534/opencv-and-creating-guis)

# android - 如何将 DialogAlert 中的输入类型限制为字母数字？

> ID：13472511
> 
> 赞同：0
> 
> 时间：2012-11-20T11:45:47.390
> 
> 标签：android, android-dialog

> **可能重复：**
> [android/eclipse 中的验证](https://stackoverflow.com/questions/10928946/validations-in-android-eclipse)

我已经看过this other [post](https://stackoverflow.com/questions/6082859/how-to-restrict-textview-to-allow-only-alpha-numeric-characters-in-android)，但最佳答案仅适用`TextView`于清单文件中定义的 s ，这不是我的情况。我正在使用一个`DialogAlert`对象来请求一个字符串，它只能是字母数字。

**[更新]**

```
 final EditText input = new EditText(MainActivityS.this);
    setUserIdAlertDialog.setView(input);
    setUserIdAlertDialog.setPositiveButton(getString(R.string.yesLabel), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            String value = input.getText().toString();
            Utils.sendStringIntent(getBaseContext(), getString(R.string.ACTION_ACTIVITY_NEW_ID), "ACTIVITY", value, getString(R.string.INTENT_EXTRA_NEW_USERNAME));
        }
    });

    setUserIdAlertDialog.setNegativeButton(getString(R.string.noLabel), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
                                          }
                                    });
    setUserIdAlertDialog.show(); 
```

# android - 标准库和资源中的 R.layout 类

> ID：13472514
> 
> 赞同：1
> 
> 时间：2012-11-20T11:45:51.710
> 
> 标签：android

标准库中有这个 R.layout 类，但是如果我在 R.layout 目录中使用 xml 编辑器创建自己的文件，它们将全部添加到 R-file 并从 R-file 中找到？我有点不清楚这些是如何结合在一起的。

[http://developer.android.com/reference/android/R.layout.html](http://developer.android.com/reference/android/R.layout.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:50:06.027

所有工厂 android`R`引用都存储在与您不同的位置。例如，在您的 java 代码中，您将使用以下命令访问您的引用：

`R.layout.yourlayout`

但是`R`可以通过以下方式访问工厂引用：

`android.R.layout.factorylayout`

xml 也是如此。你的drawables应该是：

`@drawable/yourdrawable`

和工厂参考：

`@android:drawable/factorydrawable`

所以，总而言之，`R`项目是独立存储的

# java - 如何从字符串变量中只获取整数部分？

> ID：13472518
> 
> 赞同：-3
> 
> 时间：2012-11-20T11:46:06.690
> 
> 标签：java

我的数据库表中有一些字符串类型的数据，例如 as`D-101`和`D-102`. 我想在前端（JSF Web 应用程序）中自动获取下一个数据以发送到数据库，即`D-103`.

为此，我只想从字符串中获取 int 数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:09:31.437

在您的托管 bean 中，您可以使用`split()`函数。

```
String s = "D-101";
String[] arr = s.split("[^\\d]+");
System.out.println(arr[1]); //prints 101 
```

或者

在 xhtml 页面中，您可以编写这样的 EL。请注意，**myBean**是您的 bean 的名称，**getColumnValue()**方法返回一个列的值（即“D-101”）。

```
#{myBean.columnValue.split('[^\\d]+')[1]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T08:06:40.570

```
final Pattern lastIntPattern = Pattern.compile("[^0-9]+([0-9]+)$");
            String input = D101;
            Matcher matcher = lastIntPattern.matcher(input);
            if (matcher.find()) {
                String someNumberStr = matcher.group(1);
                int lastNumberInt = Integer.parseInt(someNumberStr);
                System.out.println("Test int output - " + lastNumberInt);
                inputList.add(lastNumberInt);
            } 
```

然后比较最大值

```
int currentBranchCode = 0;
        for (Integer CCS : companyArrayList) {
            if (currentBranchCode <= CCS) {
                currentBranchCode = CCS;
            }
        } 
```

进而

```
currentBranchCode =currentBranchCode +1;
String codegenerate="D"+currentBranchCode; 
```

你必须尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T08:26:53.197

这可以通过几行来完成：

```
int i = Intger.parseInt(input.replaceAll(".*(?<!\\d)(\\d+)", "$1");
String next = input.replaceAll("(.*)(?<!\\d)\\d+", "$1"+ ++i); 
```

# javascript - html/js：单页应用程序中是否存在“页面加载”事件？

> ID：13472522
> 
> 赞同：5
> 
> 时间：2012-11-20T11:46:17.837
> 
> 标签：javascript, html, singlepage

我正在构建一个单页应用程序，它（预）通过 ajax 加载不同页面的内容。当用户导航时，应用程序将特定标签内的旧内容替换为新内容（ajax 数据）。该新内容可以是例如包含文本和图像的文章。

我的问题是：**在替换内容并加载新内容的每个外部资源后，是否有触发事件？**就像“准备好”刷新 DOM 一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:52:13.853

~~是的，[jQuery 有一个对你有用的`document.ready`事件](http://api.jquery.com/ready/)。~~

~~但是，如果您不想导入库，则可以[复制 jQuery 的 event 。](https://stackoverflow.com/questions/1795089/need-help-with-jquery-to-javascript/1795167#1795167)~~

**编辑**

原来我没有注意。

修改 DOM 时不会触发任何事件，因此不可能在类似的东西上添加侦听器。

您必须手动跟踪 DOM 上的修改。您可以将“回调”添加到您使用的修改函数中：

```
function addSomethingToPage(data){
    data.doSomething():
    domReady();
}

function domReady(){
    //re-usable "callback"
} 
```

# c# - 自动滚动到页面底部

> ID：13472532
> 
> 赞同：2
> 
> 时间：2012-11-20T11:46:49.590
> 
> 标签：c#, javascript, jquery, code-behind

我有一个代码隐藏文件，它在其中执行：

`Response.Redirect(Request.RawUrl);`

在我更新了数据库中的某些内容之后。 ***（当存储主题的评论时）***

我希望在触发响应时使页面自动滚动到页面底部。有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:15:16.787

滚动到页面底部可以使用 javascript 完成。下面是执行相同操作的 javascript 代码。请在正文标签结束之前将以下代码放在页面末尾。

```
<script>
window.scrollTo(0, document.body.clientHeight);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:14:30.633

在新评论中添加[锚点](http://www.boogiejack.com/html/html-anchor-tag.html)怎么样。

```
<a name="NewComment">The comment</a> 
```

然后让您的重定向指向该锚点

```
Response.Redirect(Request.RawUrl + "#NewComment"); 
```

这应该使您的浏览器滚动到该锚点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:56:45.163

滚动到页面底部是客户端而不是服务器端。C# 是服务器端。为了滚动，您必须在页面中添加一些 javascript 来为您执行此操作。

通常，这是按如下方式实现的，编写一个查看 URL 的 javascript 例程。如果 url 中有一些特定信息（例如 &scroll2bottom=true），则 javascript 会执行该操作。这也可以让您滚动到特定的页面元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:11:07.613

我使用这个功能，也许它对你有用。它适用于滚动的坐标和延迟秒。尝试使用不同的坐标将使滚动停止在您想要的位置。

**在你的 js 中声明这个函数**

```
function WindowsScrollTopAnimado(coordinate,miliseconds) { 

    $('html, body').animate({scrollTop:coordinate}, miliseconds);
} 
```

**需要时从服务器端调用它：**

```
Private Sub ScrollToElement()
        Dim Cadena = "<script type='text/javascript'>"
        Cadena += "WindowsScrollTopAnimado( " & 1350 & "," & 1800 & ");"
        Cadena += " </script>"

        ScriptManager.RegisterStartupScript(Me.Page, Me.Page.GetType, "ScrollToControl", Cadena, False)
    End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T12:18:27.877

我会在你想要滚动到的点插入一个[锚点](http://www.w3schools.com/tags/att_a_name.asp)到 HTML 中（这可以永久地在底部的代码中，或者在目标点动态插入），然后重定向到 yoururl.html#anchor

不幸的是，这不是 HTML5/Web2.0，新的现代方式似乎在这里：[http ://dev.w3.org/html5/spec/single-page.html#scroll-to-fragid](http://dev.w3.org/html5/spec/single-page.html#scroll-to-fragid)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-07T10:30:25.037

我对此感到很开心。我使用的一种简单的代码隐藏方式是将焦点放在屏幕上的最后一个元素上，例如空标签。
例如

```
lblMyEmptyLabel.Focus(); 
```

当然，这不会平滑地滚动窗口，它几乎会将您“传送”到那里。

有时上述方法不起作用（例如，当使用引导模式时）在这种情况下，以下 javascript 适用于我：

```
<script type="text/javascript">
    function openModal() {
        document.getElementById('myElement').scrollIntoView(true);
        $('#myModal').modal('show');
    }
</script> 
```

如果您使用 asp 元素（例如文本框）滚动到，不要忘记将 clientidmode="static" 部分添加到标签中，这样客户端上的 ID 就不会改变。

# asp.net-mvc - Asp.Net MVC - 防止在 Ajax.BeginForm 由于表单验证而触发 OnSuccess 回调

> ID：13472537
> 
> 赞同：0
> 
> 时间：2012-11-20T11:47:05.187
> 
> 标签：asp.net-mvc, callback, ajax.beginform

有没有办法防止在条件下触发 Ajax OnSucess 回调函数？

我有这个 Ajax.BeginForm 和 OnSuccess 我有一些 js 代码，但是如果验证失败，我不希望调用该函数。

这是代码：

```
@using (Ajax.BeginForm("Register", "Account", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "vall", OnSuccess = "closeDialog('RegistroUsuario')" })) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:59:05.543

您需要在 onSuccess 函数中检查模型是否有效

或者你可以调用**OnFailure**方法

*   将响应对象的 StatusCode 设置为 400 之类的值。
*   在模型无效状态下抛出异常，它将调用 OnFailure 方法。

请参考以下链接

[当 ModelState 为 InValid 时调用 Ajax.BeginForm OnFailure](https://stackoverflow.com/questions/12599090/ajax-beginform-onfailure-invoked-when-modelstate-is-invalid)

# c# - 如何将文本转换为通话？

> ID：13472543
> 
> 赞同：0
> 
> 时间：2012-11-20T11:47:25.170
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, text-to-speech, voicemail

我正在为 WP7 Mango 版本构建应用程序。要求是，当从该应用程序向预定义的一组联系人发送消息时，如果发送消息的号码无法接收消息，则应拨打这些号码和文本消息（打算发送）应在呼叫接收方时读出。

我非常怀疑这在 WP7 上是否可以实现。我这样想错了吗？有什么办法可以做到这一点？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:16:00.337

好...

1.  有一个启动器允许应用程序发送短信，但它需要用户交互，并且用户可以在发送前更改短信。因此，您无法确切知道发送了哪条短信。

2.  手机上没有 API 可以检查电话号码是否可以接收短信（但也许您可以使用电话号码前缀或其他东西自己弄清楚）

3.  无法以编程方式拨打号码

4.  无法向呼叫接收者播放声音。可以说，当应用程序大声播放声音时，用户可以打开手机的扬声器

5.  没有办法以编程方式告诉接听者何时接听电话。因此，当接听者接听电话时，用户必须手动按下应用程序中的按钮

总之，虽然它可能以某种方式成为可能，但它需要如此多的用户交互，以至于应用程序几乎毫无意义；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:38:40.977

您可以使用云中的 SMS 和 IVR 服务（例如[SMSIfied](http://smsified.com/)和[Prophecy](http://evolution.voxeo.com/) ）来实现这些要求，而不是尝试直接从 WP7 中实现。

SMSIfied 允许您通过简单易用的 REST API 发送和接收文本消息。您还可以在回调中获取发送短信的结果。这是一篇博文“[使用 C# 和 SMSified 发送 SMS 消息](http://blog.smsified.com/2011/06/sending-sms-messages-with-c-and-smsified/)”。

对于不接受 SMS 的电话号码，您可以使用 Prophecy 拨打号码并使用文本转语音 (TTS) 播放消息。Prophecy 使用开放的 W3C 标准[Call Control XML (CCXML)](http://www.w3.org/TR/ccxml/)和[VoiceXML](http://www.w3.org/TR/voicexml20/)进行编程。您使用 CCXML 执行外拨拨号，当用户或应答机应答时，您将控制权传递给处理 TTS 的 VoiceXML 应用程序。Prophecy IVR 具有出色的通话进度分析功能，可以更轻松地在答录机/语音邮件中获取整个消息。你有没有从自动化系统中得到那些被切碎的信息？[CCXML](http://docs.voxeo.com/ccxml/1.0-final/)上的Voxeo 文档在第 F 章中很好地介绍了如何执行外拨。有一个很好的开源项目，叫做[VoiceModel](http://voicemodel.codeplex.com/)这使得使用 ASP.NET MVC 4 开发 VoiceXML 应用程序变得更加容易。

要从 WP7 发起这个出站拨号请求，只需要一个 HTTP 请求，该请求会传递要拨打的号码等参数，以及在查询字符串中运行的 CCXML 应用程序。实际的 CCXML 和 VoiceXML 应用程序将作为 Web 应用程序托管。

# php - 提交表单并在同一页面上重新加载数据

> ID：13472548
> 
> 赞同：0
> 
> 时间：2012-11-20T11:47:47.280
> 
> 标签：php, javascript, jquery, google-visualization

我有一个带有#form 的left_column，当​​我提交它时，它应该在#content_div 上加载结果而不刷新页面。

我用这个：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<script type="text/javascript">
$(function() {
    $('#dateform').submit(function(evt) {
        evt.preventDefault();
        $.ajax({
            url: "charts/client.php",
            type: 'POST',
            data: $(this).serialize(),
            success: function(result) {
                $('#content_div').html(result);
            }
        });
    });
});
</script>
<div id="content_div"> 
```

似乎什么都没有出现。萤火虫报告了这一点：

> ReferenceError：谷歌未定义

这个charts/client.php 正在使用google api，是的，我已经这样声明了：

```
<script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:56:13.097

使用ajax形式

```
<script>
    // wait for the DOM to be loaded
    $(document).ready(function() 
    {
        // bind 'myForm' and provide a simple callback function
       $("#tempForm").ajaxForm({
       url:'../calling action or servlet',
       type:'post',
       beforeSend:function()
       {
         alert("perform action before making the ajax call like showing soinner image");
       },
       success:function(e){
        alert("data is"+e);
            alert("now do whatever you want with the data");
       }
       });
    });
</script> 
```

[你可以在这里](http://www.malsup.com/jquery/form/#download)找到插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:59:17.933

您得到的错误似乎来自client.php，而不是来自实际的jquery ajax 脚本。

可能您在创建您使用的 google 对象的新实例之前尝试调用 google 方法。如果您在此处发布 client.php 的代码，我可以为您提供更多帮助。

例如，当我使用 gmaps api 时：

试图做：

```
geocoder.geocode( { 'address': target}, function(results, status) {... 
```

设置前：

```
var geocoder = new google.maps.Geocoder(); 
```

将返回“谷歌未定义”；

# google-maps-api-3 - Google Places API - 查找最近的地点、距离和旅行时间

> ID：13472549
> 
> 赞同：3
> 
> 时间：2012-11-20T11:47:52.063
> 
> 标签：google-maps-api-3, google-places-api

用下面的例子，

[https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search](https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search)

我可以获取 pyrmont 附近的商店列表，但我还想了解商店与 pyrmont 的距离以及驾车和步行的大致旅行时间。我怎么能得到这些信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:17:06.543

您可能需要使用[距离矩阵](https://developers.google.com/maps/documentation/javascript/distancematrix)和/或[路线服务](https://developers.google.com/maps/documentation/javascript/directions)

# cut - gnu cut 删除所有内容：

> ID：13472552
> 
> 赞同：1
> 
> 时间：2012-11-20T11:48:01.640
> 
> 标签：cut

我正在尝试清理一组 ipv6 ip 地址。

```
cat /tmp/ipaddress.txt | /bin/grep -i "unexpectedly shrunk window" | /bin/cut -d' ' -f3 | /bin/cut -d'/' -f1 | /bin/cut -d' ' -f3 | /bin/sort --uniq > /var/log/dos_ip6.txt 
```

/tmp/ipaddress.txt 包含以下内容

```
TCP: Peer 0000:0000:0000:0000:0000:ffff:4df6:3e12:12345/80 unexpectedly shrunk window 1550831482:1550831483 (repaired) 
```

/var/log/dos_ip6.txt 包含以下内容

```
0000:0000:0000:0000:0000:ffff:4df6:3e12:12345 
```

我想删掉最后一个“*:12345”。

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:24:57.000

如果您想使用两个或更多`cut`命令，也许可以考虑使用`awk`：

```
awk 'BEGIN { IGNORECASE=1 } { print gensub(/(.*):.*/, "\\1", "g", $3) | "sort -u" }' /tmp/ipaddress.txt 
```

结果：

```
0000:0000:0000:0000:0000:ffff:4df6:3e12 
```

* * *

否则，一个简单的管道就`sed`足够了：

```
... | sed 's/\(.*\):.*/\1/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-07T12:45:17.507

我知道这是一个非常古老的帖子，但如果我们想`cut`单独使用，我们可以这样做：

```
echo "TCP: Peer 0000:0000:0000:0000:0000:ffff:4df6:3e12:12345/80 unexpectedly shrunk window 1550831482:1550831483 (repaired)"| cut -d" " -f3| cut -d":" -f1-8 
```

这将导致：

```
0000:0000:0000:0000:0000:ffff:4df6:3e12 
```

# xml - 使用 XQuery 将 xml 文件存储到 eXist xml 数据库中

> ID：13472556
> 
> 赞同：0
> 
> 时间：2012-11-20T11:48:19.223
> 
> 标签：xml, xquery, exist-db

我对这些东西很陌生，所以有人可以给我一些例子，如何使用 XQuery 将 xml 文件（rss 提要）存储到 eXist 数据库中？我将不胜感激。谢谢！

PS这种工作可以用YQL吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:41:28.407

查看[有关如何操作数据库内容的文档](http://exist-db.org/exist/xquery.xml#d2417e692)。您需要 xmldb 模块。

我认为没有任何针对 XQuery 或 eXist 的 YQL 模块。我也不认为它有任何用处，因为您在 XML 数据库中拥有用于此类内容的 XQuery。相比之下，YQL 更像是 SQL 的替代品，并带有 SQL 到 XML 映射的所有痛苦。XQuery 更适合 XML 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:34:00.070

我找到了...以下是用于存储的函数：

```
xmldb:store($collection-uri as xs:string, $resource-name as xs:string, $contents as item()) 
```

或者

```
xmldb:store($collection-uri as xs:string, $resource-name as xs:string, $contents as item(), $mime-type as xs:string) 
```

但[在这里](http://exist-db.org/exist/functions/xmldb)您可以找到更多满足您需求的特定功能。

不好的是没有使用示例……对于像我这样的初学者来说可能很难

# ruby - 来自脚本/运行器的 Redmine 中的 Ruby NoMethodError

> ID：13472558
> 
> 赞同：1
> 
> 时间：2012-11-20T11:48:26.570
> 
> 标签：ruby, redmine, nomethoderror

我需要在 Redmine Ruby 应用程序中执行一些 Ruby 代码，以便一次在所有项目中启用一个模块。

令人惊讶的是，ruby 确实访问了项目，但在访问每个“项目”对象中的一些特定方法时会引发 NoMethodError。

这是代码：

```
Project.find(:all).each do |project|

  print "Enabling modules for project '#{project.identifier}' ... "

  puts project.methods.sort            # this does print "enabled_module_names"
  puts project.enabled_module_names

end 
```

这失败了：

```
hostname:/srv/apps/redmine# script/runner  vendor/plugins/customplugin/lib/enable_modules.rb
/var/lib/gems/1.8/gems/activerecord-2.3.5/lib/active_record/attribute_methods.rb:260:in `method_missing': undefined method `enabled_module_names' for #<Project:0x7f28985c1cb0> (NoMethodError)
    from vendor/plugins/customplugin/lib/enable_modules.rb:14
    from vendor/plugins/customplugin/lib/enable_modules.rb:7:in `each'
    from vendor/plugins/customplugin/lib/enable_modules.rb:7
    from /usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `eval'
    from /var/lib/gems/1.8/gems/rails-2.3.5/lib/commands/runner.rb:46
    from /usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    from /usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from script/runner:3 
```

我已经摸不着头脑了，但我不明白为什么代码会找到“Project”符号而不是其中的方法，尤其是“project.methods”确实列出了“enabled_module_names”。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:50:22.970

你确定 enable_module_names 是一个实例方法吗？

是在里面`Project.instance_methods`吗？

**编辑（以下评论摘要）：**

在早期版本中，您必须使用以下内容：

```
enabled_module_names = project.enabled_modules.collect(&:name) 
```

getter 仅存在于更高版本中（有关此更改的详细信息，请参见[rev.4460 ）](http://www.redmine.org/projects/redmine/repository/revisions/4460/diff/trunk/app/models/project.rb)

# json - 使用 Jquery/Ajax/Json 跨域读取远程 url

> ID：13472559
> 
> 赞同：0
> 
> 时间：2012-11-20T11:48:36.507
> 
> 标签：json, jquery

我有一个 HTML 页面，我想从中读取远程网页，该网页位于[http://xtremeinspection.com/new2you4kids/app/android/get_product_size.php?productID=113](http://xtremeinspection.com/new2you4kids/app/android/get_product_size.php?productID=113)

网页根据传递的查询字符串参数返回一个值，即 productID

我的问题是因为它的跨域读取数据是使用 Jquery/Ajaz/Json 或所有这些混合的最佳方法？

我在 Google 上搜索过，但找不到**在 DIV 中读取和显示数据的示例。**

**我正在使用此代码，但它不显示任何内容**

```
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                $.getJSON('http://xtremeinspection.com/new2you4kids/app/android/get_product_size.php?productID=113', function(data){
                    $.each(data, function(i, tweet){
                        $('#tweets').append('<li>' + tweet.text + '</li>');
                        alert(tweet.text);
                    });
                });
            });
        </script>

 <ul id="tweets"></ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:16:41.277

像这样的基本示例应该可以帮助您入门：

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
  {
    tags: "gulmarg",
    tagmode: "any",
    format: "json"
  },
  function(data) {
    $.each(data.items, function(i,item){
      $("<img/>").attr("src", item.media.m).appendTo("#images");
      if ( i == 5 ) return false;
    });
  }); 
```

[**演示**](http://jsfiddle.net/Bkkkt/)

# java - 使用 JUnit 运行测试用例时在 Eclipse Debug 中禁用 Drop to frame 功能

> ID：13472562
> 
> 赞同：13
> 
> 时间：2012-11-20T11:48:42.263
> 
> 标签：java, eclipse, debugging, junit

环境：Linux、Eclipse Juno、Java 7、JUnit

当一个简单的应用程序（一个带有 main 方法的 java 类）在调试模式下运行时，'Drop to Frame' 功能在 Eclipse 中运行良好。但是，如果从 junit 测试用例调用相同的方法，则在 Eclipse 中禁用“Drop to Frame”功能。从文档

> 请注意，此命令仅在当前 VM 支持 drop to frame 并且所选堆栈帧不是顶部帧或本机方法中的帧时才可用。

正如我们在运行 junit 测试用例时从 Debug 窗口中的堆栈帧中看到的那样，有一个原生帧“NativeMethodAccessorImpl.invoke”。我假设这是禁用“拖放到帧”的原因。

让我知道这个推理是否正确，如果是的话，有什么办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-07T14:00:46.437

我在 Windows 下使用 Eclipse Luna，Java 7。情况仍然如所描述的那样：对于紧跟在“NativeMethodAccessorImpl.invoke”框架之后的测试方法，“Drop to frame”被禁用。“Drop to frame”的禁用状态绑定到类中`canDropToFrame()`各自的方法，（在我的发行版中）部分。方法 supportsDropToFrame() 检查是否可以丢弃特定帧，并测试`supportsDropToFrame()``org.eclipse.jdt.internal.debug.core.model.JDIStackFrame``plugins/org.eclipse.jdt.debug_3.8.102.v20150115-1323/jdimodel.jar`

1.  JVM 必须支持丢帧
2.  框架不能是最顶层的框架
3.  框架不能是原生的
4.  先前的框架必须不是原生的

所以拉梅什的假设是正确的。这是测试 3 + 4 的原始代码片段：

```
int index = 0;
JDIStackFrame frame = null;
while (index < frames.size()) {
    frame = (JDIStackFrame) frames.get(index);
    index++;
    if (frame.isNative()) {
        return false;
    }
    if (frame.equals(this)) {
        if (jdkSupport) {
            // JDK 1.4 VMs are currently unable to pop the
            // frame directly above a native frame
            if (index < frames.size()
                    && ((JDIStackFrame) frames.get(index))
                            .isNative()) {
                return false;
            }
        }
        return true;
    }
} 
```

该评论表明它是用 JDK 1.4 编写的，因此也许与此同时 JVM 现在也可以将帧丢到原生帧之上。

我创建了 JDIStackFrame 的修补版本，它跳过了测试 4。现在，当在 Junit 测试方法中暂停时，“Drop to frame”已启用，正如预期的那样。

但是当实际丢弃帧时，我收到一个错误消息框，上面写着“com.sun.jdi.InternalException: Got error code in reply: 32 occurred popping stack frame”。

我假设这是一个 JDWP 错误代码。因此，这样的“Drop to frame”似乎在 JDK 1.7 中不起作用（不知道 1.8），而且它不是 Eclipse 的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-02T20:04:01.710

`@Test`我一直通过在函数和可以将帧放入的*thunk*之间进行拆分来处理这个问题。

在 JDK-8 之前，我会这样做：

```
@Test
public void testSomeFooInBar() {
    drop_to_frame_testSomeFooInBar();
}

private void drop_to_frame_testSomeFooInBar() {
    assertTrue(somethingOrWhatever);
} 
```

尽管它很冗长，但我坚持/坚持在测试函数之后调用我的*thunk*，名称表明它们的用途（“跳转/下降到帧”）。这总是必要的，因为总是有人在不阅读评论的情况下进行“重构”，并开始将 thunk 删除为“不必要的”。

使用 JDK 8 及更高版本，我这样做：

```
@Test
public void testSomeFooInBar() {
    final Runnable drop_to_frame = () -> {
        assertTrue(somethingOrWhatever);
    };
    jump_to_frame.run();
} 
```

更简单。Eclipse 将允许您在可运行的 lambda 中设置断点，并根据需要多次放入帧（假设您的逻辑足够可重入。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-17T09:17:41.617

这是一个旧问题，但目前这仍然是 Eclipse 2018-09、Java 1.8 和 testng 作为测试运行程序的问题。解决方法（简单而明显）是将测试的内容提取到另一个方法中，对其进行调试，然后将其内联。例如：

```
@Test
public void test() {
    // test goes here
    assertTrue(true);
} 
```

可以使用重构快捷方式来加快速度：选择测试体，按 Alt+Shift+M，输入名称 'inner'，结果是：

```
@Test
public void test() {
    inner();
}

private void inner() {
    // test goes here and 'drop-to-frame' works well
    assertTrue(true);
} 
```

完成调试后，在 inner() 中按 Alt+Shift+I 将其内联。

# c# - C# 中等效的 TBitmap.monochrome 属性

> ID：13472563
> 
> 赞同：0
> 
> 时间：2012-11-20T11:48:47.417
> 
> 标签：c#, delphi, bitmap, equivalent, monochrome

我正在尝试将 Delphi 代码转换为 C#，我想知道 C# 中是否有等效的`VCL.Graphics.TBitmap.Monochrome`属性？

它的解释是：**确定位图是否以单色显示其图像。如果位图显示为单色位图，则 Monochrome 为 true。如果位图以彩色显示，即如果每个像素包含多于一位，则 Monochrome 为 false。**

我认为 C# 没有这样的东西。

如果有解决方法，它是什么以及如何完成？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:09:24.107

delphi 指的是图像的绘制，因此等效的是设置[ImageAttributes](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageattributes%28v=vs.90%29.aspx)。

你只需要找到一个单色的颜色矩阵。

# blackberry - Ripple.js navigator.geolocation.clearWatch

> ID：13472564
> 
> 赞同：0
> 
> 时间：2012-11-20T11:48:49.697
> 
> 标签：blackberry, ripple

以下引发和错误：

```
navigator.geolocation.clearWatch(gpsWatchId); 
```

错误：

```
Uncaught TypeError: Cannot read property 'intervalId' of undefined ripple.js:478
u.clearWatch ripple.js:478 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:59:21.750

我也遇到了这个错误，我在这里报告了这个问题： [https ://github.com/blackberry/Ripple-UI/issues/629](https://github.com/blackberry/Ripple-UI/issues/629)

我在各种情况下都看到过这个错误，最近一次是调用 blackberry.event.addEventListener() 的结果。所以我不认为这是你的代码。也许您可以在上面的 url 中提供您的具体情况的详细信息，以帮助ripple-ui 开发人员解决问题？

# solr - solr 示例中的部分单词搜索： sarvesh ，我想像 rves 一样搜索

> ID：13472565
> 
> 赞同：3
> 
> 时间：2012-11-20T11:48:51.597
> 
> 标签：solr

示例：
基于美丽搜索：auti...
我想只搜索单词的一部分，而不是整个单词。
例如，当我`auti`只搜索中间 3 个字母而不是整个单词时。我没有得到结果：目前我正在使用带有 apache solr 的搜索 api（也许还有视图）。
请问有什么建议吗？
我正在使用这个

```
<fieldType name="string_ci" class="solr.TextField" sortMissingLast="true" omitNorms="true">
    <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="10"/>
    </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T23:20:06.313

您可以使用通配符查询。

在上面的示例中，您应该在搜索词前加上星号，因此如果有人搜索 auti，您发送到服务器的查询将是*auti*

这应该提取所有包含单词 auti 的单词的所有结果。

[http://www.solrtutorial.com/solr-query-syntax.html](http://www.solrtutorial.com/solr-query-syntax.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:49:16.567

现在，由于您想在单词中搜索子字符串，您可以将 side="back" 添加到您的定义中，这应该可以帮助您实现目标。

因此，您的字段类型定义将如下所示：

```
<fieldType name="string_ci" class="solr.TextField" sortMissingLast="true" omitNorms="true">
    <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="10" side="front" />
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="10" side="back" />
    </analyzer>
</fieldType> 
```

# javascript - 遍历 JSON 数据？

> ID：13472572
> 
> 赞同：-5
> 
> 时间：2012-11-20T11:49:21.847
> 
> 标签：javascript, json, jquery

我有一个如下的 JSON 数据

```
{
    "computer": [
        {
            "product_id": "6",
        },
        {
            "product_id": "10",
        }
    ],
    "Stationery": [
        {
            "product_id": "11",
        }
    ]
} 
```

我想在 jQuery/javascript 中遍历这些类型的 JSON 数据。我怎样才能做到这一点 ？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:52:21.627

假设此 JSON 存储在变量 myData 中。

```
var myData=yourJSON 
```

所以你可以像这样阅读

```
myData.computer; // for computer
myData.computer[0].product_id // for 1st product of computer 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:54:29.927

在javascript中`JSON.parse(your_data)`

在php中`json_decode(your_data)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T11:54:12.953

使用 jquery json 解析器

```
var parsed = jQuery.parseJSON(json_object);
console.log(parsed['computer'][0]['product_id']); 
```

# c# - 在 WinForms 自定义控件中，新属性如何在设计时更改另一个属性？

> ID：13472575
> 
> 赞同：1
> 
> 时间：2012-11-20T11:49:32.340
> 
> 标签：c#, winforms, textbox, custom-controls

我正在编写一个基于 TextBox 的新自定义控件，用于使用标准符号（例如 12.34e5）仅显示数值。我添加了一个十进制类型的新 Value 属性，并将其设置为在 Visual Studio 的“属性”窗口中显示。当用户在设计时更新 Value 属性时，如何让 Text 属性同时更新？我看过有关 DesignMode 属性的帖子 - 这是正确的路径吗？如果是，怎么做？

我意识到 NumericUpDown 提供数字显示，但它不适合项目要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:27:14.937

您需要将`Text`底层证券的属性设置`TextBox`为您想要的值。

如果您是从`UserControl`类派生的，则可以通过设置`Text`您在 Value setter 方法中使用的 TextBox 的属性来做到这一点，如下所示：

```
public decimal Value
{
    get{ return _value; }
    set
    {
        _value = value;
        textBox1.Text = _value.ToString();
    }
} 
```

如果您直接从 派生`TextBox`，只需设置它自己的`Text`属性。

```
public decimal Value
{
    get{ return _value; }
    set
    {
        _value = value;
        this.Text = _value.ToString();
    }
} 
```

# c++ - 为什么我不能在新元素的向量中插入地图？

> ID：13472577
> 
> 赞同：1
> 
> 时间：2012-11-20T11:49:36.917
> 
> 标签：c++, graph, vector, maps, dijkstra

我有一个`vector`用于`maps`存储节点（矢量索引）、它要去的节点（map->second）和成本（map->first）。它将用于绘图。我无法编写一个函数，该函数允许我插入一个新节点，该节点带有成本。

例子：

```
vector[first_node].insert(make_pair(cost, second_node); 
```

使用上述方法，如果向量中的某个位置存在现有节点`[first_node]`，它将添加到该地图而不是创建一个全新的点。我试过使用`push_back`，但它似乎对我不起作用。

典型错误：

```
error C2664: 'void std::vector<_Ty>::push_back(std::map<_Kty,double> &&)' : cannot convert parameter 1 from 'std::pair<_Ty1,_Ty2>' to 'std::map<_Kty,_Ty> &&'

for line: `edges.push_back(make_pair(second, cost));` 
```

整个函数的相关代码：

```
template <typename T>
void Graph<T>::map_edges(T first, T second, double cost) {
  edges.resize(nodes.size()); //Resize the edges vector to make room for the new insertion. The new node already exists in a set of nodes called 'nodes'.
  // Loop through the existing set of nodes...
  for (set<T>::iterator node_it = nodes.begin();
    node_it != nodes.end(); node_it++) {
    //Check if the first node exists already.
    if (first == *node_it) {
      set<T>::iterator node_begin = nodes.begin();
      set<T>::iterator node_pos = nodes.find(first);
      int pos = distance(node_begin, node_pos);
      //Then assign it's numerical value to the vector slot, and add the 
      //second and third words as a pair associated with that slot.
      edges[pos].insert(make_pair(second, cost));
      // edges.push_back(map<double, T>()); //This is where I would rather insert at a new location.
      break;
    }
  } 
} 
```

边的定义：

```
vector<map<T, double> > edges; 
```

# java - 将java控制台输出复制到excel，行而不是列

> ID：13472578
> 
> 赞同：0
> 
> 时间：2012-11-20T11:49:40.793
> 
> 标签：java, excel, console, output

我敢肯定这以前没有被问过，因为这似乎是一个奇怪的问题。

我有一个程序，它基本上将一些重要数据打印到控制台。然后我想简单地复制这些数据并将其粘贴到 Excel 中。当我复制并粘贴它时，它会出现在文档的新行中，我需要它出现在新列中。例如，而不是：

数据1

数据2

数据3

我需要数据1 | 数据 2 | 数据3

目前我正在使用以下命令将这些打印到控制台： System.out.println("Data1"); 但是，我可以使用 print 而不是 println，但我想必须有一些字符来分隔这些字符。我试过 \r 但这似乎不起作用。

奇怪的是，我也不能简单地粘贴转置。为了在excel中获得“转置”选项，我需要粘贴单元格，然后再次将它们复制到剪贴板并粘贴。我想如果有办法在复制一组相邻的单元格时查看剪贴板上的内容，我会知道我需要输出什么才能获得相同的结果。

我什至不需要使用 System.out.print，如果这使解决方案更容易，我很乐意使用 java 将它们直接复制到剪贴板。

问题是这个任务会重复很多次，不必复制/粘贴到 excel 中，然后再次复制并粘贴为转置是有意义的。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:53:39.910

`\r`应该是回车，所以我想这就是为什么它不起作用的原因。你试过`\t`标签吗？

或者`System.out.println("Data1,Data2,Data3")`用逗号分隔，如果你可以确定你的数据中没有逗号？

# mysql - 通过连接两个表来更新所有字段值

> ID：13472579
> 
> 赞同：2
> 
> 时间：2012-11-20T11:49:45.303
> 
> 标签：mysql, sql

我有两个 MySQL 表：

```
 Table items            Table buffer
---------------         -------------
id     keywords         id      value
1      val1             1       val2
2      val1             2       val2
3      val1             3       val2 
```

关键字和值都是 VARCHAR(250)。现在我想更新表***项***中的所有关键字，如下所示：

```
 Table items
-----------------
id     keywords
1      val1, val2
2      val1, val2
3      val1, val2 
```

我试图用 CONCAT 来实现这一点，但显然我做错了什么。你能帮我么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:51:24.620

你需要`UPDATE`像`JOIN`这样：

```
UPDATE items i
INNER JOIN buffer b ON i.id = b.id
SET i.keywords = CONCAT(i.keywords, ', ', b.value); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/0878d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:55:09.793

你也可以这样做：

```
UPDATE items, buffer 
SET items.keywords = CONCAT(items.keywords, buffer.value) 
where items.id = buffer.id; 
```

# c++ - 与数组 C++ 组合

> ID：13472580
> 
> 赞同：0
> 
> 时间：2012-11-20T11:49:47.800
> 
> 标签：c++, arrays, loops

```
char *combo [] = {"node", "game", "loop", "good"}; 
```

如何使用上面显示的数组组合 12 个字母的单词。组合示例：

*   节点游戏循环
*   循环好节点
*   游戏游戏游戏
*   循环游戏

*“必须考虑所有组合。嵌套循环的使用是必要的。”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:53:58.690

你应该在发布之前尝试一些东西。如果我理解正确：

```
int i, j, k;
for (i = 0; i < 4; ++i)  
    for (j = 0; j < 4; ++j)
        for (k = 0; k < 4; ++k)
            printf("%s%s%s\n", combo[i], combo[j], combo[k]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:06:05.173

有 4^3 组合。您可以创建所有这些，例如：

```
for (int i=0; i<4; i++)
{
   for (int k=0; k<4; k++)
   {
      for (int y=0; y<4; y++)
      {
            cout << combo[i] << combo[k] << combo[y] << endl;
      }     
   }
} 
```

# joomla - Joomla 2.5.8 中的菜单项

> ID：13472584
> 
> 赞同：0
> 
> 时间：2012-11-20T11:49:55.443
> 
> 标签：joomla, menu, joomla2.5, menuitem

我之前使用的是 Joomla 2.5.7，在菜单中我可以选择菜单管理器中的菜单项关联。但是，当我更新到 2.5.8 时，我看不到该选项。知道如何在 Joomla 2.5.8 中进行菜单项关联吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T12:32:56.153

要将默认语言设置为阿拉伯语，请转到 Joomla 后端。然后，在顶部菜单上，转到**Extensions >> Language Manager**，然后选择阿拉伯语并单击右上角的**默认值**。

我上面的解释是它总是如何使用默认的 Joomla 语言管理器来完成的。[这](http://www.inmotionhosting.com/support/edu/joomla-25/language/change-site-language)是相同的方法，但带有屏幕截图：

至于菜单项关联，请查看此链接上的信息是否有帮助：

[http://forum.joomla.org/viewtopic.php?p=2688496](http://forum.joomla.org/viewtopic.php?p=2688496)

它适用于 Joomla 1.7，但也可能适用于您。

希望这可以帮助

# mongodb - 子文档数组的 Mongo _id

> ID：13472589
> 
> 赞同：14
> 
> 时间：2012-11-20T11:50:09.837
> 
> 标签：mongodb

我希望为 mongo 数组中的对象添加一个 _id 作为属性。

这是好习惯吗？索引有什么问题吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T13:41:23.303

> 我希望为 mongo 数组中的对象添加一个 _id 作为属性。

我假设：

```
{
    g: [
        { _id: ObjectId(), property: '' },
        // next
    ]
} 
```

此问题的结构类型。

> 这是好习惯吗？

不正常。`_id`s 是实体的唯一标识符。因此，如果您希望`_id`在子文档对象中添加，那么您可能没有很好地规范化您的数据，这可能是您的架构设计中存在根本缺陷的迹象。

子文档旨在包含该文档的重复数据，即地址或用户或其他东西。

话虽这么说`_id`并不总是一件坏事。以我刚才提到的地址为例。想象一下，您有一个购物车系统，并且（出于某种原因）您没有将地址复制到订单文档，然后您将使用一个`_id`或其他标识符来获取该子文档。

您还必须考虑链接文档。如果这`_id`描述了另一个文档，并且属性是该文档相对于该链接文档的自定义属性，那么也可以。

> 索引有什么问题吗？

An仍然相当大，因此对于较小、较不唯一的 id 或根本不使用子文档`ObjectId`，这是需要考虑的事情。`_id`

对于索引，它与文档本身的标准字段并没有真正的不同，`_id`并且跨字段的唯一索引应该在整个集合中起作用（取决于场景，测试您的查询）。

注意：MongoDB 不会`_id`为您添加子文档。

# c++ - 参数规范中的对象

> ID：13472591
> 
> 赞同：3
> 
> 时间：2012-11-20T11:50:10.707
> 
> 标签：c++, templates, boost, boost-spirit

为什么这句话在 C++ 中有效？

```
qi::rule<Iterator, std::string(), skipper<Iterator> > name; 
```

从这里提取：

*   [Boost::spirit::qi - 迷你 C 编译器教程 - function.hpp](http://www.boost.org/doc/libs/1_50_0/libs/spirit/example/qi/compiler_tutorial/mini_c/function.hpp)

规则的定义（恢复）如下：

```
template <typename Iterator, typename T1, typename T2,
                             typename T3, typename T4>
struct rule : boost::proto::extends<bla, bla>, parser<bla, bla>
{
  bla, bla
}; 
```

从这里提取：

*   [规则.hpp 文件](http://www.boost.org/doc/libs/1_50_0/boost/spirit/home/qi/nonterminal/rule.hpp)

规则定义需要一个类型，但是我向它发送一个对象。有可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:58:48.817

你没有给它一个对象。`std::string()`是不带参数并返回`std::string`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T12:02:19.227

在这种情况下，`std::string()`表示返回一个`std::string`并且没有参数的东西的类型。例如，

```
std::string foo() { return "Foo!\n"; } 
```

或一个实例

```
struct Foo
{
  std::string operator()() const { return "Foo!\n"; }
}; 
```

# ruby-on-rails - 链接到活动管理员中的嵌套资源集合索引页面

> ID：13472598
> 
> 赞同：1
> 
> 时间：2012-11-20T11:50:38.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我有一个`Category`模型，其中有很多`Products`.

我想在`Category`索引页面中添加一个链接，该链接链接到产品索引的预过滤版本。就像是：

```
link_to "View Products in This Category", admin_products(:product_id => self.id) 
```

但似乎找不到任何关于如何做到这一点的明确文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T14:52:51.303

我建议用restful的方式来做，activeadmin内置了这种类型的功能，因为它内置了继承的资源，它有一个控制器belongs_to方法，例如

管理员/categories.rb

```
ActiveAdmin.register Category do

  #assuming you have a category name field
  index do
    column "Name" do |category|
      link_to(category.name, admin_category_products_path(category)
    end

  end

end 
```

管理员/products.rb

```
ActiveAdmin.register Product do

  belongs_to :category

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:01:58.973

```
link_to "View Products in This Category", :controller => "products", :action => "index", 'q[product_category_id_eq]' => "#{p.id}".html_safe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:13:33.000

这个怎么样：

```
link_to "View Products in This Category", admin_products(:category_id => category.id) 
```

如果您在类别索引页面中，您的视图中应该有类似的内容：

```
<% @categories.each do |category| %>
    <%= category.name %>
    ...
    <%= link_to "View Products in This Category", admin_products(:category_id => category.id) %>
<% end %> 
```

# c# - 需要检索一个表 来自 linq

> ID：13472601
> 
> 赞同：2
> 
> 时间：2012-11-20T11:50:45.010
> 
> 标签：c#, linq, casting

我有一个函数需要检索我的数据的表格视图。由于我需要将数据绑定到网格，因此我需要将结果作为表格。

```
 internal static Table<MyObject> GetUsersData()
    {
        var db = new DataContext();

        var results = from user in db.Results
                      where user.Type == "USERTYPE"
                      select user;

        return results;
    } 
```

如果我要获取整个表格，它可以正常工作，因为它将表格检索为表格。

```
 var results = db.Results; 
```

我得到的错误是

```
Error   6   Cannot implicitly convert type An explicit conversion exists 
```

***有没有办法将结果转换成表格？***

我试图将此数据绑定到网格，我开始认为我应该在数据库上创建一个视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:52:33.780

让您的方法返回：`IQueryable<Result>`

```
internal static IQueryable<Result> GetUsersData()
{
//...your method code
} 
```

# design-patterns - 设计模式 - 立面

> ID：13472604
> 
> 赞同：0
> 
> 时间：2012-11-20T11:51:07.173
> 
> 标签：design-patterns, facade, oop

我被要求为在线商务系统（Amazon、Play.com 等）制作一个基本的设计模式，我选择专注于外观模式，因为我觉得这种模式主要用于整个系统。这是我到目前为止所拥有的：

系统操作：

*   订购产品

*   库存/可用性（检查产品的库存）

*   身份验证（检查用户是否已登录/注册）

*   发货（发送产品名称/客户详细信息以发货）

建议的“外观模式”将由用户工作，只需要查看/了解 order_product 功能，因此其他组件会从这一操作中“触发”。

我的问题是，对于这种类型的系统，这是一个好的和正确的设计模式吗？此外，操作，任何其他人都可以想到购买产品可能需要的任何其他操作 - 这就是我所能想到的。

希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:49:51.397

嗯，Facade 通常只与为大量遗留代码或库提供简单接口相关。它很少用于创建新的基础代码，除非您考虑“使用库类（例如列表和地图）的类”库的外观。

[http://en.wikipedia.org/wiki/Facade_pattern](http://en.wikipedia.org/wiki/Facade_pattern)

> “外观是一个对象，它为更大的代码体提供简化的接口，例如类库”

对于您描述的任务，您可能会使用诸如 Mediator（在某些情况下可以被视为外观）、模型/控制器/查看器、责任链（用于安全性）、Memento（用于持久性）和可能的 Builder（用于以多种方式显示您的购买：HTML、PDF 发票、电子邮件...）。

# haskell - 如何调用集成在 Haskell 类型中的函数？

> ID：13472606
> 
> 赞同：2
> 
> 时间：2012-11-20T11:51:16.273
> 
> 标签：haskell, deterministic, automaton

我是学生，在我的编程课程中，我们必须学习 Haskell。所以我是新手，我没有那么多经验。另外我不熟悉在论坛上发布问题。

所以首先我会发布图书馆，我必须与之合作。（DA：确定性自动机）

```
type State = Integer
type DA = (State, State -> Char -> State, State -> Bool)
type ListDA = (State, [((State, Char), State)], [State])

a :: DA
a = (0, delta, (==1))
  where
    delta 0 'a' = 1
    delta 1 'a' = 1
    delta 2 'a' = 1
    delta 0 'b' = 2
    delta 1 'b' = 2
    delta 2 'b' = 2

toDA :: ListDA -> DA
toDA (start, delta, final) = (start, deltaFun delta, (`elem` final))
  where deltaFun dl = curry (fromMaybe 0 . flip lookup dl) 
```

toDA 函数在其列表表示中采用自动机并将其转换为自动机。此功能和图书馆的其余部分由讲座主席提供。

现在的问题是写一个类型的函数

```
advance :: DA -> State -> String -> State 
```

该函数接受一个自动机、一个状态和一个字符串，并在读取字符串后返回自动机的状态。

到目前为止，这个想法很清楚。DA 型自动机有一个状态转移函数增量。所以函数“advance”必须以某种方式调用那个 delta 函数。但是我怎样才能访问一个集成在一个类型中的函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:55:07.957

您为此使用模式匹配：

```
advance :: DA -> State -> String -> State
advance (start, step, accept) fromState chars = .... 
```

`type`关键字只是引入了类型[同义词](http://en.wikibooks.org/wiki/Haskell/Type_declarations#type_for_making_type_synonyms)。`DA`只是三元组的同义词`(Integer, Integer -> Char -> Integer, Integer -> Bool)`。

你的命名令人困惑。`delta`在`a`自动机的定义中是一个状态转移函数，但是在`toDA`函数的定义中，一个名为的参数`delta`是一个列表。`ListDA`type 也只是三元组的同义词（不同的一个 - 状态、转换列表和可接受状态列表）。

以下是如何使用递归 for 循环对其进行编码：

```
advance (_, step, _) fromState chars = go fromState chars
  where
    go s []     = ...  -- stop, and produce the state as the answer,
                       -- when the input string (list of chars) has ended
    go s (c:cs) =         -- if not, then
      let s2 = step s c   -- make one step
      in  go .......      -- and loop with new values 
```

注意我们这里不需要`start`or`accept`变量，所以我们可以在那里使用匿名变量模式`_`。此外，`step`是一个 type 的函数`State -> Char -> State`，它决定了函数调用中使用的参数的顺序。即它接受一个状态和一个字符，并产生一个新的状态。

如果您根本不了解 Haskell，您可能会从阅读（并完成）一个好的教程中受益，[比如这个](http://learnyouahaskell.com/)。

最后，既然您说您“不熟悉在论坛上发布问题”，请阅读关于[接受答案](https://meta.stackexchange.com/a/5235/172601)和一般[常见问题解答](https://meta.stackexchange.com/questions/7931/faq-for-stack-exchange-sites)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T12:04:38.670

函数实际上与 Haskell 中的任何其他类型的数据没有任何不同，直到您评估它们——此时全局定义的函数、通过模式匹配获得的函数变量或未命名的 lambda 之间没有任何区别。

在这种情况下，正如 Will Ness 所说，通过对名称进行模式匹配来获取函数是最简单的，

```
advance (start, delta, terminate) = result 
```

那么您可以在此范围内使用`delta`和`terminate`像任何其他功能一样：

```
 where result = delta start 'b'  -- or whatever, conditional on terminate... 
```

# msbuild - TFS 2010 构建错误 - 未找到导入的项目“project_path”

> ID：13472609
> 
> 赞同：20
> 
> 时间：2012-11-20T11:51:28.213
> 
> 标签：msbuild, tfsbuild, build-error

一直在尝试构建一个包含多个项目的解决方案，并且不断出现错误。

我设法使构建部分成功，但总是得到如下所示的错误：

C:\Builds\1\MBS.Payments.Forms.Mvc\MBS 付款表格 MVC\Sources\MBS.Payments.Forms.Mvc\MBS.Forms.Payments.Web\MBS.Forms.Payments.Web.csproj (979) : 未找到导入的项目“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。

我已导航到正在生成错误的文件，其中突出显示了此代码：

```
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets"  Condition="'$(VSToolsPath)' != ''" /> 
```

目前我已经安装了 Visual Studio 2010 Premium 和 Visual Studio 2012 Ultimate 的评估版，我目前正在 Visual Studio 2010 中开发这个应用程序。

下面是发现错误代码的代码块：

```
<PropertyGroup>
<VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
<VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath> 
```

请任何人告知为什么会产生此错误以及如何解决它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T13:08:58.050

检查两个位置：

*C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\WebApplications* 和 *C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications*

其中任何一个都存在 .targets 文件吗？我个人在两者中都找到了它，但我猜你没有（至少根据错误它不在 v11.0 文件夹中）。

您的条件检查*VisualStudioVersion*和*VSToolsPath*属性以查看它们是否丢失，然后设置它们。必须已经设置其中一项或两项，否则它将指向 v10.0 文件夹。

根据[http://blogs.msdn.com/b/webdev/archive/2012/08/22/visual-studio-project-compatability-and-visualstudioversion.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/22/visual-studio-project-compatability-and-visualstudioversion.aspx)，这可能是在VS2012中打开项目造成的。

要解决这个问题，我要么获得 .targets 的 v11 副本（据我所见，两者之间有一些变化，也许在您进行设置时没有正确安装？）或恢复使用 v10 版本.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-30T18:48:17.340

如果使用 Visual Studio 2013 或更新版本以及 TFS 2010，您可以编辑构建定义以包含新的 MSBuild 参数。

```
/p:VisualStudioVersion=10.0 
```

![在此处输入图像描述](../Images/6c87d0c920ac70b59c43748f23588d7c.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-21T03:21:49.750

正如 CryoFusion87 指出的那样，对我有用的解决方案是删除整个`<PropertyGroup></PropertyGroup>`标签及其内容。

添加此标签是为了支持从 VS 2010 和 VS 2012 打开项目。在此处查看更多信息：http: [//sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)

我现在正在使用 VS 2013，这不是必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-26T14:02:17.970

当您在 Visual Studio 2012 中打开该标签时，该`<PropertyGroup></PropertyGroup>`标签被添加到项目文件中，我能够在文本编辑器中打开项目文件，删除 PropertyGroup 并成功构建

# php - 是否可以在两个不同的数据库之间进行外部连接

> ID：13472610
> 
> 赞同：2
> 
> 时间：2012-11-20T11:51:39.053
> 
> 标签：php, mysql, sql, sql-server

> **可能重复：**
> [LINQ：加入 MySql 和 SQL Server 表](https://stackoverflow.com/questions/6256790/linq-join-mysql-and-sql-server-tables)

我认为这是不可能的，但有什么方法可以将 MYSQL 数据库中的表连接到 SQL 服务器中的表？

我宁愿希望我需要从 MYSQL 制作一组数据，并以编程方式将其用于 SQL Server 中的数据，但我想我会先检查一下！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:24:37.273

一种选择是通过 MS SQL Server 链接您的 MySql 数据库。然后通过您的 SQL Server DataContext 访问这两个数据库。以下是一些如何设置链接和文档的示例：

[http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql/](http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql/)

[http://sql-articles.com/blogs/creating-linked-server-to-mysql-from-sql-server/](http://sql-articles.com/blogs/creating-linked-server-to-mysql-from-sql-server/)

> MSDN：链接服务器 完成后，您可能希望使用存储过程或视图公开链接表，以便它们看起来是 SQL Server 数据库的一部分。

请记住，这种方法（以及我能想到的任何方法）都不会特别快。加快跨数据库和网络关联数据的成本并没有什么神奇的。它的最大好处是它向应用程序开发人员提供了一致且简单的数据视图。

取自

[LINQ：加入 MySql 和 SQL Server 表](https://stackoverflow.com/questions/6256790/linq-join-mysql-and-sql-server-tables)

# oauth-2.0 - OAuth 2.0 身份验证 SSL

> ID：13472613
> 
> 赞同：2
> 
> 时间：2012-11-20T11:51:45.163
> 
> 标签：oauth-2.0

有没有办法在没有 SSL 的情况下在本地使用 OAuth 2.0 ？我试图在我的本地服务器中执行它。但它说，我需要 SSL 来使用 Oauth 2.0 执行操作。

> 错误：无法打开 OAuth 访问令牌 URL：建立 SSL 连接需要启用 OpenSSL 扩展

有没有办法在没有 SSL 的情况下使用 OAuth 2.0？

*   我使用 OAuth 2.0 的 PHP 客户端库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:23:01.427

OAuth 2.0 的安全性依赖于 SSL，没有它，任何人都可以看到属于用户的不记名令牌并使用它来伪装自己。但是，如果您需要关闭 ssl 以进行调试并且您的服务器也是用 PHP 编写的，那么我会尝试看看这个： http: [//php.net/manual/en/oauth.disablesslchecks.php](http://php.net/manual/en/oauth.disablesslchecks.php)

SSL 也依赖于服务器，而不是客户端。

# objective-c - 如何每天调用一个方法

> ID：13472615
> 
> 赞同：-2
> 
> 时间：2012-11-20T11:51:51.573
> 
> 标签：objective-c, xcode, xcode4, uilocalnotification, recurrence

Q1：我想在一天的开始（每天）调用一个方法，即使用户没有打开应用程序？

Q2：我想在一定时间内显示通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:13:48.283

[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

[这是给你的教程](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)。谷歌将会出现更多。

# android - 如何获取从android中的软键盘单击的字符

> ID：13472617
> 
> 赞同：1
> 
> 时间：2012-11-20T11:51:55.307
> 
> 标签：android, android-edittext, android-softkeyboard, textwatcher

如何获取从“android”中的软键盘单击的字符，以便在获取后该字符可以被edittext上的相应图像替换？

# google-sheets - 为谷歌电子表格添加/创建列的日期

> ID：13472618
> 
> 赞同：4
> 
> 时间：2012-11-20T11:51:56.273
> 
> 标签：google-sheets, google-drive-api

是否可以在将行插入谷歌电子表格时插入日期/时间。

请注意，这与 NOW() 方法不同，后者将在您查看电子表格时插入当前日期时间...

这样做的主要目的是将谷歌电子表格变成一个“谷歌表格”，可以发送出去收集反馈，并且会记录何时给出回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T23:19:21.990

类似于[Google App Script](https://developers.google.com/apps-script/)中的以下内容？这应该在进行编辑时设置 a set 列的值。

如果您不熟悉 GAS，请从电子表格菜单中选择“工具”->“脚本编辑器”。选择“空白项目”，然后清除那里的内容并替换为这个。保存它（名称不重要）并返回到您的电子表格尝试编辑并查看结果。

```
function onEdit() {
    var dateColNum = 6 //column F
    var ss1 = SpreadsheetApp.getActiveSpreadsheet();

    //set date in same row as edit happens, at fixed column  
    ss1.getActiveSheet().getRange(ss1.getActiveRange().getLastRow(), dateColNum, 1, 1).setValue(new Date())
} 
```

# android - 如何在android中一张一张地显示条形图？

> ID：13472620
> 
> 赞同：2
> 
> 时间：2012-11-20T11:51:55.553
> 
> 标签：android, bar-chart

现在我已经使用 AchartEngine 库在 android 中创建了一个条形图。

我的问题是，

启动模拟器后，我的应用程序会立即显示条形图，但我需要一个一个地显示每个条形图。这意味着每个条形图应该一个接一个地可见。

这该怎么做？

请问有什么建议吗？

*请找到我的参考资料*

**MainActivity.java**

```
public class MainActivity extends Activity {

Button btn_result;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn_result = (Button)findViewById(R.id.button1_invoke);
    btn_result.setOnClickListener(new View.OnClickListener()
    {

    @Override
    public void onClick(View v) {

    Intent intnt = new Intent(MainActivity.this,Result_BarActivity.class);
            startActivity(intnt);

        }
    });    }} 
```

**Result_BarActivity.java**

```
public class Result_BarActivity extends Activity 
{
RelativeLayout rltv;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.result_barchart);

    final GraphicalView grfv =createIntent();  

    RelativeLayout rl=(RelativeLayout)findViewById(R.id.RelativeLayout_ID);
    rl.addView(grfv);
   }

 public GraphicalView createIntent() 
 {

  rltv = (RelativeLayout)findViewById(R.id.RelativeLayout_ID);  

  String[] titles = new String[] { "Order's profit of the year", " " };

  List<double[]> values = new ArrayList<double[]>();

  values.add(new double[] { 7, 2, 5, 8 });
  values.add(new double[] {});

  int[] colors = new int[] { Color.BLUE, Color.WHITE};

  XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
  renderer.setOrientation(Orientation.HORIZONTAL);

  setChartSettings(renderer, "Profit for the year 2012", " ", " ",0,10, 0,10, Color.GRAY, Color.LTGRAY);

  renderer.setXLabels(1);
      renderer.addXTextLabel(0.75, "ord1");
  renderer.addXTextLabel(1.75, "ord2");
  renderer.addXTextLabel(2.75, "ord3");
  renderer.addXTextLabel(3.75, "ord4");
  renderer.setPanEnabled(true, false);

  int length = renderer.getSeriesRendererCount();

  for (int i = 0; i < length; i++) 
  {
      SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
      seriesRenderer.setDisplayChartValues(true);
  }

  final GraphicalView grfv = ChartFactory.getBarChartView(Result_BarActivity.this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
  return grfv;

 /* ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);*/
 }

protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{

 // creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(15);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);

    int length = colors.length;

    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer r = new SimpleSeriesRenderer();
      r.setColor(colors[i]);
      renderer.addSeriesRenderer(r);
    }
    return renderer;
  }

protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,int labelsColor) 
{
 // sets lots of default values for this renderer

 renderer.setChartTitle(title);
 renderer.setXTitle(xTitle);
 renderer.setYTitle(yTitle);

 renderer.setXAxisMin(xMin);
 renderer.setXAxisMax(xMax);

 renderer.setYAxisMin(yMin);
 renderer.setYAxisMax(yMax);

 renderer.setAxesColor(axesColor);
 renderer.setLabelsColor(labelsColor);

 renderer.setApplyBackgroundColor(true);
 renderer.setBackgroundColor(Color.MAGENTA);
 }

protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
{
 // adds the axis titles and values into the data-set

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
int length = titles.length;

for (int i = 0; i < length; i++) 
{
   CategorySeries series = new CategorySeries(titles[i]);
   double[] v = values.get(i);
   int seriesLength = v.length;

   for (int k = 0; k < seriesLength; k++) 
   {
      series.add(v[k]);
    }
   dataset.addSeries(series.toXYSeries());
  }
  return dataset;
}} 
```

**主.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1_invoke"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="195dp"
    android:text="Invoke barchart" />

</RelativeLayout> 
```

**result_barchart.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout_ID"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

</RelativeLayout> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:33:33.300

您可以使用动态图表意味着在特定时间继续发送数据，`repaint`它

从其他函数发送数据到`value`列表

```
int i = 0;
While(true)
{
  int[] series ={1,2,1,3,4,5,3,2,1,}  // ex: your input data to be ploted
  Thread.sleep(300000);  //aprox. 5minutes delay
  update(series[i]);
} 
```

在`update()`函数中添加数据

```
update(int newval)
{
  value.add(newval);
 } 
```

在此之后`repaint`的图表

# android - 获取视图中的选项卡编号。安卓

> ID：13472623
> 
> 赞同：0
> 
> 时间：2012-11-20T11:52:04.173
> 
> 标签：android, android-intent, view, tabs, android-fragments

我在操作栏中有 3 个选项卡。我的 TabListener 类实现了 ActionBar.TabListener 来创建新的 TabFragment。

在 TabFragment 类（它扩展了 Fragment）中，在“OnCreateView”方法中，我膨胀了一个服装视图。

关键是我想对每个选项卡使用相同的视图，只需更改一个单词。视图只是在屏幕中央写“这是选项卡 X”，但我希望 X 根据选择的选项卡而改变。我认为有两种选择可以做我想做的事，但我不知道如何做。

*   在“MyView”类中，获取选中的标签号。
*   从片段类向视图发送一个意图，并额外说明哪个选项卡是，并在意图中读取额外的内容（不知道我该怎么做，因为视图没有捆绑）

只是说应用程序上只有一个活动。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:58:39.167

做一个静态变量

```
public static int tabNo;
      // OR
public static String tabName; 
```

在选择选项卡时，请参阅此静态变量并更改其名称/否

并在您的片段或活动中更改 textView 的文本

```
textView.setText("This is tab :"+tabName"); 
```

# jaxb - 未编组@RequestPayload的spring-ws bean验证

> ID：13472625
> 
> 赞同：1
> 
> 时间：2012-11-20T11:52:11.117
> 
> 标签：jaxb, bean-validation, spring-ws

是否有可能在 spring-ws 2 中获取未编组的有效负载以使用 jsr303 进行验证。这个想法是为我创建的每个端点完成此操作，而无需在每个端点中显式创建验证代码。（例如使用拦截器或某种监听器）

我尝试扩展 EndpointInterceptor 但是，这里没有未编组的对象。我还尝试为 jaxb 解组器实现 Unmarshaller.Listener。通过 spring 上下文注册了这个，但是这里有两个问题： 1\. 它只在初始化 jaxb-marshaller bean 时设置 unmarshaller 侦听器。2\. Jaxb Unmarshaller 在每个请求上创建，并且在为该特定请求创建 unmarshaller 期间未设置侦听器。我看不到在每个请求上都注入它的方法。

那么还有其他方法可以实现这一目标吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:08:34.747

由于 Spring WS 端点是普通的 Spring Bean，您可以利用 Spring 的 AOP 功能并创建一个切面来验证传递的对象。

如果您使用 Spring 3.1 和 Hibernate Validator 4.2 作为 Bean Validation 提供者，您还可以使用 Hibernate Validator 的[方法验证](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customoptions-methodvalidation)功能。Spring 提供了一个[拦截器，它对使用](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/beanvalidation/MethodValidationInterceptor.html)[@Validated](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/annotation/Validated.html)注释的所有 bean 执行方法验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T13:24:34.977

如果您不想使用 AOP，可以这样做：

1.  您将需要扩展 DefaultMethodEndpointAdapter 并在子类中实现 Ordered（例如：

    DefaultMethodEndpointAdapterWithJSRValidation 扩展 DefaultMethodEndpointAdapter 实现 Ordered {...)

**确保在子类中覆盖以下内容：**

1.1 在此方法中，您将添加您的 jsr 验证内容：

```
@Override
public Object[] getMethodArguments ... 
```

1.2 此方法确保使用您的 bean 而不是默认 bean。

```
@Override
public int getOrder() {
  return Integer.MIN_VALUE;
} 
```

1.  您可以像这样在spring上下文中注册您的bean：

`<bean id="defaultMethodEndpointAdapter" class="your.package.DefaultMethodEndpointAdapterWithJSRValidation" primary="true"/>"`

玩得开心。

# google-chrome - 如何防止在 Chrome 扩展程序中重新加载页面？

> ID：13472629
> 
> 赞同：1
> 
> 时间：2012-11-20T11:52:18.273
> 
> 标签：google-chrome, google-chrome-extension

我已经编写了一个 Chrome 扩展程序来清除浏览器地址栏中的 TYPO3 CMS 缓存。

现在我想添加一个可选功能，在页面刷新时自动清除缓存。这意味着，当用户按 F5、CTRL+R、单击工具栏中的重新加载图标或单击上下文菜单中的“重新加载”时，首先应该执行我的 ajax 脚本（以清除 CMS 缓存），然后，页面可能重新加载。

有没有可能用 Chrome API 做到这一点？

我首先在内容脚本中尝试了该`window.onbeforeupdate`事件——这总是在页面重新加载时触发，而且如果我关闭窗口或切换到另一个网站也会触发。此外，我不能告诉浏览器在这里等待我的 ajax 请求。

有效的是使用控制键检查`document.onkeydown`键 116 (F5) 和 82 (R) 并使用`event.preventDefault()`。但这不会涵盖刷新缓存的另外两种可能的情况。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:26:44.680

我找到了解决方案。它并不真正符合我的要求，但它可以工作（甚至更好）。

Chrome 提供了一个[webRequest API](http://developer.chrome.com/extensions/webRequest.html)，允许您修改或阻止所有 http 请求。

```
chrome.webRequest.onBeforeRequest.addListener(
  function (details) {
    if (!severalConditionsToCheckIfIWantToDoTheMagic) {
        return;
    }

    $.ajax(url, {
        async:false,
        complete:function () {
          return {redirectUrl:details.url};
        }
    });
  },
  {urls:["<all_urls>"]},
  ["blocking"]
); 
```

在此示例中，我首先检查是否要执行 ajax 请求。如果是，下一步就是不做 ajax 请求。重要的是，请求**不是**异步的。完成后，我返回请求的原始 url，这基本上只是重新加载。

它与我的要求不符的原因是它总是会在任何请求时触发，而不仅仅是在重新加载时触发。这意味着在我的情况下，我必须检查：

*   其他网站
*   其他请求类型（加载css、js或图片也是请求），我只需要类型'main_frame'
*   属于我的扩展的一些变量

现在，当我单击网站上的链接时，也会触发该脚本 - 但就我而言，这很好。

# compilation - CentOS 5.8 上 Redis 安装错误

> ID：13472631
> 
> 赞同：1
> 
> 时间：2012-11-20T11:52:22.057
> 
> 标签：compilation, redis, centos5

我试图在 CentOS 5.8 上编译 Redis 2.6.4，但运行后出现以下错误`make`

> zmalloc.o：在函数`zmalloc_used_memory': /root/redis-2.6.4/src/zmalloc.c:223: undefined reference to` __sync_add_and_fetch_4'中collect2：ld返回1退出状态make[1]： *** [redis-server]错误1 make[1]：离开目录`/root/redis-2.6.4/src'make：*** [全部] 错误 2

我也尝试过`CFLAGS= -march=i686`，`src/Makefile`但没有奏效。其实，我不知道该放在哪里。我放在文件的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:28:40.067

1 添加`CFLAGS= -march=i686`到 src/Makefile 顶部

2 将 src/.make_settings`OPT=-O2`改成`OPT=-O2 -march=i686`

3 然后`make 32bit`

4`make test`

这对我行得通。

附言。也许你会遇到`tcl`问题

1`rpm -qa | grep tcl`看tcl版本是不是吹8.5

2 如果是`yum remove tcl`

3 访问[http://www.linuxfromscratch.org/blfs/view/cvs/general/tcl.html](http://www.linuxfromscratch.org/blfs/view/cvs/general/tcl.html)获取最新的并安装

4 进入redis目录`make test`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:38:09.000

好的，我搞定了。我运行了以下似乎正常工作的命令（尽管稍后我需要安装 tcl8.5）。

```
make 32bit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T04:03:41.210

正如@HungryCoder 所说，简单的“make 32bit”命令会起作用。

但有时，如果您已经遇到错误，您最好在运行之前删除名为 .make* 的文件。

```
make distclean
make 
```

如果没有帮助，请尝试通过运行以下命令手动找出您的 CPU 架构：

```
export CFLAGS=`uname -m`
make distclean
make 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T14:24:19.050

我在编译它时遇到了一些问题，我通过首先安装以下依赖项来解决：

```
sudo yum -y install libstdc++*
sudo yum -y install libstdc++*.i686 
```

然后我可以毫无问题地运行正确的make

```
make 32bit 
```

我希望这可以帮助别人。

# codeigniter - CodeIgniter - 未显示二进制图像

> ID：13472632
> 
> 赞同：0
> 
> 时间：2012-11-20T11:52:21.473
> 
> 标签：codeigniter, binary-data

我已经在类 Image 上构建了一个函数，该函数以二进制格式检索或应该检索我的图像。但是，当我调用该控制器方法时，我只会得到错误图标。

我需要这样做，因为图像被发送到 iOS 和 Android 应用程序。

图片的路径是正确的（我已经仔细检查过）

我正在使用 CodeIgniter 2.1.3，我的代码看起来像这样

```
$images = $this->image->getImageById($database,$id);

        $data = fopen($images->path, 'rb');
        header('Content-type: image/jpeg');
        fpassthru($data); 
```

关于如何实现这一目标的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:00:39.913

我觉得你正在寻找这样的东西。

[http://www.ehow.com/how_8745742_convert-binary-data-using-php.html](http://www.ehow.com/how_8745742_convert-binary-data-using-php.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-20T12:06:45.123

我想这可能会对你有所帮助。在数组中的模型文件中获取结果后。在您的示例中

在视图文件中显示它像这样`<img src="<?php echo $images['path'] ?>" />`

# php - 嵌入在 php tmpl 文件中的奇怪代码

> ID：13472638
> 
> 赞同：1
> 
> 时间：2012-11-20T11:52:54.470
> 
> 标签：php, file-get-contents

我刚刚发现这个嵌入在我正在使用的插件中（在 html 之前的 tmpl 文件的开头）......

我应该担心吗？我可以删除它吗？

```
<?php 
$author = @file_get_contents('http://d5827db8276672d15fca-1e2d3239e5a8580a4f85f7906852eb87.r51.cf1.rackcdn.com/author3c.php');
echo $author;
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:55:13.333

我刚刚访问了那个 url，它只是一个空的 php 文件，所以除非在某个地方声明它必须保留，否则我会删除它。

编辑：：

当我说它是一个空的 php 文件时，它实际上弹出了一个下载对话框来下载该文件，它不仅为我提供了一个空页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:58:11.523

我删除它，如果您无法控制该文件中的内容，那么您将面临安全风险，无论模板的作者说什么。

检查你的代码的其余部分`eval($author)`或`file_put_contents('shell.php',$author);`等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:56:02.760

`file_get_contents`只是将文件的**所有内容加载**到变量**中而不执行代码**。

我建议您首先检查该文件中是否没有关键标签或代码，然后您可以安全地删除它。

有关更多信息，请参阅 PHP.net 上的此页面：[file_get_contents 手册](http://php.net/file_get_contents)。

# asp.net - 控制器构造函数中的 ASP.NET MVC 路由 URL

> ID：13472642
> 
> 赞同：1
> 
> 时间：2012-11-20T11:53:22.910
> 
> 标签：asp.net, asp.net-mvc, url-routing

尝试在控制器构造函数中生成 url 时出现问题

```
 private BreadCrumbItem breadCrumbItem;

    public SummaryController()
    {
        this.breadCrumbItem = new BreadCrumbItem { Title = "Sommaire", Url = Url.RouteUrl(new { controller = "Summary", action = "Index" }) };

    } 
```

问题出在 Url.RouteUrl

为什么我无法在控制器中访问它？有任何解决这个问题的方法吗 ？因为否则我必须在此控制器的所有操作中添加相同的代码。

感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T11:59:00.670

如果我理解你的问题，你想要这样的东西：

```
public class SummaryController
{
    public SummaryController()
    {

    }

    private BreadCrumbItem _breadCrumbItem = null;

    private BreadCrumbItem CrumbItem
    {
        get
        {
             if(_breadCrumbItem == null)
             {
                  _breadCrumbItem = new BreadCrumbItem { Title = "Sommaire", Url =        Url.RouteUrl(new { controller = "Summary", action = "Index" }) };
             }

             return _breadCrumbItem;
         }
    }
} 
```

现在，在每种方法中，您都可以简单地使用 CrumbItem 并且第一次它会创建新的 BreadCrumItem ，之后它会在每次调用时返回您创建的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-10T18:12:31.923

您可以覆盖该`Initialize()`方法。`Url`一旦初始化基本控制器，就会设置该属性。

```
protected override void Initialize(RequestContext requestContext)
{
    // the controller's UrlHelper is still null
    base.Initialize(requestContext);

    // the controller's UrlHelper is now ready to use!
    var url = Url.RouteUrl(...);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T12:04:49.780

您可以在控制器中访问它，但不能在构造函数中访问它。显然，在调用构造函数时未设置此值，因为它是在控制器生成器创建控制器后填充的。使用@middelpat 解决方案延迟加载属性（在当前操作中首次使用时创建它）是解决问题的合理解决方案。此时，UrlHelper 实例应该在控制器中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:34:49.047

我认为你需要这样的答案：

[https://stackoverflow.com/a/700357/637425](https://stackoverflow.com/a/700357/637425)

**引用：**

> 如果您只想获取某个操作的路径，请使用 UrlHelper：
> 
> ```
> UrlHelper u = new UrlHelper(this.ControllerContext.RequestContext);
> string url = u.Action("About", "Home", null); 
> ```
> 
> 如果要创建超链接：
> 
> ```
> string link = HtmlHelper.GenerateLink(this.ControllerContext.RequestContext,
> System.Web.Routing.RouteTable.Routes, "My link", "Root", "About",
> "Home", null, null); 
> ```
> 
> Intellisense 将为您提供每个参数的含义。

# android - PhoneGap toggleClass 在 android 应用程序上不起作用

> ID：13472644
> 
> 赞同：1
> 
> 时间：2012-11-20T11:53:26.400
> 
> 标签：android, jquery, cordova, toggleclass

我正在使用PhoneGap 开发Android 应用程序，因为我将PhoneGap 更新到最新版本（2.2.0）我发现toggleClass 不起作用，而是按住按钮3-4 秒。

让我解释一下。我有一个可隐藏的菜单（列表），用户可以通过单击标题来隐藏/取消隐藏。

我有这个 javascript 代码：

```
var 扩展器 = 函数（） {
    var li = $(this).closest('ul').find('li');
    for(var i = 1; i < li.size(); i++) {
        li.eq(i).toggleClass('d-none');
    }
    刷新滚动（110）；
};

```

这个CSS：

```
.d-none{ 显示：无；}
```

这种方法在 Web 和 iOS 上完美运行（也适用于 PhoneGap）。

任何提示？

# regex - 如何从 JMeter 中的变量中转义正则表达式字符？

> ID：13472646
> 
> 赞同：1
> 
> 时间：2012-11-20T11:53:30.677
> 
> 标签：regex, jmeter

问题很简单。我有用于从响应中提取一些数据的正则表达式。它看起来像这样：

```
<input type="hidden" +name="reportpreset_id" +value="(\w+)" *>${reportPresetName}</td> 
```

问题是变量`${reportPresetName}`可能包含正则表达式使用的字符，如括号或点。
我试图用`\Q`and `\E`（基于[that](http://www.regular-expressions.info/reference.html)）包围这个变量，但显然这些标记不起作用（显然 Java 支持这个标记，所以我很困惑）。当我添加该标记时，即使对于任何 `${reportPresetName}`变量内容，该表达式都失败（即使在没有这些标记的情况下也可以工作）。

我检查[了 JMeter 中的函数列表](http://jmeter.apache.org/usermanual/functions.html)，但没有发现任何有用的东西。有谁知道如何在 JMeter 中转义正则表达式字符？

* * *

更新：
当我使用它`\Q`并`\E`断言它失败时。当我从“查看结果树”中的断言日志中复制正则表达式并在记录的响应数据上对其进行测试时，它可以工作！所以它看起来像是 JMeter 中的某种错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:48:43.273

Jmeter 在 Regexp Extractor 和 Regexp Tester 中使用 jakarta ORO 作为其正则表达式引擎：

*   [http://jmeter.apache.org/usermanual/regular_expressions.html](http://jmeter.apache.org/usermanual/regular_expressions.html)

但它使用 Java 正则表达式引擎在 HTML/文本查看器中进行搜索。

读：

*   [http://jmeter.apache.org/usermanual/regular_expressions.html](http://jmeter.apache.org/usermanual/regular_expressions.html) 20.4 美元

    ```
    Please note that ORO does not support the \Q and \E meta-characters. 
    [In other RE engines, these can be used to quote a portion of an RE so that the 
    meta-characters stand for themselves.] 
    ```

一个解决方案是在 regexp 之后使用 Groovy 添加一个 JSR223 后处理器，使用以下方法提取 var 并转义 regexp 字符：

```
org.apache.oro.text.regex.Perl5Compiler.quotemeta(String valueToEscape) 
```

在即将发布的 2.9 版中，已创建了一个新函数来执行此操作：

*   __escapeOroRegexpChars（要转义的字符串，变量名）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:10:15.947

`\Q`并`\E`在 Java 中工作，请参阅[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)。

但是，在 Java 中，我们使用双反斜杠字符，因此您可能需要使用`(\\w+)`and，当然，`\\Q`and `\\E`。

我不确定你的情况，因为我不了解你的上下文，实际上（到目前为止从未使用过 JMeter）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:13:14.480

如果 JMeter 不支持`\\Q`并且`\\E`（我不知道是否支持...），您可以编写自己的函数/过程，在其中将字符串拆分为字符并用转义序列替换每个字符，如下所示：

*   如果字符是`\`，则将其替换为`\\\\`
*   否则在字符前添加前缀`\\`

这不是最佳方法，但可以肯定它会根据需要工作。

* * *

例如对于输入

```
This is-a\string 12&$34|!`^5 
```

你会得到

```
\\T\\h\\i\\s\\ \\i\\s\\-\\a\\\\s\\t\\r\\i\\n\\g\\ \\1\\2\\&\\$\\3\\4\\|\\!\\`\\^\\5 
```

# android - 如何取消 ListPreference 点击？

> ID：13472648
> 
> 赞同：3
> 
> 时间：2012-11-20T11:53:32.860
> 
> 标签：android, preferences, listpreference

我有 3 个首选项设置：
- EditTextPreference 输入网址
- EditTextPreference 输入端口
- ListPreference 显示网页中的一些元素（例如[http://www.igs-ip.net:2101](http://www.igs-ip.net:2101)）定义前 2 个设置。

为了使这个可行，我想在点击第三个设置时验证网络连接。到目前为止，我能够捕捉到动态填充 ListPreference 的点击：

```
ListPreferenceDynamic dlp = (ListPreferenceDynamic)findPreference(strKey);
dlp.setOnClickListner(new ListPreferenceDynamicOnClickListener() 
{
    public void onClick(ListPreferenceDynamic preference) 
    {
        String[] astr = astrOpenWebPageAndGetInfo(strAddress, strPort);

        if (astr != null)
        {                           
            preference.setEntries(astr);                    
            preference.setEntryValues(astr);
        }
    }
}); 
```

我现在的问题是找到一种方法来防止在出现问题时显示 ListPreference 对话框，比如说，互联网地址。我只想显示一个 Toast 来解释问题，而不显示一个空的 ListPreference 对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-26T10:47:25.087

我实际上是在这之后。

但是 ChangeListener 在选择新值后触发，对吗？

所以它并没有真正取消我所追求的列表。

我确实找到了一个解决方案，它正在制作一个自定义 ListPreference 类并有条件地处理 onClick。这样，如果通过 setActive 方法将其设置为不活动，则单击该选项后列表将不会显示。

```
public class CustomListPreference extends ListPreference {

private boolean isActive;

public CustomListPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CustomListPreference(Context context) {
    super(context);
}

public void setActive(boolean isActive) {
    this.isActive = isActive;
}

public boolean getActive() {
    return this.isActive;
}

@Override
public void onClick() {
    if (isActive) super.onClick();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-15T19:18:53.760

有点晚了，但可能对你们中的一些人仍然有用：

我认为 OnPreferenceChangeListener 可以处理这个问题。如果要接受新值，只需注册一个并返回 true，如果要取消单击，则返回 false：

```
yourPreference.setOnPreferenceChangeListener((preference, newValue) -> {

    if(condition){
        showToast();
        return false;        //cancel the click
    } 
    else return true;        //accept the click
}); 
```

参数*newValue*确定您偏好的新值。

# sql-server-2008 - 使用 sp_msforeachtable 禁用 FK 约束会导致 FK 错误

> ID：13472653
> 
> 赞同：0
> 
> 时间：2012-11-20T11:53:55.510
> 
> 标签：sql-server-2008

我刚刚向旧数据库添加了大约 80 个“丢失”外键，并且（不出所料）由于 FK 约束删除表时，数据库重新创建脚本现在失败。该策略一直是按自然顺序删除表，这一直有效。我不想保持这种方法，并尝试禁用所有 FK 约束，如下所示：

```
USE MYDB;
GO

EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all"
GO

DROP TABLE [dbo].[Table1]
DROP TABLE [dbo].[Table2]
DROP TABLE [dbo].[Table3]
...

exec sp_msforeachtable "ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all"
GO 
```

问题是我仍然遇到错误：

> 消息 3726，级别 16，状态 1，第 17 行无法删除对象 'dbo.Table1'，因为它被 FOREIGN KEY 约束引用。消息 3726，级别 16，状态 1，第 18 行无法删除对象“dbo.Table2”，因为它被 FOREIGN KEY 约束引用。

谁能建议我做错了什么？我在 Windows 7 上使用 SQL Server 2008 r2。

编辑：我注意到我有一个循环引用，即 Table1 对 Table2 有一个 FK，反之亦然，但即便如此......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:30:24.833

您可以在运行 drop table 命令之前删除所有约束。脚本顶部的类似内容应该可以工作。

```
 declare @newLine as varchar(1) = char(13);
   declare @sqlCmd as varchar(max) = '';

   SELECT @sqlCmd = @sqlCmd + 'alter table ' + OBJECT_NAME(parent_object_id) + ' drop constraint ' + OBJECT_NAME(OBJECT_ID) + ';' + @newLine
   FROM sys.objects
   WHERE type_desc LIKE '%CONSTRAINT'
         and OBJECT_NAME(parent_object_id) not in ('list','of','tables','to','ignore')
  order by case when left(OBJECT_NAME(OBJECT_ID),2) = 'PK' then 1 else 0 end
  exec (@sqlCmd)
  go 
```

# java - 如何将 JSP excel 生成器转换为 Servlet

> ID：13472659
> 
> 赞同：0
> 
> 时间：2012-11-20T11:54:13.417
> 
> 标签：java, jsp

我能够在服务器系统中生成 excel 文件，但问题是每当我尝试从客户端系统访问它时，它只会在服务器系统中生成，而不是在客户端系统中。以下代码用于生成 excel 文件：

```
<%@ page import="org.apache.poi.hssf.usermodel.HSSFSheet"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFWorkbook"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFRow"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFCell"%>
<%@ page import="java.io.*" %>
<%@ page import="java.util.*" %>
<%@ page import="java.sql.*" %>
<%@ page import="javax.swing.JFileChooser" %>
<%@ page import="java.awt.Desktop"%>
<%@ page isErrorPage='true' %>

<%! 
    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "s";
    String driver = "com.mysql.jdbc.Driver";
    String username = "root"; 
    String userPassword = "s";

%>
<br><br>
<%

    java.util.Date date = new java.util.Date();

    JFileChooser chooseFile=new JFileChooser();

    chooseFile.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    chooseFile.setDialogTitle("Select a Directory");

    chooseFile.showDialog(null,"Click Me to Save the Folder");
    //String filename = "/tmp/Excel "+System.currentTimeMillis() +".xls" ;

try
{

     Class.forName(driver).newInstance();
         conn = DriverManager.getConnection(url+dbName,username,userPassword);

      Statement stmt = conn.createStatement();
      String strQuery = "select * from  Meter_List";

      ResultSet rs = stmt.executeQuery(strQuery);

          HSSFWorkbook hwb = new HSSFWorkbook();
          HSSFSheet sheet = hwb.createSheet("new sheet");

          HSSFRow rowhead = sheet.createRow((short)2);
          rowhead.createCell(0).setCellValue("SNo");
          rowhead.createCell(1).setCellValue("Meterid");
          rowhead.createCell(2).setCellValue("Consumerid");
          rowhead.createCell(3).setCellValue("Consumername");
          rowhead.createCell(4).setCellValue("LastReading");
          rowhead.createCell(5).setCellValue("Date");
          rowhead.createCell(6).setCellValue("Time");
          rowhead.createCell(7).setCellValue("Status");
          rowhead.createCell(8).setCellValue("Subzone");
          rowhead.createCell(9).setCellValue("Zone");

          int index=3;
          int sno=0;
          String name="";
           while(rs.next()) 
       {
                sno++;

                HSSFRow row = sheet.createRow((short)index);
                row.createCell(0).setCellValue(sno);
                row.createCell(1).setCellValue(rs.getInt("Meterid"));
                row.createCell(2).setCellValue(rs.getInt("Consumerid"));
                row.createCell(3).setCellValue(rs.getString("Consumername"));
                row.createCell(4).setCellValue(rs.getInt("lastreading"));
                row.createCell(5).setCellValue(rs.getDate("Date"));
                row.createCell(6).setCellValue(rs.getTime("Time"));
                row.createCell(7).setCellValue(rs.getString("Status"));
                row.createCell(8).setCellValue(rs.getString("Subzone"));
                row.createCell(9).setCellValue(rs.getString("Zone"));
                index++;
       }

          FileOutputStream fileOut = new FileOutputStream(filename);
          hwb.write(fileOut);
          fileOut.close();
          out.println("<b>Opening worksheet, please wait......</b><br>");

          Desktop dt=Desktop.getDesktop();
          dt.open(new File(filename));
          out.println("<b>Worksheet opened. It is saved as -\n\t\t </b><br>"+filename);
} 
catch ( Exception ex ) 
{  
    //out.println("Error :: "+ex);
    out.println("");
} 
%>
can you please help to solve this. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:14:56.430

要创建用户将下载的动态 Excel 文件，以下是基于您的代码的示例 servlet：

```
import javax.servlet.ServletConfig;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFCell;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.servlet.HttpServlet;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebServlet;

/**
 *
 * @author Alexandre Lavoie
 */
@WebServlet(name = "ExcelServlet", urlPatterns = { "/servlets/excel" })
public class ExcelServlet implements HttpServlet
{
    @Override
    public void doGet(HttpServletRequest p_oRequest, HttpServletResponse p_oResponse) throws IOException, ServletException
    {
        Connection conn = null;
        String url = "jdbc:mysql://localhost:3306/";
        String dbName = "s";
        String driver = "com.mysql.jdbc.Driver";
        String username = "root"; 
        String userPassword = "s";

        java.util.Date date = new java.util.Date();

        try
        {
            Class.forName(driver).newInstance();
            conn = DriverManager.getConnection(url+dbName,username,userPassword);

            Statement stmt = conn.createStatement();
            String strQuery = "select * from  Meter_List";

            ResultSet rs = stmt.executeQuery(strQuery);

            HSSFWorkbook hwb = new HSSFWorkbook();
            HSSFSheet sheet = hwb.createSheet("new sheet");

            HSSFRow rowhead = sheet.createRow((short)2);
            rowhead.createCell(0).setCellValue("SNo");
            rowhead.createCell(1).setCellValue("Meterid");
            rowhead.createCell(2).setCellValue("Consumerid");
            rowhead.createCell(3).setCellValue("Consumername");
            rowhead.createCell(4).setCellValue("LastReading");
            rowhead.createCell(5).setCellValue("Date");
            rowhead.createCell(6).setCellValue("Time");
            rowhead.createCell(7).setCellValue("Status");
            rowhead.createCell(8).setCellValue("Subzone");
            rowhead.createCell(9).setCellValue("Zone");

            int index=3;
            int sno=0;
            String name="";

            while(rs.next()) 
            {
                sno++;

                HSSFRow row = sheet.createRow((short)index);
                row.createCell(0).setCellValue(sno);
                row.createCell(1).setCellValue(rs.getInt("Meterid"));
                row.createCell(2).setCellValue(rs.getInt("Consumerid"));
                row.createCell(3).setCellValue(rs.getString("Consumername"));
                row.createCell(4).setCellValue(rs.getInt("lastreading"));
                row.createCell(5).setCellValue(rs.getDate("Date"));
                row.createCell(6).setCellValue(rs.getTime("Time"));
                row.createCell(7).setCellValue(rs.getString("Status"));
                row.createCell(8).setCellValue(rs.getString("Subzone"));
                row.createCell(9).setCellValue(rs.getString("Zone"));
                index++;
            }

            // Maybe I'm wrong on that exact mime type
            p_oResponse.setContentType("application/vnd.ms-excel");
            ServletOutputStream out = p_oResponse.getOutputStream();

            hwb.write(out);

            out.flush();
            out.close();
        } 
        catch(Exception ex) 
        {  
            ex.printStackTrace();
        } 
    }

    @Override
    public void init(ServletConfig sc) throws ServletException {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public ServletConfig getServletConfig() {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void service(ServletRequest sr, ServletResponse sr1) throws ServletException, IOException {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public String getServletInfo() {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void destroy() {
        //throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

添加到您的项目后，您可以使用以下 url 访问此文件：

```
http://yourserver.com/<context-name>/servlets/excel 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:13:19.297

```
<%@ page language="java" import="java.io.*" %>
<%@ page import="java.util.*" %>
<%@ page import="java.sql.*" %>
<%@ page import="javax.swing.JFileChooser" %>
<%@ page import="java.awt.Desktop"%>
<%@ page isErrorPage='true' %>
<%@ page import="java.text.SimpleDateFormat"%>
<%! 
    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "su";
    String driver = "com.mysql.jdbc.Driver";
    String username = "root"; 
    String userPassword = "s";

%>

<%
    String filename="";
    response.setContentType("application/vnd.ms-excel");
    response.setHeader("Content-Disposition","inline;filename=" + "excel_sheet"+".xls");
    response.setHeader("Cache-Control","no-cache");
    PrintWriter pout = response.getWriter();
    String date1="";
    String time="";
try
{

        Class.forName(driver).newInstance();
            conn = DriverManager.getConnection(url+dbName,username,userPassword);
            Statement stmt = conn.createStatement();
        String strQuery = "select * from  Meter_List";
        ResultSet rs = stmt.executeQuery(strQuery);
        int index=3;
            int sno=0;
            String name="";
                pout.print("SNo\t");
                pout.print("MeterID\t"  );
                pout.print("ConsumerID\t" );
                pout.print("ConsumerName\t" );

                pout.println();
            while(rs.next()) 

                     {
                                int meterid = rs.getInt("Meterid");
                        int consumerid=rs.getInt("Consumerid");
                        String consumername = rs.getString("Consumername");

                                sno++;
                        pout.print(sno + "\t");
                        pout.print(meterid + "\t" );
                        pout.print(consumerid + "\t" );
                                pout.print(consumername + "\t");

                        index++;
                        pout.println();

                     }

} 
catch ( Exception ex ) 
{  
    //out.println("Error :: "+ex);
    out.println("");
} 
%> 
```

# php - 在 PHP 中创建多站点数据库架构

> ID：13472664
> 
> 赞同：0
> 
> 时间：2012-11-20T11:54:24.737
> 
> 标签：php, sql, sites

我所说的多站点系统是指具有多个相同版本窗格的系统。Gamespot 就是一个例子，它会根据您在 uk.gamespot、us.gamespot 等网站上显示不同的发布日期甚至是不同的游戏。

选址在这里不是这个问题。问题在于开发的过程和易用性，以及如何选择或输入特定于站点的数据。各种系统组件也有可能不需要特定于站点，并且在极少数情况下，需要所有站点的所有数据都是可见的和可选择的，以用于报告和管理目的。

已经考虑了以下技术，尽管我们知道它们会起作用，但我们对它们实现的繁琐性质感到不满：

表视图 - 通过在每个表上为每个站点创建多个视图，我们可以加载特定于站点的要查询的数据。但是，内联 SQL 必须动态调用正确的视图，并且在创建新站点的情况下，必须创建一整套新视图。

SQL 修改 - 通过创建 SQL 中介函数，可以修改 SQL 以更改 where 子句并连接到仅选择特定于站点的数据的目标列。但是，我们认为通过这样的设备运行我们所有的查询可能会在未来出现严重问题，并且可能会限制我们查询的灵活性。

内联站点子句 - 尽管这是最麻烦和最烦人的实现，但如果我们能够在我们的编码方式上执行标准，它将被证明是最可靠的。尽管这可能是最可靠的，但对我们的开发人员来说也是最不吸引人的，这意味着为几乎每一个查询编写站点子句。

因此，与其寻找在系统的更高级别上实施该系统的最佳方法，我们正在尝试找到一种方法，该方法将允许在基础级别上相当简单地实施特定于站点的数据选择。

如果这个问题在任何方面都过于宽泛，请告诉我，我会尝试进一步缩小范围。

第一次编辑：

就表格而言，跨站点的数据类型是相同的。用户表将在所有站点之间共享，并且每个用户只能访问一个、部分或所有站点。

让我们更进一步地看 Gamespot 的例子。一位用户负责管理英国版本。

有关游戏及其评论的信息来自所有站点均可访问的记录，因为这是全球相关信息。但是，假设发布日期来自另一个特定于站点的表。以典型方式检索有关游戏的信息，但是获取发布日期需要一些额外的代码才能为正确的站点获取正确的信息。

关于用户，无论用户当前管理的哪个站点，都应该是选择和插入的目标站点。

可以想象，发布日期不是核心表，每个日期不能简单地直接映射到其各自的游戏。

（我并不暗示对 Gamespot 的运作有任何了解，这个例子是假设的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:08:55.733

我认为这里没有一个普遍的答案，因为我们对您正在构建的实际站点了解不够。以下是一些对最佳设计有重大影响的问题示例：

1.  网站之间的内容大部分是重叠的，还是大部分不同？
2.  “通用”内容和“特定”内容之间有简单的区分吗？（即内容要么对所有站点通用，要么特定于一个站点）。还是需要更灵活？
3.  您预计需求会随着时间的推移而发展多少？

我的建议是将你的精力集中在正确的*表结构*上来存储你的数据。如果你做对了，一个好的软件设计应该自然而然地从中流露出来。

当然，请随时提出您在此过程中遇到的任何具体问题！

**编辑：**在您的问题更新后，我仍然认为有很多歧义，只有在您制定具体设计时才能解决。但是，如果您想快速回答，我认为内联站点子句是您建议的三个选项中最好的。其他增加了不必要的复杂层。

我不明白为什么内联站点子句“麻烦”和“烦人”。它们不会在好的设计中引入重复，因为您可以在 PHP 中以编程方式处理它们。

# c# - 如何从 TypeConverter 中获取对应的类型？

> ID：13472665
> 
> 赞同：1
> 
> 时间：2012-11-20T11:54:25.340
> 
> 标签：c#, .net, typeconverter

在 .NET 中，我知道我可以获得给定类型的[TypeConverter](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)，如下所示

```
TypeDescriptor.GetConverter(typeof(DateTime)) 
```

但是，如果通过其他方式给定类型转换器对象，我怎么知道它转换为什么类型？

# objective-c - 如何为 UIImage 的 drawAsPatternInRect 指定图像偏移量

> ID：13472669
> 
> 赞同：2
> 
> 时间：2012-11-20T11:54:39.213
> 
> 标签：objective-c, ios, uiimage, drawing

使用 UIImage 类的 drawAsPatternInRect 时是否可以指定图像的初始偏移量？

为了澄清我真正需要的东西：假设我正在使用 drawAsPatternInRect 在视图的中心绘制图像。现在，如果我移动这个矩形区域，绘制的背景仍然会填充整个区域，但它的坐标是固定的，即它们不会随着矩形移动，这使得绘图区域看起来只是一个透明的“窗口”静态背景。我想要实现的是让它看起来像背景与区域本身一起移动。

我尝试过使用[此处](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_patterns/dq_patterns.html#//apple_ref/doc/uid/TP30001066-CH206-BBCIAJCH)描述的功能，但没有取得多大成功。

任何帮助都会非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T16:17:52.023

```
CGFloat hOffset = ...
CGFloat vOffset = ...

CGContextSetPatternPhase(context, CGSizeMake(hOffset, vOffset)); 
```

在调用 drawAsPatternInRect 之前调用它

# symfony - symfony2 登录时凭据错误

> ID：13472676
> 
> 赞同：0
> 
> 时间：2012-11-20T11:55:10.357
> 
> 标签：symfony

我一直在尝试让数据库登录系统与 Symfony2 一起工作。我已经阅读了文档，但我现在完全不知道该怎么做......

每次我尝试登录时，我都会得到“坏凭据”。

安全.yml

```
security:
    encoders:
        D\UserBundle\Entity\User:
            algorithm:       sha512
            encode_as_base64: false
            iterations:      1

role_hierarchy:
    ROLE_ADMIN:      ROLE_USER
    ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

providers:
    user_db:
        entity: { class: DUserBundle:User}

firewalls:
    secured_area:
        pattern:   ^/
        anonymous: ~
        form_login:
            login_path: /login
            check_path: /login_check
        logout:
            path:  /logout
            target:

access_control:
    - { path: ^/admin, roles: ROLE_ADMIN }
    - { path: ^/user, roles: ROLE_USER } 
```

用户存储库.php

```
<?php

namespace D\UserBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\NoResultException;

class UserRepository extends EntityRepository implements UserProviderInterface
{
    public function loadUserByUsername($username)
    {

        $q = $this
            ->createQueryBuilder('u')
            ->where('u.username = :username OR u.email = :email')
            ->setParameter('username', $username)
            ->setParameter('email', $username)
            ->getQuery()
        ;

        try {
            // The Query::getSingleResult() method throws an exception
            // if there is no record matching the criteria.
            $user = $q->getSingleResult();
        } catch (NoResultException $e) {
            throw new UsernameNotFoundException(sprintf('Unable to find an active admin AcmeUserBundle:User object identified by "%s".', $username), null, 0, $e);
        }

        return $user;
    }

    public function refreshUser(UserInterface $user)
    {
        $class = get_class($user);
        if (!$this->supportsClass($class)) {
            throw new UnsupportedUserException(sprintf('Instances of "%s" are not supported.', $class));
        }

        return $this->loadUserByUsername($user->getUsername());
    }

    public function supportsClass($class)
    {
        return $this->getEntityName() === $class || is_subclass_of($class, $this->getEntityName());
    }
} 
```

[用户.php](http://pastebin.com/hK7hfgBq)

[用户控制器.php](http://pastebin.com/CBt3cRza)

那是我的数据库，表（用户）

```
id:5
username:Pawel
salt:5633267d072cd3119af5270d64b4b45d
password:test
email:test@test.pl
is_active1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:51:23.393

你的 security.yml 应该是这样的

```
providers:
        user_db:
            entity: { class: DUserBundle:User, property: username } 
```

哟根本不需要 UserRepository 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T22:10:52.927

真的很晚很抱歉，但由于问题还没有回答......

我不确定您是否可以将实体的别名用作提供者的“类”值。

也许尝试使用完整的命名空间实体名称进行设置：

```
volunteers:
    entity:
        class: D\UserBundle\Entity\User 
```

但我认为主要问题是您的密码应该 - 至少，并且可能必须 - 在您的数据库中加密。如果您想使用您在 security.yml 配置文件中定义的安全编码器，正确的方法（根据[文档](http://symfony.com/doc/current/book/security.html#encoding-the-user-s-password)）是在您的注册表单验证后对其进行管理。

假设您有一个用户注册表单：

```
# Any routing file
d_userbundle_register:
    pattern: /register
    defaults:
        _controller: DUserBundle:Users:register
    requirements:
        _method: get

d_userbundle_register_check:
    pattern: /register_check
    defaults:
        _controller: DUserBundle:Users:registerCheck
    requirements:
        _method: post 
```

和你的控制器的 registerCheckAction ：

```
// UsersController.php
public function registerCheckAction()
{
    $request = $this->getRequest();

    $user = new D\UserBundle\Entity\User();
    $registrationForm = $this->createForm(new D\UserBundle\Form\UserType(), $user);

    $registrationForm->bind($request);

    if ($registrationForm->isValid()) {
        $em = $this->getDoctrine()->getManager(); // use getEntityManager() instead of getManager() for old symfony2 versions

        // Get the factory encoder service
        $encoderFactory = $this->get('security_encoder.factory');
        // Retrieve the algorithms, iterations and everything defined in your security.yml file
        $encoder = $encoderFactory->getEncoder($user);
        // Encrypt the password with the user's plaintext password AND the user salt
        $encryptedPassword = $encoder->encodePassword($user->getPassword(), $user->getSalt());
        // Then set the user's encrypted password :)
        $user->setPassword($encryptedPassword);

        $em->persist($user);
        $em->flush();

        // Thanks the user
        $request->getSession()->getFlashBag()->add('success', 'Heyoh, welcome on board !');
        return $this->redirect($this->generateUrl('d_userbundle_login'));
    }

    return $this->render('DUserBundle:User:registration.html.twig', array(
        'registration_form' => $registrationForm->createView()
    ));
} 
```

# excel - 更快地查找和复制值

> ID：13472680
> 
> 赞同：0
> 
> 时间：2012-11-20T11:55:18.233
> 
> 标签：excel, find, vba

![在此处输入图像描述](../Images/9ea03b2d54c0d06434b2c37a9bc82974.png)

你好，我正在做一个复制列上的值的宏，VALUES1，VALUES2，VALUES3，如果当文章相同时它不为空。

我将拥有第一个电子表格，并且我希望宏返回第二个电子表格。

我已经设法做到了：

```
Sub test()

Dim i, last, j, x As Integer
Dim R As Range

last = Sheets("List2").Range("A100000").End(xlUp).Row - 2

For i = 0 To last

    Set R = Sheets("List2").Range("A2")

        If Not WorksheetFunction.CountIf(Sheets("List2").Columns(1), _
        Sheets("List2").Range("A2").Offset(i, 0).Value) = 0 Then

            For j = 1 To WorksheetFunction.CountIf(Sheets("List2").Columns(1), _

                Sheets("List2").Range("A2").Offset(i, 0).Value)
                Set R = Sheets("List2").Columns(1).Find(Sheets("List2").Range("A2"). _
                Offset(i, 0).Value, R, LookAt:=xlWhole)

                    For x = 0 To 2

                        If Not Sheets("List2").Range("B2").Offset(i, x).Value = "" Then

                            R.Offset(0, "1" + x).Value = Sheets("List2"). _ 
                            Range("B2").Offset(i, x).Value

                        End If
                    Next x
            Next j
        End If
Next i

End Sub 
```

但是这个问题需要很长时间，因为我有大约 10.000 行和 20 列，而且电子表格不是按顺序排列的，所以可能是有一个混乱，比如 (A, B, B, A, .. .)

有没有办法让它更快更好？？？

非常感谢。石碑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:14:49.867

这是一个非常简单的解决方案，其中包含针对您的问题的公式：

```
Sheet2!A1=Sheet1!A1
Sheet2!B1=SUMIF(Sheet1!$A:$A,Sheet2!$A1,Sheet1!B:B)

Sheet2!C1=SUMIF(Sheet1!$A:$A,Sheet2!$A1,Sheet1!C:C)
Sheet2!D1=SUMIF(Sheet1!$A:$A,Sheet2!$A1,Sheet1!D:D) 
```

将这些公式放在左侧的单元格中`=`并向下复制。您真的只需要前两个，因为您也可以将第二个复制到右侧。

您需要按文章对 Sheet1 进行排序。

就是这样。

当然，有时可能只需要使用 VBA 来实现它。通常使用 VBA 处理大量单元格的最快方法是使用范围的数组副本。使用工作表函数和循环访问单个单元格引用会大大减慢您的速度。

*编辑：*

这将是我的 VBA 解决方案

```
Public Sub Demo()
  Dim arrRange() As Variant
  Dim arrRangeResult() As Variant
  Dim i As Long
  Dim j As Long
  Dim copyVal As Variant
  Dim copyCond As Variant
  Dim copyCol As Long

  'create two copies of the origin data
  arrRange = Range("A:D")
  arrRangeResult = Range("A:D")

  'loop through first data-copy, downwards through the articles
  For i = LBound(arrRange, 1) + 1 To UBound(arrRange, 1)
    'stop loop, if no article was found
    If arrRange(i, 1) = "" Then Exit For
    'store current article ID
    copyCond = arrRange(i, 1)
    'loop sideways through value-columns
    For j = LBound(arrRange, 2) + 1 To UBound(arrRange, 2)
      'store value & column, when found
      If arrRange(i, j) <> "" Then
        copyVal = arrRange(i, j)
        copyCol = j
        Exit For
      End If
    Next j

    'loop through output array and paste value
    For j = LBound(arrRangeResult, 1) + 1 To UBound(arrRangeResult, 1)
      If arrRangeResult(j, 1) = copyCond Then
        'paste-down found value to all occurences of article
        arrRangeResult(j, copyCol) = copyVal
      ElseIf arrRangeResult(j, 1) = "" Then
        'early stop, when no article ID is found
        Exit For
      End If
    Next j
  Next i

  'create output
  Range("K:N") = arrRangeResult
End Sub 
```

# c - Netbeans中的gcc链接错误

> ID：13472682
> 
> 赞同：1
> 
> 时间：2012-11-20T11:55:19.847
> 
> 标签：c, netbeans, linker

我正在尝试编译 ac 文件，该文件使用 cygwin 在 netbeans 中打开一个通用对话框。相关代码为：

```
OPENFILENAME ofn;
char szFileName[MAX_PATH] = "";

ZeroMemory(&ofn, sizeof(ofn));

ofn.lStructSize = sizeof(ofn); // SEE NOTE BELOW
ofn.hwndOwner = hwnd;
ofn.lpstrFilter = "Text Files (*.txt)\0*.txt\0All Files (*.*)\0*.*\0";
ofn.lpstrFile = szFileName;
ofn.nMaxFile = MAX_PATH;
ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY;
ofn.lpstrDefExt = "txt";

if(GetOpenFileName(&ofn))
{
    // Do something usefull with the filename stored in szFileName 
} 
```

编译时，我得到：

```
undefined reference to `__imp__GetOpenFileNameA@4' 
```

据我了解，comdlg 库未正确链接，但我无法正确连接。有谁知道如何将库添加到链接器？

# python - Mongo DB：如何将一组文档转换为单个文档？

> ID：13472683
> 
> 赞同：0
> 
> 时间：2012-11-20T11:55:20.297
> 
> 标签：python, mongodb

```
{
 "teachers" : [
               {"name": "Lucy", "id": 3, course: "history"}, 
               {"name": "Mark", "id": 6, "course": "maths"}, 
               {"name": "Joan", "id": 20, course: "French"} 
               ] 
} 
```

该文件在“学校”收藏中。我一直在尝试使用

```
db.school.find({teachers:{id:3}}) 
```

我也试过

```
db.school.find({teacher.id:3}) 
```

但我知道它不起作用，因为 mongo 无法查看嵌入式数组。因此，我想将这些嵌入的文档变成单独的文档。也就是说，删除嵌入和“教师”键，为每个教师创建一个单独的文档。

最终的“学校”系列将是

```
{"name": "Lucy", "id": 3, "course": "history"}, 
{"name": "Mark", "id": 6, "course": "maths"}, 
{"name": "Joan", "id": 20, "course": "French"} 
```

我想用 python 来做，并将新文档保存到一个集合中。

***编辑***

这就是我现在想出的：

```
import pymongo
import sys

connection = pymongo.Connection("mongodb://localhost", safe=True)

db = connection.hello
shows = db.school

for doc in db.school:
    for indiv in "teachers":
            try:
            db.individual.insert(indiv)
        except:
            print "Unexpected error", sys.exc_info()[0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:45:28.237

顺便说一句，Mongodb 可以找到数组中的嵌入文档：

```
db.school.find({ 'teachers.id' : 3 }); 
```

[您可以在mongodb 文档](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)中了解有关点符号的更多信息。

如果目标是仅返回嵌入文档，您可以使用[聚合](http://docs.mongodb.org/manual/reference/aggregation/)请求：

```
db.school.aggregate(
  {$match: { 'teachers.id' : 3 }}, 
  {$unwind : '$teachers'}, 
  {$project: { 
    _id: 0, 
    name: '$teachers.name',
    id: '$teachers.id', 
    course: '$teachers.course' 
  }}, 
  {$match: {id:3}}
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:30:27.237

```
school_records = db.school.find()
for i in school_records:
    for teacher in i['teachers']:
        db.individual.insert(teacher) 
```

那这个呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:35:10.037

您可以使用 mongo v2.2+ 中的聚合命令（在 pymongo 中）：

```
 fagg=db.school.aggregate([{$unwind: "$teachers"},
    {$project: {name: "$teachers.name", 
    id: "$teachers.id", course: "$teachers.course"}}])
    fagg.result.forEach(function(o){
    db.teachers.insert({_id: o.id, name: o.name, course: o.course})}) 
```

# php - phpqrcode 图像未被识别为活动 url

> ID：13472684
> 
> 赞同：0
> 
> 时间：2012-11-20T11:55:21.110
> 
> 标签：php, url, hyperlink, eps

我制作了一个 PHP 脚本，它从数据库中获取多个 URL，并使用 phpQrCode 库输出 QrCode。

二维码以 eps 文件的形式输出，并由我们的打印服务打印在讲义上。

这一切都很好，但是在我的手机上读取的一些二维码会直接将我带到页面，但有些只将页面的 URL 作为字符串提供给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:04:46.303

OP能够找到解决他自己问题的方法。它是：

> 我的用户在粘贴 URL 时在字符串的开头留下了一个空格，因此库正在做它应该做的事情，我将使用一些 ltrim 和 rtrim 来解决这个问题。

# knockout.js - 正确上下文中的 Knockoutjs keyup 绑定

> ID：13472685
> 
> 赞同：1
> 
> 时间：2012-11-20T11:55:25.853
> 
> 标签：knockout.js, knockout-2.0

我的视图模型有一系列停靠点。每个站点都有一系列的接送服务。我想为 addPickup 添加键盘快捷键。我的问题是如何在停止的情况下触发它 - 按 ctrl-a 不会将拾取添加到第一个停止或最后一个停止，而是添加到具有“焦点”的一个。停靠点的数量是动态的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:50:58.840

这与事件按键绑定“有效”

```
<div data-bind="event: {  keypress: keypress }"> 
```

[http://jsfiddle.net/w5URD/](http://jsfiddle.net/w5URD/)

问题是您必须将任何输入或按钮集中在 div 内以使其可触发，您可能必须使用自定义绑定来解决此问题

# git - 将 git repo 克隆到非空文件夹

> ID：13472687
> 
> 赞同：4
> 
> 时间：2012-11-20T11:55:45.197
> 
> 标签：git, git-merge, git-clone, git-remote

我在 git 下有一个大型 C 项目。其他人有相同的 C 项目，但他没有使用 git。

我们俩都是从同一个基线开始的，但我只是做了一个`git init`/`git add .`并开始使用 git。

我想将我的 git 管理更改合并到另一个分支并在他的项目文件夹中初始化 git，这样我们就可以同步并使用 git。

您将如何在 git 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:41:00.550

你的朋友应该`$ git init`和他`$ git add .`的`$ git commit -a`代码。

你们两个应该有相同的远程存储库：（`$ git remote add origin <your-repository-url>` 使用 GitHub 看起来像`https://github.com/username/repository.git`）

你的朋友必须`$ git pull origin master` （它会将远程分支合并到他的本地分支）

他只需要`$ git push -u origin master`这样你就可以`$ git pull`了，应该没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:37:03.207

首先将您的 repo 克隆到一个空白目录中。

然后，在新的 repo 中，为您朋友的工作创建并签出一个新分支。分支点应该是你们都具有相同来源的最后一次提交（可能是您的初始提交）。

然后，您将他的资源复制到新树中。Git status/diff 现在应该显示他所做的修改。

在那个分支上做`git commit`，你应该有一个包含两个开发分支的仓库。

将您`git merge master`的工作（位于“master”分支上）合并到您的同事的新分支中。玩得开心解决冲突，提交，你就完成了。

如果您希望将更改返回到您自己的仓库中，那么您可以使用URL`pull`或从他的仓库中进行更改，如果您可以通过 ssh 访问机器，或者您可以直接看到它。`fetch``ssh://``file:///`

# php - Wordpress：使用 the_post_thumbnail() 自定义字段图像

> ID：13472692
> 
> 赞同：0
> 
> 时间：2012-11-20T11:56:05.297
> 
> 标签：php, wordpress

我使用自定义字段`photo`上传图像。在前端，我使用以下代码获取其 URL：

```
$imgid=get_post_meta($post->ID, 'photo', true);
$img=wp_get_attachment_image_src($imgid);
$imgurl=$img[0]; 
```

现在我想使用 the_post_thumbnail() 的标准 WP 尺寸（缩略图、中号、...）来显示它。

我尝试了一些不起作用的解决方案：

```
the_post_thumbnail('medium', array('src' => $imgurl)); 
```

或者

```
the_post_thumbnail('medium', $img); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:01:52.873

只需将大小作为 的第二个参数传递[`wp_get_attachment_image_src()`](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)，如下所示：

```
$imgid = get_post_meta($post->ID, 'photo', true);
$img = wp_get_attachment_image_src( $imgid, 'thumbnail' );
$imgurl = $img[0]; 
```

# deployment - SSIS：如何将项目连接管理器移动到包中

> ID：13472695
> 
> 赞同：3
> 
> 时间：2012-11-20T11:56:13.337
> 
> 标签：deployment, ssis, connection

我有一个 2012 SSIS 项目，在项目级别定义了许多连接管理器。该项目还包括许多引用这些连接管理器的包。现在我想将我的项目转换为部署模型，但向导指定我需要在项目中删除连接管理器，这意味着将连接管理器移动到包中。

如何将项目级连接管理器移动到我的包中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T14:35:25.313

您需要将项目从项目部署模型转换为包部署模型。

![在此处输入图像描述](../Images/48cdd5066f50af57fe31e05ac3780f75.png)

根据您的描述，您看到这样的错误

![在此处输入图像描述](../Images/3c96d6003ccb1a75d59e813230b0696c.png)

这意味着您需要进入每个包（对不起），并且对于每个表明它是`(project)`一级的连接管理器，您将右键单击并请求将其转换为包级别。

![在此处输入图像描述](../Images/272c89a9908db61295bbc862560f95ec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T19:33:43.550

如果您查看项目的参数并显示为空，并且您只有包级别的连接，您可能会发现自己对此消息感到困惑。如果您曾经有过项目连接，则可能会发生这种情况——包后面的 XML 保留了已删除的信息。（这在 Visual Studio 2015 的 SSDT 中。）在这种情况下，纠正它的方法是手动编辑 XML。

1.  **备份包！**这里出错的可能性很高，一个错字就可能导致设计师无法向您展示包装。
2.  在解决方案资源管理器中右键单击包，然后选择查看代码。
3.  使用 Find，搜索找到 Project Variables 开始标记。它看起来像这样：`<DTS:PackageParameters>`
4.  选择标签和直到结束标签的所有内容，这将是`</DTS:PackageParameters>`并删除它。
5.  保存文件并关闭它。
6.  返回设计器并继续更改部署模型，如上面@billinkc 所述。

那应该这样做。

乔伊

# sql-server - 确定增值税税率的 SQL 查询

> ID：13472701
> 
> 赞同：2
> 
> 时间：2012-11-20T11:56:22.993
> 
> 标签：sql-server, sql-server-2005

我希望创建一个包含以下列的 3 列 VAT_Parameter 表：

```
VATID, VATRate, EffectiveDate 
```

但是，我不知道如何确定发票日期适用的增值税率。

例如，如果表中填充了：

```
1, 17.5, 1/4/1991
2, 15, 1/1/2009
3, 20, 4/1/2011 
```

例如，我有一张日期为 2010 年 4 月 5 日的发票，SQL 查询如何选择该日期的正确增值税率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:09:48.797

```
select top 1 *
from VatRate
where EffectiveDate<=@InvoiceDate
order by EffectiveDate desc 
```

或者，使用发票表

```
select id, invoicedate, rate
from
(
    select 
        inv.id, inv.invoicedate, vatrate.rate, ROW_NUMBER() over (partition by inv.id order by vatrate.effectivedate desc) rn
    from inv
        inner join vatrate
            on inv.invoicedate>=vatrate.effectivedate
) v     
where rn = 1 
```

PS。税率变化时的增值税税率规则比发票日期更复杂。例如，供应日期也很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:09:16.973

我以前遇到过这种事情。我能想到的选择有两种：

**1.**展开表格以具有两个日期：EffectiveFrom 和 EffectiveTo。（您必须对这些中的每一个是排他的还是包含的有一个约定——但这在使用日期时总是一个问题）。这引发了验证表总体是否有意义的问题。例如，您最终不会得到从 2000 年 1 月 1 日到 2002 年 1 月 1 日生效的 Rate1 的一行，以及从 2001 年 10 月 30 日到 2003 年 1 月 1 日生效的 Rate2 的另一行（重叠）。或未覆盖的时间间隔，不适用任何费率。由于这听起来像是一个变化非常缓慢的表格，偶尔会填充（由知道自己在做什么的人？），这可能是最好的解决方案。获得有效利率的 SQL 将很简单：

```
SELECT VATRate FROM VATTable WHERE (EffectiveFrom<=[YourInvoiceDate]) AND (EffectiveTo>=[YourInvoiceDate]) 
```

或者

**2.**使用您现有的表结构，并使用一些稍微复杂的 SQL 来确定发票的有效汇率。

使用您现有的结构，这样的事情会起作用：

```
SELECT VATTAble.VATRate FROM
    VATTable
INNER JOIN
    (SELECT Max(EffectiveDate) AS LatestDate FROM VATTable WHERE EffectiveDate<= 
    YourInvoiceDate) latest
ON VATTable.EffectiveDate=latest.LatestDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T23:05:22.923

一个更简单的选择可能只是对您的数据结构进行非规范化并将增值税率存储在发票表本身中。

# maven - 解决 Maven 无法检索插件描述符和构建失败

> ID：13472708
> 
> 赞同：2
> 
> 时间：2012-11-20T11:57:08.313
> 
> 标签：maven, netbeans

## Maven 错误

我尝试为正确安装 Maven 做教程，但是每当我尝试运行命令“ **mvn archetype: generate** ”时总是给我这个错误。您是否尝试过在**cmd**和**netbeans**中运行，并且错误是相同的。我已经搜索过，但我只出现问题或代理或目录。

> cd C:\Users\PC3002\Documents\NetBeansProjects; "JAVA_HOME=C:\Program Files\Java\jdk1.7.0_09" C:\Users\PC3002\AppData\Roaming\NetBeans\7.2\maven\bin\mvn.bat -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId =maven-archetype-quickstart -DarchetypeVersion=1.1 -DarchetypeRepository= [http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2) -DgroupId=br.eti.teste -DartifactId=TestMaven -Dversion=1.0 -Dpackage=br.eti.teste -Dbasedir=C:\Users\PC3002\Documents\NetBeansProjects -Darchetype.interactive=false --batch-mode archetype:generate 扫描项目...下载：[http ://repo.maven.apache.org/maven2/org /apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom) 无法检索 org.apache.maven.plugins:maven-clean-plugin:2.4.1 的插件描述符：插件 org.apache.maven.plugins:maven-clean-plugin:2.4.1 或其依赖项之一不能已解决：无法读取 org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1 的工件描述符下载：[http ://repo.maven.apache.org/maven2/org/apache/maven/plugins /maven-install-plugin/2.3.1/maven-install-plugin-2.3.1.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/2.3.1/maven-install-plugin-2.3.1.pom) 无法检索 org.apache.maven.plugins:maven-install-plugin:2.3.1 的插件描述符：插件 org.apache .maven.plugins:maven-install-plugin:2.3.1 或其依赖项之一无法解析：无法读取 org.apache.maven.plugins:maven-install-plugin:jar:2.3.1 的工件描述符正在下载：[http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-deploy-plugin/2.7/maven-deploy-plugin-2.7.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-deploy-plugin/2.7/maven-deploy-plugin-2.7.pom) `无法检索 org.apache 的插件描述符。 maven.plugins:maven-deploy-plugin:2.7：插件 org.apache.maven.plugins:maven-deploy-plugin:2.7 或其依赖项之一无法解析：无法读取 org.apache.maven 的工件描述符。插件：maven-deploy-plugin:jar:2.7 下载：[http ://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-site-plugin/3.0/maven-site-plugin-3.0 .pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-site-plugin/3.0/maven-site-plugin-3.0.pom) 无法检索 org.apache.maven.plugins:maven-site-plugin:3.0 的插件描述符：插件 org.apache.maven.plugins:maven-site-plugin:3.0 或其依赖项之一无法解析：无法解决读取 org.apache.maven.plugins:maven-site-plugin:jar:3.0 的工件描述符下载：[http ://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-antrun-plugin /1.3/maven-antrun-plugin-1.3.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-antrun-plugin/1.3/maven-antrun-plugin-1.3.pom) 无法检索 org.apache.maven.plugins:maven-antrun-plugin:1.3 的插件描述符：插件 org.apache.maven.plugins:maven-antrun-plugin:1.3或其依赖项之一无法解析：无法读取 org.apache.maven.plugins:maven-antrun-plugin:jar:1.3 的工件描述符下载：[http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-assembly-plugin/2.2-beta-5/maven-assembly-plugin-2.2-beta-5.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-assembly-plugin/2.2-beta-5/maven-assembly-plugin-2.2-beta-5.pom) 检索失败org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5 的插件描述符：插件 org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5 或其依赖项之一不能已解决：无法读取 org.apache.maven.plugins:maven-assembly-plugin:jar:2.2-beta-5 的工件描述符下载：[http ://repo.maven.apache.org/maven2/org/apache/ maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom) 无法检索 org.apache.maven.plugins:maven-dependency-plugin:2.1 的插件描述符：插件 org.apache.maven.plugins:maven-dependency-plugin:2.1 或其依赖项之一无法解析：无法解析读取 org.apache.maven.plugins:maven-dependency-plugin:jar:2.1 的工件描述符下载：[http ://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-release-plugin /2.0/maven-release-plugin-2.0.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-release-plugin/2.0/maven-release-plugin-2.0.pom) 无法检索 org.apache.maven.plugins:maven-release-plugin:2.0 的插件描述符：插件 org.apache.maven.plugins:maven-release-plugin:2.0或其依赖项之一无法解析：无法读取 org.apache.maven.plugins:maven-release-plugin:jar:2.0 的工件描述符下载：[http://repo.maven.apache.org/maven2/org/codehaus/mojo/maven-metadata.xml](http://repo.maven.apache.org/maven2/org/codehaus/mojo/maven-metadata.xml) 下载：[http ://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven -metadata.xml](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-metadata.xml) 无法将元数据 org.apache.maven.plugins/maven-metadata.xml 从/到中央传输（[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)）：连接到[http://repo.maven .apache.org 被](http://repo.maven.apache.org)拒绝 无法将元数据 org.codehaus.mojo/maven-metadata.xml 从/到中央传输（[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)）：连接到[http://repo.maven。 apache.org](http://repo.maven.apache.org)拒绝从[http://repo.maven.apache.org/maven2传输 org.apache.maven.plugins/maven-metadata.xml 失败](http://repo.maven.apache.org/maven2)被缓存在本地存储库中，直到中央的更新间隔过去或强制更新后才会重新尝试解析。原始错误：无法将元数据 org.apache.maven.plugins/maven-metadata.xml 从/向中央传输（[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)）：连接到[http://repo.maven。 apache.org拒绝从](http://repo.maven.apache.org)[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)传输 org.codehaus.mojo/maven-metadata.xml 失败被缓存在本地仓库中，直到中央的更新间隔才会重新尝试解析已过期或强制更新。原始错误：无法将元数据 org.codehaus.mojo/maven-metadata.xml 从/向中央传输（[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)）：连接到[http://repo.maven.apache.org](http://repo.maven.apache.org)被拒绝

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:51:01.070

问题是由于代理设置造成的，请尝试在以下位置编辑代理配置：

系统上的 settings.xml 文件（如果你在命令行上运行 maven）
你 ide 上的 settings.xml （如果你通过它运行 maven）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-12T21:08:45.213

我有同样的问题`Windows`

并且由于我在`settings.xml`文件中的代理配置已更改，因此它起作用了

因此，找到并编辑文件夹内的`\conf`文件，例如：`C:\Program Files\apache-maven-3.2.5\conf`

```
<proxies>
    <!-- proxy
     | Specification for one proxy, to be used in connecting to the network.
     | -->
    <proxy>
      <id>optional</id>
      <active>true</active>
      <protocol>http</protocol>
      <username>jorgesys</username>
      <password>supercalifragilisticoespialidoso</password>
      <host>proxyjorgesys</host>
      <port>8080</port>
      <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
    </proxy>       
  </proxies> 
```

*   就我而言，我不得不从港口`80`到`8080`
*   如果您无法编辑位于内部`/program files`的此文件，则可以复制，编辑该文件并替换位于`/program files`文件夹中的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-21T12:20:41.730

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd">

     <proxies>
       <proxy>
          <active>true</active>
          <protocol>http</protocol>
          <host>proxy.somewhere.com</host>
          <port>8080</port>
          <username>proxyuser</username>
          <password>somepassword</password>
          <nonProxyHosts>www.google.com|*.somewhere.com</nonProxyHosts>
        </proxy>
      </proxies>

    </settings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-27T11:17:23.103

如果您没有在插件中定义版本 ID，您可能会收到此错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-06-04T12:56:03.947

阅读并理解它所指向的错误......它表示在路径 [local (C:\Users\User.m2\repository) 上找不到原型

所以这是解决方案 转到 Users/user/.m2/repository 文件夹，您会看到有很多文件夹已经可用，其中一个是“org”，所以现在进入“org\apache\maven”，您会看到原型文件夹可用，所以从这里复制它并粘贴到我们的系统正在寻找这个文件夹的 .m2/repository/ 文件夹下....

# java - 无法将元素添加到哈希集顶部

> ID：13472710
> 
> 赞同：3
> 
> 时间：2012-11-20T11:57:10.553
> 
> 标签：java, arraylist, hashset

我正在使用 arraylist 在 jsp 中填充选项集合。现在我不需要重复的元素。所以我想使用哈希集。如果我使用 hashset ，不像 arraylist 如果我想显示一个空白，如果我添加一个空白作为第一个元素，然后添加其他数据，空白显示在组合框的末尾。当我使用arraylist时，如果我添加空白作为第一个元素，它会在开始时显示，这就是我需要的。

谁能帮我在 hashset 的开头添加空白？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T12:00:30.883

`HashSet`不是 a 的有序版本`Set`。`LinkedHashSet`当您需要订购的`Set`和需要排序的时使用`TreeSet`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T12:03:37.813

如前所述，HashSet 没有排序。您要么需要：

1.  排序的变体（[LinkedHashSet](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)基于*插入顺序*的顺序，或[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)根据元素的*自然顺序排序*）
2.  根据特定于该用例的标准对迭代进行排序

# jquery - 无法使用 Jquery 获得有效的动态表单

> ID：13472713
> 
> 赞同：0
> 
> 时间：2012-11-20T11:57:22.670
> 
> 标签：jquery, dhtml

我正在用 jQuery 制作一个动态的 html 表单。
它是一种用于测量每个房间的空气以进行通风的表格。

我需要两个输入：房间名称和风量值。
我的任务是用 Select 和 Input 以及 Remove 按钮动态添加一行。稍后它应该提交给 php 处理器。

我的计划是克隆 div 并且看起来它可以工作，但我遇到了 Select 输入字段的问题。
原始 Div 中的选择菜单有效，但 i clone div Select 值不会改变。我正在四处寻找解决方案，但我还没有找到答案。通过按删除按钮，我需要使用元素删除当前 DIV。这也不起作用:)

我不确定我是否以正确的方式实现这一切，因为我刚刚开始使用 jQuery。
谢谢你的帮助！

这是表单的代码：

```
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript"> 

function Addonemoretilluft() {
    $('#tilluft_line').clone().insertAfter("#tilluft_line"); 
}

function Removetilluft() {
    $('#page').remove("#tilluft_line"); 
}

$(document).ready(function() {     
    $("#add_tilluft").click(function(){
      Addonemoretilluft();
    });  

    $("#remove_tilluft").click(function(){
      Removetilluft();
    });    
});
</script>  
</head>
<body>
<div class="page" data-iscroll="" id="page">      
               <form action="handle.php" method="post" data-ajax="false" id="tilluft_form"> 

                  <div id="tilluft_line" class="ui-grid-b">
                        <div id="select_value" class="ui-block-a">
                         <select name="tilluft_name[]" id="tilluft_name[]" data-mini="true">
                            <option value="val1">Val 1</option>
                            <option value="val2">Val 2</option>
                            <option value="val3">Val 3</option>
                            <option value="val4">Val 4</option>    
                         </select>  
                        </div>
                        <div id="input_value" class="ui-block-b">
                            <input name="tilluft_value[]" id="tilluft_value[]" data-mini="true">
                        </div>
                        <div class="ui-block-c" style="width:35px;">
                            <a href="#" id="remove_tilluft" data-role="button" data-icon="delete" data-iconpos="notext">Delete</a> 
                        </div>
                    </div>
                    <a id="add_tilluft"  href="#" data-role="button" data-icon="add" data-mini="true" data-inline="true">Add one more</a> 
               </form>  
               <input type="submit" form="tilluft_form" value="Submit Form" data-mini="true" data-inline="true"/>
          </div>​
</body> 
```

测试版[http://jsfiddle.net/D4MPu/](http://jsfiddle.net/D4MPu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:32:39.423

您的主要问题是，当您克隆该行时，您正在复制一个 ID 值。根据[HTML 规范](http://dev.w3.org/html5/spec/single-page.html)：

> 可能导致脚本以难以调试的方式失败的错误 一些错误旨在帮助防止难以调试的脚本问题。
> 
> 这就是为什么，例如，具有相同值的两个 id 属性是不合格的。重复的 ID 会导致选择错误的元素，有时会产生灾难性的后果，其原因难以确定

这是不允许的。ID 元素**必须**是唯一的。相反，使用类之类的东西（你可以有重复）来解决这个问题，或者更改 ID（尽管我建议使用类）。

# c - 为什么结果不是预期的？

> ID：13472715
> 
> 赞同：3
> 
> 时间：2012-11-20T11:57:32.827
> 
> 标签：c, loops

我有一些代码如下：

```
#include <stdio.h>
#include <stdlib.h>

static counter = 0;
static flag = 0;

int main()
{
    int number = 3;
    int i = 0;
    for(i; i< number; i++)
    {
        if(counter >= number)
        {
            counter = 0;
            flag = 1;
        }
        counter ++;

        printf("   counter = %u\n", counter);
        printf("   flag = %u\n", flag);

    }

    return 0;
} 
```

每次计数器达到3时，标志应该是1，但是为什么当计数器达到3时，标志仍然是0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:01:09.197

您循环仅运行 3 次。在最后一次迭代中，在`if`测试期间，值为`counter`2，值为`number`3。并且 if 测试失败。现在计数器递增到 3，这是打印的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:01:21.140

你没有达到`if`-section

当 i = 3 你有 counter = 2 并从循环中消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:00:28.830

因为里面`if`的代码永远不会执行，因为 for 中的条件在`i`变为 3 时会失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T12:02:15.293

你`counter`在你的条件之后增加，所以如果你确定`counter >= number`它最大为 2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T12:06:00.880

因为下面的代码永远不会到达并且程序退出了循环

```
if(counter >= number)
        {
            counter = 0;
            flag = 1;
        } 
```

所以`counter=3`并将`flag`继续存在`0`

如果您想将其设置`0`为何时退出循环，那么只需执行

`counter++`在语句上方`if`并删除另一个`counter++`（在 if 下方）

# javascript - TabView 中的 YUI3 滚动数据表不呈现

> ID：13472717
> 
> 赞同：0
> 
> 时间：2012-11-20T11:57:41.530
> 
> 标签：javascript, yui, yui3, tabview, yui-datatable

我在 YUI3 Tabview 中有一些标签。每个选项卡都包含几个 YUI3 可滚动数据表。数据表已创建但未呈现。我所能看到的只是每个数据表第一列的一部分。

然而，如果我调整浏览器窗口的大小，我可以看到呈现的表格。我怀疑每次切换到不同的选项卡时都必须以某种方式重新渲染表格。我怎样才能做到这一点？

数据表是独立于选项卡/选项卡视图创建的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:49:19.100

是的，滚动 DataTables 需要在渲染时位于可见容器中，因为它们需要计算表格中某些元素的大小，如果它们`display: none`位于隐藏选项卡下，则无法执行此操作。避免这种情况的方法是等到显示将保存数据表的选项卡。您可以通过收听`selectedChange`选项卡事件的“之后”阶段来做到这一点。例如：

```
tabview.item(1).after('selectedChange', function (e) {
  if (e.newVal) {
    table.render();
 }
}); 
```

这是一个工作示例：http: [//jsfiddle.net/juandopazo/H2ASR/2/](http://jsfiddle.net/juandopazo/H2ASR/2/)

# json - 使用 FlagsEnum、ModelBinders 和 JSON

> ID：13472721
> 
> 赞同：2
> 
> 时间：2012-11-20T11:57:50.127
> 
> 标签：json, asp.net-mvc-4, model-binding, custom-model-binder, enum-flags

如何修改 ModelBinder 以使用 FlagsEnum (Enum: byte)？我将显示代码：

## 代码

**枚举**

```
[Flags]
public enum TipoPessoaEnum : byte
{
    Comprador = 1
    ,
    Proprietario = 2
    ,
    GerenteAgencia = 4
} 
```

**班级**

```
public class PessoaViewModel
{
    public string Nome { get; set; }
    public DateTime? DataNascimento { get; set; }
    public TipoPessoaEnum? Tipo { get; set; }
    // Other fields have been omitted
} 
```

**json**

```
{"Id":0,"Nome":"Teste Flags 02","Tipo":["Comprador","Proprietario"],"Genero":"Masculino","Escolaridade":"","EstadoCivil":"","RegimeCasamento":"","Telefones":[],"Emails":[],"Enderecos":[]} 
```

**模型粘合剂**

> 在**不使用 JSON**时工作，两个 Enuns 作为 FlagsEnuns。

```
public class CreditoImobiliarioModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        if (bindingContext == null) throw new ArgumentNullException("bindingContext");

        if (bindingContext.ValueProvider.ContainsPrefix(bindingContext.ModelName))
        {
            var values = GetValue<string[]>(bindingContext, bindingContext.ModelName);
            var modelType = bindingContext.ModelType.GetNonNullableModelType();

            if (values != null && values.Length > 1 && (modelType.IsEnum && modelType.IsDefined(typeof(FlagsAttribute), false)))
            {
                long byteValue = 0;
                foreach (var value in values.Where(v => Enum.IsDefined(modelType, v)))
                    byteValue |= (byte)Enum.Parse(modelType, value);

                return Enum.Parse(modelType, byteValue.ToString());
            }
        }

        return base.BindModel(controllerContext, bindingContext);
    }

    private static T GetValue<T>(ModelBindingContext bindingContext, string key)
    {
        if (bindingContext.ValueProvider.ContainsPrefix(key))
        {
            ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(key);
            if (valueResult != null)
            {
                bindingContext.ModelState.SetModelValue(key, valueResult);
                return (T)valueResult.ConvertTo(typeof(T));
            }
        }
        return default(T);
    }
} 
```

## 问题

可以看到，在 class`PessoaViewModel`中，属性`Tipo`可以为`TipoPessoaEnum`.

因为该属性`Tipo`可以取多个值，所以我发送（以 JSON 格式）一个`Tipo` `"Tipo":["Comprador","Proprietario"]`. 哪些是enuns的值。

如何将我的 json 数组映射 `"Tipo":["Comprador","Proprietario"]`到我的属性`Tipo`？

**模型粘合剂**

`GetValue<T>`在类的方法中，`CreditoImobiliarioModelBinder`这`bindingContext.ValueProvider.GetValue("Tipo");` **返回 null** ??

# java - 在 CORBA/JAVA 教程中运行 HelloServer 时出现错误名称错误

> ID：13472728
> 
> 赞同：0
> 
> 时间：2012-11-20T11:58:10.983
> 
> 标签：java, corba, idl

> **可能重复：**
> [NoClassDefFoundError：错误名称](https://stackoverflow.com/questions/7509295/noclassdeffounderror-wrong-name)

我已经完成了 corba/java 教程中的所有步骤（这里是链接：[http](http://docs.oracle.com/javase/7/docs/technotes/guides/idl/GShome.htmll) ://docs.oracle.com/javase/7/docs/technotes/guides/idl/GShome.htmll ）但是当我使用以下命令运行服务器：

```
 start java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost 
```

此错误显示在另一个提示中： ![这里是](../Images/53c37c01b42bc49ccbbe3988db33dd4f.png)

你有什么想法来解决这个问题，

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:04:11.843

我发现了问题，我将不得不返回一个目录并使用 corba1.HelloServer 运行

# google-maps - 谷歌地图用 Maptiler 平铺整个世界

> ID：13472733
> 
> 赞同：3
> 
> 时间：2012-11-20T11:58:31.007
> 
> 标签：google-maps, google-maps-api-3

我对地图标题等完全陌生。我正在尝试使用 Maptiler（[http://www.maptiler.org](http://www.maptiler.org)）从缩放级别 3 开始平铺整个世界地图。

现在我的问题是：首先，不确定图像应该如何。我以 3 级缩放截取了世界地图，然后按照每个国家的轮廓在其上绘制了我的地图。是你怎么做的吗？
同样在 Maptiler 中，当询问地理参考边界框时，默认为 90 -90 180 -180。这是整个世界的边界框吗？
将下一步设置保留为默认设置，这意味着 SRS 为“WGS84 纬度和经度（大地测量）”（我真的不知道如何使用这些设置，我不应该将墨卡托用于谷歌地图吗？我很困惑...）并在接下来的步骤中将缩放从 3（我的最小缩放级别）设置为 5，Google 地图上的最终叠加结果扭曲被压向赤道并延伸到两极，“世界”周围也存在间隙" 左、右、上和下，从图像中可以看出。

有什么建议和/或提示吗？

谢谢

![我的地图用 Maptiler 平铺](../Images/5874038341b8c43089f03b88a96c5a11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:24:16.200

解决了。只需[将此图像](http://en.wikipedia.org/wiki/File%3aUtm-zones.jpg)用作参考并将所有设置保留为默认值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:42:47.340

Google Maps 使用 z 曲线来降低维度复杂性并重新排列图块。它还为重新排序添加了一些空间信息。在此处阅读：http: [//msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)。因此，您需要从 lat-lng 对到 x,y 对以及从 x,y 对到四键（z 曲线）的投影（mercantor）。

# sql - 如何在单个查询中将双移动平均线合并到直接 SQL 中？

> ID：13472737
> 
> 赞同：4
> 
> 时间：2012-11-20T11:58:35.613
> 
> 标签：sql, ms-access

编辑：我需要在 ACCESS 中执行此操作。

我是一个 SQL 处女，非常感谢任何神奇的帮助！

对于简单的 12 个月预测，我使用**12 个月双移动平均线**。我已设法通过查询 1（如下）拉出单一移动平均线。基于查询 1 创建的表，我编写了另一个查询（查询 2）来获得双移动平均线。

> 因此，我当前的流程需要两个查询。到目前为止，我将这两个步骤组合成一个查询的努力没有成功。

我的问题：有没有办法在单个查询中计算双移动平均线？

QUERY 1 - 对于单一移动平均线：

```
 SELECT A.*, IIf([A].[VOL]>0,
    (SELECT AVG(B.[VOL])
    FROM [Turnover] as B
    WHERE (B.Code = A.Code) AND (B.YM Between A.YM - 1  AND A.YM - ([12] * 31))),
    (SELECT AVG(B.[VOL])
    FROM [Turnover] as B
    WHERE (B.Code = A.Code) AND (B.YM Between Now() - 31  AND A.YM - ([12] * 31)))) AS [Mvg Avg 1],  
    INTO [Model 12m]
    FROM [Turnover] AS A; 
```

QUERY 2 - 双移动平均线（目前指的是 QUERY 1）：

```
 SELECT A.*, IIf([A].[Mvg Avg 1]>0,(SELECT AVG(B.[Mvg Avg 1])
    FROM [Model 12m] as B
    WHERE (B.Code = A.Code) AND (B.YM Between A.YM - 1  AND A.YM - ([12] * 31))),(SELECT AVG(B.[Mvg Avg 1])
    FROM [Model 12m] as B
    WHERE (B.Code = A.Code) AND (B.YM Between Now() - 31  AND A.YM - ([12] * 31)))) AS [2 Mvg Avg],
    INTO [Model 12m - 2MA]
    FROM [Model 12m] AS A; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:47:12.380

> 我的问题：有没有办法在单个查询中计算双移动平均线？

由于您使用的是 Microsoft Access，因此无需这样做。将第一个查询另存为新查询。（对于不使用 MS Access 的人，将 SQL 语句另存为新查询相当于 SQL 语句`CREATE VIEW ...`。）然后按原样使用第二个查询，或者将其另存为*另一个*新查询。

MS Access*非常*擅长优化基于查询的查询（基于视图的视图）。

# java - 如何将服务器上的 php 文件的访问限制为仅限 Java 应用程序？

> ID：13472743
> 
> 赞同：0
> 
> 时间：2012-11-20T11:58:52.743
> 
> 标签：java, php, database, authorization, security

我有一个将用户分数发送到 mysql 表的 Java 应用程序。用户完成后，Java 应用程序访问服务器上的 .php 文件，并且 .php 服务器对数据库执行查询（插入分数）。

我担心这种方法的（不）安全性。我的意思是，如果有人在服务器上找到指向 .php 的直接 url，他们会在数据库中产生很多混乱。您能否建议我如何防止 .php 执行除 Java 应用程序访问之外的查询？

编辑：问题是Java应用程序不在服务器上运行，它是在使用Java Web Launcher平台的用户计算机上运行的。所以它不是小程序...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:30:58.090

问题是概念性的。您永远不应该确定用户无法找到真实地址（通过默默无闻来确保安全）。您可以使用 SSL，但这仍然不能很好地猜测。

由于 Java 程序在客户端运行，因此 .htaccess 限制对某个 IP 的访问也不是一种选择。

我的建议是在 mysql 中创建一个单独的用户，仅授予该用户对必要表的访问权限，并直接在 Java 中代表该用户执行数据库查询。通过这种方式，所有数据都被加密（参见[http://dev.mysql.com/doc/refman/5.5/en/ssl-connections.html](http://dev.mysql.com/doc/refman/5.5/en/ssl-connections.html)）并且不会暴露 URL/访问点。当然，这意味着您的 MySQL 服务器必须可以从外部访问，这也存在风险。你应该有一个好的root密码！

# php - 谷歌地图地理编码不返回结果

> ID：13472744
> 
> 赞同：1
> 
> 时间：2012-11-20T11:58:57.987
> 
> 标签：php, google-maps, geocoding

这是我发现的一个随机地址不起作用，但该地址仍然存在。

"Team Valley Trading Estate, Gateshead, Tyne and Wear NE92 1DG, UK"

你们可以尝试地理编码并告诉我它是否适合您，我有 13 个地址，12 个工作，这个 1 没有？

这是我正在运行以发出地理编码请求的代码：

```
class geocoder{
    static private $url = "http://maps.google.com/maps/api/geocode/json?sensor=true&address=";

    static public function getLocation($address){
        $url = self::$url.urlencode($address);

        $resp_json = self::curl_file_get_contents($url);
        $resp = json_decode($resp_json, true);

        if($resp['status']='OK'){
            return $resp['results'][0]['geometry']['location'];
        }else{
            return false;
        }
    }

    static private function curl_file_get_contents($URL){
        $c = curl_init();
        curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($c, CURLOPT_URL, $URL);
        $contents = curl_exec($c);
        curl_close($c);

        if ($contents) return $contents;
            else return FALSE;
    }
}    

$address = urlencode("Team Valley Trading Estate, Gateshead, Tyne and Wear NE92 1DG, UK");
$loc = geocoder::getLocation($address); 
```

这是地址存在的证明： [http ://maps.google.co.uk/maps?q=%22Team+Valley+Trading+Estate,+Gateshead,+Tyne+and+Wear+NE92+1DG,+UK%22&hl =en&sll=53.103814,-2.278518&sspn=10.722701,33.815918&t=h&hnear=NE92+1DG,+United+Kingdom&z=16](http://maps.google.co.uk/maps?q=%22Team+Valley+Trading+Estate,+Gateshead,+Tyne+and+Wear+NE92+1DG,+UK%22&hl=en&sll=53.103814,-2.278518&sspn=10.722701,33.815918&t=h&hnear=NE92+1DG,+United+Kingdom&z=16)

这证明地理编码类应该返回数据：

[http://maps.google.com/maps/api/geocode/json?sensor=true&address=Team%20Valley%20Trading%20Estate,%20Gateshead,%20Tyne%20and%20Wear%20NE92%201DG,%20UK](http://maps.google.com/maps/api/geocode/json?sensor=true&address=Team%20Valley%20Trading%20Estate,%20Gateshead,%20Tyne%20and%20Wear%20NE92%201DG,%20UK)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:09:46.927

您正在对地址进行两次**urlencod ，因此请更改：**

```
$address = urlencode("Team Valley Trading Estate, Gateshead, Tyne and Wear NE92 1DG, UK"); 
```

到

```
$address = "Team Valley Trading Estate, Gateshead, Tyne and Wear NE92 1DG, UK"; 
```

因为你已经**urlencod** 'ed 在你的`getLocation`函数中的地址

# html - 通过访问 html 树更改图像边框

> ID：13472746
> 
> 赞同：1
> 
> 时间：2012-11-20T11:59:00.983
> 
> 标签：html, css

```
<ul class="xoxo blogroll">
    <li>
        <a href="" target="_blank"><img src="x.png" alt="image"></a>
    </li>
    <li>
        <a href="" target="_blank"><img src="x2.png" alt="image2"></a>
    </li>
    <li>
        <a href="" target="_blank"><img src="x3.png" alt="image3"></a>
    </li>
</ul> 
```

现在我想从中删除边框。

我尝试：

```
ul.xoxo.blogroll li img {
    border: none;
} 
```

但不工作。语法正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:03:16.330

页面上没有带有 的元素`class="xoxblogroll"`。如果您希望两个类都存在，您可以使用以下内容：

```
ul.blogroll.xoxo li img {
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:03:22.803

你`class="xoxo blogroll"`的空间意味着浏览器将 ul 解释为具有 2 个类，“xoxo”和“blogroll”

从类定义中删除空格，如下所示：`class="xoxoblogroll"`，或仅选择 CSS 中的 2 个单词之一，如下所示：

```
ul.xoxo li img {
    border: none;
} 
```

或者

```
ul.blogroll li img {
    border: none;
} 
```

或者如果两个类名都必须存在，则按如下方式连接 CSS 中的 2 个类：

```
ul.xoxo.blogroll li img {
    border: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:04:04.620

一些选择器是：

```
ul.blogroll li img {
    border: none;
} 
```

或者 ：

```
ul.xoxo li img {
    border: none;
} 
```

或者 ：

```
li img {
    border: none;
} 
```

或者 ：

```
ul li img {
    border: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T12:05:38.933

嗨，现在写**这个 CSS**

```
.xoxo.blogroll li img{
border:0;
} 
```

**或者**现在你**应该删除** `text decoration none`

像这样

```
.xoxo.blogroll li a{
text-decoration:none;
outline:0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T13:06:17.443

试试这个。像这样给出正确的图像识别方法

```
ul.xoxo.blogroll li a img {
border: none;
} 
```

或者

```
ul.xoxo.blogroll li a img {
border: 0px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T12:02:22.293

我认为您的类选择器不正确，您确定可以像这样将两个类名推到一起吗？尝试：

```
ul.xoxo li img {
    border: none;
} 
```

或者

```
ul.blogroll li img {
    border: none;
} 
```

# c# - 无法通过 C# 启动进程。也许是因为空白

> ID：13472748
> 
> 赞同：1
> 
> 时间：2012-11-20T11:59:04.550
> 
> 标签：c#, command-line

我有（在设置*后*从调试器复制，以确保这是实际传递给命令的内容）：

```
process.StartInfo.FileName = "C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\signtool.exe"

process.StartInfo.Arguments = " sign /f \"C:\\Users\\...\\myPfx.pfx\" /p \"myPassword\" \"C:\\Users\\...\\Desktop\\app.exe\"" 
```

但是当我`Start()`使用它时，它不会签署应用程序。（当我将 signtool 复制到该文件夹​​并手动执行时 - 它可以工作。）因此，为了调试，我尝试了：

```
System.Diagnostics.Process.Start(@"cmd.exe", @" /k " + "\"" + process.StartInfo.FileName + "\"" + " " + "\"" + process.StartInfo.Arguments + "\""); 
```

但我得到：

> 'C:\Program' 不是内部或外部命令、可运行程序或批处理文件。

那么我如何让签名工作（或者至少是`cmd`，所以我将能够看到究竟是什么问题）？

编辑：谢谢大家。问题的答案如下 - 缺少引号。尽管我在发布问题之前确实尝试过（-在所有内容中添加引号） - 它当时没有用。事实证明，我在引号和实际参数之间添加了一些空格。所以似乎这会导致错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:02:06.773

您的文件名需要被引用

```
process.StartInfo.FileName = "\"C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\signtool.exe\"" 
```

**编辑**

尝试改用这个，它适用于我的虚拟文件

```
string filename = "\"C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\signtool.exe\""
string arguments = "sign /f \"C:\\Users\\...\\myPfx.pfx\" /p \"myPassword\" \"C:\\Users\\...\\Desktop\\app.exe\""
Process.Start("cmd.exe /k " + filename + " " + arguments) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:22:35.173

请试试这个，自己创建一个 ProcessStartInfo 对象，然后将 Process 的 StartInfo 设置为您的新对象：

```
ProcessStartInfo startInfo = new ProcessStartInfo();

string filename = "\"C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\signtool.exe\""
string arguments = " sign /f \"C:\\Users\\...\\myPfx.pfx\" /p \"myPassword\" \"C:\\Users\\...\\Desktop\\app.exe\""
startInfo.Arguments = filename + arguments;
startInfo.FileName = "cmd.exe";
startInfo.UseShellExecute = false;
startInfo.WindowStyle = ProcessWindowStyle.Hidden;
startInfo.RedirectStandardOutput = true;
startInfo.RedirectStandardError = true;

startInfo.WorkingDirectory = "set your working directory here";
Process p = new Process();

p.StartInfo = startInfo;
p.Start();

string output = p.StandardOutput.ReadToEnd();
string error = p.StandardError.
//Instrumentation.Log(LogTypes.ProgramOutput, output);
//Instrumentation.Log(LogTypes.StandardError, error);

p.WaitForExit();

if (p.ExitCode == 0) 
{        
    // log success;
}
else
{
    // log failure;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:12:23.313

您可能需要将 WorkingDirectory 属性设置为桌面（您的 app.exe 所在的位置），并将“app.exe”（不带路径）传递给 arguments 属性。

# objective-c - iOS应用程序在后台崩溃并快速重新启动，没有崩溃日志

> ID：13472752
> 
> 赞同：2
> 
> 时间：2012-11-20T11:59:18.893
> 
> 标签：objective-c, ios, background, crash

这是一个奇怪的问题，因为我已将我的应用程序设置为不在后台运行。因此，当我启动应用程序，然后点击主页按钮，然后通过点击应用程序图标在一秒钟内重新启动应用程序时，它会崩溃。我奇怪的问题是崩溃没有记录，并且在 XCode 设备日志中不可见。此外，如果我在重新启动前等待超过一秒钟，应用程序重新启动就好了。

我意识到这不是一个编码问题，但我想从其他 iOS 开发人员那里了解他们是否遇到过这个问题，如果是这样，是否有补救措施？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T12:06:25.043

问题可能是某些对象正在被释放，简单来说，您需要正确维护对象，我猜您没有维护。

为了解决这个问题，您可以使用分配之类的工具并检查所有对象分配。

希望这可以帮助你..

# mysql - 分组而不是在哪里选择？

> ID：13472754
> 
> 赞同：2
> 
> 时间：2012-11-20T11:59:31.307
> 
> 标签：mysql, group-by

我有一个 SQL 语句，它根据 where 子句返回我需要的行，该子句过滤我的 customerID，他们在特定月份成为客户。我需要做的是在过去 40 个月中每月运行一次，但目前这意味着运行 SQL 40 次并更改日期过滤器。

有谁知道我如何让 SQL 对这些信息进行分组而不是过滤日期，因为这需要我大约 15 个小时才能完成，因为有 50 家商店要运行这个查询。

这是我的 SQL：

```
select count(customerID), date_format(date_time, '%b %Y'), actionID
from transactions

where   date_time = (select min(date_time) 
        from transactions as T 
        where actionID=2
        and date_time > '2010-07-01 00:00:00'
        and  T.customerID = transactions.customerID)
        and store_id= 1

and     customerID IN 
        (
        SELECT customerID
        FROM    transactions
        where   store_id = 1
        and     actionID in (1,6)
            and date_time > '2010-07-01 00:00:00' 
        and     date_time < '2010-08-01 00:00:00'
        )

group by date_format(date_time, '%b %Y')
order by  date_time 
```

我目前过滤“2010-07-01 00:00:00”的日期是我真正需要分组而不是过滤的日期，所以我得到了从 2009 年 7 月到 2012 年 10 月每个月的值。

任何帮助将非常感激。

感谢和问候理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:14:53.483

你似乎已经确切地知道你需要什么。您想要一个将 date_time 截断为月份的列，然后您希望按该列进行分组。

将日期时间截断到本月的第一天并不难。

```
SELECT CAST(CONVERT(VARCHAR(7), date_time, 120) + '-1' as DATETIME) 
```

因此，您要么需要执行上述日期转换的初始查询，要么将计算列添加到执行此操作的表中，然后按此“每月第一”列进行分组。

# elasticsearch - 用于检索部分字符串字段的脚本字段

> ID：13472757
> 
> 赞同：0
> 
> 时间：2012-11-20T11:59:38.480
> 
> 标签：elasticsearch

如何使用脚本字段检索字符串字段搜索词周围的前 20 个词？

假设我有一个名为 Conent 的字段，该字段非常冗长。因此，如果我在 Content 中搜索“apple”，我应该在 apple 一词周围得到最多 20 个单词。

我怎样才能做到这一点？fragment_size 能解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:43:23.280

看起来它突出显示了您的范围查询中的数字。尝试将第一个“必须”子句中的布尔查询替换为：

```
"filtered": {
    "query": {
        "query_string": {
            "query": "official",
            "default_field": "Content"
        }
    }, 
    "filter": {
        "range": {
            "actualTimeStamp": {
                "from": "08-04-2011 23:37:06",
                "to": "16-11-2012 00:00:00"
            }
        }
    }
} 
```

# ios - 升级到 IOS 6 自定义键盘不再响应 UIControlEventEditingChanged

> ID：13472758
> 
> 赞同：2
> 
> 时间：2012-11-20T11:59:49.680
> 
> 标签：ios, keyboard, ios6, uitextfield, uicontrolevents

我想知道是否还有其他人遇到过这个问题或者可以提供帮助？

本质上，我在我的应用程序的屏幕上使用自定义键盘。

屏幕上有 x4 个文本字段。加载时，第一响应者是第一个文本字段。这仍然在 ios6 中完美运行。当数据被添加到第一个文本字段时，问题就出现了——它应该触发 UIControlEventEditingChanged（如在 ios5 中）但它没有。在 ios5 中，这会触发对输入数据的检查，并在适当时将第一响应者更改为下一个文本字段。代码是：

```
[self.field addTarget:self
                action:@selector(textFieldDidUpdate:)
      forControlEvents:UIControlEventEditingChanged]; 
```

为了隔离问题，我使用标准键盘在文本字段上测试了上面的代码，它在 ios6 中工作，这让我认为它必须与引入 ios6 问题的自定义键盘有关 - 也许我应该是在 ios5 中做，但已为我自动管理。

值得注意的是，我仍然能够触及所有四个领域——所以这与其他人一直在问的问题不同。

我使用此代码隐藏键盘：

```
id keyboardImpl = [objc_getClass("UIKeyboardImpl") sharedInstance];
[keyboardImpl setAlpha:0.0f]; 
```

每个字段都会重新加载键盘。

我也有一个警告，我不知道如何解决：

id keyboardImpl = [objc_getClass("UIKeyboardImpl") sharedInstance];

隐式声明类型为 'id (const char *)' 的库函数 'objc_getClass'

和

找不到实例方法“-sharedInstance”（返回类型默认为“id”）

稍微分开一点，我听说有时这种类型的键盘会被苹果拒绝，也有兴趣听听是否有人有这方面的经验？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:35:24.543

好的，所以我刚刚开始工作，这是 myCustomKeyboard 方法的一个示例。我希望这个答案对你有用

```
- (IBAction)button0Pressed {
self.textField.text = [self.textField.text stringByAppendingString:@"0"];
[self.textField sendActionsForControlEvents:UIControlEventEditingChanged];
[self playSound];
} 
```

主要的补充是

```
[self.textField sendActionsForControlEvents:UIControlEventEditingChanged]; 
```

然后在我的另一堂课上我有这个

```
[[doubleCheckAlertView textFieldAtIndex:0] addTarget:self action:@selector(testMethod) forControlEvents:UIControlEventEditingChanged]; 
```

和

```
-(void) testMethod {
//Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T10:39:25.350

在最终解决了 iOS6 的这些自定义键盘问题之后，iOS7 现在显示了我创建的所有自定义键盘的背景。背景是标准键盘的形状。有没有其他人在 iOS7 中使用自定义键盘遇到过这个问题？或者知道如何解决这个问题？

# c - 未知类型名称“clockid_t”

> ID：13472761
> 
> 赞同：3
> 
> 时间：2012-11-20T11:59:58.557
> 
> 标签：c, macos, timer, posix

我正在尝试使用在 Mac OS X 上的 Linux 平台上编写的 C 代码。我遇到了与计时器相关的错误：

```
../src/stinger/timer.c:61:1: error: unknown type name 'clockid_t'
../src/stinger/timer.c:74:2: error: #error "Cannot find a clock!" 
```

它指向这部分代码。

```
 static clockid_t clockid;

#if defined(CLOCK_REALTIME_ID)
#define CLKID CLOCK_REALTIME_ID
#define CLKIDNAME "CLOCK_REALTIME_ID"
#elif defined(CLOCK_THREAD_CPUTIME_ID)
#define CLKID CLOCK_THREAD_CPUTIME_ID
#define CLKIDNAME "CLOCK_THREAD_CPUTIME_ID"
#elif defined(CLOCK_REALTIME_ID)
#warning "Falling back to realtime clock."
#define CLKID CLOCK_REALTIME_ID
#define CLKIDNAME "CLOCK_REALTIME_ID"
#else
#error "Cannot find a clock!"
#endif 
```

这个错误的原因是什么？类型应该`clockid_t`从哪里来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:20:28.963

如果我没记错的话，所有“时钟”的东西都是 POSIX 的“实时”扩展的一部分，OSX 没有实现。所以你不会有运气。您必须使用 OSX 的特定功能才能获得具有良好分辨率的时钟。

*编辑：*在[P99](http://p99.gforge.inria.fr/)中，我有一个 OSX 的包装代码，用于类似的 C11 功能`timespec_get`。不知道这是否真的有用，我没有 Mac，但你可以看看那里。（文件是“p99_threads.h”）

# nstextview - 如何在 NSTextView 中制作可选图像？

> ID：13472771
> 
> 赞同：2
> 
> 时间：2012-11-20T12:00:29.823
> 
> 标签：nstextview, nsimage, nsbezierpath, nsimagecell, nstextattachment

我正在开发一个应用程序，它执行一些数学计算并将结果（包括文本和图形）发送到 NSTextView。

这段代码在制作输出时效果很好，但这就是问题所在：我希望用户可以选择/复制并将生成的图像拖放到其他文本编辑器（如页面或文本编辑）中。当用户从我的文本视图中拖动图像时，它被拖动但没有粘贴到目的地：

```
- (void)drawRect:(NSRect)dirtyRect {
    [super drawRect:dirtyRect];

    NSBezierPath* aPath=[NSBezierPath bezierPath];

    NSImage* anImage = [[NSImage alloc] initWithSize:NSMakeSize(200.0, 200.0)];
    [anImage lockFocus];
    //some drawings:
    NSColor* blue= [NSColor blueColor];
    [blue setStroke];
    aPath=[NSBezierPath bezierPath];
    [aPath setLineWidth:20];
    [aPath moveToPoint:NSMakePoint(20.0, 20.0)];
    [aPath lineToPoint:NSMakePoint(100.0, 100.0)];
    [aPath stroke];
    [anImage unlockFocus];
    //re-capture and change it to a bitmap

    NSSize size = [anImage size];
    [anImage lockFocus];
    NSBitmapImageRep* rep = [[NSBitmapImageRep alloc] initWithFocusedViewRect:NSMakeRect(0,0,size.width,size.height)];
    [anImage unlockFocus];
    NSData* jpgData = [rep representationUsingType:   NSJPEGFileType properties:nil ];

    NSImage* newImage= [[NSImage alloc]initWithData:jpgData];

    //append attrited string only once.   BOOL isDrownYet in header
    if (!isDrownYet) {
        NSTextAttachmentCell *attachmentCell1 = [[NSTextAttachmentCell alloc]   initImageCell:newImage];
        NSTextAttachment *attachment1 = [[NSTextAttachment alloc] init];
        [attachment1 setAttachmentCell: attachmentCell1];
        NSMutableAttributedString *attributedString1 = (NSMutableAttributedString*)[ NSMutableAttributedString attributedStringWithAttachment: attachment1];
        [self.textStorage appendAttributedString:attributedString1];
        isDrownYet=YES;
    }
 } 
```

# objective-c - 如何在回调块中异步制作 FetchRequest

> ID：13472773
> 
> 赞同：4
> 
> 时间：2012-11-20T12:00:38.663
> 
> 标签：objective-c, asynchronous, objective-c-blocks, nsfetchrequest, stackmob

有谁知道如何在第一个异步通信的完成块中启动另一个新的异步方法的最佳实践？

我正在测试代码以在另一个与 Facebook 的异步通信的完成回调中异步调用 NSFetchRequest(coz STACKMOB iOS SDK 在内部与服务器同步)。代码的执行突然在 NSFetchRequest 行终止。我意识到它无法正常工作的原因之一。我猜想一旦 [managedObjectContext executeFetchRequest:fetchRequest error:&error] 被调用，完成块就已经从内存中释放了。但我不知道更好的解决方案来解决它。谢谢你的帮助。

SDK 使用：

*   (void)queueRequest:(NSURLRequest *)请求选项:(SMRequestOptions *)选项 onSuccess:(SMFullResponseSuccessBlock)onSuccess onFailure:(SMFullResponseFailureBlock)onFailure

[https://github.com/stackmob/stackmob-ios-sdk/blob/master/Classes/SMDataStore%2BProtected.m](https://github.com/stackmob/stackmob-ios-sdk/blob/master/Classes/SMDataStore%2BProtected.m)

我试过了：

*   [如何等待异步调度的块完成？](https://stackoverflow.com/questions/4326350/how-do-i-wait-for-an-asynchronously-dispatched-block-to-finish)

*   [NSURLConnection sendAsynchronousRequest：queue：completionHandler：连续发出多个请求？](https://stackoverflow.com/questions/9409211/nsurlconnection-sendasynchronousrequestqueuecompletionhandler-making-multiple)

*   [如何从完成块中检索返回值？](https://stackoverflow.com/questions/8432134/how-can-i-retrieve-a-return-value-from-a-completion-block)

*   [在objective-c中使用块递归](https://stackoverflow.com/questions/11428531/recursion-with-blocks-in-objective-c)

：

```
- (IBAction)checkFacebookInfo:(id)sender
{
    //completion block of facebook info
    void(^onCompleteBlock)(NSDictionary*) = [[^(NSDictionary* userInfo)
    {
        NSManagedObjectContext *managedObjectContext = nil;
        managedObjectContext = [[SingletonCoreData sharedManager] managedObjectContext];

        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"User"];

        //for STACKMOB, customized NSFetchRequest internally sync to the server. It is Asynchronous method.
        NSArray *results = [managedObjectContext executeFetchRequest:fetchRequest error:&error];// failed

        //Not reached here
        //set userInfo to results here

    } copy] autorelease];

    //invoke onCompleteBlock after executing asynchronously, client(SMClient object for STACKMOB)
    [client getLoggedInUserFacebookInfoWithOnSuccess:onCompleteBlock onFailure:^(NSError *error)
     {

         NSLog(@"No user found");

     }];

} 
```

**编辑：** 我试过这个写在下面，然后它成功地工作了。但是我觉得慢。我将部分代码放入“dispatch_async”块中。我正在等待任何其他更好的解决方案。

```
 - (IBAction)checkFacebookInfo:(id)sender
    {
        //completion block of facebook info
        void(^onCompleteBlock)(NSDictionary*) = ^(NSDictionary* userInfo)
        {

            dispatch_queue_t gQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

            dispatch_async(gQueue, ^{
                NSManagedObjectContext *managedObjectContext = nil;
                managedObjectContext = [[SingletonCoreData sharedManager] managedObjectContext];

                NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"User"];

                //for STACKMOB, customized NSFetchRequest internally sync to the server. It is Asynchronous method.
                NSArray *results = [managedObjectContext executeFetchRequest:fetchRequest error:&error];// success

                //set userInfo to results here

            });

        };

        //invoke onCompleteBlock after executing asynchronously, client(SMClient object for STACKMOB)
        [client getLoggedInUserFacebookInfoWithOnSuccess:onCompleteBlock onFailure:^(NSError *error)
         {

             NSLog(@"No user found");

         }];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:49:19.560

如果您尝试同步多个异步操作（通过网络或其他方式），我不能推荐使用 Promise。对于 Promise 的一般介绍，Los Techies 最近的一篇博客文章非常好：

[http://lostechies.com/derickbailey/2012/07/19/want-to-build-win8winjs-apps-you-need-to-understand-promises/](http://lostechies.com/derickbailey/2012/07/19/want-to-build-win8winjs-apps-you-need-to-understand-promises/)

也就是说，有一个很好的库`KSPromise`，我在 iOS 上使用了很多：[https ://github.com/kseebaldt/deferred](https://github.com/kseebaldt/deferred)

使用 Promise，您可以在一个或多个异步调用完成后发出 fetch 请求。例如，一个连接承诺只有在其所有依赖的承诺也都解决后才会被解决！我想您会发现使用 Promise 您的代码会变得更有条理且更易于阅读，尤其是当您正在做一些复杂的事情时。

也就是说，这是一个相当人为的示例，它展示了一种使用 Promise 编写代码的可能方法（与 Facebook iOS 3.1 SDK 相比编写）：

```
- (IBAction)checkFacebookInfo:(FBSession *)session {
  KSDeferred *dfd = [KSDeferred defer];

  FBRequest *meRequest = [[FBRequest alloc] initWithSession:session graphPath:@"/me"];
  [meRequest startWithCompletionHandler:
    ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
      if (error) {
        [dfd.promise rejectWithError:error];
      } else {
        [dfd.promise resolveWithValue:user];
      }
  }];

  [dfd.promise whenResolved:^(KSPromise *p) {
    NSDictionary *userInfo = p.value;
    NSManagedObjectContext *managedObjectContext = [[SingletonCoreData sharedManager] managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"User"];
    NSError *error;
    NSArray *results = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
    // Do whatever with results and userInfo here
  }];

  [dfd.promise whenRejected:^(KSPromise *p) {
    NSError *e = (NSError *)p.value;
    NSLog(@"Error: %@", [e localizedDescription]);
  }];
} 
```

最后一件事：在将 Core Data 与线程和`dispatch_async`. 您可能会遇到各种难以调试的并发问题。

# php - 调度 PHP APC 的注意事项

> ID：13472775
> 
> 赞同：2
> 
> 时间：2012-11-20T12:00:46.033
> 
> 标签：php, caching, cron, apc

我有一个[网页](http://www.mac-gamer.net/games/)，可以查询许多服务（亚马逊、iTunes 等）以获取每种产品的产品信息。每页有 25 个产品，这意味着这是一个非常缓慢的过程。我实现了存储每个服务的原始输出`apc_add`的`apc_fetch`函数，其形式为`service|country_code|product_id`这一切都很好，但在每种情况下，缓存都需要在几个小时后过期。这往往意味着每隔一段时间，就会有人得到一个加载缓慢的页面。

有没有办法，也许通过使用 cron 作业，我可以让服务器完成定期更新缓存的繁重工作？

还是我应该考虑完全不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:06:33.757

您可以运行一个 cron 作业，每隔一段时间从命令行 php 命令调用 php 页面（可能使用一个参数告诉它跳过输出），这样缓存将在您选择的每个时间段刷新。

您甚至可以提供一个参数（可能与以前相同），当您从命令行运行时强制刷新，因此繁重的工作将仅在服务器上完成。

在这种情况下，您不会自动停用缓存，而是仅在 cron 作业运行时才停用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:12:34.247

您可以编写一个后台服务，从这些服务中获取您需要的信息，并以方便的格式存储它们。我认为您不应该存储原始响应。不要将其视为缓存 - 将其视为主存储。

请记住，来自这些服务的信息将不时更新。根据您请求的信息类型，可能没问题。

# javascript - JavaScript 中的 OpenSSL 解密

> ID：13472782
> 
> 赞同：1
> 
> 时间：2012-11-20T12:01:19.020
> 
> 标签：javascript, openssl, encryption

我有一个 PHP 网页，我在其中使用 OpenSSL 加密 PHP 中的文本（openssl_private_decrypt）。

加密文本：

> bhYtdNghwutjxqgHg8AoyebLm5AY + X / 4GLNzzb0PVuyiUX2QKwwDBXH4kVQFJIqUUrm6nYGk740wWkSoAMzygA ==
> 公钥：----- BEGIN PUBLIC KEY ----- MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAMYQWDqtLgDKlQvWzacGeBMQpbicd / uoXAvgLNpFZLM7zuYFDhrYncRsl8LIHK0K3f7e1aFmUVgM4LrKU2WFIw0CAwEAAQ == ----- END PUBLIC KEY -----

我不知道如何在浏览器中用 JavaScript 解密它。我正在寻找一些可以解码的代码或库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T09:35:51.860

我找到了答案：

我在这个页面找到了一个加密算法：
[https](https://github.com/ziyan/javascript-rsa) ://github.com/ziyan/javascript-rsa （你需要rsa.js和jsbn.js）
但是它只包含加密算法，并且有些字符加密不好。

我已经在js中写了一个解密代码，并更改了加密出错的代码。

您需要从[这里](http://www-cs-students.stanford.edu/~tjw/jsbn/)获得以下库！

*   prng4.js
*   rng.js

[最后，您应该为此](http://pastebin.com/GfhuDwj5)更改以下文本：

```
var RSA = {
   ...
} 
```

我希望它可以帮助某人。
霍伯特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-28T17:39:31.123

您可能还想尝试 forge —— 它执行 RSA 加密/解密等等。README 中有很多例子：

[https://github.com/digitalbazaar/forge](https://github.com/digitalbazaar/forge)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T14:18:40.277

您还可以使用我们的 NoSSL，它是开源的，免费供私人/非商业用途使用： [http](http://www.nossl.net) ://www.nossl.net 现在还有一个 Indiegogo 活动： [http://www.indiegogo。 com/projects/nossl-security-for-your-website/x/6399437](http://www.indiegogo.com/projects/nossl-security-for-your-website/x/6399437)

# jquery - 发生事件时更改元素

> ID：13472783
> 
> 赞同：0
> 
> 时间：2012-11-20T12:01:19.300
> 
> 标签：jquery

我想更改事件附加到的元素。在下面的示例中，我尝试将边框从 2px 增加到 10 px，但没有成功。

完整的最小示例（查找 FAILS 行）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Example</title>
    <style>P { margin-bottom: 40%; }</style>
  </head>
  <body>
    <p>Paragraph 1</p>
    <p>Paragraph 2</p>
    <p>Paragraph 3</p>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>

$('p').each(function (i) {
    $(this).css('border', '2px solid');

    $(window).scroll(function (event) {
        console.log('scroll triggered, but nothing happens!');
        event.target.css('border', '10px solid'); // FAILS with TypeError: event.target.css is not a function
    });
})

    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:04:41.733

明确选择要应用 css 的元素。

```
$(window).scroll(function (event) {
        console.log('scroll triggered, but nothing happens!');
        $('body').css('border', '10px solid'); // FAILS with TypeError: event.target.css is not a function
    }); 
```

即使您使用`event.target`，也必须将其包装在 jQuery 集合中，然后才能使用该`.css`方法：

```
$(event.target).css... 
```

问题在于将 css 应用于窗口不起作用；您只能将 css 应用于`HTMLElement`对象（从文档中找到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:16:08.050

您 event.target 是窗口本身，因此您不能以这种方式将 css 应用于 p 标签，尽管您可以这样做：http: [//jsbin.com/abebof/1/edit](http://jsbin.com/abebof/1/edit)

```
$('p',event.target).css('border', '10px solid'); 
```

# jquery - jQuery - 输入值替换

> ID：13472789
> 
> 赞同：1
> 
> 时间：2012-11-20T12:01:39.180
> 
> 标签：jquery, forms

我有以下代码应该针对`#newsletter`输入，将默认文本添加到其中，然后在用户选项卡/单击输入时将其删除。但是它似乎不起作用，并且我收到以下控制台错误：

```
Uncaught SyntaxError: Unexpected end of input 
```

有任何想法吗？

```
$(function() {
  var defaultText = "Your email address";
  $('#newsletter').val(defaultText).focus(function() {
      if (this.value == defaultText) {
          $(this).val('');
      }
  }).blur(function() {
              if (this.value == '') {
                  $('#newsletter').val(defaultText);
              }
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:06:01.633

您的代码中缺少右括号：

```
$(function() {
    var defaultText = "Your email address";
    $('#newsletter').val(defaultText).focus(function() {
        if (this.value == defaultText) {
            $(this).val('');
        }
    }).blur(function() {
        if (this.value == '') {
            $('#newsletter').val(defaultText);
        }
    });  // <-- check it here
}); 
```

顺便说一句，您尝试实现的是表单字段的占位符。[`placeholder`](http://dev.w3.org/html5/spec/single-page.html#the-placeholder-attribute)HTML5 中的属性值得一读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:06:59.370

}); 在代码末尾缺少，所以问题是由于大括号不平衡造成的。

这里是修正版

```
$(function() {
    var defaultText = "Your email address";
    $('#newsletter').val(defaultText).focus(function() {
        if (this.value == defaultText) {
            $(this).val('');
        }
    }).blur(function() {
        if (this.value == '') {
            $('#newsletter').val(defaultText);
        }
    });
}); 
```

# html - 如何使悬停可点击？

> ID：13472795
> 
> 赞同：3
> 
> 时间：2012-11-20T12:01:56.777
> 
> 标签：html

我正在使用 jquery 对图像使用淡入效果，但唯一可点击的是图像内部的链接而不是图像本身，并且用 'a' 标签包围 'img' 标签不起作用，这里是我的问题： http: [//www.marcuspedersen.com/dev/index.html](http://www.marcuspedersen.com/dev/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:05:33.427

该链接是可点击的，因为它是一个链接。如果你想让其他东西可以点击，你必须绑定一个点击监听器到它。在您的情况下，您需要在以下位置添加一个侦听器`<p class="link">`：

```
$(function() {
   $('p.link').click(function() {
      // stuff to do when p is clicked
   });
}); 
```

要在收到点击后点击链接，您可以写

```
location.href = $(this).find('a').attr('href'); 
```

# android - 如何使用 LoaderManager 自动重新查询

> ID：13472800
> 
> 赞同：0
> 
> 时间：2012-11-20T12:02:06.380
> 
> 标签：android, android-sqlite, android-loadermanager, commonsware-cwac

我有一个显示来自 SQLite DB 的数据的应用程序，并且数据不断变化，所以很明显，我认为我应该使用 LoaderManager 来显示数据。

我是否阅读了一些关于将 LoaderManager 与 SQLite 结合使用的信息，并看到了[Alex Lokwood](https://stackoverflow.com/a/8900310/1056359)关于实现 CursorLoader 并使用它的答案，我看到了[关于](https://stackoverflow.com/q/11017646/1056359)将 CursorLoader 直接用于 SQLite DB 而不是 ContentProvider 的答案，并开始使用 commonsware 的[Loaderex](https://github.com/commonsguy/cwac-loaderex)。

我创建了这个类来在 ListView 中显示数据：

```
public class LandingPageActivity extends FragmentActivity implements LoaderCallbacks<Cursor> {
    ListView list;
    SimpleCursorAdapter mAdapter;

    private SQLiteCursorLoader loader = null;
    private Context mContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_friends_and_threads);
        list = (ListView) findViewById(R.id.list);
        mContext = LandingPageActivity.this;

        mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null,
                new String[] { Properties.Title.columnName }, new int[] { android.R.id.text1 }, 0);

        list.setAdapter(mAdapter);
        getSupportLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
        Context c = mContext;
        String query = "SELECT * FROM TABLE_NAME";
        SQLiteOpenHelper db = DatabaseHelper.getDatabase();
        loader = new SQLiteCursorLoader(c, db, query, null);
        return loader;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
        mAdapter.changeCursor(arg1);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        mAdapter.changeCursor(null);
    }
} 
```

当活动仍在运行时从“BroadcastListener”更改数据库时，问题就开始了。

基本上我正在寻找的是实时观察数据库更改，但它似乎（也来自[Android文档](https://developer.android.com/reference/android/app/LoaderManager.html)`restartLoader`，当我想重新查询数据库时我需要调用该函数）。

有没有办法在幕后自动重新查询？

***更新：***

我最初的想法是创建一个重新启动加载程序的函数，如下所示：

```
public static void restartLoader(Context context){
    context.getSupportLoaderManager().restartLoader(0, null, LandingPageActivity.this);
} 
```

但这似乎很粗鲁，并不是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:31:16.713

> 当活动仍在运行时从“BroadcastListener”更改数据库时，问题就开始了......有没有办法在幕后自动重新查询？

使用`BroadcastReceiver`、`insert()`、`update()`和方法修改数据库`replace()`。然后，将自动重新加载。`delete()``SQLiteCursorLoader``Cursor`

# firefox-addon-sdk - 如何在 firefox addon sdk 中获取请求的所有标头值？

> ID：13472804
> 
> 赞同：2
> 
> 时间：2012-11-20T12:02:16.700
> 
> 标签：firefox-addon-sdk

我正在尝试使用 nsIHttpChannel 使用 firefox 插件 sdk 读取标头

像..

```
var httpChannel = subject.QueryInterface(Ci.nsIHttpChannel);
console.log(httpChannel.getRequestHeader("Host")); 
```

可以，但我想复制完整的标头，而 getRequestHeader 只允许询问一个特定的行。你知道一种让所有这些都循环的方法吗？

我尝试了序列化，但这只会导致（{}）。

```
for (var key in httpChannel) {
   if (httpChannel.hasOwnProperty(key)) {
      console.log(key + " -> " + httpChannel[key]); 
   } 
```

仅列出属性但不列出标题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:31:45.890

```
httpChannel.visitRequestHeaders(function(header, value){
  // do something
}); 
```

# php - UTF-8 语言环境删除

> ID：13472815
> 
> 赞同：3
> 
> 时间：2012-11-20T12:02:57.697
> 
> 标签：php, locale, gentoo

我写了这个测试脚本：

```
<?php
ini_set('error_reporting', E_ALL );
putenv('LC_ALL=ru_RU.UTF-8');
putenv('LANG=ru_RU');
putenv('LANGUAGE=ru_RU');
setlocale (LC_ALL, "ru_RU.UTF-8");
for($i=0; $i<7; $i++){
    echo setlocale(LC_ALL, 0) . "<br>\n";
    sleep(1);
}
?> 
```

有输出：

```
ru_RU.UTF-8
ru_RU.UTF-8
C
ru_RU.UTF-8
ru_RU.UTF-8
ru_RU.UTF-8
C 
```

为什么语言环境有时会崩溃？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:54:47.173

从[http://php.net/manual/en/function.setlocale.php](http://php.net/manual/en/function.setlocale.php) ...

> 警告：语言环境信息是按进程维护的，而不是按线程维护的。如果您在 Windows 上的 IIS 或 Apache 等多线程服务器 API 上运行 PHP，您可能会在脚本运行时遇到语言环境设置的突然更改，尽管脚本本身从未调用 setlocale()。这是由于其他脚本同时在同一进程的不同线程中运行，使用 setlocale() 更改了进程范围的语言环境。

我不是 PHP 专家，但我想一个简单的解决方法是首先使用正确的语言环境启动 PHP。你用 gentoo 标记了这个。如果您使用的是 Gentoo 而不是 Apache 的 mod_php，那么您应该能够使用 www-servers/spawn-fcgi 中的 /etc/init.d/spawn-fcgi（我写的）来设置 LC_ALL。有关详细信息，请参见 /etc/conf.d/spawn-fcgi。

# c# - 单击选择命令列时，gridview 正在刷新结果行

> ID：13472816
> 
> 赞同：1
> 
> 时间：2012-11-20T12:02:59.443
> 
> 标签：c#, asp.net

我试图通过单击第一列中的选择命令，在报告查看器中将其中一个结果作为报告查看。但是当报表显示在报表查看器的网格下方时，其他行正在刷新并显示不同的行。当我选择特定行时，我不希望结果发生变化..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:19:13.790

use 2 updatePanels. Put the gridview in the first updatepanel and set the triggers to be never. In the second update panel put the details gridview and set the triggers to condistional and add the trigger for the click for the select from the first gridview.

# php - 根据原始表行输入从连接的 MySQL 列中获取 MAX 值

> ID：13472817
> 
> 赞同：0
> 
> 时间：2012-11-20T12:03:04.117
> 
> 标签：php, mysql, left-join, inner-join, max

标题可能有点混乱，但我想没有简单的方法可以说出来。这就是问题：

我有两张桌子。其中一个列出了足球比赛，其中大约 3.000 场，每场都有单独的 ID。第二个表包含投注赔率，全部在一个表中，每行有一个 ID，三列 Home、Draw 和 Away 表示赔率。

当我想提取特定比赛的最大主场赔率时没有问题（添加到 WHERE 子句的 ID）。检查大约 30 行并返回最大值。

当我想检查每场比赛的所有最大值时，就会出现问题，因为所有主场赔率都在同一列中。因此，对于所有匹配，将返回整列的最大值，而不是与匹配相关的最大值。

**赛程**表包含有关比赛的信息。很简单，3 列，再加上三个应该从另一个表中提取的最高值：

比赛 ID、赛事名称、开始日期、TopHomeOdds、TopDrawOdds、TopAwayOdds。

该`odds`表有多个相同匹配的行。

```
match ID, event name, bookmaker, homeOdds, drawOdds, awayOdds

123456 TeamA-TeamB Bookmaker1 1.60 3.00 4.05

123456 TeamA-TeamB Bookmaker2 1.55 3.05 4.00

123456 TeamA-TeamB Bookmaker3 1.65 2.95 4.10 
```

我想提取最大值（在上面的示例中，它将是 1.65、3.05、4.10），因此我可以将这些值插入到第一个表中。插入不是问题，获得最大值是。我想应该使用一些聪明的 JOIN 查询，这就是你们中的一个人介入的地方……在此先感谢。

这是不准确地返回所有 homeOdds、drawOdds 和

```
awayOdds, so the output is something like:

123456 match1 startdate 29.00 4.00 13.50

234567 match2 startdate 29.00 4.00 13.50

345678 match3 startdate 29.00 4.00 13.50 
```

所有结果都是相同的，因为最大值与匹配本身无关，但会返回整个列的一般最大值。

```
 SELECT fixtures.matchid AS eventid, fixtures.matchdate AS eventstartdate,
    fixtures.eventname AS eventname, MAX(odds.homeOdds) AS TopHomeOdds, 
    MAX(odds.drawOdds) AS TopDrawOdds, MAX(odds.awayOdds) AS TopAwayOdds 
    FROM
    fixtures
    INNER JOIN odds ON odds.matchid=fixtures.matchid 
```

最后一部分，一般的 INNER JOIN，就是问题所在。我希望它对匹配 ID 具有选择性，并且我希望它只返回具有与第一个表中的匹配相关的行 ID 的列的最大值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:15:49.170

与发布问题相比，我花了更少的时间找到解决方案。

如果将 GROUP BY eventid 添加到查询中，它就像一个魅力。

```
 SELECT fixtures.matchid AS eventid, fixtures.matchdate AS eventstartdate,
    fixtures.eventname AS eventname, MAX(odds.homeOdds) AS TopHomeOdds, 
    MAX(odds.drawOdds) AS TopDrawOdds, MAX(odds.awayOdds) AS TopAwayOdds 
    FROM
    fixtures
    INNER JOIN odds ON odds.matchid=fixtures.matchid
    GROUP BY eventid 
```

# asp.net-mvc - 未调用 ActionFilterAttribute

> ID：13472822
> 
> 赞同：3
> 
> 时间：2012-11-20T12:03:20.190
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有这个自定义操作过滤器：

```
public class PermissionChecker: ActionFilterAttribute
{
    private int _permissionId { get; set; }
    private IUserSelectorService _userService { get; set; }

    public PermissionChecker(int permissionId)
    {
        _permissionId = permissionId;
        _userService = new UserSelectorService();
    }

    public PermissionChecker(int permissionId, IUserSelectorService userService)
    {
        _permissionId = permissionId;
        _userService = userService;
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        base.OnActionExecuting(actionContext);
    }
} 
```

我在我的行动中设置它：

```
public class HomeController : Controller
{
    [PermissionChecker(1)]
    public ActionResult Index()
    {
        return View();
    }
} 
```

但它不工作！即使在 PermissionChecker 的构造函数中，代码也不会传入 onActionExecuting。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:28:00.433

您的 OnActionExecuting 的签名不正确，它应该有[ActionExecutingContext](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionexecutingcontext%28v=vs.108%29.aspx)：

*为 ActionFilterAttribute 类的 ActionExecuting 方法提供上下文。*

```
public override void OnActionExecuting(ActionExecutingContext filterContext){
    base.OnActionExecuting(filterContext);
} 
```

# barcode - 如何读取 NADRA NIC 上的条形码？

> ID：13472824
> 
> 赞同：6
> 
> 时间：2012-11-20T12:03:23.420
> 
> 标签：barcode

我正在编写一个从 NADRA (http://www.nadra.gov.pk/index.php?option=com_content&view=article&id=6&Itemid=9) 发布的 NIC 读取条形码的应用程序。NADRA 向巴基斯坦公民发放 CNIC。我想阅读打印在 CNIC 上的这些条形码。NADRA 已编码信息，如姓名、父亲姓名、地址、出生日期等，但这些信息存储在乌尔都语中。我成功阅读了这些条形码，但问题是，我无法将它们的字符集转换为乌尔都语。我安装了 urdu 字体，比如 Noori Nistalique、Aswad 等等，但是这些字符集只是显示了一堆乱七八糟的字符，而不是有意义的信息。当我用简单的英文解码这些条形码时，它显示数字信息正确，但不显示乌尔都语中的信息。

有没有人尝试读取这些条形码并成功解码？请帮助我，或指导我该怎么做...？

这是我阅读的一个示例，这是简单的英语：

> A0U1200708091232 13501722 T31 2602 -E'/

这是我读过的一个样本，这是乌尔都语：

> آڑم0287870180ء120070809123213501722ٹ1111ص2602-فففڈف┴ف，ف9ف┴ف1ف-فف“ففف</ p>

如您所见，数字信息是相同的，但以乌尔都语编码的信息是混乱的......

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-30T09:10:28.027

NADRA 做了一个技巧，NADRA 实际上是使用最后两个字符形成一个单词的十六进制值，例如如果`\u0622`是 Alif（假设）那么 NADRA 只使用最后两个字符进行编码，`22`所以这只是技巧。我附上了一些将十六进制转换为乌尔都语的代码，读取条形码数据，将其转换为十六进制字符串，然后将此字符串传递给此函数，您将获得乌尔都语中的所有信息，只需将此字符串放入某些乌尔都语或阿拉伯语支持的视图中(Android)、组件 (Java) 或者如果您使用的是 C#，则将其放入标签中。

```
public class ConvertToUrdu {

public static String convertToUrdu(String text)
{
    StringBuilder sb = new StringBuilder();

    String[] characters = text.split(",");

    for(String character : characters)
    {

        //if (ListDigits.Contains(ch))
        //{
        //    continue;
        //}
        switch (character)
        {
            case "20":
                sb.append(" ");
                break;

            case "22":
                sb.append("\u0622");
                break;

            case "27":
                sb.append("\u0627");
                break;

            case "13":
                sb.append("\u0613");
                break;

            case "28":
                sb.append("\u0628");
                break;

            case "2B":
                sb.append("\u062b");
                break;

            case "86":
                sb.append("\u0686");
                break;

            case "88":
                sb.append("\u0688");
                break;

            case "2F":
                sb.append("\u062f");
                break;

            case "10":
                sb.append("\u0610");
                break;

            case "39":
                sb.append("\u0639");
                break;

            case "41":
                sb.append("\u0641");
                break;

            case "3A":
                sb.append("\u063a");
                break;

            case "AF":
                sb.append("\u06af");
                break;

            case "2D":
                sb.append("\u062d");
                break;

            case "BE":
                sb.append("\u06be");
                break;

            case "CC":
                sb.append("\u06cc");
                break;

            case "36":
                sb.append("\u0636");
                break;

            case "2C":
                sb.append("\u062c");
                break;

            case "2E":
                sb.append("\u062e");
                break;

            case "43":
                sb.append("\u0643");
                break;

            case "12":
                sb.append("\u0612");
                break;

            case "44":
                sb.append("\u0644");
                break;

            case "45":
                sb.append("\u0645");
                break;

            case "BA":
                sb.append("\u06ba");
                break;

            case "46":
                sb.append("\u0646");
                break;

            case "29":
                sb.append("\u0629");
                break;

            case "A9":
                sb.append("\u06a9");
                break;

            case "C1":
                sb.append("\u06c1");
                break;

            //case "45":
            //    sb.Append("\u0645");
            //    break;

            case "7E":
                sb.append("\u067e");
                break;

            case "42":
                sb.append("\u0642");
                break;

            case "91":
                sb.append("\u0691");
                break;

            case "31":
                sb.append("\u0631");
                break;

            case "35":
                sb.append("\u0635");
                break;

            case "33":
                sb.append("\u0633");
                break;

            case "79":
                sb.append("\u0679");
                break;

            case "2A":
                sb.append("\u062a");
                break;

            case "21":
                sb.append("\u0621");
                break;

            case "38":
                sb.append("\u0638");
                break;

            case "37":
                sb.append("\u0637");
                break;

            //case "48":
            //    sb.Append("\\u0635\u0644\u0649\u0020\u0627\u0644\u0644\u0647\u0020\u0639\u0644\u064a\u0647\u0020\u0648\u0633\u0644\u0645");
            //    break;

            case "48":
                sb.append("\u0648");
                break;

            case "98":
                sb.append("\u0698");
                break;

            case "34":
                sb.append("\u0634");
                break;

            case "D2":
                sb.append("\u06d2");
                break;

            case "30":
                sb.append("\u0630");
                break;

            case "32":
                sb.append("\u0632");
                break;

            case "60":
                sb.append("\u0660");
                break;

            case "61":
                sb.append("\u0661");
                break;

            case "62":
                sb.append("\u0662");
                break;

            case "63":
                sb.append("\u0663");
                break;

            case "64":
                sb.append("\u0664");
                break;

            case "65":
                sb.append("\u0665");
                break;

            case "66":
                sb.append("\u0666");
                break;

            case "67":
                sb.append("\u0667");
                break;

            case "68":
                sb.append("\u0668");
                break;

            case "69":
                sb.append("\u0669");
                break;

            case "0C":
                sb.append(" \u200c");
                break;

            case "D4":
                sb.append("\u06d4");
                break;

            //case "0C":
            //    sb.Append("\u060c");
            //    break;

            case "1F":
                sb.append("\u061f");
                break;

            case "02":
                sb.append("\u0602");
                break;

            case "1B":
                sb.append("\u061b");
                break;

            case "7b":
                sb.append("\u007b");
                break;

            case "7D":
                sb.append("\u007d");
                break;
            //default:
            //    sb.Append(ch);
            //    break;
        }
    }

    return sb.toString();
}
} 
```

我为 Java 编写了这段代码，您可以将其转换为任何其他语言。

希望最好的 ：-）

**注意**
为了方便起见，我在原始字符串的两个字符之后添加了 ','，例如 `A0U1200708091232`-> `A0,U1,20,07,08,09,12,32`。只是为了调试，所以这个函数实际上将第二个字符串转换为乌尔都语。

**编辑**
从评论中，这是我将字符串转换为十六进制的函数，我用 C# 编写了这个

```
private string convertToHex(string text)
    {
        StringBuilder sb = new StringBuilder();
        foreach (char c in text)
        {
            if (c == '\n')
            {
                sb.Append('\n');
                sb.Append(',');
            }
            else
            {
                sb.Append(String.Format("{0:X}", (int)c));
                sb.Append(',');
                //sb.Append((int)c + " ");
            }
        }

        return sb.ToString();
    } 
```

在 JAVA 中，您可以通过编写转换`String hex = String.format("%04x", (int) c);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T16:23:43.573

除了上面@moonzai 的答案之外，我想添加一些我迄今为止能够实现的细节（在@moonzai 的帖子的帮助下！）。

到目前为止，共有三种类型的 CNIC：

1.  常规 CNIC [条形码编码：PDF417]
2.  NICOP 卡 [条形码编码：代码 128]
3.  带 DIP 芯片的卡 [条形码编码：二维码]

后两者（2 和 3）只有身份证号和一些额外的数字细节（很可能是（2）和 Nadra_DB_# 中的问题数量（3））
这是以 PDF417 格式条形码编码的信息（ 1):

*   收据编号（Parchi 编号），其中包括您访问 NADRA 办公室的时间戳
*   CNIC 编号
*   家庭号码（Khandan 号码）
*   出生日期
*   全名 [乌尔都语]
*   父亲的名字 [乌尔都语]
*   带有地区和 Tehsil 信息的完整地址 [乌尔都语 + 英语 + 英语-数字]

urdu 是通过省略 HEX 代码的公共部分来编码的，即在 Java/C/C++/... 的情况下为 \u06，在 Web 的情况下为“”或简单的 0x06。
例如，“alif”的十六进制代码是 \u0627 或 ا 他们只添加了 27 并省略了 。

如果是单词“جاوید”，实际字符串应如下所示：جاوید
但仅添加了 NADRA：2C2748CC2F *（省略所有 ）*

下面附加的是有助于生成 WEB 字符串的 VBA 代码对于CNIC卡的扫描输出，
我将继续添加精炼代码，以及其他语言的代码；特别是在 JS/Jquery 和 PHP 中。

```
公共函数 Convert2Urdu(vString As String) As String
    将 vCharArray 调暗为 Variant，将 vChar 调暗为字符串

    For i = 1 To Len(vString)
        vChar = Mid(vString, i, 1)
        vCharArray = vCharArray & GetUrduChar(Hex(AscW(vChar)))
    下一个
    Convert2Urdu = vCharArray
结束功能

私有函数 GetUrduChar(vHex) 作为字符串
    选择案例 vHex
        ' 字母
        案例“22”、“27”、“28”、“7E”、“2A”、“79”、“2B”、“2C”、“86”、“2D”、“2E”、“2F”、“ 88”、“30”、“31”、“91”、“32”、“98”、“33”、“34”、“35”、“36”、“37”、“38”、“39” 、“3A”、“41”、“42”、“A9”、“AF”、“44”、“45”、“46”、“BA”、“48”、“C1”、“C3”、“ BE”、“21”、“CC”、“D2”
            GetUrduChar = " " & vHex
        ' 数字
        案例“F0”、“F1”、“F2”、“F3”、“F4”、“F5”、“F6”、“F6”、“F7”、“F8”、“F9”
            GetUrduChar = " " & vHex
        '伊拉布斯
        案例“10”、“11”、“12”、“13”、“14”、“15”、“4B”、“4C”、“4D”、“4E”、“4F”、“50”、“ 51”、“52”、“53”、“54”、“56”、“57”、“58”、“70”
            GetUrduChar = " " & vHex
        ' 标点符号
        案例“1B”、“1F”、“64”、“6C”、“D4”、“6B”
            GetUrduChar = " " & vHex
        ' 空间
        案例“20”
            GetUrduChar = "&#x" & "0" & vHex
        其他情况
           GetUrduChar = " " & Chr(vHex) & " " ' 理想情况下，它应该是 Chr(Asc(Hex)) [正在处理]
    结束选择
结束功能

```

# terminal - 重命名文件夹中的整个文件

> ID：13472826
> 
> 赞同：1
> 
> 时间：2012-11-20T12:03:28.530
> 
> 标签：terminal

我有一个文件夹，文件名以**db_filename 开头**我需要将此前缀 db 更改为 sd 但文件名应该相同，有 6768 个文件是否有任何命令可用于重命名这些文件。我在终端中尝试了这样的命令，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:42:50.073

通过以下脚本，我可以使用 python 轻松解决您的问题。

```
import os
parent = '/home/username/Tmp/dbfolder' # change it to your folder
for p,d,f in os.walk(parent):
  for filename in f:
    if filename.startswith('db'):
      path_ori = os.path.join(p,filename)
      path_new = os.path.join(p,'sd'+filename[2:])
      os.rename(path_ori, path_new) 
```

您可以将代码粘贴到您的文本编辑器中，`parent`使用您的文件夹名称更改，然后使用名称保存文件，`rename.py`
然后在终端中，键入`python rename.py`. 完毕。
当然，首先你应该确保你的计算机上有 python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:05:37.120

如果使用[linux](/questions/tagged/linux "显示标记为“linux”的问题")（或`linux`windows 下的工具）：

```
rename 's/^db/sd/' db_* 
```

rename 是[https://metacpan.org/module/rename](https://metacpan.org/module/rename) & 默认安装在许多发行版上。

# apache - htaccess，不在 url 中显示索引控制器

> ID：13472829
> 
> 赞同：1
> 
> 时间：2012-11-20T12:03:37.877
> 
> 标签：apache, .htaccess, url-rewriting

我有一些使用索引控制器的重定向和 url

像这样的绝对或相对：www.domain/index/contact 或只是 /index/contact

我可以用 htaccess 去掉索引部分，这样我就可以看到 www.domain/contact

*我只想要这个用于索引控制器*

**编辑**

这些是我已经拥有的规则

```
Options +FollowSymlinks
RewriteEngine On
Options All -Indexes
IndexIgnore *
DirectoryIndex index.php 
RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f 
RewriteRule ^(.*)$ index.php/?$1 [L,QSA] 
```

在此先感谢，丰富

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:29:16.117

您将需要查看[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。它具有许多强大的选项，可根据您设置的规则在您的应用程序中重写 URL。

对于您的具体情况，您可能有`.htaccess`如下规则：

```
RewriteRule /contact(.*)$ /index/contact$1 [L,QSA] 
```

上面的规则将重写所有对路径的请求，`/contact`就好像调用者已经访问过一样`/index/controller`。此外，任何额外的路径信息都将被捕获并替换`$1`为替换。该`QSA`标志告诉重写引擎也完整地传递查询字符串。

如果你想路由所有请求，比如说除了以 开头的路径`/static`，你可能更喜欢如下规则：

```
RewriteCond %{REQUEST_FILENAME} !^/static
RewriteRule ^(.*)$ index/$1 [L,QSA] 
```

这将忽略所有以 URL 开头的 URL，`/static`并通过您的控制器传递其他所有内容。

**更新**

您不需要这些`RewriteCond`行...除非您特别想跳过真实文件和目录的规则处理。看起来您的重写路径可能存在语法问题。从一个非常基本的重写设置开始，并根据需要从那里扩展：

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{REQUEST_URI} !/index\.php
RewriteRule ^(.*)$ index.php/$1 [L,QSA]  # use ? or / but not both 
```

这将允许您`/contact`在浏览器中访问，而服务器就像您访问过一样`/index.php/contact`。它还将忽略直接对`index.php`文件的任何请求，以防它们最终出现在您的代码中。

# c - strcat 使用指针

> ID：13472830
> 
> 赞同：1
> 
> 时间：2012-11-20T12:03:39.067
> 
> 标签：c

> **可能重复：**
> [对此 c 函数 copyString,concatString 的任何更好的建议](https://stackoverflow.com/questions/13431425/any-better-suggestions-for-this-c-functions-copystring-concatstring)

我正在尝试使用指针编写 strcat，我无法更改 main()。

```
void str_cat(char **s1,char *s2) {
   while(**s1)
      *(s1++); /* go to the end of string1*/

   /* copy string 2 at the end of string 1*/
   while(*s2)
      *(s1++) = (s2++);
   puts(*s1);
 } 
```

我从 main 调用函数如下：

```
char *str = NULL;
str_cat(&str, " World!"); 
```

问题是当我尝试到达 s1 的末尾时，但它没有正确递增。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:06:24.297

您的函数假定`s2`可以附加在`s1`. 所以`s1`应该大到可以容纳`s2`。

您`s1`作为 NULL 传递并取消引用 NULL 指针，这是未定义的行为。

在您的情况下，实际上也不需要传递字符指针的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:05:19.797

```
*(s1++); /* go to the end of string1*/ 
```

这增加了`char**`, 并且取消引用操作在那里什么都不做。你想增加指向的`char*`，所以你需要

```
(*s1)++; 
```

（类似的`s2`。）

但是，您可能真的不想更改调用者中的指针，因此您应该使用临时变量

```
char *temp = *s1; 
```

并增加它以找到第一个字符串的结尾，或者最好`char*`首先传递 a 。

当然，您应该只使用指向实际以 0 结尾的字符串的指针来调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:05:20.763

您的代码具有**未定义的行为**。
您正在写入一个不指向有效内存的指针。`str`不指向它指向的任何有效内存`NULL`。

您有责任`str`指向一个有效且足够大的内存来保存您正在复制的内容，如果不是，则结果是未定义的行为和不符合标准的程序，这意味着任何行为都是可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T12:21:21.200

这就是我所拥有的。

```
 char * strcat (char *dest, const char *src)
{
    char *dp;
    char *sp = (char *)src;

    if ((dest != NULL) && (src != NULL))
    {
        dp = &dest[strlen(dest)];

        while (*sp != '\0')
        {
            *dp++ = *sp++;
        }
        *dp = '\0';
    }
    return dest;
} 
```

# redirect - Prestashop 在发货信息步骤后给出 404

> ID：13472832
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:03:46.477
> 
> 标签：redirect, http-status-code-404, prestashop

我真的希望有人可以帮助我解决我遇到的这个问题。我认为解释它的最简单方法是如何重现它。我的网站位于 www.jiblab.dk

*   客户将任何物品放入购物车
*   去结账
*   按继续（显示“videre”的绿色按钮）
*   进入运输信息步骤
*   填写个人信息（不登录或注册）
*   按下一步（显示“næste”的绿色按钮）
*   网站给出 404 页面未找到。
*   如果我回去再试一次，我不会再得到 404。
*   清空饼干，这一切又发生了。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:56:24.887

我刚刚尝试成功，但我在贝宝停了下来；-)（看看帐户电子邮件是 dsqdsq@dsqsdq.fr）

它在 Firefox 上。

您是否尝试过使用其他浏览器？您是否尝试停用测试的一步结帐？

# iphone - 修改传入方法的对象

> ID：13472835
> 
> 赞同：0
> 
> 时间：2012-11-20T12:03:51.493
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

假设我有这个方法：

```
-(void) mofidyObject:(NSArray *)obj; 
```

如何准确修改传递到此数组的对象？

我已经看过一段时间了，我知道您需要有一个“&”前缀，但不知道具体如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:23:46.033

一些东西：

有一个对象，然后有一个指向对象的变量。这些是不同的，修改它们的方法也不同。

如果要修改对象（其内容），则使用代码中的正常传递机制——除了 NSArray 不是可变对象这一事实。但是，如果您改为传递 NSMutableArray，那将可以正常工作。

如果要修改变量的内容，使其指向**不同**的对象，则必须将其地址传递给方法。这就是“&”运算符发挥作用的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:22:37.963

```
-(void) mofidyObject:(NSMutableArray **)obj
{
    [*obj addObject:@"love you!"];
}    

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:@"Stack", @"Overflow", nil];
    [self mofidyObject:&array];

    //Don't forget to release after use
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:22:46.153

```
NSMutableArray *arrRows=[[NSMutableArray alloc]init]; //suppose you have this NSMutableArray
[self mofidyObject:&arrRows];

}
-(void) mofidyObject:(NSMutableArray **)obj
{
    self.arrMultiProd=*obj; //Then you can assign pointer refrence to your NSMutableProperty like this
} 
```

但是在 ARC 下是不允许的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:33:28.803

在 Cocoa 中，像这样的外参数是最好的处理方式的情况相对较少。看看框架中的线索，当你应该考虑这种模式时，例如`NSError`处理。

其他问题，例如[这个](https://stackoverflow.com/questions/2939695/passing-an-array-by-reference-in-objective-c)问题已经用可变数组解决了这种模式。

也就是说，Objective-C 只是 C 之上的一层，可以做 C 能做的任何事情。复习通过引用传递指针 - 看看这个[优秀的教程](http://masters-of-the-void.com/book6.htm) *（虚空大师，Uli Kusterer）*

# logging - 无法让访问日志为 gunicorn 工作

> ID：13472842
> 
> 赞同：28
> 
> 时间：2012-11-20T12:04:21.750
> 
> 标签：logging, gunicorn

我在 ngninx 后面运行 gunicorn。我想将 gunicorn 中的错误记录到 gunicorn-error.log 并将日志访问到 gunicorn-access.log。

我有错误日志工作但没有访问日志，我做错了什么？

这是我的 gunicorn.conf.py：

```
bind = '127.0.0.1:8888'
backlog = 2048
workers = 3
errorlog = '/home/my/logs/gunicorn-error.log'
accesslog = '/home/my/logs/gunicorn-access.log'
loglevel = 'debug'
proc_name = 'gunicorn-my'
pidfile = '/var/run/my.pid' 
```

这是运行 gunicorn 的脚本：

```
#!/bin/bash
set -e
ENV=/home/my/env/bin/activate
GUNICORN=gunicorn_django
SETTINGS_PATH=/home/my/app/app/settings
PROJECT_PATH=/home/my/app
CONFROOT=/home/my/app/conf/gunicorn.conf.py

cd $SETTINGS_PATH
source $ENV
export PYTHONPATH=$PROJECT_PATH
exec $GUNICORN app.settings.staging -c $CONFROOT 
```

它同时创建 gunicorn-error.log 和 gunicorn-access.log 但只有 gunicorn-error.log 获取任何日志，例如：

```
2012-11-20 11:49:57 [27817] [INFO] Starting gunicorn 0.14.6
2012-11-20 11:49:57 [27817] [DEBUG] Arbiter booted
2012-11-20 11:49:57 [27817] [INFO] Listening at: http://127.0.0.1:8888 (27817)
2012-11-20 11:49:57 [27817] [INFO] Using worker: sync
2012-11-20 11:49:58 [27825] [INFO] Booting worker with pid: 27825
2012-11-20 11:49:58 [27828] [INFO] Booting worker with pid: 27828
2012-11-20 11:49:58 [27830] [INFO] Booting worker with pid: 27830 
```

我究竟做错了什么？任何人都想与错误日志和访问日志分享他们的工作 gunicorn.conf.py 吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-27T10:00:59.310

我已将 Django 中的日志记录配置更改为以下内容，它有所帮助：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'root': {
        'level': 'WARNING',
        'handlers': ['sentry'],
    },
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
        'generic': {
            'format': '%(asctime)s [%(process)d] [%(levelname)s] %(message)s',
            'datefmt': '%Y-%m-%d %H:%M:%S',
            '()': 'logging.Formatter',
        },
    },
    'handlers': {
        'sentry': {
            'level': 'ERROR',
            'class': 'raven.contrib.django.handlers.SentryHandler',
        },
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'
        },
        'error_file': {
            'class': 'logging.FileHandler',
            'formatter': 'generic',
            'filename': '/home/fungine/gunicorn.error.log',
        },
        'access_file': {
            'class': 'logging.FileHandler',
            'formatter': 'generic',
            'filename': '/home/fungine/gunicorn.access.log',
        },
    },
    'loggers': {
        'django.db.backends': {
            'level': 'ERROR',
            'handlers': ['console'],
            'propagate': False,
        },
        'raven': {
            'level': 'DEBUG',
            'handlers': ['console'],
            'propagate': False,
        },
        'sentry.errors': {
            'level': 'DEBUG',
            'handlers': ['console'],
            'propagate': False,
        },
        'gunicorn.error': {
            'level': 'INFO',
            'handlers': ['error_file'],
            'propagate': True,
        },
        'gunicorn.access': {
            'level': 'INFO',
            'handlers': ['access_file'],
            'propagate': False,
        },
    },
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-26T10:11:48.437

为我指定`'disable_existing_loggers': False`工作`logging.config.dictConfig`。

> **disable_existing_loggers** – 如果指定为`False`，则在进行此调用时存在的记录器将被单独保留。默认是`True` 因为这会以向后兼容的方式启用旧行为。此行为是禁用任何现有记录器，除非它们或其祖先在日志记录配置中明确命名。

[http://docs.python.org/2/library/logging.config.html#logging.config.fileConfig](http://docs.python.org/2/library/logging.config.html#logging.config.fileConfig)

# c++ - QMainWindow 背景：透明不适用于 Qt4.8

> ID：13472848
> 
> 赞同：2
> 
> 时间：2012-11-20T12:04:47.827
> 
> 标签：c++, qt

我在 CSS 文件上将 QMainwindow 背景设置为透明。这对我的主窗口没有任何影响。如果我将背景设置为红色或任何其他颜色，它会反映在我的主窗口上。

当我使用 Qt4.7.1 版本时，我的主窗口是透明的。在使用透明背景属性将 qt 版本更新到 4.8 后，我得到了黑色背景。我将 qt4.8 交叉编译到 Mips，我正在 MIPS 平台上工作。

对此有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:12:58.623

关于如何创建透明窗口有几个问题：
[How to make an transparent window with Qt Quick?](https://stackoverflow.com/questions/7613125/how-to-make-a-transparent-window-with-qt-quick)
[如何获得一个简单的透明窗口？](http://qt-project.org/forums/viewthread/1107)
[透明窗户。](http://qt-project.org/forums/viewthread/1968)

你也可以尝试新建一个简单的空透明MainWindow，看看它是否正常工作。如果是，那么您应该审查您的项目。

# wpf - RavenDB 与 WPF/Caliburn.Micro

> ID：13472855
> 
> 赞同：2
> 
> 时间：2012-11-20T12:05:14.967
> 
> 标签：wpf, architecture, ravendb, caliburn.micro

似乎 Web 应用程序的参考实现是 RacoonBlog，但我很难找到使用 WPF/SL 的示例。根本区别在于 ViewModel 的生命周期和数据更改的粗糙度——它们通常发生在每个属性而不是每个对象上。我见过的几个例子使用了我很想避免的存储库模式。

对于此类事情，是否有推荐的做法？我是否应该使用 DocumentStore 的引用创建一个基础 VM 并将所有内容保存在那里（由 PropertyChanged 事件触发）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:23:55.283

首先考虑您是否应该直接与数据库交谈，或者不与您的客户交谈。在许多情况下，无论使用哪种数据库技术，您都希望让客户端与中间人对话，例如服务层（WebAPI、ServiceStack、WCF 或其他）。

然后，如果您决定确实想直接与数据库对话，具体细节与其他代码中的相同。

1.  在运行时应该只存在一个 DocumentStore 实例。
2.  您应该为每个用户的活动打开和关闭一个新的 DocumentSession。

如果您的 UI 是粗粒度的，那么您可能会在会话中存储/更新整个实体。如果您的 UI 是细粒度的（例如：基于任务的 UI），那么您将在每个会话中做更少的事情，而您将拥有更多。

另一种选择是使用 raven 的[Patching API](http://ravendb.net/docs/client-api/partial-document-updates)来执行部分更新，但通常不需要或不需要它。您丢失事务和并发异常只是为了减少线路流量。

您应该考虑如何处理并发问题。 [乐观并发](http://ravendb.net/kb/16/using-optimistic-concurrency-in-real-world-scenarios)可能是一个好主意，但请务必使用重试逻辑处理异常。

当您来自 SL 时，您将需要使用[异步会话操作，这对于 WPF 也可能是一个好主意。](http://ravendb.net/docs/client-api/working-asynchronously)

# assembly - JB在这里是做什么用的？

> ID：13472856
> 
> 赞同：4
> 
> 时间：2012-11-20T12:05:13.940
> 
> 标签：assembly, 8051, lcd

我正在尝试了解开发板（XL400）附带的一些示例asm，以期将其转换为C。

asm 代码包含在下面，不幸的是，像它这样的文档从中文翻译得非常糟糕，这使得它比无用更糟糕。自从我使用 asm 以来，它也有很长一段时间了！

在代码中，DELAY 子程序中有一条 JB 指令（代码的倒数第三行）。我无法理解它的作用或它应该如何运作。谷歌搜索 JB 会导致对不同形式（JB 标签）的解释，所以我不确定 asm 是否正确？非常感谢帮助，Ta

```
 RS EQU P2.0
 RW EQU P2.1
 E EQU P2.2
 ORG 0080H
 MOV P0,#00000001B  ;- Screen
 ACALL ENABLE
 MOV P0,#00000001B  ;- Screen
 ACALL ENABLE
 MOV P0,#00111000B  ;Display
 ACALL ENABLE
 MOV P0,#00001111B  ;Show switch control
 ACALL ENABLE
 MOV P0,#00000110B  ;Input mode
 ACALL ENABLE
 MOV P0,#0C0H       ;Data memory address
 ACALL ENABLE
 mov p0,#01000001b  ;ASCII code
 SETB RS
 CLR RW
 CLR E
 ACALL DELAY
 SETB E
 AJMP $

ENABLE: CLR RS           ;Send orders
 CLR RW
 CLR E
 ACALL DELAY
 SETB E
 RET

DELAY: MOV P0,#0FFH
 CLR RS
 SETB RW
 CLR E
 NOP
 SETB E
 JB P0.7,DELAY      ;Judgement busy signs
 RET

 END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:14:04.040

如果第一个操作数指定的位被设置，则 8051 汇编器中的 JB 指令跳转到第二个操作数中标号指示的地址。因此，在您的情况下，它将跳转到`MOV P0,#0FFH`if`P0.7`已设置。

`JB label`您所指的指令是 8086 指令（根据之前的 CMP 指令的结果跳转到下方），因此您查看了错误的页面。

编辑：我不确切知道他们使用的是什么类型的 LCD，但我认为这是繁忙的标志 - 因为这些显示器都与古老的[Hitachi 44780](http://en.wikipedia.org/wiki/Hitachi_HD44780_LCD_controller)密切相关。在电路板的[原理图](http://www.51c51.com/enweb/down/xl400sch.pdf)中，P0.7 连接到显示引脚 14，通常是 DB7，这就是忙碌标志所在的位置。当然，最好使用实际显示的文档，但这[可能](http://www.sparkfun.com/datasheets/LCD/GDM1602K-Extended.pdf)非常接近并且可以帮助您入门。此外，该显示器*非常受欢迎*，因此很容易找到所有可能语言的代码以对其进行编程。遵循这条路线可能比对装配进行逆向工程更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:13:26.823

看起来像 LCD 控制器在命令后准备就绪的忙/等待循环：

```
SETB E //enable LCD
JB P0.7,DELAY //jump if 1 
```

[http://www.keil.com/support/man/docs/is51/is51_jb.htm](http://www.keil.com/support/man/docs/is51/is51_jb.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:14:50.753

（免责声明：我不懂 8051 汇编语言。）

来自[http://www.win.tue.nl/~aeb/comp/8051/set8051.html#51jb](http://www.win.tue.nl/~aeb/comp/8051/set8051.html#51jb)

> 说明：如果设置了 bit addr 指示的位，JB 跳转到 reladdr 指示的地址。如果该位未设置，则程序继续执行 JB 指令之后的指令。

看起来它会查看 P0 的第 7 位，如果设置了该位，则跳转到 DELAY。

# javascript - Knockoutjs 事件绑定到图像加载事件

> ID：13472862
> 
> 赞同：3
> 
> 时间：2012-11-20T12:05:28.747
> 
> 标签：javascript, event-handling, knockout.js, jquery-deferred

我正在使用 Knockout.js 显示从我的服务器返回的搜索结果列表。结果集中的每个结果都包含一个图像。我正在尝试为每个图像的加载事件附加一个处理程序，以便我可以根据所有图像的最大高度调整图像的父 div 的大小，但加载事件似乎在图像完成加载之前触发。

此外，我可以看到加载处理程序在 firebug 中被击中，但调试行为只是让图像有时间加载，因此在调试时一切正常。

**我的 viewModel 中的负载处理程序**：这会将已解析的 deferred 推送到我的 promises 数组中。然后我要做的就是检查以确保数组已满，这将告诉我图像已加载。

```
self.imageLoadHandler = function() {
    var promise = $.Deferred().resolve;
    promises.push(promise);
}; 
```

**负载处理程序的绑定**

```
<img data-bind="attr: { src: Posters.Detailed, alt: Title }, event: { load: $root.imageLoadHandler }" /> 
```

**我的 viewModel 中的搜索功能**：这将返回 json 结果，填充我的 observable 数组，然后通过首先检查以确保 promises 数组已满来设置每个“缩略图”的高度，然后在满时获取最大高度并设置所有“缩略图”到那个高度。

```
self.search = function () {
    $.getJSON(arguments[0].action, { name: this.searchValue() }, function (data) {
        self.movies(data);
        setThumbnailHeight();
    });
};

var setThumbnailHeight = function() {
    var $items = $('.thumbnails li');
    $.when.apply($, promises).done(function() {
        var maxHeight = Math.max.apply(null, $items.map(function () {
            return $(this).height();
        }).get());
        $items.css('height', maxHeight);
    });
}; 
```

**我的问题是：**为什么加载事件在图像加载之前触发，我怎样才能在适当的时间触发加载事件？

**更新**

我的想法是加载事件可能会过早触发，因为它可能是在图像具有它之后附加的`src`。如果仅更改事件绑定的顺序不起作用，我可能必须创建自定义绑定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:54:24.453

`event:`只需将数据放在数据之前，您就可以解决事件绑定问题`attr:`。

无论如何（没有双关语），这行是错误的：

```
var promise = $.Deferred().resolve; 
```

它创建一个 deferred，然后将其分配`promise`为对该`resolve`函数的引用，而不调用它。

当结果数组被传递给`$.when`组合的 Promise 时，立即解析，因为本身不实现`promise`接口的对象被隐式视为已解析。

您需要在 之外创建延迟对象数组（具有所需长度）`imageLoadHandler`，然后`.resolve()`在该点显式调用适当的延迟对象。

# svn - svn pre-revprop-change 挂钩消息未显示

> ID：13472863
> 
> 赞同：0
> 
> 时间：2012-11-20T12:05:29.777
> 
> 标签：svn, hook

在一个大学里，我们在 svn 中放置了一个钩子（pre-revprop-change 钩子）。它工作正常。如果我们转到 TortoiseSVN -> 选择没有消息的修订版 -> 右键单击​​并选择“编辑日志消息”，我们会看到一个弹出窗口。如果我们中的一个人输入文本并单击确定，它将显示在 TortoiseSVN 中。但是，如果另一个人打开 TortoiseSVN，则不会显示该消息。选择修订 -> 右键单击​​并在弹出窗口中选择“编辑日志消息”时，将显示文本。

谁知道如何查看彼此的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:31:18.243

这几乎可以肯定是由于 TortoiseSVN 缓存日志消息。您可以通过 TortoiseSVN 设置对话框（右键单击文件夹，TortoiseSVN 菜单，设置）将其关闭，其中有一个“日志缓存”部分和一个启用/禁用日志缓存的复选框。

如果你关闭日志缓存，你应该可以更快地看到消息，但是在显示历史记录时整体 TortoiseSVN 性能会变慢。

# mysql - MySQL查询每月选择一组项目

> ID：13472864
> 
> 赞同：3
> 
> 时间：2012-11-20T12:05:31.227
> 
> 标签：mysql, sql, datetime, select

例如我有下表：

```
items
-----
item_id    (usigned-int, not-null, auto-increment, primary)
created_at (datetime, not-null)
... 
```

我有以下数据集：

```
(1, 01/01/2012)
(2, 03/01/2012)
(3, 07/01/2012)
(4, 12/01/2012)
(5, 28/01/2012)
(6, 02/02/2012)
(7, 06/02/2012)
(8, 13/02/2012)
(9, 27/02/2012) 
```

我想得到以下结果：

```
(3, 07/01/2012)
(4, 12/01/2012)
(5, 28/01/2012)
(8, 13/02/2012)
(9, 27/02/2012) 
```

即跳过每个月的前（n = 两个）记录。

我怎样才能用 MySQL 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:38:31.677

它是根据分区内项目的等级选择的：

```
create table items (
    item_id    int,
    created_at datetime
);

insert into items
select 1, '2012-01-01' union
select 2, '2012-01-03' union
select 3, '2012-01-07' union
select 4, '2012-01-12' union
select 5, '2012-01-28' union
select 6, '2012-02-02' union
select 7, '2012-02-06' union
select 8, '2012-02-13' union
select 9, '2012-02-28'

select i.*
from items i
join (
  select t.item_id, count(item_id1) as row_no
  from (
    select t.item_id, t1.item_id as item_id1
    from items t
    join items t1 on t.item_id >= t1.item_id and 
      DATE_FORMAT(t.created_at, '%Y%m') = DATE_FORMAT(t1.created_at, '%Y%m')
  ) t
  group by t.item_id
) g on i.item_id = g.item_id
where g.row_no > 2 
```

[SQL Fiddle 上的实时示例](http://sqlfiddle.com/#!2/04013/11)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:48:07.857

试试这个查询 -

```
SELECT id, created_at FROM (
  SELECT t1.*, COUNT(*) r FROM items t1
    LEFT JOIN items t2
      ON MONTH(t2.created_at) = MONTH(t1.created_at) AND t2.id <= t1.id
  GROUP BY
    MONTH(t1.created_at), t1.id
  ) t
WHERE r > 2; 
```

您还需要按年份过滤，或者只添加**年份**条件 -

```
SELECT id, created_at FROM (
  SELECT t1.*, COUNT(*) r FROM items t1
    LEFT JOIN items t2
      ON YEAR(t2.created_at) = YEAR(t1.created_at) AND
         MONTH(t2.created_at) = MONTH(t1.created_at) AND
         t2.id <= t1.id
  GROUP BY
    YEAR(t1.created_at), MONTH(t1.created_at), t1.id
  ) t
WHERE r > 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:56:44.377

```
SELECT item_id, created_at, 
    CASE WHEN @month IN (RIGHT(created_at, 7), 0) 
        THEN @rownum := @rownum + 1 
        ELSE @rownum := 1 END AS rownum,
    @month = RIGHT(created_at, 7) AS dummy
FROM (  SELECT item_id, created_at
        FROM items
        ORDER BY created_at DESC) AS h,
    (   SELECT @rownum := 0, @month := 0) AS vars
HAVING rownum > 2 
```

# xslt - xslt 选择多个 OR 条件时

> ID：13472867
> 
> 赞同：1
> 
> 时间：2012-11-20T12:05:34.830
> 
> 标签：xslt

我想知道以下是否可能。我想检查这些条件中的任何一个是否返回为是以打印该语句。

想知道写这个的最好方法是什么。谢谢

```
<li>
    <xsl:choose>
        <xsl:when test="overdraftmoreaffordable/option [@id='yes']='selected' or businessmoreaffordable/option [@id='yes']='selected' or farmermoreaffordable/option [@id='yes']='selected' or loanprimiummoreaffordable/option [@id='yes']='selected' or loanmoreaffordable/option [@id='yes']='selected' or baseloanmoreaffordable/option [@id='yes']='selected' or termloanprimiummoreaffordable/option [@id='yes']='selected' or termmoreaffordable/option [@id='yes']='selected' or variablemoreaffordable/option [@id='yes']='selected' or fixedloanmoreaffordable/option [@id='yes']='selected'">Statement One</xsl:when>
        <xsl:otherwise>Statement Two</xsl:otherwise>
    </xsl:choose>
</li> 
```

或者即使我只想确定是否有任何条件是，最好还是单独执行语句打印语句。

谢谢

添加：

这似乎正是我所需要的，但我的代码被分成很多单独的页面，所以我认为他们无法沟通以了解是否在其他页面中选择了“是”

```
<xsl:if test="overdraft &gt; 0">
        <div style="margin-top: 0cm; margin-bottom: 0cm;">
            <br/>
            <b>Overdraft</b><br/>
            An Overdraft allows your current account to go into an overdrawn position up to an agreed limit.<br/>
        </div>

        <xsl:for-each select="overdrafts/overdraftdata">

            <div style="margin-top: 0cm; margin-bottom: 0cm;">
                <br/>
                This product is suitable because;
                <ul>
                    <li>You are seeking a lending product for the purpose of <xsl:value-of select="overdraftpurpose"/></li>
                    <li>You are seeking a total amount of credit of EUR <xsl:value-of select="overdraftamount"/></li>
                    <li><xsl:choose>
                            <xsl:when test="*[substring(local-name(), string-length(local-name()) - 9) = 'affordable']/option[@id='yes']='selected'">
                                Repayment of the debt has been structured in a manner that is more affordable given your current circumstances
                            </xsl:when>
                            <xsl:otherwise>
                                You are likely to be able to repay the debt in the manner required under the credit agreement
                            </xsl:otherwise>
                        </xsl:choose>
                    </li>
                    <li>It is available for the term you require</li>
                </ul>
            </div>

        </xsl:for-each>

    </xsl:if>

    <xsl:if test="businesscreditline &gt; 0">

        <div style="margin-top: 0cm; margin-bottom: 0cm;">
            <br/>
            <b>Business Credit Line</b><br/>
            A Business Credit Line provides you with the convenience and flexibility of a pre-arranged line of 
            credit. It will facilitate improved budgeting and will give you greater choice in meeting your working
            capital and short term funding needs<br/>
        </div>

        <xsl:for-each select="businesscreditlines/businesscreditlinedata">

            <div style="margin-top: 0cm; margin-bottom: 0cm;">
                <br/>
                This product is suitable because;
                <ul>
                    <li>You are seeking a lending product for the purpose of <xsl:value-of select="businesspurpose"/></li>
                    <li>You are seeking a total amount of credit of EUR <xsl:value-of select="businessamount"/></li>
                    <li><xsl:choose><xsl:when test="*[substring(local-name(), string-length(local-name()) - 9) = 'affordable']/option[@id='yes']='selected'">Repayment of the debt has been structured in a manner that is more affordable given your current circumstances</xsl:when><xsl:otherwise>You are likely to be able to repay the debt in the manner required under the credit agreement</xsl:otherwise></xsl:choose></li>
                    <li>It is available for the term you require</li>
                </ul>
            </div>

        </xsl:for-each>

    </xsl:if>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:25:21.863

好吧，如果您的测试正在测试所有可能的子元素，您可以将其简化为

```
 <xsl:when test="*/option[@id='yes']='selected'">Statement One</xsl:when> 
```

这将检查当前元素的所有子元素。

如果您想更具体，并且只检查名称以“负担得起”结尾的元素，您可以这样做

```
 <xsl:when test="
     *[substring(local-name(), string-length(local-name()) - 9) = 'affordable']
     /option[@id='yes']='selected'">
   Statement One
 </xsl:when> 
```

这是假设 XSLT1.0。在 XSLT2.0 中，您可以通过使用“ends-with”函数来简化这一点。

```
<xsl:when test="
    *[ends-with(local-name(),'affordable')]/option [@id='yes']='selected'">
  Statement One
</xsl:when> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:30:10.217

你可以说压缩一下

```
(overdraftmoreaffordable | businessmoreaffordable | farmermoreaffordable |
  loanprimiummoreaffordable | loanmoreaffordable| baseloanmoreaffordable |
  termloanprimiummoreaffordable | termmoreaffordable | variablemoreaffordable |
  fixedloanmoreaffordable)/option[@id='yes']='selected' 
```

*如果节点集中的任何*节点具有等于给定字符串的值，则`=`利用节点集和字符串之间的比较为真这一事实。或者，如果您正在做的是枚举包含子字符串“moreaffordable”的所有可能元素名称，那么您可以逃脱

 *```
*[contains(local-name(), 'moreaffordable')]/option[@id='yes'] = 'selected' 
```*

# jquery - jQuery - 选择更改（）

> ID：13472868
> 
> 赞同：0
> 
> 时间：2012-11-20T12:05:35.860
> 
> 标签：jquery

我有代码：

```
<div id="displayData_length" class="dataTables_length">
  <label>
     Show <select name="displayData_length" size="1" aria-controls="displayData">
             <option value="10" selected="selected">10</option>
             <option value="25">25</option>
             <option value="50">50</option>
             <option value="100">100</option>
           </select>
  </label>
</div> 
```

当我选择选项时，我想使用 alert() 并显示值。我的代码：

```
$(document).ready(function() {
    $('select[name=displayData_length]').bind('change', function(event) {
            alert(this.val());
        });
 }); 
```

但是不好，有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:07:43.753

应该是这样的：

```
$('select[name=displayData_length]').bind('change', function(event) {
    alert($(this).val());
}); 
```

在 jQuery 事件处理程序中，`this`总是指向 DOM 元素，而不是用 jQuery 包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:07:46.960

`.val`是一个 jQuery 函数，`this`只是一个 DOM 节点。您需要访问`$(this).val()`，或`this.value`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:08:09.707

尝试用 jQuery 对象包装**它**

改变这个

```
 alert(this.val()); 
```

到

```
 alert($(this).val()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T12:08:26.150

您必须包装`this`在 jQuery 对象中。

```
$('select[name=displayData_length]').bind('change', function(event) {
    alert($(this).val());
}); 
```

另请注意，此选择器更快

```
$('select', '#displayData_length') // faster 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T12:08:27.130

包装`this`在一个 jQuery 对象中：

```
alert($(this).val()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T12:07:55.340

用这个 ：

```
$('select[name=displayData_length]').change(function() {
     alert($(this).val());    # for value
     alert($(this).find('option:selected').text());   # for text (UPDATED)
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T12:10:34.880

试试这个

```
<select name="displayData_length" size="1" aria-controls="displayData" id="dia">
<option value="10" selected="selected">10</option>
<option value="25">25</option>
<option value="50">50</option>
<option value="100">100</option>
</select>  

<script>
$("#dia").change(function () {
     var selctedValue = "";
     $("select option:selected").each(function () {
     selctedValue += $(this).val();
    alert(selctedValue);
    });
});
</script> 
```

# python - CSV 文件中的 Python 换行混淆

> ID：13472879
> 
> 赞同：4
> 
> 时间：2012-11-20T12:06:14.927
> 
> 标签：python, csv

我有以下 Python 代码。它读取一个 csv 文件并将第一列输出到一个新的 csv 文件。

但问题出在我的 csv 文件中，除了用于创建新行的新行之外，还有 \n 。但是它们被包裹在双引号中。

例如像这样：

```
A, B, C,
D, "12
34", E,
F, G, H 
```

所以我想我需要在某处添加 quotechar='"' 但我想不通。

```
f_in = open('source.csv')

fields = []

for line in f_in.readlines():
    fields.append([item.strip('\n') for item in line.split(',')])
f_in.close()

f_out = open('sourceNew.csv', 'w')

for i in range(len(fields)):
    if fields[i][0] != '':
        f_out.write(fields[i][0] + ',,\n')

f_out.close() 
```

我如何区分用双引号括起来的真正的新行 \n 和 \n 。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T12:10:13.240

使用[Python CSV](http://docs.python.org/2/library/csv.html)模块：

```
import csv

records = []
reader = csv.reader(open('source.csv', 'rb'))

for record in reader:
    print record
    records.append(record) 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:11:52.170

是的，它确实，

```
import csv

f_in  = csv.reader (open('source.csv'), quotechar='"')

fields = []

for line in f_in:
    fields.append(line)

f_out = open('sourceNew.csv', 'w')

for i in range(len(fields)):
    if fields[i][0] != '':
        f_out.write(fields[i][0] + ',,\n')

f_out.close()import csv

f_in  = csv.reader (open('source.csv'), quotechar='"')

fields = []

for line in f_in:
    fields.append(line)

f_out = open('sourceNew.csv', 'w')

for i in range(len(fields)):
    if fields[i][0] != '':
        f_out.write(fields[i][0] + ',,\n')

f_out.close() 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-02T17:21:22.510

使用 python 3 的正确方法是使用`newline=''`. 正如您从[csv 文档](https://docs.python.org/3/library/csv.html)和示例中看到的那样。`newline=''`他们在打开文件时始终使用。

```
import csv
with open('some.csv', 'w', newline='') as f: 
```

来自脚注

> [1] (1, 2) 如果未指定 newline=''，则嵌入在引用字段中的换行符将不会被正确解释，并且在使用 \r\n linendings on write 的平台上将添加额外的 \r。指定 newline='' 应该始终是安全的，因为 csv 模块会执行自己的（通用）换行处理。

# c++ - QNetworkProxy 中的 Socks4 代理支持

> ID：13472885
> 
> 赞同：2
> 
> 时间：2012-11-20T12:06:29.630
> 
> 标签：c++, qt, proxy, socks, qtnetwork

我正在开发一个使用 QNetworkProxy 的应用程序。我想知道的是，如何在我的应用程序中包含对 Socks4 类型代理的支持，因为 Qt 仅支持 NoProxy、DefaultProxy、Socks5Proxy、HttpProxy、HttpCachingProxy 和 FtpCachingProxy。我已经使用 Qt 添加了对 NoProxy、DefaultProxy、Socks5Proxy 和 HttpProxy 的支持，但不知道如何包含 Socks4proxy 支持。因此，任何人都可以帮助我在仅使用 Qt 的应用程序中添加 Socks4proxy 支持。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:39:13.540

不久前我也遇到过类似的情况，但没有找到任何东西。有一个实现[Socks4 Server](https://github.com/raptorswing/Qt-Socks-Server)的项目，但这对我来说没有帮助。

在[查看 Qt 源代码时，](http://qt.gitorious.org/qt/qt/trees/4.8/src/network/socket)我认为实现 Socks4 代理绝非易事。最后，我决定安装一个内部 Socks5 代理，它本身使用另一个代理。

# android - 我可以在保留私钥的同时更改 Android 签名证书主题吗

> ID：13472887
> 
> 赞同：7
> 
> 时间：2012-11-20T12:06:35.857
> 
> 标签：android, google-play

我开发了一个 Android 应用程序，我将其转移给另一个人以进一步开发。我了解到，如果新开发人员使用相同的密钥库，无缝升级过程将继续进行。

Android 在更新应用程序时如何验证证书？它只是**验证签名**还是**将整个证书**与主题名称进行比较？

我的问题是新开发者想以他们的公司名称而不是我的名义推销该应用程序，因此 Google 帐户发生了变化。但是证书也包含我的名字，我想用**相同的私钥**生成新证书，它应该产生相同的签名，但证书中的主题不同。

我没有将证书用于任何其他应用程序，因此我可以将其赠送。

PS。是否可以使用相同的密钥库和包名称从另一个 Google 帐户上传相同的应用程序，以便继续无缝升级？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:14:26.340

不，当证书被签署时，证书的[TBS](https://www.rfc-editor.org/rfc/rfc5280#section-4.1)字段被签署。如您所见，TBS 文件包含一个**主题** 字段。

```
 Certificate  ::=  SEQUENCE  {
        tbsCertificate       TBSCertificate,
        signatureAlgorithm   AlgorithmIdentifier,
        signatureValue       BIT STRING  }

   TBSCertificate  ::=  SEQUENCE  {
        version         [0]  EXPLICIT Version DEFAULT v1,
        serialNumber         CertificateSerialNumber,
        signature            AlgorithmIdentifier,
        issuer               Name,
        validity             Validity,
        subject              Name,
        subjectPublicKeyInfo SubjectPublicKeyInfo,
        issuerUniqueID  [1]  IMPLICIT UniqueIdentifier OPTIONAL,
                             -- If present, version MUST be v2 or v3 
```

因此，您不能更改 TBS 中的字段。要么继续而不更改证书（主题），要么使用其他人的凭据创建新证书。但为此，您必须停用您的应用程序。**并上传一个新的应用程序（不是作为更新，而是作为一个新应用程序）**，我认为这不是一个好的解决方案。因此，最好继续使用您的证书。

它不关心实际的“详细信息”（证书 DN、序列号等），而只是将证书作为二进制 blob 进行比较，如此[处](https://stackoverflow.com/questions/10938298/how-does-androids-app-signature-verification-work/10942302#comment18434028_10942302)所述。由于证书不同，您无法将最初使用 cert1 签名的应用程序更新为使用 cert2 签名的另一个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:15:31.367

您不能更改已颁发证书的详细信息，也不能颁发新证书作为旧证书的替代品。因此，基本上，如果您的应用程序已经发布，您要么坚持使用您使用的证书，要么您需要删除证书，在这种情况下，这意味着您需要发布**新**的应用程序（而不是更新）。

# matlab - Matlab输入错误

> ID：13472890
> 
> 赞同：0
> 
> 时间：2012-11-20T12:06:46.500
> 
> 标签：matlab

这个错误在matlab中是什么意思？当我使用 2 个输入图像在命令窗口上运行该函数时（图像为 tif 格式、浮点、32 位，它们的大小为 (5165,11945,7)），matlab 向我显示以下错误消息。

`Undefined function or method (name of input image) for input arguments of type double`.

有人说是因为工作目录不同。但到目前为止，我在 matlab ( `c:\User\user\Documents\MATLAB\`) 中只有一个工作目录。我所有的图片都在里面。我可以在当前导演图标的文件列表中的 matlab 屏幕上看到它们。我真的很困惑这个错误来自哪里。希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:08:13.290

因为 Matlab 使用括号而不是方括号进行向量/矩阵索引，所以它无法区分具有相同名称的变量和函数。例如，在 Java 中，如果您有一个名为 的数组和函数`foo`，您可以通过以下方式访问数组中的值：

```
foo[index]; 
```

您可以使用以下命令调用该函数：

```
foo(parameter); 
```

然而，在 matlab 中对向量进行索引`foo`和调用函数`foo`都使用相同的语法完成：

```
foo(someValue); 
```

由于这种混淆，Matlab 首先假设所有调用都是对变量的。如果具有指定名称的变量不存在，则它会尝试查找具有相同名称的函数。

你的错误：

> double 类型的输入参数的未定义函数或方法**VariableName 。**

表示 Matlab 认为您正在尝试调用名为`VariableName`. 这意味着两件事：

1.  没有一个**名为**的变量`VariableName`
2.  您的 matlab 路径上没有**命名**函数。`VariableName`

要纠正这个问题，首先要确定您是尝试索引变量还是调用函数。然后确保该变量存在或该函数在您的路径上。

# java - 单击 Android ExpandableListView 会导致子项出现“未找到 ID”错误

> ID：13472891
> 
> 赞同：1
> 
> 时间：2012-11-20T12:06:47.450
> 
> 标签：java, android, expandablelistview, textview

我有一个，当我单击展开子项时，当我尝试更新子项布局中`ExpandableListView`的文本时，它会引发“找不到 Id”错误。`TextView`如果我将此部分注释掉，则效果很好。我的项目基于我在这个地方找到的示例。谁能发现我哪里出错了？

这是子布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView android:id="@+id/breakdown_item_a"
        android:layout_height="40dip" 
        android:layout_width="40dip" 
        android:layout_marginLeft="40dip"
        android:text="A" />

    <TextView android:id="@+id/breakdown_item_b"
        android:layout_height="40dip" 
        android:layout_width="40dip" 
        android:layout_marginLeft="40dip"
        android:text="B" />
</LinearLayout> 
```

然后是创建子视图的代码：

```
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View rowView, ViewGroup parent) { 
    if (rowView == null) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        rowView = inflater.inflate(R.layout.list_level_breakdown_item, null);
    }
    // If I comment out the next few lines it works, else it crashes here
    ((TextView)rowView.findViewById(R.id.breakdown_item_a)).setText(this.getChild(groupPosition, childPosition).getA());            ((TextView)rowView.findViewById(R.id.breakdown_item_b)).setText(this.getChild(groupPosition, childPosition).getB());

    return rowView;
} 
```

终于到了我的电脑，这是正在抛出的错误消息。查看堆栈跟踪，视图似乎有问题，而不是检索 Id 本身：

```
FATAL EXCEPTION: main
android.content.res.Resources$NotFoundException: String resource ID #0xa
at android.content.res.Resources.getText(Resources.java:247)
at android.widget.TextView.setText(TextView.java:3473)
at testing.android.arrayadapters.BreakdownArray.getChildView(BreakdownArray.java:50)
at android.widget.ExpandableListConnector.getView(ExpandableListConnector.java:450)
at android.widget.AbsListView.obtainView(AbsListView.java:2033)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
at android.widget.ListView.onMeasure(ListView.java:1155)
at android.view.View.measure(View.java:12723)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
at android.view.View.measure(View.java:12723)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at android.view.View.measure(View.java:12723)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at android.view.View.measure(View.java:12723)
at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1196)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:555)
at android.view.View.measure(View.java:12723)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at android.view.View.measure(View.java:12723)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
at android.view.View.measure(View.java:12723)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
at android.view.View.measure(View.java:12723)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

似乎它不喜欢测量某些东西。我已经更新了代码（布局和子视图）。我尝试将事物更新为固定宽度，看看是否有帮助。到目前为止没有运气将继续修补

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:16:49.483

难道仅仅是因为你有2个ID完全相同的孩子，所以当Android被要求通过ID获取元素时，它不知道要获取哪一个？...

```
<LinearLayout>
    <TextView android:id="@+id/breakdown_item" ...>
    <TextView android:id="@+id/breakdown_item" ...>
</LinearLayout> 
```

您可能应该将孩子更改为具有不同的 ID，以便它们是唯一的，就像这样......

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="horizontal">
      <TextView android:id="@+id/first_breakdown_item" android:layout_width="0px" android:layout_height="wrap_content" android:layout_weight="0.5" android:text="A" /> 
      <TextView android:id="@+id/second_breakdown_item" android:layout_width="0px" android:layout_height="wrap_content" android:layout_weight="0.5" android:text="B" /> 
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:47:03.547

好的，我已经找到原因了。似乎 getA() 方法因为它返回了一个 int 导致它崩溃，因为它不会自动将其转换为字符串。因此，这完全是无缘无故的痛苦：（对不起，混乱的家伙。但总体教训是：

如果您要分配 textview 的文本值，请在传递参数时始终显式转换为字符串，因为它不会引发错误……但在运行时会崩溃。

为看它而欢呼。

# haskell - 简单的 haskell 程序不能用 GHCi 编译

> ID：13472894
> 
> 赞同：1
> 
> 时间：2012-11-20T12:06:59.130
> 
> 标签：haskell, ghci

考虑以下是我的代码

```
 import Data.Char
 import Data.List

-- square
square :: Int -> Int
square n = n * n 
```

虽然这个方形函数看起来整洁清晰，但当我运行它时

```
ghci ./square.hs 
```

它返回

```
[1 of 1] Compiling Main             ( ./LabSheet1-solns.hs, interpreted )

./LabSheet1-solns.hs:5:1:
    parse error on input `square'
Failed, modules loaded: none. 
```

我的解释器应该有问题。

我在 OS X 10.8.1 上运行

```
$ ghci --version
The Glorious Glasgow Haskell Compilation System, version 7.4.2 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T12:10:56.483

您的`import`语句缩进一个空格。这基本上将“一个空格”设置为文件的基本缩进级别。由于您的定义`square`没有缩进一个空格，因此您会收到语法错误。

要解决此问题，请将所有行缩进一个空格，或者最好不要缩进`import`语句。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T12:10:24.023

修复缩进：

```
import Data.Char
import Data.List

-- square
square :: Int -> Int
square n = n * n 
```

# linux - Rabbitmq 服务器启动失败

> ID：13472895
> 
> 赞同：1
> 
> 时间：2012-11-20T12:07:11.350
> 
> 标签：linux, ip, rabbitmq, message-queue

我已经在两台计算机A和B上安装了两个rabbitmq-server。但是我无法在计算机A上启动rabbitmq-server。rabbitmq-server可以在计算机B上启动。

计算机 A 中的错误消息如下所示： *{error_logger,{{2012,11,20},{19,55,37}},"Protocol: ~p: register error: ~p~n",["inet_tcp", {{badmatch,{error,epmd_close}}*

epmd 服务器拒绝连接！！！

计算机 A 尝试将其自己的 epmd 服务器与全局 IP 地址（如 172.16.217.128）连接 计算机 B 将其自己的 epmd 服务器与本地 IP 地址连接，即 127.0.0.1

epmd 只允许本地 IP 地址的连接请求。所以计算机A拒绝连接。

顺便说一句，我做了几个测试。如果我在计算机 A 中运行“ping 127.0.0.1”命令： *20:03:59.571514 IP 172.16.217.128 > 127.0.0.1: ICMP echo request, id 9299, seq 2, length 64 20:03:59.571533 IP 127.0.0.1 > 127.0.0.1：ICMP echo 回复，id 9299，seq 2，长度 64*

如果我在计算机 B 中运行“ping 127.0.0.1”命令： *19:44:03.612930 IP 127.0.0.1 > 127.0.0.1: ICMP echo request, id 1805, seq 11, length 64 19:44:03.612941 IP 127.0.0.1 > 127.0.0.1：ICMP 回显回复，id 1805，seq 11，长度 64*

计算机 A ping 自己时使用源 ip 地址 172.16.217.128 ！！！这就是电脑A无法启动rabbitmq-server，epmd拒绝ip地址127.0.0.1的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-23T21:43:51.743

Look at the output of `/bin/hostname`, and ensure that string appears in /etc/hosts on the "172.16.217.128" line. Then kill epmd if running, and restart rabbitmq. You should find it works normally once it can rendezvous with epmd (on port 4369).

BTW, I wouldn't quite call 172.16.217.128 a "global" IP, as it is an rfc1918 IP.

# android - android如何使用layout_height =“match_parent”使Imagebutton向右

> ID：13472896
> 
> 赞同：1
> 
> 时间：2012-11-20T12:07:20.067
> 
> 标签：android, android-layout, android-linearlayout

我想在 2 EditText 的右侧有一个 ImageButton

我努力了

`RelativeLayout`: 但`ImageView layout_height="match_parent"`不起作用

`LinearLayout`：但是如果不被EditText推出，就无法将按钮移到右侧。LinearLayout`LayoutDirection="rtl"`可以工作，但它不再存在

编辑：

我不想在宽度/高度中使用特定值

我有这个，我现在把高度设置为 90dp，但我不希望它在那里

```
<RelativeLayout
    android:id="@+id/login_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp" >

    <EditText
        android:id="@+id/username"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/username"
        android:layout_toLeftOf="@id/login"
        android:inputType="text"
        android:gravity="center_horizontal" />

    <EditText
        android:id="@+id/password"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/password"
        android:layout_below="@id/username"
        android:layout_toLeftOf="@id/login"
        android:inputType="textPassword"
        android:gravity="center_horizontal" />

    <!-- TODO: FIX android:layout_height="match_parent" -->
    <ImageButton
        android:id="@+id/login"
        android:layout_width="wrap_content"
        android:layout_height="90dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:contentDescription="@string/login"
        android:scaleType="fitCenter"
        android:src="@drawable/login_button" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:17:20.777

您可以使用以下之一：

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/edtxt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:inputType="textNoSuggestions" />

        <ImageButton
            android:id="@+id/imgv"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/edtxt"
            android:contentDescription="@string/saveBtn"
            android:src="@drawable/ic_launcher" />
    </RelativeLayout> 
```

或者

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dip"
        android:orientation="horizontal"
        android:weightSum="2" >

        <EditText
            android:id="@+id/edt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            />

        <ImageButton
            android:id="@+id/img"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
           android:src="@drawable/ic_launcher" />
    </LinearLayout> 
```

编辑：

我更新了你的代码。检查那个。它在我的模拟器中显示你想要的输出。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/login_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp" >

    <ImageButton
        android:id="@+id/login"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"

        android:contentDescription="@string/username"
        android:src="@drawable/ic_launcher" />

    <EditText
        android:id="@+id/uname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/login"
        android:gravity="center_horizontal"
        android:hint="@string/username"
        android:inputType="text" />

    <EditText
        android:id="@+id/password"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

      android:layout_below="@id/uname"
        android:layout_toLeftOf="@id/login"
        android:gravity="center_horizontal"
        android:hint="@string/password"
        android:inputType="textPassword" />

</RelativeLayout> 
```

输出：

![输出截图](../Images/ce4e4f5d483b85deeb55448d3fd0029e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:16:17.257

你需要像下面这样的东西吗？

![在此处输入图像描述](../Images/011ccceaf928352c3704975c81d2ed8b.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainscreen"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />
    </LinearLayout>

</LinearLayout> 
```

# design-patterns - 结构设计模式和行为设计模式的区别？

> ID：13472904
> 
> 赞同：41
> 
> 时间：2012-11-20T12:08:04.097
> 
> 标签：design-patterns

我正在阅读设计模式基础知识，并遇到了结构模式和行为模式的两个基本定义，例如：

**结构设计模式：一般处理实体之间的关系，使这些实体更容易协同工作。**

**行为设计模式：用于实体之间的通信，使这些实体之间的通信更容易、更灵活。**

阅读它，我无法区分它们，有人可以通过给出一些最简单的例子来指导我它们的不同之处吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-20T12:27:28.193

最好的解释方法是从两个类别中举两个例子。

Composite from Structural patterns 定义了一个树状结构，所以关注关系。一对多，并具有一种关系，因此整体和部分可以被同等对待。

另一方面，行为设计模式的观察者模式专注于沟通。我们如何让相关方知道对象的任何更改。发布者到订阅者的排序。没有定义严格的结构，而是强制实施方法，即沟通渠道。

希望它有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T12:26:03.420

## 我很不确定我的解释和示例是否真的涵盖了最重要的原则

将行为视为结构外部的场景。可以在多种行为/场景中“使用”某种数据结构。

另一方面，将结构相关的逻辑视为结构的内部。该结构受到各种变化的影响，并因此执行一些操作。

话虽如此，我们可以举例说明：

结构设计模式将通过将其组成部分定义为更高级别的业务对象（例如文章/图像/评论）来定义博客。三方成员都知道彼此以及如何相互联系。

```
$image = new Image;
$image->title = 'Image title';
$image->url = 'http://example.com/file.ext';
$image->save(); // will save the image to a DB

$article->title = 'The title i have set';
/* $article->url_key = 'the_title_i_have_set'; */
// this ^^ element of logic will be done automatically by the article
$article->addImage($image); // will save the connection between the
                            // article and the image to DB 
```

行为设计模式将通过使用较低级别的业务对象（例如 Article/ArticleToImage/Image/ArticleToComment）的用例（场景）来定义博客。业务对象不知道彼此，而是由场景逻辑“操纵”到位。

```
$image = new Image;
$image->title = 'Image title';
$image->url = 'http://example.com/file.ext';
$image->save(); // will save the image to a DB

$article->title = 'The title i have set';
$article->url_key = $controller->getURlKey($article->title);
$article->save(); // saves article to DB

$article_to_image = new ArticleToImage;
$article_to_image->article = $article;
$article_to_image->image = $image;
$article_to_image->save(); 
```

* * *

## TL;博士

如果存储对象是智能的（包含逻辑），那就是结构设计。如果存储对象是愚蠢的（它们只能存储数据并将其传输到数据库），那么您需要一个行为设计来管理它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-21T09:39:02.983

对不起，我的解释将在 C# 中。

观察者是行为模式：呈现接口，允许对象在没有任何具体知识的情况下进行通信。也称为发布-订阅模式。对象通知其他对象其状态，**而不知道这些对象是什么**。

适配器是结构模式：**适配器将给定类的接口转换**为客户端请求的另一个类。用新接口包装现有类。阻抗将旧组件与新系统相匹配。当由于接口不兼容而无法实现时，允许类一起工作。

适配器示例：

```
interface ITarget
{
  List<string> GetProducts();
}

public class VendorAdaptee
{
   public List<string> GetListOfProducts()
   {
      List<string> products = new List<string>();
      products.Add("Gaming Consoles");
      products.Add("Television");
      products.Add("Books");
      products.Add("Musical Instruments");
      return products;
   }
}

class VendorAdapter:ITarget
{
   public List<string> GetProducts()
   {
      VendorAdaptee adaptee = new VendorAdaptee();
      return adaptee.GetListOfProducts();
   }
}

class ShoppingPortalClient
{
   static void Main(string[] args)
   {
      ITarget adapter = new  VendorAdapter();
      foreach (string product in adapter.GetProducts())
      {
        Console.WriteLine(product);
      }
      Console.ReadLine();
   }
} 
```

观察者示例：事件处理程序和事件

```
using System;
namespace wildert
{
    public class Metronome
    {
        public event TickHandler Tick;
        public EventArgs e = null;
        public delegate void TickHandler(Metronome m, EventArgs e);
        public void Start()
        {
            while (true)
            {
                System.Threading.Thread.Sleep(3000);
                if (Tick != null)
                {
                    Tick(this, e);
                }
            }
        }
    }
        public class Listener
        {
            public void Subscribe(Metronome m)
            {
                m.Tick += new Metronome.TickHandler(HeardIt);
            }
            private void HeardIt(Metronome m, EventArgs e)
            {
                System.Console.WriteLine("HEARD IT");
            }

        }
    class Test
    {
        static void Main()
        {
            Metronome m = new Metronome();
            Listener l = new Listener();
            l.Subscribe(m);
            m.Start();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:27:08.630

结构模式用于定义系统的静态属性（参见[类图](http://en.wikipedia.org/wiki/Class_diagram)）。

**示例**：工厂模式可用于创建构成系统的实体。您可以`Button`在 Windows 和 OS X 上拥有具有不同图形属性的对象。工厂模式将创建与操作系统`Button`无关的对象，并且创建的对象将在两个操作系统上具有相同的接口，尽管具有不同的内部结构，但会暴露**相同的行为。**

行为模式用于定义系统的动态行为（参见[活动](http://en.wikipedia.org/wiki/Activity_diagram)、[序列](http://en.wikipedia.org/wiki/Sequence_diagram)等图表）。

**示例**：适配器模式可以在运行时使用，以透明地允许两个实体之间不共享接口的接口。它在运行时有效地**改变了**对象的行为。

# android - 真正的 android 4.0 设备中的图像看起来与模拟器中的不同

> ID：13472914
> 
> 赞同：0
> 
> 时间：2012-11-20T12:08:54.103
> 
> 标签：android, android-emulator, android-4.0-ice-cream-sandwich

我正在为 android 4.0 开发一个应用程序。模拟器中的该应用程序看起来尺寸不错，但是当我们在真实设备中检查该应用程序时，应用程序中的所有图像都非常小。我应该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:18:20.960

如果我正确地跟随你，你会错觉模拟器会完全模仿设备吗？那是因为你的设计在模拟器上看起来不错，它会完全转换到设备上吗？

如果这个假设是正确的，那么你需要知道模拟器永远不会给你那种准确性。根据我自己的经验，模拟器将作为指导提供帮助，但它不能也不应该真正被用作针对一组或特定设备的类似匹配。这一切都归结为不同的手机制造商使用不同的芯片组并以不同的方式呈现屏幕的事实。您可以做的最好的事情是有效地遵循此处的指南[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)以提供与您想要的非常相似的布局。

# php - 锁定门票一段时间（活动门票预订系统）

> ID：13472918
> 
> 赞同：4
> 
> 时间：2012-11-20T12:08:58.820
> 
> 标签：php, cron, ticket-system

我正在努力想出一个活动门票预订系统的解决方案。我需要一些想法，一旦添加到“购物车”，如何锁定票，以便其他客户无法预订

这是如何在其他订票网站上完成的，其中票被保留例如 10 分钟，然后在交易未完成的那段时间之后被释放。每分钟运行 cron 作业是不可行的，不是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T12:11:59.197

如果您节省了解锁门票的时间，然后当有人想要预订它时，您只需查看该时间是否已经过去，它应该可以正常工作，不会给服务器带来任何麻烦或压力。

因此，在您的票证表中，您添加一个`datetime`名为“booked_until”的字段，存储该项目将被解锁的时间并且您已设置好！

# ios - 将对象数组拆分为 4 个组 - ios

> ID：13472920
> 
> 赞同：2
> 
> 时间：2012-11-20T12:09:08.037
> 
> 标签：ios, logic

如何将对象数组拆分为对象数组？

说我想分成4组，我该怎么做？

[a,b,c,d,e,f,g,h] => [a,b] [c,d] [e,f] [g,h]

或者如果我指定我想分成 3 组，那么结果应该是 [a,b,c], [d,e,f], [g,h]

如果 h 不存在，它也应该工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:40:49.513

试试这个逻辑......

```
NSArray *arr = [[NSArray alloc]initWithObjects:@"One",@"Two",@"Three",@"Four",@"Five",@"Six",@"Seven",nil];
NSMutableArray *arrNew = [[NSMutableArray alloc]init];
int numberofSubArrs = 3; // change this to check the logic
for (int i=0; i<numberofSubArrs; i++) {
    NSMutableArray *arrrr = [[NSMutableArray alloc]init];
    [arrNew addObject:arrrr];
}
int m = 0;
for (int k=0; k<[arr count]; k++) {
    [[arrNew objectAtIndex:m]addObject:[arr objectAtIndex:k]];
    m++;
    if (m == numberofSubArrs) {
        m=0;
    }
}
int g=0;
int p=0;
while(p<[arr count]) {
    for (int z=0; z<[[arrNew objectAtIndex:g] count]; z++) {
        [[arrNew objectAtIndex:g] replaceObjectAtIndex:z withObject:[arr objectAtIndex:p++]];
    }
    g++;
}
NSLog(@"Required Array is:%@",[arrNew description]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:38:47.870

试试这个作为起点：

```
NSArray *array = [NSArray arrayWithObjects:@"a", @"b", @"c", @"d", @"e", @"f", @"g", @"h", nil];
NSMutableArray *manyArrays = [NSMutableArray array];
int numberOfElementsInSubArrays = 2;
int numberOfSubArrays = ceil((float)[array count] / (float)numberOfElementsInSubArrays);
for (int i = 0; i < numberOfSubArrays; i++) {
    NSMutableArray *subArray = [NSMutableArray array];
    for (int j = 0; j < numberOfElementsInSubArrays; j++) {
        if (i*numberOfElementsInSubArrays+j < [array count]) {
            NSLog(@"Array: %d Value:%@", i, [array objectAtIndex:i*numberOfElementsInSubArrays+j]);
            [subArray addObject:[array objectAtIndex:i*numberOfElementsInSubArrays+j]];
        }
    }
    [manyArrays addObject:subArray];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:31:46.840

试试这个。

```
NSMutableArray *splitted = [NSMutableArray array];    
id firstItem, secondItem;
for (NSInteger i=0; i <= [originalArray count]-1; i+=2) {
        @try {
            firstItem = [originalArray objectAtIndex:i];
            secondItem = [originalArray objectAtIndex:i+1];
        }
        @catch (NSException *exception) {
            secondItem = [NSNull null];
        }
        @finally {
            [splitted addObject:@[firstItem,secondItem]];
        }
 } 
```

# haskell - Haskell Gtk：mainGUI 函数阻塞其他线程

> ID：13472923
> 
> 赞同：0
> 
> 时间：2012-11-20T12:09:15.383
> 
> 标签：haskell

我在使用线程（使用 STM）并将其与 GTK 结合时遇到了一些麻烦（http://hackage.haskell.org/package/gtk-0.12.3）。

我有一个无限循环的函数，每 2 秒滴答一次，打印列表的内容，然后清除列表，定义如下

```
data VirtualHelicopter = VirtualHelicopter { getOrders :: TVar [(Option, Int)] }

run :: VirtualHelicopter -> IO ()
run h = do
  forever ( (putStrLn . show =<< (atomRead orders))
            >> clearOrders orders
            >> milliSleep 2000)
  where
    orders = getOrders h
    atomRead = atomically . readTVar
    clearOrders x = atomically $ writeTVar x []
    milliSleep = threadDelay . (*) 1000 
```

此外，我有一个 GUI 功能，定义为

```
runGUI :: VirtualHelicopter -> IO ()
runGUI flyer = do
  Gtk.initGUI
  ~ GUI set up stuff, some key listeners that write to the TVar inside flyer ~
  forkIO $ run flyer
  Gtk.mainGUI 
```

如果我从 GHCI 内部 forkIO 的“运行”功能，一切正常 - 它每 2 秒滴答一次，打印到控制台并使用传单中的 TVar 添加到队列中的任何内容更新队列。

但是，当我尝试从 GUI 中 forkIO 时，它不再每两秒滴答一次 - 它只是挂起，直到我输入一些输入，然后给出不可靠的输出。

有人知道为什么会这样吗？[您可以在https://github.com/tetigi/majom](https://github.com/tetigi/majom)看到整个项目的完整上下文，这是该项目理念的 Haskell 扩展[http://procrastineering.blogspot.co.uk/2011/11 /computer-controlling-syma-helicopter.html](http://procrastineering.blogspot.co.uk/2011/11/computer-controlling-syma-helicopter.html)。线程实现在“threadingForVHeli”分支上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:44:51.827

正如 hammar 所说，将 -thread 添加到构建选项中解决了它。我没有意识到线程有一个编译器选项！

我还将努力清除提到的比赛条件:)

# wpf - 创建 WPF 窗口时出现跨线程异常

> ID：13472929
> 
> 赞同：0
> 
> 时间：2012-11-20T12:09:27.493
> 
> 标签：wpf, .net-4.0

在我的应用程序 (.NET 4.0) 中，我使用 smartassembly 通过自定义模板进行错误报告。它安装了两个处理程序：

1.  它安装了一个全局异常捕获器，并在发生异常时调用我的自定义代码。在那里我显示了一个 WPF 窗口，其中显示了异常的详细信息并允许用户通过 Internet 发送数据。
2.  如果发生 #1 无法处理的异常，它会调用致命异常处理程序。我在消息框中输出异常数据。

在一个客户的机器（Windows XP、.NET 4.0）上，应用程序启动后，他从#2 收到一条错误消息。然后应用程序被终止：

```
System.InvalidOperationException: The calling thread cannot access this object because a different thread owns it.
  at System.Windows.Threading.Dispatcher.VerifyAccess()
  at Exapt.ErrorReporting.ErrorReportView..ctor()
  at Exapt.ErrorReporting.ExaptUnhandledExceptionHandler.OnReportException(ReportExceptionEventArgs e)
  at SmartAssembly.SmartExceptionsCore.UnhandledExceptionHandler.ReportException(Exception exception, Boolean canContinue, Boolean manuallyReported) 
```

相关代码：

```
public ExaptUnhandledExceptionHandler : UnhandledExceptionHandler
{
    protected override void OnReportException(ReportExceptionEventArgs e)
    {
        var view = new ErrorReportView();
        view.DataContext = new ErrorReportViewModel(this, e, view);

        view.ShowDialog();
    }
}

public ErrorReportView : Window
{
    public ErrorReportView()
    {
        this.InitializeComponent();

        // EDIT
        if (Application.Current != null)
            this.Owner = Application.Current.MainWindow;
        // END EDIT
    }
} 
```

所以会发生以下情况：

1.  在启动期间发生异常（不幸的是，这会丢失）。
2.  为了处理异常，smartassembly 调用处理程序#1，OnReportException()。
3.  在那里我创建了一个新的 ErrorReportView。
4.  **WPF 在构造函数中抛出跨线程异常（之前`InitializeComponent()`）！**
5.  因为在处理异常时发生了异常，所以 smartassembly 调用处理程序 #2 并终止应用程序。

一个简单的 new Window() 怎么可能导致自身发生跨线程异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:28:38.973

尝试`ErrorReportView`使用 WPF 创建您的`Dispatcher`：

```
public ExaptUnhandledExceptionHandler : UnhandledExceptionHandler
{
    protected override void OnReportException(ReportExceptionEventArgs e)
    {
        Application.Current.Dispatcher.Invoke(new Action(() => 
        {
            var view = new ErrorReportView();
            view.DataContext = new ErrorReportViewModel(this, e, view);
            view.ShowDialog();
        }));
    }
} 
```

由于我无法对其进行测试或重现您的问题，因此我不确定它是否会起作用，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:42:20.023

一个选项是触发一个专用线程来处理此报告。它会是这样的：

```
[TestMethod]
public void TestMethod1()
{
    MainWindow window = null;

    // The dispatcher thread
    var t = new Thread(() =>
    {
        window = new MainWindow();

        // Initiates the dispatcher thread shutdown when the window closes
        window.Closed += (s, e) => window.Dispatcher.InvokeShutdown();

        window.Show();

        // Makes the thread support message pumping
        System.Windows.Threading.Dispatcher.Run();
    });

    // Configure the thread
    t.SetApartmentState(ApartmentState.STA);
    t.Start();
    t.Join();
} 
```

注意：

*   必须在新线程中创建并显示窗口。
*   您必须在 ThreadStart 返回之前启动调度程序（System.Windows.Threading.Dispatcher.Run()），否则窗口将显示并很快消失。
*   该线程必须配置为在 STA 单元中运行。

[您可以在此链接](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)中找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:29:40.830

有了 Arthur Nunes 的回答和 Sisyphe 的回答，我现在可以处理所有可能性。该异常显然是在 STA 线程上引发的，但该线程不是主 (UI) 线程。可能由于 JIT 优化，我得到的堆栈跟踪有点不完整，并显示异常发生在错误的位置。

固定代码：

```
public ExaptUnhandledExceptionHandler : UnhandledExceptionHandler
{
    protected override void OnReportException(ReportExceptionEventArgs e)
    {
        // Create a new STA thread if the current thread is not STA.
        if (Thread.CurrentThread.GetApartmentState() == ApartmentState.STA)
        {
            this.ShowErrorReportView(e);
        }
        else
        {
            // Since I use ShowDialog() below, there is no need for Dispatcher.Run()
            // or Dispatcher.InvokeShutdown()
            var thread = new Thread(() => this.ShowErrorReportView(e));
            thread.SetApartmentState(ApartmentState.STA);
            thread.Start();
            thread.Join();
        }
    }

    private void ShowErrorReportView(ReportExceptionEventArgs e)
    {
        var view = new ErrorReportView();
        view.DataContext = new ErrorReportViewModel(this, e, view);

        view.ShowDialog();
    }
}

public ErrorReportView : Window
{
    public ErrorReportView()
    {
        this.InitializeComponent();

        // All of these cause accessing the MainWindow property or setting the Owner
        // to throw an exception.
        if (Application.Current != null
            && Application.Current.Dispatcher.CheckAccess()
            && Application.Current.MainWindow != null
            && Application.Current.MainWindow != this
            && Application.Current.MainWindow.IsLoaded)
        {
            this.Owner = Application.Current.MainWindow;
        }
    }
} 
```

# android - 在 fragmentTransaction.Replace() 之后获取视图

> ID：13472936
> 
> 赞同：0
> 
> 时间：2012-11-20T12:09:51.200
> 
> 标签：android, android-fragments, android-listfragment

我有一个包含两个片段的活动（都是动态创建的），其中一个是 ListFragment。我在活动中实现了一个 onListItemClick 处理程序。单击一个项目时，我想用其他片段替换两个片段，并填充一个 TextView。但是，在替换片段后，我似乎无法获得我需要在新的详细信息片段中操作 TextView 的 View 对象——它返回 null。这是一些相关代码（onListItemSelected 是在主活动中处理 onListItemClick 的处理程序）。

```
@Override
public void onListItemSelected(int index) {
    inflateCheckinFragment();
    FragmentManager fm = getFragmentManager();

    FragmentTransaction fragmentTransaction = fm.beginTransaction();
        cif = new checkInFragment();
        fragmentTransaction.replace(R.id.action_container, cif, "ACTIONS");
        fragmentTransaction.addToBackStack(null);
        fragmentTransaction.commit()

    FragmentTransaction fragmentTransaction2 = fm.beginTransaction();
        gdf = new GeolocDetailsFragment();
        fragmentTransaction2.replace(R.id.fragment_container, gdf, "DETAILS");
        fragmentTransaction2.addToBackStack(null);
        fragmentTransaction2.commit();

    View gdfView = gdf.getView();

    TextView tv = (TextView)  gdfView.findViewById(R.id.textPOI);
    tv.setText(printPOI(poiList.get(index)));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:58:28.347

我最终只是在 onListItemSelected 方法中设置了数据。selectedPOI 是私有类成员。

```
public void onListItemSelected(int index) {
        FragmentManager fm = getFragmentManager();

        FragmentTransaction fragmentTransaction = fm.beginTransaction();
        fragmentTransaction.replace(R.id.action_container, cif, TAG_CHECKIN);
        fragmentTransaction.replace(R.id.fragment_container, gdf, TAG_DETAILS);
        fragmentTransaction.addToBackStack(null);
        fragmentTransaction.commit();

        selectedPOI = poiList.get(index);
    } 
```

然后在 GeolocDetailsFragment 类中，我在 Fragment 的 onCreateView 方法中设置了要在 Activity 中调用的处理程序来设置 TextView 的值。

```
public class GeolocDetailsFragment extends Fragment {
    private TextSetter textSetter;

    public interface TextSetter {
        public String getActivityText();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.geoloc_details_fragment, container, false);
        TextView detailsText = (TextView) view.findViewById(R.id.textPOI);

        detailsText.setText(textSetter.getActivityText());

        return view;
    }

    public void onAttach(Activity activity) {

        super.onAttach(activity);

        try {
            textSetter = (TextSetter) activity;
        }
        catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnGetPOIListener");
        }
    }

} 
```

最后，我在主活动中实现了 getActivityText() 以获取要传递给 TextView 的字符串。

```
 @Override
    public String getActivityText() {

        return printPOI(selectedPOI);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:18:38.887

您应该以这样的方式使用 Fragments，在您的 Fragment 中`TextView`公开有助于`Activity`直接访问它，从而更改值。

```
Class GeolocDetailsFragment extends Fragments{

public TextView tv;

onCreateView(){

    tv= (TextView)  rootView.findViewById(R.id.textPOI);

    }

} 
```

//在你的活动中

```
@Override
public void onListItemSelected(int index) {

      gdf = new GeolocDetailsFragment();
      gdf.tv.setText(printPOI(poiList.get(index)));

} 
```

# jquery - 在输入按钮上使用 jQuery removeAttr

> ID：13472937
> 
> 赞同：0
> 
> 时间：2012-11-20T12:09:53.123
> 
> 标签：jquery, forms

我目前正在尝试删除显示在我的一个按钮上的值文本，因为我现在正在它的位置使用图像。我曾尝试在 jQuery 中使用 removeAttr 函数，但它似乎不起作用。有什么我错过的吗？

```
$('div.widget-container > div.search > form.search > div#search_links > input.button').removeAttr("value"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:13:06.107

`value`是一个属性，你不能完全删除它，你可以将它的值设置为一个空字符串：

```
$('#search_links > input.button').val('') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:15:25.117

只有**一个**ID 元素作为选择器比嵌套 100 个更快:)

```
$('#search_links').find('input.button').prop('value', ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:15:33.963

清空文本的值

```
$('div#search_links > input.button').val(''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:14:06.133

你能用这个按钮显示 HTML 代码片段吗？

现在就像您在 jQuery 中使用错误的选择器来访问按钮一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T12:14:13.937

value 属性映射到`defaultValue`property，property 没有对应的`value`属性，所以必须使用`.val("")`or`.prop( "value", "" )`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T12:14:36.103

如果你为你的元素定义一个类或 id 然后选择它会更好更快：
所以如果你想使用 removeAttr 删除输入元素的值，我建议将值设置为空：

```
$('#yourinputid').val(''); 
```

或者如果您想删除其他内容：

```
$('#yourinputid').removeAttr('class'); # or disabled or id or other attrs ; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T12:15:08.170

如果您在 IE 上，这是一个已知错误：[http ://bugs.jquery.com/ticket/11598](http://bugs.jquery.com/ticket/11598)

试试这个：

```
$('div.widget-container > div.search > form.search > div#search_links > input.button').val(""); 
```

# python - 为特定的 Python 安装制作 pip 安装包

> ID：13472942
> 
> 赞同：1
> 
> 时间：2012-11-20T12:10:17.203
> 
> 标签：python, pip

我有两个版本的 Python 2.7。

使用`pip-2.7 install bsddb3`似乎为本机 OS X 版本的 Python 安装 bsddb3。

如何将其更改为位于的 Python 版本

```
/Library/Frameworks/Python.framework/Versions/7.3/Resources/Python.app/Contents/MacOS 
```

（找到`>>> os.path.dirname(sys.executable)`可能不正确的路径。*nix 仍然让我感到困惑。）

**注意**AFAICS 这不是重复的。另一个 qs 询问如何安装特定*版本*（例如 2.7 与 2.6）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:55:00.977

首先，创建一个指向你想要的 python 的 virtualenv，使用类似`virtualenv -p PYTHON_EXE VIRTUALENV_DIR`. 然后激活那个virtualenv，`source VIRTUALENV_DIR/bin/activate`然后运行`pip`将被隔离并使用那个virtualenv的python。

如果您不使用 virtualenv，请开始 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:36:42.843

不使用要安装软件包的 python 运行 pip 吗？

```
path/to/python path/to/pip install package_name 
```

顺便说一句，为什么不创建新的 virtualenv 并从那里使用 pip 呢？

# android - 在双 sim android 手机中获取两个 sim 号码

> ID：13472951
> 
> 赞同：22
> 
> 时间：2012-11-20T12:10:47.267
> 
> 标签：android

我想在双卡设备中同时获取两个卡号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-05-18T07:12:44.493

使用 API > 21

需要许可`android.Manifest.permission.READ_PHONE_STATE.`

```
public class SplahActivity extends AppCompatActivity {

    private Context context;
    private SubscriptionManager mSubscriptionManager;

    public static boolean isMultiSimEnabled = false;
    public static String defaultSimName;

    public static List<SubscriptionInfo> subInfoList;
    public static ArrayList<String> Numbers;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        context = this;
        setContentView(R.layout.activity_splah);

        Numbers = new ArrayList<String>();
        mSubscriptionManager = SubscriptionManager.from(context);
        GetCarriorsInformation();

    }

    private void GetCarriorsInformation() {
        subInfoList = mSubscriptionManager.getActiveSubscriptionInfoList();
        if (subInfoList.size() > 1) {
            isMultiSimEnabled = true;
        }
        for (SubscriptionInfo subscriptionInfo : subInfoList) {
            Numbers.add(subscriptionInfo.getNumber());
        }
    }
} 
```

[**SubscriptionManager Api 22 Android 官方**](https://developer.android.com/reference/android/telephony/SubscriptionManager.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-13T09:12:05.683

制作此类**TelephonyInfo** .java ：

```
import java.lang.reflect.Method;

import android.content.Context;
import android.telephony.TelephonyManager;

public final class TelephonyInfo {

private static TelephonyInfo telephonyInfo;
private String imeiSIM1;
private String imeiSIM2;
private boolean isSIM1Ready;
private boolean isSIM2Ready;

public String getImeiSIM1() {
    return imeiSIM1;
}

/*public static void setImeiSIM1(String imeiSIM1) {
    TelephonyInfo.imeiSIM1 = imeiSIM1;
}*/

public String getImeiSIM2() {
    return imeiSIM2;
}

/*public static void setImeiSIM2(String imeiSIM2) {
    TelephonyInfo.imeiSIM2 = imeiSIM2;
}*/

public boolean isSIM1Ready() {
    return isSIM1Ready;
}

/*public static void setSIM1Ready(boolean isSIM1Ready) {
    TelephonyInfo.isSIM1Ready = isSIM1Ready;
}*/

public boolean isSIM2Ready() {
    return isSIM2Ready;
}

/*public static void setSIM2Ready(boolean isSIM2Ready) {
    TelephonyInfo.isSIM2Ready = isSIM2Ready;
}*/

public boolean isDualSIM() {
    return imeiSIM2 != null;
}

private TelephonyInfo() {
}

public static TelephonyInfo getInstance(Context context){

    if(telephonyInfo == null) {

        telephonyInfo = new TelephonyInfo();

        TelephonyManager telephonyManager = ((TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE));

        telephonyInfo.imeiSIM1 = telephonyManager.getDeviceId();;
        telephonyInfo.imeiSIM2 = null;

        try {
            telephonyInfo.imeiSIM1 = getDeviceIdBySlot(context, "getDeviceIdGemini", 0);
            telephonyInfo.imeiSIM2 = getDeviceIdBySlot(context, "getDeviceIdGemini", 1);
        } catch (GeminiMethodNotFoundException e) {
            e.printStackTrace();

            try {
                telephonyInfo.imeiSIM1 = getDeviceIdBySlot(context, "getDeviceId", 0);
                telephonyInfo.imeiSIM2 = getDeviceIdBySlot(context, "getDeviceId", 1);
            } catch (GeminiMethodNotFoundException e1) {
                //Call here for next manufacturer's predicted method name if you wish
                e1.printStackTrace();
            }
        }

        telephonyInfo.isSIM1Ready = telephonyManager.getSimState() == TelephonyManager.SIM_STATE_READY;
        telephonyInfo.isSIM2Ready = false;

        try {
            telephonyInfo.isSIM1Ready = getSIMStateBySlot(context, "getSimStateGemini", 0);
            telephonyInfo.isSIM2Ready = getSIMStateBySlot(context, "getSimStateGemini", 1);
        } catch (GeminiMethodNotFoundException e) {

            e.printStackTrace();

            try {
                telephonyInfo.isSIM1Ready = getSIMStateBySlot(context, "getSimState", 0);
                telephonyInfo.isSIM2Ready = getSIMStateBySlot(context, "getSimState", 1);
            } catch (GeminiMethodNotFoundException e1) {
                //Call here for next manufacturer's predicted method name if you wish
                e1.printStackTrace();
            }
        }
    }

    return telephonyInfo;
}

private static String getDeviceIdBySlot(Context context, String predictedMethodName, int slotID) throws GeminiMethodNotFoundException {

    String imei = null;

    TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

    try{

        Class<?> telephonyClass = Class.forName(telephony.getClass().getName());

        Class<?>[] parameter = new Class[1];
        parameter[0] = int.class;
        Method getSimID = telephonyClass.getMethod(predictedMethodName, parameter);

        Object[] obParameter = new Object[1];
        obParameter[0] = slotID;
        Object ob_phone = getSimID.invoke(telephony, obParameter);

        if(ob_phone != null){
            imei = ob_phone.toString();

        }
    } catch (Exception e) {
        e.printStackTrace();
        throw new GeminiMethodNotFoundException(predictedMethodName);
    }

    return imei;
}

private static  boolean getSIMStateBySlot(Context context, String predictedMethodName, int slotID) throws GeminiMethodNotFoundException {

    boolean isReady = false;

    TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

    try{

        Class<?> telephonyClass = Class.forName(telephony.getClass().getName());

        Class<?>[] parameter = new Class[1];
        parameter[0] = int.class;
        Method getSimStateGemini = telephonyClass.getMethod(predictedMethodName, parameter);

        Object[] obParameter = new Object[1];
        obParameter[0] = slotID;
        Object ob_phone = getSimStateGemini.invoke(telephony, obParameter);

        if(ob_phone != null){
            int simState = Integer.parseInt(ob_phone.toString());
            if(simState == TelephonyManager.SIM_STATE_READY){
                isReady = true;
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
        throw new GeminiMethodNotFoundException(predictedMethodName);
    }

    return isReady;
}

private static class GeminiMethodNotFoundException extends Exception {

    private static final long serialVersionUID = -996812356902545308L;

    public GeminiMethodNotFoundException(String info) {
        super(info);
    }
} 
```

}

然后像这样使用这个类：

```
private void isDualSimOrNot(){
    TelephonyInfo telephonyInfo = TelephonyInfo.getInstance(this);

    String imeiSIM1 = telephonyInfo.getImeiSIM1();
    String imeiSIM2 = telephonyInfo.getImeiSIM2();

    boolean isSIM1Ready = telephonyInfo.isSIM1Ready();
    boolean isSIM2Ready = telephonyInfo.isSIM2Ready();

    boolean isDualSIM = telephonyInfo.isDualSIM();
    Log.i("Dual = "," IME1 : " + imeiSIM1 + "\n" +
            " IME2 : " + imeiSIM2 + "\n" +
            " IS DUAL SIM : " + isDualSIM + "\n" +
            " IS SIM1 READY : " + isSIM1Ready + "\n" +
            " IS SIM2 READY : " + isSIM2Ready + "\n");
} 
```

将此权限添加到应用程序 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

上面的代码非常适合我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-21T03:23:36.050

使用此代码片段从双 sim 设备获取 sim 详细信息！

```
 //above 22
     if (Build.VERSION.SDK_INT > 22) {
            //for dual sim mobile
            SubscriptionManager localSubscriptionManager = SubscriptionManager.from(this);

            if (localSubscriptionManager.getActiveSubscriptionInfoCount() > 1) {
             //if there are two sims in dual sim mobile
                List localList = localSubscriptionManager.getActiveSubscriptionInfoList();
                SubscriptionInfo simInfo = (SubscriptionInfo) localList.get(0);
                SubscriptionInfo simInfo1 = (SubscriptionInfo) localList.get(1);

                final String sim1 = simInfo.getDisplayName().toString();
                final String sim2 = simInfo1.getDisplayName().toString();

            }else{
             //if there is 1 sim in dual sim mobile
                TelephonyManager tManager = (TelephonyManager) getBaseContext()
                        .getSystemService(Context.TELEPHONY_SERVICE);

                String sim1 = tManager.getNetworkOperatorName();

            }

        }else{
            //below android version 22
                    TelephonyManager tManager = (TelephonyManager) getBaseContext()
                            .getSystemService(Context.TELEPHONY_SERVICE);

                    String sim1 = tManager.getNetworkOperatorName();
        } 
```

# c# - 如何使用asp.net在jquery中创建自动完成

> ID：13472962
> 
> 赞同：0
> 
> 时间：2012-11-20T12:11:21.493
> 
> 标签：c#, jquery, asp.net, sql

我将以下代码用于自动完成功能，但我需要使用`sql server 2008`and `C#`,从数据库中获取值`asp.net`。

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
</head>
<body>

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</body>
</html> 
```

如何使用（EF4 和 asp.net）从我的数据库中获取该数组列表值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:16:04.017

请参阅以下来自[**jQueryUI 自动完成示例的示例**](http://jqueryui.com/autocomplete/#remote-jsonp)

希望你能自己做！

您需要做的就是**调用一些页面或处理程序并准备 JSON 数据**。

```
 $( "#city" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "yourpage.aspx",
                dataType: "jsonp",
                data: {

                },
                success: function( data ) {
                    response( $.map( data.geonames, function( item ) {
                        return {
                            label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                            value: item.name
                        }
                    }));
                }
            });
        },
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:34:02.343

第一步是创建一个 C# ASP.Net 页面，该页面生成一个自动完成插件可以解析的 JSON 结果。根据文档，您可以使用以下两种格式：

> 数组：数组可用于本地数据。
> 支持的格式有两种： 字符串数组：[ "Choice1", "Choice2" ]
> 具有标签和值属性的对象数组：[ { label: "Choice1", value: "value1" }, ... ]

[http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)

或者，您可以使用函数解析出您需要的任何格式，但听起来最简单的解决方案可以满足您的需求。

我将假设您使用的 ASP.Net 表单并未真正针对此类事情进行调整，但您仍然可以通过一些调整使其工作。让我们在您的 Web 应用程序根目录中创建一个名为`SearchResults.aspx`.

首先要做的是清除 ASPX 文件中的所有内容，除了以下行：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="SearchResults.aspx.cs" Inherits="ASP.Net_Forms.SearchResults" %> 
```

然后，您可以自由更改后面的代码以输出您喜欢的任何格式。在这种情况下，我们将在 Autocomplete 可以原生理解的结构中使用 JSON。我们还需要设置响应类型。

```
public partial class SearchResults : System.Web.UI.Page
{
    private class SomeSearchableClass
    {
        public int ID { get; set; }
        public string Name { get; set; }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        // The autocomplete plugin defaults to using the querystring
        // parameter "term". This can be confirmed by stepping through
        // the following line of code and viewing the raw querystring.
        List<SomeSearchableClass> Results = SomeSearchSource(Request.QueryString["term"]);

        Response.ContentType = "application/json;charset=UTF-8";

        // Now we need to project our results in a structure that
        // the plugin can understand.

        var output = (from r in Results
                        select new { label = r.Name, value = r.ID }).ToList();

        // Then we need to convert it to a JSON string

        JavaScriptSerializer Serializer = new JavaScriptSerializer();
        string JSON = Serializer.Serialize(output);

        // And finally write the result to the client.

        Response.Write(JSON);
    }

    List<SomeSearchableClass> SomeSearchSource(string searchParameter)
    {
        // This is where you'd put your EF code to gather your search
        // results. I'm just hard coding these examples as a demonstration.

        List<SomeSearchableClass> ret = new List<SomeSearchableClass>();

        ret.Add(new SomeSearchableClass() { ID = 1, Name = "Watership Down" });
        ret.Add(new SomeSearchableClass() { ID = 2, Name = "Animal Farm" });
        ret.Add(new SomeSearchableClass() { ID = 3, Name = "The Plague Dogs" });

        ret = ret.Where(x => x.Name.Contains(searchParameter)).ToList();

        return ret;
    }
} 
```

最后只需更改您的 jQuery 以使用正确的源：

```
$( "#tags" ).autocomplete({ source: "/SearchResults.aspx" }); 
```

# django - Django contenttypes如何获取外键值

> ID：13472964
> 
> 赞同：3
> 
> 时间：2012-11-20T12:11:25.813
> 
> 标签：django, django-orm, django-contenttypes

我正在开发项目管理工具以提高我的 django 技能。我对内容类型有疑问。

我有下一个模型：
Project
Ticket - 有 ForeignKey 到 Project
Discussion - 有 ForeignKey 到 Project
Comment - 有 ForeignKey 到 Discussion
UserProfile - django 的扩展 User
ProfileWatch - 用户观看的项目或讨论，内容类型在此处使用
ProfileActions - 包含用户操作（添加评论讨论，开始讨论，添加票证）内容类型也在这里使用。此表中的记录由来自工单、讨论和评论的信号创建

用户收到有关他观看的事物的通知（有人留下新评论或开始讨论或添加票证）。在视图中，我收到当前用户的所有通知。

我知道哪些对象（项目、讨论）有用户操作，但我不知道哪个对象触发了这个用户操作（票证、评论、讨论）。

理想情况下，在模板中我需要这样的东西（在 ProfileAction 模型的括号字段中）：
13:55 19.11.2012(action_date) admin(profile) add ticket(action_type) deploy this(?) to JustTestProject(content_object)

但现在我有了这个:
13:55 19.11.2012(action_date) admin(profile) 添加票证(action_type) 到 JustTestProject(content_object)

关于如何组织存储触发器对象的模型的任何想法？

谢谢你的帮助

看法：

```
from django.views.generic import ListView
from app.models import ProfileAction

class ActionsList(ListView):
context_object_name = "actions"
template_name = 'index.html'

def get_queryset(self):
    profile = self.request.user.get_profile()
    where = ['(content_type_id={0} AND object_id={1})'.format(\
        x.content_type_id,\
        x.object_id\
        ) for x in profile.profilewatch_set.all()\
    ]
    recent_actions = ProfileAction.objects.extra(
        where=[
            ' OR '.join(where),
            'profile_id={0}'.format(profile.pk)
        ],
        order_by=['-action_date']
    )
    return recent_actions 
```

楷模：

```
#models
from django.contrib.auth.models import User
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic
from django.db import models
from django.db.models.signals import post_save
from django.dispatch import receiver
from django.utils.translation import ugettext_lazy as _

class UserProfile(models.Model):
    user = models.OneToOneField(User, verbose_name=_("Django user"))
    first_name = models.CharField(_("First name"), blank=True, max_length=64, null=True)
    last_name = models.CharField(_("Last name"), blank=True, max_length=64, null=True)
    info = models.TextField(_("Additional information"), null=True)
    phone = models.CharField(verbose_name=_("Phone"), max_length=15, blank=True, null=True)

class ProfileWatch(models.Model):
    profile = models.ForeignKey(to=UserProfile, verbose_name=_(u"User profile"))
    start_date = models.DateTimeField(verbose_name=_(u"Start date"), auto_now_add=True)
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

class ProfileAction(models.Model):
    ACTION_TYPE_CHOICES = (
        (0, _(u"Add comment")),
        (1, _(u"Add discussion")),
        (2, _(u"Add ticket")),
    )
    profile = models.ForeignKey(to=UserProfile, verbose_name=_(u"User profile"))
    action_date = models.DateTimeField(verbose_name=_(u"Start date"), auto_now_add=True)
    action_type = models.PositiveSmallIntegerField(
        verbose_name=_("Status"),
        choices=ACTION_TYPE_CHOICES
    )
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

class Project(models.Model):
    title = models.CharField(_("Project title"), max_length=128)
    description = models.TextField(_("Project description"), blank=True, null=True)
    members = models.ManyToManyField(UserProfile, through='Participation', verbose_name=_("Members"), blank=True, null=True)
    actions = generic.GenericRelation(ProfileAction)

class Ticket(models.Model):
    title = models.CharField(_("Title"), max_length=256)
    project = models.ForeignKey('Project', verbose_name=_("Project"))
    description = models.TextField(_("Ticket description"), blank=True, null=True)
    creator = models.ForeignKey(UserProfile, verbose_name=_("Creator"), related_name='created_tickets')

@receiver(post_save, sender=Ticket)
def add_action_for_ticket(sender, instance, created, **kwargs):
    if created:
        ProfileAction.objects.create(
            profile=instance.creator,
            action_type=2,
            content_object=instance.project
        )

class Discussion(models.Model):
    project = models.ForeignKey(
        to=Project,
        verbose_name=_(u"Project"),
    )
    creator = models.ForeignKey(
        to=UserProfile,
        verbose_name=_(u"Creator"),
    )
    updated = models.DateTimeField(
        verbose_name=_("Last update"),
        auto_now=True
    )
    title = models.CharField(
        verbose_name=_(u"title"),
        max_length=120
    )
    actions = generic.GenericRelation(ProfileAction)

@receiver(post_save, sender=Discussion)
def add_action_for_discussion(sender, instance, created, **kwargs):
    if created:
        ProfileAction.objects.create(
            profile=instance.creator,
            action_type=1,
            content_object=instance.project
        )

class Comment(models.Model):
    discussion = models.ForeignKey(
        to=Discussion,
        verbose_name=_(u"Discussion")
    )
    creator = models.ForeignKey(
        to=UserProfile,
        verbose_name=_(u"Creator"),
    )
    pub_date = models.DateTimeField(
        verbose_name=_("Publication date"),
        auto_now_add=True
    )
    text = models.TextField(
        verbose_name=_("Comment text")
    )

@receiver(post_save, sender=Comment)
def add_action_for_comment(sender, instance, created, **kwargs):
    if created:
        ProfileAction.objects.create(
            profile=instance.creator,
            action_type=0,
            content_object=instance.discussion
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:56:09.507

我解决了这个问题。只需将下一个附加文件添加到 ProfileAction 模型并更改信号处理程序。

```
trigger_content_type = models.ForeignKey(ContentType, related_name='triggers')
trigger_id = models.PositiveIntegerField()
trigger_object = generic.GenericForeignKey('trigger_content_type', 'trigger_id') 
```

# telerik - 无法在页面 OnInit 上添加属性

> ID：13472966
> 
> 赞同：0
> 
> 时间：2012-11-20T12:11:42.393
> 
> 标签：telerik

我有一个名为“rbtnDelete”的 radbutton。我正在尝试在页面 OnInit 方法上注册下面的代码

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "ConfirmDelete", 
                                                objUtl.RadConfirmDelete(),true);
this.rbtnDelete.Attributes.Add("OnClientClicking",
"function(sender,args){ConfirmDelete(sender, args, 'dgvContactList',
'hidContactRowCount');}"); 
```

.但它不起作用。但是，如果我尝试在 aspx 中使用此代码，它工作正常

```
OnClientClicking="function(sender,args)
{
   ConfirmDelete(sender,args,'dgvContactList','hidContactRowCount');
}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:32:30.700

OnClientClicking 是代表 RadButton 的 JavaScript 类的 AJAX 事件，而不是标准的 DOM 事件。如果是 DOM 事件（如下面的第二个示例），您使用的方法会很好用，但由于 Telerik 有 AJAX API，您应该可以这样做：

```
this.rbtnDelete.OnClientClicking = 
"function(sender,args){ConfirmDelete(sender, args, 
    'dgvContactList','hidContactRowCount');}"; 
```

特定于 DOM 的方式是这样的：

```
this.rbtnDelete.Attributes.Add("onclick",
"function(sender,args){ConfirmDelete(sender, args, 'dgvContactList',
'hidContactRowCount');}"); 
```

如果您执行后者，则必须停止传播表单提交。对于前者，这将是更好的选择。

# svn - 是否可以使用 subclipse 恢复失败的结帐？

> ID：13472971
> 
> 赞同：6
> 
> 时间：2012-11-20T12:12:09.030
> 
> 标签：svn, subclipse, svn-checkout

我在 Ubuntu Linux 下使用带有 Subclipse 插件的 STS 2.9。我正在尝试检查整个存储库（包括所有主干和分支），并让它在工作区中整齐地显示为一个项目。我通常做的是检查存储库的根目录。我需要整个存储库的原因是我同时在分支和主干版本上工作，所以拥有这一切对我来说更容易工作。这是我想要实现的目标

```
Workspace
  repo/
    branches/
    tags/
    trunk/
  other_repo/
    branches/
    tags/
    trunk/
  some_other_workspace_entry(ex. java project) 
```

不幸的是，我们有一个超过 5GB 的存储库，并且 subclipse 需要很长时间才能检查它，直到最后它抛出一个错误。所以，我最终得到了一个没有完全签出的存储库，我无法继续签出它。我必须删除所有签出的数据并重新开始（直到它再次失败），或者分别签出主干和分支 - 因此在我的工作区中有一个主干和分支条目，这是我必须避免的。

问题是 - 有没有办法继续未完成的回购结帐？或者是否可以通过子文件夹检查它，但在我的工作区中仍然具有所需的树结构？如果我需要通过文本编辑器手动编辑一些工作区文件，哪些以及如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:13:10.380

只需执行一次`update`，结帐将恢复。或者，您可以使用任何命令行工具执行此操作。

# jquery - Rails 3.1 - Coffescript 无法编译为 js

> ID：13472973
> 
> 赞同：0
> 
> 时间：2012-11-20T12:12:15.750
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.1, coffeescript

我正在将应用程序从 Rails 3.0 迁移到 Rails 3.1。我更改了所有必要的配置文件并安装了 gem（在 [Ryan 的截屏视频的](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)帮助下）。我的布局很少，我想为它们加载不同的脚本。

我有观点：

**布局/console.html.erb**

```
<html lang="ru">
  <head>
    ...
    <%= stylesheet_link_tag "console" %>
    <%= yield :stylesheets%>
    <%= javascript_include_tag 'console' %>
    ...
    <%= yield :javascripts%>
  </head>
</html> 
```

在我的资产中，我创建了文件 console.js：

**资产/javascripts/console.js**

```
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_self
//= require_tree ./console 
```

我还使用此文件夹内的文件创建了文件夹**控制台**：

**资产/javascripts/控制台/users.js.coffee**

```
jQuery ->
  alert "Test" 
```

但是当我加载这样的页面警报时不会出现。

当我调试页面时，我看到 Rails 加载了这个

```
<script type="text/javascript" src="/assets/console.js?body=1"></script> 
```

其中包含：

```
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
; 
```

还有这个：

```
<script type="text/javascript" src="/assets/console/users.js.coffee ?body=1"></script> 
```

其中包含：

```
jQuery ->
alert "Test"
; 
```

我的问题是什么？我怎样才能解决这个问题？

**UPD**：页面头部的链接：

```
<head>
   ...
   <meta charset="utf-8">
   <meta name="csrf-param" content="authenticity_token">
   <meta name="csrf-token" content="PAO2QZ6Z3ykmksXnY55dmCehq+i2COXmSlnZWjErFwA=">
   <link type="image/vnd.microsoft.icon" rel="shortcut icon" href="/favicon.ico">
   <link type="text/css" rel="stylesheet" media="screen" href="/assets/console.css?body=1">
   <link type="text/css" rel="stylesheet" media="screen" href="/assets/console/console.css?body=1">
   <link type="text/css" rel="stylesheet" media="screen" href="/assets/console/pagination.css?body=1">
   <link type="text/css" rel="stylesheet" media="screen" href="/assets/console/search-form.css?body=1">

   <script type="text/javascript" src="/assets/jquery.js?body=1"></script>
   <script type="text/javascript" src="/assets/jquery_ujs.js?body=1"></script>
   <script type="text/javascript" src="/assets/console.js?body=1"></script>
   <script type="text/javascript" src="/assets/console/users.js.coffee ?body=1"></script>  
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:34:31.977

**更新答案：**

一行有一个空格

```
<script type="text/javascript" src="/assets/console/users.js.coffee ?body=1"></script> 
```

那不应该在那里！

确保 . 的文件名中没有任何尾随空格`users.js.coffee`。

**原始答案：（**不是解决方案）

看起来咖啡脚本没有解释该行

```
jQuery -> 
```

您是否正确加载了 jQuery？确保你有

```
gem 'jquery-rails' 
```

在您的**Gemfile**中，您已经运行`bundle install`

也可能值得尝试 的替代语法`$ ->`，尽管它不应该有所作为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:05:15.327

Rails 3.0 应用程序在 Rails 3.1 上运行时可能会丢失一些代码。

首先，检查您的 Gemfile 中是否有这些宝石：

```
group :assets do
  gem 'jquery-rails'
  gem 'jquery-ui-rails'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end 
```

其次，检查这些行是否在 config/application.rb 中：

```
module SAH2Client
 class Application < Rails::Application

    ......

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'
  end

end 
```

# c# - IIS 7 C# Web 服务应该登录到 Intranet

> ID：13472974
> 
> 赞同：0
> 
> 时间：2012-11-20T12:12:16.590
> 
> 标签：c#, asp.net, web-services, iis-7

我尝试运行一个获取页面列表的 Web 服务，然后应该尝试将这些页面打印为 pdf 站点。现在的问题是，服务必须进行身份验证。因为托管页面的 HTTP 服务器位于 Intranet 区域内。

该服务在 IIS7 上运行并用 C# 编写。

感谢您的帮助。

-lony

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:39:59.497

~~希望这会有所帮助；~~

~~[PRB：当您在匿名身份验证关闭时调用 Web 服务时出现“拒绝访问”错误消息](http://support.microsoft.com/kb/811318/en-us)~~

* * *

**更新：**

抱歉误解了您的问题，您不会使用 HTTP 授权标头来执行此操作吗？就像是;

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("url");
request.Credentials = new NetworkCredential("username", "Password"); 
```

# objective-c - 以编程方式跟踪 Mac 上的活动应用程序的最佳方法是什么

> ID：13472975
> 
> 赞同：3
> 
> 时间：2012-11-20T12:12:18.257
> 
> 标签：objective-c, macos, cocoa, macos-carbon

我想创建一个跟踪当前活动应用程序（活动窗口）的后台应用程序。我设法通过使用来获取活动的应用程序，`GetFrontProcess`但现在我需要跟踪它，以便知道它何时发生变化。我想到了两种方法 1.设置一个 Timmer 并在每次定时器触发时重新检查变量（我应该创建一个线程吗？） 2.创建一个专用线程，在循环中检查变量并在每次迭代后休眠几毫秒以避免过度。

效率对我来说很重要，因为这应该是一个无干扰的后台线程。你觉得这些方法对吗？有什么效率方面的考虑吗？很想听听更有效的不同想法。

谢谢你的帮助吉尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T14:00:16.873

你可以观察`NSWorkspace`通知`NSWorkspaceDidActivateApplicationNotification`。

例如：

```
[[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self
                                   selector:@selector(appActivated:)
                                   name:NSWorkspaceDidActivateApplicationNotification
                                   object:nil]; 
```

并有一个方法：

```
-(void)appActivated:(NSNotification*) notification {
    NSRunningApplication* currentApp = [notification.userInfo valueForKey:NSWorkspaceApplicationKey];
    ....
} 
```

# ruby - 在 Sequel 中检索嵌套记录

> ID：13472977
> 
> 赞同：5
> 
> 时间：2012-11-20T12:12:27.747
> 
> 标签：ruby, sqlite, sequel

我正在尝试从以下两个表（在 SQLite 中）中以嵌套形式检索数据

```
DB = Sequel.sqlite('database.sqlite')

DB.create_table? :artists do
    primary_key     :id
    String          :name
end

DB.create_table? :albums do
    primary_key     :id
    String          :title
    foreign_key     :artist_id,
                    :artists,
                    :key => :id
end

artists = DB[:artists]
albums = DB[:albums]

id1 = artists.insert(:name => 'Mike')
id2 = artists.insert(:name => 'John')

albums.insert(:title => 'Only You', :artist_id => id1 )
albums.insert(:title => 'Only Us', :artist_id => id1 )
albums.insert(:title => 'Only Me', :artist_id => id2 ) 
```

我试图得到的输出 -

```
[
  {
    :id => 1,
    :name => 'Mike'
    :albums => [
      {
        :id => 1,
        :title => 'Only You'
      },
      {
        :id => 2,
        :title => 'Only Us'
      }
    ]
  },
  {
    :id => 2,
    :name => 'John'
    :albums => [
      {
        :id => 3,
        :title => 'Only Me'
      }
    ]
  }
] 
```

我已经尝试过“渴望”加载-

```
class Artist < Sequel::Model(:artists)
  one_to_many  :db[:albums], :key => :artist_id
end

class Album < Sequel::Model(:albums)
  many_to_one  :artist, :key => :artist_id
end

Artist.eager(:albums).all{ |a| p a } 
```

但这没有用。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:58:25.720

`Artist.eager(:albums).all`确实急切地加载专辑，但`{|a| p a}`不会显示专辑（因为`Sequel::Model#inspect`只显示当前模型的值，而不是任何关联的对象）。用于`{|a| p [a, a.albums]}`查看相册是否已加载。

如果你想产生你描述的哈希：

```
Artist.eager(:albums).all.map do |a|
  a.values.merge(:albums=>a.albums.map{|al| al.values})
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:19:51.570

您可以向 Artist 添加一个方法以按照您想要的方式输出它

```
class Artist < Sequel::Model(:artists)
  one_to_many  :albums, :key => :artist_id

  def my_hash
    to_hash.merge!(
        {
            :albums => albums.map{|a| 
                a.to_hash.reject!{ |k,v| 
                    k==:artist_id
                }
            }
        }
    )
  end
end

class Album < Sequel::Model(:albums)
  many_to_one  :artist, :key => :artist_id
end

records = Artist.all.map{ |a| a.my_hash }
p records 
```

而不是使用`reject!`它会更干净，而是添加一个`my_hash`Album 的方法来返回一个没有 的哈希`:artist_id`，但你明白了。这输出：

```
[
  {
    :albums=>[
      {
        :title=>"Only You", 
        :id=>1
      }, 
      {
        :title=>"Only Us", 
        :id=>2
      }
    ],
    :name=>"Mike",
    :id=>1
  },
  {
    :albums=>[
      {
        :title=>"Only Me", 
        :id=>3
      }
    ], 
    :name=>"John", 
    :id=>2
  }
] 
```

# asp.net-mvc - asp.net mvc 和实体框架中的文件上传和获取

> ID：13472978
> 
> 赞同：0
> 
> 时间：2012-11-20T12:12:27.947
> 
> 标签：asp.net-mvc, entity-framework, sql-server-2008-r2

这是我的代码，它在名为 Books 的文件夹中上传带有路径的文件，我只希望将路径存储在数据库中，然后根据路径从 Books 文件夹中获取文件。有人可以指导我如何去做.. 下面是我的代码，我正在使用 asp.net mvc 4 和实体框架。

```
 [HttpPost]
    public ActionResult upload(HttpPostedFileBase file)
    {
        //verify that the file is selected and not empty
        if (file != null && file.ContentLength > 0)
        {
            //getting the name of the file
            var fileName = Path.GetFileName(file.FileName);

            //store file in the Books folder
            var path = Path.Combine(Server.MapPath("~/BOOKS"), fileName);
            file.SaveAs(path);
        }
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:24:18.907

如果我对您的理解正确，您想在数据库中存储书籍路径的字符串并将书籍文件存储在 ~/Books 下？

*   您已经保存到“~/Books”部分了
*   创建一个包含一些字段（ID、BookTitle、BookPath）的数据库表，将您的模型放入应用程序（无论您选择什么方法；实体框架等），然后编写逻辑代码：

```
 [HttpPost]
    public ActionResult upload(HttpPostedFileBase file)
    {
        //verify that the file is selected and not empty
        if (file != null && file.ContentLength > 0)
        {
            //getting the name of the file
            var fileName = Path.GetFileName(file.FileName);

            //store file in the Books folder
            var path = Path.Combine(Server.MapPath("~/BOOKS"), fileName);
            try{
                file.SaveAs(path);
                db.Table.Add(new Book{BookTitle: "Whatever", BookPath: path});
                db.SaveChanges();
            }catch(Exception ex){

            }
        }
        return View();
    } 
```

# ruby-on-rails - 多次响应一个请求？

> ID：13472982
> 
> 赞同：0
> 
> 时间：2012-11-20T12:12:45.410
> 
> 标签：ruby-on-rails, ajax

我的 Rails 应用程序中的一个地方需要从外部服务器加载许多响应，目前看起来像这样：

1.  用户向服务器发出 AJAX 请求。显示“正在加载数据...”。
2.  5-30 秒后，rails 应用程序发送响应（假设数据尚未缓存）。

如果我能在漫长的等待期间让用户了解请求的进度，那会更好。如：

1.  用户提出请求（如前所述）。
2.  显示消息“正在检索 ABC”
3.  显示消息“正在检索 XYZ”
4.  显示消息“处理数据”
5.  正常响应。

**我该怎么做呢？**我不认为向一个请求发送多个 JavaScript 响应是可能的，但不知道这样做的正确方法是什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:22:12.467

这很棘手，但 Rails 支持流式传输请求的概念。但是你可能需要在你的项目中做很多工作才能完成这项工作。

Tenderlove (Aaron Patterson) 发布[了一篇关于 Streaming 如何在 Rails 中工作的介绍](http://tenderlovemaking.com/2012/07/30/is-it-live.html)，我相信有一个关于这个主题的 Railscast。

可能更简单的解决方案是将其拆分为多个请求。所以主请求（假设它是一个 ajax 请求）需要永远完成。同时，您轮询不同 ajax 请求的状态，主操作使用其进程更新数据库，以便其他请求可以检索该状态并发送回适当的响应（当前主请求在该进程中的位置）

所以我会为每个请求分配一个请求 id 之类的东西，然后为这些请求及其状态创建一个数据库表（可以像只有 id:integer 和 status:string 一样简单）

您在客户端上分配请求 ID（使用一些随机数据来创建哈希或其他内容）并使用该 ID 开始长请求。客户端然后轮询具有相同 id 的另一个端点以获取状态。

与此同时，长时间运行的请求会使用它给出的 id 以及它当前正在处理该请求的位置更新状态表。

# vb.net - Winforms 中的字距调整/字体跟踪问题

> ID：13472983
> 
> 赞同：2
> 
> 时间：2012-11-20T12:12:51.050
> 
> 标签：vb.net, winforms, visual-studio-2010, rdlc

我在 Visual Studio 2010 中创建了一个基本的 RDLC 报表。在报表设计器中它看起来很好，当我使用报表查看器查看报表时它看起来也很好。但是，一旦我将报告发送到打印机，字距调整或跟踪似乎存在问题，例如字符之间没有空格，并且所有字母都比应有的宽一些。以前有没有人遇到过这种情况，如果有，您知道如何解决吗？

# php - 如何在 PHP SOLR CLIENT 中编写 solr 查询

> ID：13472984
> 
> 赞同：1
> 
> 时间：2012-11-20T12:12:48.717
> 
> 标签：php, solr, solrj

我使用 apache solr 3.6 和 php solr 客户端。现在我做简单的 solr 查询，比如 一个词`$query = 'url:"'.$searchSubject.'"';` 在哪里。`$searchSubject`但我想用两个或更多的词进行一些查询。我不明白我必须如何将一些其他参数添加到 PHP SOLR CLIENT 的代码中。

现在我只能添加查询、偏移量、限制。 `$response = $this->solr->search($query, $offset = 0, $limit = 10000);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:27:17.983

[您可以使用lucene 查询解析器语法](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)中指定的格式将多个单词插入参数 $query

$query = 'url:"' . $searchSubject . '"';

如果您想搜索两个 url，查询可以是

$query = 'url:("' . $searchSubject1 . '" OR "' . $searchSubject2 . '")';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T06:31:28.617

在 solr 中，您可以简单地为多个单词创建查询。

```
$query = url:"($searchSubject1 $searchSubject2 $searchSubject3)"; 
```

$searchSubject1 和 $searchSubject2 之间的空格将采用默认 OR 条件。

# groovy - Groovy：如何在静默模式下运行 .groovy 脚本？

> ID：13472987
> 
> 赞同：0
> 
> 时间：2012-11-20T12:13:09.123
> 
> 标签：groovy

如何在静默模式下运行 .groovy 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:13:36.980

我相信[Windows 安装程序](http://groovy.codehaus.org/Download)包含`groovyw.exe`应该做你想做的事。

虽然从未尝试过：-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T04:49:38.273

我认为你可以使用。

```
 groovy myScript.groovy --silent 
```

希望这可以帮到你！

# android - 为应用小部件实现 onclick 监听器

> ID：13472990
> 
> 赞同：1
> 
> 时间：2012-11-20T12:13:29.770
> 
> 标签：android, android-widget

我有一个显示一些 rss 提要的应用程序小部件。它包含一个显示新闻标题的文本视图和一个显示图像的图像视图。在该小部件中，我想添加两个按钮，它们的作用是下一个和上一个，以浏览新闻标题。我知道如何在活动中执行此操作，但是如何在小部件中为这些按钮实现 onclick 侦听器

这是我的 xml=>

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
<ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:scaleType="centerCrop"
            android:src="@drawable/logo" />
<ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="100dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/imageView1"
            android:scaleType="centerCrop"
            android:src="@drawable/titlebg2" />
<ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_below="@+id/imageView2"
            android:layout_centerHorizontal="true"
            android:scaleType="centerCrop"
            android:src="@drawable/foot" />
<ImageView
            android:id="@+id/imageView4"
            android:layout_width="90dp"
            android:layout_height="90dp"
            android:layout_alignParentLeft="true"
            android:layout_alignTop="@+id/imageView2"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:scaleType="centerCrop"
            android:src="@drawable/img" />
<Button
            android:id="@+id/next"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/imageView1"
            android:layout_marginRight="3dp"
            android:layout_marginTop="3dp"
            android:background="@drawable/up" />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/up"
            android:layout_alignBottom="@+id/up"
            android:layout_marginLeft="16dp"
            android:layout_marginRight="25dp"
            android:layout_toRightOf="@+id/imageView4"
            android:text="TextView"
            android:textColor="#ffff" />
      <Button
            android:id="@+id/previous"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_alignBottom="@+id/imageView2"
            android:layout_alignLeft="@+id/up"
            android:layout_marginBottom="3dp"
            android:background="@drawable/down" />

    </RelativeLayout>

</LinearLayout> 
```

以下是我的 onupdate 函数，=>

```
 public void onUpdate( Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds )
        {

         parse();//Here Iam parsing the xml
         RemoteViews remoteViews;
             ComponentName watchWidget;

            remoteViews = new RemoteViews( context.getPackageName(), R.layout.widget_main );
            watchWidget = new ComponentName( context, madhyamambig.class );

            remoteViews.setTextViewText( R.id.title, Title[0]);

            Bitmap bitmap;
            try {
                bitmap = BitmapFactory.decodeStream((InputStream)new URL(image[0]).getContent());

                 remoteViews.setImageViewBitmap(R.id.imageView4, bitmap);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                            appWidgetManager.updateAppWidget( watchWidget, remoteViews );

        } 
```

在活动中，我们可以简单地这样做，

```
 int i=0;
      next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

 Bitmap bitmap;
                try {
                    bitmap = BitmapFactory.decodeStream((InputStream)new      URL(image[i+1]).getContent());

                     remoteViews.setImageViewBitmap(R.id.imageView4, bitmap);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                                appWidgetManager.updateAppWidget( watchWidget, remoteViews );

            }
          }

        }); 
```

我想在小部件中实现相同的功能。有人请帮助我...在此先感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:22:56.160

您可以使用[RemoteViews.setOnClickPendingIntent](http://developer.android.com/reference/android/widget/RemoteViews.html#setOnClickPendingIntent%28int,%20android.app.PendingIntent%29)方法。

然后启动将被服务、广播接收器或服务捕获的[PendingIntent 。](http://developer.android.com/reference/android/app/PendingIntent.html)此意图所针对的上下文将能够通过再次使用 RemoteViews 来操作源小部件。

点击处理有点复杂，因为这里的一切都是在远程进程中操作 UI 元素。

# php - foreach 中的参数无效 - FB 图 API

> ID：13472991
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:13:31.033
> 
> 标签：php, facebook-graph-api, foreach, json

> **可能重复：**
> [foreach 中的参数无效](https://stackoverflow.com/questions/13475891/invalid-argument-in-foreach)

我只是想解析 FB graphi API 结果。

当我尝试 foarch 循环时，我得到 Invalid Argument 错误

这是代码

```
$url = urlencode("http://***.com/pages/view?id=2153&item=Mens-Collection-Shoes");

$request_url ="https://graph.facebook.com/comments/?ids=".$url;
$requests = file_get_contents($request_url);
$fb_response = json_decode($requests, true);

foreach($fb_response->data as $item){
echo $item->message . '<br />';
echo $item->from->id . '<br />';
echo $item->from->name . '<br />';
echo $item->message . '<br />';
echo $item->created_time . '<br /><br />';
} 
```

当我转储时`$requests`，我得到（由我格式化）：

```
{"http:\/\/***.com\/pages\/view?id=2153&item=Mens-Collection-Shoes":
{"comments":
{"data":[
{"id":"***_78606","from":
{
"name":"Laura","id":"***"},
"message":"I love these.",
"can_remove":
false,
"created_time":"2012-11-20T10:20:16+0000",
"like_count":0,
"user_likes":false
}],
"paging":{
"next":"https:\/\/graph.facebook.com\/***\/comments?limit=25&offset=25&__after_id=***_78606"
}}}} 
```

有任何想法吗？可能是一些我看不到的简单的东西

尝试过有无`urlencode`但没有区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:19:03.520

我相信

`json_decode($blah, TRUE)`

返回一个数组......不是一个对象，尝试从

`$fb_response = json_decode($requests, true);`

# c# - DataContext 根据授权声明而变化

> ID：13472992
> 
> 赞同：2
> 
> 时间：2012-11-20T12:13:40.583
> 
> 标签：c#, wcf

我已经实现了服务类，比如说“DataSourceService”。现在我想通过 WCF 公开它并使其成为 REST。没有问题，这可以在 WCF 中轻松完成。

但是，我想说，架构问题来了。

所以假设我有一个方法：

```
 IEnumerable<string> ReadAllInventoryItems() 
```

我必须`IEnumerable<string>`根据用户授权声明（角色或权限等）返回的问题。我可以通过在 DataSourceService 的每个方法中验证这些声明来做到这一点。像这样的东西：

```
IEnumerable<string> ReadAllInventoryItems()
{
     var companyName = ReadCompanyNameFromAuthorisationContext();
     var items = ReadAll().Where( i => i.CompanyName == companyName).ToList();
     return Items;
} 
```

我会说这种方法存在一个大问题。即：如果没有此“声明”上下文，DataSourceService 将变得不可用。当我在没有 WCF 的情况下使用它时，我必须为每个调用准备 Claims 或 UserIdentity 上下文。

所以下一步对我来说是“考虑 WCF IDispatchMessageInspector”，但后来我意识到我必须实现一个 IDispatchMessageInspector 和一个 OperationInvoker，然后我可以用某种具有权限的属性来装饰 Web 服务方法（这个属性稍后将在 OperationInvoker 中使用）。

最后我会得到：

```
 [AuthorizationFiltering]
    IEnumerable<string> ReadAllInventoryItems()
    {         
         var items = ReadAll().Where( i => i.CompanyName == companyName).ToList();
         return Items;
    } 
```

你怎么看？

我应该坚持“在 DataSourceService 的每个方法中验证这些声明”还是 WCF IDispatchMessageInspector，MethodInvoker 的故事还不错……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:28:11.890

我会说这完全取决于你想如何设计你的 API，我认为如果你希望你的 API 对来电者，如果我不得不打电话给您的服务，我必须确切地知道您期望您的来电者提出什么样的要求。

但是，如果您的所有调用者都知道您正在使用基于声明的授权，您可以设计您的方法来“要求”某些声明，那么您的方法就可以了。你可以使用例如类似的东西：

```
[PrincipalPermission(SecurityAction.Demand, Role = ManagersWithInventory)] 
```

但请记住，如果调用者不拥有此特定声明，他将无法调用该方法。所以这可能是期望的行为，也可能不是。

在一个非常简单的情况下，我只需设计一个带有显式“过滤器”的服务调用，例如

```
MyService.GetInventoryByReferenceId(string Id) 
```

该契约使调用非常直观，调用者有责任决定如何填充过滤器。

***编辑***

好的，我并不是说您实施 IDispatchMessageInspector 是错误的，但可能有点矫枉过正，因为您不必要地“嗅探”数据，但您必须进行另一次外部往返才能获得调用者的身份。

我认为更好的方法是在双方都使用“真实”声明身份：Microsoft.IdentityModel.dll，并透明地处理声明，让 WCF 使用它传输凭据。

需要注意的一件事是，调用您的服务的旧桌面应用程序仍然可以工作，因为 WIF 将以前的 IIdentity 包装在 IClaimsIdentity 中，因此您甚至可以在有或没有声明的情况下使用“用户”（在您的服务端）

希望能帮助到你，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:05:02.203

**更新/解决方案？：**

经过一番思考和豪尔赫·阿尔瓦拉多的评论。我决定实施以下事情。

所以...服务类不知道安全上下文。它确实知道有一个属性（枚举）“公司名称”。例如：

```
public ClientEnumerationType? CurrentClient { get; set; } 
```

当我服务想要从 ReadInventory 函数返回结果时，我有以下代码：

```
IEnumerable<string> ReadAllInventoryItems()
{
     var items = ReadAll();

     return CurrentClient.HasValue ? FilterByClient(items, urrentClient.Value).ToList() : items;
} 
```

因此，该实现允许我在 WCF 之外使用该类而不会出现任何问题。

WCF 呢？我在想我到底需要 WCF 什么，实际上我只需要一件事。授权客户端，实例化服务类并设置 CurrentClient 属性值。

为了实现这一点，我已经实现了几件事。

**1) IEndpointBehavior**

我需要它来为每个合同方法安装 Message Inspector 和 InstanceProvider 和 ParameterInspectors。

**2) IDispatchMessageInspector**

获取 WCF 消息，从请求中提取令牌，验证令牌并将 Thread.CurrentPrincipal 设置为具有来自请求的所有声明值的 ClaimsPrincipal。

**3)IParameterInspector**

我需要它来验证合同中每种方法的 Claim = Action。例如我有：

```
 [OperationContract]
    [ClaimActionRequred(Action = "read")]        
    IEnumerable<string> ReadAllInventoryItems() 
```

这意味着身份提供者应该为客户端令牌提供操作声明。在进行实际调用之前，该声明值正在 IParameterInspector 中进行分析。

**4）最后一块 - IInstanceProvider**

我只需要实例化 ServiceClass 并根据声明值传递 CurrentClient 属性值。

完毕。

我不确定我做对了。但这是我已经做出的解决方案。

# java - 为什么这个 SimpleDateFormat 会丢失有关时间的信息？

> ID：13472993
> 
> 赞同：1
> 
> 时间：2012-11-20T12:13:41.373
> 
> 标签：java, simpledateformat

我有这个处理 ResultSet 的 Java 方法。

```
protected void populateDto(String[] rowSet, ResultSet rs, String[] columunsNames) throws SQLException {
    for (int i = 0; i < rowSet.length; i++) {
        rowSet[i] = rs.getString(columunsNames[i]);
    }
} 
```

如您所见，所有结果都被视为字符串类型（无论是列类型，都使用 getString）。当遇到日期列时，它会自动转换为字符串。结果日期将与此类似：

> 2012-08-01 16:10:47.0

我修改了上面的脚本，创建了类似的东西：

```
protected void populateDto(String[] rowSet, ResultSet rs, String[] columunsNames) throws SQLException {
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    for (int i = 0; i < rowSet.length; i++) {
        Object o = rs.getObject(columunsNames[i]);
        if (o instanceof Date) {
            rowSet[i] = formatter.format((Date)o);
        } else {
            rowSet[i] = (String)o;
        }   
    }
} 
```

此方法将所有内容视为对象，之后将检查该对象是否是 Date 的实例。如果这是真的，它将根据`formatter`. 问题是这样返回的数据是这样的：

> 2012-08-01 00:00:00.0

为什么？

**更新 1 - 最后的工作方法实现：**

```
protected void populateDto(String[] rowSet, ResultSet rs, String[] columunsNames, SimpleDateFormat formatter) throws SQLException {
    Timestamp ts = null;
    for (int i = 0; i < rowSet.length; i++) {
        Object obj = rs.getObject(columunsNames[i]);
        if (obj instanceof Date) {
            ts = rs.getTimestamp(columunsNames[i]);
            rowSet[i] = formatter.format(ts);
        } else {
            if(obj!=null)
                rowSet[i] = obj+"";
            else
                rowSet[i] = "";
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:15:09.767

[`java.sql.Date`](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)不存储有关时间的信息：

> 为了符合 SQL DATE 的定义，由 java.sql.Date 实例包装的毫秒值必须通过在实例关联的特定时区中将小时、分钟、秒和毫秒设置为零来“规范化” .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:21:48.927

*此方法将所有内容视为对象，之后将检查该对象是否是 Date 的实例。*

而不是`date`use `java.sql.Timestamp`，有了它，您可以获取 Date 以及 Time ，您可以持久化数据或获取数据。

*更新 1*

你可以有一个通用的方法，比如

```
public Timestamp getTimestamp(int columnIndex) throws SQLException {
    Object value = getObject(columnIndex);
    if (value instanceof Timestamp) return (Timestamp) value;

  } 
```

这将返回日期和时间，您可以通过传递列索引来调用。

# eclipse - 自定义eclipse CDT c++新类模板

> ID：13472994
> 
> 赞同：1
> 
> 时间：2012-11-20T12:13:43.257
> 
> 标签：eclipse, templates, customization, eclipse-cdt

我正在使用eclipse CDT Juno。是否可以在标准“新建类”对话框之后自定义 C++ 头文件和源文件？

我想稍微更改生成的代码以包含复制构造函数和赋值运算符。

例如，我想将以下成员添加到每个生成的类中，因此生成的类将如下所示：

```
class ClassName
{
public:
ClassName();
virtual ~ClassName();

private:
// ---------- What I want to add: begin ---------
ClassName(const ClassName&);
ClassName& operator=(const ClassName&);
// ---------- What I want to add: end ---------
}; 
```

谢谢

# javascript - 无法使用 AJAX 上传文件

> ID：13472995
> 
> 赞同：2
> 
> 时间：2012-11-20T12:13:43.887
> 
> 标签：javascript, jquery

我正在尝试通过 AJAX 上传文件。我进行了很多搜索，但找到了仅使用表单提交的示例，但我不能使用表单提交。我已经尝试了几个示例，但没有任何东西到达我的服务器。当我尝试[这个链接](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)时，它起作用了，但它再次通过表单提交。

这是与上下文相关的一段代码

**JS代码**

```
function _upload(filedata) {
    $.ajax({
        url: './myURI',
        data: filedata,
        type: 'POST',

        contentType: 'multipart/form-data',
        mimeType: 'multipart/form-data',    //Property added in 1.5.1

        success: function (data) {
            alert(data);
        }
    });
}
$("#cpc-uploadBtn").click(function (evt) {
                var data;
                data = new FormData();
                data.append('file', $('#cpc-upload')[0].files[0]);
                _upload(data);

            }); 
```

**HTML 部分**

```
 <input id="cpc-upload" name="file" type="file" />
    <button id="cpc-uploadBtn" type="button">Upload</button> 
```

## 编辑

有没有其他方法可以在不使用表单提交和表单数据的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:35:29.977

假设您使用的是 Safari/FireFox（只有那些支持`FormData`），您需要修改您的`$.ajax`调用：

```
$.ajax({
    url: './myURI',
    data: filedata,
    type: 'POST',
    contentType: false,
    processData: false,
    success: function (data) {
        alert(data);
    }
}); 
```

将`contentType`选项设置为 false 将强制 jQuery 不为您添加 Content-Type 标头（否则将缺少边界字符串）。此外，该`processData`标志必须设置为 false，因此 jQuery 不会尝试将您`FormData`转换为字符串。

现在，如果您知道您的客户正在使用 HTML5，您应该尝试使用新的 JavaScript File API - 查看以下文章：

*   [在 JavaScript 中处理文件，第 1 部分：基础知识](http://www.nczonline.net/blog/2012/05/08/working-with-files-in-javascript-part-1/)
*   [在 JavaScript 中处理文件，第 2 部分：FileReader](http://www.nczonline.net/blog/2012/05/15/working-with-files-in-javascript-part-2/)
*   [在 JavaScript 中处理文件，第 3 部分：进度事件和错误](http://www.nczonline.net/blog/2012/05/22/working-with-files-in-javascript-part-3/)
*   [在 JavaScript 中处理文件，第 4 部分：对象 URL](http://www.nczonline.net/blog/2012/05/31/working-with-files-in-javascript-part-4-object-urls/)
*   [在 JavaScript 中处理文件，第 5 部分：Blob](http://www.nczonline.net/blog/2012/06/05/working-with-files-in-javascript-part-5-blobs/)

在所有其他情况下，您被迫使用自定义插件，例如：

*   [上传](http://www.uploadify.com/)
*   [jQuery 表单插件](http://www.malsup.com/jquery/form/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:23:45.173

我想目前 FormData 对象只在 Safari/Firefox 中被支持，它还没有被大多数浏览器采用。

我最近在为 asp.net 寻找 ajax 文件上传器时遇到了很多困难，我目前在我的项目中使用这个：

[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:30:38.057

如果你想使用，有一个小的选择

```
<script>
    // wait for the DOM to be loaded
    $(document).ready(function() 
    {
        // bind 'myForm' and provide a simple callback function
       $("#tempForm").ajaxForm({
       url:'../calling action or servlet',
       type:'post',
       beforeSend:function()
       {
         alert("perform action before making the ajax call like showing soinner image");
       },
       success:function(e){
        alert("data is"+e);
            alert("now do whatever you want with the data");
       }
       });
    });
</script> 
```

[你可以在这里](http://www.malsup.com/jquery/form/#download)找到插件

# cassandra - 如何处理 4 节点、2 DC Cassandra 集群中的 QUORUM 一致性

> ID：13472997
> 
> 赞同：1
> 
> 时间：2012-11-20T12:13:52.617
> 
> 标签：cassandra

我有一个四节点，两个数据中心 cassandra 1.1.1 集群。我的密钥空间是每个数据中心的 RF 2，为我提供每个节点上的完整数据副本。该集群用于供应商产品，它使用 QUORUM 的 r/w 一致性。使用此配置，我只能处理一个节点的丢失......我如何调整它以处理数据中心的丢失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:01:31.343

除非您的数据中心位于相同的物理位置，否则这种配置的网络开销将非常糟糕。原因是仲裁一致性在比较副本时不会关注 DC。因此，在确认读取或写入之前，您将经常需要跨越数据中心线。切换到本地仲裁将解决延迟问题，但如果一个节点出现故障，将有效地导致数据中心停机。但是，只要第二个 DC 中的两个节点都启动（并且您的应用程序可以正确处理此问题），您仍然会启动并运行。

话虽如此，一般的经验法则是每个数据中心最少有 3 个节点。如果您将一个节点添加到每个数据中心并切换到本地仲裁 R/W，您可能会在每个 DC 中丢失一个节点，但该 DC 仍可运行，或者您可能会丢失整个 DC，而另一个仍可运行。