# StackOverflow 问答 15690000-15690999

# xml - Spring 3.1 与 JBoss 7.1 Class Not Found 的集成错误

> ID：15690004
> 
> 赞同：0
> 
> 时间：2013-03-28T18:57:30.847
> 
> 标签：xml, spring, jboss, spring-security, classnotfoundexception

我有一个单一的战争项目，我将 BlazeDS 与 JBoss 7.1 集成。我可以正常部署我的war文件，但是当我尝试添加安全性时，我得到以下堆栈跟踪

```
13:23:37,222 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of "FooBarBlazeDS.war"
13:23:37,797 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-16) Class Path entry xercesImpl.jar in "/C:/Users/Rasheed/Clients/FooBar/jboss-as-7.1.1.Final/standalone/deployments/FooBarBlazeDS.war/WEB-INF/lib/xalan.jar"  does not point to a valid jar for a Class-Path reference.
13:23:37,799 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-16) Class Path entry xml-apis.jar in "/C:/Users/Rasheed/Clients/FooBar/jboss-as-7.1.1.Final/standalone/deployments/FooBarBlazeDS.war/WEB-INF/lib/xalan.jar"  does not point to a valid jar for a Class-Path reference.
13:23:38,083 WARN  [org.jboss.as.ee] (MSC service thread 1-12) JBAS011006: Not installing optional component org.springframework.web.context.ContextLoaderListener due to exception: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener from [Module "deployment.FooBarBlazeDS.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
    at java.lang.Class.forName0(Native Method) [rt.jar:1.7.0_01]
    at java.lang.Class.forName(Unknown Source) [rt.jar:1.7.0_01]
    at org.jboss.as.server.deployment.reflect.DeploymentClassIndex.classIndex(DeploymentClassIndex.java:54) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:79)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_01]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01]

13:23:38,095 WARN  [org.jboss.as.ee] (MSC service thread 1-12) JBAS011006: Not installing optional component org.springframework.web.filter.DelegatingFilterProxy due to exception: java.lang.ClassNotFoundException: org.springframework.web.filter.DelegatingFilterProxy from [Module "deployment.FooBarBlazeDS.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
    at java.lang.Class.forName0(Native Method) [rt.jar:1.7.0_01]
    at java.lang.Class.forName(Unknown Source) [rt.jar:1.7.0_01]
    at org.jboss.as.server.deployment.reflect.DeploymentClassIndex.classIndex(DeploymentClassIndex.java:54) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:79)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_01]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01]

13:23:38,105 WARN  [org.jboss.as.ee] (MSC service thread 1-12) JBAS011006: Not installing optional component org.springframework.web.servlet.DispatcherServlet due to exception: java.lang.ClassNotFoundException: org.springframework.web.servlet.DispatcherServlet from [Module "deployment.FooBarBlazeDS.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
    at java.lang.Class.forName0(Native Method) [rt.jar:1.7.0_01]
    at java.lang.Class.forName(Unknown Source) [rt.jar:1.7.0_01]
    at org.jboss.as.server.deployment.reflect.DeploymentClassIndex.classIndex(DeploymentClassIndex.java:54) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:79)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_01]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01]

13:23:38,594 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/FooBarBlazeDS]] (MSC service thread 1-8) Error configuring application listener of class org.springframework.web.context.ContextLoaderListener: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener from [Module "deployment.FooBarBlazeDS.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at org.jboss.as.web.deployment.WebInjectionContainer.newInstance(WebInjectionContainer.java:72) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3342) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_01]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01]

13:23:38,610 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/FooBarBlazeDS]] (MSC service thread 1-8) Skipped installing application listeners due to previous error(s)
13:23:38,611 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-8) Error listenerStart
13:23:38,612 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-8) Context [/FooBarBlazeDS] startup failed due to previous errors
13:23:38,616 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC00001: Failed to start service jboss.web.deployment.default-host./FooBarBlazeDS: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./FooBarBlazeDS: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_01]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01]

13:23:38,622 INFO  [org.jboss.as] (MSC service thread 1-9) JBAS015951: Admin console listening on http://127.0.0.1:9990
13:23:38,622 ERROR [org.jboss.as] (MSC service thread 1-9) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 4559ms - Started 171 of 250 services (2 services failed or missing dependencies, 76 services are passive or on-demand)
13:23:38,824 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "FooBarBlazeDS.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./FooBarBlazeDS" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./FooBarBlazeDS: JBAS018040: Failed to start context"}}
13:23:38,884 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment FooBarBlazeDS.war in 60ms
13:23:38,886 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.web.deployment.default-host./FooBarBlazeDS: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./FooBarBlazeDS: JBAS018040: Failed to start context

13:23:38,888 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./FooBarBlazeDS" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./FooBarBlazeDS: JBAS018040: Failed to start context"}}}} 
```

我的 Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app>

    <display-name>FooBarBlazeDS</display-name>
    <description>FooBar BlazeDS Application</description>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/config/web-application-config.xml
            /WEB-INF/config/web-application-security.xml</param-value>
    </context-param>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>FooBarRemoteServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>FooBarRemoteServlet</servlet-name>
        <url-pattern>/messagebroker/*</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <login-config>
        <auth-method>BASIC</auth-method>
    </login-config>

</web-app> 
```

/WebContent/WEB-INF/lib 中的 Jar 文件

```
cfgatewayadapter.jar      
commons-codec-1.3.jar        
commons-httpclient-3.0.1.jar
commons-logging.jar
flex-messaging-common.jar
flex-messaging-core.jar
flex-messaging-opt.jar
flex-messaging-proxy.jar
flex-messaging-remoting.jar
flex-rds-server.jar
org.springframework.aop-sources-3.1.4.RELEASE.jar
org.springframework.asm-sources-3.1.4.RELEASE.jar
org.springframework.aspects-sources-3.1.4.RELEASE.jar
org.springframework.beans-sources-3.1.4.RELEASE.jar
org.springframework.context.support-sources-3.1.4.RELEASE.jar
org.springframework.context-sources-3.1.4.RELEASE.jar
org.springframework.core-sources-3.1.4.RELEASE.jar
org.springframework.expression-sources-3.1.4.RELEASE.jar
org.springframework.instrument.tomcat-sources-3.1.4.RELEASE.jar
org.springframework.instrument-sources-3.1.4.RELEASE.jar
org.springframework.jdbc-sources-3.1.4.RELEASE.jar
org.springframework.jms-sources-3.1.4.RELEASE.jar
org.springframework.orm-sources-3.1.4.RELEASE.jar
org.springframework.oxm-sources-3.1.4.RELEASE.jar
org.springframework.spring-library-3.1.4.RELEASE.libd
org.springframework.test-sources-3.1.4.RELEASE.jar
org.springframework.transaction-sources-3.1.4.RELEASE.jar
org.springframework.web.portlet-sources-3.1.4.RELEASE.jar
org.springframework.web.servlet-sources-3.1.4.RELEASE.jar
org.springframework.web.struts-sources-3.1.4.RELEASE.jar
org.springframework.web-sources-3.1.4.RELEASE.jar
spring-security-acl-2.0.4.jar
spring-security-catalina-2.0.4.jar
spring-security-core-2.0.4.jar
spring-security-core-tiger-2.0.4.jar
spring-security-taglibs-2.0.4.jar
xalan.jar 
```

如何配置它以与 Jboss 7.1 一起使用并摆脱这些 CNF 错误？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:09:13.453

该类`DelegatingFilterProxy`是 Spring Framework 的 spring-web 库的一部分。[你可以从这里](http://mvnrepository.com/artifact/org.springframework/spring-web)的 maven 获得你想要的版本。选择您想要的版本，下载二进制文件（它是一个 jar）并将其添加到您的 lib 文件夹（添加到类路径中）。

使用 maven 依赖项，它是（对于版本 3.1.4.RELEASE）

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.1.4.RELEASE</version>
</dependency> 
```

如果您获得更多`ClassNotFoundException`s，请查找您缺少的类并将包含它的 jar 添加到您的类路径中。

# installation - “合并 PolicyStore 应用程序条带”处的 OBIEE 11g 安装错误

> ID：15690011
> 
> 赞同：0
> 
> 时间：2013-03-28T18:57:52.523
> 
> 标签：installation, obiee, oracle-fusion-middleware

我正在尝试通过 WebLogic 10.3.6 在全新的 Windows 8 机器上安装 OBIEE 11.1.1.6。从我过去 OBIEE 安装问题的经验来看，我更喜欢使用仅软件模式进行安装。在配置期间，我在“合并 PolicyStore 应用程序条带”步骤中收到以下错误。

`[2013-03-28T22:06:31.158+05:30] [as] [TRACE] [] [oracle.as.install.bi] [tid: 15] [ecid: 0000Jqkm05x5yW^5xV_AiW1HL2cF000006,0] [SRC_CLASS: oracle.as.install.bi.biconfig.BIConfigMain] [SRC_METHOD: doExecute] Copying file: C:\Oracle\Middleware\Oracle_BI1\bifoundation\admin\provisioning\bi-policystore.xml to directory: C:\Oracle\Middleware\user_projects\domains\bifoundation_domain\config\fmwconfig, overwrite: true failed.[[ oracle.bi.installhandler.util.FileSystemException: Copying file: C:\Oracle\Middleware\Oracle_BI1\bifoundation\admin\provisioning\bi-policystore.xml to directory: C:\Oracle\Middleware\user_projects\domains\bifoundation_domain\config\fmwconfig, overwrite: true failed. at oracle.bi.installhandler.util.FileSystemManagerImpl.copyFile(FileSystemManagerImpl.java:194) at oracle.as.install.bi.biconfig.standard.MergePolicyStoreTask.doExecute(MergePolicyStoreTask.java:59) at oracle.as.install.bi.biconfig.standard.AbstractProvisioningTask.execute(AbstractProvisioningTask.java:70) at oracle.as.install.bi.biconfig.standard.StandardProvisionTaskList.execute(StandardProvisionTaskList.java:61) at oracle.as.install.bi.biconfig.BIConfigMain.doExecute(BIConfigMain.java:113) at oracle.as.install.engine.modules.configuration.client.ConfigAction.execute(ConfigAction.java:371) at oracle.as.install.engine.modules.configuration.action.TaskPerformer.run(TaskPerformer.java:88) at oracle.as.install.engine.modules.configuration.action.TaskPerformer.startConfigAction(TaskPerformer.java:105) at oracle.as.install.engine.modules.configuration.action.ActionRequest.perform(ActionRequest.java:15) at oracle.as.install.engine.modules.configuration.action.RequestQueue.perform(RequestQueue.java:64) at oracle.as.install.engine.modules.configuration.standard.StandardConfigActionManager.start(StandardConfigActionManager.java:160) at oracle.as.install.engine.modules.configuration.boot.ConfigurationExtension.kickstart(ConfigurationExtension.java:81) at oracle.as.install.engine.modules.configuration.ConfigurationModule.run(ConfigurationModule.java:86) at java.lang.Thread.run(Thread.java:662) Caused by: oracle.as.config.ProvisionException: File C:\Oracle\Middleware\Oracle_BI1\bifoundation\admin\provisioning\bi-policystore.xml does not exist. at oracle.as.config.utl.FileUtil.validateFile(FileUtil.java:155) at oracle.as.config.utl.FileUtil.copyFile(FileUtil.java:351) at oracle.bi.installhandler.util.FileSystemManagerImpl.copyFile(FileSystemManagerImpl.java:189) ... 13 more`

谢谢。维杰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:46:50.477

维杰，

我也看到你在 OTN 论坛上发帖。

以下是 BI 示例应用程序中“bi-policystore.xml”副本的链接（包含 11.1.1.6.2 的完全包含的 Linux 实例）：

[http://www.adrive.com/public/cBjnjn/bi-policystore.xml](http://www.adrive.com/public/cBjnjn/bi-policystore.xml)

您也可以从这里下载完整的示例应用程序：

[http://www.oracle.com/technetwork/middleware/bi-foundation/obiee-samples-167534.html](http://www.oracle.com/technetwork/middleware/bi-foundation/obiee-samples-167534.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T15:53:29.523

我尝试将文件保存在预期的位置，但即使在那之后，我还是在后面的步骤中遇到错误。查看错误日志后，我发现下载的 Disk 5 zip 文件存在问题。

我不得不将 bishiphome 下的一个文件夹从 11.1.1.5 重命名为 11.1.1.6。重命名文件夹后安装很顺利。

我 99.9% 确定我下载了 11.1.1.6 zip 文件。

# ruby-on-rails - Bootstrap 下拉菜单样式不正确

> ID：15690012
> 
> 赞同：1
> 
> 时间：2013-03-28T18:58:12.007
> 
> 标签：ruby-on-rails, twitter-bootstrap, bootstrap-sass

我遇到了 twitter/bootstrap 下拉菜单样式不正确的问题。我在 Rails 3 中，使用 bootstrap-sass gem。下拉菜单功能正常，当我单击按钮时会下降，但没有样式。

基本上它看起来像这样[：](http://i.imgur.com/wY7S4Eg.png)

当它应该看起来像这样：[工作](http://i.imgur.com/oZKBPJN.png)

这两张截图是从大约两个月前从同一个代码库分叉的不同应用程序中截取的。它们具有相同的自定义 CSS 样式，其中任何一个都不会影响下拉菜单，并且工作的只是导入警报、折叠、下拉、模态和转换引导插件，而损坏的则使用一体化引导插件。 js。我尝试删除 bootstrap.js 并仅用这些插件替换它，但问题仍然存在。

下拉菜单也以相同的方式调用，通过局部渲染。

渲染：

```
<%= render :partial => 'layouts/dropdown', :locals => { :space => true, :collection => @statuses, :title => "Set Status", :subtitle => "Statuses:", :label => ->s{s}, :value => ->s{"&status=" + s}, :path => set_status_tickets_path, :id => "ticket-status", :type => :note } %> 
```

部分：

```
<div class="btn-group pull-right toggleCheck" style="display:none;" id='<%= id %>'>
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><%= title %><span class="caret"></span></a>
  <ul class="dropdown-menu" style="right: 0; left: auto;">
      <% if type == :search %>
        <li style="padding:5px 10px;"><input class="drop-search focus-open hold" type='text' placeholder='Search' style="margin:0px;"></li>
      <% elsif type == :note %>
        <li style="padding:5px 10px;"><textarea placeholder='Status notes' class="hold focus-open note-box" rows="4" style="margin:0px; resize: none;"></textarea></li>
      <% end %>
    <li style="padding:5px 10px; font-weight:700;"><%= subtitle %></li>
    <div class="choices">
    <% collection.each do |c| %>
      <li><%= link_to (label.(c) + '<span class="comment"></span>').html_safe, '#', :value => value.(c), :path => path, :iden => label.(c).downcase.gsub(/\s/, '-') %></li>
    <% end %>
    </div>
  </ul>
</div> 
```

谁能阐明我在这里可能做错了什么？这也是我的第一个问题，所以如果我做错了什么或没有包含足够的信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T20:10:01.053

我想通了，问题出在`<div class="choices">`. 出于某种原因，在一个项目中，它没有从 继承样式`dropdown-menu`，而在另一个项目中却是。

该类`choices`由 javascript 函数（用于选择）使​​用，因此摆脱它不是一种选择。对于一个有点笨拙的解决方案，我只是将`choices`类添加到引导程序的 CSS 中的适当位置。

# mysql - 有没有办法执行“如果不存在则使用 auto_increment 插入”？

> ID：15690013
> 
> 赞同：0
> 
> 时间：2013-03-28T18:58:16.873
> 
> 标签：mysql, auto-increment, insert-into

我有一个看起来像这样的表：

```
| ID | int PRIMARY  
| Name | varchar  
| timestamp | timestamp 
```

知道身份证怎么办？

为了更好地向您展示我想要的东西，这里有一个使用两个查询来帮助您更好地理解的示例：

第一次我只是做一个 SELECT 查询来查看 ID 是否存在。
如果它不存在（最常见），我会创建一个新行，忽略作为输入提供的 ID，并使用 MySQL 的 AUTO_INCREMENT 作为 ID。

有没有办法存档这个？

**注意：**由于外键在这里工作。使用 REPLACE 而不是 INSERT INTO**不是**答案。

**注意2：**因为我想强制使用AUTO_INCREMENT，如果它不存在，乍一看，INSERT IGNORE INTO 似乎也不是答案。除非我错过了什么......这也是我问的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:05:01.900

听起来您要做的是更新重复键

```
INSERT INTO yourTable (
    id,
    name,
    timestamp
) VALUES (
    5,
    'something',
    NOW()
)
ON DUPLICATE KEY UPDATE
    name = VALUES(name),
    timestamp = VALUES(timestamp); 
```

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

这`INSERT () VALUES ()`是直截了当的。 `ON DUPLICATE KEY UPDATE`告诉它，如果 UNIQUE / PRIMARY 键冲突，那么这应该更新该行中的一些值。该`fields = VALUES(fields)`语法告诉它使用 INSERT 中指定的值更新冲突行中的那些字段。

第二种方法是使用存储过程来处理对执行先决条件 SELECT 的表的 INSERT，因为您不能在同一查询中对表同时执行 SELECT 和 INSERT。

# c# - 如何以编程方式在 Web 表单上的 TextBox 中设置 BackColor？

> ID：15690015
> 
> 赞同：2
> 
> 时间：2013-03-28T18:58:18.320
> 
> 标签：c#, asp.net, webforms

我想在运行时以编程方式设置 Web 表单的背景色（以便用户可以选择他或她喜欢的颜色）。

我可以使用命名颜色来做到这一点，如：

```
txt1.BackColor = System.Drawing.Color.PeachPuff; 
```

但我很难弄清楚如何使用 RGB 值设置颜色，如下所示：

```
txt1.BackColor = SomeConverter("#FEC200"); 
```

这是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:01:52.880

```
txt1.BackColor = System.Drawing.ColorTranslator.FromHtml("#FEC200"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:02:58.730

用这个

```
txt1.BackColor = System.Drawing.ColorTranslator.FromHtml("#FEC200"); 
```

另外，如果您想将其转换`System.Drawing.Color`回字符串（保存在数据库中），请执行以下操作：

```
private static String ConvertToHex(System.Drawing.Color color)
{
    return "#" + color.R.ToString("X2") + color.G.ToString("X2") + color.B.ToString("X2");
}

private static String ConvertToRGB(System.Drawing.Color color)
{
    return "RGB(" + color.R.ToString() + "," + color.G.ToString() + "," + color.B.ToString() + ")";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:11:39.277

@Hossein-Narimani-Rad 删除了另一个答案，说要使用 ColorConverter.ConvertFromString。我试过了，让它像这样工作：

```
System.Drawing.ColorConverter conv = new System.Drawing.ColorConverter();
txt1.BackColor = (System.Drawing.Color)conv.ConvertFromString("#FEC200"); 
```

但是@Win 和@Manish-Mishra 的答案更简洁，而且我要做什么。

# python - 在 Python 中进行实时音频处理的任何便捷方法？

> ID：15690016
> 
> 赞同：1
> 
> 时间：2013-03-28T18:58:23.750
> 
> 标签：python, audio

我正在拼命寻找一种在 Python 下进行实时音频处理（实时）的方法。它也可以是 Cython 或任何其他使这成为可能的方式。

理想情况下，我想要一个简单的音频输入输出应用程序，它可以从声卡中读取声音样本并将其放在声音输出上。然后我可以在两者之间添加处理步骤。

我在这件事上找到了几个条目，但可以轻松安装所需的工具。例如，有一篇关于使用 Cython 和 Python 进行实时音频处理的很棒的博客条目，但是需要 PyAudio，但我得到了错误并且可以找到任何解决方法...... [无法在 python 中导入 audiolab](https://stackoverflow.com/questions/15186674/cant-import-audiolab-in-python/15689920#15689920)

在此先感谢您的帮助，

问候，布莱克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:10:58.627

试试[Pysnack](http://www.speech.kth.se/snack/)。使用 Snack，您只需几行代码即可创建强大的多平台音频应用程序。Snack 具有用于基本声音处理的命令，例如播放、录音、文件和套接字 I/O。

# vb.net - 如何改进这些比较？

> ID：15690017
> 
> 赞同：1
> 
> 时间：2013-03-28T18:58:23.803
> 
> 标签：vb.net, comparison, if-statement

我有 5 个值，我正在比较它们并尝试根据哪个值最大来执行一些操作。

值为 v1、v2、v3、v4 和 v5

```
If (v1 > v2 And v1 > v3 And v1 > v4 And v1 > v5) Then
        l1st.Text = "Al-Haj Shaji Gul"
        Label5.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.shajismal

ElseIf (v2 > v3 And v2 > v4 And v2 > v1 And v2 > v5) Then
        l1st.Text = "Nor huq"
        Label6.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.norlhuq

ElseIf (v3 > v1 And v3 > v2 And v2 > v4 And v3 > v5) Then
        l1st.Text = "Darya Khan"
        Label7.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.daryakhanpic

ElseIf (v4 > v1 And v4 > v2 And v4 > v3 And v4 > v5) Then
        l1st.Text = "Imran Khan"
        Label8.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.Imran_Khan

ElseIf (v5 > v1 And v5 > v2 And v5 > v3 And v5 > v4) Then
        l1st.Text = "Zarnoor Afridi"
        Label10.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.zarnorsmal
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:34:31.943

只是一个例子：

```
Dim v_array(4) As Integer
Dim max_v As Integer
For i = 0 To 4
    v_array(i) = i + (Math.Rnd(15) * 10)
Next i

For Each v In v_array
    If v > max_v Then
        max_v = v
    End If
Next v

Select Case max_v
    Case v_array(0)
        MsgBox "Something"
    Case v_array(1)
        MsgBox "Something 1"
    Case v_array(2)
        MsgBox "Something 2"
    Case v_array(3)
        MsgBox "Something 3"
    Case v_array(4)
        MsgBox "Something 4"
End Select 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:36:44.497

看看这是否有帮助。它获得最高分并将其存储在`max`. 然后它检查所有五个值，对于每个与 ​​相同的值`max`，即最高值，它会将控件设置为该学生的值。如果有多个得分最高的学生，则会将这些学生添加到文本框文本的末尾，例如“Student1 = Student3”。我唯一无法解决的是，该图像将是最后一个得分最高的学生。

```
Dim max As Integer = {v1, v2, v3, v4, v5}.Max
Dim multiple As Boolean = False

l1st.Text = ""
If (v1 = max) Then
        l1st.Text = "Al-Haj Shaji Gul"
        Label5.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.shajismal
        multiple = True
EndIf
If (v2 = max) Then
        If multiple = True Then
            l1st.Text = l1st.Text + " = "
        EndIf
        multiple = True
        l1st.Text = l1st.Text + "Nor huq"
        Label6.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.norlhuq
EndIf
If (v3 = max) Then
        If multiple = True Then
            l1st.Text = l1st.Text + " = "
        EndIf
        multiple = True
        l1st.Text = l1st.Text + "Darya Khan"
        Label7.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.daryakhanpic
EndIf
If (v4 = max) Then
        If multiple = True Then
            l1st.Text = l1st.Text + " = "
        EndIf
        multiple = True
        l1st.Text = l1st.Text + "Imran Khan"
        Label8.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.Imran_Khan
EndIf
If (v5 = max) Then
        If multiple = True Then
            l1st.Text = l1st.Text + " = "
        EndIf
        multiple = True
        l1st.Text = l1st.Text + "Zarnoor Afridi"
        Label10.ForeColor = Color.Red
        Me.PictureBox12.Image = Global.shaji.My.Resources.Resources.zarnorsmal
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T20:04:10.633

先将变量放入数组中；这使得最大搜索更容易

```
Dim v = New () {v1, v2, v3, v4, v5}
Dim i As Integer = Array.IndexOf(v, v.Max()) + 1
Select Case i
    Case 1
        ' Process when v1 is maximum
    Case 2
        ' Process when v2 is maximum
    Case 3
        ' Process when v3 is maximum
    Case 4
        ' Process when v4 is maximum
    Case 5
        ' Process when v5 is maximum
End Select 
```

当然，您也可以只定义一个变量`v`作为数组开始，而不是使用单个变量。

```
Dim v = New Integer(4) {}
v(0) = 10
v(1) = 15
... 
```

# c# - C# 编译器试图编译为错误的重载方法

> ID：15690019
> 
> 赞同：0
> 
> 时间：2013-03-28T18:58:26.313
> 
> 标签：c#, compiler-errors, overloading

我的项目在 VS2012 中使用 .Net 4.5。

我的班级中有以下重载方法：

```
public SalesOrder GetSalesOrder(int salesOrderID, bool forceRefresh = false)
{
    using (iSeriesUOW uow = new iSeriesUOW())
    {
        return GetSalesOrder(uow, salesOrderID, forceRefresh);
    }
}

public SalesOrder GetSalesOrder(iSeriesUOW uow, int salesOrderID, bool forceRefresh = false)
{
    .... do some stuff here
} 
```

我正在尝试使用以下方法调用第一种方法：

```
public void PopulateModel(string companyCode, int salesOrderID, bool forceRefresh)
{
    SalesOrders blSalesOrders = new SalesOrders(companyCode);
    SalesOrder salesOrder = blSalesOrders.GetSalesOrder(salesOrderID, forceRefresh);

    ... Other code here
} 
```

编译器在我的 GetSalesOrder 调用中给了我一个错误：

```
The type 'DataAccess.iSeriesUOW' is defined in an assembly that is not referenced. You must add a reference to assembly 'Viper.DataAccess, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. 
```

如果我删除 GetSalesOrder 中的 forceRefresh，它编译得很好。

我在想它试图调用第二个 GetSalesOrder 重载，但我不知道为什么，因为 (int, bool) 的签名显然在那里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:20:36.683

> 我在想它试图调用第二个 GetSalesOrder 重载，但我不知道为什么，因为 (int, bool) 的签名显然在那里。

真的清楚吗？我们怎么知道没有从 int 到 iSeriesUOW 的隐式转换？

您对 C# 编译器的期望过高；我们没有花任何时间在重载解析算法中构建聪明的“早期输出”，以便那些明显不适用或适用但显然更糟的方法没有从磁盘加载它们的元数据！

C# 编译器保留在编译时要求*程序集引用的整个传递闭包的权利*，以便它可以对程序进行*完整*的分析。在某些有限的场景中，您可能会因为不提供整个传递闭包而意外逃脱，但*您不能依赖它*，并且*Roslyn 可能需要在其中一些场景中引用更多程序集*。

您应该养成向编译器提供程序集引用的传递闭包的习惯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:03:35.987

我会尝试显式设置参数值：

代替

```
 SalesOrder salesOrder = blSalesOrders.GetSalesOrder(salesOrderID, forceRefresh); 
```

我会尝试

```
public void PopulateModel(string companyCode, int salesOrderID, bool forceRefreshParam)
{
    SalesOrders blSalesOrders = new SalesOrders(companyCode);
    SalesOrder salesOrder = blSalesOrders.GetSalesOrder(salesOrderID, forceRefresh:forceRefreshParam);

    ... Other code here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T19:05:20.050

iSeriesUOW 类在哪里定义？尝试按照它所说的添加对程序集 Viper.DataAccess 的引用。

# php - 如何删除这些标签及其内容？

> ID：15690020
> 
> 赞同：0
> 
> 时间：2013-03-28T18:58:26.510
> 
> 标签：php, regex, preg-replace

我`<sub>`在 HTML 中有这些标签。我需要删除它们及其内容。

到目前为止，我有这个，但它只删除标签而不是内容。

```
$string = preg_replace("#</?sub[^>]*>#is", "", $string); 
```

有人可以帮我完成这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:00:32.303

```
preg_replace("#<sub.*?>.*?</sub>#", "", $string); 
```

这不是很可靠，根据具体情况，您可能想要使用真正的 html/xml 解析器。PHP 有两个很好的内置功能：DOMDocument 和 SimpleXML。

# javascript - HTML5 `favorite` 离线缓存

> ID：15690027
> 
> 赞同：0
> 
> 时间：2013-03-28T18:58:56.277
> 
> 标签：javascript, html, caching, html5-appcache

我目前正在构建一个应用程序，您可以使用它创建歌词播放列表并缓存它们以供离线使用。您还可以缓存您的收藏夹（JSON 数组）。

现在，因为收藏夹已被缓存 - 该`add favorite`按钮在客户端不起作用。是的，它确实在服务器端保存了收藏夹，但在客户端没有任何变化。

**你会建议我做什么来解决这个问题？**re：每次`add favorite`单击时都下载缓存是我唯一能做的，或者也许还有另一种方法可以解决这个问题？

请注意，**我确实知道如何更新缓存**。我只是想知道是否有更好的方法来解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:12:36.763

我假设您需要通过 Javascript 更新您的 HTML5 应用程序缓存，在这种情况下，本指南应该解释您需要了解的所有内容：http: [//www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

您可以做的是使用侦听器来监视页面加载时的 updateready 事件。来自上述指南的片段：

```
// Check if a new cache is available on page load.
window.addEventListener('load', function(e) {

  window.applicationCache.addEventListener('updateready', function(e) {
    if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
      // Browser downloaded a new app cache.
      // Swap it in and reload the page to get the new hotness.
      window.applicationCache.swapCache();
      if (confirm('A new version of this site is available. Load it?')) {
        window.location.reload();
      }
    } else {
      // Manifest didn't changed. Nothing new to server.
    }
  }, false);

}, false); 
```

当您更新您的问题，说明您知道如何更新缓存时，我也会更新我的答案。Html5 appcache 旨在下载所有内容，并且您的问题没有“修复” - 这就是它的设计方式。现在，如果您正在寻找替代解决方案，您可能想问一个新问题。

# c# - C#数独拼图

> ID：15690032
> 
> 赞同：0
> 
> 时间：2013-03-28T18:59:46.107
> 
> 标签：c#, asp.net, sudoku

大家好 我正在尝试使用类、数组和 for 循环创建数独游戏。非常想从 aspx 后面的代码中生成谜题。我遇到的问题是如何显示创建文本框数组的 for 循环的内容。

我有一个名为 sTextBox.cs 的类，它创建一个文本框并包含拼图的其他功能。然后我有一个类puzzleBox.cs，它创建一个sTextBox 数组。这是拼图的一个正方形的内部。然后我有创建 Box() 数组的 Puzzle 类。这样，它应该创建拼图所需的所有文本框。我只是想弄清楚如何让拼图显示在 aspx 上。

代码：

sTextBox.cs

```
public STextBox()
{
    txtBox = new System.Web.UI.WebControls.TextBox();

}

public System.Web.UI.WebControls.TextBox getTextBox()
{
    return txtBox;
} 
```

盒子.cs

```
private SodokuTextBox[,] sTBox;

public Box()
{
    sTBox = new SodokuTextBox[3,3];

    for (int i = 0; i < 3; i++ )
    {
        for (int j = 0; j < 3; j++ )
        {
            sTBox[i, j] = new SodokuTextBox(); // make new sodoku textbox
        }
    }
} 
```

拼图.cs

```
{

private Box[,] boxArray;

public Puzzle()
{
    boxArray = new Box[3, 3];

    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < 3; j++)
        {

            boxArray[i, j] = new Box(); // make new sodoku textbox

        }
    } 
```

我一直试图以某种方式将东西插入表格，但我发现的所有方法似乎都不适合我。谢谢你的帮助！！

编辑：

好的，所以在进一步研究之后，我认为我需要做的是以某种方式将各个文本框放在表格单元格中，然后让表格更大（9 的平方），然后将大表格放入另一个表格单元格中谜题（81 的平方） 不确定这是否是解决此问题的最佳方法，或者如果可能的话，如何真正做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:02:46.970

在 ASPX 页面上放置一个 PlaceHolder 或一个面板，给它一个 ID，然后你可以在后面的代码中以编程方式向它添加控件，如下所示：

```
MyPlaceHolder.Controls.Add(textBox); 
```

或者，您可以将 Panel 或 PlaceHolder 的引用传递给 Puzzle 构造函数：

```
public Puzzle(PlaceHolder placeHolder) 
```

如果你想在你的代码中创建一个表，你可以这样做：

```
 Table tbl = new Table();
    tbl.ID = "table1";

    placeHolder.Controls.Add(tbl);

    for (int row = 0; row < 5; row++)
    {
        TableRow rw = new TableRow();

        TableCell cell = new TableCell();

        Label text = new Label();
        text.Text = "text";

        cell.Controls.Add(text);
        rw.Cells.Add(cell);

        tbl.Controls.Add(rw);

    } 
```

# javascript - 如何从 javascript 获取 Gridview 的第一个子标记名

> ID：15690041
> 
> 赞同：0
> 
> 时间：2013-03-28T19:00:14.703
> 
> 标签：javascript, google-chrome, tagname

这段代码在 Chrome 中不起作用，但它在 IE 中起作用……怎么了？获取gridview的第一个孩子的标记名的正确方法是什么？

```
idGrid = document.getElementById("GridView1");

function FindTBODY(idGrid)
{
    if(idGrid.firstChild.tagName == "TBODY")
        return(idGrid.firstChild);
    // there is a caption, so go down one more level
    return(idGrid.firstChild.nextSibling);  

} 
    ........

 var oTBODY= FindTBODY(idGrid);
    for(var i=0; ; i++)
    {
        try
        {
            var ctl=oTBODY.childNodes[i].childNodes[0];
            var selectctl = ctl.childNodes[ctl.childNodes.length-1]
            if(selectctl.tagName == "INPUT")
                            {
                               ....... 
```

# magento - 为未登录用户显示的登录缓存

> ID：15690043
> 
> 赞同：1
> 
> 时间：2013-03-28T19:00:27.750
> 
> 标签：magento, magento-1.12

我从 Magento 的缓存中得到了一些奇怪的行为，它将为所有用户提供相同的缓存标头/块......

IE。如果 John Doe 已登录并且是第一个在缓存刷新后查看特定类别页面的人，`Welcome, John Doe`则保存在标题中，然后显示给所有客户。购物车总数甚至存储特定产品列表也是如此。这会引起很大的混乱，因为在网站上导航时您的购物车总数会不断变化。

我唯一能做的就是禁用块缓存和整页缓存，但这会减慢我的网站速度。

什么会导致 Magento 的缓存系统出现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:20:27.420

我不确定整页缓存，但我使用过 Lightspeed 模块（看起来很相似，也有同样的问题），它使用 Cache Holes 来处理应该是动态的块

# f# - F# 中的指示性多态性

> ID：15690053
> 
> 赞同：12
> 
> 时间：2013-03-28T19:01:19.410
> 
> 标签：f#, polymorphism, ocaml, coq, impredicativetypes

OCaml 的 Hindley-Milner 类型系统不允许隐含多态性（à la System-F），除非通过最近对记录类型的扩展。这同样适用于 F#。

然而，有时需要将用暗示性多态性（例如 Coq）编写的程序翻译成这样的语言。Coq 对 OCaml 的提取器的解决方案是（少量）使用`Obj.magic`，这是一种通用的不安全类型转换。这有效，因为

*   在 OCaml 的运行时系统中，无论其类型如何，所有值都具有相同的大小（32 位或 64 位，具体取决于架构）
*   应用于原始程序的更复杂的类型系统保证了类型安全。

是否可以在 F# 中做类似的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T19:44:40.733

如果您能详细说明您想要实现的目标，那将会很有帮助。一些含蓄用法（[例如来自 Haskell wiki 的这个示例](http://www.haskell.org/haskellwiki/index.php?title=Impredicative_types&oldid=55281)）相对容易使用带有单个泛型方法的附加名义类型进行编码：

```
type IForallList =
    abstract Apply : 'a list -> 'a list

let f = function
| Some(g : IForallList) -> Some(g.Apply [3], g.Apply ("hello" |> Seq.toList))
| None -> None

let rev = { new IForallList with member __.Apply(l) = List.rev l }

let result = f (Some rev) 
```

# sql-server - 如何将此连接字符串转换为使用 SSPI 安全性？

> ID：15690057
> 
> 赞同：0
> 
> 时间：2013-03-28T19:01:32.410
> 
> 标签：sql-server, sql-server-2008

我有一个有效的连接字符串 - 这里是：

```
<add name="MyEntities"
  providerName="System.Data.EntityClient"
  connectionString="metadata=
  res://*/;
  provider=System.Data.SqlClient;
  provider connection string='
  Data Source=localhost;
  Initial Catalog=MyDb;
  Integrated Security=False;
  User Id=MyDbUser;
  Password=123456;
  MultipleActiveResultSets=True'" /> 
```

我这样设置用户：

```
USE [master]
GO
IF EXISTS(SELECT * FROM sys.syslogins WHERE name = N'MyDbUser')
    DROP LOGIN [MyDbUser];
GO
CREATE LOGIN [MyDbUser]
    WITH
        PASSWORD=N'123456',
        DEFAULT_DATABASE=[MyDb],
        CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
GO
-- Drop & recreate db-user
USE [MyDb]
GO
IF  EXISTS (SELECT * FROM sys.database_principals WHERE name = N'MyDbUser')
    DROP USER [MyDbUser];
GO
CREATE USER [MyDbUser] FOR LOGIN [MyDbUser]
GO
EXEC sp_addrolemember N'db_owner', N'MyDbUser'
GO 
```

如果我更改连接字符串以使用 SSPI 安全性，它将不再有效。作为一个 SQL 菜鸟，如果有人可以就我需要进行的其他更改提供一些建议，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:03:50.997

你有没有尝试过？

```
<add name="MyEntities"
    providerName="System.Data.EntityClient"
    connectionString="metadata=
    res://*/;
    provider=System.Data.SqlClient;
    provider connection string='
    Data Source=localhost;
    Initial Catalog=MyDb;
    Integrated Security=True;
    MultipleActiveResultSets=True'" 
/> 
```

像这样创建用户：

```
CREATE LOGIN [MYDOMAIN\MyUser]
FROM WINDOWS; 
```

然后您需要确定连接到数据库的进程在 Windows 中作为 [MYDOMAIN\MyUser] 运行。

[如果做不到这一点，在http://www.allenkinsel.com/archive/2010/06/sql-server-and-sspi-handshake-failed-error-](http://www.allenkinsel.com/archive/2010/06/sql-server-and-sspi-handshake-failed-error-hell/)上有一篇关于如何解决 SQL Server 的 SSPI 连接问题的精彩博客文章[地狱/](http://www.allenkinsel.com/archive/2010/06/sql-server-and-sspi-handshake-failed-error-hell/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:08:23.063

需要是 Windows 用户，而不是 SQL Server 用户。[见 MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28v=vs.110%29.aspx)：

"Integrated Security - 为 false 时，在连接中指定用户 ID 和密码。为 true 时，使用当前 Windows 帐户凭据进行身份验证。可识别的值为 true、false、yes、no 和 sspi（强烈推荐），即相当于真的。”

# twitter-bootstrap - Bootstrap 下拉菜单导致焦点转移到页面顶部

> ID：15690060
> 
> 赞同：12
> 
> 时间：2013-03-28T19:01:41.460
> 
> 标签：twitter-bootstrap

我有一个 Bootstrap 下拉菜单。当我从下拉菜单中选择一个值时，焦点会转移到页面顶部。下拉菜单的类选项如下：

```
<a class = "btn dropdown-toggle" data-toggle = "dropdown" data-target = "#">
    <span class = "caret"></span>
</a> 
```

jFiddle 示例[在这里](http://jsfiddle.net/W7gbj/)。您需要在结果窗口中向下滚动到查看下拉菜单。

纠正这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-28T19:16:12.857

在您的代码中，您有 # 个锚点。

当有人单击它时，浏览器将转到页面顶部以搜索不存在的锚点。

即使你去掉#，链接也会认为它需要刷新页面。

如果您需要锚定样式，请执行以下操作：

```
<a href = "javascript:return false;">link text</a> 
```

[http://jsfiddle.net/W7gbj/7/](http://jsfiddle.net/W7gbj/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-27T01:27:34.480

接受的答案有效，但第二个问题是选择列表长。如果下拉列表有很多项目，例如国家，那么用户可以向上或向下滚动以选择一个。整个页面滚动。然后，在用户做出选择后，滚动位置将停留在该位置。

我通过应用已接受的答案并添加以下内容来解决此问题：

```
@ViewChild('toggleButton') toggleButton: ElementRef; 
```

切换按钮上的属性，然后调用：

```
this.toggleButtton.nativeElement.focus(); 
```

当做出选择时。我知道出于 Web Worker 的原因不建议使用 nativeElement，但我没有使用 Web Worker，所以它对我来说是一个解决方案。

使用引导 4.1.0。

# kohana-3 - Kohana 不显示错误处理程序

> ID：15690061
> 
> 赞同：1
> 
> 时间：2013-03-28T19:01:49.223
> 
> 标签：kohana-3

Kohana 不显示其内置的错误处理程序（例如： http: [//kohanaframework.org/3.3/guide/kohana/errors#example](http://kohanaframework.org/3.3/guide/kohana/errors#example)）。

当我的脚本某处出现错误时，它只会说：

> “ErrorException [8]：数组到字符串的转换 ~ SYSPATH/classes/Kohana/Log/Writer.php [81]”

我写

```
ini_set('display_errors', TRUE);
error_reporting(E_ALL | E_STRICT);

Kohana::init(array(
    ...
    'errors' => true)); 
```

但它不起作用。

如何启用错误处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:09:57.747

您的 Kohana 错误处理程序已启用并且确实有效。

您看到的是一条简短的错误消息，而不是完整的堆栈跟踪，因为您的日志写入器中发生了一些错误。

当生成一个内置错误页面时，它被包装在一个`try/catch`块中。如果在此过程中发生任何错误（有几件事可能会失败，例如您的情况下的 Log Writer），抛出的异常将被捕获并以纯文本形式返回，如您的问题所示。[您可以在Kohana Docs](http://kohanaframework.org/3.3/guide-api/Kohana_Exception#response)中看到它是如何工作的。

我会看看为什么 Log Writer 试图将数组转换为字符串。

# javascript - 绑定多个事件 - Javascript 语法？

> ID：15690066
> 
> 赞同：-1
> 
> 时间：2013-03-28T19:02:30.167
> 
> 标签：javascript, jquery, google-analytics

我的语法有问题吗？在我开始添加多个事件之前，第一个事件运行良好。现在，似乎根本没有任何事件跟踪起作用。

我已经检查了任何错字等。

```
$('#GetBusinessHelp').bind('click', function() {
    ga('send', 'event', 'button', 'click', 'Get Business Help');
});

$('#EmailMailTo').bind('click', function() {
    ga('send', 'event', 'tab', 'click', 'Mailto');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:08:17.717

请参阅 API 文档以绑定多个事件：[http ://api.jquery.com/bind/](http://api.jquery.com/bind/)

多个事件类型可以一次绑定，每个事件类型之间用空格分隔，如下所示。

```
 $('#foo').bind('mouseenter mouseleave', function() {
      $(this).toggleClass('entered');
    }); 
```

在这里，您只绑定了单击事件。
其他事件将仅使用空格与单击绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:11:07.623

我刚刚意识到我正在查看错误的选项卡。事件跟踪实际上工作正常，所以我想我会删除这个问题。抱歉浪费您的时间

# progress-4gl - 如何知道 Progress-4GL 中的程序访问的记录数？

> ID：15690067
> 
> 赞同：2
> 
> 时间：2013-03-28T19:02:32.430
> 
> 标签：progress-4gl, openedge, progress-db

我想知道一个正在运行的程序正在访问多少条记录。我找到了 VST _TableStat，但它没有按程序对记录数进行分组。

```
FOR  EACH _TableStat NO-LOCK
    WHERE _TableStat._TableStat-Create > 0
       OR _TableStat._TableStat-Delete > 0
       OR _TableStat._TableStat-Read   > 0
       OR _TableStat._TableStat-Update > 0,
    FIRST _File NO-LOCK
    WHERE _File._File-Number = _TableStat._TableStat-Id:

    DISPLAY
      /*_File._File-Name*/
        _TableStat-Create
        _TableStat._TableStat-Delete
        _TableStat._TableStat-Read  
        _TableStat._TableStat-Update
        WITH SIDE-LABELS 1 COLUMN 1 DOWN.
END. 
```

此代码向我显示了表以及正在访问多少记录，但我想知道正在访问表的程序。

有没有办法知道这一点？或者是否有像 _TableStat 这样的带有 PID 或类似的表？

Ps.：我正在使用 Progress 10.2B。

在此先感谢，鲁比尼奥桑托斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:34:57.540

什么版本的进度？

大约在 10.1C 的某个地方引入了 _UserTableStat。它有用户的表格统计信息。

_connect VST 中还有“客户端语句缓存”字段。如果为会话启用了正确的位，则会保存堆栈跟踪，以便您可以确定会话正在执行哪一行以及它是如何到达那里的。

在它们之间，它们可以让你得到你需要的东西。

顺便说一句：ProTop 向您展示了大部分数据——http: [//dbappraise.com/protop.html](http://dbappraise.com/protop.html)

如果您需要按程序统计的细粒度程序，您可能还想查看一些“日志条目类型”功能，例如 4gltrace 和 QryInfo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:18:13.483

正如我所期望的那样，它与表 _UserTableStat 一起使用：

```
FOR EACH _UserTableStat NO-LOCK
   WHERE _UserTableStat._UserTableStat-Read   > 0
      OR _UserTableStat._UserTableStat-Create > 0
      OR _UserTableStat._UserTableStat-Update > 0
      OR _UserTableStat._UserTableStat-Delete > 0,
   FIRST _File NO-LOCK
   WHERE _File._File-Number = _UserTableStat._UserTableStat-Num,
   FIRST _Connect NO-LOCK
   WHERE _Connect._Connect-Id = _UserTableStat._UserTableStat-Conn:

    DISPLAY
        _Connect._Connect-IPAddress          
        _Connect._Connect-Name               
        _Connect._Connect-Pid                
        _File._File-Name                     
        _UserTableStat._UserTableStat-Read   
        _UserTableStat._UserTableStat-Create 
        _UserTableStat._UserTableStat-Update 
        _UserTableStat._UserTableStat-Delete 
    WITH SIDE-LABELS THREE-D 1 COLUMN 1 DOWN.

END. 
```

感谢汤姆巴斯科姆的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-16T14:01:20.940

上面的代码在 _connect 和 _UserTableStat 之间的连接存在问题：

```
WHERE _Connect._Connect-Id = _UserTableStat._UserTableStat-Conn 
```

你必须改用这个：

```
WHERE _Connect._Connect-Usr = _UserTableStat._UserTableStat-Conn
  hint: _Connect-Usr = _Connect-Id + 1 
```

接下来，以下代码给出了一个按 _UserTableStat-read 降序排序的列表：

```
DEFAULT-WINDOW:WIDTH-CHARS = 240.

DEFINE VARIABLE dmon           AS DATETIME NO-UNDO.
DEFINE VARIABLE dstart         AS DATETIME NO-UNDO.
DEFINE VARIABLE iusertablestat AS INTEGER  NO-UNDO.
DEFINE VARIABLE lfirstview     AS LOGICAL  INITIAL TRUE NO-UNDO.

DEFINE TEMP-TABLE ttuts LIKE _UserTableStat
    FIELD _Connect-Type       AS CHARACTER INITIAL ?
    FIELD _Connect-Name       AS CHARACTER INITIAL ? FORMAT "X(15)"
    FIELD _Connect-Time       AS CHARACTER INITIAL ? FORMAT "X(25)"
    FIELD _Connect-ClientType AS CHARACTER INITIAL ?
    INDEX _UserTableStat-read   _UserTableStat-read
    INDEX _UserTableStat-update _UserTableStat-update
    INDEX _UserTableStat-create _UserTableStat-create
    INDEX _UserTableStat-delete _UserTableStat-delete.

dstart = NOW.
dmon = NOW.
DEFAULT-WINDOW:TITLE = SUBSTITUTE("starting scan of _UserTableStat at &1", dstart).
FOR EACH _UserTableStat NO-LOCK: 
    iusertablestat = iusertablestat + 1.

    IF     iusertablestat MODULO 10000 = 0 
        OR INTERVAL(NOW, dmon, "milliseconds") > 1000 THEN
    DO:
        dmon = NOW.
        IF lfirstview THEN
        DO:
            DISPLAY "scanning in process" WITH FRAME fviewit.
            lfirstview = FALSE.
        END.
        DEFAULT-WINDOW:TITLE = SUBSTITUTE("&1 - Scanning since &2 ms - &3 _UserTableStat records (started at &4)"
            , NOW, INTERVAL(NOW, dstart, "milliseconds"), iusertablestat, dstart).

        DEFAULT-WINDOW:TITLE = SUBSTITUTE("starting scan of _UserTableStat at &1  scanned &2 records", dstart, iusertablestat).
        PROCESS EVENTS.
    END.

    /* if you are interested in updates or delte, then adapath this next line */
    IF _UserTableStat._UserTableStat-read = 0 
        THEN NEXT.

    IF _UserTableStat._UserTableStat-Conn <> ?
        THEN FIND _Connect NO-LOCK WHERE _Connect._Connect-Usr = _UserTableStat._UserTableStat-Conn NO-ERROR. /* beware: you may use _UserTableStat-id + 1 too but do not miss the + 1*/
    ELSE RELEASE _Connect.

    CREATE ttuts.
    BUFFER-COPY _UserTableStat TO ttuts.
    IF AVAIL _Connect
        THEN BUFFER-COPY _Connect TO ttuts.
END.

DEFAULT-WINDOW:TITLE = SUBSTITUTE("&1 - Scan completed in &2 ms through &3 _UserTableStat records (started at &4)"
    , NOW, INTERVAL(NOW, dstart, "milliseconds"), iusertablestat, dstart).

FOR EACH ttuts 
    , FIRST _File NO-LOCK WHERE _File._File-Number = ttuts._UserTableStat-Num
    BY ttuts._UserTableStat-read DESCENDING: 
    DISPLAY 
        ttuts._UserTableStat-Num
        _File._File-Name
        ttuts._Connect-Name 
        ttuts._UserTableStat-Conn  /* = _Connect._Connect-Usr */
        ttuts._Connect-Type  
        ttuts._Connect-Time  
        ttuts._Connect-ClientType 
        ttuts._UserTableStat-read   FORMAT ">>>,>>>,>>>,>>>,>>9"
        ttuts._UserTableStat-update FORMAT ">>>,>>>,>>>,>>>,>>9"
        ttuts._UserTableStat-create FORMAT ">>>,>>>,>>>,>>>,>>9"
        ttuts._UserTableStat-delete FORMAT ">>>,>>>,>>>,>>>,>>9"
        WITH WIDTH 240 FRAME fttuts 17 DOWN.
END. 
```

# python - 在 BeautifulSoup 中将字典转换为列表

> ID：15690071
> 
> 赞同：0
> 
> 时间：2013-03-28T19:02:46.607
> 
> 标签：python

`'boa'`如果在列表中，如何保存项目`href`列表？我不想使用 get() 打印它们，而是将它们转换为自己变量中的列表（似乎这些在字典中？），最好是`boat_links`. 谢谢！

```
import urllib2
from bs4 import BeautifulSoup

#Open Craigslist with BeautifulSoup and save to file

url = 'http://losangeles.craigslist.org/boo/'

response = urllib2.urlopen(url)
webContent = response.read()

f = open('C:\Users\dell\Desktop\python\\boat_crawler\craigslist.html', 'w')
f.write(webContent)
f.close

html_doc = open('C:\Users\dell\Desktop\python\\boat_crawler\craigslist.html')

soup = BeautifulSoup(html_doc)

boat_links = []

for a in soup.find_all('a'):
    if 'boa' in a['href']:
    print a.get('href') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T19:47:06.183

我不确定您是否想要列表或字典或列表字典，所以这里都是

```
if a.get('href').find('boa')>-1:
    boat_links.append(a.get('href')) 
```

这是一个字典，其中 a 标签文本作为键，href 作为值

```
boat_links = {}
for a in soup.find_all('a'):
    if a.get('href').find('boa')>-1:
         boat_links[a.text] = a.get('href') 
```

这是基于 a.tags 的列表字典（如果您有多个具有相同文本的链接怎么办）

```
boat_links = {}
for a in soup.find_all('a'):
    if a.get('href').find('boa')>-1
         if boat_links.has_key(a.text):
              boat_links[a.text].append(a.get('href'))
         else:
              boat_links[a.text] = [a.get('href')] 
```

# meteor - Meteor 删除不安全的包后只插入一个 ID 而没有其他数据

> ID：15690074
> 
> 赞同：0
> 
> 时间：2013-03-28T19:02:50.033
> 
> 标签：meteor

在我尝试插入时删除不安全的包后，它只会创建一个只有和 _id 的新记录

在服务器上，我允许在 Customers.collection 上插入

```
Customers.allow({
    insert: function(userID) {
        console.log(userID === userID);
        return userID === userID;
    }
}); 
```

在客户端上，我调用 insert 并将用户 ID 和表单数据传递给它

```
Template.tabs.events({
'submit form#customer' : function (event) {

    console.log(event.type + event.currentTarget);

    if (event.type === 'click' || event.type === 'submit') {

        event.preventDefault();

        var name = $("#name").val();
        var address = $("#address").val();
        var city = $("#city").val();
        var state = $("#state").val();
        var zip = $("#zip").val();
        var phone = $("#phone").val();
        var fax = $("#fax").val();

        doc = {user_id: this.userID, name: name, address: address, city: city, state: state, zip: zip, phone: phone, fax: fax}

        if(Customers.insert(this.userID, doc)) {
            console.log("Inserted");
            $("#name").val(null);
            $("#address").val(null);
            $("#city").val(null);
            $("#state").val(null);
            $("#zip").val(null);
            $("#phone").val(null);
            $("#fax").val(null);
        }
    }
}
}); 
```

我还尝试将插入包装在流星方法中，并从客户端进行方法调用，而不是使用相同的结果。

这是来自客户端的方法和调用

```
Meteor.methods({
    newCustomer: function (userID, record) {
        Customers.insert(userID, record);
                    console.log("Inserted");
    }
}); 
```

并在客户端而不是插入语句我做如下。

```
Meteor.call("newCustomer", this.userID, doc); 
```

我无法从流星文档中找出任何其他解决方案，试图让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:37:51.497

问题看起来是这一行：

```
if(Customers.insert(this.userID, doc)) { 
```

您插入的文档应该是这样的，插入的文档是参数

```
if(Customers.insert(doc)) { 
```

并且您的允许功能需要检查实际文档：

```
Customers.allow({
    insert: function(userID,doc) {
        return userID === doc.user_id;
    }
}); 
```

还要更改您的文档所有者，`this.userId`用于在服务器上发布或`Meteor.methods`. 要在其他地方获取登录用户的用户 ID，请使用`Meteor.userId`

```
doc = {user_id: Meteor.userId(), name: name, address: address, city: city, state: state, zip: zip, phone: phone, fax: fax} 
```

# ruby-on-rails - Rails 4 更新后 Heroku 上的资产路由错误

> ID：15690076
> 
> 赞同：9
> 
> 时间：2013-03-28T19:02:56.137
> 
> 标签：ruby-on-rails, heroku

我刚刚将我的应用程序更新到 Rails 4.0.0.beta1 和 Ruby 2.0.0。这是一个相当简单的应用程序，更新在开发过程中进展顺利，但是当我部署到 Heroku 时，我在预编译资产上遇到了路由错误。

```
ActionController::RoutingError (No route matches [GET] "/assets/application-ec10cb548646d3f1c9963e6071fd834f.css"): 
```

和

```
ActionController::RoutingError (No route matches [GET] "/assets/application-f6ecf7845034937996ac1e966af347b9.js"): 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T19:53:33.233

如果您在昨天下午（2013-03-27）之前遵循本指南（Heroku*上*[的 Rails 4.x 入门](https://devcenter.heroku.com/articles/rails4)），那么您可能需要将 Gemfile 更改为：

 *```
group :heroku do
  gem 'rails_log_stdout',           github: 'heroku/rails_log_stdout'
  gem 'rails3_serve_static_assets', github: 'heroku/rails3_serve_static_assets'
end 
```

简单地说：

```
gem 'rails_log_stdout',           github: 'heroku/rails_log_stdout'
gem 'rails3_serve_static_assets', github: 'heroku/rails3_serve_static_assets' 
```

（可选）切换`:heroku`为`:production`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-27T16:57:12.817

我相信这个解决方案已经更新了，Heroku`rails_log_stdout`已经`rails3_serve_static_assets`用`rails_12factor`. 见[这里](https://devcenter.heroku.com/articles/rails4)。

现在，你应该把它放在你的 GemFile 中：

```
gem 'rails_12factor', group: :production 
```

然后运行`bundle install`和`git push heroku`。*

# ios - uiview的圆角看起来不太好，uiview

> ID：15690077
> 
> 赞同：3
> 
> 时间：2013-03-28T19:02:56.673
> 
> 标签：ios, objective-c, core-graphics

我使用：

```
self.instructionView.layer.borderColor          =   [UIColor orangeColor].CGColor;
self.instructionView.layer.borderWidth          =   .5;
self.instructionView.layer.cornerRadius         =   5; 
```

我得到的是角落是圆形的，但角落看起来不太好。请查看图片以获取您的信息

![在此处输入图像描述](../Images/d6e157dfb766fc1b87d1f9285140ecad.png)

我该怎么做或有其他方法可以解决此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T20:19:51.380

您面临的问题是 1/2 像素问题。

没有办法绘制 1/2 像素，因此 Core Graphics 将使用抗锯齿并伪造它，这就是您在屏幕上看到的效果。

考虑增加边框尺寸（或购买 Retina 设备，如评论中建议的 H2CO3 ：P）

# highcharts - 如何在 Highcharts 中将 tickInterval 与 categories.push 一起使用

> ID：15690079
> 
> 赞同：0
> 
> 时间：2013-03-28T19:03:01.057
> 
> 标签：highcharts

我需要将我的 xAxis 设置为 datetime 才能正确使用 tickInterval。

在我的示例中，我使用它来设置我的类别：

```
 options.xAxis.categories.push(Date.UTC(2010, 3, 4,12,10)); 
```

但是，我不能使用 tickInterval，Highchart 像普通类别（不是日期时间）一样读取我的系列，但我在 xAxis 上使用了类型：'datetime'。

我的代码在：

[http://jsfiddle.net/4ghhf/172/](http://jsfiddle.net/4ghhf/172/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:23:39.800

利用：`options.xAxis.tickPositions.push(Date.UTC(2010, 3, 4,12,10));`

并确保您的轴是`type:'datetime'`并且类别已被删除。

# ruby-on-rails - 为什么我不能在 gem 中运行 rails generate？

> ID：15690080
> 
> 赞同：0
> 
> 时间：2013-03-28T19:03:02.050
> 
> 标签：ruby-on-rails

编写一个 gem，我需要生成一个迁移，但是当我尝试时，我得到了使用信息

```
$ rails g migration AddSomeField
Usage:
  rails new APP_PATH [options]

Options:
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:30:32.343

我没有脚本/rails 而不是配置/应用程序，这就是它不起作用的原因。

# cakephp - 所有其他类均可访问的模型

> ID：15690084
> 
> 赞同：0
> 
> 时间：2013-03-28T19:03:27.737
> 
> 标签：cakephp, cakephp-2.0

要访问另一个控制器中的模型，目前我使用`$this->loadModel('Setting')`类中的命令。我希望任何其他类都可以访问我的模型“设置”，而无需我一直使用，我该`$this->loadModel('Setting')`怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:34:56.337

默认情况下，CakePHP 将自动加载“适合”控制器名称的模型（例如，`Post`模型将自动加载为`PostsController`）。

也就是说，如果您*没有指定要加载的模型*。

## 手动指定要在控制器中加载哪些模型

与 CakePHP 中的大多数东西一样，您可以通过手动覆盖“自动”设置来覆盖它；您可以通过`$uses`属性指定要在 Controller 中使用的模型；

```
public $uses = array(
    'ModelA',
    'ModelB',
); 
```

这将在控制器中加载“ModelA”和“ModelB”，可以通过控制器`$this->ModelA`和`$this->ModelB`在控制器内部访问它们。

`$uses`Controller 的属性会与AppModel的属性**合并**`$uses`，所以如果你将`Setting`模型添加到`$uses`你的 AppController 中，那么它会自动加载到**每个扩展了 AppController 的 Controller 中**

阅读文档：[应用控制器](http://book.cakephp.org/2.0/en/controllers.html#the-app-controller)

## 临时访问模型

如果您需要在项目中的*任何位置*访问模型，但主要是如果您只需要在某些条件或特定操作内访问，您可以通过`ClassRegistry`;启动模型

例如;

```
 $ModelA = ClassRegistry::init('ModelA'); 
```

或者，如果您只需要模型中的一些数据，但之后不需要；

```
 $projects = ClassRegistry::init('Project')->find('list'); 
```

# c# - C# 中的泛型和约定

> ID：15690087
> 
> 赞同：8
> 
> 时间：2013-03-28T19:03:36.510
> 
> 标签：c#, asp.net, generics, architecture

我有一个到 .NET 服务层的接口，该层又将通过 Web 服务与第三方系统进行通信。这处理了许多与第三方系统功能相关的不同任务（它实际上是一个定制的 CRM 系统，但由于上下文不相关，我将把它换成一些琐碎的东西）。

界面看起来像这样：

```
public interface IMyService
{
    CarModel GetCar(string registration);
    CarModel AddCar(Car car);
    PersonModel GetPerson(string personId);
    PersonModel AddPerson(Person person);
} 
```

现在，我的模型目前的工作方式如下：我有一个`BaseResponseModel`，每个都从中`SomethingModel`继承。每个都`SomethingModel`包含一些基本属性，还包装了一个`Something`- 像这样：

**基本反应模型**

```
public class BaseResponseModel
{
    public List<string> Errors { get; set; }
    public bool HasErrors
    {
        get
        {
            return (Errors != null && Errors.Count > 0);
        }
    }
} 
```

**具体响应模型**

```
public class CarModel : BaseResponseModel
{
    public Car Car { get; set; }
}

public class PersonModel : BaseResponseModel
{
    public Person Person { get; set; }
} 
```

在这里，`Car`简单`Person`地包含了一堆公共属性。然后，my 的每个方法都`IMyService`接受其参数，将请求格式化为 .asmx Web 服务，将响应解析为其响应模型并将其返回给调用者（一个 .ascx 代码隐藏）。

然而，不同`...Model`类的数量（更不用说它们的包装对象都有不同的属性名称）变得丑陋了。我打算按照以下方式做一些事情：

```
public class Car
{
    public string Registration { get; set; }
}

public class ServiceResponse<T>
{
    public List<string> Errors { get; set; }
    public bool HasErrors { ... }
    public T Result { get; set; }
}

public interface IMyService
{
    ServiceResponse<Car> GetCar(string registration);
    ServiceResponse<Car> AddCar(Car car);
    ServiceResponse<Person> GetPerson(string id);
    ServiceResponse<Person> AddPerson(Person person);
} 
```

然后，我的 ASP.NET 控件`ServiceResponse<T>`将从`IMyService`.

这是 C# 中泛型的“常规正确”用法吗？或者这只是用我的解决方案掩盖了更深层次的架构缺陷？我提出的解决方案中是否缺少某些东西（尽管请注意，不同`Get`和`Add`方法的实现并不像原型看起来那样通用）？

[^(免责声明：如果这个问题“过于主观”，我们深表歉意，但对于 Programmers.SE 来说，它似乎太具体而不能成为一个理论问题，而对于 CodeReview.SE 来说它又有点过于笼统，不能成为一个问题。如果有必要，我愿意接受有关如何改进问题的建议。)]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:01:01.823

我认为这种使用泛型没有问题，除非您可能有人从 .NET 以外的地方使用您的服务。我认为它为 WSDL 生成了非常丑陋的合同名称。

因此，对于您的用例，我会说这很好。我很高兴你也从`Model`改为`Response`。我打算这么建议。

根据错误的使用方式，我个人更愿意为它们引发（聚合）异常。但是，如果您将其用于表单验证或其他用途，我会说这是可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:09:46.960

可能我的回答也太过分了——但我建议在至少在 beta 版本中拥有稳定的工作系统之前避免创建依赖项。尤其是当您处于开发初期时。同样作为最强关系类型之一的继承，它应该尽可能长时间地放在一边。

添加基类或泛型，看起来都一样，你把自己置于一个非常艰难的框架中。

比如说，如果您遇到字典或错误的情况怎么办？或者您需要对 CarRequest 的特殊响应代码？还是像“重定向”这样的特殊响应类型？

所以 - 我的建议是，你对每个请求做出一种特殊的响应，直到在大量开发之后*发现一些响应相似之处。*

应该有的`GetCarResponse`。`GetCar`您是否计划在响应中出现错误？只是抛出一个异常。未找到？返回空值。成立？返回您发现的内容，不要为错误而烦恼。

可能这需要*更多的*编码，但是您可以摆脱一些人为的限制。

# java - 我需要帮助将我的绘画组件添加到类中的框架中

> ID：15690092
> 
> 赞同：0
> 
> 时间：2013-03-28T19:03:52.000
> 
> 标签：java, class, hidden, paintcomponent

我需要帮助使我尝试绘制的内容在屏幕上可见。我基本上能够正确设置它，但是我觉得将所有内容都放在自己的班级中会更有条理。窗口会出现，但不会画任何东西。甚至我设置的背景也没有出现。

```
public class CharacterCreator extends JPanel {

//Declare Variables

ImageIcon icon = new ImageIcon();

//PAINT
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    //Drawing Code
    g.setColor(Color.red);
    g.drawOval(10, 10, 10, 10);
}

//Window Creator
public CharacterCreator() {
    super();
    JFrame application = new JFrame();
    application.setTitle("Window");
    application.setBackground(Color.WHITE);
    application.setIconImage(null);
    application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    application.setSize(500, 400);
    application.setLocationRelativeTo(null);
    application.setVisible(true);

}
} 
```

这是主要的样子：

```
public class GameProject {
    public static void main(String [] args){
        JPanel CC = new CharacterCreator();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:07:04.873

您需要添加`CharacterCreator`到您的`JFrame`：

```
application.add(this); 
```

*旁白：*考虑使用[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:14:25.353

更改 Window Creator 的名称并实现：

```
 public CharacterCreator() {
    super();
    JFrame application = new JFrame();
    application.setTitle("Window");
    application.setBackground(Color.WHITE);
    application.setIconImage(null);
    application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    application.setSize(500, 400);
    application.setLocationRelativeTo(null);
    application.setVisible(true);

    CharacterCreator panel = CharacterCreator();
    application.add(panel);
    } 
```

# javascript - 您如何使用 css/javascript 显示活动页面/选项卡？

> ID：15690094
> 
> 赞同：-3
> 
> 时间：2013-03-28T19:03:59.963
> 
> 标签：javascript, html, css, navigation

我想做一些与这个网站非常相似的事情：http: [//feed-the-beast.com/](http://feed-the-beast.com/)

当您单击导航链接时，页面将向下滑动到适当的 id，并且“活动”导航按钮以某种方式突出显示。我怎样才能做到这一点？我还想为不止一页这样做，因为我还将为论坛设置一个单独的页面。

编辑：我怎样才能完成向下滑动页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:06:36.097

在此处查看演示：http: [//jsfiddle.net/4sGmG/1/](http://jsfiddle.net/4sGmG/1/)

HTML：

```
<nav>
    <a href="#one">One</a>
    <a href="#two">Two</a>
    <a href="#three">Three</a>
    <a href="#four">Four</a>
    <a href="#five">Five</a>
</nav>

<div id="one">One</div>
<div id="two">Two</div>
<div id="three">Three</div>
<div id="four">Four</div>
<div id="five">Five</div> 
```

jQuery：

```
$('nav a').on('click', function() {
    var activeDiv = $(this).attr('href');

    //setActiveMenuItem($(this));

    $('html, body').animate({
       scrollTop: $(activeDiv).offset().top
    }, 2000);        
});

$(window).on('scroll', function(e) {
    var bodyTop = $(document).scrollTop();

    $('div').each(function() {
        var offset = $(this).offset().top - $(window).scrollTop();

        if (offset >= 0) {
            setActiveMenuItem($(this).attr('id'));

            return false;
        }
    });
});

function setActiveMenuItem(id) {
    $('a[href=#' + id + ']').addClass('active');
    $('a[href=#' + id + ']').siblings().removeClass('active');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:07:13.560

使用 JavaScript (jQuery) 软化的基本锚导航可以解决问题。熟悉 Firebug 或 Chrome 的开发人员工具，了解该站点是如何完成的。

Twitter Bootstrap 提供了 ScrollSpy，这是一种位置检测机制，可能也很有用。[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

# c# - 检查整个列表索引是否存在

> ID：15690096
> 
> 赞同：0
> 
> 时间：2013-03-28T19:04:11.330
> 
> 标签：c#, list, viewstate, exists

我有一个 .aspx 程序，它有一个可以编辑和删除的列表。我需要找到一种方法来检查列表索引是否存在，以便我可以相应地填充我的面板。我不是在列表中寻找特定元素。例如，就像 list[2] 一样简单。我会为此提供代码，但我似乎找不到任何至少能​​让我开始的东西。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:07:57.493

您是否要查找列表的长度？

`your_list.count`
会给你元素的数量，所以索引`from 0 to Count - 1`存在。您也可以确认这一点`list[2] != null`。

# android - Android - 对大型相机图像进行下采样时出现 OutOfMemoryError

> ID：15690097
> 
> 赞同：0
> 
> 时间：2013-03-28T19:04:12.610
> 
> 标签：android, image, bitmap, out-of-memory

我在从相机活动中捕获图像、将其保存为较小尺寸并将保存的图像上传到我的服务器时遇到间歇性问题。

如果图像文件大于特定阈值（我使用 2,000KB），我将调用以下函数对其进行下采样并保存较小的图像：

```
private void downsampleLargePhoto(Uri uri, int fileSizeKB)
{
    int scaleFactor = (int) (fileSizeKB / fileSizeLimit);
    log("image is " + scaleFactor + " times too large");

    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    try
    {           
        options.inJustDecodeBounds = false;
        options.inSampleSize = scaleFactor;
        Bitmap scaledBitmap = BitmapFactory.decodeStream(
                    getContentResolver().openInputStream(uri), null, options);
        log("scaled bitmap has size " + scaledBitmap.getWidth() + " x " + scaledBitmap.getHeight());

        String scaledFilename = uri.getPath();
        log("save scaled image to file " + scaledFilename);
        FileOutputStream out = new FileOutputStream(scaledFilename);
        scaledBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
        scaledBitmap.recycle();

        File image = new java.io.File(scaledFilename);
        int newFileSize = (int) image.length()/1000;
        log("scaled image file is size " + newFileSize + " KB");
    }
    catch(FileNotFoundException f)
    {
        log("FileNotFoundException: " + f);
    }
} 
```

但是，对于非常大的图像，我的应用程序崩溃并出现 OutOfMemoryError 在线：

```
Bitmap scaledBitmap = BitmapFactory.decodeStream(
                    getContentResolver().openInputStream(uri), null, options); 
```

此时我还能做些什么来缩小图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:12:19.487

您实际上还没有尝试正确使用 API。您应该设置 inJustDecodeBounds = true 然后调用 decodeStream()。一旦您获得了解码图像的大小，您就可以为 inSampleSize 选择一个适当的值 - 这应该是 (a) 2 的幂，并且 (b) 与压缩图像文件的大小无关 - 然后调用 decodeStream( ) 第二次。

为了选择合适的 inSampleSize 值，我通常参考屏幕尺寸，即如果图像最大边缘大于屏幕最大边缘的两倍，则设置 inSampleSize=2。等等等等。

# php - 带有 DB 错误的 joomla 异常处理

> ID：15690098
> 
> 赞同：2
> 
> 时间：2013-03-28T19:04:17.740
> 
> 标签：php, joomla, joomla2.5

尝试进行异常处理和日志记录。所以，如果我有这样的事情：

```
$db = JFactory::getDbo();
$query = $db->getQuery(true);

$query->select('*')
$query->from('#__users');

try
{
    $db->setQuery($query);
    $result = $db->loadResult();
}
catch (RuntimeException $e)
{
    $e->getMessage();
    JLog::add('This query failed: '.$query);

} 
```

我的问题是如何最好地测试我的异常代码？删除数据库只会让 Joomla 输出这个错误，我永远不会进入我的异常代码：

`Database connection error (2): Could not connect to MySQL.`

我希望能够验证异常并打印日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:29:21.713

我就是这样做的。首先在入口点文件中初始化记录器：

```
JLog::addLogger(
    array('text_file' => 'com_mycom.php'),
    JLog::ALL ^ JLog::ERROR,
    'com_mycom'
);

JLog::addLogger(
    array('text_file' => 'com_mycom.errors.php'),
    JLog::ERROR,
    'com_mycom'
); 
```

然后在模型中使用它：

```
try
{
    $rows = $this->_db->loadObjectList();
}
catch (Exception $e)
{
    JLog::add($e->getMessage(), JLog::ERROR, 'com_mycom');
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:57:14.583

尝试在 try/catch 部分的 try 部分添加 throw 语句。

# shell - 如何为变量赋值并在单行中获取输出的返回值

> ID：15690102
> 
> 赞同：0
> 
> 时间：2013-03-28T19:04:26.943
> 
> 标签：shell, if-statement

我的脚本中有以下行

```
script_list=`ssh@hostip ls -A /directory 2>/dev/null` 
```

有没有办法在 if 条件下使用它，以便我可以分配 script_list 变量或在 else 条件下处理失败场景

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:28:47.933

You can simply check the automatic variable `$?` in the next line:

```
script_list=$( ssh ... )
rc=$?
if [[ $rc -ne 0 ]]; then
    ...something is wrong...
fi 
```

This works because the exit code of `ssh` is the exit code of the command it ran remotely if `ssh` itself could be executed successfully. But usually, you don't care which part of the command chain failed, it's good enough to know that any part (the local `ssh` *or* the remote command failed).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:32:22.083

没问题，做就行了。分配作为命令非常好（命令是指可以在 之后的东西`if`）。

```
if asdf=$(echo test1; exit 1); then
    echo "SUCCESS1: $asdf"
fi
if asdf=$(echo test0; exit 0); then
    echo "SUCCESS0: $asdf"
fi 
```

# iphone - 坐标中两条线的交点

> ID：15690103
> 
> 赞同：8
> 
> 时间：2013-03-28T19:04:29.797
> 
> 标签：iphone, objective-c, math, 2d, intersection

我可以检测到两条线的交点，但如果我的线没有屏幕的长度，它会检测到不应该在的点。

这是一个预览：![路口](../Images/edb6330039f3e39a5f90e1ddb60e9926.png) 所以，它不应该检测到这个交叉点，因为水平线没有那么长。

代码：

```
- (NSMutableArray *) intersectWithLines:(CGPoint)startPoint andEnd:(CGPoint)endPoint {
    NSMutableArray *intersects = [[NSMutableArray alloc] init];

    for(GameLine *line in [_lineBackground getLines]) {

        double lineStartX = line.startPos.x;
        double lineStartY = line.startPos.y;
        double tempEndX = line.endPos.x;
        double tempEndY = line.endPos.y;

        double d = ((startPoint.x - endPoint.x)*(lineStartY - tempEndY)) - ((startPoint.y - endPoint.y) * (lineStartX - tempEndX));

        if(d != 0) {            
            double sX = ((lineStartX - tempEndX) * (startPoint.x * endPoint.y - startPoint.y * endPoint.x) - (startPoint.x - endPoint.x) * (lineStartX * tempEndY - lineStartY * tempEndX)) / d;
            double sY = ((lineStartY - tempEndY) * (startPoint.x * endPoint.y - startPoint.y * endPoint.x) - (startPoint.y - endPoint.y) * (lineStartX * tempEndY - lineStartY * tempEndX)) / d;

            if([self isValidCGPoint:CGPointMake(sX, sY)]) {
                [intersects addObject:[NSValue valueWithCGPoint:CGPointMake(sX, sY)]];
            }            
        }
    }

    return intersects;
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-28T21:13:37.653

*如果我正确理解您的问题，您需要确定两条线段*的交点。这应该使用以下方法：

```
- (NSValue *)intersectionOfLineFrom:(CGPoint)p1 to:(CGPoint)p2 withLineFrom:(CGPoint)p3 to:(CGPoint)p4
{
    CGFloat d = (p2.x - p1.x)*(p4.y - p3.y) - (p2.y - p1.y)*(p4.x - p3.x);
    if (d == 0)
        return nil; // parallel lines
    CGFloat u = ((p3.x - p1.x)*(p4.y - p3.y) - (p3.y - p1.y)*(p4.x - p3.x))/d;
    CGFloat v = ((p3.x - p1.x)*(p2.y - p1.y) - (p3.y - p1.y)*(p2.x - p1.x))/d;
    if (u < 0.0 || u > 1.0)
        return nil; // intersection point not between p1 and p2
    if (v < 0.0 || v > 1.0)
        return nil; // intersection point not between p3 and p4
    CGPoint intersection;
    intersection.x = p1.x + u * (p2.x - p1.x);
    intersection.y = p1.y + u * (p2.y - p1.y);

    return [NSValue valueWithCGPoint:intersection];
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-29T06:11:07.583

[这是Hayden Holligan 对](https://stackoverflow.com/a/37756436/4278818) Swift 3的回答稍作修改的版本：

```
func getIntersectionOfLines(line1: (a: CGPoint, b: CGPoint), line2: (a: CGPoint, b: CGPoint)) -> CGPoint {

    let distance = (line1.b.x - line1.a.x) * (line2.b.y - line2.a.y) - (line1.b.y - line1.a.y) * (line2.b.x - line2.a.x)
    if distance == 0 {
        print("error, parallel lines")
        return CGPoint.zero
    }

    let u = ((line2.a.x - line1.a.x) * (line2.b.y - line2.a.y) - (line2.a.y - line1.a.y) * (line2.b.x - line2.a.x)) / distance
    let v = ((line2.a.x - line1.a.x) * (line1.b.y - line1.a.y) - (line2.a.y - line1.a.y) * (line1.b.x - line1.a.x)) / distance

    if (u < 0.0 || u > 1.0) {
        print("error, intersection not inside line1")
        return CGPoint.zero
    }
    if (v < 0.0 || v > 1.0) {
        print("error, intersection not inside line2")
        return CGPoint.zero
    }

    return CGPoint(x: line1.a.x + u * (line1.b.x - line1.a.x), y: line1.a.y + u * (line1.b.y - line1.a.y))
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-10T20:11:08.593

斯威夫特版本

```
func getIntersectionOfLines(line1: (a: CGPoint, b: CGPoint), line2: (a: CGPoint, b: CGPoint)) -> CGPoint {
        let distance = (line1.b.x - line1.a.x) * (line2.b.y - line2.a.y) - (line1.b.y - line1.a.y) * (line2.b.x - line2.a.x)
        if distance == 0 {
            print("error, parallel lines")
            return CGPointZero
        }

        let u = ((line2.a.x - line1.a.x) * (line2.b.y - line2.a.y) - (line2.a.y - line1.a.y) * (line2.b.x - line2.a.x)) / distance
        let v = ((line2.a.x - line1.a.x) * (line1.b.y - line1.a.y) - (line2.a.y - line1.a.y) * (line1.b.x - line1.a.x)) / distance

        if (u < 0.0 || u > 1.0) {
            print("error, intersection not inside line1")
            return CGPointZero
        }
        if (v < 0.0 || v > 1.0) {
            print("error, intersection not inside line2")
            return CGPointZero
        }

        return CGPointMake(line1.a.x + u * (line1.b.x - line1.a.x), line1.a.y + u * (line1.b.y - line1.a.y))
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-05T21:04:56.040

这是正确的等式：

```
+(CGPoint) intersection2:(CGPoint)u1 u2:(CGPoint)u2 v1:(CGPoint)v1 v2:(CGPoint)v2 {  
    CGPoint ret=u1;  
    double t=((u1.x-v1.x)*(v1.y-v2.y)-(u1.y-v1.y)*(v1.x-v2.x))  
    /((u1.x-u2.x)*(v1.y-v2.y)-(u1.y-u2.y)*(v1.x-v2.x));  
    ret.x+=(u2.x-u1.x)*t;  
    ret.y+=(u2.y-u1.y)*t;  
    return ret;  
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-23T15:16:42.673

这是 Swift 4.2 中的另一个解决方案。这在功能上与 MartinR 的解决方案相同，但使用 simd 向量和矩阵来清理它。

```
/// Protocol adoped by any type that models a line segment.
protocol LineSegment
{
    /// Point defining an end of a line segment.
    var p1: simd_double2 { get }
    /// Point defining an end of a line segment.
    var p2: simd_double2 { get }
}

extension LineSegment
{
    /// Calcualte the intersection between this line segment and another line
    /// segment.
    ///
    /// Algorithm from here:
    /// http://www.cs.swan.ac.uk/~cssimon/line_intersection.html
    ///
    /// - Parameter other: The other line segment.
    /// - Returns: The intersection point, or `nil` if the two line segments are
    ///            parallel or the intersection point would be off the end of
    ///            one of the line segments.
    func intersection(lineSegment other: LineSegment) -> simd_double2?
    {
        let p3 = other.p1 // Name the points so they are consistent with the explanation below
        let p4 = other.p2
        let matrix = simd_double2x2(p4 - p3, p1 - p2)
        guard matrix.determinant != 0 else { return nil } // Determinent == 0 => parallel lines
        let multipliers = matrix.inverse * (p1 - p3)
        // If either of the multipliers is outside the range 0 ... 1, then the
        // intersection would be off the end of one of the line segments.
        guard (0.0 ... 1.0).contains(multipliers.x) && (0.0 ... 1.0).contains(multipliers.y)
            else { return nil }
        return p1 + multipliers.y * (p2 - p1)
    }
} 
```

该算法有效，因为如果您有由两个点**p** **[1]**和**p** **[2]****定义的线段a**和由**p** **[3]**和**p** **[4]**定义的线段**b ，则****a**和**b**上的点分别由

 *******   **p [1]** + t [a] ( **p [2]** - **p [1]** )
*   **p [3]** + t [b] ( **p [4]** - **p [3]** )

所以交点在哪里

**p [1]** + t [a] ( **p [2]** - **p [1]** ) = **p [3]** + t [b] ( **p [4]** - **p [3]** )

这可以重新排列为

**p [1]** - **p [3]** = t [b] ( **p [4]** - **p [3]** ) + t [a] ( **p [1]** - **p [2]** )

并且通过一些棘手的扑克，您可以得到以下等价物

**p [1]** - **p [3]** = **A。** _ **吨**

其中**t**是向量 (t [b] , t [a] )，**A**是矩阵，其列是**p [4]** - **p [3]**和**p [1]** - **p [2]**

方程可以重新排列为

**一个**^(-1) ( **p [1]** - **p [3]** ) = **t**

左边的一切都是已知的，或者可以计算得到我们**t**。**t**的任何一个分量都可以插入各自的原始方程以获得交点（NB 浮点舍入误差意味着两个答案可能不完全相同但非常接近）。

请注意，如果线平行，则**A**的行列式将为零。此外，如果任一组件超出范围`0 ... 1`，则需要扩展一个或两个线段以到达交点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-24T07:12:30.547

我知道答案已经给出，而且所有答案都是正确的，我觉得要对这个问题给出我的答案。所以就在这里。

```
func linesCross(start1: CGPoint, end1: CGPoint, start2: CGPoint, end2: CGPoint) -> (x: CGFloat, y: CGFloat)? {
// calculate the differences between the start and end X/Y positions for each of our points
let delta1x = end1.x - start1.x
let delta1y = end1.y - start1.y
let delta2x = end2.x - start2.x
let delta2y = end2.y - start2.y

// create a 2D matrix from our vectors and calculate the determinant
let determinant = delta1x * delta2y - delta2x * delta1y

if abs(determinant) < 0.0001 {
    // if the determinant is effectively zero then the lines are parallel/colinear
    return nil
}

// if the coefficients both lie between 0 and 1 then we have an intersection
let ab = ((start1.y - start2.y) * delta2x - (start1.x - start2.x) * delta2y) / determinant

if ab > 0 && ab < 1 {
    let cd = ((start1.y - start2.y) * delta1x - (start1.x - start2.x) * delta1y) / determinant

    if cd > 0 && cd < 1 {
        // lines cross – figure out exactly where and return it
        let intersectX = start1.x + ab * delta1x
        let intersectY = start1.y + ab * delta1y
        return (intersectX, intersectY)
    }
}

// lines don't cross
return nil
} 
```

我从[这个网站](https://www.hackingwithswift.com/example-code/core-graphics/how-to-calculate-the-point-where-two-lines-intersect)得到这个。

这一个也非常简单易行。

快乐编码:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-12T17:04:11.727

这个答案有多种编程语言可用

[https://rosettacode.org/wiki/Find_the_intersection_of_two_lines](https://rosettacode.org/wiki/Find_the_intersection_of_two_lines)

```
struct Point {
  var x: Double
  var y: Double
}

struct Line {
  var p1: Point
  var p2: Point

  var slope: Double {
    guard p1.x - p2.x != 0.0 else { return .nan }

    return (p1.y-p2.y) / (p1.x-p2.x)
  }

  func intersection(of other: Line) -> Point? {
    let ourSlope = slope
    let theirSlope = other.slope

    guard ourSlope != theirSlope else { return nil }

    if ourSlope.isNaN && !theirSlope.isNaN {
      return Point(x: p1.x, y: (p1.x - other.p1.x) * theirSlope + other.p1.y)
    } else if theirSlope.isNaN && !ourSlope.isNaN {
      return Point(x: other.p1.x, y: (other.p1.x - p1.x) * ourSlope + p1.y)
    } else {
      let x = (ourSlope*p1.x - theirSlope*other.p1.x + other.p1.y - p1.y) / (ourSlope - theirSlope)
      return Point(x: x, y: theirSlope*(x - other.p1.x) + other.p1.y)
    }
  }
}

let l1 = Line(p1: Point(x: 4.0, y: 0.0), p2: Point(x: 6.0, y: 10.0))
let l2 = Line(p1: Point(x: 0.0, y: 3.0), p2: Point(x: 10.0, y: 7.0))

print("Intersection at : \(l1.intersection(of: l2)!)") 
```******

# android - 我如何在 android 的活动中间显示操作栏

> ID：15690111
> 
> 赞同：1
> 
> 时间：2013-03-28T19:04:51.087
> 
> 标签：android, android-fragments, android-actionbar

我需要建议使动作条在活动中间或活动中的任何位置与下图相同

![在此处输入图像描述](../Images/631893bed60a9a1914aeccafc22c92f0.png)

因为我正在尝试使用片段，但无法弄清楚如何显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:09:43.380

您可以使用 ViewPagerIndicator 库中的 TabPagerIndicator 控件

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

# android - 当我尝试使用共享首选项创建会话时，我的应用程序崩溃

> ID：15690115
> 
> 赞同：0
> 
> 时间：2013-03-28T19:04:59.963
> 
> 标签：android, session, sharedpreferences, logcat

我尝试在用户登录后使用共享首选项创建会话。问题是应用程序正在崩溃，我不知道它为什么会发生。我使用一个单独的类来使方法在所有活动中都可用..

我只是这样调用会话创建方法： session.createLoginSession(user);

**这是那个类**：

```
package com.example.liquifyapp;

import java.util.HashMap;
import com.example.liquifyapp.LogReg;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;

public class SessionManager {
    // Shared Preferences
    SharedPreferences pref;

    // Editor for Shared preferences
    Editor editor;

    // Context
    Context _context;

    // Shared pref mode
    int PRIVATE_MODE = 0;

    // Sharedpref file name
    private static final String PREF_NAME = "AndroidHivePref";

    // All Shared Preferences Keys
    private static final String IS_LOGIN = "IsLoggedIn";

    // User name (make variable public to access from outside)
    public static final String KEY_NAME = "name";

    // Constructor
    public SessionManager(Context context){
        this._context = context;
        pref = _context.getSharedPreferences(PREF_NAME, PRIVATE_MODE);
        editor = pref.edit();
    }

    /**
     * Create login session
     * */
    public void createLoginSession(String name){
        // Storing login value as TRUE
        editor.putBoolean(IS_LOGIN, true);

        // Storing name in pref
        editor.putString(KEY_NAME, name);

        // commit changes
        editor.commit();
    }   

    /**
     * Check login method wil check user login status
     * If false it will redirect user to login page
     * Else won't do anything
     * */
    public void checkLogin(){
        // Check login status
        if(!this.isLoggedIn()){
            // user is not logged in redirect him to Login Activity
            Intent i = new Intent(_context, LogReg.class);
            // Closing all the Activities
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            // Add new Flag to start new Activity
            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            // Staring Login Activity
            _context.startActivity(i);
        }

    }

    /**
     * Get stored session data
     * */
    public HashMap<String, String> getUserDetails(){
        HashMap<String, String> user = new HashMap<String, String>();
        // user name
        user.put(KEY_NAME, pref.getString(KEY_NAME, null));

        // return user
        return user;
    }

    /**
     * Clear session details
     * */
    public void logoutUser(){
        // Clearing all data from Shared Preferences
        editor.clear();
        editor.commit();

        // After logout redirect user to Loing Activity
        Intent i = new Intent(_context, LogReg.class);
        // Closing all the Activities
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        // Add new Flag to start new Activity
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        // Staring Login Activity
        _context.startActivity(i);
    }

    /**
     * Quick check for login
     * **/
    // Get Login State
    public boolean isLoggedIn(){
        return pref.getBoolean(IS_LOGIN, false);
    }
} 
```

**这是我的日志**：

```
03-28 21:00:17.991: D/dalvikvm(14320): GC_CONCURRENT freed 41K, 14% free 7123K/8195K, paused 11ms+2ms, total 35ms
03-28 21:00:17.991: D/dalvikvm(14320): WAIT_FOR_CONCURRENT_GC blocked 17ms
03-28 21:00:18.038: D/dalvikvm(14320): GC_FOR_ALLOC freed 3K, 13% free 8533K/9735K, paused 12ms, total 12ms
03-28 21:00:18.132: D/dalvikvm(14320): GC_FOR_ALLOC freed 18K, 10% free 9970K/11015K, paused 22ms, total 23ms
03-28 21:00:18.202: D/libEGL(14320): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
03-28 21:00:18.218: D/libEGL(14320): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
03-28 21:00:18.222: D/libEGL(14320): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
03-28 21:00:18.261: D/OpenGLRenderer(14320): Enabling debug mode 0
03-28 21:00:32.354: D/AndroidRuntime(14320): Shutting down VM
03-28 21:00:32.354: W/dalvikvm(14320): threadid=1: thread exiting with uncaught exception (group=0x4169f300)
03-28 21:00:32.366: E/AndroidRuntime(14320): FATAL EXCEPTION: main
03-28 21:00:32.366: E/AndroidRuntime(14320): java.lang.NullPointerException
03-28 21:00:32.366: E/AndroidRuntime(14320):    at com.example.liquifyapp.LogReg$PostAsyncTask.onPostExecute(LogReg.java:213)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at com.example.liquifyapp.LogReg$PostAsyncTask.onPostExecute(LogReg.java:1)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at android.os.AsyncTask.finish(AsyncTask.java:631)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at android.os.Looper.loop(Looper.java:137)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at android.app.ActivityThread.main(ActivityThread.java:4931)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at java.lang.reflect.Method.invokeNative(Native Method)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at java.lang.reflect.Method.invoke(Method.java:511)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-28 21:00:32.366: E/AndroidRuntime(14320):    at dalvik.system.NativeStart.main(Native Method) 
```

**继承人 LogReg 类**：[http ://pastebin.com/eBacDZqW](http://pastebin.com/eBacDZqW)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:19:17.463

您忘记在Activity 方法中初始化class.initialize的`session`对象， 如下：`SessionManager``onCreate``LogReg``setContentView`

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.activity_log_reg);
        session=new SessionManager(LogReg.this); //<< initialize here
        ..... 
```

# javascript - 如何在三角形箭头上设置边框颜色

> ID：15690121
> 
> 赞同：1
> 
> 时间：2013-03-28T19:05:22.557
> 
> 标签：javascript, jquery, css

我正在尝试创建一个自定义弹出框。然而我已经尝试过这个：

[http://jsbin.com/uyezeq/1/edit](http://jsbin.com/uyezeq/1/edit)

我试图在 div 具有的三角形箭头上实现相同的边框颜色（您可以在输出 div 的右上角看到它）。我怎样才能做到这一点 ？

*请不要向我推荐任何第三方插件，如 bootstrap popover 或任何其他*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:30:41.817

从[CSS 三角形自定义边框颜色](https://stackoverflow.com/questions/9450733/css-triangle-custom-border-color)中获取参考，我已经实现了这一点：

[http://jsbin.com/uyezeq/7/edit](http://jsbin.com/uyezeq/7/edit)

感谢所有指导我写作方向的人:)

# javascript - 如何将函数返回的数组复制到 JavaScript 中的另一个数组中？

> ID：15690124
> 
> 赞同：-2
> 
> 时间：2013-03-28T19:05:38.160
> 
> 标签：javascript, slideshow

我正在尝试将填充在函数中的数组返回到另一个数组，因此我可以将数组中的值用于幻灯片放映。

我的代码是：

```
 var flag = 0
    var slideimages = new Array()
    slideimages = readfile()

    function readfile(){
    //read data into array x
    flag =1
    return x
    }

    if(flag == 1){
    //execute slideshow functions
    }

    //slideshow functions definitions (for timeout n picture index etc)
    //using slideimages[index] to choose pic 
```

有人可以帮我吗？

我的幻灯片没有运行，我猜这是因为这些值没有被复制到 slideimages[]

编辑：

这是我的代码：

```
<html><head></head><body>
    <div id="col1">
                <img id="img_frame" class="lazy-img" name="slide1">
            </div>
            <div id="col2">
                <img id="img_frame" class="lazy-img" name="slide2">
            </div>
            <div id="col3">
                <img id="img_frame" class="lazy-img" name="slide3">
            </div>
            <div id="col4">
                <img id="img_frame" class="lazy-img" name="slide4">
            </div>
            <div id="col5">
                <img id="img_frame" class="lazy-img" name="slide5">
            </div>    
    <script language="JavaScript1.1">
                function getImages() {
                    var slideimages = new Array();
                    slideimages = readfile();
                    if(slideimages){
                        slideit1()
                        slideit2()
                        slideit3()
                        slideit4()
                        slideit5()
                    }

                }

                function readfile(){ 
                    var allText =[];
                    var Lines = [];
                    var txtFile = new XMLHttpRequest();
                    txtFile.open("GET", "urls.txt", true);
                    allText = txtFile.responseText;
                    txtFile.onreadystatechange = function()
                    {
                        if (txtFile.readyState == 4 && txtFile.status == 200)
                        {// Makes sure it's found the file.
                            allText = txtFile.responseText;
                            Lines = allText.split(/\r\n|\n/);
                        } 
                        else {
                            //alert("Didn't work"); 
                        }
                    }
                    txtFile.send(null)
                    return Lines
                }
                var slideshowspeed1=3000
                var slideshowspeed2=27000
                var slideshowspeed3=70000
                var slideshowspeed4=11000
                var slideshowspeed5=50000  

                var whichimage1=0
                var whichimage2=100
                var whichimage3=300
                var whichimage4=500
                var whichimage5=700

                function slideit1(){
                    if (!document.images)
                        return
                    document.images.slide1.src=slideimages[whichimage1]
                    if (whichimage1<slideimages.length-1)
                        whichimage1++
                    else
                        whichimage1=0
                    setTimeout("slideit1()",slideshowspeed1)}//slideit1()

                function slideit2(){
                    if (!document.images)
                        return
                    document.images.slide2.src=slideimages[whichimage2]
                    if (whichimage2<slideimages.length-1)
                    whichimage2++
                    else
                        whichimage2=0
                    setTimeout("slideit2()",slideshowspeed2)}//slideit2()

                function slideit3(){
                    if (!document.images)
                        return
                    document.images.slide3.src=slideimages[whichimage3]
                    if (whichimage3<slideimages.length-1)
                    whichimage3++
                    else
                        whichimage3=0
                    setTimeout("slideit3()",slideshowspeed3)}//slideit3()

                function slideit4(){
                    if (!document.images)
                        return
                    document.images.slide4.src=slideimages[whichimage4]
                    if (whichimage4<slideimages.length-1)
                    whichimage4++
                    else
                        whichimage4=0
                    setTimeout("slideit4()",slideshowspeed4)}//slideit4()

                function slideit5(){
                    if (!document.images)
                        return
                    document.images.slide5.src=slideimages[whichimage5]
                    if (whichimage5<slideimages.length-1)
                    whichimage5++
                    else
                        whichimage5=0
                    setTimeout("slideit5()",slideshowspeed5)}//slideit5()

            </script>
</body>
</html> 
```

我真的不知道为什么我网页上的 div 不显示图像（其 url 在 urls.txt 文件中）。我对此真的很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:17:21.863

你真的不应该像这样嵌套函数。每次调用 readfile 时，它​​都会创建一个新的 readfile 函数对象，这是一种糟糕的设计，如果您不小心，可能会使您的系统陷入困境。此外，您真的可以以更简洁的方式完成“flag”试图完成的相同事情。尝试以下操作：

```
function getImages() {
  var slideimages = readfile();
  if (slideimages) {
    // execute slideshow functions
},

function readfile() {
  // read data into array x
  return x;
} 
```

您的问题可能与您如何实现“将数据读入数组 x”有关。如果您仍然无法弄清楚，请发布其余代码。

# android - 将列表添加到片段而不扩展 ListFragment

> ID：15690126
> 
> 赞同：1
> 
> 时间：2013-03-28T19:05:58.233
> 
> 标签：android, android-listview, android-fragments

我正在尝试添加一个`ListView`using `Fragment`。我知道可以通过扩展`ListFragment`等来完成。但我想扩展`Fragment`然后添加`listView`. 但是下面的代码不起作用（它也没有显示任何错误）。

片段类

```
public class OtherFragment extends Fragment { 

    final String[] items = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
       "Linux", "OS/2" };

    @Override
    public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle savedInstanceState)
    {       
        View view = inflater.inflate(R.layout.activity_main, container,false);
        ListView list = (ListView)view.findViewById(R.id.listView1);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, items);
        list.setAdapter(adapter);
        return view;
    }
} 
```

片段的 XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView>

</RelativeLayout> 
```

MainActivity（主类）

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        FragmentManager fm= getFragmentManager();
        if(fm.findFragmentById(R.id.fragmentContent)==null)
        {
            Log.d("add fragment", "fragment added");
            FragmentTransaction ft = fm.beginTransaction();
            ft.add(R.id.fragmentContent, new OtherFragment());
            ft.commit();
        }
    }
} 
```

main.xml（主 xml 文件）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/fragmentContent"
        android:layout_width="0px"
        android:layout_height="match_parent"/>

</RelativeLayout> 
```

固定的：

```
android:layout_width="match_parent" 
```

丑陋的错误。谢谢尼尼尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:15:31.700

固定的：

```
android:layout_width="match_parent" 
```

丑陋的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T12:06:42.037

最好使用`LisFragment`，这样可以避免以后出现其他问题。一些事情，比如如果您使用列表视图在普通片段上方打开片段，您将面临一些 onCLick 处理问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:07:06.783

您的 Main Activity 需要扩展 FragmentActivity 而不仅仅是 Activity

```
public class MainActivity extends FragmentActivity { 
```

而且您的布局需要是片段而不是线性布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  tools:context=".MainActivity" >

  <Fragment
    android:id="@+id/fragmentContent"
    android:layout_width="0px"
    android:layout_height="match_parent"/>

</RelativeLayout> 
```

# ms-access - 从访问批量执行

> ID：15690128
> 
> 赞同：0
> 
> 时间：2013-03-28T19:06:03.467
> 
> 标签：ms-access, batch-file, ftp

我正在尝试从我的访问代码执行批处理文件。我使用以下代码：

```
Open vPath & "\FtpComm.txt" For Output As fNum
Connexion (fNum) 'function printing connexion info
Print #fNum, "put " & vFile & " Temp.mdb"  'vFile = filename + full path
Deconnexion (fNum) 'function printing deconnexion info
Close fNum
Open vPath & "\doFtp.bat" For Output As batFileHandle 'vPath = full path
Print #batFileHandle, "ftps -a -s:" & vPath & "\FtpComm.txt >" & vPath & "\output.txt"     
Close batFileHandle
RetVal = ExecCmd(vPath & "\doFtp.bat")

Public Function ExecCmd(cmdstr As String) As Long
Dim wsh As Object
Set wsh = CreateObject("Wscript.Shell")
ExecCmd = wsh.Run(cmdstr, 0, True)
End Function 
```

批处理文件不会执行，但会创建一个空的 output.txt 文件。我为 ftp.exe 而不是 ftps.exe 使用了完全相同的代码，并且它没有问题地工作。批处理文件已正确创建，当我手动执行它时它工作正常。

我不明白 MOVEit Freely (ftps.exe) 的文档中发生了什么变化，他们说您只需将 ftp 更改为 ftps，所有其他方面都相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:55:46.003

放置`FTPS.EXE`在您的路径中应该可以解决问题。

# android - 为什么这个圆圈是红色的？

> ID：15690132
> 
> 赞同：0
> 
> 时间：2013-03-28T19:06:19.717
> 
> 标签：android

我尝试用这段代码制作一个渐变圆：

```
RadialGradient gradient = new RadialGradient(0, 0, 40, new int[]{Color.RED, Color.YELLOW}, new float[] {3,4}, android.graphics.Shader.TileMode.CLAMP); 
```

这只会用红色制作一个圆圈。为什么不是黄色渐变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:35:53.183

试试这样的 RadialGradient gradient1 =new android.graphics.RadialGradient(0, 0,40,Color.RED,Color.YELLOW, android.graphics.Shader.TileMode.CLAMP);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:18:10.257

可能是因为您的 float[] 参数是伪造的......这些值不应该在 0 和 1 之间吗？所以要有一个红色的中心和一个黄色的边缘，你可以使用 float[] {0,1}。

（这有点猜测......我还没有运行代码来检查，文档也不太清楚）。

# ruby-on-rails - 在 Rake 任务中使用环境变量

> ID：15690135
> 
> 赞同：7
> 
> 时间：2013-03-28T19:06:31.200
> 
> 标签：ruby-on-rails, environment-variables, rake-task

```
task :some_task, :environment do |t, args|
  puts Rails.env #=> development, production, etc
  puts ENV #=> {}
end 
```

我设置了一些环境变量（通过本地 .env 或通过 Herokusan 通过 Heroku Config），例如要使用的 AWS 存储桶，我想在 rake 任务中引用它们，但 ENV 是一个空哈希。我知道由于`:environment`任务依赖性而完成了与环境相关的某些事情并且`Rails.env`具有价值，但我不清楚细节。

那么，如何`ENV`在 Rake 任务中使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-18T06:00:40.980

两种好方法：

使用 Heroku 的“工头”工具。将所有环境变量放入`.env`：

```
VAR=value 
```

并运行`foreman run rake some_task`。

或者（而且，我推荐这种方式），使用“费加罗”宝石。将您的变量放入`config/application.yml`：

```
VAR: value 
```

就是这样；`rake some_task`.

我会推荐后者，如果只是因为`rake figaro:heroku`它会推动你的环境，因为它是指定的`application.yml`

# javascript - 使用 AJAX 将数据库记录加载到表中？

> ID：15690139
> 
> 赞同：1
> 
> 时间：2013-03-28T19:06:44.243
> 
> 标签：javascript, php, ajax, html-table

我得到了一个代码来修改使用 ajax 的网站上的数据库记录。

我有正确查询数据的功能，但显示的表没有得到其中显示的任何记录。我有函数的代码和下面的html。

请查看当前版本的此链接：[http ://www.eng.nene.ac.uk/~10406206/CSY2028/Ajax/Ajax.html](http://www.eng.nene.ac.uk/~10406206/CSY2028/Ajax/Ajax.html)

**带有回调的加载记录函数不确定为什么使用回调**

```
<script language="Javascript">

var xmlHttpReq = false;
var xmlHttpReq2 = false;
var xmlHttpReq3 = false;

function loadDatabaseRecordsCallback () 
{
    if (xmlHttpReq.readyState == 4) 
{            
   alert ("From Server (Load Records):List.php" + xmlHttpReq.responseText);

    var record = xmlHttpReq.responseXML.getElementsByTagName('record');
    var s = "";
    for (var i = 0; i < record.length; i ++)
    {
    var rec = record[i];

    var id = rec.getElementsByTagName("ID")[0].firstChild.data;
    var carname = rec.getElementsByTagName("CARNAME")[0].firstChild.data;
    var fueltype = rec.getElementsByTagName("FUELTYPE")[0].firstChild.data;
    var transmission = rec.getElementsByTagName("TRANSMISSION")[0].firstChild.data;
    var enginesize = rec.getElementsByTagName("ENGINESIZE")[0].firstChild.data;
    var doors = rec.getElementsByTagName("DOORS")[0].firstChild.data;
    var total = rec.getElementsByTagName("TOTAL")[0].firstChild.data;
    var available = rec.getElementsByTagName("AVAILABLE")[0].firstChild.data;
    appendRecord (id, carname, fueltype, transmission, enginesize, doors, total, available);
    }
}
}

function loadDatabaseRecords () 
{
    // Mozilla/Safari
    if (window.XMLHttpRequest) 
    {
        xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) 
    {
        xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }

    alert ("To Server (Load Records): List.php");

    xmlHttpReq.open('GET', "List.php", true);
xmlHttpReq.onreadystatechange = loadDatabaseRecordsCallback; 
xmlHttpReq.send(null);
} 
```

**在与函数相同的页面上是下表**

```
<body>
  <form name="f1">
    <input value="Load Database" type="button" onclick='JavaScript:loadDatabaseRecords()'></p>
  </form>
  <table id="DBTable"  border="2">
    <tr>
      <td width="20">ID</td>
      <td width="100">Car Name</td>
      <td width="100">Fuel Type</td>
      <td width="100">Transmission</td>
      <td width="80">Engine size</td>
      <td width="20">Doors</td>
      <td width="20">Total</td>
      <td width="20">Available</td>
     </tr>
     <form name="myform">
     <tr>
      <td><input type="text" name="id"></td>
      <td><input type="text" name="carname"></td>
      <td><input type="text" name="fueltype"></td>
      <td><input type="text" name="transmission"></td>
      <td><input type="text" name="enginesize"></td>
      <td><input type="text" name="doors"></td>
      <td><input type="text" name="total"></td>
      <td><input type="text" name="available"></td>
      <td colspan="2"><input type="button" value="add" onClick="JavaScript:addNewRecord()"></td>
<td colspan="2"><input type="checkbox" value="update" onClick="JavaScript:updateRecord()"></td>
<td colspan="2"><input type="checkbox" value="delete" onClick="JavaScript:deleteRecord()"></td>
     </tr>
     </form>
  </table>
</body> 
```

**该函数调用List.php，其编码如下**

```
<?php
  $link = mysql_connect ("194.81.104.22", "********", "*****");
  mysql_select_db ("*******");

  $query = "SELECT * from XYZ";
  $result = mysql_query ($query);

 for ($i = 0; $i < mysql_num_rows ($result); $i ++)
  {        
    $row = mysql_fetch_object ($result);
    print "<b>Car Name:</b> <i>$row->CARNAME</i><br>";
    print "<b>Fuel Type:</b> <i>$row->FUELTYPE</i><br>";
    print "<b>Transmission:</b> <i>$row->TRANSMISSION</i><br>";
    print "<b>Total:</b> <i>$row->TOTAL</i><br>";
    print "<b>Available:</b> <i>$row->AVAILABLE</i><br><br>";
  }

  mysql_close ($link);
?> 
```

因此，如果您看过该网站，您会看到您按下了加载数据库按钮，然后会出现一个包含所有数据库条目的框。但是，一旦您按下输入，页面上的表格仍然是空的。

我的问题是为什么？你能解释一下问题出在哪里吗？

Ajax 新手，如果我违反了帖子规则，我会道歉，这是我的第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:12:15.170

我不清楚 php，但我记得我的 asp + ajax 经验：

您将数据带回浏览器，但您应该“重新绘制”页面 - 您可以在 javascript 中执行此操作，或者 PHP 可能为此提供了一些现成的解决方案。

当您验证您的方法 appendRecord 接收有效值时 - 通过 id 使用 javascript 查找您的表 (DBTable)，并通过您的记录更新行/列的值。

我建议你看看[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T07:06:38.890

您将数据带回浏览器，但您应该“重新绘制”页面 - 您可以在 javascript 中执行此操作，或者 PHP 可能为此提供了一些现成的解决方案。

当您验证您的方法 appendRecord 接收有效值时 - 通过 id 使用 javascript 查找您的表 (DBTable)，并通过您的记录更新行/列的值。

# javascript - 处理来自服务的“错误”格式的 JSON？

> ID：15690145
> 
> 赞同：0
> 
> 时间：2013-03-28T19:07:07.840
> 
> 标签：javascript, knockout.js

我正在查看 Knockout 教程，在 JSON 示例中，它假定 Web 服务将返回这样的 JSON（如果它是 JSON 对象数组）：

```
[  { "id": 1}, { "id": 2}, { "id": 3} ] 
```

我将如何处理返回不同结构 JSON 的服务？

```
[ { "resource": { "id": 1} }, { "resource": { "id": 2} }, { "resource": { "id": 3 } } ] 
```

我想要 id 名称，而不是资源名称。

谢谢。

编辑：我修复了资源的不正确格式（根据马特）。JSON 是有效的，只是不是 KO 示例所期望的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:12:28.577

您应该能够遍历您的数据并将其展平（假设您的原始数据是 JavaScript 对象数组而不是 JSON）：

```
var original = JSON.parse([ { "resource": { "id": 1} }, { "resource": { "id": 2} }, { "resource": { "id": 3 } } ]);
var flattened = [];
for (var i=0; i < original.length; i++) {
    flattened.push(original[i].resource);
} 
```

如果您真的需要再次将输出返回为 JSON，您可以使用`JSON.stringify`

# jsf-2 - 从 JSF 2.0 中的视图/页面中的数据表将参数传递给 bean 方法

> ID：15690147
> 
> 赞同：0
> 
> 时间：2013-03-28T19:07:12.240
> 
> 标签：jsf-2, datatable, parameter-passing

我有一个包含从列表中填充的数据表的页面。该列表有许多 id，我需要将它们传递给 bean 方法并执行数据库操作。我正在使用 commandButton 的 render 属性来调用 bean 方法 (findInfo())。我需要一次将列表中的 id (myBean.testList.id) 传递给这个 bean 方法，以便我得到布尔值。首先，我不确定如何传递 id（到我的 bean 中的 findInfo 方法），其次，如果我使用标签，我最终只发送一个 ID。谁能给我一个解决方案。我尝试使用以下代码进行操作。

我的豆子

```
@ManagedBean(name="myBean")
public class MyBean(){

  public boolean findInfo(Integer indId){
    boolean var = dataProvider.isIdPresent(indId); // database operation
    if (var)
        return true;
    else 
        return false;
  }
} 
```

xhtml页面

```
<h:dataTable value="#{myBean.testList}" var="t" >

  <h:column>
    <f:facet name="header">
        <h:outputText value="Actions" />
    </f:facet>

    <h:commandButton value = "Add"
    action = "#{someBean.loadReport}"
    rendered = "#{myBean.findInfo() == false}"/>

    <h:commandButton value = "View"
    action = "#{someBean.loadReport}"
    rendered = "#{myBean.findInfo() == true}"/>

</h:column>
<h:column>
...
</h:column>
</h:dataTable> 
```

**更新：** 我试图按照 BalusC 解释的答案（kolossus 发布），我最终在 f:param 中将 id 作为 null 传递。有什么建议么。我更新的代码：

```
<h:dataTable value="#{myBean.testList}" var="t" >

<h:column>
    <f:facet name="header">
        <h:outputText value="Actions" />
    </f:facet>

    <h:commandButton value = "Add"
    action = "#{someBean.loadReport}"
    rendered = "#{myBean.findInfo() == false}">
        <f:param name="id" value="#{t.id}" /> 

    </h:commandButton>

    <h:commandButton value = "View"
    action = "#{someBean.loadReport}"
    rendered = "#{myBean.findInfo() == true}">
        <f:param name="id" value="#{t.id}" /> 
    </h:commandButton>

</h:column>
<h:column>
...
</h:column> 
```

我更新的 Bean

```
@ManagedBean(name="myBean")
@RequestScoped
public class MyBean(){

@ManagedProperty("#{param.id}")
private Integer indId;

public boolean findInfo(){
    boolean var = dataProvider.isIndIdPresent(indId);
    if (var)
        return true;
    else 
        return false;
}
} 
```

另外，我认为我不能使用 f:ViewParam，因为我正在同一个视图中从数据表中调用 bean。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:42:05.323

首先，您应该将您的 bean 声明为`@ViewScoped`. 然后，你可以保持你的`findInfo`方法如下：

```
@ManagedBean(name="myBean")
@ViewScoped
public class MyBean(){
    private List testList;    

    public boolean findInfo(Integer indId){ ... }

    // Getters and Setters
} 
```

以下代码段应该可以完成这项工作：

```
<h:dataTable value="#{myBean.testList}" var="t" >
    <h:column>
        <h:commandButton value="Add" action="#{someBean.loadReport}"
                         rendered="#{not myBean.findInfo(t.id)}" />

        <h:commandButton value="View" action="#{someBean.loadReport}"
                         rendered="#{myBean.findInfo(t.id)}" />
    </h:column>
</h:dataTable> 
```

**更新：**由于您没有使用 EL 2.2，因此您可能需要在呈现表格之前处理每一行的布尔值。将对象包装在`testList`一个包含布尔值的虚拟对象内部应该可以完成这项工作:)。像这样的东西：

```
@ManagedBean(name="myBean")
@ViewScoped
public class MyBean(){
    private List<DummyObject> testList;    

    @PostConstruct
    public boolean prepareTestList(){ 
        // Initiate test list
        List<AnObject> oriList = ....;

        // Process oriList to create a testList
        this.testList = new LinkedList();
        for (AnObject o : oriList) {
            DummyObject do = new DummyObject();
            do.setObject(o);
            do.setIdPresent(findInfo(o.getId()));
            this.testList.add(do);
        }
    }

    public boolean findInfo(Integer indId) { ... }

    public class DummyObject {
       private boolean  idPresent;
       private AnObject object;

       // Getters and Setters
    }

    // Getters and Setters
} 
```

那么你的`rendered`属性应该是这样的：

```
<h:commandButton value="View" action="#{someBean.loadReport}"
                 rendered="#{t.idPresent}" /> 
```

# c++ - 类方法和参数传递

> ID：15690149
> 
> 赞同：3
> 
> 时间：2013-03-28T19:07:13.487
> 
> 标签：c++, class, methods

我一直在编程，并且在 c++ 类中发现了奇怪的行为。所以我创建了一个简单的类，其中包含字符串、该类的构造函数和从对象打印字符串的友元方法（显示）。但正如您在 main 函数中看到的那样。我传递给方法（显示）简单的字符串，它可以工作。我发现它很方便，但是如果方法参数是对对象的引用，为什么它会起作用？

```
#include <iostream>
using namespace std;

class lol
{
  char * str;
public:
  lol(const char * s);
  friend void show(const lol & l);
};

lol::lol(const char * s)        //assign string to object
{
  str = new char[strlen(s)+1];
  strcpy(str,s);
}

void show(const lol & l)        //prints string from object
{   
  cout << l.str;
};

int main()
{
  show("TEST"); //passing string but not an object
  return 0;
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T19:09:55.503

> 我发现它很方便，但是如果方法参数是对对象的引用，为什么它会起作用？

它之所以有效，是因为您的`lol`类定义了一个接受 a`const char*`并且*未*标记为的构造函数`explicit`。

这授权编译器`show("TEST")`通过构造一个临时对象类型来解析调用`lol`，将字符串文字`"TEST"`作为参数传递给构造函数，并将您的引用参数绑定`l`到这个临时对象。

为了防止这种隐式*的用户定义转换序列*，请将您的构造函数标记为`explicit`：

```
class lol
{
    char * str;
public:
    explicit lol(const char * s);
//  ^^^^^^^^
    friend void show(const lol & l);
}; 
```

这样，调用`show("TEST")` [将导致编译器错误](http://liveworkspace.org/code/48Ihhx$2)。

# c++ - C++：实现自定义 Main 函数

> ID：15690153
> 
> 赞同：6
> 
> 时间：2013-03-28T19:07:40.810
> 
> 标签：c++, dll, dynamic-library

WinMain 是一个“替换”默认主入口点“main”的函数。

然后，用户可以定义其主要入口点，例如

```
int WINAPI WinMain(...) { } 
```

**这种封装是如何完成的？**

好吧，最有可能的是，在某些时候它看起来像这样：

```
int main() // This must be defined somewhere in windows.h
{
    return WinMain(...);
} 
```

**问题：**我怎样才能完成我自己的这样一个封装，然后调用 WinMain？注意：我制作的库是一个 DLL，所以它看起来像这样：

```
// This is the minimal code for the application which uses 'MyLibrary'
#pragma comment(lib, "MyLibrary.lib")
include "MyLibrary.h"

void Main(MyCustomParameter *params)
{
    // Write user code here
} 
```

**然而问题**是，DLL 不“知道”该`Main()`函数，因此会引发“未解析的外部符号”编译错误。那么我怎样才能像这样封装它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:13:03.457

您必须确定自定义主函数的签名并将其声明为“extern”（在 C++ 的情况下为外部“C”）。然后，应用程序代码必须定义该函数并链接到具有实际`_main`入口点的静态库。例如：

```
extern "C" int my_main(int argc, char *argv[]);

int main(int argc, char *argv[])
{
    return my_main(argc, argv);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T20:06:06.127

实际上，真正的入口点既不是 main 也不是 WinMain。真正的入口点是 wWinMainCRTStartup、WinMainCRTStartup、wmainCRTStartup 和 mainCRTStartup 之一。但它们没有在 Windows.h 中定义，它们是 CRT 的一部分。`<VS installation folder>`你可以在\VC\crt\src\crtexe.c中看到他们的代码。它们各自进行一些初始化，然后分别调用 wWinMain、WinMain、wmain 和 main 之一。

正如其他人所提到的，您可以使用 /ENTRY 开关覆盖入口点，但您仍然不能拥有自定义参数，这就是您首先要执行此操作的全部原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T19:12:12.467

链接器默认入口点名称是“main”。您可以覆盖默认值以使用您想要的任何功能开始。

[/ENTRY（入口点符号）](http://msdn.microsoft.com/en-us/library/f9t8842e.aspx)

# nhibernate - Nhibernate - 为特定的 ISession 或 ISessionFactory 使用日志记录

> ID：15690154
> 
> 赞同：1
> 
> 时间：2013-03-28T19:07:43.843
> 
> 标签：nhibernate

我们正在使用 NHibernate 3.2。

我希望能够记录来自特定 ISession 的 SQL 查询。那可能吗？

或者，如果这不可能，我可以将记录器设置为特定的 ISessionFactory 吗？然后我可以从这个特定的工厂创建这个 ISession。

据我所见，要设置记录器，您必须执行以下操作：

```
<appSettings>
       <add key="nhibernate-logger" value="NH3SQLLogger.LoggerFactory, NH3SQLLogger" />
</appSettings> 
```

但是，这将使所有工厂的设置全局化。

我可以做这样的事情吗：

```
 var config = new Configuration();
        config.Configure();
        config.SetProperty("nhibernate-logger",
                       "NH3SQLLogger.LoggerFactory, NH3SQLLogger");
        _sessionFactory = config.BuildSessionFactory(); 
```

那行得通吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T00:37:10.997

不，您只能全局指定记录器。做你想做的事情会相当复杂。

您需要：

1.  编写自己的 ILoggerFactory 实现
2.  从 NHibernate.SQL 捕获日志数据以捕获所有 SQL
3.  从 NHibernate.Impl.SessionImpl 捕获日志数据以捕获生成 SQL 的 ISession 和 ISessionFactory。
4.  对逻辑进行编码以忽略除您命名的 ISessionFactory 生成的 SQL 之外的所有 SQL。

这里有一些代码可以帮助您入门：

```
public class LoggerFactory : ILoggerFactory
{
    #region Implementation of ILoggerFactory

    /// <summary>
    /// Returns the logger for a given key name
    /// </summary>
    /// <param name="keyName">Key or class name</param>
    /// <returns>Logger</returns>
    public IInternalLogger LoggerFor( string keyName )
    {
        if ( string.IsNullOrWhiteSpace( keyName ) )
            return new NoLoggingInternalLogger();

        switch ( keyName )
        {
            case "NHibernate.SQL":
                return new SqlLogger(); // Create this class to capture the SQL
            case "NHibernate.Impl.SessionImpl":
                return new SessionLogger(); // Create this class to capture ISession-related stuff
            default:
                return new NoLoggingInternalLogger();
        }
    }

    /// <summary>
    /// Returns the logger for a given type
    /// </summary>
    /// <param name="type">Class name</param>
    /// <returns>Logger</returns>
    public IInternalLogger LoggerFor( Type type )
    {
        return LoggerFor( type.FullName );
    }

    #endregion Implementation of ILoggerFactory
} 
```

# asp.net-mvc - 存储过程和实体框架 5

> ID：15690155
> 
> 赞同：1
> 
> 时间：2013-03-28T19:07:44.873
> 
> 标签：asp.net-mvc, entity-framework, stored-procedures

我正在使用 Entity Framework 5，我首先对我正在使用的数据库进行逆向工程代码，然后我添加了一个 ADO.NET 实体数据模型，以便我可以使用存储过程作为逆向工程代码首先没有提供使用存储过程。这是访问存储过程的唯一方法吗？

此外，我意识到，在完成逆向工程代码的第一个过程之后，会创建一堆类（来自数据库的表），但是一旦我添加了 ADO.NET 实体数据模型，大多数类就会消失。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:26:29.277

DbContext.Database 属性公开了有用的方法 [http://msdn.microsoft.com/en-us/library/system.data.entity.database(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.database(v=vs.103).aspx)

```
ExecuteSqlCommand( string, object[] ) 
```

[http://msdn.microsoft.com/en-us/library/system.data.entity.database.executesqlcommand(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.database.executesqlcommand(v=vs.103).aspx)

```
SqlQuery<TEntity>( string, object[] ) 
```

[http://msdn.microsoft.com/en-us/library/gg696545(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg696545(v=vs.103).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:15:51.567

您可以遵循一种模式来使用代码优先方法创建或支持存储过程。这是一个链接，您可以使用以下链接进行操作：

[http://www.codeproject.com/Articles/179481/Code-First-Stored-Procedures](http://www.codeproject.com/Articles/179481/Code-First-Stored-Procedures)

简而言之，您需要首先对模型执行相同的操作，创建一个支持输入的类和一个支持结果集的类。

关于数据实体模型和缺失的类。您需要考虑在项目中只能采用一种方法：代码优先/（模型优先/数据库优先），因此这可能是您没有看到这些类的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:11:06.663

您可以使用 Context.Database.SqlQuery 来运行 SP。

# mysql - 排行榜sql查询

> ID：15690156
> 
> 赞同：0
> 
> 时间：2013-03-28T19:07:52.453
> 
> 标签：mysql, phpmyadmin

我正在为我们的小组项目实施排行榜。

这是我的查询，用于计算表中用户 ID 2 的状态数。

```
$query = "SELECT COUNT(content) FROM status WHERE userid=2 "; 
```

现在，我如何查询状态数最多的用户 ID？

示例表

```
||  content  ||  userid  ||
||     x     ||     1    ||
||    xx     ||     1    ||
||     y     ||     2    ||
||    yy     ||     2    ||
||   yyy     ||     2    ||
||     z     ||     3    || 
```

结果

```
1st = 2 with 3 status
2nd = 1 with 2 status
3rd = 3 with 1 status 
```

我将如何限制结果？如果我只需要前 5 名怎么办？

关于这个问题

我正在考虑在用户表中添加另一列（number_of_status）而不是多个查询......哪个更好？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:11:30.140

应该能够做到这一点`GROUP BY`：

```
SELECT userid, COUNT(*) AS status_count
  FROM status
  GROUP BY userid
  ORDER BY status_count DESC
  LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:12:08.847

您可以使用 GROUP BY 查询和[LIMIT](https://dev.mysql.com/doc/refman/5.5/en/select.html)来实现这一点。

```
SELECT userid, COUNT(content) as statuses
FROM status
GROUP BY userid
ORDER BY statuses DESC
LIMIT 5 
```

# ms-access - 在 Access 2010 中查看时，Access 2007 表单中的幻影框

> ID：15690158
> 
> 赞同：1
> 
> 时间：2013-03-28T19:08:14.203
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我有一个 Access db（在 Access 2007 中开发）设置为在选项卡式视图中显示窗口。它以一个简单的表单打开，向用户显示各种选项。自从我成功后，我们升级到了 Access 2010。

由于此表单是为导航到其他表单（没有基础数据集）而制作的，因此它只有在表单标题中具有打开其他表单的按钮。以下是其中一个按钮的示例代码：

```
Private Sub Cmd_Lookup_Click()
    DoCmd.OpenForm "Frm7a_Lookup"
End Sub 
```

但是，当单击这些按钮时，在加载新表单时，会在表单的左上角出现一个虚线矩形（长和宽约为 1-2 英寸）。我不知道这个“幻影盒子”是从哪里来的。表单的该区域中没有对象，并且表单中的所有其他对象都是可见的并被说明。所以，我没有什么可以删除的。

它在视觉上没有吸引力，不应该存在。如何让这个幻影盒消失？我必须从头开始重建表格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-08T13:04:59.137

当以前版本的按钮（可能带有图片）出现在表单上时，幻影框似乎出现了。

尝试删除按钮并重新添加它们。

# coronasdk - 如何在 Corona sdk 中获取状态栏高度？

> ID：15690159
> 
> 赞同：1
> 
> 时间：2013-03-28T19:08:15.770
> 
> 标签：coronasdk

如果它被禁用，我怎么知道它的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:55:26.790

您可以使用 - 获取状态栏高度 -

本地 statusBarHeight = display.statusBarHeight

“statusBarHeight”将存储它的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:43:51.133

**更新：新方法...**

```
display.topStatusBarContentHeight 
```

此[方法](http://docs.coronalabs.com/api/library/display/topStatusBarContentHeight.html)还将以*“内容像素”*返回状态栏的值，并将用于替换旧的且现已弃用的方法*“statusBarHeight”* ——关键区别在于它现在支持 Android。

**现在已弃用...**

```
display.statusBarHeight 
```

此[方法](http://docs.coronalabs.com/api/library/display/statusBarHeight.html)将允许您以*“内容像素”*读取状态栏高度的值，尽管它是 Android 设备上的“iOS 设备”独有的，但`0`无论状态栏的高度如何，它都会返回不正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T10:08:13.230

**状态栏高度 = display.actualContentHeight - display.contentHeight**

[![在此处输入图像描述](../Images/2d14c3208f3912610652cbb505f0f547.png)](https://i.stack.imgur.com/nnGfA.png)

# java - 自动填充系列组合框 - Java

> ID：15690161
> 
> 赞同：0
> 
> 时间：2013-03-28T19:08:22.173
> 
> 标签：java, date, jcombobox, autofill

我正在编写一个简单的程序；这个程序的一部分是一系列组合框，我在其中输入了月份（alpha）、天（数字）和年（数字）的字符串。我想以某种方式让 Java 以月、日和年的形式提取日期，然后根据系统时钟用正确的日期自动填充这些组合框。

这是我的一些代码：

```
public static final String[] MONTHS = {"January", "February", "March", "April", "May", "June",
                                       "July", "August", "September", "October", "November",
                                       "December"};
public static final String[] DAYS = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", 
                                 "12", "13", "14", "15", "16", "17", "18", "19", "20", 
                                 "21", "22", "23", "24", "25", "26", "27", "28", "29", 
                                 "30", "31"};
public static final String[] YEARS = {"2015", "2014", "2013", "2012", "2011", "2010"};

Note to FORUMS: THIS ISN'T ALL THE CODE. I'VE JUST PROVIDED INFORMATION NECESSARY FOR THE QUESTION.

JLabel start = new JLabel("Start Date:");
if (shouldWeightX) {
c.weightx = .5;
}
c.fill = GridBagConstraints.HORIZONTAL;
c.gridx = 0;
c.gridy = 1;
c.gridwidth = 1;
pane.add(start, c);

JComboBox MonthLong = new JComboBox();
if (shouldWeightX) {
    c.weightx = 0;
    }
c.fill = GridBagConstraints.HORIZONTAL;
c.gridx = 1;
c.gridy = 1;
c.gridwidth = 1;
for(int i=0; i<MONTHS.length;i++) {
        MonthLong.addItem(MONTHS[i]);
    }
pane.add(MonthLong, c);

JComboBox DayLong = new JComboBox();
if (shouldWeightX) {
    c.weightx = 1.0;
    }
c.fill = GridBagConstraints.HORIZONTAL;
c.gridx = 2;
c.gridy = 1;
c.gridwidth = 1;
for(int i=0; i<DAYS.length;i++) {
    DayLong.addItem(DAYS[i]);
}
pane.add(DayLong, c);

JComboBox YearLong = new JComboBox();
if (shouldWeightX) {
    c.weightx = 1.0;
    }
c.fill = GridBagConstraints.HORIZONTAL;
c.gridx = 3;
c.gridy = 1;
c.gridwidth = 1;
for(int i=0; i<YEARS.length;i++) {
    YearLong.addItem(YEARS[i]);
}
YearLong.setSelectedItem("2013");
pane.add(YearLong, c); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:31:40.683

您应该使用**java.util.Calendar**类获取当前时间部分。

```
Calendar now = Calendar.getInstance();
// months start with 0 
System.out.println("Year is: " + now.get(Calendar.YEAR));   
System.out.println("Month is: " + (now.get(Calendar.MONTH) + 1));
System.out.println("Date is: " + now.get(Calendar.DATE)); 
```

然后您可以在初始化步骤中在您的组合框上设置选择索引。

还要记住，您不必使用 for 循环将这些字符串添加到组合框。试试看。

```
JComboBox<String> MonthLong = new JComboBox<String>(MONTHS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:35:48.823

我没有测试这段代码。

```
 Calendar now = Calendar.getInstance();
    int month = now.get(Calendar.MONTH);
    int day = now.get(Calendar.DAY_OF_MONTH);
    int year = now.get(Calendar.YEAR);

    MonthLong.setSelectedIndex(month);
    DayLong.setSelectedItem(Integer.toString(day));
    YearLong.setSelectedItem(Integer.toString(year)); 
```

在 Java 中，变量通常以小写字母开头。

# c# - Telerik Test Studio - Web Test New Tab

> ID：15690164
> 
> 赞同：1
> 
> 时间：2013-03-28T19:08:25.620
> 
> 标签：c#, sharepoint, sharepoint-2010, telerik, telerik-test-studio

I'm working with Telerik Test Studio for my c# Silverlight application that runs on a SharePoint server. The current issue I'm running into is that a recorded test doesn't continue executing if I hit a button that opens up a new tab where I'd like the test to continue. The context for the steps stays in the tab that opened the new one.

I'm able to record steps for the new tab by simply selecting it from the Record drop down, but when the test is run, it doesn't recognize and attach to the new tab after it's opened by the previous step.

Anyone know how to get Telerk Test Studio to run test steps in a tab other than the one it was started in?

I do not have the option to simply redirect from the original page.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:52:26.530

The problem you are running into is that Test Studio does not support tabbed browsing. [As documented here](http://www.telerik.com/automated-testing-tools/support/documentation/user-guide/configure-your-browser/internet-explorer.aspx) (go to the "Pop-ups Open in a New Window" section) you must disable tabbed browsing, force popups to open in a new browser window instead. Then your test will work as intended.

Cody
Test Studio Senior Support Officer

# c# - C# ClickOnce 安装文件夹 - windows 如何生成文件夹名称

> ID：15690165
> 
> 赞同：3
> 
> 时间：2013-03-28T19:08:33.500
> 
> 标签：c#, windows, clickonce, directory

我想知道如何 Windows `generate folder`，将在哪里`ClickOnce application`安装。

在 Startmenu 中是文件的“快捷方式”，放在一些“startrek”文件夹中，例如：

> C:\Users\USERNAME\AppData\Local\Apps\2.0\GT??4KXX.PRJ\EGV???1G.??C\prin..tion_7???5a2?????74b6_0000.0002_1dae?? ??89111c35

这些文件夹名称是什么意思？

* * *

例如：

例如，如果我将有一些`settings.txt`文件，我希望该用户可以更改应用程序的某些参数。有没有办法知道，它将安装在哪里以及文件在哪里？（用户将在其中找到此 settings.txt 文件）。

我知道我可以在 C:\ 中创建文件，并且在启动应用程序后，我将在“强”路径中修改文件。但我不太喜欢 C:\ 中的任何文件、文件夹，我更喜欢将设置文件放在与应用程序相同的文件夹中。但是使用 ClickOnce 安装真的很难 - 不可能 - 找到该文件。

似乎“startrek”就像项目的哈希一样。

* * *

所以我想知道该文件夹是什么意思，以及它是否是项目的一些哈希值或那是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:30:03.317

要查找包含可执行文件的文件夹，可以使用[Assembly.Location](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.location.aspx)属性。

例如：

```
string exeFolder = System.Reflection.Assembly.GetExecutingAssembly().Location; 
```

但是，如果您想存储 ClickOnce 应用程序的设置，则不应通过将文件写入 .exe 文件夹来实现。

相反，您应该使用[Microsoft 的应用程序设置支持](http://msdn.microsoft.com/en-GB/library/ms228995.aspx)。以任何其他方式来做都会有很多额外的麻烦，而且微软的支持非常好。通读文档确实需要半个小时，但恕我直言，这绝对是最好的选择。

（我假设您只需要将设置存储在本地 PC 上供同一用户以后使用。如果您希望设置跟随用户（即漫游设置），则不能使用 Microsoft 支持.)

如果您有更复杂的设置要存储在直接创建的文件中，则应考虑使用 JRoughan 的答案提到的隔离存储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T19:14:18.007

在 ClickOnce 应用程序中，您可以使用以下方式找到存储文件的默认目录

```
ApplicationDeployment.CurrentDeployment.DataDirectory 
```

或者，您可以使用[隔离存储](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx)并选择是要按应用程序还是按用户保存。

我认为不可能从应用程序本身外部确定这些文件夹。如果您需要一个已知位置，则必须对其进行硬编码。

**更新**

我也不相信可以推断出应用程序的安装目录。即使可能，使用也是不明智的，因为应用程序的更新不会位于同一位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T00:43:36.313

如果您有用户正在通过您的程序修改的数据，如果您不将其保留在 ClickOnce 程序目录中，您会更开心。当有更新时，您可能会完全搞砸。查看[这篇文章](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/)，了解如何处理您的数据以确保其安全并能够找到它。它谈到将其放入 LocalApplicationData，但如果您希望您的用户能够找到并编辑它，只需将其放入 MyDocuments/yourappname/settings 或类似的东西。

我不会使用独立存储；据报道，这和 ClickOnce 存在问题。

# java - 使用 JSF primefaces 和 Google App Engine Datastore 的最佳 CRUD 实现是什么

> ID：15690167
> 
> 赞同：1
> 
> 时间：2013-03-28T19:08:38.073
> 
> 标签：java, google-app-engine, jpa, jsf-2, primefaces

我曾尝试创建一个 CRUD 应用程序 JSF primefaces、GAE 和 JPA。我也尝试过使用标准 GQL。但我仍然没有想出最好的方法去解决它。特别是在对 primefaces dataTable 上显示的记录进行编辑和删除时。

使用@ViewScope，我得到一个异常，指出 Google Data Store 类未序列化。

请问，一起使用这些技术的最佳方法是什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:40:35.243

您是否检查过您的 JSF 实现是否与 Google App Engine 兼容？

[https://code.google.com/p/googleappengine/wiki/WillItPlayInJava](https://code.google.com/p/googleappengine/wiki/WillItPlayInJava)

> JSF 1.1 似乎开箱即用。如果将 web.xml 文件的 com.sun.faces.enableMultiThreadedStartup 上下文参数设置为 false，JSF 1.2 和 JSF 2.0 也应该可以工作。将此参数设置为 false（默认设置为 true）将阻止生成其他线程。有关在 App Engine 中运行 JSF 2.0 的更多信息，请参阅此站点。

# java - 服务器停止时从类路径读取文件

> ID：15690170
> 
> 赞同：1
> 
> 时间：2013-03-28T19:08:41.463
> 
> 标签：java, classloader

我正在从 Classpath 中读取 hiberante.cfg.xml。当服务器启动并运行时，它工作正常。但是如果我尝试从独立类访问它会失败。
我了解我可以将文件访问代码更改为`getClass().getClassLoader().getResources()`. 作为一个 connectionFactory 类，我想使用在服务器启动或停止时可以工作的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:54:56.280

您是否尝试过编写 Junit 并设置应用程序上下文。你得到什么错误“找不到资源”？

当您使用**.getClass().getClassLoader().getResource(fileName)**时，它认为文件名的位置位于根目录

# java - 在Java中替换IMG标签中的src属性

> ID：15690171
> 
> 赞同：0
> 
> 时间：2013-03-28T19:08:42.337
> 
> 标签：java, html, html-parser

我有一个 HTML 文档，我需要在其中更新 IMG 标记的 text 和 src 属性。我在 Java 中工作。我想替换 H​​TML 中的以下字符串：DataName、DataText 和 DataIcon。

```
<body>

<h1 align="center">DataName</h1>

<div class="tabber">

     <div class="tabbertab">
      <h2>Info</h2>
      <p>DataText</p>
     </div>

     <div class="tabbertab">
      <h2>Pictures</h2>
        <div id="album">
            <ul class="gallery">
                <li><a href="#nogo" tabindex="1">1<img src=DataIcon alt="landscape image 1" title="landscape image 1" /></a></li>
                <li><a href="#nogo" tabindex="1">2<img src="C:\thesis\100GreatP\eclipse_ws\test\data\pictures\1\pyramid2.jpg" alt="landscape image 2" title="landscape image 2" /></a></li>
            </ul>
        </div>   
     </div>

     <div class="tabbertab">
      <h2>Video</h2>

     </div>

</div> 
```

虽然我已成功替换字符串 DataName 和 DataText，但我没有成功将 DataIcon 替换为存储在数据库中作为字符串的 imageURL。检查调试表明它只是无法搜索 DataIcon 字符串。我正在使用 HTMLparser，并且我编写了以下类来应用该问题：

```
public class MyNodeVisitor extends NodeVisitor {
        String name;
        String text;
        String icon;

        public MyNodeVisitor() {

        }

        public MyNodeVisitor(String IconPath, String Name, String Text){
            this.name = Name;
            this.text = Text;
            this.icon = IconPath;
        }

        public void visitStringNode (Text string)
        {
            if (string.getText().equals("DataName")) {
                string.setText(name);
            }

            else if(string.getText().equals("DataIcon")){
                     string.setText(icon);

            }
            else if (string.getText().equals("DataText")){
                  string.setText(text);
            }
        }
    } 
```

该类已以这种方式应用于我的应用程序代码

```
 NodeList nl = new NodeList();
        String htmlString = null;
        InputStream contentStream = null;
        String textString = null;       
        String resultStr = getDatabaseAttribute(name,"DESCRIPTION");
        String resultStr2 = getDatabaseAttribute(name,"NAME");
        String resultStr3 = getDatabaseAttribute(name,"ICON_path");

        try
        {
            // Read the URL content into a String using the default encoding (UTF-8).
        contentStream = WWIO.openFileOrResourceStream(BROWSER_BALLOON, this.getClass());
            htmlString = WWIO.readStreamToString(contentStream, null);

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            WWIO.closeStream(contentStream, resultStr);
        }

        try {
            Parser parser = new Parser(htmlString);
            nl = parser.parse(null);

            nl.visitAllNodesWith(new MyNodeVisitor(resultStr3, resultStr2,resultStr));
            nl.toString();

        } catch (ParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String output = nl.toHtml();

        return output; 
```

有谁能够帮助我？整个问题是它无法在 IMG 标签中搜索 DataIcon 字符串。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:20:04.717

您的*img*标签不是*StringNode*。您需要覆盖*visitTag(Tag tag)*方法并处理*Tag*对象。

类似的东西（未编译）

```
public void visitTag(Tag tag) {
    if ("img".equals(tag.getTagName())) {
        if ("DataIcon".equals(tag.getAttribute("src"))) {
            tag.setAttribute("src", icon);
        }
    }        
} 
```

# sql-server-native-client - SQL Server 的 OLE DB 提供程序有效，但 SQL Native Client 无效

> ID：15690174
> 
> 赞同：0
> 
> 时间：2013-03-28T19:08:49.137
> 
> 标签：sql-server-native-client

* * *

我的想法已经用完了，所以检查是否有人可以阐明。

*   2层客户端-服务器应用程序
*   SQL 服务器 2005
*   工作站：Windows XP
*   客户端-服务器应用程序 1 使用 SQL OLE DB 提供程序。（提供者=SQLOLEDB.1）
*   客户端-服务器应用程序 2 使用 SQL Native Client。(System.Data.SqlClient.SqlConnection)

不知何故，应用程序 1 运行良好，但应用程序 2 需要将连接超时设置为 30 秒才能使其正常工作。

使用我从 JohnnyCoder 的[Database Connectivity Test with UDL File](http://johnnycoder.com/blog/2010/06/12/database-connectivity-test-with-udl-file/)中学到的技巧，我发现问题出在驱动程序的某个地方。当我尝试 Microsoft OLE DB Provider for SQL Server 时，它会立即连接。**当我尝试 SQL Native Client 时，它不需要很长时间。**即使我将连接超时设置为 60，**它也会失败。**

这两个应用程序都可以在其他安装上运行良好，但在一个特定站点上却不行。所以它必须与一些环境设置有关，例如安全、防火墙等。

我尝试在工作站上安装新的 SQL Server 2005 Native Client。没运气。

所以我的问题是：

1.  当客户端实际上无法连接时，为什么应用程序 2 会使其工作？当 SQL Native Client 超时发生时，是否有使用 OLE DB 的内部逻辑？
2.  你还要看什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:24:54.010

答：他们的网络防火墙阻止了 TCP/IP 数据包。结果，SQL Native Client 在 20 秒后使用 TCP/IP 超时，然后尝试使用命名管道使其工作。

# php - 获取特定 Facebook 页面的所有管理员

> ID：15690178
> 
> 赞同：0
> 
> 时间：2013-03-28T19:09:07.070
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

任何人都知道，如果有可能获得用户管理的页面的所有管理员。所以我可以获得对同一 Facebook 页面拥有管理员权限的所有人员的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:53:31.533

不，您无法查询页面并找到所有管理员，但否则有可能，您有一个用户并获取他是管理员的所有页面。

# java - 在 Java 中不使用 Collections 按字母顺序对 LinkedList 进行排序

> ID：15690180
> 
> 赞同：1
> 
> 时间：2013-03-28T19:09:14.293
> 
> 标签：java, linked-list, singly-linked-list

我正在尝试编写代码，以从文件中按字母顺序创建名称的链接列表。

姓名必须按姓氏排序，然后是名字。第二层排序是我遇到麻烦的地方。

到目前为止，我已经包含了我的代码，现在我只是想重写`sortList`，以便它通过链表并在比较后添加一个节点。我写了一个`sortList`以前使用的集合，它运行得很好，现在我试图在没有集合的情况下做到这一点。

我怀疑这比我做的要容易，而且我现在离代码太近了。下面是`sortList`and`compareTo`方法...项目构造函数只包含`firstName`and `lastName`。

```
public int compareTo(linkedListProject arg0) {
    if (this.lastName.equals(arg0.getLastName()))
        return this.firstName.compareTo(arg0.getFirstName());
    else
        return this.lastName.compareTo(arg0.getLastName());
} 
```

编辑（更改 sortList 以更准确地利用 compareTo）

```
public static void sortList(linkedListProject a)
{
    Node temp = new Node(a);
    if (head == null)
            {head = temp;}
    else {
        Node cur = head;
        while (cur.next == null && cur.data.compareTo(temp) > 0)
        { cur = cur.next;}
    if (cur.next.data.compareTo(temp) <= 0)
        temp = cur; }
} 
```

再次编辑......基本上我意识到我必须检查节点并在我去的时候插入节点，所以这是我的完整代码。sortList 已重命名为 addToList。我仍然收到空指针异常

```
import java.util.*;
import java.io.*;
/**
 * @author Michael Dangelo
 * linkedListProject class, reads from file a provided classRoster then sorts them alphebetically by last name into the linkedList
 *
 */
public class linkedListProject {
private String firstName;
private String lastName;
private static LinkedList<linkedListProject> classRoster  = new LinkedList<linkedListProject>();

private static class Node
{
    linkedListProject data;
    private Node next = null;

    private Node(linkedListProject data, Node next)
    {
        this.data = data;
        this.next = next;
    }

    private Node(linkedListProject data)
    {
        this.data = data;
    }

    public linkedListProject getData()
    {
        return data;

    }

}

private static Node head;

/**
 * Default Constructor
 */
public linkedListProject()
{
    head = null;
}

/**
 * Constructor
 * @param firstName First name of student
 * @param lastName  Last Name of Student
 */
public linkedListProject(String firstName, String lastName)
{
    this.firstName = firstName;
    this.lastName = lastName;
}
public void addToStart(linkedListProject data)
{
    head = new Node(data, head);
}
/**
 * Getter for firstName
 * @return firstName
 */
public String getFirstName() 
{
    return firstName;
}

/**
 * Setter for firstName
 * @param firstName
 */
public void setFirstName(String firstName) 
{
    this.firstName = firstName;
}
/**
 * Getter for lastName
 * @return lastName
 */
public String getLastName() 
{
    return lastName;
}

/**
 * Setter for Last Name
 * @param lastName
 */
public void setLastName(String lastName) 
{
    this.lastName = lastName;
}

/**
 * toString method used for testing
 */

@Override
public String toString() 
{
    return "linkedListProject [firstName=" + firstName + ", lastName="
            + lastName + "]";
}

/**
 * compareTo method used in sorting
 */

/**
 * Prints out list to console
 */
public void printList() 
{
    int count = 0;
    System.out.println("First Name:     " + "Last Name: ");
    while (count < classRoster.size())
    {
        linkedListProject a = classRoster.get(count);
        System.out.println(a.getFirstName() + "     \t" + a.getLastName());
        count++;
    }

}
/**
 * 
 * @param a linked list ran in 
 */
public static void addToList(linkedListProject a)
{
    Node temp = head;
    Node nextNode = null;
    while (temp != null && nextNode.data.compareTo(a) >=0)
    {
        nextNode = temp;
        temp = temp.next;
    }
    if (temp == null)
    {
        Node cur2 = new Node(a);
        cur2.next = head;
        head = cur2;    
        classRoster.add(cur2.getData());
    }
    else {

        Node cur2 = new Node(a);
        cur2.next = temp;
        if (nextNode == null) {
            nextNode.next = cur2;
            classRoster.add(cur2.getData());
        }
    }
}
/**
 * Reads in students names into object then adds and sorts list based on last name & firstName
 * @param inputFileName The File Name
 * @throws java.io.IOException
 */
public void read(String inputFileName) throws java.io.IOException
{
Scanner infile = new Scanner(new FileReader(inputFileName));
while(infile.hasNext())
{
String firstName = infile.next();
String lastName = infile.next();

linkedListProject intoList = new linkedListProject(firstName, lastName);
linkedListProject.addToList(intoList);

}
infile.close();
}

/**
 * Driver
 * @param args
 * @throws IOException
 */
public static void main(String[] args) throws IOException 
{
    linkedListProject test = new linkedListProject();
    test.read("179ClassList.txt");
    test.printList();
}

public int compareTo(linkedListProject arg0)
{
    if (this.lastName.equals(arg0.getLastName()))
        return this.firstName.compareTo(arg0.getFirstName());
    else
        return this.lastName.compareTo(arg0.getLastName());
}

} 
```

# java - 获取大屏幕截图中小屏幕截图位置的坐标

> ID：15690181
> 
> 赞同：1
> 
> 时间：2013-03-28T19:09:15.187
> 
> 标签：java, location, screenshot, image, coordinate

例如，我正在截取一小部分桌面的屏幕截图（假设截屏时无法保存坐标）。接下来，拍摄全屏屏幕截图。如何在大屏幕截图中找到小屏幕截图的位置？

这在Java中甚至可能吗？

```
public void RobotScreenCoordinateFinder()
{
    Robot robot = new Robot();

    robot.createScreenCapture(screenRect);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:04:21.653

我的想法是使用这个：

```
BufferedImage screen=robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));c
BufferedImage capture=robot.createScreenCapture(screenRect);//assuming that screenRect is your capture
boolean screenMatches=false;
int screenX=0;
int screenY=0;
for(int i=0;i<screen.getWidth()-capture.getWidth();i++)
{
    for(int j=0;j<screen.getHeight()-capture.getHeight();j++)
    {
        boolean matches=true;
        for(int x=0;x<capture.getWidth();x++)
        {
            for(int y=0;y<capture.getHeight();y++)
            {
                if(screen.getRGB(i+x,j+y)!=capture.getRGB(x,y))
                {
                    matches=false;
                    break;
                }
            }
            if(!matches)break;
         }
         if(matches)
         {
             screenMatches=true;
             screenX=i;
             screenY=j;
             break;
         }
    }
    if(screenMatches)break;
}
//now if the capture is in the screen, screenMatches is true and the coordinate of the left up corner is stored in screenX and screenY
if(screenMatches)
{
    System.out.println("Found match with coordinates "+screenX+","+screenY);
} 
```

# html - CSS 左侧和右侧

> ID：15690184
> 
> 赞同：1
> 
> 时间：2013-03-28T19:09:21.750
> 
> 标签：html, css, twitter-bootstrap

我现在正在学习 css，所以你可能知道什么样的问题让我大吃一惊……哈哈哈

好的，我正在尝试将我的网络分成两个 div，如下所示：

![在此处输入图像描述](../Images/b13fe0a7dbf26563fddb509d04e0a447.png)

目的是让右侧意识到他的左侧有东西。

左边：

```
.left-side {
  background: url('../img/mesh.png') #333;
  position: relative; 
  top: 0px;
  margin-left:0px;
  width: 100px;
  height: 100%;
} 
```

右边：问题来了

```
.right-side {
  position: relative;
  margin-left: 100px;
  top: 0px;
  float: left; /* Trying to detect something at my left */
  height: 100%;
  width: 100%;
} 
```

两者都有相对位置，因为我读过它们应该，也许我错了...

只是为了给您一些上下文，左侧是导航栏，右侧是所有网格和主要内容。

我正在使用引导框架在右侧创建网格，但问题是所有 div 都没有将其父级作为参考。

```
<html>
<head>
   .....
</head>
<body>
   <div class="left-side">
      <!-- Navbar -->
   </div>
   <div class ="right-side">
      <div class ="container-fluid">
         <!-- etc -->
      </div>
   </div>
</body>
</html> 
```

感谢您阅读本文。我会尝试自己解决这个问题，会收到一些帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:13:17.313

您应该使用 Bootstrap 为您提供的东西，即跨度类。这样的事情呢？

```
<html>
<head>
   .....
</head>
<body>
   <div class="row-fluid">
       <div class="span3">
          <!-- left side -->
       </div>
       <div class="span9">
          <!-- right side -->
       </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:14:15.947

您可能不需要相对位置。通常最好的用途是当您需要将某些东西绝对定位在其中时 - 即相对于您称为相对的框。

要像这样使用浮点数，您需要设置宽度，并且它们不能设置为 100%。这样做意味着他们占用的空间与容器一样多，在这种情况下，容器看起来就像整个屏幕。这意味着右边的 div 将包裹在左边的下面，因为它不能放在它旁边。首先将左侧设置为宽度 100 像素，将右侧设置为宽度 500 像素，或者类似的东西，然后从那里开始使用它。

并使 left float:left 正如所指出的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:14:00.103

添加`float: left;`到左侧。因此，t 元素向左移动。

# image - 在 wxpython 中将图像放在其他图像之上

> ID：15690185
> 
> 赞同：0
> 
> 时间：2013-03-28T19:09:35.107
> 
> 标签：image, wxpython, redraw

我知道这个问题非常基本，很抱歉发布它，但我确实花了最后一个小时在谷歌上搜索，但我仍然没有找到答案。

我使用 pygame 编写了一个二十一点游戏，并希望将其转换为 wxpython，主要是作为学习 wxpython 的一种方式。在 pygame 中，图形很简单，我有一个显示的基本图像（基本上只是表格），然后随着动作的展开，我可以在其上显示其他图像，例如卡片。每次玩家击球时，我都会在不同的位置抽一张新牌。当这手牌结束并且我想进入下一手牌时，我只是再次显示基本图像，它覆盖了所有内容和中提琴！它真的很简单，我只需要使用 blit() 和 pygame.display.update()。

我似乎无论如何都找不到在 wxpython 中执行此操作。我找到的所有示例都是用于在新小部件中绘制项目，或在图像上绘制矢量图形，或使用图像打开新框架等。

非常感谢任何帮助，非常感谢。

——丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:21:23.367

wxPython 演示中的 AlphaDrawing 示例展示了如何重叠多个绘图。这使用 wx.GraphicContext / wx.GCDC。如果您查看[文档](http://wxpython.org/Phoenix/docs/html/GraphicsContext.html)，您会注意到它具有可能适用于您想要执行的操作的 CreateBitmapFromImage 和 CreateBitmap 方法。另请参阅 DragImage 演示和以下链接以获取相关信息：

*   [wx python纸牌游戏](https://stackoverflow.com/questions/1622884/wx-python-card-game)
*   [http://rummy-py.sourceforge.net/](http://rummy-py.sourceforge.net/)（看看在 wx 中做的原版）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:16:38.857

我发现这篇阅读评论的帖子很好地向我展示了我想要的东西。

[在wxpython中删除图像？](https://stackoverflow.com/questions/8071613/delete-image-in-wxpython)

# jquery - JQuery 用行跨度隐藏表列

> ID：15690187
> 
> 赞同：1
> 
> 时间：2013-03-28T19:09:38.570
> 
> 标签：jquery, html-table, hide

我想隐藏一个表格列，但是使用 jQuery`.hide()`或`.toggle()`在具有 rowspan 属性的列上似乎将该属性“传递”到前一行并弄乱了表格。

```
$('#toggle').click(function(){
    $('#tbl td:last-child').toggle();
}); 
```

看看这个简单的例子：http: [//jsfiddle.net/SEwVP/](http://jsfiddle.net/SEwVP/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:12:38.793

最后一个`td`可能是不同的列，所以这是正常的。

在这种情况下，只有最后一列包含行跨度，您可以使用子索引：

```
$('#toggle').click(function(){
    $('#tbl td:nth-child(5)').toggle();
}); 
```

如果您想要一个有效的解决方案，如果您在任何列中都有行跨度，那么您可能必须为每个单元格预先计算其实际列索引。这是可行的，但使用更简单的解决方案可能更合理，比如根据数据创建一个类。因此，这将取决于您的表格的语义和生产过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:17:30.857

感谢@dystroy 的投入。

根据他的回答，这是一个简单的解决方案：

```
var lastChilds = $('#tbl td:last-child');
lastChilds.each(function(i){
    var rowSpan = $(this).attr('rowspan');
    if(rowSpan !== undefined){
      lastChilds.splice(i+1, rowSpan-1);
    }
    $(this).hide();
  }); 
```

# jquery - jQuery ajax 返回整个页面内容而不是结果

> ID：15690198
> 
> 赞同：1
> 
> 时间：2013-03-28T19:10:07.593
> 
> 标签：jquery, asp.net, ajax

我必须向使用 Synapse 的内容管理系统的 VS 2008 (.Net 3.5) 网站添加功能。在挣扎了几个小时后，我从头开始，并在一个全新的 Web 项目中进行了以下工作。

这是客户端脚本和html：

```
<script type="text/javascript">
function ClickedIt() {
    $.ajax({
        type: "POST",
        url: "Default.aspx/FromClient",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            alert(msg.d);
        }
    });
} // ClickedIt
function ClickedItDeeper() {
    $.ajax({
        type: "POST",
        url: "/Deeper/ActionsController.aspx/FromClient",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            alert(msg.d);
        }
    });
} // ClickedItDeeper
</script>

<asp:Button ID="btnClickMe" runat="server" Text="Click Me - Server" />&nbsp;&nbsp;
<asp:Button ID="btnViaClient" runat="server" Text="Click Me - Client" OnClientClick="ClickedIt(); return false;" />&nbsp;&nbsp;
<asp:Button ID="btnDeeper" runat="server" Text="Click Me - Deeper" OnClientClick="ClickedItDeeper(); return false;" /> 
```

更好的是，我必须用 VB 编写它，所以这是我调用的两个不同的测试。一个是我正在运行的实际页面（Default.aspx），另一个是我喜欢将方法保持在一起的方式（ActionsController.aspx）：

```
Imports System.Web.Services

  Partial Public Class _Default
  Inherits System.Web.UI.Page

Protected Sub btnClickMe_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnClickMe.Click
    Me.lblResult.Text = "From the Server Side: " + DateTime.Now.ToString()
End Sub

<WebMethod()> _
Public Shared Function FromClient() As String
    Return "Via the Client: " + DateTime.Now.ToString()
End Function

End Class 
```

ActionsController 是：

```
Imports System.Web.Services

Partial Public Class ActionsController
Inherits System.Web.UI.Page

<WebMethod()> _
Public Shared Function FromClient() As String
    Return "Via the Deeper Client: " + DateTime.Now.ToString()
End Function

End Class 
```

在那个孤立的站点中，上述所有工作都像冠军一样。但是，当我尝试在这个 CMS 站点中做同样的事情时，我得到一个：parseerror: invalid character。在查看了许多文章之后（没有人修复它），有人提到也许 Telerik 甚至 CMS 软件正在覆盖 JSON.parse，看起来好像是这样。我强迫它不使用另一个，现在它正在使用 json2.js。当我放一个：

```
alert(text); 
```

就在 json2.js 文件中：

```
JSON.parse = function(text, reviver) { 
```

它向我显示了整个 html 页面内容，这是我用这个调用它时找不到的页面：

```
$.ajax({
type: "POST",
url: "ActionsController.aspx/FromClient",
data: "{}",
contentType: "application/json",
dataType: "json",
success: function(msg) {
    $("#lblResult").html(msg);
    alert("success");
},
error: function(xhr, textStatus, errorThrown) {
    alert("Ajax error on " + this.url +
        "\nStatus: " + textStatus +
        "\nError: " + errorThrown +
        "\nText: " + xhr.statusText +
        "\nxhrStatus: " + xhr.status
    );
}
}); 
```

给我一个 SyntaxError: JSON.parse 错误，但文本值为 OK，状态为 200。

我已将 URL 更改为没有前导 / 并在开头添加了 en-US 和没有前导斜杠都无济于事。我不确定找不到的页面是否合法。最初，ActionsController 页面位于一个文件夹中。我已经把它移到了网站的根目录。

这是我在VS2010上做过很多次的事情。它可以在 VS2008 中运行，但我认为有什么东西妨碍了它，要么将一些东西附加到 URL，要么感谢这个 CMS。当它出错时，我确实让它传递给我 this.url，它是：/ActionsController.aspx/FromClient 这样对我有用。

这是损坏站点的实际 ActionsController 代码：

```
Imports System.Web.Services

Partial Public Class ActionsController
Inherits System.Web.UI.Page

<WebMethod()> _
 Public Shared Function FromClient() As String
    Return "Via the Deeper Client: " + DateTime.Now.ToString()
End Function

<WebMethod()> _
Public Shared Function Multiply(ByVal Input As Integer) As String
    Return "Via the Deeper Client: " + DateTime.Now.ToString()
End Function

End Class 
```

再过一个小时，这将是一整天的搜索、调整和测试，这些东西可能很简单，但隐藏在 Telerik 和突触的一层又一层“功能”之下。

请让我开心！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:58:53.493

好的，在与开发人员交谈后，我最终获得了足够的信息来解决这个问题。基本上，我必须做两件事才能让它发挥作用。一，我必须覆盖 Global.asax 文件中的 BeginRequest，然后将一些值添加到 web.config。

万一其他人遇到这样的问题，这里是完整的结果。

在 .aspx 页面上，这里是 jQuery ajax 调用：

```
function LoadAllScannedDocumentCounts() {
    var labels = $("[data-DocumentFolder]");

    $.each(labels, function(index, label) {
        var ComplaintNumber = $(this).attr("data-DocumentFolder");
        $(this).prepend("<img id='spinImage" + ComplaintNumber + "' src='/ComplaintsReports/Images/spinner.gif' />");

        $.ajax({
            url: "/Exclusions/ActionsController.aspx/GetScannedDocumentCount",
            type: "POST",
            data: "{ " +
                    "       'ComplaintNumber': '" + ComplaintNumber + "'" +
                " }",
            contentType: "application/json",
            dataType: "json",
            success: function(data) {
                $(label).text(data.d);

                if (data.d > 0)
                    $(label).addClass("badge badge-info");
                else
                    $(label).addClass("badge");
            }, // Success
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert("Error: " + errorThrown + "\nURL: " + this.url);
            } // Error
        }); // Ajax
    }); // foreach of the checked check boxes
} // LoadAllScannedDocumentCounts - Method 
```

web.config 添加：

```
<system.web.extensions>
    <scripting>
        <webServices>
            <authenticationService enabled="true" />
        </webServices>
    </scripting>
</system.web.extensions> 
```

Global.asax 文件：

导入 System.Web.SessionState

```
Public Class Global_asax
Inherits SynapseBaseSite46.Global

Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.BeginRequest
    Dim app As HttpApplication = DirectCast(sender, HttpApplication)
    Dim con As HttpContext = app.Context

    ' Skip any calls to the ActionsController
    If (Not con.Request.FilePath.ToLower().Contains("exclusions/actionscontroller.aspx")) Then
        MyBase.Application_BeginRequest(sender, e)
    End If
End Sub

End Class 
```

最后是带有 WebMethods 的“ActionsController”页面：

```
Imports System.Web.Services
Imports System.IO

Partial Public Class ActionsController
Inherits System.Web.UI.Page

<WebMethod()> _
 Public Shared Function GetScannedDocumentCount(ByVal ComplaintNumber As String) As Integer
    Dim Result As Integer = 0
    Dim SearchPath As String = ConfigurationManager.AppSettings("ScannedImagesShare") & "\"

    Try
        For Each dir As DirectoryInfo In New DirectoryInfo(SearchPath & ComplaintNumber.Replace("-", "")).GetDirectories()
            Dim files As FileInfo() = dir.GetFiles("*.pdf")
            Result += files.Count()
        Next
    Catch dex As DirectoryNotFoundException
        ' do nothing
    Catch ex As Exception

    End Try

    Return Result
 End Function

End Class 
```

# c# - 如何对某些网页应用表单认证

> ID：15690200
> 
> 赞同：0
> 
> 时间：2013-03-28T19:10:12.127
> 
> 标签：c#, asp.net, active-directory, web-config, form-authentication

请考虑这种情况：

`Active Direcotry`我有一个项目，它包含一些网页。我为我的所有网页添加了表单身份验证。例如：

```
<connectionStrings>
   <add name="ADConnectionString" connectionString="LDAP://testdomain.test.com/CN=Users,DC=testdomain,DC=test,DC=com" />
</connectionStrings>
<authorization>
     <deny users="?" />      
</authorization> 
```

现在我想从表单身份验证中排除一些页面。如何排除一些页面`web.config`？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:19:07.697

将您的页面放在单独的目录中并相应地修改 web.config。您也可以这样做

```
 <configuration>
       <location path="CreateAccount.aspx">
        <system.web>
         <authorization>
          <allow users="?"/>
         <authorization>
        </system.web>
      </location>  
   </configuration> 
```

更多讨论

[链接1](http://forums.asp.net/t/1199910.aspx/1)

[从表单身份验证中排除页面 - ASP.NET](https://stackoverflow.com/questions/2178713/excluding-pages-from-forms-auth-asp-net)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:13:56.247

一种简单的方法是在您的应用程序中为公共页面创建一个单独的文件夹。在该文件夹中，您放置要从身份验证中排除的所有页面。然后在该文件夹中放置一个 web.config，其中仅包含身份验证设置，如下所示：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
</configuration> 
```

# python - 在没有安装权限的服务器上使用 Twisted？

> ID：15690201
> 
> 赞同：1
> 
> 时间：2013-03-28T19:10:16.343
> 
> 标签：python, installation, twisted

我有一个服务器，我想用它来保持与一组设备的持久连接，这样它们就可以来回传递简单的消息。这是一项微不足道的任务，但选择服务器端平台却异常困难（尤其是因为我没有管理权限——它是专用的商业服务器）。

到目前为止，我最好的想法是用 Python 编写一个 TCP 服务器。Twisted 平台似乎适合这项任务，并且有很多好评。但是，我的服务器有 Python 2.7 但没有 Twisted，管理员一直不愿意为我安装它。

有什么方法可以将 Twisted 包上传到服务器并在我的库中引用它而不将其安装为框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:26:07.957

我不确定“将其安装为框架”是什么意思。如果您使用的是 OS X 服务器托管环境，那么您可能正在谈论带有大写 F 的框架。但是，OS X 服务器托管不是一个非常常见的环境，所以我猜不是这样。

如果您只想知道如何在您的主目录中安装 Python 库，那么一般答案是：

```
$ python setup.py install --user 
```

这是 Python 2.7 上的 Just Works™（假设包使用了 Twisted 使用的 distutils，并且您解压缩源 .tar.gz 并将工作目录更改为该 .tar.gz 内容的根目录），所以你应该在那之后完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:58:53.277

使用 virtualenv 创建您的私有 Python 库安装。

# popup - WinRT Open Popup Above App Bar Button 调用它

> ID：15690208
> 
> 赞同：1
> 
> 时间：2013-03-28T19:10:52.090
> 
> 标签：popup, position, winrt-xaml, css-position

如何将`Popup`控件放置在`BottomAppBar` `Button`调用它的上方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:15:39.527

您需要参考 BottomAppBar 来定位它。

```
popup.VerticalOffset = Window.Current.Bounds.Height - offset; 
```

`offset`是到屏幕底部的距离

你可以做同样的事情`HorizontalOffset`，`HorizontalOffset`你想要弹出的按钮的位置在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:32:26.193

使用 Callisto 的 Flyout ，简单高效的[点击这里](https://github.com/timheuer/callisto)

# java - JSF primefaces 显示对象列表而不是字符串列表

> ID：15690209
> 
> 赞同：1
> 
> 时间：2013-03-28T19:10:52.123
> 
> 标签：java, jsf, primefaces

我已经尝试通过该站点进行搜索，但也许我不太了解。请为我的案例提供建议..

我正在使用 Netbeans 7.3 + Primefaces + Hibernate。我想从我的查询中显示一个列表。

我的查询已经在......并且没有错误显示，但显示不是我想要的（我认为它返回一个对象或其他东西，不确定）。

如果我错过了什么，请纠正我。

这是我的 PtlLovBean

```
@ManagedBean(name = "ptlLovBean")
@SessionScoped

public class PtlLovBean implements Serializable {
private static final String FLIGHT = "LOV_FLIGHT";

private List lovFlight;

public List getLovFlight() {
    PtlLovDao ptlLovDao = new PtlLovDaoImpl();
    return ptlLovDao.getByKey(FLIGHT);
}    
} 
```

这是ptlLovDao

```
public interface PtlLovDao {

public List getByKey(String key);

} 
```

这是 PtlLovDaoImpl

```
public class PtlLovDaoImpl implements PtlLovDao {

@Override
public List getByKey(String key) {
    Session session = HibernateUtil.getSessionFactory().openSession();
    Query query = session.createQuery("from PtlLov where LOV_KEY = :param");
    query.setParameter("param", key);                
    return query.list();
}
} 
```

这是我的 JSF：

```
<p:selectOneMenu id="flightName" value="#{wizard.user.selectedFlightName}"> 
   <f:selectItem itemLabel="Select Flight" itemValue="" />
   <f:selectItems value="#{ptlLovBean.lovFlight}" />
</p:selectOneMenu> 
```

代码后显示：

抱歉，我无法插入图片，所以这是图片链接：http: [//i117.photobucket.com/albums/o56/po_se_for/PIC_zps88ec4983.png](http://i117.photobucket.com/albums/o56/po_se_for/PIC_zps88ec4983.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:15:03.940

您可以覆盖类中的`toString`方法`PtlLov`或定义标签中`itemValue`的`itemLabel`属性。`f:selectItems`

像这样的东西：

```
<f:selectItems value="#{ptlLovBean.lovFlight}" var="flight"
    itemValue="#{flight}" itemLabel="#{flight.description}" /> 
```

# batch-file - 如何使用批处理脚本获取注册表项的值？

> ID：15690211
> 
> 赞同：2
> 
> 时间：2013-03-28T19:11:01.117
> 
> 标签：batch-file, batch-processing

我有一个像这样的批处理脚本（我可以从[Open a file in Visual Studio at a specific line number](https://stackoverflow.com/questions/350323/open-a-file-in-visual-studio-at-a-specific-line-number)派生出来）。谁能告诉我如何传递 devenv 的注册表项，即（HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\devenv.exe），这样我就不必将路径指定为 D:\Progra.. ..它可以在任何安装了visual studio的电脑上运行。提前致谢。

`@echo off`

`cd /d D:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE`

`devenv /Command "Edit.Goto 83" "E:\examples\A.cpp"`

`@echo off`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:44:06.000

```
for /f "tokens=3*" %%x in ('reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\devenv.exe"') do set DEVENV="%%x %%y"
%DEVENV% /Command "Edit.Goto 83" "E:\examples.A.cpp" 
```

一个警告 - 如果您安装了多个版本的 VS，这将启动最近安装的版本。

更一般地说：

```
set REGKEY="HKLM\SOFTWARE\Wow6432Node\BI\Science\AB\exenamehere.exe"
set CPPFILE=C:\SomePathHere\foo.cpp

for /f "tokens=3*" %%x in ('reg query "%REGKEY%"') do set EXE="%%x %%y"
%EXE% /AnyOtherParamsHere "%CPPFILE%" 
```

您也可以像这样接受命令行参数（理想情况下也会有错误处理）。%1 是第一个参数，%2 是第二个参数，一直到 9。当然可以使用 9 个以上的参数，但这超出了这个问题的范围。

```
set REGKEY="HKLM\SOFTWARE\Wow6432Node\BI\Science\AB\exenamehere.exe"
set FILENAME=%1

for /f "tokens=3*" %%x in ('reg query "%REGKEY%"') do set EXE="%%x %%y"
%EXE% /AnyOtherParamsHere %FILENAME% 
```

如果文件的路径中有空格，则在运行此批处理文件时需要将它们引用（例如，`mybatch.cmd "C:\path with spaces\foo.cpp"`）。

另外，如果您发现它有用，请不要忘记将其标记为答案。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:39:18.287

```
@ECHO OFF
SETLOCAL 
FOR /F "tokens=2*" %%A IN (
   'REG QUERY "HKLM\SSOFTWARE\Microsoft\Windows\CurrentVersion\App Paths" /v devenv.exe'
) DO (set vs9dir=%%B)
ECHO %vs9dir% 
```

应该返回你的价值 - 理论上。我无法验证，因为我没有 VS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:46:19.397

你可以试试这个，它可能有效：

```
for /f "tokens=3*" %%i in ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\devenv.exe"^|find "<NO NAME>"') do set "key=%%j"
echo "%key%" 
```

# c++ - g++：静态链接不起作用

> ID：15690214
> 
> 赞同：2
> 
> 时间：2013-03-28T19:11:08.693
> 
> 标签：c++, linux, gcc, linker, g++

我正在尝试静态链接我的项目中的标准库。我已经尝试了来自 SO 和其他网站（[http://www.trilithium.com/johan/2005/06/static-libstdc/](http://www.trilithium.com/johan/2005/06/static-libstdc/)）上各种线程的静态链接选项的几种变体，但它们都没有产生预期的结果.

这是我当前的标志设置：

```
g++ -Wall -g -static-libgcc -static-libstdc++ -Iinclude -std=c++11 
```

我也试过：

```
g++ -Wall -g -Wl,-Bstatic -lstdc++ -std=c++11 
```

对于这些变体中的任何一个，`ldd`仍然的输出是：

```
linux-gate.so.1 => (0xb77b1000)
libstdc++.so.6 => /lib/libstdc++.so.6 (0x4e085000)
libm.so.6 => /lib/libm.so.6 (0x4daf0000)
libgcc_s.so.1 -> /lib/libgcc_s.s0.1 (0x4dd1f000)
libc.so.6 => /lib/libc.so.6 (0x4d90a000)
/lib/ld-linux.so.2 (0x4d8e7000) 
```

运行`file`还告诉我它是一个动态链接的二进制文件。我已经在多个发行版上尝试过，包括 Fedora 18、Ubuntu 12.04 和 CentOS，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:23:22.073

```
g++ -Wall -g -static-libgcc -static-libstdc++ -std=c++0x hello.cpp 
```

来自 ldd 的输出

```
linux-vdso.so.1 =>  (0x00007fffef928000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fbe12439000)
/lib64/ld-linux-x86-64.so.2 (0x00007fbe12822000) 
```

在我的 Ubuntu 12.04 下完成这项工作，我也怀疑您使用的是 Ubuntu 12.04 下支持的 gcc/g++ 版本，因为它是 g++ 4.6 而 g++ 4.6 不提供`-std=c++11`标志。

```
g++ -std=c++0x -static hello.cpp 
```

这也可以按预期将所有内容编译成一个静态对象。

我的来源`hello.cpp`

```
#include <iostream>

int main(int argc, char* argv[])
{
  [](void){std::cout << "hello" << std::endl;}();
  return(0);
} 
```

我认为你正在使用不同的编译器或你的平台不支持的编译器，记录你自己的编译器版本，这个标志工作，问题可能是你的安装或编译器中的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T16:35:42.343

我尝试将 -static-libgcc -static-libstdc++ 与其他静态库链接：protobuf、pthread、rt 并且每次遇到不同的问题。

我找到的解决方案是使用外部工具[Ermine](http://magicermine.com/index.html)并解决了我所有的问题。基于：[Statifier](http://statifier.sourceforge.net/)

# jmeter - “中间节点”吞吐量测试（使用 JMeter？）

> ID：15690215
> 
> 赞同：0
> 
> 时间：2013-03-28T19:11:10.393
> 
> 标签：jmeter, load-testing, performance-testing, qa, network-traffic

我希望这是正确的部分，而不是完全模糊。

我在一个网络设备（本质上是一个代理服务器）上工作，并且继承了一个项目，其最终目标是确定该单元可以处理的最大吞吐量，假设一侧有*x 个*客户端，另一侧有一个 Web 服务器（代表 Internet）。

该项目的前任所有者一直在使用 JMeter，但在从中获取可靠数据时遇到了严重问题。

其中大部分似乎与我们正在进行的不常见的测试方法有关——当您在线查找 JMeter 资源时，您会发现几乎所有使用它的人都在使用*端节点*（如 Web 应用程序），该端节点通常具有相对简单的用法访问模式和方法。与此同时，我们的情况是使用一个中间节点，通过该节点的流量必须代表对任意第三方网站的“真实世界”浏览。

所以我的问题如下：

1.  JMeter 是否适合此问题？是否有专门针对这种情况设计的替代工具？例如，为路由器或代理服务器设计的任何工具？

2.  在复制任意现实世界浏览时是否有任何“最佳实践”？是否有代表现实时间、SSL 流量百分比等的已知算法或测试计划？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:37:48.073

为了获得可靠、可重复的结果，您必须针对已知数量进行测试——例如，在您控制的硬件资源上运行的一组特定站点/应用程序。否则，如果您只是在“网络”上访问页面，您将不知道您看到的任何性能下降是否是由于您的网络之外的网络拥塞或这些站点的性能偏差造成的。测试必须是可重复的才能有用。

如果您是我的客户，我们将首先选择一组代表“典型”流量的网站。例如，我们可能会从 20 个最受欢迎的网站列表开始。然后，我们将从这些站点中的每一个中模拟一些浏览模式，并创建一个受控环境来提供这些站点的副本。然后我们会对此进行测试。

一旦你有了它，那么任何负载测试工具都应该足够了。我会推荐我们的 - [Load Tester](http://www.webperformance.com/load-testing/index.html)。LITE 版本是免费的，您可能会发现它比 JMeter 更易于使用。

# javascript - 如何在 Windows Confimation 弹出框上停止无所事事

> ID：15690220
> 
> 赞同：0
> 
> 时间：2013-03-28T19:11:35.510
> 
> 标签：javascript, jquery, jquery-ui

在我看来，我有这个准则。我正在做一些点击确定按钮和取消按钮的帖子。如何在单击弹出窗口关闭按钮时停止发布..这是右上角的关闭符号？这是我实现的示例代码，任何人都可以帮助我解决如何在实际关闭窗口上停止发布吗？

```
jsfiddle.net/kRqCd/20/ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T13:54:49.737

您无法检测到`confirm`框的“关闭”事件（请注意，Firefox 甚至没有放置关闭选项）。

由于您使用的是 JQuery，您可以尝试使用自定义框，例如：

[jQuery-UI 对话框](https://jqueryui.com/dialog/#modal-confirmation)

[http://myclabs.github.io/jquery.confirm/](http://myclabs.github.io/jquery.confirm/)

# python - 这是使用 str.format() 的可接受方式吗？

> ID：15690224
> 
> 赞同：2
> 
> 时间：2013-03-28T19:11:45.160
> 
> 标签：python, coding-style, formatting

我最近决定开始使用`.format()`而不是`%`（请参阅[此问题](https://stackoverflow.com/questions/5082452/python-string-formatting-vs-format/5082482)）。而不是`{0}`,`{1}`语法，我想知道以下是否可以接受：

```
import os
def get_filename(player_name):
    for ext in ('jpg', 'jpeg', 'png'):
        filename = "data/avatars/{player_name}.{ext}".format(**locals())
        if os.path.exists(filename):
            return filename
    return None 
```

我喜欢它的直截了当 - 局部变量进入字符串 - 但我想知道是否有任何理由我不应该这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:25:05.987

`locals()`将(or `globals()`) 传递给`format`(or )的主要问题`%`是，格式字符串通常可能来自不受信任的来源，并且您可能会暴露您不想要的变量。如果你只是格式化一个文字字符串，那不是问题，但如果你可能有不受信任的格式字符串，你必须非常仔细地考虑你在做什么——而且不这样做会更容易。

更小的问题是您的代码的某些读者不理解`locals`或`**`语法，并且很难弄清楚它的作用或工作原理。这没什么好争论的。事实上，你甚至可以说 Python 的许多设计决策都归结为确保这几乎不是一个好的论点——该语言足够大，可以合理地期望你的读者理解/学习你编写的任何 Python 语言。但这仍然值得思考。

然后是风格问题。每隔几个月，就会有人提出建议该语言应该更容易做到这一点，并在邮件列表上引发争论。有些人肯定认为这感觉“隐而不显”。其他人不同意。我认为这里的魔法本地人不会是 pythonic 已经很好解决了……但如果你必须明确地通过`locals()`，也许这很好，也许不是。像大多数尚未达成共识的风格论点一样，这完全取决于您。（顺便说一句，`format`API 最终产生了这样的论点，其中最初的建议是使用隐式的更像 perl 的字符串插值`locals`。）

但最终，您必须考虑要节省什么。比较一下：

```
filename = "data/avatars/{player_name}.{ext}".format(**locals()) 
```

到：

```
filename = "data/avatars/{0}.{1}".format(player_name, ext) 
```

你的版本不是更清晰、更明确、更容易输入，甚至更短。所以，如果没有好处，我想说让新手阅读变得更难一些，并且让社区的某些部分感到烦恼（即使是出于不好的原因）的风险是不值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:28:23.290

正如我上面评论的那样，这不应该用于不受信任的来源。此外，它可能不够明确，不足以成为 Pythonic。

也可以定义一个函数来做到这一点，但要访问正确的局部变量，它需要做一些帧处理

```
def format_locals(string):
    return string.format(**sys._getframe().f_back.f_locals) 
```

这种模式不好，像 Pypy 这样的东西不能优化这种代码。

我会使用这段代码（除非你需要 Python 2.6 支持，所以你必须添加索引）：

```
filename = 'data/avatars/{}.{}'.format(player_name, ext) 
```

# php - 在不刷新页面的情况下获取输入数据

> ID：15690226
> 
> 赞同：-4
> 
> 时间：2013-03-28T19:11:52.987
> 
> 标签：php, javascript

我想在不刷新页面的情况下存储来自选择的输入数据。我有这个代码：

```
<p class="inf" >   
    Select:
    <select id="chose" >
        <option value="0">choose citty</option>
        <option value="cluj">Cluj</option>
        <option value="bucuresti">Bucuresti</option>
    </select>
</p> 
```

我想要，如果可以使用 javascript。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:14:36.873

有可能，您需要一种称为 AJAX 的技术。它允许在不刷新页面的情况下将数据发送回服务器。最简单的实现是[jQuery 的 Ajax 方法](http://api.jquery.com/jQuery.ajax/)

# arrays - cuda 固定大小的全局数组

> ID：15690228
> 
> 赞同：0
> 
> 时间：2013-03-28T19:12:02.903
> 
> 标签：arrays, memory-management, cuda

我认为可以在 gpu ex 上分配一个数组。`__device__ int device_array[100];`不使用 cudaMalloc 作为已知长度。但是当我运行以下代码时，会显示一些不相关的数字。我查看了一本流行的 cuda 书籍，其中的所有示例都使用了 cudaMalloc。固定大小的数组可以这样使用还是必须用cudaMalloc分配？

```
__device__ int device_array[100];

__global__ void kernel() {

    device_array[blockIdx.x] = blockIdx.x;
}

void call_kernel( int *host_array ) {

    kernel<<<100,1>>>();

    cudaMemcpy( host_array, device_array, 100 * sizeof( int ), cudaMemcpyDeviceToHost );
}

int main() {

    int host_array[100];

    call_kernel( host_array );

    for ( int i = 0; i < 100; i++ )
        cout << host_array[i] << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:41:50.043

正如罗伯特在他的评论中提到的那样，您必须`cudaMemcpyFromSymbol`在访问`__device__`主机上的符号时使用。因此，您`cudaMemcpy`当前形式的调用应该给出“无效参数”的错误。如果您想看到这一点，请尝试将您的`cudaMemcpy`行更改为：

```
cudaError_t cuda_status = cudaMemcpy(...); 
std::cout << cudaGetErrorString(cuda_status) << std::endl; 
```

无论如何，如果你想得到正确的答案，你应该把你的`cudaMemcpy`行改为：

```
cudaMemcpyFromSymbol( host_array, device_array, 100 * sizeof( int ), 0, cudaMemcpyDeviceToHost); 
```

cudaMemcpyFromSymbol 的签名是：

```
cudaError_t cudaMemcpyFromSymbol ( void* dst, const void* symbol, size_t count, size_t offset = 0, cudaMemcpyKind kind = cudaMemcpyDeviceToHost ) 
```

偏移量默认为 0，内存复制方向默认为`cudaMemcpyDeviceToHost`，因此在您的情况下，这些在技术上是可选的。所有这一切的主要收获是始终检查您的 cuda-call 的返回值，因为它们通常会引导您朝着正确的方向前进。

# ajax - 由于解析错误，通过 Ajax 提交表单失败，但在正常 POST 期间通过

> ID：15690232
> 
> 赞同：0
> 
> 时间：2013-03-28T19:12:11.397
> 
> 标签：ajax, ruby-on-rails-3, forms, jquery

我很困惑为什么 ajax 表单提交不起作用。你们可以看看，如果你能发现什么问题，请告诉我。

在职的

```
<form id="advancedSearchForm" name="advancedSearchForm" action="" method="POST">
....
<input type="submit" value="Search"> 
```

表单提交的 Ajax 等效项不起作用。

```
<form id="advancedSearchForm" name="advancedSearchForm" action="" method="POST" onsubmit="return sumbitForm();"> 
```

我将函数定义为

```
function submitForm()
{
$.ajax({type: 'POST', url: '', data: $('#advancedSearchForm').serialize(),dateType:'script',error: alert ("Error in ajax submission"),success: alert ("success")});
} 
```

*更新，我刚刚添加了警报错误功能，它确实会弹出。但是成功也随之而来*

在第二个中，我收到解析 JSON 请求失败。在正文中，加载 DOM 时，我有一个`$.ajaxSetup({error:function(x,e){......if(e == "parsererror") errortext = "Parsing JSON request failed".`

*控制器似乎在两个实例中都从 log 发送和接收正确的数据*。如果您有任何想法，请加入。

# javascript - 如果未选中任何单选选项，则发出警报

> ID：15690236
> 
> 赞同：4
> 
> 时间：2013-03-28T19:12:16.890
> 
> 标签：javascript, jquery, forms, radio-button

我有一个包含 3 个问题的表格，每个问题有 3 个单选选项。如果有任何问题留空，我希望表单发送警报。仅当所有问题都留空时，此代码才会发送警报：

```
if (!$("input").is(':checked')) {
    alert("You left one blank!");
} 
```

因此，例如，如果我只回答了一个问题，我希望发送警报。相反，它继续使用代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:15:50.467

您有 3 个无线电组，因此将有 3 个选中的输入和 6 个未选中的输入，我建议：

```
if ( $("input[type=radio]:checked").length < 3 ) {
    alert('Please answer all of the questions');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:17:36.723

试试这个：

```
$(document).ready(function () {
    $("#btn1").on("click", function () {
        var count = 0;
        var questions = $("div.question");
        questions.each(function () {
            if ($(this).find("input").filter('[type="radio"]').filter(":checked").length > 0) {
                count++;
            }
        });
        if (count >= questions.length) {
            alert("all good");
        } else {
            alert("something not checked");
        }
    });
}); 
```

使用 HTML：

```
<div class="question">
    Question 1:
    <input type="radio" name="radio1" />
    <input type="radio" name="radio1" />
    <input type="radio" name="radio1" />
</div>

<div class="question">
    Question 2:
    <input type="radio" name="radio2" />
    <input type="radio" name="radio2" />
    <input type="radio" name="radio2" />
</div>

<div class="question">
    Question 3:
    <input type="radio" name="radio3" />
    <input type="radio" name="radio3" />
    <input type="radio" name="radio3" />
</div>

<div>
    <input type="button" id="btn1" value="Submit" />
</div> 
```

[http://jsfiddle.net/4yQHv/1/](http://jsfiddle.net/4yQHv/1/)

您可以更改`if (count >= questions.length) {`为，`===`而不是`>=`确保为每个问题选择了 1 个单选按钮。否则，这允许选择多个单选按钮（当它们按`name`属性分组时，这并不完全可能）......但只是想指出这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:21:55.303

[http://jsfiddle.net/tVUuW/](http://jsfiddle.net/tVUuW/)

```
<form>
    <input type="radio" name="facepunch" class="facepunch" value="1" />
    <input type="radio" name="facepunch" class="facepunch" value="2" />
    <input type="radio" name="facepunch" class="facepunch" value="3" />
    <br />
    <input type="radio" name="stack" class="stack" value="1" />
    <input type="radio" name="stack" class="stack" value="2" />
    <input type="radio" name="stack" class="stack" value="3" />
    <br />
    <input id="button" type="button">
</form>

$(document).ready(function(){
    $('#button').click(function(){
        if(!$("input.facepunch:checked").val()) {
            alert("Please select facepunch");
        }

        if(!$("input.stack:checked").val()) {
            alert("Please select stack");
        }
    });
}); 
```

如果您只有几组无线电，您可以使用此方法，这是验证用户数据的一种方法。

我建议您查看其中一个很棒的 jQuery 验证插件： [jzaefferer 插件](https://github.com/jzaefferer/jquery-validation)，[bassistance 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

另外，请确保您也在服务器端验证它！用户可以从其他地方向您的服务器发送请求，甚至可以在他的浏览器上禁用 javascript

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T19:14:44.413

您可以遍历所有单选按钮，看看是否有任何未选中：

```
$('input[type="radio"]').each(function () {
       if( ! $(this).is(':checked') ) {
           alert('You left one blank!');
           return false; //exit function, so alert won't show multiple times
       }
    }); 
```

[**例子**](http://jsbin.com/ubuxuf/1/edit)

# jquery - MediaWiki HTML 和 CSS 格式问题

> ID：15690244
> 
> 赞同：0
> 
> 时间：2013-03-28T19:12:52.130
> 
> 标签：jquery, html, css, mediawiki

所以我一直在研究一个使用 MediaWiki 的 wiki（我不得不改变我的整个代码来处理引擎，因为在这种情况下我不能使用普通的 HTML）。

wiki 链接[在这里](http://2013hs.igem.org/Team%3aSt_Pauls_London)。

我遇到的问题是 wiki 的内容没有将主页内容向下推（正如您可以通过访问 wiki 看到的那样）。

所有资源都可以在 wiki 中找到（没有外部参考）。我确实有一些jquery，但我已经添加了它作为以后的测试，在我添加之前格式化不起作用。

我觉得问题与我的 css 和定位值有关，但我无法弄清楚。

[您可以在此处](http://pastebin.com/DjQiJd8H)查看我已放入引擎的源代码。

如果非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:22:14.070

看起来您没有在第 332 行关闭标题

```
 <html>
 <a class="nav_buttonLink" id="nav-button-link-fourth" href="#fourth"><div 
class="nav_button" id="fourth"><p class="nav_buttonText">
</html>
NOTEBOOK
<html>
 </p></div></a>
</html>
 |-
 |}
</center>*</div>* 
```

# c++ - C++ 多线程嵌套 for 循环

> ID：15690245
> 
> 赞同：2
> 
> 时间：2013-03-28T19:12:56.890
> 
> 标签：c++, multithreading, loops, optimization, nested-loops

首先，我对多线程知之甚少，我很难找到优化此代码的最佳方法，但多线程似乎是我应该走的道路。

```
double
applyFilter(struct Filter *filter, cs1300bmp *input, cs1300bmp *output)
{
    long long cycStart, cycStop;

    cycStart = rdtscll();

    output -> width = input -> width;
    output -> height = input -> height;

    int temp1 = output -> width;
    int temp2 = output -> height;

    int width=temp1-1;
    int height=temp2 -1;
    int getDivisorVar= filter -> getDivisor();  
    int t0, t1, t2, t3, t4, t5, t6, t7, t8, t9;

    int keep0= filter -> get(0,0);
    int keep1= filter -> get(1,0);
    int keep2= filter -> get(2,0);
    int keep3= filter -> get(0,1);
    int keep4= filter -> get(1,1);
    int keep5= filter -> get(2,1);
    int keep6= filter -> get(0,2);
    int keep7= filter -> get(1,2);
    int keep8= filter -> get(2,2);

    //Declare variables before the loop
    int plane, row, col;    

    for (plane=0; plane < 3; plane++) {
        for(row=1; row < height ; row++) {
            for (col=1; col < width; col++) {

                t0 = (input -> color[plane][row - 1][col - 1]) * keep0;
                t1 = (input -> color[plane][row][col - 1]) * keep1;
                t2 = (input -> color[plane][row + 1][col - 1]) * keep2;
                t3 = (input -> color[plane][row - 1][col]) * keep3;
                t4 = (input -> color[plane][row][col]) * keep4;
                t5 = (input -> color[plane][row + 1][col]) * keep5;
                t6 = (input -> color[plane][row - 1][col + 1]) * keep6;
                t7 = (input -> color[plane][row][col + 1]) * keep7;
                t8 = (input -> color[plane][row + 1][col + 1]) * keep8;

                // NEW LINE HERE

                t9 = t0 + t1 + t2 + t3 + t4 + t5 + t6 + t7 + t8;
                t9 = t9 / getDivisorVar;

                if ( t9 < 0 ) {
                    t9 = 0;
                }

                if ( t9  > 255 ) {
                    t9 = 255;
                } 

                output -> color[plane][row][col] = t9;
            } .... 
```

所有这些代码很可能都不是必需的，但它确实提供了一些上下文。因此，因为 3 个“for”循环中的第一个仅从 0-2 开始，所以我希望有一种方法可以让底部的两个“for”循环同时运行以获取不同的“平面”值。这甚至可能吗？如果是这样，它真的会让我的程序更快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:26:18.833

我也会研究 OpenMP。这是一个很棒的库，它允许使用编译指示以非常简单的方式进行线程化。OpenMP 可在许多平台上编译，您只需确保您的平台支持它！

我有一组代码，它有 8 个级别的 for 循环，并且它的线程非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:19:47.863

是的，这是完全可能的。在这种情况下，您应该摆脱事件而不用担心访问同步（即竞争条件），因为两个线程将在不同的数据集上运行。

这肯定会加速你在多核机器上的代码。

您可能想查看跨平台线程实现的[std::thread](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://en.cppreference.com/w/cpp/thread/thread&ei=QZdUUYyQJ6ql4AS4sIGADQ&usg=AFQjCNF5Nkc5b0n2_2RS91-kBn2ZPYX6Vw&sig2=nEonN-C8YKlOcxv5CayhYg&bvm=bv.44442042,d.bGE)（如果您对 c++ 11 没问题）（因为您尚未指定目标平台）。或者更好的[线程支持库](http://en.cppreference.com/w/cpp/thread)

您还可以考虑检测内核数量并启动适当数量的线程，如 threadcount = min(planes, cores) 并为每个工作函数提供对单个平面数据集的访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:24:49.177

看起来你可以把它分成线程，你可能会看到一个很好的速度提升。但是，您的编译器已经在尝试为您展开循环并通过矢量化指令获得并行性。您的收益可能没有您想象的那么大，尤其是当您使用来自不同位置的读取使内存总线饱和时。

您可能会考虑的是，如果这是一个 2d 图形操作，请尝试使用 OpenGL 或类似的东西，因为它将利用您系统上的硬件，并且内置了一些并行性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T19:28:55.293

线程版本的代码会比简单的实现慢。因为在线程版本中，同步会花费很多时间。同样在线程版本中，您将有缓存性能缺陷。

也很有可能，`for`具有 3 遍的外循环将被编译器展开并并行执行。

您可以尝试制作线程版本并比较性能。无论如何，这将是有用的经验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T21:35:15.050

对于这种情况，您可能会比使用自动将 for 循环转换为线程的编译器做得更糟。

使用这样的代码，编译器可以确定是否存在任何迭代间数据依赖关系。如果不是，那么它知道它可以安全地将 for 循环拆分到多个线程中，将标准线程同步放在最后。通常，这样的编译器能够插入代码，在运行时确定线程的开销是否会被好处所抵消。

唯一的问题是，你有编译器吗？如果是这样，那么它是迄今为止获得线程好处的最简单方法，以实现像这样的直接、几乎公开的并行性。

我知道 Sun 的 C 编译器可以做到这一点（我认为他们是最早这样做的人之一。它可能只在他们的编译器的 Solaris 版本上）。我认为英特尔的编译器也可以。我对 GCC 有疑问（尽管我很乐意在这一点上得到纠正），而且我不太确定 Microsoft 的编译器。

# c++ - 'function-style cast' : '.' 的右边是非法的 操作员

> ID：15690249
> 
> 赞同：1
> 
> 时间：2013-03-28T19:13:10.267
> 
> 标签：c++, enums

我在`drawview`课堂上声明了一个枚举：

```
enum current_shape{line,rect,elli}; 
```

在我的主课上，我有一个`drawview`被调用的实例`m_view`。

我尝试通过以下方式设置枚举：

```
m_view.current_shape = line; 
```

我也试过

```
m_view.current_shape = m_view.line; 
```

如何`enum`正确设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:15:20.247

枚举是一种类型。您的枚举类型称为`current_shape`. 现在您需要一个该类型的对象。但是，可能应该更改名称，以便对象是`current_shape`并且枚举是`shape`：

```
enum shape { line, rect, elli };
shape current_shape; 
```

现在你可以`current_shape`这样设置：

```
m_view.current_shape = drawview::line; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:15:34.417

给`m_view.current_shape`一个不同的名字，`current_shape`在声明之后被保留为枚举类型。

# wpf - 在 WPF 中使用 Z-Index 有困难

> ID：15690253
> 
> 赞同：0
> 
> 时间：2013-03-28T19:13:21.627
> 
> 标签：wpf, z-index, layer

我已经按照一些示例尝试在 WebBrowser 对象上放置一个矩形：

[这是 MSDN 示例链接。](http://blogs.msdn.com/b/wpfsdk/archive/2006/06/13/controlling-zorder-using-the-zindex-property.aspx)（我让它工作）

[使用 Z-Index 的图层问题](https://stackoverflow.com/questions/4195467/layers-issue-using-z-index)

这是我要开始工作的代码：

```
<Grid>
    <Canvas Margin="2,4,0,-450" >
        <Rectangle Height="452" Canvas.ZIndex="1000" Name="rectangle1" Stroke="Black" Width="524" Opacity=".5" Fill="#8CBABABA" Canvas.Top="-7" Canvas.Left="-3" />
        <WebBrowser Name="mapBrowser" Canvas.ZIndex="999" Margin="5,5,5,5"  Height="452" Width="516" Canvas.Top="-11" />
    </Canvas>
</Grid> 
```

我试图通过使矩形出现在其顶部来使`WebBrowser`显示***变灰。***我也会禁用它。

**谁能指出我做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:15:26.537

我通过创建一个 .png 图像解决了这个问题，我将其放置在与 webbrowser 相同的空间中。它看起来像是第一次出现在网络浏览器中的灰色版本。然后我有条件地隐藏了使图像可见的网络浏览器。这是我发现使用 .Net 4.0 使其工作的唯一方法。

# java - 如何生成一个完整的数独板？算法错误

> ID：15690254
> 
> 赞同：8
> 
> 时间：2013-03-28T19:13:24.050
> 
> 标签：java, algorithm, sudoku

我正在尝试生成一个完整的（即，每个单元格都填充一个数字）类似数独的板。这是为了与数独无关的其他事情，所以我对达到可以解决的白色方块的数独或与数独有关的任何事情不感兴趣。不知道你知不知道我的意思。

我在java中完成了这个：

```
private int sudokuNumberSelector(int x, int y, int[][] sudoku) {

    boolean valid = true;
    String validNumbers = new String();
    int[] aValidNumbers;
    int squarexstart = 0;
    int squareystart = 0;
    int b = 0;                          // For random numbers
    Random randnum = new Random();
    randnum.setSeed(new Date().getTime());

    // Check numbers one by one
    for(int n = 1; n < 10; n++) {

        valid = true;

        // Check column
        for(int i = 0; i < 9; i++) {
            if(sudoku[i][y] == n) {
                valid = false;
            }
        }

        // Check file
        for(int j = 0; j < 9; j++) {
            if(sudoku[x][j] == n) {
                valid = false;
            }
        }

        // Check square
        switch (x) {
        case 0: case 1: case 2: squarexstart = 0; break;
        case 3: case 4: case 5: squarexstart = 3; break;
        case 6: case 7: case 8: squarexstart = 6; break;
        }

        switch (y) {
        case 0: case 1: case 2: squareystart = 0; break;
        case 3: case 4: case 5: squareystart = 3; break;
        case 6: case 7: case 8: squareystart = 6; break;
        }

        for(int i = squarexstart; i < (squarexstart + 3); i++ ) {
            for(int j = squareystart; j < (squareystart + 3); j++ ) {
                if(sudoku[i][j] == n) {
                    valid = false;
                }
            }
        }

        // If the number is valid, add it to the String
        if(valid) {
            validNumbers += n;
        }
    }

    if(validNumbers.length() != 0) {

        // String to int[]
        aValidNumbers = fromPuzzleString(validNumbers);

        // By this random number, return the valid number in its position
        Log.d(TAG, "NUMBERS: " + validNumbers.length()); 

        // Select a random number from the int[]
        b = randnum.nextInt((aValidNumbers.length));

        return aValidNumbers[b];

    } else {
        return 0;
    }
} 
```

从这段代码调用此方法：

```
int[][] sudoku = new int[9][9];

for(int i = 0; i < 9; i++) {
            for(int j = 0; j < 9; j++) {
                sudoku[i][j] = sudokuNumberSelector(i, j, sudoku);
            }
        } 
```

但这并不像看起来那么容易！当算法生成了像这样的板的一部分，并且循环在粗体单元格上时：

```
|||164527389|||
|||983416257|||
|||257938416|||
|||719352648|||
|||3256791**0**0|||
|||000000000|||
|||000000000|||
|||000000000|||
|||000000000||| 
```

这个单元格中没有数字可以输入，因为所有符合数独规则的数字都已经在列、行或方格上！

这对我来说是一场噩梦。有什么办法可以做到这一点吗？如果没有，我想我必须像在做数独游戏一样重做所有事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T19:25:08.523

问题是在大多数情况下不可能使用随机数生成完整的棋盘，在无法匹配下一个单元格的情况下，您必须使用回溯。我曾经写过一个数独游戏，所以这是生成填充板的一段代码。

这是 Cell 类。

```
 public class SudokuCell implements Serializable {

    private int value;
    private boolean filled;
    private HashSet<Integer> tried;

    public SudokuCell() {
        filled = false;
        tried = new HashSet();
    }

    public boolean isFilled() {
        return filled;
    }

    public int get() {
        return value;
    }

    public void set(final int number) {
        filled = true;
        value = number;
        tried.add(number);
    }

    public void clear() {
        value = 0;
        filled = false;
    }

    public void reset() {
        clear();
        tried.clear();
    }

    public void show() {
        filled = true;
    }

    public void hide() {
        filled = false;
    }

    public boolean isTried(final int number) {
        return tried.contains(number);
    }

    public void tryNumber(final int number) {
        tried.add(number);
    }

    public int numberOfTried() {
        return tried.size();
    }
 } 
```

这是 Field 类（将所有数据保存在一个对象中非常方便）。

```
 public class SudokuField implements Serializable {

    private final int blockSize;
    private final int fieldSize;
    private SudokuCell[][] field;

    public SudokuField(final int blocks) {
        blockSize = blocks;
        fieldSize = blockSize * blockSize;
        field = new SudokuCell[fieldSize][fieldSize];
        for (int i = 0; i < fieldSize; ++i) {
            for (int j = 0; j < fieldSize; ++j) {
                field[i][j] = new SudokuCell();
            }
        }
    }

    public int blockSize() {
        return blockSize;
    }

    public int fieldSize() {
        return fieldSize;
    }

    public int variantsPerCell() {
        return fieldSize;
    }

    public int numberOfCells() {
        return fieldSize * fieldSize;
    }

    public void clear(final int row, final int column) {
        field[row - 1][column - 1].clear();
    }

    public void clearAllCells() {
        for (int i = 0; i < fieldSize; ++i) {
            for (int j = 0; j < fieldSize; ++j) {
                field[i][j].clear();
            }
        }
    }

    public void reset(final int row, final int column) {
        field[row - 1][column - 1].reset();
    }

    public void resetAllCells() {
        for (int i = 0; i < fieldSize; ++i) {
            for (int j = 0; j < fieldSize; ++j) {
                field[i][j].reset();
            }
        }
    }

    public boolean isFilled(final int row, final int column) {
        return field[row - 1][column - 1].isFilled();
    }

    public boolean allCellsFilled() {
        for (int i = 0; i < fieldSize; ++i) {
            for (int j = 0; j < fieldSize; ++j) {
                if (!field[i][j].isFilled()) {
                    return false;
                }
            }
        }
        return true;
    }

    public int numberOfFilledCells() {
        int filled = 0;
        for (int i = 1; i <= fieldSize; ++i) {
            for (int j = 1; j <= fieldSize; ++j) {
                if (isFilled(i, j)) {
                    ++filled;
                }
            }
        }
        return filled;
    }

    public int numberOfHiddenCells() {
        return numberOfCells() - numberOfFilledCells();
    }

    public int get(final int row, final int column) {
        return field[row - 1][column - 1].get();
    }

    public void set(final int number, final int row, final int column) {
        field[row - 1][column - 1].set(number);
    }

    public void hide(final int row, final int column) {
        field[row - 1][column - 1].hide();
    }

    public void show(final int row, final int column) {
        field[row - 1][column - 1].show();
    }

    public void tryNumber(final int number, final int row, final int column) {
        field[row - 1][column - 1].tryNumber(number);
    }

    public boolean numberHasBeenTried(final int number, final int row, final int column) {
        return field[row - 1][column - 1].isTried(number);
    }

    public int numberOfTriedNumbers(final int row, final int column) {
        return field[row - 1][column - 1].numberOfTried();
    }

    public boolean checkNumberBox(final int number, final int row, final int column) {
        int r = row, c = column;
        if (r % blockSize == 0) {
            r -= blockSize - 1;
        } else {
            r = (r / blockSize) * blockSize + 1;
        }
        if (c % blockSize == 0) {
            c -= blockSize - 1;
        } else {
            c = (c / blockSize) * blockSize + 1;
        }
        for (int i = r; i < r + blockSize; ++i) {
            for (int j = c; j < c + blockSize; ++j) {
                if (field[i - 1][j - 1].isFilled() && (field[i - 1][j - 1].get() == number)) {
                    return false;
                }
            }
        }
        return true;
    }

    public boolean checkNumberRow(final int number, final int row) {
        for (int i = 0; i < fieldSize; ++i) {
            if (field[row - 1][i].isFilled() && field[row - 1][i].get() == number) {
                return false;
            }
        }
        return true;
    }

    public boolean checkNumberColumn(final int number, final int column) {
        for (int i = 0; i < fieldSize; ++i) {
            if (field[i][column - 1].isFilled() && field[i][column - 1].get() == number) {
                return false;
            }
        }
        return true;
    }

    public boolean checkNumberField(final int number, final int row, final int column) {
        return (checkNumberBox(number, row, column)
                && checkNumberRow(number, row)
                && checkNumberColumn(number, column));
    }

    public int numberOfPossibleVariants(final int row, final int column) {
        int result = 0;
        for (int i = 1; i <= fieldSize; ++i) {
            if (checkNumberField(i, row, column)) {
                ++result;
            }
        }
        return result;
    }

    public boolean isCorrect() {
        for (int i = 0; i < fieldSize; ++i) {
            for (int j = 0; j < fieldSize; ++j) {
                if (field[i][j].isFilled()) {
                    int value = field[i][j].get();
                    field[i][j].hide();
                    boolean correct = checkNumberField(value, i + 1, j + 1);
                    field[i][j].show();
                    if (!correct) {
                        return false;
                    }
                }
            }
        }
        return true;
    }

    public Index nextCell(final int row, final int column) {
        int r = row, c = column;
        if (c < fieldSize) {
            ++c;
        } else {
            c = 1;
            ++r;
        }
        return new Index(r, c);
    }

    public Index cellWithMinVariants() {
        int r = 1, c = 1, min = 9;
        for (int i = 1; i <= fieldSize; ++i) {
            for (int j = 1; j <= fieldSize; ++j) {
                if (!field[i - 1][j - 1].isFilled()) {
                    if (numberOfPossibleVariants(i, j) < min) {
                        min = numberOfPossibleVariants(i, j);
                        r = i;
                        c = j;
                    }
                }
            }
        }
        return new Index(r, c);
    }

    public int getRandomIndex() {
        return (int) (Math.random() * 10) % fieldSize + 1;
    }
} 
```

最后是填充游戏板的功能

```
private void generateFullField(final int row, final int column) {
    if (!field.isFilled(field.fieldSize(), field.fieldSize())) {
        while (field.numberOfTriedNumbers(row, column) < field.variantsPerCell()) {
            int candidate = 0;
            do {
                candidate = field.getRandomIndex();
            } while (field.numberHasBeenTried(candidate, row, column));
            if (field.checkNumberField(candidate, row, column)) {
                field.set(candidate, row, column);
                Index nextCell = field.nextCell(row, column);
                if (nextCell.i <= field.fieldSize()
                        && nextCell.j <= field.fieldSize()) {
                    generateFullField(nextCell.i, nextCell.j);
                }
            } else {
                field.tryNumber(candidate, row, column);
            }
        }
        if (!field.isFilled(field.fieldSize(), field.fieldSize())) {
            field.reset(row, column);
        }
    }
} 
```

关键是您在继续之前保存您已经为每个单元格尝试过的数字。如果你不得不走到死胡同，你只需要为前一个单元格尝试另一个数字。如果不可能，请擦除该单元格并退回一个单元格。迟早你会完成的。（它实际上需要很少的时间）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:32:50.157

从解决的**Sudoko**开始，如下所示：

```
ABC DEF GHI
329 657 841 A
745 831 296 B
618 249 375 C

193 468 527 D
276 195 483 E
854 372 619 F

432 716 958 G 
587 923 164 H 
961 584 732 I 
```

然后通过切换列和切换行来排列它。如果您只在以下组 ABC、DEF、GHI 内切换，数独仍然可以解决。

**置换版本（切换列）：**

```
BCA DFE IGH   
293 675 184 A 
457 813 629 B 
186 294 537 C 

931 486 752 D 
762 159 348 E 
548 327 961 F 

324 761 895 G 
875 932 416 H 
619 548 273 I 
```

**经过更多排列（切换行）：**

```
BCA DFE IGH   
293 675 184 A 
186 294 537 C 
457 813 629 B 

931 486 752 D 
548 327 961 F 
762 159 348 E 

875 932 416 H 
619 548 273 I 
324 761 895 G 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-17T17:05:09.910

您的问题是您使用的是字符串。尝试使用整数的递归算法。该算法对于任何大小的数独都非常有用。虽然在每次通话中选择随机数确实有效，但需要更长的时间。如果在下一个单元格不起作用的情况下选择一组随机数进行遍历，那么您将不会再次使用相同的数字。该算法每次都会创建一个独特的谜题。

```
public class Sudoku {
    //box size, and game SIZE ==> e.g. size = 3, SIZE = 9
    //game will be the game
    private int size, SIZE;
    private int[][] game;

    public Sudoku(int _size) {
        size = _size;
        SIZE = size*size;
        game = generateGame();
    }

    //This will return the game
    private int[][] generateGame() {
        //Set everything to -1 so that it cannot be a value
        int[][] g = new int[SIZE][SIZE];
        for(int i = 0; i < SIZE; i++)
            for(int j = 0; j < SIZE; j++)
                g[i][j] = -1;

        if(createGame(0, 0, g))
            return g;
        return null;
    }

    //Create the game
    private boolean createGame(int x, int y, int[][] g) {
        //An array of integers
        Rand r = new Rand(SIZE);

        //for every random num in r
        for(int NUM = 0; NUM < size; NUM++) {
            int num = r.get(NUM);

            //if num is valid
            if(isValid(x, y, g, num)) {
                //next cell coordinates
                int nx = (x+1)%SIZE, ny = y;
                if(nx == 0) ny++;

                //set this cell to num
                g[x][y] = num;

                //if the next cell is valid return true
                if(createGame(nx, ny, g)) return true;

                //otherwise return false
                g[x][y] = -1;
                return false;
            }
        }
        return false;
    }

    private boolean isValid(int x, int y, int[][] g, int num) {
        //Rows&&Cols
        for(int i = 0; i < SIZE; i++)
            if(g[i][y] == num || g[x][i] == num) return false;
        //Box
        int bx = x - x%size;, by = y - y%size;
        for(int i = bx; i < bx + size; i++) {
            for(int j = by; j < by + size; j++) {
                if(g[i][j] == num)return false;
            }
        }
        return true;
    }
}

public class Rand {
    private int rSize;
    private int[] r; 
    public Rand(int _size) {
        rSize = _size;
        r = new int[size];
        for(int i = 0; i < rSize; r++)r[i] = i;
        for(int i = 0; i < rSize*5; r++) {
            int a = (int)(Math.random()*rSize);
            int b = (int)(Math.random()*rSize);
            int n = r[a];
            r[a] = r[b];
            r[b] = n;
    }
    public void get(int i) {
        if(i >= 0 && i < rSize) return r[i]; return -1;
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T19:24:00.200

你将不得不实现一个[回溯](http://en.wikipedia.org/wiki/Backtracking)算法。

*   对于 81 个位置中的每一个，生成集合 1 到 9。
*   重复直到解决
    *   解决一个位置。从集合中选择一个数字。
    *   从同一行、列和正方形中的所有集合中删除该数字。
    *   如果发生冲突，则回溯到已知的良好位置，并解决不同的位置。

您可能必须使用递归函数才能回溯。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-22T19:33:22.320

您至少有几种方法可以做到这一点，但通常您需要重复/回溯。如果您想要真正的数独，那么拥有求解器也会很棒，只需检查部分填充的拼图是否有解决方案（以及唯一的解决方案 - 用于停止标准 - 如果您想要真正的数独）。

在执行回溯/重复时，您将需要：

*   随机选择可用的空单元格（您可以通过测量给定单元格上仍然空闲的数字，然后排序来优化此步骤）

*   随机选择该单元格中仍然可用的数字

*   您填充单元格并检查解决方案是否存在，如果是 - 继续前进，如果不存在 - 执行后退一步。

起点： - 从完全空的拼图开始 - 从部分填充的拼图开始 - 从已解决的拼图开始（有很多转换不会改变解决方案的存在，但会使拼图不同 - 即：反射，旋转，转置，段交换，列/行在段内交换、排列等）

我最近在使用 Janet Sudoku 库，它提供求解器、生成器和拼图转换方法。

[珍妮特数独网站](http://janetsudoku.mariuszgromada.org/)

请参考 GitHub 上提供的以下源代码

[数独求解器](http://github.com/mariuszgromada/Janet-Sudoku/blob/master/CURRENT/java/src/org/mariuszgromada/math/janetsudoku/SudokuSolver.java)

[数独发生器](http://github.com/mariuszgromada/Janet-Sudoku/blob/master/CURRENT/java/src/org/mariuszgromada/math/janetsudoku/SudokuGenerator.java)

[数独转换](http://github.com/mariuszgromada/Janet-Sudoku/blob/master/CURRENT/java/src/org/mariuszgromada/math/janetsudoku/SudokuStore.java)

库的使用非常简单，即：

```
SudokuGenerator g = new SudokuGenerator();
int[][] puzzle = g.generate();
SudokuSolver s = new SudokuSolver(puzzle);
s.solve();
int[][] solvedPuzzle = s.getSolvedBoard(); 
```

最好的祝福，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T21:09:24.560

只需在 1 到 9 之间生成一些随机数，然后查看它是否适合给定的 cell[i][j] 它每次都会向您保证一组新的数字，因为每个单元格编号都是根据当前系统时间随机生成的。

```
public int sudokuNumberSelector(int i, int j, int[][] sudoku) {
    while (true) {
        int temp = (int) ((System.currentTimeMillis()) % 9) + 1;//Just getting some random number
        while (temp < 10) {
        boolean setRow = false, setColomn = false, setBlock = false;
            for (int a = 0; a < 9; a++) {
                if (sudoku[a][j] == temp) {
                    setRow = true;
                    break;
                }
            }

            for (int a = 0; a < 9; a++) {
                if (sudoku[i][a] == temp) {
                    setColomn = true;
                    break;
                }
            }
            for (int a = i - (i % 3); a < i - (i % 3)+ 3; a++) {
                for (int b = j - (j % 3); b < j - (j % 3)+3; b++) {
                    if (sudoku[a][b] == temp) {
                        setBlock = true;
                        a = 3;
                        b = 3;
                    }
                }
            }
            if(setRow | setColomn | setBlock == false){
                return temp;
            }
            temp++;
        }
    }
} 
```

# xcode - 具有相同产品名称，相同捆绑ID的多个目标，是否可能？

> ID：15690259
> 
> 赞同：3
> 
> 时间：2013-03-28T19:13:57.600
> 
> 标签：xcode, cocoa

长话短说，我有一个 xcode (cocoa) 项目，我在这个项目中添加了两个目标。一种是沙盒版，另一种是非沙盒版。（详情请阅读：[一个项目，两个版本？（沙盒版和非沙盒版）？有什么简单的代码维护方法吗？](https://stackoverflow.com/questions/15682384/one-project-two-versions-sandboxed-and-nonsandboxed-version-any-easy-way-to)）

但是我不确定我是否应该或不应该保留相同的产品名称和相同的捆绑 ID，因为我不知道这样做的利弊是什么。

这两个目标几乎是一样的，除了沙盒版本，我必须启用沙盒并添加权利，而非沙盒版本没有这个限制，我也可以添加火花框架，这样如有必要，它会自动更新应用程序。

所以我拥有相同产品名称和相同捆绑 ID 的原因是，它们大多相同，我真的不想将其中一个产品名称重命名为我的产品 - 沙盒版本或我的产品 - 非沙盒版本。而且它们都是完整版，所以我不能将一种产品命名为完整版而将另一种产品命名为精简版。

所以我的问题是，对于这两个目标，如果我使用相同的产品名称和相同的捆绑包 ID，我会导致任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:37:04.733

You could change the Build Products Path under Build Settings for each target to a unique subdirectory ("AppStore" vs. "Self-Distro" or whatever).

# git - git cherry-pick 合并删除文件

> ID：15690261
> 
> 赞同：5
> 
> 时间：2013-03-28T19:14:02.223
> 
> 标签：git, cherry-pick

我正在尝试在 git 中挑选一个提交，它添加了一堆文件，但也修改了一个在我的分支中尚不存在的文件。

存在冲突，要添加的文件都已暂存，并且在提交中更改但在分支中尚不存在的文件未暂存，并列为：

```
deleted by us: app/changed_file.rb 
```

`changed_file.rb`如果我只是提交暂存文件，当最终合并到分支时会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:33:56.483

[https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)

Cherry-pick 创建**新**的提交，因此如果您省略了分支中不存在但存在于分支中的文件，那么您最终将不会合并。

```
mkdir test && cd test && git init && touch foo.txt
git add foo.txt && git commit -m "Init repo"
git branch test && git checkout test && vi foo.txt 
git add foo.txt && git commit -m "Changed foo on branch test"
git checkout master && touch bar.txt
git add bar.txt && git commit -m "Create bar.txt"
vi bar.txt 
touch baz.txt && git add . && git commit -m "Will be cherry picked"
git checkout test && git cherry-pick bfd1b58
git rm bar.txt && git commit
git checkout master && git merge test 
```

结果是`ls`：`bar.txt baz.txt foo.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T13:10:44.257

如果不需要，您可以简单地从您正在挑选的提交中删除该文件...

git rm 文件名

git 提交

-在这里确保您的提交消息包含更改 ID：作为最后一段的行

git push origin HEAD:refs/for/branch_name

这样您就不会遇到任何冲突，并且下次合并时会更容易..

# iphone - iPhone 的集合视图单元格

> ID：15690262
> 
> 赞同：0
> 
> 时间：2013-03-28T19:14:09.417
> 
> 标签：iphone, xcode, cell, collectionview

有没有办法自动分配一个集合视图单元的标识符？我有几百个单元格都给了我“单元格必须具有重用标识符”警告，我不想手动分配它们...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:41:03.377

Yeah, as long as all of your cells are the same class, you should be able to do something like this before setting them up:

```
[self.collectionView registerClass:[Cell class] forCellWithReuseIdentifier:@"MyCell"]; 
```

# permissions - NetLogo 权限异常

> ID：15690263
> 
> 赞同：1
> 
> 时间：2013-03-28T19:14:10.207
> 
> 标签：permissions, patch, turtle-graphics, netlogo

我的 netlogo 程序有问题。代码如下：

```
globals[
growth-param
money-size-ratio

]

turtles-own[
  location
  tsize
  bbalance
]

to setup
  ca
  reset-ticks
  ask patches[set pcolor blue]

  create-turtles initial-telemarketers [
    set size 1
    set bbalance 0.0
    setxy random-xcor random-ycor
    set shape "circle"
  ]
  set growth-param 1000
  set money-size-ratio 0.001
end

to go
  ask patches[set pcolor blue]
  sell
  accounting
  observer-updates
  tick
end

to sell

  let territory 10 * sqrt size
  let maxcalls 100 * size
  ask n-of maxcalls patches in-radius territory[
    if pcolor = blue [set pcolor black]
    set bbalance bbalance + 2
  ]

end

to accounting
  let cost size * 50
  ask turtles[
  set bbalance bbalance - cost

  ifelse bbalance < 1
  [die]
  [set size bbalance * growth-param]
  ]

end

to observer-updates

end 
```

简单地说，它应该是有多少电话营销公司互动的模型。它来自 Railsback & Grimm 的建模书。

每次尝试运行时，它都会提供两个我可以看到的问题：在程序 sell 中，它不想将 bbalance 设置为新值，因为它是仅海龟，而 tick 仅是观察者上下文。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:30:39.950

```
globals[

  money-size-ratio

]

turtles-own[
  location
  tsize
  bbalance
  maxsize
]

to setup
  ca
  reset-ticks
  ask patches[set pcolor blue]

  create-turtles initial-telemarketers [
    set size 1
    set bbalance 0.0
    setxy random-xcor random-ycor
    set shape "circle"
    set maxsize 0
  ]

  set money-size-ratio 0.001
end

to go

  ask patches[set pcolor blue]
  ask turtles [sell]
  ask turtles [accounting]  ;; let's ask the turtles to do this
  observer-updates
  tick

end

to sell
  let territory 10 * sqrt size
  let maxcalls 100 * size
  if maxcalls > 40401[
    set maxcalls 40401;keeps maxcalls within acceptable bounds
  ]
  let coun 0
  ask n-of maxcalls patches in-radius territory[
    if pcolor = blue[
      set pcolor black
      set coun coun + 2
    ] 
  ]
  set bbalance bbalance + coun

end

to accounting
  let cost size * 50 ;; size is a turtle variable so if you want to access it this way, let's make the whole thing
                     ;;  a turtle procedure.  That's what was confusing Netlogo about the tick command 

    set bbalance bbalance - cost

    if bbalance > growth-param
     [set size size + (bbalance - growth-param) * money-size-ratio
      set bbalance growth-param
       ]
    if size > maxsize[
      set maxsize size
    ]

    if bbalance <= 0
    [show (word "dead. Maximum size: " maxsize)
      die

      ]

    if size = 0
    [show (word "dead. Maximum size: " maxsize)
      die

      ]

end

to observer-updates

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:06:23.040

`sell`是一个海龟过程（因为它使用海龟原语，例如`size`和`in-radius`）。但是`go`是一个观察者程序。你不能直接从观察者过程中调用海龟过程；您需要指定要运行它的海龟。在里面`go`，我想你可能打算写`ask turtles [ sell ]`而不是仅仅`sell`。

# opencv - cvCalibrateCamera2 返回包含 NaN 元素的矩阵

> ID：15690264
> 
> 赞同：2
> 
> 时间：2013-03-28T19:14:13.473
> 
> 标签：opencv, matrix, nan, camera-calibration

我正在尝试使用 cvCalibrateCamera2() 进行相机校准，但遇到了一个问题：返回的 intrinsic_matrix 和失真系数包含无效的浮点数 (=NaN)。

这就是我正在做的（休息负责完全离开这个）：

```
image_points     =cvCreateMat(board_total,2,CV_32FC1); if (!image_points) break;
object_points    =cvCreateMat(board_total,3,CV_32FC1); if (!object_points) break;
point_counts     =cvCreateMat(1,1,CV_32SC1);           if (!point_counts) break;
intrinsic_matrix =cvCreateMat(3,3,CV_32FC1);           if (!intrinsic_matrix) break;
corners          =new CvPoint2D32f[board_total];       if (!corners) break;
distortion_coeffs=cvCreateMat(4,1,CV_32FC1);           if (!distortion_coeffs) break;

int found = cvFindChessboardCorners(gray_image, board_sz, corners,corner_count,CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS );
if (found==0) break; 
```

直到这里都很好，“gray_image”是我的输入图像，“corners”包含正确的棋盘角坐标

```
cvFindCornerSubPix(gray_image, corners,*corner_count, cvSize(11,11),cvSize(-1,-1), cvTermCriteria(CV_TERMCRIT_EPS+CV_TERMCRIT_ITER, 30, 0.1 ));
for (j=0; j<board_total; j++)
{
    CV_MAT_ELEM(*image_points, float,0,0) = corners[j].x;
    CV_MAT_ELEM(*image_points, float,0,1) = corners[j].y;
    CV_MAT_ELEM(*object_points,float,0,0) = (float) j/board_w;
    CV_MAT_ELEM(*object_points,float,0,1) = (float) (j%board_w);
    CV_MAT_ELEM(*object_points,float,0,2) = 0.0f;
}
CV_MAT_ELEM(*point_counts, int,0,0) = board_total;

CV_MAT_ELEM( *intrinsic_matrix, float, 0, 0 ) = 1.0f;
CV_MAT_ELEM( *intrinsic_matrix, float, 1, 1 ) = 1.0f;
cvCalibrateCamera2(object_points,image_points,point_counts,cvGetSize( gray_image ),intrinsic_matrix,distortion_coeffs,NULL,NULL,0); 
```

这里 cvCalibrateCamera2() 似乎工作并且不会导致异常，但是当我尝试从中获取结果时，所有浮点“d”都是无效的：

```
float d;
for (i=0; i<3; i++)
 for (j=0; j<3; j++)
{
   d=CV_MAT_ELEM(*intrinsic_matrix,float,i,j);
   calib_data->intrinsic[i][j]=(int)OAPC_ROUND(d*1000000,0);
}
for (i=0; i<4; i++)
{
   d=CV_MAT_ELEM(*distortion_coeffs,float,i,0);
   calib_data->distortion[i]=(int)OAPC_ROUND(d*100000000,0);
} 
```

那么这里有什么问题呢？

# ruby - 使用 Nokogiri 解析 XML 文件以确定路径（Ruby）

> ID：15690269
> 
> 赞同：1
> 
> 时间：2013-03-28T19:14:25.247
> 
> 标签：ruby, xpath, xml-parsing, nokogiri

我的代码应该“猜测”位于我的 XML 文件中相关文本节点之前的路径。在这种情况下，相关意味着：嵌套在重复出现的产品/人/某物标签内的文本节点，但不是在它之外使用的文本节点。

这段代码：

```
 @doc, items = Nokogiri.XML(@file), []

    path = []
    @doc.traverse do |node|
      if node.class.to_s == "Nokogiri::XML::Element"
        is_path_element = false
        node.children.each do |child|
          is_path_element = true if child.class.to_s == "Nokogiri::XML::Element"
        end
        path.push(node.name) if is_path_element == true && !path.include?(node.name)
      end
    end
    final_path = "/"+path.reverse.join("/") 
```

适用于简单的 XML 文件，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>Some XML file title</title>
    <description>Some XML file description</description>
    <item>
      <title>Some product title</title>
      <brand>Some product brand</brand>
    </item>
    <item>
      <title>Some product title</title>
      <brand>Some product brand</brand>
    </item>
  </channel>
</rss>

puts final_path # => "/rss/channel/item" 
```

但是当它变得更加复杂时，我应该如何应对挑战？例如这个：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>Some XML file title</title>
    <description>Some XML file description</description>
    <item>
      <titles>
        <title>Some product title</title>
      </titles>
      <brands>
        <brand>Some product brand</brand>
      </brands>
    </item>
    <item>
      <titles>
        <title>Some product title</title>
      </titles>
      <brands>
        <brand>Some product brand</brand>
      </brands>
    </item>
  </channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:42:38.493

如果您正在寻找 XML 中最深的“父”路径的列表，那么查看它的方法不止一种。

尽管我认为可以调整您自己的代码以实现相同的输出，但我确信使用 xpath 可以实现相同的目标。我的动机是让我的 XML 技能不生锈（还没有使用 Nokogiri，但我很快就需要专业地这样做）。因此，这里是如何使用 xpath 获取在其下方只有一个子级别的所有父路径：

```
xml.xpath('//*[child::* and not(child::*/*)]').each { |node| puts node.path } 
```

第二个示例文件的输出是：

```
/rss/channel/item[1]/titles
/rss/channel/item[1]/brands
/rss/channel/item[2]/titles
/rss/channel/item[2]/brands 
```

. . . 如果你取出这个列表并 gsub 出索引，然后使数组唯一，那么这看起来很像你的循环的输出。. .

```
paths = xml.xpath('//*[child::* and not(child::*/*)]').map { |node| node.path }
paths.map! { |path| path.gsub(/\[[0-9]+\]/,'') }.uniq!
=> ["/rss/channel/item/titles", "/rss/channel/item/brands"] 
```

或者在一行中：

```
paths = xml.xpath('//*[* and not(*/*)]').map { |node| node.path.gsub(/\[[0-9]+\]/,'') }.uniq
=> ["/rss/channel/item/titles", "/rss/channel/item/brands"] 
```

# objective-c - 为什么 Cocoa API 如此冗长？

> ID：15690270
> 
> 赞同：3
> 
> 时间：2013-03-28T19:14:26.647
> 
> 标签：objective-c, cocoa-touch, cocoa

事物的命名似乎有很多冗余。一个非常简单的例子：

```
+ (UIColor *)blackColor;      // 0.0 white 
+ (UIColor *)darkGrayColor;   // 0.333 white 
+ (UIColor *)lightGrayColor;  // 0.667 white 
```

...导致代码如下：

```
UIColor *c = [UIColor blackColor]; 
```

对于初学者，为什么`blackColor`不简单`black`？因为objective-c是强类型的，所以总是很明显它是黑色*的，因此会出现类名。*以及这里的事实，这些是发送到类的静态方法。

# asp.net - 使用 jquery.load 将对象数组传递给 MVC 3

> ID：15690272
> 
> 赞同：2
> 
> 时间：2013-03-28T19:14:35.733
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, jquery

我在尝试将对象数组传递给 MVC3 控制器/动作时遇到了问题。我在网上找到了几个讨论（包括在 SO 上），但没有一个能解决我的问题。这是我正在使用的内容：

```
public class Person
{
   public Guid TempId { get; set; }
   public bool ReadOnly { get; set; }
   [Required(ErrorMessage = "Required")]
   public string Name { get; set; }
} 
```

这是我的控制器操作（目前，我尝试了很多变体）的样子：

```
[HttpGet]
public ActionResult AddPerson(List<Person> people)
{
    if (null != people)
    {
        foreach (var person in people)
        {
           Debug.WriteLine(person );
        }
     }
    return View();
} 
```

我已经尝试了多种方式来构建我的 jquery 以便号召性用语，但到目前为止，我唯一能做的就是如果我手动将对象数组编码到 URL 字符串中，如下所示：

```
var url = "AddPerson?people%5B0%5D.TempId=9FBC6EF8-67DB-4AB4-8FCE-5DFC0F2A69F9&people%5B0%5D.ReadOnly=true&people%5B0%5D.Name=Bob+Jones&people%5B1%5D.TempId=9FBC6EF8-67DB-4AB4-8FCE-5DFC0F2A6333&people%5B1%5D.ReadOnly=false&people%5B1%5D.Name=Mary+Jones #peopleDiv";
$("#peopleDiv").load(url, updatePeopleDiv); 
```

是的`people%5B1%5D.ReadOnly=false`编码版本`people[1].ReadOnly=false`

我尝试过其他方法，例如：

```
var url = "AddPerson #peopleDiv";
var people = [];
people.push({'[0].TempId': '<valid guid>', '[0].ReadOnly': true, '[0].Name': 'Bob Jones' });
$("#peopleDiv").load(url, people, updatePeopleDiv); // nope
$("#peopleDiv").load(url, $.param(people, false), updatePeopleDiv); // nada
$("#peopleDiv").load(url, $.param(people, true), updatePeopleDiv); // nyet 
```

我还尝试通过将 people[] 包装在一个对象中来修改上述内容：`var data = { arr: people }`然后尝试以`data`各种方式发送该对象。所有方式（除了我通过手动编码工作的方式）都会导致以下三种结果之一：

1.  没有调用控制器动作（它的定义方式和我的调用方式不匹配）
2.  调用了控制器操作，但参数为空
3.  调用了控制器操作，并且数组中的对象元素数量正确，但是这些对象的实际值都没有被传输（所以我有一个对象数组都具有默认值）。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:24:25.603

只需将 contentType 设置为`'application/json'`并使用`JSON.stringify()`.

```
$.ajax({
            contentType: 'application/json',
            type: 'POST',
            url: '/Controller/AddPerson',
            data: JSON.stringify({
                people: [
                    {
                      ReadOnly: false,
                      Name: 'Cristi'
                    },
                    {
                      ReadOnly: true,
                      Name: 'Matt'
                    }
                ]
            }),
            success: function (data) {
                $("#peopleDiv").html(data);
            },
            error: function () {
                console.trace();
            }
        }); 
```

此外，添加/编辑/删除请求应通过 POST 完成。

```
[HttpPost]
public ActionResult AddPerson(List<Person> people)
{
    if (null != people)
    {
        foreach (var person in people)
        {
           Debug.WriteLine(person );
        }
     }
    return PartialView("viewname");
} 
```

# gtk - 在应用程序之外执行复制/粘贴时出现 Gtk+ 错误

> ID：15690277
> 
> 赞同：0
> 
> 时间：2013-03-28T19:14:49.963
> 
> 标签：gtk, clipboard, gdk

我对 Gtk 还很陌生。我正在开发一个 GUI 应用程序。一切正常，直到我按 Ctrl + C、Ctrl + V 复制/粘贴（在 Excel 等外部应用程序中）。我正在使用带有 Mingw 32 位编译器的 Windows 8 64 位。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T11:37:36.597

我设法通过引发无限递归来遇到相同的断言错误（我的技巧是在 paste_clipboard 信号处理程序中调用 paste_clipboard() - 很有趣！）。可能您通过更改剪贴板来响应剪贴板更改？

# html-lists - il 中的最后一项到大

> ID：15690278
> 
> 赞同：0
> 
> 时间：2013-03-28T19:14:50.463
> 
> 标签：html-lists

您好，我正在尝试制作菜单并制作 2 行，每行 4 个按钮。我的问题是每行中的列表项都比其他所有项都高。我试图寻找答案，但我不确定如何用词来找到我正在寻找的答案。

我已经尝试在#menu li# 中为每个尺寸指定一个 { 部分的css，但它并没有明显的影响。任何输入表示赞赏。

我的代码如下。

```
<html>
<head>
<title>xxxxxxxx</title>
<style type="text/css">
body {
background-color: black;
margin: 0;
}
#menu {
width: 850px;
list-style: none;
margin: 0;
padding: 0;
}
#menu2 {
width: 850px;
list-style: none;
margin: 0;
padding: 0;
}
#menu li {
float: left;
border: 2px solid yellow;
text-indent: -9999px;
overflow: hidden;
}
#menu2 li {
float: left;
border: 2px solid yellow;
text-indent: -9999px;
overflow: hidden;
}
#menu li a {
display: block;
width: 200px;
height: 50px;
}
#menu2 li a {
display: block;
width: 200px;
height: 50px;
}
#menu li#homepage a {
background: url(New_Homepage.JPG) no-repeat;
}
#menu2 li#newsletter a {
background: url(New_Newsletter.JPG) no-repeat;
}
#menu li#homepage a:hover {
background: url(New_Homepage_knife.JPG) no-repeat;
}
#menu2 li#newsletter a:hover {
background: url(New_Newsletter_knife.JPG) no-repeat;
}
#menu li#welcome a {
background: url(New_Welcome.JPG) no-repeat;
}
#menu2 li#phonebook a {
background: url(New_Phonebook.JPG) no-repeat;
}
#menu li#welcome a:hover {
background: url(New_Welcome_knife.JPG) no-repeat;
}
#menu2 li#phonebook a:hover {
background: url(New_Phonebook_knife.JPG) no-repeat;
}
#menu li#leadership a {
background: url(New_Leadership.JPG) no-repeat;
}
#menu2 li#ombudsman a {
background: url(New_Ombudsman.JPG) no-repeat;
}
#menu li#leadership a:hover {
background: url(New_Leadership_knife.JPG) no-repeat;
}
#menu2 li#ombudsman a:hover {
background: url(New_Ombudsman_knife.JPG) no-repeat;
}
#menu li#history a {
background: url(New_History.JPG) no-repeat;
}
#menu2 li#pao a {
background: url(New_PAO.JPG) no-repeat;
}
#menu li#history a:hover {
background: url(New_History_knife.JPG) no-repeat;
}
#menu2 li#pao a:hover {
background: url(New_PAO_knife.JPG) no-repeat;
}
</style>
</head>
<body>
<div style="text-align: center;"><img src="POSTER.JPG" WIDTH="100%" HEIGHT="90%"></div>
<div>   
<ul id="menu">
<li id="homepage"><a href="homepage.htm">HOMEPAGE</a></li>
<li id="welcome"><a href="Welcome.htm">WELCOME</a></li>
<li id="leadership"><a href="leadership.htm">LEADERSHIP</a></li>
<li id="history"><a href="history.htm">HISTORY</a></li>
<br class=clear>
</ul>
<ul id="menu2">
<li id="newsletter"><a href="newsletter.htm">NEWSLETTER</a></li>
<li id="phonebook"><a href="phonebook.htm">PHONE BOOK</a></li>
<li id="ombudsman"><a href="ombudsman.htm">OMBUDSMAN</a></li>
<li id="pao"><a href="pao.htm">PAO</a></li>
<br class=clear>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:43:28.133

"list item in each row is taller then all the rest."

by looking at your css, your list item should be all the same height because you specify a height in your a tag inside your li tag

first of all you dont need two id #menu and #menu2, because they have the same properties you should change it to class, also u dont need "`<Br />`" before `</ul>`

HTML :

```
 <ul class="menustyle" id="menu"> 
       <li id="homepage"><a href="homepage.htm">HOMEPAGE</a></li> 
       <li id="welcome"><a href="Welcome.htm">WELCOME</a></li> 
       <li id="leadership"><a href="leadership.htm">LEADERSHIP</a></li> 
       <li id="history"><a href="history.htm">HISTORY</a></li> 
    </ul> 
    <ul class="menustyle" id="menu2"> 
       <li id="newsletter"><a href="newsletter.htm">NEWSLETTER</a></li> 
       <li id="phonebook"><a href="phonebook.htm">PHONE BOOK</a></li> 
       <li id="ombudsman"><a href="ombudsman.htm">OMBUDSMAN</a></li> 
       <li id="pao"><a href="pao.htm">PAO</a></li> 
    </ul> 
```

CSS :

```
 .menustyle {
      clear:both;
      width: 850px;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .menustyle li {
      float: left;
      border: 2px solid yellow;
      text-indent: -9999px;
      overflow: hidden;
      height: 50px;
    }   
    .menustyle  li a {
      display: block;
      width: 200px;
      height: 50px;
    }

    /*for each id, i just make this for example*/
.menustyle li a{ background:url('http://www.braford.org.au/MidgeeBrafords/images/button_midgee_history_up.gif'); } 
```

is this what you want: [http://jsfiddle.net/EKycL/](http://jsfiddle.net/EKycL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:43:31.137

The problem is:

```
<br class=clear>
</ul> 
```

You need to put that break outside of the list. Like this:

```
</ul>
<br class=clear> 
```

# ios - MPMoviePlayerViewController 比例错误的图标

> ID：15690281
> 
> 赞同：1
> 
> 时间：2013-03-28T19:14:55.243
> 
> 标签：ios

我正在使用 MPMoviePlayerViewController，当第一次单击缩放按钮时，图标不会改变，使图标显示为反向。

此错误发生在模拟器和设备上。

我认为这是一个苹果错误我创建了一个小项目来重现该错误，可以在[这里下载](https://www.dropbox.com/s/fd9f6sr0qedlqiy/testeMoviePlayer.zip)

![在此处输入图像描述](../Images/d3643812c7a030659aa2ad79bc1cf52f.png)

我用来显示视频的代码：

```
MPMoviePlayerViewController *moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL fileURLWithPath:theFilePath]]; 
[self presentMoviePlayerViewControllerAnimated:moviePlayerController]; 
```

# sql - 在不声明表的情况下连接同一张表上的列

> ID：15690282
> 
> 赞同：-3
> 
> 时间：2013-03-28T19:14:55.667
> 
> 标签：sql, sql-server, tsql

我有一个复杂的查询来填充数据，之后我必须加入表中的数据以获得正确的结果。

如何消除连接，这样我就不必定义表两次。

连接查询是 -

```
 select t1.acc_no, t1.group_id, t1.remdt from @tbl t1
 inner join ( 
     select group_id, MAX(row_num) as max_row from @tbl group by group_id) t2 
   on t1.group_id= t2.group_id and t1.row_num=t2.max_row 
```

现在在上面的查询中我必须贴花@tbl 临时表。

如何获得相同的结果，这样我就不必使用连接，也不必两次编写相同的查询。

我的@tbl 使用 sql 填充 -

```
 select  ReminderDt as 'rem dt',  m.Group_Id, m.AccountNumber,
row_number() over (partition by group_id order by reminderdt asc) as seqnum
from ACE_AccsLevelTran t join ACE_AccsLevelMaster m on t.MasterAccNumber=m.AccountNumber where m.AssignedUser=7 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:20:08.187

您可以使用窗口函数执行此操作`row_number()`：

```
select  t.acc_no, t.group_id, t.remdt
from (select t.*, ROW_NUMBER() over (partition by group_id order by row_num desc) as seqnum
      from @tbl t
     ) t
where seqnum = 1; 
```

# jquery - 避免在 jQuery 回调中重复选择器

> ID：15690284
> 
> 赞同：0
> 
> 时间：2013-03-28T19:15:00.917
> 
> 标签：jquery

我正在编写一个小脚本，我注意到一些有重复元素的东西。在这种情况下`$('#theSelect1 ..')`重复，我想避免它。

```
$('#theSelect1').change(function(){
        //console.log ($(this));
        console.log(  
        $("#theSelect1 option:selected").text() // is there a way to change #theSelect1 to be $(this) inside this statement?  I try not to repeat things.  
        );
}) 
```

这是 HTML

```
 <select id="theSelect1">
            <option value="foo" selected="selected">1</option>
            <option value="bar">2</option>
            <option value="foobar">3</option> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:17:48.233

您可以执行以下操作：

```
$(this).children("option:selected").text(); 
```

这将查看与您的选择器匹配的当前元素的子元素。这仅查看第一级后代，因此如果您想要任何后代，请使用以下内容：

```
$(this).find("option:selected").text(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:17:48.753

你可以这样做：

```
var selectOne = $('#theSelect1').change(function(){
                     selectOne.find('option:selected').text(); 
                 }); 
```

# php - LEFT JOIN 关联返回未知列

> ID：15690285
> 
> 赞同：1
> 
> 时间：2013-03-28T19:15:01.167
> 
> 标签：php, mysql, codeigniter, phpactiverecord

我正在使用 PHPActiveRecord 和 CodeIgniter。我正在尝试创建一个博客 CMS，一个博客有很多类别，并且它引用另一个名为 blogrefs 的表。所以基本上

博客 => blogrefs => blogcats

blogrefs 通过 blogrefs.blog_id 引用博客

blogrefs 通过 blogrefs.blogcat_id 引用 blogcats

```
 function get_blogs($params = array()){

    $CI =& get_instance();

    $joins  = 'LEFT JOIN blogrefs ON blogs.id = blogrefs.blog_id';
    $joins  .= 'LEFT JOIN blogcats ON blogrefs.blogcat_id = blogcats.id';
    $category = (isset($params['category']))?$params['category']:'';
    $keyword = (isset($params['keyword']))?$params['keyword']:'';
    $status = (!isset($params['status']) || $params['status'] == '')?'':$params['status'];
    $order_by = (isset($params['order_by']))?$params['order_by']:'created_on';
    $direction = (isset($params['direction']))?$params['direction']:'DESC';
    $limit = (isset($params['limit']))?$params['limit']:'';
    $offset = (isset($params['offset']))?$params['offset']:'';
    $st = '';
    if($status == ''){
        $st = '!';
    }

        if(!empty($category))
        {
            $conditions = array(
                "((blogcats.id = ?) OR (blogcats.parent_id = ?))
                 AND blogs.status $st= ?
                 AND (blogs.title LIKE '%$keyword%' OR blogs.content LIKE '%$keyword%')",$category,$category,$status
            );

        }else{
            $conditions = array(
                "blogs.status $st= ?
                 AND (blogs.title LIKE '%$keyword%' OR blogs.content LIKE '%$keyword%')",$status
            );
        }

    $result = Blog::find('all',array(
        'include'       => array('blogcat','blogref','user'),
        'joins'         => $joins,
        'conditions'    => $conditions,
        'limit'         => $limit,
        'offset'        => $offset,
        'order'         => "$order_by $direction",
        'group'         => 'blogs.id'
    ));

    $count =  Blog::find('all',array(
        'conditions'    => $conditions
    ));

    $object = new stdClass;
    $object->posts = $result;
    $object->total = count($count);
    return $object;

} 
```

一切正常，不仅我使用

((blogcats.id = ?) 或 (blogcats.parent_id = ?))

从特定类别中获取博客。任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:22:00.517

我觉得这不是很清楚。为什么不使用模型和 CI 的 Active Record 类？（[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)），比如

```
 $this->db->where('blogrefs.blogcat_id', $catid);
    $this->db->join('blogrefs', 'blogs.id = blogrefs.blog_id');
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:06:53.877

您的错误是在定义连接的第一部分的末尾缺少空格。

```
$joins  = 'LEFT JOIN blogrefs ON blogs.id = blogrefs.blog_id';
$joins  .= 'LEFT JOIN blogcats ON blogrefs.blogcat_id = blogcats.id'; 
```

评估为：

```
LEFT JOIN blogrefs ON blogs.id = blogrefs.blog_idLEFT JOIN blogcats ON blogrefs.blogcat_id = blogcats.id 
```

您会注意到第一个连接因查找名为“blog_idLEFT”的列而搞砸了，而第二个连接现在将是一个内连接，而不是一个外左连接。

我建议要么接受 davedriesmans 的建议，要么找到某种方式来输出您生成的最终 mySQL 查询。（或两者）

# android - android：ActionBar之外的Icsspinner不显示下拉

> ID：15690288
> 
> 赞同：1
> 
> 时间：2013-03-28T19:15:13.117
> 
> 标签：android, actionbarsherlock

我有一个完美运行的微调器，并且只填充了具有 API 15 和 16 的 AVD 的数据。但是对于 API 级别 8 和 10，它没有显示下拉列表。我正在使用 ActionBarSherlock。

```
 String[] categoryFixed = { "Mortgage/Rent", "Utilities",
            "Car Payments", "Insurance", "Misc" };       

         IcsSpinner category =(IcsSpinner) findViewById(R.id.spinner1);
         ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.layout.sherlock_spinner_item, categoryFixed);
        adapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

        category.setAdapter(adapter); 
```

这是我的微调器

```
 <Spinner
            android:id="@+id/spinner1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.4"
            /> 
```

我在这里有什么特别想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:31:59.137

我在 Android 2.2 上测试了你的代码，它运行良好。确保字符串数组位于`values`目录，与`values-v11`，或`values-v14`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T14:03:36.513

利用

```
<com.actionbarsherlock.internal.widget.IcsSpinner 
```

代替

```
<Spinner 
```

在 xml 文件中。

# php - PHP 将 Ascii 转换为八进制

> ID：15690290
> 
> 赞同：0
> 
> 时间：2013-03-28T19:15:21.450
> 
> 标签：php

我正在尝试将一串 ASCII 字符转换为等效的八进制字符，但我终其一生都无法弄清楚。有谁知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:16:57.890

我只会使用`ord`and `base_convert`。用于`ord`获取十进制的 ascii 值，然后`base_convert`使其变为八进制。

```
$oct = base_convert(ord($char), 10, 8); 
```

这是您以函数形式寻求的内容：

```
function string_to_octal($str)
{
    $chars = str_split($str);
    $rtn = "";

    foreach ($chars as $c) { $rtn .= str_pad(base_convert(ord($c), 10, 8), 3, 0, STR_PAD_LEFT); }

    return $rtn;
} 
```

注意：`str_pad`包括在内，因为结果并不总是一个 3 字节的块。
上述代码[的](http://ideone.com/ub1lPx)示例。

**编辑：**正如@brbcoding 指出的那样，您可以使用`decoct($c)`.`base_convert($c, 10, 8)`

# php - 用于实时 Web 应用程序的数据库（低延迟响应）

> ID：15690291
> 
> 赞同：-6
> 
> 时间：2013-03-28T19:15:23.470
> 
> 标签：php, mysql

该应用程序是需要查询速度（选择、更新、插入）的实时站点 每次查询的低延迟必须小于 200 毫秒

好吧，每个查询平均有 98%。完成作业查询的时间少于 0.001-0.005 秒。

问题有时大约每小时 5 次，它们可能需要 1 秒，可能是 5 秒，我不知道问题的真正原因

我发现减少问题的方法是将其从 INNODB 移动到 MEMORY，但有时仍然是一个问题，重要的是当系统崩溃时需要恢复。

```
Example query in sometime query more than 1 secound

# Time: 130328 20:27:40
# User@Host: ferge572w[ferge572w] @ localhost []
# Query_time: 1.339712  Lock_time: 0.000026 Rows_sent: 0  Rows_examined: 1
SET timestamp=1364477260;
UPDATE log_product SET credit=credit+1 WHERE id_product='149721921' and id_user='2029275' LIMIT 1;

table index: id_product, id_user
No.row: 33,491   table size: 5Mb

# Time: 130329  7:25:37
# User@Host: ferge572w[ferge572w] @ localhost []
# Query_time: 1.439856  Lock_time: 0.000031 Rows_sent: 0  Rows_examined: 1
SET timestamp=1364516737;
UPDATE product SET lastuser='hello',picperson='1',lastid='2030505',country='thailand',price=price+0.01,time=DATE_ADD(time, INTERVAL 3 SECOND) WHERE id='349721227' LIMIT 1;

table index: id
No.row: 35   table size: 2.1Mb 
```

我的应用程序使用 PHP 和 MYSQL

**问题是为什么有时查询可能需要长达 5 秒的时间？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:20:34.230

你提供的细节很少。我将在这里提供一个尽可能简单的答案：

# **使用固态硬盘**

如果您还没有使用 SSD，那可能就是问题所在。传统的硬盘驱动器在随机 I/O 方面很糟糕，有时会因为太忙而无法及时处理请求而陷入困境。当 I/O 周期用完且性能跌落悬崖时，MySQL 似乎陷入了绝对的恐慌。

# c++ - 如何欺骗 QtCreator 关于宏定义的存在

> ID：15690294
> 
> 赞同：1
> 
> 时间：2013-03-28T19:15:36.927
> 
> 标签：c++, qt-creator, qmake, build-system

在 C++/Qt 项目中使用一些花哨的 C++11 功能时，QtCreator 的代码模型存在一些问题。就我而言：模板化别名，如下所示：

```
template<class T> using Ptr = QSharedPointer<T>;

QSharedPointer<SomeClass> myPtr = ...;
myPtr->...                               // will complete

Ptr<SomeClass> myPtr = ...;              // not even parsed as a type...
myPtr->...                               // won't complete 
```

所以我想*在 QtCreator 解析文件时*`Ptr`只对我的定义进行宏破解，但当然*在编译器解析文件时*使用漂亮的模板化别名语法。就像是：

 **```
#ifdef QT_CREATOR
# define Ptr QSharedPointer
#else
template<class T> using Ptr = QSharedPointer<T>;
#endif 
```

使用 a 将宏定义放在 .pro 文件中是`DEFINES += -D...`行不通的，因为 QtCreator 足够聪明，可以在代码模型中使用它们（这当然很好）。此外，`QMAKE_CXXFLAGS += -D...`正在正确解析（可悲）。

我如何“欺骗” QtCreator 定义了一个宏，但是（对于编译器）没有（或相反）？

PS：我使用的是最新版本（2.7），也试过2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:28:31.643

The following worked to trick QtCreator about a macro definition.

In the .pro project file, I added the following line:

```
QMAKE_CXX = $${QMAKE_CXX} -D_IS_BEING_COMPILED 
```

This means, the macro `_IS_BEING_COMPILED` will be defined. But QtCreator (at least version 2.7) doesn't parse the contents of `QMAKE_CXX` for flags (I think, for a good reason). So: QtCreator doesn't see this macro, but when compiling, it's there. Thus, a preprocessor branch like this will do the job:

```
#ifdef _IS_BEING_COMPILED
template<class T> using Ptr = QSharedPointer<T>;
#else
# define Ptr QSharedPointer
# error `Ptr` is a macro, but it should not!
#endif 
```

Now, QtCreator uses the macro workaround to introduce the alias, which isn't perfect but since it's only the IDE which is hacked and not the code base itself, this is OK. QtCreator will parse instances of `Ptr` now and also complete members.**

# jquery - 数据表警告请求的未知参数

> ID：15690297
> 
> 赞同：2
> 
> 时间：2013-03-28T19:15:55.700
> 
> 标签：jquery, jsf, warnings, jquery-datatables

首先，我想说我搜索并探索了有关此问题的其他线程，但找不到我的问题的答案。我使用 ah:datatable，它是通过 jquery 数据表扩展的。只要表格中有数据，数据就会正确显示。一旦通过支持 bean 从数据库获取数据的 ArrayList 为空，我就会收到此通知。除此之外，在收到通知后，我的所有 JavaScript 功能都会被破坏，因此没有其他 JAvaScirpt 在页面上工作，直到再次成功调用 ArrayList 中的一些数据作为响应。

```
$('#rating-table').dataTable({
"sDom" : 'T<"clear">lfrtip',    
"sDefaultContent" : "",
"bFilter": false,
"bSort" : false}); 
```

...

```
<h:dataTable id="rating-table" width="800px"
value="#{rating.boniHistorieList}" var="r"> 
```

...

```
private List<BoniHistorie> boniHistorieList;
public List<BoniHistorie> getBoniHistorieList() { ...
} 
```

# vb.net - vb.net 数据集关系中的多个表

> ID：15690300
> 
> 赞同：1
> 
> 时间：2013-03-28T19:16:07.600
> 
> 标签：vb.net

不知道这是否可能，但是...我有 3 个表： CustomerTable OrderHeaderTable OrderDetailTable

这些关系是 CustomerTable.CustomerNumber 到 OrderHeaderTable.CustomerNumber、OrderHeaderTable.OrderNumber 到 OrderDetail.OrderNumber。

我正在使用 DevExpress XtraGrid 来显示信息，使用 SQL 存储过程来捕获数据。

**我希望/需要能够在 OrderHeader 和 OrderDetail 之间形成关系以在网格中显示，但我不确定如何在我迄今为止使用的代码中进行这项工作。**

这是VB代码：

```
 Dim bsOrders As New BindingSource
    Dim dsDataSetOrders As New DataSet
    Dim daDataAdapter As New SqlDataAdapter

    Using cmd As New SqlClient.SqlCommand("spViewOrders", GetOpenConnection) With {.CommandType = CommandType.StoredProcedure}
        With cmd.Parameters
            .Add(New SqlParameter("@Action", SqlDbType.Int)).Value = 44
            .Add(New SqlParameter("@Exists", SqlDbType.Int)).Direction = ParameterDirection.InputOutput
        End With

        daDataAdapter.SelectCommand = cmd
        daDataAdapter.Fill(dsDataSetOrders, "Orders")
        dsDataSetOrders.Relations.Add(New DataRelation("OrderHeader", dsDataSetOrders.Tables(0).Columns("Customer #"), _
                                                       dsDataSetOrders.Tables(1).Columns("Customer #")))

        bsOrders.DataSource = dsDataSetOrders
        bsOrders.DataMember = "Orders"
    End Using

    GridControl1.DataSource = bsOrders
    GridView1.BestFitColumns() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:28:55.223

spViewOrders 是否从 OrderHeader 和 OrderDetail 中提取您想要的数据？如果是这样，您只需要添加另一个关系。如果没有，请将所需数据拉入 DataTable，将其添加到 dsDataSetOrders.Tables，然后添加到关系中。

# php - 如何让php处理表单中的常量

> ID：15690301
> 
> 赞同：0
> 
> 时间：2013-03-28T19:16:08.037
> 
> 标签：php

我正在尝试创建一个 PHP 页面，该页面首先读取数据库，然后对其进行更改。我将使用 PHP 表单。

我知道这`<input name=''>`可以让用户输入数据并继续到下一页，但是我如何处理数据库中的现有数据并将其处理到下一页？

我在用：

```
<?php on = mysqli_connect("localhost", "name", "password", "db");
    $drink = mysqli_query($con, "SELECT * FROM Product WHERE P_class='drink'");
        while ($set1 = mysqli_fetch_array($drink))
            {
            $id = $set1['P_id'];
            echo "<form action = 'checkoutprocess' method = 'post'>Product: ".$set1['P_name']."     ";
            echo "In Stock: ".$set1['P_qty']."<br/>";
            echo "Quantity: <input type='text' name='qty'><br/><input type = 'submit' value = 'SUBMIT'/></form>";
            }
        echo "</div>";
        ?> 
```

所以在这里我试图处理`$id`到 checkoutprocess 页面，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:20:06.870

您可以尝试将 ID 作为隐藏元素放入表单...

```
echo '<input type = "hidden" name = "item_id" value = "' . $id . '">'; 
```

在下一页上，查找`$_POST['item_id']`。

附带说明一下，您仍然必须验证服务器上发布的隐藏元素，因为构建一个将发布到您的脚本的表单非常简单，允许我编辑这些隐藏值。

# java - Android JSON API 调用

> ID：15690302
> 
> 赞同：2
> 
> 时间：2013-03-28T19:16:09.327
> 
> 标签：java, android, json, api, callback

我试图找出制作小部件以从公司的 API 中提取数据的最佳方法。它为那里的服务提供监控数据。他们有一个使用 JSON 调用的 API，我需要知道如何开始创建它。我正在寻找构建一个小部件并显示几个不同的数据部分。任何建议、示例代码等都会非常有帮助。

来自其 URL 的 API 回调示例。[https://api.company.com/api/systems?callback=my_method](https://api.company.com/api/systems?callback=my_method)

```
my_method(
[
  {
  "city": "Sebastopol",
  "country": "US",
  "postal_code": "95472",
  "state": "CA",
  "status": "warning",
  "system_name": "Sample Residence",
  "system_public_name": "Sample Residence",
  "timezone": "America/Los_Angeles"
  },
  {
  "city": "Petaluma",
  "country": "US",
  "postal_code": "94954",
  "state": "CA",
  "status": "normal",
  "system_name": "Sample Residence 2",
  "system_public_name": "Residential System",
  "timezone": "America/Los_Angeles"
  }
 ]
) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:23:03.747

我必须设置类似类型的天气网络服务。我使用了 IntentService ResultReciever 模式。我[以此](http://neilgoodman.net/2012/01/01/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-2/)为参考。一旦你实现了它，它就可以很容易地用于任何调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:24:51.593

不清楚您的问题是什么，解析 JSON 或如何构建小部件本身？Android 提供了[关于 Widgets 的良好文档](http://developer.android.com/guide/topics/appwidgets/index.html)，对于解析 json，您可以使用[Gson](http://code.google.com/p/google-gson/)或[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:25:01.423

你的问题不是很准确，所以我的答案不可能。但这里有一些提示：

1 - 首先，您需要从您拥有的 URL 下载 JSON。为此，您应该使用 HttpUrlConnection 之类的类。您将需要在单独的踏板上执行此任务。谷歌有很好的例子：http: [//developer.android.com/training/basics/network-ops/connecting.html](http://developer.android.com/training/basics/network-ops/connecting.html)

2 - 当您收到数据时，它只会是一堆数据。您需要将其转换为您可以轻松操作的东西。不要自己解析 json。相反，找到一个可以为您处理这个问题的好的库。

3 - 然后，您将拥有一个包含所有数据的对象，所以现在您可以填充您的视图！

祝你好运！

# c - 服务器-客户端套接字：freeaddrinfo(3) 放置

> ID：15690303
> 
> 赞同：1
> 
> 时间：2013-03-28T19:16:10.657
> 
> 标签：c, sockets, free, getaddrinfo

我必须在环回接口上测试这个被动 tcp 服务器。Ip 和端口由命令行给出并用`getopt`. 然后它设置并绑定一个 TCP 套接字`getaddrinfo(3)`并开始忙等待。

服务器：

```
#include "server_utils.h"
#define MAX_CONNECTION 10

#define EXIT_ON_ERROR_(s) { fprintf(stderr, s); exit(EXIT_FAILURE); } 

int access_permissions;
int session_status;
int sock_ds, acc_sock_ds;

int main(int argc, char** argv) {
    /*...*/

    int opt, errsv, client_addr_l;
    char *p_string;
    struct sockaddr_in client_addr;
    struct addrinfo hints;
    struct addrinfo *result, *rp;

    int check = 0;
    /*Parsing command line: port-number retrieving*/
    while (( opt = getopt(argc, argv, "p:")) != -1){
        check = 1;
        switch(opt){
            case 'p':
                /* String to unsigned long integer with ushort cast */
                p_string = optarg;
                strtoul(optarg, &optarg, 0); 
                if(*optarg)
                    EXIT_ON_ERROR_("String-integer conversion error\n");
                 break;
            default: /* '?' */
            fprintf(stderr, "Usage: %s -p port_number\n", argv[0]);
            exit(EXIT_FAILURE);
        }
    }
    if(!check){
        fprintf(stderr, "Usage: %s -p port_number\n", argv[0]);
        exit(EXIT_FAILURE);
    } 

    printf("Port number retrieved (%s), server is starting ...\n", p_string);
    memset(&hints, 0, sizeof(struct addrinfo));
    hints.ai_canonname = NULL;
    hints.ai_addr = NULL;
    hints.ai_next = NULL;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_family = AF_INET;
    hints.ai_flags = AI_PASSIVE|AI_NUMERICSERV;

    if(getaddrinfo(NULL, p_string, &hints, &result) != 0)
        /*freeaddrinfo(result); if get funct fails it should not be need*/
        EXIT_ON_ERROR_("Socket creation error!\n");

    for(rp = result; rp != NULL; rp = rp->ai_next){
        sock_ds = socket(rp->ai_family, rp->ai_socktype, rp->ai_protocol);
        if(sock_ds == -1) continue; //try next address

        /*A TCP server should usualy set SO_REUSEADDR option on its listening socket*/
        int optval = 1;                                     
            if( (setsockopt(sock_ds,SOL_SOCKET,SO_REUSEADDR,&optval,sizeof(optval))) == -1 ){
                EXIT_ON_ERROR_("Error on setsockopt call\n");
                freeaddrinfo(result); //???
            } 
        /*See TLPI Section 61.10*/

        if(bind(sock_ds, rp->ai_addr, rp->ai_addrlen) == 0)
            break; //success

        close(sock_ds); //failure, continue
    }
    if(rp == NULL) {
        freeaddrinfo(result); //?
        EXIT_ON_ERROR_("Could not bind socket\n");    
    }
    freeaddrinfo(result);        

    /*Server with passive socket*/
    if(listen(sock_ds, MAX_CONNECTION == -1)){
        fprintf(stderr, "Listen call error: %s\n", strerror(errno));
        exit(EXIT_FAILURE);
    }

    /*Initializing client_addr_l */
    client_addr_l = sizeof( struct sockaddr_in);
    printf("Server is ready. Waiting for client connections.\n"); 

    /*Busy-waiting server*/
    while(1){
    /*...*/
    } 
```

服务器连接每次都是成功的。

客户：

```
#include "client_utils.h"

#define EXIT_ON_ERROR_(s) { fprintf(stderr, s); exit(EXIT_FAILURE); } 

int main(int argc, char *argv[]) {

    int sock_ds, opt, check_p, check_a;
    char * ip, *port;
    struct addrinfo hints;
    struct addrinfo *result, *rp;

    check_p = 0; check_a = 0;
    /*port-number, ip address retrieval*/
    printf("Command line parsing: port-number, ip-address retrieving...\n");
    while ((opt = getopt(argc, argv, "a:p:")) != -1) {

        switch (opt) {
            case 'p':
                /* strtoul only used for string check */
                port = optarg;
                strtoul(optarg, &optarg, 0);
                if (*optarg) 
                    EXIT_ON_ERROR_("Invalid port number string submitted\n");

                check_p = 1;
                break;
           case 'a':
                ip = optarg;
                /*inet_aton only used for string check*/
                if(strcmp(ip, "localhost") != 0 && inet_aton(ip, NULL) == 0)
                    EXIT_ON_ERROR_("Invalid ip address string submitted\n");
                check_a = 1;
                break;
            default: /* '?' */
                fprintf(stderr, "Usage: %s -a ip_address ('localhost' for local server)"
                    " -p port_number\n", argv[0]);
                exit(EXIT_FAILURE);
        }
    }
    if (!check_p || !check_a) {
        fprintf(stderr, "Usage: %s -a ip_address ('localhost' for local server)"
            " -p port_number\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    printf("Command line parsed succesfully: <%s:%s>\n", ip, port);

    /*TCP Socket binding and connection*/
    memset(&hints, 0, sizeof(struct addrinfo));
    hints.ai_next = NULL;
    hints.ai_addr = NULL;
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_NUMERICSERV;

    if(getaddrinfo(ip, port, &hints, &result) != 0){
        /*getaddrinfo(resutl) ??? (same as sever)? */
        EXIT_ON_ERROR_("Socket creation error\n");
    }

    for(rp = result; rp != NULL; rp = rp->ai_next){
        sock_ds = socket(rp->ai_family, rp->ai_socktype, rp->ai_protocol);
        if(sock_ds == -1) 
            continue;

        if(connect(sock_ds, rp->ai_addr, rp->ai_addrlen) != -1)
             break;

        close(sock_ds);
    }

    if(rp == NULL){
       freeaddrinfo(result); //???
        EXIT_ON_ERROR_("Could not connect socket to any address\n");
    }
    freeaddrinfo(result);

    printf("Connection achieved with:%s on port:%s\n", ip, port);   
    /*...*/
} 
```

我对 freeaddrinfo(3) 函数表示怀疑。将它放置在哪里可以安全地进行良好的堆管理？我将它放在套接字创建操作的末尾，并且在致命退出之前处于某种错误状态。我不确切知道 get 操作 malloc 额外空间的方式和内容。有人可以给我澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:00:42.003

您的一些 freeaddrinfo(3) 被错误地放置**在**相应的 EXIT_ON_ERROR_() 之后，但除此之外我没有看到任何问题。

这个想法是 getaddrinfo() 构建一个用于创建套接字的 sockaddr 结构的链接列表：一旦完成，您就不再需要该列表，因此 freeaddrinfo() 完全释放它 - 即，我没有看到任何你的代码有问题。

我错过了你的任何问题吗？

# ios - 以编程方式创建文本字段

> ID：15690308
> 
> 赞同：5
> 
> 时间：2013-03-28T19:16:30.420
> 
> 标签：ios, objective-c

我正在使用 Xcode 4.6.1。我想知道如何在同一个视图控制器上创建各种文本字段，它们之间用一些空格分隔，并以编程方式设置文本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T19:30:19.340

没有测试这段代码，但你的问题很简单，快速的谷歌会给你结果。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //first one
    UITextField *tf = [[UITextField alloc] initWithFrame:CGRectMake(45, 30, 200, 40)];
    tf.textColor = [UIColor colorWithRed:0/256.0 green:84/256.0 blue:129/256.0 alpha:1.0];
    tf.font = [UIFont fontWithName:@"Helvetica-Bold" size:25];
    tf.backgroundColor=[UIColor whiteColor];
    tf.text=@"Hello World";

    //second one
    UITextField *tf1 = [[UITextField alloc] initWithFrame:CGRectMake(45, tf.frame.origin.y+75, 200, 40)];
    tf1.textColor = [UIColor colorWithRed:0/256.0 green:84/256.0 blue:129/256.0 alpha:1.0];
    tf1.font = [UIFont fontWithName:@"Helvetica-Bold" size:25];
    tf1.backgroundColor=[UIColor whiteColor];
    tf1.text=@"second field";

    //and so on adjust your view size according to your needs
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(100, 200, 400, 400)];
    [view addSubview:tf];
    [view addSubview:tf1];

    [self.view addSubview:view];

} 
```

# javascript - Highcharts 中的 Highslide 弹出窗口未正确显示

> ID：15690311
> 
> 赞同：0
> 
> 时间：2013-03-28T19:16:40.187
> 
> 标签：javascript, jquery, highcharts, highslide

在此示例中单击数据点时，会出现弹出窗口，但它一直在角落，并且大小不正确。任何人都可以看到任何直接的问题吗？

实时代码在这里[http://goo.gl/q8sfH](http://goo.gl/q8sfH)

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>
<!-- Additional files for the Highslide popup effect -->
<script type="text/javascript" src="http://www.highcharts.com/highslide/highslide-full.min.js"></script>
<script type="text/javascript" src="http://www.highcharts.com/highslide/highslide.config.js" charset="utf-8"></script>
<link rel="stylesheet" type="text/css" href="http://www.highcharts.com/highslide/highslide.css" />

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
$(function () {
        $('#container').highcharts({
            chart: {
                type: 'scatter',
                zoomType: 'xy'
            },
            title: {
                text: 'Companies'
            },
            subtitle: {
                text: 'data.com proprietary professional'
            },
            xAxis: {
                title: {
                    enabled: true,
                    text: 'Future Outlook'
                },
                startOnTick: true,
                endOnTick: true,
                showLastLabel: true
            },
            yAxis: {
                title: {
                    text: 'Current Quarter'
                },
                    labels: {
        formatter: function() {
            return this.value + ' ';
        }
    },

            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                backgroundColor: '#FFFFFF',
                borderWidth: 1
            },
            plotOptions: {
                scatter: {
                    marker: {
                        radius: 5,
                        states: {
                            hover: {
                                enabled: true,
                                lineColor: 'rgb(100,100,100)'
                            }
                        }
                    },
                    states: {
                        hover: {
                            marker: {
                                enabled: true
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<b>{series.name}</b><br>',
                        pointFormat: '{point.x} cm, {point.y} kg'
                    },

                cursor: 'pointer',
                events: {
                            click: function() {
                                hs.htmlExpand(null, {
                                    pageOrigin: {
                                        x: this.pageX,
                                        y: this.pageY
                                    },
  //                                  headingText: this.series.name,
                                    maincontentText: Highcharts.dateFormat('%A, %b %e, %Y', this.x) +':<br/> '+
                                        this.y +' visits',
                                    width: 200
                                });
                            }
                }

                }
            },

                    series: [{
                    name: 'Nasdaq',
                    color: 'red',
            data: [
            { y: 1,x:4,ticker:'KORS'}, {y: 5,x:2,ticker:'LULU'}, {x:0,y:0,ticker:'ZNGA'}, {x:.4,y:1,ticker:'JCP'}, {x:.6,y:2.5,ticker:'DECK'}

            ]},{name:'SP',color:'green',data:[
        {x:6,y:6,ticker:'lulu'},{x:10,y:10,ticker:'GPS'},{x:7,y:6.6,ticker:'FB'}
        ]},{name:'Inline Company Performance',color:'darkgrey',data:[

        {x:5,y:5,ticker:'GIII'},{x:5.3,y:4.3,ticker:'BNNY'}

        ]}]

        });
    });

        </script>
    </head>
    <body>
<script src="../../js/highcharts.js"></script>
<script src="../../js/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:44:41.770

this.pageX 和 this.pageY 未定义，因为您现在拥有它们。

替换这个：

```
click: function() {
    hs.htmlExpand(null, {
        pageOrigin: {
            x: this.pageX,
            y: this.pageY
        },
        headingText: this.name,
        maincontentText: Highcharts.dateFormat('%A, %b %e, %Y', this.x) +':<br/> '+
        this.y +' visits',
        width: 200
    });
} 
```

有了这个：

```
click: function(e) {
    hs.htmlExpand(null, {
        pageOrigin: {
            x: e.pageX,
            y: e.pageY
        },
        headingText: this.name,
        maincontentText: Highcharts.dateFormat('%A, %b %e, %Y', this.x) +':<br/> '+
        this.y +' visits',
        width: 200
    });
} 
```

在 function() 中调用“e”，并为 pageX 和 pageY 引用它

* * *

编辑以澄清并回答您的次要问题：

如果将事件放在点对象中，则可以跳过上述更改，然后可以使用 this.x 和 this.y 从单击的点中提取其他数据元素：

```
 cursor: 'pointer',
            point: {
                events: {
                        click: function() {
                            hs.htmlExpand(null, {
                                pageOrigin: {
                                    x: this.pageX,
                                    y: this.pageY
                                },
                                headingText: this.series.name,
                                maincontentText: Highcharts.dateFormat('%A, %b %e, %Y', this.x) +':<br/> '+
                                    this.y +' visits',
                                width: 200
                            });
                        }
                }
            } 
```

尽管您尝试格式化为日期的 x 值不是日期，但您可能会从中得到 12/31/1969...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T05:32:23.767

**如果您需要X 轴**`this.category`的值，请使用

# javascript - Javascript 中用于跨平台 HTML5 应用程序的设计模式适配器

> ID：15690312
> 
> 赞同：1
> 
> 时间：2013-03-28T19:16:54.173
> 
> 标签：javascript, design-patterns

我正在开发一个跨平台的 HTML5 应用程序，它将被包装在 Android、Windows 8、iOS 中，并且还会有一个网络版本

由于每个平台都有不同的访问 dom、访问存储或访问摄像头的方式，我的想法是创建一个类似的函数：

```
function CameraAdapter() {
  if (windows8) {return Windows8.Camera}
  else if (android) ..
} 
```

从[Addyosmani 书中](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#wrapperpatternjquery)：

> 适配器模式将对象或类的接口转换为与特定系统兼容的接口。

就设计模式而言，它被认为是工厂吗？和适配器？我如何编写这个类以成为 OOP 设计模式的“标准”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:31:15.523

您的实现有点接近工厂模式，尽管它与它有一些不同。[您可以在此处](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#factorypatternjavascript)找到标准工厂模式的示例，并自行查看差异。在您的代码中，您只是将对象创建封装在一个方法中。

话虽如此，不要仅仅因为你想要使用模式，因为它往往会导致糟糕和复杂的应用程序架构。使用最简单的解决方案来解决您手头的问题。如果该问题和解决方案与标准模式匹配，那么您应该重构您的代码以实现该模式。这种方法称为模式重构，是使用标准设计模式的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T08:17:38.300

我会说您正在实施的是工厂方法吗？您可以使用工厂方法封装对象的创建，然后为工厂方法返回的每个不同类实现一个通用接口/适配器模式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T19:20:16.863

[为什么不使用像http://modernizr.com/](http://modernizr.com/)这样的现有工具来检测功能？此外，如果您使用 javascript 框架（例如 jquery UI/mobile、angular js 等），您无需执行任何特定于设备的操作。该框架为您完成繁重的工作。

# excel - 将数字作为文本导入 Power Pivot

> ID：15690318
> 
> 赞同：2
> 
> 时间：2013-03-28T19:17:13.767
> 
> 标签：excel, csv, powerpivot

我正在尝试将 CSV 文件导入 Excel power pivot。CSV 文件有一些以“0”开头的数字文本。当我们导入 CSV 文件时，“0”被消除并显示为一个数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:51:18.643

您可以使用 Schema.ini 文件来指定列的数据类型 - 这可以使 PowerPivot 根据需要解释输入列。

请检查此以获取更多详细信息

[http://msdn.microsoft.com/en-us/library/ms709353(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms709353(VS.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T19:42:03.323

这也有效：确保带有前导零的数据不在数据的第一列中。我在数据字符串的开头发现了嵌入的隐藏字符。将前导零数据移动到数据的第二列或第三列解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T00:27:12.660

一个答案是首先通过 Access 数据库传递它。

在将 csv 导入数据库时​​，您必须手动干预，以确保它将列识别为文本而不是长整数。然后，您可以使用 Access DB 为 PowerPivot 提供数据。

除非 CSV 是巨大的，否则这可以说是一个更强大的工作流，并且在 Access 中拥有源数据有许多优点，例如能够过滤您带入 PowerPivot 的内容、使用 SQL 查询它的选项，您还可以将 Access 用于需要内存的计算列，因此您无需在 PP 中执行它们。

雅各布

# java - GWT：建议框作为全局变量

> ID：15690319
> 
> 赞同：0
> 
> 时间：2013-03-28T19:17:14.893
> 
> 标签：java, gwt, suggestbox

我有一个包含 2 个视图和 2 个演示者的应用程序。我有一个使用 SuggestionBox 的带有搜索框的固定顶部菜单。我从数据库中获取建议列表，然后使用 addAll(..) 方法将其加载到 SuggestionBox 的 MultiWordSuggestOracle 中。

我正在使用 UiBinder，这是我的代码：

```
@UiField (provided=true) SuggestBox searchEntriesSuggestBox;
MultiWordSuggestOracle oracle; 

public MenuBar() {

  oracle = new MultiWordSuggestOracle();
  searchEntriesSuggestBox = new SuggestBox(oracle);
  initWidget(uiBinder.createAndBindUi(this));
}

public void loadUserEntries(Collection<String> entries){
  oracle.clear();
  oracle.addAll(entries);
} 
```

第一次运行应用程序时，我使用 loadUserEntries() 加载建议。问题是当我更改视图（和演示者）时，因为 SuggestBox 加载了一个空的 MultiWordSuggestOracle，所以每次更改演示者时我都必须再次加载建议。

我想在应用程序的生命周期内将建议（MultiWordSuggestOracle）维护为全局变量，以避免使用 loadUserEntries 方法。

我尝试定义一个全局变量 MultiWordSuggestOracle，每次我必须加载 Presenter 时，使用我的全局 MultiWordSuggestOracle 创建一个新的 SuggestBox。但它没有用。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:55:14.610

问题是每个视图都使用自己的 MenuBar 实例，因为每个视图都创建自己的。

有不同的方法可以解决您的问题，您可以使用多种方法，`ActivityManagers`就像在这篇[文章](http://tbroyer.posterous.com/gwt-21-activities-nesting-yagni)中解释的那样，或者您可以在您的 UI 中有一个固定部分，菜单栏不在您的 MVP 显示中，或者一个简单的解决方案是使用静态变量并使加载方法静态（仅调用此方法一次）。

```
 @UiField (provided=true) SuggestBox searchEntriesSuggestBox;
 static MultiWordSuggestOracle oracle = null; 

 public MenuBar() {
   if (oracle == null) {
     oracle = new MultiWordSuggestOracle();
   }
   searchEntriesSuggestBox = new SuggestBox(oracle);
   initWidget(uiBinder.createAndBindUi(this));
 }

 public static void loadUserEntries(Collection<String> entries){
   oracle.clear();
   oracle.addAll(entries);
 } 
```

# c# - 如何关注允许多选的datagridview中最新选择的行？

> ID：15690320
> 
> 赞同：1
> 
> 时间：2013-03-28T19:17:20.313
> 
> 标签：c#, winforms, datagridview, focus

有没有办法关注最新选择的`DataGridView`允许多项选择的行？

我在用

```
dataGridView1.Rows[Index].Cells[Index].Selected = true; 
```

它正在选择行但不聚焦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:41:20.357

Try

dataGridView1.CurrentCell = dataGridView1[Index,Index];

Row selection is independent of focus.

# arrays - 用 asp-classic 中的记录集填充二维数组

> ID：15690322
> 
> 赞同：1
> 
> 时间：2013-03-28T19:17:25.867
> 
> 标签：arrays, asp-classic, vbscript

我试图用记录集中的项目填充二维数组，但我不断收到以下错误：Microsoft VBScript 运行时错误'800a0009'下标超出范围：'UBound'

我也尝试将 UBound 更改为 Ubound(ProxState,1)，但这只是在“For”循环开始后的行上出现以下错误：Microsoft VBScript runtime error '800a0009' Subscript out of range

```
Dim ProxCount, LastProx
ProxCount = 0
Do While Not objRS.EOF
  ProxCount = ProxCount + 1
objRS.MoveNext
Loop

LastProx = ProxCount - 1
objRS.MoveFirst
Dim ProxState

ProxState = Array(LastProx,1)
For i = 0 To UBound(ProxState,0)
  ProxState(i,0) = objRS("ProximityName")
  ProxState(i,1) = objRS("InState")
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:21:24.030

您可以使用`GetRows()` 一次性分配它而不是循环。

```
ProxState = objRS.GetRows() 
```

见：[http ://www.asp.happycodings.com/DataAccess/code1.html](http://www.asp.happycodings.com/DataAccess/code1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:02:18.193

另一种方法：

```
Dim ProxCount
Dim ProxState()
ProxCount = 0

If (not objRS.Eof) Then
    ProxCount = objRS.RecordCount

    ReDim ProxState(ProxCount - 1, 1)

    For i = 0 To ProxCount - 1
      ProxState(i, 0) = objRS("ProximityName")
      ProxState(i, 1) = objRS("InState")
    Next

End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:58:21.837

哎呀，我想我错了。道歉！以下内容不正确。确保您知道 Ubound 为您提供了许多元素，所以...如果您按如下方式更改代码...

```
For i = 0 To UBound(ProxState,0)-1 
```

那么它应该工作

# google-maps - 简单地图未显示

> ID：15690337
> 
> 赞同：0
> 
> 时间：2013-03-28T19:18:27.177
> 
> 标签：google-maps, google-maps-api-3

我有一个非常简单的 Map 定义如下：

```
var _mapOptions = {
   zoom: 15,
   center: new google.maps.LatLng(-22.9965949, -43.2710887),
   mapTypeId: google.maps.MapTypeId.ROADMAP
};

var _mapCtl = document.getElementById("map-control");
var _map = new google.maps.Map(_mapCtl, _mapOptions); 
```

html“map-control”在这样的 div 中定义：

```
<div id="map-view" class="view" style="display: none">
    <div id="map-control" style="width:100%; height=100%"></div>
</div> 
```

div 使用 jquery 动态加载，最初是不可见的。调试我已经验证了`document.getElementById("map-control");`retuns 一个 html 元素并设置了`_mapCtl`.

为了完成，我正在加载谷歌 API，如下所示：

```
<script src="https://maps.googleapis.com/maps/api/js?key=mykey&sensor=false"></script> 
```

这可能是什么？提前致谢

# business-logic - 称为包含业务逻辑的应用程序服务

> ID：15690338
> 
> 赞同：0
> 
> 时间：2013-03-28T19:18:29.187
> 
> 标签：business-logic, n-tier-architecture, service-layer, business-logic-layer

在过去的几个月里，我有一个问题让我很困惑。一些作者和个人（我不会说全部）正在将**业务逻辑** 与**应用程序服务**相关联。据我所知，业务逻辑包含构成我们领域的类，这些类全部包含在**业务层**或**领域层**中。

所以我们将业务对象放在业务层中（这似乎完全合乎逻辑），那么为什么我们将应用服务（属于服务层）与业务逻辑（属于业务层）相关联？为什么我们说应用服务包含业务逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:26:01.890

在您描述的分层架构中，服务层通常会使用业务逻辑组件来履行服务合同。服务层将是从业务对象映射到 DTO 或请求/响应消息的地方。这确保了业务层中的更改不会破坏服务合同。

# ios - UIApplication 获取将处理 URL 的应用程序的名称

> ID：15690339
> 
> 赞同：0
> 
> 时间：2013-03-28T19:18:32.630
> 
> 标签：ios, uiapplicationdelegate, uiapplication, openurl

是否可以检索将处理特定 URL 的应用程序的名称？

在其他应用程序中，我看到“在 Safari 中打开链接”，如果你点击，YouTube 或其他任何东西都会启动。我不太喜欢这种行为，我想在调用之前获取相应的应用程序名称

`[[UIApplication sharedApplication] openURL:[NSURL someURL]];`

设置右键标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:44:24.853

不，官方 SDK 无法做到这一点。

如果您真的希望可以使用 iOS 上最常见的 URL 方案创建一个文件/数据库（检查[此](http://handleopenurl.com)），然后将您的应用程序与它一起发布。

# c# - 在两个 DataGrid 之间共享 1 个滚动条

> ID：15690345
> 
> 赞同：5
> 
> 时间：2013-03-28T19:19:10.377
> 
> 标签：c#, wpf, xaml, datagrid, scroll

我正在制作一个有 2 个数据网格的 wpf 应用程序，我希望它们一起滚动。我知道 DataGridView 类有一个滚动事件，您可以使用它对其他网格进行必要的更改，但 DataGrids 没有滚动事件。我必须使用 DataGrid。

这个例子很好，但不是 WPF，它使用 DataGridView 而不是 DataGrid。[使用一个滚动条控制两个DataGridView](https://stackoverflow.com/questions/13229589/using-one-scroll-bar-to-control-two-datagridview)

拥有它的最佳方法是什么，以便一个数据网格的滚动条也将在 WPF 和 DataGrids 中移动数据网格的滚动条？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T20:03:02.693

您可以通过获取两个 DataGrid 的底层 ScrollViewer 并相应地设置事件来做到这一点。下面是我做的一个简单的例子，它看起来像你描述的那样工作。

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
    <Grid>
        <DataGrid AutoGenerateColumns="True" Height="200" HorizontalAlignment="Left" Margin="52,69,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="200" ItemsSource="{Binding Collection}" />
        <DataGrid AutoGenerateColumns="True" Height="200" HorizontalAlignment="Left" Margin="270,69,0,0" Name="dataGrid2" VerticalAlignment="Top" Width="200" ItemsSource="{Binding Collection}" />
    </Grid>
</Window> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        ObservableCollection<Person> _collection = new ObservableCollection<Person>();
        ScrollViewer scrollView = null;
        ScrollViewer scrollView2 = null;

        public MainWindow()
        {
            for (int i = 0; i < 50; i++)
            {
                var p = new Person() { Name = string.Format("{0}", i), Age = i };
                _collection.Add(p);
            }
            this.DataContext = this;
            InitializeComponent();
        }

        void scrollView_ScrollChanged(object sender, ScrollChangedEventArgs e)
        {
            var newOffset = e.VerticalOffset;

            if ((null != scrollView) && (null != scrollView2))
            {
                scrollView.ScrollToVerticalOffset(newOffset);
                scrollView2.ScrollToVerticalOffset(newOffset);
            }
        }

        public ObservableCollection<Person> Collection
        {
            get
            {
                return _collection;
            }
        }

        private ScrollViewer getScrollbar(DependencyObject dep)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(dep); i++)
            {
                var child = VisualTreeHelper.GetChild(dep, i);
                if ((null != child) && child is ScrollViewer)
                {
                    return (ScrollViewer)child;
                }
                else
                {
                    ScrollViewer sub = getScrollbar(child);
                    if (sub != null)
                    {
                        return sub;
                    }
                }
            }
            return null;
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            scrollView = getScrollbar(dataGrid1);
            scrollView2 = getScrollbar(dataGrid2);

            if (null != scrollView)
            {
                scrollView.ScrollChanged += new ScrollChangedEventHandler(scrollView_ScrollChanged);
            }
            if (null != scrollView2)
            {
                scrollView2.ScrollChanged += new ScrollChangedEventHandler(scrollView_ScrollChanged);
            }
        }
    }

    public class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }
} 
```

发生的事情是我在使用 getScrollbar 加载窗口时遍历两个 DataGrids 的 VisualTree。然后我为两个 DataGrid 设置了滚动更改事件，然后滚动到刚刚在滚动更改事件处理程序中更改的垂直偏移量。

# java - 在 JPA/EclipseLink 中保留包含订单和重复项的列表

> ID：15690347
> 
> 赞同：2
> 
> 时间：2013-03-28T19:19:13.793
> 
> 标签：java, jpa, collections, persistence, eclipselink

我基本上有两个实体`Entity1`和`Entity2`. `Entity1`包含这段代码：

```
@OneToMany(cascade=CascadeType.PERSIST)
@OrderColumn
List<Entity2> e = new LinkedList<Entity2>(); 
```

并`Entity2`包含一些东西，但没有任何相关性。我想将一些实例添加到列表中`e`，最重要的是我想将一些重复项（相同的引用）添加到列表中两次或更多。我仍然希望 JPA 保持两者，并且我希望 JPA 保持列表的顺序。

到目前为止，如果我只添加独特的项目，这可行。如果我添加一个重复项，JPA 实际上想要保留正确的数据（ID od Entity1、Entity2 的 ID 和顺序），但由于关系表的主键只有两个 ID，JPA 会引发重复的主键错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:34:22.737

EclipseLink 当前不支持 OneToMany 关系的重复。重复是对（基本）ElementCollection 映射的支持。

请为错误投票， [https://bugs.eclipse.org/bugs/show_bug.cgi?id=256978](https://bugs.eclipse.org/bugs/show_bug.cgi?id=256978)

最好的解决方案是将连接表映射到另一个实体，并为它定义一个 1-m，对目标定义一个 1-1。

# php - yii 扩展协助

> ID：15690348
> 
> 赞同：1
> 
> 时间：2013-03-28T19:19:16.977
> 
> 标签：php, jquery, oop, yii, yii-extensions

我刚刚开始在 yii 中摸索表面，并且有一段时间让任何图像滑块扩展工作。我参考了[http://www.yiiframework.com/doc/guide/1.1/en/extension.use](http://www.yiiframework.com/doc/guide/1.1/en/extension.use)并相信我的问题与扩展的初始化有关，但不确定。我尝试使用的最新扩展是[http://www.yiiframework.com/extension/s3slider/](http://www.yiiframework.com/extension/s3slider/)。

到目前为止，我已经下载了扩展，解压缩并放在 /protected/extensions 中。我有两个图像我试图在 /images 之间滑动。我已将建议的代码放在我的 /protected/views/layouts/main.php 中，并更新了 $images 数组，如下所示：

```
<?php 

    $this->widget('application.extensions.s3slider.S3Slider',
    array(
         'images' => array(
                array('images/giveBack.png', 'Give Back'),
                array('images/priceGuarantee.png', 'Price Guarantee'),
          ),
          'width' => '420',
          'height' => '300',
    )
  );?> 
```

当我重新加载我的页面时，我收到以下错误：

```
PHP notice
Array to string conversion
/protected/extensions/s3slider/S3Slider.php(71)
59         $cssparams = array(
60             'name' => $this->name,
61             'width' => $this->width,
62             'height' => $this->height,
63             'opacity' => $this->opacity,
64         );
65         $clientScript->registerCssFile($baseUrl . '/s3Slider.css.php?data=' . urlencode(base64_encode(serialize($cssparams)))); //http_build_query($cssparams)
66 
67         $clientScript->registerCoreScript('jquery');
68 
69         $clientScript->registerScriptFile($baseUrl . '/s3Slider.js');
70 
71         $js = "jQuery('#{$this->name}').s3Slider($options);";
72         $cs->registerScript('Yii.S3Slider' . $this->name, $js);
73         echo $this->makeImages();
74     }
75 
76 }
77 ?> 
```

我的堆栈跟踪表明：

```
 /protected/views/layouts/main.php(60): CBaseController->widget("application.extensions.s3slider.S3Slider", array("images" => array(array("images/giveBack.png", "Give Back"), array("images/priceGuarantee.png", "Price Guarantee")), "width" => "420", "height" => "300"))
55                     array('images/priceGuarantee.png', 'Price Guarantee'),
56               ),
57               'width' => '420',
58               'height' => '300',
59         )
60   );?>
61 
62 <?php
63 $this->widget('zii.widgets.CBreadcrumbs', array(
64             'links'=>$this->breadcrumbs,
65         )); ?><!-- breadcrumbs --> 
```

对此的任何指导将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:58:35.810

您成功安装了此扩展程序，但是其中有一个明显的错误。请注意，在第 52 行`$options`声明了

```
$options = array(); 
```

然后检查它是否为空：

```
if (!empty($options)) {
     $options = CJavaScript::encode($options);
} 
```

所以`$options`是空的，所以它没有被编码为字符串`encode`，所以在：

```
$js = "jQuery('#{$this->name}').s3Slider($options);"; 
```

PHP 显示关于数组到字符串转换的通知。删除检查是否为空的条件，它将对空数组进行编码并且应该可以工作。扩展的作者可能禁用了通知，这是**不好的做法**。在开发阶段看到通知是明智的。

**提示**：当你在 yii 中变得更好时，为 jquery 插件编写扩展包装器对你来说很容易。

# c++ - 如何在示例中将 malloc 替换为 new

> ID：15690351
> 
> 赞同：2
> 
> 时间：2013-03-28T19:19:28.170
> 
> 标签：c++, malloc, msdn

我正在关注管理 IP 地址的 C++ msdn 参考。示例中的内存分配使用 malloc 而不是 new。我的理解是 malloc 永远不应该在 C++ 中使用。我将如何将这些 malloc 转换为 new ？

链接：[MSDN 参考](http://msdn.microsoft.com/en-us/library/aa366309%28v=vs.85%29.aspx)

有问题的代码：

```
MIB_IPADDRTABLE  *pIPAddrTable;
DWORD            dwSize = 0;
DWORD            dwRetVal;

pIPAddrTable = (MIB_IPADDRTABLE*) malloc( sizeof(MIB_IPADDRTABLE) );

if (GetIpAddrTable(pIPAddrTable, &dwSize, 0) == ERROR_INSUFFICIENT_BUFFER)
{
    free( pIPAddrTable );
    pIPAddrTable = (MIB_IPADDRTABLE *) malloc ( dwSize );
}

if ( (dwRetVal = GetIpAddrTable( pIPAddrTable, &dwSize, 0 )) != NO_ERROR )
{ 
    printf("GetIpAddrTable call failed with %d\n", dwRetVal);
}

printf("IP Address:         %ld\n", pIPAddrTable->table[0].dwAddr);
printf("IP Mask:            %ld\n", pIPAddrTable->table[0].dwMask);
printf("IF Index:           %ld\n", pIPAddrTable->table[0].dwIndex);
printf("Broadcast Addr:     %ld\n", pIPAddrTable->table[0].dwBCastAddr);
printf("Re-assembly size:   %ld\n", pIPAddrTable->table[0].dwReasmSize);

if (pIPAddrTable)
    free(pIPAddrTable); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:24:40.407

您不会用`malloc`new*表达式*替换这些使用 of，因为它们不会像那样初始化对象`new`。相反，他们将分配内存的指针传递给`GetIpAddrTable`，这似乎是在进行初始化。

但是，有一个 C++ 版本`malloc`，它只进行内存分配：`operator new`. 我会将这些线路与他们的替代品配对：

```
pIPAddrTable = (MIB_IPADDRTABLE*) malloc( sizeof(MIB_IPADDRTABLE) );
pIPAddrTable = (MIB_IPADDRTABLE*) ::operator new( sizeof(MIB_IPADDRTABLE) );

pIPAddrTable = (MIB_IPADDRTABLE *) malloc ( dwSize );
pIPAddrTable = (MIB_IPADDRTABLE*) ::operator new( dwSize ); 
```

will的使用`free`也需要替换为释放函数`operator delete`：

```
free( pIPAddrTable );
::operator delete(pIPAddrTable); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:43:18.057

*如果您想使用现代 C++*重写原始 C 风格的代码，您应该使用 **`std::vector`**代替`new[]`(and `malloc`)。

`std::vector`非常方便，例如它会自动释放内存，这要归功于它的析构函数（也在抛出异常的情况下），它可以调整大小等。

这是上面代码的一个例子，它使用了and`std::vector`代替（更多细节参见代码中的注释）：`malloc``new[]`

```
#include <windows.h>
#include <Iphlpapi.h>
#include <stdio.h>
#include <vector>       // for std::vector

#pragma comment(lib, "iphlpapi.lib")

int main()
{
    // Use std::vector to dynamically allocate memory.
    std::vector<BYTE> buffer(sizeof(MIB_IPADDRTABLE));
    MIB_IPADDRTABLE * pIPAddrTable = reinterpret_cast<MIB_IPADDRTABLE*>(&buffer[0]);

    DWORD dwSize = 0;      
    if ( GetIpAddrTable(pIPAddrTable, &dwSize, 0) == ERROR_INSUFFICIENT_BUFFER )
    {
        // Resize buffer to proper size
        buffer.resize(dwSize);        

        // Buffer memory can be re-based after allocation, so update base pointer
        pIPAddrTable = reinterpret_cast<MIB_IPADDRTABLE*>(&buffer[0]);
    }

    DWORD dwRetVal;   
    if ( (dwRetVal = GetIpAddrTable( pIPAddrTable, &dwSize, 0 )) != NO_ERROR )
    { 
        printf("GetIpAddrTable call failed with %d\n", dwRetVal);
    }

    printf("IP Address:         %ld\n", pIPAddrTable->table[0].dwAddr);
    printf("IP Mask:            %ld\n", pIPAddrTable->table[0].dwMask);
    printf("IF Index:           %ld\n", pIPAddrTable->table[0].dwIndex);
    printf("Broadcast Addr:     %ld\n", pIPAddrTable->table[0].dwBCastAddr);
    printf("Re-assembly size:   %ld\n", pIPAddrTable->table[0].dwReasmSize);

    //
    // No need to cleanup memory:
    // std::vector destructor will do that for us automatically :)
    //    
} 
```

（请注意，`printf()`可以用 代替`std::cout`，但不如使用`std::vector`代替`malloc`or重要`new[]`。）

# mysql - 订购所有查询

> ID：15690353
> 
> 赞同：1
> 
> 时间：2013-03-28T19:19:30.450
> 
> 标签：mysql, coldfusion

我正在使用 ColdFusion 创建一个新的聊天系统，但我在解决一个小问题时遇到了很多麻烦。

首先，我将解释系统是如何工作的。与某人创建新聊天时，它会在 MySQL 表中创建一个对话行`conversations`。之后，用户可以互相发送消息。发送消息时，会在表中插入一行，`conversations_messages`其中包含时间戳、发送消息的用户、消息，当然还有消息的 id。听起来合乎逻辑，但现在出现了大问题：组织所有这些消息。

用户可以在一个页面上查看他们与其他人的消息，这是该页面的代码：

```
// Check conversation ID based on page url
<cfif IsDefined('URL.chat') and URL.chat neq "">

     // Load conversation based on page url
     <cfquery name = "getconv" datasource = "#DSN#">
         SELECT * 
         FROM  `conversations` 
     </cfquery>

    // Get all messages from this conversation
    <cfoutput query="getconv">
         <cfquery name = "getmessages" datasource = "#DSN#">    
             SELECT * 
             FROM  `conversations_messages` 
             WHERE  `conversation` = '#chat#'
             ORDER BY  `conversations_messages`.`id` DESC 
         </cfquery>

         // Get messages sent by 'user_one'
         <cfquery name = "my" datasource = "#DSN#"> 
              SELECT * 
              FROM  `conversations_messages` 
              WHERE  `conversation` LIKE  '#chat#'
              AND    `user` LIKE  '#user.id#'
              ORDER BY  `conversations_messages`.`id` DESC 
         </cfquery>

         // Get messages sent by 'user_two'
         <cfquery name = "friend" datasource = "#DSN#"> 
             SELECT * 
             FROM  `conversations_messages` 
             WHERE  `conversation` LIKE  '#chat#'
             AND    `user` LIKE  '#getconv.user_two#'
         </cfquery>

         <div class="content">

             // Messages sent by 'user_one' aka. user that created conversation
             You: <cfoutput><cfloop query="my">#my.message#<br></cfloop></cfoutput>

             // Messages sent by 'user_two'
             Friend: <cfoutput><cfloop query="friend">#friend.message#</cfloop></cfoutput>

            </cfoutput>
         </div>

 </cfif> 
```

这就是结果现在的显示方式：（如您所见，它是按用户排序的）

![在此处输入图像描述](../Images/798e5b2402bcf74d2532d7fdf48acfe5.png)

我希望它按消息 ID 排序，所以它显示如下：

![在此处输入图像描述](../Images/e80b404e68dfb2b31f1332819bf59849.png)

我希望现在更清楚一点！帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:16:48.870

（不知道为什么每个人都在评论中回答而不是作为“答案”？）

从数据库返回结果的顺序完全取决于您告诉它们返回的顺序。因此，如果您要按时间顺序排列它们，请不要按名称排序；按时间顺序排列它们。

所以不要获取 user1 的消息，然后是 user2 的消息，只需按会话顺序获取整个会话的消息。然后当你输出它们时，看看哪个用户发表了哪个评论并做“你”/“朋友”的事情。

也就是说，我认为您采用的方法并不理想。您可能应该做的是在消息发生时逐步获取消息，而不是等待获取所有消息（如果您明白我的意思）。因此，在每个人的 UI 上获取自上次显示消息以来的所有消息，并显示它们（按时间顺序），然​​后等待一些轮询间隔，然后获取自上次显示以来发生的下一批消息（等等） .

如果您使用的是 ColdFusion 10，那么所有这些东西都已经通过 CF 的 Web Sockets 技术为您完成了。因此，如果这是您的选择，那将是您的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T20:24:14.087

（正如亚当在这里建议的那样是一个答案）

在我看来，您的查询`getmessages`有您所追求的。它看起来是来自此`conversation = chat`排序的所有消息`conversations_messages.id`。

您真的不应该查询`*`任何一个，只指定所需的列。这样你会得到更好的表现。

此外，请始终`<cfqueryparam>`在`cfquery`块中使用标签。

此外，您不能嵌套没有属性`<cfoutput>`的标签。`group`您的代码已经存在，`<cfoutput>`因此不需要另一个。

如果您使用的是 ColdFusion 10，我肯定会看一下@Adam 的答案。

# c# - 从 XML 读取第一个根节点

> ID：15690354
> 
> 赞同：2
> 
> 时间：2013-03-28T19:19:41.690
> 
> 标签：c#, visual-studio-2010, visual-studio

我使用三种 XML 文件：

A型：

```
<?xml version="1.0" encoding="UTF-8"?>
<nfeProc versao="2.00" xmlns="http://www.portalfiscal.inf.br/nfe">
</nfeProc> 
```

B型：

```
<?xml version="1.0" encoding="UTF-8"?>
<cancCTe xmlns="http://www.portalfiscal.inf.br/cte" versao="1.04">
</cancCTe> 
```

C型：]

```
<?xml version="1.0" encoding="UTF-8"?>
<cteProc xmlns="http://www.portalfiscal.inf.br/cte" versao="1.04">
</cteProc> 
```

我尝试使用此代码读取第一个节点：

```
 XmlDocument xmlDoc = new XmlDocument();
     xmlDoc.Load(@"C:\crruopto\135120068964590_v01.04-procCTe.xml");
     XmlNodeList ml = xmlDoc.GetElementsByTagName("*");
     XmlElement root = xmlDoc.DocumentElement;
     exti = root.ToString(); 
```

但不返回任何我想读取第一个节点的内容，需要知道文件是 nfeProc、canCTE 还是 cteProc 第二个问题是我如何从同一标签中的“值”获取值？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:23:57.650

从[这篇](https://stackoverflow.com/questions/4498423/how-do-i-get-the-xml-root-node-with-c)文章：

```
//Root node is the DocumentElement property of XmlDocument

XmlElement root = xmlDoc.DocumentElement

//If you only have the node, you can get the root node by

XmlElement root = xmlNode.OwnerDocument.DocumentElement 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:29:31.417

I would suggest using XPath. Here's an example where I read in the XML content from a locally stored string and select whatever the first node under the root is:

```
XmlDocument doc = new XmlDocument();
doc.Load(new StringReader(xml));

XmlNode node = doc.SelectSingleNode("(/*)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:44:44.247

如果您不需要使用这些`XmlDocument`东西，那么`Linq`就是您的朋友。

```
XDocument doc = XDocument.Load(@"C:\crruopto\135120068964590_v01.04-procCTe.xml");
XElement first = doc.GetDescendants().FirstOrDefault();
if(first != null)
{
  //first.Name will be either nfeProc, canCTE or cteProc.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T19:49:49.250

使用 Linq to XML 是在 .NET 中使用 XML 的最新和最强大的方法，它为您提供比 XmlDocument 和 XmlNode 等更多的功能和灵活性。

获取根节点非常简单：

```
XDocument doc = XDocument.Load(@"C:\crruopto\135120068964590_v01.04-procCTe.xml");
Console.WriteLine(doc.Root.Name.ToString()); 
```

一旦构建了 XDocument，就不需要使用任何 LINQ 查询或特殊检查。您只需从 XDocument 中提取 Root 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T20:01:32.440

谢谢我已经解决了第一部分

```
 XmlDocument xmlDoc = new XmlDocument();
   xmlDoc.Load(nomear);
   XmlNodeList ml = xmlDoc.GetElementsByTagName("*");
   XmlNode primer = xmlDoc.DocumentElement;
   exti = primer.Name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-11T18:31:19.123

首先，要清楚，你问的是 root *element*，而不是 root *node*。

您可以使用 XmlReader 来避免将大型文档完全加载到内存中。请参阅我对如何在[https://stackoverflow.com/a/60642354/1307074](https://stackoverflow.com/a/60642354/1307074)上找到根元素的回答。

其次，一旦阅读器引用了元素，您可以使用阅读器的`Name`属性来获取元素的限定标签名称。`Value`您可以使用该属性将值作为字符串获取。

# highcharts - Highstock 1.3 afterSetExtremes 节流

> ID：15690357
> 
> 赞同：2
> 
> 时间：2013-03-28T19:19:50.873
> 
> 标签：highcharts, highstock

我将 Highstock.js 更新到 1.3 并注意到该`afterSetExtemes`事件在每个拖动事件上触发，而不是在 dragend/mouseup 上。我正在通过 ajax 更新主要系列，但现在这会导致数百个 ajax 调用同时触发。我似乎找不到阻止这种情况的设置。有没有其他人看到这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:12:33.770

我遇到了同样的问题。

您正在寻找的选项是：

```
scrollbar: {
    liveRedraw: false 
} 
```

查看我发布的答案的问题： [highstock 1.3 disable navigator dragging redraw](https://stackoverflow.com/questions/15417426/highstock-1-3-disable-navigator-dragging-redraw/15702812#15702812)

# django - Heroku celery 后台任务

> ID：15690358
> 
> 赞同：6
> 
> 时间：2013-03-28T19:19:51.173
> 
> 标签：django, heroku, django-celery

我们在 Heroku 上使用 django-celery 运行了一个简单的任务。就像是：

```
@task
Simple_task():
    for line in csv.reader(origin):
        process_line(line)

process_line(line):
    fields = parse_line(line)
    reg = Model1() # Django model
    reg.field1 = fields[0]
    reg.field2 = fields[1]
    reg.field3 = fields[2]
    reg.save() 
```

其中*origin*是一个 csv 文件。当文件很大时（超过 50.000 行），任务会占用所有内存，导致 R14 错误，直到被系统取消（在 512 MB 可用内存的 150% 处）。内存永远不会释放，我们必须手动重新启动任务。

在 Linux 机器上运行或在开发机器上与工头一起运行，它可以毫无问题地完成（全部 170.000 行）。它似乎只在 Heroku 上泄漏内存。顺便说一句，我们使用 DEBUG=False 运行。

Heroku 执行 celery 任务是否有问题？有什么我们可以缺少的吗？这已成为在 Heroku 上部署的阻碍。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T08:47:53.283

我同意 JoshB 的观点，在你的情况下它似乎需要超过 512MB 的内存。

*   如果您创建任务`process_line`并创建它们的队列而不是任务来处理整个文件怎么办。在这种情况下，您在 Heroku 上的内存不会超载。

*   另一个可能的解决方案是 Heroku 的新服务，您可以在测功机上使用 1GB RAM。**链接：** [2x dynos beta](https://blog.heroku.com/archives/2013/4/5/2x-dynos-beta)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T16:21:48.387

[`DEBUG`Django 会在设置`True`](https://docs.djangoproject.com/en/dev/faq/models/#why-is-django-leaking-memory)为时泄漏内存，因为它会保存已执行的每个 SQL 语句的副本。

您可以使用与您的主机具有相同规格的虚拟机进行本地测试。或者使用[ulimit](https://lopsa.org/node/1755)来限制进程内存。通过这种方式，您可以检查本地代码是否仅适用于 512MB 的 RAM。

# node.js - 如何覆盖依赖项的依赖项？

> ID：15690361
> 
> 赞同：4
> 
> 时间：2013-03-28T19:20:04.430
> 
> 标签：node.js, npm

不确定这是可能的，但我需要覆盖依赖项的依赖项的版本。具体来说，我在我的`package.json`：

```
"dependencies": {
  "connect": "*"
} 
```

`connect`然后依赖于`"formidable": "1.0.11"`. 我需要`connect`使用`1.0.13`.`formidable`

`connect`是否可以在不克隆该项目的情况下覆盖的依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:52:30.883

你可以在你的 package.json 中设置 "formidable": "1.0.13" 并且如果其他依赖于强大的包（在这种情况下是连接）有适当的条件到强大的版本，他们将共享一个强大的包。在最新连接的情况下，它不起作用，因为它在 package.json 中具有“强大”：“1.0.11”，如果您在 package.json 中设置“1.0.13”，您将安装两个强大的（“1.0\. 13”作为您的直接依赖项，“1.0.11”作为连接依赖项）。AFAIK，在这种情况下不可能覆盖依赖关系。

# actionscript-3 - 错误 #1006：值是函数

> ID：15690367
> 
> 赞同：1
> 
> 时间：2013-03-28T19:20:11.053
> 
> 标签：actionscript-3

我已经尝试查找此内容，但似乎无法理解为什么下面给我上面的错误。我最近来的地方是：[奇怪的错误 1006：%function_name% 不是一个函数](https://stackoverflow.com/questions/12616770/strange-error-1006-function-name-is-not-a-function)，但它并不真正适用，因为下面是我的主时间线第 1 帧。我应该将它移到“Main.as”类吗？

```
function centerContent(refItem:Object, xOffset:int, yOffset:int) {
    this.x = (refItem.width - this.width)/2 + refItem.x + xOffset;
    this.y = (refItem.height - this.height)/2 + refItem.y + yOffset;
}

// center the item in relation to another item
a_mc.centerContent(another_mc, 0, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:41:39.593

您正在尝试在您的 MovieClip 上创建一个函数原型。

要将此函数添加到 MovieClip，您可以扩展 MovieClip 类：

```
package
{
    import flash.display.DisplayObject;
    import flash.display.MovieClip;

    public class Example extends MovieClip
    {
        public function Example()
        {
            super();
        }

        public function centerContent(refItem:DisplayObject, xOffset:int, yOffset:int):void
        {
            this.x = (refItem.width - this.width) / 2 + refItem.x + xOffset;
            this.y = (refItem.height - this.height) / 2 + refItem.y + yOffset;
        }

    }
} 
```

然后你可以调用你的`centerContent`函数：

```
var a_mc:Example = new Example();
a_mc.centerContent(obj, 0, 0); 
```

否则，您可以将 any 传递`DisplayObject`给函数，如下所示：

```
public function centerContent(object:DisplayObject, refItem:DisplayObject, xOffset:int, yOffset:int):void
{
    object.x = (refItem.width - object.width) / 2 + refItem.x + xOffset;
    object.y = (refItem.height - object.height) / 2 + refItem.y + yOffset;
} 
```

然后你可以调用：

```
centerContent(a_mc, obj, 0, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:34:23.020

您对范围的工作方式感到困惑。

基本上，`centerContent`是一个类的一部分，你试图从那个类的孩子那里调用它。它不是那样工作的。要调用该函数，必须从它的子类调用它（函数是一个对象，与 MovieClip 或 Sprite 或 String 相同）。

所以，这样看：

```
-Main
--Class1
---another_mc
---a_mc
----function1
----function2
---centerContent()
----refItem
----xOffset
----yOffset 
```

您可以从其父对象调用一个对象（同样，函数是一个对象），而不是其他任何东西。因此，在该图像中，您可以从 a_mc 调用 function1 和 function2 ( `a_mc.function1()`and `a_mc.function2()`)，但不能调用 centerContent( `a_mc.centerContent`)，因为它不存在于 a_mc 中​​，而是存在于 Class1 中。因此，您可以调用`Class1.centerContent()`（`this.centerContent()`用于正确的语法和范围）或`Class1.a_mc`但不能调用 a_mc.centerContent()。

# ember-data - 如何将 ember-rails 的 ember-data 版本升级到修订版 12？

> ID：15690369
> 
> 赞同：2
> 
> 时间：2013-03-28T19:20:14.903
> 
> 标签：ember-data, ember-rails

我已将[ember-rails](http://github.com/emberjs/ember-rails)更新为 master：

```
bundle update ember-rails
Updating git://github.com/emberjs/ember-rails.git
Fetching gem metadata from https://rubygems.org/.........
....
Using ember-rails (0.11.1) from git://github.com/emberjs/ember-rails.git (at master) 
....
Your bundle is updated! 
```

我想使用最新的[ember-data](http://github.com/emberjs/data)修订版 (12)，但每次我将应用程序的商店修订号更新为 12，即：

```
App.Store = DS.Store.extend({
  revision: 12,
  adapter: App.Adapter.create()
}); 
```

我看到以下错误消息：

```
Uncaught Error: Error: The Ember Data library has had breaking API changes since the last time you updated the library. Please review the list of breaking changes at https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md, then update your store's `revision` property to 11 
```

...当我查看 DS.CURRENT_API_REVISION 时，它是 11：

```
console.log(DS.CURRENT_API_REVISION); // 11 
```

有没有办法让 gem 加入修订版 12，或者我必须自己构建 ember-data 并覆盖包含的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:02:14.407

benburton 的解决方案适用于所要求的内容，但在最新的 ember-data 中[，它使用了仅在 ember RC2 中添加的内部方法“readOnly”](https://stackoverflow.com/questions/15864090/has-no-method-readonly-and-has-no-method-attr)。

因此，您需要最新的 ember 才能运行最新的 ember-data。完整的解决方案是简单地忽略解决方案的第二行，留下以下内容：

```
rails generate ember:install --head 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:31:12.573

我最终使用 ember-rails 生成 ember+e​​mber-data，然后像这样删除 Ember 的更新版本：

```
rails generate ember:install --head
rm vendor/assets/ember/development/ember.js vendor/assets/ember/production/ember.js 
```

# c++ - Qt QFileSystemWatcher 仅触发某些程序

> ID：15690371
> 
> 赞同：3
> 
> 时间：2013-03-28T19:20:18.817
> 
> 标签：c++, qt, filesystemwatcher

我目前正在使用 QFileSystemWatcher 来监视目录中包含的文件的任何更改。这很好用，但只有当我用某些程序更改这些文件时。

例如，当我使用 Qt Creator 更改文件时，QFileSytemWatcher 会正确触发。如果我使用 Notepad++ 或 Eclipse 以完全相同的方式编辑和保存完全相同的文件，则不会触发文件被更改。

我相当肯定这与操作系统/程序如何处理写缓冲有关。不幸的是，我的程序无法控制写入的完成方式。任何程序都可以更改我正在监视的文件。因此，我能想到的可靠检测文件更改的唯一方法是使用常规计时器来扫描文件更改（这比操作系统对我来说监视文件的效率要低得多）。有没有更好的方法来做到这一点？任何帮助表示赞赏。

# expressionengine - 表达式引擎 - 将多个类别作为 URL 段传递

> ID：15690372
> 
> 赞同：0
> 
> 时间：2013-03-28T19:20:23.897
> 
> 标签：expressionengine

我正在尝试创建具有深度链接功能的产品过滤器。本质上，我希望用户能够在多个类别中过滤我的产品列表，并让 URL 反映他们所做的过滤。

所以它会开始为：

www.site.com/products/

我的第一级类别过滤已经有效。所以我可以使用 EE 对 URL 段的常规处理来达到我的第一级过滤。例如：

www.site.com/products/leatherthongs

返回过滤后的子集，仅显示壮观的皮革丁字裤集合。但现在我希望用户能够过滤另一个类别——例如颜色。这是东西停止工作的地方。

EE 处理模板内的多个类别（使用 & 符号或管道）的方式在 URL 中不起作用：

www.site.com/products/leatherthongs&red

我尝试过的任何变化也没有。

我的下一步是创建一个简单的原始 PHP 方法，该方法可以捕获常规查询字符串参数，然后在渲染之前将它们注入 {entries} 标记。不是很难，但很丑。我很想知道是否有办法在本地处理 URL 中的多个类别。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:47:49.067

您是否考虑过使用 Low 的[Seg2Cat](http://gotolow.com/addons/low-seg2cat)插件？我不确定你想让它有多复杂，但似乎你可以在你的频道中指定一些东西：条目循环`categories='{segment_2){if segment_3}|{segment_3_category_id}{/if}'`

这种确切的语法未经测试，但我过去曾通过类似的解决方案取得成功。

# c# - 从 docx 中解析出隐藏的文本

> ID：15690386
> 
> 赞同：1
> 
> 时间：2013-03-28T19:21:31.393
> 
> 标签：c#, asp.net-mvc

我在 MVC 3 应用程序中有一个富文本编辑器。除非用户尝试从 microsoft word 复制文本并粘贴到编辑器中，否则它工作正常。发生这种情况时，我会得到像这样的额外隐藏字符

```
<!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="Picture_x0020_1" o:spid="_x0000_i1025" type="#_x0000_t75"
 style='width:34.5pt;height:20.25pt;visibility:visible;mso-wrap-style:square'>
</v:shape><![endif]--> 
```

我想在将输入保存到数据库之前解析所有这些。现在我正在使用正则表达式来查找两者之间的所有文本，`'<!--'` 这`'-->'` 似乎是有效的，但我觉得这不是最好的方法，而且我不确定 docx 文件中的隐藏内容是否总是像这样格式化。有没有更好的方法来摆脱这些额外隐藏的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:26:52.850

`docx`正在使用`OpenXML`格式，因此您可以尝试使用任何`xml parser`. 例如，对于`c# 3.5 and higher`，您可以使用 Linq-To-Xml，这就是您找到所有评论的方式：

```
var document = XDocument.Load("test.xml");

var comments =  from node in document.Elements().DescendantNodesAndSelf()
        where node.NodeType == XmlNodeType.Comment
        select node as XComment; 
```

# c++ - 如何使用 boost split 拆分字符串并忽略空值？

> ID：15690389
> 
> 赞同：20
> 
> 时间：2013-03-28T19:21:36.283
> 
> 标签：c++, parsing, boost, split

我正在使用 boost::split 来解析数据文件。数据文件包含如下行。

数据.txt

```
1:1~15  ASTKGPSVFPLAPSS SVFPLAPSS   -12.6   98.3 
```

项目之间的空白是制表符。我必须拆分上述行的代码如下。

```
std::string buf;
/*Assign the line from the file to buf*/
std::vector<std::string> dataLine;
boost::split( dataLine, buf , boost::is_any_of("\t "), boost::token_compress_on);       //Split data line
cout << dataLine.size() << endl; 
```

对于上面的代码行，我应该打印出 5，但我得到 6。我试图通读文档，这个解决方案似乎应该做我想要的，显然我错过了一些东西。谢谢！

编辑：在 dataLine 上按如下方式运行 forloop，您会得到以下结果。

```
cout << "****" << endl;
for(int i = 0 ; i < dataLine.size() ; i ++) cout << dataLine[i] << endl;
cout << "****" << endl;

****
1:1~15
ASTKGPSVFPLAPSS
SVFPLAPSS
-12.6
98.3

**** 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T19:38:16.470

即使“相邻的分隔符合并在一起”，似乎尾随分隔符也会造成问题，因为即使将它们视为一个分隔符，它仍然*是*一个分隔符。

所以你的问题不能单独解决`split()`。但幸运的是 Boost String Algo 有[`trim()`and`trim_if()`](http://www.boost.org/doc/libs/1_53_0/doc/html/string_algo/usage.html#idp163415616)，它从字符串的开头和结尾去除空格或分隔符。所以只需调用`trim()`buf，如下所示：

```
std::string buf = "1:1~15  ASTKGPSVFPLAPSS SVFPLAPSS   -12.6   98.3    ";
std::vector<std::string> dataLine;
boost::trim_if(buf, boost::is_any_of("\t ")); // could also use plain boost::trim
boost::split(dataLine, buf, boost::is_any_of("\t "), boost::token_compress_on);
std::cout << out.size() << std::endl; 
```

已经问过这个问题：[boost::split 在字符串的开头和结尾留下空标记 - 这是理想的行为吗？](https://stackoverflow.com/q/10437406/2128694)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T19:38:27.880

我会推荐使用[C++ String Toolkit Library](http://www.partow.net/programming/strtk/index.html)。在我看来，这个库比 Boost 快得多。我曾经使用 Boost 来拆分（又名标记化）一行文本，但发现这个库更符合我的要求。

其中一件很棒的事情`strtk::parse`是将代币转换为最终值并检查元素的数量。

你可以这样使用它：

```
std::vector<std::string> tokens;

// multiple delimiters should be treated as one
if( !strtk::parse( dataLine, "\t", tokens ) )
{
    std::cout << "failed" << std::endl;
} 
```

--- 另一个版本

```
std::string token1;
std::string token2;
std::string token3:
float value1;
float value2;

if( !strtk::parse( dataLine, "\t", token1, token2, token3, value1, value2) )
{
     std::cout << "failed" << std::endl;
     // fails if the number of elements is not what you want
} 
```

该库的在线文档： [String Tokenizer Documentation](http://www.codeproject.com/Articles/23198/C-String-Toolkit-StrTk-Tokenizer) 源代码链接：[C++ String Toolkit Library](http://www.partow.net/downloads/strtk.zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:40:38.003

前导和尾随空格被故意留下，`boost::split`因为它不知道它是否重要。解决方案是`boost::trim`在调用之前使用`boost::split`.

```
#include <boost/algorithm/string/trim.hpp>

....

boost::trim(buf); 
```

# c++ - 编辑 tcp 客户端/服务器以创建反向波兰符号计算器服务器

> ID：15690391
> 
> 赞同：0
> 
> 时间：2013-03-28T19:21:49.240
> 
> 标签：c++, tcp

我正在尝试创建一个反向波兰符号计算器服务器，我得到了客户端和服务器的源代码“见下文”，并要求对其进行修改以创建服务器。我对如何创建计算器有一个想法，但是我在这个现有的服务器源代码中在哪里插入我的计算器代码。或者它是否进入现有的客户端源代码。

客户端源代码：

```
#include <netdb.h>
#include <netinet/in.h>
#include <unistd.h>
#include <iostream>
#include <cstring>
#include <stdlib.h>

#define MAX_LINE 100
#define LINE_ARRAY_SIZE (MAX_LINE+1)

using namespace std;

int main()
{
  int socketDescriptor;
  unsigned short int serverPort;
  struct sockaddr_in serverAddress;
  struct hostent *hostInfo;
  char buf[LINE_ARRAY_SIZE], c;

  cout << "Enter server host name or IP address: ";
  cin.get(buf, MAX_LINE, '\n');

  // gethostbyname() takes a host name or ip address in "numbers and
  // dots" notation, and returns a pointer to a hostent structure,
  // which we'll need later.  It's not important for us what this
  // structure is actually composed of.
  hostInfo = gethostbyname(buf);
  if (hostInfo == NULL) {
    cout << "problem interpreting host: " << buf << "\n";
    exit(1);
  }

  cout << "Enter server port number: ";
  cin >> serverPort;
  cin.get(c); // dispose of the newline

  // Create a socket.  "AF_INET" means it will use the IPv4 protocol.
  // "SOCK_STREAM" means it will be a reliable connection (i.e., TCP;
  // for UDP use SOCK_DGRAM), and I'm not sure what the 0 for the last
  // parameter means, but it seems to work.
  socketDescriptor = socket(AF_INET, SOCK_STREAM, 0);
  if (socketDescriptor < 0) {
    cerr << "cannot create socket\n";
    exit(1);
  }

  // Connect to server.  First we have to set some fields in the
  // serverAddress structure.  The system will assign me an arbitrary
  // local port that is not in use.
  serverAddress.sin_family = hostInfo->h_addrtype;
  memcpy((char *) &serverAddress.sin_addr.s_addr,
         hostInfo->h_addr_list[0], hostInfo->h_length);
  serverAddress.sin_port = htons(serverPort);

  if (connect(socketDescriptor,
              (struct sockaddr *) &serverAddress,
              sizeof(serverAddress)) < 0) {
    cerr << "cannot connect\n";
    exit(1);
  }

  cout << "\nEnter some lines, and the server will modify them and\n";
  cout << "send them back.  When you are done, enter a line with\n";
  cout << "just a dot, and nothing else.\n";
  cout << "If a line is more than " << MAX_LINE << " characters, then\n";
  cout << "only the first " << MAX_LINE << " characters will be used.\n\n";

  // Prompt the user for input, then read in the input, up to MAX_LINE
  // charactars, and then dispose of the rest of the line, including
  // the newline character.
  cout << "Input: ";
  cin.get(buf, MAX_LINE, '\n');
  while (cin.get(c) && c != '\n')
    ;

  // Stop when the user inputs a line with just a dot.
  while (strcmp(buf, ".")) {
    // Send the line to the server.
    if (send(socketDescriptor, buf, strlen(buf) + 1, 0) < 0) {
      cerr << "cannot send data ";
      close(socketDescriptor);
      exit(1);
    }

    // Zero out the buffer.
    memset(buf, 0x0, LINE_ARRAY_SIZE);

    // Read the modified line back from the server.
    if (recv(socketDescriptor, buf, MAX_LINE, 0) < 0) {
      cerr << "didn't get response from server?";
      close(socketDescriptor);
      exit(1);
    }

    cout << "Modified: " << buf << "\n";

    // Prompt the user for input, then read in the input, up to MAX_LINE
    // charactars, and then dispose of the rest of the line, including
    // the newline character.  As above.
    cout << "Input: ";
    cin.get(buf, MAX_LINE, '\n');
    while (cin.get(c) && c != '\n')
      ;
  }

  close(socketDescriptor);
  return 0;
} 
```

服务器源代码：

```
#include <arpa/inet.h>

#include <netdb.h>
#include <netinet/in.h>
#include <unistd.h>
#include <iostream>
#include <cstring>
#include <stdlib.h>

#define MAX_MSG 100
#define LINE_ARRAY_SIZE (MAX_MSG+1)

using namespace std;

int main()
{
  int listenSocket, connectSocket, i;
  unsigned short int listenPort;
  socklen_t clientAddressLength;
  struct sockaddr_in clientAddress, serverAddress;
  char line[LINE_ARRAY_SIZE];

  cout << "Enter port number to listen on (between 1500 and 65000): ";
  cin >> listenPort;

  // Create socket for listening for client connection requests.
  listenSocket = socket(AF_INET, SOCK_STREAM, 0);
  if (listenSocket < 0) {
    cerr << "cannot create listen socket";
    exit(1);
  }

  // Bind listen socket to listen port.  First set various fields in
  // the serverAddress structure, then call bind().
  // htonl() and htons() convert long integers and short integers
  // (respectively) from host byte order (on x86 this is Least
  // Significant Byte first) to network byte order (Most Significant
  // Byte first).
  serverAddress.sin_family = AF_INET;
  serverAddress.sin_addr.s_addr = htonl(INADDR_ANY);
  serverAddress.sin_port = htons(listenPort);

  if (bind(listenSocket,
           (struct sockaddr *) &serverAddress,
           sizeof(serverAddress)) < 0) {
    cerr << "cannot bind socket";
    exit(1);
  }

  // Wait for connections from clients.
  // This is a non-blocking call; i.e., it registers this program with
  // the system as expecting connections on this socket, and then
  // this thread of execution continues on.
  listen(listenSocket, 5);

  while (1) {
    cout << "Waiting for TCP connection on port " << listenPort << " ...\n";

    // Accept a connection with a client that is requesting one.  The
    // accept() call is a blocking call; i.e., this thread of
    // execution stops until a connection comes in.
    // connectSocket is a new socket that the system provides,
    // separate from listenSocket.  We *could* accept more
    // connections on listenSocket, before connectSocket is closed,
    // but this program doesn't do that.
    clientAddressLength = sizeof(clientAddress);
    connectSocket = accept(listenSocket,
                           (struct sockaddr *) &clientAddress,
                           &clientAddressLength);
    if (connectSocket < 0) {
      cerr << "cannot accept connection ";
      exit(1);
    }

    // Show the IP address of the client.
    // inet_ntoa() converts an IP address from binary form to the
    // standard "numbers and dots" notation.
    cout << "  connected to " << inet_ntoa(clientAddress.sin_addr);

    // Show the client's port number.
    // ntohs() converts a short int from network byte order (which is
    // Most Significant Byte first) to host byte order (which on x86,
    // for example, is Least Significant Byte first).
    cout << ":" << ntohs(clientAddress.sin_port) << "\n";

    // Read lines from socket, using recv(), storing them in the line
    // array.  If no messages are currently available, recv() blocks
    // until one arrives.
    // First set line to all zeroes, so we'll know where the end of
    // the string is.
    memset(line, 0x0, LINE_ARRAY_SIZE);
    while (recv(connectSocket, line, MAX_MSG, 0) > 0) {
      cout << "  --  " << line << "\n";

      // Convert line to upper case.
      for (i = 0; line[i] != '\0'; i++)
        line[i] = toupper(line[i]);

      // Send converted line back to client.
      if (send(connectSocket, line, strlen(line) + 1, 0) < 0)
        cerr << "Error: cannot send modified data";

      memset(line, 0x0, LINE_ARRAY_SIZE);  // set line to all zeroes
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:49:13.317

```
while (recv(connectSocket, line, MAX_MSG, 0) > 0) {
      //process line, so retrieve numbers, operation
      //and call calculator(numbers, operation) and 
      //convert result to string result
      // Send result back to client.
      if (send(connectSocket, result, strlen(line) + 1, 0) < 0)
        cerr << "Error: cannot send modified data"; 
```

# javascript - 将声音（wav）文件从目标 c 传递给 javascript

> ID：15690395
> 
> 赞同：1
> 
> 时间：2013-03-28T19:21:57.193
> 
> 标签：javascript, objective-c, audio, ios6

我正在用 Objective C 录制一个声音文件（wav 格式）。我想使用 Objective C **stringByEvaluatingJavaScriptFromString**将它传递回 Javascript 。我在想我必须将 wav 文件转换为 base64 字符串才能将其传递给这个函数。然后我将不得不在 javascript 中将 base64 字符串转换回 (wav/blob) 格式，以将其传递给音频标签以播放它。我不知道我该怎么做？也不确定这是否是将wave文件传回javascript的最佳方法？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:10:34.430

好吧，这并不像我预期的那样直截了当。所以这就是我能够做到这一点的方法。

第 1 步：我使用 AudioRecorder 以 caf 格式录制音频。

```
NSArray *dirPaths;
NSString *docsDir;

dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

soundFilePath = [docsDir stringByAppendingPathComponent:@"sound.caf"];

NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:AVAudioQualityMin],
    AVEncoderAudioQualityKey,
    [NSNumber numberWithInt:16],
    AVEncoderBitRateKey,
    [NSNumber numberWithInt:2],
    AVNumberOfChannelsKey,
    [NSNumber numberWithFloat:44100],
                                AVSampleRateKey,
    nil];

NSError *error = nil;

audioRecorder = [[AVAudioRecorder alloc]
                 initWithURL:soundFileURL
                 settings:recordSettings error:&error];

if(error)
{
    NSLog(@"error: %@", [error localizedDescription]);
} else {
    [audioRecorder prepareToRecord];
} 
```

在此之后，您只需要调用 audioRecorder.record 来录制音频。它将以caf格式记录。如果你想看我的 recordAudio 功能，那就在这里。

```
 (void) recordAudio
   {
    if(!audioRecorder.recording)
     {
         _playButton.enabled = NO;
         _recordButton.title = @"Stop";
         [audioRecorder record];
         [self animate1:nil finished:nil context:nil];

     }
    else
    {
       [_recordingImage stopAnimating];
       [audioRecorder stop];
       _playButton.enabled = YES;
      _recordButton.title = @"Record";
    }
  } 
```

第 2 步：将 caf 格式转换为 wav 格式。我可以使用以下功能执行此操作。

```
 -(BOOL)exportAssetAsWaveFormat:(NSString*)filePath
{
   NSError *error = nil ;

NSDictionary *audioSetting = [NSDictionary dictionaryWithObjectsAndKeys:
                              [ NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                              [ NSNumber numberWithInt:2], AVNumberOfChannelsKey,
                              [ NSNumber numberWithInt:16], AVLinearPCMBitDepthKey,
                              [ NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey,
                              [ NSNumber numberWithBool:NO], AVLinearPCMIsFloatKey,
                              [ NSNumber numberWithBool:0], AVLinearPCMIsBigEndianKey,
                              [ NSNumber numberWithBool:NO], AVLinearPCMIsNonInterleaved,
                              [ NSData data], AVChannelLayoutKey, nil ];

NSString *audioFilePath = filePath;
AVURLAsset * URLAsset = [[AVURLAsset alloc]  initWithURL:[NSURL fileURLWithPath:audioFilePath] options:nil];

if (!URLAsset) return NO ;

AVAssetReader *assetReader = [AVAssetReader assetReaderWithAsset:URLAsset error:&error];
if (error) return NO;

NSArray *tracks = [URLAsset tracksWithMediaType:AVMediaTypeAudio];
if (![tracks count]) return NO;

AVAssetReaderAudioMixOutput *audioMixOutput = [AVAssetReaderAudioMixOutput
                                               assetReaderAudioMixOutputWithAudioTracks:tracks
                                               audioSettings :audioSetting];

if (![assetReader canAddOutput:audioMixOutput]) return NO ;

[assetReader addOutput :audioMixOutput];

if (![assetReader startReading]) return NO;

NSString *title = @"WavConverted";
NSArray *docDirs = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [docDirs objectAtIndex: 0];
NSString *outPath = [[docDir stringByAppendingPathComponent :title]
                     stringByAppendingPathExtension:@"wav" ];

if(![[NSFileManager defaultManager] removeItemAtPath:outPath error:NULL])
{
    return NO;
}

soundFilePath = outPath;

NSURL *outURL = [NSURL fileURLWithPath:outPath];
AVAssetWriter *assetWriter = [AVAssetWriter assetWriterWithURL:outURL
                                                      fileType:AVFileTypeWAVE
                                                         error:&error];
if (error) return NO;

AVAssetWriterInput *assetWriterInput = [ AVAssetWriterInput assetWriterInputWithMediaType :AVMediaTypeAudio
                                                                            outputSettings:audioSetting];
assetWriterInput. expectsMediaDataInRealTime = NO;

if (![assetWriter canAddInput:assetWriterInput]) return NO ;

[assetWriter addInput :assetWriterInput];

if (![assetWriter startWriting]) return NO;

//[assetReader retain];
//[assetWriter retain];

[assetWriter startSessionAtSourceTime:kCMTimeZero ];

dispatch_queue_t queue = dispatch_queue_create( "assetWriterQueue", NULL );

[assetWriterInput requestMediaDataWhenReadyOnQueue:queue usingBlock:^{

    NSLog(@"start");

    while (1)
    {
        if ([assetWriterInput isReadyForMoreMediaData] && (assetReader.status == AVAssetReaderStatusReading)) {

            CMSampleBufferRef sampleBuffer = [audioMixOutput copyNextSampleBuffer];

            if (sampleBuffer) {
                [assetWriterInput appendSampleBuffer :sampleBuffer];
                CFRelease(sampleBuffer);
            } else {
                [assetWriterInput markAsFinished];
                break;
            }
        }
    }

    [assetWriter finishWriting];

    //[self playWavFile];
    NSError *err;
    NSData *audioData = [NSData dataWithContentsOfFile:soundFilePath options: 0 error:&err];
    [self.audioDelegate doneRecording:audioData];
    //[assetReader release ];
    //[assetWriter release ];
    NSLog(@"soundFilePath=%@",soundFilePath);
    NSDictionary *dict = [[NSFileManager defaultManager] attributesOfItemAtPath:soundFilePath error:&err];
    NSLog(@"size of wav file = %@",[dict objectForKey:NSFileSize]);
    //NSLog(@"finish");
}]; 
```

在这个函数中，我使用 wav 格式的 audioData 调用 audioDelegate 函数 doneRecording。这是 doneRecording 的代码。

```
-(void) doneRecording:(NSData *)contents
{
myContents = [[NSData dataWithData:contents] retain];
[self returnResult:alertCallbackId args:@"Recording Done.",nil];
}

// Call this function when you have results to send back to javascript callbacks
 // callbackId : int comes from handleCall function

// args: list of objects to send to the javascript callback
- (void)returnResult:(int)callbackId args:(id)arg, ...;
{
  if (callbackId==0) return;

  va_list argsList;
  NSMutableArray *resultArray = [[NSMutableArray alloc] init];

  if(arg != nil){
    [resultArray addObject:arg];
    va_start(argsList, arg);
    while((arg = va_arg(argsList, id)) != nil)
      [resultArray addObject:arg];
    va_end(argsList);
  }

   NSString *resultArrayString = [json stringWithObject:resultArray allowScalar:YES error:nil];
   [self performSelectorOnMainThread:@selector(stringByEvaluatingJavaScriptFromString:) withObject:[NSString stringWithFormat:@"NativeBridge.resultForCallback(%d,%@);",callbackId,resultArrayString] waitUntilDone:NO];
   [resultArray release];    
} 
```

第 3 步：现在是时候与 UIWebView 中的 javascript 进行通信了，我们已经完成了音频的录制，这样您就可以开始接受我们的数据块了。我正在使用 websockets 将数据传输回 javascript。数据将以块的形式传输，因为我使用的服务器（[https://github.com/benlodotcom/BLWebSocketsServer](https://github.com/benlodotcom/BLWebSocketsServer)）是使用 libwebsockets 构建的（[http://git.warmcat.com/cgi-bin/cgit/libwebsockets/](http://git.warmcat.com/cgi-bin/cgit/libwebsockets/)）。

这就是您在委托类中启动服务器的方式。

```
- (id)initWithFrame:(CGRect)frame 
{
  if (self = [super initWithFrame:frame]) {

      [self _createServer];
      [self.server start];
      myContents = [NSData data];

    // Set delegate in order to "shouldStartLoadWithRequest" to be called
    self.delegate = self;

    // Set non-opaque in order to make "body{background-color:transparent}" working!
    self.opaque = NO;

    // Instanciate JSON parser library
    json = [ SBJSON new ];

    // load our html file
    NSString *path = [[NSBundle mainBundle] pathForResource:@"webview-document" ofType:@"html"];
    [self loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:path]]];

  }
  return self;
}
-(void) _createServer
{
    /*Create a simple echo server*/
    self.server = [[BLWebSocketsServer alloc] initWithPort:9000 andProtocolName:echoProtocol];
    [self.server setHandleRequestBlock:^NSData *(NSData *data) {

        NSString *convertedString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"Received Request...%@",convertedString);

        if([convertedString isEqualToString:@"start"])
        {
            NSLog(@"myContents size: %d",[myContents length]);

            int contentSize = [myContents length];
            int chunkSize = 64*1023;
            chunksCount = ([myContents length]/(64*1023))+1;

            NSLog(@"ChunkSize=%d",chunkSize);
            NSLog(@"chunksCount=%d",chunksCount);

            chunksArray =  [[NSMutableArray array] retain];

            int index = 0;
            //NSRange chunkRange;

            for(int i=1;i<=chunksCount;i++)
            {

                if(i==chunksCount)
                {
                    NSRange chunkRange = {index,contentSize-index};
                    NSLog(@"chunk# = %d, chunkRange=(%d,%d)",i,index,contentSize-index);
                    NSData *dataChunk = [myContents subdataWithRange:chunkRange];
                    [chunksArray addObject:dataChunk];
                    break;
                }
                else
                {
                    NSRange chunkRange = {index, chunkSize};
                    NSLog(@"chunk# = %d, chunkRange=(%d,%d)",i,index,chunkSize);
                    NSData *dataChunk = [myContents subdataWithRange:chunkRange];
                    index += chunkSize;
                    [chunksArray addObject:dataChunk];
                }
            }

            return [chunksArray objectAtIndex:0];

        }
        else
        {
            int chunkNumber = [convertedString intValue];

            if(chunkNumber>0 && (chunkNumber+1)<=chunksCount)
            {
                return [chunksArray objectAtIndex:(chunkNumber)];
            }

        }

        NSLog(@"Releasing Array");
        [chunksArray release];
        chunksCount = 0;
        return [NSData dataWithBase64EncodedString:@"Stop"];
    }];
} 
```

javascript端的代码是

```
var socket;
var chunkCount = 0;
var soundBlob, soundUrl;
var smallBlobs = new Array();

function captureMovieCallback(response)
{
    if(socket)
    {
        try{
            socket.send('start');
        }
        catch(e)
        {
            log('Socket is not valid object');
        }

    }
    else
    {
        log('socket is null');
    }
}

function closeSocket(response)
{
    socket.close();
}

function connect(){
    try{
        window.WebSocket = window.WebSocket || window.MozWebSocket;

        socket = new WebSocket('ws://127.0.0.1:9000',
                                      'echo-protocol');

        socket.onopen = function(){
        }

        socket.onmessage = function(e){
            var data = e.data;
            if(e.data instanceof ArrayBuffer)
            {
                log('its arrayBuffer');
            }
            else if(e.data instanceof Blob)
            {
                if(soundBlob)
                   log('its Blob of size = '+ e.data.size + ' final blob size:'+ soundBlob.size);

                if(e.data.size != 3)
                {
                    //log('its Blob of size = '+ e.data.size);
                    smallBlobs[chunkCount]= e.data;
                    chunkCount = chunkCount +1;
                    socket.send(''+chunkCount);
                }
                else
                {
                    //alert('End Received');
                    try{
                    soundBlob = new Blob(smallBlobs,{ "type" : "audio/wav" });
                    var myURL = window.URL || window.webkitURL;
                    soundUrl = myURL.createObjectURL(soundBlob);
                    log('soundURL='+soundUrl);
                    }
                    catch(e)
                    {
                        log('Problem creating blob and url.');
                    }

                    try{
                        var serverUrl = 'http://10.44.45.74:8080/MyTestProject/WebRecording?record';
                        var xhr = new XMLHttpRequest();
                        xhr.open('POST',serverUrl,true);
                        xhr.setRequestHeader("content-type","multipart/form-data");
                        xhr.send(soundBlob);
                    }
                    catch(e)
                    {
                        log('error uploading blob file');
                    }

                    socket.close();
                }

                //alert(JSON.stringify(msg, null, 4));
            }
            else
            {
                log('dont know');
            }
        }

        socket.onclose = function(){
            //message('<p class="event">Socket Status: '+socket.readyState+' (Closed)');
            log('final blob size:'+soundBlob.size);
        }

    } catch(exception){
       log('<p>Error: '+exception);
    }
}

function log(msg) {
    NativeBridge.log(msg);
}
function stopCapture() {
    NativeBridge.call("stopMovie", null,null);
}

function startCapture() {
    NativeBridge.call("captureMovie",null,captureMovieCallback);
} 
```

NativeBridge.js

```
var NativeBridge = {
  callbacksCount : 1,
  callbacks : {},

  // Automatically called by native layer when a result is available
  resultForCallback : function resultForCallback(callbackId, resultArray) {
    try {

    var callback = NativeBridge.callbacks[callbackId];
    if (!callback) return;
    console.log("calling callback for "+callbackId);
    callback.apply(null,resultArray);
    } catch(e) {alert(e)}
  },

  // Use this in javascript to request native objective-c code
  // functionName : string (I think the name is explicit :p)
  // args : array of arguments
  // callback : function with n-arguments that is going to be called when the native code returned
  call : function call(functionName, args, callback) {

    //alert("call");
    //alert('callback='+callback);
    var hasCallback = callback && typeof callback == "function";
    var callbackId = hasCallback ? NativeBridge.callbacksCount++ : 0;

    if (hasCallback)
      NativeBridge.callbacks[callbackId] = callback;

    var iframe = document.createElement("IFRAME");
    iframe.setAttribute("src", "js-frame:" + functionName + ":" + callbackId+ ":" + encodeURIComponent(JSON.stringify(args)));
    document.documentElement.appendChild(iframe);
    iframe.parentNode.removeChild(iframe);
    iframe = null;

  },

    log : function log(message) {

        var iframe = document.createElement("IFRAME");
        iframe.setAttribute("src", "ios-log:"+encodeURIComponent(JSON.stringify("#iOS#" + message)));
        document.documentElement.appendChild(iframe);
        iframe.parentNode.removeChild(iframe);
        iframe = null;

    }

}; 
```

1.  我们在 html 端的 body 负载上调用 javascript 端的 connect()

2.  一旦我们从 startCapture 函数接收到回调（captureMovieCallback），我们就会发送开始消息，表明我们已准备好接受数据。

3.  目标 c 端的服务器将 wav 音频数据拆分为 chunksize=60*1023 的小块并存储在数组中。

4.  将第一个块发送回 javascript 端。

5.  javascript 接受这个块并从服务器发送它需要的下一个块的数量。

6.  服务器发送由该数字指示的块。重复此过程，直到我们将最后一个块发送到 javascript。

7.  最后，我们将停止消息发送回 javascript 端，表明我们已完成。它的大小显然是 3 个字节（用作打破此循环的标准。）

8.  每个块都存储为数组中的小块。现在我们使用以下行从这些小斑点创建一个更大的斑点

    soundBlob = new Blob(smallBlobs,{ "type" : "audio/wav" });

    该 blob 被上传到服务器，该服务器将该 blob 写入为 wav 文件。我们可以将 url 作为音频标签的 src 传递给这个 wav 文件，以便在 javascript 端重放它。

9.  我们在将 blob 发送到服务器后关闭 websocket 连接。

    希望这足够清楚，可以理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:32:06.040

如果您只想播放声音，那么最好使用 iOS 中的一种本地音频播放系统而不是 HTML 音频标签。

# c# - 领域事件模式单点队列事件

> ID：15690396
> 
> 赞同：4
> 
> 时间：2013-03-28T19:22:02.233
> 
> 标签：c#, generics, domain-events

我在这里提出了一个问题：[Raising Domain Events For Multiple Subscribers](https://stackoverflow.com/questions/15449577/raising-domain-events-for-multiple-subscribers)，答案让我想到了以下模式，我可以像这样拥有 IEventPublisher：

```
public interface IEventPublisher<T>
{
    void Publish(T data);
} 
```

和这样的 IEventSubscriber ：

```
public interface IEventSubscriber<T>
{
    void Handle(T data);
} 
```

问题是我需要将每个发布者的实例传递给构造函数，如下所示：

```
public Service(IEventPublisher<ThingyChangedEvent> publisherThingyChanged)
{
   // Set publisher to local variable
}

// then call this in a method
_publisherThingyChanged.Publish(new ThingyChangedEvent { ThingyId = model.Id}); 
```

理想情况下，我希望能够拥有一个包含任何 IEventPublishers 的通用发布者，这样我就可以调用类似的东西：

```
_genericPublisher.Publish(new ThingyChangedEvent { ThingyId = model.Id}); 
```

我无法弄清楚如何做到这一点，因为我无法传递 IEventPublisher 的集合而不将 T 定义为在此示例中为 ThingyChangedEvent 而我想要的是根据传递给通用发布者的类型来确定发布者.

任何建议都非常感谢。

**编辑：**

好的，使用下面的答案和这里的一些信息：[http](http://www.udidahan.com/2009/06/14/domain-events-salvation/) ://www.udidahan.com/2009/06/14/domain-events-salvation/我想出了以下内容，但不完全存在：

```
public interface IEventManager
{
  void Publish<T>(T args) where T : IEvent;
} 
```

公共类 EventManager : IEventManager { Autofac.ILifetimeScope _container;

```
public EventManager(Autofac.ILifetimeScope container)
{
  _container = container;
}

//Registers a callback for the given domain event
public void Publish<T>(T args) where T : IEvent
{
  var subscribersProvider = _container.Resolve<IEventSubscribersProvider<T>>();
  foreach (var item in subscribersProvider.GetSubscribersForEvent())
  {
    item.Handle(args);
  }
} 
```

}

我现在可以在由 autofac 解析的构造函数中获取 IEventManager eventManager 的实例，并按如下方式调用它：

```
_eventManager.Publish<ThingyChangedEvent>(new ThingyChangedEvent() { ThingyId = Guid.NewGuid() }); 
```

这是我不喜欢这个解决方案的地方：

我不想在构造函数中获取 ILifetimeScope 的实例，我希望能够获取 IEventSubscribersProvider 的集合，但如果我要求说，autofac 将无法解决此问题：

```
 IEnumerable<IEventSubscribersProvider<IEvent>> 
```

如果我将类型传递给 Publish 并调用，我只能解决它：

```
Resolve<IEventSubscribersProvider<T>>. 
```

第二个问题不是什么大问题，但如果能够调用发布而不必像这样传递类型，那就太好了：

```
_eventManager.Publish(new ThingyChangedEvent() { ThingyId = Guid.NewGuid() }); 
```

我想如果有人对如何解决这两个问题有任何建议，尤其是问题 1，因为我不喜欢在不同的项目中依赖 Autofac。我唯一能想到的是某种类型的管理器类，它明确地接受我需要的东西，如下所示：

```
public SomeConstructor(
    IEventSubscribersProvider<ThingyChangedEvent> thingChangedSubscribeProviders,
    IEventSubscribersProvider<SomeOtherEvent> someOtherSubscribeProviders,
    etc....)
{
     // Maybe take the EventManager as well and add them to it somehow but would be
     // far easier to take a collection of these objects somehow?
} 
```

非常感谢您的任何建议。

**编辑 2**

经过大量研究并[在运行时查看此 Autofac 通用服务解决方案后，](https://stackoverflow.com/questions/8579128/autofac-generic-service-resolution-at-runtime)我不确定我能否实现我想要的。我能想出的最佳解决方案是：

```
public interface IEventSubscribersProviderFactory : Amico.IDependency
{
  IEventSubscribersProvider<T> Resolve<T>() where T : IEvent;
}

public class EventSubscribersProviderFactory : IEventSubscribersProviderFactory
{ 
  Autofac.ILifetimeScope _container;

  public EventSubscribersProviderFactory(Autofac.ILifetimeScope container)
  {
    _container = container;
  }

  public IEventSubscribersProvider<T> Resolve<T>() where T : IEvent
  {
    return _container.Resolve<IEventSubscribersProvider<T>>();
  }
} 
```

然后让 EventManager 在构造函数中使用 IEventSubscribersProviderFactory 以从该项目中删除对 Autofac 的依赖。

我现在会这样做，但希望能找到一个更好的长期解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T01:17:54.137

当您必须处理多种类型的事件时，它可能会变得有点复杂。您可能已经注意到，您不能只使用派生泛型类型并期望像基本泛型一样使用它——.NET 变体不支持您想要使用它的地方。

您需要一个“基本”类型，它是您接受为“事件”的最小（或最窄）类型。我通常使用[标记界面](http://en.wikipedia.org/wiki/Marker_interface_pattern)，例如`public interface IEvent{}`. 当然，您可以从`Object`; 但我发现使用标记接口来明确订阅或发布“事件”这一事实很有用（这意味着您不能只发布任何类型的对象，只能发布“事件”）。

从处理多类型方面来看，您需要编写一个类来进行缩小（采用派生类型并将相同的对象“发布”为派生类型）。即使这样，您也需要通过适当的较窄实例来路由您的事件（以“绕过”方差限制）。然后，当然，您可以有多个订阅者订阅相同的事件类型；所以你需要一些东西来将事件路由到多个订阅者。这通常称为多路复用器，它是`IEventPublisher`. 每种事件类型都需要一个多路复用器——这将使用较窄的。给定事件使用哪个多路复用器取决于类型，因此多路复用器的集合将由字典管理，因此您可以按类型查找它们。然后，要按类型将事件发布给多个订阅者，您只需查找多路复用器并调用其`IEventPublisher.Publish`方法即可。管理多路复用器的东西是一种类型，`IEventPublisher`通常称为[调度](http://eaipatterns.com/MessageDispatcher.html)程序（有些人可能称之为路由器）。

例如：

```
public class NarrowingSubscriber<TBase, TDerived> : IEventSubscriber<TBase>
    where TDerived : TBase
    where TBase : IEvent
{
    private IEventSubscriber<TDerived> inner;

    public NarrowingSubscriber(IEventSubscriber<TDerived> inner)
    {
        if (inner == null) throw new ArgumentNullException("inner");
        this.inner = inner;
    }

    public void AttachSubscriber(IEventSubscriber<TDerived> subscriber)
    {
        inner = subscriber;
    }

    public void Handle(TBase data)
    {
        inner.Handle((TDerived)data);
    }
}

public class Multiplexor<T> : IEventSubscriber<T> where T : IEvent
{
    private readonly List<IEventSubscriber<T>> subscribers =
        new List<IEventSubscriber<T>>();

    public void AttachSubscriber(IEventSubscriber<T> subscriber)
    {
        subscribers.Add(subscriber);
    }

    public void RemoveSubscriber(IEventSubscriber<T> subscriber)
    {
        subscribers.Remove(subscriber);
    }

    public void Handle(T data)
    {
        subscribers.ForEach(x => x.Handle(data));
    }
}

public class Dispatcher<TBase> : IEventPublisher<TBase> where TBase : IEvent
{
    private readonly Dictionary<Type, Multiplexor<TBase>> subscriptions =
        new Dictionary<Type, Multiplexor<TBase>>();

    public void Publish(TBase data)
    {
        Multiplexor<TBase> multiplexor;
        if (subscriptions.TryGetValue(data.GetType(), out multiplexor))
        {
            multiplexor.Handle(data);
        }
    }

    public void Subscribe<TEvent>(IEventSubscriber<TEvent> handler)
        where TEvent : TBase
    {
        Multiplexor<TBase> multiplexor;
        if (!subscriptions.TryGetValue(typeof(TEvent), out multiplexor))
        {
            multiplexor = new Multiplexor<TBase>();
            subscriptions.Add(typeof(TEvent), multiplexor);
        }
        multiplexor.AttachSubscriber(new NarrowingSubscriber<TBase, TEvent>(handler));
    }
} 
```

所以，你基本上发布了 4 次。一次到调度器，一次到多路复用器，一次到更窄，一次到非基础设施订户。如果您有两个订阅者（`EventOneEventSubscriber`和`EventTwoEventSubscriber`）订阅了两种类型的事件（`EventOne`和`EventTwo`），那么您可以创建一个调度程序并像这样发布事件：

```
var d = new Dispatcher<IEvent>();
var eventTwoSubscriber = new EventTwoEventSubscriber();
d.Subscribe(eventTwoSubscriber);
var eventOneSubscriber = new EventOneEventSubscriber();
d.Subscribe(eventOneSubscriber);

d.Publish(new EventOne());
d.Publish(new EventTwo()); 
```

当然，事件将派生自 IEvent：

```
public class EventOne : IEvent
{
}

public class EventTwo : IEvent
{
} 
```

此特定限制未考虑多次调度事件。例如，我可以拥有一个订阅者`EventOne`和一个订阅者`IEvent`。`EventOne`如果一个对象是通过调度程序发布的，这个实现只是发布给订阅者`EventOne`——它不会发布给`IEvent`订阅者。我将把它作为练习留给读者:)

# 更新：

如果您希望做的是自动连接订阅者而无需构建它们（我认为这没有多大价值，请考虑使用[Composition Root](http://bit.ly/14Bi8V6)），那么您可以向`Dispatcher`（或其他地方，如果需要）订阅所有兼容的订阅者：

```
public void InitializeSubscribers()
{
    foreach (object subscriber in
        from assembly in AppDomain.CurrentDomain.GetAssemblies()
        from type in assembly.GetTypes()
        where !type.IsAbstract && type.IsClass && !type.ContainsGenericParameters &&
              type.GetInterfaces().Any(t => t.IsGenericType &&
                                            t.GetGenericTypeDefinition() == typeof (IEventSubscriber<>))
        select type.GetConstructor(new Type[0])
        into constructorInfo
        where constructorInfo != null
        select constructorInfo.Invoke(new object[0]))
    {
        Subscribe((dynamic) subscriber);
    }
} 
```

您将在其中使用如下：

```
var d = new Dispatcher<IEvent>();
d.InitializeSubscribers(); 
```

`Dispatcher<T>`...如果需要，使用容器来解析对象。

# java - 从 JSP 页面调用的方法中总是抛出异常

> ID：15690400
> 
> 赞同：-2
> 
> 时间：2013-03-28T19:22:19.750
> 
> 标签：java, sql, jsp, postgresql, sqlexception

这是一个我知道有效并返回 14 的测试查询。

```
private static final String TEST = "SELECT album_id FROM Album"; 
```

每次执行以下方法时，都会抛出异常并返回变量x而不是我的album_id

```
public String getAlbumId(String email, String album_name) {
    PreparedStatement stmt = null;
    Connection conn = null;
    ResultSet rs = null;
    try{
        conn = DbConnection.getConnection();
        stmt = conn.prepareStatement(TEST);
        //stmt.setString(1, email);
        //stmt.setString(2, album_name);
        rs = stmt.executeQuery();
        String album_id = rs.getString(1);
        return album_id;
    }
    catch(SQLException e) { String x="-1"; return x; }
} 
```

调用该方法的jsp代码部分如下：

```
<table>
<%
  AlbumDao album2 = new AlbumDao();
  String myid;
  int actualid;
  for(String item : album_names) {
      myid = album2.getAlbumId(email,item);
      actualid = Integer.parseInt(myid);
      System.out.println(myid);
%>
<tr>
  <td><a href="display_album.jsp?album_id=<%=actualid%>"><% out.print(item);%></a></td>
</tr>
  <%}%> 
```

代码我已经看了几十遍了，还是搞不懂。为什么会发生这种情况？

printStackTrace() 的输出如下（抱歉输出太长）：

```
org.postgresql.util.PSQLException: ResultSet not positioned properly, perhaps you need to call next.
    at org.postgresql.jdbc2.AbstractJdbc2ResultSet.checkResultSet(AbstractJdbc2ResultSet.java:2452)
    at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getString(AbstractJdbc2ResultSet.java:1882)
    at org.apache.tomcat.dbcp.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:174)
    at photoshare.AlbumDao.getAlbumId(AlbumDao.java:66)
    at org.apache.jsp.index_jsp._jspService(org.apache.jsp.index_jsp:103)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:524)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
   at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:667)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
    at java.lang.Thread.run(Thread.java:595) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:32:33.513

你需要先`rs.next()`打电话 `rs.getString(1)`。例外也暗示了同样的事情。

# jquery - 设置名称以在提供链接时打开特定视频

> ID：15690401
> 
> 赞同：0
> 
> 时间：2013-03-28T19:22:36.490
> 
> 标签：jquery, html, lightbox

 在我的网页上，我有一个视频链接。如果我希望用户导航到视频并观看它，链接本身可以正常工作，但我希望它在灯箱中弹出以供点击查看。 

可以在[此链接](http://continentalgold.com/English/investors/media-center/video-gallery/default.aspx#aniVid)中找到此工作的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:29:04.620

您在该链接上提供的示例正在使用`fancybox`（特别是版本 1.3.4），您可以在[http://fancybox.net/](http://fancybox.net/)找到该示例。它背后的魔力不在于`name`标签，而`class`在于应用于`a`.

具体来说，`a`标签是这样写的：

```
<a href="http://example.com/video/12345678" class="fancyboxiframe">link text</a> 
```

以下脚本在运行时会产生我认为您正在寻找的效果：

```
$('a.fancyboxiframe ,.Video a[href*="vimeo"]').fancybox({
    'type':   'iframe',
    'height':  464, 
    'width' :  853
}); 
```

这会激活`fancybox`jQuery 插件，该插件会告诉浏览器，当您单击链接时，您想要将其弹出到`iframe`基于 - 的灯箱中。

根据 API：

> > 'type'：强制内容类型。可以设置为'image'、'ajax'、'iframe'、'swf'或'inline'

尝试查看站点上插件的文档。它非常易于使用，并且应该为您提供所需的内容，同时还配备了上述脚本作为示例。

# c++ - OpenGL - 旋转 180 度后对象反转

> ID：15690402
> 
> 赞同：0
> 
> 时间：2013-03-28T19:22:45.177
> 
> 标签：c++, opengl, rotation

我渲染了一个对象，我正在尝试用鼠标旋转对象。对象将正常旋转 180 度，但在那之后，对象会反转（如果面向相机，则切换为背对相机），就像鼠标的预期移动一样，即如果向右拖动鼠标会顺时针旋转对象，然后它现在将逆时针旋转。一旦达到下一个 180 度，它就会再次反转并恢复正常。我敢肯定一定有一些我没有看到的简单的东西？

这是我的代码：

```
// Detect mouse state
void
mouse(int button, int state, int x, int y)
{
    if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN)
    {
        moving = 1;
        beginX = x;
        beginY = y;
    }
    if (button == GLUT_LEFT_BUTTON && state == GLUT_UP)
    {
        moving = 0;
    }
}

// Detect mouse movement
void motion(int x, int y)
{
    if (moving)
    {
        angleX = (angleX + (x - beginX));
        angleY = (angleY + (y - beginY));
        beginX = x;
        beginY = y;
        newModel = 1;
        glutPostRedisplay();
    }
}

// Rotate object
void recalcModelView(void)
{
    // Get object's centre
    int hh = head->GetHeight() / 2;
    int hw = head->GetWidth() / 2;
    int hd = head->GetDepth() / 2;
    glPopMatrix();
    glPushMatrix();
    // Rotate object based on mouse movement
    glTranslatef(hw, hd, hh);
    float temp1 = angleX / 5;
    float temp2 = angleY / 5;
    printf("TEMP1: %g\n", temp1);
    printf("TEMP2: %g\n", temp2);
    glRotatef(temp1, 0.0, 1.0, 0.0);
    glRotatef(-temp2, 1.0, 0.0, 0.0);
    glTranslatef(-hw, -hd, -hh);
    newModel = 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:38:43.397

Use something like [Arcball](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Arcball) to fix this.

# javascript - 在 IE 怪癖模式下按类选择元素

> ID：15690404
> 
> 赞同：0
> 
> 时间：2013-03-28T19:22:52.147
> 
> 标签：javascript, html, bookmarklet

我正在尝试为在 IE 中以怪癖模式呈现的页面创建一个小书签。我无法控制页面的来源，因此告诉我更改文档类型将不起作用。

无论如何，我试图通过它的类来获取一个元素，但似乎 getElementsByClassName 和 querySelectorAll 在怪癖模式下不起作用。除了走 dom，还有其他方法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:06:46.680

您可以为无法执行 querySelector 的浏览器创建一个实用程序 - 请注意，此示例返回一个数组，而不是节点列表。

```
function classReunion(classname, tag, parent){
    var A= [], elements, L, who,
    rx= RegExp(/'\\b'+classname+'\\b');
    tag= tag || '*';
    parent= parent || document;
    elements= parent.getElementsByTagName(tag);
    L= elements.length;
    while(L){
        who= elements[--L];
        if(rx.test(who.className)) A.push(who);
    }
    return A;
} 
```

旧的浏览器确实依靠“遍历” dom 来按类收集元素组。

# javascript - 如何从页面中获取所有 div 属性 ID？

> ID：15690411
> 
> 赞同：0
> 
> 时间：2013-03-28T19:23:31.387
> 
> 标签：javascript, jquery

我想让 jquery 给我`ID`页面中所有 div 的属性吗？

我有这样的东西

```
var divs = $('div').attr('id'); 
```

这返回没有子对象？

**html文件**

```
`   <script type="text/x-handlebars" data-template-name="select">
    <div id="comp_select">
        <div id="language">
            Language: {{view PortalComp.selectView}}
        </div>
    </div>
</script>` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:24:52.407

好吧，首先，`attr`返回一个字符串，而不是一个集合。其次，它只返回调用它的集合中*第一个元素的所需属性值。*用于`each`在将值输入数组之前迭代集合。

```
var arr = [];
$('div').each(function(){
    arr.push($(this).attr('id'));
});
arr = arr.filter(function(i,v){return v}); 
```

编辑：正如[这个答案](https://stackoverflow.com/a/15690481/1726343)正确指出的那样，需要采取预防措施以确保您没有来自没有 ID 的 div 的空数组值。在我的示例中，我使用 过滤掉了空值`filter`，但更好的方法是使用更窄的选择器，即`div[id]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:28:27.713

为了确保你只迭代那些有 id 的人，使用`div[id]`作为选择器，像这样：

```
var ids = [];
$('div[id]').each(function(){
    ids.push( this.id );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:26:32.873

**jQuery** :

```
$("div").each(function(){
        alert($(this).attr("id"));
}); 
```

**标记**：

```
<div id="1"></div>
<div id="2"></div>
<div id="3"></div>
<div id="4"></div>
<div id="5"></div> 
```

**jsFiddle**：http: [//jsfiddle.net/UGbHB/](http://jsfiddle.net/UGbHB/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T19:27:48.397

```
var ids = jQuery.map($('div[id]'), function(el) {
    el.id;
}); 
```

# html - 在 LI 中浮动 LI

> ID：15690417
> 
> 赞同：0
> 
> 时间：2013-03-28T19:24:06.707
> 
> 标签：html, css

我在使用代码编辑器时遇到问题，所以在这里

```
<ul>
    <li>Item1</li>
    <ul>
        <li>Item 1.1</li>
        <li>Item 1.2</li>
    </ul>
    <li>Item2</li>
    <ul>
        <li>Item 2.1</li>
        <li>Item 2.2</li>
    </ul>
</ul> 
```

我想浮动元素以获得这样的结果：

![http://adamaweb.com/faqme/target.png](../Images/2d5259c9c74098279589afa6e2750758.png)

这个标记有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:32:05.010

您的 HTML 无效，因为内部`<ul>`s 必须包含在`<li>`s 中。假设您不会嵌套多个s `<ul>`，这可以通过制作除最内层之外的所有`<ul>`and来实现`<li>` `display: inline-block``<li>`

[http://jsfiddle.net/zeVwg/](http://jsfiddle.net/zeVwg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:31:59.900

你可以做这样的事情

**CSS**

```
ul li { 
    display: inline;
    vertical-align: top;
}
li > ul { display: inline-block; }
li > ul li { display: block; } 
```

**HTML**

```
<ul>
    <li>Item1
        <ul>
            <li>Item 1.1</li>
            <li>Item 1.2</li>
        </ul>
    </li>
    <li>Item2
        <ul>
            <li>Item 2.1</li>
            <li>Item 2.2</li>
        </ul>
    </li>
</ul> 
```

测试它的[小提琴。](http://jsfiddle.net/ragnarokkr/emxKD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:32:11.810

首先，您需要像这样调整 HTML：

```
<ul>
    <li>Item1
        <ul>
            <li>Item 1.1</li>
            <li>Item 1.2</li>
        </ul>
    </li>

    <li>Item1
        <ul>
            <li>Item 1.1</li>
            <li>Item 1.2</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T23:07:17.810

**HTML：**

```
<ul>
    <li>Item1
        <ul>
            <li>Item 1.1</li>
            <li>Item 1.2</li>
        </ul>
    </li>
    <li>Item2
        <ul>
            <li>Item 2.1</li>
            <li>Item 2.2</li>
        </ul>
    </li>
</ul> 
```

**CSS：**

```
ul li { float:left; position:relative; margin-left:10px; list-style:none; width:120px;}
ul li:first-child{ margin:0px;}

ul ul { position:absolute; left:0; top:0; display:none; width:100px; z-index:10;}

ul li:hover ul{ display:block;}

ul ul li{ float:none; margin-left:0px; margin-top:5px; width:100px;}
ul ul li:first-child{ margin-top:0px;} 
```

我已经做了一个导航，当我们将 li 悬停在其中时，它的列表就会出现。

# ruby-on-rails - 红宝石，导轨，常量，resque

> ID：15690422
> 
> 赞同：1
> 
> 时间：2013-03-28T19:24:47.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring, constants

我有一堆是 resque 作业的类，我只是注意到我在每个命名的 RECEIVER 中定义了一个常量，其中包含作业结果的电子邮件分发列表。

如果我有一个常量 RECEIVER = "emails" 并在多个类中定义它，那么 ruby​​/rails 中的默认行为是什么。每个类在初始化时将 RE​​CEIVER 的值分配给该类的一个实例。

只是试图想出最好的方法来重构这样的东西。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:37:00.453

它在每个类中分别定义。重构以防止代码重复的最佳方法是使用`module`

```
module CommonMethods
   RECEIVER = "emails"
end 
```

然后在你的课上：

```
class SomeClass
  include CommonMethods

  #do stuff
end 
```

这样，电子邮件列表只在一个地方定义。

您还可以在此处定义所有类通用的其他方法。

# netbeans-7.2 - 在 NetBeans 中将 web.xml 升级到 2.4 或更高版本

> ID：15690427
> 
> 赞同：3
> 
> 时间：2013-03-28T19:24:56.053
> 
> 标签：netbeans-7.2

我正在使用带有 APACHE tomcat 7.0.27.0 版本服务器的 NetBeans IDE 7.2.1 版本。我正在尝试在我的项目中创建一个 servlet 文件，但它显示以下消息或错误-

“不支持 Web 应用程序版本。将 web.xml 升级到 2.4 或更高版本或使用以前版本的 NetBeans。”

我该如何解决它请回复-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T08:03:42.307

我遇到了这个问题，我以一种相当奇怪的方式解决了它。我删除了 web.xml 文件，创建了 servlet 并替换了 web.xml 文件，它工作正常。

我建议您从[http://forums.netbeans.org/获得更好的解决方案](http://forums.netbeans.org/)

# grails - Grails - 将 JSON/Map 对象传递给客户端

> ID：15690430
> 
> 赞同：3
> 
> 时间：2013-03-28T19:25:08.123
> 
> 标签：grails, gsp

我正在尝试将 JSON 对象保存到`data-`gsp 页面中的字段。

模拟控制器：

```
def test(){
    ['comments': ["1": 1, "3":40 ] ] 
} 
```

GSP（我也试过`(comments as JSON)`）

```
<%@ page import="grails.converters.JSON" %>
<div class='findme' data-comments="${comments as JSON}"> 
```

结果：

```
<div class='findme' data-comments="{" 1":1,"3":40}"> 
```

正如你所看到的，报价都搞砸了。我尝试使用`encodeAsHTML`但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T17:32:11.127

我最近也遇到了这个问题，并提出了两个解决方案：

**解决方案一**：在模板中这样做：

```
<div class="comments" data-comments="${comments.encodeAsJSON().encodeAsHTML()}"> 
```

**解决方案二**：在控制器中这样做：

```
def test(){
    ['comments': ["1": 1, "3":40 ] as JSON] 
} 
```

并在模板中这样做：

```
<div class="comments" data-comments="${comments.encodeAsHTML()}"> 
```

我正在使用 jQuery 进行解析。无论使用哪种解决方案，我都会得到这样的 JSON：

```
$.parseJSON($('.comments').attr('data-comments')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:44:40.333

我找到了几种方法来做到这一点。

```
<div class='findme' data-comments="${(new JSON(comments)).toString().encodeAsURL()}"> 
```

然后我必须像这样把它拉出来：

```
JSON.parse(unescape($('.findme').data('comments'))) 
```

* * *

找到了另一种方法，但如果你有任何带有 " 的东西，它会导致问题。我认为编码它是要走的路。

```
${(comments as JSON).toString().replace("\"", "'")} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T13:15:58.833

我找到了一种简单的方法来做到这一点。首先你做：

```
<div class="comments" data-comments="${comments.encodeAsJSON()}"> 
```

然后在javascript中：

```
eval($('.comments').attr('data-comments')); 
```

# python - Gnumeric Python 插件：服务 file_opener 和 file_saver

> ID：15690435
> 
> 赞同：2
> 
> 时间：2013-03-28T19:25:36.213
> 
> 标签：python, gnome, pygobject, gnumeric

是否可以为`file_opener`and`file_saver`服务编写一个 gnumeric python 插件？

[它似乎在 python-loader 插件中实现，在Gnome 文档](https://git.gnome.org/browse/gnumeric/tree/plugins/python-loader/python-loader.c "python-loader.c")中有相应的部分。

但是*示例*插件[gnome-glossary](https://git.gnome.org/browse/gnumeric/tree/plugins/gnome-glossary)，它是 python`file_saver`插件，会引发错误`ImportError: No module named gsf`，我无法写入 API 给出的输出对象：

```
def so_file_save(wb, output):
    output.props.write("toto") 
```

产生错误：

```
Exception Python (<type 'exceptions.AttributeError'> : 'gobject.GProps' object has no attribute 'write') 
```

而这个 gobject.GProps 对象声称是`__gtype__ : GsfOutputStdio`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:58:21.147

很久以前就不再支持“libgsf”的 python 绑定。正如您可以在旧的[README-python](https://git.gnome.org/browse/libgsf/tree/python/README-python?id=d6cf9a1a14809504c8d287de8a99e62ddfbba15f)中阅读的那样：

> 我在 2002 年编写了这些绑定，从那以后它们就没有更新过。它们从来都不是标准构建的一部分，但可以按照以下说明构建它们。可能需要一些工作才能使它们与当前版本的 autotools 和 pygobject 一起工作。绑定必须重新验证，并扩展以匹配 libgsf 的当前 API。
> 
> 我不打算对这些绑定做进一步的工作。如果有人想接他们，请随意。
> 
> Jon K Hellan [...] 2006-02-24

这就解释了为什么`gnome-glossary`会失败。此外，参数输出似乎有问题，显示为 a `GObject`，但不是`GsfOutputStdio`（您只能看到属性，但您无权访问任何方法。

这不是您正在寻找的解决方案，而是尝试解释您所看到的内容。

# java - java中的多线程静态方法

> ID：15690445
> 
> 赞同：3
> 
> 时间：2013-03-28T19:26:11.550
> 
> 标签：java, multithreading, static, static-methods

我正在编写一个静态实用程序方法。我知道方法`isEmpty()`并且`isNew()`是线程安全的。在`getTotal(...)`我使用`StringBuilder`作为参数的方法中，与 String 和 int 一起使用。`StringBuilder`是可变的。`getTotal()`线程安全吗？如果是这样，请解释为什么即使 StringBuilder 是可变的。我不确定是否`getCharge()`是线程安全的，因为它正在调用方法`getTotal()`。有人可以判断它是否是线程安全的吗？

```
public class NewStringUtils {

    public static boolean  isEmpty(String s){
        return (s == null || s.trim().length()==0);
    }

    public static boolean isNew(String code){
        return( "1009".equals(code) || "1008".equals(code) );
    }
    //StringBuilder is  mutable  -- is the below method threadsafe 
    public static int getTotal(StringBuilder sb,String oldCode ,int a, int b){
        //Is it Threadsafe or not .If so  just bcz every thread invoking this method will have its own copy and other threads can't see its value ?? 
        int k =0;
        if("1011".equals(oldCode) && "1021".equals(sb.toString()) {
            k = a+b;
        }
        return k;
    }
     // is the below method threadsafe 
    public static int getCharge(String code,String oldCode,int charge1,int charge2){
        int total =0;
        StringBuilder sb = new StringBuilder("1021");
        if(!NewStringUtils.isEmpty(code)){

            if(NewStringUtils.isNew(code)){
                //here invoking a static method which has StringBuilder(Mutable) as a parameter
                total  = NewStringUtils.getTotal(sb,oldCode,charge1,charge2);
            }
        }
        return total;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:28:25.620

`getTotal` is not `thread-safe` because it is possible that two or more than two `threads` are passing same reference of `StringBuilder` to the `getTotal` method as arguement and modifying the `StringBuilder` before passing it ...
And your `getCharge` is completely Thread-safe because here each `thread` is making local copy of `StringBuilder` Object in there own `stack`. So not to worry about thread safety of `getCharge`.
Here is the short Demo which is demonstrating why `getTotal` is not ThreadSafe:

```
class  ThreadSafe
{
    public static int getTotal(StringBuilder sb,String oldCode ,int a, int b)
    {
        int k =0;
        try
        {
            System.out.println(Thread.currentThread().getName() + " have sb as " + sb);
            Thread.sleep(100);//Added intentionally to show why it is not thread safe.
        }
        catch (Exception ex)
        {
            System.out.println(ex);
        }
        if("1011".equals(oldCode) && "1021".equals(sb.toString())) 
        {
            System.out.println(Thread.currentThread().getName()+" is within if loop");//Thread1 should be within this if block but it's not.
            k = a+b;
        }
        return k;
    }
    public static void main(String[] args) 
    {
        final StringBuilder sBuilder = new StringBuilder();
        Thread th1 = new Thread(new Runnable()
        {
            public void run()
            {
                sBuilder.append("1021");
                getTotal(sBuilder,"1011",10,20);
            }
        },"Thread1");
        Thread th2 = new Thread(new Runnable()
        {
            public void run()
            {
                sBuilder.append("22");
                getTotal(sBuilder,"1011",10,20);
            }
        },"Thread2");
        th1.start();
        th2.start();
    }
} 
```

At my system , the output is:

```
Thread1 have sb as 1021
Thread2 have sb as 102122 
```

Assuming that `Thread1` started before `Thread2` which indeed happened here(as seen in output), If `getTotal` would have been `thread-safe` then , the statement ***Thread1 is within if loop*** must have been printed in output. But it is not . **WHY?** Because after `Thread1`(with sb = "1021") went to sleep in `getTotal` method the thread is preempted by `Thread2`. `Thread2` appended `22` to the existing `StringBuilder` object `sBuilder`(i.e the new value now is `102122`). Again when sleep method is called for `Thread2`, it is preempted by `Thread1`. `Thread1` goes to `if` construct , but till now the content of `sBuilder` is changed to `102122`. So if condition becomes false for `Thread1`. And it does'nt print that line `Thread1 is within if loop` which we were expecting if we consider `getTotal` to be thread-safe. Hence it proves that `getTotal` is not Thread-safe.

How can we make `getTotal` ThreadSafe?

> 1.  By passing `String` instead of `StringBuilder`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:46:08.550

getTotal() 在可重入方面是线程安全的（即，它可以被多个线程同时调用）。然而，就正确完成其工作而言，**如果**另一个线程修改了“sb”参数，则 getTotal()**不是**线程安全的。这种有条件的安全性应在该方法的文档中明确说明。

 **如果 getTotal() 是私有的而不是公共的并且仅由 getCharge() 调用，那么它将是无条件线程安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:53:35.427

以下是凯文想要提出的建议。这是线程安全的：

```
//StringBuilder is  mutable  -- is the below method threadsafe 
public static int getTotal(String sb,String oldCode ,int a, int b){
    StringBuilder sb1 = new StringBuilder(sb); //we build out a new StringBuilder each time
    int k =0;
    if("1011".equals(oldCode) && "1021".equals(sb1.toString()) {
        k = a+b;
    }
    return k;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T20:09:18.430

问题`getTotal`在于另一个线程可能会更改`StringBuilder`参数。但你已经知道了。`StringBuilder`通常实现为具有两个字段的类，比如说`int count`和`char[] value`。Java 内存模型不保证从一个线程对这些变量的更改将以相同的顺序发布到其他线程。这使得它甚至可以拥有`count`比`value.length`某些线程更大的线程。在这种情况下，您可能会看到异常。这意味着即使您不关心`StringBuilder`. 在另一种情况下`count`，即使它对修改线程具有不同的值，也可能被观察为 0（例如）。这将导致意想不到的结果。**

# algorithm - 在较小的字符串中从大量字符串中查找所有匹配项

> ID：15690446
> 
> 赞同：4
> 
> 时间：2013-03-28T19:26:12.937
> 
> 标签：algorithm, text, substring

我有大量的单词和短语（词典或字典），其中包括通配符。我需要在更小的字符串（目前约 150 个字符）中找到这些单词和短语的所有实例。

最初，我想反向运行该操作；那就是检查我的较小字符串中的每个单词是否存在于词典中，这可以实现为哈希表。问题是我的 Lexicon 中的一些值不是单个单词，而且很多是通配符（例如 substri*）。

我正在考虑使用[Rabin-Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)，但我不确定这是最佳选择。

**执行此操作的有效算法或方法是什么？**

*样本数据*：

该词典包含*数百个单词*，并且可能会扩展。这些词可能以通配符（星号）结尾。以下是一些随机示例：

*   好的
*   坏的
*   释放*
*   粗心*
*   损失惨重

我们正在分析的文本（此时）是简短的、非正式的（语法方面的）英语陈述。文本的主要示例（同样，此时此刻）将是 Twitter 推文。这些限制为大约 140 个字符。例如：

```
Just got the Google nexus without a contract. Hands down its the best phone 
I've ever had and the only thing that could've followed my N900. 
```

虽然注意到我们正在对本文进行非常简单的情绪分析可能会有所帮助；我们的情绪分析技术*不是*我关心的。我只是将现有解决方案迁移到“实时”处理系统，并且需要执行一些优化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:50:08.783

我认为这是[Aho-Corasick 字符串匹配算法](https://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)的一个很好的用例，它专门设计用于在单个字符串中查找大量字符串的所有匹配项。它分两个阶段运行 - 第一个阶段是创建匹配自动机（可以提前完成并且只需要线性时间），第二个阶段是使用自动机查找所有匹配项（只需要线性时间，加上与匹配总数成正比的时间）。该算法也可以适用于支持通配符搜索。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:37:20.850

我想抛出的一个答案是[Boyer-Moore](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)搜索算法。它是[grep](http://www.gnu.org/software/grep/)使用的算法。Grep 可能是最快的搜索工具之一。此外，您可以使用[GNU Parallel](http://www.gnu.org/software/parallel/)之类的东西让 grep 并行运行，从而真正加快算法速度。

此外，这是一篇您可能会感兴趣的[好文章。](http://www.codeproject.com/Articles/250566/Fastest-strstr-like-function-in-C)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T18:22:48.690

您可能仍会使用您最初的想法，即根据字典检查文本中的每个单词。但是，为了有效地运行它，*您*需要为字典**编制索引**，以使查找速度非常快。*信息检索*系统中使用的一个技巧是存储所谓的**permuterm 索引**( [http://nlp.stanford.edu/IR-book/html/htmledition/permuterm-indexes-1.html](http://nlp.stanford.edu/IR-book/html/htmledition/permuterm-indexes-1.html) )。

基本上你想要做的是在字典中存储单词的所有可能排列（例如对于房子）：

```
house$
ouse$h
use$ho
...
e$hous 
```

然后可以使用此索引快速检查通配符查询。例如，如果您有 ho*e，您可以在 permuterm 索引中查找以 开头的术语`e$ho`，您会很快找到与 house 的匹配项。

搜索本身通常使用一些对数搜索策略（二进制搜索或 b 树）完成，因此通常非常快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T16:57:42.163

只要模式是完整的单词：你不想`or`匹配`storage`；空格和标点符号是匹配锚，那么一个简单的方法是将您的词典转换为扫描仪生成器输入（例如您可以使用[flex](http://westes.github.io/flex/manual/)），生成一个扫描仪，然后在您的输入上运行它。

扫描器生成器旨在识别输入中出现的标记，其中每个标记类型由正则表达式描述。Flex 和类似程序可以快速创建扫描仪。默认情况下，Flex 最多可以处理 8k 条规则（在您的情况下是词典条目），并且可以扩展。生成的扫描仪以线性时间运行，实际上速度非常快。

在内部，令牌正则表达式在标准的“Kleene 定理”管道中进行转换：首先转换为 NFA，然后转换为 DFA。然后将 DFA 转换为其唯一的最小形式。这是在 HLL 表中编码的，该表在通过引用表来实现扫描器的包装器内发出。这就是 flex 所做的，但其他策略也是可能的。例如，可以将 DFA 转换为`goto`代码，其中 DFA 状态在代码运行时由指令指针隐式表示。

space-as-anchors 警告的原因是，由像 Flex 这样的程序创建的扫描仪通常无法识别重叠匹配： 例如，`strangers`不能同时匹配`strangers`和`range`。

这是一个与您提供的示例词典相匹配的 flex 扫描器：

```
%option noyywrap
%%
"good"                    { return 1; }
"bad"                     { return 2; }
"freed"[[:alpha:]]*       { return 3; }
"careless"[[:alpha:]]*    { return 4; }
"great"[[:space:]]+"loss" { return 5; }
.                         { /* match anything else except newline */ }
"\n"                      { /* match newline */ }
<<EOF>>                   { return -1; }
%%
int main(int argc, char *argv[])
{
  yyin = argc > 1 ? fopen(argv[1], "r") : stdin;
  for (;;) {
    int found = yylex();
    if (found < 0) return 0;
    printf("matched pattern %d with '%s'\n", found, yytext);
  }
} 
```

并运行它：

```
$ flex -i foo.l
$ gcc lex.yy.c
$ ./a.out
Good men can only lose freedom to bad
matched pattern 1 with 'Good'
matched pattern 3 with 'freedom'
matched pattern 2 with 'bad'
through carelessness or apathy.
matched pattern 4 with 'carelessness' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T07:13:30.310

这并不能准确回答算法问题，但请查看[re2](http://code.google.com/p/re2/)库。Python、Ruby 和其他各种编程语言都有很好的接口。以我的经验，它的速度非常快，并且在我的代码中消除了非常相似的瓶颈，几乎没有大惊小怪，而且我几乎没有额外的代码。

唯一的复杂性来自重叠模式。如果您希望模式从单词边界开始，您应该能够将字典划分为一组正则表达式`r_1, r_2, ..., r_k`，`\b(foobar|baz baz\S*|...)`其中每个组 in`r_{i+1}`都有一个前缀 in `r_i`。然后您可以短路评估，因为如果`r_{i+1}`匹配则`r_i`必须匹配。

除非您在高度优化的 C 中实现您的算法，否则我敢打赌，这种方法将比该线程中其他地方的任何（算法上优越的）答案*更快。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T19:48:46.373

让我说清楚。您有一大组查询和*一个*小字符串，您想在该字符串中查找所有这些查询的实例。

在这种情况下，我建议您疯狂地索引该小文档，以便您的搜索时间尽可能短。地狱。有了这样的文档大小，我什至会考虑做一些小的突变（匹配通配符等）并且也会对它们进行索引。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-18T08:05:03.497

我有一个非常相似的任务。这是我解决它的方法，性能令人难以置信 [http://www.foibg.com/ijita/vol17/ijita17-2-p03.pdf](http://www.foibg.com/ijita/vol17/ijita17-2-p03.pdf)

# jpa - Ebean 和 Play 2 忽略 EnumType.STRING

> ID：15690449
> 
> 赞同：1
> 
> 时间：2013-03-28T19:26:24.147
> 
> 标签：jpa, playframework-2.0, ebean

我有一个使用 EnumType.STRING 设置为枚举的字段定义。

通常，这很好用，但在两次情况下，它忽略了 EnumType 属性并使用序数值进行枚举。

我的声明如下所示：

```
@Basic(optional=true) @Enumerated(EnumType.STRING)
public StationFormat stationFormat; 
```

我试过了：

1.  更改字段名称

    它仍然将它创建为序数

2.  做一个干净的编译

    仍然使用序数值

3.  在同一类上添加第二个字段

    仍然使用序数值

有没有搞错？我以前也发生过这种情况，并且在某些时候它神奇地自行解决了。

-约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:15:34.903

我找到了解决这个问题的方法，以为我相信根本问题是一个错误。

要解决此问题，请将相同的枚举添加到不同的模型类。没关系，你可以在之后立即删除它。它将被正确添加到新类中，并且现有类将被修改为使用 name() 值而不是序数。

# java - 我可以这样做吗 - token=str.split(" "||",");

> ID：15690456
> 
> 赞同：1
> 
> 时间：2013-03-28T19:26:37.460
> 
> 标签：java, regex, split

```
import java.io.*;
import java.text.DecimalFormat;
import java.text.NumberFormat;

public class TrimTest{
public static void main(String args[]) throws IOException{
String[] token = new String[0];
String opcode;
String strLine="";
String str="";
    try{
        // Open and read the file
        FileInputStream fstream = new FileInputStream("a.txt");

        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));

        //Read file line by line and storing data in the form of tokens
        if((strLine = br.readLine()) != null){
            token = strLine.split(" ");// split w.r.t spaces 
                            token = strLine.split(" "||",")   // split if there is a space or comma encountered
            }
        in.close();//Close the input stream
    }
    catch (Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }
    int i;
    int n = token.length;
    for(i=0;i<n;i++){
        System.out.println(token[i]);
        }
}
} 
```

如果输入 MOVE R1,R2,R3 相对于空格或逗号拆分并将其保存到数组 token[] 我希望输出为： MOVE R1 R2 R3

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:27:50.510

Try `token = strLine.split(" |,")`.

`split` uses regex as argument and `or` in regex is `|`. You can also use [character class](http://www.regular-expressions.info/charclass.html) like `[\\s,]` which is equal to `\\s|,` and means `\\s` = any white space (like normal space, tab, new line mark) OR comma".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:27:40.977

You want

```
token = strLine.split("[ ,]"); // split if there is a space or comma encountered 
```

Square brackets denote a character class. This class contains a space and a comma and the regex will match on any character of the character class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:28:34.477

Change it to `strLine.split(" |,")`, or maybe even `strLine.split("\\s+|,")`.

# xaml - Color Binding Not Working for Data Templates in Win8 App

> ID：15690457
> 
> 赞同：1
> 
> 时间：2013-03-28T19:26:38.803
> 
> 标签：xaml, binding, windows-8, colors, windows-runtime

I'm currently trying to add some sort of a Color Theme feature to a Win8 App I'm working at... I've though of making a binding from a vm, and everything works fine for static UI elements. But, I'm adding some notes (my model) into a DB, and they also appear on the screen into a GridView.

But in the declared DataTemplate for the GridView ItemTemplate, the Color Binding will not work at all...

My template looks like this :

```
<Grid Grid.Row="3" HorizontalAlignment="Left" Width="200" Height="200">
    <Grid.RowDefinitions>
        <RowDefinition Height="100"/>
        <RowDefinition Height="60"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Border Grid.Row="0"  Background="Lavender"  Opacity="50"/>
    <ScrollViewer Grid.Row="0">
        <TextBlock Grid.Row="0" Text="{Binding Content}" Foreground="DodgerBlue" />
    </ScrollViewer>
    <Border Grid.Row="1"  Background="DodgerBlue" Opacity="70"/>
    <ScrollViewer Grid.Row="1">
        <TextBlock Grid.Row="1" Text="{Binding Subject}" Foreground="LightBlue" />
    </ScrollViewer>
    <Border Grid.Row="2" Background="DodgerBlue" Opacity="70"/>
    <TextBlock Grid.Row="2" Text="{Binding Importance}" Foreground="Black"  FontSize="{StaticResource ComboBoxArrowThemeFontSize}" />
</Grid> 
```

What I tried was simply instead of `Foreground="DodgerBlue"` to `Foreground="{Binding ColorTheme}"` but it had no effect, the `SolidColorBrush` was not acquired from vm....

Is there any workaround for this?

Many thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:55:25.180

颜色绑定（或更好：画笔绑定）应该可以正常工作 - 在`GridView.ItemTemplate`场景和其他地方。

您没有提供足够的信息来确定为什么它在您的情况下不起作用，但这是我刚刚尝试过的一个小样本：

`GridView`放入您的页面：

```
<GridView Width="600" Height="200" ItemsSource="{Binding GridItems}"
          x:Name="GridViewName">
    <GridView.ItemTemplate>
        <DataTemplate>
            <TextBlock Width="50" Height="50" 
                       Foreground="{Binding Color}" Text="{Binding Text}" />
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

`DataContext`查看为您的页面绑定的模型类：

```
public class ViewModel
{
    public ViewModel()
    {
        GridItems = new List<GridItem>
            {
                new GridItem {Text = "First", Color = new SolidColorBrush(Colors.White)},
                new GridItem {Text = "Second", Color = new SolidColorBrush(Colors.Yellow)},
                new GridItem {Text = "Third", Color = new SolidColorBrush(Colors.Green)},
                new GridItem {Text = "Fourth", Color = new SolidColorBrush(Colors.Red)},
            };
    }
} 
```

`GridItem`班级：

```
public class GridItem
{
    public string Text { get; set; }
    public Brush Color { get; set; }
} 
```

结果：

![颜色绑定网格视图](../Images/e2a38f48f5e87ce6a2e76c0c30c54024.png)

编辑：

我需要指出，内部数据模板`DataContext`设置为绑定集合的当前项目（`GridItems`在我的情况下）而不是页面`DataContext`（`ViewModel`在我的情况下）。

这意味着通过设置`{Binding Color}`控件属性，您将绑定到`GridItem.Color`not `ViewModel.Color`。要使后者工作，您首先需要使用您在自己的答案中已经建议`DataContext`的语法访问父级： - 这绑定到页面上的命名元素并允许您访问其属性，在这种情况下。`ElementName``{Binding DataContext.ColorTheme, ElementName=GridViewName}``DataContext``ViewModel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:06:01.163

尽管我并没有真正找到为什么以下工作的实际解释（我希望有更多经验的人，也许可以解释我），这篇[文章](https://stackoverflow.com/questions/4868992/access-property-of-datacontext-inside-itemtemplate)似乎对我有用。

不太确定，但这是 DataContext 的问题，所以我没有尝试这样的绑定：`Foreground={Binding ColorTheme}`，而是改为：`Foreground={Binding DataContext.ColorTheme, ElementName=MyGridViewName}"`。

# python - Can I get pickle.dump to expose a file-like object?

> ID：15690459
> 
> 赞同：1
> 
> 时间：2013-03-28T19:26:49.787
> 
> 标签：python, pickle

I want to pickle my objects compressed with [snappy-python](https://github.com/andrix/python-snappy). Because these objects are large I want to use something streaming -- i.e. pickle.dump, not pickle.dumps.

Unfortunately, the snappy and pickle APIs don't seem particularly compatible:

```
snappy.stream_compress(src, dst, blocksize=65536)
pickle.dump(obj, file, protocol=None) 
```

Any thoughts on what magic I would need for something like `snappy.stream_compress(pickle.dump_magic(obj), dst)` to work similarly to what `pickle.dump(obj, dst)` does today?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:07:39.177

最简单的方法是先到`pickle.dump`文件，然后再到`snappy.stream_compress`文件。

```
def snappy_pickle_dump(obj, f):
    tmpf = ...
    with open(tmpf, 'wb') as F:
        pickle.dump(obj, F)
    with open(f, 'wb') as OUT:
        with open(tmpf, 'rb') as IN:
            snappy.stream_compress(IN, OUT)
    os.remove(tmpf) 
```

如果您必须避免存储整个未压缩的转储，您可以让一个线程`pickle.dump`将对象放入一个`StringIO`对象中，而另一个线程`snappy.stream_compress`将其放入。

# android - Android:ListView 和事件每一项

> ID：15690460
> 
> 赞同：0
> 
> 时间：2013-03-28T19:26:52.740
> 
> 标签：android, listview, event-handling

我在 xml 中制作了自定义列表视图

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <TextView
           ... />
        <TextView
           ... />

        <TextView
            ... />
         <CheckBox
            ...
             />
</RelativeLayout> 
```

我活动的一部分：

```
public class SPMMainActivity extends Activity {  
        private ArrayList <HashMap<String, Object>> myBooks; 
        private static final String KEY1 = "key1";    
        private static final String KEY2 = "key2";  
        private static final String KEY3 = "key3";  
        private static final String CHECK = "check"; 

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_spmmain);

            schedule_listview = (ListView) findViewById(R.id.MainActivity_schedule);
            myBooks = new ArrayList<HashMap<String,Object>>();      
            HashMap<String, Object> hm;   

            hm = new HashMap<String, Object>();
            hm.put(KEY1, "1First");     
            hm.put(KEY2, "test");    
            hm.put(KEY3, "test2");     
            hm.put(CHECK, Boolean.FALSE);   
            myBooks.add(hm);

            hm = new HashMap<String, Object>();
            hm.put(KEY1, "Second");        
            hm.put(KEY2, "test3");         
            hm.put(KEY3, "test4 ");         
            hm.put(CHECK, Boolean.TRUE);   
            myBooks.add(hm);

            SimpleAdapter adapter = new SimpleAdapter(this, 
                    myBooks, 
                    R.layout.mainactivity_schedule, 
                    new String[]{ 
                    KEY1,         
                    KEY2,        
                    KEY3,
                    CHECK
                    },
                    new int[]{    
                    R.id.text1,  
                    R.id.text2,
                    R.id.text3,
                    R.id.checkBox1}
            );      

            schedule_listview.setAdapter(adapter);                        
            schedule_listview.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 

            registerForContextMenu(schedule_listview);

        }
...
} 
```

如何从每个 CheckBox 获取事件？例如，如果用户单击复选框，程序必须从第三项的 CheckBox 中获取事件，并打开警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:31:44.090

用于`Custom Adaptor`您的列表并在适配器的`getView()`方法中为复选框设置侦听器。例如，请参阅[Android ListView 示例](http://www.mkyong.com/android/android-listview-example/)或[这个](http://samir-mangroliya.blogspot.com/2012/09/android-multiple-select-listview.html)。

# sql - 将参数的默认值传递给表值函数

> ID：15690464
> 
> 赞同：17
> 
> 时间：2013-03-28T19:27:15.533
> 
> 标签：sql, sql-server, tsql

```
create function Xtest
(@d1 varchar(3)=null
,@d2 varchar(3)=null)
returns table 
as
return 
with code_list(code_pattern)
as
(
    select x.code_pattern
        from (values (@d1),(@d2)) as x(code_pattern)
        where x.code_pattern is not null
),y
as
(
    select substring(code,1,3) as code
        from tblicd
        where substring(code,1,3) in 
        (
            select * from code_list
        )
)

select * from y 
```

是我的功能，当它完全完成时才有意义。如果我尝试运行此查询并且我不提供两个参数，它将失败。我的代码与存储过程相同，如果我只输入一个参数，它可以正常工作并将第二个参数分配为空。如果没有提供参数，有没有一种方法可以`null`作为参数值传递，就像存储过程一样？

该函数确实编译。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-28T19:28:36.287

调用函数时不能省略参数。这不是您在语法上做错了什么，只是 SQL Server 不支持它。存储过程具有可选参数，但函数没有。

但是，您可以提供`default`：

```
SELECT code FROM dbo.Xtest(default, default); 
```

或者在这种情况下，如果您知道默认设置，`NULL`您可以执行以下操作：

```
SELECT code FROM dbo.Xtest(NULL, NULL); 
```

在创建和引用任何对象，*尤其是*函数时，请[始终使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)（在这种情况下）。`dbo.`

# java - 在 JSONArray 中解析 JSONArray

> ID：15690469
> 
> 赞同：1
> 
> 时间：2013-03-28T19:27:41.210
> 
> 标签：java, android, json, gson

我正在使用[Gson](https://code.google.com/p/google-gson/)来解析 json 响应。我需要在 JsonArray 中解析 JSONArry ..

我的回应是..

```
{
"message": "Retreive sucessfully",
"flag": true,
"data": {
    "myArray1": [[{
        "xyz": "1400.0",
        "abc": "O",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "J",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "I",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "D",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "C",
        "mnp": "leeper"
    }],
    [{
        "xyz": "1400.0",
        "abc": "M",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "L",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "G",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "F",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "A",
        "mnp": "leeper"
    }]],
    "myArray2": [[{
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    }],
    [{
        "xyz": "1400.0",
        "abc": "LS5",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "LS4",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "LS3",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "LS2",
        "mnp": "leeper"
    },
    {
        "xyz": "1400.0",
        "abc": "LS1",
        "mnp": "leeper"
    }],
    [{
        "xyz": "1000.0",
        "abc": "19",
        "mnp": "taes"
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    }],
    [{
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "20",
        "mnp": "taes"
    },
    {
        "xyz": "1000.0",
        "abc": "6",
        "mnp": "taes"
    },
    {
        "xyz": "1000.0",
        "abc": "3",
        "mnp": "taes"
    },
    {
        "xyz": "1000.0",
        "abc": "2",
        "mnp": "taes"
    }],
    [{
        "xyz": "1000.0",
        "abc": "notaes",
        "mnp": null
    },
    {
        "xyz": "1000.0",
        "abc": "1",
        "mnp": "taes"
    }]]
},
"code": "99"
} 
```

我的课应该是什么？我做过这样的...

```
public class MyLayout {
public String message;
public boolean flag;
public Data data;
public String commandName;
public String code;

public class Data {
    public ArrayList<MyClass> myArray1 = new ArrayList<MyLayout.MyClass>();
    public ArrayList<MyClass> myArray2 = new ArrayList<MyLayout.MyClass>();
}

public class MyClass {
    public String abc;
    public String xyz;
    public String mnp;
}

} 
```

它不工作？

**编辑**

`MyLayout`当响应如下时，我的上述工作..但是`myArray`项目还包含什么`JSONArray`

```
{
"message": "Retreive sucessfully",
"flag": true,
"data": {
"myArray1": [{
    "xyz": "1400.0",
    "abc": "O",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "J",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "I",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "D",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "C",
    "mnp": "leeper"
}],
"myArray2": [{
    "xyz": "1400.0",
    "abc": "LS5",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "LS4",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "LS3",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "LS2",
    "mnp": "leeper"
},
{
    "xyz": "1400.0",
    "abc": "LS1",
    "mnp": "leeper"
}]
},
"code": "99"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:50:45.050

`myArray1`并且`myArray2`是数组的数组，因此您需要修改`Data`为如下所示：

```
public class Data {
  public List<List<MyClass>> myArray1 = ...
  public List<List<MyClass>> myArray2 = ...
} 
```

# css-float - CSS浮动：在这里不起作用

> ID：15690470
> 
> 赞同：0
> 
> 时间：2013-03-28T19:27:43.450
> 
> 标签：css-float, css

尝试在下面获取此图像：

![图片右侧的文字](../Images/00bde22a680a4dfa4a23ceba56174f33.png)

但这是我所拥有的：

![浮动问题：留在这里](../Images/b011576ab1ff2bfe315f39847a2746af.png)

我正在使用此代码如下：

HTML：

```
<div class="floatright" style="width: 50%;">
    <div class="floatleft" style="width: 35%;">
        <img src="images/exhibitingopportunities.png" alt="Exhibiting Opportunities" style="border: none; width: auto; max-width: 100%;" />
    </div>
    <div class="floatleft sidespadding" style="width: 65%;">
        <h4>Exhibiting Opportunities</h4>
        <p class="desc">The Opportunity Finance Network Conference is a great place to connect with decision makers across the industry.  Reserve your booth space now&mdash;contact Katie Kirchner for more information.</p>
    </div>
</div>
<div style="width: 50%;">
    <div class="floatleft" style="width: 35%;">
        <img src="images/sponsorship_opportunities.png" alt="Sponsorship Opportunities" style="border: none; width: auto; max-width: 100%;" />
    </div>
    <div class="floatleft sidespadding" style="width: 65%;">
        <h4>Sponsorship Opportunities</h4>
        <p class="desc">Reserve your slot now to be a part of the CDFI industry's premier event!  The OFN Conference provides our partners with an unparalleled platform to connect with CDFIs, increase awareness of their organizations' work, and support and strengthen the practice of opportunity finance.</p>
    </div>
</div> 
```

CSS：

```
.floatleft
{
    float: left;
}

.floatright
{
    float: right;
}

.sidespadding
{
    padding-left: 1.2em;
    padding-right: 1.2em;
}

.clear
{
    clear: both;
} 
```

无法让文本浮动到实际图像的左侧，就像第一张图片中的图像一样。天哪，我在这里错过了什么？网页在这里： [http ://opportunityfinance.net/Test/2013conf/index.html](http://opportunityfinance.net/Test/2013conf/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:30:33.033

摆脱你的填充，你的百分比大于 100% 填充。或者你可以申请 box-sizing [http://www.w3schools.com/cssref/css3_pr_box-sizing.asp](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)

如果您想要空间，您始终可以向左或向右添加边距，但请确保您的百分比最后计算为 100%

所以

div 1 30% 宽度，右边 5% 边距，例如 div 2 65% 宽度

所以总计 = 100%

还有其他方法可以做到这一点，但你现在明白了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:31:44.337

填充添加到总宽度，使其成为 65% + 2.4em 如果向后兼容旧版本的 IE 不是问题，您可以使用[CSS calc](http://updates.html5rocks.com/2012/03/CSS-layout-gets-smarter-with-calc)

否则，您必须包装一些 div 以便在您想要的元素内创建填充。

# ruby-on-rails - How to use a postgresql function in Rails

> ID：15690471
> 
> 赞同：5
> 
> 时间：2013-03-28T19:27:44.977
> 
> 标签：ruby-on-rails, postgresql

I have a table in postgres with date_of_birth and would like to use the Postgres age function to return the age, rather than calculate the age in Rails (this is a simple example, I will want to do more complicated calculations in postgres).

What is the best way to get the age back from postgres with the rest of my record, ideally as standard without having to modify every select?

EDIT:

I've decided to use views because:

1.  My database will be used by other applications other than rails and I want to define common functions that all of them can use.
2.  I'd like to control access to the data over multiple applications.
3.  It takes some of the processing away from the application server.
4.  It is more scalable if I use a lot of calculated fields.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:39:37.640

```
people = Person.select('*, age(date_of_birth)')
people.each { |person| puts person.age } 
```

是的，这将添加一个`age`以前不存在的方法`Person`

您还可以将新方法别名为函数名称以外的名称：

```
people = Person.select('*, age(date_of_birth) as foo')
people.each { |person| puts person.foo } 
```

# linq - 如何使用 Linq 将两条记录合并或合并为一条记录？

> ID：15690475
> 
> 赞同：-1
> 
> 时间：2013-03-28T19:27:55.457
> 
> 标签：linq

我有以下表结构

```
ID  firstName  LastName  zip     Address

1   test1      test2     NULL    NULL
2   test1      test2     12345   MI 
```

我需要根据提供的 ID 合并 2 个帐户（主要和次要）。例如，如果给我值 1（作为主要）和 2（作为次要）进行合并。

主帐户 (1) 有 NULL zip 和地址，所以我需要从辅助帐户 (2) 复制这些并更新。最终结果应该是

```
ID  firstName  LastName  zip     Address

1   test1      test2     12345   MI 
```

有什么方法可以使用 Linq，或者可以推荐其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:00:51.240

尽管 LINQ 中没有**本机**合并运算符，但您有几个选择。

### 首先，创建自己的合并！

```
public Account Merge(Account one, Account two) {

    ret = new Account(){
        Field = one.Field??two.Field
        //Repeat for all fields
    };
} 
```

然后使用（手写代码，不要介意语法错误）

```
var mergedResults = (from primary in primaryAccounts
                    join secondary in secondaryAccounts
                          on primary.Id equals secondary.Id
                    select new {Primary=primary, Secondary secondary})
                    .Select(x=>Merge(x.Primary,x.Secondary); 
```

### 其次，在 LINQ 中进行合并

差别不大

```
var mergedResults = (from primary in primaryAccounts
                    join secondary in secondaryAccounts
                          on primary.Id equals secondary.Id
                    select new Account { Field = primary.Field??secondary.Field}; //Repeat for all fields 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T23:35:18.057

Mabe 和我的分机

```
 public interface IMerge<out T>
{
    IEnumerable<IMergeMatched<T>> Matched();

    IEnumerable<IMergeMatched<T>> Matched(Func<T, T, bool> predicate);

    IEnumerable<T> NotMatchedBySource();

    IEnumerable<T> NotMatchedBySource(Func<T, bool> predicate);

    IEnumerable<T> NotMatchedByTarget();

    IEnumerable<T> NotMatchedByTarget(Func<T, bool> predicate);
}

public interface IMergeMatched<out T>
{
    T Source { get; }

    T Target { get; }
}

public static class Enumerable
{
    public static IMerge<TSource> Merge<TSource>(this IEnumerable<TSource> source, IEnumerable<TSource> target,
                                             Func<TSource, TSource, bool> predicate)
    {
        return new Merge<TSource>(source, target, predicate);
    }
}

public class Merge<T> : IMerge<T>
{
    private readonly Func<T, T, bool> _predicate;
    private readonly IEnumerable<T> _source;
    private readonly IEnumerable<T> _target;
    private IEnumerable<IMergeMatched<T>> _matcheds;
    private IEnumerable<T> _notMatchedBySource;
    private IEnumerable<T> _notMatchedByTarget;

    public Merge(IEnumerable<T> source, IEnumerable<T> taget, Func<T, T, bool> predicate)
    {
        _source = source;
        _target = taget;
        _predicate = predicate;
    }

    public IEnumerable<IMergeMatched<T>> Matched()
    {
        if (_matcheds == null)
        {
            Analize();
        }
        return _matcheds;
    }

    public IEnumerable<IMergeMatched<T>> Matched(Func<T, T, bool> predicate)
    {
        return Matched()
            .Where(t => predicate.Invoke(t.Source, t.Target))
            .ToArray();
    }

    public IEnumerable<T> NotMatchedBySource()
    {
        if (_notMatchedBySource == null)
        {
            Analize();
        }
        return _notMatchedBySource;
    }

    public IEnumerable<T> NotMatchedBySource(Func<T, bool> predicate)
    {
        return NotMatchedBySource()
            .Where(predicate)
            .ToArray();
    }

    public IEnumerable<T> NotMatchedByTarget()
    {
        if (_notMatchedByTarget == null)
        {
            Analize();
        }
        return _notMatchedByTarget;
    }

    public IEnumerable<T> NotMatchedByTarget(Func<T, bool> predicate)
    {
        return NotMatchedByTarget()
            .Where(predicate)
            .ToArray();
    }

    private void Analize()
    {
        var macheds = new List<MergeMached<T>>();
        var notMachedBySource = new List<T>(_source);
        var notMachedByTarget = new List<T>(_target);

        foreach (var source in _source)
        {
            foreach (var target in _target)
            {
                var macth = _predicate.Invoke(source, target);
                if (!macth) continue;

                macheds.Add(new MergeMached<T>(source, target));
                notMachedBySource.Remove(source);
                notMachedByTarget.Remove(target);
            }
        }

        _matcheds = macheds.ToArray();
        _notMatchedBySource = notMachedBySource.ToArray();
        _notMatchedByTarget = notMachedByTarget.ToArray();
    }
}

public class MergeMached<T> : IMergeMatched<T>
{
    public MergeMached(T source, T target)
    {
        Source = source;
        Target = target;
    }

    public T Source { get; private set; }

    public T Target { get; private set; }
} 
```

如何使用？

```
 [TestMethod]
    public void TestMerge()
    {
        var source = new List<MediaFolder>
            {
                new MediaFolder
                    {
                        Id = "Id1",
                        Name = "Name1",
                        Path = "Path1"
                    },
                new MediaFolder
                    {
                        Id = "Id2",
                        Name = "Name2",
                        Path = "Path2"
                    },
                new MediaFolder
                    {
                        Id = "Id3",
                        Name = "Name3",
                        Path = "Path3"
                    },
                new MediaFolder
                    {
                        Id = "Id4",
                        Name = "Name4",
                        Path = "Path4"
                    },
                new MediaFolder
                    {
                        Id = "Id5",
                        Name = "Name5",
                        Path = "Path5"
                    },
                new MediaFolder
                    {
                        Id = "Id6",
                        Name = "Name6",
                        Path = "Path6"
                    }
            };

        var target = new List<MediaFolder>
            {
                new MediaFolder
                    {
                        Id = "Id1",
                        Name = "Actualizado en el objeto",
                        Path = "Path1"
                    },
                    //Id2 eliminado
                new MediaFolder
                    {
                        Id = "Id3",
                        Name = "Name3",
                        Path = "Actualizado tambien"
                    },
                new MediaFolder
                    {
                        Id = "Id4",
                        Name = "Name4",
                        Path = "Path4"
                    },
                new MediaFolder
                    {
                        Id = "Id5",
                        Name = "Name5",
                        Path = "Path5"
                    },
                new MediaFolder
                    {
                        Id = "Id6",
                        Name = "Name6",
                        Path = "Path6"
                    },
                     new MediaFolder
                    {
                        Id = "Id7",
                        Name = "Nuevo Item 7",
                        Path = "Nuevo Item 7"
                    }
            };

        var merge = source.Merge(target, (x, y) => x.Id == y.Id);

        var toUpdate = merge.Matched((x, y) => x.Name != y.Name | x.Path != y.Path)
            .ToArray();

        var toDelete = merge.NotMatchedBySource();
        var toInsert = merge.NotMatchedByTarget();

        Assert.AreEqual(2, toUpdate.Count());
        Assert.IsTrue(toUpdate.Count(x => x.Source.Id == "Id1" & x.Target.Id == "Id1") > 0);
        Assert.IsTrue(toUpdate.Count(x => x.Source.Id == "Id3" & x.Target.Id == "Id3") > 0);

        Assert.AreEqual("Id7", toInsert.First().Id);
        Assert.AreEqual("Id2", toDelete.First().Id);
    }

    [TestMethod]
    public void TestMerge2()
    {
        var source = new List<CustomObject>
            {
                new CustomObject
                    {
                        Year = 2010,
                        Month = 6,
                        Value = 2
                    },
                new CustomObject
                    {
                        Year = 2010,
                        Month = 7,
                        Value = 5
                    },
                new CustomObject
                    {
                        Year = 2010,
                        Month = 10,
                        Value = 3
                    }
            };

        var target = new List<CustomObject>
            {
                new CustomObject
                    {
                        Year = 2010,
                        Month = 7,
                        Value = 2
                    },
                new CustomObject
                    {
                        Year = 2010,
                        Month = 8,
                        Value = 1
                    },
                new CustomObject
                    {
                        Year = 2010,
                        Month = 10,
                        Value = 2
                    }
            };

        var merge = source.Merge(target, (x, y) => x.Year == y.Year && x.Month == y.Month);

        var toUpdate = merge.Matched((x, y) => x.Value != y.Value)
            .ToArray();

        var inSourceButNotInTarget = merge.NotMatchedBySource();

        var inTargetButNotInSource = merge.NotMatchedByTarget();

        Console.WriteLine("Objects to Update");
        foreach (var mergeMatched in toUpdate)
        {
            Console.WriteLine("{0} -{1} - {2} - {3}",
                mergeMatched.Source.Year,
                mergeMatched.Source.Month,
                mergeMatched.Source.Value,
                mergeMatched.Target.Value);
        }

        Console.WriteLine("In source but not in target");
        foreach (var customObject in inSourceButNotInTarget)
        {
            Console.WriteLine("{0} -{1} - {2} - 0",
                              customObject.Year,
                              customObject.Month,
                              customObject.Value);
        }

        Console.WriteLine("In target but not in source");
        foreach (var customObject in inTargetButNotInSource)
        {
            Console.WriteLine("{0} -{1} - 0 - {2}",
                              customObject.Year,
                              customObject.Month,
                              customObject.Value);
        }
    } 
```

# php - 我对 reCAPTCHA 的实施是否存在缺陷？

> ID：15690476
> 
> 赞同：0
> 
> 时间：2013-03-28T19:28:06.123
> 
> 标签：php, html, recaptcha

我有这个网站[www.canuckssuck.org](http://www.canuckssuck.org)，从本周开始，我收到了垃圾邮件和评论。为了您的观赏乐趣，我把上面留了下来。它们总是只出现在第一页。我对 reCAPTCHA 的实施是有缺陷还是被合法地击败了。让我放松一下，这并不是一个完美编码的网站。整个网站只有一页。

这是我的帖子代码：

```
# are we submitting the page?
if (isset($_POST['submit'])) {
  $resp = recaptcha_check_answer ($privatekey,
                                  $_SERVER["REMOTE_ADDR"],
                                  $_POST["recaptcha_challenge_field"],
                                  $_POST["recaptcha_response_field"]);

  if ($resp->is_valid) {

                //validate data kind of!
                if($_POST['title'] == "")
                {
                    $_POST['title'] = "The Canucks Suck";
                }

                if($_POST['comment'] == "")
                {
                    $_POST['comment'] = "New Jersey is the best, we all know it!";
                }

                if($_POST['name'] == "")
                {
                    $_POST['name'] = "Anonymous";
                }
                if($_POST['location'] == "")
                {
                    $_POST['location'] = "Too embarrassed to disclose it.";
                }
                $ip = getUserIpAddr();

                $_POST['location'] = $_POST['location'] +"--"+ $ip;
                //convert line breaks to <br /> from /n etc
                $br_comment = nl2br($_POST['comment']);

                //add info to database
                $obj->insert_values("INSERT INTO posts (post_id, title, comment, name, time, location) VALUES (NULL, '$_POST[title]', '$br_comment', '$_POST[name]', NULL, '$_POST[location]')");

                header( 'Location: index.php?success=1' ) ;

                //for debugging
                echo "<h2 style=\"color:#00FF00; background:black; padding:2px;\">SUCCESSFULLY ADDED, THANKS!</h2>";

                } else {
                    echo "<span style=\"color:red;\">Sorry cannot add comment because you've failed to provide correct captcha! Try again...</span><br />";
                }
            }
            echo recaptcha_get_html($publickey, $error);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:19:49.847

reCapctcha 可能会受到诸如[Death By Captcha 之](http://www.deathbycaptcha.com/user/login)类的服务的影响，这在印度基本上是一个有很多“验证码求解器”的地方。一些垃圾邮件机器人可能会使用它。

只是让你知道。

# java - Java is not picking up keypresses?

> ID：15690477
> 
> 赞同：0
> 
> 时间：2013-03-28T19:28:11.780
> 
> 标签：java, swing, overriding, public, keylistener

I have a program which produces a JFrame and then a JPanel on top of it. For the program, I have tried implementing the KeyListener and then adding the methods (for both components), but the program does not pick any of my key strokes up. What am I doing wrong?

**EDIT**

This is my code. It is a part of the class which creates the JFrame. It still does not pick up the press of the `ESC` key.

```
@Override
public void keyTyped(KeyEvent e) {

}

@Override
public void keyPressed(KeyEvent e) {
    int keyCode = e.getKeyCode();

    if(keyCode == KeyEvent.VK_ESCAPE){
        System.out.println("Hi");

    }else{
        System.out.println("Hello");

    }

}

@Override
public void keyReleased(KeyEvent e) {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:45:52.657

如果没有您的代码，我只能告诉您，通常当人们问这个问题时，他们不知道该接口`KeyListener`包含三个方法，正如 Agusti-N 在[此处的回答](https://stackoverflow.com/questions/3355574/java-swing-keylistener/3355666#3355666)中所说：

```
void keyTyped(KeyEvent)
void keyPressed(KeyEvent)
void keyReleased(KeyEvent) 
```

如果您使用`keyTyped`并且正在使用`event.getKeyCode()`来检查输入的字符，这将不起作用。你应该使用`getKeyChar()`for`keyTyped`和`getKeyCode()`for`keyPressed`和`keyReleased`。否则你会得到`null`. 只有在没有其他选择的情况下才应该使用它，在大多数情况下，您想使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

# c# - 在 C# 或最佳替代方案中动态“解压缩”IEnumerable

> ID：15690478
> 
> 赞同：8
> 
> 时间：2013-03-28T19:28:15.103
> 
> 标签：c#, algorithm, linq, ienumerable, enumerator

假设您有一个返回惰性枚举对象的函数：

```
struct AnimalCount
{
    int Chickens;
    int Goats;
}

IEnumerable<AnimalCount> FarmsInEachPen()
{
    ....
    yield new AnimalCount(x, y);
    ....
} 
```

您还有两个函数使用两个单独`IEnumerable`的 s，例如：

```
ConsumeChicken(IEnumerable<int>);
ConsumeGoat(IEnumerable<int>); 
```

你怎么能调用`ConsumeChicken`并且`ConsumeGoat`没有 a) 预先转换`FarmsInEachPen()`ToList() 因为它可能有两个数不胜数的记录，b) 没有多线程。

基本上：

```
ConsumeChicken(FarmsInEachPen().Select(x => x.Chickens));
ConsumeGoats(FarmsInEachPen().Select(x => x.Goats)); 
```

但不强制双重枚举。

我可以用多线程解决它，但是对于每个列表都有一个缓冲区队列，它会变得不必要地复杂。

所以我正在寻找一种方法将`AnimalCount`枚举器拆分为两个`int`枚举器而无需完全评估`AnimalCount`. `ConsumeGoat`跑步和`ConsumeChicken`步调一致没有问题。

我能感觉到解决方案超出了我的掌握，但我并不完全在那里。我正在考虑返回一个`IEnumerable`被馈入的辅助函数，`ConsumeChicken`每次使用迭代器时，它都会在内部调用`ConsumeGoat`，从而以锁步执行这两个函数。除了，当然，我不想`ConsumeGoat`多次打电话..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T20:01:37.097

我不认为有一种方法可以做你想做的事，因为`ConsumeChickens(IEnumerable<int>)`并且`ConsumeGoats(IEnumerable<int>)`被顺序调用，它们中的每一个都单独枚举一个列表 - 你如何期望它在没有两个单独的列表枚举的情况下工作？

根据情况，更好的解决方案是拥有`ConsumeChicken(int)`和`ConsumeGoat(int)`方法*（每个都消耗一个**项目**）*，并交替调用它们。像这样：

```
foreach(var animal in animals)
{
    ConsomeChicken(animal.Chickens);
    ConsomeGoat(animal.Goats);
} 
```

这将仅枚举`animals`集合一次。

* * *

另外，请注意：根据您的 LINQ 提供者以及您正在尝试做什么，可能会有更好的选择。例如，如果您尝试使用 linq-to-sql 或 linq-to-entities 从数据库中获取鸡和山羊的总和，则以下查询..

```
from a in animals
group a by 0 into g
select new 
{
    TotalChickens = g.Sum(x => x.Chickens), 
    TotalGoats = g.Sum(x => x.Goats)
} 
```

将导致单个查询，并在数据库端进行求和，这比将整个表拉过来并在客户端进行求和要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T20:11:37.883

你提出问题的方式，没有办法做到这一点。 `IEnumerable<T>`是一个*可枚举的拉取*——也就是说，你可以`GetEnumerator`到序列的前面，然后反复询问“给我下一个项目”（`MoveNext`/ `Current`）。您不能在一个线程上同时从`animals.Select(a => a.Chickens)`and中提取两种不同的东西`animals.Select(a => a.Goats)`。您必须先做一个，然后再做另一个（这需要实现第二个）。

BlueRaja 提出的建议是稍微改变问题的一种方法。我建议走那条路。

另一种选择是使用`IObservable<T>`Microsoft 的响应式扩展 (Rx)，即*推送可枚举*的. 我不会详细说明你将如何做到这一点，但这是你可以研究的。

## 编辑：

以上假设`ConsumeChickens`并且`ConsumeGoats`都返回`void`或至少不返回`IEnumerable<T>`自己 - 这似乎是一个明显的假设。如果蹩脚的反对者真的发表评论，我将不胜感激。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T21:21:57.207

实际上很简单的方法来实现您将 FarmsInEachPen 返回值转换为推送集合或 IObservable 并使用 ReactiveExtensions 来处理它

```
var observable = new Subject<Animals>()
observable.Do(x=> DoSomethingWithChicken(x. Chickens))
observable.Do(x=> DoSomethingWithGoat(x.Goats))

foreach(var item in FarmsInEachPen())
{
    observable.OnNext(item)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T20:21:55.793

我想通了，这在很大程度上要归功于@Lee 让我走的路。

您需要在两个 zip 之间共享一个枚举器，并使用适配器函数将正确的元素投影到序列中。

```
private static IEnumerable<object> ConsumeChickens(IEnumerable<int> xList)
{
    foreach (var x in xList)
    {
        Console.WriteLine("X: " + x);
        yield return null;
    }
}

private static IEnumerable<object> ConsumeGoats(IEnumerable<int> yList)
{
    foreach (var y in yList)
    {
        Console.WriteLine("Y: " + y);
        yield return null;
    }
}

private static IEnumerable<int> SelectHelper(IEnumerator<AnimalCount> enumerator, int i)
{
    bool c = i != 0 || enumerator.MoveNext();
    while (c)
    {
        if (i == 0)
        {
            yield return enumerator.Current.Chickens;
            c = enumerator.MoveNext();
        }
        else
        {
            yield return enumerator.Current.Goats;
        }
    }
}

private static void Main(string[] args)
{
    var enumerator = GetAnimals().GetEnumerator();

    var chickensList = ConsumeChickens(SelectHelper(enumerator, 0));
    var goatsList = ConsumeGoats(SelectHelper(enumerator, 1));

    var temp = chickensList.Zip(goatsList, (i, i1) => (object) null);
    temp.ToList();

    Console.WriteLine("Total iterations: " + iterations);
} 
```

# android - unable to upload photo sometimes in facebook 3.0?

> ID：15690487
> 
> 赞同：0
> 
> 时间：2013-03-28T19:28:39.767
> 
> 标签：android, facebook

I am trying to post image on `Facebook` using sdk 3.0, but I am facing some problems. If I close the app and reopens the app it always goes in else condition, then it goes in if condition. Do I need to save `session` or its already stored??

```
 Session mSession = Session.getActiveSession();

    if (mSession != null
            && mSession.getPermissions().contains("publish_actions")) {
        postPhoto();

    } else {

        if (mSession == null) {

            Log.d("Facebook", "Session null");
            mSession = new Session.Builder(this).setApplicationId(
                    "xxxxxxxxxxxxxxx").build();
            Session.setActiveSession(mSession);

        }
        if (!mSession.isOpened()) {

            Log.d("Facebook", "Session not opened");

            Session.OpenRequest sessionRequest = new Session.OpenRequest(
                    this);

            sessionRequest.setPermissions(PERMISSIONS);
            sessionRequest.setCallback(statuscallback);
            sessionRequest
                    .setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
            mSession.openForPublish(sessionRequest);

        }

    }

StatusCallback statuscallback = new StatusCallback() {

        @Override
        public void call(Session session, SessionState state,
                Exception exception) {
            // TODO Auto-generated method stub

            if (session.isOpened()) {

                Log.d("Facebook", "Logged in");
                postPhoto();

            }
            if (session.isClosed()) {

                Log.d("Facebook", "Logged out");
            }
        }
    };

   @Override
        public void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);
            Session.getActiveSession().onActivityResult(this, requestCode,
                    resultCode, data);

            Log.d("Facebook", "onActivity Result");
        } 
```

What if I need to logout the user??

I tried the following code onDestroy()

```
if (mSession.isOpened())
   mSession.closeAndClearTokenInformation(); 
```

whenever I open the app next time it always throws an error at this line if I use the above code in destroy method

```
mSession.openForPublish(sessionRequest); 
```

Please help guys. Answers/Suggestion would be highly appreciable.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:20:55.963

您可以使用 UiLifecycleHelper 帮助管理整个 Activity 或 Fragment 生命周期中的活动会话。通常，所有与会话相关的数据（访问令牌、权限等）都被缓存，如果您创建一个新的 Session()，它将使用缓存的数据（除非您调用 closeAndClearTokenInformation，在这种情况下它会清除缓存）。我只会在用户显式注销时调用 closeAndClearTokenInformation()，否则只需在 onDestroy() 中调用 close()。

我也会避免调用 openForPublish。始终执行 openForRead，然后调用 session.getPermissions() 以检查您是否具有必要的权限，如果需要更多权限，则调用 requestNewPublishPermissions。

# jquery - jQuery.data 在创建它的函数之外未定义？

> ID：15690491
> 
> 赞同：0
> 
> 时间：2013-03-28T19:28:54.847
> 
> 标签：jquery

我试图在一个函数中使用 jQuery.data 存储一些数据并在另一个函数中访问，但在第一个函数之外，数据出现未定义。看一下代码：

```
$("input:radio[name=gender]:checked").each(function()
{
    var genderChosen = $(this).val();
    alert(genderChosen);
    var gender = $(".gender");
    jQuery.data(gender, 'genderChosen', genderChosen);
    alert(jQuery.data(gender, 'genderChosen'));
    // Displays "male" or "female" depending on what's selected
});

var gender = $(".gender");
alert(jQuery.data(gender, 'genderChosen'));
// Displays "undefined" 
```

有人可以帮我在原始功能之外检索这些数据吗？我认为这就是 jQuery.data 方法的重点......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:32:49.717

你应该这样设置：

```
$('.gender').data('genderChosen', genderChosen); 
```

你应该像这样得到它：

```
var genderChosen = $('.gender').data('genderChosen'); 
```

你是对的。您应该能够从任何地方访问附加的数据。

是的。理论上，当您将数据附加到 DOM 元素时，jQuery.data() 与 .data() 的作用相同。我不确定为什么它对您不起作用，也许这方面存在特定于浏览器的怪癖。

# python - Error when building a project

> ID：15690493
> 
> 赞同：1
> 
> 时间：2013-03-28T19:28:55.160
> 
> 标签：python, build, installation, setup.py

I cloned an [organism](https://github.com/kynikos/organism.git) project from github.

I tried to install it, but there is no one `setup.py` file and no documentation.

Could you advise me how to correctly build and install it under Ubuntu 12.04?

I tried so far:

`sudo python3 organism.setup.py install`

which shows error message:

```
byte-compiling /usr/local/lib/python3.2/site-packages/organism/coreaux/configuration.py to configuration.pyc
  File "/usr/local/lib/python3.2/site-packages/organism/coreaux/configuration.py", line 31
    _USER_FOLDER_PERMISSIONS = 0750
                                  ^
SyntaxError: invalid token 
```

and running it shows this error message:

```
$ organism
Traceback (most recent call last):
  File "/usr/local/bin/organism", line 23, in <module>
    organism.main()
  File "/usr/local/lib/python3.2/site-packages/organism/__init__.py", line 21, in main
    import coreaux
ImportError: No module named coreaux 
```

I'm not sure if I should use all the files `organism-development.setup.py`, `organism-organizer.setup.py`, `organism.setup.py`, `organism-tk.setup.py` in the build process or the error is elsewhere.

# gwt - 垂直排列 GWT 面板

> ID：15690496
> 
> 赞同：0
> 
> 时间：2013-03-28T19:29:01.953
> 
> 标签：gwt

`DecoratorPanel`我在 GWT中正确对齐我的内容时遇到问题。

使用以下代码片段，所有内容似乎都垂直对齐到中间 (?)

```
DecoratorPanel decor = new DecoratorPanel();
decor.setHeight("100%");
decor.add(new Label("Test")); 
```

图解说明：

```
 --------                 --------
I get this:  |      |    I want this: |test  |
             |      |                 |      |
             |test  |                 |      |
             |      |                 |      |
             |      |                 |      |
             --------                 -------- 
```

我试过`decor.getElement().getStyle().setVerticalAlign(VerticalAlign.TOP);`了，但它似乎不影响任何东西。

如何将内容与面板顶部对齐？

**更新：**

我注意到，如果我使用 a`LayoutPanel`而不是 a`DecorPanel`一切似乎都正确对齐。

问题可能是我正在使用常规`Panels`with`LayoutPanels`吗？如果是这样，为什么我有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:55:07.690

A`DecoratorPanel`使用 HTML `table`，而另一个使用`div`. 因此，`DecoratorPanel`您可以在元素而不是内容上设置垂直样式`table`，这解释了您看到的内容以及不使用此面板的原因。因此，您应该使用`div`基于面板或在标签或标签上设置对齐方式`td`（即`label.getElement().getParent()`，但这有点难看并且容易出现未来的错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:47:45.783

获取`td`元素。

`... . getElement().setStyleName("myStyle");`

然后在你的CSS

```
.myStyle td{
vAlign : centre;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:21:31.577

DecoratorPanel 是 9 框面板，用于放置图像，特别是小部件的圆角效果它最有用，当你设置 100% 时，小部件周围有一个单元格，它可能会应用你所有单元格的宽度和高度看到中心的标签。

# ruby-on-rails - Rails form using GET request: How to remove button and utf8 params?

> ID：15690497
> 
> 赞同：18
> 
> 时间：2013-03-28T19:29:15.203
> 
> 标签：ruby-on-rails

I'm just trying to create a simple select menu that takes you to a specific URL. So far I have something like this:

```
# haml
= form_tag new_something_path, method: :get do
  = select_tag :type, options_for_select(my_array)
  = submit_tag 'New Something' 
```

However, when I submit the form I get the UTF8 parameter as well as a "commit" parameter with the text of the button.

How can I remove the UTF8 and commit parameters?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-29T02:55:46.833

去掉`commit`param比较简单，需要指定输入没有名字：

```
submit_tag 'New Something', name: nil 
```

关于 UTF-8 参数……它有一个重要的用途。一旦你理解[了 Rails UTF-8 参数的目的](https://stackoverflow.com/questions/3222013/what-is-the-snowman-param-in-ruby-on-rails-3-forms-for/3348524#3348524)，并且由于某种原因你仍然需要删除它，解决方案比你想象的要容易......只是不要使用 form_tag 帮助器：

```
# haml
%form{action: new_something_path, method: 'get'}
  = select_tag :type, options_for_select(my_array)
  = submit_tag 'New Something', name: nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-11T14:05:27.337

`utf8`您可以通过添加(and also ) 的`enforce_utf8: false`选项来摆脱参数，如下所示：`form_tag``form_form`

```
= form_tag new_something_path, method: :get, enforce_utf8: false do 
```

（感谢@Dmitry 指出这一点）

但请确保您不需要它：[Ruby on Rails 3 表单中的 _snowman 参数是干什么用的？](https://stackoverflow.com/questions/3222013/what-is-the-snowman-param-in-ruby-on-rails-3-forms-for/3348524#3348524)（我不确定它是否真的与`GET`表格相关。）

附加参数由提交按钮生成，可以通过设置`name: false`您的选项来删除`submit_tag`（也适用`submit`于 的情况`form_for`）。

```
= submit_tag 'New Something', name: nil 
```

# javascript - What can I do to get the #factorial div have css properties specified in the header

> ID：15690499
> 
> 赞同：1
> 
> 时间：2013-03-28T19:29:18.490
> 
> 标签：javascript, css

Here is the html document. why doesn't css properties specified in the header execute? what can i do to make them work (properties: "border-radius:4px;background-color:#1B35E0;")

```
 <!DOCTYPE>
 <html>
 <head>
    <meta charset="UTF-8">
    <title>Javascript|Practice</title>
    <style type="text/css"><!--Here goes inner design with CSS-->
        #factorial {
            border-radius:4px;
            background:yellow;
            }
    </style>
    <script>
        //Recursion
        //---------
        var x;
        var factorialValue;

        function start(){
            var startButton=document.getElementById("start");
            startButton.addEventListener("click",getInput,false);
        }
        function getInput(){
            x=window.prompt("Enter a positive integer");
            factorialValue=doRecursion(x);
            displayResult(factorialValue);

        }
        function doRecursion(n){
            if(n<=1){
                return 1;
            }
            else
                return n*doRecursion(n-1);
        }
        function displayResult(result){

            var output = "<p>"+x+"!="+result+" </p>";
            document.getElementById("factorial").innerHTML=output;
        }
        window.addEventListener("load",start,false);
    </script>
</head>
    <body>
        <p>Factorial number Calculator</p>
        <input id="start" type="button" value="Start" />
        <p id="factorial"></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T21:06:31.927

删除`<!--Here goes inner design with CSS-->`您在 css 标记中包含的 html 注释。`<!-- -->`不是 css 注释语法。

# dotnetnuke - DNN Module - Create Page for View.ascx

> ID：15690500
> 
> 赞同：3
> 
> 时间：2013-03-28T19:29:21.673
> 
> 标签：dotnetnuke

I have create a DNN Module using the Visual Studio DotNetNuke 7 C# Compiled Module template. When my module is installed, I would like to create a page for View.ascx. How can I do this? Can this be done when I upload the module in Host > Extensions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:41:00.593

要专门回答有关使用模块自动完成此操作的问题，是的，您可以，但是您必须编写代码来执行此操作，我只建议在特殊情况下使用它。

我已经看到使用 DNN 中的 IUpgradable 接口实现来检测初始安装并使用 DNN API 调用创建页面。

[Wiki](http://www.dotnetnuke.com/Resources/Wiki/Page/IUpgradeable.aspx)中有一些关于 IUpgradable 工作原理的详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:04:50.353

在控制面板中，您应该使用添加新页面功能，然后将您的模块放在新创建的页面上。

观看此视频，了解如何在 DNN7 中添加页面。

[http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/549/View/Details/How-to-add-a-page-in-DotNetNuke-7.aspx](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/549/View/Details/How-to-add-a-page-in-DotNetNuke-7.aspx)

这个是关于如何将模块添加到页面的

[http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/537/View/Details/How-to-add-a-module-to-a-page-in-DotNetNuke-7.aspx](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/537/View/Details/How-to-add-a-module-to-a-page-in-DotNetNuke-7.aspx)

# ajax - 如何使用 JSON.parse 或 eval() 显示数组？

> ID：15690505
> 
> 赞同：0
> 
> 时间：2013-03-28T19:29:35.997
> 
> 标签：ajax, json, jquery, jplayer

我有这段代码可以将json字符串中的值保存在会话变量中，我从ajax调用

我有以下代码：

```
(function ($) { 

    Drupal.behaviors.MyfunctionTheme = {
        attach: function(context, settings) {

     $('.add-music').click(function () {
         var songNew = JSON.stringify({
             title: $(this).attr('data-title'),
             artist: $(this).attr('data-artist'),
             mp3: $(this).attr('href')
         });
         var songIE = {json:songNew};
         $.ajax({
             type: 'POST',
             data: songIE,
             datatype: 'json',
             async: true,
             cache: false                
         })
         .done(
              //this is the callback function, which will run when your POST request returns
            function(postData){
                //Make sure to test validity of the postData here before issuing the GET request
                var session;
                $.ajaxSetup({cache: false})
                $.get('/getsession.php', function (getData) {
                      session = getData;
                        alert(session);
                });

              }
         );

     });

}}

})( jQuery ); 
```

我有以下代码可以正常工作，我刚刚打印了以下警报：

```
["{\"title\":\"El Derecho de las Mujeres a La Comunicaci\u00f3n\",\"artist\":\"\",\"mp3\":\"http:\/\/red.comppa.com\/sites\/default\/files\/audios\/Cun%CC%83aDerechoMujeresaLaComunicacion.mp3\"}","{\"title\":\"Objetivos del encuentro internacional de Derechos Humanos en el Bajo Aguan.\",\"artist\":\"\",\"mp3\":\"http:\/\/red.comppa.com\/sites\/default\/files\/audios\/objetivos_del_encuentro_dh.mp3\"}"] 
```

我需要有这样的东西：

```
[
  {
    title:"Cro Magnon Man",
    artist:"The Stark Palace",
    mp3:"http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3"
  },
  {
    title:"Hidden",
    artist:"Miaow",
    mp3:"http://www.jplayer.org/audio/mp3/Miaow-02-Hidden.mp3"
  }
] 
```

我如何使用 jquery 处理这些数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:31:04.427

假设数据存储在一个名为的变量中，`yourObject`您可以执行以下操作：

```
var result = JSON.parse("["+yourObject[0]+"]"); 
```

[这是一个工作箱](http://jsbin.com/uzavus/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:36:05.667

这就是`JSON.parse()`设计的目的。`Eval()`不是在这里使用的方法。澄清一下，`JSON.parse()`采用有效的、适当转义的 JSON 字符串并将它们转换为 Javascript 中的可用对象。`eval()`另一方面，它旨在获取字符串并尝试将它们作为 Javascript 函数、对象、变量等执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:36:32.653

您的示例输入实际上是一个字符串数组。您需要将数组中的每个元素解析为一个对象。使用 jQuery：

```
var input = ["{\"title\":\"El Derecho de las Mujeres a La Comunicaci\u00f3n\",\"artist\":\"\",\"mp3\":\"http:\/\/red.comppa.com\/sites\/default\/files\/audios\/Cun%CC%83aDerechoMujeresaLaComunicacion.mp3\"}","{\"title\":\"Objetivos del encuentro internacional de Derechos Humanos en el Bajo Aguan.\",\"artist\":\"\",\"mp3\":\"http:\/\/red.comppa.com\/sites\/default\/files\/audios\/objetivos_del_encuentro_dh.mp3\"}"];

var resultArray = new Array();

for(var i = 0; i < input.length; i++){
    var parsedElement = $.parseJSON(input[i]);
    resultArray.push(parsedElement);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T19:38:09.020

```
var display = JSON.stringify(jsonObject, undefined, 2); // indentation level = 2 
```

# c# - 在不离开应用程序的情况下创建 IconicTile

> ID：15690507
> 
> 赞同：0
> 
> 时间：2013-03-28T19:29:50.973
> 
> 标签：c#, windows-phone-8

我定义了一个 IconicTile 并创建它：

```
ShellTile.Create(new Uri("/MainPage.xaml?id=Iconic", UriKind.Relative), icontile, true); 
```

应用程序关闭，用户进入开始屏幕，动态磁贴刚刚固定在该屏幕上。

我怎样才能在不离开应用程序的情况下达到相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:01:31.853

您不能（在用户没有看到您的应用在做什么的情况下创建开始屏幕磁贴）。

# php - 一次上传的多个文件，自动调整大小和裁剪 - 可能吗？

> ID：15690509
> 
> 赞同：0
> 
> 时间：2013-03-28T19:30:09.300
> 
> 标签：php, javascript, file-upload, upload

是否可以有一个上传表单，允许用户上传大型高分辨率图像，并让它自动裁剪/调整大小并将许多多个项目保存到文件目录结构中？

基本上，客户会上传各种配件的图像，这些配件需要具有适当的纵横比。它需要调整图像大小和裁剪图像并将它们存储在一个目录系统中，该目录系统的组织方式使站点的其余部分可以出于各种原因（产品、画廊等）调用图像。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:31:35.447

当然，您可以使用[ImageMagick](http://www.imagemagick.org/script/index.php)创建图像，使用 HTML 上传图像，使用普通的 PHP 将图像写入磁盘（并调用 ImageMagick 库）。

所以工作流程将类似于：

*   客户端通过网页上的表单上传图像。
*   接收图像的服务器调用一个脚本，调用服务器上的 ImageMagick 来创建多个图像，裁剪和调整大小。
*   该脚本还负责将图像存储在服务器的文件系统中。

# matrix - Mahout 得分矩阵状态已更改

> ID：15690516
> 
> 赞同：1
> 
> 时间：2013-03-28T19:30:26.763
> 
> 标签：matrix, state, mahout

我想使用 mahout 来帮助我下一步：我有用户、项目和偏好的矩阵。我们为所有用户和项目填写了所有分数。然后为某些用户更改某些项目的偏好分数。问题是状态变化后如何重新计算可能受最近操作影响的其他用户分数？

例如：

```
 state before        state changed         state after recalculation

 u1 item1 25          u1 item1 25           u1 item1  ??
 u1 item2 12          u1 item2 12           u1 item2  ??
 u1 item3 10          u1 item3 10           u1 item3  ?? 
 u2 item1 25       => u2 item1 25     =     u2 item1  ??
 u2 item2 12          u2 item2 12           u2 item2  ??
 u2 item3 10          u2 item3 10           u2 item3  ??
 u3 item1 25          u3 item1 20*          u3 item1  20 
 u3 item2 12          u3 item2 15*          u3 item2  15 
 u3 item3 10          u3 item3 10           u3 item3  10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:38:18.023

当偏好发生变化时，Mahout 不会以在线方式调整推荐，本质上你需要给 Mahout 完整更新的数据模型文件并再次要求它重新计算推荐模型并从中检索推荐，所以基本上作为一个排序批次过程。

有一些像：

*   File1 -> Mahout -> 推荐
*   （文件 1 + 首选项更改）-> 文件 2
*   File2 -> Mahout -> 推荐

# javascript - iPad - 下拉导航更好的做法？

> ID：15690520
> 
> 赞同：0
> 
> 时间：2013-03-28T19:30:42.170
> 
> 标签：javascript, jquery, ipad

我有一个有望在 iPad 上运行的 Web 应用程序。我不希望为导航创建一个“下拉”HTML 元素（即一个选择元素），因为我有很多空间。我想使用我现有的桌面样式“悬停然后选择”类型导航，但用点击替换悬停事件。

我只需要支持 iPad 的移动 Safari，尽管其他浏览器支持可能是一个加分项。

以下是导航的结构：

```
<nav id="main_navigation">
  <ul>
    <li>
        <a id="nav_home" href="/index.jsp">home</a>
    </li>
    <li class="menuHasDrop" id="selected">
        <a id="parent" href="/parent.jsp">parent</a>
        <span class="navArrow"></span>
        <ul>
          <li><a id="foo" href="/foo.jsp">foo</a></li>
          <li><a id="bar" href="/bar.jsp">bar</a></li>
        </ul>
    </li>   
    <li>
        <a id="baz" href="baz.jsp">baz</a>
    </li>      
  </ul>
</nav> 
```

以下是我检测和启用触摸的方式：

```
fc.enableTouch = function() {  
  (function() {
    try {
      document.createEvent('TouchEvent');
      fc.touchEnabled = true;
    } catch(e) {}
  })();

  if (fc.touchEnabled) {
    $(document).ready(function() {

      // disable clicks on parents
      var $menus = $('.menuHasDrop');
      $menus.on('click', '>a', function(e){
        return false;
      })

      // listen for clicks on others          
      $('#main_navigation').on('click', $menus, function(e) {
        e.stopImmediatePropagation();
        var $this = $(this);
        if ($this.parent().children('ul').length > 0) {
          $menus.find('ul').hide();
          $this.toggleClass('expanded');
          if($this.hasClass('expanded')) {  
            $this.find('ul').show();
          }
        }
      });
    });
  } else {
    // console.log('not detecting touch');
  }  
}(); 
```

“扩展”类只是一个标志。我可以用另一种方式设置标志，但这并不重要。

所以，这一切都“有效”......但有两件事困扰着我：

1.  当我单击它时，在父导航上会有某种阴影闪烁。我确定这是一个操作系统“点击链接”指示器，但它不是由 CSS 或 JavaScript 明确提供的。如果有人见过这样的事情，你知道如何禁用它吗？

2.  似乎时不时地，代表子菜单的 UL 似乎会出现，消失，然后再次出现。同样，我不认为逻辑本身会导致这种情况，所以它可能是特定于浏览器的。

其他有用的背景信息：总是有一个或多个内容区域通过 ajax 调用被刷新，但页面本身没有被刷新，并且导航区域在请求期间没有任何功能作用于它。

我想我要问的不仅仅是代码审查：“这些只是我必须忍受的 iOS 怪癖吗？” 和“是否有明确的更好的触摸启用下拉菜单的做法？” 其次，所有“我发现你的代码有问题”的建议都将受到欢迎和赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:44:28.187

摆脱水龙头颜色

```
-webkit-tap-highlight-color:rgba(0,0,0,0); 
```

对于绑定，使用 touchstart/touchend 我在当前项目中所做的是检测触摸，如果启用触摸，则仅绑定 touchstart 和 end，如果没有则绑定单击

我还将使用“>a”向您定位的锚添加一个类，这真的很慢

```
$(#el).on('touchstart', function() {
    // if class exist
       // go to link

    // else
       // add class and open dropdown
}); 
```

对于我当前的项目，我们设置了一个虚拟事件处理程序来检测触摸是触摸移动还是常规触摸启动

你也可以做这样的事情

```
$(#el).on('touchstart', function() {
    $(this).trigger('click');
    // or you can use prevent default and stopPropagation
    return false;
}); 
```

或在 touchend 上绑定，无论哪种方式更适合您

# java - 尽管编译和运行的版本相同，但运行 java 程序失败

> ID：15690529
> 
> 赞同：1
> 
> 时间：2013-03-28T19:31:12.913
> 
> 标签：java

我正在尝试编译和运行这段代码，我只是在swing教程中找到的。

我使用以下命令编译和运行程序：

编译：

```
/usr/lib/jvm/java-1.7.0-openjdk.x86_64/bin/javac ComboBoxDemo2.java 
```

跑：

```
/usr/lib/jvm/java-1.7.0-openjdk.x86_64/bin/java ComboBoxDemo2 
```

该程序：

```
/*
 * Copyright (c) 1995, 2008, Oracle and/or its affiliates. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *   - Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *
 *   - Neither the name of Oracle or the names of its
 *     contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

package components;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import java.util.*;
import java.text.SimpleDateFormat;

/* ComboBoxDemo2.java requires no other files. */
public class ComboBoxDemo2 extends JPanel
                           implements ActionListener {
    static JFrame frame;
    JLabel result;
    String currentPattern;

    public ComboBoxDemo2() {
        setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));
        String[] patternExamples = {
                 "dd MMMMM yyyy",
                 "dd.MM.yy",
                 "MM/dd/yy",
                 "yyyy.MM.dd G 'at' hh:mm:ss z",
                 "EEE, MMM d, ''yy",
                 "h:mm a",
                 "H:mm:ss:SSS",
                 "K:mm a,z",
                 "yyyy.MMMMM.dd GGG hh:mm aaa"
                 };

        currentPattern = patternExamples[0];

        //Set up the UI for selecting a pattern.
        JLabel patternLabel1 = new JLabel("Enter the pattern string or");
        JLabel patternLabel2 = new JLabel("select one from the list:");

        JComboBox patternList = new JComboBox(patternExamples);
        patternList.setEditable(true);
        patternList.addActionListener(this);

        //Create the UI for displaying result.
        JLabel resultLabel = new JLabel("Current Date/Time",
                                        JLabel.LEADING); //== LEFT
        result = new JLabel(" ");
        result.setForeground(Color.black);
        result.setBorder(BorderFactory.createCompoundBorder(
             BorderFactory.createLineBorder(Color.black),
             BorderFactory.createEmptyBorder(5,5,5,5)
        ));

        //Lay out everything.
        JPanel patternPanel = new JPanel();
        patternPanel.setLayout(new BoxLayout(patternPanel,
                               BoxLayout.PAGE_AXIS));
        patternPanel.add(patternLabel1);
        patternPanel.add(patternLabel2);
        patternList.setAlignmentX(Component.LEFT_ALIGNMENT);
        patternPanel.add(patternList);

        JPanel resultPanel = new JPanel(new GridLayout(0, 1));
        resultPanel.add(resultLabel);
        resultPanel.add(result);

        patternPanel.setAlignmentX(Component.LEFT_ALIGNMENT);
        resultPanel.setAlignmentX(Component.LEFT_ALIGNMENT);

        add(patternPanel);
        add(Box.createRigidArea(new Dimension(0, 10)));
        add(resultPanel);

        setBorder(BorderFactory.createEmptyBorder(10,10,10,10));

        reformat();
    } //constructor

    public void actionPerformed(ActionEvent e) {
        JComboBox cb = (JComboBox)e.getSource();
        String newSelection = (String)cb.getSelectedItem();
        currentPattern = newSelection;
        reformat();
    }

    /** Formats and displays today's date. */
    public void reformat() {
        Date today = new Date();
        SimpleDateFormat formatter =
           new SimpleDateFormat(currentPattern);
        try {
            String dateString = formatter.format(today);
            result.setForeground(Color.black);
            result.setText(dateString);
        } catch (IllegalArgumentException iae) {
            result.setForeground(Color.red);
            result.setText("Error: " + iae.getMessage());
        }
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("ComboBoxDemo2");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        JComponent newContentPane = new ComboBoxDemo2();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

有人可以告诉我为什么通过运行程序会出现以下错误：

```
/usr/lib/jvm/java-1.7.0-openjdk.x86_64/bin/java ComboBoxDemo2
Exception in thread "main" java.lang.NoClassDefFoundError: ComboBoxDemo2 (wrong name: components/ComboBoxDemo2)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T19:34:16.800

运行应用程序时，您需要使用类的完全限定名称。这意味着包括包名。您的类位于一个名为 的包中`components`，因此您需要使用以下命令运行应用程序`java components.ComboBoxDemo2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:34:30.427

尝试：

```
cd ..
/usr/lib/jvm/java-1.7.0-openjdk.x86_64/bin/java components.ComboBoxDemo2 
```

# javascript - 将html表导出到excel时出错

> ID：15690530
> 
> 赞同：2
> 
> 时间：2013-03-28T19:31:14.007
> 
> 标签：javascript, jquery, export-to-excel

将 html 表导出到 excel 时出现以下错误；SCRIPT429：自动化服务器无法创建对象...此功能工作正常，但当我重新启动我的电脑和应用程序停止工作时，不知道发生了什么。

```
function write_to_excel() {
str = "";
var myTable = document.getElementById('myTable');
var rows = myTable.getElementsByTagName('tr');
var rowCount = myTable.rows.length;
var colCount = myTable.getElementsByTagName("tr")[0]
        .getElementsByTagName("th").length;

var ExcelApp = new ActiveXObject("Excel.Application"); //Debug shows error at this  line
var ExcelWorkbook = ExcelApp.Workbooks.Add();
var ExcelSheet = ExcelWorkbook.ActiveSheet;

ExcelApp.Visible = true;
ExcelSheet.Range("A1", "Z1").Font.Bold = true;
ExcelSheet.Range("A1", "Z1").Font.ColorIndex = 23;

// Format table headers
for ( var i = 0; i < 1; i++) {
    for ( var j = 0; j < colCount - 1; j++) {
        str = myTable.getElementsByTagName("tr")[i]
                .getElementsByTagName("th")[j].innerHTML;
        ExcelSheet.Cells(i + 1, j + 1).Value = str;
    }
    ExcelSheet.Range("A1", "Z1").EntireColumn.AutoFit();
}
for ( var i = 1; i < rowCount; i++) {
    for ( var k = 0; k < colCount - 1; k++) {
        str = rows[i].getElementsByTagName('td')[k].innerHTML;
    ExcelSheet.Cells(i + 1, k + 1).Value =  myTable.rows[i].cells[k].innerText;
    }
    ExcelSheet.Range("A" + i, "Z" + i).WrapText = true;
    ExcelSheet.Range("A" + 1, "Z" + i).EntireColumn.AutoFit();
}

return;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:32:40.810

> 自动化服务器无法创建对象。

意味着您的 ActiveX 设置太高，因此代码无法运行。

# php - 强制 MySQL 的 GROUP BY 为空组生成结果的技术？

> ID：15690532
> 
> 赞同：1
> 
> 时间：2013-03-28T19:31:16.310
> 
> 标签：php, mysql

我有一个查询，它应用 MySQL 的 GROUP BY 函数来计算给定会话上发生的事件数。会话以 1 为增量增加。因此，结果可能如下所示。

```
session events
100     10
101     15
102     29
103     15
104     2 
```

当给定会话中没有任何事件时，就会出现问题。因此，想象一下，在会话 102 中包含 0 个观测值，而不是包含 29 个观测值。结果如下所示。

```
session events
100     10
101     15
103     15
104     2 
```

什么技术会强制 GROUP BY 识别会话 102 中的 0 个事件，并且结果看起来像这样？即，用 0 个事件报告会话 102。

```
session events
100     10
101     15
102     0
103     15
104     2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:35:17.227

您可以 LEFT JOIN 到另一个表，其中包含您感兴趣的所有会话。通过使用 LEFT JOIN，您可以确保“其他”表中的所有结果都出现在结果中。

例如对于一张`source`桌子：

> ```
> >    SOURCE_SESSION
> >     100
> >     101
> >     102
> >     103
> >     104
> >     ... 
> ```

你会写类似的东西

```
SELECT SOURCE_SESSION, sum(events)
FROM   source
LEFT JOIN my_table on source.SOURCE_SESSION = my_table.session
GROUP BY source.SOURCE_SESSION 
```

您的里程可能会有所不同，但这是一般的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:35:29.930

如果没有架构或当前查询，这是推测。

假设您有两张桌子，一张是会话，另一张是活动。您可以`LEFT JOIN`会话到事件以包括没有事件的会话。现在，当您按会话 ID 分组并计算事件时，您将获得包括零事件的会话的结果。

# django - pip install：如何强制使用特定的软件包版本

> ID：15690533
> 
> 赞同：32
> 
> 时间：2013-03-28T19:31:20.067
> 
> 标签：django, pip

我正在尝试安装 Django 1.4.3，但是当我执行 pip install 时，pip 继续安装 Django 1.5 版本而不是 1.4.3

`sudo pip install -I Django==1.4.3`

它返回：

```
Downloading/unpacking Django==1.4.3
  Running setup.py egg_info for package Django

    warning: no previously-included files matching '__pycache__' found under directory '*'
    warning: no previously-included files matching '*.py[co]' found under directory '*'
=== >>>> Requested Django==1.4.3, but installing version 1.5 <<<< ====
Installing collected packages: Django
  Found existing installation: Django 1.5
    Uninstalling Django:
      Successfully uninstalled Django
  Running setup.py install for Django

    warning: no previously-included files matching '__pycache__' found under directory '*'
    warning: no previously-included files matching '*.py[co]' found under directory '*'
    changing mode of /usr/local/bin/django-admin.py to 755
Successfully installed Django
Cleaning up... 
```

但是如果我执行 pip freeze ，它会一直显示

姜戈==1.5

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T19:59:11.513

这可以/应该/可以通过在 pip 中清除 Django 的构建目录来帮助。这有一个错误，因为版本 1.1[请参阅此处了解详细信息](https://github.com/pypa/pip/issues/709)

如果您使用的是 OS X 或类似 unix 的系统，则可以在此处开始检查这些文件夹：

```
~/.pip 
/tmp/pip-build-root (or pip-build-$USER, if you aren't running pip as root). 
```

这是如果您在安装 Django 的第一个版本时没有指定新的构建文件夹。

祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T09:03:21.097

正如[聚光灯所说](https://stackoverflow.com/a/15691041/383793)，您应该清空缓存并构建目录，或者使用`--download-cache`and 标志传入一个临时干净的位置。

```
$ pip help install
[...]
--download-cache <dir>      Cache downloaded packages in <dir>.
-b, --build <dir>           Directory to unpack packages into and build in. The default in a virtualenv is "<venv path>/build". The default for global installs is
                          "<OS temp dir>/pip-build-<username>". 
```

我想警告任何读者不要使用`sudo pip install`安装 Django。它在系统范围内安装 Django。并且更改系统范围的版本可能会破坏依赖它的系统包。例如，Ubuntu MAAS 和 Cobbler 依赖于系统 django 包。这些通常是您不想破坏的服务。

如果您需要与系统包不同的版本，请使用[virtualenv](https://pypi.python.org/pypi/virtualenv)将您的依赖项与系统隔离。

OP 似乎在 OSX 上，我不知道任何服务器范围的 Mac Django，但这可能会改变。考虑使用`sudo`at par 安装 python 包，以使用 python 3 更改系统安装的 python；它现在可能有效，但有一些扑热息痛库存，因为你会头疼。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-20T06:39:17.083

检查您的本地缓存并将其删除可能会有所帮助。我已经安装了 pymongo==2.5.2。为了安装pymongo==2.4.1，我删除了/tmp/pip-build-root/pymongo中的缓存。然后我成功安装了pymongo 2.4.1。

# jsp - 循环遍历jsp中的列表并在点击时传递相应对象的id

> ID：15690538
> 
> 赞同：1
> 
> 时间：2013-03-28T19:31:43.953
> 
> 标签：jsp, jsf, managed-bean, jsf-1.2

我试图了解**JSP 和托管 bean 交互的行为**。（使用 JSF 1.2 对此进行测试）
我有一个购物车页面，其中显示了已添加到购物车中的项目列表，并在每行末尾有一个删除按钮，使用户能够从购物车中删除该特定项目。

**我面临**的问题是：

1.  对于购物车页面中的每个项目，**我想要一个通用的删除方法**，当单击删除项目按钮时，该方法会为该对象调用。我想到了将按钮对应的数据对象的 id 值传递给`backingBean.removeFromCart`方法。

    但那是不可能的。因为它无法解释价值

    ```
    action="#{cartBackingBean.removeFromCart(#{cart.item.id})}" 
    ```

2.  我想可能我可以使用`InputHidden`标签并将 itemId 传递给按钮单击时的删除函数。

    但即使这样也没有奏效。当我得到购物车对象时，它在 jsp 中**结果为空。**

    ```
    <%CartData cart = (CartData) request.getAttribute("cart"); if(cart != null) out.println("<input type=\"Hidden\" id =\"itemId\" name=\"itemId\" value =\""+cart.getItem().getId() +"\" />");%> 
    ```

3.  我将代码更改为 a`href`并在请求中传递 itemId 并在代码中使用它。
    **这可行**，但是有点烦人，因为我知道购物车中需要删除的对象。因此，我需要传递 itemId 而不是使用该引用，这听起来更像是一个 hack。

**在所有代码中：**

```
<f:view>
    <h:form id="search">
            <h:panelGrid bgcolor="skyblue" border="3">

                    <c:if test="${not empty cartBackingBean.cartData}">
                        <c:forEach var="cart" items="#{cartBackingBean.cartData}">

                            <h:panelGroup rendered="#{!cartBackingBean.invalidAccess}">
                                <h:graphicImage value="#{cart.item.imageUrl}" height="60" width="300"/>
                            </h:panelGroup>

                            <h:panelGroup rendered="#{!cartBackingBean.invalidAccess}">
                                <h:outputText value="#{cart.item.name}">
                                </h:outputText>
                            </h:panelGroup>

                            <h:panelGroup rendered="#{!cartBackingBean.invalidAccess}">
                                <a href="RemoveItemFromCart.view?itemId=${cart.item.id}" style="color: blue; font-style: italic;border: green; ">Remove item from cart</a>
                            </h:panelGroup>

                                <!--  Didn't Work -->
                                <%
                                    CartData cart = (CartData) request.getAttribute("cart");
                                    if(cart != null)
                                        out.println("<input type=\"Hidden\" id =\"itemId\" name =\"itemId\" value =\""+ cart.getItem().getId() +"\" />");
                                %>
                                <!--        <h:commandButton value="Remove from Cart" id="submit2" action="#{cartBackingBean.removeFromCart}" />  -->

                        </c:forEach> 
                    </c:if>

                        <h:panelGroup style="display:block; text-align:center" rendered="#{!cartBackingBean.invalidAccess}">
                            <div class="search">
                                <h:commandButton value="Add to Order" id="submit1" action="#{cartBackingBean.addToOrder}"/>
                                <h:commandButton image="images/submit.gif" value="Save Cart" id="submit" action="#{cartBackingBean.saveCart}"/>
                            </div>
                        </h:panelGroup>

                </h:panelGrid>
    </h:form>
</f:view> 
```

**支持 Bean**代码：

您可以参考 `// This is unnecessary code which I could've avoided if I can pass the exact cart object from UI.` 我试图避免的这条线。

```
public String removeFromCart()
{
    Long itemId = -1L;

    if((Connection.getRequest().getParameter("itemId") != null 
            && Long.parseLong(Connection.getRequest().getParameter("itemId").toString()) >= 0))
    {
        itemId = Long.parseLong(Connection.getRequest().getParameter("itemId").toString());
    }

    if(itemId < 0L && (Connection.getRequest().getAttribute("itemId") != null 
            && Long.parseLong(Connection.getRequest().getAttribute("itemId").toString()) >= 0))
    {
        itemId = Long.parseLong(Connection.getRequest().getAttribute("itemId").toString());
    }

    if(itemId < 0L && (Connection.getRequest().getSession().getAttribute("itemId") != null 
            && Long.parseLong(Connection.getRequest().getSession().getAttribute("itemId").toString()) >= 0))
    {
        itemId = Long.parseLong(Connection.getRequest().getSession().getAttribute("itemId").toString());
    }

    this.clearError();

    if(itemId == -1L)
    {
        this.setError("Could not delete as item was not found");
        return Constants.ERROR;
    }

    // This is unnecessary code which I could've avoided if I can pass the exact cart object from UI.
    if(!Util.isNullList(getCartData()))
    {
        for(CartData cart : this.cartData)
        {
            if(cart.getItemId() == itemId)
            {
                cart.setItem(null);
                Connection.getCurrentDBSession().delete(cart);
                break;
            }
        }
    }

    this.setError(Constants.EMPTY_STRING);
    Util.removeBean("cartBackingBean");
    Connection.getRequest().getSession().setAttribute(Constants.FORWARD_MESSAGE_TO_NEXT_BB, "Item removed from Cart Successfully!!");

    return Constants.CART;
} 
```

完整的**代码**可在[此处查看](https://github.com/bandikishores/ShoppingCart/blob/master/src/backingbean/CartBackingBean.java)以供查看。

另外，我听到有人说不要在 JSP 中使用 JSF 标签，因为它不起作用或不支持。
但我一直在使用 JSP 运行这段代码，它运行良好。有人可以解释一下为什么我们不应该混合这些技术吗？什么时候应该使用它们中的任何一个？

# javascript - $(window).scrollTop() == $(document).height() - $(window).height() 的含义

> ID：15690541
> 
> 赞同：6
> 
> 时间：2013-03-28T19:31:54.810
> 
> 标签：javascript, jquery, html

以下代码用于检测用户是否滚动到页面底部并且它可以工作。

```
if($(window).scrollTop() == $(document).height() - $(window).height()){
//do something
} 
```

**问题：**

我不明白为什么要从文档的高度中减去窗口的高度，然后将其与滚动高度进行比较以确定是否已到达页面底部。为什么不简单

```
if($(window).scrollTop() == $(document).height()){
//do something
} 
```

或者

```
if($(window).scrollTop() ==  $(window).height()){
//do something
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T19:33:28.680

这是因为`$(window).scrollTop()`返回页面顶部的位置，`$(document).height()`返回页面底部的位置。因此，您需要减去窗口的高度以获得要比较的位置，因为如果您完全滚动到底部，这将为您提供页面顶部的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:35:53.777

`$(window).scrollTop()`是窗口*顶部*相对于文档的位置。在我现在正在查看的页面上，`1385`如果我滚动到最底部。 `$(document).height()`是整个页面的高度（`1991`对我来说）。$(window).height() 是窗口（视口）的高度（`606`对我来说）。这意味着视口顶部的位置加上窗口的高度就是视口*底部*的位置。 `1385 + 606 = 1991`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:34:54.743

该`scrollTop`值永远不会与文档高度值一样高。这意味着您滚动了文档，使其全部位于窗口之外。

与`scrollTop`窗口高度相比，仅意味着您向下滚动了一屏，而不是文档的底部。

`scrollTop`当窗口的底部位于文档的底部时，从文档高度中减去窗口高度可以得出将在哪里的值。

# outlook - 在 CRM 2011 中创建分发列表

> ID：15690551
> 
> 赞同：0
> 
> 时间：2013-03-28T19:32:19.880
> 
> 标签：outlook, dynamics-crm-2011, crm, outlook-2013

我正在尝试为我们的用户找到一种有效的方法，以便按需使用自定义电子邮件（无模板）向 CRM 中的多个联系人发送电子邮件。

在玩了很长时间之后，我想出了以下内容：

1.  在“联系人”下创建一个自定义视图，其中包含您要发送电子邮件的组。
2.  选择其中一个联系人，转到“添加”选项卡，然后选择“电子邮件”
3.  单击“收件人”旁边的搜索框，然后在弹出窗口中填写以下内容：
4.  寻找：“联系方式”
5.  视图：“-步骤 1 中自定义视图的名称-”
6.  选择视图中的所有联系人
7.  点击“添加”
8.  点击“确定”
9.  完成电子邮件并发送

但是，这效率不高，并且会使我们的用户感到困惑。我正在寻找一种更好的解决方案，以便在 CRM 中一次向多个用户发送电子邮件，或者从 CRM 中动态提取联系人并将其放入 Outlook 2013 中的分发列表中（甚至可能不可能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:40:41.137

假设您要发送给联系人、潜在客户或客户：

*   使用左上角的复选框选择视图上为此目的设置的所有记录
*   单击功能区上方的添加选项卡
*   单击快速活动 -> 对于所有页面上的所有记录
*   使用向导，确保选中“标记要发送的电子邮件”

# ruby - 使用 capybara-webkit 解析元素文本

> ID：15690555
> 
> 赞同：1
> 
> 时间：2013-03-28T19:32:28.683
> 
> 标签：ruby, regex, web-scraping, capybara, capybara-webkit

我是 Ruby 和 Capybara 的新手，我正在尝试使用 capybara-webkit 来抓取网站。我感兴趣的所有数据都位于`td`具有某些属性的标签中。

`form`我正在查看的特定表单元素在哪里，以下代码有效：

```
form.all('td').detect do |td|
  if td['valign'] == 'top' && td['nowrap'] != 'nowrap'
    print "#{td.text}\n"
  end
end 
```

`td`我感兴趣的所有元素的内容都被正确打印出来了。但是，当我尝试使用正则表达式解析文本时：

```
form.all('td').detect do |td|
  if td['valign'] == 'top' && td['nowrap'] != 'nowrap'
    print "#{td.text}\n"
    val1, val2 = td.match(/(\d)(\d)/).captures # The real regex is more complex
  end
end 
```

...突然只有第一个`td`元素被读取/解析。我什至尝试将每个`td.text`值推入一个数组以供以后解析，但同样的事情发生了。我什至尝试过克隆`td.text`字符串并对其进行操作——不走运。页面上似乎没有任何会更改 HTML 元素的超时。完全不知道是什么原因造成的。

有什么想法吗？

# php - 复杂日期问题 - PHP - Codeigniter - Jquery UI 日历

> ID：15690556
> 
> 赞同：0
> 
> 时间：2013-03-28T19:32:31.430
> 
> 标签：php, jquery-ui, codeigniter, date, jquery-ui-datepicker

我正在创建一个使用 jquery ui datepicker 的站点。我有它的项目有不同的租赁长度。所以一辆车可能需要 7 天，而帐篷可能需要 3 天。

当用户输入所需的项目数量时，系统会检查天数是否可用，然后将系统中已经存在的日期数组放在一起。这个数组被传回 jquery ui datepicker 并且这些日期在日历上被屏蔽掉了。

这是我的问题。如果用户选择一个日期范围，例如 2 天。从每月 2 日到 4 日。然后用户返回并想要选择 1 日，显然如果该项目是在 2 日租用的，那么当月 1 日到 3 日的租用 ISNT 可用。

我不知道如何阻止无法提供完整租期的日子。这是我到目前为止创建阻塞日期数组的代码：

```
$dateArray = array();
            foreach($rentals as $rental) {

                //Figure out how many days are between the start and end...
                $now = strtotime($rental['periodEnd']);
                $your_date = strtotime($rental['periodStart']);
                $datediff = $now - $your_date;
                $daysBetween = floor($datediff/(60*60*24));

                $i = 0;

                while($i < $daysBetween) {

                    if($i != 0) {
                        $date = date('Y-m-d', strtotime($rental['periodStart']. ' + ' . $i . ' days'));
                    }else {
                        $date = date('Y-m-d', strtotime($rental['periodStart']));
                    }

                    array_push($dateArray, $date);

                    $i++;

                }

            }

            //Now get rid of duplicates...
            $dateArray = array_unique($dateArray);

            echo json_encode($dateArray); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:51:17.313

我在一个提供包租钓鱼之旅的网站上添加了这个确切的功能。我的解决方案涉及更多变量，因此这可能有点宽泛/模糊，但至少应该将您推向正确的方向。

[`beforeShowDay`我为 Datepicker 的选项](http://api.jqueryui.com/datepicker/#option-beforeShowDay)设置了一个回调函数：

> 函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1] 等于 CSS 类名称或默认表示为 ""，并且 [ 2] 此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

在我的回调中，我将用户当前的选择（他们选择的行程，可能从 1/2 到 3 天不等，以及他们选择的出发日期）与一个不可用日期列表（我使用 PHP 动态生成的和`json_encode()`像你自己一样）进行比较.

当用户打开 Datepicker 时，回调将在当前显示的日历上的每一天触发。所以每天都会经历一个类似的逻辑：

1.  这一天是过去吗？（过去不能包车！）
2.  这一天是不是已经预定了？
3.  这个预约要多长时间？未来是否有任何预留日期与此时间范围相冲突？

请注意，在我的描述中，这都是基于前端/jQuery 的——用户输入的当前选择的值是使用`$('#item').val()`. 回调与后端没有交互。您*可以*在回调中使用 ajax，但我发现它要慢得多。你的旅费可能会改变。

此外，您绝对应该有一个后端解决方案，它也可以做几乎相同的事情。不要依赖 JS 来进行过滤。

希望这能让你走上正轨！

# git - 单个 git-svn 命令不缓存多个 svn 操作的密码

> ID：15690560
> 
> 赞同：3
> 
> 时间：2013-03-28T19:32:36.153
> 
> 标签：git, git-svn

我正在使用 git-svn 连接到通过 https 进行身份验证的 subversion 存储库。我在 Linux (Ubuntu 12.04) 上使用 git 命令行客户端。当我执行任何需要与 subversion 服务器交互的命令时，我必须按预期输入我的 svn 密码。但是，如果命令需要与 svn 服务器进行多次交互（例如 git svn dcommit 和多个本地提交），我必须多次输入密码。

在另一个工作站上，我有一个类似的设置，它给了我对整个系列提交请求一次密码的预期行为。

我在[这里](https://stackoverflow.com/questions/3127097/git-svn-password-for-svn-is-not-stored)和[这里](https://stackoverflow.com/questions/605519/does-git-svn-store-svn-passwords)发现了类似的问题，但在这两种情况下，OP 都希望在 git-svn 命令之间缓存 svn 凭据。我没有配置颠覆来缓存我的密码，如果可以的话，我想保持这种状态。

我的 git-svn 版本是 1.7.9.5 (svn 1.6.17)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:21:19.560

问题是`git svn`命令使用围绕常规 Subversion 接口的包装器执行多个 Subversion 操作；Git 不知道也不关心您的 Subversion 凭据。

我可以看到一些不同的继续选项，但都不是很好：

*   启用 Subversion 的凭证存储。你知道这一点并且说过你不想这样做，所以这是一个非首发。

*   只需为 Git 执行的每个 Subversion 操作输入密码。您当前的解决方案；如果那很好，您就不会问这个问题。

*   补丁`git svn`。Git 代码是开源的，并且`git svn`命令是用 Perl 编写的，因此您可以在系统上进行编辑并使用新版本而无需重新编译。粗略设计：

    *   每当与 Subversion 存储库交互时，首先尝试在没有交互身份验证的情况下执行它（即`--non-interactive`底层`svn`命令的参数）。

    *   如果这行得通，很好，继续。如果失败，则假设由于缺少身份验证而失败，并提示用户输入用户名和密码。

    *   对于后面的`svn`命令，如果不需要认证，就这样继续。否则，明确指定存储的用户名和密码（即底层命令的参数）`--username`。`--password``svn`

不过，单打独斗绝非易事。除非你特别喜欢在 Git 源代码中进行一些艰苦的工作，或者希望这足以支付某人为你做这件事，否则看起来这是你需要忍受的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:21:02.767

您需要将凭据存储在`subversion`目录中。一个天真的解决方案是在临时目录中对您的 svn 存储库进行简单的签出，以`svn`保存您的`username`and `password`：

```
svn co http://url-of-your-svn/repos/repos temp-repos-directory 
```

这样`svn`会询问您是否要保存您的凭据，它们将保存在您的`subversion`配置目录中（`~/.subversion/aut/`在 linux 中）。

另一种解决方案是直接`svn`要求存储您的凭据：

```
svn update --username 'username' --password 'password' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T20:31:58.827

我努力制作 svn（包括 git-svn）来保存纯文本密码，但事实证明，为了做到这一点，应该**使用特定的标志编译实际版本。**看到[这个](https://stackoverflow.com/a/61345979/985457)和[这个](https://stackoverflow.com/a/61493621/985457)。我的解决方法是使用这样的别名：

```
echo $SVN_PASS | git svn fetch 
```

# android - 我怎样才能用圆圈画一个圆圈

> ID：15690563
> 
> 赞同：0
> 
> 时间：2013-03-28T19:32:49.343
> 
> 标签：android

我怎样才能做到这一点？有没有一个例子？能给我看看么 ？

例如。我有一个这样的圈子

```
RadialGradient gradient = new RadialGradient(0, 0, 40, new int[]{Color.RED, Color.YELLOW}, new float[] {1,0}, android.graphics.Shader.TileMode.CLAMP);
paint2.setShader(gradient);
canvas.drawCircle(this.getWidth()/2, this.getHeight()/2, 40, paint2); 
```

这个圆怎么能画圆呢？

# c++ - 创建对象数组时的 C++ 分段错误

> ID：15690570
> 
> 赞同：0
> 
> 时间：2013-03-28T19:33:11.920
> 
> 标签：c++, memory, inheritance, constructor

假设我有一个类基类的对象：

```
// baseclass.h
class baseclass
{
    baseclass() # default constructor, constructs baseclass object
} 
```

在基类的 .cpp 中：

```
// baseclass.cpp
baseclass::baseclass()
{
    // member functions and variables
} 
```

现在我的目标是有一个派生类，并在派生类的默认构造函数中，创建一个静态大小为*n 个*基类对象的数组。为了尝试澄清，考虑这个问题的另一种方法是将基类视为扑克牌，我想通过调用派生类的默认构造函数来创建这些牌的数组（一副牌）。但是，我决定保留我的问题摘要的范围，因此我将继续使用基础/派生，以便其他人可以更轻松地了解这如何适用于他们。

我不确定以面向对象的方式设置它的最佳方法，到目前为止我有类似的东西，但我遇到了[分段错误](https://stackoverflow.com/questions/6923574/what-can-cause-segmentation-faults-in-c "分段故障")。这是我的设置方式：

```
// derivedclass.h (extending baseclass)
class derivedclass
{
    // default constructor for derivedclass object
    derivedclass();

    // a pointer to an object of type baseclass
    baseclass* bar;
    // or should it be:
    baseclass* bar[n] // where n is an integer
    // or is there a better way to do it?
} 
```

最后，因为我说过派生类对象可以有一个数组，所以我必须为派生类的 .cpp 中的默认构造函数做到这一点：

```
// derivedclass.cpp
derivedclass::derivedclass()
{
    // so I need to initialize the member array
    baseclass* bar = new baseclass[n] // where n is the size I want to initialize 
                                      // the array to
} 
```

那么我列出的任何情况都会导致分段错误吗？创建这个对象数组的最佳方法是什么？抱歉，如果这是一个小问题，我是一名学生，仍在学习很多关于内存分配和指针的知识，通常处理我不必担心的语言。此外，为了他人的利益，我试图保持问题的抽象。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:36:49.360

我不确定为什么你需要在这里使用动态分配。我宁愿做这样的事情，这也可以节省你在`derivedclass`构造函数中的一些工作：

```
struct baseclass
{
    // Stuff...
};

struct derivedclass : baseclass
{
    // Stuff...

    baseclass objects[N];
}; 
```

在 C++11 中，您应该使用`std::array<>`而不是普通的 C 样式数组（`std::array<>`是 C 样式数组的安全、零开销包装器）：

```
// ...

#include <array>

struct derivedclass : baseclass
{
    // Stuff...

    std::array<baseclass, 10> objects;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:35:54.617

```
// so I need to initialize the member array
baseclass *bar = new baseclass[n]; 
```

除此之外，您不初始化成员数组，只初始化与成员变量同名的局部变量，因此它会隐藏它（出于同样的原因，您还会通过丢失指针来泄漏内存到`new`ly分配的数组）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:41:22.237

Why to use `new` at all? Why to derive deck from cards? Deck contains cards.

```
 class Card
 {
     // ... whatever card does
 };

 class Deck
 {
 public:
     static int const CountOfCards = 36;
     typedef std::array<Card,CountOfCards> Cards;
     Cards cards;
     // etc. ... whatever deck does
 }; 
```

# c# - 为什么我会收到 WaitingforActivation TaskStatus

> ID：15690572
> 
> 赞同：5
> 
> 时间：2013-03-28T19:33:21.860
> 
> 标签：c#

我正在尝试在带有 VS2012 框架 4.5 的表单上使用 async 和 await 命令。我的异步方法 SlowMethodAsync 不返回任何内容。请注意，此代码在控制台应用程序中运行良好。

```
private void button1_Click(object sender, EventArgs e)
{
    var task =  SlowMethodAsync();

    for (int i = 0; i < 10; i++)
    {
        Console.WriteLine(i);
    }

    System.Threading.Tasks.TaskStatus status = task.Status;

     Console.WriteLine("Slow method result on Thread: {0}", task.Result);    //This line never executes
    Console.WriteLine("Main complete on {0}", Thread.CurrentThread.ManagedThreadId);
}

//Why is this method not returning anything?

static async Task<int> SlowMethodAsync()
{
    Console.WriteLine("Slow method started on Thread: {0}", Thread.CurrentThread.ManagedThreadId);

    await Task.Delay(2000);

    Console.WriteLine("Slow method complete on Thread: {0}", Thread.CurrentThread.ManagedThreadId);

    return 42;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T19:36:35.557

你造成了僵局。

使用`task.Result`会阻塞 UI 线程 - 在完成返回的任务之前它无法`SlowMethodAsync`完成。

但是，因为`SlowMethodAsync`最初也是在 UI 线程上使用同步上下文启动的，所以之后的继续`await` *也*想在 UI 线程上执行。

所以`Result`在异步方法完成之前无法完成......并且异步方法在完成之前无法`Result`完成。

相反，您应该使您的`button1_Click`方法也异步，然后使用：

```
Console.WriteLine("Slow method result on Thread: {0}", await task); 
```

这将在控制台应用程序中起作用的原因是该`SlowMethodAsync`方法没有任何特定的同步上下文可以返回，因此可以在任何线程池线程上执行延续 - 这不会被“主”阻塞线程等待任务。

# backbone.js - 如何使用 twitter bootstrap.js 和来自backbone.js 中模型集合的数据在列表中显示数据？

> ID：15690574
> 
> 赞同：0
> 
> 时间：2013-03-28T19:33:24.120
> 
> 标签：backbone.js, twitter-bootstrap, backbone-views

我正在尝试使用backbone.js 和bootstrap.js 创建一个简单的页面。我无法理解如何使用backbone.js 的视图，因此我将我的整个模型集合表示为引导程序中的列表。我尝试在网上搜索很多文章，但找不到我能理解的简单内容。您能否建议一些有关如何执行以下操作的博客或文章：

```
<html>
<body>
    <script>
        Boys = Backbone.Model.extend({
            defaults : {
            Name : '',
            Age : ''
            }
        });

        GardeA = Backbone.Collection.extend({
            model : Boys,
            url : http://localhost:8080/getGradeAData,
        });

        GradeAView = Backbone.View.extend({
            el: '.container .span12',
            initialize: function(){
                gradeA = new GardeA();
                gradeA.fetch();
                this.render();
            },
            render: function(){ 
                //How can I assign the model collection here
                //directly to render in the below bootstrap html page can you please help
                this.$el.html('List of students');
            }
        });
        gradeAView = new GradeAView();
</script>

<div class="container"> 
    <div class="hero-unit">Loading</div>
        <div class="row">
            <div class="span12">
                <h3>Projects: </h3>
                <ul class="nav nav-tabs nav-stacked">
                    <!-- need to show list of students here-->
                </ul>
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:43:33.743

我已经修复了您的代码（但尚未测试）..

```
<html>
<body>
    <script>
        Boys = Backbone.Model.extend({
            defaults : {
            Name : '',
            Age : ''
            }
        });

        GardeA = Backbone.Collection.extend({
            model : Boys,
            url : http://localhost:8080/getGradeAData,
        });

        GradeAView = Backbone.View.extend({
            el: '#list-of-grade-a-students',
            initialize: function(){
                this.gradeA = new GardeA();
                this.gradeA.fetch();
                this.listenTo(this.gradeA, "sync", this.render);
            },
            render: function(){ 
                //lets generate html
                html = ""
                for (var i = 0; i < this.gradeA.length; i++) {
                     student = this.gradeA.at(i)
                     html += "<li> student name: " + student.get("name") + " </li> "
                }
                //lets add that html to view's element
                this.$el.html(html);
            }
        });
        gradeAView = new GradeAView();
</script>

<div class="container"> 
    <div class="hero-unit">Loading</div>
        <div class="row">
            <div class="span12">
                <h3>Projects: </h3>
                <ul class="nav nav-tabs nav-stacked" id="list-of-grade-a-students">
                    <!-- need to show list of students here-->
                </ul>
            </div>
        </div>
    </div>
</body>
</html> 
```

一些重要的点：

*   添加`id`到`ul`学生列表必须去的元素中。每个视图都应该有父元素`el`

*   `render`方法不是什么神奇的东西。您需要在其中创建 html，然后使用`.html()`（或在某些情况下`.append()`）将其添加到 DOM

*   如果您在此之后立即致电`render`，`fetch`则无法保证已从服务器获取该集合。很有可能在调用 render 时，您还没有从服务器获取任何东西。因此我们使用您的渲染方法`listenTo`将视图绑定到集合的事件。`sync`这将确保在集合与服务器成功同步时调用渲染

# mysql - 从 MYSQL 查询格式化时间戳

> ID：15690575
> 
> 赞同：6
> 
> 时间：2013-03-28T19:33:28.633
> 
> 标签：mysql, sql, date

我有一个mysql查询，它有一个“时间戳”格式的列CreationDate。例子：

```
2013-03-27 18:32:45 
```

我希望 sql 查询以这种方式格式化（12hr 格式，秒）：

```
Friday 3/28/2013 12:52:34 PM 
```

我想在 sql 级别而不是 php 或 .js 等处理这个。

询问：

```
SELECT a.ID, a.CreationDate, a.Content, a.Type, u.Nickname
FROM Announcements a 
INNER JOIN Accounts u ON a.FromAccountID = u.AccountID
WHERE a.Status  = '1' AND u.Status = '1'
ORDER BY a.ID DESC 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T19:37:09.987

您将要使用[`DATE_FORMAT`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)：

```
SELECT a.ID, 
  date_format(a.CreationDate, '%W %m/%d/%Y %l:%i %p') CreationDate, 
  a.Content, 
  a.Type, 
  u.Nickname 
FROM Announcements a 
INNER JOIN Accounts u 
  ON a.FromAccountID = u.AccountID 
WHERE a.Status = '1' 
  AND u.Status = '1' 
ORDER BY a.ID DESC 
```

MySQL 文档将显示您将使用哪些说明符来获得所需的格式（请参阅[SQL 演示](http://www.sqlfiddle.com/#!2/d41d8/9720)）。

如果你想保持秒，那么你将使用：

```
date_format(a.CreationDate, '%W %m/%d/%Y %r') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:38:18.003

`DATE_FORMAT(a.CreationDate,'%W %c/%e/%Y %h:%i %p')`

# azure - 如果将 ImageResizer 与 Azure blob 一起使用，是否需要 AzureReader2 插件？

> ID：15690577
> 
> 赞同：3
> 
> 时间：2013-03-28T19:33:30.940
> 
> 标签：azure, azure-blob-storage, imageresizer

我正在开发一个个人项目来管理我的俱乐部的用户，它托管在免费的 Azure 包上（至少现在是这样），部分是作为试用 Azure 的实验。创建他们的记录的一部分是添加照片，所以我有一个联系人卡片视图，可以让我看到他们是谁，他们什么时候来的和一张照片。

我已经安装了[ImageResizer](http://imageresizing.net)，从我的相机调整 10MP 照片的大小并将它们保存到本地文件系统非常容易，但似乎对于 Azure，我需要使用它们`Blobs`将[图片上传到 Windows Azure 网站](https://stackoverflow.com/questions/14323548/upload-picture-to-windows-azure-web-site)，这对我来说是新的. [ImageResizer 上](http://imageresizing.net/plugins/azurereader2)的文档说我需要使用`AzureReader2`它才能使用 Azure blob，但它不是免费的。它还在他们的[最佳实践](http://imageresizing.net/docs/best-practices)＃5中说

> 使用动态调整大小而不是预先调整图像大小。

这不是我想的，在创建用户记录时，我打算将大小调整为 300x300 和 75x75（用于缩略图）。但是，如果我应该将全尺寸图像存储为 blob 并在输出时动态调整大小，那么我可以使用标准方法将[blob 上传到容器中](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/#upload-blob)以将其保存到 Azure，然后当我想显示图像时使用 ImageResizer 和将每个图像传递给它以根据需要调整大小。这样就不需要使用 AzureReader2，还是我误解了它的作用/它是如何工作的？

有没有其他方法可以考虑？

我还没有*实现*裁剪，但是当我弄清楚如何正确存储图像时，接下来要解决这个问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-05T10:24:10.940

带着一些恐惧，我在这里不同意 astaykov 的观点。我相信您可以将 ImageResizer 与 Azure 一起使用，而无需 AzureReader2。也许我应该通过说“它适用于我的设置”来限定它:)

我在 MVC 3 应用程序中使用 ImageResizer。我有一个带有图像容器的标准 Azure 帐户。

这是我的视图测试代码：

```
@using (Html.BeginForm( "UploadPhoto", "BasicProfile", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="file" />
    <input type="submit" value="OK" />
} 
```

这是 Post Action 方法中的相应代码：

```
// This action handles the form POST and the upload
[HttpPost]
public ActionResult UploadPhoto(HttpPostedFileBase file)
{
    // Verify that the user selected a file
    if (file != null && file.ContentLength > 0)
    {
        string newGuid = Guid.NewGuid().ToString();

        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["StorageConnectionString"]);

        // Create the blob client.
        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

        // Retrieve reference to a previously created container.
        CloudBlobContainer container = blobClient.GetContainerReference("images");

        // Retrieve reference to the blob we want to create            
        CloudBlockBlob blockBlob = container.GetBlockBlobReference(newGuid + ".jpg");

        // Populate our blob with contents from the uploaded file.
        using (var ms = new MemoryStream())
        {
            ImageResizer.ImageJob i = new ImageResizer.ImageJob(file.InputStream,
                    ms, new ImageResizer.ResizeSettings("width=800;height=600;format=jpg;mode=max"));
            i.Build();

            blockBlob.Properties.ContentType = "image/jpeg";
            ms.Seek(0, SeekOrigin.Begin);
            blockBlob.UploadFromStream(ms);
        }
    }

    // redirect back to the index action to show the form once again
    return RedirectToAction("UploadPhoto");
} 
```

这是用于测试理论的“粗略且准备就绪”的代码，当然可以改进，但它确实可以在本地和在 Azure 上部署时工作。我还可以查看已正确调整大小的已上传图像。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:33:59.657

具体问题的答案：

> 如果将 ImageResizer 与 Azure blob 一起使用，是否需要 AzureReader2 插件？

是`YES`。正如 Image Resizer 的文档中所述 - 该插件用于从 Blob 存储中读取/处理/提供图像。所以毫无疑问 - 如果你要使用 Image Resizer，AzureReader2 是你需要的插件来做正确的事情。它将负责 Blob 上传/服务。

虽然我质疑 Image Resizer 在 Windows Azure 上的团队能力，因为他们引用的是 . `Azure SDK v.2`，而 Azure SDK 的最新版本是`1.8`. 他们的意思是 Azure 存储客户端库，它具有版本`1.7`和`2.x`. 而推荐使用的版本`2.x`是 Azure SDK 1.8 附带的。所以，不要搜索 Azure SDK 2.0，安装最新的 1.8。顺便说一句，使用 Nuget 包管理器安装 Azure Storage Library v. 2.0.x。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T12:37:52.940

您还可以将调整大小的版本上传到 azure。因此，您首先将原始图像作为 blob 上传，例如名称为 /original/xxx.jpg；然后您创建图像的调整大小并将其上传到azure，名称为/thumbnail/xxx.jpg。如果您想即时或在单独的线程上创建调整大小的版本，您可能需要将原始版本临时保存到磁盘。

# java - 使用浮点/双精度值制作椭圆/矩形

> ID：15690579
> 
> 赞同：2
> 
> 时间：2013-03-28T19:33:40.247
> 
> 标签：java, graphics

准确地说，我想使用浮点或双精度值绘制图形。

我用：

```
g.drawOval(0, 0, 10, 10); 
```

画一个圆圈，但我只能使用整数值。

是否有任何使用浮点/双精度值的语句做同样的事情？

这是一张图片：[问题](http://i.imgur.com/rPX6gqr.png)

圆圈必须居中，而我不能。有什么解决办法吗？

代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.util.Random;
import javax.swing.JPanel;

public class Bulls_EYE extends JPanel
{
    int red, green, blue;
    int height, width;
    int heightOval = 475, widthOval = 475;
    Random rValue = new Random();

    public void paint (Graphics g)
    {           
        super.paint(g);

        for (int idx = 0; idx < 100; idx++)
        {
        g.setColor(new Color(red = 1 + rValue.nextInt(255), green = 1 + rValue.nextInt(255), blue = 1 + rValue.nextInt(255)));
        g.fillOval(width+2*idx, height+2*idx, widthOval-5*idx, heightOval-5*idx);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:38:56.163

您没有理由这样做，因为在使用给定坐标绘制椭圆时，它们被称为屏幕上的像素。由于您无法在像素之间进行绘制，因此 1 是您可以使用的最小单位。如果要在绘制之前对值进行四舍五入，可以使用

```
g.drawOval(Math.round(a),Math.round(b),Math.round(x),Math.round(y) 
```

`float`这将在绘制椭圆之前将 a、b、x 和 y舍入。我能看到的唯一原因是你计算了坐标，结果是 a `float`，那么你需要像上面那样舍入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:39:38.293

我认为这是一个有趣的问题，但需要更多的上下文。绘图图元通常以像素坐标表示，因此像素的一部分没有多大意义。

如果您想要 CAD 应用程序那样的精度，请注意，由于显示的限制，屏幕上显示的只是底层模型的近似值。

您可以在内存中精确地表示您的模型（浮点表示有限制）并在屏幕上绘制近似值。

**更新**

根据您的上次更新：

我们从以左上角坐标`fillOval`为参数`(x, y, w, h)`的JavaDoc 中得知，以及宽度和高度。`x, y``w, h`

如果对于每个同心圆，您将左上角坐标向内移动，在本例中为 2 px，以保持它们居中，您还必须将宽度和高度减少两倍。更改以下行：

```
g.fillOval(width+2*idx, height+2*idx, widthOval-5*idx, heightOval-5*idx); 
```

到

```
int dx, dy, dw, dh;
dx = 2*idx;
dy = 2*idx;
dw = 2*dx; // note this is 4*idx not 5*idx like you have currently
dh = 2*dy;
g.fillOval(width+dx, height+dy, widthOval-dw, heightOval-dh); 
```

请注意，在第一个和第二个参数中使用的变量`width`和`height`变量实际上与宽度和高度没有任何关系，而是提供了从绘制椭圆的原点开始的偏移量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-01T12:53:34.703

您可以使用[Arc2D](https://docs.oracle.com/javase/8/docs/api/java/awt/geom/Arc2D.html)类绘制具有浮点/双精度的圆，因为它是一个[Shape](https://docs.oracle.com/javase/8/docs/api/index.html?java/awt/Shape.html)并且[Graphics2D](https://docs.oracle.com/javase/8/docs/api/java/awt/Graphics2D.html)类可以绘制形状。

```
@Override
protected void paintComponent(Graphics g) {
    Graphics2D g2d = (Graphics2D) g;
    Shape circle = new Arc2D.Double(
            // Same values as used in the fillOval function,
            // but with double precision.
            x, y, width, height,
            // Draw a full circle (yes, in degrees).
            0, 360,
            // Connect the endpoint with the startpoint.
            Arc2D.CORD
    );
    // Paint the circle.
    g2d.fill(circle);
} 
```

以类似的方式，您可以使用[Rectangle2D](https://docs.oracle.com/javase/8/docs/api/java/awt/geom/Rectangle2D.html)类绘制矩形。

另外，请使用`paintComponent`函数而不是`paint`函数，如此[处](https://stackoverflow.com/questions/15103553/difference-between-paint-and-paintcomponent?lq=1)所述。

# android - Android致命异常主要

> ID：15690584
> 
> 赞同：0
> 
> 时间：2013-03-28T19:34:05.310
> 
> 标签：android, android-arrayadapter

我在 Stackoverflow 上进行了搜索，但找不到这不起作用的原因。我尝试制作自己的 ListView 样式，但出现异常：FATAL MAIN EXCEPTION。我看到第 112 行有一个错误，就是方法 getView() 但我看不到它...

这是我的代码：

```
public class TimeTable {
        private String subject;
        private String other;

        public TimeTable(String subject, String other) {
            this.subject = subject;
            this.other = other;
        }

        public String getSubject() {
            return subject;
        }
        public void setSubject(String subject) {
            this.subject = subject;
        }
        public String getOther() {
            return other;
        }
        public void setOther(String other) {
            this.other = other;
        }

    }

    public class TimeTableAdapter extends ArrayAdapter<TimeTable> {

        private List<TimeTable> timeList;
        private Context context;

        private class TimeTableHolder {
            public TextView subjectView;
            public TextView otherView;
        }

        public TimeTableAdapter(List<TimeTable> timelist, Context ctx) {
            super(ctx, R.layout.listitem, timelist);
            this.timeList = timelist;
            this.context = ctx;
        }

        public View getView(int position, View convertView, ViewGroup parent) { 
            View v = convertView;

            TimeTableHolder holder = new TimeTableHolder();

            if (convertView == null) {
                LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = inflater.inflate(R.layout.listitem, parent, false);

                TextView subjv = (TextView) v.findViewById(R.id.subject);
                TextView otherv = (TextView) v.findViewById(R.id.other);

                holder.subjectView = subjv;
                holder.otherView = otherv;

                v.setTag(holder);
            } else {
                holder = (TimeTableHolder) v.getTag();
            }

            TimeTable p = timeList.get(position);
            holder.subjectView.setText(p.getSubject());
            holder.otherView.setText("" + p.getOther());            

            return v;
        }
    } 
```

日志猫：

```
03-28 21:16:14.854: E/AndroidRuntime(732): FATAL EXCEPTION: main
03-28 21:16:14.854: E/AndroidRuntime(732): java.lang.NullPointerException
03-28 21:16:14.854: E/AndroidRuntime(732):  at com.blay.canisiusroostersonderbouw.TimeTableActivity$TimeTableAdapter.getView(TimeTableActivity.java:121)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.AbsListView.obtainView(AbsListView.java:2271)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.ListView.onMeasure(ListView.java:1156)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.View.measure(View.java:15172)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.View.measure(View.java:15172)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.View.measure(View.java:15172)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.View.measure(View.java:15172)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-28 21:16:14.854: E/AndroidRuntime(732):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.View.measure(View.java:15172)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.Choreographer.doFrame(Choreographer.java:525)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.os.Handler.handleCallback(Handler.java:615)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.os.Looper.loop(Looper.java:137)
03-28 21:16:14.854: E/AndroidRuntime(732):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-28 21:16:14.854: E/AndroidRuntime(732):  at java.lang.reflect.Method.invokeNative(Native Method)
03-28 21:16:14.854: E/AndroidRuntime(732):  at java.lang.reflect.Method.invoke(Method.java:511)
03-28 21:16:14.854: E/AndroidRuntime(732):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-28 21:16:14.854: E/AndroidRuntime(732):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-28 21:16:14.854: E/AndroidRuntime(732):  at dalvik.system.NativeStart.main(Native Method) 
```

# bash - 使用 sed 删除列表中的项目

> ID：15690585
> 
> 赞同：1
> 
> 时间：2013-03-28T19:34:08.153
> 
> 标签：bash

我正在尝试使用 sed 删除以特定方式格式化的文本文件中列表中的特定项目。我将简单地举例说明；我有 ...

```
ITEMS="$ITEM $ITEM1 $ITEM2 $ITEM3" 
```

我想从列表中删除 $ITEM 所以这将成为......

```
ITEMS="$ITEM1 $ITEM2 $ITEM3" 
```

该列表甚至可以只包含 $ITEM 而没有编号的 $ITEM，例如...

```
ITEMS="$ITEM" 
```

这将成为

```
ITEMS="" 
```

当然，一旦 $ITEM 被删除。

在执行此查找/删除时，不知道列表中存在多少 $ITEM。所述文本文件包含除此行之外的其他文本，但ITEMS= 对文本文件行的开头是唯一的，即这是唯一以ITEMS= 开头的行。所以基本上，我想找到以 ITEMS= 开头的行并从中删除 $ITEM 元素。使用 sed 怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:52:54.477

前后的空格`$ITEM`真的很烦人。:)

试试这一行：

```
sed -r 's/"\$ITEM /"/; s/\$ITEM //g; s/ ?\$ITEM"/"/' file 
```

用一些例子进行测试：

```
kent$ echo 'ITEMS="$ITEM"'|sed -r 's/"\$ITEM /"/; s/\$ITEM //g; s/ ?\$ITEM"/"/'                                                                                  
ITEMS=""
7pLaptop 20:57:44 /home/kent/myCodes/vim/last256
kent$echo 'ITEMS="$ITEM $ITEM1 $ITEM2 $ITEM $ITEM3 $ITEM"'|sed -r 's/"\$ITEM /"/; s/\$ITEM //g; s/ ?\$ITEM"/"/'
ITEMS="$ITEM1 $ITEM2 $ITEM3" 
```

**编辑**

对于 OP 的评论，请添加解释。

```
's/"\$ITEM /"/;     #step1 check if the first element is $ITEM, do sub
s/\$ITEM //g;       #step2 handle the middle elements
s/ ?\$ITEM"/"/'     #step3 handle the last element case. also this handles single ("$ITEM") case. 
```

我使用了 3 个步骤，因为 OP 希望在处理后具有相同的格式（单个空格分隔值）。可能有更简单/更好的解决方案，我只是想到了这种方式，分三步进行替换/格式化。:(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T19:46:02.010

根据您的“单词”是什么，这可能会满足您的要求：

```
echo 'a list of words' | sed 's/\<list\>//g' 
```

# c# - 将时间字符串解析为十进制？

> ID：15690593
> 
> 赞同：5
> 
> 时间：2013-03-28T19:34:30.457
> 
> 标签：c#

在 .Net 中，有没有办法转换成`'2:45'`十进制的 2.75？

前任：

```
decimal d = TimeToDecimal("2:45");
Console.WriteLine(d);

//output is 2.75 
```

如果无效数据，例如，分钟 < 0 < 60 或不是 h:m 格式，它应该抛出异常。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T19:37:54.193

以下将输出`2.75`：

```
TimeSpan time = TimeSpan.Parse("2:45");
decimal d = (decimal) time.TotalHours;

Console.WriteLine(d); 
```

请注意，该[`TimeSpan.TotalHours`属性](http://msdn.microsoft.com/library/system.timespan.totalhours.aspx)是 type `double`，而不是`decimal`。

从该[`TimeSpan.Parse`方法](http://msdn.microsoft.com/library/system.timespan.parse.aspx)的文档中，它将抛出一个`OverflowException`if “天、小时、分钟或秒组件中的至少一个超出其有效范围”，因此应该为您处理输入验证。另见[`TimeSpan.TryParse`方法](http://msdn.microsoft.com/library/system.timespan.tryparse.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T19:39:10.430

```
private decimal TimeToDecimal(string Time)
{
    DateTime dt = DateTime.Parse(Time);
    decimal result = dt.Hour+ (dt.Minute / 60.0m);
    return result;
} 
```

# css - 我可以使用 CSS 将 HTML 选择转换为“常规文本”吗？

> ID：15690596
> 
> 赞同：11
> 
> 时间：2013-03-28T19:34:34.593
> 
> 标签：css, html

我在网页上有一个下拉框，使用 HTML5`<select>`标记。有时我想让它“只读”，即仅将其显示为文本。例如：

有时我希望它是“读/写”：

![读/写](../Images/f78be00bbd69655be954ec89ff6d4750.png)

其他时候我希望它是“只读的”：

![在此处输入图像描述](../Images/e7cbd6046e2c6ec9c192da849d4add2b.png)

我宁愿不使用“禁用”属性。我认为它看起来很俗气，并且暗示当没有可用时用户可以选择。

`select`是否可以使用 CSS将当前选项的外观转换为普通文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T19:54:27.890

是的，使用 CSS：

```
select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none; 
    border: none;
    /* needed for Firefox: */
    overflow:hidden;
    width: 120%;
} 
```

例子：

[http://jsfiddle.net/eG3dS/](http://jsfiddle.net/eG3dS/)

由于“需要 Firefox”部分，您需要创建一个 div 或 span 来限制选择框的大小。可惜FF不尊重`moz-appearance`这里。

请注意，即使这使它看起来像普通文本，它仍然是一个有效的选择框！您需要以某种方式禁用它，通过使用“禁用”属性并更改字体颜色或其他方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T19:42:50.357

在 WebKit 中，您可以使用`-webkit-appearance: none;`

```
select {
    -webkit-appearance: none;
    border: none;
} 
```

演示：http: [//jsfiddle.net/ThiefMaster/56Eu2/2/](http://jsfiddle.net/ThiefMaster/56Eu2/2/)

为了防止用户实际使用选择框，您需要禁用它（`disabled`属性）。

请注意，这是高度非标准的，例如不适`-moz-appearance`用于！该`-*-appearance`属性的行为在各种浏览器中有所不同，Mozilla 甚至[建议根本不要在网站上使用它](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance)：

> *不要*在 Web 站点上使用此属性：它不仅是非标准的，而且它的行为会从一种浏览器更改为另一种浏览器。即使是关键字 none 在不同浏览器上的每个表单元素的行为也不相同，有些根本不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:36:44.450

我认为最简单的方法是在您的选择旁边有一个跨度，并在选择上使用事件侦听器将其文本复制到跨度中，并切换选择或跨度是否​​可见。它有点 Javascript，但它会给你很多控制权。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-28T19:36:57.467

您可以创建一个自定义下拉菜单并设置为禁用状态，使用 CSS 设置样式。

有一个非常好的 jQuery 插件，您可以使用它进行设置：[http ://uniformjs.com/](http://uniformjs.com/)

# ios - 使用 OCMockito 验证方法调用

> ID：15690600
> 
> 赞同：2
> 
> 时间：2013-03-28T19:34:53.110
> 
> 标签：ios, unit-testing, ocmockito, ochamcrest

我在 ClassA 中有这两种方法

```
-(IBAction)onSubmit;
-(void)validateName:(NSString*)name; 
```

@执行

```
- (IBAction)onSubmit {
    [self validateName:self.textfield.text];
}

-(void)validateName:(NSString*)name{
    // do something
} 
```

我的测试如下所示：

```
//given
ClassA *classA = mock([ClassA class]);
classA.textfield.text = @"Foo";

// when 
[classA onSubmit];

[verify(classA) validateName:@"Foo"]; 
```

但这不起作用，我不断得到：

```
Expected 1 matching invocation, but received 0 
```

当调用 onSubmit 时，如何编写一个测试来验证 validateName 是否已执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T13:35:59.223

适当的单元测试测试内部状态和外部行为。你的单元测试是测试你的代码是否做某事，而不是*它是**如何*做某事的。状态验证告诉您达到了预期的结果，而行为验证告诉您协作对象正确地与被测系统交互。这使您可以做一些很棒的事情，例如重构。

内部状态测试如下：

> 给定*一个初始状态*，如果被测系统*做了某事*，那么 *结果状态*应该是*这个*。

外部行为测试如下：

> 如果被测系统*做某事*，那么另一个单元应该*做其他事情*。

第一种测试是通过标准断言（`assertThat()`在 OCHamcrest 的情况下调用）完成的。第二种测试（正确）通过验证测试替身（`verify()`在 OCMockito 的情况下调用）来完成。

模拟被测系统没有任何意义。如果您发现有必要测试内部行为（即被测系统调用的特定方法），那么您需要将这些行为映射到状态。在您的情况下，这意味着 ClassA 实现了一个标志，例如*BOOL nameValidated*（最好使用 getter *isNameValidated*）或一个变量，例如*NSString *validatedName*。

# android - 带有 RTC_WAKEUP 的 AlarmManager 不会唤醒设备

> ID：15690605
> 
> 赞同：0
> 
> 时间：2013-03-28T19:35:08.617
> 
> 标签：android, android-service, android-alarms

在我的项目中，我有一个连接到 HTTP 以查看它是否在线的服务。一切都很好，它确实连接。

问题是我的设备何时进入睡眠状态。

我使用 AlarmManager 触发检查事件，使用 RTC_WAKEUP，这样即使屏幕关闭，进程也会运行......

问题是这并没有真正发生。我创建了一个 Logging Method 来查看我的应用程序幕后发生的事情。

我记录每一步，写下它发生的时间，看看事情发生的时间和方式。

当我将设备设置为睡眠并在几分钟后返回时，我可以看到警报仅在我唤醒设备时触发，而不是在它处于睡眠状态时触发。

这是我创建警报的代码：

```
public static void AddAlarm(Context pContext, Server pServer)
{
    // Create pending with intent and server object with a helper that creates  my pending intent.
    PendingIntent pending = IntentGenerator.GetPendingIntentForAlarm(pContext,pServer.ServerId);

    // Get alarm manager
    AlarmManager alarm = (AlarmManager)pContext.getSystemService("alarm");

    // Get current time to start now.
    long startNow = new Date().getTime()-10;

    // Set repeating alarm with current time to start, and interval.
    alarm.setRepeating(AlarmManager.RTC_WAKEUP ,startNow, pServer.GetIntervalInMilliseconds(), pending);
} 
```

如果您想知道我如何创建待处理的意图：

```
public static Intent GetIntentForService(Context pContext, int pServerId)
{
    // Comienzo la alarma.
    Intent retVal = new Intent(pContext, ServerStatusCheckService.class);
    retVal.putExtra("SERVER_ID", pServerId);

    return retVal; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:33:30.893

我认为问题出在我自己的设备上。这是 Zenithink C93 平板电脑。我在摩托罗拉 Defy 上测试了相同的代码，它运行良好。

# symfony - symfony2 学说查询否定 where

> ID：15690606
> 
> 赞同：0
> 
> 时间：2013-03-28T19:35:08.790
> 
> 标签：symfony, doctrine

我想像这样查询我的所有类别：

```
$othercategories = $this->getDoctrine()->getRepository('Bundle:Category')->findBy(
  array('language' => $language, 'active' => 1),
  array('sorting' => 'ASC')
); 
```

我想做的是在我的查询中添加另一个参数，我想要所有类别，除了具有特定 ID 的类别。就像：

```
WHERE id NOT IN ( 2 ) 
```

或者

```
WHERE id <>  2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:49:26.637

您可以像这样使用 DQL 查询

```
$em = $this->getDoctrine()->getEntityManager();

$query = $em->createQuery( 'SELECT c FROM Bundle:Category c WHERE c.language = :language AND c.active = 1 AND c.id NOT IN ( 2 ) ORDER BY c.language ASC' )
->setParameter('language', $language);

$category= $query->getResult(); 
```

抱歉，我无法对此进行测试，因为我正在使用手机回答这个问题，而且我不知道您的实体变量。让我知道您为使其正常工作所做的更改，它将对其他人有所帮助。

有关更多信息，请查看[http://symfony.com/doc/master/book/doctrine.html](http://symfony.com/doc/master/book/doctrine.html)

您可以在存储库中添加这些查询并重用它们。[请参阅http://symfony.com/doc/master/cookbook/index.html](http://symfony.com/doc/master/cookbook/index.html)上的 Cook book

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:54:32.063

如果您愿意，可以使用此语法

```
$repository = $this->getDoctrine()->getRepository('Bundle:Category');
$queryBuilder = $repository->createQueryBuilder();

$notInCategoryIds = array(2); // Category ids that will be excluded

$queryBuilder->select('c')
             ->from('Bundle:Category', 'c')
             ->where('c.language = :language')->setParameter('language', $language)
             ->andWhere('c.active = :active')->setParameter('active', 1)
             ->andWhere($queryBuilder->expr()->notIn('c.id', $notInCategoryIds)
             ->orderBy('c.sorting', 'ASC');

$results = $queryBuilder->getQuery()->getResult(); 
```

对于喜欢这种语法的其他开发人员来说，它可能会更有用

# python - 在 Pyramid 中使用 '@notfound_view_config' 和 'renderer'

> ID：15690611
> 
> 赞同：1
> 
> 时间：2013-03-28T19:35:23.037
> 
> 标签：python, pyramid

如[Pyramid Docs - Using Hooks中所述，使用](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/hooks.html)[@notfound_view_config](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/view.html#pyramid.view.notfound_view_config)时，我无法让我指定的模板呈现。

视图.py：

```
@notfound_view_config(renderer='templates/notfound.pt')
def notfound(request):
    return Response('Not Found, dude', status='404 Not Found') 
```

模板/notfound.pt：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      metal:use-macro="base">

<tal:block metal:fill-slot="content">

            <!-- Example row of columns -->
            <div class="row">
                <div class="span12">
                   <h1>Error:</h1>
                   <p>Uh, oh... you snagged an error:</p>
                   <pre>"${request}"</pre>

                   <p>You can return to the <a href="${request.application_url}">homepage</a> if you wish.</p>

                </div>
            </div>

</tal:block>
</html> 
```

当点击一个不存在的页面时，我在空白页面上看到消息“未找到，伙计”，但我希望看到我的模板“呃，哦......你遇到了一个错误！” 其次是请求信息。

我怀疑我读错了：

> notfound_view_config 构造函数接受大多数与 pyramid.view.view_config 构造函数相同的参数。它可以在相同的地方使用，并且以大致相同的方式运行，**除了它总是注册一个未找到的异常视图而不是一个“正常”视图。**

一方面，似乎我应该能够将“renderer”指定为参数，因为它在 pryamid.view.view_config 中受支持。另一方面，听起来它总是加载[未找到异常视图] [3]，而不管“渲染器”选项。

真的，我的最终问题（和目标）是，当找不到页面时如何显示/呈现我的模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T03:56:43.280

Pyramid 中的渲染器-视图关系始终相同。如果您返回一个 Response 对象，那么您声明的渲染器将被绕过。这使您可以执行诸如`if submitted: return HTTPFound(location=...) else: return {}`. 如果您想影响响应对象并仍然使用您的渲染器，则返回所需的 dict 和 mutate `request.response`，即用于所有渲染器的响应对象。

```
@notfound_view_config(renderer='templates/notfound.pt')
def notfound(request):
    request.response.status = 404
    return {} 
```

# c++ - 在 C++ 中复制与手动复制数组

> ID：15690614
> 
> 赞同：1
> 
> 时间：2013-03-28T19:35:42.510
> 
> 标签：c++, sorting

我需要对数千条记录的数组进行排序。我每次都将新记录放在正确的位置，因此我必须更改数组中其余记录的索引。我手动制作，例如：

```
 db[j]=record;
    cout<<tmp.oName<<endl;
    while (j++!=size-1){
        tmp2=db[j];
        db[j]=tmp;
        tmp=db[j];
    } 
```

我的问题来了：创建新数组和使用副本会明显更快，还是在我当前的代码旁边没有明显的计算时间和内存使用增强？我对 C++ 很陌生，所以我不确定这个函数在内部是如何工作的。

包括，我可以使用：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <cstring>
#include <cstdlib>
#include <cstdio> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:48:15.930

如果您复制数组然后复制到它，它会更慢并使用更多内存。

假设您有一个包含 N 个点的数组，而 I 是您的新项目所在的索引。复制数组意味着您使用 N 更多内存并复制元素 N 次。如果您只是移动记录，则不再使用内存并执行 NI 操作，因为您只需要在新元素之后移动元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:44:40.267

不，创建一个新数组不会更快。不过，不使用冒泡排序会更快。而是使用快速排序之类的东西。只需谷歌快速排序 c++ 即可查看它的数百个示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:46:58.340

听起来您正在尝试创建自己的排序列表。

您当前的代码（在插入后移动元素）是您在插入数组时可以做的最好的事情。如果您希望更改列表的容量，则只需在当前阵列中的空间不足时创建一个新阵列。

编辑：

这是使用基于数组的列表（与链表相反）的成本之一——插入需要线性时间 O(N)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T19:47:17.857

如果您在现实生活中需要它，请使用 STL qsort ( [http://www.cplusplus.com/reference/cstdlib/qsort/](http://www.cplusplus.com/reference/cstdlib/qsort/) )。如果你需要它来做家庭作业，那么创建一个新数组的成本会很高，因为运行 malloc 需要时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T19:39:19.383

最好在您的情况下检查 STL 数据结构。如果您不能使用 STL，请尝试堆排序或快速排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T19:45:32.160

如果不允许使用 STL 容器和算法，您仍然可以将记录放入向量中，然后编写自己的快速排序或合并排序，这很简单。快速排序比冒泡排序或选择排序更有效。

供参考：

[http://www.algolist.net/Algorithms/Sorting/Quicksort](http://www.algolist.net/Algorithms/Sorting/Quicksort)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T19:51:19.477

如果您将循环更改为从上到下到插入点而不是从插入点到顶部，则代码会快得多。通过这种更改，您只需为每个位置制作一份副本，而不是三份。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-28T20:08:33.750

正如在其他帖子中提到的，在同一个数组中插入应该比每次都复制整个数组更快。

另一方面，您描述的插入方式类似于插入排序。一次插入操作将花费您 O(n)。使用堆来管理您的数组将使插入成本 O(log n)，但对于较小的数组大小可能会更慢。见[http://en.wikipedia.org/wiki/Binary_heap](http://en.wikipedia.org/wiki/Binary_heap)

# android - Android：当全屏观看 youtube 视频时，我按下回，活动完成

> ID：15690621
> 
> 赞同：14
> 
> 时间：2013-03-28T19:36:01.557
> 
> 标签：android, fullscreen, android-youtube-api

我已经阅读了所有从 YouTube 视频中退出全屏的方法是按下回，但在我`Activity`看来它不是这样工作的，但我希望它这样做。

我把代码贴给你：

```
public class MainActivity extends YouTubeFailureRecoveryActivity {
    public static String prefix = "https://gdata.youtube.com/feeds/api/playlists/";
    public static String sufix = "?v=2&alt=jsonc";

    private String myPlayList = "PLZGKlf2ZwY7ua0C2oeUaXQKeLKNGy3mkh";

    private VideosListFragment videosFragment;

    // The next video to play
    private Video actualVideo;

    // This is the handler that receives the response when the YouTube read
    private Handler responseHandler;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        videosFragment = (VideosListFragment) getFragmentManager().findFragmentById(R.id.videosListView);
        getUserYouTubeFeed();

    }

    @Override
    public void onInitializationSuccess(YouTubePlayer.Provider provider,
            YouTubePlayer player, boolean wasRestored) {
        if (!wasRestored) {
            player.loadVideo(actualVideo.getVideoId());
        }
    }

    @Override
    protected YouTubePlayer.Provider getYouTubePlayerProvider() {
        return (YouTubePlayerFragment) getFragmentManager().findFragmentById(
                R.id.youtube_fragment);
    }

    public void getUserYouTubeFeed() {
        responseHandler = new Handler() {
            public void handleMessage(Message msg) {
                populateListWithVideos(msg);
            };
        };
        // We start a new AsyncTask that does its work on its own thread
        // We pass in a handler that will be called when the task has finished
        LoadPlayListElements bgTask = new LoadPlayListElements(responseHandler);
        bgTask.execute(myPlayList);

    }

    /**
     * This method retrieves the Library of videos from the task and passes them
     * to our ListView
     * 
     * @param msg
     */
    private void populateListWithVideos(Message msg) {
        Library lib = (Library) msg.getData().get(
                LoadPlayListElements.LIBRARY);
        VideosAdapter videos = new VideosAdapter(this, lib.getVideos());
        videosFragment.setListAdapter(videos);
    }

    @Override
    protected void onStop() {
        // Make sure we null our handler when the activity has stopped
        responseHandler = null;
        super.onStop();
    }

    public void setVideo(Video _item, boolean _activate) {
        actualVideo = _item;
        if (_activate){
            YouTubePlayerFragment fragment = (YouTubePlayerFragment) getFragmentManager()
                    .findFragmentById(R.id.youtube_fragment);
            if (fragment != null && fragment.isInLayout()) {
                fragment.initialize(DeveloperKey.DEVELOPER_KEY, this);
            }
        }
    }
} 
```

和布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <fragment
        android:id="@+id/videosListView"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.vivoenmimundo.sc2hotsepicreplays.ui.phone.fragment.VideosListFragment" >
    </fragment>

    <fragment
      android:name="com.google.android.youtube.player.YouTubePlayerFragment"
      android:id="@+id/youtube_fragment"
      android:layout_width="0dp"
      android:layout_height="wrap_content"
      android:layout_weight="2"
      android:layout_gravity="center_vertical"/>
</LinearLayout> 
```

任何的想法？我试图不做任何太奇怪的事情，只是从 YouTube 的 API 示例中复制/粘贴。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-31T19:28:01.243

如前所述，这是正确的行为 - 因为玩家在片段内，我必须抓住后退按钮：

```
@Override
public void onBackPressed() {
    if (fullScreen){
        videoPlayer.setFullscreen(false);
    } else{
        super.onBackPressed();
    }
} 
```

并像这样设置我的“fullScreen”布尔值：

```
@Override
public void onInitializationSuccess(YouTubePlayer.Provider provider,
        YouTubePlayer player, boolean wasRestored) {
    if (!wasRestored) {
        showPlayer();
        videoPlayer = player;
        videoPlayer.setOnFullscreenListener(new OnFullscreenListener() {

            @Override
            public void onFullscreen(boolean _isFullScreen) {
                fullScreen = _isFullScreen;
            }
        });
        videoPlayer.loadVideo(actualVideo.getVideoId());
    }
} 
```

谢谢大家！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-26T12:46:26.753

第 1 步：按照 Nhano 的答案 16

步骤 2：在您的 Menifest YoutubeActivity 标签中添加以下行。

android:configChanges="方向|screenSize"

这个解决方案对我有用..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:12:16.173

您可以尝试检测后退按钮按下并自定义定义它的作用。

```
// Sets functionality of the hard buttons on the device
@Override 
public boolean onKeyUp(int keyCode, KeyEvent event)
{
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // Custom define what you want to happen
    }
    return true;
} 
```

# eclipse - Eclipse 将源文件添加到包资源管理器

> ID：15690623
> 
> 赞同：0
> 
> 时间：2013-03-28T19:36:07.743
> 
> 标签：eclipse, maven

我从 SVN 签出了一个 Maven 项目文件夹。它在包资源管理器中作为文件夹出现，当我右键单击 -> 构建路径 -> 没有可用的操作时。

无论如何添加源文件夹以显示为一个包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:13:21.933

该项目未在 Eclipse 中设置为 Java 或 Maven 项目。之后您可以在项目属性中应用 Maven 和 Java 特性，您可以`mvn eclipse:eclipse`在 Eclipse 之外运行并将创建的 Eclipse 项目导入您的工作区（它甚至可以作为“Maven”下项目上下文菜单中的选项存在，具体取决于项目现在已设置）。

或者，更简单的是，您只需从 SVN 签出一个 Maven 项目。在“New Project...”对话框中应该有一个选项“Maven > Check Out Maven Projects from SVN”。然后它将自动配置。

# r - 使用ggplot时无法在r中标记多面板图

> ID：15690626
> 
> 赞同：9
> 
> 时间：2013-03-28T19:36:10.430
> 
> 标签：r, ggplot2

很抱歉这个可能很简单的问题。我是一名程序员，虽然我很少处理图形，在为这个问题苦恼了几个小时之后，是时候寻求帮助了。我正在使用 ggplot 在 r 中创建一个多面板图，但是在使用 ggplot 时，我找不到在图形之外显示图形标签的方法。

这是我希望我的代码执行的操作：

```
par(mfrow = c(1, 2), pty = "s", las = 1, mgp = c(2, 0.4, 0), tcl = -0.3)
qqnorm(rnorm(100), main = "")
mtext("a", side = 3, line = 1, adj = 0, cex = 1.1)
qqnorm(rnorm(100), main = "")
mtext("b", side = 3, line = 1, adj = 0, cex = 1.1) 
```

我如何将这些“a”和“b”标签，在它们位于由上述代码创建的图形的位置，放入这种类型的代码中：

```
df = data.frame(gp = factor(rep(letters[1:3], each = 10)), y = rnorm(30))
p = ggplot(df) + geom_point(aes(x = gp, y = y))
p2 = ggplot(df) + geom_point(aes(x = y, y = gp))
grid.arrange(p, p2, ncol = 2) 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T19:49:19.520

你可以使用`ggtitle`and `theme`：

```
df = data.frame(gp = factor(rep(letters[1:3], each = 10)), y = rnorm(30))
p = ggplot(df) + geom_point(aes(x = gp, y = y)) + ggtitle('a') + theme(plot.title=element_text(hjust=0))
p2 = ggplot(df) + geom_point(aes(x = y, y = gp)) + ggtitle('b') + theme(plot.title=element_text(hjust=0))
grid.arrange(p, p2, ncol = 2) 
```

![在此处输入图像描述](../Images/4f18aa8567c780f305574813cb9f6dec.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:50:50.087

两个（不太理想的）选项：

```
#Use faceting, similar to Matthew's ggtitle option
df = data.frame(gp = factor(rep(letters[1:3], each = 10)), y = rnorm(30))
df$lab1 <- 'a'
df$lab2 <- 'b'
p = ggplot(df) + geom_point(aes(x = gp, y = y)) + facet_wrap(~lab1)
p2 = ggplot(df) + geom_point(aes(x = y, y = gp)) + facet_wrap(~lab2)
j <- theme(strip.text = element_text(hjust = 0.05))
grid.arrange(p + j, p2 + j, ncol = 2)

#Use grid.text
grid.text(letters[1:2],x = c(0.09,0.59),y = 0.99) 
```

对于该`grid.text`选项，如果您深入研究 ggplot 对象，您可能可以避免不得不手动修改这些值。

# python - 从文档字符串生成 DITA xml

> ID：15690627
> 
> 赞同：2
> 
> 时间：2013-03-28T19:36:11.980
> 
> 标签：python, documentation, restructuredtext, dita

我需要使用[DITA](https://en.wikipedia.org/wiki/Darwin_Information_Typing_Architecture)记录我的项目，我想知道是否可以使用 python 的文档字符串约定并`reStructuredText`创建 DITA 的 XML。

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T04:29:10.043

很抱歉这个问题有点晚了，但我已经按照这些思路做了一些工作，并将生成的工具包放入这个存储库：

[https://github.com/donrday/rst2dita](https://github.com/donrday/rst2dita)

我希望那里有你或其他人可以使用的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:08:06.160

我想你能做的是

*   [您使用Sphinx](http://sphinx-doc.org/)及其[自动文档](http://sphinx-doc.org/ext/autodoc.html)语法处理您的 Python 文档字符串

*   您将自定义输出格式化程序写入 Sphinx，它将生成 DITA XML 而不是 HTML

有些工作，但可行。

# java - JDK类方法的时间复杂度度量

> ID：15690630
> 
> 赞同：0
> 
> 时间：2013-03-28T19:36:27.527
> 
> 标签：java, performance, time-complexity, javap

是否有一种既定的方法来衡量（或获取现有的衡量标准）JDK 类方法的复杂性？`javap`代表时间复杂度和程度。特别是，我对`Arrays.sort()`其他一些集合操作方法的复杂性感兴趣。

例如，我试图比较两种实现的性能，一种正在使用`Arrays.sort()`，一种没有。`javap`反汇编不会返回更多步骤（两倍），但我不确定是否排除了这些步骤`Arrays.sort()`。IOW，`javap`一种方法是否包括在该方法内或仅为该方法调用的方法的递归测量？

另外，有没有办法在不修改和重新编译 Java 代码本身的情况下，找出在特定参数上调用某个基本 Java 方法时完成了多少次循环迭代？例如，测量 的迭代次数`Arrays.sort('A', 'r', 'T', 'f')`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:41:16.097

我不希望`javap`能代表实际速度。

Javadoc 指定了算法的复杂性，但如果您关心常量因子，则绝对没有办法实际比较常量因子，除非与实际[基准测试](https://code.google.com/p/caliper/)。

`Arrays.sort`您无法获得有关在原始数组上调用时所做的任何信息，但通过传递一个`Comparator`计算调用次数的自定义，您可以计算对对象数组进行排序时进行的比较次数。（也就是说，对象数组使用不同的排序算法进行排序——特别是一种稳定的算法——而原始数组使用 Quicksort 变体进行排序。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:39:15.633

您可以使用输出`javap`来确定要查找`goto`指令的循环发生的位置。这篇[文章](https://stackoverflow.com/a/6792566/205426)对该标识进行了全面的解释。

从帖子：

> 在考虑任何循环开始/退出检测之前，您应该查看入口、出口和后继者的定义。虽然一个循环只有一个入口点，但它可能有多个出口点和/或多个后继点，通常由 break 语句（有时带有标签）、return 语句和/或异常（是否显式捕获）引起。虽然您没有提供有关您正在调查的仪器类型的详细信息，但肯定值得考虑您想要在哪里插入代码（如果这是您想要做的）。通常，可能必须在每个退出语句之前或代替每个后继语句之前完成一些检测（在这种情况下，您必须移动原始语句）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:43:49.597

`Arrays.sort()`对于原语使用调整的快速排序。用于`Object`使用合并排序（但这取决于实现）。

来自：[数组](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

> 例如，sort(Object[]) 使用的算法不必是归并排序，但它必须是稳定的

# java - 如何在 OSX 中使用 Java 获取活动应用程序标题？

> ID：15690634
> 
> 赞同：1
> 
> 时间：2013-03-28T19:36:38.497
> 
> 标签：java, macos, jna

我正在编写一个应用程序来收集有关计算机前用户行为的信息，以研究使用模式。我查看了 JNA，但找不到任何有关如何捕获 Windows 以外平台的活动应用程序的信息。

*   是否有任何库（例如 JNativeHook）来捕获 OSX 中的活动应用程序？

我想捕获活动应用程序而不是活动窗口标题，以避免用户研究的完整性问题。另外，我知道 Java 并不是真的要在 JVM 之外工作并捕获这类事情，但是由于有很多数据库交互和有限的时间，所以选择了 Java 并且项目已经完成，除了这个组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:53:56.823

当然，对于“用户研究”；）；）

在 Objective-C 中，您可以执行以下操作：

```
NSWorkspace.sharedWorkspace().activeApplication()['NSApplicationName'] 
```

我可能不了解确切的代码，因为我现在无法访问 Mac，并且从内存/API 执行此操作，但我认为这很接近。重要的起点是[NSWorkspace](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)。现在，你如何使用 JNA 来调用它，我还没有最模糊的。

# jquery - 插入 jQuery 后是否必须“初始化”（或其他）输入文件字段？

> ID：15690638
> 
> 赞同：0
> 
> 时间：2013-03-28T19:36:49.653
> 
> 标签：jquery, forms, file-upload

我有一个包含表单的 Bootstrap 模式。省略了一堆血淋淋的细节，表单包含一个按钮，单击该按钮时，会创建一个`<input type='file' ...>`字段并将其插入到模式中。这有效：生成的小部件正确显示在页面上并且结构正确，但实际上不起作用——我可以单击“浏览...”按钮，但浏览器的文件选择面板永远不会出现。这在 Safari 和 Firefox 中都会发生。

我是否需要对 DOM 或字段或表单或其他东西进行某种初始化以正确连接？很纳闷...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:20:03.337

假警报，它出现了。经过一番头疼之后，事实证明这个领域的位置并不完全正确，尽管我仍然不清楚为什么这会妨碍它的工作。我已更正它，文件选择面板现在出现并正常工作 抱歉，谢谢大家。

# asp.net - 错误：字符串或二进制数据将被截断。该语句已终止

> ID：15690642
> 
> 赞同：4
> 
> 时间：2013-03-28T19:37:07.280
> 
> 标签：asp.net, sql-server, database, vb.net, sql-server-2012

我正在尝试创建一个简单的注册表单，其中来自文本框等的数据被输入到一个名为的表中`users`：

```
user_id     int
username    nchar(20)
password    nchar(20)
... more columns 
```

代码：

```
Dim Username As String = txtUsername.ToString
... more variable declarations

lblDOB.Text = DOB.ToString
lblDOB.Visible = True

Dim ProjectManager As String = "test"
... more constant declarations

Dim conn As New SqlConnection("...conn string...")

sqlComm = "INSERT INTO users(Username, Password, ...other columns...)" +
    "VALUES(@p1, @p2, ...other params...)"

conn.Open()
registerSQL = New SqlCommand(sqlComm, conn)
registerSQL.Parameters.AddWithValue("@p1", Username)
... other AddWithValues

registerSQL.ExecuteNonQuery() 
```

我收到此错误消息：

> 字符串或二进制数据将被截断。该语句已终止。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T19:40:17.497

是的，您允许人们输入任何旧字符串。您需要将每个参数限制为该列中允许的最大长度。例如，如果您不希望出现错误，您可以将用户名截断为 20 个字符，或者当该参数值超过 20 个字符时，您可以提出自己的错误。要截断，您可以简单地说：

```
Dim Username As String = txtUsername.ToString.Substring(0,20) 
```

或者更好的是，当您构建表单时，`MaxLength`为与表中的列匹配的表单字段指定一个。如果您的表格只能容纳 20 个字符，为什么还要让用户输入超过 20 个字符？

顺便`nchar`说一句，对于大多数此类数据来说，这是一个糟糕的数据选择，除非用户名、密码等总是正好是 20 个字符。你应该强烈考虑`nvarchar`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-07T11:08:59.417

您正在表中插入字符串数据，该表的大小大于您将其存储在表中的列的大小。

也就是说，您将用户名传递给大小超过 20 个字符的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T09:55:16.147

请将 nchar(20) 更改为 varchar(50)

# macos - NSXMLStoreType 或 NSSqliteStoreType

> ID：15690651
> 
> 赞同：1
> 
> 时间：2013-03-28T19:37:46.443
> 
> 标签：macos, cocoa, core-data, persistent-storage

我只是想知道在核心数据持久类型的 NSXMLStoreType 和 NSSqliteStoreType 之间进行选择时是否有任何优点和缺点，例如性能？

我四处搜索，发现 iOS 不支持 NSXMLStoreType。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:42:00.360

OS X 不支持？这对我来说是新闻（以及我使用该类型进行开发的应用程序）。

NSXMLStoreType 非常适合开发目的，因为您实际上可以使用文本编辑器（XML == 人类可读）查看持久存储，而 SQLite 或二进制存储类型则不行。然而，SQLite 是最快的，因为它支持原子更新（更新单个记录而无需将整个存储写回以进行一点更改）。相比之下，XMLStoreType 以这种速度换取了可读性。

我使用 XML 类型进行调试，但在部署的应用程序中使用 SQLite。嗯，那些我仍然使用 Core Data 的，就是这样。CD 并不适合所有东西。事实上，当定制设计的系统工作得很好时（尤其是在过滤或属性设置速度很重要的情况下），它对许多人来说都是马马虎虎或不合适的。

# ruby-on-rails - 如何在 Multitail 中为 Rails 日志着色？

> ID：15690652
> 
> 赞同：21
> 
> 时间：2013-03-28T19:37:47.553
> 
> 标签：ruby-on-rails, colors, tail, ansi-escape

`tail logs/development.log`XFCE终端中的输出：

![XFCE终端中tail logs/development.log的输出](../Images/f0eca4245505715e6d364c0678955f3e.png)

```
multitail log/development.log 
```

![多尾日志/development.log 的输出](../Images/7ffdc71f89583487578a53d1251a1b13.png)

Rails 自动将转义码添加到日志文件中。见`development.log`文件：

```
 ^[[1m^[[36m (84.1ms)^[[0m  ^[[1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) ^[[0m
  ^[[1m^[[35m (92.6ms)^[[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  ^[[1m^[[36m (0.2ms)^[[0m  ^[[1mSELECT version FROM "schema_migrations"^[[0m
  ^[[1m^[[35m (159.3ms)^[[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130327221553')
  ^[[1m^[[36m (59.9ms)^[[0m  ^[[1mINSERT INTO "schema_migrations" (version) VALUES ('20130326152730')^[[0m
  ^[[1m^[[35m (59.8ms)^[[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130327173637') 
```

`multitail -c`产生不可用的输出。

![multitail -c 的输出](../Images/9ef30c91adcaeb0ac222a056c60e0069.png)

如何在不编写自己的配色方案的情况下为 Multitail 中的日志着色？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-28T19:37:47.553

这完全是关于解释[ANSI 转义序列](http://en.wikipedia.org/wiki/ANSI_escape_code)，它本身不是终端`tail`，也必须这样做`multitail`。可以通过以下`-cT ANSI`选项完成：

```
-cT term    interpret terminal-codes from file/command (for terminal type 'term') 
```

例子：

```
$ multitail -cT ansi log/development.log
multiple files:
$ multitail -cT ansi log/development.log -cT ANSI log/test.log 
```

![multitail -cT ansi log/development.log 的彩色输出](../Images/e3cfe909e690c3920a3d2415f01c338d.png)

# django - Passing a list in a url inside a TokenInput with Django, he only pass the last one

> ID：15690657
> 
> 赞同：0
> 
> 时间：2013-03-28T19:38:04.253
> 
> 标签：django, jquery-tokeninput

I am using [jquery-tokeninput](https://github.com/loopj/jquery-tokeninput) as an autocomplete to retrieve some objects in my app. My js code to initialize the autocomplete is this:

```
function initialize_search(model, input_busca) {
    var url = reverse('autocomplete.'+model) + "?tipos[]=almoxarifado&tipos[]=estoque";
    var data = $(input_busca).data('tokeninput');
    $(input_busca).tokenInput(url, {
        hintText: 'Start to type',
        preventDuplicates: true,
        queryParam: 'name',
        noResultsText: 'No results',
        searchingText: 'Search',
        prePopulate: data
    });
} 
```

All I want is to receive the parameter 'tipos[]' in my view, like this:

```
types = request.GET.getlist('tipos[]') 
```

And receive this:

```
[u'almoxarifado', u'estoque'] 
```

But when i do this, he only gives me the last one and not all the list, in this case:

```
[u'estoque'] 
```

This is how I call the autocomplete function inside the js:

```
inicializa_busca('endereco', $("#id_enderecos")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:40:53.407

You must be aware that, ajax is to pass small data, check the size of this list, maybe is better an full post submission!

# html - How can I make an iframe capture ONLY one element of a web page?

> ID：15690665
> 
> 赞同：0
> 
> 时间：2013-03-28T19:38:27.453
> 
> 标签：html, iframe, embed

I'm trying to capture `div#map-canvas` from my site, [www.RichBlocksPoorBlocks.com](http://richblockspoorblocks.com), to make an iframe that people can embed anywhere.

Here's my iframe

```
<iframe src="http://www.richblockspoorblocks.com#map-canvas" style="width:600px; height:400px;"></iframe> 
```

It goes to `div#map-canvas`, but it also loads the rest of the page as well. I'd like that div to be the only thing in the iframe.

Is this possible with an iframe?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:47:07.153

要实现这一点，创建一个单独的 .php 或 .html 文档会更容易，其中仅包含您要在 iframe 中显示的部分并排除其他所有内容。

因此，不是 iframe 指向“ [http://www.richblockspoorblocks.com#map-canvas](http://www.richblockspoorblocks.com#map-canvas) ”，而是指向类似：“ [http://www.richblockspoorblocks.com/map-canvas.php](http://www.richblockspoorblocks.com/map-canvas.php) ”的内容。

这将是一种非常快速有效的方式来做你想做的事，并且不需要任何外部库或 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:43:33.090

When you call `http://www.richblockspoorblocks.com#map-canvas` the hash will probably cause the browser to look for a corresponding `<a name="foo">bar</a>` so this won't work using an iFrame.

What I would recommend doing is writing a script which you call from your iFrame which accepts the name of the page fragment to load. I know using jQuery's `$.load()` you can call an element ID to load a page fragment, and I think it's also possible in PHP too...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:03:51.923

您不能在 iframe 中使用哈希链接。

您可以并且应该使用几行您最喜欢的服务器端语言来创建您想要呈现的特定内容，然后链接到它。这样，您的服务器将只向最终用户发送所需的数据，并且还可以节省带宽和加载时间。

# c - PortAudio 中的连续录音（来自麦克风或输出）

> ID：15690668
> 
> 赞同：9
> 
> 时间：2013-03-28T19:38:40.473
> 
> 标签：c, audio, portaudio

我正在尝试在 PortAudio 中创建一个音乐可视化应用程序，我做了一些基础研究并找到了一些关于如何从麦克风录制到（临时）文件的示例。但是没有在记录过程中运行时不使用数据的例子。

那么如何启动一个连续的音频流，我可以从当前“帧”中捕获数据？

这就是我尝试这样做的方式：

```
#include <stdio.h>
#include <unistd.h>
#include <time.h>
#include <stdlib.h>

#include "portaudio.h"

#define SAMPLE_RATE (44100)

typedef struct{
    int frameIndex;
    int maxFrameIndex;
    char* recordedSamples;
}
testData;

PaStream* stream;

static int recordCallback(const void* inputBuffer, void* outputBuffer, unsigned long frameCount, const PaStreamCallbackTimeInfo* timeInfo, PaStreamCallbackFlags statusFlags, void* userData){
    testData* data = (testData*)userData;
    const char* buffer_ptr = (const char*)inputBuffer;
    char* index_ptr = &data->recordedSamples[data->frameIndex];

    long framesToCalc;
    long i;
    int finished;
    unsigned long framesLeft = data->maxFrameIndex - data->frameIndex;

    if(framesLeft < frameCount){
        framesToCalc = framesLeft;
        finished = paComplete;
    }else{
        framesToCalc = frameCount;
        finished = paContinue;
    }

    if(inputBuffer == NULL){
        for(i = 0; i < framesToCalc; i++){
            *index_ptr++ = 0;
        }
    }else{
        for(i = 0; i < framesToCalc; i++){
            *index_ptr++ = *buffer_ptr++;
        }
    }

    data->frameIndex += framesToCalc;
    return finished;
}

int setup(testData streamData){
    PaError err;

    err = Pa_Initialize();
    if(err != paNoError){
        fprintf(stderr, "Pa_Initialize error: %s\n", Pa_GetErrorText(err));
        return 1;
    }

    PaStreamParameters inputParameters;
    inputParameters.device = Pa_GetDefaultInputDevice();
    if (inputParameters.device == paNoDevice) {
        fprintf(stderr, "Error: No default input device.\n");
        return 1;
    }

    inputParameters.channelCount = 1;
    inputParameters.sampleFormat = paInt8;
    inputParameters.suggestedLatency = Pa_GetDeviceInfo(inputParameters.device)->defaultLowInputLatency;
    inputParameters.hostApiSpecificStreamInfo = NULL;

    err = Pa_OpenStream(&stream, &inputParameters, NULL, SAMPLE_RATE, 256, paClipOff, recordCallback, &streamData);
    if(err != paNoError){
        fprintf(stderr, "Pa_OpenDefaultStream error: %s\n", Pa_GetErrorText(err));
        return 1;
    }

    err = Pa_StartStream(stream);
    if(err != paNoError){
        fprintf(stderr, "Pa_StartStream error: %s\n", Pa_GetErrorText(err));
        return 1;
    }

    return 0;
}

void quit(testData streamData){
    PaError err;
    err = Pa_Terminate();
    if(err != paNoError){
        fprintf(stderr, "Pa_Terminate error: %s\n", Pa_GetErrorText(err));
    }

    if(streamData.recordedSamples)
        free(streamData.recordedSamples);
}

int main(){
    int i;
    PaError err;
    testData streamData = {0};

    streamData.frameIndex = 0;
    streamData.maxFrameIndex = SAMPLE_RATE;
    streamData.recordedSamples = (char*)malloc(SAMPLE_RATE * sizeof(char));
    if(streamData.recordedSamples == NULL)
        printf("Could not allocate record array.\n");

    for(i=0; i<SAMPLE_RATE; i++) 
        streamData.recordedSamples[i] = 0;

    //int totalFrames = SAMPLE_RATE;

    if(!setup(streamData)){
        printf("Opened\n");

        int i = 0;

        while(i++ < 500){

            if((err = Pa_GetStreamReadAvailable(stream)) != paNoError)
                break;

            while((err = Pa_IsStreamActive(stream)) == 1){
                Pa_Sleep(1000);
            }

            err = Pa_CloseStream(stream);
            if(err != paNoError)
                break;

            streamData.frameIndex = 0;
            for(i=0; i<SAMPLE_RATE; i++) 
                streamData.recordedSamples[i] = 0;
        }

        if(err != paNoError){
            fprintf(stderr, "Active stream error: %s\n", Pa_GetErrorText(err));
        }

        quit(streamData);
    }else{
        puts("Couldn't open\n");
    }
    return 0;
} 
```

但它给出了以下输出：

```
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
ALSA lib pcm_dmix.c:957:(snd_pcm_dmix_open) The dmix plugin supports only playback stream
Active stream error: Can't read from a callback stream 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:36:30.743

*更新*：

这段代码的目的是什么？

```
 if((err = Pa_GetStreamReadAvailable(stream)) != paNoError)
            break; 
```

在我看来，这似乎导致了您的（最新）问题。为什么您需要检索（然后丢弃）无需等待即可从流中读取的帧数，因为流是回调流，因此可能为零？

* * *

*上一个答案：*

这似乎非常可疑：

```
static void* data;
/* ... */
static int recordCallback(const void* inputBuffer, void* outputBuffer, unsigned long frameCount, const PaStreamCallbackTimeInfo* timeInfo, PaStreamCallbackFlags statusFlags, void* userData){
    testData* data = (testData*)userData;
    /* ... */
} 
```

首先，为什么有两个变量命名`data`？这太傻了......你能想到更合适的标识符吗？

其次，您将`&data`(a `void **`) 传递给 Pa_OpenStream。据推测，Pa_OpenStream 将相同的值传递给您的回调函数，在那里您将该指针`void *`视为指向一个`testData *`. 那是未定义的行为。

删除~~`static void* data;`~~. 没必要，这里。`testData data = { 0 };`在最顶部声明​​一个新的内部主干。现在您将 a `testData *`（转换为`void *`）传递给 Pa_OpenStream，Pa_OpenStream 会将其传递给您的回调，您可以在回调中安全地将其转换回`testData *`原样。您可能希望`data`在调用 Pa_OpenStream 之前设置成员...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T21:34:14.770

要与数据流实时交互，您需要一种机制，该机制可以在帧周期（采样率/每帧样本）内休眠（Windows 上的忙等待）或使用线程同步原语来触发`int main`有音频的线程准备处理。这将使您能够访问 PortAudio 在其回调期间传递的每一帧数据（从 PortAudio 线程调用）。以下是使用`boost::condition`and的概念`boost::mutex`。

```
//CAUTION THIS SNIPPET IS ONLY INTENDED TO DEMONSTRATE HOW ONE MIGHT
//SYNCHRONIZE WITH THE PORTAUDIO THREAD

#include <stdio.h>
#include <unistd.h>
#include <time.h>
#include <stdlib.h>

#include <boost/thread/thread.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/thread/condition.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>

#include "portaudio.h"

boost::condition waitForAudio;
boost::mutex waitForAudioMutex;
boost::mutex audioBufferMutex;
bool trigger = false;

std::deque<char> audioBuffer;

static int recordCallback(const void* inputBuffer, void* outputBuffer, unsigned long frameCount, const PaStreamCallbackTimeInfo* timeInfo, PaStreamCallbackFlags statusFlags, void* userData){

    const char* buffer_ptr = (const char*)inputBuffer;

    //Lock mutex to block user thread from modifying data buffer
    audioBufferMutex.lock();

    //Copy data to user buffer
    for(i = 0; i < frameCount; ++i) {
       audioBuffer.push_back(buffer_ptr + i);
    }

    //Unlock mutex, allow user to manipulate buffer
    audioBufferMutex.unlock();

    //Signal user thread to process audio
    waitForAudioMutex.lock();
    trigger= true;
    waitForAudio.notify_one();
    waitForAudioMutex.unlock();

    return finished;
}

int main(){
        Pa_Initialize();
        //OPEN AND START PORTAUDIO STREAM
        while(true){ //Catch signal (Ctrl+C) or some other mechanism to interrupt this loop
            boost::xtime duration;
            boost::xtime_get(&duration, boost::TIME_UTC);
            boost::interprocess::scoped_lock<boost::mutex> lock(waitForAudioMutex);
            if(!trigger) {
                if(!waitForAudio.timed_wait(lock, duration)) {
                    //Condition timed out -- assume audio stream failed
                    break;
                }
            }
            trigger= false;

            audioBufferMutex.lock();
            //VISUALIZE AUDIO HERE
            //JUST MAKE SURE TO FINISH BEFORE PORTAUDIO MAKES ANOTHER CALLBACK
            audioBufferMutex.unlock();
        }
        //STOP AND CLOSE PORTAUDIO STEAM
        Pa_Terminate();
        return 0;
    } 
```

通常，这种技术是跨平台的，但是这种特定的实现可能只适用于 Linux。在 Windows 上使用`SetEvent(eventVar)`代替`condition::notify_one()`和`WaitForSingleObject(eventVar, duration)`代替`condition::timed_wait(lock, duration)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:24:23.907

`err = Pa_CloseStream(stream);`您在第一次迭代中关闭了流。在第二次迭代中，通道已经关闭。`err = Pa_CloseStream(stream);`在所有迭代后尝试操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-23T17:22:53.720

我是这样解决的：

```
 PaStreamParameters  inputParameters ,outputParameters;
    PaStream*           stream;
    PaError             err;  
    paTestData          data;
    int                 i;
    int                 totalFrames;
    int                 numSamples;
    int                 numBytes;

    err                     = paNoError;
    inputParameters.device  = 4;

    data.maxFrameIndex      = totalFrames = NUM_SECONDS * SAMPLE_RATE;
    data.frameIndex         = 0;
    numSamples              = totalFrames * NUM_CHANNELS;
    numBytes                = numSamples * sizeof(SAMPLE);
    data.recordedSamples    = (SAMPLE *) malloc( numBytes );

    std::ofstream arch;
    arch.open("signal.csv");

    err = Pa_Initialize();
    inputParameters.channelCount = 1;                    
    inputParameters.sampleFormat = PA_SAMPLE_TYPE;
    inputParameters.suggestedLatency = Pa_GetDeviceInfo( inputParameters.device )->defaultLowInputLatency;
    inputParameters.hostApiSpecificStreamInfo = NULL;

    int contador = 0;
    bool strec = true;
    while (strec)
    {
        err = Pa_OpenStream(
              &stream,
              &inputParameters,
              NULL,                  
              SAMPLE_RATE,
              FRAMES_PER_BUFFER,
              paClipOff,      
              recordCallback,
              &data );

        err = Pa_StartStream( stream );

        printf("\n===Grabando.... ===\n"); fflush(stdout);
        Pa_Sleep(3000);
        while( ( err = Pa_IsStreamActive(stream) ) == 1 )
        {

        }

        err = Pa_CloseStream( stream );

        for( i=0; i<numSamples; i++ )

        {

            val = data.recordedSamples[i];

            arch << val << std::endl;
            std::cout << std::endl << "valor  : " << val;
        }

        data.frameIndex = 0;
        contador++;
        if (contador >= 100) //if you delete this condition continuously recorded this audio
        {
            strec = false;
            arch.close();
        }
    } 
```

# jquery - 打开 jQueryMobile 的对话框，其中包含指向不同文件中指定 jQueryMobile 页面的链接

> ID：15690682
> 
> 赞同：0
> 
> 时间：2013-03-28T19:39:31.070
> 
> 标签：jquery, html, css, jquery-mobile, dialog

我有两个文件 - index.html 和 c.html。

当我输入

```
<a data-rel="dialog" data-transition="flip" href="c.html">button</a> 
```

在 index.html 中，它应该将 c.html 显示为对话框。但是使用

```
<a data-rel="dialog" data-transition="flip" href="c.html#0">button</a> 
```

根本不起作用（我希望它在 c.html 中显示 id="0" 页面）。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T19:43:08.913

这是做不到的。

jQuery Mobile 不支持将查询参数传递给内部/嵌入式页面，但是您可以添加两个插件到您的项目中来支持此功能。有一个轻量级页面[参数插件](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)和一个功能更全面的[jQuery Mobile 路由器插件](https://github.com/azicchetti/jquerymobile-router)，可与主干.js 或脊柱.js 一起使用。一个名为[routerlite](https://github.com/1Marc/jquery-mobile-routerlite)的较新插件仅使用四种方法使其变得简单：routeinit、routechange、pageinit 和 pagechange。

官方文档：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)

证明：

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>  
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="index3.html#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>  
</body>
</html> 
```

**index3.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>  
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="third">
        <div data-theme="a" data-role="header">
            <h3>
                Third Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div> 
    <div data-role="page" id="second">
        <div data-theme="a" data-role="header">
            <h3>
                Second Page
            </h3>
            <a href="#index" class="ui-btn-left">Back</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

# dynamic - 将区域动态添加到 Marionette 布局

> ID：15690683
> 
> 赞同：9
> 
> 时间：2013-03-28T19:39:37.163
> 
> 标签：dynamic, backbone.js, marionette, regions

我有一个布局，但无法提前定义其所有区域，因为它们是未知的。

所以稍后创建了一个 ItemView ，我想在布局中创建一个新区域，使用视图的 ID 作为区域的名称，这样我就可以说：

```
layout.dynamicRegionName.show(newItemView); 
```

但是这里有循环依赖。

1.  我还没有渲染视图，所以我无法引用它的 DOM 元素以在布局调用 .addRegion() 时使用

2.  我无法渲染它，正是因为我希望它通过调用它的 .show() 通过动态添加的区域附加到 DOM 树

@DerickBailey 在 github 的 Marionette.Layout 文档中，我相信示例中存在错误：`layout.show(new MenuView());`

但从技术上讲，这接近我们在这里需要的，即能够做到：

```
layout.addRegion(VAR_WITH_NEW_REGION_NAME, aViewInstance); 
```

并让它直接在视图实例内部的布局渲染中添加一个新区域。

我是否错过了其他一些明显的方法来实现这一目标？这是一个已知的缺失功能吗？有没有理由不拥有它？

我知道这个先前的问题：“[动态添加/删除区域到布局](https://stackoverflow.com/questions/12868494/dynamically-add-remove-regions-to-a-layout)”但没有看到任何明确/明确的答案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-30T03:51:22.037

Marionette v1.0（v1.0.2 是最新的，现在）支持布局中的动态区域。

```
 var MyLayout = Marionette.Layout.extend({
  template: "#some-template"
});

var layout = new MyLayout();
layout.render();

layout.addRegion("someRegion", "#some-element");

layout.someRegion.show(new MyView()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-22T11:09:47.077

在我的一个项目中，我遇到了类似的问题。我需要动态创建一个表单，即该表单将包含在运行前无法确定的不同字段视图。我需要这些字段是 Marionette 视图，因为它们的行为非常复杂。

我在 Marionette 1.4 中所做的方式`CoffeeScript`：

```
 class Module.AdditionalOptionsLayout extends Marionette.Layout
    tagName: 'form'

    initialize: (options = {}) ->
      @_fieldViews = options.fieldViews || []

    onRender: ->
      @_showFields @_fieldViews

    _showFields: (fieldViews) ->
      fieldViews.forEach (fieldView) => @_addRegion().show fieldView

    _addRegion: ->
      regionClass = _.uniqueId('field-region__')
      @$el.append $("<div class=\"#{regionClass}\"></div>")
      @addRegion regionClass, '.' + regionClass 
```

请让我知道是否需要进一步解释，或者我可以在 JS 中澄清这一点。我也知道这是一个迟到的答案，但是，希望有人能发现它仍然有用。另外，请注意 - 答案仅适用于 Marionette 1.x

# google-analytics - how TO know if user clicks/hovers div on my site using Google Analytics

> ID：15690687
> 
> 赞同：0
> 
> 时间：2013-03-28T19:39:47.387
> 
> 标签：google-analytics

how can i know if user clicks/hovers div on my site ?

i am a little confuse Whether to use goal or to use

events.

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:24:38.910

你可以两者都做！使用 jQuery mouseover / click 事件处理程序传递两个单独的目标，然后创建一个“基于目标的事件”

如果您想知道“这种情况发生了多少次？” 使用事件（总 = 次数；唯一 = 访问次数）

如果这是您想要的“这发生了多少次访问？” 使用目标。

目标为成本细分提供了更好的报告——例如：“我花了多少钱来访问点击一个 div？” 目标比事件更容易回答。

# r - R 检查重复项非常缓慢，即使使用 mclapply

> ID：15690688
> 
> 赞同：3
> 
> 时间：2013-03-28T19:39:47.887
> 
> 标签：r, optimization, multicore, domc, mclapply

我有一些数据涉及重复销售一堆具有唯一 ID 的汽车。一辆车可以卖不止一次。

但是，有些 Id 是错误的，所以我正在检查每个 Id 的大小是否在多次销售中记录为相同。如果不是，那么我知道 Id 是错误的。

我正在尝试使用以下代码执行此操作：

```
library("doMC")

Data <- data.frame(ID=c(15432,67325,34623,15432,67325,34623),Size=c("Big","Med","Small","Big","Med","Big"))
compare <- function(v) all(sapply( as.list(v[-1]), FUN=function(z) {isTRUE(all.equal(z, v[1]))}))

IsGoodId = function(Id){
  Sub = Data[Data$ID==Id,]
  if (length(Sub[,1]) > 1){
    return(compare(Sub[,"Size"]))
  }else{
    return(TRUE)
  }
}

WhichAreGood = mclapply(unique(Data$ID),IsGoodId) 
```

但在我的四核 i5 上，它的速度非常缓慢、非常缓慢。

谁能看出瓶颈在哪里？我是 R 优化的新手。

谢谢，-N

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:51:53.187

看起来您的算法进行了 N^2 比较。也许像下面这样的东西会更好地扩展。我们发现重复的销售，认为这只是总数的一小部分。

```
dups = unique(Data$ID[duplicated(Data$ID)])
DupData = Data[Data$ID %in% dups,,drop=FALSE] 
```

运算符的`%in%`扩展性非常好。然后根据 id 拆分 size 列，检查 id 是否有多个 size

```
tapply(DupData$Size, DupData$ID, function(x) length(unique(x)) != 1) 
```

这给出了一个命名的逻辑向量，TRUE 表示每个 id 有多个大小。这与重复销售的数量大致呈线性关系；有一些聪明的方法可以让它快速运行，所以如果你的重复数据本身很大......

嗯，想多了，我猜

```
u = unique(Data)
u$ID[duplicated(u$ID)] 
```

成功了。

# asp.net - On my website, how can I get user designed product(in Silverlight) and view it later?

> ID：15690689
> 
> 赞同：1
> 
> 时间：2013-03-28T19:40:02.153
> 
> 标签：asp.net, silverlight

I'm creating a small website in MVC3, as a small project for college. Now, what I want is my website to provide the user an environment where they can design a rough estimate of their clothes, like T-shirts,etc. and then can order them.

An admin is supposed to view their order, prepare closest possible match and deliver it to them.

I have designed the website for showing ready made products, but how do I get through this designing environment part? I mean not a very fancy environment is required, just good enough to be shown to the college management.

What technology/platform should I use? I don't know if flash can be used and all that but I want a simple and quick solution. Although I would like to hear someone telling the areas of silverlight I need to study for it, because I have worked with it earlier a very little bit.

And actually I don't have an idea of how to save user's product for viewing later? That is a the biggest problem I think.

UPDATE: I meant just a demo app, for example you can select the base color for a few items-shirt/t-shirt, then add some strips or design on it, then select a few elements from tools provided on one side-buttons/some style elements, thats all. I just want to give an impression that website can be put to use if the app is well worked with by some else,probably some other time. I mean the idea is to proove that its feasible via Silverlight/whatever technology I use for this to take orders from users which they have designed themselves.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:26:51.370

您的问题非常广泛...您是否有已启动的示例代码或示例。我能给你的最好的就是每个组件都有坐标等供以后使用和保存。

您可以下载此示例项目来帮助您开始：

[http://coded.com/articles/freehand-drawing-in-silverlight](http://codeding.com/articles/freehand-drawing-in-silverlight)

更具体的问题将更容易回答。

# real-time - 几个 Storm 拓扑之间的通信

> ID：15690691
> 
> 赞同：2
> 
> 时间：2013-03-28T19:40:04.883
> 
> 标签：real-time, apache-storm, topology

我正在尝试在生产中部署几个 Storm 拓扑。我检查了文档，但找不到任何关于拓扑是否可以通过本机方法进行通信的参考资料。有人对如何实施有任何建议吗？

简而言之，我很想看看是否可以跨拓扑发送元组。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T12:21:03.320

> 从理论上讲，您可能会实现它。实际上，没有。

如果您想通过元组进行通信，您应该在一个拓扑中完成所有操作。拓扑组织计算而不是代码，因此您想要一起计算的所有内容都应该在拓扑中一起出现。

也就是说，在某些情况下，由于计算的每个部分的性质可能非常不同，您可能希望跨拓扑拆分计算。在这种情况下，您将需要使用外部消息传递服务来在拓扑之间切换工作。老实说，这比尝试在拓扑之间直接传递元组更容易和更健壮。我使用 Redis 取得了巨大的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T13:35:08.043

很简单：如果你想保持分离的拓扑结构，你的螺栓可以将值放入/从外部存储中检索，比如 Redis。

# ruby - Ruby zlib deflate 和 inflate 无法按预期工作

> ID：15690694
> 
> 赞同：1
> 
> 时间：2013-03-28T19:40:13.010
> 
> 标签：ruby, compression, zlib, inflate, deflate

我一直在尝试让（相对）简单的压缩和解压缩功能适用于任何类型的对象（图像、csv 文件、文档等），但没有任何成功。

我已经尝试了很多事情，目前我认为这段代码很接近它（不是我的代码），但是我一直无法让它工作。

Hoge.txt 内容：

```
blahblah123 
```

Ruby deflate 类名为 ruby​​filetest.rb：

```
require "zlib"

file_name = "hoge.txt"
compressed_file = File.open(file_name +".gz", "w+")

zd = Zlib::Deflate.new(Zlib::BEST_COMPRESSION, 15, Zlib::MAX_MEM_LEVEL, Zlib::HUFFMAN_ONLY)

compressed_file << zd.deflate(File.read(file_name))
compressed_file.close
zd.close 
```

因此，使用此代码它所做的是创建一个名为 hoge.txt.gz 的 .gz 文件，该文件在命令提示符下生成此文件

```
rubyfiletest.rb:9:in `read': No such file or directory - hoge.txt (Errno::ENOEN) 
```

此外，如果我尝试使用 winrar/7zip 打开新创建的文件，它会给我这个错误：

```
The archive is either in unknown format or damaged. 
```

Ruby inflate 类名为 ruby​​inflate.rb：

```
require 'zlib'

File.open('hoge.txt.gz', 'rb') do |compressed|
    File.open('hoge.txt', 'w') do |decompressed|
        gz = Zlib::GzipReader.new(compressed)
        result = gz.read
        decompressed.write(result)
        gz.close
    end
end 
```

我猜压缩无法正常工作，因为我什至无法打开压缩文件并且遇到了很多问题。我认为值得一提的是我是 ruby​​ 新手。我还想知道这种实现方式是否可以使图像和所有类型的文件都可以很好地压缩/解压缩。

*** 更新 ***

我收到错误路径的错误，因为 hoge 被保存为 hoge.txt.txt （doh！）并且它正在该路径中寻找 hoge.txt。所以现在我稍微更改了 ruby​​ 压缩代码，以便输出创建一个有效的 gzip 文件，正如 Matthew T 所指出的那样。

这是现在的样子

```
require "zlib"

file_name = "hoge.txt"
compressed_file = File.open(file_name +".gz", "w+b")

zd = Zlib::GzipWriter.new(compressed_file)

zd << File.read(file_name)
compressed_file.close
zd.close 
```

将此作为使用 GzipWriter 解压缩的新 ruby​​filetest.rb 类，我在运行此类时收到此错误：

```
rubyfiletest.rb:8 in 'write': closed stream (IOError) 
```

这仍然会生成 .gz 文件（我现在可以在 winrar/7zip 中毫无问题地打开它，但是它是空的，应该包含“blahblah123”）。压缩它并运行 ruby​​inflate.rb 后，我从 ruby​​inflate.rb 收到此错误：

```
rubyinflate.rb:6 in 'read': unecpected end of file (Zlib::GzipFile::Error) 
```

我认为这些错误可能导致数据无法复制？如果我使用图像，假设此代码有效，是否会复制该数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:51:29.203

运行程序时，您的 hoge.txt 文件是否在当前目录中？在假设压缩和解压缩不起作用之前，我会首先尝试解决指示找不到文件的大错误警告。我想你会发现无法读取“压缩”文件，因为它是一个空文件。

* * *

在解决了程序无法找到 hoge.txt 文件的问题后，您的输出仍然会出现问题。 `Deflate`不创建 gzip 文件；它只进行压缩。gzip 文件中包含的内容不仅仅是压缩数据。还有页眉和页脚信息。我建议您使用`GzipWriter`类而不是`Deflate`类。

```
require "zlib"

file_name = "hoge.txt"
compressed_file = File.open(file_name +".gz", "w+")

zd = Zlib::GzipWriter.new(compressed_file)

zd << File.read(file_name)
compressed_file.close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:16:12.620

既然你提到了winrar，听起来你在Windows上。一旦通过 find `hoge.txt`，您将需要一个`"w+b"`, 而不是`"w+"`写入压缩数据时的模式。

# ember.js - EmberJS：自定义模板助手及其依赖项的问题

> ID：15690702
> 
> 赞同：1
> 
> 时间：2013-03-28T19:40:37.630
> 
> 标签：ember.js

我已经定义了一个自定义模板助手，类似于它们[在 Ember 指南中](http://emberjs.com/guides/templates/writing-helpers/ "指导")显示的内容。

```
Ember.Handlebars.registerBoundHelper('fullName', function(person) {
  return person.get('firstName') + ' ' + person.get('lastName');
}, 'firstName', 'lastName'); 
```

然而，每次我加载页面时，我都会收到一个奇怪的错误：

```
Uncaught TypeError: Cannot read property '0' of null 
```

我试图追踪它，我想知道它是否可能是上下文问题。事实上，当我进入 Ember.Handlebars.registerBoundHelper 时，我可以看到它试图注册“firstName”和“lastName”的观察者没有正确的路径。它们是“.firstName”和“.lastName”，这并不意味着什么......

你知道会发生什么吗？

另外，我应该添加：如果我删除依赖项：

```
Ember.Handlebars.registerBoundHelper('fullName', function(person) {
  return person.get('firstName') + ' ' + person.get('lastName');
}); 
```

我可以打破我的助手。当我执行 person.toString() 时，它似乎“正常”（使用正确的 ID 等），但是，当我在控制台中执行 person.get('firstName') 时，我得到 null，好像记录没有完全加载。奇怪的。

谢谢

PJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:39:12.440

以防它帮助其他人：这是一个上下文问题。这有点奇怪，因为助手中的“人”确实是一个 App.Person。但是我尝试了各种上下文转换，最终都奏效了（可能是因为我在 master 上？）。因此，如果您遇到这样的奇怪行为，您可能需要仔细检查您传递给助手的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T14:14:43.820

这个错误是一个错误（[https://github.com/emberjs/ember.js/issues/2948](https://github.com/emberjs/ember.js/issues/2948)）我为此提供了修复：[https ://github.com/seeweer/ember.js/commit/0226e1c605f84e469e56c7c397599a4295946094](https://github.com/seeweer/ember.js/commit/0226e1c605f84e469e56c7c397599a4295946094)

这个错误是由`this`on handlebar helper 引起的。例如，如果您有这样的模板：

```
{{someHelper this}} 
```

`this`然后，例如`view.context`，如果您在视图中或`controller`在控制器中，则可以代替您使用。

# javascript - 递归循环遍历对象以构建属性列表

> ID：15690706
> 
> 赞同：68
> 
> 时间：2013-03-28T19:40:49.550
> 
> 标签：javascript, object

情况：我有一个包含多个子对象和子子对象的大对象，其属性包含多个数据类型。出于我们的目的，这个对象看起来像这样：

```
var object = {
    aProperty: {
        aSetting1: 1,
        aSetting2: 2,
        aSetting3: 3,
        aSetting4: 4,
        aSetting5: 5
    },
    bProperty: {
        bSetting1: {
            bPropertySubSetting : true
        },
        bSetting2: "bString"
    },
    cProperty: {
        cSetting: "cString"
    }
} 
```

我需要遍历这个对象并构建一个显示层次结构的键列表，所以列表最终看起来像这样：

```
aProperty.aSetting1
aProperty.aSetting2
aProperty.aSetting3
aProperty.aSetting4
aProperty.aSetting5
bProperty.bSetting1.bPropertySubSetting
bProperty.bSetting2
cProperty.cSetting 
```

我有这个函数，它确实循环遍历对象并吐出键，但不是分层的：

```
function iterate(obj) {
    for (var property in obj) {
        if (obj.hasOwnProperty(property)) {
            if (typeof obj[property] == "object") {
                iterate(obj[property]);
            }
            else {
                console.log(property + "   " + obj[property]);
            }
        }
    }
} 
```

有人可以让我知道该怎么做吗？这是一个 jsfiddle 供您使用：http: [//jsfiddle.net/tbynA/](http://jsfiddle.net/tbynA/)

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-03-28T19:47:05.490

我为你做了一个[**FIDDLE**](http://jsfiddle.net/tbynA/1/)。如果属性是原始类型，我正在存储一个`stack`字符串然后输出它：

```
function iterate(obj, stack) {
        for (var property in obj) {
            if (obj.hasOwnProperty(property)) {
                if (typeof obj[property] == "object") {
                    iterate(obj[property], stack + '.' + property);
                } else {
                    console.log(property + "   " + obj[property]);
                    $('#output').append($("<div/>").text(stack + '.' + property))
                }
            }
        }
    }

iterate(object, '') 
```

* * *

# 更新（2019 年 17 月 1 日）- <曾经有不同的实现，但它不起作用。请参阅[此答案](https://stackoverflow.com/a/53620876/2120289)以获得更漂亮的解决方案:)>

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2018-12-04T20:25:55.620

Artyom Neustroev 的解决方案不适用于复杂的对象，所以这里有一个基于他的想法的可行解决方案：

```
function propertiesToArray(obj) {
  const isObject = val =>
    val && typeof val === 'object' && !Array.isArray(val);

  const addDelimiter = (a, b) =>
    a ? `${a}.${b}` : b;

  const paths = (obj = {}, head = '') => {
    return Object.entries(obj)
      .reduce((product, [key, value]) => 
        {
          let fullPath = addDelimiter(head, key)
          return isObject(value) ?
            product.concat(paths(value, fullPath))
          : product.concat(fullPath)
        }, []);
  }

  return paths(obj);
}

const foo = {foo: {bar: {baz: undefined}, fub: 'goz', bag: {zar: {zaz: null}, raz: 3}}}
const result = propertiesToArray(foo)
console.log(result)
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-02-11T15:01:28.470

如果对象在其对象图中有循环，您将遇到此问题，例如：

```
var object = {
    aProperty: {
        aSetting1: 1
    },
};
object.ref = object; 
```

在这种情况下，您可能希望保留对您已经浏览过的对象的引用并将它们从迭代中排除。

如果对象图太深，您也可能会遇到问题，例如：

```
var object = {
  a: { b: { c: { ... }} }
}; 
```

你会得到太多的递归调用错误。两者都可以避免：

```
function iterate(obj) {
    var walked = [];
    var stack = [{obj: obj, stack: ''}];
    while(stack.length > 0)
    {
        var item = stack.pop();
        var obj = item.obj;
        for (var property in obj) {
            if (obj.hasOwnProperty(property)) {
                if (typeof obj[property] == "object") {
                  var alreadyFound = false;
                  for(var i = 0; i < walked.length; i++)
                  {
                    if (walked[i] === obj[property])
                    {
                      alreadyFound = true;
                      break;
                    }
                  }
                  if (!alreadyFound)
                  {
                    walked.push(obj[property]);
                    stack.push({obj: obj[property], stack: item.stack + '.' + property});
                  }
                }
                else
                {
                    console.log(item.stack + '.' + property + "=" + obj[property]);
                }
            }
        }
    }
}

iterate(object); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-04-17T17:29:21.093

[https://github.com/hughsk/flat](https://github.com/hughsk/flat)

```
var flatten = require('flat')
flatten({
key1: {
    keyA: 'valueI'
},
key2: {
    keyB: 'valueII'
},
key3: { a: { b: { c: 2 } } }
})

// {
//   'key1.keyA': 'valueI',
//   'key2.keyB': 'valueII',
//   'key3.a.b.c': 2
// } 
```

只需循环以获取之后的索引。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-08-12T01:30:46.577

**你不需要递归！**

`[key, value]`以下函数函数将按照键的值作为数组以从最浅到最深的顺序输出条目。

```
function deepEntries( obj ){
    'use-strict';
    var allkeys, curKey = '[', len = 0, i = -1, entryK;

    function formatKeys( entries ){
       entryK = entries.length;
       len += entries.length;
       while (entryK--)
         entries[entryK][0] = curKey+JSON.stringify(entries[entryK][0])+']';
       return entries;
    }
    allkeys = formatKeys( Object.entries(obj) );

    while (++i !== len)
        if (typeof allkeys[i][1] === 'object' && allkeys[i][1] !== null){
            curKey = allkeys[i][0] + '[';
            Array.prototype.push.apply(
                allkeys,
                formatKeys( Object.entries(allkeys[i][1]) )
            );
        }
    return allkeys;
} 
```

然后，要输出您正在寻找的结果，只需使用它。

```
function stringifyEntries(allkeys){
    return allkeys.reduce(function(acc, x){
        return acc+((acc&&'\n')+x[0])
    }, '');
}; 
```

如果您对技术位感兴趣，那么这就是它的工作原理。它通过获取您传递`Object.entries`的`obj`对象并将它们放入 array 来工作`allkeys`。然后，从开头`allkeys`到结尾，如果它发现`allkeys`条目值之一是一个对象，那么它会将该条目的键作为，并在将结果数组推到末尾之前`curKey`为其自己的每个条目键添加前缀。然后，它将添加到目标长度的条目数添加到目标长度中，这样它也将遍历那些新添加的键。`curKey``allkeys``allkeys`

例如，请注意以下事项：

```
<script>
var object = {
    aProperty: {
        aSetting1: 1,
        aSetting2: 2,
        aSetting3: 3,
        aSetting4: 4,
        aSetting5: 5
    },
    bProperty: {
        bSetting1: {
            bPropertySubSetting : true
        },
        bSetting2: "bString"
    },
    cProperty: {
        cSetting: "cString"
    }
}
document.write(
    '<pre>' + stringifyEntries( deepEntries(object) ) + '</pre>'
);
function deepEntries( obj ){//debugger;
    'use-strict';
    var allkeys, curKey = '[', len = 0, i = -1, entryK;

    function formatKeys( entries ){
       entryK = entries.length;
       len += entries.length;
       while (entryK--)
         entries[entryK][0] = curKey+JSON.stringify(entries[entryK][0])+']';
       return entries;
    }
    allkeys = formatKeys( Object.entries(obj) );

    while (++i !== len)
        if (typeof allkeys[i][1] === 'object' && allkeys[i][1] !== null){
            curKey = allkeys[i][0] + '[';
            Array.prototype.push.apply(
                allkeys,
                formatKeys( Object.entries(allkeys[i][1]) )
            );
        }
    return allkeys;
}
function stringifyEntries(allkeys){
    return allkeys.reduce(function(acc, x){
        return acc+((acc&&'\n')+x[0])
    }, '');
};
</script>
```

或者，如果您只想要属性，而不想要具有属性的对象，那么您可以像这样过滤掉：

```
deepEntries(object).filter(function(x){return typeof x[1] !== 'object'}); 
```

例子：

```
<script>
var object = {
    aProperty: {
        aSetting1: 1,
        aSetting2: 2,
        aSetting3: 3,
        aSetting4: 4,
        aSetting5: 5
    },
    bProperty: {
        bSetting1: {
            bPropertySubSetting : true
        },
        bSetting2: "bString"
    },
    cProperty: {
        cSetting: "cString"
    }
}
document.write('<pre>' + stringifyEntries(
    deepEntries(object).filter(function(x){
       return typeof x[1] !== 'object';
    })
) + '</pre>');
function deepEntries( obj ){//debugger;
    'use-strict';
    var allkeys, curKey = '[', len = 0, i = -1, entryK;

    function formatKeys( entries ){
       entryK = entries.length;
       len += entries.length;
       while (entryK--)
         entries[entryK][0] = curKey+JSON.stringify(entries[entryK][0])+']';
       return entries;
    }
    allkeys = formatKeys( Object.entries(obj) );

    while (++i !== len)
        if (typeof allkeys[i][1] === 'object' && allkeys[i][1] !== null){
            curKey = allkeys[i][0] + '[';
            Array.prototype.push.apply(
                allkeys,
                formatKeys( Object.entries(allkeys[i][1]) )
            );
        }
    return allkeys;
}
function stringifyEntries(allkeys){
    return allkeys.reduce(function(acc, x){
        return acc+((acc&&'\n')+x[0])
    }, '');
};
</script>
```

### 浏览器兼容性

上面的解决方案在 IE 中不起作用，它只在 Edge 中起作用，因为它使用了 Object.entries 函数。如果您需要 IE9+ 支持，只需将以下`Object.entries`polyfill 添加到您的代码中。如果您出于某种原因，确实需要 IE6+ 支持，那么您还需要一个`Object.keys`和`JSON.stringify`polyfill（此处均未列出，因此请在其他地方找到）。

```
if (!Object.entries)
  Object.entries = function( obj ){
    var ownProps = Object.keys( obj ),
        i = ownProps.length,
        resArray = new Array(i); // preallocate the Array
    while (i--)
      resArray[i] = [ownProps[i], obj[ownProps[i]]];

    return resArray;
  }; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-06T06:02:52.297

在 lodash 的帮助下...

```
/**
 * For object (or array) `obj`, recursively search all keys
 * and generate unique paths for every key in the tree.
 * @param {Object} obj
 * @param {String} prev
 */
export const getUniqueKeyPaths = (obj, prev = '') => _.flatten(
  Object
  .entries(obj)
  .map(entry => {
    const [k, v] = entry
    if (v !== null && typeof v === 'object') {
      const newK = prev ? `${prev}.${k}` : `${k}`
      // Must include the prev and current k before going recursive so we don't lose keys whose values are arrays or objects
      return [newK, ...getUniqueKeyPaths(v, newK)]
    }
    return `${prev}.${k}`
  })
) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-18T07:01:31.270

此版本包含在一个函数中，该函数接受自定义分隔符、过滤器并返回一个平面字典：

```
function flatten(source, delimiter, filter) {
  var result = {}
  ;(function flat(obj, stack) {
    Object.keys(obj).forEach(function(k) {
      var s = stack.concat([k])
      var v = obj[k]
      if (filter && filter(k, v)) return
      if (typeof v === 'object') flat(v, s)
      else result[s.join(delimiter)] = v
    })
  })(source, [])
  return result
} 
```

```
var obj = {
  a: 1,
  b: {
    c: 2
  }
}
flatten(obj)
// <- Object {a: 1, b.c: 2}
flatten(obj, '/')
// <- Object {a: 1, b/c: 2}
flatten(obj, '/', function(k, v) { return k.startsWith('a') })
// <- Object {b/c: 2} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-07T09:02:18.290

**更新：只需使用 JSON.stringify 在屏幕上打印对象！**

您只需要这一行：

```
document.body.innerHTML = '<pre>' + JSON.stringify(ObjectWithSubObjects, null, "\t") + '</pre>'; 
```

这是我在屏幕上递归打印对象的旧版本：

```
 var previousStack = '';
    var output = '';
    function objToString(obj, stack) {
        for (var property in obj) {
            var tab = '&nbsp;&nbsp;&nbsp;&nbsp;';
            if (obj.hasOwnProperty(property)) {
                if (typeof obj[property] === 'object' && typeof stack === 'undefined') {
                    config = objToString(obj[property], property);
                } else {
                    if (typeof stack !== 'undefined' && stack !== null && stack === previousStack) {
                        output = output.substring(0, output.length - 1);  // remove last }
                        output += tab + '<span>' + property + ': ' + obj[property] + '</span><br />'; // insert property
                        output += '}';   // add last } again
                    } else {
                        if (typeof stack !== 'undefined') {
                            output += stack + ': {  <br />' + tab;
                        }
                        output += '<span>' + property + ': ' + obj[property] + '</span><br />';
                        if (typeof stack !== 'undefined') {
                            output += '}';
                        }
                    }
                    previousStack = stack;
                }
            }
        }
        return output;
    } 
```

用法：

```
document.body.innerHTML = objToString(ObjectWithSubObjects); 
```

示例输出：

```
cache: false
position: fixed
effect: { 
    fade: false
    fall: true
} 
```

显然，这可以通过在需要时添加逗号和字符串值的引号来改进。但这对我的情况来说已经足够了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-03-16T10:45:18.607

如果任何地方都有空值，则此解决方案不会失败。

```
function recursiveKeys(obj) {
  const helper = (obj, prefix, acc) => {
    if ("" !== prefix) acc.push(prefix);
    if (typeof obj === "object" && obj !== null) {
      if (Array.isArray(obj)) {
        for (let k = 0; k < obj.length; k++) {
          helper(obj[k], prefix + "[" + k + "]", acc);
        }
      } else {
        const keys = Object.keys(obj);
        keys.forEach((k) => {
          helper(obj[k], prefix + "." + k, acc);
        });
      }
    }
    return acc;
  };
  return helper(obj, "", []);
} 
```

像这样调用

```
const obj = {
  name: "Sherlock Holmes",
  address: { street: "221B Baker Street", city: "London" },
  fruits: ["Orange", "Apple"],
};
recursiveKeys(obj); 
```

它返回这个

```
[
  ".name",
  ".address",
  ".address.street",
  ".address.city",
  ".fruits",
  ".fruits[0]",
  ".fruits[1]",
] 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-01-28T21:15:09.523

假设您有一个 JSON 对象，例如：

```
var example = {
    "prop1": "value1",
    "prop2": [ "value2_0", "value2_1"],
    "prop3": {
         "prop3_1": "value3_1"
    }
} 
```

**迭代其“属性”的错误方法：**

```
function recursivelyIterateProperties(jsonObject) {
    for (var prop in Object.keys(jsonObject)) {
        console.log(prop);
        recursivelyIterateProperties(jsonObject[prop]);
    }
} 
```

在遍历和和的属性时，您可能会惊讶地看到控制台记录`0`,等。这些对象是序列，序列的索引是 Javascript 中该对象的属性。`1``prop1``prop2``prop3_1`

**递归遍历 JSON 对象属性的更好方法**是首先检查该对象是否为序列：

```
function recursivelyIterateProperties(jsonObject) {
    for (var prop in Object.keys(jsonObject)) {
        console.log(prop);
        if (!(typeof(jsonObject[prop]) === 'string')
            && !(jsonObject[prop] instanceof Array)) {
                recursivelyIterateProperties(jsonObject[prop]);

            }
     }
} 
```

**如果要在数组中的对象内查找属性**，请执行以下操作：

```
function recursivelyIterateProperties(jsonObject) {

    if (jsonObject instanceof Array) {
        for (var i = 0; i < jsonObject.length; ++i) {
            recursivelyIterateProperties(jsonObject[i])
        }
    }
    else if (typeof(jsonObject) === 'object') {
        for (var prop in Object.keys(jsonObject)) {
            console.log(prop);
            if (!(typeof(jsonObject[prop]) === 'string')) {
                recursivelyIterateProperties(jsonObject[prop]);
            }
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-06T13:46:41.807

具有过滤可能性的改进解决方案。这个结果更方便，因为您可以直接使用数组路径引用任何对象属性，例如：

> [“aProperty.aSetting1”、“aProperty.aSetting2”、“aProperty.aSetting3”、“aProperty.aSetting4”、“aProperty.aSetting5”、“bProperty.bSetting1.bPropertySubSetting”、“bProperty.bSetting2”、“cProperty.cSetting” ]

```
 /**
 * Recursively searches for properties in a given object. 
 * Ignores possible prototype endless enclosures. 
 * Can list either all properties or filtered by key name.
 *
 * @param {Object} object Object with properties.
 * @param {String} key Property key name to search for. Empty string to 
 *                     get all properties list .
 * @returns {String} Paths to properties from object root.
 */
function getPropertiesByKey(object, key) {

  var paths = [
  ];

  iterate(
    object,
    "");

  return paths;

  /**
   * Single object iteration. Accumulates to an outer 'paths' array.
   */
  function iterate(object, path) {
    var chainedPath;

    for (var property in object) {
      if (object.hasOwnProperty(property)) {

        chainedPath =
          path.length > 0 ?
          path + "." + property :
          path + property;

        if (typeof object[property] == "object") {

          iterate(
            object[property],
            chainedPath,
            chainedPath);
        } else if (
          property === key ||
          key.length === 0) {

          paths.push(
            chainedPath);
        }
      }
    }

    return paths;
  }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-20T09:49:42.787

扁平化**属性和数组**的解决方案。

示例输入：

```
{
  obj1: {
    prop1: "value1",
    prop2: "value2"
  },
  arr1: [
    "value1",
    "value2"
  ]
} 
```

输出：

```
"arr1[0]": "value1"
"arr1[1]": "value2"
"obj1.prop1": "value1"
"obj1.prop2": "value2" 
```

源代码：

```
flatten(object, path = '', res = undefined) {
      if (!Array.isArray(res)) {
          res = [];
      }
      if (object !== null && typeof object === 'object') {
          if (Array.isArray(object)) {
              for (let i = 0; i < object.length; i++) {
                  this.flatten(object[i], path + '[' + i + ']', res)
              }
          } else {
              const keys = Object.keys(object)
              for (let i = 0; i < keys.length; i++) {
                  const key = keys[i]
                  this.flatten(object[key], path ? path + '.' + key : key, res)
              }
          }
      } else {
          if (path) {
              res[path] = object
          }
      }
      return res
  } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-17T16:49:06.913

这是一个简单的解决方案。这是一个迟到的答案，但可能很简单-

```
const data = {
  city: 'foo',
  year: 2020,
  person: {
    name: {
      firstName: 'john',
      lastName: 'doe'
    },
    age: 20,
    type: {
      a: 2,
      b: 3,
      c: {
        d: 4,
        e: 5
      }
    }
  },
}

function getKey(obj, res = [], parent = '') {
  const keys = Object.keys(obj);

  /** Loop throw the object keys and check if there is any object there */
  keys.forEach(key => {
    if (typeof obj[key] !== 'object') {
      // Generate the heirarchy
      parent ? res.push(`${parent}.${key}`) : res.push(key);
    } else {
      // If object found then recursively call the function with updpated parent
      let newParent = parent ? `${parent}.${key}` : key;
      getKey(obj[key], res, newParent);
    }

  });
}

const result = [];

getKey(data, result, '');

console.log(result);
```

```
.as-console-wrapper{min-height: 100%!important; top: 0}
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-22T21:02:47.867

此函数可以处理包含对象和对象数组的对象。结果将是对象的每个单个项目一行，表示其在结构中的完整路径。

用[http://haya2now.jp/data/data.json测试](http://haya2now.jp/data/data.json)

示例结果：geometry[6].obs[5].hayabusa2.delay_from

```
function iterate(obj, stack, prevType) {
    for (var property in obj) {
        if ( Array.isArray(obj[property]) ) {
            //console.log(property , "(L="  + obj[property].length + ") is an array  with parent ", prevType, stack);
            iterate(obj[property], stack  + property , "array");
        } else {
            if ((typeof obj[property] != "string")  && (typeof obj[property] != "number"))  {
                if(prevType == "array") {
                    //console.log(stack + "["  + property + "] is an object, item of " , prevType, stack);
                    iterate(obj[property], stack + "["  +property + "]." , "object");
                } else {
                    //console.log(stack +    property  , "is " , typeof obj[property] , " with parent ", prevType, stack );
                    iterate(obj[property], stack  + property + ".", "object");
                }   
            } else {
                if(prevType == "array") {
                    console.log(stack + "["  + property + "] =  "+  obj[property]);

                } else {
                    console.log(stack +    property  , " =  " ,  obj[property] );                       
                }   
            }
        }

    }
}

iterate(object, '', "File")
console.log(object); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-17T17:18:09.343

您可以使用递归`Object.keys`来实现这一点。

```
var keys = []

const findKeys = (object, prevKey = '') => {
  Object.keys(object).forEach((key) => {
    const nestedKey = prevKey === '' ? key : `${prevKey}.${key}`

    if (typeof object[key] !== 'object') return keys.push(nestedKey)

    findKeys(object[key], nestedKey)
  })
}

findKeys(object)

console.log(keys) 
```

这导致了这个数组

```
[
  "aProperty.aSetting1",
  "aProperty.aSetting2",
  "aProperty.aSetting3",
  "aProperty.aSetting4",
  "aProperty.aSetting5",
  "bProperty.bSetting1.bPropertySubSetting",
  "bProperty.bSetting2",
  "cProperty.cSetting"
] 
```

要进行测试，您可以提供您的对象：

```
object = {
  aProperty: {
    aSetting1: 1,
    aSetting2: 2,
    aSetting3: 3,
    aSetting4: 4,
    aSetting5: 5
  },
  bProperty: {
    bSetting1: {
      bPropertySubSetting: true
    },
    bSetting2: "bString"
  },
  cProperty: {
    cSetting: "cString"
  }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-12-17T17:31:20.627

我也会提供一个解决方案，使用递归。注释行以澄清事情。

它现在可以很好地实现其目的。

```
// works only if the value is a dictionary or something specified below, and adds all keys in nested objects and outputs them

const example = {
  city: "foo",
  year: 2020,
  person: {
    name: "foo",
    age: 20,
    deeper: {
      even_deeper: {
        key: "value", 
        arr: [1, 2, {
          a: 1,
          b: 2
        }]
      }
    }
  },
};

var flat  =  [];    // store keys
var depth =  0;     // depth, used later
var path  =  "obj"; // base path to be added onto, specified using the second parameter of flatKeys 

let flatKeys = (t, name) => {
  path = name ? name : path;  // if specified, set the path 
  for (const k in t) {
    const v = t[k];
    let type = typeof v;      // store the type value's type
    switch (type) {  
      case "string":          // these are the specified cases for which a key will be added,
      case "number":          // specify more if you want
      case "array" :
        flat.push(path + "." + k);  // add the complete path to the array
        break;
      case "object":
        flat.push(path + "." + k)
        path += "." + k;
        flatKeys(v);
        break;
    }
  }
  return flat;
};

let flattened = flatKeys(example, "example"); // the second argument is what the root path should be (for convenience)
console.log(flattened, "keys: " + flattened.length);
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-12-19T19:50:44.020

*每个递归调用的简单路径全局变量对我有用！*

```
var object = {
  aProperty: {
    aSetting1: 1,
    aSetting2: 2,
    aSetting3: 3,
    aSetting4: 4,
    aSetting5: 5
  },
  bProperty: {
    bSetting1: {
      bPropertySubSetting: true
    },
    bSetting2: "bString"
  },
  cProperty: {
    cSetting: "cString"
  }
}

function iterate(obj, path = []) {
  for (var property in obj) {
    if (obj.hasOwnProperty(property)) {
      if (typeof obj[property] == "object") {
        let curpath = [...path, property];
        iterate(obj[property], curpath);
      } else {
        console.log(path.join('.') + '.' + property + "   " + obj[property]);
        $('#output').append($("<div/>").text(path.join('.') + '.' + property))
      }
    }
  }
}

iterate(object);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>
<div id='output'></div>
```

# php - CRON PHP 访问限制

> ID：15690711
> 
> 赞同：1
> 
> 时间：2013-03-28T19:41:15.673
> 
> 标签：php, security, cron, restriction

我有一个 PHP 脚本，每晚一次由 cron 作业运行。我想限制用户访问此脚本。Cron 应该是唯一能够运行它的东西。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:10:24.343

为了实现我建议您在 cron 指令中添加第二个参数，如下所示：

```
/the/path/toyour/cronjob/file/cron.php -- password 
```

然后测试参数号 3 ($argv[2]) 是否有效

```
$pass = (isset($argv[2]))?$argv[2]:"";
if ($pass != 'your password')
{
die('Password is incorrect!');
} 
```

然后通过这种方法，您可以防止任何用户直接访问脚本，因为不能从内部作业之外设置参数

希望这是有帮助的，我在这里需要任何帮助:)

# android - Is it possible to embed a QT control in Chromium?

> ID：15690718
> 
> 赞同：1
> 
> 时间：2013-03-28T19:41:34.987
> 
> 标签：android, qt, chromium

Is it possible to embed a QT control in Chromium? Set its properties via HTML attributes? Use the same technique in Android? If possible, what's the best way?

# excel - Displayed format different than value

> ID：15690721
> 
> 赞同：0
> 
> 时间：2013-03-28T19:41:47.033
> 
> 标签：excel, function, custom-formatting

Using Excel Macros:

I am trying to create a function that takes a double called Feet and another called Inches and have it return the total number of inches. That is the easy part. I want it to then display the information in the cell like so:

5ft 8in

Here is the code that I have come up with:

```
Function FTIN(Feet As Double, Inches As Double) As Double
    'This part works fine.
    Dim total As Double

    total = (Feet * 12) + Inches

    FTIN = total

    'this part does not seem to work.
    Dim foot As Double
    Dim inch As Double

    foot = WorksheetFunction.RoundDown(total / 12, 0)
    inch = total - (foot * 12)

    result = foot & "ft " & inch & "in"
End Function 
```

while it does return the the total number of inches it does not display it in the way I need it to.

I basically want it to do the same thing as dates where the value is 41361 but what is displayed is "3/28/2013".

Also I know I can make the value as 508 and I can make the custom format as 0"ft "00"in", but that would not give me a value that I can work with.

Please help me with this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:08:33.470

我认为您不能以您想要的方式自定义格式。我建议制作第二个返回字符串的函数。将英尺和英寸插入这个新函数，为“ft”和“in”添加文本，然后将它们连接在一起（使用 & 运算符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T16:04:03.573

你可以用工作表公式做到这一点，试试这个：

```
=INT(a1/12)&"ft  "&TRIM(TEXT(a1-INT(a1/12)*12,"# ???/???"))&"in" 
```

其中 A1 是其中包含您的 UDF 的单元格。

# java - Forms with two buttons, only one works

> ID：15690724
> 
> 赞同：1
> 
> 时间：2013-03-28T19:41:50.330
> 
> 标签：java, javascript, forms

I have a page with two buttons for creating a pdf and an excel. But only one of them will work. The forms are nearly the same. How can I make both buttons work. Maybe with an id for the forms? Javascript?

```
<portlet:actionURL var="createExcel">
<portlet:param name="action" value="createExcelorConstrainSearch" />
</portlet:actionURL>
<portlet:actionURL var="createPdf">
<portlet:param name="action" value="createPDForConstrainSearch" />
</portlet:actionURL>

<form:form commandName="tg35FormBackingModel" action="${createExcel}" method="post">
<form:form commandName="tg35FormBackingModel" action="${createPdf}" method="post">
<div>
<table>
<tr> 
```

....

```
</form:form>
</form:form>

<button type="submit" name="PDF"></button>
<button type="submit" name="EXCEL"></button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:45:31.167

您可以向表单添加一个`name`属性，这将使它们都可以工作（但不能同时工作）。`name`您可以通过读取与表单数据一起发送的值来检查服务器端按下了哪个值。

# html - 滚动条 - KineticJS

> ID：15690727
> 
> 赞同：1
> 
> 时间：2013-03-28T19:42:00.697
> 
> 标签：html, canvas, kineticjs

我在 div 中定义了一个画布。我已将 div 中的 oveflow 选项设置为滚动。当我在画布中设置任何内容时。我可以滚动。我怎样才能使用 KineticJS 产生同样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:17:16.163

**KineticJS 中的滚动条**

真的是同一个概念！

将 kineticJS 容器包装在包装器 div 中：

```
<div id="wrapper">
    <div id="container"></div>
</div> 
```

接下来将包装器 div 设置为所需的较小尺寸（使用溢出：滚动）：

```
#wrapper{ overflow:scroll; width:300px; height:350px;} 
```

然后只需将您的动态舞台尺寸设置为与实物一样大的尺寸：

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 740,
    height: 463
}); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/j4RGL/](http://jsfiddle.net/m1erickson/j4RGL/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.3-beta.js"></script>

<style>
#container{
  border:solid 1px #ccc;
  margin-top: 10px;
}
#wrapper{ overflow:scroll; width:300px; height:350px; border:2px solid blue; }
</style>        
<script>
$(function(){

        var stage = new Kinetic.Stage({
            container: 'container',
            width: 740,
            height: 463
        });
        var layer = new Kinetic.Layer();
        stage.add(layer);

        var image=new Image();
        image.onload=function(){

            var kImg=new Kinetic.Image({
                image:image,
                id:99,
                x:0,
                y:0,
                width:740,
                height:463,
                draggable:false
            });
            layer.add(kImg);        
            layer.draw();
        }
        image.src="http://www.mrwallpaper.com/wallpapers/Colorful-New-York-City.jpg";

}); // end $(function(){});

</script>       
</head>

<body>
<div id="wrapper">
    <div id="container"></div>
</div>
</body>
</html> 
```

# ruby-on-rails - RABL template with nil collection

> ID：15690731
> 
> 赞同：0
> 
> 时间：2013-03-28T19:42:32.760
> 
> 标签：ruby-on-rails, rabl

I have the following RABL template file

```
node(:status) { response.status }
node(:errors)  { @errors.inspect }

collection :@substances
attributes :name 
```

Now my controller action isn't actually invoked, because an authentication filter is running before hand and setting the return status to 401\. So @substances is nil. RABL then fails with a

```
undefined method `name' for nil:NilClass 
```

error. How can I get RABL to not start iterating over the collection when it's nil?

# php - 如何根据从同一个查询的内连接接收到的值来左连接一个表

> ID：15690732
> 
> 赞同：0
> 
> 时间：2013-03-28T19:42:33.070
> 
> 标签：php, mysql, sql

我正在尝试运行以下查询，但我不断收到语法错误。没有 LEFT JOIN，查询工作正常。如何无错误地实现 LEFT JOIN？

```
SELECT
    m.mid, 
    m.seq, 
    m.created_on, 
    m.created_by, 
    m.body, 
    r.status,
    u.username_clean
FROM message_recipient r
INNER JOIN message m 
ON m.mid = r.mid AND m.seq = r.seq
WHERE r.uid = ".$logged_in_id." 
AND r.status in ('A', 'N')
AND r.seq = (
             SELECT 
                MAX(rr.seq)
             FROM message_recipient rr
             WHERE rr.mid = m.mid 
             AND rr.status in ('A', 'N')
            )
AND IF (m.seq=1 and m.created_by = ".$logged_in_id." , 1=0, 1=1)
ORDER BY created_on DESC
LEFT JOIN users u 
ON u.user_id = m.created_by 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:44:06.387

`LEFT JOIN`是在错误的地方。所有的 JOIN 都需要在`WHERE`子句之前：

```
SELECT
    m.mid, 
    m.seq, 
    m.created_on, 
    m.created_by, 
    m.body, 
    r.status,
    u.username_clean
FROM message_recipient r
INNER JOIN message m 
  ON m.mid = r.mid AND m.seq = r.seq
LEFT JOIN users u 
  ON u.user_id = m.created_by
WHERE r.uid = ".$logged_in_id." 
  AND r.status in ('A', 'N')
  AND r.seq = (
               SELECT 
                  MAX(rr.seq)
               FROM message_recipient rr
               WHERE rr.mid = m.mid 
               AND rr.status in ('A', 'N')
              )
  AND IF (m.seq=1 and m.created_by = ".$logged_in_id." , 1=0, 1=1)
ORDER BY created_on DESC 
```

SQL 子句按以下顺序排列：

```
SELECT 
FROM
JOIN
WHERE 
GROUP BY 
ORDER BY 
```

即使您有多个连接，它们也会出现在`WHERE`

# php - 从 MSSQL 引用 PHP 数组

> ID：15690737
> 
> 赞同：0
> 
> 时间：2013-03-28T19:42:58.397
> 
> 标签：php, sql-server

使用 MSSQL 和 PHP，我正在编写一个日历表单，列出用户日程表中的时间，并让他输入他是否忙、有空等。

一旦用户提交信息，它就会保存到数据库中。

如果用户返回表单，他应该会看到表单字段默认为他已经输入的值。

好的，所以我可以查询数据库的每一天和时间段，并使用结果来确定表单上显示的内容……但这是对数据库的 145 次调用，因为这是用户在一周内可以拥有的时间段数。

似乎应该有一种方法可以查询一次数据库，将 145 个结果存储在一个数组中，然后按日期和时间查询每个字段的数组。

所以我有：

```
$sql="SELECT * FROM committee_employee_schedules WHERE fac_id = $user_id";
$result= mssql_query($sql,$conn); 
```

但是从那里我不想进入一个带有 mssql_fetch_array() 的 while 循环......我将如何去查询我的结果集呢？谢谢。

这是更多示例代码，因为我似乎无法沟通：

```
<form>
<label for="7:30AM">7:30AM</label>
<select name="7:30AM">
<option>Available</option>
<option>Class</option>
<option>Office Hours</option>
</select>

<label for="8:00AM">8:00AM</label>
<select name="8:00AM">
<option>Available</option>
<option>Class</option>
<option>Office Hours</option>
</select>

<label for="8:30AM">8:30AM</label>
<select name="8:30AM">
<option>Available</option>
<option>Class</option>
<option>Office Hours</option>
</select>
</form> 
```

...这会一直持续到周一至周五晚上 9:30，总共有 145 个下拉字段。

每个字段都需要知道表中是否存在针对该时间段的行，如果存在，则选择适当的活动。

我可以使用上面的代码为用户获取所有记录，但是我是否必须为表单上的每个字段循环遍历这 145 行？有没有办法将记录粘贴到数组中并用 results['Monday']['7:30'][Activity] 或其他东西引用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:05:30.453

因此，您将从数据库中取回 145 条记录。SELECT 查询的结果将存储在一个数组中，您必须使用循环遍历它们。该循环可以从记录中读取日期和时间段，并将其存储到适当的数组中。稍后，您可以按照您想要的方式引用该新数组。我将尝试在下面整理一个近似示例。

```
<?php
    slotData = array();//Store your results here the way you want to, see down below

    $sql="SELECT * FROM committee_employee_schedules WHERE fac_id = $user_id";
    $result= mssql_query($sql,$conn);
    while($row = mssql_fetch_row($result)) {
        $day = $row['day'];//Guessing your column name here
        $time = $row['time_of_day'];//again, guessing your time here
        $slotData[$day][$time] = $row;
        //this all assumes "$day" looks like "monday", "tuesday", etc.
        //also assumes "$time" looks like "8:00AM", "9:30PM", etc.
    }

    //now that data is in array the way you want, reference it later
    //Assume you are currently trying to populate Monday at 8am position in calendar...
    $curDay = 'monday';
    $curTime = '8:00AM';
    $data = $slotData[$curDay][$curTime];
    //Yeay! "$data" now has all of the information for Monday at 8am.
?> 
```

底线是，遍历您的数据库结果集并将数据移动到不同数组的适当槽中，具体取决于它应该去哪里。稍后，您可以随意引用该不同的数组，而不必担心每次都遍历所有原始记录。解决了。

# three.js - 在three.js中围绕自己的轴旋转相机

> ID：15690738
> 
> 赞同：2
> 
> 时间：2013-03-28T19:42:59.150
> 
> 标签：three.js

有没有关于围绕自己的 X、Y 和 Z 轴旋转相机的例子？我昨天了解到，我可以使用这些`translate(X|Y|Z)`方法沿自己的轴移动相机。是否也有轮换的等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:56:22.740

在开发版本 (three.js r58dev) 中，添加了一个新函数，用于在其自己的轴上旋转对象：

```
Object3D.rotateOnAxis( axis, angle ); 
```

`axis`必须是单位长度`Vector3`，并且`angle`以弧度为单位。

三.js r58dev

# linq - Select only a single column in LINQ

> ID：15690756
> 
> 赞同：29
> 
> 时间：2013-03-28T19:43:40.027
> 
> 标签：linq, entity-framework, select

The EntityModel is defined as: *Personnel has a link to a Country*

When executing this code in LinqPad, I see that the SQL which is generated is not optimized (all fields are returned) in the first query ? What am I missing here or doing wrong ?

**Query 1 LINQ**

```
var Country = Countries.FirstOrDefault(o => o.Id == 100000581);
var personnelIds = Country.Personnels.Select(p => p.Id).ToArray();
personnelIds.Dump(); 
```

**Query 1 SQL**

```
exec sp_executesql N'SELECT [t0].[Id], [t0].[Version], [t0].[Identifier], [t0].[Name], , [t0].[UpdatedBy] FROM [Personnel] AS [t0] WHERE [t0].[Country_Id] = @p0',N'@p0 bigint',@p0=100000581 
```

**Query 2 LINQ**

```
var Country = Countries.FirstOrDefault(o => o.Id == 100000581);
var personnelIds2 = Personnels.Where(p => p.Country == Country).Select(p => p.Id).ToArray();
personnelIds2.Dump(); 
```

**Query 2 SQL**

```
exec sp_executesql N'SELECT [t0].[Id] FROM [Personnel] AS [t0] WHERE [t0].[Country_Id] = @p0',N'@p0 bigint',@p0=100000581 
```

The database used is SQL Express 2008\. And LinqPad version is 4.43.06

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-28T19:47:25.290

```
//var Country = Countries.FirstOrDefault(o => o.Id == 100000581);
var personnelIds = context.Personnels
    .Where(p => p.Country.Id == 100000581)
    .Select(p => p.Id)
    .ToArray();

personnelIds.Dump(); 
```

试试这个，应该会更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T00:10:48.437

Personnels 集合将在访问时通过延迟加载填充，从而从数据库中检索所有字段。这就是正在发生的事情......

```
// retrieves data and builds the single Country entity (if not null result)
var Country = Countries.FirstOrDefault(o => o.Id == 100000581);

// Country.Personnels accessor will lazy load and construct all Personnel entity objects related to this country entity object
// hence loading all of the fields
var personnelIds = Country.Personnels.Select(p => p.Id).ToArray(); 
```

你想要更像这样的东西：

```
// build base query projecting desired data
var personnelIdsQuery = dbContext.Countries
    .Where( c => c.Id == 100000581 )
    .Select( c => new
        {
            CountryId = c.Id,
            PersonnelIds = c.Personnels.Select( p => p.Id )
        }

// now do enumeration
// your example shows FirstOrDefault without OrderBy
// either use SingleOrDefault or specify an OrderBy prior to using FirstOrDefaul

var result = personnelIdsQuery.OrderBy( item => item.CountryId ).FirstOrDefault(); 
```

或者：

```
var result = personnelIdsQuery.SingleOrDefault(); 
```

如果不为空，则获取 ID 数组

```
if( null != result )
{
    var personnelIds = result.PersonnelIds;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T20:26:03.727

尝试也可以尝试将人员分组到单个查询中

```
var groups =
    (from p in Personnel
     group p by p.CountryId into g
     select new 
     {
         CountryId = g.Key
         PersonnelIds = p.Select(x => x.Id)
     });
var personnelIds = groups.FirstOrDefault(g => g.Key == 100000581); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T23:44:02.657

您是否在 POCO for Personnel 中明确定义了 ForeignKey？在 EF 中省略它是很常见的，但添加它会大大简化此代码和生成的 SQL：

```
public class Personnel
{
    public Country Country { get; set; }

    [ForeignKey("Country")]
    public int CountryId { get; set; }

    . . .
}

> update-database -f -verbose

var ids = db.Personnel.Where(p => p.CountryId == 100000581).Select(p => p.Id).ToArray(); 
```

# android - Holo Everywhere 和滑动菜单

> ID：15690760
> 
> 赞同：-1
> 
> 时间：2013-03-28T19:43:46.673
> 
> 标签：android, android-holo-everywhere, slidingmenu

好吧，我有问题，我只是在互联网上找不到答案，我花了几个小时试图弄清楚如何在应用程序中实现 Holoevrywhere 和滑动菜单库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:19:08.920

导入[SlidingMenu](https://github.com/Prototik/HoloEverywhere)的示例项目以及[HoloEverywhere](https://github.com/jfeinstein10/SlidingMenu)的示例项目。然后将两者结合起来。

您需要一个`git`客户端（例如*Tortoise Git*）来获取源代码的副本。

# opencv - Extracting text from an image with tesseract

> ID：15690770
> 
> 赞同：5
> 
> 时间：2013-03-28T19:44:20.093
> 
> 标签：opencv, image-processing, imagemagick, tesseract

I'm using tesseract to extract text from an image. However, there are some problems I'm running into with certain images:

The text is extracted perfectly fine from the image below:

![enter image description here](../Images/6b9eeafb6f7dff5d3b46bc53fed9dd79.png)

However, the text is not extracted from the image below, note that the square around the text is smaller now

![enter image description here](../Images/1103a704cf116d6608bddfe5e4d62a04.png)

**Questions**

what are some things I can do to the original image to better extract the text from the second image. I am already making the image BW usint imagemagick's `-monochrome` filter.

In the images I do not care about anything but the text. Is there a technique I can use to crop the image and make a new image with nothing but white background and text? I won't always know the coordinates for the square circle so I would need a cropping function that would automatically detect the co-ordinates of white background..

# css - 如何在拖动时禁用光标？

> ID：15690773
> 
> 赞同：0
> 
> 时间：2013-03-28T19:44:29.897
> 
> 标签：css, cursor

*我可以用cursor: none*禁用光标，但是拖动时光标仍然可见（在 mouseDown 时移动光标）。有什么选项可以禁用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:45:51.147

使用`:active`伪类：

```
a:active { cursor:none /* or some other value */; } 
```

文档：[https ://developer.mozilla.org/en-US/docs/CSS/:active](https://developer.mozilla.org/en-US/docs/CSS/:active)

# javascript - 如何将 .editable() 应用于动态添加的元素

> ID：15690780
> 
> 赞同：2
> 
> 时间：2013-03-28T19:44:48.867
> 
> 标签：javascript, jquery

我有一个在 $(document).ready() 上执行这个 javascript 的网页。.editable() 来自[X-Editable javascript 库](http://vitalets.github.com/x-editable/)（就地编辑）。

```
$('tr td:nth-child(2) a').editable(); 
```

我页面上的链接/按钮允许向表中添加行。有没有办法只对 new 执行 editable() 而不是使用与以前相同的选择器并让它再次获取所有匹配项？

```
$('#newCriteria').click(function () {
    var id = 0;

    // load template
    var cTemplate = $('#criteriaTemplate').html();

    // fill template
    var template = cTemplate.format(id, 'New Field');

    // attach editable (doesnt work)
    $('tr td:nth-child(2) a', template).editable();

    // append to table
    $('#criteriaTable').append(template);
}); 
```

如您所见，我想我会尝试将模板 html 作为上下文传递给 jQuery，但由于在我附加它之前它实际上并不是 DOM 的一部分，所以它不起作用。

另一种可能的解决方案是我可以将选择器修改为`'tr:last-child td:nth-child(2) a'`.

我想知道是否有一些为什么要在元素上使用 .on() 来让 jQuery 自动为我添加处理程序。我过去只使用过 .on() 来添加处理程序`.on('click', '...', function() {})`，我不知道它是否可以用于诸如可编辑（）之类的东西。

模板：

```
<script type="text/template" id="criteriaTemplate">
        <tr data-criteriaID='{0}'>
            <td><i class="icon-remove" /></td>
            <td><a href="#">{1}</a></td>
            <td><a href="#" data-value="0">String</a></td>
        </tr>
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T10:53:02.700

x-editable 有一个`selector`选项，因此您可以应用于`.editable`表格标签：

```
$('#table').editable({
  ...
  selector: 'tr td:nth-child(2) a'
}); 
```

# javascript - 用于桌面和移动平台的 Twitter 引导弹出框触发器

> ID：15690781
> 
> 赞同：20
> 
> 时间：2013-03-28T19:45:12.627
> 
> 标签：javascript, css, twitter-bootstrap, popover

默认[弹出框](http://twitter.github.com/bootstrap/javascript.html#popovers)触发选项是单击。但我需要将其更改为悬停。可以这样做：

```
$("#popover").popover({ trigger: "hover" }); 
```

但这对智能手机来说没有意义。用户无法读取悬停触发的弹出框。

对于我网站的“ *div* ”部分，我使用“ [visible-desktop](http://twitter.github.com/bootstrap/scaffolding.html#responsive) ”或“hidden-desktop”。您能否提供一种通过悬停触发弹出窗口的好方法 - 用于桌面触发弹出窗口 - 用于智能手机/平板电脑。（我使用引导程序 2.3.1）

相关： [使引导弹出窗口出现/消失在悬停而不是单击时](https://stackoverflow.com/questions/12343695/make-bootstrap-popover-appear-disappear-on-hover-instead-of-click)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T20:10:23.453

我最好的建议是检测是否有触摸事件。如果是这样（“没有”悬停能力），请使用“单击”...如果不是，请使用“悬停”。尝试这个：

```
var is_touch_device = ("ontouchstart" in window) || window.DocumentTouch && document instanceof DocumentTouch;
$("#popover").popover({
    trigger: is_touch_device ? "click" : "hover"
}); 
```

（触摸检测取自 Modernizr 库）

[使用 JavaScript 检测“触摸屏”设备的最佳方法是什么？](https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript)

[使用 Javascript 检测触摸屏设备](https://stackoverflow.com/questions/3974827/detecting-touch-screen-devices-with-javascript)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-16T16:53:32.637

如果你可以升级到 Bootstrap 3+，你可以使用这个更干净的解决方案：

```
$('[data-toggle="popover"]').popover({trigger: 'hover click'}); 
```

这将适用于悬停在桌面上并单击移动设备。

请参阅： http: [//getbootstrap.com/javascript/#popovers](http://getbootstrap.com/javascript/#popovers) -“您可以传递多个触发器。”

我不确定在使用 Bootstrap 2 之前这是否可行，因为接受的答案是从 2013 年开始的。因此，如果您可以将 Bootstrap 升级到版本 3+，我会以这种方式重构它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-13T18:06:09.730

还应该注意的是，twitter bootstrap 3 popovers 现在一团糟。如果您一次只希望打开一个并且能够单击其他任何位置来关闭它，那么祝您好运 - 我发现这几乎是不可能的。他们的 github 页面上仍然存在错误。

我在我的生产应用程序中实现了[https://github.com/sandywalker/webui-popover](https://github.com/sandywalker/webui-popover)并且效果很好。

编辑（2020 年 4 月）：工具提示/弹出框空间中出现了一个冠军：Tippy.js（[https://atomiks.github.io/tippyjs/](https://atomiks.github.io/tippyjs/)）。没有理由使用其他任何东西。为负责这个精彩库的开发人员干杯！

# java - Java 中的 BlackJack 与 Dealer-Player 相同的牌组

> ID：15690782
> 
> 赞同：1
> 
> 时间：2013-03-28T19:45:17.910
> 
> 标签：java, object, blackjack

我正在用 Java 编写一个程序，它是一款经典的 BlackJack 游戏。

规则是一样的，我们作为玩家和庄家（CPU）在某些规则下进行选择。

我的代码，在下面，制作了 2 个单独的牌组，一个供玩家使用，一个供经销商使用，每个都从不同的牌组抽牌，但我想让它们（玩家和庄家）都从同一个牌组抽牌（ s)。

对我的代码有任何建议/更正吗？

```
import java.util.Random;
import java.util.Scanner;

public class River 
{

    private int CardNumber;

    private int BeginCards;

    private int Decks;

    private int[] PartialSumArray = {4,8,12,16,20,24,28,32,36,52}; 

    private int[] BeginPartialSumArray = {4,8,12,16,20,24,28,32,36,52};

    private int PickedCard;

    private Random randomGenerator = new Random();

    //Constructor without definition
    public River()
    {
        CardNumber = 52;
        BeginCards = 52;
    }

    //Constructor with definition
    public River(int Decks)
    {
        CardNumber = Decks * 52;

        BeginCards = CardNumber;
        this.Decks = Decks; 

        //Initialize partial sum array for many decks of cards
        for (int i=0; i<10; i++)
        {
            PartialSumArray[i] = PartialSumArray[i] * Decks;
            BeginPartialSumArray[i] = PartialSumArray[i] * Decks;
        }
        System.out.println();
    }

    //Create random numbers
    private int computeRandomSteps(int CardNumber)
    {
        //System.out.print("stin random , cardnumber is" + CardNumber);
        int randomSteps = randomGenerator.nextInt(CardNumber-1);
        return randomSteps;
    }

    public int nextCard()
    {

        int steps = computeRandomSteps(CardNumber);
        int position=0;

        for (int i=0; i<CardNumber; i++)
        {
            if (steps<= PartialSumArray[i])
            {
                position = i+1;
                break;
            }
        }

        CardNumber--;
        return position;
    }

    public int start()
    {
        int ShuffleLimit;
        PickedCard = nextCard();
        System.out.println("Picked card is :" + PickedCard);

        int HelpVariable = PickedCard-1;

        for (int i=0; i<10; i++)
        {
            if (i >= HelpVariable)
            {
                PartialSumArray[HelpVariable] = PartialSumArray[i]-1;
                HelpVariable++;
            }
        }

        ShuffleLimit = BeginCards/4; 

        if (CardNumber<ShuffleLimit)
        {
            for (int i=0; i<9; i++)
            {
                BeginPartialSumArray[i] = BeginPartialSumArray[i] * Decks;
            }
        }
        return PickedCard;
    }

    public int ReturnCardNumber()
    {
        System.out.println("return cardnumber is " + CardNumber);
        return CardNumber;
    }

}

class Hand
{

    private int points;
    private int SumPoints=0;
    private boolean Ace = true;

    Scanner input = new Scanner(System.in);
    //Scanner input3 = new Scanner(System.in);

    //int Decks = input3.nextInt();

    River myRiver = new River();
    //River myRiver = new River(Decks);

    public int getPoints()
    {
        points = myRiver.start();
        if (points == 1 && Ace)
        {
            System.out.println("It is an Ace. Do you want to count 1 or 11?");

            points = input.nextInt();
            Ace = false;
        }
        SumPoints += points;
        System.out.println("Points are : " + SumPoints);
        return SumPoints;
    }

    public int getPointsDealer()
    {
        points = myRiver.start();
        if (points == 1 && Ace)
        {
            if (SumPoints + 11 > 21)
            {
                points = 1;
            }
            else
            {
                points = 11;
            }
            Ace = false;
        }
        SumPoints += points;
        System.out.println("Points are : " + SumPoints);
        return SumPoints;
    }
}

class Player
{
    private int points;
    private double account=0;
    private double bet;
    private boolean WinOrLose;

    Scanner input1 = new Scanner(System.in);
    Scanner input2 = new Scanner(System.in);

    public double placeBet()
    {
        System.out.println("How much do you want to bet?");
        bet = input1.nextDouble();

        return bet;
    }

    public double profit(boolean WinOrLose)
    {
        if (WinOrLose)
        {
            account += bet;
            return account;
        }
        else
        {
            account -= bet;
            return account;
        }
    }

    public int play(River other)
    {

        Hand myHand = new Hand();
        bet = placeBet();
        points = myHand.getPoints();
        boolean end = true;
        String Choice;

        while (end)
        {
            System.out.println("Make a choice");
            Choice = input2.nextLine();

            switch(Choice)
            {
            case "DoubleBet":
                bet = bet *2;
                points = myHand.getPoints();

                if (points > 21)
                {
                    System.out.print("Burned!");
                    WinOrLose = false;
                    account = profit(WinOrLose);
                    end = false;
                    break;
                }
                else if (points == 21)
                {
                    System.out.print("You won!");
                    WinOrLose = true;
                    account = profit(WinOrLose);
                    end = false;
                    break;
                }
                else 
                {
                    System.out.println("Your points are :" + points);
                    end = false;
                    break;
                }

            case "stop":
                System.out.println("Your points are :" + points);
                end = false;
                break;

            case "Hit":
                points = myHand.getPoints();
                if (points > 21)
                {
                    System.out.print("Burned!");
                    WinOrLose = false;
                    account = profit(WinOrLose);
                    end = false;
                    break;
                }
                else if (points == 21)
                {
                    System.out.print("You won!");
                    WinOrLose = true;
                    account = profit(WinOrLose);
                    end = false;
                    break;
                }
                break;

            default:
                System.out.println("That is not a choice.");
                end = false;
                break;
            }

        }
        return points;
    }
}

class BlackJack
{

    public static void main(String args[])
    {
        int SumPointsPlayer;
        int SumPointsDealer;
        boolean WinOrLose = true;
        double account;
        int Decks;
        int BeginCards;
        int ThisMomentCards;

        Scanner input1 = new Scanner(System.in);
        Scanner input2 = new Scanner(System.in);

        System.out.println("How many decks do you want to begin with?");
        Decks = input1.nextInt();

        River myRiver = new River(Decks);
        Player myPlayer = new Player();

        //Calculate the cards we have when the game starts
        BeginCards = 52 * Decks;

        System.out.println("Do you want to start the game? Yes or No.");
        String Repeat;

        Repeat = input2.nextLine();

        while (Repeat.equals("Yes"))
        {
            ThisMomentCards = myRiver.ReturnCardNumber();
            System.out.println("Cards are : " + ThisMomentCards);

            //Player's points for 1 round
            SumPointsPlayer = myPlayer.play(myRiver);

            //If player catches 21 he wins instantly
            if(SumPointsPlayer == 21)
            {
                account = myPlayer.profit(WinOrLose);
                System.out.println("Your account has :" + account + "dollars!");
            }
            //If player catches >21 he loses instantly
            else if(SumPointsPlayer > 21)
            {
                WinOrLose = false;
                account = myPlayer.profit(WinOrLose);
                System.out.println("Your account has :" + account + "dollars!");
            }
            //Compare the hand of player and dealer and the bigger wins
            else
            {
                //Dealer's points for 1 round
                SumPointsDealer = playDealer(myRiver);

                //If dealer catches >21 he loses instantly
                if(SumPointsDealer>21)
                {
                    System.out.println("Player wins!");
                    account = myPlayer.profit(WinOrLose);
                    System.out.println("Your account has :" + account + "dollars!");
                }
                //Hand of player bigger than the hand of the dealer , player wins
                else if (SumPointsPlayer>SumPointsDealer)
                {
                    WinOrLose = true;
                    account = myPlayer.profit(WinOrLose);
                    System.out.println("Player wins. Your account has :" + account + "dollars!");

                }
                //Hand of player smaller than the hand of the dealer , dealer wins
                else if (SumPointsPlayer<SumPointsDealer)
                {
                    WinOrLose = false;
                    account = myPlayer.profit(WinOrLose);
                    System.out.println("Player lost. Your account has :" + account + "dollars!");
                }
                //Hand of player is equal with the hand of the dealer , it is tie
                else
                {
                    System.out.println("Player and Dealer are tie!!");
                }
            }
            System.out.println("Do you want to continue the game? Yes or No.");
            Repeat = input2.nextLine();
        }

    }

    public static int playDealer(River other)
    {
        boolean bountry = true;

        System.out.println("Dealer plays :");

        Hand myHand = new Hand();
        int SumPointsDealer = myHand.getPointsDealer();

        while (bountry)
        {
            if (SumPointsDealer<17)
            {
                SumPointsDealer = myHand.getPointsDealer();
            }
            else if (SumPointsDealer>21)
            {
                System.out.println("Dealer burned!");
                bountry = false;
            }
            else
            {
                bountry = false;
            }
        }
        return SumPointsDealer;
    }
} 
```

一些说明：

1）我们随机抽牌的方式是基于一种奇怪的方式，但这不是问题，它可以程序的方式确实从甲板上随机抽牌

2) 我注意到的另一个问题是，在 Hand 类中，我在 // 中的代码不起作用，因为它不允许我拥有 System.out.println()

```
Scanner input = new Scanner(System.in);
    //Scanner input3 = new Scanner(System.in);

    //int Decks = input3.nextInt();

    River myRiver = new River();
    //River myRiver = new River(Decks); 
```

我想这样做是为了说明用户想玩多少套牌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T15:46:06.733

你可以做得更好更容易的代码是面向对象的。即 Collections.shuffle(Deck) 替换了整个随机难题，其中 Deck 是您创建的由 LinkedList 和 counter[deck value] 等属性组成的对象，希望对您有所帮助。

从主卡组的链表中删除对象卡并将其移动到玩家的卡组中。是的，您可以通过这种方式创建任意数量的套牌。

对象卡具有属性值和花色。

# jquery - jQuery Mobile 中的自提交表单

> ID：15690783
> 
> 赞同：0
> 
> 时间：2013-03-28T19:45:19.570
> 
> 标签：jquery, ajax, html, forms, jquery-mobile

我想知道在我的网络应用程序中将表单“提交”到另一个页面的最佳方式。我目前有一个表格，用户填写他/她的信息，然后在“提交”时加载一个新页面，其中包含他们的所有数据，以便他们可以查看它。然后用户可以返回表单进行编辑或接受数据并继续。

目前，我将表单设置为 POST 到“下一页”。我正在使用 jQuery mobile，所以这一切都在一个 HTML 文件中，并且“页面”只是正在显示和隐藏的 DIV。我拦截“提交”事件并进行处理，然后返回 false。这行得通，但有时会让人觉得有问题。

是否可以 POST 到另一个 jQuery 移动“页面”并拦截传入的数据，而不必在提交事件上返回 false？还有另一种我什至没有意识到的方法吗？

我应该注意到，应用程序的一个要求是不允许在设备上存储任何数据（没有 Cookie、LocalStorage、SessionStorage 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:01:33.983

您可以为此使用 localStorage。当用户提交表单时，使用 javascript 获取所有数据并将它们存储在 localStorage 中，以便您可以在任何页面中毫无问题地重复使用它们。

# asp.net - 如何将事件处理程序添加到 asp.net 中的动态控件以进行回发？除了使用Javascript，还有可能吗？

> ID：15690784
> 
> 赞同：2
> 
> 时间：2013-03-28T19:45:19.987
> 
> 标签：asp.net, event-handling

如何将事件处理程序添加到 asp.net 中的动态控件（按钮）以进行回发？除了使用Javascript，还有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:55:35.020

是的，这是可能的。

因此，例如，`Page_Load`您可以在您的中创建按钮。

本例使用VB

这必须在回发时重新创建，所以不要将它包装在`If (Not isPostBack)`- 否则它将不起作用

```
Dim btn As Button = New Button() With {.Text = "Click Me", .ID = "MyId"}
AddHandler btn.Click, AddressOf MyBtnClick ' This is the method to call 
```

然后你在这里处理点击：

```
Private Sub MyBtnClick(ByVal sender As Object, ByVal e As EventArgs)
    Dim btn As Button = CType(sender, Button) ' Gets the button that fired the method
    ' Do your code here
End Sub 
```

这在 C# 中也是一样的

```
Button btn = new Button {Text = "Click Me",ID = "MyId"};
btn.Click += new EventHanlder(MyBtnClick); 
```

并且方法被调用

```
private void MyBtnClick(object sender, EventArgs e)
{
    Button btn = (Button)sender; // Gets the button that fired the method
    // Do your code here
} 
```

# jasper-reports - 如何在一个文本字段中显示多个字段值

> ID：15690785
> 
> 赞同：8
> 
> 时间：2013-03-28T19:45:24.817
> 
> 标签：jasper-reports

可以帮助在一个字段中添加多个数据库字段值。

假设我有 3 个数据库字段：

```
Name
Address
Age 
```

我想在同一字段中显示所有 3 个字段：

```
John Peter 28. 
```

我试着做 3 个字段并排，它确实有效，但是当我换行时。看起来真的很糟糕：

**姓名**

```
Jo.pe.28
hn te
   r 
```

我的要求是在一个文本字段中显示数据，例如：**John.Peter.26**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T20:26:32.347

如果您想将它们放在一行中（我猜是这种情况），那就直截了当。

把它作为一个文本框`$F{Name} + "." + $F{Address} + "." + $F{Age}.toString()`

或者你可以使用字符串连接（我个人不喜欢这种语法，花更多的精力去理解）`$F{Name}.concat(".").concat($F{Address}).concat(".").concat($F{Age})`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T13:17:00.627

# SQL 方法

为什么不将您使用的查询中需要的所有 3 个字段连接起来，例如（假设您使用`Postgres`.），

```
select (name || address|| to_char(age)) as data from my_table 
```

# 在报告中

正如建议的那样，

```
$F{Name} + "." + $F{Address} + "." + $F{Age}.toString() 
```

如果需要使它从报告中工作，也可以工作。

确保所有字段都具有相同的数据类型。

# .net - 如何在 Visual C++ 中的单击事件处理程序中发送超过 2 个参数（委托 => 事情不起作用）

> ID：15690786
> 
> 赞同：0
> 
> 时间：2013-03-28T19:45:27.537
> 
> 标签：.net, winforms, visual-c++, delegates, c++-cli

这就是我现在正在做的事情！！！

```
//picture box
pct->Click += gcnew EventHandler(this,&fornow::Form1::Display);

private: System::Void Display(System::Object^ sender, System::EventArgs^ e){
    PictureBox^ pb = safe_cast<PictureBox^>(sender);
    pictureBox1->Image = pb->Image;
} 
```

显然我不能在 C++/Cli 中使用委托，我对这种编码很陌生！所以谁能告诉我点击后如何向事件处理程序方法发送更多参数，以便我可以在那里的代码中使用它！

就像我有一个 System::String 一样，如果我可以这样发送它，我可以写

```
private: System::Void Display(System::Object^ sender, System::EventArgs^ e, System::String^  s){
    Mat img = imread(s);
    imshow("",img);  
    waitKey(0);
} 
```

我用 /clr 编译它，我使用试用版 vs 2010 Visual C++。

此代码驻留在 buttonclick 事件处理程序中...我添加了该部分代码...

```
private: System::Void button1_Click(System::Object^ sender, System::EventArgs^ e) {
    // array<System::String^>^ files = 
    //     System::IO::Directory::GetFiles(textBox1->Text,"*.*",
    //     System::IO::SearchOption::AllDirectories);

    pin_ptr<const wchar_t> wch = PtrToStringChars(textBox1->Text);
    wchar_t wch1[260];
    wcscpy(wch1,wch);
    list<basic_string<wchar_t>> dir;
    list<string> s;
    retrieve *r = new retrieve();

    dir = r->print(wch1,dir);

    for(list<basic_string<wchar_t>>::iterator itr = dir.begin(); itr != dir.end();itr++)
    {
        cout<<std::string(itr->begin(),itr->end())<<endl;
        s.push_back(std::string(itr->begin(),itr->end()));
    }

    filter *f = new filter();  
    s=f->filter1(s); // fills s with paths (strings)
    flowLayoutPanel1->Controls->Clear();

    for(list<string>::iterator i=s.begin();i!=s.end();i++)
    {
        std::string sn = std::string(i->begin(),i->end());
        System::String^ s = gcnew System::String(sn.c_str());

        PictureBox^ pct = gcnew PictureBox();
        if(checkBox1->Checked==true)
            pct->Image = Image::FromFile(s)->GetThumbnailImage(50,50,nullptr,System::IntPtr::Zero);
        if(checkBox1->Checked==false)
            pct->Image = Image::FromFile(s);

        pct->Size = System::Drawing::Size(100,100);
        flowLayoutPanel1->Controls->Add(pct);
        pct->Click += gcnew EventHandler(this,&fornow::Form1::Display);
        Mat img = imread(sn);
        imshow(sn,img);
        waitKey(0);
    } 
```

对不起，我对这种编码真的很陌生..任何建议都会有所帮助，谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:17:28.650

将参数打包到从 EventArgs 派生的 ref 类中，然后您可以像这样使用 EventHandler 的通用版本

```
public ref class MyEventArgs:EventArgs
{
public:
    property String^ Parameter1;
}

public ref class MyClass
{
public:
    event EventHandler<MyEventArgs^> ^ MyEvent;
    void RaiseMyEvent(Object^ sender, String^ parameter1)
    {           
        MyEventArgs^ args=gcnew MyEventArgs();
        args->Parameter1=parameter1;
        MyEvent(sender, args);
    }
}; 
```

您的事件处理程序方法将具有签名

```
void MyEventHandler(Object^ sender, MyEventArgs^ args) 
```

并可以通过 args 参数的属性访问传递给 RaiseMyEvent 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:01:33.437

您不能向点击事件添加其他参数。如果可以，您希望 UI 从哪里获取字符串？

鉴于您对 lambdas 的评论，我认为您正在寻找的是有一个稍微不同的事件处理程序，具体取决于单击的图片。那是对的吗？在 C# 中是这样的：

```
// If you were writing C#, is this what you'd do?
pct1.Click += (s,e) => imshow(imread("one.jpg"));
pct2.Click += (s,e) => imshow(imread("two.jpg")); 
```

在 C++/CLI 中没有严格的等价物。但是，如果您考虑 lambdas 在做什么，您可以在 C++/CLI 中执行此操作。lambda 被转换为同一类的常规方法，您可以在 C++/CLI 中执行此操作。

```
pct1->Click += gcnew EventHandler(this,&fornow::Form1::Display1);
pct2->Click += gcnew EventHandler(this,&fornow::Form1::Display2);

void Display1(Object^ sender, EventArgs^ e)
{
    Display(safe_cast<PictureBox^>(sender), "one.jpg");
}

void Display2(Object^ sender, EventArgs^ e)
{
    Display(safe_cast<PictureBox^>(sender), "two.jpg");
}

void Display(PictureBox^ pb, String^ file)
    Mat img = imread(file);
    imshow(pb, img);  
    waitKey(0);
} 
```

或者，您可以有一个事件处理程序，它查看点击了哪张图片（发送者）来完成它的工作。

```
pct1->Click += gcnew EventHandler(this,&fornow::Form1::Display);
pct2->Click += gcnew EventHandler(this,&fornow::Form1::Display);

void Display(Object^ sender, EventArgs^ e)
{
    PictureBox^ pb = safe_cast<PictureBox^>(sender)
    String^ file;

    if(pb == this->pct1) file = "one.jpg";
    else if(pb == this->pct2) file = "two.jpg";
    else return;

    Mat img = imread(file);
    imshow(pb, img);  
    waitKey(0);
} 
```

# nsdatecomponents - 使用 NSDateComponents 计算下个月的日期/第 n 周序数/从今天开始的第 n 个工作日

> ID：15690789
> 
> 赞同：1
> 
> 时间：2013-03-28T19:45:32.240
> 
> 标签：nsdatecomponents

我正在尝试从今天的日期计算日期。我想要的日期是下个月，从今天开始的第 n 周序号和第 n 个工作日。我正在使用下面的代码来做到这一点。下面代码的结果是错误的。如果假设今天是 2013 年 3 月 28 日，我正在寻找下个月第三个星期六的日期，那么..我期待看到 2013 年 4 月 20 日。相反，我看到了 2013 年 4 月 23 日。我无法调试问题。请让我知道我做错了什么。感谢帮助。

```
NSDate *todayDate = [[NSDate alloc] init]

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [gregorian components:(NSYearCalendarUnit |   NSMonthCalendarUnit |NSDayCalendarUnit| NSWeekCalendarUnit | NSWeekdayOrdinalCalendarUnit | NSWeekdayCalendarUnit | NSWeekOfYearCalendarUnit ) fromDate:todayDate];

NSUInteger todayWeekdayValue = [dateComponents weekday];   
NSUInteger todayWeekdayOrdinal = [dateComponents weekdayOrdinal];

// recurringWeekday  / recurringMonthDay get passed on  from calling function 

NSUInteger nextWeekdayValue = [self getWeekdayValueForWeekdayName:recurringWeekday];
NSUInteger nextWeekdayOrdinal = recurringMonthDay;

[dateComponentsToAdd setMonth:1];
[dateComponentsToAdd setWeekday:nextWeekdayValue - todayWeekdayValue];
[dateComponentsToAdd setWeekdayOrdinal:nextWeekdayOrdinal - todayWeekdayOrdinal];

 NSDate *nextDate = [gregorian dateByAddingComponents:dateComponentsToAdd toDate:todayDate options:0]; 
```

# c++ - 在 CUDA 中选择性地编译头文件和类函数

> ID：15690790
> 
> 赞同：2
> 
> 时间：2013-03-28T19:45:38.413
> 
> 标签：c++, cuda, linker, nvcc

我正在尝试在 CUDA 中使用我的 c++ 类。

我有这样的课程：

```
#include<string>
#include<stdlib.h>

class exampleClass{
int i;
__host__ __device__ exampleClass(int _i):i(_i){};
__host__ __device__ void increment(){i++;}
__host__ __device__ string outputMessage(return itoa(i);}

}; 
```

我已将其设置在 .cu 文件中并设置为编译 CUDA c/c++

这无法使用 nvcc 编译，因为 cuda 没有字符串。

我想做的是通过执行以下操作保留仅 CUDA 的功能：

```
#ifndef __CUDA_ARCH__
  #include<string>
#endif
    #include<stdlib.h>

    class exampleClass{
    int i;
    __host__ __device__ exampleClass(int _i):i(_i){};
    __host__ __device__ void increment(){i++;}
#ifndef __CUDA_ARCH__
     string outputMessage(return itoa(i);}
#endif

    }; 
```

但我知道这不起作用……至少，它对我不起作用。nvcc 不喜欢包含字符串，也不喜欢需要字符串类型的函数。

如果示例不是一流的，请道歉。总之，我想做的是让核心类成员在 CUDA 上可执行，同时保持在主机端进行花哨的主机操作以进行分析和输出的能力。

更新：我的最终目标是拥有一个基类，其中包含几个指向多个多态类的指针类型。这个基类本身将是可派生的。我认为这在 CUDA5.0 中是可能的。我弄错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:16:30.290

以下代码构建，虽然我没有运行它：

```
class exampleClass{
int i;
public:
__host__ __device__ exampleClass(int _i):i(_i){};
__host__ __device__ void increment(){i++;}

 __host__ string outputMessage(){ return "asdf";}

};

__global__ void testkernel (                        
    exampleClass *a,
    int IH, int IW)
{
    const int i = IMUL(blockIdx.x, blockDim.x) + threadIdx.x;
    const int j = IMUL(blockIdx.y, blockDim.y) + threadIdx.y;

    if (i<IW && j<IH) 
    {
        const int i_idx = i + IMUL(j, IW);  
        exampleClass* ptr = a+i_idx;
        ptr->increment();
    }
}

__host__ void test_function(exampleClass *a,
    int IH, int IW)
{
    for (int i = 0; i < IW; i++)
        for (int j = 0; j < IH; j++)
        {
            const int i_idx = i + j*IW;
            exampleClass* ptr = a+i_idx;
            cout << ptr->outputMessage();
        }
} 
```

请注意，您必须将类从设备移动到主机内存才能正常“工作”。如果您尝试对类做任何花哨的事情（例如多态性），这可能会失败。

# jpa - 如何使用 CritieraQuery 获取 interesect 查询？

> ID：15690791
> 
> 赞同：2
> 
> 时间：2013-03-28T19:45:43.333
> 
> 标签：jpa, criteria-api, intersect, set-intersection, criteriaquery

给定

```
 @Entity
 public class Document {

    @Id
    @Column(name = "DOCUMENT_ID")
    private Long id;

    @ElementCollection
    @CollectionTable(
       name="TAG",
       joinColumns=@JoinColumn(name="DOCUMENT_ID")
    )
    @Column(name="TAG")
    private Set<String> tags;    
 } 
```

查找使用特定标签集合标记的所有文档。本质上，EclipseLink 相当于：

```
SELECT d FROM Document d WHERE :tag1 MEMBER OF d.tags
INTERSECT
SELECT d FROM Document d WHERE :tag2 MEMBER OF d.tags
...
SELECT d FROM Document d WHERE :tagn MEMBER OF d.tags 
```

但使用 JPA CritieraQuery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:45:43.333

使用带有 having 子句的聚合查询来选择与所有必需标签匹配的行：

```
 CriteriaBuilder cb = entityManager().getCriteriaBuilder();
    CriteriaQuery<Long> q = cb.createQuery(Long.class);
    Root<Document> from = q.from(Document.class);
    List<Predicate> predicates = new ArrayList<Predicate>();
    Expression<Long> id = from.get("id");

    Expression<Collection<String>> documentTags = from.get("tags");
    for (String tag : searchedTags) {
        Expression<String> param = cb.literal(tag);
        Predicate predicate = cb.isMember(param, documentTags);
        predicates.add(predicate);
    }

    q.multiselect(id).where(
            cb.or(predicates.toArray(new Predicate[0])));
    q.distinct(true);
    q.groupBy(id);

    q.having(cb.equal(cb.count(id), searchedTags.size()));

    TypedQuery<Long> query = entityManager().createQuery(q); 
```

# python - 在 Python 中从文本文件中获取属性

> ID：15690795
> 
> 赞同：1
> 
> 时间：2013-03-28T19:45:51.400
> 
> 标签：python, text, python-2.7, python-3.x

所以我正在制作一个 Yu-Gi-Oh 数据库程序。我将所有信息都存储在一个大文本文件中。每个怪物都按以下方式分类：

```
|Name|NUM 1|DESC 1|TYPE|LOCATION|STARS|ATK|DEF|DESCRIPTION 
```

这是一个实际的例子：

```
|A Feather of the Phoenix|37;29;18|FET;YSDS;CP03|Spell Card}Spell||||Discard 1 card. Select from your Graveyard and return it to the top of your Deck.| 
```

所以我制作了一个程序，按名称搜索这个大文本文件，它从文本文件中返回不带“|”的信息。这里是：

```
 with open('TEXT.txt') as fd:
         input=[x.strip('|').split('|') for x in fd.readlines()]
         to_search={x[0]:x for x in input}
         print('\n'.join(to_search[name])) 
```

现在我正在尝试编辑我的程序，以便可以搜索怪物的名称并选择要显示的属性。所以它看起来像

```
A Feather of the Phoenix 
Description:
Discard 1 card. Select from your Graveyard and return it to the top of your Deck. 
```

关于我如何做到这一点的任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:54:14.647

首先，这是 CSV 的变体方言，可以使用[`csv`](http://docs.python.org/3/library/csv.html)模块解析，而不是尝试手动解析。例如：

```
with open('TEXT.txt') as fd:
    rows = csv.reader(fd, delimiter='|')
    to_search = {row[1]:row for row in rows}
    print('\n'.join(to_search[name])) 
```

您可能还喜欢使用`DictReader`，因此每一行都是一个`dict`（键入标题行中的名称，或者如果您没有手动指定的列名）：

```
with open('TEXT.txt') as fd:
    rows = csv.DictReader(fd, delimiter='|')
    to_search = {row['Name']:row for row in rows}
    print('\n'.join(to_search[name])) 
```

然后，选择特定属性：

```
with open('TEXT.txt') as fd:
    rows = csv.DictReader(fd, delimiter='|')
    to_search = {row['Name']:row for row in rows}
    print(to_search[name][attribute]) 
```

但是……我不确定这是不是一个好的设计。您真的要为每次查找重新读取整个文件吗？我认为将它读入内存一次更有意义，读入一个可以重复使用的通用结构。事实上，你几乎得到了这样的结构：

```
with open('TEXT.txt') as fd:
    monsters = list(csv.DictReader(fd, delimiter='|'))
monsters_by_name = {monster['Name']: monster for monster in monsters} 
```

然后，如果需要，您可以构建额外的索引，例如按位置划分怪物的多地图等。

* * *

话虽如此，您的原始代码几乎可以处理您想要的。`to_search[name]`是一个`list`。如果您只是构建从属性名称到索引的映射，您可以这样做：

```
attributes = ['Name', 'NUM 1', 'DESC 1', 'TYPE', 'LOCATION', 'STARS', 'ATK', 'DEF', 'DESCRIPTION']
attributes_by_name = {value: idx for idx, value in enumerate(attributes)}
# ...
with open('TEXT.txt') as fd:
     input=[x.strip('|').split('|') for x in fd.readlines()]
     to_search={x[0]:x for x in input}
     attribute_index = attributes_by_name[attributes]
     print(to_search[name][attribute_index]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:53:57.740

你可以看看中的`namedtuple`类`collections`。您将希望`namedtuple`使用您的字段作为属性来制作每个条目。namedtuple 可能看起来像：

```
Card = namedtuple('Card', 'name, number, description, whatever_else') 
```

如集合文档中所示，namedtuple 和 csv 可以很好地协同工作：

```
import csv
for card in map(Card._make, csv.reader(open("cards", "rb"))):
    print card.name, card.description # format however you want here 
```

搜索的机制可能非常复杂。例如，如果您想要围绕完全匹配构建非常快速的搜索，您可以为您感兴趣的每个属性构建一个字典：

```
name_map = {card.name: card for card in all_cards}
search_result = name_map[name_you_searched_for] 
```

您也可以进行`startswith`搜索：

```
possibles = [card for card in all_cards if card.name.startswith(search_string)]
# here you need to decide what to do with these possibles, in this example, I'm just snagging the first one, and I'm not handling the possibility that you don't find one, you should.
search_result = possibles[0] 
```

我建议不要尝试搜索文件本身。这是一种极其复杂的搜索，通常由数据库系统来实现这种功能。如果您需要这样做，请考虑将应用程序切换到 sqlite 或其他轻量级数据库。

# android - 跟踪对 onActivityResult 的调用的工具

> ID：15690796
> 
> 赞同：1
> 
> 时间：2013-03-28T19:45:52.550
> 
> 标签：android, logging, android-activity, stack-trace

存在哪些工具（日志文件、跟踪等）来调试对 onActivityResult 的调用？Android文档说

> **onActivityResult**在您启动的活动退出时调用，为您提供启动它的 requestCode、它返回的 resultCode 以及来自它的任何其他数据。如果活动明确返回、未返回任何结果或在操作期间崩溃，则 resultCode 将为 RESULT_CANCELED。*

我正在尝试调试一个显然没有满足这些条件的情况 - 立即调用 onActivityResult 而没有涉及目标活动（根据我在其中设置的断点）。堆栈跟踪如下所示：

```
DGraphActivity.onActivityResult(int, int, Intent) line: 107 
DGraphActivity(Activity).dispatchActivityResult(String, int, int, Intent) line: 3908    
ActivityThread.deliverResults(ActivityThread$ActivityClientRecord, List) line: 2532 
ActivityThread.handleSendResult(ActivityThread$ResultData) line: 2578   
ActivityThread.access$2000(ActivityThread, ActivityThread$ResultData) line: 117 
ActivityThread$ResultData(ActivityThread$H).handleMessage(Message) line: 965    
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 130 
ActivityThread.main(String[]) line: 3687    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 842  
ZygoteInit.main(String[]) line: 600 
NativeStart.main(String[]) line: not available [native method] 
```

目标 Activity 称为 AddCommentActivity，如您所见，堆栈跟踪中没有引用它。AddCommentActivity 确实在 onActivityResult 之后被调用。

注意这不是我的另一个问题[onActivityResult 被立即调用](https://stackoverflow.com/questions/15687322/onactivityresult-being-called-instantly)的副本 那是要求针对特定问题的解决方案或解决方法。这个是询问一般此类问题的工具和策略。

# linux - 在 Web 浏览器中将 URL 作为 HTTP POST 请求（不仅仅是 GET）打开的脚本

> ID：15690802
> 
> 赞同：1
> 
> 时间：2013-03-28T19:46:02.990
> 
> 标签：linux, windows, macos, http, shell

如何从命令行脚本打开 URL 作为对 URL 的 POST 请求？我想在 Linux、Windows 和 MacOS 上执行此操作，因此这是一种跨平台的执行方式

对于其中的每一个，我都可以使用以下方法打开对 URL 的 GET 请求：

*   `xdg-open [url]`- Linux
*   `start [url]`- 窗户
*   `open [url]`- 苹果系统

...但我看不到执行 POST 请求的方法。有可能吗，如果可以，怎么办？

此外，展示如何将 POST 正文添加到请求中也将不胜感激。仅供参考，我正在编写的脚本是用 Ruby 编写的，因此操作系统内置的任何东西或使用 Ruby 的东西也可以。

### 更新：

为了澄清我希望在默认浏览器中打开它，而不仅仅是发出 POST 请求并获得结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:52:12.943

如果您使用 ruby​​，您可以使用该`NET::HTTP`库：[http ://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html](http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html)

```
require 'net/http'
uri = URI('http://www.example.com/search.cgi')
res = Net::HTTP.post_form(uri, 'q' => 'ruby', 'max' => '50')
puts res.body 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:58:02.657

抱歉，没有可靠的方法可以跨浏览器和跨操作系统执行此操作。这是我们在 IE8 中构建加速器时 IE 团队花费大量时间研究的主题。

最接近的方法是将具有自动提交表单（或 XmlHttpRequest）的 HTML 页面写入磁盘，然后调用浏览器加载将提交表单的页面。这将您的代码限制为仅提交可以从浏览器提交的合法表单（例如，仅可能的内容类型等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-06T09:11:51.520

我不知道我的解决方案在浏览器和平台之间的兼容性如何。

但是，您可以使用数据 URL 中的自动提交表单对该 html 进行编码，而不是使用 @EricLaw 描述的临时文件
，就像我在这里所做的那样：

[https://superuser.com/questions/1281950/open-chrome-with-method-post-body-data-on-specific-url/1631277#1631277](https://superuser.com/questions/1281950/open-chrome-with-method-post-body-data-on-specific-url/1631277#1631277)

# php - Apache重定向问题

> ID：15690806
> 
> 赞同：0
> 
> 时间：2013-03-28T19:46:17.050
> 
> 标签：php, url-rewriting

我在 localhost 中有一个使用缩短 URL 的站点

`http://localhost/Portal/mysite/profile.php?id=1`

到

`http://localhost/Portal/mysite/profile/1/this_is_id`

使用`.htaccess`下面的

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On

RewriteBase /

RewriteRule ^profile/([0-9]+)/.*$  /Portal/mysite/profile.php?id=$1 [QSA,L,NC] 
```

但是，我需要将 URL 改为`http://localhost/Portal/mysite/this_is_id`

这都在 localhost 中，这就是为什么`.com`没有出现，但是站点文件是`mysite` 所以，我尝试发送一个在我的`mysite/index.php`to`mysite/profile.php`中的链接，`$id`但它不起作用。无论如何简单的建议就可以了，谢谢

**更新**

* * *

好的，我按照你们俩的要求做了，但这是将用户从索引页面发送到个人资料页面的功能，我不知道如何修改它，即使我已经按照你们俩的要求做了。

```
 // sql query goes here. 
    foreach ($stmt as $row) {
    $url = "/profile/$row[id]/".preg_replace('/[^a-zA-Z0-9-_]/', '-', $row['company']);  

        echo "<h4><a href=\"$url\" class=\"urln\">". substr($row['company'], 0,26)."</a></h4>
                    ";

    } 
```

回声是链接，现在当我按下该链接时，它会带我到未找到的页面

**更新 2**

* * *

![在此处输入图像描述](../Images/bb74ab4773b7a365865f5d0c3d163397.png) 这是我的目录的图像，链接在 index.php 中，当点击它时，它会将我发送到 profile.php 所有上述文件都位于`WAMP/www/Portal/mysite`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:22:43.600

试试这个：

```
#for subdirectory
RewriteBase /Portal/mysite/
#for localhost
#RewriteBase /
#RewriteRule ^profile/([0-9]+)$ profile.php?id=$1 [QSA,L,NC]
#RewriteRule ^profile/([0-9]+)/([a-zA-Z0-9\-]+)$ profile.php?id=$1 [QSA,L,NC]
RewriteRule ^profile/([a-zA-Z0-9\-]+)$ profile.php?id=$1 [QSA,L,NC] 
```

`.htaccess`并`profile.php`在`Portal/Site`目录中。

更新：

```
foreach ($stmt as $row) {
    $url = "/profile/".preg_replace('/[^a-zA-Z0-9-_]/', '-', $row['company']) . "-" . $row[id];
    echo "<h4><a href=\"$url\" class=\"urln\">". substr($row['company'], 0,26)."</a></h4>";

} 
```

`profile.php`

```
var_dump($_GET);

if(isset($_GET['id'])) {
    $params = explode('-', $_GET['id']);
    $id = (int)array_pop($params);

    var_dump($id);
} 
```

`.htaccess`

```
RewriteEngine On
RewriteBase /Portal/mysite/
RewriteRule ^profile/([a-zA-Z0-9\-]+)$ profile.php?id=$1 [QSA,L,NC] 
```

运行您的链接（ fe: `localhost/Portal/mysite/profile/This-is-name-12`）并结果：

```
array (size=1) 'id' => string 'This-is-name-12' (length=15)

int 12 
```

`12`是您的个人资料 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:54:10.123

尝试：

```
RewriteRule ^([0-9]+)$  profile.php?id=$1 [QSA,L,NC] 
```

如果规则 ( `.htaccess`) 在您的`/Portal/mysite/`目录中，并且`profile.php`也在那里。

# php - 如何使用 JavaScript 访问 PDF 中的图像？

> ID：15690809
> 
> 赞同：1
> 
> 时间：2013-03-28T19:46:40.047
> 
> 标签：php, javascript, pdf, acrobat, pdflib

[我使用 $p->load_image ( http://www.php.net/manual/en/function.pdf-fit-image.php](http://www.php.net/manual/en/function.pdf-fit-image.php) )将图像添加到 PDF 中。现在，我想在其中编写 JavaScript，以便用户可以操作 PDF 中的图像。如何使用 Javascript 访问 PDF 格式的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:04:50.703

使用 PdfLib，将以下选项添加到 load_image 调用：

"iconname=HelloImage" 其中 HelloImage 是图像的名称。完整的电话是，

$p->load_image('jpeg', 'C:/hello.jpg', "iconname=HelloImage");

在 Javascript 代码中，您可以访问它。例如，

var hello_image = this.getIcon("HelloImage");

现在 hello_image 指向 HelloImage。

# java - 为什么这个数组不接受用户输入？

> ID：15690810
> 
> 赞同：0
> 
> 时间：2013-03-28T19:46:47.123
> 
> 标签：java, arrays

这是更大任务的一部分。在这里，我基本上需要接受用户输入，直到用户键入 0。这些双精度值需要添加到数组中。出于某种原因，它们现在没有被添加到数组中。有什么帮助吗？

```
public static void main(String[] args){
    Scanner scanner = new Scanner(System.in);
    double[] inputArray = new double[3];
    double input;
    do{
        input = scanner.nextDouble();

    for(int i = 0; i < 3; i++){
        inputArray[i] = input;
    }
    }
    while(input != 0);

    System.out.println("Element 0:" + inputArray[0]);
    System.out.println("Element 1:" + inputArray[1]);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:49:16.193

您一直在迭代，直到`input`为 0... 所以在循环终止之前的最后一次迭代中，我们知道`input` *它将*为 0。

现在看看你在`while`循环中做了什么：

```
for(int i = 0; i < 3; i++){
    inputArray[i] = input;
} 
```

您正在用当前值替换数组中的*所有*`input`元素。

因此，当您退出循环时，您刚刚将所有元素替换为 0。

`List<Double>`将 a与合适的实现（例如`ArrayList<Double>`）一起使用并`list.add(input)`在`while`循环内调用会好得多。

然后打印出列表的每个元素：

```
for (Double value : list) {
    System.out.println(value);
} 
```

或者，如果您真的想要索引：

```
for (int i = 0; list.size(); i++) {
    System.out.println("Element " + i + ": " + list.get(i));
} 
```

如果你*必须*使用一个数组，你应该跟踪你已经设置了多少项目（在`while`循环中增加一个计数器），并且只为循环的每次迭代在数组中设置*一个值。*如果数组空间不足，也不要忘记终止循环！

# c# - Windows 8 应用商店应用认证 - 快照视图

> ID：15690815
> 
> 赞同：0
> 
> 时间：2013-03-28T19:47:00.840
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-store

在 Windows 8 应用商店应用认证要求中，它声明您的应用必须支持快照视图。有谁知道是否可以创建一个在应用程序中持续存在的单个快照视图？例如，在我的主视图中，我有 4 个按钮可将您带到应用程序的不同部分，而其他视图中不存在这些按钮。设计团队要求我做的是使用四个按钮和一些描述应用程序的默认文本创建一个快照视图，他们希望这是每个页面的快照视图。

1.  那可能吗？
2.  Windows 会接受吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:39:40.810

1.  是的，有可能
2.  是的，它会。我见过几个应用程序这样做，包括至少一个第一方应用程序。商店本身显示静态图像以进行快照视图。

# php - 字符串作为数组

> ID：15690819
> 
> 赞同：4
> 
> 时间：2013-03-28T19:47:12.377
> 
> 标签：php, arrays, string, syntax

在 PHP 中，以下是有效的：

```
$n='abc';
echo $n[1]; 
```

但似乎以下`'abc'[1];`不是。

它的解析器有什么问题吗？

不幸的是，目前甚至`$n[1]`语法也没有那么有用 ◕︵◕ ，因为它不支持 Unicode 并且返回字节而不是字母。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T19:49:04.423

`echo 'abc'[1];`仅在`PHP 5.5` [查看完整 RFC](https://wiki.php.net/rfc/constdereference)`$n[1] or $n{2}`中[有效](http://3v4l.org/E15k8)， 但在所有版本中均有效`PHP`

[见现场测试](http://3v4l.org/Wrg2J)

> 不幸的是，目前甚至`$n[1]`语法也没有那么有用 ◕︵◕ ，因为它不支持 Unicode 并且返回字节而不是字母。

为什么不创建你的？例子 ：

```
$str = "Büyük";
echo $str[1], PHP_EOL;

$s = new StringArray($str);
echo $s[1], PHP_EOL;

// or

echo new StringArray($str, 1, 1), PHP_EOL; 
```

输出

```
�
ü
ü 
```

使用类

```
class StringArray implements ArrayAccess {
    private $slice = array();

    public function __construct($str, $start = null, $length = null) {
        $this->slice = preg_split("//u", $str, - 1, PREG_SPLIT_NO_EMPTY);
        $this->slice = array_slice($this->slice, (int) $start, (int) $length ?  : count($this->slice));
    }

    public function slice($start = null, $length = null) {
        $this->slice = array_slice($this->string, (int) $start, (int) $length);
        return $this ;
    }

    public function offsetSet($offset, $value) {
        if (is_null($offset)) {
            $this->slice[] = $value;
        } else {
            $this->slice[$offset] = $value;
        }
    }

    public function offsetExists($offset) {
        return isset($this->slice[$offset]);
    }

    public function offsetUnset($offset) {
        unset($this->slice[$offset]);
    }

    public function offsetGet($offset) {
        return isset($this->slice[$offset]) ? $this->slice[$offset] : null;
    }

    function __toString() {
        return implode($this->slice);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:52:12.517

不，这是正确的操作。要做你想做的事，你可以尝试：

```
echo substr('abc', 1, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:56:31.117

文字字符串访问语法`'abc'[1]`在 JavaScript 中非常有效，但直到**5.5**版本才支持 PHP 。

# r - 在R中处理数据帧

> ID：15690820
> 
> 赞同：0
> 
> 时间：2013-03-28T19:47:14.150
> 
> 标签：r, dataframe

我有这个数据框。我想把每个唯一的 Dept 放在每个唯一的 Dept 下，并在每个唯一的 Dept 下放置相应的 Name。如您所见，有多个 Dept。例如，final dcoument 应如下所示：

```
Internet
    Public-Web
    Intranet
BackOffice
    Batch
    BackEnd
BackEnd
   WebLogic
   Oracle 
```

输入（x）

```
structure(list(ID = c(1234L, 2345L, 6789L, 3456L, 7890L, 1987L
), Name = structure(c(5L, 3L, 2L, 1L, 6L, 4L), .Label = c("BackEnd", 
"Batch", "Intranet", "Oracle", "Public-Web", "WebLogic"), class = "factor"), 
    Dept = structure(c(3L, 3L, 2L, 2L, 1L, 1L), .Label = c("BackEnd", 
    "BackOffice", "Internet"), class = "factor")), .Names = c("ID", 
"Name", "Dept"), class = "data.frame", row.names = c(NA, -6L)) 
```

任何想法我将如何在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:49:26.337

您可以使用`split`来实现这一点：

```
split(as.character(df$Name), df$Dept)

# $BackEnd
# [1] "WebLogic" "Oracle"  
# 
# $BackOffice
# [1] "Batch"   "BackEnd"
# 
# $Internet
# [1] "Public-Web" "Intranet" 
```

如果您想要唯一的条目，那么只需执行以下操作：

```
df <- unique(df[, 2:3])
split(as.character(df$Name), df$Dept) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:14:04.853

我假设你可能有重复，因此使用`unique`：

```
for(dept in unique(x$Dept)){
  print(dept)
  x2 <- subset(x,subset=Dept==dept)
  for(name in unique(x2$Name)){
    print(paste(sep="","  ",name))
  }
} 
```

替换`print`你需要的任何东西。

# php - 速记 If/Else 语句是否可以包含一个或多个 Else If？

> ID：15690825
> 
> 赞同：0
> 
> 时间：2013-03-28T19:47:36.513
> 
> 标签：php, if-statement

我一直在寻找一个决定性的答案，以确定 if / else 语句是否可以包含 else ifs。当我只是为变量赋值并且通常工作时，我会经常使用它们。然而，他们每隔一段时间就会返回意想不到的结果。

我已经尝试寻找明确的答案，例如这些陈述不应包含 else ifs，但我无法在文档中找到它。

为了更好地解释，假设我在 PHP 中有以下 if 语句：

```
$type = 'one';
$choice = ($type == 'one') ? 'One Fish' : ($type == 'two') ? 'Two Fish' : 'Three Fish'; 
```

为什么这会返回“两条鱼”？我在包括 PHP 和 JS 在内的多种语言中体验过这一点。我只是想做一些我不应该做的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T20:08:21.547

我对您的建议是保持简写简单的 if/else 语句和代码“简写”来处理更复杂的事情。

这样做的原因是长寿，你会发现在几个月后阅读你的代码会更容易等等。如果你在一个团队中工作，它会让你的代码对团队更加友好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:58:14.610

您需要将第一个测试的“else”部分括在括号中，以便正确解释。

```
$choice = ($type == 'one')
           ? 'One Fish'
           : (($type == 'two') ? 'Two Fish' : 'Three Fish'); 
```

这里有一些[关于使用三元运算符](http://phpmaster.com/using-the-ternary-operator/)的建议。

# jquery - 组合选择器

> ID：15690827
> 
> 赞同：0
> 
> 时间：2013-03-28T19:47:37.043
> 
> 标签：jquery, jquery-selectors

给定以下 HTML：

```
<table>
  <tr id="row1">
    <td class="CommandLinks">
      <input type="checkbox" class="CommandLinks" />
    </td>
    <td class="Class2">
      <input type="text" value="1">
    </td>
    <td class="Class3">
      <input type="text" value="1">
    </td>
    <td class="Class4">
      <input type="text" value="1">
    </td>
    <td class="Class5">
      <input type="text" value="1">
    </td>
  </tr>
  <tr id="row2">
    ...
  </tr>
  ...
</table> 
```

我可以使用以下方法获取第一个复选框：

```
var row = $('tr#row1');
var checkbox = row.find('input[data-trackingid]'); 
```

然而，在我看来，有一点额外的开销，因为 jQuery 必须扫描行中的每个单元格。我在想类似的东西，`row.find('tr[class=CommandLinks] > input[data-trackingid]')`但我发现那行不通。

我怎样才能修改上面的查询，使它只在里面查找`$('tr[class=CommandLinks]')`？

*注意：我意识到还有其他方法可以找到此复选框，但在我的实际应用程序中，我想按属性搜索，如上所示。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:03:07.810

首先，你不需要做`tr#row1`. ID 选择器**只会寻找一个**。

只需使用以下内容，您不应该有任何性能问题：

```
var checkbox = $('#row1 .CommandLinks input[data-trackingid=foo]'); 
```

如下所示，它**稍微**快了一点，但不是很多！

![1](../Images/b226c71c9279f342750b3edbf0d52d0b.png)

jsPerf：http: [//jsperf.com/jquerychildrenperf](http://jsperf.com/jquerychildrenperf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:03:08.963

这应该有效：

```
var row = $('tr#row1');
var checkbox = row.find('td.CommandLinks > input[data-trackingid]'); 
```

如果在该元素上设置了 data-trackingid。

或这个：

```
var row = $('tr#row1');
var checkbox = row.find('td.CommandLinks').find('> input[data-trackingid]'); 
```

这在 jQuery 中是等价的。

# google-app-engine - Cloud Endpoints HTTP Cookie

> ID：15690831
> 
> 赞同：7
> 
> 时间：2013-03-28T19:47:44.793
> 
> 标签：google-app-engine, google-cloud-endpoints

我正在使用使用自定义身份验证（[GAE 会话](https://github.com/dound/gae-sessions)）而不是 Google 帐户的 Python 应用程序来实现 Cloud Endpoints。我需要对来自 Javascript 客户端的请求进行身份验证，因此我想访问 cookie 信息。

阅读[this other question](https://stackoverflow.com/questions/15056830/getting-raw-http-data-headers-cookies-etc-in-google-cloud-endpoints)让我相信这是可能的，但可能没有记录。我不熟悉 App Engine 的 Java 端，所以我不太确定如何将该代码段翻译成 Python。这是我的一种方法的示例：

```
class EndpointsAPI(remote.Service):
  @endpoints.method(Query_In, Donations_Out, path='get/donations',
                    http_method='GET', name='get.donations')
  def get_donations(self, req):
    #Authenticate request via cookie 
```

其中`Query_In`和`Donations_Out`都是 ProtoRPC 消息 ( `messages.Message`)。函数中的参数`req`只是一个实例，`Query_In`我没有找到任何与 HTTP 数据相关的属性，但我可能是错的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T22:57:47.280

首先，我鼓励您尝试从您的客户端使用 OAuth 2.0，就像在井字游戏[示例](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-python)中所做的那样。

Cookies 在 Cookie Header 中发送到服务器，这些值通常在 WSGI 环境中设置，其中的键`'HTTP_...'`对应`...`于 header 名称：

```
http = {key: value for key, value in os.environ.iteritems() 
        if key.lower().startswith('http')} 
```

对于 cookie，`os.getenv('HTTP_COOKIE')`将为您提供您寻求的标头值。不幸的是，默认情况下，这不会通过 Google 的 API 基础设施传递。

**更新：**[从版本 1.8.0](https://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/endpoints/api_config.py?r=345#1370)开始，这已为 Python 应用程序启用。要通过发送 cookie，请指定以下内容：

```
from google.appengine.ext.endpoints import api_config

AUTH_CONFIG = api_config.ApiAuth(allow_cookie_auth=True)

@endpoints.api(name='myapi', version='v1', auth=AUTH_CONFIG, ...)
class MyApi(remote.service):
    ... 
```

这是通过的标头（不一定是完整列表）：

*   `HTTP_AUTHORIZATION`
*   `HTTP_REFERER`
*   `HTTP_X_APPENGINE_COUNTRY`
*   `HTTP_X_APPENGINE_CITYLATLONG`
*   `HTTP_ORIGIN`
*   `HTTP_ACCEPT_CHARSET`
*   `HTTP_ORIGINALMETHOD`
*   `HTTP_X_APPENGINE_REGION`
*   `HTTP_X_ORIGIN`
*   `HTTP_X_REFERER`
*   `HTTP_X_JAVASCRIPT_USER_AGENT`
*   `HTTP_METHOD`
*   `HTTP_HOST`
*   `HTTP_CONTENT_TYPE`
*   `HTTP_CONTENT_LENGTH`
*   `HTTP_X_APPENGINE_PEER`
*   `HTTP_ACCEPT`
*   `HTTP_USER_AGENT`
*   `HTTP_X_APPENGINE_CITY`
*   `HTTP_X_CLIENTDETAILS`
*   `HTTP_ACCEPT_LANGUAGE`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-26T14:47:35.573

对于登陆这里的 Java 人。您需要添加以下注释才能在端点中使用 cookie：

```
@Api(auth = @ApiAuth(allowCookieAuth = AnnotationBoolean.TRUE)) 
```

[来源](https://code.google.com/p/googleappengine/issues/detail?id=10100#c11)

（没有它，它将在本地开发服务器上工作，但不能在真正的 GAE 实例上工作。）

# c#-4.0 - ASP.NET MVC4 所有领域列表

> ID：15690834
> 
> 赞同：19
> 
> 时间：2013-03-28T19:48:06.573
> 
> 标签：c#-4.0, asp.net-mvc-4, asp.net-mvc-areas

我有一个 ASP.NET MVC4 应用程序，我在其中创建多个区域，有没有一种方法可以以编程方式找出存在的区域数量及其名称。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-28T20:49:55.813

用其中的值是区域的名称来`AreaRegistration.RegisterAllAreas();`注册每个区域路由。`DataTokens["area"]`

所以你可以从`RouteTable`

```
var areaNames = RouteTable.Routes.OfType<Route>()
    .Where(d => d.DataTokens != null && d.DataTokens.ContainsKey("area"))
    .Select(r => r.DataTokens["area"]).ToArray(); 
```

如果您正在寻找`AreaRegistration`自己，您可以使用反射来获取从`AreaRegistration`您的组件中派生的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T05:20:15.617

`AreaRegistration.RegisterAllAreas()`不能用于 Web 应用程序的预初始化。但是，如果您想在不调用 的情况下获得这些区域`RegisterAllAreas()`，例如在自动化测试中，那么以下代码可能会有所帮助：

```
 var areaNames = new List<string>();
     foreach (var type in typeof(MvcApplication).Assembly.GetTypes().Where(t => t.IsSubclassOf(typeof(AreaRegistration)))) {
        var areaRegistration = Activator.CreateInstance(type) as AreaRegistration;
        areaNames.Add(areaRegistration.AreaName);
     } 
```

请注意，这`MvcApplication`是派生自`HttpApplication`. 您可以使用任何类名，只要该类与程序集注册在同一个程序集中，即从`AreaRegistration`. 如果您将应用程序与多个程序集中的区域分开，那么您需要相应地调整此代码，以便搜索所有这些程序集。

# java - 将消息类转换为

> ID：15690835
> 
> 赞同：1
> 
> 时间：2013-03-28T19:48:13.460
> 
> 标签：java

我有一个带有一些不同字段和一些 getter/setter 的消息类。如何转换此类，以便可以将二进制流写入套接字。我根本不想序列化，但我只想原始类字段中表示的原始字节。

谢谢 ！！！

我正在尝试这样做，但字节没有正确输出：

```
 public static byte[] serialize(Object obj) throws IOException {
        ByteArrayOutputStream b = new ByteArrayOutputStream();
        ObjectOutputStream o = new ObjectOutputStream(b);
        o.writeObject(obj);
        return b.toByteArray();
    } 
```

# svn - svntask 在使用 ssh 隧道时如何将用户和密码传递给 svn？

> ID：15690839
> 
> 赞同：1
> 
> 时间：2013-03-28T19:48:35.610
> 
> 标签：svn, ant, ssh

我正在通过 SSH 使用 SVN 存储库，我想使用 svn 命令行工具和 svn+ssh 架构，来自人们共享的通用帐户来构建相同的代码。

我们目前使用ant构建是这样的。您可以看到它提示输入具有 SVN 权限的用户/密码

```
<target name="update">
        <input message="username:" addproperty="username" />
        <input message="password:" addproperty="password" />

        <svn username="${username}" password="${password}">
            <update dir="${my.dir}"/>
        </svn>
</target> 
```

当您尝试在命令行（在 Solaris 上）上使用 svn {command} svn+ssh/repo 时，ssh 默认使用当前用户。当前用户是一个通用帐户，没有进入 SVN 存储库的权限。

我希望 svn 提示我输入用户名和密码。

我知道我可以像这样将我的用户名传递给 svn

svn info svn+ssh://me@svn-server/apps/app

但是如果我想把它放在一个脚本中以供任何使用构建服务器的通用帐户的人使用，那就不好了

我想要的是提示但命令行，就像蚂蚁任务一样。

有没有办法做到这一点？

我已经尝试将 .subversion/auth 目录中的所有条目移开，并在 .subversion/config 文件中取消注释 store-passwords = no 和 store-auth-creds = no

如果没有，蚂蚁是如何做到的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:51:00.087

您可以使用 ~/.ssh/config 文件为该特定存储库指定用户名，例如

[http://nerderati.com/2011/03/simplify-your-life-with-an-ssh-config-file/](http://nerderati.com/2011/03/simplify-your-life-with-an-ssh-config-file/)

您可以为不同的主机指定不同的用户名等。

在 ssh 手册页中，您可以使用 -F 选项告诉 ssh 使用特定的配置文件（而不是默认的 ~/.ssh/config）。

由于您无论如何都在使用脚本，您是否可以让您的脚本提示用户输入用户名，然后使用输入的用户名创建配置文件？

# python - 使用 urlopen(IP).read() 获取 http.client.BadStatusLine

> ID：15690841
> 
> 赞同：3
> 
> 时间：2013-03-28T19:48:41.250
> 
> 标签：python, urllib, strip, python-3.3, urlopen

我试图读取的数据是 xml 格式。xml 声明前有一个空格。我无法编辑这部分，因为它被硬编码到数据源中。我只能从中读取。当在 IE 中输入 url 时，数据就会出现。在 Chrome/Firefox 中输入时，会显示错误，但可以从查看源查看数据。

python有没有办法像IE一样去掉这个空间或者忽略它？

（尝试`strip()`在很多地方添加）

或者有没有办法默认页面源（我认为 urlopen 已经这样做了）？

这是给出错误的行：

```
html = urlopen(address).read() 
```

这是错误：

```
Traceback (most recent call last):
File "C:\Users\212311674\Desktop\Python Work\M10url.py", line 27, in <module>
  html = urlopen(address).read()
File "C:\Python33\lib\urllib\request.py", line 160, in urlopen
  return opener.open(url, data, timeout)
File "C:\Python33\lib\urllib\request.py", line 473, in open
  response = self._open(req, data)
File "C:\Python33\lib\urllib\request.py", line 491, in _open
  '_open', req)
File "C:\Python33\lib\urllib\request.py", line 451, in _call_chain
  result = func(*args)
File "C:\Python33\lib\urllib\request.py", line 1272, in http_open
  return self.do_open(http.client.HTTPConnection, req)
File "C:\Python33\lib\urllib\request.py", line 1257, in do_open
  r = h.getresponse()
File "C:\Python33\lib\http\client.py", line 1131, in getresponse
  response.begin()
File "C:\Python33\lib\http\client.py", line 354, in begin
  version, status, reason = self._read_status()
File "C:\Python33\lib\http\client.py", line 336, in _read_status
  raise BadStatusLine(line)
http.client.BadStatusLine:  <?xml version="1.0"?><controller_history_cnd> 
```

# c# - 遍历数据集以检查条件

> ID：15690842
> 
> 赞同：1
> 
> 时间：2013-03-28T19:48:43.410
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我为标题道歉，因为我想不出一种简洁的方式来表达我的问题。如果有人有更好的描述，请编辑它。

循环（数据库表）

```
int PartNo (PK)
int StepNo
string Group
Datetime Start
Datetime Finish
string Status 
```

例子

```
PartNo  |  StepNo  |  Group  |  Start  |  Finish  |  Status
  0     |    0     | Group1  | 1-1-01  |  1-2-01  |    A
  0     |    1     | Group2  | 1-2-01  |  1-3-01  |    A
  0     |    2     | Group3  | 1-3-01  |  1-4-01  |    A
  0     |    3     | Group1  | 1-4-01  |  1-5-01  |    R
  0     |    4     | Group1  | 1-5-01  |  1-6-01  |    
  0     |    5     | Group1  | 1-6-01  |  1-7-01  |       
  0     |    6     | Group1  | 1-7-01  |          |    
  0     |    7     | Group2  |         |          |    
...more PartNo... 
```

让我首先用“业务”字眼简要描述我需要什么。此表跟踪一个项目，因为它已被多个组批准。正如您在示例表中看到的，group1、group2 和 group 3 批准了该项目，然后返回到 group1。空状态字段表示该组内的重新分配，您可以看到它在步骤 3 中被拒绝后被重新分配了几次。您还可以告诉当前步骤是 6，因为它有`start`时间，但没有`finish`时间。每个 PartNo 可以有多个拒绝。

现在这里是我棘手的查询的描述。我需要检查最近是否有拒绝。这是由与当前组在同一组中发生的拒绝定义的。当前步骤和拒绝步骤之间涉及的组也必须相同，`Group1`在这种情况下，才能被归类为最近拒绝。对于此示例，当前步骤为 6，我的查询必须返回步骤 3，即拒绝的位置。澄清一下，如果将第 4 步或第 5 步更改为任何其他组，则查询将不返回任何内容。我希望这是有道理的。

我可以制作一个查询来返回最后一个被拒绝的行，但我不确定如何遍历当前步骤和被拒绝的步骤之间的行以检查组。

获取当前步骤

```
Cycle.Where(c => c.Start.HasValue() && !c.Finish.HasValue())
    .GroupBy(c => c.PartNo)
    .Select(g => new
    {
        PartNo = g.Key,
        StepNo = g.Min(s => s.StepNo)
    } 
```

获取最新拒绝

```
Cycle.Where(c => c.Status == "R")
    .GroupBy(c => c.PartNo)
    .Select(g => new
    {
        PartNo = g.Key,
        StepNo = g.Max(s => s.StepNo)
    } 
```

任何有关如何检查最新拒绝和当前步骤之间行的输入将不胜感激。

编辑：

我认为可以将上面的两个查询组合到一个包含`PartNo`,`CurrentStep`和`RejectedStep`. 从这里，我可以使用循环重新加入，这将为我提供从当前步骤到被拒绝步骤的所有行。

```
var combined = currentStep
            .Join(rejectedStep,
                    c => c.PartNo,
                    r => r.PartNo,
                    (c,r) => new { PartNo = c.PartNo, Current = c.StepNo, Reject = r.Stepno}); 
```

插入一些连接查询以获取`StepNo <= Current && StepNo >= Reject`

我*可以*使用`foreach`循环来检查每个组中的组是否相同，但我更愿意使用 LINQ 以便处理发生在数据库端。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:38:57.167

我可能仍然没有理解您的要求。您在业务描述中说过，您只想返回`Group`和 相同的行`PartNo`，但您的代码示例似乎都没有考虑到这一点。这个查询并不漂亮，但它有效：

```
var results = 
    from c in Cycles
    group c by new { c.PartNo, c.Group } into g
    let c = g.Where(s => s.Start.HasValue && !s.Finish.HasValue)
             .Select(s => s.StepNo)
    let r = g.Where(s => s.Status == "R")
             .Select(s => s.StepNo)
    where r.Any() && c.Any()
    select new 
    { 
        g.Key, 
        Steps = g.Where(s => s.StepNo <= c.Max() && s.StepNo >= r.Min()) 
    }; 
```

当针对您的样本集运行时，它会返回： ![结果集](../Images/4cdbc4e28cf37b11e3a06cdbdef4c4cc.png)

* * *

**更新**

这是另一个尝试。此查询将排除列在被拒绝步骤 ( ) 和当前步骤 ( )`group`之间的任何点发生更改的情况：`r``c`

```
var results = 
    (from c in Cycles
    group c by c.PartNo into g
    let c = g.Where(s => s.Start.HasValue && !s.Finish.HasValue)
             .Select(s => s.StepNo)
    let r = g.Where(s => s.Status == "R")
             .Select(s => s.StepNo)
    where r.Any() && c.Any()
    let steps = g.Where(s => s.StepNo <= c.Max() && s.StepNo >= r.Min()) 
    where steps.Select(x => x.Group).Distinct().Count() == 1
    select new 
    { 
        g.Key, 
        Steps = steps
    } 
```

# java - 两个Shape对象之间的Java碰撞检测？

> ID：15690846
> 
> 赞同：17
> 
> 时间：2013-03-28T19:48:49.770
> 
> 标签：java, 2d, collision, shape, intersection

我想知道判断 Shape 对象是否与另一个形状相交的最佳方法。目前我在我的游戏中进行了碰撞检测，只要它涉及与矩形相交的形状，反之亦然。我遇到的问题是 Shape 类中的 intersects() 方法只能将 Rectangle 或 Point 作为参数，而不是另一个 Shape。有没有一种有效的方法来测试两个 Shape 对象是否以任何方式重叠？我尝试的一种方法是使用 for 循环生成一个点区域来测试它们是否在形状中，然后构建一个 Point 对象数组以发送到另一个形状进行测试，但这显着降低了我的帧速率，因为所有不必要的比较。

我在这里寻找并寻找类似的东西，但没有真正找到任何东西。如果这是重复的，请提前道歉。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-28T20:25:31.107

未测试，但为什么不测试：

```
import java.awt.geom.Area;

...

public static boolean testIntersection(Shape shapeA, Shape shapeB) {
   Area areaA = new Area(shapeA);
   areaA.intersect(new Area(shapeB));
   return !areaA.isEmpty();
} 
```

Area 实现了 Shape，但添加了一些可能有用的方法

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-28T00:37:03.223

您还可以使用形状本身的边界，然后比较边界：

```
public boolean collidesWith(Shape other) {
    return shape.getBounds2D().intersects(other.getBounds2D());
} 
```

这对眼睛来说更好一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T19:39:01.897

尽管 user2221343 已经回答了 Monkeybro10 的问题，但我认为在某些情况下可能会有所帮助，如果您使用他描述的技术，形状的轮廓可能会起作用：

例如，如果您绘制两个多边形，如果它们仅发生在多边形的确切轮廓上，则不会检测到它们的碰撞。仅当包含在多边形轮廓内的区域重叠时，才会检测到碰撞。如果填充两个多边形但不绘制它们，即使在可见区域的轮廓上也会检测到碰撞。

我写了一个小例子来说明我的意思。取消注释绘制或填充命令，并通过取消注释给定线将第二个多边形垂直上升一个像素。运行代码并在 JFrame 中观察结果。如果第二个多边形升起，并且两个多边形只能通过“填充”命令可见，则它们与其轮廓相交并检测到碰撞。如果第二个多边形没有上升，并且两个多边形都可以通过“draw”命令看到，它们与它们的轮廓相交，但不会检测到碰撞：

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Polygon;
import java.awt.geom.Area;

import javax.swing.JFrame;

public class Test {

    private JFrame frame;
    private Polygon polygon1;
    private Polygon polygon2;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Test window = new Test();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public Test() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame(){
            private static final long serialVersionUID = 1L;

            @Override
            public void paint(Graphics g){

                super.paint(g);

                doDrawing(g);

            }
        };
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        int nShape1 = 4;
        int xPoly1[] = {30,50,50,30};
        int yPoly1[] = {30,30,50,50};
        polygon1 = new Polygon(xPoly1,yPoly1,nShape1);

        int nShape2 = 4;
        int xPoly2[] = {35,55,55,35};
        int yPoly2[] = {50,50,70,70};

        // uncomment next line to rise second polygon vertically by one pixel
        //yPoly2[] = {49,49,69,69};

        polygon2 = new Polygon(xPoly2,yPoly2,nShape2);
    }
    public synchronized void doDrawing(Graphics g){
        g.setColor(new Color(255,0,0));

        // if you draw the polygon, collision on the exact outline won't be detected.
        // uncomment draw or fill command to see what I mean.
        g.drawPolygon(polygon1);
        g.fillPolygon(polygon1);

        g.setColor(new Color(0,0,255));

        // if you draw the polygon, collision on the exact outline won't be detected.
        // uncomment draw or fill command to see what I mean.
        g.drawPolygon(polygon2);
        g.fillPolygon(polygon2);

        Area area = new Area(polygon1);
        area.intersect(new Area(polygon2));
        if(!area.isEmpty()){
            System.out.println("intersects: yes");
        }
        else{
            System.out.println("intersects: no");
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-24T20:39:42.470

如果您认为区域相交太昂贵，您可以先进行边界检查： shapeA.getBounds().intersects(shapeB.getBounds())

如果通过，则进行区域相交检查。

```
if( myShape.getBounds().intersects(otherShape.getBounds()) ){
    Area a = new Area(myShape);
    a.intersect(new Area(otherShape));
    if(!a.isEmpty()){
        // do something
    }
} 
```

# c++ - 字符串中的切换大小写

> ID：15690849
> 
> 赞同：0
> 
> 时间：2013-03-28T19:48:55.350
> 
> 标签：c++

编译代码时出现错误。

错误输出：

```
main.cpp：35:16：错误：开关量不是整数

```

我不知道为什么。代码如下：

```
int Values(string letter) {
    switch( tolower(letter) ) {
        case 'a' : a.setTotal();
        break; 
```

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:51:07.577

A`string`不是 a `char`，它是一个表示字符数组的对象。您应该传入 a ，而不是将 a 传递`string`给该函数`char`。

[`tolower(int)`](http://www.cplusplus.com/reference/cctype/tolower/)存在于 C++ 中，它旨在接受字符，而不是字符串。

* * *

这是解决此问题的另一种方法，它需要对代码进行较少的更改：

由于我很确定从名称来看这`letter`将是一个`string`长度`1`，您可以将您的`switch`语句更改为 access `letter[0]`，这将是`string`. 您还必须传递`letter[0]`给`tolower`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:54:31.063

`letter`是字符串，所以`tolower(letter)`产生一个字符串。但是您的情况是字符（'a'）。此外，在 C/C++ 中不可能将 switch 用于字符串。改用这一行：

```
switch( tolower(letter.data[0]) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:59:23.693

switch inscrutvion 只接受枚举类型（enum）、chars（char）或整数（int、unsigned、long）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T20:01:25.853

看起来您想使用单个字符。

更改函数的参数：

```
int Values(string letter) 
```

对此：

```
int Values(char letter) 
```

该`switch`声明将起作用。

# facebook - 人们无法看到我的应用发布的帖子

> ID：15690851
> 
> 赞同：1
> 
> 时间：2013-03-28T19:49:00.897
> 
> 标签：facebook, post

我的应用程序将有趣的图片链接发布到我的 Facebook 页面。直到昨天晚上，帖子才开始出现在页面的墙上，而不是人们的主页上，它一直运行良好。现在，任何人都看不到该应用程序发布的所有帖子。这是脸书的问题吗？他们有什么改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:26:12.727

我注意到从我构建的应用程序向个人资料发布的帖子也发生了同样的事情。我或其他任何人都看不到它们。奇怪的是，Facebook 将一个 Post ID 交给了该应用程序，这表明该帖子甚至成功了，但是当我连接它所暗示的 URL 时，根本没有任何服务。

这肯定是一个错误。我还没有在其他任何地方找到关于它的任何其他内容。

# drupal - 自定义 drupal 搜索结果 solr 附件模块

> ID：15690854
> 
> 赞同：0
> 
> 时间：2013-03-28T19:49:07.167
> 
> 标签：drupal, solr

我无法在我的 drupal 7、apache solr 3.2、Apache Solr Search Integration 7.x-1.1、Apache Solr Attachments 7.x -1.2 中显示 serach 的片段。

我希望能够为每个结果显示文本片段，例如谷歌搜索，我该怎么做？在这里他可以显示片段[http://www.acquia.com/blog/use-apache-solr-search-files](http://www.acquia.com/blog/use-apache-solr-search-files)吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T05:32:15.357

在你的 template.php 文件中使用这个函数

功能主题_apachesolr_search_mlt_recommendation_block($vars) {

}

在 vars 中你得到所有搜索结果并添加你想要的

# r - 使用单个命令运行具有不同参数的函数列表

> ID：15690855
> 
> 赞同：4
> 
> 时间：2013-03-28T19:49:07.443
> 
> 标签：r, classification, multicore, svm, nnet

我正在寻找在相同数据上测试不同回归/分类算法（即 svm、nnet、rpart、randomForest、naiveBayes 等）的结果，看看哪个效果更好。但我需要让我的代码尽可能短而干净。为了测试所有算法，我想使用一次`mclapply()`package 调用来运行它们`multicore`：

```
invisible(lapply(c("party","nnet","caret","klaR","randomForest","e1071","rpart",
                   "multicore"), require, character.only = T))
algorithms <- c(knn3, NaiveBayes, nnet, ctree, randomForest, svm, naiveBayes, rpart)
data(iris)
model <- mclapply(algorithms, function(alg) alg(Species ~ ., iris)) 
```

问题是一些算法需要额外的参数，即`nnet()`需要`size`设置参数。当然这可以通过几个`if,else`命令来解决，但是有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T20:01:19.183

您可以做的一件事是`algorithms`用部分函数替换那些需要额外参数的参数，例如

```
algorithms <- c(knn3, ctree, function(...) nnet(..., size=2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:03:51.317

包`multicore`似乎不适用于 Windows，但这是一种方法，有一个简单的例子，普通`lapply`：

```
# names of the functions as strings
algorithms <- c("lm", "glm")
# arguments for each function (empty list for those which do not need any)
arguments <- list(lm=list(model=FALSE),glm=list(family = gaussian),lm=list())

# Use lapply with do.call
output<-lapply(1:length(algorithms), function(i) do.call(what=algorithms[i],
                    args=c(list(formula=y ~ .,data=freeny),arguments[[i]])))
names(output)<-algorithms #Add names to output 
```

现在列表`output`包含每个算法的输出。请注意，乍一看`output$lm`，这个示例的输出（通过 command ）看起来有点糟糕，因为打印`lm`并`glm`显示了函数调用以及摘要，并且这里的函数调用很长。

编辑：一些小的调整。

# ruby - 如何摆脱续集中的续集错误？

> ID：15690856
> 
> 赞同：0
> 
> 时间：2013-03-28T19:49:09.673
> 
> 标签：ruby, rubygems, sequel

这是我的代码：

初始化文件：

```
require 'sequel'
DB = Sequel.connect('sqlite://data.db')

DB.drop_table?(:restaurants)
DB.create_table :restaurants do
primary_key :id
String :name
end

DB.drop_table?(:category)
DB.create_table :category do
primary_key :id
String :name
end

DB.drop_table?(:items)
DB.create_table :items do
primary_key :id
foreign_key :restaurant_id
foreign_key :category_name
String :name
Float :price
end

require_relative './restaurant'
require_relative './categories'
require_relative './item' 
```

应用程序文件：

```
require_relative './models/init

p = Category.create(:name => 'Pizza')
c = Category.create(:name => 'Calazone')
pa = Category.create(:name => 'Pasta')
s = Category.create(:name => 'Salad')
d = Category.create(:name => 'Dessert')
dr = Category.create(:name => 'Drink')
si = Category.create(:name => 'Side')` 
```

但我收到此错误：

```
/home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:1780:in `block in set_restricted': method name= doesn't exist (Sequel::Error)
    from /home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:1767:in `each'
    from /home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:1767:in `set_restricted'
    from /home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:1278:in `set'
    from /home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:1736:in `initialize_set'
    from /home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:920:in `initialize'
    from /home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:156:in `new'
    from /home/ben/.rvm/gems/ruby-1.9.3-p385/gems/sequel-3.45.0/lib/sequel/model/base.rb:156:in `create'
    from app.rb:4:in `<main>'" 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:40:17.527

您没有发布您的类别模型，但我猜它实际上并没有查看类别表（可能是类别表）。您要么想将数据库表重命名为类别，要么告诉您的类别模型使用类别表。如果不是这样，您可能想发布您的模型代码。

# iphone - [NSString stringWithFormat] 采用什么类型的参数？

> ID：15690861
> 
> 赞同：1
> 
> 时间：2013-03-28T19:49:25.463
> 
> 标签：iphone, ios, objective-c

我知道该方法`stringWithFormat`通常使用如下：

```
[NSString stringWithFormat: @"%@ %@", arg1, arg2]; 
```

我的问题是，这个方法的最后一个参数的类型到底是什么（`...`规范中的那个）。

我希望能够执行以下操作：

```
NSArray *array = [NSArray arrayWithObjects: @"Hi", @"Bob"];
[NSString stringWithFormat: @"%@ %@", array] 
```

如您所见，一个数据结构`array`包含所有参数。不幸的是，这不起作用。有没有办法做到这一点，这样我就不必在`stringWithFormat`方法中明确列出我的所有参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:54:47.657

> 采取什么类型的论据`[NSString stringWithFormat]`？

无论您使用它的格式字符串告诉它什么类型。

> 我的问题是，这个方法的最后一个参数的类型到底是什么

这不是最后一个论点。这是一个称为“可变参数函数”（或方法，在这种情况下）的概念。`...`表示该函数可以采用任意数量的参数。这是 C 的一个特性，您可以通过使用 C 标准库头文件中的类型、宏和函数来使用它`<stdarg.h>`。示例：这将创建一个包含给定对象的数组。

```
- (NSArray *)arrayWithCountAndObjects:(int)count, ...
{
    NSMutableArray *arr = [NSMutableArray array];

    va_list args;
    va_start(args, count);
    for (int i = 0; i < count; i++) {
        [arr addObject:va_arg(args, id)];
    }
    va_end(args);

    return arr;
} 
```

**但是，**您**应该**在这里做的是简单地加入数组中的项目，而不是使用可变参数进行破解，因为这是不必要的：

```
NSArray *arr = @[@"Hello", @" ", @"world!"];
NSString *s = [arr componentsJoinedByString:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:54:15.170

您不想使用带格式的字符串，如果数组包含字符串，那么您想使用数组方法 componentsJoinedByString:。如果您想在字符串之间留一个空格，只需将 @" " 作为字符串传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:04:15.617

它接受可变参数。如果要查找函数的类型，则称为“可变参数”。

在这种特定情况下，这些参数由您指定的格式字符串确定。`%@`表示任何可可对象（继承自`NSObject`）。`%s`表示 ac 字符串（以空字符结尾的字符数组）。`%d`表示 int，`%f`表示 float 或 double，依此类推。它们有很多（除了从 C 的函数`%@`中借来的）。`printf`您可以在此处找到完整的详细信息：[http](http://www.cplusplus.com/reference/cstdio/printf/) ://www.cplusplus.com/reference/cstdio/printf/和此处[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/ FormatStrings.html#//apple_ref/doc/uid/20000943](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html#//apple_ref/doc/uid/20000943)

至于你的尝试，那不是它的工作原理。`componentsJoinedByString`如果需要更多控制，您只需将数组拆分为单独的参数，或者使用, 或手动循环。但是您可以使用 single`%@`以自己的格式显示数组，可能类似于`[First Value; Second Value]`.

# vb.net - 如何减少小数点后的数字？

> ID：15690864
> 
> 赞同：1
> 
> 时间：2013-03-28T19:49:27.170
> 
> 标签：vb.net, point, downcast

我只需要最多两位小数。

调暗 v1、v2、v3、v4、v5、tv、rp1、rp2、rp3、rp4、rp5 作为 Double

将 Per1、Per2、Per3、Per4、per5 调暗为 Double

```
 Per1 = v1 / tv * 100

    Per2 = v2 / tv * 100

    Per3 = v3 / tv * 100

    Per4 = v4 / tv * 100

    per5 = v5 / tv * 100 
```

它给了我像 per1=76.34393939202 这样的值

但是如果我使用： Dim Per1, Per2, Per3, Per4, per5 As ULong 它给了我 76

我希望它给我像 76.34 这样的值，但我该怎么做呢？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:58:18.097

如果将 Double 转换为 ULong，它将删除所有小数位。如果问题是当您将它们打印到屏幕上时，那么您可以简单地使用字符串格式化程序：

```
Format(Per1, "0.00") 
```

可以在此处找到文档[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.format.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.format.aspx)

如果你想四舍五入你可以使用的数字

```
Math.Round(Per1, 2) 
```

回合记录在这里[http://msdn.microsoft.com/en-us/library/75ks3aby.aspx](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:56:25.400

在 c# 中它看起来像这样

```
 string.Format("{0:0.00}", (double)Convert.ToInt32(tv) * 100 / Convert.ToInt32(v1)) 
```

# php - 如何在 PHP 中从 AUTO_INCREMENT 列中为每行检索生成的 PRIMARY KEY，并在 MySQL 中插入多行？

> ID：15690866
> 
> 赞同：1
> 
> 时间：2013-03-28T19:49:30.633
> 
> 标签：php, mysql, primary-key, auto-increment, multiple-insert

我有一个带有用于插入多行的语法的 INSERT：

INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9);

使用 MySQL 函数 LAST_INSERT_ID() 可以检索生成的 AUTO_INCREMENT 列的主键，但是如何检索行 (1,2,3)、(4,5,6) AND (7,8,9) 的主键插入一个独特的 SQL INSERT 指令？

编程语言为 PHP 5.4.13 和 MySQL Server 5.6.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:55:18.317

无法检索多个生成的 auto-inc 变量。调用 LAST_INSERT_ID() 会返回最后一个 INSERT 生成的*第一个值。*

要获取所有值，请一次插入一行，并在每一行之后调用 LAST_INSERT_ID()。这会导致更多开销，但这是唯一的解决方法。

如果您正在执行`INSERT...SELECT`or `LOAD DATA INFILE`，这尤其是一个问题，批量生成许多新的 id 值。

另见[MySQL LAST_INSERT_ID() 用于多条记录 INSERT 语句](https://stackoverflow.com/questions/4637367/mysql-last-insert-id-used-with-multiple-records-insert-statement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T04:28:57.747

您可以在循环中插入记录，并在插入每条记录时通过调用 last_insert_id() 将自动增量 id 存储在数组中。因此，您可以在需要的地方使用插入的 id 数组。

# php - php SQL 身份验证问题

> ID：15690867
> 
> 赞同：0
> 
> 时间：2013-03-28T19:49:32.983
> 
> 标签：php, mysql, login

我有一个用户登录页面，其操作形式为“auth.php”

auth.php 看起来像这样：

```
<?php
session_start();

require_once('database.php');

$username = $_POST['username'];
$password = $_POST['password'];

$sql = "SELECT * FROM access_getaccountswithinfo WHERE username='".$username."' AND     password='".$password."'";

$run = mysql_query($sql);
$row = mysql_fetch_array($run);

if (mysql_num_rows($run) == 1) {
$_SESSION['logged_in'] = true;
$_SESSION['username'] = $row['username'];
$_SESSION['password'] = $row['password'];
$_SESSION['packagename'] = $row['packagename'];
$_SESSION['creation-date'] = $row['creation-date'];
$_SESSION['cap'] = $row['cap'];
$_SESSION['total'] = $row['total'];
$_SESSION['remainingtopup'] = $row['remainingtopup'];

header("location: usage.php");
} else {
header("location: user_login.php");
$message = MSG_INVALID_USERPW;
}

mysql_close($link);
?> 
```

然后这个 auth.php 有一个 Require_once 到：database.php database.php 如下：

```
<?php
$link = mysql_connect('localhost', 'testdatabase', '123456');
if (!$link) {
die('Could not connect: ' . mysql_error());
}

// make testdatabase the current db
$db_selected = mysql_select_db('testdatabase', $link);
if (!$db_selected) {
die ('Can\'t use foo : ' . mysql_error());
}

echo 'Connected successfully';

?> 
```

所以简而言之......您在登录页面上登录，然后使用 auth.php 检查用户是否可以在需要 database.php 进行连接的同时进行身份验证，如果用户通过身份验证，它会将他们带到页眉设置的 usage.php（“位置: 用法.php"); 在 auth.php 中。

现在这在我的本地机器上 100% 工作，带有 xampp Apache 和 SQL 服务器。

但是当我将它上传到网络服务器时，我在登录页面上登录，它会将我带到页面“auth.php”并停在那里并根据 database.php 中的回显显示“连接成功”。仅此而已，假设要进行身份验证，然后将我带到usage.php。我检查了数据库名称，表等，都正确，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:52:53.383

> 现在这在我的本地机器上 100% 有效

那是一些非常糟糕的代码。绕过身份验证是微不足道的。

建立连接后，您无需进行任何进一步的错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:55:20.410

在使用 header(...) 之前，不允许向输出流写入**任何内容。**它可能在某些服务器上工作，但你不应该期望它。

删除代码中的所有 echo 和 print 语句，您应该被重定向。

**此外**，您应该真正使用 mysql_real_escape_string(..) [http://php.net/manual/en/function.mysql-real-escape-string.php]，甚至将已弃用的 mysql_ 命令更改为 PDO。现在我可以使用用户名登录您的网站`' OR 1=1 LIMIT 0,1; --`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:55:43.120

一旦你回显了一些东西，你就不能再设置任何标题了。尝试删除 echo 语句。

来源： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

引用：“请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 中。使用包含或要求功能读取代码是一个非常常见的错误, 或其他文件访问函数，并在调用 header() 之前输出空格或空行。使用单个 PHP/HTML 文件时存在相同的问题。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T19:57:08.197

尝试添加

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

在代码顶部查看是否有错误，通常错误隐藏在托管服务器中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T20:49:41.713

只需尝试删除回显“连接成功”；从代码中并尝试省略任何空白行，因为标头函数过于敏感，它需要您在使用它们之前没有发送任何输出，因此任何回显或任何简单的 html 都被视为输出，并且标头函数将无法正常运行header 已经发送的错误，如果错误报告的级别是隐藏错误，您将不会注意到此错误

请尝试在调用标头函数之前省略任何空格或任何回显，然后告诉我结果:)

# android - 在 Android 手机上编译 C 代码

> ID：15690869
> 
> 赞同：5
> 
> 时间：2013-03-28T19:49:44.573
> 
> 标签：android, gcc, compilation, android-ndk, toolchain

我想编译并运行发送到我的 AndroidApp 的 .c 文件。我想在 ARM .c 文件上编译 ARM。我正在使用带有 Android 4.2 的 Galaxy Nexus。我已经安装了 Android SDK 和 Android NDK 我已经用终端 IDE 完成了这个，但我不想从终端手动编译它。现在我已经下载了适用于 Android 的 GCC (android-gcc-4.4.0)，但不知道如何将其正确添加到我的应用程序中，以及如何从 Java 代码内部使用它进行编译。

我在互联网上阅读了很多关于此的内容，但没有一个真正帮助我弄清楚，如何做到这一点

所以我的问题是：如何使用我的 Android 应用程序中的 Android/NDK 工具链或任何其他工具链来编译然后运行 ​​.c 文件。

**编辑：** 我现在在我的手机上的文件目录（data/data/.../files）中解压了 android-gcc。我想在手机上调用gcc编译器来编译一个.c文件。我尝试使用：

```
String[] cmds={MainActivity.this.getFilesDir() + "/android-gcc-4.4.0/bin/arm-eabi-gcc-4.4.0", "-c", file_path};
String result = "";
Process p = Runtime.getRuntime().exec(cmds);
BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
while ((line = in.readLine()) != null) 
{
    result += line + "\n";
}
alert_dialog("Output", result); // Creates and displays an alert dialog
in.close();
}
catch (Exception e) 
{
    alert_dialog("Error", e.toString() + "\n" + e.getMessage());
} 
```

这是我在 Android 上调用 gcc 的方法，但我只得到以下异常：java.io.IOException: Error running exec()。命令 [...] 工作目录：空 环境空。

有谁知道如何在电话上正确调用 android-gcc 编译器？

任何帮助表示赞赏并提前感谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-28T19:55:44.753

这不是官方支持的方案；任何操作系统都不会让非特权应用程序随意在设备上安装可执行代码。

在有根电话上，您可能会有一些运气；但是，您仍然需要从头开始组装一个工具链。NDK 从来都不是为此而生的。没有在 ARM 上运行的 NDK。

# javascript - Acrobat 自动对焦

> ID：15690872
> 
> 赞同：1
> 
> 时间：2013-03-28T19:49:55.723
> 
> 标签：javascript, pdf, acrobat, autofocus

有谁知道自动对焦pdf中某个字段的脚本？我在打开页面时尝试了标准的 javascript .focus() 方法，但它似乎不喜欢它。鉴于我在谷歌上找不到任何关于它的信息，我在“它做不到”或“它太简单我错过了”之间左右为难。如果有人知道任何事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:10:41.310

Adobe 论坛中的某个人帮助我解决了这个问题。

```
 getField("fieldName").setFocus(); 
```

# android - 浮雕蒙版过滤器不起作用

> ID：15690873
> 
> 赞同：0
> 
> 时间：2013-03-28T19:50:06.420
> 
> 标签：android

我设计了一个自定义视图（灵感来自 catch notes 应用程序的循环菜单）。自定义视图完成。我在项目中面临的唯一问题是浮雕蒙版过滤器在我的设备中不起作用。我在 Android 2.3.3 模拟器、Android 4.2 模拟器和 Bluestacks 上测试了视图。在它们中的每一个中，浮雕蒙版过滤器都工作正常，但在我的设备上，我无法在我设计的视图上看到任何光线调整。我附上 Android 2.3.3、Android 4.2 和我的手机的屏幕截图。如果手机制造商等设备出现问题，是否有任何替代浮雕面膜过滤器？我不明白为什么我需要把我的代码放在这里。因为它适用于所有模拟器。

![模拟器 2.3.3 ！ 工作浮雕面膜过滤器](../Images/35b05efcdff43783cf4f61063a64137f.png) ![果冻豆模拟器4.3！ 工作浮雕面膜过滤器](../Images/f7461b7df3acafaa6174e62b4d7edc01.png) ![我的手机安卓 4.0.4 ICS ！ 不工作](../Images/da9f9f1df56a04713366b36448de6cb7.png)

有什么线索吗？？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:40:00.650

事实证明，浮雕蒙版过滤器在硬件加速上不​​可用。这是我的设备的问题。但是，为了使浮雕蒙版过滤器与设备一起使用，我必须为我的视图禁用硬件加速并将其设置为软件层。有两种方法可以做到这一点。

```
view.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

适用于 API > 10。另一种方式。

```
android:layerType 
```

在布局文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T21:35:42.980

我遇到了同样的问题，发现将目标版本设置为 13 以下可以解决问题。14岁及以上未能显示它。

```
android:targetSdkVersion="13" 
```

# mysql - mysql - 如果null存在多于特定num，则删除行

> ID：15690874
> 
> 赞同：6
> 
> 时间：2013-03-28T19:50:06.800
> 
> 标签：mysql

我有一张像这样的桌子：

```
编号 | 名称1 | 名称2 | 名称3
```

```
1 | 阿萨 | 空 | 达斯
```

```
2 | 空 | 空 | 阿萨斯
```

我想删除每行有两次或更多次 NULL 值（这里是 id = 2 的行）
我已经用一个小的 PHP 脚本做到了，但我想知道这是否可以用 mysql 查询来完成

我是mysql的新手，所以我还没有尝试任何东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:57:49.947

您将希望使用`WHERE`具有多个过滤器的子句，每个检查是列是`null`：

```
delete 
from yourtable
where 
  (name1 is null and name2 is null) or
  (name1 is null and name3 is null) or
  (name2 is null and name3 is null) or
  (name1 is null and name2 is null and name3 is null) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/64e8f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:54:46.140

```
delete from table where 
     (name1 is null AND name2 is null) OR
     (name2 is null AND name3 is null) OR
     (name1 is null AND name3 is null) OR
     (name1 is null AND name2 is null AND name3 is null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T20:10:32.327

您可以使用`IS NULL`获取每列的布尔值（0 或 1），对这些结果求和并删除总和大于或等于 2 的行。

像这样：

```
delete from your_table
where ((name1 is null) + (name2 is null) + (name3 is null)) >= 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-14T12:52:47.247

相关，如果您需要删除所有列都为空的行，您可以执行此操作。

该过程将删除所有为空的列的任何行，忽略可能设置为 ID 的主列。

```
DELIMITER //
CREATE PROCEDURE DeleteRowsAllColNull(IN tbl VARCHAR(64))
BEGIN
SET @tbl = tbl;
SET SESSION group_concat_max_len = 1000000;
SELECT CONCAT('DELETE FROM `',@tbl,'` WHERE ',(REPLACE(group_concat(concat('`',COLUMN_NAME, '` is NULL')),',',' AND ')),';') FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = @tbl AND COLUMN_KEY NOT LIKE 'PRI' into @delete_all;
PREPARE delete_all FROM @delete_all;
EXECUTE delete_all;
DEALLOCATE PREPARE delete_all;
END //
DELIMITER ; 
```

执行这样的程序。

```
CALL DeleteRowsAllColNull('your table'); 
```

# visual-studio-2010 - 从 UpgradeCode 查找应用程序安装路径

> ID：15690876
> 
> 赞同：0
> 
> 时间：2013-03-28T19:50:14.337
> 
> 标签：visual-studio-2010, windows-installer, setup-project

我在使用 Visual Studio 2010 设置和部署项目时遇到了一些“不便”。假设我有 2 个应用程序：App1 和 App2。这两个应用程序都有单独的 MSi 安装包，可以安装到不同的位置。App1 需要知道 App2 的安装位置。以前我为 App1 提供了 App2 安装包的“ProductCode”值。这样 App1 可以找到 App2 的安装路径，在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 的“ProductCode”键中寻找合适的值。

现在我更新了 App2 安装包的版本，Visual Studio 敦促我更改 ProductCode。改了，现在 App1 无法成功使用之前的 ProductCode 找到 App2 的安装路径。当然，我可以为 App1 提供新的 ProductCode，但每次更新 App2 版本时我都会被迫这样做。此外，旧版本的 App1 将无法找到新版本的 App2，因为它不知道新的 ProductCode。

所以我需要更多“持久”的方法来找到 App2 的安装路径。我认为 Visual Studio 设置和部署项目的 UpgradeCode 值永远不会改变，除非开发人员出于某种原因自己更改它。但是我在注册表中找不到任何 UpgradeCode 的踪迹。

有谁知道升级代码保存在哪里？或者当我们知道 UpgradeCode 存在时找到实际 ProductCode 的方法？也许有人有更好的方法来查找应用程序的安装路径？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:13:32.687

使用[MsiEnumRelatedProducts](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370103%28v=vs.85%29.aspx)函数枚举与升级代码匹配的产品。

# html - 使用 Nokogiri::HTML 和 Ruby 进行 Web Scraping - 输出到 CSV 问题

> ID：15690877
> 
> 赞同：0
> 
> 时间：2013-03-28T19:50:19.823
> 
> 标签：html, ruby, web-scraping, nokogiri, scrape

我有一个脚本可以抓取网上商店的 HTML 文章页面。我正在使用一组 22 页进行测试，其中 5 个文章页面有产品描述，而其他页面没有。

此代码将正确的信息显示在屏幕上：

```
if doc.at_css('.product_description')
  doc.css('div > .product_description > p').each do |description|
    puts description
  end
  else
    puts "no description"
end 
```

但是现在我被困在如何正确地将找到的产品描述输出到一个数组中，我将它们写入一个 CSV 文件。

尝试了几个选项，但到目前为止没有一个有效。如果我替换`puts description`for `@description << description.content`，那么文章的所有描述最终都会出现在 CSV 的最上面一行，尽管它们不属于该行中的文章。

当我也替换“无描述”时`@description = "no description"`，我的 CSV 中的前 14 行每人收到 1 个“无描述”字母。看起来很有趣，但这并不是我所需要的。

如果需要更多代码，请大声喊叫！

这是我在脚本中使用的 CSV 代码：

```
 CSV.open("artinfo.csv", "wb") do |row|
    row << ["category", "sub-category", "sub-sub-category", "price", "serial number",  "title", "description"]
    (0..@prices.length - 1).each do |index|
    row << [
            @categories[index], 
            @subcategories[index], 
            @subsubcategories[index], 
            @prices[index],
            @serial_numbers[index], 
            @title[index],
            @description[index]]
     end 
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:15:06.867

听起来您的数据排列不正确。如果是你应该能够做到：

```
CSV.open("artinfo.csv", "w") do |csv|
  csv << ["category", "sub-category", "sub-sub-category", "price", "serial number",  "title", "description"]
  [@categories, @subcategories, @subsubcategories, @prices, @serial_numbers, @title, @description].transpose.each do |row|
    csv << row
  end 
end 
```

# jquery - 为什么双击出现？

> ID：15690879
> 
> 赞同：4
> 
> 时间：2013-03-28T19:50:31.723
> 
> 标签：jquery, twitter-bootstrap

当我单击菜单项时，我得到 2 个单击事件而不是一个 - 问题出在哪里？

HTML：

```
<nav class="nav-collapse">
    <ul class="nav">
        <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Menu 1 <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a data-toggle="tab" href="#1">Item</a></li>
                <li><a data-toggle="tab" href="#2">Item</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Menu 2 <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a data-toggle="tab" href="#3">Item</a></li>
                <li><a data-toggle="tab" href="#4">Item</a></li>
            </ul>
        </li>
    </ul>
</nav> 
```

JS

```
jQuery('nav li').on('click', 'a[data-toggle="tab"]',  function(){
    console.log(this);
}); 
```

[http://jsfiddle.net/nonamez/ekMSy/1/](http://jsfiddle.net/nonamez/ekMSy/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:59:25.027

我认为人们在这方面想得太多了。只需删除`li`选择器的一部分：

```
jQuery('nav').on('click', 'a[data-toggle="tab"]',  function(e){
    e.preventDefault();
    alert(this);
}); 
```

[http://jsfiddle.net/W62Sw/1/](http://jsfiddle.net/W62Sw/1/)

`a[data-toggle="tab"]`您之前遇到问题的原因是因为从这个父选择器中找到了两次目标元素（ ）：（`'nav li'`因为您有嵌套菜单）。

当然，另一种选择是将主选择器更改为`jQuery('nav > li')`只选择直接子`<li>`元素，但我真的看不出有什么用。`a[data-toggle="tab"]`您的主要观点只是针对所有`nav`. 当然，它为事件委托提供了更大的父级，但从技术上讲，它只会绑定一个事件（而不是每个事件`<li>`），并且它允许在元素`a[data-toggle="tab"]`中的任何位置。`ul.nav`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:54:50.883

因为事件正在传播到父级`li`。

您需要使用以下命令阻止该操作`stopPropagation`：

```
jQuery('nav li').on('click', 'a[data-toggle="tab"]',  function(e){
    e.stopPropagation();
    alert(this);
}); 
```

这是一个更新的[Fiddle](http://jsfiddle.net/ekMSy/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:54:23.790

因为你在 li 里面有 li，所以试试这个：

```
jQuery("nav li:has('a[data-toggle]')").on('click', 'a[data-toggle="tab"]',  function(){
    console.log(this);
}); 
```

在我看来，另一个更简洁的解决方案是使用父`<ul>`元素作为附加事件委托处理程序的元素，如下所示：

```
jQuery("ul.nav").on('click', 'a[data-toggle="tab"]',  function(){
    console.log(this);
}); 
```

# android - 来自 PHP 服务器的 Android JSON 请求 - JSON 不匹配异常

> ID：15690881
> 
> 赞同：0
> 
> 时间：2013-03-28T19:50:38.013
> 
> 标签：android, json, rest

使用此函数，我将 JSON 数据读入对象，然后尝试打印它们的 ID：

```
private void getJsonData(String url) {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) { // success!
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
            JSONObject jsonObject = new JSONObject(builder.toString());
            for (int i = 0; i < jsonObject.length(); i++) {
                Toast.makeText(context, jsonObject.getString("id"), Toast.LENGTH_LONG).show();
            }
        } else {
            Log.e(">>", "Failed to download file");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

我收到此错误：http: [//i.imgur.com/CkFOJmk.jpg](http://i.imgur.com/CkFOJmk.jpg)

有任何想法吗？它在该行出错：

```
HttpEntity entity = response.getEntity(); 
```

我的PHP：

```
 $this->db->select('id, unit_number');
    $this->db->from('parts');
    $this->db->order_by('unit_number', 'desc');
    $query = $this->db->get();
    echo json_encode($query->result()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:25:20.107

不确定，但您从服务器发送的 JSON 似乎与 android(?) 使用的标准 JSON 格式有所不同。无论如何，最好看到您从服务器获得的完整字符串响应。

确保您接收的是 JSON 而不是 HTML。[错误 Android - 收到 HTML 而不是 JSON](https://stackoverflow.com/questions/13893058/error-android-received-html-instead-of-json)

# sql - 需要查询以查找 Table1 中与 Table2 中具有多个匹配项的所有记录

> ID：15690887
> 
> 赞同：1
> 
> 时间：2013-03-28T19:51:06.140
> 
> 标签：sql, ms-access

我有 2 个表，`Request`它们`Action`由字段 request_id 连接。

这是一个快速的数据示例：

```
Request
request_id    group
100           My Group Name
101           My Group Name
102           My Group Name

Action
request_id    action_id    username
100           10           JDOE
100           11           ASMITH
101           12           SMILLER
102           13           CBROWN 
```

我需要获取所有请求的列表以及具有多个操作的 action_id 和用户名。这是我目前拥有的，但它列出了所有具有一个或多个操作的请求。

所以结果应该显示：

```
request_id    action_id    username
100           10           JDOE
100           11           ASMITH 
```

以下可以选择我需要的内容，但我不确定如何将 request_id > 1 放入其中：

```
SELECT request.request_id, action.action_id, action.username
FROM request RIGHT JOIN action ON request.request_id = action.request_id
WHERE (((request.group)="My Group Name"))
GROUP BY request.request_id, action.action_id, action.username; 
```

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:00:41.517

怎么样：

```
SELECT 
Action.request_id, 
Action.action_id, Action.username
FROM [Action] 
INNER JOIN Request ON Action.request_id = Request.request_id
WHERE Action.request_id In (
  SELECT request_id FROM action Group By Request_Id 
  HAVING Count(request_id)>1)
AND Request.group="My Group Name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:01:45.500

我认为你只需要一个`having`条款。这就像一个`where`子句，但在聚合列上：

```
SELECT request.request_id, action.action_id, action.username
FROM request RIGHT JOIN
     action
     ON request.request_id = action.request_id
WHERE (((request.group)="My Group Name"))
GROUP BY request.request_id, action.action_id, action.username
having counte(request.request_id) > 1 
```

# css - 在 Chrome 用户代理样式表中，2px = 0em 怎么算？

> ID：15690888
> 
> 赞同：4
> 
> 时间：2013-03-28T19:51:06.607
> 
> 标签：css, google-chrome, stylesheet, margin, user-agent

我花了太长时间试图删除选择框左侧的额外间距，当在 Chrome 开发人员工具中，我终于看到用户代理样式表正在添加 2px 左侧边距（在计算样式下查看）。但是，当我单击 margin-left 下拉菜单以查看该样式的定义位置时，它说它被定义为 0em，如下面的屏幕截图所示……有人可以向我解释一下吗？

![Chrome 用户代理样式表 - 2px = 0em 如何？](../Images/bf9e53ae9b316c33bba505b4a06e1b32.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T20:50:49.437

**我也遇到了这个问题 - 设置一个明确的高度解决了这个问题。**

原因：

“*内在边距的目的是防止相邻控件相互碰撞。尤其是圆形控件，这看起来很糟糕。您看到值发生变化的原因是，我们只在认为不会发生内在边距时才设置内在边距破坏页面布局 如果作者在控件上指定了明确的高度/宽度，那么我们假设设计者需要像素精确的控制，因此我们关闭边距以避免破坏页面布局。

这个功能最初是由谷歌首页这样的案例所激发的，它有两个相互对接的按钮。他们现在在现代版本的页面上有间距，但过去没有。这在 Web 上也随处可见，尤其是按钮旁边的文本字段。它们最终在 OS X 上看起来很糟糕（它们在 Windows 上看起来也很糟糕，只是没有那么糟糕）。*”

来源：[http ://code.google.com/p/chromium/issues/detail?id=128306](http://code.google.com/p/chromium/issues/detail?id=128306)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:56:41.497

从该屏幕截图中，看起来有这样一条规则： `margin: 2px 2px 4px 2px`它覆盖了用户代理最初指定为 0em 的内容

# jquery - 使用 jQuery 跳转到下一个和上一个图像（垂直滚动）

> ID：15690892
> 
> 赞同：0
> 
> 时间：2013-03-28T19:51:10.470
> 
> 标签：jquery, image, keyboard, scroll

我有一个线性图像列表（垂直），我搜索使用键盘上下导航到下一个或上一个图像。我的问题是我不知道我在滚动的哪个位置以及需要滚动到下一个或上一个图像的位置。

我看到了[这个例子](http://jsfiddle.net/JjhUN/5/)，但它是水平的。我试图让它垂直，但没有成功……</p>

我还尝试了一些使用 inView jQuery 插件的东西，但也没有成功。一些开始：

```
 $("body:not(.photo) #images img").each(function() {
     $(this)
        .css({cursor: "pointer"})
        .on("click", function() {
           var $n = $(this).next(),
               offset = ($n.length) ? $n.offset().top : 0;

           scrollTo(offset);
        });
  });

  // http://jsfiddle.net/JjhUN/5/
  var elems = [];
  $("#images").children().each(function() {
     elems.push(this.offsetTop);
  });

  console.log(elems); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:10:48.637

我玩过那个水平的例子，然后把它改成垂直的。[http://jsfiddle.net/6gCA6/1/](http://jsfiddle.net/6gCA6/1/)

我希望它是有帮助的。

**JS**

```
$(function() {
    var boxLefts = [];
    $('.box').each(function(i, el){
        boxLefts.push(this.offsetTop);
    });

    $(document).keydown(function(e) {
        var dir = false,
            targetUp = -1;

        switch (e.keyCode) {
        case 38:
            dir = -1;
            break;                
        case 40:
            dir = 1;
            break;
        default:
            break;
        }

        if (dir) {
            e.preventDefault();
            winUp = window.scrollY;
            $.each(boxLefts, function(i, v){
                if ((dir == 1 && winUp < v && targetUp < 0) ||
                    (dir == -1 && winUp > v)) {
                    targetUp = v;
                }
            });
            if (targetUp >= 0) {
                $('html, body').animate({scrollTop: targetUp}, 1000);
            }
        }
    });
}); 
```

**CSS**

```
#wrapper {
    white-space: nowrap;
    width: 1500px;
}

.box {
    width: 200px;
    height: 200px;
    border: 1px solid red;
    margin: 0 10px 0 0;
    /*display: inline-block;*/
} 
```

# apache - Apache服务器安全和cPanel扫描？

> ID：15690896
> 
> 赞同：0
> 
> 时间：2013-03-28T19:51:20.720
> 
> 标签：apache, cpanel, exploit, whm, malware-detection

有没有一种方法（或 cPanel 插件）可以持续扫描站点以查找来自 WHM 或 cPanel 的漏洞利用/恶意软件/漏洞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:31:21.690

对于恶意软件问题，您可以使用： [http ://applications.cpanel.net/anti-malware-plugin-for-whm/](http://applications.cpanel.net/anti-malware-plugin-for-whm/)

对于exploit和漏洞，您可以使用外部扫描器，或者您可以使用configServer： [http ://configserver.com/cp/cxs.html](http://configserver.com/cp/cxs.html)

# python - 在 Tkinter 标签中显示更新的文本

> ID：15690901
> 
> 赞同：0
> 
> 时间：2013-03-28T19:51:30.300
> 
> 标签：python, tkinter, label

我制作了一个显示窗口的程序，并将用户输入打印到 a`Label`中，并将将来的任何输入添加到`Label`新行中。

我的问题是，一旦`x`达到行数，文本就会超出 的范围`Label`，并且您看不到它。

我想要做的是将新输入放置在所有输入的底部，导致顶线被*向上推*到标签顶部之外。

到目前为止，这是整个代码：

```
from tkinter import *

string = None
labelContents = ""

class App(Frame):
    def __init__(self, master):
        Frame.__init__(self, master)
        self.master = master
        self.initUI()

    def initUI(self):
        global string
        self.master.title("Tkinter test")

        string = StringVar()

        frame = Frame(self, relief=RIDGE, borderwidth=3, width=300, height=50)
        frame.pack(fill=BOTH, expand=1)

        label = Label(self, justify=LEFT, relief=RIDGE, borderwidth=3, textvariable=string, width=300, height=5, anchor=NW)
        label.pack(fill=BOTH, expand=1)

        self.pack(fill=BOTH, expand=1)

        self.textEntry = Entry(self)
        self.textEntry.bind('<Return>', self.updateLabel)
        self.textEntry.pack(side=TOP, fill=X, padx=5, pady=5)

        closeButton = Button(self, text="Close", height=1, width=10, command=self.close)
        closeButton.pack(side=RIGHT, padx=5, pady=5)

    def close(self):
        self.master.destroy()

    def updateLabel(self, event):
        global string
        global labelContents
        labelContents += self.textEntry.get()
        labelContents += "\n"
        string.set(labelContents)
        self.textEntry.delete(0, END)

def main():
    root = Tk()
    root.geometry("400x500+440+262")
    root.resizable(0, 0)
    app = App(root)
    root.mainloop()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:09:58.777

听起来您想使用文本小部件或列表框而不是标签，因为小部件能够将内容从顶部滚动。否则，您必须自己管理标签中的数据。

对于后者，在您的 updateLabel 函数中，您可以首先获取标签的现有内容，然后在换行符处拆分以提供列表。接下来，如果列表长于 5，则追加新项目并弹出项目。然后，用换行符加入列表并将其放回标签中。

# ruby - 如何在 Ruby 中清理 STDIN？

> ID：15690902
> 
> 赞同：2
> 
> 时间：2013-03-28T19:51:36.800
> 
> 标签：ruby, stdin

如何在 Ruby 中清理 STDIN？我想确保 STDIN 中没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:15:38.040

`IO#ready?`您可以使用from检查 STDIN 中是否有可用的输入`io/wait`。用于`IO#getc`读取字符，将其从缓冲区中删除。

```
require 'io/wait'

def clear_stdin
  $stdin.getc while $stdin.ready?
end 
```

# amazon-web-services - SQL 备份到 S3

> ID：15690903
> 
> 赞同：0
> 
> 时间：2013-03-28T19:51:40.563
> 
> 标签：amazon-web-services, amazon-s3, regions

我有以下 Amazon EC2 配置

1.  Prod Web & DB 服务器（弗吉尼亚）
2.  Web & DB 服务器（俄勒冈）

我想将我的 SQL 备份存储在 S3 中，以便它们可以恢复到我的备用服务器，以防弗吉尼亚地区在任何时间段内出现故障（已知会发生这种情况:)

以下是我正在为我的 S3 存储桶考虑的以下 2 个区域

1.  美国标准
2.  俄勒冈

我首先尝试指定俄勒冈州。但是，当我这样做时，我无法（出于某种原因）从我的弗吉尼亚实例上传到该存储桶。但是，我担心如果我指定美国标准，如果弗吉尼亚不可用，我的 S3 存储桶将不可用。

有没有人有任何建议来克服这些场景中的任何一个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:26:52.043

我对您的建议是使用 RDS（关系数据库服务），它基本上是 MySQL（或 MS-SQL 或 Oracle）的托管 RDBMS 服务。它负责数据库的备份和恢复。

MySQL 可以选择在每个区域的不同可用区中进行自动备用。当您使用“[多](http://aws.amazon.com/rds/faqs/#42)可用区”选项时，它将以同步方式创建备用数据库及其备份。这样，您的故障转移将非常接近实时。

# testing - Lambda 演算表达式测试平台？

> ID：15690904
> 
> 赞同：5
> 
> 时间：2013-03-28T19:51:46.550
> 
> 标签：testing, expression, lambda-calculus

我想针对相当大的 Lambda Calculus 表达式测试集测试我编写的 Lambda Calculus 解释器。有谁知道我可以使用的 Lambda Calc 表达式生成器（在 Google 上进行初始搜索时找不到任何东西）？这些表达式显然必须正确形成。

更好的是，虽然我自己创建了各种示例并制定了解决方案，以便我可以检查结果，但有没有人知道一组好的（和大量的）已解决的 Lambda 微积分减少问题的解决方案？我可以自己输入表达式，因此更重要的是拥有多种更简单（和更大）的 lambda 演算表达式，我可以在这些表达式上测试我的解释器（目前模拟正常顺序和按名称调用评估策略）。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T07:44:23.360

Asperti 和 Guerrini (1998, *The Optimal Implementation of Functional Programming Languages* , CUP Press; 尤其参见第 5 章和第 6 章) 描述了一些来自 Jean-Jacques Levy 的 redexes 和标记归约理论的更痛苦的 lambda 项：这些给出衡量相互冲突的 beta 减少之间相互作用的复杂性，其中减少任何一个 redex 都会为另一个创造工作。

碰撞减少的一个相对简单的例子是：

```
let D =  λx(x x); F= λf.(f (f y)); and I= λx.x in
    (D  (F I)) 
```

它有两个 beta-redexes 并减少到`(y y)`：通过常规替换减少其中一个，您将创建两个新的 redexes，每个都与原始术语中的一个结构相关。

以同样的方式迭代 Church 数字也很好：

```
let T = λfx. f(f( x)) in 
    λfx.(T (T (T (T T))) f x) 
```

（这减少了 65 536 的 Church 数字），这会产生很多冲突的 redexes。

通常，将高阶项相互应用，无论它们是否“类型良好”或是否具有明显意义，都是产生复杂中间结构的努力工作的良好来源。

# c# - 了解 mvc 中的缓存

> ID：15690907
> 
> 赞同：0
> 
> 时间：2013-03-28T19:51:54.537
> 
> 标签：c#, asp.net-mvc, caching

在查看页面上，我已在选项卡中加载了内容。在用户单击选项卡内部时，我正在向控制器发送 ajax 请求，该控制器发回部分视图。一切正常，现在我想在此选项卡内容上实现缓存。所以，我想在第一个选项卡调用内容上加载然后缓存 60 秒。对于所有其他选项卡内容也是如此。

我尝试过这样的事情

```
[DonutOutputCache(Duration = 60, VaryByParam = "activeTab")]
public ActionResult GetTabData(string activeTab)
{....} 
```

但这会在每个其他选项卡中显示第一个选项卡的缓存内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:57:34.027

DonutOutputCache 属性在哪里定义？也许它没有正确使用 VaryByParam？

[在 MVC 3 中，您不再需要在内置的 OutputCache 属性上指定 VaryByParam 选项。](http://weblogs.asp.net/scottgu/archive/2010/12/10/announcing-asp-net-mvc-3-release-candidate-2.aspx)

```
[OutputCache(Duration=60)]
public ActionResult GetTabData(string activeTab)
{....} 
```

应该是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:58:11.457

在我的 ASP MVC 项目中，我从未成功使用缓存操作上的属性。我的一位同事说他使用它们并且它有效，但我总是不得不告诉页面不要使用它来缓存：

```
$.ajaxSetup({cache:false}); 
```

或者在我的 $.ajax 中包含 cache: true / false

```
$.ajax({ .... cache: false, ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:09:19.653

**请参考下面的链接。它在输出捕获中给出了正确的细节**

[ASP.NET MVC 中的输出缓存](http://juristr.com/blog/2012/10/output-caching-in-aspnet-mvc/)

**通过输出缓存提高性能：**

[通过输出缓存提高性能](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

# ruby - 当我的脚本采用 CLI 参数时如何运行 ruby 探查器

> ID：15690908
> 
> 赞同：1
> 
> 时间：2013-03-28T19:52:08.203
> 
> 标签：ruby, profiler

这是我运行脚本的方式：

```
ruby script.rb Arg1 [optional-Arg2] 
```

如何运行 ruby​​ 分析器并将输出发送到文件？

我试过这个：

```
ruby -r profile script.rb arg1 > out.txt 
```

和一些引用混合在：

```
ruby -r profile "script.rb arg1" > out.txt 
```

到目前为止没有任何工作。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:10:19.933

没有测试，但是

```
ruby -r profile script.rb arg1 > out.txt 2>&1 
```

应该做。探查器最有可能在 std_error 上打印内容，而不是在 std_out 上。

# ruby-on-rails - 无法在哈希中保存日期（Mongid，Rails）

> ID：15690914
> 
> 赞同：1
> 
> 时间：2013-03-28T19:52:18.110
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我在 rails 中使用 mongoid 作为我的 mongodb 后端的 orm。我可以创建一个对象（注意 release_date 是一个日期对象）：

```
movie1 = Movie.create(title: "The Dark Knight", release_date: "2012-03-03")
=> #<Movie _id: 515490b884322b14e2000002, _type: "Movie", title: "The Dark Knight", release_date: 2012-03-03 00:00:00 UTC> 
```

但是当我尝试使用它`movie.release_date`来将它放入哈希中时，它将日期输出为字符串，并且我无法保存我的哈希：

```
list.data[1] = {id: movie2.id, title: movie2.title, release_date: movie2.release_date}
 => {:id=>"515490ce84322b14e2000003", :title=>"The Matrix", :release_date=>Sat, 04 Apr 1998} 
```

任何形式的帮助将不胜感激，再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:44:46.627

这不是字符串 - Ruby 只是调用`inspect`散列的每个项目来向您显示一个人类可读的值。请注意，`"`日期周围没有。

```
class Movie 
    include Mongoid::Document

    field :release_date, type: Date
end

movie1 = Movie.create(title: "The Dark Knight", release_date: "2012-03-03")
hash = {release_date: movie1.release_date}
p hash[:release_date].class # => Date 
```

# image - css3中的两个空中飞人

> ID：15690915
> 
> 赞同：2
> 
> 时间：2013-03-28T19:52:21.787
> 
> 标签：image, css, css-shapes

我有一个关于 css3 和空中飞人的小问题。我有两个并排的方形图像（每个都向左浮动 - 白点），我希望它们看起来像这样：

![并排的形状](../Images/10dae9dd21da2dd3a60f8b6adaa5e19b.png)

你会怎么做？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:17:46.473

如果 pic1 是 a`.png`并且由梯形边缘的角度创建的负空间是透明的，那么这应该有效：

```
#pic1, #pic2 {
    float: left;
    position: relative;
}
#pic1 {
   z-index: 2;
}
#pic2 {
   right: 30px; /* Or whatever the difference in image sizes is */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:17:50.013

首先，您开始设置一条条，该条将沿着顶部和底部边界切割，以及放置图像的位置：

```
.demo1 {
    overflow-y: hidden;
} 
```

在里面，会有向左浮动的基本元素，

```
.base {
    width: 100px;
    height: 100px;
    float: left;
} 
```

在内部，一个剪切元素旋转：

```
.demo1 .clip {-webkit-transform: rotate(15deg);}

.clip { 
    height: 177%; 
    width: 125%; 
    margin-top: -40%; 
    -webkit-transform-origin: 0% 50%; 
    overflow: hidden
} 
```

在内部，图像，反向旋转 .demo1 .inner { -webkit-transform: rotate(-15deg); } .inner { -webkit-transform-origin: 0% 50%; 左边距：-151%；保证金最高：19%；}

html是：

[WEBKITTED DEMO](http://jsfiddle.net/vals/THR3F/) webkitted 表示只使用 webkit 前缀 :-)

由于有人提供 100 万积分，我决定加倍努力。请参阅通过 nth-child() 指定旋转的第二条 (demo2)。这允许为每个过渡获得不同的角度。

完整的 CSS：

```
.demo1, .demo2 {
overflow-y: hidden;
}
.base {
width: 100px;
height: 100px;
float; left;
}

.clip {height: 177%; width: 125%; margin-top: -40%;-webkit-transform-origin: 0% 50%; overflow: hidden}
.inner {-webkit-transform-origin: 0% 50%;margin-left: -151%;margin-top: 19%;}
.terminator {background-color: white}

.demo1 .clip {-webkit-transform: rotate(15deg);}
.demo1 .inner {-webkit-transform: rotate(-15deg);}
.demo2 :nth-child(odd) .clip {-webkit-transform: rotate(15deg);}
.demo2 :nth-child(odd) .inner {-webkit-transform: rotate(-15deg);}
.demo2 :nth-child(even) .clip {-webkit-transform: rotate(-15deg);}
.demo2 :nth-child(even) .inner {-webkit-transform: rotate(15deg);margin-left: -151%;margin-top: -30%;} 
```

**注意**准确放置图像的微积分很奇怪；我通过反复试验来结束它。此外，您需要在不丢失兴趣点的情况下切割具有足够余量的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:58:54.487

您可以使用带有透明边框的 CSS 三角形技巧

**html**

```
<div class="pic pic-1">Pic 1</div>
<div class="pic pic-2">Pic 2</div> 
```

**css**

```
.pic{
    width:100px;
    height:100px;
    float:left;
    text-align:center;
    line-height:100px;
    color:white;
    position:relative;
}
.pic-1{
    background:orange;
}
.pic-2{
    background:limegreen;
}
.pic:after{
    content:'';
    display:block;
    position:absolute;
    height:0;
    width:0;
    z-index:10;
}
.pic-1:after{
    top:0;
    right:-10px; /* must match the border left */
    border-left: 10px solid orange; /*play with width to change angle*/
    border-bottom:50px solid transparent;
}
.pic-2:after{
    bottom:0;
    left:-10px; /* must match the border right*/
    border-right: 10px solid limegreen;/*play with width to change angle*/
    border-top:50px solid transparent;
} 
```

**演示在** [http://jsfiddle.net/gaby/eh2f3/](http://jsfiddle.net/gaby/eh2f3/)

# php - 数组键有问题，未定义索引

> ID：15690917
> 
> 赞同：0
> 
> 时间：2013-03-28T19:52:26.717
> 
> 标签：php, arrays

我正在使用几个数组，其中一个具有作为 productid 的键，值是包含该产品的学说实体的对象。同样，我有一个索引为计划 ID 的计划。对于这个 for 循环，我需要为每个计划-产品对检查并单独设置发票（它们之间的数量将始终相同，除非用户正在为已经拥有的设备购买计划）。显然这有点复杂，所以我不确定如何表达这个问题。注释行出现错误，“注意：未定义索引”

```
for ($i = 0; $i < $totalInvoices; $i++) {
        if ($i == $planQuantity[key($plans)]) {
            next($plans);
        }
        if ($i == $productQuantity[key($products)]) {
            next($products);
        }
        $data = array(
            'planId' => key($plans),
//below here, I'm thinking at key($products) is where the error occurs
            'productId' => key($products) != 0 ? key($products) : $plans[key($plans)]->getPricingTier()->getProductId(),
            'userId' => $this->userId,
            'paymentMethodId' => $paymentMethodId
        );
        if ($order['hasProduct'] || isset($order['activating'])) {
            if (!isset($order['activating'])) {
                $planModel->createDevicePlan($data);
                $productAmount = $products[key($products)]->getAmount();
            } else {
                $data['deviceId'] = $order['activating']['inventoryId'];
                $planModel->createDevicePlan($data, date('Y-m-d'));
                $productAmount = 0;
            }
        } else {
            $productAmount = 0;
        }
        if ($iteration % 5 == 0 && $order['hasShipping']) {
            $invoiceShippingAmount = $billingModel->getShippingAmount($shippingOptionsId);
        } else {
            $invoiceShippingAmount = 0;
        }
        $salesData = array(
            'paymentMethodsId'    => $paymentMethodId,
            'planAmount'          => $plans[key($plans)]->getAmount(),
            'planId'              => key($plans),
            'productAmount'       => $productAmount,
            'productId'           => key($products),
            'shippingAddressesId' => $shippingAddressId,
            'shippingAmount'      => $invoiceShippingAmount,
            'shippingOptionsId'   => $shippingOptionsId,
            'transactionId'       => $transactionId,
            'userId'              => $this->userId
        );
        $iteration++;
        $billingModel->createInvoice($salesData);
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:26:05.483

根据您的评论回复，我认为这会有所帮助

```
$plans_on_invoice = 0;
$products_on_invoice = 0;
for ($i = 0; $i < $totalInvoices; $i++) {
    next($plans);
    if ($plans_on_invoice == 0) {
        $plans_on_invoice = $planQuantity[key($plans)];
    }
    plans_on_invoice--;
    next($products);
    if ($products_on_invoice == 0) {
        $products_on_invoice = $productQuantity[key($products)];
    }
    products_on_invoice--; 
```

# python - web.py 中跨多个页面的相同模板

> ID：15690919
> 
> 赞同：0
> 
> 时间：2013-03-28T19:52:32.793
> 
> 标签：python, web.py, pythonanywhere

我很难理解如何在多个页面上使用相同的模板进行网站布局（请不要只将我链接到 Web.Py 页面上的“网站布局食谱”。它只在单个页面上使用模板，我已经可以做到了）。

我的代码在下面，对我来说很有意义，但我想知道我做错了什么。我是新手，所以我确定我在做一些非常愚蠢的事情。

我得到的错误是：

```
<type 'exceptions.AttributeError'> at /vip
'title' 
```

主文件

```
#coding=utf-8

import web
urls = (
    '/', 'index',
    '/vip', 'vip'
)

render = web.template.render('templates')

class pagedata:
    def __init__(self, title, description, downloadlink):
        self.title = title
        self.description = description
        self.downloadlink = downloadlink

class index:
    def GET(self):
        pageinfo = pagedata("Demo", "Demo description", "http://www.google.com")
        return render.index(pageinfo)
class vip:
    def GET(self):
        pageinfo = pagedata("Demo2", "Demo description2", "http://www.yahoo.com")
        return render.index(pageinfo)

app = web.application(urls, globals())
application = app.wsgifunc() 
```

模板/index.html

```
$def with (pageinfo)

<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />    
        <title>$pageinfo.title</title>
        <link rel="stylesheet" href="default.css" />
    </head>
    <body>
        <p>$pageinfo.description</p>
        <p><a href="$pageinfo.downloadlink">$pageinfo.downloadlink</a></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:29:34.167

我是个白痴。请关闭问题。

我必须做的是重组代码以呈现一个单独的模板，而不是重用索引之一，然后将“基础”元素设置为我的布局模板。

# winapi - 我可以在消息回调中调用 TranslateMessage 吗？

> ID：15690920
> 
> 赞同：0
> 
> 时间：2013-03-28T19:52:32.887
> 
> 标签：winapi, visual-c++, message-queue

我没有运行规范的消息循环，那么有没有一种方法可以在我的消息处理处理程序中调用 TranslateMessage（或其等效项）？

基本上我需要`WM_CHAR`消息，除非我可以调用 TranslateMessage，否则我不会收到这些消息。目前我有消息处理设置，但没有消息循环。

```
// Static window function called by Windows for message processing. Implementation 
// delegates message processing to MemberWndProc.
LRESULT CALLBACK FxPlayerTiny::WindowsMsgStatic(HWND hwnd, UINT iMsg, WPARAM wParam, LPARAM lParam)
{

      msg = PeekMessage(&msg, HWnd, WM_KEYFIRST, WM_KEYLAST, PM_NOREMOVE);

      if (msg type is key down){

            TranslateMessage(&msg);
            //DispatchMessage(&msg); -- needed?

      }
      else process msg normally
} 
```

我的消息 proc 处理程序是消息的第一个入口点，以下列方式设置：

```
WNDCLASSEX  wc;
wc.lpfnWndProc    = WindowsMsgStatic;
....
RegisterClassEx(&wc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:08:42.190

在某些时候，为了获得排队的消息，您必须调用类似`GetMessage`or的函数`PeekMessage`。这些函数产生`MSG`对象，而您必须将这些`MSG`对象传递给`TranslateMessage`and `DispatchMessage`。

在问题的原始版本中的代码中，您尝试调用`TranslateMessage`并且`DispatchMessage`为时已晚。你在你的窗口过程中调用它们。您应该在第一次收到`MSG`对象时调用它们。换句话说，在调用or之后直接调用`TranslateMessage`and 。`DispatchMessage``PeekMessage``GetMessage`

# javascript - 获取用户喜欢的列表

> ID：15690921
> 
> 赞同：0
> 
> 时间：2013-03-28T19:52:34.790
> 
> 标签：javascript, facebook, facebook-like, facebook-fql

我的页面上有大约 5 到 25 个类似 url，我希望能够找出用户是否已经喜欢一个。现在我正在做类似的事情

```
foreach ( like url){
 'https://graph.facebook.com/me/likes/@id?access_token=
} 
```

这显然不是真正的代码，但你明白了，这工作正常，但我有时会从这个循环中为每个用户的每个页面加载 30 个 api 调用。那很糟。我们开始达到 api 限制并被 facebook 屏蔽——也很糟糕。

我想要一种方法来传递一组 id 并查看用户喜欢哪些，我在想可能是通过 fql 吗？我想到了这个，但似乎不起作用

```
'SELECT post_id FROM like WHERE user_id = ' + me ' AND object_id IN ( ' + arrayOfIds + ' )' 
```

# python - Pandas 时间序列操作

> ID：15690925
> 
> 赞同：1
> 
> 时间：2013-03-28T19:52:47.463
> 
> 标签：python, scipy, pandas, time-series

我是熊猫新手。我有一个时间序列数据。我怎样才能轻松地进行以下操作？

我有一个称为输入的二维矩阵。每行有 5 个元素。有很多行（数千）

`input[t,:] = [f1, f2, f3, f4, f5]`

(1) 我需要计算样本之间的相对差异。

IE`rel[t,:] = ( input[t,:]-input[t-1,:] ) / input[t-1,:]`

(2) 我需要创建一个大小为 80 的滑动窗口。

IE`win[t,:] = [rel[t,:],rel[t-1,:],...,rel[t-79,:]]`

我怎么能在 Pandas 或任何其他框架（例如 scikit.timeseries）中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:16:06.800

这些文档对这些类型的操作非常全面

看：

1) [http://pandas.pydata.org/pandas-docs/dev/timeseries.html#time-series-related-instance-methods](http://pandas.pydata.org/pandas-docs/dev/timeseries.html#time-series-related-instance-methods)

2) [http://pandas.pydata.org/pandas-docs/dev/computation.html#expanding-window-moment-functions](http://pandas.pydata.org/pandas-docs/dev/computation.html#expanding-window-moment-functions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T20:19:15.190

您可以在普通的 numpy 中完成这两项操作，尽管 pandas 可能具有使其更容易的特定功能。但：

```
rel = np.diff(input) / input[:-1] 
```

和

```
from numpy.lib.stride_tricks import as_strided
win = as_strided(rel, shape=(rel.shape[0]-79, 80), strides=rel.strides*2) 
```

会做的。

* * *

如果输入多于一行，您仍然可以按照以下方式执行上述操作：

```
rel = np.diff(input, axis=1) / input[:, :-1]
win = as_strided(rel, shape=(rel.shape[0], rel.shape[1]-79, 80),
                 strides=rel.strides + rel.strides[1:]) 
```

尽管您可能想玩弄“形状”并进行匹配`strides`以获得您所追求的确切窗口形状。

# javascript - 模块化和多视图的骨干路由

> ID：15690926
> 
> 赞同：1
> 
> 时间：2013-03-28T19:52:47.937
> 
> 标签：javascript, backbone.js, backbone-routing

所以我对我的骨干路由设计有点进退两难，我想看看其他人是怎么想的或试图做些什么来解决这个问题。

基本问题是我正在编写一个具有多个视图的应用程序，并且每个视图中都有嵌套视图，并试图避免使用一个主干路由器来控制这些视图和嵌套视图的状态。

问题的例子是：

```
Backbone.Router.extend({ routes: 
'view1' : ..., 'view2Nested': ..., 
'View2NestedNested' ...}); 
```

视图布局：

*   视图1
    *   View1嵌套
*   视图2
    *   View2嵌套
    *   View2Nested嵌套

在此配置中，路由器现在必须了解 View2NestedNested 以便向其发送任何操作信息，这可能意味着主路由器必须持有对视图的引用或了解 view2 并获取它对 view2Nested 的引用，然后向该视图询问 view2NestedNested .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:17:32.490

我的方法是通过引用它的父级来创建视图。

所以基本上你的观点看起来像这样：

```
var ViewAA = Backbone.View.extend({
    initialize: function(options) {
         this.parent = options.parent
    },

    render: function() {
         this.parent.router.navigate("viewA/viewAA");
    }
});

var ViewA = Backbone.View.extend({
    initialize: function(options) {
         this.router = options.router
    },

    render: function() {
       this.nestedView = new ViewAA({ parent: this });
    }
});

var router = new Router();

var viewA = new ViewA({ router: router }); 
```

第二种方法，我在更复杂的应用程序中使用的是使用一个全局变量......它看起来像这样：

```
var ViewAA = Backbone.View.extend({
    initialize: function(options) {

    },

    render: function() {
         app.router.navigate("viewA/viewAA");
    }
});

app = {
    router: new Router(),
    classes: {
        ViewA: Backbone.View.extend({ ... }),
        ViewAA: Backbone.View.extend({ ... })
    },
}

app.viewA = new app.classes.ViewA();
app.viewAA = new app.classes.ViewAA(); 
```

提示：使用 RequireJS 和 AMD 方法总是更好，所以你可能也想尝试一下。

# facebook - Facebook Feed Dialogue 显示代码而不是内容

> ID：15690930
> 
> 赞同：2
> 
> 时间：2013-03-28T19:52:58.137
> 
> 标签：facebook

我一直在努力在我的网站上显示一个 facebook“贴到墙上”对话，但它显示的只是该页面上的代码。

这是应该发生的事情：

1.  访问者来到我的网站并点击我制作的自定义“分享”按钮
2.  然后访问者被重定向到不同页面上的提要对话框，他们共享我的页面。
3.  然后他们继续下载我提供的内容。

我制作了一个 facebook 应用程序，然后从 facebook 开发人员页面复制了代码并填写了我需要的所有内容，但是每当我单击共享时，它会将我带到一个包含所有代码的页面。

![在此处输入图像描述](../Images/36b17c0d88c3b7aa4e153629e6cd1a70.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:04:51.003

试试这个，加载 javascript SDK：

```
<div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function() {
            FB.init({
              appId      : 'YOUR_APP_ID', // App ID
              channelUrl : 'URL_TO_CHANNEL_FILE', // Channel File optional
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });
        };

        // Load the SDK Asynchronously
        (function(d){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        }(document));
    </script> 
```

然后为你的按钮添加一个监听器，假设你的按钮有 id，`bt-download`

```
<script>    
$(document).on("click", "#bt-download", function(){
       var obj = {
            method: 'feed',
            link: 'link to your webpage',
            picture: "url to the picture you want size 90px x 90px",
            name: 'the name you want',
            caption: 'your caption',
            description: 'your description',
            display: 'popup'
       };

       function callback(response) {
           if (response && response.post_id) {
            alert('Post was published.');
            //here you can redirect the user to the download page
           } else {
             alert('Post was not published.');
           }
       }
       FB.ui(obj, callback);

            });
</script> 
```

# ios - iOS web api 数据管理（单例？）

> ID：15690931
> 
> 赞同：3
> 
> 时间：2013-03-28T19:53:15.950
> 
> 标签：ios, api, core-data, singleton, webserver

这是一个非常典型的场景，但我想知道最好的方法是什么。

假设我需要构建一个与 REST API 交互的应用程序。然后，来自 Web 服务器的数据以多种方式显示在整个应用程序中。

通常我处理这个问题的方式是让一个单例处理所有数据操作（从/到服务器获取/存储数据并将数据保存在内存中。然后当我想在表格视图中显示这些数据时，我会访问这个单例直接在数据源方法中。例如 [[MyApi sharedInstance] arrayOfCustomObjects];

所以基本上每当应用程序的某些部分需要访问数据时，它都会通过访问单例来实现。

这是解决这个问题的好方法吗？还有其他可能更有用的模式吗？

另一种选择是，不是将数据存储在单例中，而是让每个控制器保存实例变量来存储它们需要的数据，然后使用单例仅从服务器获取数据，但自己存储数据。这里的问题是，如果控制器被提前解除，那么这个实例变量就会消失，服务器访问就被浪费了（但也许这是件好事？）。

最后，当您将持久性融入其中时，什么是好的策略？我想让 CoreData 位于网络调用和应用程序的其余部分之间会是一个好方法吗？

我想这里真正的问题是管理来自服务器的数据的最佳方法是什么，并且可能应该被持久化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:07:41.027

这个问题有点宽泛，但我可以告诉你我通常是如何工作的。

我通常有一个用于 API 客户端的单例，以这种方式实现

```
+ (instancetype)sharedAPI {
    static dispatch_once_t once;
    static id _sharedInstance;
    dispatch_once(&once, ^{
        _sharedInstance = [[self alloc] init];
    });
    return _sharedInstance;
} 
```

然后我使用自动[`RestKit`](http://restkit.org)将我的 REST 资源映射到`CoreData`实体上。这种方法的美妙之处在于我不必手动处理`CoreData`持久性，但`RestKit`我在每次 API 请求时都会为我关心这一点。

我的 API 客户端所做的只是提供包装`RestKit`API 的有用方法。

例如，这是我用于检索当前用户信息的 API

```
- (void)getCurrentUserWithSuccess:(void (^)(HSUser *))success
                          failure:(void (^)(NSError *))failure {
    NSString * path = [NSString stringWithFormat:HS_API_USER_PATH, [HSUser currentUser].userId;
    [[RKObjectManager sharedManager] getObject:nil path:path parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        HSUser * user = [mappingResult firstObject];
        if (success) {
            success(user);
        }
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"%@", error);
        if (failure) {
            failure(error);
        }
    }];
} 
```

在我的控制器逻辑中，我可以调用

```
[[HSAPI sharedAPI] getCurrentUserWithSuccess:^(HSUser * user) {
    //do something
} failure:^(NSError * error) {
    //do something else
}]; 
```

正如我之前所说，在这样的 API 调用之后，与当前用户对应的 HSUser 实例会自动持久化。

我觉得绝对方便。

# java - 如何使用 Dozer 指定循环关系的递归限制或级别

> ID：15690934
> 
> 赞同：4
> 
> 时间：2013-03-28T19:53:25.333
> 
> 标签：java, dto, dozer

我有两个相互引用的 JPA2 实体类

```
class Person {
   int id;
   String name;
   @ManyToOne(fetch = FetchType.LAZY)
   Company company;
}

class Company{
   int id;
   String name;
   @ManyToOne(fetch = FetchType.LAZY)
   Person representative;
} 
```

拥有这些数据：

```
Company company1 = Company(1,"Company1", 2)
Company company2 = Company(2,"Company2", 1)

Person person1 = Person (1,"Person1", 1)
Person person2 = Person (2,"Person2", 2) 
```

person2 为 company2 工作，其代表为 person1 为 company1 工作，其代表再次为 person2

我知道 Dozer 能够将此模型复制到 DTO（CompanyDTO 和 PersonDTO）。在我的测试中，它们可以工作并且具有无限的递归级别。我理解这是因为 Dozer 使用与 DTO 中的引用相同的实例化对象。

我的问题是，如果有成千上万的人代表数百家公司，PersonDTO 实例的图表会不会太大而无法处理？如何为这种情况指定某种限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:25:52.527

有两种可能的策略来处理这种情况。

1.  在调用 Dozer 之前，循环遍历您的数据模型以触发延迟加载，直到您需要的深度。然后使用 Dozer 的代理处理功能，因此它会解开对象并且不会进一步触发延迟加载（[http://dozer.sourceforge.net/documentation/proxyhandling.html](http://dozer.sourceforge.net/documentation/proxyhandling.html)）。Hibernate 有一个代理处理程序，如果您使用的是 Eclipse Link 或其他东西，您必须自己编写。
2.  编写一个自定义转换器 ( [http://dozer.sourceforge.net/documentation/customconverter.html](http://dozer.sourceforge.net/documentation/customconverter.html) )，它将遍历对象层次结构，直到您需要的级别。它可以通过 MapperAware 递归自定义转换器或使用 ThreadLocal 作为级别计数器的普通转换器来完成。

# php - 使用 jquery 时表单字段未发布到 php 文件

> ID：15690936
> 
> 赞同：1
> 
> 时间：2013-03-28T19:53:33.000
> 
> 标签：php, jquery, html

我有一个包含两个字段的表单的 HTML 文件。这些字段的值应该发布到 PHP 中，并且这个 PHP 应该使用 JQuery 从 HTML 中获取。这就是我实施的。

我的 HTML 文件：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
    <script>
        $(document).ready(function(){
           $("button").click(function(){
                $("#first").load("result_jquery.php");
            });
        });     

    </script>
</head>
<body>
    <div id="first"></div>
    <div>
        <form method="POST" id="myForm">
        Name: <input type="text" name="name"/><br/>
        Number: <input type="text" name="number"/><br/>
        <button>submit</button>
        </form>
    </div>
</body> 
```

这是我的**result_jquery.php**

```
<?php
$n = $_POST["name"];
echo "hello ".$n;
?> 
```

当我单击提交按钮时，会打印你好。但是这个名字没有被打印出来。你能帮我解决这个问题吗？我不知道我哪里错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:02:03.227

我认为按钮元素的使用令人担忧，我现在将放置的代码可以根据需要正常工作，所以试试这个并告诉我结果:)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
<script>
    $(document).ready(function(){
       $("#button").click(function(){
            var n = $('[name="namee"]').val();
            var nb = $('[name="number"]').val();
            $("#first").load("result_jquery.php",{'namee':n,'number':nb},function(data){});
        });
    });     

</script>
</head>
<body>
    <div id="first"></div>
    <div>
        <form method="POST" id="myForm">
            Name: <input type="text" name="namee"/><br/>
            Number: <input type="text" name="number"/><br/>
            <input type="button" value="Submit" id="button" />
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:43:19.047

复制这段代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#send").click(function() {
        $.ajax({ 
            type: "POST", 
            data : "name="+$( '#name' ).val(),
            url: "result_jquery.php", 
            success: function(msg) {
                $('#first').html(msg);
            }
        }); 
    });
});
</script> 
```

改变这个形式

```
<form method="POST" id="myForm">
    Name: <input type="text" id="name" name="name"/><br/>
    Number: <input type="text" id="number" name="number"/><br/>
    <input type="button" id="send" value="Submit">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:02:52.537

来自 jQuery 文档`load`：

> 此方法是从服务器获取数据的最简单方法。它大致相当于 $.get(url, data, success) ，只是它是一个方法而不是全局函数，并且它具有隐式回调函数。当检测到成功响应时（即当 textStatus 为“success”或“notmodified”时），.load() 将匹配元素的 HTML 内容设置为返回的数据。这意味着该方法的大多数用途都非常简单：

您正在使用该方法执行 HTTP GET，而不是 POST。

我的建议是，如果您想向服务器发送一个包含信息的 AJAX 请求，请习惯使用长格式的 jQuery AJAX：

```
$.ajax({
    data: 'url=encoded&query=string&of=data&or=object',
    url: 'path/to/server/script.php',
    success: function( output ) {
        // Handle response here
    }
}); 
```

有关详细信息，请参阅 jQuery 文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T20:27:20.107

试试看，然后告诉我结果：）

```
var n = $('[name="name"]').val();
var nb = $('[name="number"]').val();
$('#error').load("result_jquery.php", {'name':n,'number':nb},function(data){}); 
```

注意尝试将名称字段的元素名称从“name”更改为“namee”，并根据需要应用更改，如下所示：

```
var n = $('[name="namee"]').val();
var nb = $('[name="number"]').val();
$('#error').load("result_jquery.php", {'namee':n,'number':nb},function(data){}); 
```

和 result_jquery.php 文件：

```
<?php
$n = $_POST["name"];
echo "hello ".$n;
?> 
```

# javascript - 使用支持 IE 的 jQuery 设置单选元素文本

> ID：15690946
> 
> 赞同：0
> 
> 时间：2013-03-28T19:54:11.750
> 
> 标签：javascript, jquery

如何使用支持 IE 的 jQuery 设置单选元素的文本。我用这个：

```
$('<input>'+variable+'</input>').attr({ 
type: 'radio',
name: 'RadioName',  
value: 'Value'}).appendTo("#Something"); 
```

Firefox 和 Chrome 支持它。IE没有。错误消息：“不支持此命令”我尝试了 .text() 并且也不支持。

有人知道另一种设置收音机文本的方法。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:11:55.163

我认为应该是`<input />`而不是`<input></input>`...

并设置文本，您可以使用`<label>`标签

在 IE 上工作的示例：http: [//jsfiddle.net/YBVns/3/](http://jsfiddle.net/YBVns/3/)

```
var variable = "Hello";

$('<input>').attr({ 
type: 'radio',
name: 'RadioName',  
value: 'Value'}).appendTo("body");

$("<label>").text(variable).appendTo("body"); 
```

# winapi - 这个 Win32 消息传递循环到底发生了什么？

> ID：15690953
> 
> 赞同：0
> 
> 时间：2013-03-28T19:54:27.067
> 
> 标签：winapi, visual-c++, messaging

这个 Win32 消息循环内部到底发生了什么？我知道这`TranslateMessage`是将键码转换为 UTF 字符码并发送`WM_CHAR`事件，但是到底`PeekMessage`要做什么呢？它是否过滤掉某种类型的消息并只翻译那些消息？

```
// Application / Player message loop.
MSG msg;
ZeroMemory(&msg, sizeof(msg));

while(msg.message != WM_QUIT)
{
    if (PeekMessage(&msg, NULL, 0U, 0U, PM_REMOVE))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

   // work happens here...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T20:03:54.213

通常消息循环将使用`GetMessage`而不是`PeekMessage`. 不同的是`PeekMessage`立即返回。`TRUE`如果删除了消息，或者`FALSE`没有获取消息，则返回。另一方面，如果队列为空，则`GetMessage`阻塞直到消息到达。

重点是说明*工作发生在这里*的评论。大概作者有一些理由说明正常的阻塞消息循环是不够的。问题中非阻塞消息循环代码的缺点是它是一个繁忙的循环。它不会闲置，因此它将完全消耗 CPU，除非`Sleep()`您已取消调用或类似调用。

在评论中，您说您实际上只想拉出键盘消息，并且只是针对特定窗口的消息。你需要这样调用`PeekMessage`：

```
PeekMessage(&msg, hwnd, WM_KEYFIRST, WM_KEYLAST, PM_REMOVE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T20:00:51.587

它只是一种获取消息的非阻塞方式。它检查是否有消息，如果有，则将其从队列中取出并放入 &msg。

检查[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644943%28v=vs.85%29.aspx)。

第二个参数表示要查看哪个窗口。在这种情况下，它是“线程中的所有窗口”。

第三个和第四个参数 do 让您指定是否需要键盘或鼠标事件，但当前设置为“all”。

# asp.net - 如何避免按钮单击时的 Page_Load()？

> ID：15690963
> 
> 赞同：7
> 
> 时间：2013-03-28T19:54:52.787
> 
> 标签：asp.net, c#-4.0, webforms, asp.net-4.0

我有两个按钮，预览和保存。借助预览按钮，用户可以根据格式查看数据，然后可以保存。

但是当单击预览时，附加到 ajaxcontrol (Calender) 的一个文本框变为空，用户必须在保存前填写日期。如何处理？在预览点击我得到细节以显示布局中的数据。

```
<asp:TextBox ID="txtDate" ReadOnly="true" runat="server"></asp:TextBox>
                    <div style="float: right;">
                        <asp:ImageButton ID="imgcalender1" runat="server" ImageUrl="~/images/calendar.png"
                            ImageAlign="Bottom" />
                        <asp:CalendarExtender ID="ajCal" TargetControlID="txtpublishDate" PopupButtonID="imgcalender1"
                            runat="server">
                        </asp:CalendarExtender>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator2"  ValidationGroup="group1" runat="server" ControlToValidate="txtDate"
                            ForeColor="Red" Font-Bold="true" ErrorMessage="*"></asp:RequiredFieldValidator>
                    </div>

<asp:Button ID="btnPreview" runat="server" Text="Preview" OnClick="btnPreview_Click" />
                    <asp:Button ID="btnsubmit" runat="server" ValidationGroup="group1" Text="Save" OnClick="btnsubmit_Click" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T20:02:42.973

在您的 aspx 代码（服务器端）中使用 Page.IsPostback()。像这样：

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        // the code that only needs to run once goes here
    }
} 
```

此代码仅在页面*第*一次加载时运行，并避免踩到用户输入的表单更改。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T20:01:59.877

据我了解，预览按钮会导致回发，而您不希望这样，请在预览按钮上尝试此操作：

```
<asp:button runat="server".... OnClientClick="return false;" /> 
```

同样，这也有效：

```
YourButton.Attributes.Add("onclick", return false"); 
```

编辑：

似乎用户问题的答案是预览按钮的 HTML 标记的简单更改

```
CausesValidation="False" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-21T10:18:54.447

你可以把你的代码放进去

```
Page_Init()
{
   //put your code here
} 
```

代替

```
Page_Load()
{
   //code
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-25T00:54:14.040

我遇到了同样的问题，上面的“CausesValidation =“False””解决方案甚至添加“UseSubmitBehavior =“False””都不起作用 - 它仍然称为“Page_Load”方法。

对我有用的是在 Page_Load 方法中添加以下行。

```
if (IsPostBack) return; 
```

如果它对某人有帮助，我会提到这一点（我的意思是在上面发表评论，但 StackOverflow 不允许我发表评论，因为我是新用户 - 因此是新回复）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T19:59:48.303

尝试将此添加到 aspx 页面中的按钮属性。

```
OnClientClick="return false;" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-13T20:37:10.953

对我来说，@tgolisch 的回答效果更好，也许是因为我还是个菜鸟。

我试图在我的 WebForm 中加载一个简单的验证码，并最终在 Page_Load 事件和 Button Click 事件（对于代码片段）中使用引用类型。

最后我只需要编辑一些东西就完成了：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            var captchaText = generateCaptchaCode(5);
            lblCaptcha.Text = captchaText;
        }
    }

    protected void btnCheckCaptcha_Click(object sender, EventArgs e)
    {
        if (txtCaptchaCode.Text == lblCaptcha.Text)
            lblMessage.Text = "Right input characters";
        else
            lblMessage.Text = "Error wrong characters";
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-02T07:09:18.697

```
form1.Action = Request.RawUrl; 
```

在页面加载时编写此代码，然后页面不会在按钮单击时回发

# javascript - 使用jquery获取div的底部值

> ID：15690964
> 
> 赞同：1
> 
> 时间：2013-03-28T19:54:55.447
> 
> 标签：javascript, jquery

`<div id="xx" style="bottom:20px;"></div>`

我如何获得的底值`#xx`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:55:33.300

您可以使用

```
document.getElementById('xx').style.bottom; 
```

你会得到字符串`'20px'`。

如果你想要它作为一个数字，你将不得不解析它：

```
var nb = parseInt(document.getElementById('xx').style.bottom, 10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:56:47.873

在 jQuery 中：

```
$('#xx').css('bottom'); 
```

# jquery - 获取被点击元素的 id

> ID：15690970
> 
> 赞同：1
> 
> 时间：2013-03-28T19:55:22.027
> 
> 标签：jquery

当我有这样的功能时，如何获取被点击的元素的 id？

```
$("#btnOne, #btnTwo").on("click", "input.select", function () { 
```

我试过：

```
this.id; 
```

和

```
$(this).attr("id"); 
```

这是html

```
<div id="TransferOwnershipBox" title="Transfer Ownership">
    <table>
        <tr>
            <td>
                <asp:TextBox ID="tbSearchField" Text="Search..." ClientIDMode="Static" Width="400px" runat="server" CssClass="text ui-widget-content ui-corner-all"></asp:TextBox>
            </td>
            <td>
                <input type="button" id="btnSearch" data-str="tblOwnerSearchResults" value="Search" Class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
            </td>
        </tr>
    </table>
    <table id="tblOwnerSearchResults" data-str="ownerId" data-dataItem="id" style="border: none; width: 100%; padding: 2px;"></table>
</div>

<!-----COURSE DIRECTOR----->
<div id="CourseDirectorBox" title="Directors">
    <table>
        <tr>
            <td>
                <asp:TextBox ID="tbDirector" Text="Search..." ClientIDMode="Static" Width="400px" runat="server" CssClass="text ui-widget-content ui-corner-all"></asp:TextBox>
            </td>
            <td>
                <input type="button" id="btnDirectorSearch" data-str="tblDirectorSearchResults" value="Search" Class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
            </td>
        </tr>
    </table>
    <table id="tblDirectorSearchResults" data-str="source" data-dataItem="DisplayName" style="border: none; width: 100%; padding: 2px;"></table>              
</div> 
```

但我也没有得到任何身份。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:00:20.857

您使用`.on()`.

该事件发生在`input.select`元素上，而不是`#btnOne`or `#btnTwo`。

如果您想要容器 (*`#btnOne`或`btnTwo`*) id 使用

```
$("#btnOne, #btnTwo").on("click", "input.select", function () {  
   var id = $(this).closest('#btnOne, #btnTwo')[0].id;
}); 
```

* * *

如果您使用的是 1.7 及更高版本（*您应该是*） ，请使用[@undefined 的答案](https://stackoverflow.com/a/15691122/128165)

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T20:03:50.453

`this`在您的代码中指的是`input`元素而不是`#btnOne`和`#btnTwo`元素，您可以使用`delegateTarget`事件对象的属性，它指的是事件委托的目标元素。

```
$("#btnOne, #btnTwo").on("click", "input.select", function(event) {
    console.log(event.delegateTarget.id);
}); 
```

[http://jsfiddle.net/WNC5y/](http://jsfiddle.net/WNC5y/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T20:00:30.783

由于我看不到您的 HTML，我将提供一个示例：

HTML

```
<div id="ID1">Hello World</div> 
```

jQuery

```
$(document).ready(function() {
    $("div").click(function() {
        var id = $(this).attr("id");
        alert(id);
    });
}); 
```

经过测试并且可以工作......我确实需要将 div 点击选择器用引号括起来（呃！）

再次就我的评论而言，这种方法对于简单的 jQuery onClick 事件来说可能是最干净的。如果您必须为 jQuery 使用 .on() 绑定方法，则非常相似。

## 代表们

* * *

为了使用 click 事件绑定的 .on() 委托方法，语法（正如您在问题中所使用的那样）看起来像这样：

HTML

```
<div id="myTable">
    <div class="table-row" id="a">Hello World</div>
    <div class="table-row" id="b">I'm a delegate!</div>
</div> 
```

jQuery

```
$(document).ready(function() {
    $("#myTable").on("click", "div", function() {
        var id = $(this).attr("id");
        alert(id);
    });
}); 
```

这种事件绑定方式允许您的父事件处理程序（在我们的例子中为#myTable）的后代（子）元素也被绑定。优点是在处理程序创建也被绑定之后创建并添加到事件处理程序的任何子项。它可能是节省时间的天赐之物。基本上，它允许快速将事件绑定到动态对象。试试看！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T20:03:01.227

试试这个代码：

```
$("#btnOne, #btnTwo").click(function(){
    $(this).attr("id");
}); 
```*

# jquery - Jquery Datepicker Popover 被隐藏

> ID：15690973
> 
> 赞同：0
> 
> 时间：2013-03-28T19:55:31.137
> 
> 标签：jquery, css

我正在使用联系表单 7 创建一个表单。当用户单击日期字段时，会弹出一个 jQuery UI 日期选择器，但它在下面的字段下方是半隐藏的。（以下图为例）

![在此处输入图像描述](../Images/1d5f2aa024b202517c70ec8c1f73a3a1.png)

我需要在 CSS 中添加什么，以使 jQuery UI 日期选择器在下面的字段中完全可见？

这是我用于文本字段的 CSS，如果我需要包含任何其他 CSS，请告诉我。

```
#contact li .text{
   background: #F0EFEF;
   padding:15px 10px 10px 0;
   position:absolute;
   z-index:100;
   min-width:85px;
   border-bottom-right-radius: 5px;
   -moz-border-radius-bottomright:5px;
   -webkit-border-bottom-right-radius:5px;
   border-top-left-radius: 5px;
   -moz-border-radius-topleft:5px;
   -webkit-border-top-left-radius:5px;
   text-indent: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:14:28.997

jQuery UI 的 CSS 没有`z-index`为`.ui-datepicker`该类指定。添加`z-index: 101`或更高以将日期选择器保持在顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:41:35.713

#contact li .text 的 z-index 是否有干扰？如果可以，请尝试降低 z-index。UI Datepicker 使用它自己的 CSS 文件（我相信你知道）并且可能与此冲突。

尝试向 UI 日期选择器添加高于 100 的 z-index 或降低 CSS 中的 z-index。

元素应该是`ui-datepicker-div`

# ios - 将拼出的数字转换为数字

> ID：15690974
> 
> 赞同：6
> 
> 时间：2013-03-28T19:55:31.233
> 
> 标签：ios, objective-c, cocoa, localization, numbers

在 Objective-C/Cocoa 中，有没有办法将拼写出来的单词转换为`NSNumber`多种语言的一个或等价词？

例如：

转换`three`为`3`或转换`ocho`为`8`（西班牙语）。

也略有不同，但`3 1/2`要`3.5`

我可以编写自己的代码来做到这一点，但我希望有一种内置的方法来做到这一点。我想避免将每个数字翻译成多种语言。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T21:08:38.173

`NSNumberFormatter`可以从文本转换为数字：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.numberStyle = NSNumberFormatterSpellOutStyle;

NSLog(@"%@", [formatter numberFromString:@"thirty-four"]);
NSLog(@"%@", [formatter numberFromString:@"three point five"]);

formatter.locale = [[NSLocale alloc]initWithLocaleIdentifier:[NSLocale localeIdentifierFromComponents:@{NSLocaleLanguageCode: @"es"}]];

NSLog(@"%@", [formatter numberFromString:@"ocho"]); 
```

它可以处理的内容有严重的限制（它不会自动检测语言，如果您偏离预期的格式（例如“三十四”而不是“三十四”）、分数等），但对于狭窄的领域，它似乎可以胜任。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T20:54:58.633

`NSLinguisticTagger`将以多种语言为您标记数字。

```
NSArray * texts = @[@"It's 3 degrees outside", @"Ocho tacos", @"What is 3 1/2?", @"ocho"];
for (NSString * text in texts)
{
    NSLinguisticTaggerOptions options = NSLinguisticTaggerOmitWhitespace | NSLinguisticTaggerJoinNames;
    NSArray * tagSchemes = [NSLinguisticTagger availableTagSchemesForLanguage:@"en"];
    tagSchemes = [tagSchemes arrayByAddingObjectsFromArray:[NSLinguisticTagger availableTagSchemesForLanguage:@"es"]];

    NSLinguisticTagger * tagger = [[NSLinguisticTagger alloc] initWithTagSchemes:tagSchemes
                                                                                 options:options];
    [tagger setString:text];

    [tagger enumerateTagsInRange:NSMakeRange(0, [text length])
                          scheme:NSLinguisticTagSchemeNameTypeOrLexicalClass
                         options:options
                      usingBlock:^(NSString *tag, NSRange tokenRange, NSRange sentenceRange, BOOL *stop)
        {
            NSString *token = [text substringWithRange:tokenRange];
            NSLog(@"%@: %@", token, tag);
        }];
} 
```

这确实让您的任务是确定如何以及何时执行分数解析等操作。

# ajax - 如何使用 AJAX 将数据发送到“post.php”？（没有jQuery）

> ID：15690977
> 
> 赞同：2
> 
> 时间：2013-03-28T19:55:35.260
> 
> 标签：ajax, post, xmlhttprequest

我是这个 webdeveloper 问题的新手。我已经制作了一个表单，我使用 Ajax (JQuery lib) 创建了一个聊天框。

现在，我想尝试在不使用 Jquery 的情况下做类似的事情来了解 Ajax 的工作原理。首先，我只想使用 AJAX 在 log.html 上写我的消息，这样我以后可以阅读它们。但我不明白为什么我不能将我的 textarea 数据发送到 post.php。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Teste</title>

        <script type="text/javascript">

    function sendXMLDoc(){

         var xmlhttp;

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari           
            xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5       
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

        var message=document.getElementById('msg').value;

        xmlhttp.open("POST", "post.php", false);

         xmlhttp.onreadystatechange = function() {//Call a function when the state changes.

            if(xmlhttp.readyState == 0 ) {
                    alert("UNSENT");
            }
            if(xmlhttp.readyState == 1 ) {
                    alert("OPENED");//check if the data was revived successfully.
            }
            if(xmlhttp.readyState == 2 ) {
                    alert("Headers Received");//check if the data was revived successfully.
            }
            if(xmlhttp.readyState == 3 ) {
                    alert("Loading response entity body");//check if the data was revived successfully.
            }

            if(xmlhttp.readyState == 4) {
                if (xmlhttp.status == 200) {
                    alert("Data transfer completed");//check if the data was revived successfully.

                    }
            }
        }

        xmlhttp.send(message);        
   }

   </script> 
```

xmlhttp.send(data)：为什么我不将我的数据发送到 post.php？

Post.php 是我写 log.html 的地方（但我无法发送消息，我不明白为什么）：

```
<?php

    $text = $_POST['message'];  // WHY I CAN'T RECEIVE MY POSTED MESSAGE?
    $fp = fopen("log.html", 'a');
    fwrite($fp, "<div>\n(".date("g:i A").")<br>".$text."<br>\n</div>\n");
    fclose($fp);

?> 
```

这是我的 form.html

```
<body>
    <h1>Insert text on log.html</h1>

    <form method="post" onsubmit="sendXMLDoc();">       
    <textarea name="message" maxlength="196" rows="8" ></textarea>
    <br>
    <input type="submit" value="Send"/> 
    </form>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:26:34.537

你看过[这个链接](http://www.w3resource.com/ajax/working-with-PHP-and-MySQL.php)吗？

它似乎对如何使用 PHP 和 MySql 构建 AJAX 请求有完整的解释。

编辑：

您的代码中的问题都在您的 post.php 上，它的语法不正确（在 last 之前缺少双引号`<br>`），应该是这样的：

post.php

```
<?php 
    $text = $_POST['message'];  
    $fp = fopen("log.html", 'a');
    fwrite($fp, "<div>\n(".date("g:i A").")<br>".stripslashes(htmlspecialchars($text))."<br>\n</div>\n");
    fclose($fp);

?> 
```

并带有请求标头，该标头应设置内容类型（请参见下面的代码）

我将此答案基于[w3.org](http://www.w3.org/TR/XMLHttpRequest/#dependencies)。

此处提供的最终 html 将帮助您了解 Ajax 请求在不同浏览器上的行为方式。试试看。

似乎对于 Firefox 加载请求，您需要在状态为 OPENED (1) 时执行某些操作，但我不太明白为什么。

在不同的浏览器上尝试此代码以查看 XMLHttpRequest 的不同方法。

```
<!DOCTYPE html>
<html>

<head>
<script language="javascript" type="text/javascript">

function sendXMLDoc(obj){

        var message=obj["message"].value;
        var data = "message=" + message; 
        var xmlhttp;
        try{
           // Opera 8.0+, Firefox, Safari
           xmlhttp = new XMLHttpRequest();
         }catch (e){
           // Internet Explorer Browsers
           try{
              xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
           }catch (e) {
              try{
                 xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
              }catch (e){
                 // Something went wrong
                 alert("Your browser broke!");
                 return false;
              }
           }
         }       

        url = "http://localhost/AjaxPhp/post.php"

        xmlhttp.open("POST", url , true);
        xmlhttp.onreadystatechange = display_data;
        xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");  

        xmlhttp.send(data);

        function display_data() {

            if(xmlhttp.readyState == 1 ) {
                    alert("OPENED");//check if the data was revived successfully.
            }
            if(xmlhttp.readyState == 2 ) {
                    alert("Headers Received");//check if the data was revived successfully.
            }
            if(xmlhttp.readyState == 3 ) {
                    alert("Loading response entity body");//check if the data was revived successfully.
            }

            if(xmlhttp.readyState == 4) {
                if (xmlhttp.status == 200) {
                    alert("Data transfer completed");//check if the data was revived successfully.
                    }
            }
        }
 } 

</script>
</head>

<body>
    <h1>Insert text on log.html</h1>

    <form method="post" onsubmit="sendXMLDoc(this);">       
    <textarea name="message" maxlength="196" rows="8" ></textarea>
    <br>
    <input type="submit"/> 
    </form>

</body>
</html> 
```

我并不真正理解为什么，但根据[w3](http://www.w3.org/TR/XMLHttpRequest/#dependencies)，在我看来，请求的顺序应该是：

OPENED（调用 open 方法后）、HEADERS_RECEIVED（setRequestHeader 后）、LOADING（收到请求正文）。DONE（数据传输完成，发送后）。

Chrome 处理 post.php 但不显示任何警报框（也许是我的弹出设置，也许不是）

IE 仅显示 OPENED 警报消息 Firefox 显示“已收到标头”、“数据传输完成”、“已打开”、“数据传输完成”。

希望这有助于更多地理解它。始终检查[w3.org](http://www.w3.org)以获取网络上的最终资源。它可能不是非常用户友好和直观，但提供了一些关于为什么和应该的提示。

# sorting - 如何在 MIPS 中使用系统调用 9 (sbrk) 进行动态内存分配

> ID：15690978
> 
> 赞同：3
> 
> 时间：2013-03-28T19:55:37.293
> 
> 标签：sorting, mips

我有一个任务是在 MIPS 中编写梳排序。用户将输入数组，当然还有它的大小。在搜索堆分配的时候，找到了系统调用9。但是，我找不到使用它的方法。我写了这个：

```
 li $v0, 4
    la $a0, message1    # prints the first message 
    syscall

    li $v0, 5           # reads the size for the array        
    syscall

    mul $t0, $v0, 4     # because array contains integer, I change them into bytes
    la $a0, $t0         # allocate the size of the array in the heap
    li $v0, 9           # now, $v0 has the address of allocated memory
    syscall

    move $v1, $v0       # Because systemcall uses $vo register, I move it to $v1 keep it safe.

create_array:    
    la $a0, message2    # prints the first message
    li $v0, 4 
    syscall

    li   $s0, 0         # $s1 is the index, and loop induction variable
    li   $s1, 5         # $s1 is the sentinel value for the loop

Loop1:  
    bge  $s0, $s1, End_Loop1

    li $v0, 5           # Read integer values
    syscall

    mul  $t3, $s0, 4    # $t3 is the offset
    add  $t4, $t3, $t0  # $t4 is the address of desired index
    sw   $v0, ($t4)     # store the value in the array
    addi $s0, $s0, 1    # increment the index        
    j    Loop1

End_Loop1: 
```

我得到这个错误：

```
la": Too few or incorrectly formatted operands. Expected: la $t1,($t2) 
```

我该如何使用它？这是创建数组的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:57:36.790

代替

```
la $a0, $t0     # allocate the size of the array in the heap 
```

和

```
move $a0, $t0 
```

该`la`指令的目的是将符号的 [A] 地址 [L] 加载到寄存器中。例如：

```
la $a0, message1    # prints the first message 
```

会将 的地址加载`message1`到寄存器`$a0`中。`la`实际上是一个伪指令，在这种情况下转换为：

```
lui $a0, message1/0x10000       # load the upper halfword of the address
ori $a0, $a0, message1%0x10000  # OR in the lower halfword of the address 
```

正如您可以想象的那样，尝试加载另一个寄存器的地址是没有意义的，因为寄存器没有地址。

当我们讨论 MIPS 伪指令时：`move`也是其中之一，上面的`move $a0, $t0`指令翻译成类似`add $a0, $0, $t0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T18:46:48.703

此外，将**$t0**替换为**$v1**。$t0 只保存堆中分配的总字节数，但您需要 $v1 ，它是堆中数组的起始地址。它应该是这样的：

```
add  $t4, $t3, $v1      # $t4 is the address of desired index 
```

# android-mediaplayer - 是否可以从应用程序访问 AwesomePlayer 信息和错误消息？

> ID：15690979
> 
> 赞同：1
> 
> 时间：2013-03-28T19:55:39.310
> 
> 标签：android-mediaplayer

我是一个未经训练的新手代码黑客，正在玩自制软件`MediaPlayer`来流式传输实时互联网音频。如果你愿意的话，一个老式的“收音机”。我正在使用`OnInfo`,`OnError`和`OnBuffferingUpdate`info 来填充`textView`播放器上的“状态”框，但我`logcat`从`AwesomePlayer`引擎中看到了更多详细信息。`AwesomePlayer`是否可以直接从应用程序访问信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:57:59.507

从应用程序的角度来看（假设应用程序是用 编写的`JAVA`），`MediaPlayer`是所有播放器引擎的抽象。有多个播放器引擎，例如`StagefrightPlayer`内部使用`AwesomePlayer`和`NuPlayer`命名一对。

`listeners`在ie`onInfoListener`上提供`onBufferingUpdateListener`的信息`onErrorListener`源自于`AwesomePlayer`它被翻译成通用消息并通过`listeners`. 这些信息被认为足以让任何应用程序开发人员围绕相同的方式开发他们的代码。

`AwesomePlayer`日志更多的是从`debug`角度来看，有助于理解引擎的底层实现。我觉得这些信息很好了解和理解，但不确定这对于应用程序开发是否必不可少。

总而言之，`AwesomePlayer`信息实际上是通过`listeners`本质上通用的信息来传达的，其余`logcat`信息更多地用于`debug`或理解目的。目前，除非开发人员明确自定义`AOSP`分发，否则没有获取此信息的方案。

# jquery - 为什么 jQuery 触发器不向输入元素发送一些 keydown 事件？

> ID：15690980
> 
> 赞同：1
> 
> 时间：2013-03-28T19:55:39.993
> 
> 标签：jquery

我在 jQuery 中尝试了以下操作来触发输入框中的 keydown 事件：

[http://jsfiddle.net/W5fNh/8/](http://jsfiddle.net/W5fNh/8/)

并想知道为什么没有触发and的`keydown`事件。如果我自己输入并按 Enter 键，则表单确实会提交。`A``Enter`

编码：

```
$(function () {

    $("#the-input").trigger("focus");

    $("#the-input").trigger(
        jQuery.Event('keydown', {
            keyCode: 65
    }));

    $("#the-input").trigger(
        jQuery.Event('keydown', {
            keyCode: 13
    }));

    $("#the-input").trigger(
        jQuery.Event('keydown', {
            which: 65
    }));

    $("#the-input").trigger(
        jQuery.Event('keydown', {
            which: 13
    }));

}); 
```

用html：

```
<form id="the-form" action="some.php" method="get">
    <input id="the-input" type="text" name="var">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:15:36.647

好的，答案似乎是：jQuery`trigger`可以导致事件处理程序被调用，但不能真正模拟用户输入内容，以显示在浏览器上。

也就是说，除了`focus`or `blur`，它实际上会显示在浏览器中。那么什么会显示，什么不会，我想知道每个事件是什么。

PS例如，如果它是单选按钮，那么实际上它们会被“点击”：jsfiddle示例：http: [//jsfiddle.net/awbus/2/](http://jsfiddle.net/awbus/2/)

# python - 如何展平一个 numpy 切片？

> ID：15690985
> 
> 赞同：2
> 
> 时间：2013-03-28T19:55:49.670
> 
> 标签：python, numpy

我正在实现 numpy 的 ndarray 的子类，我需要修改`__getitem__`以从数组的扁平表示中获取项目。问题是`__getitem__`可以使用整数索引或多维切片调用。

有谁知道如何将多维切片转换为扁平数组上的索引列表（或一维切片）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:12:16.253

可能无法将多维切片转换为平面切片，例如：

```
>>> a = np.arange(16).reshape(4, 4)
>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]])
>>> a[::3, 1::2]
array([[ 1,  3],
       [13, 15]]) 
```

而且您无法使用符号访问子`[ 1, 3, 13, 15]`数组`start:stop:step`。但是您可以从多维索引构造一个平面索引列表，执行如下操作：

```
>>> row_idx = np.arange(4)[::3]
>>> col_idx = np.arange(4)[1::2]
>>> row_idx = np.repeat(row_idx, 2)
>>> col_idx = np.tile(col_idx, 2)
>>> np.ravel_multi_index((row_idx, col_idx), dims=(4,4))
array([ 1,  3, 13, 15], dtype=int64) 
```

* * *

在更一般的设置中，一旦您拥有每个维度的索引数组，您需要构建所有索引数组的笛卡尔积，这`itertools.product`可能是要走的路。例如：

```
>>> indices = [np.array([0, 4, 8]), np.array([1,7]), np.array([3, 5, 9])]
>>> indices = zip(*itertools.product(*indices))
>>> indices
[(0, 0, 0, 0, 0, 0, 4, 4, 4, 4, 4, 4, 8, 8, 8, 8, 8, 8),
 (1, 1, 1, 7, 7, 7, 1, 1, 1, 7, 7, 7, 1, 1, 1, 7, 7, 7),
 (3, 5, 9, 3, 5, 9, 3, 5, 9, 3, 5, 9, 3, 5, 9, 3, 5, 9)]
>>> np.ravel_multi_index(indices, dims=(10, 11, 12))
array([  15,   17,   21,   87,   89,   93,  543,  545,  549,  615,  617,
        621, 1071, 1073, 1077, 1143, 1145, 1149], dtype=int64) 
```

# php - 基于动态下拉菜单的回显文本

> ID：15690986
> 
> 赞同：1
> 
> 时间：2013-03-28T19:55:55.713
> 
> 标签：php, html, forms

我正在使用 Magento 并使用自定义选项。我有 5 个自定义选项，允许用户选择项目的条件。我想要下面的一些文字来显示他们选择条件时的含义。

我很抱歉造成混乱。我希望选择适当的选项时在屏幕上进行实时更新。

这是我当前的代码，但它不显示文本。

```
 <select name="options[1][]" id="select_1" class="multiselect required-entry product-custom-option" title=""  onchange="opConfig.reloadPrice()">
<option value="1"  price="0" >Perfect </option>
<option value="2"  price="-35" >Excellent </option>
<option value="3"  price="-105" >Good </option>
<option value="4"  price="-140" >Poor </option>
<option value="5"  price="-252" >Broken </option></select>

   <?php if( $_POST['select_1']=='1' ){
                echo "Perfect Condition Text";

                }elseif( $_POST['select_1']=='2' ){
                echo "Excellent Condition Text";

                }elseif( $_POST['select_1']=='3' ){
                echo "Good Condition Text";

                }elseif( $_POST['select_1']=='4' ){
                echo "Poor Condition Text";

                }elseif( $_POST['select_1']=='5' ){
                echo "Broken Condition Text";

                } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:59:00.410

`<select>`将名称更改为`select_1`将解决您的问题：

```
<select name="select_1" id="select_1" class="multiselect required-entry product-custom-option" title=""  onchange="opConfig.reloadPrice()"> 
```

如果由于某种原因无法更改名称，请更改`$_POST['select_1']`为`$_POST['options'][1][0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:15:06.283

如果要在`<select>`不刷新页面的情况下显示值，则可以使用 javascript 或 jquery。这是一个 Javascript 示例：

```
<script language="javascript">
function displayCondition() {
    condition = new Array("", "Perfect", "Excellent", "Good", "Poor", "Broken");
    var getsel = document.getElementById('select_1').value;
    document.getElementById("divId").innerHTML = condition[getsel];
}
</script>
</head>
<body>
<form name="formName">
    <select name="options[1][]" id="select_1" class="multiselect required-entry product-custom-option" title=""  onchange="displayCondition()">
        <option value="0">Select Condition</option>
        <option value="1"  price="0" >Perfect</option>
        <option value="2"  price="-35" >Excellent</option>
        <option value="3"  price="-105" >Good</option>
        <option value="4"  price="-140" >Poor</option>
        <option value="5"  price="-252" >Broken</option>
    </select>
    <div id="divId" name="divName" ></div>
</form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:59:35.383

该数组在 PHP 中将不可`$_POST`用`select_1`索引，但 PHP`$_POST`将有一个`options`数组`$_POST['options']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T20:00:15.450

post 数组名称基于表单元素的名称，而不是表单元素的 id。将您的选择元素的名称属性更改为“select_1”，您将获得所需的内容。

# c# - 查找具有数百万个元素的两个列表或哈希集之间的公共元素数量

> ID：15690991
> 
> 赞同：1
> 
> 时间：2013-03-28T19:56:13.047
> 
> 标签：c#

在 c# 中，有哪些高效的方法可以确定两个列表或哈希集之间的公共元素数量，这些列表或哈希集可能有数百万个值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T19:57:59.003

HashSets 将提供最佳性能。您可以使用[IntersectWith](http://msdn.microsoft.com/en-us/library/bb293080.aspx)方法。

```
// assuming HashSet<T> hashSetA
//     and an IEnumerable<T> collectionB
hashSetA.IntersectWith(collectionB); 
```

基于哈希集的解决方案提供了 O(n) 的性能，这几乎是它所能得到的。

下一个最好的方法是对两个列表进行排序，然后在两个列表上锁定步长线性迭代，选择公共元素，这会产生 O(nlogn) 性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:58:34.957

HashSet 相交

[HashSet.IntersectWith 方法](http://msdn.microsoft.com/en-us/library/bb293080.aspx)

为了比较两个列表，我将创建较大的 HashSet

[HashSet 构造函数 (IEnumerable)](http://msdn.microsoft.com/en-us/library/bb301504.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:01:50.313

使用**除**

[两个列表之间的区别](https://stackoverflow.com/questions/5636438/difference-between-two-lists)

# html - 在框架集下放置背景

> ID：15690996
> 
> 赞同：0
> 
> 时间：2013-03-28T19:56:26.133
> 
> 标签：html, css, styles, frames, frameset

我想做的可能很简单。我的 index.html 目前有框架。我有一个顶部，左侧，右侧底部和中心框架。这使我的页面看起来很尴尬。这是我的 index.html：

```
 <html>
    <head>
    <title>Support Portal</title>
    </head>
    <frameset rows="28,*,5" frameborder="0" border="0" framespacing="0">
        <frame name="topNav" src="top_nav.html" scrolling="no" noresize>
    <frameset cols="110,*,110" frameborder="0" border="0" framespacing="0">
        <frame name="menu" src="menu_1.html" marginheight="0" marginwidth="0" scrolling="auto" noresize>
        <frame name="content" src="content.html" marginheight="0" marginwidth="0" scrolling="auto" noresize>
        <frame name="related" src="related.html" marginheight="0" marginwidth="0" scrolling="auto" noresize>
    </frameset>
        <frame name="footer" src="footer.html">
    <noframes>
    <p>This section (everything between the 'noframes' tags) will only be displayed if the users' browser doesn't support frames. You can provide a link to a non-frames version of the website here. Feel free to use HTML tags within this section.</p>
    </noframes>

    </frameset>
    </html> 
```

我希望做的是获取我的“content.html”和所有其他 html 文件并使背景颜色透明，然后在所有内容后面放置一个背景图像，这样页面看起来更像是 1 页，而不是 5 页放在一起。这是我的内容页面的顶部：

```
 <!DOCTYPE html>
    <html>
    <head>
    <style type="text/css">
    body {
        font-family:Ubuntu, sans-serif;
        font-size:10pt;
        margin:10px;
        background-color:transparent;
        }
    a {
        color:white;
        } 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:08:26.367

你根本不应该使用框架。它很旧，不可靠。你应该使用的是div。如果您只想更改页面的一部分，可以使用 javascript 和 jQuery。

使用 div 时，可以使用`background`CSS 中的属性来操作特定元素的背景，例如：

```
background-color: #FFF; 
```

您还应该使用单独的 CSS 文件并在 head 标记中链接到它（在任何 javascript 文件之前）：

```
<link rel="stylesheet" type="text/css" href="styles.css"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:28:25.270

不，使用框架，每个文档都是独立的，不允许其他任何内容（大多数情况下，底部的代码可能在某些浏览器中工作......）你可以像这样破解它：

在 top_nav.html 的 css 中：

```
body {
    background-image: url('path/to/image.jpg');
    background-attachment: fixed;
    background-repeat: no-repeat;
} 
```

在 menu_1.html 的 CSS 中：

```
body {
    background-image: url('path/to/image.jpg');
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: -28px 0;
} 
```

在 content.html 的 css 中：

```
body {
    background-image: url('path/to/image.jpg');
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: -28px -110px;
} 
```

在相关.html 的 css 中：

```
body {
    background-image: url('path/to/image.jpg');
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: -28px right;
    /* this may not work as the image may be too big... */
} 
```

在 footer.html 的 css 中：

```
body {
    background-image: url('path/to/image.jpg');
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: bottom 0;
    /* this may not work as the image may be too tall... */
} 
```

这将是最有可能跨浏览器工作的解决方案......但是，我认为以下内容适用于某些浏览器。

```
frameset {
    background-image: url('path/to/image.jpg');
    background-attachment: fixed;
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:38:54.230

做你想做的事的现代方式是使用 Javascript。例如，您希望拥有许多静态页面并构建一个网站，而不必每次要在菜单上添加内容时都编辑 10 个页面。

我不同意您的观点，但无论如何，您正在寻找 Ajax 内容加载（您将页面加载到一个中）。

或者您可以构建您的主页布局，然后将 iframe 与可以有页面背景。

我真的不认为你应该这样做，但是......

```
<html>
    <head>
        <title>Support Portal</title>
        <style>
            body{
                /*background-image here*/
            }
        </style>
    </head>
    <body>
        <div style="position:absolute;top:0px;bottom:0px;left:0px;right:0px;">
            <iframe name="topNav" src="top_nav.html" scrolling="no" style="border:0px;width:100%;position:absolute;top:0px;left:0px;right:0px;height:28px;"></iframe>
            <div style="position:absolute;top:28px;bottom:5px;left:0px;right:0px;">
                <div style="position:relative;height:100%;width:100%;">
                    <iframe name="menu" src="menu_1.html" scrolling="no" style="border:0px;position:absolute;top:0px;left:0px;bottom:0px;width:110px;height:100%;"></iframe>
                    <div style="position:absolute;top:0px;left:110px;right:110px;bottom:0px;">
                        <iframe name="content" src="content.html" scrolling="no" style="border:0px;width:100%;height:100%;"></iframe>
                    </div>
                    <iframe name="related" src="related.html" scrolling="no" style="border:0px;position:absolute;top:0px;right:0px;bottom:0px;width:110px;height:100%;"></iframe>
                </div>
            </div>
            <iframe name="footer" src="footer.html" scrolling="no" border="0" style="border:0px;width:100%;position:absolute;bottom:0px;left:0px;right:0px;height:5px;"></iframe>
        </div>
    </body>
</html> 
```

这是工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-04T19:02:27.143

试试对我有用

```
<html>
<head>
    <title>Support Portal</title>
    <style>
        HTML{
            /*background-image here*/
        }
    </style>
</head>
<body>
    <div style="position:absolute;top:0px;bottom:0px;left:0px;right:0px;">
        <iframe name="topNav" src="top_nav.html" scrolling="no" style="border:0px;width:100%;position:absolute;top:0px;left:0px;right:0px;height:28px;"></iframe>
        <div style="position:absolute;top:28px;bottom:5px;left:0px;right:0px;">
            <div style="position:relative;height:100%;width:100%;">
                <iframe name="menu" src="menu_1.html" scrolling="no" style="border:0px;position:absolute;top:0px;left:0px;bottom:0px;width:110px;height:100%;"></iframe>
                <div style="position:absolute;top:0px;left:110px;right:110px;bottom:0px;">
                    <iframe name="content" src="content.html" scrolling="no" style="border:0px;width:100%;height:100%;"></iframe>
                </div>
                <iframe name="related" src="related.html" scrolling="no" style="border:0px;position:absolute;top:0px;right:0px;bottom:0px;width:110px;height:100%;"></iframe>
            </div>
        </div>
        <iframe name="footer" src="footer.html" scrolling="no" border="0" style="border:0px;width:100%;position:absolute;bottom:0px;left:0px;right:0px;height:5px;"></iframe>
    </div>
</body> 
```

# java - Avro 和 java：字符串的反序列化映射不“等于”原始映射

> ID：15690997
> 
> 赞同：2
> 
> 时间：2013-03-28T19:56:29.947
> 
> 标签：java, string, serialization, utf-8, avro

我正在使用由字符串和映射组成的简单记录来测试 Avro for java。这是我的架构：

```
{
  "type":"record",
  "name":"TableRecord",
  "fields":[
    {"name":"ActionCode","type":"string"},
    {
      "name":"Fields",
      "type":{"type":"map","values":["string","long","double","null"]}
    }
  ]
} 
```

这是一个非常简单的失败测试用例：

```
@Test
public void testSingleMapSerialization() throws IOException {
    final String schemaStr; // see above

    // create some data
    Map<String, Object> originalMap = new Hashtable<>();
    originalMap.put("Ric", "sZwmXAdYKv");
    originalMap.put("QuoteId", 4342740204922826921L);
    originalMap.put("CompanyName", "8PKQ9va3nW8pRWb4SjPF2DvdQDBmlZ");
    originalMap.put("Category", "AvrIfd");

    // serialize data
    Schema.Parser parser = new Schema.Parser();
    Schema schema = parser.parse(schemaStr);
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    DatumWriter<GenericRecord> writer = new GenericDatumWriter<>(schema);
    Encoder encoder = EncoderFactory.get().binaryEncoder(out, null);
    GenericRecord datum = new GenericData.Record(schema);
    datum.put("ActionCode", "R");
    datum.put("Map", originalMap);
    writer.write(datum, encoder);
    encoder.flush();
    out.flush();

    // deserialize data
    DatumReader<GenericRecord> reader = new GenericDatumReader<>(schema);
    Decoder decoder = DecoderFactory.get().binaryDecoder(out.toByteArray(), null);
    datum = new GenericData.Record(schema);
    Map<String, Object> deserializedMap = (Map<String, Object>) reader.read(datum, decoder).get("Map");
    System.out.println(originalMap);
    System.out.println(deserializedMap);
    Assert.assertEquals("Maps data don't match", originalMap, deserializedMap);
} 
```

这是测试的输出：

```
{CompanyName=8PKQ9va3nW8pRWb4SjPF2DvdQDBmlZ, Ric=sZwmXAdYKv, Category=AvrIfd, QuoteId=4342740204922826921}
{QuoteId=4342740204922826921, Category=AvrIfd, CompanyName=8PKQ9va3nW8pRWb4SjPF2DvdQDBmlZ, Ric=sZwmXAdYKv}

java.lang.AssertionError: Maps data don't match expected:<{CompanyName=8PKQ9va3nW8pRWb4SjPF2DvdQDBmlZ, Ric=sZwmXAdYKv, Category=AvrIfd, QuoteId=4342740204922826921}> but was:<{QuoteId=4342740204922826921, Category=AvrIfd, CompanyName=8PKQ9va3nW8pRWb4SjPF2DvdQDBmlZ, Ric=sZwmXAdYKv}> 
```

如您所见，两张地图看起来相同，但测试失败。JUnit 在幕后调用“equals”方法，这应该返回 true。顺便说一句，如果您想知道什么是乱码，我通常会使用随机生成的数据创建测试用例，这就是它的来源。

难道我做错了什么？我不知道字符串序列化/反序列化有什么问题吗？我在网上搜索没有成功。

想法？

谢谢

乔杜德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:43:09.337

我弄清楚了“捕获”是什么。我正在将包含`java.lang.String`s 的地图与包含的地图进行比较`org.apache.avro.util.Utf8`. 事实证明，如果与字符串一起使用，Utf8 equals 方法将不起作用。我通过在我的测试用例中添加以下内容来实现这一点：

```
for (Object o : deserializedMap.values())
  System.out.println(o.getClass());
for (Object o : deserializedMap.keySet())
  System.out.println(o.getClass()); 
```

打印以下内容：

```
class java.lang.Long
class org.apache.avro.util.Utf8
class org.apache.avro.util.Utf8
class org.apache.avro.util.Utf8
class org.apache.avro.util.Utf8
class org.apache.avro.util.Utf8
class org.apache.avro.util.Utf8
class org.apache.avro.util.Utf8 
```

我想这是意料之中的，因为 Avro 总是将字符串转换为其本机`Utf8`类型。我以为它会按原样复制我的地图，但事实并非如此。奇怪的是，类型转换为 Map 成功，我不清楚这是怎么发生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T07:16:13.960

是的，Avro map 从 1.5 开始使用 org.apache.avro.util.Utf8 作为默认键，并且可以更改为 String。更多详情，您可以参考：[https](https://issues.apache.org/jira/browse/AVRO-803) ://issues.apache.org/jira/browse/AVRO-803或[Apache Avro：map 使用 CharSequence 作为 key](https://stackoverflow.com/questions/19728853/apache-avro-map-uses-charsequence-as-key)