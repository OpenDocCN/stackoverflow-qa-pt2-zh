# StackOverflow 问答 14464000-14464999

# c++ - 连接到正在运行的 IE 实例 C++

> ID：14464002
> 
> 赞同：1
> 
> 时间：2013-01-22T17:03:09.233
> 
> 标签：c++, internet-explorer, com

我目前正在用 AutoIt 编写一个程序，但我想将一些功能外包给 C++，因为它更安全。我管理它来创建一个 IE 并导航到一个站点。

但这不是我需要的。我正在 AutoIt 中创建 IE 的实例，用 C++ 编写的部分必须连接到该 IE 并导航到特定页面。

现在它是一个 C++ 应用程序，但稍后，当一切运行正常时，我将用它创建一个 .Dll 并使用 AutoIt 调用它。所以我可以传递像 hWnd 这样的值。

我想这样做是有正当理由的，所以请不要问我为什么要这样做。

有人知道我该如何管理吗？提前致谢。

```
 CoInitialize(NULL);
IWebBrowser2* pBrowser = NULL;
HRESULT hr = CoCreateInstance(CLSID_InternetExplorer, NULL, 
    CLSCTX_SERVER, IID_IWebBrowser2, (LPVOID*)&pBrowser);

if (SUCCEEDED(hr) && (pBrowser != NULL))
{
    VARIANT vEmpty;
    VariantInit(&vEmpty);

    VARIANT vFlags;
    V_VT(&vFlags) = VT_I4;
    V_I4(&vFlags) = navOpenInNewWindow;

    BSTR bstrURL = SysAllocString(L"http://www.ard.de");

    pBrowser->Navigate(bstrURL, &vFlags, &vEmpty, &vEmpty, &vEmpty);
    pBrowser->Quit();

    SysFreeString(bstrURL);
}
if (pBrowser)
    pBrowser->Release();
CoUninitialize();
return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:32:07.490

您发布的代码创建了一个新的 IE（选项卡）实例，这不是您想要的。您想连接到现有实例，为此您必须使用不同的方法。

首先，您创建一个[IShellWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/cc836570)实例。该对象是外壳窗口（例如 Windows 资源管理器或 IE）注册表的接口。

你可以用它做两件事：你可以订阅它的事件并在用户打开和关闭窗口时得到通知；您还可以枚举当前窗口。

[`get_Count()`](http://msdn.microsoft.com/en-us/library/windows/desktop/cc836569)您使用和[`Item()`](http://msdn.microsoft.com/en-us/library/windows/desktop/cc836571)的方法枚举当前窗口`IShellWindows`。此枚举将为您提供`IDispatch`接口，然后您可以`QueryInterface()`进行`IWebBrowser2`接口（如果失败则跳过，而不是 IE）。请注意，您可能仍然会得到不是 IE 的窗口，因此可能需要更多过滤。

从这里您可以尝试找出它是否是您正在寻找的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:53:05.703

当前窗口在所有 shell 窗口中位于 z 顺序的顶部，因此您可以枚举 shell 窗口并选择最上面的一个。请注意，shellwindows 也列出了 Windows Explorer 窗口，因此需要通过类名或可执行文件名过滤掉这些窗口。

参考：

[自动化活动的 Windows Explorer 或 Internet Explorer 窗口](http://www.codeproject.com/Articles/12029/Automate-the-Active-Windows-Explorer-or-Internet-E)

# xml - XSLT for-each 循环和具有不同模式的节点

> ID：14464006
> 
> 赞同：0
> 
> 时间：2013-01-22T17:03:23.593
> 
> 标签：xml, xslt, xpath

我有以下要转换的 xml 数据结构：

```
 <chapter>
          <title>Text</title>
          <subtitle>Text</subtitle>
          <paragraph>Text</paragraph>
          <paragraph>Text</paragraph>
          <subtitle>Text</subtitle>
          <paragraph>Text</paragraph>
          <other>Text</other>
      </chapter>

      <chapter>
          <title>Text</title>
          <paragraph>Text</paragraph>
          <paragraph>Text</paragraph>
          <paragraph>Text</paragraph>
          <other>Text</other>
      </chapter>

      <chapter>
          <title>Text</title>
          <paragraph>Text</paragraph>
          <subtitle>Text</subtitle>
          <paragraph>Text</paragraph>
          <paragraph>Text</paragraph>
          <other>Text</other>
      </chapter> 
```

如您所见，不同章节中的字幕没有固定的模式。在输出中，我需要将字幕设置在与 xml 相同的位置。对于段落标签，我使用 for-each 循环。像这样：

```
<xsl:template match="chapter">
  <xsl:for-each select="paragraph">
    <xsl:value-of select="."/>
  </xsl:for-each>
</xsl:template> 
```

现在，我需要按照它们在 xml 中的顺序在段落之间或段落之间设置字幕。我怎样才能做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:09:40.977

通过使用

```
 <xsl:for-each select="paragraph"> 
```

您首先将所有段落元素拉出，您可以将其更改为

```
<xsl:for-each select="*"> 
```

按顺序处理所有元素，但最好（或至少更惯用的 xslt）避免 for-each 并改用 apply-templates。

```
<xsl:template match="chapter">
   <xsl:apply-templates/>
</xsl:template>

<xsl:template match="title">
Title: <xsl:value-of select="."/>
</xsl:template>

<xsl:template match="subtitle">
SubTitle: <xsl:value-of select="."/>
</xsl:template>

<xsl:template match="paragraph">
 <xsl:text>&#10;&#10;</xsl:text>
 <xsl:value-of select="."/>
<xsl:text>&#10;&#10;</xsl:text>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:06:58.047

这会做吗？

```
<xsl:template match="chapter">
  <xsl:for-each select="paragraph | subtitle">
    <xsl:value-of select="."/>
  </xsl:for-each>
</xsl:template> 
```

但正如 David Carlisle 所指出的，典型的 XSLT 方法是将其拆分为模板，如果您想对某些模板进行特殊处理，这尤其有意义：

```
<xsl:template match="chapter">
   <xsl:apply-templates select="paragraph | subtitle" />
</xsl:template>

<xsl:template match="paragraph">
   <xsl:value-of select="." />
</xsl:template>

<xsl:template match="subtitle">
   <!-- do stuff with subtitles -->
</xsl:template> 
```

# clojure - 用于在随机加权选择之间进行选择的惯用 Clojure

> ID：14464011
> 
> 赞同：12
> 
> 时间：2013-01-22T17:03:48.583
> 
> 标签：clojure, idioms

在涉足 Clojure 时，我完成了一个小示例程序，用于从选项列表中选择一个随机选项。

基本思想是迭代选择（分配权重）并将它们的权重转换为一个范围，然后在总范围内选择一个随机数来选择一个。它可能不是最优雅的设计，但让我们认为它是理所当然的。

与我下面的示例相比，wo 会有什么不同？

我对整体程序结构建议、名称间距等不感兴趣，主要是对您对每个功能的处理方式。

我对经验丰富的 Clojurer 如何处理“增强”函数特别感兴趣，在该函数中，我必须使用外部“cur”变量来引用范围的前一个端点。

```
 (def colors
      (hash-map 
            :white 1,
            :red 10,
            :blue 20,
            :green 1,
            :yellow 1
       )
     )

    (def color-list (vec colors))

    (def cur 0)

    (defn augment [x] 
      (def name (nth x 0))
      (def val (nth x 1))
      (def newval (+ cur val))
      (def left cur)
      (def right newval)
      (def cur (+ cur val))
      [name left right]
    )

    (def color-list-augmented (map augment color-list))

    (defn within-bounds [bound]
      (def min-bound (nth bound 1))
      (def max-bound (nth bound 2))
      (and (> choice min-bound) (< choice max-bound))
    )

    (def choice (rand-nth (range cur)))

    (def answer 
      (first (filter within-bounds color-list-augmented))
    )

    (println "Random choice:" (nth answer 0)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T20:15:26.653

我建议在学习 Clojure 的同时在[http://www.4clojure.com/](http://www.4clojure.com/)上做一些问题。您可以“关注”顶级用户，看看他们如何解决问题。

这是一个解决方案。它再次不是最有效的，因为我的目标是保持简单，而不是使用您稍后将学习的更高级的想法和结构。

```
user=> (def colors {:white 1  :red 10  :blue 20  :green 1  :yellow 1})
#'user/colors
user=> (keys colors)
(:white :red :blue :green :yellow)   
user=> (vals colors)
(1 10 20 1 1) 
```

要将权重转换为区间，我们只需进行累积和：

```
user=> (reductions #(+ % %2) (vals colors))
(1 11 31 32 33) 
```

寻找随机区间：

```
user=> (rand-int (last *1))
13
user=> (count (take-while #(<= % *1 ) *2 ))
2 
```

REPL 中的注意`*1`是指最近打印的值，`*2`下一个最近的值，等等。所以我们要求一个介于 0（包括）和 33（不包括）之间的随机整数。这 33 个可能的选择对应于权重的总和。接下来，我们计算了找到该数字需要经过的间隔数。这里的随机数是 13。

```
(1 11 31 32 33) 
     ^ 13 belongs here, 2 numbers in 
```

我们找到我们的随机数 2。请注意，为了降落在这里，我们必须至少有 11 但少于 31，所以有 20 种可能性，这正是...

```
user=> (nth (keys colors) *1)
:blue 
```

所以，把这一切放在一个函数中：

```
(defn weighted-rand-choice [m]
    (let [w (reductions #(+ % %2) (vals m))
          r (rand-int (last w))]
         (nth (keys m) (count (take-while #( <= % r ) w))))) 
```

让我们测试一下：

```
user=> (->> #(weighted-rand-choice colors) repeatedly (take 10000) frequencies)
{:red 3008, :blue 6131, :white 280, :yellow 282, :green 299} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T22:52:05.223

Rich Hickey 来自[ants.clj](https://gist.github.com/dribnet/3399263/a9399bff5ce3de2b3731b17fd26d5048508e27c3#file-ants-clj-L84)的有点过时的（2008 年）解决方案：

```
(defn wrand 
  "given a vector of slice sizes, returns the index of a slice given a
  random spin of a roulette wheel with compartments proportional to
  slices."
  [slices]
  (let [total (reduce + slices)
        r (rand total)]
    (loop [i 0 sum 0]
      (if (< r (+ (slices i) sum))
        i
        (recur (inc i) (+ (slices i) sum)))))) 
```

[Stuart Halloway 来自data.generators](https://github.com/clojure/data.generators/blob/acf1c88d8d2fe7891de898fa68a30351bb6da7dd/src/main/clojure/clojure/data/generators.clj#L73)的最新（2012）解决方案：

```
(defn weighted
  "Given a map of generators and weights, return a value from one of
  the generators, selecting generator based on weights."
  [m]
  (let [weights   (reductions + (vals m))
        total   (last weights)
        choices (map vector (keys m) weights)]
    (let [choice (uniform 0 total)]
      (loop [[[c w] & more] choices]
        (when w
          (if (< choice w)
            (call-through c)
            (recur more))))))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T18:08:50.677

它通常有助于将问题分解为可以独立解决的层。增强在分配范围方面做得很好，尽管在随机选择一个时，结果很难用正常的序列函数来消费。如果你改变增广的目标，让它产生一个正常的序列，那么增广问题与随机选择一个更清晰地分开。如果权重是整数，您可以构建一个包含每个项目的权重编号的列表，然后随机选择一个：

```
user> (map (fn [[item weight]] (repeat weight item)) colors)
((:white) 
 (:red :red :red :red :red :red :red :red :red :red) 
 (:blue :blue :blue :blue :blue :blue :blue :blue :blue :blue
  :blue :blue :blue :blue :blue :blue :blue :blue :blue :blue) 
 (:green) (:yellow)) 
```

然后将其展平为一个列表：

```
user> (flatten (map (fn [[item weight]] 
                       (repeat weight item)) 
                 colors))
(:white :red :red :red :red :red :red :red :red :red :red 
 :blue :blue :blue :blue :blue :blue :blue :blue :blue :blue 
 :blue :blue :blue :blue :blue :blue :blue :blue :blue :blue 
 :green :yellow) 
```

并选择一个`rand-nth`：

```
user> (rand-nth (flatten (map (fn [[item weight]] (repeat weight item)) colors)))
:blue 
```

* * *

ps：地图文字让事情看起来更好：[读者页面](http://clojure.org/reader)很好地描述了这些

```
(def colors {:white 1,
             :red 10,
             :blue 20,
             :green 1,
             :yellow 1}) 
```

使用 let 给函数中的事物命名：

```
(defn augment [x]
  (let [name (nth x 0)
        val (nth x 1)
        newval (+ cur val)
        left cur
        right newval
        cur (+ cur val)]
    [name left right])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-29T21:11:16.187

开源[bigml](https://github.com/bigmlcom/sampling)采样库是另一种选择。我已经成功地使用了它。它有更好的文档记录，并且有一个很好的 API。

# php - 当我尝试获取数组内容时，我得到“数组”而不是内容

> ID：14464012
> 
> 赞同：-2
> 
> 时间：2013-01-22T17:03:51.253
> 
> 标签：php, arrays, string, foreach

当我尝试获取数组内容时，我得到的是“数组”而不是内容。

然后 foreach 函数（如果它是正确的，我直到现在都无法尝试）应该发布图片。

```
<?php
    $slideshowdir = "./public/all/slideshow/";
    if (is_dir($slideshowdir)) {
        if ($dh = opendir($slideshowdir)) {                             
            while (($slides = readdir($dh)) !== false) {
               $possible_slides = $slideshowdir.array($slides);
            }
        }
    }

    foreach($possible_slides as $slide){
        $picture = file($slide);
            echo $picture;
     }
?> 
```

编辑：对不起，我不是 100% 清楚。我要发布的文件是图片。

编辑：我用以下代码解决了这个问题：

```
<?php
    $possible_slides = array();
    $slideshowdir = "./public/all/slideshow/";
    if (is_dir($slideshowdir)) {
        if ($dh = opendir($slideshowdir)) {                             
            while (($slide = readdir($dh)) !== false) {
                if (is_file ($slideshowdir.$slide)) {
                    $possible_slides[] = $slideshowdir.$slide;
                }
            }
        }
    }

    foreach($possible_slides as $slide){
        echo '<img src="'.$slide.'">';
    }       
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:07:48.110

请阅读[`file()`](http://de1.php.net/manual/en/function.file.php). 它逐行返回文件内容的数组。

您可能想要使用的是[`file_get_contents()`](http://de1.php.net/manual/en/function.file-get-contents.php).

此外，您的第一个循环看起来很可疑。我想你想这样做：

```
<?php
$possible_slides = array();
$slideshowdir = "./public/all/slideshow/";
if (is_dir($slideshowdir)) {
    if ($dh = opendir($slideshowdir)) {                             
        while (($slide = readdir($dh)) !== false) {
           if (is_file ($slideshowdir.$slide)) {
               $possible_slides[] = $slideshowdir.$slide;
           }
        }
    }
}

foreach($possible_slides as $slide){
    $picture = file_get_contents($slide);
    echo $picture;
} 
```

请注意，我在 while 循环中添加了一个检查，以确保仅将文件添加到`$possible_slides`. 这应该过滤掉子目录，以及`.`和`..`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:10:34.407

这部分看起来很奇怪：`$slideshowdir.array($slides)`

您确定要将数组连接到字符串上吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:22:44.093

改变：

```
$possible_slides = $slideshowdir.array($slides); 
```

到：

```
$possible_slides[] = $slideshowdir.array($slides); 
```

# git - 从未签出的 Git 分支中删除文件？

> ID：14464013
> 
> 赞同：0
> 
> 时间：2013-01-22T17:03:54.793
> 
> 标签：git, netbeans, gitignore, conflict, git-checkout

是否可以在签出另一个分支时从 Git 存储库分支中删除文件？

我想这样做是为了解决与已签出分支中的 .gitignore 文件但仍在我要签出的分支的存储库中的文件的一些冲突。由于在 Netbeans 中为继承的代码设置 git 存储库时做出了一些仓促的决定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:59:29.593

从技术上讲，可以将分支上的提示提交替换为另一个，但您必须以编程方式对其进行烹饪，这比您试图避免的要麻烦得多。

因此，另一种选择是使用单独的工作树和索引手动执行此操作。[这篇文章](http://git-scm.com/2010/04/11/environment.html)解释了如何做到这一点。基本上，您将该分支检出到单独的工作树（并且可能使用单独的索引），并修复有问题的提交。

# javascript - 引用通过 JavaScript 调用添加的新 JS 文件后调用 JavaScript 函数

> ID：14464015
> 
> 赞同：0
> 
> 时间：2013-01-22T17:03:59.420
> 
> 标签：javascript, html

好的，标题可能有点模糊，但这个想法很简单。

我有一些 JavaScript 代码在 HTML 页面的 Head 部分添加对 JS 文件的引用，在添加新的 JS 文件后，我想调用这个新添加的 JS 文件中存在的函数。所以我有一个执行以下 JS 代码的链接（带有 javascript:eval）：

```
//PART 1
var head = document.getElementsByTagName('head')[0];
var script = document.createElement('script'); 
script.setAttribute('type', 'text/javascript'); 
script.setAttribute('src', 'http://localhost/test.js'); 
head.appendChild(script); 

//wait for JS file to load should go here

//PART 2
calltest(); //calltest is a function that exists within http://localhost/test.js 
```

如果 PART 1 和 PART 2 之间存在延迟（例如，它们位于用户按顺序单击的 2 个单独的链接上），这可以正常工作，但如果整个代码在一个链接上按顺序执行（我猜因为 JS 文件（在第 1 部分中添加）还没有机会加载）。无论如何让第 2 部分等待第 1 部分完全完成？，也许是某种延迟或在调用函数 calltest() 之前等待检索 JS 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:17:46.307

这应该这样做。

```
window.onload = calltest; 
```

或者也许将其添加到您的第一个脚本中

```
script.onreadystatechange= function () {
  if (this.readyState == 'complete') calltest();
 }
 script.onload= calltest; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:17:39.630

根据 Marcell 的评论，我最终采用了以下解决方案：

calltest() 可能是您注入的 JS 文件中的最后一条语句

# c# - 空字符串或 10 位数字的正则表达式

> ID：14464016
> 
> 赞同：7
> 
> 时间：2013-01-22T17:04:04.573
> 
> 标签：c#, regex

开始：我刚开始使用正则表达式，我*很难*理解它们发生了什么。只是一个提示。

对于一个项目，我正在尝试开发一个正则表达式，它采用 A）一个空字符串（在 C# 中，“”）或 B）十 (10) 位数字。我已经能够弄清楚如何完成 10 位数字部分：

```
"^[0-9X]{10}$" 
```

...但不是“空字符串或”部分。我想会是这样的：

```
"^[]$|^[0-9X]{10}$" 
```

显然那是行不通的，但我不知道如何写一些这样的东西*，*即使有很多关于这个问题的话题。

问题：

A）如果给定的字符串是 string.Empty（而不是“”）或正好是 10 位，那么将返回 true 的正则表达式是什么？

B）请解释它是如何工作的。并不是我没有尝试学习（我确实发现这些`^$`是用于精确字符串匹配的锚点，那`|`就是 OR 运算符……），只是正则表达式对我来说显然不是自然而然的…… .然而，我处于必须使用它们的情况。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T17:13:30.937

```
(^$)|(^\d{10}$) 
```

第一个选项匹配空字符串，第二个选项匹配 10 位数字。

我不知道你的 X 是做什么用的，除非你正在寻找一个十六进制字符串，如果是这样的话，你会想要执行以下操作：

```
(^$)|(^[0-9a-fA-FxX]{10}$) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T17:09:28.190

```
^$|^[0-9X]{10}$ 
```

`^`意味着匹配开始，`$`意味着匹配结束，因为中间没有任何内容，什么都不匹配。如果有什么，这不匹配

`|`是交替运算符，在备选之间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:26:03.483

```
 string a = "0123456789";
 string b = "";
 string reg = @"^(|\d{10})$";

 if ( Regex.IsMatch( a, reg ) && Regex.IsMatch( b, reg ) ) {
     Console.WriteLine( "Matched" );
 } 
```

`\d`相当于`[0-9]`
`{10}`是 十次 正好
`|`是 OR 运算符
`^`是开始，`$`是结束
括号将 OR 运算限制为空或开始和结束之间的十位数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T17:13:56.057

试试下面的正则表达式......它会工作......

```
 if (Regex.IsMatch(textBox1.Text, @"^(?!\s*$).+")) //Check Not Empty String 
        {
            if (Regex.IsMatch(textBox1.Text, @"^\d{10}$")) // Check ten digits - Not allowed Alphanumeric
            {
                MessageBox.Show("find Ten digits");
            }
            else
            {
                    MessageBox.Show("Error");
            }
        }
        else
        {
            MessageBox.Show("Empty String Found");
        } 
```

# c# - 正则表达式：获取两个斜杠之间的子字符串？

> ID：14464019
> 
> 赞同：-2
> 
> 时间：2013-01-22T17:04:11.283
> 
> 标签：c#, regex

给定字符串

```
http://stackoverflow.com/questions/ask/index.php 
```

…我想获得第三个斜杠`(.*?)`和最后一个斜杠之间的子字符串，即：

```
questions/ask 
```

如何使用 C# 中的正则表达式完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:08:29.620

你可以看看[`Uri.Segments`](http://msdn.microsoft.com/en-us/library/system.uri.segments.aspx)楼盘

```
Uri uriAddress1 = new Uri("http://www.contoso.com/title/index.htm");
Console.WriteLine("The parts are {0}, {1}, {2}", uriAddress1.Segments[0], 
   uriAddress1.Segments[1], uriAddress1.Segments[2]); 
```

产生以下输出：

```
The parts are /, title/, index.htm 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:08:56.623

```
Uri uri = new Uri("http://stackoverflow.com/questions/ask/index.php");
string result = uri.Segments[1] + uri.Segments[2];
result = result.Remove(result.Length - 1);
Console.WriteLine(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:09:52.140

```
Uri url = new Uri("http://stackoverflow.com/questions/ask/index.php");
string s = string.Join("", url.Segments.Take(url.Segments.Length - 1)).Trim('/'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T17:08:27.157

尝试使用现有的 Uri 和 Path 类，而不是字符串匹配和正则表达式。就像是：

```
 Path.GetDirectoryName(new Uri(url).AbsolutePath) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:10:03.087

正确的方法是使用 Uri 对象。

```
Uri u = new Uri("http://stackoverflow.com/questions/ask/index.php");
string[] s = u.Segments; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T17:13:52.933

其他答案是要走的路。但是，如果您仍在寻找正则表达式，这个应该可以工作：

```
([^/]*/[^/]*)/[^/]*$ 
```

您要查找的路径在第一个子匹配中。

# php - 使用友好 url 时在 .htaccess 中使用 ErrorDocument

> ID：14464022
> 
> 赞同：0
> 
> 时间：2013-01-22T17:04:23.307
> 
> 标签：php, mod-rewrite, apache2, custom-error-pages, errordocument

**在PHP 5.2 网站**中打开友好网址（和 mod_rewrite）的网页的错误处理过程中，我遇到了一些问题。我从框架管理 url 规则，所以**我需要将所有请求移动到 index.php**。这是最简单的部分（并且就像一个魅力）。现在，从同一个框架中，我碰巧将 http 状态代码扔到了标头，然后是 I `exit()`，所以没有输出，但标头已发送给用户。现在问题是其中之一（或两者）：

1.  状态码是在处理开始**后**发送的，因此 Apache 与此无关（如果我弄错了，请纠正我）。

2.  每个请求（甚至可能是 403 和 500？）都被重写为 index.php，因此`ErrorDocument`永远不会被读取，因为一切看起来都很正常（很可能是错误的）

这是我的.htaccess：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . index.php

ErrorDocument 400 /error/400
ErrorDocument 403 /error/403
ErrorDocument 404 /error/404
ErrorDocument 405 /error/405
ErrorDocument 408 /error/408
ErrorDocument 500 /error/500
ErrorDocument 502 /error/502
ErrorDocument 504 /error/504 
```

我可以解析的另一个 URI在哪里`/error/"number"`，但它也可以是静态页面。现在，问题：

**有什么方法可以让这些错误请求（在请求启动*后*抛出）使用`ErrorDocument`?**

PS：作为旁注，Chrome 显示一个标准的“chromy”禁止/未找到/等页面，而 Firefox 只是留下一个空白屏幕。

# jquery - 访问 $(this).each function() 之外的 DOM 元素

> ID：14464024
> 
> 赞同：0
> 
> 时间：2013-01-22T17:04:23.403
> 
> 标签：jquery

我在 JSP 上有一个 div，当我将鼠标悬停在与特定 css 类关联的项目上时，我想填充它，但看起来我遇到了范围问题。知道我做错了什么吗？

JSP: $('.hoverTrigger').myFunc();

文字在这里

JSP 引用的 JavaScript .js 文件：

```
$.fn.myFunc = function(options) {
  $(this).each(function() {
    $this.hover(
       function() {
         // Want to set text in messageBox here but not working
         $('#messageBox').after("Hover IN").remove();
       },
       function() {
         // Want to set text in messageBox here but not working
         $('#messageBox').after("Hover OUT").remove();
       }
    );

  });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:07:26.970

我想你想要`$(this).hover`而不是`$this.hover`. 此外，如果您`#messageBox`在鼠标移入时删除，您将无法在鼠标移出时选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:08:27.710

`$(this).hover();`// 应该可以解决问题。否则你可以缓存变量。

```
var currobj; 
 $(this).each(function() {
currobj=$(this)//cache the current object. and use it 
    $(currobj).hover(
       function() {
         // Want to set text in messageBox here but not working
         $('#messageBox').after("Hover IN").remove();
       },
       function() {
         // Want to set text in messageBox here but not working
         $('#messageBox').after("Hover OUT").remove();
       }
    );

  }); 
```

# wpf - 捕获网页内容 wpf 网络浏览器

> ID：14464027
> 
> 赞同：1
> 
> 时间：2013-01-22T17:04:27.173
> 
> 标签：wpf, browser, webpage

我想以编程方式（WPF、C#）登录我的财务账户网站（https）并检索我的一些账户数据。因为该站点使用 cookie 和其他会话验证，我认为最好的方法是使用 Web 浏览器控件，而不是 httpWebRequest。我似乎无法捕捉屏幕内容。

我能够使用winforms成功地做到这一点，但我想在WPF中做到这一点。这是来自 winforms 项目的代码片段：

```
webBrowser1.Navigate( @"https://myfinancialaccountURL" );
webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(
                                                      wb1DocumentCompleted );

private void wb1DocumentCompleted( object sender, WebBrowserDocumentCompletedEventArgs e )
{
    string wb1LogonScreen = webBrowser1.DocumentText;

    --- process the data, etc.  ---
} 
```

这是 WPF 尝试的代码片段：

```
webBrowser1.Navigated += new NavigatedEventHandler( webBrowser1_Navigated );
webBrowser1.Navigate( @"https:myfinancialaccountURL" ); 
```

我已经广泛研究了 WPF Web 浏览器控件，它有一个 Document 属性，但我不知道如何获取内容（或内部文本）。

我对此进行了研究，但仍然无法找到答案。请告诉我是否需要提供更多信息。我将非常感谢这里的一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:49:46.607

您可以将 Document 属性作为 MSHTML.Document 读取，然后使用它来获取文本。您需要在项目中包含 Microsoft.mshtml 库。

```
 mshtml.HTMLDocument doc = null;
        string docState = string.Empty;

       // CODE TO ENSURE THAT THE DOCUMENT AND THE SCRIPTS HAVE LOADED
        Action getDocState = () =>
        {
            doc = wb.Document as mshtml.HTMLDocument;
            if (null != doc)
            {
                docState = doc.readyState;
            }
        };

        App.Current.Dispatcher.Invoke(
                    DispatcherPriority.Normal,
                    getDocState);

        if (null != doc)
        {
            while ((docState != "complete") && (docState != "interactive"))
            {
                // It should not take more than one or two iterations for the document to get loaded.
                Thread.Sleep(100);
                App.Current.Dispatcher.Invoke(
                    DispatcherPriority.Normal,
                    getDocState);
                }
            }
       // DOC SHOULD BE LOADED AND READABLE NOW

            // Go back to the UI thread to get more details
            if (!App.Current.Dispatcher.HasShutdownStarted)
            {
               // This line is of your interest here
                MessageBox.Show(doc.documentElement.innerHTML);
            }
        } 
```

**编辑**：您可以在导航事件处理程序中使用此代码。我等待文档加载代码的原因是，一旦 WPF 加载/导航完成，Web 浏览器就会加载 HTML 和脚本等。此脚本可确保文档已完全加载并处于可以交互的状态它。

# sql - 单个 SQL 查询中的正则表达式

> ID：14464031
> 
> 赞同：1
> 
> 时间：2013-01-22T17:04:31.187
> 
> 标签：sql, regex, oracle

如果输入字符串的格式为**String#String**或**String#String;String#String**，其中 String 可以有任意数量的大写字母、下划线，那么它应该返回**Y**否则它应该返回**N**。

如何仅在单个 SQL 查询中使用 PL/SQL 中的正则表达式来完成？
（PS 不使用 PL/SQL 过程/函数。）

示例：- 如果输入字符串是**“CASISA#Y”**或**“INVOPT#LUMREG;LUMSUM#2000;REGSUM#8000”**，则应返回“Y”，否则应返回“N”。注意 - 请不要构建 PL/SQL 过程来完成此操作，而应该只是使用 oracle 正则表达式函数的 SQL。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:57:45.010

您可以使用`regexp_like`正则表达式函数来实现所需的结果：

```
with t1(col) as(
  select 'CASISA#Y'                              from dual union all
  select 'INVOPT#LUMREG;LUMSUM#2000;REGSUM#8000' from dual union all
  select 'CASISA#Y;'                             from dual union all -- extra data
  select 'INVOPT#LUMREG;LUMSUM#2000;#8000'       from dual           -- extra data
)
select col
     , case
         when regexp_like(col, '^(\w+#\w+;)*(\w+#\w+){1}$')
         then 'Y'
         else 'N'
       end  as "Y/N"
  from t1 
```

结果：

```
COL                                        Y/N
--------------------------------------------------
CASISA#Y                                    Y
INVOPT#LUMREG;LUMSUM#2000;REGSUM#8000       Y
CASISA#Y;                                   N
INVOPT#LUMREG;LUMSUM#2000;#8000             N 
```

[**SQLFiddle 示例**](http://www.sqlfiddle.com/#!4/d41d8/6300)

# powershell - 如何在 Powershell 的一行中调用具有多个参数的多个参数？

> ID：14464033
> 
> 赞同：2
> 
> 时间：2013-01-22T17:04:46.710
> 
> 标签：powershell, parameters, arguments, parameter-passing, powershell-2.0

我有一个脚本，我想在其中调用多个参数，这些参数可能带有多个参数，格式如下：

```
.\MyScript.ps1 -q <int> --args <hostval1> <hostval2> ... <hostvaln> 
```

现在，除了“q”之外，我还有其他参数，但它们不需要“--args”参数。我目前无法弄清楚如何实现“--args”，因为我目前的参数定义如下：

```
param(
    [Alias('c')]
    [string]$csv,
    [Alias('h')]
    [switch]$help,
    [Alias('f')]
    [switch]$fields,
    [Alias('s')]
    [string]$sql,
    [Alias('q')]
    [int]$query
) 
```

我知道我可以像这样运行它来获取主机值，但它需要一个破折号：

```
.\MyScript.ps1 -q 1 -hostval1 -hostval3 -hostval4 
```

这使得

```
$args[0] = -hostval1
$args[1] = -hostval3
$args[2] = -hostval4 
```

有没有办法制作一个只能用“-q”调用的“辅助”参数（例如--args），并接受由空格分隔的多个值？我可以创建另一个参数，但这会导致在没有“-q”参数的情况下意外调用它，并且还需要在参数之间使用逗号：

```
[string[]]$hostvals 
```

我想要在powershell中做的事情是可能的吗？有人对我能做什么有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:07:39.070

您可以尝试使用参数集名称：

```
[CmdletBinding(DefaultParameterSetName="Q")]

param(    
    [Alias('c')]
    [string]$csv,   
    [Alias('h')]
    [switch]$help,    
    [Alias('f')]
    [switch]$fields,    
    [Alias('s')]
    [string]$sql,   
    [Parameter(ParameterSetName="Q", mandatory=$true)] 
    [Alias('q')]
    [int]$query,
    [Parameter(ParameterSetName="Q")] 
    [object[]]$arg        
) 
```

这样你不能只使用`-arg`参数调用函数，你也需要调用`-query`。

`$arg`接受一个数组，您可以输入以逗号分隔的主机值。如果您想要用空格分隔的值，您可以`[string]$arg`在引号中声明和传递值，但您需要添加一些逻辑（`split`在空格等 o 上......）以使输入在脚本中有用。

要为您的脚本添加自定义帮助，请阅读此处[http://blogs.technet.com/b/heyscriptingguy/archive/2010/01/07/hey-scripting-guy-january-7-2010.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2010/01/07/hey-scripting-guy-january-7-2010.aspx)

# php - PHP 正则表达式：匹配联系我们链接

> ID：14464040
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:05:17.927
> 
> 标签：php, regex, html-parsing

我不确定为什么这不匹配。但是假设有一整页的html，我想要联系我们链接，不管链接中的文本是“联系我们”、“联系我们”、“联系”等。

示例 html：

```
<a href="contact.html">
    Contact Us
</a> 
```

这是我尝试使用的 preg_match，虽然它不匹配任何东西：

```
preg_match('/<a.*href="(.*)".*>.*contact.*<\/a>/is',$data,$matches); 
```

Matches 只是一个空数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:09:48.923

这是因为 。不匹配新行。将[多行修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)(m) 添加到正则表达式，它应该可以工作。

```
preg_match('/<a.*href="(.*)".*>.*contact.*<\/a>/ism',$data,$matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:12:30.760

这是一个严格的正则表达式，以确保您只匹配有效的`<a href="#"></a>`标签。

```
 $content = '<a href="contact.html">Contact Us</a>';
 $regexp = "/<a\s[^>]*href=([\"\']??)([^\" >]*?)\\1[^>]*>(.*)contact(.*)<\/a>/siU";
 preg_match_all($regexp, $content, $match, PREG_SET_ORDER); 
```

如果您想抓取 HTML 页面，但无需编写长正则表达式然后对其进行测试。[试试 PHPQuery](http://code.google.com/p/phpquery/)库。它允许您使用 CSS 样式选择器从 HTML 中提取数据。

**编辑：**

如何用 PHPQuery 做同样的事情。

```
 phpQuery::newDocument('<a href="contact.html">Contact Us</a>');
 $links = pq('a:contains("Contact")'); 
```

# api - 带有链接的 REST 资源表示，与 PUT 和 GET 兼容

> ID：14464041
> 
> 赞同：5
> 
> 时间：2013-01-22T17:05:17.787
> 
> 标签：api, rest

我被要求设计和实现一个 RESTful API，并且一直在研究最佳实践，但到目前为止，我对资源表示只有一个模糊的概念。我发现的大多数可用示例似乎都主要关注使用一系列 GET 遍历连接结构的 API 客户端。

我看过：

[http://www.restapitutorial.com/media/RESTful_Best_Practices-v1_1.pdf](http://www.restapitutorial.com/media/RESTful_Best_Practices-v1_1.pdf)

[http://www.youtube.com/watch?v=HW9wWZHWhnI](http://www.youtube.com/watch?v=HW9wWZHWhnI)

在其他在线资源中（我仅限于 2 个链接，抱歉无法全部列出）。它们都很棒，但并没有真正解决我的设计问题。

大多数最佳实践文档都提出了两件在我看来略有冲突的事情：

1) REST 服务应该将数据关系表示为资源之间的链接

2) 来自客户端的“PUT”请求应该是完整的表示，形式与服务器上看到的表示相同。

从我的角度来看，问题在于链接以及典型资源中的许多其他属性是只读的，因此无法更新。服务器显然应该按原样期望它们，如果它认为客户端正在尝试更新它们，则返回错误。事实上，当我查看以 JSON 表示的典型资源时，其中大部分是逻辑上不能/不应该替换的数据。例如

```
{
 "link": { "rel":"self", "href":"http://example/project/12345" },
 "team": {
    "link": { "rel":"self", "href":"http://example/project/12345/team" },
    "title": "The project team"
  },
  "title": "The Big Project"
} 
```

这里充其量只有两个标题文本可以写入此资源上的客户（团队成员可能通过团队链接更改）。

所以我是否应该要求 PUT 完全按原样包含所有“链接”元素，这些元素纯粹是逻辑和只读的（请注意，在示例中，团队无法重新链接，因为资源将其定义为团队对于项目 - 在这种情况下可以更改，但对于具有更严格容器的许多资源类型，这不适用）？

是否有标准模式或反模式来表示具有许多链接的 REST 中的资源？我没有被要求提供特定的 REST 变体，例如 HATEOAS，尽管我倾向于尽可能地瞄准理论上的“正确性”。换句话说，如果“官方” REST 期望客户端 PUT 整个资源、链接和所有内容，那么这可能就是我要做的。

支持 GET 和 PUT 的现实世界复杂非叶 REST 资源的一些示例，因此必须处理此问题，我们将不胜感激。当我搜索时，我得到了很多意见，还有很多例子展示了 GET 的工作原理。. . 但到目前为止，我还没有看到一个有据可查的例子，它显示了一个 PUT 到除了一个微不足道的叶子资源之外的任何东西（即一个不包含任何链接，除了可能是一个自我引用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:13:47.323

基本上，GET 请求将返回序列化为定义格式的资源，以及关于该资源的元数据（它们共同构成资源的表示）。当您 PUT 表示返回时，它不需要包含元数据，也不需要与原始（或任何后续）GET 请求具有相同的格式。然后，服务器将根据您提供的表示更新资源。

HTML 中的一个示例是`<head>`and`<body>`元素，它提供有关资源的元数据和资源表示；和内容类型`text/html`，`application/x-www-form-urlencoded`它们以两种不同的格式传输资源表示，前者带有元数据，后者没有。当您在 POST 之后 GET 资源时，您不会期望收到`application/x-www-form-urlencoded`-formatted 数据！

我不确定您所说的“REST 变体”是什么意思。只有一个 REST。如果您指的是其他基于 HTTP 的 API，请不要称它们为 REST。有关 API 样式的更多详细信息，请参阅[基于 HTTP 的 API 的分类](http://nordsc.com/ext/classification_of_http_based_apis.html)。

最后，您要求提供非叶 PUT 请求的示例。我不确定您所说的非叶子到底是什么意思，因为我可以想到两种类型：

1.  收藏品
2.  子资源

**集合** 假设您有一个汽车目录，可在`/cars`. 如果您决定要擦除所有汽车，则可以执行`DELETE /cars/1`, `DELETE /cars/2`... 等等，或者您可以选择`PUT /cars`空主体或没有内容的数组。后者显然会更有效率。

**子资源** 继续这个主题，假设有一辆车，`/cars/1`它是这样表示的：

```
{
  "model":"Model-T",
  "mfgr":"Ford",
  "colour":"black"
} 
```

现在，您可能希望允许通过 URL 访问这些字段，例如`/cars/1/mfgr`which 将返回`Ford`或可能`{"mfgr":"Ford"}`. 现在 URL`/cars/1`代表一个非叶子资源。但是，将新的表示添加到 URL 中仍然没有问题。因此，这也会更新子资源 URL 的值。

最后，您可能想看看通过 JSON 传输超文本的[HAL](http://stateless.co/hal_specification.html)格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:08:14.687

您应该将“完整”表示作为您的媒体类型定义它。如果您正在设计自己的媒体类型，您的规范应该定义哪些部分是可变的，哪些是不可变的。例如，Shoji 目录协议定义[了一个“body”成员](https://bitbucket.org/fumanchu/shoji/src/5f7e3dcaaa725d38c6cd9b202cc205211798134d/spec.txt?at=default#cl-538)，旨在包含可变数据：

> 一般来说，当一个主体成员存在时，处理器应该期望主体中存在的值可能是可变的（例如通过 HTTP PUT 或 POST），并且应该期望主体成员之外的任何值是不可变的；也就是说，（可能）在插入时可写，但在更新时不可写。服务器是免费的，当然可以允许或禁止资源的任何部分的可变性。但是“body”成员的存在强烈暗示了该成员内部和外部数据的可变性。

这不是一个标准（尽管它对我来说显然很有用，我希望它成为一个标准（眨眼））。请注意，服务器可以随意使用客户端发送的表示来做任何他们想做的事情。对任何 HTTP 服务器的最强要求是它尝试执行客户端的意图（如果能够并允许）。它如何以及在多大程度上确实是您的特定应用程序的一个问题，这就是为什么您在任何规范中都没有找到太多关于它的原因。

在实践中，我发现服务器验证链接或表示的其他不可变部分没有用。他们只是被忽略了。这可能导致客户决定他们可以省略这些。同样，在实践中我还没有发现这是一个问题。

# javascript - 检测单击了哪个按钮和复选框

> ID：14464043
> 
> 赞同：0
> 
> 时间：2013-01-22T17:05:20.533
> 
> 标签：javascript, jquery, jquery-events

我有，

```
<div>
  <span>Buttons</span>
    <div>
      <button id ="button_1" class="button">Btn 1</button><br />
      <button id ="button_1" class="button">Btn 2</button><br />
      <button id ="button_3" class="button">Btn 3</button><br />
      <button id ="button_4" class="button">Btn 4</button><br />
    </div>
  <span>Checkboxes</span>
  <div>
    <input type="checkbox" /> Chbx 1<br />
    <input type="checkbox" /> Chbx 2 <br />
    <input type="checkbox" /> Chbx 3 <br />
  </div>
</div> 
```

如何确定单击了哪个按钮/复选框？我可以为每个按钮附加一个单击事件，但我正在寻找您可能拥有的任何更有效的方法/技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:08:40.020

您可以单击*所有*按钮和输入并检查`tagName`等`ID`。

```
$(document).on('click', 'input, button', function(event) {
    alert(this.tagName + '#' + this.id);     
}); 
```

*注意：*您可以仅将事件附加到`document`元素并检查`event.target`以实现相同的效果，但上述方法更有效，因为回调将仅针对输入和按钮触发，而不是针对所有元素。

见演示：http: [//jsfiddle.net/vCjn9/](http://jsfiddle.net/vCjn9/)

# javascript - 在 HTML Canvas 中创建图像淡入淡出

> ID：14464045
> 
> 赞同：1
> 
> 时间：2013-01-22T17:05:23.747
> 
> 标签：javascript, html, canvas

我一直在玩 HTML `canvas`，最近开始使用`context.globalAlpha`. 我认为编写一个小脚本来自动淡出图像会很有趣。在图像的左侧，`globalAlpha`将是 1（完全不透明），在最右侧`globalAlpha`将是 0（完全透明）。

我尝试对源图像进行 1 像素宽的切片并将其设置`globalAlpha`为逐渐减小的数字：

```
fadeCtx = fadeCanvas.getContext('2d');

for (var i = 0; i < sourceImage.width; i++) {
    fadeCtx.globalAlpha = (sourceImage.width - i) / sourceImage.width;
    console.log(fadeCtx.globalAlpha);
    fadeCtx.drawImage(sourceImage, i, 0, i + 1, sourceImage.height, i, 0, i + 1,    sourceImage.height);
} 
```

（[我的代码的 JSFiddle](http://jsfiddle.net/beej/WHv7t/3/)）

但这似乎没有效果。图像被绘制在适当的位置，但它始终是完全不透明的。

我是否缺少有关如何设置不透明度的信息？正如您在小提琴中看到的那样，我已经成功设置`globalAlpha`了整个图像。只是当我尝试绘制“图像切片”时，它似乎没有效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:19:04.613

修复：

[http://jsfiddle.net/mattdlockyer/zNcRB/](http://jsfiddle.net/mattdlockyer/zNcRB/)

您使用 i + 1 作为 src 图像宽度和 dst 图像宽度在其自身上绘制图像，而不是同时使用 1 。

真正的罪魁祸首是 dst 图像宽度，但我认为使用 1 作为 src 图像宽度可能会提高性能。

```
fadeCtx.drawImage(sourceImage, i, 0, 1, sourceImage.height, i, 0, 1, sourceImage.height); 
```

希望这可以帮助！

# iphone - 检测旋转轮 iPhone 的方向

> ID：14464049
> 
> 赞同：0
> 
> 时间：2013-01-22T17:05:36.207
> 
> 标签：iphone, ios

我在屏幕上有一个轮子，它可以旋转。当用户在滚轮上滑动时，它应该根据滑动方向开始旋转。我完成了除了旋转方向（顺时针或逆时针）之外的所有功能。任何人都可以帮助我找到用户在滚轮上滑动的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:20:26.283

旋转是

**解决方案1：**

**顺时针**

*   如果 touch point.y 高于车轮中心并且滑动是从小的 touch point.x 到更大的 x。或者
*   如果 point.y 低于车轮中心并且滑动是从更大的 point.x 到更小的 x。

**逆时针：**
对面：

*   如果 point.y 低于车轮中心并且滑动是从小的 touch point.x 到更大的 x。或者
*   如果 point.y 高于车轮中心并且滑动是从较大的 point.x 到较小的 x。

有更好的解决方案，具有更复杂的数学，但一个是一个简单的解决方案。

**更新**这一个也很简单，而且更好！

**解决方案2：**

计算车轮中心 (x,y) 与接触 (x,y) 之间的角度：

```
 double angleRad =   atan2(dy/dx), where dy = touch.y - wheel.y, and dx analog. 
```

对每个触摸事件执行此操作：如果角度增加，则顺时针，否则逆时针

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:04:45.063

```
_direction = 1;
if(_startPoint.y < rotarCenter.y) {

    if(_startPoint.x > endTouchPoint.x)
        _direction = -1;
}
else if(_startPoint.y > rotarCenter.y) {

    if(_startPoint.x < endTouchPoint.x)
        _direction = -1;
}

if(_startPoint.x < rotarCenter.x && endTouchPoint.x < rotarCenter.x) {

    if(_startPoint.y < endTouchPoint.y)
        _direction = -1;
    else
        _direction = 1;
}
else if(_startPoint.x > rotarCenter.x && endTouchPoint.x > rotarCenter.x) {

    if(_startPoint.y > endTouchPoint.y)
        _direction = -1;
    else
        _direction = 1;
} 
```

# functional-programming - SML Ml 编程功能 is_older date with boolean conditon

> ID：14464053
> 
> 赞同：2
> 
> 时间：2013-01-22T17:05:51.497
> 
> 标签：functional-programming, sml, smlnj, ml

我是 ML 编程的新手，我有一个作业要编写一个函数 is_older，它需要两个日期并评估为真或假。如果第一个参数是第二个参数之前的日期，则它的计算结果为 true。
（如果两个日期相同，则结果为假。）

```
val is_older = fn : (int * int * int) * (int * int * int) -> bool // Binding Like 
```

我试过这个（使用New Jersy cmd prompt的SML）

```
fun is_older((y1,m1,d1),(y2,m2,d2))= if (y1<y2) then true 
else if (y1=y2 andalso m1<m2) then true 
else if (y1=y2 andalso m1=m2 andalso d1<d2) then true; 
```

它给出了错误

```
Error syntax error: deleting SEMICOLON ID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:22:30.917

您的最后一个`if`没有`else`- 这是 SML 中的语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:41:26.257

```
fun is_older((y1 : int,m1 : int,d1 : int),(y2 : int, m2 : int, d2 : int))=
if y1 < y2 
then true 
else 
     if y1 = y2 andalso m1 < m2 
 then true 
 else 
      if y1 = y2 andalso m1 = m2 andalso d1 < d2
      then true 
      else false; 
```

# node.js - websocket，socket，io，sockjs，meteor ...今天对如何做出选择感到困惑

> ID：14464054
> 
> 赞同：5
> 
> 时间：2013-01-22T17:05:52.357
> 
> 标签：node.js, websocket, socket.io, real-time, sockjs

我即将决定使用协作编辑应用程序。我调查了 websockets，坦率地说我很困惑。到目前为止我的发现：

*   有很多关于 websockets 的文章——但很多都是 2009 年、2010 年的……通常有信息表明 websockets 并不是在所有浏览器中都可以正常工作和/或实现很糟糕……今天的状态是什么？
*   周围有很多框架——但主要是针对节点的。我们的应用程序在 RoR 中，Eventmachine/em-websocket 看起来像一岁了——它还能满足今天的要求吗？
*   Socket.io、SockJS、meteor ...有这么多，我无法全部尝试，但我用 SockJS 做了一些初步试验。我们的应用程序是二进制数据的协作编辑；多个用户可能正在编辑同一个文档，并且多个用户可能同时在处理不同的文档。因此，可扩展性是关键；SockJS 似乎不能扩展到超过一台服务器（粘性会话）。此外，客户需要来自同行的更新——我需要广播设施吗？我需要redis吗？

我想我的问题可以归结为：

*   对于我们的应用程序，我应该直接使用 websockets 并自定义还是使用框架？
*   如果是一个框架，哪一个更适合我们的特定需求？

我知道这些问题有点含糊，但我真的首先想对技术在哪里做出一些合理的决定有一个最新的了解。谢谢！

# android - AndEngine 多点触控扩展

> ID：14464055
> 
> 赞同：1
> 
> 时间：2013-01-22T17:05:53.400
> 
> 标签：android, andengine

一个简单的问题，如果我需要同时在多个精灵/屏幕控件上注册按下，我是否需要在我的项目中包含多点触控扩展？我正在使用andengine gles2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T13:12:03.287

不，在 GLES2 中，多点触控不再是扩展，它已经集成到 AndEngine 库本身中。因此，您不需要将它包含在您的应用程序项目中。但是，您需要配置引擎选项以使用多点触控功能。请参阅此 [示例](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/MultiTouchExample.java)代码。

# javascript - 在 JQuery 中查找节点的成本是多少？

> ID：14464057
> 
> 赞同：5
> 
> 时间：2013-01-22T17:06:11.840
> 
> 标签：javascript, jquery

如果我多次需要该值，我总是保存结果`find()`以避免多次子树遍历：

```
var $a_bar = $('div.foo').find('a.bar');
$a_bar.removeClass(...);
// ... code here
$a_bar.bazz(); 
```

代替

```
$('div.foo').find('a.bar').removeClass(...);
// ... code here
$('div.foo').find('a.bar').bazz(); 
```

我想知道这是否不是微优化......那么在其中找到节点的成本/复杂性是`JQuery`多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T17:08:28.157

您可以在 js perf 上对其进行测试：http: [//jsperf.com/](http://jsperf.com/) 只需创建一个测试并运行它。

我在这里创建了一个小测试：http: [//jsperf.com/jquery-find55](http://jsperf.com/jquery-find55)

在我的浏览器（firefox 18）上：

*   测试 1（我保存了查找结果）的得分为 7,074 次操作
*   测试 2（我不保存查找结果）的得分为 1,553 次操作

所以，是的，`find`它是“慢”的，将它存储在一个变量中绝对是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:09:37.100

如果您要多次重复使用变量，这对`cache`他们来说绝对是一个好主意，就像您正在做的那样。

`.find()`在你之前传递的 jQuery 对象中遍历，所以它只在已经给出的内容中查找，使其非常快。

```
var $mainElement = $('#whatever'),
    $innerLIs  = $mainElement.find('li'),
    $innerTDs  = $mainElement.find('td');

// Now that these are cached in memory, doing anything to them is very quick

$innerLIs.hide();
// etc etc 
```

如果我们一直查询它们，它每次都必须查看 DOM。一旦完成，它也会每次都将其包装在一个 jQuery 对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:11:51.217

如果您多次操作同一事物 - 最好创建一个变量。

这样你就只是在操纵而不是每次都先查找它。

我删除了关于稍微缩短代码的声明 - 这是[一篇](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-think-right-to-left-with-jquery/)关于 jQuery 选择器和“从右到左”思维的网络文章

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T17:12:53.277

众所周知，jQuery的选择代价高昂，然后运行`.find`更是如此。缓存对象绝对是一个好主意，并且从 DRY 的角度来看在风格上也是有利的。

# sorting - 如何获取 JFace 的 TableViewer 的有序元素？

> ID：14464059
> 
> 赞同：3
> 
> 时间：2013-01-22T17:06:18.353
> 
> 标签：sorting, jface, tableviewer

我已经根据[Vogella 的说明](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html#sortcolumns)（转载如下）实现了 JFace 的 TableViewer 排序。碰巧排序仅在图形界面中进行（它没有反映在原始数据结构中），我需要按照它们在 GUI 中显示的顺序获取元素。

或者，反映原始数据结构中排序的实现也适合。

* * *

```
package de.vogella.jface.tableviewer.sorter;

import org.eclipse.jface.viewers.Viewer;
import org.eclipse.jface.viewers.ViewerComparator;
import org.eclipse.swt.SWT;

import de.vogella.jface.tableviewer.model.Person;

public class MyViewerComparator extends ViewerComparator {
  private int propertyIndex;
  private static final int DESCENDING = 1;
  private int direction = DESCENDING;

  public MyViewerComparator() {
    this.propertyIndex = 0;
    direction = DESCENDING;
  }

  public int getDirection() {
    return direction == 1 ? SWT.DOWN : SWT.UP;
  }

  public void setColumn(int column) {
    if (column == this.propertyIndex) {
      // Same column as last sort; toggle the direction
      direction = 1 - direction;
    } else {
      // New column; do an ascending sort
      this.propertyIndex = column;
      direction = DESCENDING;
    }
  }

  @Override
  public int compare(Viewer viewer, Object e1, Object e2) {
    Person p1 = (Person) e1;
    Person p2 = (Person) e2;
    int rc = 0;
    switch (propertyIndex) {
    case 0:
      rc = p1.getFirstName().compareTo(p2.getFirstName());
      break;
    case 1:
      rc = p1.getLastName().compareTo(p2.getLastName());
      break;
    case 2:
      rc = p1.getGender().compareTo(p2.getGender());
      break;
    case 3:
      if (p1.isMarried() == p2.isMarried()) {
        rc = 0;
      } else
        rc = (p1.isMarried() ? 1 : -1);
      break;
    default:
      rc = 0;
    }
    // If descending order, flip the direction
    if (direction == DESCENDING) {
      rc = -rc;
    }
    return rc;
  }

} 
```

* * *

```
package de.vogella.jface.tableviewer;

import org.eclipse.jface.viewers.ArrayContentProvider;
import org.eclipse.jface.viewers.ColumnLabelProvider;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.TableViewerColumn;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.Text;
import org.eclipse.ui.part.ViewPart;

import de.vogella.jface.tableviewer.model.ModelProvider;
import de.vogella.jface.tableviewer.model.Person;
import de.vogella.jface.tableviewer.sorter.MyViewerComparator;

public class View extends ViewPart {
  public static final String ID = "de.vogella.jface.tableviewer.view";
  private MyViewerComparator comparator;

  private TableViewer viewer;
  // We use icons
  private static final Image CHECKED = Activator.getImageDescriptor("icons/checked.gif").createImage();
  private static final Image UNCHECKED = Activator.getImageDescriptor("icons/unchecked.gif").createImage();

  public void createPartControl(Composite parent) {
    GridLayout layout = new GridLayout(2, false);
    parent.setLayout(layout);
    Label searchLabel = new Label(parent, SWT.NONE);
    searchLabel.setText("Search: ");
    final Text searchText = new Text(parent, SWT.BORDER | SWT.SEARCH);
    searchText.setLayoutData(new GridData(GridData.GRAB_HORIZONTAL
        | GridData.HORIZONTAL_ALIGN_FILL));
    createViewer(parent);
    // Set the sorter for the table
    comparator = new MyViewerComparator();
    viewer.setComparator(comparator);

  }

  private void createViewer(Composite parent) {
    viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL
        | SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);
    createColumns(parent, viewer);
    final Table table = viewer.getTable();
    table.setHeaderVisible(true);
    table.setLinesVisible(true);

    viewer.setContentProvider(new ArrayContentProvider());
    // Get the content for the viewer, setInput will call getElements in the
    // contentProvider
    viewer.setInput(ModelProvider.INSTANCE.getPersons());
    // Make the selection available to other views
    getSite().setSelectionProvider(viewer);

    // Layout the viewer
    GridData gridData = new GridData();
    gridData.verticalAlignment = GridData.FILL;
    gridData.horizontalSpan = 2;
    gridData.grabExcessHorizontalSpace = true;
    gridData.grabExcessVerticalSpace = true;
    gridData.horizontalAlignment = GridData.FILL;
    viewer.getControl().setLayoutData(gridData);
  }

  public TableViewer getViewer() {
    return viewer;
  }

  // This will create the columns for the table
  private void createColumns(final Composite parent, final TableViewer viewer) {
    String[] titles = { "First name", "Last name", "Gender", "Married" };
    int[] bounds = { 100, 100, 100, 100 };

    // First column is for the first name
    TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);
    col.setLabelProvider(new ColumnLabelProvider() {
      @Override
      public String getText(Object element) {
        Person p = (Person) element;
        return p.getFirstName();
      }
    });

    // Second column is for the last name
    col = createTableViewerColumn(titles[1], bounds[1], 1);
    col.setLabelProvider(new ColumnLabelProvider() {
      @Override
      public String getText(Object element) {
        Person p = (Person) element;
        return p.getLastName();
      }
    });

    // Now the gender
    col = createTableViewerColumn(titles[2], bounds[2], 2);
    col.setLabelProvider(new ColumnLabelProvider() {
      @Override
      public String getText(Object element) {
        Person p = (Person) element;
        return p.getGender();
      }
    });

    // // Now the status married
    col = createTableViewerColumn(titles[3], bounds[3], 3);
    col.setLabelProvider(new ColumnLabelProvider() {
      @Override
      public String getText(Object element) {
        return null;
      }

      @Override
      public Image getImage(Object element) {
        if (((Person) element).isMarried()) {
          return CHECKED;
        } else {
          return UNCHECKED;
        }
      }
    });

  }

  private TableViewerColumn createTableViewerColumn(String title, int bound,
      final int colNumber) {
    final TableViewerColumn viewerColumn = new TableViewerColumn(viewer,
        SWT.NONE);
    final TableColumn column = viewerColumn.getColumn();
    column.setText(title);
    column.setWidth(bound);
    column.setResizable(true);
    column.setMoveable(true);
    column.addSelectionListener(getSelectionAdapter(column, colNumber));
    return viewerColumn;
  }

  private SelectionAdapter getSelectionAdapter(final TableColumn column,
      final int index) {
    SelectionAdapter selectionAdapter = new SelectionAdapter() {
      @Override
      public void widgetSelected(SelectionEvent e) {
        comparator.setColumn(index);
        int dir = comparator.getDirection();
        viewer.getTable().setSortDirection(dir);
        viewer.getTable().setSortColumn(column);
        viewer.refresh();
      }
    };
    return selectionAdapter;
  }

/** * Passing the focus request to the viewer's control. */

  public void setFocus() {
    viewer.getControl().setFocus();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:30:54.687

编辑：

```
TableItem[] items = viewer.getTable().getItems();

MyObject[] objectsInGui = new MyObject[items.length];
for (int i = 0; i < items.length; i++) {
    objectsInGui[i] = (MyObject) items[i].getData();
} 
```

第二种方法（不是必需的）：

```
Method getRoot = StructuredViewer.getMethod("getRoot");
getRoot.setAccessible(true);
Method getSortedChildren = StructuredViewer.getMethod("getSortedChildren", Object.class);
getSortedChildren.setAccessible(true);
Object root = getRoot.invoke(viewer);
Object[] objectsInGui = getSortedChildren.invoke(viewer, root); 
```

或使用`getFilters()`and`getComparator()`并使用它们进行过滤和排序。

# java - 从应用程序中删除 crimson.jar 需要哪些步骤？

> ID：14464060
> 
> 赞同：4
> 
> 时间：2013-01-22T17:06:18.127
> 
> 标签：java, xml-parsing

由于深红色罐子的存在，我面临着几个问题，大多数论坛发布此类问题的解决方案是摆脱它。

**例如：**

> 原因：java.lang.IllegalArgumentException：在 org.apache.crimson.jaxp.DocumentBuilderFactoryImpl.setAttribute(DocumentBuilderFactoryImpl.java:93) 处没有实现任何属性

发布的解决方案是：

> 如果您只是想开始使用 xml，我建议您使用当前的 JAXP 或包含 jaxp 1.4 的最新 jdk。从 1.3 版开始，JAXP 已经取代了 Crimson 解析器。参考 1.3 发行说明[https://jaxp.java.net/1.3/ReleaseNotes.html](https://jaxp.java.net/1.3/ReleaseNotes.html)

但是当我删除这个**crimson.jar**时，我开始到处面临问题，比如：

```
Jan 22, 2013 8:26:07 PM org.apache.tomcat.util.digester.Digester warning
WARNING: Parse Warning Error at line 1 column 0: URI was not reported to parser for entity [document]
org.xml.sax.SAXParseException: URI was not reported to parser for entity [document]
    at gnu.xml.aelfred2.SAXDriver.warn(SAXDriver.java:934)
    at gnu.xml.aelfred2.SAXDriver.startExternalEntity(SAXDriver.java:631)
    at gnu.xml.aelfred2.XmlParser.pushURL(XmlParser.java:3358)
    at gnu.xml.aelfred2.XmlParser.doParse(XmlParser.java:159)
    at gnu.xml.aelfred2.SAXDriver.parse(SAXDriver.java:320)
    at gnu.xml.aelfred2.XmlReader.parse(XmlReader.java:294)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
    at org.apache.catalina.startup.TldConfig.tldScanStream(TldConfig.java:553)
    at org.apache.catalina.startup.TldConfig.tldScanWebXml(TldConfig.java:383)
    at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:299)
    at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:585)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5061)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:633)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:525)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1360)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1406)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:832)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:347)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:591)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Jan 22, 2013 8:26:07 PM org.apache.tomcat.util.digester.Digester warning
WARNING: Parse Warning Error at line 3 column 138: No base URI; hope URI is absolute: http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd
org.xml.sax.SAXParseException: No base URI; hope URI is absolute: http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd
    at gnu.xml.aelfred2.SAXDriver.warn(SAXDriver.java:934)
    at gnu.xml.aelfred2.XmlParser.readExternalIds(XmlParser.java:2399)
    at gnu.xml.aelfred2.XmlParser.parseDoctypedecl(XmlParser.java:804)
    at gnu.xml.aelfred2.XmlParser.parseProlog(XmlParser.java:522)
    at gnu.xml.aelfred2.XmlParser.parseDocument(XmlParser.java:414)
    at gnu.xml.aelfred2.XmlParser.doParse(XmlParser.java:167)
    at gnu.xml.aelfred2.SAXDriver.parse(SAXDriver.java:320)
    at gnu.xml.aelfred2.XmlReader.parse(XmlReader.java:294)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
    at org.apache.catalina.startup.TldConfig.tldScanStream(TldConfig.java:553)
    at org.apache.catalina.startup.TldConfig.tldScanWebXml(TldConfig.java:383)
    at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:299)
    at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:585)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5061)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:633)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:525)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1360)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1406)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:832)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:347)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:591)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Jan 22, 2013 8:26:08 PM org.apache.tomcat.util.digester.Digester warning
WARNING: Parse Warning Error at line 3 column 140: No base URI; hope this SYSTEM id is absolute: http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd
org.xml.sax.SAXParseException: No base URI; hope this SYSTEM id is absolute: http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd
    at gnu.xml.aelfred2.SAXDriver.warn(SAXDriver.java:934)
    at gnu.xml.aelfred2.SAXDriver.absolutize(SAXDriver.java:606)
    at gnu.xml.aelfred2.SAXDriver.resolveEntity(SAXDriver.java:585)
    at gnu.xml.aelfred2.XmlParser.pushURL(XmlParser.java:3336)
    at gnu.xml.aelfred2.XmlParser.parseDoctypedecl(XmlParser.java:845)
    at gnu.xml.aelfred2.XmlParser.parseProlog(XmlParser.java:522)
    at gnu.xml.aelfred2.XmlParser.parseDocument(XmlParser.java:414)
    at gnu.xml.aelfred2.XmlParser.doParse(XmlParser.java:167)
    at gnu.xml.aelfred2.SAXDriver.parse(SAXDriver.java:320)
    at gnu.xml.aelfred2.XmlReader.parse(XmlReader.java:294)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
    at org.apache.catalina.startup.TldConfig.tldScanStream(TldConfig.java:553)
    at org.apache.catalina.startup.TldConfig.tldScanWebXml(TldConfig.java:383)
    at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:299)
    at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:585)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5061)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:633)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:525)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1360)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1406)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:832)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:347)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:591)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Jan 22, 2013 8:26:08 PM org.apache.catalina.startup.XmlErrorHandler logFindings 
```

一些人提到使用 jaxp 1.4 jar，其他人提到 xerces 是 crimson.jar 的替代品。我都使用过，但我仍然收到那些警告异常。

所以我的问题是：从我的应用程序中删除/替换此 jar 和/或任何相关 jar 所需的步骤是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:41:19.457

根据[http://xml.apache.org/crimson/](http://xml.apache.org/crimson/)网页

2010/08/06 - Apache Crimson 已退役。

Crimson 代码库基于 Sun Project X 解析器。它也是目前在 Sun 产品中提供的解析器；但是，未来的计划是迁移到另一个名为 Xerces Java 2 的代码库。Xerces 2 目前正在开发中。[链接到 Xerces 2，一旦创建了项目页面。]

所以 Xerces 是所需要的，但问题是 xerces 库应该放在哪里，如果它作为你的战争的一部分，它将产生上面提出的所有问题，而不是它不应该是你的战争库的一部分，它应该是服务器共享库

对于 tomcat，您可以将其放在 lib 文件夹中，对于 Websphere，您可以将其放在任何位置并将其添加到您的应用程序共享库类路径中。

# scheme - 如何在球拍中编写函数

> ID：14464063
> 
> 赞同：1
> 
> 时间：2013-01-22T17:06:20.227
> 
> 标签：scheme, racket

新手问题：你会怎么用球拍写这个？

```
10x - 6 = 3x + 7 
```

我很难弄清楚我应该把`= 3x + 7`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:08:29.510

尝试这个：

```
(= (- (* 10 x) 6)
   (+ (*  3 x) 7)) 
```

当然，假设之前已经为`x`变量分配了一个值。现在，如果要将表达式作为函数的一部分进行评估（如标题所示），请执行以下操作：

```
(define (test x)
  (= (- (* 10 x) 6)
     (+ (*  3 x) 7))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:00:43.967

该语句的优先级组的数学约定如下：

```
((10 * x) - 6) = ((3 * x) + 7) 
```

在数学中，我们将运算符写在表达式的中间：`foo OP bar`，但在 Racket 中，运算符是第一位的：`(OP foo bar)`。因此，如果您只是将每个表达式打乱以匹配 Racket 方式，您将得到：

```
((10 * x) - 6) = ((3 * x) + 7)   ;=> swap = and (10x - 6)
(= ((10 * x) - 6) ((3 * x) + 7)) ;=> swap - and 10x
(= (- (10 * x) 6) ((3 * x) + 7)) ;=> swap * and 10
(= (- (* 10 x) 6) ((3 * x) + 7)) ;=> swap + and 3x
(= (- (* 10 x) 6) (+ (3 * x) 7)) ;=> swap * and 3

(= (- (* 10 x) 6) (+ (* 3 x) 7)) ;=> done 
```

既然我们已经重新排列了表达式，所以运算符放在第一位，我们就有了一个有效的 Racket 表达式。

# apache - 如何使用 .htaccess 重定向错误的引用？

> ID：14464065
> 
> 赞同：0
> 
> 时间：2013-01-22T17:06:31.043
> 
> 标签：apache, ubuntu, apache2

我从一个伪造谷歌图片搜索的机器人收到垃圾邮件，我想将所有流量从该推荐人重定向到其他地方，我该怎么做？

不良流量的引用字符串总是以[http://www.google.com/imgres?imgurl](http://www.google.com/imgres?imgurl)开头，在 imgurl 部分之后有一个更长的字符串。

我已经尝试过了，但它不起作用：

```
RewriteCond %{HTTP_REFERER} ^http://www.google.com/imgres?imgurl  [NC]
RewriteRule ^(.*)$ http://redirecthere.com/$1 [R=302,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:53:42.320

apache 重写引擎使用正则表达式和 ? 在正则表达式中意味着前面的 char 是可选的。所以你必须逃避？
这个应该工作：

```
RewriteCond %{HTTP_REFERER} ^http://www.google.com/imgres\?imgurl  [NC]
RewriteRule ^(.*)$ http://redirecthere.com/$1 [R=302,L] 
```

# ios - 获取设备信息

> ID：14464071
> 
> 赞同：1
> 
> 时间：2013-01-22T17:06:59.013
> 
> 标签：ios, objective-c

我正在构建一个个性化的新闻应用程序（ios 将与后端 api 对话）。当新用户使用该应用程序时，我想获取她的设备信息，以便在没有她参与的情况下向她提供相关新闻。为此，最好有可能获取用户在她的设备、位置、设备 ID 中安装的应用程序的类别......

我没有使用 iOS 的经验。我一直在阅读一些帖子和信息，但我对我实际上可以获得什么样的信息感到非常困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:15:34.957

您需要查看[UIDevice 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)参考以开始确定非[个人身份信息](http://en.wikipedia.org/wiki/Personally_identifiable_information)。

您将无法执行诸如自动检查他们安装了哪些其他应用程序之类的操作，因为这将构成严重的安全漏洞，并且您的应用程序将被 Apple 不假思索地拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T20:52:45.000

您可以通过询问设备可以打开哪些 URL（使用 UIApplication canOpenURL：[https ://developer.apple.com/library/ios/documentation/uikit/reference/UIApplication_Class/Reference/ Reference.html#//apple_ref/occ/instm/UIApplication/canOpenURL](https://developer.apple.com/library/ios/documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/canOpenURL) :)

在一个应用程序中，我想知道用户是否安装了 YouTube 应用程序并使用了这个：

[[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"youtube://foo"]]

YouTube 应用程序设置为处理以 youtube:// 开头的 url，因此如果设备可以处理它，那么它建议，虽然并不一定意味着，他们安装了 YouTube 应用程序。其他应用程序也可能声称它们也处理 youtube:// 链接，因此它不是 100% 准确，但可能足够接近。

您如何确定您感兴趣的每个应用程序处理哪些链接（请记住，某些应用程序不会处理这样的任何 URL）我不知道....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T22:10:42.920

有一个 3rd 方库，它使用 3 种方法来检查设备上安装了哪些其他应用程序

它被称为[iHasApp](https://www.ihasapp.com/)，许多开发人员都在使用它，成功地将应用程序提交到 App Store。

Apple 更希望您先请求许可，但由于这些方法是合法的（从应用程序提交的角度来看），但不需要用户授予应用程序许可。

征求他们同意的一个好方法是鼓励他们这样做。您弹出一个警报并解释您需要此信息的原因以及您将如何处理它。

# ios - 如何创建具有背景和旋转图像的 iPhone 应用程序？

> ID：14464074
> 
> 赞同：0
> 
> 时间：2013-01-22T17:07:06.597
> 
> 标签：ios, iphone, ipad

我正在过渡到 iPhone 编程，发现[如何在 ImageView 中显示图像？](https://stackoverflow.com/questions/6409313/how-to-display-image-in-imageview)回答我的一些问题，但没有指定一些基础知识，即什么样的项目可以显示图像，以及代码可以放在项目中的哪个位置。我创建了一个空项目，最后两行出现错误：

```
CGRect myImageRect = CGRectMake(0.0f, 0.0f, 320.0f, 109.0f);
UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect]; 
[myImage setImage:[UIImage imageNamed:@"myImage.png"]];
myImage.opaque = YES; // explicitly opaque for performance 
[self.view addSubview:myImage]; 
[myImage release]; 
```

如果我要显示一个钟面，最终是一个带有旋转指针的钟面，但现在的目标是显示钟面本身，我可以用一个基本项目来做吗，还是我需要从另一个项目重新开始，应该在哪里我要放置示例代码？[http://www.iphoneexamples.com/](http://www.iphoneexamples.com/)有 AFAICT 一些优秀的例子，但他们似乎假设你知道将代码放在哪里，并且你选择了最合适的项目。

因此，假设我不想立即为时钟指针设置动画，现在我希望显示我的 (PNG) 钟面，可以选择在屏幕上很好地定位。我从什么样的项目开始，我在哪里放置代码来显示图像，我应该使用什么代码来显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:13:57.337

转到 Interface Builder 或 Storyboard，如果您开始一个空项目，您可能没有这些项目，我建议您从 Single View 项目开始，然后在 Interface Builder 或 Storyboard 上，从库中拖动一个图像视图（也称为 UIImageView）并将其放置在画布上，使用右侧的属性栏，您可以像下图一样设置图像

![在此处输入图像描述](../Images/617cb0d39c4e3dda64eb43d6bc4d4b51.png)

这样您就可以在视图上显示图像，正确调整视图大小以适合您的图像尺寸，并为您要添加的每个其他图像重复。

对于您要问的问题，我的猜测是您对 iOS 开发还很陌生，我可以推荐您[开始 iOS 6 开发：探索 iOS SDK](https://rads.stackoverflow.com/amzn/click/com/B00ACC69HO)

# c++ - Qt Creator - 如何添加编译器？

> ID：14464075
> 
> 赞同：8
> 
> 时间：2013-01-22T17:07:08.140
> 
> 标签：c++, qt

> **可能重复：**
> [Qt Creator QT5 beta2、QT creator 2.6、MSVC 的 VC++ 编译器](https://stackoverflow.com/questions/1519743/vc-compiler-for-qt-creator)
> [错误：Qt Creator 需要设置编译器才能构建。在套件选项中配置编译器](https://stackoverflow.com/questions/13608596/qt5-beta2-qt-creator-2-6-msvc-error-qt-creator-needs-a-compiler-set-up-to-bui)

我刚刚安装了 Qt Creator（我第一次使用它），当我尝试编译时出现了这个错误：

`-1: error: Qt Creator needs a compiler set up to build. Configure a compiler in the kit options.`

这确实很有建议，我在堆栈上的其他帖子上阅读过，但我就是无法完成。这些是我在 Build&Run -> Compilers 中的选项：![在此处输入图像描述](../Images/feb3dabd0666ab97e73afd2a90211f74.png)

细节：

1.  它是基于 Qt 5.0.0（32 位）的 Qt Creator 2.6.1
2.  我已经安装了 Visual Studio 2012
3.  在 Qt 下载页面上，对于 Windows，只有 32 位选项，但我有 Windows 7 64 位

LE：这些是套件选项 ![在此处输入图像描述](../Images/da56d1bd5773d2d958f94a8ff5c5deb2.png)

必须为 Sysroot 和 Qt mkspec 指定哪些路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:27:27.160

您正在使用 Visual Studio 2012，解决方案：

1) 删除它并重新安装 Visual Studio 2010，Qt 5.0 可与此版本的 microsoft C/C++ 编译器一起使用。

2) 从 microsft 的网站直接安装提到的 SDK 编译器。

# javascript - 隐藏和显示列表和子列表

> ID：14464076
> 
> 赞同：0
> 
> 时间：2013-01-22T17:07:10.793
> 
> 标签：javascript, jquery, list

首先，我有一个 HTML 文档，其中包含如下列表：

```
<ul class="item">
    <li> Item 1
        <ul class="subitem">
            <li>Subitem1</li>
            <li>Subitem2</li>
            <li>Subitem3</li>
            <li>Subitem4</li>
        </ul>
    </li>
    <li> Item 2 
        <ul class="subitem">
            <li>Subitem1</li>
            <li>Subitem2</li>
            <li>Subitem3</li>
            <li>Subitem4</li>
        </ul>
    </li> 
    <li> Item 3 
        <ul class="subitem">
            <li>Subitem1</li>
            <li>Subitem2</li>
            <li>Subitem3</li>
            <li>Subitem4</li>
        </ul>
    </li>
</ul> 
```

我想编写一些`Javascript`代码，当我单击列表项中的一项时，它会显示其子项。如果我单击项目列表中的另一个项目，所有显示的子项目都应该被隐藏，只有我按下要显示的子项目。

到目前为止，我有这个：

```
$(document).ready(function(){
    $('.subitem').each(function()
    {
        $(this).hide();
    }
    $('.item').live("click",function(){
        $(this).next(".subitem").show();
    });
}); 
```

但它甚至不显示隐藏的子项。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:13:07.880

你需要做这样的事情。

```
$(function () {
    var $subitem = $(".subitem");

    $('.item').on("click", "li", function () {
        /* Hide all .subitem */
        $subitem.hide();
        /* Show children .subitem */
        $(this).children(".subitem").show();
    });
}); 
```

`.subitem`您可以使用 CSS，而不是使用 JavaScript 隐藏所有at 初始化。

```
.subitem {
    display: none;
} 
```

[看这里。](http://jsfiddle.net/ktWUb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:16:09.957

尝试

```
$('.item').on('click','li', function(){
   $(this).children(".subitem").show()
   .end().siblings().find('.subitem').hide();
}); 
```

演示在[http://jsfiddle.net/gaby/aMWMu/1/](http://jsfiddle.net/gaby/aMWMu/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:12:07.800

```
$('.subitem').hide();

$('.item > li').on("click",function(){
    $(this).parent().find(li .subitem).hide()
    $(this).find(".subitem").show();
}); 
```

# linux - 根据字符存在在linux中拆分文件

> ID：14464079
> 
> 赞同：1
> 
> 时间：2013-01-22T17:07:22.940
> 
> 标签：linux, bash, split

我试图在论坛上找到解决此问题的方法，但也无法理解某些解决方案。

我正在处理 DNA 数据，我有 2 个文件。第一个文件 (a) 是包含所有序列头的文件。（名称等）每个标题都有自己的行。例子：

```
>title1
>title2
>title3
>some other title 
```

第二个文件 (b) 包含这些标题的内容。每行对应于第一个文件。

```
GAGTTGGAAAGAG
GCTGCCCTGAGATCGTNNNN
GTGCAGTGATNNAGTG
ACTG 
```

我正在制作一个在序列中搜索未知字母的程序。通常你会假设文件 2 中只有字符 ACT 和 G。

我想做2个文件：

*   具有标题 + 序列（第一个选项卡 = 标题，第二个选项卡 = 序列）的文件，其中只有 ACT 和 G 的条目
*   一个同时具有标题 + 序列（第一个选项卡 = 标题，第二个选项卡 = 序列）的文件，只是这次我们只有包含其他字母的条目。（例如 N）

到目前为止我试过这个：

```
while read line; do
    echo "$line" | tr -d "A" | tr -d "C" | tr -d "T" | tr -d "G" | tr -d "\n" | wc -c
done <sequenceOnly.txt >unkownLines.txt 
```

这计算未知字符在 (b) 文件中出现的频率。如果此值大于 0，我想使用此行将标题 + 序列放置在 unknownLines.txt 文件中，但我被卡住了：/

预期的输出文件 1（只有 ACTG）：

```
>title1             GAGTTGGAAAGAG
>some other title   ACTG 
```

预期的输出文件 2（有其他东西）：

```
>title2            GCTGCCCTGAGATCGTNNNN
>title3            GTGCAGTGATNNAGTG 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:29:28.847

首先，将数据用 paste 放在一起，然后用 awk 分开：

```
paste header sequence | 
    awk '$NF ~ /^[ACTG]*$/ {print > "file1"; next }1'  > file2 
```

粘贴将数据放入两列，并`awk`检查最后一列是否仅包含字母`ACTG`。如果是，则将该行写入文件`file1`。（也将打印空序列。）如果没有，则将行写入`file2`.

# amazon-ec2 - 如何隐藏公共 DNS

> ID：14464088
> 
> 赞同：4
> 
> 时间：2013-01-22T17:07:58.300
> 
> 标签：amazon-ec2

我在亚马逊上有一个 ubuntu 实例；它还为我提供了一个公共 DNS，例如向世界开放的 ec2-XX-XXX-XX-XX.compute-1.amazonaws.com。

我有我自己的 DNS，我与亚马逊托管/实例链接，我想对亚马逊隐藏公共 DNS，以避免重复谷歌 SEO 的内容。

有可能吗？如果可以，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:43:39.200

您需要做的就是将您的 Web 服务器配置为仅响应域名。从技术上讲，如果您不使用虚拟主机，您可以通过该 IP 地址访问 Web 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:45:37.677

*   相应地设置您的主机名
*   调整您的反向 DNS 条目
*   删除 amazon-hostname 的 A 条目（确保手头有您的服务器 IP，以防您输入错误！）
*   仔细检查每个服务的配置错误，使服务显式绑定到您自己的域上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:39:04.547

您可以在 Google 网站管理员工具中将这两个域设置为您的域，然后将您的“真实”DNS 名称设置为首选名称。你没有隐藏它，你只是告诉谷歌他们是同一个网站。

# assembly - 是否有一些关于指令“jmpi”的授权文件

> ID：14464092
> 
> 赞同：3
> 
> 时间：2013-01-22T16:00:53.647
> 
> 标签：assembly, linux-kernel, x86

我正在学习 Linux 的工作原理。我遇到了一个奇怪的汇编语言指令，`jmpi`. 我可以在各种网站上找到一些解释，但奇怪的是我在汇编语言书籍中找不到它，包括[*Intel® 64 and IA-32 Architectures Software Developer's Manual*](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。我已经搜索了这本书，但它不包含说明`jmpi`。我认为英特尔手册应该是最权威的英特尔汇编语言书籍。所以很奇怪。

我的问题是：是否有一些书籍或权威文件记录了该说明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:44:11.190

英特尔处理器指令集中有几条`JMP`指令。它们具有相同的预期结果，但所采用的操作数类型不同：8 位常量、16 位常量、32 位常量、间接指定的值；也是相对跳跃还是绝对跳跃。请参阅架构手册第 854 页中的表格

```
Opcode Instruction  Description
------+------------+----------------------------
EB cb  JMP rel8     Jump short
E9 cw  JMP rel16    Jump near, relative
E9 cd  JMP rel32    Jump near, relative
FF /4  JMP r/m16    Jump near, absolute indirect
FF /4  JMP r/m32    Jump near, absolute indirect
FF /4  JMP r/m64    Jump near, absolute indirect
EA cd  JMP ptr16:16 Jump far, absolute
... 
```

它们被不同地视为在架构开发的不同阶段支持的不同内存模型的遗留物。

许多汇编程序引入了额外的助记符以使汇编代码更具可读性。所以在`as86`指令`JMPI`中指的是一个近处`JMP`，它可以是绝对的，也可以是相对的，但应该始终停留在代码段内，即段内*跳转*。`as86`是唯一的权威参考。

# visual-studio-2010 - 在 VS Find 中使用正则表达式查找未注释掉的行

> ID：14464102
> 
> 赞同：0
> 
> 时间：2013-01-22T17:08:31.180
> 
> 标签：visual-studio-2010, visual-studio

我对正则表达式完全陌生，因此失败了。我有大约 14000 行引用了一个需要注释掉的函数。不是问题。我只是厌倦了在我的查找结果中看到已经处理过的相同行......基本上我正在尝试这个：

```
 ({^?!'}Green.Foo*) 
```

它仍然返回所有注释掉的结果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:13:55.673

你想要一个零宽度的负面外观，所以应该这样做看看[这个页面](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)**在**Grouping Constructs 下。 `(?<!')Green.Foo*`

我假设您的代码当然是在 VB 中。

# codeigniter - Codeigniter 仅在 cookie 中存储会话数据有什么意义？

> ID：14464104
> 
> 赞同：0
> 
> 时间：2013-01-22T17:08:33.430
> 
> 标签：codeigniter, session, cookies

所有 CI 用户都知道默认情况下会话存储在 cookie 中。

但是这个实现的真正意义是什么？我实在找不到好理由。

好的，在共享服务器中，人们可能会访问会话文件，但客户端呢？我也可以更改 cookie 中的数据，并且作为一种“单向”方法，我什至如何验证服务器端会话 cookie 中的数据？我觉得这很奇怪，更不用说 cookie 可能会遇到大小问题。

我知道数据库方法，但是如果我在一个具有完全控制权的专用服务器中并且我不想浪费数据库资源在单个页面上查询会话表，那将不会更灵活/有用默认情况下提供经典的 PHP 方法，以便我可以使用 cookie 中的 ID 验证数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:15:32.933

您可以使用 CSRF 保护并对 cookie 进行加密，以加强系统对 cookie 的操纵。

但是，如果您担心安全性，则绝对*应该*将数据库用于会话。除非您有大量用户，否则对数据库的影响可以忽略不计。如果您确实有大量用户，那么考虑在会话查找时分配工作负载的时间将是您最不担心的事情。

客户端 cookie 更多地用于状态。它们可用于登录表单上的“记住我”或页面布局或其他内容。它们不应用于保护您的应用程序。

如果您不使用数据库会话，则无法通过 cookie 验证会话，因为应用程序无法存储会话 ID。

请参阅[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)了解更多详情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:23:57.377

基于 Cookie 的会话为存储会话信息提供了一种轻量级且快速的机制。它们也是安全的。每个 cookie 都使用强大的 AES-256 加密进行加密。但是，cookie 有 4 KB 的存储限制，因此如果您在会话中存储大量数据，您可能希望使用另一个驱动程序。数据根据配置中的哈希值进行加密，CI 还会间歇性地对哈希值运行更新以提高安全性。将会话存储在 cookie 或数据库中也更适合高负载下的服务器场或集群。许多大公司和其他高流量网站在他们的会话中使用这种策略。

话虽这么说，我理解限制为 4kb 数据、拥有数据客户端以及在每个页面加载时将数据显示为请求的担忧。但是，没有什么可以阻止您手动使用默认 PHP 会话或滚动您自己的会话库。

# linux - 确定是否使用 lsusb 数据挂载了 USB

> ID：14464106
> 
> 赞同：2
> 
> 时间：2013-01-22T17:08:39.717
> 
> 标签：linux, linux-device-driver, usb-drive

我正在尝试确定是否在 linux 发行版（修改后的 Ubuntu 10.04）上安装了 USB 存储设备（USB 记忆棒）。目前我使用 lsusb -v 命令并对其进行解析以获取我感兴趣的 USB 设备的总线、设备和 ID。

> 总线：001 设备：008 ID 0781:5560 SanDisk Corp.。. .

我理想中想要的是能够使用从 lsusb -v 获得的数据来确定该 USB 是否已安装。

我以前从未真正在这个领域摆弄过（它刚刚结束在我的腿上）任何指针都会受到赞赏。我看过这里和其他网站，学到了一些有趣的东西，但没有什么能让我更接近。我可以在 /proc/mount 中看到 USB 已安装，但无法将我通过 lsusb 获得的设备信息与我在 cat /proc/mount 中获得的信息相匹配，因为这将构成我需要的应用程序的一部分能够与另一个匹配。

仅供参考：该应用程序是用 python 编写的，我受到无法使用外部库（如 pyUSB）的限制。正如我所说，任何指针/帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:39:06.790

我的建议是`lsusb`与[`dmesg`](http://tldp.org/LDP/LG/issue59/nazario.html)命令结合使用来确定是否安装了 USB 设备。

`lsusb`这是我的 Ubuntu 机器的示例输出`dmesg`。的输出`dmesg`包括设备编号和报告的产品/供应商信息`lsusb`

```
dbala@ubuntu:~$ lsusb
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 002: ID 0e0f:0003 VMware, Inc. Virtual Mouse
Bus 002 Device 003: ID 0e0f:0002 VMware, Inc. Virtual USB Hub
Bus 001 Device 005: ID 0781:5530 SanDisk Corp. Cruzer U3 4gb SDCZ36

dbala@ubuntu:~$ dmesg | tail
[1084707.969418] usb 1-1: new high speed USB device number 5 using ehci_hcd
[1084708.119662] scsi5 : usb-storage 1-1:1.0
[1084709.120841] scsi 5:0:0:0: Direct-Access     SanDisk  Cruzer           1.19 PQ: 0   ANSI: 5
[1084709.125158] sd 5:0:0:0: Attached scsi generic sg2 type 0
[1084709.130677] sd 5:0:0:0: [sdb] 31266816 512-byte logical blocks: (16.0 GB/14.9 GiB)
[1084709.138819] sd 5:0:0:0: [sdb] Write Protect is off
[1084709.138821] sd 5:0:0:0: [sdb] Mode Sense: 43 00 00 00
[1084709.146812] sd 5:0:0:0: [sdb] Write cache: disabled, read cache: enabled, doesn't support DPO or FUA
[1084709.186467]  sdb: sdb1
[1084709.215365] sd 5:0:0:0: [sdb] Attached SCSI removable disk
dbala@ubuntu:~$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:48:05.907

`mount`不带参数将列出所有挂载的文件系统。例如：

```
~ » mount                                                                                                                                                                                   wangbin@dhcp12-241
proc on /proc type proc (rw,nosuid,nodev,noexec,relatime)
sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime,seclabel)
devtmpfs on /dev type devtmpfs (rw,nosuid,seclabel,size=3988728k,nr_inodes=997182,mode=755)
devpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,seclabel,gid=5,mode=620,ptmxmode=000)
tmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,seclabel)
tmpfs on /run type tmpfs (rw,nosuid,nodev,seclabel,mode=755)
/dev/sda1 on / type ext4 (rw,relatime,seclabel,data=ordered) 
```

如果您知道您的 USB 磁盘设备，例如`/dev/sdb`，您可以尝试在输出中搜索它：

```
mount | grep '/dev/sdb' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:50:50.833

您可以使用：

```
numberOfUsb=$(lspci | grep -c USB)
echo "Number of USB controller found: $numberOfUsb"

parsedId=`lspci | grep -m 8 USB | sed "s/ .*//"` 
```

# java - Java：如何创建和运行类结构？

> ID：14464113
> 
> 赞同：0
> 
> 时间：2013-01-22T17:08:59.170
> 
> 标签：java, oop, extend

我必须创建以下类层次结构。

![在此处输入图像描述](../Images/3c1b43c4cc9b2f7884557874d2be9873.png)

我是这样开始的：

```
public class Student {
  private String name;
  private int credits;
  public Student(String name, int credits) {
    this.name = name;
    this.credits = credits;
  }

  public String getName(){
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }
  // ...the same for "credits"...

  public String toString(){
    return "name: "+this.name+", credits: "+this.credits;
  }

  public void print(){
    System.out.print(this.toString);
  }
}

public class DailyStudent extends Student {
  private int scholarship;
  public DenniStudent(int scholarship) {
    this.scholarship = scholarship;
  }

  public int getScholarship(){
    return scholarship;
  }
  public void setScholarship(int scholarship) {
    this.scholarship = scholarship;
  }
  public String toString(){
    return "Scholarship: "+scholarship;
  }
} 
```

名为**RemoteStudent的类看起来与****DailyStudent**类几乎相同。

现在我必须创建类**StudentTest**，我将在其中测试我刚刚创建的内容。在这个类中，我应该使用声明的构造函数（带有所有参数）从上面的每个类中创建实例（对象）。在所有创建的对象上，我应该应用**toString()**和**print()**方法。

但是在这里我遇到了问题 - 我不知道，如何设置类**StudentTest**以及如何在那里创建所有需要的实例......以及如何使用方法**print()**，如果这个方法只是 int**学生**班。

我完全是 Java 新手，但是，两个 2 first 方法是否正确？

谢谢你们的帮助和耐心。

**编辑：****StudentTest**方法的实现：

```
public class StudentTest {
  public static void main(String[] args) {
    DailyStudent daily = new DailyStudent(1000);
    daily.print(); // this is what I mean
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:14:38.673

是的，它看起来不错。那是你想要`toString`返回的吗？另外，看看抽象，除非你的教授还没有谈到这一点。也许他们会介绍这个话题。如您所见，该`toString()`方法用于所有 3 个类。你有一个类层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:26:29.717

让我们一个一个地解决问题。

1.  要创建实例，请使用工厂模式。创建具有所有需要参数`StudentFactory`的方法的类，`createStudent()`并根据这些参数创建远程或日常学生。使用如下：

    学生 student = StudentFactory.create(......);

从现在开始，您可以使用学生，工厂外的任何人都不知道它是哪个学生。

1.  您现在可以使用您的`print`方法：`student.print()`. 它适用于远程和日常学生。

2.  在测试中使用工厂。如果它是基于 JUnit 的测试，您可以使用注释`@RunWith(Parametrized.class)`并只编写一个测试用例，该用例将为日常和远程学生运行。

    @RunWith(Parameterized.class) 公共类 StudentTest { 私人学生学生；

    ```
    public StudentTest(Student student) {
        this.student = student;
    }

    @Parameter
    public static Collection<Student> createStudent() {
        return  Arrays.asList(
                    StudentFactory.create(....),    // create remote student
                    StudentFactory.create(....));   // create daily student
    }
    // write your tests here 
    ```

    }

此测试用例将为在`createStudent()`方法中创建的两个学生运行。

# javascript - 制作 3D 阵列的 2D 横截面切片

> ID：14464121
> 
> 赞同：2
> 
> 时间：2013-01-22T17:09:18.823
> 
> 标签：javascript, arrays, 3d

我正在尝试根据体积 CT 数据制作实时模拟超声图像。诀窍是用户控制探头的位置，它定义了他们所看到的平面。

到目前为止，我所做的是将所有 dicom 图像中的像素数据读取到单个 3D 像素阵列中，现在我需要做的是以不同角度重新切片该 3D 阵列。抱歉，如果下面的描述有点草率，但想象一个 3D 矩形框（比如 100 像素宽和深 [x,z] 和 500 像素长 [y]）和 2D“观察平面”（比如 50 x 50 像素）。假设观察平面的起始位置（原点定义为平面闭合边缘的中点 - [0,25]）与原点 [50,250,0] （顶面的死点，向下看） ，从左到右并垂直向下刺穿矩形。因此，观察平面具有三个可以更改的参数 - 原点的位置，围绕垂直方向的旋转（从原点到平面相对边缘上对应点的线）和“倾斜”（平面围绕与框相交的线的旋转）。因此用户可以更改这三个参数，输出是由观察平面“触摸”的像素构建的图像。

再次，如果描述草率，我深表歉意，但我是一名没有强大数学背景的医学生。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:05:34.710

听起来像是一个有趣的问题，我开始考虑它，但很快遇到了一些问题。它并不像您最初想象的那么简单或直接！作为开始，我将其简化为通过 2D 数组获取 1D 切片的情况。很快就很清楚，对于某些切片，对于所有像素来说，哪些像素将构成切片的一部分并不明显。我制作了一个pdf来说明我的意思。这是 pdf 文档[Issues 2D](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxqa2dhZGdldHN0b3JlfGd4OjQ4Yjc3YWM5Yzg3NDgzZGM)的链接。在想出一个可能的解决方案之前，我或其他人需要更多的思考。抱歉，我目前无法提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T09:52:12.277

> 我会为一条线写一个二维方程，求解 x 的每个值，然后将结果 y 变量四舍五入到最接近的整数——昨天 Edje09

暂时坚持使用 2D 案例，您建议的方法有两个主要问题

1.  如果该线比梯度 1 更陡，则可能会丢失一些像素。
2.  四舍五入可以选择比您要选择的像素高一个像素。

[此 pdf](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxqa2dhZGdldHN0b3JlfGd4OjZjN2U4YTQ2NWVhZGI5Yjk)显示了 2D 案例的问题和可能的解决方案，然后可以为 3D 案例构建。

编辑经过进一步思考，我可能已经[为 3D 案例制作了一个书面的 pdf 大纲解决方案](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxqa2dhZGdldHN0b3JlfGd4OjVmNWIyNzc0MDZmYjE5OGY)，可以将其转换为算法并因此转换为代码。据我所知，我没有做任何检查，也不能保证它的正确性，但希望能让你更进一步。

添加了编辑代码以下Javascript代码似乎可以满足您的要求。它很慢，因此您需要在单击 SET 后等待。此外，视图之间的“窗格”也不清楚，因此在重新填充“窗格”之前，您无法判断正在发生任何事情。我只测试了使用 2 个图像来表示 z 方向上的 100 个像素。函数 getPixels 中的第一行代码处理了这个限制，删除了 z 方向上的完整图像集。我进行的测试相当肤浅，但似乎通过了。最好有全套图像。

我将 3D 阵列想象为一系列 D 图像 image(0) 在后面运行 z 方向到前面的 image(D-1)。每个图像在 x 方向上具有宽度 W，在 y 方向上具有高度 H。感谢我喜欢它的挑战。

所用图像的压缩文件夹的链接位于代码末尾。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!--
Copyright (c)  2013   John King
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
<title>3D Slicer</title>
<style type="text/css">
    div, canvas, img {
        position: absolute;
    }

    img {
        top:0px;
        left:0px;
        visibility:hidden;
    }
    input {
        text-align: right;
    }
    .seen {
        visibility: visible;
    }   
    #canvas3D {
        left:10px;
        top:10px;
        visibility:hidden;
    }
    #canvas2D {
        left:10px;
        top:50px;
        border:1px solid black;
    }
    #frame {
        left:650px;
        top:10px;
        border:1px solid black;
        background-color: #DDDDDD;
        width:600px;
        height:600px;
    }
    #framehead {
        left:0px;
        top:0px;
        height:25px;
        width:100%;
        border-bottom: 1px solid black;
        background-color: #999999;
    }
    #userdata {
        top:10px;
        left:10px;
    }
    #originins {
        top:10px;
        left:10px;
        width:260px;
    }
    #origintext {
        top:200px;
        left:10px;
        width:260px;
    }
    #origininput {
        top:225px;
        left:10px;
        width:260px;        
    }
    #originlimits {
        top:250px;
        left:10px;
        width:260px;
    }
    #thetaimg {
        top:10px;
        left:225px;
    }
    #thetatext {
        top:200px;
        left:225px;
        width:260px;
    }
    #thetainput {
        top:225px;
        left:225px;
        width:260px;
    }
    #thetalimits {
        top:250px;
        left:225px;
        width:260px;
    }
    #psiimg {
        top:10px;
        left:440px;
    }
    #psitext {
        top:200px;
        left:440px;
        width:260px;
    }
    #psiinput {
        top:220px;
        left:440px;
        width:260px;
    }
    #psilimits {
        top:250px;
        left:440px;
        width:260px;
    }
    #setButton {
        top:310px;
        left:10px;
        width:260px;
    }
    #axes {
        top:350px;
        left:10px;
    }
</style>
<script type="text/javascript">

    //add a trim function to string if not present - strips white space from start and end of string
    if(typeof String.prototype.trim !== 'function') {
        String.prototype.trim = function() {
            return this.replace(/^\s+|\s+$/g, ''); 
        }
    }

    // abbreviation function for getElementById
    function $(id) {
      return document.getElementById(id);
    }

    //parameters for 3D array of pixels set in code
    var W=100; //width of array in x direction, must be even
    var D=100; //depth of array in z direction, must be even
    var H=500; //height of array in y direction

    //parameters for the rectangular plane PQRS that will select the pixels for a 2D array by slicing through the 3D array
    //PQRS moves in such a way that PQ remains parallel to xz plane and PS remains parallel to yz plane
    //these parameters set in code
    var L=50; //length of rectangle PQ
    var B=50; //breadth of rectangle PS

    //Initialisation of parameters that can be changed by the user.
    var O=new Point(W/2,0,D/2); //O is middle of PQ
    var theta=0; //angle PQ is rotated after plane is rotated about a vertical axis through O, must be between -PI/2 and PI/2
    var psi=0; //angle PS is rotated after plane is rotated about PQ as an axis, must be between -PI/2 and PI/2

    //variable for canvases
    var c3D, c2D;

    /*getPixel gets an individual pixel from the 3D array of pixels formed by a stack of D (for depth) 2D images
     * numbered from 0 to D-1, with 0 being the image at the back.
     * Each image having width W and height H pixels.
     * 0<= x <W, 0<= y <H,  0<= z <D
     * each image is on the canvas canvas3D
     * 
     * for this test img0.jpg will be used for img0.jpg to img49.jpg  and img50.jpg will be used for img50 to img99
     */
    function getPixel(x,y,z) {
        // line below only required because just two images img0.jpg and img50.jpg are used for testing
        z=Math.floor(z/50)*50;          
        //Remove above line if full series of images used in z direction
        this.ctx.drawImage($("i"+z),0,0);
        var imdata=this.ctx.getImageData(0,0,this.width,this.height);
        var col=4*(y*this.width+x);
        var pix=new Pixel();
        pix.red=imdata.data[col++];
        pix.green=imdata.data[col++];
        pix.blue=imdata.data[col++];
        pix.alpha=imdata.data[col];
        return pix;
    }

    //Pixel Object
    function Pixel() {
        this.red;
        this.green;
        this.blue;
        this.alpha;
    }

    //Point Object
    function Point(x,y,z) {
        this.x=x;
        this.y=y;
        this.z=z;
    }

    function Point2D(a,d) {
        this.a=a;
        this.d=d;
    }

    function setValues() {
        c2D.ctx.clearRect(0,0,c2D.width,c2D.height);
        var Oobj=Ochecked($("Oin").value);
        if(!Oobj.OK) {
            $("Oin").style.backgroundColor="#F1B7B7";
            return
        }
        $("Oin").style.backgroundColor="#FFFFFF";
        O=Oobj.point;
        var th=parseInt($("thetain").value.trim());
        if(isNaN(th)) {
            $("thetain").style.backgroundColor="#F1B7B7";
            return
        }
        if(th<=-90 || th>90) {
            $("thetain").style.backgroundColor="#F1B7B7";
            return
        }
        $("thetain").style.backgroundColor="#FFFFFF";
        theta=th*Math.PI/180;
        var si=parseInt($("psiin").value.trim());
        if(isNaN(si)) {
            $("psiin").style.backgroundColor="#F1B7B7";
            return
        }
        if(si<=-90 || si>90) {
            $("psiin").style.backgroundColor="#F1B7B7";
            return
        }
        $("psiin").style.backgroundColor="#FFFFFF";
        psi=si*Math.PI/180;
        printPane();
    }

    function Ochecked(Ovalue) {
        Ovalue=Ovalue.trim();
        var V=Ovalue.split(",");
        if(V.length!=3) {return {OK:false}};
        var x=parseInt(V[0].trim());
        var y=parseInt(V[1].trim());
        var z=parseInt(V[2].trim());
        if(isNaN(x) || isNaN(y) || isNaN(z))  {return {OK:false}};
        if(x<0 || x>=W) {return {OK:false}};
        if(y<0 || y>=H) {return {OK:false}};
        if(z<0 || z>=D) {return {OK:false}};
        p=new Point(x,y,z);
        return {OK:true,point:p};
    }

    function printPane(){
        var p = new Point(O.x-Math.round((L/2)*Math.cos(theta)),O.y,O.z - Math.round((L/2)*Math.sin(theta)));
        var q = new Point(O.x+Math.round((L/2)*Math.cos(theta)),O.y,O.z + Math.round((L/2)*Math.sin(theta)));
        var s = new Point(p.x,p.y+Math.round((B)*Math.cos(psi)),p.z + Math.round((B)*Math.sin(psi)));
        var n = new Point2D(q.x-p.x,q.z-p.z);       
        var PQincVec=getIncVec(n.a,n.d);
        n = new Point2D(s.y-p.y,s.z-p.z);       
        var PSincVec=getIncVec(n.a,n.d);
        var pixel,col;
        var PSpoint =new Point(p.x,p.y,p.z); // points along PS initialised to start at P
        var PQpoint; //variable for points along line parallel to PQ
        var imdata=c2D.ctx.getImageData(0,0,c2D.width,c2D.height);          
        for(var ps=0;ps<PSincVec.length;ps++) {
            //increment along line PS
            PSpoint.y+=PSincVec[ps].a;
            PSpoint.z+=PSincVec[ps].d;
            PQpoint =new Point(PSpoint.x,PSpoint.y,PSpoint.z); // points along line parallel to PQ initialised to current point on PS
            for(var pq=0;pq<PQincVec.length;pq++) {
                //increment along line PQ
                PQpoint.x+=PQincVec[pq].a;
                PQpoint.z+=PQincVec[pq].d;
                //check that PQpoint is inside 3D array
                if(0<=PQpoint.x && PQpoint.x<W && 0<=PQpoint.y && PQpoint.y<H && 0<=PQpoint.z && PQpoint.z<D) {
                    pixel=c3D.getPixel(PQpoint.x,PQpoint.y,PQpoint.z);
                    //write pixel from point along line parallel to PQ onto plane
                    col=4*(ps*c2D.width+pq);
                    imdata.data[col++]=pixel.red;
                    imdata.data[col++]=pixel.green;
                    imdata.data[col++]=pixel.blue;
                    imdata.data[col]=pixel.alpha;
                }               
            }
        }
        c2D.ctx.putImageData(imdata,0,0);
    }

    function getIncVec(a,d) {
        var r,t;
        if(a>Math.abs(d)) {
            var incVec=getIncs(a,Math.abs(d));
        }
        else {
            var incVec=getIncs(Math.abs(d),a);
            for(var i=0;i<incVec.length;i++) {
                r=incVec[i];
                t=r.a;
                r.a=r.d;
                r.d=t;
            }
        }
        if(d<0) {
            for(var i=0;i<incVec.length;i++) {
                incVec[i].d*=-1;
            }
        }
        return incVec;
    }

    function getIncs(a,d) {
        var p=new Point2D(0,0);
        var vec=[];
        vec.push(p);
        for(var i=0;i<a;i++) {
            p=new Point2D(1,Math.floor((i+1)*d/a) - Math.floor(i*d/a));
            vec.push(p);
        }
        return vec;
    }

    function main() {
        //set limits and values for user input.
        $("Oin").value=O.x+","+O.y+","+O.z;
        $("thetain").value=theta;
        $("psiin").value=psi;
        $("originlimits").innerHTML="0&lt;= x &lt;"+W+"<br>0&lt;= y &lt;"+H+"<br>0&lt;= z &lt;"+D;
        //set canvas3D so that pixels are readable
        c3D=$("canvas3D");
        c3D.width=W;
        c3D.height=H;
        c3D.ctx=c3D.getContext('2d');
        c3D.getPixel=getPixel;

        //set canvas2D so that pixels are settable
        c2D=$("canvas2D");
        c2D.width=L;
        c2D.height=B;
        c2D.ctx=c2D.getContext('2d');
        c2D.initialise=initialise;

        $("hide").style.width=L+"px";
        $("hide").style.height=B+"px";
    }
</script>
</head>
<body onload="main()">
    <!-- list of images for 3D array -->
    <img id="i0" src="images/img0.jpg">
    <img id="i50" src="images/img50.jpg">
    <!-- end of list of images for 3D array -->

    <canvas id="canvas3D"></canvas>
    <div id="frame">
        <div id="framehead">&nbsp;&nbsp;&nbsp;View of Slicing Pane</div>
        <canvas id="canvas2D"></canvas>
    </div>
    <div id="userdata">
        <div id="originins">Enter in form x,y,z </br> eg 40,27,83</div>
        <div id="origintext">Position for Origin O</div>
        <div id="origininput"><input id="Oin"></div>
        <div id="originlimits">limits</div>
        <img class="seen" id="thetaimg" src="images/theta.png">
        <div id="thetatext">Theta in degrees</div>
        <div id="thetainput"><input id="thetain"></div>
        <div id="thetalimits">-90 &lt; theta &lt;=90</div>
        <img class="seen" id="psiimg" src="images/psi.jpg">
        <div id="psitext">Psi in degrees</div>
        <div id="psiinput"><input id="psiin"></div>
        <div id="psilimits">-90 &lt; psi &lt;=90</div>
        <div id="setButton"><input type="button" value="SET" onclick="setValues()"></div>
        <img class="seen" id="axes" src="images/axes.jpg">
    </div>
<div id="msg"></div>    
</body>
</html> 
```

[代码中使用的图像](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxqa2dhZGdldHN0b3JlfGd4Ojc5YWNiYjE3MjNmZGE5NjM)

# mysql - 同表连接

> ID：14464122
> 
> 赞同：1
> 
> 时间：2013-01-22T17:09:23.057
> 
> 标签：mysql

表员工有 ssn 和 superssn 列。我想显示每个员工的主管的主管（如果不存在，则为 null）。到目前为止，我只有每个员工的主管：

```
SELECT p.fname AS sup,
group_concat(c.fname) AS emp 
FROM employee AS p
LEFT JOIN employee AS c 
ON (p.ssn = c.superssn) 
GROUP BY p.ssn; 
```

我应该再做一个`JOIN`吗？还是里面的东西`GROUP BY`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:15:08.450

`employee`如果您想要经理，员工，然后是经理的主管，那么您可以多次加入桌子：

```
SELECT p.fname AS sup,   -- Manager
    group_concat(c.fname) AS emp,  -- Employees
    sp.fname as SuperSuper   -- Manager Supervisor
FROM employee AS p
LEFT JOIN employee AS c 
    ON p.ssn = c.superssn
LEFT JOIN employee sp
    on p.superssn = sp.ssn
GROUP BY p.ssn; 
```

# .net - 将代码从 exe 中分离到 DLL 中

> ID：14464123
> 
> 赞同：1
> 
> 时间：2013-01-22T17:09:25.437
> 
> 标签：.net, wpf

我们每周多次更新我们的 WPF 应用程序，这是一个痛点，因为反复要求客户让 exe 通过他们的防火墙。

为了解决这个问题，我将尝试从 exe 中取出大部分代码（包括 xaml），因此 exe 永远不会改变。

下面的方法似乎有效，有什么理由我不应该这样做吗？例如可以有多个应用程序对象吗？

项目：TestWpfSeperateCodeFromExe

```
namespace TestWpfSeperateCodeFromExe
{
    public class App
    {

        // Entry point method
        [STAThread]
        public static void Main(string[] args)
        {
                AppView.Main(args);
        }
    }
} 
```

项目：查看

```
namespace View
{
    public class AppView : Application
    {
        // Entry point method
        [STAThread]
        public static void Main(string[] args)
        {
            var app = new AppView();

            app.Run();
        }

        public AppView()
        {
            new MainWindow().Show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:26:22.640

一种更好的方法是将您的代码（包括 XAML）移动到一个或多个用户控件库。然后您的主 EXE 将只加载这些控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:20:07.507

使用另一个应用程序对象很可能会破坏许多事情，因为您无法直接控制进程 - 您应该避免这种情况并使用简单的函数/方法调用，这些工​​作完美无缺，这就是 DLL 的用途。事实上，我实际上认为这不可能以你想象的方式实现。

像everbody 那样使用 DLL 有很多优点，您可以将 99% 的代码移动到 DLL 中，并使主要入口点（EXE 文件）绝对静态，无需摆弄应用程序对象。

# glassfish - 什么是 Glassfish“osgi-cache”？

> ID：14464125
> 
> 赞同：9
> 
> 时间：2013-01-22T17:09:31.443
> 
> 标签：glassfish

我在开发环境中通过 Netbeans 运行 GF 3。我注意到我的域包含一个包含 300 多个子目录的巨大目录。父目录是 osgi-cache。

有谁知道这是什么？我删除了下面的条目，但是一旦我重新启动服务器，它又回来了。

他们没有打扰我，但我想知道他们为什么需要这么多空间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T17:55:57.047

GlassFish 模块化层位于 OSGi 之上，GlassFish 附带的 OSGi 运行时是 Apache Felix。OSGi 规范规定 OSGi 运行时必须缓存捆绑包并存储捆绑包运行时状态。您可以[在此处](https://felix.apache.org/documentation/subprojects/apache-felix-framework/apache-felix-framework-bundle-cache.html)了解有关 Apache Felix OSGi 缓存的更多信息。

希望这可以帮助。

# c - 如果类型与左侧操作数匹配，为什么要显式转换右侧指针操作数？

> ID：14464136
> 
> 赞同：3
> 
> 时间：2013-01-22T17:09:54.390
> 
> 标签：c, pointers, casting, variable-assignment

关于 C 编程，我在示例代码中看到了几种情况，其中指针赋值涉及右侧操作数的显式转换，即使它已经与左侧操作数的类型匹配。仅举一个例子：

```
void memcpy(u8int *dest, const u8int *src, u32int len)
{
    const u8int *sp = (const u8int *)src;
    u8int *dp = (u8int *)dest;
    for(; len != 0; len--) *dp++ = *sp++;
} 
```

当然，该函数也在头文件中正确声明为：

```
void memcpy(u8int * dest, const u8int * src, u32int len); 
```

该函数已经将变量“src”定义为类型“const u8int *”，那么为什么在分配给同样类型为“const u8int *”的“sp”时会给出显式转换？将“dest”分配给“dp”也是如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:19:03.303

如果你正在寻找一个神奇的神秘理由来做这件事，你会失望的。这种类型的显式类型转换没有意义。

这是程序员的风格决定（而 IMO 是一个糟糕的决定）。类型转换有潜在的危险（通过“屏蔽”重要的警告）并使代码更复杂的阅读......它应该保留在需要的情况下。这不是其中的一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:20:14.127

当它们已经属于同一类型时，这样做没有用。当然，这是一种不好的做法。

也许你读错书了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:14:36.703

我的猜测是它只是查找/替换操作的剩余部分，没有理由这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T17:20:54.617

他可能只是在虔诚地编写代码，背后没有任何意义（一种习惯）。

好吧，只有编写此代码的程序员知道他在做什么（或者他不知道）。这个函数可能会覆盖`memcpy()`from，`string.h`因为你不能有两个同名的函数。知道了这一点，他进入了危险的水域。如果你必须使用这个，你也是。

# jquery - 使用 blueimp 文件上传器的内部服务器错误

> ID：14464141
> 
> 赞同：1
> 
> 时间：2013-01-22T17:10:11.310
> 
> 标签：jquery, nginx, blueimp, jquery-file-upload

我下载了最新版本的[文件](https://github.com/blueimp/jQuery-File-Upload)

我将它们上传到我的服务器上，构成：

*   带有最新 Debian 映像的树莓派：`2012-08-08-wheezy-armel.img`
*   nginx 1.2.1
*   PHP 5.4.4

为了确保可以上传大文件，我已将其添加`client_max_body_size 20M;`到 nginx 站点配置文件中。

我在 php.ini 文件中增加了以下限制：

```
upload_max_filesize 9G
post_max_size 9G
max_execution_time 200
max_input_time 200
memory_limit 256M 
```

所有站点文件和目录都归用户所有，该用户`www-data`是运行 nginx 的用户，并且已针对 nginx 配置文件进行了检查。

所有文件似乎都可以正常上传，但完成后，每个已上传的文件旁边都会显示“内部服务器错误”消息。

nginx 服务器记录一个为`index.html`请求记录的 http 500 错误。如果上传了 5 个文件，则会记录 5 个此类错误。

请您指导我如何进一步调试此问题？我相信所有的必要条件、权限和权限都已到位，并且不确定我应该在哪里进一步尝试调试。非常感谢。

# linux - linux中的每个Shell命令是否在后端调用系统调用

> ID：14464143
> 
> 赞同：0
> 
> 时间：2013-01-22T17:10:13.743
> 
> 标签：linux, shell, unix, operating-system, system-calls

我被要求找到一个不进行任何系统调用的 shell 命令。我进行了很多搜索，最后在这里询问是否有任何命令在 linux shell 或 unix 中不会在后端调用系统调用。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:15:37.050

### 是和否

***是**的部分*...

有许多 shell 内置函数可以处理 shell 宏处理器编程语言的控制流或定义。

只有少数内置函数本质上需要进行任何系统调用；一般来说，它们只是改变 shell 内存映像中的状态。

***没有**部分*... *_*

实际上，您甚至不能只在 shell 中键入*Enter*而不运行许多系统调用。shell 可能会等待（2）来查看是否有任何子进程终止，它可能会检查时间，它通常会打印一个提示符......当然它会读取下一个命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:23:09.513

想想 shell 是什么，它是如何运行命令的。

shell 是一个解释器。粗略地说，有一个解释器循环

```
do {
   get_next_command();
   switch(next_command){
   cmd_alias: ...
   cmd_break: ...
     ...
   }
} while (true); 
```

现在想想，哪个命令只是更新了shell进程的内部结构，哪个命令需要调用操作系统来执行它的功能。

# java - 无法使用 jQuery 在 phonegap 中检索 JSON 值

> ID：14464145
> 
> 赞同：0
> 
> 时间：2013-01-22T17:10:18.743
> 
> 标签：java, javascript, json, jsonp

我无法使用此脚本在我的浏览器中显示来自 url 的 JSON 数据，但我找不到错误的来源。

url (http://www.entertainmentcocktail.com/cp/index.php) 包含我理解的有效 JSON 数据，但是当我使用此代码时没有返回任何内容：

```
 <script type="text/javascript" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="jquery/jquery.min.js"></script>
        <script type="text/javascript">
                $(document).ready(function(){
                    var output = $('#output');

                    $.ajax({
                        url: 'http://www.entertainmentcocktail.com/cp/index.php',
                        dataType: 'jsonp',
                        jsonp: 'jsoncallback',
                        timeout: 5000,
                        success: function(data, status){
                            $.each(data, function(i,item){
                                var name = '<h1>'+item.location+'</h1>'
                                + '<p>'+item.id+'</br>';

                                output.append(name);
                            });
                        },
                        error: function(){
                            output.text('There was an error loading the data.');
                        }
                    });
                });
                </script> 
```

编辑：带有 JSON 数据的目标页面使用以下代码从数据库生成信息：

```
<?php
header('Content-type: application/json');

$server = "SERVER";
$username = "USER";
$password = "PASS";
$database = "DB";

$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

$sql = "SELECT id, name, location FROM table_name ORDER BY id";
$result = mysql_query($sql) or die ("Query error: " . mysql_error());

$records = array();

while($row = mysql_fetch_assoc($result)) {
    $records[] = $row;
}

mysql_close($con);

echo $_GET['jsoncallback'] . json_encode($records);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:15:23.613

您是否从同一个域 (www.entertainmentcocktail.com) 运行此代码？如果没有，您可能会遇到 XSRF 问题。

你用什么浏览器来测试？在 Chrome 中，您可以右键单击并转到“检查元素”，如果出现 java 脚本错误，则在右下角会有一个红色的小标记。您应该可以在此处找到更多信息。

[http://cl.ly/image/261T3T360M34](http://cl.ly/image/261T3T360M34) - 右下角错误的屏幕截图。

你是如何生成你的 json 字符串的？理想情况下，您应该使用内置的 PHP 函数： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

更新：

根据您的评论，您的问题是脚本的顺序。把它改成这样：

```
<script type="text/javascript" src="cordova-2.3.0.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="jquery/jquery.min.js"></script>
    <script type="text/javascript">
            $(document).ready(function(){
                var output = $('#output');

                $.ajax({
                    url: 'http://www.entertainmentcocktail.com/cp/index.php',
                    dataType: 'jsonp',
                    jsonp: 'jsoncallback',
                    timeout: 5000,
                    success: function(data, status){
                        $.each(data, function(i,item){
                            var name = '<h1>'+item.location+'</h1>'
                            + '<p>'+item.id+'</br>';

                            output.append(name);
                        });
                    },
                    error: function(){
                        output.text('There was an error loading the data.');
                    }
                });
            });
            </script> 
```

# perl - Perl 5.18+ 中受哈希顺序随机化影响的哈希合并方法？

> ID：14464147
> 
> 赞同：8
> 
> 时间：2013-01-22T17:10:25.833
> 
> 标签：perl, hash, merge

根据[这个问题](https://stackoverflow.com/questions/350018/how-can-i-combine-hashes-in-perl)的答案，在 Perl 5 中合并两个哈希可以通过以下方式完成：

```
%newHash = (%hash1, %hash2); %hash1 = %newHash; 
```

或者：

```
@hash1{keys %hash2} = values %hash2; 
```

另一方面，[Perl 5.18 将引入每进程哈希随机化](http://www.perlmonks.org/?node_id=1005122)。

在 Perl 5.18 中使用第二种方法是否仍然正确？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T17:16:45.260

看完[Re^2：哈希顺序随机化来了，你准备好了吗？](http://www.perlmonks.org/?node_id=1006246)，答案是**肯定**的。和以前一样，如果哈希值在两者之间没有更改，则`keys`,`values`和`each`将产生相同的序列迭代*同一进程内的哈希值。*

# tfs - 有谁知道 tfsbuild.exe 的退出代码？

> ID：14464150
> 
> 赞同：5
> 
> 时间：2013-01-22T17:10:30.787
> 
> 标签：tfs, tfsbuild

有谁知道[tfsbuild.exe](http://msdn.microsoft.com/en-us/library/bb558974%28v=vs.100%29.aspx)的退出代码？

我在 MSDN 上查看过，但找不到任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-07T07:37:23.417

MSDN 中没有文档

所以我不得不反编译 TFSBuild.exe（幸好它是 .NET）

所以我发现有退出代码

*   未知 = -1，
*   成功 = 0,
*   部分成功 = 1，
*   无法识别的命令 = 2，
*   未尝试 = 3，
*   SuccessRebootRequired = 4,
*   失败 = 100

这对 TFSBuild.exe 的 11.0.0.0 版本有效，但我认为他们不会经常更改它们

# .net - 在 Release 中部署 PDB 文件

> ID：14464151
> 
> 赞同：25
> 
> 时间：2013-01-22T17:10:32.893
> 
> 标签：.net, deployment, msbuild, continuous-integration

我有我的 CI 服务器设置来构建和部署我的所有环境，包括我的生产环境。据我所知，我的所有项目文件的设置和 CI 设置在我的暂存环境构建和我的生产环境构建之间是相同的。但是当我部署到生产环境时，没有像暂存中那样与 DLL 文件并排放置的 PDB 文件。这是部署每个应用程序的脚本：

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe %location% ^
    /p:Configuration=%configName% ^
    /p:DeployOnBuild=True ^
    /p:DeployTarget=MSDeployPublish ^
    /p:AllowUntrustedCertificate=True ^
    /p:MSDeployPublishMethod=WMSvc ^
    /p:CreatePackageOnPublish=True ^
    /p:MsDeployServiceUrl=https://%serverName%:8172/MsDeploy.axd ^
    /p:DeployIisAppPath=%siteName% ^
    /p:UserName=%username% ^
    /p:Password=%password% 
```

所以看起来当 Configuration=Release 时 PDB 文件被留下了，尽管它们是在构建服务器上生成的。有任何想法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-22T17:31:10.603

如果要在发布中包含 pdb 文件，请转到项目属性和打包/发布 Web 选项卡，取消选中“排除生成的调试符号” ![设置](../Images/fdd68cae34860625b9fa6f82d26356a0.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-10-14T13:13:03.380

如果您想在 deploy(publish) 上包含 pdb 文件，即使对于 Release，也要在项目文件中添加以下属性：

```
<ExcludeGeneratedDebugSymbol>False</ExcludeGeneratedDebugSymbol> 
```

# jquery - 带有 :contains 过滤器的 jQuery find() 不起作用

> ID：14464152
> 
> 赞同：3
> 
> 时间：2013-01-22T17:10:33.960
> 
> 标签：jquery

我有一个 html 列表，我尝试在列表中找到一个文本等于“cat”的 span 元素

```
<div id= "target_language_tag_list">
<ul class="target-tag-list">
    <li><span id="tag_18" class="myTag">éléphant</span></li>
    <li><span id="tag_31" class="myTag">box</span></li>
    <li><span id="tag_29" class="myTag">cat</span></li>
    <li><span id="tag_30" class="myTag">pig</span></li>
    <li><span id="tag_32" class="myTag">flower</span></li>
</ul> 
```

我编写了以下 js.coffee 脚本，但得到了“未定义”的答案

```
translatedTag = $('input#tag_translated_name').val()  # cat
targetList = $('#target-tag-list')
found = targetList.find("span:contains(" + translatedTagName + ")")
alert 'found: ' + found.attr('id')  # should be tag_29 but is undefined 
```

我也尝试直接测试，同样的未定义错误

```
found = $("#tags.tab-pane.active #target-tag-list li span:contains('cat')")
alert 'found: ' + found.attr('id')  # should be tag_29 but is undefined 
```

我想我的 contains 过滤器使用有问题，......但有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:12:37.340

您的 UL 没有 id 而是一个类。

因此没有元素匹配`#target-tag-list`。尝试搜索一个类`.target-tag-list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:24:26.513

试试这个：http: [//jsfiddle.net/fpS4u/](http://jsfiddle.net/fpS4u/)

```
translatedTag = $('input#tag_translated_name').val();
targetList = $('.target-tag-list');
found = targetList.find("span:contains("+translatedTag+")");
alert('found: ' + found.attr('id')); 
```

# java - 如何使用资源包

> ID：14464153
> 
> 赞同：8
> 
> 时间：2013-01-22T17:10:33.947
> 
> 标签：java, swing, netbeans, internationalization, resourcebundle

我正在尝试掌握 java 应用程序的内部化，如此处[所示](http://docs.oracle.com/javase/tutorial/i18n/resbundle/list.html)。不过我不能。我创建了一个`ListResourceBundle`像声明的那样扩展的类，并试图检索密钥。不过，我一直有一个例外。如果您查看教程，它会说使用***.class***文件。这不可能是对的，不是吗？

**[项目树]**

![在此处输入图像描述](../Images/ab2c45962e66a47f79a51f680a7048c5.png)

**[源代码]**

这是我正在使用的两个类，只是 MainWindow_xx_XX.java 文件之一，因为它们基本相同。首先是 ListResourceBundle：

```
public class MainWindow_en_US extends ListResourceBundle {

    @Override
    protected Object[][] getContents() {
        return contents;
    }
    private Object[][] contents = {
        {"fileLabel", "File"},
        {"newSessionLabel", "New session..."},
        {"openSessionLabel", "Open session..."},
        {"saveLabel", "Save"},
        {"exitLabel", "Exit"},
        {"editLabel", "Edit"},
        {"toolsLabel", "Tools"},
        {"helpLabel", "Help"}
    };
} 
```

现在我用来加载它的方法：

```
 private static final int DEFAULT_LOCALE = 0;
    private ResourceBundle bundle;
    public static Locale locale;
    public static final Locale[] supportedLocales = {
        new Locale("en", "US"),
        new Locale("es", "ES")
    };

public MainWindow() {
    for (Locale i : supportedLocales) {
        if (i.getLanguage().equals(Locale.getDefault().getLanguage())) {
            locale = i;
            break;
        } else {
            locale = supportedLocales[DEFAULT_LOCALE];
        }
    }
    bundle = ResourceBundle.getBundle("MainWindow", locale); //EXCEPTION POINTS HERE!!!
    initComponents();
} 
```

我不断收到以下异常。我知道我可以通过属性文件来做到这一点，但它让我无法理解，因为我无法让 Oracle 的极其简单的教程工作。

```
Exception in thread "AWT-EventQueue-0" java.util.MissingResourceException: Can't find bundle for base name MainWindow, locale es_ES
    at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1499)
    at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1322)
    at java.util.ResourceBundle.getBundle(ResourceBundle.java:796)
    at -.-.-.-.-.<init>(MainWindow.java:37)
    at -.-.-.-.MainWindow$2.run(MainWindow.java:145)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T17:39:45.760

您需要使用完全限定的基本名称：

```
bundle = ResourceBundle.getBundle("pkg.subpkg.resources.MainWindow", locale); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T16:20:38.377

你不能命名一个文件`MainWindow_es_ES`。要解决您的问题，请将文件重命名为`MainWindow es`.

```
Locale locale = new Locale("es");
ResourceBundle rb = ResourceBundle.getBundle("yourPackageName.MainWindow", locale);   
System.out.print(rb.getObject("YourKey")); 
```

# ios - MonoTouch 中的 CoreImage 未为有效资产返回有效图像

> ID：14464154
> 
> 赞同：1
> 
> 时间：2013-01-22T17:10:34.337
> 
> 标签：ios, xamarin.ios, uiimage, uikit, core-image

我正在尝试使用它来获取图像。

```
img = new UIImage(new MonoTouch.CoreImage.CIImage(validAssetObject),1.0f, UIImageOrientation.Up); 
```

A`CIImage`从`CIImage`调用中返回。新`UIImage`的具有`CIImage`属性 = `null`。

似乎构造函数`UIImage`没有按预期工作？

MonoTouch 社区有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:21:30.713

我写了一个快速测试，这似乎工作正常。

```
string file = Path.Combine (NSBundle.MainBundle.ResourcePath, "image.png");
using (var url = NSUrl.FromFilename (file))
using (var ci = CIImage.FromUrl (url))
using (var ui = new UIImage (ci, 1.0f, UIImageOrientation.Up)) {
    Assert.IsNotNull (ui.CIImage, "CIImage");
} 
```

其他东西肯定不同，但您没有共享足够的源代码来比较。你能用你的图像创建一个小测试用例并提交[错误报告](http://bugzilla.xamarin.com)吗？

# c# - 尝试使用 Visual Studio 2010 在 C# 中创建自动版本控制系统

> ID：14464156
> 
> 赞同：1
> 
> 时间：2013-01-22T17:10:35.363
> 
> 标签：c#, visual-studio, version-control

所以我有大量的类，当一个类更新时，我需要对任何现有的保存数据运行更新方法。目前我使用类似的东西：

```
public const decimal LatestVersion = 0.0121201313m;
private decimal LastVersion;

//...

if (Abilities.LastVersion != Abilities.LatestVersion)
{
    //... 
```

每次更新课程时，我都会手动更新最新版本号......我还必须在每个可能需要更新的课程中重复此方法。它运作良好，但我必须记住更新版本号。

如果类被更改或类似的东西，我认为最好让 LatestVersion 自动更新到当前版本`DateTime`（可能通过调试命令）......但我认为这是不可能的。

有没有人对我如何在类级别设置自动实现版本控制系统有任何其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:22:10.383

您可以在类文件中使用某种非空白内容的哈希值作为版本。每个类需要 2 个文件 - 一个源，一个在构建时生成，但会保证任何更改都会更改版本。可能需要在哈希中添加日期以防万一。

```
 // source file MyClass.cs
 partial class MyClass {} 
```

* * *

```
 // MyClass.Hash.cs
 // generate during build via custom tool 
 partial class MyClass 
 {
    // hash of MyClass.cs + date
    public static string LatestVersion = "W#$@WW-2012-01-22"; 
 } 
```

旁注：

*   自动系统可能比手动更改版本更糟糕，测试验证更改是否兼容。
*   您可以考虑以对更改更宽容的格式保存数据。即使用 JSON/XML，您可以在不破坏以前版本的情况下添加字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:43:27.873

一些版本控制系统可以使用关键字扩展机制。您可以使用它在签入或签出期间将更改/序列号/修订号（或任何名称）放入文件中。

TFS 示例：[关键字替换/扩展签入策略](http://logsubstpol.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:59:56.733

在我的脑海中，要么创建一个构建时的转换**T4**，它将 .cs/type 名称的类/字典构建为哈希/时间戳，或者将该属性标记并挂钩到 MSBuild 的**BeforeBuild**事件以在编译之前将其替换为类似哈希/上次修改。

编辑：好的，这里有几个**非常**粗略的例子。

**T4** -- 在您的项目 (.tt) 中创建一个文本模板并粘贴以下内容

```
<#@ template hostspecific="true" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
namespace ClassLibrary1
{
    public class Version
    {
        <#  var project = new FileInfo(Host.ResolvePath("ClassLibrary1.csproj"));
            WriteLine("// " + project.FullName);

            var files = project.Directory.GetFileSystemInfos("*.cs", SearchOption.AllDirectories);
            foreach (var file in files)
            {
                var name = Path.GetFileNameWithoutExtension(file.Name);
                if (name == "Version")
                    continue; #>
               public const long <#= name #> = <#= file.LastWriteTime.Ticks #>;
        <#  } #>
    }
} 
```

您现在将拥有一个可以通过 Version.ClassName 常量在比较中使用的类。

**MSBuild** - 编辑您的 .csproj 并在末尾添加以下内容。

```
<UsingTask TaskName="Version" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
  <ParameterGroup>
    <Files ParameterType="Microsoft.Build.Framework.ITaskItem[]" Required="true" />
  </ParameterGroup>
  <Task>
    <Using Namespace="System.IO" />
    <Using Namespace="System.Text.RegularExpressions" />
    <Code Type="Fragment" Language="cs"><![CDATA[
          var regex = new Regex(@"Version = (\d+);//(-?\d+)");
          foreach (var file in Files)
          {
              var source = File.ReadAllText(file.ItemSpec);
              var match = regex.Match(source);
              if (!match.Success) continue;
              var hash = regex.Replace(source, string.Empty).GetHashCode();
              if (int.Parse(match.Groups[2].Value) == hash) continue;
              source = regex.Replace(source, string.Format("Version = {0};//{1}", int.Parse(match.Groups[1].Value) + 1, hash));
              File.WriteAllText(file.ItemSpec, source);
          }
      ]]></Code>
  </Task>
</UsingTask>
<Target Name="BeforeBuild">
  <Version Files="@(Compile)" />
</Target> 
```

然后添加`public const int Version = 0;//0`到您的班级。在编译之前，MSBuild 将获取文件的哈希值，如果前一个不匹配，则更新计数器。

在这些示例中有一个可以做得更好的 crapton，但希望它们能说明您可以采取的方向。可能有更好的方法，这是在使用 Mono.Cecil 对 IL 进行哈希处理后突然出现在我脑海中的前两个想法，我发现这个问题很有趣。如果您确实走任何一条路线，我建议您阅读 T4 及其`Host`以及如何在构建时强制重新生成，或 MSBuild 和扩展事件、自定义和内联任务，甚至可能进入`EnvDTE`, `CodeDOM`,`Microsoft.Build.Evaluation`命名空间等，而不仅仅是搜索 .cs 文件和正则表达式。

# mysql - mysql正则表达式搜索不起作用

> ID：14464158
> 
> 赞同：1
> 
> 时间：2013-01-22T17:10:37.613
> 
> 标签：mysql, regex

我正在尝试执行此操作，但它引发了错误。有人可以帮忙吗？

```
 SELECT * FROM `country` WHERE name regex '^ab$'; 
```

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'regex '^ab$' LIMIT 0, 30' 附近使用正确的语法

*   我的座右铭是在用户搜索任何短语时获得“**美国”记录**

    美利坚合众国/美利坚合众国/美利坚合众国/美利坚合众国/美利坚合众国

谁能告诉我如何为这个要求写一个正则表达式。

```
 SELECT * FROM `country` WHERE name regex '^united states$'; 
```

但是`Like`可以正常工作

```
SELECT * FROM `country` WHERE name like '%ab%'; 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:21:10.010

尝试使用`REGEXP`而不是`REGEX`...`;)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:34:55.793

除了 sp00m 指出的内容之外，相当确定您的正则表达式不是您正在寻找的。 `^`并`$`分别匹配行的开头和结尾，因此使用这些正则表达式：

```
^ab$
^united states$ 
```

正在有效地寻找“ab”和“美国”的完全匹配。如果您正在寻找等效于 的查询`like '%ab%'`，请删除行首和行尾字符，您的正则表达式就是：

```
ab 
```

我确实想知道使用`LIKE '%ab%'`虽然有什么问题。似乎是更典型的方法。

但是，这两个选项都不会使正则表达式`united states`或`^united states$`或使用类似的匹配“美国联合”

# php - 在 Smarty 中使用 Xpath 解析 RSS 提要

> ID：14464165
> 
> 赞同：0
> 
> 时间：2013-01-22T17:11:02.107
> 
> 标签：php, parsing, xpath, smarty

我有一个 PHP 脚本，它可以很好地解析 rss 提要并构建一个网页，其中包含我需要的信息格式。简化的 PHP 脚本如下所示：

```
<?php
    $xml = simplexml_load_file('http://myrrs.com');

    echo '<ul>';

    foreach($xml->xpath('//item') as $item) { 
        printf('<li><a href="%s"><img src="%s" title="%s/></a></li>', 

        $item->myurlpath, $item->myimagepath, str_replace('.', ' ',$item->title) ); 
    }
    echo '</ul>';
?> 
```

但现在我正在尝试在 Smarty 模板中生成相同的脚本功能。Smarty 不推荐使用 {php}{/php}，而且我试过了，但没有成功。

我知道你可以加载 xml（我的 PHP 脚本中的第一行是这样的：

```
 {$xml=simplexml_load_file('http://myrss.com')} 
```

但我不知道如何复制 foreach(Xpath) 的 Smarty 语法中的功能，以及传递提取值的 printf 部分。

我在 Smarty 中看到了示例 foreach 语句，但没有看到 Xpath 功能。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:11:26.980

我设法找出正确的方法：

```
{$rss=simplexml_load_file('http://myrss.com')}
{foreach $rss->channel->item as $a}

  <li><a href="{$a->myurlpath}"><img src="{$a->myimagepath}" title="{$a->title}"/></a></li>

{/foreach} 
```

我希望这可以帮助某人....

谢谢你。

# java - JSP和Servlet生命周期方法

> ID：14464166
> 
> 赞同：3
> 
> 时间：2013-01-22T17:11:07.603
> 
> 标签：java, jsp, servlets

如果 JSP 变成了一个 Servlet，为什么会有不同的生命周期方法，`jspInit()`例如`init()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:26:38.063

之所以有`jspInit`与 servlet`init`方法不同的原因是，一个是为实现 JSP 的 servlet（由实现 servlet 容器的开发人员创建），另一个是为 JSP 代码（由应用程序开发人员使用）。如果 JSP 使用 init 方法，它可以覆盖 servlet 实现所做的任何事情。使用单独的方法，JSP 实现者可以从中获取代码`jspInit`并将其添加到`init`生成的 servlet 的方法中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:00:08.910

我将尝试以最简单的方式正确解释它（作为正确的@Nathan Hughes 答案的补充）：

从 HTML vs JAVA 代码的角度来看，servlet 更像是用 JAVA 包裹的 HTML。它为处理多层架构中的应用层提供了强有力的支持。另一方面，创建 JSP 是为了支持创建表示层。servlet的方法仅在**servlet 初始化**`init()`期间调用一次。

 **所以第一点：Servlet 在 JSP 之前就已经出现了。

现在到 JSP。再次从 HTML 和 JAVA 的角度来看，JSP 更像是用 HTML 包裹的 JAVA。

*WEB CONTAINER*将 JSP“源代码”转换为等效的 Servlet java 代码。然后编译这个翻译的 java Servlet 源代码，*WEB CONTAINER*处理 Servlet 的实现。简单地：

**MyPage.jsp --> (translate) --> MyPage_jsp.java --> (compile) --> MyPage_jsp.class --> (load) --> Java Servlet**

该`jspInit()`方法由 WEB CONTAINER 调用，作为**JSP 生命周期初始化阶段的一部分。**

所以对你的问题：`jspInit()` **不等于** `init()`。**

# android - 如何在KeyDown上添加警报对话框？

> ID：14464168
> 
> 赞同：1
> 
> 时间：2013-01-22T17:11:22.953
> 
> 标签：android

我的应用程序上有此代码

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

        Intent a = new Intent(this,a_stages.class);
        a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(a);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

现在我想添加一个警告对话框，询问用户他/她是否想去，例如在另一个页面上，如果用户点击是，它将意图进入特定页面，如果用户点击取消，对话框。取消（）;。

**编辑** 我尝试了这段代码，但在“Intent a = new Intent(this,a_stages.class);”行出现错误 上面写着“构造函数 Intent(new DialogInterface.OnClickListener(){}, Class) 未定义”

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

        AlertDialog.Builder alertDialog = new AlertDialog.Builder(bq1.this);

        // Setting Dialog Title
        alertDialog.setTitle("Go back to home");

        // Setting Dialog Message
        alertDialog.setMessage("Are you sure you want to go back to home?");

        // Setting Positive "Yes" Button
        alertDialog.setPositiveButton("YES", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {

                 Intent a = new Intent(this,a_stages.class);
                a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(a);
            }
        });

        // Setting Negative "NO" Button
        alertDialog.setNegativeButton("NO", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            // Write your code here to invoke NO event

            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();

    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:31:47.850

很近！您需要`return false`在按下返回键时使用，`return super.onKeyDown()`否则。像这样：

```
if (keyCode == KeyEvent.KEYCODE_BACK) {
    // Dialog code
    return false;
}
return super.onKeyDown(keyCode, event); 
```

`onBackPressed()`（如果您只对听后退键感兴趣，也可以改写。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:35:46.727

在`Intent a = new Intent(this,a_stages.class);`中，`this`是指您的匿名点击监听器。您需要显式引用包含类，例如

```
Intent a = new Intent(MyActivity.this,a_stages.class); 
```

`MyActivity`此代码所在的活动名称在哪里。

# android-listview - android创建包含两个项目的列表视图，复选框和多项选择，来自数据库的数据

> ID：14464171
> 
> 赞同：0
> 
> 时间：2013-01-22T17:11:36.020
> 
> 标签：android-listview

对不起我的英语，这是我第一次在这个网站上写，但我还是很长。我有一个数据库，我想将数据绑定到一个具有复选框和多项选择的列表视图，这让我头疼的是制作自定义的简单光标适配器（因为是两列（项目）），没有什么是预先确定的。

我可以推荐一个完成此操作的帖子或教程。

感谢您的合作

例子

5/ a/ x

1/ b/ -

3/ c/ x

2/ 天/ -

8/ e/ x

0.5/ f/ -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:30:18.500

很好，我得到了我想要的东西，我把代码放在上面以防有人感兴趣。

现在我有两个要解决的错误是： - 在列表视图中滚动时不要删除选定的复选框。- 不重复任何值，例如（选择 1,2,3 并显示 1,12,123

感谢您的关注

代码：

最终对话框 dialogo_medicamentos = new Dialog(this); dialogo_medicamentos.setContentView(R.layout.dialogo_medicamentos);

```
 dialogo_medicamentos.setTitle(R.string.tv_medicamentos);  
              dialogo_medicamentos.setCancelable(false);  
             final ListView lv_medicamentos = (ListView) dialogo_medicamentos.findViewById(R.id.lv_medicamentos);
             BDHelper medicamentos = new BDHelper (this);
                try {
                    medicamentos.createDataBase();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                medicamentos.abrir();
                c_me = medicamentos.lista_medicamentos();
                String[] from_me = new String [] {"_id","dosis","medicamentos"};
                int [] to_me = new int [] {R.id.trc_tv_id, R.id.trc_tv_dosis, R.id.trc_tv_medicamentos};
                SimpleCursorAdapter adapter_medicamentos = new SimpleCursorAdapter (this, R.layout.trc_medicamentos, c_me, from_me, to_me){

                class ViewHolder {
                       TextView vh_trc_tv_dosis;
                       TextView vh_trc_tv_medicamentos;
                       CheckBox vh_trc_cb_medicamentos;
                       }
                @Override
                    public View getView(final int position, View convertView, ViewGroup parent) {
                    final ViewHolder holder;
                    if (convertView == null) {
                        LayoutInflater Inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        convertView = Inflater.inflate(R.layout.trc_medicamentos, null);

                        holder = new ViewHolder();
                        holder.vh_trc_tv_dosis = (TextView) convertView.findViewById(R.id.trc_tv_dosis);
                        holder.vh_trc_tv_medicamentos = (TextView) convertView.findViewById(R.id.trc_tv_medicamentos);
                        holder.vh_trc_cb_medicamentos =(CheckBox) convertView.findViewById(R.id.trc_cb_medicamentos);
                        convertView.setTag(holder);

                } else {
                        holder = (ViewHolder) convertView.getTag();
                    }
                    c_me.moveToPosition(position);
                    i_dos = c_me.getColumnIndex(BDHelper.ID_DOSIS);
                    i_med = c_me.getColumnIndex(BDHelper.ID_MEDICAMENTOS);

                    String ss_dos = c_me.getString(i_dos);   
                    String ss_med = c_me.getString(i_med);
                    holder.vh_trc_tv_dosis.setText(ss_dos);
                    holder.vh_trc_tv_medicamentos.setText(ss_med);

                    holder.vh_trc_cb_medicamentos.setChecked(false);

                    holder.vh_trc_cb_medicamentos.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                        public void onCheckedChanged(CompoundButton checkBox, boolean isChecked) {
                            ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();
                            for (int i = 0; i < getCount(); i++) {
                                itemChecked.add(i, false);
                            }

                            if (holder.vh_trc_cb_medicamentos.isChecked()) {
                                itemChecked.set(position, true);
                                c_me.moveToPosition(position);
                                i_dos = c_me.getColumnIndex(BDHelper.ID_DOSIS);
                                i_med = c_me.getColumnIndex(BDHelper.ID_MEDICAMENTOS);
                                s_dos_checked += c_me.getString(i_dos) + ("\n");
                                s_med_checked += c_me.getString(i_med) + ("\n");
                                checked_medicamentos += s_dos_checked + ("\n");

                            } else if (!holder.vh_trc_cb_medicamentos.isChecked()) {
                                itemChecked.set(position, false);

                            }

                            Log.d(LOGCAT,"FUNCIONA");
                            Log.d(LOGCAT,s_dos_checked);
                            Log.d(LOGCAT,s_med_checked);
                        }
                    });
                    return convertView;
                    }

                    };
                if(adapter_medicamentos.getCount()!=0){
                      lv_medicamentos.setAdapter(adapter_medicamentos); 

                }else{
                    Toast.makeText(this, this.getString(R.string.t_listado_med_vacio),Toast.LENGTH_SHORT).show();
                }
                  lv_medicamentos.setItemsCanFocus(false);
                  lv_medicamentos.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
                  medicamentos.close();

                                  Button bt_aceptar_me = (Button) dialogo_medicamentos.findViewById(R.id.bt_aceptar_me);
              bt_aceptar_me.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        dialogo_medicamentos.dismiss();
                        Log.d(LOGTAG,checked_medicamentos);
                        et_medicamentos_reg.setText (checked_medicamentos);     

                    }
                    });
                Button bt_cancelar_me = (Button) dialogo_medicamentos.findViewById(R.id.bt_cancelar_me);
                bt_cancelar_me.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                dialogo_medicamentos.dismiss();
                    }
                    });
                dialogo_medicamentos.show();
                et_medicamentos_reg.clearFocus(); 
```

# html - HTML5 视频无法在平板电脑上播放

> ID：14464173
> 
> 赞同：1
> 
> 时间：2013-01-22T17:11:49.190
> 
> 标签：html

下午好，我早些时候发布了一些内容，但仍然需要帮助。我有一个 Nexus 7 和一个 iPad2。我有一个编码为 H.264 的 mp4 文件。我使用以下标签：

```
<!DOCTYPE html>
<html>
<body>
    <video controls="controls">
        <source src="Test.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html> 
```

当我在 iPad2 上访问网页时，它会显示一个播放按钮，上面有一条线。当我在我的 nexus 7 上访问网页时，我得到了播放控件，但是当我点击播放时，出现了暂停按钮，但没有播放。这只是一个黑屏。我在 PC 或 Mac 上打开同一个网站，视频就在那里，可以正常播放，没有问题。作为我设备上的测试，我去了 W3Schools 上的示例视频标签并加载示例。该示例在我的 iPad2 和 nexus 7 上运行良好。

我完全不知所措，因为我的视频无法在平板电脑上播放，但在 PC 和 Mac 上运行良好。如果有人知道请帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:27:06.407

问题似乎是防火墙设置设置为我网络上的某个文件夹。一旦我将代码放在该文件夹之外，一切正常。

# c# - 根据一列获取不同的行并按日期排序

> ID：14464176
> 
> 赞同：1
> 
> 时间：2013-01-22T17:11:52.760
> 
> 标签：c#, sql, sql-server, entity-framework

我有以下可以在数据库级别或 Linq to EF 级别解决的场景：这是我在数据库中的视图：

```
id  title   date           weight
==================================
1   t1     2013-01-18       1.5
1   t1     2013-01-17       1.4
1   t1     2013-01-15       1.31
1   t1     2013-01-12       1.22
2   t2     2013-01-19       2.3
2   t2     2013-01-16       2.1
2   t2     2013-01-07       1.81
2   t2     2013-01-19       1.62 
```

因此，我需要的是每个项目（t1 和 t2）中的一条记录，这是按日期计算的最新记录。

所以输出将是这样的：

```
id  title   date           weight
==================================
1   t1     2013-01-18       1.5
2   t2     2013-01-19       2.3 
```

正如我在上面所说的，在数据​​库级别或使用 (Distinct) 的 linq 级别的答案都受到欢迎。

我的 c# linq 的一部分：

```
mylist = (from a in db.myview
join art in db.viewTags on a.id equals art.ArticleID
where (art.TagID == tag.ID)
select a).Distinct().Take(10).ToList(); 
```

根据 a.id（视图的 id 字段），我需要来自 myview 的不同记录

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:30:42.320

即使同一日期有 2 个重量，以下内容也会为您提供一行：

```
declare @t table (
    id int,
    title varchar(50),
    date datetime,
    weight decimal(19,4)
)

insert into @t (id, title, date, weight) values
   (1, 't1', '20130118', 1.5),
   (1, 't1', '20130118', 1.6),
   (2, 't2', '20130116', 1.4),
   (2, 't2', '20130115', 1.2)

select
    *
from
    (
        select ROW_NUMBER() over (partition by id order by date desc) rn, * 
        from @t
    ) v
where rn = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:15:04.380

**编辑**- 根据您希望通过 id 区分的更新

全文：[**Linq 中的 DistinctBy（按属性查找不同的对象）**](http://pranayamr.blogspot.in/2013/01/distinctby-in-linq.html)

以下是[MoreLINQ](http://morelinq.googlecode.com)库的一部分。

使用`DistinctBy`功能

```
public static IEnumerable<TSource> DistinctBy<TSource, TKey>
    (this IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
{
    HashSet<TKey> seenKeys = new HashSet<TKey>();
    foreach (TSource element in source)
    {
        if (seenKeys.Add(keySelector(element)))
        {
            yield return element;
        }
    }
} 
```

因此，要仅使用该属性来查找不同的值`Id`，您可以使用：

```
mylist = (from a in db.myview
 join art in db.viewTags on a.id equals art.ArticleID
 where (art.TagID == tag.ID)
 select a).DistinctBy(a=>a.Id).Take(10).ToList(); 
```

* * *

```
select * from table 
inner join
(select max(date) as date,id from table group by id) d 
on d.id = table.id and d.date= table.date 
```

# controls - 媒体播放器 - 缺少播放/暂停、音量、展开控件

> ID：14464177
> 
> 赞同：0
> 
> 时间：2013-01-22T17:11:54.787
> 
> 标签：controls, media-player, mediaelement.js

我最近将`Yootheme WidgetKit Media Player`使用 MediaElement.js 的 .js 下载并安装到我的 Joomla Yootheme 主主题中。不幸的是，我遇到了一个小问题。当我进入 Widgetkit 并单击`"enable javascript"`控件（播放/暂停、音量、扩展至全屏）时消失。如果我点击`"disable javascript"`控件出现，但播放器不再适合平板电脑和移动设备（即使我设置了`width="100%"`或`class="size-auto"`）。

小部件套件旨在支持 JavaScript 工作。现在，我已确保为 svg 图像设置了 mime 类型，并且检查了所有系统要求。我已经验证 JavaScript 可以在我的网站上运行。我也搜索并没有发现任何 jQuery 错误（没有多个 jQuery 请求）。

在这一点上，我完全感到困惑。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:31:52.393

在您的 .htaccess 文件中添加以下两行。对我有用

AddType image/svg+xml svg svgz

AddEncoding gzip svgz

# sql - Where 子句不适用于 DATES

> ID：14464178
> 
> 赞同：0
> 
> 时间：2013-01-22T17:11:56.270
> 
> 标签：sql, oracle10g

> **可能重复：**
> [在 Oracle SQL 中比较日期](https://stackoverflow.com/questions/10178292/comparing-dates-in-oracle-sql)

当我处理 DATE 数据类型时，where 子句没有区别。以下代码显示所有 107 行。它应该显示大约 5 行。也没有语法错误。Where 子句适用于数字、字符等。

```
 select last_name,hire_date
    from employees
    where hire_date < '01-JAN-90' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:15:44.740

尝试[适当的日期文字](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm)：

```
select last_name,hire_date
from employees
where hire_date < DATE '1990-01-01' 
```

这是一个正在运行的示例：[http ://sqlfiddle.com/#!4/782c0/1](http://sqlfiddle.com/#!4/782c0/1)

```
CREATE TABLE Employees (
  last_name VARCHAR(50),
  hire_date DATE
);

INSERT INTO Employees VALUES ('A', DATE '1985-01-01');
INSERT INTO Employees VALUES ('B', DATE '1986-01-01');
INSERT INTO Employees VALUES ('C', DATE '1987-01-01');
INSERT INTO Employees VALUES ('D', DATE '1988-01-01');
INSERT INTO Employees VALUES ('E', DATE '1989-01-01');
INSERT INTO Employees VALUES ('F', DATE '1990-01-01');
INSERT INTO Employees VALUES ('G', DATE '1991-01-01');
INSERT INTO Employees VALUES ('H', DATE '1992-01-01');
INSERT INTO Employees VALUES ('I', DATE '1993-01-01');
INSERT INTO Employees VALUES ('J', DATE '1994-01-01');
INSERT INTO Employees VALUES ('K', DATE '1995-01-01');
INSERT INTO Employees VALUES ('L', DATE '1996-01-01');
INSERT INTO Employees VALUES ('M', DATE '1997-01-01');
INSERT INTO Employees VALUES ('N', DATE '1998-01-01');

select last_name,hire_date
from employees
where hire_date < DATE '1990-01-01' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:16:12.770

永远不要依赖隐式转换。利用：

```
where hire_date < to_date('01-JAN-1990', 'DD-MON-YYYY') 
```

# php - MySQL - NOT IN 产生不需要的结果

> ID：14464182
> 
> 赞同：3
> 
> 时间：2013-01-22T17:12:18.910
> 
> 标签：php, mysql, join, not-exists, notin

我有以下表格：

```
user
+-----------------------------------------------+
|  user_id    |  username   | Password | ...    |
+-----------------------------------------------+
|     1       |     a       |  ***     | ...    |
+-----------------------------------------------+
|     2       |     b       |  ***     | ...    |
+-----------------------------------------------+
|     3       |     c       |  ***     | ...    |
+-----------------------------------------------+
|     4       |     d       |  ***     | ...    |
+-----------------------------------------------+
|     5       |     e       |  ***     | ...    |
+-----------------------------------------------+

friends
+-----------------------------------------------+
|  f_id    |  user_id   | friend_id | ...       |
+-----------------------------------------------+
|     1    |     4      |  2        | ...       |
+-----------------------------------------------+
|     2    |     4      |  1        | ...       |
+-----------------------------------------------+
|     3    |     4      |  5        | ...       |
+-----------------------------------------------+
|     4    |     4      |  3        | ...       |
+-----------------------------------------------+ 
```

我想获取所有可添加为朋友的用户（在这种情况下，`user_id`将`1`有 3 个朋友要添加`(2, 3, 5)`。但是，通过使用以下内容，`SQL statement below`我只能`(4)`添加 1 个用户：

```
$sql = "SELECT * FROM user WHERE user.user_id NOT IN 
(SELECT friends.friend_id FROM friends) AND 
user.user_id <> $_SESSION['id']." ORDER BY RAND() LIMIT 5"; 
```

但是当我以用户 4 身份登录时，这很有效，没有可添加的用户。这对我来说有点棘手。任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:29:41.113

这个怎么样？显示`null`用户`4`不应该将用户添加`4`为朋友的位置。事实上，您可以通过 . 过滤掉它`And FID is not null`。如果您想根据`select to be added friends`您的特定用户，`session id`那么您也可以在另一种情况下指定它:)

更新添加另一个加入以确保名称显示给朋友，而不是他们的用户。以及不再`4`存在。

*   ## [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/12de1/19)

询问：

```
select x.id, a.name, x.fid
from users a
join (
select u.id, u.name, f.fid
from users u
left join friends f
on u.id <> f.fid
and u.id <> f.uid) x
on x.fid = a.id
; 
```

结果：

```
| ID | NAME | FID |
-------------------
|  1 |    b |   2 |
|  1 |    e |   5 |
|  1 |    c |   3 |
|  2 |    a |   1 |
|  2 |    e |   5 |
|  2 |    c |   3 |
|  3 |    b |   2 |
|  3 |    a |   1 |
|  3 |    e |   5 |
|  5 |    b |   2 |
|  5 |    a |   1 |
|  5 |    c |   3 | 
```

对于特定用户，例如`1`

[SQLFIDDLE 演示用户 1](http://sqlfiddle.com/#!2/12de1/14)

```
select x.id, x.fid, a.name
from users a
join 
(select u.id, f.fid
from users u
inner join friends f
on u.id <> f.fid
and u.id <> f.uid
and u.id = 1)x
on x.fid = a.id
;

| ID | FID | NAME |
-------------------
|  1 |   2 |    b |
|  1 |   3 |    c |
|  1 |   5 |    e | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:05:29.903

编辑：

这个怎么样：（在 else 子句中使用无效的 id 或与登录用户相同的 id）

```
select * from users where id not in
(
   select (
            case
              when uid = 1 then id
              when fid = 1 then uid
             else 0
            end
          ) from friends where uid = 1 or fid = 1
) and id != 1 order by rand() limit 5; 
```

[http://sqlfiddle.com/#!2/12de1/62](http://sqlfiddle.com/#!2/12de1/62)

* * *

解决此问题的另一种方法（但可能不是最佳解决方案）：

如果用户拥有的朋友数少于系统中的用户总数，则与两个表之间的完全联接相比，下面的联合查询可能不是一个昂贵的查询。

也不要忘记在表的列上`uid`添加`fid`索引`friends`。

```
select * from users where id not in 
(
     select id from friends where uid = 1
     union
     select uid from friends where fid = 1
) and id != 1 order by rand() limit 5; 
```

[http://sqlfiddle.com/#!2/12de1/40](http://sqlfiddle.com/#!2/12de1/40)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:38:33.377

`NOT IN`您可以尝试`JOIN`使用表，而不是使用子查询`friends`。

我`JOIN`编辑了两次。一次在哪里`1`，`user_id`一次在`1`哪里`friend_id`。然后我得到了所有不是朋友的`1`用户`1`。

```
SELECT user.user_id,user.username

FROM user

LEFT JOIN friends AS fA ON fA.user_id = 1
LEFT JOIN friends AS fB ON fB.friend_id = 1

WHERE user.user_id != 1
AND NOT (user.user_id <=> fB.user_id)
AND NOT (user.user_id <=> fA.friend_id) 
```

演示：[http ://sqlfiddle.com/#!2/1a7ae/30](http://sqlfiddle.com/#!2/1a7ae/30)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T17:26:30.863

您的 SQL 查询正在做的是：获取 id 不等于 ANY friend_id 的所有用户，而不是当前用户（我假设）。

您想要的是检查朋友表中的朋友 ID 和用户 ID 对是否不存在记录，例如：$sql =

```
"SELECT * FROM user WHERE user.user_id NOT IN 
(SELECT friends.friend_id FROM friends WHERE friend.user_id = user.user_id) AND 
user.user_id <> $_SESSION['id']." ORDER BY RAND() LIMIT 5"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:25:36.927

您在子查询中缺少 where 子句，以将其限制为您排除的当前用户朋友。

```
$sql = "select * from user u 
    where u.user_id not in 
    (select f.friend_id from friends f where f.user_id = ".$_SESSION['id'].")
    and u.user_id <> ".$_SESSION['id']." ORDER BY RAND() LIMIT 5"; 
```

我还想建议不要使用字符串连接来执行此操作。PDO 会更安全，不会有 SQL 注入的风险。

[http://php.net/manual/en/ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T18:04:04.380

```
SELECT u1.id u1_id
     , u2.id u2_id
  FROM users u1
  JOIN users u2
    ON u2.id <> u1.id
  LEFT
  JOIN friends f
    ON (f.fid = u1.id AND f.uid = u2.id)
    OR (f.fid = u2.id AND f.uid = u1.id)
 WHERE f.id IS NULL; 
```

# ruby-on-rails - heroku rails 出错，找不到数据库客户端 psql。检查您的 $PATH 并重试

> ID：14464183
> 
> 赞同：3
> 
> 时间：2013-01-22T17:12:21.357
> 
> 标签：ruby-on-rails, ruby, heroku

试图做一个需要我做的数据库操作`rails db`

我在做`heroku run rails db`，但我得到

`Running`导轨数据库`attached to terminal... up, run.7334 Couldn't find database client: psql. Check your $PATH and try again.`

我已经做好了：

```
gem update heroku 
```

但这没有帮助。仍然得到同样的错误。

还：

```
$ heroku run bundle exec rails db --account work --app dmplanning
Running `bundle exec rails db` attached to terminal... up, run.1572
Couldn't find database client: psql. Check your $PATH and try again. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:05:24.100

这些工作：

```
heroku pg:psql --app # From the app's root directory
heroku pg:psql --app your_app_name # specifying the app
heroku pg:psql --app your_app_name --account work 
                   # if you have multiple accounts, specify which one. 
```

# android - Android HashMap 到 ListView

> ID：14464187
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:12:29.673
> 
> 标签：android, listview, hashmap

我正在尝试像这样列出哈希映射的所有值：

项目 1 值 1 项目 2 值 2 。. .

为此，我将哈希图传递给另一个活动，并在另一个活动上；我做一些这样的事情：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.orneksayisi);
        listV=(ListView)findViewById(R.id.listView1);
        ourMap=(HashMap<String, Integer>) getIntent().getSerializableExtra("ornekMap");
        String[] from = { "aktivite", "sayi" };
        int[] to = { android.R.id.text1, android.R.id.text2 };

        ArrayList<Map<String, String>> list = buildData();
        SimpleAdapter adapter = new SimpleAdapter(this, list,
                android.R.layout.simple_list_item_1, from, to);
            listV.setAdapter(adapter);
    }

   public ArrayList<Map<String,String>> buildData(){
       ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();

       list.add(putData("durus",ourMap.get("durus").toString()));
       list.add(putData("kosma",ourMap.get("kosma").toString()));
       list.add(putData("yurume",ourMap.get("yurume").toString()));
       list.add(putData("dusme",ourMap.get("dusme").toString()));
       list.add(putData("inme",ourMap.get("inme").toString()));
       list.add(putData("cikma",ourMap.get("cikma").toString()));

       return list;
   }

   private HashMap<String, String> putData(String name, String value) {

        HashMap<String, String> item = new HashMap<String, String>();
        item.put("aktivite", name);
        item.put("sayi", value);
        return item;
      } 
```

当我尝试这个时，它只显示“键”值而不显示相反的值（一列）。我怎样才能连续显示两个值（键，值）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:19:50.793

> 如何连续显示两个值（键，值）？

您需要使用显示多个条目的布局，请尝试使用`android.R.layout.simple_list_item_2`.

```
SimpleAdapter adapter = new SimpleAdapter(this, list,
        android.R.layout.simple_list_item_2, from, to); 
```

（或编写自己的布局。）

# ruby - 如何使用 rvm 设置默认 ruby 版本

> ID：14464191
> 
> 赞同：4
> 
> 时间：2013-01-22T16:40:07.633
> 
> 标签：ruby, macos

我已经设置了我的默认 ruby​​ 版本

```
rvm use 1.9.3 --default 
```

打开一个新终端时，我可以看到 rvm 记住了我的默认值，但是使用的是旧版本的 ruby​​：

```
Last login: Tue Jan 22 17:36:20 on ttys000
➜  ~  rvm list default

Default Ruby (for new shells)

   ruby-1.9.3-p374 [ x86_64 ]

➜  ~  ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]

➜  ~  rvm info

ruby-1.9.3-p374:

  system:
    uname:       "Darwin murzemac.local 12.2.0 Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64"
    system:      "osx/10.8/x86_64"
    bash:        "/bin/bash => GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)"
    zsh:         "/bin/zsh => zsh 4.3.11 (i386-apple-darwin12.0)"

  rvm:
    version:      "rvm 1.17.10 () by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "14 hours 46 minutes 38 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.8.7"
    date:         "2012-02-08"
    platform:     "universal-darwin12.0"
    patchlevel:   "2012-02-08 patchlevel 358"
    full_version: "ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]"

  homes:
    gem:          "/Users/murze/.rvm/gems/ruby-1.9.3-p374"
    ruby:         "/Users/murze/.rvm/rubies/ruby-1.9.3-p374"

  binaries:
    ruby:         "/usr/bin/ruby"
    irb:          "/usr/bin/irb"
    gem:          "/usr/bin/gem"
    rake:         "/usr/bin/rake"

  environment:
    PATH:         "/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/murze/.rvm/bin"
    GEM_HOME:     "/Users/murze/.rvm/gems/ruby-1.9.3-p374"
    GEM_PATH:     "/Users/murze/.rvm/gems/ruby-1.9.3-p374:/Users/murze/.rvm/gems/ruby-1.9.3-p374@global"
    MY_RUBY_HOME: "/Users/murze/.rvm/rubies/ruby-1.9.3-p374"
    IRBRC:        "/Users/murze/.rvm/rubies/ruby-1.9.3-p374/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

打开一个新的终端窗口时如何自动激活1.9.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:27:21.200

我的默认设置也不总是正确设置，因此我将 .rvmrc 放在了我的终端打开的目录中（或在我的终端可能打开的目录中）和`rvm use default`里面。

# java - 在画布上绘图，平滑缩放并绘制更多内容

> ID：14464196
> 
> 赞同：0
> 
> 时间：2013-01-22T17:12:43.260
> 
> 标签：java, android, drawing, android-canvas

我在缩放位图时遇到问题，然后在 Android 中绘制它。从一开始，我就有一个自定义视图，使用 onDraw 方法，我在它的画布上绘制一些东西。现在，我想平滑地缩放该绘图（仍在画布上），然后在该画布上绘制一些东西，而不清除它（在该缩放绘图上）。如何做到这一点？

我尝试使用内置动画机制缩放整个视图。缩放是平滑的，但不是这样，因为它是缩放整个组件，而不仅仅是绘图。有什么方法可以平滑地缩放绘图然后在上面绘图？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:34:19.477

您可以自己实现缩放动画。`invalidate()`只要您需要扩展和测量`onDraw()`调用之间的时间并计算您需要的扩展量，您就可以调用。缩放本身可以通过调用`canvas.drawBitmap(bitmap, matrix, paint)`矩阵必须代表缩放的位置来完成。

另一种方法是使用[ScaleAnimation](http://developer.android.com/reference/android/view/animation/ScaleAnimation.html)，其中[Transformation](http://developer.android.com/reference/android/view/animation/Transformation.html)包含您也可以使用的矩阵。

在位图上绘图很简单：只需在`onDraw()`绘制缩放图像后在同一个画布上绘图。由于只有图像缩放，新绘制的东西没有缩放。

第三种解决方案可能更复杂一些。你可以，而不是缩放位图，只是缩放画布。缩小画布，在其上绘制位图并恢复画布。之后，您可以绘制其余部分。

# ruby-on-rails - “使用 Ruby on Rails 的命令提示符”从何而来，为什么它不断创建“站点”文件夹？

> ID：14464198
> 
> 赞同：2
> 
> 时间：2013-01-22T17:12:50.100
> 
> 标签：ruby-on-rails, ruby, bundler, command-prompt

所以我们明白，我使用的是 Windows 7。

我一直在努力通过 ruby​​.railstutorial.org/ruby-on-rails-tutorial-book，但我似乎已经拆分了我的命令提示符。最初，我根据此处的说明安装了 Rails：[http:](http://railsinstaller.org/windows) //railsinstaller.org/windows（这是 guides.rubyonrails 发送到这里的地方）。直到很久以后我才注意到它，但似乎我在按照那里的说明创建了一个名为“使用 Ruby on Rails 的命令提示符”的命令提示符。

现在，在 guides.rubyonrails 的 RonR 教程的其余部分中，我一直在使用我的 REGULAR 命令提示符。同时，我也遇到了很多奇怪的问题，比如：

*   即使在我明确安装和/或添加它们之后也找不到 gemfiles/gems
*   当我尝试从我的应用程序位置（或任何位置）执行“捆绑安装”时出现 EACCES 错误

最后一点，“使用 Ruby on Rails 的命令提示符”似乎总是从`C:\Sites>`（当我从 railsinstaller.org/windows 安装 Rails 时，这是我原来的“演示应用程序”的位置）启动。但是，即使我尝试删除`\Sites`，如果我重新打开“使用 Ruby on Rails 的命令提示符”，它也会神奇地重新创建`\Sites`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:24:15.873

RoR 命令提示符只是 CMD.exe 的一个快捷方式，初始工作目录`c:\sites`设置`%PATH%`为执行等效操作的 EXE）。它也可能是对 Ruby 安装路径具有写入权限的管理员提示。它可能正在重新创建您的目录，因为它会写入一些文件，可能是日志、缓存或与“上次运行时间”相关的设置。

如果它是快捷方式或批处理文件，您应该能够对其进行编辑以更改起始位置。您遇到的错误可能是由于没有权利`%PATH%`和权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-25T09:05:09.457

RoR 命令提示符只是 cmd.exe 的一个快捷方式，并进行了一些修改。如果您右键单击并在 RoR 命令提示符处选择属性，您可以看到这一点。

如果要更改起始位置，请转到以下位置（可能会有所不同，具体取决于您指示 RailsInstaller 设置 Ruby 和 Rails 的位置）：

> C:\RailsInstaller\Ruby1.9.3\setup_environment.bat

并将以下行添加到末尾（插入您自己的路径）。

```
CD *PATHTOYOURFOLDER* 
```

但是，这是一个快速修复，仍将创建站点文件夹。您可以进一步修改批处理文件以避免创建不必要的目录。

# javascript - 标签“a”点击问题

> ID：14464201
> 
> 赞同：0
> 
> 时间：2013-01-22T17:12:57.753
> 
> 标签：javascript, jquery

我有一个带有滚动插件的简单选项卡脚本，当我单击每个选项卡时，该选项卡的滚动将被激活，但是有一个问题，因为如果您在每个选项卡上单击两次，您的滚动条上会有两个实例页！这是我的代码，有什么想法吗？

**PS 我使用 mCustomScrollbar 插件。**

```
(function($){
    $(window).load(function(){
                $('ul.tabs').each(function(){
                var $active, $content, $links = $(this).find('a');
                $active = $($links.filter('[href="' + location.hash + '"]')[0] || $links[0]);
                $active.addClass('active');
                $content = $($active.attr('href'));
                $links.not($active).each(function() {
                    $($(this).attr('href')).hide();
                });
                // Set scrollbar to main item
                $('#mContent').mCustomScrollbar();
                // Bind the click event handler
                $(this).on('click', 'a', function(e)
                {
                    var $currentScroll = null, $currentTab = $(this).attr('href');
                    switch ($currentTab)
                    {
                        case '#tabs-contentDescription':
                              $currentScroll = '#mContent';
                              break;
                        case '#tabs-contentChangelog':
                              $currentScroll = '#mChangelog';
                              break;
                        case '#tabs-contentPermission':
                              $currentScroll = '#mPermission';
                              break;
                    }
                    console.log('Current tab is: ' + $currentTab + ' And current scroll div is :' + $currentScroll);
                    // Make the old tab inactive.
                    $active.removeClass('active');
                    $content.hide();
                    // Update the variables with the new link and content
                    $active = $(this);
                    $content = $($(this).attr('href'));
                    // Make the tab active.
                    $active.addClass('active');
                    $content.show();
                    $($currentScroll).mCustomScrollbar();
                    e.preventDefault();
                });
        });
    });
}) (jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:41:18.487

我在评论中建议的一个简化示例：

```
var active;

(function($){
    $(window).load(function(){

    [...]

    if(active) $(active).delete();
    active = $active = $(this);

    [...]

)}) (jQuery); 
```

# c# - 带有 .NET 4 的 SqlBulkCopy 算术溢出 - .Net 4.5 没有问题

> ID：14464207
> 
> 赞同：0
> 
> 时间：2013-01-22T17:13:10.950
> 
> 标签：c#, .net, sql-server-2012, sqlbulkcopy

我正在尝试使用 SqlBulkCopy 将大量数据插入到我的数据库中。我最初使用 .NET 4.5 构建了这个程序，但它不能在我需要它运行的旧机器上运行。在测试期间（使用 4.5），该程序完美运行，但是当我降级到 .NET 4.0 时，它不再工作。

这是代码：

```
string query = string.Format("Generic database query text");
OdbcCommand com = new OdbcCommand(query, conn);
OdbcDataReader reader = com.ExecuteReader();
//insert the new records
SqlBulkCopy sbc = new SqlBulkCopy(connectionString);

sbc.EnableStreaming = true;
sbc.BulkCopyTimeout = 1200;
sbc.DestinationTableName = "TableName;
sbc.WriteToServer(reader); 
```

在 .NET 4.5 中，我可以启用流式传输，而在 .NET 4.0 中却不能。在 .NET 4.5 中禁用流不会破坏解决方案。这是代码之间的唯一区别。表中的列以 100000% 1:1 精确映射。匹配列名，匹配数据类型，匹配所有内容。我还尝试使用下面的代码手动映射列，但无济于事。

```
sbc.ColumnMappings.add("column1", "matchedColumn1"); 
```

我得到的确切错误是：

```
Arithmetic operation resulted in an overflow. 
```

但我知道没有大量流失。根本没有数学发生。这是一个简单的查询并插入另一个。我现在正在使用一个小子集（用于测试），其中 ID 不超过 5 位，我什至测试过将数据库中的所有整数都更改为 bigint。没用。

列：

```
1   - Int
A1  -Varchar(50)
19  -Varchar(50)
True    -bit
5/5/2011    -date
Passed InstaMed Standard Edits  -text
1   -int
C0200000000000000023    -varchar(100)
39  -int
82      -int 
```

有人有想法么？？

# jquery - Jquery检查值是否为数字

> ID：14464213
> 
> 赞同：21
> 
> 时间：2013-01-22T17:13:41.990
> 
> 标签：jquery, numeric

我想知道是否有人有一个快速而肮脏的 jquery 方法来检查一个值是否是数字？我正在考虑使用正则表达式类型方法来检查值，如果没有，请不要提交表单。我正在使用 jquery 验证，但我在加载 jquery 验证时遇到了问题。

我只有一个值，我想确保它是数字的。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-22T17:15:55.737

当然，使用 jQuery 的**[isNumeric()](http://api.jquery.com/jQuery.isNumeric/)**函数。

```
$.isNumeric("-10");  // true
$.isNumeric(16);     // true
$.isNumeric(0xFF);   // true
$.isNumeric("0xFF"); // true
$.isNumeric("8e5");  // true (exponential notation string)
$.isNumeric(3.1415); // true
$.isNumeric(+10);    // true
$.isNumeric(0144);   // true (octal integer literal)
$.isNumeric("");     // false
$.isNumeric({});     // false (empty object)
$.isNumeric(NaN);    // false
$.isNumeric(null);   // false
$.isNumeric(true);   // false
$.isNumeric(Infinity); // false
$.isNumeric(undefined); // false 
```

# c# - System.Net.Sockets.SocketException、System.ServiceModel.ClientBase 和 VS2010

> ID：14464224
> 
> 赞同：0
> 
> 时间：2013-01-22T17:14:39.250
> 
> 标签：c#, wcf

每次我在 VS 2010 中使用 WCF 代理客户端时，我都会收到至少 3 条错误消息：

```
A first chance exception of type 'System.Net.Sockets.SocketException' occurred in System.ServiceModel.dll
A first chance exception of type 'System.ServiceModel.CommunicationException' occurred in System.ServiceModel.dll
A first chance exception of type 'System.ServiceModel.CommunicationException' occurred in System.ServiceModel.dll 
```

我需要关心这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:27:12.470

根据[this SO post](https://stackoverflow.com/questions/5357436/wcf-many-many-many-first-chance-exceptions-being-thrown-then-crashes-app)，

> 第一次机会异常不是错误。这些通常是会被捕获的异常。你应该忽略它们。

这是有关[如何禁用这些异常](http://www.helixoft.com/blog/archives/24)的参考。

# ios - ios - 如何将 UITabBarController 嵌入 UINavigationController 并为其提供 3 个选项卡？

> ID：14464225
> 
> 赞同：0
> 
> 时间：2013-01-22T17:14:43.130
> 
> 标签：ios, ios5, uitabbarcontroller, uitabbar

我在这个问题上发现了许多现有的问题，但到目前为止，他们感觉比我需要的要复杂一些。

我只是想了解基础知识。到目前为止，我所做的是将一个新的 UIViewController 屏幕放入我的故事板中。然后我将 UITabBar 拖到那个新屏幕中。

但我不确定这是否正确，因为我读到的是应该有一个 UITabBarController 而不是只是一个 UITabBar 所以这让我感到困惑。

我也有一个 NavigationController 已经在工作，所以我也试图弄清楚如何将 NavigationController 嵌入 UITabBar 或 UITabBarController （我需要的）。

谁能帮我理解我在哪里出错了，这里的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:35:11.283

您不想拖入标签栏，您应该使用标签栏控制器。从对象列表中拖动一个标签栏控制器，并将其放在导航控制器的左侧。通过选择它并选中检查器中的“是初始场景”框，使其成为初始控制器。如果您不想要标签栏控制器自动获得的两个视图控制器，您可以删除它们。您可以从选项卡栏控制器拖动到导航控制器以将其连接起来，并使其成为选项卡之一（放手时选择“Relationship Segue”下的视图控制器选项）。

# java - 如何引用具有多个边界的通用返回类型

> ID：14464226
> 
> 赞同：43
> 
> 时间：2013-01-22T17:14:43.703
> 
> 标签：java, generics, interface, multiple-inheritance

我最近看到可以声明一个返回类型，该类型也受接口限制。考虑以下类和接口：

```
public class Foo {
    public String getFoo() { ... }
}

public interface Bar {
    public void setBar(String bar);
} 
```

我可以像这样声明一个返回类型：

```
public class FooBar {
    public static <T extends Foo & Bar> T getFooBar() {
        //some implementation that returns a Foo object,
        //which is forced to implement Bar
    }
} 
```

如果我从某个地方调用该方法，我的 IDE 会告诉我返回类型具有方法`String getFoo()`以及`setBar(String)`，但前提是我在函​​数后面指向一个点，*如下*所示：

```
FooBar.getFooBar(). // here the IDE is showing the available methods. 
```

有没有办法获得对这样一个对象的引用？我的意思是，如果我会做这样的事情：

```
//bar only has the method setBar(String)
Bar bar = FooBar.getFooBar();
//foo only has the getFoo():String method
Foo foo = FooBar.getFooBar(); 
```

我想有这样的参考（伪代码）：

```
<T extents Foo & Bar> fooBar = FooBar.getFooBar();
//or maybe
$1Bar bar = FooBar.getFooBar();
//or else maybe
Foo&Bar bar = FooBar.getFooBar(); 
```

这在Java中是否可能，或者我只能声明这样的返回类型？我认为Java也必须以某种方式输入它。我不想诉诸这样的包装，因为这感觉像是在作弊：

```
public class FooBarWrapper<T extends Foo&Bar> extends Foo implements Bar {
    public T foobar;

    public TestClass(T val){
        foobar = val;
    }

    @Override
    public void setBar(String bar) {
        foobar.setBar(bar);
    }

    @Override
    public String getFoo() {
        return foobar.getFoo();
    }
} 
```

Java 真的发明了这么好的特性，却忘记了想要引用它吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-22T22:58:31.033

虽然泛型方法的类型参数可以受边界限制，例如`extends Foo & Bar`，但它们最终由调用者决定。当您调用`getFooBar()`时，调用站点已经知道`T`要解决的问题。通常，这些类型参数将由编译器*推断*，这就是您通常不需要指定它们的原因，如下所示：

```
FooBar.<FooAndBar>getFooBar(); 
```

但即使`T`被推断为`FooAndBar`，这确实是幕后发生的事情。

所以，要回答你的问题，这样的语法是这样的：

```
Foo&Bar bothFooAndBar = FooBar.getFooBar(); 
```

在实践中永远不会有用。原因是调用者*必须已经知道*是什么`T`。要么`T`是一些具体的类型：

```
FooAndBar bothFooAndBar = FooBar.<FooAndBar>getFooBar(); // T is FooAndBar 
```

或者，`T`是一个未解析的类型参数，我们在它的范围内：

```
<U extends Foo & Bar> void someGenericMethod() {
    U bothFooAndBar = FooBar.<U>getFooBar(); // T is U
} 
```

另一个例子：

```
class SomeGenericClass<V extends Foo & Bar> {
    void someMethod() {
        V bothFooAndBar = FooBar.<V>getFooBar(); // T is V
    }
} 
```

从技术上讲，这就是答案。但我还想指出，您的示例方法`getFooBar`本质上是不安全的。请记住，调用者决定要做什么`T`，而不是方法。由于`getFooBar`不采用与 相关的任何参数`T`，并且由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，它唯一的选择是返回`null`或通过进行未经检查的强制转换来“撒谎”，冒着[堆污染](https://softwareengineering.stackexchange.com/a/156008/33756)的风险。一个典型的解决方法是`getFooBar`使用一个`Class<T>`参数，或者一个`FooFactory<T>`例子。

## 更新

事实证明，当我断言调用者`getFooBar`必须始终知道是什么时，我错了`T`。正如@MiserableVariable 指出的那样，在某些情况下，泛型方法的类型参数被推断为*通配符 capture*，而不是具体类型或类型变量。**请参阅[他的答案](https://stackoverflow.com/a/14632995/697449)，了解一个很好的`getFooBar`实现示例，该示例使用代理来驱动他`T`的未知点。**

正如我们在评论中所讨论的，[一个使用的例子`getFooBar`](http://pastebin.com/UGNvgjEZ)造成了混乱，因为它不需要任何参数来推断`T`。某些编译器在无上下文调用时会[抛出错误](http://ideone.com/3CqrAJ)`getFooBar()`，而其他编译器[则可以](http://ideone.com/YuKQLq)。我*认为*不一致的编译错误 - 以及调用是非法的事实`FooBar.<?>getFooBar()`- 验证了我的观点，但事实证明这些都是红鲱鱼。

根据@MiserableVariable 的回答，我整理了[一个新示例](http://ideone.com/V1VED9)，该示例使用带有参数的泛型方法，以消除混淆。假设我们有接口`Foo`和`Bar`一个实现`FooBarImpl`：

```
interface Foo { }
interface Bar { }
static class FooBarImpl implements Foo, Bar { } 
```

我们还有一个简单的容器类，它包装了某种类型的实例来实现`Foo`和`Bar`。它声明了一个愚蠢的静态方法`unwrap`，该方法接受 a`FooBarContainer`并返回其所指对象：

```
static class FooBarContainer<T extends Foo & Bar> {

    private final T fooBar;

    public FooBarContainer(T fooBar) {
        this.fooBar = fooBar;
    }

    public T get() {
        return fooBar;
    }

    static <T extends Foo & Bar> T unwrap(FooBarContainer<T> fooBarContainer) {
        return fooBarContainer.get();
    }
} 
```

现在假设我们有一个通配符参数化类型`FooBarContainer`：

```
FooBarContainer<?> unknownFooBarContainer = ...; 
```

我们被允许`unknownFooBarContainer`进入`unwrap`. 这表明我之前的断言是错误的，因为调用站点不知道是什么`T`——只知道它是 bounds 内的某种类型`extends Foo & Bar`。

```
FooBarContainer.unwrap(unknownFooBarContainer); // T is a wildcard capture, ? 
```

正如我所指出的，`unwrap`使用通配符调用是非法的：

```
FooBarContainer.<?>unwrap(unknownFooBarContainer); // compiler error 
```

我只能猜测这是因为通配符捕获永远不能相互匹配 -`?`调用站点提供的参数是模棱两可的，没有办法说它应该专门匹配`unknownFooBarContainer`.

因此，这是 OP 询问的语法的用例。调用返回类型的`unwrap`引用。我们可以将该引用分配给or ，但不能同时分配给两者：`unknownFooBarContainer``? extends Foo & Bar``Foo``Bar`

```
Foo foo = FooBarContainer.unwrap(unknownFooBarContainer);
Bar bar = FooBarContainer.unwrap(unknownFooBarContainer); 
```

如果由于某种原因`unwrap`很昂贵，而我们只想调用一次，我们将被迫转换：

```
Foo foo = FooBarContainer.unwrap(unknownFooBarContainer);
Bar bar = (Bar)foo; 
```

所以这就是假设语法派上用场的地方：

```
Foo&Bar fooBar = FooBarContainer.unwrap(unknownFooBarContainer); 
```

这只是一个相当模糊的用例。允许这样的语法会产生相当广泛的影响，无论好坏。它会在不需要的地方为滥用打开空间，并且完全可以理解为什么语言设计者没有实现这样的东西。但我仍然认为这很有趣。

* * *

## 关于堆污染的说明

（[主要针对@MiserableVariable](https://stackoverflow.com/questions/14464226/how-to-reference-a-generic-return-type-with-multiple-bounds#comment20233991_14469627)）这是一个关于不安全方法如何`getFooBar`导致堆污染及其影响的演练。给定以下接口和实现：

```
interface Foo { }

static class Foo1 implements Foo {
    public void foo1Method() { }
}

static class Foo2 implements Foo { } 
```

让我们实现一个不安全的方法`getFoo`，类似于`getFooBar`此示例但对其进行了简化：

```
@SuppressWarnings("unchecked")
static <T extends Foo> T getFoo() {
    //unchecked cast - ClassCastException is not thrown here if T is wrong
    return (T)new Foo2();
}

public static void main(String[] args) {
    Foo1 foo1 = getFoo(); //ClassCastException is thrown here
} 
```

在这里，当 new`Foo2`被强制转换为时`T`，它是“未经检查的”，这意味着由于类型擦除，运行时不知道它应该失败，即使在这种情况下它应该失败，因为`T`was `Foo1`。相反，堆是“污染的”，这意味着引用指向它们不应该被允许的对象。

失败发生在方法返回之后，当`Foo2`实例尝试分配给`foo1`具有 reifiable 类型的引用时`Foo1`。

你可能在想，“好吧，所以它在调用站点而不是方法上爆炸了，大不了。” 但是当涉及更多泛型时，它很容易变得更加复杂。例如：

```
static <T extends Foo> List<T> getFooList(int size) {
    List<T> fooList = new ArrayList<T>(size);
    for (int i = 0; i < size; i++) {
        T foo = getFoo();
        fooList.add(foo);
    }
    return fooList;
}

public static void main(String[] args) {

    List<Foo1> foo1List = getFooList(5);

    // a bunch of things happen

    //sometime later maybe, depending on state
    foo1List.get(0).foo1Method(); //ClassCastException is thrown here
} 
```

现在它不会在呼叫站点爆炸。稍后当内容`foo1List`被使用时它会爆炸。这就是堆污染变得更难调试的原因，因为异常堆栈跟踪不会将您指向实际问题。

当调用者本身在通用范围内时，它变得更加复杂。想象一下，`List<Foo1>`我们没有得到 a ，而是得到 a `List<T>`，将其放入 a`Map<K, List<T>>`并将其返回给另一个方法。你明白我希望的想法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T18:51:14.183

*在某些情况下，调用者可以在不*知道具体类型的情况下使用返回值的被调用方法。甚至有可能这种类型根本不存在，它只是一个代理：

```
import java.lang.reflect.*;

interface Foo {}
interface Bar {}

class FooBar1 implements Foo, Bar {public String toString() { return "FooBar1"; }}
class FooBar2 implements Foo, Bar {public String toString() { return "FooBar2"; }}   

class FooBar {
    static <T extends Foo & Bar> T getFooBar1() { return (T) new FooBar1(); }
    static <T extends Foo & Bar> T getFooBar2() { return (T) new FooBar2(); }
    static <T extends Foo & Bar> T getFooBar() { 
        return (T) 
        Proxy.newProxyInstance(
            Foo.class.getClassLoader(),
            new Class[] { Foo.class, Bar.class },
            new InvocationHandler() {
                public Object invoke(Object proxy, Method method, Object[] args) {
                    return "PROXY!!!";}});
    }

    static <U extends Foo & Bar> void show(U u) { System.out.println(u); }

    public static void main(String[] args) {
        show(getFooBar1());
        show(getFooBar2());
        show(getFooBar());      
    }

} 
```

两者`FooBar1`和`FooBar2`实施`Foo`and `Bar`。在中，对和`main`的调用可以分配给一个变量，尽管没有充分的理由让它知道恕我直言。 `getFooBar1``getFooBar2`

**But `getFooBar` is the interesting case**, which uses a proxy. In practice, it may be the *only* instance of a an object that implements the two interfaces. A different method (`show` here) can be used with a temporary in a type-safer manner, but it cannot be assigned to a variable without the `FooBarWrapper` hack described in the question. It is not even possible to create a generic wrapper, `class Wrapper<T extends U & V>` is not allowed.

The only trouble seems be defining a syntax, other type checking mechanisms seem to be in place, at least in Oracle javac 1.7.0.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T18:28:12.187

就像@Paul Bellora 在他的回答中提到的那样，类型由调用者解析，因为基本上它现在将调用它。我只想用一个用例来补充他的答案，我认为语法的使用可能是有益的。

总是有避免使用这种语法的替代方法。我想不出一个完全必要的例子。但是我可以想到一个特定情况的用例，可以方便地使用这种语法，尽管我自己甚至没有使用它。我知道它不是最好的例子，但它可以切中要害。

## 案子

最近我一直在开发用户界面。在这个应用程序中，我使用一个库来管理我的 GUI 元素。除了库的功能之外，我还创建了一个自定义界面，该界面在我的应用程序中定义了一个视图，该视图具有特定类型数据的输入，比如坐标输入。该界面如下所示：

```
public interface CoordinateView extends View
{
    Coordinate getCoordinate();
    //Maybe more stuff
} 
```

我的应用程序中有几个实现此接口的窗口。现在让我们说，出于某种原因，我想将最后一个在窗口中提交的坐标存储在模型中，然后立即关闭窗口。为此，我可以将处理程序附加到提交表单的窗口按钮，当用户关闭窗口时，处理程序将被触发。我可以通过简单地在每个窗口中匿名添加处理程序来实现这一点，例如：

```
public MyWindow extends Window implements CoordinateView, OtherInterface
{
    private Button submitButton;

    public MyWindow()
    {
        super();
        //Create all the elements

        submitButton.addClickHandler(
            new ClickHandler()
            {
                @Override
                onCLick(ClickEvent e)
                {
                    getModel().add(getCoordinate());
                    destroy();
                }
            });  
   }
} 
```

但是，这种设计对我来说并不理想，它不够模块化。考虑到我有很多具有这种行为的窗口，改变它可能会变得相当乏味。所以我宁愿在一个类中提取匿名方法，这样更容易改变和维护。但问题是destroy()方法没有在任何接口中定义，只是窗口的一部分，getCoordinate()方法是在我定义的接口中定义的。

## 用法

在这种情况下，我可以使用多个边界，如下所示：

```
public class MyController <T extends Window & CoordinateView> implements ClickHandler
{
    private T windowWithCoordinates;

    public MyController (T window)
    {
        windowWithCoordinates = window;
    }

    @Override
    onClick(ClickEvent e)
    {
        getModel().add(windowWithCoordinates.getCoordinate());
        windowWithCoordinate.destroy();
    }
} 
```

然后窗口中的代码现在将是：

```
public MyWindow extends Window implements CoordinateView, OtherInterface
{
    private Button submitButton;

    public MyWindow()
    {
        super();
        //Create all the elements

        submitButton.addClickHandler(new MyController<MyWindow>(this));

    }
} 
```

请注意，行为将保持不变，代码只是像以前一样具有凝聚力。它只是更加模块化，但它不需要创建额外的接口就能正确提取它。

## 选择

或者，我可以定义一个额外的接口`CoordinateView`来扩展并定义一个关闭窗口的方法。

```
public interface CoordinateWindow extends CoordinateView
{
    void destroy();
} 
```

让窗口实现这个更具体的接口，而不是在提取的控制器中不必要地使用泛型参数：

```
public class MyController implements ClickHandler
{
    private CoordinateWindow windowWithCoordinates;

    public MyController (CoordinateWindow window)
    {
        windowWithCoordinates = window;
    }

    @Override
    onClick(ClickEvent e)
    {
        getModel().add(windowWithCoordinates.getCoordinate());
        windowWithCoordinate.destroy();
    }
}

public MyWindow extends Window implements CoordinateWindow
{
    private Button submitButton;

    public MyWindow()
    {
        super();
        //Create all the elements  
        submitButton.addClickHandler(new MyController(this));                  
    }

    @Override
    void destroy()
    {
        this.destroy();
    }
} 
```

对于某些人来说，这种方法比以前更干净，甚至更可重用，因为现在它可以添加到指定层次结构之外的其他“窗口”。就个人而言，我也更喜欢这种方法。但是，它可能会导致更多的编码，因为必须定义一个新接口只是为了访问所需的方法。

总之，虽然我个人不推荐它，但我认为使用具有多个边界的泛型类型可以帮助耦合定义，同时减少代码量。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-22T17:30:53.283

不确定 Eclipse 为您做了什么，但上面的大部分代码都没有接近编译......

我进行了适当的更改以使其尽可能地编译，这就是我得到的：

```
public class Foo
{
  public String getFoo() { return ""; }  // must have a body
}
public interface Bar // no ()
{
  public void setBar(String bar);
}
public class FooBar<T>
{
  public static <T extends Foo & Bar> T getFooBar()
  {
    return null;
  }
}
public class FB
{
  private FooBar<Object> fb = new FooBar<Object>();

  public static void main(String args[])
  {
    new FB();
  }

  public FB()
  {
    System.out.println(fb.getFooBar());
  }
}

FB.java:12: type parameters of <T>T cannot be determined; no unique maximal instance exists for type variable T with upper bounds java.lang.Object,Foo,Bar
    System.out.println(fb.getFooBar());
                                   ^
1 error 
```

# itextsharp - itext Sharp 和 PDF 表单加括号

> ID：14464227
> 
> 赞同：0
> 
> 时间：2013-01-22T17:14:44.293
> 
> 标签：itextsharp, acrobat, pdfstamper

我的 pdf 没有正确显示负数我已经使用 acrobat 设置了一个 pdf 表单，其中包含格式化为数字的 textfeild。

使用压模通过 itext sharp 填充时，它不会正确显示负数

除非同时勾选 Show Parnetheses 和 use red text

我只需要括号而不是负数样式的红色数字有其他人遇到这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:02:22.917

找不到答案，所以手动编码了括号

```
Function fixnegatives(astring As String) As String
    If IsNumeric(astring) Then
        Dim aint As Integer = CInt(astring)
        astring = String.Format("{0:#,###,###}", aint)
        If (aint < 0) Then
            Dim bstring As New StringBuilder(astring)
            bstring.Replace("-", "(")
            bstring.Append(")")
            astring = bstring.ToString()
        End If
    End If
    Return astring
End Function 
```

# java - 如何将 Java Swing JScrollPane 鼠标滚轮优先级更改为水平滚动？

> ID：14464228
> 
> 赞同：1
> 
> 时间：2013-01-22T17:14:45.940
> 
> 标签：java, swing, jscrollpane

我现在可以看到滚动优先级是垂直滚动。我想改变它。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:22:04.420

感谢第一个答案-非常有帮助。但是我发现上面响应中的 iNewValue 需要乘以 evt.getWheelRotation() 值，该值是滚轮鼠标实际旋转的不同滚轮鼠标段的数量。

此外，何时滚动的条件也需要考虑到这一点 - 条件必须是 evt.getWheelRotation() <= -1 或 evt.getWheelRotation() >= 1

这是一个对我有用的更新示例。

```
 import java.awt.Component;
    import java.awt.event.MouseAdapter;
    import java.awt.event.MouseWheelEvent;
    import javax.swing.JScrollBar;
    import javax.swing.JScrollPane;
    class MyJScrollPane extends JScrollPane 
    {

        public MyJScrollPane(Component component)
        {
            super(component);
            final JScrollBar horizontalScrollBar = getHorizontalScrollBar();
            final JScrollBar verticalScrollBar = getVerticalScrollBar();
            setWheelScrollingEnabled(false);
            addMouseWheelListener(new MouseAdapter()
            {
                public void mouseWheelMoved(MouseWheelEvent evt)
                {

                    if (evt.getWheelRotation() >= 1)//mouse wheel was rotated down/ towards the user
                    {
                        int iScrollAmount = evt.getScrollAmount();
                        int iNewValue = horizontalScrollBar.getValue() + horizontalScrollBar.getBlockIncrement() * iScrollAmount * Math.abs(evt.getWheelRotation());
                        if (iNewValue <= horizontalScrollBar.getMaximum())
                        {
                            horizontalScrollBar.setValue(iNewValue);
                        }
                    }
                    else if (evt.getWheelRotation() <= -1)//mouse wheel was rotated up/away from the user
                    {
                        int iScrollAmount = evt.getScrollAmount();
                        int iNewValue = horizontalScrollBar.getValue() - horizontalScrollBar.getBlockIncrement() * iScrollAmount * Math.abs(evt.getWheelRotation());
                        if (iNewValue >= 0)
                        {
                            horizontalScrollBar.setValue(iNewValue);
                        }
                    }
                }
            });
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:41:39.987

要更改默认滚动优先级，`JScrollPane`您需要创建自己的版本，`JScrollPane`并且当鼠标滚轮移动时，强制水平`ScrollBar`而不是垂直生效`ScrollBar`。

JScrollPane 的覆盖版本可以这样创建：

```
import javax.swing.JScrollPane;
import javax.swing.JScrollBar;
import java.awt.Component;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseWheelListener;
import java.awt.event.MouseWheelEvent;

class MyJScrollPane extends JScrollPane 
{
    public MyJScrollPane(Component component)
    {
        super(component);
        final JScrollBar horizontalScrollBar = getHorizontalScrollBar();
        final JScrollBar verticalScrollBar = getVerticalScrollBar();
        setWheelScrollingEnabled(false);
        addMouseWheelListener(new MouseAdapter()
        {
            public void mouseWheelMoved(MouseWheelEvent evt)
            {
                if (evt.getWheelRotation() == 1)//mouse wheel was rotated down/ towards the user
                {
                    int iScrollAmount = evt.getScrollAmount();
                    int iNewValue = horizontalScrollBar.getValue() + horizontalScrollBar.getBlockIncrement() * iScrollAmount;
                    if (iNewValue <= horizontalScrollBar.getMaximum())
                    {
                        horizontalScrollBar.setValue(iNewValue);
                    }
                }
                else if (evt.getWheelRotation() == -1)//mouse wheel was rotated up/away from the user
                {
                    int iScrollAmount = evt.getScrollAmount();
                    int iNewValue = horizontalScrollBar.getValue() - horizontalScrollBar.getBlockIncrement() * iScrollAmount;
                    if (iNewValue >= 0)
                    {
                        horizontalScrollBar.setValue(iNewValue);
                    }
                }
            }
        });
    }
} 
```

我希望这可以解决您的滚动优先级问题`JScrollPane`。

# coldfusion - BOT/SPIDERS 是否有理由显示更多错误？

> ID：14464230
> 
> 赞同：2
> 
> 时间：2013-01-22T17:14:47.487
> 
> 标签：coldfusion, web-crawler, bots, coldfusion-10

我正在检查我们的代码并做一些急需的房屋清洁工作。我们的许多错误都在处理范围不正确的变量。这样做，并通过错误日志/电子邮件，我注意到我们的大部分错误是由机器人/蜘蛛引起的。我不认为 Bots/Spiders 使用会话变量，（老实说我没有查过）但即使他们这样做/不这样做，是否有任何事情会导致 Bots/Spiders 导致应用程序产生更多错误。

我已经修复了一些蜘蛛/机器人传递错误/空 URL 变量的地方。我明白了，但就在正常的页面处理中，我看到，总体而言，来自机器人的错误多于来自人类的错误。我不是在责怪他们，（我知道这是我们的代码），但我很好奇为什么会这样。

我的假设是，我们处理非作用域变量的错误可能是由于对这些变量进行了线程处理。但机器人不应该能够影响这一点。还是应该？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:31:12.403

你已经搞定了大部分。大多数机器人按照机器人想要的方式做事。从不同的链接直接访问页面，一些机器人甚至提交带有垃圾的表单以查看另一侧的内容。他们访问页面的方式可能与您预期的不同，因此变量或对象可能不会以它们供人类使用的方式存在。

想象一下通过卧室窗户进入你的房子（登录屏幕后面的不安全入口）。

太好了，您可以在房子周围走动（浏览网站）。

直到警报响起，因为当您走进前门时它从未被禁用，因为您跳过了那一步（您没有登录）。

现在你的闹钟响了（管理员正在收到一封电子邮件）。

你不能从前门离开房子，因为门闩需要一把你没有的钥匙（你不能注销，因为你没有会话）。

因此，现在您尝试从后门离开，但看门狗不在，您必须处理 6 英尺的围栏（随机退出策略最终会导致更多错误）。

# iphone - 鼠标悬停就像在 ios 中的感觉

> ID：14464231
> 
> 赞同：0
> 
> 时间：2013-01-22T17:14:59.313
> 
> 标签：iphone, ios, cocoa

我是 iOS 开发的新手。抱歉有任何错误。

如何在 iOS 中获得类似于鼠标悬停和更改其颜色的按钮的东西。

我需要为此使用触摸事件或幻灯片事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:17:10.647

我会使用 touchstart 和 touchend 事件。他们反应灵敏，完全按照您的想法行事。对不起，你不是在说网络。无论哪种方式，可可中都应该有触摸事件。我使用 Titanium，它通过 javascript 访问本机方法，并且有 touchevents，所以我知道可可中有。检查文档以了解使用它们的最佳方式。

根据您想要的效果，您可能还想使用手势。但是，如果您想模仿悬停，那么您想要的是 touchstart/end。

# xml - XSL 1.0 - 在调用模板中动态选择变量集

> ID：14464233
> 
> 赞同：0
> 
> 时间：2013-01-22T17:15:06.673
> 
> 标签：xml, xslt, xslt-1.0

因此，我将 XML 提要转换为 HTML，从而使最终用户能够选择 3 种配色方案中的 1 种。根据选择的配色方案，我正在尝试将值分配给将呈现 XML 的调用模板命令中的参数。

我对 XSL 还很陌生，所以请随时为我指出更好的方法

这是我的代码示例：

```
<xsl:template match="/">

<xsl:variable name="basic_head_title_color">#414141</xsl:variable>
<xsl:variable name="basic_head_title_size">18px</xsl:variable>
<xsl:variable name="basic_head_desc_color">#8b8b8b</xsl:variable>

<xsl:variable name="contrast_head_title_color">#ffffff</xsl:variable>
<xsl:variable name="contrast_head_title_size">18px</xsl:variable>
<xsl:variable name="contrast_head_desc_color">#e1e1e1</xsl:variable>

<xsl:variable name="black_head_title_color">#ffffff</xsl:variable>
<xsl:variable name="black_head_title_size">18px</xsl:variable>
<xsl:variable name="black_head_desc_color">#e1e1e1</xsl:variable>

<xsl:when test="$display_theme = 'basic'" >
    <xsl:variable name ="chosen_head_title_color" select="basic_head_title_color"/>  
    <xsl:variable name ="chosen_head_title_size" select="basic_head_title_size"/>          
    <xsl:variable name ="chosen_head_desc_color" select="basic_head_desc_color"/>                  
</xsl:when>

<xsl:when test="$display_theme = 'contrast'" >
    <xsl:variable name ="chosen_head_title_color" select="contrast_head_title_color"/>  
    <xsl:variable name ="chosen_head_title_size" select="contrast_head_title_size"/>          
    <xsl:variable name ="chosen_head_desc_color" select="contrast_head_desc_color"/>
</xsl:when>

<xsl:when test="$display_theme = 'black'" >
     <xsl:variable name ="chosen_head_title_color" select="black_head_title_color"/>  
    <xsl:variable name ="chosen_head_title_size" select="black_head_title_size"/>          
    <xsl:variable name ="chosen_head_desc_color" select="black_head_desc_color"/>  
</xsl:when>

    <xsl:call-template name="render_xml">
            <xsl:with-param name="head_title_color" select="chosen_head_title_color" />
            <xsl:with-param name="head_title_size" select="chosen_head_title_size" />
            <xsl:with-param name="head_desc_color" select="chosen_head_desc_color" />
    </xsl:call-template>

</template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:24:05.860

您的 XSLT 在某些地方无效，但这是怎么回事？

```
 <xsl:param name="display_theme" select="'basic'" />

  <v:styles xmlns:v="transform-variables">
    <style name="basic" titleColor="#41414" titleSize="18px" descColor="#8b8b8b" />
    <style name="contrast" titleColor="#ffffff" titleSize="18px" descColor="#e1e1e1" />
    <style name="black" titleColor="#ffffff" titleSize="18px" descColor="#e1e1e1" />
  </v:styles>

  <xsl:template match="/">

    <xsl:variable name="style" select="document('')//style[@name = $display_theme]" />

    <xsl:call-template name="render_xml">
      <xsl:with-param name="head_title_color" select="$style/@titleColor" />
      <xsl:with-param name="head_title_size" select="$style/@titleSize" />
      <xsl:with-param name="head_desc_color" select="$style/@descColor" />
    </xsl:call-template>

  </xsl:template> 
```

# c++ - C++：让 VS2010 用“=”抱怨“If”

> ID：14464235
> 
> 赞同：3
> 
> 时间：2013-01-22T17:15:10.840
> 
> 标签：c++, visual-studio-2010, ide

如果我做类似的事情，VS2010 C++ 中有什么方法可以让 IDE 抱怨

```
if (somevar = 2)
{
    ... 
```

?

我尝试注意写==而不是=，但不仅使用C++，还使用VB和其他语言，它有时会发生。

有时需要很长时间才能找到与我的错误相关的错误。

我认为一个人真正想要编写一个 if 语句同时为变量分配一个新值（如我上面的示例）的可能性很小。这就是为什么我希望 VS2010 可能包含一个选项来告诉我可能存在的缺陷，但我还没有找到。

有没有这样的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:16:46.207

就在这里：

```
warning C4706: assignment within conditional expression 
```

只要确保您打开所有（不是完全在 MSVS 上）警告。( `project properties -> C/C++ -> General -> Warning Level`)

另一种方法是使用 YODA 条件 ( `2 == somevar`)，但这很难看。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:23:56.853

在解决方案资源管理器中右键单击项目名称，选择**Properties**，转到**Configuration Properties | C/C++ | 一般**，并将**警告级别**设置为**Level4**。您不会收到错误消息，而是收到警告：

> 警告 C4706：条件表达式内的赋值

# ajax - Mvc4 Ajax 调用打开新页面

> ID：14464236
> 
> 赞同：1
> 
> 时间：2013-01-22T17:15:10.510
> 
> 标签：ajax, jquery, asp.net-mvc-4

我查看了必须有 100 个帖子，但无法在我的新项目中使用它。我已经有了所有的脚本，它似乎是在 webconfig 中设置了简单的测试和不显眼的设置，仍然没有运气让 actionlink 替换 div 中的文本。Firebug 报告所有脚本加载成功，代码如下。如果有人可以提供帮助，将不胜感激，我会给你一杯虚拟啤酒！

**控制器：**

```
public ActionResult AjaxTest()
{
return Content("Ajax Test Successful");
} 
```

**看法：**

```
@{
ViewBag.Title = "User";
}

<h2>Users</h2>

@Html.ActionLink("Ajax Test", "AjaxTest", "Admin", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ajaxtest" })

<div id="ajaxtest"></div> 
```

**布局：**

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>@ViewBag.Title - My ASP.NET MVC Application</title>
<link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<meta name="viewport" content="width=device-width" />
@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")
</head>
<body>
<header>
<div class="content-wrapper">
<div class="float-left">
<p class="site-title">
<img src="~/Images/logo.jpg" /></p>
</div>
<div class="float-right">
<section id="login">
@Html.Partial("_LoginPartial")
</section>
<nav>
<ul id="menu">
<li>@Html.ActionLink("Home", "Index", "Home")</li>
<li>@Html.ActionLink("Upload Files", "UploadFiles", "Upload")</li>
<li>@Html.ActionLink("Upload History", "UploadHistory", "Upload")</li>
<li>@Html.ActionLink("Help", "Help", "Home")</li>
<li>@Html.ActionLink("Admin", "Home", "Admin")</li>
</ul>
</nav>
</div>
</div>
</header>
<div id="body">
@RenderSection("featured", required: false)
<section class="content-wrapper main-content clear-fix">
@RenderBody()
</section>
</div>
<footer>
<div class="content-wrapper">
<div class="float-left">
<p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
</div>
</div>
</footer>

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval")

@RenderSection("scripts", required: false)
</body>
</html> 
```

**呈现页面的 HTML：**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>User - My ASP.NET MVC Application</title>
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    <link href="/Content/site.css" rel="stylesheet"/>
<link href="/Content/buttons.css" rel="stylesheet"/>

    <script src="/Scripts/modernizr-2.5.3.js"></script>

</head>
<body>
    <header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title">
                    <img src="/Images/logo.jpg" /></p>
            </div>
            <div class="float-right">
                <section id="login">
                        <ul>
    <li><a href="/Account/Register" id="registerLink">Register</a></li>
    <li><a href="/Account/Login" id="loginLink">Log in</a></li>
</ul>

                </section>
                <nav>
                    <ul id="menu">
                        <li><a href="/">Home</a></li>
                        <li><a href="/Upload/UploadFiles">Upload Files</a></li>
                        <li><a href="/Upload/UploadHistory">Upload History</a></li>
                        <li><a href="/Home/Help">Help</a></li>
                        <li><a href="/Admin/Home">Admin</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="body">

        <section class="content-wrapper main-content clear-fix">

<h2>Users</h2>

<a Confirm="" HttpMethod="" InsertionMode="Replace" LoadingElementDuration="0" LoadingElementId="" OnBegin="" OnComplete="" OnFailure="" OnSuccess="" UpdateTargetId="ajaxtest" Url="" href="/Admin/AjaxTest?Length=5">Ajax Test</a>

<div id="ajaxtest"></div>
        </section>
    </div>
    <footer>
        <div class="content-wrapper">
            <div class="float-left">
                <p>&copy; 2013 - My ASP.NET MVC Application</p>
            </div>
        </div>
    </footer>

    <script src="/Scripts/jquery-1.7.1.js"></script>

    <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script>

</body>
</html> 
```

**网页配置：**

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:18:42.667

`Ajax.ActionLink`如果您使用的是 MVC 2 或更早版本（您呈现的 html 不显示它们），您应该不使用`Html.ActionLink`，并且您应该确保 MicrosoftAjax.js 和 MicrosoftMvcAjax.js 脚本已加载到您的页面中。

您正在寻找这样的输出：

`<a data-ajax="true" data-ajax-method="Get" data-ajax-mode="replace" data-ajax-update="#ajaxtest" href="/Home/About">Ajax Test</a>`

# xcode4 - 关闭我的应用程序后，它不会重新打开到 viewController 而是直接进入 First viewController

> ID：14464237
> 
> 赞同：0
> 
> 时间：2013-01-22T17:15:13.127
> 
> 标签：xcode4, build, viewcontroller

在按照 profGustin [https://www.youtube.com/watch?v=OHj7nQHqq2c的精彩教程成功完成我的第一个非常简单的应用程序之后](https://www.youtube.com/watch?v=OHj7nQHqq2c) 我在 tabController 之前添加了自己的 viewController（这是应用程序构建的开始方式），并在 tabController 上取消选中“是初始视图控制器”框后选中它。该应用程序很棒，在我的 iphone 上第一次构建和播放时运行良好，但是当我在 iphone 上关闭它并重新打开它时，它始终默认为 firstViewController，它是 tabController 的子项。我需要始终打开 ViewController。我也看不到 ViewController 的 .h 或 .m 页面。我确信这与一些委托编码有关，但在详尽搜索后找不到任何答案。外面的人可以发光吗？你可以猜到，我对此很陌生。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:59:42.083

您是否想在每次启动时从头开始重新启动应用程序？

如果是这种情况，那么您希望将info.plist 文件中的密钥`Application does not run in background`（也称为：）更改/添加到. 这将导致应用程序每次都从您的 rootview/initial 控制器启动。`UIApplicationExitsOnSuspend``YES`

# django - dotcloud 上的 API 密钥丢失

> ID：14464241
> 
> 赞同：1
> 
> 时间：2013-01-22T17:15:27.767
> 
> 标签：django, api-key, dotcloud

我已经在 Windows 上安装了 dotcloud.cli。我想将我的 django 应用程序部署到 dotcloud，但我需要一个 api 密钥才能继续设置。显然 api 密钥应该在我的 dotcloud 帐户中的设置下，但该页面没有 api 密钥。有谁熟悉 dotcloud 以及我在哪里可以找到密钥。我有两个帐户，但没有一个在指定位置有 api 密钥。我没有在 ubuntu 上尝试过，但那里似乎不需要 api 密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:43:30.600

1.  您可能不需要 API 密钥。新的 CLI 0.9 改为使用 OAuth，因此它会提示您输入用户名和密码一次。它不会存储这些，而是​​会获取一个可用于授权您的 CLI 命令的令牌。用于`pip install -U dotcloud`更新。

2.  如果你真的想继续使用旧的 CLI v0.4，API 密钥在这里：[https ://account.dotcloud.com/settings/](https://account.dotcloud.com/settings/)

请注意，您还可以将 API 密钥与 CLI 0.9 一起使用`dotcloud setup --api-key`，它会提示您密钥的位置。

为什么要使用 API 密钥？当您与不想共享用户名和密码的同事一起工作时，它会很方便。您可以在需要时撤销/更改您的 API 密钥。

也可以使用多个 dotCloud 帐户并通过环境变量在它们之间切换。请参阅[http://docs.dotcloud.com/guides/accounts/](http://docs.dotcloud.com/guides/accounts/)

# ios - WebKitErrors.h 在哪里？

> ID：14464242
> 
> 赞同：0
> 
> 时间：2013-01-22T17:15:31.293
> 
> 标签：ios, uiwebview

我正在尝试#include WebKitError.h 来访问它的常量，但是这些行中的任何一行都会生成一个文件未找到编译错误

```
#import <WebKit/WebKit.h>
#import <WebKit/WebKitErrors.h> 
```

从谷歌搜索和从这里获取的位置 [http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Miscellaneous/WebKit_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003839](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Miscellaneous/WebKit_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003839)

# xaml - MVVM - 绑定到深度嵌套字符串时的基础知识

> ID：14464243
> 
> 赞同：1
> 
> 时间：2013-01-22T17:15:33.990
> 
> 标签：xaml, mvvm, binding

我正在尝试将字符串绑定到我的文本框控件，但字符串被埋没了。

我要使用的代码是以下人为的示例

```
namespace BackUps.Logging.ViewModel
{
    class Obj1
    {
        public Obj2 obj2 { get; set; }
    }

    class Obj2
    {
        public Obj3 obj3 { get; set; }
    }

    class Obj3
    {
        public string Message 
        {
           get { return "Hello World"; }
        }
} 
```

我的虚拟机看起来像

```
namespace BackUps.Logging.ViewModel
{
    internal class LogsVM
    {
       public Obj1 Obj1 { get; private set; }

    public LogsVM()
    {
          Obj1 = new Obj1();
    }
} 
```

我的问题是，如何使用 Xaml 将 Message 绑定到 TextBlock？这就是我所拥有的：

```
 <Window x:Class="BackUps.Logging.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:myData ="clr-namespace:BackUps.Logging.ViewModel"
        Title="Logging Results" Height="350" Width="525">

    <Grid DataContext="{x:Type myData:LogsVM}">
        <TextBlock Text="{Binding Message}" />
    </Grid>
</Window> 
```

以上不起作用。也没有

```
<TextBlock Text="{Binding Obj1.Message}" /> 
```

或者

```
<TextBlock Text="{Binding Obj1.Obj2.Obj3.Message}" /> 
```

我知道这个例子很愚蠢，但是很多时候一个类的属性是一个 List 类型，而在那个 List 中是另一个等，并且知道如何深入到一个特定的属性，不管有多少层很重要，但我've得到无处找出如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:19:08.890

假设数据上下文是您的视图模型，则此方法有效：

```
<Window x:Class="WpfGridColumns.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" SizeToContent="WidthAndHeight"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:wpfGridColumns="clr-namespace:WpfGridColumns"
        d:DataContext="{d:DesignInstance Type=wpfGridColumns:LogsVM, IsDesignTimeCreatable=True}"
        >
    <Grid>
        <TextBox Text="{Binding Obj1.obj2.obj3.Message}" />
    </Grid>
</Window> 
```

您可以使用以下语法设置设计时数据：

`d:DataContext="{d:DesignInstance Type=wpfGridColumns:LogsVM, IsDesignTimeCreatable=True}"`

它在 VS 设计器中提供 Intellisense，并且在放置绑定时很有帮助。

我在后面使用了这段代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new LogsVM();
    }
}

internal class LogsVM
{
    public Obj1 Obj1 { get; private set; }

    public LogsVM()
    {
        Obj1 = new Obj1();
    }
}

public class Obj1
{
    public Obj1()
    {
        obj2=new Obj2();
    }
    public Obj2 obj2 { get; set; }
}

public class Obj2
{
    public Obj2()
    {
        obj3= new Obj3();
    }
    public Obj3 obj3 { get; set; }
}

public class Obj3
{
    public Obj3()
    {
        Message = "Test";
    }
    public string Message { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:19:11.293

一种方法是在视图模型中提供数据：

```
namespace BackUps.Logging.ViewModel
{
    internal class LogsVM
    {
       public Obj1 Obj1 { get; private set; }

        public LogsVM()
        {
            Obj1 = new Obj1();
        }

        public string GetMyString
        {
            get{ return Obj1.Obj2.Obj3.Message; }
        }
    }
} 
```

然后只需绑定到该字符串：

```
<TextBlock Text="{Binding GetMyString}" /> 
```

# google-maps - qooxdoo 移动版中的谷歌地图 v3 活动

> ID：14464245
> 
> 赞同：0
> 
> 时间：2013-01-22T17:15:34.990
> 
> 标签：google-maps, mobile, google-maps-api-3, qooxdoo

我有一个 qooxdoo 移动应用程序，我正在尝试实现一个谷歌地图。我看过 openlayers 的例子，但它不适合我的需要。我遇到的问题是附加到谷歌地图的事件没有被触发，或者至少没有到达我定义的处理程序。独立，在qooxdoo mobile之外，它工作正常。我直接从 inte _initialize 函数触发了 loadMapLibrary，并作为页面出现事件的侦听器。两次地图都显示得很好，但没有处理任何事件。

我知道我可以在 div 上触发 qx 事件，但是它们缺少我需要的 google.maps 属性，例如纬度/经度等。我做错了什么。

[http://demo.qooxdoo.org/current/demobrowser/#showcase~Maps.html](http://demo.qooxdoo.org/current/demobrowser/#showcase~Maps.html)的桌面示例似乎以我实现它的方式运行。我错过了什么吗？

```
_loadMapLibrary: function() {

        var self = this;
        var req = new qx.bom.request.Script();

        req.onload = function() {
            self._G = google.maps;
            self._createMap();
        }

        req.open("GET", self._mapUri);
        req.send();
    },

    _createMap: function() {
        var mapContainer = document.getElementById("googleMap");

        var chicago = new this._G.LatLng(41.850033, -87.6500523);
        var myOptions = {
            zoom: 7,
            mapTypeId: this._G.MapTypeId.ROADMAP,
            center: chicago
        //        draggable: false,
        //        panControl: false

        }
        this._map = new this._G.Map(mapContainer, myOptions);

        google.maps.event.addListener(this._map, 'click', this._startDrawing);
        google.maps.event.addListener(this._map, 'mousemove', this._mapMouseMove);
    //      document.addEventListener("touchmove",function(e) {
    //        //log('touchmove');
    //        e.preventDefault();
    //      });
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:45:31.813

我已经在应用程序的其他地方加载了用于地理编码的谷歌地图 api。

删除了 var req = new qx.bom.request.Script(); 等只是简单地使用api，一切正常。

# wpf - 定义数据上下文

> ID：14464247
> 
> 赞同：0
> 
> 时间：2013-01-22T17:15:41.853
> 
> 标签：wpf, user-interface, data-binding, mvvm, combobox

有人可以解释和更正以下 XAML 给定的`XML`文件来定义*`ComboBox ItemsSource`*吗？

XAML：

```
<ComboBox Name="cbConnection" DataContext="{Binding Source=c:\temp\ConnectionList.xml, XPath=DBConnection}" ItemsSource="{Binding XPath=ComboItem}" DisplayMemberPath="Key" SelectedValuePath="Value"> 
```

c:\temp\ConnectionList.xml:

```
<?xml version="1.0" encoding="utf-8" ?>    
<DBConnection>
<ComboItem>
    <Key>Computer-A</Key>
    <Value>Server=COMPA;Database=MyDB;Integrated Security=SSPI;</Value>
</ComboItem>
<ComboItem>
    <Key>Computer-B</Key>
    <Value>Server=COMPB\SQL2012STD;Database=MyDB;Integrated Security=SSPI;</Value>
</ComboItem>
</DBConnection> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:47:08.153

您不一定需要与 DataContext 混为一谈。只需适当地设置 ItemsSource。

1.  设置一个 XMLDataProvider，让它读取 xml 文件并向其他 WPF 元素提供数据。ItemsSource 应指向此提供程序。
2.  将结束标记添加到您的 XML
3.  修复您的 XPath 查询以查询名为 ComboItem 的所有节点，而不仅仅是顶级节点。

这是 XMLDataProvider，将其放入页面的资源字典中：

```
<XmlDataProvider x:Key="XmlData"
                 Source="c:\temp\ConnectionList.xml">
</XmlDataProvider> 
```

这是更正后的组合框：

```
<ComboBox x:Name="cbConnection"
          ItemsSource="{Binding Source={StaticResource XmlData}, XPath=//ComboItem}"
          DisplayMemberPath="Key"
          SelectedValuePath="Value" /> 
```

这是更正后的 XML：

```
<?xml version="1.0" encoding="utf-8" ?>    
<DBConnection>
    <ComboItem>
        <Key>Computer-A</Key>
        <Value>Server=COMPA;Database=MyDB;Integrated Security=SSPI;</Value>
    </ComboItem>
    <ComboItem>
        <Key>Computer-B</Key>
        <Value>Server=COMPB\SQL2012STD;Database=MyDB;Integrated Security=SSPI;</Value>
    </ComboItem>
</DBConnection> 
```

# ios - SVProgressHUD 与 CocoaPods 不同版本

> ID：14464249
> 
> 赞同：1
> 
> 时间：2013-01-22T17:15:48.793
> 
> 标签：ios, progress-bar, version, cocoapods

我正在尝试将库[SVProgressHUD](https://github.com/jdg/MBProgressHUD)与 CocoaPods 一起使用

```
$ cat Podfile
platform :ios
...
pod 'SVProgressHUD', '~> 0.8.1' 
```

它工作正常，但我看到某些功能不可用，例如`showProgress`
检查 .m 文件我实际上没有看到相应的实现。

`0.8.1`是这个库的最新版本。

这怎么解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:08:41.317

正如您在SVProgressHUD 的[标签](https://github.com/samvermette/SVProgressHUD/tags)`0.8.1`中看到的那样，该标签是在 3 个月前制作的。但是如果你看一下从那时起大约有 50 个[提交。](https://github.com/samvermette/SVProgressHUD/commits/master)

对于如何处理这个问题，您有两种选择。您可以要求 Sam 添加新标签，然后向 Cocoapods 提交新版本，这对每个人都有帮助。

或者，如果您需要立即修复而不是在您的`Podfile`with中定义 pod

```
pod 'SVProgressHUD', '~> 0.8.1' 
```

您可以使用：

```
pod 'SVProgressHUD', :head 
```

这将从 git repo 中提取最新的源。注意：如果 repo 以某种方式更改可能会破坏您的代码并且您运行一个新的`pod install`它会破坏。这就是我们鼓励库维护者和用户创建和使用 git 标签的原因。

# tfs - TFS 删除文件夹和递归删除

> ID：14464252
> 
> 赞同：1
> 
> 时间：2013-01-22T17:15:53.443
> 
> 标签：tfs, tf-cli

如果我删除 TFS 中的文件夹（使用 GUI 或 TF.exe）- 该文件夹下的所有内容都被标记为已删除。对文件夹进行递归删除有什么意义吗？我看到了使用

> -递归

切换是否需要模式匹配某些东西但对于完整文件夹删除有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:09:04.197

删除完整文件夹没有任何区别。正如您[在文档](http://msdn.microsoft.com/en-us/library/k45zb450.aspx)中看到的那样，-recursive 参数仅在与某些模式一起使用时才有意义。如果您不使用任何内容，结果将是相同的 - 所有文件和文件夹都标记为“已删除”。

# c++ - 传递多种数据类型的最佳方法

> ID：14464254
> 
> 赞同：2
> 
> 时间：2013-01-22T17:15:57.867
> 
> 标签：c++, plugins, frameworks

我正在编写一个插件框架，插件应该将数据传递给应用程序，我创建了一个插件放置数据的队列，但我希望插件可以传递多种数据类型（int、bool、char、.. .) 而且不止一个。

有什么想法或任何好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:18:11.597

如果可以选择使用[boost 库](http://www.boost.org/)，我强烈建议使用[`boost::any`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/any.html)：

```
boost::any a(1234567);
boost::any b(12.3456);
boost::any c(12345LL);
boost::any d(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:26:52.893

您可以使用字符并将它们转换为几乎任何东西。对于无法通过简单转换“获取”的数据类型，我建议使用 memcpy()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:24:56.187

使用模板和其他通用编程技术作为设计的一部分。

这是模板的入门： [http ://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)

最推荐使用 boost any，但从设计的角度来看，我认为比当前接受的答案更好的替代方案（如果你想最小化依赖关系）是以下非常简单的模板包装器实现，它接受并返回任何类型：

```
class IAnyType {}

template <class T>
class AnyType : public IAnyType
{
private:
    T value_;
public:
    AnyType(T value) : value_(value) {}

    void set(T value) { value_ = value; }

    T get() { return value_; }
}; 
```

然后，只需让您的队列保存 IAnyType 对象并将所有参数存储在 AnyType 对象中，然后再将其添加到队列中。您当然可以通过重载各种赋值运算符来稍微修饰一下，并使使用更加简单。

# iphone - iOS 设备上的手势识别

> ID：14464260
> 
> 赞同：1
> 
> 时间：2013-01-22T17:16:18.127
> 
> 标签：iphone, ios, uigesturerecognizer, gesture-recognition, iphone-privateapi

我正在研究 iOS 设备上的手势识别。[http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html)上的官方文档有助于了解手势识别的工作原理以及可以合并到应用程序中。我的问题是如何通过在后台运行的应用程序在任何地方（例如主屏幕或任何其他应用程序）识别手势。我对涉及私有 API 的解决方案持开放态度。在这种情况下，GraphicsServices 框架是否相关？例如，cydia 商店中的显示记录器应用程序能够做到这一点。

另一种可能的方法是使用手势识别设备，例如 Windows 的 kinect 或 Mac 的 Leap。

请发表您的建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:22:16.527

我想您正在寻求一种具有“全局手势”的方法，我认为您可以通过将手势识别器附加到 Window 或您的主 ViewController 来实现，这对于实现诸如用户从左边缘切换到对，你想显示一个隐藏的菜单（就像在 facebook 应用程序中一样）

如果没有越狱，我认为将 iPhone/iPad 连接到另一个手势设备，如 Kinect 或 Leap，你需要编写大量代码，首先你需要为界面编写代码，这样你就可以与 Kinect 通信，这假设您找到了一种方法或创建了一种将 kinect 插入 iOS 设备的方法，然后您需要编写代码来捕获 Kinect 提供的输入，最后手动“识别”手势。如果微软为此提供任何 SDK 会容易得多。

对于 Leap，这是一种类似的方法，但是他们有一个适用于 OS X 的 SDK，可能可以移植到 iOS

希望这能给你一些见解。

# java - Java弹出消息配置

> ID：14464265
> 
> 赞同：1
> 
> 时间：2013-01-22T17:16:27.327
> 
> 标签：java

我正在使用此代码来获取弹出消息：

```
ti.displayMessage("Message name: " + message_name
                  , "Message text: " + message_text
                  , TrayIcon.MessageType.INFO); 
```

如何在此弹出消息框中添加更多行？例如，第一行是`message_name`。然后下一行是`message_text`。但是如果我想添加更多行怎么办？像这样的东西：

```
ti.displayMessage("Message name: " + message_name
                  , "Message text: " + message_text
                  , "Message type: " + message_type
                  , "Message from: " + message_from
                  , TrayIcon.MessageType.INFO); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:27:40.013

您可以在第二个参数中执行以下操作：

```
 "Message text: " + message_text + "\nSecond message: " + message_text2 + ... AND SO ON 
```

请注意使用`\n`which 开始一个新行，如您所愿。

# php - 单选按钮的显示值

> ID：14464266
> 
> 赞同：0
> 
> 时间：2013-01-22T17:16:31.090
> 
> 标签：php, javascript

我怎样才能得到`$ObjName`不等于最后一个循环对象的值，而是选定的单选按钮。它会在 showit 文本字段内发生变化，但它仍然会给我外观结束的值。我想`$ObjIndex`等于文本字段中的内容。

### JavaScript 代码

```
<script>
function gtdoc()
{
    var itog = document.myform.tog;
    for(var i=0; i < document.myform.tog.length; i++)
    {
        if(document.myform.tog[i].checked)
        { 
            var iitog = document.myform.tog[i].value;
            document.myform.showit.value = iitog;
            document.getElementById("HiddenDoc2").style.display = 'block';
        }
    }
}
</script> 
```

### PHP 代码

```
while( $row1 = mysql_fetch_array($myQ1) ) 
{  
    echo "<td><input type='radio' name='tog[]' id='tog' onClick='gtdoc();'value='$row1[2]'>$row1[3]</input></td></tr>"; 
}
echo "<input type='text' name='showit' id='showit' value=''></input>";
$ObjName = $_POST['showit']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:19:52.623

改成`name='tog[]'`，`name='tog[aMeaningfulIndex]'`就可以访问了`$_POST['tog']['aMeaningfulIndex']`

# windows - 在 Windows 下托管 Sonatype Nexus

> ID：14464282
> 
> 赞同：1
> 
> 时间：2013-01-22T17:17:33.133
> 
> 标签：windows, maven, nexus

作为一个 Linux 极客，推荐或赞成在 Windows 下安装服务器的想法是违背我更好的判断的（而且，我想我也有偏见），但是，不幸的是，在这种情况下，我只需要征求你关于Sonatype Nexus 在 Windows 下的性能。

我可以看到大部分测试都是在不同风格的 Linux 下完成的。

我与 Nexus 和 Maven 打交道已经有好几年了，而且我对两者都很熟悉。

但是，我想知道您对以下方面的观察： - Nexus 在 Windows 下比在 Linux 下慢吗？

*   维护更复杂？

*   如果必须使用 Windows，您会建议在哪些版本的 Windows 下使用它以获得最佳性能？

*   有没有不同操作系统下的速度对比图？

*   任何想法在 Windows 下使用超过 500 GB 的存储库会表现如何？

# iphone - 从继承类调用方法

> ID：14464284
> 
> 赞同：0
> 
> 时间：2013-01-22T17:17:41.380
> 
> 标签：iphone, ios

我有两个 A 类和 B 类。在 A 类中，我使用：

```
@interface A : B 
```

在 B 类中，我有这行代码：

```
self.navigationItem.rightBarButtonItem = [UIBarButtonItem barItemWithImage:[UIImage imageNamed:@"Add-button-normal"]
                                                          highlightedImage:[UIImage imageNamed:@"Add-button-active"]
                                                                    target:self
                                                                    action:@selector(showPopoverUI:)]; 
```

我如何在 A 类中访问这些项目，我尝试了这行代码，但它不起作用：

```
self.navigationItem.rightBarButtonItem = [UIBarButtonItem barItemWithImage:[UIImage imageNamed:@"Add-button-normal"]
                                                          highlightedImage:[UIImage imageNamed:@"Add-button-active"]
                                                                    target:self.parentViewController
                                                                    action:@selector(showPopoverUI:)]; 
```

我得到了这个错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[B showPopoverUI:]: unrecognized selector sent to class 0x226308' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:23:01.493

当你想调用一个`super`类方法时，你需要调用`super`

而不是这个，你需要打电话`super navigationItem...`

或者，

```
self.navigationItem.rightBarButtonItem = [UIBarButtonItem barItemWithImage:[UIImage imageNamed:@"Add-button-normal"]
                                                          highlightedImage:[UIImage imageNamed:@"Add-button-active"]
                                                                    target:self
                                                                    action:@selector(showPopoverUI:)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:24:37.947

如果你继承你应该能够只使用 self 并调用该方法，就好像它是你自己的一样

尝试：

```
self.navigationItem.rightBarButtonItem = [UIBarButtonItem barItemWithImage:[UIImage imageNamed:@"Add-button-normal"] highlightedImage:[UIImage imageNamed:@"Add-button-active"]target:self action:@selector(showPopoverUI:)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:00:39.683

您在第二个示例中以 parentViewController 为目标，而应继续以 self 为目标。

# php - codeigniter rest 不能进行数据库查询？

> ID：14464286
> 
> 赞同：1
> 
> 时间：2013-01-22T17:17:45.707
> 
> 标签：php, sql, codeigniter, rest

我找不到错误。

我正在尝试使用 codeingniter 的 restserver：[https ://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

按照安装restserver中的描述实现它。

由于某种原因，我无法查询数据库：在浏览器中我收到错误消息

```
A PHP Error was encountered
Severity: Notice
Message: Undefined property: Image::$db
Filename: core/Model.php
Line Number: 51 
```

执行 $query 时错误似乎在模型中，由于某种原因 db 不正确？

有任何想法吗？

我实施了以下文件来进行调用：www.test.com/index.php/image/index

模型：application/models/image_model.php

```
<?php if (  ! defined( 'BASEPATH')) exit( 'No direct script access allowed');
class Image_model extends CI_Model {

    function __construct()
    {
        parent::__construct();
    }

    function getAll() {
        //$query = $this->db->get('images');    // Does not work. Active Record missing in libraries?
        $query = $this->db->query( 'SELECT * FROM images' );
        return $query->result(  );
    }
}
?> 
```

控制器：application/controllers/image.php

```
<?php
require(APPPATH . 'libraries/REST_Controller.php');

class Image extends REST_Controller
{
    public function index_get()
    {
        $this->load->model( 'image_model');
        $images = $this->image_model->getAll();
        $this->response($images);
    }

    public function index_post()
    {
        // Create a new book
    }
}
?> 
```

配置节数据库：application/config/database.php

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'foo';
$db['default']['password'] = 'bar';
$db['default']['database'] = 'testdrive';
$db['default']['dbdriver'] = 'mysql'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:30:08.307

`$autoload['libraries']`您是否通过 设置自动加载数据库库`application/config/autoload.php`？如果不是，您需要这样做：

打开你的`application/config/autoload.php`并找到：

```
$autoload['libraries'] = array(); 
```

并将其更改为：

```
$autoload['libraries'] = array('database'); 
```

如果您不想在每个页面请求上都使用数据库连接，您也可以手动加载数据库我的调用`$this->load->database();`

# cygwin - 使用 gradle 运行 grunt

> ID：14464287
> 
> 赞同：3
> 
> 时间：2013-01-22T17:17:53.003
> 
> 标签：cygwin, gradle, gruntjs

我在让 gradle 运行 grunt 时遇到了一些麻烦。我正在使用 Windows 和 cygwin，而 grunt 显然在路径中：

```
depressio@depressio /cygdrive/c/dev/project
$ which grunt
/cygdrive/c/Users/depressio/AppData/Roaming/npm/grunt 
```

所以，我做了这个 gradle 任务：

```
task execGrunt(type: Exec) {
    workingDir './ui'
    commandLine 'grunt'
} 
```

很简单。但是，当我运行它时，我得到了这个异常：

```
Caused by: org.gradle.process.internal.ExecException: A problem occurred starting process 'command 'grunt''
    at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:195)
    at org.gradle.process.internal.DefaultExecHandle.failed(DefaultExecHandle.java:325)
    at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:90)
    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66)
Caused by: java.io.IOException: Cannot run program "grunt" (in directory "C:\dev\project\ui"): CreateProcess error=2, The system cannot find the file specified
    at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:71)
    ... 1 more
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    ... 2 more 
```

这是为什么？当我自己去时`./ui`，我可以很好地运行 grunt（那里有一个 grunt.js）。

我发现的一些建议让我将 as 定义`commandLine`为`'cmd', '/c', 'grunt'`，但只是在编辑器中打开 grunt.js。此外，这在 UNIX 上不起作用，只要 PATH 设置正确，我希望此任务在 Windows (cygwin) 和 UNIX 上都有效。

显然，我错过了一些东西。

**更新：**

虽然这不适用于 UNIX，但我尝试使用`'grunt.cmd'`而不是简单地使用`'grunt'`. 这也不起作用，但给出了不同的堆栈跟踪：

```
Caused by: org.gradle.process.internal.ExecException: Process 'command 'grunt.cmd'' finished with non-zero exit value 3
    at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:363)
    at org.gradle.process.internal.DefaultExecAction.execute(DefaultExecAction.java:39)
    at org.gradle.api.tasks.Exec.exec(Exec.java:66) 
```

（还有一堆，但这是最低的“由”引起的）

它似乎至少执行了 grunt，但是，我的咖啡脚本被编译成 js 并且出现了这一行这一事实证明了这一点：`Running "clean:0" (clean) task`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:04:40.173

我`grunt`在 Windows 中使用，当我应该使用`grunt.cmd`. 一旦我这样做了，并找出了咖啡失败的原因（为什么 grunt 失败了），它似乎工作正常。

但是，`grunt.cmd`仅适用于 Windows。我确实找到[了这个问题和答案](https://stackoverflow.com/questions/11235614/how-to-detect-the-current-os-from-gradle)，它提供了一种检测操作系统的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:49:15.743

编辑：[这篇文章](http://naleid.com/blog/2013/01/24/calling-gruntjs-tasks-from-gradle/)非常及时，比使用下面的旧答案要好得多。

Gradle 开发人员可能会因此而讨厌我，但我不使用该`Exec`任务，而是这样做：

```
task execGrunt {
    doLast {
        println "grunt".execute().text
    }
} 
```

有关更多信息，请参阅[外部流程的 Groovy 文档](http://groovy.codehaus.org/Executing+External+Processes+From+Groovy)。顺便说一句，你最近失败的原因是 Grunt 返回了一个退出代码，说它失败了（非零）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-12T17:25:41.340

你可以使用这个 gradle 插件： [https ://plugins.gradle.org/plugin/com.moowork.grunt](https://plugins.gradle.org/plugin/com.moowork.grunt)

# android - Android - 如何在语音中输入并将其转换为 android 中的文本

> ID：14464289
> 
> 赞同：1
> 
> 时间：2013-01-22T17:17:59.280
> 
> 标签：android, android-layout, voice-recognition

我正在尝试链接[http://viralpatel.net/blogs/android-speech-to-text-api/](http://viralpatel.net/blogs/android-speech-to-text-api/)上给出的内容， 但每次它都会抛出以下异常。

> android.content.ActivityNotFoundException: 没有找到处理 Intent { act=android.speech.action.RECOGNIZE_SPEECH (has extras) }

我应该怎么办 ？

谢谢你。

# java - 如何从 WSDL 创建包含多个服务的 WebService？

> ID：14464291
> 
> 赞同：1
> 
> 时间：2013-01-22T17:18:11.903
> 
> 标签：java, eclipse, web-services, soap, cxf

我在使用两个服务从 WSDL 创建 Web 服务时遇到了麻烦。它来自带有 Apache CXF 实现的 Eclipse IDE。

当我在 WSDL 中获得一项服务时，我可以从 WSDL 创建 Web 服务和客户端。

Eclipse 仅提供一个选项来在 WSDL2Java 配置时间下创建服务名称。

请建议我，如何继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-25T15:21:59.113

我可以建议您的最好和最简单的方法是通过 Maven 插件生成服务。这个插件也被命名为 wsdl2java 并且可以正常工作。我也尝试过使用 Eclipse 从 Java 类中的 WSDL 创建服务，但它无法正常工作。使用 maven 中的 wsdl2java 插件，您可以更深入地控制创建服务类的过程。这个[链接](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html "wsdl2java CXF Maven 插件")可以帮助你做到这一点。它看起来像这样：

```
<plugin>
  <groupId>org.apache.cxf</groupId>
  <artifactId>cxf-codegen-plugin</artifactId>
  <version>${cxf.version}</version>
  <executions>
    <execution>
        <id>generate-sources</id>
        <phase>generate-sources</phase>
        <configuration>
            <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
            <wsdlOptions>
                <wsdlOption>
                    <wsdl>${basedir}/src/main/resources/myService.wsdl</wsdl>
                </wsdlOption>
            </wsdlOptions>
        </configuration>
        <goals>
            <goal>wsdl2java</goal>
        </goals>
    </execution>
  </executions>
</plugin> 
```

就像一个hinwise：如果你不熟悉maven，试试吧。这比你想象的要容易！并为您节省大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T23:45:59.177

移除第二个服务并生成客户端，然后移除第一个服务并还原第二个服务，然后再次生成客户端。

在运行时，您需要传递服务端点

# html - 使用不同分辨率的苹果触摸图标？

> ID：14464292
> 
> 赞同：0
> 
> 时间：2013-01-22T17:18:15.193
> 
> 标签：html, css, retina-display, apple-touch-icon

目前我正在使用以下标签将 apple-touch-icon.png 链接到我的网站

```
<link rel="apple-touch-icon" href="/apple-touch-icon.png"> 
```

它的分辨率为 57x57 像素。但是，现在我想为具有视网膜显示器的 iphone 和 ipad 用户支持更高分辨率的图标。怎么可能达到。我尝试用谷歌搜索这个问题，但没有发现任何有用的东西。你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:21:45.520

[https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

```
<link rel="apple-touch-icon" href="touch-icon-iphone.png" />
<link rel="apple-touch-icon" sizes="72x72" href="touch-icon-ipad.png" />
<link rel="apple-touch-icon" sizes="114x114" href="touch-icon-iphone-retina.png" />
<link rel="apple-touch-icon" sizes="144x144" href="touch-icon-ipad-retina.png" /> 
```

# jquery - jquery获取光标所在的元素

> ID：14464293
> 
> 赞同：15
> 
> 时间：2013-01-22T17:18:19.803
> 
> 标签：jquery, jquery-plugins

我正在使用 javascript 和 jquery 为我的网站构建一个拆分测试工具。现在，当光标经过预览框中的元素时，我想为每个要拆分的元素显示一个小悬停菜单。有没有可能做这样的事情？我做了这样的事情

```
$('body').hover(function(event){
    console.log(event.target.nodeName);
    // to see if it's showing up the element   
}); 
```

但它只触发一次。因为我不想使用点击，因为我还想在锚元素上显示菜单我有点迷路

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-05-08T22:30:38.303

如果您使用的是键盘而不是鼠标：不是 jQuery，对于感兴趣的人来说只是纯 JavaScript：

```
getSelection().getRangeAt(0).commonAncestorContainer.parentNode 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-22T17:19:44.130

你可以用`document.elementFromPoint`这个。

```
var element = document.elementFromPoint(x, y); 
```

例如：

```
$('body').hover(function(event){
    var el = document.elementFromPoint(event.pageX, event.pageY);
}); 
```

文档：[https ://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-22T17:27:27.523

我相信您想在`mousemove`这里使用事件而不是`hover`事件。

```
$('body').mousemove(function(evt){
    console.log(evt.target);
}); 
```

请记住要`mousemove`极其小心地使用。

[在此处查看示例。](http://jsfiddle.net/zs45B/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-05T15:13:51.907

有 3 种方法可以做到这一点：

1.  像这样的东西：

    ```
    $('body').on('mousemove', function() {
     console.log($(':hover').last().attr('name'));
    }); 
    ```

2.  出于调试目的，您可以直接输入 chrome 控制台`$(':hover').last()` ，而不是将鼠标悬停在您想要的位置，然后按 Enter 运行此控制台命令。

3.  如果你想不断地使用它，我建议不要使用 mousemove 事件。使用类似的东西

    ```
    $('.one_of_your_trigger_element').on('mouseenter', function() {
     var hover_element = $(':hover').last();
     ...
    }); 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:38:59.167

试试下面的编码，它会帮助你...

```
 <body onMouseMove="javaScript:mouseEventHandler(event);">

    <script>
    function mouseEventHandler(mEvent) {
// Internet Explorer
                alert(mEvent.srcElement.nodeName); //Display Node Name
                alert(mEvent.srcElement.id); //Display Element ID
//FireFox
                alert(mEvent.target.nodeName);//Display Node Name
                alert(mEvent.target.id);//Display Element ID
            }
    </script> 
```

# c++ - OpenCV 编译错误

> ID：14464295
> 
> 赞同：0
> 
> 时间：2013-01-22T17:18:23.483
> 
> 标签：c++, opencv, compiler-errors, pkg-config

我最近在笔记本电脑上安装了 OpenCV。安装 OpenCV 2.4.2 后，我尝试运行并编译一个基本程序来加载和显示图像。代码如下。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main( int argc, char** argv )
{
if( argc != 2)
{
 cout <<" Usage: display_image ImageToLoadAndDisplay" << endl;
 return -1;
}

Mat image;
image = imread(argv[1], CV_LOAD_IMAGE_COLOR);   

if(! image.data )                              
{
    cout <<  "Could not open or find the image" << std::endl ;
    return -1;
}

namedWindow( "Display window", CV_WINDOW_AUTOSIZE );
imshow( "Display window", image );                   

waitKey(0);                                          
return 0;
} 
```

该程序在他们的网站上给出。然后对于编译命令，我使用了以下命令：

```
g++ `pkg-config opencv --cflags` p1.cpp  -o p1 `pkg-config opencv --libs` 
```

编译失败，结果是：

```
Package opencv was not found in the pkg-config search path.

Perhaps you should add the directory containing `opencv.pc'
to the PKG_CONFIG_PATH environment variable

No package 'opencv' found

Package opencv was not found in the pkg-config search path.

Perhaps you should add the directory containing `opencv.pc'
to the PKG_CONFIG_PATH environment variable

No package 'opencv' found

p1.cpp:1:33: fatal error: opencv2/core/core.hpp: No such file or directory
compilation terminated. 
```

我哪里错了？

# iphone - 为什么我不能在 Xcode 中更改 mapView

> ID：14464296
> 
> 赞同：0
> 
> 时间：2013-01-22T17:18:23.613
> 
> 标签：iphone, objective-c, mkmapview

在我的应用程序中，我添加了一个 MapView。此时我想更改 xCode (IB) 中的一些属性。我看到了一把锁，没有发生任何变化。可能是什么情况？

其次，无论如何我都在问，我想将视图更改为最大化。我真的很想放大用户的位置。Ricght 现在（因为我在荷兰）我看到了欧洲的一半。非常欢迎提示和技巧。

问候，

阿德里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:50:07.597

缩放用户位置：

```
- (IBAction)showCurrentLocation:(id)sender {
self.mapview.showsUserLocation=YES;
self.mapview.delegate = self;
[self.mapview setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:02:56.550

检查**File Inspector中的****Localization Locking**选项，您可能在那里选择了一个选项，该选项阻止您更改（某些）属性。

 **![在此处输入图像描述](../Images/7d88bab646c9bf96d0ec01638d0a7118.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:55:47.003

创建一个区域，在用户当前位置的每一侧显示一公里

```
 MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(MapView.userLocation.coordinate, 2000, 2000); 
 MKCoordinateRegion adjustRegion = [self.mapview regionThatFits:region];
 [self.mapview setRegion:adjustRegion animated:YES]; 
```**

# c++ - 如何使用函数指针或虚函数来允许其他程序员定义函数的实现？

> ID：14464297
> 
> 赞同：0
> 
> 时间：2013-01-22T17:18:26.153
> 
> 标签：c++, function, visual-c++

我正在编写一个执行一组基本操作的程序，但允许用户填写被调用的特定函数（他们在编译之前选择这些函数）。例如，我的程序可能会调用一个函数`filter(input,&output)`，但用户可以编写自己的过滤器。

我读到的可以解决这个问题的方法是函数指针和虚函数。看起来我可以按照以下方式做一些事情

```
int (*pt2Filter)(float,&float) = NULL;
int IIRFilter(float input, float &output);
pt2Filter=&IIRFilter; 
```

对于函数指针。但这并不能让我跟踪过滤器中的内部状态。

或者我可以创建一个`myClass`带有虚`filter`函数的类，然后用户将创建一个`IIR`继承`myClass`并覆盖该`filter`函数的类。

```
class myClass
{
    virtual void Filter(float input, float &output);
    ...
};

class IIR : public myClass
{
    float stateVariable;
    virtual void Filter(float input, float &output);
}

void IIR::Filter(float input, float &output)
{ //IIR filter done here } 
```

我想我的问题是如何在不知道一个`IIR`类甚至存在的情况下从我的程序中调用过滤器函数？

或者，如果我完全错了，`Filter`当我的目标是 1 时，我该如何调用我的函数：让用户定义他们想要的任何过滤器。2：不允许用户更改我的源代码

**更新** 这可能并不像我最初想象的那么困难。我创建了一个头文件，用户将在其中说出他们希望 Filter 类使用该行调用哪个函数

```
//User types this into "FunctionImplementations.h"
#include "IIR.h"
typedef IIR FilterImplementation;
//then I just type
#include "FunctionImplementations.h"
FilterImplementation.filter(); //Implements IIR classes filter function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:30:22.673

有几种方法可以实现这种多态性。

主要问题是您是否需要*编译时*多态行为或*运行时*多态行为。在第一种情况下，解决方案通常是定义一个函数（或类）模板来执行您的通用工作，并使用通用代码调用的可调用对象的类型对其进行参数化，以完成工作的自定义部分：

```
// This is how you would define your generic procedure
template<typename F> void do_something(F f, ...) 
{ 
    ...
    f(...); 
    ... 
}

// This is how you would use it...
void my_func(...) { ... };
do_something(&my_func, ...); // with a function pointer

do_something([] (...) { ... }, ...); // with a lambda

struct my_functor { operator void () (...) { ... } };
do_something(my_functor(), ...); // with a functor 
```

如果定义自定义行为的对象类型仅在*运行时*确定，那么您有两种可能性：要么`std::function<>`用于封装回调，要么使用虚函数方法。我个人更喜欢前者，因为它不会强迫您仅仅为了实现动态多态性而创建继承层次结构。

这是您使用`std::function<>`对象的方式：

```
void my_func1(int, int) { ... }
void my_func2(int, int) { ... }

std::function<void(int, int)> fxn = &my_func1;
fxn(2, 3);
...
fxn = &my_func2;
fxn(3, 4);
...
fxn = [] (int x, int y) { ... };
fxn(4, 5) 
```

这是您可以利用它来定义通用过程的方式：

```
void do_something(std::function<void(int, int)> f, ...)
{
    ...
    f(3, 4);
    ...
} 
```

此时，您可以调用`do_something()`任何可以分配给的`std::function`对象（即任何具有兼容签名的可调用对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:28:07.517

如果您需要在**编译时**完成此操作，您可以考虑使用模板而不是继承。一个例子：

```
template<typename Derived> // Derived is having DoActualWork
class WorkerBase
{
public:
   DoWork()
   {
       ((Derived*)this)->DoActualWork();
   }

};

class MyWorker : public WorkerBase<MyWorker>
{
public:
   void DoActualWork() {...}
}; 
```

这`MyWorker`是从类模板继承， `WorkerBase`将自身作为类型参数传递给模板。从`this`to的转换`Derive`是必要的，并且会起作用，因为**这个**对象实际上是派生类。

请注意，这是使用类的编译时多态性技术之一。通过模板，您可以通过其他方式拥有这样的功能。`std::map`可以用`std::greater`！

# javascript - 从页面重定向到子域

> ID：14464299
> 
> 赞同：0
> 
> 时间：2013-01-22T17:18:29.240
> 
> 标签：javascript, html, iis, redirect

寻找最透明的方式（对于访问者）从 www 站点上的页面重定向到子域。IIS 是服务器。例子：

`www.mywebsite.com/cars`--->`cars.mywebsite.com`

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:25:48.563

好吧，如果你想要 javascript 中的解决方案，那么它很容易。只需找出第一个加载的 JS 文件并将其添加到顶部

```
if(document.url == "www.mywebsite.com/cars")
window.location("cars.mywebsite.com"); 
```

刚刚提到，因为您在标签中提到了 javascript 和 html ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:45:12.020

Javascript 可能是一个有点笨拙的解决方案。

我建议你在服务器端使用一些更容易维护的东西。

*   创建“汽车”目录
*   在“汽车”目录中创建一个空的 web.config

将以下内容放入 web.config 文件中

```
<?xml version="1.0"?>
<configuration>
<system.webServer>
  <httpRedirect enabled="true" destination="http://cars.mywebsite.com" httpResponseStatus="Permanent" />
</system.webServer>
</configuration> 
```

这可能在 Visual Studio 的 Web 服务器中不起作用，但在 IIS 中应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:29:07.783

如果您正在 IIS 服务器中寻找重定向，答案可能在这篇文章中：

[如何在 IIS 中重定向 URL 路径？](https://stackoverflow.com/questions/888325/how-to-redirect-a-url-path-in-iis)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T17:29:43.503

imho htaccess 将在将任何数据发送到客户端之前重定向用户。

示例：在根目录中，您希望用户定向 - 从 - 放置一个名为 .htaccess 的文件，其内容为：

```
#Redirect old file path to new file path
Redirect /olddirectory/oldfile.html http://cars.example.com/newdirectory/newfile.html 
```

来源： http: [//kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F](http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F)

希望对库尔特有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:33:51.360

如果您正在寻找单一解决方案 - 那么@Riju 的答案是一个很好的答案。

但是对于更通用的解决方案， IIS 的[URL 重写器](http://www.iis.net/downloads/microsoft/url-rewrite)非常强大，可以让您创建类似这样的规则以及更多情况。

# java - 如何调用 onCreateView 方法或刷新我的片段？

> ID：14464302
> 
> 赞同：5
> 
> 时间：2013-01-22T17:18:41.777
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我想在下面的代码中刷新或调用 onCreateView。我有一个上下文菜单来删除一个项目，在我想用新项目刷新片段之后.. 非常感谢！

```
 public class ItemDetailFragmentBlackBoard extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle  savedInstanceState) {
                ....
               return rootView;
         }

     /** Menu on LongClick */
    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo)  {
        super.onCreateContextMenu(menu, v, menuInfo);
        menu.setHeaderTitle("Context Menu");
        menu.add(0, v.getId(), 0, "Delete");
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        if(item.getTitle()=="Delete"){
            String status="";
            AdapterContextMenuInfo info = (AdapterContextMenuInfo)item.getMenuInfo();
            int posizione = info.position;
            String[] messaggioDaCancellare= S.getMessaggiInfo().get(posizione); 
            try{
                JSONObject del =ProxyUtils.proxyCall("deleteMessage",messaggioDaCancellare[4]);
                status=del.getString("status");
            } catch (Exception e) {
                Log.i("Eccezione", e.toString());
            }
            Activity activity= getActivity();
            if(status.equals("OK")){

                       **HERE......I would like to refresh my fragment o recall onCreateView method...**

                Toast.makeText(activity, "Delete avvenuta", Toast.LENGTH_SHORT).show();
            }else {
                Toast.makeText(activity, "Delete non riuscita", Toast.LENGTH_SHORT).show();
            }
        } else {return false;}  
        return true;  
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:27:42.437

最好在 onCreateView 函数中定义一个像简单的线性布局（称为屏幕）一样的 viewGroup，并将其填充到像 init() 这样的函数中。每次您想重新创建视图时，只需删除所有 linearLayout 的子项并调用 init()。

你做得很好，但它比我的简单解决方案贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:17:47.970

我解决了我的问题，用自己来补充我的碎片

代码是：

```
{

    arguments.putString(ItemDetailFragmentBlackBoard.ARG_ITEM_ID, id);
    ItemDetailFragmentBlackBoard fragment= new ItemDetailFragmentBlackBoard();
    fragment.setArguments(arguments);
    getFragmentManager().beginTransaction().replace(R.id.item_detail_container,   fragment).commit();   
} 
```

ItemDetailFragmentBlackBoard 是我的片段。我正在从 listView 中删除一个项目，在我删除它之后，我用上面的解码代码重新调用我的片段，这样我就不会刷新了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T08:19:12.417

```
public class ItemDetailFragmentBlackBoard extends Fragment {
    public static View _rootView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if (_rootView == null || _isRefreshDashboard) {
        _rootView = inflater.inflate(R.layout.ItemDetailFragmentBlackBoard, container, false);

        // your code can't be change without refreshFragment in here..

        _isDashboardRefresh = false;
    }
} 
```

// 全局变量

```
public abstract class CommonBase extends AppCompatActivity {
    public static boolean _isRefreshDashboard;
} 
```

//刷新你的片段

```
CommonBase._isRefreshDashboard = true; 
```

# python - 使用请求库（python）发布到论坛

> ID：14464304
> 
> 赞同：1
> 
> 时间：2013-01-22T17:18:42.587
> 
> 标签：python, forms, post, python-requests, phpbb3

我正在尝试使用[请求](http://docs.python-requests.org/)来将消息发布到 phpBB3 论坛。这是一个更大项目的一部分，这部分应该用来自数据库的几千个帖子填充论坛。遍历论坛时，我还使用[lxml](https://github.com/lxml/lxml/)来解析页面。

我的问题实际上是在论坛上发帖。首先我登录：

```
payload = {'username':'user', 'password':'password', 'login':'login', 
            'redirect':'index.php''}
url = 'http://test.com/test_forum'
q = s.post('http://test.com/test_forum/ucp.php?mode=login', data=payload)
a = s.get('http://test.com/test_forum') 
```

在此之后，我可以看到我的脚本已登录。然后我使用 lxml 遍历论坛到我想要发布的主题/线程，并使用请求来获取发布页面，之后我再次使用 lxml 来获取`<input>`值从页面并将它们放入字典中。然后我尝试以与登录时类似的方式发布它，但没有任何反应：

```
#This is after traversing the forum using lxml to get to the post page.
a = s.get('%s%s' % (url, links[0][1:]))
#a contains the response (posting page)

tree = html.fromstring(a.text)
#collect values from inputs in the form to submit along with message
form_token = tree.xpath('//input[@name="form_token"]/attribute::value')
subject = tree.xpath('//input[@name="subject"]/attribute::value')
topic_cur_post_id = tree.xpath('//input[@name="topic_cur_post_id"]/attribute::value')
lastclick = tree.xpath('//input[@name="lastclick"]/attribute::value')
creation_time = tree.xpath('//input[@name="creation_time"]/attribute::value')
fileupload = tree.xpath('//input[@name="fileupload"]/attribute::value')

data = {'form_token':form_token, 'subject':subject, 
'topic_cur_post_id':topic_cur_post_id, 'lastclick':lastclick, 
'creation_time':creation_time,
        'fileupload':fileupload, 'message':'TEST MESSAGE 2'}

q = s.post('http://vaultlog.frih.net/test_forum/posting.php?mode=reply&f=9&t=4',
             data=data) 
```

当我检查使用哪个页面加载`print q.text`时，我再次看到它是同一个发布页面。

我冒昧地使用 WireShark 来查看数据包的不同之处。首先，我脚本的 POST 消息： http: [//pastebin.com/sRp9Zxme](http://pastebin.com/sRp9Zxme)

当我使用 Firefox 发布消息时生成的消息：http: [//pastebin.com/QSNawBRM](http://pastebin.com/QSNawBRM)

似乎主要区别在于自然发布消息会给 POST 一个`content-type: multipart/form-data;`标题，而我的脚本的标题是`Content-Type: application/x-www-form-urlencoded`.

想到的另一个想法是我没有发布所有必填字段。我没有提交任何复选框等，但我提交了所有字段，包括隐藏的字段。这是表单域的 HTML：http: [//pastebin.com/U12BXZWF](http://pastebin.com/U12BXZWF)

为了使用请求发布到论坛，我必须做什么？如果这有任何改变，我还必须将图像作为附件发布。

# jsf - JSF 2 和 IceFaces 3 迁移后的页面布局

> ID：14464310
> 
> 赞同：1
> 
> 时间：2013-01-22T17:18:55.853
> 
> 标签：jsf, jsf-2, icefaces

我刚刚完成了从 JSF 1.2 到 JSF 2 和 IceFaces 1.8 到 Icefaces 3 的迁移，我注意到页面布局并不完全正确。有没有办法使 JSF 2 布局呈现与 JSF 1.2 布局相同？

谢谢

# javascript - 从控制器 MVC 在新窗口中返回视图

> ID：14464316
> 
> 赞同：0
> 
> 时间：2013-01-22T17:19:04.607
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我正在尝试在新窗口中接收提交的帖子

```
<input class="btnText" id="PreviewURL" value="Preview" type="submit" /> 
```

在 jQuery 中我有这个

```
$('#PreviewURL').click(function () {
  $('#IsPreview').val(true);
  window.open(this.href);
}); 
```

当控制器返回他的视图时，不是在新窗口中打开它，而是在同一个窗口中打开它，新窗口显示为空

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:49:34.867

打开一个新窗口`this.href`将对您发送的 href 执行获取。如果您需要`POST`数据，那么您最好打开一个新页面并将查询字符串中所需的参数传递给它，并在该页面加载时让它执行 AJAX 发布并将其加载到它自己的内容中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:23:36.850

我想通了，有了这个功能，它可以完美地工作，

`$('#PreviewURL').click(function () { document.forms["articleForm"].action = location.protocol + "//" + location.host + "Action"; document.forms["articleForm"].target = "_blank";});`

# android - Parcelable 还是 Singleton？

> ID：14464321
> 
> 赞同：1
> 
> 时间：2013-01-22T17:19:11.120
> 
> 标签：android, singleton, parcelable, application-singleton

我正在从事一个项目，该项目涉及我必须与构成应用程序的所有活动共享一个对象数组列表。直到最近，我通过实现 parcelable 接口在活动之间传递列表。这方面的一个例子如下所示：

菜单项类：

```
ublic class MenuItem implements Parcelable {

private String name;
private double price;
private int qty;
private String info;

public MenuItem(String name, double price) {
    super();
    this.name = name;
    this.price = price;
}
public MenuItem() {
    // TODO Auto-generated constructor stub
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public double getPrice() {
    return price;
}
public void setPrice(double price) {
    this.price = price;
}

public int getQty() {
    return qty;
}
public void setQty(int qty) {
    this.qty = qty;
}
public String getInfo() {
    return info;
}
public void setInfo(String info) {
    this.info = info;
}
@Override
public String toString() {
    return name;
}

//Parcelable methods.
public static final Parcelable.Creator<MenuItem> CREATOR = new Parcelable.Creator<MenuItem>() {

    @Override
    public MenuItem createFromParcel(Parcel source) {
        return new MenuItem(source);
    }

    @Override
    public MenuItem[] newArray(int size) {
        return new MenuItem[size];
    }
};

public MenuItem(Parcel source) {
    this();
    readFromParcel(source);
}

private void readFromParcel(Parcel source) {
    name = source.readString();
    price = source.readDouble();
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(name);
    dest.writeDouble(price);
} 
```

}

订单类-我将其更改为单例（保存菜单项列表）

```
public class Order implements Parcelable {

private int covers;
private int table;
private ArrayList<MenuItem> items;

public Order(){
    super();
    this.items = new ArrayList<MenuItem>();

}

public static final Parcelable.Creator<Order> CREATOR = new Parcelable.Creator<Order>() {

    @Override
    public Order createFromParcel(Parcel source) {
        return new Order(source);
    }

    @Override
    public Order[] newArray(int size) {
        return new Order[size];
    }

};

public Order(int covers, int table) {
    super();
    this.covers = covers;
    this.table = table;
    this.items = new ArrayList<MenuItem>();
}

public int getCovers() {
    return covers;
}

public void setCovers(int covers) {
    this.covers = covers;
}

public int getTable() {
    return table;
}

public void setTable(int table) {
    this.table = table;
}

public ArrayList<MenuItem> getItems() {
    return items;
}

public void setItems(ArrayList<MenuItem> items) {
    this.items = items;
}

//add to order
public void addToOrder(MenuItem m){
    items.add(m);
}

//remove from order
public void removeFromOrder(MenuItem m){
    items.remove(m);
}

public Order(Parcel source) {
    this();
    readFromParcel(source);
}

@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    // TODO Auto-generated method stub
    dest.writeInt(covers);
    dest.writeInt(table);
    dest.writeTypedList(items);

}

private  void readFromParcel(Parcel source) {
    // TODO Auto-generated method stub
    covers = source.readInt();
    table = source.readInt();
    items = new ArrayList<MenuItem>();
    source.readTypedList(items,  MenuItem.CREATOR);

} 
```

}

这就是我在活动之间传递数据的方式：

```
myOrderBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(v.getContext(), "myOrderBtn", Toast.LENGTH_SHORT).show();
            Intent i = new Intent(v.getContext(), ViewOrderActivity.class);
            i.putExtra("data", order);
            if(!saved){
            saveOrderState();
            }
            startActivity(i);

        }
    }); 
```

并以这种方式检索：

```
public void getOrderData(){
    Intent i = getIntent();
    if(i != null && i.hasExtra("data")){
        order = i.getParcelableExtra("data");
        Toast.makeText(this.getApplicationContext(), "STARTERS recieved order object, covers: " + order.getCovers() + " table no: " + order.getTable() + " order size: " + order.getItems().size(), Toast.LENGTH_SHORT).show();

        if(order.getItems().size() == 0){
            //Toast.makeText(this.getApplicationContext(), "No items added to your order...", Toast.LENGTH_SHORT).show();
        }else{
            for(int j = 0; j != order.getItems().size(); j++){
                dishItems.add(order.getItems().get(j));
            }
        }

        saved = false;

    }
} 
```

今天我学习了使用单例来全局访问数据，我想知道切换到这种数据访问方式是否是个好主意？就代码而言，它似乎更容易控制并且更整洁。

我很想知道您对此有何看法。这里的这个链接是我想要实现的模式：

[http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

**我应该提到，该项目是我课程学习的一部分。我必须在几周内提交我的代码，所以我正在寻找提高效率的最佳方法。因此，如果您也发现任何看起来有问题的地方，请告诉我！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:38:45.907

几乎没有理由使用 Parcelable 在单个 Linux 进程内移动对象。我建议让您的菜单成为自定义应用程序对象的静态成员，如下所示：

```
public class MyApplication extends Application {
    private static final List<MenuItem> menu;
    static {
        List<MenuItem> l = new ArrayList<MenuItems>();
        l.add(new MenuItem(...));
        ...
        menu = Collections.unmodifiableList(l);
    }

    ...

    public List<MenuItems> getMenu() { return menu; }

    ....

} 
```

确保列表是不可变的，这样您就不必担心并发问题。

在您的清单中：

```
<application
    android:name=".MyApplication" 
```

...并通过以下方式访问它：

```
List<MenuItem> menu = ((MyApplication) getApplication()).getMenu(); 
```

# javascript - 单击时从数据库加载数据 + Zend Framework

> ID：14464325
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:19:27.983
> 
> 标签：javascript, database, zend-framework

当我点击一个链接时，我想从数据库中加载数据。我的链接是来自数据库的数据。在我看来，这就是我的做法：

```
<div id="wijken">
              <ul>
            <?php foreach($this->districts as $districts) : ?>
              <li><a><?php echo $this->escape($districts->wijk); ?></a></li>       
            <?php endforeach; ?>
              </ul>
          </div> 
```

这是它的外观： ![在此处输入图像描述](../Images/4124effdb46a8c393e662556dfcb1153.png)

现在我希望当您单击一个链接时，我可以加载数据并根据您单击的链接从数据库中显示数据。我怎样才能做到这一点？

我用javascript试过了。是否可以通过 ajax 调用加载数据到控制器中的操作？

我的JavaScript：

```
$("#wijken ul li a").click(function(e){  

var wijk = ($(this).text());

$.ajax({ 

  type: "POST",
  url: "index/test",                    
  data: "wijk",                        

  dataType: 'json',                
  success: function(rows)          
  {
      alert("worked!");

  }, 
  error: function(error){
      alert("didn't worked!");
  }

  }); 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:52:48.187

这个答案可以帮助你

[https://stackoverflow.com/a/8489447/949273](https://stackoverflow.com/a/8489447/949273)

这是一个使用 Zend Framework 和 Ajax(JQuery) 的简单示例。

# java - JSF 重置语言环境

> ID：14464326
> 
> 赞同：0
> 
> 时间：2013-01-22T17:19:28.177
> 
> 标签：java, jsf-2, internationalization, locale

此代码已完全简化，但重现了我的问题：

## BackingBean.java

```
public String reload(){
    System.out.println(FacesContext.getCurrentInstance()
            .getViewRoot().getLocale());
    return "test";
}

public void setLocale(){
    System.out.println("locale changed!");
    FacesContext.getCurrentInstance()
            .getViewRoot().setLocale(Locale.FRANCE);
} 
```

## 测试.xhtml

```
<h:form>
    <h:commandLink action="#{backingBean.reload}" value="reload page"/>
</h:form>
<h:form>
   <h:commandLink action="#{backingBean.setLocale}" value="change locale"/>
</h:form> 
```

## 输出：

```
en
locale changed!
fr_FR
en 
```

* * *

如果您将更改语言环境，然后调用`reload`两次方法，则语言环境将重置为 default `en`。`locale`重置的原因是什么？此外，仅在转发到其他页面的情况下才会发生，如果您将`reload`方法更改为`void`，则区域设置将保持不变`fr`。

```
public void reload(){
    System.out.println(FacesContext.getCurrentInstance()
            .getViewRoot().getLocale());
} 
```

## 输出：

```
en
locale changed!
fr_FR
fr_FR 
```

但经过 2 次转发后，语言环境将改回`en`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:29:42.450

在会话范围内不会记住视图区域设置。它在视图范围内被记住（见鬼，视图本身代表了整个视图范围！）。

如果您需要记住会话范围内的语言环境，那么您需要创建一个会话范围的托管 bean 并将其作为`<f:view locale>`主模板中的属性进行引用。

```
<f:view locale="#{localeManager.locale}"> 
```

### 也可以看看：

*   [JSF 2.0 通过浏览器和编程方式在整个会话中设置语言环境](https://stackoverflow.com/questions/5388426/jsf-2-0-set-locale-throughout-session-from-browser-and-programmatically/5391493#5391493)

# javascript - javascript 帮助 - 程序不提醒

> ID：14464327
> 
> 赞同：0
> 
> 时间：2013-01-22T17:19:31.993
> 
> 标签：javascript, loops, alert

我仍在开发一个程序，但我遇到了问题。代码在这里：

```
function Calculate(){
    var elev = [];
    var inputs = document.getElementsByName("txt");
    for(i=0; i<inputs.length; i++) {
    elev[i] = {
        "Value": inputs[i].value,
        "Used": false
    };
}

    for(j=0; j<=10; j++) {
            var r = Math.floor(Math.random() * 20);

            if (elev[r].Used) {             //1st number
                for(var a=0; a<=21; a++) {
                    if (!elev[a].Used) {
                        elev[r].Value = elev[a].Value;
                        break;
                        }
                    else {continue; }
                    }
                }
                ...
                }
            }

            elev[r].used = true;
            doument.write(elev[r].Value);
            ...
        }
} 
```

首先，我有 22 次导入到我的 HTML 文档中的 var inputs[i].value（后来的 elev[i]）。我希望它一次使用所有的“elev”数组，但我看到（在我的 document.write 中，我在这里剪掉了）它使用了其中一些两次，其中一些甚至没有使用。我该如何解决？

**使用 Fisher-Yates shuffle 解决的问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:40:24.877

让我指出你的脚本的几个问题

首先这个部分

```
for(i=0; i<inputs.length; i++) {
   elev[i] = inputs[i].value;
   elev[i].used = false;
} 
```

您正在将值分配给数组，但它的类型是`String`。字符串不获取属性。

以下代码将起作用

```
var obj = {};
obj.SomeProp = true; 
```

但如果你这样做

```
var str = "";
str.SomeProp = true; 
```

尝试使用`str.SomeProp`将始终返回`undefined` 代码`if (elev[r].used)`将始终被评估为 false （因为`0`，空字符串，`false`和`null`在JavaScript`undefined`中的运算符中表现为 false `if`）所以我建议您将代码重构为

```
for(i=0; i<inputs.length; i++) {
    elev[i] = {
        "Value": inputs[i].value,
        "Used": false
    }; // Pay attention, I added an object and Used property starts with an uppercase letter.
    // Then further in the code you'll use elev[index].Value in order to use the value
} 
```

最后该块`if (elev[aa].used = false)`不会抛出异常，但这是一个错误。

考虑以下剪断

```
var someVal = true;
if (someVal = false)
    alert("That's wierd");
alert(someVal); 
```

它将起作用，因为您将值 false 分配给`someVal`变量，并且该指令被评估为 true。`That's wierd`将出现一些带有消息的警报。此外，您会注意到`someVal`' 的值为`false`. 此片段使用将被评估为 false 的相等运算符，并且第一个警报将无法正常工作。不过也有问题。一种风格的。永远不要检查 false 的值，尤其是在 JavaScript 中。

```
var someVal = true;
if (someVal == false)
    alert("That's wierd");
alert(someVal); 
```

正确的代码段必须如下所示。

```
var someVal = true;
if (someVal)
    alert("There you go!");
alert(someVal); 
```

附言

你`aa`从无处获得变量。它从何而来？它必须是未定义的。你想要什么？两个数字的连接值？它们的总和？

**编辑：**

只是一些通知。

1）使用`for (var a = 0; a < someConstant; a++)`语法。不要忘记添加 var 关键字。

2）使用适当的缩进，即

```
if (someCondition){
    // Some instruction
    for (var i = 0; i < 10; i++) {
        //more indention
    }
} 
```

3) 不要使用`empty`else 块。

# jquery - jQuery在tinyMCE编辑器中获取N个元素的计数

> ID：14464328
> 
> 赞同：1
> 
> 时间：2013-01-22T17:19:37.203
> 
> 标签：jquery, tinymce

我正在尝试计算 tinyMCE 编辑器（WordPress）中 <!--nextpage--> 评论标签的数量。

我究竟做错了什么？

```
jQuery(document).ready(function($)
{
    //find the count of nextpage elements
    var n = jQuery("#content").find("<!--nextpage-->").length;
    alert(n);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:22:29.320

注释不是可遍历的 DOM 节点，如输入、div 等，jQuery 不会找到它们。

相反，您可以尝试对元素的`innerHTML`.

```
var count = $('#foo').html().split("<!--nextpage-->").length - 1; 
```

见演示：http: [//jsfiddle.net/46wYS/](http://jsfiddle.net/46wYS/)

* * *

使用宽松的正则表达式进行拆分更新了演示：http: [//jsfiddle.net/46wYS/1/](http://jsfiddle.net/46wYS/1/)

```
var count = $('#foo').html().split(/<!--\s*boo\s* -->/i).length - 1; 
```

# php - 在 php-fpm 中是否可以覆盖每个脚本的 terminate_timeout？

> ID：14464333
> 
> 赞同：1
> 
> 时间：2013-01-22T17:19:50.953
> 
> 标签：php

我正在使用 php-fpm 并设置了 terminate_timeout=3 来停止任何运行时间超过 3 秒的脚本，效果很好。

但是，有时，我会有一个需要运行更长时间的 php 脚本，例如，它正在访问需要一些时间才能返回的 3rd 方计费 API。

脚本有什么办法可以覆盖 php-fpm 的默认超时并要求更长的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:38:52.877

中声明的选项`php-fpm.conf`不可访问`ini_set()`（以及为 fpm*池*定义的选项）。然而，

*   创建另一个池

创建两个具有不同选项的池（注意两个不同的端口）
（通常在`/etc/php5/fpm/pool.d/`）

```
[pool1]
listen = 127.0.0.1:9000
request_terminate_timeout = 0
...

[pool2]
listen = 127.0.0.1:9001
request_terminate_timeout = 10s
... 
```

*   您还可以使用[set_time_limit](http://php.net/manual/en/function.set-time-limit.php)函数（从核心，它在 PHP 安全模式下不起作用）
    （我猜（没有尝试）如果它的值在这种情况下应该删除 php-fpm request_terminate_timeout 选项<设置时间限制）

# regex - .* 在 sed 中过于贪婪

> ID：14464342
> 
> 赞同：3
> 
> 时间：2013-01-22T17:20:08.373
> 
> 标签：regex, sed, grep

我想从 bash 中的一些字符串中提取版本号，而不使用太多额外的包。到目前为止我试过了`sed`。

这是 API：

```
3.81-8.1ubuntu1.1    should give :  3.81
2.68-1ubuntu2        should give :  2.68
1:1.11.3-1ubuntu2    should give :  1.11.3 
```

到目前为止，这是我的 sed 命令：

```
echo ... | sed -r 's/.*([0-9\.]+).*/\1/' 
```

但是，开局`.*`太贪心了，尤其是最后一种情况。我尝试了一些`.*?`，`.\{-}`但没有任何成功。

我可以分两次完成，但我宁愿学习如何一次完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T17:25:09.890

你可以吗？

```
 grep -Po "[\d\.]*(?=-)" file 
```

例子：

```
kent$  cat tt
3.81-8.1ubuntu1.1
2.68-1ubuntu2
1:1.11.3-1ubuntu2

kent$  grep -Po "[\d\.]*(?=-)" tt
3.81
2.68
1.11.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:50:57.203

为了克服贪婪，您需要更严格地使用正则表达式：

```
$ sed -r 's/.*([0-9]+\.[0-9]+\.?[0-9]+)-.*/\1/' file
3.81
2.68
1.11.3 
```

这将匹配带有主要、次要和构建*（可选）*标记的版本号，后跟连字符。

# wpf - SetBinding 和 CheckBox 值

> ID：14464343
> 
> 赞同：0
> 
> 时间：2013-01-22T17:20:09.183
> 
> 标签：wpf, vb.net

我不确定我是否`"CheckedValue"`在这里使用...

或者我必须使用`"IsCheckedValue"`？

```
Dim bndg_3 As New Binding("CheckedValue")
bndg_3.Source = checkbox1
MyCtrl.SetBinding(MyCtrl.CanMoveProperty, bndg_3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:32:50.267

哈！

我找到了！

```
Dim bndg_3 As New Binding("IsChecked")
bndg_3.Source = checkbox1
MyCtrl.SetBinding(MyCtrl.CanMoveProperty, bndg_3) 
```

# c - uClibc vs glibc 用于实时 Linux 应用程序编程

> ID：14464344
> 
> 赞同：3
> 
> 时间：2013-01-22T17:20:09.310
> 
> 标签：c, linux, glibc, uclibc

我正在编写一个在 Linux (Kernel 3.0) 上运行的用户空间音频应用程序，它需要实时行为。我应该选择 glibc 还是 uClibC ？uClibC 和 glibc 如何在实时行为方面进行比较？

（编辑：我的是一个带有 nand flash 的嵌入式系统。它使用带有 glibc 的外部 gcc 工具链的 buildroot。如果需要，我也可以使用带有 uClibc 的 buildroot 内部工具链）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:40:29.700

实际上，我认为没有人可以肯定地说出任何一种方式。原因是您的代码很可能以一种比另一种变体更好/更差的方式使用 C 库。

唯一合理的方法是使用 glibc 运行代码，然后在相同的条件下使用 uclibc。比较完成这项工作所需的时间。在你的情况下哪个更好？- 如果这将进入某种嵌入式系统，请确保您在您希望它运行的处理器上进行测量，而不是某些具有完全不同指令集、不同缓存大小、不同内存速度等的 PC 处理器.

你说你使用了很多 malloc - 也许如果你认为这是你速度的限制因素，你应该考虑一种你不使用 malloc 的方法。特别是，在你的“热路径”中调用 malloc 不是一个好主意，除非你绝对必须这样做。

另请注意，Linux 不是实时操作系统。你只能期待 Linux 的半实时行为，如果你的应用程序真的依赖于能够在一定时间内处理它的音频，并且在特定条件下它可以“​​不运行”多长时间等，你将需要向内核添加扩展 - 我不太熟悉哪些适用于内核版本、工作负载类型等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:42:41.567

我会以可移植的方式编写您的应用程序，这样您就可以推迟构建时间的决定。为了给您更好的答案，我们需要知道您想要使用哪些实时功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:49:05.620

使用系统上安装的 C 库。任何给定的 Linux 发行版通常会使用 glibc（对于大多数发行版，包括桌面和服务器系统）或 uClibc（在某些嵌入式发行版中）。混合和匹配这两者是相当混乱的，并且会使构建、调试和分发你的应用程序变得异常复杂。

这两个库的性能特征通常非常相似，不太可能对您的应用程序产生任何重大影响。

# php - mongodb推送到php上的固定数组

> ID：14464346
> 
> 赞同：0
> 
> 时间：2013-01-22T17:20:18.193
> 
> 标签：php, mongodb

所以显然在最新（不稳定）版本的 mongo 上，他们实现了以下内容：

[https://jira.mongodb.org/browse/SERVER-991?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://jira.mongodb.org/browse/SERVER-991?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

我试图让它在 PHP 上工作，但它不起作用。我在用：

```
 $newData = array(
        '$push' => array(
            "$array" => $obj,
            '$size' => 10
        )
    );
    $collection->update(array("_id" => new MongoId("$IDIn")), $newData); 
```

现在，它显然不起作用。我认为原因是以下两个之一：

1.  PHP 驱动程序 (1.3.2) 尚不支持此功能，尽管我对此表示怀疑，因为它只是使用在服务器上定义的函数
2.  该命令不是 $size: $integer - 但如果是这种情况，我在任何地方都找不到它的描述。

有人已经有这个问题了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:53:02.447

您可以在 JIRA 中看到使用此功能的示例：[https ://github.com/mongodb/mongo/commit/b3687e73545f6d0d04f1992119308e7ab80d44e1](https://github.com/mongodb/mongo/commit/b3687e73545f6d0d04f1992119308e7ab80d44e1)

这个特别有趣：

```
t.update( {_id:1}, { $push: { x: { $each: [ {a:3} ], $slice:-5, $sort: {a:1} } } } ) 
```

在该页面的下方，他们记录了代码，即：

```
// If we're in the "push all" case with slice, we have to decide how much of each
// of the existing and parameter arrays to copy to the final object. 
```

您可以在 JIRA 的底部找到这些类型的块，您可以在其中看到类似于以下内容的内容：

> auto 添加了评论 - UTC 时间 2013 年 1 月 3 日下午 5:26:11 作者：{u'date': u'2013-01-03T17:19:13Z', u'name': u'Alberto Lerner', u'email ': u'alerner@10gen.com'} 消息：SERVER-991 SERVER-8008 将 $trimTo 替换为 $slice（但现在只接受负切片）。分支：master [https://github.com/mongodb/mongo/commit/b3687e73545f6d0d04f1992119308e7ab80d44e1](https://github.com/mongodb/mongo/commit/b3687e73545f6d0d04f1992119308e7ab80d44e1)

# javascript - jqGrid动态shrinkToFit取决于列号

> ID：14464350
> 
> 赞同：0
> 
> 时间：2013-01-22T17:20:31.967
> 
> 标签：javascript, jquery, jqgrid

我在我的项目中使用 jqGrid，宽度设置为 900px，所有网格的配置相同。

如果我有 4 列，每列都设置了宽度，并且该选项`shrinkToFit`设置为 true，则这些列将拉伸以适合 900 像素。

但是，如果我有第二个 14 列的网格并且我将宽度设置为每个，jqGrid 将不会尊重列的宽度，因为`shrinkToFit`设置为 true。如果我将其设置为 false，我将解决此问题。但是又出现了一个问题。第一个网格现在将每列的宽度设为 150 像素，并且列不再拉伸以适应网格。

问题：有没有办法在不改变配置的情况下，在列宽之和大于网格宽度时实现水平滚动条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:41:34.157

抱歉，但很难理解您想要拥有哪种行为。

首先，您必须决定您是否知道网格列的哪个宽度是最好的，或者您想要对列进行缩放（拉伸），并且列宽将被解释为权重。如果你想要最后的行为，你应该选择 default setting `shrinkToFit: true`。在这种情况下`width`，100、200 和 300 的值与值 1、2 和 3 的含义完全相同。

我个人在实践中主要有许多列的网格。因此，在小型显示器上使用默认设置`shrinkToFit: true`，并伴随着大量的列挤压。因此，人们将无法真正在网格上看到任何有用的信息。所以我更喜欢`shrinkToFit: false`在案例中使用。我知道每列的像素宽度负责，并`width`在创建网格期间设置值。因此，拥有大显示器的用户可以直接看到所有最重要的信息。此外，我没有`width`为网格指定任何参数。如果需要，用户使用页面的滚动条。您的要求可能不同，应该选择最适合您的值。

如果您仍然希望使用`shrinkToFit: true`，但确实使用其他一些宽度值作为网格所有宽度的总和，那么您还有一个选择。**你可以使用`setGridWidth`方法。它有可选的第二个布尔参数`shrink`**。使用`setGridWidth`带一个参数的方法会根据`shrinkToFit`网格选项的值进行收缩，但是显式使用第二个参数可以让您在*不*收缩`shrink`的情况下更改宽度。可能是您想要实现的wnat。

 *我在[答案](https://stackoverflow.com/a/14265456/315935)中描述的另一种选择。jqGrid 没有任何方法可以将网格的某些列的宽度更改为新值。在答案中，我描述了解决方法（请参阅`resizeStop`答案中的回调代码），它使用内部`dragEnd`方法来更改列宽。该演示将用于子网格，但可以对每个网格使用相同的方法。*

# mysql - 用 RoR 设置 mysql，有 XAMPP

> ID：14464352
> 
> 赞同：1
> 
> 时间：2013-01-22T17:20:35.707
> 
> 标签：mysql, ruby-on-rails, gem, xampp

我刚刚设置并运行了我的 RoR 环境。我用 sqlite 做了我的第一个应用程序。我现在想试试Mysql。一年多前我做了一点 PHP 时，我就有了 XAMPP，因此安装了 MYSQL。我现在想用 mysql 设置我的应用程序。我将 mysql 设置为从 XAMPP 控制面板开始。转到我的应用程序并输入“gem install mysql”开始，但我得到：

获取：mysql-2.9.0.gem (100%) 错误：执行 gem ... (Errno::EACCES) 权限被拒绝 - /Users/lambert/.rvm/gems/ruby-1.9.3-p362/cache/ mysql-2.9.0.gem

任何想法，我的下一步是完全卸载我的 XAMPP 安装并下载 mysql，从头开始并按照整个网络上的教程进行操作。但如果能保持...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:28:22.097

您必须安装`mysql2`适配器才能与 RoR 一起使用 mysql。
使用此命令安装适配器。

`gem install mysql2`

然后创建项目

`rails new MyProject -d mysql`

这将使用 MySQL 作为数据库创建您的项目。之后在`database.yml`文件中您可以编辑您的用户名、MySQL 密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:58:49.917

我认为您不需要 XAMPP 即可将 MySQL 与 RoR 一起使用。

把它放在你的gemfile中：

```
gem 'mysql2' 
```

`bundle install`在控制台上运行。

`database.yml`并像这样在文件中设置凭据：

```
development:
  adapter: mysql2
  encoding: utf8
  database: your_database_name_development
  username: username
  password: password 
```

看看它是否有效，在控制台上运行：

```
rake db:create
rake db:migrate 
```

希望我能帮上忙！

# python - 在 Ruby/Python 中可视化 x、y、z 坐标？

> ID：14464353
> 
> 赞同：1
> 
> 时间：2013-01-22T17:20:41.470
> 
> 标签：python, ruby, data-visualization, coordinate-systems, graph-visualization

我想通过我存储在哈希中的坐标点绘制一条连续的线，如果可能的话，是 3D 的，但可能是 2D 开始的。

我想处理大约十个点/秒，以便我可以看到随着时间的推移绘制的线。

有谁知道可视化这个的好方法？我考虑过在 Blender 中编写 Python 脚本，但我想知道是否有更快的方法来获得工作原型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:11:55.820

我建议不要单独使用 Ruby 或 Python，而是看一下“ [D3.js](http://d3js.org/) ”库。

您可以利用浏览器生成图形的能力，以及 D3 库的大量不同绘图和图表。它非常令人印象深刻，应该很容易与充当数据生成器的 Python 或 Ruby 集成，通过 JSON 为浏览器提供数据。

# java - Java SAXParser 解析无效的 xml

> ID：14464356
> 
> 赞同：2
> 
> 时间：2013-01-22T17:20:51.713
> 
> 标签：java, xml, parsing, xml-parsing, sax

我正在尝试解析一些无效的 xml，因为属性不在引号中，有没有办法解决这个问题？下面是一个简单的例子，以及java代码。

XML

```
<car id=1>
.
.
</car> 
```

爪哇

```
 SAXParserFactory factory = SAXParserFactory.newInstance();
  factory.setValidating(false);
  SAXParser saxParser = factory.newSAXParser();
  saxParser.parse(page, handler);  //page is an input stream where the xml is. 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:24:29.697

您所拥有的是**格式正确的**问题，而不是**验证**问题（您发布的代码只是禁用验证）。XML 解析器要求 xml 格式正确，并且大多数情况下都是为了只原谅验证问题而编写的。如果您查看像[JSoup](http://jsoup.org/)这样的 html 解析器，您可能会有更好的机会，因为它们会原谅格式正确并尝试自动更正它们。

[阅读本文](http://www.webdevout.net/articles/validity-and-well-formedness)以了解格式良好和有效性之间的区别。

# javascript - 使用 javascript 停止表单提交

> ID：14464360
> 
> 赞同：0
> 
> 时间：2013-01-22T17:21:08.997
> 
> 标签：javascript, forms, validation

我一直在制作一个 javascript 表单验证器来提供实时表单验证。如果出现错误，它应该停止提交，但它不会。我尝试返回 false 并使用 preventDefault() 但它仍然不能阻止提交。我试图在其他地方找到答案，但我不能，所以你们中的任何人都可以帮助我。

该表格在[http://swanleyhypnotherapy.co.uk/contact.html](http://swanleyhypnotherapist.co.uk/contact.html)上。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:23:10.340

### 简单的错误。

代替：

```
<form name="contact" action="/" onsubmit="check();"> 
```

和：

```
<form name="contact" action="/" onsubmit="return check();"> 
```

# antlr4 - antlr4 sql语法

> ID：14464372
> 
> 赞同：18
> 
> 时间：2013-01-22T17:22:05.703
> 
> 标签：antlr4

ANTLR4 有可用的 sql 语法吗？如果是这样，我在哪里可以找到它？

有一个来自 ANTLR wiki 的链接，但链接已损坏：[语法列表](http://www.antlr.org/grammar/list)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-22T18:34:03.107

不，在撰写本文时，还没有 v4 SQL 语法。

所有 v4 语法都将放入以下 ​​Github 存储库（据我记得来自 ANTLR 邮件列表）：[https ://github.com/antlr/grammars-v4](https://github.com/antlr/grammars-v4)

现在这里的 v3 语法：http: [//antlr3.org/grammar/list.html](http://antlr3.org/grammar/list.html)

### 编辑 - 2018 年 4 月

现在这里有一个用户贡献了 MySQL 语法：[dead link removed]

### 编辑 - 2020 年 2 月

MySQL、T-SQL、PL/SQL 和 SQLite 语法都可以在这里找到：[https ://github.com/antlr/grammars-v4/tree/master/sql](https://github.com/antlr/grammars-v4/tree/master/sql)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-26T19:25:52.673

目前，v4 也有很多 sql 语法：

1.  [MySQL](https://github.com/antlr/grammars-v4/tree/master/sql/mysql)
2.  [PL/SQL](https://github.com/antlr/grammars-v4/tree/master/sql/plsql)
3.  [KvanTTT](https://stackoverflow.com/users/1046374/kvanttt)[的 T-SQL](https://github.com/antlr/grammars-v4/tree/master/sql/tsql) (Microsoft SQL Server)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-06T21:30:47.170

截至 2017 年 2 月 6 日，t-sql 有 ANTLR4 文件，但它是社区维护的，并不完整，我发现许多 SQL 语句对 SQLServer 有效但无法被此语法解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-01T16:46:54.713

正如其他用户所提到的，网上有可用的 SQL 语法，但它们并不完整。我建议最好的方法是使用不完整的语法，并在需要时添加其顶部不存在的语法。例如，如果您需要翻译 join 子句并且该子句不存在，则只需将其添加到它的顶部即可。只需确保您编写的语法不会破坏任何现有语法

这就是我在实习中所做的，我必须制作一个将 SAS 脚本转换为 python 的工具。SAS 是专有的，它的语法不可用。所以我们从头开始构建一切。

# c++ - 静态函数中的静态变量可以移动到内存中的新地址吗？

> ID：14464373
> 
> 赞同：1
> 
> 时间：2013-01-22T17:22:07.360
> 
> 标签：c++

我刚刚升级到第三方库的新版本（QtPropertyBrowser for Qt 5.0）。升级导致我的应用程序中出现一个新错误，我设法跟踪到库中的静态函数。该函数包含一个静态变量，该变量在第一次调用该函数时被初始化。我在初始化后复制了该变量的内存位置，并发现，正如预期的那样，在多个后续调用中，该变量仍保留在同一内存位置。然后在随后的函数调用中，我注意到静态变量中的内存位置和数据发生了变化（导致我的程序出现错误）。

代码看起来像这样：

```
class ClassA
{
    //.... 
};

class ClassB
{
public:
    ClassA* ptrMember;
};

static ClassA *theFunction()
{
    static ClassB statVar = {0};
    if(!statVar.ptrMember)
        statVar.ptrMember = new ClassA();
    return statVar.ptrMember;
} 
```

我发现在多次调用中`theFunction()`存储的地址`&statVar`始终保持不变，但在随后的调用中，地址`&statVar`不同并且`statVar.ptrMember`为空。

我不认为这是可能的！有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:38:13.097

看起来您已经在头文件中*定义*了函数，并且包含在许多`.cpp`文件中（每个`.cpp`文件定义一个翻译单元）。

由于声明了函数，因此每个翻译单元都会与变量`static`一起获得自己的版本。`static`这就是为什么当你从不同的翻译单元调用函数时，静态变量的地址是不同的。只要你从同一个翻译单元调用它，你就会看到同一个地址。

请注意，特定翻译单元的地址将保持不变。只是每个翻译单元都有自己的静态变量版本，因此地址不同；您**不再**访问相同的变量，它们是具有相同标识符的不同变量。

* * *

> 问题是这都是在第三方库中定义的，我需要从 dll 和 exe 调用它，而不需要重新初始化静态变量。有什么方法可以在不更改库中代码的情况下解决问题？我目前将该库用作.lib。如果我将其编译为 .dll，问题会消失吗？

为了避免静态函数的多个版本（因此是静态变量），您需要从同一个翻译单元调用它。为此，您可以使用*代理*来调用该函数。也就是说，不是直接调用函数，而是调用代理（在单个翻译单元中定义，没有更多版本）。

*   在标头中声明代理：

    ```
    //proxy.h
    ClassA *proxy_of_theFunction(); 
    ```

*   在实现文件中定义代理：

    ```
    //proxy.cpp
    ClassA* proxy_of_theFunction()
    {
        return theFunction(); //call the actual function
    } 
    ```

打电话`proxy_of_theFunction`。那应该可以解决您的问题。

由于`proxy_of_theFunction`is **not** `static`（并且在 中定义`proxy.cpp`），它只有一个版本；没有其他版本。由于您调用的只有一个代理，因此您每次`theFunction()`调用的都是*相同*版本，因此每次调用`theFunction`都会看到*相同*版本的`static`变量。:-)

# symfony - 如何在树枝模板中打印单引号？

> ID：14464384
> 
> 赞同：1
> 
> 时间：2013-01-22T17:22:32.097
> 
> 标签：symfony, twig

我需要分配一个包含单引号的变量。

在php中我会这样做：

```
$hello='testing \' quotes '; 
```

打印报价的树枝等效代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:04:19.987

这是一样的，因为无论如何，twig 模板都被转换为 php

```
{{ 'some string \' with a single quote in it' }}
{% set value = 'the quote is here ->\'<-' %} {{ value }} 
```

# hibernate - JBoss 缓存和 Hiberate 4.x，有可能吗？

> ID：14464385
> 
> 赞同：2
> 
> 时间：2013-01-22T17:22:33.710
> 
> 标签：hibernate, caching, jboss, infinispan

我正在尝试让 JBoss 缓存与 Hibernate 4.1.9 一起使用，但没有文档或迹象表明它甚至是可能的。如果是这样，也没有说明为什么不这样做。我成功地将它用于 Hibernate 3.x。

有任何想法吗？

这里提到它作为提供者：[http ://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/)

但不是在这里：[http ://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/)

（手动与开发指南...）

似乎某些 JBoss 类已从 4 中删除。

我知道有后来的 Infinispan，但由于种种原因，现在不可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:12:33.823

Hibernate 4 仅支持 Ehcache 和 Infinispan。Infinispan 是 JBoss Cache 的演变，这就是它从 4.0 版开始的原因。至于其他缓存提供程序，它们都是旧的并且大部分都没有维护：没有人自愿将它们更新到新的集成接口，因此它们被丢弃了。

感谢您发现文档不一致： [https ://hibernate.onjira.com/browse/HHH-8044](https://hibernate.onjira.com/browse/HHH-8044)

# c# - 如何避免使用异步 void 事件处理程序重入？

> ID：14464391
> 
> 赞同：13
> 
> 时间：2013-01-22T17:22:44.177
> 
> 标签：c#, .net, async-await

在 WPF 应用程序中，我有一个通过网络接收消息的类。每当所述类的对象收到完整消息时，就会引发一个事件。在应用程序的 MainWindow 中，我有一个订阅该事件的事件处理程序。保证在应用程序的 GUI 线程上调用事件处理程序。

每当调用事件处理程序时，都需要将消息的内容应用于模型。这样做可能会非常昂贵（在当前硬件上 > 200 毫秒）。这就是为什么使用 Task.Run 将应用消息卸载到线程池的原因。

现在，可以非常接近地连续接收消息，因此可以在仍在处理先前的更改时调用事件处理程序。确保一次只应用一条消息的最简单方法是什么？到目前为止，我想出了以下几点：

```
using System;
using System.Threading.Tasks;
using System.Windows;

public partial class MainWindow : Window
{
    private Model model = new Model();
    private Task pending = Task.FromResult<bool>(false);

    // Assume e carries a message received over the network.
    private void OnMessageReceived(object sender, EventArgs e)
    {
        this.pending = ApplyToModel(e);
    }

    private async Task ApplyToModel(EventArgs e)
    {
        await this.pending;
        await Task.Run(() => this.model.Apply(e)); // Assume this is an expensive call.
    }
} 
```

这似乎按预期工作，但似乎这将不可避免地产生“内存泄漏”，因为应用消息的任务将始终首先等待应用前一条消息的任务。如果是这样，那么以下更改应避免泄漏：

```
private async Task ApplyToModel(EventArgs e)
{
    if (!this.pending.IsCompleted)
    {
        await this.pending;
    }

    await Task.Run(() => this.model.Apply(e));
} 
```

这是避免异步 void 事件处理程序重入的明智方法吗？

**编辑**：删除了不必要的`await this.pending;`语句`OnMessageReceived`。

**编辑 2**：消息必须以与接收消息相同的顺序应用于模型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T17:36:42.677

我们需要在这里感谢 Stephen Toub，因为他在博客系列中展示了一些非常有用的异步锁定结构，包括[异步锁定](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266988.aspx)块。

以下是那篇文章的代码（包括本系列上一篇文章中的一些代码）：

```
public class AsyncLock
{
    private readonly AsyncSemaphore m_semaphore;
    private readonly Task<Releaser> m_releaser;

    public AsyncLock()
    {
        m_semaphore = new AsyncSemaphore(1);
        m_releaser = Task.FromResult(new Releaser(this));
    }

    public Task<Releaser> LockAsync()
    {
        var wait = m_semaphore.WaitAsync();
        return wait.IsCompleted ?
            m_releaser :
            wait.ContinueWith((_, state) => new Releaser((AsyncLock)state),
                this, CancellationToken.None,
                TaskContinuationOptions.ExecuteSynchronously, TaskScheduler.Default);
    }

    public struct Releaser : IDisposable
    {
        private readonly AsyncLock m_toRelease;

        internal Releaser(AsyncLock toRelease) { m_toRelease = toRelease; }

        public void Dispose()
        {
            if (m_toRelease != null)
                m_toRelease.m_semaphore.Release();
        }
    }
}

public class AsyncSemaphore
{
    private readonly static Task s_completed = Task.FromResult(true);
    private readonly Queue<TaskCompletionSource<bool>> m_waiters = new Queue<TaskCompletionSource<bool>>();
    private int m_currentCount;

    public AsyncSemaphore(int initialCount)
    {
        if (initialCount < 0) throw new ArgumentOutOfRangeException("initialCount");
        m_currentCount = initialCount;
    }
    public Task WaitAsync()
    {
        lock (m_waiters)
        {
            if (m_currentCount > 0)
            {
                --m_currentCount;
                return s_completed;
            }
            else
            {
                var waiter = new TaskCompletionSource<bool>();
                m_waiters.Enqueue(waiter);
                return waiter.Task;
            }
        }
    }
    public void Release()
    {
        TaskCompletionSource<bool> toRelease = null;
        lock (m_waiters)
        {
            if (m_waiters.Count > 0)
                toRelease = m_waiters.Dequeue();
            else
                ++m_currentCount;
        }
        if (toRelease != null)
            toRelease.SetResult(true);
    }
} 
```

现在将其应用于您的案例：

```
private readonly AsyncLock m_lock = new AsyncLock();

private async void OnMessageReceived(object sender, EventArgs e)
{
    using(var releaser = await m_lock.LockAsync()) 
    {
        await Task.Run(() => this.model.Apply(e));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T13:31:51.737

给定一个使用异步等待的事件处理程序，我们不能在任务之外使用锁，因为每个事件调用的调用线程都是相同的，所以锁总是让它通过。

```
var object m_LockObject = new Object();

private async void OnMessageReceived(object sender, EventArgs e)
{
    // Does not work
    Monitor.Enter(m_LockObject);

    await Task.Run(() => this.model.Apply(e));

    Monitor.Exit(m_LockObject);
} 
```

但是我们可以锁定在 Task 内部，因为 Task.Run 总是会生成一个新的 Task，它不会在同一个线程上并行运行

```
var object m_LockObject = new Object();

private async void OnMessageReceived(object sender, EventArgs e)
{
    await Task.Run(() => 
    {
        // Does work
        lock(m_LockObject)
        {
            this.model.Apply(e);
        }
    });
} 
```

因此，当一个事件调用 OnMessageReceived 时，它会立即返回，并且 model.Apply 只会一个接一个地输入。

# cucumber - 使用 cheezy 的页面对象和 watir 时是否可以访问“样式”类型的 css 选择器？

> ID：14464392
> 
> 赞同：1
> 
> 时间：2013-01-22T17:22:53.080
> 
> 标签：cucumber, watir, pageobjects

在我的 page.rb 中，我使用`div(:select, :css => 'div.active[style="display: block;"]')`的是哪个给我的错误 - Watir::Exception::MissingWayOfFindingObjectException。

在控制台中，`document.querySelector("div.active[style='display: block;']")`正确返回对象。我不太确定在哪里查看文档，所以任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:55:18.350

据我从页面对象 gem 代码中可以看出，我不相信页面对象 gem 支持 watir-webdriver 的 :css 定位器。至少它不包含在 watir_finders 方法中 - 请参阅[element.rb](https://github.com/cheezy/page-object/blob/master/lib/page-object/elements/element.rb)和[div.rb](https://github.com/cheezy/page-object/blob/master/lib/page-object/elements/div.rb)。我猜测原因是由于 watir-webdriver 当前的限制，即 :css 定位器只能在使用该`element`方法时使用 - 请参阅[watir-webdriver 的问题 124](https://github.com/watir/watir-webdriver/issues/124)。

**解决方案 1 - 使用块**

但是，您可以通过在页面对象中使用块定义 div 来解决这些问题。

假设html：

```
<div class="active" style='display: block;'>text</div> 
```

以下对我有用：

```
div(:select){ browser.element(:css => 'div.active[style="display: block;"]') } 
```

**解决方案 2 - 使用 Xpath**

或者，您可以将 css 定位器转换为 xpath 定位器：

```
div(:select2, :xpath => '//div[@class="active" and @style="display: block;"]') 
```

请注意，如果您采用这种方式，您可能想查看[另一个问题](https://stackoverflow.com/questions/8808921/selecting-a-css-class-with-xpath)，其中讨论了为班级使用更强大的定位器。

# asp.net-mvc-3 - 尽管使用了 Unity.MVC3 和 HierarchicalLifetimeManager，但 UnityOfWork 实例被创建了两次

> ID：14464396
> 
> 赞同：2
> 
> 时间：2013-01-22T17:22:59.710
> 
> 标签：asp.net-mvc-3, unity-container

我在我的项目中使用 Unity.MVC3。

我已经实现了通用工作单元 -`UnitOfWork<TContext>`我希望它是根据请求创建的。所以利用 Unity.MVC3 我这样做了：

```
unityContainer.RegisterType(typeof(IUnitOfWork<>), typeof(UnitOfWork<>), new HierarchicalLifetimeManager()); 
```

我在基本存储库中使用提到的 UOW。基本存储库由某些特定存储库使用，而这些特定存储库由某些服务使用。

假设我们有 UserRepository 和 UserService。

UserRepository 构造函数看起来或多或少像这样：

```
 public UserRepository(IUnitOfWork<UserContext> unitOfWork)
        : base(unitOfWork)
    {           
    } 
```

在 UserService 内部，我使用的是 UserRepository，我希望拥有与 UserRepository 使用的相同的 UOW 实例：

```
public UserService(IUserRepository userRepository, IUnitOfWork<UserContext> unitOfWork)
{
} 
```

当我使用 Unity.MVC3 并使用 HierarchicalLifetimeManager 注册 UOW 时，我应该在 UserRepository 和 UserService 中获得相同的 UOW 实例，对吗？

问题是，如果我第一次运行网站，则会创建两个不同的 UOW 实例，并且只为这两个实例中的一个调用 Dispose 方法。当页面被加载并且我按下刷新按钮时，一切似乎都是正确的——只创建了一个实例。

注册的泛型类型似乎出现了问题。

如果您想重现该问题，您可以下载[Unity.MVC3.Example](http://unitymvc3.codeplex.com/SourceControl/changeset/view/580f45a682a5)代码，将 IExampleContext 设为通用并尝试运行它。

你知道什么会导致问题以及如何解决这个问题吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:42:43.913

这是我的替代解决方案：

我创建了 PerRequestLifetimeManager：

```
public class PerRequestLifetimeManager<T> : LifetimeManager, IDisposable
{
    public override object GetValue()
    {
        return HttpContext.Current.Items[typeof(T).AssemblyQualifiedName];
    }
    public override void RemoveValue()
    {
        HttpContext.Current.Items.Remove(typeof(T).AssemblyQualifiedName);
    }
    public override void SetValue(object newValue)
    {
        HttpContext.Current.Items[typeof(T).AssemblyQualifiedName] = newValue;
    }
    public void Dispose()
    {
    }
} 
```

在 UserDomain 我注册了 IUnitOfWork 类型：

```
RegisterType<IUnitOfWork<UsersContext>, UnitOfWork<UsersContext>>(new PerRequestLifetimeManager<IUnitOfWork<UsersContext>>()); 
```

我创建了 PerRequestLifetimeHttpModule 并在 Web.config 中注册了它：

```
public class PerRequestLifetimeHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.EndRequest += (sender, e) => UnityDependencyResolver.DisposePerRequestLifetimeItems();
    }
    public void Dispose()
    {
    }
}

<system.webServer>
    <modules runAllManagedModulesForAllRequests="false">
        <add name="PerRequestLifetimeHttpModule" type="<namespace>.PerRequestLifetimeHttpModule, <assemblyName>" />
    </modules>
</system.webServer 
```

最后一步 - 在我的自定义 UnityDependencyResolver 中，我创建了在 PerRequestLifetimeHttpModule 中使用的 DisposePerRequestLifetimeItems 静态函数：

```
public static void DisposePerRequestLifetimeItems()
{
    foreach (var item in HttpContext.Current.Items.OfType<DictionaryEntry>().Where(item => item.Value is IDisposable))
    {
        ((IDisposable)item.Value).Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:34:51.303

其实我认为 PerResolveLifetimeManager 是你需要的。

在依赖链中只创建一个 UOW，但每次解析一个链时都会创建一个新的 UOW。

HierarchicalLifetimeManager 是相反的行为。

# hadoop - 根据内袋的嵌套值过滤元组

> ID：14464404
> 
> 赞同：3
> 
> 时间：2013-01-22T17:23:15.297
> 
> 标签：hadoop, apache-pig

我是 PigLatin 的初学者，我需要一些（我认为是基本的）帮助。

我的数据描述为：

```
xmlToTuple: {(node_attr_id: int,tag: {(tag_attr_k: chararray,tag_attr_v: chararray)})} 
```

像这样转储：

```
((704398904,{(lat,-13.00583333),(lon,45.24166667)}))
((1230941976,{(place,village)}))
((1230941977,{(name,Mtsahara)}))
((1751057677,{(amenity,fast_food),(name,Brochetterie)}))
((100948360,{(amenity,ferry_terminal)}))
((362795028,{(amenity,fuel),(operator,Total)})) 
```

我想提取对 tag_attr_k 字段具有特定值的记录。例如，给我一个 tag_attr_k = amesity 的记录？那应该是：

```
((1751057677,{(amenity,fast_food),(name,Brochetterie)}))
((100948360,{(amenity,ferry_terminal)}))
((362795028,{(amenity,fuel),(operator,Total)})) 
```

任何人都可以解释我这样做吗？我有点迷茫……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:17:39.180

您应该使用地图而不是一袋元组。键将是您`tag_attr_k`的 s，您的值将是您的`tag_attr_v`s。因此，您的一行数据将是，例如，

```
(1751057677,['amenity'#'fast_food', 'name',#'Brochetterie']) 
```

然后，您可以通过尝试访问它并检查值是否为 来检查密钥是否存在`NULL`。

`FILTER xml BY tag_attr#'amenity' IS NOT NULL;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:11:16.500

我发现！

```
 XmlTag = FOREACH xmlToTuple GENERATE FLATTEN ($0);
    XmlTag2 = FOREACH XmlTag {
        tag_with_amenity = FILTER tag BY (tag_attr_k == 'amenity');
        GENERATE *, COUNT(tag_with_amenity) AS count;
    };
    XmlTag3 = FOREACH (FILTER XmlTag2 BY count > 0) GENERATE node_attr_id, node_attr_lon, node_attr_lat, tag; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:06:40.027

您应该`map`为此使用 a，而不是元组列表。地图正是为此目的而构建的。[http://pig.apache.org/docs/r0.10.0/basic.html#data-types](http://pig.apache.org/docs/r0.10.0/basic.html#data-types)

要过滤掉，您将执行以下操作：

```
B = FILTER A BY mymap#'amenity' IS NOT NULL; 
```

# python - scipy 在 linux 上安装：找不到 lapack 对象 sgges_

> ID：14464405
> 
> 赞同：3
> 
> 时间：2013-01-22T17:23:19.217
> 
> 标签：python, installation, scipy, lapack

我正在尝试安装 scipy，但遇到了问题。将我的结果与常见问题页面进行比较，看起来我的 ATLAS 不完整。该页面说：

ATLAS 提供的 LAPACK 库不完整 当您遇到 ImportError: .../flapack.so : undefined symbol: sgesdd_ 等导入错误时，您会注意到它为确保 NumPy/SciPy 是针对完整的 LAPACK 构建的，请检查文件的大小liblapack.a - 它应该是大约 6MB。liblapack.a 的位置通过执行 python numpy/distutils/system_info.py lapack 来显示 修复：按照 [http://math-atlas.sourceforge.net/errata.html#completelp](http://math-atlas.sourceforge.net/errata.html#completelp)中的说明构建完整的LAPACK库来创建一个完整的 liblapack.a。然后将 liblapack.a 复制到安装 libatlas.a 的相同位置并使用 scipy build 重试。

我缺少的实际对象是“sgges_”。我尝试了两种解决方案。

1) 我已按照 ATLAS 说明制作了 LAPACK 的完整版本，rev。3.4.2\. （顺便说一句，生成的 LAPACK 大约为 10MB，比常见问题解答中的 6MB 大。）

2) 我找到了 LAPACK 的预编译二进制文件 - rev。不清楚 - 只是下载它并将其放置在适当的位置。（它的大小接近 6MB。）

无论如何，我都会遇到同样的问题。

"nm" 将 liblapack.a 中定义的 sgges_ 显示为 day。System_info.py 在 /usr/local/lib 中找到了我的 lapack。

这是一个严重的失败吗？还有什么可做的吗？

顺便说一句，我在 64 位 CentOs 5.x 机器上运行 python 2.7，而 gfortran 是我的 FORTRAN 编译器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:08:05.780

我不得不在 slackware 13 linux 发行版上从头开始编译 scipy，这是一个非常基本的 linux 系统；我在这里列出了所有步骤和结果：

[从 slackware 13 上的源代码安装 SCIPY](http://www.linuxforums.org/forum/slackware-linux/179312-scipy-numpy-install-slackware-13-a.html)

在我的安装中，我试图让动态库安装在本地目录 /home/andrew3/.local/lib 中，因为它不是系统安装。与您遇到的类似错误是由链接器 ldd 无法找到库引起的。

您可以通过复制我的步骤来隔离您的问题，并查看它在哪里失败（如果有的话）。

# php - 在工厂方法中正确使用依赖注入 (PHP)

> ID：14464407
> 
> 赞同：0
> 
> 时间：2013-01-22T17:23:22.113
> 
> 标签：php, dependency-injection, inversion-of-control, factory-method

当我使用 OO 设计模式时，我想确保我真的得到了它。我了解依赖注入的重要性以及服务容器/工厂对象。我喜欢工厂方法的想法，它可以在通过静态方法加载时将依赖项注入自身，返回完整的自身副本。我喜欢使用对象的代码中的干净程度。而且，在测试中，您可以注入不同的对象（覆盖或实例化而不使用工厂方法，见下文）

**以下代码有什么引起警钟的吗？我是否正确理解这一点？**

```
abstract class AbstractClass
{
    public function __construct ()
    {

    }

    public static function factory ()
    {
        throw new Exception ('Please create a concrete class version of the method ' . __FUNCTION__);
    }

    public function inject ($class, $className=null)
    {

        if ($className === null)
        {
            $className          = get_class ($class);
        }

        $this->{$className} = $class;
    }
}

class ConcreteClass extends AbstractClass
{
    public static function factory ()
    {
        $me = new self;
        $me->inject (RebarClass::factory ());
        $me->inject (AsphaltClass::factory ());
        $me->inject (CementClass::factory ());

        return $me;
    }

    public function doSomething ()
    {
        echo $this->RebarClass->doSomethingCool ();
    }

}

class RebarClass extends AbstractClass
{
    public static function factory ()
    {
        return new self;
    }

    public function doSomethingCool ()
    {
        return "I did something, but it wasn't that cool...\n";
    }
}

class AsphaltClass extends AbstractClass
{
    public static function factory ()
    {
        return new self;
    }
}

class CementClass extends AbstractClass
{
    public static function factory ()
    {
        $me = new self;
        $me->inject (AsphaltClass::factory ());
        $me->inject (SandClass::factory ());

        return $me;
    }
}

class SandClass extends AbstractClass
{
    public static function factory ()
    {
        return new self;
    }
} 
```

对我来说，当我在控制器和其他模型中创建和使用对象时，这给了我很大的灵活性，我可以像这样实例化：

```
$concreteClass = ConcreteClass::factory (); 
```

现在我的对象已经按照我想要的方式设置了

```
print_r ($concreteClass);
echo "\n"; 
```

输出：

```
ConcreteClass Object
(
    [RebarClass] => RebarClass Object
    (
    )

    [AsphaltClass] => AsphaltClass Object
    (
    )

    [CementClass] => CementClass Object
    (
        [AsphaltClass] => AsphaltClass Object
        (
        )

        [SandClass] => SandClass Object
        (
        )

    )

) 
```

并且在内部其他对象都易于使用

```
echo $concreteClass->doSomething (); 
```

而且，如果您想将其用于单元测试，您可以执行以下任一操作：

```
$concreteClass = ConcreteClass::factory ();
$concreteClass->inject(new DifferentAsphaltClass, 'AsphaltClass'); // overwrite 
```

或者

```
$concreteClass = new ConcreteClass; // now you are responsible for setting up dependencies yourself
$concreteClass->inject (new YetAnotherAsphaltClass, 'AsphaltClass'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:44:22.850

如果不使用工厂，所提出的方法存在与正确注入所需类相关的一些风险。

由于所需的注入列表不可用，代码也有点难以理解。

我建议使用类构造函数作为依赖项的接收者，而不是使用注入方法。

```
class Concrete {
    public static function Factory() {
        $rebar = Rebar::Factory();
        $asphalt = Asphalt::Factory();
        $sand = Sand::Factory();

        return new Concrete($rebar, $asphalt, $sand);
    }

    public function __construct(IRebar $rebar, IAsphalt $asphalt, ISand $sand) {
        $this->Rebar = $rebar;
        $this->Asphalt = $asphalt;
        $this->Sand = $sand;
    }
} 
```

,`IRebar`和可以是接口 ( `IAsphalt`http://php.net/manual/en/language.oop5.interfaces.php [)](http://php.net/manual/en/language.oop5.interfaces.php)。`ISand`

```
interface IRebar {

}

class MyRebar implements IRebar {
} 
```

# c# - 如何模拟硬件来衡量 .net 应用程序的性能？

> ID：14464410
> 
> 赞同：3
> 
> 时间：2013-01-22T17:23:30.490
> 
> 标签：c#, .net, performance, testing, profiling

我正在尝试优化由 C# 编写的应用程序性能 我正在尝试对我的系统的某些功能进行测量，例如（吞吐量、资源利用率、工作负载、执行时间、垃圾收集等）来测量这些东西我我正在使用某种类型的 Profiler 和性能监视器。

我可以看到这些工具针对不同的硬件配置给出了不同的结果。所以我想限制我的硬件配置以达到最低要求。我的问题是

*   如何虚拟地（通过某种模拟器）限制硬件资源（如 CPU、内存、存储）？
*   是否有任何工具可用于此类测试（开源是最好的？
*   如果我做错了，任何人都可以建议进行这些测试的专业方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:30:29.857

> 如果我做错了，任何人都可以建议进行这些测试的专业方法是什么？

最好的“专业”方法，也是唯一真正准确的衡量标准，是以最低规格制造一台机器并在那里进行测试。任何模拟最多只能是具有这些规格*的*真实系统的近似值。

话虽如此，许多 VM 解决方案允许您将资源分配更改为特定的 VM，这有助于模拟资源可用性降低的情况。例如，[VMWare 允许您分配处理器数量](http://pubs.vmware.com/workstation-9/index.jsp?topic=/com.vmware.ws.using.doc/GUID-9745D560-9243-4262-A585-D709D52B1349.html)、最大内存、磁盘空间等。

# facebook - 检索喜欢的次数是错误的

> ID：14464412
> 
> 赞同：0
> 
> 时间：2013-01-22T17:23:34.957
> 
> 标签：facebook, facebook-like

我想检索像“http://some.url/gallery/?photo={n}”这样的每个网址的点赞数，但我得到了“http://some.url/gallery/”页面的点赞数. 因此，当我尝试计算“喜欢”时，facebook 不考虑 GET 参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:33:58.010

[在调试器](https://developers.facebook.com/tools/debug)中查看您的页面。我敢打赌，您的页面上有定义`http://some.url/gallery/`为规范 url 的代码。

Facebook 只计算规范网址的点赞数。您需要更改代码，以便每个唯一页面（包括所有适当的`GET`参数）都是规范的。

# c - 在函数参数中传递数组时访问数组的最后一个元素显示垃圾值

> ID：14464413
> 
> 赞同：1
> 
> 时间：2013-01-22T17:23:40.337
> 
> 标签：c, arrays, function, argument-passing, garbage

我在函数参数中传递了一个数组，当我尝试访问`arr[-1]`函数体中使用的最后一个元素时，我得到了一些垃圾。有人可以解释一下为什么会这样吗？

这是代码：

```
#include<stdio.h>

using namespace std;

int binsearch(int nelement, int arr[],int maxsize)
{
    int low = 0;
    int high = maxsize;

    printf("%d",arr[-1]);
    return 0;       
}

void main()
{
    int arr[] = {1,2,3,4,5,6,7,8,9};
    int flag = 3;
    printf("%d\n",arr[8]);
    flag = binsearch(flag,arr,sizeof(arr));
} 
```

这是输出：

```
9
-858993460 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:26:08.503

`arr[-1]`不访问最后一个元素。从概念上讲，它访问第一个元素之前的空间，但未定义行为。

要访问最后一个元素，请使用`arr[nelement-1]`或`arr[NumberOfElements-1]`，具体取决于最后一个元素的含义。（您是在考虑数组只包含`nelement`元素，还是想要整个分配数组中的最后一个元素？如果是后者，您需要知道数组中元素的数量才能计算最后一个元素的索引.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:42:10.630

数组索引应无符号。使用负值作为数组的索引会引发未定义的行为。

* * *

作为旁注：

此代码不会将 ( `int`) 元素的数量传递给函数：

```
int arr[] = {1,2,3,4,5,6,7,8,9};
...
flag = binsearch(flag, arr, sizeof(arr)); 
```

由于`sizeof`运算符返回.使用的**字节**`arr`数。

要传递`int`数组提供的 s 数量，您可能希望使用以下构造：

```
flag = binsearch(flag, arr, sizeof(arr)/sizeof(arr[0])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:32:18.763

由于**maxsize**是**sizeof(arr)**而 arr 是一个**int**数组- 它是**(sizeof(int) * no_of_elements_of_arr)**

它必须`arr[(maxsize/sizeof(int)) - 1]`代替`arr[-1]`

`arr[-1]`预计会打印一些**垃圾**值

# c# - 在一个嵌入式代码块中输出两个 viewbag 值

> ID：14464414
> 
> 赞同：2
> 
> 时间：2013-01-22T17:23:45.637
> 
> 标签：c#, asp.net, .net

我的 HomeController.cs 有以下代码

```
ViewBag.Test = "hi there";
ViewBag.Message = "sausages"; 
```

然后我返回 View();

在我的 aspx 页面中，我像这样引用 ViewBag.Message：

```
<h2><%:ViewBag.Message %></h2> 
```

我该如何去做类似的事情（我知道这样做是没有意义的，但是......）

```
<% ViewBag.Message; ViewBag.Test %> 
```

?

为了输出： sausages hi there

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:25:20.353

你在问如何连接字符串：

```
<%: ViewBag.Message + ViewBag.Test %> 
```

您可能还想要一个空间。

# python - 在列表中的多个元素上重复一个函数

> ID：14464419
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:24:12.303
> 
> 标签：python, fasta, dna-sequence

我写了这段代码

```
import sys
file = open(sys.argv[1], 'r')
string = ''
for line in file:
    if line.startswith(">"):
        pass
    else:
        string = string + line.strip()
#print (list(string))
w = input("Please enter window size:")
test = [string[i:i+w] for i in range (0,len(string),w)]
seq = input("Please enter the number of sequences you wish to read:")
#print (test[0:seq]) 
```

它生成一个看起来像这样的列表 -

`['TAAAACACCC', 'TCAATTCAAG', 'GGTTTTTGAG', 'CGAGCTTTTT', 'ACTCAAAGAA', 'TCCAAGATAG', 'CGTTTAAAAA', 'TTTAGGGGTG', 'TTAGGCTCAG', 'CATAGAGTTT']`

现在下一步是读取列表中每个元素中字母`GC`（或 can be ）的出现次数。`CG`有没有办法以输出文件看起来像这样的方式遍历列表：

```
Segment 1- The %GC is <the calculated number>
Segment 2- The %GC is <the calculated number>
Segment 3- The %GC is <the calculated number> 
```

由于文件太大，而且`'TAAGATATA'`我将获得的段数（列表中的每个单独元素，如在输出文件中。另外，由于我是 python（和编程）的新手，所以我不太擅长使用函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:32:32.867

我不确定你在问什么。

```
inp = ['TAAAACACCC', 'TCAATTCAAG', 'GGTTTTTGAG', 'CGAGCTTTTT', 'ACTCAAAGAA', 'TCCAAGATAG', 'CGTTTAAAAA', 'TTTAGGGGTG', 'TTAGGCTCAG', 'CATAGAGTTT']

for i, segment in enumerate(inp):
    print "Segment {} - The %GC is {}".format(i, segment.count("GC")) 
```

给

```
Segment 0 - The %GC is 0
Segment 1 - The %GC is 0
Segment 2 - The %GC is 0
Segment 3 - The %GC is 1
Segment 4 - The %GC is 0
Segment 5 - The %GC is 0
Segment 6 - The %GC is 0
Segment 7 - The %GC is 0
Segment 8 - The %GC is 1
Segment 9 - The %GC is 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:44:00.143

你可以试试`map`python中的函数。[http://docs.python.org/3.1/library/functions.html#map](http://docs.python.org/3.1/library/functions.html#map)提供了它的一般用法，但这里是一个使用 Python3 的示例。

```
def func1(myObject):
    '''Trivial example function'''
    return myObject * 2
myList = [1,2,3]
myMap = map(func1,myList)
print(list(myMap)) 
```

Map 对可迭代项（例如列表、字符串等）中的每个项目执行一个方法，并将每个方法执行的结果放入一个映射中，然后可以将其打印为列表或像列表一样迭代。

如果您希望 myObject 本身是一个列表，那应该不是问题，只要您相应地使用它即可。

这回答了你的问题了吗？

# regex - 正则表达式替换逗号分隔列表中的冒号前缀，引号除外

> ID：14464420
> 
> 赞同：0
> 
> 时间：2013-01-22T17:24:14.953
> 
> 标签：regex

我想要一个`:`用问号 ( `?`) 替换冒号 ( ) 的正则表达式，如下所示。
但如果冒号在*单引号*( )内，它应该*保留冒号。**`'`*

 *例如，这个输入字符串：

```
(:a,:abc,'用:冒号和逗号引用',:more)
```

应改为：

```
(?a,?abc,'用:冒号和逗号',?more)
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:26:16.740

```
String str = "(:a,:abc,'quoted with :colon, and comma',:more)";
StringBuffer sb = new StringBuffer();
boolean inQuote = false;
for (char c : str.toCharArray()) {
    if (c == '\'') {
        inQuote = !inQuote;
        sb.append(c);
    } else if (inQuote) {
        sb.append(c);
    } else if(c == ':') {
        sb.append('?');
    } else {
        sb.append(c);
    }
}
str = sb.toString();
System.out.println(str); 
```

产生 的预期输出`(?a,?abc,'quoted with :colon, and comma',?more)`。但是，它显然没有使用正则表达式。另请记住，如果您允许转义引号，我的解决方案将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:59:09.153

这是另一个适用于`replaceAll`.

原始正则表达式：

```
((?:^\(|\G)(?: *'(?:[^'\\]|\\.)*' *,| *[^:' ][^,]* *,)* *):([^,]* *(?:,|\)$)) 
```

带引号的字符串（用于`replaceAll`）：

```
"((?:^\\(|\\G)(?: *'(?:[^'\\\\]|\\\\.)*' *,| *[^:' ][^,]* *,)* *):([^,]* *(?:,|\\)$))" 
```

替换（用于`replaceAll`）：

```
"$1?$2" 
```

样本输入：

```
( :a , :abc, '引用:冒号和逗号', skdhfks'sdfkdf , :sdf, 'sdfds\'f', :sdfksdf, sdkhfksd , :dfsd, sdfk'fjsdhfkf, 'werwer', :sdf, :Sdf, skhfskjdf, 'asdads\' :asdkahsd ad' )

```

样本输出：

```
( ?a , ?abc, '用:冒号和逗号引用', skdhfks'sdfkdf , ?sdf, 'sdfds\'f', ?sdfksdf, sdkhfksd , ?dfsd, sdfk'fjsdhfkf, 'werwer', ?sdf, ?sdf, skhfskjdf, 'asdads\' :asdkahsd ad' )

```

基本上，前后的空格`,`是自由允许的。如果`'`不是第一个字符，则不被视为带引号的字符串。`'`允许在带引号的字符串中转义 - 实际上任何类型的转义`\`都是允许的。不允许使用空参数，例如`(:a, , :b)`.

[**演示**](http://www.regex101.com/r/kR5kB3)

如果没有您的文本的详细说明，我将在这里做出一些疯狂的假设，如您所见。

**解释**

为了便于解释。我将删除一些捕获组`()`，这仅对替换有用。

```
(?:^\(|\G)(?: *'(?:[^'\\]|\\.)*' *,| *[^:' ][^,]* *,)* *:[^,]* *(?:,|\)$) 
```

把它分开（注意有些行前面有空格，它是正则表达式的一部分）：

```
(?:^\(|\G)
(?:
 *'(?:[^'\\]|\\.)*' *,
|
 *[^:' ][^,]* *,
)*
 *:[^,]* *
(?:,|\)$) 
```

正则表达式的每个匹配项都将包含：不应替换的标记，后跟一个需要替换的标记。

正则表达式以 开头`(?:^\(|\G)`，它将`(`在字符串的开头匹配，或者从最后一个匹配的位置继续`\G`。

不应替换的标记是带引号的字符串`'(?:[^'\\]|\\.)*'`或不以or开头且不包含逗号`[^:' ][^,]*`的文本序列。我允许使用 转义带引号的字符串，这意味着后跟任何字符。我允许任意数量的不感兴趣的令牌。`'``:``,``\\.``\``*`

您可以看到一些空格后跟`*`，这意味着我允许在标记前后有任意间距。

然后是我们感兴趣的token：`:[^,]*`.

然后正则表达式以 结尾`(?:,|\)$)`，这意味着它`)`在结尾处遇到，或`,`. 这个结尾部分是`\G`工作所必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:35:54.687

您可以替换`:`后面的所有`even numbers`of `quotes (')`。它至少适用于这种情况： -

```
String str = "(:a,:abc,'quoted with :colon, and comma',:more)";     
str = str.replaceAll("[:](?=(?:[^']*'[^']*')*[^']*$)", "?");

System.out.println(str); 
```

**输出： -**

```
(?a,?abc,'quoted with :colon, and comma',?more) 
```

因此，考虑到每个开头引号都有一个结尾引号，因此 ,`:`内部`quotes`永远不会跟着偶数个`quotes`，因此它不会被 . 替换`?`。*

# android - 确定两个片段何时可 见

> ID：14464423
> 
> 赞同：0
> 
> 时间：2013-01-22T17:24:25.983
> 
> 标签：android, android-fragments

我原以为这很容易，但事实证明它比我想象的要困难。我只想确定两个片段何时在我的一个片段中的屏幕上可见。我不确定是否`onCreate`是最好的地方，但我尝试了`onResume`, `onActivityCreated`,`onResume`和. 我认为这些片段对代码实际上是不可见的，直到稍后，但不确定。`onCreateView``onAttach`

这是我正在尝试使用的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    android:orientation="horizontal"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
>
    <fragment android:name="com.app.Fragment1"
            android:id="@+id/fragment1"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
     />

    <fragment android:name="com.app.Fragment2"  
            android:id="@+id/fragment2"
            android:layout_width="0dp"
            android:layout_weight="2"
            android:layout_height="fill_parent"
     />
</LinearLayout>

public class Fragment2 extends SherlockListFragment
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setHasOptionsMenu(true);

        final Fragment1 f1 = (Fragment1)getFragmentManager().findFragmentById(R.id.fragment1);
        final Fragment2 f2 = (Fragment2)getFragmentManager().findFragmentById(R.id.fragment2);

        Boolean isVisible = (f1 != null && f1.isVisible() && f2 != null && f2.isVisible());
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:30:28.547

[`onStart()`](https://developer.android.com/reference/android/app/Fragment.html#onStart%28%29)是当片段对用户可见时，所以我建议将您的`isVisible`代码放入`onResume`以确保安全。

# python - 以定时间隔将命令输出打印到文件

> ID：14464429
> 
> 赞同：0
> 
> 时间：2013-01-22T17:24:39.043
> 
> 标签：python, shell, timer, intervals, timed

我需要以定时间隔将命令的输出打印到单个文件的能力。我正在使用的 Python 示例如下：

```
import time
i = 0
print('START!')

while i >= 0:
        f = open('timelog.txt','a')
        nowstr = time.strftime('%Y-%m-%d %H:%M:%S')
        print(nowstr)
        f.write(nowstr)
        f.write('\n')
        f.close()
        time.sleep(60)
        i = i + 1

print('DONE!'); 
```

上面的代码做了它需要做的事情，并且每 60 秒将日期和时间打印到一个文件中的一个新行（不会覆盖现有条目或日期）。我需要调整该代码以以固定的时间间隔执行 shell 命令（目标是按时间间隔将 shell 命令输出记录到文件中）。

谢谢你。

# android - json 结果为空。如何检查json是否为空

> ID：14464439
> 
> 赞同：1
> 
> 时间：2013-01-22T17:25:17.823
> 
> 标签：android

我有活动登录

```
package com.app.DatabaseSample;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import com.app.library.DatabaseHandler;
import com.app.library.UserFunctions;

public class LoginActivity extends Activity {
    Button btnLogin;
    Button btnLinkToRegister;
    EditText inputUsername;
    EditText inputPassword;
    TextView loginErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_USER_ID = "userid";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        // Importing all assets like buttons, text fields
        inputUsername = (EditText) findViewById(R.id.loginUsername);
        inputPassword = (EditText) findViewById(R.id.loginPassword);
        btnLogin = (Button) findViewById(R.id.btnLogin);
        loginErrorMsg = (TextView) findViewById(R.id.login_error);

     // Login button Click Event
        btnLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                readLogin(view);
            }
        });

    }

    private class ProcessLogin extends AsyncTask<String, String, JSONObject> {

        private ProgressDialog dialog;
        private ProgressDialog pDialog;
        protected Context applicationContext;
String email,password;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            inputUsername = (EditText) findViewById(R.id.loginUsername);
            inputPassword = (EditText) findViewById(R.id.loginPassword);
             email = inputUsername.getText().toString();
             password = inputPassword.getText().toString();
            pDialog = new ProgressDialog(LoginActivity.this);
            pDialog.setMessage("Loading User ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected JSONObject doInBackground(String... args) {

            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.loginUser(email, password);

            Log.d("Button", "Login");

            return json;

        }

        @Override
        protected void onPostExecute(JSONObject json) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            UserFunctions userFunction = new UserFunctions();

            try {
                if(!json.has(KEY_SUCCESS)){

                Toast.makeText(getApplicationContext(), "No more data",
                        Toast.LENGTH_LONG).show();   
         }

            else if (json.getString(KEY_SUCCESS) != null){
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_USER_ID), json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DatabaseSample.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }else{
                        // Error in login
                        loginErrorMsg.setText("Username atau Password salah!");
                    }
                }
                           else {
                               loginErrorMsg.setText("koneksi gagal ke server");
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

        }
      }

    public void readLogin(View view) {
        new ProcessLogin().execute();

    // check for login response

  }
} 
```

之前，onPostExecute 是强制关闭导致 json 结果为空，如何在执行前检查 onPostExecute 中的 json 是否为空`if (json.getString(KEY_SUCCESS) != null)`？所以当结果为空时应用程序不会强制关闭？

这是我的日志猫

```
01-23 01:05:29.851: E/AndroidRuntime(4513): FATAL EXCEPTION: main
01-23 01:05:29.851: E/AndroidRuntime(4513): java.lang.NullPointerException
01-23 01:05:29.851: E/AndroidRuntime(4513):     at com.app.DatabaseSample.LoginActivity$ProcessLogin.onPostExecute(LoginActivity.java:108)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at com.app.DatabaseSample.LoginActivity$ProcessLogin.onPostExecute(LoginActivity.java:1)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at android.os.AsyncTask.finish(AsyncTask.java:417)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at android.os.Looper.loop(Looper.java:130)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at java.lang.reflect.Method.invoke(Method.java:507)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-23 01:05:29.851: E/AndroidRuntime(4513):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:28:37.157

```
if (json != null && json.getString(KEY_SUCCESS) != null){
    // PARSE RESULT 
}else{
    // SHOW NOTIFICIATION: URL/SERVER NOT REACHABLE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:29:05.273

`onPostExecute`将您的代码更改为：

```
@Override
protected void onPostExecute(JSONObject json) {
 // dismiss the dialog after getting all products
pDialog.dismiss();
UserFunctions userFunction = new UserFunctions();

     try {
         if(!json.has(KEY_SUCCESS)){

                  // your code here...       
           }  
          else if (json.getString(KEY_SUCCESS) != null) {
              // your code here..
           }
          else {
             // your code here...  
           }
       }
     } catch (JSONException e) {
       e.printStackTrace();
    } 
```

因为目前您正在尝试在方法内创建无效的`json1`JsonObject `onPostExecute`。使用[JSONObject.has(String name)](http://developer.android.com/reference/org/json/JSONObject.html#has%28java.lang.String%29)检查 json 对象是否包含名称，然后将名称值检查为 null

# single-sign-on - 如何使用私钥和公钥创建自签名 x509 证书？

> ID：14464441
> 
> 赞同：11
> 
> 时间：2013-01-22T17:25:20.640
> 
> 标签：single-sign-on, x509certificate, adfs2.0, saml-2.0

我正在使用 SAML2 和 ADFS2 (IdP) 创建 SSO“概念证明”。登录工作正常，但是 ADFS2 要求对我的注销请求进行签名（使用私钥），然后我想我会在我的依赖方信任中的签名选项卡下添加相同的证书（.cer 文件）在 ADFS2 中。唯一的问题是我的应用程序（服务提供商）没有证书。我知道我可以为此创建一个自签名证书，但我似乎无法弄清楚如何创建一个包含我需要的一切的证书。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T17:50:31.667

为了生成自签名证书，您需要 openssl 库，因此：

德比安： `apt-get install openssl`

Centos/红帽： `yum install openssl`

然后按照以下 3 个步骤操作：

*   生成私钥：

    `openssl genrsa -out server.pem 2048`

*   生成 CSR：（在“通用名称”中设置您的服务提供商应用程序的域）

    `openssl req -new -key server.pem -out server.csr`

*   生成自签名证书

    `openssl x509 -req -days 365 -in server.csr -signkey server.pem -out server.crt`

在流程结束时，您将获得 server.csr（证书签名请求）、server.pem（私钥）和 server.crt（自签名证书）

在 Windows 中，您可以使用[makecert.exe](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=VS.100%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T22:32:09.087

在组合 ADFS 概念证明时，我使用了适用于 Windows 的 SelfSSL 工具。具体来说，这家伙[有一个IIS7的增强版](http://blogs.iis.net/thomad/archive/2010/04/16/setting-up-ssl-made-easy.aspx)。

示例命令：

```
selfssl7.exe /N cn=www.example.com /K 2048 /V 3652 /X /F C:\example.pfx /W foo 
```

使用 2048 位密钥生成“example.pfx”文件，有效期约为 10 年，密码“foo”保护私钥，通用名称为“www.example.com”。您可以将其导入本地计算机的证书存储，然后根据需要将其导出为带有或不带有私钥信息的 .cer 文件。

# r - 使用带有替换函数的 get()

> ID：14464442
> 
> 赞同：13
> 
> 时间：2013-01-22T17:25:21.177
> 
> 标签：r, function, syntax, base, replace

谁能向我解释为什么会出现以下示例？

```
#Create simple dataframe
assign( "df" , data.frame( P = runif(5) , Q = runif(5) , R = runif(5) ) ) 

#Return the dataframe from the given character vector
get( "df" ) 
            P          Q          R
1  0.17396222 0.90994676 0.90590685
2  0.33860092 0.98078739 0.38058921
3  0.80751402 0.93229290 0.82853094
4  0.05460417 0.55448507 0.01605027
5  0.04250316 0.03808318 0.40678270

#Return the column names of df
colnames( get( "df" ) )
[1] "P" "Q" "R"

#But using a replacement function...
colnames( get( "df" ) ) <- c( "S" , "T" , "U" ) 
    Error in colnames(get("df")) <- c("S", "T", "U") : 
    target of assignment expands to non-language object 
```

我想 **A)**想知道为什么替换功能不能以这种方式工作`get()`？

**b）**如果有一些方法可以解决这个问题，考虑到我在下面概述的问题；

我的问题是我有很多对象，在循环中创建（使用玩具示例），如下所示：`assign( paste( "Object" , i , sep = "." ) , rnorm(1000 , i) )`，`i`向量在哪里，说`i <- 1:1000`然后我希望能够分配名称（例如从不同的向量）到循环中的每个对象，但`names( get( paste( "Object" , i , sep = "." ) ) <- someNewName`不像上面的例子那样工作。

但`get( paste( "Object" , i , sep = "." ) )`确实返回`NULL`这些对象的名称（或）。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T19:16:59.440

要了解为什么这不起作用，您需要了解什么起作用`colnames<-`。就像其中的每个函数看起来都在修改一个对象，它实际上是在修改一个副本，所以在概念上`colnames(x) <- y`被扩展为：

```
copy <- x
colnames(copy) <- y
x <- copy 
```

如果您以通常的方式调用替换运算符，则可以写得更紧凑：

```
x <- `colnames<-`(x, y) 
```

所以你的例子变成

```
get("x") <- `colnames<-`(get("x"), y) 
```

右侧是有效的 R，但整个命令不是，因为您不能为函数的结果赋值：

```
x <- 1
get("x") <- 2
# Error in get("x") <- 2 : 
#  target of assignment expands to non-language object 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-22T17:45:57.743

以您在问题中演示的方式使用`assign`在 R 中至少是不常见的。通常您只需将所有对象放在一个列表中。

所以，而不是

```
for (i in 1:10) {
assign( paste( "Object" , i , sep = "." ) , rnorm(1000 , i) )} 
```

你会做的

```
objects <- list()
for (i in 1:10) {
objects[[i]] <- rnorm(1000 , i) } 
```

事实上，这种结构非常常见，以至于有一个（优化的）函数（`lapply`），它做了类似的事情：

```
objects <- lapply(1:10, function(x) rnorm(1000,x)) 
```

然后，您可以访问，例如，第一个对象 as`objects[[1]]`并且有几个用于处理列表的函数。

# sql - 如何为 SQL Server 重写此 MS Access 表达式

> ID：14464443
> 
> 赞同：2
> 
> 时间：2013-01-22T17:25:22.423
> 
> 标签：sql, sql-server, sql-server-2008

我是该站点的新手，我对我在 SQL Server 2008 中重做的 Access 表单中的一些代码有疑问，它在一行中包含 SUM、IIF 和 IsNumeric，我对如何重写它感到困惑在 SQL 中。

```
Sum([Employee COUNT]*IIf(IsNull([2011]),0,CDbl([2011]))*IIf(IsNumeric([Length]),CDbl([Length]),0)) AS Cost 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:32:31.630

我相信这会满足您的需求：

```
Sum([Employee COUNT]
    * (case 
            when [2011] Is Null 
            then 0 
            else cast([2011] as float) 
        end)
    * (case 
            when IsNumeric([Length])= 1 
            then cast([Length] as float) 
            else 0 
        end)) AS Cost 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:33:19.663

```
SUM([Employee Count] 
  * COALESCE(
      [2011],
       CASE WHEN 
         ISNUMERIC([2011]) = 1 
       THEN 
         CAST([2011] AS DECIMAL(18,4) 
       ELSE 
         0 
       END
    )
  * CASE WHEN 
      ISNUMERIC([Length]) = 1
    THEN 
      -- choose your own precision here.
      CAST ([Length] AS DECIMAL(18,4))
    ELSE
      0
    END
) AS Cost 
```

# neo4j - 在 neo4j 中针对节点显示名称

> ID：14464445
> 
> 赞同：4
> 
> 时间：2013-01-22T17:25:31.527
> 
> 标签：neo4j

谁能告诉我如何在图形查看器中以与演示站点上显示的相同方式显示节点的**名称：http:** [//console.neo4j.org/](http://console.neo4j.org/)

在这里，它显示了**Neo**针对节点 1 而不仅仅是节点 ID。我正在通过管理界面创建节点 - 即。与页面顶部标题为“图表设置”的站点上的示例不同。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T03:34:10.770

为了在管理界面的数据浏览器部分执行此操作，您可以配置“样式”。在样式中，您可以为某些类型的节点配置过滤器以具有不同的样式和标记（圆形、矩形、字体大小）。它有点笨拙，但可以用来处理数据。

我以我的一些国际象棋数据库的截图为例（我将 FEN 位置属性设置为节点标签）： ![在此处输入图像描述](../Images/ca9504fe087ff0a16f4aa3b9b01e57ad.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:22:55.633

一个节点没有名字，除非你给它一个名字属性。

据我所知，管理工具中的图形查看器只能显示节点 ID。

我推荐[Neoclipse](https://github.com/neo4j/neoclipse)，一个可以作为插件安装在 Eclipse 中的工具，也可以作为独立程序下载。它将显示您的节点并提供大量详细信息。

# python - 使用 numpy 高效地将 16 位图像数据转换为 8 位进行显示，具有强度缩放

> ID：14464449
> 
> 赞同：12
> 
> 时间：2013-01-22T17:25:42.850
> 
> 标签：python, image, image-processing, numpy

我经常将 16 位灰度图像数据转换为 8 位图像数据进行显示。调整最小和最大显示强度以突出图像的“有趣”部分几乎总是有用的。

下面的代码大致完成了我想要的，但它丑陋且效率低下，并且制作了许多图像数据的中间副本。**如何以最少的内存占用和处理时间获得相同的结果？**

```
import numpy

image_data = numpy.random.randint( #Realistic images would be much larger
    low=100, high=14000, size=(1, 5, 5)).astype(numpy.uint16)

display_min = 1000
display_max = 10000.0

print(image_data)
threshold_image = ((image_data.astype(float) - display_min) *
                   (image_data > display_min))
print(threshold_image)
scaled_image = (threshold_image * (255\. / (display_max - display_min)))
scaled_image[scaled_image > 255] = 255
print(scaled_image)
display_this_image = scaled_image.astype(numpy.uint8)
print(display_this_image) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T20:01:03.930

你正在做的是[半色调](http://en.wikipedia.org/wiki/Halftone)你的形象。

其他人提出的方法效果很好，但是他们一遍又一遍地重复大量昂贵的计算。由于`uint16`最多有 65,536 个不同的值，因此使用查找表 (LUT) 可以大大简化事情。而且由于 LUT 很小，您不必担心就地执行操作或不创建布尔数组。以下代码重用 Bi Rico 的函数来创建 LUT：

```
import numpy as np
import timeit

rows, cols = 768, 1024
image = np.random.randint(100, 14000,
                             size=(1, rows, cols)).astype(np.uint16)
display_min = 1000
display_max = 10000

def display(image, display_min, display_max): # copied from Bi Rico
    # Here I set copy=True in order to ensure the original image is not
    # modified. If you don't mind modifying the original image, you can
    # set copy=False or skip this step.
    image = np.array(image, copy=True)
    image.clip(display_min, display_max, out=image)
    image -= display_min
    np.floor_divide(image, (display_max - display_min + 1) / 256,
                    out=image, casting='unsafe')
    return image.astype(np.uint8)

def lut_display(image, display_min, display_max) :
    lut = np.arange(2**16, dtype='uint16')
    lut = display(lut, display_min, display_max)
    return np.take(lut, image)

>>> np.all(display(image, display_min, display_max) ==
           lut_display(image, display_min, display_max))
True
>>> timeit.timeit('display(image, display_min, display_max)',
                  'from __main__ import display, image, display_min, display_max',
                   number=10)
0.304813282062
>>> timeit.timeit('lut_display(image, display_min, display_max)',
                  'from __main__ import lut_display, image, display_min, display_max',
                  number=10)
0.0591987428298 
```

所以有一个 5 倍的加速，我猜这不是一件坏事……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:24:10.833

我会避免将图像转换为浮动，您可以执行以下操作：

```
import numpy as np

def display(image, display_min, display_max):
    # Here I set copy=True in order to ensure the original image is not
    # modified. If you don't mind modifying the original image, you can
    # set copy=False or skip this step.
    image = np.array(image, copy=True)

    image.clip(display_min, display_max, out=image)
    image -= display_min
    image //= (display_min - display_max + 1) / 256.
    image = image.astype(np.uint8)
    # Display image 
```

此处，图像的可选副本以其本机数据类型制作，最后一行制作了 8 位副本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T17:39:28.790

要减少内存使用，请就地进行剪辑并避免创建布尔数组。

```
dataf = image_data.astype(float)
numpy.clip(dataf, display_min, display_max, out=dataf)
dataf -= display_min
datab = ((255\. / (display_max - display_min)) * dataf).astype(numpy.uint8) 
```

如果将裁剪限制保持为整数值，则可以交替执行以下操作：

```
numpy.clip(image_data, display_min, display_max, out=image_data)
image_data-= display_min
datab = numpy.empty_like(image_data)
numpy.multiply(255\. / (display_max - display_min), image_data, out=datab) 
```

注意：在创建数组之前的最后一行仍然会创建一个临时浮点数组`uint8`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-19T22:33:37.280

这是我在交叉验证板上在此解决方案下的评论中找到的答案 [https://stats.stackexchange.com/a/70808/277040](https://stats.stackexchange.com/a/70808/277040)

基本上从 uint16 转换为 uint8 算法看起来像这样

```
a = (255 - 0) / (65535 - 0)
b = 255 - a * 65535
newvalue = (a * img + b).astype(np.uint8) 
```

通用版本看起来像这样

```
def convert(img, target_type_min, target_type_max, target_type):
    imin = img.min()
    imax = img.max()

    a = (target_type_max - target_type_min) / (imax - imin)
    b = target_type_max - a * imax
    new_img = (a * img + b).astype(target_type)
    return new_img 
```

例如

`imgu8 = convert(img16u, 0, 255, np.uint8)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-02T05:08:18.267

我知道这是一个旧的胎面，但我们现在有了带有 gpu 加速的cupy。使用 cupy 总是更快（Jaime 的两种方法都以更接近的速度运行）。

```
import numpy as np
import cupy as cp
import timeit
rows, cols = 768, 1024
image = np.random.randint(100, 14000,
                             size=(1, rows, cols)).astype(np.uint16)
display_min = 1000
display_max = 10000

def display(image, display_min, display_max): # copied from Bi Rico
    # Here I set copy=True in order to ensure the original image is not
    # modified. If you don't mind modifying the original image, you can
    # set copy=False or skip this step.
    image = np.array(image, copy=True)
    image.clip(display_min, display_max, out=image)
    image -= display_min
    np.floor_divide(image, (display_max - display_min + 1) / 256,
                    out=image, casting='unsafe')
    return image.astype(np.uint8)

def lut_display(image, display_min, display_max) :
    lut = np.arange(2**16, dtype='uint16')
    lut = display(lut, display_min, display_max)
    return np.take(lut, image)

def displaycp(image2, display_min, display_max): # copied from Bi Rico
    # Here I set copy=True in order to ensure the original image is not
    # modified. If you don't mind modifying the original image, you can
    # set copy=False or skip this step.
    image2 = cp.array(image2, copy=True)
    image2.clip(display_min, display_max, out=image2)
    image2 -= display_min
    cp.floor_divide(image2, (display_max - display_min + 1) / 256,
                    out=image2, casting='unsafe')
    return image2.astype(cp.uint8)

def lut_displaycp(image2, display_min, display_max) :
    lut = cp.arange(2**16, dtype='uint16')
    lut = displaycp(lut, display_min, display_max)
    return cp.take(lut, image2)

np.all(display(image, display_min, display_max) ==
           lut_display(image, display_min, display_max))

imagecp = cp.asarray(image)
type(imagecp)

cp.all(displaycp(imagecp, display_min, display_max) ==
           lut_displaycp(imagecp, display_min, display_max))

np.all(cp.asnumpy(displaycp(imagecp, display_min, display_max)) ==
          display(image, display_min, display_max)) 
```

计时

```
timeit.timeit('display(image, display_min, display_max)',
                  'from __main__ import display, image, display_min, display_max',
                   number=100) 
```

1.2715457340000285

```
timeit.timeit('lut_display(image, display_min, display_max)',
                  'from __main__ import lut_display, image, display_min, display_max',
                  number=100) 
```

0.27357000399933895

```
timeit.timeit('displaycp(imagecp, display_min, display_max)',
                  'from __main__ import displaycp, imagecp, display_min, display_max',
                   number=100) 
```

0.018452465999871492

```
timeit.timeit('lut_displaycp(imagecp, display_min, display_max)',
                  'from __main__ import lut_displaycp, imagecp, display_min, display_max',
                  number=100) 
```

0.015030614999886893

# android - 它在 Android 源代码的哪个位置显示应用程序切换器？

> ID：14464457
> 
> 赞同：1
> 
> 时间：2013-01-22T17:26:04.577
> 
> 标签：android, android-source

作为一个副项目，我一直在阅读一些 Android AOSP 代码，我突然想到我不知道代码在哪里显示应用程序切换器。我已经搜索了源代码树并进行了一些互联网搜索，但无济于事。有人可以指出我正确的方向（文件/目录/类名等）我对此很陌生，所以请多多包涵。

具体来说，我对检测到长按 Home 并导致显示应用程序切换器 UI 的代码部分感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:01:32.143

Home键、Home键长按、电源键全部处理`frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java`

您可以 `handleLongPressOnHome`在上面显示RecentApplicationsDialog 的源代码中检查功能。

我提到的功能来自 ICS 代码。

# git - git植入分支

> ID：14464460
> 
> 赞同：0
> 
> 时间：2013-01-22T17:26:09.367
> 
> 标签：git, version-control

我在本地克隆了一个 git repo。我已经对 master 分支进行了多次提交，并且*没有*推送到远程。与此同时，其他人也加入了远程大师。现在我想将我的提交保留在远程仓库中，但是在一个从我最初克隆的提交开始的分支中。主要原因是保留我的提交历史，而不是与 master 合并。提前感谢您提供任何有用的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:17:28.120

假设您的遥控器是`origin`并且您的本地分支是`master`并且您想推送到`new_branch`：

```
git push origin master:new_branch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:39:26.343

cjc343 的回答虽然在技术上是正确的，但对我来说却是不完整的。我建议为您的工作建立一个本地分支，然后推动它。这样，master 可以跟踪 origin/master，相信我，当你这样做时，生活会更轻松。

假设您在 HEAD，并且您的主人仍然在您的初始克隆点之外进行了几次提交......

```
git checkout -b new_branch
git push origin new_branch
git checkout master
git reset --hard origin/master 
```

这 1) 创建一个新的本地分支，2) 将其推送到远程存储库，3) 切换到 master，以及 4) 将 master 重置为 origin/master，这样您就可以再次轻松地拉取其他人的工作。

# regex - 正则表达式匹配包含 n 个或更多指定字符的文本

> ID：14464461
> 
> 赞同：17
> 
> 时间：2013-01-22T17:26:10.580
> 
> 标签：regex

我需要找到包含超过 10 个“，”的行（我在导入 CSV 时出错，所以我需要手动更正）。我正在使用 Notepad++，所以我不需要写 reqex 来匹配行，只需要匹配逗号。

```
(.*,.*){11,100}   //does not work 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-22T17:28:29.417

`.*`也匹配逗号。您需要排除具有否定字符类的那些（`[^,]`匹配*除*逗号以外的任何字符）：

```
^[^,\r\n]*(?:,[^,\r\n]*){11,}$ 
```

我已添加`\r\n`到字符类中，否则它将跨换行符匹配。

但是请注意，这也会计算引用字符串中包含的逗号，因此如果您有逗号，您将误判 CSV 行中的字段数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T17:55:17.277

假设 Notepad++ 版本 6+（它使用 PCRE Perl 兼容的正则表达式库）并且 ' ***.** 匹配换行符*' 框未在“查找”窗口中打勾：

`(.*?,){11,}`

如果一行包含超过 10 个逗号，这将从行首匹配到最后一个逗号。

`(.*?,)`尽可能少地匹配除换行符之外的任何字符，直到下一个字符是逗号；`{11,}`表示 11 次或更多次。

如果您希望正则表达式工作，无论 ' 是否***。**匹配换行符*'框被勾选，你可以使用：

```
 ([^\n]*?,){11,} 
```

如果 ' ，您的正则表达式确实有效***。**匹配换行符*'框没有打勾，但由于它*贪婪地*匹配任何字符，可能有如此大量的潜在匹配项，它可能会挂起应用程序。`?`在之后添加`.*`以便通配符*懒惰地*或*勉强地*匹配，即尽可能少地匹配，应该可以解决问题。

[PCRE 手册页](http://www.pcre.org/pcre.txt)
[Perl 正则表达式文档](http://perldoc.perl.org/perlre.html)- 推荐。
[Notepad++“过时”的正则表达式教程](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Regular_Expressions)

# ado.net - 通过 SSIS 更新时的 Sybase 身份验证问题

> ID：14464469
> 
> 赞同：1
> 
> 时间：2013-01-22T17:26:40.540
> 
> 标签：ado.net, ssis, sybase

在 SSIS 包中，我使用 ADO.Net 连接与 Sybase v9 数据提供程序进行一系列更新。

该包将随机失败，并显示“身份验证违规”的错误消息，它永远不会在同一记录中。经过一番研究，我发现 Sybase 需要以下格式的 connection_authentication 字符串：

```
SET TEMPORARY OPTION connection_authentication='Company=CompanyName Plc;Application=AppName;Signature=000fa55157ed..etc' 
```

我知道我的数据库的正确字符串，因为我运行了以下内容：

```
CALL sa_conn_properties( ); 
```

所以我知道要使用的正确字符串，但是如何将它合并到 SSIS 中。理论上它可以被称为 SQL 语句，如下所示：

```
EXEC SQL SET TEMPORARY OPTION connection_authentication='Company=CompanyName Plc;Application=AppName;Signature=000fa55157ed..etc' 
```

但是当在 SQL 任务中使用时，这只会给出错误消息“无法从过程中设置连接身份验证”。理想情况下，我想将字符串合并到连接中，而不是更改每个 SQL 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T08:23:32.150

找到了答案：

在 SSIS 中创建一个新的 ADO.Net 连接管理器。

对于提供者，选择“.Net Providers\Odbc 数据提供者”。

选择使用连接字符串的单选按钮。

输入以下格式的连接字符串（但省略了我为清楚起见添加的额外空格）：

```
Driver={Adaptive Server Anywhere 9.0};
uid=MyName;
compress=No;
commlinks=SharedMemory,TCPIP{Host=10.10.10.10};
disablemultirowfetch=Yes;
debug=No;
integrated=No;
autostop=No;
enginename=MyServer;
initstring=SET TEMPORARY OPTION CONNECTION_AUTHENTICATION='
    Company=MyComapny;
    application=MyApplication;
    signature=000fa552 
```

连接字符串的关键部分是添加身份验证数据的 initstring 部分。

我从以下页面找到了答案：

[http://dcx.sybase.com/1201/en/dbadmin/running-s-3417964.html](http://dcx.sybase.com/1201/en/dbadmin/running-s-3417964.html)

# android - Android：在图书馆项目中使用服务

> ID：14464477
> 
> 赞同：1
> 
> 时间：2013-01-22T17:27:00.177
> 
> 标签：android, service

我正在制作一个 Android 库项目，用于通过我们的 API 播放音乐文件。目前我正在使用 MusicService（带有媒体播放器）来播放音乐文件。MusicService 包含一个收音机的实例。一台收音机正在为 MusicService 提供音乐文件。因此，收音机可以用于检索 SD 卡上的文件、通过 api 调用检索文件……收音机的类型可以随着使用相同库构建的不同应用程序而不同。

现在，我想知道......如果我用同一个库创建 2 个应用程序。一个应用程序使用带有 SD 卡的收音机，另一个应用程序使用带有 api 歌曲的收音机。这两个应用程序是否会相互干扰，都在操作同一个服务？

因此，当我第一次从 SD 卡应用程序开始播放时，点击播放，服务开始播放。如果那时，我在设备上打开第二个应用程序并点击暂停，它会暂停从另一个应用程序播放的音乐吗？

我知道这听起来很复杂，但我希望我把我的问题说清楚了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:50:22.750

Android 库项目被合并到每个使用它们的应用程序的 APK 中（在构建时）。一旦它们被合并，它们就是完全独立的、独立的进程等（默认情况下）。因此，您不应该在使用相同库的同一设备上的不同应用程序之间有任何重叠或干扰。

[http://developer.android.com/tools/projects/index.html#LibraryProjects](http://developer.android.com/tools/projects/index.html#LibraryProjects)

这是一个相关问题，答案更深入：[Android Shared Service?](https://stackoverflow.com/questions/6204492/android-shared-service)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T17:45:00.840

是的，服务会干扰，除非您以不同的意图启动它们。根据我的经验，只会触发其中一个，这可能会向您显示不稳定的行为。

您可以做什么，也许，在两个应用程序中为您的服务定义单独的操作，并使用隐式意图来启动它们。

如果您使用的是显式意图，我认为它可能会起作用，但不确定。你有没有观察到什么？

# java - Guava 输入/输出供应商和 URLConnection

> ID：14464486
> 
> 赞同：3
> 
> 时间：2013-01-22T17:27:34.490
> 
> 标签：java, android, inputstream, guava, urlconnection

我正在尝试重构（利用 Guava）一些将 POST 请求发送到 Web 服务并读取字符串回复的代码。

目前我的代码如下所示：

```
 HttpURLConnection conn = null;
    OutputStream out = null;

    try {
        // Build the POST data (a JSON object with the WS params)
        JSONObject wsArgs = new JSONObject();
        wsArgs.put("param1", "value1");
        wsArgs.put("param2", "value2");
        String postData = wsArgs.toString();

        // Setup a URL connection
        URL address = new URL(Constants.WS_URL);
        conn = (HttpURLConnection) address.openConnection();
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type", "application/json");
        conn.setUseCaches(false);
        conn.setDoOutput(true);
        conn.setConnectTimeout(Constants.DEFAULT_HTTP_TIMEOUT);

        // Send the request
        out = conn.getOutputStream();
        out.write(postData.getBytes());
        out.close();

        // Get the response
        int responseCode = conn.getResponseCode();
        if (responseCode != 200) {
            Log.e("", "Error - HTTP response code: " + responseCode);
            return Boolean.FALSE;
        } else {
            // Read conn.getInputStream() here
        }
    } catch (JSONException e) {
        Log.e("", "SendGcmId - Failed to build the WebService arguments", e);
        return Boolean.FALSE;
    } catch (IOException e) {
        Log.e("", "SendGcmId - Failed to call the WebService", e);
        return Boolean.FALSE;
    } finally {
        if (conn != null) conn.disconnect();

                    // Any guava equivalent here too?
        IOUtils.closeQuietly(out);
    } 
```

我想在这里了解如何正确使用 Guava 的 InputSupplier 和 OutputSupplier 来摆脱大量代码。这里有很多带有文件的示例，但我无法获得上述代码的简洁版本（想看看有 Guava 经验的用户会如何处理）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:52:28.180

您将能够获得的大部分简化 - 例如 - 将替换 lines `out = conn.getOutputStream(); out.write(postData.getBytes()); out.close()`，并且需要关闭`out`自己，

```
new ByteSink() {
  public OutputStream openStream() throws IOException {
    return conn.getOutputStream();
  }
}.write(postData.getBytes()); 
```

这会打开输出流，写入字节，并正确关闭输出流（而不是`closeQuietly`）。

# java - 如何更改所选文本视图的颜色？

> ID：14464491
> 
> 赞同：2
> 
> 时间：2013-01-22T17:27:46.940
> 
> 标签：java, android, textview, seekbar

我想知道在单击或触摸文本视图后是否可以更改颜色。文件中有多个文本视图，我想知道选择某个文本视图时需要做什么。目前我只能改变颜色

这是我的代码？

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_image);

    ImageView image = (ImageView) findViewById(R.id.imageView1);
    SeekBar sliderBar = (SeekBar) findViewById(R.id.sliderBar);

    paint = new Paint();
    paint.setColor(Color.RED);

    sliderBar.setProgress(-3);
    sliderBar.incrementProgressBy(1);
    sliderBar.setMax(6);

    category1 = (TextView) findViewById(R.id.category1);
    category2 = (TextView) findViewById(R.id.category2);
    category3 = (TextView) findViewById(R.id.category3);
    category4 = (TextView) findViewById(R.id.category4);
    category5 = (TextView) findViewById(R.id.category5);
    category6 = (TextView) findViewById(R.id.category6);
    category7 = (TextView) findViewById(R.id.category7);
    category8 = (TextView) findViewById(R.id.category8);
    category9 = (TextView) findViewById(R.id.category9);
    textProgress = (TextView) findViewById(R.id.sliderText);

    category1.setClickable(true);
    category2.setClickable(true);
    category3.setClickable(true);
    category4.setClickable(true);
    category5.setClickable(true);
    category6.setClickable(true);
    category7.setClickable(true);
    category8.setClickable(true);
    category9.setClickable(true);
    sliderBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
    {

        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) 
        {

            // TODO Auto-generated method stub

            textProgress.setText("The value is: "+ (-3+progress) );

            if(progress ==0) //slider is at -3
            {
                if(category1.isSelected())
                {
                category1.setTextColor(Color.BLUE);
                }
                if(category2.isSelected())
                {
                category2.setTextColor(Color.BLUE);
                }

            }

            else if(progress==1) //slider is at -2
            {
                category1.setTextColor(Color.BLACK);
            }

            else if(progress==2) //slider is at -1
            {
                category1.setTextColor(Color.BLUE);

            }

            else if (progress==3) //slider is at 0
            {
                category1.setTextColor(Color.BLACK);

            }

            else if (progress==4) //slider is at 1
            {
                category1.setTextColor(Color.DKGRAY);
            }

            else if (progress==5) //slider is at 2
            {
                category1.setTextColor(Color.MAGENTA);

            }

            else if (progress==6) //slider is at 3
            {
                category1.setTextColor(Color.RED);
            }

        }

        public void onStartTrackingTouch(SeekBar arg0) {
            // TODO Auto-generated method stub

        }

        public void onStopTrackingTouch(SeekBar arg0) {
            // TODO Auto-generated method stub

        }

    }); 

} 
```

我想知道当我选择不同的类别时，我可以使用搜索栏更改文本的颜色，但只能更改所选文本视图（类别“X”）的颜色。谢谢。

# javascript - 如何覆盖 js/varien/product.js 中的 JS 函数？

> ID：14464492
> 
> 赞同：0
> 
> 时间：2013-01-22T17:27:48.210
> 
> 标签：javascript, magento

我正在制作一个在产品视图页面上调用自定义 JS 文件的 Magento 扩展。此自定义 JS 文件将最后加载，需要覆盖 /js/varien/product.js 底部的 formatPrice() 函数。

原formatPrice函数如下：

```
formatPrice: function(price) {
return formatCurrency(price, this.priceFormat);
} 
```

我想用以下内容替换/覆盖这个函数：

```
formatPrice: function(price) {
if (price % 1 == 0) { this.priceFormat.requiredPrecision = 0; }

return formatCurrency(price, this.priceFormat);
} 
```

如何在我的自定义 JS 文件中编写 JS 代码，以便正确覆盖此函数？我对JS还不够熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:39:04.410

如果它是全局的，那么`window.formatPrice = myNewFormatPrice;`如果它是对象的成员，那么您可以这样做，那么您可以执行以下操作：`anObject.formatPrice = myNewFormatPrice;`

如果您需要编辑对象的原型，请使用：`Product.OptionsPrice.prototype.formatPrice = myFormatPrice;`

您还需要查看对`requiredPrecision`. 如果它是“私有的”或“受保护的”，那么您将无法访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:44:59.353

虽然从功能的角度来看@jholloman 的答案是正确的，但您可能会考虑以原型的方式执行此操作，而是继承`Product.OptionsPrice`并使用*该*新类。这是来自`app\design\frontend\base\default\template\catalog\product\view.phtml`第 36 行（我认为您需要更改它）：

**原来的**

```
<script type="text/javascript">
    var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
</script> 
```

**修改的**

```
<script type="text/javascript">
    var MyOptionPrice = Class.create(Product.OptionsPrice, { // inherit from Product.OptionsPrice
        formatPrice: function($super, price) { // $super references the original method (see link below)
            if (price % 1 === 0) { 
                this.priceFormat.requiredPrecision = 0; 
            }
            return $super(price);
        }        
    });
    var optionsPrice = new MyOptionPrice(<?php echo $this->getJsonConfig() ?>); // use yours instead
</script> 
```

**使用[wrap()](http://prototypejs.org/doc/latest/language/Function/prototype/wrap/)**（这样，您不必更改原始方法名称）：

```
<script type="text/javascript">
    Product.OptionsPrice.prototype.formatPrice = Product.OptionsPrice.prototype.formatPrice.wrap(function(parent, price) {
        if (price % 1 === 0) { 
            this.priceFormat.requiredPrecision = 0; 
        }
        return parent(price);        
    });
    var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
</script> 
```

请参阅有关 Prototype 的继承和**$super** var的[链接。](http://prototypejs.org/learn/class-inheritance) 同样，我看到了与 Magento 中使用的@jholloman 建议类似的代码，所以按照他的方式进行是没有问题的，但我想你可能想知道如何按照 Prototype 的方式进行操作。

# asp.net - 带有 Gridview 参数的 ASP 按钮

> ID：14464493
> 
> 赞同：0
> 
> 时间：2013-01-22T17:27:53.533
> 
> 标签：asp.net, vb.net, gridview, parameters

我有一个页面 status.aspx，其中包含几个按钮，例如 30 天、60 天和 90 天。我想根据单击的按钮将参数传递给我现有的gridview。我的gridview代码如下：

```
 Dim cmd As SqlCommand = New SqlCommand("up_AcctStatus", conn)
    cmd.CommandType = CommandType.StoredProcedure

    Dim paramNumOfDays As New SqlParameter("@NumOfDays", SqlDbType.Int)
    paramNumOfDays.Value = "??? 30, 60 or 90 ???"
    cmd.Parameters.Add(paramNumOfDays) 
```

GridView1.DataSource = cmd.ExecuteReader() GridView1.DataBind()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:04:26.180

如果您不想使用除 sqlComand 之外的任何 ORM，您可以：

```
 protected void Button1_Click(object sender, EventArgs e)
            {
                Fill(60);
            }
            protected void Button2_Click(object sender, EventArgs e)
            {
                Fill(30);
            }

            private void Fill(int numberOfDays)
            {
                using (SqlConnection connection = new SqlConnection("connectionString"))
                {
                    connection.Open();

                    SqlDataAdapter sda = new SqlDataAdapter();
                    sda.SelectCommand = new SqlCommand("stored procedure name", connection);
                    sda.SelectCommand.CommandType = CommandType.StoredProcedure;
                    sda.SelectCommand.Parameters.AddWithValue("@NumOfDays", numberOfDays);

                    DataSet ds = new DataSet();
                    sda.Fill(ds, "result_table");

                    GridView1.DataSource = ds.Tables["result_table"];
                    GridView1.DataBind();
                }
            } 
```

VB：

```
 Protected Sub Button1_Click(sender As Object, e As EventArgs)
                Fill(60)
                End Sub

                Protected Sub Button2_Click(sender As Object, e As EventArgs)
                    Fill(30)
                End Sub

                Private Sub Fill(numberOfDays As Integer)
                    Using connection As New SqlConnection("connectionString")
                        connection.Open()

                        Dim sda As New SqlDataAdapter()
                        sda.SelectCommand = New SqlCommand("stored procedure name", connection)
                        sda.SelectCommand.CommandType = CommandType.StoredProcedure
                        sda.SelectCommand.Parameters.AddWithValue("@NumOfDays", numberOfDays)

                        Dim ds As New DataSet()
                        sda.Fill(ds, "result_table")

                        GridView1.DataSource = ds.Tables("result_table")
                         GridView1.DataBind()
                    End Using
                End Sub 
```

# tomcat - Tomcat中每个应用程序的自定义类路径

> ID：14464502
> 
> 赞同：0
> 
> 时间：2013-01-22T17:28:14.537
> 
> 标签：tomcat, configuration, classpath

我正在尝试在 tomcat 之外有一些 jar 库，并仅为特定的 webapp 加载它们。

我看到了这个 /home/ruben/Documents/projetos-tomcat/apache-tomcat-7.0.35/conf/Catalina/localhost/myapp.xml

但这对我不起作用。

我试过： - 将 myapp.xml 放入 tomcat/conf/Catalina/localhost 中，内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>

<Context>
    <Loader className="org.apache.catalina.loader.VirtualWebappLoader" virtualClasspath="/home/folder/*.jar" searchVirtualFirst="true"/>
</Context> 
```

但没有成功。

*   将 context.xml 放在 weapp/myapp/META-INF 中，内容相同，但也没有成功。

我正在使用tomcat7。

有人知道我错过了什么吗？另外，我想知道这在tomcat6中是否也可以

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:08:41.683

虚拟类路径采用完整路径或

```
<Loader className="org.apache.catalina.loader.VirtualWebappLoader" virtualClasspath="${catalina.base}/home/folder/*.jar" searchVirtualFirst="true"/> 
```

# rally - 回溯 API：测试用例结果？

> ID：14464504
> 
> 赞同：1
> 
> 时间：2013-01-22T17:28:21.570
> 
> 标签：rally, lookbackapi

有没有办法通过 Lookback API 来查看与测试用例相关的测试用例结果？- 使用 WSAPI，TestCase 有一个 Results 字段，它是 TestCaseResults 的集合，但是当我查询 TestCase 的 Lookback API（字段=true）时，我看不到任何与 TestCase 关联的结果。

我想要得到的是围绕测试用例的指标，以及它们随着时间的推移的结果（测试用例失败和测试用例通过之间的时间间隔，测试用例在第一次运行时通过的频率等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:27:21.393

在 LBAPI 服务的开放预览阶段，出于可扩展性的原因，测试用例结果并未聚合到 Lookback 数据库中。这部分是由于 Lookback 的详细“快照”性质与每天登录到 Rally 的通常非常大量的测试用例结果相交。

测试用例结果当然有可能被添加到 Lookback。从用户的角度来看，为了包含详细的快照，是否可以在 TCR 的回溯时间上进行权衡？90天？120天？这种反馈对于围绕 API 的这一方面进行扩展决策非常有帮助。

# wordpress - 如何添加类 在 Wordpress 中使用 wp_nav_menu()？

> ID：14464505
> 
> 赞同：63
> 
> 时间：2013-01-22T17:28:24.397
> 
> 标签：wordpress, wordpress-theming, wp-nav-walker, wp-nav-menu-item

我正在使用`wp_nav_menu($args)`并且我想将`my_own_class`CSS 类名添加到`<li>`元素中。

我想得到以下结果：

```
<li class='my_own_class'><a href=''>Link</a> 
```

怎么做？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2018-08-03T04:34:47.017

无需创建自定义walker。只需使用附加参数并为 nav_menu_css_class 设置过滤器。

例如：

```
$args = array(
    'container'     => '',
    'theme_location'=> 'your-theme-loc',
    'depth'         => 1,
    'fallback_cb'   => false,
    'add_li_class'  => 'your-class-name1 your-class-name-2'
    );
wp_nav_menu($args); 
```

注意新的“add_li_class”参数。

并在functions.php上设置过滤器

```
function add_additional_class_on_li($classes, $item, $args) {
    if(isset($args->add_li_class)) {
        $classes[] = $args->add_li_class;
    }
    return $classes;
}
add_filter('nav_menu_css_class', 'add_additional_class_on_li', 1, 3); 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2016-09-07T13:25:41.820

`nav_menu_css_class`您可以在 functions.php 文件中为操作添加过滤器。

例子：

```
function atg_menu_classes($classes, $item, $args) {
  if($args->theme_location == 'secondary') {
    $classes[] = 'list-inline-item';
  }
  return $classes;
}
add_filter('nav_menu_css_class', 'atg_menu_classes', 1, 3); 
```

文档：[https ://developer.wordpress.org/reference/hooks/nav_menu_css_class/](https://developer.wordpress.org/reference/hooks/nav_menu_css_class/)

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-06-19T11:42:16.690

HERE [WordPress 在 wp_nav_menu 链接中添加自定义类](https://sdtuts.com/wordpress-add-custom-class-in-wp_nav_menu-links/)

或者您可以 `<li class='my_own_class'><a href=''>Link</a></li>` 从管理面板添加课程：

1.  去`YOURSITEURL/wp-admin/nav-menus.php`

2.  打开 `SCREEN OPTIONS`

3.  make check `CSS CLASSES`，然后您将`CSS Classes (optional)` 在每个菜单链接中看到字段。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-04-13T04:03:07.687

将类添加到`<li>`标签而不编辑`functions.php`文件：

1.  转到外观 -> 菜单 -> 屏幕选项 -> CSS 类
2.  您将在`Menu Items`Window中启用 CSS Class 选项

[![在此处输入图像描述](../Images/719e93173df44f823cce79e551748fed.png)](https://i.stack.imgur.com/dfxw0.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-07-06T11:51:45.247

`nav_menu_css_class`如下所示使用此过滤器

```
function add_classes_on_li($classes, $item, $args) {
    $classes[] = 'nav-item';
    return $classes;
}
add_filter('nav_menu_css_class','add_classes_on_li',1,3); 
```

**更新**

将此过滤器与特定菜单一起使用

```
if ( 'main-menu' === $args->theme_location ) { //replace main-menu with your menu
    $classes[] = "nav-item"; 
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-17T13:25:20.213

[`str_replace`](http://php.net/manual/en/function.str-replace.php)如果您只想“添加类”，那么仅使用函数怎么样：

```
<?php
    echo str_replace( '<li class="', '<li class="myclass ',
        wp_nav_menu(
            array(
                'theme_location'    => 'main_menu',
                'container'         => false,
                'items_wrap'        => '<ul>%3$s</ul>',
                'depth'             => 1,
                'echo'              => false
            )
        )
    );
?> 
```

Tough 它是单级菜单或要为所有`<li>`元素添加类的菜单的快速修复，不建议用于更复杂的菜单

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-04T20:14:56.140

这些回答似乎都没有真正回答这个问题。这与我在我的网站上使用的类似，通过标题/名称定位菜单项：

```
function add_class_to_menu_item($sorted_menu_objects, $args) {
    $theme_location = 'primary_menu';  // Name, ID, or Slug of the target menu location
    $target_menu_title = 'Link';  // Name/Title of the menu item you want to target
    $class_to_add = 'my_own_class';  // Class you want to add

    if ($args->theme_location == $theme_location) {
        foreach ($sorted_menu_objects as $key => $menu_object) {
            if ($menu_object->title == $target_menu_title) {
                $menu_object->classes[] = $class_to_add;
                break; // Optional.  Leave if you're only targeting one specific menu item
            }
        }
    }

    return $sorted_menu_objects;
}
add_filter('wp_nav_menu_objects', 'add_class_to_menu_item', 10, 2); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-12-17T12:31:26.913

我添加了一个类来轻松实现菜单参数。因此，您可以像这样自定义并包含在您的函数中：

```
include_once get_template_directory() . DIRECTORY_SEPARATOR . "your-directory" . DIRECTORY_SEPARATOR . "Menu.php";

<?php $menu = (new Menu('your-theme-location'))
            ->setMenuClass('your-menu')
            ->setMenuID('your-menu-id')
            ->setListClass('your-menu-class')
            ->setLinkClass('your-menu-link anchor') ?>

            // Print your menu
            <?php $menu->showMenu() ?> 
```

```
<?php

class Menu
{
    private $args = [
        'theme_location' => '',
        'container' => '',
        'menu_id' => '',
        'menu_class' => '',
        'add_li_class' => '',
        'link_class' => ''
    ];

    public function __construct($themeLocation)
    {
        add_filter('nav_menu_css_class', [$this,'add_additional_class_on_li'], 1, 3);
        add_filter( 'nav_menu_link_attributes', [$this,'add_menu_link_class'], 1, 3 );

        $this->args['theme_location'] = $themeLocation;
    }

    public function wrapWithTag($tagName){
        $this->args['container'] = $tagName;
        return $this;
    }

    public function setMenuID($id)
    {
        $this->args['menu_id'] = $id;
        return $this;
    }

    public function setMenuClass($class)
    {
        $this->args['menu_class'] = $class;
        return $this;
    }

    public function setListClass($class)
    {
        $this->args['add_li_class'] = $class;
        return $this;
    }

    public function setLinkClass($class)
    {
        $this->args['link_class'] = $class;
        return $this;
    }

    public function showMenu()
    {
        return wp_nav_menu($this->args);
    }

    function add_additional_class_on_li($classes, $item, $args) {
        if(isset($args->add_li_class)) {
            $classes[] = $args->add_li_class;
        }
        return $classes;
    }

    function add_menu_link_class( $atts, $item, $args ) {
        if (property_exists($args, 'link_class')) {
            $atts['class'] = $args->link_class;
        }
        return $atts;
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-21T12:37:14.590

```
<?php
    echo preg_replace( '#<li[^>]+>#', '<li class="col-sm-4">',
            wp_nav_menu(
                    array(
                        'menu' => $nav_menu, 
                        'container'  => false,
                        'container_class'   => false,
                        'menu_class'        => false,
                        'items_wrap'        => '%3$s',
                                            'depth'             => 1,
                                            'echo'              => false
                            )
                    )
            );
?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-21T17:05:03.767

这是一种非常简单的调用*“li”*类和“任何类”替换的方法。只需按照说明进行操作。

在导航区域中使用此代码。

```
<?php
            $consult_menu = wp_nav_menu(array(
                    'theme_location' => 'topmenu',
                    'menu_id' => 'menu',
                    'menu_class' => 'navbar-nav m-auto',
                    'echo' => false
                )
            );
            $consult_menu = str_replace('menu-item', 'nav-item', $consult_menu);
            echo $consult_menu;
            ?> 
```

然后在浏览器上检查您的代码。找到 wp 默认类，然后替换*"str_replace( **"default_class_here"** , **"new_li_class_here"** ,$consult_menu);* |**注意：这里的** ***$consult_menu***是我的主题名称，你可以在这里使用任何名称。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-13T13:35:45.510

对我来说正确的是 Zuan 解决方案。请注意将 isset 添加到`$args->add_li_class`，但是`Notice: Undefined property: stdClass::$add_li_class`如果您没有在所有`wp_nav_menu()`函数中设置属性，则会得到。

这是对我有用的功能：

```
function add_additional_class_on_li($classes, $item, $args) {
    if(isset($args->add_li_class)) {
      $classes[] = $args->add_li_class;
    }
    return $classes;
}
add_filter('nav_menu_css_class', 'add_additional_class_on_li', 1, 3); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-07T06:10:44.820

// 从主菜单中删除翻译

```
function wpdocs_channel_nav_class($classes, $item, $args){
{

if ('primary' === $args->theme_location) {
    $classes[] = "notranslate";
}
    return $classes;
}
add_filter('nav_menu_css_class', 'wpdocs_channel_nav_class', 10, 4); 
```

这是您轻松将新类添加到菜单包装的现有类数组的方法

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-08T17:18:04.557

这就是我如何将 WordPress 的 MainMenu 和类添加到 li.

```
<?php
        $defaults = array( 'menu' => 'mainmenu', 
        'container' => false, 
        'fallback_cb' => 'wp_page_menu', 
        'items_wrap' => '<ul class="navbar-nav" id="myTab">%3$s</ul>', 
        'add_li_class'  => 'nav-item',
       'theme_location' => 'mainmenu' );
        wp_nav_menu( $defaults ); ?> 
```

在functions.php中使用此代码

```
function li_new_class($classes, $item, $args) {
if(isset($args->add_li_class)) {
    $classes[] = $args->add_li_class;
}
return $classes;
}
add_filter('nav_menu_li_class', 'li_new_class', 1, 3); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-05-19T09:35:13.147

一年前已经在这里给出了答案。您可以按照这个答案给出很好的解释。

[https://stackoverflow.com/a/52688935/7162602](https://stackoverflow.com/a/52688935/7162602)

谢谢

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2014-06-24T21:54:35.810

没有`walker menu`它是不可能直接添加它的。但是，您可以通过 javascript 添加它。

```
$('#menu > li').addClass('class_name'); 
```

* * *

## 回答 #16

> 赞同：-24
> 
> 时间：2013-01-22T20:41:47.377

您不能很容易地将类直接添加到 LI，但是有什么理由不以稍微不同但同样具体的方式（通过它们的父 ul）来定位它们？

您可以使用 menu_class 和 menu_id 参数（附加到 LI 的 UL 父级）设置菜单的类或 ID，然后通过 CSS 以这种方式定位 li，如下所示：

```
<?php wp_nav_menu('menu_id=mymenu'); ?> 
```

对于 CSS：

```
ul#mymenu li {
    /* your styles here */
} 
```

编辑：在 2013 年撰写本文时，这是添加它的最简单方法，但此后的更新添加了直接在管理导航编辑器中添加 CSS 类的功能。有关详细信息，请参阅更多最新答案。

# javascript - JavaScript Array.length 属性是函数还是简单变量？

> ID：14464506
> 
> 赞同：3
> 
> 时间：2013-01-22T17:28:26.470
> 
> 标签：javascript

我有以下 JavaScript 代码。我已经使用 new 关键字初始化了一个数组，因此创建了一个数组对象的新实例。然后我通过向它添加元素来填充数组。

但是，我认为我犯了一个根本性的误解——代码的下一部分让我非常困惑，如果不够清楚或者完全错误，请更正我的术语。我已经登录了 `(beatles.length)`。我正在使用长度属性来找出数组中有多少元素。但是为什么长度是属性而不是方法呢？

难道不是长度实际上是 Array 对象可以调用的返回数值的方法吗？如果长度不是一种方法，那么为什么它是一个属性（属于数组对象的变量）？请简明扼要地解释这里的区别。

```
var beatles = new Array();
beatles[0] = "John";
beatles[1] = "Paul";
beatles[2] = "George";
beatles[3] = "Ringo";

console.log(beatles.length); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:31:10.817

**当您将元素推送到数组对象时**，该属性会增加或减少。

例如我的（假）对象：

```
var myArray = function(){
   this.length = 0;

   this.push = function(itm){
       this.length++; 
       // ^ doesn't do anything aside from increase length
   };
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:31:36.093

不需要`.length`一个函数，因为它不需要每次都重新计算，而是在你将元素推到`[]`对象上时根据需要增加或减少它。

虽然函数*可以是*幂等的，但属性**总是**幂等的，这也`.length`更适合。

函数通常会改变状态（如`.push`），或根据它们接收的参数返回不同的值（`.slice`, `.splice`）。

换一种说法：

初始化数组的首选方法是`var a = [];`，并添加您应该使用的元素`a.push(element);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T08:56:11.180

该`Array.length`属性实际上是两个（隐藏）方法`get()`和一个的封装`set()`，也称为访问器。

`get()`当您在表达式中使用属性时，JavaScript 会在内部调用，例如：

```
var n = fields.length; 
```

相反，它`set()`在分配中使用时调用，例如：

```
fields.length = 1; 
```

这样做还会更新数组项以满足以下条件。

> 属性的值`length`总是比最大​​项索引高 1（如果没有，则为零）；

这是一个重要的细节，因为在某些情况下，它不会与数组中的（非空）项的数量严格相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T17:31:24.953

两者`String`和`Arrays`都是类型`Objects`并且不是基本变量类型。

因此，`length`是泛型对象的成员变量，`Object`通常可用于 Array 和 String。在 String 的情况下，它返回字符串长度，在 Array 的情况下，它通过覆盖返回计数。

一个小例子是：

```
var a = "Hello";
var b = new Array();
b[0] = "Hello";
b[1] = "World";
a.length    // returns 5
b.length    // returns 2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T17:31:31.617

在这种情况下，`length`是一个始终由 javascript 引擎本身保持有效的属性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T17:34:21.810

`length`是一个**伪属性**，引擎盖下有一些东西可以让它像它一样工作。

`length`表现得像一个 getter 和一个 setter（像一个函数）。您可以像访问属性一样访问它，但不能像属性一样删除它：（`delete beatles.length`将失败）。

如果将元素添加到 Array，则`length`属性将相应更改。

如果*设置*长度属性，则数组将更改 -`beatles.length = 0;`将清除数组。

现在没有办法自己制作类似的功能（没有使用显式的 get/setter）。其中一些将在新的 ES5（或 6？）标准中提供。就像制作不可变属性的能力一样。*不过，索引分配的魔力*将特定于数组，这是一种语言特性。

至于*为什么*语言设计者将其设为属性而不是函数......好吧，也许是性能，也许是与其他语言的相似性（当然最值得注意的是 Java）。

资源：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get) [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/set](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/set)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-06T18:06:43.780

**它是一个属性，但它不同于整个语言中的任何其他属性**。

数组与您熟悉的对象类型并不*完全相同（尽管它们确实非常接近）。*规范定义了一种特殊类型的对象，称为*Array exotic object*，只是为了保持`length`属性按应有的方式工作，并且所有 Arrays 实际上都是这种外来对象，而不是标准对象。还有一些其他类型的奇异对象，但数组的对象是我们关心的问题。

该`length`属性的基础看起来很简单：它是数组中元素的数量。但是**要保持最新状态需要大量的幕后魔法。即使是 getter 和 setter 也无法完全处理它。**

原因来自于 Array`length`属性的实际定义：如果你看一个对象的属性名称，有可能将它们中的一些表示为数字，如果可以，那么其中一个数字必须大于所有其他人。数组外来对象总是有一个名为 的属性`length`，并且该属性的值必须始终大于其对象的最大此类数字。**如果其他属性发生更改，则数组`length`可能也必须更改，具体取决于其他属性的名称。所以它必须监控所有的属性变化，以确保它在它应该更新的时候更新**。

**目前，在 JavaScript 中没有办法做到这一点**。您可以使用 setter 让函数监视对*特定*属性的更改，但不能使用通用函数来监视对象的*所有*属性更改。**ECMAScript 6 看起来有办法**通过代理对象来做到这一点，但目前还没有任何浏览器完全支持它。

# asp.net-mvc - 在没有 Web 的情况下创建剃刀视图

> ID：14464512
> 
> 赞同：0
> 
> 时间：2013-01-22T17:28:34.823
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我们目前正在使用一种产品来发送电子邮件，并且正在使用许多定期运行的可执行文件来发送电子邮件。这个产品对动态数据的处理非常有限，所以如果我们想要一个列表中的表格，我们必须在我们的 C# 代码中创建表格并将 HTML 作为单个变量发送，这导致我们在我们的配置文件中包含 HTML。

一位同事看到[这种类型的东西](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)，并认为我们也许可以使用它。所以我正在尝试开发一个在可执行文件中创建视图并将其转换为字符串的概念验证（然后我们将在电子邮件产品之外开发我们的电子邮件并将整个内容作为单个字符串发送。

我的问题是：

1）**有没有更好的方法来做到这一点？** 引入 MVC 框架当然不是它的本意。如果有另一种产品可以满足我们的需求（允许我们轻松创建动态电子邮件），并且易于使用且更适合，那就太好了。

2）**我应该伪造所有数据吗？** 如果我创建假的 http 上下文和所有的爵士乐，我可以让它做我想做的事。

3)**有没有更简单的方法可以基于 ViewModel 将视图转换为字符串？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:46:06.567

If you don't need HTTP to be involved at all, you can simply run Razor engine from C# directly using `RazorEngine` project - there is a great project that allows you to do so - [https://github.com/Antaris/RazorEngine](https://github.com/Antaris/RazorEngine).

It allows you to use Razor as general purpose templating engine (rather than something MVC-specific).

Simple example from GitHub:

```
string template = "Hello @Model.Name, welcome to RazorEngine!";
string result = Razor.Parse(template, new { Name = "World" }); 
```

Alternatively, if you still want that to be accessible via HTTP, you could do this relatively easy with `ASP.NET Web API`, in a very lightweight manner - without having to worry about ASP.NET whatsoever (since you can even self host that).

`WebApiContrib` has a Razor view formatter already available - [https://github.com/WebApiContrib/WebApiContrib.Formatting.RazorViewEngine](https://github.com/WebApiContrib/WebApiContrib.Formatting.RazorViewEngine)

# apache - 总是在 Apache 中发送 Content-Length？

> ID：14464516
> 
> 赞同：9
> 
> 时间：2013-01-22T17:28:46.020
> 
> 标签：apache, http-content-length

我正在加载一个由 PHP 动态生成的特别大的 JSON 字符串。为了向用户提供一些反馈，我想显示下载进度。

我已经弄清楚了代码，它适用于静态内容，如图像、JS 文件等。但是，它似乎不适用于动态文件。

这是有道理的，因为动态文件没有可预测的内容长度，但即使我在 PHP 中添加它：

```
ob_start(function($c) {
    header("Content-Length: ".strlen($c));
    return $c;
}); 
```

它仍然不发送标头（但如果我添加任何其他标头它工作正常）。

有没有办法强制 Apache 发送`Content-Length`标头？目前我唯一的选择是将输出保存到一个临时文件并重定向到它。这会起作用，但它有点乱，所以如果可能的话，我宁愿避免它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-18T04:24:26.823

我有类似的问题，但在我的情况下，Apache 没有发送 Content-Length 标头，因为响应是 gzip 压缩的。当我禁用压缩时，会正确计算并发送 Content-Length。

以下是仅对 swf 文件禁用 gzip 压缩的 htaccess 设置

```
<FilesMatch "\.swf$">
  SetEnv no-gzip 1
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:57:39.667

HTTP 协议需要一种方法来确定响应何时结束。根据

[RFC2616 第 4 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html)

> 4.4 消息长度
> 
> 消息的传输长度是消息中出现的消息体的长度；也就是说，在应用了任何传输编码之后。当消息中包含消息正文时，该正文的传输长度由以下之一确定（按优先顺序）：
> 
> 1.任何“MUST NOT”包含消息体的响应消息（例如 1xx、204 和 304 响应以及对 HEAD 请求的任何响应）总是由头字段之后的第一个空行终止，无论消息中存在的实体头字段。
> 
> 2.如果存在 Transfer-Encoding 标头字段（第 14.41 节）并且具有除“identity”以外的任何值，则使用“分块”传输编码（第 3.6 节）定义传输长度，除非消息通过关闭连接终止。
> 
> 3\. 如果存在 Content-Length 头字段（第 14.13 节），则其在 OCTET 中的十进制值表示实体长度和传输长度。如果这两个长度不同（即，如果传输编码
> 
> ```
>  header field is present). If a message is received with both a
>  Transfer-Encoding header field and a Content-Length header field,
>  the latter MUST be ignored. 
> ```
> 
> 4.如果消息使用媒体类型“multipart/byteranges”，并且没有另外指定传输长度，则该自定界媒体类型定义传输长度。除非发送者知道接收者可以解析它，否则不得使用此媒体类型；来自 1.1 客户端的具有多个字节范围说明符的 Range 标头的存在意味着客户端可以解析 multipart/byteranges 响应。
> 
> ```
>  A range header might be forwarded by a 1.0 proxy that does not
>    understand multipart/byteranges; in this case the server MUST
>    delimit the message using methods defined in items 1,3 or 5 of
>    this section. 
> ```
> 
> 5.由服务器关闭连接。（关闭连接不能用于指示请求正文的结束，因为这会使服务器无法发回响应。）
> 
> 为了与 HTTP/1.0 应用程序兼容，包含消息正文的 HTTP/1.1 请求必须包含有效的 Content-Length 头字段，除非已知服务器符合 HTTP/1.1。如果请求包含消息正文并且没有给出 Content-Length，如果服务器无法确定消息的长度，则应该返回 400（错误请求），如果它希望坚持使用 411（需要长度）接收有效的内容长度。
> 
> 所有接收实体的 HTTP/1.1 应用程序必须接受“分块”传输编码（第 3.6 节），从而允许在无法提前确定消息长度时将这种机制用于消息。
> 
> 消息不得同时包含 Content-Length 头字段和非身份传输编码。如果消息确实包含非身份传输编码，则必须忽略 Content-Length。
> 
> 当在允许消息体的消息中给出 Content-Length 时，其字段值必须与消息体中的八位字节数完全匹配。HTTP/1.1 用户代理必须在收到和检测到无效长度时通知用户。

您不能只是随机添加标题并期望它们被遵守（其他标题可以覆盖）。您首先需要控制所有可能覆盖的标头。

根据这个问题（[How to make PHP generate Chunked response](https://stackoverflow.com/questions/2481858/how-to-make-php-generate-chunked-response)），强制“Chunked”的一个好方法是设置 Transfer-Encoding 和 to `flush`。也许这两个不是严格需要的。在开始缓冲之前，是否会有任何多余的刷新？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:03:34.647

我最好的猜测是你有一些变化，`modules/http/http_filters`因为 Apache 默认发送`Content-Length`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:54:28.080

从`ob_start`文档中：

> ```
> This function will turn output buffering on. While output buffering is active no 
> output is sent from the script (other than headers), instead the output is stored 
> in an internal buffer. 
> ```

请注意“*除了标头之外*”位——在`ob_start()`缓冲区被刷新（或丢弃）之前不会调用回调，此时使用`header()`. 我猜你没有打开错误日志，我在我的错误日志中看到了这个：

```
PHP Warning:  Cannot modify header information - headers already sent 
  in /usr/local/apache2/apps/testing/test2.php on line 6 
```

回调允许您在发送之前修改缓冲区，但由于它仅包含正文数据，您也不能预先添加新的标头（如果您尝试，它将出现在内容中，对于分块传输的每个块一次）。

`header("Content-Length: ...")`一旦您知道大小，您的代码应该*在任何其他输出之前*调用。找到`Content-Length:`标头后，将不会进行分块传输。

如果你*真的*需要强制 HTTP/1.0（你不需要），你可以`httpd.conf`用特殊变量来做：

```
SetEnv downgrade-1.0 1
SetEnv force-response-1.0 1 
```

您可以将它们放入`<Location>`或`<LocationMatch>`例如，或使用`mod_rewrite`“ `env`”标志进行更多控制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-03T22:26:45.063

我有一些 1MB 左右的 JS 文件没有获得 Content-Length 标头（与其他较小的 JS 文件不同）。Content-Length 标头对于 HTTP/2 不是强制性的，并且 Internet 连接有点不稳定，这导致了一个非常难以调试的错误，其中文件有时仅部分交付。解决方案是增加 DeflateBufferSize [https://httpd.apache.org/docs/2.4/mod/mod_deflate.html#DeflateBufferSize](https://httpd.apache.org/docs/2.4/mod/mod_deflate.html#DeflateBufferSize)

# java - 如何使用 apache commons 从 TAR 中解压缩特定文件？

> ID：14464518
> 
> 赞同：3
> 
> 时间：2013-01-22T17:28:57.597
> 
> 标签：java, file, tar, apache-commons

我正在使用 Apache Commons 1.4.1 库来解压缩“.tar”文件。

**问题：**我不必提取所有文件。我必须从 tar 档案中的特定位置提取特定文件。我只需要提取几个 .xml 文件，因为 TAR 文件的大小约为 300 MB，并且在解压缩整个内容时会浪费资源。

我是否必须进行嵌套目录比较或有什么办法？

**注意：** .XML（必需文件）的位置始终相同。

**TAR 的结构是：**

```
directory:E:\Root\data
 file:E:\Root\datasheet.txt
directory:E:\Root\map
     file:E:\Root\mapers.txt
directory:E:\Root\ui
     file:E:\Root\ui\capital.txt
     file:E:\Root\ui\info.txt
directory:E:\Root\ui\sales
     file:E:\Root\ui\sales\Reqest_01.xml
     file:E:\Root\ui\sales\Reqest_02.xml
     file:E:\Root\ui\sales\Reqest_03.xml
     file:E:\Root\ui\sales\Reqest_04.xml
directory:E:\Root\ui\sales\stores
directory:E:\Root\ui\stores
directory:E:\Root\urls
directory:E:\Root\urls\fullfilment
     file:E:\Root\urls\fullfilment\Cams_01.xml
     file:E:\Root\urls\fullfilment\Cams_02.xml
     file:E:\Root\urls\fullfilment\Cams_03.xml
     file:E:\Root\urls\fullfilment\Cams_04.xml
directory:E:\Root\urls\fullfilment\profile
directory:E:\Root\urls\fullfilment\registration
     file:E:\Root\urls\options.txt
directory:E:\Root\urls\profile 
```

**约束：**我不能使用 JDK 7 并且必须坚持使用 Apache 公共库。

**我目前的解决方案：**

```
public static void untar(File[] files) throws Exception {
        String path = files[0].toString();
        File tarPath = new File(path);
        TarEntry entry;
        TarInputStream inputStream = null;
        FileOutputStream outputStream = null;
        try {
            inputStream = new TarInputStream(new FileInputStream(tarPath));
            while (null != (entry = inputStream.getNextEntry())) {
                int bytesRead;
                System.out.println("tarpath:" + tarPath.getName());
                System.out.println("Entry:" + entry.getName());
                String pathWithoutName = path.substring(0, path.indexOf(tarPath.getName()));
                System.out.println("pathname:" + pathWithoutName);
                if (entry.isDirectory()) {
                    File directory = new File(pathWithoutName + entry.getName());
                    directory.mkdir();
                    continue;
                }
                byte[] buffer = new byte[1024];
                outputStream = new FileOutputStream(pathWithoutName + entry.getName());
                while ((bytesRead = inputStream.read(buffer, 0, 1024)) > -1) {
                    outputStream.write(buffer, 0, bytesRead);
                }
                System.out.println("Extracted " + entry.getName());
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:55:49.283

[TAR](http://en.wikipedia.org/wiki/Tar_%28file_format%29)文件格式被设计为以流的形式写入或读取（即，到磁带驱动器/从磁带驱动器读取），并且没有集中的标题。所以不，没有办法读取整个文件来提取单个条目。

如果你想随机访问，你应该使用 ZIP 格式，并使用 JDK 的`ZipFile`. 假设您有足够的虚拟内存，该文件将进行内存映射，从而使随机访问非常快（如果无法进行内存映射，我还没有查看它是否会使用随机访问文件）。

# ruby-on-rails-3 - Heroku 推送被拒绝，无法通过 Bundler Rice 1.4.3 安装 gem

> ID：14464521
> 
> 赞同：2
> 
> 时间：2013-01-22T17:29:06.537
> 
> 标签：ruby-on-rails-3, heroku, gem

使用大米宝石（1.4.3）后，我似乎无法推送到heroku。我总是收到以下错误：

```
Installing rice (1.4.3)
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for a BSD-compatible install... /usr/bin/install -c
   checking whether build environment is sane... yes
   checking for a thread-safe mkdir -p... /bin/mkdir -p
   checking for gawk... no
   checking for mawk... mawk
   checking whether make sets $(MAKE)... yes
   checking for g++... g++
   checking for C++ compiler default output file name... a.out
   checking whether the C++ compiler works... yes
   checking whether we are cross compiling... no
   checking for suffix of executables...
   checking for suffix of object files... o
   checking whether we are using the GNU C++ compiler... yes
   checking whether g++ accepts -g... yes
   checking for style of include used by make... GNU
   checking dependency style of g++... gcc3
   checking for ranlib... ranlib
   checking build system type... x86_64-unknown-linux-gnu
   checking host system type... x86_64-unknown-linux-gnu
   checking for ruby.h... yes
   checking for node.h... no
   checking for ruby/node.h... no
   checking for version.h... no
   checking for env.h... no
   checking host system type... (cached) x86_64-unknown-linux-gnu
   checking for doxygen... no
   configure: WARNING: doxygen not found - will not generate any doxygen documentation
   checking for perl... /usr/bin/perl
   configure: creating ./config.status
   config.status: creating Makefile
   config.status: creating rice/Makefile
   config.status: creating test/Makefile
   config.status: creating sample/Makefile
   config.status: creating ruby/Makefile
   config.status: creating ruby/lib/Makefile
   config.status: creating test/ext/Makefile
   config.status: creating ruby/lib/mkmf-rice.rb
   config.status: creating rice/detail/ruby_version_code.hpp
   config.status: creating rice/config.hpp
   config.status: rice/config.hpp is unchanged
   config.status: executing depfiles commands
   make
   Making all in rice
   make[1]: Entering directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice'
   make  all-am
   make[2]: Entering directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice'
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Class.o -MD -MP -MF .deps/Class.Tpo -c -o Class.o Class.cpp
   mv -f .deps/Class.Tpo .deps/Class.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Data_Type.o -MD -MP -MF .deps/Data_Type.Tpo -c -o Data_Type.o Data_Type.cpp
   mv -f .deps/Data_Type.Tpo .deps/Data_Type.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Director.o -MD -MP -MF .deps/Director.Tpo -c -o Director.o Director.cpp
   mv -f .deps/Director.Tpo .deps/Director.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Exception.o -MD -MP -MF .deps/Exception.Tpo -c -o Exception.o Exception.cpp
   mv -f .deps/Exception.Tpo .deps/Exception.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Identifier.o -MD -MP -MF .deps/Identifier.Tpo -c -o Identifier.o Identifier.cpp
   mv -f .deps/Identifier.Tpo .deps/Identifier.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Module.o -MD -MP -MF .deps/Module.Tpo -c -o Module.o Module.cpp
   mv -f .deps/Module.Tpo .deps/Module.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Object.o -MD -MP -MF .deps/Object.Tpo -c -o Object.o Object.cpp
   mv -f .deps/Object.Tpo .deps/Object.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT String.o -MD -MP -MF .deps/String.Tpo -c -o String.o String.cpp
   mv -f .deps/String.Tpo .deps/String.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Struct.o -MD -MP -MF .deps/Struct.Tpo -c -o Struct.o Struct.cpp
   mv -f .deps/Struct.Tpo .deps/Struct.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Symbol.o -MD -MP -MF .deps/Symbol.Tpo -c -o Symbol.o Symbol.cpp
   mv -f .deps/Symbol.Tpo .deps/Symbol.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT VM.o -MD -MP -MF .deps/VM.Tpo -c -o VM.o VM.cpp
   mv -f .deps/VM.Tpo .deps/VM.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Arg_operators.o -MD -MP -MF .deps/Arg_operators.Tpo -c -o Arg_operators.o Arg_operators.cpp
   mv -f .deps/Arg_operators.Tpo .deps/Arg_operators.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT Address_Registration_Guard.o -MD -MP -MF .deps/Address_Registration_Guard.Tpo -c -o Address_Registration_Guard.o Address_Registration_Guard.cpp
   mv -f .deps/Address_Registration_Guard.Tpo .deps/Address_Registration_Guard.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT check_ruby_type.o -MD -MP -MF .deps/check_ruby_type.Tpo -c -o check_ruby_type.o `test -f 'detail/check_ruby_type.cpp' || echo './'`detail/check_ruby_type.cpp
   mv -f .deps/check_ruby_type.Tpo .deps/check_ruby_type.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT demangle.o -MD -MP -MF .deps/demangle.Tpo -c -o demangle.o `test -f 'detail/demangle.cpp' || echo './'`detail/demangle.cpp
   mv -f .deps/demangle.Tpo .deps/demangle.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT method_data.o -MD -MP -MF .deps/method_data.Tpo -c -o method_data.o `test -f 'detail/method_data.cpp' || echo './'`detail/method_data.cpp
   mv -f .deps/method_data.Tpo .deps/method_data.Po
   g++ -DHAVE_CONFIG_H -I.  -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -I/usr/local/include/ruby-1.9.1 -I/usr/local/include/ruby-1.9.1/x86_64-linux -MT protect.o -MD -MP -MF .deps/protect.Tpo -c -o protect.o `test -f 'detail/protect.cpp' || echo './'`detail/protect.cpp
   mv -f .deps/protect.Tpo .deps/protect.Po
   rm -f librice.a
   ar cru librice.a Class.o Data_Type.o Director.o Exception.o Identifier.o Module.o Object.o String.o Struct.o Symbol.o VM.o Arg_operators.o Address_Registration_Guard.o check_ruby_type.o demangle.o method_data.o protect.o
   ranlib librice.a
   make[2]: Leaving directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice'
   make[1]: Leaving directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice'
   Making all in test
   make[1]: Entering directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/test'
   Making all in ext
   make[2]: Entering directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/test/ext'
   /usr/local/bin/ruby -I/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/ruby/lib -C t1 extconf.rb --with-cppflags="-I/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3" --with-libpath="/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice"
   checking for main() in -lrice... yes
   creating Makefile
   /usr/local/bin/ruby -I/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/ruby/lib -C t2 extconf.rb --with-cppflags="-I/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3" --with-libpath="/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice"
   checking for main() in -lrice... yes
   creating Makefile
   make -C t1 all
   make[3]: Entering directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/test/ext/t1'
   g++ -I. -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I. -I/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3  -I/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/ruby/lib/include -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -Wall -g -o t1.o -c t1.cpp
   g++ -shared -o t1.so t1.o -L/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice -Wl,-R/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/rice -L. -L/usr/local/lib -Wl,-R/usr/local/lib -L.  -rdynamic -Wl,-export-dynamic  -L/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/ruby/lib/lib   -lrice -Wl,-R -Wl,/usr/local/lib -L/usr/local/lib -lruby-static -lpthread -lrt -ldl -lcrypt -lm   -lc
   /usr/bin/ld: /usr/local/lib/libruby-static.a(array.o): relocation R_X86_64_32 against `.rodata.str1.1' can not be used when making a shared object; recompile with -fPIC
   /usr/local/lib/libruby-static.a: could not read symbols: Bad value
   collect2: ld returned 1 exit status
   make[3]: *** [t1.so] Error 1
   make[3]: Leaving directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/test/ext/t1'
   make[2]: *** [t1_all] Error 2
   make[2]: Leaving directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/test/ext'
   make[1]: *** [all-recursive] Error 1
   make[1]: Leaving directory `/tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/test'
   make: *** [all-recursive] Error 1
   Gem files will remain installed in /tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3 for inspection.
   Results logged to /tmp/build_2mw894a3yrw66/vendor/bundle/ruby/1.9.1/gems/rice-1.4.3/gem_make.out
   An error occurred while installing rice (1.4.3), and Bundler cannot continue.
   Make sure that `gem install rice -v '1.4.3'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:happytyme-dev.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:happytyme-dev.git' 
```

我已经在本地运行 gem install rice -v '1.4.3' ，一切都很好。我还完成了捆绑更新、捆绑安装、git add 。（Gemfile 和 Gemfile.lock）， git commit -m "Creating gems" 但没有任何效果。有任何想法吗？

# java - 有效地从 tilemap 生成 Box2D body（碰撞图）

> ID：14464523
> 
> 赞同：1
> 
> 时间：2013-01-22T17:29:11.320
> 
> 标签：java, box2d, libgdx, tiles, game-physics

我正在开发一个将使用平铺地图的平台游戏，我不知道这是否是个好主意！

我用设置生成点等工具制作了一个简洁的瓷砖地图编辑器，但现在我希望能够在编辑地图后测试玩游戏并为将来使用我当然需要整合我已经完成的物理LibGDX 附带的 Box2D！

我正在创建一种方法来从瓦片地图创建碰撞地图，如果瓦片是否可碰撞，该地图具有数据！

所以我想出了这个好主意：

循环遍历地图，如果我们找到一个碰撞的瓦片，遍历它的相邻瓦片并查看它们是否也在碰撞，并且这样做直到当我们为碰撞矩形设置宽度和高度时找到非碰撞瓦片

在我们得到一堆矩形之后，我按从最大的正方形到最小的顺序对它们进行排序，这样我们就得到了最大的部分，然后我将矩形添加到最终列表中，并检查最终的矩形是否与当前主体重叠，所以我没有重叠身体

但是你知道，代码能说出超过 1000 个单词，对吧？

```
 public void createBody() {
    List<Rectangle> allRects = new ArrayList<Rectangle>();
    for(int x = 0; x < info.getWidth(); x++) {
        for(int y = 0; y < info.getHeight(); y++) {
            if(tiles[x][y].getInfo().isColliding()) {
                int width = 1;
                int height = 1;

                //loop through neighbors horizontally
                for(int i = 0; i < info.getWidth() - x; i++) {
                    if(!tiles[x + i][y].getInfo().isColliding()) {
                        //if tile is not clipped, we set width to i which is current x offset

                        width = i;
                        break;
                    }
                }

                //only if width is bigger than zero can the rect have any tiels..
                if(width > 0) {
                    boolean breakingBad = false;
                    //loop through neighbors horizontally
                    for(int j = 0; j < info.getHeight() - y; j++) {
                        //loop though neigbors vertizally
                        for(int i = 0; i < width; i++) {
                            //check if tile is not colliding 
                            if(!tiles[x + i][y + j].getInfo().isColliding()) {
                                //and if so, we set height to j which is current y offset
                                height = j;

                                //breaking bad aka leaving both loops
                                breakingBad = true;
                                break;
                            }
                        }
                        if(breakingBad) {
                            break;
                        }
                    }
                }
                if(width * height > 0)
                    allRects.add(new Rectangle(x, y, width, height));
            }
        }
    }

    Collections.sort(allRects, new Comparator<Rectangle>() {

        @Override
        public int compare(Rectangle o1, Rectangle o2) {
            Integer o1Square = o1.width * o1.height;
            Integer o2Square = o2.width * o2.height;
            return o2Square.compareTo(o1Square);
        }
    });

    List<Rectangle> finalRects = new ArrayList<Rectangle>();
    mainloop:
    for(Rectangle rect: allRects) {
        for(Rectangle finalRect: finalRects) {
            if(finalRect.contains(rect)) {
                continue mainloop;
            }
        }
        finalRects.add(rect);
    }

    for(Rectangle rect: finalRects) {
        PolygonShape polyShape = new PolygonShape();
        polyShape.setAsBox((float)rect.getWidth() / 2, (float)rect.getHeight() / 2, Vector2.tmp.set((float)rect.getCenterX(), (float)rect.getCenterY()), 0f);

        mapBody.createFixture(polyShape, 1);
        polyShape.dispose();
    }

} 
```

![低效？](../Images/bdfebbd33ebbe0b122394bfac4add39f.png)

然而，这个门槛似乎相当低效，因为由于某些原因，它仍然创造了比可能的更小的固定装置，例如在右上角

它还在中心矩形的角落创建了单个固定装置，我不知道为什么！

整个想法都是低效的，我应该使用其他方法还是手动创建碰撞贴图，或者最好的想法是什么？

最初，每个瓷砖都是自己的固定装置，这会在其边缘造成奇怪的错误，如预期的那样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-15T20:22:37.730

首先，自定义瓷砖映射工具在表面上是一个好主意，但您正在重新发明轮子。

libGDX 具有对 TMX 映射的内置支持。 [http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/maps/tiled/TmxMapLoader.html](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/maps/tiled/TmxMapLoader.html)

除了使用自制编辑器，您还可以使用全功能编辑器，例如 Tiled - [http://www.mapeditor.org/](http://www.mapeditor.org/)

所以一旦你为你的地图建立了一个更好的系统，我会从面向对象的角度来看待这个问题。由于您想使用 box2d 物理，每个**collidableTile都有** *一个* **body**。因此，您需要做的就是为每个 collidableTile 分配一个物理体，并根据您的标准 tile 大小设置大小。

不要忘记 box2d 世界和你的游戏屏幕之间是有区别的，box2d 是用公制单位来衡量的，而你的屏幕是用像素来衡量的。所以你需要做一些数学来正确设置位置和大小。如果你想让一组瓦片共享一个body，你可能想在构造每个collidableTile时将body作为参数传入，然后根据你能找到多少相邻瓦片来调整body的大小。物理体的更复杂的形状可能更复杂。

您还可以通过将这些图块设置为“睡眠”来节省资源，其中 box2d 对这些物体进行简化模拟，直到它检测到碰撞。如果您仅使用 box2d 在地形上进行碰撞检测，您可能需要考虑其他选项，例如使用形状库来检测交叉点，然后将 box2d 物理设置在玩家角色身体上以在有接触时停止向下加速，或者某物。

# css - 在 Less 中编写特定于浏览器的 hack（对于 我想做这样的事情（来源 - CSS技巧文章）： #veinte { color/*\**/: blue\9; } 问问题 问问题 2013-01-22T17:29:29.767 4781 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我想做这样的事情（来源 - CSS技巧文章）： #veinte { color/*\**/: blue\9; } 在 IE7 和 IE8 的 Less 中，但它给出了错误。 以下作品： #diecinueve { color: blue\9; } 但有些元素我不想在 IE9 中调用。例如，我在 IE9 中有一些带有:before元素的东西，但是因为 IE8 不支持它，所以我只想在 IE8 中给它一个padding。 但是这个 #veinte { color/*\**/: blue\9; } 在 Less 中给出错误。我试过这个 #veinte { color~"/*\**/": blue\9; } 但这也行不通。有谁知道如何在Less中做到这一点？ UIWebView：应用程序旋转 我想在我的 UIWebView 中打开嵌入 youtube 视频，并使用下面的代码来实现它。 videoURL = @"http://www.youtube.com/embed/A9kCPgVIbH4"; videoView = [[UIWebView alloc] initWithFrame:CGRectMake(0, -30, self.view.frame.size.width, 210)]; videoView.scrollView.scrollEnabled = NO; videoView.backgroundColor = [UIColor clearColor]; videoView.opaque = NO; videoHTML = [NSString stringWithFormat:@"\ \ \  \ \ \ \ \ ", videoURL]; [self.tableView addSubview:videoView]; [videoView loadHTMLString:videoHTML baseURL:nil]; 但是，有一个大问题。我的应用程序仅使用 UIInterfaceOrientationPortrait，但是当我单击此 UIWebView youtube 播放器时，它会以全屏模式打开，并且我能够将视频旋转到横向模式。看完视频后，我点击“返回”，然后开始我所有的问题。我的应用程序也旋转到横向模式，因此看起来不太好。也许有人知道如何解决这个问题？只是如何阻止 UIWebView 旋转，或者根本如何阻止旋转。 在 Info-plist 中，我已经删除了除纵向之外的所有方向，但没有任何改变。等待任何回应，谢谢！ cssinternet-explorerless 4 3 回答 3 This answer is useful 4 Less v1.6.0 及更高版本可以进行属性名称插值。因此，这个 hack 可以实现如下所示： @hack: ~"/*\**/"; #veinte { color@{hack}: blue\9; } 编译的CSS： #veinte { color/*\**/: blue\9; } 于 2014-09-28T03:29:55.747 回答 This answer is useful 3 您是否包括Modernizr或其他直接向HTML元素添加类的 shiv 脚本？ 因此是这样的： .selector { ...rules... .lte8 & { ... < IE9 styles ... } } 可能适合您的需求。（参见：嵌套选择器，使用 &） 否则，既然您无论如何都是 hacky，为什么不在条件注释中引用不同的 .less 编译输出表呢？ 于 2013-01-22T17:35:58.863 回答 This answer is useful 1 你可以试试这个：background-position:~"-150px 0px\9" width:~"300px\9"; 例子： .test{ width:~"300px\9"; } 于 2018-10-26T09:16:01.233 回答 Related 1 c# - 如何检测 WindowsService 属性的变化？ 2 php - 执行 array_key_exists 抛出错误 1 c# - Json.net 如何使用带有“$”的 jsonpath。 2 sml - number_in_month 练习（迭代 SML 中的多个列表） 1 visual-studio-2010 - 将视频保存为一系列图像opencv 1 c# - 用户控件响应添加到的页面中的事件 2 c# - 有人能解释一下 Grid 项目在 Windows 8 中的工作原理吗 3 mysql - MySQL 使用 * 以及连接表中的列名 1 c++ - 无法在哈德逊使用 Maven 和 C++ 项目构建成功 1 android - ImageButton中透明图像上的阴影和描边 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14464530
> 
> 赞同：2
> 
> 时间：
> 
> 标签：css, internet-explorer, less

我想做这样的事情（来源 - [CSS技巧文章](http://css-tricks.com/snippets/css/browser-specific-hacks/)）：

```
#veinte { color/*\**/: blue\9; } 
```

在 IE7 和 IE8 的 Less 中，但它给出了错误。

以下作品：

```
#diecinueve { color: blue\9; } 
```

但有些元素我不想在 IE9 中调用。例如，我在 IE9 中有一些带有`:before`元素的东西，但是因为 IE8 不支持它，所以我只想在 IE8 中给它一个`padding`。

但是这个

```
#veinte { color/*\**/: blue\9; } 
```

在 Less 中给出错误。我试过这个

```
#veinte { color~"/*\**/": blue\9; } 
```

但这也行不通。有谁知道如何在Less中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-28T03:29:55.747

[](http://lesscss.org/features/#variables-feature-properties)**Less v1.6.0 及更高版本可以进行[**属性名称插值。**](http://lesscss.org/features/#variables-feature-properties)因此，这个 hack 可以实现如下所示：**

 **```
@hack: ~"/*\**/";
#veinte { 
    color@{hack}: blue\9; 
} 
```

**编译的CSS：**

```
#veinte {
    color/*\**/: blue\9;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T17:35:58.863

您是否包括[Modernizr](http://modernizr.com/)或其他直接向`HTML`元素添加类的 shiv 脚本？

因此是这样的：

```
.selector {  
  ...rules...  

  .lte8 & {  
    ... < IE9 styles ...  
  }  
} 
```

可能适合您的需求。（参见：[嵌套选择器](http://lesscss.org/#-nested-rules)，[使用 &](http://lesscss.org/#-advanced-usage-of-&)）

否则，既然您无论如何都是 hacky，为什么不在[条件注释](http://www.quirksmode.org/css/condcom.html)中引用不同的 .less 编译输出表呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-26T09:16:01.233

你可以试试这个：`background-position:~"-150px 0px\9" width:~"300px\9";`

例子：

```
.test{
    width:~"300px\9";
} 
```**

# iphone - UIWebView：应用程序旋转

> ID：14464532
> 
> 赞同：0
> 
> 时间：2013-01-22T17:29:35.517
> 
> 标签：iphone, xcode, uiwebview, uiinterfaceorientation

我想在我的 UIWebView 中打开嵌入 youtube 视频，并使用下面的代码来实现它。

```
videoURL = @"http://www.youtube.com/embed/A9kCPgVIbH4";
videoView = [[UIWebView alloc] initWithFrame:CGRectMake(0, -30, self.view.frame.size.width, 210)];
videoView.scrollView.scrollEnabled = NO;
videoView.backgroundColor = [UIColor clearColor];
videoView.opaque = NO;
videoHTML = [NSString stringWithFormat:@"\
             <html>\
             <head>\
             <style type=\"text/css\">\
             iframe {position:absolute; margin-top:0px;}\
             body {background-color:#000; margin:0;}\
             </style>\
             </head>\
             <body>\
             <iframe width=\"100%%\" height=\"240px\" src=\"%@\" frameborder=\"0\" allowfullscreen></iframe>\
             </body>\
             </html>", videoURL];
[self.tableView addSubview:videoView];
[videoView loadHTMLString:videoHTML baseURL:nil]; 
```

但是，有一个大问题。我的应用程序仅使用 UIInterfaceOrientationPortrait，但是当我单击此 UIWebView youtube 播放器时，它会以全屏模式打开，并且我能够将视频旋转到横向模式。看完视频后，我点击“返回”，然后开始我所有的问题。我的应用程序也旋转到横向模式，因此看起来不太好。也许有人知道如何解决这个问题？只是如何阻止 UIWebView 旋转，或者根本如何阻止旋转。

在 Info-plist 中，我已经删除了除纵向之外的所有方向，但没有任何改变。等待任何回应，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:09:02.360

通过查看您的应用程序委托并实现supportedInterfaceOrientationsForWindow 以仅返回UIInterfaceOrientationMaskPortrait，您可能会更幸运。

您还可以在视图控制器中查看supportedInterfaceOrientations 函数并让它只返回肖像蒙版，或者实现shouldAutorotate 以返回NO。

# django - Gunicorn Supervisor 启动错误

> ID：14464533
> 
> 赞同：1
> 
> 时间：2013-01-22T17:29:40.107
> 
> 标签：django, gunicorn, supervisord

我已经按照[本教程](http://www.apreche.net/complete-single-server-django-stack-tutorial/)进行了两次，但是在我运行它的第二台机器上，我得到了一个主管运行的 gunicorn 错误。当我告诉主管使用以下方法启动 gunicorn 时：

```
$ sudo supervisorctl start gunicorn
gunicorn: ERROR (abnormal termination) 
```

gunicorn_err.log 重复这个：

```
Unknown command: 'run_gunicorn'
Type 'manage.py help' for usage. 
```

主管配置如下所示：

```
[program:gunicorn]
command=/home/ubuntu/.virtualenvs/<VIRTUALENV>/bin/python /home/ubuntu/<APPNAME>/manage.py run_gunicorn -w 4 -k gevent
directory=/home/ubuntu/<APPNAME>
user=www-data
autostart=true
autorestart=true
stdout_logfile = /var/log/supervisor/gunicorn.log
stderr_logfile = /var/log/supervisor/gunicorn_err.log 
```

gunicorn.log 是空的。我尝试将用户更改为 ubuntu 并在没有 virtualenv 的情况下运行（我的“默认”python 环境也已准备就绪，因为它具有所有先决条件包。）我什至尝试在 gunicorn 中删除变量分配之间的空格。 conf 实际上，如果我手动运行：

```
$ /usr/bin/python /home/ubuntu/<APPNAME>/manage.py run_gunicorn -w 4 -k gevent
2013-01-22 19:20:33 [1231] [INFO] Starting gunicorn 0.17.2
2013-01-22 19:20:33 [1231] [INFO] Listening at: http://127.0.0.1:8000 (1231)
2013-01-22 19:20:33 [1231] [INFO] Using worker: gevent
2013-01-22 19:20:33 [1236] [INFO] Booting worker with pid: 1236
2013-01-22 19:20:33 [1237] [INFO] Booting worker with pid: 1237
2013-01-22 19:20:33 [1238] [INFO] Booting worker with pid: 1238
2013-01-22 19:20:33 [1239] [INFO] Booting worker with pid: 1239 
```

与 virtualenv python 运行相同：

```
$ /home/ubuntu/.virtualenvs/<VIRTUALENV>/bin/python /home/ubuntu/<APPNAME>/manage.py run_gunicorn -w 4 -k gevent
2013-01-22 19:21:53 [1246] [INFO] Starting gunicorn 0.17.2
2013-01-22 19:21:53 [1246] [INFO] Listening at: http://127.0.0.1:8000 (1246)
2013-01-22 19:21:53 [1246] [INFO] Using worker: gevent
2013-01-22 19:21:53 [1251] [INFO] Booting worker with pid: 1251
2013-01-22 19:21:53 [1252] [INFO] Booting worker with pid: 1252
2013-01-22 19:21:53 [1253] [INFO] Booting worker with pid: 1253
2013-01-22 19:21:53 [1254] [INFO] Booting worker with pid: 1254 
```

当我可以使用任何 python 环境运行它并且它可以工作时，主管启动的 gunicorn 怎么可能找不到“run_gunicorn”命令？是`'gunicorn'`的，在`INSTALLED_APPS`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:05:47.883

原来这是我在 settings.py 中得到的一个环境变量，在 supervisord 的 start gunicorn 下不存在。

此外，环境变量错误被抑制并且从未进入 gunicorn_err.log

当我将 gunicorn.conf 命令切换为：

```
command = /usr/local/bin/gunicorn_django -w 4 -k gevent 
```

我可以在 gunicorn_err.log 中看到更清晰的错误

```
 raise KeyError(key)
KeyError: 'AWS_STORAGE_BUCKET_NAME'
2013-01-22 22:51:09 [2290] [INFO] Worker exiting (pid: 2290) 
```

为了解决这个问题，我只是没有使用环境变量，而是使用不同的方式获取了变量。然后它起作用了，我恢复到原来的 virtualenv run_gunicorn 命令

```
command=/home/ubuntu/.virtualenvs/<VIRTUALENV>/bin/python /home/ubuntu/<APPNAME>/manage.py run_gunicorn -w 4 -k gevent 
```

如果继续在设置中使用环境变量很重要，请查看[supervisord-configuration](http://supervisord.org/configuration.html)，似乎有一种方法可以为 supervisord 执行的应用程序配置键/值环境变量对。

# android - Maven 安卓插件

> ID：14464540
> 
> 赞同：2
> 
> 时间：2013-01-22T17:29:54.663
> 
> 标签：android, maven, plugins

我觉得我一定是错过了什么。有一百万个使用`maven-android-plugin`.

我只是在我的 pom 文件中引用它吗？

如果没有它，我的 pom 文件会在这一行引发错误：

```
<packaging>apk</packaging> 
```

# java - 睡眠并检查直到条件为真

> ID：14464544
> 
> 赞同：25
> 
> 时间：2013-01-22T17:30:17.557
> 
> 标签：java, multithreading, sleep

Java中是否有执行以下操作的库？A`thread`应该重复`sleep`x 毫秒，直到条件变为真或达到最大时间。

这种情况主要发生在测试等待某个条件变为真时。条件受另一个影响`thread`。

[编辑]为了更清楚，我希望测试在失败之前只等待 X 毫秒。它不能永远等待条件变为真。我正在添加一个人为的例子。

```
class StateHolder{
    boolean active = false;
    StateHolder(){
        new Thread(new Runnable(){
            public void run(){
                active = true;
            }
        }, "State-Changer").start()
    }
    boolean isActive(){
        return active;
    }
}

class StateHolderTest{
    @Test
    public void shouldTurnActive(){
        StateHolder holder = new StateHolder();
        assertTrue(holder.isActive); // i want this call not to fail 
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-22T17:32:35.400

**编辑**

大多数答案都集中在带有等待和通知或条件的低级 API（它们的工作方式或多或少相同）：当您不习惯它时，很难做到正确。证明：这些答案中有 2 个没有正确使用等待。
[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)为您提供了一个高级 API，所有这些复杂性都被隐藏了。

恕我直言，当并发包中有一个实现相同功能的内置类时，使用等待/通知模式是没有意义的。

* * *

初始计数为 1的[CountDownLatch正是这样做的：](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)

*   当条件成立时，调用`latch.countdown();`
*   在您的等待线程中，使用：`boolean ok = latch.await(1, TimeUnit.SECONDS);`

人为的例子：

```
final CountDownLatch done = new CountDownLatch(1);

new Thread(new Runnable() {

    @Override
    public void run() {
        longProcessing();
        done.countDown();
    }
}).start();

//in your waiting thread:
boolean processingCompleteWithin1Second = done.await(1, TimeUnit.SECONDS); 
```

注意：CountDownLatches 是线程安全的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-11T08:00:51.893

[Awaitility](https://github.com/awaitility/awaitility#Example_1_-_Simple)提供了一个简单而干净的解决方案：

```
await().atMost(10, SECONDS).until(() -> condition()); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-22T17:54:41.117

您应该使用[`Condition`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html).

如果您想在条件之外设置超时，请参阅[`await(long time, TimeUnit unit)`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html#await%28long,%20java.util.concurrent.TimeUnit%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-28T21:17:18.070

我一直在寻找像 Awaitility 提供的解决方案。我想我在我的问题中选择了一个不正确的例子。我的意思是在您期望发生由第三方服务创建的异步事件并且客户端无法修改服务以提供通知的情况下。一个更合理的例子是下面的例子。

```
class ThirdPartyService {

    ThirdPartyService() {
        new Thread() {

            public void run() {
                ServerSocket serverSocket = new ServerSocket(300);
                Socket socket = serverSocket.accept();
                // ... handle socket ...
            }
        }.start();
    }
}

class ThirdPartyTest {

    @Before
    public void startThirdPartyService() {
        new ThirdPartyService();
    }

    @Test
    public void assertThirdPartyServiceBecomesAvailableForService() {
        Client client = new Client();
        Awaitility.await().atMost(50, SECONDS).untilCall(to(client).canConnectTo(300), equalTo(true));
    }
}

class Client {

    public boolean canConnect(int port) {
        try {
            Socket socket = new Socket(port);
            return true;
        } catch (Exception e) {
            return false;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:32:19.753

你不应该睡觉和检查，睡觉和检查。你想等待一个条件变量，让条件改变，并在该做某事的时候唤醒线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-03T10:56:32.227

你可以使用这样的东西，但是用你想要检查的条件替换“真”，它会一直休眠直到它变为真。

```
sleepUntil(() -> true);

//Sleeps this thread until the condition is true.
public static void sleepUntil(BooleanSupplier condition) {
    while(!condition.getAsBoolean()) {
        sleep(10);
    }
}

//Sleeps this thread with the given amount of milliseconds
public static void sleep(int ms) {
    try {
         Thread.sleep(ms);
    } catch (Exception e) {}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-12T09:41:22.420

我通过使用功能接口应用这种通用方法解决了这个问题：

```
private void waitUntilConditionIsMet(BooleanSupplier awaitedCondition, int timeoutInSec) {
    boolean done;
    long startTime = System.currentTimeMillis();
    do {
        done = awaitedCondition.getAsBoolean();
    } while (!done && System.currentTimeMillis() - startTime < timeoutInSec * 1000);
} 
```

然后你可以实现：

```
class StateHolderTest{
    @Test
    public void shouldTurnActive(){
        StateHolder holder = new StateHolder();
        waitUntilConditionIsMet(() -> holder.isActive(), 10);
        assertTrue(holder.isActive);
    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-22T18:07:08.743

看起来你想要做的是检查条件，然后如果它是假的，等到超时。然后，在另一个线程中，一旦操作完成，就通知All。

**服务员**

```
synchronized(sharedObject){
  if(conditionIsFalse){
       sharedObject.wait(timeout);
       if(conditionIsFalse){ //check if this was woken up by a notify or something else
           //report some error
       }
       else{
           //do stuff when true
       }
  }
  else{
      //do stuff when true
  }
} 
```

**更换器**

```
 synchronized(sharedObject){
   //do stuff to change the condition
   sharedObject.notifyAll();
 } 
```

那应该对你有用。您也可以使用自旋锁来执行此操作，但每次通过循环时都需要检查超时。虽然代码实际上可能更简单一些。

# android - 从 HTML 读取文本 (Android)

> ID：14464545
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:30:18.547
> 
> 标签：android, html, sdk

我的视图中有一个标签。标签的文本必须是网页[http://sample.com/file.html](http://sample.com/file.html)上的文本。

如何在安卓上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:40:10.877

使用 HTML 解析器获取 HTML 网站，然后提取您感兴趣的数据以将其显示在 TextView 中。例如，您可以使用**Jsoup** [http://jsoup.org/](http://jsoup.org/)，它提供了一个 API，用于使用 DOM、CSS 和类似 jquery 的方法从 Web 中提取和操作数据。这是如何使用它的简单教程：http: [//blog.tallan.com/2012/07/26/parsing-html-using-jsoup-library/](http://blog.tallan.com/2012/07/26/parsing-html-using-jsoup-library/)

# vb.net - visual basic 2008在点击时生成文本框

> ID：14464547
> 
> 赞同：0
> 
> 时间：2013-01-22T17:30:23.673
> 
> 标签：vb.net, events

我已经创建了文本框和生成按钮。当我单击生成按钮时，我希望它显示一个带有数字的文本框。我如何使用事件处理程序来做到这一点？对不起，基本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:33:03.750

如果您要做的只是在单击按钮时设置文本框的值，那么您可以像以下示例中那样进行操作。您必须将控件的名称替换为您所称的名称：

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    Static count As Integer = 0
    count += 1
    Select Case count
        Case 1
            TextBox1.Text = "123"
        Case 2
            TextBox1.Text = "345"
    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:35:56.853

首先，从您的工具箱中拖出一个`TextBox`，然后双击您的按钮并编辑您的`Button1_Click`方法，如下所示：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
   TextBox1.Text = "12234234234"
End Sub 
```

# clang - 有没有一种简单的方法可以在 Open MPI 中使用 clang？

> ID：14464554
> 
> 赞同：11
> 
> 时间：2013-01-22T17:30:39.010
> 
> 标签：clang, openmpi

OpenMPI[强烈建议](http://www.open-mpi.org/faq/?category=mpi-apps#general-build)使用他们的包装编译器。在幕后，他们的包装编译器 mpiCC 调用 gcc（默认情况下？）并添加 MPI 代码编译所需的标志。然而，其他编译器提供比 gcc 更多的描述性错误消息（例如也与 GCC 兼容的[clang ）。](http://clang.llvm.org/)所以，我希望能够在 Open MPI 中使用 clang。

我试过：

1) 找到一个 mpiCC 选项来指定编译器，但是

```
mpiCC --help 
```

只是吐出 g++ 帮助页面。

2) 使用 --showme:compile 选项

```
mpiCC --showme:compile ./test-boost.cc -lboost_mpi -lboost_serialization -o test-boost 
```

它不是调用 gcc，而是打印编译 MPI 代码所需的标志。然后我可以将它们与 clang 一起使用（因为它与 GCC 兼容）。这应该可行，但我正在寻找更简单的解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T17:35:49.087

Open MPI FAQ 说明了可以设置哪些环境变量来覆盖包装器调用的编译器的默认选择。

[http://www.open-mpi.org/faq/?category=mpi-apps#override-wrappers-after-v1.0](http://www.open-mpi.org/faq/?category=mpi-apps#override-wrappers-after-v1.0)

根据 OpenMPI 的版本，您应该设置`OMPI_CXX=clang++`或`OMPI_MPICC=clang`. 对于 OpenMPI v.1.1 及更高版本，请使用`OMPI_CXX`然后调用包装编译器。包装器会依次调用 clang++。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T22:06:24.340

如 OpenMPI 的官方常见问题解答中所述，在 中设置`OMPI_CC=clang`或`OMPI_CXX=clang++`作为环境变量对我不起作用。`.bashrc`每当我使用时，我都必须将它们附加在前面`mpicc`，例如

```
OMPI_CC=clang mpicc --showme:command 
```

所以在`Makefile`，我设置`CC=OMPI_CC=clang mpicc`，这对我很有效。

# list - xslt 排序列表，如果倍数只打印一次

> ID：14464556
> 
> 赞同：0
> 
> 时间：2013-01-22T17:30:45.483
> 
> 标签：list, xslt

我有以下下拉列表

```
<xsl:if test="bankguarantee!=0">
            <li style="font-family:Arial,Arial MT,Luxi Sans,Verdana; font-size:10pt; margin:0cm 0cm 0pt; ">
                <p style="font-family:Arial,Arial MT,Luxi Sans,Verdana; font-size:10pt; margin:0cm 0cm 0pt; ">
                    <span style="font-family:Arial,Arial MT,Luxi Sans,Verdana; font-size:11.0pt; ">The terms and conditions of <xsl:if test="bankguarantee='1'">the </xsl:if>
            <xsl:if test="bankguarantee!='1'">each </xsl:if>
    <xsl:for-each select="bankguarantees/bankguaranteedata">
    <xsl:if test="producttypes/option[@id='A']='selected'">A</xsl:if>
    <xsl:if test="producttypes/option[@id='B']='selected'">B</xsl:if>
    <xsl:if test="producttypes/option[@id='C']='selected'">C</xsl:if>
    <xsl:if test="producttypes/option[@id='D']='selected'">D</xsl:if>
    <xsl:if test="producttypes/option[@id='E']='selected'">E</xsl:if>
    <xsl:if test="producttypes/option[@id='F']='selected'">F</xsl:if>
    <xsl:if test="producttypes/option[@id='G']='selected'">G</xsl:if>
    <xsl:if test="producttypes/option[@id='H']='selected'"><xsl:value-of select="otherprodtypebox"/></xsl:if>
  <xsl:if test="position()!=last() and position()!=last()-1">
    <xsl:text>, </xsl:text>
  </xsl:if>
  <xsl:if test="position()=last()-1">
    <xsl:text> and </xsl:text>
  </xsl:if>
  <xsl:if test="position()=last()">
    <xsl:text></xsl:text>
  </xsl:if></xsl:for-each>
</xsl:if> 
```

和以下xml

```
<producttypes>
                <option id="A">selected</option>
                <option id="B"/>
                <option id="C"/>
                <option id="D"/>
                <option id="E"/>
                <option id="F"/>
                <option id="G"/>
                <option id="H"/>
            </producttypes>
        <otherprodtypebox/> 
```

目前基本上一切正常，但我想避免多次发生并将所有其他框放在最后。可以有 99 个这样的屏幕。

目前说我选择了 5 个选项，我可以得到 A、B、B、otherbox 和 otherbox

如果 A 被多次选择，我希望它只显示 A 并且对于 G 的所有字母都相同

问题出现在 H 的另一个盒子上，它可以有多个

所以你可以有

A、B、C、D、E、F、G、H、H、H、H 和 H

我希望这是有道理的，并且非常感谢任何解决方案。

NB 重要的是要注意每个屏幕都创建了 XML，所以我可以有 99 个不同的 XML，每次都选择不同的东西。这就是 for-each 部分比较棘手的地方。也许它可以检测是否选择了超过 1 个 A。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:05:22.923

如何在 XSLT 文件顶部附近添加它：

```
<xsl:key name="productOption" match="producttypes/option[. = 'selected']" use="@id"/> 
```

`for-each`并用这个循环替换你的`for-each`循环：

```
 <xsl:for-each 
   select="bankguarantees/bankguaranteedata/producttypes/option[generate-id(.) = generate-id(key('productOption', @id)[1]) or @id = 'H']">
    <xsl:sort select="count(preceding-sibling::option)" data-type="number" />
    <xsl:if test="@id = 'A'">A</xsl:if>
    <xsl:if test="@id = 'B'">B</xsl:if>
    <xsl:if test="@id = 'C'">C</xsl:if>
    <xsl:if test="@id = 'D'">D</xsl:if>
    <xsl:if test="@id = 'E'">E</xsl:if>
    <xsl:if test="@id = 'F'">F</xsl:if>
    <xsl:if test="@id = 'G'">G</xsl:if>
    <xsl:if test="@id = 'H'">
      <xsl:value-of select="../../otherprodtypebox"/>
    </xsl:if>
    <xsl:if test="position()!=last() and position()!=last()-1">
      <xsl:text>, </xsl:text>
    </xsl:if>
    <xsl:if test="position() = last()-1">
      <xsl:text> and </xsl:text>
    </xsl:if>
  </xsl:for-each> 
```

在此输入上运行时：

```
<bankguarantees>
  <bankguaranteedata>
    <producttypes>
      <option id="A">selected</option>
      <option id="B"/>
      <option id="C"/>
      <option id="D"/>
      <option id="E"/>
      <option id="F"/>
      <option id="G"/>
      <option id="H"/>
    </producttypes>
    <otherprodtypebox>sprockets</otherprodtypebox>
  </bankguaranteedata>
  <bankguaranteedata>
    <producttypes>
      <option id="A">selected</option>
      <option id="B"/>
      <option id="C"/>
      <option id="D">selected</option>
      <option id="E"/>
      <option id="F"/>
      <option id="G"/>
      <option id="H">selected</option>
    </producttypes>
    <otherprodtypebox>widgets</otherprodtypebox>
  </bankguaranteedata>
  <bankguaranteedata>
    <producttypes>
      <option id="A">selected</option>
      <option id="B">selected</option>
      <option id="C"/>
      <option id="D">selected</option>
      <option id="E"/>
      <option id="F"/>
      <option id="G"/>
      <option id="H">selected</option>
    </producttypes>
    <otherprodtypebox>cogs</otherprodtypebox>
  </bankguaranteedata>

</bankguarantees> 
```

产生这个输出：

```
A, B, D, widgets and cogs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:28:41.787

删除重复项通常称为“分组”，如果您在您最喜欢的 XSLT 教科书的索引中查找分组，您会发现大量信息。

在 XSLT 2.0 中有很好的解决方案，在 XSLT 1.0 中有丑陋的解决方案，所以答案很大程度上取决于您使用的版本，而您没有说。

# .htaccess - Trigger.IO CORS 设置

> ID：14464557
> 
> 赞同：1
> 
> 时间：2013-01-22T17:30:47.713
> 
> 标签：.htaccess, cors, trigger.io

我正在尝试让 CORS 在我的 trigger.io 应用上运行：

我的 .htaccess 中有以下设置

```
Header set Access-Control-Allow-Headers: "Accept,Origin,Content-Type,X-Requested-With"
Header set Access-Control-Allow-Methods "GET,PUT,POST,DELETE,OPTIONS"
Header set Access-Control-Allow-Credentials: "true"
Header set Access-Control-Allow-Origin "http://localhost:3000,content://io.trigger.forge99d5a0b8621e11e28cc2123139286d0c" 
```

在 web (localhost:3000) 中运行触发器应用程序工作正常。

但是当我将它部署到（android）设备时，我在调试输出中看到以下错误：

```
[ERROR] XMLHttpRequest cannot load {link}http://mydevtest.lan/api/auth/currentuser.{/link} Origin content://io.trigger.forge99d5a0b8621e11e28cc2123139286d0c is not allowed by Access-Control-Allow-Origin. -- From line 1 of null 
```

我担心在 Access-Control-Allow-Origin 标头中设置 content:// 是不合法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:49:55.347

您拥有的 Access-Control-Allow-Origin 标头无效。有效值为“*”或以[*空格*分隔的来源列表](https://www.rfc-editor.org/rfc/rfc6454#section-7.1)。以下其中一项应该有效：

```
Header set Access-Control-Allow-Origin "*" 
```

或者

```
Header set Access-Control-Allow-Origin "http://localhost:3000 content://io.trigger.forge99d5a0b8621e11e28cc2123139286d0c" 
```

请注意，我从未测试过后一种形式（具有多个来源）。虽然 CORS 规范允许，但浏览器可能还不支持它。

您可以做的另一件事是读取`Origin`标头的值，在您的服务器上验证它（即手动检查该值是否等于“http://localhost:3000”或“content://io.trigger.forge99d5a0b8621e11e28cc2123139286d0c” )，然后仅在`Access-Control-Allow-Origin`响应标头中回显该值。然而，这需要更多的工作，因为它引入了一些服务器端条件处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:40:13.673

我也担心 CORS 中不允许 content:// ，您可以尝试设置`Access-Control-Allow_origin`为`*`，如果可行，那么这可能是问题所在。

一个更好的解决方案是避免执行 XHR 请求并使用 forge.request.ajax 它将从本机代码发出请求并避免任何跨域限制。您可以在此处找到相关文档[http://docs.trigger.io/en/v1.4/modules/request.html#modules-request](http://docs.trigger.io/en/v1.4/modules/request.html#modules-request)

# sql - 以下场景的 Sql 查询

> ID：14464558
> 
> 赞同：0
> 
> 时间：2013-01-22T17:30:50.130
> 
> 标签：sql, database, plsql

我有以下场景，我需要为此编写 sql 查询。

我有 ICCID 表和 ICCID 属性表，其中包含以下信息。

![在此处输入图像描述](../Images/79a85977f68661329c6da351eb3fa1de.png)

我想找出所有在 2012 年 12 月处于删除状态的活动 iccid 和 iccid。对于处于删除状态的 ICCID，`date.to.change`键入记录 ICCID 删除日期的 ICCID 属性表本身。

```
this is my attempt, but that did not worked
     select e.ID_ICCID from ICCID_PROPERTY e where 
     e.c_key ='STATE' and e.c_value='Active' or(
     e.c_key ='STATE' and 
     e.c_value='Removed' and
     e.c_key='date.to.change' and  
     to_date(e.c_value,'yyyymmdd')  >=to_date('2012-DEC-01 00:00:00', 'YYYY-MON-DD HH24:MI:SS') and 
     to_date(e.c_value,'yyyymmdd')  <= to_date('2012-DEC-31 23:59:59', 'YYYY-MON-DD HH24:MI:SS')
     )) 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:43:11.953

这是这样的键值对设计的问题之一......

您不能只检查单个属性行以查看它是否与搜索条件匹配，因为在这种情况下，条件将跨越多个属性......您必须检查单个父行是否具有匹配的所有子属性：

```
SELECT
    i.ICCID
FROM
    ICCID i
WHERE
    EXISTS (
        SELECT 1
        FROM ICCID_PROPERTY ip
        WHERE 
            ip.ID_ICCID = i.ID_ICCID
            AND ip.c_key = 'STATE'
            AND ip.c_value = 'Active'
    ) OR (
        EXISTS (
            SELECT 1
            FROM ICCID_PROPERTY ip
            WHERE 
                ip.ID_ICCID = i.ID_ICCID
                AND ip.c_key = 'STATE'
                AND ip.c_value = 'Removed'
        ) AND
        EXISTS (
            SELECT 1
            FROM ICCID_PROPERTY ip
            WHERE 
                ip.ID_ICCID = i.ID_ICCID
                AND ip.c_key = 'date.to.change'
                AND to_date(ip.c_value,'yyyymmdd') >= 
                    to_date('2012-DEC-01 00:00:00', 'YYYY-MON-DD HH24:MI:SS') 
                AND to_date(ip.c_value,'yyyymmdd') <= 
                    to_date('2012-DEC-31 23:59:59', 'YYYY-MON-DD HH24:MI:SS')
        )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:53:13.750

我认为您可以加入 Property 表三次 - 可能是这样的（未经测试）：

```
SELECT I.ID_ICCID
FROM ICCID I
  JOIN ICCID_Property IP ON I.ID_ICCID = IP.ID_ICCID AND IP.C_Key = 'STATE' AND IP.C_Value = 'Active'
  JOIN ICCID_Property IP2 ON I.ID_ICCID = IP.ID_ICCID AND IP2.C_Key = 'STATE' AND IP2.C_Value= 'Removed'
  JOIN ICCID_Property IP3 ON I.ID_ICCID = IP.ID_ICCID AND IP3.C_Key = 'date.to.change' AND to_date(IP3.C_Value,'yyyymmdd') >= to_date('2012-DEC-01 00:00:00', 'YYYY-MON-DD HH24:MI:SS') 
            AND to_date(IP3.C_Value,'yyyymmdd') <= 
                to_date('2012-DEC-31 23:59:59', 'YYYY-MON-DD HH24:MI:SS') 
```

祝你好运。

# java - 如何在首选项的列表视图中更改焦点颜色？

> ID：14464566
> 
> 赞同：4
> 
> 时间：2013-01-22T17:31:15.037
> 
> 标签：java, android, xml

首先请看下面的图片：

![在此处输入图像描述](../Images/36b5a3f91d9b58ee982cb833a8bbf496.png)

我已经通过@styles 改变了文本颜色的背景颜色

```
 <style name="PreferenceTheme">

    <item name="android:background">#000000</item>
    <item name="android:textColor">#FFFFFF</item>

</style> 
```

在我的应用程序中，我想更改焦点颜色（使用光学鼠标滚动时）。我怎么做？我想在首选项中更改该颜色（例如图片中的此处）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:22:33.153

您可以在 xml 中使用 android:listSelector="@android:color/transparent" 属性。

前任：

```
 <ListView
    android:id="@+id/mainListView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:listSelector="@color/white">

</ListView> 
```

甚至

```
android:listSelector="@drawable/list_selector" 
```

我猜也可以

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:51:09.720

使用`setOnItemClickListener`这样的东西：

```
YourListView.setOnItemClickListener(new OnItemClickListener() {

     public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                      long arg3) {
     arg1.setBackgroundColor(Color.BLUE);
    }
}); 
```

# android - 配置更改后活动引用错误的嵌套片段

> ID：14464570
> 
> 赞同：5
> 
> 时间：2013-01-22T17:31:30.633
> 
> 标签：android, android-fragments, android-fragmentactivity, android-support-library

我终于在[支持库](http://developer.android.com/tools/extras/support-library.html) 修订版 11 中研究新的嵌套片段 API。

在我尝试使用嵌套片段所持有的活动引用之前，一切都运行良好。配置更改后，*childFragment*似乎没有分离并重新附加到新活动。

基本上在方向改变后，我的*childFragment*处于不一致的状态，我无法使用[getActivity()](https://developer.android.com/reference/android/support/v4/app/Fragment.html#getActivity%28%29)获得正确的活动实例。

[我设法使用getParentFragment()](https://developer.android.com/reference/android/support/v4/app/Fragment.html#getParentFragment%28%29) .getActivity()获得了正确的方法，并且它有效，但我认为这不是正确的方法。

*这是我第一次在parentFragment*中添加片段的代码，之后片段会自动添加回*parentFragment*：

```
 public void addChildFragment() {
            Fragment f = getFragment().getChildFragmentManager().findFragmentByTag( FRAGMENT_CHILD_TAG );
            if (f == null) {
                FragmentTransaction ft = getFragment().getChildFragmentManager().beginTransaction();

                f = new TrackBrowserFragment();
                f.setArguments( getFragment().getArguments() );

                ft.add( R.id.fragment_album_detail_child_fragment_layout, f , FRAGMENT_CHILD_TAG );
                ft.commit();
            }
        } 
```

活动实例中的这种不一致显然会导致我的片段出现多个问题（与服务、广播接收器等绑定）。我可能做错了什么，因为我认为这不是嵌套片段的正确行为。

所以：

我对代码做错了吗？这是嵌套片段的预期行为吗？

我错过了什么吗？我应该自己分离/连接它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T15:18:14.390

我发现问题出在哪里，我在父片段中使用 setRetainInstance(true) 并保持子片段被分离。

在我删除该行之后，一切都按预期工作

# jquery - jQuery可拖动，向左偏移

> ID：14464574
> 
> 赞同：0
> 
> 时间：2013-01-22T17:31:46.360
> 
> 标签：jquery, draggable, droppable

有谁知道，我有一个可拖动的项目，它应该捕捉到可放置的项目。我有这个工作，但我似乎无法弄清楚的是，我希望可拖动对象一旦放到可放置对象上，就可以对齐自身，使其刚好离开左侧。就像下图一样。

有谁知道用 jQuerys 可拖动/可放置对象来做到这一点的方法？

**更新**

这是我在删除对象时拥有的功能。

```
function handleCardDrop( event, ui ) {
  var slotNumber = $(this).data( 'number' );
  var cardNumber = ui.draggable.data( 'number' );

  // If the card was dropped to the correct slot,
  // change the card colour, position it directly
  // on top of the slot, and prevent it being dragged
  // again
  //alert("Slot number: "+slotNumber+"\n Card Number: "+cardNumber);

  //alert(cardNumber+":"+slotNumber);
  if(cardNumber==slotNumber)
  {
      correctCards++;
  }

    ui.draggable.addClass( 'correct' );
    ui.draggable.draggable( 'disable' );

    ui.draggable.addClass( 'correct' );
    ui.draggable.draggable( 'disable' );
    $(this).droppable( 'disable' );

    ui.draggable.css({'cursor':'default'});
    ui.draggable.position( { of: $(this), my: 'left top', at: 'left top' } );
    ui.draggable.draggable( 'option', 'revert', false );
} 
```

![在此处输入图像描述](../Images/b8c43012432d9a4949751a91e4ca700f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:53:04.337

I figured out a way to achieve this. I was using the position() function when what I really needed was the offset() function. This a snippet of the code I used for the positioning. The draggable object is a little bit smaller height, so for the top I calculate the different in size and then divide it by 2 to center it within the object. Then I just set it to half the draggable being off of the droppable object.

```
 var off = $( this ).offset();
    off.top += (($( this ).height() - ui.draggable.height())/2);
    off.left -= ui.draggable.width()/2;

    ui.draggable.offset( off ); 
```

# iphone - uibutton上的动画gif

> ID：14464579
> 
> 赞同：1
> 
> 时间：2013-01-22T17:32:17.267
> 
> 标签：iphone, uibutton, gif, animated

我使用这个代码，这个工作，真正的图像大小为 160x148，但图像按钮在所有屏幕上都非常大！

```
UIImageView* animatedImageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
animatedImageView.animationImages = [NSArray arrayWithObjects:    
                               [UIImage imageNamed:@"button1.png"],
                               [UIImage imageNamed:@"button2.png"],
                               [UIImage imageNamed:@"button3.png"],
                               [UIImage imageNamed:@"button4.png"], nil];
animatedImageView.animationDuration = 1.0f;
animatedImageView.animationRepeatCount = 0;
[animatedImageView startAnimating];
[yourButton addSubview: animatedImageView]; 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:18:06.023

图像很大，因为您调用`initWithFrame:`并通过了视图的边界。将其更改为不同大小的矩形，例如：

```
CGRectMake(0, 0, 160, 148) 
```

...然后按照您认为合适的方式重新定位它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:49:55.223

试试这个代码。它将帮助您找到正确的解决方案。

```
 UIImage *myimage=UIImage imageNamed:@"button1.png";
Button.imageview.image=myimage; 
```

# visual-studio-2010 - Boost预处理器 - 奇怪的结果

> ID：14464582
> 
> 赞同：2
> 
> 时间：2013-01-22T17:32:20.510
> 
> 标签：visual-studio-2010, macros, boost-preprocessor

检查以下宏：

```
#define INPUT (char, "microsecond", "us")(int, "millisecond", "ms")(int, "second", "s")(int, "minute", "min")(float, "hour", "h") 
```

目标是在每个元组周围添加双括号，结果是：

```
((char, "microsecond", "us"))((int, "millisecond", "ms"))((int, "second", "s"))((int, "minute", "min"))((float, "hour", "h")) 
```

现在我使用以下宏来完成这项工作：

```
#define ADD_PAREN_1(A, B, C) ((A, B, C)) ADD_PAREN_2
#define ADD_PAREN_2(A, B, D) ((A, B, C)) ADD_PAREN_1
#define ADD_PAREN_1_END
#define ADD_PAREN_2_END
#define OUTPUT0 ADD_PAREN_1 INPUT
#define OUTPUT1 BOOST_PP_CAT( OUTPUT0, _END ) 
```

结果如下：

OUTPUT0 很好：

```
((char, "microsecond", "us")) ((int, "millisecond", C)) ((int, "second", "s")) ((int, "minute", C)) ((float, "hour", "h")) ADD_PAREN_2 
```

但是当调用 BOOST_PP_CAT 时，OUTPUT1 的结果是：

```
float 
```

我不明白这种行为。有什么提示吗？

注意我使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:28:18.163

预处理器通过扫描和扩展工作。因此，当它扩展您的`OUTPUT0`宏时，它会给出：

```
ADD_PAREN_1 INPUT
^ 
```

然后它扫描下一个标记以查看它是否是括号，如果是，它将`ADD_PAREN_1`作为函数宏调用。但是，它只会看到 INPUT，所以它不会调用`ADD_PAREN_1`. 接下来它扫描并展开下一个标记：

```
ADD_PAREN_1 INPUT
            ^ 
```

这将导致：

```
ADD_PAREN_1 (char, "microsecond", "us")(int, "millisecond", "ms")(int, "second", "s")(int, "minute", "min")(float, "hour", "h")
            ^ 
```

接下来，当您尝试使用 时`OUTPUT1`，它将扩展为：

```
BOOST_PP_CAT( OUTPUT0, _END ) 
```

`BOOST_PP_CAT`它将扩展`OUTPUT0`然后连接标记，所以你最终会得到这个：

```
 ADD_PAREN_1 (char, "microsecond", "us")(int, "millisecond", "ms")(int, "second", "s")(int, "minute", "min")(float, "hour", "h") ## _END 
```

如您所见，您将括号与 连接`_END`，这是不允许的，并导致编译器错误。在 Visual Studio 中，您可能会看到不同的结果，因为它们的预处理器以神秘的方式工作。

最终，要使其工作，您只需要在`OUTPUT0`宏中应用额外的扫描，如下所示：

```
#define X(x) x
#define OUTPUT0 X(ADD_PAREN_1 INPUT) 
```

这将在 C 预处理器中工作，我不知道它是否会在 Visual Studio 中完全工作（我现在无权访问它来检查），但我知道这有效：

```
#define ADD_PAREN(x) BOOST_PP_CAT(ADD_PAREN_1 x, _END)
#define ADD_PAREN_1(A, B, C) ((A, B, C)) ADD_PAREN_2
#define ADD_PAREN_2(A, B, D) ((A, B, C)) ADD_PAREN_1
#define ADD_PAREN_1_END
#define ADD_PAREN_2_END
#define OUTPUT1 ADD_PAREN(INPUT) 
```

这类似于他们在 boost 中的做法。[在此处](https://github.com/boost-lib/fusion/blob/master/include/boost/fusion/adapted/struct/adapt_assoc_struct.hpp#L73)查看如何使用[BOOST_FUSION_ADAPT_ASSOC_STRUCT_FILLER](https://github.com/boost-lib/fusion/blob/master/include/boost/fusion/adapted/struct/adapt_assoc_struct.hpp#L37)宏。

# javascript - 删除backbone.js 视图不允许我添加另一个视图

> ID：14464583
> 
> 赞同：0
> 
> 时间：2013-01-22T17:32:22.487
> 
> 标签：javascript, backbone.js

看起来每当我调用 view.remove() 时，它不仅会从 dom 中删除视图，还会从整个主体中删除

我在创建每个视图后调用 showView

```
showView : function(view) {
        if (this.currentView) {
            this.currentView.remove();
            this.currentView.unbind();
            if (this.currentView.onClose) {
                this.currentView.onClose();
            }
        }

        this.currentView = view;

        $('body').html(this.currentView.render().el);
  } 
```

由于不再有 body 元素，我无法添加另一个视图

Chrome 调试器输出：

```
$('html')

<html>​
<script id=​"tinyhippos-injected">​…​&lt;/script>​
<head>​…​&lt;/head>​
</html>​ 
```

一旦 view.remove() 运行，屏幕就会变白并且不会重新填充 $('body').html(this.currentView.render().el);

编辑：

我将每个视图从 el: $('.body') 更改为 el: '.mainContent' 并在 index.html 文件中添加了一个。

在 app.showView 中，如果它已被删除，我会添加 mainContent div。最好删除一个 div 而不是整个身体。

```
if($('.mainContent').length == 0)
    $('body').append('<div class="mainContent"></div>'); 
```

**解决方案：**

我需要覆盖我的视图删除方法。我不想删除整个 el，只是内容：[Recreating a removed view in bone js](https://stackoverflow.com/questions/10966440/recreating-a-removed-view-in-backbone-js)

```
Backbone.View.prototype.remove = function() {
    this.undelegateEvents();
    this.$el.empty();
    return this;
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:02:37.433

由于您通过添加视图，`$('body').html(this.currentView.render().el);`因此不需要在视图中设置 el 属性。

当您在视图中设置 el 属性时，您是在告诉主干找到该元素并将其用作基本元素。这样做时，您不需要将其添加到页面中`$('body').html()`，您只需调用`view.render()`. 但是当您调用 remove() 时，它将删除您设置的 el（在您的情况下为“body”或“.mainContent”）。

如果您不指定 el，它会为您生成一个新元素。在这种情况下，您确实需要添加到页面中`$('body').html(this.currentView.render().el);`，但是当您调用`remove()`它时，它只会删除生成的元素。

因此，如果您只是`el: '.mainContent'`从视图中删除，则可以避免检查并重新添加该元素。此外，您不必覆盖删除。

从视图中删除后`el: '.mainContent'`，您可以简单地执行以下操作：

```
$('body').html(view1.render().el);
view1.remove();
$('body').html(view2.render().el); 
```

# javascript - 动画到另一种背景颜色，然后再返回

> ID：14464584
> 
> 赞同：3
> 
> 时间：2013-01-22T17:32:22.913
> 
> 标签：javascript, jquery

我试图让我的白色背景闪烁绿色。目前我有这段代码将其变为绿色：

```
$( "#modal_newmessage" ).animate({
    backgroundColor: "#8bed7e"
}, 500 ); 
```

但是，我不知道如何在同一个动画中让它再次变白。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:38:21.480

您可以链接另一个`.animate()`调用，因为动画将在队列中`fx`排队。

```
$("#modal_newmessage").animate({
  backgroundColor: "#8bed7e"
}, 500).animate({
  backgroundColor: "#fff"
}, 500); 
```

请记住，大多数 jQuery 函数都是可链接的，无需调用`$("#modal_newmessage")`两次。

[看这里。](http://jsfiddle.net/7BLZw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:34:35.817

这应该有效：

```
$( "#modal_newmessage" ).animate({
    backgroundColor: "#8bed7e"
}, 500, function() {
    $( "#modal_newmessage" ).animate({ backgroundColor: "#fff" });
} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:39:26.703

尝试这个：

```
$(function() {

    $( "#modal_newmessage" ).animate({
      backgroundColor: "#aa0000",
      color: "#fff",
      width: 500
    }, 1000 ).animate({
      backgroundColor: "#fff",
      color: "#000",
      width: 240
    }, 1000 );
}); 
```

# 笔记：

对于动画背景颜色，您需要`jQuery ui`彩色动画。

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 
```

# c# - WSCF.blue 服务错误生成的 WCF 服务“实现类型是接口或抽象类，未提供实现对象”

> ID：14464585
> 
> 赞同：2
> 
> 时间：2013-01-22T17:32:27.450
> 
> 标签：c#, wcf, wsdl, abstract, wscf.blue

我正在使用 C# Visual Studio 2012 创建 wcf 服务。

我让 WSC​​F.blue 工具从 xsd-s 生成 wsdl。然后我使用相同的工具生成了 Web 服务代码。WSCF.blue 不创建服务契约和数据契约。它创建一个接口和一个包含实现该接口的类的 .svc 文件。

在生成 Web 服务代码时，我选择了创建抽象类的选项，因为我希望能够将这些类的实现保存在单独的文件中。

抽象类如下所示：

```
 [KnownType(typeof(WebMobileImplementation))]     
public abstract class WebMobile : IWebMobile
{
      public abstract PutLocationsResponse PutLocations(PutLocationsRequest request);
} 
```

实现类（在不同的文件中）看起来像这样（现在）：

```
 public class WebMobileImplementation : WebMobile
{
    public  override PutLocationsResponse PutLocations(PutLocationsRequest request)
    {
        PutLocationsResponse response = new PutLocationsResponse();
        return response;
    }
} 
```

尝试浏览服务时，我收到消息：“**服务实现类型是一个接口或抽象类，没有提供实现对象**”我认为将 knowntype 添加到实现类就可以了，但似乎实现不是运行服务时“看到”。我还能做些什么来“连接”它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:04:15.790

在 WCF 4.0 中，您可以定义映射到 Web.config 中的服务类型的虚拟服务激活终结点。这使得无需维护物理 .svc 文件即可激活 WCF 服务。

```
<serviceHostingEnvironment>
  <serviceActivations>
    <add relativeAddress="WebMobile.svc" 
         service="WebMobileNamespace.WebMobileImplementation"/>
  </serviceActivations>
</serviceHostingEnvironment> 
```

# java - Java 连接被拒绝

> ID：14464589
> 
> 赞同：0
> 
> 时间：2013-01-22T17:32:41.500
> 
> 标签：java

我编写了以下简单的代码来自动将数据输入网站。但是，我收到以下错误：

`Exception in thread "main" java.net.ConnectException: Connection refused: connect`

我正在使用 NetBeans。

代码：

```
import java.io.IOException;
import java.net.URL;
import java.util.List;
import java.util.Scanner;

import com.gargoylesoftware.htmlunit.Page;
import com.gargoylesoftware.htmlunit.*;
import com.gargoylesoftware.htmlunit.html.HtmlAnchor;
import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlTable;
import com.gargoylesoftware.htmlunit.html.HtmlTableRow;
import com.gargoylesoftware.htmlunit.html.*;

public class ts {

    public static void main(String[] args) throws IOException{
        final WebClient webClient = new WebClient();
        HtmlPage page = (HtmlPage)webClient.getPage( new URL("http://rise4fun.com/QuickCode") );
        final HtmlForm form = (HtmlForm)page.getFormsByName("form1").get(0);
        final HtmlInput inp = form.getInputByName("SourceBox");
        inp.setValueAttribute("24.9.2011 | 24 Sep 2011\n8/15/2010");
         HtmlSubmitInput sub=(HtmlSubmitInput) page.getHtmlElementById("AskButton");
         page = (HtmlPage)sub.submit();   
         final String pageAsText = page.asText();
         HtmlElement out=page.getHtmlElementById("OutputBox");
         System.out.println(out.asText());

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:49:30.710

由于我现在知道您在防火墙后面，因此您的 Java 代码必须在您可以访问 Internet 之前定义代理。

```
URL url = new URL("http://rise4fun.com/QuickCode");
System.setProperty("http.proxyHost", proxy);
System.setProperty("http.proxyPort", proxyPort);
URLConnection connection = url.openConnection(); 
```

代理的另一种编码方式是：

```
URL url = new URL("http://rise4fun.com/QuickCode");
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("proxy ip", 8080));
URLConnection connection = url.openConnection(proxy); 
```

# kernel - 操作系统内核如何获得特权来做一些低级的事情？

> ID：14464597
> 
> 赞同：1
> 
> 时间：2013-01-22T17:32:52.270
> 
> 标签：kernel

据我了解，操作系统内核有权执行一些其他程序无法执行的低级操作，例如一些低级中断或处理多个内核。

是否有某种特殊说明可以实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:39:56.450

这只是部分答案。

主要的权限分离与地址空间有关：当以“管理员模式”运行时，CPU 可以访问所有地址空间。操作系统内核在此模式下运行。用户进程没有。

这就是为什么，例如，32 位 Linux 主机上的用户进程只有 3 GB 的地址空间可供使用，而理论上可用的地址空间是 2^32 = 4 GB：“搁浅的”千兆字节只能由内核访问，内核将其数据结构映射到这个千兆字节。尝试访问该地址空间的用户进程将看到 SIGBUS。这个边界也存在于 64 位机器上，但非常遥远。

在管理员模式下，运行代码（内核）还可以修改地址空间的布局：例如，它可以渲染您的视频卡的 PCI 地址空间，或您设备的 DMA 地址空间，串口等在非监督模式下对其他运行代码（进程）完全不可见。

内核可以通过系统调用授予对低级操作（例如磁盘写入）的访问权限。当系统调用被触发时，内核代表调用它的进程在主管模式下执行系统调用。当系统调用完成或中断时，进程恢复执行，并拥有自己的权限。

当今处理器中所有这些逻辑的一个核心部分是 MMU（内存管理单元），因为这是允许重写地址空间的组件——这就是为什么你可以拥有超过 4 GB RAM 的 32 位机器，这是不可能的事情如果 MMU 不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:39:03.187

因为操作系统在引导和硬件初始化时将自己设置为最高权限所有者。操作系统在 MMU 硬件的帮助下做到这一点。例如，在基于 x86 的处理器中，硬件提供了两种保护机制

1.  **分割**：

    分段使您的内存看起来像段，并且您可以为这些段分配从 0 到 3 的特权级别（PL），0 是最高特权。在启动和初始化 h/w 时，您可以分配内核代码段 0 PL ，一旦它开始执行用户进程，内核就会为其分配 PL 3 。如果用户代码尝试跳转到更高权限的内核代码 h/w 将产生 General Protection(GP) Fault (interrupt #13) ，它将执行内核代码，然后它可以选择杀死用户进程。类似的，有些指令`lidt`只能`lgdt`在 0 PL 中执行，如果用户代码尝试执行它们会产生 GP Fault。分割还解决了以下问题：

    1.  如何表示只包含可执行代码的内存区域？
    2.  如何表示只包含数据的内存区域？
2.  **分页**：

    分页将内存分成大小（4KB/2MB/4MB/1GB）的页面，h/w 的分页支持解决了以下问题：

    1.  如果你想说一个页面属于用户或内核怎么办？
    2.  如果您想说 page 是 read-only 或 write-only 或两者都是 read-write 怎么办？

    如果用户代码试图违反操作系统设置的任何分页规则，h/w 会生成页面错误，该页面错误会执行内核代码（因为操作系统在中断/错误/异常处理程序的初始化期间设置了它），这样内核可以决定做什么与用户进程。

分割和分页都是涉及更多的主题，但这个答案仅在您的问题的上下文中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-22T17:54:46.173

理论上：是的，通过大量注入甚至黑客攻击，您甚至可以使用低级指令集，但实际上这是不可能的，因为有太多资源有时会锁定某些区域。

使用标准语言和标准库，您很可能无法访问 100% 的硬件，因为这就是它们的设计方式 - 消除关键和可能危险的决定是使复杂（和强大）框架成为可能的原因。使用 OSS 操作系统，您*可能*能够获得完全控制权，但最终您将面临同样的问题：内核操作与您自己的操作相交，如果不大量修改内核，您将无法获得完全控制权每时每刻。

如果您想 100.0% 控制您的硬件，您将被迫编写自己的引导加载程序、内核和操作系统——通过操作码级别的硬件指令，您几乎可以操纵一切；使用**任何**编程语言（甚至 ASM）都会限制您。

# codeigniter - 如何在 CodeIgniter 中为 set_rules() 编写带有表单验证的条件？

> ID：14464599
> 
> 赞同：4
> 
> 时间：2013-01-22T17:32:54.390
> 
> 标签：codeigniter

我的表单中有 3 个字段 - 比如说 A、B 和 C。我想将验证规则设置为如果字段 A 和 B 为空则需要 C。否则，需要 A 和 B。

我查阅了一些关于这个的材料，基本上我发现我可以使用回调函数，但我对 CodeIgniter 有点陌生，我不太清楚写出来的语法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T18:27:41.487

回调是处理此问题的最简洁方法：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class YourController extends CI_Controller {

    public function save() 
    {
        //.... Your controller method called on submit

        $this->load->library('form_validation');

        // Build validation rules array
        $validation_rules = array(
                                array(
                                    'field' => 'A',
                                    'label' => 'Field A',
                                    'rules' => 'trim|xss_clean'
                                    ),
                                array(
                                    'field' => 'B',
                                    'label' => 'Field B',
                                    'rules' => 'trim|xss_clean'
                                    ),
                                array(
                                    'field' => 'C',
                                    'label' => 'Field C',
                                    'rules' => 'trim|xss_clean|callback_required_inputs'
                                    )
                                );
        $this->form_validation->set_rules($validation_rules);
        $valid = $this->form_validation->run();

        // Handle $valid success (true) or failure (false)

    }

    public function required_inputs()
    {
        if( ! $this->input->post('A') AND ! $this->input->post('B') AND $this->input->post('C'))
        {
            $this->form_validation->set_message('required_inputs', 'Either A and B are required, or C.');
            return FALSE;
        }

        return TRUE;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T18:19:57.300

这很简单

```
function index()
{
    $this->load->helper(array('form', 'url'));

    $this->load->library('form_validation');

    $post_data  =   $this->input->post();

    $this->form_validation->set_rules('A', 'FieldA', 'required');
    $this->form_validation->set_rules('B', 'FieldB', 'required');

    if(!isset($post_data['A']) AND !isset($post_data['B']))
    {
        $this->form_validation->set_rules('C', 'FieldC', 'required');
    }   

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('myform');
    }
    else
    {
        $this->load->view('success');
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-01T03:58:47.870

您可以这样做，如下所示，如果您将 set_rules 放在 if 构造中，则在尝试使用表单助手重新填充时可能会遇到问题。

```
function index()
{
    $required='';
    if(isset($this->input->post('A')) && isset($this->input->post('B')))
    {
        $required='required';
    }
    $this->form_validation->set_rules('A', 'FieldA', 'required');
    $this->form_validation->set_rules('B', 'FieldB', 'required');
    $this->form_validation->set_rules('C', 'FieldC', $required);

    if ($this->form_validation->run() == FALSE)
    {
         $this->load->view('myform');
    }
    else
    {
        $this->load->view('success');
    }
} 
```

# .net - 网络流返回的字符串长度始终为 8193

> ID：14464601
> 
> 赞同：0
> 
> 时间：2013-01-22T17:32:55.403
> 
> 标签：.net, vb.net, string, networkstream, trim

我正在通过网络发送一个字符串，每次我检查接收字符串的一方时，它总是告诉我接收到的字符串的长度是`8193`. 但是当我尝试在它显示在之前分配一个值时`MsgBox`，它会返回正确的值。我尝试使用`String.Trim(Chr(10))`*,修剪字符串`String.Trim(Chr(13))`，`String.Trim(ChrW(8193))`但无济于事。

有人对此有任何想法吗？

***这是我的接收方代码。***

```
Private Sub ChatConnectionTimer_Tick(sender As Object, e As System.EventArgs) Handles ChatConnectionTimer.Tick

    Try
        Dim ConnectionStatus As String = String.Empty

        If CBool(chatClientSocket.Available) Then
            chatNetworkStream = chatClientSocket.GetStream()
            Dim ByteData(chatClientSocket.ReceiveBufferSize) As Byte
            chatNetworkStream.Read(ByteData, 0, CInt(chatClientSocket.ReceiveBufferSize))
            ConnectionStatus = Encoding.ASCII.GetString(ByteData)

            MsgBox(ConnectionStatus.Length()) 'This part always return 8193

            If ConnectionStatus.Contains("Server is disconnected.") Then
                DisconnectChat()
            End If
        End If
    Catch ex As Exception
        MessageBox.Show(ex.Message, "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:00:39.157

您的 ByteData 缓冲区始终是 ReceiveBufferSize 的大小。您要做的是检查 .Read 返回了多少，并将其用作返回消息的长度。

# ios - CGContextSetRGBFillColor 参数太少

> ID：14464603
> 
> 赞同：0
> 
> 时间：2013-01-22T17:33:01.290
> 
> 标签：ios, xcode

我正在尝试以这种方式为我的 CGContextSetRGBFillColor 设置颜色：

```
- (void) drawArrowWithContext:(CGContextRef)context atPoint:(CGPoint)startPoint withSize: (CGSize)size lineWidth:(float)width arrowHeight:(float)aheight andColor:(UIColor *)color
{   
CGContextSetRGBFillColor (context,color,color,color,1);
CGContextSetRGBStrokeColor (context, color.CGColor);

....
} 
```

...但是在这两种情况下我都收到错误“参数太少，应该是 5，是 2”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:43:56.710

*看到您的另一个问题，我建议您停下来一个小时并阅读一些文档，而不是简单地尝试在不理解或学习任何东西的情况下敲定自己的方式。*

您的代码存在问题：您传入 a`UIColor`并尝试在将浮点数作为参数的函数中使用它。为您的方法更改参数或使用可以接受 UIColor（或者更确切地说是 CGColor 表示）的不同 CoreGraphics 函数。

```
CGContextSetFillColorWithColor(context, [color CGColor]);
CGContextSetStrokeColorWithColor(context,[color CGColor]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:44:21.837

从文档中：

```
void CGContextSetRGBFillColor (
   CGContextRef c,
   CGFloat red,
   CGFloat green,
   CGFloat blue,
   CGFloat alpha
); 
```

您需要做的就是使用分解您的 UIColor

```
- (BOOL)getRed:(CGFloat *)red green:(CGFloat *)green blue:(CGFloat *)blue alpha:(CGFloat *)alpha 
```

# algorithm - 将区间插入一组不相交的区间

> ID：14464607
> 
> 赞同：1
> 
> 时间：2013-01-22T17:33:14.623
> 
> 标签：algorithm

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:40:53.667

Your question and examples imply non-overlapping intervals. In this case you can just perform a [binary search](http://en.wikipedia.org/wiki/Binary_search_algorithm) - whether comparison is done by start time or end time does not matter for non-overlapping intervals - and insert the new interval at the position found if not already present.

*UPDATE*

I missed the merging occurring in the first example. A bad case is inserting a large interval into a long list of short intervals where the long interval overlaps many short intervals. To avoid a linear search for all intervals that have to be merged one could perform two binary searches - one from the left comparing by start time and one from the right comparing by the end time.

Now it is trivial to decide if the interval is present, must be inserted or must be merged with the intervals between the positions found by the two searches. While this is not very complex it is probably very prone to [off-by-one errors](http://en.wikipedia.org/wiki/Off-by-one_error) and requires some testing.

# java - JFace DialogCellEditor：如何让按钮总是出现？

> ID：14464611
> 
> 赞同：2
> 
> 时间：2013-01-22T17:33:23.843
> 
> 标签：java, eclipse, swt, rcp, jface

我使用 JFace`DialogCellEditor`在我的 JFace 的一行单元格中显示一个按钮，该按钮在`TableViewer`激活时会触发一个对话框。此行为适用于以下代码，但该按钮仅在显式选择承载按钮的表格单元格时出现。

```
public class CompareDialogCellEditor extends DialogCellEditor {
    public CompareDialogCellEditor(Composite parent) {
           super(parent);
    }

    @Override
    protected Button createButton(Composite parent) {
           Button button = super.createButton(parent);
           button.setText("");
           button.setImage(AbstractUIPlugin.imageDescriptorFromPlugin(Application.PLUGIN_ID, IImageKeys.COMPARE_ICON).createImage());
           return button;
    }

    @Override
    protected Object openDialogBox(Control cellEditorWindow) {
           MessageDialog.openInformation(cellEditorWindow.getShell(), "Test", "It works");
           return null;
    }    
} 
```

有没有办法强制按钮始终出现在表格中，而不仅仅是在选择单元格时？（同样的行为也适用于被覆盖方法设置的标签`setContents(...)`）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:17:57.580

您一次只能编辑一个`Viewer`单元格。`Viewer`除非您进行一些自定义，否则不支持一次编辑多个单元格。

我可以想到以下解决方案。

1.  在表格单元格上绘制小部件（按钮、文本、组合..等），并 `CellEditor`在用户激活它时调用。你可以在这里找到一些关于如何在`Table`Cell 上绘画的例子。 [http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html](http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html)

2.  我在此处发布了有关如何在表格单元格中显示按钮的答案。您可以使用 SWT 遵循相同的概念`CellEditor` [- Tableviewer 将删除按钮添加到表中的列](https://stackoverflow.com/questions/12480402/swt-tableviewer-adding-a-remove-button-to-a-column-in-the-table/12486929#12486929)

# machine-learning - 梯度下降随机更新 - 停止标准和更新规则 - 机器学习

> ID：14464612
> 
> 赞同：4
> 
> 时间：2013-01-22T17:33:25.813
> 
> 标签：machine-learning, linear-regression, stochastic, gradient-descent

我的数据集具有`m`特征和`n`数据点。设`w`是一个向量（待估计）。我正在尝试使用随机更新方法实现梯度下降。我的最小化功能是`least mean square`.

更新算法如下图所示：

```
for i = 1 ... n data:
    for t = 1 ... m features:
         w_t = w_t - alpha * (<w>.<x_i> - <y_i>) * x_t 
```

其中`<x>`是`m`特征的原始向量，`<y>`是真实标签的列向量，并且`alpha`是常数。

我的问题：

*   现在根据[wiki](http://en.wikipedia.org/wiki/Stochastic_gradient_descent)，我不需要遍历所有数据点，当错误足够小时我可以停止。这是真的吗？

*   我不明白这里的停止标准应该是什么。如果有人可以提供帮助，那就太好了。

*   使用这个公式 - 我使用过`for loop`- 是否正确？我相信`(<w>.<x_i> - <y_i>) * x_t`是我的`∆Q(w)`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T04:15:11.680

> 现在根据wiki，我不需要遍历所有数据点，当错误足够小时我可以停止。这是真的吗？

当您拥有非常庞大的训练集并且遍历所有数据点非常昂贵时，尤其如此。然后，您将检查 K 个随机更新后的收敛标准（即在处理 K 个训练示例之后）。虽然这是可能的，但用一个小的训练集来做这件事并没有多大意义。人们做的另一件事是随机化处理训练示例的顺序，以避免在原始数据中有太多相关示例，这可能导致“假”收敛。

> 我不明白这里的停止标准应该是什么。如果有人可以提供帮助，那就太好了。

有几个选项。我建议尝试尽可能多的方法并根据经验结果做出决定。

1.  训练数据的目标函数差异小于阈值。
2.  保留数据（又名开发数据、验证数据）的目标函数差异小于阈值。保留的示例不应包括任何用于训练（即随机更新）的示例，也不应包括用于评估的测试集中的任何示例。
3.  参数 w 的总绝对差小于阈值。
4.  在上面的 1、2 和 3 中，您可以指定百分比，而不是指定阈值。例如，一个合理的停止标准是在 |squared_error(w) - squared_error(previous_w)| 时停止训练。< 0.01 * squared_error(previous_w) $$。
5.  有时，我们不在乎是否有最优参数。我们只是想改进我们最初拥有的参数。在这种情况下，无论目标函数是否实际收敛，都可以在训练数据上预设多次迭代并在此之后停止。

> 使用这个公式 - 我在 for 循环中使用 - 是否正确？我相信**(w.x_i - y_i) * x_t**是我的 ΔQ(w)。

它应该是**2 * (w.x_i - y_i) * x_t**但这并不是什么大问题，因为无论如何你都在乘以学习率**alpha**。

# performance - PostgreSQL 中的多行 vs 多列 vs 数组

> ID：14464614
> 
> 赞同：2
> 
> 时间：2013-01-22T17:33:34.203
> 
> 标签：performance, postgresql, database-design, optimization

我正在创建一个细粒度的权限系统，但在决定最好的方法时遇到了麻烦。我使用的数据库是 Postgres。

基本上，我将有 3 张桌子：

```
permissions
-----------
p_id, name, description

permissions_groups
------------------
pg_id, name, description

permissions_users
-----------------
pu_id, user_id 
```

任何以 '_id' 结尾的都是一个`integer`，其余的都是`varchar`or `text`。

权限系统将成为更大系统的一部分，我依赖另一个表中的用户 ID。

这是我卡住的地方。我有两个想法：

### 理念一

`permissions_group`将有一个名为的列`permissions`，它将是一个整数数组。这将包含`p_id`该权限组的所有 s。

`permissions_users`将有一个名为的列`pg_ids`，它将是一个包含用户拥有的所有权限组的整数数组，以及一个名为`permissions`(int array) 的列，它具有所有`p_id`不属于组的已分配权限。

样本数据：

```
permissions
-----------
1, add_user, Can create a user
2, delete_user, Can delete a user
3, view_users, Can view all users
4, random_perm, Some example permission

permissions_groups
-----------------
1, user_management, User management, [1,2,3]
// This group contains permissions 1,2, and 3

permissions_users
-----------------
1, 1, [1], [4]
// This user links to user with id of 1, has permissions group 1 and permission 4 
```

### 想法 2

第二个想法是更经典的SQL。3张桌子将保持不变。将有 2 个新表：

```
permissions_groups_link
-----------------------
pgl_id, pg_id, p_id

permissions_users_link
----------------------
pul_id, pu_id, p_id, pg_id 
```

现在它将像这样工作：

```
permissions_users[pu_id]
  |
  V
permissions_users_link[pu_id]
  |
  V
p_id        OR        pg_id
  |                     |
  V                     V
permissions[p_id] <- permissions_groups[pg_id] 
```

样本数据：

```
permissions
-----------
1, add_user, Can create a user
2, delete_user, Can delete a user
3, view_users, Can view all users
4, random_perm, Some example permission

permissions_groups
-----------------
1, user_management, User management

permissions_groups_link
-----------------------
1, 1, 1
2, 1, 2
3, 1, 3
// Assign permissions 1,2, and 3 to group 1

permissions_users
-----------------
1, 1

permissions_users_link
----------------------
1, 1, 4, NULL
2, 1, NULL, 1
// Assign permission 4 to user 1
// Assign group 1 to user 1 
```

### 概括

最后，所有这些数据都将汇总到一个列表中，该列表包含用户拥有的所有权限，而与组无关。因此，对于上面的示例，服务器端代码会将所有这些聚合到：

```
Permissions for user 1:
1 => add_user
2 => delete_user
3 => view_users
4 => random_perm 
```

这些组将仅用于视觉区分和每个用户轻松应用权限。

### 我的问题

这些想法中的哪一个将扩展得最好并且最快？假设在实时环境中，有 10000 个用户和 1000 个权限，每个用户平均有 500 个权限。

或者这两个想法真的很糟糕，我是否忽略了一些可以使它更容易的基本 RDBMS 概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T23:43:03.603

我*不会*使用数组列来存储这些权限，尤其是如果您要为每个用户拥有 500 个权限。数组列不允许您对权限/组和权限/用户关系有任何外键约束

在 3 个选项中，我会选择最后一个选项；

用户 N:N 权限组 N:N 权限 用户 N:N 组

如果权限没有定期更新，您可以考虑使用“NESTED”或 MPTT 表来存储权限，这将允许在多个级别上设置权限，例如，用户对用户具有“全部”权限和/或让组继承权限来自其他群体。

您可能会发现有关 ACL 的解释很有趣： [http ://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)

# php - 检查用户是否投票

> ID：14464615
> 
> 赞同：0
> 
> 时间：2013-01-22T17:33:44.847
> 
> 标签：php, mysql, sql

我创建了一个投票系统，只有登录的用户可以投票。我有一个表，我在其中存储用户的外键并进行如下投票：

```
poll_voters
| ref_user_id | ref_poll_id | 
```

当用户投票时，我会检查用户 ID 是否存在于表中的当前投票中。如果是，则用户已经投票。

我想知道是否应该在每次页面加载时都执行此操作，以了解是否显示投票表格或结果（以防用户已经投票）。另一种方法是有一个会话来说明用户是否投票。当他登录时，我当然需要进行检查并设置会话。

你觉得我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:46:12.453

I would recommend that you render all the HTML without the vote indicator, and then after the page has loaded in the browser perform an AJAX call to get the vote status of items.

This allows you to cache the page on the browser or statically on the server, but still support dynamic updates. So that if the user visits the page again, and they have changed the vote status that it's updated.

Otherwise, you have to always re-render all the HTML pages differently for each user's session.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:37:15.483

当您渲染记录时，无论用户是否对投票进行了投票。如果投票，则不显示投票指示器，并且在插入数据库之前检查记录是否存在。根据我的经验，我认为这将是最好的办法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:16:33.540

您可以将其添加到插入语句

```
if not exists(select ref_user_id 
    from poll_voters 
    where ref_user_id =@ref_user_id and ref_poll_id = @ref_poll_id)
insert into poll_voters (ref_user_id ,ref_poll_id )
values (@ref_user_id ,@ref_poll_id ) 
```

这样如果每个人每次投票只能投票一次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T17:49:53.473

如果您有多个活动民意调查，那么您也应该在数据库中存储一个民意调查 ID（您可能不需要更多民意调查，但如果是的话会怎样？）。在这种情况下，我可以在每个页面加载时进行查询，向用户显示已投票或未投票的投票。但是只有最新的民意调查应该显示在每个页面上，并且只查询最新的民意调查......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:40:03.947

最好有一个会话，并在用户登录时检查投票状态。无需在每次页面加载时检查数据库，这将是低效的（尽管如果负载很轻，它仍然可以工作）。

当用户投票时，您还需要刷新页面（或元素，使用 ajax）。

# php - Youtube API 401 错误

> ID：14464619
> 
> 赞同：0
> 
> 时间：2013-01-22T17:33:51.723
> 
> 标签：php, youtube-api

我正在使用 Youtube API 来尝试一些事情，如果没有得到错误，我什么都做不了。预期的响应代码是`200`，得到`401: User authentication required`。

我已经验证了我的 Youtube 频道

```
session_start();

$clientLibraryPath = 'Youtube/library';
$oldPath = set_include_path(get_include_path() . PATH_SEPARATOR . $clientLibraryPath);

require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_YouTube');
$yt = new Zend_Gdata_YouTube();
Zend_Loader::loadClass('Zend_Gdata_AuthSub');

function getAuthSubRequestUrl()
{
$next = 'LINK';
$scope = 'http://gdata.youtube.com';
$secure = false;
$session = true;
return Zend_Gdata_AuthSub::getAuthSubTokenUri($next, $scope, $secure, $session);
}

function getAuthSubHttpClient()
{
if (!isset($_SESSION['sessionToken']) && !isset($_GET['token']) ){
    echo '<a href="' . getAuthSubRequestUrl() . '">Login!</a>';
    return;
} else if (!isset($_SESSION['sessionToken']) && isset($_GET['token'])) {
  $_SESSION['sessionToken'] =   Zend_Gdata_AuthSub::getAuthSubSessionToken($_GET['token']);

}

$httpClient = Zend_Gdata_AuthSub::getHttpClient($_SESSION['sessionToken']);
return $httpClient;
}
getAuthSubHttpClient();

$cID = "Client ID";
$aID = "App ID";
$dK = "DEV KEY"; // Hidden
$yt = new Zend_Gdata_YouTube($httpClient, $aID, $cID, $dK); 
```

有人知道我在这里做错了什么登录我的帐户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T06:54:43.253

确保您的代码托管在与您在`Google Code Console`

如果您`javascript origins`设置为`http://example.com`，请确保您的代码未托管在`http://example.com/something`或`http://something.example.com`！这似乎对我有用:)

# c++ - 未知大小的 Tilemap 数组

> ID：14464620
> 
> 赞同：0
> 
> 时间：2013-01-22T17:34:06.983
> 
> 标签：c++, multidimensional-array, visual-studio-2012, sfml

我希望用户在那里选择地图大小，所以我不知道运行时地图的大小。我一直在寻找如何实现这一点但收效甚微。最接近正在工作的东西是矢量变体，但在它运行时它仍然无法正常工作。

我想要一个 3 维数组，所以在我的标题中我声明了这样的 tilemap。

```
std::vector<std::vector<std::vector<Tile>>> tileMap; 
```

并像这样在课堂上测试它：

```
World::World(int width, int height, int depth)
{
tileMap.resize(width);
tileMap[0].resize(height);
tileMap[0][0].resize(depth);

tileMap.resize(width);

for (int i = 0;i<width;i++)
{
    tileMap[i].resize(height);
}

for (int y = 0; y < height;y++)
{
    for (int x = 0; x < width; x++)
    {
        tileMap[x,y].resize(depth);
    }
}

std::cout << sizeof tileMap / sizeof tileMap[0][0][0] << std::endl;

} 
```

我知道并非数组的所有维度都已正确调整大小，但最后一行仅输出“0”。

有没有更好的方法来创建我的未知大小的瓷砖地图？我需要很多尺寸，如 64*64、256*256、64*1024 等（z 水平将在生成水平后确定）。因此为每个大小创建一个数组似乎效率低下。但也许有更好的方法来声明我的数组，或者我在某处做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:36:36.530

你想得到`tileMap.size() * tileMap[0].size() * tileMap[0][0].size()`瓷砖的数量。

# active-directory - 与第 3 方 Web 应用程序的广告集成

> ID：14464622
> 
> 赞同：0
> 
> 时间：2013-01-22T17:34:18.010
> 
> 标签：active-directory, integration, authentication

我目前正在开发内部托管的第三方 Web 应用程序。（我们拥有 App Server 和 DB ）

我们需要将登录或用户身份验证集成到 AD。供应商可能会付出一定的代价来实现这一目标。我想知道是否有人可以让我朝着正确的方向前进，这可能是我应该与当地开发团队一起采取的步骤。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:48:18.613

我会说几乎没有机会。那个 webapp`mod_auth`在 Apache 中使用了吗？

# java - 字符串比较

> ID：14464630
> 
> 赞同：-8
> 
> 时间：2013-01-22T17:34:45.697
> 
> 标签：java, string

如果第二个字符串存在于第一个字符串中，我想比较两个字符串并返回 true。

```
 @Test
   public bool compareStrings{
        String text1="hello world";
        String text2="hello but some xyz world and xzy bla bla";
        /* I want to check if text2 contains text1 */
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:37:12.903

尝试这样的事情： -

```
text2.toLowerCase().contains(text1.toLowerCase()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:37:19.713

你想做：

```
if (text2.indexOf(text1) > -1)
{
  // text2 contains text1
} 
```

# android - 使用自定义 ListView 适配器不填充屏幕外的视图

> ID：14464632
> 
> 赞同：0
> 
> 时间：2013-01-22T17:34:49.367
> 
> 标签：android, listview, findviewbyid, listview-adapter

我在通过自定义适配器从数组填充的列表视图中使用不同的模板。我将项目添加到列表“项目”中，具体取决于列表视图中的位置，使用不同的模板。

我有两个相关的问题，因为我的方法没有返回正确的视图 ID：

如果我使用 adapter.notifyDataSetChanged(); textviews 中的文本未调整，可见屏幕之外的行也未设置/调整。我使用以下方法获取 View ID：

```
TextView getText() {

        if (title == null) {

            switch (templateId) {

            case ListViewAdapter.TPL_TITLE:

                title = (TextView) row.findViewById(R.id.titletitle);

                break;

            case ListViewAdapter.TPL_PAYMENT:

             title = (TextView) row.findViewById(R.id.titlepayment);

                break;

            }

        }

        return (title);

    } 
```

在我的活动中，我有不同的 ListItems（一个单独的类）：

```
items.add(new ListItem(id, title, description, amount, date, template)); 
```

我填写清单：

```
 adapter = new ListViewAdapter(this, items);

        mainMenu = (ListView) findViewById(R.id.listview);

        mainMenu.setAdapter(adapter); 
```

我有这个 getView 方法：

```
public View getView(int position, View convertView, ViewGroup parent) {

        templateId=getTemplateID(items.get(position).getType());

        View row = convertView;

        ListViewWrapper wrapper = null;

        if (row == null) {

            LayoutInflater inflater = activity.getLayoutInflater();

            row = inflater.inflate(R.layout.listviewtemplates, null);

            wrapper = new ListViewWrapper(row);

            row.setTag(wrapper);

        } else {

            wrapper = (ListViewWrapper) row.getTag();
        }

        wrapper.setTemplateId(templateId);

        wrapper.populateFrom(items.get(position));

        return (row);

    } 
```

在包装器中：

```
 public void populateFrom(ListItem r) {

            getText().setText(r.getTitle()); 

            if (templateId == ListViewAdapter.TPL_TITLE) {

            }

            if (templateId == ListViewAdapter.TPL_PAYMENT) {
                 getSubtext().setText(r.getDescription());
                 getAmount().setText(r.getAmount());
                 getDate().setText(r.getDate());
                         }            }

            setTemplate();

        } 
```

希望这是可读的，并且有人理解/认识到我的问题。我想真正的问题是，如何获得每行返回的正确 ViewID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:43:16.953

刚刚意识到 if (title == null) {...} 不起作用，删除它解决了问题

# jackrabbit - 使用 strem 在 Jackrabbit 存储库中写入大文件

> ID：14464633
> 
> 赞同：0
> 
> 时间：2013-01-22T17:34:50.990
> 
> 标签：jackrabbit

我需要在 Jackrabbit 存储库中编写大文件。为了避免内存问题，我想以小字节数组的形式从客户端发送数据，并且 stateful-bean 会将它们以某种流的形式写入存储库。

PS对不起英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:42:19.070

在 JCR 2.0 中，您可以通过

```
Node.setProperty(java.lang.String name,Binary value) 
```

方法，并且 Binary 有一个 getInputStream() 方法，您可以使用它来提供内容流。

这意味着如果存储库实现支持流式传输并且您正确设置了整个链，您应该能够直接从客户端流式传输到存储库。我假设 Apache Jackrabbit 在这种情况下确实支持流式传输，但您可能需要根据您使用的版本进行检查。

我认为 JCR 不支持将流附加到现有属性，因此如果您绝对需要跨多个请求从客户端发送数据，则需要在多个客户端请求之间保持长期 JCR 会话，并提供二进制文件从您从客户端获得的数据中以小块的形式流式传输。这看起来比直接流式传输更复杂，但也应该可以工作。

# javascript - 如何创建具有两种状态的按钮？

> ID：14464634
> 
> 赞同：-6
> 
> 时间：2013-01-22T17:34:53.163
> 
> 标签：javascript, html, forms, button

好吧，我需要创建一个具有两种状态的按钮（HTML、JavaScript 等）。

首先，当它被点击时，会开始倒计时，强制用户查看表单。然后，当倒计时结束时，同一个按钮将提交表单。我该怎么做？

该系统不会删除任何编辑，因此需要完美填写表格。我在 JavaScript 中尝试了这个函数：

```
<script language="JavaScript">
var contador = 10;

alert("Verifique os dados");
function conta() {

document.getElementById("btn").disabled=true;
if(contador==0) {
document.getElementById("btn").disabled=false;
return false;
}

contador = contador-1;
setTimeout("conta()", 1000);

document.getElementById("valor").innerHTML = contador;
} 
```

10

它倒计时，但我不能用这个做第二个状态

对不起，这是我第一次在这里尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:01:48.230

## [http://jsfiddle.net/z2J3B/2/](http://jsfiddle.net/z2J3B/2/)

将功能包含在您的脑海中

```
function test() {
    var submit = document.getElementById("submit");
    var message = document.getElementById("message");
    if (submit.className == "check") {
        submit.setAttribute("disabled");
        var inc = 10;
        message.innerHTML = "you have " + inc + " seconds left, check the form";
        var interval = setInterval(function () {
            inc--;
            message.innerHTML = "you have " + inc + " seconds left, check the form";
            if (inc <= 0) {
                clearInterval(interval);
                message.innerHTML = "you can now submit the form";
                submit.removeAttribute("class");
                submit.removeAttribute("disabled");
            }
        }, 1000);
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:37:33.487

HTML 按钮有一个“禁用”属性。将其与更改按钮上的文本（称为“值”）和一些计时器相结合。

不过要小心。这*会*惹恼您的用户。

# html - 在屏幕底部对齐导航栏 - Boostrap

> ID：14464636
> 
> 赞同：1
> 
> 时间：2013-01-22T17:34:56.400
> 
> 标签：html, css, twitter-bootstrap, navbar

我想在屏幕底部（浏览器区域）对齐页脚（引导导航栏），而不使用固定导航栏。如果内容高度小于屏幕高度，则在底部显示“导航栏”，否则正常使用滚动条。

我尝试使用 navabr-fixed-bottom，但它总是显示导航栏，即使内容高度更大。

```
<!-- FOOTER -->
<div class="visible-desktop navbar navbar-fixed-bottom">
 ...
</div> 
```

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:53:16.243

不确定 Bootstrap 是否具有这种内置功能，这是一个简单的技巧，可能会有所帮助，但它要求您确实具有固定的导航栏高度。

[如何将页脚保留在页面底部](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

# ios - 在现有 ARC 项目中实施 OCUnit 的问题

> ID：14464637
> 
> 赞同：0
> 
> 时间：2013-01-22T17:34:58.307
> 
> 标签：ios, objective-c, xcode, automatic-ref-counting, ocunit

我正在考虑将单元测试添加到我现有的应用程序中，主要是为了自学它是如何工作的。我已经到了一切都与依赖关系连接起来的阶段，我可以运行一些小检查，例如：

```
STAssertEquals(1, 2, @"This is a fail!"); 
```

结果似乎是正确的。不幸的是，如果我导入我的任何脚本，我会在任何`@property`使用关键字的行上出现编译器错误，例如`unsafe_unretained`or `strong`：

> 在“unsafe_unretained”之前需要一个属性属性

我想知道，这与ARC有关吗？OCUnit 不符合 ARC 标准吗？我需要更改我的编译器设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:48:32.533

**短篇故事**

OP 在目标设置中设置了错误的编译器

**更长**的故事（对于“在......之前预期属性属性”错误的谷歌用户）

目前唯一支持 ARC 的编译器是 Apple LLVM 编译器。我相信 Apple 将 LLVM GCC 视为已弃用，并将其与 Xcode 捆绑在一起只是出于兼容性原因。所有新功能都将添加到 LLVM 编译器中。

编译器设置可以在文件 -> 项目设置...，“构建设置选项卡”中设置。该选项的名称是“Compiler for C/C++/Objective-C”。

# java - 使用标准分析器清理 Lucene 搜索词

> ID：14464638
> 
> 赞同：1
> 
> 时间：2013-01-22T17:35:00.040
> 
> 标签：java, lucene, compass-lucene

我们正在从搜索词字符串中构建一个布尔查询来搜索我们的 Lucene 索引。我希望使用标准分析器来分析这些字符串，标准分析器是我们用于索引的分析器。例如，`foo-bar 1-2-3`应该分解为`foo`, `bar`，`1-2-3`因为 Lucene 文档指出连字符会导致数字保持在一起，但单词会被标记化。做这个的最好方式是什么？

目前我正在通过 QueryParser 运行我的搜索词字符串。

```
QueryParser parser = new QueryParser("", new StandardAnalyzer()); 
Query query = parser.parse(aSearchTermString); 
```

这样做的问题是插入了引号。例如，`foo-bar 1-2-3`变成`"foo bar"`, `1-2-3`，它不会返回任何东西，因为 Lucene 会被标记`foo-bar`为`foo`and `bar`。

我绝对不想通过删除引号来破解这种情况，`replace`因为我觉得我可能遗漏了一些东西或做错了一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:23:59.910

我实际上得到了不同的结果`StandardAnalyzer`。考虑这段代码（使用 Lucene v4）：

```
public class Tokens {

    private static void printTokens(String string, Analyzer analyzer) throws IOException {
        System.out.println("Using " + analyzer.getClass().getName());
        TokenStream ts = analyzer.tokenStream("default", new StringReader(string));
        OffsetAttribute offsetAttribute = ts.addAttribute(OffsetAttribute.class);
        CharTermAttribute charTermAttribute = ts.addAttribute(CharTermAttribute.class);

        while(ts.incrementToken()) {
            int startOffset = offsetAttribute.startOffset();
            int endOffset = offsetAttribute.endOffset();
            String term = charTermAttribute.toString();
            System.out.println(term + " (" + startOffset + " " + endOffset + ")");
        }
        System.out.println();
    }

    public static void main(String[] args) throws IOException {
        printTokens("foo-bar 1-2-3", new StandardAnalyzer(Version.LUCENE_40));
        printTokens("foo-bar 1-2-3", new ClassicAnalyzer(Version.LUCENE_40));

        QueryParser standardQP = new QueryParser(Version.LUCENE_40, "", new StandardAnalyzer(Version.LUCENE_40));
        BooleanQuery q1 = (BooleanQuery) standardQP.parse("someField:(foo\\-bar\\ 1\\-2\\-3)");
        System.out.println(q1.toString() + "     # of clauses:" + q1.getClauses().length);
    }
} 
```

上图：

```
Using org.apache.lucene.analysis.standard.StandardAnalyzer
foo (0 3)
bar (4 7)
1 (8 9)
2 (10 11)
3 (12 13)

Using org.apache.lucene.analysis.standard.ClassicAnalyzer
foo (0 3)
bar (4 7)
1-2-3 (8 13)

someField:foo someField:bar someField:1 someField:2 someField:3     # of clauses:5 
```

因此，上面的代码证明`StandardAnalyzer`，与 example 不同`ClassicAnalyzer`，应该拆分`1-2-3`为不同的令牌 - 完全按照您的意愿。对于查询，你需要对每个关键字进行转义，包括空格，否则 QP 认为这有不同的含义。

如果您不想转义查询字符串，您始终可以手动标记它（如`printTokens`上面的方法），然后用 a 包装每个标记`TermQuery`并将所有 TermQueries 堆叠到 a`BooleanQuery`中。

# java - 在 Java 中创建画廊 - Netbeans

> ID：14464639
> 
> 赞同：0
> 
> 时间：2013-01-22T17:35:10.537
> 
> 标签：java, netbeans, directory, image-gallery

我对Java不太了解（我知道基础知识）。我想用 Netbeans 创建一个图片库，但我完全不知道如何做到这一点。

我想做的事：

用户应该看到指定文件夹中的所有图像（如拇指），并且应该能够在单击照片时以“原始大小”查看它。此外（通过按钮）他应该能够将图像文件“传输”到该文件夹​​。

所以基本上我有一个杂项数据库。文章，每篇文章在文件系统上的一个唯一文件夹中都有一些图像（例如/images/art_01），我想显示这个文件夹中的所有图像，并有可能在这个文件夹中添加（说话，复制）新图像（那里不需要删除一个Image)排列，所以看起来不会太恶心;)。

由于我刚刚了解 Java 的基础知识，如果有人可以帮助我，我将不胜感激，我可以直接适应 JFrame - 如果可能的话。

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:58:00.623

使用 netbeans 真的很简单，netbeans 有一个 JFrame/JPanel 拖放设计器/gui 构建器（右键单击包 -> 新建 -> JFrame 表单）。自定义 GUI 后，您可以让主类扩展自定义框架，或向 JFrame 添加新的自定义面板，具体取决于您选择制作 JFrame 还是 JPanel。

[http://netbeans.org/kb/docs/java/quickstart-gui.html](http://netbeans.org/kb/docs/java/quickstart-gui.html)一些关于如何使用netbeans gui builder的细节。

使用此构建器，您还可以将事件添加到不同的组件。如果要查看目录，请使用 JFileChooser。

# frameworks - 锂转发请求

> ID：14464643
> 
> 赞同：2
> 
> 时间：2013-01-22T17:35:31.343
> 
> 标签：frameworks, request, forward, lithium

Lithium 中的控制器 redirect() 方法执行实际的 HTTP 重定向。但是有没有一种方法可以简单地将请求转发到另一个控制器/操作而无需 HTTP 重定向？

例如，假设我想添加一个身份验证层，而不是将用户重定向到“/auth/login”页面，而是呈现登录布局和模板，而不是他们请求的页面的内容。然后，当他们提交表单并进行身份验证时，他们已经在他们请求的页面上。Zend 框架有类似的 _forward() 方法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:38:36.120

没有方法，主要是因为您可以在大约两行代码中完成：

```
<?php

    namespace my_app\controllers;

    use lithium\core\Libraries;

    class PostsController extends \lithium\action\Controller {

        public function index() {
            $forward = Libraries::instance("controllers", "Auth", [
                'request' => $this->request
            ]);
            return $forward($this->request, ['action' => 'login']);
        }
    }
?> 
```

# java - 如何将 admob 不放在屏幕顶部（在 marmalade sdk 的 java 类中）

> ID：14464646
> 
> 赞同：1
> 
> 时间：2013-01-22T17:35:50.253
> 
> 标签：java, android, admob, marmalade

我有课：

```
class AdmobAds
{
   private static final int ADVIEW_NOT_INITIALIZED = 1;
   private AdView adView;

   public int InitAds(final String pub_id)
   {
    LoaderActivity.m_Activity.runOnUiThread(new Runnable() {
@Override
public void run() {

adView = new AdView(LoaderActivity.m_Activity, AdSize.BANNER, pub_id);
adView.loadAd(new AdRequest());
LoaderActivity.m_Activity.addContentView(adView, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
}
});
       return 0;
   }
   public int ShowAds()
   {
if(adView!=null){
LoaderActivity.m_Activity.runOnUiThread(new Runnable() {
@Override
public void run() {
adView.setVisibility(View.VISIBLE);
}});
} else { 
return ADVIEW_NOT_INITIALIZED; 
}

       return 0;
   }
   public int HideAds()
   {
if(adView!=null){
LoaderActivity.m_Activity.runOnUiThread(new Runnable() {
@Override
public void run() {
adView.setVisibility(View.INVISIBLE);
}});
} else { 
return ADVIEW_NOT_INITIALIZED; 
}
       return 0;
   }
} 
```

我需要将 AdMob 横幅放置在已确定的位置 ix 和 iy 中。当我尝试添加 Layout 时，我们在其中放置了一个横幅应用程序。

应用写在Marmalade SDK上，所以用不上XML，一点经验也不能让我自己处理问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:34:12.730

这是我用于在顶部显示广告的内容：-

```
adView = new AdView(LoaderActivity.m_Activity,AdSize.BANNER, appKeyFinal);      
RelativeLayout layout = new RelativeLayout(LoaderActivity.m_Activity);
RelativeLayout.LayoutParams parentParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);

RelativeLayout.LayoutParams adNinjaLayoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
adNinjaLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
LoaderActivity.m_Activity.addContentView(layout,parentParams);
adView.loadAd(adRequest); 
```

我希望这会有所帮助。

# php - php 将日期函数与星期返回 0？

> ID：14464658
> 
> 赞同：0
> 
> 时间：2013-01-22T17:36:19.960
> 
> 标签：php, date

我在我正在使用的函数中遇到了这个条件：

```
<?php
$thisweek = date('W');
if ($thisweek == 0) {
  // ...
} 
```

我没有写这个条件，当我去查找日期范围（'W'）[http://us3.php.net/manual/en/function.date.php](http://us3.php.net/manual/en/function.date.php)它给出了一个例子但没有范围如 00-52 或 01-52。

我的问题是 date('W') 是否会在满足此条件时返回零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:38:29.537

不，它开始于`01`并结束于`52`。[看我的测试。](http://codepad.viper-7.com/HopcIP)：

```
echo date('W', strtotime('2013-01-01')) . PHP_EOL;
echo date('W', strtotime('2012-12-30')) . PHP_EOL; 
```

**输出**

```
 01 
 52 
```

只是[不要假设](http://codepad.viper-7.com/IKPWtK)1 月 1 日是一周`01`或 12 月 31 日是一周`52`：

```
echo date('W', strtotime('2012-12-31')) . PHP_EOL; 
```

**输出**

```
 01 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:49:35.353

PHP`date('W')`函数永远不会¹返回 0。

在 PHP 的源代码 ext/date/php_date.c 中查找它。

在第 950-1000 行稍微格式化：

```
timelib_sll isoweek, isoyear;
int weekYearSet = 0;
...
/* week */
case 'W':
    if(!weekYearSet) {
        timelib_isoweek_from_date(t->y, t->m, t->d, &isoweek, &isoyear);
        weekYearSet = 1;
    }
    length = slprintf(buffer, 32, "%02d", (int) isoweek); break; /* iso weeknr */ 
```

什么是 timelib_isoweek_from_date？嗯...查看 ext/date/lib/dow.c 中的逻辑，从第 82 行可以得出结论，周数从 1 到 53 不等：

```
/* Find if Y M D falls in YearNumber Y-1, WeekNumber 52 or 53 */
...
/* 8\. Find if Y M D falls in YearNumber Y+1, WeekNumber 1 */
...
/* 9\. Find if Y M D falls in YearNumber Y, WeekNumber 1 through 53 */ 
```

如果您不相信我，请自己查看代码：

*   [http://git.php.net/?p=php-src.git;a=blob;f=ext/date/php_date.c](http://git.php.net/?p=php-src.git;a=blob;f=ext/date/php_date.c)
*   [http://git.php.net/?p=php-src.git;a=blob;f=ext/date/lib/dow.c](http://git.php.net/?p=php-src.git;a=blob;f=ext/date/lib/dow.c)

    * * *

¹）“从不”的意思是“只要 PHP 中没有错误”。

# django - 正确聚合模型对象和简单的视图计算

> ID：14464659
> 
> 赞同：0
> 
> 时间：2013-01-22T17:36:31.977
> 
> 标签：django, django-views

如果“allotted_pto”（带薪休假）是 UserProfile 模型中的整数字段（表示天数）：

```
class UserProfile(models.Model):  
    user = models.ForeignKey(User, unique=True)
    fullname = models.CharField(max_length=64, unique=False)
    company = models.CharField(max_length=50, choices=CLIENT_CHOICES)
    ...
    allotted_pto = models.IntegerField(max_length=2, blank=True, null=True)
    ...

    User.profile = property(lambda u: UserProfile.objects.get_or_create(user=u)[0]) 
```

并且 "total_days" 从休假请求模型中返回一个整数：

```
class LeaveRequest(models.Model):
    employee = models.ForeignKey(UserProfile)
    supervisor = models.ForeignKey(UserProfile, related_name='+', blank=False, null=False)
    ...
    total_days = models.IntegerField(max_length=2, blank=True, null=True)

    def __unicode__ (self):
            return u'%s %s' % (self.employee, self.submit_date)

    def save(self, *args, **kwargs):
            fromdate = self.start_date
            todate = self.return_date
            daygenerator = (fromdate + timedelta(x + 1) for x in xrange((todate - fromdate).days))
            self.total_days = sum(1 for day in daygenerator if day.weekday() < 5)
            super(LeaveRequest, self).save(*args, **kwargs)
            ... 
```

如何构建一个视图，从过滤记录集中给我“total_days”的总和，并从用户配置文件中的“allotted_pto”中减去该总和？我写的简单视图（见下文）产生“total_days”对象的数量（以字典形式）而不是计算实际天数，并且“allotted_pto”的请求显然构造不正确，因为它根本没有返回任何东西......

```
#views.py 

def leave_screen(request, id):
    profile = UserProfile.objects.get(user=id)
    records = LeaveRequest.objects.filter(employee=id)
    agg_pto = LeaveRequest.objects.aggregate(Count('total_days'))
    if profile.allotted_pto: #if the allotted_pto field in UserProfile is not empty
            allotted_pto = profile.allotted_pto
            remaining_pto = allotted_pto - agg_pto
    else:
            remaining_pto = "na"
    return render_to_response("vacation/leave_request.html", {'records': records, 'agg_pto': agg_pto, 'remaining_pto': remaining_pto}) 
```

* * *

好的，计算出来了：

```
def leave_screen(request, id):
    ...
    agg_pto = LeaveRequest.objects.filter(employee=id).aggregate(Sum('total_days'))
    agg_pto = agg_pto['total_days__sum'] 
```

只需要弄清楚如何从用户配置文件模型中提取 allotted_pto 整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:13:55.220

好的，所以这并不像我想象的那么难。第一个挑战是获得对象的总和。我的第一次尝试很接近，但我应该只使用“Sum”而不是“Count”：

```
agg_pto = LeaveRequest.objects.filter(employee=id).aggregate(Sum('total_days')) 
```

然后我只是使用python方法从字典中提取值：

```
agg_pto = agg_pto['total_days__sum'] 
```

最后：

```
def leave_screen(request, id):
    user = request.user.id
    profile = request.user.get_profile()
    records = LeaveRequest.objects.filter(employee=id).order_by('-submit_date')
    agg_pto = LeaveRequest.objects.filter(employee=id).aggregate(Sum('total_days'))
    agg_pto = agg_pto['total_days__sum']
    allotted_pto = profile.allotted_pto
    if allotted_pto: #if the allotted_pto field in UserProfile is not empty
            remaining_pto = allotted_pto - agg_pto
    else:
            remaining_pto = "na"
    supervised_records = LeaveRequest.objects.filter(supervisor=id).order_by('-submit_date')
    return render_to_response("vacation/leave_request.html", {'records': records, 'supervised_records': supervised_records, 'agg_pto': agg_pto, 'allotted_pto': allotted_pto, 'remaining_pto': remaining_pto, 'profile': profile }) 
```

我不知道为什么我很难弄清楚从 UserProfile 中提取对象的语法。但我确实知道 django-debug-toolbar 非常有帮助。

# multithreading - 互斥锁是否告诉处理器不要中断线程？

> ID：14464663
> 
> 赞同：0
> 
> 时间：2013-01-22T17:36:38.943
> 
> 标签：multithreading, mutex

我在使用互斥锁时正在考虑这个问题。

例如，如果您使用互斥锁锁定线程

```
m.lock();
a += b;
m.unlock(); 
```

当两个线程碰撞时会发生什么？是不是这样：

1）通过锁定线程A告诉CPU这必须不间断地执行直到解锁并且当a += b语句发生时上下文切换永远不会发生。

2) 线程 A 锁定，在执行 a += b 语句上下文切换时，线程 B 看到它被锁定，放弃控制，一切都回到 A 完成 a += b；操作和解锁访问？

如果毕竟是情况 2，有没有办法告诉 CPU 代码的某些部分永远不会被上下文切换中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:17:43.403

它是 2，并且没有直接的方法可以说代码必须在没有上下文切换的情况下运行完成。您可能可以通过提高线程的执行优先级来接近，但这种恶作剧通常会被不赞成并暗示设计不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:36:34.873

两种类型的互斥体都存在，但第一种仅用于特权程序（O/S 内核、硬件驱动程序）。只有第二种用户，否则用户程序可能会挂起整个系统。

# css - CSS Pie 在 IE8 中使页面加载非常缓慢

> ID：14464665
> 
> 赞同：1
> 
> 时间：2013-01-22T17:36:45.137
> 
> 标签：css, css3pie

我正在使用 pie.htc 允许我在旧版本的 IE 中的网站上设置圆角和阴影。

问题是它似乎让 IE 运行得非常非常慢。

这是我的代码示例...任何人都可以看到我如何改进它？

```
div.myDiv {
    -webkit-border-radius: 5px;    
    -moz-border-radius: 5px;    
    border-radius: 5px; 
    -webkit-box-shadow: 1px 1px 1px 0px rgba(0, 0, 0, 0.4);
    box-shadow: 1px 1px 1px 0px rgba(0, 0, 0, 0.4);
    behavior: url(/PIE.htc);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:00:57.070

我在项目中经常使用 CSS3Pie，因为我*被迫*让网站*看起来完全一样*，这对于技术人员来说当然是胡说八道，但不是销售人员。

实际上，使用任何类型的`.htc`文件都很慢，因为 pie 需要解析这些规则并创建相应的 VML-Elements 来模拟相应的 css3-behaviour。如果您有更大的项目，您将别无选择：

*   完全忽略 IE8 的 CSS3 功能（并说服你的销售人员）<-我最喜欢的选项
*   尽可能省略饼图并使用 IE 过滤器
*   使用支持较少但处理速度更快的更轻量级的框架，因为 PIE（因为它具有如此出色的支持）非常臃肿，因此相当慢

使用 Razor 建议的位置并不能真正解决速度问题，并且前缀 with`-ms`可能会给您在 IE9 中尝试同时使用 css3pie 和前缀 css3-property 带来严重麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:49:45.033

试试这个改变

```
div.myDiv 
{
  border-radius: 5px; 
  -ms-border-radius: 5px;
  -webkit-border-radius: 5px;    
  -moz-border-radius: 5px;    
  box-shadow: 1px 1px 1px 0px rgba(0, 0, 0, 0.4);
  -ms-box-shadow: 1px 1px 1px 0px rgba(0, 0, 0, 0.4);      
  -webkit-box-shadow: 1px 1px 1px 0px rgba(0, 0, 0, 0.4);
  -moz-box-shadow: 1px 1px 1px 0px rgba(0, 0, 0, 0.4);
  behavior: url(/PIE.htc);
  position:relative;
} 
```

PIE.htc 文件在准备好时与 DOM 一起异步加载。设置`position:relative`罐头肯定会给您带来优势。i 代码片段中的前缀`-ms-`有助于检测 IE。它对我有用。我使用了最新的 PIE.htc 文件。

# javascript - 乘法导致不寻常的小数位

> ID：14464669
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:37:08.310
> 
> 标签：javascript, jquery

> **可能的重复：**
> [JavaScript 的浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

在 javascript 中进行乘法运算时，我遇到了一个奇怪的数学问题。

```
$(parent).find('#id_deals-' + i + '-quantity').val() 
```

结果 -> 10

```
$(parent).find('#id_deals-' + i + '-price').val() 
```

结果 -> 3.99

上面两个都像这样相乘：

```
$(parent).find('#id_deals-' + i + '-price').val() * $(parent).find('#id_deals-' + i + '-quantity').val() 
```

结果 --> 39.900000000000006

为什么会这样？我该怎么做才能将小数位限制为 2 位数字？

是不是因为 10 必须是 10.0 ？但是如何在实际乘法之前自动将我的值转换为这种格式？

更新：根据 syazdani 的回答，我已尝试按照建议实施 bigdecimal：

它没有很好的记录，但我让它像这样工作：

```
function run(opts) {
    var bd = {"BigDecimal":BigDecimal, "BigInteger":BigInteger, "RoundingMode":RoundingMode};
    var result;
    var ops = {'*': "multiply", '/': "divide", '+': "add", '-': "subtract"};
    var a = new bd.BigDecimal("" + opts.a);
    var b = new bd.BigDecimal("" + opts.b);
    var op = ops[opts.op];
    if (op == "divide") {
        return a.divide(b, 300, bd.RoundingMode.HALF_UP());
    } else {
        return a[op].call(a, b);
    }
}

function multiply(a, b){
    return run({"a":a,"b":b,"op":"*"}); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:44:59.570

如果您正在使用货币（因为您似乎获得了“价格”ID），那么使用所谓的大数字库（例如这个：[https ://github.com/iriscouch/）可能会更好地为您服务bigdecimal.js](https://github.com/iriscouch/bigdecimal.js)）让您的数学控制数学（向上舍入与向下舍入等）。需要做更多的工作才能使所有事情都正确，但避免 Office Space 数学场景是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:39:00.990

所有 javascript 数字都是[IEEE-754 双精度浮点数](http://en.wikipedia.org/wiki/IEEE_floating_point)。这意味着它们会遭受舍入误差和不精确性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:39:27.227

javascript 中的所有数字都是浮点数，基于[IEEE754](http://en.wikipedia.org/wiki/IEEE_floating_point)。

如果要将一个格式化为点后具有固定位数的字符串，请使用

```
var formattedNumber = v.toFixed(2); // this makes a string 
```

# ios - ObjectiveC 中的各种布尔值

> ID：14464671
> 
> 赞同：3
> 
> 时间：2013-01-22T17:37:15.840
> 
> 标签：ios, objective-c

> **可能重复：**
> [我应该为 iOS 布尔状态使用什么值？](https://stackoverflow.com/questions/14138566/what-values-should-i-use-for-ios-boolean-states)

我相信 iOS 环境中有 5 种布尔类型（来自 C、C++ 和 Objective C）。

*   _布尔
*   布尔
*   布尔值
*   boolean_t
*   布尔值

它们至少有四对值：

*   真假
*   真假
*   是的，没有
*   1, 0

您认为哪一个最适合用于 iOS Objective C 开发？

**更新 1**

我提到了一种“布尔”类型。它似乎不存在。我将其从列表中删除并添加了 _Bool。

我知道这些类型和值的 typedef。问题是关于风格差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:02:49.790

iOS 和 OS X 主要由 Cocoa 组成，它使用`BOOL`带有值`YES`/的布尔类型`NO`。

**`bool`**

*   由 C++ 定义。
*   一个真正的布尔值，保证为 0 或 1。

**`_Bool`**

*   由 C99 定义。
*   一个真正的布尔值，保证为 0 或 1。
*   如果包含 stdbool.h，则 bool 被 #定义为 _Bool。

**`BOOL`**

*   由 Objective-C 运行时在`/usr/include/objc/objc.h`.
*   A `signed char`32 位。值可以是`YES`(0x01)、`NO`(0x00) 或 -127 到 128 范围内的任何值。 `YES`/`NO`定义在`<Foundation/NSObjCRuntime.h>`.
*   A `bool`64 位，保证为 0 或 1。

**`Boolean`**

*   [由CFBase.h](http://www.opensource.apple.com/source/CF/CF-744/CFBase.h)中的 Carbon 定义。
*   一个无符号字符。
*   值可以是`TRUE`(0x01)、`FALSE`(0x00) 或 -127 到 128 范围内的任何值。

**`boolean_t`**

*   被定义为`/usr/include/mach/i386/boolean.h`
*   x32 中的 int 或 x64 中的 unsigned int。

对于非真正的布尔类型：

*   任何非零值在逻辑表达式中都被视为真。
*   如果您转换为范围小于转换类型的布尔类型，则仅使用较低的字节。

* * *

很难想象一种或另一种产生影响的情况。在某些情况下，转换为 BOOL 可能会咬到你，还有一些罕见的情况（例如：KVO 将 BOOL 转换为 NSNumber，将 bool 转换为 CFBoolean）。如果有的话，当您始终使用 BOOL 时，您可以在 Apple 更改其定义的情况下得到保障。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T17:40:13.903

在 Objective-C 代码中使用`BOOL`和`YES`/ 。`NO`这在 Objective-C 代码以及 Objective-C 标头如何定义数据类型中是预期的。（请注意，您可能偶尔会处理其他类型/值，例如在检查指针的“真实性”或处理例如 C++ 代码时，但 Objective-C 通常使用`BOOL`和`YES`/`NO`来表示布尔数据类型和值。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T17:40:47.793

它基本上是**完全无动于衷的。**在实践中，我敢打赌它们甚至以相同的方式声明：`typedef signed char BOOL;`, `typedef signed char Boolean;`, 等等。

因此它们实际上是兼容和等效的；然而，最好的方法是尊重期望和返回的类型方法，所以写

```
[object someObjectiveCMethod:YES]; 
```

代替

```
[object someObjectiveCMethod:TRUE]; 
```

和

```
CFWhateverSetBooleanProperty(true); 
```

代替

```
CFWhateverSetBooleanProperty(YES); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T17:42:47.087

对 ObjC 代码使用 ObjC 的 BOOL。在他们“本地”的地方使用其他人。在阅读代码时，其他任何东西都会显得“不寻常”并且值得特别注意，这是一个应该为实际上不寻常且值得特别注意的代码保留的*属性*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:38:40.970

**带有 YES 和 NO 的 BOOL。**

但是 BOOL 是有符号字符，所以 YES 等于 1，NO 等于 0。

* * *

`objc.h`它们被定义为：

```
typedef signed char BOOL; 
```

和

```
#define YES ((BOOL)1)
#define NO  ((BOOL)0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T17:41:09.690

如果不是因为阅读代码的人可能不知道这种类型，您可以使用每一个。因此，为了约定， use `BOOL`which 的值可能为`YES`(1) 或`NO`.

# javascript - JQuery 日历突出显示当前周并阻止 3 周

> ID：14464673
> 
> 赞同：0
> 
> 时间：2013-01-22T17:37:23.503
> 
> 标签：javascript, jquery, calendar

我在我的一个应用程序中使用 jquery 日历，我需要做的是，一旦我选择了周一至周五之间的日期，那么整个周一至周五的日子都应该得到突出显示，而且考虑到仅从周一至周五的 3 周会变灰.

我厌倦了从已经发布的查询中获得一些好的输入，但没有一个有用。我从发布[Jquery 日历 2 方式块日期](https://stackoverflow.com/questions/6534099/jquery-calender-2-way-block-date)中获得了帮助，但很难实现。

我需要一些代码片段来了解如何在日历日内进行验证。

谢谢

# ruby-on-rails - RoR 打印机可能出现的问题

> ID：14464676
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:37:34.107
> 
> 标签：ruby-on-rails, ruby

我即将开始使用 Ruby on Rails 开发一个应用程序，它需要打印东西，主要是票据。

我猜我使用的打印机不会有太大影响。

所以问题是，印刷时我应该考虑哪些不同的事情？我在想一个普通的 ruby​​ 程序应该与打印机通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:49:02.543

这里最便携的解决方案是让 Rails 应用程序发出 PDF，然后将其交给浏览器进行渲染和打印，或者将其注入本地打印后台处理程序。

根据您的要求，有多种方法可以从 Ruby 中获取 PDF。最简单的方法是呈现 HTML 并使用库将其转换为 PDF，如[PDFKit](https://github.com/pdfkit/PDFKit)。一种具有更多控制权的方法是使用像[Prawn](http://prawn.majesticseacreature.com/)这样的库来绘制文档。

# coffeescript - EmberJS pre 2 用于传入 JS 事件对象进行操作

> ID：14464688
> 
> 赞同：0
> 
> 时间：2013-01-22T17:38:23.740
> 
> 标签：coffeescript, ember.js

```
# in the handlebars template    
{{action "do_something" target="view"}}

# in the view
APP.view = Ember.View.extend(
  do_something: (evt) ->
    console.log evt #this used to contain a javascript event object, it was useful at times :(
) 
```

我知道我可以在上下文中传递。但我想知道是否有办法获得实际事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:45:50.943

如果你想要一个事件对象，你需要创建一个自定义的`View`. 这是我在应用程序中使用的示例：

```
App.ProductsGridSortButtonView = Ember.View.extend({
  tagName: 'a',
  classNames: ['productsSortButton'],
  attributeBindings: ['data-sort','data-sort-type'],
  click: function(e){
    this.get('parentView').sortProducts(e);
  }
}); 
```

并在模板中：

```
{{#view App.ProductsGridSortButtonView data-sort="price" data-sort-type="number"}} 
```

# javascript - 每次 div 的一部分与另一个 div 的一部分重叠时触发一个事件

> ID：14464689
> 
> 赞同：0
> 
> 时间：2013-01-22T17:38:23.700
> 
> 标签：javascript, jquery, animation, html, eventtrigger

我有两个（但可能更多）`DIV`，动画通过`jQuery`; 所以现在他们在我的屏幕上运行，遵循伪随机路径。

每当一个事件的`DIV`一部分与另一个事件的一部分重叠时，我想触发一个事件。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:46:00.403

You could use something like this [http://sourceforge.net/projects/jquerycollision/](http://sourceforge.net/projects/jquerycollision/) and check for collisions after each animation step.

# javascript - 在单个通道中播放振荡

> ID：14464693
> 
> 赞同：4
> 
> 时间：2013-01-22T17:38:25.810
> 
> 标签：javascript, html, web-audio-api

我一直试图让振荡器声音只在一个通道中播放，但我无法让它工作。

我尝试使用一个`panner`节点来设置声音的位置，但它仍然在两个通道中播放，只是在更远的通道中没有那么响亮。

我最近尝试使用频道合并，但它仍然在两个频道中播放：

```
var audioContext = new webkitAudioContext();
var merger = audioContext.createChannelMerger();
merger.connect(audioContext.destination);

var osc = audioContext.createOscillator();
osc.frequency.value = 500;
osc.connect( merger, 0, 1 );
osc.start( audioContext.currentTime );
osc.stop( audioContext.currentTime + 2 ); 
```

如何创建仅在单个通道中播放的振荡器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:29:45.480

嗯，很奇怪 - 当 Merger 的输入未连接时，这似乎是一个错误。要解决此问题，只需将一个归零的增益节点连接到另一个输入，如下所示：

```
var audioContext = new webkitAudioContext();
var merger = audioContext.createChannelMerger(2);
merger.connect(audioContext.destination);

var osc = audioContext.createOscillator();
osc.frequency.value = 500;
osc.connect( merger, 0, 0 );

// workaround here:
var gain= audioContext.createGainNode();
gain.gain.value = 0.0;
osc.connect( gain );
gain.connect( merger, 0, 1 );
// end workaround

osc.start( audioContext.currentTime );
osc.stop( audioContext.currentTime + 2 ); 
```

# jquery - 选择下一个最接近的班级

> ID：14464696
> 
> 赞同：2
> 
> 时间：2013-01-22T17:38:34.513
> 
> 标签：jquery

我想制作一个简单的方法来在用户单击单选按钮时隐藏/显示内容。我不想一遍又一遍地使用 ID，而是想使用类制作一个更通用的选择器，这样我就可以在整个站点中重新应用它。

我想我没有在父 div (.radio-show) 之外找到 .next .radio-show-content？

```
$('.radio-show input:radio').click(function() {
        $(this).closest('div').next().find('.radio-show-content').fadeToggle(250).toggleClass('hide'); 
});

<div class="radio-show" > 
<label class="radio span1">
    <input type="radio" name="project" value="option1" checked>
    Yes
</label>
<label class="radio span1">
    <input type="radio" name="project" value="option2">
    No
</label>
</div>

<hr />
<div class="radio-show-content"><!-- yes -->
    Show this if Yes
</div>
<div class="radio-show-content hide"><!-- no-->
    Show this if No
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:44:40.750

`.next`正在获取`<hr>`. 真的，没有必要爬上 DOM 树。您可以使用：

```
$(".radio-show-content").fadeToggle(250).toggleClass('hide') 
```

*但是*，这可能无法满足您的需求，因为它没有选择特定的`.radio-show-content`. 您可以基于单选按钮索引进行链接（get with`.index`和 get the `-show-content`with `.eq`），或者只使用 CSS 过渡`.hide`并一致地切换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:46:25.003

我认为你应该尝试不`.find()`

```
$(this).closest('div').next('.radio-show-content').fadeToggle(250).toggleClass('hide'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:46:45.293

这个插件就是为此而写的。*免责声明：我写的*

[http://techfoobar.com/jquery-next-in-dom/](http://techfoobar.com/jquery-next-in-dom/)

```
$('.radio-show input:radio').click(function() {
    $(this).nextInDOM('.radio-show-content').fadeToggle(250).toggleClass('hide');
}); 
```

# google-chrome - 谷歌浏览器 - 锚标签的下载属性

> ID：14464698
> 
> 赞同：2
> 
> 时间：2013-01-22T17:38:40.313
> 
> 标签：google-chrome, google-chrome-extension, download, anchor

我有一个将一些文件保存到下载文件夹的扩展程序。下面的代码仅用于测试

```
//This lies in the background page of my extension
function fileTest(name) {
    var a = document.createElement('a');
    a.href = 'data:text/plain;base64,SGVsbG8gV29ybGQh'; //Hello World!
    a.download = name + '.txt';
    a.onclick = function (e) {console.log('[TEST] ' + name);return true;};
    a.click();
}
window.onload = function() {
    fileTest('test1');
    fileTest('test12');
    fileTest('test123');
} 
```

只有第一个文件“test1.txt”保存到磁盘，虽然控制台的输出显示有 3 次点击

> [测试] 测试1
> 
> [测试] test12
> 
> [测试] test123

这是浏览器的故意限制吗？还是代码有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:51:37.090

当我在常规浏览会话中运行[您的代码](http://jsfiddle.net/76LWD/)时，我会收到一条滑出通知（在窗口顶部），上面写着

> 该站点正在尝试下载多个文件。你想允许这个吗？

所以，是的，限制非用户启动的下载是浏览器的安全限制。您可能看不到通知，因为该操作正在由您的后台页面执行。

如您的代码的[此变体](http://jsfiddle.net/5h6uJ/3/)所示，限制似乎是每个用户操作一次下载：

```
window.onclick = function() {
    fileTest('test1');
} 
```

这将允许无限下载，但每次点击事件只能下载一次。

# java - 如何在Struts 2中调整Display Tag的[last/prev] [next/last]链接的位置

> ID：14464701
> 
> 赞同：3
> 
> 时间：2013-01-22T17:38:57.170
> 
> 标签：java, jsp, pagination, displaytag, banner

这是我的 Struts 代码。我想知道如何调整`[last/prev]` `[next/last]`显示标签中链接的位置

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<%@taglib uri="http://displaytag.sf.net" prefix="display" %>
<html>
`enter code here`
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Forbes Top 10 Richest Sports Stars 2009</title>
<link href="css/displaytag.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <h2>Forbes Top 10 Richest Sports Stars 2009</h2>
    <display:table export="true" id="data"
        name="sessionScope.HomeForm.richSportsmanList"
        requestURI="/homeAction.do" pagesize="3">
        <display:column property="place" title="Place" sortable="true" />
        <display:column property="name" title="Name" sortable="true" />
        <display:column property="age" title="Age" sortable="true" />
        <display:column property="annualIncome" title="Income(in m/yr)"
            sortable="true" />
    </display:table>
    <p>Note : List is according to Forbes List 2009</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:39:09.247

displaytag 允许通过`display.properties`文件修改其特性。您可以覆盖默认为`paging.banner.placement`要调整横幅位置的属性（其中 [first/prev] [next/last] 链接），您必须覆盖该属性`top``<display:setProperty name="paging.banner.placement" value="bottom" />`

```
paging.banner.full=<div class="pagelinks" align="right"><a href={1}>First</a><a href={2}>Prev</a>{0}<a href={3}>Next</a><a href={4}>Last</a></div> 
```

现在您必须通过更改类`pagelinks`或通过添加`style`属性来设置横幅的位置来修改 div 标签的样式。例如`position: absolute; top: 75px; left: 260px; width: 245px; background-color: azure;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T08:57:27.327

Roman 建议了您可以在属性文件中使用的方式。但有时属性文件解决方案不起作用 :: Here is the solution

```
<display:setProperty name="paging.banner.full" value='<span class="pagelinks"><a href="{1}" onclick="return false"></a> <a href="{2}"><span class="pagenation_LeftAro"/></a>  <a href="{3}"><span class="pagenation_RightAro"/></a><a href="{4}" onclick="return false"></a></span>' />

<display:setProperty name="paging.banner.first" value='<span class="pagelinks"><a href="{1}"  onclick="return false"></a> <a href="{2}" onclick="return false"></a> <a href="{3}"><span class="pagenation_RightAro"/></a><a href="{4}" onclick="return false"></a></span>' />

<display:setProperty name="paging.banner.last" value='<span class="pagelinks"><a href="{1}" onclick="return false"></a> <a href="{2}"><span class="pagenation_LeftAro"/></a> <a href="{3}" onclick="return false"></a><a href="{4}"  onclick="return false"></a></span>' />     

                                      <display:setProperty name="paging.banner.some_items_found" value='<span class="pagelinks"> {2}-{3} of {0}.</span>'/>
                                <display:setProperty name="paging.banner.all_items_found" value='<span class="pagelinks">1-{0} of {0}.</span>' /> 
```

通过这种方式，您可以使用定制的分页横幅..

# python - 无法让 grid_remove() 工作

> ID：14464708
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:39:12.677
> 
> 标签：python, tkinter

在我正在开发的应用程序中，我有一个类设置来处理我的所有 GUI。此类中的一个方法创建一个框架并从循环中填充一组单选按钮。该方法将在类外部多次调用以重绘该帧。我遇到的问题是，当重新绘制框架时，它实际上只是覆盖了现有框架（旧框架仍然存在）。因此，如果稍后调用中的选项较少，则较早的选项仍然可见。我曾尝试先在框架上执行 grid_remove，但无法使其正常工作。所以我的问题是，为什么 grid_remove() 在下面的 initMech() 方法中不起作用？

```
 #!/usr/bin/env python

   from Tkinter import *

   class MWindow(Frame):
       def __init__(self, parent) :
           Frame.__init__(self, parent)
           self.parent = parent
           self.initUI()

       def initUI(self):
           topframe = Frame(self.parent, bd=2, relief=GROOVE, padx=5, pady=5, width=300, height=50)
           topframe.grid(row=0, column=0)
           desc = Button(topframe, text="list1", command=lambda:set_list(1))
           desc.grid(row=0,column=1)
           desc2 = Button(topframe, text="list2", command=lambda:set_list(2))
           desc2.grid(row=0,column=2)

       def initMech(self):
           try:
               radio_frame.grid_remove()
           except:
               print "can't remove"
           radio_frame = Frame(self.parent, bd=2, relief=GROOVE, padx=5, pady=5, width=300, height=50)
           radio_frame.grid(row=1, column=0)
           variant=StringVar()
           c = 0
           for x in chas.v_list:
               Radiobutton(radio_frame, text=x,variable=variant, value=x, command=lambda x = x:chas.set_vari(x)).grid(row=0, column=c)
               c = c+1

       def onExit(self):
           self.parent.destroy()

   class Mech():
       def set_chass(self,chass):
           try:
               if self.chassis == chass:
                   pass
               else:
                   self.chassis = chass
                   del self.vari
           except AttributeError:
               self.chassis = chass

       def load_vari(self):
           if self.chassis == 1:
               self.v_list = ["a","b","c"]
           else:
               self.v_list = ["w", "x", "y", "z"]
           win.initMech()

       def set_vari(self, vari):
           self.vari = vari

   def set_list(num):
       chas.set_chass(num)
       chas.load_vari()

   root = Tk()
   win = MWindow(root)
   chas = Mech()
   root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:34:03.550

It is not working because you're using a local variable named `radio_frame`, and that variable isn't defined yet. Most likely, the error message you are ignoring is telling you exactly that. Why are you trying to remove a frame that you haven't yet created?

Also, are you aware that `grid_remove` only removes the widget from view, it doesn't destroy it? Thus, if you call this function several times you'll have several invisible versions of this frame, all using up memory.

# c++ - 创建资源并将其返回以由调用者释放的最佳接口

> ID：14464710
> 
> 赞同：1
> 
> 时间：2013-01-22T17:39:19.910
> 
> 标签：c++, raii

我有一个'd 并在函数中初始化的`char*`数组。`new`通常我会使用`std::string`但数组以可能不止一个为空终止，`'\0'`我想捕获完整大小。

事实上，调用者必须记住`delete[]`它`char *`何时使用此函数。我想清理接口，以便`delete[]`在超出范围时在析构函数中调用它，但我不确定要使用什么。是否有一个智能指针可以接受`char *`？

编辑：

我宁愿不使用`std::string`，因为不清楚这不是 C 风格的空终止字符串。我可以`boost::scoped_array<char>`为此使用 a 吗？由于`scoped_array`不可复制，我将如何从创建它的函数中返回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:45:25.593

This is what OO programming is all about. Use `std::string` like comment above, or create a class that handles the data for you:

```
class MyObj {
private:
   char *data;
   int len;

public:
   MyObj( const char *data, int len ) {
      this->data = new char[...
      // do what you need here
   }

   const char* getStr() const {
      return data;
   }

   int getLen() const {
      return len;
   }

   ~MyObj() {
      delete [] data;
   }
}; 
```

You'll probably also want to implement copy constructor and assignment operator (or privatize their use)...

Alternatively, use std::string as your base implementation but only expose what and how you want:

```
class MyObj : private std::string {
public:
   // whatever you want here
   const char* data() {
      return c_str();
   }

   int length() const {
      return std::string::length();
   }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:38:55.343

在 2011 年之前，您从函数返回动态数组的选择是`std::string`,`std::vector<char>`或`boost::shared_array<char>`. 通过现代实现，您还可以使用`std::unique_ptr<char[]>`.

我建议使用`std::string`来表示一个字符串。

# c - Arduino汇编程序：什么都没有发生

> ID：14464713
> 
> 赞同：3
> 
> 时间：2013-01-22T17:39:26.937
> 
> 标签：c, assembly, arduino, avr-gcc

嗨 StackOverflow 社区，

我正在尝试在 Assembler 中对我的旧 Arduino Duemilanove 板（Atmega 168V-10PU）进行编程。我之前尝试过几次，但每次都没有执行代码。所以我尝试用 C 编写一个等效的测试程序，并且它起作用了。这里是：

```
// file led.c
#include <avr/io.h>

int main(void)
{

    DDRB = 0xFF;
    PORTB = 0xFF;

    while (1) {
        asm("nop\n");
    }

    return 0;
} 
```

编译器的 asm 转储导致（缩短），

```
ldi r24,lo8(-1)  ;  tmp44,
out 0x4,r24  ;  MEM[(volatile uint8_t *)36B], tmp44
out 0x5,r24  ;  MEM[(volatile uint8_t *)37B], tmp44 
```

它可以工作并激活 Arduino 引脚 13（AVR 引脚 PB5）上的 LED。

但是当我使用这个 asm 文件时，

```
// file led.S
#include "avr/io.h"

.global main

main:
    ldi r24, 0xFF
    out DDRB, r24
    out PORTB, r24

 end:
    jmp end 
```

编译器转储导致（缩短），

```
ldi r24, 0xFF
out ((0x04) + 0x20), r24
out ((0x05) + 0x20), r24 
```

什么可以解释为什么什么也没发生。

另外这里是[C 版本](http://pastebin.com/5hdzbwxX)和[汇编器版本的 makefile](http://pastebin.com/4yur5FAc)

感谢您的帮助！

编辑：这里也是 [C 版本](http://pastebin.com/fns0MPnb)和[汇编器版本的完整汇编器转储文件](http://pastebin.com/jPG1Vc5K)

编辑 2：我在包含文件 iom168.h 中查找了寄存器地址，该文件引用了 iomx8.h，其中显示`#define PORTB _SFR_IO8 (0x05)`. 编译器遵循包含链

```
io.h -> iom168.h -> iomx8.h
io.h -> common.h -> sfr_defs.h 
```

在 sfr_defs.h 中写着：

```
#define _SFR_IO8(io_addr) ((io_addr) + __SFR_OFFSET) 
```

定义了偏移量向上的几行：

```
#ifndef __SFR_OFFSET
/* Define as 0 before including this file for compatibility with old asm
sources that don't subtract __SFR_OFFSET from symbolic I/O addresses.  */
#  if __AVR_ARCH__ >= 100
#    define __SFR_OFFSET 0x00
#  else
#    define __SFR_OFFSET 0x20
#  endif
#endif 
```

（抱歉格式化）知道这个错误来自哪里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:15:51.157

您应该使用辅助宏`_SFR_IO_ADDR()`并`_SFR_MEM_ADDR()`分别使用 i/o 和内存指令访问 SFR，因为它们在两个命名空间中具有不同的地址。默认值显然是内存映射的，但不要指望它。

因此，您的代码可能如下所示：

```
#include "avr/io.h"

.global main

main:
    ldi r24, 0xFF
    out _SFR_IO_ADDR(DDRB), r24
    out _SFR_IO_ADDR(PORTB), r24

 end:
    jmp end 
```

或者，您可以切换到内存映射访问：

```
#include "avr/io.h"

.global main

main:
    ldi r24, 0xFF
    sts _SFR_MEM_ADDR(DDRB), r24
    sts _SFR_MEM_ADDR(PORTB), r24

 end:
    jmp end 
```

# apache - Apache 2.2.3 和 Tomcat 6.0：JSESSIONID 在不同的会话上重复

> ID：14464717
> 
> 赞同：1
> 
> 时间：2013-01-22T17:39:31.947
> 
> 标签：apache, tomcat6, session-cookies, mod-proxy, jsessionid

我们正在运行以下内容：

*   在 Linux 操作系统上：Red Hat Enterprise Linux 5 - 64 位
*   Apache Tomcat/6.0.20 - 服务于 Java EE 网站
*   Apache/2.2.3 64 位 - 坐在 Tomcat 前面
*   在 Apache 上运行 mod_proxy 到服务器 Tomcat 网站**

随机出现的问题。通常，这不会发生。**当访问者查看网站（即使在不同的网络上）时，他们将获得相同的 JSESSIONID。**例子：

**64AAD378FCACF2D2526AA40EAB277073** - ROB (On network #1) **64AAD378FCACF2D2526AA40EAB277073** - NICK (On network #1) **64AAD378FCACF2D2526AA40EAB277073** - LAURA (On network #1) **64AAD378FCACF2D2526AA40EAB277073** - TIM (On network #2)

据我了解，JSESSIONID 是唯一标识，因此可以在服务器端跟踪访问者会话。每个新的浏览器会话应该有不同的 JSESSIONID 和会话。否则，您将遇到我们在显示其他用户的登录帐户信息时遇到的问题。就像线被越过，人们正在越过其他人的账户。

这是生产问题。最近唯一的变化是将 Apache 置于 Tomcat 之前。这是否以某种方式“缓存”了 Java 会话并将其分发给多个人？

如果用户关闭浏览器、退出当前会话或清除 cookie ......他们将获得一个新的唯一 JSESSIONID 和新会话。

已经搜索了 FAR 和广泛，但找不到是否有人遇到相同的问题或修复。

**请帮忙！**

# javascript - insertRow() 到特定的行 id

> ID：14464718
> 
> 赞同：0
> 
> 时间：2013-01-22T17:39:35.470
> 
> 标签：javascript, jquery, dom, dynamic, innerhtml

使用

```
var row = table.insertRow(id); 
```

如何指定新行位于使用的所选 ID 下，而不是硬编码索引或表末尾？我有一个下拉菜单，其中包含不同的选项，可以选择将新行放置在哪个行 ID 下。下拉选项具有与相关行匹配的 ID。谢谢。这是我的表，我希望新行转到用户选择的父亲（father3、father4 或father5）下

```
 <table id="shore_tab" border="1">
                      <tr class="row_blue_bold father" id="father3">
                        <td colspan="2" class="father_header">Category 3</td>
                        <td class="cell_50">&nbsp;</td>
                      </tr>
                            <tr class="row_blue_bold son3">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father3, category 3)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                            <tr class="row_blue_bold son3">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father3, category 3)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                      <tr class="row_blue_bold father" id="father4">
                        <td colspan="2" class="father_header">Category 4</td>
                        <td class="cell_50">&nbsp;</td>
                      </tr>
                            <tr class="row_blue_bold son4">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father4, category 4)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                            <tr class="row_blue_bold son4">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father4, category 4)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:49:07.043

您可以使用 id 来获取索引

```
var row = table.insertRow(document.getElementById(id).rowIndex+1);//+1 to be inserted under 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:43:56.453

`id`应该是`index`，即：`table.rows`就像一个数组（它实际上不是一个数组，但表现得像一个数组）。

# nginx - Nginx conf中的短路逻辑（想覆盖一个位置）

> ID：14464721
> 
> 赞同：3
> 
> 时间：2013-01-22T17:39:41.417
> 
> 标签：nginx

我已经安装了 mediawiki。除了我尝试为外部目录（webalizer web stats）起别名外，世界上一切都很好。我看到 Nginx 将请求传递`/usage/*`给 PHP/Mediawiki。我不想要那个。我真的希望 /usage/ 下的所有内容都指向我的别名，而不是别的。与 Mediawiki 代码和功能完全分离。

```
# in no way related to Mediawiki. I just want to serve this as static HTML.
location /usage {
    alias /var/www/webalizer/wiki.longnow.org/;
}

# This answers to anything, which may be my problem
location / {
    try_files $uri $uri/ @rewrite;
    index index.php;
}

# A special rewrite to play nicely with Mediawiki
location @rewrite {
    rewrite ^/(.*)$ /index.php?title=$1&$args;
}

# PHP, nom nom nom
location ~ \.php$ {
    include fastcgi_params;
    fastcgi_index index.php;
    fastcgi_pass unix:/tmp/php-fastcgi.socket;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
} 
```

我希望在其余部分之前列出 /usage 位置指令会使系统短路，但我被 Django 宠坏了；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:13:35.910

要阻止 Nginx 处理进一步的`location`指令，它应该以 . 为前缀`^~`。
我认为您仍然希望`try_files`在`location`.

```
location ^~ /usage {
    alias /var/www/webalizer/wiki.longnow.org/;
    try_files $uri $uri/ =404;    
} 
```

请参阅[http://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)以供参考。

# mysql - MySQL 查询视图的速度问题

> ID：14464722
> 
> 赞同：1
> 
> 时间：2013-01-22T17:39:44.987
> 
> 标签：mysql

我一直在各种解决方案中使用数据库，但从未真正设计过它们。因此，我对 SQL 的细节还很陌生。我有一个包含许多表的数据库，但有 2 个主要表： Item - 引用许多其他表以获取不会随修订而更改的数据和 Entry - 引用许多其他表以获取不会随修订而更改的数据 每个项目将因此具有1 个或多个修订版（包含所有相关数据）。

我想通过视图选择所有修订（以及项目）的所有数据。我构造了一个查询，如下所示：

```
CREATE VIEW Single_Query
AS
SELECT  i.REF_CODE AS REF
gp.GROUP_NAME AS Group
v.VERSION_NUMBER AS Version
GROUP_CONCAT(DISTINCT(cy.COUNTRY_DESCRIPTION) SEPARATOR ', ') AS Country
ey.PUB_DATE AS Published
GROUP_CONCAT(DISTINCT(ct.CONTRIBUTOR_NAME) SEPARATOR ', ') AS Author
i.ISBN_CODE AS ISBN
GROUP_CONCAT(DISTINCT CONCAT(cn.COMPONENT_NUMBER, _utf8', ',cn.COMPONENT_DESCRIPTION) SEPARATOR '; ') AS Contents
ey.NOTES AS Notes
i.PRICE AS Price
cl.COLOUR_DESCRIPTION AS Colour
FROM entry AS ey
JOIN item AS i ON ey.ITEM_ID = i.ITEM_ID
JOIN group AS gp ON i.GROUP_ID = gp.GROUP_ID
JOIN version AS v ON ey.VERSION_ID = v.VERSION_ID
JOIN link_country_item AS lci ON i.ITEM_ID = lci.ITEM_ID
JOIN country AS cy ON lci.COUNTRY_ID = cy.COUNTRY_ID
LEFT JOIN link_entry_contributor AS lec ON ey.ENTRY_ID = lec.ENTRY_ID
LEFT JOIN contributor AS ct ON lec.CONTRIBUTOR_ID = ct.CONTRIBUTOR_ID
JOIN contents AS cn ON i.ITEM_ID = cn.ITEM_ID
JOIN colour AS cl ON ey.COLOUR_ID = cl.COLOUR_ID
GROUP BY REF_CODE, VERSION_NUMBER 
```

这需要大约 29 秒才能完成，只有几个条目！但是，如果我运行一个脚本来为项目数据（以及所有引用的数据）和条目数据（以及所有引用的数据）创建临时表，然后从 2 个临时表中选择整个批次，并在 ITEM_ID 上使用单个 JOIN，然后不到半秒即可完成。

请注意，还有许多其他引用的表（为了清楚起见，我省略了它们）。

如果有帮助，项目表会引用组、设置（通过多对多 link_country_item 表）和目录表。

条目表引用版本、贡献者（通过多对多 link_entry_contributor 表）和颜色表。

问题是我真的不想一直使用临时表，因为我不能在视图中使用它们（或者至少我还没有找到如何使用它们）。有没有更优雅的方式在视图中拆分 SQL，以便在这种情况下运行得更快？

提前谢谢了

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:11:05.867

我稍微调整了查询​​顺序，并查看您对 REF_CODE 的评论。所以你是对的，原来的索引答案不适合你。但是，如果 item 表位于主要位置，那么 (REF_CODE, ITEM_ID) 上的索引应该有助于提高性能，因为您正在使用表开始，并且为您的 GROUP BY 子句提供相应的索引。

```
CREATE VIEW Single_Query
AS
SELECT STRAIGHT_JOIN
      i.REF_CODE AS REF
      gp.GROUP_NAME AS Group
      v.VERSION_NUMBER AS Version
      GROUP_CONCAT(DISTINCT(cy.COUNTRY_DESCRIPTION) SEPARATOR ', ') AS Country
      ey.PUB_DATE AS Published
      GROUP_CONCAT(DISTINCT(ct.CONTRIBUTOR_NAME) SEPARATOR ', ') AS Author
      i.ISBN_CODE AS ISBN
      GROUP_CONCAT(DISTINCT CONCAT(cn.COMPONENT_NUMBER, _utf8', ',cn.COMPONENT_DESCRIPTION) SEPARATOR '; ') AS Contents
      ey.NOTES AS Notes
      i.PRICE AS Price
      cl.COLOUR_DESCRIPTION AS Colour
   FROM 
      item AS i 
         JOIN entry ey
            ON i.ITEM_ID = ey.ITEM_ID
            JOIN version AS v  
               ON ey.VERSION_ID = v.VERSION_ID
            JOIN colour AS cl 
               ON ey.COLOUR_ID = cl.COLOUR_ID
            LEFT JOIN link_entry_contributor AS lec 
               ON ey.ENTRY_ID = lec.ENTRY_ID
               LEFT JOIN contributor AS ct 
                  ON lec.CONTRIBUTOR_ID = ct.CONTRIBUTOR_ID
         JOIN group AS gp 
            ON i.GROUP_ID = gp.GROUP_ID
         JOIN link_country_item AS lci 
            ON i.ITEM_ID = lci.ITEM_ID
            JOIN country AS cy 
               ON lci.COUNTRY_ID = cy.COUNTRY_ID
         JOIN contents AS cn 
            ON i.ITEM_ID = cn.ITEM_ID
   GROUP BY 
      REF_CODE, 
      VERSION_NUMBER 
```

# html - 私有（不可见）html 页面

> ID：14464724
> 
> 赞同：-1
> 
> 时间：2013-01-22T17:39:54.190
> 
> 标签：html, upload, visibility

我如何将 html 文件上传到我的网站而不让全世界看到它？我不希望它出现在 Google 或 Bing 或任何能够看到它的奇怪网络蜘蛛矩阵机器人上。我不希望它受密码保护。我只是希望它不可见，并且是唯一知道该 url 的人。

会是这样的。

My-Website.com/INVISIBLE.html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:48:53.230

除非您将其告知他人，否则您的网页`My-Website.com/INVISIBLE.html`将不为世人所知。要将其限制为搜索引擎，您可以使用`robots.txt`文件，其详细信息记录在[http://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html)但并非所有搜索引擎都尊重 robots.txt 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:47:17.140

Adding robots.txt to your page should do it

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

# java - 单选按钮对齐不正确

> ID：14464728
> 
> 赞同：0
> 
> 时间：2013-01-22T17:40:04.097
> 
> 标签：java, android, eclipse, radio-button, radio-group

请看下面的代码

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".Form" >

        <RelativeLayout 
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            >

            <TextView
               android:id="@+id/gender"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="Text To Be Displayed"
               android:layout_below="@+id/hipsTxt"
               /> 

            <RadioGroup 
                android:id="@+id/genderRadio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                    android:layout_toRightOf="@+id/gender"
                    android:layout_alignBaseline="@+id/gender"
                >

                <RadioButton
                    android:id="@+id/male"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Male" />

                <RadioButton
                    android:id="@+id/female"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Female" />

            </RadioGroup>

        </RelativeLayout>

</ScrollView> 
```

在这里，我需要将单选按钮显示在`TextView`. 但相反，它显示在文本视图下方！这里有什么问题？请帮忙！

PS：安卓版本2.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:50:02.943

代替

```
android:layout_alignBaseline="@+id/gender"
```

采用

```
android:layout_alignParentTop="true"
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:51:03.087

试试这个 ：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Form" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/gender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="1"
            android:text="Text To Be Displayed" />

        <RadioGroup
            android:id="@+id/genderRadio"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/male"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Male" />

            <RadioButton
                android:id="@+id/female"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Female" />
        </RadioGroup>
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:54:16.210

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        > 

        <RadioGroup 
            android:id="@+id/genderRadio"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
                android:layout_toRightOf="@+id/gender"

            >

            <RadioButton
                android:id="@+id/male"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Male" />

            <RadioButton
                android:id="@+id/female"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Female" />

        </RadioGroup>

        <TextView
            android:id="@+id/gender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="Text To Be Displayed" />

    </RelativeLayout> 
```

尝试并更改了您的 xml 内容，现在它已正确对齐，请尝试使用此内容。

# c# - 如何使用 linq 对嵌套集合进行排序？

> ID：14464730
> 
> 赞同：2
> 
> 时间：2013-01-22T17:40:08.997
> 
> 标签：c#, linq, sql-order-by

我相当肯定这是可能的，但我在让它工作时遇到了一些问题。我正在尝试使用 linq 获得一个只有 1 级嵌套的简单对象图。下面是一个结构示例：

```
public class City
{
 public int CityId { get; set; } 
 public string Name { get; set; }
 public List<House> Houses { get; set; }
}

public class House
{
 public int HouseId { get; set; }
 public int Number { get; set; }
 public int CityId { get; set; }
} 
```

所以我想做的是得到所有的城市，以及它们所有相关的房子。我正在尝试按名称对城市进行排序，然后按数字对它们的嵌套房屋进行排序。我尝试了一个投影，一个 foreach 排序，以及查询完成后的慢迭代。这是我目前拥有的基础知识，但我看不到如何访问嵌套集：

```
List<City> Cities = db.Cities.Include(c => c.Houses).OrderBy(c => c.Name).ToList(); 
```

我怎样才能设法按每个城市`Houses`对它们进行排序`Number`（而不影响城市的顺序）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:47:41.320

像这样的东西会起作用吗？

```
var Cities = 
           (from c in db.Cities
           orderby c.Name
           select new
           {
               Name = c.Name,
               Houses = c.Houses.OrderBy(c => c.Number).ToList()
           }
          ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T17:44:50.837

尝试这个

```
 var cities = (from city in db.Cities
                  orderby city.Name
                  select new {
                      City = city, 
                      Houses = city.Houses.OrderBy(c => c.Number)
                  })
                 .ToList(); 
```

# wpf - 如何从 WPF 中的另一个窗口绑定到 MainWindow 中的控件？

> ID：14464736
> 
> 赞同：4
> 
> 时间：2013-01-22T17:40:14.260
> 
> 标签：wpf, xaml, binding

基本上，我的问题已经出现在标题中：当我有如下 MainWindow 时：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:easycache"
        xmlns:map="clr-namespace:MapControl;assembly=MapControl.WPF"
        x:Class="easycache.MainWindow"
        x:Name="MainWindow1"
        Title="easycache"
        Height="600"
        Width="850">
  <map:Map Grid.Column="2"
           Grid.Row="1"
           Name="map"
           IsManipulationEnabled="True"
           LightForeground="Black"
           LightBackground="White"
           DarkForeground="White"
           DarkBackground="#FF3F3F3F"
           Center="0.0,0.0"
           ZoomLevel="0.0"
           TileLayer="{Binding Source={StaticResource TileLayersView}, Path=CurrentItem}" /> 
```

在我的窗口 2 中，我有：

```
<map:Map Name="map" IsManipulationEnabled="False"
                 LightForeground="Black" LightBackground="White" DarkForeground="White" DarkBackground="#FF3F3F3F"
                 Center="0.0,0.0" ZoomLevel="{Binding ?????}"> 
```

我想将 Window2 中地图的 ZoomLevel 绑定到我的 MainWindow 中地图的 ZoomLevel。我怎样才能做到这一点？

问候， 亚洛金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:09:21.080

在您的 MainWindow 代码隐藏中，使用公共 get 访问器创建公共属性，如下所示：

```
private double _mapZoom;
public double MapZoom //I assume that ZoomLevel is of type double, if not use the correct type
{
    get { return _mapZoom; }
    set { _mapZoom = value; OnPropertyChanged("MapZoom"); }
} 
```

你必须在你的 MainWindow 中实现 INotifyPropertyChanged 接口（到处都有一百万个例子，这里不需要讨论）。

然后，将地图的 ZoomLevel 属性绑定到 MapZoom 属性，如下所示：

```
<map:Map Name="map" ZoomLevel="{Binding RelativeSource={RelativeSource Self}, Path=MapZoom}, Mode=TwoWay"/> 
```

为此，Window 的 DataContext 必须是 Window 本身，在 Window 的构造函数中需要一行：

```
 public MainWindow()
    {
        InitializeComponent();
        this.DataContext = this; //add this line
    } 
```

您需要一种方法让第二个窗口调用主窗口，因此您可以创建一个静态属性来返回主窗口中的当前实例：

```
 private static MainWindow _instance;
    public static MainWindow Instance
    {
        get
        {
            if (_instance == null)
                _instance = new MainWindow();
            else
                _instance = this;

            return _instance;
        }
    } //you have to make sure to create ONE instance of MainWindow before getting this property, and not to create more instances elsewhere 
```

现在您将让 MainWindow 公开一个公共属性，该属性绑定到地图的缩放。

因此，在您的第二个窗口中创建一个指向该主窗口实例的属性：

```
 public MainWindow Main { get { return MainWindow.Instance; } 
```

最后，您可以将第二张地图的缩放绑定到作为 Main 成员的公共属性 MapZoom：

```
<map:Map Name="map2" ZoomLevel="{{Binding RelativeSource={RelativeSource Self}, Path=Main.MapZoom}, Mode=TwoWay"}"> 
```

在此绑定中，“Main”是通过 window2 的公共属性（在 window2 中也设置 this.DataContext = this;）引用 MainWindow 实例，并访问 .MapZoom 属性。

默认情况下，您在 XAML 中创建的所有对象都是私有的，因此您必须使用带有 get/set 访问器的公共属性显式公开它们，以使它们可以从外部访问。

让我知道这是否有效，我没有创建应用程序来测试代码。问候！

# php - PHP如何输出动态图像

> ID：14464740
> 
> 赞同：0
> 
> 时间：2013-01-22T17:40:27.640
> 
> 标签：php

我认为这将是一个简单的答案，但我无法弄清楚。

我有一个使用 fpdf 和 fpdi 生成 pdf 的脚本。

如果我使用普通图像，则 pdf 会完美生成，但我正在尝试使用 php 动态生成的图像。

```
$bc = new PrintBarcode('DARP CODE');
$bc->drawVoucher();
$src = $bc->getVoucher();

// image
$src = $bc->getVoucher();

$pdf->Image($src, 22, 94, 100, 15); 
```

这给出了错误：

`FPDF error: Image file has no extension and no type was specified: Resource id #16`

如果我做

```
$barcode = imagejpeg($src);
$pdf->Image($barcode, 22, 94, 100, 15); 
```

大概是因为 imagejpeg 实际上是在输出图像，但是设置了图像标头，因为如果设置了 jpeg 标头，图像将显示正常，所以我只是想找出正确的方法。

如果它更容易，我有一个可以生成图像的单独脚本，例如`printbarcode.php'，但我不知道如何将该脚本的内容放入此函数：

$pdf->Image($barcode, 22, 94, 100, 15);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:44:45.817

您不需要 PHP 用来操作图像的图像处理程序。您需要的是图像处理的实际结果，即生成的文件。使用`imagejpeg($img, '/path/to/some/tmp/dir/file.jpg');`并将路径移交给您的`$pdf->Image()`呼叫。然后在创建 PDF 之后，我认为您可以安全地删除临时存储的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:48:58.233

从错误消息中，我猜该`$pdf->Image()`函数期望`$src`成为文件的路径。你传递的东西看起来像一个物体。

尝试将图像保存到磁盘并从那里加载。您几乎可以使用`imagejpeg()`功能 - 请参阅[php.net 上](http://php.net/manual/en/function.imagejpeg.php)的文档。提供保存文件的路径

```
imagejpeg($img, 'myfile.jpg', 90); // 90 denotes high quality
$pdf->Image('myfile.jpg', 22, 94, 100, 15);
...
unlink('myfile.jpg'); // delete after 
```

或者在 fpdf 库中查找以图像资源为参数的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:00:29.023

你必须在 php 的 GD 库的帮助下这样做。

```
//Create a new image from file or URL
 $img_src = imagecreatefromjpeg($src);

// Output the image
 imagejpeg($img_src);  

// Free up memory
imagedestroy($img_src); 
```

# python - 将接受类成员函数作为变量的函数传递给python multiprocess pool.map()

> ID：14464741
> 
> 赞同：7
> 
> 时间：2013-01-22T17:40:27.947
> 
> 标签：python, multiprocessing

嗨，我早上大部分时间都在为此苦苦挣扎，希望有人能指出我正确的方向。

这是我目前的代码：

```
def f(tup):
    return some_complex_function(*tup)

def main():

    pool = Pool(processes=4) 
    #import and process data omitted 
    _args = [(x.some_func1, .05, x.some_func2) for x in list_of_some_class]
    results = pool.map(f, _args)
    print results 
```

我得到的第一个错误是：

```
> Exception in thread Thread-2: Traceback (most recent call last):  
> File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
>     self.run()   File "/usr/lib/python2.7/threading.py", line 504, in run
>     self.__target(*self.__args, **self.__kwargs)   File "/usr/lib/python2.7/multiprocessing/pool.py", line 319, in
> _handle_tasks
>     put(task) PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup __builtin__.instancemethod failed 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T17:57:18.977

`multiprocess`模块使用模块`pickle`序列化传递给函数 ( `f`) 的参数，该函数在另一个进程中执行。

许多内置类型可以腌制，但实例方法不能腌制。所以`.05`很好，但`x.some_func1`不是。请参阅[可以腌制和取消腌制什么？](http://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled)更多细节。

没有简单的解决方案。您需要重组程序，以便不需要将实例方法作为参数传递（或避免使用`multiprocess`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-25T01:17:32.233

`multiprocessing`如果你使用被调用的分支`pathos.multiprocesssing`，你可以直接在多处理的`map`函数中使用类和类方法。这是因为`dill`is 用来代替`pickle`or `cPickle`，并且`dill`可以在 python 中序列化几乎任何东西。

`pathos.multiprocessing`还提供了一个异步映射函数……它可以`map`使用多个参数（例如`map(math.pow, [1,2,3], [4,5,6])`）

请参阅： [多处理和莳萝可以一起做什么？](https://stackoverflow.com/questions/19984152/what-can-multiprocessing-and-dill-do-together)

和： http: [//matthewrocklin.com/blog/work/2013/12/05/Parallelism-and-Serialization/](http://matthewrocklin.com/blog/work/2013/12/05/Parallelism-and-Serialization/)

```
>>> from pathos.multiprocessing import ProcessingPool as Pool
>>> 
>>> p = Pool(4)
>>> 
>>> def add(x,y):
...   return x+y
... 
>>> x = [0,1,2,3]
>>> y = [4,5,6,7]
>>> 
>>> p.map(add, x, y)
[4, 6, 8, 10]
>>> 
>>> class Test(object):
...   def plus(self, x, y): 
...     return x+y
... 
>>> t = Test()
>>> 
>>> p.map(Test.plus, [t]*4, x, y)
[4, 6, 8, 10]
>>> 
>>> p.map(t.plus, x, y)
[4, 6, 8, 10] 
```

在此处获取代码： [https ://github.com/uqfoundation/pathos](https://github.com/uqfoundation/pathos)

# javascript - AngularJS 和 Internet Explorer

> ID：14464742
> 
> 赞同：9
> 
> 时间：2013-01-22T17:40:30.610
> 
> 标签：javascript, internet-explorer, angularjs

我无法在 Internet Explorer 7 和 8 甚至 9 上加载我的应用程序。

我收到以下错误消息（控制台）

```
Uncaught TypeError: Cannot read property 'nodeName' of undefined 
```

加载时 {{}} 变量正在加载和消失。什么都没有渲染。
我将此添加到 html 标记中：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:ng="http://angularjs.org" id="ng-app" class="ng-app: myapp;"> 
```

我从 AngularUI 框架中添加了 ieshiv.js。
我添加了

```
<!--[if lt IE 8]>
     <script src="files/js/json3.min.js"></script>
<![endif]--> 
```

（问题：这就够了，只是添加到我的 head 部分还是我也必须修改我的代码？）

我还将这个添加到我的头部：

```
<!--[if lte IE 8]>
      <script>
        document.createElement('ng-include');
        document.createElement('ng-pluralize');
        document.createElement('ng-view');
        document.createElement('slide');
        document.createElement('carousel');

        // Optionally these for CSS
        document.createElement('ng:include');
        document.createElement('ng:pluralize');
        document.createElement('ng:view');
      </script>
    <![endif]--> 
```

它根本不起作用。未加载任何变量，未呈现列表且网站无法正常工作。
Chrome、FF 和 Opera 运行良好。

你有什么从哪里开始的提示吗？

**编辑 1：**
链接到我在 paste.bin 上的 controller.js
[http://pastebin.com/z67qE9ME](http://pastebin.com/z67qE9ME)

**编辑2：**
可能是js加载的顺序吗？

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<!--[if lt IE 8]>
     <script src="files/js/json3.min.js"></script>
<![endif]-->
<script src="files/js/angular.min.js"></script>
<script src="files/js/ui-bootstrap-tpls-0.1.0-SNAPSHOT.js"></script>
<script src="files/js/angular-ui.js"></script>
<script src="files/js/angular-resource.min.js"></script>
<script src="files/js/controller.js"></script>
<script src="files/js/select2.js"></script>
<script src="files/js/main.js"></script> 
```

**编辑 3：**
好的，我将 fauxconsole.js 添加到我的脚本中并清理了代码并且它起作用了。好吧，至少它可以正确加载（没有任何 css 更正）。但它不会在我的某些标签上加载内联样式。你知道为什么吗？

```
<a ng-click="details.show=toggle(marker)" ng-class="{active_marker: active_marker.show == marker.id}" href="#/dealer/{{marker.id}}" class="marker" style="left:{{marker.coordleft}}px;top:{{marker.coordtop}}px">
</a></div> 
```

**编辑 4：**
这里的帮助也解决了编辑 3：
[https ://groups.google.com/d/msg/angular/0zHsVuUryKI/ckTvY93NcRsJ](https://groups.google.com/d/msg/angular/0zHsVuUryKI/ckTvY93NcRsJ)

但我现在遇到了另一个问题。在 IE 8 及以下版本中，路由模板不会呈现。我只看到 {{}} 变量而不是更多。

编辑5：
这很奇怪。我设法正确加载了第一个模板。所有括号 {{}} 正在正确加载。
**我将 .resolve 添加到我的 Ctrl 中：**

```
// DealerDetailsCtrl
function DealerDetailsCtrl($scope, $rootScope, $routeParams, dealerService, datasets) {
    $scope.loading = true;
    // Abfrage
    $rootScope.dealerdetails = datasets;
    // inline styles fuer positionierung laden
    $rootScope.itemStyle2 = function (item) {
        return { left: item.divleft * 1 + 390 + 'px', top: item.divtop * 1 + 160 + 'px'};
    };
    //Feedback zur Message zurruecksetzen
    $scope.issend = $rootScope.issend;
    $rootScope.issend = false;
    $scope.loading = false;
    //Close Button
    $rootScope.close = function() {
        $rootScope.marker = null;
        $rootScope.details = {show: false};
        $rootScope.alldealer = {show: false};
        $rootScope.active_marker = null;
    };
    $rootScope.$on("$routeChangeStart", function (event, next, current) {
        $scope.loading = true;
    });

}
DealerDetailsCtrl.resolve = {
    datasets : function($q, $http, $route, $rootScope) {
        var deferred = $q.defer();

        $http.get('files/framework/dealer/'+ $route.current.params.id +'/' + $rootScope.token).success(function(data) {
            deferred.resolve(data);
        });

        return deferred.promise;
    }
}; 
```

奇怪的是。从（正确渲染的）模板中，我链接到第二个模板和路由（从经销商/：id 到 /dealermessage/：id），但是这条路由（包括解析在内的所有内容都相同）没有正确加载，相同错误比以前，模板没有呈现。

**路线：**

```
app.config(['$routeProvider', function($routeProvider) {
    $routeProvider.
    when('/dealer/:id', {
        templateUrl: 'files/tpl/dealer-details.html?333',
        controller: 'DealerDetailsCtrl',
        activetab: 'details',
        resolve: DealerDetailsCtrl.resolve
    }).
    when('/dealermessage/:id', {
        templateUrl: 'files/tpl/dealer-message.html?222',
        controller: 'DealerMessageCtrl',
        activetab: 'message',
        resolve: DealerMessageCtrl.resolve
    }).
    when('/dealersendmessage/:id', {
        templateUrl: 'files/tpl/dealer-details.html?444',
        controller: 'DealerDetailsCtrl',
        activetab: 'details',
        resolve: DealerDetailsCtrl.resolve
    }).
    otherwise({
        redirectTo: '/dealer'
    });
}]); 
```

有没有人有线索，错误可能是什么或在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T16:56:53.010

Angular-UI 项目包含一个名为“IEShiv”的“子项目”，它可以让您在 IE 下顺利运行 Angular：[https ://github.com/angular-ui/angular-ui/tree/master/common/ieshiv](https://github.com/angular-ui/angular-ui/tree/master/common/ieshiv)

正如那里所说，你只需要这个：

```
<!--[if lte IE 8]> <script src="build/angular-ui-ieshiv.js"></script><![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T16:48:34.560

每当我在 IE 中遇到这些类型的错误（特别是 8 个）时，它就是这两个问题之一。

1）我使用的是自定义标签`<auto-complete>`，但没有使用`document.createElement`

2）我有重复`id`属性的元素。IE 不喜欢这样。

消除方法通常对我有用，可以隔离模板中的问题。

# c# - 将 com 对象传递给 BackgroundWorker 然后访问它是否有性能成本？

> ID：14464745
> 
> 赞同：0
> 
> 时间：2013-01-22T17:40:48.840
> 
> 标签：c#, .net, com

背景：我有一个表单，它调用后台工作人员进行一些密集的计算。我将 COM 对象放入对象数组中，并将其传递给后台工作人员，在那里我将它们解包并使用它。ILayer 是一个 com 对象。

代码看起来像这样。

```
private void run()
{
    ESRI.Geodatabase.ILayer layer1 = getLayer();
    ESRI.Geodatabase.ILayer layer2 = getLayer2();

    object[] args = {(object)layer1, (object)layer2};

    BackgroundWorker1.runAsynchronous(args);

}

private void backgroundworker_dowork(object sender, events e)
{
    object[] args = (object[])e.Argument;
    ESRI.Geodatabase.ILayer layer1 = (ILayer)args[0];
    ESRI.Geodatabase.ILayer layer2 = (ILayer)args[1];
    services.doIntensiveOperations(layer1, layer2);

} 
```

我的问题是：从后台工作人员反复调用 ILayer 和/或其成员是否有性能成本？这里的内存中实际发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:58:29.857

**通常**COM 对象具有线程亲和性，但在您的情况下，您必须查看实现`ILayer`以找出它的亲和性和单元线程模型。如果您的对象具有线程亲和性，则每次调用`ILayer`编组器时，都会向您的`ILayer`. 这意味着如果您频繁调用图层对象，您的后台线程和拥有 COM 对象的线程之间的通信会非常混乱，这可能会导致性能比您想要的要慢。

我上面的回答并不准确，因为 COM 对象有自己的世界，至少在我看来。对公寓、STA 和 MTA 进行一些研究以获取更多信息。

我只是用谷歌搜索，看看我偶然发现了[什么。](https://stackoverflow.com/questions/10643652/accessing-com-object-from-thread-other-than-main-thread-slow-in-c-sharp)汉斯的回答可能更准确地回答了你的问题。

# android - apk 必须使用与之前版本相同的证书进行签名[发布应用程序与其他信息]

> ID：14464747
> 
> 赞同：1
> 
> 时间：2013-01-22T17:40:58.443
> 
> 标签：android, release

我有以下问题：

我的搭档去了德国，带着我们的应用程序代码的笔记本。他通过电子邮件将代码发送给我，我完成了应用程序更新。但是我们从 Note 在 Google Play 中发布了该应用程序，现在我需要发布一个新版本，但我没有在第一个版本中使用的密钥库。

当我导出“.apk”时，我被要求输入密码，那是什么密码？如果我创建一个新的 debug.keystore 和新的别名，我会遇到上面提到的这个错误。

我可以做些什么来释放实现吗？我必须知道任何信息吗？

很抱歉再发一篇同名的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:45:21.620

对于同一应用程序的更新，应使用先前使用的相同签名和密码导出apk，否则，您的apk将被视为新应用程序，而不是同一应用程序的更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T17:51:49.870

首先，您的应用程序必须使用相同的密钥进行签名。没有办法解决这个问题。您可以让您的合作伙伴向您发送`.keystore`他们在签署应用程序时使用的文件，该应用程序目前已上传到 google play。

其次，您需要拥有密钥库别名、密钥库密码和别名密码（密码）。这些是在`.keystore`创建文件时输入的。

传输此信息时请谨慎行事。如果有人获得了您的`.keystore`文件，他们可以使用它来签署他们的应用程序，从而允许他们的应用程序以受信任的方式与您的应用程序通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:51:03.380

正如 Zoombie 所说，您必须使用相同的密钥库和密码进行签名，并注意不要更改包名；所有这些都会导致它被认为是一个不同的应用程序。您需要输入 2 个密码，一个用于密钥库，一个用于其别名。

# python - 批量插入类对象

> ID：14464749
> 
> 赞同：0
> 
> 时间：2013-01-22T17:41:04.200
> 
> 标签：python

我有一种情况，我必须在表中插入大量记录。我已经将插入的东西包装在一个成员函数中（对象的）。但这需要很多时间。为了优化这一点，我将所有这些记录作为类的数据成员保存在缓冲区（作为列表）中。当没有。记录达到 100，我正在进行批量插入。

这是代码。

```
class TabDailyQuotes:

    def __init__(self, metadata):
        self.metadata = metadata
        self.indexes = Table('DailyQuotes', metadata, autoload=True)
        self.ins_buf = []
        self.ins = self.indexes.insert()

    def insert(self, dict_data):
        if isinstance(dict_data, types.DictType):
            for key, val in dict_data.items():
                self.ins_buf.append(val)
        else:
            self.ins_buf.append(dict_data)
        if len (self.ins_buf) == 100:
            self.ins.execute(self.ins_buf)
            self.ins_buf = []

    def __del__(self):
        if len (self.ins_buf) > 0:
            self.ins.execute(self.ins_buf)
            self.ins_buf = [] 
```

这里的问题是，当我调用仅插入一条记录的函数（以及随后调用插入后续记录）时，我必须使用`__del__()`魔术函数在对象生命周期结束时插入所有剩余的记录。

谁能告诉我一个更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:06:39.947

不能保证 __del__ 会被调用。因此，最好明确说明清理操作并为其定义不同的方法，然后在程序关闭或 TabDailyQuotes 对象超出范围时调用它。

参考：

[我不明白这个 python __del__ 行为](https://stackoverflow.com/questions/6104535/i-dont-understand-this-python-del-behaviour)
[在 __del__ 中进行对象关闭/处置真的可以吗？](https://stackoverflow.com/questions/1111505/is-it-really-ok-to-do-object-closeing-disposing-in-del?rq=1)

# sql-server - 递归选择唯一的最大值

> ID：14464758
> 
> 赞同：1
> 
> 时间：2013-01-22T17:41:21.013
> 
> 标签：sql-server, recursion, max

我有以下字段数据`A`，，，`B`：`C`

```
A  B  C
-- -- --
1  1  90
1  2  99
1  3  75
2  1  60
2  2  54
2  3  95
3  1  85
3  2  80
3  3  9
4  1  80
4  2  85
4  3  86
4  4  87 
```

我需要找到产生最大值的`A`and对，然后选择下一个最大值，使其不包含or 。在上面的数据中，第一次尝试选择了因为是最大的。第二遍排除所有具有 1 或 2 的对，因此我们剩下 ,和，第二个最大值是。该过程继续进行，结果是：`B``C``A``B``1, 2``99``3 3``4 3``4 4``4 4`

```
A  B  C
-- -- --
1  2  99
4  4  87
3  3  9 
```

如何使用 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:52:14.857

```
declare @a table (a int,b int,c int)
insert into @a values (1, 1, 90)
,(1, 2, 99)
,(1, 3, 75)
,(1, 3, 75)
,(2, 1, 60)
,(2, 2 ,54)
,(2, 3, 95)
,(3, 1, 85)
,(3, 2, 80)
,(3, 3, 9)
,(4, 1, 80)
,(4, 2, 85)
,(4, 3 ,86)
,(4, 4, 87);
Declare @rct int

Select top 1 *
into #tmp
from @a
Order by c desc

Select @rct=@@ROWCOUNT
While @rct>0
    begin
     Insert into #tmp
     Select Top 1 a.*
     from @a a
     Left Join #tmp on #tmp.A=a.A or #tmp.B=a.B or #tmp.b=a.A or #tmp.A=a.b
     Where #tmp.a is null and #tmp.b is null
     Order by C desc 
     Select @rct=@@ROWCOUNT
    end

Select * from #tmp
order by c desc
Drop table #tmp 
```

有 600000 行，你可以试试这个尝试

```
declare @a table (a int,b int,c int)
insert into @a values (1, 1, 90)
,(1, 2, 99)
,(1, 3, 75)
,(1, 3, 75)
,(2, 1, 60)
,(2, 2 ,54)
,(2, 3, 95)
,(3, 1, 85)
,(3, 2, 80)
,(3, 3, 9)
,(4, 1, 80)
,(4, 2, 85)
,(4, 3 ,86)
,(4, 4, 87);
Declare @rct int

Select a,b,c 
into #work
from @a   --  your big table
CREATE NONCLUSTERED INDEX [i_a] ON #work (a)
CREATE NONCLUSTERED INDEX [i_b] ON #work (b)
CREATE NONCLUSTERED INDEX [i_c] ON #work (c)

Select top 1 *
into #tmp
from #work
Order by c desc

Select * 
into #final
from #tmp

Delete #work 
from #tmp
where #work.a=#tmp.a or #work.b=#tmp.a or #work.a=#tmp.b or #work.b=#tmp.b

While (Select COUNT(*) from #work) >0
    begin
    delete from #tmp

    insert into #tmp
    Select top 1 *  
    from #work
    Order by c desc

    insert into #final
    Select *    
    from #tmp

    Delete #work 
    from #tmp
    where #work.a=#tmp.a or #work.b=#tmp.a or #work.a=#tmp.b or #work.b=#tmp.b
    end 

drop table #work
drop table #tmp
Select * from #final
drop table #final 
```

# c# - 控制台应用程序中的多个参数未正确解析

> ID：14464759
> 
> 赞同：8
> 
> 时间：2013-01-22T17:41:24.497
> 
> 标签：c#, .net, console, console-application, command-line-arguments

易于复制，但对我来说真的很奇怪：

将以下带有 3 个字符串的“args”添加到 VisualStudio 的命令行参数文本框中（在项目属性->调试->启动选项下）：

```
-SourceFile:"c:\temp\file.txt" -DestinationFolder:"c:\temp\" -ArchiveFolder:"C:\temp\" 
```

使用这个简单的控制台应用程序对其进行测试：

```
class Program
{
    static void Main(string[] args)
    {
        foreach (string t in args)
        {
            Console.WriteLine(t);
        }
        Console.ReadKey();
    }
} 
```

结果：数组 (args[]) 有 2 个而不是 3 个字符串？

```
[0] SourceFile:c:\temp\file.txt
[1] DestinationFolder:c:\temp" -ArchiveFolder:C:\temp" 
```

有人能解释一下为什么会这样吗？引号有一些奇怪的原因，正常情况下，引号将被.net删除，但在这里，仍然有一些引号......但我看不到问题......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T17:44:25.640

您`\"`在`DestinationFolder`值中有一个“转义”引号，将其包含在值的文本中，而不是与开始引号配对以关闭字符串。你想要一个文字`\`，所以使用`\\`：

```
-SourceFile:"c:\temp\file.txt" -DestinationFolder:"c:\temp\\" -ArchiveFolder:"C:\temp\\" 
```

（你甚至可以在 SO 的高亮引擎中看到转义）

# python-2.7 - py.test “--collectonly 不尊重 -k” 问题没有解决？

> ID：14464762
> 
> 赞同：2
> 
> 时间：2013-01-22T17:41:49.587
> 
> 标签：python-2.7, pytest

我遇到了这个 py.test 问题报告中描述的问题： [https ://bitbucket.org/hpk42/pytest/issue/27/collectonly-doesnt-respect-k](https://bitbucket.org/hpk42/pytest/issue/27/collectonly-doesnt-respect-k)

这些是来自 Jenkins 控制台的结果：~~~~~~~~~~~~~~~~~~ + py.test -v -k test_example --junitxml=functionaltests/reports/res.xml === ========================== 测试开始 ===================== ========= 平台 linux2 -- Python 2.7.3 -- pytest-2.3.4 -- /var/lib/jenkins/shiningpanda/jobs/9df20569/virtualenvs/701cc1aa/bin/python2.7 插件： xdist 收集...收集了 3 个项目 / 1 个错误

```
functionaltests/test_example.py:40: test_data[apple] PASSED
functionaltests/test_example.py:40: test_data[pear] PASSED
functionaltests/test_example.py:40: test_data[berry] PASSED

==================================== ERRORS ====================================
___________ ERROR collecting functionaltests/test_smm_healthcheck.py ___________
functionaltests/test_smm_healthcheck.py:2: in <module>
>   import models.SMMMicrosites as site_data
E   ImportError: No module named models.SMMMicrosites
 generated xml file: /var/lib/jenkins/workspace/WT/functionaltests/reports/res.xml 
====================== 3 passed, 1 error in 0.05 seconds =======================
Build step 'Virtualenv Builder' marked build as failure
Recording test results
Finished: FAILURE 
```

~~~~~~~~~~~~~~~~~~

不应收集或执行测试模块“test_smm_healthcheck.py”。修复 - 已解决 - 尚未发布？我正在运行 py.test 2.3.4 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:28:20.457

“-k”标志不影响收集的内容 - 仅影响使用 --collectonly 报告的内容。所以你不能用它来阻止收集。您可以使用 --ignore=path （一次或多次）来防止收集。

# asp.net-mvc-4 - 如何在 ASP.Net MVC 4 中自定义身份验证和授权？

> ID：14464765
> 
> 赞同：2
> 
> 时间：2013-01-22T17:42:10.147
> 
> 标签：asp.net-mvc-4, oauth-2.0, dotnetopenauth, custom-membershipprovider

如何修改 MVC 4 Internet 应用程序模板中的默认身份验证系统。我只想使用社交登录，拥有基于角色的系统，使用附加信息维护用户配置文件，并允许将帐户与不同的提供商合并。

# linq - 加入子查询结果

> ID：14464767
> 
> 赞同：0
> 
> 时间：2013-01-22T17:42:18.437
> 
> 标签：linq, linq-to-entities

我有一个名为的表`IssueStatuses`和另一个名为 Issues 的表。问题有 a`StatusID`和`SubStatusID`，两者都来自`IssueStatuses`表，该表有一个附加字段，说明它是否是 a `SubStatus`，如下所示：

**问题状态**

*   问题状态ID
*   问题状态
*   是子状态

我正在尝试获取`SubStatuses`特定问题列表的列表。在 SQL 中是：

```
SELECT iss.IssueStatus, COUNT(iss.IssueStatus) AS Total
FROM Issues AS Issues 
INNER JOIN Rooms r ON Issues.RoomID = r.RoomID 
INNER JOIN Locations l ON l.LocationID = r.LocationID 
INNER JOIN Customers c ON l.CustomerID = c.CustomerID 
INNER JOIN (SELECT * FROM IssueStatuses WHERE IsSubStatus = 0) ist ON Issues.IssueStatusID = ist.IssueStatusID 
INNER JOIN (SELECT * FROM IssueStatuses WHERE IsSubStatus = 1) iss ON Issues.IssueSubStatusID = iss.IssueStatusID 
WHERE c.Customer = 'ABC' 
AND l.Location = 'MySite'
GROUP BY iss.IssueStatus 
```

但我在将其转换为 LINQ 时遇到问题。所需的输出类似于：

```
问题状态 | 全部的
------------------
打开 15
延迟 25
准时 8

```

这是我用 LINQ 尝试过的：

```
var query = from i in Issues
join r in Rooms on i.RoomID equals r.RoomID
join l in Locations on r.RoomID equals l.LocationID
join c in Customers on l.CustomerID equals c.CustomerID
where i.IssueStatusID == (from ist in IssueStatuses
                            where ist.IsSubStatus == false
                            select ist)
&& i.IssueSubStatusID == (from iss in IssueStatuses
                            where iss.IsSubStatus == true
                            select iss)
&& c.Custome == "ABC"
&& l.Location == "MySite"
    group i by i.IssueStatus 
```

但我知道这是错误的，因为`LINQPad`会引发错误说明：

```
can't convert int to type Models.IssueStatus 
```

我需要做的是用于`iss.IssueStaus`分组，但我无法访问它。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:52:57.753

这个怎么样（未经测试，但我应该很接近）：

```
var query = from i in Issues
            join r in Rooms on i.RoomID equals r.RoomID
            join l in Locations on r.LocationID equals l.LocationID
            join c in Customers on l.CustomerID equals c.CustomerID
            join ist in IssueStatuses on i.IssueStatusID equals ist.IssueStatusID
            join iss in IssueStatuses on i.IssueSubStatusID equals iss.IssueStatusID
            where !ist.IsSubStatus && iss.IsSubStatus
                && c.Customer == "ABC"
                && l.Location == "MySite"
            group i by iss.IssueStatus into g
            select new {IssueStatus = g.Key, Total = g.Count()} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:47:35.147

您的两个内部`from`语句返回对象而不是 ID ...选择您需要的 ID，例如`ist.IssueStatusID`：

```
var query = from i in Issues
join r in Rooms on i.RoomID equals r.RoomID
join l in Locations on r.RoomID equals l.LocationID
join c in Customers on l.CustomerID equals c.CustomerID
where (from ist in IssueStatuses
                            where ist.IsSubStatus == false
                            select ist.IssueStatusID).Contains(i.IssusStatusID)
&& (from iss in IssueStatuses
                            where iss.IsSubStatus == true
                            select iss.IssueStatusID).Contains(i.IssueSubStatusID)
&& c.Customer == "ABC"
&& l.Location == "MySite"
    group i by i.IssueStatus 
```

# java - 如何从命令行检查正在运行的 JVM 的堆使用情况？

> ID：14464770
> 
> 赞同：48
> 
> 时间：2013-01-22T17:42:37.287
> 
> 标签：java, memory-management, garbage-collection, jetty, jvisualvm

我可以从命令行检查正在运行的 JVM 的堆使用情况吗？我指的是实际使用情况，而不是 Xmx 分配的最大数量。

我需要它是命令行，因为我无法访问窗口环境，并且我想要基于 value 的脚本，应用程序在 Jetty Application server 中运行

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-22T17:44:34.057

您可以使用 jstat，例如：

```
 jstat -gc pid 
```

完整文档在这里： [http ://docs.oracle.com/javase/7/docs/technotes/tools/share/jstat.html](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jstat.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-01-19T17:44:48.153

对于 Java 8，您可以使用以下命令行来获取以 kB 为单位的堆空间利用率：

```
jstat -gc <PID> | tail -n 1 | awk '{split($0,a," "); sum=a[3]+a[4]+a[6]+a[8]; print sum}' 
```

该命令基本上总结了：

*   S0U：幸存者空间 0 利用率 (kB)。
*   S1U：幸存者空间 1 利用率 (kB)。
*   欧盟：伊甸园空间利用率 (kB)。
*   OU：旧空间利用率（kB）。

您可能还希望包括元空间和压缩类空间利用率。在这种情况下，您必须将 a[10] 和 a[12] 添加到 awk 总和中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-10-19T17:19:53.170

一次完成所有程序。基于@Till Schäfer 的回答。

**在 KB 中...**

```
jstat -gc $(ps axf | egrep -i "*/bin/java *" | egrep -v grep | awk '{print $1}') | tail -n 1 | awk '{split($0,a," "); sum=(a[3]+a[4]+a[6]+a[8]+a[10]); printf("%.2f KB\n",sum)}' 
```

**在兆...**

```
jstat -gc $(ps axf | egrep -i "*/bin/java *" | egrep -v grep | awk '{print $1}') | tail -n 1 | awk '{split($0,a," "); sum=(a[3]+a[4]+a[6]+a[8]+a[10])/1024; printf("%.2f MB\n",sum)}' 
```

**“Awk 总和”参考：**

```
 a[1] - S0C
 a[2] - S1C
 a[3] - S0U
 a[4] - S1U
 a[5] - EC
 a[6] - EU
 a[7] - OC
 a[8] - OU
 a[9] - PC
a[10] - PU
a[11] - YGC
a[12] - YGCT
a[13] - FGC
a[14] - FGCT
a[15] - GCT 
```

**用于“Awk 总和”：**

```
a[3] -- (S0U) Survivor space 0 utilization (KB).
a[4] -- (S1U) Survivor space 1 utilization (KB).
a[6] -- (EU) Eden space utilization (KB).
a[8] -- (OU) Old space utilization (KB).
a[10] - (PU) Permanent space utilization (KB). 
```

[**参考：** https://docs.oracle.com/javase/7/docs/technotes/tools/share/jstat.html]

谢谢！

**注意：**适用于 OpenJDK！

**进一步的问题：**错误的信息？

如果你用`ps`命令检查内存使用情况，你会看到java进程消耗更多...

```
ps -eo size,pid,user,command --sort -size | egrep -i "*/bin/java *" | egrep -v grep | awk '{ hr=$1/1024 ; printf("%.2f MB ",hr) } { for ( x=4 ; x<=NF ; x++ ) { printf("%s ",$x) } print "" }' | cut -d "" -f2 | cut -d "-" -f1 
```

* * *

**更新（2021-02-16）：**

根据下面的参考资料（和@Till Schäfer 评论）*“ps 可以显示操作系统的总保留内存”*（改编）和*“jstat 可以显示堆和堆栈的已用空间”*（改编）。`ps`因此，我们看到命令和命令所指出的内容之间存在差异`jstat`。

根据我们的理解，最“真实”的信息将是`ps`输出，因为我们将对系统内存受损程度做出有效响应。该命令`jstat`用于更详细地分析 Java 在消耗 OS 保留内存方面的性能。

[**参考：** http://www.openkb.info/2014/06/how-to-check-java-memory-usage.html]

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-22T17:51:22.413

如果您在开启 gc 日志记录的情况下开始执行，您将获得存档信息。否则'jmap -heap'会给你你想要的。有关更多信息，请参阅[jmap 文档页面](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jmap.html "这里")。

请注意，除非绝对需要，**否则**`jmap`不应在生产环境中使用它，因为该工具会暂停应用程序以确定实际的堆使用情况。通常这在生产环境中是不需要的。

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-04T12:28:20.477

如果您使用的是 JDK 8 及更高版本，请使用 jcmd：

jcmd <pid> GC.heap_info**

# jakarta-ee - 如何在 web 项目中使用来自 Netbeans ejb 项目的 EJB？

> ID：14464774
> 
> 赞同：2
> 
> 时间：2013-01-22T17:42:42.767
> 
> 标签：jakarta-ee, netbeans, ejb, cdi

我创建了一个 NetBeans Enterprise 应用程序，它由一个包装 ejb (jar) 项目和一个 web (war) 项目的 ear 组成。

我的 web 项目中有一个 servlet，我想在其中使用 ejb 项目中的一个 EJB。

```
@WebServlet(name = "Shop", urlPatterns = {"/ajax/add_to_cart"})
public class ShoppingCartServlet extends HttpServlet {

    @EJB
    ShoppingCartFacade shoppingCartFacade 
```

我在 NetBeans 中收到错误 - ShoppingCartFacade 的“找不到符号”。即使它位于“兄弟”ejb 项目中，Netbeans 也无法自动找到 ShoppingCartFacade 的包。如果我开始在 Servlet 中手动输入包名，即。

```
import com.myproject.... 
```

我可以看到唯一可见的包是 web 项目本身中的包，即。

`com.myproject.web.my_web_related_package`可见

然而

`com.myproject.ejb.my_ejb_related_package`不可见

当然，将 EJB 注入 Web 项目必须很简单，因为拥有单独的 ejb 和 Web 项目的全部意义在于，业务逻辑可以放置在 ejb 中并从 Web 资源（如 servlet）中调用。

那么我应该如何在 Web（战争）应用程序中使用 EJB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:21:10.920

我必须明确地将 ejb 项目声明为 Web 项目的依赖项。如果它是常规的 NetBeans 企业应用程序，这似乎是自动完成的，但如果它是 Maven 企业应用程序，则不是，在我的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T19:38:52.930

我认为问题在于 Maven 不知何故没有更新它的存储库。您需要先从本地 maven 存储库中删除所有项目工件，然后使用依赖项进行重建。问题就会消失。

# html - 是否可以为 HTML5 API 创建自定义用户权限请求对话框？

> ID：14464776
> 
> 赞同：2
> 
> 时间：2013-01-22T17:43:01.467
> 
> 标签：html, geolocation, multiple-browsers, getusermedia

是否可以为 HTML5 API（例如地理位置或 getUserMedia）创建自定义用户权限请求对话框，以便它们在所有浏览器中看起来都一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:47:52.040

**谢天谢地，不！**

如果您能够创建自己的，您可能会误导问题（和按钮）。就像您无法设置`onbeforeunload`弹出窗口的样式一样。

沙盒之外的任何东西，并且您试图访问，*都*必须由浏览器 UI 控制。否则它将是完整的和彻底的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:46:59.833

您是在谈论所有 api 身份验证的一种自定义样式，跨多个 API，大多数 API，如 facebook、instagram、foursquare、google 等，都有自己的对话框，您必须使用它们才能进行身份验证，所以我相信创建一个自定义的是不可能的，虽然我讨厌说事情是不可能的。但就 HTML5 API 而言，它们也无法自定义

# apache - Apache 302 在下载大型（700+MB 文件）时重定向

> ID：14464792
> 
> 赞同：0
> 
> 时间：2013-01-22T17:44:08.333
> 
> 标签：apache, file

当我尝试在目录中下载大文件时，我的 Apache 服务器正在重定向。较小的文件工作得很好

有什么建议么？

# java - 运行 JavaCpp 示例时出现 UnsatisfiedLinkException (LegacyLibrary)

> ID：14464793
> 
> 赞同：2
> 
> 时间：2013-01-22T17:44:10.790
> 
> 标签：java, c++, java-native-interface, javacpp

我正在尝试使用 JDK 1.7.0 和 JavaCpp 0.3 (bin) 在 Windows XP Professional (x86) 上使用 Visual Studio 2008 构建和运行 JavaCpp 的[LegacyLibrary 示例](http://code.google.com/p/javacpp/#Accessing_Native_APIs)，我得到以下输出。错误出现在最后一个命令上，`java -cp javacpp.jar LegacyLibrary`.

```
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp>dir
 Volume in drive C has no label.
 Volume Serial Number is 9099-0685

 Directory of C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hell
o_JNI\src\graf\JavaCpp

22/01/2013  10:19 AM    <DIR>          .
22/01/2013  10:19 AM    <DIR>          ..
04/11/2012  09:00 PM           109,991 javacpp.jar
22/01/2013  10:18 AM               297 LegacyLibrary.h
22/01/2013  10:19 AM             1,058 LegacyLibrary.java
               3 File(s)        111,346 bytes
               2 Dir(s)  362,833,334,272 bytes free

C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp>javac -cp javacpp.jar LegacyLibrary.java

C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp>java -jar javacpp.jar LegacyLibrary
Generating source file: C:\Documents and Settings\Brian\My Documents\Projects\Co
py of Hello_JNI\src\graf\JavaCpp\jniLegacyLibrary.cpp
Building library file: C:\Documents and Settings\Brian\My Documents\Projects\Cop
y of Hello_JNI\src\graf\JavaCpp\windows-x86\jniLegacyLibrary.dll
cl /IC:\jdk1.7.0\include /IC:\jdk1.7.0\include\win32 "C:\Documents and Settings\
Brian\My Documents\Projects\Copy of Hello_JNI\src\graf\JavaCpp\jniLegacyLibrary.
cpp" /W3 /Oi /O2 /EHsc /Gy /GL /MD /LD /link "/OUT:C:\Documents and Settings\Bri
an\My Documents\Projects\Copy of Hello_JNI\src\graf\JavaCpp\windows-x86\jniLegac
yLibrary.dll" /LIBPATH:C:\jdk1.7.0\lib /LIBPATH:C:\jdk1.7.0\jre\bin\server jvm.l
ib
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.21022.08 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

jniLegacyLibrary.cpp
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(113) : warning C4996: 'strcpy': This function or v
ariable may be unsafe. Consider using strcpy_s instead. To disable deprecation,
use _CRT_SECURE_NO_WARNINGS. See online help for details.
        c:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE\string.h(74) : s
ee declaration of 'strcpy'
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(115) : warning C4996: 'strncpy': This function or
variable may be unsafe. Consider using strncpy_s instead. To disable deprecation
, use _CRT_SECURE_NO_WARNINGS. See online help for details.
        c:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE\string.h(157) :
see declaration of 'strncpy'
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(185) : warning C4996: 'strdup': The POSIX name for
 this item is deprecated. Instead, use the ISO C++ conformant name: _strdup. See
 online help for details.
        c:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE\string.h(207) :
see declaration of 'strdup'
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(340) : warning C4244: 'argument' : conversion from
 'jlong' to 'size_t', possible loss of data
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(354) : warning C4244: 'argument' : conversion from
 'jlong' to 'size_t', possible loss of data
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(370) : warning C4244: 'argument' : conversion from
 'jlong' to 'size_t', possible loss of data
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(385) : warning C4244: 'argument' : conversion from
 'jlong' to 'size_t', possible loss of data
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(393) : warning C4244: 'argument' : conversion from
 'jlong' to 'size_t', possible loss of data
C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp\jniLegacyLibrary.cpp(956) : warning C4800: 'jboolean' : forcing value t
o bool 'true' or 'false' (performance warning)
Microsoft (R) Incremental Linker Version 9.00.21022.08
Copyright (C) Microsoft Corporation.  All rights reserved.

/out:jniLegacyLibrary.dll
/ltcg
/dll
/implib:jniLegacyLibrary.lib
"/OUT:C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\sr
c\graf\JavaCpp\windows-x86\jniLegacyLibrary.dll"
/LIBPATH:C:\jdk1.7.0\lib
/LIBPATH:C:\jdk1.7.0\jre\bin\server
jvm.lib
jniLegacyLibrary.obj
   Creating library jniLegacyLibrary.lib and object jniLegacyLibrary.exp
Generating code
Finished generating code

C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp>java -cp javacpp.jar LegacyLibrary
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\Documents and Sett
ings\Brian\Local Settings\Temp\javacpp92803190928456\jniLegacyLibrary.dll: Can't
 find dependent libraries
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1928)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825)
        at java.lang.Runtime.load0(Runtime.java:792)
        at java.lang.System.load(System.java:1059)
        at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:422)
        at com.googlecode.javacpp.Loader.load(Loader.java:372)
        at com.googlecode.javacpp.Loader.load(Loader.java:319)
        at LegacyLibrary$LegacyClass.<clinit>(LegacyLibrary.java:8)
        at LegacyLibrary.main(LegacyLibrary.java:22)

C:\Documents and Settings\Brian\My Documents\Projects\Copy of Hello_JNI\src\graf
\JavaCpp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:25:44.543

问题是 Visual Studio 2005 和 VS 2008 不会自动链接到 VC++ 的内部库。解决方案是将清单与可执行文件中所需的库捆绑在一起，如此处所述[，](http://msdn.microsoft.com/en-us/library/ms235591%28v=vs.90%29.aspx)或者仅使用 Visual Studio 2010 或更高版本。我使用了 VS 2010，我可以验证该示例现在是否按预期运行。如果您碰巧尝试捆绑清单，请评论其他人以确认它是有效的修复。

来源：[https ://groups.google.com/forum/#!topic/javacpp-project/kljspKIxH9M](https://groups.google.com/forum/#!topic/javacpp-project/kljspKIxH9M)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:47:44.737

似乎java找不到.dll文件。尝试将其放入执行类文件的同一目录中。

顺便说一句，你如何在java中加载库？

# git - 如何重新配置 git 用户？

> ID：14464797
> 
> 赞同：0
> 
> 时间：2013-01-22T17:44:24.800
> 
> 标签：git

我刚拿到朋友的电脑，我需要将 GIT 重新配置到我的用户帐户。我读到您可以通过键入来更改用户名，`git config --global user.name "My Name"`但这可能不会更改用户本身，只会更改其名称。

有什么提示吗？干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:46:40.520

git doesn't care about your user name. Well, yes, it cares in *one* situation:

*   if you do not have `user.name` setup, it will default to the system's user name;
*   if you do not have `user.email` configured, it will by default append the system username, '@', and the hostname of the machine you are on;

So, in the end, you really have to ensure about two things:

*   you have a `user.name` and `user.email` properly set;
*   your "new user" has the necessary privileges to operate the repository.

Also note that the name and email settings may be overwritten on a *per repository basis*. Check the `.git/config` of existing repositories as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:48:54.263

Git 全局用户配置值保存在用户路径中。因此，如果您使用不同的用户帐户登录，您可以设置全局配置值，它基本上采用这些用户值，而将前用户的值保留在他们的帐户下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:50:45.807

这取决于您如何连接到存储库。一方面，用户名可以硬编码在远程存储库的 URL 中（例如`ssh://user@hostname/my/repository.git`——你可以检查`git remote -v`）。在这种情况下，您只需使用 更改远程 URL `git remote set-url origin ssh://...`。

如果使用 SSH 连接，用户名也可以在 SSH 配置文件中配置（在 UNIX 中`~/.ssh/ssh_config`）。然后，一些服务使用客户端的 SSH 密钥来识别用户（在这种情况下，您可能必须切换 SSH 密钥）。

如果您是匿名身份验证，则只需更改配置设置即可。

# jquery - 由grails解析的jquery json

> ID：14464811
> 
> 赞同：0
> 
> 时间：2013-01-22T17:45:05.650
> 
> 标签：jquery, ajax, json, grails

我有一个成功地将东西传递到我的控制器的 ajax

```
var ids = grid.jqGrid('getGridParam','selarrrow');
if (ids.length>0) {
    var names = [];
    for (var i=0, il=ids.length; i < il; i++) {
        var name = grid.jqGrid('getCell', ids[i], 'uniqueIdentifyingName');
        names.push(name);
    }
} 
```

然后我创建了一个警报，将其吐出，所以我知道它们在那里：

```
"alex's names: other test,test" 
```

现在我想作为数据传递。

我目前正在使用 ajax 传递它们

```
data: {'names':JSON.stringify(names)},
dataType: 'json' 
```

但我无法在 grails 控制器中解析它

我目前正在这样做：

```
List<JSON> Mynames = JSON.parse(params.names)
Mynames.each{println "MY name is: $Mynames"} 
```

正在输出：

```
MY name is: [other test, test]
MY name is: [other test, test] 
```

我该如何解析这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:54:11.707

而不是在每次迭代中打印整个`Mynames`对象，而是使用打印出当前项目`it`

`Mynames.each{ println "MY name is: $it" }`

# c# - 使用 Visual Studio 2012 恢复删除的文件

> ID：14464815
> 
> 赞同：34
> 
> 时间：2013-01-22T17:45:19.727
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我不小心删除了我项目的一部分，以为我在一个临时文件夹中。它是一个 asp.net-mvc 4 应用程序。

我没有 tfs 或任何其他程序监视我的文件系统。

我刚刚发布了我的应用程序。我只剩下一堆编译好的文件、js、css和图像。

是否有任何来自 Microsoft 的工具可以用来执行逆向工程，或者 VS2012 是否会跟踪文件以便我可以恢复它。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-22T18:52:22.180

在 Visual Studio 中删除的文件会转到 Windows 回收站。除非您清除它，否则您的文件应该仍然存在。只需恢复它们，然后将它们作为现有项目添加到您的项目中。您还可以通过解决方案资源管理器拖放它们。

**编辑：**

您也可以单击解决方案资源管理器中的“显示所有文件”按钮。

![突出显示：解决方案资源管理器中的“显示所有文件”按钮](../Images/c8ceccfd58846baa0c54148bc9588fab.png)

该文件将出现在那里，呈灰色显示（**如果它只是从您的项目中删除 - 而不是从您的磁盘驱动器中删除**）。然后您可以右键单击它，并将其添加回 ptoject。如果它不存在，请尝试第一种方法。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-10-26T09:46:49.757

1.  在“Windows 文件资源管理器”中打开已删除项目的文件夹/解决方案
2.  按 Ctrl+z（撤消）。这将指示 Windows 撤消对文件夹的最后操作
3.  再次转到 Visual Studio 解决方案
4.  单击解决方案资源管理器上的“显示所有文件”图标
5.  单击刷新
6.  再次包含文件

PS。使用版本控制系统总是更安全，以确保您不仅可以检索文件本身，还可以检索任何以前签入的状态。[http://www.incredible-web.com/blog/revision-control-systems/](http://www.incredible-web.com/blog/revision-control-systems/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-09T17:59:15.273

试试这个：

1.  右键单击您的项目；

2.  点击“在文件资源管理器中打开文件夹”；

3.  打开你的项目文件夹；

4.  一旦项目文件夹打开，只需执行“ctrl + z”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T18:57:23.917

*   如果您启用了 Visual Studio 中的已删除文件，则应最终进入回收站。如果还没有清除，可以恢复。

    *   删除文件时，没有文件真正被“删除”。它通常被标记为已删除，但仍然可以通过工具轻松恢复。一个这样的工具是由一家名为 AccessData 的公司制造的，该公司生产名为 Forensic Toolkit 的取证调查软件。他们有一个名为 FTK Imager 的程序，它可以创建驱动器或文件夹的图像，甚至显示您可以恢复的已删除文件。他们软件的这一部分是免费的。[FTK Imager 下载](http://www.accessdata.com/support/product-downloads)也许试一试。

    *   最后，学习使用 subversion 或其他版本控制软件（git、tfs），这样以后就不会发生这种情况并备份你的东西

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-09T06:52:22.333

对不起，我在 Visual Studio 2015 中解释，但选项是相同的，只需按照我的步骤操作即可。

第 1 步：打开解决方案资源管理器，右键单击您的项目，然后单击在文件资源管理器中打开文件夹。

第 2 步：打开文件资源管理器后按“Ctrl+z”键，这将撤消已删除的文件。

第 3 步：回到 Visual Studio，在解决方案资源管理器中按刷新图标，您会在虚线框中找到已删除的文件。 [在此处输入图像描述](http://i.stack.imgur.com/u4hrO.png)

第 4 步：右键单击 Dotted 文件并选择 Option include in project。 [在此处输入图像描述](http://i.stack.imgur.com/teAAz.png)

就是这样。现在您删除的文件已包含在项目中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-01T15:56:26.140

Windows 操作系统会在应用 Windows 更新时创建还原点。如果您损坏了代码模块，就像我今天所做的那样，您可以从 Windows 资源管理器中右键单击它并选择“恢复以前的版本”。相同的选项在文件夹级别可用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-31T08:52:06.770

转到 Visual Studio 解决方案 单击解决方案资源管理器上的“显示所有文件”图标 单击刷新 再次包含文件

您可以访问：[删除 Visual Studio 2015 中的 git 映射](https://stackoverflow.com/questions/32304977/remove-git-mapping-in-visual-studio-2015)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-10T09:15:30.913

解决方案中只有一个项目，我不小心删除了它。好消息是我在早期阶段就意识到了这一点，当我尝试关闭解决方案时，Visual Studio 要求我保存解决方案文件。我说不，当我重新加载该解决方案时，项目就在那里。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-02T06:28:10.150

是的，很容易恢复。

*   步骤 1: 去回收站并恢复已删除的项目。

*   第2步：在Visual Studio中，右键单击项目并单击添加>现有项目（在这里您可以添加已删除的项目）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-21T05:31:38.933

在顶部栏菜单上，选择`file`然后在下拉菜单中选择`Revert file` 删除的文件将被恢复。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-25T08:17:52.530

转到Visual Studio代码编辑器左侧的Source Control并单击它，您将看到已删除的文件，将鼠标悬停在文件上并单击Discard Change。您的文件将恢复 .![点击这里你会看到图像](../Images/5ffa0a1186bbfde5ca9abd7f5a557cfe.png)

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2019-02-06T05:59:56.930

只需转到回收站并按恢复即可。您将在软件文件的文件资源管理器中找到已删除的文件。

# java - Eclipse 格式注释在行首带有 /* 或 //？

> ID：14464816
> 
> 赞同：3
> 
> 时间：2013-01-22T17:45:20.217
> 
> 标签：java, eclipse, formatting

基本上，我希望 Eclipse Java 格式化程序格式化注释，所以`/*`or`//`位于行首，在第一个选项卡之前。

有谁知道任何允许这样做的设置？我注意到`Ctrl+/` *确实*这样做了，但是使用 Format 会撤消它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:51:23.323

我想你正在寻找

*   永远不要在第一列缩进行注释
*   永远不要在第一列缩进块注释

在 Preferences / Java / Code Style / Formatter / Edit... / Comments 下（在 Eclipse Juno SR1 中。）

# java - \xef\xbb\xbf comes in utf8 files java

> ID：14464819
> 
> 赞同：1
> 
> 时间：2013-01-22T17:45:33.260
> 
> 标签：java, file, utf-8, mapping

I want to upload a UTF-8 file, while I create utf8 file in windows environment automatically adds \xef\xbb\xbf this BOM in starting of the file.Problem is my file starting must be SOF because mapping tool will check this SOF.If I create normal ANSCII file it works ,When I save that file as UTF-8 it brings that unwanted BOM.Help me to create UTF-8 file without this BOM.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:49:29.693

您可以使用[Notepad++](https://notepad-plus-plus.org/)创建没有 BOM 的 UTF-8 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:09:39.540

我正在使用（免费）CodeLobster PHP Edition 来处理 php、html、css 和 javascript。保存文件后，它会询问您喜欢哪种类型 - BOM 或没有它。此外，可以将带有 BOM 的文件转换为无 BOM 格式。

您还可以使用任何可以删除文件前三个字节的工具，尽管从长远来看这会很痛苦......

[![物料清单](../Images/f783c3e21fac07007f75c0ef594f4f2f.png)](https://i.stack.imgur.com/KTBzR.jpg)
[（来源：[komprogram.pl](http://komprogram.pl/a_bom.jpg)）]

哦，使用此应用程序，如果 BOM 无法识别编码，您可以删除它。它是不可见的，但您只需将光标放在文件的开头并点击删除或退格键。

# sql - Is it necessary to have separate column for primary key in table?

> ID：14464820
> 
> 赞同：1
> 
> 时间：2013-01-22T17:45:37.793
> 
> 标签：sql, database

I have column having name id in my table. id is the primary key in table. I want to know that is it necessary to have separate column for id as it is primary key in my table.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:48:12.787

不必有一个单独的列，如果它可以唯一标识每条记录，您可以将现有列作为主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:50:40.933

在以下情况下，任何字段或字段组合都可以作为主键：

1.  这些字段中的值始终为非空值。
2.  在这些字段中具有值的记录是唯一的。
3.  这些字段是不可变的。也就是说，您不会在创建记录后更改这些字段的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:02:49.383

保持简单总是更好。如果您已经有一个标识记录的列，那很好 - 不要添加新的。

还有一种叫做复合主键的东西。如果 2 列或更多列的组合始终创建唯一序列，则可以使用它。比你真的不需要'Id'列。但事实是一些框架不喜欢这种方法。

在您的情况下，您已经拥有的列应该足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:31:49.077

PRIMARY KEY 约束唯一地标识数据库表中的每条记录，如果您的表已经包含该列，那么您不需要添加另一列。

# regex - Regex to say not this character in MongoDB

> ID：14464822
> 
> 赞同：4
> 
> 时间：2013-01-22T17:45:47.427
> 
> 标签：regex, mongodb

I'm doing some work with mongodb and Regex.

So, I have run:

```
{
   "email": /@/
} 
```

Now I want to say:

```
{
   "email": does not contain @
} 
```

any help would be appreciated

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T18:08:27.963

*   使用`{email: /^[^@]*$/}`.
*   或使用`{email: {$not: /@/}}`.

# ejb - Difference between @Stateless and @Singleton

> ID：14464823
> 
> 赞同：40
> 
> 时间：2013-01-22T17:45:56.240
> 
> 标签：ejb, ejb-3.1

I'm following [this tutorial](http://netbeans.org/kb/docs/javaee/cdi-intro.html) which also uses an EJB:

```
package exercise1;

import java.util.Random;
import javax.ejb.Stateless;
import javax.inject.Named;

@Stateless
public class MessageServerBean {
    private int counter = 0;

    public String getMessage(){
        Random random = new Random();
        random.nextInt(9999999);
        int myRandomNumber = random.nextInt();
        return "" + myRandomNumber;
    }

    public int getCounter(){
        return counter++;
    }    
} 
```

Here is an output example:

* * *

Hello from Facelets
Message is: 84804258
Counter is: 26
Message Server Bean is: exercise1.MessageServerBean@757b6193

* * *

Here's my observation:

*   When I set the bean as `@Stateless` I always get the same object ID and counter always increments.
*   When I set the bean as `@Stateful` I get a new instance every time I refresh the page.
*   When I set it to `@Singleton` I get the same results as when I set it to `@Stateless`: same object ID, counter incrementing.

So, what I actually would like to understand is: what's the difference between `@Stateless` and `@Singleton` EJBs in this very case?

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-22T19:12:05.200

您看到的是相同的输出，因为一次只有一个客户端访问 EJB。应用程序服务器能够为每次调用回收相同的无状态 EJB 对象。如果您尝试并发访问——同时有多个客户端——你会看到新的无状态实例出现。

请注意，根据服务器负载，即使是同一客户端进行的两次连续方法调用也可能最终出现在不同的无状态 EJB 对象中！

对于单例 EJB，没有区别——每个应用程序始终只有一个实例，无论有多少客户端尝试访问它。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-01-22T18:08:36.153

根据[Oracle 文档：](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipim)

> 单例会话 bean 提供与无状态会话 bean 类似的功能，但与它们的不同之处在于每个应用程序只有一个单例会话 bean，而不是无状态会话 bean 池，其中任何一个都可以响应客户端请求。与无状态会话 bean 一样，单例会话 bean 可以实现 Web 服务端点。

单例[不能被钝化：](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html#giprx)

> 与无状态会话 bean 一样，单例会话 bean 永远不会被钝化，只有两个阶段，不存在和准备好调用业务方法（...）

该文档解释了[何时使用每种 bean](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipmt)，并且 Singleton bean 具有以下内容：

> 单个企业 bean 需要由多个线程同时访问。
> 
> 应用程序需要企业 bean 在应用程序启动和关闭时执行任务。

因此，对于您的示例，两个注释之间没有区别。

# iphone - uitextfield hide by keboard animation not properly work with orientation change...?

> ID：14464825
> 
> 赞同：0
> 
> 时间：2013-01-22T17:45:59.077
> 
> 标签：iphone, animation, keyboard, orientation

when user tap on uitextfiel, I just animate view to up so, keyboard not hid that field. it work properly but in between that if I rotate device it not work properly.

my view code is as below

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));
}
-(void)textFieldShouldReturn:(id) sender
{
[sender resignFirstResponder];
}
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
[self animateTextField:textField up:YES];
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{
[self animateTextField:textField up:NO];
}
-(void)animateTextField:(UITextField*)textField up:(BOOL)up
{
const int movementDistance = -130;
const float movementDuration = 0.3f;

int movement = (up ? movementDistance : -movementDistance);

[UIView beginAnimations: @"animateTextField" context: nil];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationDuration: movementDuration];
self.view.frame = CGRectOffset(self.view.frame, 0, movement);
[UIView commitAnimations];
} 
```

when I tap on textfield, check below

![enter image description here](../Images/9ef7531deb7ee3de547867b3d6fcbbb4.png)

![enter image description here](../Images/bd3176e77213a9674b24ba00691186b0.png)

In this keyboard up position I just rotate my device, check below

![enter image description here](../Images/777e23395b38c1c9a5fa3136b7de719f.png)

when I tap on return on keyboard, check below

![enter image description here](../Images/ee7db5ed67621ac596451991fa756490.png)

you can see, the issue

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:49:12.183

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);

[textfield resign first responder];
} 
```

无论您使用什么功能，只需添加

```
[textfield resign first responder]; 
```

# xpages - Are JAR files in WebContent/WEB-INF/lib available to Java design elements in Domino Designer?

> ID：14464827
> 
> 赞同：4
> 
> 时间：2013-01-22T17:46:03.070
> 
> 标签：xpages, lotus-domino, lotus, xpages-ssjs

When using Domino Designer 8.5.3, I have a bunch of custom classes added using the Java design element. I want to use a 3rd party JAR in my custom classes in the same way you would when using external JARs in xPages SSJS, via Package Explorer:

WebContent-->WEB-INF-->lib

However my custom classes aren't picking the JAR up.

Is this a known limitation or have I got my configuration screwed up somewhere?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T18:03:42.363

他们在你做之后：

*项目 -> 属性 -> Java 构建路径 -> 库 -> 添加 JARS...*

**更新：**

Frantisek Kossuth 在他的评论中告诉我们一个不错的捷径：

> 在 Package Explorer 视图（Java 透视图，或将此视图添加到 XPages/Domino Designer 透视图）中，只需右键单击 JAR 文件并使用“构建路径/添加到构建路径”菜单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:11:00.533

我有一个类似的问题（[从托管 bean 中的导入 jar 访问方法](https://stackoverflow.com/questions/15142840/accessing-methods-from-imported-jars-in-managed-beans)）。看来您需要将它们导入您的机器/服务器的文件系统中。

# css - Use of !important statement in media query file?

> ID：14464831
> 
> 赞同：0
> 
> 时间：2013-01-22T17:46:21.403
> 
> 标签：css, media-queries

I'm using media queries for the first time for my portfolio website. I have to use `**!important**` statement when I need to alter, lets say, padding of a logo for a portrait version and also for a landscape version. I have an external stylesheet linked to my media query stylesheet and to over-ride styles from the main stylesheet I have to use important for my media query in order for it to listen to it.

The `!important` tags are stopping me from re-styling other devices further down the stylesheet because they are needed in order to style my ipad version of my website.

Seems that I can add a style into a query that is new like `display:none`, but if I need to add `padding-left:20px`, I need the `!important` tag to over ride the main stylesheet.

Can you help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:29:57.333

正如先前的答案所述，最好避免使用 !important ，除非在一些非常具体和有限的情况下。

如果您发现您正在使用它来覆盖样式，则可能是几个不同问题的症状。也许您正在使用`#header #logo`第一条规则中的高特异性选择器，并尝试在媒体查询块中使用 .logo 之类的类来覆盖它。

另一个原因可能是长选择器，例如`#header #header-inner .logo-wrap #logo`这也是一个非常糟糕的主意。更多来自 Harry Roberts 的信息，请访问[http://csswizardry.com/2012/05/keep-your-css-selectors-short/](http://csswizardry.com/2012/05/keep-your-css-selectors-short/)

没有看到你的代码很难知道，但总的来说，尽量缩短选择器并使用[模块化的 CSS 方法](http://smacss.com/)会有所帮助。

只是为了添加到chipcullen的列表中何时可以使用！important：

*   在 HTML 电子邮件中
*   如果您需要一个辅助类来覆盖所有内容，例如 .valid 或 .hidden
*   覆盖使用它的浏览器默认样式表

如打印样式表中所述，以及使用无法更改的第 3 方代码时。

（我不同意它应该用于覆盖 JavaScript 注入的样式，因为有更好的方法可以通过操作类名来实现相同的目的，从而回避问题。classList API 使这非常容易，并且也有可用的 polyfill。 )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:18:17.390

正如第一位评论者所说，我们需要看一些代码。

总体而言，听起来您遇到了特异性问题。`!important`除了以下三种情况，您真的不需要使用：

*   覆盖 JavaScript 应用的样式
*   在打印样式表中
*   更改从外部源加载的元素，您无法编辑原始样式

当涉及到媒体查询和特异性时，请记住顺序很重要。如果选择器具有相同级别的特异性，则最后一个获胜。一般来说，使用媒体查询构建样式表的一个好方法是：

1.  在大多数情况下适用的全局样式 - 从移动尺寸设备开始（即“移动优先”）
2.  稍后的媒体查询会“增加”大小 - 越来越大，并根据需要应用样式覆盖

# jquery - css navigation menu

> ID：14464836
> 
> 赞同：0
> 
> 时间：2013-01-22T17:46:30.007
> 
> 标签：jquery, css

I am trying to make a navigation menu without using any image by CSS. But I don't know how to have those triangular border line at the end of each menu items. Following image would make my idea more clear:![enter image description here](../Images/114291f7d8e136afe80f3ad784d64c72.png)

any good turorial of CSS or JQuery would be a GREAT help!

Thanks a lot!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:49:26.963

这个网站是你可以通过 CSS 创建的各种形状的一个很好的例子。希望这可以帮助！

[http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

例如，您可以使用以下 CSS 创建一种“雪佛龙”

```
#chevron {
  position: relative;
  text-align: center;
  padding: 12px;
  margin-bottom: 6px;
  height: 60px;
  width: 200px;
}

#chevron:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 51%;
  background: red;
  -webkit-transform: skew(0deg, 6deg);
  -moz-transform: skew(0deg, 6deg);
  -ms-transform: skew(0deg, 6deg);
  -o-transform: skew(0deg, 6deg);
  transform: skew(0deg, 6deg);
}
#chevron:after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: 50%;
  background: red;
  -webkit-transform: skew(0deg, -6deg);
  -moz-transform: skew(0deg, -6deg);
  -ms-transform: skew(0deg, -6deg);
  -o-transform: skew(0deg, -6deg);
  transform: skew(0deg, -6deg);
}​ 
```

您当然可以根据需要旋转 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:51:12.763

你将很难在没有图像的情况下制作这些多边形。查看[CSS Sprites](http://www.alistapart.com/articles/sprites/)。我认为创建重新定位背景图像以实现您正在寻找的显示效果将完全满足您的需求。

# mysql - 主键自动递增

> ID：14464837
> 
> 赞同：2
> 
> 时间：2013-01-22T17:46:36.320
> 
> 标签：mysql

我有一个包含两个表的数据库，目前每个表都有 3 列。

**表**_A**：`id`，，，`uid``url`**

 ****表**_B**：`id`，，，`uid``url`**

 **是在插入的每个新行上自动递增的`id`主键。`1`

我的问题是我还需要主键吗？我永远不会在数据库中查询`id`. 该`uid`列只是按用户分开，因此每行不是唯一的。 *`Table_A`*并且*`Table_B`*会经常被比较`uid`。我已经索引了`uid`，`url`我希望该表可能会增长数十亿，我不想在`id`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:55:29.240

如果您使用 InnoDB，并且不声明主键列，InnoDB 将使用 6 字节整数为您创建一个。因此，您通过删除 id 列获得的唯一好处可能是将 8 字节 BIGINT 换成 6 字节隐式 PK 列。

原因是 InnoDB 表存储为 B 树，即基于主键的聚集索引。每个表都必须有一个用于组织此 B 树的列，即使它是隐式创建的列。

您还可以声明具有复合主键的表：

```
CREATE TABLE Table_A (
  uid INT NOT NULL,
  url VARCHAR(100) NOT NULL,
  PRIMARY KEY (uid, url)
); 
```

在这种情况下，主键的要求得到满足，并且 InnoDB 不创建隐式列。

* * *

回复您的评论：

I try not to use MyISAM. MyISAM is more susceptible to data corruption than InnoDB, and usually InnoDB performs better because it caches both data and indexes. It's true there are some cases where MyISAM can use less disk space, but disk space is cheap and I'd much rather get the benefits of InnoDB.

Regarding indexes, if you have `PRIMARY KEY(uid, url)` then you automatically have a compound index over those two columns. No need to create an extra index on uid.

But if you have queries that search for url alone, without looking for a specific uid, then you need a separate index on url.

I talk more about index design in my presentation: [How to Design Indexes, Really](http://www.slideshare.net/billkarwin/how-to-design-indexes-really)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:53:35.840

从技术上讲不是，尽管这是一种很好的做法，而且您永远不知道您未来的要求是什么。如果您最终需要一个独特的`id`列而没有，这可能是一个非常令人头疼的问题。在我看来，列上“浪费”的开销数量`id`绝对值得。

此外，根据 和 之间的关系`Table_A`，`Table_b`您最终可能会有一个中间表来定义它们之间的关系（例如`one-to-nany`，`many-to-many`）。对于这种场景下的高效查询，唯一`id`列成为必需品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:51:20.183

您不需要这些`id`列，但在我看来，您的“主”键是`uid-url`****

# ms-access - Build an Access executable from command line?

> ID：14464839
> 
> 赞同：2
> 
> 时间：2013-01-22T17:46:43.687
> 
> 标签：ms-access, msbuild

We have a legacy Access application that is still in production. I would like to at least have an automated build for it. Can you build access exe's from the command line?

Even better, there wouldn't by any chance, be an MSBuild target for Access would there?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-19T12:33:16.663

这适用于我 2010 年。需要一些时间来管理它。

```
Function makeAccde()
    Dim source, temp, target As String
    DoCmd.RunCommand acCmdCloseAll 
    source = CurrentProject.path & "\" & CurrentProject.name
    temp = CurrentProject.path & "\" & "_tmpCompile.accdb"
    target = Left(source, Len(source) - 1) & "e"  'you can also use "r"
    Dim db As New Access.Application
    DoCmd.RunCommand acCmdCompileAndSaveAllModules

    Set aFSO = CreateObject("Scripting.FileSystemObject")
    aFSO.CopyFile source, temp, True

    db.AutomationSecurity = msoAutomationSecurityLow
    db.SysCmd 603, temp, target
    db.Quit
    Kill temp
    Application.Quit ' if you do not quit current db, sometimes target file is corrupted.
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T20:26:09.840

您可能可以编写一个 Windows 脚本，从而具有命令行能力。

但是，尚不清楚为什么您不使用工具菜单中的选项？它不像这里的构建时间会很长。

菜单中用于将应用程序编译为访问可执行文件的选项可在此处找到：

Access 在其 20 年的历史中从未也确实生成过 .exe 文件，但将应用程序编译为 access 可执行文件的行为已成为大约 20 年的选择和选项。

因此，您似乎混淆或混淆了访问可执行文件（mde 或现在的 accde 文件）和 .exe 文件的术语。在访问方面，它们当然不是一回事。事实上，在今天，.exe 文件的概念确实没有实际意义。较旧的 FoxPro 分发工具只是简单地封装了运行时并在 p-code 系统前面添加了一个 .exe——尽管具有 .exe 文件扩展名，但从某种意义上说，它实际上从来都不是真正的可执行文件。

然而，今天大多数系统确实需要一个扩展的运行时系统。

所以请记住，就像过去使用 .net 甚至 VB6 一样，您将要求编译的 Access 可执行文件首先在目标计算机上安装支持运行时文件。然而，这与我们当今行业中的大多数主流开发工具没有什么不同。

. 因此，像 C#、vb.net 或 VB6 甚至 Java 一样，我们行业中的许多主流工具确实需要安装一组支持的运行时文件和库，然后才能在目标机器上运行已编译的应用程序。和 VB6、vb.net、C# 甚至 Java（注意我说的是 Java，而不是 JavaScript）一样，一旦在目标计算机上安装了运行时和支持库，通​​常可以通过简单的文件副本部署应用程序（xcopy 开发）。因此，在这方面，Access 再次与 Java 或 .net 大致相同。（您不必安装可执行文件 - 只需复制它，但这样的设置仅在您安装正确的支持运行时文件后才有效）。

请记住，Access 的一个缺点是支持库是办公室的共享组件。因此，功能区库、PDF 创建、图像渲染、拼写检查等都是 Word、Excel、Access、PowerPoint 等之间的通用代码共享库。

由于上述原因，如果安装了您正在使用的特定版本的 office（和 Access）的任何部分，则 Access 运行时的安装将被强制安装到与现有 office 安装相同的目录结构中。您无法更改此安装位置。请注意，反过来也是如此！– 如果您将 Access 运行时直接安装到自定义中，则 Excel、Word 和所有办公程序的安装将被强制安装到与您放置 Access 运行时文件的位置相同的目录中。如前所述，办公程序和 Access 之间的共享组件数量相当大的原因是这种组合的一部分。

由于这种大的依赖关系，除了运行时支持文件的直接固定位置之外，还会导致一些重大问题：

共享部件 = 只能安装一个版本的 Excel 或 Word 或 SAME 办公版本的 Access。因此，如果计算机已经安装了相同版本的 Office，但位格式不同，则无法安装 64 位版本的 Access 运行时。这意味着如果计算机安装了 Office 32 位 2010，则无法安装 Access 2010 运行时的 64 位版本。（您可以安装 2013 运行时或说 2007）。

此外，如果已安装 Access（完整版或运行时支持版），则无法安装运行时的第二个副本 - 安装程序将使用现有安装。

归根结底，上述所有结果意味着您为 Access 安装的运行时文件将依赖于该版本的 office，因此这种依赖关系会使 Access 应用程序的分发成为一个真正的挑战。不幸的是，虽然 Access 有一个编译器，但它没有链接器，因此无法链接 + 获取这些依赖项并创建一个单独的 dll 库。如果没有此功能，则 Access 可执行文件需要与 Access 运行时系统一起安装这些 office 支持文件。

如果您需要或需要在对已安装的现有 Office 版本的干扰最小的机器上安装 Access 运行时，那么建议采用商业安装程序以及来自 Sagkey 的一些脚本：

[http://www.sagekey.com/installation_access.aspx](http://www.sagekey.com/installation_access.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T19:49:42.540

```
a = CreateObject("Access.Application")
If a.SysCmd(603, PATH_TO_BXB_FILE, PATH_TO_BXE_FILE) = 0 Then
    MsgBox("Fail to compile to MDB file")
End If 
```

[syscmd](http://msdn.microsoft.com/en-us/library/office/aa199129%28v=office.10%29.aspx)的 603 参数未记录。它会因多种原因而失败，例如，在 VBA 下运行，如果您不使用单独的 MS Access 实例，它将失败。在[此](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/6d0133ed-b8a8-46bb-aa48-bd40c9b41231/)，其他失败的原因如下：

> *   当它用于在单独的 Access 数据库（与解决方案数据库分开）中运行的 VBA 代码中时；
> *   当解决方案数据库关闭时；和
> *   当解决方案数据库中的 VBA 代码中没有语法错误时。

请注意，即使创建成功，生成的 mde 或 accde 也可能无法在另一台机器上运行。在大多数情况下，我发现 Access 2010 是最宽容的，但是，您最终会收到令人讨厌的安全警告。

# vb.net - VB.NET in VS2010 - Trying to read in a csv that can contain currency signs

> ID：14464841
> 
> 赞同：1
> 
> 时间：2013-01-22T17:46:47.843
> 
> 标签：vb.net, visual-studio-2010, csv, character-encoding

I'm working on an application that will read in delimited files and display the first few rows on a datagridview, it will then use certain elements from these rows to do a SQL query (postcode lookup). I had it all working fine until we got some data where one of the column values contained a £, when it displays in the datagrid it looks like a diamond with a ? in it but even worse when it writes the file back out (with the SQL result added) it comes out as ï¿½

I thought I probably needed to specify the encoding but I was using the following which has no encoding setting that I can find:

```
 Sub ParseFile(inputfile)
    Dim dataFile = My.Computer.FileSystem.OpenTextFieldParser(inputFile)
    Using dataFile
        dataFile.TextFieldType = FileIO.FieldType.Delimited
        If DelimiterComboBox.SelectedItem = ".csv" Then
            dataFile.SetDelimiters(",")
        ElseIf DelimiterComboBox.SelectedItem = ".txt" Then
            dataFile.SetDelimiters(vbTab)
        End If
        Dim currentRow As String()
        currentRow = dataFile.ReadFields() 
```

I tried changing that to use a TextFieldReader which would allow the Encoding to be specified but I can't pass the filename in as a variable then as I get conversion errors. I then tried defining a variable as a stream of the filename but then I get: Unable to cast object of type 'System.String' to type 'System.IO.Stream'.

I'm thinking that I need to construct a stream from the filename somehow and feed that into the "dataFile" object so I can then control (or even detect) the encoding.

I should point out that this app needs to work with various delimited files (.csv, tab and pipe being the most common).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:06:59.633

尝试

```
Using dataFile As TextFieldParser = My.Computer.FileSystem.OpenTextFieldParser(New System.IO.StreamReader(inputFile, encoding))
...
End Using 
```

有关可以为参数指定的内容的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/system.text.encoding(v=vs.90).aspx 。](http://msdn.microsoft.com/en-us/library/system.text.encoding(v=vs.90).aspx)`encoding`

# python - 使用 python 和烧瓶将日期对象写入 riak（jsonification 过于复杂）

> ID：14464847
> 
> 赞同：0
> 
> 时间：2013-01-22T17:47:17.217
> 
> 标签：python, json, date, flask, riak

我一直在为自己做一个小项目，我使用 riak、python 和 flask 框架。像在大多数情况下一样，我想存储存储在 riak 中的对象的创建日期，以及其他一些日期（如会话到期日期）。当我第一次尝试只存储日期对象时，我遇到了一个错误，解决方案是使用如下代码：

```
def date(obj):
    return obj.isoformat() if hasattr(obj, 'isoformat') else obj

def json_date():
    return json.dumps(datetime.now(), default=date) 
```

我已经测试过它，并且很高兴地使用它，但后来我遇到了一些更复杂的需求，即 N 分钟后的会话到期日期，所以我很快写了这样的东西：

```
def json_session_expiration_date():
    return json.dumps(datetime.now() + timedelta(minutes=15), default=date) 
```

现在我的应用程序的核心已经工作了，我想在开始编写更多功能之前清理愚蠢和次优的代码，我遇到的一个问题是这三个功能 - 我不清楚日期的目标是什么(obj) 函数，因此我不能轻松地将它们全部加入一个函数中。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:19:46.457

Using`date.isoformat()`将返回 ISO8601 格式的日期字符串，这是在 Riak 中处理日期的方式。然后可以在 map/reduce 期间将日期字符串转换回 javascript 中的 Date 对象，或者在 reduce 阶段简单地排序为字符串。

如果您使用默认参数，`json.dumps()`您当然应该遵循 Martijn Pieters 示例并`TypeError`在对象不具有`isoformat()`属性时引发 a - 只有`Date`and`DateTime`对象将具有该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:01:20.760

`date`函数用作`default`函数的[`dumps`函数](http://docs.python.org/2/library/json.html#json.dumps)；对于 JSON 不知道如何处理的任何类型，都会调用该函数。

JSON 标准只知道数字、字符串、布尔值、空值（python 中的 None）、对象（python 中的字典）和列表。如果您想处理该有限类型集之外的任何内容，则需要根据这些类型来表达“某事”。

`default()`用于该目的；任何不能按原样序列化为 JSON 的对象都会调用它。`datetime`对象就是这样一种类型。当你成为一个`datetime`对象时`json.dumps()`，该`default`函数将被要求创建它的可序列化版本。

请注意，返回`obj`不是处理您不知道如何转换的类型的正确方法。`TypeError`改为提高：

```
def date(obj):
    try:
        return obj.isoformat()
    except AttributeError:
        raise TypeError() 
```

# ruby-on-rails - 未初始化的常量 Mercury

> ID：14464848
> 
> 赞同：1
> 
> 时间：2013-01-22T17:47:18.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, mercury-editor

我无法设置 Mercury。

我完成了自述文件中的步骤，安装了 gem 并生成了 Mercury 资产。

但是，当我访问`/editor`路径时没有任何反应，并且当我运行时`rake routes`，我收到此错误：

```
uninitialized constant Mercury 
```

我在 Rails 3.2.11 和 Ruby 1.9.3 上，在 Mongoid 服务器上运行。

我是否忽略了一些明显的东西，还是宝石中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:13:17.573

这是我为使其工作所做的工作。不完全确定它为什么起作用：

好像我必须在我的 application.rb 中需要水银：

```
require 'mercury/rails' 
```

你认为这是应该怎么做还是我的水银宝石表现得好笑？

# linux - 使用 tar 将多个源目录中的文件收集到一个普通存档中

> ID：14464855
> 
> 赞同：1
> 
> 时间：2013-01-22T17:47:45.823
> 
> 标签：linux, posix, archive, tar

我现在正在寻找几个小时来让 tar 跳过所有目录结构。

获得我想要的最接近的方法如下：

`tar cf foo.tar -C /data/2012/12/12/00 . -C /data/2012/12/12/01 . -C /data/2012/12/12/03 .`

问题：存档中的所有文件都位于“。” -文件夹。但是它们应该在存档的根目录中。

有人给我提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:00:58.317

我想你想要 --transform 选项：

```
--transform 's,^\./,,' 
```

我用类似的 -s 选项在 BSD 上尝试了这个，它对我有用。

# c - 用于通过有损串行链路重新传输的用户模式 TCP 堆栈

> ID：14464861
> 
> 赞同：2
> 
> 时间：2013-01-22T17:48:03.223
> 
> 标签：c, linux, windows, tcp, serial-port

我相信我的问题是：

PC 操作系统上是否有一个简单的用户模式 ​​TCP 堆栈，可用于通过有损串行链路与基于 Linux 的设备交换数据？

这是更多上下文：

我有一个基于 Linux 的设备通过串行链路连接到 PC。串行链路是有损的，因此在两个设备之间发送的数据有时需要重新传输。目前，该系统使用自定义协议，其中包括帧、寻址（用于路由到 Linux 设备内的不同进程）和不那么健壮的重传算法。

在 Linux 设备端，可以方便地替换自定义协议，通过串行链路实现 SLIP，并使用 TCP 进行所有通信。问题是在 PC 端，如果不引入我们不需要的通用 IP 路由，我们不确定如何使用主机的 TCP 堆栈。如果有可用的用户模式 ​​TCP 堆栈，我似乎可以将其集成到 PC 应用程序中。到目前为止，我发现的唯一 TCP 堆栈是用于微控制器的。它们可以被移植，但如果有更现成的东西就好了。或者是否有一些特殊的方法可以使用操作系统的内置 TCP 堆栈，而无需管理权限或冒着与真实以太网接口发生 IP 地址冲突的风险。

最后，只是为了让解决方案专注于 TCP，是的，还有其他解决方案可以解决这个问题，例如使用 HDLC 或只是修复我们的自定义协议。但是，我们想进一步探索 TCP 路由，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:08:58.370

看来评论已经回答了你的问题，但也许要澄清一下；不，不使用 IP 就不能使用 TCP。TCP 是建立在 IP 之上的，它不会以任何其他方式工作。

PPP 是一种通过串行链路建立 IP 连接的好方法，但如果您在计算机的两端都没有管理访问权限，这可能会很困难。172.16.x、10.x和192.168.x被定义为对本地网络开放，所以你应该可以找到一组不干扰本地计算机网络运行的IP地址。

从无配置、无依赖的角度来看，自己搞定成帧/重传协议应该不会太难，如果不需要互操作性，可能是最好的选择。话虽如此 kermit，{z,y,z} 调制解调器将提供更好的性能和编码标准。

最后，您也许可以使用 socat 之类的东西来进行协议转换。即将串行流连接到 TCP 端口。这不会解决数据可靠性/重新传输问题，但它可能是您正在寻找编程的接口。

# javascript - 在 java servlet 和 javascript 中处理 csv/json 数据

> ID：14464864
> 
> 赞同：0
> 
> 时间：2013-01-22T17:48:13.880
> 
> 标签：javascript, json, servlets

我需要关于如何解决我的问题的意见。我不知道如何开始以及如何在软件的哪些部分实现哪些功能。所以这就是我想要做的：

我有一个 Java servlet，它创建了一个简单的 csv 文件：

```
name1, value1
name2, value2 
```

等等

这需要以某种方式转换为 JSON 数据，以便在 jsp 页面上显示：

```
[
    {
        "name": "name1",
        "value": "value1"
    },
    {
        "name": "name2",
        "value": "value2"
    }
] 
```

然后用户将被重定向到jsp页面。是否可以通过请求对象将整个 JSON 结构发送到 jsp 页面？或者，如果所有处理都在 javascript 中完成并且只有 csv 文件的路径是通过请求对象发送的，那么它是最简单的吗？

我有点迷失了这一点，因为我上周刚开始编写 Web 应用程序。我只需要朝着正确的方向前进，然后我应该能够自己解决剩下的问题；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:52:04.340

首先，寻找可以将[CSV](http://google.com/search?q=java%20csv%20parser)文件转换为`List<Bean>`或`List<Map<K,V>>`.

然后，寻找可以将 a或转换为 JSON 字符串的[JSON 解析器。](http://google.com/search?q=java%20json%20parser)`List<Bean>``List<Map<K,V>>`

最后，只需进行数学运算并将生成的 JSON 字符串设置为您在 JSP 中打印的请求属性，就好像它是 JS 变量一样，如下所示`<script>var data = ${data};</script>`。

# xml - 使用编码将 byte() 变量转换为字符串

> ID：14464865
> 
> 赞同：0
> 
> 时间：2013-01-22T17:48:15.020
> 
> 标签：xml, visual-studio-2010, character-encoding

我正在使用消息，并且消息以 byte() 格式存储，我尝试使用正确的编码将其转换为字符串，但在将其写入文件时仍会看到 unicode 字符。我在这里做错了什么

```
 xwriter = New XmlTextWriter(filename,Encoding.UTF8)
 Dim body As String = System.Text.Encoding.UTF8.GetChars(result.Body)
'body = replaceIllegalXMLChars(body)  ///tried converting them explicitly but did not work
 xwriter.WriteString(post)
 xwriter.Flush() 
```

样本输出：

```
 &lt;avataruri&gt;http://a0.twimg.com/profile_images/1651487744/Vman_normal.jpg
   &lt;/avataruri&gt;
   &lt;suitable&gt;0&lt;/suitable&gt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:51:27.740

你在滥用`XmlTextWriter`.

`XmlTextWriter`通过转义文本和编写标签名称来帮助您生成自己的 XML。
调用`WriteString()`会将您传递的文本写入 XML*内容*，正确转义特殊字符。

如果你有一个现有的 XML 字符串，并且你想将它写入一个文件，你应该像任何其他字符串一样使用`File`类来编写它。

您甚至不需要解码字节；您可以将它们直接写入磁盘。

# ruby-on-rails - RVM+Apache+Passenger+Bundler 不和谐。SubUri 上的错误 404

> ID：14464869
> 
> 赞同：0
> 
> 时间：2013-01-22T17:48:25.320
> 
> 标签：ruby-on-rails, apache, rvm, http-status-code-404, passenger

我花了一整天的时间试图弄清楚我的 SubUri 出了什么问题。它基本上在 Web 服务器中运行两个 Rails 应用程序，第一个应用程序*myapp1*在根目录上运行，第二个应用程序*myapp2*在 /api/v1 上运行。

问题是，当我启动服务器时，只有网站根目录上的 myapp1 有效，*网络*服务器 /api/v1 上的 myapp2 返回 404 错误*。*

我认为这是 gem 的问题，乘客没有使用*myapp2*的 gem ，保留在*共享*文件夹中（由于 capistrano），但是在寻找如何使用 RVM、Bundle 和 Passenger 解决这个问题时，我只得到了部署上的*“需要“Bundler/Capistrano””*可以解决，但这无济于事。

我不知道该怎么做。**拜托**，有人可以在这里给我一点帮助吗？

**阿帕奇配置：**

```
<VirtualHost *:80>
  ServerName myserver.com
  DocumentRoot /home/deploy/myapp1/current/public
  RailsBaseURI /
  <Directory /home/deploy/myapp1/current/public>
    AllowOverride all
    Options -MultiViews
  </Directory>

 RailsBaseURI /api/v1
    <Directory /home/deploy/myapp1/current/public/myapp2/v1/current/public>
        Options -MultiViews
    </Directory>

</VirtualHost> 
```

**/var/log/apache2/error.log 中的错误：**

```
[Tue Jan 22 14:36:52 2013] [notice] caught SIGTERM, shutting down
[Tue Jan 22 14:36:53 2013] [notice] Apache/2.2.22 (Ubuntu) PHP/5.3.10-1ubuntu3.4 with S$ 
```

# rest - 如何平衡 REST api 和 Openedness 以防止数据被盗

> ID：14464870
> 
> 赞同：1
> 
> 时间：2013-01-22T17:48:28.077
> 
> 标签：rest, backbone.js

我们的一个网站是一个常见的“免费宣布您的公寓”。收入与公众使用和注册公告的数量直接相关（我们营销部门的论点）。

另一方面，REST 在设计您的 api（我们软件部门的论点）时推动保持清晰的 api，这是对任何竞争对手的数据窃取邀请。在这个视图中，Web 服务器几乎变成了一个智能数据库。

我们清楚地确定了我们的问题，但不知道如何解决这些限制。任何提示会有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:00:04.877

通过 IP 限制对数据丰富元素的调用，例如每天 1000 次（或普通用户使用的三倍）

如果您公开数据，则可能会被盗。并考虑返回大型数据集的搜索元素，即使它们是由 javascript 或表单发起的——我个人已经编写了规避这些问题的拖网渔船。

您可能还会考虑（如果数据如此重要）基于从服务器发送的密钥和身份验证在客户端解密它（但这只会提高标准而不是窃取的能力。

为扫描速度过快或过多的用户添加验证码/重新验证码。

简而言之：

*   一如既往只公开最小的 API 来完成这项工作（攻击面最小化）
*   记录和限制
*   强制登录（？）。这至少可以推迟一些扫描仪
*   为您认为可能是机器人拖网您的数据的用户使用 capthca 机制

# wpf - WPF 上的样式菜单项

> ID：14464871
> 
> 赞同：0
> 
> 时间：2013-01-22T17:48:34.860
> 
> 标签：wpf, wpf-controls

我正在开发 WPF 上的菜单。我有这个菜单到现在：

![在此处输入图像描述](../Images/fdf780abd8b698c4813241195a3762f7.png)

当菜单悬停时，它看起来像`Users`menuItem。这是后面的代码：

```
 <Menu Grid.Column="0" Name="menuNavigation" >
            <MenuItem Header="Users" >
                <MenuItem Header="Register user">
                    <MenuItem ToolTip="Register new user on database." />
                </MenuItem>
                <MenuItem Header="Admin users">
                    <MenuItem ToolTip="Update or delete a user." />
                </MenuItem>
            </MenuItem>
            <MenuItem Header="Identify">
                <MenuItem ToolTip="Start an identification." />
            </MenuItem>
            <MenuItem Header="Authenticate">
                <MenuItem ToolTip="Start an authentication." />
            </MenuItem>
            <MenuItem Header="Cameras">
                <MenuItem ToolTip="Manage connected cameras." />
            </MenuItem>
        </Menu> 
```

我希望那个浅蓝色边框消失，我试图模拟一种特殊效果。当我将它悬停时，我想要一种围绕单词的白色括号，就像强调它一样。

任何人都可以给我一个关于如何开始的想法吗？

**编辑：** 我可以访问该`IsMouseOver`事件，但它似乎忽略了我。我现在有这个样式：

```
 <!-- Menu navigation properties -->
<Style TargetType="Menu">
    <Setter Property="Background" Value="{DynamicResource TopMenuGradient}" />
    <Setter Property="HorizontalAlignment" Value="Right" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="FontFamily" Value="Calibri" />
    <Setter Property="FontSize" Value="18" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="Height" Value="50" />
</Style>
<!-- MenuItem Style -->
<Style TargetType="MenuItem">
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="Height" Value="50" />
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True" >
            <Setter Property="Foreground" Value="LightGray" />
            <Setter Property="Background" Value="White" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

我可以删除浅蓝色边框，但我想更改`Background`属性，但`MenuItem`样式似乎忽略了我......部分。我的意思是：`Foreground`工作......但不是`Background`！怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:51:09.990

这是来自 codeproject的有用[链接。](http://www.codeproject.com/Articles/442856/Visual-Studio-2012-Metro-Styles-for-WPF#screenshots)关于悬停，WPF Grid 控件同时支持 MouseEnter 和 MouseLeave 事件。您应该能够为两者连接事件处理程序。

也看看[这个](http://social.msdn.microsoft.com/Forums/en/wpf/thread/052b5170-c3f9-49ea-b8e6-0bea4c3f9b82)

# node.js - 尽管有活动，ExpressJS 会话仍将到期

> ID：14464873
> 
> 赞同：27
> 
> 时间：2013-01-22T17:48:43.507
> 
> 标签：node.js, session, express, session-cookies

由于[快递组没有答案](https://groups.google.com/forum/#!topic/express-js/Ve-2n-ZbZG4)，因此将这个问题提交给 SO 。

我正在设置会话 maxAge = 900000 并且我看到会话 cookie 上的 expires 属性设置正确。但是，在后续请求中，超时不会被延长。它永远不会扩展，cookie 最终会过期。

[会话中间件文档](https://github.com/senchalabs/connect/blob/master/lib/middleware/session.js#L137)说 Session#touch() 不是必需的，因为会话中间件会为我做这件事。我实际上尝试`req.session.touch()`手动调用但什么也没做，我也尝试设置 maxAge`req.session.cookie`并且什么也没做:-(

我是否在某处缺少自动扩展活动会话的设置？除了在每个请求上手动重新创建 cookie 之外，还有其他方法可以在最终用户活动后延长会话超时吗？

* * *

**编辑：**我在 express v3 中遇到了这个问题。我不是 100% 确定，但我认为来自[快速变更日志](http://tjholowaychuk.com/post/34189797102/express-3-0)的注释可能是罪魁祸首：

> *   [将 session() 更改为仅在修改时设置 cookie（散列会话 json）](http://tjholowaychuk.com/post/34189797102/express-3-0)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-07-17T03:25:27.203

滚动会话现在存在于快速会话中。在选项中将 rolling 属性设置为 true ，它将通过设置 maxAge 偏移量重新计算到期值，应用于当前时间。

[https://github.com/expressjs/session/issues/3](https://github.com/expressjs/session/issues/3)

[https://github.com/expressjs/session/issues/33](https://github.com/expressjs/session/issues/33)

[https://github.com/expressjs/session](https://github.com/expressjs/session)（搜索滚动）

例如，请注意`rolling`：

```
app.use(session({
  secret: 'a secret',
  cookie: {
    path: '/',
    httpOnly: true,
    secure: false,
    maxAge: 10 * 60 * 1000
  },
  rolling: true
})); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-25T20:30:14.213

如果其他人有同样的问题，这是解决方案：

```
function (req, res, next) {

    if ('HEAD' == req.method || 'OPTIONS' == req.method) return next();

    // break session hash / force express to spit out a new cookie once per second at most
    req.session._garbage = Date();
    req.session.touch();

    next();

} 
```

# android - 应用程序安装显示“未安装应用程序”

> ID：14464875
> 
> 赞同：1
> 
> 时间：2013-01-22T17:48:51.527
> 
> 标签：android

我正在开发一个应用程序，我正在尝试与几个朋友分享它，以便他们进行测试。[我使用这个http://www.androiddevelopment.org/tag/apk/](http://www.androiddevelopment.org/tag/apk/)方法创建了一个密钥。该应用程序可以毫无问题地安装在手机上，但是当我实际单击该图标以启动该应用程序时，它会显示“未安装应用程序”。考虑到我在我的应用程序列表中看到它并且我的应用程序抽屉中有一个图标，这非常奇怪。怎么了？我回答页面底部的问题。这是工作正常的新 XML 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.test"
android:versionCode="1"
android:versionName="1.0"
android:installLocation="auto">

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name = ".SQLView" android:label ="@string/app_name"
        android:exported="false">
        <intent-filter>
            <action android:name="com.example.test.SQLVIEW" />
            <category android:name="android.intent.category.DEFAULT" />      
        </intent-filter>
    </activity>

    <activity android:name = ".Add_Flashcard" android:label ="@string/app_name"
        android:exported="false">
        <intent-filter>
            <action android:name="com.example.test.ADD_FLASHCARD" />
            <category android:name="android.intent.category.DEFAULT" />      
        </intent-filter>
    </activity>

    <activity android:name = ".Flashcards_List" android:label ="@string/app_name"
        android:exported="false">
        <intent-filter>
            <action android:name="com.example.test.FLASHCARDS_LIST" />
            <category android:name="android.intent.category.DEFAULT" />      
        </intent-filter>
    </activity>

    <activity android:name = ".Edit_Flashcard" android:label ="@string/app_name"
                android:exported="false">
        <intent-filter>
            <action android:name="com.example.test.EDIT_FLASHCARD" />
            <category android:name="android.intent.category.DEFAULT" />      
        </intent-filter>
    </activity>

    <activity android:name = ".Decks_List" android:label ="@string/app_name"
        android:exported="false">
        <intent-filter>
            <action android:name="com.example.test.DECKS_LIST" />
            <category android:name="android.intent.category.DEFAULT" />      
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:37:10.070

我发现了问题所在。当我想直接通过 Eclipse 导出应用程序（还添加密钥库和所有内容）时，我进入了包选项，并通过选项重命名了包。这显然没有重命名所有内容，它还将 .R 插入到我所有的类中。此外，当您重命名包时，您的类中的包导入将保持不变。重命名时，请确保所有内容都已适当更改，因为显然这是 Eclipse 中的一个已知错误。这反过来又导致了那个奇怪的错误，因为不同的包与里面的包不匹配……超级奇怪。

# c++ - 如何为运行时构建的菜单正确设置通用 QT 操作？

> ID：14464884
> 
> 赞同：0
> 
> 时间：2013-01-22T17:49:09.467
> 
> 标签：c++, qt, qt4

我正在从我的应用程序启动时读取的 xml 文件中的条目中填充系统托盘图标菜单 (QMenu)。

我不确定如何正确设置动作的 SLOT 端：

```
QList<CMenuItem> menuItems = m_layout->getMenuItems();   
QListIterator<CMenuItem> iter(menuItems);
while (iter.hasNext())
{
    CMenuItem menuItem = iter.next();    
    QAction *action = new QAction(menuItem.qsTitle, this);
    connect(action, SIGNAL(triggered()), this, SLOT(launchMenuItem()));
    trayIconMenu->addAction(action);
} 
```

我的“launchMenuItem()”SLOT 如何知道触发了哪个菜单项？我无法为每个菜单项创建一个 SLOT，因为在运行之前我不知道有多少项存在。

我可以想到一些丑陋的方法来做到这一点，但我正在寻找正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:19:19.743

我通常做的是用来`QAction::setData(const QVariant&)`存储我需要的任何操作 ID。然后在插槽端，我检索 ID`QAction::data()`并采取相应的行为。请注意，`QVariant`显然接受的不仅仅是基本 int （这是我用来识别操作的），您可以传递任何`QVariant`-compatible 信息。

编辑：哦！顺便说一句，这有点难看，因为我利用它`QObject::sender()`来将触发的动作施放回去。很抱歉，但它仍然有效。

# c++ - VxWorks 的 GCC 交叉编译器无法编译 C++

> ID：14464887
> 
> 赞同：3
> 
> 时间：2013-01-22T17:49:27.850
> 
> 标签：c++, gcc, cross-compiling, vxworks

我正在尝试移植一个 Linux 库以在 VxWorks 上运行。我已成功构建 binutils 和 gcc 以针对**i486-wrs-vxworks**，并且可以成功构建一个简单的 C 程序。但是，当我尝试编译 C++ 时，事情就坏了。

我有一个简单的 Hello World 程序：

```
#include <string>
#include <iostream>
int main()
{
    std::string s = "Hello World";
    std::cout << s << std::endl;
    return 0;
} 
```

为了构建它，我调用：

```
i486-wrs-vxworks-gcc -I/home/kyle/vxworks-6.9/target/usr/h -I/home/kyle/vxworks-6.9/target/usr/h/c++ hello.cpp 
```

这总是失败并显示以下消息：

```
In file included from /home/kyle/vxworks-6.9/target/usr/h/c++/cerrno:4:0,
             from /home/kyle/vxworks-6.9/target/usr/h/c++/xlocnum:4,
             from /home/kyle/vxworks-6.9/target/usr/h/c++/ios:4,
             from /home/kyle/vxworks-6.9/target/usr/h/c++/ostream:4,
             from /home/kyle/vxworks-6.9/target/usr/h/c++/istream:4,
             from /home/kyle/vxworks-6.9/target/usr/h/c++/string:4,
             from hello.cpp:1:
/usr/local/lib/gcc/i486-wrs-vxworks/4.6.4/../../../../i486-wrs-vxworks/include/yvals.h:4:24: fatal error: yvals.h: No such file or directory 
```

如果我进去看看`/usr/local/i486-wrs-vxworks/include/yvals.h`，这就是我所看到的：

```
/* yvals.h values header for conforming compilers on various systems */
#if (defined(__cplusplus) && defined(__GNUC__))
/* GCC C++ has it's own yvals.h */
#include_next <yvals.h>
#else /* __cplusplus && __GNUC__ */
#ifndef _YVALS
#define _YVALS
#ifdef _NO_WINDRIVER_MODIFICATIONS
#include <stdarg.h>
#endif
... 
```

似乎还有另一个`yvals.h`需要包括在内，但我在任何地方都找不到。我只是未能正确构建 gcc，还是有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T18:39:49.693

您使用的是哪个版本的 VxWorks？

我有一个模糊的回忆，在过去升级 VxWorks 版本时，yvals.h 中有一个语法错误，我需要解决这个问题，并在后续版本中修复。

此外，您可以从 WindRiver 中获得预构建的 gcc 交叉编译器。只需使用您的许可证号登录 windriver.com/support，然后前往“下载”以获取您的产品版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:30:58.697

我自己经历了最近的交叉编译噩梦（与 VxWorks 无关），除了 yvals.h，我对 stddef.h 感到悲伤。问题原来是我需要指定系统头文件的包含路径。

以下是我解决错误消息所采取的步骤。随意修改。

创建一个文件 foo.c

```
#include <stddef.h>   /* The problem header file (yvals.h for you?) */

int main (void) {
    return 0;
} 
```

用你选择的编译器编译它

```
$(CC) foo.c -E 
```

注意它使用的包含路径，并将它们设置为您的系统头文件列表，使用

```
-isystem <include path> 
```

选项。

希望这可以帮助。

# database - 设备状态系统的适当数据库设计

> ID：14464888
> 
> 赞同：0
> 
> 时间：2013-01-22T17:49:29.813
> 
> 标签：database, database-design

设计数据库的更好方法是什么，您有一个包含一堆零件 ID 的表和另一个更改零件组状态的表：

```
Parts
id: int
type: int

Group
id: int
part_one_id: int
part_two_id: int
.
.
.

Reports
id: int
group_id: int
status_id: int
date: datetime 
```

在制作这个数据库时，我有两种跟踪状态的方法。将 status_id 列添加到组表中，每当我为该组创建报告时，我都会将该列更新为新状态。

或者

当我需要获取组的状态时，我会查询报告以查找最新报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:51:32.463

不，这是个坏主意。PartStatus 是一种可能性（Riehl 启发式论证）。但状态可能是一个关联类。你现在在报告中有点近似，所以也许你只是重命名它。

# php - 从 Mysql 数据库中检索数据，显示在表单上， 并允许用户使用 PHP 进行更新

> ID：14464891
> 
> 赞同：3
> 
> 时间：2013-01-22T17:49:32.830
> 
> 标签：php, sql-update

我对 PHP 很陌生。我有一个页面，我希望用户能够输入引文，然后将该信息传递给一个 php 脚本，该脚本查询数据库，以表单形式返回信息，然后允许用户更新任何字段以那种形式返回。

我有三个问题：

1) 当数据返回时，is 只返回字段中的第一个单词。许多字段包含多个单词。

2）当用户更改字段中的数据时，数据库不会更新。

3）我似乎不知道如何让表单字段像我在数据输入中那样显示。

下面是查询和返回数据的代码，供用户在必要时查看和更新​​：

```
<?php  

mysql_connect("***************", "*********", "****") or die(mysql_error()); 
mysql_select_db("***********") or die(mysql_error()); 

$searchterm= $_POST['searchterm'];

$query = "SELECT Citation, Category, Overview, Facts, Decision, Keywords, Link     FROM     cases WHERE citation = '$searchterm'";

$result  = mysql_query($query);

while ($row = mysql_fetch_assoc($result))
{
    echo "<form action=".$_SERVER['PHP_SELF']." method=post>" .
         "Case Citation: <input type=text name=Citation value={$row['Citation'] }><br>" .
     "Category: <input type=text name=Category value={$row['Category'] }><br>" . 
     "Overview: <input type=text name=Overview value={$row['Overview'] }><br>" . 
     "Case Facts: <input type=text name=Facts value={$row['Facts'] }><br>" . 
     "Decision: <input type=text name=decision value={$row['Decision'] }><br>" . 
     "Keywords: <input type=text name=Keywords value={$row['Keywords'] }><br>" . 
     "Weblink: <input type=text name=Link value={$row['Link'] }><br>" . 
     "<input type=submit name=submit value=Update>" .
     "</form>";
} 

//when they click submit
if (isset($_POST['submit'])) { 

$Citation=$_POST['Citation'];
$Category=$_POST['Category'];
$Overview=$_POST['Overview'];
$Facts=$_POST['Facts'];
$Decision=$_POST['Decision'];
$Keywords=$_POST['Keywords'];
$Link=$_POST['Link'];

$update = "UPDATE IGNORE cases SET citation='$citation', category='$category', overview='$overview', facts='$facts', decision='$decision', keywords='$keywords', link='$link' WHERE citation = '%$searchterm%'";
$add = mysql_query($update);

} 
  ?> 
```

这是我用来添加数据的表格：

```
<form action="process.php" method="post"> 
Case Citation: <input type="text" name="citation" size=128><br> 
Category: <input type="text" name = "category" size=56><br> 
Overview: <textarea class="textarea" cols="96" row="8" name = "overview"> </textarea><br> 
Case Facts:  <textarea class="textarea" cols="96" row="8" name = "facts"></textarea><br>
Decision:  <input type="text" name = "decision" size=56><br>
Keywords: <textarea class="textarea" cols="96" row="8" name = "keywords"></textarea><br>
Web Link: <input type="text" name = "link" size=128><br>
<input type="submit" value="Submit"> 
</form> 
```

这是将信息保存到数据库的代码：

```
<? 
  $citation=$_POST['citation']; 
  $category=$_POST['category']; 
  $overview=$_POST['overview']; 
  $facts=$_POST['facts']; 
  $decision=$_POST['decision']; 
  $keywords=$_POST['keywords']; 
  $link=$_POST['link']; 
  mysql_connect("*************", "************", "*********") or die(mysql_error()); 
  mysql_select_db("************") or die(mysql_error()); 
  mysql_query("INSERT INTO `cases` VALUES ('$citation', '$category', '$overview', '$facts', '$decision', '$keywords', '$link')"); 
  Print "Your information has been successfully added to the database.  Add case page will automatically reload."; 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:05:21.433

您的第一个（可能是其余的......）问题是由您构建表单的方式引起的：

```
echo "<form action=".$_SERVER['PHP_SELF']." method=post>" .
     "Case Citation: <input type=text name=Citation value={$row['Citation'] }><br>" .
 "Category: <input type=text name=Category value={$row['Category'] }><br>" . 
 "Overview: <input type=text name=Overview value={$row['Overview'] }><br>" . 
 "Case Facts: <input type=text name=Facts value={$row['Facts'] }><br>" . 
 "Decision: <input type=text name=decision value={$row['Decision'] }><br>" . 
 "Keywords: <input type=text name=Keywords value={$row['Keywords'] }><br>" . 
 "Weblink: <input type=text name=Link value={$row['Link'] }><br>" . 
 "<input type=submit name=submit value=Update>" .
 "</form>"; 
```

请注意，所有属性的值都未加引号，因此在 html 中，其中一个输入可能如下所示：

```
Decision: <input type=text name=decision value=this is some text from that field><br> 
```

那不是有效的html。

您应该引用所有值并准备/转义它们以在 html 中使用：

```
 'Decision: <input type=text name=decision value="' . htmlspecialchars($row['Decision']) . '"><br>' . 
 etc. 
```

除此之外，您还有一个 sql 注入问题，您应该通过切换到 PDO（或 mysqli）并使用绑定变量准备语句来解决该问题。

请注意，sql 注入问题不仅会使您处于危险之中，而且如果您的值之一包含例如`'`字符，它还会使您的 sql 轻松无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:56:36.380

在 while 循环中检查 value={$row['Citation'] }。

你的数据库字段名第一个字母是大写吗？

再次检查数据库字段名称。

# java - flash.display.Loader 间歇性地导致加载的 swf 的子级松散类型

> ID：14464898
> 
> 赞同：2
> 
> 时间：2013-01-22T17:49:53.287
> 
> 标签：java, actionscript-3, flash, actionscript, loader

我有一个类，它使用两个类似的加载器加载两个 swfs（注意新的 ApplicationDomain）：

```
var child1Loader:Loader = new Loader()
child1Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onChild1Complete)
child1Loader.load(new URLRequest("http://mywebsite.com/assets/load_test/Child1Factory.swf?" + Math.random()), new LoaderContext(false, new ApplicationDomain(ApplicationDomain.currentDomain))) 
```

加载的 swfs 实际上是工厂：

```
public class Child1Factory extends Sprite
{

    public function Child1Factory() {}

    public function getChild1():Child1 {
        return new Child1()
    }

} 
```

加载两个 swf 后，我将 child1 和 child2 添加到舞台，如下所示：

```
var child1:MovieClip = child1Factory.getChild1()
var child2:MovieClip = child2Factory.getChild2()
addChild(child1)
addChild(child2) 
```

Child1 和 child2 看起来非常相似，但并不完全相同。Child1 看起来像这样（注意 ADDED_TO_STAGE 监听器）：

```
public class Child1 extends MovieClip 
{

    public function Child1() 
    {
        Security.allowDomain("*")
        if (stage) onAddedToStage(null)
        else addEventListener(Event.ADDED_TO_STAGE, onAddedToStage)         
    }

    private function onAddedToStage(e:Event = null):void {
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage)
        addChild(new MC_CircleGroup())
        runChild1Test()
    }

    private function runChild1Test():void {
        var circles:Array = findChildrenOfType(MC_Circle, this)
        if (circles.length == 0) {
            throw new Error("Oh no!")
        }
    }

    private function findChildrenOfType(type:Class, container:DisplayObjectContainer):Array {
        var toReturn:Array = []
        for (var childIndex:int = 0; childIndex < container.numChildren; childIndex++) {
            var child:DisplayObject = container.getChildAt(childIndex)
            if (child is type) {
                toReturn.push(child)
            } else if (child is DisplayObjectContainer) {
                toReturn = toReturn.concat(findChildrenOfType(type, child as DisplayObjectContainer))
            }
        }
        return toReturn
    }

} 
```

和 child2 类似，除了将正方形读为圆形。这两个类都有不同的 swcs，其中包含相关的 MC_SquareGroup 或 MC_CircleGroup 影片剪辑。它们中有四个类型为 MC_Square 或 MC_Circle 的孩子。findChildrenOfType 函数通常返回这四个实例的数组。

错误“没有！” 在我运行应用程序的每 5 次中抛出大约 1 次。现在有人为什么吗？或者现在还有更好的解决方法吗？

**一些注意事项：**

1.) 只有当我通过 Internet 或本地网络加载 swfs 时才会引发错误。如果 swfs 在同一台计算机上，它不会抛出。

2.) 加载 child1 但不加载 child2 或 visa virsa 可以正常工作。

3.) 发生错误时，根据我的调试器，MC_CircleGroup 的子代是 MovieClip 类型，而不是 MC_Circle。

4.) 每次运行应用程序时都不会抛出错误。只是每隔几次。为了始终如一地获得错误，我必须在加载两个 swf 后再次调用加载程序来循环加载。

**可根据要求提供完整的源代码。**

谢谢！蒂姆

**更新**

加载程序文件中的完整代码如下所示：

```
public class Main extends Sprite 
{
    private var child1Factory:Object;
    private var child1Loaded:Boolean = false;
    private var child2Factory:Object;
    private var child2Loaded:Boolean = false;

    public function Main():void 
    {
        Security.allowDomain("*")
        if (stage) loadChildren();
        else addEventListener(Event.ADDED_TO_STAGE, loadChildren);
    }

    private function loadChildren(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, loadChildren);

        child1Loaded = false
        child2Loaded = false

        var child1Loader:Loader = new Loader()
        child1Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onChild1Complete)
        child1Loader.load(new URLRequest("http://mywebsite.com/assets/load_test/Child1Factory.swf?" + Math.random()), new LoaderContext(false, new ApplicationDomain(ApplicationDomain.currentDomain)))

        var child2Loader:Loader = new Loader()
        child2Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onChild2Complete)
        child2Loader.load(new URLRequest("http://mywebsite.com/assets/load_test/Child2Factory.swf?" + Math.random()), new LoaderContext(false, new ApplicationDomain(ApplicationDomain.currentDomain)))

    }

    private function onChild1Complete(e:Event):void {
        child1Factory = e.currentTarget.content
        child1Loaded = true
        if (child2Loaded) {
            onLoadComplete()
        }   

    }

    private function onChild2Complete(e:Event):void {
        child2Factory = e.currentTarget.content
        child2Loaded = true
        if (child1Loaded) {
            onLoadComplete()
        }   

    }

    private function onLoadComplete():void {
        var child1:MovieClip = child1Factory.getChild1()
        var child2:MovieClip = child2Factory.getChild2()
        addChild(child1)
        addChild(child2)
        loadChildren(null)
    }

} 
```

**更新 2** 好的，这变得更加奇怪了。在@DavidMear 之后我更新了它，所以孩子们被添加到 onChildXComplete 函数中，突然间它中断的频率大大降低了。它仍然偶尔会中断：

```
public class Main extends Sprite 
{
    private var child1Factory:Object;
    private var child1Loaded:Boolean = false;
    private var child2Factory:Object;
    private var child2Loaded:Boolean = false;

    public function Main():void 
    {
        Security.allowDomain("*")
        if (stage) loadChildren();
        else addEventListener(Event.ADDED_TO_STAGE, loadChildren);
    }

    private function loadChildren(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, loadChildren);

        child1Loaded = false
        child2Loaded = false

        var child1Loader:Loader = new Loader()
        child1Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onChild1Complete)
        child1Loader.load(new URLRequest("http://mywebsite.com/assets/load_test/Child1Factory.swf?" + Math.random()), new LoaderContext(false, new ApplicationDomain(ApplicationDomain.currentDomain)))

        var child2Loader:Loader = new Loader()
        child2Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onChild2Complete)
        child2Loader.load(new URLRequest("http://mywebsite.com/assets/load_test/Child2Factory.swf?" + Math.random()), new LoaderContext(false, new ApplicationDomain(ApplicationDomain.currentDomain)))

    }

    private function onChild1Complete(e:Event):void {
        child1Factory = e.currentTarget.content
        child1Loaded = true
        var child1:MovieClip = child1Factory.getChild1()
        addChild(child1)
        if (child2Loaded) {
            onLoadComplete()
        }   

    }

    private function onChild2Complete(e:Event):void {
        child2Factory = e.currentTarget.content
        child2Loaded = true
        var child2:MovieClip = child2Factory.getChild2()
        addChild(child2)
        if (child1Loaded) {
            onLoadComplete()
        }

    }

    private function onLoadComplete():void {
        loadChildren(null)
    }

} 
```

**更新 3**

此代码以与原始代码和堆栈跟踪指向其中一个计时器处理程序的频率大致相同的频率引发错误。如果没有堆栈跟踪指向 onLoadComplete 的计时器，它也会抛出错误...即测试函数在抛出错误之前已经在 onChildXComplete 函数中成功运行一次。现在我**真的**很困惑。

```
public class Main extends Sprite 
{
    private var child1Factory:Object;
    private var child1Loaded:Boolean = false;
    private var child2Factory:Object;
    private var child2Loaded:Boolean = false;

    public function Main():void 
    {
        Security.allowDomain("*")
        if (stage) loadChildren();
        else addEventListener(Event.ADDED_TO_STAGE, loadChildren);
    }

    private function loadChildren(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, loadChildren);

        child1Loaded = false
        child2Loaded = false

        var child1Loader:Loader = new Loader()
        child1Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onChild1Complete)
        child1Loader.load(new URLRequest("http://mywebsite.com/assets/load_test/Child1Factory.swf?" + Math.random()), new LoaderContext(false, new ApplicationDomain(ApplicationDomain.currentDomain)))

        var child2Loader:Loader = new Loader()
        child2Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onChild2Complete)
        child2Loader.load(new URLRequest("http://mywebsite.com/assets/load_test/Child2Factory.swf?" + Math.random()), new LoaderContext(false, new ApplicationDomain(ApplicationDomain.currentDomain)))

    }

    private function onChild1Complete(e:Event):void {
        child1Factory = e.currentTarget.content
        child1Loaded = true
        var child1:MovieClip = child1Factory.getChild1()
        addChild(child1)
        if (child2Loaded) {
            onLoadComplete()
        }   

    }

    private function onChild2Complete(e:Event):void {
        child2Factory = e.currentTarget.content
        child2Loaded = true
        var child2:MovieClip = child2Factory.getChild2()
        addChild(child2)
        if (child1Loaded) {
            onLoadComplete()
        }

    }

    private function onLoadComplete():void {

        var timer1:Timer = new Timer(500, 1) 
        timer1.addEventListener(TimerEvent.TIMER_COMPLETE, function(e:TimerEvent):void {
            var child1:MovieClip = child1Factory.getChild1()
            addChild(child1)
        })
        timer1.start()

        var timer2:Timer = new Timer(1000, 1) 
        timer2.addEventListener(TimerEvent.TIMER_COMPLETE, function(e:TimerEvent):void {
            var child2:MovieClip = child2Factory.getChild2()
            addChild(child2)
            loadChildren(null)
        })
        timer2.start()          

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:39:54.883

我认为 findChildrenOfType 方法可能不太适合递归调用，因为您在每次调用时都重置了 toReturn 数组。也许这样的事情可能会更好？

```
function findChildrenOfType(type:Class, container:DisplayObjectContainer, toReturn:Array = null ):Array {
    if(!toReturn) toReturn = [];
    for (var childIndex:int = 0; childIndex < container.numChildren; childIndex++) {
        var child:DisplayObject = container.getChildAt(childIndex)
        if (child is type) {
            toReturn.push(child);
        } else if (child is DisplayObjectContainer) {
            findChildrenOfType( type, child as DisplayObjectContainer, toReturn );
        }
    }
    return toReturn;
} 
```

# python - 如何使用 Python Mock 断言接受序列参数的调用？

> ID：14464901
> 
> 赞同：5
> 
> 时间：2013-01-22T17:50:02.323
> 
> 标签：python, unit-testing, mocking

我正在处理一系列用户定义的对象。它看起来类似于以下内容：

```
class Thing(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y 
```

我目前正在测试的方法具有类似于以下的功能：

```
def my_function(things):
    x_calc = calculate_something(t.x for t in things)
    y_calc = calculate_something(t.y for t in things)
    return x_calc / y_calc 
```

我面临的问题是测试对`calculate_something`. 我想断言这些调用发生了，如下所示：

```
calculateSomethingMock.assert_any_call(the_sequence) 
```

我不关心传递到的序列的顺序`calculate_something`，但我确实关心元素都存在。我可以将生成器函数包装在对 的调用中`set`，但我不觉得我的测试应该规定传递给`calculate_something`. 我应该能够以任何顺序传递它。我也可以创建一个生成序列的方法，而不是使用生成器语法并模拟该方法，但这似乎有点矫枉过正。

我怎样才能最好地构建这个断言，或者我在这里测试的问题是否表明代码结构不佳？

我正在使用 Python 2.7.3 和 Mock 1.0.1。

（对于任何觉得有必要对此发表评论的人，我知道我在最后做测试，这不是最好的做法。）

编辑：

在观看[了 Gregory Moeck 的题为“Why You Don't Get Mock Objects”的精彩演讲](https://www.youtube.com/watch?v=R9FOchgTtLM)后，我重新考虑是否应该嘲笑该`calculate_something`方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:40:02.147

查看 Mock 文档，有一个[call_args_list 可以满足](http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.call_args_list)您的需求。

所以你会模拟`calculate_something`你的测试。

```
calculate_something = Mock(return_value=None) 
```

完成后，`my_function`您可以通过以下方式检查传递的参数：

```
calculate_something.call_args_list 
```

这将返回对其进行的所有调用的列表（传递了相应的元素）。

*编辑*：

（抱歉拖了我这么久，我不得不在我的机器上安装 Python3.3）

**我的模块.py**

```
class Thing:
    ...
def calculate_something:
    ...

def my_function(things):
    # Create the list outside in order to avoid a generator object
    # from being passed to the Mock object.

    xs = [t.x for t in things]
    x_calc = calculate_something(xs)

    ys = [t.y for t in things]
    y_calc = calculate_something(ys)
    return True 
```

**测试文件.py**

```
import unittest
from unittest.mock import patch, call
import mymodule

class TestFoo(unittest.TestCase):

    # You can patch calculate_something here or
    # do so inside the test body with 
    # mymodule.calcualte_something = Mock()
    @patch('mymodule.calculate_something')
    def test_mock(self, mock_calculate):

        things = [mymodule.Thing(3, 4), mymodule.Thing(7, 8)]

        mymodule.my_function(things)

        # call_args_list returns [call([3, 7]), call([4, 8])]
        callresult = mock_calculate.call_args_list

        # Create our own call() objects to compare against
        xargs = call([3, 7])
        yargs = call([4, 8])

        self.assertEqual(callresult, [xargs, yargs])

        # or
        # we can extract the call() info
        # http://www.voidspace.org.uk/python/mock/helpers.html#mock.call.call_list
        xargs, _ = callresult[0]
        yargs, _ = callresult[1]

        xexpected = [3, 7]
        yexpected = [4, 8]

        self.assertEqual(xargs[0], xexpected)
        self.assertEqual(yargs[0], yexpected)

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T06:10:31.897

我已经有一段时间没有接触过我最初使用的代码了，但是我一直在重新考虑我的测试方法。我一直在努力对自己所做的事情更加小心，不要嘲笑。我最近意识到我开始不知不觉地开始遵循这条经验法则：如果它使我的测试更短更简单，就模拟一些东西，如果它让测试变得更复杂，就别管它。在这种方法的情况下，简单的输入/输出测试就足够了。没有像数据库或文件这样的外部依赖项。所以简而言之，我认为我的问题的答案是，“我不应该嘲笑`calculate_something`。” 这样做会使我的测试更难阅读和维护。

# jquery - 无法从 C# web api 基本身份验证过滤器中的 jquery ajax 标头解码 base64 字符串

> ID：14464909
> 
> 赞同：0
> 
> 时间：2013-01-22T17:50:36.680
> 
> 标签：jquery, ajax, asp.net-web-api

我有一个 jquery ajax 调用需要传递一个 auth 标头。我尝试了几种不同的方法。但是我的ajax调用目前看起来像这样......

```
 $.ajax({
        headers: {"Authorization": "Basic YgBhAHMAaQBjACAAbAAxAHQAdABsADMAcAAxAGcAbAAxAHQAdABsADMAcAAxAGcAOgBsADMAKwBtADMAMQBuAA=="},
        url: fetchurl,
        type: 'GET',
        dataType: 'json',
        async: false,
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            $.each(data, function (key, val) {
                $('<option/>').attr('value', val.ProductCd)
                    .html(val.ProductCd + " - " + val.Description)
                    .appendTo(productselect);
            });
            $.unblockUI();
        },
        error: function (error, textStatus, errorThrown) {
            alert(textStatus);
        }
    }); 
```

我认为我的解码问题可能与谁在进行编码有关，所以我通过 C# 类生成了该令牌并将其粘贴到我的脚本代码中。

我还尝试使用插件在 jquery 中进行编码并使用 beforesend 回调来设置标题。

在这里我尝试解码：

```
 string authToken = actionContext.Request.Headers.Authorization.Parameter;
          string decodedToken = Encoding.UTF8.GetString(Convert.FromBase64String(authToken));

          string username = decodedToken.Substring(0, decodedToken.IndexOf(":"));
          string password = decodedToken.Substring(decodedToken.IndexOf(":") + 1); 
```

我的结果几乎总是一样的。

解码身份验证头后，我得到垃圾：“�w0u�\n�ZXNTLMSSP\0\0\0\0\0\0\0\0X\0\0\0\0\0\0\0X\0\ 0\0\0\0\0\0X\0\0\0\0\0\0\0X\0\0\0\0\0\0\0X\0\0\0\0\0\ 0\0X\0\0\0��\0\0\0I���ۛ��l�Y��#��\0\0\0��P-\"��\0\0\ 0\0"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:36:09.963

好的。这花了一些时间，但我终于发现，当我从我的 ajax 调用发送基本身份验证时，web api 层正在接收协商身份验证。所以我进入IIS禁用了Web服务上的所有身份验证，除了匿名。然后瞧。

# linux - apache web server logging - 自定义日志文件与一般日志文件

> ID：14464910
> 
> 赞同：0
> 
> 时间：2013-01-22T17:50:40.643
> 
> 标签：linux, apache, logging

当我没有在我的 conf 文件的虚拟主机部分中指定日志文件时，日志将写入 httpd.conf (=access_log) 中指定的文件中。日志条目如下所示：

> SOMEIP - - [22/Jan/2013:18:34:08 +0100] "GET / HTTP/1.1" 200 1752 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko)铬/SOMEIP Safari/537.17"
> 
> SOMEIP - - [22/Jan/2013:18:34:08 +0100] "GET /img/homepage_bg.png HTTP/1.1" 304 - "http://DOMAIN/" "Mozilla/5.0 (Windows NT 6.1; WOW64 ) AppleWebKit/537.17 (KHTML, 像 Gecko) C$

但是当我在虚拟主机部分定义一个日志文件时，新的日志文件包含不同的信息：

> SOMEIP - - [22/Jan/2013:18:33:34 +0100] "GET / HTTP/1.1" 200 1752
> 
> SOMEIP - - [22/Jan/2013:18:33:34 +0100] “GET /img/homepage_bg.png HTTP/1.1”304 -

我这样定义日志文件：

> CustomLog 日志/DOMAIN-access_log common

为什么自定义日志比所有虚拟主机默认登录的通用日志包含的信息少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:01:33.553

您需要使用包含用户代理的日志格式定义别名“common”。

LogFormat "%h %l %u %t \"%r\" %>s %b "%{User-agent}i" common

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:23:28.143

你没有说你使用的是什么风格的 Linux。任何配置得当的 Apache（例如基于 Debian 的 Ubuntu、Mint 等）都将`LogFormat`在其配置中包含用户代理。查找所有匹配的行`LogFormat`。你应该找到这样的东西：

```
LogFormat "%v:%p %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent 
```

只需使用日志文件`combined`的参数甚至参数：`vhost_combined`

```
CustomLog logs/DOMAIN-access_log combined 
```

您还应该查看[自定义日志格式](http://httpd.apache.org/docs/2.4/mod/mod_log_config.html#formats)的文档。

# javascript - 网格内的网格 Javascript 和 JQuery：

> ID：14464913
> 
> 赞同：3
> 
> 时间：2013-01-22T17:50:47.033
> 
> 标签：javascript, jquery, css

我正在尝试在较大的网格内绘制一个小网格。使用 zIndex 似乎根本不起作用，我没有想法。

绘制网格的代码

Javascript/JQuery：

```
function creategrid(size){

          var primeW = Math.floor((400) / size),
              primeH = Math.floor((250) / size),
              standardW = Math.floor((500) / size),
              standardH = Math.floor((500) / size);

          var standard = document.createElement('div');
              standard.className = 'grid';
              standard.style.width = (standardW * size) + 'px';
              standard.style.height = (standardH * size) + 'px';

          var prime = document.createElement('div');
              prime.clasName = 'gridprime';
              prime.style.width = (primeW * size) + 'px';
              prime.style.height = (primeH * size)+ 'px';
              prime.style.zIndex= '-1';
              standard.appendChild(prime);

            for (var i = 0; i < standardH; i++) {
                for (var p = 0; p < standardW; p++) {
                  var cell = document.createElement('div');
                      cell.style.height = (size - 1) + 'px';
                      cell.style.width = (size - 1) + 'px';
                      cell.style.zIndex= '10';
                      standard.appendChild(cell);
                }
            }

          document.body.appendChild(standard);
        }

creategrid(10); 
```

用于区分网格的 CSS。

CSS：

```
 .grid {
    margin: 0px auto auto;
    border: 1px solid #ccc;
    border-width: 0 1px 1px 0;
    background-color: #28ACF9;
  }

  .grid div {
    border: 1px solid #ccc;
    border-width: 1px 0 0 1px;
    float: left;
  }

  .gridprime {
    margin-top: 50px ;
    margin-left: 50px;
    border: 1px solid #000;
    color: #FFFF33;
    float: left;
  } 
```

现在主网格要么被隐藏，要么没有加载分配给它的 css，你可以告诉它存在的唯一方法是它取代了单元格。

理想情况下，单元格将位于标准网格和主网格之上，并且主网格将正确使用定义的样式。

# **[jsFiddle](http://jsfiddle.net/7MJpf/4/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:05:16.330

你需要一个

```
prime.style.position = 'absolute' 
```

和

```
cell.style.positon = 'relative' 
```

添加到您的 z 索引中。

在这里查看[http://jsfiddle.net/7MJpf/5/](http://jsfiddle.net/7MJpf/5/)

# maven - 无法使用 maven 执行 wsdl2java

> ID：14464917
> 
> 赞同：1
> 
> 时间：2013-01-22T17:51:04.723
> 
> 标签：maven, grails, wsdl2java

我想用 maven 执行 wsdl2java 但我有以下构建失败：

```
 [INFO] --- maven-dependency-plugin:2.1:copy (default) @ mogopay ---
[INFO] Configured Artifact: javax.xml.bind:jaxb-api:2.2:jar
[INFO] Configured Artifact: javax.xml.ws:jaxws-api:2.2:jar
[INFO] Copying jaxb-api-2.2.jar to c:\Users\EBIZNEXT\git\mogopay-core\mogopay\target\endorsed\jaxb-api-2.2.jar
[INFO] Copying jaxws-api-2.2.jar to c:\Users\EBIZNEXT\git\mogopay-core\mogopay\target\endorsed\jaxws-api-2.2.jar
[INFO]
[INFO] --- maven-antrun-plugin:1.3:run (copy-tomcat-resources) @ mogopay ---
[INFO] Executing tasks
[INFO] Executed tasks
[INFO]
[INFO] --- cxf-codegen-plugin:2.4.2:wsdl2java (CXF Payline) @ mogopay ---
[INFO] Running wsdl2java in fork mode...
[INFO] Building jar: C:\Users\EBIZNEXT\AppData\Local\Temp\cxf-tmp-679212\cxf-codegen5225275003143491559.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:30.351s
[INFO] Finished at: Tue Jan 22 18:28:57 CET 2013
[INFO] Final Memory: 14M/178M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:2.4.2:wsdl2java (CXF Payline) on project mogopay:
[ERROR] Exit code: 1 - Exception in thread "main" org.apache.cxf.tools.common.ToolException: java.lang.reflect.UndeclaredThrowableException
[ERROR] at
   ...
[ERROR] Caused by: java.lang.NoSuchMethodException: javax.xml.bind.annotation.XmlElementRef.required()
[ERROR] at java.lang.Class.getDeclaredMethod(Class.java:1954)
[ERROR] at com.sun.codemodel.TypedAnnotationWriter.invoke(TypedAnnotationWriter.java:107)
[ERROR] ... 27 more
[ERROR]
[ERROR] Command line was: "c:\Program Files\Java\jdk1.7.0\jre\bin\java.exe" -Djava.endorsed.dirs=c:\Users\EBIZNEXT\git\mogopay-core\mogopay\target/endorsed -jar
 C:\Users\EBIZNEXT\AppData\Local\Temp\cxf-tmp-679212\cxf-codegen5225275003143491559.jar C:\Users\EBIZNEXT\AppData\Local\Temp\cxf-tmp-679212\cxf-w2j3628405823287
641812args 
```

这个项目是在 grails 2.0.3 中构建的。问题似乎来自 Jaxb，因为 grails 中的当前版本使用 jaxb-api-2.1，而项目需要 jaxb 2.2。我已经更新了我的 pom，正如这个答案所建议的那样：[Set Java Compliance Level in CXF wsdl2java](https://stackoverflow.com/questions/5654534/set-java-compliance-level-in-cxf-wsdl2java)和这里：[Example 7 - Using JAXB/JAX-WS 2.2 with Java 6](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)。但是当我执行 maven command : 时`mvn clean install`，我得到了上面的错误。

这是我的 pom（我删除了不重要的部分）：

```
<pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <compilerArguments>
                        <endorseddirs>${project.build.directory}/endorsed</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <forkMode>once</forkMode>
                    <argLine>-Djava.endorsed.dirs=${project.build.directory}/endorsed</argLine>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>

         <plugins>
             ...
             <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax.xml.bind</groupId>
                                <artifactId>jaxb-api</artifactId>
                                <version>2.2</version>
                            </artifactItem>
                            <artifactItem>
                                <groupId>javax.xml.ws</groupId>
                                <artifactId>jaxws-api</artifactId>
                                <version>2.2</version>
                            </artifactItem>
                        </artifactItems>
                        <outputDirectory>${project.build.directory}/endorsed</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
                ...
               <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>2.4.2</version>
            <configuration>
                <fork>once</fork>
                <additionalJvmArgs>-Djava.endorsed.dirs=${project.build.directory}/endorsed</additionalJvmArgs>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>xerces</groupId>
                    <artifactId>xercesImpl</artifactId>
                    <version>2.8.1</version>
                </dependency>
                <dependency>
                    <groupId>com.sun.xml.bind</groupId>
                    <artifactId>jaxb-impl</artifactId>
                    <version>2.2</version>
                </dependency>
                <dependency>
                    <groupId>com.sun.xml.bind</groupId>
                    <artifactId>jaxb-xjc</artifactId>
                    <version>2.2</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <id>CXF Payline</id>
                    <phase>process-resources</phase>
                    <configuration>
                        <sourceRoot>${basedir}/src/java</sourceRoot>
                        <wsdlOptions>
                            <wsdlOption>
                                <wsdl>${basedir}/src/java/wsdl/Payline_DirectPaymentAPI.wsdl</wsdl>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>                
         </plugins> 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:53:26.417

Java 7 已经包含 jaxb 2.2（实际上是 2.2.4-1，如您[**在此处**](http://jaxb.java.net/guide/Which_JAXB_RI_is_included_in_which_JDK_.html)看到的），因此您不需要向该工件添加任何依赖项。如果此工件与 grails 2.0.3 依赖项冲突，请尝试从 grails 依赖项中排除 jaxb，也许 grails 对 jaxb 2.2 感到满意。

这应该是评论，但我开始使用过滤 javascript 的代理，我无法使用评论功能。对不起我的英语！

# python - python 对象列表，每个对象都有自己的数组字典。附加到一个附加到所有

> ID：14464918
> 
> 赞同：1
> 
> 时间：2013-01-22T17:51:05.817
> 
> 标签：python, list, memory, dictionary

> **可能重复：**
> [Python 中的“Least Astonishment”：](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)
> [无缘无故在对象之间共享的可变默认参数字典？](https://stackoverflow.com/questions/10710689/dictionary-shared-between-objects-for-no-reason)

```
 class Player():
        zones = {}
        def __init__(self):
            self.zones['hand'] = []
        def InitHand(self):
            for a in range(5):
                self.zones['hand'].append(a)
lst = []
lst.append(Player())
lst.append(Player())
lst[0].InitHand()
print lst[1].zones['hand'] 
```

这会打印“[0, 1, 2, 3, 4]”，但我只初始化了第 0 个元素......如下所示将它们更改为数组可以解决问题，但对于我来说，我无法弄清楚为什么会这样发生。

```
 class Player2():
        zones = []
        def __init__(self):
            self.zones = []
        def InitHand(self):
            for a in range(5):
                self.zones.append(a)
lst = []
lst.append(Player2())
lst.append(Player2())
lst[0].InitHand()
print lst[1].zones 
```

这会按预期打印“[]”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:55:05.793

在您的代码中，所有玩家共享同一个`zones`字典。在类范围内设置的任何内容都是*类*属性，而不是*实例*属性。

```
class Player():
    def __init__(self):
        self.zones = {}
        self.zones['hand'] = []
    def InitHand(self):
        for a in range(5):
            self.zones['hand'].append(a) 
```

# wordpress - wordpress：如何将页面显示为特色图像缩略图？

> ID：14464920
> 
> 赞同：0
> 
> 时间：2013-01-22T17:51:10.747
> 
> 标签：wordpress

1.我使用仪表板创建了一些页面

2 使用插件将类别添加到这些页面

```
 http://wordpress.org/extend/plugins/add-tags-and-category-to-page/ 
```

3 将这些类别用作外观/菜单中的菜单

我现在希望当点击某个类别时，相关页面的列表不会显示它们的标题和内容，而是显示它们的特色图像

这就是我想要的：

```
 http://wpshower.com/demo/?theme=portfolium 
```

（这个主题使用投资组合对象和投资组合类别而不是普通帖子......我不知道如何创建一个框来将我的页面与投资组合类别相关联，我只能发布类别）

# java - 使用 Java 的该算法的伪代码

> ID：14464928
> 
> 赞同：-2
> 
> 时间：2013-01-22T17:51:36.097
> 
> 标签：java, algorithm, pseudocode

我的代码有问题。我的目标是将伪代码翻译成 java 代码是的，我的编码是一项作业，我不想要任何答案，只是为了告诉我问题出在哪里

我要做的是计算两个不包含重复的未排序学生列表之间的交集的大小。

我将展示伪代码和我的与此伪代码对应的 java 代码。

伪代码：

```
inter <-- 0

Array C[m+n]

for i <-- 0 to m-1  do  C[i] <-- A[i]

for i <-- 0 to n-1  do  C[i+m] <-- B[i]

C <-- sort(C, m+n);

pointer <-- 0

while (pointer < m+n-1) do{

if(C[pointer]=C[pointer+1]){

inter <-- inter+1

pointer <-- pointer+2

}

else pointer <-- pointer+1

}

return inter 
```

Java 代码：

```
public static int intersectionSizeMergeAndSort(studentList L1, studentList L2) {
/* Write your code for question 4 here */
  int intersectionSize = 0;
  int[] C = new int[L1.studentID.length+L2.studentID.length];
  for(int i = 0; i<L1.studentID.length; i++){
  C[i] = L1.studentID[i];
  }
  for(int i = 0; i<L2.studentID.length; i++){
  C[i+L1.studentID.length] = L2.studentID[i];
  }
  Arrays.sort(C);
  int pointer = 0;
  while(pointer<((C.length-1))){
    if(C[pointer] == C[pointer+1]){
    intersectionSize = intersectionSize + 1;
    pointer = pointer + 2;
    }
    else {
      pointer = pointer + 1;
  }
 return intersectionSize;

}
return 0;
} 
```

我的主要方法：

```
public static void main(String args[]) throws Exception {

studentList firstList;
studentList secondList;

// This is how to read lists from files. Useful for debugging.

// firstList=new studentList("COMP250.txt", "COMP250 - Introduction to Computer Science");
// secondList=new studentList("MATH240.txt", "MATH240 - Discrete Mathematics");

// get the time before starting the intersections
long startTime = System.currentTimeMillis();

// repeat the process a certain number of times, to make more accurate average     measurements.
 for (int rep=0;rep<1000;rep++) {

 // This is how to generate lists of random IDs. 
 // For firstList, we generate 16000 IDs
 // For secondList, we generate 16000 IDs

 firstList=new studentList(2 , "COMP250 - Introduction to Computer Science");
 secondList=new studentList(2 , "MATH240 - Discrete Mathematics");

 // run the intersection method
 int intersection=studentList.intersectionSizeMergeAndSort(firstList,secondList);
 System.out.println("The intersection size is: "+intersection);
 }

// get the time after the intersection
long endTime = System.currentTimeMillis();

System.out.println("Running time: "+ (endTime-startTime) + " milliseconds");
 }

} 
```

注意：L1 和 L2 之前已声明但我没有得到我想要的结果。有人能指出什么是错的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:05:10.903

在我的脑海中，在我看来，您的`return intersectionSize;`语句出现在您的 while 循环中，因此您的循环永远不会超出第一次迭代，也不会正确计算 intersectionSize。我会删除该声明并`return 0;`用`return intersectionSize;`这样的方式替换您的...

```
public static int intersectionSizeMergeAndSort(studentList L1, studentList L2) {
   /* Write your code for question 4 here */
   int intersectionSize = 0;
   int[] C = new int[L1.studentID.length + L2.studentID.length];
   for (int i = 0; i < L1.studentID.length; i++) {
      C[i] = L1.studentID[i];
   }
   for (int i = 0; i < L2.studentID.length; i++) {
      C[i + L1.studentID.length] = L2.studentID[i];
   }
   Arrays.sort(C);
   int pointer = 0;
   while (pointer < (C.length - 1)) {
       if (C[pointer] == C[pointer + 1]) {
          intersectionSize = intersectionSize + 1;
          pointer = pointer + 2;
       } else {
          pointer = pointer + 1;
       }
    }
    return intersectionSize;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:58:46.530

看起来您使用的是长度`studentList.StudentID`而不是长度`studentList`。

查看您的算法，您应该编写`L1.length`而`L1.StudentID.length`不是`L2`.

编辑：

我刚看到你的编辑。您需要在 main 之外取出以下几行`for loop`：

```
// run the intersection method
   int intersection=studentList.intersectionSizeMergeAndSort(firstList,secondList);
   System.out.println("The intersection size is: "+intersection); 
```

为了正确记录您的时间，您需要将行`long startTime = System.currentTimeMillis();`放在循环之后和我提到的前面几行之前。

# android - 存储一个对象的视图

> ID：14464929
> 
> 赞同：0
> 
> 时间：2013-01-22T17:51:40.703
> 
> 标签：android

android中是否有一个视图，可以存储**一个**对象并像TextView一样显示对象的toString()返回值？

或者我是否必须模仿获取 ListView 的行为并确保其适配器中只有一项？

我需要这个，因为我使用拖放来移动对象，并且我需要一个可以显示和存储其中一个对象的视图。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:53:16.700

没有这样的看法。根据您的要求，您必须实现此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:53:57.027

是的，有这样的观点，你已经提到了。它被称为`TextView`，你会像这样使用它，

```
TextView tv = (TextView)findObjectById(R.id.tv);
tv.setText(myObject.toString()); 
```

如果您不喜欢这样，请像这样扩展 TextView，

```
class ToStringView extends TextView { 
  ...
  public void setObject(Object o) { setText(o.toString()); }
} 
```

# iphone - 多节 UITableView 和 NSArray

> ID：14464931
> 
> 赞同：0
> 
> 时间：2013-01-22T17:51:49.000
> 
> 标签：iphone, ios

我有一个包含 5 个对象的 NSArray。

```
NSArray *tmpArry2 = [[NSArray alloc] initWithObjects:@"test1", @"test2", @"test3", @"test4", @"test5",nil]; 
```

我有一个有 4 个部分的表（见截图）

我想做的是展示

*   第 1 节中的 test1
*   第 2 节中的 test2 和 test3
*   第 3 节中的 test4
*   第 4 节中的 test5

这是我每个人都有 index.row 和 index.section 的问题

```
indexPath.row: 0 ... indexPath.section: 0
indexPath.row: 0 ... indexPath.section: 1
indexPath.row: 1 ... indexPath.section: 1
indexPath.row: 0 ... indexPath.section: 2
indexPath.row: 0 ... indexPath.section: 3 
```

我希望使用 indexPath.section 来获得 tmpArry2 中的值，但我不确定我该怎么做。我想过创建一个全局静态 int counter = 0; 并在 cellForRowAtIndexPath 中不断增加它，但问题是，如果我向上和向下滚动，值会在单元格之间不断跳跃。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    //NSLog(@"Inside cellForRowAtIndexPath");

    static NSString *CellIdentifier = @"Cell";

    // Try to retrieve from the table view a now-unused cell with the given identifier.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // If no cell is available, create a new one using the given identifier.
    if (cell == nil)
    {
        // Use the default cell style.
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    NSLog(@"indexPath.row: %d ... indexPath.section: %d ...", indexPath.row, indexPath.section);

//this will not give me right results
//NSString *titleStr2 = [tmpArry2 objectAtIndex:indexPath.section];

} 
```

![在此处输入图像描述](../Images/bc5ce3a180d29733ad62399f1bd2dbe9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:05:21.220

以下代码应该有所帮助，但我不明白为什么在 tmpArry2 和 cellForRowAtIndexPath 方法 countDownArray 中有标题？我假设您在代码中的某处重命名它。

如果将以下代码放在 cellForRowAtIndexPath 方法中，它应该可以工作。

```
NSInteger index = 0;
for (int i = 0; i < indexPath.section; i++) {
    index += [self tableView:self.tableView numberOfRowsInSection:i];
}
index += indexPath.row;
cell.textLabel.text = [countDownArray objectAtIndex:index]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:05:24.653

我认为您需要更改 tmpArry2 的结构以具有子数组——这是执行部分的一种常用方法。所以数组应该是这样的（使用数组的新符号）：

```
NSArray *tmpArry2 = @[@[@"test1"], @[@"test2", @"test3"], @[@"test4"], @[@"test5"]]; 
```

这为您提供了一个包含 4 个对象的数组，每个对象都是一个数组。然后在您的数据源方法中，您将执行以下操作：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return tmpArry2.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tmpArry2[section] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    cell.textLabel.text = tmpArry2[indexPath.section][indexPath.row];
    return cell;
} 
```

# ruby-on-rails - 如果我使用 w.keepalive，God Gem 会启动手表，但如果我使用 $god sidekiq start 则不会

> ID：14464934
> 
> 赞同：3
> 
> 时间：2013-01-22T17:52:10.513
> 
> 标签：ruby-on-rails, ruby, process, god, sidekiq

我正在努力将[Sidekiq](http://mperham.github.com/sidekiq/)与[God Gem](http://godrb.com/)一起使用。我希望能够使用 手动启动sidekiq 进程`$god start sidekiq`，但是无法启动该进程。如果我设置 w.keepalive（在下面的代码中注释掉），我只能让它启动 sidekiq 进程。

我正在使用:`$ god -c "./config.god" -D --log-level info`启动上帝，在前台启动上帝，这让我得到以下输出：

```
I [2013-01-22 17:46:00]  INFO: Started on drbunix:///tmp/god.17165.sock
I [2013-01-22 17:46:00]  INFO: sidekiq move 'unmonitored' to 'up'
I [2013-01-22 17:46:00]  INFO: sidekiq moved 'unmonitored' to 'up' 
```

使用`$god start sidekiq`我得到：

```
Sending 'start' command

The following watches were affected:
  sidekiq 
```

但是我没有从上帝那里得到任何输出，sidekiq 的日志中没有写入任何内容，而且我可以清楚地看到使用`$ ps auxwww | grep sidekiq`.

```
# config.god

PROJECT_ROOT = ENV['PROJECT_ROOT'] || File.dirname(__FILE__) # Dir containing this file

# Sidekiq Process

God.watch do |w|
  w.name = "sidekiq"
  w.group = "conversion"
  w.dir = PROJECT_ROOT
  w.interval = 20.seconds
  w.start_grace = 10.seconds
  w.restart_grace = 10.seconds
  w.behavior(:clean_pid_file)
  # w.keepalive
  w.start = "bundle exec sidekiq -v -C #{File.join(PROJECT_ROOT, 'config.yml')}"
  w.stop = "bundle exec sidekiqctl stop '/Users/me/.god/pids/sidekiq.pid' 5"

  w.log = File.join(PROJECT_ROOT, 'log/god_sidekiq.log')

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T18:03:29.393

尝试这个：

```
# config.god

PROJECT_ROOT = ENV['PROJECT_ROOT'] || File.dirname(__FILE__) # Dir containing this file

# Sidekiq Process
pid_file = '/Users/me/.god/pids/sidekiq.pid'
God.watch do |w|
  w.name = "sidekiq"
  w.group = "conversion"
  w.dir = PROJECT_ROOT
  w.interval = 20.seconds
  w.start_grace = 10.seconds
  w.restart_grace = 10.seconds
  w.pid_file = pid_file
  w.behavior(:clean_pid_file)

  w.start = "cd #{PROJECT_ROOT}; bundle exec sidekiq -v -C #{File.join(PROJECT_ROOT, 'config.yml')} -P #{pid_file}&"
  w.stop = "cd #{PROJECT_ROOT}; bundle exec sidekiqctl stop #{pid_file} 5"

  w.log = File.join(PROJECT_ROOT, 'log/god_sidekiq.log')

  # determine the state on startup
  w.transition(:init, {true => :up, false => :start}) do |on|
    on.condition(:process_running) do |c|
      c.running = true
    end
  end

  # determine when process has finished starting
  w.transition([:start, :restart], :up) do |on|
    on.condition(:process_running) do |c|
      c.running = true
    end

    # failsafe
    on.condition(:tries) do |c|
      c.times = 5
      c.transition = :start
    end
  end

  # start if process is not running
  w.transition(:up, :start) do |on|
    on.condition(:process_exits)
  end

  # lifecycle
  w.lifecycle do |on|
    on.condition(:flapping) do |c|
      c.to_state = [:start, :restart]
      c.times = 5
      c.within = 5.minute
      c.transition = :unmonitored
      c.retry_in = 10.minutes
      c.retry_times = 5
      c.retry_within = 2.hours
    end
  end
end 
```

# c++ - 在另一个命名空间中使用外部 yyin

> ID：14464935
> 
> 赞同：1
> 
> 时间：2013-01-22T17:52:14.320
> 
> 标签：c++, linker, bison, extern, flex-lexer

我正在尝试在我的小项目中使用 flex 和 bison 工具。为了正确理解和使用我正在编写迷你计算器的工具。

问题是我无法`yyin`在另一个命名空间中声明的类的函数中使用该变量。

该`main()`函数应读取运行参数并`Example::parse_file()`在命名空间中使用`ExNameSpace`。

在链接编译文件时，我得到：

```
make all
bison --defines=parser.hpp --output=parser.cpp parser.y
flex --outfile=scanner.cpp scanner.l
g++ -o program scanner.cpp parser.cpp Example.cpp -lfl 
/tmp/ccyQN7z9.o: In function `ExNameSpace::Example::parse_file(std::string const&)':
parser.cpp:(.text+0xabc): undefined reference to `ExNameSpace::yyin'
parser.cpp:(.text+0xac3): undefined reference to `ExNameSpace::yyin'
parser.cpp:(.text+0xb3e): undefined reference to `ExNameSpace::yyin'
collect2: error: ld returned 1 exit status
make: *** [app] Error 1 
```

我的建议是该变量`yyin`是由 flex 在外部定义的，但没有正确移植到`ExNameSpace`命名空间。

附加我使用的源文件

**示例.h：**

```
#include <string>
#include <iostream>

#ifndef EXAMPLE_H_
#define EXAMPLE_H_

namespace ExNameSpace {
    /* global namespace variable */
    extern std::ostream *err;
    class Example {
    public:
        bool parse_file (const std::string &file);
};
}
#endif /* EXAMPLE_H_ */ 
```

**示例.cpp：**

```
#include "Example.h"
namespace ExNameSpace {
    std::ostream *err = &std::cout;
    Example::Example() {}
    Example::~Example() {}
} 
```

**解析器.y：**

```
%{
#include <stdio.h>
#include "Example.h"

void yyerror (const char *);
int yylex();

using namespace ExNameSpace;
%}

%%
/* bison rules */
%%

void yyerror(const char *message)
{
  extern int yylineno;
  *err << "(line " << yylineno << ") " << message << std::endl;
}

bool Example::parse_file(const std::string &file)
{
  extern FILE* yyin;
  if(!(yyin=fopen(file.c_str(), "r")))
  {
    *err << "Could not open " << file << std::endl;
    return true;
  }
  int result=yyparse();
  fclose(yyin);
  return result;        
} 
```

**扫描仪.l：**

```
%{
#include "parser.hpp"
#include "Example.h"

using namespace ExNameSpace;
%}

%%
/* flex rules */
%% 
```

**生成文件：**

```
all: app
app: scanner.l parser.y
    bison --defines=parser.hpp --output=parser.cpp parser.y
    flex --outfile=scanner.cpp scanner.l
    g++ -o program scanner.cpp parser.cpp Example.cpp -lfl 

clean:
    rm parser.hpp parser.cpp scanner.cpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:54:13.480

问题是声明

```
extern FILE* yyin; 
```

在函数中`Example::ParseFile`。由于此声明符没有显式范围，并且包含方法是命名空间`ExNameSpace`的一部分，因此声明隐含在该命名空间中。但是，由于您从未`ExNameSpace::yyin`在任何地方定义，因此您会遇到链接故障。bison 创建的默认值`yyin`在全局命名空间中。所以你需要将此行更改为

```
extern FILE * ::yyin; 
```

或者完全摆脱它，因为文件范围声明`yyin`应该已经在文件中的这一点可见，因此不需要本地声明来隐藏文件范围声明。

# php - Internet Explorer 9 上的子目录无法在根路径 (/) 上使用 jQuery 设置 Cookie

> ID：14464936
> 
> 赞同：2
> 
> 时间：2013-01-22T17:52:13.930
> 
> 标签：php, jquery, internet-explorer, cookies, path

我在根目录上使用 jQuery 设置一个 cookie，代码如下：

```
$.cookie('key', 'value', {
    path: '/',
    expires: 30
}); 
```

然后我在整个网站上读取 cookie，但 IE9 只会在主页 ( `www.example.com/`) 上找到 cookie，而不是其他页面 (`www.example.com/subdir`或`www.example.com/subdir/sub`)。

事实上，当我`var_dump($_COOKIE)`在任何子目录页面上时，我得到的只是`array(0) {}`

我可以通过缓存 -> 查看 cookie 信息来查看 cookie。它在那里并设置为`/`。

在所有其他浏览器中完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:17:12.047

设置你的cookie如下：

```
$.cookie('key', 'value', { path: '/', domain: 'example.com', expires: 30 }); 
```

有关更多信息，请查看[**Cookie 和域**](http://www.electrictoolbox.com/cookies-and-domains/)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:11:35.500

经过一番研究，我们得出的结论是，问题实际上是 W3 Total Cache 的缓存问题。

# java - 从 JAVA 文件中提取特定数据

> ID：14464937
> 
> 赞同：1
> 
> 时间：2013-01-22T17:52:16.657
> 
> 标签：java, fasta

```
>1A3B:H|PDBID|CHAIN|SEQUENCE
IVEGSDAEIGMSPWQVMLFRKSPQELLCGASLISDRWVLTAAHCLLYPPWDKNFTENDLLVRIGKHSRTRYERNIEKISM
LEKIYIHPRYNWRENLDRDIALMKLKKPVAFSDYIHPVCLPDRETAASLLQAGYKGRVTGWGNLKETWTANVGKGQPSVL
QVVNLPIVERPVCKDSTRIRITDNMFCAGYKPDEGKRGDACEGDSGGPFVMKSPFNNRWYQMGIVSWGEGCDRDGKYGFY
THVFRLKKWIQKVIDQFGE
>1A3B:I|PDBID|CHAIN|SEQUENCE
GGQSHNDGDFEEIPEEYL
>1A3B:L|PDBID|CHAIN|SEQUENCE
TFGSGEADCGLRPLFEKKSLEDKTERELLESYIDGR 
```

这是存储在文本文件中的数据。我如何去严格地提取数据之间

```
 ">1A3B:I|PDBID|CHAIN|SEQUENCE" and ">1A3B:L|PDBID|CHAIN|SEQUENCE", 
```

当只有

```
">1A3B:I|PDBID|CHAIN|SEQUENCE" 
```

我们都知道。

此外，在这个给定的示例中，虽然要检索的数据只有一行，但它也可以变化到多行。到目前为止，我尝试将文件的全部内容写入字符串变量并使用子字符串，但由于最终索引未知，该逻辑似乎存在缺陷。请帮忙

> 导入java.io.*；公共类 ReadingChainSpecificFastaSequence {
> 
> ```
>  public static void main(String[] args) {
> 
>             File file = new File("1A3B.fasta.txt");
>             BufferedInputStream bin = null;
> 
>             try
>             {
> 
>                     FileInputStream fin = new FileInputStream(file);
> 
>                     bin = new BufferedInputStream(fin);
> 
>                     byte[] contents = new byte[1024];
> 
>                     int bytesRead=0;
>                     String strFileContents=null;
> 
>                     while( (bytesRead = bin.read(contents)) != -1){
> 
>                             strFileContents = new String(contents, 0, bytesRead);
> 
>                     }
>                    // System.out.print(strFileContents); 
>                     String search = ">1A3B:I|PDBID|CHAIN|SEQUENCE";
>                     int start = (strFileContents.indexOf(search))+30;
>                     String search2= ">1A3B:L|PDBID|CHAIN|SEQUENCE";
>                     int end= (strFileContents.indexOf(search2));
>                    String result = strFileContents.substring(start,end);
> 
>             }
>             catch(FileNotFoundException e)
>             {
>                     System.out.println("File not found" + e);
>             }
>             catch(IOException ioe)
>             {
>                     System.out.println("Exception while reading the file "+ ioe);
>             }
>             finally
>             {
> 
>                     try{
>                             if(bin != null)
>                                     bin.close();
>                     }catch(IOException ioe)
>                     {
>                             System.out.println("Error while closing thestream:"+ioe);
>                     }
> 
>             }
>     }
>     } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:06:04.207

将您的问题分解为更小、更易于定义的步骤。

您知道您的文件有一个文件结尾，并且您知道您的文件使用 > 符号来定义文本部分的开头。

*   将文件读入字符串。
*   查找第一个 > 的索引。
*   查找下一行分隔符的索引。
*   解释节标题。
*   查找下一个 > 或文件结尾的索引
*   在行分隔符和索引之间保存数据。
*   从下一行分隔符步骤的查找索引开始重复，直到文件结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:04:07.890

您似乎想阅读每一行输入，并且：

1.  如果`\`存在于该行中，则在该字符上拆分它
2.  查看拆分字符串的第一个元素并在 处将其拆分`:`以找到当前标记，将第一部分 ( `1A3B`) 保存到一个变量，将第二部分保存到另一个变量
3.  从这个“开始”标记，确定您要查找的下一个标记是：获取第一部分并将第二部分后面的字母添加到它（形成`1A3B:L`）。
4.  继续阅读每一行新的输入，将这些行存储在某种列表或数组中，直到一行以结束标记 ( `1A3B:L`) 开始。

# jquery - 在除第一行外的任何表格行中使用文件输入上传文件时，不会出现文本输入

> ID：14464938
> 
> 赞同：1
> 
> 时间：2013-01-22T17:52:25.507
> 
> 标签：jquery, html, iframe

我在这里有一个应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/InputTest.php)

请按照以下步骤操作：

1.  单击`Add Question`按钮两次以将 2 个文件输入附加到下表中：

2.  通过使用 TABLE ROW 1 中的文件输入，仅上传 2 张图像（一次一张），每次成功上传图像时，它都会在表格下方和下方显示上传文件的名称，并在文本输入中显示其 id。

3.  现在问题出在这里，在 TABLE ROW 2 中，上传一个文件。您意识到上传完成后它不会在我的表格下方显示文本输入。

所以我的问题是，如果用户在除第一表行中的文件输入之外的任何文件输入中上传文件，为什么它不会显示与这些上传文件关联的文本输入？

下面是显示文件输入以及如何将其附加到下面的 html 表中的代码，以及显示`.hiddenimg`存储文本输入的 div 的代码：

**Jquery附加文件输入表单：**

```
function GetFormImageCount(){ 
  return $('.imageuploadform').length + 1;
}

function insertQuestion(form) {

    var $tbody = $('#qandatbl_onthefly > tbody');
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $image = $("<td width='17%' class='image'></td>");

    var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" +
        "<p class='imagef1_upload_form'><label>" +
        "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" +
        "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" +
        "<p class='imagef1_upload_process'>Loading...<br/><img src='Images/loader.gif' /></p>" +
        "<input type='hidden' class='numimage' name='numimage' value='" + GetFormImageCount() + "' />" +
        "</p><p class='imagemsg'></p><p class='listImage'></p>" +
        "<iframe class='upload_target_image' name='upload_target_image' src='/' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>");

    $image.append($fileImage);

    $tr.append($image);
    $tbody.append($tr);

} 
```

**HTML 表单和表格，其中附加了文件输入表单，并且文本输入存储在`.hiddenimg`div 标记中：**

```
<form id="QandA" action="insertQuestion.php" method="post">

<table id="questionBtn" align="center">
<tr>
<th>
<input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" />
</th>
</tr>
</table>

</div>
<hr/>

<table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
<thead>
<tr>
    <th width="17%" class="image">Image</th>
</tr>
</thead>
</table>
<div id="qandatbl_onthefly_container">
<table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0" border="0">
<tbody>
</tbody>
</table>
</div>

<div class="hiddenimg"><!-- All uploaded image file ids go here --></div>

</form> 
```

下面是控制`upload`按钮、上传开始和上传完成时间的代码。

**上传按钮处理程序：**

```
 function imageClickHandler(imageuploadform){ 
  if(imageValidation(imageuploadform)){ 
      window.lastUploadImageIndex = $('.imageuploadform').index(imageuploadform); 
      return startImageUpload(imageuploadform); 
  } 
  return false; 
```

**开始上传：**

```
function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').show()
  $(imageuploadform).find('.imagef1_upload_form').hide();
  $(imageuploadform).find('.imagemsg').hide();
  sourceImageForm = imageuploadform;

      return true;
} 
```

**上传完成：**

```
 function stopImageUpload(success, imageID, imagefilename){

      var result = '';
      imagecounter++;

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
            $('.hiddenimg').eq(window.lastUploadImageIndex).append('<input type="text" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
            $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '" value="'+imageID+'">Remove</button><br/><hr/></div>');
         }

  var _imagecounter = imagecounter;

$('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
    jQuery.ajax("deleteimage.php?imagefilename=" + $(this).attr('data-image_file_name')).done(function(data) {
        $(".imagemsg" + _imagecounter).html(data);
    });

    var buttonid = $(this).attr('value');
    $(this).parent().remove();
     $("#"+ buttonid  +"").remove();
});

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:06:57.537

问题出在 stopImageUpload() 函数中。当您加载数据并将其附加到占位符时，您使用当前表单的索引选择要附加到的正确元素（如 listImage）

```
if (success == 1){
     result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
     $('.hiddenimg').eq(window.lastUploadImageIndex).append('<input type="text" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
     $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '" value="'+imageID+'">Remove</button><br/><hr/></div>');
} 
```

但是 hiddenimg 元素只是一个，所以你的选择器找不到任何 dom 元素来追加 new 。你的代码应该是这样的：

```
if (success == 1){
     result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
     $('.hiddenimg').append('<input type="text" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
     $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '" value="'+imageID+'">Remove</button><br/><hr/></div>');
} 
```

顺便说一句，表单内的表单是不好的做法[你可以嵌套 html 表单吗？](https://stackoverflow.com/questions/379610/can-you-nest-html-forms)

# c# - 已发布的网站适用于 Firefox/IE，但不适用于 Chrome

> ID：14464940
> 
> 赞同：1
> 
> 时间：2013-01-22T17:52:29.243
> 
> 标签：c#, asp.net, visual-studio-2012, .net-4.5

所以我正在使用 C#/ASP.NET Visual Studio 2012 .Net4.5 中的网站。我遇到的问题是一个简单的按钮。该网站是使用 Visual Studio Publish 发布的，并且已配置为发布。这会在目录中创建 dll 和文件，然后将其推送到开发服务器。应用程序池指向此目录。按下按钮应该调用 cs 文件中的 C# 代码（但现在在 dll 中，因为它被按下了）。这在 Firefox 和 IE 中运行良好，但在 Chrome 中它只是刷新页面而没有任何反应。这很奇怪。一些示例代码

在 .aspx.cs 文件中：

```
 protected void btnCreate_Click(object sender, EventArgs e)
    {
        // redirect to create page
        Response.Redirect("~/Schedule/Create.aspx");
    } 
```

并在 .aspx 文件中

```
 <asp:Button ID="btnCreate" runat="server" CssClass="btn btn-inverse" Text="Create Shift" OnClick="btnCreate_Click" /> 
```

我只是不明白为什么这么简单的东西在 Chrome 中不起作用。

我可能应该补充一点，在谷歌浏览器的本地机器上调试时，该页面按预期工作。这就是为什么我认为这与 chrome 读取 dll 的方式有关？然而，其他后端 .cs 的东西正在工作。只是 Response.redirect 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:06:06.953

根据[这个博客](http://bugsquash.blogspot.com/2008/12/google-chrome-caches-301-redirects.html)，谷歌浏览器缓存了 301 重定向。尝试清除缓存并尝试重定向然后，这行得通吗？如果是这样，那么您遇到了这个问题。

也许让按钮通过javascript执行重定向？

# angularjs - 向 angulars $http 服务添加排队

> ID：14464945
> 
> 赞同：16
> 
> 时间：2013-01-22T17:52:47.590
> 
> 标签：angularjs

我有一个非常古怪的 api，一次只能处理一个请求。因此，我需要确保每次发出请求时，它都会进入一个队列，并且该队列一次执行一个请求，直到它为空。

通常，我只使用 jQuery 的内置队列，因为该站点已经在使用 jQuery。但是，我不确定是否可以以某种方式装饰 $http 服务，或者将其包装在另一个服务中，该服务一次返回一个承诺，或者其他什么。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-22T21:23:42.503

这是我的解决方案： http: [//plnkr.co/edit/Tmjw0MCfSbBSgWRhFvcg](http://plnkr.co/edit/Tmjw0MCfSbBSgWRhFvcg)

这个想法是：每次运行服务都将请求添加到队列并返回承诺。当对 $http 的请求完成时，解决/拒绝返回的承诺并从队列中执行下一个任务（如果有）。

```
app.factory('srv', function($q,$http) {

  var queue=[];
  var execNext = function() {
    var task = queue[0];
    $http(task.c).then(function(data) {
      queue.shift();
      task.d.resolve(data);
      if (queue.length>0) execNext();
    }, function(err) {
      queue.shift();
      task.d.reject(err);
      if (queue.length>0) execNext();
    })
    ;
  }; 
  return function(config) {
    var d = $q.defer();
    queue.push({c:config,d:d});
    if (queue.length===1) execNext();            
    return d.promise;
  };
}); 
```

看起来很简单:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-22T04:56:23.890

在上述 Valentyn 的出色工作的基础上，我将这段代码放入了一个独立的 Angular (v1.2+) 请求/响应拦截器。它将`$http`自动对请求进行排队，而无需重新编写代码以`srv()`在任何地方使用：

```
( function() {

'use strict';

angular.module( 'app' ).config( [ '$httpProvider', function( $httpProvider ) {

    /**
     * Interceptor to queue HTTP requests.
     */

    $httpProvider.interceptors.push( [ '$q', function( $q ) {

        var _queue = [];

        /**
         * Shifts and executes the top function on the queue (if any). Note this function executes asynchronously (with a timeout of 1). This
         * gives 'response' and 'responseError' chance to return their values and have them processed by their calling 'success' or 'error'
         * methods. This is important if 'success' involves updating some timestamp on some object which the next message in the queue relies
         * upon.
         */

        function _shiftAndExecuteTop() {

            setTimeout( function() {

                _queue.shift();

                if ( _queue.length > 0 ) {
                    _queue[0]();
                }
            }, 1 );
        }

        return {

            /**
             * Blocks each request on the queue. If the first request, processes immediately.
             */

            request: function( config ) {

                var deferred = $q.defer();
                _queue.push( function() {

                    deferred.resolve( config );
                } );

                if ( _queue.length === 1 ) {
                    _queue[0]();
                }

                return deferred.promise;
            },

            /**
             * After each response completes, unblocks the next request.
             */

            response: function( response ) {

                _shiftAndExecuteTop();
                return response;
            },

            /**
             * After each response errors, unblocks the next request.
             */

            responseError: function( responseError ) {

                _shiftAndExecuteTop();
                return $q.reject( responseError );
            },
        };
    } ] );
} ] );

} )(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-14T15:15:15.917

理查德：你的代码运行完美，但它也适用于内部请求，如`template`or `$templateProviders`。

**这是仅适用于外部http**请求的解决方案

```
/**
 * Interceptor to queue HTTP requests.
 */
$httpProvider.interceptors.push(['$q', function ($q) {
    var _queue = [];

    /**
     * Executes the top function on the queue (if any).
     */
    function _executeTop() {
        if (_queue.length === 0) {
            return;
        }
        _queue[0]();
    }

    return {
        /**
         * Blocks each request on the queue. If the first request, processes immediately.
         */
        request: function (config) {
            if (config.url.substring(0, 4) == 'http') {
                var deferred = $q.defer();
                _queue.push(function () {
                    deferred.resolve(config);
                });
                if (_queue.length === 1) {
                    _executeTop();
                }
                return deferred.promise;
            } else {
                return config;
            }
        },
        /**
         * After each response completes, unblocks the next request.
         */
        response: function (response) {
            if (response.config.url.substring(0, 4) == 'http') {
                _queue.shift();
                _executeTop();
            }
            return response;
        },
        /**
         * After each response errors, unblocks the next request.
         */
        responseError: function (responseError) {
            if (responseError.config.url.substring(0, 4) == 'http') {
                _queue.shift();
                _executeTop();
            }
            return $q.reject(responseError);
        },
    };
}]); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-18T16:09:45.780

```
.factory('qHttp', function($q, $http) {
  var queue = $q.when();

  return function queuedHttp(httpConf) {
    var f = function(data) {
      return $http(httpConf);
    };
    return queue = queue.then(f, f);
  };
}) 
```

如何使用：

```
var apis = ['//httpbin.org/ip', '//httpbin.org/user-agent', '//httpbin.org/headers'];

for (var i = 0; i < 100; i++) {
  qHttp({
    method: 'get', 
    url: apis[i % apis.length]
  })
  .then(function(data) { 
    console.log(data.data); 
  });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-03T12:50:43.173

如果有人需要解决 Angular 5 中的顺序 http 调用（如 OP 所述），那么解决方案如下：

```
 import { Injectable } from '@angular/core';
    import { Response } from '@angular/http';
    import { HttpClient } from '@angular/common/http';
    import { Observable } from 'rxjs/Observable';
    import { Subject } from 'rxjs/Subject'

    export class PendingRequest {
      url: string;
      method: string;
      options: any;
      subscription: Subject<any>;

      constructor(url: string, method: string, options: any, subscription: Subject<any>) {
        this.url = url;
        this.method = method;
        this.options = options;
        this.subscription = subscription;
      }
    }

    @Injectable()
    export class BackendService {
      private requests$ = new Subject<any>();
      private queue: PendingRequest[] = [];

      constructor(private httpClient: HttpClient) {
        this.requests$.subscribe(request => this.execute(request));
      }

      /** Call this method to add your http request to queue */
      invoke(url, method, params, options) {
        return this.addRequestToQueue(url, method, params, options);
      }

      private execute(requestData) {
        //One can enhance below method to fire post/put as well. (somehow .finally is not working for me)
        const req = this.httpClient.get(requestData.url)
          .subscribe(res => {
            const sub = requestData.subscription;
            sub.next(res);
            this.queue.shift();
            this.startNextRequest();
          });
      }

      private addRequestToQueue(url, method, params, options) {
        const sub = new Subject<any>();
        const request = new PendingRequest(url, method, options, sub);

        this.queue.push(request);
        if (this.queue.length === 1) {
          this.startNextRequest();
        }
        return sub;
      }

      private startNextRequest() {
        // get next request, if any.
        if (this.queue.length > 0) {
          this.execute(this.queue[0]);
        }
      }
    } 
```

如果有人想查看正在工作的 plunker，那么[这里就是正在工作的 plunker](https://plnkr.co/edit/kTq39vYy3eyHDwikJ5Jx?p=preview)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-14T13:46:30.063

我的两个队列：

1.  顺序队列QueueHttp：一个接一个地执行请求

代码：

```
app.factory('QueueHttp', ($http, $q) => {
    let promise = $q.resolve();

    return (conf) => {
        let next = () => {
            return $http(conf);
        };

        return promise = promise.then(next);
    };
}); 
```

用法：

```
return QueueHttp({
           url: url,
           method: 'GET'
       }); 
```

2.  延迟队列DelayHttp：按延迟量执行请求

代码：

```
app.factory('DelayHttp', ($http, $timeout) => {
    let counter = 0,
        delay = 100;

    return (conf) => {
        counter += 1;

        return $timeout(() => {
            counter -= 1;
            return $http(conf);
        }, counter * delay);
    };
}); 
```

用法：

```
return DelayHttp({
           url: url,
           method: 'GET'
       }); 
```

# actionscript-3 - 如何忽略鼠标事件

> ID：14464954
> 
> 赞同：0
> 
> 时间：2013-01-22T17:53:25.177
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder

我有一个可拖动的组件。但是，如果用户在鼠标位于文本字段上时拖动，则无法拖动它。如何设置文本字段，以便用户可以单击并拖动界面的该部分？

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"  creationComplete="init()" width="210" height="150" styleName="noteStyle" >
<mx:Script>
    <![CDATA[
        public var testId:int;
        public var buttonNumber:int;
        public function init():void{
            this.addEventListener(MouseEvent.MOUSE_DOWN, makeDraggable)
            this.addEventListener(MouseEvent.MOUSE_UP, endDrag)
            this.buttonMode = true;
            this.useHandCursor = true;
        }
        public function saveButtonHandler():void{
            dispatchEvent(new Event  ( "noteClosed"));
        }
        public function cancelButtonHandler():void{
            dispatchEvent(new Event  ( "noteCancelled"));
        }
        public function makeDraggable(e:Event):void{
            //If the target and the current target are the same, then it must be the background, so make it draggable.
            //Stops the text field and buttons from being draggable
            trace("Target= "+e.currentTarget+" "+e.target)
            if(e.currentTarget==e.target){
                this.startDrag();
            }
        }
        public function endDrag(e:Event):void{
            this.stopDrag();
        }
    ]]>
</mx:Script>
    <mx:Text  text="Add a note: Drag to move"   styleName="myriadPro14"   selectable="false"   />
    <mx:Button  id="saveButton" label="Save" x="146" y="120" click="saveButtonHandler()" />
    <mx:Button  id="cancelButton" label="Cancel" x="10" y="120" click="cancelButtonHandler()"  />
    <mx:TextArea id="noteText" width="200" height="80"     horizontalCenter="0" verticalCenter="-12"/>
</mx:Canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:56:21.053

也向文本字段添加事件侦听器。

# javascript - 三次贝塞尔曲线，如何为 y 获得 x？

> ID：14464955
> 
> 赞同：2
> 
> 时间：2013-01-22T17:53:29.980
> 
> 标签：javascript, math

我的三次贝塞尔函数由`[0.1,0.8,0.2,1]`where定义`[x1,y1,x2,y2]`。

我在 1200 毫秒的时间内将元素旋转 720 度。`t`每60度如何计算？即，我需要在对象转动`60, 120, 180, 240, 300, 360, 420, 480, 540, 600, 660, 720`度数时触发 JavaScript 事件。

如果我没记错的话，我需要得到 y 所在的每个 x 值，`(60/720), (60/720)*2, (60/720)*3, (60/720)*4, (60/720)*5, (60/720)*6, (60/720)*7, (60/720)*8, (60/720)*9, (60/720)*10, (60/720)*11, (60/720)*12`然后乘以 x*duration (1200ms)。

我查看了[http://blog.greweb.fr/2012/02/bezier-curve-based-easing-functions-from-concept-to-implementation/](http://blog.greweb.fr/2012/02/bezier-curve-based-easing-functions-from-concept-to-implementation/)以及[https://github.com/arian /cubic-bezier](https://github.com/arian/cubic-bezier)实现。

如果到目前为止一切都是正确的，我如何获得 y 的 x 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:40:00.810

首先，你所拥有的不是贝塞尔样条，而是一条[缓动曲线](http://cubic-bezier.com/#.1,.8,.2,1)：三次贝塞尔样条的特殊情况，起点在 (0.0,0.0) 和终点 (1.0,1.0)，用于生成动画。

如果您使用相等的时间间隔而不是相等的角度旋转间隔，那么您的动画会看起来更好。`t`本质上是一个时间参数，所以曲线由下式给出

```
y(t) = 3*(1-t)^2*t*y1 + 3*(1-t)*t^2*y2 + t^3. 
```

其中`t`属于区间`[0.0,1.0]`。

那么实际角度将是

```
α(t) = 720 * y(T/1200)
     = 720 * (2.4*(1-T/1200)^2*(T/1200) + 3*(1-T/1200)*(T/1200)^2 + (/1200)^3) 
```

时间在哪里`T`，以毫秒为单位。

# c - 为什么分叉时终端和文件之间的输出不同？

> ID：14464959
> 
> 赞同：4
> 
> 时间：2013-01-22T17:53:39.437
> 
> 标签：c, fork

我正在学习与 合作`fork()`，我有一些问题。

考虑以下代码：

```
#include <stdio.h>
#include <unistd.h>

int main()
{
   int i;

   for(i = 0; i < 5; i++)
   {
      printf("%d", i);

      if((i%2)==0)
         if(fork())
            fork();
   }
} 
```

当我输出到终端时，我得到了我期望的结果（即：）`0,1,1,1,2,2,2,...`。但是当我输出到文件时，结果完全不同：

*   案例1：（输出到终端，例如：）`./a.out`：

    结果是：`0,1,1,1,2,2,2,...`

*   案例2：（输出到文件，例如`./a.out > output_file`：）

    结果是：`0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,...`

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:57:06.053

当您输出到文件时，stdio 库会自动对出站位进行块缓冲。

当程序调用`exit(2)`或从`main(),`任何剩余的缓冲位返回时被刷新。

在这样一个不会产生太多输出的程序中，*所有*的 I/O 都将`main(),`在目标不是 tty 时返回之后发生。这通常会自行改变 I/O 操作的模式和顺序。

在这种情况下，结果会因一系列`fork()`调用而变得更加复杂。这将在每个子图像中复制部分填充和尚未刷新的 I/O 缓冲区。

在程序调用之前，`fork(),`可能首先使用 fflush(3) 刷新 I/O。如果未完成此刷新，则您可能希望除一个之外的所有进程（通常：子进程）来`_exit(2)`代替`exit(3)`或返回，`main(),`以防止多次输出相同的位。（_exit(2) 只是执行退出系统调用。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T17:58:54.057

程序中的`fork()`内部`if`块执行**两次**，因为一旦fork成功，程序由两个进程（**子**进程和**父**进程）控制。所以`fork()`内部`if`块由子进程和父进程执行。因此它的输出将与预期不同，因为它由两个不同的进程控制，并且它们**的执行顺序**未知。IE。孩子或父母可以在每个之后先执行`fork()`

对于输出和文件之间的行为差​​异。这就是原因。

您写入缓冲区（`file(disk)`最终写入）的内容不能保证立即写入文件（磁盘）。**只有在main()**执行**完成**后，它才主要刷新到磁盘。**而在main()**执行期间，它会输出到**终端**。

 **在写入磁盘中的文件之前，`kernel`实际上将数据复制到缓冲区中，然后在后台，内核收集所有脏缓冲区，对它们进行最佳排序并将它们写入文件（磁盘）。这称为**writeback**。它还允许**内核**将写入推迟到更多的**空闲**时段，并将许多**写入批处理在一起**。

为了避免这种行为，在程序中使用三种不同的条件检查总是好的`fork()`

```
int pid;
if((pid = fork()) == -1 )
{ //fork unsuccessful 
 }
else if ( pid > 0)
{ //This is parent
 }
else
{//This is child
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T18:07:03.223

缓冲流有时会产生一些奇怪的结果......尤其是当您有多个进程使用相同的缓冲流时。强制[刷新](http://en.cppreference.com/w/c/io/fflush)缓冲区，你会看到不同的结果：

```
int main()
{
   int i;
   FILE * fd = fopen(yourfile, "w");
   for(i = 0; i < 5; i++)
   {
      fprintf(fd, "%d", i);
      fflush(fd);
      if((i%2)==0)
         if(fork())
            fork();
   }
} 
```

此外，出于调试目的，最好转储进程的 ID，以便您可以查看哪个进程产生了哪个进程，并更好地了解正在发生的事情。[`getpid()`](http://support.sas.com/documentation/onlinedoc/sasc/doc/lr2/getpid.htm)可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T06:02:12.433

> 为什么分叉时终端和文件之间的输出不同？

C 标准库函数使用内部缓冲来加速。大多数实现对文件流使用完全缓冲的 IO，对 stdin/stdout 使用行缓冲，对 stderr 使用无缓冲的 IO。

因此，您的问题可以通过多种方式解决：

1.  在 fork via 之前使用显式缓冲区刷新`fflush(3)`
2.  通过手动设置缓冲区类型`setvbuf(3)`
3.  使用`write(2)`而不是 stdlib 的`printf(3)`
4.  `stderr`默认通过`fprintf(3)`*****输出到
5.  在分叉的进程中退出`_exit(2)`而不是`exit(3)`******

如果出现以下情况，最后两个可能无法按预期工作：
* 默认情况下，您的实现不使用对 stderr 的无缓冲写入（这是 ISO C 要求的）
** 您在子项中写入的缓冲区大小超过了默认缓冲区大小，并且如果被自动刷新。

**附言**。再一次，如果您需要更深入地了解标准库函数和缓冲，我建议您阅读[W. Richard Stevens 和 Stephen A. Rago 的《UNIX 环境中的高级编程》（第 2 版）](https://rads.stackoverflow.com/amzn/click/com/0201433079)。

**聚苯乙烯**。顺便说一句，您的问题是 C/C++ 程序员职位的一个非常受欢迎的面试问题。**

# single-sign-on - 使用 SAML2 在 ADFS2 中将整个域注册为依赖方信任？

> ID：14464960
> 
> 赞同：2
> 
> 时间：2013-01-22T17:53:50.567
> 
> 标签：single-sign-on, adfs2.0, saml-2.0

我在 ADFS2 中遇到 SAML2 问题，在 ADFS2 中使用 WS-Fed 时我没有遇到过。最初使用 WS-Fed 时，我设置了一个依赖方信任，例如`https://www.example.com/`，在我的应用程序中，我们经常需要重新进行身份验证，并且我会发送 (wtrealm) URL，例如`https://www.example.com/home.aspx`或`https://www.example.com/someOtherPage.aspx`。我总是会被重新认证并被重定向回我作为 wtrealm 发送的任何页面，这看起来就像`https://www.example.com/`我唯一的依赖方信任就足够了。现在似乎使用 SAML2，我需要为可能发送的每个可能的 URL 显式设置依赖方信任。它甚至看起来是区分大小写的。怎么会这样？我错过了什么吗？如果是这种情况，任何带有不可预知查询字符串的 URL 怎么可能工作？

# mediawiki - Apache Stanbol 和（语义）媒体 Wiki

> ID：14464962
> 
> 赞同：2
> 
> 时间：2013-01-22T17:53:56.550
> 
> 标签：mediawiki, semantics, jcr, cmis, apache-stanbol

是否可以使用 Apache Stanbol 使用语义服务扩展 Media Wiki？Stanbol[网站](http://stanbol.apache.org/docs/trunk/components/cmsa)表示可以使用“任何符合 JCR 或 CMIS 规范的内容存储库”。但是，我找不到（语义）媒体维基是否属于这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T22:40:10.670

通常 JCR 和 CMIS 都是在 Java 环境中更流行的协议。据我所知，MediaWiki 不支持其中任何一个。

但是，您仍然可以通过其 RESTful 接口使用 Stanbol。

# c# - 如何从我的类和运行时文件创建 exe 文件

> ID：14464964
> 
> 赞同：-4
> 
> 时间：2013-01-22T17:54:04.630
> 
> 标签：c#

> **可能重复：**
> [如何使用 c# 制作 exe 文件](https://stackoverflow.com/questions/14464613/how-to-make-exe-file-with-c-sharp)

我有一个 C# 程序。该程序从用户那里获取参数（文件例如 *.jpg），最后在单击用户构建按钮后，我的程序在 Windows 应用程序（cs：Form）中创建另一个程序，该程序具有一个图像查看器并将应用程序存储在一个 exe 文件中. 我需要有关如何从表单类创建 exe 文件的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:55:10.643

我刚刚在你的封闭问题上为你回答了这个问题。

这是一个关于使用 VS2010 express 从代码构建 EXE 的很棒的教程

如果您最终完成了本教程然后卡住了，请在此处发布，我们可以为您提供帮助。现在我们不知道你被困在什么地方或什么地方。

根据 Gabe 的要求，来自另一个来源。[http://www.ehow.com/how_6352221_create-studio-2008-express-edition.html](http://www.ehow.com/how_6352221_create-studio-2008-express-edition.html)

指示

1

在 Visual Studio 2008 Express Edition 中打开您的应用程序。

2 单击构建。您现在有两个选择：您可以选择简单地构建一个 EXE 文件及其库，或者您可以选择发布一个安装应用程序，将程序安装在客户的计算机上。这将自动为您的应用程序构建“开始”菜单快捷方式和卸载程序。

如果您只想构建一个 EXE 文件，请转到第三步。如果要发布安装程序，请转到第四步。

3

单击“构建（您的项目名称）”。

如果您的项目中没有错误，那么窗口底部的状态栏将很快显示“构建成功”。

使用 Windows 资源管理器导航到项目的位置。默认情况下，它将位于 Windows XP 下的“我的文档”文件夹中。

要到达那里，请单击“开始”、“我的文档”、“Visual Studio 2008”、“项目”，然后单击带有项目名称的文件夹。同样，将有另一个与您的项目同名的文件夹。

进入“bin”目录。此处将有一个“Debug”文件夹或“Release”文件夹（或两者都有）。如果有，请选择“Release”。

您的 .EXE 文件将位于该文件夹中。

4

单击“发布（您的项目名称）”。

单击“浏览”并选择您希望发布应用程序的位置。目前，桌面上的文件夹将是一个不错的选择。

在下一个窗口中，您将被询问用户将如何安装应用程序。选择“从可执行文件”。

接下来，您将被询问应用程序应如何检查自身的更新。目前，选择“此应用程序不会检查更新”。

点击“完成”。

三个文件将放置在您桌面上的文件夹中：安装应用程序、一个 autorun.ini 文件（允许您的安装程序从 CD 自动运行）和一个安装应用程序所需的清单文件。

阅读更多：如何在 Visual Studio 2008 Express Edition 中创建 EXE 程序文件 | eHow.com [http://www.ehow.com/how_6352221_create-studio-2008-express-edition.html#ixzz2IjDfQpUQ](http://www.ehow.com/how_6352221_create-studio-2008-express-edition.html#ixzz2IjDfQpUQ)

# sharepoint-2010 - MMS 的内容类型中心可以与 MMS 位于不同的场吗？

> ID：14464965
> 
> 赞同：0
> 
> 时间：2013-01-22T17:54:06.683
> 
> 标签：sharepoint-2010

我们在北美有一个农场，在南美有一个。我们需要每个场中的本地 MMS，但希望在这些服务之间共享一个内容类型中心 - 我们希望将两个场上的 MMS 指向北美内容类型中心。

![CTH 设置](../Images/8c6c750bb2b1c042080c5644f28efb6c.png)

那会奏效吗？我认为这取决于服务是通过对象模型还是通过 Web 服务与集线器对话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:35:57.063

我知道答案是“不”。

一些同事与 Microsoft 进行了架构验证练习，虽然我没有听到直接的答案，但他们建议我们应该复制集线器。因此，可以安全地假设简单地指向远程集线器是不可能的。

# c++ - Haxe 到 C++ 的转换：生成 C++ 源代码？

> ID：14464969
> 
> 赞同：0
> 
> 时间：2013-01-22T17:54:15.913
> 
> 标签：c++, converter, haxe, cross-language

我对 Haxe 很陌生，特别想用它从 Haxe 生成 C++ 代码（实际上流程是 AS3->Haxe，然后是 Haxe->C++）。我的理解是 Haxe 将 Haxe 直接编译为（C++）可执行文件。但它是否明确输出生成的源？

Haxe 能否/是否提供它在此过程中生成的 C++ 代码？-- 因为我可以在另一个 C++ 交叉编译器（如 Marmalade）中获取并使用这个源代码（当然需要修改）。

我也想知道转换的强度。如果 Haxe 确实生产/提供了 C++ 源代码，那么这个源代码是什么样的？例如，内存管理是否全部打包到本机 DLL/SO 中？在这种情况下，Haxe 似乎不是一个理想的选择。

（免责声明：我只是想在走这条路之前获得一些初步信息。事实上，更具体地说，我想将 Marmalade 从 AS3 移植到 C++。所以我想知道是否值得编写自己的转换器或者如果 Haxe 提供了一个可行的替代方案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:41:22.353

如果您希望通过 Haxe 从 AS3->C++ 开始，那么您应该查看[NME](http://www.nme.io/)。它允许您使用 Flash Player API 编写应用程序以编译为本地应用程序（通过 C++ 后端）、swfs 和 html5 应用程序。

它还为资产等提供了完整的工作流程。它与 FlashDevelop（仅限 Windows）和 MonoDevelop 有很好的集成，但您当然可以使用任何 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:48:49.763

是的，Haxe 会为您输出源代码。从来没有深入研究过它，但它就在那里。当您为 C++ 目标（例如 Windows）进行编译时，可以在 bin\cpp\windows\obj 下找到源代码。

# python - 如何在python中使用套接字

> ID：14464974
> 
> 赞同：-3
> 
> 时间：2013-01-22T17:54:42.947
> 
> 标签：python, sockets, buffer

这是我第一次使用 python 套接字。我正在制作一个蛇游戏，用于 LAN PC。Python 使用一段**时间**在客户端 - 服务器中连接和发送信息。
我需要知道多少信息，我可以同时发送，而不影响游戏的速度。我有一个包含 4000 条记录的数组，它们对应于游戏的坐标。我是否需要做一个算法来最小化传输？，如何？...建议，想法...
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:00:08.810

Python 中的套接字是从 BSD 接口定义的。您可以从[套接字手册](http://docs.python.org/2/library/socket.html)开始。服务器和客户端的制作方式与 C 类似。

# javascript - 获取 Wikipedia 上包含特定单词的所有页面标题

> ID：14464986
> 
> 赞同：-2
> 
> 时间：2013-01-22T17:55:50.330
> 
> 标签：javascript, mediawiki, sparql, wikipedia, dbpedia

我正在使用 HTML 和 JavaScript编写[“自动 wikifier”工具。](http://jsfiddle.net/jarble/gjqWy/78/)对于文本中要维基化的每个单词，我需要获取包含该单词的页面列表（以便文本中的匹配短语可以自动被维基化，如果它们被发现）。有没有办法使用 Wikipedia 的 API 或 Web 服务之一来获取包含特定单词的所有 Wikipedia 页面的列表？

```
function getMatchingPageTitles(theString){
    //get a list of all matching page titles for a specific string, using one of Wikipedia's APIs or web services
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T18:23:43.697

[首先](http://en.wikipedia.org/wiki/First)，[我](http://en.wikipedia.org/wiki/I%27m) [不确定](http://en.wikipedia.org/wiki/Not) [我](http://en.wikipedia.org/wiki/I)[是否](http://en.wikipedia.org/wiki/Sure) [理解](http://en.wikipedia.org/wiki/Understand)[这样](http://en.wikipedia.org/wiki/How)[的](http://en.wikipedia.org/wiki/That)[东西](http://en.wikipedia.org/wiki/Something)[会有](http://en.wikipedia.org/wiki/Would)[什么](http://en.wikipedia.org/wiki/Be)[用处](http://en.wikipedia.org/wiki/Useful)。[_](http://en.wikipedia.org/wiki/Like) （维基百科有所有常用词的文章，我认为指向它们的链接没有任何用处。）

但如果你真的想做这样的事情，我认为更好的方法是使用[API](https://www.mediawiki.org/wiki/API)来找出输入文本中的哪些单词有文章。

例如，对于 string `I am writing an "auto-wikifier" tool`，您的查询可能类似于：

[http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=I|am|writing|an|auto-wikifier|tool](http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=I|am|writing|an|auto-wikifier|tool)

答案是：

```
<api>
  <query>
    <normalized>
      <n from="am" to="Am" />
      <n from="writing" to="Writing" />
      <n from="an" to="An" />
      <n from="auto-wikifier" to="Auto-wikifier" />
      <n from="tool" to="Tool" />
    </normalized>
    <pages>
      <page ns="0" title="Auto-wikifier" missing="" />
      <page pageid="2513432" ns="0" title="Am" />
      <page pageid="2513422" ns="0" title="An" />
      <page pageid="25346998" ns="0" title="I" />
      <page pageid="30677" ns="0" title="Tool" />
      <page pageid="32977" ns="0" title="Writing" />
    </pages>
  </query>
</api> 
```

几点注意事项：

*   结果不是您指定的顺序。
*   如果页面不存在，则结果具有`missing=""`属性。
*   JSON 和 JSONP 格式也可用，可能更适合 JavaScript。
*   `titles`每个查询的参数限制为 50 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:46:10.587

[API:Allpages](http://www.mediawiki.org/wiki/API%3aAllpages)是一个有趣的开始。可悲的是，[它仅限于 500 个查询](http://en.wikipedia.org/w/api.php?action=query&list=allpages&apfrom=Kre&aplimit=500)

# java - 解释 jstat 结果

> ID：14464987
> 
> 赞同：34
> 
> 时间：2013-01-22T17:55:49.837
> 
> 标签：java, memory-management

我是 jstat 工具的新手。因此，我做了一个如下示例。

```
./jstat -gcutil -t 4001 5000
Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT
       565088.4   0.00   0.89  75.86  40.59  84.80    405    3.822     4    0.549    4.371
       565093.4   0.00   0.89  77.81  40.59  84.80    405    3.822     4    0.549    4.371
       565098.4   0.00   0.89  77.81  40.59  84.80    405    3.822     4    0.549    4.371
       565103.5   0.00   0.89  77.85  40.59  84.80    405    3.822     4    0.549    4.371
       565108.5   0.00   0.89  77.85  40.59  84.80    405    3.822     4    0.549    4.371
       565113.4   0.00   0.89  77.85  40.59  84.80    405    3.822     4    0.549    4.371

jstat -gc output

 S0C    S1C    S0U    S1U      EC       EU        OC         OU       PC     PU    YGC     YGCT    FGC    FGCT     GCT
704.0  704.0   0.4    0.0    6080.0   4013.8   14928.0     6335.2   21248.0 18019.6    436    3.957   4      0.549    4.506
704.0  704.0   0.4    0.0    6080.0   4016.6   14928.0     6335.2   21248.0 18019.6    436    3.957   4      0.549    4.506
704.0  704.0   0.4    0.0    6080.0   4135.4   14928.0     6335.2   21248.0 18019.6    436    3.957   4      0.549    4.506
704.0  704.0   0.4    0.0    6080.0   4135.4   14928.0     6335.2   21248.0 18019.6    436    3.957   4      0.549    4.506
704.0  704.0   0.4    0.0    6080.0   4135.4   14928.0     6335.2   21248.0 18019.6    436    3.957   4      0.549    4.506
704.0  704.0   0.4    0.0    6080.0   4135.4   14928.0     6335.2   21248.0 18019.6    436    3.957   4      0.549    4.506 
```

这个结果说明了什么？哪些是要寻找可能的内存问题的列，例如内存泄漏等。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-01-16T05:52:03.983

gcutil 以百分比利用率提供统计信息

```
-gcutil Option
Summary of Garbage Collection Statistics 
Column  Description
S0      Survivor space 0 utilization as a percentage of the space's current capacity.
S1      Survivor space 1 utilization as a percentage of the space's current capacity.
E       Eden space utilization as a percentage of the space's current capacity.
O       Old space utilization as a percentage of the space's current capacity.
P       Permanent space utilization as a percentage of the space's current capacity.
YGC     Number of young generation GC events.
YGCT    Young generation garbage collection time.
FGC     Number of full GC events.
FGCT    Full garbage collection time.
GCT     Total garbage collection time. 
```

gc 根据分配的空间和使用的空间提供统计信息。

```
-gc Option
Garbage-collected heap statistics 
Column  Description
S0C     Current survivor space 0 capacity (KB).
S1C     Current survivor space 1 capacity (KB).
S0U     Survivor space 0 utilization (KB).
S1U     Survivor space 1 utilization (KB).
EC      Current eden space capacity (KB).
EU      Eden space utilization (KB).
OC      Current old space capacity (KB).
OU      Old space utilization (KB).
PC      Current permanent space capacity (KB).
PU      Permanent space utilization (KB).
YGC     Number of young generation GC Events.
YGCT    Young generation garbage collection time.
FGC     Number of full GC events.
FGCT    Full garbage collection time.
GCT     Total garbage collection time. 
```

来源：[文档](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jstat.html)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-22T18:00:36.560

请参阅文档：

[https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jstat.html](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jstat.html)

基本上一排是一个时间点。这些列显示了有关 JVM 内存区域（Survivor、Eden、...）的数据，如果不知道 JVM 是如何工作的，就不可能理解它们。

例如[在年轻代中的 JVM 垃圾收集](https://stackoverflow.com/questions/13660871/jvm-garbage-collection-in-young-generation/13661014#13661014)一文中有一些解释。

**以下是 JVM 对象生成工作原理的摘录**：

`Eden`是创建新对象的地方。当 Eden 满时，`small GC`运行 a：如果一个对象没有引用它，则将其删除，否则将存活，并移动到`Survivor`空间（一次只有一个幸存者空间在使用，所有对象从另一个空间被复制到那里）。

如果一个对象在一定次数的来回复制中幸存下来，它就会被移动到`Old`空间中。如果Old空间满了，`Full GC`就会运行a，这会影响JVM中的所有对象，所以它的操作要重得多。

此外，还有`Permanent`存储“元数据”（类描述符、字段、方法、...描述符）的空间。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-01-02T22:16:26.483

使用这个简单的[在线 jstat 可视化工具](http://nix-on.blogspot.co.nz/2015/01/java-jstat-how-to-visualize-garbage.html)来绘制 jstat GC 统计信息。

# time - 如何针对依赖于 AngularJS 中当前时间的逻辑进行编码？

> ID：14464999
> 
> 赞同：0
> 
> 时间：2013-01-22T17:56:17.993
> 
> 标签：time, angularjs

我有一些代码，它的结果取决于当前时间。说，

```
Shop.prototype.isOpen = function() {
  var now = new Date();
  var today = now.getDay();

  return this.openTime(today) <= now && now <= this.closeTime(today);
}; 
```

然后在视图中，我们显示一家商店是否营业：

```
<span ng-show="shop.isOpen()">Open now!</span> 
```

isOpen 方法被调用一次，之后不再更新。

我有很多复杂的应用程序逻辑，这些逻辑依赖于 isOpen 和类似的“有时限”数据。

保持 isOpen 数据新鲜并让应用程序逻辑/视图始终保持同步的一般方法是什么？

我认为一种解决方案是拥有一个中间对象，其值会以频繁的间隔更新，但我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:06:20.107

指令的角度文档有一个时间被更新的例子。

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

但基本上，让您的控制器设置一个 $scope（或 $rootScope，取决于您要如何访问它）属性，该属性通过 setTimeout 循环进行更新。