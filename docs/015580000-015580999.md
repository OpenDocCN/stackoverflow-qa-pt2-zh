# StackOverflow 问答 15580000-15580999

# php - ipinfodb v2 上返回的国家代码 RD

> ID：15580000
> 
> 赞同：1
> 
> 时间：2013-03-22T21:17:33.813
> 
> 标签：php, ip, country-codes

我正在通过 PHP v2 使用 ipinfodb。ipinfodb 返回我们日常调用的 3-5%，CountryCode 为“RD”。在有效的国家代码中找不到 RD。我将开始记录 RD 返回的 IP，到目前为止，我只知道这些用户中的大多数都在手机网络上。

我正在使用以下方法调用 ipinfodb 的 API。

```
$sc=stream_context_create(array('http'=>array('timeout'=>5)));
$r=file_get_contents("http://api.ipinfodb.com/v2/ip_query_country.php?key=***",0,$sc);
$a=new SimpleXMLElement($r);
$country=$a->CountryCode; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:27:19.960

→ 我做了一些研究，没有找到“ **RD ”的直接定义，但确实在**[*w3lessons*](http://www.w3lessons.com/2011/09/select-country-drop-down-based-on.html)上的某人的代码中找到了这个：

```
// Check if Local
if($country_code=="RD")
$country_code="US"; 
```

→希望有帮助：p

# c# - 使用 Dapper 和 '?'

> ID：15580001
> 
> 赞同：2
> 
> 时间：2013-03-22T21:17:41.647
> 
> 标签：c#, db2, dapper

我正在尝试使用 Dapper 与 DB2 服务器进行通信。DB2 服务器不支持开箱即用的命名参数。它期望在每个参数的查询中都有一个问号。有没有办法用 Dapper 来支持这个？也许 Dapper 可以在调用查询之前替换所有`@Name`东西？`?`如果是这样，Dapper 是否按顺序生成参数？

如果没有，似乎较新的 DB2 客户端驱动程序支持命名参数，但默认情况下它是关闭的。我不知道如何打开它。我尝试将该参数添加到`db2cli.ini`客户端的 [COMMON] 部分，但行为没有改变。那是给`OleDB`司机的。

更新：然后我尝试了 .NET 驱动程序。那个似乎解析了变量名，但是运行时我仍然遇到一个奇怪的错误：

> {"ERROR [07004] [IBM][DB2/NT64] SQL0313N EXECUTE 语句中的变量数、OPEN 语句中的变量数或参数化游标的 OPEN 语句中的参数数不等于所需值的数量。"}

我的陈述如下所示：

```
INSERT INTO XD.ALERT (PERFORMANCE_ID, CATEGORY, TITLE, DESCRIPTION, DATETIME) VALUES(1234, :Level, :AlertID, :AlertDesc, :DateTime) 
```

插入算作执行吗？据我所知，我在查询中有四个参数，在使用的命令对象中有四个。（我是`SqlMapper.cs`直接使用的，可以在调试器中看到一切。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-25T20:38:49.190

你可以试试这个：

```
 public void SaveAlert(int? level, int? alertId, string alertDesc, DateTime date)
    {            
        _conn.Execute("INSERT INTO XD.ALERT(PERFORMANCE_ID, CATEGORY, TITLE, DESCRIPTION, DATETIME) VALUES(1234, @Level, @AlertID, @AlertDesc, @DateTime)",                
            new {
                Level = level,
                AlertId = alertId,
                AlertDesc = alertDesc,
                DateTime = date
            });
    } 
```

# sql-server - 使用 $( 在 Powershell 中使用 Invoke-SqlCmd 插入字符串时出错

> ID：15580003
> 
> 赞同：5
> 
> 时间：2013-03-22T21:17:42.970
> 
> 标签：sql-server, powershell

设置：

```
CREATE TABLE MyTest (TestCol1 nchar(5)) 
```

测试：

后续工作：

```
Invoke-Sqlcmd -Database "databasename" -ServerInstance "hostname" -OutputSqlErrors $True -Query "INSERT INTO MyTest VALUES ('`$5')"
Invoke-Sqlcmd -Database "databasename" -ServerInstance "hostname" -OutputSqlErrors $True -Query "INSERT INTO MyTest VALUES ('(5')" 
```

以下失败并出现以下错误：

```
Invoke-Sqlcmd -Database "databasename" -ServerInstance "hostname" -OutputSqlErrors $True -Query "INSERT INTO MyTest VALUES ('`$(5')"
Invoke-Sqlcmd -Database "databasename" -ServerInstance "hostname" -OutputSqlErrors $True -Query "INSERT INTO MyTest VALUES ('`$`(5')" 
```

*错误：Invoke-Sqlcmd : At line:1 char:1 + Invoke-Sqlcmd -Database "databasename" -ServerInstance "hostname" -Ou ... + ~~~~~~~~~~~~~~~~~~ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~ + CategoryInfo : ParserError: (:) [Invoke-Sqlcmd], ParserException + FullyQualifiedErrorId : ExecutionFailureException,Microsoft.SqlServer.Management.PowerShell.GetScriptCommand*

经过一番研究，我发现 $( 在 powershell 中提供功能因此被保留。但是我尝试转义括号但没有成功。我尝试找到替代方法。关于如何做到这一点的任何想法？如果我在 SQL 中使用 CHAR 函数服务器可以工作，但在我的代码中处理会很痛苦。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-02T15:59:44.077

All you need to do is disable the variables lookup in the invoke-Sqlcmd by adding **-DisableVariables**. `$()` is use to pass in variable into the sql statements.

```
Invoke-Sqlcmd -InputFile $fileName -ServerInstance $serverInstance -DisableVariables 
```

Source [http://msdn.microsoft.com/en-us/library/cc281720.aspx](http://msdn.microsoft.com/en-us/library/cc281720.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:27:43.647

试试这个：

```
'INSERT INTO MyTest VALUES ("$(5")' 
```

或这个：

```
'INSERT INTO MyTest VALUES (''$(5'')' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T19:04:57.213

$(anyvalue) 是与 SQLCMD.EXE 一起使用的保留变量，通过 sql server CHAR(36) 更改符号 $：

Invoke-Sqlcmd -Database "databasename" -ServerInstance "hostname" -OutputSqlErrors $True -Query "INSERT INTO MyTest VALUES (CHAR(36)+'(5)')"

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-01T03:26:47.010

问题似乎 $( 是 Powershell 中的保留字，因此为了完成这项工作，我使用了 CHAR 函数来存储 $ (CHAR(36))。一旦我这样做了，它就起作用了，但是对于这个项目，我放弃了使用 Invoke -SqlCmd 命令并使用标准的 ADO.NET 方法。似乎 Invoke-SqlCmd 想要解析命令，并且对于保留的组合，即使您对字符进行转义，也会继续看到保留字。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-22T22:42:50.570

```
"INSERT INTO MyTest VALUES ('`$5')" 
```

输出一个字符串

```
INSERT INTO MyTest VALUES ('$5') 
```

* * *

```
"INSERT INTO MyTest VALUES ('(5')" 
```

输出一个字符串

```
INSERT INTO MyTest VALUES ('(5') 
```

* * *

```
"INSERT INTO MyTest VALUES ('`$(5')" 
```

输出一个字符串

```
INSERT INTO MyTest VALUES ('$(5') 
```

* * *

```
"INSERT INTO MyTest VALUES ('`$`(5')" 
```

输出一个字符串

```
INSERT INTO MyTest VALUES ('$(5') 
```

你想插入什么？实际上是 '$5' 还是变量 $5 的值？此外，您的变量 $5 周围有奇怪的括号。不确定是否应该是这样，或者您不了解 powershell 变量的另一个重要部分？因为这也是字符串中的一个变量`"There are $((Get-Process).Count) processes running"`。

# c# - 阅读到达页面末尾后自行完成的页面源

> ID：15580006
> 
> 赞同：0
> 
> 时间：2013-03-22T21:17:53.317
> 
> 标签：c#, browser

我想为 VK.com 编写一个页面解析器。我的问题是，页面源仅包含 50 个结果，其他结果在到达页面末尾后重新加载。

到目前为止我的代码：

```
 private void syncToolStripMenuItem_Click(object sender, EventArgs e)
    {
        string[] information, title, artist;
        int i = 0;
        List<string> joint = new List<string>();
        information = info_basic(webBrowser1.DocumentText);
        title = info_title(information);
        artist = info_artist(information);
        foreach (string str in title)
        {
            joint.Add(artist[i] + " - " + title[i]);
            i++;
        }
        listBox1.Items.Clear();
        listBox1.Items.AddRange(joint.ToArray());
    }

    private string[] info_basic(string source)
    {
        string[] temps;
        List<string> sub = new List<string>();
        temps = Regex.Split(source, "<div class=\"play_btn fl_l\">");
        foreach (string str in temps)
        {
            sub.Add(str);
        }
        sub.RemoveRange(0, 1);
        return sub.ToArray();
    } 
```

重要页面代码：

[http://csharp.bplaced.net/files/vk%20source.txt](http://csharp.bplaced.net/files/vk%20source.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:38:17.900

我建议在滚动到底部时监视从页面到 vk.com 的流量（例如，使用 fiddler http 代理），并了解页面是如何动态加载的。这很可能是通过来自 javascript 的 ajax 异步调用来完成的。然后，在代码中模拟相同的行为以加载整个页面。HttpWebRequest 类最适合此任务。

但是由于您使用的是 webBrowser 控件，并且可能它完成了加载内容的所有工作 - 您可以尝试以编程方式滚动 Web 浏览器控件视图，以便本机 js 会触发并加载内容，当您到达底部时停止，并且然后解析整个加载的页面。

# .net - 如何使用 linq to sql 检查底层空值？

> ID：15580008
> 
> 赞同：0
> 
> 时间：2013-03-22T21:18:10.473
> 
> 标签：.net, linq, linq-to-sql

我知道，如果您使用空字段查询 linq-to-sql 记录（即 DB/对象中的行），那么 linq to SQL 将允许您访问空值而不会出现空引用异常，如下所示`Dim myValue as String = myRecord.Nullfield`：

但我想查询基础数据库中的字段为空的记录。

我如何用 LINQ 做到这一点？

```
(From l In myDB.myTable Where l.Program.Equals(DBNull.Value) Select l).Count //Unexpected type code: DBNull 
```

我正在寻找什么语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:26:49.833

使用`== null`（或任何 VB.NET 等效项）。没有了`DBNull`。耶！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:28:47.337

请参阅MSDN 上的[空语义不匹配](http://msdn.microsoft.com/en-us/library/bb386909.aspx)文章。通常，您可以使用

```
(From l In myDB.myTable Where l.Program.Equals(null) Select l).Count 
```

或者

```
(From l In myDB.myTable Where l.Program == null Select l).Count 
```

# html - HTML / CSS中是否可以使用对角线边框线？

> ID：15580009
> 
> 赞同：4
> 
> 时间：2013-03-22T21:18:10.643
> 
> 标签：html, css, css-shapes

刚刚意识到我还没有看到这个。

但不敢相信这是不可能的。

我正在寻找用纯 CSS/HTML 绘制一个三角形。如果可能的话，是等边的。

**澄清：**

我不希望使用图像来实现这一点。

您需要能够将内容放入 div 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T02:37:09.687

## 一种解决方案

对角线并不容易。一种解决方案是覆盖伪元素以创建边框，假设您正在处理纯色背景颜色。然后，您必须定位内容以使其看起来不错。你甚至可以做一些[文字换行](http://www.csstextwrap.com/examples.php)。

[](http://jsfiddle.net/6rfRV/3/)**这是使用此代码[**的基本示例：**](http://jsfiddle.net/6rfRV/3/)**

 ****CSS & HTML 分别**

```
.triangleBorder {
        position: relative;
        width: 200px;
        height: 173.2px; /* for equalateral = Width * (sq.root 3) / 2 */
    }

    .triangleBorder:before {
        content: '';
        width: 0;
        height: 0;
        position: absolute;
        z-index: -2;
        border: 100px solid transparent;
        border-top-width: 0;
        border-bottom: 173.2px solid black;
    }

    .triangleBorder:after {
        content: '';
        width: 0;
        height: 0;
        position: absolute;
        left: 1px;
        top: 1px;
        z-index: -1;
        border: 99px solid transparent;
        border-top-width: 0;
        border-bottom: 171.5px solid white;
    }

    .triangleBorder span {
       position: absolute;
       width: 100%;
       text-align: center;
       top: 50%;
    }
```

```
<div class="triangleBorder">
    <span>Content<span>
</div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-01T13:25:59.590

以下是使用 CSS 创建等边三角形的几种不同方法。对角线的创建仍然不是很容易，但现在即使主体有渐变（或）图像作为背景，形状也至少可以具有透明背景。

**选项 1：**使用伪元素和倾斜变换

在这种方法中，我们使用了几个伪元素并将它们向相反的方向（向内）倾斜以创建对角线，而底部的线是使用`border-bottom`父元素上的 a 生成的。我们也可以使用这种方法制作梯形。

**缺点：**`body`如果背景和`shape`背景不同并且`body`背景不是纯色，则此方法将不起作用。

```
.triangle {
  position: relative;
  width: 200px;
  border-bottom: 2px solid white;
  color: white;
  margin: 20px auto;
  overflow: hidden;
}
.shape1 {
  height: 174px;
}
.shape2 {
  height: 101px;
}
.triangle:before,
.triangle:after {
  position: absolute;
  content: '';
  height: 100%;
  width: 0%;
  bottom: 0px;
  transform-origin: left bottom;
}
.triangle:before {
  left: 0px;
  border-right: 2px solid white;
}
.triangle.shape1:before {
  transform: skew(-30deg);
}
.triangle.shape2:before {
  transform: skew(-45deg);
}
.triangle:after {
  right: 0px;
  border-left: 2px solid white;
}
.triangle.shape1:after {
  transform: skew(30deg);
}
.triangle.shape2:after {
  transform: skew(45deg);
}
.triangle span {
  position: absolute;
  width: 100%;
  text-align: center;
  top: 50%;
}

/* Just for demo */

*{
  box-sizing: border-box;
}

body {
  background: radial-gradient(ellipse at center, #400, #100);
}
.trapezoid {
  position: relative;
  border-bottom: 2px solid white;
  color: white;
  margin: 20px auto;
  width: 200px;
  height: 50px;
}
.trapezoid:before,
.trapezoid:after {
  position: absolute;
  content: '';
  height: 100%;
  width: 40%;
  bottom: -1px;
  border-top: 2px solid white;
  transform-origin: left bottom;
}
.trapezoid:before {
  left: 0px;
  border-left: 2px solid white;
  transform: skew(-45deg);
}
.trapezoid:after {
  right: 0px;
  border-right: 2px solid white;
  transform: skew(45deg);
}
.trapezoid span {
  position: absolute;
  width: 100%;
  text-align: center;
  top: 30%;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>

<div class='triangle shape1'>
  <span>content</span>
</div>
<div class='triangle shape2'>
  <span>content</span>
</div>

<br/>

<!-- Just something extra to illustrate -->

<div class='trapezoid'>
  <span>content</span>
</div>

<br/>
```

* * *

这是**选项 1 的变体，**当 的背景`body`和形状的背景不同并且`body`背景**是纯色**时，它可以工作。

```
.triangle{
  position: relative;
  width: 200px;  
  border-bottom: 2px solid black;
  color: red;
  background: beige;
  margin: 20px auto;
  overflow: hidden;
}
.shape1{
  height: 174px;
}
.shape2{
  height: 101px;
}
.triangle:before, .triangle:after{
  position: absolute;
  content: '';
  height: 101%;
  width: 100%;
  bottom: 0px;
  background: red;
  transform-origin: left bottom;
}
.triangle:before{
  left: -200px;
  border-right: 2px solid black;
}
.triangle.shape1:before{
  transform: skew(-30deg);  
}
.triangle.shape2:before{
  transform: skew(-45deg);  
}
.triangle:after{
  right: -200px;  
  border-left: 2px solid black;
}
.triangle.shape1:after{
  transform: skew(30deg);
}
.triangle.shape2:after{
  transform: skew(45deg);
}

.triangle span{
  position: absolute;
  width: 100%;
  text-align: center;
  top: 50%;
}

/* Just for demo */

*{
  box-sizing: border-box;
}
body{
  background: red;  
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
<div class='triangle shape1'>
  <span>content</span>
</div>
<div class='triangle shape2'>
  <span>content</span>
</div>
```

**这是选项 1**的另一种变体，它支持三角形内部和外部的渐变背景。

```
.triangle {
  position: relative;
  width: 200px;
  border-bottom: 2px solid white;
  color: white;
  margin: 20px auto;
  overflow: hidden;
}
.shape1 {
  height: 174px;
}
.shape2 {
  height: 101px;
}
.triangle:before,
.triangle:after {
  position: absolute;
  content: '';
  height: 99%;
  width: 50%;
  z-index: -1;
  transform-origin: left bottom;
}
.triangle:before {
  left: 0px;
  top: 100%;
  border-top: 3px solid white;
  background: linear-gradient(90deg, #003333, #773333);
}
.triangle.shape1:before {
  border-top: 4px solid white;
  transform: skewY(-60deg);
}
.triangle.shape2:before {
  transform: skewY(-45deg);
}
.triangle:after {
  right: 0px;
  top: 0%;
  border-top: 3px solid white;
  background: linear-gradient(90deg, #773333, #FF3333);
}
.triangle.shape1:after {
  border-top: 4px solid white;
  transform: skewY(60deg);
}
.triangle.shape2:after {
  transform: skewY(45deg);
}
.triangle span {
  position: absolute;
  width: 100%;
  text-align: center;
  top: 50%;
}

/* Just for demo */

*{
  box-sizing: border-box;
}
body {
  background: radial-gradient(ellipse at center, #400, #100);
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
<div class='triangle shape1'>
  <span>content</span>
</div>
<div class='triangle shape2'>
  <span>content</span>
</div>
```

**截屏：**

![在此处输入图像描述](../Images/95e6e79aef6d8e6912e9773f655054be.png)

`skew`通过修改parent 的角度和高度可以轻松创建具有不同角度的三角形`div`。但是，当我们使用`skew`时，当倾斜角接近 90 度（或 -90 度）时，边框会变得更薄，但这应该不是太大的问题，因为在如此高的角度下，您几乎无法在里面放置任何文本。

* * *

**选项 2：**使用线性渐变

在这种方法中，我们使用了几个有角度的`linear-gradient`背景（每个都是容器的 50% 宽度）并将它们向相反方向倾斜以产生对角线。

```
.triangle {
  position: relative;
  border-bottom: 2px solid white;
  color: white;
  margin: 20px auto;
  height: 174px;
  width: 200px;
  background: linear-gradient(to top left, transparent 49.5%, white 49.5%, white 50.5%, transparent 50.5%), linear-gradient(to top right, transparent 49.5%, white 49.5%, white 50.5%, transparent 50.5%);
  background-size: 50% 100%;
  background-position: 1px 0px, 99px 0px;
  background-repeat: no-repeat;
}
.triangle span {
  position: absolute;
  width: 100%;
  text-align: center;
  top: 50%;
}
/* Just for demo*/

body {
  background: radial-gradient(ellipse at center, #400, #100);
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
<div class='triangle'>
  <span>content</span>
</div>
```

**缺点：**有角度的渐变以产生锯齿状线条而闻名。

> **注意：**无论选择哪种方法，您仍然需要进行文本换行以使文本保持在形状内。**

# cxf - 使用 Jackson 反序列化只读属性时出错

> ID：15580010
> 
> 赞同：5
> 
> 时间：2013-03-22T21:18:17.660
> 
> 标签：cxf, jackson, deserialization

在我的基于 CXF 的 REST 层中，我使用 Jackson 来序列化/反序列化 Groovy 对象。我遇到的问题涉及反序列化没有设置方法的属性。有一个带有 getGroups() 方法的域对象仪表板，它返回一个组对象列表。序列化后，此对象将正确转换为具有“组”属性的 JSON。当我从 JavaScript 发送对象进行更新时，JSON 仍然具有“组”属性。由于该属性在域对象上是只读的，我想在反序列化 JSON 时简单地忽略“组”属性。

由于我使用的是 Jackson 混合插件，因此我尝试了 @JsonIgnore、@JsonGetter 和 @JsonProperty 注释的各种组合 - 均无济于事。如果该属性在序列化时可用，我会在反序列化中收到以下错误。我可以通过删除“组”属性来清理 JavaScript 中的 JSON 对象，我想找到一个服务器端解决方案。

```
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Problem deserializing 'setterless' property 'groups': get method returned null (through reference chain: org.ozoneplatform.commons.server.domain.model.DashboardTemplate["groups"])
at com.fasterxml.jackson.databind.deser.impl.SetterlessProperty.deserializeAndSet(SetterlessProperty.java:114)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:198)
at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:577)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObjectUsingNonDefault(BeanDeserializer.java:393)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:289)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:121)
at com.fasterxml.jackson.databind.ObjectReader._bind(ObjectReader.java:1169)
at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:625)
at com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:448)
at org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:1038)
at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:614)
at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:578)
at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:238) 
```

我如何告诉杰克逊忽略反序列化的只读属性？

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T02:03:03.567

在无功而返的几个小时后，我终于找到了解决这个看似微不足道的问题的魔法组合。在 mixin 中，我必须创建这种注释组合：

```
@JsonIgnore
abstract Set<Group> groups

@JsonProperty
abstract Set<Group> getGroups()

@JsonIgnore
abstract void setGroups(Set<Group> groups) 
```

最重要的是，我必须向 ObjectMapper 添加两个配置参数：

```
mapper.configure(MapperFeature.USE_GETTERS_AS_SETTERS, false)
mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false) 
```

难道没有更简单的方法来实现同样的目标吗？

迈克尔

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-18T08:42:16.063

我遇到过同样的问题。解决方案是给 getter 一个正确的名称：

```
List list...
setList(...) 
```

是正确的，但我的 getter `setProductList()`产生了“setterLess”错误。将其更改为： `setList(...)`解决了问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T22:26:28.030

我刚刚遇到了同样的问题，我的解决方案是创建一个私有的无操作设置器：

```
public class MyFoo {
    public String getMyStr() {
        return "hello, world";
    }

    private void setMyStr(String ignored) {}
} 
```

将`setMyStr`其设为私有可防止我意外尝试从我的代码中调用它，但 Jackson 仍然找到并调用它。杰克逊几乎不知道 - 或关心 - 调用它没有任何作用。

# objective-c - 如何设置 Xcode 不知道存在的对象的属性，但是这样做

> ID：15580015
> 
> 赞同：0
> 
> 时间：2013-03-22T21:18:40.497
> 
> 标签：objective-c, xcode, pointers, properties

编辑-我已经修改以澄清。

```
//myViewController.h
@property (strong, nonatomic) SCDataObject *dataObject; 
```

在情节提要中，我使用自定义类 myViewController 创建了一个 VC。我给了它故事板 ID myViewControllerStoryboardId。

```
//anotherClass.m 
UIViewController *viewController = 
[self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"]; 
```

我实例化了自定义 VC，但请注意，出于几个原因，我**故意将其设置为 UIViewController 类型的指针。**

```
//anotherClass.m
//I want to set the property, dataObject, of the instantiated VC, but this doesn't work.
viewController.dataObject = something; 
```

实际对象具有该属性，但指向它的指针属于不同的类。如何设置属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:22:28.007

您需要使用您的 viewcontrollers 类。我用过`MyViewController`，只需将其替换为您的班级名称。这是代码：

```
#import "MyViewController.h"
...
MyViewController *viewController = 
      [self.storyboard 
                 instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"];

//It works!
viewController.dataObject = something; 
```

编辑：如果您真的不想使用自定义类，请试一试此代码：

```
[viewController setValue:something forKey:@"dataObject"]; 
```

但我想不出这样做的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:22:11.973

如果 myViewController 是 UIViewController 的子类，那么你真的应该这样做：

```
myViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"]; 
```

您还需要确保将 Storyboard 中自定义 UIViewController 的类从通用 UIViewController 更改为 myViewController（在 StoryBoard 中选择您的 VC，然后转到右侧的第三个选项卡“Identity Inspector” -hand Utilities 屏幕。您可以在那里将自定义 VC 的类更改为您的子类）。

**问题编辑后更新：**

UIViewController 类是 UIKit 的一部分。任何时候你需要定制一个超出 SB 的 VC，你需要继承 UIViewController（并创建一个定制的 VC）。因此，如果您尝试在不继承 UIVC 的情况下拥有 UIVC 的自定义属性（dataObject），答案是您不能。

话虽如此，也许这个问题并不完全清楚。如果您正在寻找具有属性 dataObject 但具有该子类的多个实例的 UIVC 的子类；您始终可以创建该子类一次，然后拥有该类的多个实例，您将为其赋予不同的名称，因此：

```
myViewController* viewController1 = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"];
myViewController* viewController2 = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"];
myViewController* viewController3 = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"]; 
```

它们都是同一个子类 (myViewController) 的不同实例，并且每个实例的 dataObject 的值都是不同的。换句话说，您可以设置：

```
viewController1.dataObject=someObject;
viewController2.dataObject=anotherObject; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:05:30.883

您会收到警告，但这应该适用于设置：

```
[viewController setDataObject:something]; 
```

这是为了获得：

```
[viewController dataObject]; 
```

为避免崩溃，您可能会执行以下操作：

```
if ([viewController respondsToSelector:@selector(setDataObject:)])
{
    [viewController setDataObject:something];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:12:27.373

如果您只是键入`viewController`as `id`，虽然您仍然不能直接使用该属性，但您可以向它发送一条与该属性对应的消息，而不会发出警告。您可以使用 respondsToSelector: 来查看它是否支持该属性的访问器功能。

```
id viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"];

if( [viewController respondsToSelector:@selector(setDataObject:)] ) {
    [viewController setDataObject:something];
} 
```

就个人而言，我可能只是：

```
MyViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllerStoryboardId"];

viewController.dataObject = something; 
```

# javascript - 唯一事件名称

> ID：15580017
> 
> 赞同：0
> 
> 时间：2013-03-22T21:18:41.467
> 
> 标签：javascript, jquery

我只是尝试在输入元素上进行事件`bind`。`trigger` `isDisabled`

但在 IE8 中出现错误。因为特定`isDisabled`事件已经存在[http://msdn.microsoft.com/en-us/library/ie/ms533902(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms533902(v=vs.85).aspx)

如何创建唯一的事件名称并保持其可读性？

有没有更好的方法然后使用类似的东西`thisNodeWasDisabled`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:32:22.400

使用[myEvents](http://docs.jquery.com/Namespaced_Events)之类的命名空间，例如`isDisabled.myEvents`（命名空间是第二部分）

# mpi - mpirun 和 ssh 的 Openmpi 问题

> ID：15580018
> 
> 赞同：1
> 
> 时间：2013-03-22T21:18:44.373
> 
> 标签：mpi, openmpi

事情就是这样。我已经在两台不同的计算机上安装了 openmpi，我已经在这台机器上单独编译并运行了 hello_world 示例，它运行良好。但问题是当我启动这个命令时：

```
mpirun -hostfile hosts -n 3 hello_c 
```

在主机文件中：localhost 和我另一台机器的 ip。然后，程序询问我的 ssh 密码，在我填写之后，没有任何附加内容，例如 mpirun 刚刚崩溃。我真正的问题是我无法通过 ssh 在两台不同的计算机上运行 mpi 进程。

我想准确地说所有 openmpi 二进制文件和库都设置在路径中，甚至是 hello_world。

* * *

**更新**

我已经设置了一个带有 rsa 证书的 pass_wordless ssh，但它也不起作用。我已经在调试模式（-d）下启动了 mpirun，我得到了这个：

```
[baptiste@baptiste RE51]$ mpirun -d -hostfile hosts hello_c 
[baptiste.thinkFed:02666] procdir: /tmp/openmpi-sessions-baptiste@baptiste.thinkFed_0/53471/0/0
[baptiste.thinkFed:02666] jobdir: /tmp/openmpi-sessions-baptiste@baptiste.thinkFed_0/53471/0
[baptiste.thinkFed:02666] top: openmpi-sessions-baptiste@baptiste.thinkFed_0
[baptiste.thinkFed:02666] tmp: /tmp
[roommateServer:01102] procdir: /tmp/openmpi-sessions-baptiste@roommateServer_0/53471/0/1
[roommateServer:01102] jobdir: /tmp/openmpi-sessions-baptiste@roommateServer_0/53471/0
[roommateServer:01102] top: openmpi-sessions-baptiste@roommateServer_0
[roommateServer:01102] tmp: /tmp 
```

没有别的，它留在这里，我必须杀死 mpirun。

有关信息，我尝试使用以下命令在远程节点上通过 ssh 启动 mpirun hello_c：

```
ssh roomServer mpirun hello_c 
```

这工作得很好......我绝对无法理解为什么它不能在所有节点上工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:28:46.763

假设您的编译器以及您的主机文件设置正确。您的问题是您需要在两台计算机之间设置无密码 ssh，否则您将收到您描述的错误。这是因为 MPI 需要快速有效地进行通信，并且不会提示消息输入密码，否则会导致消息停止和程序崩溃。

# java - 我可以在 Intellij 8 中更新 ANT 插件吗？

> ID：15580025
> 
> 赞同：1
> 
> 时间：2013-03-22T21:19:00.140
> 
> 标签：java, ant, intellij-idea

我有 Intellij IDEA 8 并且 ANT 应用程序在那个版本上是旧的，我想知道我是否可以只更新那个 intellij 8 上的 ANT 应用程序，如果可以的话，有人可以指点我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:13:00.147

`Build file properties`对话框在选项卡下有一个**使用自定义 Ant**的`Execution`选项：

![在此处输入图像描述](../Images/ff544854a2ad99f16b791e0feb603077.png)

# ios - NSDictionary 最后一个键返回 (null)

> ID：15580027
> 
> 赞同：1
> 
> 时间：2013-03-22T21:19:07.060
> 
> 标签：ios, objective-c, nsdictionary, nsmutabledictionary

我有下一个获取 SQLite 的代码：

```
 if (sqlite3_prepare_v2(database, query, -1, &statement, NULL) == SQLITE_OK) {
    while(sqlite3_step(statement) == SQLITE_ROW) {
        NSInteger groupID = sqlite3_column_int(statement, 1);
        NSInteger universityID = sqlite3_column_int(statement, 2);
        NSInteger averageMark = sqlite3_column_int(statement, 4);
        Group *group = [self objectFromArray:self.groups withID:groupID];
        University *university = [self objectFromArray:self.universities withID:universityID];
        NSMutableDictionary *mGroups = university.groups.mutableCopy;
        mGroups[group] = @(averageMark);
        university.groups = [NSDictionary new];
        university.groups = mGroups;
        NSLog(@"%@", university.groups[group]);
    }
} 
```

我的最后一个键有问题。所以在我所有`university`的`university.groups`最后一个键返回`(null)`值中，但它就在那里。我使用 NSLog 在控制台中查看，我总是看到`(null) (null) (null)`......这很奇怪，但在下一次出现值并且新键中的值出现问题。例如，在第一次添加`averageMark = 72`for`first key`时，在控制台中返回（null），在第二圈添加`averageMark`for `second key`。现在一切都好`first key`，它返回 72，但`second key`现在返回 (null)。什么是问题？我的字典哪里错了？

**编辑** 我尝试检查 NSMutableDictionary 中是否存在密钥。没有。

```
 mGroups[group] = @(averageMark);
        university.groups = mGroups;
        if (mGroups[group])
            NSLog(@"1234");
        NSLog(@"%@ %@ %@", university.groups[group], mGroups[group], @(averageMark)); 
```

在控制台中，我总是看到下一个：

![在此处输入图像描述](../Images/bdb0df5d75d84c09e9fd442271d8c478.png)

# jquery - 如何使内容选项卡可链接和可收藏？

> ID：15580030
> 
> 赞同：0
> 
> 时间：2013-03-22T21:19:13.250
> 
> 标签：jquery, tabs, hyperlink, bookmarks

我需要将内容选项卡添加到当前过长的页面。据我所知：http: [//jsbin.com/olacod/1/edit](http://jsbin.com/olacod/1/edit)

我一直在尝试使标签可链接（即从其他页面）和书签（从内容标签内或同一页面上的其他地方）并意识到我需要一些帮助。提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:57:43.710

您可以获得每个选项卡的单独链接

```
http://jsbin.com/olacod/1/edit#tab1
http://jsbin.com/olacod/1/edit#tab2
http://jsbin.com/olacod/1/edit#tab3
http://jsbin.com/olacod/1/edit#tab4
http://jsbin.com/olacod/1/edit#tab5 
```

它可能在 jsbin 中不起作用.. 因为 jsbin 将每个 url 重新初始化为基本字符串.. 在您在您的网站上创建的自定义页面中，您必须以上述方式链接您的选项卡..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:09:20.843

你想要返回按钮和查询，有一个插件可以在以下位置找到： http: [//benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

甚至附带大量示例。

但问题在于（无论实现方式如何），如果您现在查看几个选项卡，并想真正返回上一页，您现在必须返回整个选项卡历史记录，然后返回页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:24:25.087

一个解决方案是使用 click()。在此处查看更新[的 jsbin](http://jsbin.com/olacod/4/edit)。

也许您知道实现这一目标的更有效方法？

# java - Ubuntu Java 无法识别 COM 端口

> ID：15580050
> 
> 赞同：0
> 
> 时间：2013-03-22T21:20:31.287
> 
> 标签：java, ubuntu, serial-port, 64-bit, rxtx

```
private static void initProgram() {
    System.out.println("fdsf");

    //Must start by setting up the COM port to identify where the arduino is. 
    portList = CommPortIdentifier.getPortIdentifiers();

    while (portList.hasMoreElements()) {
        System.out.println("gggg");
        portId = (CommPortIdentifier) portList.nextElement();
        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
            System.out.println(portId.getName());

            if (portId.getName().equals("/dev/ttyACM0")) {
                //SimpleRead reader = new SimpleRead();
            }
        }
    }

    System.out.println("fdsfsssssssss");
} 
```

我正在使用 java 7 (openjdk) 运行 64 位 linux，并且在一个简单的应用程序中遇到问题，程序可以编译和运行，但从不打印“gggg”，即从不枚举 COM 端口。

我已将自己添加到拨出组，并从此处下载 RXTX 库 - [http://www.cloudhopper.com/opensource/rxtx/](http://www.cloudhopper.com/opensource/rxtx/) - 并将它们放在适当的文件夹中。我只是不知道我需要做什么才能找到任何串行端口。

编辑：只是想我应该提到我已经在命令提示符下尝试过正在执行`sudo apt-get install librxtx-java`，但这似乎没有帮助。

# android-intent - 通过意图传递多个字符串并显示它们

> ID：15580055
> 
> 赞同：0
> 
> 时间：2013-03-22T21:20:58.147
> 
> 标签：android-intent

我是开发 android 应用程序的初学者，我有一个作业，所以我需要你的帮助。我想将 3 个字符串从一个活动传递到第二个动作，然后在第二个活动中显示这些字符串。用户必须输入字符串。

那是我的代码，我不知道有什么问题。主.java

```
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.Menu;
 import android.view.View;
 import android.widget.EditText;

 public class Main extends Activity {

public  static final String EXTRA_MESSAGE = "com.mobile.activity4.class" ;
public  static final String EXTRA_MESSAGE2 = "com.mobile.activity4.class" ;
public  static final String EXTRA_MESSAGE3 = "com.mobile.activity4.class" ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public void sendMessage(View view)
{
    Intent myIntent = new Intent(this,DisplayMessageActivity.class);

    EditText editText  = (EditText) findViewById(R.id.edit_message1);
    EditText editText2 = (EditText) findViewById(R.id.edit_message2);
    EditText editText3 = (EditText) findViewById(R.id.edit_message3);
    Bundle extras = new Bundle();

    String message = editText.getText().toString();
    String message2 = editText2.getText().toString();
    String message3 = editText3.getText().toString();

    extras.putString("EXTRA_MESSAGE",message);
    extras.putString("EXTRA_MESSAGE2",message2);
    extras.putString("EXTRA_MESSAGE3",message3);

    myIntent.putExtras(extras);
    startActivity(myIntent);

}

  } 
```

`

* * *

DisplayMessageAcivity.java

```
import android.app.Activity;
 import android.content.Intent;
            import android.os.Bundle;
          import android.view.Menu;
          import android.widget.TextView;

       public class DisplayMessageActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_message);

    Bundle extras = getIntent().getExtras();
    String message  =  extras.getString(Main.EXTRA_MESSAGE);
    String message2 = extras.getString(Main.EXTRA_MESSAGE2);
    String message3 = extras.getString(Main.EXTRA_MESSAGE3);

    TextView textView = new TextView(this);
    TextView textView2 = new TextView(this);
    TextView textView3 = new TextView(this);

    textView.setTextSize(40);
    textView2.setTextSize(40);
    textView3.setTextSize(40);

    textView.setText(message);
    textView2.setText(message2);
    textView3.setText(message3);

    setContentView(textView);
    setContentView(textView2);
    setContentView(textView3);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.display_message, menu);
    return true;
}

       } 
```

* * *

请帮助我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:06:03.567

你在这里面临什么问题？

在 DisplayMessageActivity 中，您必须将所有 textview 保留在布局中，并在 setcontentview 中设置布局，如下所示，

```
 TextView textView = new TextView(this);
      TextView textView2 = new TextView(this);
     TextView textView3 = new TextView(this);
     LinearLayout linear=new LinearLayout(this);
     linear.addView(textView);
     linear.addView(textView2);
     linear.addView(textView3);

     setContentView(linear); 
```

您也可以在 xml 中完成此操作

将所有文本视图保留在 xml 布局中，并将 setcontentview 中的布局设置为

```
 setContentView(R.layout.acitivyt_layout); 
```

如果您有任何疑问，请告诉我。

# javascript - 单击单选按钮时事件触发的顺序是什么？

> ID：15580057
> 
> 赞同：5
> 
> 时间：2013-03-22T21:21:04.953
> 
> 标签：javascript, html, events, dom, cross-browser

我知道这在浏览器之间是不同的；例如，如果我将一个函数附加到单选按钮的 onclick 和 onchange 事件，然后单击它，Chrome 会触发 onchange 然后 onclick，而 Firefox 则相反。

是否有任何人知道的资源可以通过浏览器分解此触发顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:44:30.523

这是一个 JSFiddle，它会告诉您是否在每个浏览器中运行它：

[http://jsfiddle.net/BUkHz/](http://jsfiddle.net/BUkHz/)

```
<label for="myRadio">Radio Button</label><input type="radio" name="myRadio" id="myRadio"/>
<label for="myRadio">Radio Button 2</label><input type="radio" name="myRadio" id="myRadio2"/>

var myRadio = document.getElementById('myRadio');
    var myRadio2 = document.getElementById('myRadio2');

    myRadio.addEventListener('change', interceptRadioEvent);
    myRadio.addEventListener('click', interceptRadioEvent);
    myRadio2.addEventListener('change', interceptRadioEvent);
    myRadio2.addEventListener('click', interceptRadioEvent);

    function interceptRadioEvent(e){
        //do anything else you want to here...
        radioEventHandler(e);
    }

    function radioEventHandler(e){
        console.log(e.type);
    } 
```

我有一种预感，订单取决于您在做什么 - 例如，如果您在第一次点击时只有一个单选按钮，它将是：更改，点击然后进一步点击将是“点击”，因为它响应点击但无法取消设置。

我希望这会有所帮助。

在 Mac 上：

Chrome：更改然后单击

Safari：更改然后单击

iOS（6）：更改然后单击

# php - 如何在两个或多个实例之间共享 JOIN 的结果？

> ID：15580062
> 
> 赞同：0
> 
> 时间：2013-03-22T21:21:20.017
> 
> 标签：php, design-patterns

为了减少查询的数量，当我从我的数据库中选择一些东西时，我想启动最好的一个，它可以是以下之一：

```
1- SELECT ... FROM cities JOIN states ON city.stateID = state.stateID WHERE city.cityID = ...
2- SELECT ... FROM cities WHERE city.cityID = ...
3- SELECT ... FROM states WHERE state.stateID = ... 
```

如果我执行第一个，我将不需要（可能）执行第二个和第三个查询，因为我已经有了数据。

但是如何在两个或多个实例类之间共享单个连接查询的结果？假设我必须首先使用第三个查询，因为我已经有了来自 3 的数据，你将如何从你的代码中控制 City 实例的创建？

```
<?php

 class City
 {
      protected $state;

      function getState()
      {
           if(!$this->state)
                 $this->state = State::getByID($this->stateID);
           return $this->state;
      }

      // since i may already have (in the outer scope) the $state instance...
      // to avoid an unnecessary query (State::getByID()) i allow to set the state:
      function setState(State $state)
      {
           if($state->stateID == $this->stateID)
                $this->state = $state;
           else
                throw new Exception("This City doesn't belong to the given State");
      }
 } 
```

这个对吗？我做得对吗？

例如，我可以像这样创建“地址”的构造函数：

```
<?php

class Address
{
    const PREFETCH_CITY = 1;
    const PREFETCH_STATE = 2;
    const PREFETCH_ALL = 3;

    construct($cityID, $prefetch = 0)
    {
         if($prefetch & static::PREFETCH_CITY)
              // i use the "JOIN cities" query (i also set $this->city)
         elseif($prefetch & static::PREFETCH_STATE)
              // i use the "JOIN states" query (i also set $this->state)
         elseif($prefetch & static::PREFETCH_ALL)
              // i use the "JOIN states JOIN cities" query
              // (i preset also both $this->city and $this->state)
         else
              // i don't use any JOIN, i just get the city
    }
} 
```

实际上现在我认为构造函数应该在一个单独的类中，但无论如何......

一般来说......我能读到关于这个论点的什么？欢迎书籍、教程

希望清楚，我的英语很糟糕......非常感谢您提前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:06:03.370

是否有过调用 Address 类而尚未调用 City 类的实例？如果没有，那么您可以使用 Address 类扩展 City 类，您可以从 Address 类中的 City 类访问变量，因此只需将其更改为。然后，一旦 City 类从数据库中获取信息，并将其分配给各种变量，就可以从 Address 类中访问它们。

```
class Address extends City { 
```

# ruby - Ruby 中的 AES/CBC/PKCS5Padding 实现（用于 rails）

> ID：15580065
> 
> 赞同：3
> 
> 时间：2013-03-22T21:21:37.183
> 
> 标签：ruby, aes, pkcs#7, pkcs#5

我需要解密使用`AES/CBC/PKCS5Padding`方案加密的文本。我得到的加密文本是使用一些 Java 软件生成的。

下面的所有值都被我更改为虚构的东西。

我得到的是一个密钥`aHjgYFutF672eGIUGGVlgSETyM9VJj0K`（256 位 = 32 字符 * 8 位）和 IV：`rxYoks3c8hRRsL2P`（16 位）

和（我想）Base64 编码的加密结果`ETlAHS5ZcshKxQUaHVB8==`

我需要的是在 Ruby 中解密这个`ETlAHS5ZcshKxQUaHVB8==`以获取一个简单的字符串，比如 'blablablabla'

我试图解密我使用 Ruby 和普通的 linux 控制台 openssl 命令得到的内容。注意：下面的 Key 和 IV 不是实际代码中使用的：

```
# require 'openssl'
# require 'base64'
# decryption
aes = OpenSSL::Cipher::AES256.new(:CBC)
aes.decrypt
aes.padding = 1 # actually it's on by default
aes.key = "aHjgYFutF672eGIUGGVlgSETyM9VJj0K"
aes.iv="rxYoks3c8hRRsL2P"
aes.update(Base64::decode64("ETlAHS5ZcshKxQUaHVB8=="))+aes.final
=> OpenSSL::Cipher::CipherError: bad decrypt 
```

与上面相同，但在控制台中，密钥和 iv 转换为十六进制：

```
$ echo -n $key256 | hexdump -e '16/1 "%02x"'
$ echo -n $iv     | hexdump -e '16/1 "%02x"'

$ echo "ETlAHS5ZcshKxQUaHVB8==" | openssl enc -d -aes-256-cbc -a  -K 61486a675946757446363732654749554747566c67534554794d39564a6a304b -iv 7278596f6b73336338685252734c3250
bad decrypt
140378046432928:error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:evp_enc.c:539: 
```

顺便提一句。要在您使用的控制台中取回原始密钥和 iv：

```
$ echo 61486a6... | xxd -r -p
#or , but then need to add \x before every character pair
$ eval `printf "\x61\x48......" 
```

请给我一些线索，因为我一开始希望我能够使用[https://github.com/chicks/aes](https://github.com/chicks/aes) gem。gem 看起来不错，它只是`OpenSSL::Cipher::Cipher`.

ruby/openssl 是否有可能使用不同的 PKCS，比如说 PKCS#7，Java 使用 PKCS#5，我需要预处理我的数据？或者 ruby​​/openssl 与 Java 的 PKCS #7 和 #5 之间存在 vesion 不匹配？#5 表示 8 字节数据块，#7 表示 16 字节？只是一个疯狂的猜测......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:31:49.930

我第一篇文章中的 Ruby 代码是正确的，问题是`AES/CBC/PKCS5Padding`Java 部分使用了这个。

Java 程序不应将此方案用于`AES-CBC-256`. `PKCS5`填充到 64 位（8 字节）块大小，但`AES-256-CBC`使用 16 字节块。因此，`PKCS7`必须使用。

# actionscript-3 - AS3中的getURL，如何？

> ID：15580069
> 
> 赞同：1
> 
> 时间：2013-03-22T21:22:01.140
> 
> 标签：actionscript-3, actionscript, flash-cs5

你好，我已经好几年没用过 flash 了，需要在我的新 AS3 横幅中使用一些旧的跟踪代码。我注意到在 3.0 中，您不能将动作脚本放在对象本身上，而只能放在时间轴上。

我需要转换这个 As2 脚本，我通常会在标有“my_button”的按钮上

```
on (release) { 
getURL (_level0.clickTag, "_blank"); 
} 
```

在时间轴上为标记为“my_button”的按钮使用的等效代码片段是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:24:01.897

这是 Google 的 clickTag 建议：

```
import flash.events.MouseEvent;

import flash.net.URLRequest;

// ......

someButton_or_displayObject_to_receive_mouseClick.addEventListener(MouseEvent.CLICK,
                   function(event: MouseEvent) : void {
                   flash.net.navigateToURL(new URLRequest(root.loaderInfo.parameters.clickTAG), "_blank");
                   } 
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T10:29:00.293

我看到了一些不同的例子，但没有一个与我使用的方法相同；

这是完整版，只需复制粘贴并添加到您的 URL AS3

```
import flash.events.MouseEvent;
import flash.net.URLRequest;

// add event listener to listen for "btnOpen" click
btnOpen.addEventListener(MouseEvent.CLICK,openFuction);

// add our openFuction
function openFuction(e:MouseEvent){
    var openPage:URLRequest=new URLRequest("https://mysite.co.uk")
    navigateToURL(openPage,"_blank");
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:26:58.493

还有另一种方法，它不一定依赖于 ExternalInterface 类的使用。您也可以尝试这样的事情（假设您在舞台上的对象的实例名称为“mybtn_mc”：

```
mybtn_mc.addEventListener(MouseEvent.CLICK, openWebpage);
//
function openWebpage(e:MouseEvent):void {
    var my_url:URLRequest = new URLRequest("http://stackoverflow.com/questions/15580069/geturl-in-as3-how-to/15639569");
    flash.net.navigateToURL(my_url, "_self");
}
// if you want the object to act like buttons do in AS2
// with the handcursor effect when you mouse over them,
// you would include the following lines:
mybtn_mc.buttonMode = true;
mybtn_mc.useHandCursor = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:18:34.977

这是用时间线风格写的，我不赞成。但我感觉您甚至还没有准备好获得有关课程及其工作方式的信息。

```
myButton.addEventListener(MouseEvent.CLICK, openWebpage);

功能打开网页（e：鼠标事件）：无效{
   如果（外部接口。可用）{
      var callReturn:String = ExternalInterface.call('function(){window.open("http://www.yourURL.com", "_blank", "top=0,left=0,width=800,height=600 ");}');
   }
}
```

请注意，您不应该试图超出当前 MC 的范围，但是如何做其他事情超出了这个答案的范围。如果有兴趣，请搜索依赖注入。

# sql - 在值范围内连接的最佳性能

> ID：15580070
> 
> 赞同：7
> 
> 时间：2013-03-22T21:22:01.567
> 
> 标签：sql, sql-server, tsql, query-optimization

我有一个非常大的表，其中包含 IP 地址的整数表示形式和第二个表，其中包含 IP 地址的整数表示形式的起始和结束范围。第二个表用于根据[几个 stackoverflow 文章](https://stackoverflow.com/questions/2775655/ip-address-to-country-with-database/2779015#2779015)返回国家/地区。尽管这会返回所需的结果，但性能相当差。除了加入某个范围之外，还有其他性能更高的替代方案吗？下面是一组示例代码，显示了连接当前的工作方式：

```
CREATE TABLE #BaseTable
    ( SomeIntegerValue INT PRIMARY KEY);

INSERT INTO #BaseTable (SomeIntegerValue)
SELECT SomeIntegerValue
FROM (VALUES
    (123), (456), (789)) Data (SomeIntegerValue);

CREATE TABLE #RangeLookupTable
    ( RangeStartValue INT PRIMARY KEY
    , RangeEndValue INT NOT NULL);

INSERT INTO #RangeLookupTable (RangeStartValue, RangeEndValue)
SELECT RangeStartValue, RangeEndValue
FROM (VALUES
      (0, 100), (101, 200), (201, 300)
    , (301, 400), (401, 500), (501, 600)
    , (701, 800), (901, 1000)) Data (RangeStartValue, RangeEndValue);

SELECT *
FROM #BaseTable bt
JOIN #RangeLookupTable rlt
    ON bt.SomeIntegerValue BETWEEN rlt.RangeStartValue AND rlt.RangeEndValue 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T18:31:44.723

如果特定情况允许在表中保存**非规范化**数据，然后从该表而不是规范化基表进行查询，则可以实现非常快的检索时间。查询执行计划在 SELECT 中显示 2 倍增益，即使此示例数据为 3 行。

在写入操作相对较少而读取操作较多的情况下，这种方法是可能的。只有在更新数据时才需要执行 JOIN；使用实际数据进行测试将显示在整个（UPDATE + SELECT）系统图片中实际实现了多少（或是否有任何！）改进。

下面给出了示例代码以及 SELECT 语句生成的执行计划屏幕截图。

```
CREATE TABLE #BaseTable
    ( SomeIntegerValue INT PRIMARY KEY);

INSERT INTO #BaseTable (SomeIntegerValue)
SELECT SomeIntegerValue
FROM (VALUES
    (123), (456), (789)) Data (SomeIntegerValue);

CREATE TABLE #RangeLookupTable
    ( RangeStartValue INT PRIMARY KEY
    , RangeEndValue INT NOT NULL);

INSERT INTO #RangeLookupTable (RangeStartValue, RangeEndValue)
SELECT RangeStartValue, RangeEndValue
FROM (VALUES
      (0, 100), (101, 200), (201, 300)
    , (301, 400), (401, 500), (501, 600)
    , (701, 800), (901, 1000)) Data (RangeStartValue, RangeEndValue);

-- Alternative approach: Denormalized base table
CREATE TABLE #BaseTable2
    ( SomeIntegerValue INT PRIMARY KEY,
      RangeStartValue INT null,
      RangeEndValue INT NULL);

INSERT INTO #BaseTable2 (SomeIntegerValue)
SELECT SomeIntegerValue
FROM (VALUES
    (123), (456), (789)) Data (SomeIntegerValue);

UPDATE #BaseTable2
SET RangeStartValue = rlt.RangeStartValue,
    RangeEndValue = rlt.RangeEndValue
FROM #BaseTable2 bt2
JOIN #RangeLookupTable rlt
    ON bt2.SomeIntegerValue BETWEEN rlt.RangeStartValue AND rlt.RangeEndValue

-- The original: SELECT with a JOIN
SELECT *
FROM #BaseTable bt
JOIN #RangeLookupTable rlt
    ON bt.SomeIntegerValue BETWEEN rlt.RangeStartValue AND rlt.RangeEndValue

-- The alternative: SELECT from the denormalized base table
SELECT * from #BaseTable2;

GO 
```

JOINed 与非规范化 SELECT 的查询执行计划：

![使用 JOIN 与非规范化表执行查询](../Images/b66cda0e62b72b55ab3eeea3e31d7a93.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:31:37.007

这几乎可以肯定是一个索引问题。您当前在`RangeStartValue`(主键) 上有一个索引，但在 上没有`RangeEndValue`，因此它可能必须在缩小第一列后对第二列进行全面扫描。尝试索引`RangeEndValue`并查看它如何影响它。

我不太熟悉该`BETWEEN`子句的性能质量，但是您可以通过编写不等式检查的比较双方来保证这不是问题。

* * *

同样在这个测试脚本中，您正在选择基表中的每一行，我想您没有在生产数据库中这样做？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T23:24:52.010

我测试了 15 种我认为可行的独立方法，这个解决方案是迄今为止最好的：

```
SELECT bt.*
    , RangeStartValue = 
        (SELECT TOP 1 RangeStartValue
        FROM #RangeLookupTable rlt
        WHERE bt.SomeIntegerValue >= rlt.RangeStartValue
        ORDER BY rlt.RangeStartValue)
FROM #BaseTable bt; 
```

这会在查找表上创建聚集索引搜索，并且能够在几秒钟内翻阅数百万条记录。[请注意，我根据此博客](http://www.christian-etter.de/?p=241)中的代码改编了此解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:46:59.090

问题是您的查找表具有不重叠的地址块（范围）。但是，SQL Server 可能无法识别这一点。因此，当您拥有 时`ipaddress between A and B`，它必须扫描从开头到以 A 结尾的整个索引。

我不知道是否有办法解释表真正在做什么，优化器会跳转到索引中第一个适当的记录。这样的事情可能会起作用：

```
select bt.*,
       (select top 1 RangeEndValue
        from #RangeLookupTable rlt
        where rlt.RangeStartValue <= bt.SomeIntegerValue
        order by RangeStartValue desc)
FROM #BaseTable bt 
```

这可能会“欺骗”优化器，使其只查看索引中的一条记录。您的样本中的数据太小，无法判断这是否会对性能产生影响。

另一种方法是使用 equi-join 来停止搜索。在每个表中，添加地址的 TypeA 部分（第一个字节）。这可以与具有完整地址的第二个字段冗余，或者您可以将其他三个字节放在下一个字段中。任何跨越多个 TypeA 地址的 ip 列表都需要拆分为单独的条目。

将此字段作为索引中的第一列，并将地址（或地址的其余部分）作为主键的第二部分。您可以使用约束来创建具有多列的主键。

查询将如下所示：

```
SELECT *
FROM #BaseTable bt join
     #RangeLookupTable rlt
     ON bt.typeA = rlt.typeA and
        bt.SomeIntegerValue BETWEEN rlt.RangeStartValue AND rlt.RangeEndValue 
```

然后索引扫描将仅限于具有相同第一个字节的值。当然，您也可以使用前两个字节将其扩展到 TypeAB。

# php - 将 PHP 准备好的语句与 mysqli 一起使用时，blob 字段的检索速度很慢

> ID：15580074
> 
> 赞同：0
> 
> 时间：2013-03-22T21:22:12.003
> 
> 标签：php, mysqli, prepared-statement

本着提高安全性的精神，我实现了一个执行准备好的语句的函数。

但是当我尝试获取 base64 编码的 blob 内容（大约 30-50KB）时遇到了问题。

如果我在不使用准备好的语句的情况下运行查询，它会运行得很快。

使用准备好的语句，它会在调用时停止：`mysqli_stmt_fetch($statement)` 并且需要将近一分钟或更长时间才能运行，最终返回结果。

一旦我摆脱`mysqli_stmt_fetch($statement)`呼叫或从我的选择查询中排除 blob 字段，事情就会像往常一样快速运行。

我希望有人知道这里发生了什么。到目前为止，我已经疏通了互联网寻找答案，但运气不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:55:25.240

我会将二进制 blob 保存在 MySQL 以外的其他地方，在 MySQL 中保留一个简单的标识符，以便我知道从哪里获取它。MySQL 从来都不是存储大块二进制数据的首选方式。
至少它会解决您的问题，您可能应该尝试放弃 base64 开销（这也会增加 33% 的大小）。

我会尝试的另一个解决方案是查看是否有更新版本的驱动程序或服务器。或者尝试其他驱动程序，例如[PDO](http://php.net/manual/en/book.pdo.php)

第三种解决方案是尝试将字段类型从 BLOB 更改为 TEXT，base64 在正常的 ascii 范围内。

# regex - VBA 正则表达式限制为单个字符

> ID：15580076
> 
> 赞同：0
> 
> 时间：2013-03-22T21:22:13.563
> 
> 标签：regex, vba

我有一个字符串，当有一个插入括号但不是两个时，我想在 VBA 正则表达式上匹配。

例如，“desert (cake, pie)”应该匹配，但“desert (pumpkin, sweets(cake, pie))”不应该匹配。

但是，此模式匹配上述两个搜索字符串：

```
 regex.Pattern = LCase("desert") & ".*\(.*" & searchString 
```

有没有办法告诉它我只有一个完全匹配，如果有两个，那就不好了？我认为问题是 .* 正在吞噬第二个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:26:31.833

如果我正确理解你的例子，那么你可以使用一个简单的[字符类](http://www.regular-expressions.info/charclass.html)来实现这一点。

```
[^()]*\([^()]*\) 
```

=>

```
regex.Pattern = LCase("desert") & [^()]*\([^()]*\) & searchString 
```

...将寻找一个开始的括号，然后是任意数量的非括号字符，然后是一个结束的括号。由于该模式在中间寻找非括号字符，因此您的要求应该得到满足。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:27:01.257

是的，你只需要告诉它在第一个括号之后**不匹配左括号：**

```
regex.Pattern = LCase("desert") & ".*\([^\(]*" & searchString 
```

# javascript - 像“现代 HTML5”浏览器的 $(document).ready() 之类的 Javascript

> ID：15580084
> 
> 赞同：35
> 
> 时间：2013-03-22T21:22:56.673
> 
> 标签：javascript, html, document-ready

这很可能已经是某个地方的问题，但我找不到它，因为每次搜索都会出现 jQuery 问题。

我正在寻找一种经过验证的方法来绑定到准备好的文档，就像 jQuery 的`$(document).ready()`. 然而，这是一个“仅限现代浏览器”的页面，使用非常轻量级的 javascript，我想避免在此处加载 jQuery。

有人会指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-22T21:24:19.527

```
document.addEventListener('DOMContentLoaded', function () {
    /* ... */
}); 
```

该事件[`"DOMContentLoaded"`](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/DOMContentLoaded_%28event%29?redirectlocale=en-US&redirectslug=Mozilla_event_reference/DOMContentLoaded_%28event%29)将在文档被完全解析后触发，即没有样式表*和其他图像。如果您需要等待图像和样式表，请`"load"`改用。

^(* 仅当在`<script>`之前`<link rel="stylesheet" ...>`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-14T20:15:04.080

`window.onload = function() {}`是很久以前的标准，虽然它也等待所有图像加载，但对于所有旧浏览器中的某些此类情况，它基本上是一种可行的、功能性的替代方案。~~用户通常仍应等待一秒钟，直到他做出负责任的行动。~~

**编辑**：在我的情况下，我需要它来加载所有在其他任何东西之前加载的库，因为它们在页脚（jquery）中被固定列出。在我的依赖中，只要它被加载，就可以继续使用它。所以恕我直言，用户必须等待的事实是无关紧要的（除非我在这里错过了什么并且可以解释），因为任何方式的 jQuery 加载都是这种情况，直到它没有加载它不能使用它。为了这一点，任何方式都必须进行后端检查，因为客户端 js 可以被“拦截”。等待整个文档加载肯定比在包含它之后使用它要更长的时间，但是这适用于您的情况。不能影响 html 脚本的顺序，例如当您在自己的 3rd 方包中使用它时。

# java - 如果在组件显示之前调用 GXT3 HtmlEditor.setEnabled() 会导致异常

> ID：15580088
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:23:20.270
> 
> 标签：java, gwt, extjs, gxt

我将 GWT2.5 与 GXT 3.0.1 UI 库一起使用。该应用程序在开发模式下工作，而编译时显示空白屏幕。第一个简单的加载 GXT 屏幕显示片刻，然后网页变为空白。

在许多情况下，存在以下问题：

```
validation-api-1.0.0.GA.jar
validation-api-1.0.0.GA-sources.jar 
```

这些是添加的。

GXT 继承如下所示：

```
<inherits name='com.sencha.gxt.ui.GXT' /> 
```

实在想不出别的了……

* * *

- - 更新 - -

我缩小了问题的范围。页面内容消失了，因为我在面板构建过程中创建了一个对话框。我将对话框创建移至延迟初始化。我看到了内容，但是在 dialog.show() 方法上没有显示对话框。

我猜 GXT Dialog 的实现出了点问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:26:30.473

我钉了它。对话框包含 HtmlEditor，它执行了 setEnabled(false)。调用在编译版本中失败，而在 dev 中工作正常。

显然是一个错误。在显示后调用 show() 方法或任何其他方法中的 setEnabled() 似乎也失败了。所以这只是方法本身的一个错误。

Sencha 高级支持论坛中的更多详细信息，供有权访问的人使用： [http ://www.sencha.com/forum/showthread.php?259570-GXT-3.0.1-application-goes-blank-when-compiled&p=951171#post951171](http://www.sencha.com/forum/showthread.php?259570-GXT-3.0.1-application-goes-blank-when-compiled&p=951171#post951171)

# android - 位图内存不足异常 throw new OutOfMemoryException(e);

> ID：15580093
> 
> 赞同：0
> 
> 时间：2013-03-22T21:23:46.643
> 
> 标签：android, out-of-memory

我继承了这段代码，并试图弄清楚如何让它更有效，这样我就不必抛出 OutOfMemory 异常。这适用于 writeBitmap 和 readBitmap。

```
/**
 * Reads bitmap from the state file
 */
void readBitmap(Bitmap bitmap) throws OutOfMemoryException {
    byte[] buffer;
    try {
        buffer = new byte[file.length()];
    } catch (OutOfMemoryError e) {
        throw new OutOfMemoryException(e);
    }

    try {
        file.readBytes(buffer, 0, 0, buffer.length);
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
    Buffer byteBuffer = ByteBuffer.wrap(buffer);

    try {
        bitmap.copyPixelsFromBuffer(byteBuffer);
    } catch (Exception e) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:10:02.267

您可以保存压缩位图。它会做到这一点，所以你不需要有一个中间字节缓冲区。只需将压缩格式调整为您想要的。您还可以使用创建的内存文件的大小。

```
 public void writeBitmap(Bitmap bitmap, int id) throws OutOfMemoryException {
        final int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();

        try {
            file = new MemoryFile("file" + id, bitmapSize);
            FileOutputStream out = file.getOutputStream()
            bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }

        size.x = bitmap.getWidth();
        size.y = bitmap.getHeight();
    } 
```

# ios - 如何在 iOS 上仅水平拉伸时垂直平铺 UIImage？

> ID：15580094
> 
> 赞同：4
> 
> 时间：2013-03-22T21:23:48.243
> 
> 标签：ios, cocoa-touch, ios6, uiimageview, uiimage

我有一个可以在水平方向拉伸的图像，但需要垂直平铺（一个在另一个之上）以填充我的视图。我怎么能这样做？

我知道使用该`-(UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets`方法可以调整图像的大小。所以这对水平方向很有效，但该方法不能用于垂直方向，它确实需要平铺，而不是在垂直方向拉伸才能工作。

现在我对它如何工作的想法是运行一个循环，该循环使用水平拉伸的图像创建一个 UIImageView，并简单地调整 frame.origin.y 属性，然后将它作为每个循环的子视图添加，直到我超过高度的看法。然而，这似乎是一种过于复杂的方法，并且在需要调整视图大小时（例如在 iPad 旋转上）确实不实用

在 iOS 6.x 上是否有更简单、更有效的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-21T16:23:36.473

我用它在 UIImageView 中水平平铺图像：

```
UIImage *image = [UIImage imageNamed:@"my_image"];
UIImage *tiledImage = [image resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0) resizingMode:UIImageResizingModeTile];
UIImageView *imageView = [[UIImageView alloc] initWithImage:tiledImage]; 
```

这假设您将 UIImageView 的框架设置为比您的图像资产更大的尺寸。如果高度高于您的图像，它也会垂直平铺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:02:21.990

您是否考虑过使用[UIColor](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html)的方法`colorWithPatternImage:`来创建重复图案并仅传递具有正确水平宽度的图像？

代码示例：

```
 // On your desired View Controller

 - (void)viewDidLoad
 { 
      [super viewDidLoad];
      UIImage *patternImage = [UIImage imageNamed:@"repeating_pattern"];
      self.view.backgroundColor = [UIColor colorWithPatternImage:patternImage];

      // ... do your other stuff here...
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T00:41:25.610

```
UIImage *image = [UIImage imageNamed:@"test.png"];
UIImage *resizableImage = [image resizableImageWithCapInsets:UIEdgeInsetsMake(0, image.size.width / 2, 0, image.size.width / 2)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:47:29.037

所以我想出了一个解决方案。我觉得有点笨拙，但它确实有效。

基本上我所做的是创建我的可拉伸图像，并指定了左右大写。然后我用它初始化一个 UIImageView 。然后我将图像视图的框架调整到所需的宽度。这将适当地调整其中包含的图像的大小。

最后我使用了一段我发现的代码，它通过垂直平铺现在包含在图像视图中的调整后的图像来创建一个新图像。请注意，我如何使用 UIImageView 视图的 image 属性而不是访问原始 UIImage。

最后一件事是将新的 UIImage 设置为视图的图案背景颜色

这是代码：

```
// create a strechable image
        UIImage *image = [[UIImage imageNamed:@"progressBackgroundTop@2x.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 60, 0, 60)];

        // create the image view that will contain it
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        CGRect frame = imageView.frame;
        frame.size.width = self.view.bounds.size.width;
        imageView.frame = frame;

        // create the tiled image
        CGSize imageViewSize = imageView.bounds.size;
        UIGraphicsBeginImageContext(imageViewSize);
        CGContextRef imageContext = UIGraphicsGetCurrentContext();
        CGContextDrawTiledImage(imageContext, (CGRect){ CGPointZero, imageViewSize }, imageView.image.CGImage);
        UIImage *finishedImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        self.view.backgroundColor = [UIColor colorWithPatternImage:finishedImage]; 
```

# android - Android <-> iOS 直接通信（蓝牙）。可能吗？

> ID：15580096
> 
> 赞同：16
> 
> 时间：2013-03-22T21:23:54.820
> 
> 标签：android, iphone, ios, bluetooth, wifi-direct

首先，我是一名 Android 开发人员，所以这个问题要问所有的 iOS 开发人员。

是否可以实现 Android <-> iPhone/iPad**直接通信**？
有些人声称这是不可能的，有些人声称这是不可能的。

我想两种可能的**技术**是**蓝牙**和/或 Wi-Fi Direct。
*不建议使用 Wi-Fi Direct，因为 Gingerbread 不支持它，据我所知，iPhone 也不支持它*（可能是 iPhone 6，正如我从谣言中听到的那样）

众所周知，iOS 设备之间使用**GameKit**实现蓝牙通信，这里有一个[参考](https://stackoverflow.com/questions/14575706/send-string-by-bluetooth-iphone-sdk)。

我不明白与 GameKit 交流时有**什么特别之处？？**
消息是否以某种方式在消息的**开头**和结尾带有额外的字节？好的，我们可以在 Android 中以同样的方式包装消息！
消息是否**加密**？！如果是这样，我们可以在 Android 设备中收到它们时解密它们吗？

任何想法、变通方法或其他黑客解决方案都非常受欢迎！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T09:58:18.810

iOS 中提供了三个框架，您可以使用它们来开发蓝牙应用程序：

**1\. GameKit**：这是公开可用的框架。但是使用这个你只能在两个 iOS 设备之间建立和通信。所以这个框架有其自身的局限性。

**2.BluetoothManager：**这是私有框架。我用这个框架来发现非iOS设备。我也建立了连接。但不能进行数据交换。我认为它仍在开发中。对于参考，您可以参考[此链接](http://www.pocketmagic.net/2012/07/bluetooth-and-ios-use-bluetooth-in-your-iphone-apps/#.UWPkrDmTCib)

**3\. CoreBluetooth：**这也是公共框架。这只能发现支持[BLE](http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html)的设备。我已经成功地使用它在支持 BLE 的设备之间传输数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T03:09:17.740

iOS 没有实现任何允许它与其他操作系统通信的标准蓝牙协议。GameKit 是专有的，如果它很容易破解，那么人们早就这样做了（Apple 会堵住这个漏洞）。

蓝牙 LE 仅被少数 Android 设备支持（它还没有在 AOSP 中）所以它还不是真的有用，即使它确实支持点对点。

我已经读过可以通过 Wi-Fi 直接执行您想要的操作，例如使用这个库： [https](https://www.alljoyn.org/) ://www.alljoyn.org/ 它说它同时支持 Android 和 iOS - 我还没有尝试过它自己，但它似乎做你所追求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:50:31.473

对于同一本地网络上的设备，Bonjour（又名 zeroconf）可能是不同机器/设备上的进程发现并相互交互的好方法。

有关Bonjour 的 Android 实现的一些指针，请参阅*[适用于 android 的 apple bonjour 。](https://stackoverflow.com/q/12282257/643383)*

# c# - 即使条件为真，条件的错误部分也已解决

> ID：15580099
> 
> 赞同：1
> 
> 时间：2013-03-22T21:24:21.367
> 
> 标签：c#, reflection, dll

我最近不得不更改一段代码以允许与旧版本的 DLL 兼容。DLL 具有相同的名称且未签名。不同之处还在于添加到新 DLL 中的一些附加方法。

一种对我来说似乎不正确的方法是在项目中引用新的 DLL，构建并运行。如果要使用其他 DLL，只需将其替换到 bin 文件夹中即可。您可以通过使用反射检查某个构造函数中某个方法的存在来避免错误，并设置一个标志，以便以后您可以避免在使用旧版本时调用新函数。

对我来说奇怪的是，以下代码在使用旧版本时不起作用：

```
int[] someVariable = (DLLIsNewFormat) ? DLL.CallNewMethod() : new int[5]; 
```

基本上发生的事情是 DLLIsNewFormat 是 False 但由于某种原因我得到了错误：

> 找不到方法：'Int32[] [NameSpace].[Class].CallNewMethod()'。

我知道解决此问题的最佳方法可能是检查每个函数是否存在，然后使用反射调用它们。但我只是不知道为什么代码会这样。这只是未定义的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:28:53.460

您想要的是从 JIT 隐藏对不存在方法的调用。

为此，您需要确保在函数内部进行的每个不存在的调用以及对此类函数的*调用*都由版本条件控制：

```
private int[] WrappedNewMethod()
{
  return DLL.CallNewMethod();
}

...SomeOtherMethod()
{
   int[] someVariable = (DLLIsNewFormat) ? WrappedNewMethod(): new int[5];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:30:10.083

这发生在包含您的代码段的方法是 JIT 编译的时候。为了进行 JIT 编译，该方法需要在调用该方法时可用。由于该方法不可用，因此当调用包含此代码的方法时，甚至在该方法执行之前，JIT 编译器会抛出此异常。

解决这个问题的一种方法是定义一个新方法：

```
int[] HideCall()
{
    return DLL.CallNewMethod();
} 
```

然后调用这个方法而不是`DLL.CallNewMethod()`直接调用。

更好的解决方案是在程序集中定义一个接口，该接口由您的“条件 DLL”和您有条件地使用此 DLL 的程序集引用。在主程序集中提供此接口的默认实现，并在有条件使用的 DLL 中提供替代实现。

然后，在运行时，您可以简单地查看 DLL 是否可用，使用反射构造实现此接口的类的实例，然后用这个替换对默认实现的引用。

示例代码：

```
// Interface, in an assembly visible to both of the other assemblies.
public interface IDLLInterface
{
    int[] CallNewMethod();
}

// Implementation in the main program.
class DefaultDLLImplementation : IDLLInterface
{
    public int[] CallNewMethod()
    {
        return new int[5];
    }
}

static class DLLImplementation
{
    public readonly IDLLInterface Instance;

    static DLLImplementation()
    {
        // Pseudo-code
        if (DllIsAvailable) {
            Instance = ConstructInstanceFromDllUsingReflection();
        } else {
            Instance = new DefaultDLLImplementation();
        }
    }
} 
```

然后你可以`DLLImplementation.Instance.CallNewMethod()`改用，正确的方法会被自动调用。

当然，我建议使用更具描述性的名称来命名您的界面，以便清楚其含义。

# winforms - Windows 8 上的 Windows 窗体 MDI 最大化子

> ID：15580101
> 
> 赞同：0
> 
> 时间：2013-03-22T21:24:27.457
> 
> 标签：winforms, windows-8, mdi

我有一个 Windows 窗体应用程序，当我打开一个 mdi 子窗体时，它的主窗体作为 MDI 容器工作，它的 WindowState 发生了您在图片 1 中看到的情况，该窗体已最大化，但边框显示为正常状态无论如何，按钮 min、max 和 close 都显示在 mdi 父级中，就像它显示最大化形式时一样。

再次恢复并最大化后，它可以正常工作，如图 2 所示

![图像1](../Images/ed94581614f7693deee1888b515d2ece.png)

![图2](../Images/8339e66c8e235aa06cf759fca3992565.png)

# javascript - 使用 Java Script 动态更改段落中的日期（需要跨浏览器解决方案）

> ID：15580102
> 
> 赞同：0
> 
> 时间：2013-03-22T21:24:34.490
> 
> 标签：javascript, datetime, inline, innerhtml

我创建了一个抽奖官方规则弹出窗口，它会在月份更改时自动更新日期。它完美地工作，除了在 IE 中，呃！所以我试图在 span 标记中对动态内容进行 java 脚本更改，但我遇到了障碍。我知道我需要使用 innerHTML 并配置一个 id，但我不确定如何实现它。这是我的全 Java 生成的弹出窗口：http: [//images.zales.com/images/CMSImages/angelaspeed/test/rw_sweeps.html](http://images.zales.com/images/CMSImages/angelaspeed/test/rw_sweeps.html)（记住它在 IE 中不起作用）。

其次，我还没有找到一种有效的方法来生成该月的最后一天以在我的内联代码中使用，因此您将看到“月的最后一天”+ 使用的年份。如果您有解决方案，请告诉我。

谢谢大师，爱女士新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:41:05.380

**`new Date(y, m, 0).getDate()`**返回该月最后一天的日期，其中 m 是 1 到 12 之间的整数，y 是 4 位数年份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:29:47.853

```
var today = new Date(),

    firstOfMonth = new Date(today.getFullYear(), today.getMonth(), 1),
    midMonth     = new Date(today.getFullYear(), today.getMonth(), 15),
    lastOfMonth  = new Date(today.getFullYear(), today.getMonth()+1, 0);

   document.write(firstOfMonth + "<br/>" + midMonth + "<br/>" + lastOfMonth); 
```

回应上述OP的评论。

# powershell - Powershell：并行运行多个作业并查看后台作业的流式传输结果

> ID：15580105
> 
> 赞同：16
> 
> 时间：2013-03-22T21:24:50.083
> 
> 标签：powershell, parallel-processing, background-process, start-job

**概述**

希望调用一个接受参数的 Powershell 脚本，在后台运行每个作业，并向我显示详细的输出。

**我遇到的问题**

该脚本似乎正在运行，但我想通过在后台作业运行时流式传输结果来确定这一点。

**代码**

```
###StartServerUpdates.ps1 Script###

#get list of servers to update from text file and store in array
$servers=get-content c:\serverstoupdate.txt

#run all jobs, using multi-threading, in background
ForEach($server in $servers){
  Start-Job -FilePath c:\cefcu_it\psscripts\PSPatch.ps1 -ArgumentList $server
}

#Wait for all jobs
Get-Job | Wait-Job

#Get all job results
Get-Job | Receive-Job 
```

**我目前看到的：**

```
Id              Name            State      HasMoreData     Location             Command                  
--              ----            -----      -----------     --------             -------                  
23              Job23           Running    True            localhost            #patch server ...        
25              Job25           Running    True            localhost            #patch server ... 
```

**我想看到的：**

```
Searching for approved updates ...

Update Found:  Security Update for Windows Server 2003 (KB2807986)
Update Found:  Windows Malicious Software Removal Tool - March 2013 (KB890830)

Download complete.  Installing updates ...

The system must be rebooted to complete installation.
cscript exited on "myServer" with error code 3.
Reboot required...
Waiting for server to reboot (35)

Searching for approved updates ...

There are no updates to install.
cscript exited on "myServer" with error code 2.
Servername "myServer" is fully patched after 2 loops 
```

我希望能够看到输出或将其存储在某处，以便我可以回顾以确保脚本运行并查看哪些服务器重新启动等。

**结论：**

过去，我运行脚本，它一次更新一个服务器，并给了我想要的输出，但是当我开始做更多服务器时 - 这个任务花费了太长时间，这就是我尝试使用后台的原因带有“开始工作”的工作。

谁能帮我解决这个问题，好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T09:32:02.417

您可以查看模块[SplitPipeline](https://github.com/nightroman/SplitPipeline)。它专为此类任务而设计。工作演示代码是：

```
# import the module (not necessary in PS V3)
Import-Module SplitPipeline

# some servers (from 1 to 10 for the test)
$servers = 1..10

# process servers by parallel pipelines and output results immediately
$servers | Split-Pipeline {process{"processing server $_"; sleep 1}} -Load 1, 1 
```

对于您的任务，通过调用您的脚本替换`"processing server $_"; sleep 1`（模拟一个缓慢的工作）并将变量`$_`用作输入，即当前服务器。

如果每个作业不是处理器密集型，则增加参数`Count`（默认为处理器计数）以提高性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-30T09:21:42.303

这不是一个新问题，但我觉得它缺少一个答案，包括使用工作流的 Powershell 及其并行可能性，来自 powershell 版本 3。与开始和等待作业相比，它的代码更少，可能更容易理解，这当然也很好用。

我有两个文件：`TheScript.ps1`协调服务器和`BackgroundJob.ps1`进行某种检查。它们需要位于同一目录中。

`Write-Output`后台作业文件写入您在启动时看到的同一流`TheScript.ps1`。

脚本.ps1：

```
workflow parallelCheckServer {
    param ($Servers)
    foreach -parallel($Server in $Servers)
    {
        Invoke-Expression -Command ".\BackgroundJob.ps1 -Server $Server"
    }
}

parallelCheckServer -Servers @("host1.com", "host2.com", "host3.com")

Write-Output "Done with all servers." 
```

BackgroundJob.ps1（例如）：

```
param (
    [Parameter(Mandatory=$true)] [string] $server
)

Write-Host "[$server]`t Processing server $server"
Start-Sleep -Seconds 5 
```

因此，当启动`TheScript.ps1`它时，它将写入“处理服务器”3 次，但它不会等待 15 秒而是等待 5 秒，因为它们是并行运行的。

```
[host3.com]  Processing server host3.com
[host2.com]  Processing server host2.com
[host1.com]  Processing server host1.com
Done with all servers. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:50:00.927

在您的`ForEach`循环中，您需要获取已运行的作业生成的输出。

未测试的示例

```
$sb = {
     "Starting Job on $($args[0])"
     #Do something
     "$($args[0]) => Do something completed successfully"
     "$($args[0]) => Now for something completely different"
     "Ending Job on $($args[0])"
}
Foreach($computer in $computers){
    Start-Job -ScriptBlock $sb -Args $computer | Out-Null
    Get-Job | Receive-Job
} 
```

现在，如果你这样做，你所有的结果都会好坏参半。您可能希望在详细输出上加盖印章，以说明来自哪个输出。

或者

```
Foreach($computer in $computers){
    Start-Job -ScriptBlock $sb -Args $computer | Out-Null
    Get-Job | ? {$_.State -eq 'Complete' -and $_.HasMoreData} | % {Receive-Job $_}
}
while((Get-Job -State Running).count){
    Get-Job | ? {$_.State -eq 'Complete' -and $_.HasMoreData} | % {Receive-Job $_}
    start-sleep -seconds 1
} 
```

作业完成后，它将显示所有输出。不至于混为一谈。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T16:10:08.987

如果您想要多个正在进行的作业，您可能想要按摩输出以帮助保持输出与控制台上的作业直接相关。

```
$BGList = 'Black','Green','DarkBlue','DarkCyan','Red','DarkGreen'
$JobHash = @{};$ColorHash = @{};$i=0

ForEach($server in $servers)
{
  Start-Job -FilePath c:\cefcu_it\psscripts\PSPatch.ps1 -ArgumentList $server |
   foreach {
            $ColorHash[$_.ID] = $BGList[$i++]
            $JobHash[$_.ID] = $Server
           }
}
  While ((Get-Job).State -match 'Running')
   {
     foreach ($Job in  Get-Job | where {$_.HasMoreData})
       {
         [System.Console]::BackgroundColor = $ColorHash[$Job.ID]
         Write-Host $JobHash[$Job.ID] -ForegroundColor Black -BackgroundColor White
         Receive-Job $Job
       }
    Start-Sleep -Seconds 5
   } 
 [System.Console]::BackgroundColor = 'Black' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-12T02:43:02.873

在收到所有作业后，您可以通过执行以下操作来获得结果：

$array=@() Get-Job -Name * | 其中{$array+=$_.ChildJobs.output}

.ChildJobs.output 将包含每个作业中返回的任何内容。

# android - 如何动态创建菜单项？

> ID：15580111
> 
> 赞同：60
> 
> 时间：2013-03-22T21:25:05.260
> 
> 标签：android, android-layout, dynamic, menuitem, android-menu

我正在构建一个 Android 应用程序，我正在尝试构建一个用户管理系统，用户可以在其中登录、注销等。如果用户已注销，我想显示一个登录菜单项，如果用户已登录，我想显示一个注销按钮在。我怎样才能动态地做到这一点？

这是现在的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/add" android:title="Add" android:icon="@drawable/ic_menu_add"/>
  <item android:id="@+id/list" android:title="List" android:icon="@drawable/ic_menu_list"/>
  <item android:id="@+id/refresh" android:title="Refresh" android:icon="@drawable/ic_menu_refresh"/>
  <item android:id="@+id/login" android:title="Login" android:icon="@drawable/ic_menu_login"/>
</menu> 
```

这是我现在的Java：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.activity_main, menu);
    return(super.onCreateOptionsMenu(menu));
}

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    System.out.println(item.getItemId()==R.id.add);
    if (item.getItemId()==R.id.add)
    {
        //Cannot add spot unless we have obtained the users current location. 
        if((currentLat != 0) && (currentLng != 0))
        {

            System.out.println("loggedin? : "  + auth.isLoggedIn());
            if(!auth.isLoggedIn())
            {
                Toast.makeText(MainActivity.this, "You must be logged in to add a new spot",
                        Toast.LENGTH_LONG).show();
            }
            else
            {

                Intent addIntent = new Intent(MainActivity.this, AddSpot.class);
                Bundle b = new Bundle();
                b.putDouble("currentLat", currentLat);
                b.putDouble("currentLng", currentLng);
                addIntent.putExtras(b);
                startActivity(addIntent);
                return(true);
            }
        }
    }   
    else if(item.getItemId()==R.id.list)
    {
        //Pointless showing them a blank screen if nothing is retrieved from the server
        if(list != null)
        {
            Intent listIntent = new Intent(MainActivity.this, ListLocations.class);
            listIntent.putExtra("list", list);
            startActivity(listIntent);
            return(true);
        }
    }

    if(item.getItemId()==R.id.refresh)
    {
        finish();
        startActivity(getIntent());
        return(true);       
    }

    if(item.getItemId()==R.id.login)
    {
        Intent loginIntent = new Intent(MainActivity.this, LoginActivity.class);
        startActivity(loginIntent);
        return(true);   
    }

    return(super.onOptionsItemSelected(item));
} 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-03-22T22:13:22.623

## 如何将菜单项动态添加到 Android Activity

```
public class yourActivity extends Activity {
    ...
    private static final int MENU_ADD = Menu.FIRST;
    private static final int MENU_LIST = MENU.FIRST + 1;
    private static final int MENU_REFRESH = MENU.FIRST + 2;
    private static final int MENU_LOGIN = MENU.FIRST + 3;

    /**
     * Use if your menu is static (i.e. unchanging)
     */
    /*
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        menu.add(0, MENU_ADD, Menu.NONE, R.string.your-add-text).setIcon(R.drawable.your-add-icon);
        menu.add(0, MENU_LIST, Menu.NONE, R.string.your-list-text).setIcon(R.drawable.your-list-icon);
        menu.add(0, MENU_REFRESH, Menu.NONE, R.string.your-refresh-text).setIcon(R.drawable.your-refresh-icon);
        menu.add(0, MENU_LOGIN, Menu.NONE, R.string.your-login-text).setIcon(R.drawable.your-login-icon);
        return true;
    }
    */

    /**
     * Gets called every time the user presses the menu button.
     * Use if your menu is dynamic.
     */
    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        menu.clear();
        if(enableAdd)
            menu.add(0, MENU_ADD, Menu.NONE, R.string.your-add-text).setIcon(R.drawable.your-add-icon);
        if(enableList)
            menu.add(0, MENU_LIST, Menu.NONE, R.string.your-list-text).setIcon(R.drawable.your-list-icon);
        if(enableRefresh)
            menu.add(0, MENU_REFRESH, Menu.NONE, R.string.your-refresh-text).setIcon(R.drawable.your-refresh-icon);
        if(enableLogin)
            menu.add(0, MENU_LOGIN, Menu.NONE, R.string.your-login-text).setIcon(R.drawable.your-login-icon);
        return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        super.onOptionsItemSelected(item);

        switch (item.getItemId()) {
        case MENU_ADD: doAddStuff(); break;
        case MENU_LIST: doListStuff(); break;
        case MENU_REFRESH: doRefreshStuff(); break;
        case MENU_LOGIN: doLoginStuff(); break;
        }
        return false;
    } 
```

* * *

如果用户已登录，以下具体示例会添加一个 MENU_LOGOUT 选项。

```
 private static final int MENU_LOGOUT = MENU.FIRST + 4;

    public boolean onPrepareOptionsMenu(Menu menu) {
        ...
        if(auth.isLoggedIn()) {
            menu.add(0, MENU_LOGOUT, Menu.NONE, R.string.your-logout-text).setIcon(R.drawable.your-logout-icon);
        }
        ...
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        ...
        case MENU_LOGOUT:
            if(auth.isLoggedIn()) {
                doLogout();
            } else {
                Toast.makeText(this, "You must have somehow been logged out between the time the menu button was pressed and now.", Toast.DURATION_LONG).show();
            }
            break;
        ...
    } 
```

这里的所有都是它的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-07T05:10:54.693

**在我的情况下，菜单项在 ArrayList 中，** *-试试这个希望它会帮助你**:)***

```
public void onClick(View v)
{
    PopupMenu menu = new PopupMenu(DialogCheckBox.this, v);
    for (String s : limits) { // "limits" its an arraylist  
        menu.getMenu().add(s);
    }
    menu.show();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-22T21:40:08.287

可以调用[invalidateOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29) ()（注意：需要支持低API版本时需要使用actionBarSherlock之类的兼容库才能访问），然后根据状态更新菜单项。

在那里您可以隐藏登录操作项并显示注销操作项。

您也可以尝试更新图标本身，但我从未尝试过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-17T10:18:03.813

```
private void getPopup(final TextView textView, ArrayList<String> arrayList) {
        final PopupMenu popupMenu = new PopupMenu(sContext, textView);
        for (int i = 0; i < arrayList.size(); i++) {
            popupMenu.getMenu().add(arrayList.get(i));
        }
        popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem item) {
                textView.setText(item.getTitle());
                return false;
            }
        });
        popupMenu.show();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-29T07:37:40.610

创建菜单项的简单方法：

```
Dynamic_PopUpMenu.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                PopupMenu menu = new PopupMenu(DialogCheckBox.this, v);
                menu.getMenu().add("AGIL"); // menus items 
                menu.getMenu().add("AGILANBU"); // menus items
                menu.getMenu().add("AGILarasan");
                menu.getMenu().add("Arasan");
                menu.show();
            }
        }); 
```

**试试这个 ：）**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-04T15:17:19.447

它是如此容易

创建菜单

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    for (int i = 0; i < list.size(); i++) {
        menu.add(0, i, 0, "Menu Name").setShortcut('5', 'c');
    }

    return true;
} 
```

从单击的菜单中获取详细信息

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    int id = item.getItemId(); //to get the selected menu id
    String name = item.getTitle(); //to get the selected menu name

    return super.onOptionsItemSelected(item);
} 
```

# java - 如何在 Java 中读取不在 Eclipse 中的文件

> ID：15580112
> 
> 赞同：0
> 
> 时间：2013-03-22T21:25:11.700
> 
> 标签：java, eclipse

我有一个运行测试所需的文件 - 该文件需要由运行测试的任何人进行个性化（名称和密码）。我不想将此文件存储在 Eclipse 中（因为它需要由运行测试的任何人更改；它还将在存储库中存储个人信息），所以我将它放在我的主文件夹中（/home/conrad/ ssl.properties）。如何将我的程序指向该文件？

我试过了：

```
InputStream sslConfigStream = MyClass.class
    .getClassLoader()
    .getResourceAsStream("/home/" + name + "/ssl.properties"); 
```

我也试过：

```
MyClass.class.getClassLoader();
InputStream sslConfigStream = ClassLoader
    .getSystemResourceAsStream("/home/" + name + "/ssl.properties"); 
```

这两个都给了我一个 RuntimeException 因为它`sslConfigStream`是空的。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:27:37.070

使用 a`FileInputStream`从文件中读取数据。构造函数采用字符串路径（或`File`封装字符串路径的对象）。

**注意 1：** “资源”是类路径中的文件（与您的 java/class 文件一起）。由于您不想将文件存储为资源，因为您不希望它在您的存储库中，`ClassLoader.getSystemResourceAsStream()`这不是您想要的。

**注意2：** 你应该使用跨平台的方式来获取主目录中的文件，如下：

```
File homeDir = new File(System.getProperty("user.home"));
File propertiesFile = new File(homeDir, "ssl.properties"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:37:07.600

您也可以使用*扫描仪*来读取文件。

```
String fileContent = "";
try {
  Scanner scan = new Scanner(
      new File( System.getProperty("user.home")+"/ssl.properties" ));
  while(scan.hasNextLine()) {
    fileContent += scan.nextLine();
  }
  scan.close();
} catch(FileNotFoundException e) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:29:40.393

InputStream sslConfigStream = new FileInputStream("/home/" + name + "/ssl.properties")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:30:43.827

您可以使用 Java 的 7 方法简化您的工作：

```
public static void main(String[] args) {
    String fileName = "/path/to/your/file/ssl.properties";

    try {
        List<String> lines = Files.readAllLines(Paths.get(fileName),
                Charset.defaultCharset());
        for (String line : lines) {
            System.out.println(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

您还可以改进读取属性文件的方式，使用 Properties 类而忘记读取和解析 .properties 文件：

[http://www.mkyong.com/java/java-properties-file-examples/](http://www.mkyong.com/java/java-properties-file-examples/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T21:31:45.697

这是一个图形程序（即使用 Swing 库）吗？如果是这样，使用 JFileChooser 是一项非常简单的任务。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html)

```
JFileChooser f = new JFileChooser();

int rval = f.showOpenDialog(this);

if (rval == JFileChooser.APPROVE_OPTION) {
    // Do something with file called f
} 
```

# asp.net-mvc - ViewModel 是否应该具有 Count 属性来简化 View 逻辑？

> ID：15580114
> 
> 赞同：0
> 
> 时间：2013-03-22T21:25:21.527
> 
> 标签：asp.net-mvc, mvvm

哪种 ViewModels 方法更好：
1\. 只需`ICollection<T>`在 ViewModel 中有一个并在视图中访问它的属性，这几乎是我在 ASP.NET Forms 中所做的，如下所示：

```
public ICollection<Order> Orders {get; set;} 
```

所以在视图中我会做这样的事情

```
@if(Model.Orders.Count > 0){ 
```

或
2\. 为 ICollection 创建一个属性，`Count`以便视图可以直接引用该值。

```
public ICollection<Order> Orders { get; set; }
public int OrderCount { get { return Orders.Count ; } } 
```

然后在视图中

```
@if(Model.OrderCount > 0) { 
```

或者也许是一个布尔属性`HasOrders`来进一步减少视图中的逻辑？

**编辑**
我对这些评论感到有些惊讶，我接受这是主观的，但是关于是否使用字符串属性作为日期的问题也是如此，每个人都必须在某个地方开始学习。

我会多次使用该`OrderCount`物业吗？然后`if`是一个标签来显示实际计数。因此，它将比说客户电子邮件地址更频繁地使用，但如果有人建议我会感到惊讶

```
public string Email { get; set; } 
```

做得太过分了。

尝试重新调整问题的焦点；我要确定的是 ViewModel 是否应该为视图所需的所有内容提供简单的属性——因此无需深入`Model.Orders`到访问 Count。视图是否应该保持纯粹并且没有逻辑/“编程”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:45:00.647

3.）不要`Collection<T>`在视图模型上使用 a ，这可能是矫枉过正。相反，使用 T[]。为什么？因为您不应该需要视图模型中的属性提供的`.Add`,`.Remove`和其他开销方法。最后，如果您只是将它用作 DTO 将数据从控制器传递到视图，那么数组就可以了。在往返于控制器的传输过程中，无需将任何内容添加到可枚举中或从可枚举中删除。数组通常比s 和其他实现更快、更精简。`ICollection``IEnumerable``List``IEnumerable`

```
public Order[] Orders { get; set; } 
```

然后，不要使用`.Count`，使用`.Length`。拥有一个单独的财产通常也是过度的国际海事组织。为什么？因为这只是意味着您最终会在不必要的地方编写更多代码。`OrdersCount`当您可以使用时为什么要添加属性`Orders.Length`？

```
@if (Model.Orders.Length > 0) { 
```

如果您正在寻找更短的东西，您可以使用`.Any()`LINQ 扩展方法（请注意，`using System.Linq;`在 viewmodel 类中使用它时必须拥有，但在剃刀视图中使用它不需要额外的东西）：

```
@if (Model.Orders.Any()) { // returns true if Model.Orders.Length > 0 
```

此指南的一个可能例外是 if`Orders`未设置，即它是`null`。在这种情况下，您上面的剃刀代码会抛出一个`NullReferenceException`. 为此，您可以在视图模型上创建一个`HasOrders`属性以针对`null`和进行测试`.Length`。然而，更简单的解决方案可能是在构造函数中初始化属性：

```
public class MyViewModel
{
    public MyViewModel()
    {
        Orders = new Order[0];
    }

    public Order[] Orders { get; set; }
} 
```

当然，有了上面的人仍然可以将数组设置为`null`，因此您可以决定是否执行此操作，或者创建一个单独的属性来测试`null`，或者只是`null`在您的剃刀代码中进行测试。

```
using System.Linq;

public class MyViewModel
{
    public Order[] Orders { get; set; }
    public bool HasOrders { get { return Orders != null && Orders.Any(); } }
} 
```

...或者...

```
@if (Model.Orders != null && Model.Orders.Any()) { 
```

无论如何，您最终都会在消费类或消费类中获得更多代码。使用这些因素来决定哪种方法意味着更少的代码编写：

a.) 财产有可能`null`吗？

b.) 视图模型中有多少集合属性？

`null`c.) 您必须针对其中一个或`.Length`在剃刀视图中测试多少次？

# c# - 直播OGG流媒体

> ID：15580117
> 
> 赞同：0
> 
> 时间：2013-03-22T21:25:26.493
> 
> 标签：c#, xamarin.ios, stream, xamarin, ogg

我正在 Xamarin.iOS (MonoTouch) 中创建一个 iOS 应用程序，并希望连接到 OGG 直播流并播放它。我找到了 NVorbis 库，但据我所知，它不支持阅读实时流。而且我也不确定 Xamarin.iOS 是否支持这个库。csvorbis代码也[一样](https://github.com/mono/csvorbis)，它似乎不支持直播。

我不介意更改或创建代码以添加对直播的支持，但我不确定如何执行此操作。然后我是否要下载部分流然后播放它，并对我下载的每个部分执行此操作？

当然我更喜欢现有的解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:30:27.733

蒂姆，

NVorbis 是我的项目。虽然它目前不支持实时协议（RTSP 等），但您可以成功地使用 NetworkStream 实例。解码器根据需要处理页面/数据包，因此它应该工作得很好。

请注意，我已经很长时间没有测试过仅向前的 Ogg 阅读器逻辑了，所以可能会有错误...

# java - Netbeans 是否支持非英语语言？

> ID：15580119
> 
> 赞同：2
> 
> 时间：2013-03-22T21:25:33.463
> 
> 标签：java, netbeans, encoding, filenames, mojibake

### Netbeans 真的支持 unicode (UTF-8)，还是更好，它真的支持非英语语言？

我玩过一些 java 和 Netbeans，但遇到了一些问题。我可以认为这是java的问题，但我不这么认为。

1.  我需要将文件从某种编码转换为 UTF-8，我认为这样做非常简单，因为 JEdit（一个简单的文本编辑器）和许多简单的文本编辑器默认支持它。可悲的是，印象深刻的是，我发现没有某种插件的 Netbeans 是不可能的。[在这个错误](http://netbeans.org/bugzilla/show_bug.cgi?id=114123)中看到类似的东西。因为惊喜，我放弃了，然后又回到了 JEdit。

2.  几天后，让我们再试一次，但现在，遇到了与[其他错误](http://netbeans.org/bugzilla/show_bug.cgi?id=118232)类似的问题，而是使用葡萄牙语（变音符号不起作用）。在jar 文件名`ç`中被替换为。`_`必须手动修复项目属性中的文件名。好的，通过。

3.  同样是 2) 中描述的问题，但现在已知[Mojibake](http://en.wikipedia.org/wiki/Mojibake)一词是我在 jar 文件中的文件名中看到的，在 MANIFEST.MF 文件中`çã`被替换为, 。`Ã§Ã£`

他们不是说所有的项目都应该是 UTF-8 吗？那么为什么“他们”制作的 MANIFEST.MF 不是呢？

* * *

## 环境

*   网豆：7.3
*   JDK：7 更新 17
*   操作系统：Windows 7
*   地区：葡萄牙语（巴西）

* * *

## 更新

dist/ 文件夹下生成的 README.TXT 也有同样的问题。但是现在在netbeans中它显示为小方块。

我检查了项目中指定的编码，至少源代码似乎是 UTF-8。在我的 netbeans 中，它在项目属性>“Códigos-fonte”中找到，然后是“Codificação”（编码）。

* * *

## 解决方案

### 翻译成美式英语

*   将涉及 Java 开发环境的所有内容翻译成美国英语。
*   开始自学英语，也许，也教其他人。

### 使用 bat 文件构建应用程序

注意：我已经在我的环境中进行了测试，并且可以正常工作。

您可以使用 Netbeans 编辑您的文件，而无需使用它构建任何内容，只需编辑源文件即可。

这是一个非常简单的示例，因此您可以从以下内容开始（记得保存为 UTF-8）：

**C:\在您的项目文件夹中\builder.bat**

```
@echo 关闭
chcp 65001
标题构建应用程序
设置路径=%path%;c:\java\jdk\bin
设置 app= （UTF-8 应用程序名称）
回声。
echo # 清洁
del %app%.class %app%.jar
回声。
echo # 正在编译...
javac -Xlint:deprecation -g -encoding UTF-8 %app%.java
回声。
echo # 包装...
jar cvfm %app%.jar %app%.manifest %app%.class
回声。
echo # 执行中...
爪哇%应用%

```

* * *

**结论**

这是一个非常棒的 IDE，有这么多的特性，为什么会这样呢？

Unicode 并不新鲜，即使在 Windows 中...

我真的理解用一种语言维护一个项目的困难，我能想到用多种语言可能会是什么！所以，对于阅读它的开发人员，我很抱歉，我并不是负面地批评它，我真的很想知道这个 IDE（甚至整个 Java 开发环境）是否可以在英语以外的其他语言中使用。

## 也可以看看

对于一个简单的文本编辑器（你会在那里找到 JEdit）：[https](https://stackoverflow.com/questions/1182071/lightweight-java-ide) ://stackoverflow.com/questions/1182071/lightweight-java-ide 。

# c - 如何解决奇怪的变化值？

> ID：15580122
> 
> 赞同：2
> 
> 时间：2013-03-22T21:25:49.450
> 
> 标签：c, garbage-collection, undefined-behavior, vm-implementation

我正在为一种小型计算机语言制作虚拟机。该虚拟机是使用 GNU 实用程序 Flex 用 C 语言开发的。因此，项目编译是使用 GNU GCC，然后是 Flex。

在这个虚拟机中，我有一个 GC Stop & Copy。在我更改之前，GC 的工作内存无法扩大 - 例如，如果第一次翻转没有优化用于进行新分配的空间，则从 512 字节变为 1024 字节。

这种改变似乎奏效了。事实上，我不知道自从这些更改后它是否真的有效，但现在我有一个错误。它刚刚出现在第一个翻转中。事实上，当涉及到复制数据时，**我有一个*不断*变化的变量**。但是这个变量很重要，因为它指向我要复制的项目。在 Stop & Copy 中，此变量用于更改*插槽*（此处`SLOT_FORWARD`）以通知数据在内存中的新位置（以防我们仍然要复制）。

所以我有一个循环，它复制前一个容器的每个盒子，其在内存中的位置由变量指定`old`。我有一个从`addr`位置填充的新容器。**但是旧值在迭代过程中发生了变化！**并且在复制之后，我想将插槽向前更改以放置新容器的地址。但是随着 old 的变化，你可以想象我在错误的地方记录了这个值。

所以我花了很长时间调试这种情况很少发生的案例（它在 2 次翻转后发生了 3 到 4 个容器）。我使用 GDB 来了解我的一个调试函数中更改的值（同时她也通过添加调试函数进行了修改）。然后我更改了编译器（clang 到 gcc）以重新启动 GDB，并看到它是一个大括号字符（仍在调试函数中）改变了值......最后，我`const`尽可能地为所有函数设置了所有参数，现在我被告知文件`iofwrite.c`第 37 行中的值已更改。因此这是另一个世界的错误。

有问题的代码在哪里出现错误：

```
static t_case
copy(t_dono *dono, const t_case old)
{
  t_case  addr;
  t_case  size;
  t_case  temp;
  int     i;

  temp = old;

  if (mem[old + SLOT_FORWARD] >= ns
      && mem[old + SLOT_FORWARD] <= ts)
    return (mem[old + SLOT_FORWARD]);
  else
    {
      addr = mp;
      size = mem[old + SLOT_SIZE];
      i = 0;

      fprintf(stderr, "change:\t");
      dump(stderr, mem, old);

      assert(old == temp);

      while (i < size)
        {
          fprintf(stderr, "!!!COPY:\t");
          dump(stderr, mem, old);
          assert(old == temp);
          mem[addr + i] = mem[old + i]; /* BUG IS HERE */
          i = i + 1;
        }

      mem[old + SLOT_FORWARD] = addr;
      fprintf(stderr, "change:\t");
      dump(stderr, mem, old);
      assert(old == temp);
      mp = mp + size;

      return (addr);
    }
} 
```

正如你所看到的，我做了很多调试来定位错误，我得到了这个日志文件：

```
ref:            [ 0005 0001 0003 0004 0035 ]
copy:           [ 0007 0001 0003 0004 0075 0001 00f9 ]
change:         [ 0007 0001 0003 0004 0075 0001 00f9 ]
!!!COPY:        [ 0007 0001 0003 0004 0075 0001 00f9 ]
!!!COPY:        [ 0007 0001 0003 0004 0075 0001 00f9 ]
!!!COPY:        [ 0007 0001 0003 0004 0075 0001 00f9 ]
!!!COPY:        [ 0003 0001 0003 ]
!!!COPY:        [ 0003 0004 0003 ]
!!!COPY:        [ 0003 0004 0075 ]
!!!COPY:        [ 0003 0004 0075 ]
change:         [ 0003 0033 0075 ] 
```

我还使用了 Valgrind，它告诉我有很多错误，但只是在这个错误之后（这是正常的，因为 GC 现在将访问随机数据）。在此变量更改期间，我绝对没有错误。

我们可以看到通过函数 copy (l: 662) 的其他容器没有得到这种未定义的行为（请参阅第 10、48、54、66、82、120、126 和 134 行的日志文件）。只有在执行时一切都会出错，这当然会导致所有 GC 数据出错。

代码真的很长（大约 1000 行），因为目标是在单个文件 C 中运行 VM。很抱歉，我无法使代码更清晰。但问题只是神奇地出现了，我无法更进一步，制作出超越 Python 的未来语言（笑话）。

存储库的链接是： [git.osau.re](http://git.osau.re/?p=dinoscheme.git;a=summary)
更改的链接是：[ompldr](http://ompldr.org/vaHVuZQ/sandbox.tar.gz)

亲切的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:38:29.967

追踪随机内存破坏者（听起来就是这样）非常困难。我的方法是确定编译器何时决定将更改的变量（可能在堆栈上的某个位置）放置，然后为该位置设置一个观察点。这应该告诉您代码在哪里修改值——您可能会发现它在某个被调用的函数中，该函数正在向后退栈以踩到您的变量。然后你需要弄清楚为什么会这样。

# php - MySQL 简化 Select & Update 命令

> ID：15580126
> 
> 赞同：1
> 
> 时间：2013-03-22T21:26:06.330
> 
> 标签：php, mysql, sql, select, sql-update

我正在为我的网站制作一个简单的消息系统功能，登录的成员可以互相发送消息，为此我使用两个表作者（我的用户表）和消息。它们描述如下：

作者：

```
aId int(20) NO  PRI NULL    auto_increment
aUser   varchar(30) NO  UNI NULL    
aPass   varchar(40) NO      NULL    
aEmail  varchar(30) NO  UNI NULL    
aBio    mediumtext  YES     NULL    
aReg    datetime    NO      NULL 
```

留言：

```
msgId   int(20) NO  PRI NULL    auto_increment
mSender int(20) NO  MUL NULL    
mReciever   int(20) NO  MUL NULL    
mTitle  tinytext    NO      NULL    
mBody   mediumtext  NO      NULL    
mRead   tinyint(4)  NO      NULL    
mDate   datetime    NO      NULL 
```

我也有一个约束外键`messages (mReciever) REFERENCES authors(aId));` 目前，当登录用户想要向另一个用户发送消息时，html 表单有一个“用户名，消息”输入元素 - 非常简单。对于提交执行 - 首先 php 脚本使用 select 命令查询 authors 表以检查用户是否存在，然后从结果集中获取用户 id，然后 php 脚本的第二部分可以使用结果集中的 aId消息表上的插入命令。虽然这是有效的，但我想知道是否会有更简化/优雅的解决方案，也许将两个 MySQL 命令组合成一个以达到相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:30:57.173

您可以使用子查询：

```
Insert into Messages (mReceiver, mBody) Values ((select aId from Authors where aUser = @user), @message) 
```

其中@user 是用户名，@message 是消息。

# debugging - 尝试在 openshift 中转发端口时权限被拒绝

> ID：15580133
> 
> 赞同：0
> 
> 时间：2013-03-22T21:26:48.550
> 
> 标签：debugging, database-connection, openshift, portforwarding, openshift-client-tools

我对openshift有点陌生，我正在尝试尝试一下。在运行 rhc port-forward -a 命令时遵循[本教程。](https://www.openshift.com/blogs/getting-started-with-port-forwarding-on-openshift)我收到一个 Permission Denied 错误。任何想法我做错了什么？

问题不在于密码。如果您输入错误的密码，您会收到不同的错误消息

谢谢

```
C:\development\infra\appServer\apache-tomcat-7.0.27\bin>rhc port-forward -a <My WebApp>
Password: *****

Checking available ports...
Forwarding ports
C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/net-ssh-2.6.3/lib/net/ssh/service/forward.rb:68:in `initialize': Permission denied - bind(2) (Errno::EAC
CES)
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/net-ssh-2.6.3/lib/net/ssh/service/forward.rb:68:in `new'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/net-ssh-2.6.3/lib/net/ssh/service/forward.rb:68:in `local'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/commands/port-forward.rb:133:in `block (3 levels) in run'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/commands/port-forward.rb:127:in `each'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/commands/port-forward.rb:127:in `block (2 levels) in run'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/net-ssh-2.6.3/lib/net/ssh.rb:193:in `start'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/commands/port-forward.rb:125:in `block in run'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/net-ssh-2.6.3/lib/net/ssh.rb:193:in `start'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/commands/port-forward.rb:88:in `run'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/commands.rb:138:in `block (3 levels) in to_commander'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/commander-4.1.3/lib/commander/command.rb:180:in `call'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/commander-4.1.3/lib/commander/command.rb:180:in `call'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/commander-4.1.3/lib/commander/command.rb:155:in `run'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/commander-4.1.3/lib/commander/runner.rb:402:in `run_active_command'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/command_runner.rb:54:in `run!'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/commander-4.1.3/lib/commander/delegates.rb:11:in `run!'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/lib/rhc/cli.rb:40:in `start'
        from C:/development/infra/buildtools/RubyInstaller193/lib/ruby/gems/1.9.1/gems/rhc-1.2.7/bin/rhc:21:in `<top (required)>'
        from C:/development/infra/buildtools/RubyInstaller193/bin/rhc:23:in `load'
        from C:/development/infra/buildtools/RubyInstaller193/bin/rhc:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:01:11.903

看起来您正在运行旧版本的 rhc 客户端工具 (1.2.7)。请在更新您的客户端工具后重试（gem update rhc）。

该错误表明您的主机无法绑定特定的本地端口，可能导致它正在使用中。最新的 rhc 客户端通过绑定到下一个开放端口来响应。如果您在更新后仍有问题，请告诉我们。

# javascript - 从多维数组列表中搜索字符串

> ID：15580136
> 
> 赞同：0
> 
> 时间：2013-03-22T21:27:03.723
> 
> 标签：javascript

我有一个数组，如下所示。当我输入 3 时，它应该显示“三”，或者如果我输入 1，它应该显示“一”。

```
var v1 = new Array("('one', '1)", "('Two', '2')", "('Three', '3)"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:34:36.663

您可以使用 JavaScript 对象文字：

```
var v1 = {
    1: 'one',
    2: 'two',
    3: 'three'
};

alert(v1['1']); // one 
```

[小提琴](http://jsfiddle.net/ethagnawl/8PHj7/)

# html - 画布：鼠标事件

> ID：15580137
> 
> 赞同：1
> 
> 时间：2013-03-22T21:27:17.587
> 
> 标签：html, events, canvas, mouse

我知道不可能将事件处理程序添加到画布中的特定圆圈或矩形。但是有一些不错的框架，例如 EaselJS、KineticJS、Paper.js、Fabric.js，它们支持对特定元素的事件处理。

有人可以解释一下他们是如何工作的吗？

我认为只有两种解决方案。
1\. 您为每个元素创建一个新的画布区域并将它们放在一起。通过这种方式，您可以为每个区域提供一个事件处理程序。
2\. 你只有一个画布区域和一个事件处理程序。这样，您必须进行复杂的数学计算才能确定是否单击了特定元素。如果您只有圆形或矩形，此解决方案可能很简单。但是如果你有很多曲线的路径，这个解决方案就很难了。

我不想使用这些库。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:20:23.307

**这是画布绘图库如何工作的简要总结**

未更改的画布只是一个大位图。一旦你在画布上绘制形状，它们就是不可访问的、被遗忘的像素。

画布绘图库将所有形状存储到“保留”对象中。每个形状对象都有足够的关于自身的信息，以允许绘图库在必要时重新绘制它。

画布绘图库是对象的“控制器”。这些库具有必要的算法，可以根据需要跟踪、操作和重绘所有形状对象。

保留有关每个形状对象的以下信息：

基本识别

*   ID，
*   形状名称
*   父级或容器

形状的固有属性：

*   矩形形状（矩形、图像、文本）知道宽度和高度。
*   圆形（圆形、椭圆形、正多边形、星形）知道半径和边数。
*   线条知道长度。
*   曲线形状（弧线、贝塞尔曲线、路径）知道锚点和控制点。
*   文字也知道……嗯，文字！
*   图像也知道它们的像素数据（通常存储在 javascript Image 对象中）

转型信息：

*   起始 X/Y 坐标
*   平移——偏离起始坐标的累积运动。
*   旋转 - 此形状的累积旋转（通常以弧度为单位）。
*   缩放 - 累积调整大小
*   其他变换（不太常见）是倾斜和扭曲
*   分层信息——当前 z-index

造型信息：

*   描边颜色，
*   笔画宽度，
*   填色，
*   不透明度，
*   是可见的，
*   线帽，
*   角半径

追踪能力：

*   边界框——完全包含此形状的最小矩形
*   这用于“命中测试”以查看鼠标是否在此对象内（用于选择和拖动）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:29:24.520

如果您不想使用库，您可能会发现我[在此线程中](https://stackoverflow.com/questions/14343193/creating-speech-bubbles/14359738#14359738)的回答很有帮助。正如markE所说，一旦将画布写入，就无法跟踪该数据（除非您关心遍历每个单独的像素并测试其颜色；尽管这仅对像素级碰撞检测真正有用）。

# prolog - Prolog中的原子转义规则

> ID：15580140
> 
> 赞同：3
> 
> 时间：2013-03-22T21:27:40.540
> 
> 标签：prolog, iso-prolog

我需要将使用 Java 中的任意术语表示表示的 Prolog 程序导出到文件。这个想法是 Prolog 解释器应该能够在之后查阅生成的文件。我的问题是关于在表示原子术语的文件 Java 字符串中写入的正确方法。

例如，如果字符串中间有空格，则在文件中应该用单引号括起来：

 *你好世界*   **变成**   *“你好世界”*

并且出口商应该考虑应该转义的字符：

 *'*   **变成**  *'\''*

有人可以指出这些规则被指定的地方吗？并且：我可以假设这些规则受到主要 Prolog 实现者的尊重吗？（我的意思是，按照这些规则生成的 Prolog 程序会被大多数 Prolog 解释器正确解析？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:56:54.887

准确的地方是标准 ISO/IEC 13211-1:1995 `quoted_token (* 6.4.2 *)`，. 请参阅[此答案](https://stackoverflow.com/a/10914371/772868)如何以 30 美元的价格获得它。

由于续行等许多额外内容，精确的语法非常复杂。如果你只写应该被 Prolog 读取的原子，事情会容易一些。同样在这种情况下，您总是可以引用，这使得再次编写更简单一些。

需要注意的一些事项：

只有简单的空格可以作为带引号的原子中的布局出现。所有其他空格都需要像`\t`, `\n`( `abrftnv`) 一样进行转义。许多系统也接受其他布局，但它们在非常小的细节上彼此不同。

反斜杠和引号必须转义。

可打印 ASCII 范围之外的字符取决于系统支持的 PCS。在符合标准的系统中，随附的文档应定义附加字符（扩展字符）的分类方式。文档质量差异很大。

在任何情况下，也要使用 1.4.1 以上的 GNU-Prolog 测试您的界面。迄今为止，就语法而言，GNU 1.4.1+ 和标准之间没有任何区别。

这里有[一些 240+ 语法相关的测试用例](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/conformity_assessment)。请报告任何疏忽！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:35:50.723

一个实用的提示：如果你用你的 Prolog 发出一个[writeq](http://www.swi-prolog.org/pldoc/doc_for?object=writeq/1)，你需要知道的数据，你会在需要的时候得到报价。

# css - 如何将 CSS 文件连接到存储在 Web 内容中的 JSP 页面（动态 Web 项目）

> ID：15580142
> 
> 赞同：0
> 
> 时间：2013-03-22T21:27:49.887
> 
> 标签：css, eclipse, spring-mvc

我对 Spring|Hibernate|Eclipse 设置很陌生。出于某种原因，我的 index.jsp 文件没有选择 css 文件（css 和 css01）。

任何线索为什么？

![在此处输入图像描述](../Images/824582d82d65689a1e388543e2a44fd3.png)

```
<link rel="stylesheet" href="css/theme_switcher.css" type="text/css">
<link rel="stylesheet" href="css01/job_blue.responsive.css" title="job_blue" type="text/css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:37:18.483

您没有提供标签的结束**标签**`link`。像这样提供。

```
<link rel="stylesheet" href="css/theme_switcher.css" type="text/css" />
<link rel="stylesheet" href="css01/job_blue.responsive.css" title="job_blue" type="text/css" /> 
```

**或者**

```
<link rel="stylesheet" href="css/theme_switcher.css" type="text/css"></link>
<link rel="stylesheet" href="css01/job_blue.responsive.css" title="job_blue" type="text/css"></link> 
```

# ruby-on-rails - Rails 使用 belongs_to 访问记录

> ID：15580143
> 
> 赞同：0
> 
> 时间：2013-03-22T21:27:50.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个用户模型 has_many hacks 和 hack belongs_to 用户。Hack 有一个字段 user_id。

我有一个带有主页操作的 static_pages_controller：

```
def home
  @hacks = Hack.all
  @users = User.all
end 
```

用户模型为：

```
class User < ActiveRecord::Base
  attr_accessible :username, :email, :password, :password_confirmation
  has_secure_password

  has_many :hacks
end 
```

黑客模型是：

```
class Hack < ActiveRecord::Base
  attr_accessible :hack_name, :serial_ids, :commentary

  has_many :hacktions, :dependent => :destroy
  has_many :serials, through: :hacktions
  belongs_to :user

  default_scope order: 'hacks.created_at DESC'

  extend FriendlyId
  friendly_id :hack_name, use: :slugged
end 
```

在视图中，我想遍历 hacks，然后识别与之关联的用户：

```
<% @hacks.each do |h| %>
  <span><%= @users.find(h.user_id).username %>
  <div class = "home-date"><%=  h.created_at.strftime("%B %m, %Y - %I:%M %p")  %><%=   image_tag("housing.png") %></div>
  <div class = "home-title"><%= link_to h.hack_name, hack_path(h) %></div>
  <div class = "commentary lead"><%= markdown(h.commentary) %></div>
<% end %> 
```

我收到以下错误：

```
 undefined method `username' for #<Enumerator:0x007fd5078ac7b0> 
```

任何想法我在这里做错了什么。仅供参考：用户名是用户模型中的可访问字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:30:10.160

尝试调用`first`您的结果`find`：

```
@user.find(h.serial_id).first.username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:23:50.167

尝试改变：

```
<span><%= @user.find(h.serial_id).username %> 
```

至

```
<span><%= @user.find_by_serial_id(h.serial_id).username %> 
```

# linux - 如何将多行输出连接到一行？

> ID：15580144
> 
> 赞同：217
> 
> 时间：2013-03-22T21:27:51.810
> 
> 标签：linux, bash, unix, grep, tr

如果我运行 command `cat file | grep pattern`，我会得到很多行输出。您如何将所有行连接成一行，有效地将每一行替换`"\n"`为（以空格`"\" "`结尾）？`"`

`cat file | grep pattern | xargs sed s/\n/ /g` 不适合我。

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2013-03-22T21:31:18.233

用于`tr '\n' ' '`将所有换行符转换为空格：

```
$ grep pattern file | tr '\n' ' ' 
```

注意：`grep`读取文件，`cat`连接文件。不要`cat file | grep`！

**编辑：**

`tr`只能处理单字符翻译。您可以使用`awk`更改输出记录分隔符，如：

```
$ grep pattern file | awk '{print}' ORS='" ' 
```

这将改变：

```
one
two 
three 
```

至：

```
one" two" three" 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2014-08-11T20:35:10.970

管道输出`xargs`将连接每行输出到带有空格的单行：

```
grep pattern file | xargs 
```

或任何命令，例如。`ls | xargs`. 输出的默认限制`xargs`是 ~4096 个字符，但可以通过例如增加。`xargs -s 8192`.

[grep](/questions/tagged/grep "显示标记为“grep”的问题") [xargs](/questions/tagged/xargs "显示标记为“xargs”的问题")

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2015-11-05T09:11:12.343

在不带引号的 bash`echo`中删除回车、制表符和多个空格

```
echo $(cat file) 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-03-22T21:41:31.477

这可能是你想要的

```
cat file | grep pattern | paste -sd' ' 
```

至于您的编辑，我不确定这意味着什么，也许是这个？

```
cat file | grep pattern | paste -sd'~' | sed -e 's/~/" "/g' 
```

（这假设`~`不会发生在`file`）

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-08-02T12:26:20.123

这是一个用逗号分隔输出的示例。您可以用您需要的任何分隔符替换逗号。

```
cat <<EOD | xargs | sed 's/ /,/g'
> 1
> 2
> 3
> 4
> 5
> EOD 
```

产生：

```
1,2,3,4,5 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-02-06T18:55:32.877

### 我知道解决这个问题的最快和最简单的方法：

当我们想**用空格****替换换行符** 时：`\n`

 **```
xargs < file 
```

`xargs`每行字符数和所有字符组合的数量都有自己的限制，但我们可以增加它们。可以通过运行以下命令找到详细信息：`xargs --show-limits`当然也可以在手册中找到：`man xargs`

当我们想**用另一个字符替换一个字符时**：

```
tr '\n' ' ' < file 
```

当我们想**用多个字符替换一个字符时**：

```
tr '\n' '~' < file | sed s/~/many_characters/g 
```

首先，我们将换行符替换`\n`为波浪号`~`（或选择文本中不存在的另一个唯一字符），然后我们将波浪号替换为任何其他字符 ( `many_characters`)，并为每个波浪号 (flag `g`) 执行此操作。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-08-03T13:23:42.530

我喜欢这个`xargs`解决方案，但如果不折叠空格很重要，那么可以这样做：

```
sed ':b;N;$!bb;s/\n/ /g' 
```

这将替换空格的换行符，而不会像那样替换最后一行终止符`tr '\n' ' '`。

这也允许您使用除空格之外的其他连接字符串，如逗号等，这是`xargs`无法做到的：

```
$ seq 1 5 | sed ':b;N;$!bb;s/\n/,/g'
1,2,3,4,5 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-12-20T22:19:26.240

这是使用[`ex`编辑器](https://en.wikipedia.org/wiki/Ex_%28text_editor%29)（[Vim](https://www.vim.org/)的一部分）的方法：

*   **加入**所有行并**打印**到标准输出：

    ```
    $ ex +%j +%p -scq! file 
    ```

*   **就地**加入所有行（在文件中）：

    ```
    $ ex +%j -scwq file 
    ```

    ^(注意：这将连接文件本身内的所有行！)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-07-23T15:15:08.863

这是另一个使用的简单方法`awk`：

```
# cat > file.txt
a
b
c

# cat file.txt | awk '{ printf("%s ", $0) }'
a b c 
```

此外，如果您的文件有列，这提供了一种仅连接某些列的简单方法：

```
# cat > cols.txt
a b c
d e f

# cat cols.txt | awk '{ printf("%s ", $2) }'
b e 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-12T11:22:37.653

可能最好的方法是使用“awk”工具，它将生成输出到一行

```
$ awk ' /pattern/ {print}' ORS=' ' /path/to/file 
```

它将所有行合并为一个带空格分隔符的行

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-05-08T12:30:35.773

在 red hat linux 上，我只使用 echo ：

回声 $(cat /some/file/name)

这给了我一个文件的所有记录在一行上。**

# c - C 多管

> ID：15580153
> 
> 赞同：0
> 
> 时间：2013-03-22T21:28:47.017
> 
> 标签：c, pipe

我正在尝试在 C 中实现多个管道，例如

```
ls - al | less | wc 
```

我在创建管道时遇到了麻烦。我有一个循环应该创建进程并将它们与管道连接：

```
for(i=0;i<num_cmds;i++){ 
     create_commands(cmds[i]);
} 
```

我的`create_commands()`功能看起来像这样

```
void create_commands (char cmd[MAX_CMD_LENGTH]) // Command be processed
{
    int pipeid[2];
    pipe(pipeid);

    if (childpid = fork()) 
    {
        /* this is the parent process */
        dup2(pipeid[1], 1); // dup2() the write end of the pipe to standard output.
        close(pipeid[1]); // close() the write end of the pipe  

        //parse the command
        parse_command(cmd, argvector);

        // execute the command
        execvp(argvector[0], argvector);

        close(1); // close standard output
    }
    else
    {
        /* child process */
        dup2( pipeid[0], 0); // the read end of the pipe to standard input
        close( pipeid[0] ); // close() the read end of the pipe 
    }

} 
```

但这不起作用，我的标准输入和标准输出搞砸了。谁能指出我做错了什么？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:41:30.303

popen() 函数执行字符串命令指定的命令。它在调用程序和执行的命令之间创建一个管道，并返回一个指向可用于读取或写入管道的流的指针。

```
#include <stdio.h>
int main(int argc, char *argv[])
{

    FILE *fp;
    int status;
    int PATH_MAX = 1024;
    char path[PATH_MAX];
    fp = popen("ls -al | less | wc", "r");
    if (fp == NULL)
        /* Handle error */;

     while (fgets(path, PATH_MAX, fp) != NULL)
         printf("%s", path);

     status = pclose(fp);
     if (status == -1) {
    /* Error reported by pclose() */
     } else {
    /* Use macros described under wait() to inspect `status' in order
       to determine success/failure of command executed by popen() */
     }

} 
```

您可以使用在 popen() 中调用的预设字符串，也可以使用 argv[] 参数通过管道输入。

popen() 为您提供了一个管道，一个 FIFO 先进先出流，并且 popen 还将 STDOUT 反馈给您的程序。

这是 popen() 的手册页：http: [//linux.die.net/man/3/popen](http://linux.die.net/man/3/popen)

# c++ - EDIT 控制文本溢出

> ID：15580156
> 
> 赞同：2
> 
> 时间：2013-03-22T21:28:55.363
> 
> 标签：c++, winapi, scroll, overflow, edit

这很简单。我创建了一个这样的 EDIT 控件：

```
HWND MYTEXT= CreateWindowEx(WS_EX_CLIENTEDGE, L"EDIT", L"", 
                            WS_CHILD|WS_VISIBLE|ES_LEFT|ES_MULTILINE, 
                            20, 120, 150, 20, hWnd, NULL, hInst, NULL); 
```

但是当我在其中输入文本时，我输入的文本不能超过 EDIT 控件的宽度。当我到达终点时，就像没有更多空间了，我听到哔哔声。在这种情况下如何使文本滚动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:32:27.153

你可以给你的编辑控件`WS_HSCROLL`和/或`WS_VSCROLL` [窗口样式](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600.aspx)。例如：

```
HWND myText
    = CreateWindowEx(WS_EX_CLIENTEDGE, L"EDIT", L"", 
                     WS_CHILD | WS_VISIBLE | WS_HSCROLL | ES_LEFT | ES_MULTILINE, 
                     20, 120, 150, 20, hWnd, NULL, hInst, NULL); 
```

或者，正如 Matthew T. Staebler 正确建议的那样，使用[ES_AUTOHSCROLL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775464.aspx#ES_AUTOHSCROLL)和/或[ES_AUTOVSCROLL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775464.aspx#ES_AUTOVSCROLL)（注意`ES_`前缀，因为它们是编辑样式，而不是窗口样式）。

# javascript - 在表单验证中，如果字段中没有单词，它会返回错误但仍提交 cgi 文件？

> ID：15580159
> 
> 赞同：0
> 
> 时间：2013-03-22T21:29:02.000
> 
> 标签：javascript, html, css, perl

更具体地说，当我们提交应该包含信息的空表单时，应该提交一个警告说“请输入一个值”它会这样做，但是在警告上选择好之后它仍然会在提交时发送电子邮件。我希望如果出现错误，他们必须满足表单的要求，然后才能发送提交的电子邮件。代码是：

这将检查字段中是否有任何值

```
function notEmpty(elem, helperMsg) {
    if (elem.value.length >= 2) {
        return true;
        alert(helperMsg);
        elem.focus();
        return false;
    }
    return true;
} 
```

表格的开头：

`<form method="get" onsubmit="notEmpty();" action="http://www.censoredgaming.co.uk/cgi-bin/mailer.pl">`

提交按钮：

`<input type="submit" name='Submit' value="Send" onClick='notEmpty();'>`

欢迎对我们的问题有任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:41:57.783

这将失败有几个原因。

您将遇到的第一个是，因为您在调用时不传递任何参数`notEmpty`，所以变量`elem`将是`undefined`. 当您尝试访问其上的属性 ( `value`) 时，将引发异常并且函数将停止。

让我们从顶部开始。

首先，我们将使用更现代的方法来应用事件处理程序。

提供一种方法来识别您要处理的表单。id 属性是一个很好的通用选择（但使用比我更有意义的名称）：

```
<form id="myForm"
      method="get"
      action="http://www.censoredgaming.co.uk/cgi-bin/mailer.pl"> 
```

接下来，在 DOM 中获取对表单的引用并向其添加事件侦听器：

```
document.getElementById('myForm').addEventListener('submit', notEmpty); 
```

请注意，您必须在将表单添加到 DOM*后执行此操作。*实现这一点的最简单方法是将您`<script>`的放在后面`</form>`（就在前面`</body>`是一个受欢迎的地方）。您还可以使用在 DOM 准备好或文档已加载时触发的事件处理程序。

旧版本的 Internet Explorer 不支持`addEventListerner`，如果您想支持它们，请参阅[具有兼容性例程的 MDN 文档](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)。

接下来，更新`notEmpty`功能。由于它是一个事件处理程序，它会得到一个参数——一个事件对象。它还将在绑定到的元素（表单）的上下文中调用。

```
function notEmpty(event) {
    var aForm = this;
} 
```

您想检查某个元素是否具有一定长度的值，但您的问题中没有此类元素的迹象。让我们使用这个例子：

```
<label> Some data <input name="example"></label> 
```

您可以通过表单的元素集合引用该元素：

```
function notEmpty(event) {
    var aForm = this;
    var input = aForm.elements.example;
} 
```

现在您可以添加您的测试：

```
function notEmpty(event) {
    var aForm = this;
    var input = aForm.elements.example;
    if (input.length >= 2) {

    } else {

    }
} 
```

如果您不想提交表单，请阻止对事件的默认操作：

```
function notEmpty(event) {
    var aForm = this;
    var input = aForm.elements.example;
    if (input.length >= 2) {
        // At least two characters, all is well
    } else {
       alert("An error");
       input.focus();
       event.preventDefault();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:38:58.907

你的第一个`return true`应该被删除：P

# ruby - 如何从网页复制数据并将其粘贴到文件中以进一步与 ruby 、watir 和 cucumber 一起使用？

> ID：15580163
> 
> 赞同：0
> 
> 时间：2013-03-22T21:29:21.987
> 
> 标签：ruby, cucumber, watir-webdriver

第一个场景作为功能文件**registration.feature（feature1）**的一部分运行，内容如下：

> ```
> Scenario: User can register as a Free account
>  Given  I am on the home page
>  When   I navigate to the Register page
>  And    set all required fields for "Free" on the page
>  And    check that info about successful registration is shown
>  And    activate account
>  Then   I copy the Free user information in a data file 
> ```

然后我想在**upgrade_accounts.feature(feature2)下运行以下功能**

> ```
> Feature:    Upgrade accounts
> As an QA Engineer
> I would like to upgrade my accounts to other types
> So I can make sure upgrade functionality is working properly
> 
> Scenario: Existing free account is upgraded to premium
> Given  I navigate to the login page
> When   Sign in as free account retrieved from file
> And    I navigate to updgrade accounts 
> And    I select premium account and submit
> Then   Verify premium package is active 
> ```

我担心的是我如何使用适用于 step 的东西来实现这两个功能之间的连接：`Then I copy the Free user information in a data file`from feature1 和`When Sign in as free account retrieved from file`on feature2。

所以我想问题是：*最好使用哪种方法（gem）将数据从网页复制到文件中并读取并再次使用它？*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:22:11.317

通常，不鼓励在功能文件之间创建依赖关系。您希望能够以确定的结果独立运行功能，因此通过状态耦合功能可能会产生脆弱（易碎）的功能。`upgrade_accounts.feature`例如，不执行就不可能成功执行`registration.feature`。

如果您还没有拿起[The Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)，它是很好的指南和资源。它建议通过 before hooks in 设置应用程序状态`/support/hooks.rb`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:45:48.130

正如 Orde 所说，每个场景都是独一无二且独立的：

```
Scenario: User can register as a Free account
Given I am on the home page
When I register for a free account
Then I get a message that registration is successful
And my account is active

Scenario: Existing free account is upgraded to premium
Given I have a free account
When I updgrade my account to a premium account
Then my premium package is active 
```

两个功能，两个完全独立的测试。如果您有一个将免费帐户注入系统的步骤*鉴于我有一个免费帐户*，您最终不会因为注册免费帐户的步骤失败而导致升级失败。

此外，我冒昧地减少了创建和验证帐户的步骤。场景中不需要所有导航等。这是在步骤定义中完成的。

# javascript - Javascript 如何在 JSP 上使用带有两个提交按钮的确认对话框 onSubmit

> ID：15580167
> 
> 赞同：7
> 
> 时间：2013-03-22T21:29:52.963
> 
> 标签：javascript, jsp, confirm, onsubmit

我的表单目前有两个提交按钮。一个用于功能`Search`，另一个用于`Mark Complete`功能。仅当单击“标记完成”按钮以提交通过验证的表单时，我才需要显示确认对话框。可以识别这个吗？我目前有以下`confirmComplete`功能：

```
function confirmComplete() {
alert("confirmComplete");
var answer=confirm("Are you sure you want to continue");
if (answer==true)
  {
    return true;
  }
else
  {
    return false;
  }
} 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-22T21:39:32.050

将`onclick`“标记完成”按钮的属性设置为此

```
 onclick="return confirm('Are you sure you want to continue')" 
```

并从表单中删除 confirmComplete 功能

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T21:42:33.810

你可以。你可以把你的按钮像这样

```
<input type="submit" value="Search" />
<input type="submit" value="Mark Complete" onclick="{return confirmComplete();}" /> 
```

**单击“标记完成”**按钮时，将调用该函数`confirmComplete`，并且当用户在确认对话框中说“**确定**”时，将仅提交表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:35:39.777

您需要通过单击按钮而不是表单提交来执行事件。没有跨浏览器的方式可以知道提交表单的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T21:43:23.440

所以这是一个旁路解决方案：

```
<form id="frm" action="page.php" method="post" onsubmit="return onSubmit();">
    <input />
    <input type="submit" value="sub1" onclick="sub1();" />
    <input type="submit" value="sub2" onclick="sub1();" />
</form>
 <script type="text/javascript">
<!--
var frm = document.getElementById('frm');
function onSubmit(){
    return false;
}

function sub1(){
    alert('s1');
    frm.submit();
}

function sub2(){
    alert('s2');

}
 //-->
 </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T05:24:08.387

当您调用“confirm()” javascript 弹出函数时，例如 onclick="return confirm('Are you sure to continue?')" ，确认框会出现消息“您确定要继续吗？” 有两个选项“确定”和“取消”。当您单击确定时，它返回 true 并继续执行网页，或者如果您单击取消，它将返回 false 并停止进一步执行网页。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-22T19:59:42.150

我不知道输入标签，但是直接在按钮上单击事件对我不起作用。就我而言，表格是立即发布的。

这是具有许多按钮的表单的可能解决方案（其中只有一个必须显示确认消息）

在视图中：

```
<FORM name="F_DESTINATION_DB" id="F_DESTINATION_DB" method="POST" onsubmit="return popConfirmationBox('<?php echo LanguageControler::getGeneralTranslation("DELETE_CONFIRMATION_MESSAGE", "Deleting is an irreversible action. Are you sure that you want to proceed to the deleting?");?> ','DELETE_DB_BUTTON')"> 
```

Javascript（在外部文件中用于代码重用）：

```
/**
* Display a confirmation message box to validate if we must post the page or not.
*
* @param message String to display
* @param tagId String id of the tag that must display the message.
*
* @return Boolean (confirmation)
*/  
function popConfirmationBox(message, tagId){

    var confirmation = true;

    if (typeof tagId === 'string' && document.activeElement.id.toUpperCase() === tagId.toUpperCase()) {

        if (typeof message === 'string' && message.length > 0) {

            confirmation = window.confirm(message);
        }
    }

    return confirmation;
} 
```

我很难做到这一点（需要大量研究和测试），但生成的代码非常简单。

默认情况下，我假设确认是肯定的（如果单击的按钮不是用来显示消息的按钮，或者用户没有提供有效的消息字符串）。

**附加说明**：当然，如果用户浏览器阻止客户端代码，此代码将无法解决问题。

我希望它会帮助某人，

来自蒙特利尔的 Jonathan Parent-Lévesque

# c# - C# 继承问题 - 不包含采用 0 个参数的构造函数

> ID：15580168
> 
> 赞同：-3
> 
> 时间：2013-03-22T21:29:57.423
> 
> 标签：c#, inheritance, constructor

我已经阅读了其他一些相关的帖子，但我不相信我有和他们一样的问题。我相信我正在为我的继承类正确地做我的构造函数，但是它仍然无法工作 - 甚至不会认识到我在那里似乎有一个构造函数。

```
class BlockedNumber : PhoneNumber
{
    public BlockedNumber(string a, string m, string l)
        : base(a, m, l) { }
} 
```

这仍然给了我标题中的错误：

> *“DTS.PhoneNumber 不包含采用 0 个参数的构造函数。*

我不知道为什么它不能正确识别我的构造函数。错误（VS12 中的蓝色下划线）出现在第一次`BlockedNumber`使用`class`.

有谁知道为什么它不喜欢那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:33:47.663

以下编译

```
class BlockedNumber : PhoneNumber
{
    public BlockedNumber(string a, string m, string l)
        : base(a, m, l) { }
}

internal class PhoneNumber
{
    public PhoneNumber(string a, string m, string l) { }
} 
```

你的问题在别处。很可能您正在`PhoneNumber`用 0 个参数实例化一个其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T17:46:27.387

如果不直接指定`: base(x,y,z)`调用哪个父构造函数，编译器会尝试寻找一个没有参数的父构造函数默认调用。

it is explained in this post - [C# Error: Parent does not contain a constructor that takes 0 arguments](https://stackoverflow.com/questions/7230544/c-sharp-error-parent-does-not-contain-a-constructor-that-takes-0-arguments)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:41:39.993

您的子类很可能还有另一个您没有透露的无参数构造函数，但该构造函数不会以显式方式调用基类构造函数。因此，您认为它不相关。但是，C# 会向每个构造函数插入一个基类构造函数调用，因为这是 CIL 所必需的。因此，另一个构造函数抱怨它无法找到要调用的基类构造函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T21:39:33.360

从 VS2010 获取你所拥有的并生成一个类

```
internal class PhoneNumber
    {
        private string a;
        private string m;
        private string l;

        public PhoneNumber(string a, string m, string l)
        {
            // TODO: Complete member initialization
            this.a = a;
            this.m = m;
            this.l = l;
        }
    }

class BlockedNumber : PhoneNumber
{
    public BlockedNumber(string a, string m, string l)
        : base(a, m, l) { }
} 
```

`This code compiles just fine so just like Yuriy stated the issue must be somewhere else.`

# jquery - 在模态中调用引导手风琴上的“折叠”会阻止我再次打开它

> ID：15580170
> 
> 赞同：0
> 
> 时间：2013-03-22T21:30:03.577
> 
> 标签：jquery, twitter-bootstrap

我正在使用引导程序/jquery。我有一个带有表单的模态窗口，该表单包含一个手风琴组。每次打开模式时，我都想折叠手风琴组中的所有内容。我添加了以下在单击按钮打开模式时执行的代码：

```
$('.accordion-body').each(function(){
    if ($(this).hasClass('in')) {
        $(this).collapse('toggle');
    }
}); 
```

它可以折叠手风琴组中的所有内容，但是每个调用折叠切换的手风琴在单击时都不会展开。我得到类似的行为，用这个替换上面的代码：

```
$('.accordion-body').collapse(); 
```

在这种情况下，由于折叠会在所有手风琴体上调用，因此不会展开。

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:51:48.670

不完全理解你的问题，但我用一个我如何理解它的例子创建了一个小提琴。

[带模态的演示小提琴](http://jsfiddle.net/TkU8k/2/)

同时使用：

```
data-toggle="collapse" 
```

和

```
$('#myModal').on('shown', function () {
  $('.accordion-body').each(function(){
        $(this).collapse();
});
}) 
```

# qt - QPropertyAnimation 不起作用

> ID：15580171
> 
> 赞同：5
> 
> 时间：2013-03-22T21:30:08.713
> 
> 标签：qt

我正在尝试在 Qt 桌面应用程序中测试动画。我刚刚从帮助中复制了示例。单击按钮后，新按钮仅出现在左上角，没有动画（甚至结束位置错误）。我错过了什么吗？

Qt 5.0.1，Linux Mint 64 位，GTK

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QPropertyAnimation>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    QPushButton *button = new QPushButton("Animated Button", this);
    button->show();

    QPropertyAnimation animation(button, "geometry");
    animation.setDuration(10000);
    animation.setStartValue(QRect(0, 0, 100, 30));
    animation.setEndValue(QRect(250, 250, 100, 30));

    animation.start();
} 
```

编辑：已解决。动画对象必须作为全局参考。例如在私有 QPropertyAnimation *animation 部分。然后 QPropertyAnimation = New(....);

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T06:58:40.357

您不需要专门为删除`mAnimation`变量创建一个插槽。如果您使用，Qt 可以为您完成`QAbstractAnimation::DeleteWhenStopped`：

```
QPropertyAnimation *mAnimation = new QPropertyAnimation(button, "geometry");
mAnimation->setDuration(10000);
mAnimation->setStartValue(QRect(0, 0, 100, 30));
mAnimation->setEndValue(QRect(250, 250, 100, 30));

mAnimation->start(QAbstractAnimation::DeleteWhenStopped); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T21:50:08.110

您只是没有复制示例，还进行了一些破坏它的更改。您的`animation`变量现在是一个局部变量，在`on_pushButton_clicked`函数结束时被销毁。使 QPropertyAnimation 实例成为 MainWindow 类的成员变量，并像这样使用它：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow), mAnimation(0)
{
    ui->setupUi(this);
    QPropertyAnimation animation
}

MainWindow::~MainWindow()
{
    delete mAnimation;
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    QPushButton *button = new QPushButton("Animated Button", this);
    button->show();

    mAnimation = new QPropertyAnimation(button, "geometry");
    mAnimation->setDuration(10000);
    mAnimation->setStartValue(QRect(0, 0, 100, 30));
    mAnimation->setEndValue(QRect(250, 250, 100, 30));

    mAnimation->start();
} 
```

# c++ - 如何找到操作系统的名称？

> ID：15580179
> 
> 赞同：14
> 
> 时间：2013-03-22T21:30:36.940
> 
> 标签：c++, operating-system

问题很简单。我想要一个函数（C++）或方法，它会在调用时返回类似

```
"Windows" //or
"Unix" 
```

没什么特别的，我不需要版本号或任何东西。只是操作系统名称。一个快速的谷歌搜索没有发现任何有用的东西，所以我想我会在这里发布

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T21:33:10.567

由于您不能拥有一个可以在所有操作系统上运行的二进制文件，因此您需要再次重新编译您的代码。可以使用宏。

使用宏，例如

```
_WIN32
_WIN64
__unix
__unix__
__APPLE__
__MACH__
__linux__
__FreeBSD__ 
```

像这样

```
std::string getOsName()
{
    #ifdef _WIN32
    return "Windows 32-bit";
    #elif _WIN64
    return "Windows 64-bit";
    #elif __APPLE__ || __MACH__
    return "Mac OSX";
    #elif __linux__
    return "Linux";
    #elif __FreeBSD__
    return "FreeBSD";
    #elif __unix || __unix__
    return "Unix";
    #else
    return "Other";
    #endif
} 
```

*您应该阅读编译器的手册并查看他们提供的用于在编译时检测操作系统的 MACROS。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T22:33:57.900

从 Poco 源代码：

赢32：

```
std::string EnvironmentImpl::osNameImpl()
{
    OSVERSIONINFO vi;
    vi.dwOSVersionInfoSize = sizeof(vi);
    if (GetVersionEx(&vi) == 0) throw SystemException("Cannot get OS version information");
    switch (vi.dwPlatformId)
    {
    case VER_PLATFORM_WIN32s:
        return "Windows 3.x";
    case VER_PLATFORM_WIN32_WINDOWS:
        return vi.dwMinorVersion == 0 ? "Windows 95" : "Windows 98";
    case VER_PLATFORM_WIN32_NT:
        return "Windows NT";
    default:
        return "Unknown";
    }
} 
```

Unix：

```
std::string EnvironmentImpl::osNameImpl()
{
    struct utsname uts;
    uname(&uts);
    return uts.sysname;
} 
```

# visual-studio-2010 - VS 2010 express -- 标识符“fd_set”未定义

> ID：15580191
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:31:37.257
> 
> 标签：visual-studio-2010, sdl

我在 Visual Studio 2010 for Windows 中编程。

我不明白为什么它不识别类型`fd_set`。

我错过了标题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:34:56.583

根据 MS 文档，fd_set 结构在 Winsock2.h 中定义。见这里：http: [//msdn.microsoft.com/es-es/library/windows/desktop/ms737873%28v=vs.85%29.aspx](http://msdn.microsoft.com/es-es/library/windows/desktop/ms737873%28v=vs.85%29.aspx)

# java - Android 应用程序中的 PayPal 按钮错误

> ID：15580196
> 
> 赞同：0
> 
> 时间：2013-03-22T21:31:56.700
> 
> 标签：java, android, eclipse, paypal

我试图让 PayPal 按钮在我的 Android 应用程序的结帐活动中工作。但我得到一个空指针异常，它指的是我的代码中的第 1585 行。logcat 输出如下：

```
03-22 21:27:28.659: W/dalvikvm(419): threadid=1: thread exiting with uncaught exception (group=0x40014760)
03-22 21:27:28.669: E/AndroidRuntime(419): FATAL EXCEPTION: main
03-22 21:27:28.669: E/AndroidRuntime(419): java.lang.NullPointerException
03-22 21:27:28.669: E/AndroidRuntime(419):  at java.math.BigDecimal.<init>(BigDecimal.java:406)
03-22 21:27:28.669: E/AndroidRuntime(419):  at com.fokrul.justdeals.ActivityTab$PaypalTask$1.onClick(ActivityTab.java:1585)
03-22 21:27:28.669: E/AndroidRuntime(419):  at android.view.View.performClick(View.java:3110)
03-22 21:27:28.669: E/AndroidRuntime(419):  at com.paypal.android.MEP.CheckoutButton.onClick(Unknown Source)
03-22 21:27:28.669: E/AndroidRuntime(419):  at android.view.View.performClick(View.java:3110)
03-22 21:27:28.669: E/AndroidRuntime(419):  at android.view.View$PerformClick.run(View.java:11934)
03-22 21:27:28.669: E/AndroidRuntime(419):  at android.os.Handler.handleCallback(Handler.java:587)
03-22 21:27:28.669: E/AndroidRuntime(419):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 21:27:28.669: E/AndroidRuntime(419):  at android.os.Looper.loop(Looper.java:132)
03-22 21:27:28.669: E/AndroidRuntime(419):  at android.app.ActivityThread.main(ActivityThread.java:4123)
03-22 21:27:28.669: E/AndroidRuntime(419):  at java.lang.reflect.Method.invokeNative(Native Method)
03-22 21:27:28.669: E/AndroidRuntime(419):  at java.lang.reflect.Method.invoke(Method.java:491)
03-22 21:27:28.669: E/AndroidRuntime(419):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-22 21:27:28.669: E/AndroidRuntime(419):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-22 21:27:28.669: E/AndroidRuntime(419):  at dalvik.system.NativeStart.main(Native Method) 
```

我的 PayPal 活动的 Onclick 方法代码如下：

```
class PaypalTask extends AsyncTask<Void, Void, Void> {
        protected final char[] TOTAL_GBP = null;

        public Void doInBackground(Void... arg0) {
            ppObject = PayPal.initWithAppID(getBaseContext(), "APP-80W284485P519543T", PayPal.ENV_SANDBOX);

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            btnPaypal = ppObject.getCheckoutButton(getApplicationContext(), PayPal.BUTTON_278x43, CheckoutButton.TEXT_PAY);
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            params.addRule(RelativeLayout.CENTER_HORIZONTAL);
            params.addRule(RelativeLayout.CENTER_VERTICAL);
            btnPaypal.setLayoutParams(params);
            rlPay.addView(btnPaypal);
            if(utils.prefs.getBoolean("isLogged", false)) btnPaypal.setVisibility(View.VISIBLE); else btnPaypal.setVisibility(View.GONE);

            btnPaypal.setOnClickListener(new OnClickListener(){
                public void onClick(View view) {

                    // to check whether there are any books in the shopping cart
                    if(!cid.isEmpty()){
                        PayPalPayment payment = new PayPalPayment();
            <<LINE 1585-->>>>> payment.setSubtotal(new BigDecimal(TOTAL_GBP));
                        payment.setCurrencyType("USD");
                        payment.setRecipient(Utils.PAYPAL_ACCOUNT);
                        payment.setPaymentType(PayPal.PAYMENT_TYPE_GOODS);
                        Intent checkoutIntent = PayPal.getInstance().checkout(payment, getBaseContext());
                        startActivityForResult(checkoutIntent, 1);
                    }else{
                        utils.showToast("Your shopping cart is empty.");
                        // The PayPal button needs to be updated so that the user can click on it again.
                        btnPaypal.updateButton();
                    }
                }   
            });
        }
    } 
```

有什么想法可能会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:06:12.170

显而易见的答案是对评论的回顾：

`protected final char[] TOTAL_GBP = null;`

不要设置`null`为 BigDecimal(TOTAL_GBP) @payment.setSubtotal(new BigDecimal(TOTAL_GBP)) 的构造函数参数；

示例： `payment.setSubtotal(new BigDecimal("8.25"));` 取自这里[http://androiddevelopement.blogspot.com/2011/04/adding-paypal-payment-in-android.html](http://androiddevelopement.blogspot.com/2011/04/adding-paypal-payment-in-android.html)关于 paypal 和 android 集成。

最后但同样重要的是：

您可能还想重新考虑您的`AsyncTask`流程和`doInBackground()`方法，并且您`onPostExecute()`通常不会`onClick()`在`AsyncTask`. 他们宁愿必须在您的 Activity 中并在您的主线程中运行，然后在单击按钮时您可以调用`AsyncTask`.

有关 AsyncTasks 的更多信息：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) [AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

* * *

希望它能澄清一点。

干杯

# directx - DirectX 纹理共享：相同的数据，不同的格式？

> ID：15580199
> 
> 赞同：1
> 
> 时间：2013-03-22T21:32:22.067
> 
> 标签：directx, sharpdx

我正在使用 SharpDX 但这确实是一个通用的 DirectX 问题。我有一个 D3D10 Texture2D。如何创建指向相同像素数据但指定不同像素格式的 D3D11 Texture2D？

换一种方式：

```
// These two textures need to share the same pixel data
D3D10.Texture2D tex10; // Description.Format = B8G8R8A8_UNorm
D3D11.Texture2D tex11; // Description.Format = R32_UInt 
```

我知道如何获取 DXGI 资源接口，然后调用`OpenSharedResource()`以获取具有相同格式的纹理。如何创建*不同*格式的纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:31:06.573

这是不可能的。纹理本身必须具有相同的数据类型。

但是，您可以创建无类型纹理，并使用特定视图来访问数据，就好像它具有特定格式一样。请参阅[强类型与弱类型](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476900%28v=vs.85%29.aspx#Typeing)。

# windows - irp 处理和 windows 消息生成

> ID：15580202
> 
> 赞同：0
> 
> 时间：2013-03-22T21:32:30.297
> 
> 标签：windows, keyboard, driver, wdm

我是司机新手。所以请原谅我可能的不准确之处。

msdn 等一些关于驱动程序设计的书籍为我们提供了一些如何使用 wdm api 的指导。但是我可以找到一些文献或资源，在那里我可以获得将 isr 转换为最终 Windows 消息的可靠描述。

例如我们有键盘。并引发设备中断。I/O 管理器创建 irp 并开始沿着驱动程序堆栈向下传递。每个过滤器或功能驱动程序都可以修改他们刚刚收到的 irp。但是在这个过程的最后会发生什么。但是什么层或驱动程序得到某种解析的irp，将其转换为windows消息并放入操作系统的输入队列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T07:32:24.800

[原始输入线程（从驱动程序接收的数据）](http://www.securelist.com/en/analysis/204792178/Keyloggers_Implementing_keyloggers_in_Windows_Part_Two#10)： ![在此处输入图像描述](../Images/6835286ca463d401a01655f845b5cc3e.png)

Windows如何处理键盘输入的概述：

![在此处输入图像描述](../Images/717c0d680056cbb03711b261631d0f46.png)

[键盘输入模型](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646267(v=vs.85).aspx#_win32_Keyboard_Input_Model)：

![在此处输入图像描述](../Images/4279094d173aee2e5fda91bb753f9e68.png)

# linq - 回车或换行与 linq

> ID：15580203
> 
> 赞同：0
> 
> 时间：2013-03-22T21:32:32.907
> 
> 标签：linq, entity-framework

所以我有回车问题我有一个有文本区域的网页，对于一个报告，我需要计算有多少人在这个文本区域中写入保存在 sql 表调用销售和列注释中

所以我用 linq

```
var count_notes = Vmsb.Sell.Where(v => !(v.Note == null || v.Note.Trim() == string.Empty)).Count(); 
```

Vmsb 是我的 dbcontext

问题是当我的笔记只有回车或“\r\n”时，它会计算它，这不是我想要的

生成的sql是这样的

```
SELECT count(note) FROM [dbo].sell AS v WHERE (( NOT (v.[nota] IS NULL OR N'' = (LTRIM(RTRIM(v.[nota]))))) 
```

那么我该怎么做才能不计算“\r\n”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:16:11.800

我从来不知道`L/RTRIM`在 SQL 中不会删除换行符。我能想到的唯一方法是

```
v.Note.Trim().Replace("\r", "").Replace("\n", "") 
```

（对不起，布莱斯，写这篇文章时没有看到你的评论）

当然，阻止像这些“空”字符串这样的输入进入数据库要容易得多。我会考虑清理操作并向应用程序添加一个看门人。

# git - Git SVN 可以解决吗 svn mergeinfo --show-revs 合格

> ID：15580206
> 
> 赞同：5
> 
> 时间：2013-03-22T21:32:42.160
> 
> 标签：git, svn, git-svn

我正在使用 SVN，并且有一个稳定的生产分支和一个不稳定的主干。对于每个版本，我们都会从主干中挑选要合并到生产中的项目。

我已经用 git svn 克隆了我的 SVN 存储库，这样我就可以利用更快的搜索来搜索我需要合并的提交（因为我在提交消息中搜索 JIRA id）。但是，我仍然在它的末尾使用 svn merge 进行合并。

这个长期存在的生产分支的问题之一是主干中可能存在未合并的提交。

为了解决这个问题，我偶尔会运行：

`svn mergeinfo --show-revs eligible https://my.server/svn/trunk https://my.server/svn/branches/PROD_V3.00`

但是，这真的很慢。git中的等价物是

`git log prod..master`

但是，这似乎只是列出了所有提交。

这是因为 git 无法识别 svn 合并和 svn:mergeinfo 属性吗？

有什么方法可以让我使用 git 快速获得符合条件的提交？

**编辑：**

我尝试了乔斯的回答，但是，`git cherry`只输出 SHA，我需要 SVN 修订版来进行合并。因此，我不得不通过管道`git svn find-rev`找到 SVN id 来获得我需要的东西。

`git cherry prod master|cut -d' ' -f2|while read -r line; do git svn find-rev "$line"; done;`

不幸的是，这比`svn mergeinfo --show-revs eligible`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:06:44.933

如果提交已被精心挑选，那么您现在拥有这些提交的两个副本。Git 会向您显示所有提交，`master`即使它们在`prod`.

等价的可能是：

```
git cherry master prod 
```

这将向您显示任何`master`似乎没有被挑选到的提交`prod`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T16:07:01.293

如果你完全能够在 Perl 中工作，那么 git-svn 只是一个大的 perl 脚本，而 git svn find-rev 是该 perl 脚本中的一个函数。您可以使用它进行编码，这样可以避免每次都读取 rev_map 文件。

所以，我在想的是：

```
git cherry prod master|cut -d' ' -f2|while read -r line; do git svn find-rev "$line"; done 
```

变得更像这样（不完整且尚未运行 b/c 我不再有 git-svn 存储库）：

```
#!/usr/bin/perl

use Carp;
use Git::SVN;
# use ...the rest of the Git::SVN module...

# ...initialize whatever is necessary...

open(ELIGIBLE_COMMITS, "git cherry prod master") || croak "Couldn't do git cherry";
while (<ELIGIBLE_COMMITS>) {
    ($ignore, $sha1) = split;
    my (undef, $rev, undef) = cmt_metadata($sha1);
    print "$rev\n";
}
close(ELIGIBLE_COMMITS); 
```

您也可以考虑只修改`git-svn`脚本`cmd_find_rev`以采用指定要查找的多个修订的附加选项，例如，

```
find-rev --file <filename> 
```

其中文件名可以是“-”来指定 STDIN。

# jquery - 如何强制 jQuery 识别动态创建的 AngularJS 元素？

> ID：15580210
> 
> 赞同：1
> 
> 时间：2013-03-22T21:33:09.023
> 
> 标签：jquery, angularjs

我正在使用 AngularJS 来动态创建一个页面。我有一些 Tab (jquery) 单击处理程序，它们在页面的先前静态版本上运行良好。

问题是，$(.prevButton) 和 $(.nextButton) 元素是由 AngularJS 创建的，显然 Jquery 没有注册它们。创建页面后，我可以将以下代码粘贴到控制台中，并且一切正常。

如何强制 jquery “重新扫描” DOM 以便它注册所有这些动态创建的元素？还是有另一种技术可以避免这个问题？

```
$(document).ready(function () {
    $('.prevButton').click(function () {
    var r = $(this).attr('tabGroup');
    var e = ($('.nav-tabs[tabGroup=' + r + '] li.active').prev().find('a[data-toggle="tab"]'));
    if (e.length > 0) {
        e.click();
    }
    return false; //prevent the page from jumping around
});

$('.nextButton').click(function () {
    var r = $(this).attr('tabGroup');
    var f = ($('.nav-tabs[tabGroup=' + r + '] li.active').next().find('a[data-toggle="tab"]'));
    if (f.length > 0) {
        f.click();
    }
    return false; //prevent the page from jumping around
});
} 
```

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:46:15.527

摆脱 jQuery 的使用。使用[ngClick](http://docs.angularjs.org/api/ng.directive%3angClick)指令指定在元素单击时调用哪些函数并将函数添加到当前范围（这是角度[控制器](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)的优点）以处理这些单击。

从评论中可以看出，Angular 最令人惊奇的特性之一是您不依赖 DOM 来维护状态，而是将其全部存储在范围内。如果您想更改某些内容，请修改范围并让渲染/事件委托/等通过框架自行处理。

这是一个非常粗略的例子，我没有在浏览器中测试过，但它是相当典型的 Angular。

的HTML：

```
<div ng-controller="ExamplePagingController">
    <div class="previous" ng-click="previousPage()" ng-class="{ disabled: currentPage == 0 }"></div>
    <ul ng-repeat="(idx, page) in pagedItems" ng-show="idx == currentPage">
        <li ng-repeat="item in page">{{ item.someDisplayProperty }}</li>
    </ul>
    <div class="next" ng-click="nextPage()" ng-class="{ disabled: pagedItems.length == 0 || currentPage == pagedItems.length - 1 }"></div>
</div> 
```

棱角分明的东西：

```
var exampleModule = angular.module('myAppName', []);

exampleModule .controller('ExamplePagingController', ['$scope', function ($scope) {
    $scope.items = someExternalVariableOrAngularServiceCall();
    $scope.currentPage = 0;
    $scope.pageSize = 5;
    $scope.pagedItems = [];

    $scope.groupToPages = function () {
        $scope.pagedItems = [];
        for (var i = 0; i < $scope.items.length; i += 1) {
            var pageIndex = Math.floor(i / $scope.pageSize);
            if (i % $scope.pageSize === 0) {
                $scope.pagedItems[pageIndex] = [$scope.items[i]];
            } else {
                $scope.pagedItems[pageIndex].push($scope.items[i]);
            }
        }
    };

    $scope.previousPage = function () {
        if ($scope.currentPage > 0) {
            $scope.currentPage -= 1;
        }
    };

    $scope.nextPage = function () {
        if ($scope.currentPage < $scope.pagedItems.length - 1) {
            $scope.currentPage += 1;
        }
    };

    $scope.groupToPages();
}]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:36:09.890

您需要为 DOM 查询提供更多上下文，因为它们是动态创建的。您还应该`.on`在更高版本的 jQuery 中使用该语法。[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).on('click', '.nextButton', function () {
    //your code
}); 
```

# ruby-on-rails - Rails 3，FactoryGirl：参数数量错误（1 代表 0）（ArgumentError）

> ID：15580212
> 
> 赞同：2
> 
> 时间：2013-03-22T21:33:17.140
> 
> 标签：ruby-on-rails, factory-bot

我正在研究 ruby​​ on rails 教程，但在使用 FactoryGirl 进行测试时遇到了问题。这是我的错误信息：

```
/Users/user/Documents/code/RoR/test/sample_app/spec/factories.rb:13:in `block (2 levels) in <top (required)>': wrong number of arguments (1 for 0) (ArgumentError)
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/syntax/default.rb:18:in `instance_eval'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/syntax/default.rb:18:in `factory'
from /Users/user/Documents/code/RoR/test/sample_app/spec/factories.rb:12:in `block in <top (required)>'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/syntax/default.rb:49:in `instance_eval'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/syntax/default.rb:49:in `run'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/syntax/default.rb:7:in `define'
from /Users/user/Documents/code/RoR/test/sample_app/spec/factories.rb:11:in `<top (required)>'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `block in load'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/find_definitions.rb:16:in `block in find_definitions'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/find_definitions.rb:15:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl-4.2.0/lib/factory_girl/find_definitions.rb:15:in `find_definitions'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/factory_girl_rails-4.2.1/lib/factory_girl_rails/railtie.rb:33:in `block in <class:Railtie>'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:34:in `call'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:42:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/finisher.rb:59:in `block in <module:Finisher>'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `block in run_initializers'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/user/Documents/code/RoR/test/sample_app/config/environment.rb:5:in `<top (required)>'
from /Users/user/Documents/code/RoR/test/sample_app/spec/spec_helper.rb:51:in `require'
from /Users/user/Documents/code/RoR/test/sample_app/spec/spec_helper.rb:51:in `<top (required)>'
from /Users/user/Documents/code/RoR/test/sample_app/spec/controllers/pages_controller_spec.rb:1:in `require'
from /Users/user/Documents/code/RoR/test/sample_app/spec/controllers/pages_controller_spec.rb:1:in `<top (required)>'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `load'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `block in load_spec_files'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `load_spec_files'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/rspec-core-2.13.0/lib/rspec/core/command_line.rb:22:in `run'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/rspec-core-2.13.0/lib/rspec/core/runner.rb:80:in `run'
from /Users/user/.rvm/gems/ruby-1.9.3-p385/gems/rspec-core-2.13.0/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

这是我的工厂.rb：

```
FactoryGirl.define do
  factory :user do
    user.name "abc"
    user.email "abc@example.com"
    user.password "foobar"
    user.password_confirmation "foobar"
  end
end 
```

这是我在 user_controller_spec.rb 中使用的代码：

```
before(:each) do
  @user = FactoryGirl.create(:user)
end 
```

我已经尝试过之前提出的问题中的方法，但它们不起作用。有人可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:44:23.863

您的工厂文件应该是：

```
FactoryGirl.define do
  factory :user do
    name "abc"
    email "abc@example.com"
    password "foobar"
    password_confirmation "foobar"
  end
end 
```

那会奏效的。

您在初始版本中使用了局部变量“用户”。问题是没有局部变量 user 传递给或在块中定义。正如上面一位评论者指出的那样——如果你想调用 user.name 那么你必须通过 |user| 到块。IE

```
FactoryGirl.define do
  factory :user do |user|
  etc. 
```

但这在 FactoryGirl 中不是必需的。您可以按照我在上面输入的方式进行操作。

我建议阅读[https://github.com/thoughtbot/factory_girl/wiki/Usage](https://github.com/thoughtbot/factory_girl/wiki/Usage) - 即使您只是通过教程学习 Rails（就像我一样），它也很容易上手 :-)

# sql-server - SqlBulkCopy 之后的实体框架性能

> ID：15580219
> 
> 赞同：0
> 
> 时间：2013-03-22T21:33:47.940
> 
> 标签：sql-server, performance, entity-framework, sqlbulkcopy

我需要一些表现来做我的一些事情。我正在尝试将 excel 数据导入我的 SQL Server 数据库，这是我完成这项工作的代码，但这确实需要太多时间。你能给我一些建议吗

```
 [WebMethod]
    public static string VerileriAktar(string alanlar, string gruplar, string shit)
    {
        ArtiDBEntities entity = new ArtiDBEntities();
        string[] eslesmeler = alanlar.Split(',');
        string[] grplar = gruplar.Split(',');

        DataSet ds = (DataSet)HttpContext.Current.Session["ExcelVerileri"];
        DataTable dt = ds.Tables["" + shit + ""];
        MembershipUser gelen = (MembershipUser)HttpContext.Current.Session["kimo"];
        Guid aa = (Guid)gelen.ProviderUserKey;

        List<tbl_AltMusteriler> bulkliste = new List<tbl_AltMusteriler>();
        List<tbl_AltMusteriler> ilkkontrol = entity.tbl_AltMusteriler.Where(o => o.UserId == aa).ToList();
        List<tbl_AltMusteriler> grupicin = new List<tbl_AltMusteriler>();
        List<tbl_OzelAlanlar> ensonatilacakalan = new List<tbl_OzelAlanlar>();
        List<tbl_OzelTarihler> ensonalicaktarih = new List<tbl_OzelTarihler>();

        // Datatable mın Kolon isimlerini değiştirdim.
        foreach (string item_col_name in eslesmeler)
        {
            string alan = item_col_name.Split('=')[0].Split('_')[1];
            string degisecek = item_col_name.Split('=')[1];
            if (degisecek == "")
                continue;
            dt.Columns[degisecek].ColumnName = alan;
        }

        #region verilerde

        foreach (DataRow dr in dt.Rows)
        {

            tbl_AltMusteriler yeni = new tbl_AltMusteriler();

            foreach (DataColumn dtclm in dt.Columns)
            {
                string gsm1 = "";
                if (dtclm.ColumnName == "gsm1")
                    gsm1 = dr["gsm1"].ToString();

                string gsm2 = "";
                if (dtclm.ColumnName == "gsm2")
                    gsm2 = dr["gsm2"].ToString();
                string ad = "";
                if (dtclm.ColumnName == "ad")
                    ad = dr["ad"].ToString();
                string soyad = "";
                if (dtclm.ColumnName == "soyad")
                    soyad = dr["soyad"].ToString();

                if (gsm1 != "")
                {
                    if (Tools.isNumber(gsm1) == false)
                        continue;
                    else
                    {
                        if (gsm1.Length > 10)
                            gsm1 = gsm1.Substring(1, 10);
                        yeni.Gsm1 = gsm1;

                    }
                }

                if (gsm2 != "")
                {
                    if (Tools.isNumber(gsm2) == false)
                        continue;
                    else
                    {
                        if (gsm2.Length > 10)
                            gsm2 = gsm2.Substring(1, 10);
                        yeni.Gsm2 = gsm2;
                    }
                }

                if (ad != "")
                    yeni.Ad = ad;
                if (soyad != "")
                    yeni.Soyad = soyad;
            }

            yeni.UserId = new Guid(aa.ToString());

            if (yeni.Gsm1 != "")
                grupicin.Add(yeni);               

        }
        #endregion

        bulkliste = grupicin.GroupBy(cust => cust.Gsm1).Select(grp => grp.First()).ToList();          

        List<tbl_AltMusteriler> yokartikin = bulkliste.Where(o => !ilkkontrol.Any(p => o.Gsm1 == p.Gsm1)).ToList();

        int saybakim = yokartikin.Count();

        DataTable bulkdt = new DataTable();
        if (yokartikin.Count > 0)
        {
            Type listType = yokartikin.ElementAt(0).GetType();             
            PropertyInfo[] properties = listType.GetProperties();
            foreach (PropertyInfo property in properties)
                if (property.Name == "UserId")
                    bulkdt.Columns.Add(new DataColumn() { ColumnName = property.Name, DataType = typeof(Guid) });
                else
                    bulkdt.Columns.Add(new DataColumn() { ColumnName = property.Name });
            foreach (object itembulk in yokartikin)
            {
                DataRow drbk = bulkdt.NewRow();
                foreach (DataColumn col in bulkdt.Columns)
                    drbk[col] = listType.GetProperty(col.ColumnName).GetValue(itembulk, null);
                bulkdt.Rows.Add(drbk);
            }
        }

        //var rowsOnlyInDt1 = bulkdt.AsEnumerable().Where(r => !bulkdt44.AsEnumerable()
        //        .Any(r2 => r["gsm1"].ToString() == r2["gsm1"].ToString()));

        //DataTable result = rowsOnlyInDt1.CopyToDataTable();//The third table

        if (bulkdt.Rows.Count > 0)
        {
            using (var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ArtiDBMemberShip"].ConnectionString))
            {
                SqlTransaction transaction = null;
                connection.Open();
                try
                {
                    transaction = connection.BeginTransaction();
                    using (var sqlBulkCopy = new SqlBulkCopy(connection, SqlBulkCopyOptions.TableLock, transaction))
                    {
                        sqlBulkCopy.BulkCopyTimeout = 240;
                        sqlBulkCopy.DestinationTableName = "tbl_AltMusteriler";
                        sqlBulkCopy.ColumnMappings.Add("UserId", "UserId");
                        sqlBulkCopy.ColumnMappings.Add("Ad", "Ad");
                        sqlBulkCopy.ColumnMappings.Add("Soyad", "Soyad");
                        sqlBulkCopy.ColumnMappings.Add("Adres", "Adres");
                        sqlBulkCopy.ColumnMappings.Add("Gsm1", "Gsm1");
                        sqlBulkCopy.ColumnMappings.Add("Gsm2", "Gsm2");
                        sqlBulkCopy.ColumnMappings.Add("Faks", "Faks");
                        sqlBulkCopy.ColumnMappings.Add("Telefonis", "Telefonis");
                        sqlBulkCopy.ColumnMappings.Add("Telefonev", "Telefonev");
                        sqlBulkCopy.ColumnMappings.Add("Eposta", "Eposta");
                        sqlBulkCopy.ColumnMappings.Add("DogumTarihi", "DogumTarihi");
                        sqlBulkCopy.ColumnMappings.Add("EvlilikTar", "EvlilikTar");
                        sqlBulkCopy.ColumnMappings.Add("TcNo", "TcNo");
                        //sqlBulkCopy.ColumnMappings.Add("Deleted", "Deleted");
                        sqlBulkCopy.WriteToServer(bulkdt);

                    }
                    transaction.Commit();
                }
                catch (Exception)
                {
                    transaction.Rollback();
                }

            }

            entity.SaveChanges();
        }

        if (grplar.Length > 0)
        {
            List<tbl_AltMusteriler> guncelliste = entity.tbl_AltMusteriler.Where(o => o.UserId == aa).ToList();
            List<tbl_KisiGrup> kisigruplari = new List<tbl_KisiGrup>();
            foreach (tbl_AltMusteriler itemblkliste in bulkliste)
            {
                long AltMusteriIDsi = guncelliste.Where(o => o.Gsm1 == itemblkliste.Gsm1).FirstOrDefault().AltMusteriID;

                // Seçili Gruplara kişileri ekleme
                #region Gruplara ekleme

                if (grplar.Length > 0)
                {
                    foreach (string item_gruplar in grplar)
                    {
                        if (item_gruplar == "chkall")
                            continue;
                        if (item_gruplar == "")
                            continue;
                        if (item_gruplar == null)
                            continue;

                        tbl_KisiGrup yeni_kisi_grup = new tbl_KisiGrup()
                        {
                            AltMusteriID = AltMusteriIDsi,
                            GrupID = int.Parse(item_gruplar)
                        };
                        kisigruplari.Add(yeni_kisi_grup);
                    }
                }
                #endregion
            }

            List<tbl_KisiGrup> guncel_grup = entity.tbl_KisiGrup.Where(o => o.tbl_AltMusteriler.UserId == aa).ToList();

            List<tbl_KisiGrup> kisi_grup_kaydet = kisigruplari.Where(o => !guncel_grup.Any(p => o.AltMusteriID == p.AltMusteriID && o.GrupID == p.GrupID)).ToList();

            // Grupları Datatable çevirme
            #region Grupları Datatable le çevirme
            DataTable bulkdt2 = new DataTable();

            if (kisi_grup_kaydet.Count > 0)
            {
                Type listType = kisi_grup_kaydet.ElementAt(0).GetType();
                //Get element properties and add datatable columns  
                PropertyInfo[] properties = listType.GetProperties();
                foreach (PropertyInfo property in properties)
                    bulkdt2.Columns.Add(new DataColumn() { ColumnName = property.Name });
                foreach (object itembulk in kisi_grup_kaydet)
                {
                    DataRow drbk = bulkdt2.NewRow();
                    foreach (DataColumn col in bulkdt2.Columns)
                        drbk[col] = listType.GetProperty(col.ColumnName).GetValue(itembulk, null);
                    bulkdt2.Rows.Add(drbk);
                }
            }
            #endregion

            //Burada bulk insert işlemini gerçekleştiriyoruz...
            #region Grup Verileri BulkCopy ile birkerede yazdık

            using (var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ArtiDBMemberShip"].ConnectionString))
            {
                SqlTransaction transaction = null;
                connection.Open();
                try
                {
                    transaction = connection.BeginTransaction();
                    using (var sqlBulkCopy = new SqlBulkCopy(connection, SqlBulkCopyOptions.TableLock, transaction))
                    {
                        sqlBulkCopy.BulkCopyTimeout = 240;
                        sqlBulkCopy.DestinationTableName = "tbl_KisiGrup";
                        sqlBulkCopy.ColumnMappings.Add("AltMusteriID", "AltMusteriID");
                        sqlBulkCopy.ColumnMappings.Add("GrupID", "GrupID");
                        sqlBulkCopy.WriteToServer(bulkdt2);
                    }
                    transaction.Commit();
                }
                catch (Exception)
                {
                    transaction.Rollback();
                }

            }

            entity.SaveChanges();
            #endregion

        }

        return "ok";

    } 
```

**编辑**

实际上，如果有 70.000 或更多行数据，该代码块需要时间

```
List<tbl_AltMusteriler> yokartikin = bulkliste.Where(o => !ilkkontrol.Any(p => o.Gsm1 == p.Gsm1)).ToList(); 
```

我认为我的主要问题是我只是在插入数据时使用`sqlbulkcopy`. 之后我无法获得身份 ID，因此我将数据获取到一个通用列表并尝试找到新的 ID 并创建一个新的组列表。又一次`sqlbulkcopy`。这些需要花费大量时间大约 10 分钟才能导入 65.000 行是否有另一种方法来做这些事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:55:00.677

你的问题非常广泛。我会推荐[EF 的阅读性能注意事项](http://msdn.microsoft.com/en-us/library/cc853327.aspx)。还要记住，EF 并不是真正用于批量操作，因为它将所有数据从数据库带到客户端。如果您不需要/不想在客户端处理它们，那么如果您想为很多实体执行此操作，这会增加很多开销。（注意我还没有真正研究过你的代码——太多了）

# javascript - 如何构建可折叠/可扩展的表格行，例如 news.google.com

> ID：15580221
> 
> 赞同：0
> 
> 时间：2013-03-22T21:33:53.653
> 
> 标签：javascript, html, twitter-bootstrap, mustache

我正在建立一个网页来显示一些文章和相关文章。我想构建类似于您在 news.google.com 上看到的内容

我强烈觉得有比我正在做的更好的方法来做到这一点，所以来这里寻求建议。

目前我的html代码是这样的：

```
<table>
 <tr>
  <td><a href="article.htm">{{ArticleHeading}}</a> <br/> {{ArticleSynopsis}}</td>
  <td>{{ArticleSource}}</td>
  <td>{{ArticleDate}}</td>
 </tr>
</table> 
```

当鼠标悬停时，我也有行的颜色变化。

```
.table-hover  {
    background-color:#FFE292;
    border:1px solid #DD9946;
    color:#000000;
} 
```

我想要什么但不知道该怎么做：

**1.**当用户点击任意位置的一行时（不仅仅是标题），表格应该展开以显示另一个包含相关文章的子表格。

**2.**如果可能的话，一旦表格展开，悬停效果就会停止。

我已经从[http://twitter.github.com/bootstrap/javascript.html看到了手风琴的例子](http://twitter.github.com/bootstrap/javascript.html)

这不符合我的要求。

如果有不清楚的地方或这个问题的范围非常广泛，请告诉我。我很想解决您的这些担忧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:55:24.543

我发现了一些可以帮助我实现 news.google.com 的东西 [http://jqueryui.com/addClass/](http://jqueryui.com/addClass/)

这个页面也为像我这样的 jQuery 初学者提供了非常好的学习资源。

[http://docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page)

# merge - TortoiseSVN：将具有相似结构的不同存储库合并到当前 WC（具有本地修改）

> ID：15580226
> 
> 赞同：1
> 
> 时间：2013-03-22T21:34:24.517
> 
> 标签：merge, tortoisesvn

这是我的情况：我有一个从很久以前移动到不同站点的存储库中的结帐。我的这个工作副本来自所述存储库的旧版本，并且也有本地修改。作者移动存储库的方法涉及删除旧存储库的内容，留下一个名为“MOVED”的文本文件，并附有说明。

新的存储库仍然具有相同（或相似）的结构。我想做的是“合并”（如果我使用了错误的术语，我深表歉意）新存储库中的内容与我的工作副本中的内容。我对这样做有点犹豫，因为我了解到 TSVN 有时会覆盖本地更改而不会提示我。

如何在本地 WC 中合并新存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:51:57.070

我建议您将`Check Out`“新”存储库放入另一个文件夹并使用复制和粘贴覆盖文件。`Diff`由于项目结构进行了重大修改，覆盖此本地副本后，使用命令逐个文件检查。

完成后，提交修改并更新您的其他本地副本。此本地副本的本地更改不会丢失。最多可能发生的是一些冲突。

# d3.js - D3 解析错误

> ID：15580227
> 
> 赞同：0
> 
> 时间：2013-03-22T21:34:33.260
> 
> 标签：d3.js

这可能是一个非常简单的问题（但我是 D3 的新手，并试图通过一些示例来更好地理解它是如何工作的）。我正在尝试修改 D3 的基本示例之一（[http://bl.ocks.org/mbostock/1667367](http://bl.ocks.org/mbostock/1667367)）。我基本上保持一切不变......我只是想用我自己的数据（与标准普尔 500 股票数据）使用不同的 csv 文件。在示例文件中，csv 文件具有日期（年月）和股票价格。在我的数据中，我有一个 UTC 时间戳和一个光值（介于 0-1000 之间）。这是csv的一个小例子：

```
date, light
2013-01-01T09:00:00.000Z,554.22
2013-01-01T09:01:00.000Z,480.83
2013-01-01T09:02:00.000Z,433.19
2013-01-01T09:03:00.000Z,596.89
2013-01-01T09:04:00.000Z,421.78
2013-01-01T09:05:00.000Z,461.23
2013-01-01T09:06:00.000Z,560.04 
```

当，我运行我的代码时，我在控制台窗口中收到一个错误，说我有一个解析错误（不确定它是否在解析数据或光值时遇到了问题）......有没有人看到我的问题设置 csv 文件（或者我可能如何错误地解析它）？这是我正在使用的 D3 代码。

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

svg {
  font: 10px sans-serif;
}

path {
  fill: steelblue;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.brush .extent {
  stroke: #fff;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 10, right: 10, bottom: 100, left: 40},
    margin2 = {top: 430, right: 10, bottom: 20, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom,
    height2 = 500 - margin2.top - margin2.bottom;

var parseDate = d3.time.format("%Y-%m-%dT%H:%M:%S.%LZ").parse;

var x = d3.time.scale().range([0, width]),
    x2 = d3.time.scale().range([0, width]),
    y = d3.scale.linear().range([height, 0]),
    y2 = d3.scale.linear().range([height2, 0]);

var xAxis = d3.svg.axis().scale(x).orient("bottom"),
    xAxis2 = d3.svg.axis().scale(x2).orient("bottom"),
    yAxis = d3.svg.axis().scale(y).orient("left");

var brush = d3.svg.brush()
    .x(x2)
    .on("brush", brush);

var area = d3.svg.area()
    .interpolate("monotone")
    .x(function(d) { return x(d.date); })
    .y0(height)
    .y1(function(d) { return y(d.light); });

var area2 = d3.svg.area()
    .interpolate("monotone")
    .x(function(d) { return x2(d.date); })
    .y0(height2)
    .y1(function(d) { return y2(d.light); });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom);

svg.append("defs").append("clipPath")
    .attr("id", "clip")
    .append("rect")
    .attr("width", width)
    .attr("height", height);

var focus = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var context = svg.append("g")
    .attr("transform", "translate(" + margin2.left + "," + margin2.top + ")");

d3.csv("Light.csv", function(error, data) {
  console.log(data);

  data.forEach(function(d) {
    d.date = parseDate(d.date);
    //d.light = +d.light;
    //console.log(d);
  });

  x.domain(d3.extent(data.map(function(d) { return d.date; })));
  y.domain([0, d3.max(data.map(function(d) { return d.light; }))]);
  x2.domain(x.domain());
  y2.domain(y.domain());

  focus.append("path")
      .datum(data)
      .attr("clip-path", "url(#clip)")
      .attr("d", area);

  focus.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  focus.append("g")
      .attr("class", "y axis")
      .call(yAxis);

  context.append("path")
      .datum(data)
      .attr("d", area2);

  context.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height2 + ")")
      .call(xAxis2);

  context.append("g")
      .attr("class", "x brush")
      .call(brush)
    .selectAll("rect")
      .attr("y", -6)
      .attr("height", height2 + 7);
});

function brush() {
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  focus.select("path").attr("d", area);
  focus.select(".x.axis").call(xAxis);
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:03:36.923

在 csv 文件的标题中，“light”标题前面有一个额外的空间。这会导致 d3.csv 出现处理问题。

```
data.forEach(function(d) {
  d.date = parseDate(d.date);
  d.light = +d.light;  // won't be able to access the light column data with the space
  d.light = d[' light']; // this would work if you can't fix the header at the csv source
}); 
```

嗯，也许我会向 d3 提交一个补丁来解决这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:58:17.757

由于您的时间格式规范，您可能会收到该错误 - 没有`%L`占位符（请参阅[文档](https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-format)）。这应该有效。

```
var parseDate = d3.time.format("%Y-%m-%dT%H:%M:%S.000Z").parse; 
```

# android - Android 数据库创建

> ID：15580231
> 
> 赞同：0
> 
> 时间：2013-03-22T21:34:51.427
> 
> 标签：android, database

在我的应用程序中，当用户第一次进入时，他可以添加两个日期，应用程序进行天数计算。然后，此结果写入数据库并打印在我的主 Activity（称为 arxiki.class）的 textView 中。我希望应用程序记住这个结果并在用户每次进入主要活动时打印它。

正如我所做的那样，每次用户更改活动或关闭应用程序时，下次应用程序再次要求他输入日期并在我的数据库中创建新数据时。我怎样才能始终获得第一个结果？谢谢

我保存日期结果的代码是：

```
DbXronia entry_add = new DbXronia(arxiki.this);
            entry_add.open();
            entry_add.createEntry_xronia(meres);
            entry_add.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:40:56.590

> 正如我所做的那样，每次用户更改活动或关闭应用程序时，下次应用程序再次要求他输入日期并在我的数据库中创建新数据时。我怎样才能始终获得第一个结果？谢谢

因此，您只想向用户询问日期一次（仅在应用程序启动时第一次）。这个“算法”不应该是棘手的。当用户输入日期和值被写入保存状态“日期已存储”的数据库时，您需要一些机制。

你可以用它来达到你的目标[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)。将值写入数据库后，您将“此操作”保存到 SharedPreferences 中，然后当用户下次启动应用程序时，只需创建将包装您的操作的条件。

**伪代码：**

```
// saving action
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
prefs.edit().putBoolean("isInserted", true);

// retrieve value
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
boolean isInserted = prefs.getBoolean("isInserted", false);

if (!isInserted) {
   // user can add dates
}
else {
  // do your stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:48:21.760

你在后端使用什么样的数据库——SQLite？

如果您使用 SQLite，您可以通过自动递增的***_id***列对从数据库中获取的数据进行排序。作为替代方案，您可以在插入新条目时存储到数据库中的某种时间戳。查询看起来像：

```
Cursor c = db.query (true, table, new String[]{dataColumn}, null, null, null, null, "_id DESC", "LIMIT 1")
if (c.moveToFirst()) {
   String result = c.getString(0);
}
c.close(); 
```

# php - 如何将 PHP 变量访问到表单字段中

> ID：15580232
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:34:53.513
> 
> 标签：php

这是php代码。我正在尝试将 php 变量回显到表单字段文本框属性中。

```
<?php
while($result=mysql_fetch_array($query))
{

        $title=$result["title"];
        $date=$result["date"];
        $body=$result["body"];
        $email=$result["email"];
        $id=$result["id"];
//can i use the $id variable into the form field like bellow 
//if not then how so    

echo"<form action="" method="post">";
//Here i m using  $id variable  
echo "<input type="test" name="test" value='<?php echo "$id"?>'/>";
echo "<input type="submit" name="submit" value="submit"/>";
echo "</form>";
}
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:37:22.180

已经在 php 中时不要使用额外的 php 标签：只需将其连接为常规 var

```
echo "<form action=\"\" method=\"post\">";
echo "<input type=\"test\" name=\"test\" value='" . $id . "'/>";//Here i m using $id       variable    
echo "<input type=\"submit\" name=\"submit\" value=\"submit\"/>";
echo "</form>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:40:07.033

除非我误解了您的问题，否则您应该删除代码中的标签。

将第 11 行更改为：

```
echo '<input type="test" name="test" value="' . htmlentities($id) . '"/>'; 
```

如果 id 来自用户输入，您需要使用 htmlentities() 对其进行清理，否则您会将您的网站打开到 xss（跨站点脚本）漏洞

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:38:18.417

您不需要将变量放在“”中

```
echo "<input type='test' name='test' value='{$id?}>'/>"; 
```

这应该工作

并注意在双引号中使用双引号而不转义它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:39:27.837

您如何使用 echo 功能，您必须在内部排除 echo 并转义双引号：

```
echo "<form action=\"\" method=\"post\">";
echo "<input type=\"test\" name=\"test\" value=\"{$id}\" />";//Here i m using $id  variable    
echo "<input type=\"submit\" name=\"submit\" value=\"submit\"/>";
echo "</form>"; 
```

另一种形式，更清楚的是关闭 php 标记并在 html 代码之后打开它：

```
?> 
<form action="" method="post">
    <input type="test" name="test" value="<?php echo $id ?>" />
    <input type="submit" name="submit" value="submit" />
</form>
<?php 
```

# python - pandas plot time series ['numpy.ndarray'对象没有属性'find']

> ID：15580234
> 
> 赞同：5
> 
> 时间：2013-03-22T21:34:59.103
> 
> 标签：python, matplotlib, pandas

我有以下代码试图绘制时间序列。请注意，我删除了第二列，因为它不相关。我删除了第一行和最后一行。

```
import pandas as pd

activity = pd.read_csv('activity.csv', index_col=2)
activity = activity.ix[1:-1] #drop first and last rows due to invalid data
series = activity['activity']
series.plot() 
```

我收到以下错误：

```
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-10-36df40c11065> in <module>()
----> 1 series.plot()

.../pandas/tools/plotting.pyc in plot_series(series, label, kind, use_index,
                                             rot, xticks, yticks, xlim, ylim,
                                             ax, style, grid, logy,
                                             secondary_y, **kwds)
   1326                      secondary_y=secondary_y, **kwds)
   1327 
-> 1328     plot_obj.generate()
   1329     plot_obj.draw()
   1330 

.../pandas/tools/plotting.pyc in generate(self)
    573         self._compute_plot_data()
    574         self._setup_subplots()
--> 575         self._make_plot()
    576         self._post_plot_logic()
    577         self._adorn_subplots()

.../pandas/tools/plotting.pyc in _make_plot(self)
    916                     args = (ax, x, y, style)
    917 
--> 918                 newline = plotf(*args, **kwds)[0]
    919                 lines.append(newline)
    920                 leg_label = label

.../matplotlib/axes.pyc in plot(self, *args, **kwargs)
   3991         lines = []
   3992 
-> 3993         for line in self._get_lines(*args, **kwargs):
   3994             self.add_line(line)
   3995             lines.append(line)

.../matplotlib>/axes.pyc in _grab_next_args(self, *args, **kwargs)
    328                 return
    329             if len(remaining) <= 3:
--> 330                 for seg in self._plot_args(remaining, kwargs):
    331                     yield seg
    332                 return

.../matplotlib/axes.pyc in _plot_args(self, tup, kwargs)
    287         ret = []
    288         if len(tup) > 1 and is_string_like(tup[-1]):
--> 289             linestyle, marker, color = _process_plot_format(tup[-1])
    290             tup = tup[:-1]
    291         elif len(tup) == 3:

.../matplotlib/axes.pyc in _process_plot_format(fmt)
     94     # handle the multi char special cases and strip them from the
     95     # string
---> 96     if fmt.find('--')>=0:
     97         linestyle = '--'
     98         fmt = fmt.replace('--', '')

AttributeError: 'numpy.ndarray' object has no attribute 'find' 
```

如果我尝试使用一个小数据集，例如：

```
target, weekday, timestamp
0, Sat, 08 Dec 2012 16:26:26:625000
0, Sat, 08 Dec 2012 16:26:27:625000
0, Sat, 08 Dec 2012 16:26:28:625000
0, Sat, 08 Dec 2012 16:26:29:625000
1, Sat, 08 Dec 2012 16:26:30:625000
2, Sat, 08 Dec 2012 16:26:31:625000
0, Sat, 08 Dec 2012 16:26:32:625000
0, Sat, 08 Dec 2012 16:26:33:625000
1, Sat, 08 Dec 2012 16:26:34:625000
2, Sat, 08 Dec 2012 16:26:35:625000 
```

它有效，但不适用于我的完整数据集。[https://dl.dropbox.com/u/60861504/activity.csv](https://dl.dropbox.com/u/60861504/activity.csv) 我也用我数据集中的前 10 个项目进行了尝试，得到了同样的错误，但如果我手动分配一个值`series[10] = 5`，情节就会出现。我难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T22:09:21.433

答案在错误消息中：

```
AttributeError: 'numpy.ndarray' object has no attribute 'find' 
```

您的系列的推断数据类型是字符串（尝试`type(series[0])`）

如果您首先转换数据类型：

```
series = series.astype(int)
series.plot() 
```

应该管用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T22:01:41.103

以我的经验，这是由于数据框中的非数字列而发生的。

pd.read_csv 尝试推断列的数据类型 - 我怀疑您损坏的列可能会混淆此过程，并且您最终会在数据框中使用非数字类型的列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T23:04:05.340

有两个问题：

1.  Pandas 无法解析日期时间字符串，因为最后一个冒号：2012 年 12 月 8 日 16:26:26 **:** 625000

2.  文件中的第二行不是整数，这会导致列的dtype变成str对象。

以下代码适用于您的数据：

```
import pandas as pd
import re
from StringIO import StringIO
with open('activity.csv') as f:
    str_data = re.sub(r":(\d+)$", r".\1", f.read(), flags=re.MULTILINE)
    data = StringIO(str_data)

activity = pd.read_csv(data, index_col=2, parse_dates=True, dayfirst=True, na_values=["HEND0"])
activity = activity.ix[1:-1]
series = activity['activity']
series.plot() 
```

# c++ - 解决依赖于参数的查找歧义的非侵入式方法

> ID：15580236
> 
> 赞同：3
> 
> 时间：2013-03-22T21:35:21.213
> 
> 标签：c++, argument-dependent-lookup, ambiguous-call

这是我的情况：

我正在尝试使用具有 type`Foo::a`并指定 a的库`Foo::swap`。我正在使用的另一个库有一个`std::vector<Foo::a>`实例化。我正在尝试使用 Visual Studio 11.0 在 Windows 上编译它，并注意到`std::vector::swap`映射到`_Swap_adl`它执行不合格的交换调用。

这就是让我陷入 ADL 和模棱两可的功能解决方案的问题。是否有一些魔法可以让我使用`Foo::swap`（甚至`std::swap`:)），而无需对我正在使用的库进行一些“重大”更改（缺少从 Foo 删除/重命名交换等的东西）？

编辑：添加一个最小的例子来捕捉正在发生的事情和错误。

```
#include <iostream>
#include <vector>

namespace Foo
{
    class MyType
    {
    public:     
        float dummy;
    };

    template <class T>
    void swap(T& a, T& b)
    {
        T c(a);
        a = b;
        b = c;
    }
}

using namespace Foo;

class MyClass
{
public:
    std::vector<MyType> myStructArr;
};

std::vector<MyType> getMyTypeArray()
{
    MyType myType;
    std::vector<MyType> myTypeArray;
    myTypeArray.push_back(myType);
    return myTypeArray;
}

namespace std
{
    template <>
    void swap<MyType*>(MyType*& a, MyType*& b)
    {
        MyType* c(a);
        a = b;
        b = c;
    }

    template <>
    void swap<MyType>(MyType& a, MyType& b)
    {
        MyType c(a);
        a = b;
        b = c;
    }
}

int main(int argc, char* argv[])
{
    MyClass m;

    MyType myTypeLocal;
    std::vector<MyType> myTypeArrayLocal;
    myTypeArrayLocal.push_back(myTypeLocal);

    //m.myStructArr = myTypeArrayLocal;
    m.myStructArr = getMyTypeArray();

    return 0;
} 
```

我不会评论代码的效率，因为它只是我必须使用的东西，但@http: **[//pastebin.com/Ztea46aC](http://pastebin.com/Ztea46aC)**上的错误日志可以很好地了解内部发生的情况。这是编译器特定的问题，还是可以从这段代码中获得更深入的学习？

编辑2：我已经尝试专门针对有问题的特定类型，但这并不能解决歧义。关于为什么会这样的任何指示也会有所帮助。

```
namespace std
{
    template <>
    void swap<MyType*>(MyType*& a, MyType*& b)
    {
        MyType* c(a);
        a = b;
        b = c;
    }

    template <>
    void swap<MyType>(MyType& a, MyType& b)
    {
        MyType c(a);
        a = b;
        b = c;
    }
} 
```

**[http://pastebin.com/sMGDZQBZ](http://pastebin.com/sMGDZQBZ)**是这次尝试的错误日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T06:26:56.973

皮特的回答解释了这种情况。在重载解决步骤期间，两个交换模板同样受到青睐，因此调用是模棱两可的 - 在两个命名空间都可见的*任何上下文中。*专业化是解决此问题的正确方法，但是根据您的错误，您忘记删除有问题的模板`Foo::swap`- 请参阅[此处](https://stackoverflow.com/questions/11562/how-to-overload-stdswap)了解您的代码应该是什么样子。

这就是一切的样子——我只是用`std`命名空间替换了命名`bar`空间。

```
#include <iostream>

namespace bar { //std namespace

template<typename T>
void swap(T s, T t){ std::cout << "bar swap\n"; }

template<typename S>
struct vec {
    S s;
    void error() { swap(s, s); }
};}

namespace foo { //your namespace

struct type {};

/*this template is not allowed/not a good idea because of exactly your problem
template<typename T>
void swap(T s, T t){ std::cout << "foo swap\n"; }
*/

//you will have to rename foo::swap to something like this, and make it call
//specialise std::swap for any types used in std containers, so that they called yuor
//renamed foo::swap
template<typename T>
void swap_proxy(T s, T t){ std::cout << "foo swap (via proxy) \n"; }

}

namespace bar {
template<> void swap(foo::type s, foo::type t) { std::cout << "foo swap\n"; }
}

int main()
{
    //instead specialise std::swap with your type

    bar::vec<foo::type> myVec;
    myVec.error();

    std::cout << "Test\n";
    operator<<(std::cout, "Test\n");
} 
```

所有这一切，我将尝试制作一个模板化的替代方案 - 但是它会调用`std::swap`标准代码（这将是`foo::swap`一个更糟糕的替代方案，因此不会有歧义。

* * *

这样可以避免更改交换的名称，但仍会稍微更改其定义-尽管您不必篡改交换内部的代码，只有调用的代码必须按照说明进行转换

```
#include <iostream>

namespace bar { //std namespace

template<typename T>
void swap(T s, T t){ std::cout << "bar swap\n"; }

template<typename S>
struct vec {
    S s;
    void error() { swap(s, s); }
};}

namespace foo { //your namespace

// Include this pattern (The infamous Curiously Recurring Template Pattern) in foo namespace

template<template<class> class Derived, typename t>
struct Base : public t { Base(){} Base(Derived<t> d){} };

template<typename t> struct Derived : public Base<Derived, t> {};

template<class t> using UnWrapped = Base<Derived, t>;
template<class t> using Wrapped = Derived<t>;

//we redefine swap to accept only unwrapped t's - meanwhile
//we use wrapped t's in std::containers
template<typename T>
void swap(UnWrapped<T> s, UnWrapped<T> t){ std::cout << "foo swap\n"; }

struct type {
};

}

int main()
{
    //use the wrapped type
    typedef foo::Wrapped<foo::type> WrappedType;
    typedef foo::UnWrapped<foo::type> UnWrappedType;

    bar::vec<WrappedType> myVec;
    //this is the function which makes the ambiguous call
    myVec.error();
    //but instead calls bar::swap

    //but -- it calls foo swap outside of bar! - any you didn't
    //have to change the name of swap, only alter definition slightly
    swap(WrappedType(), WrappedType());
    //safe outside of bar
    swap(UnWrappedType(), UnWrappedType());
    //the following no longer works :/
    //swap<foo::type>(foo::type(), foo::type());
    //instead, yuo will have to cast to UnWrapped<type>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:40:13.307

正如错误消息所说，函数调用不明确。有两个版本`swap`可以应用：一个在 namespace`Foo`中，一个在 namespace 中`std`。第一个是通过参数相关查找找到的。找到第二个是因为`vector`在 中定义`std`，所以看到`std::swap`（按设计）。

这不是一个声明隐藏另一个声明的情况。它只是一组可能的重载，因此适用于选择重载函数的常用排序规则。这两个版本`swap`采用相同的参数类型，因此没有一个优于另一个的偏好。

# cxf - 在类级别使用 @Path("/") 的 JAX-RS Web 服务在 TomEE+ 1.5.1 上失败

> ID：15580237
> 
> 赞同：2
> 
> 时间：2013-03-22T21:35:26.810
> 
> 标签：cxf, jax-rs, java-ee-6, apache-tomee

这个简单的根资源类在 TomEE+ 1.5.1 上运行时失败，返回 404 错误“请求的资源不可用。” 它在 WEB-INF 中被打包为一个带有空 web.xml 文件的 WAR。

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.UriInfo;

@Path("/")
@Produces({ "text/plain", "text/html", "text/xml", "application/xml", "application/json" })
public class BrokenResource {
    private static final Log logger = LogFactory.getLog(BrokenResource.class);

    public BrokenResource()
    {
        logger.info("constructed");
    }

    @GET
    @Path("getloggedinguids")
    public Response foo(@Context UriInfo uInfo)
    {
        return Response.ok("\n\n\nrequest URI = " + uInfo.getRequestUri()).build();
    }
} 
```

它部署，我在控制台输出中看到这些行：

```
Mar 22, 2013 4:56:16 PM org.apache.openejb.server.rest.RESTService deployPojo
INFO: REST Service: http://localhost:8080/test//*  -> Pojo BrokenResource 
```

我也试过用 web.xml 来打包它，声明：

```
<servlet>
    <servlet-name>test</servlet-name>
    <display-name>Test OpenEJBRest Servlet</display-name>

    <servlet-class>
        org.apache.openejb.server.rest.OpenEJBRestServlet
    </servlet-class>

    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>test</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

与空 web.xml 文件的结果相同。

我还尝试将类级别 @Path 注释更改为 @Path("*") 然后我得到不同的响应，在控制台输出中我看到以下行：

```
WARNING: No root resource matching request path /test/getloggedinguids has been found, Relative Path: /getloggedinguids. 
```

最后...如果我将@Path 注释更改为@Path("/foo") 之类的东西，那么它的工作原理与预期完全一样...点击/test/foo/getloggedinguids 返回请求URI。

我一直在尝试 servlet 映射与类级别注释的各种变体，并且有一点是一致的……类级别的 @Path("/") 注释总是失败。

我什至从“RESTful Java with JAX-RS book”中获取了一个在类级别使用@Path("/") 的示例......这也失败了。

这是 JAX-RS 标准的 CXF 实现中的错误吗？我的项目要求我使用库存的 TomEE+ 容器，因此我无法切换到另一个 JAX-RS 实现:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T13:08:46.267

`JAX-RS`如果您使用or`TomEE+`版本，请记住，TomEE 对 JAX-RS 具有本机支持，而不是在 web.xml 中添加条目。

添加这样的类并删除您的 web.xml 条目：

```
import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;

@ApplicationPath("/")
public class NoteTakerApplication extends Application {
    @Override
    public Set<Class<?>> getClasses() {
        return new HashSet<Class<?>>(Arrays.asList(BrokenResource.class, RestExceptionMapper.class, OtherClassesYouMayHave.class));
    }
} 
```

# javascript - 为什么 jQuery .prop 似乎不起作用？

> ID：15580238
> 
> 赞同：0
> 
> 时间：2013-03-22T21:35:33.213
> 
> 标签：javascript, jquery, html, checkbox

[Sql 小提琴示例](http://jsfiddle.net/fPnm3/1/)

```
$('#myBox').click(function(e){
   e.preventDefault();
   e.stopPropagation();
   $('#myBox').prop("checked", !$('#myBox').prop("checked") );
}); 
```

我将它附加到一个复选框，以便检查切换由我的 javascript 控制，而不是由默认行为控制，它*只是不起作用。*我不知道为什么！

*我这样做的原因*：IE 有一个双击过滤器，可以这么说，所以双击复选框只注册为单击。这恰好阻止了人们快速切换复选框，这是我的应用程序需要的一个功能，很奇怪。所以我只是取消了它的默认功能并使用 JavaScript/jQuery 手动捕获点击并以这种方式切换它，从而消除了“速度限制”。除了我不知道如何首先阻止点击切换它，因此这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:37:28.477

```
setTimeout(function() {
    $('#myBox').prop("checked", !$('#myBox').prop("checked") );
}, 1); 
```

1毫秒的延迟计时器就足够了。

[在您的 jsFiddle](http://jsfiddle.net/fPnm3/4/)中查看此内容，已修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:45:09.740

我猜你想在你的复选框改变时运行一些东西......

在这种情况下，您应该捕获更改事件：

```
$('#myBox').bind('change', function() {
    // Do checks here, if you don't want it to change, then deal with it then
}); 
```

# entity-framework - 实体框架迁移 - 即使没有迁移，种子也会运行？

> ID：15580239
> 
> 赞同：6
> 
> 时间：2013-03-22T21:35:39.593
> 
> 标签：entity-framework, database-migration

我已经设置了一个简单的迁移`AutomaticMigrationsEnabled = false`。在 Visual Studio 或使用`MigrateDatabaseToLatestVersion`.

但是，这对我来说并不理想。我想从我的 ci 服务器上的部署脚本运行迁移。我发现[这篇文章](http://msdn.microsoft.com/en-us/data/jj618307.aspx)解释了如何使用 migrate.exe 执行此操作**，但这**似乎**总是**运行种子。即使没有要应用的迁移也是如此。

我是否需要在 Seed 方法中以编程方式检查是否已运行任何迁移？我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-20T20:16:11.603

仅当存在未决迁移时，才使用[DbMigrator手动运行 Update()。](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigrator%28v=vs.103%29.aspx)它是在 Entity Framework 5.0 中引入的。

```
private void MigrateAndSeedDbIfSchemaIsOutdated()
{
    // Disable initializer.
    Database.SetInitializer<MyContext>(null);

    // Make sure database exists.
    using (var db = new MyContext())
    {
        db.Database.Initialize(false);
    }

    var migrator = new DbMigrator(new MyConfiguration());

    if (migrator.GetPendingMigrations().Any())
    {
        // Run migrations and seed.
        migrator.Update();
    }
} 
```

# c# - DateTime 的人类可读日期

> ID：15580244
> 
> 赞同：-2
> 
> 时间：2013-03-22T21:36:13.667
> 
> 标签：c#, datetime, type-conversion

我需要将“人类可读”的日期格式转换为 DateTime，例如：

从：2013 年 1 月 20 日到：MM/dd/yyyy

有谁知道格式是什么，或者是否有一个可以使用 DateTime.Parse 执行此操作并提供格式？我只想在进入日期解析器之前检查一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:39:01.763

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

`MMMM dd, yyyy`是您要查找的格式字符串。

使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)或[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/ms131044.aspx)使用特定格式字符串解析日期时间。

解析后，您将能够以您想要的格式打印值：

```
string input = "20, 2013";
DateTime value;

if (DateTime.TryParseExact(input, "dd, yyyy", CultureInfo.CurrentCulture, DateTimeStyles.None, out value))
{
    string output = value.ToString("dd/MM/yyyy");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:44:27.700

我不太确定您的目标，但是您是否尝试`DateTime`根据`MM/dd/yyyy`您选择的格式来格式化您的格式？

如果您是，您只需执行以下操作：

```
DateTime.Now.ToString(MM/dd/yyy);
DateTime.Now.ToString(MMMM, MM dd, yyyy);
DateTime.Now.ToString(MMMM, MM dd, yyyy hh:mm:ss); 
```

基本上你必须使用这些：

*   大写 MM ：代表月份，因此 MMMM（也创建长日期）。
*   小写 d ：将代表日期。
*   小写 y：将代表年份。
*   然后 hh:mm:ss 实际上会添加一个小时、分钟、秒。

您还可以利用`Parse`它来确保它被正确捕获。

本质上，您可以根据需要轻松管理或更改*格式*。MSDN 也有一些很棒的文章。

希望这会有所帮助。看起来在我发布一些答案时生成了一些答案。所以你会得到一些可靠的反馈。

# java - 覆盖 Java 中的公共 final 方法（反射？！）

> ID：15580247
> 
> 赞同：5
> 
> 时间：2013-03-22T21:36:28.513
> 
> 标签：java, android, reflection, overriding, final

当我尝试为 Android 项目创建自定义[LayoutAnimationController时，我遇到了一个问题。](http://developer.android.com/reference/android/view/animation/LayoutAnimationController.html)它有方法

```
public final Animation getAnimationForView(View v) 
```

对于我的自定义 LayoutAnimationController，我需要重写此方法，因为每个视图都应该获得一个“独特”的动画。是否可以通过使用反射或类似技术来覆盖公共最终方法，或者您有其他想法？

我知道在[通过反射或其他方式覆盖 java final 方法中已经讨论过类似的事情？](https://stackoverflow.com/questions/748362/override-java-final-methods-via-reflection-or-other-means)但是那里出现的“解决方案”非常针对用户的问题，并没有完全回答覆盖最终方法的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:49:34.313

看起来`LayoutAnimationController`不打算像这样使用。

如果您能够`getAnimationForView(View v)`使用您想要的大多数方法/构造函数覆盖的功能`LayoutAnimationController`将毫无意义，因为创建此类是为了在多个视图上使用单个动画（具有不同的延迟）。

也许最好查看源代码并根据这些信息创建自己的动画控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T07:57:46.930

一个老问题，但我仍然觉得我应该回答，因为似乎没有使用`LayoutAnimationController`.

我最终覆盖`AnimationSet`并将`LayoutAnimationController`功能移至该类。当然，连同我的自定义代码。

[最后，我不得不对此大发雷霆：这不是我第一次在 Google 框架中以您喜欢的方式代码遇到某种私有/最终/访问被拒绝的情况。如果他们给我们程序员带来困难，他们似乎觉得很有趣。我知道`Transformation`只有`Animation`s 是为了表演，但有时我们只是需要一些不同的东西，而通过这种幼稚的方式使我们失去能力是非常荒谬的。/咆哮]

# c - C - IF(char[] == "ZYX") 不起作用

> ID：15580250
> 
> 赞同：3
> 
> 时间：2013-03-22T21:37:01.273
> 
> 标签：c, arduino

我从 arduino 发送到 arduino 字符串（I2C），捕获并保存到 char[10]。当我将此变量与文本进行比较时，条件没有执行：-/而且我不知道为什么......

```
char dataRx[10] = "";

void DaemonReceiving(int howMany){
  int index = 0;

  while(Wire.available() > 0){
    char c = Wire.read();

    dataRx[index++] = c;
    dataRx[index] = '\0';
  }
  Serial.println(dataRx);

  if(dataRx == "HELLO"){
        Wire.beginTransmission(1);
        Wire.write("HI");
        Wire.endTransmission();
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T21:43:09.267

要将 dataRX 字符串与“HELLO”进行比较，请使用：

```
if (strcmp (dataRx,"HELLO") == 0) {

    // matches HELLO

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T21:37:56.303

如果它是 C 你必须使用`strcmp`，否则你只是比较两个指针 - “HELLO”的位置和 dataRx 的位置（这将失败）

请注意，这与 arduino 没有任何关系 :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T21:38:22.307

这比较指针值：

```
if(dataRx == "HELLO") 
```

你需要[strcmp](http://www.manpagez.com/man/3/strcmp/)字符串比较：

```
if(strcmp(dataRx, "HELLO") == 0) 
```

# c# - 为什么我不能在 Razor WebGrid 的委托中使用我的扩展方法

> ID：15580257
> 
> 赞同：5
> 
> 时间：2013-03-22T21:37:20.800
> 
> 标签：c#, asp.net-mvc, webgrid

我正在使用 MVC 3 引入的 WebGrid，但是在传递参数的委托时不能应用我自己的扩展方法`format`。

使用：

```
Grid.Column("MyProperty", "MyProperty", 
format: @<span class="something">@item.MyProperty.MyExtensionMethodForString()</span>) 
```

我有

```
ERROR: 'string' does not contain a definition for 'MyExtensionMethodForString' 
```

我试过铸造，没有用

```
Grid.Column("MyProperty", "MyProperty", 
format: @<span class="something">@((string)(item.MyProperty).MyExtensionMethodForString())</span>) 
```

如果我使用标准方法，它可以工作：

```
Grid.Column("MyProperty", "MyProperty", 
format: @<span class="something">@(Utils.MyExtensionMethodForString(item.MyProperty))</span>) 
```

我还尝试将扩展名放在同一个命名空间中，但没有结果。

**如何使用我心爱的扩展程序？**

**编辑**：命名空间本身不是问题，扩展可用于所有视图和类的命名空间，我可以在同一个视图中毫无问题地使用它。问题是在委托中使用它时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:38:15.207

这不是 WebGrid 或 Razor 的限制。这是 C#`dynamic`类型的限制。您不能在动态上使用扩展方法。格式助手将 a`Func<dynamic, object>`作为参数，因此`item`参数是动态类型。

几年前我[写过这个确切的问题。](http://www.mikesdotnetting.com/Article/171/Why-You-Can%27t-Use-Extension-Methods-With-A-WebGrid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:06:39.993

这对我来说很好。静态类：

```
public static class TestExtensions
{
    public static string Foo(this HtmlHelper html, Func<object, HelperResult> func)
    {
        return func(null).ToHtmlString();
    }

    public static string MyStringExtension(this string s)
    {
        return s.ToUpper();
    }
} 
```

索引.cshtml：

```
@using MvcApplication1.Controllers

@Html.Foo(@<text>@Html.Raw("Hello")</text>) 
```

页面打印出来：

> 你好

但是，这个版本的 Index.cshtml：

```
@using MvcApplication1.Controllers

@Html.Foo(@<text>@("Hello".MyStringExtension())</text>) 
```

打印出您的错误消息：

> CS1061：“字符串”不包含“MyStringExtension”的定义，并且找不到接受“字符串”类型的第一个参数的扩展方法“MyStringExtension”（您是否缺少 using 指令或程序集引用？）

所以我怀疑 Jon 是正确的，这是 Razor 的一个限制。（为什么它与 HtmlHelper 一起工作让我有点困惑）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T18:54:12.610

通过研究以下行抛出相同错误的原因找到了这个 SO 问题：

```
@a.GetAttribute<ActionLabelAttribute>().ActionLabel 
```

事实证明，通过将这一行括在括号中可以很容易地纠正它，如下所示：

```
@(a.GetAttribute<ActionLabelAttribute>().ActionLabel) 
```

注意：`GetAttribute`扩展方法来自[这里](https://codereview.stackexchange.com/a/5354/73862)。

# json - 在 ServiceStack 中查看 Http Response 内容

> ID：15580262
> 
> 赞同：5
> 
> 时间：2013-03-22T21:37:33.787
> 
> 标签：json, rest, servicestack

我正在使用 ServiceStack 为 JSON RESTful 服务创建 C# 客户端。我有这个代码返回我的 DTO：

搜索结果 = restClient.Get（搜索）；

这很好用，但为了有效地调试返回的搜索结果，我需要从底层 HTTP 响应对象输出文本内容。（我还不知道响应中的所有元素，以便将它们添加到 DTO）。

有什么方法可以从我的结果对象中获取底层 HTTP 响应，从而获取全文内容？

提前致谢。@adamfowleruk

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T21:53:02.093

从 ServiceStack 的内置**Service**继承时，您可以直接从 Response 类访问底层的 Request 和 Response ：

```
public class MyService : Service 
{
    public object Get(Request request)
    {
        base.Request ...
        base.Response ...
    }
} 
```

您不会在您的服务或过滤器中看到响应输出，因为它直接写入响应流，并且是[ServiceStack 在执行您的服务和所有响应过滤器之后所做的最后一件事](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)。

对于诊断 HTTP，我建议使用 Fiddler 或 WebInspector [，ServiceStack 的内置请求记录器](https://github.com/ServiceStack/ServiceStack/wiki/Request-logger)也可能会有所帮助。

### 使用 ServiceStack 服务

如果您使用的是[C# 服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/C#-client)，您可以简单地询问您想要什么，例如，您可以将返回的响应作为原始字符串访问：

```
string responseJson = client.Get<string>("/poco/World"); 
```

或作为原始字节：

```
byte[] responseBytes = client.Get<byte[]>("/poco/World"); 
```

或作为流：

```
using (Stream responseStream = client.Get<Stream>("/poco/World")) {
    var dto = responseStream.ReadFully().FromUtf8Bytes().FromJson<PocoResponse>();
} 
```

甚至访问填充的 HttpWebResponse 对象：

```
HttpWebResponse webResponse = client.Get<HttpWebResponse>("/poco/World");

webResponse.Headers["X-Response"] //World
using (webResponse)
using (var stream = webResponse.GetResponseStream())
using (var sr = new StreamReader(stream)) {
    string response = sr.ReadToEnd();
} 
```

您还可以使用全局和本地响应过滤器自省 HttpWebResponse，例如：

```
JsonServiceClient.HttpWebResponseFilter = httpRes => { .. }; 
```

或使用本地过滤器：

```
var client = new JsonServiceClient(baseUrl) { 
    ResponseFilter = httpRes => { .. }
}; 
```

### 使用第 3 方服务

如果您正在使用第 3 方 REST/HTTP API，您可以`responseFilter:`在[ServiceStack 的 HTTP Util 扩展](https://github.com/ServiceStack/ServiceStack/wiki/Http-Utils)中使用：

```
List<GithubRepo> repos = "https://api.github.com/users/{0}/repos".Fmt(user)
    .GetJsonFromUrl(responseFilter: httpRes => {
        var remaining = httpRes.Headers["X-Api-Remaining"];
    })
    .FromJson<List<GithubRepo>>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T21:40:27.303

我使用[Fiddler](http://www.fiddler2.com/fiddler2/)来调试我的服务。它为您提供了各种很酷的 HTTP 调试工具。

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T09:23:29.160

我喜欢使用 RestConsole。它是一个 Chrome 扩展，您可以轻松提交 POST 请求并查看响应。创建示例数据然后进入 ServiceStack 代码并查看发生了什么也很方便。ServiceStack PluralSight 课程有一个很好的演示，展示了如何一起使用它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-23T14:56:44.750

感谢上面的帮助，我找到了正确的答案。在这里为其他人记录：-

```
 SearchResponse result = null; // my ServiceStack DTO

  HttpWebResponse webResponse = restClient.Get<HttpWebResponse>(
    completePath("/v1/search",qp)); // builds the URL with parameters

  using (var stream = webResponse.GetResponseStream())
  using (var sr = new StreamReader(stream)) {
    var text = sr.ReadToEnd();
    log.log ("response text: " + text); // *** PRINTING STRING VALUE HERE FOR DEBUG 
    result = text.FromJson<SearchResponse>();
  }

  // Now do something useful with the result DTO object

  log.log ("RESULT: " + result.ToString ());
  for (int i = 0; i < result.Results.Length; i++) {
    log.log ("Result " + i + ": " + result.Results[i].ToString());
  } 
```

# vim - 在 VIM 中使用 jshint 与 Yeoman 的 jshint 任务同步

> ID：15580267
> 
> 赞同：3
> 
> 时间：2013-03-22T21:38:09.413
> 
> 标签：vim, jshint, yeoman

我使用 VIM 作为我的文本编辑器和 Yeoman 来帮助我的 webapp 开发工作流程。

我已经在使用[vim-jshint](http://sleistner.github.com/vim-jshint)来帮助我从 VIM 中对我的 javascript 文件进行 lint，并且我想将它与我的 Yeoman 设置同步使用。

我的问题是每次运行`grunt`时，`jshint`任务都会发现很多 vim-jshint 找不到的错误。

我知道 vim-jshint 在两个可能的路径中查找 .jshintrc 文件：HOME 路径和当前工作目录，但在当前的开发状态下，vim-jshint 似乎无法找到 Yeoman 使用的 .jshintrc，它位于 webapp 的基本目录中。

你们中有人找到解决方案或解决方法吗？

请不要切换到 Sublime Text。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T01:09:19.223

知道了！我使用了错误的 vim-jshint 插件。

我应该从一开始就使用 JSHint 网站中列出的那个，但不知何故我被误导了错误的插件。愚蠢的我。

最后，安装了[pathogen.vim](https://github.com/tpope/vim-pathogen)，我只需要复制并粘贴这个：

```
cd ~/.vim/bundle
git clone git://github.com/walm/jshint.vim 
```

正如其自己的 github README 文件中所述，*该插件是 jshint NodeJS cli 模块的前端，*它确保在 VIM 中运行将始终报告与 grunt任务`:JSHint`相同的错误。`jshint`至少如果您从 JSHint 的选项文件 ( `.jshintrc`) 所在的同一文件夹中运行 VIM。

# android - 为什么我的主屏幕小部件占用两行而不是一行？

> ID：15580268
> 
> 赞同：2
> 
> 时间：2013-03-22T21:38:11.263
> 
> 标签：android, android-widget

因此，我阅读了小部件尺寸并创建了一个 250dpX72dp 小部件，希望它每行占据 4 列。在我的 2.2 设备上它确实按预期显示，但在我的 4.2 设备上它突然占用了 4x2。

我认为每个单元格的大小计算为 (cells * 74) - 2。

小部件定义如下：

```
 <?xml version="1.0" encoding="utf-8"?>
 <appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget"
    android:minHeight="72dp"
    android:minWidth="250dp"
   /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:07:39.203

您需要从 API 11 开始应用不同的公式；根据[文档](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)，它的 (70 * n) - 30; 所以这意味着您应该将 minHeight 设置为 40。您可以在不同的资源文件夹（即`values`和`values-v11`）中为高度创建两个资源，这样您就可以根据旧公式指定高度，`values/<insert fancy name here>.xml`并根据新公式指定高度公式在`values-v11/<insert fancy name here>.xml`

请注意，您还应该考虑 API 15 以上的边距，以类似的方式完成：http: [//developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)

不过，在较新设备上的大小调整似乎仍然存在一个怪癖，其中 250dp 需要 3 列而不是 4 列。

另请参阅[Appwidget 大小计算](https://stackoverflow.com/questions/10008521/appwidget-size-calculation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:59:49.617

考虑到 Stackoverflow 上的多个问题，我并不是唯一一个感到困惑的人。

似乎谷歌确实改变了——相当显着地——小部件尺寸的计算。

[如何在 Android 主屏幕上制作 4x1 大小的小部件？](https://stackoverflow.com/questions/8101955/how-to-make-4x1-size-widget-on-android-homescreen/11289215#11289215)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:46:01.783

看着：

[http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size)

所以似乎 72dp 映射到 2 个单元格。

# algorithm - 如何有效地计算帕斯卡三角形中的一行？

> ID：15580291
> 
> 赞同：46
> 
> 时间：2013-03-22T21:39:57.737
> 
> 标签：algorithm, combinations, binomial-coefficients, pascals-triangle

我有兴趣找到帕斯卡三角形的第 n 行（不是特定元素，而是整行本身）。最有效的方法是什么？

我考虑了通过总结上面行中的相应元素来构造三角形的传统方法，这将采取：

```
1 + 2 + .. + n = O(n^2) 
```

另一种方法是使用特定元素的组合公式：

```
c(n, k) = n! / (k!(n-k)!) 
```

对于行中的每个元素，我猜前一种方法会花费更多时间，具体取决于计算组合的方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-03-22T21:48:22.487

```
>>> def pascal(n):
...   line = [1]
...   for k in range(n):
...     line.append(line[k] * (n-k) / (k+1))
...   return line
... 
>>> pascal(9)
[1, 9, 36, 84, 126, 126, 84, 36, 9, 1] 
```

这使用以下标识：

```
C(n,k+1) = C(n,k) * (n-k) / (k+1) 
```

因此，您可以从`C(n,0) = 1`使用此标识开始然后计算该行的其余部分，每次将前一个元素乘以`(n-k) / (k+1)`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-22T21:48:34.497

单行可以计算如下：

```
First compute 1\.               -> N choose 0
Then N/1                       -> N choose 1
Then N*(N-1)/1*2               -> N choose 2
Then N*(N-1)*(N-2)/1*2*3       -> N choose 3
..... 
```

请注意，您可以从前一个值计算下一个值，只需乘以一个数字，然后除以另一个数字。

这可以在一个循环中完成。示例蟒蛇。

```
def comb_row(n):
   r = 0
   num = n
   cur = 1
   yield cur
   while r <= n:
      r += 1  
      cur = (cur* num)/r
      yield cur
      num -= 1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-08T10:23:24.920

最有效的方法是：

```
std::vector<int> pascal_row(int n){
    std::vector<int> row(n+1);
    row[0] = 1; //First element is always 1
    for(int i=1; i<n/2+1; i++){ //Progress up, until reaching the middle value
        row[i] = row[i-1] * (n-i+1)/i;
    }
    for(int i=n/2+1; i<=n; i++){ //Copy the inverse of the first part
        row[i] = row[n-i];
    }
    return row;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-14T18:20:43.693

这是一个在 go-lang 中实现的快速示例，它从一行的外边缘计算，并通过一次计算向中间分配两个值...

```
package main

import "fmt"

func calcRow(n int) []int {
    // row always has n + 1 elements
    row := make( []int, n + 1, n + 1 )

    // set the edges
    row[0], row[n] = 1, 1

    // calculate values for the next n-1 columns
    for i := 0; i < int(n / 2) ; i++ {
        x := row[ i ] * (n - i) / (i + 1)

        row[ i + 1 ], row[ n - 1 - i ] = x, x
    }

    return row
}

func main() {
    for n := 0; n < 20; n++ {
        fmt.Printf("n = %d, row = %v\n", n, calcRow( n ))
    }
} 
```

20 次迭代的输出运行大约需要 1/4 毫秒...

```
n = 0, row = [1]
n = 1, row = [1 1]
n = 2, row = [1 2 1]
n = 3, row = [1 3 3 1]
n = 4, row = [1 4 6 4 1]
n = 5, row = [1 5 10 10 5 1]
n = 6, row = [1 6 15 20 15 6 1]
n = 7, row = [1 7 21 35 35 21 7 1]
n = 8, row = [1 8 28 56 70 56 28 8 1]
n = 9, row = [1 9 36 84 126 126 84 36 9 1]
n = 10, row = [1 10 45 120 210 252 210 120 45 10 1]
n = 11, row = [1 11 55 165 330 462 462 330 165 55 11 1]
n = 12, row = [1 12 66 220 495 792 924 792 495 220 66 12 1]
n = 13, row = [1 13 78 286 715 1287 1716 1716 1287 715 286 78 13 1]
n = 14, row = [1 14 91 364 1001 2002 3003 3432 3003 2002 1001 364 91 14 1]
n = 15, row = [1 15 105 455 1365 3003 5005 6435 6435 5005 3003 1365 455 105 15 1]
n = 16, row = [1 16 120 560 1820 4368 8008 11440 12870 11440 8008 4368 1820 560 120 16 1]
n = 17, row = [1 17 136 680 2380 6188 12376 19448 24310 24310 19448 12376 6188 2380 680 136 17 1]
n = 18, row = [1 18 153 816 3060 8568 18564 31824 43758 48620 43758 31824 18564 8568 3060 816 153 18 1]
n = 19, row = [1 19 171 969 3876 11628 27132 50388 75582 92378 92378 75582 50388 27132 11628 3876 969 171 19 1] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-30T07:30:26.577

计算它的一种简单方法是注意下一行的元素可以计算为前一行中两个连续元素的总和。

```
[1, 5, 10, 10, 5, 1]
[1, 6, 15, 20, 15, 6, 1] 
```

例如`6 = 5 + 1`,和。`15 = 5 + 10`_ 这给出了一个简单的算法来计算前一行的下一行。`1 = 1 + 0``20 = 10 + 10`

```
def pascal(n):
    row = [1]
    for x in xrange(n):
        row = [l + r for l, r in zip(row + [0], [0] + row)]
    # print row
    return row

print pascal(10) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-11T22:06:42.393

在 Scala 编程中：我会像这样简单地做到这一点：

```
def pascal(c: Int, r: Int): Int = c match {
    case 0 => 1
    case `c` if c >= r => 1
    case _ => pascal(c-1, r-1)+pascal(c, r-1)
} 
```

我会在这个里面调用它：

```
for (row <- 0 to 10) {
    for (col <- 0 to row)
        print(pascal(col, row) + " ")
    println()
} 
```

结果：

`. 1 1 1 1 2 1 1 3 3 1 1 4 6 4 1 1 5 10 10 5 1 1 6 15 20 15 6 1 1 7 21 35 35 21 7 1 1 8 28 56 70 56 28 8 1 1 9 36 84 126 126 84 36 9 1 1 10 45 120 210 252 210 120 45 10 1`

**一步一步解释：**

***第 1 步：***我们确保如果我们的列是第一个列，我们总是返回图 1。

***第 2 步：***由于每 X 行有 X 列。所以我们这么说；最后一列X大于等于第X行，则返回数字1。

***第 3 步：***否则，我们得到当前列之前的列和当前列之前的行的重复帕斯卡之和；以及该列的帕斯卡和当前行之前的行。

祝你好运。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-30T13:19:45.570

让我在 Shane为 R 解决方案所做的[出色工作的基础上再接再厉。](https://stackoverflow.com/questions/2632441/how-would-you-program-pascals-triangle-in-r)（谢谢你，Shane！。他生成三角形的代码：

```
pascalTriangle <- function(h) {
  lapply(0:h, function(i) choose(i, 0:i)) 
} 
```

这将允许将三角形存储为列表。然后我们可以索引任何需要的行。但索引时请加**1 ！**例如，我将抓住最后一行：

```
pt_with_24_rows <- pascalTriangle(24)
row_24 <- pt_with_24_rows[25] # add one
row_24[[1]] # prints the row 
```

[![输出](../Images/5a88e42dff3ac52388a9336be31a768f.png)](https://i.stack.imgur.com/qZuLh.jpg)

所以，最后，假装我有一个[高尔顿板](http://mathworld.wolfram.com/GaltonBoard.html)问题。我面临着找出聚集在中心的豆子百分比的任意挑战：比如，10 到 15 箱（25 箱中）。

```
sum(row_24[[1]][10:15])/sum(row_24[[1]]) 
```

结果是**0.7704771**。都好！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-19T17:31:13.933

计算帕斯卡三角形中一行的最有效方法是通过卷积。首先，我们选择第二行 (1,1) 作为内核，然后为了获得下一行，我们只需要将当前行与内核进行卷积。

所以内核与第二行的`[1 1]*[1 1] = [1 2 1]`卷积得到第三行，与第三行的卷积得到第四行`[1 2 1]*[1 1] = [1 3 3 1]`，依此类推

这是 julia-lang 中的一个函数（与 matlab 非常相似）：

```
function binomRow(n::Int64)
baseVector = [1] #the first row is equal to 1\. 
kernel = [1,1]   #This is the second row and a kernel. 
row = zeros(n)
for i = 1 : n
    row = baseVector 
    baseVector = conv(baseVector, kernel) #convoltion with kernel
end
return row::Array{Int64,1}
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-20T19:25:39.897

在 Ruby 中，以下代码将打印出您想要的帕斯卡三角形的特定行：

```
def row(n)
  pascal = [1]
  if n < 1
    p pascal
    return pascal
  else
    n.times do |num|
      nextNum = ((n - num)/(num.to_f + 1)) * pascal[num]
      pascal << nextNum.to_i
    end
  end
  p pascal
end 
```

调用`row(0)`返回`[1]`和`row(5)`返回的地方`[1, 5, 10, 10, 5, 1]`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-20T10:38:23.010

这是使用 VBA 动态设计帕斯卡三角形的另一种最佳且简单的方法。

```
`1
11
121
1331
14641`

`Sub pascal()
Dim book As Excel.Workbook
Dim sht As Worksheet
Set book = ThisWorkbook
Set sht = book.Worksheets("sheet1")
a = InputBox("Enter the Number", "Fill")
For i = 1 To a
    For k = 1 To i
        If i >= 2 And k >= 2 Then
            sht.Cells(i, k).Value = sht.Cells(i - 1, k - 1) + sht.Cell(i-  1, k)
        Else
            sht.Cells(i, k).Value = 1
        End If
    Next k
Next i
End Sub` 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-04T03:00:06.463

我用的是 Ti-84 Plus CE

第6行中->的使用是储值按钮

```
Forloop syntax is 
:For(variable, beginning, end [, increment])
:Commands
:End

nCr syntax is 
:valueA nCr valueB 
```

列表索引从 1 开始，所以我将它设置为 R+1

```
N= row
R= column

PROGRAM: PASCAL
:ClrHome
:ClrList L1
:Disp "ROW
:Input N
:For(R,0,N,1)
:N nCr R–&gt;L1(R+1)
:End
:Disp L1 
```

这是我在编程中能想到的最快方法（使用 ti 84），但如果您的意思是能够使用笔和纸计算行，那么只需画出三角形，因为做因式很痛苦！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-11T20:04:07.107

这是 Python 中的 O(n) 空间复杂度解决方案：

```
def generate_pascal_nth_row(n):
    result=[1]*n
    for i in range(n):
        previous_res = result.copy()
        for j in range(1,i):
            result[j] = previous_res[j-1] + previous_res[j]
    return result

print(generate_pascal_nth_row(6)) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-02T04:36:00.487

要找到第 n 行 -

```
int res[] = new int[n+1];
res[0] = 1;
for(int i = 1; i <= n; i++)
   for(int j = i; j > 0; j++)
      res[j] += res[j-1]; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-09T03:40:39.427

```
class Solution{
    public:

    int comb(int n,int r){
        long long c=1;
        for(int i=1;i<=r;i++) {   //calculates n!/(n-r)!
            c=((c*n))/i;  n--;
        }
        return c;
    }

    vector<int> getRow(int n) {  
        vector<int> v;
        for (int i = 0; i < n; ++i)
            v.push_back(comb(n,i));
        return v;
    }
}; 
```

超过 100% 提交 leet 代码[https://leetcode.com/submissions/detail/406399031/](https://leetcode.com/submissions/detail/406399031/)

# javascript - 用于 Javascript 的一次性文本计时器

> ID：15580292
> 
> 赞同：0
> 
> 时间：2013-03-22T21:40:01.717
> 
> 标签：javascript, html, timer

我对javascript中的计时器功能有疑问。有没有办法创建一个简单的函数，我会在我的游戏中调用它，例如只持续 3 秒。它只会被调用一次，但我不知道如何将它设置为恰好 x 秒长。我这个问题的另一部分是如何延迟某些功能。（例如：我想`Boss();`在我的文字完成后打电话（我想把它放在画布上更短的时间））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:26:22.430

您使用该`setTimeout()`功能使系统等待特定的持续时间，例如。`setTimeout(afterThreeSecondsDoThis, 3000)`. 所以你可以做的是设置一个变量`timer`来跟踪*超时*并提供一个你想在时间到时执行的函数。看看这个小提琴来演示：http: [//jsfiddle.net/amyamy86/V4cPR/](http://jsfiddle.net/amyamy86/V4cPR/)

```
var timer = null;
var WAIT_TIME = 3000; // 3 seconds

var afterThreeSecondsDoThis = function () {
    alert('3 seconds has passed!');

    clearTimeout(timer); // remove timer
};
var startTimer = function () {
    timer = setTimeout(afterThreeSecondsDoThis, WAIT_TIME);
};
var boss = function() {
      alert('Now enjoy the show!');  
};

startTimer();

var text = $('#text').animate({
    top: '-1200'
}, 40000, 'linear', function () {
    // text has finished animating
    boss();
}); 
```

您可以了解更多关于：

*   `.setTimeout()`：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)
*   `.clearTimeout()`：[https ://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:41:56.430

我不明白第一部分。“例如仅持续 3 秒”是什么意思？意思是？

对于延迟：

```
setTimeout(function() {
    //do stuff
}, milliseconds) 
```

# php - Drupal 设置文件不存在

> ID：15580295
> 
> 赞同：3
> 
> 时间：2013-03-22T21:40:07.307
> 
> 标签：php, mysql, drupal, content-management-system

我正在尝试在 linux box 上重新安装 drupal，但出现错误：

设置文件 设置文件不存在。Drupal 安装程序要求您在安装过程中创建一个设置文件。将 ./sites/default/default.settings.php 文件复制到 ./sites/default/settings.php。INSTALL.txt 中提供了有关安装 Drupal 的更多详细信息。

我已经为 settings.php 文件设置了权限，但它仍在执行此操作。站点，默认值和文件都具有 777 权限，但它仍然无法正常工作。我在默认文件夹中有 default.settings.php 和 settings.php。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:59:36.480

你必须记住一些事情：

*   您的 Web 服务器必须有权运行您的代码。如果您使用的是 Ubuntu，最好将 www-data.www-data （用户和组）权限授予站点/默认文件夹
*   给文件 777 是危险的，因为其他人可以读取这个合理的文件
*   请记住，包括 Drupal 根文件夹在内的所有文件夹都必须是可读的，这意味着它必须具有类似 755 的权限。

大多数情况下，此问题与运行 Web 服务器和文件的用户有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T13:33:01.783

改回`settings.php`permission.change **`settings.php permission to 755`**。( `read only, to make protected`)

一步步：

1.  `Copy file default.settings.php to settings.php (do not rename). Now you have both files.`

2.  `Change file permission settings.php to read/write with chmod 644 settings.php`

3.  `Continue the installation..`

4.  `After all installation finished, change file permission settings.php to read-only with chmod 755 settings.php`

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T12:22:44.603

我已经解决了这个问题：

```
chown -Rv apache:apache /var/www 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-10T12:44:58.940

转到包含 default.settings.php 和 settings.php 文件的目录，然后右键单击每个文件，然后单击“获取信息”，然后向下滚动，直到看到该文件的权限，确保它是“读取和写入”[输入图像描述在这里](https://i.stack.imgur.com/i7wV2.png)

# c# - UltraTree Columns 未对数值进行排序

> ID：15580299
> 
> 赞同：0
> 
> 时间：2013-03-22T21:40:20.517
> 
> 标签：c#, infragistics, ultratree

我正在尝试使用可排序的winTree（UltraNode）创建一个网格，我以编程方式创建它，通过代码添加列和节点。显示网格时，我可以按字母列排序，但未对 Id 和另一个数字字段进行排序。

我正在做的事情的简化是：

```
var tree = new UltraTree();

tree.override.ColumnSet.Columns.Add(new UltraTreeNodeColumn{text = "Name"});

tree.override.ColumnSet.Columns.Add(new UltraTreeNodeColumn{text = "Id"});

var treeNode1 = new UltraTreeNode();

treeNode1.Cells["Name"].Value = name1;

treeNode1.Cells["Id"].Value = Id1;

tree.Nodes.Add(treeNode1);

var treeNode2 = new UltraTreeNode();

treeNode2.Cells["Name"].Value = name2;

treeNode2.Cells["Id"].Value = Id2;

tree.Nodes.Add(treeNode2); 
```

查看网格时，我可以使用列标题对字母值进行排序，但是当我单击 Id 标题时，没有排序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:52:53.580

尝试将数据类型添加到该列

```
tree.Override.ColumnSet.Columns.Add(new UltraTreeNodeColumn
                                    {Text = "Id", DataType = typeof(Int32)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:56:14.267

原来网格正在对结果进行分组，所以 id 是有序的，但首先按它们所属的元素分组

# d3.js - 绘制网格线的正确方法

> ID：15580300
> 
> 赞同：43
> 
> 时间：2013-03-22T21:40:22.037
> 
> 标签：d3.js

好的，我开始对 D3 更加熟悉了，但在某些事情上仍然有些模糊。我现在正在尝试绘制网格线，但我意识到我可能正在破解而不是正确地做它。我尝试使用教程添加一些网格线，但最终得到了很多代码，我似乎在编排这些代码，以便让它正确排列。我想知道是否有人可以指出我写这篇文章的更好方法......

原始代码是这样的。

```
 <script type="text/javascript">

            //Width and height
            var w = 800;
            var h = 400;
            var padding = 20;
            var border=1;
            var bordercolor='black';

            var dataset = [
                            [5, 20], [480, 90], [250, 50], [100, 33], [330, 95],[-50,-100],[50,-45],
                            [410, 12], [475, 44], [25, 67], [85, 21], [220, 88],[-480, -467], [3,-90],[468,481]
                          ];

                // create scale functions
                var xScale = d3.scale.linear()
                                 .domain([d3.min(dataset, function(d) { return d[0]; }), d3.max(dataset, function(d) { return d[0]; })])
                                 .range([padding, w - padding * 2]);

            var yScale = d3.scale.linear()
                                 .domain([d3.min(dataset, function(d) { return d[0]; }), d3.max(dataset, function(d) { return d[1]; })])
                                 .range([h - padding, padding]);

                var rScale = d3.scale.linear()
                .domain(  [-100,      d3.max(dataset, function(d) { return d[1];            })]   )
                .range([2,5]);

            //Create SVG element
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h)
                        .attr("border",border)
                        ;

            //define X axis   this is rly a function, remember, variables can hold functions in JS
                var xAxis = d3.svg.axis()
                        .scale(xScale)
                        .orient("bottom")
                        .ticks(1)
                        .tickSize(-h, 0, 0)
                        ;   //Set rough # of ticks

            //Define Y axis
                var yAxis = d3.svg.axis()
                        .scale(yScale)
                        .orient("left")
                        .ticks(1)
                        .tickSize(-w, 0, 0)
                        ;

                //create the circles
            svg.selectAll("circle")
               .data(dataset)
               .enter()
               .append("circle")
               .attr("cx", function(d) {
                    return xScale(d[0]);
               })
               .attr("cy", function(d) {
                    return yScale(d[1]);
               })
               .attr("r", 3);

  //   draw axes here
   svg.append("g")
    .attr("class", "axis") //assign "axis" class
    .attr("transform", "translate(0," + (h - padding) +")")
    .call(xAxis);

       svg.append("g")
    .attr("class", "axis") //assign "axis" class
    .attr("transform", "translate(" + padding + ",0)"       )
    .call(yAxis);
// end draw axes here
        </script> 
```

我在第二个链接中添加的代码在这里

```
var vis = svg.append("svg:g")
    .attr("transform", "translate(20,0)")

var rules = vis.append("svg:g").classed("rules", true)

rules.append("svg:g").classed("grid x_grid", true)
    .attr("transform", "translate(-20,"+h+")")
    .call(d3.svg.axis()
      .scale(xScale)
      .orient("bottom")
      .ticks(4)
      .tickSize(-h,0,0)
      .tickFormat("")
    )

rules.append("svg:g").classed("grid y_grid", true)
    .call(d3.svg.axis()
      .scale(yScale)
      .orient("left")
      .ticks(5)
      .tickSize(-w,0,0)
      .tickFormat("")
    )

rules.append("svg:g").classed("labels x_labels", true)
    .attr("transform", "translate(-20,"+ h +")")
    .call(d3.svg.axis()
      .scale(xScale)
      .orient("bottom")
      .ticks(4)
      .tickSize(0)
            .tickFormat("")
      // .tickFormat(d3.time.format("%Y/%m"))
    )

rules.append("svg:g").classed("labels y_labels", true)
    .call(d3.svg.axis()
      .scale(yScale)
      .orient("left")
      .ticks(5)
      .tickSubdivide(1)
      .tickSize(0, 0, 0)
            .tickFormat("")
    ) 
```

再次，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-07-26T00:32:13.827

假设您定义了[Mike Bostock 的](https://stackoverflow.com/users/365814/mbostock)标准[边距](http://bl.ocks.org/mbostock/3019563)，并且您已经为 y 轴定义了线性比例，则以下代码将创建水平网格线而不使用`tickSize()`.

```
svg.selectAll("line.horizontalGrid").data(yScale.ticks(4)).enter()
    .append("line")
        .attr(
        {
            "class":"horizontalGrid",
            "x1" : margin.right,
            "x2" : width,
            "y1" : function(d){ return yScale(d);},
            "y2" : function(d){ return yScale(d);},
            "fill" : "none",
            "shape-rendering" : "crispEdges",
            "stroke" : "black",
            "stroke-width" : "1px"
        }); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-26T04:33:52.257

我建议使用 d3.svg.axis().scale() 将网格绑定到您的坐标。我根据你的代码画了一个简单的[例子：http:](http://jsfiddle.net/temirov/Rt65L/1/) [//jsfiddle.net/temirov/Rt65L/1/](http://jsfiddle.net/temirov/Rt65L/1/)

![网格示例](../Images/e1437884ac16ce94d413e094b778f939.png)

要点是使用现有的刻度 x 和 y，并使用刻度作为网格。由于 yAxis 和 xAxis 已经定义，我们可以重复使用它们。以下是相关代码：

```
//Draw a grid
var numberOfTicks = 6;

var yAxisGrid = yAxis.ticks(numberOfTicks)
    .tickSize(w, 0)
    .tickFormat("")
    .orient("right");

var xAxisGrid = xAxis.ticks(numberOfTicks)
    .tickSize(-h, 0)
    .tickFormat("")
    .orient("top");

svg.append("g")
    .classed('y', true)
    .classed('grid', true)
    .call(yAxisGrid);

svg.append("g")
    .classed('x', true)
    .classed('grid', true)
    .call(xAxisGrid); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-22T21:54:07.267

您可以使用`ticks()`刻度的功能来获取刻度值，然后在数据调用中使用它们来绘制线条。

```
var ticks = xScale.ticks(4);
rules.selectAll("path.xgrid").data(ticks).enter()
     .append("path")
     .attr("d", function(d) {
       return "M" + xScale(d) + " " + padding + "L" + xScale(d) + " " + (h-padding);
     }); 
```

您可能更喜欢为网格线使用线生成器，而不是手动创建路径。这同样适用于 y 网格线，只是 y 坐标是恒定的并且范围从 0 到图形宽度。您可能需要调整开始值和结束值以使其看起来“不错”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-18T06:09:05.853

在 d3fc 项目中，我们创建了一个[网格线组件](https://d3fc.io/api/annotation-api.html#gridline)，它的渲染方式与 D3(v4) 轴完全相同。

下面是一个用法示例：

```
var width = 500, height = 250;
var container = d3.select("#gridlines")
    .append("svg")
    .attr("width", width)
    .attr("height", height);

var xScale = d3.scaleLinear()
  .range([0, 100]);

var yScale = d3.scaleLinear()
  .range([0, 100]);

var gridline = fc.annotationSvgGridline()
  .xScale(xScale)
  .yScale(yScale);

container.append("g")
  .call(gridline); 
```

呈现如下：

[![在此处输入图像描述](../Images/7c12f1b7f25e80f199a124d35f05cd5f.png)](https://i.stack.imgur.com/OTQ2V.png)

网格线的间距由相关轴提供的刻度确定。

披露：我是 d3fc 项目的核心贡献者！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-23T22:59:31.620

按照@arete 的想法，您可以使用以下方法来避免不必要地重新绘制网格线：

```
function createsGrid(data) {
       var grid = gridLine.selectAll("line.horizontalGrid").data(scaleY.ticks());

       grid.enter()
       .append("line")
       .attr("class","horizontalGrid");

       grid.exit().remove();

       grid.attr({
               "x1":0,
               "x2": width,
               "y1": function (d) { return scaleY(d); },
               "y2": function (d) { return scaleY(d); }
                });
} 
```

并在您的 CSS 文件中定义以下内容

```
line.horizonalGrid{
  fill : none;
 shape-rendering : crispEdges;
 stroke : black;
 stroke-width : 1.5px;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-12T03:10:58.197

你可以只使用innerTickSize，而不是tickSize：

```
 var xAxis = d3.svg.axis()
                    .scale(xScale)
                    .orient("bottom")
                    .ticks(1)
                    .innerTickSize(-h); 
```

# python - Python 输出复杂行，浮点数按值着色

> ID：15580303
> 
> 赞同：10
> 
> 时间：2013-03-22T21:40:33.607
> 
> 标签：python, printing, colors, floating-point, format

这是我的第一个 python 程序，也是我第一次询问堆栈溢出问题，所以如果我的代码一团糟或者我的问题格式不正确，我深表歉意。

我想打印我已经打印的同一行，但每个浮点数应该是基于其值的不同颜色。（具体`>.7`是绿色，`.7<`是红色）最好的方法是什么？

```
oreName=[#string names]

#escape char? I know there has to be a better way than this
#but this is the best ive come up with as the escape char didnt
#work the way I thought it should for '%'
char = '%'

netProfitBroker=[
[0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0]]

##code that populates netProfitBroker

def printOutput(array):
  "this prints all of the lines"
  for i in range(0,10):
    print oreName[i]+"=   %.3f \t 5"%(array[0][i])+char+"=%.3f \t10"%(array[1][i])+char+"=%.3f"%(array[2][i])    

print "\nnet profit brokered"
printOutput(netProfitBroker) 
```

输出看起来有点像这样：（当我在这里复制输出时，我丢失了一些/所有的空格格式）

```
net profit brokered

Veldspar   =   0.234     5%=0.340   10%=-0.017
Scordite   =   0.752     5%=0.297   10%=0.259
Pyroxeres  =   0.406     5%=1.612   10%=2.483
Plagioclase=   1.078     5%=0.103   10%=1.780
Omber      =   -7.120    5%=5.416   10%=4.612
Kernite    =   -10.822   5%=15.366  10%=6.626
Jaspet     =   17.772    5%=49.278  10%=62.380
Hemorphite =   -35.431   5%=82.912  10%=141.027
Gneiss     =   8.086     5%=-4638.549   10%=-3610.570
Arkonor    =   349.867   5%=-545.284    10%=-340.298 
```

本质上：

```
"ore name=" arrayVal1 "5%="arrayVal2 "10%="arrayVal3 
```

所有数组 val 应打印到小数点后 3 位。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-22T21:47:53.870

您可以在打印开始时使用 ASCII 颜色代码来更改颜色，例如`'\033[91m'`RED 和`'\033[94m'`BLUE。

**例如**

```
if array[0][i] > 7:
   print '\033[94m' + oreName[i]+"=   %.3f \t 5"%(array[0][i])
elif array[0][i] < 7:
   print '\033[91m' + oreName[i]+"=   %.3f \t 5"%(array[0][i]) 
```

[您可以在此处](http://en.wikipedia.org/wiki/ANSI_escape_code)阅读有关 ASCII 转义码的信息。

**编辑：** *添加了额外的示例代码。*

以下是您可以使用的一些常用颜色的列表：

```
Red = '\033[91m'
Green = '\033[92m'
Blue = '\033[94m'
Cyan = '\033[96m'
White = '\033[97m'
Yellow = '\033[93m'
Magenta = '\033[95m'
Grey = '\033[90m'
Black = '\033[90m'
Default = '\033[99m' 
```

另外如评论中所述。您可以链接这些以在同一行上获得不同的颜色。

```
print '\033[91m' + 'Red' + "\033[99m" + 'Normal' + '\033[94m' + 'Blue 
```

你甚至可以做一个功能。

```
# Store a dictionary of colors.
COLOR = {
    'blue': '\033[94m',
    'default': '\033[99m',
    'grey': '\033[90m',
    'yellow': '\033[93m',
    'black': '\033[90m',
    'cyan': '\033[96m',
    'green': '\033[92m',
    'magenta': '\033[95m',
    'white': '\033[97m',
    'red': '\033[91m'
}

def print_with_color(message, color='red'):
    print(COLOR.get(color.lower(), COLOR['default']) + message)

print_with_color('hello colorful world!', 'magenta')
print_with_color('hello colorful world!', 'blue') 
```

# iphone - Core-Plot 饼图borderLineStyle 伪影

> ID：15580307
> 
> 赞同：0
> 
> 时间：2013-03-22T21:40:36.217
> 
> 标签：iphone, ios, core-plot

我正在使用 CorePlot 绘制饼图，我将其转换为 PDF 以供查看、打印和发送电子邮件。所有这一切都很好，除了当我添加一个borderLineStyle 时，我还会在饼图的边缘周围得到人工制品。

在 iPhone 的屏幕上或打印时，您并没有真正注意到它们，但是当通过电子邮件发送并在大屏幕（在 acrobat 阅读器中）上查看时，它们会立即显而易见。此屏幕截图放大到 400%，但它们在 100% 时也清晰可见。您可以在饼图的内部和外部看到剪切伪影。

![CPTPieChart 边缘有伪影](../Images/98b5fff7ba7c6759b2ae7304fa681344.png)

如果我不使用borderLineStyle，那么饼图就很好很干净。人工制品仅在设置线条样式时显示。我喜欢这样：

```
CPTMutableLineStyle *segmentLineStyle = [CPTMutableLineStyle lineStyle];
segmentLineStyle.lineColor = colour;
segmentLineStyle.lineWidth = size;
_pieChart.borderLineStyle = segmentLineStyle; 
```

对我来说，它们看起来像是剪裁或抖动的伪影，所以我尝试将背景颜色和图形填充设置为白色或透明，但这没有区别。

我正在使用 CorePlot 1.1。有谁知道为什么会这样？任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:54:09.617

回答我自己的问题。感谢 Eric 提示 Core Graphics 渲染为不支持透明胶片的旧 PDF 格式，我想我会改变绘制饼图的方式。

以前我只是将饼图渲染到 pdf 上下文中，如下所示：

```
CGContextRef pdfContext = UIGraphicsGetCurrentContext();
[pieChartView.layer renderInContext:pdfContext]; 
```

现在我首先将饼图渲染到 UIImage，然后将图像渲染到 pdf 上下文。像这样：

```
// Pre-render the pie chart into a temporary UIImage
UIGraphicsBeginImageContextWithOptions (pieChartView.frame.size, YES, 0.0f);
CGContextRef tmpContext = UIGraphicsGetCurrentContext();
[pieChartView.layer renderInContext:tmpContext];
UIImage *pieChartTmpImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// Draw the pre-rendered pie chart in to the PDF context.
[pieChartTmpImage drawInRect:CGRectMake(0, 0, pieChartTmpImage.size.width, pieChartTmpImage.size.height)]; 
```

这现在可以干净地呈现饼图:)

值得指出的是，当这段代码运行时已经建立了 pdf 上下文，并且临时图像上下文是嵌套的，但这很好。

# ios6 - 如何从应用程序发送推送

> ID：15580311
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:40:46.673
> 
> 标签：ios6, push-notification, urbanairship.com

我正在制作房地产应用程序，我想在添加任何建筑物时发送推送。我尝试的是按照以下链接。

[Urban Airship - 使用 NSURLConnection 发送推送](https://stackoverflow.com/questions/12592762/urban-airship-send-push-with-nsurlconnection)

我还是什么都没有。

我总是得到响应**401**。表示未发送推送。

知道如何从代码本身发送推送吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:54:02.317

**好吧，只有启用了从设备推送**时，我们才能从应用程序发送推送。为此，我们必须向 Urban Airship 发送电子邮件，请求启用设备推送。

就是这样！！！

# html - 重新加载页面时如何重置浏览器缓存

> ID：15580314
> 
> 赞同：0
> 
> 时间：2013-03-22T21:41:11.273
> 
> 标签：html, browser-cache, page-refresh

我有一个要更改的页面，但是只有在我重置浏览器缓存时才能看到更改。有什么我可以添加到我的 html 中的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:44:25.527

如果要查看 css 或 js 更改，一种方法是将 _versionNo 附加到每个版本的 css/js 文件中。例如

script_1.0.css script_1.1.css script_1.2.css 等

您可以查看此[链接](http://www.htmlgoodies.com/tutorials/getting_started/article.php/3479551)以了解它是如何工作的。

来源：[强制浏览器清除缓存](https://stackoverflow.com/questions/1922910/force-browser-to-clear-cache)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:52:08.493

您应该能够使用带有“元”标签的纯 HTML 来做到这一点。元标记属于“标题”标记，用于许多不同的事情，包括防止缓存和事实上的内容过期。

```
<meta http-equiv="Pragma" content="no-cache" /> <meta http-equiv="Expires" content="-1" /> 
```

这是 2 个很好的标签。好的浏览器应该能识别它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:48:53.153

我有时使用的一个技巧是向链接文件添加一个参数。因此，如果它是您要更新的样式表，请使用 screen.css?version=123 之类的内容。然后您可以将其更新为 124，浏览器将忘记它的缓存版本并再次获取它。注意不要在实时站点上过于频繁地更新——如果他们每次访问时都必须下载您的核心资源，您将毁掉用户的生活。

这样做意味着您只需处理文件的一个命名版本。这使它保持简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:49:52.937

取决于您需要重新加载的资源。您可以使用许多不同的方法，一种常见的方法是使用版本控制或为请求添加时间戳。因此，当您获取需要绕过缓存的文件时，您可以使用时间戳来请求它们，例如（使用 C# + Razer 的示例）。

```
<script src="/Js/Functions.js?t=@DateTime.UtcNow.Ticks" type="text/javascript"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T21:55:35.960

没有办法从页面或其资源中真正清除浏览器的缓存。然而，有一些方法可以解决这个问题。

一种方法是将“版本号”附加到您的资源文件中。这会诱使浏览器认为该资源是一个不同的文件，并将再次下载它。[这个问题](https://stackoverflow.com/questions/1922910/force-browser-to-clear-cache)有一些答案可以帮助你做到这一点。如果您使用 PHP/JSP/ASP.NET 等服务器端代码生成唯一的版本号以放入查询字符串中，则查询字符串方法可能是最容易控制和维护的。请注意，您必须将其构建为不会在生产中发生，否则您的用户将被迫在每个页面请求时重新加载资源，这将增加他们的加载时间。

由于您正在开发，另一种选择是在浏览器上使用一些开发人员工具来禁用缓存：

*   Chrome 开发者工具对此有原生支持。有关如何在 Chrome 中禁用缓存的信息，请参阅[此问题的已接受答案。](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)请注意，您必须在 Chrome 中打开您的开发人员工具才能使缓存禁用工作。
*   Firefox 有几种方法可以做到这一点，如SuperUser 上的[这个问题中所列举的。](https://superuser.com/questions/23134/how-to-turn-off-the-firefox-cache)
*   Internet Explorer 的开发人员工具也支持这一点，这在 SuperUser 上的[这个问题中很明显。](https://superuser.com/questions/461285/how-to-disable-caching-in-internet-explorer-9)您可能必须保持开发人员工具处于打开状态才能保持有效。

如果您使用不同（或多种）浏览器进行开发/测试，您应该能够谷歌如何禁用相应浏览器上的缓存。

Firefox 和 Chrome 也支持++ 或 +`Ctrl`用于无`Shift`缓存页面重新加载。`R``Shift``F5`

# sharepoint - 用户配置文件导出到 AD 问题 - Sharepoint 2013

> ID：15580323
> 
> 赞同：0
> 
> 时间：2013-03-22T21:42:04.323
> 
> 标签：sharepoint, sharepoint-2013

尝试将用户属性映射到 AD 映射属性。我将属性“SPS-JobTitle”映射到带有方向“导出”的广告属性“标题”单击添加，然后确定保存，一切都很好，然后我使用广告属性“电话号码”映射“工作电话”，方向“导出”和单击添加然后确定，现在“SPS-JobTitle”和“WorkPhone”上的属性映射显示两个映射。如果我进入属性，它将在“用于同步的属性映射”下显示两个映射，包括标题和工作电话映射。如果我将它从一个中删除，它会从两个中删除。线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T11:46:05.950

这是 Sharpoint 2013 中的一个错误，由 MS 确认。

我在一月份报告了它，但它仍然没有修复:(

正如您提到的那样，可以通过在多个 AD 属性上启用导出来重现该错误，该属性将在您启用导出的上一个属性上复制。

这使得在修复错误之前无法使用 Sharepoint 2013 中的 AD 导出功能。

卡尔

# android - 将客户端 ID 添加到 Android 的 appengine 后端

> ID：15580324
> 
> 赞同：3
> 
> 时间：2013-03-22T21:42:05.010
> 
> 标签：android, google-app-engine, python-2.7, google-cloud-endpoints, google-api-console

我创建了一个简单的应用引擎端点 api。现在我需要为 android 前端添加`client_id`和`audience`信息。按照链接，我最终[配置了您的 Web 应用后端以识别您的 Android 客户端](https://developers.google.com/appengine/docs/python/endpoints/consume_android#configuring-your-web-app)。但是`2.a`说明的步骤与`Google API Console`. 单击后`API Access`，我得到的唯一选择是`Create an OAuth 2.0 client ID`（所以没有`Create another client ID`）。超过这一点，分歧就会扩大。实际选项是`product name`、`Google account`和`Product logo`。很明显我在错误的选项卡中。

我想这是每个拥有 app-engine android 应用程序的人都必须经历的事情。有人会帮助指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:39:57.167

说明跳过了查看步骤并重命名了一个新的，但我最终到达了那里。

# google-chrome-extension - 捕获鼠标事件并将其注册为键盘快捷键

> ID：15580330
> 
> 赞同：4
> 
> 时间：2013-03-22T21:43:05.353
> 
> 标签：google-chrome-extension

我正在经历[`chrome.commands.onCommand.addListener`](https://developer.chrome.com/extensions/commands.html#event-onCommand)帮助我定义特定命令并将其绑定到组合键的事件。

```
{
  "name": "My extension",
  ...
  "commands": {
    "toggle-feature-foo": {
      "suggested_key": {
        "default": "Ctrl+Shift+Y",
        "mac": "Command+Shift+Y"
      },
      "description": "Toggle feature foo"
    },
    "_execute_browser_action": {
      "suggested_key": {
        "windows": "Ctrl+Shift+Y",
        "mac": "Command+Shift+Y",
        "chromeos": "Ctrl+Shift+U",
        "linux": "Ctrl+Shift+J"
      }
    },
    "_execute_page_action": {
      "suggested_key": {
        "default": "Ctrl+E"
        "windows": "Alt+P",
        "mac": "Option+P",
      }
    }
  },
  ...
} 
```

我的问题是，如何绑定一个组合键来注册另一个组合键，而不是像[教程](https://developer.chrome.com/extensions/commands.html#samples)所示的那样启动 browser_action.html。

例如：我想通过[鼠标中键+P]来注册Ctrl+P。

# php - memcached 新的自动协商客户端连接

> ID：15580333
> 
> 赞同：0
> 
> 时间：2013-03-22T21:43:11.017
> 
> 标签：php, ubuntu, memcached

我正在尝试使用 memcached 存储 PHP 会话信息，但 PHP 一直告诉我它无法连接：

> 警告：session_start(): open(memcached:11211/sess_hitr4obt9ofmmsvk9kfl8euqt6, O_RDWR) failed: No such file or directory (2)

接下来，我尝试通过执行以下操作从运行它的服务器远程登录到 memcached：`memcached -l 127.0.0.1 -p 12345 -vv`

之后，我使用以下方式连接：`telnet localhost 12345`

但是，这只会导致 telnet 挂起

```
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'. 
```

同时，服务器输出位于：`<28 new auto-negotiating client connection`

我已经让它运行了很长一段时间，到目前为止还没有发生任何事情（没有超时，没有连接）。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T17:43:45.693

这是成功连接的结果。试试`stats`；如果 telnet 成功连接，您应该从 memcached 获得结果。

# ftp - Maven FTP 存储库

> ID：15580336
> 
> 赞同：0
> 
> 时间：2013-03-22T21:43:28.440
> 
> 标签：ftp, repository, maven-3

我已经使用 FTP 在我的网络服务器上设置了一个 Maven 存储库。

部署按预期工作，但是当我想安装子模块时，它在网络服务器上找不到文件，因为它试图从错误的位置下载。

我已经为 maven repo 设置了一个用于快照的文件夹和一个用于发布的文件夹：

```
/ftp-dir/
  releases/
  snapshots/ 
```

根 pom 文件具有以下分布管理：

```
<distributionManagement>
    <repository>
    <id>repo-id</id>
        <url>ftp://my-ftp/releases</url>
    </repository>
<snapshotRepository>
    <id>develman.repository</id>
    <url>ftp://my-ftp/snapshots</url>
</snapshotRepository>
</distributionManagement> 
```

如果我使用 -SNAPSHOT 版本运行 mvn deploy 它会按预期将文件部署到快照目录中。

但是当我删除我的本地存储库并尝试安装子模块时，maven 找不到工件。我的 settings.xml 看起来像这样：

```
<servers>
    <server>
        <id>repo-id</id>
        <username>username</username>
        <password>password</password>
    </server>
</servers>

<profiles>
    <profile>
        <id>default</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
            <repositories>
        <repository>
            <id>repository-id</id>
            <name>my repository</name>
                    <url>http://my-website-address.com</url>
            <layout>default</layout>
            <releases>
            <enabled>false</enabled>
            <updatePolicy>never</updatePolicy>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        <updatePolicy>never</updatePolicy>
        </snapshots>
        </repository>
        </repositories>
    </profile>
</profiles> 
```

aven 尝试从[http://my-website-address.com/](http://my-website-address.com/)下载...而不是像预期的那样从[http://my-website-address.com/snapshots下载。](http://my-website-address.com/snapshots)

我的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:47:08.110

我不得不将我的存储库定义更改为两个单独的存储库（1 个用于快照，1 个用于发布）：

```
<profiles>
    <profile>
        <id>default</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <repositories>
            <repository>
                <id>repository-release-id</id>
                <name>my release repository</name>
                <url>http://my-website-address.com/releases</url>
                <layout>default</layout>
                <releases>
                    <enabled>false</enabled>
                    <updatePolicy>never</updatePolicy>
                </releases>
            </repository>
            <repository>
                <id>repository-snapshot-id</id>
                <name>my snapshot repository</name>
                <url>http://my-website-address.com/snapshots</url>
                <layout>default</layout>
                <snapshots>
                    <enabled>true</enabled>
                    <updatePolicy>never</updatePolicy>
                </snapshots>
            </repository>
        </repositories>
    </profile>
</profiles> 
```

# java - 一般如何为 Java 编译找到支持的 jar

> ID：15580337
> 
> 赞同：0
> 
> 时间：2013-03-22T21:43:31.603
> 
> 标签：java, classpath, javac, mahout, cloudera

我知道很多人发现 Maven 和 Eclipse 等工具对于构建和编译 Java 应用程序很有用，尤其是在处理依赖项方面。但我有一个与从命令行编译和运行 java 应用程序有关的问题，尤其是有许多依赖项。我会很感激一个不太像“不要那样做”的答案，因为这对我正在做的事情没有帮助。例如，如果您正在研究 Mahout in Action 中 Mahout 中的第一个推荐示例，那么如何从命令行编译和运行该示例似乎并不明显：

```
javac -cp /usr/lib/mahout/mahout-core-0.7-cdh4.2.0.jar RecommenderIntro.java 
```

这完成没有错误。然而，下一个问题实际上是运行似乎需要更多依赖项的输出。可以想象，这很令人沮丧！

```
$ java -cp /usr/lib/mahout/mahout-core-0.7-cdh4.2.0.jar:. RecommenderIntro
    Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at org.apache.mahout.cf.taste.impl.model.file.FileDataModel.<clinit>(FileDataModel.java:121)
    at RecommenderIntro.main(RecommenderIntro.java:19)
    Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 2 more 
```

但是，很明显，您需要的大部分或全部 jar 都来自 /usr/lib/mahout/lib。对于给定的一组导入语句，有没有一种方法可以找出在编译过程中我需要添加到类路径中的完整 jar 列表是什么？这很重要的一个原因是我使用的是 Mahout 的 Cloudera 发行版，而不是 Apache 版本，因此作者似乎没有兴趣提供帮助。在其他语言中，比如python，就容易多了，很多Java程序员会处理命令行编译问题吗，比如这些？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:41:22.893

虽然没有像maven这样的依赖解析工具，没有捷径可以找到依赖，但是一些shell命令绝对可以减轻一些压力。

查找包含特定类的 jar：

```
CLASSNAME=org/slf4j/LoggerFactory
for i in $(find /path/to/jar/folder -type f -name "*.jar"); 
do 
  jar tf $i | grep $CLASSNAME && echo from $i; 
done 
```

在给定目录中构建所有 jar 的类路径：

```
CLASSPATH=$(find /path/to/jar/folder -type f -name "*.jar" -exec echo -n {}: \;)
java -cp $CLASSPATH RecommenderIntro 
```

# c# - 请参阅其他表单中的 RadioButton_Checkedchanged 值

> ID：15580341
> 
> 赞同：0
> 
> 时间：2013-03-22T21:43:46.300
> 
> 标签：c#, winforms, radio-button

我正在编写一个小程序，它应该处理 CSV 和 XML 之间以及从 XML 到 TXT 的转换。在主窗体中，我插入了两个单选按钮，用户将单击它们以开始所需的转换。

到目前为止，我必须使用 .cs 文件：MainForm.cs 和 ConversionForm.cs。

在 MainForm.cs 中，我已将 MainForm 声明为静态，以允许 ConversionForm 访问其方法。

```
 public MainForm()
    {
        InitializeComponent();
    }

    public static MainForm mform = null; 
```

...然后我为检查更改的事件处理程序插入了函数：

```
 public void CSVConversionRadio_CheckedChanged(object sender, EventArgs e)
    {
        this.CSVConversionRadio.Checked = true;
    }

    public void TXTConversionRadio_CheckedChanged(object sender, EventArgs e)
    {
        this.TXTConversionRadio.Checked = true;
    } 
```

...

在 ConversionForm 中，我有一个“转换”按钮，它应该根据用户的输入选择来处理转换。

```
 public void conversionButton_Click(object sender, EventArgs e)
    {

        if (MainForm.mform.CSVConversionRadio.Checked = true)
        {
            CSVConversion();
        }

        if (MainForm.mform.TXTConversionRadio.Checked = true)
        {
            TXTConversion();
        }
    } 
```

我面临的问题是，当函数检查单选按钮的状态时，程序返回“null”，引发异常。在对代码做一些改动之前，即声明静态函数

`public static MainForm mform = null;`

MainForm.mform.CSVConversionRadio.Checked 始终返回“false”状态，可能是因为正在实例化新表单（转换）并且事件处理程序将其状态重置为默认值。

所以，这是我的问题：

1.  如何将单选按钮的当前值传递给转换表单，从而允许根据用户的选择执行转换功能？

2.  一般来说，我如何从另一个表单引用属性、方法和字段，而不创建新实例，而只指向仍然打开的前一个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:02:18.000

有几种方法可以在表单之间共享信息。

我认为对你来说一个简单的方法是有一个两种形式都知道的中介类。

```
public class ConversionContext : INotifyPropertyChanged {
    private ConversionType type;

    public ConversionType Type {
        get { return type; }
        set {
            if (type != value) {
                type = value;
                onPropertyChanged("ConversionType");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void onPropertyChanged(string propertyName) {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}

public enum ConversionType { None, Xls, Csv, Txt } 
```

然后，当您创建表单时，您可以使用构造函数或两个表单上的属性将相同 ConversionContext 的实例传递给它们。如果您使用的是属性，那么可以这样做。

```
private ConversionContext context;
public ConversionContext SharedContext {
   get { return context; }
   set {
       if (context == value) {
          return;
       }
       if (context != null) {
           context.PropertyChanged -= onContextPropertyChanged;
       }
       context = value;
       context.PropertyChanged += onContextPropertyChanged;
   }
} 
```

在您的主窗体中，您可以在用户检查设置此类型的控件时添加一个事件处理程序。

```
public void CSVConversionRadio_CheckedChanged(object sender, EventArgs e)
{
    context.Type = ConversionType.Csv;
} 
```

设置类型时，会触发 PropertyChanged 事件，您可以在表单中获取并响应该事件。

```
private void onContextPropertyChanged(object sender, PropertyChangedEventArgs e) {
     switch (context.Type) {
         case ConversionType.Xls :
              // check a checkbox that represents xls
         break;
         // handle the other file types
     }
} 
```

当按下 ConversionForm 中的按钮时，类型已设置

```
public void conversionButton_Click(object sender, EventArgs e) {
    switch (context.Type) {
        case ConversionType.Csv:
            CSVConversion();
            break;
        case ConversionType.Txt:
            TXTConversion();
            break;
    }
} 
```

这也减少了表单之间的依赖关系，导致两者之间的[耦合更松散](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:55:09.707

扔掉那个静态变量 mform。如果您保留空值，则没有用。
相反，当您从 MainForm 调用 ConversionForm 的构造函数时，将 MainForm 的实例传递给 ConversionForm 的实例

```
ConversionForm conv = new ConversionForm(this); 
```

然后在 ConversionForm 的构造函数中保存传入全局变量的实例

```
public partical class ConversionForm:Form
{
    MainForm _currentInstanceMainForm = null
    public ConversionFomr(MainForm f)
    {
        _currentInstanceMainForm = f;
    }
} 
```

现在，当您需要调用 MainForm 的公共方法时，您可以使用在构建时传递的实例

```
public void conversionButton_Click(object sender, EventArgs e)
{
    if (_currentInstanceMainForm.CSVConversionRadio.Checked == true)
    {
        CSVConversion();
    }

    if (currentInstanceMainForm.TXTConversionRadio.Checked == true)
    {
        TXTConversion();
    }
} 
```

但是最好隔离 MainForm 的内部控件，永远不要让外部窗体直接访问 MainForm 的控件。
要允许这种模式，您需要准备两个公共属性，每个外部表单都可以检查它们以获取有关 MainForm 控件状态的信息

在 MainForm 添加这两个公共属性

```
 public bool CSVConversionRequired
 {
     get { return (this.CSVConversionRadio.Checked); }
 }

 public bool TXTConversionRequired
 {
     get { return (this.TXTConversionRadio.Checked); }
 } 
```

并将 ConversionForm 更改为

```
public void conversionButton_Click(object sender, EventArgs e)
{
    if (_currentInstanceMainForm.CSVConversionRequired == true)
        CSVConversion();

    if (currentInstanceMainForm.TXTConversionRequired == true)
    {
        TXTConversion();
    }
} 
```

# python - Python：re.findall 的单独结果

> ID：15580342
> 
> 赞同：0
> 
> 时间：2013-03-22T21:44:09.507
> 
> 标签：python, findall

我正在使用 re.findall，结果是这样的：

```
[(u'! mais', u'! - but', u'0.0625')] 
```

我想将“元组”的每一部分存储在不同的变量中，比如

```
french = u'! mais'
english = u'! - but'
prob = u'0.0625' 
```

我还想将字符串 u'0.0625' 转换为浮点数。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:45:57.090

如果您只有一个元组的列表：

```
french, english, prob = result[0] 
```

如果你有多个元组，你可能想要循环它们：

```
for result in result:
    french, english, prob = result
    # do something with this particular french, english, prob 
```

但是，如果您想从中列出三个*列表*，那也很容易：

```
frenchies, englishers, probs = zip(*results) 
```

无论哪种方式，您都可以`prob`通过调用转换为浮点数`float`：

```
prob = float(prob) 
```

或者，如果您有清单：

```
probs = map(float, probs) 
```

# floating-point - 最大范围的均匀分布浮点值？

> ID：15580343
> 
> 赞同：1
> 
> 时间：2013-03-22T21:44:20.443
> 
> 标签：floating-point, precision, floating-point-precision

我试图更好地理解浮点值在实数线上的分布。

我编写了这段代码来计算范围（-R，R）中*均匀分布*的可表示值的数量，其中 R 是**10**的幂（也尝试使用 2 的幂）：

```
public class Foo {
    public static void main(String[] args)
    {
        for(int i=0; i<24; i++)
        {
            int count = 0;
            float R = (float) Math.pow(10, i); //(2<<i);
            float Rstep = Math.ulp(R);
            for(float x = -R; x <= R; x+=Rstep)
                count++;
            System.out.println(R+" "+count+" "+Math.ulp(R));
        }
    }
} 
```

我对结果的差异感到惊讶，即

```
1.0 16777217 1.1920929E-7
10.0 20971521 9.536743E-7
100.0 26214401 7.6293945E-6
1000.0 32768001 6.1035156E-5
10000.0 20480001 9.765625E-4
100000.0 25600001 0.0078125
1000000.0 32000001 0.0625 
```

正如我半信半疑的那样，均匀分布的值的数量将是 16777216（即 23 位尾数的 1<<23，由于符号位而加倍）。

为了让这个问题更加具体 - 我正在尝试构建一个模型（它使用精确到几个数量级的 SI 单位，例如距离以公里到纳米为单位），但必须将其映射到浮点空间（以加载到 GPU 中）。由于这是一个科学模型，我需要了解精度丢失的地方。计划是将值捕捉到均匀分布的范围 - 因此从上表捕捉到范围 (-1000,1000) 将为我提供 32768001 个精确值。

对我来说，在这些范围内会有如此多的差异，以及为什么 2 个案例的力量有限，这似乎违反直觉。

有谁能够解释如何思考这个问题？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:36:29.467

你真的应该用十六进制打印浮点数，那样会更清楚。

您对“16777216（即 23 位尾数的 1<<23，由于符号位而加倍）”的估计仅是您预期的一半。最好的情况是从一个看起来像 -0x1.FFF...pX 的十六进制数开始，即正好是 2 次方以下的数字的相反数。当重复添加初始 ULP 时，您确实会使用指数 X 遍历有效数字的所有值。正如您推断的那样，这是 1<<23 步。完成后，您将**接近零的一半**。相同数量的步数将使您归零（指数低于 X），然后再次将步数加倍以获得正值。

因此，这是 1<<25 (~32000000) 或如此均匀间隔的浮点数，可以在任何接近 2 的幂及其相反数之间找到。你得到 1000 的步数，因为 1000 刚好在两个 1024 的幂次方之下。

正如您所注意到的，最坏的情况是从一个刚好高于 2 的幂的数字开始，比如 0x1.00001pX。然后，您几乎不遍历指数 X 的值，而是立即开始访问具有较低指数的值。如果您从 0x1.FFF...pX 开始，您最终访问的值只有一半

* * *

**注意：**该符号`-0x1.123defpX`应解释为 -0x1.123def * 2 ^ X。也许您的编程语言接受它作为浮点值的输入和/或输出。要重新迭代，在尝试了解正在发生的事情时非常方便。

# ios - 解决视图转换中的错误（故事板）

> ID：15580347
> 
> 赞同：0
> 
> 时间：2013-03-22T21:44:34.073
> 
> 标签：ios, objective-c, view, uistoryboard

我正在开发一个适用于 2 个不同视图的应用程序。今天我注意到每次我从视图 1 到视图 2 时，应用程序都会创建一个新视图。当我返回前一个视图时，它只是创建了一个新的 view1 实例，即它在内存中创建了一个新视图。（并保留前一个）

每次用户将视图传递给另一个视图时，我想使用相同的视图而不创建新实例（内存中的新视图）。

我想在我创建的两个视图之间进行转换。

注意：我正在使用带有 Storyboard 和 ARC 的 iOS 6。过渡是由轻击手势识别器完成的。一旦我点击视图，它就会使用模态转换进入下一个视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:02:14.057

当您从视图控制器 1 转到视图控制器 2 作为模态（呈现）视图控制器时，您使用模态 segue。这确实会创建视图控制器 2 的新实例。当您返回时，在 iOS 6 中，您必须对第一个视图控制器使用*展开转场。*这将导致视图控制器 2 不存在，它将使用现有的视图控制器 1，而不是创建新的视图控制器 1。

这是我对 unwind segues 的解释。

[http://www.aeth.com/iOSBook/ch19.html#_unwind_segues](http://www.apeth.com/iOSBook/ch19.html#_unwind_segues)

（要么这样，要么根本不使用segue；只要称呼`dismissViewController`你自己，就像我们在iOS 5 中在unwind segues 存在之前所做的那样。或者一开始就不要使用故事板；它们真的没有必要。这是我的呈现的 ["modal"] 视图控制器的解释：[http](http://www.apeth.com/iOSBook/ch19.html#_presented_view_controller) ://www.aeth.com/iOSBook/ch19.html#_presented_view_controller )

# java - 检查计时器是否有任何待处理的任务？

> ID：15580352
> 
> 赞同：0
> 
> 时间：2013-03-22T21:44:48.897
> 
> 标签：java, multithreading, timertask

我使用 Java 的 Timer 来安排任务在一段时间后运行。

```
myTimer.schedule(myTask, delayTime); 
```

在任何时间点，是否可以检查是否有任何计划运行的任务（但尚未运行）？如果是这样，我该怎么做？

如果没有，我有什么替代 Timer 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:49:10.280

您可以（并且应该）使用[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)而不是`Timer`.
它以强大的方式处理线程崩溃并具有更灵活的 API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:56:45.420

您可以在 myTask 的类中添加一个布尔字段，该字段将在第一次执行时设置为 true。把事情简单化。

# javascript - AngularJS 无法按顺序显示月份下拉列表

> ID：15580354
> 
> 赞同：2
> 
> 时间：2013-03-22T21:44:49.413
> 
> 标签：javascript, sorting, angularjs

我似乎无法正确显示月份，10 月总是在 1 月之后，因为它的值是 10 ......我假设在某些排序中它小于 2。这是代码的小提琴：

[http://jsfiddle.net/naZQA/](http://jsfiddle.net/naZQA/)

```
<select ng-model="month" ng-options="key as value for (key,value) in months"></select> 
```

对于那些我无法让美国作为第二个条目出现的国家，我遇到了同样的问题，因为它会进行自己的疯狂排序。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T23:00:15.903

对对象使用 ng-options 只是在对象属性上进行迭代，这些属性不能保证按任何顺序排列。如果您可以将其更改为数组，则可以保证它们按指定的顺序排列。[更新了小提琴](http://jsfiddle.net/naZQA/2/)。然后选择看起来像这样：

```
<select ng-model="month" ng-options="currMonth for currMonth in months"></select> 
```

如果您需要为 ng-model 保留相同的值，您还可以拥有一个键/值对数组。看到[这个小提琴](http://jsfiddle.net/naZQA/3/) 然后选择看起来像这样：

```
<select ng-model="month" ng-options="currMonth.key as currMonth.value for currMonth in months"></select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:57:58.830

在这个问题中讨论了[here](https://stackoverflow.com/questions/14330878/angular-js-orderby-not-working-with-dict-syntax-on-ng-repeat)。因此，角度不允许使用`orderBy`简单的哈希，如果不重组数据，您将无法继续进行排序。这是一个改变数据结构的[小提琴](http://jsfiddle.net/naZQA/4/)

**更新：**更新了小提琴的链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T01:36:48.097

试试我在 AngularJS 选择文档中[评论的这个解决方法。](http://docs.angularjs.org/api/ng.directive%3aselect#comment-957410354)
使用months.indexOf(m) 作为选择值。

```
<select ng-model="monthIndex" ng-options="months.indexOf(m) as m for m in months"></select> 
```

这样，您可以使用简单的字符串数组作为源，并使用所选索引更新 ng-model。
在这里试试：[jsbin](http://jsbin.com/okiquq/1/edit)

# css - 填充剩余的垂直空间

> ID：15580356
> 
> 赞同：2
> 
> 时间：2013-03-22T21:45:06.807
> 
> 标签：css, fill

重新设计我的网站，在我的 CSS 中，我有一个高度为 200px 的 div；然后是它下面的图像，高度为：532px；最后是高度的 div: 100%;.

最后一个 div 没有填满页面的其余部分，我做错了什么吗？

PS - 所有 div 都在一个容器中。所有包含的 div 都有 height: 100%;

***我已经改变了它，所以我不再需要这个。***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T22:15:43.353

首先，您需要将 html 和 body 的高度设置为 100%。然后，如果您想用该 div 覆盖页面的其余部分，您应该执行以下操作：

```
div{
     height: -moz-calc(100% - 732px); //732 = 200 + 532
     height: -webkit-calc(100% - 732px);
     height: calc(100% - 732px);
} 
```

希望这会有所帮助....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:15:27.793

你真的需要发布你的html。

我怀疑您遇到的问题也可以通过将 html 和 body 标签的高度设置为 100% 来解决。喜欢 ：

```
html, body{
  height:100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:20:56.363

如果 div 确实遵守了 height: 100%，那么它将与容器具有相同的高度，与它上面的元素发生冲突。

如果不使用 Javascript 来计算高度，或者注意广泛支持的现代 CSS 扩展，您必须回退到绝对定位。唯一的缺点是您必须手动输入它的顶部。

[http://jsfiddle.net/NnD2u/](http://jsfiddle.net/NnD2u/)

```
<div class="container">
    <div class="child1"></div>
    <div class="child2"></div>
</div> 
```

.

```
.container { height: 500px; background-color: Yellow; }
.child1 { height: 200px; background-color: Green; }
.child2 { background-color: Red; }

.container { position: relative; }
.child2 { position: absolute; bottom: 0; left: 0; top: 200px; right: 0px; } 
```

# jquery - 使用 json 访问公共推文

> ID：15580359
> 
> 赞同：2
> 
> 时间：2013-03-22T21:45:19.407
> 
> 标签：jquery, json

我正在尝试使用 json 和 jquery 访问 twitter 数据库（仅限公共推文）。我写了一个函数。这里是：

```
$(document).ready(function(){
alert("1");
$("button").click (function(){
    alert("2");
    $.getJSON("http://search.twitter.com/search.json?q=messi", function(data){
        alert("3");
    });
    alert("4");
}); 
```

页面加载后，会出现警报并按预期显示 1。当我单击按钮时，会出现两个警报并分别说 2、4。getJSON 函数似乎有问题，我无法解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:50:05.580

您的代码通过发出跨域请求违反了[同源策略。](http://en.wikipedia.org/wiki/Same_origin_policy)

您可以通过将参数添加到查询字符串来使其成为[JSONP](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)请求（不是 Ajax 请求且不受同源策略约束）来解决此问题：`callback=?`

```
$.getJSON("http://search.twitter.com/search.json?q=messi&callback=?", function(data){
    alert("3");
}); 
```

[**小提琴**](http://jsfiddle.net/MsLT8/)

[`jQuery.getJSON`参考](http://api.jquery.com/jQuery.getJSON/)

当请求 URL 包含`callback=?`参数时，jQuery 自动将其假定为 JSONP 请求并添加此抽象层，使其“看起来像”一个 Ajax 请求。您可以使用`data`包含已解析 JSONP 响应的对象。

附言。您可能想查看[Dev Tools](https://developers.google.com/chrome-developer-tools/docs/console)（或[Firebug](https://getfirebug.com/)的）`console`进行开发。它是非阻塞的`alert`，它可以让您显示各种数据类型和嵌套数据结构。

# css - 如何设置带有大花括号的块引用

> ID：15580361
> 
> 赞同：1
> 
> 时间：2013-03-22T21:45:21.243
> 
> 标签：css, wordpress

我正在尝试设置文本块的样式，使其在每一侧都被一个大花括号包围（这样每个大括号都占据了元素每一侧的整个高度）。这是HTML：

```
<blockquote>
<span class="braceleft">&#123;</span>
<p class="quotation">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus           Pellentesque at neque lorem, vitae aliquet risus.</p>
<span class="braceright">&#125;</span></blockquote> 
```

我还应该提到我正在尝试在 WordPress 中执行此操作，我知道这会添加不需要的标签。如果我能为纯 HTML 获得正确的 CSS，我希望能弄清楚如何去除不需要的标签。

如果这会使样式更容易，我可以轻松更改 HTML 标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-09T03:26:19.987

删除 <span> 和 <p> 标签。将开始 <blockquote> 标记编辑为
<blockquote class="addCurlys">。使用这个 CSS（使用 :before 和 :after 伪元素的字体大小）：

```
blockquote  {
    font-size:1em;
}
blockquote.addCurlys:before {
    content: "{";
    font-size:10em;
}
blockquote.addCurlys:after {
    content: "}";
    font-size:10em;
} 
```

因为 em 是 :before 和 :after 伪元素的度量单位，所以它们链接到其父元素的字体大小 - 块引用本身。

我认为大多数浏览器现在支持 :: 伪元素 - 我仍然倾向于只使用一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:50:41.710

请记住，您应该限制内容以使其适合大括号。

你可能可以做类似的事情

```
<blockquote class="clearfix">
  <div class="curly-left float-left">
    <div class="float-left"> Content here </div>
  <div class="curly-right float-left">
</blockquote> 
```

然后在 CSS 中为左右卷曲设置高度/宽度和背景图像。浮动 div 并在`blockquote`.

我认为应该这样做。

这是我用于 clearfix 的代码

```
/* Clearfix */
.clearfix:before, .clearfix:after { content: "\0020"; display: block; height: 0; overflow: hidden; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:56:20.410

没有附加标签的方法是使用 CSS`:before`并`:after`创建 2 个大括号，然后相应地设置它们的样式。

考虑这段代码（或[测试小提琴](http://jsfiddle.net/frozenkoi/BpgX6/6/)）：

HTML：

```
<blockquote class="addCurlys">I like curly <br> curls <br/><br/> I really do<br/><br/>I really really do</blockquote> 
```

CSS：

```
BLOCKQUOTE.addCurlys {background: yellow; position: relative; padding: 0.5ex; 1em}
BLOCKQUOTE.addCurlys:before {
    content: ''; border: 1px dotted pink;
    position: absolute; right: 100%; top: 0; bottom: 0; width: 30px; 
    background-image: url('http://placekitten.com/g/30/60'); background-size: 100% 100%
}
BLOCKQUOTE.addCurlys:after {
    content: ''; border: 1px dotted pink;
    position: absolute; left: 100%; top: 0; bottom: 0; width: 30px;
    background-image: url('http://placekitten.com/g/30/60'); background-size: 100% 100%
} 
```

这是它的工作原理（对于左大括号）：`:before`创建一个伪元素。我们需要添加`content`属性，否则它不会被“正确”渲染。粉红色的边框只有在那里，所以你可以看到它在哪里。

给`BLOCKQUOTE`定一个`position: relative`属性，以便可以相对于它定位之前和之后的块。我们给`:before`a并`position: absolute`给它一个0 值，以便它与块引用的顶部和底部边缘对齐。然后我们给它一个，让它一直被推到边缘的左边（如果你想在块引用中使用它，可以根据你的口味调整）。和我们喜欢的。`top``bottom``right: 100%``left:0``width`

最后，我们添加一个背景（因为您希望卷曲垂直拉伸）图像并指定我们希望它的大小为容器的 100% x 100%（`:before`，即左大括号）。随意将小猫图像更改为花括号，我更喜欢小猫。

根据您的需要进行调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:54:37.137

```
<span class="braceleft" style="float:left; padding: 0 10px">&#123;</span>
<p class="quotation" style="float:left; padding: 0; margin: 0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus Pellentesque at neque lorem, vitae aliquet risus.</p>
<span class="braceright" style="float:left; padding: 0 10px">&#125;</span> 
```

# ruby-on-rails - 在使用 Wicked PDF 和 Rails 生成的每个页面中重复 HTML

> ID：15580362
> 
> 赞同：1
> 
> 时间：2013-03-22T21:45:26.950
> 
> 标签：ruby-on-rails, wkhtmltopdf, wicked-pdf

我在 Ruby on Rails 上使用 Wicked PDF gem 生成 PDF，但必须在每个页面上重复一些 HTML 内容。

我正在尝试将页面的一部分用于我的主要内容，并在每个页面中使用 HTML 在其周围添加内容。

[类似这张图片的东西（检查）](http://i.imgur.com/6CN2bbS.png)

我尝试使用标题，但我无法将内容放在 HTML 前面（即使使用 z-index），并且只能垂直定位具有边距和间距的主要内容（没有找到任何选项横向进行）。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:10:13.927

由于没有人回答，我将在这里发布我的解决方案。它既不美丽也不辉煌，与这些相去甚远——但既然没有人回答，也许我们可以从它开始讨论。

我能够使用 Wicked PDF 生成只有文本（但边距正确）、没有背景的 PDF。[喜欢这个形象](http://i.imgur.com/Q6APcuC.png)。我用它来保存文件。

这是它的代码：

```
# Save PDF with only the text (with correct margins)
render :pdf => "text#{id}",
       :margin => {:top => "1.6in", :left => "4.1in", :right => "1.2in", :bottom => "2.5in"},
       :page_size => "Letter",
       :template => "careers/job_pdf_text.pdf.erb",
       :save_to_file => Rails.root.join('public/job_pdf_tempfiles', "text#{id}.pdf"),
       :save_only => true,
       :no_background => true 
```

然后我使用 RMagick 从这个保存的 PDF 中创建图像。这里重要的是我保存了具有透明背景的 GIF，Magick 为 PDF 的每一页创建了一个图像。这是保存图像的代码：

```
# Save images from the only-text PDF
@text_images = []
text_images_magick = Magick::Image.read(Rails.root.join('public/job_pdf_tempfiles', "text#{id}.pdf"))
text_images_magick.each_with_index do |image, index|
    file_name = Rails.root.join('app/assets/images/careers_pdf', "text#{id}-#{index}.gif")
    image.write(file_name)
    @text_images << file_name
end 
```

好的，所以此刻我有文字的图像，[就像这样](http://imgur.com/Iz39bQn)。现在我所做的是将它们放在 HTML 页面中的正确位置，然后再次使用 Wicked PDF 来呈现最终的 PDF。我使用边距 0 渲染 PDF，并为每个 @text_images 创建了一个容器，从中我定位了其他所有内容（包括图像本身）以实现我在开始时想要的。

有没有人有更好的想法可以分享？

# javascript - PhoneGap + jQuery：如何在 jQuery 回调中访问 FileWriter.write？

> ID：15580366
> 
> 赞同：0
> 
> 时间：2013-03-22T21:45:46.487
> 
> 标签：javascript, jquery, html, cordova, callback

**我正在使用电话间隙，请参阅[http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#FileWriter](http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#FileWriter)**

我正在尝试这样做：

我将 FileWriter（HTML5 对象）传递给一个函数。

我需要下载一个文件，然后使用写入器写入文件，但是......如何从回调内部访问文件写入器？

```
function onNotGotIntrattenimento() {
    sdcard.getFile("maiscai/intrattenimento.js", 
                   {create: true, exclusive: false}, 
                    onCreatedIntrattenimentoWriter, onError);

}

function onCreatedIntrattenimentoWriter (intrattenimento_writer) {
    intrattenimento_writer.onwrite = onIntrattenimentoUpdated();
    downloadIntrattenimento(intrattenimento_writer);
}

function downloadIntrattenimento(intrattenimento_writer) {

    $.ajax({
        url: intrattenimento_link,
        context: document.body
    }).done(function(data) {
        intrattenimento_writer.write(data);
    });
} 
```

**如何在 done 回调中调用 intrattenimento_write.write 方法？！？！**

我收到一个错误

> 03-22 22:02:56.896：E/Web 控制台（27627）：TypeError：表达式“intrattenimento_writer.write”[未定义] 的结果不是函数。在文件：///android_asset/www/app.js:62

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:47:43.087

会不会是你有拼写错误？你错过了最后一个'r'：

你有：

```
intrattenimento_write.write(data); 
```

它应该是：

```
intrattenimento_writer.write(data); 
```

更新：既然你纠正了原来的问题，我上面的回答就没有任何意义了。但是，您现在显示的代码是绝对正确的。你应该可以访问`intrattenimento_writer`就好了。

你确定你的`intrattenimento_write`变量有一个`write`功能吗？如果是这样，您能否显示与该函数关联的代码？

更新 2：

我刚刚查看了您提供的 PhoneGap 文档。首先让我说我对 PhoneGap 完全没有经验，但是从文档看来，您似乎需要先`createWriter`在对象上使用该方法，`intrattenimento_write`然后才能使用`write`. 看看他们使用的例子：

```
function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    ...
    writer.write("some sample text");
} 
```

# java - 我正在尝试反转二维数组并不断收到空异常

> ID：15580370
> 
> 赞同：1
> 
> 时间：2013-03-22T21:46:04.013
> 
> 标签：java, function, methods, reverse

这是我假设反转数组的方法。（另外，请记住，此方法可以接收锯齿状数组）

```
 public static int[][] reverse(int[][]a){

int[][] rev = new int[a.length][];

int row = a.length;

for(int x=0;x<a.length;x++){
   int col = a[x].length-1;
   for(int y=0; y< a[x].length;y++){

       rev[row-1][col-1]= a[x][y];
       col--;

       }
   row--;
   }

   return rev;

}// reverse method 
```

我不断得到

```
Exception in thread "main" java.lang.NullPointerException
at Home.reverse(Home.java:259)
at Home.main(Home.java:56) 
```

Java 结果：1

这是我调用该方法的主要内容

```
int[][] two = {{1,2,3,4},{0,1,2},{9},{1,3,5,7}};
System.out.println("The size of array os " + ar.length);
System.out.println("The columns of array is " + ar[0].length); 

int[][] rev;
//int[] b = concatenate(ar);
//int[] c = concatenate(two);
//int[][] rev = reverse(ar);

//for(int x=0;x<c.length;x++){System.out.println("worked" + c[x]);}

rev = reverse(two);

//for(int x = 0;x<rev.length;x++){
//  for(int y = 0;y<rev[x].length;y++){
//    System.out.print(rev[x][y]);
//}
//}
for(int x=0;x<rev.length;x++){
for(int y=0;y<rev[x].length;y++){
    System.out.print(rev[x][y]);
}
}

}// main 
```

所以我的问题是真的，我哪里做错了？我追踪了我的反向方法，看起来它应该在做它的工作，但显然不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:51:49.013

您的数组`rev`尚未在其第二个坐标中初始化。在您声明之后`int[][] rev = new int[a.length][]`，您的所有对象`rev[i]`都是`null`对象（数组是对象，即使对于原始类型也是如此）。为避免这种情况，如果数组是锯齿状的，请用`int[][] rev = new int[a.length][a[0].length]`或用或左右初始化。`rev[i] = new int[a[i].length]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:53:47.987

当你说这行

```
int[][] rev = new int[a.length][]; 
```

您已经创建了一个长度`a.length`为数组的数组，但内部数组都是`null`. `NullPointerException`所以你在这条线上得到了一个：

```
rev[row-1][col-1]= a[x][y]; 
```

您需要在第一个 for 循环中创建内部数组。这将满足您的“锯齿状阵列”要求。

```
for(int x=0;x<a.length;x++){
   int col = a[x].length-1;
   rev[row-1] = new int[a[x].length];  // Add this to create differing lengths.
   for(int y=0; y< a[x].length;y++){ 
```

# mysql - 如何在 clojure/java.jdbc 中使用“WHERE x IN y”子句？

> ID：15580371
> 
> 赞同：5
> 
> 时间：2013-03-22T21:46:12.800
> 
> 标签：mysql, jdbc, clojure

我试图让一个简单的数据库查询正常工作，但我无法`clojure/java.jdbc`从`IN`子句中进行选择。

代码如下所示：

```
(sql/with-connection db
  (sql/with-query-results rows
    ["select  f.name        name
          ,   f.id          file_id
      from    FileCategory  fc
      join    File          f
          on  fc.file       = f.id
      where   fc.category   in ?
      having  count(1)      >= ?"
     [1 2]    ; This is the bit which does not work.
              ; I have tried (to-array) and (set) too
     2]
    (into [] rows))) 
```

关于如何将集合传递给查询的任何想法？

直接在下面运行查询`mysql`我没有问题：

```
mysql> select f.name, f.id from FileCategory fc join File f on fc.file = f.id where fc.category in (1, 2) having count(1) >= 2;
+-----------+----+
| name      | id |
+-----------+----+
| some name |  1 |
+-----------+----+
1 row in set (0.02 sec)

mysql> 
```

如果它有所不同，我正在使用：org.clojure/clojure 1.4.0、org.clojure/java.jdbc 0.2.3 和 mysql/mysql-connector-java 5.1.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:49:55.910

如果您使用 SQL，您必须生成一个带有正确数量的“？”的 SQL 查询。很遗憾。

您可能会发现在更高的抽象级别上工作会更好。例如。您在[korma](http://sqlkorma.com/)中的查询如下所示：

```
(defentity file)
(defentity filecategory)

(def categories ["movie" "tv" "news"])

(as-sql (select file
       (fields :name :file_id)
       (join filecategory (= :file.id :filecategory.file))
           (where { :filecategory.category [in categories]} )
       (having (> (sqlfn :count 1) 1))))

; SELECT `file`.`name`, `file`.`file_id` FROM `file` LEFT JOIN 
;        `filecategory` ON `file`.`id` = `filecategory`.`file` 
;         WHERE (`filecategory`.`category` IN (?, ?, ?)) 
;         HAVING COUNT(?) > ?  ::  [tv movie news 1 1] 
```

`defentity`如果需要，您可以通过将 FK 声明移动到调用中来进一步整理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:59:51.260

尝试这个：

```
(sql/with-connection db
  (sql/with-query-results rows
    ["select  f.name        name
          ,   f.id          file_id
      from    FileCategory  fc
      join    File          f
          on  fc.file       = f.id
      where   fc.category   in (?, ?)
      having  count(1)      >= ?"
     1 2 2]
    (into [] rows))) 
```

# php - 想象一下热点和选择下拉php

> ID：15580374
> 
> 赞同：0
> 
> 时间：2013-03-22T21:46:24.677
> 
> 标签：php, forms, url

我有一个选择标签和一个带有热点的图像。我想从下拉框中选择一个值，并将热点链接也用作选择的一部分。我能够从选择标签中获取值，但我正在努力将选择标签中的两个值和热点中的另一个值连接到 url，以便我可以执行 GET 方法。

HTML

```
<form action="results.php" method="GET" name="frmres" id="frmres">
<select name="specialist_1" id="specialist_1" style="background: transparent;text-transform:uppercase;font-size:12px;border: 1px solid #ccc;scrollbar-arrow-color: #12406F;">
<option value="-1" >Select a Specialist</option>

<?php   global $database;
$database = new MySQLDatabase();
$sql="SELECT descr FROM tablenae GROUP BY descr ASC";
$result_set=$database->query($sql);
$num_rows=$database->num_rows($result_set);
if($num_rows!=0){
while($row=$database->fetch_array($result_set)){
$docSpecialist=$row['descr'];
echo '<option value='.$docSpecialist.'>'.$docSpecialist.'</option>';
}} ?>
</select> 
```

图像地图热点

```
<map name="Map" id="Map">
  <area shape="poly" coords="414,153,447,114,491,73,535,59,579,67,596,89,602,119,585,141,530,165,474,167" href="results?mylinks=Texas" <?php echo '<input type="text" name="Texas" value="Texas">' ?>  onclick="javascript:document.frmres.submit();return false;" />
</map>
</form> 
```

我想存储 url：results.php?specialist_1=PILOT+mylink=Texas

# oop - 设计模式：将x添加到y，方法应该去哪里？

> ID：15580375
> 
> 赞同：0
> 
> 时间：2013-03-22T21:46:29.313
> 
> 标签：oop, design-patterns

我有一个 X 类和 Y 类，它们基本上是 X 的集合。我想编写一个将 X 添加到特定集合 Y 的方法。此方法将更改 X 上的某些状态，当然还有 Y 上的状态。我的问题是在 X 类中最好在哪里使用此方法（因此该方法将是 x.addToY(y)) 还是应该继续 Y 类 (y.addX(x))？我应该考虑什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:10:05.660

在您的情况下，它非常简单，但想象一下它`Y`可以容纳其他不同的`X`元素，比如类型的元素`A`，`B`和`C`。这些类型是否应该知道如何添加到集合中`Y`？答案是否定的，但如果是这样，您将不得不为`AddToY`这些类型中的每一种实现一个方法，这一点都不好。集合`Y`知道如何将项目添加到自身，无论这些项目是什么类型。这被称为[*关注点分离，*](http://en.wikipedia.org/wiki/Separation_of_concerns)它主要指出每个类型或实体都应该具有其关注的功能。在这种情况下，您可以看到一个集合应该能够向自己添加项目，但是某个类型`X`可能与集合无关，因此，它不应该具有将自身添加到某个集合的功能。希望这可以帮助您理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:54:51.740

考虑一下，如果您将方法放在 X 中以将其自身添加到 Y，而 Y 包含 X 的集合，那么 X 必须知道 Y，而 Y 必须知道 X；而如果你把方法放在 Y 中，那么 Y 需要知道 X，但 X 不需要知道 Y。你避免了循环依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:01:40.977

除了这种方法与 Y 类的常识关联之外，另一个考虑因素是并发性：虽然这最初可能是一个单线程应用程序，但您（或其他人）将来可能会扩展类 Y 以启用同步的多线程集合访问，在这种情况下，在 Y 中肯定会更方便，`addX`以便多线程子类可以通过其并发支持覆盖该方法。

# php - 如何循环索引结果？使用 php？

> ID：15580376
> 
> 赞同：1
> 
> 时间：2013-03-22T21:46:38.677
> 
> 标签：php, json

我得到了这个 php 代码，它从 youtube 的 api 获取播放列表并显示视频，问题是我每个请求只能显示 25 个视频如何让我的 php 脚本有一个“加载更多”链接，该链接将请求另外 25 个视频，要么它可以重新加载页面或在同一页面中附加其他结果，我只需要指向正确的方向

我的代码：

```
<?php
    $id = urlencode($_GET['id']);
    $url = "https://gdata.youtube.com/feeds/api/playlists/$id?alt=jsonc&v=2&start-index=1
&max-results=25";
    $content = file_get_contents($url);
    $json = json_decode($content, true);
    echo "<div id=\"info\"><center><h1><b>{$json['data']['title']}</center></b></h1><br>{$json['data']['description']} there are {$json['data']['totalItems']} uploaded in this playlist.</center><p></div><div class=\"decoration\"></div>";
    echo "<div id=\"center\">";
    echo "<ul>";
    $count = 0;
    foreach ($json['data']['items'] as $items) {
        ++$count;
        echo "<li style=\"width: 300px;min-height: auto;border: none;display: inline-block;margin: 5px;padding:10px;background-color: rgba(17,0,52,0.14);border-radius: 5px;\"><a href=\"video.php?plid={$json['data']['id']}&vidid={$items['video']['id']}\"><font size=\"5\" style=\"font-weight:bold;\">{$items['video']['title']}</font></a><Br \>";
        echo "<a href=\"video.php?plid={$json['data']['id']}&vidid={$items['video']['id']}\"><img style=\"width:300;height:auto;\" src=\"{$items['video']['thumbnail']['hqDefault']}\" title=\"{$items['video']['title']}\" id=\"ytThumb\"></img></a></li>";
    }
echo "</ul>";
echo "</div>";
?> 
```

我基本上希望开始索引参数循环 1、2、3 等... Youtube API：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:00:57.277

如果您运行，您将只允许`max 50`使用每个请求的结果`max-results`

```
$id = "UUpsSadsgX_Qk9i6i_bJoUwQ"; // for testing
$url = "https://gdata.youtube.com/feeds/api/playlists/$id?alt=jsonc&v=2&max-results=50";
$content = file_get_contents($url);
$json = json_decode($content, true);

echo "<div id=\"info\"><center><h1><b>{$json['data']['title']}</center></b></h1><br>{$json['data']['description']} there are {$json['data']['totalItems']} uploaded in this playlist.</center><p></div><div class=\"decoration\"></div>";
echo "<div id=\"center\">";
echo "<ul>";
$count = 0;
foreach ( $json['data']['items'] as $items ) {
    ++ $count;
    echo "<li style=\"width: 300px;min-height: auto;border: none;display: inline-block;margin: 5px;padding:10px;background-color: rgba(17,0,52,0.14);border-radius: 5px;\"><a href=\"video.php?plid={$json['data']['id']}&vidid={$items['video']['id']}\"><font size=\"5\" style=\"font-weight:bold;\">{$items['video']['title']}</font></a><Br \>";
    echo "<a href=\"video.php?plid={$json['data']['id']}&vidid={$items['video']['id']}\"><img style=\"width:300;height:auto;\" src=\"{$items['video']['thumbnail']['hqDefault']}\" title=\"{$items['video']['title']}\" id=\"ytThumb\"></img></a></li>";
}
echo "</ul>";
echo "</div>";

// you would get 50 results 
```

[要获得更多结果](https://developers.google.com/youtube/2.0/reference#Paging_through_Results)，您需要 结合使用`start-index`和`max-results`

尝试

```
https://gdata.youtube.com/feeds/api/playlists/$id?alt=jsonc&v=2&start-index=51&max-results=50; 
```

# c# - 为什么只有最后一个节点无法写入 XmlDocument？

> ID：15580380
> 
> 赞同：1
> 
> 时间：2013-03-22T21:47:13.753
> 
> 标签：c#, xml

我只是有一个关于将设置写入我的 xml 文件中的节点的快速问题，出于某种原因，我的所有其他设置都保存了，但是这个和我要保存的值是 (ListingRid=1+),(PictureCount=1+)在我的代码中 textBoxQuery.Text 包含 (ListingRid=1+),(PictureCount=1+)

示例 XML

```
<setting name="SearchQuery" serializeAs="String">
<value></value>
</setting> 
```

这是我调用的代码，谁能告诉我该值是否可能包含无效字符，这就是为什么不保存设置的原因？

```
XmlDocument doc = new XmlDocument();
doc.Load(path);
foreach (XmlNode node in doc.SelectNodes("//setting"))
{
    if (node.OuterXml.Contains("SearchQuery"))
{
    node.LastChild.InnerText = textBoxQuery.Text;
}
doc.Save(path); //I have this in there at the end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:59:26.853

textBoxQuery.Text 没有在此上下文中无效的值

`node.LastChild.InnerText = textBoxQuery.Text`

因为 InnerText 在设置值时会对其进行转义。`InnerXml`这是和之间的区别`InnerText`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:15:49.963

我更改了代码以通过值调用实际节点属性，而不是使用 OuterXml.Contains 这似乎已经解决了这个问题。

```
 if (node.Attributes["name"].Value == ("SearchQuery"))
             node.LastChild.Innertext = textBoxQuery.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:08:42.913

你忘了这个吗？

```
doc.Save(path); 
```

# database - 在 Access 中验证邮政编码？

> ID：15580389
> 
> 赞同：0
> 
> 时间：2013-03-22T21:47:46.287
> 
> 标签：database, vba, validation, ms-access, postal-code

我一直在寻找一种方法来做到这一点，但我发现很难:(

我对VBA非常非常非常陌生（实际上我没有使用它）但我有决心！

我想要做的是验证一个邮政编码，以便它格式化并检查它。我已经尝试过输入掩码和验证，但这并不完美。所以我转向了VBA。

我找到了代码示例，并将它们放入 VBA，但我无法让它做任何事情:(

它需要使用这些邮政编码......

A9 9AA

A9A 9AA

A99 9AA

AA9 9AA

AA9A 9AA

AA99 9AA

如果有人可以提供帮助，那就太好了。但是，如果有人可以给我一个包含验证器的数据库，那将是最好的选择，这样我就可以看到它在运行中并学习。但什么都会好。只是如何使它工作会很好:)。我所做的是将[此处](http://www.tek-tips.com/faqs.cfm?fid=6344)的代码复制并粘贴到一个模块中，并希望最好，但什么也没发生？

所以任何帮助都会很好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:10:05.173

您可以使用将所有英国邮政编码下载到您的数据库的建议。但是，您必须掌握它，因为稍后会添加新代码。我确信那里有一项自动免费服务可以为您完成此操作，但这对您来说将是非常高级的编程。

如果您只想验证模式，我找到[**了这个例子**](http://www.tek-tips.com/faqs.cfm?fid=6344)。它不仅会验证模式，还会纠正常见的拼写错误。

如果您确实使用此代码，您仍然必须在正确的时间调用它。这可能是当用户在输入代码后离开文本框时，或者当他们试图保存记录，或移动到另一条记录（自动保存）时。

祝你好运

# java - 如何在 Netbeans 中添加可共享库？

> ID：15580391
> 
> 赞同：2
> 
> 时间：2013-03-22T21:47:53.680
> 
> 标签：java, netbeans, ant, libraries

在 NetBeans（当前使用 7.3）中，有一个很好的特性可以使用 Ant 库管理器添加库。我可以添加类文件的 jar 文件、源文件的 jar 文件和 Javadoc 文件的压缩文件。它在我的工作站上运行良好。

问题是这些 Ant 库似乎不可分发。我怎样才能将这些相同的库放到我的笔记本电脑上，而无需费力地查看每个库以查看其中的内容、下载 jar/zip 文件并在我的笔记本电脑（或从事同一项目的其他任何人）上重新定义库？我想保留的库的几个特性是我可以包含用于快速 API 文档的 Javadocs 和用于调试的源代码。

我想将这些 Ant 库放在~~Subversion~~ Git 中，以便其他想要使用该项目的人也可以下载所有其他库依赖项，而无需构建相同的库。例如，我创建了一个 U2JPA 库，其中包含特定版本的 U2JPA、OpenJPA 的夜间构建以及一些其他 jar。

不幸的是，Maven 不是我当前项目中的一个选项，因为供应商不愿意将二进制文件提交到中央存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:01:07.120

您可以为 Netbeans 中的库使用专用文件夹。转到项目属性，然后转到库并选择一个文件夹->

![网豆截图](../Images/616b6d4c23f97096cbbeafb20f22a056.png)

当您这样做时，所有当前库将被自动复制。只要确保您设置的路径是相对的而不是绝对的，您就可以将文件夹与您的项目一起复制。看看[这个](http://netbeans.org/kb/docs/java/project-setup.html#projects-shared-libraries)。

另一种方法是创建自己的[Nexus Server](http://www.sonatype.org/nexus/)，将文件放在那里并使用 Maven。这是一个更强大的解决方案，但也更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:01:20.840

Maven（最终是 Ivy）应该是选项。如果您不想将库放在中央存储库中，请使用存储库管理器：[http ://maven.apache.org/repository-management.html](http://maven.apache.org/repository-management.html)

# haskell - 在 Haskell 中匹配扑克牌的花色和等级

> ID：15580395
> 
> 赞同：2
> 
> 时间：2013-03-22T21:48:08.663
> 
> 标签：haskell, types

我需要一些帮助来实现一个 Haskell 函数，该函数应该进行扑克牌匹配 - 即“黑桃 A”、“方块 2”、“红心 J”。请注意，“s”的复数不能是 Suit 中构造函数名称的一部分。

参考：[http ://en.wikipedia.org/wiki/Standard_52-card_deck#Rank_and_color](http://en.wikipedia.org/wiki/Standard_52-card_deck#Rank_and_color)

到目前为止，这是我的代码：

```
data Suit = Club | Diamond | Heart | Spade
    deriving (Show, Ord)

data Rank = Ace | Zwei | Drei | Vier | Fuenf
| Sechs | Sieben | Acht | Neun | Zehn 
| Jack | Queen | King 
    deriving (Show, Enum, Read, Eq, Ord)

data Card = Card {rank :: Rank,
                suit :: Suit}
     deriving (Show, Read, Ord) 
```

所需的函数应该是“match :: Card ->String”类型，产生类似“Ace of Diamond+“s””的消息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T22:20:54.510

```
match c = show (rank c) ++ " of " ++ show (suit c) ++ "s" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T00:34:26.587

尝试

```
match c = rankToString ++ " of " ++ show (suit c) ++ "s" where
    rankToString = case lookup (rank c) (zip [Two..Ten] [2..10]) of
        Just n -> show n
        Nothing -> show (rank c) 
```

如果你真的想要`2 of Spades`而不是`Two of Spades`.

一个有趣的练习是尝试使用您知道的任何其他语言（如西班牙语或德语，而不是 Java！）来执行此操作。在荷兰语中，在某些游戏中，黑桃 9 有时被称为“nel”。你会怎么处理呢？

# c# - 用C#获取远程服务器的操作系统（非WMI方案）

> ID：15580397
> 
> 赞同：0
> 
> 时间：2013-03-22T21:48:14.307
> 
> 标签：c#, asp.net, .net, linux, unix

我正在 ASP.NET 中构建服务器信息工具。我可以访问远程服务器（用户名、密码、服务器名）。

我**`need to get the OS and version of OS`**在每台服务器（Windows 或**Unix/Linux**）上运行

我曾尝试寻找解决方案，并且在大多数地方，人们都在谈论`WMI`. 但`WMI`我想，如果它是 Linux/Unix 机器，它就行不通了。

**有没有一种方法可以用 C# 实现这一点？**

# c# - C#枚举如何检查枚举中是否存在描述

> ID：15580398
> 
> 赞同：2
> 
> 时间：2013-03-22T21:48:20.807
> 
> 标签：c#, enums

我想知道是否有一种方法可以检查该值是否是枚举的描述。我知道

```
 Enum.IsDefined(typeof(EnumEntity),value) 
```

可以用来检查值是否在枚举中，但是描述呢？

例如，

```
 public enum LicenseTypes 
{
    [Description("A License")]
    A,
    [Description("B License")]
    B,
    [Description("C License")]
    C
} 
```

有没有办法检查“A License”是枚举 LicenseTypes 的描述？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T21:56:36.293

它会像这样（未经测试）：

```
bool isPresent = Enum.GetValues(typeof(LicenseTypes))
                     .Select(e => e.GetDescription())
                     .Contains("A License"); 
```

其中 GetDescrtiption() 是在回答此问题时定义的辅助函数： [Get the Enum<T> value Description](https://stackoverflow.com/questions/297299/get-the-enumt-value-description?rq=1)

# ios - 覆盖 MFMailComposeViewController 的 UIAppearance 属性

> ID：15580405
> 
> 赞同：17
> 
> 时间：2013-03-22T21:48:39.810
> 
> 标签：ios, objective-c, cocoa-touch, ios6, uiappearance

我正在使用 UIAppearance 协议在整个应用程序中设置 UINavigationBar 对象的背景图像。

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"image-name"] forBarMetrics:UIBarMetricsDefault]; 
```

我想为 MFMailComposeViewController 的实例覆盖它，以便显示默认样式导航栏。我尝试使用 appearanceWhenContainedIn 进行设置，这适用于 iOS 5，但*不适*用于 iOS 6。

```
[[UINavigationBar appearanceWhenContainedIn:[MFMailComposeViewController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

我是在犯错误还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T22:15:29.510

无法通过常规措施更改 MFMailComposer 的外观，但是您可以采取一些解决方法，我之前已经使用过很多次了。

将两个方法添加到您希望在其中实现新外观的类：

```
- (void)applyComposerInterfaceAppearance
{
    [[UINavigationBar appearance] setTintColor:[UIColor blueColor]];
}

- (void)applyGlobalInterfaceAppearance
{
    // My default color of choice
    [[UINavigationBar appearance] setTintColor:[UIColor redColor]];
} 
```

现在在您的 show 方法中，应用您想要进行的特殊作曲家界面更改。

```
- (void)showMailComposer
{
    if ([MFMailComposeViewController canSendMail]) 
    {
        [self applyComposerInterfaceApperance];

        MFMailComposeViewController *viewController = [[MFMailComposeViewController alloc] init];
        viewController.mailComposeDelegate = delegate;
        [viewController setToRecipients:mailRecepients];
        [viewController setSubject:mailSubject];
        [viewController setMessageBody:messageBody isHTML:NO];
        [self presentModalViewController:viewController animated:YES];
    }
} 
```

在您的委托中，将界面更改回原来的样子。

```
- (void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    // Do normal mail composer did finish stuff in here
    [self applyGlobalInterfaceAppearance];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:53:47.137

Mail Composer 视图在 iOS 6 下运行在不同的进程中，不能被直接篡改（因为视图本质上是在另一个应用程序中）。您无法自定义它显示的内容，Twitter 和 Facebook 视图也是如此。

这是远程视图控制器的更详细描述：http: [//oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/](http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-11T18:16:26.867

只需在 MFMailComposeViewController 实例上设置 tintColor：

```
[mailInstance.navigationBar setTintColor:[UIColor someColor]]; 
```

# random - 随机数公式返回相同的数字批次

> ID：15580408
> 
> 赞同：3
> 
> 时间：2013-03-22T21:48:58.587
> 
> 标签：random, batch-file, cmd

我试图在 1 和一个变量之间创建一个随机数，每次程序运行时这个变量都会改变。到目前为止我正在使用这个： SET /A result=%random%*%var%/32768+1

但是每次我重新运行批处理文件时，它都会返回相同的数字，人们知道发生了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:05:39.643

试试这个：

```
set /a result=(%random% %% %var%) + 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T00:12:00.373

您不需要`var`在命令中用百分号括起来`SET /A`；这种形式应该解决与块内部/外部正常扩展相关的所有问题：

```
SET /A result=%random%*var/32768+1 
```

但是，如果前一个命令*在*一个块内，您应该为此更改它（并启用延迟扩展）：

```
SET /A result=!random!*var/32768+1 
```

如果以前的解决方案仍然不起作用，我敢打赌您正在定义一个名为`random`! 这可以防止`%random%`在内部创建并始终返回*您*分配给它的值。

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:55:47.103

IMO 您必须在 a `for`or`if`代码块中使用延迟扩展。

# python - Tkinter：按下按钮时如何使窗口出现

> ID：15580409
> 
> 赞同：0
> 
> 时间：2013-03-22T21:49:02.337
> 
> 标签：python, window, tkinter

我想用 Tkinter 创建一个窗口。这个窗口应该有一个按钮。按下按钮时，我希望出现第二个窗口（第一个窗口不会消失）。

代码，缩短：

```
from Tkinter import *
from modules.startingKit.highscore import Highscore

class OptionWindow:

    def __init__(self):
        self.master = Tk() 
        self.b4 = Button(self.master, text = "display Highscores", command = self.display()).grid(row=0, sticky = W)
    mainloop()

    def display(self):
        myWin = Toplevel() 
```

好吧，显示第二个窗口，但在我按下按钮之前。我可以改变这个吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T22:14:22.867

该`command`属性*引用*一个函数。当你这样做时`command=self.display()`，你正在*调用*函数并将结果传递给`command`属性。

解决方法是省略括号：

```
self.b4 = Button(..., command=self.display, ...) 
```

# wordpress - 如何在 Wordpress 中显示现在观看的帖子？

> ID：15580410
> 
> 赞同：0
> 
> 时间：2013-03-22T21:49:05.437
> 
> 标签：wordpress

我想知道如何显示当前正在查看的所有帖子的列表（在所有打开的数据库连接上）？

# sql-server-2008-r2 - 将空字段更新为 Null 但因 NullIF 或 len(trim())=0 而失败

> ID：15580414
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:49:20.327
> 
> 标签：sql-server-2008-r2

我将 4 个平面苍蝇导入 4 个 sql 表。所有文件都有 77 列。导入后，我需要将所有 4 个表的空字段更新为 Null。下面是语法：

```
DECLARE @iCount as integer
DECLARE @sCol1 as varchar(50)

--Replace all empty fields with NULL value

--Update audWeeklycs
Set @iCount =0
While @iCount<=76
Begin
  if @iCount <=9
  set @sCol1='[Col00'+CAST(@iCount as varchar (2))+']'
  else 
  set @sCol1='[Col0'+cast(@iCount as varchar (2))+']'

  Update MHP_Analysis.dbo.audWeeklycs
  Set @sCol1= case when len(rtrim(ltrim(@sCol1)))=0 then Null else @sCol1 end
  Set @iCount=@iCount+1
End 
```

运行此语句后，我发现空字段没有变化。想不通为什么。我也尝试了 NULLIF 函数，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:26:11.903

您的`UPDATE`语句不能更新数据库中的任何内容，因为它只更新变量。让我们来看看：

```
Update MHP_Analysis.dbo.audWeeklycs
Set @sCol1= case when len(rtrim(ltrim(@sCol1)))=0 then Null else @sCol1 end 
```

您使用`WHILE`循环的算法不是最好的解决方案，但在您的情况下，您可以使用动态 SQL 进行真正的更新。像这样的东西：

```
-- somewhere outside your cycle
DECLARE @SqlCmd VARCHAR(1000)

-- replace your update statement with this code
SET @SqlCmd =
    'Update MHP_Analysis.dbo.audWeeklycs
    Set ' + @sCol1 + ' = case when len(rtrim(ltrim(' + @sCol1 + ')))=0 then Null else ' + @sCol1 +  ' end'
EXEC (@SqlCmd) 
```

# c# - 无需重新编码即可切割 mp4 h264 视频文件

> ID：15580415
> 
> 赞同：3
> 
> 时间：2013-03-22T21:49:32.640
> 
> 标签：c#, video, h.264, mp4

我正在寻找一种方法来拆分或剪切用 h264 编码的 mp4 视频文件，而无需重新编码。到目前为止，我使用 Microsoft Expression Encoder 4 Pro 编辑 mp4 h264 编码文件。问题是，我总是必须重新编码文件，如果我只想剪切或分割视频文件，这需要时间，不必要的时间。任何帮助或指向正确的方向表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-21T15:22:38.010

我不知道如何在不重新编码（转码）的情况下拆分视频，但在 Windows 8 上已内置转码视频：

> 要修剪文件，请调用 aysnc 方法 PrepareFileTranscodeAsync，然后对 PrepareTranscodeResult 对象调用 TranscodeAsync 方法。

例如：

```
async void TrimFile(StorageFile srcFile, StorageFile destFile)
{
    MediaEncodingProfile profile =
        MediaEncodingProfile.CreateMp4(VideoEncodingQuality.HD720p);

    MediaTranscoder transcoder = new MediaTranscoder();

    // Set the start of the trim.
    transcoder.TrimStartTime = new TimeSpan(0, 0, 1);

    // Set the end of the trim.
    transcoder.TrimStopTime = new TimeSpan(0, 0, 9);

    PrepareTranscodeResult prepareOp = await
        transcoder.PrepareFileTranscodeAsync(srcFile, destFile, profile);

    if (prepareOp.CanTranscode)
    {
        var transcodeOp = prepareOp.TranscodeAsync();
        transcodeOp.Progress +=
            new AsyncActionProgressHandler<double>(TranscodeProgress);
        transcodeOp.Completed +=
            new AsyncActionWithProgressCompletedHandler<double>(TranscodeComplete);
    }
    else
    {
        switch (prepareOp.FailureReason)
        {
            case TranscodeFailureReason.CodecNotFound:
                OutputText("Codec not found.");
                break;
            case TranscodeFailureReason.InvalidProfile:
                OutputText("Invalid profile.");
                break;
            default:
                OutputText("Unknown failure.");
                break;
        }
    }
} 
```

[如何修剪视频文件（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh868176.aspx)

也可以对旧版 Windows 进行[拼接](https://splicer.codeplex.com/)（使用[DirectShow.Net](http://directshownet.sourceforge.net/)）。

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:10:16.420

[libmp4v2](https://code.google.com/p/mp4v2/)为您提供了构建自己的东西的原语。我不知道有一个免费的现成解决方案可以做到这一点，尽管只要你在 I 帧边界上切割它会相对容易实现。

# python - `os.symlink` 与 `ln -s`

> ID：15580425
> 
> 赞同：51
> 
> 时间：2013-03-22T21:50:03.910
> 
> 标签：python, linux, bash, symlink

我需要为里面的 dir1 （文件或目录）的每个项目创建一个符号链接`dir2`。`dir2`已经存在并且不是符号链接。在 Bash 中，我可以通过以下方式轻松实现：

```
ln -s /home/guest/dir1/* /home/guest/dir2/ 
```

但是在python中使用`os.symlink`我得到一个错误：

```
>>> os.symlink('/home/guest/dir1/*', '/home/guest/dir2/')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OSError: [Errno 17] File exist 
```

我知道我可以使用`subprocess`和运行`ln`命令。我不想要那个解决方案。

我也知道使用`os.walk`or的解决方法`glob.glob`是可能的，但我想知道是否可以使用`os.symlink`.

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-22T21:52:58.540

[`os.symlink`](https://docs.python.org/3/library/os.html#os.symlink)创建单个符号链接。

`ln -s`创建多个符号链接（如果它的最后一个参数是一个目录，并且有多个源）。Python 等价物类似于：

```
dst = args[-1]
for src in args[:-1]:
    os.symlink(src, os.path.join(dst, os.path.dirname(src))) 
```

那么，当你这样做时它是如何工作的`ln -s /home/guest/dir1/* /home/guest/dir2/`呢？您的*shell*通过将通配符转换为多个参数来实现这一点。如果您只是使用通配符`exec`的命令，它会查找字面上命名为in`ln`的单个源，而不是该目录中的所有文件。`*``/home/guest/dir1/`

Python 等价物类似于（如果您不介意将两个级别混合在一起并忽略许多其他情况 - 波浪线、环境变量、命令替换等在 shell 中可能）：

```
dst = args[-1]
for srcglob in args[:-1]:
    for src in glob.glob(srcglob):
        os.symlink(src, os.path.join(dst, os.path.dirname(src))) 
```

你不能单独做到这`os.symlink`一点——它的任何一部分——因为它不会那样做。这就像说“我想做相当于`find . -name foo`使用`os.walk`而不过滤名称。” 或者，就此而言，我想做相当于`ln -s /home/guest/dir1/* /home/guest/dir2/`没有外壳为我服务的事情。”

正确的答案是使用`glob`, or `fnmatch`, or`os.listdir`加上一个正则表达式，或者任何你喜欢的。

不要*使用*`os.walk`，因为它会执行递归*文件*系统遍历，因此它甚至不接近 shell`*`扩展。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-22T21:52:51.497

`*`是一种外壳扩展模式，在您的情况下指定“所有以`/home/guest/dir1/`”开头的文件。

但是，将这种模式扩展到它匹配的文件是你的*shell 的角色。*不是`ln`命令的。

但`os.symlink`不是外壳，它是操作系统调用 - 因此，它不支持外壳扩展模式。您必须在脚本中完成这项工作。

为此，您可以使用`os.walk`或`os.listdir`。如另一个答案所示，适当的调用将取决于您想要做什么。（`os.walk`不等同于`*`）

* * *

说服自己：在终端中的 Unix 机器上运行此命令：`python -c "import sys; print sys.argv" *`. 您会看到进行匹配的是外壳。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-03T20:14:01.197

正如@abarnert 所建议的那样，它是识别`*`并用dir1 内的所有项目替换它的shell。因此我认为使用`os.listdir`是最好的选择：

```
for item in os.listdir('/home/guest/dir1'):
    os.symlink('/home/guest/dir1/' + item, '/home/guest/dir2/' + item) 
```

# android - TextView 中的可点击 URL

> ID：15580426
> 
> 赞同：0
> 
> 时间：2013-03-22T21:50:05.200
> 
> 标签：android, textview, linkify

我不知道如何使用`Linkify`我的 TextView。我目前正在尝试：

```
Linkify.addLinks(myTextView, Pattern.compile("^(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]"), "http://"); 
```

我将[这篇文章](https://stackoverflow.com/questions/163360/regular-expresion-to-match-urls-in-java)用于我的正则表达式，在[这里查看](http://gskinner.com/RegExr/)。

我是否遗漏了一些我必须做的事情才能在我的`TextView`可点击中拥有 URL？

本质上，我希望将`TextView`我的 URL 显示为可点击的链接并实际点击，就像 iOS`UITextView`能够通过更改`dataDetectorTypes`属性以匹配正确的`UIDataDetectorType`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:59:03.207

`android:autoLink="web"`在您的布局 XML 中使用以`TextView`处理`http`/ `https`。

如果您希望继续使用`Linkify`，请务必在 中设置文本之后执行此操作`TextView`，而不是之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T22:03:58.417

如果您想使用 Linkfy，则无需为 Web url 编写自己的正则表达式模式，只需使用

```
 Linkify.addLinks(text, Linkify.WEB_URLS); 
```

# ruby-on-rails - 使用回形针上传大文件时出现 JVM 错误

> ID：15580432
> 
> 赞同：0
> 
> 时间：2013-03-22T21:50:28.930
> 
> 标签：ruby-on-rails, tomcat, paperclip

我正在使用 rails 3 + 回形针来托管我的文件管理应用程序。

但是，回形针似乎无法处理大文件（> = 200 MB）

在开发环境中它给了我：

```
JVMDUMP006I Processing dump event "systhrow", detail "java/lang/OutOfMemoryError" - please wait.
JVMDUMP032I JVM requested Snap dump using '/home/ubuntu/upload/Snap.20130322.123321.12125.0001.trc' in response to an event
JVMDUMP010I Snap dump written to /home/ubuntu/upload/Snap.20130322.123321.12125.0001.trc
JVMDUMP032I JVM requested Heap dump using '/home/ubuntu/upload/heapdump.20130322.123321.12125.0002.phd' in response to an event
JVMDUMP010I Heap dump written to /home/ubuntu/uploadheapdump.20130322.123321.12125.0002.phd
JVMDUMP032I JVM requested Java dump using '/home/ubuntu/upload/javacore.20130322.123321.12125.0003.txt' in response to an event
JVMDUMP010I Java dump written to /home/ubuntu/upload/javacore.20130322.123321.12125.0003.txt
JVMDUMP013I Processed dump event "systhrow", detail "java/lang/OutOfMemoryError".
[2013-03-22 12:33:42] ERROR 
```

在生产环境中，我将此应用程序部署为**WAR**文件并上传到 tomcat 服务器，它没有给我任何错误，但上传的文件已损坏。

知道如何解决这个问题吗？

谢谢！

**更新**

我修改了一些 tomcat 连接器配置并得到了这个错误：

```
IOError (Disk quota exceeded): app/controllers/submissions_controller.rb:73:in `create' 
```

但我 100% 确定我有足够的空间使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:08:28.467

> *   某些平台可能已经破坏了构建系统没有检测到的 sendfile 支持，特别是如果二进制文件是在另一个机器上构建并移动到这样的机器上时，sendfile 支持被破坏了。
>     
>     
> *   在 Linux 上，当使用 IPv6 时，使用 sendfile 会触发某些网卡上的 TCP 校验和卸载错误。
>     
>     
> *   对于网络挂载的目录（例如 NFS 或 SMB），内核可能无法通过其自己的缓存来提供网络文件。

`useSendfile="false"`在 Tomcat 连接器中添加`server.xml`

```
<Connector  ...
       useSendfile="false"
/> 
```

要检查的其他配置

1.  体面的内存分配和超时

    ```
    JAVA_OPTS="-server -Xms256m -Xmx1024m -XX:MaxPermSize=128m -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000" 
    ```

2.  Tomcat 连接器选项

> **maxPostSize**（104857600 == 100 兆字节，默认值 = 2 兆字节）
> 
> 将由容器 FORM URL 参数解析处理的 POST 的最大大小（以字节为单位）。可以通过将此属性设置为小于或等于 0 的值来禁用该功能。如果未指定，则此属性设置为 2097152（2 兆字节）。要检查的另外两个配置是超时限制和 maxFileSizeLimit
> 
> **disableUploadTimeout**（确保其未设置为 false）
> 
> 此标志允许 servlet 容器在执行 servlet 时使用不同的、更长的连接超时，这最终允许 servlet 更长的时间来完成其执行，或者在数据上传期间更长的超时。如果未指定，则此属性设置为“true”。
> 
> **maxHttpHeaderSize**（尝试加倍）
> 
> 请求和响应 HTTP 标头的最大大小，以字节为单位。如果未指定，则此属性设置为 4096 (4 KB)

# php - 一对多数据库输出 - 多个循环或查询？

> ID：15580438
> 
> 赞同：1
> 
> 时间：2013-03-22T21:50:55.443
> 
> 标签：php, mysql, loops

我有两个 MySQL 表。表“dbt1”具有主键“UID”的唯一记录。

表“dbt2”使用该键，但每个 UID 有多个记录。

使用 PHP 和正确的 MySQL 查询，我如何从 dbt1 中获取记录，然后通过 dbt2 查找具有相同 UID 的所有记录，然后连续打印这些记录直到完成。然后，返回并从 dbt1 打印下一条记录，直到满足 where 子句？

这是我到目前为止所拥有的：

询问：

```
$dbname = 'ext'; 
$dbt1 = 'questions';
$dbt2 = 'stats';
$data = "questions.UID qUID, QUESTION, ANSWER_A, ANSWER_B, ANSWER_C, ANSWER_D, FIGURE, CCAstats.UID sUID, DATE, PROP, CRPBI";    

$mysql_link = mysql_connect($dbhost,$dbuser,$dbpass);
$sql = ("SELECT $data FROM $dbt1 LEFT JOIN $dbt2 ON $dbt1.UID = $dbt2.UID WHERE $dbt1.SECTION = $section ORDER BY $dbt1.UID;");
$results = mysql_db_query($dbname,$sql) or die("no results");

if ($results)
{
    while($row = mysql_fetch_assoc($results))
{
        print "$row[qUID]"." "."$row[QUESTION]"."<br>";
        print "A. $row[ANSWER_A]"."<br>";
        print "B. $row[ANSWER_B]"."<br>";
        print "C. $row[ANSWER_C]"."<br>";
        print "D. $row[ANSWER_D]"."<br>";
        print "$row[FIGURE]"."<br>";
        print "$row[DATE]".", "."$row[PROP]".", "."$row[CRPBI]"."<br>";
     }

     mysql_free_result($results);
 }
 mysql_close(); 
```

这可以根据主题输出所有结果（作为 POST 变量传递），如果 $dbt1 中的任何给定记录在 $dbt2 中有多个记录，则重复输出。

问题是，我不希望来自 $dbt1 的重复输出。我希望为 $dbt1 中的所有记录返回一个条目，以及 $dbt2 中与 $dbt1 中的 UID 相关的尽可能多的记录。说得通？

因此，输出将类似于：

```
UID QUESTION 1
A. ANSWER A
B. ANSWER B
C. ANSWER C
D. ANSWER D
DATE, PROP, CRPBI
DATE{2}, PROP{2}, CRPBI{2}

UID QUESTION 2
A. ANSWER A
B. ANSWER B
C. ANSWER C
D. ANSWER D
DATE, PROP, CRPBI
DATE{2}, PROP{2}, CRPBI{2} 
```

我的问题是，我是否需要另一个循环来从 $dbt2 获取所有结果，或者我可以在查询中做些什么？我需要第二个查询吗？对于任何给定的 UID，我需要为每个 $dbt1 记录报告所有 $dbt2 条目。我觉得我什至不能正确地问这个问题......对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:00:27.520

您没有查询问题。您正在正确查询（据我所知）。你有一个**显示**问题。本质上你需要给你循环一些内存，创建一个简单的状态机：

```
$prev_dbt1 = null;
while($row = mysql_fetch($result)) {
   if ($prev_dbt1 <> $row['dbt1']) {
       ... display new table header ...
       $prev_dbt1 = $row['dbt1']; // update for next loop
   }
   display other stuff as usual
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:24:09.713

这就是我想出的。它有效，但我不确定它的效率如何。幸运的是，我的桌子很小。

```
$query1 = "SELECT * FROM $dbt1 WHERE $dbt1.SECTION = $section ORDER BY $dbt1.UID";
$query1Result = mysql_db_query($dbname,$query1) or die("no query");

while ($row = mysql_fetch_assoc($query1Result)) 
{
    echo $row['UID']." ".$row['QUESTION']."\n";
    echo $row['ANSWER_A']."\n";
    echo $row['ANSWER_B']."\n";
    echo $row['ANSWER_C']."\n";
    echo $row['ANSWER_D']."\n";
    echo $row['FIGURE']."\n";
    $query2 = "SELECT * FROM $dbt2 WHERE $row[UID] = $dbt2.UID ORDER BY $dbt2.DATE";
    $query2Result = mysql_db_query($dbname,$query2) or die("no query2");
    while ($stat = mysql_fetch_assoc($query2Result))
    {
        echo $stat['DATE']."\n";
        echo $stat['PROP']."\n";
        echo $stat['CRPBI']."\n\n";
    }

} 
```

# php - LIMIT 过高时 PHP 的 PDO 查询不执行？

> ID：15580440
> 
> 赞同：5
> 
> 时间：2013-03-22T21:51:44.367
> 
> 标签：php, mysql, pdo

我有一个最奇怪的 PHP PDO 问题，希望你们能帮我解决。

如果我设置`$checkLimit`为 50000，则查询工作正常。但是，如果我将其设置为 50k 以上的任何值，它不会返回任何结果 - 也不会投射任何错误消息（我已经使用`$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING)`.

```
$sql = "
   SELECT d_domain_name AS domainName, d_domain_id AS domainID
   FROM domains
   ORDER BY d_domain_name_length ASC, d_domain_name ASC
   LIMIT :checkLimit
";
$stmt = $db->prepare($sql);
$stmt->bindValue(':checkLimit', intval($checkLimit), PDO::PARAM_INT);
$stmt->execute();
$results = $stmt->fetchAll();
foreach ($results as $result) {
 // 50k moments of magic
} 
```

如果我在 PHP 之外运行查询，它可以使用任何限制（甚至 500k，大约需要 3 分钟）。

我尝试更改`$results = $stmt->fetchAll()`为`while ($result = $stmt->fetch()) {}`以尝试节省内存，但不幸的是，这并没有做任何事情。

谁能告诉我我在这里做错了什么？我错过了什么？为什么我不能超过50k？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T05:07:05.080

参考： http: [//php.net/manual/en/mysqlinfo.concepts.buffering.php](http://php.net/manual/en/mysqlinfo.concepts.buffering.php)

PDO 默认使用“缓冲查询”。

> 这意味着查询结果会立即从 MySQL 服务器传输到 PHP，然后保存在 PHP 进程的内存中。.... 缓冲模式的缺点是较大的结果集可能需要相当多的内存。……
> 
> 遵循这些特征缓冲查询应该用于您只期望有限的结果集或需要在读取所有行之前知道返回行的数量的情况。当您期望更大的结果时，应使用无缓冲模式。

50k 是一个很大的结果集。您可以尝试**让 pdo 使用无缓冲模式**并**一次获取一行**吗？这是从参考中复制的示例。第二行设置无缓冲模式。

```
<?php
$pdo = new PDO("mysql:host=localhost;dbname=world", 'my_user', 'my_pass');
$pdo->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, false);

$uresult = $pdo->query("SELECT Name FROM City");
if ($uresult) {
   while ($row = $uresult->fetch(PDO::FETCH_ASSOC)) {
       echo $row['Name'] . PHP_EOL;
   }
}
?> 
```

# c# - 固定排序列表/数据结构

> ID：15580441
> 
> 赞同：0
> 
> 时间：2013-03-22T21:51:47.160
> 
> 标签：c#, .net

我正在写一些东西来记录跨对象的各种方法的性能。我想找到前 10 个最慢的时间。因此，我想要一个固定的排序列表，例如在我的案例 10 中。所以每当我有一个新的时间时，我只需插入它并对其进行排序。它将被修复，所以在我插入第 5 次之后（假设它在下面的示例中限制为 5）然后列表不会增长，但它只会将其插入列表中，并删除最小值。

例如

```
var topTen = new XXX<double>(5);

XXX.Insert(1);
XXX.Insert(3);
XXX.Insert(2);
XXX.Insert(6);
XXX.Insert(4);
XXX.Insert(5);

/*
topTen[0] is 6
topTen[1] is 5
topTen[2] is 4
topTen[3] is 3
topTen[4] is 2
*/ 
```

我打算为它写一些东西，但我只是想知道.net 中是否已经存在任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:57:51.013

通常，您对堆执行类似的操作。例如：

```
var heap = new BinaryHeap<int>();

for (int i = 0; i < 1000; ++i)
{
    var time = GetTimeSomehow();
    if (heap.Count < 5)
    {
        heap.Insert(time);
    }
    else if (time > heap.Peek())
    {
        // the new value is larger than the smallest value on the heap.
        // remove the smallest value and add this one.
        heap.RemoveRoot();
        heap.Insert(time);
    }
} 
```

这将大小限制为 5，完成后，您可以按顺序获得前 5 名：

```
while (heap.Count > 0)
{
    var time = heap.RemoveRoot();
    Console.WriteLine(time);
} 
```

.NET Framework 中没有可用的堆数据结构。不久前我发表了一篇简单的文章。请参阅[通用 BinaryHeap 类](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=789)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:09:21.287

试试这个（未经测试）：

int listLength = 5;

```
List<int> list = new List<int>(listLength+1);

void VerifyTime(int time) {
  list[listLength] = time;
  var i = listLength;
  while (listLength>0  &&  list[listLength] < list[listLength-1])
    swap(list, listLength, listLength-1);
}

void swap (List<int> l, int a, int b) {
  var temp = l[a];
  l[a] = l[b];
  l[b] = temp;
} 
```

对于 ListLength 的任何小值，它应该可以正常工作。

# asp.net - 如何安全地获取正在运行的 ASP.NET 站点的域名

> ID：15580444
> 
> 赞同：4
> 
> 时间：2013-03-22T21:51:55.930
> 
> 标签：asp.net, security, http, iis

我遇到了一些在 HTTP 事务中欺骗 Host 值的问题。为了关闭与这些类型的攻击相关的安全漏洞，我需要安全地检测正在运行的 ASP.NET 站点的域。不幸的是，[我找到的所有参考资料都](https://stackoverflow.com/questions/1638669/how-to-get-host-header-from-httpcontext-asp-net)建议您使用`Request.ServerVariables["HTTP_HOST"]`or `Request.Url.Host`。通过提交无效的 HTTP 数据包，我能够设置无效的主机值并观察它们在两个函数调用中导致的行为。我看到的行为因我使用的 .NET 环境类型而异。

在 IIS 6 中，无论我是直接在 MVC 控制器操作中访问请求，还是在需要我通过`HttpContext.Current.Request`.

在 Visual Studio 2012 ASP.Net 开发服务器中，我只看到我们通过 NuGet 包部署到项目的库代码中的注入值。在 NuGet 包中，我必须使用，`HttpContext.Current`因为代码在 Web 应用程序范围之外运行。当我停留在 Web 应用程序的命名空间范围内时，即使我必须调用`HttpContext.Current`，它也会提供正确的非欺骗值。

对于所有这些测试，我一直在使用 ASP.NET 4.0。这种行为在 ASP.NET 4.5 和 IIS 8 中是否发生了变化？有没有办法安全地获取域名？也可以[对 PHP 进行相同的攻击](http://shiflett.org/blog/2006/mar/server-name-versus-http-host)，但是[Apache 有一种方法可以防止这些类型的攻击](https://stackoverflow.com/questions/2297403/http-host-vs-server-name/2297421#2297421)。IIS？

我遇到问题的代码示例：

```
string siteName1 = HttpContext.Current.Request.ServerVariables["HTTP_HOST"];
string siteName2 = HttpContext.Current.Request.Url.Host; 
```

无效 HTTP 数据包示例：

```
GET:  https://sampledomain.com/Items/Index
Host: fakedomain
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cache-Control: max-age=0 
```

我已经使用 Firefox 扩展[Live HTTP 标头](http://livehttpheaders.mozdev.org/)完成了我的测试，这使我能够快速记录和重播我对 Web 服务器的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:46:14.040

在 IIS 中，您可以设置站点的绑定，以便它只获取与特定主机标头值匹配的请求。

这样，如果有人试图欺骗主机标头值，您的网站甚至不会看到该请求。

不完全是您问题的答案，但可能是您问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:27:55.790

不清楚您所说的“安全”是什么意思，但 Host 标头的全部意义在于允许浏览器指定它打算与之交谈的主机。

[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)`Request-URI`对and标头有一些话要说`Host`：

> 为了允许`absoluteURI`在 HTTP 的未来版本中的所有请求中转换为 s，所有 HTTP/1.1 服务器必须接受`absoluteURI` 请求中的表单，即使 HTTP/1.1 客户端只会在对代理的请求中生成它们。

> ...

> 最常见的形式`Request-URI`是用于标识源服务器或网关上的资源。在这种情况下，URI 的绝对路径必须作为 传输（参见第 3.2.1 节`abs_path`）`Request-URI`，并且 URI（授权）的网络位置必须在`Host`标头字段中传输。

> ...

> 1.  如果`Request-URI`是`absoluteURI`，则主机是 的一部分 `Request-URI`。请求中的任何`Host`头域值都必须被忽略。

> ...

> 该`Host`字段值必须代表原始 URL 给出的源服务器或网关的命名权限。这允许源服务器或网关区分内部不明确的 URL，例如单个 IP 地址上的多个主机名的服务器的根“/” URL。

> ...

> 客户端必须`Host`在所有 HTTP/1.1 请求消息中包含一个标头字段。如果请求的 URI 不包括被请求服务的 Internet 主机名，则`Host`头字段必须为空值。

> ...

> 客户端和服务器支持请求标头、如果HTTP/1.1 请求中缺少请求标头（第 14.23 节）`Host`报告错误以及接受绝对 URI（第 5.1.2 节）是定义的最重要更改之一`Host` 通过本规范。

> ...

> *   客户端和服务器都必须支持`Host`请求头。

*   发送 HTTP/1.1 请求的客户端必须发送`Host`标头。
*   如果 HTTP/1.1 请求不包含`Host`请求标头，服务器必须报告 400（错误请求）错误。
*   服务器必须接受绝对 URI。

总之，虽然符合标准的 HTTP 客户端无法发送请求

```
GET https://example.com/ HTTP/1.1
Host: fakedomain.invalid 
```

对于原始服务器，HTTP/1.1 服务器**需要**接受它，`example.com`用作主机，并“忽略”`Host`标头。`Request.Url.Host`绝对应该是`example.com`；如果不是，那是 IIS 中的错误。我不太确定`Request.ServerVariables["HTTP_HOST"]`，但对“忽略”主机头的合理解释是将其重写为`example.com`.

（顺便说一句，我刚刚测试过的另外两台服务器也不遵循规范：Apache 2.4.3 假定对 an 的请求`absoluteURI`必须是对代理的请求，并在此基础上拒绝它，而 lighttpd 1.4.28 允许`GET http://example.com/ HTTP/1.1`没有一个`Host`标题。）

# android - 我的 SDK 管理器没有运行.. 我的操作系统是 windows 8 64 位

> ID：15580445
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:51:58.897
> 
> 标签：android

[2013-03-23 02:30:46 - SDK 管理器] [SDK 管理器] 错误：无法访问 jarfile lib\archquery.jar [2013-03-23 02:30:47 - SDK 管理器] [SDK 管理器] 无效路径 [2013-03-23 02:30:47 - SDK 管理器] [SDK 管理器] 访问被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:10:34.153

设置PATH环境变量。

右键myComputer->属性->高级系统设置->环境变量

然后在系统变量下，添加一个新变量。

变量 JAVA_PATH
值 C:\Program Files\Java\jdk1.7.0

选择编辑和这个 %JAVA_PATH%\bin; 前

# android - Android NDK GL ES 2.0 渲染到纹理（通过帧缓冲区）导致图像模糊/低分辨率

> ID：15580446
> 
> 赞同：2
> 
> 时间：2013-03-22T21:52:06.023
> 
> 标签：android, android-ndk, opengl-es-2.0, galaxy, texture2d

编辑：想通了，请参阅下面的答案。

我在尝试在三星 Galaxy S 上的 Android (NDK) 上渲染到 OpenGL ES 2.0 中的纹理时遇到问题

更具体地说，我使用帧缓冲区渲染到纹理，然后从该纹理绘制到后缓冲区 - 在模拟器（运行 4.2.2）和 Galaxy S2 上它完美渲染，同样适用于在数字上运行具有相同代码的 iOS 设备。

Galaxy S 正在运行 2.3.3（我无法说服模拟器在 2.3.3 中执行此操作）。

当我将纹理大小设置为 1024x1024 时，它看起来好像仍然存储在 512x512 纹理中，或者好像正在进行一些重度压缩，这仅发生在 Galaxy S、S2、模拟器和 iOS 设备上完美无缺。

如果我将纹理设置为 512x512，它似乎在 Galaxy S 上渲染得相当不错，没有什么明显的错误，但你会注意到一些相同的模糊，只是程度要小得多

1024x1024 截图

![1024x1024截图](../Images/3d612abe22c4e7ca7cbfb7cf3b4cfd45.png)

屏幕截图 og 512x512

![屏幕截图 og 512x512](../Images/ff63ec6a16c001b5f2e388b14a685c38.png)

在这两个图像上，上面的 4 个项目首先绘制到纹理，然后从那里绘制到后缓冲区（黑色的缺陷也是 Galaxy S 唯一的问题，但我不认为它相关）

我可以加载一个 1024x1024 纹理并从中渲染就好了，如果我在纹理的渲染缓冲区上使用 glReadPixels 它看起来也很好（不幸的是，GL ES 不支持直接从底层纹理读取像素）

![以 1024x1024 保存的帧缓冲区](../Images/ba7b9d67249fb3013e5b188615336216.png)

您可能会注意到，即使是 512x512 版本的轻量级，它也不会出现任何模糊。

为了进一步让我感到困惑，我有一个运行 OpenGL ES 1.1 的 Java 旧项目，它在同一个 Galaxy S 设备上渲染为 1024x1024 纹理而没有任何问题，我还没有绝望到用 Java 编写一个完整的 ES 2.0 渲染看看是否有所作为，我还没有尝试使用 NDK 的 ES 1.1，因为帧缓冲区的 OES 扩展方法会创建链接器错误（可能有一个可以链接的库，如果没有人有更好的想法，我可能会去那里）

然而，我尝试在 java 中创建帧缓冲区和纹理并将句柄传递给本机代码，但这没有区别。

任何指针，猜测，预感，谷歌的神奇关键字，任何事情都非常感谢我今天连续花了 12 个小时试图弄清楚这一点，但我没有取得任何进展，我快要绝望了。

以下是可能相关的代码片段，不要犹豫要求更多（此时整个项目有数千行跨越 3 个平台，所以我尝试选择最相关的部分。）

创建帧缓冲区的代码：

```
glGenFramebuffers(1, &FFrameBufferID);
glBindFramebuffer(GL_FRAMEBUFFER, FFrameBufferID);
glGenRenderbuffers(1, &FDepthBufferID);
glBindRenderbuffer(GL_RENDERBUFFER, FDepthBufferID);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, width, height);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, FDepthBufferID);

glGenTextures(1, &FTextureID);
glBindTexture(GL_TEXTURE_2D, FTextureID);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
//Tried both with and without:
//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, FTextureID, 0);

GLenum OStatus = glCheckFramebufferStatus(GL_FRAMEBUFFER);
if (OStatus != GL_FRAMEBUFFER_COMPLETE) {
    Dev::Log(SGString("framebuffer creation failed: ") + (int) OStatus);
} 
```

顶点着色器：

```
void main(void) {
    gl_Position = Projection * vec4(Position, 1.0);
    TextureCoordsOut = TextureCoords;
    ParamOut = Param;
    ColorOut = Color;
} 
```

投影矩阵：

```
matrix[0]  = 2.0 / (right - left);
matrix[1]  = 0.0;
matrix[2]  = 0.0;
matrix[3] = 0.0;

matrix[4]  = 0.0;
matrix[5]  = 2.0 / (top - bottom);
matrix[6]  = 0.0;
matrix[7] = 0.0;

matrix[8]  = 0.0;
matrix[9]  = 0.0;
matrix[10]  = -2.0 / (far - near);
matrix[11] = 0.0;

matrix[12]  = -(right + left) / (right - left);
matrix[13]  = -(top + bottom) / (top - bottom);
matrix[14] = -(far + near) / (far - near);
matrix[15] = 1.0; 
```

渲染：

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_BLEND);
glEnable(GL_DEPTH_TEST);

glVertexAttribPointer(FPositionSlot, 3, GL_FLOAT, GL_FALSE, sizeof(SGVertex), OVertextBuffer->Buffer());
glVertexAttribPointer(FTextureCoordsSlot, 2, GL_FLOAT, GL_FALSE, sizeof(SGVertex), OVertextBuffer->Buffer() + (sizeof(float) * 3));
glVertexAttribPointer(FParamSlot, 1, GL_FLOAT, GL_FALSE, sizeof(SGVertex), OVertextBuffer->Buffer()+ (sizeof(float) * 5));
glVertexAttribPointer(FColorSlot, 4, GL_FLOAT, GL_FALSE, sizeof(SGVertex), OVertextBuffer->Buffer()+ (sizeof(float) * 6));

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, OTexture->TextureID());
glUniform1i(FTextureUniform, 0);

glDrawArrays(GL_TRIANGLES, 0, count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:48:14.373

我偶然发现了一个提示我找到答案的小提示，问题是我只是从样本中复制的纹理坐标的精度：

```
varying lowp vec2 TextureCoordsOut; 
```

不知道 lowp 是什么意思，我只是忽略了它-大错误-我将其更改为

```
varying highp vec2 TextureCoordsOut; 
```

现在它可以完美运行，为什么它可以在所有其他设备上运行，尽管`lowp`我无法理解

它也可能`mediump`会起作用，但我想我只是去`highp`测试它。

# c# - 如何在属性上生成所有带有 Pascal Case 表示法的实体框架类？

> ID：15580448
> 
> 赞同：5
> 
> 时间：2013-03-22T21:52:09.203
> 
> 标签：c#, entity-framework

我有一个 Oracle 数据库，它的列以下列方式命名：CREATED_BY、EMPLOYEE_FIRST_NAME、

生成我的实体框架类时，我希望列的关联属性看起来像：CreatedBy、EmployeeFirstName 等...

有没有办法不必手动编辑每个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-05T19:54:37.047

大约 2 周前，我的任务是摆脱 Linq Connect 作为我们的数据提供者，将 EF 用于我们的 ORM 操作。好吧，众所周知，当微软和甲骨文参与进来时，事情从来都不是一件容易的事，因为它们不能很好地合作。精明的开发人员需要为 Pascal 大小写和复数找到解决方案，以便从 Oracle 数据库生成的实体符合我们的标准。我们不希望带有下划线的表名出现在我们的模型上。经过一番思考和开发，最终得出了一个好的解决方案。最终结果是操作 EDMX 文件，然后运行 ​​T4 模板以使奇迹发生。我们的最终结果将所有实体及其属性转换为 Pascal 套管。它还将所有存储函数转换为 Pascal 大小写。集合的导航属性也都是多元化的。以下是要遵循的步骤和代码片段。希望这对编码社区中的某些人有所帮助，您可以随时通过 Twitter 上的 seafarer_007 与我联系，提供有用的意见或建议。这里是： 1\. 使用 EF 数据模型项生成 EDMX。我在 Visual Studio 2012 中使用了 EF 5.0。 2\. 编写一个控制台应用程序来操作 EDMX 和设计器文件。我在 App Config 中添加了对两者的引用。3\. 应该就是这样，您将拥有 Pascal 大小写和复数实体。您可以随时根据自己的需要调整 Pascal 案例方法。4\. 我在 Visual Studio 2012 和 EF 5.0 上测试了代码。5\. 警告：仅适用于没有点的单字命名空间，基本上你不能为模型使用 OrgName.DeptName.Namespace，它只会处理 OrgName，但是，

控制台应用程序代码如下：

静态无效主要（字符串[] args）{

```
 string pathFile = string.Empty;
        string designFile = string.Empty;

        //EDMX File location
        if (ConfigurationManager.AppSettings["EDMX"] != null)
        {
            pathFile = ConfigurationManager.AppSettings["EDMX"].ToString();
        }

        //Designer location for EF 5.0
        if (ConfigurationManager.AppSettings["EDMXDiagram"] != null)
        {
            designFile = ConfigurationManager.AppSettings["EDMXDiagram"].ToString();
        }

        XDocument xdoc = XDocument.Load(pathFile);

        const string CSDLNamespace = "http://schemas.microsoft.com/ado/2009/11/edm";
        const string MSLNamespace = "http://schemas.microsoft.com/ado/2009/11/mapping/cs";

        XElement csdl = xdoc.Descendants(XName.Get("Schema", CSDLNamespace)).First();
        XElement msl = xdoc.Descendants(XName.Get("Mapping", MSLNamespace)).First();

        #region CSDL
        foreach (var entitySet in csdl.Element(XName.Get("EntityContainer", CSDLNamespace)).Elements(XName.Get("EntitySet", CSDLNamespace)))
        {
            entitySet.Attribute("Name").Value = PascalCase(entitySet.Attribute("Name").Value);
            entitySet.Attribute("EntityType").Value = PascalCase(entitySet.Attribute("EntityType").Value);
        }
        foreach (var associationSet in csdl.Element(XName.Get("EntityContainer", CSDLNamespace)).Elements(XName.Get("AssociationSet", CSDLNamespace)))
        {
            foreach (var end in associationSet.Elements(XName.Get("End", CSDLNamespace)))
            {
                end.Attribute("EntitySet").Value = PascalCase(end.Attribute("EntitySet").Value);
            }
        }

        foreach (var funtionSet in csdl.Element(XName.Get("EntityContainer", CSDLNamespace)).Elements(XName.Get("FunctionImport", CSDLNamespace)))
        {

            funtionSet.Attribute("Name").Value = PascalCase(funtionSet.Attribute("Name").Value);

        }

        foreach (var entityType in csdl.Elements(XName.Get("EntityType", CSDLNamespace)))
        {
            entityType.Attribute("Name").Value = PascalCase(entityType.Attribute("Name").Value);

            foreach (var key in entityType.Elements(XName.Get("Key", CSDLNamespace)))
            {
                foreach (var propertyRef in key.Elements(XName.Get("PropertyRef", CSDLNamespace)))
                {
                    propertyRef.Attribute("Name").Value = PascalCase(propertyRef.Attribute("Name").Value);
                }
            }

            foreach (var property in entityType.Elements(XName.Get("Property", CSDLNamespace)))
            {
                property.Attribute("Name").Value = PascalCase(property.Attribute("Name").Value);
            }

            foreach (var navigationProperty in entityType.Elements(XName.Get("NavigationProperty", CSDLNamespace)))
            {
                navigationProperty.Attribute("Name").Value = PascalCase(navigationProperty.Attribute("Name").Value, true, true); 
            }

        }
        foreach (var association in csdl.Elements(XName.Get("Association", CSDLNamespace)))
        {
            foreach (var end in association.Elements(XName.Get("End", CSDLNamespace)))
            {
                end.Attribute("Type").Value = PascalCase(end.Attribute("Type").Value);
            }               

            foreach(var refs in association.Elements(XName.Get("ReferentialConstraint", CSDLNamespace)))
            {

                foreach (var pri in refs.Elements(XName.Get("Principal", CSDLNamespace)))
                {

                    foreach (var proref in pri.Elements(XName.Get("PropertyRef", CSDLNamespace)))
                    {

                        proref.Attribute("Name").Value = PascalCase(proref.Attribute("Name").Value);
                    }

                }

                foreach (var pri in refs.Elements(XName.Get("Dependent", CSDLNamespace)))
                {

                    foreach (var proref in pri.Elements(XName.Get("PropertyRef", CSDLNamespace)))
                    {

                        proref.Attribute("Name").Value = PascalCase(proref.Attribute("Name").Value);
                    }

                }

            }

        }
        #endregion

        #region MSL

        foreach (var entitySetMapping in msl.Element(XName.Get("EntityContainerMapping", MSLNamespace)).Elements(XName.Get("EntitySetMapping", MSLNamespace)))
        {
            entitySetMapping.Attribute("Name").Value = PascalCase(entitySetMapping.Attribute("Name").Value);

            foreach (var entityTypeMapping in entitySetMapping.Elements(XName.Get("EntityTypeMapping", MSLNamespace)))
            {
                entityTypeMapping.Attribute("TypeName").Value = PascalCase(entityTypeMapping.Attribute("TypeName").Value);
                foreach
                (var scalarProperty in
                (entityTypeMapping.Element(XName.Get("MappingFragment", MSLNamespace))).Elements(XName.Get("ScalarProperty", MSLNamespace))
                )
                {
                    scalarProperty.Attribute("Name").Value = PascalCase(scalarProperty.Attribute("Name").Value);
                }

            }
        }
        foreach (var associationSetMapping in msl.Element(XName.Get("EntityContainerMapping", MSLNamespace)).Elements(XName.Get("AssociationSetMapping", MSLNamespace)))
        {
            foreach (var endProperty in associationSetMapping.Elements(XName.Get("EndProperty", MSLNamespace)))
            {
                foreach (var scalarProperty in endProperty.Elements(XName.Get("ScalarProperty", MSLNamespace)))
                {
                    scalarProperty.Attribute("Name").Value = PascalCase(scalarProperty.Attribute("Name").Value);
                }
            }
        }

        foreach (var functionSetMapping in msl.Element(XName.Get("EntityContainerMapping", MSLNamespace)).Elements(XName.Get("FunctionImportMapping", MSLNamespace)))
        {
            functionSetMapping.Attribute("FunctionImportName").Value = PascalCase(functionSetMapping.Attribute("FunctionImportName").Value);
        }
        #endregion

        xdoc.Save(pathFile);

        XmlDocument designXml = new XmlDocument();

        designXml.Load(designFile);      

        XmlNamespaceManager dsMan = new XmlNamespaceManager(designXml.NameTable);
        dsMan.AddNamespace("edmx", "http://schemas.microsoft.com/ado/2009/11/edmx");
        dsMan.AddNamespace("d", "http://schemas.microsoft.com/ado/2009/11/edmx");

        #region Designer

        XmlNodeList entitySet1 = designXml.DocumentElement.SelectNodes("//d:Diagrams", dsMan);

        foreach (XmlNode xn in entitySet1)
        {

            foreach (XmlElement xp in xn.ChildNodes)
            {

                foreach (XmlElement z in xp.ChildNodes)
                {

                    if (z.Attributes[0].Name == "EntityType")
                    {

                        z.Attributes[0].Value = PascalCase(z.Attributes[0].Value.ToString(), true);

                    }

                }

            }

        }

        designXml.Save(designFile);

        #endregion

    }

    #region Pluralization

    public static string Pluralize(string name)
    {

   return System.Data.Entity.Design.PluralizationServices.PluralizationService.CreateService(new CultureInfo("en-US")).Pluralize(name);
    }

    #endregion

    #region Pascal Casing

    public static string PascalCase(StructuralType type, bool sanitizeName = true)
    {
        if (type == null)
        {
            return null;
        }

        return PascalCase(type.Name, sanitizeName);
    }

    public static string PascalCase(EdmMember member, bool sanitizeName = true)
    {
        if (member == null)
        {
            return null;
        }

        return PascalCase(member.Name, sanitizeName);
    }

    public static string PascalCase(string name, bool sanitizeName = true, bool pluralize = false)
    {

       // if pascal case exists
       // exit function

        Regex rgx = new Regex(@"^[A-Z][a-z]+(?:[A-Z][a-z]+)*$");

        string pascalTest = name;

        if (name.Contains("."))
        {
            string[] test  = new string[]{};
            test = name.Split('.');

            if(rgx.IsMatch(test[1].ToString()))
            {
                return name;
            }

        }
        else
        {

            if (rgx.IsMatch(name))
            {
                return name;
            }

        }

        //Check for dot notations in namespace

        bool contains = false;
        string[] temp = new string[] { };
        var namespc = string.Empty;

        if (name.Contains("."))
        {
            contains = true;
            temp = name.Split('.');
            namespc = temp[0];

        }

        if (contains)
        {
            name = temp[1];
        }

        name = name.ToLowerInvariant();

        string result = name;
        bool upperCase = false;

        result = string.Empty;
        for (int i = 0; i < name.Length; i++)
        {
            if (name[i] == ' ' || name[i] == '_')
            {
                upperCase = true;
            }
            else
            {
                if (i == 0 || upperCase)
                {
                    result += name[i].ToString().ToUpperInvariant();
                    upperCase = false;
                }
                else
                {
                    result += name[i];
                }
            }
        }

        if (contains)
        {

            result = namespc.ToString() + "." + result;

        }

        if (pluralize)
        {
            result = Pluralize(result);
        }

        return result;
    }
    #endregion 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T23:28:09.547

它实际上可能根本与 C# 代码无关。如果您使用的是 Oracle，那么我假设它是 ModelFirst 或 DatabaseFirst 方法。在这种情况下，代码是基于 CSDL 生成的。如果转换属性名称，则内容将中断，因为 EF 将无法找到与 CSDL 中的属性名称对应的类型和属性。除此之外，一旦重新生成代码（例如，您保存模型），您将丢失所有更改。您需要做的是相应地更改 CSDL（EDMX 的概念部分）和 MSL（EDMX 的映射部分）中的属性名称。因此，您实际上正在查看处理 Xml。如果您熟悉这些技术，我认为使用 Xslt 或 Linq to Xml 可以相对轻松地完成。如果您正确执行此操作，代码生成器/T4 模板应该使用您提供的名称生成代码。或者，您可以手动更改 EF 设计器中的名称，但这将是很多工作。

# git - 以相反的顺序显示 gitk 日志

> ID：15580450
> 
> 赞同：1
> 
> 时间：2013-03-22T21:52:15.167
> 
> 标签：gitk, gitk, gitk, gitk, git, gitk

**有什么方法可以反转[gitk](/questions/tagged/gitk "显示标记为“gitk”的问题")中显示的可视提交日志视图的顺序？**

我说的是视觉表示，它以**[gitk](/questions/tagged/gitk "显示标记为“gitk”的问题")**的颜色呈现为树视图；即，当你在终端中运行这样的东西时，你得到的 GUI 版本：

```
git log --graph --online --abbrev-commit 
```

我查看了 and 下的菜单`Edit` `Preferences`，`View` `New view...`但找不到与提交顺序有关的任何内容。

`--reverse`我知道我可以通过添加标志在终端中以相反的顺序显示提交日志：

```
git log --reverse --oneline --abbrev-commit
# Displays list correctly 
```

但它似乎与`--graph`旗帜不太协调：

```
git log --reverse --oneline --abbrev-commit --graph
# fatal: cannot combine --reverse with --graph 
```

也许这就是为什么[gitk](/questions/tagged/gitk "显示标记为“gitk”的问题")没有给我们提供反向渲染视图的选项的原因。

无论如何，我想知道：**在[gitk](/questions/tagged/gitk "显示标记为“gitk”的问题")中是否可以反转提交日志视图的顺序**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:03:57.947

`gitk`大多接受与`git rev-list`( [git: Is there a command line option for "Sort by date" for gitk?](https://stackoverflow.com/questions/8187767/git-is-there-a-command-line-option-for-sort-by-date) ) 相同的参数。但是`--reverse`，将按降序显示提交的参数被[特别排除在外](https://git.kernel.org/cgit/git/git.git/tree/gitk-git/gitk#n202)：

```
"--objects" - "--objects-edge" - "--reverse"
    # These cause our parsing of git log's output to fail, or else
    # they're options we want to set ourselves, so ignore them. 
```

（在[ee66e089c](https://git.kernel.org/cgit/git/git.git/commit?id=ee66e089c1d4162765a3cec79fd5406e515b0db1)中添加。）

将其注释掉并运行`gitk --reverse` *似乎*可行，但我不确定上游是否会接受它作为补丁。

# python - Python。修改未知深度字典中的值

> ID：15580454
> 
> 赞同：0
> 
> 时间：2013-03-22T21:52:41.410
> 
> 标签：python, dictionary

假设我有一个看起来像这样的列表，但深度和复杂性可能会有所不同：

```
inc = {'root': 10, 
    'values': {
         'left': {8: {
             'left': {
                 6: {
                    'left': 5, 
                    'right': 11}
                  }, 
             'right': {
                  10: {
                     'left': 2, 
                     'right': 11}
               }}}, 
         'right' : {
                  12: {
                     'left': 5, 
                     'right': 20}
                  }}} 
```

我需要做的是遍历它，找到最左边的值和最左边的值（即通过访问字典的“左”元素达到的值）并交换它们。递归遍历字典以查找值不是问题。问题是在我确定需要更改的内容之后找到必要的值。

用于迭代的函数：

```
leftmost = 0
lowest = 0

def walk_dict(d):
    global leftmost, lowest

    for k,v in sorted(d.items()):
        if isinstance(v, dict):
            walk_dict(v)
        else:
            if k == 'left':
                if leftmost == 0:
                    leftmost = v
                if v < lowest:
                    lowest = v 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:46:27.333

与其直接保存值，不如让字典保存它们，这样您就可以在最后交换值，例如：

```
[in the loop]
  if k == 'left':
    if not leftmost:
      leftmost = d
    if v < lowest['left']:
      lowest = d

# swap
lefmost['left'], lowest['left'] = lowest['left'], lefmost['left'] 
```

Also I'm not sure about your definition of *leftmost*, but if it means the least deep key that equals to "left", your code is wrong as it simply grabs the first value found during the depth-first traversal. To overcome the problem you could keep the current depth and compare it as well to determine if the leftmost value should be overwritten.

# xml - web.xml / faces-config.xml 配置问题

> ID：15580455
> 
> 赞同：1
> 
> 时间：2013-03-22T21:52:41.720
> 
> 标签：xml, xml-parsing, jboss7.x, web.xml, faces-config

在使用 MyFaces 制作 Web 应用程序的某个时刻，我的 faces-config.xml 和 web.xml 开始发生冲突，但似乎在我做出任何更改之后很久。我一直在尝试不同的罐子和不同的配置，但无法正确安装任何东西。尽管我觉得我已经尝试了所有方法（解决方案除外），但这是代码的一个实例：

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"> 
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

faces-config.xml 简介：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0"> 
```

我收到了这个错误：

```
SEVERE [org.apache.commons.digester.Digester] (MSC service thread 1-2) Parse Error at line 2 column 14: 
Document is invalid: no grammar found.: org.xml.sax.SAXParseException: Document is invalid: no grammar found.
at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:196)
at org.apache.xerces.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:132)
at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:390)
at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:322)
at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:281)
at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:136)
at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(XMLNSDocumentScannerImpl.java:733)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1754)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:324)
at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:845)
at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:768)
at org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:108)
at org.apache.xerces.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1196)
at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:555)
at org.apache.commons.digester.Digester.parse(Digester.java:1745) [commons-digester-1.8.jar:]
at org.apache.myfaces.config.impl.digester.DigesterFacesConfigUnmarshallerImpl.getFacesConfig(DigesterFacesConfigUnmarshallerImpl.java:197) [myfaces-impl-1.1.8.jar:] 
```

并且：

```
 SEVERE [org.apache.commons.digester.Digester] (MSC service thread 1-2) Parse Error at line 2 column 14: 
Document root element "faces-config", must match DOCTYPE root "null".: org.xml.sax.SAXParseException: Document root element "faces-config", must match DOCTYPE root "null".
at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:196) 
```

我疯了为什么这不起作用。为什么很明显，我错过了它？还是这些文件不存在问题所以我应该尝试更改我的罐子？我正在使用 JBOSS 7 进行部署。谢谢！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:53:28.667

我根本没有使用 MyFaces 的经验，但是通过查看我在网上看到的其他一些帖子（并且因为您在初始 XML 的开头有一些空格），我会确保没有任何隐藏XML 文档中可能导致问题的字符或多余的空格。

此外，我可能会查看 faces-config.xml 的根元素中的值是否正确。具体来说，我会检查您的 xsi:schemaLocation 属性的值。我不太熟悉特定 XML 解析器的工作原理，但从您的异常情况来看，它可能正在尝试使用提供的 URL 验证架构并失败。看起来您指定了两个 URL，这可能不是有效的标记。第二个 URL 实际上确实解析为有效的 XSD 定义文件。尝试将其限制为那个 URL，看看是否有任何改变。

希望有帮助！

EDIT: Turns out I may have been misinformed. The xsi:schemaLocation element can have two values separated by a space. The second needs to be a valid schema file. I would check that they are in fact properly spaced. It looks like from your answer they may be, but it's worth a check.

# restructuredtext - 忽略第一个文字块中的换行符

> ID：15580456
> 
> 赞同：5
> 
> 时间：2013-03-22T21:52:49.527
> 
> 标签：restructuredtext

我有一段文本，我想放在第一个[文字块](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#literal-blocks)中，但我也想将文档中超过 70 个字符的长行分成多行。有没有办法在文字块中分解文本，以便在我的编辑器中每行的长度保持在 70 个字符以下，但从文档的编译版本中保留这些换行符？

# javascript - 防止zombie.js 只加载外部资源

> ID：15580460
> 
> 赞同：5
> 
> 时间：2013-03-22T21:53:06.577
> 
> 标签：javascript, testing, express, zombie.js

我在测试期间使用zombie.js 从本地快速服务器加载页面。不幸的是，有一个脚本元素调用了 Google Analytics。如果可能的话，我想（优雅地）阻止这个外部脚本，而不阻止其他（本地）脚本加载。

我知道`{ runScripts : false }`调用`browser.visit()`. 但是，它拒绝加载页面上的任何和所有脚本，而不仅仅是那些生活在其他主机上的脚本。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-03T17:42:17.697

从[僵尸 3.1](https://github.com/assaf/zombie/blob/9fb0d3fa98d35f45024c76e2e856238e1c005aa5/CHANGELOG.md#version-310-2015-03-15)开始，该`browser.resources.mock`方法就消失了。另一种方法是使用[`nock`](https://github.com/pgte/nock)库：

```
var nock = require('nock')

nock('http://www.google-analytics.com')
  .get('/analytics.js')
  .times(Math.Infinity)
  .reply(200, '{}')

var Browser = require('zombie')
var browser = new Browser() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-30T18:12:42.290

您应该使用[资源](https://github.com/assaf/zombie/blob/master/src/zombie/resources.coffee)对象。

如果您不希望请求实际通过，您可以设置某些请求以给出特定响应。您将执行以下操作以使 google 分析返回一个空文档：

```
browser.resources.mock('http://google.com/url/to/analytics.js',{}); 
```

请注意，您必须提供要模拟的确切 URL，无法模拟部分 URL，例如域名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T05:00:32.220

也许这样的东西对你有用？它循环遍历所有资源并“中止”应该忽略的资源。

```
const Fetch = require('zombie/lib/fetch');

const ignoredResources = [
  'google-analytics.com'
];

browser.pipeline.addHandler((browser, request) => {
  let doAbort = false;

  ignoredResources.forEach(domain => {
    if (request.url.includes(domain)) {
      doAbort = true;
    }
  });

  if (doAbort) {
    return new Fetch.Response('', { status: 200 });
  }
}); 
```

# javascript - IntersectObjects 不返回结果

> ID：15580461
> 
> 赞同：0
> 
> 时间：2013-03-22T21:53:08.223
> 
> 标签：javascript, three.js, webgl

我正在尝试确定光线是否与 three.js 中的对象相交

我的场景设置和显示很好。

我点击我创建的球体，如下所示：

```
var intersect_objects = [];

//Initialize scene and object and events

scene = new THREE.Scene();
group = new THREE.Object3D();
sphere = new THREE.SphereGeometry(23.8, 60, 60);

//Add meshes and textures etc..

intersect_objects.push(group);

function onDocumentMouseUp(event) {

    event.preventDefault();

    var mouseX = (event.clientX / window.innerWidth)*2-1;
    var mouseY = -(event.clientY /window.innerHeight)*2+1;

    var vector = new THREE.Vector3(mouseX, mouseY, 0.5);
    projector.unprojectVector(vector, camera);

    var ray = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize());

    var intersects = ray.intersectObjects(intersect_objects);

    console.log(intersects.length); //Aways 0

} 
```

但 intersects.length 始终为 0。它肯定与球体相交吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:22:48.360

交叉口代码看起来不错；您确定“组”已添加到“场景”并且“球体”已正确添加到“组”吗？如果不查看其余代码，就不可能确定错误可能是什么。请考虑创建一个包含完整代码的 jsfiddle。

此外，也许尝试使用 ray.intersectObjects(scene.children) 进行测试，看看是否有任何东西会记录碰撞。

# ios - 视频保存方向错误 AVCaptureSession

> ID：15580462
> 
> 赞同：16
> 
> 时间：2013-03-22T21:53:27.110
> 
> 标签：ios, objective-c, avcapturesession

我正在尝试录制视频（不显示相机）并保存。但是正在保存的视频没有以正确的方向保存。我尝试强制 UIViewController 成为某个方向，但这没有帮助。所有视频都是纵向录制的。我的代码如下：

```
session = [[AVCaptureSession alloc] init];
[session beginConfiguration];
session.sessionPreset = AVCaptureSessionPresetHigh;

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
for (AVCaptureDevice *cam in [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo])
{
    if (cam.position == AVCaptureDevicePositionFront)
        device = cam;
}

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}

AVCaptureDevice *audioDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
AVCaptureDeviceInput * audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioDevice error:nil];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];

NSString *outputpathofmovie = [[documentsDirectoryPath stringByAppendingPathComponent:@"RecordedVideo"] stringByAppendingString:@".mp4"];
outputURL = [[NSURL alloc] initFileURLWithPath:outputpathofmovie];

[self deleteTempVideos];

[session addInput:input];
[session addInput:audioInput];
[session commitConfiguration];
[session startRunning];

movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];
NSLog(@"%@", movieFileOutput.connections);

AVCaptureConnection *videoConnection = nil;

for ( AVCaptureConnection *connection in [movieFileOutput connections] )
{
    NSLog(@"%@", connection);
    for ( AVCaptureInputPort *port in [connection inputPorts] )
    {
        NSLog(@"%@", port);
        if ( [[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
        }
    }
}

if([videoConnection isVideoOrientationSupported]) // **Here it is, its always false**
{
    [videoConnection setVideoOrientation:[[UIDevice currentDevice] orientation]];
}

NSLog(@"%@", videoConnection);

[session addOutput:movieFileOutput];
[movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T22:47:05.333

事实证明，在将连接的方向添加到会话后，您必须将其添加到 AVCaptureMovieFileOutput。

```
session = [[AVCaptureSession alloc] init];
[session beginConfiguration];
session.sessionPreset = AVCaptureSessionPresetHigh;

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
for (AVCaptureDevice *cam in [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo])
{
    if (cam.position == AVCaptureDevicePositionFront)
        device = cam;
}

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}

AVCaptureDevice *audioDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
AVCaptureDeviceInput * audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioDevice error:nil];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];

NSString *outputpathofmovie = [[documentsDirectoryPath stringByAppendingPathComponent:@"RecordedVideo"] stringByAppendingString:@".mp4"];
outputURL = [[NSURL alloc] initFileURLWithPath:outputpathofmovie];

[self deleteTempVideos];

[session addInput:input];
[session addInput:audioInput];
[session commitConfiguration];
[session startRunning];

movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];
[session addOutput:movieFileOutput];

AVCaptureConnection *videoConnection = nil;

for ( AVCaptureConnection *connection in [movieFileOutput connections] )
{
    NSLog(@"%@", connection);
    for ( AVCaptureInputPort *port in [connection inputPorts] )
    {
        NSLog(@"%@", port);
        if ( [[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
        }
    }
}

if([videoConnection isVideoOrientationSupported]) // **Here it is, its always false**
{
    [videoConnection setVideoOrientation:[[UIDevice currentDevice] orientation]];
}

[movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-26T10:45:53.520

**

## 尝试在开始录制之前更改其方向。

**

```
 if let videoConnection = fileOutput.connection(with: .video) {

    let newOrientation: AVCaptureVideoOrientation
    switch UIDevice.current.orientation {
    case .portrait:
        newOrientation = .portrait
    case .portraitUpsideDown:
        newOrientation = .portraitUpsideDown
    case .landscapeLeft:
        newOrientation = .landscapeRight
    case .landscapeRight:
        newOrientation = .landscapeLeft
    default :
        newOrientation = .portrait
    }
    videoConnection.videoOrientation = newOrientation
    self.fileOutput.startRecording(to: URL(fileURLWithPath: filePath), recordingDelegate: self)
} 
```

**其中**,

```
var fileOutput : AVCaptureMovieFileOutput! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T22:02:25.840

尝试这样的事情：

```
#import <AVFoundation/AVFoundation.h>

AVCaptureConnection *captureConnection = <#A capture connection#>;
if ([captureConnection isVideoOrientationSupported])
{
    AVCaptureVideoOrientation orientation = AVCaptureVideoOrientationLandscapeLeft;
    [captureConnection setVideoOrientation:orientation];
} 
```

[http://developer.apple.com/library/ios/#qa/qa1744/_index.html#//apple_ref/doc/uid/DTS40011134](http://developer.apple.com/library/ios/#qa/qa1744/_index.html#//apple_ref/doc/uid/DTS40011134)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T11:07:35.333

谢谢 Destiny Dawn，以防有人在寻找 Xamarin ios 的代码：

```
AVCaptureConnection videoConnection = null;

foreach(AVCaptureConnection connection in _videoOutput.Connections)
{
    foreach ( AVCaptureInputPort port in connection.InputPorts)
    {
        if (port.MediaType == AVMediaType.Video)
        {
            videoConnection = connection;
            break;
        }
    }
}

if (videoConnection != null) {
    if (videoConnection.SupportsVideoOrientation) {
        videoConnection.VideoOrientation = AVCaptureVideoOrientation.LandscapeRight;
    }
} 
```

# eclipse - 将 GitHub 项目签出到 Eclipse

> ID：15580466
> 
> 赞同：2
> 
> 时间：2013-03-22T21:53:45.187
> 
> 标签：eclipse, github, egit, mylyn, vcs-checkout

我需要在我的 Eclipse Workspace 上签出托管在 GitHub 上的现有项目。我有项目 URL，并且我已经安装了 Egit 和 Mylyn。但我不知道下一步是什么。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:38:39.620

如果您已经拥有 mylyn 和 egit，那么您可能还想安装[github 连接器](http://www.vogella.com/articles/EGit/article.html#github_mylyn)。之后，您可以直接导入一个 github 存储库，只需提供名称（参见链接的第二个屏幕截图）。

# c - strcmp 无法正确比较字符串

> ID：15580469
> 
> 赞同：-2
> 
> 时间：2013-03-22T21:53:53.050
> 
> 标签：c, libc, strcmp

我`strcmp`在 C中使用时遇到问题。

我正在尝试使用比较程序的参数，`strcmp`但即使字符串相同，它也不起作用。这是代码的一部分。

```
while(strcmp(argv[i], "-e") != 0) 
```

所以对于 i = 11 如果我打印`argv[i]`我得到的值

```
printf("String %s i %d", argv[i],i);

>> String -e i 11 
```

但时间还在继续。任何想法为什么会发生这种情况？

代码：

```
while(strcmp(argv[i], "-e") != 0 || i != argc)
{
    printf("String %s i %d", argv[i],i);
    if(!isdigit((unsigned char)*argv[i]) && strcmp(argv[i], "-t") != 0)
    {
        archivo = fopen(argv[i] , "r");
        TOT_IMG = TOT_IMG + 1;
        for(t=0;t<NUM_FUNC_TRAZO;t++)
        {
            for(d=0;d<NUM_FUNC_DIAMETRICA;d++)
            {
                for(c=0;c<NUM_FUNC_CIRCO;c++)
                {
                    if (fscanf(archivo, "%s",el) != EOF)
                    {
                        par->vector_circo[t][d][c] = strtod(el,NULL);
                        par->clase = clase;
                    }
                    else
                    {
                        break;
                    }
                }
            }
        }
        par_temp = par;
        par->siguiente = (parametros_lista) malloc(sizeof(parametros_elem));
        par = par->siguiente;
        par->anterior = par_temp;
    }
    else
    {
        if(strcmp(argv[i], "-t") != 0)
        {
            clase = atoi(argv[i]);
            CLASES = CLASES + 1;
        }
    }
    i = i + 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:06:47.077

让我们看看这个：

```
while(strcmp(argv[i], "-e") != 0 || i != argc) 
```

好的，所以让我们假设在“e”时`strcmp`正确返回。我们会假设这是因为在您的库实现中*极*不可能存在错误。`0``argv[i]`*`strcmp`*

 *如果`strcmp`返回 0 会发生什么？好吧，事情不仅会停止，您的代码还会检查是否`i != argc`为真。是吗？我的通灵调试技能告诉我，你应该研究`while`.

您可能还需要注意，您的代码可能会访问`argv[argc]`，即`NULL`. `strcmp`如果输入为 lenient 时，您可能会很幸运`NULL`，但这是您应该修复的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:56:14.683

我宁愿推荐你使用[getopt (3)](http://linux.die.net/man/3/getopt)。这是一种广泛使用的符合 POSIX 的参数解析方法。

还有另一个与`getopt.h`在 windows 上实现接口有关的问题：[getopt.h: Compiling UNIX C-Code in Windows](https://stackoverflow.com/questions/10404448/getopt-h-compiling-unix-c-code-in-windows)。重要的是它得到了回答（Xgetopt），所以便携性不应该是一个案例。*

# java - 在Java中将csv行转换为JSON对象

> ID：15580474
> 
> 赞同：4
> 
> 时间：2013-03-22T21:54:31.630
> 
> 标签：java, json, csv, jackson

我有一个类似的 csv 文件

```
"name.firstName","name.givenName","name.DisplayName","phone.type","phone.value"
"john","maverick","John Maverick","mobile","123-123-123"
"jim","lasher","Jim Lasher","mobile","123-123-123" 
```

我想将第二行和第三行转换为 JSON 对象。使用第一行作为标题。所以结果将是

```
[
{  
"name": {
    "firstName": "john",
    "givenName": "maverick",
    "DisplayName": "John Maverick"
},
"phone": {
    "type": "mobile",
    "value": "123-123-123"
}
},
{
"name": {
    "firstName": "john",
    "givenName": "maverick",
    "DisplayName": "John Maverick"
},
"phone": {
    "type": "mobile",
    "value": "123-123-123"
}
] 
```

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:03:04.260

这是一个可以帮助您的 Java 库。[http://www.jonathanhfisher.co.uk/playpen/csv2json/index.htm](http://www.jonathanhfisher.co.uk/playpen/csv2json/index.htm)

这是一个 JavaScript 库，它可能对你有用，也可能没用。[http://www.cparker15.com/code/utilities/csv-to-json/](http://www.cparker15.com/code/utilities/csv-to-json/)

最后，这是一个可能有用的过去答案。我喜欢 OpenCSV 解决方案。但是，您可以使用 Jackson 来代替 JAXB。[在 Java 中将 CSV 文件转换为 JSON 对象](https://stackoverflow.com/questions/9524191/converting-an-csv-file-to-a-json-object-in-java)

# python - Flask SecureCookie 用 json 替换 pickle 会导致编码错误

> ID：15580476
> 
> 赞同：6
> 
> 时间：2013-03-22T21:54:39.347
> 
> 标签：python, session, flask, werkzeug

以下是 werkzeug 对会话序列化的建议：

> 默认实现使用 Pickle，因为这是创建此模块时标准库中唯一可用的模块。如果您有 simplejson 可用，强烈建议创建一个子类并替换序列化方法：

当我按照下面的 Flask 实现执行此操作时：

[https://gist.github.com/runfalk/2501926](https://gist.github.com/runfalk/2501926)

或者

```
from werkzeug.contrib.securecookie import SecureCookie
Secure_Cookie.serialization_method = json 
```

> UnicodeDecodeError：“utf8”编解码器无法解码位置 0 的字节 0x97：无效的起始字节

当我尝试登录时会发生这种情况。

我已经深入研究了 json 编码器源并尝试设置`ensure_ascii=False`，这让我克服了上面的错误，但后来我根本无法登录应用程序。它只会闪烁屏幕而没有错误，我仍然停留在登录提示符下。用泡菜一切正常。

一个重要的侧面说明这个问题是集成独有的，`Flask-login` 并且不会发生在普通`flask`会话序列化中

ASKSBADQUESTIONS 的代码确实有效，但这会引发解码错误

```
import json

from flask import Flask, session
from flask.sessions import SecureCookieSession, SecureCookieSessionInterface
from flask.ext.login import LoginManager

class JSONSecureCookieSession(SecureCookieSession):
    serialization_method = json

class JSONSecureCookieSessionInterface(SecureCookieSessionInterface):
    session_class = JSONSecureCookieSession

app = Flask(__name__)
app.secret_key = "I-like-cookies-and-some-secure-cookies"
app.session_interface = JSONSecureCookieSessionInterface()

#Initialize Login Manager
login_manager = LoginManager()
login_manager.setup_app(app)

@app.route("/")
def hello():
    k = "lalala"

    v = session.get(k)

    if v is None:
        print "set"
        v = session[k] = "FLAAASK abuses decorators in a bad way :)"
    else:
        print "get"

    return "Hello {0}".format(v)

if __name__ == "__main__":
    app.run(debug=True) 
```

这是堆栈跟踪

```
Traceback (most recent call last):
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/flask/app.py", line 1362, in full_dispatch_request
    response = self.process_response(response)
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/flask/app.py", line 1566, in process_response
    self.save_session(ctx.session, response)
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/flask/app.py", line 804, in save_session
    return self.session_interface.save_session(self, session, response)
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/flask/sessions.py", line 205, in save_session
    secure=secure, domain=domain)
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/werkzeug/contrib/securecookie.py", line 329, in save_cookie
    data = self.serialize(session_expires or expires)
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/werkzeug/contrib/securecookie.py", line 235, in serialize
    self.quote(value)
  File "/usr/local/pythonbrew/venvs/Python-2.7.3/flask-session-bug/lib/python2.7/site-packages/werkzeug/contrib/securecookie.py", line 192, in quote
    value = cls.serialization_method.dumps(value)
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/json/encoder.py", line 195, in encode
    return encode_basestring_ascii(o)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x97 in position 0: invalid start byte
set 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:08:46.830

有一个方法`flask_login.py`被调用`_create_identifier`。此调用的结果是 md5`digest()`结果。根据文档，这可以包含非 ascii 字符和/或空字节。当交给`serialization_method`它时，它无法解码 unicode 字节。

这个错误肯定存在于 Flask 0.9 和 Flask-login 0.1.3 的组合中，可以通过猴子修补这个要点（[https://gist.github.com/anonymous/3731115](https://gist.github.com/anonymous/3731115)）到 flask_login.py 文件中来修复，或者你可以拉出最新的发展。

如果您需要更多信息 [https://github.com/maxcountryman/flask-login/pull/31 ，可以在他们的 github repo 上参考这个错误](https://github.com/maxcountryman/flask-login/pull/31)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:02:25.623

我快速编写了最小的 Flask 应用程序来重现您的错误（保存到`app.py`; 调用`python app.py`）：

```
import json

from flask import Flask, session
from flask.sessions import SecureCookieSession, SecureCookieSessionInterface

class JSONSecureCookieSession(SecureCookieSession):
    serialization_method = json

class JSONSecureCookieSessionInterface(SecureCookieSessionInterface):
    session_class = JSONSecureCookieSession

app = Flask(__name__)
app.secret_key = "I-like-cookies-and-some-secure-cookies"
app.session_interface = JSONSecureCookieSessionInterface()

@app.route("/")
def hello():
    k = "lalala"

    v = session.get(k)

    if v is None:
        print "set"
        v = session[k] = "FLAAASK abuses decorators in a bad way :)"
    else:
        print "get"

    return "Hello {0}".format(v)

if __name__ == "__main__":
    app.run(debug=True) 
```

但一切都很顺利。我什[`session_interface`](http://flask.pocoo.org/docs/api/#flask.Flask.session_interface)至几次从基于 Pickle 的更改为基于 JSON 的，并没有出现异常。也许您应该发布完整的异常回溯并（也许）在我的示例中添加一些代码以重现错误。

# forms - 所见即所得/PageDown 混合？

> ID：15580481
> 
> 赞同：1
> 
> 时间：2013-03-22T21:54:52.157
> 
> 标签：forms, web-applications, wysiwyg, markdown, pagedown

我喜欢在我的应用程序中使用 pagedown 来防止表单保存标记的想法，但我不喜欢让用户负担学习曲线的想法。我想要的是一个像 stackoverflow 的 pagedown 这样的编辑器——而不是提供一个输入框和一个框来查看结果——将 markdown 编辑和结果组合到同一个框中，就像一个所见即所得的编辑器。外面有这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T09:52:15.297

这是 stackoverflow 使用的 markdown 编辑器。

[ [https://code.google.com/p/pagedown/][1]](https://code.google.com/p/pagedown/][1])

我们以前用过它，它非常好。

# video.js - mp4 电影在 IE 中不显示

> ID：15580482
> 
> 赞同：0
> 
> 时间：2013-03-22T21:54:55.790
> 
> 标签：video.js

我正在使用 video.js 播放 mp4 视频文件。

它在 Chrome 和 Safari 中运行良好，但在 IE 中无法运行。这是示例页面的链接：

[http://www.shafan.co.il/gsPedia/Templates/Shafan/DisplayItem_NEW.asp?WordID=4485&Word=&CategoryID=143](http://www.shafan.co.il/gsPedia/Templates/Shafan/DisplayItem_NEW.asp?WordID=4485&Word=&CategoryID=143)

该页面是希伯来语的...对不起...但是您可以清楚地看到视频框在哪里...

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:04:50.470

查看 [http://videojs.com/]（第 92 行）上的源代码。他们的视频在 ie 中工作。我在 localhost 上玩了一点插件，遇到了同样的问题......尝试手动设置视频插件（通过在视频标签后运行 js 代码），就像他们在主页上所做的那样（第 99 行）。切。

# python - Python 嵌套列表分组

> ID：15580488
> 
> 赞同：0
> 
> 时间：2013-03-22T21:55:32.893
> 
> 标签：python, python-2.7

我有一个这种格式的嵌套列表：

finalValues = [ [x,123] , [x,23542] , [y,56] , [y,765] , [y,54] , [z,98] ]

我目前正在写入这样的文本文件（使用索引循环）：

```
outputFile.write("\n--------------------------------------------------")
outputFile.write("\nVariable: " + finalValues[index][0])
outputFile.write("\nNumber: " + finalValues[index][1])
outputFile.write("\n--------------------------------------------------")
outputFile.write("\n") 
```

对于这个特定示例，这意味着我将 6 个独特的输出打印到文本文件中。

将第二个值按第一个值分组的最简单方法是什么？所以我的输出将是（编辑---由于论坛格式化功能，我无法像我的输出一样完美地格式化它，但你可以得到一般的想法）：

```
'---------------------------------------------------- -

变量：x

数量：123

编号：23542

'---------------------------------------------------- -

'---------------------------------------------------- -

变量：y

数量：56

编号：765

数量：54

'---------------------------------------------------- -

'---------------------------------------------------- -

变量：z

数量：98

'---------------------------------------------------- -

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:06:35.103

一种方法是`itertools.groupby`使用 using对元素进行分组`operator.itemgetter`以获取您感兴趣的键值。列表需要首先按键排序。

```
import operator
import itertools
get_key = operator.itemgetter(0)
finalValues.sort(key = get_key)
for key, group in itertools.groupby(finalValues, get_key):
    outputFile.write("\n--------------------------------------------------")
    outputFile.write("\nVariable: " + key)
    for pair in group:
        outputFile.write("\nNumber: " + pair[1])
    outputFile.write("\n--------------------------------------------------")
outputFile.write("\n") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:47:04.247

充分利用这两个答案：

A`defaultdict`是一个字典，初始化值被赋予一个“默认”值（[此处](http://docs.python.org/2/library/collections.html?highlight=defaultdict#collections.defaultdict)的文档）。

```
import collections

finalValues = [ [x,123] , [x,23542] , [y,56] , [y,765] , [y,54] , [z,98] ]

# The dictionary will map each variable to a list of numbers
groupedValues = collections.defaultdict(list)
for variable, number in finalValues:
    groupedValues[variable].append(number)

# The next step is to print them out:
for variable, numbers in groupedValues.iteritems():
    outputFile.write("\n--------------------------------------------------")
    outputFile.write("\nVariable: %s" % variable)
    for number in numbers:
        outputFile.write("\nNumber: %s" % number)
    outputFile.write("\n--------------------------------------------------")
    outputFile.write("\n") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T22:24:09.367

最简单的方法是创建一个列表 defaultdict，然后使用子列表的第一个元素作为键迭代列表，并将第二个元素附加到默认列表。

获得列表后，只需遍历键（然后是其中的列表）即可打印数据。

```
import collections
finalValues = [ [x,123] , [x,23542] , [y,56] , [y,765] , [y,54] , [z,98] ]
d = collections.defaultdict(list)
for k in finalValues:
  d[k[0]].append(k[1]) 
```

d 在这种情况下将评估为

```
defaultdict(<type 'list'>, {'y': [56, 765, 54], 'x': [123, 23542], 'z': [98]}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:30:23.530

您可以使用字典来处理此问题：

```
output_dict = {}
for elt in finalValues:
    output_dict[elt[0]] = output_dict.get(elt[0], []) + [elt[1]]

for key in output_dict.keys():
    outputFile.write("\n--------------------------------------------------")
    outputFile.write("\nVariable: " + key

    for elt in output_dict[key]:
        outputFile.write("\nNumber: " + elt)

    outputFile.write("\n--------------------------------------------------")
    outputFile.write("\n") 
```

**编辑：**

再次查看您的问题，不清楚 x、y 和 z 是什么。

如果它们是字符串，那么字典方法应该可以正常工作。但是，如果它们是其他对象，那么您需要确保它们是不可变的（否则您不能将它们用作字典中的键）。

# python - 如何删除对象集中的重复项？

> ID：15580490
> 
> 赞同：5
> 
> 时间：2013-03-22T21:55:41.807
> 
> 标签：python

我有一组对象：

```
class Test(object):
    def __init__(self):
        self.i = random.randint(1,10)

res = set()

for i in range(0,1000):
    res.add(Test())

print len(res) = 1000 
```

如何从一组对象中删除重复项？

感谢您的回答，它的工作：

```
class Test(object):
    def __init__(self, i):
        self.i = i
    #   self.i = random.randint(1,10)
    #   self.j = random.randint(1,20)

    def __keys(self):
        t = ()
        for key in self.__dict__:
            t = t + (self.__dict__[key],)
        return t

    def __eq__(self, other):
        return isinstance(other, Test) and self.__keys() == other.__keys()

    def __hash__(self):
        return hash(self.__keys())

res = set()

res.add(Test(2))
...
res.add(Test(8)) 
```

结果：[2,8,3,4,5,6,7]

但是如何保存订单？设置不支持顺序。例如，我可以使用列表代替设置吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T21:57:58.190

您的对象必须是可*[散列的](http://docs.python.org/2/glossary.html#term-hashable)*（即必须具有[`__eq__()`](http://docs.python.org/2/reference/datamodel.html#object.__eq__)并[`__hash__()`](http://docs.python.org/2/reference/datamodel.html#object.__hash__)定义）才能使集合与它们正常工作：

```
class Test(object):
    def __init__(self):
        self.i = random.randint(1, 10)

    def __eq__(self, other):
        return self.i == other.i

    def __hash__(self):
        return self.i 
```

> 如果一个对象的哈希值在其生命周期内永远不会改变（它需要一个`__hash__()`方法），并且可以与其他对象进行比较（它需要一个`__eq__()`or`__cmp__()`方法），那么它就是可哈希的。比较相等的可散列对象必须具有相同的散列值。
> 
> 哈希性使对象可用作字典键和集合成员，因为这些数据结构在内部使用哈希值。

如果您有多个属性，请散列并比较其中的一个元组（谢谢，`delnan`）：

```
class Test(object):
    def __init__(self):
        self.i = random.randint(1, 10)
        self.k = random.randint(1, 10)
        self.j = random.randint(1, 10)

    def __eq__(self, other):
        return (self.i, self.k, self.j) == (other.i, other.k, other.j)

    def __hash__(self):
        return hash((self.i, self.k, self.j)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:17:51.717

Pavel Anossov 已经回答了您的第一个问题。

但是你还有一个问题：

> 但是如何保存订单？设置不支持顺序。例如，我可以使用列表代替设置吗？

您*可以*使用 a `list`，但有一些缺点：

*   你得到错误的界面。
*   您不会自动处理重复项。你必须明确写`if foo not in res: res.append(foo)`. 显然，您可以将其包装在一个函数中，而不是重复编写它，但这仍然是额外的工作。
*   如果集合变得很大，效率会大大降低。基本上，添加一个新元素、检查一个元素是否已经存在等等都将是 O(N) 而不是 O(1)。

你想要的是像有序的东西一样工作的东西`set`。或者，等效地，就像`list`不允许重复的那样。

如果您先进行所有添加，然后进行所有查找，并且不需要快速查找，则可以通过首先构建 a 来解决此问题`list`，然后使用`unique_everseen`from the [`itertools`recipes](http://docs.python.org/2/library/itertools.html#recipes)删除重复项。

或者您可以按顺序保留 a`set`和 a `list`or 元素（或到目前为止看到的 a `list`plus a元素）。`set`但这可能会有点复杂，所以你可能想把它包起来。

理想情况下，您希望将其封装在与`set`. `OrderedSet`类似的东西[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)。

幸运的是，如果您滚动到该文档页面的底部，您会看到您想要的内容已经存在；[`OrderedSet`](http://code.activestate.com/recipes/576694/)ActiveState上有一个食谱的链接。

因此，复制它，将其粘贴到您的代码中，然后更改`res = set()`为`res = OrderedSet()`，您就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:57:50.403

我认为你可以很容易地按照你在第一篇文章中询问的那样使用列表来做你想做的事情，因为你定义了**eq**运算符：

```
l = []
if Test(0) not in l : 
    l.append(Test(0)) 
```

我的 2 克拉...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T23:08:00.093

Pavel Anossov 的回答非常适合让您的类在具有您想要的语义的集合中使用。但是，如果您想保留项目的顺序，则需要更多。这是一个对列表进行重复数据删除的函数，只要列表项是可散列的：

```
def dedupe(lst):
    seen = set()
    results = []
    for item in lst:
        if item not in seen:
            seen.add(item)
            results.append(item)
    return results 
```

一个稍微惯用的版本是生成器，而不是返回列表的函数。这摆脱了`results`变量，使用`yield`而不是附加唯一值。我还将`lst`参数重命名为`iterable`，因为它在任何可迭代对象（例如另一个生成器）上都可以正常工作。

```
def dedupe(iterable):
    seen = set()
    for item in iterable:
        if item not in seen:
            seen.add(item)
            yield item 
```

# java - 处理ArrayList并通过引用传递

> ID：15580493
> 
> 赞同：0
> 
> 时间：2013-03-22T21:55:53.853
> 
> 标签：java, arraylist

我正在使用数组列表添加状态（8 谜题的棋盘状态）。我的问题是当我得到状态的孩子时，它会改变存储在我的数组列表中的值。我假设这是因为 ArrayList 只存储指向对象的指针而不是值本身。为了解决这个问题，我每次都在将它存储到 ArrayList 之前创建一个新对象，但我仍然遇到同样的问题。

感谢您的提示，我还将尝试更频繁地遵循命名约定。

```
 private ArrayList<int[][]>VisitedBoard; 

 if(RuleNumber ==2){
         //Here is my problem. This will change what is stored in VistedBoards
          NextState =  new State(FireRule.Rule2(WM.get_Board()));//Fire Rule

          for(int j=0;j<VisitedBoards.size();j++){
              //Meaning this will always be true
              if(Arrays.equals(VisitedBoards.get(j), NextState.get_Board())){
                  Loop =true; //Loop to previous state
              }
              if(j==VisitedBoards.size()-1 && Loop ==false){ //If the next state is not any previously visited
                  NotALoop =true;
                  VisitedBoards.add(NextState.get_Board());
                  WM.set_Board(NextState.get_Board());

              }
          }
      }

public int[][] Rule2(int [][] Board){//The FireRule Class
    Find_BlankLocation(Board);
    int temp; 
    State NewState;
    temp = Board[BlankLocation[0]-1][BlankLocation[1]];
    Board[BlankLocation[0]-1][BlankLocation[1]] = 0;
    Board[BlankLocation[0]][BlankLocation[1]] = temp;
    NewState = new State(Board);
    return Board;
}

public class State { //State class
private int[][] Board;
private int[][] Goal; 
private Boolean GoalFound;

public State(int[][] Start, int[][] goal){
    Board = Start;
    Goal = goal;
    GoalFound=false;
}
public State(int[][] NewState){
    Board=NewState;
}
public int[][] get_Goal(){
    return Goal;
}
public int[][] get_Board(){
    return Board;
}
public void set_Board(int[][] board){
    Board = board;
}
public Boolean get_GoalFound(){
    return GoalFound;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:26:51.930

类似容器`ArrayList`在所有语言中的工作方式都是一样的：它们被称为*数据结构*，因为它们组织对象的存储/检索。显然他们不存储对象本身的字段。

试图解释你的问题，也许你不想在和列表之间共享板子`visitedBoards`（`WM`不管它是什么意思......）。然后简单地实现`get_Board()`返回数组的副本而不是`Board`对象本身：

```
public int[][] get_Board(int[][] src) {
  int[][] dst = new int[src.length][src[0].length];
  for (int i = 0; i < src.length; i++) {
    System.arraycopy(src[i], 0, dst[i], 0, src[i].length);
  }
  return dst;return dst;
} 
```

除此之外，正如其他人已经告诉您的那样，您最好采用标准的 Java 命名约定，使用有意义的名称，并将您的`x`,`y`和`int[][]`实际应用程序类封装起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:25:22.020

每次创建 State 的新实例时，都将相同的数组传递给它（无论返回什么`WM.get_Board()`）。

然后，您在调用时将相同的数组添加到*VisitedBoards*`VisitedBoards.add()`。

您正在创建新的 State 对象这一事实是无关紧要的，因为只有 的返回值`NextState.get_Board()`被添加到列表中。

因此，*VisitedBoards*列表始终包含对完全相同数组的多个引用。

正如 Raffaele 所建议的那样，如果您确保`get_Board()`返回数组的副本而不是对原始数组的引用（假设这不会弄乱其他地方存在的逻辑），那么您会很好。

* * *

我从这个问题中学到的主要内容是遵循命名约定是多么重要。

你那标新立异的大写让我头晕目眩！

遵循这些规则将使其他人**更**容易理解您的 Java 代码：

*   类名应大写（即 PascalCase）
*   变量名应为小写（即 camelCase）
*   不要在方法名、类名或变量名中使用下划线（它们只能用于常量）
*   尽可能使用有意义的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:12:24.903

我的建议是为他们的二维数组创建自己的容器对象并实现深度复制。

例如：

```
package netbeans;

import java.util.Arrays;

public class Container
implements Cloneable
{
private int [] _data;
private int _sx;
private int _sy;

public int get(int x, int y)
{
    try { return this._data[y*this._sx+x]; }
    catch (Exception e) { throw new ArrayIndexOutOfBoundsException(); }
}

public void set(int x, int y, int value)
{
    try { this._data[y*this._sx+x] = value; }
    catch (Exception e) { throw new ArrayIndexOutOfBoundsException(); }
}

public Object Clone() { return new Container(this); }

public Container(int sizeX, int sizeY, int [] data)
{
    this._sx = sizeX;
    this._sy = sizeY;
    this._data = data;
}

public Container(Container cont)
{
    this._data = Arrays.copyOf(cont._data, cont._data.length);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:04:04.997

据推测，新`State`对象包含一个指向与以前相同的arrayList 的指针。您需要手动将阵列复制到一个新阵列（称为“深度克隆”或“深度复制”）。您可能会发现这很有用：[Deep cloning multidimensional arrays in Java...?](https://stackoverflow.com/questions/200387/deep-cloning-multidimensional-arrays-in-java)

# c# - 如何使用 InvokeRequired

> ID：15580494
> 
> 赞同：1
> 
> 时间：2013-03-22T21:55:57.617
> 
> 标签：c#, wpf, vb.net

我在 vb.net 中有下面的代码，我正在将其转换为 c#。 **编辑** 编辑了不相关的代码。

但我被困在`InvokeRequired`. 我添加了一个引用`System.Windows.Forms`，但代码完成仍然没有显示`InvokeRequired`。列表视图位于与我调用它的线程不同的线程上，我需要使用 Invoke 来解决这个问题。你能告诉我我错过了什么吗？谢谢你。

```
 Delegate Sub _AddClient(ByVal client As Socket)
    Private Sub AddClient(ByVal client As Socket)
        If InvokeRequired Then
            Invoke(New _AddClient(AddressOf AddClient), client)
            Exit Sub
        End If
        Dim lvi As New ListViewItem(client.LocalEndPoint.ToString)
        lvi.Tag = client
        lsvClients.Items.Add(lvi)
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:03:25.447

`System.Windows.Forms`伙计，如果您正在使用WPF `System.Windows.Forms.Control`，请删除所有对`System.Windows.Control`.

`InvokeRequired()`WPF 中不存在，由`Dispatcher.CheckAccess()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:25:20.503

试试这个：

```
Delegate Sub _AddClient(ByVal client As Socket)
Private Sub AddClient(ByVal client As Socket)
    If ListView1.InvokeRequired Then
        Invoke(New _AddClient(AddressOf AddClient), client)
        Exit Sub
    End If
    Dim lvi As New ListViewItem(client.LocalEndPoint.ToString)
    lvi.Tag = client
    ListView1.Items.Add(lvi)
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:15:47.637

这是如何使用它的示例：

```
protected void InvokePathDone(Task<IPath<ICoordsCanon>> task,
                              Action<Task<IPath<ICoordsCanon>>> action) {
  if (InvokeRequired)  Invoke(action, task);
  else                 action(task);
} 
```

**以下 OP 问题的更新：**

`InvokeRequired()`为 Control 类定义以启用来自事件委托的回调，以确定它们是否在 UI 线程上，从而确定它们是否必须在 Invoke() 下执行它们的操作。

# php - 即使使用 PHP 中的 empty() 函数值为空，复选框也会被选中

> ID：15580498
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:56:12.057
> 
> 标签：php, html, checkbox, simplexml

我写了这段代码：

```
 <?php if (!empty($isLocal)) {echo "checked";} ?> 
```

听起来很简单？如果 $isLocal 不为空，则检查它，否则不检查它。

然而，尽管值为空，它仍会继续检查它！这有什么问题？！

我不得不在页面上多次回显 isLocal 并且它保持不变 - 它仍然是空的，但复选框已选中。是的，我查看了 HTML 代码以查看是否没有写入“checked”，但实际上没有。它只在 PHP 逻辑中打印“已检查”。

HTML代码是这样的

```
Enable this machine:<input type="checkbox" value="1" name="isLocal" 
<?php if (!empty($isLocal)) {echo "checked";} ?>  /> 
```

还有一件事 - 我正在使用 simplexml 从 XML 文件加载 isLocal。

```
 $configurations = simplexml_load_file('configs.xml');

foreach ($configurations->xpath("/configurations") as $t)
{

$isLocal=$t->isLocal;   

 } 
```

但是你看，事情是它可以看到它是空的还是有值的。我不能使用“isset()”，因为它总是设置为空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:51:55.687

这样做：

```
<form action="checked.php" method="post">
<input type="checkbox" value="1" name="isLocal"/> Enable this machine
<input type="submit" name="formSubmit" value="Submit" />
</form>

<?php 
if (!empty($_POST['isLocal']))
{echo "checked";}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:21:57.730

刚刚了解到，输入“var_dump($isLocal)”表明它是一个对象，而不是简单的数据类型！

在加载 XML 对象后执行此操作：

```
$isLocal=(string)$t->isLocal; 
```

解决了这个问题。

# bash - Bash [[ 测试，引用变量

> ID：15580499
> 
> 赞同：5
> 
> 时间：2013-03-22T21:56:14.163
> 
> 标签：bash

我想决定是否*总是*省略 Bash`[[`测试中出现的变量的引号。我将`man`页面解释为可以在不损失任何正确性的情况下这样做。

* * *

我设计了这个简单的“测试”来验证我的想法和“预期的行为”，但它可能完全证明不了，看看它：

```
x='1 == 2 &&'; if [[ $x == '1 == 2 &&' ]]; then echo yes; else echo no; fi 
```

注意我不是这样写的：

```
x='1 == 2 &&'; if [[ "$x" == '1 == 2 &&' ]]; then echo yes; else echo no; fi 
```

到目前为止，这一直是我的风格，如果没有别的，那就是为了保持一致性。

* * *

将我的编码约定切换为*始终*省略`[[`测试中出现的变量的引号是否安全？

我正在尝试学习 Bash，并且正在努力培养良好的习惯、良好的风格和正确性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T22:57:55.373

要记住的关键是*模式匹配上下文*中的引号和转义总是会导致它们的内容变成文字。`==`从来没有必要在inside 的左侧引用`[[`，只有右侧被解释为模式。如果您想要文字匹配并避免解释变量中的模式元字符，则必须在右侧引用。

换句话说，`[ "$x" = "$x" ]`和`[[ $x == "$x" ]]`大多是等价的，当然在 Bash 中应该首选后者。

一个快速提示：认为复合命令的*运算符*在`[[ ]]`语法上与其他*控制运算符*相同，例如`elif`, `do`, `;;`, and `;;&`（尽管在技术上在手册中它们属于自己的类别）。它们实际上是复合命令部分的分隔符，这就是它们如何实现看似神奇的特性，例如短路扩展的能力。这应该有助于澄清 的许多行为`[[`，以及为什么它不同于例如算术运算符，它们不是那样的。

更多示例： http: [//mywiki.wooledge.org/BashFAQ/031#Theory](http://mywiki.wooledge.org/BashFAQ/031#Theory)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T22:37:31.110

不，你不应该养成总是省略引号的习惯，即使它们出现在`[[`测试中。Bash 因不引用引号而燃烧人们而闻名:-)

在 bash 中，`[[ ]]`应该始终评估*为表达式，*因此脚本将继续运行。风险在于逻辑错误可能会在不经意间弹出。在我能想到的所有情况下，这都很好。但是，引号可以让您具体说明您想要什么，并且除了更安全之外还可以自我记录。

考虑这个表达式：

`if [[ "$INT" =~ ^-?[0-9]+$ ]]; then`

它仍然可以在没有引号的情况下工作，因为它介于两者之间`[[ ]]`，但引号是澄清的并且不会引起任何问题。

无论如何，这是我作为一个在 Bash 手上接受了皇家软管的人的看法，因为我没有`" "`解决需要他们的东西:'(

我的 bash 黑客朋友曾经说过，“在 Bash 中自由地使用引号”。这个建议对我很有帮助。

# arrays - 如果用户选择的项目少于 3 个，如何将其设为 if 语句？

> ID：15580502
> 
> 赞同：0
> 
> 时间：2013-03-22T21:56:28.187
> 
> 标签：arrays, if-statement, listbox

```
 private void CheckoutButton_Click(object sender, RoutedEventArgs e)
    {

      string[] chkItems = listBox1.SelectedItems.OfType<string>().ToArray();
      textBlock1.Text = chkItems[0] + Environment.NewLine + chkItems[1] + Environment.NewLine + chkItems[2] +
          Environment.NewLine;

    } 
```

我正在创建的应用程序中有这段代码。我有一个显示一些选项的列表框，它们最多可以选择 3 个项目，但是如果他们不选择 3 个项目，我的应用程序会一直崩溃。有没有办法让它成为一个 if 语句，以便他们可以选择 1、2 甚至 3 个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:00:36.703

您可以`foreach`循环执行

```
 string[] chkItems = listBox1.SelectedItems.OfType<string>().ToArray();

    textBlock1.Text=string.Empty;
    foreach(string item in chkItems)
    {
      textBlock1.Text=textBlock1.Text + item +Environment.NewLine;
    } 
```

# jquery - 我可以在另一个 Flash 对象上放置一个 Flash 对象吗？

> ID：15580503
> 
> 赞同：0
> 
> 时间：2013-03-22T21:56:29.883
> 
> 标签：jquery, html, flash, actionscript, adobe

我想知道是否可以在 youtube 视频上放置一个人的相机视频？现在，YouTube 视频每次都放在我的相机上。

这是我的代码：

```
<script type="text/javascript">

        var params = {wmode:"transparent", bgcolor:"#0fb5df"};
        swfobject.embedSWF("camera.swf", "camera", "460", "385", "10.0","expressInstall.swf",,params);
    </script>

<div class="frame-holder" style="position;relative; z-index:0; ">
                                <div id="camera"  style="position:absolute; left:0px; top:0px; z-index:500;  ">
                                </div>
                                <div   style="position:absolute; left:0px; top:0px; z-index:300;">
                                    <iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/test&wmode=transparent" allowfullscreen frameborder="0">
</iframe>

                            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:26:39.260

您的 wmode=transparent 未正确传递到 youtube 网址，请使用：

[http://www.youtube.com/embed/test?wmode=transparent](http://www.youtube.com/embed/test?wmode=transparent)

解释： '？' 是url和参数列表的分隔符，'&'用来分隔参数，像这样：[http ://www.test.com/test.php?param1=value1¶m2=value2](http://www.test.com/test.php?param1=value1&param2=value2)

更新：

您表示“&”是一个错字，我做了更多研究并发现了您的问题。

您面临的问题是模板 div 的样式属性被 swfobject.embedSWF() 调用的样式替换。（因为整个 div 被删除并被新的对象标签替换）

所以添加例如：

```
var attributes = {style: "z-index: 500; position: absolute; left: 0; top: 0"}; 
```

并将您的电话更改为：

```
swfobject.embedSWF("demo.swf", "camera", "460", "385", "10.0", "expressInstall.swf", {}, params, attributes); 
```

这样，样式属性（包括 z-index）将在对象标签上正确设置。

另一种解决方案可能是在容器 div 周围包裹一个额外的 div 并在那里设置你的 style 属性。

# python - NLTK 词性标注器是使用全局信息还是仅使用被标注的词？

> ID：15580509
> 
> 赞同：2
> 
> 时间：2013-03-22T21:57:17.190
> 
> 标签：python, nlp, nltk

我目前正在使用 NLTK 的“nltk.pos_tag”进行一些词性标注。我想知道 NLTK 的标记器是否使用当前标记的单词之外的信息来确定单词的 POS？

如果没有，NLTK 是否有一个标记器可以做到这一点？

在此先感谢您的任何信息！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T23:02:38.233

该`pos_tag`函数调用加载`pickle`at `_POS_TAGGER`。[这是一个可能在Penn Treebank](http://www.cis.upenn.edu/~treebank/) POS 注释文本上训练的最大熵标注器。MaxEnt 标注器用于确定词性的信息将基于训练中使用的特征集。这意味着，它在技术上只能使用单个单词的特征，但这不太可能，因为标注器会不准确（并且它不会充分利用使用机器学习来生成标注器）。[考虑使用 Python 进行自然语言处理的第 5 章中](http://nltk.googlecode.com/svn/trunk/doc/book/ch05.html)给出的示例，

```
>>> text = nltk.word_tokenize("They refuse to permit us to obtain the refuse permit")
>>> nltk.pos_tag(text)
[('They', 'PRP'), ('refuse', 'VBP'), ('to', 'TO'), ('permit', 'VB'), ('us', 'PRP'),
('to', 'TO'), ('obtain', 'VB'), ('the', 'DT'), ('refuse', 'NN'), ('permit', 'NN')] 
```

由于“拒绝”和“允许”根据上下文分别被赋予不同的标签，我们可以肯定地说它*确实*使用了之前单词的特征（比如它们的词性标签）。

# php - Yii：如何仅使用 1 个表单 1 个模型和 1 个动作来更新多个模型？

> ID：15580511
> 
> 赞同：0
> 
> 时间：2013-03-22T21:57:36.677
> 
> 标签：php, yii

我有一个模型`website`和一个模型`url`。

每个`url data`都附加到一个`website data`. A通过 a`url`与 a 相关。`website``website_id`

在我的网络应用程序上，我需要在接受数据之前检查数据。

我想在屏幕上看到关于 a 的全部数据`url data`，我设法做到了。

现在，我还想更新屏幕上列出的全部数据。

在屏幕上我有整个`url data`and `website data`，但是当我尝试保存数据时，`website data`是空的。

我的逻辑是向`url`模型添加一个属性：`public $website;`

在`url`模型中，一个方法`aftersave`：

```
protected function afterSave() {
    $w = null;
    $w = Website::model()->findByAttributes(array('id' => $this->website_id));
    //echo '<pre>';
    //print_r($w);
    print_r($this->website);
    $w->link = $this->website['link'];
    $w->domain = $this->website['domain'];
    $w->description = $this->website['description'];
    $w->save(false);
    die;
    return parent::afterSave();
} 
```

这是`_form`文件中的重要代码：

```
<div class="row">
    <?php echo $form->labelEx($model,'will_expire'); ?>
    <?php echo $form->dropDownList($model,'will_expire',array(0=>'No',1=>'Yes')); ?>
    <?php echo $form->error($model,'will_expire'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model_website,'link'); ?>
    <?php echo $form->textField($model_website,'link'); ?>
    <?php echo $form->error($model_website,'link'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model_website,'domain'); ?>
    <?php echo $form->textField($model_website,'domain'); ?>
    <?php echo $form->error($model_website,'domain'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model_website,'description'); ?>
    <?php echo $form->textField($model_website,'description'); ?>
    <?php echo $form->error($model_website,'description'); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:03:05.840

有几个问题：

1.  模型中定义的关系`url`和现有 url 是否为您提供了有效的网站记录？`website``$url->website`
2.  你的表格显示，你没有使用任何 website_id，意味着你正在为每个 URL 创建一个新的网站记录，意味着`$w = Website::model()->findByAttributes(array('id' => $this->website_id));`总是返回 NULL

我假设你已经`website`在你的`URL`模型中定义了一个关系。根据我的理解建议的功能：

```
protected function afterSave() {
    //data is already assigned by the caller
    $w = null;
    $w = Website::model()->findByAttributes(array('id' => $this->website_id));
    if($w)
    {
        Yii::log("updating existing website data","info");
        $this->website->save();
    }
    else
    {
        Yii::log("creating new website data","info");
        $this->website->save();
        $this->website_id = $this->website->website_id;
        $this->update(array('website_id')); //save the relation
        Yii::log("created new website {$this->website_id}","info");
    }
    return parent::afterSave();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:16:44.930

原来是小错误，比如`w`用`W`对象属性代替数组；

好的，让我教你如何做到这一点；

我有 2 个模型：`Url`和`Website`.

`Url`model 有一个外键`website_id`和一个与 model 的关系`Website`；

在`Url`模型中，我有一个名为的属性`website`，我将其声明为`public $website = array();`：

`bookmarklet`数据是通过使用 a添加的，`API`因此当管理员来更新/检查数据时，数据就会在那里；

在`Url`模型中我有一个方法`afterSave`：

```
protected function afterSave() {
    $w = null;
    $w = Website::model()->findByAttributes(array('id' => $this->website_id));
    if($w)
    {
    $w->link = $this->website['link'];
    $w->domain = $this->website['domain'];
    $w->description = $this->website['description'];
    $w->save();
    }
    return parent::afterSave();
} 
```

`$this->website`像这样填充`UrlController`的地方`actionUpdate`：

```
public function actionUpdate($id, $type = 'update') {
    $model = $this->loadModel($id);

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if (isset($_POST['Url'])) {
        $model->attributes = $_POST['Url'];
        $model->website = $_POST['Website'];
        if ($model->save())
            if ($type == 'update')
                $this->redirect(array('view', 'id' => $model->id));
            else
                $this->redirect(array('/admin/url/approvePublicLink'));
    }

    $model_website = Website::model()->findByAttributes(array('id'=>$model->website_id));

    $this->render('update', array(
        'model' => $model,
        'model_website' => $model_website,
    ));
} 
```

`afterSave`并稍后传递给该方法；

这是`_update`视图：

```
<div style="padding:20px 20px;">
<h1>Update Url, Website, Keywords ...</h1>
<?php echo $this->renderPartial('_form', array(
'model'=>$model,
'model_website' => $model_website,
)); ?>
</div> 
```

这是`_form`部分呈现的视图：

```
<div class="form">

<?php

$form=$this->beginWidget('CActiveForm', array(
    'id'=>'url-form',
    'enableAjaxValidation'=>false,
));
?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'website_id'); ?>
        <?php echo CHtml::link($model->relation_website->domain,$model->relation_website->domain,array('class'=>'avia','target'=>'_blank')); ?>
        <?php echo $form->error($model,'website_id'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'link'); ?>
        <?php echo $form->textField($model,'link',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'link'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'title'); ?>
        <?php echo $form->textField($model,'title',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'title'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'description'); ?>
        <?php echo $form->textField($model,'description',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'description'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'important'); ?>
        <?php echo $form->dropDownList($model,'important',array(0=>'Normal',1=>'Important')); ?>
        <?php echo $form->error($model,'important'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'views'); ?>
        <?php echo $form->textField($model,'views'); ?>
        <?php echo $form->error($model,'views'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'created'); ?>
        <?php echo $model->created; ?>
        <?php echo $form->error($model,'created'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'updated'); ?>
        <?php echo $model->updated; ?>
        <?php echo $form->error($model,'updated'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'will_expire'); ?>
        <?php echo $form->dropDownList($model,'will_expire',array(0=>'No',1=>'Yes')); ?>
        <?php echo $form->error($model,'will_expire'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model_website,'link'); ?>
        <?php echo $form->textField($model_website,'link'); ?>
        <?php echo $form->error($model_website,'link'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model_website,'domain'); ?>
        <?php echo $form->textField($model_website,'domain'); ?>
        <?php echo $form->error($model_website,'domain'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model_website,'description'); ?>
        <?php echo $form->textField($model_website,'description'); ?>
        <?php echo $form->error($model_website,'description'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'status'); ?>
        <?php echo $form->dropDownList($model,'status',array(-1=>'Banned',0=>'Normal',1=>'Active')); ?>
        <?php echo $form->error($model,'status'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

我希望它有所帮助。

# windows - 如何将taskkill结果重新排序为表格

> ID：15580517
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:58:00.827
> 
> 标签：windows, batch-file

我需要知道如何在 windows xp pro 的批处理文件中用我自己的答案将命令的结果重新组织到一个表中。例如，如果我运行命令：

```
taskkill /f /im iexplore.exe 
```

结果是：

> 成功：PID 为 1553 的进程“iexplore.exe”已终止。

我想让我的桌子这样做

```
___________________________________________________________________________
|             Process               |              Result                 |
|___________________________________|_____________________________________|
|                                   |                                     |
|         iexplore.exe              |      Successfully terminated        |
|                                   |                                     |
___________________________________________________________________________ 
```

反正有这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:48:50.637

```
@ECHO OFF
SETLOCAL

SET returntext=SUCCESS: The process "iexplore.exe" with PID 1553 has been terminated.

::
FOR /f "delims=" %%i IN ('echo %returntext%') DO (
CALL :report %%i
)
GOTO :eof

:report
IF %1==SUCCESS: SET process=%~4&SET result=Successfully terminated
:: other translations if required...
(SET text=)&CALL :centre 75 _
SET uscore75=%text%

ECHO %uscore75%

CALL :writec1c2 Process Result
CALL :writec1c2 _ _ _
CALL :writec1c2
CALL :writec1c2 "%process%" "%result%"
CALL :writec1c2
ECHO %uscore75%

GOTO :eof

:writec1c2
SET text=%~1&CALL :centre 36 %3
(SET col1=%text%)
SET text=%~2&CALL :centre 36 %3
(SET col2=%text%)
ECHO ^|%col1%^|%col2%^|
GOTO :eof

:centre
SET fill=%2
IF NOT DEFINED fill (SET fill= )
:centrelp
(SET text=%fill%%text%%fill%)
CALL SET done=%%text:~%1%%
IF NOT DEFINED done GOTO centrelp
CALL SET text=%text:~1%
CALL SET done=%%text:~%1%%
IF DEFINED done SET text=%text:~0,-1%
GOTO :eof 
```

我已将您的返回消息设置为一个变量，该变量被`ECHO`编辑为`FOR /F`. 在您的实际情况下，您将在引号之间使用 taskkill 命令。

调用过程时`:report`，整行作为参数传递。

第一个参数是SUCCESS：第四个是“iexplore.exe”

由于您不知道您可能希望如何使用它，我只是设置`PROCESS`为第 4 个参数，去掉引号和`RESULT`您使用的文本。

下一步是一个例程，它将字符串集中`TEXT`在作为其第一个参数给出的字段宽度和作为其第二个参数的可选填充字符中。这将返回`TEXT`指定的长度和以指定填充字符为中心的原始内容。

因此`(SET text=)&CALL :centre 75 _`返回`TEXT`为 75 个下划线。这存储在`uscore75`

该例程`:writec1c2`用前导和尾随管道以及两列之间的管道写出两列。列的两个文本项作为前 2 个参数提供，填充字符作为第三个参数提供。所需要做`:writec1c2`的就是将两个文本项放在一个 36 个空格的字段中，然后写出结果行。

用三个下划线调用`:writec1c2`意味着“列文本”在每种情况下都是一个下划线，并且用下划线填充到长度 36...

* * *

这是一个稍微重新格式化的版本。

然后它启动一个`iexplore`实例

*   等待 8 秒 iexplore.exe 启动
*   以标题开始报告
*   终止`iexplore`使用`taskkill`并报告结果
*   尝试`iexplore`再次终止并报告失败
*   以页脚结束报告。

我还添加了更多文档。

在`:report`例程中，我包含并跳过了一些代码，这些代码将显示从`TASKKILL`. 注意`%n`和 %~n` 之间的区别 - 第一个保留引号，第二个删除它们。

```
@ECHO OFF
SETLOCAL
::
:: Use local routine to make a line of 75 underscores and store it
::
(SET text=)&CALL :centre 75 _
SET uscore75=%text%

::
:: Start iexplore.exe
::
START "Window title here" "C:\Program Files (x86)\Internet Explorer\iexplore.exe" http://www.google.com
::
:: Wait 8 secs for it to start
::

timeout /t 8 >nul

:: Produce the header lines...
ECHO %uscore75%
CALL :writec1c2 Process Result
CALL :writec1c2 _ _ _
CALL :writec1c2

::
:: Now kill iexplore.exe... there will be 2 instances (greedy!)
::
FOR /f "delims=" %%i IN ('taskkill /f /im iexplore.exe 2^>^&1') DO (
CALL :report %%i
)

::
:: Now try again...but she's not there...(Zombies, 1964)
::

FOR /f "delims=" %%i IN ('taskkill /f /im iexplore.exe 2^>^&1') DO (
CALL :report %%i
)

::
:: and the report footer
::
CALL :writec1c2
ECHO %uscore75%

GOTO :eof

:report
::
:: comment-out the following GOTO to show the parameters to the routine
::
GOTO endparms
::
:: By way of explanation, this is what is delivered to the routine...
::
ECHO :report parameters=%*
SET parmno=0
:ploop
SET /a parmno=parmno + 1
IF %parmno% gtr 9 GOTO endparms
CALL SET parmvald=%%~%parmno%%
CALL SET parmval=%%%parmno%%
IF DEFINED parmval (
  ECHO parameter %parmno% (%%%parmno%^) to :report = [%parmval%] (%%~%parmno%^) = [%parmvald%]
  GOTO ploop)

:endparms

IF %1==SUCCESS: SET process=%~4&SET result=Successfully terminated
IF %1==ERROR: SET process=%~4&SET result=NOT found
:: other translations if required...

CALL :writec1c2 "%process%" "%result%"

GOTO :eof

::
:: strip the quotes from the first two parameters,
:: centre each in a string 36 characters wide.
:: The fill character is given by the third parameter.
:: If no third parameter is supplied, :centre will assume space
::
:: then write PIPE column1 PIPE column2 PIPE
:: The pipe must be escaped by a caret as pipe is a special character
::
:writec1c2
SET text=%~1&CALL :centre 36 %3
(SET col1=%text%)
SET text=%~2&CALL :centre 36 %3
(SET col2=%text%)
ECHO ^|%col1%^|%col2%^|
GOTO :eof

::
:: centre the string in %text%
:: to width %1 using character %2
:: If %2 is not given, use SPACE
::
:centre
:: Set FILL to %2
SET fill=%2
:: If it wasn't provided, set space
IF NOT DEFINED fill (SET fill= )

:centrelp
:: add the fill character to each end of %text%
(SET text=%fill%%text%%fill%)
:: 
:: Use parsing rule to set DONE to the %1th charater of %text%
:: The parser translates this as
:: CALL (SET done=%text:~[the number supplied in %1]%)
::
CALL SET done=%%text:~%1%%
:: If there was no nth character, not long enough yet, 
:: so repeat...
IF NOT DEFINED done GOTO centrelp
:: Now the string is LONGER than required length.
:: Remove the first character, which will be a FILL
:: Then repeat the same parsing trick again to trim off any excess.
CALL SET text=%text:~1%
CALL SET done=%%text:~%1%%
IF DEFINED done SET text=%text:~0,-1%
GOTO :eof 
```

请注意，不是简单地报告成功和失败，而是`TASKKILL`将成功报告发送到标准输出 ( `STDOUT`) 并将失败报告发送到标准错误 ( `STDERR`。) 这些由`2>&1`将`STDERR`(2) 定向到`STDOUT`(1) **BUT**的代码组合在一起，因为这是在命令中由`FOR`, 每个特殊字符执行`>`，`&`需要用插入符号转义`^`

# jsf - Primefaces - 验证失败时切换所有就地

> ID：15580522
> 
> 赞同：3
> 
> 时间：2013-03-22T21:58:37.703
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 JSF 2.1 和 primefaces 3.5。假设我有以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<h:head>
  <title>Web application</title>
</h:head>
<h:body>
    <h1>Editor</h1>
    <h:form>
    <p:wizard>
        <p:tab title="Edit">
            <h2>Edit:</h2>
            <p:dataTable value="#{editorBean.applications}" var="app">
                <p:column headerText="Id">
                    <p:inplace emptyLabel="Value not assigned" editor="true" effectSpeed="fast">
                        <p:inputText value="#{app.id}" />
                    </p:inplace>
                </p:column>
                <p:column headerText="Name">
                    <p:inplace emptyLabel="Value not assigned" editor="true" effectSpeed="fast">
                        <p:inputText value="#{app.name}" required="true" />
                    </p:inplace>
                </p:column>
            </p:dataTable>
        </p:tab>
        <p:tab title="Summary">
            <h2>Summary:</h2>
            <p:dataTable value="#{editorBean.applications}" var="app">
                <p:column headerText="Id">#{app.id}</p:column>
                <p:column headerText="Name">#{app.name}</p:column>
            </p:dataTable>
        </p:tab>
    </p:wizard>
    </h:form>
</h:body>
</html> 
```

当我在向导上按下一步并且验证失败（应用程序名称为空白）时，页面上包含的所有就地都将切换到编辑器模式。我认为不应切换它们，因为当您接受此输入的编辑器时会执行每个输入的验证。

![截屏](../Images/31ba18e46557137653922b0815f8e832.png)

它看起来很糟糕，尤其是我有很多地方。

我想在验证失败时禁用每个就地编辑器的切换。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:13:53.550

那是因为`p:inplace`组件不是为此用途而制造的。在 inplace 等数据表中使用时，几乎没有其他组件会出现问题，但根据您的要求，这可能很有用：

```
<p:column headerText="Year" style="width:25%">
        <p:cellEditor>
            <f:facet name="output"><h:outputText value="#{car.year}" /></f:facet>
            <f:facet name="input"><p:inputText value="#{car.year}" style="width:96%"     label="Year"/></f:facet>
        </p:cellEditor>
</p:column> 
```

您可以查看[primefaces 展示](http://www.primefaces.org/showcase-labs/ui/datatableCellEditing.jsf)中的完整示例。

# powershell - Powershell 安全密码可在任何机器上工作

> ID：15580523
> 
> 赞同：11
> 
> 时间：2013-03-22T21:58:40.173
> 
> 标签：powershell, passwords

我需要编写一个可以在任何机器上运行以连接到服务器的 powershell 脚本。安全字符串是否使用机器或用户加密，即安全密码可以在域中的任何机器上工作，还是只能在创建它的机器上解密。如果是后者，可以加密密码，这样我就可以在任何机器上运行脚本

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T23:16:14.967

要在其他计算机上工作，您需要创建用于 ConvertTo-SecureString 和 ConvertFrom-SecureString cmdlet 的密钥。

```
PS C:\> $Key = (3,4,2,3,56,34,254,222,1,1,2,23,42,54,33,233,1,34,2,7,6,5,35,43)
PS C:\>$StandardString = ConvertFrom-SecureString  $SecureString -Key $Key 
```

[http://www.leeholmes.com/blog/2006/06/01/securestrings-in-powershell/](http://www.leeholmes.com/blog/2006/06/01/securestrings-in-powershell/)

> 默认情况下，SecureString cmlet 在将 SecureString 转换为纯文本表示或从纯文本表示转换时使用 Windows 的数据保护 API。加密密钥基于您的 Windows 登录凭据，因此只有您可以解密已加密的数据。 **如果您希望导出的数据在另一个系统或单独的用户帐户上工作，您可以使用允许您提供显式密钥的参数集。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:09:48.700

这是一个很好的问题。[这是如何保存您的凭证的链接](https://stackoverflow.com/questions/6239647/using-powershell-credentials-without-being-prompted-for-a-password)。我已经设置好了，我将在使用另一个帐户登录的另一台计算机上尝试我的凭据字符串。我会让你知道我的结果。

**更新**

我不得不说它对我不起作用。我在其他人的机器上以他们的身份登录。我在一个名为的脚本中设置了我的凭据`Get-MyCred`：

```
$username = 'Domain\MyName'
$password = cat '\\server\share\securestring.txt' | convertto-securestring
$cred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $password

return $cred 
```

当我运行它获取我的密码的行时，我在其他人的机器上得到一个错误。

```
ConvertTo-SecureString : Key not valid for use in specified state.
At line:1 char:56
+ Get-Content O:\BCKUP\MyScripts\Cred\securestring.txt | ConvertTo-SecureString
+                                                        ~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidArgument: (:) [ConvertTo-SecureString], CryptographicException
+ FullyQualifiedErrorId : ImportSecureString_InvalidArgument_CryptographicError,Microsoft.PowerShell.Commands.ConvertToSecureStringCommand 
```

当我使用我的凭据登录另一台计算机时，我什至会收到错误消息。

# networking - VirtualBox 端口转发不适用于 NAT 适配器

> ID：15580525
> 
> 赞同：31
> 
> 时间：2013-03-22T21:59:07.240
> 
> 标签：networking, port, virtualbox, forwarding, nat

我正在尝试使用 VirtualBox 进行简单的端口转发，看起来 VirtualBox.exe 正在主机上侦听端口，但实际上并未将连接转发给来宾。我已经尝试了多个端口，并且我已经多次重新启动了 VirtualBox。另一方面，来宾到主机的连接很好。这是信息：

```
Host: Win7 x64
Guest: Win7 x64
VirtualBox version: VirtualBox 4.2.10
Firewalls: All firewalls on host and guest disabled.

Virtual Box > Machine Settings > Network
 Adapter 1: 
  Attached to: NAT
  Cable Connected : True
  Port Forwarding:
   Rule 1: TCP, HostIP=127.0.0.1, HostPort=8081, GuestIP=127.0.0.1, GuestPort=8081

On Host:
[VirtualBox.exe]  TCP    127.0.0.1:8081         IBM-6KT5OPCF76P:0      LISTENING

On Guest:
I never get the connection request on port 8081 or any others I've tried. 
```

有任何想法吗？出于多种原因，我想避免使用 VirtualBox 的桥接适配器。我的印象是，使用 VirtualBox 进行 NAT 端口转发相对简单。

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-02-12T21:25:06.260

**准虚拟化网络*（virtio-net）是关键**

1.  选择要进行端口转发的虚拟机。

    *   注意：确保 vm 处于停止模式。
2.  选择“设置”

3.  选择“网络”
4.  选择任何免费的适配器。让我们说“适配器 2”
5.  启用“启用网络适配器”
6.  在附加到下拉列表中，选择“NAT”
7.  选择“高级”
8.  在适配器类型中：选择“<em>Paravirtualized Network (virtio-net)” [这很重要]
9.  选择“端口转发”
10.  在“端口转发”对话框的右侧，选择“+”
11.  提供

    *   名称：任何你想要的。例如 ssh，说“ssh”
    *   协议：协议类型[对于 ssh：TCP]
    *   主机 IP：提供您要连接的主机的主机名 [在这里：127.0.0.1]
    *   主机端口：您要在该主机的哪个端口上连接到远程端口[例如：60022]
    *   访客 IP：留空
    *   访客端口：您要从上述主机连接的端口。[对于 ssh，默认 22 ]

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-23T09:28:25.617

您以错误的方式指出了访客 ip，它应该是访客的 ip（如果您将 ip 地址静态分配给访客）或将其留空。请注意，您将主机 ip 指定为 127.0.0.1，这意味着您要转发的端口只能从端口访问（如果它不是您想要的，它也应该是空的）。

```
VBoxManage modifyvm "win" --natpf1 ",tcp,,8081,,8081" 
```

也许这是你想做的事情。（[请看这里了解更多详情](http://www.virtualbox.org/manual/ch06.html#natforward)）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-05T03:57:54.533

目前尚不清楚您使用的是哪个客户操作系统。

我遇到了同样的问题。

我的主机是 MAC PC，来宾是 VirtualBox 上的 CentOS 7。
我在 VirtualBox 级别为 ssh 端口 22 和 http 端口 80 启用了从访客到主机的 NAT 端口转发。

但是，我发现我无法通过 http 连接从我的 MAC PC 主机连接到 Centos 7 来宾上的 Apache HTTP 服务器。

**要修复它，我必须将 firewalld 服务设置为允许端口 80 连接。**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-23T14:03:57.040

在 Mac 主机、Fedora 来宾设置上遇到类似问题。试图从主机访问在来宾机器的端口 8000 上运行的 http Web 服务器。在客户机上使用 firewall-cmd 打开端口 8000/tcp 解决了问题。

```
sudo firewall-cmd --zone=public --add-port=8000/tcp 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-22T09:40:42.317

我遇到了类似的问题，结果证明是由一些名为 proxycap 的公司代理拦截软件安装的网络堆栈中未签名的驱动程序导致 virtualbox 在设置端口转发时出错。在设置端口转发并列出未签名的驱动程序并卸载相应的应用程序时，检查您的 VM 机器日志中的错误消息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-10T18:46:38.353

如果有人遇到同样的问题，请尝试卸载 ProxyCap、proxifier 等重定向器。VirtualBox NAT 不适用于它们。如果您尝试跟踪 VirtualBox 网络，您不会在日志中找到任何错误消息，并且不会在 pcap 文件中看到任何内容。禁用 ProxyCap 是不够的，必须将其卸载，或者您需要使用“netsh winsock reset”重置您的网络配置，但 ProxyCap 将不再为您工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-25T03:52:32.000

万一其他人遇到了同样的问题，我在这里写下我的错误：

我使用 CentOS 7 作为主机和 Windows 作为来宾。

阻止我的唯一问题是：我忘记在来宾计算机中禁用**Windows 防火墙设置。**一旦禁用它，一切正常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-27T04:53:45.163

我像这样连接到我的 Centos7：

```
Virtual Box > Machine Settings > Network
Adapter 1: 
Attached to: NAT
Cable Connected : True
Port Forwarding:
  Rule 1: TCP, HostIP=127.0.0.1, HostPort=8081, GuestIP=10.0.2.15, GuestPort=8081 
```

**$>** *ssh -p8081 [更改]@127.0.0.1*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-13T22:48:08.240

对于 GNU/Linux 用户，不要忘记[前 1024 个端口仅限于 root 用户](https://unix.stackexchange.com/questions/16564/why-are-the-first-1024-ports-restricted-to-the-root-user-only)……</p>

如果您尝试转发低于 1024 的端口，它甚至不会显示为 LISTENING with `netstat`。

# jquery - jQuery点击功能在android上触发两次

> ID：15580533
> 
> 赞同：0
> 
> 时间：2013-03-22T21:59:47.383
> 
> 标签：jquery, plugins, tap

我部分修改了`jquery.tapend`插件以阻止它在 touchmove 上触发点击事件以及它遇到的一些其他问题。这是代码：

```
(function($) {
  $.fn.tap = function(fn) {
    return $(this).click.apply(this, arguments) // listen for the final event
                  .bind('touchstart.jqtapstart', function waitForTouchEnd(e) {
      function click(e) {
        cancel(e);
        $(this).trigger('click');
      }
      function move(e) {
        clearTimeout(timeout);
        $this.unbind('.jqtapend');
      }
      function cancel(e) {
        clearTimeout(timeout);
        if ('object' === typeof e && 'function' === typeof e.preventDefault) {
          e.preventDefault();
          e.stopPropagation();
        }
        $this.unbind('.jqtapend');
      }
      var timeout = setTimeout(cancel, 250)
        , $this   = $(this) // maybe > 1 node
        ;

      $this.bind({
          'touchend.jqtapend': click,
          'touchmove.jqtapend': move,
          'touchleave.jqtapend': cancel
      });
    });
  };
})(jQuery); 
```

出于某种原因，Android 设备上的每个“点击”事件都会触发两次，在 iOS 上很少触发，但它仍然会发生。任何人都可以看到为什么会发生这种情况，或者有一个理论吗？

请注意，出于某些原因，我选择不使用 jquery mobile。

# c++ - 为项目使用超过 1 个代码文件有什么好处？(C++)

> ID：15580539
> 
> 赞同：14
> 
> 时间：2013-03-22T22:00:19.700
> 
> 标签：c++, code-organization, project-files

在单个项目中使用多个源文件 ( `.cpp`) 和头文件 ( ) 有什么好处？`.h`

它只是一种优惠还是有真正的好处？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T22:02:06.840

它可以帮助您拆分代码并按主题对其进行排序。否则你会得到一个有 1000 行的文件……这很难管理……</p>

通常，人们有一个或几个类的 .h 和 .c。此外，它加快了编译速度，因为只有修改过的文件和一些相关文件需要重新编译。

从[在 C 和 C++ 中组织代码文件](http://www.gamedev.net/page/resources/_/technical/general-programming/organizing-code-files-in-c-and-c-r1798)：

拆分任何规模合理的项目都会为您带来一些优势，其中最重要的有以下几点：

*   **加速编译**- 大多数编译器一次处理一个文件。因此，如果你的 10000 行代码都在一个文件中，而你更改了一行，那么你必须重新编译 10000 行代码。另一方面，如果你的 10000 行代码平均分布在 10 个文件中，那么更改一行将只需要重新编译 1000 行代码。其他 9 个文件中的 9000 行不需要重新编译。（链接时间不受影响。）

*   **增加组织**- 沿着逻辑线拆分代码将使您（以及项目中的任何其他程序员）更容易找到函数、变量、结构/类声明等。即使能够直接跳转到许多编辑器和开发环境（例如 Microsoft Visual C++）中提供的给定标识符，有时您仍需要手动扫描代码以查找某些内容。就像将代码拆分可以减少您需要重新编译的代码量一样，它也减少了您需要阅读的代码量才能找到一些东西。想象一下，您需要找到几周前对声音代码所做的修复。如果您有一个名为 GAME.C 的大文件，则可能需要进行大量搜索。如果您有几个名为 GRAPHICS.C、MAINLOOP.C、SOUND.C 和 INPUT.C 的小文件，

*   **促进代码重用**- 如果您的代码被仔细地拆分为彼此独立运行的部分，这使您可以在另一个项目中使用该代码，从而为您节省大量以后的重写。编写可重用代码不仅仅是使用逻辑文件组织，但如果没有这样的组织，很难知道代码的哪些部分协同工作，哪些不协同工作。因此，如果您尝试在另一个项目中使用该代码，则将子系统和类放在单个文件或仔细描述的文件集中将对您有所帮助。

*   **在项目之间共享代码**- 这里的原则与重用问题相同。通过仔细地将代码分离到某些文件中，您可以让多个项目使用一些相同的代码文件而无需复制它们。在项目之间共享代码文件而不是仅仅使用复制和粘贴的好处是，您对该文件或一个项目中的文件所做的任何错误修复都会影响另一个项目，因此两个项目都可以确保充分利用最新版本。

*   **在程序员之间拆分编码职责**- 对于非常大的项目，这可能是将代码分成多个文件的主要原因。在任何给定时间让一个以上的人对单个文件进行更改是不切实际的。因此，您需要使用多个文件，以便每个程序员都可以处理代码的单独部分，而不会影响其他程序员正在编辑的文件。当然，仍然需要检查两个程序员是否尝试更改同一个文件；配置管理系统和版本控制系统，如 CVS 或 MS SourceSafe 在这里为您提供帮助。以上所有内容都可以被认为是模块化的方面，模块化是结构化和面向对象设计的关键要素。

然后，他们继续讨论*如何做*、*潜在的陷阱*、*解决问题*等。

你应该检查一下。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-22T22:02:43.353

代码文件在几百行之后变得不可维护（尝试在其中搜索！）。有些人达到几千（但这已经是一个问题）。小项目几千行，中项目几万行，大项目几百万行。文本编辑器无法处理这么大的文件（但程序员自己也不能）。

如果要将项目分成不同的编译单元，也*需要*将项目拆分为不同的源文件，这会使编译速度更快，因为只有部分项目需要重新编译。

几十年前，程序过去常常写在一个文件/一堆卡片中。然而，与现代程序相比，这些程序很小，而且完全无法维护——即使是很小的变化，本质上也需要重写，这对可以实现的复杂性设置了一个固定的上限。

现代、更复杂的项目本质上*需要*拆分。坦率地说，将所有内容放在一个文件中的问题是我从未问过自己的问题，因为这个想法简直不可思议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T22:15:20.133

不同的 cpp 文件被编译为单独的编译单元。这允许您将事物（标头包含、匿名命名空间、pimpl）与源代码的其余部分隔离开来。

有时两个库不能在一个源文件中一起使用，因为它们存在名称冲突。这可以通过将每个库头包含在不同的 cpp 文件中并通过相应的头文件公开所需的功能来解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T22:02:17.027

如果它是一个小项目，如 hello world，则没有优势，但想象一下 windows、google chrome 或 android 之类的东西。

这么大的项目不可能用一个文件来管理。

您项目的多个文件与代码的可管理性和可重用性有关。

# layout - 在运行时更改 LayoutConstraint 代号一

> ID：15580540
> 
> 赞同：0
> 
> 时间：2013-03-22T22:00:25.033
> 
> 标签：layout, constraints, codenameone

我有一个带有 BorderLayout 的容器和一个带有 LayoutConstraint =“South”的按钮。如何在运行时将其更改为“North”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:23:37.137

从容器中移除组件并再次将其添加到北方。打电话`revalidate()`或更好，`animateLayout()`例如

```
myBorderContainer.removeComponent(button);
myBorderContainer.addComponent(BorderLayout.NORTH, button);
myBorderContainer.animateLayout(300); 
```

# php - Codeigniter My_payment Authorize.net 库。如何发送发票号码？

> ID：15580544
> 
> 赞同：1
> 
> 时间：2013-03-22T22:00:36.157
> 
> 标签：php, codeigniter, e-commerce, authorize.net

我正在使用`my_payment.php`codeigniter 的 authorize.net 库为我为我的一个客户制作的网站进行 authorize.net 付款。他们刚刚来找我，要求将他们的发票号码与 authorize.net 付款一起发送。我试图添加`'invoice_number' => $orderNumber`到它发送的参数中，但它不起作用。

关于如何在 authorize.net 中记录发票编号和付款的任何想法？

这是`my_payment`图书馆：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    /*
    |--------------------------------------------------------------------------
    | Authorize.net Payment Module
    |--------------------------------------------------------------------------
    |
    | Just add the following config to your application/config/config.php file
    |
    | $config['at_login']   = "xxxxxxxxxx"; //your login
    | $config['at_password']    = "xxxxxxxxxxxx"; //your transaction key
    | $config['at_test']    = 1; //Set to 0 for live transactions
    | $config['at_debug']   = 1; //Set to 0 for live transactions
    | $config['at_site'] = 'https://test.authorize.net/gateway/transact.dll'; //comment for live trans
    | //$config['at_site'] = 'https://secure.authorize.net/gateway/transact.dll'; //uncomment for live trans
    |
    |   Call it by doing this:
    |
    |       $this->load->library('my_payment');
    |       $params->cc = '1293081309812039812039' ;//etc... you get the idea
    |       
    |       $result = $this->my_payment->authorize($params);
    |       print_r($result); //response codes from authorize.net
    |
    |
    |
    */

    class My_payment {

        public function Authorize($params)
        {
            $CI =& get_instance();

            $x_Login = $CI->config->item('at_login');     
            $x_Password = $CI->config->item('at_password');

            $DEBUGGING                  = $CI->config->item('at_debug');
            $TESTING                    = $CI->config->item('at_test'); 
            $ERROR_RETRIES              = 2;

            $auth_net_url               = $CI->config->item('at_site');

            $authnet_values             = array
            (
                "x_login"               => $x_Login,
                "x_version"             => "3.1",
                "x_delim_char"          => "|",
                "x_delim_data"          => "TRUE",
                "x_type"                => "AUTH_CAPTURE",
                "x_method"              => "CC",
                "x_tran_key"            => $x_Password,
                "x_relay_response"      => "FALSE",
                "x_card_num"            => $params->cc,
                "x_exp_date"            => $params->exp,
                "x_description"         => $params->desc,
                "x_amount"              => $params->amount,
                "x_first_name"          => $params->firstName,
                "x_last_name"           => $params->lastName,
                "x_address"             => $params->address,
                "x_city"                => $params->city,
                "x_state"               => $params->state,
                "x_zip"                 => $params->zip,
                "SpecialCode"           => $params->specialCode,
            );

            $fields = "";
            foreach( $authnet_values as $key => $value ) $fields .= "$key=" . urlencode( $value ) . "&";

            $ch = curl_init($auth_net_url);

            curl_setopt($ch, CURLOPT_HEADER, 0); 
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, rtrim( $fields, "& " ));

            $result = curl_exec($ch);

            curl_close ($ch);

            return $result;

        }
    }
    /* End of file My_payment.php */
    /* Location: ./system/application/libraries/My_payment.php */ 
```

这是我发送付款的代码：

```
 //Process via Authorize.net
            //Load the authorize.net payment library
            $this->load->library('my_payment');
            $params = new stdClass();
            //Process the transaction
            $params->cc = $_POST['finalCardNumber'];
            $params->exp = $_POST['finalExpMonth'].'/'.$_POST['finalExpYear'];
            $params->desc = 'Stoles.com Order';
            $params->amount = $_POST['finalGrandTotal'];
            $params->firstName = $_POST['finalBillingFirstName'];
            $params->lastName = $_POST['finalBillingLastName'];
            $params->address = $_POST['finalBillingAddress'];
            $params->city = $_POST['finalBillingCity'];
            $params->state = $_POST['finalBillingState'];
            $params->zip = $_POST['finalBillingZipcode'];
            $params->specialCode = $_POST['finalCardCode'];
            $params->invoice_number = $orderNumber;

            $result = $this->my_payment->authorize($params);

            $authres = str_split($result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:12:41.933

只是向 params 添加一个额外的值不会使请求实际发送该值，因为该类显然只发送`$authnet_values`.

在这种情况下，您需要修改以在授权请求中`$authnet_values`传递一个附加参数。`x_invoice_num`

# javascript - CSS 样式上的 Javascript 事件从块更改为无

> ID：15580551
> 
> 赞同：6
> 
> 时间：2013-03-22T22:01:28.880
> 
> 标签：javascript, css, dom-events

`div`当我将我的 CSS 样式更改为from`block`时，是否会触发纯 Javascript 事件（无 jQuery）`none`。我的印象是我可以通过“ `onBlur`”捕捉到它，但看起来我不能！

请指教！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T22:11:23.130

可见性更改不会触发 DOM 事件。

你能做的最好的就是始终使用相同的功能来调整块的可见性，而不是每次都改变它的样式。

旧模式：

```
function doSomething() {
    alert("I'm doing something!");
    myBlock.style.display = "block";
}

function doSomethingElse() {
    alert("I'm doing something else now!");
    myBlock.style.display = "none";
} 
```

新模式：

```
function doSomething() {
    alert("I'm doing something!");
    toggleMyBlock(true);
}

function doSomethingElse() {
    alert("I'm doing something else now!");
    toggleMyBlock(false);
}

function toggleMyBlock(show) {
    if (show) {
        // code here for what would be your 'it became visible' event.
    } else {
        // code here for what would be your 'it became invisible' event.
    }
    myBlock.style.display = show ? "block" : "none";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-21T08:17:52.817

展望未来，您正在寻找新的“Intersection Observer API”。它目前适用于最新的 Chrome、Firefox 和 Edge。有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)。

观察显示的简单代码示例：无切换：

```
// Start observing visbility of element. On change, the
//   the callback is called with Boolean visibility as
//   argument:

respondToVisibility(element, callback) {
  var options = {
    root: document.documentElement
  }

  var observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      callback(entry.intersectionRatio > 0);
    });
  }, options);

  observer.observe(element);
}

respondToVisibility(myElement, isVisible => {
  if (isVisible) {
    doSomething();
  }
}); 
```

在行动：[https ://jsfiddle.net/elmarj/u35tez5n/5/](https://jsfiddle.net/elmarj/u35tez5n/5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T22:12:32.067

您可以使用 JavaScript 来侦听 DOM 事件以进行 CSS3 转换（淡化时间最短）：

*   [CSS3 过渡事件](https://stackoverflow.com/questions/2794148/css3-transition-events)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T22:18:21.323

我认为最接近您正在寻找的是[`DOMAttrModified`event](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)。我不完全确定它的用法，但大致如下：

```
element.addEventListener('DOMAttrModified', function (e) {
  ...
}); 
```

事件处理程序收到一个[`MutationEvent`](http://www.w3.org/TR/DOM-Level-3-Events/#events-MutationEvent)应该为您提供足够信息以确定是否`display`已设置为`block`或的信息`none`。

**编辑**

我可能误读了这个问题。我不相信 CSS 更改会导致`DOMAttrModified`事件。最初，我读过这个问题的意思是您正在`display`通过 JavaScript 设置 CSS 值。我的回答可能没有帮助。

# performance - 不同优化下的 Fortran 矩阵乘法性能

> ID：15580572
> 
> 赞同：7
> 
> 时间：2013-03-22T22:03:31.583
> 
> 标签：performance, fortran, matrix-multiplication

我正在阅读“使用 Fortran 进行科学软件开发”一书，其中有一个我认为非常有趣的练习：

“创建一个名为 MatrixMultiplyModule 的 Fortran 模块。向其中添加三个名为 LoopMatrixMultiply、IntrinsicMatrixMultiply 和 MixMatrixMultiply 的子例程。每个例程应将两个实矩阵作为参数，执行矩阵乘法，并通过第三个参数返回结果。LoopMatrixMultiply 应完全编写有do循环，没有数组操作或内在过程； IntrinsicMatrixMultiply应该使用matmul内在函数编写； MixMatrixMultiply应该使用一些do循环和内在函数dot_product编写。编写一个小程序来测试这三种不同方式的性能对不同大小的矩阵执行矩阵乘法。”

我对两个 2 阶矩阵的乘法进行了一些测试，以下是不同优化标志下的结果：

![在此处输入图像描述](../Images/47b8b92795e91faf03634c5f0d7cae7f.png) ![在此处输入图像描述](../Images/ba96ad3986219907d93934f6fed70d14.png) ![在此处输入图像描述](../Images/3987562fb6225fa337edc16efd7ae029.png)

```
compiler:ifort version 13.0.0 on Mac 
```

这是我的问题：

为什么在 -O0 下它们具有大致相同的性能，但使用 -O3 时 matmul 具有巨大的性能提升，而显式循环和点积的性能提升较小？另外，为什么 dot_product 似乎与显式循环相比具有相同的性能？

我使用的代码如下：

```
module MatrixMultiplyModule

contains
    subroutine LoopMatrixMultiply(mtx1,mtx2,mtx3)
        real,intent(in)                 ::  mtx1(:,:),mtx2(:,:)
        real,intent(out),allocatable    ::  mtx3(:,:)
        integer                         ::  m,n
        integer                         ::  i,j
        if(size(mtx1,dim=2) /= size(mtx2,dim=1)) stop "input array size not match"
        m=size(mtx1,dim=1)
        n=size(mtx2,dim=2)
        allocate(mtx3(m,n))
        mtx3=0.

        do i=1,m
            do j=1,n
                do k=1,size(mtx1,dim=2)
                    mtx3(i,j)=mtx3(i,j)+mtx1(i,k)*mtx2(k,j)
                end do      
            end do
        end do
    end subroutine

    subroutine IntrinsicMatrixMultiply(mtx1,mtx2,mtx3)
        real,intent(in)                 ::  mtx1(:,:),mtx2(:,:)
        real,intent(out),allocatable    ::  mtx3(:,:)
        integer                         ::  m,n
        integer                         ::  i,j
        if(size(mtx1,dim=2) /= size(mtx2,dim=1)) stop "input array size not match"
        m=size(mtx1,dim=1)
        n=size(mtx2,dim=2)
        allocate(mtx3(m,n))
        mtx3=matmul(mtx1,mtx2)

    end subroutine

    subroutine MixMatrixMultiply(mtx1,mtx2,mtx3)
        real,intent(in)                 ::  mtx1(:,:),mtx2(:,:)
        real,intent(out),allocatable    ::  mtx3(:,:)
        integer                         ::  m,n
        integer                         ::  i,j
        if(size(mtx1,dim=2) /= size(mtx2,dim=1)) stop "input array size not match"
        m=size(mtx1,dim=1)
        n=size(mtx2,dim=2)
        allocate(mtx3(m,n))

        do i=1,m
            do j=1,n
                    mtx3(i,j)=dot_product(mtx1(i,:),mtx2(:,j))
            end do
        end do

    end subroutine

end module

program main
use MatrixMultiplyModule
implicit none

real,allocatable        ::  a(:,:),b(:,:)
real,allocatable    ::  c1(:,:),c2(:,:),c3(:,:)
integer ::  n
integer ::  count, rate
real    ::  timeAtStart, timeAtEnd
real    ::  time(3,10)
do n=100,1000,100
    allocate(a(n,n),b(n,n))

    call random_number(a)
    call random_number(b)

    call system_clock(count = count, count_rate = rate)
    timeAtStart = count / real(rate)
    call LoopMatrixMultiply(a,b,c1)
    call system_clock(count = count, count_rate = rate)
    timeAtEnd = count / real(rate)
    time(1,n/100)=timeAtEnd-timeAtStart

    call system_clock(count = count, count_rate = rate)
    timeAtStart = count / real(rate)
    call IntrinsicMatrixMultiply(a,b,c2)
    call system_clock(count = count, count_rate = rate)
    timeAtEnd = count / real(rate)
    time(2,n/100)=timeAtEnd-timeAtStart

    call system_clock(count = count, count_rate = rate)
    timeAtStart = count / real(rate)
    call MixMatrixMultiply(a,b,c3)
    call system_clock(count = count, count_rate = rate)
    timeAtEnd = count / real(rate)
    time(3,n/100)=timeAtEnd-timeAtStart

    deallocate(a,b)

end do

open(1,file="time.txt")
do n=1,10
    write(1,*) time(:,n)
end do
close(1)
deallocate(c1,c2,c3)
end program 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T19:18:53.037

循环遍历数组元素时应该注意几件事：

*   确保内部循环位于内存中的连续元素之上。在您当前的“循环”算法中，内部循环超过索引 k。由于矩阵在内存中作为列布局（第一个索引在通过内存时变化最快），访问新的 k 值可能需要将新页面加载到缓存中。在这种情况下，您可以通过将循环重新排序为：

    ```
    do j=1,n
        do k=1,size(mtx1,dim=2)
            do i=1,m
                mtx3(i,j)=mtx3(i,j)+mtx1(i,k)*mtx2(k,j)
            end do      
        end do
    end do 
    ```

    现在，内部循环在内存中的连续元素上（`mtx2(k,j)`编译器在内部循环之前可能只获取一次值，如果没有，您可以将其存储在循环之前的临时变量中）

*   确保整个循环可以放入缓存中，以避免过多的缓存未命中。这可以通过阻塞算法来完成。在这种情况下，解决方案可能是：

    ```
    l=size(mtx1,dim=2)
    ichunk=512 ! I have a 3MB cache size (real*4)
    do jj=1,n,ichunk
        do kk=1,l,ichunk

    do j=jj,min(jj+ichunk-1,n)
        do k=kk,min(kk+ichunk-1,l)
            do i=1,m
                mtx3(i,j)=mtx3(i,j)+mtx1(i,k)*mtx2(k,j)
            end do      
        end do
    end do

        end do
    end do 
    ```

    在这种情况下，性能将取决于 的大小`ichunk`，尤其是对于足够大的矩阵（您甚至可以阻塞内部循环，这只是一个示例）。

*   确保执行循环所需的工作远小于循环内部的工作。这可以通过“循环展开”来解决，即在循环的一次迭代中组合多个语句。通常编译器可以通过提供标志来做到这一点`-funroll-loops`。

如果我使用上面的代码并使用 flags 进行编译`-O3 -funroll-loops`，我会得到比 with 稍好的性能`matmul`。

这三个要记住的重要一点是关于循环排序的第一点，因为这会影响其他用例中的性能，而编译器通常无法修复它。循环展开，您可以留给编译器（但对其进行测试，因为这并不总能提高性能）。至于第二点，由于这取决于硬件，因此您不应该（通常）尝试自己实现非常有效的矩阵乘法，而是考虑使用诸如 atlas 之类的库，它可以优化缓存大小，或者供应商库，例如 MKL 或 ACML。

# jquery - jQuery自动将prettyPhoto类添加到链接时排除特定类的子类

> ID：15580574
> 
> 赞同：0
> 
> 时间：2013-03-22T22:03:52.157
> 
> 标签：jquery, image, parent, prettyphoto

我正在使用 jQuery 添加`class="prettyPhoto"`到所有`<div class="entry-content">`包含图像的链接。

```
$('.entry-content a').has('img').addClass('prettyPhoto'); 
```

代码运行良好；但是我无法调整它以排除位于其中的任何链接`<div class="hover_link">`，我无法弄清楚如何。

在摆弄之后，我有以下产生奇怪的结果：

```
if(!$('.entry-content a').parent('.hover_link')) {
    $('.entry-content a').has('img').addClass('prettyPhoto');
} 
```

一些示例html：

```
<div class="entry-content">

    <!-- prettyPhoto should be added to the next link -->
    <a href="whatever"><img src="whatever.jpg"></a>

    <!-- prettyPhoto shouldn't be added to the next link (there's no img) -->
    <a href="whatever">Some Text</a>

    <div class="hover_link">
        <!-- prettyPhoto shouldn't be added inside of .hover_link -->
        <a href="whatever"><img src="whatever.jpg"></a>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:13:26.323

像这样的东西应该工作：

```
$('.entry-content a').has('img').each(function() {
  if($(this).parent('hover_link').length == 0) $(this).addClass('prettyPhoto');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:14:13.007

只需使用 jQuery 的`not`：

```
$('.entry-content a').not('.hover_link a').addClass('prettyPhoto'); 
```

# python - 有没有什么简单的方法可以在 python 中稀疏地存储具有冗余模式的矩阵？

> ID：15580575
> 
> 赞同：1
> 
> 时间：2013-03-22T22:03:53.713
> 
> 标签：python, matrix, python-2.7, numpy, sparse-matrix

我正在处理的矩阵类型是从向量创建的，如下所示：

从长度为 L 的一维向量 V 开始。

要从 V 创建一个有 N 行的矩阵 A，只要 V 中有足够的条目来填充柱子。这意味着 A 有 L - N + 1 列。

这是一个例子：

```
V = [0, 1, 2, 3, 4, 5]
N = 3

A =
[0 1 2 3
 1 2 3 4
 2 3 4 5] 
```

以这种方式表示矩阵需要比我的机器更多的内存。有没有合理的方法来稀疏地存储这个矩阵？当我只需要存储 L 值时，我目前正在存储 N * (L - N + 1) 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:08:10.460

您可以按如下方式查看原始矢量：

```
>>> import numpy as np
>>> from numpy.lib.stride_tricks import as_strided
>>> 
>>> v = np.array([0, 1, 2, 3, 4, 5])
>>> n = 3
>>> 
>>> a = as_strided(v, shape=(n, len(v)-n+1), strides=v.strides*2)
>>> a
array([[0, 1, 2, 3],
       [1, 2, 3, 4],
       [2, 3, 4, 5]]) 
```

这是一个视图，而不是您的原始数据的副本，例如

```
>>> v[3] = 0
>>> v
array([0, 1, 2, 0, 4, 5])
>>> a
array([[0, 1, 2, 0],
       [1, 2, 0, 4],
       [2, 0, 4, 5]]) 
```

但是您必须小心不要对`a`触发副本进行任何操作，因为这会使您的内存使用量达到上限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:14:17.433

如果您已经在使用`numpy`，请使用其跨步或稀疏数组，正如 Jaime 解释的那样。

如果您还*没有*使用`numpy`，您可能会强烈考虑使用它。

如果您需要坚持使用纯 Python，有三种明显的方法可以做到这一点，具体取决于您的用例。

对于跨步或稀疏但聚集的数组，您可以有效地执行与`numpy`.

或者你可以使用一个简单的运行长度编码方案，加上一个更高级别的运行列表，或者指向每个第 N 个元素的指针列表，甚至是一整堆这样的列表（每 100 个元素一个，一个用于每 10000 个等）。

但是对于大多数均匀密集的数组，最简单的方法是简单地存储 a`dict`或`defaultdict`将索引映射到值。随机访问查找或更新仍然是 O(1) - 尽管具有更高的常数因子 - 并且您浪费的存储（实际上）存储散列、键和值，而不仅仅是每个非默认元素的值只要您的密度小于 0.33，就可以通过不存储默认元素的值来弥补。

# c# - 从命令行自动格式化代码

> ID：15580580
> 
> 赞同：24
> 
> 时间：2013-03-22T22:04:09.467
> 
> 标签：c#, visual-studio, resharper, autoformatting

是否可以为解决方案中的所有文件或特定文件运行自动格式化代码，例如 Visual Studio 中的 (Ctrl+K, Ctrl+D) 格式化，但可以从命令行运行？或者也从命令行使用 Resharper 的清理来处理解决方案文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T22:43:44.480

创建您自己的工具。您可以使用`EnvDTE`,`EnvDTE80`创建 Visual Studio 项目并动态加载要格式化的文件。完成后删除 Visual Studio 项目。您可以指定在格式化时不显示 Visual Studio 窗口。如果你有兴趣让我知道我可以给你一些代码来完成这项工作。

更新：我正在复制我拥有的代码。我用它来格式化 *.js 文件。我删除了一些您不需要的代码。随意问它是否不起作用。

```
 //You need to make a reference to two dlls:
    envdte
    envdte80

    void FormatFiles(List<FileInfo> files)
    {       
        //If it throws exeption you may want to retry couple more times
        EnvDTE.Solution soln = System.Activator.CreateInstance(Type.GetTypeFromProgID("VisualStudio.Solution.11.0")) as EnvDTE.Solution;
        //try this if you have Visual Studio 2010
        //EnvDTE.Solution soln = System.Activator.CreateInstance(Type.GetTypeFromProgID("VisualStudio.Solution.10.0")) as EnvDTE.Solution;
        soln.DTE.MainWindow.Visible = false;
        EnvDTE80.Solution2 soln2 = soln as EnvDTE80.Solution2;
        //Creating Visual Studio project
        string csTemplatePath = soln2.GetProjectTemplate("ConsoleApplication.zip", "CSharp");
        soln.AddFromTemplate(csTemplatePath, tempPath, "FormattingFiles", false);
        //If it throws exeption you may want to retry couple more times
        Project project = soln.Projects.Item(1);

        foreach (FileInfo file in files)
        {
            ProjectItem addedItem;
            bool existingFile = false;
            int _try = 0;
            while (true)
            {            
                try
                {
                    string fileName = file.Name;
                    _try++;
                    if (existingFile)
                    {
                        fileName = file.Name.Substring(0, (file.Name.Length - file.Extension.Length) - 1);
                        fileName = fileName + "_" + _try + file.Extension;
                    }
                    addedItem = project.ProjectItems.AddFromTemplate(file.FullName, fileName);
                    existingFile = false;
                    break;
                }
                catch(Exception ex)
                {
                    if (ex.Message.Contains(file.Name) && ex.Message.Contains("already a linked file"))
                    {
                        existingFile = true;
                    }
                }
            }
            while (true)
            {
                //sometimes formatting file might throw an exception. Thats why I am using loop.
                //usually first time will work
                try
                {
                    addedItem.Open(Constants.vsViewKindCode);
                    addedItem.Document.Activate();
                    addedItem.Document.DTE.ExecuteCommand("Edit.FormatDocument");
                    addedItem.SaveAs(file.FullName);
                    break;
                }
                catch
                {
                    //repeat
                }
            }
        }
        try
        {
            soln.Close();
            soln2.Close();
            soln = null;
            soln2 = null;
        }
        catch
        {
            //for some reason throws exception. Not all the times.
            //if this doesn't closes the solution CleanUp() will take care of this thing
        }
        finally
        {
            CleanUp();
        }
    }   

    void CleanUp()
    {
        List<System.Diagnostics.Process> visualStudioProcesses = System.Diagnostics.Process.GetProcesses().Where(p => p.ProcessName.Contains("devenv")).ToList();
        foreach (System.Diagnostics.Process process in visualStudioProcesses)
        {
            if (process.MainWindowTitle == "")
            {
                process.Kill();
                break;
            }
        }
        tempPath = System.IO.Path.GetTempPath();
        tempPath = tempPath + "\\FormattingFiles";
        new DirectoryInfo(tempPath).Delete(true);
    } 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T18:19:47.710

作为 Dilshod 帖子的后续，如果您只是想格式化单个文件，这里有一种不需要临时路径的方法：

```
static void FormatFile(string file)
{
    EnvDTE.Solution soln = System.Activator.CreateInstance(
        Type.GetTypeFromProgID("VisualStudio.Solution.10.0")) as EnvDTE.Solution;

    soln.DTE.ItemOperations.OpenFile(file);

    TextSelection selection = soln.DTE.ActiveDocument.Selection as TextSelection;
    selection.SelectAll();
    selection.SmartFormat();

    soln.DTE.ActiveDocument.Save();
} 
```

请注意，“文件”很可能需要在磁盘上具有完整路径。相对路径似乎不起作用（尽管我没有那么努力）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-05T10:44:32.997

要格式化 net core c# 源代码，请使用[https://github.com/dotnet/format](https://github.com/dotnet/format)

根据项目自述文件安装该工具。

我需要格式化一些从 Razor 模板生成的代码文件。我在输出文件夹的根目录中创建了一个 shell .CSProj 文件，使用`dotnet new console`它为您提供了这个基本文件：

```
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp2.2</TargetFramework>
    <RootNamespace>dotnet_format</RootNamespace>
  </PropertyGroup>

</Project> 
```

然后`dotnet format`从该文件夹中的 VS 命令提示符运行。它将递归到子目录并格式化它找到的所有内容。要格式化特定文件，您可以使用`--files`开关提供文件名列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-14T02:28:33.513

## 使用 .NET 团队的 CodeFormatter

1.  安装[MSBuild 工具 2015](https://www.microsoft.com/en-ca/download/details.aspx?id=48159)。
2.  下载[CodeFormatter 1.0.0-alpha6](https://github.com/dotnet/codeformatter/releases)。
3.  添加`CodeFormatter.csproj`到项目的根目录：

**CodeFormatter.csproj**

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <Compile Include="**\*.cs" />
  </ItemGroup>
  <Target Name="Compile">
    <Csc Sources="@(Compile)"/>
  </Target>
</Project> 
```

然后从命令行运行它。

```
> codeformatter.exe CodeFormatter.csproj /nocopyright 
```

结果：您的所有项目的 C# 文件现在都符合大多数 .NET Foundation[编码指南](https://github.com/dotnet/corefx/blob/master/Documentation/coding-guidelines/coding-style.md)。

## 评论

*   安装 MSBuild Tools 2015 意味着我们不需要 Visual Studio。
*   递归地添加`CodeFormatter.csproj`到根目录包括所有 C# 文件，这意味着上面的内容适用于基于 project.json 和 *.xproj 的设置。

## 也可以看看

[http://bigfontblog.azurewebsites.net/autoformat/](http://bigfontblog.azurewebsites.net/autoformat/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T22:08:37.040

Visual Studio 不可能，但有命令行实用程序：[http ://astyle.sourceforge.net/astyle.html](http://astyle.sourceforge.net/astyle.html)

# python - 如何在启动的交互式会话中导入新安装的 python 模块？

> ID：15580581
> 
> 赞同：0
> 
> 时间：2013-03-22T22:04:18.993
> 
> 标签：python, import

我在一个终端窗口中运行 python 交互式会话，然后在另一个终端窗口中安装了 numpy。我怎么能`import numpy`在运行的交互式会话中不退出并重新启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:34:53.550

答案是你不应该做任何特别的事情。

```
% virtualenv foo
New python executable in foo/bin/python
Installing setuptools............done.
Installing pip...............done.
% foo/bin/python
Python 2.7.3 (default, Sep  8 2012, 23:11:27) 
[GCC 4.2.1 Compatible Apple Clang 4.0 ((tags/Apple/clang-421.0.60))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named numpy
>>> 
Suspended
% foo/bin/pip install numpy
Downloading/unpacking numpy
% fg
>>> import numpy
>>> numpy
<module 'numpy' from '/.../foo/lib/python2.7/site-packages/numpy/__init__.pyc'> 
```

# python - bash 或 python csv 多字段处理

> ID：15580586
> 
> 赞同：0
> 
> 时间：2013-03-22T22:04:59.333
> 
> 标签：python, bash, csv, if-statement, awk

我正在开发一个项目，该项目涉及基于 csv 文件的一些变量/参数创建输出，我正在寻找处理它的最佳方法。

我有一个中等大小的 csv 文件，如下所示：

*输入.csv*

```
B|Person1|3000
A|Person2|3000
C|Person3|5400
A|Person4|1700
C|Person5|9400
D|Person6|2400
B|Person7|2000
A|Person8|3400
A|Person9|1000
A|Person10|2500
A|Person11|3000 
```

我希望输出看起来像：

*输出.csv*

```
A|Person2|3000
A|Person4|1700
B|Person1|3000
B|Person7|2000
C|Person3|5400
D|Person6|2400 
```

但是输出只能是 6 人（AABBCD）并且第 3 列的总和 <= 18000。我希望从*input.csv*的第一行向下创建输出：

1.  如果 row(s) 为空，则根据字母 AD (Column1) 填写人，**[可选]**忽略第 3 列的总和。
2.  如果行不为空且第 3 列的总和低于 1800 - 跳过（继续）。
3.  如果行不为空且第 3 列的总和超过 1800，则替换最高值（继续）。
4.  **[可选]**完成后，重新开始该过程，检查是否可以用更高的值替换任何人；本质上是创建一个 18000 人以下最有价值的人的名单。

*注意：所有 6 个参数必须根据它们的第 1 列位置填写。*

起初我想生成一个*output.csv*文件，其中第一列包含 AABBCD 并使用 awk 匹配和条件语句添加行。然后我开始研究使用 awk 数组（将 3 列传递给 3 个数组并根据索引分配值）...

但是现在，似乎 python 可能是处理 csv 文件时要走的路，但在使用 python 编写脚本时，我仍然是新手；您能否推荐适当的路径来产生所需的输出？

非常感谢，这一直让我发疯。

**编辑：**简而言之 - 仅匹配前 6 名（AABBCD：具有 2As、2Bs、1C、1D）并且第 3 列的最终总和 <= 18000 美元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:42:13.287

Here is also an awk version you could try:

```
awk -F\| '
  NR<=set{
    A[NR]=$0
    total+=$NF
    values[NR]=$3
    next
  }

  total>treshold{
    max=0
    for(i in values) if (values[i]>max){
      max=values[i]; j=i
    }
    if ( max > $NF) {
      A[j]=$0
      total+=$NF-max
      values[j]=$NF
    }
  }

  END{
    print total; for(i in A) print A[i]
  }
' set=6 treshold=18000 file | sort 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:48:31.710

这是一段原始代码，您可以从中轻松适应您的需要

```
import csv
with open('input.csv') as f_in, open('output.csv', 'w') as f_out :
   csv_r = csv.reader(f_in, delimiter='|')
   csv_w = csv.writer(f_out, delimiter='|')
   col_sum = 0
   for row in csv_r :
       if len(row) == 0 :
           continue
       elif len(row) == 3 :
           letter, person, value = row
           col_sum += int(value)
           if col_sum < 1800 :
               csv_w.writerow(row)
           else :
               row[2] = 0
               csv_w.writerow(row) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T23:24:45.073

如果我正确理解了一切……就这样吧。

```
import csv

def get_subset(rows):
    sub_sets = []
    #get all combinations of rows
    for L in range(0, len(rows)+1):
        for subset in itertools.combinations(rows, L):
            sub_sets.append(subset)

    #get all combinations less than six
    lessthansix = filter(lambda x: True if len(x) <= 6 else False, sub_sets)
    #get all combinations less than or equal to max
    lessthanmax = filter(lambda x: True if sum([int(col[2]) for col in x]) <= 18000 else False, lessthansix)
    #sort the less than max groups by sum of col 3
    closesttomax = sorted(lessthanmax, reverse=True, key=lambda x: sum([int(col[2]) for col in x])) 

    return closesttomax[0]

with open("test.csv", 'r') as f:
    reader = csv.reader(f, delimiter="|")
    #filter out all rows that have col 3 less than 1800
    rows = [row for row in reader if int(row[2]) > 1800]
    subset = get_subset(rows)
    sorted_rows = sorted(subset, key=lambda x: x[0])
    with open("out.csv", 'w') as o:
        writer = csv.writer(o)
        print sorted_rows
        print sum([int(col[2]) for col in sorted_rows])
        for row in sorted_rows:
            writer.writerow(row) 
```

# mysql - 和/加入后条件不起作用

> ID：15580587
> 
> 赞同：0
> 
> 时间：2013-03-22T22:05:06.850
> 
> 标签：mysql

无法弄清楚如何在最后一次内部连接之后添加条件。最后一个条件 lc.unsubscribed_c <> 1 不起作用..我也试过 AND。不知道如何让它工作。

```
SELECT 
l.first_name,
l.last_name,
lc.code_c,
lc.unsubscribed_c,
ea.email_address
FROM email_addr_bean_rel eabr
JOIN email_addresses ea
ON eabr.email_address_id = ea.id
AND eabr.deleted = 0
JOIN leads l
ON eabr.bean_id = l.id
AND l.deleted = 0
INNER JOIN
leads_cstm lc ON l.id = lc.id_c
WHERE
lc.unsubscribed_c <> 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:13:17.097

尝试：

```
SELECT 
l.first_name,
l.last_name,
lc.code_c,
lc.unsubscribed_c,
ea.email_address
FROM email_addr_bean_rel eabr
JOIN email_addresses ea ON eabr.email_address_id = ea.id
JOIN leads l ON eabr.bean_id = l.id
INNER JOIN leads_cstm lc ON l.id = lc.id_c
WHERE
lc.unsubscribed_c <> 1
AND eabr.deleted = 0
AND l.deleted = 0 
```

# mysql - 如何将巨大的 excel 电子表格导入 mysql 中的表？

> ID：15580588
> 
> 赞同：0
> 
> 时间：2013-03-22T22:05:09.010
> 
> 标签：mysql, excel, import

我有很多巨大的 excel 电子表格（比如 1000 个文件，每个文件有 65000 行），需要导入 mysql。我应该使用 JAVA 并使用 excel 库吗？我应该用 PHP 做吗？你能给我示例代码来将一个简单的 excel 文件导入 mysql 表吗？

谢谢，

阿米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:10:26.957

如果你使用 Ruby on Rails，你可以这样做：

```
require 'csv'    

csv_text = File.read('...')
csv = CSV.parse(csv_text, :headers => true)
csv.each do |row|
  row = row.to_hash.with_indifferent_access
  YourModel.create!(row.to_hash.symbolize_keys)
end 
```

# android - 如何找出android设备是否有蜂窝无线电模块？

> ID：15580590
> 
> 赞同：3
> 
> 时间：2013-03-22T22:05:25.307
> 
> 标签：android, tablet, gsm, imei, cdma

我怎样才能确定该设备确实有 gsm、cdma 或其他蜂窝网络设备（不仅仅是 WiFi）？我不想检查当前连接的网络状态，因为设备此时可能处于离线状态。而且我不想通过 ((TelephonyManager) act.getSystemService(Context.TELEPHONY_SERVICE)).getDeviceId() 检查设备 ID，因为某些设备只会为您提供多态或虚拟设备 ID。

实际上，我需要准确检查手机设备是否跳过 TelephonyManager.getDeviceId 并在那些没有蜂窝无线电的设备上执行 Settings.Secure.ANDROID_ID 检查。我至少有一台平板电脑（Storage Options Scroll Excel 7"），每次您询问时都会返回不同的 IMEI，尽管它应该返回 null，因为它没有单元无线电（这里的情况相同：[Android: getDeviceId() 返回一个 IMEI， adb shell dumpsys iphonesubinfo 返回 Device ID=NULL](https://stackoverflow.com/questions/11518113)）。但我需要有可靠的设备 id，每次我问都一样。

我很高兴听到你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:09:42.090

如果您在商店中发布，并且您想限制您的应用程序仅对实际手机可见，您可以`<uses-feature>`在清单中添加一个要求`android.hardware.telephony`. [从文档](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)中检查这是否适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:26:43.140

以防万一有人需要完整的解决方案：使用反射是因为某些固件版本上可能不存在某些东西。MainContext - 主要活动上下文。

```
 static public int getSDKVersion()
{
    Class<?> build_versionClass = null;

    try
    {
        build_versionClass = android.os.Build.VERSION.class;
    }
    catch (Exception e)
    {
    }

    int retval = -1;
    try
    {
        retval = (Integer) build_versionClass.getField("SDK_INT").get(build_versionClass);
    }
    catch (Exception e)
    {
    }

    if (retval == -1)
        retval = 3; //default 1.5

    return retval;
}

static public boolean hasTelephony()
{
    TelephonyManager tm = (TelephonyManager) Hub.MainContext.getSystemService(Context.TELEPHONY_SERVICE);
    if (tm == null)
        return false;

    //devices below are phones only
    if (Utils.getSDKVersion() < 5)
        return true;

    PackageManager pm = MainContext.getPackageManager();

    if (pm == null)
        return false;

    boolean retval = false;
    try
    {
        Class<?> [] parameters = new Class[1];
        parameters[0] = String.class;
        Method method = pm.getClass().getMethod("hasSystemFeature", parameters);
        Object [] parm = new Object[1];
        parm[0] = "android.hardware.telephony";
        Object retValue = method.invoke(pm, parm);
        if (retValue instanceof Boolean)
            retval = ((Boolean) retValue).booleanValue();
        else
            retval = false;
    }
    catch (Exception e)
    {
        retval = false;
    }

    return retval;
} 
```

# mysql - 如何在 MySQL 中做到这一点？分组还是加入？

> ID：15580591
> 
> 赞同：0
> 
> 时间：2013-03-22T22:05:26.200
> 
> 标签：mysql, sql, database

事件表：

```
id  user    type    creation_date   update_date

1   A       AAA     1111            3333
2   A       BBB     2222            4444
3   A       CCC     3333            5555
4   A       DDD     4444            6666
5   B       AAA     3333            4444
6   B       BBB     4444            5555
7   B       CCC     5555            6666
8   C       AAA     2222            3333
9   C       BBB     1111            7777
10  C       CCC     3333            4444
11  C       DDD     4444            9999 
```

任务：

查找所有至少有一个 DDD 事件并且该用户在 creation_date 之前的最新非 DDD 事件与在 update_date 之前的最新非 DDD 事件不同的所有用户。

所以对于上面的记录：

用户 A 有一个 DDD 事件。好的。但是最后创建的非 DDD 事件和最后更新的非 DDD 事件是相同的（事件 #3）。因此从结果集中排除。

用户 B 没有 DDD 事件。因此从结果集中排除。

用户 C 有一个 DDD 事件。最后创建的非 DDD 事件（#10）与最后更新的非 DDD 事件（#9）不同。所以包含在结果集中。

结果集：

```
user
C 
```

我尝试了不同的东西，包括 GROUP BY 和 EXISTS。但是我很难对每组记录进行排序。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:16:30.990

这是一个更好的主意：

```
SELECT e.usr
FROM  (SELECT usr FROM event WHERE type = 'DDD') u
JOIN   event e USING (usr)
WHERE  e.type <> 'DDD'
GROUP  BY e.usr
HAVING NOT EXISTS (
   SELECT 1 FROM event e0
   WHERE e0.creation_date = max(e.creation_date) 
   AND   e0.update_date   = max(e.update_date)
   AND   e0.usr = e.usr
   AND   e0.type <> 'DDD'
   )
ORDER  BY 1; 
```

这应该和现在一样简单和快速。如果你有正确的索引，这应该*会飞*。

我使用`usr`而不是`user`，因为后者是标准 SQL 中的保留字。

*   在子查询`u`中，获取至少有一行的所有用户`type = 'DDD'`。

*   将此集合加入基表，获取具有不同事件 ( `type <> 'DDD`) 的同一用户的所有行。

*   在该`HAVING`子句中，排除包含 latest`creation_date`和 latest的行的情况`update_date`。

*   此查询甚至适用于基表中的**重复项。**

### 第一次尝试

较慢且不那么聪明：

```
SELECT e.usr
FROM  (SELECT usr FROM event WHERE type = 'DDD') u
JOIN   event e USING (usr)
WHERE  e.type <> 'DDD'
GROUP  BY e.usr
HAVING (SELECT id FROM event WHERE creation_date = max(e.creation_date) AND usr = e.usr AND type <> 'DDD')
    <> (SELECT id FROM event WHERE update_date   = max(e.update_date  ) AND usr = e.usr AND type <> 'DDD')
ORDER  BY 1 
```

*   此查询假定同一用户不能同时有多个事件。否则不靠谱。

[**-> SQLfiddle**显示两者](http://www.sqlfiddle.com/#!2/e2582/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:38:56.477

我仍然想知道这是否可以简化一点，但你可以使用这个：

```
SELECT DISTINCT user
FROM   yourtable
WHERE  user NOT IN (
  SELECT user
  FROM   yourtable t1
  WHERE
    EXISTS (
      SELECT   NULL
      FROM     yourtable t2
      WHERE    t2.type!='DDD' AND t1.user=t2.user
      GROUP BY user
      HAVING   max(t2.creation_date)=t1.creation_date
             AND max(t2.update_date)=t1.update_date)
  )
  AND EXISTS (SELECT null
              FROM yourtable t2
              WHERE t2.user=yourtable.user
                    AND type='DDD') 
```

请[在此处](http://sqlfiddle.com/#!2/41da4/1)查看小提琴。

# javascript - 第四个链接不可见

> ID：15580593
> 
> 赞同：-1
> 
> 时间：2013-03-22T22:05:35.523
> 
> 标签：javascript, jquery, html, css

当您单击生产立方体时，会打开一个弹出窗口。

图片下方的弹出窗口有四个链接。

但我只能看到三个链接。

怎么看第四个链接。

[http://jsfiddle.net/Lx7kx/7/embedded/result/](http://jsfiddle.net/Lx7kx/7/embedded/result/)

```
<div class="cubeCellProduction" data-text="Production" data-caption="&lt;a style='padding-left: 30px; font-size: 14px; color: grey;' href='/' &gt;Work Orders&lt;/a&gt; &lt;div&gt; &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' &gt;Projects&lt;/a&gt; &lt;/div&gt; 
                    &lt;div&gt;&lt;a style='padding-left: 42px; font-size: 14px; color: grey;' &gt; Work Flow &lt;/a&gt;&lt;/div&gt; 
                    &lt;a style='padding-left: 42px; font-size: 14px; color: grey;' &gt;Reports&lt;/a&gt;"
                    data-image="http://intra.defie.co/images/Desktop_icons_02.07.13/production.png"></div>

 $('document').ready(function() {
            window.setTimeout(function() {
                $('.cubeCellProduction').each(function() {
                    var htmlText = $(this).attr('data-text');
                    $(this).append('<div class="cubeTextStyleProduction">' + htmlText + '</div>');

                    $(this).hover(

                    function() {

                        $(".cubeTextStyleProduction").addClass("hovered").append("<span class='divStockProduction'>Production</span>");

                    },

                    function() {
                        $(this).find("span:last").remove();
                        $(".cubeTextStyleProduction").removeClass("hovered");

                    });
                });
            }, 600);

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:07:38.953

`.caption`'s`max-height`正在阻止显示最后一个元素。

```
.caption { max-height: 90px !important; } 
```

`max-height`需要增加以适应隐藏元素或（理想情况下）您应该使用并`min-height`实现`padding`所需的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:11:54.790

我怀疑这也可能与您的第二个和第三个链接在 div 内的事实有关，但第一个和第四个不是。那是你想做的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:45:59.997

`.caption`类设置为`height: 90px !important;`. 更改为`height: auto;`，这将解决任意数量的链接的问题。

# ajax - angularjs $scope.$apply() 不会更新 ajax IE9 上的选择列表

> ID：15580598
> 
> 赞同：3
> 
> 时间：2013-03-22T22:05:59.837
> 
> 标签：ajax, select, angularjs, internet-explorer-9

所以为了简单起见，我试图用我从 ajax 调用中获得的新项目列表来更新我的选择列表。列表中有项目。我将模型设置为新列表并执行 $scope.$apply()。这在 Firefox 中效果很好，但在 IE 中无效。我究竟做错了什么？是否有一些我缺少的 IE9 东西？（我现在已经找了几个小时，准备放弃了）。感谢我能得到的所有帮助。

HTML：

```
<select 
  ng-model="SelectedParameter" 
  ng-options="Parameter.Name for Parameter in AllParameters">
</select> 
```

JS：

```
$.getJSON("/Cont/GetList", {id: id}, 
  function (result) {
    var allParameters = result.Data.AllParameters;
    $scope.AllParameters = allParameters;
    $scope.$apply();  
  }
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T22:43:52.000

你最好用“Angular 方式”来做这件事。不需要 JQuery！事实上，如果您发现自己以“JQuery 方式”做事，那么您可能做错了。[Mark Rajcok 不久前在 StackOverflow 上对同样的事情提出了一个非常好的问题（和答案）](https://stackoverflow.com/questions/14994391/how-do-i-think-in-angularjs-if-i-have-a-jquery-background)：

**应用程序.js**

```
//declare your application module.
var app = angular.module('myApp', []);

//declare a controller
app.controller('MainCtrl', function($scope, $http) {
   //function to update the list
   $scope.updateList = function () {
      $http.get('/Cont/GetList', function(data) {
         $scope.allParameters = data;
      });
   };

   //initial load
   $scope.updateList();
}); 
```

**索引.html**

```
<!DOCTYPE html>
<html ng-app="myApp">
<head>
   <script src="angular.js"></script>
   <script src="app.js"></script>
</head>
<body>
  <div ng-controller="MainCtrl">
    <button ng-click="updateList()">Update</button>
    <ul>
       <li ng-repeat="parameter in allParameters">{{parameter | json}}</li>
    </ul>

    <!-- EDIT: Because you requested a select.
         or if you wanted to do a select list 
         assuming every object in your array had a "name" property
         you wanted to display in the option text, you could do
         something like the following: 

         (NOTE: ng-model is required for ng-options to work)
         -->
    <select ng-model="selectedValue" ng-options="p as p.name for p in allParameters"></select>

    <!-- this is just to display the value you've selected -->
    <p>Selected:</p>
    <pre>{{selectedValue | json}}</pre>
  </div>
</body>
</html> 
```

* * *

**编辑：IE中的一个常见问题**

因此，首先，如果您在 IE 中遇到问题，我建议您按 F12 并查看您在控制台中遇到的错误。

我见过的最常见的问题是破坏 IE 中的内容，这些问题与 IE`console.log()`中不存在的命令有关。如果是这种情况，您需要创建一个存根，如下所示：

```
//stub in console.log for IE.
console = console || {};
console.log = console.log || function () {}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:02:08.657

我认为这是一个IE问题。更新前尝试设置`display:none`，更新后删除`display`设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T22:13:35.840

我相信最终问题出在这个[错误上。](http://support.microsoft.com/kb/276228)几天来，我一直在用非常相似的东西拔头发，从另一个中筛选出来。

一天结束时，选项被动态添加，而 IE9 只是扼杀了它。

```
<div class="col-lg-2">
    <div class="form-group">
        <label>State</label>
        <select data-ng-model="orderFilter.selectedState"
                data-ng-options="s.StateAbbr for s in states"
                data-placeholder="choose a state…"
                class="form-control">
            <option value=""></option>
        </select>
    </div>
</div>
<div class="col-lg-2">
    <div class="form-group">
        <label>County</label>
        <select data-ng-model="orderFilter.selectedCounty"
                data-ng-options="c.CountyName for c in filteredCounties | orderBy:'CountyName'"
                data-ng-disabled="orderFilter.selectedState == null"
                data-placeholder="Choose a county…"
                class="form-control">
            <option value=""></option>
        </select>
    </div>
</div> 
```

问候，斯蒂芬

# wordpress - Wordpress：向 query_posts 添加过滤器以仅显示“日期”设置为今天或未来的帖子

> ID：15580600
> 
> 赞同：0
> 
> 时间：2013-03-22T22:06:07.803
> 
> 标签：wordpress, date, filter, publish

我正在使用此查询来显示我的帖子：

```
$today = getdate();
$year=$today["year"];
$month=$today["mon"];
$day=$today["mday"];

query_posts( $query_string.'order=ASC' . '&post.status=future,publish'.'&year='.$year.'&monthnum='.$month );
?> 
```

现在我想添加一个过滤器以仅显示今天已发布或将来发布的帖子。

示例：今天是 3 月 22 日。PostA 于 3 月 1 日发布，PostB 今天发布，PostC 将在 3 月 24 日发布（状态“未来”已在我的查询中，因此仍将显示）。我的新查询过滤器应该只显示 PostB 和 PostC。

提前非常感谢！

:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T22:18:30.453

Try This:

```
$archive_year  = get_the_time('Y'); $archive_month = get_the_time('m'); $archive_day   = get_the_time('d'); query_posts('year=' .$archive_year .'&monthnum=' .$archive_month .'&day=' .$archive_day); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:53:04.197

尝试这个 ：

```
// Create a new filtering function that will add our where clause to the query
  function filter_where( $where = '' ) {
$today = date('Y-m-d');
  // posts for today and future
$where .= " AND post_date >= $today ";
return $where;
  }

  add_filter( 'posts_where', 'filter_where' );
  $query = new WP_Query( $query_string );
  remove_filter( 'posts_where', 'filter_where' ); 
```

# ssl - 如何在 nginx 终止 SSL 时正确使用 force-ssl 标志

> ID：15580602
> 
> 赞同：1
> 
> 时间：2013-03-22T22:06:15.133
> 
> 标签：ssl, proxy, nginx, meteor

我在 nginx 后面有流星 - nginx 正在监听 443。如果我在流星中将 force-ssl 设置为 true，则手册建议“设置标准 x-forwarded-proto 标头以使 force-ssl 包工作。”

这是否意味着我添加了 proxy_set_header X-Forwarded-Proto $proxy_add_x_forwarded_for; 在我的 nginx 配置中？

当我已经拥有 add_header Strict-Transport-Security max-age=31536000; 和 add_header X-Frame-Options DENY；在我的 nginx.conf 中？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:50:34.380

目前，如果它用于多个流星实例，那么 nginx 背后的流星可能不是一个好主意，因为它们在释放 DDP 代理之前无法共享客户端的状态。但是，如果根据[文档](http://docs.meteor.com/#forcessl)它是单个实例，则必须在 nginx 配置中设置该标头。

这只确保如果在没有 SSL 的情况下加载流星，它会强制浏览器使用 SSL。如果您已经有一个 nginx 设置可以为您执行此操作，那么 force-ssl 包实际上不会为您做太多额外的事情。

# android - ListView 显示不正确的标题

> ID：15580609
> 
> 赞同：0
> 
> 时间：2013-03-22T22:07:13.360
> 
> 标签：android, xml, listview, rss

我有一个简单的应用程序，可以`XML`从此处的 pc worlds `RSS`feed 中提取文件：

**[http://feeds.pcworld.com/pcworld/latestnews](http://feeds.pcworld.com/pcworld/latestnews)**

我想显示标题的名称，`ListView`然后当用户选择一个文章时，文章会在浏览器窗口中打开。

该应用程序正在工作，唯一的问题是标题没有在 ListView 中正确显示。

它应该是这样的：

**使用 Windows 8 让您的网站脱颖而出**

但它是这样的：

**com.example.simplerss.Item@424b9998**

有任何想法吗？

这是我的代码`MainActivity`

```
public class MainActivity extends ListActivity {

ArrayAdapter<Item> adapter;
List<Item>items;//Holds item objects containing info relating to element pulled from XML file.
Item item;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //initialize variables
    items = new ArrayList<Item>();

    new PostTask().execute();

    adapter=  new ArrayAdapter<Item>(this, android.R.layout.simple_list_item_1, items);
    setListAdapter(adapter);        

}

private InputStream getInputStream(URL url) {
    try{
        return url.openConnection().getInputStream();
    }catch(IOException e){
        return null;
    }
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Uri uri = items.get(position).getLink();
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(intent);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

//ASYNC CLASS
private class PostTask extends AsyncTask<String, Integer, String>{

    @Override
    protected String doInBackground(String... arg0) {
        try{
            //link to data source
            URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

            //Set up parser
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

            //get XML from input stream
            InputStream in = getInputStream(url);
            if (in == null) {
                throw new Exception("Empty inputstream");
            }
            xpp.setInput(in, "UTF_8");

            //Keep track of which tag inside of XML
            boolean insideItem = false;

            //Loop through the XML file and extract data required
            int eventType = xpp.getEventType();

            while (eventType != XmlPullParser.END_DOCUMENT) {

                if (eventType == XmlPullParser.START_TAG) {
                    Log.v("ENTER", String.valueOf(xpp.getEventType()));

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;

                        //Create new item object
                        item = new Item();

                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem){
                            item.setTitle(xpp.nextText());
                            Log.i("title", item.getTitle());
                        }

                    } 

                    else if (xpp.getName().equalsIgnoreCase("description")) {
                        if (insideItem){
                            item.setDescription(xpp.nextText());
                        }
                    }

                    else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem){
                            item.setLink(Uri.parse(xpp.nextText()));                            
                        }
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){

                    insideItem=false;
                    //add item to list
                    items.add(item);

                }

                eventType = xpp.next(); //move to next element
                publishProgress();
            }

                } catch (MalformedURLException e) {

                    e.printStackTrace();

                } catch (XmlPullParserException e) {

                    e.printStackTrace();

                } catch (IOException e) {

                    e.printStackTrace();

                }
                catch (Exception e) {

                    e.printStackTrace();

                }

        return "COMPLETED";
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        adapter.notifyDataSetChanged();

    }

    public void onPostExecute(String s) {
        Toast.makeText(getApplicationContext(), s + " Items: " + items.size(), Toast.LENGTH_SHORT).show();
        adapter.notifyDataSetChanged();
    }

} 
```

}

和`Item`班级

```
public class Item {

//Variables
private String title;
private Uri link;
private String description;

public Item() {
    super();
}

public String getTitle() {
    return title;
}
public void setTitle(String title) {
    this.title = title;
}
public Uri getLink() {
    return link;
}
public void setLink(Uri link) {
    this.link = link;
}
public String getDescription() {
    return description;
}
public void setDescription(String description) {
    this.description = description;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:18:24.227

覆盖中的`toString()`方法`Item`。

```
@Override
public String toString() {
    return title;
} 
```

这应该可以解决您的问题。现在，ArrayAdapter 将其视图的文本设置为 Item.toString()，但这是 Object 的默认方法，它返回 Object 的 ID。通过覆盖它，你给它一个有意义的值，在你的例子中是标题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T22:18:49.180

我认为问题在于：

```
else if (xpp.getName().equalsIgnoreCase("title")) {
        if (insideItem){
            item.setTitle(xpp.nextText());
            Log.i("title", item.getTitle());
        }
} 
```

这里，`getName()`是来自 Java [Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getName%28%29)对象的方法。我认为您想要的方法是[readContent() 。](http://www.extreme.indiana.edu/xgws/xsoap/xpp/download/PullParser2/doc/api/org/gjt/xpp/XmlPullParser.html#readContent%28%29)[我没有使用过这个库，所以可能不完全正确，但你当然可以在docs](http://www.extreme.indiana.edu/xgws/xsoap/xpp/download/PullParser2/doc/api/)中找到你需要的东西。

# java - 从java现场运行php文件？

> ID：15580610
> 
> 赞同：0
> 
> 时间：2013-03-22T22:07:13.703
> 
> 标签：java, php, web

我有以下代码。

```
 String name = "hello";
    String pass = "testing";
    String des = "this is info";

    String u = "http://mysite.com/insertinfo.php?name=" + name + "&pass=" + pass + "&description=" + des;

    URL url = new URL(u);
    url.openConnection(); 
```

由于某种原因，它没有在网站上运行 php 脚本，我不知道出了什么问题，请帮忙！

我知道脚本运行正常，如果我把它放在我的网络浏览器中，它会很好地插入信息，但它不会在 Java 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:23:51.763

`openConnection()`实际上并没有加载页面。您需要获取从中`UrlConnection`返回的对象，然后`connect()`（`getContent()`也许您不需要`getContent()`，请先尝试）

例如

```
String name = "hello";
String pass = "testing";
String des = "this is info";

String u = "http://mysite.com/insertinfo.php?name=" + name + "&pass=" + pass + "&description=" + des;

URL url = new URL(u);
UrlConnection conn = url.openConnection();
conn.connect();
conn.getContent(); 
```

更多信息在这里：[http ://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)

# sql - 如果不存在记录，则 SQL 插入

> ID：15580613
> 
> 赞同：1
> 
> 时间：2013-03-22T22:07:22.407
> 
> 标签：sql

我正在尝试通过 PHP 将几个值插入到表中，如下所示：

```
$sql = "INSERT INTO table1(Field1, Field2)
            Values (?, ?)
            ";
    $stmt = $db-> prepare($sql);
    $stmt->execute(array($field1, $field2));
    $stmt->closeCursor(); 
```

字段 1 是主键。

但是，如果表中还没有 field1 的该记录的实例，我只想插入 Field1（例如，如果已经有一个 field1 记录为“橙色”，则如果被要求插入另一个“橙色”，则不应插入）。

我觉得这一定很简单，但我正在尝试的任何事情似乎都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:10:26.250

尝试这个

```
INSERT INTO table1(Field1, Field2)
SELECT @field1, @field2 from dual
WHERE not exists (select 1 from table1 where field1 = @field1);
--@field1, @field2 are your parameter values 
```

# jquery - jQuery Tablesorter - 禁用排序和过滤

> ID：15580617
> 
> 赞同：2
> 
> 时间：2013-03-22T22:07:32.423
> 
> 标签：jquery, filter, tablesorter

我从[http://mottie.github.com/tablesorter/docs/example-options-headers.html](http://mottie.github.com/tablesorter/docs/example-options-headers.html)得到了这段代码：

```
// BONUS TIP: disable a column using jQuery data directly
// but do it before the table initializes
$("table thead th:eq(5)").data("sorter", false); 
```

这可行，我可以添加如下所示的第二行来禁用过滤。但是，我想将它们组合成一行。我该怎么做？

```
// I Want to combine this into the prev line   
$("table thead th:eq(5)").data("filter", false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:25:33.113

**完全未经**测试，但试试这个

```
$("table thead th:eq(5), table thead th:eq(7)").data("sorter", false).data("filter", false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:32:45.680

我想补充一点，您可以组合 jQuery`data`函数：

```
$("table thead th:eq(5), table thead th:eq(7)").data({
    sorter: false,
    filter: false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T13:35:59.657

要禁用表格单元格的排序，请在标题中添加类

```
class="sorter-false" 
```

或者您可以在“tablesorter”初始化中添加参数：

```
headers : { 0 : { sorter: false } } 
```

要禁用过滤器在初始化中添加参数

```
headers: { 0: { filter: false} } 
```

DOM（Header）元素，如从 0 开始的数组

**示例**：

```
 $(".someclass").tablesorter({
        widgets : [ "filter" ],
        headers: {  0: {filter: false},
                    1: {sorter: false, filter: false},
                    2: {sorter: false}
        }
    }); 
```

# mysql - 可选地在使用活动记录的 codeigniter 中使用表前缀

> ID：15580618
> 
> 赞同：0
> 
> 时间：2013-03-22T22:07:33.720
> 
> 标签：mysql, codeigniter, activerecord, prefix

我想产生像这样的sql：

```
select id, "file_name.png" from prefix_table; 
```

在 CI 中，通过使用活动记录，我使用以下代码对其进行编码：

```
$this->db->select('id, "file_name.png"', FALSE)->from('prefix_table'); 
```

但我得到的是：

```
select id, prefix_"file_name.png" from prefix_table; 
```

有没有办法使用可选的表前缀？或者可能是，在选择使用活动记录时如何不使用前缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:07:43.140

这是目前 CodeIgniter 中的一个限制/错误——如果没有前缀插入，您将无法使用这样的字符串。我建议手动编写查询。我已经[在 Github 上](https://github.com/EllisLab/CodeIgniter/issues/2353)为它打开了一个问题。

此外，您应该在选择这样的字符串时使用`AS column`定义，否则字符串名称也将是列名，您最终会得到如下内容：

```
array(
    'id' => 2,
    'file_name.png' => 'file_name.png'
) 
```

# android - Nexus 10/Android 4.2.2 上的 glTexSubImage2D 性能缓慢（三星 Exynos 5 w/ Mali-T604）

> ID：15580619
> 
> 赞同：6
> 
> 时间：2013-03-22T22:07:34.547
> 
> 标签：android, opengl-es, textures, egl

我有一个 Android 应用程序，可以将视频解码为 yuv420p 格式，然后使用 OpenGLES 渲染视频帧。我使用 glTexSubImage2D() 将 y/u/v 缓冲区上传到 GPU，然后使用着色器进行 YUV2RGB 转换。所有 EGL/OpenGL 设置/渲染代码都是本机代码。

现在我并不是说我的代码没有问题，但考虑到相同的代码在 iOS (iPad/iPhone)、Nexus 7、Kindle HD 8.9、三星 Note 1 和其他一些便宜的中国平板电脑 (A31/ RockChip 3188) 运行 Android 4.0/4.1/4.2。我会说我的代码不太可能是错误的。在这些设备上，glTexSubImage2D() 使用不到 16 毫秒来上传 SD 或 720P 高清纹理。

但是，在 Nexus 10 上，glTexSubImage2D() 处理 SD 或 720P HD 纹理大约需要 50~90ms，这对于 30fps 或 60fps 视频来说太慢了。

我想知道

1）如果我应该选择不同的纹理格式（RGBA 或 BGRA）。有没有办法检测 GPU 使用的最佳纹理格式是什么？

2) 如果在所有其他 SOC 上存在“关闭”但在 Exynos 5 上设置为“开启”的功能。例如，自动 MIPMAP 生成选项。（我把它关了，顺便说一句）

3) 如果这是三星 Exynos SOC 的已知问题 - 我找不到 Exynos CPU 的支持论坛

4) 配置 EGL 表面时我需要设置任何选项吗？比如，透明度，表面格式等？（我不知道我在说什么）

5) 这可能意味着 GPU 正在进行隐式格式转换，但我检查了始终使用 GL_LUMINANCE。它再次适用于所有其他平台。

6）还有什么？

我的 EGL 配置：

```
const EGLint attribs[] = {
    EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
    EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
    EGL_BLUE_SIZE, 8,
    EGL_GREEN_SIZE, 8,
    EGL_RED_SIZE, 8,
    EGL_NONE
}; 
```

初始设置：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, ctx->frameW, ctx->frameH, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, NULL); /* also for U/V  */ 
```

随后的部分替换：

```
glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, ctx->frameW, ctx->frameH, GL_LUMINANCE, GL_UNSIGNED_BYTE, yBuffer); /*also for U/V */ 
```

我正在尝试以 SD 或 720P HD 分辨率以 ~30FPS 或 ~60FPS 渲染视频。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T00:13:28.337

这是我们已向 ARM 报告的已知驱动程序问题。未来的更新应该会修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T00:31:17.133

*编辑*状态更新

我们现在已经设法重现了公共固件上一个路径的缓慢上传条件，您可能会遇到这种情况，这将在下一个驱动程序版本中得到修复。

如果您为正在上传的纹理双缓冲纹理 ID（例如，帧 N = ID X、N+1 = ID Y、N+2 = ID X、N+3 = ID Y 等）应该有助于避免这种情况在当前固件上。

谢谢， 异

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-05T07:46:33.667

我可以确认这已在 Android 4.3 中得到修复 - 我看到 RGBA 格式的性能提高了 2-3 倍，而其他纹理格式的性能提高了 10-50 倍，超过了 Android 4.2.2。这些结果适用于 glTexImage2D 和 glTexSubImage2D。（还不能添加评论，所以我不得不把它放在这里）

编辑：如果您坚持使用 4.2.2，则可以尝试使用 RGBA 纹理，它应该具有更好的性能（3-10 倍左右，具有更大的二次幂纹理大小）。

# javascript - 使用 Javascript 从 bytearray 下载文件

> ID：15580620
> 
> 赞同：1
> 
> 时间：2013-03-22T22:07:38.190
> 
> 标签：javascript, jquery, file

我在我的 asp 网络应用程序中有一个按钮，当按下它时，我正在调用一个返回字节数组的休息服务。

这个字节数组实际上是我需要在按下按钮时在浏览器中开始下载的文件。我怎样才能做到这一点？

我正在考虑将字节数组写入响应并设置标题。

这种想法是否正确，是否有人有一些代码示例？

--------- 3/25 更新---------------- 谢谢贾斯汀，但还不是我需要的。请查看此链接，它将返回一个文件供下载。我需要做的是有一个事件客户端，它将获取此文件以供下载，而无需重定向到此页面。它必须从我的页面而不是这个链接下载。

[http://ops.epo.org/3.0/rest-services/published-data/images/US/5000001/PA/firstpage.pdf?Range=1](http://ops.epo.org/3.0/rest-services/published-data/images/US/5000001/PA/firstpage.pdf?Range=1)

如果您使用 Fiddler 检查它，您将看到 pdf 是如何以二进制形式接收的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:07:37.587

您可以将其设置`responseType`为**arraybuffer**并以这种方式访问​​它。甚至还有一种使用 onprogress 事件流式传输数据的方法。JavaScript 已经走过了漫长的道路。

```
var oReq = new XMLHttpRequest();
oReq.open("GET", "/myfile.png", true);
oReq.responseType = "arraybuffer";

oReq.onload = function (oEvent) {
  var arrayBuffer = oReq.response; // Note: not oReq.responseText
  if (arrayBuffer) {
    var byteArray = new Uint8Array(arrayBuffer);
    for (var i = 0; i < byteArray.byteLength; i++) {
      // do something with each byte in the array
    }
  }
};

oReq.send(null); 
```

[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)

如果您的意思是 web 服务没有返回二进制数据，而是 JSON 数据，例如：`[0,1,3,4]`那么这是一个不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:28:23.567

据我所知，您可以用 javascript 做的最接近的事情是让服务器将数据解析为文本的 ajax 请求

# xml - XML IF-THEN-ELSE

> ID：15580622
> 
> 赞同：-1
> 
> 时间：2013-03-22T22:07:49.393
> 
> 标签：xml, if-statement

我有一段程序，我试图转换它以获得每个寄存器的不同输出。如果它是寄存器#5，那么我希望它打印 THEN TEXT，如果它不是 #5，则打印 ELSE TEXT。它工作了一半，但似乎当我从寄存器 1 打印“X-Report”时，它显示“Store A XStore A ZStore A ZZ ...”，如果我从寄存器 5 打印，它似乎显示“X ReportZ ReportZZ Report.. .' 我认为一旦它到达 IF 语句的末尾，它就会停止寻找打印更多信息。这是我的代码的副本：

```
<TABLE>
  <FONT> "Large" </FONT>
  <BORDER> tball </BORDER>
  <COLUMNHEADER>
       <ALIGNMENT> "^~" </ALIGNMENT>
       <WIDTH> PageWidth </WIDTH>
       <IF>
           <CONDITION> (Register.Number = 5 &amp; Transaction.Type = transactionXReport) </CONDITION>
           <THEN> 
               <TEXT> "X REPORT" </TEXT>
           </THEN>
           <ELSE>
               <TEXT> "STORE A X" </TEXT>
           </ELSE>
       </IF>
       <IF>
           <CONDITION> (Register.Number = 5 &amp; Transaction.Type = transactionZReport) </CONDITION>
           <THEN> 
               <TEXT> "Z REPORT" </TEXT>
           </THEN>
           <ELSE>
               <TEXT> "STORE A Z" </TEXT>
           </ELSE>
       </IF>
       <IF>
           <CONDITION> (Register.Number = 5 &amp; Transaction.Type = transactionZZReport) </CONDITION>
           <THEN> 
               <TEXT> "ZZ REPORT" </TEXT>
           </THEN>
           <ELSE>
               <TEXT> "STORE A ZZ" </TEXT>
           </ELSE>
       </IF>
       <IF>
           <CONDITION> (Register.Number = 5 &amp; Transaction.Type = transactionXReport) </CONDITION>
           <THEN> 
               <TEXT> "BLIND REPORT" </TEXT>
           </THEN>
           <ELSE>
               <TEXT> "STORE A BLIND" </TEXT>
           </ELSE>
       </IF>
   </COLUMNHEADER>
</TABLE> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:29:46.047

您的代码是用某种基于 XML 的编程语言编写的，但我不认识这种编程语言，您也没有告诉我们任何有关它的信息。那么，如果我们对编写程序的语言一无所知，我们如何帮助您调试程序呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T00:54:12.340

我假设这是 Microsoft Dynamics RMS Register XML 代码。我建议通过打印 Transaction.Type 的值来调试它，它必须匹配所有列出的事务类型。

# mercurial - 如何使 TortoiseHg 工作台取消选中提交窗口中的所有文件

> ID：15580625
> 
> 赞同：1
> 
> 时间：2013-03-22T22:04:20.033
> 
> 标签：mercurial

使用 TortoiseHg 工作台，当我切换到提交窗口时，会检查我在本地更改的所有文件是否提交。我经常选择一个文件（不更改检查）来查看差异是什么。由于这是我脑海中唯一的文件，我输入了一条评论并点击了提交，意识到我已经提交了所有更改的文件！

有没有办法改变默认情况下不检查文件的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:26:22.937

不幸的是没有。您可以做的最好的事情是在执行任何其他操作之前点击列顶部的框以清除所有内容。（对照 THG v2.5 检查。）

# c# - 泛型与 IBindingList 和 BindingList 混淆

> ID：15580627
> 
> 赞同：3
> 
> 时间：2013-03-22T22:08:08.240
> 
> 标签：c#, generics, casting

我正在开发一个基本上是实时 linq 的小型库。我应该能够做这样的事情：

```
var list1 = new BindingList<int>();
ReadOnlyBindingList<int> live = list1.LiveSelect(i => i + 1); 
```

在这里，`ReadOnlyBindingList`是我编写的一个通用抽象类，它实现`IBindingList`但不继承`BindingList<T>`. 该`LiveSelect`方法接受一个`BindingList<T>`列表并返回一个实现`ReadOnlyBindingList<T>`抽象类的类。现在我希望能够做到：

```
ReadOnlyBindingList<int> live = list1.LiveSelect(i => i + 1).LiveSelect(i => i * i); 
```

但为了做到这一点，我`LiveSelect`需要采用 a `ReadOnlyBindingList<T>`，这将迫使我添加一个扩展方法`AsReadOnly`，该方法将采用 a`BindingList<T>`并将其包装到继承自的类中`ReadOnlyBindingList<T>`，因此我的代码如下所示：

```
ReadOnlyBindingList<int> live = list1.AsReadOnly().Select(i => i + 1).Select(i => i * i); 
```

或者有`LiveSelect`一个`IBindingList`并被迫在任何地方添加强制转换 from `object`to`TResult`并且当我连接多个时也使编译器无法从用法推断类型`LiveSelect`，这样我的代码需要看起来像这样：

```
var live = list.LiveSelect(i => i + 1).LiveSelect<int, int>(i => i + 1); 
```

有什么办法可以让我的代码看起来像这样：

```
var live = list.LiveSelect(i => i + 1).LiveSelect(i => i + 1); 
```

`list`一个在哪里`BindingList<int>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:04:17.577

为什么不将 LiveSelect 添加到您的 ReadOnlyBindingList 以在内部进行强制转换或所需的转换？

```
var live = list.LiveSelect(i=> i+1)/*this returns a readonlybindinglist*/.LiveSelect(i=> i+1)/*this is the method in bindinglist*/

public ReadOnlyBindingList<T> LiveSelect(Func<T,T> lambda){
  return /* call static method that does liveselect */
} 
```

这是扩展

```
public static ReadOnlyBindingList<T> LiveSelect(this BindingList<T> source, Func<T,T> lamda){
   return /*cast to readonlybindinglist and call static method that does liveselect */
} 
```

# c# - Web API 模型验证问题

> ID：15580630
> 
> 赞同：1
> 
> 时间：2013-03-22T22:08:15.583
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

根据这篇文章[ASP.NET - Model Validation](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api)，我应该可以根据我的模型中的数据注释对模型绑定过程中遇到的错误进行很好的描述。好吧，虽然验证工作正常，但它并没有为我提供很好的错误，而是提供了 JSON 解析错误。

这是我的模型：

```
public class SimplePoint
{
    [Required(ErrorMessage="MonitorKey is a required data field of SimplePoint.")]
    public Guid MonitorKey { get; set; }

    public int Data { get; set; }
} 
```

这是我的验证过滤器：

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
        public override void OnActionExecuting(HttpActionContext actionContext)
        {
            if (actionContext.ModelState.IsValid == false)
            {
                actionContext.Response = actionContext.Request
                    .CreateErrorResponse(HttpStatusCode.BadRequest,                                                                                                
                        actionContext.ModelState);
            }
        }
    } 
```

我必须删除 InvalidModelValidationProvider ，如这篇文章中所述：[ASP.NET - 问题](http://aspnetwebstack.codeplex.com/workitem/270)- Global.asax Application_Start 方法中的此代码退出：

```
GlobalConfiguration.Configuration.Services.RemoveAll(
    typeof (System.Web.Http.Validation.ModelValidatorProvider),
    v => v is InvalidModelValidatorProvider); 
```

这是我使用 Fiddler 的请求：

```
POST http://localhost:63518/api/simplepoint HTTP/1.1
User-Agent: Fiddler
Host: localhost:63518
Content-Length: 28
Content-Type: application/json; charset=utf-8

{"MonitorKey":"","data":123} 
```

这是我的控制器的回复：

```
HTTP/1.1 400 Bad Request
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/json; charset=utf-8
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?QzpcTG9jYWwgVmlzdWFsIFN0dWRpbyBwcm9qZWN0c1xKaXREYXNoYm9hcmRcSml0RGFzaGJvYXJkLldlYi5Nb25pdG9    ySG9zdFxhcGlcc2ltcGxlcG9pbnQ=?=
X-Powered-By: ASP.NET
Date: Fri, 22 Mar 2013 21:55:35 GMT
Content-Length: 165

{"Message":"The request is invalid.","ModelState":{"data.MonitorKey":["Error converting value \"\" to type 'System.Guid'. Path 'MonitorKey', line 1, position 16."]}} 
```

为什么我的数据注释中没有出现错误消息（即“MonitorKey 是 SimplePoint 的必需数据字段”）？在我的验证过滤器中分析 ModelState，我没有看到模型验证器接收到 ErrorMessage。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:12:23.383

似乎答案就像使模型属性可以为空一样简单。这样，他们将通过 JSON 验证，并且基于数据注释的数据模型验证将生效：

```
public class SimplePoint
{
    [Required(ErrorMessage="MonitorKey is a required data field of SimplePoint.")]
    public Guid? MonitorKey { get; set; }

    [Required]
    public int? Data { get; set; }
} 
```

# java - 弹簧自动装配

> ID：15580639
> 
> 赞同：0
> 
> 时间：2013-03-22T22:08:47.607
> 
> 标签：java, spring

我有一个 Spring 3.0 项目，我正在尝试连接它，它依赖于一个库项目（也是 Spring 3.0），该项目有几个类，这些类具有通过**org.springframework.beans.factory.annotation.Value**注入的属性。

我不需要加载具有注入属性的类，也不需要注入属性。我只需要从库项目中自动装配一个特定的类。

我不断收到以下异常：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private java.lang.String com.example.library.controller.App.dir; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'app.achDir'
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
... 38 more
Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'app.achDir'
    at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:173)
    at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:125)
    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:403)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:736)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:713)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    ... 40 more 
```

这是我的 applicationContext.xml 的片段。我已经尝试了以下几个版本，但排除/包含过滤器似乎不起作用。

```
<context:component-scan base-package="com.example.library" >
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Service"/>     
</context:component-scan> 
```

我正在使用答案之一所建议的 PropertyPlaceholderConfigurer，这已经存在于我的项目中。另外，我已经从我的 Spring 配置文件中删除了所有的组件扫描和注释配置。

```
<!-- Define the other the old-fashioned way, with 'ignoreUnresolvablePlaceholders' set to TRUE -->  
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>src/test/resources/my.properties</value>
            <value>my.properties</value>
        </list>
    </property>
   <property name="ignoreResourceNotFound" value="true"/>
</bean> 
```

我应该补充一点，运行单元测试时会发生此错误，该单元测试使用以下注释扩展超类：

```
@TransactionConfiguration(defaultRollback = true,transactionManager="txManager")
@Transactional
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath*:applicationContext.xml")
public abstract class BaseTest { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:03:04.840

如果您需要该库中的单个组件，那么明确定义它可能会更好。例如：

```
<bean id="..." class="com.example.library.SomeComponent">
 <!-- Bean initialization -->
</bean> 
```

...或使用[基于 Java 的容器配置](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)。

如果您确实需要扫描此包，请确保您的排除过滤器正确处理所有可能的情况。堆栈跟踪表明，该组件是用@Controller 注释的，而不是@Service。但是，还应考虑其他选项，例如 @Component 和 @Repository。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:33:27.593

原来有一个我忽略的非常简单的解决方案。我的库项目 jar 包含它的 applicationContext.xml，但我没有意识到。我删除了它，重建了罐子并使其正常工作。

# android - 新的 PayPal 沙盒测试用户帐户

> ID：15580640
> 
> 赞同：2
> 
> 时间：2013-03-22T22:08:48.313
> 
> 标签：android, paypal

我正在尝试创建一个新的 PayPal 沙盒测试买家帐户。

几个月前，我在[http://developer.paypal.com使用了一个非常用户友好的界面。](http://developer.paypal.com)

现在，我想创建一个新帐户，只是注意到 PayPal 再次改变了一切。

它要求我首先在开发者网站上使用我的真实贝宝帐户登录！

即使我使用真实详细信息登录，它也不会显示创建新的沙盒测试用户选项，因为它总是在 2 个月前显示！

我对在哪里创建测试用户帐户感到困惑？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-14T15:57:02.733

您首先使用普通的贝宝帐户凭据登录沙箱

@ [https://developer.paypal.com/](https://developer.paypal.com/)

单击沙盒标题下的帐户。您应该会在右上角看到一个“创建帐户”按钮。

按照步骤完成

# asp.net - 通过转换为 DataView 从 SqlDataSource 检索行数

> ID：15580641
> 
> 赞同：0
> 
> 时间：2013-03-22T22:08:50.330
> 
> 标签：asp.net, listview, sqldatasource, dataview, rowcount

我在从 SqlDataSource 检索总行数时遇到了一些困难。我使用 SqlDataSource 中的 SELECT 语句的结果来创建一个 ListView，但无法生成一些可以让我轻松获得总行数的代码。我不会展示我使用的所有不同代码，而是向您展示简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:08:50.330

假设我有一个名为“dsResults”的 SqlDataSource，它从数据库表中选择某些记录。下面的代码通过 DataView 从该 SqlDataSource 检索 Total Row Count 并让您在 Label 中显示它或在 CASE 语句中使用它（在 Page_Load 处执行）：

```
Dim dssa As New DataSourceSelectArguments()
  dssa.AddSupportedCapabilities(DataSourceCapabilities.RetrieveTotalRowCount)
  dssa.RetrieveTotalRowCount = True
Dim dv As DataView = DirectCast(dsResults.[Select](dssa), DataView)
LabelRows.text = dv.Table.Rows.Count

Select Case dv.Table.Rows.Count
  Case 0
    panelResults.Visible = False
End Select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:18:01.020

如果您将 your 绑定`SqlDataSource`到 a `ListView`，为什么不简单地从 your 获取计数`ListView`？

```
LabelRows.Text = ListView1.Items.Count 
```

# android - Android java.lang.RuntimeException：无法实例化活动

> ID：15580644
> 
> 赞同：1
> 
> 时间：2013-03-22T22:09:15.747
> 
> 标签：android, runtimeexception

我目前遇到来自 Logcat 的以下错误。我已经查看了十多个与此问题类似的其他帖子，但找不到解决我的问题的方法。

```
03-22 17:55:58.777: E/Trace(1172): error opening trace file: No such file or directory (2)
03-22 17:55:58.947: E/AndroidRuntime(1172): FATAL EXCEPTION: main
03-22 17:55:58.947: E/AndroidRuntime(1172): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.schoolwork.capstoneproject/com.schoolwork.capstoneproject.StartingPoint}: java.lang.NullPointerException
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.os.Looper.loop(Looper.java:137)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at java.lang.reflect.Method.invoke(Method.java:511)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at dalvik.system.NativeStart.main(Native Method)
03-22 17:55:58.947: E/AndroidRuntime(1172): Caused by: java.lang.NullPointerException
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:161)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at com.schoolwork.capstoneproject.StartingPoint.<init>(StartingPoint.java:11)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at java.lang.Class.newInstanceImpl(Native Method)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at java.lang.Class.newInstance(Class.java:1319)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-22 17:55:58.947: E/AndroidRuntime(1172):     ... 11 more 
```

这是我的java代码：

```
package com.schoolwork.capstoneproject;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;

public class StartingPoint extends Activity{

    SharedPreferences sharedPreferences = getSharedPreferences("capstone_preferences", Activity.MODE_PRIVATE);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.starting_point);

        Thread verifyStatus = new Thread(){
            public void run(){
                try{
                    sleep(2000);
                }catch(Exception e){
                    e.printStackTrace();
                    Log.e("Thread Error", e.toString());
                }finally{
                    if(sharedPreferences.getBoolean("isLoggedIn", false)){
                        Intent openMainMenu = new Intent(getApplicationContext(), MainMenu.class);
                        openMainMenu.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(openMainMenu);
                    }else{
                        Intent openLoginScreen = new Intent(getApplicationContext(), LoginScreen.class);
                        openLoginScreen.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(openLoginScreen);
                    }
                } //end of try sequence
            }
        }; //end of thread
        verifyStatus.start();
    } //end of onCreate

} 
```

我完全被卡住了，我找不到问题，这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.schoolwork.capstoneproject"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/prog_logo"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".StartingPoint"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".LoginScreen"
            android:label="@string/app_name" >
        </activity>

        <activity
            android:name=".MainMenu"
            android:label="@string/app_name" >
        </activity>

    </application> 

</manifest> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T22:13:16.657

logcat 很清楚。

```
03-22 17:55:58.947: E/AndroidRuntime(1172): Caused by: java.lang.NullPointerException
03-22 17:55:58.947: E/AndroidRuntime(1172):     at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:161)
03-22 17:55:58.947: E/AndroidRuntime(1172):     at com.schoolwork.capstoneproject.StartingPoint.<init>(StartingPoint.java:11) 
```

您正在尝试在方法之外执行代码。这将不起作用：

```
SharedPreferences sharedPreferences = getSharedPreferences("capstone_preferences", Activity.MODE_PRIVATE); 
```

反而：

```
SharedPreferences sharedPreferences; 
```

并在 onCreate()

```
sharedPreferences = getSharedPreferences("capstone_preferences", Activity.MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:14:15.050

你有没有试过`getSharedPreferences(...)`投入`onCreate()`？

```
public class StartingPoint extends Activity{

    SharedPreferences sharedPreferences = null; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.starting_point);

        sharedPreferences; = getSharedPreferences("capstone_preferences", Activity.MODE_PRIVATE); 
```

这样它应该可以工作......干杯！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T22:14:47.213

尝试调用`getSharedPreferences`onCreate 内部以确保您的 Context 存在。不确定这是否是您异常的原因，但值得一试。

# java - 如何将 XML 文件读入数据表类型对象？

> ID：15580646
> 
> 赞同：0
> 
> 时间：2013-03-22T22:09:20.963
> 
> 标签：java, xml, servlets

我试图弄清楚如何将各种 XML 文件读入 HTTP Servlet。XML 文件都代表一个数据表。做这个的最好方式是什么？我试图避免被锁定在一定数量的列中或知道列的名称。

我也不确定存储数据的最佳方式，我对 java 中可用的数据对象不是很熟悉。我在想一个多维数组或列表列表。

谢谢你的任何建议

来自 w3schools 的 XML 文件可能如下所示：

```
<CATALOG>
  <CD>
    <TITLE>Empire Burlesque</TITLE>
    <ARTIST>Bob Dylan</ARTIST>
    <COUNTRY>USA</COUNTRY>
    <COMPANY>Columbia</COMPANY>
    <PRICE>10.90</PRICE>
    <YEAR>1985</YEAR>
  </CD>
  <CD>
    <TITLE>Hide your heart</TITLE>
    <ARTIST>Bonnie Tyler</ARTIST>
    <COUNTRY>UK</COUNTRY>
    <COMPANY>CBS Records</COMPANY>
    <PRICE>9.90</PRICE>
    <YEAR>1988</YEAR>
  </CD>
</CATALOG> 
```

或这个：

```
<fruits>
  <fruit>
    <name>orange</name>
  </fruit>
  <fruit>
    <name>grapes</name>
  </fruit>
  <fruit>
    <name>bananas</name>
  </fruit>
</fruits> 
```

我最终使用 JDOM 并创建了一个字符串列表来存储数据。代码如下，任何建议/反馈表示赞赏。谢谢！

```
 ArrayList<ArrayList<String>> dataList = new ArrayList<ArrayList<String>>();

    SAXBuilder builder = new SAXBuilder();
    URL url = new URL("http://localhost/test/test.xml");     
    InputStream stream = url.openStream();

    Document document = null;         

    try {
        document = builder.build(stream);
    } 
    catch (JDOMException e) {
    }

    // Get Root Element and name
    Element root = document.getRootElement();
    String rootName = root.getName();

    // Get Second Level Elements, the rows of the data table
    List<Element> items = root.getChildren(); 

    // Get column names, using the first element
    List<Element> firstItem = items.get(0).getChildren();
    ArrayList<String> colNames =  new ArrayList<String>();
    for (Element col : firstItem){
        colNames.add(col.getName());
    }
    dataList.add(colNames);

    // Get data
    for (Element item : items) {
        ArrayList<String> row = new ArrayList<String>();
        for (Element col : item.getChildren()) {
            row.add(col.getText());
        }
        dataList.add(row);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:17:49.427

显然有很多方法......

我最喜欢的用于读取 XML 的开源 Java 库是[JDOM](http://www.jdom.org/)。

我最喜欢的用于存储表格数据的通用结构是字符串列表。这是我通常定义它们的方式。列表> myData = new ArrayList>();

# jsf-2 - h:form 正确渲染，但 h:commandLink 未正确渲染。我必须在链接上单击两次

> ID：15580654
> 
> 赞同：2
> 
> 时间：2013-03-22T22:09:47.170
> 
> 标签：jsf-2, facelets, render

我知道这个问题被问了一遍又一遍。我确实喜欢在与此相关的所有问题中提出的建议，并且我在 [我提出的这个问题中做了 BalusC](https://stackoverflow.com/questions/15535730/conditional-image-rendering-using-jstl-cchoose)

告诉我，我还没有成功。所以网络应用程序的流程是：

我登录，成功时布尔loginIn变为真，页面被重定向到home.xhtml。（bean TestBean 和 EnterView 被实例化和 SessionScoped）。如果loggedIn 布尔值为真，则在此页面中我得到4 个链接。

为了不使用 JSTL c:choose 标签（因为 JSTL 和 JSF “一个在视图构建时运行，另一个在视图渲染时运行。” - BalusC）我使用了渲染属性。

出现带有链接的列表，但我必须单击它们两次才能执行应执行的操作。

片段：

```
 <h:form rendered="#{enterView.userBean.loggedIn}">
            <ul id="grileList">
                <li><h:commandLink action="#{menuView.showTestsPage(1)}"
                        value="label1" rendered="#{enterView.userBean.loggedIn}"/></li>
                <li><h:commandLink action="#{menuView.showTestsPage(2)}"
                        value="label2" rendered="#{enterView.userBean.loggedIn}"/></li>
                <li><h:commandLink action="#{menuView.showTestsPage(3)}"
                        value="label3"  rendered="#{enterView.userBean.loggedIn}"/></li>
                <li><h:commandLink action="#{menView.showTestsPage(4)}"
                        value="label4" rendered="#{enterView.userBean.loggedIn}"/></li>
            </ul>
        </h:form> 
```

h:form 它被正确渲染，因此它已经经历了视图渲染阶段，但是当我单击链接时它不执行操作（就在我单击它们两次时），所以它是视图构建时间？？？我读了他们两个，我以为我明白了......

我已将渲染属性放在 commandLinks 中以尝试渲染它们，但我没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:25:40.333

“需要单击两次才能调用操作”的症状可以识别为[JSF 规范问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)的结果，该问题已在即将到来的 JSF 2.2 中修复。

简而言之，如果您有 2 个表单，其中一个仅通过 ajax 更新另一个表单的父组件，那么另一个表单将失去其 JSF 视图状态（`<input type="hidden" name="javax.faces.ViewState">`）。第一次以另一种形式调用 ajax 操作不会调用任何操作，但会添加 JSF 视图状态，然后任何后续操作都会成功。

要解决此问题，您需要在 ajax 渲染中明确指定其他表单的客户端 ID。例如

```
<f:ajax ... render=":someComponent :otherForm" />
...

<h:someComponent id="someComponent">
    <h:form id="otherForm" rendered="#{enterView.userBean.loggedIn}">
        ... 
```

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 7 点
*   [JSF 2.0 中的通信 - 包含另一种表单的内容的 Ajax 呈现](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)

# java - 按钮操作后看不到变量变化

> ID：15580658
> 
> 赞同：1
> 
> 时间：2013-03-22T22:10:10.860
> 
> 标签：java, swing

```
package gameprojekt;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Toolkit;
import javax.swing.JFrame;
import javax.swing.WindowConstants;

//The GameWindow class holds the window
public class Game extends JFrame {

    /*Global variable declaration*/
    private int width;
    private int height;
    private int windowXPos;
    private int windowYPos;

    public static String p1 = "Player1";
    public static String p2 = "Player2";

    public static int playerScore = 0;
    public static int oponentScore = 0;

    public static int player1X;
    public static int Player1Y;
    public static int player2X;
    public static int Player2Y;

    private static boolean running = true;

    public static int status = 0;
    public static JFrame frame = new JFrame("Pong"); 
    //public TestDrawPanel testPanel = new TestDrawPanel();

    public static int getStatus() {
        return status;
    }

    public static void setStatus(int status) {
        Game.status = status;
    }

    // ------------------------------------------------------------

    /**
     * Creates a new JFrame window with the given size and
     * center it based on the screen resolution
     */
    public static final long serialVersionUID = 1L;

      public Game() {
        /*Local variable declaration*/
        //JFrame frame = new JFrame("Pong");
        Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();

        width = (int)dim.getWidth();
        height = (int)dim.getHeight();

        windowXPos = width / 2 - (width / 2) / 2;
        windowYPos = height / 2 - (height / 2) / 2;
        // ------------------------------------------------------------

        // Set size, half of the screen resolution
        frame.setSize(width/2, height/2);
        // Allign the window to the users resolution
        frame.setLocation(windowXPos, windowYPos);
        frame.setVisible(true);
        frame.setResizable(false);
        // By exiting the window using "X" all relevant data is closed
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    }

    /* zum Testen auskommentiert
    @Override
    public void paint(Graphics g) {
        System.out.println("test");
        this.drawPlayer(g);
    }*/

    /**
     * Draw the Player on the given location and with the given size
     * @param g Graphics object
     */
    public void drawPlayer(Graphics g) {

    }

    private static void gameLoop() {
        Menue m = new Menue();
        m.loadMenue(frame);

        while (running) {
            if (m.isStartPressed()) {
                System.out.println("test");
            }

        }
    }

    /**
    * Create the game and initialize the gameplay
    */
    public static void main(String[] args) {
        /*Variable declaration*/

        // ------------------------------------------------------------
        Game game = new Game();
        game.gameLoop();
    }
}

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package gameprojekt;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.LayoutManager;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 *
 * 
 */
public class Menue {

    /* Global variable declaration */
    private int widthMenue;
    private int heightMenue;
    private String start = "Start";
    private String highscores = "Highscores";
    private boolean startPressed = false;
    public JButton bStart = new JButton(start);
    public JButton bScore = new JButton(highscores);
    // ----------------------------------------------------

    public boolean isStartPressed() {
        return startPressed;
    }

    public void setStartPressed(boolean startPressed) {
        this.startPressed = startPressed;
    }

    public int getWidthMenue() {
        return widthMenue;
    }

    public void setwidthMenue(int widthMenue) {
        this.widthMenue = widthMenue;
    }

    public int getheightMenue() {
        return heightMenue;
    }

    public void setheightMenue(int heightMenue) {
        this.heightMenue = heightMenue;
    }

    public void loadMenue(JFrame j) {
        JPanel menue = new JPanel();

        LayoutManager border = new BorderLayout();
        menue.setLayout(border);
        menue.setBackground(Color.black);

        bStart.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                setStartPressed(true);
            }
        });

        menue.add(bStart, BorderLayout.LINE_START);
        menue.add(bScore, BorderLayout.LINE_END);

        j.getContentPane().add(menue);
    }
} 
```

嗨，我遇到了一个问题，变量`startPressed`似乎被忽略了。如果按下按钮开始，则变量`startPressed`设置为 true，但此 while 循环中的 if 语句不会对新值做出反应：

```
 while (running) {
            if (m.isStartPressed()) {
                System.out.println("test");
            }

        } 
```

如果我在循环中添加`System.out.println`or `Thread.sleep`，那么 if 语句会识别该值并给我输出。

我想可能是编程结构存在主要问题，或者 Java 太慢了。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:21:21.613

您的主要问题是您的 startPressed 变量不是易变的，因此在一个线程中更改它可能不会反映在另一个线程中。改变它，你会看到你的开始按钮适当地改变了这个变量：

```
private volatile boolean startPressed = false; 
```

你的游戏循环不应该像 Swing 线程规则那样飞来飞去。为什么不使用 Swing Timer（我的偏好），或者如果您需要自己的滚动 - 您自己的循环，然后在后台线程中这样做。还可以考虑将 startPressed 设置为“绑定”变量，该变量在更改时会告诉任何属性更改侦听器其状态已更改。这比不断地轮询它的价值要好。

另一条评论：你的代码过度使用了静态，如果你摆脱了大部分静态修饰符，你的代码会更好地组织起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:28:50.643

当你做类似的事情时

```
while(running) {
    ...
} 
```

这意味着，这个循环被一遍又一遍地执行，没有什么能阻止它，它会以你的 PC 可以执行的速度执行。因此，它往往会阻止其他一切。所以是的，你的程序结构是问题所在。尝试在单独的线程中执行您的游戏循环。然后，该线程可以不时更新您的视图。也许考虑不时暂停这个线程或以某种方式安排它，所以你的视图只是每秒更新一次（或任何你想要的）。

# sql - 具有标量值函数的可变长度 NVARCHAR

> ID：15580663
> 
> 赞同：0
> 
> 时间：2013-03-22T22:10:30.750
> 
> 标签：sql, sql-server-2012, user-defined-functions

`nvarchar`是否可以使用 SQL Server 2012创建一个返回可变长度的标量值函数？当我说可变长度时，我希望函数接受`nvarchar`任意长度的 an 并返回`nvarchar`相同长度的 an。

我正在尝试创建一个辅助函数，`nvarchar`在将它们放入我们的数据仓库之前使用视图清理列。我很确定这是不可能的，如果我错了，请纠正我。

我当前的功能（由于截断等原因显然无法正常工作）：

```
create function dbo.fnClean (@input nvarchar)
returns nvarchar as
begin
    declare @return nvarchar

    set @return = ltrim(rtrim(@input))

    return @return
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:14:41.943

不，这是不可能的（并且您需要动态 SQL 来创建列或在另一侧以这种方式进行转换）。但是，如果您事先知道长度是多少，那么您可以单独跟踪它而不是依赖函数。或者使用返回`@input` *AND* `LEN(@input)`的表值函数。

最后，如果这就是这个函数所做的一切，那将是非常昂贵的。您从中获得了什么，而不是仅仅应用`LTRIM(RTRIM())`到输入而不需要创建或引用函数？标量函数对性能来说并不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:23:21.057

这是行不通的，尽管我会质疑目标 nvarchar 或 varchar 是否已经占用了变量空间......我已经在 ETL 中编写了脚本来计算最大数据类型并缩放列结果。但是，这是如果您对数据类型和空间非常谨慎（特别是十进制并且没有企业的奢侈品）。你的目标是什么？

# java - Objective C 和 Java 之间的网络

> ID：15580676
> 
> 赞同：0
> 
> 时间：2013-03-22T22:11:51.527
> 
> 标签：java, objective-c, networking

我正在制作一个基于语音的应用程序，它允许您在电话和计算机等之间进行呼叫，有点类似于 Skype。现在我想知道，处理网络的最佳方式是什么？所有数据都从手机发送到服务器，服务器运行 Java 并使用 JBoss Netty 作为网络。现在可以将 Netty jar 包含在 android 应用程序中，因此对于计算机和 android 手机来说就可以了。但是对于 iOS 设备（例如 Iphone）来说，与服务器交互的最佳方式是什么？我预见的问题是 Netty 使用通道，而我无法让 Objective-C 连接到这样的通道，还是我弄错了？

亲切的问候，

雷内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:10:57.630

为什么要使用自定义端口并面临代理问题？HTTP 还不够吗？如果可以的话，您的所有平台都有丰富的框架来处理 HTTP。

# ios - iPad设置应用背景颜色

> ID：15580677
> 
> 赞同：2
> 
> 时间：2013-03-22T22:11:52.643
> 
> 标签：ios, objective-c, ipad, ios6, settings

有谁知道 iPad 设置应用程序的背景颜色是什么？如果是这样，重现它的价值是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:14:44.697

使用 Sip 从模拟器中获取颜色：

```
[UIColor colorWithRed:0.85f green:0.86f blue:0.89f alpha:1.00f]; 
```

**编辑：**

看起来背景颜色是渐变色而不是纯色。但是，如果您对适合您的纯色感到满意。如果没有，您可以添加渐变：

```
#import <QuartzCore/QuartzCore.h>

CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = view.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithRed:0.89f green:0.90f blue:0.92f alpha:1.00f] CGColor], (id)[[UIColor colorWithRed:0.82f green:0.82f blue:0.85f alpha:1.00f] CGColor], nil];
[view.layer insertSublayer:gradient atIndex:0]; 
```

如果您想在情节提要中更改此值，请单击您想更改背景颜色的视图。单击属性检查器中的背景颜色按钮并为 RGB 值添加以下内容：

**红色：208 绿色：210 蓝色：216**

![在此处输入图像描述](../Images/8fa6f0a359a34352ea2dcac9c0fdf151.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T02:53:47.847

```
[UIColor colorWithRed:(247/255.0) green:(247/255.0) blue:(247/255.0) alpha:1] 
```

# java - 在 Android 应用中获取 Google 日历活动

> ID：15580680
> 
> 赞同：0
> 
> 时间：2013-03-22T22:11:56.867
> 
> 标签：java, android, events, time, google-calendar-api

我刚开始使用 Android 进行应用程序开发。我想从谷歌日历中提取我的日历事件，然后用它们来计算手机时间。

如：如果活动在下午 6 点开始并在晚上 7 点结束：

然后如果电话时间<6.00 pm，则打印“距离事件的时间”+距离事件的时间

```
 if phone time >6.00 pm but < 7.00 pm then print "Time left" + time till 7.00 
```

有人可以指出一些使我能够做到这一点的资源吗？我主要使用 Java 进行开发，并希望利用一些可用的库来简化此操作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:19:26.897

假设您只希望在时间跨度之间发生事件（否则您很快就会得到太多事件），那么要走的路是使用 CalendarContract API 的[Instances助手（请参阅我关于](https://developer.android.com/reference/android/provider/CalendarContract.Instances.html)[CalendarContract 内容提供程序的](http://www.grokkingandroid.com/androids-calendarcontract-provider/)博客文章）。

以下是了解事件的方法：

```
 long begin = // starting time in milliseconds
   long end = // ending time in milliseconds
   String[] proj = 
         new String[]{
               Instances._ID, 
               Instances.BEGIN, 
               Instances.END, 
               Instances.EVENT_ID};
   Cursor cursor = 
         Instances.query(getContentResolver(), proj, begin, end);
   if (cursor.getCount() > 0) {
      // do s.th. meaningful with your result set
   } 
```

这个助手的好处是，它负责事件的可见性。例如，删除/取消的事件在下一次同步之前是可见的 - 否则 Android 无法告诉后端也删除那里的事件。你可以自己这样做，但如果你想考虑全天的事件、可见性等等，它就会变得复杂。始终使用实例！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-09T07:43:01.723

```
public static ArrayList<String> readCalendarEvent(Context context) {
    Cursor cursor = context.getContentResolver()
            .query(
                    Uri.parse("content://com.android.calendar/events"),
                    new String[] { "calendar_id", "title", "description",
                            "dtstart", "dtend", "eventLocation" }, null, 
                    null, null); 
    cursor.moveToFirst();
    // fetching calendars name 
    String CNames[] = new String[cursor.getCount()];

    // fetching calendars id 
    nameOfEvent.clear();
    startDates.clear();
    endDates.clear();
    descriptions.clear();
    for (int i = 0; i < CNames.length; i++) {

        nameOfEvent.add(cursor.getString(1));
        startDates.add(getDate(Long.parseLong(cursor.getString(3))));
        endDates.add(getDate(Long.parseLong(cursor.getString(4))));
        descriptions.add(cursor.getString(2));
        CNames[i] = cursor.getString(1);
        cursor.moveToNext();

    } 
    return nameOfEvent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:26:30.383

我相信这就是你想要的：

```
Cursor cursor = cr.query(Uri.parse("content://calendar/events"), new String[]{ "calendar_id", "title", "description", "dtstart", "dtend", "eventLocation" }, null, null, null);         
//Cursor cursor = cr.query(Uri.parse("content://calendar/calendars"), new String[]{ "_id", "name" }, null, null, null);
String add = null;
cursor.moveToFirst();
String[] CalNames = new String[cursor.getCount()];
int[] CalIds = new int[cursor.getCount()];
for (int i = 0; i < CalNames.length; i++) {
    CalIds[i] = cursor.getInt(0);
    CalNames[i] = "Event"+cursor.getInt(0)+": \nTitle: "+ cursor.getString(1)+"\nDescription: "+cursor.getString(2)+"\nStart Date: "+new Date(cursor.getLong(3))+"\nEnd Date : "+new Date(cursor.getLong(4))+"\nLocation : "+cursor.getString(5);
    if(add == null)
        add = CalNames[i];
    else{
        add += CalNames[i];
    }           
    ((TextView)findViewById(R.id.calendars)).setText(add);

    cursor.moveToNext();
}
cursor.close(); 
```

学分：@Vinay

# php - 用户名的PHP正则表达式？

> ID：15580682
> 
> 赞同：-5
> 
> 时间：2013-03-22T22:12:07.353
> 
> 标签：php

您好我正在尝试解析字符串字符以防止 sql 注入和其他黑客攻击。我不想使用 mysql_real_escape_string 或其他过滤器。我只想使用正则表达式并使用字符 AZ 0-9 ！@#$-_

我的意思是我可以使用正则表达式，例如：

```
$newStr = preg_replace('/[^a-z0-9]/i', '_', $str); 
```

但我只想安全，我不太擅长正则表达式。再次感谢大家，你们真的很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:16:30.060

这：

```
$newStr = preg_replace('/[^a-z0-9]/i', '_', $str); 
```

应该：

```
$newStr = preg_replace('/[^a-zA-Z0-9!@#$-]/', '_', $str); 
```

下面的代码应该去掉：

> '"/\;?"

```
<?php
        $newStr = preg_replace('/[^a-zA-Z0-9!@#$-]/', '_', "test\'\"\/\\\;\?");
        echo $newStr;
?> 
```

产生：

```
test__________% 
```

# c++ - _not_ 在代码项目中使用多个文件有什么好处吗？(C++)

> ID：15580691
> 
> 赞同：3
> 
> 时间：2013-03-22T22:12:51.620
> 
> 标签：c++, code-organization

与[为项目使用超过 1 个代码文件相比有什么优势？（C++）](https://stackoverflow.com/questions/15580539/what-are-the-advantages-of-using-more-then-1-code-file-for-a-project-c)我想知道不使用多个代码文件是否有（技术或其他）优势，例如 C++ 项目？

拆分成几个文件只是人为的事情吗？就可见性/优化而言，机器一次处理所有这些不是更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T22:21:35.037

将所有内容放在一个文件中会破坏文件级静态和匿名名称空间的目的（并避免 extern 声明）。

不过，它对编译器并没有多大好处。对于优化之类的事情，他们只是实现了链接器中需要全局可见性的部分（并且大多数当前的链接器都包括这种优化/代码生成功能）。

它会（或至少可以）减少完全重建的总时间。使用单独的源文件，您最终会为包含它的每个源文件重新编译每个头文件。只有一个源文件，您只需编译一次（但预编译的头文件可以并且通常确实将其减少到它可能很少重要的程度，至少如果您使用它们）。

从实际的角度来看，它通常会大大缩短构建时间。大多数人都非常努力地隔离事物，因此程序的一部分中的更改只需要重新编译程序的一小部分。对于一个真正微小的程序之外的任何东西，每次进行任何更改时都必须重新编译所有内容将是完全无法管理的——对于一个体面的程序，您的构建时间会从几秒钟变为几分钟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T22:20:47.093

这实际上是一个微妙的问题。只有当文件满足另一个问题中回答的标准之一时，拆分文件才有利，即当文件或项目“足够大”以使其更易于拆分时。如果不满足这些标准，就没有优势。所以这个问题的答案是“如果分割文件的理由都不适用，就不要分割”。他们通常甚至为中型项目做。举一个具体的例子，“Hello World”通常应该保存在一个文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T22:20:56.703

如果您想将程序作为电子邮件附件发送，那么您只需附加一个文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T22:22:18.553

如果一切都在一个编译单元中，编译器可能会进行更多优化，这就是 sqlite3 以这种方式分布的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T22:17:28.533

好吧，如果你看看在[一个项目中使用超过 1 个代码文件有什么好处？(C++)](https://stackoverflow.com/questions/15580539/what-are-the-advantages-of-using-more-then-1-code-file-for-a-project-c/15580555)你会发现拆分代码有很多好处。否则所有这些都会丢失。

如果您正在处理一个非常小的项目，那么*不*拆分代码的唯一好处就是。然后将所有内容保存在一个文件中会更方便。

大多数足够大的项目都有多个文件。在开发过程中，您只会感觉到对它们的不可抗拒（冲动）的需要。谁真正喜欢前后滚动超过 1000 行来进行一些编辑？

是的，这是一件人道的事情。我们必须拆分内容才能理解它们。我们需要处理更小的代码。

# javascript - 带有角度路由的 $http 调用

> ID：15580692
> 
> 赞同：0
> 
> 时间：2013-03-22T22:12:53.797
> 
> 标签：javascript, angularjs

我只是在我的角度应用程序中设置路线。第一个视图，`List`进行 http 调用以获取演示文稿列表

```
function ListController($scope, $http)
{
    $scope.error            = null;
    $scope.presentations    = null;
    $scope.requesting       = true;
    $scope.currentTitle     = '-1';
    $data = {
        'type' : 'presentations'
    };

    $http.post('resources/request.php', $data, {timeout:20000})
        .success(function(data, status, headers, config)
        {
            $scope.requesting   = false;
            $scope.presentations    = data;
        })
        .error(function(data, status, headers, config)
        {
            $scope.requesting   = false;
            log(status + ', data:" ' + data + '"');
        }
      }
    );
} 
```

我的路线是

```
angular.module('main',[]).
  config(function($routeProvider) {
    $routeProvider.
      when('/', {controller:ListController, templateUrl:'resources/views/list.html'}).
      when('/view/:id', {controller:VforumController, templateUrl:'resources/views/vforum.html'}).
      otherwise({redirectTo:'/'});
  }); 
```

我遇到的问题是当我去`#/view/:id`然后回到电话时再次`/`被`$http`调用。我怎样才能使它只加载第一次进入应用程序并引用第一次加载的相同数据？

我试图在角度之外创建一个变量并将其设置为等于第一次加载的数据。然后，在`ListController`基本上做了一个`if data is null, do the $http call else set $scope.data = data`但没有奏效。列表视图只是空白。`$scope.data`是什么建立了我的清单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:26:13.710

你想要的是一个服务，它在角度是一个单例：

```
.factory( 'myDataService', function ( $http ) {
  var promise;

  return function ( $data ) {
    if ( ! angular.isDefined( promise ) ) {
      promise = $http.post('resources/request.php', $data, {timeout:20000});
    }

    return promise;
  }
}); 
```

现在，您可以简单地将调用替换为`$http`对您的服务的调用：

```
function ListController( $scope, myDataService )
{
  // ...

  myDataService( $data ).then( function success( response ) {
    $scope.requesting = false;
    $scope.presentations = response.data;
  }, function error( response ) {
    $scope.requesting = false;
    log(status + ', data:" ' + response.data + '"');
  });
} 
```

# c - 我应该为 lex 函数创建一个头文件吗？

> ID：15580694
> 
> 赞同：2
> 
> 时间：2013-03-22T22:13:05.883
> 
> 标签：c, linker, lex

我有一个 lex 输入 .l 文件，其中包含一堆规则和遇到这些规则时的函数定义。

我正在使用来自另一个源文件 main.c 的扫描仪

在 main.c 中，我可以调用 yylex() 而无需对我生成的 lex 文件进行任何类型的引用。为什么这行得通？我正在使用 cmake，我注意到它从我的 lexer.c 文件中创建了一个对象，并将其链接到我的可执行文件。我原以为我需要对 yylex() 的外部引用才能使其正常工作。

我的问题是我是否应该为我在 lex .l 文件中使用的所有函数创建前向声明，并将其包含在 lex 文件中？更进一步，我是否应该在 lex 文件之外定义这些函数，并通过引用包含文件的方式使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:08:01.267

您可以`yylex()`毫无问题地调用，因为它是一个`int`函数。所以从技术上讲，您不需要原型（尽管这不是正确的 C99 或 C1x 行为）。

为所有外部（公共）类型、变量和函数创建一个头文件**总是**一个好主意。您*不需要*将它包含在您的 lex 源文件中，但这样做是一个非常好的主意（如果没有别的，请检查您的声明是否正确）。您绝对*应该*在任何使用 lex 函数的文件中包含它的标题。

# android - 我想在我的主要活动加载后打开一个活动

> ID：15580700
> 
> 赞同：1
> 
> 时间：2013-03-22T22:13:22.670
> 
> 标签：android, android-activity

我有一个项目，我的清单默认打开 .MainActivity

```
 <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" /> 
```

我希望能够在该应用程序顶部打开一个信息屏幕，其中介绍了我的应用程序。用户可以从那里按返回以返回主活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:18:57.777

通过单击`Intent`在您`MainActivity`的中使用，`Button`或者您希望输入起作用

`Intent intent = new Intent(MainActivity.this, NextActivityName.class); intent.putExtras("key", value); // if you want to send data // other intent attributes such as flags startActivity(intent);`

[意图](http://developer.android.com/reference/android/content/Intent.html)

如果您对如何更改感到困惑，`Activities`那么您真的应该[从这里开始](http://developer.android.com/training/index.html)并仔细阅读文档，以便您了解 Android 框架的基础知识

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:17:50.947

你可以`info screen Activity`用你`MainActivity`的`onCreate()`方法开始你的`startActivity()`方法

# google-maps - 单击标记时谷歌地图弹出信息框

> ID：15580704
> 
> 赞同：0
> 
> 时间：2013-03-22T22:13:52.453
> 
> 标签：google-maps, popup, infobox

我正在使用这个谷歌地图脚本。如果我想在单击标记时弹出一个信息框，我该怎么办？

您可以在这里尝试脚本：http: [//clark-kim.se/preview/googlemaps2.html](http://clark-kim.se/preview/googlemaps2.html)

我无法发布所有代码，但至少这是脚本：

```
<script>
          function initialize() {
            var map = new google.maps.Map(document.getElementById('map-canvas'), {
              mapTypeId: google.maps.MapTypeId.ROADMAP,
            });
            var defaultBounds = new google.maps.LatLngBounds(
                new google.maps.LatLng(-33.8902, 151.1759),
                new google.maps.LatLng(-33.8474, 151.2631));
            map.fitBounds(defaultBounds);

            var input = document.getElementById('target');
            var searchBox = new google.maps.places.SearchBox(input);
            var markers = [];

            google.maps.event.addListener(searchBox, 'places_changed', function() {
              var places = searchBox.getPlaces();

              for (var i = 0, marker; marker = markers[i]; i++) {
                marker.setMap(null);
              }

              markers = [];
              var bounds = new google.maps.LatLngBounds();
              for (var i = 0, place; place = places[i]; i++) {
                var image = {
                  url: place.icon,
                  size: new google.maps.Size(71, 71),
                  origin: new google.maps.Point(0, 0),
                  anchor: new google.maps.Point(17, 34),
                  scaledSize: new google.maps.Size(25, 25)
                };

                var marker = new google.maps.Marker({
                  map: map,
                  icon: image,
                  title: place.name,
                  position: place.geometry.location
                });

                markers.push(marker);

                bounds.extend(place.geometry.location);
              }

              map.fitBounds(bounds);
            });

            google.maps.event.addListener(map, 'bounds_changed', function() {
              var bounds = map.getBounds();
              searchBox.setBounds(bounds);
            });
          }
          google.maps.event.addDomListener(window, 'load', initialize);
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T04:13:34.993

你检查过这个[例子吗？](https://developers.google.com/maps/documentation/javascript/examples/infowindow-simple)谷歌地图 JavaScript API v3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:30:37.557

```
 google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent("Your content here");
            infowindow.open(map, this);
        }); 
```

您必须先创建一个信息窗口，然后在每次单击时关闭它并在另一端打开它

# c# - 必填字段验证服务器端

> ID：15580706
> 
> 赞同：0
> 
> 时间：2013-03-22T22:14:01.667
> 
> 标签：c#, asp.net, validation, telerik, requiredfieldvalidator

我计划在我的按钮单击事件中触发所需的归档验证。

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator10"  runat="server" 
    ControlToValidate="RadDatePicker3" OnLoad="RequiredFieldValidator10_Load"
    Display="Dynamic" ForeColor="Red">*</asp:RequiredFieldValidator>

 protected void RequiredFieldValidator10_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            if (RadDatePicker4.DbSelectedDate == null || RadDatePicker3.DbSelectedDate == null)
            {
                RequiredFieldValidator10.ErrorMessage = "*";
                RequiredFieldValidator11.ErrorMessage = "*";
            }
        }
    } 
```

在我的按钮上单击我想检查必填字段验证...有什么建议吗？

上面的代码对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:32:54.827

您应该能够在按钮单击事件中调用以下内容

```
RequiredFieldValidator10.Validate();
RequiredFieldValidator10.IsValid; 
```

第一种方法触发验证器，第二种方法获取结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:48:59.730

当您对自定义控件使用验证器时，您需要指定 validationproperty 属性来指示将包含控件值的属性。在这种情况下，一种方法是扩展 radcontrol 并在该类中实现一个属性， validationproperty 属性将指向。该属性需要从基类中获取其值。Ps 如果需要更多细节或样品，请告诉我。

# php - Facebook Open Graph/动态内容

> ID：15580707
> 
> 赞同：0
> 
> 时间：2013-03-22T22:14:03.090
> 
> 标签：php, facebook-opengraph, meta-tags

我一直试图让 Open Graph 在我的网站上运行，但我遇到了一些问题。这是我遇到的麻烦。

我将关联的元标记放在我的标题部分。我想将元标记与动态内容链接。例如：

`<meta property="og:title" content="< ?php echo ['title']; ?>" />`

*标题*来自我博客的数据库。但是，与此标题相关的 PHP 和 HTML 位于标题部分之后，因此我似乎永远不会获取我的数据。

我尝试将元标记放在我的文档正文中，但似乎 html 无法识别元标记。

总而言之，我如何链接在我的标题之后从我的数据库中提取的动态内容？

# python - Python - 从子目录中找不到的目录文件中读取文件（在那里）

> ID：15580716
> 
> 赞同：4
> 
> 时间：2013-03-22T22:14:28.680
> 
> 标签：python, file-processing

我确信这只是句法上的东西 - 但是我无法弄清楚为什么我的代码：

```
import os
from collections import Counter
d = {}
for filename in os.listdir('testfilefolder'):
    f = open(filename,'r')
    d = (f.read()).lower()
    freqs = Counter(d)
    print(freqs) 
```

不会工作 - 它显然可以看到“testfilefolder”文件夹并告诉我文件在那里，即找不到错误消息“file2.txt”。所以它可以找到它告诉我它没有找到......

然而，我让这段代码工作：

```
from collections import Counter
d = {}
f = open("testfilefolder/file2.txt",'r')
d = (f.read()).lower()
freqs = Counter(d)
print(freqs) 
```

奖金 - 这是做我想做的事情的好方法（从文件中读取并计算单词的频率）吗？这是我使用 Python 的第一天（虽然我有一些编程经验。）

不得不说我喜欢Python！

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T22:16:33.880

改变：

```
f = open(filename,'r') 
```

到：

```
f = open(os.path.join('testfilefolder',filename),'r') 
```

这实际上是您正在做的事情：

```
f = open("testfilefolder/file2.txt",'r') 
```

原因：您正在“testfilefolder”（当前目录的子目录）中列出文件，但随后尝试在当前目录中打开文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T22:46:58.970

正如isedev 指出的，listdir() 只返回文件名，而不是完整路径（或相对路径）。处理这个问题的另一种方法是`os.chdir()`进入有问题的目录，然后`os.listdir('.')`.

其次，您的目标似乎是计算单词的频率，而不是字母（字符）。为此，您需要将文件的内容分解为单词。我更喜欢为此使用正则表达式。

第三，您的解决方案分别计算每个文件的单词频率。如果您需要对所有文件执行此操作，`Counter()`请在开始时创建一个对象，然后调用该`update()`方法来计算计数。

事不宜迟，我的解决方案：

```
import collections
import re
import os

all_files_frequency = collections.Counter()

previous_dir = os.getcwd()
os.chdir('testfilefolder')
for filename in os.listdir('.'):
    with open(filename) as f:
        file_contents = f.read().lower()

    words = re.findall(r"[a-zA-Z0-9']+", file_contents) # Breaks up into words
    frequency = collections.Counter(words)              # For this file only
    all_files_frequency.update(words)                   # For all files
    print(frequency)

os.chdir(previous_dir)

print ''
print all_files_frequency 
```

# jquery - 将脚本从 Mootools 转换为 Jquery

> ID：15580719
> 
> 赞同：-2
> 
> 时间：2013-03-22T22:14:41.413
> 
> 标签：jquery, input, mootools, hidden, checkbox

我有这个用 Mootools 编写的脚本。

当任何复选框被选中时，隐藏的输入就会改变。脚本检查每个检查过的图像，从检查过的图像中生成字符串 - 用逗号分隔。我需要将此 Mootools 脚本转换为 jQuery。

[jsFiddle Mootools 脚本](http://jsfiddle.net/ynternet/pfJYh/8/)

HTML：

```
<form>
    <div class="img_container">
        <img src="http://ynternet.sk/test/bg_1.png" style="border:2px solid gray;" /><br />
        <input type="checkbox" name="bg_1.jpg" checked="yes"  />
    </div>
    <div class="img_container">
        <img src="http://ynternet.sk/test/bg_2.png" style="border:2px solid gray;" /><br />
        <input type="checkbox" name="bg_2.jpg" checked="yes"  />
    </div>
    <div class="img_container">
        <img src="http://ynternet.sk/test/bg_3.png" style="border:2px solid gray;" /><br />
        <input type="checkbox" name="bg_3.jpg" checked="yes" />
    </div>

<input type="hidden" value="bg_1.jpg,bg_1.jpg,bg_3.jpg" name="selected_img"> 
```

穆工具

```
var checks = document.getElements('input[type="checkbox"]');
var hidden = document.getElements('input[type="hidden"][name="selected_img"]')[0];
checks.addEvent('change',function(e){
    var checkbox = e.target;
    var img = checkbox.getPrevious('img');
    var checked = checkbox.get('checked');
    if(checked){
      img.setStyle('border','2px solid gray');
    }
    else{
      img.setStyle('border',null);
    }

    setInputHidden();
});

function setInputHidden(){
    var inputs_checked = document.getElements('input[type="checkbox"]:checked');  
    var arr_names = inputs_checked.get('name');
    hidden.set('value',arr_names.join(','));
    alert(hidden.value);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:26:30.833

```
$('input[type=checkbox]').change(function (e) {
    if ($(this).is(':checked')) {
        $(this).parent().find('img').css({
            'borderLeft': '2px solid gray',
            'borderRight': '2px solid gray',
            'borderTop': '2px solid gray',
            'borderBottom': '2px solid gray',
        });
    } else {
        $(this).parent().find('img').css({
            'borderLeft': '0',
            'borderRight': '0',
            'borderTop': '0',
            'borderBottom': '0',
        });
    }

    setInputHidden();
});

function setInputHidden() {
    var arr_names = new Array();
    $('input[type="checkbox"]:checked').each(function () {
        arr_names.push($(this).attr('name'));
    });
    $('input[type=hidden][name=selected_img]').val(arr_names.join(','));
    alert($('input[type=hidden][name=selected_img]').val());
} 
```

# php - mysql没有插入[&]（AND）字符

> ID：15580725
> 
> 赞同：-1
> 
> 时间：2013-03-22T22:14:53.820
> 
> 标签：php, mysql, ajax, variables, character-encoding

我有一个 ajax 脚本，它会自动将数据发送到 php，这样我就可以将它存储在 mysql 中。该脚本工作正常，除了一些东西。我可以将数据插入到 mysql 但如果数据包含 (&)[and] 字符，则将存储 [&] 之前的数据，而不是 [&] 之后的数据。
这是一个例子：我的数据是：---->'这是一只猫和一只狗'。Mysql 将存储“this is a cat”并忽略 '& a dog' 这是我的代码：它不使用 pdo 或 mysqli。我会尽快改变它！

```
<?php 
//connect to db
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
//select db
mysql_select_db("database", $con);

//get post variables from ajax
$link = $_POST['var1'];
$name = $_POST['var2'];
$size = $_POST['var2'];
$cat = $_POST['var4'];

//safe from sql injections
$link = mysql_real_escape_string($link);
$name = mysql_real_escape_string($name);
$size = mysql_real_escape_string($size);
$cat = mysql_real_escape_string($cat);

//verify url existance
if (!preg_match("(^https://example\.com(.*))", $link)) {
    //not valid url
    mysql_close($con);
    exit();
}

//check if result already exist
$check = mysql_query("SELECT link FROM links WHERE  link = '{$link}';");

if (mysql_num_rows($check) == 0) {
    // insert if not exist

    $sql="INSERT INTO links (link, name, size, category) VALUES ('$link','$name','$size','$cat')";
    if (!mysql_query($sql,$con))
      {
      die('Error: ' . mysql_error());
      }

    mysql_close($con);
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:18:49.803

这听起来不像服务器端的任何问题，而是如何在客户端发出请求。不过，你没有向我们展示这一点。您需要`encodeURIComponent`在字符串上使用作为 ajax 请求一部分的 & 符号，否则`&`将被视为单独的参数。这是在 PHP 端自动解码的。

# c++ - 经过一段时间后做某事C ++ SFML 2

> ID：15580727
> 
> 赞同：1
> 
> 时间：2013-03-22T22:15:01.040
> 
> 标签：c++, visual-studio-2010, sfml, visual-c++-2010

我在 SFML 中有一个时钟和计时器，它可以测量秒数。我正在尝试在经过一定秒数（特别是 4 秒）后执行下一个操作这是我的代码

```
 #include "stdafx.h"
#include "SplashScreen1.h"

using namespace std;

void SplashScreen1::show(sf::RenderWindow & renderWindow)
{
    sf::Clock clock;
    sf::Time elapsed = clock.getElapsedTime();

    sf::Texture splash1;
    sf::SoundBuffer buffer;
    sf::Sound sound;

    if(!buffer.loadFromFile("sounds/splah1.wav"))
    {
        cout << "Articx-ER-1C: Could not find sound splah1.wav" << endl;
    }

    sound.setBuffer(buffer);

    if(!splash1.loadFromFile("textures/splash1.png"))
    {
        cout << "Articx-ER-1C: Could not find texture splash1.png" << endl;
    }

    sf::Sprite splashSprite1(splash1);

    sound.play();
    renderWindow.draw(splashSprite1);
    renderWindow.display();

    sf::Event event;

    while(true)
    {
        while(renderWindow.pollEvent(event))
        {
            //if(event.type == sf::Event::EventType::KeyPressed
            if(elapsed.asSeconds() >= 4.0f)
            {
                //|| event.type == sf::Event::EventType::MouseButtonPressed)
                //|| event.type == sf::Event::EventType::Closed
                return;
            }

            if(event.type == sf::Event::EventType::Closed)
                renderWindow.close();
        }
    }
} 
```

4 秒后它什么也不做。我相信我错误地收集了经过的时间。我知道我的回报是有效的，因为我用鼠标输入尝试过它，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:18:36.787

浮点比较不能如此精确。 `== 4.0f`几乎不可能是真的。试试`>=`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:05:06.237

你的代码现在看起来很好，除了你应该在循环中更新你的 elapsed 变量（从你的时钟中读取它）。

目前您只阅读一次，并将该静态值与 4 进行多次比较。

时间类型代表一个时间点，因此是静态的。

你的代码应该是；

```
...
while(renderWindow.pollEvent(event)) 
{
    elapsed = clock.getElapsedTime(); 
    // Rest of the loop code
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:51:47.703

如果由于某种原因无法让 SFML 计时器工作，可以考虑使用 ctime (time.h) 来完成。

```
#include <ctime>
/* ... */
time_t beginT = time(NULL), endT = time(NULL);
while(renderWindow.pollEvent(event)) {

  if(difftime(endT, beginT) < 4.0f) {
    endT = time(NULL);
  }
  else {
    beginT = time(NULL);
    endT = time(NULL)

    /* do the after-4-seconds-thingy */
  }

  /* ... */
} 
```

简要说明，您将 endT 设置为当前时间，直到它与之前设置的 beginT 相差整整 4 秒。

# android - Android：将位图绘制到 TextView 不起作用

> ID：15580728
> 
> 赞同：0
> 
> 时间：2013-03-22T22:15:11.820
> 
> 标签：android, bitmap

改天，又一个错误，一个新程序员的生活啊。我正在尝试将 a 绘制`bitmap`成`TextView`or`ImageView`并且它不起作用。我一直在查看这段代码几个小时，试图找出它为什么不起作用。下面是代码。我没有收到任何错误，程序运行，它根本不显示位图

**自定义视图.java**

```
public class CustomView extends ImageView {

public CustomView(Context context) {
    super(context);     
    // TODO Auto-generated constructor stub
}

public CustomView(Context context, AttributeSet attrs) {
    super(context, attrs);      
    // TODO Auto-generated constructor stub
}

public CustomView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);        
    // TODO Auto-generated constructor stub
}   

@Override
public void onDraw(Canvas canvas) {
    Bitmap line = BitmapFactory.decodeResource(getResources(), R.drawable.line);
    canvas.drawBitmap(line, 0, 0, null);
            super.onDraw(canvas);       
}
}

@Override 
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
   // Hail Mary. If this works then look up how to really use 'onMeasure()'.
   setMeasuredDimension(200, 50);
} 
```

**主要活动**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main); 

    refreshView();
}

private void refreshView() {
    Spinner spinner = (Spinner) findViewById(R.id.location_spinner);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
             android.R.layout.simple_spinner_item, model.getLocationsArray());

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapter);

    SimpleDateFormat sdf = new SimpleDateFormat("E, MMM dd");

    TextView goalText = (TextView) findViewById(R.id.goal_Id);
    TextView dateText = (TextView) findViewById(R.id.date_Id);
    TextView countText = (TextView) findViewById(R.id.count);
    TextView daysText = (TextView) findViewById(R.id.days);
    TextView totalText = (TextView) findViewById(R.id.total);
    TextView aveText = (TextView) findViewById(R.id.ave);       

    GregorianCalendar now = new GregorianCalendar();
    goalText.setTextColor(Color.RED);
    goalText.setText("Today's Goal: Don't Smoke at ");
    dateText.setText(sdf.format(now.getTime()));
    //get today's count from data in the SQLite table - count entries with today's date
    countText.setText("" + mySmokinDatabase.getTodaysCount());
    // Table data
    daysText.setText("" + String.format("%10d", model.getDays()));
    totalText.setText("" + mySmokinDatabase.getTotal());

    if (model.getDays() > 0)
        aveText.setText("" + mySmokinDatabase.getTotal()/model.getDays());

} 
```

**MainActivity.xml**

```
<ImageView class="com.example.smokin4thomassullivan.CustomView"
    android:id="@+id/line_Id"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/line"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

**日志猫**

```
03-22 20:17:47.272: E/AndroidRuntime(1474): FATAL EXCEPTION: main
03-22 20:17:47.272: E/AndroidRuntime(1474): java.lang.RuntimeException: Unable to start 
activity ComponentInfo{com.example.smokin4ThomasSullivan/com.example.smokin4
ThomasSullivan.MainActivity}: android.view.InflateException: Binary XML file line #21:  
Error inflating class com.example.smokin4thomassullivan.CustomView
03-22 20:17:47.272: E/AndroidRuntime(1474):     at  
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at  
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.app.ActivityThread.access$600(ActivityThread.java:130)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.os.Handler.dispatchMessage(Handler.java:99)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.os.Looper.loop(Looper.java:137)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.app.ActivityThread.main(ActivityThread.java:4745)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
java.lang.reflect.Method.invokeNative(Native Method)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
java.lang.reflect.Method.invoke(Method.java:511)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at   
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
dalvik.system.NativeStart.main(Native Method)
03-22 20:17:47.272: E/AndroidRuntime(1474): Caused by: android.view.InflateException: 
Binary XML file line #21: Error inflating class 
com.example.smokin4thomassullivan.CustomView
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at   
android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.app.Activity.setContentView(Activity.java:1867)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
com.example.smokin4ThomasSullivan.MainActivity.onCreate(MainActivity.java:40)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.app.Activity.performCreate(Activity.java:5008)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-22 20:17:47.272: E/AndroidRuntime(1474):     ... 11 more
03-22 20:17:47.272: E/AndroidRuntime(1474): Caused by: 
java.lang.ClassNotFoundException: com.example.smokin4thomassullivan.CustomView
03-22 20:17:47.272: E/AndroidRuntime(1474):     at  
dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at   
java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at  
android.view.LayoutInflater.createView(LayoutInflater.java:552)
03-22 20:17:47.272: E/AndroidRuntime(1474):     at 
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
03-22 20:17:47.272: E/AndroidRuntime(1474):     ... 21 more` 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:11:45.487

您的 XML 代码包含：

```
<ImageView class="com.example.smokin4thomassullivan.CustomView" /> 
```

这将创建一个`ImageView`，而不是 的实例`CustomView`。这意味着您的自定义`onDraw()`方法将永远不会被执行。您正在寻找的语法是：

```
<com.example.smokin4thomassullivan.CustomView /> 
```

该`class`属性仅适用于`<view />`标记（并且仅当您想要引用内部类时才需要它，因为它们的名称中包含 $。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:36:09.993

试试这个来测试你的 ImageView 扩展：

```
@Override
protected void onDraw(Canvas canvas)
{
    super.onDraw(canvas);
    System.out.println("onDraw");
    Paint paint = new Paint(Paint.LINEAR_TEXT_FLAG);
    paint.setColor(0xFFFF8844);
    paint.setTextSize(12.0F);
    canvas.drawText("Hello David!", 100, 100, paint);
} 
```

摆脱`onMeasure()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:35:03.343

我无法理解这样做的目的。在 ImageView 之上创建一个带有 TextView 的 RelativeLayout 不是更简单吗？就像是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="128dp"
        android:layout_marginTop="51dp"
        android:src="@android:drawable/btn_dialog" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView1"
        android:layout_alignTop="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:text="TextView" />

</RelativeLayout> 
```

或者更好的是，将 TextView 放在 LinearLayout 中，并将图像设置为 LinearLayout 的背景？

编辑，回复评论：

这不是关于效率，而是关于尝试将方形钉子放入圆孔中。基本上看起来好像您正在设置一个对象 - 自定义 ImageView - 作为整个布局，然后尝试向单个对象（TextView）添加其他元素。试图做的正是 Layout 对象的用途：包含其他对象的集合。在这种情况下，ImageViews 和 TextViews。

当然，我可能错过了这里的目的。如果这是一种不寻常的做事方式的练习，那么我理解。但是，如果您只是想在屏幕上显示内容，这似乎是一种非常复杂的方法。通常，该命令`setContentView(R.layout.activity_main);`设置一个 XML 文件，其根对象是某个版本的 Layout 对象（LinearLayout、RelativeLayout 等）。在该布局中将是您想要操作的对象。也许我们没有完整的 MainActivity.xml？

# malloc - 保证堆栈崩溃

> ID：15580741
> 
> 赞同：0
> 
> 时间：2013-03-22T22:16:49.537
> 
> 标签：malloc

我正在尝试创建一个方法 ( `proc`)，以保证在取消引用未初始化的指针时交换将崩溃。

我想要的是，当没有分配内存时，程序崩溃。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void swap (int *px, int *py) {
    int *temp;
    *temp = *px; // Why doesn't this crash?
    *px = *py;
    *py = *temp;
}

int main() {
    int a = 99999;
    int b = -0;
    int c = 0;
    //proc(/* Some args might go here */);
    swap(&a, &b);
    printf("%d\n", a);
    printf("%d\n", b);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T04:26:20.587

该变量`temp`是在堆栈上分配的，因此当您的程序运行时它可能已经包含一些有效的指针`*temp = *px;`。在这种情况下，即使您没有初始化程序也不会崩溃。您可以使用 gdb 对其进行调试，在此行中断并键入`p temp`以查看存储在其中的值。

但是，如果您真的希望程序崩溃。尝试以下一种：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void swap (int *px, int *py) {
    int *temp;
    *temp = *px; // Why doesn't this crash?
    *px = *py;
    *py = *temp;
}

void proc(int *px, int *py) {
    int *temp = 0;
    printf("temp = %p\n", temp);
}

int main() {
    int a = 99999;
    int b = -0;
    int c = 0;
    proc(&a, &b);
    swap(&a, &b);
    printf("%d\n", a);
    printf("%d\n", b);
} 
```

该`proc`函数应具有与 完全相同的堆栈布局`swap`。所以它应该`temp`在程序调用之前清除指针`swap`，这可能会导致该行的交换崩溃。

但是，您可能需要禁用优化才能使其正常工作。

# backbone.js - Backbone.js & Require.js - 应用组件无法与路由器通信

> ID：15580744
> 
> 赞同：0
> 
> 时间：2013-03-22T22:17:06.123
> 
> 标签：backbone.js, namespaces, requirejs

我正在对一个新的 Require/Backbone 应用程序进行初始设置，但我似乎无法让我的“全局资源”对象与某些子模块进行通信。我怀疑它与一些循环依赖有关，但我不确定在哪里/为什么/如何。

在**configure.js**中加载所有填充项后，应用程序将启动：

```
/* kick off */
define([ 
    'cxn/newUI/rr',
    'cxn/newUI/routers/mainRouter'
], function( app, MainRouter) {

    // create router
    app.router = new MainRouter({
        model: app
    });

    Backbone.history.start({
        pushState: true,
        root: app.rootURL
    });
}); 
```

**rr.js**是我的“资源注册表”，其中定义了所有全局应用程序的东西

```
define(['underscore', 'backbone'], function(_, Backbone) {

    // main namespace object
    var ResourceRegistry = {

        rootURL: '/',
        models: {},
        views: {},
        collections: {},
        router: {},
        eventBus: _.extend( {}, Backbone.Events ),
        tplCache: {}

    };

    return ResourceRegistry;
}); 
```

我的**mainRouter.js**启动，完成路由准备，并加载主控制器：

```
define([
'cxn/newUI/rr',
'cxn/newUI/controllers/_mainAppController',
'cxn/newUI/controllers/homeController',
'cxn/newUI/controllers/inboxController'
], function( app, MainAppController, HomeController, InboxController ) {

function cleanup() {
    if (currentPage && currentPage.destroy) {
        currentPage.destroy();
    }
}

var currentPage;

var MainRouter = Backbone.Router.extend({

    routes: {
        ''                  : 'index',
        'home'              : 'home',
        'messages'          : 'showInbox',
        'messages/:id'      : 'showMessage',
        'patient/:id'       : 'showPatient'
    },

    initialize: function(options) {
        this.model = options.model;
        this.eventBus = app.eventBus;
        this._listenForEvents();
    },

    // route definition methods
    index: function() {
        MainAppController.initialize({ eventBus: app.eventBus });
        return this;
    },

    .... 
```

最后，我的主控制器加载并执行一个“postInitialize”钩子，一切都戛然而止。

```
define([
'cxn/newUI/rr',

'cxn/newUI/controllers/_baseController',

'cxn/newUI/views/_mainAppView/pageHeaderView',
'cxn/newUI/views/_mainAppView/mainContentView',
'cxn/newUI/views/_mainAppView/pageFooterView',
'cxn/newUI/views/_mainAppView/pageBottomDrawerView'

], function( app, Controller, PageHeaderView, MainContentView, PageFooterView, PageBottomDrawerView ) {

// Define the "new" collections/models/etc to pass to the controller here

// Define the controller
var MainAppController = new Controller({

    name: '_mainAppController',

    app: app,

    postInitialize: function() {

        app.eventBus.on('mainContentArea:loaded', function(route) {
            if (!route) {
                return app.router.navigate('home');
            }
            else {
                return app.router.navigate(route);
            }
        });

        //this._setupDocumentReady();
    }, 
```

我得到错误`Uncaught TypeError: Object #<Object> has no method 'navigate'`

通过在 Chrome 开发工具中设置断点，我可以看到“app.router”尽管在初始启动中定义，但不是我的全局命名空间的一部分，因此不能被控制器使用。我错过了什么吗？我没有正确定义这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:13:01.940

你没有包括你的 mainRouter.js 的最后一部分......一个愚蠢的问题：你添加

```
return MainRouter; 
```

在最后？

# codeigniter - 遍历 Codeigniter 控制器中的数组元素

> ID：15580765
> 
> 赞同：0
> 
> 时间：2013-03-22T22:19:28.523
> 
> 标签：codeigniter

在php中，当我们编写和执行查询时，我们使用while循环来迭代

```
$sql  = "SELECT username, role FROM studentlogin WHERE username = '$username' and password = '$password'";
        $res = mysql_query($sql);

            while($row = mysql_fetch_array($res, MYSQL_NUM)){
                   $uname = $row[0];
                   $stud_role = $row[1];
            } 
```

然后我们在代码中的某处使用变量 $uname 和 $stud_role。我正在尝试在 codeigniter 中做类似的事情，但它失败了。

```
function studentlogin($username, $password)
    {

        $query = "SELECT username, role FROM studentlogin WHERE username = ? and password = ?";
        $result = $this->db->query($query, array($username, $password));

        if($result->num_rows() == 1)
        {               
            return $result;
        }

        else
        {
            return false;
        }
    } 
```

我从控制器调用这个函数如下

```
$data['info'] = $this->student_model->stdentlogin($username, $password); 
```

问题来了。我尝试过使用与上面相同的 while 循环，但它在这里不起作用。如何在控制器中分别访问这两个值中的每一个？需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:23:44.783

不是返回 $result，而是返回 $result->row_array();

这将返回您抓取的列的命名散列。它将是一个单元素数组，因此您无需遍历它。

有关在 codeigniter 中获取数据库数据的更多信息，请查看[数据库类信息](http://ellislab.com/codeigniter/user-guide/database/results.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:49:09.693

[`while()`](http://www.php.net/manual/en/control-structures.while.php)在处理循环时计算表达式。如果表达式的计算结果为`TRUE`，则循环继续。如果是`FALSE`，则停止。这不是最好的地方。（顺便说一句，`mysql_*`到目前为止，PHP 中已弃用函数，所以我真的建议忽略它们的工作方式）。

[CI 数据库用户指南](http://ellislab.com/codeigniter/user-guide/database/index.html)有很多方便的示例和有关如何从数据库中检索数据的信息。在您的情况下，如果您要检索单行，则应使用`$result->row()`or `$result->row_array()`，前者将返回一个`stdClass`对象，后者将返回一个关联数组。

# ssas - MDX SSAS 计算考虑不同用户的度量的平均值

> ID：15580766
> 
> 赞同：2
> 
> 时间：2013-03-22T22:19:44.447
> 
> 标签：ssas, mdx

我正在尝试添加一个计算`BIDS 2008R2`：`DaysSinceLastOrder`考虑到唯一用户的平均值（以及他们的每个平均 DaysSinceLastOrder 时间）

例如，如果我的订单表有这些行：

```
customerID  daysSinceLastOrder
1           null
1           1
1           3
2           6
3           null 
```

然后我想要`((1 + 3)/2 + 6) / 2 = 4`自上次订单以来的平均天数

换句话说：
对于每个用户，计算出该用户的平均值，`daysSinceLastOrder`
然后取这些值的平均值，
但忽略具有空`daysSinceLastOrder`值的订单

显然，这个基本计算不起作用，因为它忽略了分子中客户的唯一性：

```
CREATE MEMBER CURRENTCUBE.[Measures].[Avg Days Since Last Order]
    AS [Measures].[daysSinceLastOrder] / [Measures].[#UniqueCustomers] 
```

在 SQL 中它将是：

```
select AVG(t.avgDaysSinceLastOrder) as avgDaysSinceLastOrder
from (
  select customerID, AVG(daysSinceLastOrder) as avgDaysSinceLastOrder
   from orders  
   group by customerID  
) t 
```

那么我怎样才能使它起作用`MDX`呢？

更新：
实际上我想要这样的东西：

```
CREATE MEMBER CURRENTCUBE.[Measures].[Avg Days Since Last Order]
    AS sum(avg_daysSinceLastOrder_per_customer) / [Measures].[#Unique Customers] 
```

我尝试了以下不起作用的方法，它只是平均所有内容，而不是基于每个客户：

```
CREATE MEMBER CURRENTCUBE.[Measures].[Avg Days Since Last Order]
    AS sum([Customers].[User Id],
          sum([Customers].[User Id], [Measures].[Days Since Last Order]))
       / [Measures].[#Unique Customers] 
```

**备注**：

*   `daysSinceLastOrder`度量是在期间预先计算的`ETL`（`SUM`作为多维数据集中的聚合类型）
*   #UniqueCustomers 显然是多维数据集中的一个度量（在这种情况下会有 3 个），这不是我想要在上面使用的
*   空`daysSinceLastOrder`值表示这是该客户的第一个订单

# javascript - Ember js：在我的示例中，为什么即使其中使用的功能尚未完成，路由器中的逻辑也会继续？

> ID：15580767
> 
> 赞同：1
> 
> 时间：2013-03-22T22:19:45.247
> 
> 标签：javascript, ember.js

我是 ember js 的新手，我正在尝试了解路由:)

这是我的控制器代码：

```
App.AppController = Em.ArrayController.extend({

login: App.Login.create({}),

loginUser: function(){
    $.ajax({
        type: 'POST',
        cache: false,
        url: contextPath + 'user/register',
        data:{name:this.login.name, email:this.login.email,password:this.login.password,confirmPassword:this.login.confirmPassword,acceptTerms:this.login.acceptTerms},
        success: function(data) {
            alert('success!');
        },
        error: function(jqXHR, textStatus, errorThrown) {

        }
    });
}
}) 
```

这是我使用该功能的地方：

```
App.ChooseServiceIndexRoute = Em.Route.extend({
redirect: function() {
    var isLoggedIn = this.controllerFor('app').loginUser();
    alert(isLoggedIn);
    if(isLoggedIn){
        this.transitionTo('chooseService');
    }
    else {
        this.transitionTo('app');
    }
}
}); 
```

看来，函数 loginUser 被调用，但警报（isLoggedIn）发生在函数完成之前。（警报（成功）发生在警报（isLoggedIn）之后。

我可以使用一些帮助来了解发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:23:19.597

Ajax 表示异步 Javascript 和 XML，因此根据定义它是异步的，这意味着它不会在代码完成之前停止代码，而是在加载完成后运行回调。您可以将*async*设置为 false ，以便在完成之前停止执行。您必须小心超时和类似情况。

在此处查看可用选项：**[$.ajax 文档](http://api.jquery.com/jQuery.ajax/)**

# c++ - iOS 使用 C++ 在捆绑包中创建文件不适用于 ios 6

> ID：15580771
> 
> 赞同：0
> 
> 时间：2013-03-22T22:20:16.967
> 
> 标签：c++, ios, xcode, ofstream

如果我在模拟器中创建一个文件，我会成功：

```
const char* testFile = "Test.java";
ofstream createTest;
createTest.open(testFile);
createTest << [CodeView.text UTF8String] ;
createTest.close(); 
```

在 iOS 5.0 上，这工作正常，至少在模拟器中，但在我的升级版 xcode（ios 6.1）上，这只是抛出我：

```
 libc++abi.dylib: terminate called throwing an exception 
```

我如何绕过这个错误，（有没有办法使用 C++ 加载/写入文件夹中的现有文件？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:26:55.180

iOS 上的应用程序包是只读的。

# php - PHP 中的 RESTful：获取 url 中的编码参数

> ID：15580776
> 
> 赞同：0
> 
> 时间：2013-03-22T22:20:49.530
> 
> 标签：php, rest, encoding

我正在构建一个`RESTful`API `PHP`。我想让用户以 3 种不同的编码（json、xml 和 rss）显示任何结果。

以下是`GET`用户 123456873 的请求示例：

```
 - GET /user/123456873.json -> Json
 - GET /user/123456873.xml -> xml
 - GET /user/123456873.rss -> rss 
```

如何使用 PHP 获取包含在 URL 中的编码参数 (.json/.xml/.rss)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:24:53.190

您正在寻找重写引擎。继续阅读：[http ://en.wikipedia.org/wiki/Rewrite_engine](http://en.wikipedia.org/wiki/Rewrite_engine)

对于 Apache，这可能很有趣： http: [//net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:24:54.830

解决方案在不同的服务器上有所不同，但通常您需要将其配置为服务 PHP，即使路径不是以`.php`
这种方式结尾的 PHP 应用程序可以解析路径并决定如何处理它。

对于 Apache，这可以通过重写模块来完成。谷歌告诉我你应该阅读本指南：[http ://www.logon2.com.au/blog/archive/web-design/php-apache-mod-rewrite-tutorial/](http://www.logon2.com.au/blog/archive/web-design/php-apache-mod-rewrite-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:52:49.867

这是解决方案：

**通过 .htaccess 中的 mod_rewrite 重写 URL：**

```
RewriteEngine on
RewriteRule ^(.*)$ api.php?handler=$1 [L,QSA]

/user/123487364.json -> api.php?handler=user/123487364.json 
```

**在 api.php 中：**

```
$request = $_GET['handler']
$encoding = explode(".", $request); -> to get the encoding (array)
$parameters = explode("/", $encoding[0]); -> to get the parameters (array) 
```

# function - 为什么清除传递的表在函数范围内不起作用？

> ID：15580784
> 
> 赞同：2
> 
> 时间：2013-03-22T22:21:29.217
> 
> 标签：function, lua, scope, lua-table

像这样清除表会导致预期的行为：

```
table1 = { "a" }
table1 = {}
print(unpack(table1))        -- results in printing a blank line 
```

但是如果你在一个函数中做同样的事情，它不需要：

```
table1 = { "a" }

function cleartest (x)
    x = {}
    print(unpack(x))
end

cleartest(table1)            -- results in printing a blank line
print(unpack(table1))        -- results in "a" 
```

是什么导致了这种行为？

编辑：澄清 Lua 中的传递表是如何工作的。x 不是 table1 的本地“副本”，因为它是“值是引用”类型，它实际上是对实际表的引用。例如：

```
table1 = { "a" }

function xisref (x)
    x[2] = "b"
end

xisref(table1)
print(unpack(table1))         -- results in printing "a    b" thus x is a reference to the actual table 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:26:24.400

因为您实际上无法清除表的值 - 只能清除名称。

如果你这样做

```
table1 = { "a" }
table1 = {} 
```

您没有设置`{ "a" }`为`{}`，但您设置`table1`为`{}`替换以前的值。该值现在无法访问，最终将被垃圾收集器清除。

当您调用 时`cleartest`，then**也**`x`将指向与 相同的值，但它是不同的（本地）名称。通过这样做，您只需指向一个新的空表，但这并没有改变仍然指向.**`{ "a" }``table1``x``x = {}``x``table1``{ "a" }`**

 **回应您的编辑：

Yes`x`是对与 相同的值的引用`table1`。**但** `x`仍然只是恰好指向该值的本地名称。在你给 赋值的那一刻`x`，局部变量`x`指向新的东西，而不会影响它之前指向的值。

试试这个（任何地方，全球，本地，没关系）：

```
test1 = { "a" }
test2 = test1
-- printing them now gives the same table
test1 = 5
-- printing test1 gives 5; printing test2 still gives the table 
```

分配新的东西`test2`并打印`test1`会产生相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:24:58.673

你不是在清理桌子。您正在创建一个新表并将其分配给变量。

在第一种情况下，您正在覆盖`table1`变量，因此后面的引用会获取您的新空表。

在第二种情况下，您将覆盖`x`函数本地的变量，因此后面的引用`table1`不受影响。`table1 = {}`请注意，如果您在函数中说过，`cleartest()`它的行为将与第一种情况类似。

如果您确实想清除现有表，以便对同一表的其他引用看到已清除状态，您需要编写类似

```
for k in pairs(x) do
    rawset(x, k, nil)
end 
```**

# sql - SQL 让 phpMyAdmin 显示所有重复项并允许编辑

> ID：15580799
> 
> 赞同：0
> 
> 时间：2013-03-22T22:22:59.167
> 
> 标签：sql, phpmyadmin

我有一张这样的桌子

```
name        age
---------------
bob          22
dave         27
richard      25
stuart       27 
```

我想编辑所有重复项，而不是将它们组合在一起。

所以我希望它向我展示：

```
name        age
---------------
dave         27
stuart       27 
```

并允许我以我喜欢的方式删除或编辑它们。

我努力了：

```
SELECT
name, age
FROM
table
GROUP BY
age
HAVING 
COUNT(*) > 1 
```

但它只是将它们组合在一起并且不允许编辑。

# .net - 在 IL 代码中，为什么在给定情况下没有 nop 操作码？为什么在给定情况下会有 br.s 操作码？

> ID：15580802
> 
> 赞同：7
> 
> 时间：2013-03-22T22:23:09.130
> 
> 标签：.net, .net-2.0, cil, opcode

假设我有以下代码：

```
public class Class1
{
    private Class2 obj;

    public void MethodA()
    {
        var class2 = new Class2();
        class2.PropertyI = 2;
        obj = MethodB(class2);
    }

    public Class2 MethodB(Class2 class2)
    {
        return class2;
    }
}

public class Class2
{
    public int PropertyI { get; set; }
} 
```

使用 Visual Studio 2010 编译为 .NET 2.0 程序集生成的 IL 代码如下：

```
.method public hidebysig instance void MethodA() cil managed
{
    .maxstack 3
    .locals init (
        [0] class ClassLibrary1.Class2 class2)
    L_0000: nop 
    L_0001: newobj instance void ClassLibrary1.Class2::.ctor()
    L_0006: stloc.0 
    L_0007: ldloc.0 
    L_0008: ldc.i4.2 
    L_0009: callvirt instance void ClassLibrary1.Class2::set_PropertyI(int32)
    L_000e: nop 
    L_000f: ldarg.0 
    L_0010: ldarg.0 
    L_0011: ldloc.0 
    L_0012: call instance class ClassLibrary1.Class2 ClassLibrary1.Class1::MethodB(class ClassLibrary1.Class2)
    L_0017: stfld class ClassLibrary1.Class2 ClassLibrary1.Class1::obj
    L_001c: ret 
}

.method public hidebysig instance class ClassLibrary1.Class2 MethodB(class ClassLibrary1.Class2 class2) cil managed
{
    .maxstack 1
    .locals init (
        [0] class ClassLibrary1.Class2 CS$1$0000)
    L_0000: nop 
    L_0001: ldarg.1 
    L_0002: stloc.0 
    L_0003: br.s L_0005
    L_0005: ldloc.0 
    L_0006: ret 
} 
```

我的问题如下：

1.  在 MethodA 中，为什么和之间没有`nop`代码？ `L_0006``L_0007`
    *   既然`L_0001`to与to`L_0006`不同，为什么没有操作码？`L_0007``L_0009``nop`
2.  在 MethodB 中，为什么`L_0003`需要？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T22:42:58.310

C# 编译器在大括号处发出 NOP 指令。这使得在代码中设置*断点*变得容易得多。调试器只允许在代码上设置断点，大括号通常不会产生任何代码。所以这只是一个简单的调试帮助，这些 NOP 不会在发布版本中生成。

BR.S 指令是编译器中的一个小缺陷，它没有一个[窥孔优化器](http://en.wikipedia.org/wiki/Peephole_optimization)来摆脱这些无关的指令。通常，优化代码不是 C# 编译器的工作，而是由[jitter 完成的](https://stackoverflow.com/questions/4043821/performance-differences-between-debug-and-release-builds/4045073#4045073)。这将轻松轻松地删除指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:32:46.207

您看到的所有内容都是因为您在调试模式下进行编译。多余的跳转和 nop 是禁用的优化通道以及调试支持（我相信）。

在发布模式下编译。

# c# - 将多个列表枚举值写入另一个枚举

> ID：15580805
> 
> 赞同：2
> 
> 时间：2013-03-22T22:23:42.357
> 
> 标签：c#, enums, flags, enum-flags

从客户端我得到一个列表，其中每个 int 值是 Enum DayOfWeek 的枚举 int 值。

该列表仅包含那些在时间计划器中可见的 int 值（天）。

获取 int 值列表，例如 0、1、2（星期日、星期一、星期二），您将如何以一般方式将这些值写入 DayOfWeek 枚举，适用于所有 7 天或没有一天？

只知道星期六的索引为 6，而我的 DayOfWeek 枚举的值为 32。

```
[Flags]
public enum DayOfWeek
{
   Sunday = 0,
   Monday = 1,
   Tuesday = 2,
   Wednesday = 4,
   Thursday = 8,
   Friday = 16,
   Saturday = 32,
   NotSet = 64,
} 
```

更新

这是来自 MarcinJuraszek 的工作解决方案代码，只是根据我的需要进行了更改：

```
var visibleWeekDays = new List<int>();
            for (int i = 0; i <= 6; i++)
            {
                visibleWeekDays.Add(i);
            }

            int allBitValues = visibleWeekDays.Select(i => (int)Math.Pow(2, ((i + 6) % 7))).Aggregate((e, i) => e | i);
            AllVisibleDays = (VisibleDayOfWeek) allBitValues;

[Flags]
public enum VisibleDayOfWeek
{
    None = 0,
    Mon = 1, 
    Tue = 2,
    Wed = 4,
    Thu = 8,
    Fri = 16,
    Sat = 32,
    Sun = 64
}

 public VisibleDayOfWeek AllVisibleDays { get; set; } 
```

上面的代码将一周中的所有日子写入 VisibleDayOfWeek 枚举，现在可以轻松地将其保存在数据库字段中。

根据 Microsoft MSDN，标志枚举的 None 值现在再次设置为 0，其余值是 2 的幂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:33:21.470

```
var input = new List<int>() { 0, 1, 2 };

var output = input.Select(i => (DayOfWeek)Math.Pow(2, ((i + 6) % 7))).ToList(); 
```

这个奇怪`((i + 6) % 7)`是必要的，因为标准`DayOfWeek`从星期日开始，而你的`64`作为星期日的值。

您还可以使用 LINQ 将标志聚合为单个`int`值：

```
var x = output.Select(i => (int)i).Aggregate((e, i) => e | i); 
```

**更新**

对于更改的标志，您必须更改*翻译*查询：

```
var output = input.Select(i => (DayOfWeek)Math.Pow(2, (i - 1) % 7)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:29:45.383

像这样：

```
private void button1_Click(object sender, EventArgs e)
{
    var mylist = new List<int>() { 0, 1, 2 }; // Sunday, Monday, Tuesday

    DayOfWeek days = (DayOfWeek)0;
    foreach (var item in mylist)
        days |= (DayOfWeek)Math.Pow(2, item);

    Debug.WriteLine(days);
    // Displays "Sunday, Monday, Tuesday"
}
[Flags]
public enum DayOfWeek
{
    None = 0,
    Sunday = 1,
    Monday = 2,
    Tuesday = 4,
    Wednesday = 8,
    Thursday = 16,
    Friday = 32,
    Saturday = 64,
} 
```

（编辑以匹配编辑的问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:28:08.473

（1）将Undefined的名称改为None；这更符合语义。

(2) 对于每个 DayValue，设置

```
dayOfWeek |= (DayOfWeek) Math.Pow(2,DayValue); 
```

DayValue 是输入值：0,1, ..., 6

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:28:41.537

你可以这样做：

```
var days = (DayOfWeek)listOfValues.Sum(); 
```

编辑：我可能把你的问题弄错了，我以为你得到了一个整数列表并想将它们转换为 DayOfWeek。如果你只想要一整天，你可以做`(DayOfWeek)127`或只是添加`AllDays = 127`到枚举中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T23:04:02.987

理解这个问题的答案需要更深入地理解枚举类的 [Flags] 属性。[您可以在 MSDN](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)上阅读有关此属性的信息（或阅读有关如何使用它的一些指南）

“Flags”属性是 C 世界的遗留物，您没有 C# 和 CLR 提供的所有花哨类型。

例如，您可能有一个 C 程序需要跟踪一堆不同的正交条件（我们将它们称为 Condition0、Condition1、Condition2 等......）但是为了节省空间，或者更容易传递这些条件作为一个单元，我们希望将它们全部压缩成一个 8 位（或更大）的值。然后你要做的是定义这样的条件：

*   位 0 跟踪 Condition0 的状态
*   位 1 跟踪 Condition1 的状态
*   Bit 2 跟踪 Condition2 的状态
*   等等

如果您还记得二进制到十进制的转换，您就会知道 - 位 0 代表十进制值 1 - 位 1 代表十进制值 2 - 位 2 代表十进制值 4 - 位 4 代表十进制值8 - 位 n 表示 2 的 n 次方的十进制值

因此，我们可以结合这两个列表并看到：

*   Condition0 的值为 1（4 位二进制中的 0b0001）
*   Condition1 的值为 2（4 位二进制中的 0b0010）
*   Condition2 的值为 4（4 位二进制中的 0b0100）
*   ETC。 。.

如果我们需要表示 Condition1 和 Condition2 已经发生，那么这意味着设置了位 1 和位 2。二进制是 0b0110，十进制是“6”。表示 Condition1 和 Condition2 的值只是 Condition1 和 Condition2 的逻辑或。0b0010 或 0b0110 是 0b0110。2 或 4 是 6。

现在，您可能已经注意到，在上面的示例中，逻辑 OR 与 Condition1 和 Condition2 的和得出相同的值（2 + 4 = 2 OR 4）。“我知道，我把所有条件加起来就行了！” 你会说。编写 List.Sum() 比使用 OR 和累加器的 for 循环要容易得多。不幸的是，这并不总是有效。

*   再次考虑上面的“6”或 0b0110 的值，这意味着“Condition1 和 Condition2”为真。

*   然后将其与表示“条件0 和条件1”已设置的值结合起来。0b0011 或十进制的“3”

*   如果您执行逻辑 OR - (0b0110 OR 0b0011)，您将得到 0b0111 或十进制 7。这看起来像“Condition0、Condition1 和 Condition2”都是正确的。这似乎是正确的！

但是，如果将值相加，则会得到十进制 9（6 + 3，或 0b0110 + 0b0011），即 0b1001。0b1001 看起来像“条件 3 为真，条件 0 为真”，这是不对的。Condition3 是如何参与其中的，Condition1 和 Condition2 发生了什么？当我们开始时，它们都设置好了！

现在，回到 C# 世界——“标志”属性的意思是“这个枚举可以由一个或多个可以独立存在或不存在的正交条件组成”。程序员可以为枚举的不同元素分配值，以使它们不重叠（就像在 C 中一样）。完成后，您可以通过对它们执行逻辑 OR 操作来愉快地组合这些正交条件中的一个或多个。您甚至可以在枚举中定义由先前定义的元素组合而成的元素。考虑元素

```
Weekends = Saturday | Sunday,
Weekdays = Monday | Tuesday | Wednesday | Thursday | Friday, 
```

**总结：** 对标志求和仅在某些情况下有效（主要是当求和的每个值代表一个条件时）。为了编写在所有情况下都能正常工作的健壮代码，您可能应该坚持使用标志的逻辑 OR。可能需要多写几行，但它更准确地捕捉到了您的意图，更易于维护，并且如果有人将您不期望的东西传递到您的方法中，它会更加健壮。因此，要将列表中的所有元素组合在一起，您应该将它们全部组合在一起。就像是

```
FlagsEnum accumulator = 0; //Or better yet, FlagsEnum accumulator = FlagsEnum.None if you've followed the design guidelines
foreach(FlagsEnum flag in ListOfflags)
{
  accumulator |= flag;
}
return accumulator; 
```

现在，由于没有将“无”设为 0，您已经在工作中引发了额外的麻烦，但我将把修复它作为练习留给读者，并添加[MSDN 指南](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)建议不要这样做的注释。

# function - Clojure 中的命名空间之间共享函数

> ID：15580807
> 
> 赞同：9
> 
> 时间：2013-03-22T22:23:49.440
> 
> 标签：function, clojure, namespaces, abstraction

我很可能以错误的方式处理这个问题，所以请原谅我的天真：

为了学习 Clojure，我已经开始将我的 Python OAuth 客户端库移植到 Clojure。我通过包装 clj-http 来做到这一点，就像我在 Python 库中包装 Python 请求一样。到目前为止，这似乎工作得很好，我真的很高兴看到实现在 Clojure 中实现。

但是我遇到了一个问题：我计划同时支持 OAuth 1.0 和 2.0，并将各自的功能分成两个文件：oauth1.clj 和 oauth2.clj。现在，理想情况下，每个文件都应该公开一组与 HTTP 动词对应的函数。

```
(ns accord.oauth2)

...

(defn get
  [serv uri & [req]]
  ((:request serv) serv (merge req {:method :get :url uri}))) 
```

这些函数本质上是相同的，实际上现在在 oauth1.clj 和 oauth2.clj 之间是完全相同的。我的第一反应是将这些函数移动到 core.clj 中，然后在各自的 OAuth 命名空间（oauth1、oauth2）中要求它们，以避免重复编写相同的代码。

这很好，只要我使用文件中的引用函数，即 oauth1.clj 或 oauth2.clj。但是假设我们想按照我的意图使用这个库（在 REPL 中，或者在你的程序中），如下所示：

```
=> (require '[accord.oauth2 :as oauth2])  ;; require the library's oauth2 namespace

...

=> (oauth2/get my-service "http://example.com/endpoint")  ;; use the HTTP functions 
```

找不到var`oauth2/get`是因为仅将其拉入 oauth2.clj 中的命名空间似乎并没有像它实际上在该命名空间中那样暴露它。我不想用更多的功能来包装它们，因为这基本上违背了目的；这些函数非常简单（它们只是包装了一个`request`函数），基本上，如果我要这样做的话，我会在三个地方编写它们。

我确信我没有正确地在 Clojure 中理解命名空间，而且可能是惯用地思考抽象问题和代码共享的一般方式。

所以我想知道这个的惯用解决方案是什么？我会以完全错误的方式解决这个问题吗？

**编辑：**

这是问题的简化：[https ://gist.github.com/maxcountryman/5228259](https://gist.github.com/maxcountryman/5228259)

请注意，目标是一次性编写 HTTP 动词函数。他们不需要特殊的调度类型或类似的东西。他们已经很好了。问题是它们没有暴露于`accord.oauth1`or `accord.oauth2`，例如，当您的程序需要时`accord.oauth2`。

如果这是 Python，我们可以像这样导入函数：`from accord.core import get, post, put, ...`进入`accord.oauth1`，`accord.oauth2`然后当我们使用`accord.oauth1`模块时，我们可以访问所有这些导入的函数，例如`import accord.oauth2 as oauth2`... `oauth2.get(...)`。

我们如何在 Clojure 中做到这一点，或者我们应该如何惯用地提供这种 DRY 抽象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T18:48:59.893

考虑看看 Zach Tellman 的图书馆[Potemkin](https://github.com/ztellman/potemkin)。Zach 将其描述为“用于重组命名空间和代码结构的函数集合”。

波将金并非没有争议。[这是](https://groups.google.com/d/msg/clojure/NX_H16r4JY8/6qantiC_8iIJ)Clojure 邮件列表上一个线程的开头，其中 Stuart Sierra 明确表示他不是这个想法的粉丝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:37:16.047

我将回答我的问题，尽管感谢所有评论的人：安德鲁的回答内容丰富，虽然它不能完全回答问题，但它肯定会导致答案。我确实认为 Potemkin 会这样做，但我继续并根据[这个线程](https://groups.google.com/forum/#!msg/clojure/NX_H16r4JY8/6qantiC_8iIJ)编写了自己的解决方案。我会说我不觉得这种方法通常是惯用的，基于这里的一些回应和 IRC 中的进一步讨论，但是它可能对有限的用例有意义，比如我的。

但要回答这个问题，这个函数应该做我原本打算的：

```
(defn immigrate
  [from-ns]
  (require from-ns)
  (doseq [[sym v] (ns-publics (find-ns from-ns))]
    (let [target (if (bound? v)
                  (intern *ns* sym (var-get v))
                  (intern *ns* sym))]
      (->>
        (select-keys (meta target) [:name :ns])
        (merge (meta v))
        (with-meta '~target))))) 
```

然后你可以像这样调用它，假设我们把它放在 foo.clj 中（如果你看到我在编辑中添加的要点）：

```
(ns testing.foo)

(immigrate `testing.baz) 
```

现在，如果我们在 REPL 中需要 testing.foo：

```
=> (require '[testing.foo :as foo])
=> (foo/qux "hi!")
;; "hi!" 
```

在 IRC 上与 Stuart Sierra 交谈并阅读 Andrew 链接的[电子邮件线程](https://groups.google.com/d/msg/clojure/NX_H16r4JY8/6qantiC_8iIJ)后，我得出结论，这不一定是使用命名空间的预期方式。

相反，实现我的库的更好方法可能如下所示：

```
=> (require '[accord.oauth2 :as oauth2])
=> (def my-serv (oauth2/service 123 456 ...))
=> (require '[accord.http :as http])
=> (http/get my-serv "http://example.com/endpoint") 
```

但是，考虑到我想向最终用户提供尽可能干净的 API，我可能会继续`immigrate`在“导入”HTTP 方法函数的这个非常有限的范围内使用该函数。

**编辑：**

经过进一步讨论，我认为通常不应该使用上述解决方案，正如我已经说过的那样。对于我的用例，我可能会使用我的最后一个解决方案，即使用两个单独的命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T08:28:31.490

设计解决方案的一种选择是使用提供默认实现的多方法。

```
;The multi methods which dispatch on type param
(defmulti get (fn [serv uri & [req]] serv))
(defmulti post (fn [serv uri & [req]] serv))

;get default implementation for any type if the type doesn't provide its own implementation
(defmethod get :default [serv uri & [req]]
  "This is general get")

;post doesn't have default implementation and provided specific implementation.
(defmethod post :oauth1 [serv uri & [req]]
  "This is post for oauth1")

(defmethod post :oauth2 [serv uri & [req]]
  "This is post for oauth2")

;Usage
(get :oauth1 uri req) ;will call the default implementation
(get :oauth2 uri req) ;will call the default implementation
(post :oauth1 uri req) ;specific implementation call
(post :oauth2 uri req) ;specific call 
```

# android - android解析的aspx文件和txt文件不同

> ID：15580810
> 
> 赞同：0
> 
> 时间：2013-03-22T22:23:57.603
> 
> 标签：android, json, parsing

```
 try {

                    String ret = jsnparse.getUrlString(params[0]);
                    ret = ret.trim();           
                    JSONObject jsonObj = new JSONObject(ret);

                    JSONArray products = jsonObj.getJSONArray(TAG_JsonArray);
                    JSONObject tmp;
                    for(int i=0; i<products.length(); i++){
                        tmp = products.getJSONObject(i);
                        FacultyMemberClass _product = new FacultyMemberClass(
                                tmp.getString(TAG_id),
                                1,
                                tmp.getString(TAG_Name)+" "+ tmp.getString(TAG_surName),
                                "(" +tmp.getString(TAG_RankPosition)+")" + tmp.getString(TAG_RankTitle), 
                                tmp.getString(TAG_Research), 
                                tmp.getString(TAG_Email),
                                tmp.getString(TAG_Office), 
                                tmp.getString(TAG_Phone),
                                tmp.getString(TAG_Photo)
                                );

                        productList.add(_product);
                    }
                } catch (SocketTimeoutException e) {
                    e.printStackTrace();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                return productList;

            }

i am using these codes to parse my json code, it is work for http://www.gorkemkaradogan.com/Personnel.txt
but it is not runinng http://www.gorkemkaradogan.com/Personnel.aspx , when i give this url
my jsonparse class is ; `package com.example.cmpeemu;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.SocketTimeoutException;
import java.net.URL;
import java.net.URLConnection;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.client.methods.HttpGet;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.http.AndroidHttpClient;

public class JSONParser {
     public static final int connectTimeout = 10*1000; // 10 seconds..

    // constructor
    public JSONParser() {

    }

    public static String getUrlString(String url)
                      throws MalformedURLException, SocketTimeoutException, IOException{
        InputStream in = null;
        BufferedReader reader = null;
        URLConnection feedUrl;
        String ret = "";
        feedUrl = new URL(url).openConnection();

        feedUrl.setConnectTimeout(connectTimeout);
        feedUrl.setReadTimeout (connectTimeout);
        in = feedUrl.getInputStream();
        reader = new BufferedReader(new InputStreamReader(in,"ISO-8859-9"));
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        ret = sb.toString();
        in.close();
        return ret;
     }

    public Bitmap downloadBitmap(String url) throws MalformedURLException, IOException {
       final AndroidHttpClient client = AndroidHttpClient.newInstance("Android");
       final HttpGet getRequest = new HttpGet(url);

       try {
          HttpResponse response = client.execute(getRequest);
          final int statusCode = response.getStatusLine().getStatusCode();
          if (statusCode != HttpStatus.SC_OK) {
             return null;
          }

          final HttpEntity entity = response.getEntity();
          if (entity != null) {
              InputStream inputStream = null;
              try {
                  inputStream = entity.getContent();
                  final Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                  return bitmap;
              } finally {
                  if (inputStream != null) {
                     inputStream.close();
                  }
                  entity.consumeContent();
              }
          }
       } catch (MalformedURLException e) {
          getRequest.abort();
          e.printStackTrace();
       } catch (IOException e) {
          getRequest.abort();
          e.printStackTrace();
       } finally {
          if (client != null) {
              client.close();
          }
       }
       return null;
     }
} 
```

为什么它不适用于我的 aspx 文件。另一方面，在我的 json 代码中，有用于 exapmle 讲师_en 和讲师_tr 的数组，在顶部有讲师_en，但是当 TAG_JsonArray 是讲师_tr 时它没有运行，它必须在顶部代码，我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:26:07.457

因为你的aspx不是json，它是html：

查看源代码：[http ://www.gorkemkaradogan.com/Personnel.aspx](http://www.gorkemkaradogan.com/Personnel.aspx)

![截屏](../Images/f1e89e75d2be51b5d4c99a642fe0af86.png)

# ios - 创建一个新实体并使用神奇的记录我失去了自动完成功能

> ID：15580816
> 
> 赞同：1
> 
> 时间：2013-03-22T22:24:44.640
> 
> 标签：ios, objective-c, ios6, magicalrecord

我有一个正在使用魔法记录的现有项目。我创建了一个具有 2 个字符串属性的新实体，并且我无法再引用任何核心数据类。我创建了实体，运行了 mogenerator，并更新了列出所有核心数据头文件的实体文件。我不确定我做错了什么。

我没有做这个项目的初始实施，我正在努力解决这个问题。

# javascript - javascript在条件中使用.html作为字符串获取值

> ID：15580821
> 
> 赞同：0
> 
> 时间：2013-03-22T22:25:05.830
> 
> 标签：javascript, jquery

假设我有这个：

```
alert($('#child_check').html());
            if($('#child_check').html() != "Select..." || $('.funnel_items').val() == "5" || $('.funnel_items_sub').val() != "Select..."){
                return true;
            }else{
                alert("No Sub category selected!");
                return false;
            } 
```

.html 返回：

```
 &nbsp; No available selection for this action. 
```

我将如何检查 .html 是否等于输入的字符串，因为如果我警告 $('#test').html() 它包含该字符串但条件不返回 true，所以我想知道出了什么问题用这个代码？

也真的不可能使用 .html 值作为 codi 的字符串比较

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:37:32.770

我认为您正在尝试查看 .html() 的结果是否“包含”另一个字符串。

[http://jsfiddle.net/XRWHF/](http://jsfiddle.net/XRWHF/)

```
var haystack = $('#foo').html();
var needle = 'No available selection for this action.';
if (haystack.indexOf(needle) !== -1) { // If needle is inside haystack
    return true;
} else {
    return false;
} 
```

# twitter-bootstrap - 跨度之间的引导线

> ID：15580822
> 
> 赞同：1
> 
> 时间：2013-03-22T22:25:08.613
> 
> 标签：twitter-bootstrap, border, markup

我需要有一个 3 列布局并在它们之间画线。我想要的第一个是绘制简单的线条（1px 黑色实心），第二个 - 使用图像背景。

[这是下面代码的实时示例](http://jsfiddle.net/BhCu9/4/)

```
<div class="row">
    <div class="span4">111 111 111</div>
    <div class="span4">222 222 222</div>
    <div class="span4">333 333 333</div>
</div> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T16:33:31.740

这个问题是在 Bootstrap 2 流行时被问到的。现在 Bootstrap 3 是最新的，它没有 cols 之间的差距这样的问题。使用引导程序 3！

# javascript - 如何在 Rails 中使用 Jquery 和 Coffeescript 隐藏元素？

> ID：15580827
> 
> 赞同：0
> 
> 时间：2013-03-22T22:25:33.550
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript

我想在我的 Rails 站点的页面中隐藏一个元素，但我对 Jquery 或 Coffeescript 还不是很熟悉。

此代码在控制台中工作：

```
$('#TheButton').click(function(){$('#TheText').toggle()}); 
```

然后我将其[转换](http://js2coffee.org/)为 Coffescript：

```
$("#TheButton").click ->
  $("#TheText").toggle() 
```

但它在我的 Rails 页面上不起作用。我如何解决它？下面是生成的 javascript 文件：

```
(function() {
jQuery(function() { 
# stuff... 
  });

  $('form').on('click', '.add_fields', function(event) {
  # stuff... 
  });

  $("#TheButton").click(function() {
    return $("#TheText").toggle();
  });

}).call(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:27:44.427

如果您的 JS 文件嵌入在布局的顶部，则您拥有的每个文件都必须包含在该 jQuery 调用中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:36:06.997

jQuery 的选择器在页面加载后才起作用。您需要确保您的代码在文档准备好*后运行：*

```
$(document).ready ->

  $("#TheButton").click ->
    $("#TheText").toggle()

  # other stuff you want to happen after document load 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:25:20.900

添加

```
$ -> 
```

在你的代码之前确保它在 DOM 加载之后运行。

# java - JSP - 使用具有多个参数的 Bean 方法处理表单

> ID：15580828
> 
> 赞同：0
> 
> 时间：2013-03-22T22:25:35.300
> 
> 标签：java, html, eclipse, google-app-engine, jsp

我有这个表格并想处理它：

```
<form id="myForm" class="form-horizontal" action="/user" method="post">
  <fieldset>
    <div class="control-group">
      <!-- Text input-->
      <label class="control-label" for="input01">Email:</label>
      <div class="controls">
        <input name="email" placeholder="email" class="input-xlarge" type="text"
          value="<%=?????????">
      </div>
    </div>

    <div class="control-group">
      <!-- Text input-->
      <label class="control-label" for="input01">Password:</label>
      <div class="controls">
        <input name="password" placeholder="password" class="input-xlarge" type="text"
          value="<%=request.getParameter("password")%>">
      </div>
    </div>
  </fieldset>
</form>

</div>

<div class="modal-footer">
  <a href="#" class="btn" data-dismiss="modal">Close</a> 
    <input class="btn btn-primary" type='button' value='Save Changes'
      onclick='document.forms["myForm"].submit();'>
</div>

</div> 
```

但是，我有一个带有两个参数的 bean 方法，我尝试使用以下方法来处理它：

```
public void insert(String email, String password) {
    User entry = new User(email, password);
    PersistenceManager pm = PMF.get().getPersistenceManager();
    pm.makePersistent(entry);
} 
```

我的问题是，如何将 Bean 与使用两个参数的表单正确连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T13:42:52.567

您是否创建了 bean java 文件来连接这两者？一个功能性 bean 文件由以下三部分组成：

1.  用作初始化的构造函数
2.  吸气剂
3.  二传手

在以下几行中，您将找到一个基于您上面发布的表单的简单示例。记住 System.out.println 的老把戏来检查你所写的一切是否正确。

**Bean 文件，我们称之为 userData.java**

```
package blabla;

import java.io.Serializable;

public class UserData implements Serializable {

private String email;
private String password;

//1.Constructor
public UserData()
{
    email="";
    password="";

}

//2.Getters
public String getEmail(){
return email;
}

public String getPassword(){
return password;
}

//3.Setters - Caution: we use different variables here

public void setEmail(String eml)
{
this.email=eml;
}

public void setPassword(String pswd)
{ 
this.password=pswd;
}   } 
```

另一方面，.jsp 文件应该类似于 **index.jsp**

```
<%--Blablabla headers and stuff, I will only write the things needing to be added--%>
<jsp:useBean id="entry" class="packagePath.UserData" scope="application"/>
<%--For analytic info about the parameters of the jsp call above, check:         http://www.javatpoint.com/jsp-useBean-action--%>
<jsp:setProperty name="entry" property="*"/>
<%--Code to invoke all the setters of the bean--%>
<p><jsp:getProperty name="entry" property="email"/></p>
<p><jsp:getProperty name="entry" property="password"/></p>
<%--The two lines are not obligatory to use; you will need them only if you wan tto print the results on the page--%>
<%-- rest of the code%--> 
```

# asp.net-mvc - MVC 模型 Poco 类，设计问题，

> ID：15580835
> 
> 赞同：1
> 
> 时间：2013-03-22T22:26:15.710
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, poco

我有一个小问题。

如果我保存了所有应用程序的地址，我正在尝试创建一个地址类。

问题是我希望能够将多个地址链接到客户和公司。

有人可以告诉我应该如何设计吗？

我首先使用 MVC 4 和 entityFramework 代码。

```
 public class Address
    {
        [Key]
        public int AddressId { get; set; }

        public string Street { get; set; }

        public string Number { get; set; }

        public string ZipCode { get; set; }

        public int CountyId { get; set; }
        public virtual County County { get; set; }

        public int StateId { get; set; }
        public virtual State State { get; set; }

        public int CountryId { get; set; }
        public virtual Country Country { get; set; }
    }

public class Customer
    {
        [Key]
        public int CustomerId { get; set; }
        public int CompanyId { get; set; }

        [Display(Name = "Kund")]
        public string Name { get; set; }

        public virtual Company Company { get; set; }

        // wan't to display a ICollection of addresses.
        //public virtual ICollection<Address> Addresses { get; set; }
    }

 public class Company
    {
        [Key]
        public int CompanyId { get; set; }
        [Display(Name = "Organisationsnummer")]
        public string OrganisationNumber { get; set; }
        [Display(Name = "Företag")]
        public string Name { get; set; }
        [Display(Name = "Företag skapat")]
        public DateTime CreationDate { get; set; }

        public virtual ICollection<Customer> Customers { get; set; }
        public virtual ICollection<Employee> Employees { get; set; }
        // wan't to display a ICollection of addresses.
        //public virtual ICollection<Address> Addresses { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:34:29.280

在您的类的以下属性和注释中，它应该有助于 Entity Framework 理解您的关系：

```
 public class Address
{
    [Key]
    public int AddressId { get; set; }

    public string Street { get; set; }

    public string Number { get; set; }

    public string ZipCode { get; set; }

    public int CustomerId {get;set;}
    [ForeignKey("CustomerId")]
    public virtual Customer Customer {get;set;}

    public int CompanyId {get;set;}
    [ForeignKey("CompanyId")]
    public virtual Company Company {get;set;}

    public int CountyId { get; set; }
    [ForeignKey("CountyId")]
    public virtual County County { get; set; }

    public int StateId { get; set; }
    [ForeignKey("StateId")]
    public virtual State State { get; set; }

    public int CountryId { get; set; }
    [ForeignKey("CountryId")]
    public virtual Country Country { get; set; }
}

public class Customer
{
    [Key]
    public int CustomerId { get; set; }

    public int CompanyId { get; set; }

    [Display(Name = "Kund")]
    public string Name { get; set; }

    [ForeignKey("CompanyId")]
    public virtual Company Company { get; set; }

    [InverseProperty("Customer")]
    public virtual ICollection<Address> Addresses { get; set; }
}

public class Company
{
    [Key]
    public int CompanyId { get; set; }
    [Display(Name = "Organisationsnummer")]
    public string OrganisationNumber { get; set; }
    [Display(Name = "Företag")]
    public string Name { get; set; }
    [Display(Name = "Företag skapat")]
    public DateTime CreationDate { get; set; }

    [InverseProperty("Company")]
    public virtual ICollection<Customer> Customers { get; set; }

    [InverseProperty("Company")]
    public virtual ICollection<Address> Addresses { get; set; }

    [InverseProperty("Company")]
    public virtual ICollection<Employee> Employees { get; set; }

}

public class Employee
{
[Key]
public int EmployeeId {get;set;}

public int CompanyId {get;set;}

[ForeignKey("CompanyId")]
public virtual Company Company {get;set;}
} 
```

编辑：你现在有另一种类型的问题。您的 DELETE/UPDATE 规则导致您现在看到的错误。您很可能在通向同一主键表的多个路径上设置了 CASCADE delete。首先设置您的所有关系，如下所示：

![在此处输入图像描述](../Images/f9d0e907bcd27fa80b3a9df4dc09294e.png) ![在此处输入图像描述](../Images/084088f2217dee74d19084200bb73ffc.png)

然后假设这种情况：您有实体 A、B 和 C。实体 B 对实体 A 具有 FK。实体 C 对实体 A 和实体 B 具有 FK。

您只能在一个依赖路径上设置级联删除/更新。这意味着您只能执行以下操作：

A和B之间的级联删除和B和C之间的级联删除。

但是，如果您在 A 和 C 之间添加级联删除以及上面的内容，您将收到现在的错误。

# hadoop - Nagios 监控 hadoop 集群的脚本

> ID：15580841
> 
> 赞同：2
> 
> 时间：2013-03-22T22:26:34.960
> 
> 标签：hadoop, monitoring, nagios

我正在尝试使用 Nagios 监控 Hadoop 集群。我的目标是监控所有 Hadoop 守护进程（如 DataNode、Jobtracker 和 Tasktracker 等）的状态和资源使用情况。我能想到的解决方案是监控这些守护进程正在使用的端口。但这似乎非常有限。例如，我看不到节点中有多少任务正在运行等。

所以，我的问题是：是否有使用 Nagios 进行 Hadoop 监控的系统解决方案？

谢谢，

舒敏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:50:01.933

我找到[了这个](http://exchange.nagios.org/directory/Plugins/Others/check_hadoop-2Ddfs-2Esh/details)。这是一个用于监控 hdfs 的 nagios 插件。[以下](http://exchange.nagios.org/index.php?option=com_mtree&task=search&Itemid=74&searchword=hadoop)是 nagios exchange 上所有与 hadoop 相关的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:24:37.130

当然有一些方法可以使用 SNMP 监控 Hadoop 集群。您应该在 Linux 服务器上安装软件包 snmp。还必须在集群上启用 SNMP，我想有一个选项可以在某种基于 Web 的管理控制台中启用它。

启用此功能后，您应该能够 snmpwalk 集群：

```
snmpwalk -v 2c -c public <ip address cluster> 
```

.. 比您可以编写 perl 或 bash 脚本来检查您喜欢监视的某些 OID。您可以将此脚本放在您的“libexec”文件夹中，并在 commands.cfg 中为该脚本定义一个新命令，例如 check_cluster_snmp 或您喜欢的其他命令。

您也可以使用 JMX 检查集群，但我对 JMX 还不太了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T16:44:01.697

最好的选择是使用 JMX，因为它允许查看 Java 进程以检查正在发生的事情，并提供指标（如列入黑名单的节点、hdfs 空间状态等）。

您可以通过 URL 从每个节点中提取数据`http://node.domain:port/jmx?qry=*adoop`

你可以看看这些相关的问题：

[https://stackoverflow.com/questions/16893407/are-there-advanced-http-query-parameters-for-jmx-proxy-tomcat-servlet](https://stackoverflow.com/questions/16893407/are-there-advanced-http-query-parameters-for-jmx-proxy-tomcat-servlet)

[是否有任何可用的 JMX - REST 桥接器？](https://stackoverflow.com/questions/1571600/is-there-any-jmx-rest-bridge-available)

# soap - SOQL 查询没有带回没有评论的父级

> ID：15580847
> 
> 赞同：0
> 
> 时间：2013-03-22T22:26:52.543
> 
> 标签：soap, salesforce, soql, salesforce-chatter

由于这种结构的方式，我无法带回没有评论/提要的组，不幸的是，试图反转这会导致多个错误，因为`CollaborationGroup`不了解它与`CollaborationGroupFeed`.

这是查询：

```
SELECT 
        c.Parent.Id, 
        c.Parent.OwnerId, 
        c.Parent.CreatedById, 
        c.Id, 
        c.ParentId, 
        (
          SELECT 
                  Id, 
                  FeedItemId, 
                  ParentId
          FROM FeedComments
        )

FROM CollaborationGroupFeed c 
```

但无论出于何种原因，我都不能这样做：

```
SELECT 
        Id, 
        OwnerId, 
        CreatedById, 
        (
          SELECT 
                  Id, 
                  ParentId
          FROM CollaborationGroupFeeds
        ),
        (
          SELECT 
                  Id, 
                  FeedItemId, 
                  ParentId
          FROM FeedComments
        )

FROM CollaborationGroup 
```

> 不理解 FROM 部分查询调用中的关系“CollaborationGroupFeed”。`

**编辑**

所以假设我有一个我刚刚创建的名为 Foo 的组

```
[FOO] 
```

Foo 里面有一个帖子`BlahPost`

```
[FOO]
|
|_BlahPost 
```

可以说`BlahPost`有评论（或几个）

```
[FOO]
|
|_BlahPost
        |_Comment 1
        |_Comment 2 
```

上面的查询将返回所有这些。

现在假设我有一个新的群组栏

```
[Bar] 
```

由于没有帖子/评论，因此上面的查询没有返回任何内容，因为我是从孩子到父母的工作，而父母没有帖子。我正在寻找一个从父级开始`CollaborationGroup`并向下移动到`CollaborationFeed`将显示的查询`FeedComment`

更有意义？订单乱了，我从中间工作，应该从顶部工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T05:31:34.693

尝试在 Apex 中使用 Chatter，这是在 Apex ConnectApi 命名空间中作为静态方法公开的 Chatter REST API 资源操作。这是访问 Chatter 数据的一种更简单的方法。

[http://www.salesforce.com/us/developer/docs/apexcode/Content/connectAPI_overview.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/connectAPI_overview.htm)

[http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_connect_api.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_connect_api.htm)

# log4net - NServiceBus and Log4Net external config file

> ID：15580850
> 
> 赞同：3
> 
> 时间：2013-03-22T22:27:09.753
> 
> 标签：log4net, nservicebus

I prefer the external config files for log4net as the log4net can monitor those files and the level can be changed without chaning the app/web.config file. I am struggling a bit to do that in NServiceBus. I am using Here is my external config file

```
<?xml version="1.0" encoding="utf-8" ?>
<log4net>
  <appender name="RollingFile" type="log4net.Appender.FileAppender">
    <file value="C:\Logs\NServiceBusApplication.log" />

    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%-5p %d{hh:mm:ss} %message%newline" />
    </layout>
  </appender>

  <root>
    <level value="INFO" />
    <appender-ref ref="RollingFile" />
  </root>
</log4net> 
```

The easiest way to do so is to place an attribute in AssemblyInfo.cs

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "ApplicationName.log4net.xml", Watch = true)] 
```

This doesn't work in NServiceBus (I am using NServiceBus.Host.exe). Then I tried calling

```
SetLoggingLibrary.Log4Net(() => XmlConfigurator.Configure(log4netConfigUri)); 
```

before `Configure.With` in `EndpointConfig`. With this log4net reads the config file from the correct location, it doesn't watch for it, so when I change the log level, it isn't reflected in the app.

Next I tried with appSettings

```
<appSettings>
    <add key="log4net.Config" value="ApplicationName.log4net.xml"/>
    <add key="log4net.Config.Watch" value="True"/>
</appSettings> 
```

Again, log4net reads this and subsequently reads the ApplicationName.log4net.xml, it still doesn't watch for it.

How do I configure the log4net in NServiceBus service that is using NServiceBus.Host.exe to

1.  Read the config file form external config file (i.e. log4net config is not within app.config)
2.  Watch the external config file so that any changes to the external config file are reflected.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T06:33:25.973

If you're using the assembly attribute, use:

```
SetLoggingLibrary.Log4Net(); // no parameters 
```

This should also work:

```
SetLoggingLibrary.Log4Net(() => XmlConfigurator.ConfigureAndWatch(log4netConfigFileInfo)); 
```

Or this:

```
XmlConfigurator.ConfigureAndWatch(log4netConfigFileInfo)
SetLoggingLibrary.Log4Net(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-06T12:12:11.713

**NServiceBus >= 5.0** has a separate nugetPackage for log4Net: [NServiceBus.Log4Net](https://www.nuget.org/packages/NServiceBus.Log4Net/)

Instead of calling: `SetLoggingLibrary.Log4Net(x => ...);`

use the following statements:

```
log4net.Config.XmlConfigurator.Configure();
LogManager.Use<Log4NetFactory>(); 
```

Or refer to this sample on how to programmatically configure the appenders: [https://github.com/Particular/NServiceBus.Log4Net/blob/develop/src/Sample/LoggingConfig.cs](https://github.com/Particular/NServiceBus.Log4Net/blob/develop/src/Sample/LoggingConfig.cs)

# python - 在python中分割wav文件

> ID：15580853
> 
> 赞同：9
> 
> 时间：2013-03-22T22:27:40.170
> 
> 标签：python, wav

我正在尝试在 Python 中以编程方式拆分 wav 文件。基于来自 stackoverflow 的提示以及来自 Python wave 模块的文档，我正在执行以下操作

```
import wave

origAudio = wave.open('inputFile.wav','r')
frameRate = origAudio.getframerate()
nChannels = origAudio.getnchannels()
sampWidth = origAudio.getsampwidth()

start = float(someStartVal)
end = float(someEndVal)

origAudio.setpos(start*frameRate)
chunkData = origAudio.readframes(int((end-start)*frameRate))

chunkAudio = wave.open('outputFile.wav','w')
chunkAudio.setnchannels(nChannels)
chunkAudio.setsampwidth(sampWidth)
chunkAudio.setframerate(frameRate)
chunkAudio.writeframes(chunkData)
chunkAudio.close() 
```

我遍历许多不同的开始和结束值，并以这种方式从原始文件中提取音频块。奇怪的是，该技术对某些块工作得非常好，而为其他块产生垃圾白噪声。此外，没有明显的模式表明哪个开始和结束位置会产生白噪声，只是它在输入文件中始终如一地发生。

以前有人经历过这种行为吗？或者知道我做错了什么？欢迎提出有关以编程方式拆分音频文件的更好方法的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T23:35:44.503

这可能与`start*frameRate`调用[setpos](http://docs.python.org/2/library/wave.html#wave.Wave_read.setpos)时的浮点数有关。也许在[readframes](http://docs.python.org/2/library/wave.html#wave.Wave_read.readframes)之后，您应该使用[tell](http://docs.python.org/2/library/wave.html#wave.Wave_read.tell)来查找文件指针的当前位置。

# wpf - 这样做的正确方法是什么？

> ID：15580855
> 
> 赞同：5
> 
> 时间：2013-03-22T22:27:49.840
> 
> 标签：wpf, data-binding

我有一个员工 ID 和一个与该员工关联的图像作为项目中的资源（图像显示在员工姓名旁边的列表中）。

所以我认为是这样的

```
<DataTemplate DataType="{x:Type m:Employee}">
        <Grid>
            <Image Grid.Column="0" Name="image" Source="../Images/{Binding Path=Id}.jpg"/> 
```

它不是有效的 XAML。

我想我可以在代码隐藏中处理一些数据绑定事件并在那里创建路径？对我来说似乎并不理想。

我可以将路径存储在我的 Employee 类中，但这太糟糕了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T00:00:04.920

您将不得不使用`IValueConverter`

这是一个简单的示例，传入 a`String.Format`作为转换器参数

```
public class StringFormatToImageSourceConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (parameter is string)
        {
            return string.Format(parameter.ToString(), value);
        }
        return null;
    }

    public object ConvertBack(object value, Type targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        return null;
    }
} 
```

用法：

```
<XXXX.Resources>
    <local:StringFormatToImageSourceConverter x:Key="StringToImage" />
</XXXX.Resources>

<Image Source="{Binding Path=Id, Converter={StaticResource StringToImage}
     , ConverterParameter=../Images/{0}.jpg}" /> 
```

有一种方法可以`Xaml`通过使用不可见`TextBlock`来格式化字符串来保留它，但不是最佳实践。

```
<Grid>
    <TextBlock x:Name="StringToImage" Visibility="Hidden" Text="{Binding Id, StringFormat=../Images/{0}.jpg}" />
    <Image Source="{Binding Text, ElementName=StringToImage}"/>
</Grid> 
```

# php - 绕过 MySQL 查询

> ID：15580856
> 
> 赞同：5
> 
> 时间：2013-03-22T22:27:58.483
> 
> 标签：php, mysql, sql-injection

> 在 MySQL 中，可以在**关键字**本身中插入注释，这提供了另一种*绕过*某些输入验证过滤器的方法，同时保留实际查询的语法。例如：

```
SEL/*foo*/ECT username,password FR/*foo*/OM users 
```

但是怎么可能注释掉保留词之间的东西呢？有什么好处？为什么它是一种绕过？

*好像有毛病！*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:51:20.437

[该引用来自 2007 年的一本书](http://books.google.com/books?id=YJKbVzeabJYC&pg=PA268&lpg=PA268&dq=%22In%20MySQL,%20comments%20can%20even%20be%20inserted%20within%20keywords%20themselves%22&source=bl&ots=uLs_sZ32ny&sig=nkQslgFoZFRehvx17pX2AC0NT5Y&hl=en&sa=X&ei=lOBMUbfZBsXbiwLL3oC4CA&ved=0CDAQ6AEwAA#v=onepage&q=%22In%20MySQL,%20comments%20can%20even%20be%20inserted%20within%20keywords%20themselves%22&f=false)......对于早期版本的 MySql 可能是正确的，但我找不到该语法不返回错误的 MySQL 版本。

这种语法背后的最初想法是，如果应用程序试图将某些 SQL 关键字*列入黑名单*，那么这种攻击就会欺骗应用程序。

例如......如果应用程序试图阻止攻击者使用 Sql 注入从数据库中删除记录，则不允许的术语黑名单将过滤掉`DELETE`......但无法过滤掉`DEL/**/ETE`。

但是，尝试在动态查询中创建禁止使用的术语黑名单是防止 SQL 注入的一种**糟糕且无效**的方法......并且有更简单有效的方法来防止 SQL 注入攻击，例如参数化查询，这会导致嵌入的注释语法即使仍然有效也无用。

[来自 OWASP](https://www.owasp.org/index.php/SQL_Injection)：

> 几乎总是这样，黑名单充满了漏洞，使其无法有效防止 SQL 注入攻击。例如，攻击者可以：
> 
> *   未引用的目标字段
> *   想办法绕过对某些转义元字符的需求
> *   使用存储过程隐藏注入的元字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:01:13.217

感谢[**迈克尔弗雷德里克森完美的答案。**](https://stackoverflow.com/a/15581100/944948)
[查看 mysql 站点](http://dev.mysql.com/doc/refman/5.5/en/comments.html)，您会看到所有版本的 mysql 中都提到了这种评论方式。
在我的版本（5.5.24）中，如果您编写如下查询：

```
sele/*ops*/ct name from tableName 
```

你会得到这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your
MySQL server version for the right syntax to use near 'sele/*ops*/ct name from
tableName' at line 1 
```

但是如果你把它改成这样：

```
select na/*ops*/me from tableName 
```

你会得到这个：

```
Unknown column 'na' in 'field list' 
```

我认为它评论了字段名称的其余部分。但是如果你像这样编写查询，它可以正常工作：

```
select name/*ops*/ from tableName 
```

# python - Python EasyGUI：系统托盘图标异或多个窗口

> ID：15580863
> 
> 赞同：1
> 
> 时间：2013-03-22T22:28:37.067
> 
> 标签：python, systray, easygui

我正在编写一个简单的程序，它会每隔 x 分钟给你一条消息，让你在坐在电脑前休息一下。但是，我还需要能够关闭程序，而不必等待 x 分钟后弹出窗口。

我的想法是我要么创建一个系统托盘图标（我正在为使用 Windows 的朋友编写它）并添加以这种方式退出它的可能性，或者我只是添加另一个窗口，它有一个退出按钮并保持打开所有时间（不太优雅）。

根据我的阅读，系统托盘的想法似乎需要比 easygui 更复杂的东西。

那么，有没有办法用 easygui 实现这些想法，如果没有：我需要看什么才能让它工作？

感谢您的时间和精力。

# jquery - jQuery从cookie自动填充表单字段

> ID：15580868
> 
> 赞同：0
> 
> 时间：2013-03-22T22:29:24.033
> 
> 标签：jquery, cookies

我正在尝试创建一个 jQuery 脚本，它将表单字段值保存在 cookie 中，如果用户返回相同的表单，表单将被自动填充。

具体来说，我想知道，如何获取表单字段或任何内容的值，并将其保存在 cookie 中，然后稍后使用 jQuery 将其返回。

我发现非常旧的插件可以做到这一点，但这些插件似乎不适用于最新的 jQuery 版本，而且我不太喜欢使用插件。

处理 cookie 的正确 jQuery 方式是什么？有没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:34:25.997

你有 jQuery-cookie 插件：[https](https://github.com/carhartl/jquery-cookie) ://github.com/carhartl/jquery-cookie 和 jQuery 的 serialize()：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# python - python pyfits，读取头信息并在计算中使用

> ID：15580869
> 
> 赞同：0
> 
> 时间：2013-03-22T22:29:27.843
> 
> 标签：python, header

我正在使用 python 和 pyfits 运行一些代码，并且正在从标题中读出一行信息。我得到了正确的行，但是由于它是如何写在标题中的，所以它打印出来时用冒号分隔我需要的数字。

我正在运行的行是 print header[0].header['opp']

这打印 34:04:32.04

我需要做一个计算，将这些数字加在一起，但不知道如何做，因为它们用冒号分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:00:56.480

这样的事情应该可以解决您的问题：

```
header[0].header['opp'] = "34:04:32.04"
print (sum(float(x) for x in header[0].header['opp'].split(":"))) 
```

...输出：

```
70.03999999999999 
```

（编辑）

或者，如果这些值实际上构成了以小时、分钟和秒为单位的时间：

```
s = "34:04:32.04"
ss = [float(x) for x in s.split(":")]
print (ss[0] + ss[1]/60 + ss[2]/3600) 
```

...以小时为单位输出值：

```
34.07556666666667 
```

# ribbon-control - LargeImageSource 抛出异常

> ID：15580871
> 
> 赞同：0
> 
> 时间：2013-03-22T22:29:33.103
> 
> 标签：ribbon-control

我是 XAML 的新手，正在尝试创建一个基本的功能区。我这里有一些代码：

```
<RibbonWindow x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:r="clr-     namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
    Title="MainWindow"
    x:Name="RibbonWindow"
    Width="640" Height="480">

<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Ribbon x:Name="Ribbon" Title="Ribbon Title">
        <r:RibbonButton Width="100" Background="Azure" Height="100" >

        </r:RibbonButton>
        <r:RibbonButton x:Name="RibbonButton" Label="Button" LargeImageSource="Icons/disk.png">

        </r:RibbonButton>

    </Ribbon>
</Grid> 
```

我在代码的 LargeImageSource 部分遇到异常。我不确定为什么。图像正在设计器中呈现，并且在我构建时没有生成错误，但我无法运行该项目。

这是一个例外：

PresentationFramework.dll 中出现“System.Windows.Markup.XamlParseException”类型的未处理异常

附加信息：“在‘System.Windows.Baml2006.TypeConverterMarkupExtension’上提供值引发异常。” 行号“19”和行位置“51”。

如果有这个异常的处理程序，程序可以安全地继续。

任何帮助，将不胜感激。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:06:47.003

它已停止产生错误（出于某种原因）。它与使用 .png 文件有关，尽管我不知道是什么。我玩弄了这些属性并让它发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T00:13:19.860

假设`"Icons/disk.png"`已添加到解决方案资源管理器（右键单击项目 -> 添加 -> 新建文件夹，然后右键单击文件夹 -> 添加 -> 现有项目...并选择图像文件），该项目`"disk.png"`应将其属性设置为如下：

```
Build Action : Content
Copy to Output Directory : Copy if newer 
```

# python - 在 Python 中初始化超类

> ID：15580874
> 
> 赞同：1
> 
> 时间：2013-03-22T22:30:04.237
> 
> 标签：python, class, inheritance, initialization

我正在学习 Python。目前，我可以通过组合做我想做的事情，但是当我尝试使用继承做同样的事情时，我得到一个错误。这是我的代码。我基本上是在尝试为彩色方块开设课程。

```
from graphics import *

class Block(Rectangle):
    def __init__(self, corner, colour):
        self.corner = corner
        self.colour = colour
        self.x1 = self.corner.getX() * 30
        self.y1 = self.corner.getY() * 30
        self.x2 = self.x1 + 30
        self.y2 = self.y1 + 30
        self.point1 = Point(self.x1, self.y1)
        self.point2 = Point(self.x2, self. y2)
        Rectangle.__init__(self, self.point1, self.point2)

    def draw(self, window):
        self.window = window
        self.Rectangle.draw(self.window)

new_win = GraphWin("thingy", 700, 500)
corner = Point(1, 1)
square1 = Block(corner, 'red')
square1.draw(new_win)

new_win.mainloop() 
```

我得到的错误是

```
File "F:\Python\4\4_3.py", line 24, in draw
self.draw(self.window) 
```

错误无限重复。

这是我在使用组合时执行我想要的代码：

```
from graphics import *

class Block():
    def __init__(self, corner, colour):
        self.corner = corner
        self.colour = colour
        self.x1 = self.corner.getX() * 30
        self.y1 = self.corner.getY() * 30
        self.x2 = self.x1 + 30
        self.y2 = self.y1 + 30
        self.point1 = Point(self.x1, self.y1)
        self.point2 = Point(self.x2, self. y2)
        self.Rectangle = Rectangle(self.point1, self.point2)

    def draw(self, window):
        self.window = window
        self.Rectangle.draw(self.window)
        self.Rectangle.setFill(self.colour)

new_win = GraphWin("thingy", 150, 150)
corner = Point(1, 1)
square1 = Block(corner, 'red')
square1.draw(new_win)

new_win.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:47:47.313

python 2.7的简单代码是：

`BaseClassName.__init__(self, args)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:59:40.460

```
from graphics import *

class Block(Rectangle):
    def __init__(self, corner, colour):
        self.corner = corner
        self.colour = colour
        self.x1 = self.corner.getX() * 30
        self.y1 = self.corner.getY() * 30
        self.x2 = self.x1 + 30
        self.y2 = self.y1 + 30
        self.point1 = Point(self.x1, self.y1)
        self.point2 = Point(self.x2, self. y2)

        Rectangle.__init__(self, self.point1, self.point2)

    def draw(self, window):
        self.window = window
        Rectangle.draw(self, self.window)
        # instead of self.Rectangle.draw(self.window) 
```

在继承的情况下，没有`self.Rectangle`

# internet-explorer - 如何在不破坏 Firefox 和 IE9 中 Bootstrap 的图像大小调整的情况下将子 div 绝对定位到相对定位的父 div？

> ID：15580878
> 
> 赞同：1
> 
> 时间：2013-03-22T22:30:30.277
> 
> 标签：internet-explorer, firefox, twitter-bootstrap, responsive-design, css-position

我正在使用 Bootstrap 框架，我有一个父 div 包含一个带有 a 的图像`position:relative`，一个子 div 包含一个带有 a 的图像`position:absolute`。我使用 left 和 top 百分比将子 div 推到父 div 的右下角。

在 Chrome 和 Safari 中，子 div 的定位一切正常，当浏览器重新调整大小时，图像会相应地响应和缩放。但是在 Firefox 和 Internet Explorer 中，子 div 中的图像**无法**重新调整大小。似乎`position:absolute`破坏了 Boostrap 的图像大小调整功能。

有谁知道处理此问题的正确方法或解决方法？

现场示例：[http ://www.smartbombinteractive.com/testbed/bootstrap_resize/](http://www.smartbombinteractive.com/testbed/bootstrap_resize/)

**HTML：**

```
<div> class="header-image"><img src="img/img_test_bg.jpg">
        <div class="corner-peal"><img src="img/header_corner_peal.png">
        </div>
</div> 
```

**CSS：**

```
.header-image{
    text-align:center;
    position:relative;
}
.corner-peal{
    position:absolute;
    left:50.99%;
    top: 17.295%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:37:20.867

我真是个菜鸟！Bootstrap 根据其容器的宽度缩放图像。解决方案是在子节点上设置百分比宽度（Chrome 和 Safari 会为您执行此操作，而 Fire Fox 和 IE 则不会。）

```
.corner-peal{
    position:absolute;
    left:50.99%;
    top: 17.295%;
    width:49.01%;
} 
```

# c# - 当ajax计时器（倒计时）显示0时调用c#函数

> ID：15580879
> 
> 赞同：0
> 
> 时间：2013-03-22T22:30:35.807
> 
> 标签：c#, javascript, asp.net, ajax, timer

我在简单的任务中遇到了大问题......在 asp.net 页面上是具有两个视图的 Multiview，

在第一个视图中，我有 ajax 计时器，它从 60 到 0 计数秒。时间显示在标签上，在 updatepanel 中。我会调用我的 c# 函数来做一些事情并最终改变活动视图。

我怎样才能做到这一点 ？

我试图检查 Timer_tick 事件，如果秒 == 0，我调用函数，但它不起作用。我也试过 Timer1.Enabled = false，但它也不起作用。

我认为，我必须使用 Javascript，但是如何？我不知道在哪里以及如何...我还不知道 Javascript。

这是我的 Timer_Tick 事件（标签上的时间显示正确）

```
 protected void Timer1_Tick(object sender, EventArgs e)
    {
        Test t = (Test)Session["SelectedTest"];

        if (t.Remaining.Minute == 0 && t.Remaining.Second == 0)
        {
            DoSomething();
        }
        else
        {
            t.Remaining= t.Remaining.AddSeconds(-1);
            Label7.Text = t.Remaining.ToLongTimeString();
        }
    } 
```

和我的 DoSomething() 函数：

```
 public void DoSomething()
        {

// Doing a lot of things....

            MultiView1.ActiveViewIndex = 3;
        } 
```

功能 Dosomething 工作正常，我也有按钮调用这个函数 - 它正在工作但是如果剩余秒数 == 0，我也想调用函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:20:41.787

是的，我试过这个。调试后我知道，我的 c# 函数 DoSomething() 正在工作 - 但最后， View 没有改变。调用 DoSomething() 后，Timer Ticking 再次...

我找到了js函数：

```
function stopTimer()
{
      var timer = $find("<%=Timer1.ClientID%>")
     timer._stopTimer();
} 
```

但我不知道，我在哪里可以调用它。

**编辑：**我看到，我的函数 DoSomething() 调用了很多次。如果 Timer 显示 0，则函数在每个滴答中调用

**Edit2：**菜鸟解决方案:)

1.  添加第二个Timer，设置Timer2.Interval = 9999999（或其他高）
2.  在 Timer1_Tick 事件中：

    t.Remaining = t.Remaining.AddSeconds(-1); Label7.Text = t.Remaining.ToLongTimeString();

    ```
     if (t.Remaining.Minute == 0 && t.Remaining.Second == 1) Timer2.Interval = 1000; 
    ```

3.  在 Timer2_Tick 中调用 c# 函数

原因：如果 Timer 是 UpdatePanel 的触发器，则不能从 Tick 事件中调用 ac# 函数

**我知道，这是更好的解决方案（可能是 JavaScript），但我的截止日期很快，所以我必须使用它。

# ruby-on-rails - act_as_follower 未定义方法

> ID：15580884
> 
> 赞同：1
> 
> 时间：2013-03-22T22:30:53.310
> 
> 标签：ruby-on-rails, ruby, gem

在我的 Rails 应用程序中，我使用 gem 'acts_as_follower' 我已经运行了生成命令，rake db:migrate 设置用户模型但是当我进入我的本地主机时它只是说`undefined local variable or method 'acts_as_followable'`

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:27:15.460

执行`bundle install`并重新启动您的服务器。

# javascript - 使用类型或值标签自动点击

> ID：15580888
> 
> 赞同：2
> 
> 时间：2013-03-22T22:31:13.437
> 
> 标签：javascript, bookmarklet

亲爱的朋友们，我有一个网站，我想为其创建自动点击的 javascript 书签，但该网站不使用 ID 标签。这是网站的代码：-

```
<input type="submit" name="Submit" value="Find Product" 
onclick="return incrementClicksTest('2','true')" class="buttonSubmit"> 
```

我使用了这个 JavaScript 小书签

```
javascript:document.getElementById('any_id_here').click() 
```

适用于 id，我如何使用名称、值和类型标签制作书签

谢谢提前！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:36:18.890

使用以下内容：

```
document.getElementsByTagName("input")[0].click(); 
```

**示例代码**：http: [//jsfiddle.net/dcRsc/](http://jsfiddle.net/dcRsc/)

现在，如果您的按钮是页面中的第一个输入，这将起作用。

如果您的页面中有许多元素，请使用此选项：

```
var elems =document.getElementsByTagName("input");

for(var i=0;i<elems.length;i++)
{
    if(elems[i].type=="submit" && elems[i].name =="Submit")
    {
        elems[i].click();        
        break;
    }
} 
```

**示例代码**：http: [//jsfiddle.net/dcRsc/1/](http://jsfiddle.net/dcRsc/1/)

这将触发`click`带有提交名称的提交按钮的事件。

此外（并且由于您的按钮已经有一个 css 类）您可以使用以下`getElementsByClassName()`方法：

```
var elems =document.getElementsByClassName("buttonSubmit");

for(var i=0;i<elems.length;i++)
{
    if(elems[i].name =="Submit")
    {
        elems[i].click();        
        break;
    }
} 
```

**示例代码**：http: [//jsfiddle.net/dcRsc/2/](http://jsfiddle.net/dcRsc/2/)

这将获得`buttonSubmit`应用类的所有元素。

或者

```
document.getElementsByClassName("buttonSubmit")[0].click(); 
```

如果您的按钮是页面中唯一带有该类的元素，则`for`完全避免循环。

# facebook-apps - 我没有域名，只有ip

> ID：15580889
> 
> 赞同：0
> 
> 时间：2013-03-22T22:31:14.017
> 
> 标签：facebook-apps

现在我没有我正在开发的应用程序的域名。我会，但不会很快。

当我尝试调试工具时，我收到错误“URL 处的对象无效，因为指定的应用程序不允许使用域 'ip_number'。您可以验证您配置的 'App Domain' 在...

当然，我不能在 App domain 字段中使用我的 ip。

我已将 ip 添加到“服务器 ip 白名单”中

我应该怎么做才能测试我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:35:38.777

一些托管服务提供商允许您免费获得 3 级域。您可以尝试一下，或者[这项服务](http://uni.me/)可能对您有用。

# shell - SED 或 AWK 命令仅打印两个设置模式之间的行

> ID：15580890
> 
> 赞同：1
> 
> 时间：2013-03-22T22:31:19.503
> 
> 标签：shell, awk, sed, ksh, hp-ux

我需要一个命令/脚本来获取 CVS 合并冲突。基本上，我需要一个 SED 或 AWK 命令来仅打印两个设置模式之间的行

例子：

```
Pattern1="RCS file:"
Pattern2="conflicts during merge" 
```

当我尝试一个简单的 SED 命令时，例如：

```
sed -n '/RCS file:/,/conflicts during merge /p' INPUT.txt 
```

我没有得到预期的输出。我只想捕获“filename2 和 filename3”的详细信息（在合并期间有冲突）。

有人可以帮忙吗？

```
INPUT.txt

RCS file: /hello/filename1
retrieving revision 1.4.2.1.18.2.2.1
retrieving revision 1.4.2.1.18.2.2.1.4.2
Merging differences between 1.4.2.1.18.2.2.1 and 1.4.2.1.18.2.2.1.4.2 into filename1

RCS file: /hello/filename2
retrieving revision 1.4.2.1.18.2.2.1
retrieving revision 1.4.2.1.18.2.2.1.4.2
Merging differences between 1.4.2.1.18.2.2.1 and 1.4.2.1.18.2.2.1.4.2 into filename2
rcsmerge: warning: conflicts during merge

RCS file: /hello/filename3
retrieving revision 1.6.18.1.2.1.2.1
retrieving revision 1.6.18.1.2.1.2.1.4.3
Merging differences between 1.6.18.1.2.1.2.1 and 1.6.18.1.2.1.2.1.4.3 into filename3
rcsmerge: warning: conflicts during merge

RCS file: /hello/filename4
retrieving revision 1.4.2.1.18.2.2.1
retrieving revision 1.4.2.1.18.2.2.1.4.2
Merging differences between 1.4.2.1.18.2.2.1 and 1.4.2.1.18.2.2.1.4.2 into filename4

(Expected) OUTPUT.txt

RCS file: /hello/filename2
retrieving revision 1.4.2.1.18.2.2.1
retrieving revision 1.4.2.1.18.2.2.1.4.2
Merging differences between 1.4.2.1.18.2.2.1 and 1.4.2.1.18.2.2.1.4.2 into filename2
rcsmerge: warning: conflicts during merge

RCS file: /hello/filename3
retrieving revision 1.6.18.1.2.1.2.1
retrieving revision 1.6.18.1.2.1.2.1.4.3
Merging differences between 1.6.18.1.2.1.2.1 and 1.6.18.1.2.1.2.1.4.3 into filename3
rcsmerge: warning: conflicts during merge 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:02:47.937

您的`sed`命令在看到“RCS 文件”时开始输出，并在看到“冲突”标记时停止。所以它几乎输出了所有东西。用 sed 可以做你想做的事，但它很复杂。awk 要简单得多：

```
awk -v RS= '/conflicts/ {print $0}' INPUT.txt 
```

使用 awk 的记录概念，用空行分隔它们，并且基本上 grep 每条记录。所以这不会打印两个模式之间的行，而是打印与特定模式匹配的每个行块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:30:31.323

兄弟 ，

使用 egrep ..... 它很简单，无需担心 SED 和 AWK。它是您想要的固定线条图案......

```
 egrep +B4 conflict INPUT.txt 
```

这里 B 选项打印匹配前的 4 行以及匹配模式的行（我使用 GNU egrep）

egrep 输出：

```
RCS file: /hello/filename2
retrieving revision 1.4.2.1.18.2.2.1
retrieving revision 1.4.2.1.18.2.2.1.4.2
Merging differences between 1.4.2.1.18.2.2.1 and 1.4.2.1.18.2.2.1.4.2 into filename2
rcsmerge: warning: conflicts during merge
--
RCS file: /hello/filename3
retrieving revision 1.6.18.1.2.1.2.1
retrieving revision 1.6.18.1.2.1.2.1.4.3
Merging differences between 1.6.18.1.2.1.2.1 and 1.6.18.1.2.1.2.1.4.3 into filename3
rcsmerge: warning: conflicts during merge 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T23:02:59.743

在这里你有一个提示：

```
awk '{if ($1=="HO") i=1}; {if ($1=="JOU") i=0}; i{print}' file 
```

例子：

```
$ cat file
HI
HO
JE
JOU
LA 
```

所以，

```
Pattern1="HO"
Pattern2="JOU"
awk -v p1=${Pattern1} -v p2=${Pattern2} '{if ($1==p1) i=1}; {if ($1==p2) i=0}; i{print}' file
HO
JE 
```

根据你的情况，

```
Pattern1="RCS file:"
Pattern2="conflicts during merge"

$ awk -v p1=$(Pattern1) -v p2=${Pattern2} '{if ($1==p1) i=1}; {if ($1==p2) i=0}; i{print}' file 
```

**编辑**

如果要查找*包含*此文本的字符串，可以这样做：

```
Pattern1="RCS file:"
Pattern2="conflicts during merge"

$ awk -v p1=$(Pattern1) -v p2=${Pattern2} '{if ($1 ~ p1) i=1}; {if ($1 ~ p2) i=0}; i{print}' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T05:59:34.803

干得好：

```
sed -n '/RCS file:/ !{H;d}; /RCS file:/ {x; /conflict/p}; $ {x; /conflict/p}' input.txt 
```

对于与“RCS 文件：”不匹配的每一行 - 将其附加以保留空间。如果它匹配该行（或者是文件的结尾） - 将模式空间与保持空间交换并检查它是否匹配'conflit'。如果有，请打印。

如果我们使用分支可能会更简单。

像这样：

```
sed -n '$ba; /RCS file:/ba; H; d; :a; x; /conflict/p' input.txt 
```

# debugging - 为什么 Firefox 会随机杀死 HTTPS 请求？

> ID：15580895
> 
> 赞同：0
> 
> 时间：2013-03-22T22:31:59.250
> 
> 标签：debugging, firefox, https

看：

以下是下载好的图片：

[https://polishwords.com.pl/dev/testAbort2.php](https://polishwords.com.pl/dev/testAbort2.php)

和这里：

[https://polishwords.com.pl/dev/testAbort.php](https://polishwords.com.pl/dev/testAbort.php)

我使用 HTTPS 在 Firefox 中获取它们，其中随机一个被中止并且无法正确显示。

在服务器上的日志中，它看起来像这样：

[22/Mar/2013:23:29:11 +0100] "GET /images/mukonczeniestudiow.jpg HTTP/1.1" 200 6705 "-" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/ 19.0"

当文件加载正常时：

[22/Mar/2013:23:30:41 +0100] "GET /images/mukonczeniestudiow.jpg HTTP/1.1" 200 6907 " [https://polishwords.com.pl/dev/testAbort.php](https://polishwords.com.pl/dev/testAbort.php) " "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0"

这个问题的原因可能是什么？在 Chrome 和 Opera 中，它似乎工作正常。我有最新的火狐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:36:26.113

这是服务器上阻止了几个查询的东西

# maven - 管理依赖的版本

> ID：15580897
> 
> 赞同：0
> 
> 时间：2013-03-22T22:32:03.890
> 
> 标签：maven, dependencies

管理依赖版本的最佳方法是什么？

通常我会创建一个超级 POM（不是父 POM），并且我会在超级 POM 中声明我的所有依赖项。这样我的所有项目都可以引用该 POM 以获取依赖项。优点是我的所有依赖项都由中央 POM 控制。

但是，如果我们年复一年地开发一些销售给不同客户的产品，并且依赖版本年复一年地更新。我将如何跟踪我发布给每个客户的产品的依赖版本？.. 我不想在每次需要更新依赖版本时都更新我的 POM。

因此，我正在考虑将依赖项的版本保留在我的设置 xml 中，因为属性和设置可以在每个版本中更新或版本化。

我在 Maven 方面经验丰富，但不是专家。有什么好的建议吗？...提前谢谢约瑟夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:49:51.517

*   将所有版本放在父 pom 的dependencyManagement 中。（就像你现在所做的那样，这就是依赖管理存在的原因）
*   跟踪旧版本：在 SCM 中使用标签。
*   settings.xml 不是项目的一部分！它在那里包含有关**构建环境**（即不是项目）的属性和数据。
*   不要混合不同项目的依赖项。这似乎是一个非常糟糕的主意（这意味着如果您为某个特定客户更新广泛使用的依赖项（例如 hibernate）：它将为您的所有项目更新。因此您将不得不重新验证您的所有项目新版本的休眠）

还有一个小问题，你对 settings.xml 的版本控制和你的父 pom 的版本控制有什么区别？

# c++ - 括号内声明对象的范围

> ID：15580903
> 
> 赞同：2
> 
> 时间：2013-03-22T22:33:06.890
> 
> 标签：c++, scope

如果我声明这样的对象：

```
void main()
{
    myclass objectA(anotherclass(true,true,0));
} 
```

即我通过直接调用后者的构造函数来创建一个objectA和另一个对象“anotherclass”，“anotherclass”的范围是什么？

只有当 main() 完成时它才会被破坏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:34:18.017

临时在包含它的完整表达式的末尾被破坏，即当对构造函数的调用`myclass`返回时。

根据 C++11 标准的第 12.2/3 段：

> **临时对象被销毁作为评估完整表达式（1.9）的最后一步，该表达式（词法上）包含它们被创建的点**。即使评估以抛出异常结束也是如此。销毁临时对象的值计算和副作用仅与完整表达式相关联，与任何特定子表达式无关。

For this reason, if `myclass`'s constructor takes an argument of type `anotherClass` by *reference* (either lvalue reference to `const` or rvalue reference), it shall not store it for future use, because it will be dangling if a temporary is passed, and dereferencing it would be Undefined Behavior.

It is only `objectA` that goes out of scope and gets destroyed when returning from the `main()` function.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T22:34:04.440

该`anotherclass`对象没有范围。范围是名称的属性，而不是对象的属性，并且该对象没有命名。它只是一个临时对象，将在完整表达式结束时被销毁。

这是范围的定义（§3.3.1）：

> 通常，每个特定名称仅在程序文本的某个可能不连续的部分（称为其*范围*）内有效。

# c# - 命名空间不附加到 WCF 中的布尔值，除非与类的命名空间不同

> ID：15580908
> 
> 赞同：2
> 
> 时间：2013-03-22T22:33:27.413
> 
> 标签：c#, .net, xml, wcf, soap

我有一个在 WCF 中用于发送 SOAP 响应的数据类型。它看起来像这样：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <start-call-recording-response xmlns="http://foobar">
         <response>true</response>
      </start-call-recording-response>
   </s:Body>
</s:Envelope> 
```

问题是命名空间 ( `http://foobar`) 没有出现在元素中。也就是说，除非我将 XmlElementAttibute 的命名空间更改为与父类的 XmlRootAttribute 的命名空间不同的东西。这是开始呼叫记录响应的类：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.18033")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(TypeName = "StartcallrecordingresponseType")]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://foobar", ElementName = "start-call-recording-responseType")]
public partial class StartcallrecordingresponseType
{
    [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "http://foobar")]
    private bool responseField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Namespace = "http://foobar", ElementName = "response", IsNullable = false)]
    public bool Response
    {
        get
        {
            return this.responseField;
        }
        set
        {
            this.responseField = value;
        }
    }
} 
```

如果我将 Response 上方的 XmlElementAttribute 的命名空间更改为包含类的命名空间以外的其他内容，它将出现在 SOAP 信封的 . 如果它们相同，则不会出现。尝试了 XmlTypeAttributes、XmlRootAttributes 和 XmlElementAttributes 的许多变体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:30:15.023

这是对的。请参阅[命名空间规范](http://www.w3.org/TR/REC-xml-names/#defaulting)

> 默认命名空间声明的范围从它出现的开始标签的开头延伸到相应的结束标签的末尾，不包括任何内部默认命名空间声明的范围。在空标签的情况下，范围是标签本身。

所以 response 元素从它的 start-call-recording-response 父级继承了 foobar 命名空间。

# emacs - 有没有办法在emacs中的单引号和双引号之间切换字符串？

> ID：15580913
> 
> 赞同：5
> 
> 时间：2013-03-22T22:34:00.487
> 
> 标签：emacs

我正在寻找一个emacs命令，该命令将在该点下的字符串上切换周围的引号字符，例如，将光标放在字符串'bar'中，点击一个键并将其更改为：

```
foo = 'bar'   <--->   foo = "bar" 
```

对于奖励积分，它将：

*   处理切换 Python 三引号字符串 ( `'''`<---> `"""`)

*   根据需要自动更改字符串内的反斜杠转义。

例如

```
foo = 'bar "quote"'   <--->   foo = "bar \"quote\"" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:16:41.367

这可能更健壮一点：

```
(defun toggle-quotes ()
  (interactive)
  (save-excursion
    (let ((start (nth 8 (syntax-ppss)))
          (quote-length 0) sub kind replacement)
      (goto-char start)
      (setq sub (buffer-substring start (progn (forward-sexp) (point)))
            kind (aref sub 0))
      (while (char-equal kind (aref sub 0))
        (setq sub (substring sub 1)
              quote-length (1+ quote-length)))
      (setq sub (substring sub 0 (- (length sub) quote-length)))
      (goto-char start)
      (delete-region start (+ start (* 2 quote-length) (length sub)))
      (setq kind (if (char-equal kind ?\") ?\' ?\"))
      (loop for i from 0
            for c across sub
            for slash = (char-equal c ?\\)
            then (if (and (not slash) (char-equal c ?\\)) t nil) do
            (unless slash
              (when (member c '(?\" ?\'))
                (aset sub i
                      (if (char-equal kind ?\") ?\' ?\")))))
      (setq replacement (make-string quote-length kind))
      (insert replacement sub replacement)))) 
```

它将使用缓冲区中的语法信息来查找字符串开头的引号（假设字符串被引用），并且还将尝试翻转字符串内的引号，除非它们被反斜杠转义 - 这看起来像这可能是一个常见的情况。

PS。我刚刚意识到你也希望它找到三引号，所以她去了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T23:18:39.980

这是一个快速入门的技巧：

```
(defun toggle-quotes ()
  "Toggle single quoted string to double or vice versa, and
  flip the internal quotes as well.  Best to run on the first
  character of the string."
  (interactive)
  (save-excursion
    (re-search-backward "[\"']")
    (let* ((start (point))
           (old-c (char-after start))
           new-c)
      (setq new-c 
            (case old-c
              (?\" "'")
              (?\' "\"")))
      (setq old-c (char-to-string old-c))
      (delete-char 1)
      (insert new-c)
      (re-search-forward old-c)
      (backward-char 1)
      (let ((end (point)))
        (delete-char 1)
        (insert new-c)
        (replace-string new-c old-c nil (1+ start) end))))) 
```

该函数将内部报价交换为相反，这接近奖金 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-10T19:05:57.613

这是更强大的东西，因为它不会删除引号之间的整个文本（这样做可以防止`save-excursion`保持原来的位置，这是一种痛苦）。还处理（非）反斜杠嵌套引号。

```
(defun toggle-quotes ()
  (interactive)
  (let* ((beg (nth 8 (syntax-ppss)))
         (orig-quote (char-after beg))
         (new-quote (case orig-quote
                      (?\' ?\")
                      (?\" ?\'))))
    (save-restriction
     (widen)
     (save-excursion
      (catch 'done
        (unless new-quote
          (message "Not inside a string")
          (throw 'done nil))
        (goto-char beg)
        (delete-char 1)
        (insert-char new-quote)
        (while t
          (cond ((eobp)
                 (throw 'done nil))
                ((= (char-after) orig-quote)
                 (delete-char 1)
                 (insert-char new-quote)
                 (throw 'done nil))
                ((= (char-after) ?\\)
                 (forward-char 1)
                 (when (= (char-after) orig-quote)
                   (delete-char -1))
                 (forward-char 1))
                ((= (char-after) new-quote)
                 (insert-char ?\\)
                 (forward-char 1))
                (t (forward-char 1))))))))) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-01-11T17:50:18.480

这是我为 JavaScript 制作的函数，可能有帮助吗？

```
function swap_str(e, r, t) {
  return e = e.split(r).join("WHAK_a_SWAP"), e = e.split(t).join("WHAK_b_SWAP"), e = e.split("WHAK_a_SWAP").join(t), 
  e = e.split("WHAK_b_SWAP").join(r);
}
//test 1
var str = 'this is "test" of a \'test\' of swapping strings';
var manipulated = swap_str(str,"'",'"');
document.writeln(manipulated)
//test 2
manipulated = swap_str(manipulated,"'",'"');
document.writeln('<hr>'+manipulated)
```

# django - Django Tastypie ToManyField 无法正确解析相关 URI

> ID：15580914
> 
> 赞同：1
> 
> 时间：2013-03-22T22:34:02.637
> 
> 标签：django, tastypie

我有一个使用 Tastypie 生成其 RESTful API 的 Django 后端。此 API 的端点不位于域的顶层；相反，它通过使用 WSGIScriptAlias 存在于“子文件夹”位置。大多数情况下，这很好用。但是我发现当我的一个资源具有 ToManyField 关系时，Tastypie 会抛出一个错误。这是我的一些相关代码。WSGIScriptAlias 行：

```
WSGIScriptAlias /english/rubric /var/webapps/django/rubric/apache/django.wsgi 
```

来自有问题的资源的片段：

```
class TraitResource(ModelResource):
    criteria = fields.ToManyField('rubric.rubric.api.CriterionResource', "criteria", related_name='trait', full = True)

    class Meta:
         queryset = Trait.objects.all()
         authentication=SessionAuthentication()
         list_allowed_methods=['get']
    always_return_data=True

class CriterionResource(ModelResource):

    class Meta:
        queryset = Criterion.objects.all()
        authentication=SessionAuthentication()
        list_allowed_methods=['get']
    always_return_data=True 
```

我的 urls.py：

```
v1_api = Api(api_name='v1')
v1_api.register(TraitResource())
v1_api.register(CriterionResource())

urlpatterns = patterns('',  
    (r'^login/$', 'django_cas.views.login'),
    (r'^logout/$', 'django_cas.views.logout'),
    (r'^api/', include(v1_api.urls))
) 
```

错误消息的片段：

```
{
error_message: "{'path': u'english/rubric/api/v1/rubric', 'tried': [[<RegexURLPattern None ^login/$>], [<RegexURLPattern None ^logout/$>], [<RegexURLResolver [<RegexURLPattern api_v1_top_level ^(?P<api_name>v1)/?$>, <RegexURLResolver [<RegexURLPattern api_dispatch_list ... 
```

（它从那里继续列出它尝试过但未能找到匹配的所有 URL）。

因此，如果我理解正确，正在发生的事情是，由于我的 WSGIScriptAlias，相关对象将它们的完整路径报告为资源 URI，但是当美味派去获取相关对象以返回我调用的对象时，它们不匹配 urls.py 中的任何内容（因为它只需要相对于 WSGI 应用程序挂载点的 url 模式）。我已经通过临时修改 WSGIScriptAlias 验证了这种情况，因此 API 位于根目录 - 然后一切正常。那么我需要做什么才能将其与子文件夹 URL 模式保持一致？我已经在覆盖 prepend_urls 和 get_resource_uri 方面进行了一些尝试，但并没有真正了解这些函数是如何在资源类中使用的，所以我不确定这是否对我来说是正确的策略。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T13:21:55.147

你用的是什么版本的tasyypie？

我有同样的问题，似乎可以通过从 0.9.12 升级到 0.9.15 来解决。

# python - Python：使用正则表达式进行数据验证

> ID：15580917
> 
> 赞同：3
> 
> 时间：2013-03-22T22:34:07.583
> 
> 标签：python, regex

我正在尝试使用`Python regular expression`来验证变量的值。

验证规则如下：

*   该值可以包含任何`a-z`, `A-Z`,`0-9`和`*`(no `blank`, no `-`, no `,`)
*   该值可以`start`带有数字`(0-9)`或字母`(a-z, A-Z)`或`*`
*   该值可以`end`带有数字`(0-9)`或字母`(a-z, A-Z)`或`*`
*   在中间，值可以包含数字`(0-9)`或字母`(a-z, A-Z)`或`*`
*   不得允许任何其他值

目前我正在使用以下代码片段进行验证：

```
import re
data = "asdsaq2323-asds"
if re.compile("[a-zA-Z0-9*]+").match(data).group() == data:
    print "match"
else:
    print "no match" 
```

我觉得应该有更好的方法来完成上述工作。我正在寻找类似以下的内容：

```
validate_func(pattern, data) 
/* returns data if the data passes the validation rules */
/* return None if the data does not passes the validation rules */
/* should not return part of the data which matches the validation rules */ 
```

是否存在这样一种内置功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T22:43:20.763

在正则表达式中，元字符`^`和`$`表示“字符串开头”和“字符串结尾”（分别）；因此，与其查看*匹配*的内容并将其与整个字符串进行比较，不如简单地要求正则表达式匹配整个字符串以开头：

```
import re
data = "asdsaq2323-asds"
if re.compile("^[a-zA-Z0-9*]+$").match(data):
    print "match"
else:
    print "no match" 
```

此外，由于您只使用了一次正则表达式——您编译它并立即使用它——您可以使用方便的方法`re.match`将其作为一个步骤来处理：

```
import re
data = "asdsaq2323-asds"
if re.match("^[a-zA-Z0-9*]+$", data):
    print "match"
else:
    print "no match" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T22:43:27.987

要确保整个字符串与您的模式匹配，请在您的正则表达式中使用字符串锚点的开头和结尾。例如：

```
regex = re.compile(r'\A[a-zA-Z0-9*]+\Z')
if regex.match(data):
    print "match"
else:
    print "no match" 
```

使它成为一个函数：

```
def validate_func(regex, data):
    return data if regex.match(data) else None 
```

例子：

```
>>> regex = re.compile(r'\A[a-zA-Z0-9*]+\Z')
>>> validate_func(regex, 'asdsaq2323-asds')
>>> validate_func(regex, 'asdsaq2323asds')
'asdsaq2323asds' 
```

作为旁注，我更喜欢`\A`这样`\Z`的验证，`^`并且可以根据使用的标志而改变，并且将在字符串末尾的换行符之前匹配。`$``^``$``$`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T22:41:14.127

我想你正在寻找

```
re.match('^[a-zA-Z0-9*]+$',data) and data 
```

额外`and data`的只是返回数据，但我不确定你为什么需要它。检查 re.match 结果与 None 足以检查字符串是否有效。

# ios - AutoLayout：在代码中居中两个视图会导致约束异常？

> ID：15580920
> 
> 赞同：1
> 
> 时间：2013-03-22T22:34:23.510
> 
> 标签：ios, objective-c, xcode, cocoa-touch, autolayout

简短版本：创建`NSLayoutAttributeCenterX`约束总是会导致约束失败。为什么？

我有一个`UITextField`充当搜索文本框的子类。您点击该框并出现一个项目列表，这些项目按您输入的内容进行过滤。像这样：

![在此处输入图像描述](../Images/3a925a0caa3212d50455948373832448.png)

`UITextField`子类负责创建和显示项目的视图。列表的中心应与文本字段的中心匹配。所以，我这样设置我的约束：

```
NSLayoutConstraint *hugCenter = 
   [NSLayoutConstraint constraintWithItem:self.searchContainerView
                                attribute:NSLayoutAttributeCenterX
                                relatedBy:NSLayoutRelationEqual
                                   toItem:self
                                attribute:NSLayoutAttributeCenterX
                               multiplier:1.0
                                 constant:0.0]; 
```

这总是会导致错误：

> 将尝试通过打破约束来恢复 NSLayoutConstraint:0x9a5e1a0 UIView:0x9a5ba40.centerX == SearchTextField:0x7154a40.centerX

为了测试，我使我的场景尽可能简单——视图控制器上的 1 个文本字段：

![在此处输入图像描述](../Images/65f65d82005feee7703b52e6d2584c75.png)

为什么这会导致约束错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:14:27.833

你错过了`setTranslatesAutoresizingMaskIntoConstraints:`某个地方吗？

# node.js - node.js 中的“重新分块”流对象

> ID：15580923
> 
> 赞同：2
> 
> 时间：2013-03-22T22:34:28.317
> 
> 标签：node.js, stream

非常简单的 node.js 问题。我想扩展流对象以重新分块来自远程连接的数据。我正在执行多个 telnet 并向其他服务器发送命令，它们会发回响应。它看起来像这样。

```
> Hello, this is a command

This is the response to the command.
Sometimes it pauses here (which triggers the 'data' event prematurely).

But the message isn't over until you see the semicolon
; 
```

我想做的不是在暂停时触发“数据”事件，而是等待 ; 并触发自定义“消息”事件。

我已经阅读并重读[了这个问题](https://stackoverflow.com/questions/6944319/filtering-stream-object-in-node-js "这个问题")，但我还没有完全理解（部分是因为它是关于可写流，部分是因为我还没有了解 CoffeeScript）。

编辑：我想我在这里问两件事：

1.  如何扩展/继承 net.CreateConnection 使用的流对象？
2.  我可以扩展prototype.write 来“拆分”并重新“发出”每个部分吗？

这是我到目前为止所做的一个片段，但是分块应该是流的一部分，而不是“数据”侦听器的一部分：

```
var net = require('net');

var nodes = [
        //list of ip addresses
];

function connectToServer(ip) {
        var conn = net.createConnection(3083, ip);
        conn.on('connect', function() {
                conn.write ("login command;");
        });
        conn.on('data', function(data) {
                var read =  data.toString();

        var message_list = read.split(/^;/m);

        message_list.forEach (function(message) {
                    console.log("Atonomous message from " + ip + ':' + message);
            //I need to extend the stream object to emit these instead of handling it here
            //Also, sometimes the data chunking breaks the messages in two,
                        //but it should really wait for a line beginning with a ; before it emits.
        });

        });
        conn.on('end', function() {
                console.log("Lost conncection to " + ip + "!!");
        });
        conn.on('error', function(err) {
                console.log("Connection error: " + err + " for ip " + ip);
        });
}

nodes.forEach(function(node) {
        connectToServer(node);
}); 
```

如果我使用的是原始流，我想它会是这样的（基于我在其他地方找到的代码）？

```
var messageChunk = function () {
  this.readable = true;
  this.writable = true;
};

require("util").inherits(messageChunk, require("stream"));

messageChunk.prototype._transform = function (data) {

  var regex = /^;/m;
  var cold_storage = '';

  if (regex.test(data))
  {
    var message_list = read.split(/^;/m);

    message_list.forEach (function(message) {
      this.emit("data", message);
    });
  }
  else
  {
    //somehow store the data until data with a /^;/ comes in.
  }
}

messageChunk.prototype.write = function () {
  this._transform.apply(this, arguments);
}; 
```

但我没有使用原始流，我使用的是 net.createConnection 对象返回的流对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-18T00:44:02.447

不要使用你直接实现的 _transform、_read、_write 或 _flush 函数，这些函数是供节点内部使用的。

当您看到字符“;”时发出自定义事件 在您的信息流中：

```
var msg = "";
conn.on("data",function(data)  {
  var chunk = data.toString();
  msg += chunk;
  if(chunk.search(";") != -1)  {
    conn.emit("customEvent",msg);
    msg = "";
  }
});
conn.on("customEvent",function(msg)  {
  //do something with your message
}); 
```

# memory - 在树遍历 Lua 函数中管理内存

> ID：15580930
> 
> 赞同：1
> 
> 时间：2013-03-22T22:35:18.530
> 
> 标签：memory, recursion, lua, tree, genetic-algorithm

我有两种算法用于在树中返回一个随机节点，其中一个节点可以有 0-N 个子节点（当前节点是`node`，节点的第一个子节点是`node[1]`等）。第一个算法，统一选择，从树中统一选择一个随机节点。它存储一个要返回的节点，当它沿着树向下移动时，这个节点被替换为它当前所在的节点，概率为 1/（到目前为止看到的节点数）。Lua 代码如下。

```
function uniformSelect(node)
    local chosen = node

    function choose(node, counter)
        counter = counter + 1
        local probability = 1/counter
        if math.random() < probability then
            chosen = node
        end

        for i = 1, node.arity do
            choose(node[i], counter)
        end
    end

    choose(node, 0)
    return chosen
end 
```

第二个算法沿着树向下移动，查看它当前所在的节点并以给定的概率 P 返回它。如果没有返回这个节点，那么移动到节点的子节点的概率是 P1, P2 ... PN最多 1\. Lua 代码如下。

```
function select(node, prob)
    local r = math.random()
    if r < prob or node.arity == 0 then
        return node
    end

    local p = {}
    if node.arity == 1 then
        table.insert(p, 1)
    else
        local total = count(node) -- total number of nodes below this one
        for i = 1, node.arity do
            -- insert probability of moving to child i into p
            table.insert(p, (count(node[i])+1)/total)
        end

    end
    -- move to a child node chosen by roulette wheel selection
    return select(node[roulette(p)], prob)
end 
```

这些算法用于遗传编程框架。当我使用第一个算法，统一选择时，它首先在速度和内存方面运行良好。然而，第二个不能用于多代的大量人口，它使用的内存会爆炸。我在下面绘制了这种内存增长，蓝线“prob”是第二种算法，`select`.

![内存使用](../Images/bd9e8b2eededed2a9c4fa96fe3dc85fb.png)

对我来说，`select`看起来它是尾递归的。我还尝试明确调用垃圾收集器，看看是否有帮助，它会稍微减慢增长，但增长仍然很大。

谁能告诉我造成这种差异的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:27:14.893

我绘制了正在生产的树木的平均深度并找到了答案。与函数的交叉操作`select`增加了种群中树的平均深度，导致程序变慢并使用更多的内存。

![在此处输入图像描述](../Images/b567a724521120a9b5edb8f34a33c5be.png)

# javascript - 将html元素简化为js

> ID：15580932
> 
> 赞同：1
> 
> 时间：2013-03-22T22:35:32.197
> 
> 标签：javascript, html

我正在制作一堆看起来一样的元素

我有

```
<div id="e1" class="e1">

        <div class=box>
            <div class='b1'></div>
            <div class='b2'></div>
            <div class='b3'></div>
            <div class='b4'></div>
        </div> 

    <div class='e11'></div>     
    <div class='e12'></div>     
    <div class='e13'></div>     
    <div class='e14'></div>     
    <div class='e15'></div>                                     
        ...more elements
<div>

<div id="e2" class="e2">

        <div class=box>
            <div class='b1'></div>
            <div class='b2'></div>
            <div class='b3'></div>
            <div class='b4'></div>
        </div> 

    <div class='e11'></div>     
    <div class='e12'></div>     
    <div class='e13'></div>     
    <div class='e14'></div>     
    <div class='e15'></div>                                         
        ...more elements
<div> 
```

它们几乎相同，我有几个`e3`和`e4`div ...

我的问题是是否有办法减少代码并使用对象（或更好的方法）在 js 中创建它们。

有人能给我提示吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:41:23.880

**[jsFiddle 演示](http://jsfiddle.net/B5pnv/)**

您将需要获取一些迭代参数，然后创建一个基于这些参数进行迭代的函数以创建这些 html 元素。创建 html 元素的主要方法是

```
document.createElement("tagname"); 
```

然后您将需要按照您希望的顺序附加它们。完成后，您可以将它们附加到屏幕上的元素。避免在循环内追加。即使您创建了很多元素，如果它们只附加到屏幕上一次而不是每次创建元素时，它们也会快速呈现。

这是一个简单的例子：

```
<div id="contentZone"></div>
<script>
 var c = document.getElementById("contentZone");
 var content = document.createElement("div");
 for( var i = 0; i < 3; i++ ){
  var d = document.createElement("div");
  d.innerHTML = i + ") Hello :D";
  content.appendChild(d);
 }
 c.appendChild(content);
</script> 
```

# selenium - Rspec、guard、spork 和 capybara/selenium - js 测试的配置

> ID：15580943
> 
> 赞同：0
> 
> 时间：2013-03-22T22:36:47.747
> 
> 标签：selenium, rspec, capybara, guard, spork

我正在使用[此解决方案](https://github.com/jnicklas/capybara#transactions-and-database-setup)来避免在 javascript 测试期间出现数据库问题。

第一次运行套件，测试运行良好，全部通过。

如果我再次运行整个套件，它们仍然会通过。

但是，如果我运行一个单独的规范文件，然后尝试运行该套件（或其他单独的测试），我会收到此错误：

```
An error occurred in an after hook
  ActiveRecord::StatementInvalid: ArgumentError: prepare called on a closed database: rollback transaction
  occurred at /home/steveq/.rvm/gems/ruby-1.9.3-p194@rails32/gems/sqlite3-1.3.7/lib/sqlite3/database.rb:91:in `initialize'

1) Signing up with valid information
     Failure/Error: visit "/sign_up"
     ActiveRecord::StatementInvalid:
     ArgumentError: prepare called on a closed database: PRAGMA table_info("users")
 # ./app/controllers/registrations_controller.rb:3:in `new'
 # ./app/controllers/registrations_controller.rb:3:in `new'
 # ./spec/features/sign_up_feature_spec.rb:5:in `block (2 levels) in <top (required)>' 
```

如果我重新加载警卫，测试将再次通过。

有没有人对这里发生的事情或任何可能的解决方案有任何见解？我已经尝试了所有我能想到的变体，这是我的 spec_helper 文件来显示我尝试过的东西（变体被注释掉，当前代码 - 水豚页面上的建议 - 是我现在正在使用的） .

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)

require 'rspec/rails'
  require 'rspec/autorun'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    #Make it so Selenium (out of thread) tests can work with transactional fixtures
    #REF http://opinionated-programmer.com/2011/02/capybara-and-selenium-with-rspec-and-rails-3/#comment-220
    # ActiveRecord::ConnectionAdapters::ConnectionPool.class_eval do
    #   def current_connection_id
    #     # Thread.current.object_id
    #     Thread.main.object_id
    #   end
    # end
    # FactoryGirl short syntax
    config.include FactoryGirl::Syntax::Methods

    config.use_transactional_fixtures = true

    # set up for use with :js => true. 
    # See http://stackoverflow.com/questions/8178120/capybara-with-js-true-causes-test-to-fail for more info 
    # config.before :suite do
    #   if Capybara.current_driver == :rack_test
    #     DatabaseCleaner.strategy = :transaction
    #   else
    #     DatabaseCleaner.strategy = :truncation
    #   end
    #   DatabaseCleaner.start
    # end

    # config.after do
    #   DatabaseCleaner.clean
    # end

    # standard RSPEC config
    # config.before(:suite)       :truncation
    #   else
    #     :transaction
    #   end do
    #   DatabaseCleaner.strategy = if example.metadata[:js]
    #     :truncation
    #   else
    #     :transaction
    #   end
    #   DatabaseCleaner.clean_with(:truncation)
    # end

    # config.before(:each) do
    #   DatabaseCleaner.start
    # end

    # config.after(:each) do
    #   DatabaseCleaner.clean
    # end

    # config.before(:each) do
    #   DatabaseCleaner.strategy = if example.metadata[:js]
    #     :truncation
    #   else
    #     :transaction
    #   end
    #   DatabaseCleaner.start
    # end

    # config.after(:each) do
    #   DatabaseCleaner.clean
    # end

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

    # Run specs in random order to surface order dependencies. If you find an
    # order dependency and want to debug it, you can fix the order by providing
    # the seed, which is printed after each run.
    #     --seed 1234
    config.order = "random"

    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.filter_run :focus => true
    config.run_all_when_everything_filtered = true

    config.include MailerMacros
    config.include LoginMacros
    config.before(:each) { reset_email }

    config.include Devise::TestHelpers, :type => :controller
    config.extend LoginMacros, :type => :controller
  end
end

Spork.each_run do
  # allows capybara JS tests to run in separate thread 
  class ActiveRecord::Base
    mattr_accessor :shared_connection
    @@shared_connection = nil

    def self.connection
      @@shared_connection || retrieve_connection
    end
  end

  # Forces all threads to share the same connection. This works on
  # Capybara because it starts the web server in a thread.
  ActiveRecord::Base.shared_connection = ActiveRecord::Base.connection

  # This code will be run each time you run your specs.
  load "#{Rails.root}/config/routes.rb" 
  FactoryGirl.reload
  # reload all the models
  Dir["#{Rails.root}/app/models/**/*.rb"].each do |model|
    load model
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:03:30.717

所以这就是我想出的——希望它能帮助遇到同样麻烦的其他人。

首先，我使用的方法：

```
Spork.each_run do
  # allows capybara JS tests to run in separate thread 
  class ActiveRecord::Base
    mattr_accessor :shared_connection
    @@shared_connection = nil

    def self.connection
      @@shared_connection || retrieve_connection
    end
  end

  # Forces all threads to share the same connection. This works on
  # Capybara because it starts the web server in a thread.
  ActiveRecord::Base.shared_connection = ActiveRecord::Base.connection

  # This code will be run each time you run your specs.
  load "#{Rails.root}/config/routes.rb" 
  FactoryGirl.reload
  # reload all the models
  Dir["#{Rails.root}/app/models/**/*.rb"].each do |model|
    load model
  end

end 
```

工作得很好，但似乎不适用于 sqlite。

最快的解决方法是简单地将 sqlite 换成我的 mysql 测试数据库。这解决了一切。

另一种解决方案，我现在真正在挖掘的一个解决方案是完全放弃 spork 以支持[Zeus](https://github.com/burke/zeus)。

你可以通过 github 链接查看它，但我会告诉你为什么我喜欢它。

它没有必要的配置——spec_helper 中没有 spork 块，guardfile 中没有 spork 块。

它还可以将服务器和控制台的初始化速度加快到不到一秒钟——这不是什么大不了的事，但非常非常令人愉快。

我的测试套件（到目前为止有 191 个示例）从运行大约 35 秒到 17.5 秒 - 一半的时间。

我敦促你检查一下。

# asp.net-mvc - Elmah.MVC 与 Elmah.contrib.Mvc

> ID：15580944
> 
> 赞同：19
> 
> 时间：2013-03-22T22:36:51.293
> 
> 标签：asp.net-mvc, elmah

我是 ASP.NET MVC 的新手，我正在寻找最不痛苦的方法来设置全局错误处理、日志记录和报告（通过电子邮件）。仅供参考，我的 ASP.NET MVC 应用程序在 Azure 中作为 Web 角色托管，但我试图避免使用任何 Azure 特定的挂钩。

看起来安装和配置 ELMAH 是很好的第一步。

当我查看 NuGet 时，我看到：

*   ELMAH（“带有初始配置的 ELMAH，用于快速入门……”）
*   Elmah.Contrib.Mvc ("...旨在增加 MVC 项目的易用性...")
*   Elmah.MVC ("...无痛集成到 MVC...")

我要安装哪些软件包？

编辑：经过一些实验，我更加困惑。在默认 MVC 4 应用程序之上安装三个选项后，我比较了项目文件。似乎 Elmah.Contrib.Mvc 和 Elmah.MVC 都没有添加 elmah.1.2.2 包（我在安装基本 ELMAH 时得到）。此外，这两个包都不会将该`<elmah>`部分添加到 Web.config。

那么...我是否需要先安装 ELMAH，然后安装其中一个“...MVC”软件包以获得他们可能为我带来的任何漂亮改进？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-23T04:52:25.907

[ELMAH](http://nuget.org/packages/elmah/) - 这是默认的 ELMAH 包，其中没有特定于 mvc 的代码，如果您不执行[此处](http://code.google.com/p/elmah/wiki/MVC)描述的操作，我不相信 ELMAH 会记录您的控制器中发生的任何错误，并且您可能无法访问ELMAH 日志页面

[Elmah.Contrib.Mvc](http://nuget.org/packages/Elmah.Contrib.Mvc/) - 这是对 ELMAH 的增强，专门针对 MVC，基于 ELMAHS 的创建者之一对[堆栈溢出问题](https://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute/779961#779961)的回答。

[Elmah.MVC](http://nuget.org/packages/Elmah.MVC/) - This is simliar to the above package however I believe it provides much better support for mvc features like routes etc, It is also quite easy to install and configure, it removes a lot of the messing around you would have to do with ELMAH to take out various parts that arent required when running in a mvc project

You can read the authors posts to get a better idea of how it works:

*   [Integrating ELMAH to ASP.NET MVC in right way](http://www.beletsky.net/2011/03/integrating-elmah-to-aspnet-mvc-in.html)
*   [ELMAH MVC controller released on NuGet](http://www.beletsky.net/2011/08/elmah-mvc-controller-released-on-nuget.html)
*   [ELMAH.MVC v.2.0.0 - Release Candidate](http://www.beletsky.net/2012/06/elmahmvc-v200-release-candidate.html)

Personally I believe the last package would be the best one ot use, it seems to be the more up to date and maintained of the two mvc ones.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T02:55:05.480

您可以考虑使用 Elfar 而不是 Elmah。Elfar 受到 Elmah 的“启发”，但被设计为特定于 MVC 并且配置非常简单。

只需打开 NuGet，然后搜索 Elfar。您会发现许多不同的软件包，但一般来说，您需要一个符合您所使用的技术的软件包。我不熟悉 Azure Web 角色，但如果您可以访问标准 Sql Server，那么您可以简单地使用 Elfar.SqlClient。

更多信息在这里：

[https://github.com/stevenbey/elfar/wiki](https://github.com/stevenbey/elfar/wiki)

# wordpress - 基于日期的 WordPress 代码

> ID：15580951
> 
> 赞同：0
> 
> 时间：2013-03-22T22:37:46.763
> 
> 标签：wordpress

如果发布日期晚于特定日期，我正在尝试让 Wordpress 执行一些代码。当我使用以下内容时，它几乎可以工作......除了 Worpress 显示/回显日期而不是仅仅评估它。

```
<?php $date1 = '2013-03-22';
$date2 = the_date();
if ($date2 >= $date1) { ?>

//code to execute

<?php } ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:42:42.570

它的[`the_date()`](http://codex.wordpress.org/Function_Reference/the_date)工作原理很简单：

> 显示或返回帖子的日期，如果在同一天发布，则显示一组帖子

示例用法：

```
<?php the_date( $format, $before, $after, $echo ); ?> 
```

所以你必须传递`false`给函数以不打印日期，因为它默认为`true`. 例如：

```
<?php
$date1 = '2013-03-22';
$date2 = the_date('', '', '', FALSE);
if ($date2 >= $date1): ?>
  Hello world!
<? endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:42:03.853

你也可以试试这个：

```
$date1 = '2013-03-22';
$date2 = get_the_date();
if ($date2 >= $date1) { ?>
   //code to execute
<?php } ?> 
```

`get_the_date()`仅在`the_date()`打印发布日期时返回日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T02:58:14.227

最终使用了这样的东西：

```
$date2 = the_date('','','',FALSE);
if (strtotime($date2) >= strtotime($date1)) { code to execute } 
```

# c++ - 3D 矢量的角度 - 两者兼得

> ID：15580952
> 
> 赞同：3
> 
> 时间：2013-03-22T22:37:51.100
> 
> 标签：c++, 3d, game-physics

我有对象A，速度很快。速度被指定为 3D 矢量`a = (x, y, z)`。位置是 3D 点`A [X, Y, Z]`。我需要找出当前速度是否将该对象引向 position 上的另一个对象`B [X, Y, Z]`B。
我已经成功地在二维中实现了这一点，忽略了第三个：

```
 /*A is projectile, B is static object*/
    //entity is object A
    //  - .v[3] is the speed vector
    //position[3] is array of coordinates of object B    

    double vector[3];                               //This is the vector c = A-B
    this->entityVector(-1, entity.id, vector);      //Fills the correct data
    double distance = vector_size(vector);          //This is distance |AB|
    double speed = vector_size(entity.v);      //This is size of speed vector a

    float dist_angle = (float)atan2(vector[2],vector[0])*(180.0/M_PI);           //Get angle of vector c as seen from Y axis - using X, Z
    float speed_angle = (float)atan2((double)entity.v[2],entity.v[0])*(180.0/M_PI); //Get angle of vector a seen from Y axis - using X, Z
    dist_angle = deg180to360(dist_angle);             //Converts value to 0-360
    speed_angle = deg180to360(speed_angle);           //Converts value to 0-360
    int diff = abs((int)compare_degrees(dist_angle, speed_angle));   //Returns the difference of vectors direction 
```

我需要创建完全相同的比较以使其在 3D 中工作 - 现在，忽略 Y 位置和 Y 矢量坐标。
**我应该怎么计算才能得到第二个角度？**

**根据答案进行**编辑**
： 我正在使用球坐标并比较它们的角度来检查两个向量是否指向同一方向。一个向量是 AB，另一个是 A 的速度，我正在检查 id A 正在前往 B。**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T23:23:15.507

我假设您正在寻找的“第二个角度”是 φ。也就是说，您使用的是球坐标：

```
(x,y,z) => (r,θ,φ)
r = sqrt(x^2 + y^2 + z^2)
θ = cos^-1(z/r)
φ = tan^-1(y/x) 
```

但是，如果您只想找出 A 是否以 a 速度向 B 移动，则可以使用点积作为基本答案。

```
1st vector: B - A (vector pointing from A to B)
2nd vector: a (velocity)
dot product: a * (B-A) 
```

如果点积为 0，则意味着您没有靠近 - 您正在围绕一个恒定半径的球体 ||BA|| 移动。以 B 为中心。如果点积 > 0，您正在向该点移动，如果点积 < 0，您正在远离该点。**

# actionscript-3 - 确定圆周运动的方向

> ID：15580953
> 
> 赞同：2
> 
> 时间：2013-03-22T22:37:54.710
> 
> 标签：actionscript-3, motion-detection

我正在做一个运动检测程序，想确定一个人的手是顺时针还是逆时针运动。有人知道最好的方法吗？（我在 AS3 中编码，但任何类似 ECMA 的代码都会有所帮助）。

我相信一种方法是确定，例如，左-右后跟上下还是下上，等等 - 有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:10:41.060

如果您有一个参考点 (0,0)，您可以对角度随时间的变化进行采样：

```
var sprite:Sprite = new Sprite();
var samples:Array = [];
setInterval(function(){
    var len = samples.push(Math.atan2(sprite.mouseY,sprite.mouseX));
    if ( len >=2 ) {
        if ( samples[len-2]-samples[len-1] > 0 ) {
            // clockwise
        } else {
            // counter-clockwise
        }
    }
},1000/stage.frameRate); 
```

引用是精灵的左上角（或其自然的 0,0 点`atan2`），因此该片段对相对于精灵的鼠标坐标进行采样。

此外，您考虑的样本越多（我只采样 2`samples[len-2]`和`samples[len-1]`），cw 或 ccw 的决定就越好。

最后，也是最重要的一点，我的脚本在弧度计算中确实考虑了负数，它假设一切都是正数——这需要一些调整。

PS：您需要不时清除`samples`，因为数组长度会达到最大值。

我的脚本不完整，欢迎编辑、建议和阐述。我希望它能给你一些考虑和工作的东西。

# json - 从 R 中的加载对象创建 json 字符串

> ID：15580954
> 
> 赞同：2
> 
> 时间：2013-03-22T22:38:03.267
> 
> 标签：json, r

执行因子分析后，加载对象如下所示：

```
Loadings:
    Factor1 Factor2
IV1  0.844  -0.512 
IV2          0.997 
IV3         -0.235 
IV4         -0.144 
IV5  0.997         

               Factor1 Factor2
SS loadings      1.719   1.333
Proportion Var   0.344   0.267
Cumulative Var   0.344   0.610 
```

我可以针对自己使用的因素`print(fit$loadings[,1:2])`来获得以下信息。

```
 Factor1      Factor2
IV1 0.84352949 -0.512090197
IV2 0.01805673  0.997351400
IV3 0.05877499 -0.234710743
IV4 0.09088599 -0.144251843
IV5 0.99746785  0.008877643 
```

我想创建一个类似于以下内容的 json 字符串。

```
"loadings": {
    "Factor1": {
        "IV1": 0.84352949, "IV2":0.01805673, "IV3":0.05877499, "IV4": 0.09088599, "IV5": 0.99746785
    },
    "Factor2": {
        "IV1": -0.512090197, "IV2": 0.997351400, "IV3": -0.234710743, "IV4": -0.144251843, "IV5": 0.008877643
    }
} 
```

我尝试使用 unclass() 访问各个属性，希望我可以循环并将它们放入一个字符串中，但没有任何运气（使用`loads <- loadings(fit)`和`<- names(unclass(loads))` 名称显示为“null”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T10:47:48.327

只是附议@GSee 的评论 (+1) 和 @dickoa 的回答 (+1) 更接近的例子：

1.  为可重现的示例创建一些演示数据（您还应该在所有 Q 中提供一个）：

    ```
    > fit <- princomp(~ ., data = USArrests, scale = FALSE) 
    ```

2.  装载`RJSONIO`/`rjson`包装：

    ```
    > library(RJSONIO) 
    ```

3.  转换您的数据以满足您的需求：

    ```
    > res <- list(loadings = apply(fit$loadings, 2, list)) 
    ```

4.  返回 JSON：

    ```
    > cat(toJSON(res))
    {
     "loadings": {
     "Comp.1": [
     {
     "Murder": -0.041704,
    "Assault": -0.99522,
    "UrbanPop": -0.046336,
    "Rape": -0.075156 
    } 
    ],
    "Comp.2": [
     {
     "Murder": 0.044822,
    "Assault": 0.05876,
    "UrbanPop": -0.97686,
    "Rape": -0.20072 
    } 
    ],
    "Comp.3": [
     {
     "Murder": 0.079891,
    "Assault": -0.06757,
    "UrbanPop": -0.20055,
    "Rape": 0.97408 
    } 
    ],
    "Comp.4": [
     {
     "Murder": 0.99492,
    "Assault": -0.038938,
    "UrbanPop": 0.058169,
    "Rape": -0.072325 
    } 
    ] 
    } 
    }> 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T08:28:05.720

你可以按照这些思路做一些事情

```
require(RJSONIO) ## or require(rjson)

pca <- prcomp(~ ., data = USArrests, scale = FALSE)
export <- list(loadings = split(pca$rotation, rownames(pca$rotation)))
cat(toJSON(export))

## {
##     "loadings": {
##         "Assault": [ 0.99522, -0.05876, -0.06757, 0.038938 ],
##         "Murder": [ 0.041704, -0.044822, 0.079891, -0.99492 ],
##         "Rape": [ 0.075156, 0.20072, 0.97408, 0.072325 ],
##         "UrbanPop": [ 0.046336, 0.97686, -0.20055, -0.058169 ] 
##     }
## } 
```

如果你想导出它：

```
cat(toJSON(export), file = "loadings.json") 
```

如果它真的不适合您的需要，只需将数据结构（`export`对象）修改为您想要的输出即可。

# php - PHP include()：从原始脚本的 PWD 中包含的用例

> ID：15580955
> 
> 赞同：0
> 
> 时间：2013-03-22T22:38:03.237
> 
> 标签：php

当使用 PHP`include()`和`require()`函数来包含一个文件，而该文件又包含另一个文件时，第二个文件的 PWD（相对引用）`include()`是原始脚本位置（Apache 调用堆栈中的第一个脚本）的目录，而不是当前文件。其背后的设计决策是什么，用例是什么？

例如，假设定义了一个通用数据库连接类，`~/public_html/classes/database.php`其中将其配置数据（用户名、密码）存储在`~/config.php`. 数据库配置类的作者会在逻辑上使用相对文件名调用配置文件`../../config.php`。但是，这不能按预期工作，因为 PWD 不是`database.php`文件，而是包含它的文件，可能是`~/public_html/index.php`，`~/public_html/someDir/somePage.php`或其他地方。

我知道通过获取当前文件的目录来解决这个问题`dirname(__FILE__)`。但是，我想不出我想要`require()`或`include()`相对于原始脚本位置的单个用例。保持原样的用例是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:47:53.893

该函数`include()`和`require()`句柄相对路径与任何其他文件访问函数（如`fopen()`、`unlink()`和`mkdir()`.

无论脚本的位置如何，路径总是相对于 PWD。

考虑以下示例：

*/home/foo/index.php*确实

```
require_once('lib/maketest.php'); 
```

*/home/foo/lib/maketest.php*确实

```
mkdir('test'); 
```

这将创建目录*/home/foo/test*而**不是** */home/foo/lib/test*。

* * *

我可以想象这是选择的，因为无论脚本位于何处，`mkdir test`都会创建目录的 bash 脚本。`$PWD/test`

遵循`include()`与其他文件访问函数相同的逻辑是有意义的。考虑以下代码：

```
if (file_exists('config.php')) include('config.php'); 
```

如果路径`include()`相对于PWD`__DIR__`和路径，`file_exists()`则上述代码将无法按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:17:22.997

PWD 是打印工作目录的缩写。当前工作目录缩写为 CWD。
CWD 可能会在代码执行期间发生变化，PHP 不一定必须包含来自本地文件路径的代码。

如您所知，`__FILE__`一起检查`dirname()`是解决问题的正确方法。您还应该使用应用程序的根路径定义一个常量，并在整个代码中使用它，而不是依赖于工作目录保持不变。
在所有情况下，CWD 甚至都不是脚本起点的路径。

# node.js - 节点 - MongoDB：集合没有找到任何东西，使用 mongodb 驱动程序。Shell 确实返回值

> ID：15580962
> 
> 赞同：5
> 
> 时间：2013-03-22T22:38:31.680
> 
> 标签：node.js, mongodb

我有一个简单的代码试图在 MongoDB 集合中查找文档。用Mongo的shell客户端可以正常找到，但是通过Node是不行的，试了很多方法都无济于事。

首先我的结果来自 MongoDB 本身：

```
raul@rmedina:~$ mongo sdk_back
MongoDB shell version: 2.0.6
connecting to: sdk_back
> db.metadatos.find();
{ "_id" : ObjectId("514cbee35c10db0299c015c7"), "tipo" : "proceso" }
> db.metadatos.findOne({"tipo":"proceso"});
{ "_id" : ObjectId("514cbee35c10db0299c015c7"), "tipo" : "proceso" }
> db.metadatos.findOne({tipo:"proceso"});
{ "_id" : ObjectId("514cbee35c10db0299c015c7"), "tipo" : "proceso" }
> 
```

如您所见，find 和 findOne 查询都有效。现在这是我的节点代码：

```
 var utils   = require('../utils/utils.js'),
    Server = require('mongodb').Server,
    Db = require('mongodb').Db;

    exports.procesaJSON = function (input_json){
    if(!utils.validaJSON(input_json))
        throw new Error('JSON de entrada inválido!');

    //procesamos
    input_json = JSON.parse(input_json);

    if(typeof(input_json.id) === "undefined")
        throw new Error('JSON de entrada inválido (falta propiedad \"id\"!');

    //obtenemos meta-data de mongo
    var db = new Db("sdk_back", new Server('localhost',27017,{auto_reconnect:true, poolsize:1}),{safe:true});
    db.open(function(err,db){
        if(!err){
            db.collection("metadatos",function(err,collection){
                console.log('Entering collection meta-data');
                if(!err){
                    console.log('Lets find one');
                    collection.findOne({"tipo":"proceso"},function(err,doc){
                        console.log('Results of findOne');
                        if(!err){
                            console.log(doc);
                        }
                        else{
                            throw new Error('Error al buscar meta_data!');
                        }

                        if(doc){
                            console.log('We have results');
                        }
                        else{
                            console.log('We dont have results');
                        }
                    });
                }
                else{
                    throw new Error('Error al buscar meta_data 1!');
                }
            });
        }
        else{
            throw new Error('Error al conectarse a MongoDB!');
        }
        db.close();
    });
}; 
```

输出总是：

```
raul@rmedina:~$ node pu_entrypoint.js 
Entering collection meta-data
Lets find one
raul@rmedina:~$ 
```

如您所见，永远不会显示带有文本“findOne 的结果”的日志，因此 findOne 方法实际上永远不会被执行，或者类似的东西。

我的问题是，我做错了什么？我已经删除并重新创建了集合，删除了数据库，甚至更改了 Mongo 的 /data/db 目录，但无济于事。

我究竟做错了什么？

谢谢！

**[已解决] 更新：** 问题出在 db.close() 上。节点是异步的，在找到集合之前就已经关闭了数据库，所以当然找不到东西。只需在我最后一个回调中移动 db.close 即可解决问题。这是编辑后的代码：

```
db.open(function(err,db){
            if(!err){
                db.collection("metadatos",function(err,collection){
                    console.log('Entering collection meta-data');
                    if(!err){
                        console.log('Lets find one');
                        collection.findOne({"tipo":"proceso"},function(err,doc){
                            console.log('Results of findOne');
                            if(!err){
                                if(doc){
                                    console.log('We have results');
                                    console.log(doc._id);
                                }
                                else{
                                    console.log('We dont have results');
                                }
/********** MOVED db.close() HERE ********************/
                                db.close();
                            }
                            else{
                                throw new Error('Error al buscar meta_data!');
                            }
                        });
                    }
                    else{
                        throw new Error('Error al buscar meta_data 1!');
                    }
                });
            }
            else{
                throw new Error('Error al conectarse a MongoDB!');
            }
/********** REMOVED db.close() FROM HERE ********************/
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T11:50:45.243

问题在于 db.close()。节点开始异步并在找到集合之前到达数据库的关闭，所以当然找不到东西。在最后一个回调中移动 db.close 可以解决问题。这是编辑后的代码：

```
 db.open(function(err,db){
        if(!err){
            db.collection("metadatos",function(err,collection){
                console.log('Entering collection meta-data');
                if(!err){
                    console.log('Lets find one');
                    collection.findOne({"tipo":"proceso"},function(err,doc){
                        console.log('Results of findOne');
                        if(!err){
                            if(doc){
                                console.log('We have results');
                                console.log(doc._id);
                            }
                            else{
                                console.log('We dont have results');
                            }
/********** MOVE db.close() HERE ********************/
                            db.close();
                        }
                        else{
                            throw new Error('Error al buscar meta_data!');
                        }
                    });
                }
                else{
                    throw new Error('Error al buscar meta_data 1!');
                }
            });
        }
        else{
            throw new Error('Error al conectarse a MongoDB!');
        }
/********** REMOVED db.close() FROM HERE ********************/
    }); 
```

# asp.net - 如何在 asp:Repeater ItemTemplate 中放置垂直滚动条？

> ID：15580963
> 
> 赞同：1
> 
> 时间：2013-03-22T22:38:33.643
> 
> 标签：asp.net, scrollbar, panel, ascx, asprepeater

我继承了一个 .ascx 控件，该控件由一个包含 HeaderTemplate、一个 ItemTemplate 和一个空 FooterTemplate 的 asp:repeater 构造组成。

标题和项目模板都链接到数据源。

我的问题很简单，我想在 ItemTemplate 上应用一个垂直滑块，这样我就可以上下滚动其中包含的项目，而 HeaderTemplate 保持静态。

我尝试在 ItemTemplate 中使用 asp:Panel ，但这不会呈现模板中的行。

我已经将整个 asp:Repeater 封装在一个指定垂直滚动条的 asp:Panel 中。这可行，但如果 ItemTemplate 中的行数很大，则会将标题滚动到视图之外。

如果有人可以提供帮助并提出前进的道路，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T04:28:52.200

它可以通过一些 CSS 技巧以简单的方式完成，例如

**中继器项目模板标记**

```
<HeaderTemplate>
  <div class="template">
</HeaderTemplate>
<ItemTemplate>
    Your Stuff
 </ItemTemplate>
<FooterTemplate>
  </div>
</FooterTemplate> 
```

**为“模板”定义的 CSS**

```
.template {
   height: 200px;
   overflow-y: scroll;
} 
```

希望这会有所帮助！

# php - 使用 curl 和 php

> ID：15580964
> 
> 赞同：0
> 
> 时间：2013-03-22T22:38:35.790
> 
> 标签：php, curl

我有一个使用 http 服务器远程工作的 sms android 应用程序，它需要获取一个形成的 url 请求，如下所示：

```
http://server.com:9090/sendsms?phone=123456789&text=foobar&pass=123456 
```

当我在浏览器地址栏中键入该 URL 并按 Enter 键时，应用程序会发送短信。我是 curl 的新手，我不知道如何测试它，这是我到目前为止的代码：

```
 $phonenumber= '12321321321'
  $msgtext    = 'lorem ipsum'
  $pass       = '1234'

  $url = 'http://server.com:9090/sendsms?phone=' . urlencode($phonenumber) . '&text=' . urlencode($msgtext) . '&password=' . urlencode($pass);

  $curl = curl_init();
  curl_setopt_array($curl, array(
      CURLOPT_RETURNTRANSFER => 1,
      CURLOPT_URL => $url
  )); 
```

所以我的问题是，代码是否正确？以及如何测试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:36:44.043

虽然这是一个简单的 GET，但我不能完全同意 hek2mgl。在很多情况下，当您必须处理超时、http 响应代码等时，这就是 cURL 的用途。

这是一个基本设置：

```
$handler = curl_init();
curl_setopt($handler, CURLOPT_URL, $url);
curl_setopt($handler, CURLOPT_RETURNTRANSFER, true);
curl_setopt($handler, CURLOPT_FOLLOWLOCATION, true);
// curl_setopt($handler, CURLOPT_MAXREDIRS, 10); // optional
// curl_setopt($handler, CURLOPT_TIMEOUT, 10); // optional
$response = curl_exec($handler);
curl_close($handler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:49:36.293

如果您可以使用浏览器中的地址栏访问该 url，则它是一个 HTTP GET 请求。在 PHP 中最简单的方法是使用，[`file_get_contents()`](http://www.php.net/manual/en/function.file-get-contents.php)因为它也可以对 url 进行操作：

```
$url = 'http://server.com:9090/sendsms?phone=123456789&text=foobar&pass=123456';
$response = file_get_contents($url);

if($response === FALSE) {
    die('error sending sms');
}

// ... check the response message or whatever
... 
```

当然你可以使用 curl 扩展，但是对于一个简单的 GET 请求，`file_get_contents()`将是最简单和最便携的解决方案。

# php - php读取文件寻找字符串

> ID：15580965
> 
> 赞同：-2
> 
> 时间：2013-03-22T22:38:39.490
> 
> 标签：php

我正在尝试读取文件并在文件中查找特定元素。一旦找到它，我希望脚本将元素添加到变量中。到目前为止，我还没有找到任何关于此的内容。

这就是我正在寻找的东西：

```
$var = read(($file), "<!--Everything in the comment line-->") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:41:20.937

您应该使用[file_get_contents(...)](http://php.net/manual/fr/function.file-get-contents.php)一次读取完整文件并使用[strpos()](http://php.net/manual/fr/function.strpos.php)定位感兴趣的部分，或者如果它更抽象，则使用正则表达式。

# iphone - 通过多个层次结构传递委托

> ID：15580966
> 
> 赞同：0
> 
> 时间：2013-03-22T22:38:43.223
> 
> 标签：iphone, objective-c

我编写了一个自定义类，TagsScrollView，它在滚动视图中显示标签。

当标签被按下时，TagsScrollView 依靠它的委托来实现做什么。几乎所有时候，这都涉及：

1.  将选项卡索引更改为另一个索引
2.  将 TagsDetailVC 推送到当前导航控制器。

现在，这就是我的应用程序的结构：

![在此处输入图像描述](../Images/36a5f4e0ceb7af3ed912a547f5546998.png)

虚线表示“有”关系。MainVC 有一个 FeedView，它有几个 FeedCellView，每个 FeedCellView 又都有一个 TagsScrollView。

实线表示“推”关系。ImageDetailVc 被推送到 MainVC 的 navController 上。

如何组织我的代码，以便可以优雅地指向 MainVC 的 TagsScrollView 的委托？

现在我已经定义了以下内容：

**TagsScrollView.h**

```
@protocol TagPressedDelegate<NSObject>
@required
- (void)tagPressed:(id)sender forQuery:(NSString *)query;
@end 
```

**FeedCellView.m**

`self.tagsScrollView.tagPressedDelegate = self.tagPressedDelegate`

**FeedView.m**

`self.cells[0].tagPressedDelegate = self.tagPressedDelegate`

**主视图VC.m**

```
self.feed.tagPressedDelegate = self
....

- (void)tagPressed... 
```

我怎样才能避免这种模式？我能做些什么更好？我应该让 TagsScrollViewDelegate 扩展 ScrollViewDelegate 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:52:44.260

您绝对可以做得更好，删除委托模式，使用块。

将基于块的属性添加到您的 TagsScrollView .h 文件

`@property (copy, nonatomic) void (^tagPressedBlock)(id sender, NSString *query);`

在 .m 文件中添加相关的回调

```
- (void)tagPressed:(id)sender {
  if (_tagPressedBlock) {
    _tagPressedBlock(sender, self.query); // I'm assuming that the query is your iVar
  }
} 
```

像这样分配属性

```
tagsScrollView.tagPressedBlock = ^(id sender, NSString *query) {
  // do stuff with those parameters
} 
```

那是为了“做得更好”

至于如何将标签按下事件传递给您的`MainVC`类，您应该使用 NSNotificationCenter。

在全局可见的地方定义通知名称，例如，我建议创建一个 Defines.h 文件并将其#include 到您的 Prefix.pch 文件中。

无论如何，定义通知名称：

`static NSString *const TagPressedNotification = @"TagPressedNotification";`

接下来在执行时发布该通知`-tagPressed:`并将有价值的信息封装到 userInfo 字典中：

```
- (void)tagPressed:(id)sender {
  [[NSNotificationCenter defaultCenter] postNotificationName:TagPressedNotification object:nil userInfo:@{@"sender" : sender, @"query" : self.query, @"scrollView" : self.tagScrollView}];
  //.. code 
} 
```

接下来将您`MainVC`作为观察者添加到该通知中：

主VC.m

```
- (void)viewDidLoad {
  [super viewDidLoad];
  [[NSNotificationCenter defaultCenter] addObserver:self
                                           selector:@selector(tagPressed:)
                                               name:TagPressedNotification
                                             object:nil];
} 
```

`-tagPressed:`并在您的 MainVC 中实现方法

```
- (void)tagPressed:(NSNotification *)notification {
  id sender = notification.userInfo[@"sender"];
  NSString *query = notification.userInfo[@"query"];
  TagScrollView *scrollView = notification.userInfo[@"scrollView"];
  if (scrollView == myScrollView) { // the one on your mainVC
    // do stuff
  }
} 
```

添加不要忘记将自己从 NotificationCenter 的注册表中清除：

```
- (void)dealloc {
  [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

简单的

编辑

我想您还应该传递作为发送者的滚动视图，因为您的 mainVC 也包含该滚动视图。编辑了代码

另一个编辑

在您的 Defines.h 文件中创建一个枚举定义

```
enum {
  TagSenderTypeFeed = 1,
  TagSenderTypeImageDetail
};
typedef NSInteger TagSenderType; 
```

创建通知时，将适当的枚举值添加到通知的 userInfo 字典中`@"senderType" : @(TagSenderTypeFeed)`

# http - 我应该使用 HTTP 4xx 来指示 HTML 表单错误吗？

> ID：15580969
> 
> 赞同：8
> 
> 时间：2013-03-22T22:38:56.367
> 
> 标签：http

我只花了 20 分钟调试一些 (django) 单元测试。我正在测试一个视图 POST，我期待一个 302 返回码，之后我断言一堆数据库实体符合预期。原来最近合并的提交添加了一个新的表单字段，我的测试失败了，因为我没有包含正确的表单数据。

问题是测试失败了，因为 HTTP 返回码是 200，而不是 302，我只能通过打印响应 HTTP 并查看它来解决问题。除了必须通过 HTML 来解决问题的烦恼之外，对于未处理的 POST，200 似乎是错误的代码。4xx（客户端错误）似乎更合适。此外，它会使调试测试变得轻而易举，因为响应代码会直接指出问题所在。

我已经阅读了有关在 REST API 中使用 422（不可处理实体）作为可能的返回代码的信息，但找不到在 HTML 视图/处理程序中使用它的任何证据。

我的问题是 - 有没有其他人这样做，如果没有，为什么不呢？

[**更新 1** ]

澄清一下，这个问题与 HTML 表单有关，而不是 API。

这也是关于 HTTP 响应代码本身的问题 - 而不是 Django。这恰好是我正在使用的。我已经删除了 django 标签。

[**更新 2** ]

一些进一步的澄清，与 W3C 参考（[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)）：

> **10.2 成功2xx**

> 此类状态码表示客户端的请求被成功接收、理解和接受。

> **10.4 客户端错误 4xx**

> 4xx 类状态码适用于客户端似乎出错的情况。

> *10.4.1 400 错误请求*

> 由于语法错误，服务器无法理解该请求。

并来自[https://www.rfc-editor.org/rfc/rfc4918#page-78](https://www.rfc-editor.org/rfc/rfc4918#page-78)

> **11.2\.** 422 无法处理的实体

> 422（Unprocessable Entity）状态码意味着服务器理解请求实体的内容类型（因此 415（Unsupported Media Type）状态码是不合适的），并且请求实体的语法是正确的（因此是 400（Bad Request） ) 状态码不合适）但无法处理包含的指令。例如，如果 XML 请求正文包含格式正确（即语法正确）但语义错误的 XML 指令，则可能会出现这种错误情况。

[**更新 3** ]

深入研究它，422 是一个 WebDAV 扩展[1]，这可能解释了它的晦涩难懂。也就是说，由于 Twitter 将 420 用于他们自己的目的，我想我会随心所欲。但它会以 4 开头。

[**更新 4** ]

[来自 HTTP 1.1 规范 ( https://www.rfc-editor.org/rfc/rfc2616#section-6.1.1](https://www.rfc-editor.org/rfc/rfc2616#section-6.1.1) )中关于使用自定义响应代码以及如何处理它们（如果无法识别）的说明：

> HTTP 状态代码是可扩展的。HTTP 应用程序不需要理解所有注册状态码的含义，尽管这样的理解显然是可取的。但是，应用程序必须理解任何状态代码的类别，如第一个数字所示，并将任何无法识别的响应视为等同于该类别的 x00 状态代码，但不得缓存无法识别的响应。例如，如果客户端收到无法识别的状态码 431，它可以安全地假设其请求有问题，并将响应视为收到 400 状态码。在这种情况下，用户代理应该向用户呈现与响应一起返回的实体，因为该实体很可能包含人类可读的信息，这些信息将解释异常状态。

[1] [https://www.rfc-editor.org/rfc/rfc4918](https://www.rfc-editor.org/rfc/rfc4918)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:12:04.883

如果结果不是成功，你是对的，200 是错误的。

我还认为，成功重定向到结果页面应该是 303，而不是 302。

4xx 对于客户端错误是正确的。422对我来说似乎是正确的。无论如何，不​​要在没有通过 IANA 注册的情况下发明新的 4xx 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-20T21:38:02.983

很明显，某些表单 POST 请求会导致 4xx HTTP 错误（例如，错误的 URL、缺少预期的字段、无法发送 auth cookie），但错误输入密码或意外遗漏必填字段在应用程序中是极其常见和预期的情况。

任何规范似乎都不清楚每个表单失效问题都必须构成 HTTP 错误。

我想我的直觉是，如果服务器向客户端发送一个表单，并且客户端立即使用格式正确的 POST 请求回复该表单，并包含所有预期的字段，那么常见的业务逻辑违规不应该是 HTTP 错误。

如果客户端脚本使用 HTTP 作为传输机制，情况似乎就更不明确了。例如，如果 JSON-RPC 请求发送表单详细信息，则成功调用服务器端函数并将响应返回给调用者，看起来像是 200 成功。

有趣的是：使用错误凭据登录会从 Facebook、Google 和 Wikipedia 获得 200，从 Amazon 获得 204。

理想情况下，IETF 会使用 RFC 来解决这个问题，可能会添加一个 HTTP 错误代码来表示“由于表单失效失败而没有执行操作”，或者扩展 422 的定义以涵盖这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:41:07.080

似乎没有一个公认的答案，老实说，这有点令人惊讶。表单验证是 Web 开发的基石，没有响应代码来说明验证失败的事实似乎错失了机会。特别是考虑到自动化测试的普及。通过检查 HTML 内容中的错误消息而不是仅测试响应代码来测试响应似乎不切实际。

我坚持我的断言，即 200 是不符合业务规则的请求的错误响应代码 - 并且 302 也是不合适的。（如果表单验证失败，那么它不应该更新服务器上的任何状态，因此是幂等的，不需要使用 PRG 模式来防止用户重新提交表单。让他们。）

因此，鉴于没有“批准”的方法，我目前正在（字面上）用我自己的测试 - 421。如果我们遇到使用非标准 HTTP 状态代码的任何问题，我会报告回来。

如果这个答案没有更新，那么我们正在生产中使用它，它可以工作，你也可以这样做。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T22:51:33.170

如果您不重定向，POST 将返回 200。POST 请求后，302 不会在标头中自动发送，因此您必须手动发送标头（[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse) ）和代码不依赖表单的数据。

使用代码 302 重定向回表单（或其他）的原因是不允许浏览器在刷新或历史浏览时重复发送数据。

# ios - 应用程序在模拟器上挂起但不在实际设备上后 GKSession 重新连接

> ID：15580972
> 
> 赞同：2
> 
> 时间：2013-03-22T22:39:11.263
> 
> 标签：ios, gksession

我有一个使用在 GKSessionModeServer 模式下运行的 GKSession 进行本地网络的应用程序。这是有限的，因此在使用此应用程序时只有两个设备会连接。

只要设备之间没有断开连接，所有的连接和通信代码都会完全按照预期工作。如果出现中断，我希望设备自动重新连接。我一直在研究代码，以便设备在发生断开连接事件后自动重新连接。

我可以在模拟器和设备上同时运行应用程序，如果我在模拟器上挂起应用程序，它会完全按照我的预期重新连接（无论是作为服务器还是客户端运行），但是如果我挂起，两个代码都不能在设备上运行真实设备上的应用程序。

```
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state
{
    NSLog(@"Game: peer %@ changed state %d", peerID, state);

    if (state == GKPeerStateDisconnected) {
        if (_isServer) {
            NSLog(@"Switching session ON");
            _session.available = YES;
        } else {
            NSLog(@"Running a reconnection request");
            [_session connectToPeer:peerID withTimeout:_session.disconnectTimeout];
        }
        [self.delegate bridgeHandDelegateShowDisconnectedScreen:self];
    } else if (state == GKPeerStateConnected) {
        if (_isServer) {
            NSLog(@"Switching Session off");
            _session.available = NO;
        }
        [self.delegate bridgeHandDelegateHideDisconnectedScreen:self];
    }

    if (_isServer) {
        NSLog(@"session state: %d", _session.available);
    }
} 
```

正如你所看到的，我已经被带有 NSLog 语句的代码乱扔了，当我挂起主机在模拟器上时的输出是：

**模拟器：**

```
2013-03-22 18:28:55.359 Practice[56120:c07] Game: peer 587373189 changed state 3
2013-03-22 18:28:55.359 Practice[56120:c07] Switching session ON
2013-03-22 18:28:55.364 Practice[56120:c07] session state: 1
2013-03-22 18:28:56.563 Practice[56120:c07] Game: peer 587373189 changed state 4
2013-03-22 18:28:56.563 Practice[56120:c07] session state: 1
2013-03-22 18:28:56.564 Practice[56120:c07] Game: connection request from peer 587373189
2013-03-22 18:28:56.565 Practice[56120:c07] MatchmakingServer: Connection accepted from peer: 587373189
2013-03-22 18:28:56.579 Practice[56120:c07] Game: peer 587373189 changed state 2
2013-03-22 18:28:56.580 Practice[56120:c07] Switching Session off
2013-03-22 18:28:56.582 Practice[56120:c07] session state: 0 
```

**设备：**

```
2013-03-22 22:24:04.922 BridgeBiddingPractice[3739:907] Game: peer 865951788 changed state 3
2013-03-22 22:24:04.924 BridgeBiddingPractice[3739:907] Switching session ON
2013-03-22 22:24:04.938 BridgeBiddingPractice[3739:907] session state: 0
2013-03-22 22:24:04.942 BridgeBiddingPractice[3739:907] Game: session failed Error Domain=com.apple.gamekit.GKSessionErrorDomain Code=-65540 "The operation couldn’t be completed. (com.apple.gamekit.GKSessionErrorDomain error -65540.)" 
```

我找不到任何关于错误 65540 的提及。我们将不胜感激地收到任何帮助。

# asp.net-mvc - ASP.NET Razor 如何在变量旁边立即输出原始字符串

> ID：15580977
> 
> 赞同：0
> 
> 时间：2013-03-22T22:39:49.807
> 
> 标签：asp.net-mvc, razor

我想做这个：

```
Our app is called: @AppSettings.AppName 
```

我怎样才能在句子的末尾加上句号？我需要将@输出封装在什么东西中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:01:45.303

最简单的方法是使用标签`<text> </text>`

```
Our app is called: @AppSettings.AppName<text>.</text> 
```

# emacs - 我可以为我现在所在的位置创建一个稀疏树 - 即创建一个指向路径的 org-mode 稀疏树吗？

> ID：15580983
> 
> 赞同：4
> 
> 时间：2013-03-22T22:40:36.013
> 
> 标签：emacs, org-mode

标题几乎说明了这一点：我经常想为我在当前缓冲区中的当前位置创建一个稀疏树，显示所有标题。

这里是

** 想要为我现在所在的位置创建一个稀疏树 :orgmode:

我经常希望能够为我现在所在的位置创建一棵稀疏树。必须创建一个搜索抄送//-但这是我目前的 kluge：

a) 插入一个唯一的字符串，例如 HERE-I-AM

b) CC // HERE-I-AM (org-occur "HERE-I-AM" nil)

给这样的东西

```
** My (org-mode) LOGS                           :top:
** LOGs :log
*** Fri Mar 22 2013
**** DONE org-mode - trying to get calendar to work
***** DONE rewrote docs
     - State "DONE"       from ""           [2013-03-22 Fri 14:49]

    blah blah blah

HERE-I-AM

** ...NEXT Daily Log 
```

这显然是不能令人满意的。例如可能没有写权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T13:58:18.930

我很快擦掉了一些可能是你想要的，或者至少接近的东西：

```
(defun tr/path-sparse-tree ()
  "sparse tree to the current buffer position"
  (interactive)
  (setq pathmarker "Eeshoo9OomeiRaix") ;; random string obtained from
                                       ;; pwgen, probably a unique marker
                                       ;; in any org document...
  (save-excursion 
    (insert pathmarker)
    (org-occur pathmarker))
  (delete-char 16)) 
```

我本身不是 emacs-lisp 从业者，但我的快速测试对您的问题描述很有希望。至少它是您当前的自动化 ;-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T19:03:25.103

这个函数应该做你想做的事：

```
(defun my-org-sparse-tree ()
  "Create an org sparse tree showing only point"
  (interactive)
  (org-overview)      ;; Hide everything
  (org-show-context)) ;; Show context around point 
```

# java - 如何在不使用对话框框架的情况下从有界任务流中的新窗口中打开 jspx？

> ID：15580987
> 
> 赞同：0
> 
> 时间：2013-03-22T22:41:01.783
> 
> 标签：java, oracle-adf, jdeveloper

我在有界任务流中有一个 jspx 页面，该页面具有从 ViewObject 查询的数据。我想在弹出窗口中以不同的方式呈现相同的数据。我*不想*在任务流中使用对话框框架。

我`af:commandButton`在支持 bean 的 action 方法中尝试过这样的代码：

```
ExtendedRenderKitService erks = ExtendedRenderKitService erks =          
Service.getRenderKitService(FacesContext.getCurrentInstance(),         
ExtendedRenderKitService.class);

erks.addScript(FacesContext.getCurrentInstance(), 
"window.open('/myRoot/myPage.jspx');"); 
```

这会打开窗口，但我无法访问与其他页面相同的绑定状态；所有绑定属性都返回 null。

如何让弹出窗口查看/使用与有界任务流中的原始页面相同的绑定状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:07:54.150

为什么不使用对话框架？

如何将页面转换为 jsff 并将其包含在有界任务流中，然后将此任务流作为区域添加到页面的弹出组件中？

# android - java.lang.IllegalArgumentException：视图未附加到窗口管理器 - 未列出活动

> ID：15580988
> 
> 赞同：1
> 
> 时间：2013-03-22T22:41:06.447
> 
> 标签：android

我正在使用 Crittercism 来跟踪我的应用程序中的崩溃。我遇到了一个我不知道如何处理的。

这是 Crittersim 日志：

**崩溃的线程**

```
0   
java.lang.IllegalArgumentException: View not attached to window manager
1   
at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:656)
2   
at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:349)
3   
at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:160)
4   
at android.widget.ZoomButtonsController.setVisible(ZoomButtonsController.java:407)
5   
at android.widget.ZoomButtonsController$2.handleMessage(ZoomButtonsController.java:179)
6   
at android.os.Handler.dispatchMessage(Handler.java:99)
7   
at android.os.Looper.loop(Looper.java:137)
8   
at android.app.ActivityThread.main(ActivityThread.java:5059)
9   
at java.lang.reflect.Method.invokeNative(Native Method)
10  
at java.lang.reflect.Method.invoke(Method.java:511)
11  
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:792)
12  
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
13  
at dalvik.system.NativeStart.main(Native Method)
27 other threads 
```

**线程：AsyncTask #4 (id=721, state=WAITING)**

```
0   
java.lang.Object.wait(Native Method)
1   
java.lang.Thread.parkFor(Thread.java:1231)
2   
sun.misc.Unsafe.park(Unsafe.java:323)
3   
java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
4   
java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
5   
java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
6   
java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
7   
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
8   
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
9   
java.lang.Thread.run(Thread.java:856) 
```

**线程：ImageContentLoader_Cache（id=709，状态=RUNNABLE）**

```
0   
android.os.MessageQueue.nativePollOnce(Native Method)
1   
android.os.MessageQueue.next(MessageQueue.java:125)
2   
android.os.Looper.loop(Looper.java:124)
3   
android.os.HandlerThread.run(HandlerThread.java:60) 
```

**线程：pool-4-thread-1 (id=695, state=WAITING)**

```
0   
java.lang.Object.wait(Native Method)
1   
java.lang.Thread.parkFor(Thread.java:1231)
2   
sun.misc.Unsafe.park(Unsafe.java:323)
3   
java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
4   
java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
5   
java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
6   
java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
7   
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
8   
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
9   
java.lang.Thread.run(Thread.java:856) 
```

**线程：请求工作线程（id=707，state=RUNNABLE）**

```
0   
android.os.MessageQueue.nativePollOnce(Native Method)
1   
android.os.MessageQueue.next(MessageQueue.java:125)
2   
android.os.Looper.loop(Looper.java:124)
3   
com.[XXXXXXX].android.services.ServerTalk.run(ServerTalk.java:2043)
4   
java.lang.Thread.run(Thread.java:856) 
```

我的应用只有一个引用：

**com.[XXXXXXX].android.services.ServerTalk.run(ServerTalk.java:2043)**

这导致了这一行：

```
@Override
public void run()
{
    Looper.prepare();
    synchronized (this)
    {
        if (mCanRunLooper)
        {
            mLooper = Looper.myLooper();
            mRequestHandler = new RequestThreadHandler();
        }
        else
        {
            return;
        }
    }
    mEvent.open();
    Looper.loop();  <----- [HERE]

} 
```

此 ServerTalk 是一种处理 Web 请求并被各种活动调用的服务。问题是这里没有列出任何活动，实际上我的应用程序甚至没有在实际崩溃的线程中列出。这种崩溃发生了多次，但我自己无法复制。我不知道这是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T16:50:58.047

“视图未附加到窗口管理器”意味着它不是层次结构中的活动视图。在堆栈中再往前一点，您会看到“ZoomButtonsController.setVisible”。

您说 ServerTalk 是一项服务。为什么它试图在视图上调用方法？服务不能有 UI。

# c++ - 从 Windows 资源 (RC) 文件存储和检索 UTF-8 字符串

> ID：15580992
> 
> 赞同：2
> 
> 时间：2013-03-22T22:41:21.110
> 
> 标签：c++, winapi, unicode, utf-8, rc

我创建了一个包含字符串表的 RC 文件，我想使用一些特殊的

字符：ö ü ó ú ő ű á é。所以我用 UTF-8 编码保存字符串。

但是当我调用我的 cpp 文件时，是这样的：

```
LoadString("hu.dll", 12, nn, MAX_PATH); 
```

我得到一个奇怪的结果：

![包含意外字符的错误消息](../Images/9fb4eed26bf21686ddd84b031ddcfdd3.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T23:24:59.113

正如其他人在评论中指出的那样，Windows API 不提供对 UTF-8 编码文本的直接支持。您无法传递`MessageBox`函数 UTF-8 编码的字符串并获得您期望的输出。相反，它会将它们解释为本地代码页中的字符。

要将 UTF-8 字符串传递给 Windows API 函数（包括`MessageBox`），您需要使用该[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072.aspx)函数将 UTF-8 转换为 UTF-16（Windows 称之为 Unicode，或宽字符串）。传递`CP_UTF8`第一个参数的标志是启用这种转换的魔法。例子：

```
std::wstring ConvertUTF8ToUTF16String(const char* pszUtf8String)
{
    // Determine the size required for the destination buffer.
    const int length = MultiByteToWideChar(CP_UTF8,
                                           0,   // no flags required
                                           pszUtf8String,
                                           -1,  // automatically determine length
                                           nullptr,
                                           0);

    // Allocate a buffer of the appropriate length.
    std::wstring utf16String(length, L'\0');

    // Call the function again to do the conversion.
    if (!MultiByteToWideChar(CP_UTF8,
                             0,
                             pszUtf8String,
                             -1,
                             &utf16String[0],
                             length))
    {
        // Uh-oh! Something went wrong.
        // Handle the failure condition, perhaps by throwing an exception.
        // Call the GetLastError() function for additional error information.
        throw std::runtime_error("The MultiByteToWideChar function failed");
    }

    // Return the converted UTF-16 string.
    return utf16String;                    
} 
```

然后，一旦有了宽字符串，您将显式调用`MessageBox`函数的宽字符串变体`MessageBoxW`.

但是，如果您只需要支持 Windows 而不是其他到处使用 UTF-8 的平台，那么您可能会更容易地坚持使用 UTF-16 编码的字符串。这是 Windows 使用的本机 Unicode 编码，您可以将这些类型的字符串直接传递给任何 Windows API 函数。请在此处查看[我的答案，](https://stackoverflow.com/questions/15458312/how-do-i-properly-call-the-copyfile-function-in-visual-c/15458564#15458564)以了解有关 Windows API 函数和字符串之间交互的更多信息。我向您推荐与向其他人所做的相同的事情：

*   分别为你的字符和字符串坚持`wchar_t`和。`std::wstring`
*   始终调用`W`Windows API 函数的变体，包括`LoadStringW`和`MessageBoxW`.
*   确保在包含任何 Windows 标头之前或在项目的构建设置中定义了`UNICODE`和宏。`_UNICODE`

# sql - 我需要对 TSQL 了解多深才能完全掌握 Entity Framework 中的所有内容？

> ID：15580997
> 
> 赞同：3
> 
> 时间：2013-03-22T22:41:31.527
> 
> 标签：sql, entity-framework, tsql, ssms

为了完全掌握 EF（实体框架）的所有概念，我需要对 T-SQL 有多深的了解？

更准确地说，目前我对 SQL 的了解并不小。我非常了解所有基础知识以及一些中间概念，例如存储过程、UDF、触发器等。

但是我是否需要了解诸如 XQuery 和 XPath、SQL CLR 编程或目录视图和动态管理视图之类的知识才能完全理解 EF，或者这不是必需的，因为 EF 有自己的方式来实现同样的事情？

我希望你不会觉得这个问题很愚蠢，因为我对 EF 的新手知识会为我节省一些时间。

我必须补充一点，我不是数据库管理员，也不是（至少现在），而是学习 EF 的 .NET 开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:59:39.130

基本上，你必须比没有它了解**更少**。它使您部分免受底层数据库技术的影响。你必须接受你所知道的越少的权衡（更差的性能或不雅的设计）。但是你不需要你引用的任何东西：

> 但是我是否需要了解诸如 XQuery 和 XPath、SQL CLR 编程或目录视图和动态管理视图之类的知识才能完全理解 EF，或者这不是必需的，因为 EF 有自己的方式来实现同样的事情？

因为大多数情况下，它们无论如何都不受 EF 支持......

# twitter-bootstrap - 为什么scrollspy（bootstrap）总是跳到最后一个元素

> ID：15580999
> 
> 赞同：2
> 
> 时间：2013-03-22T22:41:37.667
> 
> 标签：twitter-bootstrap

我试图解决这个问题，但其他线程中的所有建议都不起作用。

我在左边的 Scrollspy 只是不工作，总是跳到最后一项。

我有这个参数的 div 标签：

```
<div id="content" data-offset="0" data-spy="scroll" data-target="#main-nav"> 
```

导航看起来像这样：

```
<nav id="main-nav">
<ul class="nav">
<li class="active"><a href="#verein"><i class="icon-home"></i> Verein</a></li>
<li><a href="#training"><i class="icon-dashboard"></i> Training</a></li>
<li><a href="#team"><i class="icon-user"></i> Team</a></li>
<li><a href="#sport"><i class="icon-trophy"></i> Sport</a></li>
<li><a href="#kontakt"><i class="icon-comments"></i> Kontakt</a></li>
<li><a href="#sponsoren"><i class="icon-star"></i> Sponsoren</a></li>
    </ul>
</nav> 
```

[http://jsfiddle.net/9Lgx4/64/](http://jsfiddle.net/9Lgx4/64/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:45:32.410

适用于 Chrome，但不适用于 Firefox O_o

要纠正这一点，请采取这一行：

```
<div id="content" data-offset="0" data-spy="scroll" data-target="#nav"> 
```

[http://jsfiddle.net/9Lgx4/92/](http://jsfiddle.net/9Lgx4/92/)

武术