# StackOverflow 问答 14723000-14723999

# java - 带有redis的spring应用程序中线程“main”java.lang.NullPointerException中的异常

> ID：14723005
> 
> 赞同：0
> 
> 时间：2013-02-06T06:35:10.340
> 
> 标签：java, spring, exception

我有一个带有 redis 的 java 应用程序，它会引发异常。

这里有课程。主类：

```
public class App {
    public static void main( String[] args ) {
        ManipulatingData manData = new ManipulatingData();
        manData.addData();
    }
} 
```

应用配置：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.mycompany.springredisdatabook;

    import org.springframework.context.annotation.Bean;
    import org.springframework.context.annotation.Configuration;
    import org.springframework.data.redis.connection.jedis.JedisConnectionFactory;
    import org.springframework.data.redis.core.RedisTemplate;
    import org.springframework.data.redis.core.StringRedisTemplate;
    import org.springframework.data.redis.serializer.StringRedisSerializer;
    @Configuration
    public class ApplicationConfig {
        @Bean
        public JedisConnectionFactory connectionFactory() {
            JedisConnectionFactory connectionFactory = new JedisConnectionFactory(); 
            connectionFactory.setHostName("localhost"); 
            connectionFactory.setPort(6379);
            return connectionFactory;
        }
        @Bean 
        public StringRedisTemplate redisTemplate() {
            StringRedisTemplate redisTemplate = new StringRedisTemplate(); 
            redisTemplate.setConnectionFactory(connectionFactory()); 
            return redisTemplate;    
        }
        @Bean
        public RedisTemplate<String, Long> longTemplate() {
            StringRedisSerializer STRING_SERIALIZER = new StringRedisSerializer();
            RedisTemplate<String, Long> redisTemplate = new RedisTemplate<String, Long>();
                redisTemplate.setConnectionFactory(connectionFactory());
                redisTemplate.setKeySerializer(STRING_SERIALIZER);
                redisTemplate.setValueSerializer(LongSerializer.INSTANCE);
            return redisTemplate;
        }
    } 
```

操作数据：

```
package com.mycompany.springredisdatabook;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.core.StringRedisTemplate;

public class ManipulatingData {

    public ManipulatingData() {}

    @Autowired
    StringRedisTemplate redisTemplate;
    public void addData() {
        double start = System.currentTimeMillis(); 
        for (int i=1; i<=1000; i++) {
            redisTemplate.opsForSet().add("k" + i, "v" + i);
        }
        double end = System.currentTimeMillis();
        System.out.println("Add data time: " + (end-start));
    }
    public String getData (String key) {
        return redisTemplate.opsForValue().get(key);
    }
    public void deleteData(String key) {
        redisTemplate.opsForValue().getOperations().delete(key);
    }
} 
```

例外：

```
Exception in thread "main" java.lang.NullPointerException
    at com.mycompany.springredisdatabook.ManipulatingData.addData(ManipulatingData.java:25)
    at com.mycompany.springredisdatabook.App.main(App.java:11)
Java Result: 1 
```

那么，它是什么？我不知道。顺便说一句，我正在使用弹簧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:38:39.557

您的`redisTemplate`实例为空。检查你的 spring.xml 的配置`redisTemplate`和导致它为空的可能性

# vb.net - 证明我错了：VB.NET HtmlHelper 扩展方法不适用于带有 VS 2012 的 MVC 4

> ID：14723010
> 
> 赞同：6
> 
> 时间：2013-02-06T06:35:18.207
> 
> 标签：vb.net, asp.net-mvc-4, visual-studio-2012, extension-methods, html-helper

无论我尝试多少次，我的 HTML Helper 扩展方法都无法正常工作。这是我创建的测试步骤，如果有人想自己尝试一下：

1.  使用 Visual Studio 2012，我使用“Internet 应用程序”项目模板创建了一个新的“Visual Basic ASP.NET MVC 4 Internet Web 应用程序”。

2.  我创建一个文件夹`"~/Views/Helpers"`

3.  我创建一个文件`"DisplayForPropertyHelper.vb"`并添加以下代码：

    ```
    Namespace TestProject.Extensions
        Public Module HtmlHelperExtensions
            <Extension()>
            Public Function DisplayForProperty(helper As HtmlHelper) As MvcHtmlString
                Return MvcHtmlString.Create("TEST")
            End Function
        End Module
    End Namespace 
    ```

4.  我打开`"~/Views/Web.config"`并更改以下内容（我添加了扩展名称空间）：

    ```
    <system.web.webPages.razor>
        <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <pages pageBaseType="System.Web.Mvc.WebViewPage">
          <namespaces>
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Optimization"/>
            <add namespace="System.Web.Routing" />
            **<add namespace="TestProject.Extensions"/>**
          </namespaces>
        </pages>
    </system.web.webPages.razor> 
    ```

5.  编译项目

6.  选择任何剃须刀视图文件，然后键入`@Html.Display`-，您将看到扩展方法未显示。

7.  添加到剃刀视图文件`@Imports TestProject.Extensions`，然后保存并关闭文件。

8.  重新打开文件，然后输入`@Html.Display`- 你会看到扩展方法没有出现。

9.  您甚至可以尝试关闭 VS2012 并重新打开项目。不会有什么不同。

我已经为此奋斗了好几个星期了。我在这里和其他地方找到的所有答案都没有帮助。一定有人有答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T06:45:48.943

确保在命名空间前加上应用程序名称。因此，例如，如果您创建的应用程序在您的应用程序中被调用`MvcApplication1`，您`~/Views/web.config`应该输入：

```
<add namespace="MvcApplication1.TestProject.Extensions"/> 
```

而不仅仅是：

```
<add namespace="TestProject.Extensions"/> 
```

是的，我猜，它是那些 VB.NET 的东西之一 :-) 哦，不要忘记在对`~/Views/web.config`文件进行更改后关闭并打开 Razor 视图，否则您的更改将不会立即被考虑到（如果您运行应用程序，它当然会工作）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-11T17:58:29.717

这不是一个真正的答案，但我在这里写它希望只添加（一点）整体情况。

**对我来说，我发现我的“模块”类没有被明确地修改为“公共”**（当你没有指定修饰符时，默认是朋友，这就是杀死我的原因）

是的，我意识到 OP 的示例模块已经被声明为 Public .. 但是，我只是没有在我自己的代码堆栈中抓住它，并认为我会强调这个要求。作为过去五年不得不玩 VB.Netter 的本地 C-sharper，我厌倦了手动翻译 C# 片段……并且倾向于依赖[代码转换器](http://www.developerfusion.com/tools/convert/csharp-to-vb/)。所以，我找到并转换的漂亮的 HtmlHelper 并没有完全正确，我忽略了在为我生成的代码片段中寻找这个问题。

正如之前的评论中所指出的，我还想加入合唱团并声明以下内容：

*   我正在做以上所有事情（所以我想，当我一遍又一遍地检查 OP 的清单时）

*   我还发现为 VB.NET MVC 4 编写 HtmlHelpers 几乎是不可能的（直到今天）——这些要求似乎以如此脆弱的方式得到支持

*   我也鄙视必须使用 VB.NET 来开发 MVC 网站（但是，我必须忍受它。它是我继承的遗留代码的一部分进入我的公司）

*   尽管我很鄙视它（出于类似的原因），但我会说，如果您有足够的决心去解决它，那么一切似乎都得到了支持。（感谢 StackOverflow！）

在此发现之前，我认为它可能不起作用，因为我的应用程序名称中有点 (MyCorp.Web.WorkOrders) 与 (MvcApplication1).. 但是，我的测试得出结论，应用程序名称不是问题。无论您如何命名，它都会起作用。

同样，正如@Darin 已经指出的那样......您当然必须将解决方案名称（空格）作为“添加命名空间”声明的一部分包含在 views/web.config 中

# c - gettimeofday 差异没有给我一个时间范围

> ID：14723011
> 
> 赞同：0
> 
> 时间：2013-02-06T06:35:38.160
> 
> 标签：c, time

我正在用 c 编写一些基本的东西，即执行 shell 脚本需要多长时间。

我有

```
gettimeofday(&start, NULL);
// code here

gettimeofday(&end, NULL);
// print end - start 
```

我知道 timeval 结构具有我考虑的 tv_sec 和 tv_usec，但即使对于诸如“sleep 3”之类的脚本，我仍然得到 0 结束 - 开始差异。任何猜测为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:41:01.573

您应该阅读以下内容：[gettimeofday() 永远不应该用于测量时间](http://blog.habets.pp.se/2010/09/gettimeofday-should-never-be-used-to-measure-time)

试试`clock_gettime(CLOCK_MONOTONIC, ...)`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:38:59.187

试试这个：

```
double dtime(){
    double t;
    struct timeval tv;
    gettimeofday(&tv, NULL);
    t = tv.tv_sec + ((double)tv.tv_usec)/1e6;
    return t;
}

…
double t0 = dtime();
…
printf("Time spend: %g seconds\n", dtime()-t0); 
```

# javascript - model.set 不会在backbone.js 中保留值

> ID：14723016
> 
> 赞同：0
> 
> 时间：2013-02-06T06:36:00.117
> 
> 标签：javascript, backbone.js

```
this.save(userDetails, {
    success: function (user, result, xhr) {
        this.set({userName: user.userName});
    },

    error: function (user, result, xhr) {

    }
});

return this.userName; 
```

当我尝试设置我`userName`得到的响应时，它没有设置。当我尝试提醒返回`this.userName`时，它说我未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:41:41.540

这里有几件事：

1.  调用成功函数时（保存后的回调），它返回保存的整个模型，因此您可以尝试：

    成功：函数（模型）{ model.set（{userName：model.userName}）；}

2.  保存是异步的，因此您可能想要执行以下操作：

    this.model.on('sync',function(model){ model.set({userName : model.userName}); //剩下的编程; })

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T06:49:51.510

`user`是 Backbone 模型，所以基本上看起来你正在尝试这样做：

`user.set({userName: user.get('userName'});`

如果 userName 是从您的服务器返回的值，它可能已经在模型上设置。

在你的成功处理程序中，试试这个：

`console.log(user.get('userName'));`

您不能使用 访问模型的属性`model.userName`，而是使用`model.get('userName')`.

# mysql - 获取好友更新查询

> ID：14723027
> 
> 赞同：0
> 
> 时间：2013-02-06T06:36:57.453
> 
> 标签：mysql, sql, inner-join

我有三个表，分别是成员、朋友和更新。我正在尝试开发一个查询，该查询将为与特定用户成为朋友的用户获取更新。例如获取成员 X 的所有朋友 USER 的所有更新：

```
X   -> friend_1 > updated picture
    -> friend_2 > added friend
    -> friend_3 > updated status

Y   -> friend_1 > updated picture
    -> friend_2 > added friend
    -> friend_3 > updated status 
```

朋友们

```
friend_index
friend_id
logged_user_id  * 
```

会员

```
display_name
 id             * 
```

更新

```
update_id
member_id       *
friend_id
update_action 
```

到目前为止，这是我目前的查询，这给了我当前用户的更新，而不是当前用户的朋友。

```
 SELECT
U.update_id,
U.update_action,
U.update_hidden,
U.update_time,
U.member_id,
U.friend_id AS friend,
M.id,
M.display_name AS user,
F.friend_id,
F.logged_user_id
FROM member_friends F
JOIN members M
    ON M.id = F.logged_user_id
JOIN member_updates U 
    ON U.member_id = F.friend_id 
WHERE U.member_id = :id
ORDER BY U.update_id DESC 
```

谢谢参观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:45:23.567

您正在使用 user.id 加入 member_update，因此在第一次加入时忽略了朋友的更新。我将首先选择所有朋友，然后将 member_update 表与朋友表而不是用户表加入

询问：

```
SELECT
    U.member_id,
    U.update_action,
FROM members M
    JOIN member_friends F
        ON M.id = F.logged_user_id
    JOIN member_updates U
        ON U.member_id = F.friend_id
WHERE M.id = :id
    AND U.update_hidden <> 1
ORDER BY U.update_id DESC 
```

假设logged_user_id 是具有firendsfriend_id UPDATES 的用户ID。member_id 是该更新所属的用户ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:44:45.000

试试这个：

```
SELECT
    U.update_id,
    U.update_action,
    U.update_time,
    U.member_id,
    U.id,
    F.friend_id,
    U.display_name AS user,
    F.display_name AS friend
FROM members M
    JOIN member_friends F
        ON M.id = F.logged_user_id
    JOIN member_updates U
        ON U.member_id = F.friend_id
WHERE M.id = :id
    AND U.update_hidden <> 1
ORDER BY U.update_id DESC 
```

# extjs - 在 extjs 中按名称获取组件

> ID：14723031
> 
> 赞同：13
> 
> 时间：2013-02-06T06:37:34.087
> 
> 标签：extjs

我在**extjs**商店**中有一个名为****`date`**

 **我怎样才能检索它*ExtJS*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T06:38:19.157

试试这个 ：

```
var dateObj = Ext.ComponentQuery.query('[name=date]'); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-06T08:07:44.120

该`name`属性通常由字段使用，并且有一种更好的方法可以将它们作为`ComponentQuery`. 因此，如果这是关于字段，我强烈建议您使用[findField()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-findField) 而不是`ComponentQuery`. 你可以像这样使用它

```
formInstance.getForm().findField('NameOrId'); 
```**

# php - magento 显示该类别中的产品数量？

> ID：14723033
> 
> 赞同：0
> 
> 时间：2013-02-06T06:37:40.910
> 
> 标签：php, magento, magento-1.7

我是magento的新手。我想在左侧边栏中的类别中显示产品数量，就像

*   产品一 (21)

*   产品 2 (11)

*   产品 3 (16)

*   产品 4 (68)

    因此，为了显示具有类别及其子类别的所有产品，我制作了`left_nav.phtml`位于文件夹位置内的文件`app/design/frontend/my-theme/default/template/catalog/navigation/`，如下[所示](http://pastebin.com/p7c1QuE5)

现在它显示所有类别和子类别。但我希望所有类别和子类别都应该显示相应类别中的产品数量。那么有人可以告诉我该怎么做吗？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T09:17:42.873

假设您想在 view.phtml 中显示它，您已经拥有当前类别对象，因此您可以使用 $_category->getId()

```
$products_count = Mage::getModel('catalog/category')->load($_category->getId())
 ->getProductCount();

echo($products_count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:39:35.580

```
$collection = Mage::getModel('catalog/product')->getCollection()->addCategoryFilter($mycategory);

echo "(".count($collection).")"; 
```

警告：$mycategory 必须是 Mage_Catalog_Model_Category 的实例，而不是 id。

问候，

# java-bytecode-asm - ASM ByteCode Instrumentation , 执行哪个方法

> ID：14723036
> 
> 赞同：1
> 
> 时间：2013-02-06T06:37:48.560
> 
> 标签：java-bytecode-asm

我正在使用 ASM 字节码库来使用 pre-main 来检测 Java 类。我们如何获得执行的方法的名称？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:49:37.493

```
Attached my Code for your reference

package com.eg.agent;

import java.lang.instrument.Instrumentation;

public class Agent {
 private Agent(Instrumentation instrumentation){
}

public static void premain(String agentArgs, Instrumentation inst)
{
 EgClassFileTransformer egClassFileTransformer = 
       new EgClassFileTransformer (agentArgs , inst);
} 
```

}

```
package com.eg.agent;

import java.lang.instrument.ClassFileTransformer;
import java.lang.instrument.IllegalClassFormatException;
import java.lang.instrument.Instrumentation;
import java.security.ProtectionDomain;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

import org.objectweb.asm.ClassReader;

public class EgClassFileTransformer implements ClassFileTransformer {

    protected String agentArgString = "";
    protected Instrumentation instrumentation;

    public EgClassFileTransformer(String agentArgs, Instrumentation inst){
        agentArgString = agentArgs;
        instrumentation = inst;
        instrumentation.addTransformer(this);
    }

    public byte[] transform(ClassLoader loader, String className, Class<?> classBeingRedefined, 
            ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException
        {
            //System.out.println("ClassName :"+className);
            InputStream in = loader.getResourceAsStream(className.replace('.', '/') + ".class");
            try{
                ClassReader classReader=new ClassReader(in);
                String superClassName = classReader.getSuperName();
                String[] interfaces = classReader.getInterfaces();
                if(interfaces!=null && interfaces.length > 0){
                    for(int k=0;k<interfaces.length;k++){
                        String inface = interfaces[k];
                        System.out.println(" \t interface :"+inface);
                    }
                }
                //System.out.println("superClassName :"+superClassName);
                ArrayList thisList = new ArrayList();
                thisList.add(superClassName);
                ArrayList superList = printSuperClassNames(superClassName , thisList);
                System.out.println("className :"+className +" ==>"+ " superList :"+superList);
            } catch (IOException e) {
                //e.printStackTrace();
                System.out.println("[EXECEPTION] ..."+className);
            }
            return null;
        }

    public static ArrayList printSuperClassNames(String className, ArrayList list)
    {
        ClassReader cr=null;
        try {
            cr = new ClassReader(className);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String superName = cr.getSuperName();
        //System.out.println("[superName]"+superName);
        if(superName!=null && !superName.equals("java/lang/Object"))
        {
            list.add(superName);
            String superClass = superName.replace('.', '/');
            printSuperClassNames(superClass, list);
        }
        return list;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:02:52.200

简而言之，对应的方法调用`name`上有一个参数。`visit*()`您必须提供更具体的示例才能获得更详细的答案。

# c# - 在子视图中使用布局页面中的值

> ID：14723047
> 
> 赞同：1
> 
> 时间：2013-02-06T06:38:21.170
> 
> 标签：c#, asp.net-mvc-3, razor

我有我的 mvc 网页的布局页面，在那里我做了类似的事情。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
</head>
<body>
<div class="page">
<div id="header">
<div>
   @{
            SessionDetail sess = new SessionDetail();
            ICacheProvider cache = (ICacheProvider)DIConfig.GetInstance("cacheprovider");
            sess = (SessionDetail)cache.Get(Session["usersession"].ToString());
           }      
             <div id="menu" align="right">
            <li class="first" style="list-style-type: none;">Welcome <b>**@sess.DisplayName**</b>! |@Html.ActionLink("Logout","Logout","Account")</li>
            </div>
            <div class="site-title">
                <h2>Dheutto</h2>
            </div>
        </div>
       <div align="right">@Html.ActionLink("Show Devices","Index","Device")</div>
      </div>      
</body>
</html> 
```

现在从这里我在 sess 对象中有会话详细信息。我是否可以将 sess 对象中的值传递到在此布局页面下呈现的所有视图页面？

# c++ - 获取有关重新定义的错误（OpenGL 4.0 Shading Language Cookbook）

> ID：14723048
> 
> 赞同：0
> 
> 时间：2013-02-06T06:38:23.970
> 
> 标签：c++, visual-studio-2010, qt, opengl, glsl

我刚刚测试了第 1 章中的代码（[OpenGL 4.0 Shading Language Cookbook](http://www.packtpub.com/support/7658)）

我已经安装了Qt5，qmake -tp vc chapter01.pro 然后在vs2010中打开。

构建并出现许多错误，例如：

```
1>D:\APP\Qt5\5.0.0\msvc2010\include\GLES2/gl2.h(38): error C2371: 'GLintptr' : redefinition; different basic types
1>          D:\OpenGL\glew-1.5.4\include\GL/glew.h(1615) : see declaration of 'GLintptr'
1>D:\APP\Qt5\5.0.0\msvc2010\include\GLES2/gl2.h(39): error C2371: 'GLsizeiptr' : redefinition; different basic types
1>          D:\OpenGL\glew-1.5.4\include\GL/glew.h(1614) : see declaration of 'GLsizeiptr'
1>D:\APP\Qt5\5.0.0\msvc2010\include\GLES2/gl2.h(96): warning C4005: 'GL_BLEND_EQUATION_RGB' : macro redefinition
1>          D:\OpenGL\glew-1.5.4\include\GL/glew.h(1666) : see previous definition of 'GL_BLEND_EQUATION_RGB'
1>D:\APP\Qt5\5.0.0\msvc2010\include\GLES2/gl2.h(474): error C2365: '__glewActiveTexture' : redefinition; previous definition was 'data variable'
1>          D:\OpenGL\glew-1.5.4\include\GL/glew.h(12027) : see declaration of '__glewActiveTexture'
1>D:\APP\Qt5\5.0.0\msvc2010\include\GLES2/gl2.h(475): error C2365: '__glewAttachShader' : redefinition; previous definition was 'data variable' 
```

如何解决这些问题？（代码链接在[这里](http://www.packtpub.com/code_download/7658)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:52:19.607

简短的回答：只包含 GLEW 的头文件，不包含任何 OpenGL 头文件。

说明：GLEW 的头文件有效地包含了 OpenGL 头文件中的所有内容（我从未尝试过使用 GLES，但我怀疑它是相同的），通过 C 预处理器宏重新定义了所有 OpenGL 入口点。这就是为什么您会看到多重定义的符号和类型。可以在[此处](https://stackoverflow.com/questions/8580675/error-gl-h-included-before-glew-h)找到其他信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:41:13.033

肯定不是最佳答案，但我刚刚检查了这本书。

当您使用 Qt 的版本时，这本书似乎已经过时了：

> 例如，在最近的 Qt 版本中（至少 4.7 版）

因此，为了便于阅读本书，您可以考虑将您的 Qt 降级到 4.x（例如 4.8）系列，因为 OpenGl 要求可能会有很多变化，特别是如果您正在使用 Qt 构建使用不同的 OpenGL 库构建。

另一种解决方案是使用完全不需要 Qt 的[更新源代码：](https://github.com/daw42/glslcookbook)

> 这是来自 David Wolff 的 OpenGL 4.0 Shading Language Cookbook 的示例程序。源代码已更新为与 MS Visual Studio 一起使用，不再需要 Qt。

# entity-framework - 我在 EF Code First 中以一对多关系进行级联删除时出错

> ID：14723050
> 
> 赞同：2
> 
> 时间：2013-02-06T06:38:30.867
> 
> 标签：entity-framework, ef-code-first, poco, cascading-deletes

我首先使用 EF 代码，然后使用 EF 4.X DbContext Fluent Generator T4 生成我的代码，所以现在我有 2 个 poco 实体（我将列表更改`BindingList<T>`为在 winForms 中使用绑定）：

```
public partial class Parent
{
    public Parent()
    {
        this.Childs = new BindingList<Childs>();
    }
    int _ParentId;
    public int ParentId { get; set; }
    BindingList<Child> _Childs;
    public virtual BindingList<Child> Childs { get; set; }
}

public partial class Child
{
    int _ChildId;
    public int ChildId { get; set; }
    int _ParentId;
    public int ParentId { get; set; }
    Parent_Parent;
    public virtual Parent Parent { get; set; }
} 
```

而且我的映射文件是：

```
 public Parent_Mapping()
    {                   
        this.HasKey(t => t.ParentId);       
        this.ToTable("Parent");
        this.Property(t => t.ParentId).HasColumnName("ParentId");
    }

    public Child_Mapping()
    {                   
        this.HasKey(t => t.ChildId);        
        this.ToTable("Child");
        this.Property(t => t.ChildId).HasColumnName("ChildId");
        this.Property(t => t.ParentId).HasColumnName("ParentId").IsRequired();
        this.HasRequired(t => t.Parent)
            .WithMany(t => t.Childs)
            .HasForeignKey(t=>t.ParentId)
            .WillCascadeOnDelete(true);
    } 
```

在我的 DbContext 我有这些代码：

```
public partial class MyContext : DBContext
{ 
    static MyContext()
    { 
       Database.SetInitializer<MyContext>(null);
    } 

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<IncludeMetadataConvention>();
        modelBuilder.Configurations.Add(new Parent_Mapping());
        modelBuilder.Configurations.Add(new Child_Mapping());
    }
    public DbSet<Parent> Parents { get; set; }
    public DbSet<Child> Childs { get; set; }
} 
```

所以我有一个启用级联删除的一对多关系。

但是当我想删除一个父实体时，我收到了这个错误：

```
{
 "Cannot insert the value NULL into column 'ParentId', table 'MyDB.dbo.Child';
  column does not allow nulls. UPDATE fails.\r\nThe statement has been terminated."
} 
```

当我使用 EF Profiler 进行监控时，我看到 EF 想要更新 Child 表以将 ParentId 设置为 Null，而不是删除父实体！：

```
update [dbo].[Child]
set    
   [ParentId] = null,
where  ([ChildId] = 2 /* @1 */) 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:42:59.933

恕我直言，原因是您将孩子与父母一起加载。在这种情况下，您还必须删除孩子。如果您只删除父 EF，则只会将关系设置为 null。EF 不会进行级联删除。级联删除仅在数据库中使用，并且仅在您没有加载子项时使用。如果您加载了子实体，则在删除父实体之前执行更新，并发生此异常。

如果您希望加载的实体也具有类似于级联删除的行为，则必须使用称为[标识关系](https://stackoverflow.com/questions/4922228/entity-framework-4-delete-object-from-entity-collection/4925040#4925040)的东西（您的子实体将具有由其 id 和父 id 组成的主键）。

# php - 向 fwrite / fopen / fclose 进程添加内容头

> ID：14723053
> 
> 赞同：0
> 
> 时间：2013-02-06T06:38:40.887
> 
> 标签：php, json, echo, mime-types, fwrite

我正在写一个 .json 文件，我需要包含标题，这样我就可以毫无问题地访问它。我需要添加到 index.php 文件的标题：

```
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *'); 
```

创建 .json 文件的代码片段是：

```
public function saveCalendarAsFile() {
    $file2 = fopen("{$this->name}.txt", 'w');
    fwrite($file2, json_encode($this->events));
    fclose($file2);
}    

public function saveCalendarAsFile() {
    $file2 = fopen("{$this->name}.json", 'w');
    fwrite($file2, json_encode($this->events));
    fclose($file2);
} 
```

无论我将标题放在哪里（在第 1 行、第 2 行或第 3 行之前，如[本文所建议的](http://webadvent.org/2008/json-is-everybodys-friend-by-ed-finkler)那样），它都不会更改外部文件的 HTTP 响应（目前它被列为 text/plain）。

php 文件在文档中具有相同的标题，但根据那里的多个帖子，它需要位于“echo”语句之前。由于我的代码不使用 echo 语句（因为我正在写入外部文件），所以必须在另一个地方放置标题，这样它会影响 .json 文件。提前致谢。

![在此处输入图像描述](../Images/f03e6941f804cffb5acd8f9909d5e4f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:57:30.543

将目标文件保存在服务器上时无需设置标头，但是，如果您希望能够访问该文件（跨域），则需要设置 Access-Control-Allow-Origin（恰好在您请求时）来自服务器的那个文件）。

在您的情况下：您将 json 文件 {$this->name}.json 保存在您的服务器上，如果您想接收该文件并设置 (Access-Control-Allow-Origin) 那么您需要使用 PHP 读取该文件，然后设置标题例如：

考虑文件名是： myjson.json 那么你不能直接请求该文件，使用 php 读取文件然后输出它：

```
jsonnreador.php
<?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
echo file_get_contents('myjson.json');
?> 
```

# three.js - 我们可以在three.js中使用具有纹理的phong材质吗

> ID：14723054
> 
> 赞同：0
> 
> 时间：2013-02-06T06:38:42.693
> 
> 标签：three.js

我们可以在three.js中使用带有纹理的PhongMaterial吗

如果我们能给我一些示例链接。

请务必将您对这个问题的反馈发送给我。非常感谢您的帮助。

谢谢阅读。

问候，维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:25:39.320

如果您查看 three.js 的示例目录，您会发现大量将纹理分配给 PhongMaterial 的示例。举几个 webgl_materials_cars.html、webgl_materials2.html 和 webgl_lights_pointlights2.html 的例子。我希望这些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T08:02:59.530

答案是肯定的。您可以从本教程开始：

[http://www.html5canvastutorials.com/three/html5-canvas-three-js-phong-material/](http://www.html5canvastutorials.com/three/html5-canvas-three-js-phong-material/)

然后在 MeshPhongMaterial 配置对象的 shininess 属性下方添加以下代码行：

图：THREE.ImageUtils.loadTexture(' [http://www.html5canvastutorials.com/demos/assets/crate.jpg](http://www.html5canvastutorials.com/demos/assets/crate.jpg) ')

这将创建一个带有 Phong 材质（闪亮材质）的木质纹理圆柱体。

# iphone - 电子邮件验证不起作用 iPhone

> ID：14723055
> 
> 赞同：0
> 
> 时间：2013-02-06T06:38:43.223
> 
> 标签：iphone, ios, validation, email-validation

这是我的代码。

```
- (BOOL)validateEmail:(NSString*)email
{
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
     NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 
    return [emailTest evaluateWithObject:email];
} 
```

这是我用来验证我在文本字段中输入的电子邮件的功能。我不知道我在做什么是对还是错。我应该在任何其他功能中检查它而不是**- (BOOL)textFieldShouldEndEditing**如果是，请告诉我我必须使用什么功能。如果我的正则表达式或验证错误，请帮助我找到正确的。

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
    BOOL eb;
    if (textField.tag == 44) {
        eb =[self validateEmail:textField.description];
        NSLog(@" %s", eb ? "true" : "false");
        if(!eb)
        {
            UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Sorry" message:@"Please enter correct email id"
                                                                  delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

            [alertsuccess show];
            [alertsuccess release]; 
        }
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:50:58.943

试试这个代码：

```
// *** Email ID Validation *** //

    NSString* emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 

    NSPredicate* emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 

    NSString *subjectString =emailtfd.text;

if ([emailTest evaluateWithObject:subjectString] != YES)
    {

        // *** Declare and Initialize the AlertView *** //

        UIAlertView *signupalert = [[UIAlertView alloc] initWithTitle:@"Enter Valid Email ID" message:@"abc@example.com format" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [signupalert show];

        [signupalert release];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:49:15.567

试试下面的代码....

```
 if([self validation])
{
   //do your stuff

}
else
{
  //display error...
}

    -(BOOL)validation
   {
    NSString *emailString = mailLbl.text; //your email text....
    NSString *emailReg = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",emailReg]; 

     if (([emailTest evaluateWithObject:emailString] != YES) || [emailString isEqualToString:@""])
{
    return NO;
}
    else 
    {
       return YES;
    }

 } 
```

让我知道它是否有效！！！！！！！

快乐编码！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:43:36.153

尝试这个：

```
+(BOOL)emailValidate:(NSString *)email
{
    //Based on the string below
    //NSString *strEmailMatchstring=@"\\b([a-zA-Z0-9%_.+\\-]+)@([a-zA-Z0-9.\\-]+?\\.[a-zA-Z]{2,6})\\b";

    //Quick return if @ Or . not in the string
    if([email rangeOfString:@"@"].location==NSNotFound || [email rangeOfString:@"."].location==NSNotFound)
        //NSLog(@"%@",[email rangeOfString:@"@"]);
        //          NSLog(@"%@",[email rangeOfString:@"."]);
        return YES;

    //Break email address into its components
    NSString *accountName=[email substringToIndex: [email rangeOfString:@"@"].location];
    DLog(@"%@",accountName);
    email=[email substringFromIndex:[email rangeOfString:@"@"].location+1];
    DLog(@"%@",email);
    //'.' not present in substring
    if([email rangeOfString:@"."].location==NSNotFound)
        return YES;
    NSString *domainName=[email substringToIndex:[email rangeOfString:@"."].location];
    NSLog(@"%@",domainName);

    NSString *subDomain=[email substringFromIndex:[email rangeOfString:@"."].location+1];
    NSLog(@"%@",subDomain);

    //username, domainname and subdomain name should not contain the following charters below
    //filter for user name
    NSString *unWantedInUName = @" ~!@#$^&*()={}[]|;':\"<>,?/`";
    //filter for domain
    NSString *unWantedInDomain = @" ~!@#$%^&*()={}[]|;':\"<>,+?/`";
    //filter for subdomain
    NSString *unWantedInSub = @" `~!@#$%^&*()={}[]:\";'<>,?/1234567890";

    //subdomain should not be less that 2 and not greater 6
    if(!(subDomain.length>=2 && subDomain.length<=6)) 
        return YES;

    if([accountName isEqualToString:@""] 
       || [accountName rangeOfCharacterFromSet:[NSCharacterSet characterSetWithCharactersInString:unWantedInUName]].location!=NSNotFound
       || [domainName isEqualToString:@""] 
       || [domainName rangeOfCharacterFromSet:[NSCharacterSet characterSetWithCharactersInString:unWantedInDomain]].location!=NSNotFound 
       || [subDomain isEqualToString:@""] 
       || [subDomain rangeOfCharacterFromSet:[NSCharacterSet characterSetWithCharactersInString:unWantedInSub]].location!=NSNotFound)
        return YES;

    return NO;
} 
```

如果电子邮件有效则返回 NO，如果电子邮件无效则返回 Yes。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T06:44:10.997

改变 ：

```
eb =[self validateEmail:textField.description]; 
```

至 ：

```
eb =[self validateEmail:textField.text]; 
```

此外，您可以使用下面提到的代码：

```
NSString *emailString = txt_EmailId.text;// storing the entered email in a string. 
// Regular expression to checl the email format. 
NSString *emailReg = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 

NSPredicate *emailTest=[NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailReg]; 

if(([emailTest evaluateWithObject:emailString]!=YES)||[emailString isEqualToString:@""]) 
{
      alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Enter Email in abc@example.com format" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil]; 

      [alert show]; 
      [alert release];
      txt_EmailId.text = @"";
       return;      
} 
```

# javascript - 如何在启动画面上添加进度环

> ID：14723058
> 
> 赞同：2
> 
> 时间：2013-02-06T06:38:52.650
> 
> 标签：javascript, winjs

我正在使用 javascript 开发 win 8 应用程序。如何在启动屏幕上添加进度环，直到应用程序被加载并在中心页面上添加直到数据加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:28:02.950

Microsoft 在 MSDN 上发布了一个不错的示例，其中包含详细的细节（请参阅[此处](http://code.msdn.microsoft.com/Splash-screen-sample-89c1dc78)），但这里是基础知识。

*   在您的应用程序中，包含一个新的 DIV，它是 的直接子级`body`，并将其样式设置为：

例子：

```
.myExtendedSplash {
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    background-color: red; // your app colour
} 
```

*   在应用程序中包含应用程序的启动图像，位置适当（需要脚本，请参阅示例）
*   将一个添加`<progress class="win-ring win-medium></progress>`到您在第一步中创建的启动画面 div

繁荣！

复杂性来自：

*   需要有操作系统启动的确切位置，即在激活的事件参数上
*   如果用户在您显示它时更改屏幕分辨率或方向，则需要调整此启动屏幕的位置（处理窗口大小调整，并且事件参数得到更新）

# android - 多个动画并行

> ID：14723059
> 
> 赞同：1
> 
> 时间：2013-02-06T06:38:54.430
> 
> 标签：android, android-layout, android-widget

我现在使用 AnimationDrawable 使用 onWindowFocus() 方法在 onCreate 上更改大约 15 个图像。我还在动画中使用翻译动画将图像从一个点翻译到另一个点。

我现在正在尝试同时执行两者（根据翻译更改可绘制对象）但它仅在翻译动画后才更改可绘制对象请帮助..

最终动画 a = AnimationUtils.loadAnimation(this, R.anim.animation); a.reset();

```
 iv=(ImageView)findViewById(R.id.imageView1);

 iv.startAnimation(a);

iv.setBackgroundResource(R.drawable.animation_list);
  iv.setVisibility(View.INVISIBLE);

   iv.setAnimation(a);

   a.setAnimationListener(new AnimationListener() {

    @Override
    public void onAnimationStart(Animation animation) {
        // TODO Auto-generated method stub
        iv.setBackgroundResource(R.drawable.animation_list);

    }

    @Override
    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationEnd(Animation animation) {
        // TODO Auto-generated method stub

    }
});
   a.startNow();

}

public void onWindowFocusChanged(boolean hasFocus) {
    loadingAnimation = (AnimationDrawable)
    findViewById(R.id.imageView1).getBackground();
    if (hasFocus) {
        loadingAnimation.start();
    } 
    else {
        loadingAnimation.stop();
    }
} 
```

# ios - IOS：邮件应用同步功能实现

> ID：14723065
> 
> 赞同：1
> 
> 时间：2013-02-06T06:39:41.743
> 
> 标签：ios, uitableview

当表格视图滚动到顶部邮件开始同步时，我想实现 IOS 邮件应用程序邮件同步的功能。我只是想知道如何让表格视图的事件开始同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:42:40.763

该功能称为 pull-to-refresh，而该滴水外观控件称为 iOS6 的 UIRefreshControl。这是谷歌搜索后的随机教程：http: [//www.lextech.com/2012/10/ios-6-pull-to-refresh-tutorial/](http://www.lextech.com/2012/10/ios-6-pull-to-refresh-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:45:16.173

您可以使用以下两个好的项目

[`EGOTableViewPullRefresh`](https://github.com/enormego/EGOTableViewPullRefresh)

[`PullToRefresh`](https://github.com/leah/PullToRefresh)

# excel - Excel 列值随条件变化

> ID：14723067
> 
> 赞同：1
> 
> 时间：2013-02-06T06:39:49.850
> 
> 标签：excel, ms-office

我在 Microsoft Excel 2007 中有 3 列。一是一些 ID，一是原始 ID，一是这些 ID 的混合。所有列的行数相同。具有 ID 的列具有一些与原始 ID 相同的唯一 ID 号。列 ID 中的每个值在原始 ID 中都有其对，例如：

```
MY TABLE                               RESULT TABLE
ID    ORIGINAL ID   MIX ID             ID     ORIGINAL ID   MIX ID
B100  1             B100               1      1             1
B200  2             B100               2      2             1
B201  3             B100               3      3             1  
B202  4             B200               4      4             2  

etc... 
```

但是 MIX ID 具有来自 ID 的混合值，如上所示。现在我想用 ORIGINAL ID 更改 ID 中的值...这不是问题 1 -> 1 但我也想更改 MIX ID 中的值...当我将 B100 更改为 1 时，我需要更改MIX ID(B100) 中的所有值都为 1 ...我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T06:59:52.227

VLOOKUP 是你的朋友

执行类似 =VLOOKUP(MIX ID,Table with first col = ID and second Col=ORIG_ID,2) 的操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:12:35.063

你可以用`VLOOKUP`这个。在此处查看[Vlookup 文档](http://office.microsoft.com/en-in/excel-help/vlookup-HP005209335.aspx)

![在此处输入图像描述](../Images/4fd39d7e7f3b71395b267da538924b51.png)

# javascript - 这种情况的正确格式是什么？

> ID：14723075
> 
> 赞同：-2
> 
> 时间：2013-02-06T06:40:14.520
> 
> 标签：javascript, format

```
 <select name="test" id="<? echo $idtabel.'-'.$p.'-'. 1 .'; ?>" 
   onChange="javascript:document.getElementById
   ('<? echo $idtabel.'-'.$p.'-'. 1 .'b';?>')
   .value=document.getElementById('<? echo $idtabel.'-'.$p.'-'. 1 .'; ?>')
   .value;"> 
```

这种情况的正确格式是什么？我需要在 javascript 中输入一个 php 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:44:42.890

试试这个 。

```
<select name="test" id="<?php echo $idtabel.'-'.$p.'-'. 1; ?>" onChange="javascript:document.getElementById('<?php echo $idtabel.'-'.$p.'-'. 1 .'b'; ?>').value=document.getElementById('<?php echo $idtabel.'-'.$p.'-'. 1; ?>').value;"> 
```

# jquery - 如何从 vb 代码隐藏 (asp) 调用 jquery

> ID：14723076
> 
> 赞同：1
> 
> 时间：2013-02-06T06:40:22.537
> 
> 标签：jquery, asp.net, vb.net

我是 jqueries 的新手，我在调用对话框时遇到问题如果我的用户有无效的搜索查询并且没有输入开始日期。看到我有这个 jquery 代码

```
$(function(){          
  $("#dialog").dialog(function() {                                    
     $("#dialog").dialog()};
  });
}); 
```

现在我在 vb 中有这些代码：

```
 Sub Subsearch()
    If txtfrom.Text <> "" And txtto.Text <> "" Then
        //some codes

    ElseIf txtfrom.Text <> "" And txtto.Text = Nothing Then
        //some codes

    ElseIf txtfrom.Text = Nothing And txtto.Text <> "" Then

        //call my JQuery 

    Else
        // some codes

    End If
End Sub 
```

现在我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T06:43:09.827

试试这个：

更新到 VB.NET

```
ClientScript.RegisterClientScriptBlock(Me.[GetType](), "blah", "myfunction();", True 
```

如果您使用的是 ScriptManager，请使用 RegisterStartupScript()，这样使用它：

```
ScriptManager.RegisterStartupScript(this, GetType(), "modalscript",
"$(function() { $('#dialog').dialog(); });", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:51:11.660

```
dim myjquery as string="$(function(){ $('#dialog').dialog(function() {$('#dialog').dialog()} ;  }); });"
response.write(myjquery) 
```

让我知道它是否有效

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-06T06:43:41.583

您可以使用 JQuery 来验证您的输入框，从而不必使用 VB 代码来做到这一点......

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

[http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/](http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/)

# java - 在 PATH 中找不到 firefox 二进制文件。确保已安装 Firefox。操作系统似乎是：VISTA

> ID：14723081
> 
> 赞同：22
> 
> 时间：2013-02-06T06:40:33.507
> 
> 标签：java, eclipse, firefox, webdriver

我无法在任何浏览器中运行我的脚本。以下是我为 Firefox 得到的错误。安装firefox的位置是正确的。不知道怎么回事。

我正在使用 Firefox 15。Selenium Java 2.2.0 和 Eclipse Juno

我的测试用例如下：

```
import static org.junit.Assert.*;
import org.junit.After; 
import org.junit.Before; 
import org.junit.Test; 
import org.openqa.selenium.By; 
import org.openqa.selenium.WebDriver; 
import org.openqa.selenium.firefox.FirefoxDriver;  
import org.openqa.selenium.firefox.FirefoxProfile;

public class FirstTest {
private WebDriver _driver;
@Before
 public void setUp() throws Exception {
System.setProperty("webdriver.firefox.driver","C:\\Program Files\\Mozilla Firefox15\\Firefox.exe");
FirefoxProfile firefoxProfile = new FirefoxProfile();
_driver = new FirefoxDriver(firefoxProfile);
}

@Test 
public void Login() throws Exception {
_driver.get("https://www.google.co.in/");
assertEquals("Google", _driver.getTitle());
_driver.findElement(By.id("lst-ib")).clear();
_driver.findElement(By.id("lst-ib")).sendKeys("selenium");
_driver.findElement(By.name("btnG")).click();
_driver.findElement(By.linkText("Selenium - Web Browser Automation")).click();
assertEquals(" ", _driver.getTitle());
assertEquals("Selenium - Web Browser Automation", _driver.getTitle());
}
@After public void tearDown() throws Exception {
_driver.quit();
}
} 
```

以下是我得到的错误：

```
org.openqa.selenium.WebDriverException: Cannot find firefox binary in PATH. Make sure firefox is installed. OS appears to be: VISTA
Build info: version: '2.20.0', revision: '16008', time: '2012-02-27 19:03:59'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_26'
Driver info: driver.version: FirefoxDriver
    at org.openqa.selenium.firefox.internal.Executable.<init>(Executable.java:52)
    at org.openqa.selenium.firefox.FirefoxBinary.<init>(FirefoxBinary.java:56)
    at org.openqa.selenium.firefox.FirefoxBinary.<init>(FirefoxBinary.java:52)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:88)
    at FirstTest.setUp(FirstTest.java:16)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

java.lang.NullPointerException
    at FirstTest.tearDown(FirstTest.java:31)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:36)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T09:20:46.367

1.  打开命令行（开始 -> 运行 -> 键入“cmd”）
2.  类型`PATH`
3.  验证你可以看到这里写的`C:\Program Files\Mozilla Firefox15\Firefox.exe`

它可能不在这里 - 因为这就是错误所说的。如何解决？

1.  点击开始
2.  右键单击“计算机”，然后单击“属性”
3.  在左侧菜单中选择“高级系统设置”
4.  转到“高级”选项卡，然后单击“环境变量...”
5.  在下面的窗口中选择“路径”并单击“编辑...”（需要管理员权限）
6.  在末尾添加所需路径，分号分隔
7.  可能需要重新启动计算机

它没有帮助然后像这样更改构造函数：

```
File pathToBinary = new File("C:\\Program Files\\Mozilla Firefox15\\Firefox.exe");
FirefoxBinary ffBinary = new FirefoxBinary(pathToBinary);
FirefoxProfile firefoxProfile = new FirefoxProfile();
FirefoxDriver _driver = new FirefoxDriver(ffBinary,firefoxProfile); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-31T08:49:59.317

最简单的方法是在定义驱动程序之前使用以下代码。

```
System.setProperty("webdriver.firefox.bin",
                    "C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-26T19:25:16.633

请注意，如果浏览器路径有空格（例如“...\Program Files (x86)...”），您需要在参数值中添加双引号。

例子：

```
-Dwebdriver.firefox.bin="D:\Program Files (x86)\Mozilla Firefox\firefox.exe" 
```

添加双引号后全部运行成功。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-27T17:50:24.167

您必须在运行程序时添加 vm 参数。这应该像

```
-Dwebdriver.firefox.bin=/custom/path/of/firefox/exe 
```

在 IntelliJ IDE 中更简单的 Goto Run → Edit Configurations... 在 VM 选项中添加上述内容。

![IntelliJ 运行配置](../Images/0027574ef750a2e4eafea4ed6c8ae350.png)

Eclipse 还可以在运行时提供 vm 参数。这样我就可以使用带有硒的便携式 Firefox。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-24T13:52:39.673

我也遇到了同样的问题。最后我通过在功能中设置二进制值来解决它，如下所示。在运行时它使用这个值，所以它必须设置。

```
DesiredCapabilities capability = DesiredCapabilities.firefox();
capability.setCapability("platform", Platform.ANY);
capability.setCapability("binary", "/ms/dist/fsf/PROJ/firefox/16.0.0/bin/firefox"); //for linux

//capability.setCapability("binary", "C:\\Program Files\\Mozilla  Firefox\\msfirefox.exe"); //for windows                
WebDriver    currentDriver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability); 
```

你完成了！快乐编码:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-25T12:26:27.533

出于某种原因，添加环境变量对我不起作用。

[如本页](https://code.google.com/p/selenium/wiki/Grid2)(grid2)所述，我能够在命令行节点配置中指定 Firefox 的路径。

```
-browser “browserName=firefox,version=3.6,firefox_binary=c:\Program Files\Mozilla Firefox\firefox.exe ,maxInstances=3, platform=WINDOWS” 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-02T15:24:36.390

对我来说，只需将路径变量更改为：'C:\Program Files\Mozilla Firefox' 而不是 'C:\Program Files (x86)\Mozilla Firefox'

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-01T00:04:48.097

我在 Visual Studio 中运行测试时收到此错误消息：Firefox 根本无法加载，我收到了 OP 的错误消息。

我手动打开了 Firefox，发现它需要自我更新（它在加载之前就这样做了）。完成后，我重新运行了测试套件，Firefox 很好地出现了，测试运行正常。如果您突然收到此错误，请在更新计算机上的任何内容之前尝试此答案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-19T14:29:13.447

我也面临同样的问题，我花了一个多星期的时间来解决它。重新启动我的机器似乎已经修复了它，但只是暂时的。

有一个解决方案可以通过编辑注册表文件来增加临时端口的最大数量。这似乎解决了问题，但这也只是暂时的。

有一段时间，我一直在想我是否试图访问不再可用的驱动程序，所以我尝试调用：

```
driver.quit() 
```

然后重新创建浏览器实例，它只给了我：**SessionNotFoundException**。

我现在意识到我已经使用了 BOTH`System.setProperty`以及`ffCapability.setCapability`设置二进制文件的路径。

然后我只尝试了`System.setProperty`=>那里没有运气。

只有`ffCapability.setCapability`=> 瞧！！！到目前为止，它一直运行良好。希望当我明天、后天和后天尝试重新运行我的脚本时它会很好用...... :)

**底线：** 仅使用此

```
ffCapability.setCapability("binary", "C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe"); //for windows` 
```

希望能帮助到你！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-28T17:52:41.330

尝试这个：

```
System.setProperty("webdriver.gecko.driver", "geckodriver p");
DesiredCapabilities capabilities = DesiredCapabilities.firefox();
capabilities.setCapability("marionette", true);
driver = new FirefoxDriver(capabilities); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-26T08:20:50.547

似乎 Firefox 安装在 App 数据文件夹路径中`C:\Users\users\AppData\Local\Mozilla Firefox`

所以你可以设置firefox bin属性如下

```
System.setProperty("webdriver.firefox.bin", "C:\\Users\\*USERNAME*\\AppData\\Local\\Mozilla Firefox\\Firefox.exe"); 
```

添加这个解决了我的问题

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-30T10:17:41.493

GeckoDriver 找不到已安装的 Firefox。首先，确保您已将 GeckoDriver.exe 与 Firefox 版本（32 位与 64 位）相匹配，并且最好让它们都保持最新。

如果问题仍然存在，您可以通过以下任一方式进行修复。

大多数解决方案已作为对此问题和重复问题的答案发布。我只是想总结所有这些并使其保持最新。

*   解决方案1：

    将 Firefox 安装在默认位置：

    *   `C:\Program Files\Mozilla Firefox\firefox.exe`适用于 64 位 Firefox 和 GeckoDriver_w64
    *   `C:\Program Files\Mozilla Firefox (x86)\firefox.exe`适用于 32 位 Firefox 和 GeckoDriver_w32
*   解决方案2：

    将文件夹添加`firefox.exe`到`PATH`环境变量中。

    在 Windows 上，打开控制面板 -> 系统 -> 高级系统设置（在左外侧） -> 环境变量 -> 路径 -> 将包含的文件夹添加`firefox.exe`到`PATH`：

    *   （当前）用户变量...如果您仅为该用户安装了 Firefox（例如`C:\Users\NAME\AppData\Mozilla Firefox`）。
    *   （所有用户）系统变量...如果为所有用户安装了 Firefox（在 中`C:\Program Files\Mozilla Firefox`）。

    您必须重新启动 IDE 和`GeckoDriver.exe`进程才能使更改生效。

    [![PATH 环境变量](../Images/bc4031964133f766d7875f2ba6641f12.png)](https://i.stack.imgur.com/jWL9r.png)

*   解决方案3：

    运行 Java 虚拟机时，可以将路径添加`firefox.exe`为系统属性 ( `-D`)：

    ```
    java.exe   -Dwebdriver.firefox.bin="C:\Users\NAME\AppData\Mozilla Firefox\firefox.exe"   ...other_params... 
    ```

    也可以在 IntelliJ IDEA、Eclipse、NetBeans 等各自的运行配置中设置 VM 参数。 [![IntelliJ IDEA 运行配置](../Images/2e7464c9109dc1929eaad03718a7a25b.png)](https://i.stack.imgur.com/5M19d.png)

*   解决方案4：

    在你的 Java 程序中全局（在你实例化 FirefoxDriver 之前）。理想情况下，作为方法中的第一行代码`main()`。

    ```
    System.setProperty("webdriver.firefox.bin", "C:\Program Files\Mozilla Firefox\firefox.exe"); 
    ```

*   解决方案 5：

    在您的 Java 程序中，单个 Firefox WebDriver 实例的本地：

    ```
    System.setProperty("webdriver.gecko.driver", "C:\\Java-Training\\Selenium\\geckodriver.exe");

    FirefoxOptions options = new FirefoxOptions();
    File pathToFirefoxBinary = new File("C:\\Program Files\\Mozilla Firefox\\firefox.exe");
    FirefoxBinary ffBinary = new FirefoxBinary(pathToFirefoxBinary);
    options.setBinary(ffBinary);

    browser = new FirefoxDriver(options); 
    ```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-27T20:26:34.183

```
File pathBinary = new File("Firefox.exe location");
FirefoxBinary ffBinary = new FirefoxBinary(pathBinary);
FirefoxProfile firefoxProfile = new FirefoxProfile();
FirefoxDriver driver = new FirefoxDriver(ffBinary,firefoxProfile); 
```

您需要添加浏览器的二进制文件

或者

最佳且永久的解决方案：只需将 Firefox.exe 位置添加到环境变量

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-09-05T01:22:22.907

这段代码对我有用

```
System.setProperty("webdriver.firefox.bin", "C:\\Program Files\\Mozilla Firefox 54\\firefox.exe");
String Firefoxdriverpath = "C:\\Users\\Hp\\Downloads\\geckodriver-v0.18.0-win64\\geckodriver.exe";
System.setProperty("webdriver.gecko.driver", Firefoxdriverpath);
DesiredCapabilities capabilities = DesiredCapabilities.firefox();
capabilities.setCapability("marionette", true);
driver = new FirefoxDriver(capabilities); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-10-24T19:55:39.477

将我的项目从一台计算机移动到另一台计算机时，我遇到了这个问题。解决方案是从 nuget 重新加载 selenium webdriver。

# google-visualization - Google Geocharts 中的英国地区

> ID：14723087
> 
> 赞同：3
> 
> 时间：2013-02-06T06:41:09.607
> 
> 标签：google-visualization

我们正在为我们的网站实施 Geo Chart 热图，但它们在显示英国的区域方面存在限制，它们只能列出 4 个区域，英格兰、苏格兰、威尔士和北爱尔兰，并且不超过此。谁能帮我知道我们是否可以列出英国的所有地区，以及我们是否可以显示英国这些地区下的城市、县以及普雷斯顿等。

我们也可以传递超过 3 个参数以在鼠标悬停时显示更多数据。

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
     google.load('visualization', '1', {'packages': ['geochart']});

     var chart; 
     var data;
     var options;   

     google.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        data = google.visualization.arrayToDataTable([

          ['Region', 'Popularity', 'Total Votes'],

          ['England', 8, 6],
          ['Scotland', 8, 6],
          ['Wales ', 9, 7],
          ['Northern Ireland', 2, 5],

          ['United Kingdom', 2, 4]

        ]);

        var maxV = 5;  // to ensure scale is equal on both ends.
        var minV = maxV*-1;

        options =   { 
        colorAxis: {colors: ['blue', 'white', 'red'], minValue: minV, maxValue: maxV},
            };

        chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    google.visualization.events.addListener(chart, 'regionClick', selectHandler);
    };

function selectHandler(e) {
    var selection = e['region'];
    //alert(selection);
        options['resolution'] = 'provinces';
        options['region'] = selection;
            chart.draw(data, options);
            document.getElementById('goback').style.display='block';
    };

    </script> 
```

如您所见，只有3个参数，我们可以传递额外的参数吗？或任何工具提示。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T04:23:15.810

简短回答：不，您不能显示比英格兰、威尔士、苏格兰和北爱尔兰更具体的部门。

谷歌地图目前没有任何更具体的地图可用，因此您将无法使用地理图表对其进行映射。

如果要显示城市，可以使用[标记模式](https://developers.google.com/chart/interactive/docs/gallery/geochart)来显示它们。如果您确实想显示[英国的所有 ISO-3166-2 区域，](http://en.wikipedia.org/wiki/ISO_3166-2:GB)您唯一的选择是在标记模式下为每个区域创建坐标，然后将它们编码为圆形，而不是阴影区域。

就显示更多工具提示而言，您可以添加一个 ToolTip 列来显示您心中想要的任何内容（警告：不允许回车）：

```
function drawVisualization() {
  data = new google.visualization.DataTable();
  data.addColumn('string', 'Region');
  data.addColumn('number', 'Popularity');
  data.addColumn('number', 'Total Votes');
  data.addColumn({type: 'string', role: 'tooltip'}, 'ToolTip');
  data.addRows([
    ['England', 8, 6, 'This is England'],
    ['Scotland', 8, 6, 'This is Scotland'],
    ['Wales ', 9, 7, 'This is Wales'],
    ['Northern Ireland', 2, 5, 'This is Northern Ireland'],
    ['United Kingdom', 2, 4, 'This is the UK']
  ]);

  var maxV = 5;  // to ensure scale is equal on both ends.
  var minV = maxV*-1;

  options =   {
    colorAxis: {colors: ['blue', 'white', 'red'], minValue: minV, maxValue: maxV},
  };

  chart = new google.visualization.GeoChart(document.getElementById('visualization'));
  chart.draw(data, options);
  google.visualization.events.addListener(chart, 'regionClick', selectHandler);
}

function selectHandler(e) {
  var selection = e['region'];
  //alert(selection);
  options['resolution'] = 'provinces';
  options['region'] = selection;
  chart.draw(data, options);
  //document.getElementById('goback').style.display='block';
}; 
```

将来，[HTML ToolTips](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content#enabling_html_tooltip)也可能会得到支持，但即使在实验性 1.1 版本中，它们目前也无法用于地理图表。

# java - One 的含义是什么 o=(One) new Two(); 在这个节目中。谁能解释一下，这是如何工作的？

> ID：14723089
> 
> 赞同：1
> 
> 时间：2013-02-06T06:41:11.190
> 
> 标签：java, casting, typecasting-operator

```
class One
{
    void show1()
    {
       System.out.println("super class");
    }

}

class Two extends One
{
    static void show2()
    {
       System.out.println("subclass");
    }

}
public class Cast 
{
    public static void main(String[] args)

    {
      One o=(One) new Two();
      o.show1();

    }

} 
```

此语句在此代码中如何工作`One o=(One) new Two();`？为什么我不能这样使用 `Two o=(One) new Two();`？我对使用强制转换感到困惑，尽管这里的 o 是超类变量。为什么我不能使用 o 引用子类方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T06:44:14.470

> 此语句在此代码中的工作方式**One o=(One) new Two();**

这意味着 class 的对象`Two`是由 class 的引用创建和指向的`One`。不需要类型转换。

> 为什么我不能像这样使用**Two o=(One) new Two();**

那就是多态性。派生类不能指向基类。

**经验法则：**基类可以指向任何派生类。（反之亦然）。因此，您可以将派生类强制转换为基类，而不是其他方式。

> 虽然 o 这里是超类变量。为什么我不能使用 o 来引用子类方法。

对，但是实际对象是派生类的，而引用是基类的。只有那些在派生类中被覆盖的派生类方法才能被访问。

尝试以下代码行来查看自己：

```
Two obj = new One(); // Error
One obj = new Two(); // OK
Two obj = (Two) new One(); // Error 
```

请参阅：[ClassCastException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassCastException.html)、[ClassCastException](https://stackoverflow.com/questions/3092796/classcastexception)和[Java 中“ClassCastException”的解释](https://stackoverflow.com/questions/907360/can-someone-explain-classcastexception-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T06:46:59.210

右侧的变量应该与左侧的类型（或任何子类型）相同。

```
One o=(One) new Two(); 
```

这`Two`是 的子类型，`One`因此它可以转换为类型的`One`引用变量并且可以与类型的引用变量一起使用`One`。

```
 Two o=(One) new Two(); 
```

在这里，您可以将类型`Two`转换`One`为向上转换的对象，但您不能将相同的转换对象分配给类型的引用变量，`Two`因为`One`它不是`Two`.

给定的层次结构是

```
One      
 |--> Two 
```

`Two`可以`One`在层次结构中的 One（One 的子类型）下代替它，但反之亦然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T06:45:45.597

> 该声明的工作原理

```
One o=(One) new Two(); 
```

类型的对象`Two`是在堆上创建的。但是引用`o`被强制转换为对类型的引用`One`

其实你可以这样做：

```
Two o = new Two();
o.show1(); 
```

因为`Two`也会有`show1`方法。

> 为什么我不能像这样使用 Two o=(One) new Two();

参考不匹配。但你可以这样做

```
Two o=(Two)(One) new Two(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T06:53:58.947

**为什么我不能使用 o 来引用子类方法。**

这里**show2**方法仅存在于子类中，它不存在于超类中，并且您的对象 o 属于派生类，但您必须覆盖派生类中的方法，因此您无法访问**show2。**

# jqplot - jqplot - 轴标签中的上标

> ID：14723090
> 
> 赞同：3
> 
> 时间：2013-02-06T06:41:11.507
> 
> 标签：jqplot, superscript, axis-labels

正如标题所说，如何将上标字体添加到 jqplot 图中的轴标签？

我尝试使用 Javascript sup() 函数以及轴标题的实际 html 标签，但没有白费。

基本上我需要显示 m ³等单位。我是否必须修改 AxisLabelRenderer 或者我是否缺少任何明显的解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:18:58.963

你可以使用 unicode 字符来做到这一点；

1.  “上标二”(\u00B2) (2)
2.  “上标三” (\u00B3) (³)
3.  “上标一” (\00B9) (¹)

试试这个：

```
 xaxis: {
      label: "Units m\u00B3"
      }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T03:15:43.737

这是另一个答案，带有 HTML 实体，它也适用于 jqPlot：

1.  `&sup1;`(¹)
2.  `&sup2;`(²)
3.  `&sup3;`(³)

例如（平方米）：

```
 xaxis: {
    label: "m&sup2;"
  }, 
```

# tsql - 如何从 Calibre 数据库中查询？

> ID：14723091
> 
> 赞同：1
> 
> 时间：2013-02-06T06:41:17.953
> 
> 标签：tsql, calibre

如您所知，[calibre](http://calibre-ebook.com/)有一个名为`metadata.db`SQLite 并由 SQLite 制成的数据库，我想从所有具有此列的书籍中查询：

```
bookId  Title   Date    Size    Rating  Tags    Publisher   PublishedDate   Author  Cover           
------  -----   ----    ----    ------  ----    ---------   -------------   ------  ----- 
```

但是，该数据库包含此表：

```
Books Table
-----------
Name
id
title
sort
timestamp
pubdate
series_index
author_sort
isbn
lccn
path
flags
uuid
has_cover
last_modified

Authors Table
-------------
Name
id
name
sort
link

Publishers Table
----------------
Name
id
name
sort 
```

他们之间没有关系，我怎样才能得到我的查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T17:52:20.250

```
SELECT id, title,
               (SELECT name FROM books_authors_link AS bal JOIN authors ON(author = authors.id) WHERE book = books.id) authors,
               (SELECT name FROM publishers WHERE publishers.id IN (SELECT publisher from books_publishers_link WHERE book=books.id)) publisher,
               (SELECT rating FROM ratings WHERE ratings.id IN (SELECT rating from books_ratings_link WHERE book=books.id)) rating,
               (SELECT MAX(uncompressed_size) FROM data WHERE book=books.id) size,
               (SELECT name FROM tags WHERE tags.id IN (SELECT tag from books_tags_link WHERE book=books.id)) tags,
               (SELECT format FROM data WHERE data.book=books.id) formats,
               isbn,
               path,
               pubdate
        FROM books 
```

# java - 在本机 C 代码中将像素数据添加到 Bitmap 对象

> ID：14723094
> 
> 赞同：1
> 
> 时间：2013-02-06T06:41:21.730
> 
> 标签：java, android, c, java-native-interface

我的本机代码中有一个位图对象，即“jobject 位图”，我有一个指针“*ptr”，它指向解码的帧数据。有人可以告诉我如何将 ptr 指向的这些像素数据添加到位图对象，以便我可以将此对象传递给 android 代码并显示位图中存在的数据。

无论如何也可以从本机c代码本身显示框架。任何有价值的建议/答案将不胜感激。

提前谢谢请帮忙。

# excel - Excel-vba 解压受密码保护的文件并合并

> ID：14723095
> 
> 赞同：0
> 
> 时间：2013-02-06T06:41:22.960
> 
> 标签：excel, vba

我收到了 50 个带有“.zip”扩展名的压缩文件（受密码保护）。每个文件都有一个单独的密码。我必须手动输入所有文件的密码，然后在开始工作之前将它们合并到一个文件中。我正在寻求一些帮助。一个宏，它通过循环我保存在工作表中某处的密码来自动打开保存在文件夹中的所有文件。此外，一旦打开所有文件，它将它们合并到一个文件中。

对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:05:18.487

www​.rondebruin.nl/merge.htm 下载插件。希望它对你有用。

# java - 使 Java TcpListener 在 Internet 上可用

> ID：14723096
> 
> 赞同：-1
> 
> 时间：2013-02-06T06:41:25.880
> 
> 标签：java, sockets, hosting, tcp-ip

我创建了一个 Java TcpListener 小应用程序。现在我想通过 Internet 使其可用于 TcpClient（目前，我仅在本地使用它）。哪种服务可以帮助我托管？我熟悉使用 Web 服务器托管，但为此我只需要 TCP/IP 层，我是新手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:29:56.590

您只需在连接到 Internet 的服务器（计算机）上运行您的应用程序。并打开您正在监听的端口。因此，您的客户可以通过 IP 和 PORT 礼服到达它。如果您需要通过 Internet 访问，您将需要一个可通过 Internet 访问的计算机的公共 IP。

您不需要为此使用 Web 服务器（对于 Web 托管），但您需要检查随之而来的许多其他安全问题。

# python - AttributeError：'Manager'对象在Django中没有属性'get_by_natural_key'错误？

> ID：14723099
> 
> 赞同：33
> 
> 时间：2013-02-06T06:41:37.423
> 
> 标签：python, django, django-authentication, django-1.5, django-managers

我正在使用 Django `'1.5c1'`。我的 settings.py 中有这一行：

```
AUTH_USER_MODEL = 'fileupload.galaxyuser' 
```

这是我的`Galaxyuser`模型：

```
class GalaxyUser(models.Model):
    id = models.IntegerField(primary_key=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=765)
    password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    username = models.CharField(max_length=765, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    class Meta:
        db_table = u'galaxy_user' 
```

我想从 Galaxyuser 模型进行身份验证。但是，当我登录时，我收到此错误：

```
AttributeError: 'Manager' object has no attribute 'get_by_natural_key' 
```

我究竟做错了什么？

**编辑：** `Traceback:`

```
Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/zurelsoft/workspace/genalytics/fileupload/backend.py" in login_backend
  26\.         user = authenticate(username=username, password=password)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/__init__.py" in authenticate
  59\.             user = backend.authenticate(**credentials)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/backends.py" in authenticate
  16\.             user = UserModel.objects.get_by_natural_key(username)

Exception Type: AttributeError at /login_backend/
Exception Value: 'Manager' object has no attribute 'get_by_natural_key' 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-06T08:44:10.027

您已经创建了一个新的用户模型，但尚未为该模型指定经理。如果您还不熟悉 Django 中的管理器，我建议您先阅读相关[文档](https://docs.djangoproject.com/en/1.5/topics/db/managers/)。正如 Django 1.5 所说（[来源](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/)）：

> 您还应该为您的用户模型定义一个自定义管理器。如果你的 User 模型定义了与 Django 的默认用户相同的用户名和电子邮件字段，你可以只安装 Django 的 UserManager；但是，如果您的 User 模型定义了不同的字段，您将需要定义一个自定义管理器来扩展 BaseUserManager 提供两个额外的方法：`create_user()`和`create_superuser()`.

简而言之，如果您的模型使用与 Django`User`模型相同的用户名和电子邮件字段，那么您可以编写：

```
from django.contrib.auth.models import UserManager

class GalaxyUser(models.Model):
    id = models.IntegerField(primary_key=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=765)
    password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    username = models.CharField(max_length=765, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)

    objects = UserManager()

    class Meta:
        db_table = u'galaxy_user' 
```

或者，您需要子类化`BaseUserManager`（也在 中`django.contrib.auth.models`）并实现所需的方法。然后，您需要将其分配给`objects`模型的变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-11-19T19:20:03.440

如果您的课程有`UserManger`课程，请`GalaxyUser`确保添加`objects = UserManager()`到该课程

# javascript - CreateJS / EaselJS 具有特定尺寸形状的奇怪性能

> ID：14723101
> 
> 赞同：7
> 
> 时间：2013-02-06T06:41:41.830
> 
> 标签：javascript, html, canvas, easeljs, createjs

我目前正在开发一个游戏，它使用一个大的平铺地图，可以拖动，并随着你的角色快速移动。

**我已经创建了问题** [JSFiddle 示例的简单版本](http://jsfiddle.net/Bodman/HvbXA/)

每个图块都是一个**Shape**并被**缓存**。所有形状都放在一个**容器**内，容器根据相机位置移动。

我注意到某些缩放级别下 fps 的奇怪下降。缩放只是调整形状的大小。

**如果你调整变焦，你会明白我的意思。**

### 铬合金

缩放 1 = 良好的 fps
缩放 3 = 糟糕的 fps
缩放 5 = 良好的 fps

## **这个帧率问题的原因是什么？**

**请注意，我也在 createjs 社区论坛上发布了这个。**
[社区问题](http://community.createjs.com/discussions/easeljs/853-strange-performance-with-certain-size-shapes)

这是 jsfiddle 示例中的代码

### HTML

```
<canvas id="mainCanvas" width="500" height="500"></canvas>
<span id="fps-container"><span id="fps">Loading</span> FPS</span> 
```

### JS

```
/*
This is a very simple version of a larger app/game i am creating
uses a large map that is drawn in sectors (createjs shapes)
I have not figured out the best way to cache, because if i cache all at once, its a lot of overhead.

My main issue is the zoom levels, the zoom simply adjusts the sectorsize.
The problem with this is that there seems to be a wierd performance problem at certain zoom levels.

To test this out, adjust the camera zoom property. I do not recommend anything more that 6.
*/

//Generic Settings
var Settings = {
    block_size: 50,
    rows: 50,
    cols: 50
}

//Create Camera
var Camera = {
    /*

    HERE IS THE ZOOM PROBLEM

      Chrome
      zoom : 1 = good fps
      zoom : 2 - 4 = bad fps
      zoom : 5 - 6 = good fps again ... wtf

      Safari
      Zoom: 7 = Good fps

  */
    x: 0,
    y: 0,
    zoom:1
}

//Create Short Alias
var Stage = createjs.Stage;
var Ticker = createjs.Ticker;
var Container = createjs.Container;
var Graphics = createjs.Graphics;
var Shape = createjs.Shape;

//Full Screen Canvas
var canvas = document.getElementById("mainCanvas");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

//Create Stage
var mainStage = new Stage(canvas);
mainStage.snameToPixelsEnabled = true;
mainStage.autoClear = true;

//Start Ticker
Ticker.addListener(this);
Ticker.useRAF = true;
Ticker.setFPS(30);

//Create Container;
var mainContainer = new Container();
mainContainer.snapToPixel = true;

//Add Container to Stage
mainStage.addChild(mainContainer);

//Create Lots of Shapes
var size = Settings.block_size * Camera.zoom;

//For the purpose of demonstration, I am only creating a square
//My actual app has much more complex drawings
var graphics = new Graphics();
graphics.setStrokeStyle(1 * Camera.zoom, "round");
graphics.beginFill(Graphics.getRGB(230,230,230,0.5));
graphics.beginStroke(null);
graphics.rect(-10, -10, size+10, size+10);

var cols = Settings.cols;
var rows = Settings.rows;
for (var x = 0; x < cols; x++) {
    for (var y = 0; y < rows; y++) {

        var shape = new Shape(graphics);
        shape.x = x * size;
        shape.y = y * size;

        //Cache the shape, (the offset is to prevent the cache from chopping off complex shapes)
        var cache_offset = 10 * Camera.zoom;
        shape.cache(-cache_offset,-cache_offset, size + cache_offset, size + cache_offset);

        //Add shape to container
        mainContainer.addChild(shape);
    }
}

//Make map draggable
var lastX,lastY;

mainStage.onMouseDown = function(evt){
    lastX = evt.stageX;
    lastY = evt.stageY;
}

mainStage.onMouseMove = function(evt){
    if(lastX && lastY){
        var stageX = evt.stageX;
        var stageY = evt.stageY;
        var diffX = lastX - stageX;
        var diffY = lastY - stageY;
        lastX = stageX;
        lastY = stageY;
        Camera.x += diffX / Camera.zoom;
        Camera.y += diffY / Camera.zoom;
    }    
}

mainStage.onMouseUp = function(evt){
    lastX = null;
    lastY = null;
}

//Update the container position based on camera position and zoom
updatePosition = function(){
    mainContainer.x = -Camera.x * Camera.zoom;
    mainContainer.y = -Camera.y * Camera.zoom;
}

tick = function(){
    updatePosition();
    mainStage.update();
    var fps = document.getElementById('fps');
    fps.innerHTML = Ticker.getMeasuredFPS();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:05:51.037

**解决了**。

我通过在刻度上循环遍历每个形状来解决这个问题，`visible = false;` 如果超出范围则应用一个[更新的固定示例](http://jsfiddle.net/Bodman/ZZ8Qh/1/)

```
//Update the container position based on camera position and zoom
updatePosition = function () {

    var floor = Math.floor;

    var min_x = 0 + Camera.x * Camera.zoom - size;
    var min_y = 0 + Camera.y * Camera.zoom - size;
    var max_x = Screen.width + Camera.x * Camera.zoom + size
    var max_y = Screen.height + Camera.y * Camera.zoom + size;

    mainContainer.x = -Camera.x * Camera.zoom;
    mainContainer.y = -Camera.y * Camera.zoom;

    var shape_count = mainContainer.getNumChildren() - 1;

    for (var i = 0; i <= shape_count; i++) {
        var shape = mainContainer.getChildAt(i);

        if(shape.x < min_x || shape.x > max_x){
            shape.visible = false;
        }
        else if(shape.y < min_y || shape.y > max_y){
           shape.visible = false; 
        }
        else {
            shape.visible = true;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:18:37.370

**我注意到**的是，如果缓存方块小于某个大小，则帧率会下降，所以我做了什么：

```
var cache_offset = 10 * Camera.zoom;
=>
var cache_offset = 10 * Camera.zoom + 77; 
```

我稍微玩了一下 77，我最初的想法是缓存区域必须是 2 的幂，但是在 时`zoom:3`，`adding 77`缓存大小为 364x364px 并且任何高于该大小的大小也适用于`zoom:3`，所以我不知道为什么，但是**缓存矩形的大小不知何故会导致帧率下降**。

* * *

还有一个**错字**（并没有真正影响这个问题）：

```
mainStage.snameToPixelsEnabled = true;
=>
mainStage.snapToPixelEnabled = true; 
```

这将帧速率提高了大约 2-3fps

# mysql - 如何检测安装在网络中的 MySQL 服务器？

> ID：14723102
> 
> 赞同：0
> 
> 时间：2013-02-06T06:41:55.167
> 
> 标签：mysql

我在一个网络中有 5 个系统，如何检测哪些系统安装了 MySQL 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:04:52.353

MySQL 服务器侦听本地端口上的请求`3306`。*telnet*可以告诉您该位置是否有响应

```
telnet someserver 3306 
```

然而，端口可能配置不同（例如`9999`）。并且服务器防火墙可能会阻止对该端口的任何访问（因为某些 MySQL 服务器是从本地应用程序访问的，例如 PHP，因此不需要外部访问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:45:13.233

假设 MySQL 在每台服务器的默认端口上运行，只需尝试在端口 3306 上“正常”连接到数据库。

# oracle - oracle如何创建行级触发器？

> ID：14723105
> 
> 赞同：0
> 
> 时间：2013-02-06T06:42:05.520
> 
> 标签：oracle, plsql, triggers, oracle11g

我在`hr`架构中有一个名为的表`employee`，我需要在该表上创建行级触发器，以便每当我尝试更新员工表上的薪水时，我确保不会减少薪水！

我试过这个，但我得到一个错误：

> 错误报告：ORA-01748: 这里只允许简单的列名 01748\. 00000 - “这里只允许简单的列名

```
CREATE or REPLACE TRIGGER salary_dec_trigger 
BEFORE UPDATE OF emp.salary
ON emp 
FOR EACH ROW 
BEGIN 
if(:new.salary>:old.salary)
then

update emp set emp.salary=emp.salary+:new.salary where emp.employee_id=:new.employee_id;
else 
rollback;
end if;
END; 
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:39:16.170

```
CREATE or REPLACE TRIGGER salary_dec_trigger 
BEFORE UPDATE OF salary ON emp 
FOR EACH ROW 
BEGIN 
  if(:new.salary < :old.salary) then
    raise_application_error(-20001, 'Salary can''t be decreased');
  end if;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:48:48.570

据我从您的代码中可以看出，您正在尝试每当您更新员工的薪水时，您实际上会将其与他以前的薪水相加，对吗？而且只允许加薪，绝不减薪。

那你为什么不直接说`:new.salary = :old.salary + :new.salary`？并跳过回滚，只需执行`:new.salary = :old.salary`;

如果它不起作用，您应该尝试使用自治事务的过程来执行此操作，但这就是 before 触发器应该允许您直接执行的操作（[在此处查看](http://www.java2s.com/Tutorial/Oracle/0560__Trigger/Changedatainabeforeinsertorupdatetrigger.htm)）。

# c# - OOP 中的封装

> ID：14723126
> 
> 赞同：1
> 
> 时间：2013-02-06T06:43:44.857
> 
> 标签：c#, oop, encapsulation, data-hiding

我正在研究 OOP 概念。从我阅读的文档中了解到，我为 OOP 中的封装概念编写了一个示例程序。我在下面粘贴了我的代码。我关于封装的概念是否正确？

**默认.aspx**

```
<asp:Button ID="showBtn" Text="Show employee details." runat="server"/> 
```

**默认.aspx.cs**

```
public partial class _Default : System.Web.UI.Page
{
Employee emp;

protected void Page_Load(object sender, EventArgs e)
{
    emp = new Employee();
    emp.SetEmployeeID(001);
    emp.SetEmployeeSalary(5000);
    emp.EmployeeName = "Rob";
    emp.EmployeeAge = 26;

    showBtn.Click += new EventHandler(showBtn_Click);
}

void showBtn_Click(object sender, EventArgs e)
{
    emp.ShowEmployeeDetails();
}
} 
```

**班级员工**

```
class Employee
{
private int empId;
private int empSalary;
private string empName;
private int empAge;

public void SetEmployeeID(int id)
{
    empId = id; //Mutator
}

public void SetEmployeeSalary(int sal)
{
    empSalary = sal;  //Mutator
}

public int GetEmployeeID()
{
    return empId;  //Accessor
}

public int GetEmployeeSalary()
{
    return empSalary;  //Accessor
}

public string EmployeeName
{
    get { return empName; }   //Accessor
    set { empName = value; }  //Mutator
}

public int EmployeeAge
{
    get { return empAge; }  //Accessor
    set { empAge = value; } //Mutator
}

private void ShowDetails()
{
    HttpContext.Current.Response.Write(this.GetEmployeeID() + " : " + this.EmployeeName + " : " + this.EmployeeAge + " : " + this.GetEmployeeSalary());
}

public void ShowEmployeeDetails()
{
    ShowDetails();
}
} 
```

我的主要疑问是我在 Employee 中调用 ShowDetails() 方法的方式。这是隐藏方法 ShowDetails() 的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:25:51.110

从 OO 的角度来看，您的 ShowDetails 方法正在做两件非常不同的事情。

*   创建代表对象的字符串
*   将字符串输出到 HttpResponse。

现在第一个任务确实属于 Employee 类，您需要知道员工是什么才能创建代表对象的字符串。事实上，在 .net 中这是很常见的事情，实际上有一个名为 Object.ToString() 的“可覆盖”或“虚拟”函数。

第二个任务与 Employee 类完全无关，与字符串和 HttpResponse 有很多关系（在这种情况下，我们如何获取 HttpResponse，即从 HttpContext 获取它，这意味着我们必须在网络服务器上在 HttpRequest 中）。有了所有这些假设，在通用“数据”或“域”类中是极其不安全的。

这就是我将如何重构它。

```
class Employee
{
    private int empId;
    private int empSalary;
    private string empName;
    private int empAge;

    public void SetEmployeeID(int id)
    {
        empId = id; //Mutator
    }

    public void SetEmployeeSalary(int sal)
    {
        empSalary = sal;  //Mutator
    }

    public int GetEmployeeID()
    {
        return empId;  //Accessor
    }

    public int GetEmployeeSalary()
    {
        return empSalary;  //Accessor
    }

    public string EmployeeName
    {
        get { return empName; }   //Accessor
        set { empName = value; }  //Mutator
    }

    public int EmployeeAge
    {
        get { return empAge; }  //Accessor
        set { empAge = value; } //Mutator
    }

    public override string ToString()
    {
        return this.GetEmployeeID() + " : " + 
            this.EmployeeName + " : " + 
            this.EmployeeAge + " : " + 
            this.GetEmployeeSalary();
    }

} 
```

和

```
public partial class _Default : System.Web.UI.Page
{
    Employee emp;

    protected void Page_Load(object sender, EventArgs e)
    {
        emp = new Employee();
        emp.SetEmployeeID(001);
        emp.SetEmployeeSalary(5000);
        emp.EmployeeName = "Rob";
        emp.EmployeeAge = 26;

        showBtn.Click += new EventHandler(showBtn_Click);
    }

    void showBtn_Click(object sender, EventArgs e)
    {
        HttpContext.Current.Response.Write(emp.ToString());
    }
} 
```

因为我们确定网页中有一个有效的 HttpContext.Current。因此，员工无需了解互联网，同样能够在 WinForm 应用程序上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T06:52:07.500

我认为您的主要疑问是一个很好的疑问。您的员工对象正在承担它可能不应该拥有的职责，例如写入 HttpContext。如果此输出字符串很常见，您可能会覆盖 .NET 中的 ToString 运算符，删除 ShowDetails，然后在单击按钮时添加：

```
HttpContext.Current.Response.Write(emp.ToString()) 
```

# javascript - 如何在 Ext Js 4 中设置 TinyMce 编辑器的高度？

> ID：14723127
> 
> 赞同：1
> 
> 时间：2013-02-06T06:43:45.033
> 
> 标签：javascript, extjs, tinymce

我正在使用带有 Ext Js 4.1 的 TinyMce 编辑器。它工作正常，但问题是最初的高度比我在视图中指定的要高，但是在更改选项卡两次后它看起来很好。谁能猜出身高有什么问题？

**供您参考**：不止一个 TinyMce 编辑器对象，并且都在模型窗口中，具有 100% 锚点的锚点布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:28:34.673

看起来你应该设置

```
 width: 600,
        height: 500, 
```

对编辑器本身：

```
 items: [
            {
                xtype: "tinymce",
                tinymceSettings: {
                    theme : "advanced",
                    ...
                    width: 600,
                    height: 500,
                    ...
                },
                value: "<h1>Demo</h1><p>Ext.ux.TinyMCE works...</p>"
            } 
```

# jquery - 如果选中任何复选框，则向下滑动一个 div，反之亦然

> ID：14723130
> 
> 赞同：0
> 
> 时间：2013-02-06T06:43:52.490
> 
> 标签：jquery, checkbox, slidetoggle

我的网站上有一点 PM 功能。我希望用户能够删除消息。我还有 jQuery 脚本，当你选中一个复选框时，它会显示你可能想要执行的功能（删除、存档和那些东西）。

```
$('.checkbox').change(function(){
    var c = this.checked ? '400' : '200';
    $('#functions').slideToggle(c);
}); 
```

我从stackoverflow上的另一个问题中得到它。但是现在，如果我有很多消息，那么我将有尽可能多的复选框。如果我检查第一个，则会显示功能。但是当我检查第二个时，它再次向上滑动。所以我不能使用slideToggle()，我想不出任何其他的方法来做到这一点。

如果您选中某些复选框，我要做的是向下滑动（显示）功能，然后当您取消选中它们时，它应该再次向上滑动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:15:54.500

你可以试试这个：http: [//jsfiddle.net/e4Gjj/2/](http://jsfiddle.net/e4Gjj/2/)

```
$('.checkbox').change(function(){
    var idx = $(this).index()-1;
    $('div.functions').children('div').eq(idx).slideToggle(400);  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:58:04.823

尝试使用动画：

```
$(function() {
    $(":checkbox").change(function(){
        if($(this).is(':checked')) {
            $("#functions").animate({"width":"400px"});
        } else {
            $("#functions").animate({"width":"300px"});
        }
    });
}); 
```

看到这个 JSFiddle：http: [//jsfiddle.net/nthef/16/](http://jsfiddle.net/nthef/16/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:49:15.810

你的意思是：

```
$('.checkbox').filter(":checked").length ? 
     $('#functions').slideDown() : $('#functions').slideUp(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T06:55:54.900

使用`slideUp`并`slideDown` 尝试这个

```
 $('.checkbox').change(function(){
   if(this.checked){
      $('#functions').slideDown(400)
   }else{
      $('#functions').slideUp(200)
   }

}); 
```

# c# - 在漫游设置中存储复杂数据类型

> ID：14723132
> 
> 赞同：5
> 
> 时间：2013-02-06T06:43:54.677
> 
> 标签：c#, exception-handling, windows-store-apps, roaming

**我想要什么**：我正在尝试在漫游设置中存储复杂的数据类型。这就是我的对象的样子：

```
public abstract class Query
{
    [DataMember]
    public Cube Cube { get; private set; }

    [DataMember]
    public List<Filter> Filters { get; private set; }
    [DataMember]

    public Slicer Slicer { get; set; }
} 
```

**有什么问题**：

```
Query q = ...;
RoamingSettings.Values["query"] = q; 
```

给出一个错误：

> 不支持数据类型

**我尝试过**：将 Query 类的不同成员存储在复合设置的不同字段中。但是Query类的数据成员又是不同类的对象，因此不能存储在composite.Values["setting"]中。

请参考： [windows 8 app 自定义类漫游存储](https://stackoverflow.com/questions/13473136/windows-8-app-roaming-storage-with-custom-class)。这个问题是通过使用复合设置来回答的，但不适用于我的。

我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:20:17.633

安库什，

看起来您正试图将一组自定义对象推入 RoamingSettings，这并不是它的本意。本地/漫游设置通常存储在注册表中，用于简单的名称-值对。

怎么样 - 你把你的整个对象模型和扁平化存储为一个文件？这样，您可以在需要时轻松地序列化/反序列化您的数据并在您的应用程序中对您的对象模型进行水合/脱水。此外，可以将扁平化的内容保存在漫游文件夹中，以便在多个用户设备之间进行同步。只需根据需要注释您的自定义对象属性并使用 DataContractSerializer 来展平/取消展平您的数据并将 XML 文件保存在漫游文件夹中。只是不要依赖即时云同步；Windows 将随机同步漫游文件夹中的文件。

这个 MSDN 快速入门应该会有所帮助：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700362.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700362.aspx)

谢谢！

# ruby-on-rails - Ruby 中有没有办法使用 public_methods 设置类成员的值

> ID：14723133
> 
> 赞同：1
> 
> 时间：2013-02-06T06:44:09.227
> 
> 标签：ruby-on-rails, ruby

我想使用`public_methods`列表设置类成员的值。但是在下面给出的代码中，“className.member”将不起作用，因为“.member”不是`ClassName`类的成员。

ruby 有没有办法以这种方式设置成员的值？

下面的代码：

```
 membersArray = className.public_methods
  membersArray.each {|x|
      member = x.to_s
      className.member = "some value"
    end

  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T06:47:21.837

```
foo.bar = 1 
```

这一行本质上是`bar=`使用参数调用方法`1`。

```
foo.bar=(1) 
```

您可以使用方法动态调用`send`方法

```
foo.send "bar=", 1 
```

因此，您的代码应重写为

```
className.send "#{x}=", 'some value' 
```

# post - S3 POST 上传最小策略

> ID：14723140
> 
> 赞同：6
> 
> 时间：2013-02-06T06:44:33.953
> 
> 标签：post, amazon-web-services, amazon-s3

我已经成功创建了一个简单的 HTML 表单，它将上传的文件发布到我的 Amazon S3 存储桶。我按照以下说明操作： [http](http://aws.amazon.com/articles/1434)

://aws.amazon.com/articles/1434 现在我正在尝试为可以执行 HTML 表单 POST 的用户创建最小策略。

这是设置：

```
userID: s3-uploader<br/>
ACCESS-KEY-ID: AXAXAXAXAXAXAXAXAXAX 
```

这是 HTML 表单：

```
<!DOCTYPE html>
<html>
<head>
    <title>S3 POST Form</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<form action="https://<cname-for-upload-bucket>/" method="post" enctype="multipart/form-data">
    <input type="hidden" name="key" value="foo/${filename}">
    <input type="hidden" name="AWSAccessKeyId" value="AXAXAXAXAXAXAXAXAXAX">
    <input type="hidden" name="acl" value="private">
    <input type="hidden" name="success_action_redirect"
           value="https://s3.amazonaws.com/<bucket-01-name>/upload-success.html">
    <input type="hidden" name="policy"   
value="eyJleHBpcmF0aW9uIjogIjIwMTQtMTItMTNUMDA6MDA6MDBaIiwKICAgICJjb25kaXRpb25zIjogWwogICAgICAgIHsiYnVja2V0IjogInMzLXVwLmdyaWR3YXJkLm5ldCJ9LAogICAgICAgIFsic3RhcnRzLXdpdGgiLCAiJGtleSIsICJwZWQvIl0sCiAgICAgICAgeyJhY2wiOiAicHJpdmF0ZSJ9LAogICAgICAgIHsic3VjY2Vzc19hY3Rpb25fcmVkaXJlY3QiOiAiaHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL2dkd2QvdXBsb2FkLXN1Y2Nlc3MuaHRtbCJ9LAogICAgICAgIFsic3RhcnRzLXdpdGgiLCAiJENvbnRlbnQtVHlwZSIsICIiXSwKICAgICAgICBbImNvbnRlbnQtbGVuZ3RoLXJhbmdlIiwgMCwgMTA0ODU3Nl0KICAgIF0KfQ==">
    <input type="hidden" name="signature" value="WnbMCo0OY7g8oYkfxrVb8np4l94=">
    <input type="hidden" name="Content-Type" value="image/jpeg">
    <!-- Include any additional input fields here -->

    File to upload to S3:
    <input name="file" type="file">
    <br>
    <input type="submit" value="Upload File to S3">
</form>
</body>
</html> 
```

...然后我有这是表单隐藏输入“策略”的未编码版本：

```
{"expiration": "2014-12-13T00:00:00Z",
    "conditions": [
        {"bucket": "<cname-for-upload-bucket>"},
        ["starts-with", "$key", "foo/"],
        {"acl": "private"},
        {"success_action_redirect": "https://s3.amazonaws.com/<bucket-01-name>/upload-success.html"},
        ["starts-with", "$Content-Type", ""],
        ["content-length-range", 0, 1048576]
    ]
} 
```

当 userId: s3-uploader 具有以下策略时，这一切都有效：

```
{
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:*",
      "Resource": "*"
    }
  ]
} 
```

...但是如果我将策略更改为更明确的内容，但看起来仍然合理，我会从完全相同的 HTML 表单帖子中收到一条 <AccessDenied/> 消息。

这是我尝试过的更严格的政策：

```
{
    "Statement": [
        {
            "Sid": "AllowS3uploader",
            "Action": [
                "s3:ListAllMyBuckets",
                "s3:ListBucket",
                "s3:PutBucketAcl",
                "s3:PutBucketPolicy",
                "s3:PutObject",
                "s3:PutObjectAcl"
            ],
            "Effect": "Allow",
            "Resource": "arn:aws:s3:::<cname-for-upload-bucket>",
            "Principal": {
                "AWS": [
                    "arn:aws:iam::756342427722:user/s3-uploader"
                ]
            }
        }
    ]
} 
```

我已经阅读了这里的文档，但没有获得额外的清晰度：
[http](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingIAMPolicies.html)

://docs.aws.amazon.com/AmazonS3/latest/dev/UsingIAMPolicies.html 所以我问我的溢出者，我错过了什么？我真的不希望s3-uploader userId 能够对存储桶执行任何操作（即's3：*'）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-26T23:19:53.197

您在 Resource 部分中使用的 ARN 错误，您必须使用实际存储桶名称而不是 CNAME 条目。

# asp.net-mvc - 带参数的 MVC 重定向操作

> ID：14723146
> 
> 赞同：8
> 
> 时间：2013-02-06T06:44:55.140
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我们如何在redirecttoaction中传递参数和区域

```
return RedirectToAction("Index","Coupon1", 
                          new {Area = "Admin"},
                          new {id = currentcoupon.Companyid.id}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T06:51:14.500

```
return RedirectToAction("Index", new { id = currentcoupon.Companyid.id, Area="Admin" }); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-31T08:00:37.067

我没有足够的声誉来添加评论或进行更改，因此我将添加此作为答案。标记的答案不能充分解释答案，并且会使一些人感到困惑。它假定一个默认的家庭控制器，因为它没有明确说明控制器，并且当为该区域定义另一个控制器时，它不会适用于所有情况。重定向有很多重载，但实现既定目标的最简单的重载形式是：

```
return RedirectToAction("Action", "Controller", new { id=YourId, Area="AreaName" }); 
```

这篇文章的其他答案正确地重写了原始代码，但也没有引起您在大多数情况下需要指定控制器的注意。

匿名对象充当 MVC 路由映射器的包，用于映射您可能希望包含在重定向中的所有路由值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-16T09:39:41.147

如果您需要从注册在区域中的控制器重定向到没有区域的控制器，则必须将区域值设置为空，如下所示：

```
return RedirectToAction("Welcome", "Home", new { Area="" }); 
```

如果没有 Area=""，您将无法重定向到其他控制器。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-06T06:47:31.223

只需将您的参数添加到包含您的区域的同一对象。

```
return RedirectToAction("Index","Coupon1", 
                        new {Area = "Admin", id = currentcoupon.Companyid.id}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-26T18:12:23.413

如果有人已经使用模型来传递数据，例如：

```
return RedirectToAction("actionName","ControllerName", model); 
```

您可以`Area`在模型中包含属性并使用您要使用的任何区域对其进行初始化，
例如：

```
public class ViewModel
{
    public ViewModel()
    {
        Area = "";
    }

    public string Area { get; set; }
    public string OtherProperty { get; set; }
}

var model = new ViewModel 
{
    Area="myArea",
    OtherProperty="other data"
}

return RedirectToAction("actionName","ControllerName", model); 
```

# html - 单击覆盖下方

> ID：14723148
> 
> 赞同：-1
> 
> 时间：2013-02-06T06:45:06.260
> 
> 标签：html, css

我有一个可在覆盖下方点击的链接。有人可以帮助我，因为我希望在显示叠加层时链接不可点击。？？。实现在 asp.Net mvc4 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:19:03.067

在某些浏览器中，覆盖层上的 CSS 命令可能是：`pointer-events:none`.. 也许它也适用于您的情况..

# iphone - EAOutputStream write:maxLength: - 230 写入失败，因为流没有可用空间

> ID：14723156
> 
> 赞同：4
> 
> 时间：2013-02-06T06:45:34.020
> 
> 标签：iphone, ios, external-accessory

我正在使用这个。在我将 iphone 升级到 IOS 6.1 之前它运行良好。

```
[[session_ipos outputStream] write:ui8Buff maxLength:tot]; 
```

现在它给出一个错误消息：

> 错误 - /SourceCache/ExternalAccessory/ExternalAccessory-213/EAOutputStream.m:-[EAOutputStream write:maxLength:] - 230 写入失败，因为流没有可用空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-05T22:52:08.263

尝试在 UI 线程中编写

```
EASession _session

InvokeOnMainThread (() => { 
   _session.OutputStream.Write(byteArray);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T13:25:49.690

我能够在 Demo 的帮助下解决这个问题

[http://developer.apple.com/library/ios/#samplecode/EADemo/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/EADemo/Introduction/Intro.html)

我改变了尝试访问外部附件和相关功能的方式。

# dll - ATL::CWindowImpl ::创建访问冲突

> ID：14723157
> 
> 赞同：0
> 
> 时间：2013-02-06T06:45:35.110
> 
> 标签：dll, project, atl

我使用 ATL 创建了一个简单的 DLL 项目，代码如下：

```
class main_window : 
    public wtlext::LayeredWindow<ATL::CWindowImpl<main_window>, bool>,
    public CVWModule,
    public IPropertyObserver
{
// Construction
public:
    main_window();
    ~main_window();

    HWND Create(HWND hWndParent)
    {
        ATL::CWindowImpl<main_window>::Create(hWndParent, rcDefault, NULL,
            WS_POPUP | WS_VISIBLE,
            WS_EX_TOPMOST | WS_EX_TOOLWINDOW | WS_EX_LAYERED);

        return m_hWnd;
    };
} 
```

字符是 unicode 并且 runtimelibrary 是 MDd

异常警告：代码 0xC0000005 类型：访问冲突 描述：线程试图读取或写入虚拟地址，但它没有适当的访问权限。exe中的0x76fe8dc9处最可能的异常: 0xC0000005: 写入位置0x00000014时访问发生冲突</p>

给您带来不便，第一次在这里发帖，请见谅。
我发现 exe 使用了 CAPPMODULE ，此外我发现项目使用了 WTL。在 DLL 主 CPP 下方。` //#include "stdafx.h" //#include "iconized.h" //#include "iconizedDlg.h"

```
// #define UNICODE
// #define _UNICODE 

CAppModule _Module;

HINSTANCE hDll_Instance;
HWND hWnd;

extern "C" BOOL WINAPI DllMain( HMODULE hModule,
    DWORD  ul_reason_for_call,
    LPVOID lpReserved
    )
{

    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        {

            hDll_Instance = (HINSTANCE)hModule;

            //ShowWindow();
        }
        break;
    case DLL_THREAD_ATTACH:
        {

        }

        break;
    case DLL_THREAD_DETACH:

        break;
    case DLL_PROCESS_DETACH:{

        ;
                            }
                            break;
    }
    return TRUE;
}

 int WINAPI Iconized_tWinMain(HINSTANCE hInstance, HINSTANCE /*hPrevInstance*/, LPTSTR lpstrCmdLine, int nCmdShow)
 {
    //AtlAxWinInit();
    Gdiplus::GdiplusStartupInput gdiplusStartupInput; 
    ULONG_PTR gdiplusToken; 
    int nRet = -1;

    // this resolves ATL window thunking problem when Microsoft Layer for Unicode (MSLU) is used
    ::DefWindowProc(NULL, 0, 0, 0L);

    // create VW module window as soon as we can
    iconized::main_window *pMainWnd = new iconized::main_window;
    assert(pMainWnd != 0);

    // Init module (ATL magic starts here)
    HRESULT  hRes = _Module.Init(NULL, hInstance);
    ATLASSERT(SUCCEEDED(hRes));

    AtlInitCommonControls(ICC_COOL_CLASSES | ICC_BAR_CLASSES);  // add flags to support other controls

    // Init GDI+
    Gdiplus::GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL);

    // create main window
    if(pMainWnd->Create(0) == NULL)
    {
    ATLTRACE(_T("Main window creation failed!\n"));
    return 0;
    }

    pMainWnd->ShowWindow(nCmdShow);

    // Run main message loop
    CMessageLoop theLoop;
    _Module.AddMessageLoop(&theLoop);

    nRet = theLoop.Run();

    _Module.RemoveMessageLoop();

    // main window must be destroued before GDI+ is shutdown 
    // in order to release its resources properly
    pMainWnd->Destroy();

    // Finalize GDI+
    Gdiplus::GdiplusShutdown(gdiplusToken);

    _Module.Term();

    delete pMainWnd;

//#ifdef USE_MEMTRACK
//    std::stringstream s;
//    MemTrack::TrackDumpBlocks(s);
//    ::MessageBox(0, s.str().c_str(), "Memblocks", MB_OK);
//#endif

     return 0;
 } 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:22:54.513

这个问题已经解决了，原因是没有调用InitializeCriticalSection(...)；因为我使用了loadlibrary(*.dll)，导致全局变量（_AtlWinModule，_AtlBaseModule，_AtlComModule后面被ATL组件使用）未初始化. 所以在这种情况下，将 _CRT_INIT 添加到 DLLMain 可以克服访问问题，crt_INIT 函数可以帮助初始化相关的全局变量。喜欢 ：

```
DLLMain增加_CRT_INIT (ul_reason_for_call)
 {
 case DLL_PROCESS_ATTACH:
  {
   //_CRT_INIT(hModule,ul_reason_for_call,lpReserved);} 
```

# php - 如何使音频播放器在循环中正常工作？

> ID：14723160
> 
> 赞同：-2
> 
> 时间：2013-02-06T06:45:45.313
> 
> 标签：php, javascript, jquery, html, jplayer

我有一个 jplayer 音频播放器，显然它可以播放音频。现在我遇到的问题是，我正在遍历每个问题，一个问题可以有一个、多个或没有音频可以播放。

每个音频都有自己的音频播放器。但是下面这段代码发生的情况是，如果我播放一个音频播放器，其余的其他音频播放器也会播放，它最终会播放所有音频播放器。如何解决此问题，以便如果我播放音频播放器，它只播放和控制该音频播放器？

下面是循环播放每个音频播放器的代码：

```
 //start:procedure audio
        $aud_result = '';
        if(empty($arrAudioFile[$key])){
          $aud_result = '&nbsp;';
        }else{

$j = 0;
foreach ($arrAudioFile[$key] as $a) { 

        $info = pathinfo('AudioFiles/'.$a); 
?>

<script type="text/javascript">   
    $(document).ready(function(){
  $("#jquery_jplayer_1-<?php echo $key.'-'.$j; ?>").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        <?php echo $info['extension'];?>: "<?php echo "AudioFiles/".$a; ?>"
      });
    },
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "<?php echo $info['extension'];?>"
  });
}); 
</script>
  <div id="jquery_jplayer_1-<?php echo $key.'-'.$j; ?>" class="jp-jplayer"></div>
  <div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div class="jp-gui jp-interface">
        <ul class="jp-controls">
          <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
          <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
          <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
          <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
          <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
          <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
        <div class="jp-volume-bar">
          <div class="jp-volume-bar-value"></div>
        </div>
        <div class="jp-time-holder">
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <ul class="jp-toggles">
            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
<?php $j++; 
}

}
//end:procedure audio
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:31:53.007

我现在不能完全运行你的例子，但从它的样子来看，你正在通过循环浏览服务器端的所有音频文件并写出一堆 html/js 在同一页面上加载多个 jPlayer 实例到页面。

我使用 jPlayer 已经有一段时间了，如果我记错了，请原谅，但可能有一些内置功能允许您在其中排队音频文件。

如果我错了，您可以通过使用在音频文件开始/结束时触发的一些提供的事件轻松复制此功能。基本上，使用音频文件的 URL 创建某种 Javascript 数组。开始播放列表中的第一个音频文件。当该文件完成播放时，jPlayer 应该触发某种完成事件。发生这种情况时，将其从您的列表中删除并继续下一个。

这应该可以防止您的歌曲在彼此之上播放，并允许您以您喜欢的任何顺序播放它们。

请记住，您应该只使用您的 PHP 代码来创建 URL 的 JS 列表，或者通过将 JS 写到屏幕上，或者通过某种 AJAX 调用来检索 URL。现在看起来你正在做的是循环遍历你的 HTML 并创建许多不同的 jPlayer 实例，这些实例都在彼此之上播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T21:59:25.597

这是我复制和测试的解决方案：

```
 //start:procedure audio
        $aud_result = '';
        if(empty($arrAudioFile[$key])){
          $aud_result = '&nbsp;';
        }else{

$j = 0;
foreach ($arrAudioFile[$key] as $a) { 

        $info = pathinfo('AudioFiles/'.$a); 
?>

<script type="text/javascript">   
    $(document).ready(function(){

$("#jquery_jplayer-<?php echo $key.'-'.$j; ?>").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        <?php echo $info['extension'];?>: "<?php echo "AudioFiles/".$a; ?>"
      });
      $(this).bind($.jPlayer.event.play, function() { 
          $(this).jPlayer("pauseOthers");
        });
    },
    cssSelectorAncestor: "#jp_container_<?php echo $key.'-'.$j; ?>",
    cssSelectorAncestor: "#jp_interface_<?php echo $key.'-'.$j; ?>",
    solution:"flash,html",
    swfPath: "jquery",
    supplied: "<?php echo $info['extension'];?>"
});
}); 
</script>
  <div id="jquery_jplayer-<?php echo $key.'-'.$j; ?>" class="jp-jplayer"></div>
  <div id="jp_container_<?php echo $key.'-'.$j; ?>" class="jp-audio">
    <div class="jp-type-single">
      <div class="jp-gui jp-interface" id="jp_interface_<?php echo $key.'-'.$j; ?>">
        <ul class="jp-controls">
          <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
          <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
          <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
          <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
          <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
          <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
        <div class="jp-volume-bar">
          <div class="jp-volume-bar-value"></div>
        </div>
        <div class="jp-time-holder">
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <ul class="jp-toggles">
            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
<?php $j++; 
}

}
//end:procedure audio
?> 
```

# c# - 如何根据gridview中的eval更改项目模板中的显示文本？

> ID：14723162
> 
> 赞同：2
> 
> 时间：2013-02-06T06:45:46.843
> 
> 标签：c#, asp.net

我有一个 GridView，并且有一个名为 status 的列。在显示此列中的值时，我使用了 itemtemplate。目前，它显示 EVAL 的值的结果，但我想根据 eval 的值显示文本。

```
 <asp:GridView ID="GridView1" runat="server"/>
 <Columns>
    <asp:TemplateField HeaderText="Status">
       <ItemTemplate>
        <%# Eval("ICB_SUBS_STATUS")%>
       </ItemTemplate>
       <EditItemTemplate>
           <asp:DropDownList ID="DropDownList1"  runat="server" SelectedValue='<%# Eval("ICB_SUBS_STATUS")%>'>
           <asp:ListItem Value = '0'>Applet not installed.</asp:ListItem>
           <asp:ListItem Value = '1'>ICB Service not activated. Applet installed.</asp:ListItem>
           <asp:ListItem Value = '2'>Active ICB Subscriber. Applet installed.</asp:ListItem>
           <asp:ListItem Value = '3'>Subscriber deactivated ICB. Applet installed.</asp:ListItem>
           </asp:DropDownList>
       </EditItemTemplate>
    </asp:TemplateField>
 </Columns>
</asp:GridView> 
```

与上述情况一样，在编辑模板上，下拉列表文本根据值显示。另外，我想在gridview的正常显示上显示文本。任何想法和建议都会非常有帮助！！对不起，如果我的英语很差！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T07:12:30.887

在后面的代码中创建一个方法，将该值转换为人类可读的字符串。

```
protected string Translate_ICB_SUBS_STATUS(int ICB_SUBS_STATUS)
{
    switch (ICB_SUBS_STATUS)
    {
        case 0:
             return "Applet not installed.";
        case 1:
             return "ICB Service not activated. Applet installed.";
        ...

    }
} 
```

然后在您的绑定中，使用该方法

```
<ItemTemplate>
<%# this.Translate_ICB_SUBS_STATUS(Int32.Parse(Container.DataItem("ICB_SUBS_STATUS").ToString())) %>
</ItemTemplate> 
```

# windows-phone-8 - 在 Windows Phone 8 中存储配置值/设置的最佳方式

> ID：14723166
> 
> 赞同：5
> 
> 时间：2013-02-06T06:46:23.550
> 
> 标签：windows-phone-8, windows-phone

由于在 WP8 应用程序中没有默认配置文件，存储配置值的最佳方式是什么，例如 WCF 服务 URL、用户名和密码。我希望这些值在手机重新启动和应用程序关闭时可用且可更新。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T08:14:45.930

你应该使用`IsolatedStorageSettings.ApplicationSettings`.

**保存一个值：**

```
IsolatedStorageSettings appSettings = IsolatedStorageSettings.ApplicationSettings;
appSettings.Add("email", "someone@contoso.com");
appSettings.Save(); 
```

**加载一个值：**

```
IsolatedStorageSettings appSettings = IsolatedStorageSettings.ApplicationSettings;
string val = (string)appSettings["email"]; 
```

请参阅此处的 MSDN 教程：[如何：使用独立存储存储和检索应用程序设置](http://msdn.microsoft.com/en-us/library/cc221360%28v=vs.95%29.aspx)。这是一个桌面 Silverlight 教程，但它在 Windows Phone 中的工作方式相同。

**编辑：**

`IsolatedStorageSettings.ApplicationSettings`如果您的应用程序使用后台代理（**感谢@RichardSzalay 提供信息**） ，使用可能会出现问题。

如果您的代理只读取，`IsolatedStorageSettings.ApplicationSettings`建议使用 Mutex。

来源：[Windows Phone 后台代理最佳实践](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202944%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:51:28.263

我搜索了很多解决方案，我发现这个是最好的：

[http://msdn.microsoft.com/en-us/library/ff769510(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff769510(v=vs.92).aspx)

干杯

# java - 自定义异常问题

> ID：14723168
> 
> 赞同：0
> 
> 时间：2013-02-06T06:46:26.420
> 
> 标签：java, exception

我创建了一个自定义异常类，如下所示

```
public class CustomException extends Exception{
// some code here
} 
```

现在我有一段代码如下

```
File file = new File("some_file_path");
try {
    FileOutputStream outputStream = new FileOutputStream(file);
} catch (CustomException e) {
    e.printStackTrace();        
} 
```

但是编译器显示错误**Unhandled exception type FileNotFoundException**

我的意思是编译器不明白我通过 CustomException 捕获 FileNotFoundException 吗？

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T07:04:05.893

`FileNotFoundException`是`IOException`异常的子类的子类。

分层 -

```
java.lang.Throwable
    java.lang.Exception
        java.io.IOException
            java.io.FileNotFoundException 
```

并且`CustomException`是`Exception`层次结构的子类 -

```
java.lang.Throwable
    java.lang.Exception
        java.io.CustomException 
```

很明显`CustomException`，它不在 Exception 链中，它既不是超类，`IOException`也不 `FileNotFoundException`是你不能赶上`FileNotFoundException`的原因`CustomException`。

`FileNotFoundException`但是您可以使用`IOException`和except`Exception`来捕捉。`Throwable``FileNotFoundException`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T06:49:34.207

编译器理解的是`FileNotFoundException`并且`CustomException`是两个不同的异常。您需要捕获两个异常，例如：

```
File file = new File("some_file_path");
try {
    FileOutputStream outputStream = new FileOutputStream(file);
    // do some operation
    // if some cond is not satisfied
    // throw new CustomException("Error Message");
} catch (CustomException | FileNotFoundException e) { // syntax valid if you are using java 7, otherwise write one more catch block
    e.printStackTrace();        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T06:48:56.813

`CustomException`只是与 不同的类型`FileNotFoundException`，所以这是不行的。

基本上你可以输入：

```
} catch (T e) {
} 
```

where`T`必须是可从 type 的值分配的类型`FileNotFoundException`，即相同或更通用（超类）类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:11:23.493

为什么您希望您的 CustomException 类捕获 FileNotFoundException？`FileNotFoundException Class is extended by IOEXception class (IOException is extended by Exception Class)`，您的 CustomException 类仅扩展 Exception 类，它是 FileNotFoundException 和 Exception 类的超类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T07:00:04.380

这是[`FileOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File%29)with `File`as 参数的签名：

```
public FileOutputStream(File file) throws FileNotFoundException 
```

`FileNotFoundException`是一个[**检查异常**](http://en.wikipedia.org/wiki/Exception_handling#Checked_exceptions)，这意味着它必须被显式处理（捕获/抛出）。你正在捕捉`CustomException`而不是你**必须**捕捉/抛出的东西（在这种情况下`FileNotFoundException`）。此外，`FileOutputStream`is属于`IOException`子类，而`CustomException`is属于`Exception`子类。层级之间`CustomException`和`IOException`层级之间没有关系。

# gwt - 减少gwt中标签和列表框之间的空间

> ID：14723170
> 
> 赞同：0
> 
> 时间：2013-02-06T06:46:27.407
> 
> 标签：gwt, uibinder, gwt2

![快照有一个标签和一个列表框 nxt](../Images/b0046daefb8897e309d93b3d5f067a65.png)

环境是一个标签，旁边是一个水平面板中的列表框。我怎样才能减少这两者之间的空间？我尝试将间距设置为 0 它似乎不起作用。

有什么方法可以在不使用标签的情况下添加标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:17:28.963

如果您将 gwt 与 UIBinder 一起使用，那么您可以使用 css 设置间距。要进行实验，请在浏览器中单击鼠标右键并“检查元素”，然后尝试使用边距、填充等，直到看起来正确。然后，您可以使用 label.setStyle("bla-bla") 在 gwt 中的元素上设置一个类，并在样式表中设置边距/填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:56:56.570

干得好

水平面板将创建一个表格，如果您在面板上指定宽度，该宽度小部件将共享相等的空间。

所以

设置显示类型`block`，使它们在整个宽度上并排排列

```
 HorizontalPanel panel  = new HorizontalPanel();
    panel.setWidth("70%");
    panel.getElement().getStyle().setDisplay(Display.BLOCK);
    panel.add(new Label("Lable"));
    panel.add(listbox);
    RootPanel.get().add(panel); 
```

# python - 从 for-loop 的列表中删除。Python

> ID：14723171
> 
> 赞同：-1
> 
> 时间：2013-02-06T06:46:30.080
> 
> 标签：python, list, function, for-loop

```
my_list = [0,1,2,3,4,5,6,7,8,9,10]

for k in my_list:

    if k > 6:
        #delete k 
```

`k`如果它大于某个值，如何从列表中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T06:48:44.840

您不应该更改您正在迭代的列表，只需创建一个新列表并将其分配给一个变量：

```
my_list = [k for k in my_list if k <= 6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T06:50:28.277

要从 a 中删除元素，`list`您可以使用该`remove`方法。但是您必须考虑到在迭代`list`结束时删除元素会导致未定义的行为。例如：

```
>>> L = [1,2,3,4,5]
>>> for x in L:
...     L.remove(x)
... 
>>> L   #should be empty
[2, 4] 
```

如果你想避免这种情况，你可以`list`使用列表理解创建一个新的，或者简单地迭代列表的副本：

```
>>> L = range(10)
>>> [x for x in L if x <= 6]
[0, 1, 2, 3, 4, 5, 6]
>>> for x in L[:]:
...     if x > 6:
...             L.remove(x)
... 
>>> L
[0, 1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:51:05.617

我将在最后开始循环，它不会移动索引：

```
my_list = [0,1,2,3,4,5,6,7,8,9,10]

for k in my_list[::-1]:

    if k > 6:
        del k 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:00:33.850

如果要删除列表中所有大于指定值的元素。您可以使用排序和切片。

我建议使用 set 而不排序或删除或等等等等......：P

```
a = [3,1,2,4,5,6,8,9,0,7] 
```

然后排序

```
a = a.sort() #a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
idx = a.index(6) #idx=6 
```

然后切片

```
a = a[0:idx] # a = [0, 1, 2, 3, 4, 5] 
```

或者替代方法是使用`set`. 使用您指定的限制创建另一个列表，`range`例如您想从中删除所有元素`4 to 8`

```
rm = xrange(4,8+1)

a = list(set(a) - set(rm)) # a = [0, 1, 2, 3, 9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T06:48:16.183

您可以使用列表推导。

```
k = [i for i in k if i <= 6] 
```

或者`filter`（注意在 Python 3 中它将返回一个`filter`对象，您可以将其转换为列表）

```
k = filter(lambda x: x <= 6, k) 
```

上述两个选项将做同样的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T06:48:49.870

尝试这个，

```
>>> my_list= [i for i in my_list if i <= 6]
>>> print my_list
[0, 1, 2, 3, 4, 5, 6]
>>> 
```

# iphone - 为什么我的子视图是我想要的大小的两倍？

> ID：14723175
> 
> 赞同：0
> 
> 时间：2013-02-06T06:46:33.783
> 
> 标签：iphone, uiscrollview, horizontalscrollview, addsubview

我正在将 a 添加`UIView`到`UIScrollView`. 这将是一个水平滚动视图，我想向它添加多个视图。显示的代码仅用于一个滚动视图，以使其简单。滚动视图在我的故事板中，我添加的视图是一个 .xib 文件。视图被添加，但它是我设置它的两倍大小。所以它是 640 x 244。滚动视图占据了我视图底部的 122 像素。.xib 是 320 x 122。我的 .xib 顶部只有一个大按钮，所以当我添加它时，我可以知道发生了什么。唯一的问题是，我添加到滚动视图的 .xib 是我想要的两倍大。我究竟做错了什么？？

如果需要更多信息，请告诉我。谢谢！

```
 BADAchievements *temporaryView = (BADAchievements *)[[[NSBundle mainBundle] loadNibNamed:@"BADAchievements" owner:self options:nil] objectAtIndex:0];

    CGRect f = temporaryView.frame;
    f.size.width = 320;
    temporaryView.frame = f;

    CGSize s = self.achievementScrollView.contentSize;
    s.width = f.origin.x + f.size.width;
    [self.achievementScrollView setContentSize:s];

    [self.achievementScrollView addSubview:temporaryView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:28:29.413

你把你的代码放在哪里，即你的视图控制器的哪个方法？

=> 您`temporaryView`和/或的最终帧`achievementScrollView`不一定由您在 NIB 中指定的尺寸定义！框架/边界可能会在以后重新调整大小（即当视图加载过程完成并且所有子视图都已布局时）。

因此，您应该检查您的子视图的`autoresizingMask`和`autoresizesSubviews`属性是否设置正确。（即自动调整大小）

查看关于自动调整大小等[的 iOS 视图编程指南。](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:51:05.290

尝试做一些这样的改变：

```
BADAchievements *temporaryView = (BADAchievements *)[[[NSBundle mainBundle] loadNibNamed:@"BADAchievements" owner:self options:nil] objectAtIndex:0];
CGRect f = temporaryView.frame;
CGRect f = CGRectMake(f.origin.x, f.origin.y, 320, f.size.height);
temporaryView.frame = f; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:03:21.613

我只是把它弄乱了一点。所以显然代码没问题，我只需要采用自动布局，然后我更改了 UIView 上的自动调整大小，因此它不会水平或垂直拉伸。感谢您的回复。

# graphviz - graphviz 两个盒子

> ID：14723177
> 
> 赞同：1
> 
> 时间：2013-02-06T06:46:39.773
> 
> 标签：graphviz

' 我正在尝试，并试图让一个长箭头指向两个框之间的线，请参阅下面的 Graphviz。我做错了什么？？

F

* * *

在这个 Graphviz 中：

```
<graphviz>

digraph W1
{
rankdir=LR
nodesep = 0.05
node [shape=box,  width="0.8", height="0.5", fontsize="10"];
edge [weight=5]
3,
edge [weight=1]
      4, 5, Nod1, 

node [shape = none];

node [shape = box];
        3 [label = "Compound 2"];
        4 [label = "Compound 1"];
        5 [label = "Compound 3"];

Nod1 [label="N1", shape=diamond,style=filled,label="",height=.01,width=.01] ;
{
3 -> Nod1 
4->Nod1
Nod1->5  

{
rank = same;
Nod1, 3,
}

}
</graphviz> 
```

# validation - EAR 文件和 ValidationMessages.properties

> ID：14723178
> 
> 赞同：0
> 
> 时间：2013-02-06T06:46:53.960
> 
> 标签：validation, jakarta-ee, ear

我们的应用程序有单独的 EAR 和 WAR 文件，我需要将`ValidationMessages.properties`文件打包到 EAR 文件中。

我尝试将它放在 EAR 文件内的 JAR 中（使用 bean 或在`lib`目录中的 JAR 中）或将其直接放在文件的根目录中，但没有成功（找不到文件）。

我应该将文件（或多种语言的文件）放在哪里？

**编辑**EAR 示例结构：

```
META-INF/
META-INF/application.xml
META-INF/build.properties
META-INF/MANIFEST.MF

doi-ejb.jar                      <-- Application's EJBs
lakshmi-ejb.jar                  <-- Framework EJB's
lakshmi-std-cmp-ejb.jar          <-- Framework EJB's

lib/
lib/config.jar
lib/doi-int-test-lib.jar
lib/doi-lib.jar
lib/doi-unit-test-lib.jar
lib/lakshmi-lib.jar
lib/lakshmi-std-cmp-lib.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:23:51.173

我认为，您必须将文件捆绑到**doi-ejb.jar**和 war 文件中。将其保存`WEB-INF/classes`在 WAR 和根文件夹的**doi-ejb.jar中。**您可以修改 ANT/build 脚本以在这两个位置复制相同的源文件。这样您就不会为此属性文件重复编码/维护工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:04:45.187

您是否尝试将`ValidationMessages.properties`文件放入**您的 WAR 文件**中的`WEB-INF/classes`文件夹中？

这是 Web 容器查找非打包资源的路径。

# c# - 从 Windows 应用程序提交网络表单

> ID：14723179
> 
> 赞同：0
> 
> 时间：2013-02-06T06:46:54.283
> 
> 标签：c#, windows, submit, webrequest

我是 C# 新手，我想开发一个 Windows 应用程序来自动化工作。

就像我有一个网络表单，用户总是去那个网站，他必须点击提交链接。所以我

想要让它自动化。我可以使用

第一种方法

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
      request.Referer = "http://referer.com";
      request.UserAgent = "Mozilla/5.0";
      response = (HttpWebResponse)request.GetResponse(); 
```

第二种方法

```
 Process proc = new Process();
         proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
         Process.Start("firefox.exe", "urlofform");
         Thread.Sleep(5000);
         SendKeys.SendWait("{TAB}");
         SendKeys.SendWait("{TAB}");            
         SendKeys.SendWait("~");
         Thread.Sleep(3000); 
```

在实际形式中，我有一个像这样的锚标签

我想通过使用 Windows 应用程序中的 C# 编码来自动单击锚点，我该如何实现这一点？.....那是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:52:52.850

您可以查看一些 Web 测试框架，例如 WatiN： http: [//www.codeproject.com/Articles/17064/WatiN-Web-Application-Testing-In-NET](http://www.codeproject.com/Articles/17064/WatiN-Web-Application-Testing-In-NET)

# java - 无法打开端口

> ID：14723188
> 
> 赞同：0
> 
> 时间：2013-02-06T06:47:14.500
> 
> 标签：java, dll, jna

> 我在运行程序时调用库本机函数 OpenSSPComPortUSB() 弹出无法打开端口 \.\COM208。为什么它返回 \.\COM208 因为我已经通过 PortNumber =7; 下面是 Java 代码，我的目标是打开端口 COM7 以启动与 smart hoper 的串行通信。

```
 //  AccessITLLib.java

   public class AccessITLLib
    {

       public static class SSP_COMMAND extends Structure
       {
           SSP_FULL_KEY Key;
            public NativeLong BaudRate;
            public byte PortNumber;
                    public NativeLong Timeout;
                    public byte SSPAddress;
                    public byte RetryLevel;
                    public byte EncryptionStatus;
                    public byte CommandDataLength;
                    public byte[] CommandData = new byte[255];
                    public byte ResponseStatus;
                    public byte ResponseDataLength;
                    public byte[] ResponseData = new byte[255];
                    public byte IgnoreError;

       }

       public interface ITLLib extends Library
       {
           ITLLib INSTANCE = (ITLLib) Native.loadLibrary("ITLSSPproc",
                   ITLLib.class);

           public int OpenSSPComPort(SSP_COMMAND p);
           public int OpenSSPComPortUSB(SSP_COMMAND p);
           public int CloseSSPComPort();
           public int CloseSSPComPortUSB();
       }

       public static void main(String[] args)
       {
          SSP_COMMAND commandStruct = new SSP_COMMAND();
          commandStruct.BaudRate = new NativeLong(9600);
          commandStruct.PortNumber =7;
          commandStruct.Timeout = 500;
          commandStruct.RetryLevel = 3;
          commandStruct.IgnoreError = 1;
          commandStruct.SSPAddress =16;

          ITLLib.INSTANCE.CloseSSPComPort();
          ITLLib.INSTANCE.CloseSSPComPortUSB();
          ITLLib.INSTANCE.OpenSSPComPort(commandStruct);
          ITLLib.INSTANCE.OpenSSPComPortUSB(commandStruct);

       }
    }

 here are the c structures
    typedef struct{
        SSP_FULL_KEY Key;
        unsigned long BaudRate;
        unsigned long Timeout;
        unsigned char PortNumber;
        unsigned char SSPAddress;
        unsigned char RetryLevel;
        unsigned char EncryptionStatus;
        unsigned char CommandDataLength;
        unsigned char CommandData[255];
        unsigned char ResponseStatus;
        unsigned char ResponseDataLength;
        unsigned char ResponseData[255];
        unsigned char IgnoreError;
    }SSP_COMMAND;

    typedef struct{
        unsigned long long FixedKey;
        unsigned long long EncryptKey;
    }SSP_FULL_KEY; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:12:23.730

这可能不是答案；但仍然给你一些建议。

当您尝试通过客户端连接到 PORT 时；该端口应首先由服务器程序连接，并应侦听客户端。

因此，使用以下命令检查端口是否已启动。

> 网络统计-lpn | grep 8080
> 
> netstat -f 是windows的命令

你会得到这样的输出

tcp 0 0 0.0.0.0:8080 0.0.0.0:* 听 13098/java

这里我的进程 ID 是 13098，它是使用端口 8080 的进程

有可能端口已启动，但防火墙阻止客户端连接，因此您可以停止 iptable 服务以停止防火墙。

> 服务 iptables 停止

如果客户端仍然无法使用该端口，则该端口在网络级别（例如路由器）被阻止

**如何知道端口是否被阻塞？**

使用客户端计算机上的 telnet 命令来了解端口是否正在侦听。

> telnet ip 端口（windows cmd）

我们可以找出一个特定的进程正在使用哪些端口 root root 14223 14206 processName

> lsof -p 14223（进程PID）

输出：
processName 14223 root 5u IPv4 349373 0t0 UDP hostName.com:7575

IPv4 表示它正在使用端口并且端口号是 7575

使端口不受服务器进程的影响；使用以下命令终止进程：

> 须藤杀死 13098

现在 8080 端口是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:36:36.300

您的 JNA 结构定义与本机定义的布局不匹配。

JNA 中的字段顺序必须与本机定义的顺序完全匹配（最新版本的 JNA 实际上要求您实现一个明确声明字段顺序的方法）。

您无意中交换了`PortNumber`and`Timeout`字段。

# sql - 通过 Web 界面将 SQL 数据库公开给 R 分析的简单方法？

> ID：14723189
> 
> 赞同：-1
> 
> 时间：2013-02-06T06:47:16.473
> 
> 标签：sql, ruby-on-rails-3, r, web-applications

我们有一个 Ruby on Rails 应用程序，其中包含一个我们计划向其中添加 R 查询接口的数据库。不过，最好用一个快速的模型来测试这个概念：某种固定的 R 接口附加到数据库。（想想 PhyMyAdmin 但运行 R 查询。）

有很多[R web 界面](http://cran.r-project.org/doc/FAQ/R-FAQ.html#R-Web-Interfaces)，所以我在这里寻找一些指导。

要求：

*   方便查询数据库
*   可以做图表
*   易于安装在 CentOS 上
*   使用用户名/密码保护的能力将是一个奖励。
*   与 Ruby/Rails 的集成（例如，能够使用 Ruby 模型而不是直接使用表）是一大优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:53:42.280

该 R Web 界面列表中的许多软件包已过时或不再维护。最好的选择可能是 Rook 和 RApache。没有提到的是[Shiny](http://www.rstudio.com/shiny/)，一个来自 RStudio 的新项目。

有 R 包可以完成您列表中的所有操作：例如[RMySQL](http://cran.r-project.org/web/packages/RMySQL/index.html)用于连接和查询 MySQL 数据库。对于图形，您可以选择基本图形、[lattice](http://cran.r-project.org/web/packages/lattice/index.html)或[ggplot2](http://ggplot2.org/)。快速的网络搜索表明，一个名为 EPEL 的东西是使用 yum 在 CentOS 上安装的一个选项。

与 Ruby/Rails 集成：可能，例如使用[RSRuby](https://github.com/alexgutteridge/rsruby)（旧）或 Rserve 的[Ruby 客户端](https://github.com/clbustos/Rserve-Ruby-client)，但不推荐。将 R 和 Rails 代码分开可能会更好。

将涉及一些编码；您不会找到“固定界面”，但 Shiny 可能是最接近的。

# sftp - Zend Studio 9 试用远程设置正常但上传错误

> ID：14723192
> 
> 赞同：0
> 
> 时间：2013-02-06T06:47:39.093
> 
> 标签：sftp, zend-studio

我通过右键单击`new`-> `project...`-> 从 ftp 服务器导入了 drupal 安装`PHP project from remote server`。这是一个 SFTP 连接，所以我选择了`SSH`. 所有设置似乎都是正确的，因为该文件夹实际上已导入到我的项目中，并且设置为*在 save 上上传*。文件夹从服务器下载到我的项目后，ZS 控制台说`Current restricted directory is /`

因此，当我进行更改并保存时，什么也没有发生。如果我在我的项目文件夹中创建一个新文件，并且我右键单击`upload to server`也没有任何反应。当然，我检查了服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:58:01.037

问题是我的登录数据不是根服务器的用户名和密码，而是服务器的主机文件夹之一。一旦我使用了root访问数据，问题就解决了。

# c# - Active Directory PrincipalContext.ValidateCredentials 下一次登录策略更改密码处于活动状态时

> ID：14723201
> 
> 赞同：7
> 
> 时间：2013-02-06T06:48:22.517
> 
> 标签：c#, authentication, active-directory, windows-authentication, principalcontext

我正在使用*System.DirectoryServices.AccountManagement* 命名空间中的类与我的 Web 应用程序中的 Active Directory 进行交互。要针对 Active Directory 验证用户凭据，我使用以下代码行。

```
bool authSucceeded=principalContext.ValidateCredentials(userName, password); 
```

其中**principalContext**是 PrincipalContext 实例。当用户使用提供的凭据进行身份验证时，**authSucceeded为真。**但是，当“下一次登录策略*更改密码”*处于活动状态时，此方法会失败。对于这些用户，即使他们是使用密码“Abcd_10”创建的，也不会经过身份验证。

任何人都知道如何在这种状态下对用户进行身份验证，以便我可以将他重定向到更改密码屏幕？我已经完成了所有其他任务的代码。但只有这个东西不见了。

只是我需要知道为什么

```
principalContext.ValidateCredentials 
```

由于密码错误/无效的用户名/用户被停用或我的要求（他是否正在为密码更改进行身份验证）而返回错误的方法

如果有任何想法，请分享..

# android - 在显示（自定义）对话框时为褪色区域设置颜色/背景？

> ID：14723202
> 
> 赞同：0
> 
> 时间：2013-02-06T06:48:26.410
> 
> 标签：android, android-alertdialog

是否可以在显示自定义对话框时更改褪色区域颜色/背景的默认属性。

我知道褪色区域的完全透明。但是想改变它的颜色。

# visual-studio - 您可以远程安装 Visual Studio Team Foundation Server 2012 吗？

> ID：14723203
> 
> 赞同：0
> 
> 时间：2013-02-06T06:48:30.863
> 
> 标签：visual-studio, azure-devops

是否可以远程安装 Visual Studio Team Foundation 2012？

如果有人可以链接到教程或信息指南，如果有可用的，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:52:39.443

可能需要澄清你到底想要什么。

1) 可以使用远程桌面远程安装 TFS2012

2）您可以使用无人值守安装脚本安装，并可能使用 powershell 或类似的东西远程启动安装

[http://blogs.msdn.com/b/tfsao/archive/2012/10/01/unattended-installation-of-tfs-2012.aspx](http://blogs.msdn.com/b/tfsao/archive/2012/10/01/unattended-installation-of-tfs-2012.aspx) [http://www.howtogeek.com/117192/how-to-run -powershell-commands-on-remote-computers/](http://www.howtogeek.com/117192/how-to-run-powershell-commands-on-remote-computers/)

# asp.net - 这是我的存储过程，用于检查不应该有相同的电子邮件 ID

> ID：14723204
> 
> 赞同：0
> 
> 时间：2013-02-06T06:48:32.720
> 
> 标签：asp.net, sql

在这里我需要得到消息。如果我在应用程序中输入电子邮件 ID，我应该会收到电子邮件已经存在的消息，这怎么可能？

```
IF not EXISTS(SELECT * FROM Resource WHERE Email= @Email)
if(@status = 'Insert')
BEGIN
     Insert into resource(FirstName,LastName,Password,Role,Email,Phone,OrganisationID) 
     values (@FirstName,@LastName,@Password,@Role,@Email,@Phone,@OrganisationID)
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:53:07.593

添加`ELSE`块：

```
IF not EXISTS(SELECT * FROM Resource WHERE Email= @Email)
BEGIN
    if(@status = 'Insert')
    BEGIN

      Insert into resource(FirstName, LastName, Password, 
                           Role, Email, Phone, OrganisationID) 
      values (@FirstName,@LastName,@Password,
              @Role,@Email,@Phone,@OrganisationID)
    end
END
ELSE  
BEGIN
    RETURN 0;
END; 
```

**或者：**您可以将条件移动到`IF`这样的：

```
IF not EXISTS(SELECT * FROM Resource WHERE Email= @Email)
   AND @status = 'Insert'
BEGIN
      Insert into resource(FirstName, LastName, Password, 
                           Role, Email, Phone, OrganisationID) 
      values (@FirstName,@LastName,@Password,
              @Role,@Email,@Phone,@OrganisationID);
END
ELSE  
BEGIN
    RETURN 0; -- It depends on the return type 
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:53:36.587

```
if not Exists (select Email from Resource where Email= @Email)
begin
 set @status='Insert'
Insert into resource(FirstName,LastName,Password,Role,Email,Phone,OrganisationID) 
values (@FirstName,@LastName,@Password,@Role,@Email,@Phone,@OrganisationID)
end
else begin  set @status='EmailExists='+@Email end 
```

# php - 无法让 htmlpurifier 允许某些 tinymce 样式通过

> ID：14723206
> 
> 赞同：2
> 
> 时间：2013-02-06T06:48:36.493
> 
> 标签：php, tinymce, htmlpurifier

我在设置 htmlPurifier 以允许（不过滤掉）接受的 css 样式时遇到问题。

**php代码：**

```
$text = trim(html_entity_decode($text));
require_once("../htmlpurifier/library/HTMLPurifier.auto.php");
$config = HTMLPurifier_Config::createDefault();
$config->set('HTML.Allowed','p[style],ol[style],li[style],ul[style],b,u,strike,br,span[style]');
$config->set('CSS.AllowedProperties', array('text-decoration' => true,'font-family' => true,'font-size' => true,'text-align' => true,'padding-left' => true,'padding-right' => true,'padding-top' => true,'padding-bottom' => true,'color' => true,'background-color' => true));
$config->set('AutoFormat.RemoveEmpty', true);
$config->set('URI.DisableExternalResources', true);
$purifier = new HTMLPurifier($config);
$text = $purifier->purify("".$text); 
```

**输入文本（tinyMCE 输出）：**

```
<p style=\"text-align: left;\">
    <span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\">
       Lorem ipsum dolor sit amet, conse\'ctetur adipiscing elit. Nunc sit amet ipsum pulvinar elit euismod porta.
    </span>
</p> 
```

**实际输出：**

```
<p>
    <span>
        Lorem ipsum dolor sit amet, conse\'ctetur adipiscing elit. Nunc sit amet ipsum pulvinar elit euismod porta.
    </span>
</p> 
```

**预期输出：**

```
<p style="text-align:left">
    <span style="font-family:arial, helvetica, sans-serif;font-size:small">
       Lorem ipsum dolor sit amet, conse'ctetur adipiscing elit. Nunc sit amet ipsum pulvinar elit euismod porta.
    </span>
</p> 
```

任何帮助或评论将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:07:47.700

关闭魔术引号。（此空间特意留空。）

# c# - 如何在 Lucene.Net 的现有字段中添加数据

> ID：14723210
> 
> 赞同：0
> 
> 时间：2013-02-06T06:48:46.627
> 
> 标签：c#, visual-studio, lucene.net

每次我调用该方法时，index() 方法都会覆盖该字段。例如，我想在keywordHash字段中添加“1”、“2”、“3”。但是在我调用 index() 方法之后，只会保存“3”。如何将所有数据添加到字段中而不是覆盖它？在 GetView() 方法内部是我调用 Index() 方法的地方。

```
public virtual string GetView(TokenStream tokenStream, out int numberOfTokens, string filePath, string encryptedPath, string password, string fileName)
{
    StringBuilder sb = new StringBuilder();

    Token token = tokenStream.Next();

    numberOfTokens = 0;

    FileEncryption fileEnc = new FileEncryption();

    while (token != null)
    {
        numberOfTokens++;
        sb.Append("[" + token.TermText() + " = " + GetTokenView(token) + "]" + System.Environment.NewLine);
        fileEnc.Index(GetTokenView(token), filePath, encryptedPath, password, fileName);
        token = tokenStream.Next();

    }

    return sb.ToString();

}

public void Index(string strHash, string filePath, string encryptedPath, string password, string fileName)
{
    string indexFileLocation = @"C:\Index";
    Lucene.Net.Store.Directory dir =
        Lucene.Net.Store.FSDirectory.GetDirectory(indexFileLocation, true);

    //create an analyzer to process the text
    Lucene.Net.Analysis.Analyzer analyzer = new
    Lucene.Net.Analysis.Standard.StandardAnalyzer();

    //create the index writer with the directory and analyzer defined.
    Lucene.Net.Index.IndexWriter indexWriter = new
    Lucene.Net.Index.IndexWriter(dir, analyzer,
        /*true to create a new index*/ true);

    //create a document, add in a single field
    Lucene.Net.Documents.Document doc = new
    Lucene.Net.Documents.Document();

    doc.Add(new Field("keywordHash", strHash, Field.Store.YES, Field.Index.TOKENIZED));
    doc.Add(new Field("keywordPath", filePath, Field.Store.YES, Field.Index.NO));
    doc.Add(new Field("keywordEncPath", encryptedPath, Field.Store.YES, Field.Index.NO));
    doc.Add(new Field("keywordPassword", password, Field.Store.YES, Field.Index.TOKENIZED));
    //doc.Add(new Field("keywordEncryptedFile", encryptedFile, Field.Store.YES, Field.Index.ANALYZED));
    doc.Add(new Field("keywordFileName", fileName, Field.Store.YES, Field.Index.NO));

    //write the document to the index
    indexWriter.AddDocument(doc);

    //optimize and close the writer
    indexWriter.Optimize();
    indexWriter.Close();

}

public void LuceneSearch()
{
    HashAlg hashAlg = new HashAlg();
    string keywordLower = tbSearchEnc.Text.ToLower();
    string keywordHash;

    if(rbMD5Search.Checked == true)
    {
        keywordHash = hashAlg.GenerateHashMD5(keywordLower);
    }
    else
    {
        keywordHash = hashAlg.GenerateHashSHA1(keywordLower);
    }

    string indexFileLocation = @"C:\Index";
    Lucene.Net.Store.Directory dir = Lucene.Net.Store.FSDirectory.GetDirectory(indexFileLocation, false);
    Lucene.Net.Search.IndexSearcher searcher = new Lucene.Net.Search.IndexSearcher(indexFileLocation);
    //create an index searcher that will perform the search
    //Lucene.Net.Search.IndexSearcher searcher = new Lucene.Net.Search.IndexSearcher(dir);

    //build a query object
    Lucene.Net.Index.Term searchTerm = new Lucene.Net.Index.Term("keywordHash", keywordHash);
    Lucene.Net.Search.Query query = new Lucene.Net.Search.TermQuery(searchTerm);

    //execute the query
    Lucene.Net.Search.Hits hits = searcher.Search(query);

    //iterate over the results.
    for (int i = 0; i < hits.Length(); i++)
    {
        Document doc = hits.Doc(i);
        string hashValue = doc.Get("keywordHash");
        string path = doc.Get("keywordPath");
        string encPath = doc.Get("keywordEncPath");
        string fileName = doc.Get("keywordFileName");

        listBoxSearch.Items.Add(encPath);
        Console.WriteLine(hashValue + " " + path + " " + encPath + " " + fileName);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:36:28.853

You're calling both `FSDirectory.GetDirectory(..., create: true)` and `new IndexWriter(..., create: true)`. Passing `true` will clear any existing index, so your previously indexed document is removed.

# iphone - UISwitch 旧版本

> ID：14723211
> 
> 赞同：0
> 
> 时间：2013-02-06T06:48:47.280
> 
> 标签：iphone, ios, ipad, uiswitch

想要将这种开关添加到我的应用程序而不是圆角开关。因为它从 iOS 5.0 开始不可用。

![](../Images/bfae534c03b30cc546bbbf39529b2cbe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:55:46.353

[使用此源代码链接](https://github.com/twotoasters/TTSwitch) 获取 Square Switch 和 Create with

```
TSwitch *switch = [[TTSwitch alloc] initWithFrame:(CGRect){ CGPointZero, { 76.0f, 27.0f } }];
switch.trackImage = [UIImage imageNamed:@"square-switch-track"];
switch.thumbOffsetY = -3.0f; 
```

# asp.net-mvc - 如何使 jquery 验证与我的 jedatible 插件一起工作？

> ID：14723218
> 
> 赞同：0
> 
> 时间：2013-02-06T06:49:06.183
> 
> 标签：asp.net-mvc, jquery-validate, jeditable, unobtrusive-validation

我正在尝试使用我的 jeditable 插件实现 jquery 验证。由于 jeditable 对我来说有点新，我想我会尝试使用我在论坛上找到的代码添加尝试。这是我的原始代码，除了验证之外工作正常。

```
 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"      type="text/javascript"></script>
 <script src="../../Scripts/jquery.jeditable.js" type="text/javascript"></script>
 <script src="../../Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>

  <script type="text/javascript">
      $(document).ready(function () {

     $(".display-label").editable("/Course/RubricsEdit");

     $(".text").editable("/Course/RubricsEdit",
                    {
                        submitdata: {
                            DepartmentId: function () {
                                return $("#DepartmentId").val();
                            },
                            RecordType: "DEPARTMENT"
                        }
                    }); 
```

然后我尝试了这个：

```
 <script type="text/javascript">
       $(document).ready(function () {

       $(".display-label").editable("/Course/RubricsEdit");

       $(".text").editable("/Course/RubricsEdit",
                    {
                        submitdata: {
                            DepartmentId: function () {
                                return $("#DepartmentId").val();
                            },
                            RecordType: "DEPARTMENT"
                        }
                    });

   $(".text").editable("/Course/RubricsEdit", {
   submitdata: function (settings, td) {
    var input = $(td).find('input');
    $(this).validate({
        rules: {
            'nameofinput': {
                number: true
            }
        },
        messages: {
            'actionItemEntity.name': {
                number: 'Only numbers are allowed'

            }

        }
    })

    return ($(this).valid());
     }
 });

 });
</script> 
```

仍然有效，但没有发生验证.. 有没有办法让验证与我的 jeditable 插件一起工作？

更新：所以我尝试了这个：

```
 <script type="text/javascript">
 $(document).ready(function () {

     $(this).validate({
         rules: {
             submitdata: {
                 number: true
             }
         },
         messages: {
             submitdata: {
                 number: 'Only numbers are allowed'
             }

         }
     });

     $(".display-label").editable("/Course/RubricsEdit");

     $(".text").editable("/Course/RubricsEdit",
                    {
                        submitdata: {
                            DepartmentId: function () {
                                return $("#DepartmentId").val();
                            },
                            RecordType: "DEPARTMENT"
                        }
                    });

 });
</script> 
```

…并收到一条错误消息：

Microsoft JScript 运行时错误：对象不支持属性或方法“验证”。我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:50:46.203

如果您要手动（通过调用）编写自己的验证规则，`$(this).validate({...}`则不能再使用不显眼的验证。所以摆脱`jquery.validate.unobtrusive.min.js`脚本，因为它不再对你有用了。不显眼的验证的重点是 ASP.NET MVC 助手将检查您的模型属性，如果它们被验证属性（例如`Required`）修饰，则在输入元素上发出相应的 HTML5属性，脚本`data-*`将使用这些属性来动态注册`jquery.validate.unobtrusive.min.js`中的验证规则`jQuery.validate`。如果您根据自己的规则单独使用插件，则不应使用不显眼的验证，因为两者不能一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:05:58.720

关于您的代码：

```
$(".text").editable("/Course/RubricsEdit", {
   submitdata: function (settings, td) {
    var input = $(td).find('input');
    $(this).validate({ // <-- this is in the wrong place
        rules: {
            'nameofinput': {
                number: true
            }
        },
        messages: {
            'actionItemEntity.name': {
                number: 'Only numbers are allowed'

            }

        }
    })

    return ($(this).valid());
     }
 }); 
```

您的部分问题是您试图手动将 jQuery Validation 应用于每个`input`using `.validate()`.

[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)应该只在 DOM 中使用*一次*，准备在*表单上***初始化**插件，**而不是**手动验证每个字段。该插件会自动处理所有字段验证。

 ***[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)然后可以*在* `.validate()`初始化之后用于强制对表单进行验证测试和/或返回结果的相应布尔值（对于整个表单）。

我还注意到您输入的名称与对应的`'nameofinput'`inside 不匹配。如果这是您要覆盖的相应消息，则这些必须相同。（如果输入[包含句点和方括号等特殊字符，](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)[则只需要在输入周围加上引号](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)。 ）`'actionItemEntity.name'``messages: {}`[`name`](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)

这样的事情可以让你回到正轨：

```
$(document).ready(function() {

    $('#yourform').validate({
        rules: {
            nameofinput: {
                number: true
            }
        },
        messages: {
            nameofinput: {
                number: 'Only numbers are allowed'
            }

        }
    });

}); 
```

**简单演示**：http: [//jsfiddle.net/Hr3bB/](http://jsfiddle.net/Hr3bB/)***

# opennlp - 命令行工具和使用 API（以编程方式）训练的模型之间有区别吗？

> ID：14723222
> 
> 赞同：1
> 
> 时间：2013-02-06T06:49:15.520
> 
> 标签：opennlp

在 opennlp 中，我正在训练一个命名实体模型。如果我提供“.train”文件并使用命令行工具进行训练，它会完美运行。但是当我使用 API 并通过句子检测器并将其标记化并将其发送到 namefind 时，find 不会检测到类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:33:44.043

您是否尝试使用 Span 中的 getType 方法获取它？

[http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.namefind.recognition.api](http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.namefind.recognition.api)

另外，您可以参考命令行工具源代码来检查您是否正确使用它：

[http://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/cmdline/namefind/TokenNameFinderTool.java?view=markup](http://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/cmdline/namefind/TokenNameFinderTool.java?view=markup)

# ios - 日文日期格式 ios

> ID：14723223
> 
> 赞同：2
> 
> 时间：2013-02-06T06:49:19.913
> 
> 标签：ios, nsdate, nsdateformatter

好的，直截了当，我想制作这样的日历格式

> YYYY年MM月DD日</p>

我已经这样设置了我的代码

```
- (void)RecentStartDidSelect:(NSDate *)selectedDate element:(id)element {
    self.selectedDate = selectedDate;
    //////
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
        [dateFormat setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:[[NSLocale preferredLanguages] objectAtIndex:0]] autorelease]];
    [dateFormat setDateFormat:@"YYYY(EEE)-MM(EEEm)-dd(EEE)"];

    NSString *theDate = [dateFormat stringFromDate:self.selectedDate];
    //may have originated from textField or barButtonItem, use an IBOutlet instead of element
    Recent_start.text = theDate;
    [Recent_start resignFirstResponder];

} 
```

输出是

```
 theDate-->2013(Wed)-02(Wed48)-06(Wed) 
```

我现在迷路了，如何创建这样的日期格式？:((请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T06:53:34.633

```
[dateFormatter setDateFormat:@"yyyy年MM月dd日"]; 
```

那是中文

# sql - 如何在使用sql中将日期的年份增加1

> ID：14723224
> 
> 赞同：2
> 
> 时间：2013-02-06T06:49:22.163
> 
> 标签：sql, sql-server, date

如果我有一个`15/11/2001`存储在数据库中的日期，我想通过 .. 来创建日期的`1`年份`15/11/2002`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T06:50:46.983

使用[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx). 例如，在查询中：

```
SELECT DATEADD(year, 1, [myDate])
FROM [myTable] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T06:50:53.353

使用[DATEADD](http://msdn.microsoft.com/en-us/library/ms186819.aspx)：

```
SELECT DATEADD(year, 1, '2001-11-15'); 
```

# javascript - JSON 无法解析的垃圾：为什么这么严重？

> ID：14723226
> 
> 赞同：26
> 
> 时间：2013-02-06T06:49:29.513
> 
> 标签：javascript, json, security

在阅读[了这个](https://stackoverflow.com/q/2669690/141220)关于为什么 google/facebook 等的问题后，添加了无法解析的内容，例如：

*   `while(1);`
*   `for(;;);`
*   `&&&START&&& ... &&&END&&&`
*   1和3结合

对于他们的 JSON 响应，我理解了他们的动机。但是我仍然不清楚为什么要使用这种相对复杂的机制，当类似的效果可以通过类似的东西来实现时

*   `)`在开头添加额外内容以使整行无效并出现语法错误
*   在评论中包装 JSON

现在，似乎这种对无限循环和（奇怪的）语法错误的额外保护将绕过旧的和宽松的 javascript 解析器，但我似乎找不到任何表明这种情况的参考资料。还有另一个[SO question](https://stackoverflow.com/q/10325100/141220)甚至继续讨论`while(1);`解决方法（说明 1 可以被破坏）并拒绝表单的另一种解决方法`{}&&`，但没有解释原因或引用任何来源。

其他参考：

*   [http://code.google.com/p/fbug/issues/detail?id=369](http://code.google.com/p/fbug/issues/detail?id=369)
*   [http://prototypejs.org/learn/json](http://prototypejs.org/learn/json)，它建议将 JSON 包装在`/*-secure-\n...*/`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T18:14:18.727

我认为有几个细节与不可解析的杂物的形式有关：

*   `{}&&`前缀可以追溯到`JSON`解析器（显然，例如旧版本中的 Dojo）没有将`JSON`字符串验证为有效的`JSON`语法。`JSON`我所知道的所有Parser 库现在都在进行验证，但是 2008 年的[这篇博客文章](http://www.sitepen.com/blog/2008/09/25/security-in-ajax/)表明，上述版本的 dojo 将`JSON.parse`正常允许 json，而`eval`只会失败，这将为您提供方便的防止`JSON`劫持保护。

*   `while(1)`通过分配as的值，可以使用`Number`原型使其无效。`0``1`

*   `for(;;)`并且`while(1)`两者都具有使被劫持站点崩溃的效果，这确实增加了保护，因为任何脚本的每次进一步执行都会有效地停止而不会出现错误。这很重要，因为**定义上的错误并不标志着 javascript 中脚本执行的结束**，而 a`for(;;)`确保在它之后没有执行任何脚本。这是为了防止（afaik 假设的）攻击者通过利用`window.onerror`、覆盖`eval`或代理错误对象实例化（如覆盖`constructor`of `Error.prototype`）中的弱点成功拦截脚本错误的情况。

    **更新**

    security.stackexchange 上也有[这个问题，](https://security.stackexchange.com/questions/7001/how-should-web-app-developers-defend-against-json-hijacking)建议不要使用`for(;;)`，或者`while(1)`因为它可能暗示您的网站正在 DoS 攻击客户端 CPU 或触发恶意软件扫描程序。我没有看到现代浏览器存在严重的 DoS 问题，因为它们运行沙盒并且基于每个选项卡。但这肯定是旧浏览器的问题。恶意软件扫描程序是一个真正的问题，可能会将您的网站报告为正在攻击。

*   `&&&START&&&`（和相应的`&&&END&&&`标签）使接收 json 的客户端解析比仅仅使用`)`或可能无意关闭的注释更容易，并且可以提高程序员的可读性和可见性。包含注释只是其中的一种变体，因为它提供了`/*`开始和`*/`结束标记。在我看来，开头和结尾的清晰标记有助于注意杂物的含义。使用评论并没有真正提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T07:11:45.290

关于“1 可以被破坏”：

如果您执行以下操作（在 webkit 中）：

```
var test = 1;
console.log(test.constructor == window.Number); //true is logged 
```

理论上可能有一种可能性，即有一种方法可以修改 window.Number 或其原型，这样 的值`1`就不会是`1`：

```
window.Number.prototype.toString = function() { return 0 };
window.Number.prototype.valueOf = function() { return 0 }; 
```

幸运的是，这不起作用。但我认为这就是作者试图说的。

**编辑** 通常我也倾向于使用将内容包装到评论中的方法（但必须确保您的 json 对象不包含这样的内容，`{"test":"*/"}`因为这会产生语法错误。甚至抛出错误可能可能是一个问题，如果它是可捕获的并且可能会暴露有关错误发生的行的一些信息。或者如果错误对象本身可以更改。

# go - go test 在同一个包中找不到函数

> ID：14723229
> 
> 赞同：74
> 
> 时间：2013-02-06T06:49:42.210
> 
> 标签：go

目录结构为：

```
src
src/pkg
src/pkg/t1.go
src/pkg/t1_test.go 
```

* * *

### t1.go

```
package pkg

import (
"fmt"
)

func SayHI(){
    fmt.Println("this is t1")
} 
```

* * *

### t1_test.go

```
package pkg

import (
    "testing"
)

func TestXYZ(t *testing.T) {
    SayHI()
} 
```

* * *

从 dir 的命令行调用 go test`src/pkg`

`go test t1_test.go`

* * *

### 错误：

```
./t1_test.go:8: undefined: SayHI
FAIL    command-line-arguments [build failed] 
```

但功能在那里

感谢您的任何提示

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-06T07:22:27.727

它按预期工作。

```
jnml@fsc-r630:~/src/pkg$ go help test
usage: go test [-c] [-i] [build flags] [packages] [flags for test binary]

'Go test' automates testing the packages named by the import paths.
It prints a summary of the test results in the format:

    ok   archive/tar   0.011s
    FAIL archive/zip   0.022s
    ok   compress/gzip 0.033s
    ...

followed by detailed output for each failed package.

'Go test' recompiles each package along with any files with names matching
the file pattern "*_test.go".  These additional files can contain test functions,
benchmark functions, and example functions.  See 'go help testfunc' for more.

By default, go test needs no arguments.  It compiles and tests the package
with source in the current directory, including tests, and runs the tests.

The package is built in a temporary directory so it does not interfere with the
non-test installation.

In addition to the build flags, the flags handled by 'go test' itself are:

    -c  Compile the test binary to pkg.test but do not run it.

    -i
        Install packages that are dependencies of the test.
        Do not run the test.

The test binary also accepts flags that control execution of the test; these
flags are also accessible by 'go test'.  See 'go help testflag' for details.

For more about build flags, see 'go help build'.
For more about specifying packages, see 'go help packages'.

See also: go build, go vet.
jnml@fsc-r630:~/src/pkg$ 
```

换句话说：

*   `go test`没关系。
*   `go test pkg`（假设 $GOPATH 是 ~ 并且包在 ~/src/pkg 中）是可以的。
*   `go test whatever_test.go`不行，*因为上面记录*的不支持。

要选择要运行的测试，请使用`-run <regular_expression>`标志（其中`<regular_expression>`被解释为两端都有通配符，如`.*<regular_expression>.*`）。例如

```
$ go test -run Say # from within the package's directory 
```

或者

```
$ go test -run Say my/package/import/path # from anywhere 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-03-04T18:35:12.330

这在 Golang 中有些奇怪。老实说，我花了一些时间才找到出路。

一个简单的解决方法是将它们包含在命令中，例如： `go test src/pkg/t1.go src/pkg/t1_test.go`

恕我直言，最好的方法是保持清洁。因此，请避免每个测试文件有超过 1 个文件作为依赖项。如果您使用 +1 文件作为依赖项，请考虑使用包创建黑盒测试，`_test`并且不要使用任何小写内部变量。

这将避免您在日常测试中处理复杂的依赖关系。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-11-03T15:43:38.673

跑

```
go test ./... 
```

这将在所有测试文件中找到所有测试。[要运行单独的测试，请像这里](https://stackoverflow.com/a/49098923)一样指定依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-05T22:34:04.830

在自己遇到完全相同的问题后，我遇到了这个 Stackoverflow 问题：具体来说，尝试运行`go test`然后看到构建失败，表明有问题的函数没有定义。我看到这个问题现在有点老了（8 年前问过），但就我而言，问题是我试图在 Go 1.16 中编写代码，现在似乎假设存在/使用模块。请参阅[此页面](https://go.dev/doc/tutorial/create-module)以获取有关模块的起始参考和简单的后续示例。

在我的情况下，我所要做的就是运行`go mod init [module name]`，之后我可以`go test`毫无问题地运行。

希望这对使用更现代（1.16+）版本的 Go 后访问此页面的用户有一些价值。

# payment-gateway - 实时借记卡/信用卡交易警报系统

> ID：14723230
> 
> 赞同：1
> 
> 时间：2013-02-06T06:49:42.327
> 
> 标签：payment-gateway, credit-card, payment-processing, yodlee

我们想要创建一个平台，让拥有多张借记卡/信用卡的普通消费者可以轻松获得账户上发生的所有交易（刷卡/非刷卡）的实时警报。警报应包含所有交易详细信息，例如交易金额、时间/日期、商家名称、商家类别、商家 ID 等。最后，我们希望将警报实时发送到电话应用程序（交付很容易：- ) ) 但真正的问题是，有没有一种方法，一旦我的用户提供了所有银行或卡的详细信息，我们就可以从银行或 Yodlee 等现有平台实时接收交易警报，甚至直接连接到 Visa/Mastercard .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:09:58.857

一句话，没有。

这样的事情不可能发生的主要原因是金融交易的运作方式。尽管授权请求是“实时”执行的，但在商家（或商家处理器）提交结算文件之前，不会从账户中扣除实际款项。这通常在一天结束时分批完成，但在商品缺货的情况下，商家只能在发货前（几天/几周后）进行结算

Visa/MasterCard 等在授权时不提供“实时”警报服务，因为这可能会触发大量错误警报。通常，授权请求可能是零价值/1 美分，仅用于验证卡详细信息，或者如果商家/持卡人取消交易，授权请求可能会立即被撤销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:23:26.647

mint.com 已经提供了这样的服务。

# .net - .net 4.0 的 Pdf 到图像转换器库

> ID：14723232
> 
> 赞同：-4
> 
> 时间：2013-02-06T06:49:49.400
> 
> 标签：.net

我正在寻找一个dll文件，它将**pdf文件转换为图像。** 它应该适用于 .net 框架，win 32 nit 和 64 位机器到 windows 7。请告诉我任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:54:18.253

[ImageMagick](http://www.imagemagick.org/script/index.php)将帮助您...

添加此内容后，您必须在命令提示符中写入`convert "PDF FILE NAME" "IMAGE FILE NAME"`..

# iphone - 当我使用gestureRecognizer：shouldRecognizeSimultaneouslyWithGestureRecognizer时，UIScrollview scrollRectToVisible 没有随着动画移动：

> ID：14723242
> 
> 赞同：1
> 
> 时间：2013-02-06T06:50:38.053
> 
> 标签：iphone, ios

我在滚动视图中有 3 个视图，并且我对这些子视图进行了滑动手势。
在滑动时，我正在使用 (CATransform3DMakeRotation) 旋转该视图，同时滚动我的滚动视图以提供页面折叠效果。
它按预期工作，但子视图并非每次都检测到滑动。

实施后

```
– gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer: 
```

和

```
– gestureRecognizer:shouldReceiveTouch: 
```

子视图每次都检测到滑动，但现在滚动动画不起作用。
现在它在视图旋转动画结束时滚动（没有动画）。

我用过的代码

```
 //Animation Code
    [UIView animateWithDuration:3 animations:^(void){

        CATransform3D _3Dt = CATransform3DIdentity;
        _3Dt = CATransform3DConcat(CATransform3DMakeRotation(M_PI, 0.0f, 7.5f, 0.0f), CATransform3DMakeTranslation(0, 0, 0));
        _3Dt.m34 = 0.0015f;

        v.layer.transform = _3Dt;
        //[scroll setContentOffset:CGPointMake(scroll.contentSize.width-300, 0)];
        [scroll scrollRectToVisible:CGRectMake(300, 10, 300, scroll.frame.size.height) animated:NO];

    } completion:^(BOOL finished){}];

and

    //GestureRecognizer Delegate

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{

    return YES;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    return YES;
} 
```

请提出一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:33:53.853

尝试

```
[yourGesture setCancelsTouchesInView:NO]; 
```

**编辑**

还将动画属性更改为 YES

```
[scrollView scrollRectToVisible:CGRectMake(300, 10, 300, scroll.frame.size.height) animated:YES]; 
```

# apache-camel - 骆驼swf集成

> ID：14723243
> 
> 赞同：-3
> 
> 时间：2013-02-06T06:50:41.507
> 
> 标签：apache-camel, amazon-swf

在 2012 年的骆驼大会上，一场关于骆驼与亚马逊网络服务的会议。特别是一个例子是与简单工作流的集成。我在哪里可以找到该示例的代码或有关这些集成的类似内容？在此先感谢 F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:49:54.440

[在 Camel 文档中，您可以在http://camel.apache.org/aws.html](http://camel.apache.org/aws.html)找到有关 camel-asw 组件的详细信息

关于 SNS [http://camel.apache.org/aws-sns.html](http://camel.apache.org/aws-sns.html)

然后这些组件的单元测试通常有一些使用示例 [https://svn.apache.org/repos/asf/camel/trunk/components/camel-aws/src/test/java/org/apache/camel/组件/aws/sns/](https://svn.apache.org/repos/asf/camel/trunk/components/camel-aws/src/test/java/org/apache/camel/component/aws/sns/)

您可以在以下网址找到 CamelOne 2012 的所有视频和演示文稿：http: [//fusesource.com/apache-camel-conference-2012/camelone_speakers_2012/](http://fusesource.com/apache-camel-conference-2012/camelone_speakers_2012/)

# django - 从视图中，我如何确定哪个命名的 url 模式导致 URL 调度程序调用该视图？

> ID：14723256
> 
> 赞同：1
> 
> 时间：2013-02-06T06:51:52.093
> 
> 标签：django

我的 URLConf 中有几个命名`url()`的 s 导致相同的视图。从该视图中，我如何找出其中哪些`url()`匹配并导致视图被调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:54:59.173

查看`request`对象，这是您视图的第一个位置参数。它有一个`request.path`属性。

要了解解析器如何将当前`request.path`与您的 URLConf 匹配，请调用解析器：

```
from django.core.urlresolvers import resolve
resolver_match = resolve(request.path) 
```

在视图中，`resolver_match`绝对保证是一个`ResolverMatch`包含`url_name`属性的对象。此属性是`url()`匹配的名称的名称。

该`ResolverMatch`对象具有以下属性：

```
.app_name {str} or {NoneType}
.args {tuple}
.kwargs {dict}
.namespace {str}
.namespaces {list}
.url_name {str}
.view_name {str} 
```

# c# - windows phone 8 中包含图片的可滚动画布

> ID：14723257
> 
> 赞同：0
> 
> 时间：2013-02-06T06:51:54.403
> 
> 标签：c#, xaml, windows-phone-8

我正在开发 Windows Phone 8 应用程序。我有一个包含图像的画布，我可以拖动这些图像来更改它们在画布中的位置。我的问题是画布不可滚动，我想要页面中的垂直滚动条。我试过这样

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer x:Name="scvImages" HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch" Margin="0"
                      HorizontalContentAlignment="Stretch" Height="Auto" Width="Auto">
            <Grid Height="Auto" Width="Auto">
                <Canvas x:Name="canImages" Height="Auto" Width="Auto">
                </Canvas>
            </Grid>                      
        </ScrollViewer>
        </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:10:00.470

乍一看，似乎没有什么可以告诉`ScrollViewer`调用，因为你的`Grid`并且`Canvas`只是要填充，`ViewPort`所以你可能会考虑`Height`在你的`Grid`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:47:14.587

您必须指定要滚动的面板（画布、网格、whatewer）的高度。否则它将渲染到屏幕外，但“认为”没问题并且不需要滚动（因为它是无限高的）。

# visual-studio-2012 - 发布 Web 应用程序的 UI 非常慢

> ID：14723258
> 
> 赞同：7
> 
> 时间：2013-02-06T06:51:54.537
> 
> 标签：visual-studio-2012

VS2012 中的 Web 应用程序发布过去对我来说非常快，但在过去一周左右的时间里，UI 出现了很长的停顿：

*   当我第一次右键单击项目并选择发布时，发布 UI 大约需要 30 秒才能出现（VS 在此期间没有反应）。
*   如果我选择一个新包，相关的 UI 最多需要 60 秒才能出现。

实际发布速度相当快。只是 VS2012 UI 没有响应。

这类似于[Publish very slow in VS 2012](http://connect.microsoft.com/VisualStudio/feedback/details/766676/publish-very-slow-in-vs-2012)。然而，这张票是关于发布本身非常缓慢，而不是关于发布 UI。

鉴于 UI 很快并且变得缓慢，是否有可能是某些设置或配置导致了缓慢？知道如何让它再次变快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T19:08:22.213

当我的解决方案中有多个发布配置文件配置为发布到不再可用或脱机的服务器时，我遇到了这个问题。我使用的是文件系统发布方法。

我相信 Visual Studio 会尝试连接到服务器，并且 UI 会挂起，直到连接超时。

删除不再使用的配置文件解决了我的缓慢问题。通过在“发布”向导中选择“管理配置文件...”将其删除，然后使用“删除”按钮将其删除。

# java - Jboss 7 OSGI 运行级别

> ID：14723261
> 
> 赞同：1
> 
> 时间：2013-02-06T06:52:11.973
> 
> 标签：java, osgi, jboss7.x, runlevel

是否有正确的方法来定义 JBoss 7.1 应用程序服务器上 osgi 包的启动级别，例如在Equinox 配置中？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:15:43.923

从概念上讲，您应该首先确定服务器内部的哪个包或代码实际安装了您的包。这个捆绑包，通常被称为“管理代理”，也应该负责为这些捆绑包设置正确的启动级别。OSGi 定义了一个“StartLevel”服务（在规范的第 8 章中描述），除其他外，它允许您通过以下任一方式设置捆绑包的启动级别：

```
setInitialBundleStartLevel(int) // sets the start level for
                                   all bundles installed afterwards 
```

或者：

```
setBundleStartLevel(Bundle, int) // sets the start level for a
                                    specific bundle 
```

当然，很可能 JBoss 已经提供了一种机制来做到这一点，但至少这应该给你一个起点。

# ios - 在 Instruments 中查找内存泄漏的原因

> ID：14723264
> 
> 赞同：0
> 
> 时间：2013-02-06T06:52:18.513
> 
> 标签：ios, memory-leaks, xcode-instruments

我已经在 Instruments 中运行了泄漏，它向我显示了一个 100% 值的内存泄漏。我能够看到导致问题的代码行。但不确定是什么错误..

```
- (void) listAllBooks {
    if (marrListFromDB != nil) {
        [marrListFromDB removeAllObjects];
        marrListFromDB = nil;
    }

    marrListFromDB = [[NSMutableArray alloc] init];
    ServerCommunicationAPI *servApi = [[ServerCommunicationAPI alloc] init];
    servApi.delegate = self;
    NSURL *url = [NSURL URLWithString:kLISTCONTENTS];
    [servApi listBooksWithDeviceID:singleton.g_strdevID deviceKey:singleton.g_strdevID andSessionString:singleton.g_strSessionID sessionKey:@"sessionKey" URL:url andRequestMethod:@"POST"];
} 
```

错误行是最后一行。不知道为什么会导致内存泄漏...需要一些指导..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:18:22.103

试试这个。愿它解决您的内存泄漏问题。

```
- (void) listAllBooks {
if (marrListFromDB != nil) {
    [marrListFromDB removeAllObjects];
    marrListFromDB = nil;
}
ServerCommunicationAPI *servApi ;
marrListFromDB = [[NSMutableArray alloc] init];
if(servApi == nil){

     ServerCommunicationAPI *servApi = [[ServerCommunicationAPI alloc] init];
}//Every time it going to alloc. It's strong object may be due do this memory leak happens. 
servApi.delegate = self;
NSURL *url = [NSURL URLWithString:kLISTCONTENTS];
[servApi listBooksWithDeviceID:singleton.g_strdevID deviceKey:singleton.g_strdevID andSessionString:singleton.g_strSessionID sessionKey:@"sessionKey" URL:url andRequestMethod:@"POST"]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:07:19.420

从提供的信息很难判断，但可能的委托属性`ServerCommunicationAPI`被声明为`(strong)`？在这种情况下`servApi`永远不会被释放，因为它保持对自身的强引用（保留循环）。
我建议您检查仪器泄漏了哪种对象，这将使答案变得容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:26:17.553

只是另一个想法：也许您在没有设置自动释放池的单独线程中执行代码？在这种情况下，发送到的消息`servApi`可能会创建以后无法释放的自动释放对象，因为不存在自动释放池。
因此，如果您的代码未在主线程中执行，请检查是否已`@autoreleasepool {...}`为您的线程使用块设置了自动释放池。

# dapper - Dapper 输出参数没有返回值

> ID：14723277
> 
> 赞同：4
> 
> 时间：2013-02-06T06:53:31.847
> 
> 标签：dapper

这是我的代码部分：

```
CResponseVO objCResponseVO = new CResponseVO();

try
{
  var parameters = new DynamicParameters();
  parameters.Add("@UserId", currentUser.userId, DbType.Int32);
  parameters.Add("@Operation", operation, DbType.String);
  parameters.Add("@Output", dbType: DbType.Int32, direction: ParameterDirection.Output);

  using (var connection = SqlAccessHelper.SqlHelper.GetOpenConnection(SqlConnectionHelper.SqlConnectionString()))
  {
    var reader = connection.QueryMultiple("USP_DataExtract", parameters, (SqlTransaction)null, 1000000, CommandType.StoredProcedure);
    int result = parameters.Get<int>("@Output");
    if (operation != "insert")
    {
      ObservableCollection<DataExtraction.DataExtractionTracker> DataExtractionTracker = new ObservableCollection<DataExtraction.DataExtractionTracker>(reader.Read<DataExtraction.DataExtractionTracker>());
      objCResponseVO.addObject("ExtractionStatus", DataExtractionTracker);
    }

  objResponseVO.Result = result;
} 
```

这是我的 SP，我使用`try`并`catch`根据输出参数值提交或回滚：

```
@UserID int=0,
@Operation varchar(50)= NULL,
@Output INT OUTPUT

AS
BEGIN
  BEGIN TRY
    BEGIN TRANSACTION
      If(@Operation = 'select')
      BEGIN
        SELECT RequestId, UserId, RequestTime, Status,DownloadPath from DataExtractTracker where UserId= @UserID
      END

      If(@Operation = 'insert')
      BEGIN
        Insert into DataExtractTracker( UserId, RequestTime, Status) values (@UserID, GETDATE(), 'Waiting')
      END
      SET @Output = 0
    COMMIT TRANSACTION
  END TRY
  BEGIN CATCH
    ROLLBACK TRANSACTION
    SET @Output = 1 
    DECLARE @ErrorMessage NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;
    SELECT @ErrorMessage = ERROR_MESSAGE(), @ErrorSeverity = ERROR_SEVERITY(),  @ErrorState = ERROR_STATE();

    -- Use RAISERROR inside the CATCH block to return 
    -- error information about the original error that 
    -- caused execution to jump to the CATCH block.
    RAISERROR (@ErrorMessage, -- Message text.
               @ErrorSeverity, -- Severity.
               @ErrorState -- State.);
  END CATCH
END 
```

但是，我无法检索输出参数值。执行时出现异常：

```
int result = parameters.Get<int>("@Output"); 
```

异常是这样说的：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T08:15:53.513

This is simply a feature of TDS, and you would get the same with ADO.NET; the returned parameter values are usually **at the end** of the TDS stream; consequently, the updated values are not available until after you have finished consuming the data.

Basically, you need to query the parameter values **after** you have finished with `reader`, because until then *the value has not come back*. For example, the following hastily added integration test passes:

```
public void TestOutputParameter()
{
    connection.Execute(@"
create proc #TestOutputParameterProc @Foo int, @Bar int out as
set @Bar = @Foo select 1 as [A] select 2 as [B]");
    try
    {
        var args = new DynamicParameters(new { Foo = 123 });
        args.Add("@Bar", dbType: DbType.Int32,
                               direction: ParameterDirection.Output);
        using (var grids = connection.QueryMultiple("#TestOutputParameterProc",
                   args, commandType: CommandType.StoredProcedure))
        {
            // this will fail here; we have not consumed the TDS data yet!
            // args.Get<int>("@Bar").IsEqualTo(123);

            // note we don't *have* to read the data here; disposing "grids"
            // would be enough to skip to the end of the TDS
            grids.Read<int>().Single().IsEqualTo(1); // A
            grids.Read<int>().Single().IsEqualTo(2); // B
        }
        // at this point we have consumed the TDS data, so the parameter
        // values have come back to the caller
        args.Get<int>("@Bar").IsEqualTo(123);
    }
    finally
    { // clean up the proc
        connection.Execute("drop proc #TestOutputParameterProc");
    }
} 
```

# iphone - MFMessageComposeViewController 继续上一个对话

> ID：14723281
> 
> 赞同：2
> 
> 时间：2013-02-06T06:53:34.747
> 
> 标签：iphone, ios, objective-c, ipad, mfmessagecomposeview

当我为已在 iMessage 或文本中进行对话的特定号码创建消息撰写视图控制器时，是否有可能继续对话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:17:16.803

不...邮件应用程序可以创建“对话”，因为它记录了每条发送/接收的消息。但`MFMailComposeViewController`不提供对此历史记录的访问。

但是，设置相同的“主题”标题​​足以将消息附加到现有对话中。（这就是“对话”的匹配方式，邮件客户端之间的规则可能不同：Google、Apple Mail 等。可能有不同的启发式方法来查找“对话”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:38:05.750

**不会。**撰写 VC 不会显示对话，也无法手动进行，但是一旦您向收件人 XY 发送消息，然后打开消息应用程序，您可以在与 XY 的对话中看到新消息。因此 iOS 会自动将这条新消息包含在现有对话中，但*不会包含在此撰写 VC*中。

# html - Jsp页面在浏览器中显示一些不需要的字符？

> ID：14723283
> 
> 赞同：0
> 
> 时间：2013-02-06T06:53:39.753
> 
> 标签：html, jsp, liferay, portlet, liferay-6

我在 Liferay 中使用自定义 Portlet 时遇到一些问题 不知道，但是当我将我的 war 文件部署到其他机器 Liferay 服务器时，它会向我显示一个页面，其中包含一些不需要的字符，而我的 jsp 页面中没有字符。但是jsp页面中使用的javascript或html标签没有错误。

这是jsp页面的图像。

![在此处输入图像描述](../Images/2854b8afb4d4915b10c12de306d392fb.png)

我的jsp页面代码如下

```
<%@ include file="/init.jsp"%>
<%@page import="com.liferay.portal.kernel.util.PropsUtil"%>
<%@page import="com.liferay.util.portlet.PortletProps"%>
<%@page import="emenu.advertise.emailnotification.EmailNotification"%>
<%@page import="com.liferay.portal.model.Role"%>
<%@page import="com.liferay.portal.model.Organization"%>
<%@page import="com.liferay.portal.util.PortalUtil"%>
<%@page import="emenu.advertise.portlet.RestaurantPortlet"%>
<%@page import="com.liferay.portal.kernel.util.GetterUtil"%>
<%@page import="com.liferay.util.portlet.PortletProps"%>;
<%@ page import="javax.portlet.PortletConfig"%>
<%@ page import="com.liferay.util.mail.MailEngine"%>
<portlet:renderURL var="editadvertiseURL">
    <portlet:param name="jspPage" value="/jsps/advertise/EditAdvertise.jsp" />
</portlet:renderURL>
<portlet:renderURL var="addAdvertiseURL">
    <portlet:param name="jspPage" value="/jsps/advertise/NewAdvertise.jsp" />
</portlet:renderURL>
<portlet:renderURL var="advertiselistUrl">
    <portlet:param name="jspPage" value="/jsps/advertise/AdvertiseList.jsp" />
</portlet:renderURL>

<%
if(!themeDisplay.isSignedIn())
                                                              {
%>
<script type="text/javascript">
    window.location="<%=themeDisplay.getURLSignIn()%>";
</script>
<%} %>

<%
    String loading_img_path = request.getContextPath()
            + "/img/ajax_loader.gif";
%>
<script src="<%=request.getContextPath()%>/js/jquery.min.js"></script>
<script
    src="<%=request.getContextPath()%>/lib/datatables/jquery.dataTables.min.js"></script>
<script
    src="<%=request.getContextPath()%>/lib/datatables/jquery.dataTables.sorting.js"></script>
<script src="<%=request.getContextPath()%>/js/gebo_tables.js"></script>
<%  String sRoleName=null;
boolean isReseller= Common.CheckisReseller(themeDisplay);
if(isReseller){
    sRoleName="Reseller";
}
else{   
    sRoleName="Advertiser";
}   %>

<nav>
    <div id="jCrumbs" class="breadCrumb module">
        <ul>
            <li><a href="#"><i class="icon-home"></i></a></li>
            <li><a href="#"><%=sRoleName%></a></li>
            <li>Ads</li>
        </ul>
    </div>
</nav> 
```

现在问题出现在标签之前的某个地方

```
<nav>
        <div id="jCrumbs" class="breadCrumb module"> 
```

让我给你一张 mozila firebug 的图片 ![在此处输入图像描述](../Images/b6489682ee2f17c5ee7036324238a1e6.png)

在我的机器服务器中，它运行良好。但不知道当我尝试导出战争甚至尝试使用 eclipse 进行部署时会发生什么......它在我的 jsp 页面中显示了这个不需要的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:46:52.737

代替

```
<%@page import="com.liferay.util.portlet.PortletProps"%>; 
```

和

```
<%@page import="com.liferay.util.portlet.PortletProps"%> 
```

# android - 安卓设计 Galaxy 2 和 Galaxy 3

> ID：14723285
> 
> 赞同：1
> 
> 时间：2013-02-06T06:53:54.017
> 
> 标签：android, android-layout

我正在尝试创建一个针对 Galaxy S2 和 Galaxy S3 优化的 android 应用程序。我为 Galaxy S3 创建了图像并将它们放在 xhdpi 文件夹中。之后，我将图像减少 75% 并将它们放在 hdpi 文件夹中（根据 Android 多密度指南）。

问题是 S2 不仅密度较低，而且屏幕更小，因此仅调整 75% 大小的图像太大而无法使用。

示例：Galaxy S3 中的全宽图像将是 720 像素宽，75% 是 540 像素，大于我在 Galaxy S2 中全宽所需的 480 像素宽。

问题是我同时有 2 种不同的密度和 2 种不同的屏幕尺寸。

如何处理多密度 + 多屏幕尺寸？

我是否应该只创建具有 G2 和 G3 特定尺寸的特定图像，或者有一种方法（通过代码）告诉手机自动将图像调整到特定尺寸（例如，我提供的图像最初是宽度540 像素，但我告诉手机将其重新缩放到 480 像素，以便在 Galaxy 2 中调整全宽。

我很清楚 G3 的图像必须是 xhdpi 和 G2 hdpi，但问题更多是关于如何明智地处理不同的屏幕尺寸。

谢谢，

大卫

# javascript - this.variable 未定义

> ID：14723290
> 
> 赞同：0
> 
> 时间：2013-02-06T06:54:23.033
> 
> 标签：javascript, dojo

您好，我在以下代码段中收到错误 this._radioButtons 未定义（** 之间的代码）。我在这里缺少关于关闭的东西吗？

```
_adjustChoices: function(choices) {
            // TODO Tear down all the old radion buttons and their change handlers.
            debugger;
            this._radioButtons = [];
            this._changeHandlers = [];
            array.forEach(choices, function(choice) {
                var radioButton = new RadioButton(lang.mixin({
                    name: this._clusterName
                }, choice));
                **this._radioButtons.push(radioButton);**
                this._changeHandlers.push(connect.connect, radioButton, "onChange", lang.hitch(this, function(value) {
                    // TODO Figure out which radio button is selected and get its value.
                    //var radioButton = ????;
                    this.set("value", radioButton.get("checked"));
                }));
            });
        }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:09:37.290

您在`array.forEach(choices, function(choice) { /* your code here*/ })`回调函数内部，因此`this`引用了该函数。添加`this`作为第三个参数以强制上下文：

```
array.forEach(choices, function(choice) { 

    // YOUR CODE HERE

}, this);  // => here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:17:25.890

在我个人看来，可以通过在有问题的函数范围之外声明某种指针来提高可读性，例如

```
// code code code
_adjustChoices: function(choices) {
    var _this = this;
    // rest of your code...

    array.forEach(choices, function(choice) {
        //stuff you do
        var radioButton = new RadioButton(lang.mixin({
                name: _this._clusterName                //access it this way
            }, choice));
    }
} 
```

这样，就可以访问每个`this`-pointer 甚至将其命名为`this_adustChoices`...

# ocaml - 可以用frama-c做头文件分析吗？

> ID：14723291
> 
> 赞同：6
> 
> 时间：2013-02-06T06:54:26.610
> 
> 标签：ocaml, frama-c

我将 frama-c 视为在 OCaml 中处理 C 头文件的一种方式（例如，用于生成语言绑定）。它很有吸引力，因为它看起来是一个文档齐全且维护良好的项目。但是，经过大量谷歌搜索和文档搜索后，我找不到任何适合该目的的内容。我只是错过了执行此操作的正确方法，还是超出了 frama-c 的范围？与其他一些插件相比，这似乎是一件相当微不足道的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:34:08.277

正如 Pascal 所说，我认为从命令行是不可能的，但是因为无论如何您都必须编写一些代码，所以您可以设置 flag `Rmtmps.keepUnused`。这是一个可用于查看声明的脚本：

```
let main () =
  Rmtmps.keepUnused := true;
  let file = File.from_filename "t.h" in
  let () = File.init_from_c_files [ file ] in
  let _ast = Ast.get () in
  let show_function f =
    let name = Kernel_function.get_name f in
    if not (Cil.Builtin_functions.mem name) then
      Format.printf "Function @[<2>%a:@ @[@[type: %a@]@ @[%s at %a@]@]@]@."
        Kernel_function.pretty f
        Cil_datatype.Typ.pretty (Kernel_function.get_type f)
        (if Kernel_function.is_definition f then "defined" else "declared")
        Cil.d_loc (Kernel_function.get_location f)
in Globals.Functions.iter show_function

let () = Db.Main.extend main 
```

要运行它，您必须使用如下`-load-script`选项：

```
$ frama-c -load-script script.ml 
```

开发插件将更适合更复杂的处理（请参阅*开发人员手册*），但脚本使其易于测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:06:30.603

在当前状态下，不幸的是，不可能使用 Frama-C 来解析既未定义也未使用的函数声明。

日：

```
int mybinding (int x, int y); 
```

这为您提供了标准化 AST 的视图。标准化意味着可以简化的所有内容是：

```
$ frama-c -print t.h
[kernel] preprocessing with "gcc -C -E -I.  t.h"
/* Generated by Frama-C */ 
```

不幸的是，由于`mybinding`既没有使用也没有定义，它被删除了。

可以选择保留带有规范的声明，但您想要的是保留所有声明的选项。我从来没有注意到这样的选择：

```
$ frama-c -kernel-help
...
-keep-unused-specified-functions  keep specified-but-unused functions (set by
                    default, opposite option is
                    -remove-unused-specified-functions) 
```

保持功能符合规范的选项并不能满足您的要求：

```
$ frama-c -keep-unused-specified-functions -print t.h
[kernel] preprocessing with "gcc -C -E -I.  t.h"
/* Generated by Frama-C */ 
```

# python - 字符串中的字符串列表

> ID：14723292
> 
> 赞同：-2
> 
> 时间：2013-02-06T06:54:28.113
> 
> 标签：python

如何在 python 中编写表达式来检查字符串是否包含提供的任何字符串。像这样的东西：

```
s = 'winter summer spring fall'

# i like fall and spring
i_like = 'fall', 'spring' in s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T06:55:39.347

使用内置`any`函数：

```
i_like = any(i in s for i in ('fall', 'spring')) 
```

这将检查元组中的任何元素是否在字符串中。

# c# - 如何使用应用于 winRT XAML 应用程序中的文本框的自定义字体系列将文本与中心对齐

> ID：14723294
> 
> 赞同：0
> 
> 时间：2013-02-06T06:54:44.230
> 
> 标签：c#, xaml, winrt-xaml

我正在开发 winRT C# 应用程序。我有带有自定义字体系列的文本框。由于自定义字体系列，我在文本框中的文本与文本框的顶部对齐。我试图将 VerticalContentAlignment 设置为“中心”，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:06:13.647

我不太确定这是因为您的字体，更可能是`TextBox`. 我会查看您的控件模板`TextBox`并检查您`Setter`的 's 并`ContentPresenter`查看是否没有设置属性来实现它。否则，我认为您可以通过以下方式触摸它；

```
<TextBox>
  <TextBox.Resources>
      <Style TargetType="TextBlock">
         <Setter Property="VerticalAlignment" Value="Center"/>
      </Style>
  </TextBox.Resources>
</TextBox> 
```

# jquery - jQuery 验证和接受="image/*"

> ID：14723300
> 
> 赞同：3
> 
> 时间：2013-02-06T06:55:06.880
> 
> 标签：jquery, jquery-validate

我正在处理一个表单，它有一些文本字段和以下输入元素：

```
<input class='ignore' name='photo' id='photo' type='file' accept="image/*"/> 
```

另外，我有脚本：jQuery、jQueryUI、jQuery 验证、jQuery unobtrusive 和 unobtrusive-ajax。我认为这是最常见的一组 jQuery 脚本。

但是我遇到了非常痛苦的问题。在我在那里选择图像后，此输入始终标记为错误。对于所有浏览器也是如此。

我试图添加

```
$("#application-form").validate({
   ignore: ".ignore"
}) 
```

但这没有帮助。所以，我真的想知道如何处理这个问题......

PS。我还尝试通过添加此脚本而不是输入元素来使用某种解决方法：

```
$("#photo-container").html("<input class='ignore' name='photo' id='photo' type='file' accept='image/*'/>   "); 
```

但得到了完全相同的行为

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:04:25.837

解决了！

```
 $("#photo").rules("add", {
        accept: "jpg|jpeg|png|ico|bmp"
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-22T07:31:08.227

这对我来说效果很好。

```
 $("#application-form").validate({
    rules: {
        photo: {
            required: true,
            extension: "jpg|jpeg|png|ico|bmp"
        }
    },
    messages: {
        photo: {
            required: "Please upload file.",
            extension: "Please upload file in these format only (jpg, jpeg, png, ico, bmp)."
        }
    },
    errorElement: "span",
    errorPlacement: function (error, element) {
        error.addClass("help-block");
        if (element.prop("type") === "checkbox") {
            error.insertAfter(element.parent("label"));
        } else {
            error.insertAfter(element);
        }
    },
    submitHandler: function () {
        //do your stuff here
    }
}); 
```

注意：您必须包含`additional-methods.js`这些方法，因为`extension`核心验证插件中不包含这些方法。

```
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.js"></script> 
```

# android - 安卓。在真实设备上调试 (Nexus 7)

> ID：14723301
> 
> 赞同：6
> 
> 时间：2013-02-06T06:55:18.567
> 
> 标签：android, eclipse, adb, adt

人，请帮忙。不知道要做什么。安装了Android SDK，一切正常。创建第一个应用程序，代码正常，编译错误不会。但是要在模拟器上测试整个事情 - “地狱般的地狱”。

我有一个华硕 Nexus 7（平板电脑）。我该如何调试它？Eclipse 和 adb 没办法看到。

**ps**是的，当然我把平板电脑带到“开发人员”并检查“调试USB” **ps2。**是的，我把USB插入电脑。 **ps3。**木姿势用SDK Manager（也试过放华硕官网）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T07:02:17.370

这似乎在这里得到了回答： [在 Eclipse 的 Android 设备中没有看到 Nexus7](https://stackoverflow.com/questions/11533228/not-seeing-nexus7-in-eclipses-android-devices)。

特别注意对评分最高的答案的评论，它建议直接从华硕[这里](http://support.asus.com/Download.aspx?SLanguage=en&m=Nexus%207&p=20&s=16 "华硕支持 - Nexus 7")获取驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T20:12:41.163

2小时后破解...

1.  下载此 USB 驱动程序： http: [//dlcdnet.asus.com/pub/ASUS/EeePAD/nexus7/usb_driver_r06_windows.zip](http://dlcdnet.asus.com/pub/ASUS/EeePAD/nexus7/usb_driver_r06_windows.zip)

2.转到设备管理器，右键单击nexus设备并选择属性，选择“硬件”，然后选择更新驱动程序，选择手动并选择您打开zip文件的文件夹，然后按应用。

3.在 nexus 中打开您的设置。转到：“关于设备”，在页面底部并按 7 次。

4.打开开发者菜单并启用USB调试。5.最后在设置菜单中按存储，点击左上角出现的菜单。按连接usb到电脑，选择第二个选项（PTP）。

这应该可以解决问题，他们不能让它比这更简单......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-15T09:10:47.233

从下面的网站

[http://www.asus.com/Tablets_Mobile/Nexus_7/HelpDesk_Download/](http://www.asus.com/Tablets_Mobile/Nexus_7/HelpDesk_Download/)

下载 USB -> 适用于 Windows 的 Nexus 7 USB 驱动程序

![在此处输入图像描述](../Images/ad82e71ffd50e3008271bc9ed16a1f23.png)

解压

然后按照以下网站上的说明进行操作：

[http://www.theandroidsoul.com/nexus-7-2013-drivers-installation-guide/](http://www.theandroidsoul.com/nexus-7-2013-drivers-installation-guide/)

步骤 #5 的示例，将其指向此位置：

C:\Users\Gene\Documents\Computer Setup（已安装程序）\Asus Nexus Device Drivers\usb_driver

# iphone - iPhone 中的 Facebook Graph API 在 2 月 6 日更改后无法正常工作

> ID：14723304
> 
> 赞同：6
> 
> 时间：2013-02-06T06:55:37.407
> 
> 标签：iphone, facebook, facebook-graph-api, ios6

**我收到来自 facebook 的警报和邮件如下：**

2013 年 2 月的重大更改（星期日） 您的应用程序 需要针对 2013 年 2 月的重大更改进行更新。一旦您的应用程序合规，请在应用程序仪表板的“高级”部分中将迁移设置设置为“已启用”。

我也启用了迁移设置，但仍然出现错误。我还在此处附上了错误和警报的屏幕截图。

如果有人解决了这个问题，请帮忙。

![在此处输入图像描述](../Images/b5a1f593ea71cfeeb2f39c9fbc77980a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T10:25:32.830

从此网址更改 facebook 网址..

> [https://graph.facebook.com/oauth/authorize?client_id=404196699634359&redirect_uri=http://www.facebook.com](https://graph.facebook.com/oauth/authorize?client_id=404196699634359&redirect_uri=http://www.facebook.com) ....

至

> [http://facebook.com/dialog/oauth?client_id=404196699634359&redirect_uri=http://www.facebook.com](http://facebook.com/dialog/oauth?client_id=404196699634359&redirect_uri=http://www.facebook.com) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:21:46.003

您是否设法解决了您的问题？我搜索了一段时间，发现了一个非常简单的解决方案：

*   转到您的应用设置并选择高级选项卡。
*   将“应用类型”更改为网络

就是这样，它使我的应用程序正常工作，希望对您有所帮助。

![在此处输入图像描述](../Images/7702b9adb5ad032e8360f8a2c4856e00.png)

# android - Android 编码（我的应用程序不断崩溃）

> ID：14723309
> 
> 赞同：0
> 
> 时间：2013-02-06T06:55:47.653
> 
> 标签：android

嗨，我启动了一个应用程序并想对其进行测试，所以我使用了 avd，当应用程序启动时它崩溃了，我希望有人能提供帮助

这是我的java类

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MemoryInfo mi = new MemoryInfo();
    ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    activityManager.getMemoryInfo(mi);
    long availableMegs = mi.availMem / 1048576L;

    TextView manufacturerTextView = (TextView)findViewById(R.id.mem);
    manufacturerTextView.setText((int) mi.availMem);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

LOGCAT

02-06 07:10:05.202: E/AndroidRuntime(771): 致命异常: main 02-06 07:10:05.202: E/AndroidRuntime(771): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.test/com.example.test.MainActivity}：android.content.res.Resources$NotFoundException：字符串资源 ID #0x18184000 02-06 07:10:05.202：E/AndroidRuntime(771)：在 android.app.ActivityThread .performLaunchActivity(ActivityThread.java:2180) 02-06 07:10:05.202: E/AndroidRuntime(771): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 02-06 07:10:05.202: E /AndroidRuntime(771): 在 android.app.ActivityThread.access$600(ActivityThread.java:141) 02-06 07:10:05.202: E/AndroidRuntime(771): 在 android.app.ActivityThread$H.handleMessage(ActivityThread .java:1234)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T06:58:28.197

采用

```
manufacturerTextView.setText(String.valueOf((int) mi.availMem)); 
```

反而

```
manufacturerTextView.setText((int) mi.availMem); 
```

用于在 TextView 中显示整数值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:00:11.550

将其转换为字符串以显示

# java - 使用 thymeleaf 模板通过 Spring 发送邮件

> ID：14723310
> 
> 赞同：6
> 
> 时间：2013-02-06T06:55:50.063
> 
> 标签：java, spring, jakarta-mail, thymeleaf

我正在尝试使用 Spring 应用程序的 Thymeleaf 模板发送邮件，我从这里获取参考 [https://github.com/thymeleaf/thymeleafexamples-springmail/](https://github.com/thymeleaf/thymeleafexamples-springmail/)

我没有收到任何错误，但它仍然不起作用..我使用与 github 中给出的相同代码仍然没有运气...有人可以建议如何做到这一点吗？

以下是用于发送邮件的方法...

```
public void sendSimpleMail(
        final String recipientName, final String recipientEmail, final Locale locale) 
        throws MessagingException {
    final Context ctx = new Context(locale);
    ctx.setVariable("name", recipientName);
    ctx.setVariable("subscriptionDate", new Date());
    ctx.setVariable("hobbies", Arrays.asList("Cinema", "Sports", "Music"));
    final MimeMessage mimeMessage = this.mailSender.createMimeMessage();
    final MimeMessageHelper message = new MimeMessageHelper(mimeMessage, "UTF-8");
    message.setSubject("Example HTML email (simple)");
    message.setFrom("thymeleaf@example.com");
    message.setTo(recipientEmail);
    // Create the HTML body using Thymeleaf
    final String htmlContent = this.templateEngine.process("email-simple.html", ctx);
    message.setText(htmlContent /* isHtml */);

    // Send email
    System.out.println("........");
   this.mailSender.send(mimeMessage);
} 
```

如果我删除使用 thymeleaf 创建 html 正文的行并发送普通邮件，它可以工作，但不能使用模板 ..

这是导致问题的行......只需重定向到错误页面

```
final String htmlContent = this.templateEngine.process("email-simple.html", ctx); 
```

以下是我得到的错误..

```
org.thymeleaf.exceptions.TemplateProcessingException: Resource resolution by ServletContext with org.thymeleaf.resourceresolver.ServletContextResourceResolver can only be performed when context implements org.thymeleaf.context.IWebContext [current context: org.thymeleaf.context.Context]
    at org.thymeleaf.resourceresolver.ServletContextResourceResolver.getResourceAsStream(ServletContextResourceResolver.java:74)
    at org.thymeleaf.TemplateParser.parseDocument(TemplateParser.java:254)
    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:812)
    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:769)
    at com.ivb.coep.other.EmailService.sendSimpleMail(EmailService.java:72)
    at com.ivb.coep.controller.MainController.sendTextMail(MainController.java:83)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T10:01:13.007

我终于让它工作了......我改变了以下行

```
 final Context ctx = new Context(locale); 
```

和

```
final WebContext ctx = new WebContext(request,request.getContext(),locale); 
```

现在我可以发送任何模板或附件任何东西都很好..!!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-10T11:48:18.703

您遇到此问题是因为您似乎在 WEB-INF/classes 文件夹中没有邮件文件夹。

根据下面提到的配置，它期望在 WEB-INF/classes 文件夹内有一个邮件文件夹。

```
<bean id="emailTemplateResolver"     class="org.thymeleaf.templateresolver.ClassLoaderTemplateResolver">
    <property name="prefix" value="mail/" />
    <property name="templateMode" value="HTML5" />
    <property name="characterEncoding" value="UTF-8" />
    <property name="order" value="1" />
    <!-- Template cache is true by default. Set to false if you want -->
    <!-- templates to be automatically updated when modified.        -->
    <property name="cacheable" value="true" />
</bean> 
```

因此，在“资源”文件夹中创建一个名为“邮件”的文件夹，并将邮件模板保存在“邮件”文件夹中。确保在部署时在 WEB-INF/classes 文件夹中获得了这个“邮件”文件夹。这应该可以解决您的问题

IMO，我们不应该使用 WebContext，因为它需要一个“请求”对象，并且将邮件与请求强耦合并不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T08:15:49.227

如果你想在 /WEB-INF/ 下找到你的模板但不想使用 ServletContextTemplateResolver，那么试试 SpringResourceTemplateResolver，例如。

```
TemplateResolver templateResolver = new SpringResourceTemplateResolver();
templateResolver.setPrefix("/WEB-INF/mailtemplates/"); 
```

# c# - 创建证书时未处理的加密异常

> ID：14723312
> 
> 赞同：1
> 
> 时间：2013-02-06T06:55:51.577
> 
> 标签：c#, .net, cryptography, x509certificate, makecert

我正在创建这个简单的控制台应用程序，它将创建我自己的证书。这是我的代码。

```
var fi = new FileInfo("certificate.cer");
if (!fi.Exists)
{
  var startInfo = new ProcessStartInfo();
  startInfo.FileName = "makecert.exe";
  startInfo.Arguments = "-sv SignRoot.pvk -cy authority -r sha1 -n \"CN=Certificate\" -ss my -sr localmachine certificate.cer";
  Process.Start(startInfo);
}
X509Certificate.CreateFromCertFile("certificate.cer"); 
```

但是为什么我在最后一行代码中得到了这个？

```
CryptographicException was unhandled.
Message=The system cannot find the file specified. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T07:08:17.623

在使用证书之前，您需要等待`makecert`进程退出。

```
 Process
    .Start(startInfo)
    .WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:07:46.443

我通过使用批处理（.bat）文件解决了这种情况，因为我发现它更容易。并让c#在程序启动时运行批处理文件。谢谢您的帮助。:)

# c++ - 如何将奇怪重复的模板模式用于桥接模式？

> ID：14723314
> 
> 赞同：1
> 
> 时间：2013-02-06T06:55:56.690
> 
> 标签：c++, c++11, design-patterns, crtp, bridge

我一直在研究 Curiously Recurring Template Pattern 以确定如何使用它来实现桥接设计模式。

我的问题是将 IBridgeConnector::GetBridgeImpl 方法连接（连接）到 Bridge::GetBridgeImpl 方法，因为覆盖方法实际上是模板化的。

由于虚拟调度在这种情况下不起作用，将这些方法相互指向的最佳方法是什么？职能代表？有没有更好的模式呢？

这应该怎么做？

谢谢您的帮助！

在没有任何地方的 shared_ptrs 以及 OpenGL 和 DirectX 调用的情况下，我做了最好的代码简化。:) 希望这对将来的某人有用！

```
#include <string>
/********************************************************************/
class BridgePart
{
public:
    BridgePart * OtherPart;
};

/********************************************************************/
// Connects a BridgeSource and a BridgeImplementation
class BridgeConnector
{
public:
    static BridgeConnector * implementor;

    // Need a way, (Function Delegates?) to point this method
    // This method will loop until stack overflow.
    template <typename ValueTemplateType>
    BridgePart * GetBridgeImpl(ValueTemplateType * source)
    {
        return implementor->GetBridgeImpl<ValueTemplateType>(source);
    }
};
BridgeConnector * BridgeConnector::implementor = nullptr;

/********************************************************************/
// Where the Magic is At, (CRTP)
template <typename BridgeImplementationTemplateType>
class Bridge : public BridgeConnector
{
public:
    template <typename ValueTemplateType>
    IBridgePart * GetBridgeImpl(IBridgePart * source)
    {
        // NOTE:  This method never gets called.
        // CRTP Magic Here to Semi-Specify Pure Virtual Methods
        return static_cast<BridgeImplementationTemplateType>(this)
            ->GetBridgeImpl( (ValueTemplateType) source);
    }
};

/********************************************************************/
class BridgeImplementation1 : 
    public Bridge<BridgeImplementation1>,
    public BridgePart
{
public:
    class CustomImpl : public BridgePart
    {
    public:
        template <typename SourceTemplateType>
        BridgePart(SourceTemplateType source){}
            /* Does proprietary stuff. */
    };

    template <typename ValueTemplateType>
    BridgePart * GetBridgeImpl(ValueTemplateType & source)
    {
        return new CustomImpl<ValueTemplateType>(source);       
    }
    // Constructor
    BridgeImplementation1()
    {
    }
};

/********************************************************************/
class BridgeSource1 : public BridgePart {};
class BridgeSource2 : public BridgePart {};
class Client
{
    BridgeSource1 source1;
    BridgeSource2 source2;
    BridgeConnector * connector;
    bool usingImpl1;

    Client()
    {
        usingImpl1 = true; // from config file.
        connector = new BridgeConnector();
        connector->implementor = usingImpl1 
            ? (BridgeConnector *) new BridgeImplementation1()
            : nullptr; // (BridgeConnector *) new BridgeImplementation2();  
        // removed to shorten code.
    }

    void Init()
    {
        source1.OtherPart = connector->GetBridgeImpl<BridgeSource1>(& source1);
        source2.OtherPart = connector->GetBridgeImpl<BridgeSource2>(& source2); 
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:13:22.787

当你`LoadDriver`在`Client::Init`函数中调用时，`ValueTemplateType`模板参数是`std::string*`，即一个指针。桥实现类`BridgeImplementation1`并`BridgeImplementation2`具有*不*带指针的功能。所以当编译器试图找到一个匹配的`LoadDriver`函数时，它不会考虑接受非指针参数的函数，只考虑接受指针参数的函数。

您应该更改`LoadDriver`函数`BridgeImplementation1`并`BridgeImplementation2`采用指针参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T07:21:41.850

我认为你对 CRTP 有点误解。它不是虚拟调度的插件替代品。在您的情况下，IBridge 没有虚拟调度，因此调用 IBridge->LoadDriver 将始终为您提供默认的基类实现，无论底层派生类如何。如果你想要一个通用接口，你需要某种虚拟调度。CRTP 只是在不需要的情况下避免虚拟调度的一种方式，例如当基类成员函数调用其他虚拟函数时。

如果您想在您的情况下完全避免虚拟调度，您不能完全将客户端与 Bridge 分离，您需要在 Bridge 上模板 Client 与仅在 Derived 上模板相比并没有真正给您带来任何优势。

这是做你想做的事的机会。它假设您通过 IBridge 传递一些通用指针，Bridge 使用 CRTP 解释并向下传递给 BridgeImpl。显然，此时您已经放弃了对参数类型安全的所有希望。

```
class IBridge {
    virtual void LoadDriver(void *) = 0;
};

template <typename Impl>
class Bridge : public IBridge {
    void LoadDriver(void * v) override {
        static_cast<Impl*>(this)->LoadDriverImpl(*static_cast<Impl::arg_type *>(v));
    }
};

class BridgeImpl : public Bridge<BridgeImpl> {
    typedef std::string arg_type;
    void LoadDriverImpl(const std::string & s){ /*...*/ }
}; 
```

# c# - 在 C# 中的 DateTimePicker 中设置 Null 值

> ID：14723316
> 
> 赞同：4
> 
> 时间：2013-02-06T06:55:59.247
> 
> 标签：c#, winforms

我正在`winform`用 C# 开发一个基于桌面的应用程序。我希望用户将 DateTimePicker 设置为`Null`. 我正在开发一个搜索框，如果日期设置为，我想忽略它`Null`

这是我正在做的事情：

```
 this.dateTimePicker2.CustomFormat = " ";
     this.dateTimePicker2.Format = DateTimePickerFormat.Custom;

     private void dateTimePicker2_ValueChanged(object sender, EventArgs e)
     {
         this.dateTimePicker2.CustomFormat = "dd-MM-yy";
     } 
```

到目前为止，一切都很好。但是，一旦用户选择了日期，`dateTimePicker2`控件就会显示一些日期（用户选择的日期）。无法再次将日期设置为空。我不热衷于启用与`datetimepicker`控件关联的复选框。

我想知道是否可以将`datetimepicker`日期设置为`null`.

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T07:03:02.813

这是来自旧帖子的参考，但该站点上的其他用户已在此处发布

```
// Use ValueChanged to decide if the value should be displayed:
    dateTimePicker1.ValueChanged += (s, e) => { dateTimePicker1.CustomFormat = (dateTimePicker1.Checked && dateTimePicker1.Value != dateTimePicker1.MinDate) ? "MM/dd/yyyy" : " "; };

    //When getting the value back out, use something like the following:
    DateTime? dt = (dateTimePicker1.Checked && dateTimePicker1.Value != dateTimePicker1.MinDate) ?  (DateTime?) dateTimePicker1.Value : null; 
    // or
    DateTime dt2 = (dateTimePicker1.Checked && dateTimePicker1.Value != dateTimePicker1.MinDate) ?  dateTimePicker1.Value : DateTime.MinValue; 
```

或者您可以将 CustomFormat 设置为 " " 一个空白区域，如下所示

```
dateTimePicker1.CustomFormat= " "; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-02T19:07:16.383

添加`checkbox`到您的`datetime`选择器属性：

```
string datevalue = dateTimePicker2.Checked != true ? "N/A": dateTimePicker2.Text;** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:09:21.417

> 我想知道是否可以将 datetimepicker 日期设置为 null

无法设置`DateTimePicker.Value`为`null`，因为它的类型不可为空。MSDN 说：

> 如果代码或用户未更改 Value 属性，则将其设置为当前日期和时间 (DateTime.Now)。

但这不是问题。您应该将某些绑定属性设置为空，而不是`DateTimePicker.Value`：

```
public class MyModel : INotifyPropertyChanged
{
    public DateTime? DateTimeFilter
    {
        get { return dateTimeFilter; }
        set
        {
            if (dateTimeFilter != value)
            {
                dateTimeFilter = value;
                OnPropertyChanged("DateTimeFilter");
            }
        }
    }
    private DateTime? dateTimeFilter;        

    // INotifyPropertyChanged implementation is omitted
}

public partial class Form1 : Form
{
    private readonly MyModel model;

    public Form1()
    {
        InitializeComponent();

        model = new MyModel();
        dateTimePicker1.DataBindings.Add("Value", model, "DateTimeFilter", true, DataSourceUpdateMode.OnPropertyChanged, DateTime.Now);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(model.DateTimeFilter.HasValue ? string.Format("User has selected '{0}'.", model.DateTimeFilter) : "User hasn't selected anything.");
    }

    private void button2_Click(object sender, EventArgs e)
    {
        // here's the data binding magic: our model's property becomes null, 
        // and datetimepicker's value becomes DateTime.Now, as it was initially set
        model.DateTimeFilter = null;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T07:02:44.897

我认为它不可能，因为 DateTime 不可为空。

但是您可以使用`DateTime.MinValue`这种方式，您仍然可以轻松比较

```
if (datetimepicker.DateTime == DateTime.MinValue)
{
  // just as good as null, maybe
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-19T23:20:31.460

在 SharePoint 应用程序页面上使用 DateTimeControl 时，这对我有用。

```
if (dtcOpenDate.SelectedDate != DateTime.Now)
{
    item["Open Date"] = dtcOpenDate.SelectedDate;    
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-13T02:40:12.957

DateTime 不是可为空的类型。

但是您可以做到这一点：
只需在日期选择器上添加一个复选框，您可以在属性中找到它并将**ShowCheckBox**设置为**True**。
您可以使用此条件：

```
if(datePicker.Checked){
    //Do some stuff to ignore the Date Picker value
} 
```

有关其他信息，我使用的是 Microsoft Visual Studio 2010，我还没有检查其他 IDE。
希望这有帮助。
干杯...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-04T23:22:36.560

此实现将原始 Value 属性替换为可空的 DateTime，该 DateTime 处理 setter 中的 CheckBox 状态。默认日期可以灵活设置，在我的情况下，年初日期比最小值或今天更容易使用。设置自定义格式“”当我觉得 null 并不能改善用户体验但可以随意更改时，我选择保持简单。

```
public class DateTimePickerAdvanced : DateTimePicker
{
    public DateTime DefaultDate { get; set; }

    public DateTimePickerAdvanced()
    {
        DefaultDate = new DateTime(2020, 01, 01);
    }

    public new DateTime? Value
    {
        get
        {
            return this.ShowCheckBox && !this.Checked ? null : (DateTime?)base.Value;
        }
        set
        {
            if (value == null && !this.ShowCheckBox)
            {
                throw new Exception("ShowCheckBox must be enabled in order to set DateTimePicker to null");
            }

            base.Value = value == null ? DefaultDate : (DateTime)value;

            if (this.ShowCheckBox)
            {
                if (value == null && this.Checked)
                {
                    this.Checked = false;
                }
                else if (value != null && !this.Checked)
                {
                    this.Checked = true;
                }
            }
        }
    }
} 
```

# wpf - Matlab 生成器 NE

> ID：14723318
> 
> 赞同：0
> 
> 时间：2013-02-06T06:56:14.273
> 
> 标签：wpf, performance, matlab, .net-assembly

我将一个项目部署到 .NET 程序集文件中。一个主函数文件（.m 文件）被拖入**类**部分。三个帮助文件被拖到**共享资源**部分。

在设置下，检查所有工具箱路径。在我的主要功能中，我只使用`norc`了 Neural Toolbox。当我构建程序集文件时，它最终为 12mb。

在我的主 WPF 项目中引用它后，加载时间令人难以忍受，每次执行一些计算大约需要 10s 来计算。

当我在 Matlab 中运行该函数时，只需不到 2 秒。

总之，我目前面临两个问题：1.) 大型 .NET 程序集文件和 2.) 严重的性能下降。

我正在使用 Win7 和 Matlab 2012b。有没有人遇到过这样的问题并解决了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:28:35.383

是否选择工具箱可能会对最终大小产生很大的影响，尤其是在您拥有大量工具箱的情况下。依赖项检查器不能总是准确地确定您的代码调用了哪些函数（它可能依赖于运行时的许多事情），因此它包含了代码可以调用的相当多的一组事情。取消选中您知道不使用的不必要的工具箱可以减少它包含的东西的数量，有时会非常显着。

然而，它可能仍然需要包含很多东西，而且它可能只是很大。

当您的 .NET 代码调用从 MATLAB 部署的 .NET 程序集时，它需要启动 MCR，这可能需要相当长的时间（几乎与 MATLAB 本身一样长），然后执行所需的任何操作。如果您可以在调用之间以某种方式保持引用组件的变量处于活动状态，那么您将只会获得一次启动成本。

# php - PHP按数组排序数组，匹配键

> ID：14723321
> 
> 赞同：1
> 
> 时间：2013-02-06T06:56:20.060
> 
> 标签：php, arrays, drupal

我的第一个数组：

```
normalArray
(
    [0] => Business Class
    [2] => Economy
    [6] => First Class
) 
```

我的排序数组：

```
sortArray
(
    [0] => Economy
    [1] => Business Class
    [2] => First Class
) 
```

我试图把这个作为我的结果

```
resultsArray
(
    [2] => Economy
    [0] => Business Class
    [6] => First Class
) 
```

请注意，键和值需要遵循正确的顺序。所以我需要按数组对数组进行排序，同时保留值的键。

我四处搜索并查看了许多不同的示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:07:42.190

试试这个[asort()](http://www.php.net/manual/en/function.asort.php)或[arsort()](http://www.php.net/manual/en/function.arsort.php)

例子：

```
<?php
$fruits = array("d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple");
asort($fruits);
--OR--
arsort($fruits);
foreach ($fruits as $key => $val) {
    echo "$key = $val\n";
}
?> 
```

上面的示例将输出：

```
a = orange
d = lemon
b = banana
c = apple 
```

有关更多**排序功能属性**，请查看此[链接](http://php.net/manual/en/array.sorting.php)。

这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:17:38.480

试试这个[arsort()](http://www.php.net/manual/en/function.arsort.php)

例子：

```
 normalArray
(
    [0] => Economy
    [2] => Business Class
    [6] => First Class
) 
```

上面的示例将输出：

```
resultsArray
(
    [2] => Business Class
    [0] => Economy
    [6] => First Class
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:59:33.600

尝试这个：

```
$map = array_flip($sortArray);
uasort($normalArray,function($a,$b) use ($map) {return $map[$a] < $map[$b] ? -1 : 1}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T08:35:15.297

```
asort($normalArray); 
```

这维护了数组的索引。

参考： http: [//php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T07:02:00.753

我相信您正在寻找的是[asort](http://php.net/manual/en/function.asort.php)。

# mysql - 我要找工资第22高的人

> ID：14723322
> 
> 赞同：3
> 
> 时间：2013-02-06T06:56:38.367
> 
> 标签：mysql

我正在使用 MySQL，我在员工表中有 50 条记录。我想找到薪水第 22 位的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T06:58:55.110

使用[`LIMIT`](http://dev.mysql.com/doc/refman/5.5/en/select.html)，同时指定偏移量和行数。

要按最高薪水的顺序获得第 22 位的人，请执行以下操作：

```
SELECT person
FROM employee
ORDER BY salary DESC
LIMIT 21, 1 
```

注意`21`这里的使用。这是因为初始行（第 1 高薪水）的偏移量实际上是 0。因此，第 22 高薪水实际上将是 21 的偏移量（从 0 开始计数的第 21 行，或“跳过 21 行”）。

* * *

要获得*薪水第 22 位*的人，您将需要多一层间接性。尝试：

```
SELECT person
FROM employee
WHERE salary = (
    SELECT DISTINCT salary
    FROM employee
    ORDER BY salary DESC
    LIMIT 21, 1
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:23:31.273

这是另一个，考虑到你有重复的工资号码。如果您有一些重复，*我猜limit 将无法正确解决您的问题。*试试这样的，

```
SELECT aa.*
FROM   table1 aa
       INNER JOIN
        (
          SELECT @row:=@row+1 rankNo,
                 a.Salary
          FROM   (SELECT DISTINCT Salary FROM table1) a, 
                 (SELECT @row:=0) s
          ORDER  BY Salary DESC
        ) bb ON aa.Salary = bb.Salary AND
                bb.rankNo = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/58440/6)

考虑到你有这样的记录，

```
CREATE TABLE Table1
    (`EmpID` int, `Salary` int);

INSERT INTO Table1
    (`EmpID`, `Salary`)
VALUES
    (1, 10),
    (2, 12),  -- duplicate
    (3, 11),
    (4, 12),  -- duplicate
    (5, 14),
    (6, 12);  -- duplicate

╔═══════╦════════╗
║ EMPID ║ SALARY ║
╠═══════╬════════╣
║     1 ║     10 ║
║     2 ║     12 ║
║     3 ║     11 ║  -- you want to get this value (*2nd from the last value*)
║     4 ║     12 ║
║     5 ║     14 ║
║     6 ║     12 ║
╚═══════╩════════╝ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-03T18:29:07.867

```
SELECT MIN(salary) FROM (
    SELECT DISTINCT salary  FROM employee ORDER BY salary DESC LIMIT 22
) limited_salary 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T06:58:37.487

刚刚在这里回答了一个类似的问题： [选择所有行，除了最近的四个](https://stackoverflow.com/questions/14722982/select-all-rows-except-the-four-most-recent/14723003#14723003)

在您的情况下，您需要将 LIMIT 限制为 1，并将 OFFSET 限制为 22 位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T06:59:03.813

`LIMIT 21,1`

[如何找到列的第 n 个最高值？](https://stackoverflow.com/questions/2324108/how-to-find-nth-highest-value-of-a-column-in-mysql?rq=1)

[查询以查找列的第 n 个最大值](https://stackoverflow.com/questions/80706/query-to-find-nth-max-value-of-a-column)

# javascript - 未捕获的类型错误：使用主干创建子视图时未定义不是函数

> ID：14723328
> 
> 赞同：0
> 
> 时间：2013-02-06T06:57:05.020
> 
> 标签：javascript, jquery, backbone.js, backbone-views

我正在创建一个从主视图渲染的子视图 - FindRideView。

```
renderRide: function (item) {
        var RideView = new RideView({model: item}); // here
    this.$el.append(RideView.render().el);
    } 
```

但是，当我渲染视图时，
我得到一个`Uncaught TypeError: undefined is not a function //here`

我的应用程序结构是

```
 var RideView = Backbone.View.extend({});
 var FindRideView = Backbone.View.extend({
    renderRide:
    }); 
```

我检查了 RideView 是否有任何错误。但是当不从 FindRideView 调用时，它的工作完全正常。我想可能存在一些范围问题，但我不确定。将不胜感激一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:07:53.553

尝试在函数之外定义“RideView”。有关范围示例，请参见此：

[http://jsfiddle.net/54DRC/3/](http://jsfiddle.net/54DRC/3/)

```
var mynum;
mynum = 1;
function DontSetMyNum() {
    var mynum;
    mynum = 2;
}
function SetMyNum() {
    mynum = 3;
}
$(function() {
    $("body").append("<p>Initial = " + mynum + "</p>");
    DontSetMyNum();
    $("body").append("<p>After DontSetMyNum call = " + mynum + "</p>");
    SetMyNum();
    $("body").append("<p>After SetMyNum call = " + mynum + "</p>");
}); 
```

# perl - 如何比较两个文本文件并删除匹配的内容并在 perl 中传递给输出？

> ID：14723333
> 
> 赞同：2
> 
> 时间：2013-02-06T06:57:37.873
> 
> 标签：perl, file, compare

我有两个文本文件 text1.txt 和 text2.txt 如下

**文本1**

```
 ac
    abc
    abcd
    abcde 
```

**文本2**

```
 ab
    abc
    acd
    abcd 
```

**输出**

```
ac
abcde 
```

我需要比较这两个文件并`text1`在第二个文件中有匹配项时删除内容。

我想要 Perl 中的代码。目前我正在尝试下面的代码。

```
#!usr/bin/perl
use strict;
use warnings;

open (GEN, "text1.txt") || die ("cannot open general.txt");
open (SEA, "text2.txt") || die ("cannot open search.txt");
open (OUT,">> output.txt") || die ("cannot open intflist.txt");
open (LOG, ">> logfile.txt");

undef $/;
foreach (<GEN>) {

  my $gen = $_;
  chomp ($gen);
  print LOG $gen;

  foreach (<SEA>) {

    my $sea = $_;
    chomp($sea);
    print LOG $sea;

    if($gen ne $sea) {
      print OUT $gen;
    }
  }
} 
```

在此，我从 中获取所有内容`text1`，而不是不匹配的内容。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:58:59.667

您的主要问题是您未定义输入记录分隔符`$/`。这意味着*整个文件*将作为单个字符串读取，您所能做的就是说这两个文件是不同的。

删除`undef $/`，事情会工作得更好。然而，内部`for`循环将读取并打印所有`file2`与`file1`. 第二次遇到此循环时，已从文件中读取所有数据，因此根本不会执行循环体。您必须`file2`在外部循环内打开或将文件读入数组并循环遍历该数组。

再说一次，你真的想打印`file2`不等于每一行的所有行`file1`吗？

**更新**

正如我在评论中所写，听起来您想输出`text1`在`text2`. 使用哈希很容易实现：

```
use strict;
use warnings;

my %exclude;

open my $fh, '<', 'text2.txt' or die $!;
while (<$fh>) {
  chomp;
  $exclude{$_}++;
}

open $fh, '<', 'text1.txt' or die $!;
while (<$fh>) {
  chomp;
  print "$_\n" unless $exclude{$_};
} 
```

使用您在问题中显示的数据，产生此输出

```
ac
abcde 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:28:54.267

这是我的计划：

1.  读取哈希中第一个文件的内容，并带有出现次数的计数器。例如，使用您获得的数据：

    ```
    %lines = ( 'ac' => 1,
        'abc' => 1,
        'abcd' => 1,
        'abcde' => 1); 
    ```

2.  读取第二个文件，如果 key 存在则删除之前的 hash %lines。

3.  将密钥打印`%lines`到所需文件。

例子：

```
 use strict;

 open my $fh1, '<', 'text1' or die $!;
 open my $fh2, '<', 'text2' or die $!;
 open my $out, '>', 'output' or die $!;
 my %lines = ();

 while( my $key = <$fh1> ) {
    chomp $key;
    $lines{$key} = 1;
 }

 while( my $key = <$fh2> ) {
    chomp $key;
    delete $lines{$key};
 }

 foreach my $key(keys %lines){
    print $out $key, "\n";
 }

 close $fh1;
 close $fh2;
 close $out; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:05:33.963

我认为您应该读取数组中的 text2 ，然后在该数组的第二个 foreach 中使用该数组。

```
@b = <SEA>; 
```

否则在第二个循环中，文件指针已经在末尾

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T07:06:06.327

单程：

```
#!/usr/bin/perl
use strict;
use warnings;

$\="\n";

open my $fh1, '<', 'file1' or die $!;
open my $fh2, '<', 'file2' or die $!;
open my $out, '>', 'file3' or die $!;

chomp(my @arr1=<$fh1>);
chomp(my @arr2=<$fh2>);

foreach my $x (@arr1){
        print $out $x if (!grep (/^\Q$x\E$/,@arr2));
}

close $fh1;
close $fh2;
close $out; 
```

执行上述操作后，文件“file3”包含：

```
$ cat file3
ac
abcde 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T08:45:00.610

我想这样查看您的问题：

*   你有一组*S*中的字符串`file.txt`。
*   你有一组*F*中的禁止字符串`forbidden.txt`。
*   你想要允许的字符串，所以*S \ F* (setminus)。

Perl 中有一个实现一组字符串的数据结构：*哈希*。（它也可以映射到标量，但这在这里是次要的）。

所以首先我们创建我们拥有的线条集。我们让该文件中的所有字符串映射到`undef`，因为我们不需要该值：

```
open my $FILE, "<", "file.txt" or die "Can't open file.txt: $!";
my %Set = map {$_ => undef} <$FILE>; 
```

我们以同样的方式创建禁止集：

```
open my $FORBIDDEN, "<", "forbidden.txt" or die "Can't open forbidden.txt: $!";
my %Forbidden = map {$_ => undef} <$FORBIDDEN>; 
```

set 减号的工作方式类似于以下任何一种方式：

*   *对于S*中的每个元素*x*，当*x*不在*F*中时，*x*在结果集*R*中。

     ***```
    my %Result = map {$_ => $Set{$_}} grep {not exists $Forbidden{$_}} keys %Set; 
    ```*** 
****   结果集*R*最初是*S*。对于*F中的每个元素，我们从**R*中删除该项目：

    ```
    my %Result = %Set; # make a copy
    delete $Result{$_} for keys %Forbidden; 
    ```*** 

 **（该`keys`函数访问字符串集中的元素）

然后我们可以打印出所有的键：`print keys %Result`.

但是如果我们想保持顺序呢？散列中的条目也可以带有关联的值，那么为什么不包含行号呢？我们像这样创建集合*S*：

```
open my $FILE, "<", "file.txt" or die "Can't open file.txt: $!";
my $line_no = 1;
my %Set = map {$_ => $line_no++} <$FILE>; 
```

现在，这个值与字符串一起携带，我们可以在最后访问它。具体来说，我们按照行号对哈希中的键进行排序：

```
my @sorted_keys = sort { $Result{$a} <=> $Result{$b} } keys %Result;
print @sorted_keys; 
```

* * *

**注意：**所有这些都假定文件由换行符终止。否则，您将不得不`chomp`.**

# php - dojo1.8 - 不确定如何使用 dojo/request 读取选定的值并发布到 php 文件

> ID：14723337
> 
> 赞同：0
> 
> 时间：2013-02-06T06:57:52.997
> 
> 标签：php, mysql, ajax, dojo

嗨，我在发布选择节点的值时遇到问题，但什么也得不到。我正在使用 dojo/request。当我使用简单的 ajax 文件进行测试时，服务器上的 getuser1.php 正在工作。

在请求行，数据值可能不正确

请指教...谢谢

以下是两个脚本：- main.php 文件-

```
require(["dojo/parser", "dojo/ready","dijit/form/Select",
         "dojo/request","dojo/on","dojo/domReady!"],
function(parser, ready, Select, request, on){

    ready(function(){   

        console.debug('Rendering...');
        var selectX = new Select({
            name:'select_test',
            options:[
                {label:"<span class='NotinUse'><b>&nbsp&nbsp&nbsp. . .</b></span>", value:'0', selected:true},
                {label:"<span class='inUse'><b>&nbsp&nbspPeter Griffin</b></span>", value:'1'},
                {label:"<span class='inUse'><b>&nbsp&nbspLois Griffin</b></span>", value:'2'},
                {label:"<span class='inUse'><b>&nbsp&nbspJoseph Swanson</b></span>", value:'3'},
                {label:"<span class='inUse'><b>&nbsp&nbspGlenn Quagmire</b></span>", value:'4'},
            ], 
            style:{width:'150px'}
        },"select");

        on(formNode2, 'Change', function(evt){
            evt.stopPropagation();
            evt.preventDefault();

            request.post('getuser1.php',{   
                data:{select_test:this.value},
                timeout:2000
            }).then(function(response){
                dom.byId('line2').innerHTML=response;
            });
        });
    });
}); 
```

getuser1.php 文件：-

```
<?php 
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ajax_demo", $con);

$sql="SELECT * FROM user WHERE id = $q";

$result = mysql_query($sql);

// use stored function to return one result instead later. Write here after stored     procedure has been stored. 

echo "<table border='1'>
<tr>
<th width=100>Firstname</th>
<th width=100>Lastname</th>
<th width=100>Age</th>
<th width=100>Height</th>
<th width=100>Hometown</th>
<th width=100>Job</th>
</tr>";

while($row = mysql_fetch_array($result))
 {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Height'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";
  echo "<td>" . $row['Job'] . "</td>";
  echo "</tr>";
  }
    echo "</table>";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:23:23.387

请记住在开发时使用浏览器的错误控制台，它通常会通知您代码中的简单拼写错误等。

在这种情况下，有一些事情是错误的。看来你混淆了`selectX`和`formNode2`。大概应该是：

```
on(selectX, 'Change', function(evt){ 
```

现在，如果你让它工作，你会注意到当你改变`selectX`' 的值时，你会在你的控制台中得到一个错误：

```
evt.stopPropagation is not a function 
```

这是因为这里的 evt 参数实际上并不是一个事件对象。从选择元素中，您只能获得新值，*而不是*事件。把它改成这样，你应该会在控制台中看到我的意思：

```
on(selectX, 'Change', function( newValue ){
    console.debug('The new value is', newValue);
    //evt.stopPropagation();
    //evt.preventDefault(); 
```

我做了一些更改以使其在 jsfiddle 中工作，但它应该给你一个想法： http: [//fiddle.jshell.net/AmxKv/](http://fiddle.jshell.net/AmxKv/)

# java - 使用 jsoup 解析 URL 时出现 404 错误

> ID：14723338
> 
> 赞同：0
> 
> 时间：2013-02-06T06:58:02.337
> 
> 标签：java, url, jsoup

使用 Jsoup 时出现 404 错误。调用是`Document doc = Jsoup.parse(url, 30000)`并且 URL 字符串是`http://www.myland.co.il/%D7%9E%D7%97%D7%A9%D7%91-%D7%94%D7%A9%D7%A7%D7%99%D7%94` 并且 URL 在 Chrome 中显示正常。我得到的错误是`java.io.IOException: 404 error loading URL http://www.myland.co.il/vmchk/×××©×-××©×§××`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:43:19.637

不要`parse()`对网站使用 -method，`connect()`而是使用。因此您可以设置更多的连接设置。

```
final String url = "http://www.myland.co.il/%D7%9E%D7%97%D7%A9%D7%91-%D7%94%D7%A9%D7%A7%D7%99%D7%94";

Document doc = Jsoup.connect(url).get(); 
```

然而问题是url编码：

```
Exception in thread "main" org.jsoup.HttpStatusException: HTTP error fetching URL. Status=404, URL=http://www.myland.co.il/vmchk/×××©×-××©×§×× 
```

即使将 url 解码回*utf-8*也不能解决这个问题。

您有“替代”网址吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T16:13:21.543

尝试`decodeURL()`

```
String url = "http://www.myland.co.il/%D7%9E%D7%97%D7%A9%D7%91-%D7%94%D7%A9%D7%A7%D7%99%D7%94";
Document doc = Jsoup.connect(url.decodeURL()).get(); 
```

# facebook-login - Facebook 重大变化 经过身份验证的推荐将消失

> ID：14723345
> 
> 赞同：0
> 
> 时间：2013-02-06T06:58:29.640
> 
> 标签：facebook-login, facebook-oauth, facebook-authentication

我开发了一个 Facebook 游戏，当玩家加载游戏时它需要身份验证。以前它工作正常。每当“新”用户尝试玩我的游戏时，他需要单击“允许”按钮以授予权限。此对话框之前运行良好，但现在 Facebook 将应用一些更改，称为 2013 年 2 月的重大更改。

当我通过我的应用程序的 Facebook 设置“启用”2013 年 2 月的重大更改时，我的应用程序不适用于现有用户和新用户。事实上，“允许”权限对话框没有加载。

以前我成功地使用以下方法进行身份验证，当我通过游戏设置启用 2013 年 2 月的重大更改时，该方法现在不起作用。 [https://www.facebook.com/dialog/oauth](https://www.facebook.com/dialog/oauth)？（链接1）

现在我还尝试使用另一种方法进行身份验证 [https://graph.facebook.com/oauth/authorize](https://graph.facebook.com/oauth/authorize)？（链接2）

但它也没有用。应用程序未重定向到应用程序画布页面。事实上，我收到了两次错误代码 307，然后它将页面重定向到（链接 1），这不起作用。

你能帮我看看发生了什么，我怎样才能让我的身份验证工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:12:59.723

经过身份验证的推荐已不复存在，因此您需要考虑另一种方法来向您的用户请求权限。您可以为此使用 javascript SDK。您需要先加载 SDK：

```
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```

然后你需要初始化你的应用程序：

```
window.fbAsyncInit = function()
{
    FB.init({
        appId:'YOUR_APP_ID',
        status:true,
        cookie:true,
        xfbml:true
    });
}; 
```

最后，您必须创建一个登录函数，它将处理您的自定义逻辑：

```
function login()
{
    FB.login(function(response){
        if(response.authResponse)
        {
            //CUSTOM CODE GOES HERE
        }
    },{scope:'publish_actions'});
} 
```

# java - JSF Primefaces 和 Spring 安全用户管理 ROLE_USER 和 ROLE_ADMIN

> ID：14723352
> 
> 赞同：2
> 
> 时间：2013-02-06T06:59:11.603
> 
> 标签：java, spring, jsf-2, primefaces, spring-security

我想做简单的用户管理。我有primefaces DataTables，当用户是“ROLE_USER”时，我希望我的DataTables 不可编辑。但是用户是 ROLE_ADMIN 我希望我的数据表是可编辑的。

我的 ManagedBean 中有属性

```
public boolean isAdmin; 
```

当 isAdmin 为真时，我希望数据表可编辑，如果为假则不可编辑。

我有解决方案但不工作

```
<p:dataTable id="transactionTbl" var="tr"
value="#{reportParamManagedBean.reportsList}" rowKey="#{tr.id}"
editable="#{reportParamManagedBean.isAdmin}"> 
```

我有错误

在 MyBean 类型上找不到属性“isAdmin”

请帮忙，问题怎么解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:25:14.507

在你的bean中添加getter（和setter）：

```
private boolean isAdmin;

public boolean isAdmin() {
 return this.isAdmin;
}

public void setAdmin(boolean value) {
 this.isAdmin = value;
} 
```

您可能必须将值检索为：

```
#{reportParamManagedBean.admin} 
```

# c# - 查询嵌套 XML 中的项目

> ID：14723354
> 
> 赞同：0
> 
> 时间：2013-02-06T06:59:18.593
> 
> 标签：c#, xml, xml-parsing

我有以下 XML：

```
<Vehicle>
  <Car>
    <Name>Audi</Name>
    <ModelList>
      <Model>A3</Model>
      <Model>A5</Model>
      <Model>A7</Model>
    </ModelList>
  </Car>
  <Car>
    <Name>Benz</Name>
    <ModelList>
      <Model>C Class</Model>
      <Model>E Class</Model>
      <Model>S Class</Model>
    </ModelList>
  </Car>
</Vehicle> 
```

从中，我如何获得汽车名称“奥迪”的不同型号？

我尝试了以下方法：

```
var h = from c in load.Descendants("Vehicle") 
        select new { model = c.Descendants("Car").Elements("ModelList").ToArray() }; 
```

但这给了我“奥迪”和“奔驰”的所有型号。我在哪里可以在这里传递汽车的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:07:12.720

您只需要一个`Where`子句或`First`（或类似的东西）来执行过滤。

如果您知道只有一辆车名称正确，您可以使用`Single`：

```
var models = load.Descendants("Car")
                 .Single(x => (string) x.Element("Name") == "Audi")
                 .Element("ModelList")
                 .Elements("Model")
                 .Select(x => (string) x); 
```

或者，如果您不知道是否可能有多个此类元素（或没有），并且您对所有名称为 Audi 的汽车的所有型号列表感到满意：

```
var models = load.Descendants("Car")
                 .Where(x => (string) x.Element("Name") == "Audi")
                 .SelectMany(x => x.Element("ModelList").Elements("Model"))
                 .Select(x => (string) x); 
```

查询表达式中的后一个版本：

```
var models = from x in load.Descendants("Car")
             where (string) x.Element("Name") == "Audi"
             from model in x.Element("ModelList").Elements("Model")
             select (string) model; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:40:07.683

使用 Linq 到 Sql：

```
XDocument doc = XDocument.Load("XMLFilePath");
var selectors3 = (from elements in doc.Element("Vehicle").Elements("Car")
                  where elements.Element("Name").Value == "Audi"
                  from items in elements.Element("ModelList").Elements("Model")
                  select items.Value).ToList(); 
```

# ios - iOS：如何在现有 UINavigationController 中打开另一个 UINavigationController？

> ID：14723355
> 
> 赞同：0
> 
> 时间：2013-02-06T06:59:19.827
> 
> 标签：ios, objective-c, uinavigationcontroller

我正面临以下代码的崩溃。场景是

这是我使用 UINavigationController 加载 RTC_HomeVC 的应用程序委托方法。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
RTC_HomeVC *obj_RTC_HomeVC=[[RTC_HomeVC alloc]init];
UINavigationController *nav=[[UINavigationController alloc]initWithRootViewController:obj_RTC_HomeVC];
// Override point for customization after application launch.
self.window.rootViewController=nav;
[obj_RTC_HomeVC release];
[nav release];

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

现在我想在父导航控制器中打开 UINavigationController。所以我使用以下代码。方法 -(IBAction)call_SectionFlow 在 RTC_HomeVC 中。

* * *

```
-(IBAction)call_SectionFlow{
RTC_1_StoreDetailsVC *obj_StoreDetailsVC=[[RTC_1_StoreDetailsVC alloc]initWithNibName:@"RTC_1_StoreDetailsVC" bundle:nil];
RTC_3_EnablingWorksVC *obj_EnablingWorksVC = [[RTC_3_EnablingWorksVC alloc]initWithNibName:@"RTC_3_EnablingWorksVC" bundle:nil];
UINavigationController *navController_Sections = [[UINavigationController alloc] init];
NSArray *array_ControllerArray=[[NSArray alloc]initWithObjects:obj_StoreDetailsVC,obj_EnablingWorksVC, nil];
[navController_Sections setViewControllers:array_ControllerArray animated:FALSE]
navController_Sections.view.frame=CGRectMake(14, 40, 996,636 );
[self.view addSubview:[[[navController_Sections viewControllers] objectAtIndex:0] view]];
} 
```

* * *

当我调用此方法时，应用程序崩溃了。这是崩溃日志。

崩溃日志： *** 由于未捕获的异常“UIViewControllerHierarchyInconsistency”而终止应用程序，原因：“子视图控制器：< RTC_1_StoreDetailsVC: 0x71f53a0 > 应该有父视图控制器：< RTC_HomeVC: 0x758b310 > 但实际父级是：< UINavigationController: 0x71f55d0 >” ***首先throw call stack: (0x1c9c012 0x10d9e7e 0x1c9bdeb 0x6838a 0x68739 0x6f5a3 0x67eed 0x4fc3 0x10ed705 0x24920 0x248b8 0xe5671 0xe5bcf 0xe4d38 0x5433f 0x54552 0x323aa 0x23cf8 0x1bf7df9 0x1bf7ad0 0x1c11bf5 0x1c11962 0x1c42bb6 0x1c41f44 0x1c41e1b 0x1bf67e3 0x1bf6668 0x2165c 0x1f82 0x1c45) libc++abi.dylib: terminate called throwing an exception

* * *

所以任何人都可以告诉我

1.  这段代码有什么问题？我应该采用哪种方法来解决此崩溃？
2.  如何在现有 UINavigationController 中打开另一个 UINavigationController？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:12:26.147

不要**手动**添加子视图`UIWindow`。它不受支持（或者至少它不能正常工作）。

使用此方法：

```
[firstNavigationVC presentViewController:secondNavigationVC animated:YES completion:nil]; 
```

* * *

导致崩溃的原因是，您要添加`obj_StoreDetailsVC`到新的导航控制器，然后将其视图添加到`self.view`. 一旦 VC 是另一个 VC 的子级，它`view`必须是该 VC 的后代`view`。也许您可以将`secondNavigationVC`' 视图添加到 ' 的视图中`firstNavigationVC`，但这不是 UIKit 应该如何工作的。使用上述方法。

# c++ - 在全屏中显示是否会禁用 GLUT 中其他窗口的“渲染”

> ID：14723357
> 
> 赞同：0
> 
> 时间：2013-02-06T06:59:26.277
> 
> 标签：c++, opengl, glut

目前正在使用C++开发一个APP。我在一个主窗口中显示多个子窗口。当其中一个子窗口进入全屏模式时，其他窗口的渲染是否停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:09:05.980

> 其他窗口的渲染是否停止？

这取决于实施。如果程序正确实现，那么只有在窗口被完全覆盖时才应该停止渲染。

有些人喜欢在计时器回调中更新窗口（这是一种不好的做法），然后即使被覆盖也会继续渲染。

[glutDisplayFunc](http://www.opengl.org/resources/libraries/glut/spec3/node46.html)仅在需要刷新窗口时调用。

# sql - 在长原始列中插入值

> ID：14723361
> 
> 赞同：2
> 
> 时间：2013-02-06T06:59:59.990
> 
> 标签：sql, oracle, plsql

我需要在 Oracle DB 中测试带有长原始列的东西。为此，我需要在该列中插入一个长度值，例如 4000。数据可以是简单的东西，例如“AAAA ...” 4000 次。我尝试使用 sqlplus 插入一个大值，但出现以下错误（可能是由于 sqlplus 中的长度限制？

错误：ORA-00972：标识符太长

是否可以使用 sqlplus 在长原始列中插入一个大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:30:51.097

在 Oracle 中，`"AAA"`是一个标识符，并且`'AAA'`是一个字符串值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T08:00:50.363

这是`sqlplus`输入不能超过**2499**个字符的限制。

我建议您将插入作为两步过程的一部分。

1.  将数据插入 table.column 但保持数据少于 2500 个字符。
2.  更新同一列并将其余数据连接到已插入的数据。

这不是一个理想的场景，但据我所知，如果你想使用 sqlplus，这是唯一的方法。

# android - 如何在运行时更改小部件的文本属性，android？

> ID：14723366
> 
> 赞同：0
> 
> 时间：2013-02-06T07:00:29.720
> 
> 标签：android, android-layout

您好我正在尝试根据我的数据模型动态创建布局。但我这样做有一些问题。我拥有的 xml 文件在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android"
        android:background="#f9f9ff">
    <TextView
            android:layout_width="97dp"
            android:layout_height="33dp"
            android:id="@+id/textView" android:layout_alignParentLeft="true" android:layout_marginLeft="15dp"
            android:layout_alignParentTop="true" android:layout_marginTop="19dp"/>
</RelativeLayout> 
```

这被命名为`dynamic.xml`。我试图在运行时*膨胀*这个布局。为此，我正在做：

```
 ViewGroup parent = (ViewGroup) findViewById(R.id.vertical_container); 

    //getting the TextView and EditText view.         
    LayoutInflater inflater = this.getLayoutInflater();
    View currentView = inflater.inflate(R.layout.dynamic,null);
    TextView textView = (TextView) currentView.findViewById(R.id.textView);

    //trying to change the attributes. but #fails!
    textView.setText("Setting the text from code");
    textView.setId(3);

    //setting to the view
    view = LayoutInflater.from(getBaseContext()).inflate(R.layout.dynamic, null);
    parent.addView(view); 
```

但这似乎不起作用！该行：

```
textView.setText("Setting the text from code"); 
```

不起作用。我只能在模拟器中看到空文本，但看不到 text `Setting the text from code`。不知道我在哪里犯了错误。我在我的代码中所做的更改在我的模拟器中看不到。

我只能看到`dynamic`使用指定属性呈现的 xml 布局！

不知道我在哪里犯了错误。是否有可能实现我在这里所做的事情？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:35:45.843

您当前正在添加

`view = LayoutInflater.from(getBaseContext()).inflate(R.layout.dynamic, null);` 到 `parent.addView(view);`

但是你`textView.setText("Setting the text from code");` 从这里 使用`View currentView = inflater.inflate(R.layout.dynamic,null);`

您没有将 currentView 添加到`parent`

试试这个`parent.addView(currentView);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:44:15.957

我认为您为获得结果设置了错误的视图。不需要对布局进行两次膨胀

```
//getting the TextView and EditText view.         
LayoutInflater inflater = this.getLayoutInflater();
View currentView = inflater.inflate(R.layout.dynamic,null);
TextView textView = (TextView) currentView.findViewById(R.id.textView);

//trying to change the attributes. but #fails!
textView.setText("Setting the text from code");
textView.setId(3);

//Now you had customize your Textview .Now just add this customize view to your view
//setting to the view
parent.addView(currentView); 
```

# ipad - 在 ipad 上录制和播放视频有延迟

> ID：14723367
> 
> 赞同：1
> 
> 时间：2013-02-06T07:00:30.470
> 
> 标签：ipad, video, delay, playback

我是法国人和小新手。我有一个问题：我想在 ipad 上制作一个非常简单的应用程序：从 ipad 录制视频并以 15-30 秒的延迟显示它。没有记录，只是延迟显示。这是给学生的（我是老师）。他们会在镜头前做一些事情（大约 30 秒），然后看看他们做了什么。对不起我的英语......非常感谢你的回答......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:31:59.640

有一个应用程序可以做到这一点。App Store 上的实时视频延迟：[https ://itunes.apple.com/us/app/live-video-delay/id525582638?ls=1&mt=8](https://itunes.apple.com/us/app/live-video-delay/id525582638?ls=1&mt=8)

# android - 如何在android中的数组中提取json数组

> ID：14723371
> 
> 赞同：0
> 
> 时间：2013-02-06T07:00:49.293
> 
> 标签：android, json, arrays

我正在尝试将一些 json 编码的数据从 cakephp 传递到 android，传递数据时出现问题

我使用
echo json_encode($todaysdata); 出口（）;

在 CakePhp 中，当我在 cakephp 中调试这段代码时，我在浏览器中得到了一个结果

```
[{"status":{"uname":"sibin","pass":"shanu","upid":14}},
    {"status": {"uname":"amal","pass":"amalu","upid":14}}
] 
```

我需要`status`在Android中分别提取这两个细节

我在android中尝试了一个代码，它给出了结果，但结果重复了我想要两个`status`单独的结果如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:04:25.177

`status`从当前 json String设置值：

```
JSONArray jsonarr = new JSONArray("your json String");
for(int i = 0; i < jsonarr.length(); i++){

  JSONObject jsonobj = jsonarr.getJSONObject(i);
   // get status JSONObject
  JSONObject jsonobjstatus = jsonobj.getJSONObject("status");
  // get uname
  String str_uname=jsonobjstatus.getString("uname");
  // get pass
  String str_pass=jsonobjstatus.getString("pass");
  // get upid
  String str_upid=jsonobjstatus.getString("upid");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:06:40.117

尝试使用以下代码。

```
JSONArray jsonArray = new JSONArray("yourJsonResponseInString");

for(int i=0;i<jsonArray.length();i++)
{
    JSONObject e = jsonArray.getJSONObject(i);
    JSONObject jsonObject = e.getJSONObject("status");
    Log.i("=== UserName","::"+jsonObject.getString("uname"));
    Log.i("=== Password","::"+jsonObject.getString("pass"));
    Log.i("=== UId","::"+jsonObject.getString("upid"));
} 
```

# c - strcpy 如何在幕后工作？

> ID：14723381
> 
> 赞同：10
> 
> 时间：2013-02-06T07:01:50.087
> 
> 标签：c, pointers

对于某些人来说，这可能是一个非常基本的问题。我试图了解 strcpy 在幕后的实际工作方式。例如，在这段代码中

```
#include <stdio.h>
#include <string.h>
int main ()
{
  char s[6] = "Hello";
  char a[20] = "world isnsadsdas";
  strcpy(s,a);

  printf("%s\n",s);
  printf("%d\n", sizeof(s));
  return 0;
} 
```

正如我声明`s`的那样，它是一个大小小于源的静态数组。我认为它不会打印整个单词，但它确实打印了`world isnsadsdas`.. 所以，我认为如果目标小于源，这个 strcpy 函数可能会分配新的大小。但是现在，当我检查 sizeof(s) 时，它仍然是 6，但打印出来的不止于此。实际效果如何？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T07:04:26.910

你刚刚导致了未定义的行为，所以任何事情都可能发生。在你的情况下，你很幸运并且它没有崩溃，但你不应该依赖这种情况。这是一个简化的`strcpy`实现（但它与许多真实的相差不远）：

```
char *strcpy(char *d, const char *s)
{
   char *saved = d;
   while (*s)
   {
       *d++ = *s++;
   }
   *d = 0;
   return saved;
} 
```

`sizeof`只是从编译时返回数组的大小。如果你使用`strlen`，我想你会看到你所期望的。但正如我上面提到的，依赖未定义的行为是一个坏主意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-17T19:26:37.353

[http://natashenka.ca/wp-content/uploads/2014/01/strcpy8x11.png](http://natashenka.ca/wp-content/uploads/2014/01/strcpy8x11.png)

strcpy 被认为是危险的，例如您正在演示的原因。您创建的两个缓冲区是存储在函数堆栈帧中的局部变量。堆栈框架大致如下：http: [//upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Call_stack_layout.svg/342px-Call_stack_layout.svg.png](http://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Call_stack_layout.svg/342px-Call_stack_layout.svg.png)

仅供参考，事物被放在堆栈顶部，这意味着它在内存中向后增长（这并不意味着内存中的变量被向后读取，只是新的变量被放在旧变量的“后面”）。因此，这意味着如果您在函数堆栈帧的 locals 部分写入足够多的内容，您将在要复制到的变量之后向前写入所有其他堆栈变量并进入其他部分，并最终覆盖返回指针。结果是，如果你很聪明，你可以完全控制函数返回的位置。你可以让它真正做任何事情，但问题不是你。

正如您通过使第一个缓冲区为 5 个字符的字符串长度为 6 个字符而知道的那样，C 字符串以空字节 \x00 结尾。strcpy 函数复制字节直到源字节为 0，但它不检查目标是否有那么长，这就是它可以复制数组边界的原因。这也是为什么您的打印正在读取超过其大小的缓冲区，它读取到 \x00。有趣的是，strcpy 可能已写入 s 的数据，具体取决于编译器在堆栈中给出的顺序，所以一个有趣的练习可能是打印 a 并查看是否得到类似 'snsadsdas' 的内容，但我不能确保即使它污染了 s 也会是什么样子，因为有时由于各种原因在堆栈条目之间存在字节）。

如果这个缓冲区包含一个密码来检查带有散列函数的代码，然后你将它复制到堆栈中的缓冲区，从你得到它的任何地方（如果是服务器，则为网络数据包，或文本框等）你很好可能会从源复制更多的数据，而不是目标缓冲区可以容纳的数据，并将程序的控制权交给能够向您发送数据包或尝试密码的任何用户。他们只需要输入正确数量的字符，然后输入代表地址的正确字符即可跳转到 ram 中的某个位置。

如果您检查边界并可能修剪源字符串，则可以使用 strcpy ，但这被认为是不好的做法。还有更多现代函数需要最大长度，例如[http://www.cplusplus.com/reference/cstring/strncpy/](http://www.cplusplus.com/reference/cstring/strncpy/)

哦，最后，这都称为缓冲区溢出。一些编译器在每个堆栈条目之前和之后添加由操作系统随机选择的一小块字节。每次复制后，操作系统都会根据其副本检查这些字节，如果它们不同，则终止程序。这解决了很多安全问题，但是仍然可以将字节复制到堆栈中足够远的位置以覆盖指向函数的指针，以处理当这些字节已更改时发生的情况，从而让您做​​同样的事情。做正确的事情变得更加困难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T07:12:18.803

在 C 语言中，没有对数组进行边界检查，这是为了获得更好的性能而进行的权衡，而不是冒着被自己踩到脚的风险。

`strcpy()`不关心目标缓冲区是否足够大，因此复制太多字节会导致未定义的行为。

这就是引入新版本 strcpy 的原因之一，您可以在其中指定目标缓冲区大小`strcpy_s()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T07:05:03.587

您依赖于未定义的行为，因为编译器选择将两个数组放置在您的代码恰好可以工作的地方。这在未来可能行不通。

至于`sizeof`运算符，这是在编译时计算出来的。

使用足够的数组大小后，您需要使用它`strlen`来获取字符串的长度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T07:27:47.657

请注意，sizeof(s) 是在运行时确定的。使用 strlen() 查找占用的字符数。当您执行 strcpy() 时，源字符串将被目标字符串替换，因此您的输出不会是“Helloworld issadsdas”

```
#include <stdio.h>
#include <string.h>
main ()
{
  char s[6] = "Hello";
  char a[20] = "world isnsadsdas";
  strcpy(s,a);

  printf("%s\n",s);
  printf("%d\n", strlen(s));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T07:04:15.970

了解 strcpy 如何在幕后工作的最好方法是……阅读它的源代码！您可以阅读 GLibC 的源代码：http: [//fossies.org/dox/glibc-2.17/strcpy_8c_source.html](http://fossies.org/dox/glibc-2.17/strcpy_8c_source.html)。我希望它有帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-09T11:02:07.413

更好的解决方案是

```
char *strcpy(char *p,char const *q)
{
   char *saved=p;

   while(*p++=*q++);

   return saved;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-05T09:50:39.370

在每个字符串/字符数组的末尾都有一个`null terminator character '\0'`标记字符串/字符数组的结尾。

`strcpy()`执行它的任务，直到它看到 '\0' 字符。

`printf()`也执行它的任务，直到它看到 '\0' 字符。

`sizeof()`另一方面，对数组的内容***不***感兴趣，只对它分配的大小（它应该有多大）感兴趣，因此不考虑字符串/字符数组实际结束的位置（它实际上有多大）。

与 sizeof() 不同的是`strlen()`，它对字符串的实际长度（而不是应该有多长）感兴趣，因此会计算字符数，直到它到达它的末尾（'\0' 字符***）***停止*（它不包括 '\0' 字符）*。

# jquery - 使用 api javascript/jquery 退出 Google

> ID：14723383
> 
> 赞同：4
> 
> 时间：2013-02-06T07:02:01.567
> 
> 标签：jquery, google-app-engine, google-api-js-client

在我的 Web 应用程序中，我允许用户使用 API 客户端库中的 auth 命令登录，但我找不到 Google API JavaScript 客户端库的注销选项。

任何人都可以建议我如何注销我的应用程序以及谷歌帐户？

我的登录代码是：

```
var OAUTHURL = 'https://accounts.google.com/o/oauth2/auth?';
var VALIDURL = 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=';
var SCOPE = 'https://www.googleapis.com/auth/userinfo.profile';
var CLIENTID = googleAPI;
var REDIRECT = redirectUrl;
var TYPE = 'token';
var _url = OAUTHURL + 'scope=' + SCOPE + '&client_id=' + CLIENTID + '&redirect_uri=' + REDIRECT + '&response_type=' + TYPE;
var acToken;
var tokenType;
var expiresIn;
var user;
$('#googleLogin').click(function(){
        var win = window.open(_url, "windowname1", 'width=800, height=600');

        var pollTimer = window.setInterval(function () {
            if (win.document.URL.indexOf(REDIRECT) != -1) {
                window.clearInterval(pollTimer);
                var url = win.document.URL;
                acToken = gup(url, 'access_token');
                tokenType = gup(url, 'token_type');
                expiresIn = gup(url, 'expires_in');
                win.close();

                validateToken(acToken);
            }
        }, 100);
});
function validateToken(token) {
        $.ajax({
            url: VALIDURL + token,
            data: null,
            success: function (responseText) {
                getUserInfo();
            },
            dataType: "jsonp"
        });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T17:59:14.443

当您的用户退出您的应用程序时，不要让他们退出他们的 Google 帐户。这种行为对用户来说是出乎意料的和烦人的。

您最多应该尝试弄清楚如何“注销”您的应用程序的用户。（我把它放在引号中，因为根据您的实现，应用程序可能会伪造它）。

如果您只关心在 UI 中隐藏元素，您可以设置一个变量，例如`signedIn`，并在用户点击登录/注销按钮时设置或取消设置它。如果您关心跨会话保持此状态，请使用存储相同值的 cookie。

如果您想确保键盘另一侧的人确实是登录用户，您可以在通话中使用该`max_auth_age`参数。`authorize`如果您将其设置为`0`，用户将需要在您的应用获得有效令牌之前重新通过 Google 进行身份验证。如果您将此与自动会话到期配对（就像您在银行或健康网站上看到的那样），您可以相对确信当前用户的身份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T10:16:48.683

如果您放宽从用户的 Google 帐户注销用户的要求（正如 Dan 解释的那样，这不是一个好主意），您可以按照[其他问题](https://stackoverflow.com/questions/12809339/how-to-revoke-an-authentication-token-client-side-against-the-google-api/19205371#19205371)中的说明撤销 OAuth 令牌。

# android - HttpTransportSE.call 方法频繁返回 NullPointerException

> ID：14723386
> 
> 赞同：1
> 
> 时间：2013-02-06T07:02:13.527
> 
> 标签：android, web-services, android-ksoap2

我连接到网络服务以下载我的应用程序的主数据。因此，在一次下载中，应用程序将需要使用不同的索引多次调用 Web 服务。

在此期间，*HttpTransportSE.call*方法有时会为某些索引返回*NullPointerException*，否则它可以正常工作。

我的调用函数是：

```
public String SoapAction(String[] values){

String[] data = new String[] { "CompanyID", "Username", "Password", "indexNo", "DataString","lDate" };

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

for(int i = 0; i < data.length; i++){
  PropertyInfo property = new PropertyInfo();
  property.setName(data[i]);
  property.setNamespace(NAMESPACE);
  property.setType(PropertyInfo.STRING_CLASS);
  property.setValue(values[i]); 

  request.addProperty(property);
}

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.implicitTypes = true;
envelope.setOutputSoapObject(request);

try{
  HttpTransportSE http = new HttpTransportSE(URL);
  http.debug = true;
  System.setProperty("http.keepAlive", "false");

  http.call(SOAP_ACTION, envelope);
}catch (IOException e1) {
  e1.printStackTrace();         
  return "serverError";
} catch (XmlPullParserException e1) {
  e1.printStackTrace();
  return "serverError";     
} catch (Exception e) {
  e.printStackTrace();          
  return "serverError";
}

SoapPrimitive resultString = null;

try{
  resultString = (SoapPrimitive)envelope.getResponse();
}catch (SoapFault e) {
  e.printStackTrace();          
  return "serverError";
}

if(resultString != null){
  return resultString.toString();
} else {
  return "serverError";
}
} 
```

我做了很多谷歌搜索，但找不到解决方案

这是堆栈跟踪：
02-06 14:01:14.136: W/System.err(1504): java.lang.NullPointerException

02-06 14:01:14.136: W/System.err(1504): 在 org.ksoap2.transport.ServiceConnectionSE.getResponseProperties(ServiceConnectionSE.java:85)

02-06 14:01:14.136: W/System.err(1504): 在 org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:167)

02-06 14:01:14.136: W/System.err(1504): 在 org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)

02-06 14:29:50.026: W/System.err(1504): 在 com.c2info.engine.WebServiceConnection.SoapAction(WebServiceConnection.java:49)

02-06 14:29:50.026: W/System.err(1504): 在 com.c2info.engine.DownloadData.downloadTasks(DownloadData.java:800)

02-06 14:29:50.026: W/System.err(1504): at com.c2info.engine.DownloadData$3.run(DownloadData.java:187)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:28:23.277

我从不添加像你这样的属性

```
request.addProperty("data", "value"); 
```

尝试这个：

```
PropertyInfo property = new PropertyInfo();
{
    property.name = "data";
    property.setNamespace(NAMESPACE);
    property.type = PropertyInfo.STRING_CLASS;
    property.setValue("value"); 
}
request.addProperty(property); 
```

也尝试使用

```
SoapEnvelope.VER11 
```

而不是 VER12

并添加生

```
envelope.implicitTypes = true; 
```

您是否在 AndroidMANifest.xml 中添加了此权限？

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T05:41:08.167

经过一番研究，我发现它发生在服务器繁忙时，当服务器处理您的请求时，HttpTransportSE 调用方法超时。默认超时值以 20 秒为单位。因此，为了克服这一点，：

*   设置合适的超时值

    > HttpTransportSE http = new HttpTransportSE(URL, 30000);

*   将 http.call 方法包含在一个 while 循环中并重试直到'N'次，直到你得到一个有效的响应

# javascript - 不使用来自 Android 源的长字符串调用 JavaScript 回调

> ID：14723387
> 
> 赞同：-2
> 
> 时间：2013-02-06T07:02:14.350
> 
> 标签：javascript, android, json, android-webview, gson

我想将以下字符串从 android 源发送到 javascript 回调。

```
{
    "DefaultScope.mytable": {
        "name": "DefaultScope.mytable",
        "rows": {
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'69cb1eed-6ea4-c29d-ea7a-a3b4b8cde5bf')": {
                "ID": "69cb1eed-6ea4-c29d-ea7a-a3b4b8cde5bf",
                "FirstName": "xxx",
                "LastName": "x1x1",
                "PhoneNumber": "999922223",
                "EmailId": "xxxx@gmail.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'69cb1eed-6ea4-c29d-ea7a-a3b4b8cde5bf')",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'86159fca-1832-418a-0416-bb1e7555dd56')": {
                "ID": "86159fca-1832-418a-0416-bb1e7555dd56",
                "FirstName": "yyy",
                "LastName": "R",
                "PhoneNumber": "98789878",
                "EmailId": "yyyy@syncfusion.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'86159fca-1832-418a-0416-bb1e7555dd56')",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'000047f6-c01b-8e95-6a13-c44c75ec4537')": {
                "ID": "000047f6-c01b-8e95-6a13-c44c75ec4537",
                "FirstName": "Sample",
                "LastName": "Sample",
                "PhoneNumber": "999999999",
                "EmailId": "sample@syncfusion.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'000047f6-c01b-8e95-6a13-c44c75ec4537')",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'71d7b329-edd5-00dd-4579-eacfc6ebd129')": {
                "ID": "71d7b329-edd5-00dd-4579-eacfc6ebd129",
                "FirstName": "zzz",
                "LastName": "M",
                "PhoneNumber": "8787676733",
                "EmailId": "zzzz@syncfusion.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'71d7b329-edd5-00dd-4579-eacfc6ebd129')",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'b6e23d7c-5f06-7c25-f0c7-f7a67ae874db')": {
                "ID": "b6e23d7c-5f06-7c25-f0c7-f7a67ae874db",
                "FirstName": "dddd",
                "LastName": "r",
                "PhoneNumber": "8009008767",
                "EmailId": "dddd@syncfison.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid'b6e23d7c-5f06-7c25-f0c7-f7a67ae874db')",
                    "type": "DefaultScope.mytable"
                }
            },
            "d3be059d-14d7-7f5a-e7ab-7cf9d4d08fcf": {
                "__metadata": {
                    "type": "DefaultScope.mytable",
                    "tempId": "d3be059d-14d7-7f5a-e7ab-7cf9d4d08fcf",
                    "isDirty": true
                },
                "ID": "d3be059d-14d7-7f5a-e7ab-7cf9d4d08fcf",
                "FirstName": "bbb",
                "LastName": "aaa",
                "PhoneNumber": "9009877899",
                "EmailId": "abab@syncfusion.com"
            }
        }
    }
} 
```

我已将其加载到**我的 java**文件中，如下所示

```
webView.loadUrl("javascript:"+callBackName+"('" + mStatus + "', '" + mString+ "')"); 
```

**打回来：**

```
var processor = (function () {
        return {
            onSuccess: function (data) {
                 alert("Success");
            },
            onFailure: function (error) {
                 alert("Error");
            }
        };
    })(); 
```

不调用此回调。

> **注意**：如果我在**mString**变量中传递“ **hi** ” ，则**调用 onSuccess**。

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:41:13.813

我发现上述值的错误。字符串有更多的单引号，所以我无法在 Webview 中加载值。现在我用“\'”替换了“\'”。现在工作正常。

```
{
    "DefaultScope.mytable": {
        "name": "DefaultScope.mytable",
        "rows": {
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’69cb1eed-6ea4-c29d-ea7a-a3b4b8cde5bf\’)": {
                "ID": "69cb1eed-6ea4-c29d-ea7a-a3b4b8cde5bf",
                "FirstName": "xxx",
                "LastName": "x1x1",
                "PhoneNumber": "999922223",
                "EmailId": "xxxx@gmail.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’69cb1eed-6ea4-c29d-ea7a-a3b4b8cde5bf\’)",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’86159fca-1832-418a-0416-bb1e7555dd56\’)": {
                "ID": "86159fca-1832-418a-0416-bb1e7555dd56",
                "FirstName": "yyy",
                "LastName": "R",
                "PhoneNumber": "98789878",
                "EmailId": "yyyy@syncfusion.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’86159fca-1832-418a-0416-bb1e7555dd56\’)",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’000047f6-c01b-8e95-6a13-c44c75ec4537\’)": {
                "ID": "000047f6-c01b-8e95-6a13-c44c75ec4537",
                "FirstName": "Sample",
                "LastName": "Sample",
                "PhoneNumber": "999999999",
                "EmailId": "sample@syncfusion.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’000047f6-c01b-8e95-6a13-c44c75ec4537\’)",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’71d7b329-edd5-00dd-4579-eacfc6ebd129\’)": {
                "ID": "71d7b329-edd5-00dd-4579-eacfc6ebd129",
                "FirstName": "zzz",
                "LastName": "M",
                "PhoneNumber": "8787676733",
                "EmailId": "zzzz@syncfusion.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’71d7b329-edd5-00dd-4579-eacfc6ebd129\’)",
                    "type": "DefaultScope.mytable"
                }
            },
            "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’b6e23d7c-5f06-7c25-f0c7-f7a67ae874db\’)": {
                "ID": "b6e23d7c-5f06-7c25-f0c7-f7a67ae874db",
                "FirstName": "dddd",
                "LastName": "r",
                "PhoneNumber": "8009008767",
                "EmailId": "dddd@syncfison.com",
                "__metadata": {
                    "uri": "http://www.xxx.com/demo/MyService/DefaultScopeSyncService.svc/mytable(ID=guid\’b6e23d7c-5f06-7c25-f0c7-f7a67ae874db\’)",
                    "type": "DefaultScope.mytable"
                }
            },
            "d3be059d-14d7-7f5a-e7ab-7cf9d4d08fcf": {
                "__metadata": {
                    "type": "DefaultScope.mytable",
                    "tempId": "d3be059d-14d7-7f5a-e7ab-7cf9d4d08fcf",
                    "isDirty": true
                },
                "ID": "d3be059d-14d7-7f5a-e7ab-7cf9d4d08fcf",
                "FirstName": "bbb",
                "LastName": "aaa",
                "PhoneNumber": "9009877899",
                "EmailId": "abab@syncfusion.com"
            }
        }
    }
} 
```****

# c# - Paypal 定期付款交易错误：11502：令牌无效

> ID：14723390
> 
> 赞同：8
> 
> 时间：2013-02-06T07:02:42.337
> 
> 标签：c#, asp.net, asp.net-mvc-2, paypal

我是贝宝的新手，我需要为我的客户实现订阅（定期付款）。我正在使用贝宝沙箱来实现它。我遵循贝宝坚持创建定期付款资料的方式。从 SetExpressCheckout、GetExpressCheckOut 和 DoExpressCheckOut 获得“成功”确认。我尝试使用 DoExpressCheckOutpayment 响应中的令牌创建定期付款配置文件，但来自 CreateRecurrinpayment 配置文件的响应返回失败，说明 ivnalid 中的令牌。我尝试在我设置的快速结帐请求上设置“BILLINGAGREEMENTDESCRIPTION 和 BILLINGTYPE=RecurringPayments”，但同样的错误仍然存​​在。

请在下面找到我用来实现定期存款的代码。

**设置EXpressCheckout**

```
{
NameValueCollection values = new NameValueCollection();

            values["METHOD"] = "SetExpressCheckout";

            values["RETURNURL"] = PayPalSettings.ReturnUrl;

            values["CANCELURL"] = PayPalSettings.CancelUrl;

            values["PAYMENTACTION"] = "Sale";

            values["CURRENCYCODE"] = "USD";

            values["BUTTONSOURCE"] = "PP-ECWizard";

            values["USER"] = PayPalSettings.Username;

            values["PWD"] = PayPalSettings.Password;

            values["SIGNATURE"] = PayPalSettings.Signature;

            values["SUBJECT"] = "";

            values["L_NAME0"] = "MyName";

            values["L_AMT0"] = "20.00";

            values["VERSION"] = "2.3";

            values["AMT"] = PayPalSettings.OrderAmount;

            values["L_BILLINGTYPE0"] = "RecurringPayments";

            values["L_BILLINGAGREEMENTDESCRIPTION0"] = "Test subscription";

            values = Submit(values);

            string ack = values["ACK"].ToLower();

            if (ack == "success" || ack == "successwithwarning")

            {

                return new PayPalRedirect

                {

                    Token = values["TOKEN"],
                    Url = String.Format("https://{0}/cgi-bin/webscr?cmd=_express-checkout&token={1}",
                       PayPalSettings.CgiDomain, values["TOKEN"])
                 };
            }
             else
            {
            throw new Exception(values["L_LONGMESSAGE0"]);
            }
} 
```

**提交**

```
private static NameValueCollection Submit(NameValueCollection values)

        {

            string data = String.Join("&", values.Cast<string>()

              .Select(key => String.Format("{0}={1}", key, HttpUtility.UrlEncode(values[key]))));

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(

               String.Format("https://{0}/nvp", PayPalSettings.ApiDomain));

            request.Method = "POST";

            request.ContentLength = data.Length;

            using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))

            {

                writer.Write(data);

            }

            using (StreamReader reader = new StreamReader(request.GetResponse().GetResponseStream()))

            {

                return HttpUtility.ParseQueryString(reader.ReadToEnd());

            }

        } 
```

**GetExpressCheckout**

```
public ActionResult Success(string token)

    {

        GetExpressCheckout getExpressCheckout = new GetExpressCheckout();

        GetExpressCheckoutDetailsResponseType getExpressCheckoutResponse = getExpressCheckout.ECGetExpressCheckoutCode(token);

        if (getExpressCheckoutResponse.Ack == AckCodeType.Success)

        {

            ExpressCheckout expressCheckout = new ExpressCheckout();

            DoExpressCheckoutPaymentResponseType doExpressCheckoutResponse = expressCheckout.DoExpressCheckoutPayment

                                                        (

                                                            token,

                                                            getExpressCheckoutResponse.GetExpressCheckoutDetailsResponseDetails.PayerInfo.PayerID,

                                                            PayPalSettings.OrderAmount,

                                                            PaymentActionCodeType.Sale,

                                                            CurrencyCodeType.USD

                                                        );

            if (doExpressCheckoutResponse.Ack == AckCodeType.Success)

            {

CreateRecurringPaymentsProfile createRecurringPaymentsProfile = new CreateRecurringPaymentsProfile();               

                CreateRecurringPaymentsProfileResponseType recurringPaymentProfileResponse = createRecurringPaymentsProfile.CreateRecurringPaymentsProfileCode(

                                                                                                doExpressCheckoutResponse.DoExpressCheckoutPaymentResponseDetails.Token,

                                                                                                doExpressCheckoutResponse.Timestamp,

                                                                                                PayPalSettings.OrderAmount,

                                                                                                1,

                                                                                                BillingPeriodType.Month,

                                                                                                CurrencyCodeType.USD

                                                                                                );

                if (recurringPaymentProfileResponse.Ack == AckCodeType.Success)

                {
} 
```

**创建ReEcurringPaymentsProfile**

```
public CreateRecurringPaymentsProfileResponseType CreateRecurringPaymentsProfileCode(string token, DateTime date, string amount, int BF, BillingPeriodType BP, CurrencyCodeType currencyCodeType)

              {

                     CallerServices caller = new CallerServices();

                     IAPIProfile profile = ProfileFactory.createSignatureAPIProfile();

            // Set up your API credentials, PayPal end point, and API version.

            profile.APIUsername = PayPalSettings.Username;

            profile.APIPassword = PayPalSettings.Password;

            profile.APISignature = PayPalSettings.Signature;

                     profile.Environment="sandbox";

                     caller.APIProfile = profile;

                     // Create the request object.

                    CreateRecurringPaymentsProfileRequestType pp_request=new CreateRecurringPaymentsProfileRequestType();

                     pp_request.Version="51.0";

            // Add request-specific fields to the request.

                     pp_request.CreateRecurringPaymentsProfileRequestDetails= new CreateRecurringPaymentsProfileRequestDetailsType();

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.Token=token;

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.RecurringPaymentsProfileDetails=new RecurringPaymentsProfileDetailsType();

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.RecurringPaymentsProfileDetails.BillingStartDate=date;

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails=new ScheduleDetailsType();

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.PaymentPeriod=new BillingPeriodDetailsType();

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.PaymentPeriod.Amount=new BasicAmountType();

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.PaymentPeriod.Amount.Value =amount ;

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.PaymentPeriod.Amount.currencyID= currencyCodeType;//Enum for currency code is  CurrencyCodeType.USD

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.PaymentPeriod.BillingFrequency=BF;

                     pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.PaymentPeriod.BillingPeriod=BP;////Enum for BillingPeriod is  BillingPeriodType.Day

            //pp_request.Version = "51.0";

            pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.Description = "Test subscription";

            //pp_request.CreateRecurringPaymentsProfileRequestDetails.ScheduleDetails.Description

            // Execute the API operation and obtain the response.

                     CreateRecurringPaymentsProfileResponseType pp_response=new CreateRecurringPaymentsProfileResponseType();

                     pp_response= (CreateRecurringPaymentsProfileResponseType) caller.Call("CreateRecurringPaymentsProfile", pp_request);

                     return pp_response;

              } 
```

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:41:28.417

Sujth，根据您的需要，要给出的正确版本是 51.0。快乐编码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:09:37.127

在您的 SetExpressCheckout 调用中，设置`VERSION`为更新的内容，例如`97.0`. `L_BILLINGTYPE0`并且`L_BILLINGAGREEMENTDESCRIPTION`在 2.3 版中不存在，因此 API 无法识别它们。

# sql - Oracle 单个查询中的多个计数

> ID：14723394
> 
> 赞同：2
> 
> 时间：2013-02-06T07:03:09.750
> 
> 标签：sql, oracle

有没有一种简单的方法来实现这个查询结果来提高它的性能。我不想为每个选择加入两个表。

```
select Product, LCTL, LQ, LCTQL from
(
(select 'Phone / HSI' as Product, (select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and c.category_long_name='m ECOMM ORD') as LCTL,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and (c.category_long_name='CRIS ECOMM ORD' or c.category_long_name='CRIS ECOMM HELD')) as LQ,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and (c.category_long_name='CRIS ECOMM ORD' or c.category_long_name='CRIS ECOMM HELD' or c.category_long_name='m ECOMM ORD')) as LCTQL from dual
union all

select '(Phone / HSI) + Prism' as Product,(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and c.category_long_name='m ECOMM PRISM') as LCTL,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and c.category_long_name='CRIS ECOMM PRISM') as LQ,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and (c.category_long_name='m ECOMM PRISM' or c.category_long_name='CRIS ECOMM PRISM')) as LCTQL from dual

union all
select '(Phone / HSI) + DTV' as Product,(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and c.category_long_name='m ECOMM DTV') as LCTL,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and c.category_long_name='CRIS ECOMM DTV') as LQ,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and (c.category_long_name='m ECOMM DTV' or c.category_long_name='CRIS ECOMM DTV')) as LCTQL from dual

union all
select 'Total' as Product,(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and (c.category_long_name='m ECOMM DTV' or c.category_long_name='m ECOMM PRISM' or c.category_long_name='m ECOMM DTV')) as LCTL,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and (c.category_long_name='CRIS ECOMM DTV' or c.category_long_name='CRIS ECOMM PRISM' or c.category_long_name='CRIS ECOMM ORD' or c.category_long_name='CRIS ECOMM HELD')) as LQ,
(select count(1) as "LCTL" from tasks t,task_categories c where t.category_id=c.category_id and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))>=?1 and to_date(to_char(t.user_create_date,'DD-MON-YYYY'))<=?2 and (c.category_long_name='m ECOMM DTV' or c.category_long_name='m ECOMM PRISM' or c.category_long_name='m ECOMM DTV' or c.category_long_name='CRIS ECOMM DTV' or c.category_long_name='CRIS ECOMM PRISM' or c.category_long_name='CRIS ECOMM ORD' or c.category_long_name='CRIS ECOMM HELD' )) as LCTQL from dual)
) 
```

输出应该如下：

```
Product                 LCTL    LQ      LCTQL
Phone / HSI         17209   39849   57058
(Phone / HSI) + Prism   4095    6   4101
(Phone / HSI) + DTV 6192    1   6193

Total   10287   39856   50143 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:17:52.723

我认为您的查询可以这样写：

```
SELECT
  product,
  SUM(CASE WHEN c.category_long_name  = 'm ECOMM ORD'      THEN 1 ELSE 0 END) AS LCTL,
  SUM(CASE WHEN c.category_long_name  = 'CRIS ECOMM ORD' 
             OR c.category_long_name  = 'CRIS ECOMM HELD'  THEN 1 ELSE 0 END) AS LQ,
  SUM(CASE WHEN c.category_long_name IN('CRIS ECOMM ORD',
                                        'CRIS ECOMM HELD',
                                        'm ECOMM ORD')     THEN 1 ELSE 0 END) AS LCTQ,
  SUM(CASE WHEN c.category_long_name = 'm ECOMM PRISM'     THEN 1 ELSE 0 END) AS lccc,
  ...
  ...
  COUNT(*) AS "Total"
FROM tasks t
INNER JOIN task_categories c ON t.category_id=c.category_id
WHERE to_date(to_char(t.user_create_date, 'DD-MON-YYYY')) >= ?1
  and to_date(to_char(t.user_create_date, 'DD-MON-YYYY')) <= ?2
GROUP BY product; 
```

使用`CASE`表达式 with `GROUP BY product`，您可以在一个查询中执行此操作。这是基本思想。

此外，您可能需要[`pivot`](http://www.oracle-base.com/articles/11g/pivot-and-unpivot-operators-11gr1.php)在 Oracle 中使用运算符，但不清楚是否可以使用`pivot`运算符编写。

# java - 使用 Prepared 语句更新：ORA-00933 错误

> ID：14723395
> 
> 赞同：1
> 
> 时间：2013-02-06T07:03:11.340
> 
> 标签：java, sql, oracle, jdbc, prepared-statement

我正在使用以下 servlet 代码来更新我的 android 应用程序中的数据。但我收到 ORA-00933 错误：SQL 命令未正确结束。这是我的代码

```
try
   {
Class.forName("oracle.jdbc.driver.OracleDriver");
java.sql.Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@xxx.xxx.x.xxx:xxxx:xxxx", "xxxx", "xxxx");
    String query="update offer1 set RCODE=?,EXTENT=?,PHONE=?,DAT=?LOAN=?,SEED=? where OFFERNO=?";
    PreparedStatement ps=conn.prepareStatement(query);
    ps.setString(1,r_code);
    ps.setString(2,extent);
    ps.setString(3,phone);
    ps.setDate(4,sqlDate);
    ps.setString(5,loan);
    ps.setString(6,seeds);
    ps.setString(7,offrno);
    int i=ps.executeUpdate();
    out.println("data updated");
}catch(Exception e)
    {
       out.println(e);
    } 
```

我无法理解这个问题。有人帮助我我的代码中的错误是什么以及如何使用正确的代码。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:06:32.833

您的 UPDATE 查询中有语法错误：

```
String query="update offer1 set RCODE=?,EXTENT=?,PHONE=?,DAT=?LOAN=?,SEED=? where OFFERNO=?"; 
```

DAT=? 后缺少逗号。将其更改为：

```
String query="update offer1 set RCODE=?,EXTENT=?,PHONE=?,DAT=?,LOAN=?,SEED=? where OFFERNO=?"; 
```

# php - 按字母顺序和大小对 PHP 关联数组进行排序

> ID：14723400
> 
> 赞同：-1
> 
> 时间：2013-02-06T07:03:30.687
> 
> 标签：php, sorting

我有一个多维关联数组，我试图按字母顺序和大小排序。检查我当前得到的示例，但现在我想按字母顺序对键“ACC，ABB，AAB”进行排序，如果有意义的话，不编辑大小排序。

```
arsort($myarray);

// Returns an array sorted by its value size from biggest to smallest but need to to also sort it keys alpabetically without amongest keys that have the same size.

$myArray = Array (     <--- Arrange this alphabetically and by size
        [AAA] => Array ( is 1st
            [1] => 1
            [2] => 1
            [3] => 1 
            [4] => 1
        )      
        [ACC] => Array ( should be 3rd
            [1] => 1 
            [2] => 1 
        )      
        [ABB] => Array ( should be 2nd
            [1] => 1
            [2] => 1 
        )      
        [AAB] => Array ( should be 1st
            [1] => 1 
            [2] => 1 
        )      
        [AA] => Array ( is 1st
            [1] => 1 
        )      
        [AB] => Array ( is 2nd
            [1] => 1 
        ) 
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:15:03.037

使用键排序对数组进行排序。根据您的要求，您希望根据键对数组进行排序这将为您工作...

```
ksort($myArray); 
```

按大小排序是什么意思？我没有得到你问题的第二部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:50:52.083

最后我只是做了一个循环来做我想要的不仅仅是一个内置函数。希望它可以理解我在解释代码方面很糟糕：S

```
arsort($myArray);                                     // Sorts array by size
reset($myArray);
$first_key = key($myArray);
$count = count($myArray[$first_key], COUNT_RECURSIVE); // Get the largest value in array

$temp_array = array();
$sorted_array = array();
for($i = $count; $i >= 1; $i--){                      // Loops from the largest value to the smallest to create temp array for each size
    foreach($myArray as $name => $values){            // Loops Through $myArray
        if(count($myArray [$name]) == $i){            // Checks each Key in $myArray to see if size is the same as $I
            $temp_array[$name] = $myArray[$name];     // Adds to $temp_array
        }

    }
    ksort($temp_array);                               // Sorts temp array created in loop above alpahbetically
    $sorted_array += $temp_array;                     // and adds its to a new array
    $temp_array = array();
} 
```

此循环允许您按数组值的大小排序，然后如果有多个具有相同值的键将按字母顺序排序

```
$myArray = Array (    // This array sorted by size only - arsort($myArray)
    [AB] => Array (
        [1] => 1
        [2] => 1
        [3] => 1 
    )      
    [AA] => Array (
        [1] => 1 
        [2] => 1
        [3] => 1 
    )
    [AC] => Array (
        [1] => 1 
        [2] => 1
        [3] => 1 
    )      
    [BB] => Array (
        [1] => 1
        [2] => 1 
    )      
    [BA] => Array (
        [1] => 1 
        [2] => 1 
    )      
    [CA] => Array (
        [1] => 1 
    )      
    [CB] => Array (
        [1] => 1 
    ) 
)

$myArray = Array (     // Array Sorted By Size and Alphabetically - After loop
    [AA] => Array (
        [1] => 1
        [2] => 1
        [3] => 1 
    )      
    [AB] => Array (
        [1] => 1 
        [2] => 1
        [3] => 1 
    ) 
    [AC] => Array (
        [1] => 1 
        [2] => 1
        [3] => 1 
    )      
    [BA] => Array (
        [1] => 1
        [2] => 1 
    )      
    [BB] => Array (
        [1] => 1 
        [2] => 1 
    )      
    [CA] => Array (
        [1] => 1 
    )      
    [CB] => Array (
        [1] => 1 
    ) 
) 
```

# c# - 从 C# 中的 sql 检索图像

> ID：14723401
> 
> 赞同：0
> 
> 时间：2013-02-06T07:03:33.483
> 
> 标签：c#, sql, image

我能够成功地将图像存储在 SQL DB 中，图像有一个字段为 varchar50。这是我尝试过的代码

```
DataTable dt=new DataTable();
dt=neworder.Selectfromimage1();

if (dt.Rows.Count > 0)
{

 // byte[] image =(byte[])dt.Rows[0]["image"];
 byte image=Convert.ToByte(dt.Rows[0]["image"]);
 MemoryStream stream = new MemoryStream(image);
 //stream.Write(image, 0, image.Length);
 stream.Seek(0,

 SeekOrigin.Begin);
 stream.Close();

 btncompanion.Image =

 Image.FromStream(stream);
 } 
```

我收到错误“输入字符串的格式不正确”

```
byte image=Convert.ToByte(dt.Rows[0]["image"]); 
```

**已编辑**

保存图像的代码是

```
private byte[] ImageToStream(string fileName)
{

 MemoryStream stream = new MemoryStream();
 tryagain:

 try
 {

  Bitmap image = new Bitmap(fileName);
  image.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);

  // image.Save(stream, System.Drawing.Imaging.ImageFormat.Gif);
 }

 catch (Exception )
 {

  goto tryagain;
 }

 return stream.ToArray();
}
fName ="C:\\Documents and Settings\\KAEM\\My Documents\\My Pictures\\images.jpg";
if (File.Exists(fName))
{

 int id = 2;
 byte[] content = ImageToStream(fName);
 if (neworder.Insertintoimage1(content.ToString()))
 {

}

}

else
{

 MessageBox.Show(fName + " not found ");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:57:10.427

您将图像的路径存储在数据库中。您的代码应如下所示：

```
string imagePath=dt.Rows[0]["image"].ToString();
            byte[] imageBytes;
            using (FileStream fs = File.Open(imagePath)) {
                 btncompanion.Image = Image.FromStream(fs);
            } 
```

试试这个，没测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:09:36.493

在尝试阅读之前，您正在关闭流。那是行不通的。您应该尝试以下方法：

```
byte[] image=Convert.ToByte(dt.Rows[0]["image"]);
using (MemoryStream stream = new MemoryStream(image))
{
    btncompanion.Image = Image.FromStream(stream);
} 
```

如果这不起作用并给出 GDI+ 错误，那是因为在图像反序列化之前流已关闭。在这种情况下使用这个：

```
byte image=Convert.ToByte(dt.Rows[0]["image"]);
MemoryStream stream = new MemoryStream(image);
btncompanion.Image = Image.FromStream(stream); 
```

此外，在存储图像的代码中，您从图像文件中获取字节，但将它们作为`string`数据库传递。您是否知道图像字节可以包含从字符串中删除或终止字符串的不可打印字节？

不要将图像存储为字符串或至少使用 base 64 编码。代码如下：

```
if (File.Exists(fName))
{
    byte[] content = ImageToStream(fName);
    string contentBase64 = Convert.ToBase64String(content);
    if (neworder.Insertintoimage1(contentBase64))
        ....
} 
```

并检索：

```
string image = dt.Rows[0]["image"];
byte[] imageBytes = Convert.FromBase64String(image);

MemoryStream stream = new MemoryStream(imageBytes);
btncompanion.Image = Image.FromStream(stream); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:06:26.093

您必须弄清楚如何对数据进行编码以生成 varchar 字符串。例如，如果它是 base64，您将使用[`Convert.FromBase64String`](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)：

```
byte[] image = Convert.FromBase64String(dt.Rows[0]["image"]) 
```

现在，由于您是存储图像的人，您应该知道它是如何编码的，并且应该能够执行相反的过程以将其取回。

# regex - 是否可以绕过我的正则表达式并执行任何 javascript？

> ID：14723404
> 
> 赞同：0
> 
> 时间：2013-02-06T07:03:47.400
> 
> 标签：regex, security, scripting, xss, eval

是否可以绕过我的正则表达式并执行任何 javascript？

```
function json(a){ 
    if (/^\s*$/.test(a) ? 0 : /^[\],:{}\s\u2028\u2029]*$/
        .test(a.replace(/\\["\\\/bfnrtu]/g, "@")
        .replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]")
        .replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g, ""))) 

     try{ 
         return eval("(" + a + ")") 
     } catch (b) {} 
     g(Error("Invalid JSON string: " + a)) 
}
//... 
json(window.name); 
```

我相信是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:39:59.203

该代码是 的一部分[`goog.json.parse`](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev-channel-js.js?spec=svn308&r=308#3964)，它是 Crockford 的 json2.js 的一个分支，允许额外的空白字符。

查看[源代码](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)，您会发现有用的注释解释了为什么这些正则表达式会阻止执行。该代码已经经过多年的实战测试，所以我怀疑是否存在任何漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:07:25.917

这个

```
(true");alert(9);//" 
```

非常接近有效的 javascript 语句，并将绕过此正则表达式。

小心你的正则表达式，有人可以绕过它。

# java - Java中的PriorityQueue如何对重复条目进行排序？

> ID：14723405
> 
> 赞同：8
> 
> 时间：2013-02-06T07:03:48.437
> 
> 标签：java, priority-queue

听起来可能很傻，但是当您拥有 (key, value) 对的对象并根据键对它们进行排序时，这很有意义。用代码说明我的观点：

```
public class Pair implements Comparable<Pair> {
    private int value;
    private int key;

    public Pair(int key, int value) {
        this.key   = key;
        this.value = value;
    }

    @Override
    public int compareTo(Pair o) {
        if (this.key > o.key)
            return 1;
        else if (this.key < o.key)
            return -1;
        return 0;
    }
}

public class program {
    public static void main(String[] args) {
        PriorityQueue<Pair> queue = new PriorityQueue<Pair>;
        queue.add(new Pair(1,1));
        queue.add(new Pair(1,2));
        queue.add(new Pair(1,3));

        Pair pair = queue.poll(); // What would be in pair?
    }
} 
```

里面会有什么`pair`？第一个或最后一个添加的元素？还是其中任何一个无法决定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T07:20:41.343

PriorityQueue API 对这种情况不做任何承诺：

此队列的头部是相对于指定排序的最小元素。如果多个元素以最低值绑定，则头部是这些元素之一——绑定被任意打破。队列检索操作 poll、remove、peek 和 element 访问队列头部的元素。

但它很容易测试。将 toString 添加到 Pair

```
@Override
public String toString() {
    return key + " " + value;
} 
```

并打印投票结果

```
 Pair pair = queue.poll(); // What would be in pair?
    System.out.println(pair); 
```

它打印

```
1 1 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-06T07:14:37.067

基本上`Queue`是 firstInfirstOut 数据结构。

在-ity 中定义了顺序`PriorityQueue`。`comparable`

与您的所有情况的优先级`Pair()`相同。因此顺序没有变化。

**先进先出**即`Pairs (1,1) (1,2) (1,3)`

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)

> 队列检索操作 poll、remove、peek 和 element 访问队列头部的元素。

# sql - 使用 powershell 提取 SQL 数据文件和日志文件

> ID：14723407
> 
> 赞同：0
> 
> 时间：2013-02-06T07:03:54.930
> 
> 标签：sql, powershell

我面临这个功能的问题。

```
function GetDBSize {
                #Get Instance(s) in the server
                [cmdletbinding()]
                Param
                    (   # How often do you want to collect data (in second)?(15)
                        [Parameter(Mandatory=$true, 
                                   ValueFromPipeline=$true,
                                   HelpMessage="Enter The ServerNames Separated by Comma")]
                        $MachineName = "sarchost1063"
                        # How often do you want to collect data (in second)?(15)
                    )

                $b=@()
                foreach ($mname in $MachineName)

                {
                $reg = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine',$mname)
                $regKey= $reg.OpenSubKey("SOFTWARE\\Microsoft\\Microsoft SQL Server\\Instance Names\\SQL" )
                $Instances = $regkey.GetValueNames()

                if ($Instances -ne $null) {
                                #Check to see is server has SQL Server install
                                #Define databases that need to be exclude 
                                $SystemDatabases = @("master", "msdb", "model", ,"tempdb", "mssqlsystemresource", "_total")

                                #Define counters
                                $counterdata = ":Databases(*)\Data File(s) Size (KB)"
                                $counterlog = ":Databases(*)\Log File(s) Size (KB)"
                                $DBSize = $null
                                foreach ($Instance in $Instances) {
                                                if ($Instance -eq "MSSQLSERVER") {$SQLServer = "SQLServer"} else {$SQLServer = "MSSQL`$" + $Instance}
                                                Write-Output $Instance
                                                $data = "\" + $SQLServer + $counterdata
                                                $log = "\" + $SQLServer + $counterlog
                                                $counter = @($data, $log)
                                                $DBDataFile = Get-Counter -Counter $counter -MaxSamples 1
                                                $DBDataFile = $DBDataFile.CounterSamples | ? {$SystemDatabases -notcontains $_.InstanceName } 
                                                $DBDataFile = $DBDataFile | select @{name="DatabaseName"; expression={$_.InstanceName}},@{name="Path"; expression={$_.path}},@{name="Data Size (MB)"; Expression={$_.CookedValue/1000}}

                                                #NOTE - If there is no database for the instance file will not generate.
                                                if ($DBDataFile -ne $null) {if ($DBSize -eq $null) { $DBSize = $DBDataFile} else {$DBSize = $DBSize + $DBDataFile}}
                                }

                                $b+=$dbsize

                }

                }
                return $b
                } 
```

当我对一组机器名称执行此脚本时，我只得到基本服务器的输出，有人可以帮忙吗？

我目前登录到 win2k8sql12b 并将 win2k8sql12a 的函数作为参数运行，但是当我这样做时，它会给我 win2k8sql12b 的输出

```
PS C:\Users\administrator.SEA-TM> GetDBSize -MachineName win2k8sql12a | fl *
MSSQLSERVER

DatabaseName   : win2k8sql12b_delme
Path           : \\win2k8sql12b\sqlserver:databases(win2k8sql12b_delme)\data file(s) size (kb)
Data Size (MB) : 4.096

DatabaseName   : tempdb
Path           : \\win2k8sql12b\sqlserver:databases(tempdb)\data file(s) size (kb)
Data Size (MB) : 8.192

DatabaseName   : win2k8sql12b_delme
Path           : \\win2k8sql12b\sqlserver:databases(win2k8sql12b_delme)\log file(s) size (kb)
Data Size (MB) : 1.016

DatabaseName   : tempdb
Path           : \\win2k8sql12b\sqlserver:databases(tempdb)\log file(s) size (kb)
Data Size (MB) : 0.76

PS C:\Users\administrator.SEA-TM> GetDBSize -MachineName win2k8sql12b | fl *
MSSQLSERVER

DatabaseName   : win2k8sql12b_delme
Path           : \\win2k8sql12b\sqlserver:databases(win2k8sql12b_delme)\data file(s) size (kb)
Data Size (MB) : 4.096

DatabaseName   : tempdb
Path           : \\win2k8sql12b\sqlserver:databases(tempdb)\data file(s) size (kb)
Data Size (MB) : 8.192

DatabaseName   : win2k8sql12b_delme
Path           : \\win2k8sql12b\sqlserver:databases(win2k8sql12b_delme)\log file(s) size (kb)
Data Size (MB) : 1.016

DatabaseName   : tempdb
Path           : \\win2k8sql12b\sqlserver:databases(tempdb)\log file(s) size (kb)
Data Size (MB) : 0.76

PS C:\Users\administrator.SEA-TM> 
```

# javascript - 如何使用 Javascript/underscorejs 找到包含对象的数组数组的交集？

> ID：14723412
> 
> 赞同：6
> 
> 时间：2013-02-06T07:04:18.297
> 
> 标签：javascript, multidimensional-array, knockout.js, underscore.js, lodash

我不知道如何找到这组数组的交集：

```
[
 [
  {"name":"product1","light":"1"},
  {"name":"product2","light":"2"},
  {"name":"product5","light":"5"},
  {"name":"product4","light":"4"}
 ],
 [
  {"name":"product2","light":"2"},
  {"name":"product3","light":"3"},
  {"name":"product4","light":"4"}
 ],[...more arrays with objects]
] 
```

这只是**样本数据**，我有很多变化但具有这种结构的真实数据集。我希望返回的交集看起来像这样（相交对象的单个数组）：

```
[
 {"name":"product2","light":"2"},
 {"name":"product4","light":"4"},
] 
```

我与 LoDashjs 和 Underscorejs 一起尝试了这个：

```
_.intersectionObjects = _.intersect = function(array) {
var slice = Array.prototype.slice; // added this line as a utility
var rest = slice.call(arguments, 1);
return _.filter(_.uniq(array), function(item) {
  return _.every(rest, function(other) {
    //return _.indexOf(other, item) >= 0;
    return _.any(other, function(element) { return _.isEqual(element, item); });
  });
});
}; 
```

我需要这个，因为我正在尝试使用 knockoutjs 创建一个标签系统。我有一个分类标签按钮的布局，在点击时写入“过滤器”可观察数组，剩下的唯一事情就是找到包含在这个可观察数组中的过滤产品的交集。

请帮帮我，我已经连续两天尝试解决这个问题，但缺乏javascript知识来解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T07:48:39.383

尝试添加它们的应用方法：

```
 var myArr = [
    [
      {"name":"product1","light":"1"},
      {"name":"product2","light":"2"},
      {"name":"product5","light":"5"},
      {"name":"product4","light":"4"}
    ],
    [
      {"name":"product2","light":"2"},
      {"name":"product3","light":"3"},
      {"name":"product4","light":"4"}
    ]
  ]

  _.intersectionObjects = _.intersect = function(array) {
    var slice = Array.prototype.slice;
    var rest = slice.call(arguments, 1);
    return _.filter(_.uniq(array), function(item) {
      return _.every(rest, function(other) {
        return _.any(other, function(element) {
          return _.isEqual(element, item);
        });
      });
    });
  };

  var myIntersection = _.intersectionObjects.apply(_, myArr);

  for (var i = 0; i < myIntersection.length; i++) {
    console.log(myIntersection[i]);
  }

  // Sample Output:
  // Object {name: "product2", light: "2"}
  // Object {name: "product4", light: "4"} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-07T00:46:49.713

这是我使用的一种方法，似乎效果很好。

```
var arr1 = [{"id":"1"},{"id":"2"},{"id":"3"}];
var arr2 = [{"id":"1"},{"id":"3"}];

function match(item){
var isMatch = _.matcher(item);
var matches = _.filter(arr2, isMatch);
  return matches[0];
}

var matchArray = _.compact(_.map(arr1, function(val){ return match(val)}));

document.write(JSON.stringify(matchArray));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:13:16.790

如果您只比较对象本身，您可能会遇到错误，因为这将返回 false：

```
var o1 = {"foo":"bar"};
var o2 = {"foo":"bar"};
return o1 == o2; 
```

您需要比较对象内部的值，并基于这些值相交：

这里的 JSFiddle 做你喜欢的事。[http://jsfiddle.net/turiyag/bWrQW/6/](http://jsfiddle.net/turiyag/bWrQW/6/)

```
function valueIntersect(a1, a2) {
    var aReturn = [];
    for(i1 in a1) {
        o1 = a1[i1];
        for (i2 in a2) {
            o2 = a2[i2];
            if(equals(o1,o2)) {
                aReturn.push(o1);
                break;
            }
        }
    }
    return aReturn;
}

function equals(o1, o2) {
    if (!o2 || o1.length != o2.length) {
        return false;
    }
    for (i in o1) {
        if (o1[i] !== o2[i]) {
            return false;
        }
    }
    return true;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-21T15:47:56.360

根据[https://lodash.com/docs#intersectionBy](https://lodash.com/docs#intersectionBy)

`_.intersectionBy([arrays], [iteratee=_.identity])`

# javascript - amplifyjs 未知资源 ID

> ID：14723413
> 
> 赞同：1
> 
> 时间：2013-02-06T07:04:21.770
> 
> 标签：javascript, jquery, amplifyjs

我正在尝试在我的 MVC4 应用程序中设置 amplifyjs。我正在尝试做一个返回 json 数据的简单服务器调用。我让它在我单独的示例项目中工作。

但现在我正在将相同的代码与我的真实应用程序集成。有以下代码。

```
 //sampleservice.js
      amplify.request.define("getSampleData", "ajax", {
          url: "/SampleData/GetSampleData",
          dataType: "json",
          type: "GET"    
      });

      function getSampleData(callbacks) {
            return amplify.request({
              resourceId: "getSampleData",
              success: callbacks.success,
               error: callbacks.error
            });
     }; 
```

这就是我试图在我的 Jquery.Ready 中使用它的方式。

```
 var list;
     $(document).ready(function () {

     list = ko.observableArray([]);
     ko.applyBindings($('#body'));
     getSampleData({
     success: function (data) {
        $(data).each(function (index, item) {
            list.push(item);
        });
    },
    error: function (response) {
        alert(response);
    }
});
 }); 
```

我可以看到我的 js 遇到了所有断点，但我遇到了以下 js 异常

```
 Uncaught amplify.request: unknown resourceId: getSampleData amplify.js:477
    amplify.request amplify.js:477
    getSampleData sampleservice.js:34
    (anonymous function) sampleviewmodel.js:9
    fire jquery-1.9.0.js:1017
    self.fireWith jquery-1.9.0.js:1127
    jQuery.extend.ready jquery-1.9.0.js:416
    DOMContentLoaded 
```

我知道这是一个非常微不足道的问题，正如你所看到的，我只是一个 Js 编程的新手，我已经花了几个小时在这上面，但还没有弄清楚任何事情。如果有人可以指导或至少有一些提示可以在这里为我调试它，那将有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:47:27.303

您似乎没有使用闭包，因此您的 Amplify 定义不可用。您将代码放在立即调用的函数表达式 (iife) 中，如下所示。这将运行您的放大定义代码并使其`getSampleData`作为`dataservice`对象的属性可用。所以你打电话`dataservice.getSampleData(...)`

```
var dataservice = (function(amplify) {
  var init = function() {
      amplify.request.define("getSampleData", "ajax", {
          url: "/SampleData/GetSampleData",
          dataType: "json",
          type: "GET"
      });
  },

  getSampleData = function (callbacks) {
    return amplify.request({
        resourceId: "getSampleData",
        success: callbacks.success,
        error: callbacks.error
    });
};

init();

return {
    getSampleData: getSampleData
};

})(amplify); 
```

请注意，您对淘汰赛的使用也不正确。该`ko.applyBindings`函数将视图模型作为第一个参数，将 DOM 元素作为可选的第二个参数。你的视图模型在哪里？

# c# - 更新 datagridview 单元格值并在 datagridview 上显示

> ID：14723414
> 
> 赞同：1
> 
> 时间：2013-02-06T07:04:21.947
> 
> 标签：c#, .net, visual-studio-2005

我正在尝试在 c# 和 .net 中的 Visual Studio 2005 中创建一个 datagridview，其中我已经定义了行数和列数（如 2*2）我想向这些单元格添加值。如何向这些单元格添加值并不断更新这些值。我使用`random`函数进行更新，但为此我每次想要更新时都必须单击按钮，所以我想知道是否有一种方法可以自动更新它，但不是从数据库而是从 random() 函数。

我在哪里可以学习这些东西，告诉我是否也使用线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:11:13.040

有很多方法可以做到这一点，使用`Threading`, `Timer`（如果它是 WinForms，但我假设它是）或`BackgrounWorker`. 在我看来，最好的方法是 Timer。

你`Timer`这样使用：

```
 private void CreateTimer()
    {
        var t = new Timer();
        t.Interval = 1000; //how often update timer (in ms)
        t.Tick += new EventHandler(Tick);
        t.Start();
    }

    private void Tick(object sender, EventArgs e)
    {
        //logic to update your data grid view.
    } 
```

# asp.net - 没有数据时如何隐藏编辑模板

> ID：14723416
> 
> 赞同：0
> 
> 时间：2013-02-06T07:04:24.617
> 
> 标签：asp.net, c#-4.0, gridview

我正在使用一个`grid view`我提供两个选项，

1.  如果您在数据库中有数据，它将显示在`edit template`，
2.  如果没有数据`footer template`，将 b 显示`entering new data`。

    但是当我尝试第二点时，空白编辑模板也会显示在带有编辑按钮的页脚行上方，请建议我在没有数据时如何隐藏该编辑模板。

我的代码是

设计：

```
 <asp:GridView ID="gvNavigationDtls" runat="server" AutoGenerateColumns="False" SkinID="GridView"
                                        AlternatingRowStyle-CssClass="gridAltRow" RowStyle-CssClass="gridRow" ShowFooter="True"
                                        EditRowStyle-CssClass="gridEditRow" FooterStyle-CssClass="gridFooterRow">
                                        <AlternatingRowStyle CssClass="gridAltRow" />
                                        <Columns>
                                            <asp:TemplateField HeaderText="OBSERVATION CODE" HeaderStyle-HorizontalAlign="Left"
                                                ControlStyle-Width="150px">
                                                <EditItemTemplate>
                                                    <asp:TextBox ID="txtCode" runat="server" Text='<%# Bind("code_name") %>' Width="150px"></asp:TextBox>
                                                    <asp:ImageButton ID="imgbtnCode" runat="server" Height="20px" ImageAlign="AbsMiddle"
                                                        ImageUrl="~/Images/openFolder.png" OnClientClick="ShowSearch('Code',this); return false;"
                                                        TabIndex="5" Width="20px" />
                                                    <asp:HiddenField ID="hdnCodeCd" runat="server" Value='<%# Bind("NAV_DEF_CODE_CD") %>' />
                                                </EditItemTemplate>
                                                <FooterTemplate>
                                                    <asp:TextBox ID="txtCode" runat="server" Width="150px"></asp:TextBox>
                                                    <asp:ImageButton ID="imgbtnCode" runat="server" Height="20px" ImageAlign="AbsMiddle"
                                                        ImageUrl="~/Images/openFolder.png" OnClientClick="ShowSearch('Code',this); return false;"
                                                        TabIndex="5" Width="20px" />
                                                    <asp:HiddenField ID="hdnCodeCd" runat="server" />
                                                </FooterTemplate>
                                                <ItemTemplate>
                                                    <%--<asp:Label ID="lblCode" runat="server" Text='<%# Bind("code_name") %>'></asp:Label>--%>
                                                    <%# Eval("code_name")%>
                                                </ItemTemplate>
                                                <ControlStyle Width="150px" />
                                                <HeaderStyle HorizontalAlign="Left" />
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="DESCRIPTION" HeaderStyle-HorizontalAlign="Left" ControlStyle-Width="150px">
                                                <EditItemTemplate>
                                                    <asp:TextBox ID="txtDescription" runat="server" Text='<%# Bind("OBSERVATION") %>'
                                                        Width="150px" TextMode="MultiLine"></asp:TextBox>
                                                </EditItemTemplate>
                                                <FooterTemplate>
                                                    <asp:TextBox ID="txtDescription" runat="server" Width="150px" TextMode="MultiLine"></asp:TextBox>
                                                </FooterTemplate>
                                                <ItemTemplate>
                                                    <%# Eval("OBSERVATION")%>
                                                </ItemTemplate>
                                                <ControlStyle Width="150px" />
                                                <HeaderStyle HorizontalAlign="Left" />
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="STATUS" HeaderStyle-HorizontalAlign="Left" ControlStyle-Width="80px">
                                                <EditItemTemplate>
                                                    <asp:TextBox ID="txtStatus" runat="server" Text='<%# Bind("OBS_STATUS") %>' Width="80px"></asp:TextBox>
                                                </EditItemTemplate>
                                                <FooterTemplate>
                                                    <asp:TextBox ID="txtStatus" runat="server" Width="80px"></asp:TextBox>
                                                </FooterTemplate>
                                                <ItemTemplate>
                                                    <%# Eval("OBS_STATUS")%>
                                                    <%--      <%# Eval("NAV_OBS_DTL_CD")%>--%>
                                                </ItemTemplate>
                                                <ControlStyle Width="80px" />
                                                <HeaderStyle HorizontalAlign="Left" />
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="" ShowHeader="False" HeaderStyle-HorizontalAlign="Left">
                                                <EditItemTemplate>
                                                    <asp:LinkButton ID="lnkUpdate" runat="server" CausesValidation="True" CommandName="Update"
                                                        Text="Update" OnClientClick="return confirm('Update?')" ValidationGroup="Update"></asp:LinkButton>
                                                    <asp:ValidationSummary ID="vsUpdate" runat="server" ShowMessageBox="true" ShowSummary="false"
                                                        ValidationGroup="Update" Enabled="true" HeaderText="Validation Summary..." />
                                                    <asp:LinkButton ID="lnkCancel" runat="server" CausesValidation="False" CommandName="Cancel"
                                                        Text="Cancel"></asp:LinkButton>
                                                    <asp:HiddenField ID="hdnNavObsDtlCd" runat="server" Value='<%# Bind("NAV_OBS_DTL_CD") %>' />
                                                </EditItemTemplate>
                                                <FooterTemplate>
                                                    <asp:LinkButton ID="lnkAdd" runat="server" CausesValidation="True" CommandName="Insert"
                                                        ValidationGroup="Insert" Text="Insert"></asp:LinkButton>
                                                    <asp:ValidationSummary ID="vsInsert" runat="server" ShowMessageBox="true" ShowSummary="false"
                                                        ValidationGroup="Insert" Enabled="true" HeaderText="Validation..." />
                                                    <asp:HiddenField ID="hdnNavObsDtlCd" runat="server" Value='<%# Bind("NAV_OBS_DTL_CD") %>' />
                                                </FooterTemplate>
                                                <ItemTemplate>
                                                    <asp:LinkButton ID="lnkEdit" runat="server" CausesValidation="False" CommandName="Edit"
                                                        Text="Edit"></asp:LinkButton>
                                                    <asp:HiddenField ID="hdnFlag" runat="server" Value='<%# Bind("Flag") %>' />
                                                </ItemTemplate>
                                                <HeaderStyle HorizontalAlign="Left" />
                                            </asp:TemplateField>
                                        </Columns>
                                        <EditRowStyle CssClass="gridEditRow" />
                                        <EmptyDataTemplate>
                                            <table class="grid" cellspacing="0" rules="all" border="1" id="gvNavigationDtls"
                                                style="border-collapse: collapse;">
                                                <tr>
                                                    <th align="left" scope="col">
                                                        Observation Code
                                                    </th>
                                                    <th align="left" scope="col">
                                                        Description(initial comm.)
                                                    </th>
                                                    <th align="left" scope="col">
                                                        Status
                                                    </th>
                                                    <th align="left" scope="col">
                                                    </th>
                                                </tr>
                                                <tr class="gridRow">
                                                    <td colspan="8">
                                                        No Records found...
                                                    </td>
                                                </tr>
                                                <tr class="gridFooterRow">
                                                    <td>
                                                        <asp:TextBox ID="txtCode" runat="server" MaxLength="6"></asp:TextBox>
                                                    </td>
                                                    <td>
                                                        <asp:TextBox ID="txtDescription" runat="server"></asp:TextBox>
                                                    </td>
                                                    <td>
                                                        <asp:TextBox ID="txtStatus" runat="server"></asp:TextBox>
                                                    </td>
                                                    <td colspan="2" align="justify" valign="middle">
                                                        <asp:LinkButton ID="lnkAdd" runat="server" CausesValidation="false" CommandName="emptyInsert"
                                                            Text="emptyInsert"></asp:LinkButton>
                                                    </td>
                                                </tr>
                                            </table>
                                        </EmptyDataTemplate>
                                        <FooterStyle CssClass="gridFooterRow" />
                                        <RowStyle CssClass="gridRow" />
                                    </asp:GridView> 
```

在页脚中添加空行的功能：

```
 private void ShowNoResultFound(DataTable source, GridView gv)
    {
 source.Columns.Add("code_name");
        source.Columns.Add("OBSERVATION");
        source.Columns.Add("OBS_STATUS");
        source.Columns.Add("Flag");
        source.Rows.Add(source.NewRow()); // create a new blank row to the DataTable
        // Bind the DataTable which contain a blank row to the GridView
        gv.DataSource = source;
        gv.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:15:54.357

`ShowNoResultFound`检查长度后 调用`gvNavigationDtls`。尝试这个

```
if(gvNavigationDtls.Rows.Count == 0)
{
  // show the footer
} 
```

# java - 如何将控制台输入行保存为 .txt 文件？

> ID：14723418
> 
> 赞同：0
> 
> 时间：2013-02-06T07:04:26.493
> 
> 标签：java, eclipse, ide

我正在尝试在 java Eclipse 的控制台中编写几行命令，然后将它们保存为 .txt 文件。例如我有

做这个

不要那样做

在我的控制台上，我想拥有与 .txt 文件相同的东西。现在我可以将其转换为文件，但不能转换为 .txt 文件，也不是相同的可读形状。有什么帮助吗？我已经工作了 3 天了 :))

我认为这是我能得到的最接近的

```
 FileInputStream fileInputStream=null;

    File file = new File("C:\\Users\\Administrator\\Desktop\\a.txt");

    byte[] bFile = new byte[(int) file.length()];

    try {
        //convert file into array of bytes
    fileInputStream = new FileInputStream(file);
    fileInputStream.read(bFile);
    fileInputStream.close();

    //convert array of bytes into file
    FileOutputStream fileOuputStream = 
              new FileOutputStream("C:\\Users\\Administrator\\Desktop\\a.txt"); 
    fileOuputStream.write(bFile);
    fileOuputStream.close();

    System.out.println("Done");
    }catch(Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:18:42.770

如果您正在编写文本文件，我建议您使用文本流，而不是使用字节。将“Hello world”写入“M:\outputfile.txt”的文本文件，例如：

```
import java.io.*;

public class FileIOExample {

    public static void main(String[] args) {
        PrintWriter out;
        try {
            out = new PrintWriter(new FileWriter("M:\\outputfile.txt"));
            out.print("Hello "); 
            out.println("world"); 
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:19:00.753

线路`new byte[(int) file.length()]`引起问题

因为初始长度`a.txt`实际上是`zero`，否则`non-existing`您的代码可能无法读取任何字节。

我建议，

*   有一个固定的缓冲区大小来读取具有可能退出条件的内容。

*   将字符读取到流中并定义退出条件，例如字符是否`.equals()`退出等

*   最后将字节/字符写入文件

提到的方法的一些示例代码：

```
BufferedReader br = null;
        Reader r = new InputStreamReader(System.in);
        br = new BufferedReader(r);
        String str = null;
        try {
            do{
                System.out.println("Enter Input, exit to quit.");
                str = br.readLine();
                System.out.println(str);
            } while (!str.equalsIgnoreCase("exit"));
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# vim - Vim，如何更改 * 键的默认行为？

> ID：14723419
> 
> 赞同：0
> 
> 时间：2013-02-06T07:04:30.283
> 
> 标签：vim

当我在一个单词上按 * 按钮时，vim 会搜索它并将光标移动到该单词的下一个匹配项的开头。如何以这种方式更改此功能：当我按 * 到一个单词时，它会搜索它，为匹配的单词着色，我可以按 n 移动到下一个单词，**但它不会自动将光标移动到下一个的开头匹配**。我只需要 vim 为我按​​ * 的单词着色，并使用 n 和 N 导航该单词的下一个和上一个匹配项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:03:09.070

我也喜欢这样。您可以使用我的[SearchHighlighting 插件](http://www.vim.org/scripts/script.php?script_id=4320)或插件页面上列出的替代方案之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:37:53.763

我也更喜欢这种行为。我在我的 vimrc 中已经有很多年了：

```
noremap * *N
noremap # #N 
```

`#`作用相同`*`但相反

# java - 我是否应该为从 getter 返回的每个对象编写复制构造函数

> ID：14723423
> 
> 赞同：2
> 
> 时间：2013-02-06T07:04:57.610
> 
> 标签：java, copy-constructor, getter

好吧，标题说明了一切。

例如，我有一个 Employee 类

```
class Employee
{
   private Date joinDate;

   public Date getJoinDate()
   {
       return joinDate;    
   }
} 
```

这里 getJoinDate 返回对内部 joinDate 对象的引用。当我在 FindBug 中分析我的代码时，它给了我一个“恶意代码漏洞”警告，因为“......可能会通过返回 ClassXYZ.pqrDate 来暴露内部表示”

因此，访问此 getter 的任何代码都有可能修改存储在实例之外的类的此实例中的日期。那么我应该使用复制构造函数吗

**Q1。我是否应该编写复制构造函数（或遵循任何其他方法）**：

```
class Employee
{
   private Date joinDate;

   Employee(Employee e)      //copy constructor
   {
       joinDate = e.joinDate;
   }

   public Date getJoinDate()
   {
       return joinDate;    
   }
} 
```

**Q2 如何为框架对象编写复制构造函数？**我可以为我的业务对象定义复制构造函数，但不能为框架对象定义。**我应该有一个通用的 util 类，所有方法都返回接受该实例的框架类的新实例**吗？

```
class CopyConstructorUtil
{
    public Date copyDate(Date date)
    {
         return new Date(date.getTime());
    }
    //....
} 
```

**Java Object 类也确实提供了所有类都继承的 clone()**方法。但它返回对象。那么我应该简单地**在吸气剂中进行铸造**吗？：

```
class Employee
{
   private Date joinDate;

   public Date getJoinDate()
   {
       return (Date)joinDate.clone();    
   }
} 
```

**Q3。哪种方法更可取？还是我应该使用任何其他方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:17:04.577

我建议您声明`Date Object`为`final`并使用复制构造函数。

有一篇不错的文章“关于为什么 clone() 在 Java 中有很多缺点”[链接](http://en.wikipedia.org/wiki/Clone_%28Java_method%29)。

```
class Employee{
    private final Date joinDate;
    public Employee(Date joinDate,...){
         this.joinDate = joinDate;
    }
    public Date getJoinDate(){
         return new Date(joinDate);    
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:30:13.640

问题是 Java 数据类型的可变性。因此，即使使用复制构造函数，如果没有实例化新的 Date 仍然会泄漏您的对象状态。

你应该这样做（你需要同时修改getter和setter），否则你会泄露你的对象状态：

```
public Date getJoinDate() {
    return new Date(joinDate.getTime());
}

public void setDate(Date joinDate) {
    this.joinDate = new Date(joinDate.getTime());
} 
```

* * *

调用`clone()`不太好，因为正如在*Effective Java, 2nd Edition*中提到的那样，它可能是一个安全问题：

```
class MyDate extends Date {
    public Object clone() {
        return this;
    }
} 
```

现在您可以将此对象作为日期传递，并且因为调用者可以持有对该对象的引用，所以它可以操纵对象的状态，即使在克隆之后也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:20:28.457

您的员工类的复制构造函数不会阻止任何人更改您返回的日期

```
Date.setTime(long) 
```

我会在返回它们之前克隆内部对象。或者，我将使用您在克隆代码之前使用的方法，而不是克隆。像这样：

```
class Employee {
   private final Date joinDate;

   public Date getJoinDate() {
       return new Date(joinDate.getTime());
   }
} 
```

此解决方案不需要强制转换，并且会阻止任何人编辑您的内部成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:23:32.813

在我们的项目中，我们禁用了这个 findbugs 规则。Findbigs 是真的，日期是可变对象，所以如果你真的想阻止任何更改，你别无选择，除了：

*   将日期返回为 long 以防止暴露实例

*   每次设置 getter 时都复制一份

但是您还应该考虑每次都复制的代码。出于这个原因，我们已禁用此规则并接受此漏洞。

# jquery - Rails - datetimepicker 字段未在数据库中更新

> ID：14723425
> 
> 赞同：0
> 
> 时间：2013-02-06T07:05:05.597
> 
> 标签：jquery, ruby-on-rails, datepicker, datetimepicker

我在我的网站上使用 jquery datetimepicker 插件来选择日期时间。在一个表单上，我更改了会议表单的 start_at 和 end_at 时间（都使用 datetimepicker），当提交时发布这个..

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"ugju0DDRlcMkg5u2FtTDj8upZNV16vXgd7RLqzgNmLE=", "meeting"=>{"organizer_id"=>"2", "state"=>"draft", "title"=>"testing endtime", "message"=>"wtf!", "start_at"=>"Thu, Feb 07, 03:00PM", "end_at"=>"Thu, Feb 7, 4:00PM",... 
```

显然 start_at 和 end_at 都在通过。奇怪的是 start_at 在数据库中得到更新，但 end_at 没有。两者都在表格上进行了更改。有任何想法吗？

从日志..

```
UPDATE "meetings" SET "start_at" = '2013-02-07 23:00:00.000000', "updated_at" = '2013-02-06 06:44:16.922129' WHERE "meetings"."id" = 6 
```

我的日期时间选择器设置..

```
 $('.date_time_select').live('click', function() {
    $(this).datetimepicker({
      ampm: true,
      dateFormat: "D, M d,",
      timeFormat: "h:mmTT",
      minDate: 0
    }).focus();
  }); 
```

我的控制器..

```
def update
  @meeting = current_user.meetings.find(params[:id])
  respond_to do |format|
    if @meeting.update_attributes(params[:meeting])
      format.html { redirect_to @meeting, :notice => "Meeting was successfully updated" }
      format.json { head :ok }
    end
  end
end 
```

和架构..

```
t.datetime "start_at"
t.datetime "end_at" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:36:15.267

时间格式应该都是一种格式。

请注意 的时间格式与`start_at`的不同`end_at`。

```
start_at=>Thu, Feb 07, 03:00PM

end_at=>Thu, Feb 7, 4:00PM 
```

因此，如果您的表单字段如下所示：

```
<%= f.text_field :end_at, :class => "ended-at-datetime" %> 
```

您可以`application.js`像这样显式设置它：

```
$('.ended-at-datetime').datetimepicker({dateFormat: 'yy-mm-dd ', timeFormat: 'hh:mm:ss ', ampm: true}); 
```

也一样`start_at`。

我可能是错的，但我没有看到它分开。

我知道如果格式不正确，它不会进入数据库。

# javascript - 如何写入 iframe 内的文本框

> ID：14723426
> 
> 赞同：2
> 
> 时间：2013-02-06T07:05:06.360
> 
> 标签：javascript, html

我有一个`main.html`, 里面是`<ifram id='if' name='if'>`，它加载另一个站点（这会加载一个不在我的域中的站点，例如 Facebook）。

`iframe`在has中加载的站点，`<form name='form2' id='form2'>`在其中有`<input type='text' name='tb' id='tb'>`

同样在 中`main.html`，我有一个按钮，我想知道我们是否可以在按钮上放置一些 Javascript，以便当我们单击它时，文本框中名为“az”的文本`tb`会更改为“az”。

我们应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:19:30.880

**您可以这样做，**因为那将是跨站点脚本，出于安全原因，这是禁止的。您可以使用代理，`iframe`通过您自己的站点提供 HTML，这样从浏览器的角度来看，它不再是跨站点的。

如果`<iframe>`来自同一域，则可以轻松访问这些元素：

```
$("#iFrame").contents().find("#someDiv") 
```

测试： http: [//jsfiddle.net/Yy6tu/](http://jsfiddle.net/Yy6tu/)按下`Ctrl+Shift+j`看看你得到了什么！

* * *

**更新：**如果您`other.html`在同一文件夹中有文件，您可以这样做：

**主要.html**：

```
<head>
    $('document').ready(function(){
        $("#if").contents().find("#b").val('lalalala');
    });
</head>

<body>
    <input type='button' name='executer' value="Maro">
    <iframe width="600" height="400" src='other.html' name='if' id="if"></iframe>
</body> 
```

**其他.html**：

```
<form action="x" name="form2" id="form2"> 
     <input type="text" name="tb" id="b">
</form> 
```

那应该工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:20:17.090

我的朋友是不可能的。跨域保护虽然限制了一些功能，但有很大的优势。

[堆栈溢出](https://stackoverflow.com/questions/2141535/change-text-box-value-of-an-iframe-on-a-different-domain-using-jquery)

这可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/bb735305.aspx](http://msdn.microsoft.com/en-us/library/bb735305.aspx)

一个可能的解决方案是重新加载 iframe。并将文本值作为参数添加到 iframe 的 url 查询字符串中。但这将是一个牵强的解决方案。

另一种可能的解决方案是使用中间 iframe 或称为代理 iframe。这可能会有所帮助：

[http://www.tomslabs.com/index.php/2012/06/iframes-and-javascript-cross-domain-security/](http://www.tomslabs.com/index.php/2012/06/iframes-and-javascript-cross-domain-security/)

**编辑：**

如果 iframe 与页面位于同一域中，则应该可以。

```
$('#if').contents().find('#b').val('fd'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:16:54.200

这是绝对不可能的，因为它直接违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

# c# - 过滤后如何将位置应用于节点

> ID：14723431
> 
> 赞同：2
> 
> 时间：2013-02-06T07:05:29.107
> 
> 标签：c#, asp.net, xml, xpath, system.xml

```
<AppXmlLogWritter>
  <LogData>
    <LogID>235820130202134128634953894887814709273</LogID>
    <LogDateTime>20130102134128</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>PACSFlag</LogFlag>
    <LogApplication>PACSLogApplication</LogApplication>
    <LogModule>PACSLogModule</LogModule>
    <LogLocation>PACSLogLocation</LogLocation>
    <LogText>PACSLogText</LogText>
  </LogData>
  <LogData>
    <LogID>2358201302021341286349538948878147093861</LogID>
    <LogDateTime>20130202134128</LogDateTime>
    <LogType>Error</LogType>
    <LogFlag>PACSFlag</LogFlag>
    <LogApplication>PACSLogApplication</LogApplication>
    <LogModule>PACSLogModule</LogModule>
    <LogLocation>PACSLogLocation</LogLocation>
    <LogText>PACSLogText</LogText>
  </LogData>
</AppXmlLogWritter> 
```

**Xpath查询**

```
/AppXmlLogWritter/LogData[LogApplication/text()[starts-with(. , 'P')]and position()>='1' and position()<='3']

**Before Filter**
<Node 1> Position 1
<Node 2> Position 2
<Node 3> Position 3
<Node 4> Position 4
<Node 5> Position 5
<Node 6> Position 6   

 **After Filter**
<Node 2> Position 2
<Node 5> Position 5
<Node 6> Position 6 
```

请参阅上面的节点列表在过滤器之前我有 6 个节点但是当我过滤时我得到三个节点所以我为那个 position()>='1' 和 position()<='3 编写查询但结果只有 1 个节点sql 在过滤器行号适用于所有行之后存在行号条件，但在 xml 中我该如何实现。我没有使用 LINQ to XML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:38:58.670

使用括号：

```
(/AppXmlLogWritter/LogData[LogApplication[starts-with(. , 'P')]])[position()<=3] 
```

如果您将位置测试放在`LogData`谓词中，那么它仅适用于该位置步骤，并将匹配限制为它们各自父元素`LogData`的第一个、第二个或第三个子元素。`LogData`使用括号，您正在构建一个初始节点集（所有以 P 开头的`LogData`元素`LogApplication`），然后按文档顺序*从该集中选择前三个节点。*

# sql - 根据条件过滤 Mssql 记录

> ID：14723434
> 
> 赞同：2
> 
> 时间：2013-02-06T07:05:37.380
> 
> 标签：sql, sql-server, sql-server-2008

我的 sql 结果中有 A、B、C 列。B 列可能有重复记录。为避免重复的 B 值，我需要检查 C 中的值。如果列 C 的值为 0，则应在 B 中仅选择该特定行。

这种处理应该只对重复记录进行。

```
Column A | Column B | Column C

value 1  | value 2  | 1

value 3  | value 2  | 0 
```

在上面的代码行中，值 3 | 值 2 | 0 ，应在查询结果中选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:13:58.870

尝试这个：

```
SELECT
    A, B, C
FROM
(
SELECT
    ROW_NUMBER() OVER (PARTITION BY B ORDER BY CASE WHEN C = 0 THEN 0 ELSE 1 END) rn,
    A, B, C
FROM Tbl
) A
WHERE rn = 1 
```

如果最小值`C`为 0，您可以`ORDER BY`只通过`C`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:48:30.360

另一种选择

```
SELECT  t1.ColumnA, t1.ColumnB, t1.ColumnC
FROM dbo.test32 t1
WHERE NOT EXISTS (
                  SELECT 1
                  FROM dbo.test32 t2             
                  WHERE t2.ColumnB = t1.ColumnB
                  GROUP BY t2.ColumnB
                  HAVING COUNT(*) > 1 AND MAX(t2.ColumnC) = t1.ColumnC
                  ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b7660b/1/0)上的演示[](http://sqlfiddle.com/#!3/b7660b/1/0)

# assembly - 16 位汇编打印额外的未知字符

> ID：14723436
> 
> 赞同：2
> 
> 时间：2013-02-06T07:05:42.793
> 
> 标签：assembly, x86, masm

我想用 16 位程序集（winasm IDE 和 masm）打印简单的*hello world ，但在显示“hello world”未知字符之前。*这是代码：

```
.MODEL small
.STACK 100h
.data
message db "Hello, world!$"
.code
_start:
    mov ah,9
    lea dx,message ; addr of buffer
    int 21h
    mov ah,1
    int 21h
END _start 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:13:16.383

我不太确定 MASM 语法，但您必须使用以下内容设置 DS 寄存器：

```
 mov  ax, @data  ; if the .data labels points to your data segment
    mov  ds, ax
; then your code
    mov  ah, 9 .......... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T23:35:14.473

在执行任何代码之前，您必须将 CS 移动到 DS 中。

```
.code
start:
    push cs ; <-- important!
    pop ds ; <-- important!
    ; -- your codes here --
    mov eax, 9h
    ...
    mov ax, 4C00h
    int 21h
end start 
```

# android - 在新安装的 Eclipse 中打开 android XML 文件显示 NullpointerException

> ID：14723440
> 
> 赞同：2
> 
> 时间：2013-02-06T07:06:04.463
> 
> 标签：android, xml, eclipse

请给我一个解决方案。我的问题是，**xml**文件没有从我的eclipse编辑器打开，当我从eclipse运行应用程序时没有响应。eclipse是新安装的

这是打开xml文件时的截图..

![在此处输入图像描述](../Images/077b5194ddc38376a86b09d7951057c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T17:50:50.697

默认的 xml 编辑器可能有问题。
右键单击 Package-Explorer 中的 xml 文件，然后单击“打开方式”。
这应该为您提供许多不同的选项来打开 xml 文件。

# javascript - Jquery数据表不适用于动态生成的html表

> ID：14723445
> 
> 赞同：0
> 
> 时间：2013-02-06T07:06:17.393
> 
> 标签：javascript, jquery, html, jquery-datatables

我正在尝试在动态生成的 html 表上应用 jquery dattable。但它不起作用。我正在这样做..

```
 function buildHtmlTable() {
    var columns = addAllColumnHeaders(myList);
    ////alert("Inserted rows");tp
    for (var i = 0 ; i < myList.length ; i++) {
    var row$ = $('<tr/>');
    for (var colIndex = 0 ; colIndex < columns.length ; colIndex++) {
        var cellValue = myList[i][columns[colIndex]];
        if (cellValue == null) { cellValue = ""; }
        if (colIndex==3)
        {
        cellValue = myList[i][columns[2]]+","+myList[i][columns[3]];
        row$.append($('<td class="cell3" width="100"/>').html(cellValue));
        var quantity=myList[i][columns[1]];
        addMarkeronload(myList[i][columns[2]],myList[i][columns[3]],quantity);
        }
        else if(colIndex!=2)
        row$.append($('<td width="100"/>').html(cellValue));
    }

    $("#example").append(row$);
    }
   // $('#example1').paginate({itemsPerPage: 5});
    ////alert("Inserted rows");
    $('.cell3').each(function(index, element){
    var tn = $(element).text();
    $(element).html('<a onclick=LocateMarker('+tn+',this) href=javascript:void(0);>Locate</a>');
    });
}
        var myList=[{"time" : "abc", "qty" : 150, "price" : 8.504768900000000000, "tot" :76.931176100000010000,"id":12},
            {"time" : "abc", "qty" : 150, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 450, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 250, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 350, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":62},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":42},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":72},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":71},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":10},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":72},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":10},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":71},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":11},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":41},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":11},
            {"time" : "abc", "qty" : 50, "price" : 8.5, "tot" : 76.9,"id":12},
            ];

    function addAllColumnHeaders(myList)
    {
        var columnSet = [];
        var headerTr$ = $('<tr/>');

        for (var i = 0 ; i < myList.length ; i++) {
        var rowHash = myList[i];
        for (var key in rowHash) {
            if ($.inArray(key, columnSet) == -1){
            ////alert(key);
            columnSet.push(key);
            if(key!="price")
            headerTr$.append($('<th/>').html(key));
            }
        }
        }
        $("#example").append(headerTr$);

        return columnSet;
    } 
```

在准备好文档时，我正在调用这些函数

```
 $(document).ready(function() {
                 buildHtmlTable();
                var dtOptions = {
                "bPaginate": false,
                "bLengthChange": false,
                "bFilter": false,
                "bInfo": false,
                bJQueryUI: true              
            }

            var dt = $("#example").dataTable(dtOptions);
            } ); 
```

html占位符是这样的

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
      <tbody></tbody></table> 
```

Html 表格正在显示。但数据表效果即将到来..我必须修复哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:18:15.793

这似乎是因为您的标题定义。你失踪了`thead`。

```
$('<thead />').appendTo($("#example")).append(headerTr$) 
```

同样在数组的末尾（在`myList`数组中的最后一个对象之后）有一个`,`不是有效的语法。

演示：[小提琴](http://jsfiddle.net/arunpjohny/AvpN9/2/)。

对于数据表插件，标题行应在元素

# python - 在 python 中的多个核心上分布许多独立的、昂贵的操作

> ID：14723458
> 
> 赞同：3
> 
> 时间：2013-02-06T07:07:08.937
> 
> 标签：python, multiprocessing

给定一个大*列表*（1,000 多个）完全独立的*对象*，每个对象都需要通过一些昂贵的功能（每个约 5 分钟）进行操作，将工作分配到其他内核的最佳方法是什么？从理论上讲，我可以将列表分成相等的部分并使用 cPickle 序列化数据（需要几秒钟）并为每个块启动一个新的 python 进程——如果我打算使用多台计算机，它可能会出现这种情况—— - 但这感觉更像是一种黑客行为。使用多处理库肯定有更集成的方法吗？这是我想太多了吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T07:16:54.673

这听起来像是 a 的一个很好的用例[`multiprocessing.Pool`](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers)；取决于你在做什么，它可能很简单

```
pool = multiprocessing.Pool(num_procs)
results = pool.map(the_function, list_of_objects)
pool.close() 
```

这将独立腌制列表中的每个对象。如果这是一个问题，有多种方法可以解决这个问题（尽管它们都有自己的问题，我不知道它们中的任何一个是否适用于 Windows）。由于您的计算时间相当长，这可能无关紧要。

由于您要运行 5 分钟 x 1000 项 = 几天/核心数，因此您可能希望在此过程中保存部分结果并打印出一些进度信息。最简单的做法可能是让您调用的函数将其结果保存到文件或数据库或其他任何东西；如果这不切实际，您还可以在循环中使用 apply_async 并在结果进入时对其进行处理。

您也可以研究类似[joblib](http://pypi.python.org/pypi/joblib)的东西来为您处理这个问题；我对它不是很熟悉，但似乎它正在接近同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:48:06.123

如果您想在单台计算机上运行该作业，`multiprocessing.Pool()`请按照@Dougal 在他的回答中的建议使用。

如果你想让多台计算机解决这个问题，Python 也可以做到。我在 Google 上搜索了“python 并行处理”并找到了这个：

[python中的并行处理](https://stackoverflow.com/questions/3842237/parallel-processing-in-python)

其中一个答案推荐“mincemeat”，一个 377 行 Python 源文件中的 map/reduce 解决方案！

[https://github.com/michaelfairley/mincemeatpy](https://github.com/michaelfairley/mincemeatpy)

我敢打赌，`multiprocessing.Pool()`如果您想在多台计算机上使用多个内核，您可以通过一些工作来启动一组 mincemeat 客户端。

编辑：今晚我做了更多的研究，看起来 Celery 是一个不错的选择。Celery 已经在每台机器上运行多个工人。

[http://www.celeryproject.org/](http://www.celeryproject.org/)

这里推荐芹菜：

[https://stackoverflow.com/questions/8232194/pros-and-cons-of-celery-vs-disco-vs-hadoop-vs-other-distributed-computing-packag](https://stackoverflow.com/questions/8232194/pros-and-cons-of-celery-vs-disco-vs-hadoop-vs-other-distributed-computing-packag)

# pchart - 如何使用 pChart 指定自定义 y 轴刻度间隔

> ID：14723467
> 
> 赞同：2
> 
> 时间：2013-02-06T07:07:49.060
> 
> 标签：pchart

我希望我的 y 轴以 8 的间隔显示代码。我已将缩放模式设置为手动，最小值为 0，最大值为 48，但它仍默认以 5 的时间间隔显示刻度。

我还没有看到自定义设置或选项，有没有办法做到这一点？

```
/* Draw the scale */
$scaleSettings = array("Mode"=>SCALE_MODE_MANUAL,"ManualScale"=>array(0=>array("Min"=>1,"Max"=>56)));
$myPicture->drawScale($scaleSettings); 
```

![在此处输入图像描述](../Images/f019835ae763e28026b5e49803ff6647.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T14:31:50.853

我对 pChart 还很陌生，正在寻找一种方法来做同样的事情。我最终在 pchart 的论坛中找到了关于 drawScale() 的“因素”设置的讨论。它可用于设置刻度间隔。

所以你的代码需要是：

```
$scaleSettings = array("Factors"=>array(8));
$myPicture->drawScale($scaleSettings); 
```

文档中提到了它，但我无法找到关于它的大量信息。我不能告诉你为什么这个数字必须在一个数组中，只是我试过“因素”=>8 对我不起作用。

以下是 drawScale 的文档： [http ://wiki.pchart.net/doc.doc.draw.scale.html](http://wiki.pchart.net/doc.doc.draw.scale.html)

这是我发现有用的讨论： [http ://wiki.pchart.net/forum/viewtopic.php?f=1&t=397](http://wiki.pchart.net/forum/viewtopic.php?f=1&t=397)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-05T10:51:30.287

尝试“LabelSkip”关键字。像;

```
$Settings=array("AxisR"=>150,"AxisG"=>150,"AxisB"=>150,"LabelSkip"=>5);
$MyPicture->drawScale($Settings); 
```

将在 x 轴上显示每 5 个标签。

# android - 如何将 .vcs 文件添加到 Android 日历

> ID：14723469
> 
> 赞同：2
> 
> 时间：2013-02-06T07:08:00.090
> 
> 标签：android, calendar, icalendar

我浏览了这个[SO 论坛，它说要为`.vcs`文件](https://stackoverflow.com/questions/11825221/add-calendar-event-to-android-from-web-vcs-download)添加一个标题，但是当我尝试`.vcs`通过单击它来打开文件时，Android 系统弹出窗口会打开`.vcs`文件和图像、视频、音频......但它没有添加到本地**Android 日历**。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:58:14.807

`.vcs`对于今天的使用来说已经很老了。我建议您创建更新版本`.ics`的文件，而不是`.vcs`尝试以下操作；

```
header("Content-Type: text/Calendar");
header("Content-Disposition: attachment; filename=london2012.ics"); 
```

请参阅[iCalendar (.ics) 和 vCalendar (.vcs) 之间的区别](https://stackoverflow.com/q/1310420/1847645)

# mysql - Mysql 游标参数

> ID：14723472
> 
> 赞同：2
> 
> 时间：2013-02-06T07:08:11.407
> 
> 标签：mysql

我是 mysql 新手，在 oracle 中我们可以通过使用游标参数来实现。

我要打印

```
OUTPUT :
Department number
10 
EMPLOYEE DETAILS
Ravi  Kumar  3000  10
vijay Kumar  5000  10
Department number
20 
EMPLOYEE DETAILS
John  NULL  3000  10 
```

下面是我的代码

```
 CREATE PROCEDURE xx_dept_emp_dtls(OUT X_STATUS VARCHAR(200))
    BEGIN
      DECLARE l_department_id
             ,l_employee_id  
             ,l_dept_id INT ;
      DECLARE l_first_name
             ,l_last_name
             ,l_job_id VARCHAR(50) ;
      DECLARE d BOOLEAN DEFAULT FALSE ;       
      DECLARE cur_dept CURSOR FOR SELECT department_id FROM dept WHERE DEPARTMENT_ID in(SELECT DEPARTMENT_ID FROM EMP);
      DECLARE cur_emp  CURSOR FOR SELECT first_name,last_name,last_name FROM EMP WHERE department_id =l_department_id ;
      DECLARE CONTINUE HANDLER FOR NOT FOUND SET d = TRUE ;
      DECLARE CONTINUE HANDLER FOR 1329 SET X_STATUS = 'error' ;
      DECLARE CONTINUE HANDLER FOR SQLEXCEPTION SELECT 'PROGRAM ERROR PLEASE CHECK';
      SELECT 1;
      OPEN cur_dept ;
      l_dept: LOOP
      FETCH cur_dept INTO l_department_id ;
      IF d then
       CLOSE cur_dept ;
       Leave l_dept ;
      END IF ; 
      SELECT l_department_id ;  
       OPEN cur_emp ;
       l_emp: LOOP
       SELECT 2;
       FETCH cur_emp INTO l_first_name
                          ,l_last_name
                          ,l_job_id
                          ;
      IF d then
      CLOSE cur_emp ;
       Leave l_emp  ;
      END IF ;       
      SELECT l_first_name
             ,l_last_name
             ,l_job_id
             ,l_dept_id ;
      END LOOP l_emp;
      END LOOP l_dept;
     END ; 
```

所以它是第一个记录
请从上面的输出中帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:44:04.280

终于得到解决方案。

```
CREATE PROCEDURE XX_MULTI_CURSOR()
 BLOCK1: begin
   declare v_col1 int;                     
   declare no_more_rows1 boolean DEFAULT FALSE;  
   declare cursor1 cursor for              
       select DEPARTMENT_ID
       from   DEPT
       where DEPARTMENT_ID IN (90,30);
   declare continue handler for not found  
       set no_more_rows1 = TRUE;           
   open cursor1;
   LOOP1: loop
       fetch cursor1
       into  v_col1;
       SELECT v_col1 ;
       if no_more_rows1 then
           close cursor1;
           leave LOOP1;
       end if;
       BLOCK2: begin
           declare v_col2 int;
           declare no_more_rows2 boolean DEFAULT FALSE;
           declare cursor2 cursor for
               select EMPLOYEE_ID
               from   EMP
               where  DEPARTMENT_ID = v_col1;
           declare continue handler for not found
               set no_more_rows2 = TRUE;
           open cursor2;
           LOOP2: loop
               fetch cursor2
               into  v_col2;
                SELECT v_col2;
               if no_more_rows2 then
                   close cursor2;
                   leave LOOP2;
               end if;
           end loop LOOP2;
       end BLOCK2;
   end loop LOOP1;
   end BLOCK1; 
```

# java - “setenforce 0”如何以及为什么允许 Java 7 运行？

> ID：14723474
> 
> 赞同：3
> 
> 时间：2013-02-06T07:08:18.280
> 
> 标签：java, linux, java-7, selinux

我对正在开发的程序进行了一些更改，并将 Java 从 Java 6 更新到 Java 7。

我在 CentOS 5.8 32 位 VM 上运行该程序。

在 Java 更新之前它运行良好。

现在这个过程不是从错误开始的：

```
 [root@CentOS-58-i-0 bin]# ./agent.sh start

 Starting Agent.....d. running (23442).
 Error: dl failure on line 864
 Error: failed /agent/jre/lib/i386/client/libjvm.so, 
 because /agent/jre/lib/i386/client/libjvm.so: 
 cannot restore segment prot after reloc: Permission denied 
```

我已经在线检查过，解决方案/解决方法是运行命令：

```
 setenforce 0 
```

它会起作用的。

阅读有关`setenforce`命令的文档，我不明白它的作用以及它是如何解决问题的。

所以我的问题是：

1.  什么可能导致阻止我启动进程的错误？
2.  为什么`setenforce`命令可以解决它？
3.  请简要说明`setenforce`一般情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T07:36:50.120

> 1）什么可能导致阻止我开始我的进程的错误？

此问题是由 SELinux 强制执行访问策略引起的，该策略禁止该应用程序更改内存段的内存保护属性

CentOS、Fedora、Scientific Linux 和 RedHat Entrprise Linux 默认将 SELinux 设置为“强制”模式。

> 2）为什么 setenforce 命令可以解决它？
> 
> 3) 简要说明 setenforce 的一般作用

运行`setenforce 0`是将 SELinux 切换到“Permissive”模式。

这“修复”了问题，但如果您的系统暴露在外，这不是一个好主意。SELinux 目标访问策略的想法是通过限制暴露的服务可以做的事情来保护您的系统……例如，如果它们被黑客入侵。您刚刚关闭了该保护。

更好的方法是：

*   检查安全/审计日志，
*   弄清楚究竟是什么触发了 AVC 警报
*   决定服务做它正在做的事情是否真的安全
*   找出`chcon`用于更改相关安全上下文或标志的临时修复。
*   通过添加本地策略覆盖来实施永久修复。

但是您需要一些 SELinux 技能/知识才能实现这一目标。

在这种特殊情况下，另一种（并且危险性大大降低）“快速修复”将是运行此：

```
# chcon -t textrel_shlib_t /agent/jre/lib/i386/client/libjvm.so 
```

但请注意，`chcon`如果您需要使用`restorecon`.

# c# - Windows phone 屏幕锁定解锁事件处理

> ID：14723479
> 
> 赞同：0
> 
> 时间：2013-02-06T07:08:43.313
> 
> 标签：c#, windows-phone

谁能告诉我如何停止在屏幕解锁时重新加载我的页面？

每次当我导航到页面然后锁定解锁屏幕时，页面都会重新加载。

我该如何修改这个？

# php - 用于复制数据库及其所有表的 PHP 脚本

> ID：14723481
> 
> 赞同：1
> 
> 时间：2013-02-06T07:08:54.987
> 
> 标签：php, mysql

使用 PHP 脚本，我需要执行以下操作，因为用户选择了 2013 财政年度，而我需要一个单独的 2013 数据库：

我的 2012 年数据库包含 105 个表。我需要一个 PHP 脚本来“读取”这个数据库的结构及其表，然后创建一个包含所有表的相同数据库。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:29:01.523

您可以使用与开关一起`exec()`运行来告诉它只复制结构。[这个问题有一个例子](https://stackoverflow.com/questions/6750531/using-a-php-file-to-generate-a-mysql-dump)。`mysqldump``-d`

作为安全提示，请不要为此使用 root 帐户。创建定义的角色仅用于转储数据库，另一个用于创建数据库。这样，如果您被黑客入侵，造成损害的可能性是有限的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:34:44.037

做这样的事情真是太糟糕了。我在金融项目方面经验丰富，知道你想做什么。

我建议您在一个简单的查询中使用 SCHEMA 并尝试手动创建表。这就是我在测试了 20 多个解决方案后最终所做的。

没有一个脚本是稳定的，特别是在网络上。您必须浪费大量时间来修复数据库。

我认为这可能很繁琐，但完全值得您花费时间。`SQLyog`是立即复制和获取所有 SCHEMA 的好工具。

# heroku - Heroku 暂存应用程序子域 DNS 配置

> ID：14723483
> 
> 赞同：5
> 
> 时间：2013-02-06T07:09:14.027
> 
> 标签：heroku, web, dns

我想让 2 个 heroku 应用程序使用同一个域。

我最近在 Heroku 的一个新应用程序上设置了我的 Heroku 应用程序的暂存版本。一切都运行良好，但我希望我的登台应用程序的 url 类似于我的生产应用程序。例如，我的生产站点的 URL 是[http://www.mysite.com](http://www.mysite.com)，我希望暂存 URL 是[http://staging.mysite.com](http://staging.mysite.com)。

我设置了一个带有值分段的新 CNAME 记录。我的DNS配置如下：

```
Hostname    RecordType      Value
@           A               62.116.130.8
www         CNAME           myapp.herokuapp.com
staging     CNAME           staging-myapp.herokuapp.com 
```

有没有人有尝试这个的经验？我太便宜了，无法通过 Zeringo 或同等服务支付 7 美元/月的 DNS 管理费用。我宁愿忍受糟糕的 staging-myapp.herokuapp.com 网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:34:01.660

几天后，我回到了这个问题。通过上面的设置，它现在可以工作了。我认为传播更改花费了异常长的时间，或者 DNS 刷新可能不起作用。

# php - 提取PHP的格式错误的关键字

> ID：14723484
> 
> 赞同：0
> 
> 时间：2013-02-06T07:09:24.580
> 
> 标签：php, text-extraction, malformed

我正在使用此[资源](http://nadeausoftware.com/articles/2008/04/php_tip_how_extract_keywords_web_page)从网页中提取关键字。它工作正常，但有些单词格式不正确。单词“ **memory** ”被提取为“ **memori** ”，“ **article** ”被提取为“ **artcl** ”。还有许多其他具有类似行为的关键字。[这是从](http://pastebin.com/stRLr2my)[该](http://nadeausoftware.com)URL中提取的一些关键字的列表（var_dump($uniqueKeywords)），作为函数的参数。

PS：我没有剥离数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:24:18.940

这些词使用[词干](http://en.wikipedia.org/wiki/Stemming)算法进行转换。词干允许匹配不同形式的单词，例如**“memory”**和**“memories”**都转换为**“memori”**。请注意，词干通常不是实际单词，而应仅用于比较。

如果您不想要这种行为，请跳过本教程的[“词干”](http://nadeausoftware.com/articles/2008/04/php_tip_how_extract_keywords_web_page#Stemthewords)部分。

# c# - 静态字段与会话变量

> ID：14723486
> 
> 赞同：31
> 
> 时间：2013-02-06T07:09:29.503
> 
> 标签：c#, asp.net, .net, session-variables, static-members

到目前为止，我一直在使用 Session 将一些变量从一个页面传递到另一个页面。例如用户角色。当用户登录到 Web 应用程序时，用户的角色 ID 保存在 Session 中，并且在应用程序的不同部分检查该角色。我最近开始思考为什么不使用静态成员。我可以将相同的信息存储在静态字段中，并在我的应用程序的任何位置轻松访问它（以及包含该静态字段所在的命名空间的任何位置。）我知道使用 Session 变量有时很方便，例如：

1.  任何类型的数据都可以存储在 Session 中。然而，它必须被强制转换。但是静态字段只接受具有正确数据类型的数据。
2.  会话变量将在一定时间后过期，这是我们在许多情况下需要的行为。

除了上述之外，还有什么其他原因我不应该使用静态字段来存储数据并使其随处可用？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-06T07:13:27.067

不，为此使用静态变量*不是可行*的方法：

*   如果您的 AppDomain 被回收，您的所有静态变量都将被“重置”
*   静态变量不会水平扩展 - 如果您对应用程序进行负载平衡，则访问一台服务器的用户将看不到第一台服务器的静态变量中的数据存储
*   最重要的是，静态变量将由对该服务器的*所有*访问共享...它根本不会基于每个用户...而根据您的描述，您不希望用户 X 看到用户 Y 的信息.

从根本上说，您有两种选择来围绕您的应用程序传播信息：

*   将其保留在客户端，以便每个请求都提供前面步骤中的信息。（这对于大量信息可能会变得笨拙，但对于简单的情况可能很有用。）
*   将其保留在服务器端，理想情况下以某种*持久*的方式（例如数据库），客户端提供会话标识符。

*如果*您可以使用负载平衡让所有用户访问同一台服务器，并且*如果*您不介意在 AppDomain 被回收¹或服务器关闭时丢失会话，则可以将其保存在内存中，由会话 ID 键入... 不过要小心。

* * *

¹ ASP.NET 中可能有一些机制可以解决这个问题，将会话信息从一个 AppDomain 传播到另一个 AppDomain - 我不确定

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-06T07:12:04.133

它们是两个非常不同的东西。

*   会话可以在进程外使用（对于负载平衡很重要）
*   会话可以更持久，因为它的进程外能力。
*   ASP.Net 自动管理会话并发。
*   访问静态变量需要手动同步。
*   **静态对于整个应用程序域是全局的。**如果您为一个用户设置静态字段/属性的值，则所有用户都将获得相同的值。不是您的场景中所需的行为。

> 任何类型的数据都可以存储在 Session 中。然而，它必须被强制转换。但是静态字段只接受具有正确数据类型的数据。

使用辅助类抽象 Session 值通常很有帮助。这可以提高可测试性，还允许您对属性进行强类型化并在类的内部执行强制转换。

例子：

```
public List<int> UserRoles
{
    get
    {
        // optionally check that the value is indeed in session, otherwise this 
        // will throw
        return (List<int>)Session["UserRoles"];
    }
} 
```

也可以看看：

*   [C# 静态变量 - 范围和持久性](https://stackoverflow.com/questions/5986051/c-sharp-static-variables-scope-and-persistence)
*   [aspx 是否为 c# 静态变量提供特殊处理](https://stackoverflow.com/questions/11738455/does-aspx-provide-special-treatment-for-c-sharp-static-variables/11738653#11738653)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-06T07:12:17.923

你忘了一件事（我想）

应用程序的所有用户的静态数据都是相同的，而会话是“每个用户”的。

因此，对于您的“用户角色”场景，我希望得到有趣的结果；）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-06T07:12:54.553

静态字段将在所有用户之间共享。
在 Web 环境中，您将有多个线程一起运行。

更新任何静态成员都需要适当的并发控制。做错了，这会显着降低您的网站性能。

会话可以移出进程并在网络场中共享。

即使您的应用服务器崩溃，也会存在 Out of proc 会话。

# javascript - Javascript/JQuery 中的相同签名事件处理程序

> ID：14723488
> 
> 赞同：0
> 
> 时间：2013-02-06T07:09:31.837
> 
> 标签：javascript, jquery, events

谁能解释定义具有相同签名的事件处理程序的结果是什么，例如：

```
// event handler 1
$('form.custom select[data-customforms!=disabled]').on('change', function() { 
    console.log('1');
});

// event handler 2
$('form.custom select[data-customforms!=disabled]').on('change', function() { 
    console.log('2');
}); 
```

这是一个不好的做法吗？执行顺序是什么？是否有任何与此相关的浏览器特定行为？可以扩展 Javascript 中的事件处理程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:16:02.093

结果将是所有附加的事件将按顺序执行。这通常用于在特定事件上执行多个功能。

在上述情况下，第一个`1`将登录到控制台，然后`2`，它们的应用顺序相同。

缺点是当您删除事件时`change`，附加到该事件的所有事件处理程序都将被删除（在您的情况下，两个处理程序都带有 console.log 语句）

您可以使用[事件命名空间](http://api.jquery.com/event.namespace/)来克服这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:16:13.190

JQuery 允许在一个元素上使用多个事件处理程序。这意味着它不会覆盖旧的。我不确定执行顺序，但它可能是随机的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:13:30.930

两个处理程序将随后运行。如果您命名处理程序，而不是使它们匿名，您可以独立地销毁它们（无需完全删除“更改”事件的*所有处理程序）。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:16:35.633

JQuery 使用**绑定**设置事件，这意味着添加到事件而不是替换事件进行替换，您必须先删除事件然后设置。

# php - 在 Yii 中使用 TinyMCE 与 JQuery 冲突

> ID：14723493
> 
> 赞同：3
> 
> 时间：2013-02-06T07:09:51.977
> 
> 标签：php, twitter-bootstrap, yii, tinymce

我为我的 Yii 表单创建了一个 tinyMCE 小部件，如下面的代码所示，

```
 $this->widget('application.extensions.tinymce.ETinyMce',
      array(
           'model'=>$model,
           'attribute'=>'labExaminationDetails',
           'editorTemplate'=>'full',
           'htmlOptions'=>array('rows'=>6, 'cols'=>50, 'class'=>'tinymce')      
      )
); 
```

尽管它可以完美地工作并将记录也插入到数据库中，但我的菜单栏上使用的 JQuery 无法正常工作。如果我删除此小部件，则菜单栏将正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:28:28.460

好的，我知道了。jquery 版本中的 TinyMCE 与引导菜单不兼容。解决方法是使用非 jquery tineMCE。在此处检查问题：[https ://github.com/twitter/bootstrap/issues/3620](https://github.com/twitter/bootstrap/issues/3620)

# android - 如何在android中创建动态滑动屏幕？

> ID：14723507
> 
> 赞同：5
> 
> 时间：2013-02-06T07:11:23.893
> 
> 标签：android

我不是要代码或任何东西，而是在制作应用程序时自己学习 android。我的应用程序需要使用滑动手势在多个动态列表中移动。所以我想我最初可以生成 3 个列表视图小部件，并在隐藏其他 2 个的同时显示中间的一个，所以当用户向左或向右滑动时，我会立即准备好显示的东西。然后，每当进行转换时，2 个隐藏的列表视图都必须将其数据更新为新的左侧列表视图和右侧列表视图。所以这些列表视图也必须按循环顺序排列，比如 1 -> 2 -> 3 然后再回到 1 那样。

我需要一些关于如何做到这一点的一般指导，在线阅读材料也会很棒。

如果不应该按照我描述的方式完成，请给我做类似事情的标准方式。

如果有一个图书馆可以帮助我解决这个问题，那就太棒了。

![在此处输入图像描述](../Images/629ede4b3268067a8533cc96fb5d707d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T07:27:11.767

对于滑动手势，您必须使用视图翻转器。但在使用此之前请确保，这需要低于 10 的 api 级别不支持的片段。

以下是以下列出的链接

1) [http://androidtrainningcenter.blogspot.in/2012/10/viewpager-example-in-android.html](http://androidtrainningcenter.blogspot.in/2012/10/viewpager-example-in-android.html)

2) [http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)

3) [http://manishkpr.webheavens.com/android-viewpager-example/](http://manishkpr.webheavens.com/android-viewpager-example/)

让我知道是否仍然面临任何问题

# configuration - Zend Framework 2 完整配置参数？

> ID：14723509
> 
> 赞同：0
> 
> 时间：2013-02-06T07:11:26.940
> 
> 标签：configuration, parameters, module, zend-framework2

我正在尝试在 Zend Framework 2 中配置一个模块，但我对可能的参数名称和值是什么感到困惑。

这有什么参考吗？我到处找，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:25:12.103

这个问题有点不清楚。您是在尝试配置别人编写的模块，还是在询问如何使自己的模块提供用户友好的配置？

通过了解配置的工作原理，可以回答这两个问题。

在精心设计的模块中，您通常会有一个`config`目录，其中包含两个文件：`config/module.config.php`和`<modulename>.global.php.dist`.

`module.config.php`用于内部（私有）配置。使用您的模块的人可能不关心内容。

`<modulename>.global.php.dist`包含用户可能想要更改的所有配置数据。使用模块的开发人员将此文件复制到`/config/autoload/<modulename>.global.php`（该路径来自项目的顶部，而不是模块中 - 模块的用户不应该在模块目录中进行更改。）

开发人员可能还希望创建`config/autoload/<modulename>.local.php`覆盖全局文件中的内容。骨架应用程序包含一个 .gitignore 文件，该文件会导致 .local.php 配置文件被忽略。这有助于解决开发/登台/生产之间的杂耍配置，并且可以很好地与各种部署系统配合使用。

有关这些内容的更广泛的解释，请参阅[此博客文章](http://www.spiffyjr.me/2012/06/17/how-does-configuration-work-in-zf2/)

# codeigniter - codeigniter 和杂货杂货安装

> ID：14723510
> 
> 赞同：0
> 
> 时间：2013-02-06T07:11:36.953
> 
> 标签：codeigniter, grocery-crud

我在安装 codeigniter + 杂货杂货时遇到问题。

下面是我的文件结构：

```
base/ci_213/application/demo/config/config.php
                $config['base_url'] = 'http://localhost/';
                $config['index_page'] = '';

base/ci_213/application/demo/config/autoload.php
                $autoload['libraries'] = array('database', 'grocery_CRUD');         
                $autoload['helper'] = array('url');
base/ci_213/system/...
base/ci_213/assets/...
base/www/index.php
        $system_path        = '../ci_213/system';
        $application_folder = '../ci_213/application/demo'; 
```

通过上述设置，我可以查看网页“欢迎使用 CodeIgniter！” （本地主机）

成员.php

```
class Member extends CI_Controller
{
    public function __construct()   {       parent::__construct();    }
    public function index() { echo "<h1>Welcome to the world of Codeigniter</h1>";  }

    public function employees()
    {
    $crud = new grocery_CRUD();
    $crud -> set_table('employees');
    $output = $crud -> render();
    $this -> load -> view('template_member', $output);
    }
} 
```

模板成员.php

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Grocery CRUD Testing</title>
        <?php   foreach($css_files as $file): ?>
        <link type="text/css" rel="stylesheet" href="<?php echo $file; ?>" />
        <?php   endforeach; ?>
        <?php   foreach($js_files as $file): ?>
        <script src="<?php echo $file; ?>"></script>
        <?php   endforeach; ?>
        <style type='text/css'>
    </head>
    <body> 
    <?php   echo $output;   ?> 
```

我可以看到“欢迎来到 Codeigniter 的世界”（localhost/member）

我无法查看（本地主机/成员/员工）。它向我显示了一个空白的白页。

但是当我查看 html 代码时，它显示所有员工数据都在 html 代码中。
我不知道为什么它不显示内容而是给出一个空白的白页。

请建议我错过了什么，谢谢。

部分html代码：

```
<link type="text/css" rel="stylesheet" href="http://localhost/assets/grocery_crud/themes/flexigrid/css/flexigrid.css" />
<link type="text/css" rel="stylesheet" href="http://localhost/assets/grocery_crud/css/jquery_plugins/fancybox/jquery.fancybox.css" />
<script src="http://localhost/assets/grocery_crud/js/jquery-1.8.2.min.js"></script>
<script src="http://localhost/assets/grocery_crud/themes/flexigrid/js/cookies.js"></script>
<script src="http://localhost/assets/grocery_crud/themes/flexigrid/js/flexigrid.js"></script>
<script src="http://localhost/assets/grocery_crud/themes/flexigrid/js/jquery.form.js"></script>
<script src="http://localhost/assets/grocery_crud/js/jquery_plugins/jquery.numeric.min.js"></script>
<script src="http://localhost/assets/grocery_crud/themes/flexigrid/js/jquery.printElement.min.js"></script>
<script src="http://localhost/assets/grocery_crud/js/jquery_plugins/jquery.fancybox.pack.js"></script>
<script src="http://localhost/assets/grocery_crud/js/jquery_plugins/jquery.easing-1.3.pack.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:28:48.153

在 template_member.php 中用代码删除行`<style type='text/css'>`或用代码替换它`<style type='text/css'></style>`。

# colors - 减去颜色值时的 LESS CSS 编译错误

> ID：14723512
> 
> 赞同：2
> 
> 时间：2013-02-06T07:11:43.430
> 
> 标签：colors, compilation, less, subtraction

我正在运行 lessc my.less my.css。

代码：

```
@background: #343434;

input[type='text'] { 
    border: 1px solid (@background-#222);
} 
```

未能提供此错误

> NameError：变量@background-在...中未定义

然而，

```
input[type='text'] { 
    border: 1px solid (@background+#222);
} 
```

将工作。

我已阅读有关 BOM 的信息，但事实并非如此。我还检查了我的 less 编译器是否安装了最新的 nodejs。我也试过#222222。没有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:06:55.607

`-`可以是标识符的一部分。这就是为什么它告诉您找不到变量的原因`@background-`。另一方面，`+`is 永远不会是标识符的一部分，因此很少知道变量是`@background`。您只需插入一个空格即可使其正常工作：

```
input[type='text'] { 
    border: 1px solid (@background -#222);
} 
```

# javascript - 在 Android 上使用 JQM 和 PhoneGap 闪烁/闪烁

> ID：14723514
> 
> 赞同：11
> 
> 时间：2013-02-06T07:11:44.253
> 
> 标签：javascript, android, css, cordova, jquery-mobile

我在 Android 平台（版本 2.3.3 及更高版本）上将 PhoneGap 2.2.0 与 jQuery Mobile 1.2.0 结合使用。在页面上，我使用固定的标题，根本没有过渡。Rest 几乎是标准的 jQuery。

当我从一个页面导航到另一个页面时，我会短暂地闪烁一下（整个页面）。我在互联网上搜索了几个小时。

在下面尝试失败：

*   我在互联网上发现了几十个 CSS hack。（例如：[https](https://github.com/jquery/jquery-mobile/issues/4024) ://github.com/jquery/jquery-mobile/issues/4024和[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/EtZ2KwseKQ0](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/EtZ2KwseKQ0)和[在页面之间导航时闪烁](https://stackoverflow.com/questions/5953753/flickering-when-navigating-between-pages)） .
*   我尝试切换固定标题（再次，我没有使用过渡效果）..
*   我尝试了 jQuery Mobile 1.3.1。（那里没有运气）
*   我没有尝试过的一件事是PhoneGap 2.3.0，但我在更新日志中没有看到任何有趣的内容。编辑：PhoneGap 2.5.0 上仍然存在问题。

当我在 Android 项目中关闭硬件加速时，闪烁消失了。但是随后一些 CSS 样式出现问题，整体性能非常非常糟糕（显然）。

我现在也尝试了下面的代码。

```
ui.page {
-webkit-transform: translateZ(0);
-webkit-perspective:1000;
-webkit-backface-visibility: hidden;
} 
```

可惜还是没有运气。

还尝试了这个：[https](https://github.com/watusi/jquery.mobile.simultaneous-transitions) ://github.com/watusi/jquery.mobile.simultaneous-transitions 在过渡前仍然短暂（全白页）闪烁。

它似乎与页面本身的动画转换无关，但是在卸载旧页面之后和加载新页面之前发生了一些奇怪的事情。

2013 年 4 月 25 日更新：也尝试过： [https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/EtZ2KwseKQ0](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/EtZ2KwseKQ0) [https://github.com/jquery/jquery-mobile/issues/4024](https://github.com/jquery/jquery-mobile/issues/4024) [https ://github.com/jquery/jquery-mobile/pull/4129](https://github.com/jquery/jquery-mobile/pull/4129)

唯一使闪烁消失的是删除固定标题部分。然后它像黄油一样光滑，但我错过了与面板兼容的标题。

还尝试了 1 页模板（一个文件中的所有页面）。也没有帮助。

jQuery Mobile 1.3.1 PhoneGap 2.5.0 Android 4+ 设备： - 谷歌三星 Galaxy Nexus - 三星 Galaxy Tab 10.1（有问题，但没有设备了） - 三星 Galaxy Note 10.1

我现在在 Github 上提交了一个问题：[https ://github.com/jquery/jquery-mobile/issues/6031](https://github.com/jquery/jquery-mobile/issues/6031)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-22T13:20:46.960

将视口设置为 user-scalable=no 为我解决了这个问题： 

改变

```
< meta name="viewport" content="width=device-width, initial-scale=1" /> 
```

到

```
< meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:43:04.440

您帖子中的[第三个链接](https://stackoverflow.com/questions/5953753/flickering-when-navigating-between-pages)是我在不久前遇到此问题时如何修复它。我还添加了 -webkit-perspective:1000; 闪烁是由于 3D 加速造成的，并且正在转换的页面的背面在几分之一秒内变得可见，使其看起来像闪烁。

编辑：查看[此](http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/)内容以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-02T18:28:33.757

将视口设置为 user-scalable=no 为我解决了这个问题：

```
< meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

适用于 Nexus 4 / Android 4.2.2 上的 jQuery Mobile 1.3.1 Cordova 2.8.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T06:25:13.903

确保此代码存在于您的`mobileinit`方法中：

```
//initialize jQM
$(document).on("mobileinit", function () {
  //hack to fix android page transition flicking issue
  if (navigator.userAgent.indexOf("Android") != -1){
      $.extend(  $.mobile , {
          defaultPageTransition: 'none'
      });   
    }
}); 
```

另外：更改以下内容`jquerymobile.js`

```
// Make our transition handler the public default.
$.mobile.defaultTransitionHandler = simultaneousHandler;

//transition handler dictionary for 3rd party transitions
$.mobile.transitionHandlers = {
    "default": $.mobile.defaultTransitionHandler,
    "sequential": sequentialHandler,
    "simultaneous": simultaneousHandler
}; 
```

也请让我知道您使用的是哪个安卓设备版本？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T05:40:38.557

我尝试了几十种解决方案，但都没有奏效，形成我解决此闪烁的最佳方法是将 de autohidesplashscreen 属性设置为 false ，在上一页中显示启动画面并将其隐藏在设备准备好的目标页面中。在某些转换中，我们将转换睡眠约 0,5 - 1 秒，以避免闪烁屏幕闪烁。不是最好的解决方案，但对我们有用。

# python - 删除（）函数不起作用

> ID：14723516
> 
> 赞同：0
> 
> 时间：2013-02-06T07:11:56.620
> 
> 标签：python, django

delete() 函数在 Django 中不起作用，

```
def delete_hardware (request):
    notice = ''
    inventory = get_object_or_404(inventory, id = request.GET.get('id'))
    if inventory:
        inventory.delete()
        notice = "Hardware was deleted"
    return render_to_response('form.html', {'notice': notice},
                              context_instance=RequestContext(request)) 
```

......这些是我在 form.html 中的代码

```
<td bgcolor='#f1f1f1'><a onclick="javascript:confirmDelete('/delete/?id={{id}}')">
<img src='{{ MEDIA_URL }}/images/delete.png' width=25 height=25 />
            </a></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:51:10.967

**视图.py**

```
def delete_hardware (request, id):
    inventory = get_object_or_404(inventory, pk=id).delete()
    messages.success(request, "Hardware was deleted!")
    return HttpResponseRedirect(reverse('app_name:url_name')) 
```

**网址.py**

```
url(r'^delete/(?P<id>\d+)/$', 'delete_hardware', 
    name='delete_hardware'), 
```

我无法提供完整的详细代码，因为您没有将完整的代码放在您的问题中。我不知道为什么，但这取决于你。这只是一个指南，我希望它能清除您的想法。如果您的表单已提交方法=GET，您只能获取数据

```
<a href="/delete/{{value.id}}" class="delete-hardware">Delete</a>

<script>
$('.delete-hardware').click(function(){
    var url = $(this).attr('href');
    document.location.href = url;
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:16:46.657

它应该是`request.GET['id']`

你试一试

```
def delete_hardware (request):
 notice = " "
 id = request.GET['id']
 try:
   inv = inventory.objects.get(id = id)
   inv.delete()
   notice = "Hardware was deleted"
 except inventory.DoesNotExist:
    raise Http404
 return render_to_response('form.html', {'notice': notice},
                              context_instance=RequestContext(request)) 
```

# javascript - 在解析日期d3.js之后提取月日和年

> ID：14723524
> 
> 赞同：3
> 
> 时间：2013-02-06T07:12:29.073
> 
> 标签：javascript, d3.js

我使用 d3.js 中的函数从 json 文件中解析了日期：

```
var parseDate = d3.time.format("%m-%Y").parse; 
```

并将日期设为：

```
var date = "Tue Jan 01 2013 00:00:00 GMT+0530 (India Standard Time)" 
```

现在我想从变量 date 中取出月、日、年并打印出来。我怎么做？

或者你可以说我只需要打印月、日和年，而不是像星期二（印度标准时间）等额外的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T07:26:01.840

编辑：假设你的意思是一个 javascript 日期对象：

```
var date = new Date("Tue Jan 01 2013 00:00:00 GMT+0530 (India Standard Time)");
var day = date.getDay(); //returns 0 - 6
var month = date.getMonth(); //returns 0 - 11
var year = date.getFullYear(); //returns 4 digit year ex: 2000 
```

# django - Django 表单模板：如何检查字段是否可选？

> ID：14723527
> 
> 赞同：1
> 
> 时间：2013-02-06T07:12:36.860
> 
> 标签：django, django-forms

我创建了一个简单的表单、视图和模板文件，如下所述。我的表单字段之一是必需的（url1），一个是可选的（comment1）。在我的模板中，我想根据这两个字段是否可选（例如：红色为必需，绿色为 Optionali）以不同方式显示这两个字段的字段标签。我怎样才能做到这一点？

理想情况下，表单中应该有一个布尔值，如下所示：form.url1.required_flag

这是我的表格：

```
class myForm(forms.Form):
    url1 = forms.URLField(max_length=255, label='URL #1', required=True)
    comment1 = forms.CharField(max_length=255, label='Comment #1', required=False) 
```

此表单的视图非常简单。没有什么花哨。

这是模板文件的相关部分：

```
<tr>
    <td width="100" align="right">
        <div class="field_label">
            {{ form.url1.label_tag }}:
        </div>    
    </td>
    <td width="300">
        <div class="form_element_input">
            {{ form.url1 }}
        </div>    
    </td>
    <td width="100" align="right">
        <div class="field_label">
            {{ form.comment1.label_tag }}:
        </div>    
    </td>
    <td width="300">
        <div class="form_element_input">
            {{ form.comment1 }}
        </div>    
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:19:35.923

```
{% if form.comment1.field.required %}
  //do something
{% else %}
  //do something else
{% endif %} 
```

应该有帮助

但同样，您几乎可以使用 CSS 来为评论用一种颜色和 url 用另一种颜色着色。我认为您不需要为此使用 required

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:24:47.187

看一眼`required_css_class`

```
class myForm(forms.Form):
    required_css_class = 'required'
    url1 = forms.URLField(max_length=255, label='URL #1', required=True)
    comment1 = forms.CharField(max_length=255, label='Comment #1', required=False) 
```

如果您使用任何,方法，您可以访问 css 类，`form.field.css_classes`或者将它们打印出来。`as_p``as_table`

# java - 休眠更新查询问题

> ID：14723528
> 
> 赞同：4
> 
> 时间：2013-02-06T07:12:41.117
> 
> 标签：java, hibernate, orm, sql-update, dao

对于此更新查询

```
update TestDB.dbo.MyEmp set empname=? where empid=? 
```

我在我的 DAO 课上写过

```
MyEmployee myEmployee = new MyEmployee();

MyEmployee myEmployee =(MyEmployee )session.load(MyEmployee.class, 
  new Integer(1700));
myEmployee.setName("updatedName"); 
session.update(myEmployee ); 
```

它工作正常，但我需要知道下面提到的这种类型的更新查询

```
update TestDB.dbo.MyEmp set empsalary=? where empid=? && empname = ? 
```

（即，我需要在 where 子句中使用两个条件来更新表，这可以通过 HQL 来完成，但我想知道我们如何使用 saveOrUpdate 方法来实现这一点..）

如何使用 update 或 saveOrUpdate 方法（）进行更新？是否可以在休眠中这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T07:24:34.630

您必须首先通过两种方式获取您的对象：

1- HQL

```
Query query = session.createQuery("from MyEmployee e where e.id = ? and e.name = ?");
query.setParameter(0, 1);
query.setParameter(1, "myName");
MyEmployee e = (MyEmployee) query.uniqueResult();
e.setSalary(5000);
session.saveOrUpdate(e); 
```

2- 标准

```
Criteria criteria = session.createCriteria(MyEmployee.class);
criteria.add(Restrictionss.eq("id", 1)).add(Restrictions.eq("name", "myName");
MyEmployee e = (MyEmployee) criteria.uniqueResult();
e.setSalary(5000);
session.saveOrUpdate(e); 
```

顺便说一句，在默认刷新模式下，当您获取对象并对其进行更新时，它将在会话结束时自动持久化（如果您不使用 StatelessSession）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:32:33.857

Hibernate`saveorupdate` 将采用表实体，我的意思是 Pojo 类作为参数。Hibernate 将通过其主键即 id 识别表中的实体。

因此，您无需在剩余参数上添加任何其他 where 子句。因为您已经决定保存实体，而不管其中的数据如何。

如果你真的想检查其他参数，你必须在 java it self before 中检查相同的参数`Saveorupdate`。

如果您决定保存整个对象数据然后只使用`saveOrUpdate`其他明智的选择`HQL`或`Criterias`更多`Restrictions`

# c# - 尝试添加到 SQL Server C# 时对象无效

> ID：14723529
> 
> 赞同：0
> 
> 时间：2013-02-06T07:12:46.613
> 
> 标签：c#, sql

我也希望能够输入表的名称来添加值。我将它设置`Textbox`为`sqlcommand`. 我收到“无效对象”错误。我究竟做错了什么。如果我在代码中手动输入表的名称，它可以工作，但是当尝试从它执行它时，`textbox`它不会。

```
string tableSelected = stateTextBox.Text + "Geo";
string sqlcomm = ("INSERT INTO [" + tableSelected + "] (Name, Type) VALUES (@Name, @Type)");
SqlConnection conn = new SqlConnection(dbLocation);
SqlCommand comm = new SqlCommand(sqlcomm, conn);
conn.Open();
string[] cities = citiesTextBox.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
string[] counties = countiesTextBox.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
string[] federal = positionsFederalTextBox.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
string[] state = positionsStateTextBox.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
string[] local = positionsLocalTextBox.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
comm.Parameters.AddWithValue("@Name", SqlDbType.NVarChar);
comm.Parameters.AddWithValue("@Type", SqlDbType.NChar);
foreach (string city in cities)
{
    comm.Parameters["@Name"].Value = city;
    comm.Parameters["@Type"].Value = "City";
    comm.ExecuteNonQuery();
} 
```

# types - LLVM 的整数类型

> ID：14723532
> 
> 赞同：22
> 
> 时间：2013-02-06T07:12:55.617
> 
> 标签：types, llvm, llvm-codegen

LLVM 语言将整数类型指定为 iN，其中 N 是整数的位宽，范围从 1 到 2^23-1（根据： http: [//llvm.org/docs/LangRef.html#integer-类型](http://llvm.org/docs/LangRef.html#integer-type)）

我有两个问题：

1.  将 C 程序编译到 LLVM IR 级别时，哪些类型可以降低到 i1、i2、i3 等？看起来 i8、i16、i32、i64 类型必须足够了，所以我想知道所有其他近 800 万个整数类型是干什么用的。

2.  有符号和无符号整数类型都降低到 i32 是真的吗？这是什么原因，为什么它不适用于 32 位浮点数（在 LLVM 中表示为 f32）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T07:43:55.063

首先，请注意任意大小的整数以及有符号和无符号整数之间的区别都是添加到 LLVM 2.0 的修改。早期版本只有几个整数类型，有符号/无符号的区别。

现在，针对您的问题：

1.  LLVM 尽管设计时考虑了 C/C++，但并不特定于这些语言。拥有更多可能的整数类型可为您提供更大的灵活性。当然，您不必使用这些类型 - 我猜，正如您所提到的，任何 LLVM 的 C/C++ 前端（即 Clang）可能只会生成 i1、i8、i16、i32 和 i64 .

    编辑：显然我弄错了，Clang 也使用了其他一些整数类型，请参阅下面 Jens 的评论。

2.  是的，LLVM 不区分有符号和无符号整数类型，因此两者都将降低到 i32。但是，对无符号整数的操作将根据原始类型进行转换；例如，无符号整数之间的除法将是`udiv`，而有符号整数之间的除法将是`sdiv`。但是，因为整数表示为[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)，所以许多操作（例如`add`）不关心有符号/无符号，因此只有一个版本。

    至于*为什么*在 LLVM 中没有区分有符号和无符号，请阅读[此增强请求的详细信息](http://llvm.org/bugs/show_bug.cgi?id=950)- 简而言之，有符号和无符号版本会导致 IR 膨胀并且不利于某些优化，所以它被删除了。

    最后，你问为什么不`f32`——答案是我不知道，也许它被认为不如任意大小的整数有用。但是，请注意这`f32`并不是真正的描述性 - 如果您想要任意浮点类型，您至少需要指定基数的大小和指数的大小，例如`f23e8`代替`float`和`f52e11`代替`double`。如果您问我，这有点麻烦，尽管我猜想`float`并且`double`可能已成为这些的同义词。

# mysql - MySQL“插入后”触发器不断插入空值

> ID：14723533
> 
> 赞同：0
> 
> 时间：2013-02-06T07:13:09.250
> 
> 标签：mysql, triggers

我真的希望有人可以帮助我解决这个问题，因为它已经困扰了我好几天了。我的用户表上有一个插入后触发器，它在每次插入后将一条记录插入到审计表中。如果我在命令行上手动执行插入语句，这可以正常工作。但是，当我的 Web 表单插入到表中时，插入到审计表中的所有值都是空值。我在想这可能是权限问题，所以我将 CURRENT_USER() 和 USER() 添加到要插入到审计表中的触发器中。它显示触发器正在由“管理员”用户执行，该用户是触发器的所有者。

这是我的触发器：

```
DELIMITER ^^
CREATE TRIGGER UsersInsert AFTER INSERT ON Users
FOR EACH ROW
BEGIN

INSERT INTO `users_audit` (`username`, `address`, `email`)
VALUES
(USER(), NEW.address, NEW.email);

END
^^ 
```

这将在审计表中插入以下内容：admin@localhost, null, null

以下是管理员用户的权限：

```
GRANT ALL PRIVILEGES ON `MyDB`.* TO 'admin'@'localhost' WITH GRANT OPTION 
```

就像我说的，它可以从 mysql 命令行完美运行。但由于某种原因，当从 Web 表单执行时，“新”值都是空值。

请帮忙。提前致谢。

2013 年 2 月 6 日更新：

我尝试了类似的触发器，但使用“更新后”并且它工作正常。所以这个问题被隔离到插入。这也证明这不是权限问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:53:58.607

看起来像网络表单的问题。检查插入到`Users`表中的值。他们是空的吗？

您可以更改触发器中的 INSERT 语句 -

```
INSERT INTO `users_audit` (`username`, `address`, `email`)
VALUES (USER(), 'temp address', 'temp email'); 
```

并确保触发器正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:49:13.610

好吧，在创建不同类型的触发器并进行试验之后，我认为插入触发器可能由于某种原因多次触发，实际上同时触发了插入和更新触发器，最后一行总是有空值，这是唯一插入的记录. 这真的很奇怪。所以无论如何，为了解决这个问题，我将我的代码更改为这个，到目前为止它没有任何问题：

```
DELIMITER ^^

CREATE TRIGGER UsersUpdate AFTER UPDATE ON users
FOR EACH ROW
BEGIN

IF NEW.username IS NOT NULL THEN

IF EXISTS (SELECT 1 FROM users_audit WHERE username = NEW.username) THEN
UPDATE users_audit SET `username` = NEW.username,  `FirstName` = NEW.FirstName, `LastName` = NEW.LastName, `address` = NEW.address, `email` = NEW.email WHERE username = OLD.username;
ELSE
INSERT INTO users_audit (`username`, `FirstName`, `LastName`, `address`, `email`)
VALUES (NEW.username, NEW.FirstName, NEW.LastName, NEW.address, NEW.email);
END IF;

END IF;

END
^^ 
```

# magento - 致命错误：在第 759 行调用成员函数 addToChildGroup() app/code/core/Mage/Core/Block/Abstract.php

> ID：14723534
> 
> 赞同：0
> 
> 时间：2013-02-06T07:13:14.643
> 
> 标签：magento, magento-1.7

我已经在catalog.xml中添加了这个代码块并且我得到了以下错误 -

致命错误：在第 759 行调用成员函数 addToChildGroup() app/code/core/Mage/Core/Block/Abstract.php

`<!-- custom change here-->`

```
<block type="catalog/product_list_related" name="catalog.product.related" as="product_additional_data" after="product.info.upsell" template="catalog/product/list/related.phtml"/>

<action method="setColumnCount"><columns>4</columns></action>                    

                <action method="setItemLimit"><type>related</type><limit>4</limit></action>
</block>
<!-- custom change  here--> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T10:06:07.743

你在这里关闭了你的块：

```
<block ... /> 
```

我想这会导致错误。

试试这个代码：

```
<block type="catalog/product_list_related" name="catalog.product.related" as="product_additional_data" after="product.info.upsell" template="catalog/product/list/related.phtml">
  <action method="setColumnCount">
    <columns>4</columns>
  </action>                    
  <action method="setItemLimit">
    <type>related</type>
    <limit>4</limit>
  </action>
</block> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T09:32:18.477

我在 github 存储库上工作时遇到了类似的问题。我在本地系统上安装了一个扩展，然后将代码推送到 GitHub。第二天，当我从 github 删除扩展并将代码移动到开发服务器时，我遇到了同样的问题。

对我来说清除缓存有效

# visual-studio-2010 - VSTO 部署清单 (.vsto)

> ID：14723547
> 
> 赞同：2
> 
> 时间：2013-02-06T07:14:23.783
> 
> 标签：visual-studio-2010, vsto

我开发了 VSTO 文档级 Adins。我已经使用 Signtool 使用 .pfx 文件对 .dll 文件进行了签名。是否还需要签署 VSTO 部署清单 (.vsto) 文件？或者只签署 .dll 文件可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-07T21:51:32.623

如果您对部署 dll 进行更改，您还需要重新签署清单文件。您可以使用 Mage 执行此操作。

要签署清单，您可以执行以下操作：

```
mage -Sign ManifestFileName -CertFile Certificate -Password Password 
```

喜欢：

```
mage -Sign ExcelAddin1.vsto -CertFile ..\ExcelAddIn1_TemporaryKey.pfx 
```

这来自[https://msdn.microsoft.com/en-us/library/cc175513%28v=vs.90%29.aspx](https://msdn.microsoft.com/en-us/library/cc175513%28v=vs.90%29.aspx)

但是，如果您在后期制作中更改 dll，例如混淆或 ilmerge，您将需要更新清单并退出所有内容。为此，请参阅[https://msdn.microsoft.com/en-us/library/dd465299.aspx](https://msdn.microsoft.com/en-us/library/dd465299.aspx)；

您还需要对 .vsto 清单文件进行签名，尤其是在您拥有受信任证书的情况下，否则 Excel 会发出警告，指出插件来自受信任的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:09:32.097

只有 .DLL 被签名。manifest 和 vsto 是 .dll 的伴随文件。无需对它们执行任何操作。

部署时，它需要 .vsto 文件和清单才能加载。

# python - 如何在 Python 中将十六进制转换为字符串？

> ID：14723553
> 
> 赞同：2
> 
> 时间：2013-02-06T07:15:03.473
> 
> 标签：python, hex

使用 Python，

```
h = 0x11012
# ... ???
result = '11012' 
```

从 h -> result 我必须采取哪些中间步骤？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T07:21:33.000

Python 2.7 及更高版本：

```
>>> "{:x}".format(0x11012)
'11012' 
```

蟒蛇2.6：

```
>>> "{0:x}".format(0x11012)
'11012' 
```

Python 2.5 及更早版本：

```
>>> "%x" % 0x11012
'11012' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:19:12.747

```
h = 0x11012
result = hex(h)[2:] 
```

这将删除前导`0x`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:17:20.660

```
result = hex(h) 
```

真的就是这么简单。

# servlets - 使用 servlet 在页面上显示二维矩阵

> ID：14723555
> 
> 赞同：0
> 
> 时间：2013-02-06T07:15:10.863
> 
> 标签：servlets

我有一个场景，我需要在浏览器中显示一个矩阵框作为输出。我从页面获取输入，执行一些业务逻辑，该逻辑的输出将是我需要在页面上显示的矩阵。我可以在控制台中看到输出，但在浏览器中我在一行中看到了这个矩阵。请帮帮我。使用 servlet 的一段代码：

```
out.println("Matrix");
    for (int i = 0; i < n; i++) 
       {
      for (int j = 0; j < n; j++) 
             {`enter code here`
        out.print(matrix[i][j] + " ");
          }
              out.print("\n");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:36:03.497

浏览器希望看到 HTML 而不仅仅是文本。添加换行符`out.print("<br/>")`，或添加`out.print("<pre>");`为第一个输出，或输出 Content-Type 标头，说明内容为 text/plain。

# bash - 为什么这个自动完成功能在 Linux 中不能自动完成？

> ID：14723557
> 
> 赞同：1
> 
> 时间：2013-02-06T07:15:20.600
> 
> 标签：bash, ubuntu, autocomplete

在我的 .bashrc 中。我正在尝试`scp`按如下方式完成命令

```
function _scp_complete
{
  COMPREPLY=""
  COMPREPLY+=( $(cat ~/.ssh_complete ) )
  COMPREPLY+=( $( find . ! -name . -prune -type f ) )
}
complete -F _scp_complete scp 
```

这个想法是，当按下时，`scp [tab]`我会看到当前目录中的所有文件以及文本文件中列出的单词`~/.ssh_complete`。假设此文件包含以下条目：

alex@192.0.0.1 alex@192.0.0.2

所需的行为如下：我键入`scp alex@[TAB]`并制表符完成“完成”到 scp alex@192.0.0 的命令。自动，因为只有两个可能的参数以 alex@ 开头（假设当前工作目录中没有类似的命名文件。）：

```
>scp alex@[TAB]
  alex@192.0.0.1 alex@192.0.0.1 
>scp alex@192.0.0. 
```

我通过所描述的实现得到的行为如下：我键入`scp alex@[TAB]`并且制表符完成*没有*完成任何事情，但在命令下方列出了每个可能的参数：

```
>scp alex@[TAB]
  alex@192.0.0.1 alex@192.0.0.1 file1 Music Pictures ./.emacs <ALL files in the current directory>
>scp alex@ 
```

如何修复该功能以获得所需的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:06:32.143

您需要使用`COMP_WORDS`数组来获取当前输入的单词。然后使用该`compgen`命令根据您的原始单词列表生成可能的补全。

尝试以下操作：

```
_scp_complete()
{
  local cur=${COMP_WORDS[COMP_CWORD]}
  COMPREPLY=( $(compgen -W "$(< ~/.ssh_complete) $( find . ! -name . -prune -type f )" -- $cur) )
}
complete -F _scp_complete scp 
```

查看这篇博文了解更多详细信息：[编写自己的 Bash 完成函数](http://fahdshariff.blogspot.co.uk/2011/04/writing-your-own-bash-completion.html)

请注意，我认为此完成不适用于名称中带有空格的文件。

另请注意，使用从文件中提取文本`$(cat file)`更有效，而不是 。`$(< file)`

# css - 如何使用 CSS 更改 flex 中的标签颜色？

> ID：14723560
> 
> 赞同：0
> 
> 时间：2013-02-06T07:15:26.953
> 
> 标签：css, actionscript-3, apache-flex

在我正在使用的 Flex 应用程序中`Main.mxml` `sub.mxml`

在 Sub.mxml 中有代码。

```
<mx:Label x="24" y="33" text="User ID"/>
<mx:Label x="24" y="59" text="Password"/> 
```

并在我的 Main.Mxml 文件中编写 CSS

```
mx|Label{
        fontFamily: Calibri;
        fontSize: 12;
        color: #000000;
    } 
```

但是标签不可见......这个Css错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:53:06.377

代码似乎没问题。这个简单的例子有效：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[ import mx.events.FlexEvent; ]]>
</fx:Script>
<fx:Style>
    @namespace mx "library://ns.adobe.com/flex/mx";
    mx|Label {
        fontFamily: Calibri;
        fontSize: 12;
        color: #000000;
    }
</fx:Style>
<mx:VBox>
    <mx:Label text="asdasdasd">
    </mx:Label>
    <mx:Label text="sdas">
    </mx:Label>
</mx:VBox>
</s:Application> 
```

戴维德

# regex - 正则表达式：在特定字符串之后查找大写单词

> ID：14723561
> 
> 赞同：0
> 
> 时间：2013-02-06T07:15:32.217
> 
> 标签：regex

我努力寻找解决方案，但失败了。一个（很长的）字符串的结尾是这样的：

> ...目的地：美国、荷兰、英国、法国、德国

目标是：

*   查找所有大写单词（不仅是上面提到的）
*   一个、两个或三个字母
*   只考虑之后的词`destination:`

我完成了循环并成功地将整个字符串的所有两个字母单词读入了一个列表：

```
@"\b[A-Z][A-Z]\b" 
```

但需要更精确。

任何正则表达式专家可以提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:17:45.213

`@"destination.*?([A-Z]+)\b"`这是您的正则表达式
`+`表示一次或多次
`.*`表示任何字符 0 次或多次。然后`?`签名意味着懒惰的正则表达式。它将匹配字符，直到**找到**第一个大写字母。如果没有该登录字符串“目的地：ABCD”`.*`将匹配“：ABC”
后匹配您需要的单词将在第 1 组。我不知道您使用的是哪种语言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:37:32.940

您使用什么语言？

这是 C# 中的一个示例：

```
string regex = @"destination:\s*([A-Z]{1,3})(?:(?:,\s*)([A-Z]{1,3}))*";
var m = Regex.Match("... destination: US, NL, UK, FRA, GER", regex);

if (m.Success) {
    Console.WriteLine(m.Groups[1].Value);
    if (m.Groups[2].Success) {
        foreach (var capture in m.Groups[2].Captures) {
            Console.WriteLine(capture.ToString());
        }
    }
} 
```

它打印：

```
US
NL
UK
FRA
GER 
```

# nhibernate - NHibernate 查询每组最近 N 个

> ID：14723562
> 
> 赞同：1
> 
> 时间：2013-02-06T07:15:35.463
> 
> 标签：nhibernate, fluent-nhibernate, linq-to-nhibernate

我通过 FluentNHibernate 映射了以下域

```
class Point
{
    public int Id { get; set; }
    public string Label { get; set; }
}

class PointData
{
    public int Id { get; set; }        
    public DateTime Hour { get; set; } 
    public decimal Value { get; set; }
    public Point Location { get; set; }
    public DateTime Available { get; set; } // Data arrival (data tracking)
} 
```

PointData 表将频繁更新插入一个 Hour 的新值（不支持更新），但并非所有点都以相同的频率写入 PointData。

我需要在 startTime 和 endTime 之间以及 timeOfSnapshot（可用）之前的所有小时内获取每个 Point 的最新 PointData。

到目前为止，我使用 group by 使用 Linq to Nhibernate 的查询不起作用：

```
Query.Where(x => x.Available <= available && x.Hour >= startHour && x.Hour < endHour)
                    .OrderByDescending(x => x.Available)
                    .GroupBy(x => new {x.Location, x.Hour})
                    .Select(g => g.First())
                    .ToList(); 
```

到目前为止，所有搜索都只提出了 SQL 查询，这并不是我想要的。

有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:26:16.683

将 group by 结果与原始行连接并返回行：

```
rows.Join(
   rows.GroupBy(x => new {x.Location, x.Hour}), 
   x => new {x.Location, x.Hour, x.Available}, 
   g => new {g.Key.Location, g.Key.Hour, Available = g.Max(p=>p.Available)},
   (x1,g1) => x1
) 
```

放上探查器，您将看到以下 sql：

```
SELECT [t0].*
FROM [rows] AS [t0]
INNER JOIN (
    SELECT MAX([t1].[Available]) AS [value], [t1].[Location], [t1].[Hour]
    FROM [rows] AS [t1]
    GROUP BY [t1].[Location], [t1].[Hour]) 
AS [t2] ON (
    [t0].[Location] = [t2].[Location]) 
    AND ([t0].[Hour] = [t2].[Hour]) 
    AND ([t0].[Available] = [t2].[value]
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:45:01.257

在分组依据之后，您不能提取比分组键或聚合中使用的更多的列。如果我正确理解您的问题，通常的模式是使用一个子查询来选择感兴趣的行的标识符，然后是一个外部查询来获取这些行的所有列。尝试这样的事情：

```
var latestPointId =
    Query.Where(x => x.Available <= available && x.Hour >= startHour && x.Hour < endHour)
        .OrderByDescending(x => x.Available)
        .GroupBy(x => new {x.Location, x.Hour})
        .Select(g => g.Max(pd => pd.Id));

session.Query<PointData>
    .Where(pd => latestPointId.Contains(pd.Id)
    .ToList(); 
```

# ruby - 如何将红宝石块存储在数据库中并使用它们？

> ID：14723566
> 
> 赞同：5
> 
> 时间：2013-02-06T07:15:48.967
> 
> 标签：ruby, block

基本上我想将一个 Ruby 块存储到数据库中并使用它们。

有人可能会问为什么——原因是，我希望我的用户能够发布/上传一个块代码——可以执行它来为他们可能拥有的数据问题获取所需的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T07:18:14.660

所以你不想存储红宝石块。你想存储代码。这更容易。只需将代码存储为字符串。然后你可以[`eval`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval)得到那个字符串，有效地执行代码。

现在你必须解决一个难题：如何防止用户发布恶意代码（或如何将它们沙箱化）。但这超出了这里的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:22:06.857

首先，将您的代码存储为字符串（[ruby2ruby gem](http://docs.seattlerb.org/ruby2ruby/)可能会帮助您）。当您需要执行此块时，从 DB 中检索它，并使用“ [eval](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval) ”方法

# visual-c++ - “错误 C2065：TOKEN_MANDATORY_LABEL：未声明的标识符”

> ID：14723568
> 
> 赞同：0
> 
> 时间：2013-02-06T07:15:51.287
> 
> 标签：visual-c++

我想使用 Visual Studio 2005 创建一个低完整性进程。我正在使用此处给出的 CreateLowProcess() 代码：http: [//msdn.microsoft.com/en-us/library/bb625960.aspx](http://msdn.microsoft.com/en-us/library/bb625960.aspx)。

但是在编译时，代码会出现如下错误：

```
error C2065 : 'TOKEN_MANDATORY_LABEL' : undeclared identifier
error C2065 : 'SE_GROUP_INTEGRITY' : undeclared identifier
error C2065 : 'TokenIntegrityLevel' : undeclared identifier 
```

我尝试在“stdafx.h”之前和之后都包含“Windows.h”。可能是什么问题？我还需要包含其他一些标题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:50:07.240

这些项目是为 Windows Vista 引入的，VS 2005 中包含的 SDK 是 Vista 之前的版本。您需要将项目配置为使用适当的 SDK 或使用较新版本的 Visual C++（2008 或更高版本）。

# android - Android gridview图像缓存，滚动图像在替换之前重复

> ID：14723571
> 
> 赞同：5
> 
> 时间：2013-02-06T07:15:57.087
> 
> 标签：android, performance, android-imageview, android-gridview, android-adapter

我有带有图像视图的 GridView，这些图像视图是从画廊的图像缩略图中加载的。我从一个类中加载这些缩略图，在该类中我使用图像 id 和 imageview 调用方法，该方法会将位图设置为传递的 imageview。直到这里它工作得很好，但是当我们抛出网格视图时使线程暂停。

我的问题是它在滚动时会暂停，但是当从上到下滚动时，图像会在 gridview 中重复。我无法弄清楚确切的问题。帮帮我。谢谢！

这里如何设置暂停：

```
imagegrid.setOnScrollListener(new AbsListView.OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView absListView, int scrollState) {
                // Pause fetcher to ensure smoother scrolling when flinging
                if (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_FLING) {
                    bitmapFromId.setPauseWork(true);
                } else {
                    bitmapFromId.setPauseWork(false);
                }
            }

            @Override
            public void onScroll(AbsListView absListView, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            }
        }); 
```

这是我在 grdiview 适配器中的获取视图：

```
public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                holder = new ViewHolder();
                convertView = mInflater.inflate(R.layout.galleryitem, null);
                holder.imageview = (ImageView) convertView.findViewById(R.id.thumbImage);
                holder.checkbox = (CheckBox) convertView.findViewById(R.id.itemCheckBox);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            ImageItem item = images.get(position);
            holder.checkbox.setId(position);
            holder.imageview.setId(position);
            holder.checkbox.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    CheckBox cb = (CheckBox) v;
                    int id = cb.getId();
                    if (images.get(id).selection) {
                        cb.setChecked(false);
                        images.get(id).selection = false;
                    } else {
                        cb.setChecked(true);
                        images.get(id).selection = true;
                    }
                }
            });
            holder.imageview.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    int id = v.getId();
                    ImageItem item = images.get(id);
                    Intent intent = new Intent();
                    intent.setAction(Intent.ACTION_VIEW);
                    final String[] columns = { MediaStore.Images.Media.DATA };
                    Cursor imagecursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                            columns, MediaStore.Images.Media._ID + " = " + item.id, null, MediaStore.Images.Media._ID);
                    if (imagecursor != null && imagecursor.getCount() > 0) {
                        imagecursor.moveToPosition(0);
                        String path = imagecursor.getString(imagecursor
                                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA));
                        File file = new File(path);
                        imagecursor.close();
                        intent.setDataAndType(Uri.fromFile(file), "image/*");
                        startActivityForResult(intent, VIEW_IMAGE);
                    }
                }
            });

            holder.imageview.setLayoutParams(mImageViewLayoutParams);

            // Check the height matches our calculated column width
            if (holder.imageview.getLayoutParams().height != mItemHeight) {
                holder.imageview.setLayoutParams(mImageViewLayoutParams);
            }

            bitmapFromId.DisplayImage(item.id, holder.imageview);
            // holder.imageview.setImageBitmap(item.img);
            holder.checkbox.setChecked(item.selection);
            return convertView;
        } 
```

我的位图加载器类：

```
public class BitmapFromId {

    MemoryCache memoryCache = new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews = Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService;
    Context context;
    Handler handler = new Handler();// handler to display images in UI thread

    Resources mResources;
    private static final int FADE_IN_TIME = 400;

    private final Object mPauseLock = new Object();

    private boolean mPaused = false;

    public BitmapFromId(Context context) {
        fileCache = new FileCache(context);
        executorService = Executors.newFixedThreadPool(5);
        this.context = context;
        mResources = context.getResources();
    }

    public void DisplayImage(long id, ImageView imageView) {

        Bitmap bitmap = null;
        String _id = String.valueOf(id);
        imageViews.put(imageView, _id);
        bitmap = memoryCache.get(_id);
        if (bitmap != null)
            imageView.setImageBitmap(bitmap);
        else {
            queuePhoto(_id, imageView);
            imageView.setBackgroundResource(R.drawable.empty_photo);
        }
    }

    private void queuePhoto(String id, ImageView imageView) {
        PhotoToLoad p = new PhotoToLoad(id, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    // decodes image
    private Bitmap getImageFromId(String id) {
        Bitmap bitmap;

        long _id = Long.parseLong(id);
        final String[] columns = { MediaStore.Images.Media.DATA };
        final String orderBy = MediaStore.Images.Media._ID;
        Cursor imagecursor = context.getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns,
                MediaStore.Images.Media._ID + " = " + _id + "", null, orderBy);
        int count = imagecursor.getCount();
        for (int i = 0; i < count; i++) {
            imagecursor.moveToPosition(i);
            bitmap = MediaStore.Images.Thumbnails.getThumbnail(context.getContentResolver(), _id,
                    MediaStore.Images.Thumbnails.MICRO_KIND, null);
            return bitmap;
        }
        imagecursor.close();
        return null;

    }

    // Task for the queue
    private class PhotoToLoad {
        public String id;
        public ImageView imageView;

        public PhotoToLoad(String _i, ImageView i) {
            id = _i;
            imageView = i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;

        PhotosLoader(PhotoToLoad photoToLoad) {
            this.photoToLoad = photoToLoad;
        }

        @Override
        public void run() {
            try {
                if (imageViewReused(photoToLoad))
                    return;
                Bitmap bmp = getImageFromId(photoToLoad.id);
                memoryCache.put(photoToLoad.id, bmp);
                if (imageViewReused(photoToLoad))
                    return;
                BitmapDisplayer bd = new BitmapDisplayer(bmp, photoToLoad);
                handler.post(bd);

                synchronized (mPauseLock) {
                    while (mPaused) {
                        try {
                            mPauseLock.wait();
                        } catch (InterruptedException e) {
                        }
                    }
                }

            } catch (Throwable th) {
                th.printStackTrace();
            }
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad) {
        String tag = imageViews.get(photoToLoad.imageView);
        if (tag == null || !tag.equals(photoToLoad.id))
            return true;
        return false;
    }

    // Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;

        public BitmapDisplayer(Bitmap b, PhotoToLoad p) {
            bitmap = b;
            photoToLoad = p;

        }

        public void run() {
            if (imageViewReused(photoToLoad))
                return;
            if (bitmap != null) {

                // Load the image fetched:
                final TransitionDrawable td = new TransitionDrawable(new Drawable[] {
                        new ColorDrawable(android.R.color.transparent), new BitmapDrawable(mResources, bitmap) });

                photoToLoad.imageView.setImageDrawable(td);
                td.startTransition(FADE_IN_TIME);

            } else
                photoToLoad.imageView.setImageDrawable(null);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

    public void setPauseWork(boolean pauseWork) {
        if (pauseWork) {
            synchronized (mPauseLock) {
                mPaused = true;
            }
        } else {
            synchronized (mPauseLock) {
                mPaused = false;
                mPauseLock.notifyAll();

            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:57:49.933

您可以使用 Aquery 框架管理所有图像加载/缓存控制机制。

这很简单。例如，像这样的图像加载/缓存；

```
aq.id(R.id.YourImageViewID).image("http://www.vikispot.com/z/images/vikispot/android-w.png", memCache, fileCache); 
```

请参阅[Aquery](http://code.google.com/p/android-query/wiki/ImageLoading)文档

# eclipse - Git：不同的工作目录和存储库位置

> ID：14723577
> 
> 赞同：1
> 
> 时间：2013-02-06T07:16:31.313
> 
> 标签：eclipse, git, egit

我做了一个家庭服务器，我在我正在做的网站上使用 Git。我在该家庭服务器上创建了一个 git，但我正在从另一台远程连接到它的计算机上编辑文件，并使用我正在使用的 IDE(Eclipse+Egit)。但它有点慢。

那么有没有办法让我的存储库在我自己的系统上，但实际的工作目录到服务器？

目前我的服务器 git 已开启

```
Z:/sites/my_site/.git 
```

我希望我的 git 开启：

```
C:/git/my_site/.git 
```

但仍在努力

```
Z:/sites/my_site/ 
```

文件，我的本地 git 看到了。

我希望它清楚我在问什么......

**编辑：**该网站是基于 PHP 的。而且我不想在我的计算机上安装 PHP，所以我可以测试代码，这就是服务器的工作。我创建了该服务器进行测试。这就是为什么我想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:38:11.473

Git 是*分布式*版本控制系统。您可以创建任意数量的存储库并将它们链接为远程。Git 支持`file://`和`ssh://`协议，因此您可以通过本地网络或真正的远程服务器使用它。我认为最好的解决方案是在您的服务器上保留[裸](http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/)存储库并将其克隆到您需要的任何地方。

另外，请记住，您可以将[bitbuket](https://bitbucket.org/)用于您的项目。它支持最多五个人免费使用无限数量的私人存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:29:46.863

一般来说，这里的正确答案是拥有两个 git 存储库，一个在远程机器上，一个在本地机器上，然后简单地推送到远程机器以部署代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:34:59.357

Git 是一个“分布式版本控制系统”，每个本地存储库都在本地保存所有内容（当前状态和所有更改历史记录）。这种在本地工作的方式非常快，并且您不依赖于远程存储库，例如使用 SVN 时。鉴于此，我认为您所做的与使用 Git 的目的完全相反。

要以应有的方式使用 Git，您应该从中央存储库克隆，并将更新推送到该存储库。您的本地存储库可以在 C:/git/my_site/.git 中，当您完成更改后，您从该存储库推送到 Z: 上的那个。

看看[http://git-scm.com/](http://git-scm.com/)它包含了“正确的方式”开始使用 Git 所需的所有知识。

# phpbb3 - 未经身份验证的用户在外部页面上的 PHPBB3 论坛提要

> ID：14723578
> 
> 赞同：1
> 
> 时间：2013-02-06T07:16:30.943
> 
> 标签：phpbb3

我正在尝试将 PHPBB3 论坛的论坛提要集成到外部首页中。

为此，我使用了 phpbbwiki 中的示例： [这是代码](https://wiki.phpbb.com/Practical.Displaying_posts_and_topics_on_external_pages)

我的问题是，这仅在用户已在论坛上进行身份验证时才有效，但我希望用户看到对访客用户开放的主题，而不是 PHPBB 默认（空白）页面。

在这种情况下，我使用 ajax 以 JSON 格式返回主题，但这对我的问题来说并不重要。

很高兴知道这是否可以在 PHPBB 能够提供的范围内实现，以及如果这是一个更复杂的问题，从哪里开始寻找。

如果这对你们中的一些人来说是一件简单的事情，我将不胜感激。

谢谢！

**更新**

没有创建用于检索帖子的 SQL 语句，因为用户似乎没有读取权限。失败的条件是 (function: create_where_clauses) ：

```
// If the type is forum, do the check to make sure the user has read permissions
else if( $type == 'forum_id' && $auth->acl_get('f_read', $id_check) ) 
```

其中 id_check 是当前的 forum_id。

这是用户数据对象的一部分：

```
 ["user_id"]  => string(1) "1"
  ["user_type"]=> string(1) "2"
  ["group_id"] => string(1) "1" 
```

此用户在 GUESTS 组中，默认类型为 IGNORE。我尝试将 user_type 设置为 0=NORMAL - 无济于事。

作为 PHPBB3 论坛的普通访问者，我可以阅读所有开放的论坛，我想知道为什么这个普通的访客用户无法访问论坛。

**更新和解决**

我要感谢您的回答，使我再次走上正轨。当我犯的最初的错误只是一个愚蠢的复制/粘贴问题时，我会无休止地寻找 PHPBBs 用户管理深处的解决方案......

```
$forum_id = array(2, 5);
$forum_id_where = create_where_clauses($forum_id, 'forum');

$topic_id = array(20, 50);
$topic_id_where = create_where_clauses($topic_id, 'topic'); 
```

这两行取自教程，在尝试从“所有”论坛和主题中检索数据时仍然存在。顺便说一句，那些论坛 ID 对注册用户开放而对未经身份验证的用户关闭。当解除上述内容限制时，脚本再次按原样执行。

再说一遍——特别感谢安迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:50:45.323

空白页是因为您的目录中没有`external_body.html`文件`style/prosilver/templates`。

一个非常基本的`external_body.html`看起来像这样。显然，您必须将其集成到您的主页主题中。

```
<!-- BEGIN announcements -->
Title: {announcements.TOPIC_TITLE}<br />
Post author: {announcements.POST_AUTHOR}<br />
Post date: {announcements.POST_DATE}<br />
Last post text: {announcements.POST_TEXT}<br />
Post link: {announcements.POST_LINK}
<!-- END announcements --> 
```

然后，使用 phpBB.com MOD 团队的 battye 提供的文件，并将其放在您论坛的根目录中，您可以显示最近的帖子。

`external_page.php`

```
<?php
/*
* Description: example file for displaying latest posts and topics
* by battye (for phpBB.com MOD Team)
* September 29, 2009
* Modified for StackOverflow Question: http://stackoverflow.com/questions/14723578/phpbb3-forum-feed-on-external-page-for-non-authenticated-users
*/

define('IN_PHPBB', true);
$phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : './';
$phpEx = substr(strrchr(__FILE__, '.'), 1);
include($phpbb_root_path . 'common.' . $phpEx);
include($phpbb_root_path . 'includes/bbcode.' . $phpEx);
include($phpbb_root_path . 'includes/functions_display.' . $phpEx);

// Start session management
$user->session_begin();
$auth->acl($user->data);
$user->setup('viewforum');

$search_limit = 5;

// ----- Change between HERE -----
$posts_ary = array(
        'SELECT'    => 'p.*, t.*, u.username, u.user_colour',

        'FROM'      => array(
            POSTS_TABLE     => 'p',
        ),

        'LEFT_JOIN' => array(
            array(
                'FROM'  => array(USERS_TABLE => 'u'),
                'ON'    => 'u.user_id = p.poster_id'
            ),
            array(
                'FROM'  => array(TOPICS_TABLE => 't'),
                'ON'    => 'p.topic_id = t.topic_id'
            ),
        ),

        'WHERE'     => $db->sql_in_set('t.forum_id', array_keys($auth->acl_getf('f_read', true))) . '
                        AND t.topic_status <> ' . ITEM_MOVED . '
                         AND t.topic_approved = 1',

        'ORDER_BY'  => 'p.post_id DESC',
    );

    $posts = $db->sql_build_query('SELECT', $posts_ary);

    $posts_result = $db->sql_query_limit($posts, $search_limit);

      while( $posts_row = $db->sql_fetchrow($posts_result) )
      {
         $topic_title       = $posts_row['topic_title'];
         $post_author       = get_username_string('full', $posts_row['poster_id'], $posts_row['username'], $posts_row['user_colour']);
         $post_date          = $user->format_date($posts_row['post_time']);
         $post_link       = append_sid("{$phpbb_root_path}viewtopic.$phpEx", "p=" . $posts_row['post_id'] . "#p" . $posts_row['post_id']);

         $post_text = nl2br($posts_row['post_text']);

         $bbcode = new bbcode(base64_encode($bbcode_bitfield));         
         $bbcode->bbcode_second_pass($post_text, $posts_row['bbcode_uid'], $posts_row['bbcode_bitfield']);

         $post_text = smiley_text($post_text);

         $template->assign_block_vars('announcements', array(
         'TOPIC_TITLE'       => censor_text($topic_title),
         'POST_AUTHOR'       => $post_author,
         'POST_DATE'       => $post_date,
         'POST_LINK'       => $post_link,
         'POST_TEXT'         => censor_text($post_text),
         ));
      }
// --- and HERE ---

page_header('External page');

    $template->set_filenames(array(
        'body' => 'external_body.html'
    ));

    page_footer();
?> 
```

如果您不想在论坛的根目录中使用它，则需要修改此行以使用适当的路径指向您的论坛的根目录：

```
$phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : './'; 
```

指示在何处更改代码块的两行是显示内容的核心。上面，我从您提供的链接中发布了[示例 4 。](https://wiki.phpbb.com/Practical.Displaying_posts_and_topics_on_external_pages#Example_4%3a_Display_posts_from_anywhere)替换其他示例中的整个代码块也可以。

最后，您可能需要在更改模板时从 ACP 中清除缓存。

# math - 处理大数（50000+ 位）的最佳编码语言

> ID：14723583
> 
> 赞同：5
> 
> 时间：2013-02-06T07:17:03.263
> 
> 标签：math, programming-languages, calculator, largenumber

你能推荐好的语言来做大数的数学吗？

到目前为止，我已经使用了 Actionscript 2 和 Objective-c，即使使用了 Objective-c `NSDecimalNumbers`，我的计算也被限制为 32 位……我至少需要能够用五万位长的数字进行计算。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T07:27:05.010

Python 具有任意长度的整数并透明地使用它们，因此您不需要任何特殊的代码或类。

```
>>> len(str(math.factorial(123456)))
574965 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T08:31:58.993

也许[Haskell](http://www.haskell.org/tutorial/numbers.html)会吸引你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T09:48:50.077

也试试[bc](http://www.gnu.org/software/bc/)，它可能已经安装在你的机器上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T10:19:11.717

如今，大多数语言都对任意长度的数字提供某种支持，在语言上或通过某些外部库（即 gmp）。

唯一重要的区别^*是语言内的集成程度。例如，在 C++、Python、Perl、SWI-Prolog、Haskell、C# 等中，可以使用标准数学运算符将大整数作为任何其他内置数字类型进行操作。另一方面，在不支持运算符重载的语言中，如 C、Objective-C、Java 等，您必须显式使用库函数。

根据应用程序中 big-int 操作的普遍性，是否切换到对 big-int 更友好的语言可能会有所回报。

**更新**

[*] 好吧，显然，正确性和速度也很重要。但是，由于大多数语言都在后台使用 GMP，因此在这方面不应该存在差异。也许像 Mathematica 或 Maple 这样的面向数学（而且很昂贵！）的语言/应用程序提供自己的 big-int 实现在这里可以有一些优势。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T07:24:04.940

尝试 java 及其`BigInteger`Class，或者您可以考虑用 C 编写一个小型库。如果数学相当简单，您总是可以使用数组。

也许试试 Matlab（不确定）

# java - 解决使用最小值 if else

> ID：14723584
> 
> 赞同：0
> 
> 时间：2013-02-06T07:17:04.127
> 
> 标签：java, logic

好的，伙计们，我需要使用 minimum if else 条件来解决这个问题。让我解释一下我的问题。假设有三个字符串城市，州和国家。我需要按以下格式打印

```
city,state,country 
```

如果如果 city="" 那么它需要是

```
state,country 
```

如果 state="" 它需要是

```
 city,country 
```

如果国家=“”那么

```
city,state 
```

如果所有字符串都是“”，则不应打印任何内容或仅打印“”。以及所有其他可能的条件。这三个字符串可能具有值或可能包含“”而不是空值。所以使用最少的条件我需要解决这个问题。 **注意：不是家庭作业。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T07:20:56.763

```
StringBuilder sb = new StringBuilder ();
for (String s: new String [] {city, state, country})
{
    if (!s.isEmpty ())
    {
        if (sb.length () > 0) sb.append (",");
        sb.append (s);
    }
}
System.out.println (sb); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:21:16.747

您可以通过以下方式进行操作：

```
StringBuilder builder = new StringBuilder();
builder.append((city.isEmpty() ? "" : city + ","))
       .append(((state.isEmpty() ? "" : state + ",")))
       .append(((country.isEmpty() ? "" : country)));
String result = builder.toString();
if (result.endsWith(","))
    result = result.substring(0, result.length() - 1);
System.out.println(result); 
```

不过，不是很优雅。

PS我会使用番石榴`Joiner`来完成这样的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:25:41.843

将它们全部添加到数组或列表中，然后使用字符串构建器构建输出，如下所示（伪代码）：

```
StringBuilder sb = new StringBuilder();
for(int i=0; i<array.length-1; i++)
   if (!"".equals(array[i]))
      stringbuilder.append(s + ",");                   

if (sb.length() > 0)
  sb.deleteCharAt(sb.length()-1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:22:12.320

```
String finalString =(city.equals("") ? "" : ("city"  + ",")) +
                    (state.equals("")? "" : ("state" + ",")) +
                    country.equals("") ? "" : "country"

finalString = finalString.endsWith(",") ? finalString.substring(0, finalString.length-1) : finalString;

System.out.println(finalString); 
```

# php - 如何将 mysql 数据库中的一列日期字符串转换为 UNIX 时间戳？

> ID：14723588
> 
> 赞同：0
> 
> 时间：2013-02-06T07:17:23.060
> 
> 标签：php, mysql

我对数据库表的前 50 个左右条目的查询错误，因此我的日期字段中包含“2013 年 1 月 5 日”之类的条目。

有人可以帮助我完成一个查询，该查询将获取日期字段中的所有条目并将它们简单地转换为 unix 时间戳吗？

在这里研究了许多其他问题，但我没有发现任何东西似乎可以解决事后操纵/转换一组日期的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:20:36.697

选择所有行并`strtotime`用于获取时间戳值，然后更新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:22:39.763

如果您使用的是 php，请使用“strtotime()”函数并更新数据库中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:22:42.123

```
SELECT UNIX_TIMESTAMP('2007-11-30 10:30:19'); 
```

在这里阅读更多[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:23:40.693

PHP;

```
$ts = strtotime("January 5th, 2013");
echo date("Y-m-d", $ts); // 2013-01-05 
```

SQL;

```
UPDATE `table` SET `date_field` = UNIX_TIMESTAMP(`date_field`); 
```

而且，如果您想更改列类型（我更喜欢`INT`类型以解决性能问题）；

```
ALTER TABLE `table` MODIFY `date_field` INT UNSIGNED NOT NULL; 
```

但是在此之后，您需要将所有数据作为整数插入到该列中，所以；

```
$time = time(); // or $time = strtotime("January 5th, 2013");
INSERT INTO `table` (`date_field`) VALUES ($time) 
```

# git - 如何让 Vim Ctrl-P 插件在 git 子模块中索引文件

> ID：14723589
> 
> 赞同：3
> 
> 时间：2013-02-06T07:17:24.173
> 
> 标签：git, vim, git-submodules, vim-plugin

如果我开箱即用地运行 Ctrl-P，它可以 100% 地按我的意愿工作，除了我使用的代码库的大小，索引目录需要很长时间。

为了使 Ctrl-P 应对我正在处理的项目大小，我在我的 .vimrc 文件中使用以下（相当流行的）user_command 设置来提供本机帮助工具，以便更快地为 Ctrl-P 提供列表可用文件：

```
if has("unix")
    let g:ctrlp_user_command = {
    \ 'types': {
        \ 1: ['.git/', 'cd %s && git ls-files']
    \ },
    \ 'fallback': 'find %s -type f | head -' . g:ctrlp_max_files
    \ }
endif 
```

这种方法使索引速度非常快，但是当以这种方式配置时，Ctrl-P 不会像在没有帮助程序的情况下运行时那样了解 git 子模块的内容（因为 'git ls-files' 不会递归到子模块中，而 Ctrl-P 的幼稚目录遍历确实如此）。

我也尝试过使用“查找”来索引 git 存储库，但是当我这样做时，我最终会索引 .git 目录、目标文件以及 Ctrl-P 通常知道会自动忽略的各种其他东西；似乎提供 user_command 完全取代了有关要忽略哪些文件的内置逻辑。我可能可以组合一个逆 grep 来删除某些元素，但似乎有人必须想出一个更优雅的解决方案。

除了诉诸其缓慢的内置搜索之外，是否还有另一种可能更聪明的方法来让 Ctrl-P 索引 git 存储库中的所有文件，包括其所有子模块中的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:23:16.900

您可以使用带有选项的 find 来过滤掉您不想要的文件，例如：

```
find . -type f \( -name "*.cpp" -or -name "*.h" \) 
```

或删除 .git 目录：

```
find . -path '.git' -prune -o -print 
```

但这不是一个*聪明*的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:34:40.390

您可以使用[ack](http://betterthangrep.com/)，它会跳过 .git、.svn、.hg 等 VCS 目录。

我在工作中经常使用 ack，它非常适合全局查找和替换。我曾经 find 一次，用 perl one liner 正则表达式将其管道传输到 xargs 中。不幸的是，这完全破坏了我的 .git 目录中的代码。我无法提交我的更改，也无法在那时结帐、重置或恢复。之后我不得不重新检查代码库！在尝试排除目录时，Ack 比 find 更容易使用，只需使用 --ignore-dir 标志（或 --noignore-dir 来搜索非默认目录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T18:47:05.053

我使用 git-submodule-foreach 在子模块中下降并在`ls-files`那里运行（将子模块路径添加到这些文件名）：

```
let g:ctrlp_user_command = ['.git', 'cd %s && git ls-files -co --exclude-standard && git submodule foreach "git ls-files -co --exclude-standard | while read i; do echo \"\$path/\$i\"; done"'] 
```

# internet-explorer - 如何为所有 Internet Explorer 浏览器版本使用不同的字体 CSS 颜色？

> ID：14723591
> 
> 赞同：0
> 
> 时间：2013-02-06T07:17:32.973
> 
> 标签：internet-explorer, css

我有一个使用[HTML5 Bolierplate](https://github.com/h5bp/html5-boilerplate)的 WordPress 主题。同样，我使用[Jetpack 插件](http://jetpack.me/)的“编辑 CSS”模块对主题的 CSS 进行修改和添加。

通过 Jetpack 的“编辑 CSS”模块，我为各种 WordPress 小部件标题定义了一些 3 维 CSS 文本阴影。

```
.example-widget h3{   
    color: #fff;
    text-shadow: 0 1px 0 #ccc, 0 2px 0 #c9c9c9, 0 3px 0 #bbb, 0 4px 0 #b9b9b9, 
    0 5px 0 #aaa, 0 6px 1px rgba(0,0,0,.1), 0 0 5px rgba(0,0,0,.1), 
    0 1px 3px rgba(0,0,0,.3), 0 3px 5px rgba(0,0,0,.2), 
    0 5px 10px rgba(0,0,0,.25), 0 10px 10px rgba(0,0,0,.2), 
    0 20px 20px rgba(0,0,0,.15);
} 
```

问题是，在 Internet Explorer 上，不支持 3D 文本阴影（至少到 IE9。我没有在 IE10 上测试过）并且白色字体不适用于非常浅色的背景。在 IE 上，我需要一个颜色`#444`来替换 3D 文本效果。

Bolierplate 在 中定义了以下内容`<head>`，但我似乎无法弄清楚如何为所有版本的 IE 定义字体颜色：

```
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

为了解决这个问题，我敢肯定我会被要求解释为什么我把这个问题放在这里，而不是放在[WordPress 答案](http://wordpress.stackexchange.com)上- 原因，他们会告诉我这不是一个 WordPress 特定的问题，尽管我想知道如果 Jetpack“编辑 CSS”模块可能会发挥作用，因为模块中的 CSS 是在主题中定义所有样式表之后加载的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:21:18.167

将您的样式包装在 ie 条件中 -

```
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

然后在你的 all-ie-only.css stylehseet 上，你只想要类似的东西 -

```
body {
    color: red;
} 
```

您可能还需要为覆盖上述内容的任何元素创建覆盖。例如 -

```
.example-widget h3 { 
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:36:38.590

两种快速的方法。

**特征检测 -[请参阅 Modernizr](http://modernizr.com/)。<-- 首选选项**

这不会检查浏览器版本，只是浏览器是否支持`text-shadow`. 您在页面顶部调用 Modernizr 脚本。然后你创建一个类，如：

```
.example-widget {
    color: blue;
}

.no-text-shadow .example-widget {
    color: red;
} 
```

**有条件的评论**

我最喜欢这样做的方式，因为它可以让您将所有 CSS 保存在一个文件中。

```
<!--[if lt IE 7]>      <html class="no-js ie lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js ie lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js ie lt-ie9"> <![endif]-->
<!--[if IE 9]>         <html class="no-js ie ie9"> <![endif]-->
<!--[if gt IE 9|!IE]><!--> <html class="no-js"> <!--<![endif]--> 
```

然后你使用：

```
.example-widget {
   color: blue;
}

.ie .example-widget {
   color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:29:43.493

您可以使用**Internet Explorer 条件注释**。将条件注释添加到`<head>`标签。以下内容适用于理解条件注释的所有 Internet Explorer 版本：

```
<!--[if IE ]>
  <link href="iecss.css" rel="stylesheet" type="text/css">
<![endif]--> 
```

在 css 文件（在本例中为 iecss.css）中添加以下类

```
.example-widget h3 {
   color: #444
} 
```

Internet Explorer 将使用此类（颜色：#444）而不是`.example-widget`具有 3d 效果的原始类。

有关 Internet Explorer 条件注释的详细信息，请参阅本文： [http ://reference.sitepoint.com/css/conditionalcomments](http://reference.sitepoint.com/css/conditionalcomments)

# vb.net - 生成随机字符串visual basic？

> ID：14723598
> 
> 赞同：1
> 
> 时间：2013-02-06T07:18:09.320
> 
> 标签：vb.net

我不明白如何将数字添加到随机字符串中，而不是有时显示类似 3 的字符串，我希望它始终显示 5 字符串，但我不知道该怎么做。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim rndnumber As Random
    Dim number As Integer
    rndnumber = New Random
    number = rndnumber.Next(1, 80000)
    TextBox1.Text = number.ToString
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:30:39.967

您可以使用此函数创建随机字符串：

```
Public Function GenerateRandomString(ByRef len As Integer, ByRef upper As Boolean) As String
    Dim rand As New Random()
    Dim allowableChars() As Char = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLOMNOPQRSTUVWXYZ0123456789".ToCharArray()
    Dim final As String = String.Empty
    For i As Integer = 0 To len - 1
        final += allowableChars(rand.Next(allowableChars.Length - 1))
    Next

    Return IIf(upper, final.ToUpper(), final)
End Function 
```

你可以像这样调用这个函数：

```
GenerateRandomString(5, False) 
```

第一个参数是字符数，第二个参数是是否需要大写字符（True 或 False）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:30:44.603

这会生成一个长度为 5 的随机字符串数：

```
final = rdm.Next(0, 100000).ToString("00000") 
```

这个函数生成一个任意长度的随机字符串：

```
Public Function GetRandomString(ByVal iLength As Integer) As String
    Dim sResult As String = ""
    Dim rdm As New Random()

    For i As Integer = 1 To iLength
        sResult &= ChrW(rdm.Next(32, 126))
    Next

    Return sResult
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T18:03:32.213

你需要它是一串数字吗？因为如果不需要，你可以使用 System.IO.Path.GetRandomFileName。此函数为您提供任意长度的随机大写字符串，默认为 8 个字符

```
Public Function GetRandomString(Optional ByVal iLength As Integer = 8) As String
    Dim sPath, SResult As String

    sPath = ""
    Do
        sPath = sPath + System.IO.Path.GetRandomFileName.Replace(".", "")
    Loop Until sPath.Length > iLength
    SResult = sPath.Substring(0, iLength)
    Return SResult.ToUpper
End Function 
```

# php - 如何让网站实时响应外部事件？

> ID：14723599
> 
> 赞同：-3
> 
> 时间：2013-02-06T07:18:11.737
> 
> 标签：php, javascript, jquery, ajax, event-handling

我需要实现的是使网站在更新数据库表时自动更改。

在这里你可以明白我的意思：http: [//youtu.be/Lwfv65Naa78](http://youtu.be/Lwfv65Naa78)

在上面的演示中，您可以观察到当其他用户通过 iPhone 应用程序与网站交互时，网站正在实时变化。

我想知道是否可以使用 php 和 jquery 来实现，当然还有如何开始。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:45:36.830

您可能想看看以下项目（所有 node.js）：

*   [http://meteor.com/](http://meteor.com/)
*   [http://www.firebase.com](http://www.firebase.com)
*   [http://spacemagic.io/](http://spacemagic.io/)
*   [http://derbyjs.com/](http://derbyjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:31:16.350

Faye、cometd、long polling、Bayeux、WebSockets 都是有用的搜索词。

基本上，您的代码将在一个看起来像 url 的频道上监听：'/posts' 这是由具有相同频道的服务器管理的。您的控制器代码将更新（可能是 json）推送到频道，而您正在侦听频道的 javascript 使用 json 更新页面。

想象一下，客户端上的 ajax 请求永远不会完成加载，而在服务器上，您不断写入 ajax 请求正在下载的页面。有点像“插座”。如果您一心想自己动手，我会研究如何使用 ajax 进行流式传输，以及如何在 php 上刷新缓冲区。

# xml - 如果条件是在 mule 中隐藏 .xslt 中的 xml(WSDL) 文件的某些部分

> ID：14723607
> 
> 赞同：0
> 
> 时间：2013-02-06T07:18:24.807
> 
> 标签：xml, xslt, xsd, wsdl, mule

这是我的 .xslt 文件：

```
 <?xml version='1.0' ?>
<xsl:stylesheet version="2.0"
                                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
                                xmlns:s="http://www.w3.org/2001/XMLSchema">

   <xsl:output method="xml" version="1.0" encoding="UTF-8" omit-xml-declaration="yes" indent="yes" />
   <xsl:param  name="remoteClientAddress" />
   <xsl:variable name="remoteClientAddressTrimmed"
       select="substring-before(substring-after($remoteClientAddress, '/'), ':')" />

<xsl:template match="@*|node()"> 
  <xsl:copy copy-namespaces="yes">
    <xsl:apply-templates select="@*|node()"/>
    <!-- <xsl:value-of select="$remoteClientAddressTrimmed"/> -->
  </xsl:copy> 
</xsl:template>

<xsl:template match="wsdl:operation[@name = 'GetCityWeatherByZIP']">
   <xsl:variable name="$rcaTrimmed" 
          select="substring-before(substring-after($remoteClientAddress, '/'), ':')" />
   <xsl:if test="$rcaTrimmed != '192.168.0.75'">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()" />
      </xsl:copy>
   </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

当我把这部分放在我的 .xslt 中时：

```
 <xsl:template match="wsdl:operation[@name = 'GetCityWeatherByZIP']">
   <xsl:variable name="$rcaTrimmed" 
          select="substring-before(substring-after($remoteClientAddress, '/'), ':')" />
   <xsl:if test="$rcaTrimmed != '192.168.0.75'">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()" />
      </xsl:copy>
   </xsl:if>
</xsl:template> 
```

为了从我的 xml(WSDL) 文件中隐藏**GetCityWeatherByZIP**，我在控制台中看到了这些错误：

```
 Exception in thread "main" org.mule.module.launcher.DeploymentStartException: TransformerConfigurationException: Failed to compile stylesheet. 2 errors detected.
        at org.mule.module.launcher.application.DefaultMuleApplication.start(DefaultMuleApplication.java:174)
        at org.mule.module.launcher.application.ApplicationWrapper.start(ApplicationWrapper.java:107)
        at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:47)
        at org.mule.tooling.server.application.ApplicationDeployer.run(ApplicationDeployer.java:56)
        at org.mule.tooling.server.application.ApplicationDeployer.main(ApplicationDeployer.java:88)
    Caused by: org.mule.api.lifecycle.LifecycleException: Failed to start inbound endpoint "endpoint.http.localhost.8085.Weather.Service"
        at org.mule.endpoint.DefaultInboundEndpoint.start(DefaultInboundEndpoint.java:122)
        at org.mule.construct.AbstractFlowConstruct.startIfStartable(AbstractFlowConstruct.java:317)
        at org.mule.construct.AbstractPipeline.doStart(AbstractPipeline.java:259)
        at org.mule.construct.AbstractFlowConstruct$2.onTransition(AbstractFlowConstruct.java:143)
        at org.mule.construct.AbstractFlowConstruct$2.onTransition(AbstractFlowConstruct.java:139)
        at org.mule.lifecycle.AbstractLifecycleManager.invokePhase(AbstractLifecycleManager.java:141)
        at org.mule.construct.FlowConstructLifecycleManager.fireStartPhase(FlowConstructLifecycleManager.java:95)
        at org.mule.construct.AbstractFlowConstruct.start(AbstractFlowConstruct.java:138)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.mule.lifecycle.phases.DefaultLifecyclePhase.applyLifecycle(DefaultLifecyclePhase.java:225)
        at org.mule.lifecycle.RegistryLifecycleManager$RegistryLifecycleCallback.onTransition(RegistryLifecycleManager.java:276)
        at org.mule.lifecycle.RegistryLifecycleManager.invokePhase(RegistryLifecycleManager.java:155)
        at org.mule.lifecycle.RegistryLifecycleManager.fireLifecycle(RegistryLifecycleManager.java:126)
        at org.mule.registry.AbstractRegistryBroker.fireLifecycle(AbstractRegistryBroker.java:80)
        at org.mule.registry.MuleRegistryHelper.fireLifecycle(MuleRegistryHelper.java:120)
        at org.mule.lifecycle.MuleContextLifecycleManager$MuleContextLifecycleCallback.onTransition(MuleContextLifecycleManager.java:94)
        at org.mule.lifecycle.MuleContextLifecycleManager$MuleContextLifecycleCallback.onTransition(MuleContextLifecycleManager.java:90)
        at org.mule.lifecycle.MuleContextLifecycleManager.invokePhase(MuleContextLifecycleManager.java:72)
        at org.mule.lifecycle.MuleContextLifecycleManager.fireLifecycle(MuleContextLifecycleManager.java:64)
        at org.mule.DefaultMuleContext.start(DefaultMuleContext.java:249)
        at org.mule.module.launcher.application.DefaultMuleApplication.start(DefaultMuleApplication.java:151)
        ... 4 more
    Caused by: org.mule.api.lifecycle.InitialisationException: Failed to compile stylesheet. 2 errors detected.
        at org.mule.module.xml.transformer.XsltTransformer.initialise(XsltTransformer.java:142)
        at org.mule.processor.chain.AbstractMessageProcessorChain.initialise(AbstractMessageProcessorChain.java:79)
        at org.mule.processor.chain.AbstractMessageProcessorChain.initialise(AbstractMessageProcessorChain.java:79)
        at org.mule.endpoint.DefaultInboundEndpoint.createMessageProcessorChain(DefaultInboundEndpoint.java:163)
        at org.mule.endpoint.AbstractEndpoint.getMessageProcessorChain(AbstractEndpoint.java:517)
        at org.mule.endpoint.DefaultInboundEndpoint.start(DefaultInboundEndpoint.java:104)
        ... 27 more
    Caused by: javax.xml.transform.TransformerConfigurationException: Failed to compile stylesheet. 2 errors detected.
        at net.sf.saxon.PreparedStylesheet.prepare(PreparedStylesheet.java:153)
        at net.sf.saxon.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:137)
        at net.sf.saxon.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:88)
        at org.mule.module.xml.transformer.XsltTransformer$PooledXsltTransformerFactory.makeObject(XsltTransformer.java:363)
        at org.apache.commons.pool.impl.GenericObjectPool.addObject(GenericObjectPool.java:1615)
        at org.mule.module.xml.transformer.XsltTransformer.initialise(XsltTransformer.java:138)
        ... 32 more 
```

当我运行我的项目时，我的项目没有启动，我看到了我复制它们的所有主要错误。我该怎么做才能解决这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:34:18.540

最可能的问题是这一行：

```
<xsl:variable name="$rcaTrimmed" 
```

名字中不应该有a `$`。它应该是这样的：

```
<xsl:variable name="rcaTrimmed" 
```

# android - 如何安装jobb.bat工具android

> ID：14723608
> 
> 赞同：0
> 
> 时间：2013-02-06T07:18:34.277
> 
> 标签：android

我的 apk 大小高达 50mb，所以为此我使用扩展 apk。在搜索时，我知道有不同的文件可以用作扩展文件，如 zip 和 pdf 等。我正在尝试将我的数据放入 .obb 文件中，但我不知道如何创建这些文件并放置数据在这些文件中展示了如何安装 jobb.bat 工具。我的 cmd 无法识别 jobb 命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:01:34.827

在搜索之后，我发现在 SDK 21.0 中可以使用 jobb.bat。正如 SDK 21.0 中为扩展文件提供的那样。所以下载安装SDK 21.0后，在cmd上可以识别jobb命令。

# codeigniter - 根据id获取数据

> ID：14723609
> 
> 赞同：0
> 
> 时间：2013-02-06T07:18:34.640
> 
> 标签：codeigniter, mongodb

我正在使用 codeigniter 和 mongodb 开发一个项目。如何根据 _id 从 mongodb 获取数据。我的意思是如何在 '$query=$this->mongo_db->get_where('photos', $where 中给出 where 条件)'。我需要根据'id'获取photos_path。请帮忙

这是我的 mongodb 集合的数组格式：-

```
 Array
(
    [0] => Array
    (
        [_id] => MongoId Object
            (
                [$id] => 510f7e0d2217f4fc03000000
            )

        [key] => organization_img
        [photos_path] => uploads/img_51359969805.gif
    )

[1] => Array
    (
        [_id] => MongoId Object
            (
                [$id] => 5111ef2f2217f4280a000000
            )

        [key] => organization_img
        [photos_path] => uploads/image.png
    ) 
```

)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-09T07:44:01.013

此查询非常适合使用条件从带有 codeigniter 的集合中获取单个记录

```
$this->mongo_db->where('_id', $mongoid)->find_one('attributes') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:11:24.987

我不知道 CodeIgniter 的 MongoDB API 与驱动程序的 API 有何不同，但您必须实例化一个新实例`MongoId`并将其传递给查询，如下所示：

```
$m = new MongoClient(...);
$col = $m->selectCollection(...);

$cursor = $col->findOne(array('_id' => new \MongoId($id))); 
```

这是由于 MongoDB 如何保存其 _id 列。[http://docs.mongodb.org/manual/core/object-id/](http://docs.mongodb.org/manual/core/object-id/)

如果您在创建新文档时提供一个简单的字符串作为 _id 列，则不必在`MongoId`每次查询时都实例化一个新对象。请记住，如果您这样做，您必须自己关心唯一身份和基数，因为 MongoDB 不`AUTO_INCREMENT`为某些列提供选项，如关系表（MySql，PgSql，...）。相反，它为每个文档提供一个唯一生成的 id 对象作为主键。

该`_id`列默认使用与集合本身无关的生成对象的原因是，嗯，因为在内部它是一堆拼接字节，例如比较原始字节进行排序比在比较时将其解释为字符串字符要快得多，不得不乱用字母顺序等，而原始字节可以在逻辑上进行比较，这要快得多。相信我，当您查询超过 100,000,000 个文档时，您会希望它更快，这对于体面大小的 MongoDB 实例来说是很常见的。使用类似的技术`AUTO_INCREMENT`ed 主键也不会轻易允许分片数据库，因为您要确保在插入新文档时每个索引彼此跟随，这肯定会阻止同一集合中的其他插入。这就是为什么使用生成的对象而不是`AUTO_INCREMENT`键的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:26:47.393

您可以简单地使用：

```
$query=$this->mongo_db->get_where('photos', 
    array('_id' => new \MongoId($_id_of_another_row))
) 
```

如果`$_id_of_another_row`已经是 MongoId ( `if($_id_of_another_row instanceof \MongoId)`) 那么您不需要再次包装它并且可以立即使用它。

将其包装`MongoId`在 MongoDB 本身中将为查询文档创建以下代表性结构（基本上是上面的代码）：

```
[_id] => MongoId Object(
    [$id] => 5111ef2f2217f4280a000000
) 
```

我必须承认我从未使用过 CI，但他们的 API 似乎只是扩展了 MongoDB 自己的 PHP 驱动程序。

作为参考，这里有一个很好的问题，详细介绍了示例代码片段和教程链接：[MongoDB 和 CodeIgniter](https://stackoverflow.com/questions/2248789/mongodb-and-codeigniter)

# python - 如何防止在 Django 中同时运行多个 Timer 实例？

> ID：14723610
> 
> 赞同：0
> 
> 时间：2013-02-06T07:18:39.103
> 
> 标签：python, django, timer

我希望我的 Django 应用程序中的一个方法每 60 秒定期调用一次。这是一个非常简单的任务，我想我会使用`Timer`. 这是我的代码，它位于`__init__.py`我的一个应用程序中：

```
from threading import Timer

def hello():
    print "xxx"
    Timer(60, hello).start()

Timer(60, hello).start() 
```

当 Django 导入我的应用程序时，将调用此代码。

当我执行`runserver`命令时，这似乎工作正常，这两个实例开始运行它似乎是因为我每 60 秒看到两行控制台输出。我认为这是因为运行服务器命令运行多个进程/线程，我正确吗？

如何确保一次只运行计时器实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:57:12.393

定期运行代码的正确方法是设置一个运行 django 命令的 cron 作业。如果在 apache 下运行，您应该为 www-data 用户设置 cron 作业（或者`runserver`如果您处于开发模式，则可能是您自己的用户）这将确保代码以与 Web 代码相同的权限和所有权执行.

您还可以使用[django-cron](http://code.google.com/p/django-cron/)使事情变得更容易（尤其是在 Windows 下运行时）

# android - OnitemClickListener 不工作

> ID：14723611
> 
> 赞同：1
> 
> 时间：2013-02-06T07:18:40.530
> 
> 标签：android, sqlite, listview

我想要`OnitemClickListener`一个`listview`，但它对我不起作用。它给 Logcat 错误。

**您的内容必须有一个列表视图，其 id 属性为`R.id.list`**

我的应用程序没有启动。我在我的项目中使用 sqlite 来存储一个数字并将其显示在`listview`.

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:choiceMode="multipleChoice" /> 
```

此代码用于单击..

```
 ListView listView1 = (ListView) findViewById(R.id.list);

    listView1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "item clicked: ",Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:22:45.687

使用`@+id/android:list`它可能会起作用

# android - 脚蹼停止工作

> ID：14723627
> 
> 赞同：0
> 
> 时间：2013-02-06T07:19:48.477
> 
> 标签：android

我是 Android 中的新手，正在使用鳍状肢，我想在顶部添加图像，并且希望对鳍状体没有影响，而身体的其余部分在鳍状体上工作，我面临这个问题，即应用程序停止工作代码和 xml下面列出

**.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <ViewFlipper
        android:id="@+id/view_flipper"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_margin="6dip" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="this is text 1"
                android:textColor="#00ff00"
                android:textSize="14sp"
                android:textStyle="bold" >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="this is text 2"
                android:textColor="#00ff00"
                android:textSize="14sp"
                android:textStyle="bold" >
            </TextView>
        </LinearLayout>
    </ViewFlipper>

</RelativeLayout> 
```

**.java**

```
package com.test.flipper_example;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MotionEvent;
import android.widget.ViewFlipper;

public class Offlipper_example3 extends Activity{
    private ViewFlipper vf;
    private float lastX;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.flipper03);
        vf = (ViewFlipper) findViewById(R.id.view_flipper);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    @Override
    public boolean onTouchEvent(MotionEvent te) {
        switch (te.getAction())
        {
        case MotionEvent.ACTION_DOWN:
        {
        lastX = te.getX();
        break;
        }
        case MotionEvent.ACTION_UP:
        {
        float currentX = te.getX();
        if (lastX < currentX)
        {
        if (vf.getDisplayedChild()==0) break;
        vf.setInAnimation(this, R.anim.slide_left);
        vf.setOutAnimation(this, R.anim.slide_right);
        vf.showNext();
        }
        if (lastX > currentX)
        {
        if (vf.getDisplayedChild()==1) break;
        vf.setInAnimation(this, R.anim.slide_right);
        vf.setOutAnimation(this, R.anim.slide_left);
        vf.showPrevious();
        }
        break;
        }
        }

        return false;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:48:22.877

只是好奇为什么您使用 ViewFlipper 而不是已经处理触摸手势的组件。你有很多：

*   ViewPager（兼容库）
*   ViewFlinger ( [https://github.com/casidiablo/viewflinger](https://github.com/casidiablo/viewflinger) )

这两个都将处理您当前不处理的手势，移动视图以提示用户他可以滑动，...

# python - 给定两个大小相等的二进制矩阵，计算模式相似度得分

> ID：14723631
> 
> 赞同：2
> 
> 时间：2013-02-06T07:20:01.590
> 
> 标签：python, matlab, image-processing, opencv, matrix

假设我有两个 4*4 矩阵（表示二进制图像），我想计算两个矩阵上显示的模式的相似度得分（从 0 到 1）。两个矩阵之间的“on”像素数始终相同，例如：

```
M1
0 1 1 1
0 0 0 1
0 0 0 0
0 0 0 0

M2
0 0 0 0
0 0 0 0
1 1 1 0
0 0 1 0

M3
1 0 0 1
0 0 0 0
0 0 0 0
1 0 0 1

M4
0 0 0 0
1 1 1 0
0 0 0 1
0 0 0 0 
```

在这种情况下，我希望 M1:M2 给出满分 (1)，因为图案的位置无关紧要。M1:M3 应该给出一个很差的分数，而 M1:M4 会得到一个很好但不完美的分数。目前，我只对相同方向的图案感兴趣，因此不需要检查图案方向。

任何有关算法的帮助或建议将不胜感激！

这个的最终实现将用 Matlab 编写，但我正在用 Python 编写一个初始测试实现，所以任何一个库都很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:26:43.057

似乎对`conv2`将进行的操作是相关的，但这只是建议。这是一种不同的方法，因为 M1 和 M2 是相同的，它们具有相同的主成分，因此`svd`可以作为相似度的度量，例如：

```
abs(sum(svd(M1)-svd(M2)))
ans =
   1.1102e-16

abs(sum(svd(M1)-svd(M4)))
ans =
   0.1189

abs(sum(svd(M3)-svd(M4)))
ans =
    0.7321 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:24:35.627

这是直接的计算机视觉，但这里是一个幼稚的开始：针对每种可能的排列将两个矩阵相互[卷积。](http://en.wikipedia.org/wiki/Convolution "科尔沃尔")

# css - CSS响应式设计问题

> ID：14723636
> 
> 赞同：0
> 
> 时间：2013-02-06T07:20:26.170
> 
> 标签：css

我正在制作一个反应式网站；这意味着它会随着窗口重新调整大小。一切都很顺利，直到我点击导航栏，它的左下角和右下角有一条 15px 的曲线，宽度为 100%。我想在（充当包装器）div`NavCap`的任一侧放置两个我调用的20px div。`Nav`这很容易，让我可以隔开按钮并在末端添加图像。调用的中间部分`NavAction`将有一个 1px 的重复背景图像，以便它在粗糙的服务器上加载超快。

问题是它`NavAction`需要占用尽可能多的空间，而不会将右边`NavCap`推到下一条隐藏线上。这是我的代码：

```
#nav {    
   width: 100%;
   height: 55px;
   position: relative;
   bottom: 0;
   overflow: hidden;
   background-color: #020202;
   -webkit-border-radius: 0px 0px 15px 15px;
   -moz-border-radius: 0px 0px 15px 15px;
   border-radius: 0px 0px 15px 15px;    
}

#nav * {    
   box-sizing: border-box;
   height: 100%;    
}

#navCap {    
   width: 20px;
   height: 55px;
   float: left;
   background-color: blue;    
}

#navAction {    
   width: 97.91%;
   height: 55px;
   float: left;
   padding: 0;
   background-color: green;    
}

        <div id="nav">                
            <div id="navCap"></div>                
            <div id="navAction">

            </div>                
            <div id="navCap" class="right"></div>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:29:29.293

不要有两个具有相同值的 id `navCap`。

不要给`navAction`a 宽度，而是给它一个`left`和`right`值：

```
#navAction {
    position         : absolute;
    left             : 20px;
    right            : 20px;
    top              : 0;
    height           : 55px;
    background-color : green;
} 
```

然后像这样设置你的上限：

```
#navCapLeft, #navCapRight {
    width            : 20px;
    height           : 55px;
    position         : absolute;
    top              : 0;
    background-color : blue;
}
#navCapLeft {
    left : 0;
}
#navCapRight {
    right : 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:43:17.343

这是另一个简单的解决方案：

```
<div id="nav">
    <div class="left"></div>
    <div class="right"></div>
</div>

#nav {
    width: 100%;
    height: 55px;
    position: relative;
    overflow: hidden;
    -webkit-border-radius: 0px 0px 15px 15px;
    -moz-border-radius: 0px 0px 15px 15px;
    border-radius: 0px 0px 15px 15px;
    background-color: green;
}
#nav * {
    box-sizing: border-box;
    height: 100%;
}
.left,
.right {
    width: 20px;
    height: 55px;
    position: absolute;
    background-color: blue;
}
.left {
    left: 0;
}

.right {
    right:0;
} 
```

# javafx-2 - 在全屏 JavaFX 中更改场景

> ID：14723664
> 
> 赞同：2
> 
> 时间：2013-02-06T07:22:59.780
> 
> 标签：javafx-2, javafx

我是 JavaFX 的新手。我有我的主要和次要场景；当我从第一个场景更改为第二个场景时，窗口的栏变得可见。我该如何解决？

这是我的代码

```
public class ProyectoTeoriaBD1 extends Application {

Stage primaryStage;

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(final Stage primaryStage) {

    this.primaryStage = primaryStage;
    GridPane gp = new GridPane();
    gp.setHgap(10);
    gp.setVgap(10);
    gp.setPadding(new Insets(25,25,25,25));

    Scene firstScene = new Scene(gp);
    Button b = new Button("Change Scene");        
    gp.add(b,1,1);
    primaryStage.setScene(firstScene);
     primaryStage.setFullScreen(true);
    primaryStage.show();

   b.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {
           GridPane gp = new GridPane();
           Scene secondScene = new Scene(gp);
           Text txtSecond = new Text("Second Scene");
           gp.add(txtSecond, 1, 1);
           primaryStage.setScene(secondScene);
           primaryStage.setFullScreen(false);
           primaryStage.setFullScreen(true);

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:50:51.780

完整的可运行可测试代码可能会有所帮助。还提供您的系统环境详细信息。我已经在下面测试了您的代码（自己试试），它适用于我的 Windows 7 64 位和 JavaFX 版本 2.2.0。
（我会在您提供更多详细信息时更新我的​​答案，最后欢迎使用 stackoverflow！）

**更新：**好的，我猜你的主要阶段最初是全屏模式。在这种情况下，您需要切换全屏模式。见下文。

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBoxBuilder;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class Test extends Application {
    private Stage primaryStage;

    @Override
    public void start(Stage primaryStage) {
        this.primaryStage = primaryStage;
        this.primaryStage.setFullScreen(true);
        Button btn = new Button("Login");
        btn.setOnAction(loginClienteHandler());

        StackPane root = new StackPane();
        root.getChildren().add(btn);

        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("JavaFX version: " + com.sun.javafx.runtime.VersionInfo.getRuntimeVersion());
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public EventHandler loginClienteHandler() {
        EventHandler evh = new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                primaryStage.setScene(new Scene(VBoxBuilder.create().children(new Text("text")).build()));
                primaryStage.sizeToScene();
                primaryStage.setFullScreen(false);
                primaryStage.setFullScreen(true);
            }
        };
        return evh;
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T19:29:43.007

我也在制作游戏，我需要全屏功能。我解决它的方法是：

1：`primaryStage.setFullScreen(true);`用于启用主场景全屏。

2：切换到其他场景时，`primaryStage.setFullScreen(true);`设置好新场景后直接再次申请。

我的例子：

```
 public void start(Stage primaryStage) {

            // Start of program
            setUpGame();

            // MENU
            // Setting up menu stage
            primaryStage.setTitle("My cool game");
            primaryStage.setResizable(false);
            primaryStage.setFullScreen(true);
            primaryStage.setFullScreenExitHint("");

            // Setting up grid pane
            mod.getMenuGrid().setAlignment(Pos.CENTER);
            mod.getMenuGrid().setHgap(10);
            mod.getMenuGrid().setVgap(10);
            mod.getMenuGrid().setPadding(new Insets(25, 25, 25, 25));

            ... More code until I'm changing scene ... 
    }

    private void startGame(Stage primaryStage) {
        setNames();
        createPlayers();
        setUpGameScene();
        primaryStage.setScene(mod.getGameScene());
        primaryStage.setFullScreen(true);
    } 
```

我不知道这是否是最好的解决方法，但至少它很简单并且有效。您只需在更改场景时一致地应用代码行。

# javascript - 使用 IE 和 Chrome 匹配正则表达式时 javascript 挂起

> ID：14723667
> 
> 赞同：3
> 
> 时间：2013-02-06T07:23:16.917
> 
> 标签：javascript, regex, internet-explorer, google-chrome

`"\w+([\.\-]?\w+)*@"` 当它尝试测试它是否匹配一个字符串时，我得到了一个错误的正则表达式

```
"ffffffffffb3ffffffffffafffffffffffabffffffffffc2ffffffffffa7e" 
```

这将导致IE和Chrome挂起。但是FF可以正常工作。

我发现“？” 在正则表达式中是不必要的。并且在我删除“？”后找到它。

但这是我不明白导致问题的原因。这是一些测试

1.  `"\w+([\.\-]?\w+)*"`工作正常。

2.  `"\w+([\.\-]\w+)*@"`工作正常。

3.  `"\w+([\.\-]?\w+)*@"`导致问题

有谁知道为什么？或者它只是浏览器之间的性能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T07:32:04.587

这称为[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)。

在您的第三个示例中，`@`（显然会导致正则表达式失败）强制您的正则表达式引擎尝试所有可能的排列`\w+(\w+)*`（因为字符类是可选的）。有了这样长度的字符串，计算所需的时间将比宇宙热死之前更长。

![正则表达式好友截图](../Images/3fb0b6274f2b7c4269a434581ba64f25.png)

Firefox 似乎对正则表达式有迭代限制，并且会在大约一百万次尝试后中止，Chrome 和 IE 似乎在这里更加坚忍。

# django - 通过 Django 表单 API 检索和呈现数据

> ID：14723669
> 
> 赞同：0
> 
> 时间：2013-02-06T07:23:21.160
> 
> 标签：django, forms

我已经在 Django 中准备了一个基本的联系表。数据保存成功。但我想将保存的数据（所有 db 列）检索为 html 表并将其显示在我的网站上（而不是在管理界面中）。

这是模型：

```
class ContactForm(forms.Form):
    name = forms.CharField(label='Your name')
    place = forms.CharField(max_length=100,label='Your place')
    message = forms.CharField(label='Your message')
    url = forms.URLField(label='Your Web site', required=False)
    options = forms.BooleanField(required=False)
    day = forms.DateField(initial=datetime.date.today) 
```

该视图仅接受发布数据并重定向到“感谢”页面。

我试着做`ContactForm.objects.all()`，但我得到的错误是：`Objects attribute does not exist for ContactForm`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:56:47.737

听起来您需要创建一个[模型](https://docs.djangoproject.com/en/1.4/topics/db/models/)。django 模型描述了一个数据库表并创建了使用 python 处理该表的功能。如果您想保存数据，那么您将希望将其保存在数据库中，并且您将需要一个模型。

尝试类似的东西 -

```
from django.db import models

class Contact(models.Model):
    name = models.CharField(label='Your name', max_length=128)
    place = models.CharField(max_length=100,label='Your place')
    message = models.CharField(label='Your message', max_length=128)
    url = models.URLField(label='Your Web site', required=False)
    options = models.BooleanField(required=False)
    day = models.DateField(initial=datetime.date.today) 
```

然后，不要创建一个继承自`Form`您想要继承的表单`ModelForm`（有关模型表单的更多信息，请参阅[文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)）。它应该很简单，因为模型上已经描述了你所有的字段 -

```
from django.forms import ModelForm

class ContactForm(ModelForm):
    class Meta:
        model = Contact 
```

您需要一个可以处理保存表单的视图（[这里是文档中的一个示例](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#using-a-model-formset-in-a-view)）。然后，您就可以`Contact.objects.all()`按照 Cathy 的答案中的示例进行显示。或者，查看[Django-Tables2](http://django-tables2.readthedocs.org/en/latest/) - 一个用于显示表格的有用插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:58:48.273

**视图.py**

```
def view_name (request):
    contacts = Contact.objects.all()
    return render(request, 'page.html', {
        'contacts': contacts
    }) 
```

**html**

```
<html>
    ....

    <body>
        <table>
        {% for contact in contacts %}
            <tr>
                <td>{{contact.name}}</td>
                <td>{{contact.place}}</td>
                <td>....</td>
                <td>....</td>
            </tr>
        {% endfor %}
        </table>
    </body>
</html> 
```

# python - pub_date 在 Django 教程错误中无效

> ID：14723670
> 
> 赞同：-4
> 
> 时间：2013-02-06T07:23:23.063
> 
> 标签：python, django, web-applications, web-application-design

```
C:\mysite>python manage.py shell
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from polls.models import Poll,Choice
>>> Poll.objects.all()
[]
>>> import django
>>> from django.utils import timezone
>>> p= Poll(question="what's new?",pub_date= timezone.now())
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "C:\Python27\lib\site-packages\django\db\models\base.py", line 367, in __init__
    raise TypeError("'%s'is an invalid keyword argument for
                          this function"%kwargs.keys()   [0])
TypeError: 'pub_date' is an invalid keyword argument for this function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:32:57.870

检查您的 models.py 可能您输入错误的 pub_date 日期时间字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-26T18:37:23.013

有点晚了，但我也遇到了这个问题，我找到了答案。将你的 models.py 文件更改为：

```
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0) 
```

# php - 如何将数据库表转换为理论实体

> ID：14723672
> 
> 赞同：4
> 
> 时间：2013-02-06T07:23:31.210
> 
> 标签：php, codeigniter, command-line, doctrine

我正在使用学说和 codeigniter，并且我有一个现有的数据库。[该](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/tools.html#convert-mapping-information)工具据说可以从数据库生成模型。

我尝试：

```
php doctrine.php orm:convert-mapping --from-database 
```

但我得到一个运行时异常（没有足够的参数）

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T07:28:03.303

像这样试试

**对于 XML 输出**

```
php doctrine orm:convert-mapping --from-database --namespace='Entities\' xml mapping/xml 
```

**对于 YAML 输出**

```
php doctrine orm:convert-mapping --from-database --namespace='Entities\' yml mapping/yml 
```

之后，您应该创建这样的实体，

```
php doctrine orm:generate-entities 
```

帮助，

```
php doctrine orm:generate-entities --help 
```

有关更多信息，[文档](http://doctrine-orm.readthedocs.org/en/latest/reference/tools.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-16T08:49:07.690

您错过了一些参数，例如项目完整路径

```
php doctrine orm:convert-mapping --namespace='Entities\' --force --from-database  annotation your/project/full/path 
```

# file - top 命令运行无限时间，延迟指定输出到文件

> ID：14723675
> 
> 赞同：0
> 
> 时间：2013-02-06T07:23:32.580
> 
> 标签：file, delay

linux中有这个“top”命令，用于测量各种实时CPU指标。

有人可以解释如何使用该命令，以便它每 1 秒更新一次并执行无限时间（或者说直到我想运行它）。此外，如果它可以输出文本文件中的值。

所以我尝试了：

顶部 -n -d 1 -b >> output.txt

但是我应该如何指定 n 的参数值。我不想为 -n 参数设置一些随机值，比如 10000 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:35:35.800

1.) 每隔一秒解释一次更新：你自己做的：'-d 1'

2.）解释输出到文本文件：你自己做了：'>> output.txt' 这将附加（如果需要创建新的）到文件'output.txt'。

3.）如果你想永远运行它，只需省略参数'-n'。

但注意：如果它“永远”运行：想想你的输出文件会占用文件系统空间！！！

# .net - 从 Exchange 高效地进行房间预约

> ID：14723679
> 
> 赞同：1
> 
> 时间：2013-02-06T07:24:03.127
> 
> 标签：.net, wcf, calendar, exchange-server, ews-managed-api

**问题**

我需要能够使用 Exchange 托管 API 从会议室获取约会数据。我已经运行了大约一个月的服务，通过使用`ExchangeService.GetUserAvailability()`如下方式可以很好地达到此目的：

```
private IEnumerable<CalendarEvent> GetEvents(ExchangeService ExchangeService, string room, DateTime time, DateTime end)
{
    List<AttendeeInfo> attendees = new List<AttendeeInfo>();
    end = new DateTime(time.Ticks + Math.Max(end.Ticks - time.Ticks, time.AddDays(1).Ticks - time.Ticks));

    AttendeeInfo roomAttendee = new AttendeeInfo();
    roomAttendee.AttendeeType = MeetingAttendeeType.Room;
    roomAttendee.SmtpAddress = GetEmailAddress(room);
    attendees.Add(roomAttendee);

    Collection<CalendarEvent> events = ExchangeService.GetUserAvailability(
                attendees,
                new TimeWindow(time, end),
                AvailabilityData.FreeBusy
            ).AttendeesAvailability[0].CalendarEvents;

    return (from e in events
            where e.EndTime > time
            select e);
} 
```

然而，我最近不得不扩展这项服务来执行一些需要更长时间跨度（从一天到几个月）的其他任务。这种方法随着时间的增加变得非常低效，并且当结果太多时偶尔会抛出错误。

**问题**

这是解决这个问题的最有效方法吗？我没有找到更好的方法，但我会很感激确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:50:29.363

您可以尝试使用[ExchangeService.FindItems](http://msdn.microsoft.com/en-us/library/jj221996%28v=exchg.80%29.aspx)，它使您能够：

*   使用分页来获取巨大的结果集。
*   选择要从服务器获取的字段
*   指定可以过滤此查询服务器端的 SearchFilter：

    从 e 在 e.EndTime > time 的事件中选择 e

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T12:38:57.777

我使用代表，希望有用。代码示例...

```
 ExchangeService service = new ExchangeService();
      ServicePointManager.ServerCertificateValidationCallback = CertificateValidationCallBack;
      service.Credentials = new NetworkCredential(username, password);
      service.Url = new Uri("...");

      List<DelegateUser> newDelegates = new System.Collections.Generic.List<DelegateUser>();
      DelegateUser calendarDelegate = new DelegateUser(roomemail);
      calendarDelegate.Permissions.CalendarFolderPermissionLevel = DelegateFolderPermissionLevel.Reviewer;
      newDelegates.Add(calendarDelegate); 
```

# tridion - 在 Dreamweaver TBB 中使用 TemplateBeginRepeat 在不同的模板级别获取字段值

> ID：14723683
> 
> 赞同：2
> 
> 时间：2013-02-06T07:24:25.667
> 
> 标签：tridion, tridion-2011, dreamweaver-templates

我正在尝试编写 Dreamweaver TBB，但我被困在需要在不同模板级别获取字段值的地方。

下面是我的 XML，我需要将 formField 级别的 inputType 字段获取到输入模板级别。

```
<formField>
    <divClassName>fieldClassName</divClassName>
    <label>Please enter your Name</label>
    <labelId>labelNameId</labelId>
    <inputType>text</inputType>
    <input>
        <inputName>sam</inputName>
        <inputId>ssss</inputId>
        <inputSize>40</inputSize>
        <inputLabel>xxx</inputLabel>
        <inputValue>zzz</inputValue>
    </input>
    <input>
        <inputName>gf</inputName>
        <inputId>g</inputId>
        <inputSize>fdg</inputSize>
        <inputLabel>sg</inputLabel>
        <inputValue>gsdfg</inputValue>
    </input>
    <param1>ssss</param1>
    <param2>ssss</param2>
</formField> 
```

要获得相同级别的值，我们可以使用

```
<!-- TemplateBeginRepeat name="Component.Fields.formField" -->
    @@inputType@@
<!-- TemplateEndRepeat --> 
```

但我的要求是在输入模板级别获取 inputValue

```
<!-- TemplateBeginRepeat name="input" -->
    @@inputType@@
<!-- TemplateEndRepeat --> 
```

此代码无法返回，因为输入模板级别不存在 inputType。所以我尝试使用：

```
<!-- TemplateBeginRepeat name="input" -->
    @@RenderComponentField("formField[0].inputType",0)@@
<!-- TemplateEndRepeat --> 
```

这里有两个问题，当我使用 RenderComponentField 时，输出如下所示：

```
<tcdl:ComponentField name="formField[0].inputType" index="0">
    text
</tcdl:ComponentField> 
```

它返回值以及我不需要的 tcdl 标签。

其次，我需要使用而不是直接给出 0 的索引`TemplateRepeatIndex`，但是如果我使用它会给出错误`@@RenderComponentField("formField[TemplateRepeatIndex].inputType",0)@@`

那么如果我们想在不同的模板级别获取字段值，我们如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:03:42.940

As you have discovered, it is not possible to access the "outer" TemplateRepeatIndex from the "inner" loop with the standard DWT functions.

There are a few ways to solve this. The simplest is probably to write [custom Dreamweaver callable functions](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_EFD94BC0585D4186A13F7F3C3B6F47EA) that use the context variables to store and retrieve values.

This approach is described well, with accompanying source code, at [Get and Set Variables in DWTs | SDL Tridion Developer](http://www.tridiondeveloper.com/get-and-set-variables-in-dwts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:40:04.483

你必须使用下面的 $ 符号和 TemplateRepeatIndex

@@RenderComponentField("formField[${TemplateRepeatIndex}].inputType",0)@@

让我知道如果不工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:20:10.553

您的问题有点令人困惑，但似乎您有 2 个问题

1.  `<tcdl:ComponentField/>`你有一个你不想要的额外标签
2.  使用时出现错误`TemplateRepeatIndex`

如果这不正确，请考虑修改您的问题。

对于问题编号 #1- 我可以假设您`<tcdl:ComponentField/>`在模板生成器中看到了吗？还是您在最终发布的页面中看到了这一点？该标签由`@@RenderComponentField@@`函数添加到输出中，以允许您将 TridionUI 标记的 SiteEdit 添加到输出中。如果您在模板末尾应用“默认完成操作”TBB，则不应出现在您发布的页面中。默认模板包含在应用任何 SiteEdit/UI 标记后清理此标记的代码。

对于您的第二个问题，请查看这些帖子“[如何在 SDL Tridion 2011 SP1 中处理 Dreamweaver TBB 中的嵌套重复区域](https://stackoverflow.com/questions/10309577/how-to-handle-nested-repeating-regions-in-dreamweaver-tbbs-in-sdl-tridion-2011-s/10322575)”和“ [http://www.tridiondeveloper.com/get-and-set-variables-in-dwts](http://www.tridiondeveloper.com/get-and-set-variables-in-dwts) '。

Nested/embeded fields can be confusing using the default Tridion syntax for Dreamweaver, so you might consider using the great [GetExtension](https://sdltridionworld.com/community/extension_overview/dreamweaver_get_extension.aspx) from Nuno Linhares. This will make your life much easier

# php - CakePHP：验证消息不显示

> ID：14723685
> 
> 赞同：3
> 
> 时间：2013-02-06T07:24:30.213
> 
> 标签：php, cakephp

我是 cakePHP 的新手，我按照一些教程制作了一个简单的表单。在这个 html 表单上，我使用了验证。现在的问题是验证正在工作，但消息没有显示我希望它显示的内容。我尝试了下面的代码。

**模型**

```
 public $validate = array(
        'title' => array(
            'title_required' => array(
                'rule' => 'notEmpty',
                'message' => 'This is required field'
            ),
            'title_unique' => array(
                'rule' => 'isUnique',
                'message' => 'This should be unique title'
            )
        )
    ); 
```

**控制器**

```
public function add() {
        if ($this->request->data) {
            if ($this->Post->save($this->request->data)) {
                $this->Session->setFlash('Post has been added successfully');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Error occured, Please try agan later!');
            }
        }
    } 
```

**看法**

```
<h2>Add New Post</h2>
<?php
echo $this->Form->create('Post', array('action'=>'add'));
echo $this->Form->input('title');
echo $this->Form->input('body');
echo $this->Form->end('Create Post');
?> 
```

我看到的验证错误不是我在控制器中提到的消息。

![在此处输入图像描述](../Images/d8ec75c211b2b39231920168a25e40ed.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T10:52:44.560

那是内置的浏览器验证。

从 2.3 开始，HTML5 required 属性也将根据验证规则添加到输入中。

你`title`有`notEmpty`规则，所以蛋糕正在输出

`<input type="text" required="required" ..`

并且您的浏览器正在触发该消息。

**编辑：**要覆盖此行为，您可以执行以下操作：

```
$this->Form->input('title', array('required'=>false)); 
```

或者

```
$this->Form->submit('Submit', array('formnovalidate' => true)); 
```

当您提交表单时，您的模型验证将触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:29:18.277

从您的代码中，我可以看到您没有包含助手。

```
public $helpers = array('Html', 'Form', 'Session');
public $components = array('Session'); 
```

只需添加到您的控制器并尝试..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:30:31.427

您的`Form-create()`选项无效，第一个参数是模型名称，第二个是选项：

```
<h2>Add New Post</h2>
<?php
     echo $this->Form->create('Post', array('action'=>'add'));
     echo $this->Form->input('title');
     echo $this->Form->input('body');
     echo $this->Form->end('Create Post');
?> 
```

如果表单助手不知道它正在为哪个“模型”创建表单，我不会在正确的位置检查字段验证，因此，它不会输出“标题”的验证错误

[更新]上面的解决方案没有解决问题。OP修改了问题

一些想法：

1.  确保启用“调试”（App/Config/core.php 设置`Configure::write('debug', 2);`否则 CakePHP 可能正在使用您模型的“缓存”版本。

2.  如果你的模型命名不正确，Cake 可能会自动为你生成一个模型，在这种情况下你*自己的*模型从未真正使用过，试试这个进行调试，看看我们是否“获取”到你的模型：

将此添加到您的模型中；

```
public function beforeValidate($options = array())
{
     debug($this->data); exit();
} 
```

# android - 在android开发中共享私钥

> ID：14723693
> 
> 赞同：1
> 
> 时间：2013-02-06T07:24:50.133
> 
> 标签：android, eclipse, key, share, private

我正在两台机器上开发一个安卓应用程序，一台在工作，另一台在家里。但是当我在第一台机器上编译和运行时，然后转到第二台机器并更改并编译和运行签名不同的 Eclipse 错误，我首先应该卸载以前安装的应用程序。

有没有办法在机器之间共享这个私钥？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:29:20.513

*Windows->Preferences->Android->Build*包含指定密钥库文件的设置。确保此文件在您用于开发相同应用程序的所有机器上都是相同的，也许只需将其与项目文件一起放入内容存储库中。每次安装时都会随机生成密钥，但 Android SDK 使用的用户名、密码相同。无论如何，这个密钥库不能（也不应该）在生产中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:29:16.087

是的。只需从一台机器上获取密钥库，然后覆盖另一台机器上的密钥库。调试密钥库在所有安装中都具有相同的名称和密码，因此您应该能够轻松替换它们。

在 UNIX 系统上，密钥库位于`~/.android/debug.keystore`

# oracle-text - 理解\修改Oracle Text IDF（逆文档频率）评分

> ID：14723696
> 
> 赞同：0
> 
> 时间：2013-02-06T07:25:11.210
> 
> 标签：oracle-text

Oracle Text 使用 IDF 评分的一种变体。没有记录确切的算法。

在场景中，分数似乎与我在手动计算 IDF 时得到的分数不同

我想了解 oracle 如何计算分数，并可能对其进行修改。

*   有没有修改评分算法的方法？

*   似乎表 DR$indexname$I 包含 TOKEN_COUNT 字段中的词频 - 我们这对吗？

*   DR$ 表的结构是否记录在案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:14:18.990

您也许可以使用查询模板修改评分算法，例如：

```
select id from docs where CONTAINS (text,
'<query>
<textquery grammar="CONTEXT" lang="english"> mustang </textquery>
<score datatype="float" algorithm="DEFAULT" normalization_expr =Ódoc_score+SDATA(price)Ó/>
</query>')>0" 
```

这里没有更多信息[4.1.17 替代和用户定义的评分](http://docs.oracle.com/cd/B28359_01/text.111/b28303/query.htm#i1007605)

# iphone - iphone-谷歌日历

> ID：14723698
> 
> 赞同：2
> 
> 时间：2013-02-06T07:25:26.383
> 
> 标签：iphone, xcode, cocoa-touch, google-calendar-api

在一个应用程序中，我想使用 Google 日历。现在我的要求是从用户那里获取邮件 ID 和事件。现在我想将这些事件（事件意味着我的应用程序中给定的用户）显示到特定的给定邮件 ID（用户名邮件日历）中。但没有使用 iphone ical。我想直接添加到特定的邮件日历。（例如：`mail id: xx@gmail.com, event: "title:"meeting" on date: "6-2-2013""`-我从我的应用程序中获取此信息）。现在我想进入那个`xxx@gmail.com`，我想在那个邮件日历中显示事件（2013 年 6 月 2 日的会议）。我如何在不使用 iCal 的情况下做到这一点？

# powershell - 如何在 PowerShell 1.0 中使用 STA 模式？

> ID：14723705
> 
> 赞同：2
> 
> 时间：2013-02-06T07:25:45.713
> 
> 标签：powershell, sta, powershell-1.0

我在 PowerShell 中非常尴尬，我只在家里使用它来完成我自己的简单任务，在我的 Windows XP 下没有可用的升级到 PS2。下一个测试显示我的 PowerShell 1.0 默认使用 MTA 模式。

```
[threading.thread]::CurrentThread.GetApartmentState() 
```

像这样的电话......

```
PowerShell.exe –STA c:\scripts\file.ps1 
```

...总是因错误而失败：

> 一元运算符“-”后缺少表达式。在 line:1 char:2 + -S <<<< TA c:\scripts\file.ps1

看起来我的 PS1 无法识别 –STA 开关。我做错了什么？有什么办法可以在 PS1 中以 STA 模式运行我的脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-27T17:00:55.947

命令中 STA 之前的破折号字符是“–”Unicode U+2013“En Dash”，它应该是“-”Unicode U+002D“Hyphen-Minus”。您可以在浏览器控制台 (F12) 中使用此 JavaScript 函数进行尝试：

```
function getHex(character) {
    return "0x" + character.charCodeAt(0).toString(16);
}

getHex('–'); // 0x2013
getHex('-'); // 0x2d 
```

也许您从网页或 PDF 或 Word 文档中复制了它。尝试键入命令而不是复制/粘贴，它将起作用。

新版本的 PowerShell 将识别破折号的两个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T13:54:47.973

C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -Sta -File c:\scripts\file.ps1

# python - 带有 .pdb 文件的 python

> ID：14723707
> 
> 赞同：1
> 
> 时间：2013-02-06T07:25:53.293
> 
> 标签：python, bioinformatics, biopython, chemistry

我正在从事生物项目。
我有`.pdb`（蛋白质数据库）文件，其中包含有关分子的信息。

我想找出`.pdb`文件中分子的以下内容：

1.  分子质量。
2.  H键供体。
3.  H键受体。
4.  日志P。
5.  折射率。

python中是否有任何模块可以处理`.pdb`文件以找到这个？
如果没有，那么任何人都可以让我知道我该怎么做？

我发现了一些类似的模块`sequtils`，`protienparam`但他们不做这样的事情。
我已经先研究然后发布，所以，请不要投反对票。
请评论，如果你仍然反对你为什么这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T02:12:48.667

`PDB``XML`file还输出一个`PDBML`可以使用`xml`解析库轻松解析的文件

```
http://pdbml.pdb.org/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:51:57.850

A pdb file can contain pretty much anything. A lot of projects allows you to parse them. Some specific to biology and pdb files, other less specific but that will allow you to do more (setup calculations, measure distances, angles, etc.).

I think you got downvoted because these projects are numerous: you are not the only one wanting to do that so the chances that something perfectly fitting your needs exists are really high.

That said, if you just want to parse pdb files for this specific need, just do it yourself:

*   Open the files with a text editor.
*   Identify where the relevant data are (keywords, etc.).
*   Make a Python function that opens the file and look for the keywords.
*   Extract the figures from the file.
*   Done.

This can be done with a short script written in less than 10 minutes (other reason why downvoting).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T09:43:09.373

我不知道它是否符合您的需求，但[Biopython](http://biopython.org/wiki/Main_Page)看起来可能会有所帮助。

# android - Android：改变方向时缩放动画不起作用

> ID：14723714
> 
> 赞同：3
> 
> 时间：2013-02-06T07:26:09.903
> 
> 标签：android, xml, scale, android-animation

在我的 Android 应用程序中，我有一个比例动画。

```
<set xmlns:android="http://schemas.android.com/apk/res/android"   android:interpolator="@android:anim/accelerate_interpolator"   android:fillEnabled="true"  android:fillAfter="true"  >
 <scale android:fromXScale="1.0" android:toXScale="0.0"   android:fromYScale="1.0"    android:toYScale="1.0"      android:duration="32000"   />
 </set> 
```

它工作正常。它从左到右缩放视图。但我需要从右到左缩放。所以当我修改时`fromXScale="-1.0"`，动画不会发生，并且视图会立即缩放而没有动画。我的反向动画xml如下：

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"   android:interpolator="@android:anim/accelerate_interpolator"   android:fillEnabled="true"  android:fillAfter="true"  >            
  <scale android:fromXScale="-1.0" android:toXScale="0.0"   android:fromYScale="1.0"    android:toYScale="1.0"      android:duration="32000"   /> 
 </set> 
```

如何从相反方向为视图设置动画？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:14:41.670

您还应该`android:fillBefore="true"`在动画中添加一个。

在前向动画中，您的视图通常具有 1 的比例，这意味着您不需要在开始时设置它。但是在反向动画中，您从默认（即 1）开始并动画到... 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:46:36.703

使用 Pivot 解决了这个问题。通过 pivotX 和 pivotY 控制动画的方向是一种更好的做法。

# javascript - 如果 url 包含查询字符串，则重定向脚本

> ID：14723727
> 
> 赞同：-4
> 
> 时间：2013-02-06T07:27:17.180
> 
> 标签：javascript, redirect

简短：需要一个脚本来删除 URL IF EXIST 上的参数。必须是 jquery/Script/

LONG：我有一个网站，我用很多参数向其中发送流量。这些会立即使用 php 处理到 cookie。在我的 cookie 设置之后，我想刷新相同的页面但没有参数。我不能用 php 来做，因为 cookie 需要由 iframe 处理，所以在通过 iframe 设置 cookie 之后，我需要一个 jquery/script 来完成它。

多谢你们！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:31:17.850

下面的代码将删除查询字符串参数并重新加载页面

```
window.location.href = window.location.protocol+"//"+window.location.hostname+window.location.pathname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:32:40.797

窗口位置的搜索属性描述了 url 上的 GET 参数，所以 -

```
if (window.location.search != "") {
    window.location.search = "";
} 
```

您可能想[查看此问题](https://stackoverflow.com/questions/2540969/remove-querystring-from-url)以获取另一种解决方案。

并查看[window.location 上的 MDN 文档以](https://developer.mozilla.org/en-US/docs/DOM/window.location)获取更多信息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-06T07:58:21.493

我认为你需要使用类似的东西：

```
var url_update= false;
var stripped_url;
function removeparametersFromURL(url_string) {
if (url_string.indexOf("#") > 1) {
    URL = url_string.split("#")[0];
    url_update= true;
}
if (url_string.indexOf("?") > 1) {
    URL = url_string.split("?")[0];
    url_update= true;
}
return URL;
}

var stripped_url = removeparametersFromURL(top.location.href);
if(url_update){
top.location.href = stripped_url;
}

setTimeout(function(){
stripped_url = removeparametersFromURL(top.location.href);
if(url_update){
top.location.href = stripped_url;
}
},5000); //will call function after 5 seconds 
```

# ios - ZBar SDK 没有哔声

> ID：14723729
> 
> 赞同：0
> 
> 时间：2013-02-06T07:27:22.313
> 
> 标签：ios, zbar-sdk, beep

我只是使用 ZBar SDK 来扫描条形码。我希望在扫描条形码时，它可以播放哔声。虽然扫描非常好。那边没有声音。我没有在 SDK 中找到任何标志来控制声音。有人遇到这个问题吗？我是 ZBar 的新手。先感谢您。据我所知，ZXing 默认有哔声。但它只能解码 QRCode。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T07:42:54.507

ZBar iPhone SDK 不会在成功扫描时自动播放声音。不过，自己玩一个并不难：

*   将您想要播放的声音文件添加到您的应用程序中，我将其命名为“beep.mp3”。
*   将 AudioToolbox 框架添加到您的项目中。

在头文件中：

```
#import <AudioToolbox/AudioServices.h> 
```

设置（可能在 viewDidLoad 中）：

```
SystemSoundID soundID;
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef ref = CFBundleCopyResourceURL(mainBundle, (CFStringRef)@"beep.mp3", NULL, NULL);
AudioServicesCreateSystemSoundID(ref, &soundID);
self.soundID = soundID; 
```

播放声音：

```
AudioServicesPlaySystemSound(self.soundID); 
```

# c# - 在后面的代码中设置链接的可见性

> ID：14723730
> 
> 赞同：0
> 
> 时间：2013-02-06T07:27:30.347
> 
> 标签：c#, asp.net

我在源代码中有这个：

```
<a href="CreateAlbum.aspx" id="createalbumlink">                    
                Create New Album
            </a> 
```

现在我想在后面的代码中设置它的可见性。我该怎么做？我在 ListView 控件中有这个链接。我把上面的替换为

```
<asp:LinkButton ID="LinkButton1" runat="server" PostBackUrl="~/CreateAlbum.aspx"> Create New Album1</asp:LinkButton> 
```

仍然无法在代码隐藏中检测到。

源代码：

```
 <form id="form1" runat="server">

    <asp:ListView ID="lvAlbums" runat="server"
            DataSourceID="SqlDataSource1" GroupItemCount="3" 
            InsertItemPosition="LastItem">            
            <LayoutTemplate>                
                    <table border="1">
                       <tr ID="groupPlaceholder" runat="server">
                       </tr>
                    </table>                       
            </LayoutTemplate>                                              
            <GroupTemplate>
                    <tr>
                        <td ID="itemPlaceholder" runat="server">
                        </td>
                    </tr>
             </GroupTemplate>             
             <ItemTemplate>
                    <td id="Td3" width="150px" height="150px" align="center" style="background-color: #e8e8e8;color: #333333;">
                    <asp:HiddenField ID="hfPhotoID" runat="server" Value='<%# Eval("DefaultPhotID") %>' />
                    <a href='<%# "Photos.aspx?AlbumID="+Eval("AlbumID") %>'> 
                    <asp:Image CssClass="Timg" runat="server" ID="imPhoto" ImageUrl='<%# "ThumbNail.ashx?ImURL="+Eval("Photo") %>' />
                    </a>
                    <br />                    
                    <b><asp:Label ID="lblAlbumName" runat="server" Text='<%# Eval("AlbumName") %>'></asp:Label>   </b>
                    </td>                
                </ItemTemplate>

                <InsertItemTemplate>
                <td id="Td3" width="150px" height="150px" runat="server" align="center" style="background-color: #e8e8e8;color: #333333;">
                    <asp:LinkButton ID="LinkButton1" runat="server" PostBackUrl="~/CreateAlbum.aspx"> Create New Album1</asp:LinkButton>
             <%--   <a href="CreateAlbum.aspx" id="createalbumlink" runat="server">                    
                    Create New Album
                </a>--%>
                </td>              
                </InsertItemTemplate>             
            </asp:ListView>

        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:SLIITComDBConnectionString %>" 

        SelectCommand="SELECT Album.AlbumID, Album.DefaultPhotID, Album.AlbumName, PhotAlbum.Photo FROM Album INNER JOIN PhotAlbum ON Album.DefaultPhotID = PhotAlbum.PhotoID where album.userid=@userid">
       <SelectParameters>
       <asp:QueryStringParameter Name="userid" Type="int32"  QueryStringField="id" />

         <%--<asp:SessionParameter Name="userid" Type="String"  SessionField="UserId" />--%>
</SelectParameters>
        </asp:SqlDataSource>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:46:55.893

好吧，您不能`LinkButton`直接访问它，因为它在 a`ListView`中，您可以遍历 ListView 中的每个项目并使用找到链接按钮[`FindControl`](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)，然后设置 Visible 属性。就像是：

```
foreach (ListViewItem item in listView.Items)
{
    LinkButton linkButton = item.FindControl("LinkButton1") as LinkButton;
    if (linkButton != null)
        linkButton.Visible = false;
} 
```

以上将禁用`LinkButton`所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:30:15.530

在后面的代码中的某处执行此操作：

```
LinkButton1.Visible = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:30:18.057

```
LinkButton1.Visible = false; //control will not rendered
LinkButton1.Attribute["styles"] = "display:none"; // control will be hidden 
```

您也可以使用标签，但您必须添加 runat="server" 参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:29:57.630

使用 LinkBut​​ton 的 OnClick 事件处理程序并在此处切换可见性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T07:30:05.360

**编辑**

尝试使用 FindControl：

```
LinkButton LinkButton1 = (LinkButton)ListView1.FindControl("LinkButton1");
LinkButton1.Visible = false; 
```

# sql - 根据同一个表的两个条件更新表

> ID：14723731
> 
> 赞同：0
> 
> 时间：2013-02-06T07:27:37.147
> 
> 标签：sql, oracle

我有一个表，其中包含`book`、`startyear`和`endyear`等列`author`。

我需要根据以下条件同时更新`startyear`和列，`endyear`

```
STARTYEAR = ENDYEAR where STARTYEAR=0 and ENDYEAR != 0 
also
ENDYEAR = STARTYEAR  where ENDYEAR =0 and STARTYEAR != 0 
```

这是可能的

```
UPDATE Table SET STARTYEAR = ENDYEAR WHERE STARTYEAR=0 AND ENDYEAR<>0; 
UPDATE Table SET ENDYEAR = STARTYEAR  WHERE ENDYEAR =0 AND STARTYEAR<>0; 
```

如何在一个查询中编写这两个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:30:58.383

```
update table
set 
startYear = case when startyear = 0 and endyear<>0 then endyear else startYear end,
endYear = case when endyear = 0 and startyear <> 0 then startyear else endYear end
where startyear = 0 or endyear = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T07:41:59.107

另一种方法是：

```
UPDATE Table 
SET STARTYEAR = STARTYEAR + ENDYEAR
  , ENDYEAR   = STARTYEAR + ENDYEAR
WHERE STARTYEAR = 0 AND ENDYEAR <> 0
   OR ENDYEAR = 0 AND STARTYEAR <> 0 ; 
```

但我真的没有看到这样做的任何理由。您可以在事务中使用您拥有的 2 语句方式。它甚至可能比任何复杂的单一语句更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:32:33.113

您可以使用或更新机器人字段，除非您有触发器阻止您在 startyear = endyear = 0 的情况下执行此操作；

```
UPDATE Table SET STARTYEAR = STARTYEAR+ ENDYEAR, ENDYEAR = STARTYEAR+ENDYEAR WHERE STARTYEAR=0 OR ENDYEAR=0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:32:55.313

您不能在一个语句中更新多个表，但是，您可以使用事务来确保将两个 UPDATE 语句视为一个。您还可以对它们进行批处理以避免往返。

```
BEGIN TRANSACTION

UPDATE Table SET STARTYEAR = ENDYEAR WHERE STARTYEAR=0 AND ENDYEAR<>0; 

UPDATE Table SET ENDYEAR = STARTYEAR  WHERE ENDYEAR =0 AND STARTYEAR<>0;

COMMIT 
```

但在你的情况下，你也可以使用类似[这篇文章](https://stackoverflow.com/questions/412101/is-it-possible-to-perform-multiple-updates-with-a-single-update-sql-statement)中的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T07:37:13.283

这应该工作，

```
update test
   set startyear = (case when startyear = 0 AND endyear <> 0 then endyear else startyear end),
       endyear   = (case when endyear = 0 AND startyear <> 0 then startyear else endyear end); 
```

# iphone - 在我的 iphone 应用程序中收到内存警告。

> ID：14723733
> 
> 赞同：0
> 
> 时间：2013-02-06T07:27:40.423
> 
> 标签：iphone, memory-management

我正在使用 ios 相机并将图像上传到我们的服务器，当我跨越 40 多个图像时，我收到内存警告，我的应用程序也自动退出，我无法解决这个问题，任何人都可以帮助我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:34:40.397

查看这些链接：

[我收到内存警告，我的应用程序崩溃了。它会杀死自动释放对象吗？](https://stackoverflow.com/questions/9965749/i-received-memory-warning-and-my-app-crashed-does-it-kill-autorelease-objects)

[如何在应用程序中捕获警告以进行崩溃报告：收到内存警告](https://stackoverflow.com/questions/11468090/how-to-catch-warning-in-app-for-crash-reporting-received-memory-warning)

[内存警告和崩溃：如何处理](https://stackoverflow.com/questions/2377887/memory-warning-and-crash-how-to-handle-it)

[http://www.neglectedpotential.com/2012/04/testing-memory-warnings-in-ios-applications/](http://www.neglectedpotential.com/2012/04/testing-memory-warnings-in-ios-applications/)

# django - 实际使用了 Django 的通用类视图吗？

> ID：14723740
> 
> 赞同：0
> 
> 时间：2013-02-06T07:28:10.750
> 
> 标签：django

当我在我的第一个 Django 项目中时，我现在发现了 Django 的通用类视图。我不知道有基于类的视图或通用视图。我已经制作了自己的类视图，但现在我正在考虑重构。唯一的问题是我不喜欢这些 Django 内置视图。我不喜欢把东西放在 urls.py 中，我自己的视图有时会互相调用（它们不返回结果，只是添加到上下文中）......

无论如何，我很好奇其他人在做什么？Django 的内置通用视图是否真的在现实生活中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:36:32.967

mixin 是使用基于类的泛型视图的好方法。

[这](http://lukeplant.me.uk/blog/posts/djangos-cbvs-were-a-mistake/)是基于类的视图的优缺点的一个很好的比较

# html - 在字节级别延迟加载 html

> ID：14723745
> 
> 赞同：1
> 
> 时间：2013-02-06T07:28:44.130
> 
> 标签：html, lazy-loading

我知道诸如无限滚动之类的事情，我可以在其中加载 HTML 的第 (n+1) 页并将其放入当前文档中，但是有没有任何方法可以分块加载*单个*非常大的 html 文档并显示这些当他们到达时大块？

我在想象一个 'loader' html 文档，使用合适的 javascript 对`accept-ranges`超大 html 进行类型查询，收集前 50 Kb，将所有完整的 html 元素传递给页面 DOM，将其余部分保留在缓冲区中请求下一个 50 Kb。此过程将重复，直到页面完全加载。

这种功能可以完全由浏览器提供，该浏览器显示已完成下载的页面内容 - 但我不确定有多少人可以做到这一点并在其余的到达时保持响应（即可用）。

欢迎任何想法！谢谢

# ios - 我以前没见过的 CGRect 语法

> ID：14723747
> 
> 赞同：26
> 
> 时间：2013-02-06T07:28:55.907
> 
> 标签：ios, core-graphics

我在一些示例代码中看到了下面的语法，但不确定我是否理解它。

```
 CGRect imageRect = (CGRect){.size = baseImage.size}; 
```

这是否只是初始化`CGRect`等价物的简写方式：

```
 CGRect imageRect = CGRectMake(0,0,baseImage.size.width, baseImage.size.height); 
```

除了稍微少一点打字之外，这种语法还有什么好处吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-06T07:55:06.947

那是[C99 初始化语法](https://stackoverflow.com/questions/330793/how-to-initialize-a-struct-in-ansi-c99)。您可以将其与任何结构一起使用。

Objective-C 的主要优点是它为您提供了一些非常类似于 Objective-C 的语法，其中字段接近值而不是通过定位隐含。（这并不是说这是故意相似，或者这是唯一的优势。但它很好。）

有时打字会稍微*多一些*，但我现在到处都在使用它。

考虑：

```
CGRect a = CGRectMake(a+c/2, b+d/2, c, d); 
```

为了理解这一点，您需要了解参数的顺序。您还需要能够用眼睛轻松捕捉逗号。在这种情况下，这很容易，但如果表达式更复杂，您可能首先将它们存储在一个临时变量中。

C99方式：

```
CGRect a = (CGRect){
    .origin.x = a+c/2,
    .origin.y = b+d/2,
    .size.width = c,
    .size.height = d
}; 
```

它更长，但更明确。无论表达式有多长，也很容易遵循分配给什么的内容。它也更像是一种 Objective-C 方法。毕竟，如果 CGRect 是一个类，它可能看起来像这样：

```
CGRect *a = [[CGRect alloc] initWithOriginX:x originY:y width:w height:h]; 
```

您还可以执行以下操作：

```
CGRect a = (CGRect){
    .origin = myOrigin,
    .size = computedSize
}; 
```

在这里，您正在使用 a`CGPoint`和构建一个矩形`CGSize`。编译器理解`.origin`期望 a`CGPoint`和`.size`期望 a `CGSize`。你已经提供了。都是肉汁。

等效代码是`CGRectMake(myOrigin.x, myOrigin.y, size.width, size.height)`. 通过使用`CGRectMake`，您不再向编译器表达相同的含义。它不能阻止您将部分尺寸分配给原点。它也不会阻止您将宽度分配给高度。它甚至没有给你一个很好的线索来判断哪个是 X 和 Y。如果你使用过首先提供垂直坐标的 API，你会弄错的。

您也可以从结构中分配部分，也可以从浮动中分配部分：

```
CGRect a = (CGRect){
    .origin = myOrigin,
    .size.width = c,
    .size.height = d
}; 
```

该`CGRectMake`功能早于 C99。我没有这方面的证据，但我认为如果 C99 先出现，`CGRectMake`可能根本就不存在；当您的语言无法直接执行初始化时，这是您编写的那种硬壳函数。但现在确实如此。

基本上，如果您使用它一段时间，您可能会更喜欢 C99 语法。它更明确、更灵活、更类似于 Objective-C 并且更难搞砸。

不幸的是，从 4.6 开始，Xcode 在 C99 字段初始值设定项列表中时不会自动完成结构字段名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T07:44:03.457

这不仅是简写语法，而且在您只想更改大小而不更改原点时也很有用，`CGRect`反之亦然。

例如：我只想改变大小和位置有一个复杂的语法，我不想改变它。正常情况下，我会做

```
CGRect imageRect = CGRectMake(sprite.origin.x,sprite.origin.y,40, 60); 
```

使用其他语法我会做

```
CGRect imageRect = (CGRect){.size = sprite.size}; 
```

我们也可以直接使用加法，减法和乘法，例如。

```
 CGRect imageRect = (CGRect){.size = ccpAdd(sprite.size,addsize)}; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:44:15.063

它看起来像 C99 / GCC 样式初始化[http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)

# java - 在java中复制大型数组的最有效方法

> ID：14723748
> 
> 赞同：3
> 
> 时间：2013-02-06T07:29:00.040
> 
> 标签：java, android, performance

我想复制一个大的整数值数组，比如 form array`a`到 array `b`。我找到了几种方法来做到这一点，包括：

```
int[] a = new int[]{1,2,3,4,5};
int[] b = new int[5];

System.arraycopy( a, 0, b, 0, a.length ); 
```

和

```
int[] a = new int[]{1,2,3,4,5};
int[] b = (int[])a.clone(); 
```

由于这是在移动设备上完成的，我希望能够最有效地完成它。

请告诉我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T07:30:34.053

**System.arraycopy**是更好的方法。

**原因：** 它通过本机代码实现，因此效率更高。**Josh Bloch**建议（在 Effective Java 中）避免使用**clone()**方法来复制/克隆对象。

请参考：[Effective Java: Analysis of the clone() method](https://stackoverflow.com/questions/11540792/effective-java-analysis-of-the-clone-method)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:32:02.553

System.arraycopy(a, 0, b, 0, a.length); 是一个很好的优化函数，如果你构建一个新对象，执行会更慢..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T07:36:27.417

是的，每个人都说这`arraycopy()`更好，但大多数人倾向于忘记 Dalvik VM*不是*Oracle VM，并且他们链接到的来源指的是 Oracle VM。我的猜测也是`arraycopy()`会更快。

**然而**

如果您真的非常需要将此副本进行最优化，**只需对这两种方法进行计时**并查看它们的性能。如果您真的想知道真正的答案，那总是要走的路。尤其是在您的目标设备上执行此操作，因为它的行为可能会因设备而异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T07:42:34.093

我认为这是制作数组副本的最佳方式

```
int[] b = Arrays.copyOf(a, a.length); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T07:31:10.280

`System.arraycopy` 是本机实现，比克隆更高效。`memorycopy`它可以在单个（[memcpy](http://www.cplusplus.com/reference/cstring/memcpy/)）中复制数组。

在维基百科上找到一篇文章 - [java 克隆的缺点和替代方案](http://en.wikipedia.org/wiki/Clone_%28Java_method%29)

# android - 与应用生命周期密切相关的本地服务实现

> ID：14723754
> 
> 赞同：1
> 
> 时间：2013-02-06T07:29:34.423
> 
> 标签：android, android-activity, android-service

在我的应用程序中。我已经扩展了应用程序类，比如 MyApp，我很少有活动说 A、B、C、D，其中 A 是默认活动或根活动。我想在 MyApp 的 OnCreate 中启动一个服务（比如 MyService），并在用户从我的应用程序注销时停止它，

但是，我需要一种强大的方式来在我的活动（A、B、C、D）、MyApp 和 MyService 之间进行通信。现在应用程序从内存中第二次启动。MyApp 的 OnCreate 不会被调用，所以我想从活动 A 内的 SignIn 按钮的 OnClick 启动服务。现在我有很多问题：-

1.  我已经尝试过 startService 和 bindService。startService 的问题是我没有取回服务参考以供将来使用。如果我使用 bindService 将使我的服务在整个应用程序生命周期中可见，直到我明确停止它。哪种方式适用于我的情况？

2.  在 Service 和 MyApp / Activities 之间实现通信的最佳方式是什么，反之亦然？通信是指两种类型的通信，1\. 需要 UI 线程，即启动一些活动，显示一些对话框等。2\. 类似 myService.doSomehing() 的东西。

3.  服务有一个线程进行网络通信，在应用程序的生命周期内不应关闭。START_STICKY 对我有用，否则我需要为此做出额外安排。

这个应用程序应该为 GingerBread+ 设备运行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:45:17.970

在您的扩展应用程序 oncreate 中绑定服务并创建一个公共方法 (getBinding)，该方法返回该绑定对象......在您的根/默认活动“A”中，通过 getBinding 方法对强制转换的 getApplication 对象检索 ..当所有活动关闭时解除绑定（与每个 getBinding 方法保持计数器）

检查这个[干净地绑定/取消绑定到应用程序中的服务](https://stackoverflow.com/questions/9364230/cleanly-binding-unbinding-to-a-service-in-an-application)

所以对于 1) 绑定服务 2) 绑定 obj 3) START STICKY 就足够了

# php - 如何在php中为已经压缩的文件提供下载链接

> ID：14723757
> 
> 赞同：0
> 
> 时间：2013-02-06T07:29:43.323
> 
> 标签：php, zip

我有用于创建一些文本文件的 zip 文件夹的 php 脚本

```
 <?php
  $path = "path\to\files";
  $files = array($path.'\ionic interaction.txt',$path.'\file1.txt',$path.'\file2.txt',$path.'\file3.txt',$path.'\file3.txt');
  $folder = $_POST['filename'];
  $zipname = $folder.'.zip';
  echo '<form action="download.php" method="post" name="zippass2download"><input    type="hidden" name="zipname" value="'.$zipname.'"></form>';
  $zip = new ZipArchive;
  $zip -> open($zipname, ZipArchive::CREATE);
  foreach($files as $file)
   {
     $zip -> addFile($file);
   }
  $zip -> close();
  ?> 
```

在该脚本旁边，我创建了一个超链接来下载在第一个脚本中创建的 zip 文件夹。

```
 <a href="download.php">Download</a> 
```

在 download.php 我有以下代码

```
<?php
$path2zip = 'C:/wamp/www/PPInt';
$tobezipped = $_POST['zipname'];
header('Content-disposition: attachment; filename=$tobezipped');
header('Content-type: application/zip');
readfile('$path2zip/$tobezipped');
?> 
```

不明白问题出在哪里。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:34:08.893

$tobezipped = $_POST['zipname'];

在调用 download.php 时发出的获取请求中未设置。Rember HTTP 是无状态的，所以在您生成文件之后。单击链接时，POST 参数不会出现在下一个 GET 请求中。

您可能需要将 zipname / 路径附加到您的 download.php 链接，如“download.php?tobezipped=zipname.zip”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:52:22.450

“download.php”没有得到“$_POST['zipname']”，因为您没有将表单发布到它，而是提供了链接，请尝试提供用于发布表单的按钮，该按钮隐藏了文件名的输入。下面“Dasun”给出的代码的另一件事是检查您的文件和 zip 文件的相对 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:39:27.140

试试下面的代码

```
<?php 
$file_name = $_POST['zipname'];
$file_url = 'C:/wamp/www/PPInt'. $file_name;
header('Content-Type: application/octet-stream');
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=\"".$file_name."\""); 
readfile($file_url);
?> 
```

# sql - 无法创建程序

> ID：14723766
> 
> 赞同：0
> 
> 时间：2013-02-06T07:30:14.743
> 
> 标签：sql, oracle, plsql

表一：

```
PROTOCOL      VARCHAR2(20) 
```

表 b：

```
YEAR          NUMBER(4)
MONTH         VARCHAR2(20)
PROTOCOL      VARCHAR2(20)
DATE1         DATE 
```

我的程序代码：

```
CREATE PROCEDURE his
    @Year NUMBER(4),
    @Month VARCHAR2(20)
AS
BEGIN
    SET NOCOUNT ON;

    BEGIN TRANSACTION trninsert
        DECLARE @@date DATE
        SET @@date = sysdate;
        INSERT INTO b (Year, month, date1, protocol)
        (select @Year, @Month, @@date,* from a)
    COMMIT TRANSACTION trninsert
    END TRY
    BEGIN CATCH
        ROLLBACK TRANSACTION trninsert
    END CATCH
END 
```

我正在使用 plsql 开发人员，它在程序中显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:55:45.713

你已经写了一个 mysql 类型的语法。

甲骨文将是：

```
CREATE PROCEDURE his(p_year  b.year%type,
                     p_month b.month%type)
AS
BEGIN
  INSERT INTO b (Year, month, date1, protocol)
  select p_year, p_month, sysdate, a.protocol
    from a;
  commit;
END; 
```

尽管在程序中提交的形式不好。

例如：

```
SQL> CREATE PROCEDURE his(p_year  b.year%type,
  2                       p_month b.month%type)
  3  AS
  4  BEGIN
  5    INSERT INTO b (Year, month, date1, protocol)
  6    select p_year, p_month, sysdate, a.protocol
  7      from a;
  8    commit;
  9  END;
 10  /

Procedure created.

SQL> insert into a values('prot a');

1 row created.

SQL> exec his(2012, 10)

PL/SQL procedure successfully completed.

SQL> select * from b;

      YEAR MONTH                PROTOCOL             DATE1
---------- -------------------- -------------------- ---------
      2012 10                   prot a               06-FEB-13

SQL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:01:58.167

您的程序格式无效：更改您的整个结构，

```
 CREATE [OR REPLACE] PROCEDURE procedure_name
    [ (parameter [,parameter]) ]

IS
    [declaration_section]

BEGIN
    executable_section

[EXCEPTION
    exception_section]

END [procedure_name]; 
```

更多参数：点击[这里](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6009.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:02:44.363

是的，你没有使用 plsql 语法：

代码将是：

```
CREATE OR REPLACE PROCEDURE his
    (Year b.year%type,
    Month b.month%type)
AS
BEGIN
        INSERT INTO b (Year, month, date1, protocol)
        VALUES select Year, Month, sysdate,a.protocol from a ;
COMMIT;

END; 
```

# windows-8 - 使用 WinJS 检索用户 ID

> ID：14723778
> 
> 赞同：1
> 
> 时间：2013-02-06T07:31:11.743
> 
> 标签：windows-8, winjs

我有一个执行计算的应用程序，我需要通过 web 服务将此结果存储在数据库中。我需要将此结果与一些用户标识一起存储在如下表结构中：

用户ID| 测试结果

我遇到的问题是我不知道如何获取“user_id”。是否有一个 API 可以简单地检索商店用户名/电子邮件？如果没有，最简单的方法是什么？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:45:31.657

WinRT 中有一个类将为您提供用户名（域名和显示名称）：

看看 [Windows.System.UserProfile.UserInformation](http://msdn.microsoft.com/en-us/library/windows/apps/br241871.aspx)

或者您可以使用第三方身份验证，例如 Facebook 登录。[在http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)有一个应用程序示例

# android - 在 Android 中单击时地图标记会引发错误

> ID：14723783
> 
> 赞同：0
> 
> 时间：2013-02-06T07:31:52.547
> 
> 标签：android, android-mapview, android-maps

我正在制作一个显示带有 5 个连接坐标的谷歌地图的应用程序。我可以用图标标记它们。现在，当我们单击这些标记时，我试图显示一个对话框，但出现错误。请找到如下代码。任何帮助将非常感激。

这是我的主要课程。

```
public class MapConnect extends MapActivity implements LocationListener { 

    private static final String TAG = "LocationActivity";
//  public List<Overlay> mapOverlays;
//  public MyOwnLocationOverlay myLocationOverlay;
    public static MapConnect instance;
    public MapView mapView; 
    protected LocationManager locationManager;
    public Button retrieveLocationButton;
    Geocoder geocoder; 
    TextView locationText;
    Location location;
    MapController mapController;
    CountDownTimer locationtimer;
    GeoPoint point1 = new GeoPoint(29391748,13436279);
    GeoPoint point2 = new GeoPoint(28835050,14128418);
    GeoPoint point3 = new GeoPoint(28256006,13941650);
    GeoPoint point4 = new GeoPoint(28401065,13029785);
    GeoPoint point5 = new GeoPoint(29027355,12546387);

        //  private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
//  private static final long MINIMUM_TIME_BETWEEN_UPDATES = 9000; // in Milliseconds
//    MapOverlay mapOverlay = new MapOverlay();
    @Override        
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_map_connect);

        mapView = (MapView) findViewById(R.id.map_view);

        MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this, mapView);
        mapView.getOverlays().add(myLocationOverlay);
        mapView.postInvalidate();
        myLocationOverlay.enableMyLocation();
        mapView.setBuiltInZoomControls(true);
        locationText = (TextView)this.findViewById(R.id.lblLocationInfo);
        mapController = mapView.getController(); 
        mapView.setSatellite(false);
        mapController.setZoom(8);
        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

//        GeoPoint point1 = new GeoPoint(29391748,13436279);
//        GeoPoint point2 = new GeoPoint(28835050,14128418);
//        GeoPoint point3 = new GeoPoint(28256006,13941650);
//        GeoPoint point4 = new GeoPoint(28401065,13029785);
//        GeoPoint point5 = new GeoPoint(29027355,12546387);
          MapOverlay mapOvlay = new MapOverlay(point1, point2,point3,point4,point5);
          //mapController.setCenter(point4);
          mapView.getOverlays().add(mapOvlay);

          List<Overlay> mapOverlays = mapView.getOverlays();
          Drawable drawable = this.getResources().getDrawable(R.drawable.pin);
          HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable);
          OverlayItem overlayitem  = new OverlayItem(point1, null, null);
          OverlayItem overlayitem1 = new OverlayItem(point2, null, null);
          OverlayItem overlayitem2 = new OverlayItem(point3, null, null);
          OverlayItem overlayitem3 = new OverlayItem(point4, null, null);
          OverlayItem overlayitem4 = new OverlayItem(point5, null, null);
          itemizedoverlay.addOverlay(overlayitem);
          itemizedoverlay.addOverlay(overlayitem1);
          itemizedoverlay.addOverlay(overlayitem2);
          itemizedoverlay.addOverlay(overlayitem3);
          itemizedoverlay.addOverlay(overlayitem4);
          mapOverlays.add(itemizedoverlay);

    }

    public class MapOverlay extends com.google.android.maps.Overlay {

        private GeoPoint mGpt1;
        private GeoPoint mGpt2;
        private GeoPoint mGpt3;
        private GeoPoint mGpt4;
        private GeoPoint mGpt5;

        protected MapOverlay(GeoPoint gp1, GeoPoint gp2,GeoPoint gp3,GeoPoint gp4,GeoPoint gp5 ) {
           mGpt1 = gp1;
           mGpt2 = gp2;
           mGpt3 = gp3;
           mGpt4 = gp4;
           mGpt5 = gp5;
           mapController.setCenter(gp3);
        }
        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
              long when) {
           super.draw(canvas, mapView, shadow);
           Paint paint;
           paint = new Paint();
           paint.setColor(Color.RED);
           paint.setAntiAlias(true);
           paint.setStyle(Style.STROKE);
           paint.setStrokeWidth(2);
           Point pt1 = new Point();
           Point pt2 = new Point();
           Point pt3 = new Point();
           Point pt4 = new Point();
           Point pt5 = new Point();
           Projection projection = mapView.getProjection();
           projection.toPixels(mGpt1, pt1);
           projection.toPixels(mGpt2, pt2);
           projection.toPixels(mGpt3, pt3);
           projection.toPixels(mGpt4, pt4);
           projection.toPixels(mGpt5, pt5);
           canvas.drawLine(pt1.x, pt1.y, pt2.x, pt2.y, paint);
           canvas.drawLine(pt2.x, pt2.y, pt3.x, pt3.y, paint);
           canvas.drawLine(pt3.x, pt3.y, pt4.x, pt4.y, paint);
           canvas.drawLine(pt4.x, pt4.y, pt5.x, pt5.y, paint);
           canvas.drawLine(pt5.x, pt5.y, pt1.x, pt1.y, paint);
           return true;
        }

     }

//       public void drawMyLocation(Canvas canvas,MapView mapView,location,point,Long 1000);

       public void showsat(View view){
        mapView.setSatellite(true);
       }

       public void showcurrentlocation(View view) {

//      mapView.getOverlays().clear(); 
//      mapOverlays = mapView.getOverlays();
//      
//      myLocationOverlay = new MyOwnLocationOverlay(GMapsActivity.this, mapView);  
//      myLocationOverlay.setMeters(10);      
//      myLocationOverlay.enableCompass();        
//      myLocationOverlay.enableMyLocation();        
//      myLocationOverlay.runOnFirstFix(new Runnable() {    
//          public void run() {              
//              mapController.animateTo(myLocationOverlay.getMyLocation());    
//              }       
//          });      
//      mapView.getOverlays().add(myLocationOverlay);   }
        mapView.setSatellite(false);        
        geocoder = new Geocoder(MapConnect.this);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        // add this overlay to the MapView and refresh it

        if (location != null) {     
            Log.d(TAG, location.toString());   
            this.onLocationChanged(location); //<6>  

            } 

        }
//    
       @Override
       public void onBackPressed() {
           // do something on back.
           MapOverlay mapOvlay = new MapOverlay(point1, point2,point3,point4,point5);
           mapView.getOverlays().add(mapOvlay);
          // finish();
           return;
       }    
       public void finish() {
           // do something on back.
           finish();
           return;
       }        

    @Override  
            public void onLocationChanged(Location location) {
            Log.d(TAG, "onLocationChanged with location " + location.toString());   
            String text = String.format("Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f", location.getLatitude(),location.getLongitude(), location.getAltitude(),
                    location.getBearing());
            this.locationText.setText(text);  

                    try {     
                        List<Address> addresses = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 10); //<10> 
                        for (Address address : addresses) {    
                            this.locationText.append("\n" + address.getAddressLine(0));   
                            }          
                        int latitude = (int)(location.getLatitude() * 1000000);  
                        int longitude = (int)(location.getLongitude() * 1000000);  
                        GeoPoint point = new GeoPoint(latitude,longitude);    
                        mapController.animateTo(point); //<11> 

                    }
                    catch (IOException e) {  
                        Log.e("LocateMe", "Could not get Geocoder data", e);   
                        }
//         
    }
                    @Override
                    public void onProviderDisabled(String provider) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onProviderEnabled(String provider) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onStatusChanged(String provider, int status,Bundle extras) {
                        // TODO Auto-generated method stub

                    }

//                  @Override  protected void onResume() { 
//                  LocationListener locationListener = new LocationListener(){
//                        super.onResume(); 
//                  locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 10, this); //<7> 
//                  }  
//              @Override  protected void onPause() { 
//                  super.onPause();   
//                  locationManager.removeUpdates(this); //<8>
//                      
//                  }

//@Override
//protected void onResume() {
//    super.onResume();
//
//    // when our activity resumes, we want to register for location updates
//
//
//    myLocationOverlay.enableMyLocation();
//
//}
//
//@Override
//protected void onPause() {
//    super.onPause();
//
//    // when our activity pauses, we want to remove listening for location updates
//
//    myLocationOverlay.disableMyLocation();
//
//}

      @Override
        protected boolean isRouteDisplayed() {
           return false;

        }
} 
```

现在是 Itemized Overlay 类：

```
public class HelloItemizedOverlay extends ItemizedOverlay {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;

    public HelloItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
            }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

//  @Override
//    protected boolean onTap(int index) {
//      AlertDialog.Builder dialog = new AlertDialog.Builder(MapConnect.instance);
//    switch (index) {
//            case 0:
//                Toast.makeText(MapConnect.instance, "GeoLocation : 0",
//                        Toast.LENGTH_LONG).show();
//                dialog.show();
//            break;
//        }
//
//        return true;
//    }

    @Override
    protected boolean onTap(final int index) {

              final OverlayItem id = mOverlays.get(index);
              AlertDialog.Builder dialog = new AlertDialog.Builder(MapConnect.instance);
              dialog.setTitle("your title");
              dialog.setMessage("youmessage");
              //dialog.setNegativeButton("Cancel", null);
              dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int index) {
                  dialog.dismiss();
                    }
              });
              dialog.show();
              return true;

              }

    } 
```

这是我得到的 Logcat 错误：

```
2-06 07:17:34.822: E/InputEventReceiver(6112): Exception dispatching input event.
02-06 07:17:34.822: E/MessageQueue-JNI(6112): Exception in MessageQueue callback: handleReceiveCallback
02-06 07:17:34.893: E/MessageQueue-JNI(6112): java.lang.NullPointerException
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:143)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.app.AlertDialog$Builder.<init>(AlertDialog.java:360)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at com.example.mapconnect.HelloItemizedOverlay.onTap(HelloItemizedOverlay.java:58)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:358)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:562)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at com.google.android.maps.MapView.onTouchEvent(MapView.java:685)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.View.dispatchTouchEvent(View.java:7239)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-06 07:17:34.893: E/MessageQueue-JNI(6112):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:38:44.427

试试这个，而不是`null`空值希望这能解决你的问题

```
 OverlayItem overlayitem  = new OverlayItem(point1, "", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:47:48.577

我得到了答案，因为我犯了一个愚蠢的错误。我没有初始化主要活动的上下文。在 Oncreate 中添加以下内容后，它起作用了。实例=MapConnect.this

# linux-kernel - 如何访问内核空间中的内核参数

> ID：14723784
> 
> 赞同：2
> 
> 时间：2013-02-06T07:31:56.703
> 
> 标签：linux-kernel, kernel-module, procfs

**这是我的实验室任务之一：**我必须在此处创建一个 proc 条目：**/proc/sys/kernel/**并且*我必须编写一个系统调用来为我刚刚添加的 proc 条目的不同值操作用户空间变量。*例如：假设用户空间变量为 1，proc 条目为 0 或 1。现在系统调用应将用户空间变量增加 1（如果 proc 条目为 0/off）或将其乘以 2（如果 proc 条目为 1 /上）

**我执行以下操作来添加 proc 条目：**我通过在 kernel/sysctl.c 中的文件的内核 ctl 表部分下添加一个结构来创建一个条目 xxx。编译内核，系统使用该内核启动良好。该条目也作为 /proc/sys/kernel/xxx 添加到 proc 目录中。我现在可以从用户空间读取或写入它。我同时做了 cat 和 echo 来读写。

**我在系统调用中做了以下事情：**我写了一个系统调用来读取用户空间变量。我还完成并测试了 access_ok、copy_from user、copy_to_user 等等。我还完成了操作用户空间变量以始终递增（现在）。

**我面临的问题：**现在，我必须添加一个 if 条件来检查“xxx”值，以确定我应该增加还是乘以用户空间变量。这就是我卡住的地方。不是在写系统调用。我不知道如何阅读这个 proc 条目“xxx”。

1.  我可以使用文件处理吗？
2.  如果是这样，我应该在我的系统调用中使用 open() 系统调用吗？它会起作用吗？

当我检查时，有 sysctl 系统调用，但现在似乎已弃用。这个[IBM 教程](http://www.ibm.com/developerworks/library/l-proc/index.html)讨论了阅读 proc 条目。但是 create_proc_entry 不适用于 /proc/sys/kernel 目录中的参数，对吗？如果是这样，我怎么能使用 read proc entry 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:35:54.383

“但是，现在我得写一个系统调用来读取xxx的值。”

我怀疑术语“系统调用”是在正式意义上使用的，并且您被要求向内核添加一个新的系统调用（类似于 open、read、mmap、signal 等）以返回您的值。

请参阅[在 Linux 内核 3.3 中添加新系统调用](https://stackoverflow.com/questions/9977968/adding-a-new-system-call-in-linux-kernel-3-3)

# jquery-mobile - jQuery Mobile 弹出内容高度超过窗口高度

> ID：14723788
> 
> 赞同：3
> 
> 时间：2013-02-06T07:32:25.013
> 
> 标签：jquery-mobile, popup

[jQuery Mobile 弹出窗口](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/)的尺寸限制为[左侧和右侧的边距为 15px，顶部和底部的边距为 30px](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/options.html)。如果内容对于这些约束来说太大，那么弹出窗口会变长（而不是更宽），因此必须滚动整个页面才能查看弹出内容。

我需要更改此行为，以使弹出窗口的尺寸永远不会超过窗口的高度，并且使内容在弹出窗口中垂直滚动。

因此可以限制弹出窗口的大小：

```
$('#popup').on({
  popupbeforeposition: function() {
    var maxHeight = $(window).height() - 30
    $('#popup').css('max-height', maxHeight + 'px')
  }
}) 
```

...但弹出内容是相同的，通过弹出窗口的底部并仍然强制用户滚动页面，而不是弹出窗口中的内容。

**如何允许弹出内容在弹出窗口中垂直滚动？**

![弹出内容超出窗口底部](../Images/60f0c2206b2b2a48bd65757c2a53d1ca.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T13:19:27.813

你应该使用：

```
$('#popup').css('overflow-y', 'scroll'); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/mmRnq/](http://jsfiddle.net/Gajotres/mmRnq/)

**最后的笔记**

如果您想了解更多关于如何自定义 jQuery Mobile 页面和小部件的信息，请查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**。它附带了许多工作示例，包括为什么 !important 对于 jQuery Mobile 是必需的。

# android - 如何在android中更改蓝牙适配器的扫描模式。？

> ID：14723790
> 
> 赞同：2
> 
> 时间：2013-02-06T07:32:26.943
> 
> 标签：android, android-intent, bluetooth, discoverability

目前我正在开发一个蓝牙应用程序，我需要在单击按钮时将扫描模式从更改`SCAN_MODE_CONNECTABLE_DISCOVERABLE`为`SCAN_MODE_CONNECTABLE`。

我使用以下意图将其设置为可发现：

```
Intent discoverableIntent = new Intent( BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE); discoverableIntent .putExtra( BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, DISOVERABLE_DURATION);
startActivityForResult(discoverableIntent, REQUEST_DISCOVERABLE_BT); 
```

* * *

我在哪里设置`DISOVERABLE_DURATION=300`；

现在我想跳过两者之间的可发现性，并将其状态更改为`SCAN_MODE_CONNECTABLE`仅。

请给我一个合适的解决方案../

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-27T09:30:21.477

好吧，这是一个很老的问题，但是您可以在未经用户许可的情况下切换蓝牙的扫描模式，并且（据我测试）无限时间。这将需要在 Android API 上使用反射，因此这不是官方 API。当然，您使用它需要您自担风险 :) 下面是我用来使 BT 适配器可被发现的代码：

```
private boolean setBluetoothScanMode(int scanMode){
    Method method = null;
    final BluetoothAdapter btAdapter = btManager.getAdapter();

    if(!btAdapter.isEnabled()){
        Log.d(LCAT, "BT adapter is off, turning on");
        btAdapter.enable();
    }

    try {
        method = btAdapter.getClass().getMethod("setScanMode", int.class);
    } catch (SecurityException e) {
        return false;
    } catch (NoSuchMethodException e) {
        return false;
    }

    try {
      method.invoke(btAdapter, scanMode);
    } catch (IllegalArgumentException e) {
        return false;
    } catch (IllegalAccessException e) {
        return false;
    } catch (InvocationTargetException e) {
        return false;
    }
    return true;
} 
```

您还需要权限：

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

在此设备应处于扫描模式后，您可以通过传递 int scanMode 参数进行选择。它正在使用 Android API 23。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T15:39:07.680

您无法使用第三方（非内核/非系统）应用程序设置 4.2 及更高版本的 Android 设备的扫描模式。您只能启用发现 ( `SCAN_MODE_CONNECTABLE_DISCOVERABLE`)，并可选择使用 设置特定持续时间`EXTRA_DISCOVERABLE_DURATION`。[您可以通过将持续时间参数设置为 1](https://stackoverflow.com/a/3113400/1146308)来有效地取消发现。

作为证据，请浏览[Android Source](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/bluetooth/BluetoothAdapter.java)，重点关注**BluetoothAdapter.java**：

```
/**
 * Set the Bluetooth scan mode of the local Bluetooth adapter.
 * <p>The Bluetooth scan mode determines if the local adapter is
 * connectable and/or discoverable from remote Bluetooth devices.
 * <p>For privacy reasons, discoverable mode is automatically turned off
 * after <code>duration</code> seconds. For example, 120 seconds should be
 * enough for a remote device to initiate and complete its discovery
 * process.
 * <p>Valid scan mode values are:
 * {@link #SCAN_MODE_NONE},
 * {@link #SCAN_MODE_CONNECTABLE},
 * {@link #SCAN_MODE_CONNECTABLE_DISCOVERABLE}.
 * <p>If Bluetooth state is not {@link #STATE_ON}, this API
 * will return false. After turning on Bluetooth,
 * wait for {@link #ACTION_STATE_CHANGED} with {@link #STATE_ON}
 * to get the updated value.
 * <p>Requires {@link android.Manifest.permission#WRITE_SECURE_SETTINGS}
 * <p>Applications cannot set the scan mode. They should use
 * <code>startActivityForResult(
 * BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE})
 * </code>instead.
 *
 * @param mode valid scan mode
 * @param duration time in seconds to apply scan mode, only used for
 *                 {@link #SCAN_MODE_CONNECTABLE_DISCOVERABLE}
 * @return     true if the scan mode was set, false otherwise
 * @hide
 */
public boolean setScanMode(int mode, int duration) {
    if (getState() != STATE_ON) return false;
    try {
        synchronized(mManagerCallback) {
            if (mService != null) return mService.setScanMode(mode, duration);
        }
    } catch (RemoteException e) {Log.e(TAG, "", e);}
    return false;
} 
```

如源代码中所述，“应用程序无法设置扫描模式”。[需要WRITE_SECURE_SETTINGS](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_SECURE_SETTINGS)权限才能在 API 之外手动扫描模式，[第三方应用程序无法做到这一点](https://stackoverflow.com/questions/5034160/how-can-i-get-the-dreaded-write-secure-settings-permission-for-my-android-app)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T18:19:03.870

使用 SCAN_MODE_NONE 启动新意图以停止扫描，然后使用 SCAN_MODE_CONNECTABLE 再次开始以仅在可连接模式下再次扫描。

# ruby-on-rails - 来自 Fog gem 的 Amazon s3 存储桶名称警告

> ID：14723798
> 
> 赞同：0
> 
> 时间：2013-02-06T07:32:59.203
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, fog

当所有 Rails 服务器，控制台设置时，我收到此警告。

[警告] 雾：指定的 s3 存储桶名称（hesaplabakalim-production/assets/new_opengraph）不是有效的 dns 名称，这将对性能产生负面影响。

我的雾配置就像

```
connection = Fog::Storage.new({
:provider                 => 'AWS',
:aws_access_key_id        => "dummy",
:aws_secret_access_key    => "dummy"
})

$directory = connection.directories.create(
:key    => "dummy/assets/new_opengraph",
:public => true
) 
```

我实际上必须创建一个名称为 dummy 的存储桶，然后步行到 assets/new_opengraph 文件夹，但我在雾文档中找不到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:58:34.920

我搜索了雾宝石的 github 页面，发现了这个问题和解决方案。

> “在空文件夹上，我使用了我们隐藏在控制台中的零字节文件，这看起来像是创建空文件夹。便宜的技巧，但有效。”

[https://github.com/fog/fog/issues/1370](https://github.com/fog/fog/issues/1370)

# php - 使用 php 从不同域访问文件

> ID：14723799
> 
> 赞同：3
> 
> 时间：2013-02-06T07:33:07.970
> 
> 标签：php, file, cross-domain, opendir, network-share

我将 PDF 文档存储在服务器的共享文件夹中，我需要通过文件浏览从 Web 应用程序访问它们。我知道存储在那里的文件的名称。所以我的链接就像（**file:\\server\folder\abc.pdf**）。

我的 php 应用程序位于运行在 xampp 上的 Web 服务器中。但是共享文件夹位于不同的域中。（不在 Web 服务器文件夹 - 普通文件夹中）。当我尝试访问文件时，它显示“**找不到文件：\\server\folder\abc.pdf。确保路径或 Internet 地址正确**”。

```
<a href="file:\\server\folder\abc.pdf" >Load File</a> 

<?php 
echo $dir = '\\\\server\\folder\\'; 

$dh = opendir($dir); 

while (($file = readdir($dh)) !== false) { 
echo "<a href=".$dir.$file.">".$file."<br></a>"; 
} 

closedir($dh); 

?> 
```

当我在地址栏上键入“\\server\folder”时，它会提示输入该文件夹的用户名和密码，因为它位于不同的域中（我当前的域在我登录时已经过身份验证）。当我向该文件夹提供 Windows 身份验证时，我的 Web 应用程序 url 将正常工作并成功打开文件。

我想在不提示目录安全用户名和密码的情况下完成这个任务。我的 Web 应用程序将被许多用户使用，因此本地映射网络驱动器也不可行。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:13:16.643

> 得到答案

我们可以将网络驱动器映射到服务器并保存“映射网络驱动器”向导中提示的用户名和密码，然后可以正常使用映射网络向导。

下面是对我有用的代码。

```
$dir = "A:/folder/";
$dh = opendir($dir);
while (($file = readdir($dh)) !== false)
{
 echo 'The file is : ' . $file . "\n";
}
closedir($dh); 
```

# ektron - 在 Ektron 中导入 XLIFF

> ID：14723802
> 
> 赞同：1
> 
> 时间：2013-02-06T07:33:31.067
> 
> 标签：ektron, xliff

我在 Ektron 8.0 中工作。

我一直在尝试通过 API 将 XLIFF 文件导入 ektron。我使用以下代码来实现这一点。

```
 private void ImportTranslation()
    {
        try
        {
            Ektron.Cms.LocalizationAPI m_objLocalizationApi = new Ektron.Cms.LocalizationAPI();
            m_objLocalizationApi.StartImportTranslation();
        }
        catch (Exception ex)
        {

        }
    } 
```

我调用了这个函数，并以编程方式将 XLIFF 文件添加到“uploadedfiles”目录中。我通过单击按钮处理了这段代码，它就像一个魅力！当我在工作区的 Page_Load 事件中编写此代码时，在状态树结构中它显示以下异常，“调用的目标已引发异常”。

我应该在 web 服务中处理 XLIFF 导入，它也会导致抛出相同的错误。

有人可以帮我解决这个问题吗？

# jsf-2 - Primefaces 可切换面板展开但不折叠：javascript 错误

> ID：14723806
> 
> 赞同：0
> 
> 时间：2013-02-06T07:34:02.977
> 
> 标签：jsf-2, primefaces

我正在尝试使用 PrimeFaces 3.5 使用 JBoss AS 7.1.1 附带的 Mojarra 版本（2.1.7-jbossorg-1 是报告的版本号）来实现一个简单的可折叠面板。我从 PrimeFaces Maven 存储库下载了 PrimeFaces。

我看到的是，如果面板最初是折叠的，我可以展开它一次，但永远不会再次折叠它。这是产生这个的代码：

```
<h:form id="myForm">
  <p:panel toggleable="true" collapsed="true" header="Title of the panel">
    <h:outputText value="Some text in a panel" />
  </p:panel>
...
</h:form> 
```

在 Safari 错误控制台中，单击面板的展开按钮时出现以下错误：

```
TypeError: 'undefined' is not a function (evaluating 'bG.easing[this.easing](b0,this.options.duration*b0,0,1,this.options.duration)') 
```

来自 jquery.js.jsf 的第 21 行，但展开操作有效。

另一方面，如果我从展开面板开始，我将永远无法折叠它，并且当我单击折叠按钮时，在错误控制台中会收到相同的错误消息。

我检查了当我从 Primefaces 展示中复制源代码时我得到了相同的行为，但是当我直接从他们的网站执行它时，它在我的浏览器中工作。这让我觉得这一定是我的 JBoss 服务器中出现的问题，但我不知道到哪里去找问题。

有没有人见过这个，并指出我正确的方向？谢谢。

**更新：**我在写这篇文章时注意到 PF 3.5 是全新的，所以我再次尝试使用之前的版本 3.4.2。我看到了同样的结果。

# jsp - 如何在 JSP 中特定按钮的单击/提交事件上调用特定的 Java 方法？

> ID：14723812
> 
> 赞同：30
> 
> 时间：2013-02-06T07:34:34.670
> 
> 标签：jsp, servlets

我的Java文件是：

```
public class MyClass {

    public void method1() {    
        // some code
    }

    public void method2() {
        //some code
    }

    public void method3() {
        //some code
    }
} 
```

在我的 JSP 页面中，我有三个 HTML 按钮。

如果单击`button1`，则 only`method1`将被调用，如果单击，`button2`则仅`method2`将执行，如果单击`button3`，则仅`method3`，依此类推。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-06T13:20:33.823

只需给各个按钮元素一个唯一的名称。按下时，按钮的名称可用作请求参数，就像输入元素一样。

您只需要确保按钮输入具有`type="submit"`in`<input type="submit">`和**not**`<button type="submit">`，这只会呈现纯粹用于所有内容的“死”按钮。 **`type="button"``onclick`**

 **例如

```
<form action="${pageContext.request.contextPath}/myservlet" method="post">
    <input type="submit" name="button1" value="Button 1" />
    <input type="submit" name="button2" value="Button 2" />
    <input type="submit" name="button3" value="Button 3" />
</form> 
```

和

```
@WebServlet("/myservlet")
public class MyServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        MyClass myClass = new MyClass();

        if (request.getParameter("button1") != null) {
            myClass.method1();
        } else if (request.getParameter("button2") != null) {
            myClass.method2();
        } else if (request.getParameter("button3") != null) {
            myClass.method3();
        } else {
            // ???
        }

        request.getRequestDispatcher("/WEB-INF/some-result.jsp").forward(request, response);
    }

} 
```

或者，使用`<button type="submit">`代替`<input type="submit">`，然后您可以为它们赋予相同的名称，但具有唯一值。的值`<button>`不会用作标签，您可以将自己指定为孩子。

例如

```
<form action="${pageContext.request.contextPath}/myservlet" method="post">
    <button type="submit" name="button" value="button1">Button 1</button>
    <button type="submit" name="button" value="button2">Button 2</button>
    <button type="submit" name="button" value="button3">Button 3</button>
</form> 
```

和

```
@WebServlet("/myservlet")
public class MyServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        MyClass myClass = new MyClass();
        String button = request.getParameter("button");

        if ("button1".equals(button)) {
            myClass.method1();
        } else if ("button2".equals(button)) {
            myClass.method2();
        } else if ("button3".equals(button)) {
            myClass.method3();
        } else {
            // ???
        }

        request.getRequestDispatcher("/WEB-INF/some-result.jsp").forward(request, response);
    }

} 
```

### 也可以看看：

*   [Servlet 返回“HTTP 状态 404 请求的资源 (/servlet) 不可用”](https://stackoverflow.com/questions/11731377/how-to-call-servlet-from-html-form-in-jsp-file-without-getting-http-status-404)
*   [如何通过单击 JSP 页面中的超链接或按钮将当前项目传递给 Java 方法？](https://stackoverflow.com/questions/3078701/how-do-i-pass-current-item-to-java-method-by-clicking-a-hyperlink-or-button-in-j)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T10:28:17.087

```
<form method="post" action="servletName">   
     <input type="submit" id="btn1" name="btn1"/>
     <input type="submit" id="btn2" name="btn2"/>
</form> 
```

按下它时，请求将转到 servlet 页面上的 servlet，检查按下了哪个按钮，然后相应地调用所需的方法作为 objectName.method

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T12:39:02.817

您可以尝试在每个按钮上添加 action="#{yourBean.function1}" （当然更改方法 function2、function3 或您需要的任何内容）。如果这不起作用，您可以尝试使用 onclick 事件。

无论如何，如果您告诉我们您要使用什么样的按钮，a4j:commandButton 或您正在使用的任何按钮，会更容易为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-01T15:31:27.253

如果你有 web.xml 然后

**HTML/JSP**

```
<form action="${pageContext.request.contextPath}/myservlet" method="post">
    <input type="submit" name="button1" value="Button 1" />
</form> 
```

**web.xml**

```
<servlet>
        <display-name>Servlet Name</display-name>
        <servlet-name>myservlet</servlet-name>
        <servlet-class>package.SomeController</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>myservlet</servlet-name>
    <url-pattern>/myservlet</url-pattern>
</servlet-mapping> 
```

**Java** SomeController.java

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("Write your code below");
} 
```**

# asp.net - 在 VB.net datestring + "-23.59.59.999" 在 VS2003 中工作，而不是在 VS2008 或 VS2010 中

> ID：14723815
> 
> 赞同：0
> 
> 时间：2013-02-06T07:34:47.370
> 
> 标签：asp.net, vb.net, visual-studio, iis, code-behind

大家好，下面的代码在 Visual Studio 2003 中运行良好，但是在我将解决方案转换为 VS2008 之后，下面的代码给出了错误。请帮我解决问题

代码：

```
Dim strToDate As string
strToDate = "2013-02-06"

Dim dateFromSelect, dateToSelect, dateToSelectEnd, dateFromSelectStart As DateTime

dateToSelectEnd = strToDate + "-23:59:59.9999999" 
```

错误

```
Conversion from string "2013-02-06-23:59:59.9999999" to type 'Date' is not valid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:40:07.467

问题是

```
dateToSelectEnd = strToDate + "-23:59:59.9999999" 
```

它应该是

```
dateToSelectEnd = strToDate + " 23:59:59.9999999" 
```

# cxf - cxf 中的异步 Web 服务

> ID：14723816
> 
> 赞同：0
> 
> 时间：2013-02-06T07:34:47.847
> 
> 标签：cxf, jax-ws-customization, contract-first

我需要使用 cxf 从服务器端主动向客户端发送响应。我非常擅长从客户端到服务器进行同步 JAX-WS 调用（我使用 SOPAUI 来调用我的服务器，它是一个 webservice_..我正在关注JAX-WS wsdl 第一种方法。我正在使用 cxf 'wsdltojava' 将 wsdl 转换为 java 类。

为了简单起见，我的问题是'如何在 CXF、JAX-WS wsdl 第一种方法中从服务器向客户端发送响应（没有来自客户端的请求）？

# ios6 - 如何在 iphone 5 上适配我的 cocos2d-x 应用程序

> ID：14723819
> 
> 赞同：1
> 
> 时间：2013-02-06T07:34:54.380
> 
> 标签：ios6, cocos2d-x

我的游戏是用cocos2d-x设计的，图片资源大小为320x480，适配iphone4，现在我想让我的游戏适配iphone5，怎么办，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:50:56.840

这实际上取决于您当前的 cocos2d-x 版本和您计划支持的分辨率。但基本上，如果您正在运行最新的稳定版本（2.0.4）并且只想支持 iPhone4 和 iphone5 分辨率，那么您必须：

1.  为两种分辨率创建艺术（这不是强制性的，但图形可能会缩放太多并降低质量）。

2.  在运行时根据实际设备的分辨率定义 DesignResolutionSize 和 ContentScaleFactor

3.  选择正确的资源路径

这是一个关于如何实现它的简单示例：

```
// Get the real screen size
CCDirector* pDirector = CCDirector::sharedDirector();
CCEGLView* pEGLView = CCEGLView::sharedOpenGLView();
pDirector->setOpenGLView(pEGLView);

// Set the design resolution. Please see the doc for the different modes
pEGLView->setDesignResolutionSize(480, 320, kResolutionNoBorder);

// Here you have to chose between width or height depending your game's design
if (frameSize.width > 480) {
      // iphone5
      pDirector->setContentScaleFactor(1136/480);
      CCFileUtils::sharedFileUtils()->setResourceDirectory("hd");
} else { 
     // iphone4
     pDirector->setContentScaleFactor(1);
     CCFileUtils::sharedFileUtils()->setResourceDirectory("sd");
}

/// Now load the sprites.... 
```

如果您想支持更多的iOS/android分辨率，请参考以下链接了解cocos2d-x提供的全屏多分辨率解决方案：

[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support)

[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Mechanism_of_loading_resources](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Mechanism_of_loading_resources)

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T13:23:21.437

Cocos2D-x 2.0.4+ 对多分辨率问题有非常简单的解决方案。（iDevices 或 Android 设备。）

事实上，您只需要设置您的`DesignResolution`，然后想象您的目标设备将具有此分辨率。

如果目标设备真的有这个分辨率（或其他一些但具有相同的比率）cocos2d 将处理修复屏幕，你的游戏在所有设备上看起来都一样。

当目标设备的比例不同时，你有很多选项（如 cocos2d 语言`policy`）来管理它。

例如，如果您使用`Exact fit`策略，cocos2d 将强制您的游戏（和设计）适合目标设备屏幕（没有那个黑色边框）。

> 完全适合
> 
> 整个应用程序在指定区域中可见，而无需尝试保留原始纵横比。可能会发生变形，并且应用程序可能会出现拉伸或压缩。

有关更多详细信息，请查看此链接： http: [//www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support)

# twitter-bootstrap - Bootstrap 类型提前绑定值与 knockoutjs 不起作用

> ID：14723820
> 
> 赞同：2
> 
> 时间：2013-02-06T07:34:57.853
> 
> 标签：twitter-bootstrap, knockout.js

我有一个使用淘汰赛创建的 ViewModel，其中包含我的产品的所有信息。它看起来像这样：

```
var ProductViewModelDS = function (data) {
        var self = this;
        self.ProductSKUID = ko.observable(data.ProductSKUID);
        self.ProductID = ko.observable(data.ProductID);
        self.ProductSKUStockCode = ko.observable(data.ProductSKUStockCode);
        self.ProductSKUManufacturePartNumber = ko.observable(data.ProductSKUManufacturePartNumber);
        self.ProductSKUName = ko.observable(data.ProductSKUName);
        self.ProductSKUPrice = ko.observable(data.ProductSKUPrice);
        self.ProductSKUSpecialPrice = ko.observable(data.ProductSKUSpecialPrice);
        self.ProductSKUIsOnSpecial = ko.observable(data.ProductSKUIsOnSpecial);
        self.ProductSKUMinimumOrderQty = ko.observable(data.ProductSKUMinimumOrderQty);
        self.ProductSKUMaximumOrderQty = ko.observable(data.ProductSKUMaximumOrderQty);
        self.ProductSKUCurrentStock = ko.observable(data.ProductSKUCurrentStock);
    } 
```

我想提前使用引导类型，以便我可以查看产品信息。我找到了这篇**[文章](http://blogs.msdn.com/b/rebond/archive/2012/07/18/knockout-js-binding-for-bootstrap-typeahead-plugin.aspx)**，它为我提供了事件处理程序来执行此操作。

但是，一旦我开始输入，我的控制台中就会出现此错误：

***Uncaught TypeError: Object [object Object] has no method 'toLowerCase' bootstrap.js:1831 Uncaught TypeError: Cannot use 'in' operator to search 'length' in 1***

这是我从 AJAX 调用中得到的 JSON：

```
{
"d": [
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 15,
        "ProductID": 1,
        "ProductSKUStockCode": "BPUNIRM1131",
        "ProductSKUManufacturePartNumber": "600284403 1213",
        "ProductSKUName": "DSD 1131 Remote Control",
        "ProductSKUPrice": 84,
        "ProductSKUSpecialPrice": null,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 10000,
        "ProductSKUCurrentStock": 100
    },
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 16,
        "ProductID": 2,
        "ProductSKUStockCode": "SDF213",
        "ProductSKUManufacturePartNumber": "55511545121",
        "ProductSKUName": "DSD 1132",
        "ProductSKUPrice": 599,
        "ProductSKUSpecialPrice": null,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 10000,
        "ProductSKUCurrentStock": 100
    },
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 17,
        "ProductID": 3,
        "ProductSKUStockCode": "RPAIRDRHD",
        "ProductSKUManufacturePartNumber": "600284400 1018",
        "ProductSKUName": "HD PVR Remote Control",
        "ProductSKUPrice": 250,
        "ProductSKUSpecialPrice": null,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 10000,
        "ProductSKUCurrentStock": 100
    },
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 18,
        "ProductID": 4,
        "ProductSKUStockCode": "1131",
        "ProductSKUManufacturePartNumber": "DSD1131",
        "ProductSKUName": "DSD1131 DVB-S",
        "ProductSKUPrice": 499,
        "ProductSKUSpecialPrice": 498,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 10000,
        "ProductSKUCurrentStock": 100
    },
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 19,
        "ProductID": 5,
        "ProductSKUStockCode": "4660",
        "ProductSKUManufacturePartNumber": "DSR4660",
        "ProductSKUName": "DSR4660 HD DVB-S2",
        "ProductSKUPrice": 1499,
        "ProductSKUSpecialPrice": null,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 100,
        "ProductSKUCurrentStock": 100
    },
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 20,
        "ProductID": 6,
        "ProductSKUStockCode": "DVR3000",
        "ProductSKUManufacturePartNumber": "MCSDPVR3000",
        "ProductSKUName": "DVR3000",
        "ProductSKUPrice": 1500,
        "ProductSKUSpecialPrice": null,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 10000,
        "ProductSKUCurrentStock": 100
    },
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 21,
        "ProductID": 7,
        "ProductSKUStockCode": "DE45",
        "ProductSKUManufacturePartNumber": "N/A",
        "ProductSKUName": "ELSAT 45CM MILD STEEL DISH",
        "ProductSKUPrice": 560,
        "ProductSKUSpecialPrice": null,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 10000,
        "ProductSKUCurrentStock": 100
    },
    {
        "__type": "POS.Tracntrace.Member_Only.DAL.Models.CreateOrder.CreateOrderProductModel",
        "ProductSKUID": 22,
        "ProductID": 8,
        "ProductSKUStockCode": "DE60",
        "ProductSKUManufacturePartNumber": "N/A",
        "ProductSKUName": "ELSAT 60CM MILD STEEL DISH",
        "ProductSKUPrice": 900,
        "ProductSKUSpecialPrice": null,
        "ProductSKUIsOnSpecial": "false",
        "ProductSKUMinimumOrderQty": 1,
        "ProductSKUMaximumOrderQty": 10000,
        "ProductSKUCurrentStock": 100
    }
]
} 
```

我只想能够搜索 ProductSKUName、ProductSKUStockCode 或 ProductSKUManufactureStockCode。

任何建议将不胜感激。

HTML：

```
 <div class="well">
    <input type="text" data-bind="typeahead: { target: ProductViewModel, source: Products }" />
</div> 
```

**编辑：**

我的Javascript：

```
 ko.bindingHandlers.typeahead = {
        init: function (element, valueAccessor) {
            var binding = this;
            var elem = $(element);
            var value = valueAccessor();
            elem.typeahead(
              {
                  source: function () { return ko.utils.unwrapObservable(value.source); },
                  onselect: function (val) { value.target(val); }
              });
            elem.blur(function () { value.target(elem.val()); });
        },
        update: function (element, valueAccessor) {
            var elem = $(element);
            var value = valueAccessor();
            elem.val(value.target());
        }
    };

    var ProductViewModelDS = function (data) {
        var self = this;
        self.ProductSKUID = ko.observable(data.ProductSKUID);
        self.ProductID = ko.observable(data.ProductID);
        self.ProductSKUStockCode = ko.observable(data.ProductSKUStockCode);
        self.ProductSKUManufacturePartNumber = ko.observable(data.ProductSKUManufacturePartNumber);
        self.ProductSKUName = ko.observable(data.ProductSKUName);
        self.ProductSKUPrice = ko.observable(data.ProductSKUPrice);
        self.ProductSKUSpecialPrice = ko.observable(data.ProductSKUSpecialPrice);
        self.ProductSKUIsOnSpecial = ko.observable(data.ProductSKUIsOnSpecial);
        self.ProductSKUMinimumOrderQty = ko.observable(data.ProductSKUMinimumOrderQty);
        self.ProductSKUMaximumOrderQty = ko.observable(data.ProductSKUMaximumOrderQty);
        self.ProductSKUCurrentStock = ko.observable(data.ProductSKUCurrentStock);
        self.SearchText = ko.computed(function () {
            return self.ProductSKUName() + ' ' + self.ProductSKUStockCode() + ' ' + self.ProductSKUManufacturePartNumber();
        });
    }

    var ProductViewModel = function (Products) {
        var self = this;

        self.Products = ko.observableArray(Products);

        $.ajax({
            url: "CreateOrder.aspx/GetAvailibleProducts",
            data: '{}',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "JSON",
            timeout: 10000,
            success: function (Result) {
                var MappedProducts =
              $.map(Result.d,
             function (item) {
                 return new ProductViewModelDS(item);
             }
               );
                self.Products(MappedProducts);
            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });

        self.Save = function () {
            alert('Could Now Save: ' + ko.mapping.toJSON(self.Products));
        }
    };

    $(document).ready(function () {
        var VM = new ProductViewModel();
        ko.applyBindings(VM);
    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:07:50.163

查看您提供的链接，您是否没有错误地获取目标和来源？

基本上，type ahead 插件似乎需要一个可用于自动完成建议的字符串值数组。向 ProductViewModel 添加一个 SearchText 属性，该属性循环遍历所有产品并将您想要的三个字段放入 searchterm 数组中。

```
var ProductViewModel = function () {
    self.SearchText = ko.computed(function()
    {
        var searchableTerms = [];
        ko.utils.arrayForEach(self.Products(), function (item)
        {
            searchableTerms.push(item.ProductSKUName());
            searchableTerms.push(item.ProductSKUStockCode());
            searchableTerms.push(item.ProductSKUManufacturePartNumber());
        });
        return searchableTerms;
    });
}; 
```

然后将html更新为：

```
<div class="well">
    <input type="text" data-bind="typeahead: { target: Products, source: SearchText }" />
</div> 
```

# android - 在android中将图像转换为铅笔素描效果

> ID：14723822
> 
> 赞同：3
> 
> 时间：2013-02-06T07:35:02.317
> 
> 标签：android, image-processing

如何将照片和图像（位图）转换为铅笔素描般的图片（如下所示）？我找不到任何关于如何做到这一点的好资料。

我想制作一个可以以编程方式将 JPEG 照片“转换”为铅笔素描图像的 android 应用程序。

你能帮我解决这个问题吗？ ![素描效果](../Images/d41f52714d081b692ed2f411438e1d6f.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-05-10T17:31:53.803

首先读取图像

```
g = Convert-To-Gray-Scale(s)

i = Invert-Colors(g)

b = Apply-Gaussian-Blur(i)

result = Color-Dodge-Blend-Merge(b,g) 
```

[https://github.com/finebyte/android-jhlabs/issues/2](https://github.com/finebyte/android-jhlabs/issues/2)

另见[https://github.com/geraintluff/canvas-sketch](https://github.com/geraintluff/canvas-sketch)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-08-08T09:38:06.447

```
`public static Bitmap toGrayscale(Bitmap src) {
        final double GS_RED = 0.299;
        final double GS_GREEN = 0.587;
        final double GS_BLUE = 0.114;
        Bitmap bmOut = Bitmap.createBitmap(src.getWidth(), src.getHeight(), src.getConfig());
        int A, R, G, B;
        int pixel;
        int width = src.getWidth();
        int height = src.getHeight();
        for (int x = 0; x < width; ++x) {
            for (int y = 0; y < height; ++y) {
                // get one pixel color
                pixel = src.getPixel(x, y);
                A = Color.alpha(pixel);
                R = Color.red(pixel);
                G = Color.green(pixel);
                B = Color.blue(pixel);
                R = G = B = (int) (GS_RED * R + GS_GREEN * G + GS_BLUE * B);
                bmOut.setPixel(x, y, Color.argb(A, R, G, B));
            }
        }
        return bmOut;
    }
    public static Bitmap createInvertedBitmap(Bitmap src) {
        Bitmap bmOut = Bitmap.createBitmap(src.getWidth(), src.getHeight(), src.getConfig());
        int A, R, G, B;
        int pixelColor;
        int height = src.getHeight();
        int width = src.getWidth();
        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                pixelColor = src.getPixel(x, y);
                A = Color.alpha(pixelColor);
                R = 255 - Color.red(pixelColor);
                G = 255 - Color.green(pixelColor);
                B = 255 - Color.blue(pixelColor);
                bmOut.setPixel(x, y, Color.argb(A, R, G, B));
            }
        }
        return bmOut;
    }
    public Bitmap ColorDodgeBlend(Bitmap source, Bitmap layer) {
        Bitmap base = source.copy(Bitmap.Config.ARGB_8888, true);
        Bitmap blend = layer.copy(Bitmap.Config.ARGB_8888, false);
        IntBuffer buffBase = IntBuffer.allocate(base.getWidth() * base.getHeight());
        base.copyPixelsToBuffer(buffBase);
        buffBase.rewind();
        IntBuffer buffBlend = IntBuffer.allocate(blend.getWidth() * blend.getHeight());
        blend.copyPixelsToBuffer(buffBlend);
        buffBlend.rewind();
        IntBuffer buffOut = IntBuffer.allocate(base.getWidth() * base.getHeight());
        buffOut.rewind();
        while (buffOut.position() < buffOut.limit()) {
            int filterInt = buffBlend.get();
            int srcInt = buffBase.get();
            int redValueFilter = Color.red(filterInt);
            int greenValueFilter = Color.green(filterInt);
            int blueValueFilter = Color.blue(filterInt);
            int redValueSrc = Color.red(srcInt);
            int greenValueSrc = Color.green(srcInt);
            int blueValueSrc = Color.blue(srcInt);
            int redValueFinal = colordodge(redValueFilter, redValueSrc);
            int greenValueFinal = colordodge(greenValueFilter, greenValueSrc);
            int blueValueFinal = colordodge(blueValueFilter, blueValueSrc);
            int pixel = Color.argb(255, redValueFinal, greenValueFinal, blueValueFinal);
            buffOut.put(pixel);
        }
        buffOut.rewind();
        base.copyPixelsFromBuffer(buffOut);
        blend.recycle();
        return base;
    }
    private int colordodge(int in1, int in2) {
        float image = (float)in2;
        float mask = (float)in1;
        return ((int) ((image == 255) ? image:Math.min(255, (((long)mask << 8 ) / (255 - image)))));
    }` 
```

# silverlight - Silverlight 网络服务查询

> ID：14723823
> 
> 赞同：0
> 
> 时间：2013-02-06T07:35:03.907
> 
> 标签：silverlight, http, soap, cross-domain, asmx

此错误在 silverlight 页面中显示我

> 尝试向 URI (/HML.asmx) 发出请求时出错。这可能是由于尝试以跨域方式访问服务而没有适当的跨域策略，或者策略不合适用于 SOAP 服务。您可能需要联系服务的所有者发布跨域策略文件，并确保它允许发送与 SOAP 相关的 HTTP 标头。此错误也可能是由于在 Web 服务代理中使用内部类型而没有使用InternalsVisibleToAttribute 属性。有关更多详细信息，请参阅内部异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:00:20.150

1>你看过内部的Exception吗？它告诉你什么？

2> 您应该了解什么是跨域访问以及跨域策略如何允许它： https: [//support.ookla.com/entries/21097566-what-is-crossdomain-xml-and-why-do-i-need -它](https://support.ookla.com/entries/21097566-what-is-crossdomain-xml-and-why-do-i-need-it)（它是关于闪光灯的，但对于silverlight也是如此）

无论如何，更准确地了解您尝试做什么？访问外部 Web 服务？从 http 部分调用您网站的 https 部分？在很多情况下都可能发生此错误。

# java - 在 Mysql 中使用 select where Query 区分大小写

> ID：14723825
> 
> 赞同：3
> 
> 时间：2013-02-06T07:35:05.763
> 
> 标签：java, mysql, sql, select

嗨，我正在使用 Java 前端和 Mysql 后端，，，

实际上在**tbl_test**中包含

```
name value
---------------
 abc   22   
 xyz   14   
 ABC   32   
 xyZ    4   
 ABc    4 
```

在java中我尝试检索**abc的值**所以写了一个代码

```
ResultSet result=stmt.executeQuery("select value from tbl_test where name='abc'");
while(result.next())
{
     System.out.println("Answer : "+result.getInt(1));
}
result.close(); 
```

当前输出为

```
Answer :  22
Answer :  32
Answer :  4 
```

实际上我只想要结果'abc'即**答案：22**

我也找到了结果，代码如下

```
String name="abc";
ResultSet result=stmt.executeQuery("select name, value from tbl_test where name='"+name+"'");
while(result.next())
  {
    if(name.equals(result.getString(1))
       System.out.println("Answer : "+result.getInt(2));
  }
result.close(); 
```

现在我得到了正确的输出，但是这个结果来自 java 代码而不是查询，，，是否可以在查询中检索相同的结果......

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T07:39:31.163

使用 MySQL[`Binary`](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#operator_binary)运算符：

```
select value 
from tbl_test 
where CAST(name AS BINARY) ='abc'; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/9d507/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:42:03.330

例如，您必须使用区分大小写的搜索，或者像 Mahmoud 所说的那样使用 Binary serach

```
select value from tbl_test where name  COLLATE latin1_general_cs LIKE 'abc' 
```

[http://dev.mysql.com/doc/refman/5.0/en/case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)

# c# - 在选项标签上移动值属性

> ID：14723826
> 
> 赞同：0
> 
> 时间：2013-02-06T07:35:21.663
> 
> 标签：c#, html, regex

我需要在包含具有其他一些属性的标签的 html 字符串的开头移动一个值属性。

它可以传递给我这样的东西

```
<option (attrs1)* value="1" (attrs2)*>...</option>
<option (attrs1)* value='1' (attrs2)*>...</option>
<option (attrs1)* value=1 (attrs2)*>...</option> 
```

它应该是

```
<option value="1" (attrs1)* (attrs2)*>...</option>
<option value='1' (attrs1)* (attrs2)*>...</option>
<option value=1 (attrs1)* (attrs2)*>...</option> 
```

如何通过 .Net 中的正则表达式来完成？

*   这是一个训练练习

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:59:02.377

这是一个如何使用*HtmlAgilityPack*做到这一点的示例。如果您仍想使用正则表达式，请参阅答案的另一部分。

```
string html = @"<option foo1='bar1' value=""1"" foo=bar></option>";
var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var node = doc.DocumentNode.ChildNodes[0];
//Get all the attributes
var attributes = new List<HtmlAttribute>(node.Attributes);
//Remove all the attributes
node.Attributes.RemoveAll();

//Insert them again
foreach (var attr in attributes) {
    //If we found the 'value' atrribute, insert it at the begining
    if (attr.Name == "value")
    {
        node.Attributes.Insert(0, attr);
    }
    else {
        node.Attributes.Add(attr);
    }
}

Console.WriteLine(doc.DocumentNode.OuterHtml); 
```

上面的代码将打印：

```
<option value="1" foo="bar" foo1='bar1'> 
```

那只是一个例子。您可以对 HTML 上的所有节点执行此操作，或者仅将其应用于您需要的节点等。

* * *

另一个使用正则表达式的例子。您可能需要进行修改以 100% 满足您的需求。

```
string regex = @"<([\w]+)\s+(?:(\w+)=[""']?([^\s""']+)[""']?\s*)+>";
string html = @"<option foo=bar value=""1"" foo2='bar2'>...</option>
                <option foo=bar value=""1"" foo2='bar2'>...</option>
                <option foo=bar value=""1"" foo2='bar2'>...</option>";

//Getting all the matches.
var matches = Regex.Matches(html, regex);
foreach (Match m in matches) {
    //This will contain the replaced string
    string result = string.Format("<{0}", m.Groups[1].Value);

    //Here we will store all the keys
    var keys = new List<string>();
    //Here we will store all the values
    var values = new List<string>();

    //For every pair (key, value) matched
    for (int i = 0; i < m.Groups[2].Captures.Count; i++) {
        //Get the key
        var key = m.Groups[2].Captures[i].Value;
        //Get the value
        var value = m.Groups[3].Captures[i].Value;

        //Insert on the list (if key is 'value', insert at the beginning)
        if (key == "value") {
            keys.Insert(0, key);
            values.Insert(0, value);
        }
        else {
            keys.Add(key);
            values.Add(value);
        }
    }

    //Concatenate all the (key, value) attributes to the replaced string
    for (int i = 0; i < keys.Count; i++) {
        result += string.Format(@" {0}=""{1}""", keys[i], values[i]);
    }

    //Close the tag
    result += ">";

    Console.WriteLine(result);
} 
```

这将打印：

```
<option value="1" foo="bar" foo2="bar2">
<option value="1" foo="bar" foo2="bar2">
<option value="1" foo="bar" foo2="bar2"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:38:27.553

免责声明：这是一个基于 Javascript 的解决方案，但我想，.Net 为正则表达式提供与 Python 和 Ruby 等其他语言相同的支持，因此该方法应该是有效的（减去特定于语言的语法）。它在这里表明它可以只使用一个正则表达式来完成。

正则表达式背后的想法是找到标记的开头、“value=...”部分以及介于两者之间的所有内容。然后使用替换功能重新组织找到的部分，因此“值”标签总是在开始标签之后。

好的，这里是（**Javascript版本**）：

```
// some example string
var x = "<something bla=5432 other-st='asdf' value=\"45\"/><p name=asdf value=55fs andalso=\"something\">html like</p>";
x.replace(/(\<(?!\/)[a-z]+)(.+?)?(\ value=(?:\"|\')?[^\"\'\ ]+(?:\"|\')?)/gi, function(a, b, c, d) {return b+d+c;}) 
```

更新：这是**C# 版本**（由 fX 提供）：

```
string x = "<something bla=5432 other-st='asdf' value=\"45\"/><p name=asdf value=55fs andalso=\"something\">html like</p>";
var r = new Regex("(<(?!/)[a-z]+)(.+?)?(\\sVALUE=(?:\"|')?[^\"'\\s]+(?:\"|')?)", RegexOptions.IgnoreCase);
string s = r.Replace(x, (match) => { return match.Groups[1].Value + match.Groups[3].Value + match.Groups[2].Value; }); 
```

# xpath - 结合两个具有相同前缀的 xpath 表达式

> ID：14723832
> 
> 赞同：-1
> 
> 时间：2013-02-06T07:35:41.743
> 
> 标签：xpath, operator-keyword, prefix

我试图找到某种方法来合并两个具有相同前缀的 xpath 查询的结果。

说：/inventory/product/itemNumber | /库存/产品/项目名称

我正在寻找类似 /inventory/product/(itemNumber | itemName) 的东西（输出的顺序对我来说是不敬的）。

基本上，我正在尝试找到一种不将长前缀写两次的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:13:29.130

实现这一点的方法如下：

```
/inventory/product/*[self::itemNumber or self::itemName] 
```

# java - Oracle SQL Developer 加载 Java 错误

> ID：14723834
> 
> 赞同：2
> 
> 时间：2013-02-06T07:35:46.080
> 
> 标签：java, sql, oracle

我正在尝试将 Java 代码加载到我的 Oracle SQL 开发人员。在加载 java 时，我从我的硬盘（从`NetBeans`目标文件夹）中选择 Java 源，我收到以下错误。有什么帮助吗？

![图片](../Images/72cabd1bae317004e6b06cffdc835117.png)

这是代码。它在 NetBeans 中运行良好，我正在尝试将它加载到 SQL Developer 中的 .java 文件中

```
package c2_01_signhelloworld;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.security.GeneralSecurityException;
import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.Security;
import java.security.cert.Certificate;

import org.bouncycastle.jce.provider.BouncyCastleProvider;

import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfSignatureAppearance;
import com.itextpdf.text.pdf.PdfStamper;
import com.itextpdf.text.pdf.security.BouncyCastleDigest;
import com.itextpdf.text.pdf.security.DigestAlgorithms;
import com.itextpdf.text.pdf.security.ExternalDigest;
import com.itextpdf.text.pdf.security.ExternalSignature;
import com.itextpdf.text.pdf.security.MakeSignature;
import com.itextpdf.text.pdf.security.MakeSignature.CryptoStandard;
import com.itextpdf.text.pdf.security.PrivateKeySignature;

public class C2_01_SignHelloWorld {

    public static final String KEYSTORE = "C:/Users/kranjcevicb/Documents/itext/2/ks";
    public static final char[] PASSWORD = "password".toCharArray();
    public static final String SRC = "C:/Users/kranjcevicb/Documents/itext/2/unsigned1.pdf";
    public static final String DEST = "C:/Users/kranjcevicb/Documents/itext/2/unsigned1_signed.pdf";

    public void sign(String src, String dest,
            Certificate[] chain,
            PrivateKey pk, String digestAlgorithm, String provider,
            CryptoStandard subfilter,
            String reason, String location)
                    throws GeneralSecurityException, IOException, DocumentException {
        // Creating the reader and the stamper
        PdfReader reader = new PdfReader(src);
        FileOutputStream os = new FileOutputStream(dest);
        PdfStamper stamper = PdfStamper.createSignature(reader, os, '\0');
        // Creating the appearance
        PdfSignatureAppearance appearance = stamper.getSignatureAppearance();
        appearance.setReason(reason);
        appearance.setLocation(location);
        appearance.setVisibleSignature(new Rectangle(36, 748, 144, 780), 1, "sig");
        // Creating the signature
        ExternalDigest digest = new BouncyCastleDigest();
        ExternalSignature signature = new PrivateKeySignature(pk, digestAlgorithm, provider);
        MakeSignature.signDetached(appearance, digest, signature, chain, null, null, null, 0, subfilter);
    }

    public static void main(String[] args) throws GeneralSecurityException, IOException, DocumentException {
        BouncyCastleProvider provider = new BouncyCastleProvider();
        Security.addProvider(provider);
        KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
        ks.load(new FileInputStream(KEYSTORE), PASSWORD);
        String alias = (String)ks.aliases().nextElement();
        PrivateKey pk = (PrivateKey) ks.getKey(alias, PASSWORD);
        Certificate[] chain = ks.getCertificateChain(alias);
        C2_01_SignHelloWorld app = new C2_01_SignHelloWorld();
        app.sign(SRC, String.format(DEST, 1), chain, pk, DigestAlgorithms.SHA256, provider.getName(), CryptoStandard.CMS, "Test 1", "Ghent");
        app.sign(SRC, String.format(DEST, 2), chain, pk, DigestAlgorithms.SHA512, provider.getName(), CryptoStandard.CMS, "Test 2", "Ghent");
        app.sign(SRC, String.format(DEST, 3), chain, pk, DigestAlgorithms.SHA256, provider.getName(), CryptoStandard.CADES, "Test 3", "Ghent");
        app.sign(SRC, String.format(DEST, 4), chain, pk, DigestAlgorithms.RIPEMD160, provider.getName(), CryptoStandard.CADES, "Test 4", "Ghent");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-18T06:49:51.297

我在使用 sqldeveloper 中的左窗格 java 选项加载 java 类时遇到了同样的问题。但是，当我尝试使用下面的代码加载 java 时，它解决了

```
CREATE OR REPLACE AND COMPILE JAVA SOURCE NAMED "JavaClassName" AS
 public class JavaClassName{
     public static String MyFunction(){
      .....do something......
      return "output";
     }
  } 
```

# c# - 将类型从字符串变量发送到泛型方法

> ID：14723838
> 
> 赞同：2
> 
> 时间：2013-02-06T07:35:49.623
> 
> 标签：c#, generics, methods

我有一个通用方法，我想向它发送一个取自字符串变量的类型。

我的通用方法的签名是：

```
public ICollection<TEntity> agregarItems<TEntity>(ComboBox cb) where TEntity : new() 
```

我想这样做：

```
Type tipo = Type.GetType("MyNamespace." + cb.Name);

cliente.GetType().GetProperty(cb.Name).SetValue(cliente,
        agregarItems<tipo>(cb), null); 
```

其中 cb 是一个 ComboBox 对象，而 cliente 是一个类的实例。

cb.Name 可能是“Phone”并且Phone 类已经存在于MyNamespace 中。

因为没有正式定义tipo，所以我收到以下错误：

> 找不到类型或命名空间名称“tipo”（您是否缺少 using 指令或程序集引用？）

我需要一种解决方法，让我将未正式定义的类型发送到泛型方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:45:13.753

您需要做的是使用您在此处提供的方式获得的类型创建实例（使用`Activator`）：

[如何使用反射动态创建通用 C# 对象？](https://stackoverflow.com/questions/1151464/how-to-dynamically-create-generic-c-sharp-object-using-reflection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:41:50.630

```
Type tipo = Type.GetType("TypeName"); 
```

仅适用于非常基本的类型。

您要引用的类型可能位于 System.Web、System 等程序集中。仅引用此程序集是不够的，您还需要告诉运行时您的类型在哪个程序集中。

所以试试

```
Type tipo = Type.GetType(YourType.AssemblyQualifiedName); 
```

代替

```
Type tipo = Type.GetType(YourType.FullName); 
```

此外，您正在使用运行时确定的类型 (tipo) 来创建编译时确定的泛型重载。那是行不通的——永远。

您需要修改泛型方法以将类型作为参数传递。

# ios - 将 CLLocationCoordinate2D 数组作为返回类型传递

> ID：14723839
> 
> 赞同：0
> 
> 时间：2013-02-06T07:35:50.460
> 
> 标签：ios, xcode, cllocation

嗨，有一个方法必须返回 CLLocationCoordinate2D 数组。有没有办法做到这一点？

CLLocationCoordinate2D 坐标[count]; 我想返回坐标；

我不想把它放在数组上并作为 NSArray 发送，只想作为 CLLocationCoordinate2D 数组发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-23T05:30:23.997

设置 -

```
CLLocationCoordinate2D cooArray[5];
    cooArray[0] = _locationCoo1;
    cooArray[1] = _locationCoo2;
    cooArray[2] = _locationCoo3;
    cooArray[3] = _locationCoo4; 
```

要得到 -

```
CLLocationCoordinate2D location1 = cooArray[0]; 
```

获取数组的大小

```
 NSLog(@" :%lu", sizeof(cooArray)); 
```

# c# - NotifyIcon 即使在应用程序关闭后仍保留在托盘中，但在鼠标悬停时消失

> ID：14723843
> 
> 赞同：85
> 
> 时间：2013-02-06T07:36:07.130
> 
> 标签：c#, notifyicon

SO上有很多问题提出同样的疑问。解决方案是设置

`notifyIcon.icon = null``Dispose`并在 FormClosing 事件中调用它。

在我的应用程序中，没有这样的表单，但有更新事件的通知图标。在创建时，我隐藏我的表单并创建`ShowInTaskbar`property `false`。因此我不能有“FormClosing”或“FormClosed”事件。

如果此应用程序获得退出事件，它会调用`Process.GetCurrentProcess().Kill();`退出。

我`notifyIcon.icon = null`在杀死之前添加了和 Dispose ，但图标仍然保留在任务栏上，直到我将鼠标悬停在它上面。

**编辑**：如果我认为这种行为是由于调用`GetCurrentProcess().Kill()`，是否有任何优雅的方法可以退出应用程序，这将清除所有资源并从系统托盘中删除图标。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-05-24T18:42:41.100

您可以设置

```
notifyIcon1.Visible = false; 
```

或者

```
notifyIcon.Icon = null; 
```

在表单关闭事件中。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-05-25T18:17:48.707

对我有用的唯一解决方案是使用 Closed 事件并隐藏和处置图标。

```
icon.BalloonTipClosed += (sender, e) => { 
                                            var thisIcon = (NotifyIcon)sender;
                                            thisIcon.Visible = false;
                                            thisIcon.Dispose(); 
                                        }; 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-11-21T13:28:47.110

组件必须以正确的顺序放置，如下所示：

```
NotifyIcon.Icon.Dispose();

NotifyIcon.Dispose(); 
```

将此添加到`MainWindow`结束事件。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-05-30T10:09:21.500

当您按下退出或关闭按钮时，请使用此代码：

```
private void ExitButton_Click(object sender, EventArgs e)
{
    notifyIcon.Dispose();
    Application.Exit(); // or this.Close();
} 
```

当您想在表单关闭时使用此代码：

```
private void Form1_FormClosing(object sender, EventArgs e)
{
    notifyIcon.Dispose();
    Application.Exit(); // or this.Close();
} 
```

重要的代码是这样的：

```
notifyIcon.Dispose(); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-02-28T19:34:08.737

`notifyIcon.Visible = False`在`FormClosing`活动中使用

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-06T07:38:35.393

不幸的是，这是正常行为；这是由于 Windows 的工作方式。你真的无能为力。

有关一些建议，请参阅[NotifyIcon not dissappearing on Winforms App](https://stackoverflow.com/questions/1067844/issue-with-notifyicon-not-dissappearing-on-winforms-app)的问题，但没有一个对我有用。

另请参阅[应用程序关闭时通知图标停留在系统托盘中](https://stackoverflow.com/questions/10980029/notify-icon-stays-in-system-tray-on-application-close)

Microsoft 已在 Microsoft Connect 上将此标记为“无法修复”。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-07-24T20:36:15.793

对我有用的唯一方法是：

1.  在设计屏幕上更改 notifyicon1 属性 visible=false

2.  在主窗体“激活”事件中插入以下代码：

```
NotifyIcon1.Visible = True 
```

3.  在主窗体“关闭”事件中插入以下代码：

```
NotifyIcon1.Visible = false
NotifyIcon1.Icon.Dispose()
NotifyIcon1.Dispose() 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-22T21:42:59.013

我不认为 WPF 有它自己的 NotifyIcon，是吗？如果您使用的是第 3 方 Harcodet.Wpf.TaskbarNotification，请尝试以下操作：

为了防止我的应用在窗口关闭时关闭（在后台运行），我将关闭窗口（点击右上角的 x 按钮）和实际关闭（通过上下文菜单）的逻辑分开。要完成这项工作，请将上下文菜单设置`_isExplicitClose`为 true。否则，它只会隐藏窗口并继续运行。

这样做是在显式关闭时隐藏托盘图标和关闭前的表单。这样，应用程序关闭后图标就不会挂起。

```
private bool _isExplicitClose;
protected override void OnClosing(System.ComponentModel.CancelEventArgs e)
{
    base.OnClosing(e);

    if (!_isExplicitClose)
    {
        e.Cancel = true;
        Hide();
    }
}

protected void QuitService(object sender, RoutedEventArgs e)
{
   _isExplicitClose = true;
   TaskbarIcon.Visibility = Visibility.Hidden;
   Close();
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-14T00:59:59.563

`Application.DoEvents();`设置`notifyIcon.Icon`为配置后尝试`null`：

```
notifyIcon.Icon = null;
notifyIcon.Dispose();
Application.DoEvents(); 
```

并考虑`Environment.Exit(0);`代替`Process.GetCurrentProcess().Kill()`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-12T18:00:34.857

我可以告诉您，只需使用 .dispose() 方法即可解决问题，但如果您终止进程而不是退出应用程序，则不会调用该方法。

如果您已经构建了一个简单的 Windows 窗体应用程序，请参考[Application.Exit](http://msdn.microsoft.com/it-it/library/ms157894%28v=vs.110%29.aspx)，否则请参考[Environment.Exit](http://msdn.microsoft.com/it-it/library/system.environment.exit%28v=vs.110%29.aspx)更通用的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-01-12T16:05:04.197

我尝试了所有这些，但没有一个对我有用。在考虑了一会儿之后，我意识到创建“气球”的应用程序在它有机会实际处理气球之前就退出了。`Application.Exit()`我在包含`Application.DoEvents()`命令之前添加了一个 while 循环。这使我`NotifyIcon1_BalloonTipClosed`能够在退出之前真正完成对图标的处理。

```
while (notifyIcon1.Visible)
{
    Application.DoEvents();
}
Application.Exit(); 
```

并且提示关闭方法：（您需要包含`thisIcon.visible = false`才能使其正常工作）

```
private void NotifyIcon1_BalloonTipClosed(object sender, EventArgs e)
{
    var thisIcon = (NotifyIcon)sender;
    thisIcon.Icon = null;
    thisIcon.Visible = false;
    thisIcon.Dispose();
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-28T08:10:37.250

我和你有完全相同的问题。

正确的方法是将 WM_CLOSE 消息发送到进程。
我使用在本文中找到的 c# 代码。
[http://social.msdn.microsoft.com/Forums/vstudio/en-US/82992842-80eb-43c8-a9e6-0a6a1d19b00f/terminating-a-process-in-a-friendly-way](http://social.msdn.microsoft.com/Forums/vstudio/en-US/82992842-80eb-43c8-a9e6-0a6a1d19b00f/terminating-a-process-in-a-friendly-way)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-29T14:22:08.297

编辑 ...Designer.cs 的代码如下编码。

```
 protected override void Dispose(bool disposing)
           {
           if (disposing )
               {
               this.notifyicon.Dispose();
               }
           base.Dispose(disposing);
           } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-09T21:37:00.117

我无法使任何其他解决方案起作用。事实证明，它是上述所有内容的混合体！我一直在寻找和啄，直到我在调试和 EXE 执行模式下都有一个始终如一的工作解决方案！我不知道为什么 MSFT 会将此标记为“不会修复”？我希望我有这种自由！

```
 private void exitToolStripMenuItem_Click(object sender, EventArgs e)
    {
        //THIS CODE IS CRAZY BUT MUST BE DONE IN ORDER TO PROPERLY REMOVE THE SYSTEM TRAY ICON!
        //GREAT ARTICLE ON THIS ON STACK OVERFLOW
        //https://stackoverflow.com/questions/14723843/notifyicon-remains-in-tray-even-after-application-closing-but-disappears-on-mous

        //BTW THIS IS KIND OF A BLEND OF ALL THE SOLUTIONS BECAUSE I COULD NOT FIND A SINGLE SOLUTION THAT WOULD WORK!
        systray_icon.Visible = false;
        while (systray_icon.Visible)
        {
            Application.DoEvents();
        }
        systray_icon.Icon.Dispose();
        systray_icon.Dispose();
        Environment.Exit(1);
    } 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-04-12T09:41:52.317

正确的答案已经给出。但是您还必须提供延迟，例如使用计时器。只有这样，应用程序仍然可以删除背景中的图标。

```
private System.Windows.Forms.Timer mCloseAppTimer;
private void ExitButton_Click(object sender, EventArgs e) 
{ 
    notifyIcon.Visible = false; notifyIcon.Dispose; 
    mCloseAppTimer = new System.Windows.Forms.Timer(); 
    mCloseAppTimer.Interval = 100; 
    mCloseAppTimer.Tick += new EventHandler(OnCloseAppTimerTick); 
} 
private void OnCloseAppTimerTick(object sender, EventArgs e) 
{ 
    Environment.Exit(0); // other exit codes are also possible 
} 
```

# javascript - 将多个元素推送到数组

> ID：14723848
> 
> 赞同：413
> 
> 时间：2013-02-06T07:36:37.033
> 
> 标签：javascript

我正在尝试将多个元素作为一个数组推送，但出现错误：

```
> a = []
[]
> a.push.apply(null, [1,2])
TypeError: Array.prototype.push called on null or undefined 
```

我正在尝试做与我在 ruby​​ 中做的类似的事情，我在想`apply`这就像`*`.

```
>> a = []
=> []
>> a.push(*[1,2])
=> [1, 2] 
```

* * *

## 回答 #1

> 赞同：775
> 
> 时间：2013-02-06T07:40:20.727

您可以通过以下方式将多个元素推送到数组中

```
var a = [];

a.push(1, 2, 3);

console.log(a);
```

* * *

## 回答 #2

> 赞同：595
> 
> 时间：2016-02-03T02:57:03.427

现在在 ECMAScript2015（又名 ES6）中，您可以使用[扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)一次附加多个项目：

```
var arr = [1];
var newItems = [2, 3];
arr.push(...newItems);
console.log(arr);
```

查看[Kangax 的 ES6 兼容性](http://kangax.github.io/compat-table/es6/)表，了解哪些浏览器兼容

* * *

## 回答 #3

> 赞同：304
> 
> 时间：2013-02-06T07:41:14.063

`apply`当使用带有or的对象的大多数函数时`call`，`context`参数必须是您正在处理的对象。

在这种情况下，您需要`a.push.apply(a, [1,2])`（或更准确地说`Array.prototype.push.apply(a, [1,2])`）

* * *

## 回答 #4

> 赞同：84
> 
> 时间：2013-02-06T07:37:28.183

您可以使用[`Array.concat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)：

```
var result = a.concat(b); 
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2020-09-04T07:50:53.443

如果要添加多个项目，则必须使用`spread`运算符

```
a = [1,2]
b = [3,4,5,6]
a.push(...b) 
```

输出将是

```
a = [1,2,3,4,5,6] 
```

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2017-04-16T09:38:23.670

如果您想要替代`Array.concat`ECMAScript 2015（又名 ES6、ES2015）中的替代方案，它不会修改数组而是返回一个新数组，您可以像这样使用[扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)：

```
var arr = [1];
var newItems = [2, 3];
var newerItems = [4, 5];
var newArr = [...arr, ...newItems, ...newerItems];
console.log(newArr);
```

请注意，这与`push`方法不同，因为`push`方法会改变/修改数组。

如果您想查看某些 ES2015 功能是否在您的浏览器中工作，请查看[Kangax 的兼容性表](http://kangax.github.io/compat-table/es6/)。

如果您不想等待浏览器支持并希望在生产中使用 ES2015，您也可以使用[Babel或类似的转译器。](https://babeljs.io/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-04-04T13:45:45.560

有很多答案推荐使用：`Array.prototype.push(a, b)`. 这是个好方法，**但是**如果你有很大的 b，你会遇到堆栈溢出错误（因为 args 太多）。这里要小心。

请参阅[连接 N 个数组的最有效方法是什么？](https://stackoverflow.com/questions/5080028/what-is-the-most-efficient-way-to-concatenate-n-arrays)更多细节。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2021-08-20T04:18:05.457

更简单的方法是

```
a = []
a.push(1,2,3) 
```

另一种方法是

```
a = [...a, 4,5,6] 
```

如果你想创建另一个数组

```
const b = a.concat(7,8,9) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-31T07:04:47.057

一次推送多个对象通常取决于您如何声明`array`.

我就是这样做的

```
//declaration
productList= [] as  any; 
```

现在`push`记录

```
this.productList.push(obj.lenght, obj2.lenght, items); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-01-16T06:12:27.753

我有同样的疑问，就我而言，一个更简单的解决方案对我有用：

```
let array = []
array.push(1, 2, 4, "string", new Object())
console.log(array)
// logs [ 1, 2, 4, 'string', {} ] 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-10-09T12:45:05.543

请使用 ES6[扩展运算符](https://www.w3schools.com/react/react_es6_spread.asp)：

```
let a = [1,2,3];
let b = [4,5,6];
a = [...a,...b];
// [1,2,3,4,5,6] 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-03-20T12:31:51.073

```
var a=[];
a.push({
 name_a:"abc",
 b:[]
});

a.b.push({
  name_b:"xyz"
}); 
```

# android - on button click 切换xml布局页面

> ID：14723851
> 
> 赞同：1
> 
> 时间：2013-02-06T07:36:43.540
> 
> 标签：android, xml, eclipse, android-intent, android-manifest

我知道这个问题已经被问过了，但是当我这样做时出现错误：

`Intent toNextPage = new Intent(this, After_report_page.class); startActivity(toNextPage);`

我该如何解决这个问题（我希望在按钮上单击那个 xml 布局切换）？

谢谢你，波阿斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:41:18.300

使用 Activity Context 来启动下一个 Activity 而不是 View as：

```
Intent toNextPage = new Intent(Your_current_Activity.this,
                                             After_report_page.class); 
startActivity(toNextPage); 
```

或者您可以使用 `view.getContext()` 以下方式从启动新活动中获取上下文：

```
Intent toNextPage = new Intent(view.getContext(), After_report_page.class); 
startActivity(toNextPage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:42:59.723

试试这个：

```
 Button.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        Intent toNextPage = new Intent(YourActivity.this, After_report_page.class);
                        startActivity(toNextPage);
                    }
                }); 
```

如果你把它作为intent的参数放在点击事件里面，它就不起作用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:48:59.003

尝试如下：

> ```
> private Context mContext;
>    public class IntentActionDemo extends Activity 
>   {
>      mContext=IntentActionDemo.this;
> 
>      @Override
>      public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.main);        
>     Button butn = (Button) findViewById(R.id.intentButton);
> 
>         butn.setOnClickListener(new View.OnClickListener() {
>             public void onClick(View v) {
>       Intent myIntent = new Intent(mContext, After_report_page.class);
>       startActivity(myIntent);
>      }
>     }); 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T08:10:17.733

//我昨天通过使用单选按钮简单地做到了这一点

使用单选检查在一个 xml 中制作 2 个布局，单击哪个，并使您的布局可见性消失和可见虎钳诗句。

```
final RadioButton ccDoc=(RadioButton)findViewById(R.id.cc_doc);
        ccDoc.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                if(ccDoc.isChecked()){
                    findViewById(R.id.cc_doc_lay).setVisibility(View.VISIBLE);
                    findViewById(R.id.outside_doc_lay).setVisibility(View.GONE);
                }else {
                    findViewById(R.id.outside_doc_lay).setVisibility(View.VISIBLE);
                    findViewById(R.id.cc_doc_lay).setVisibility(View.GONE);
                }
            }
        }); 
```

# mysql - 在单个查询中更新 2 个表中的随机记录

> ID：14723852
> 
> 赞同：0
> 
> 时间：2013-02-06T07:36:46.740
> 
> 标签：mysql, sql, sql-update

鉴于此表结构，

```
categories{id}
product_models{id, category_id}
products{product_model_id, category_id} 
```

已经填充了，但是使用`product_models.category_id`,`products.category_id`并且`products.product_model_id`全部设置为`NULL`，我需要一个查询来“连接”它们，执行以下操作：

1.  将 all , 设置为表`product_models.category_id`中的随机值`categories`
2.  将 all , 设置为表`products.product_model_id`中的随机值`product_models`
3.  将 each 设置`products.category_id`为新分配`product_models`记录的 category_id 的值。

可以在单个查询中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:10:09.240

不

RAND 函数在任何查询中只执行一次，并且无论使用多少次都有效地“锁定”到单个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:29:55.123

如果我能够理解您的要求，这就是您的要求

```
 Create Procedure usp_insert
 as
 begin
    declare @rand1 int
    declare @rand2 int
    set @rand1=rand()*10000
    set @rand2=rand()*10000

    insert into categories (id) values (@rand1)
    insert into product_models{id, category_id} values (@rand2,@rand1)
    insert into products{product_model_id, category_id} values (@rand2,@rand1)
End 
```

上面的块将在您的数据库中创建一个过程

执行该过程使用以下代码

```
exec usp_insert 
```

该过程的每次执行将在每个表中插入一行，例如假设生成的随机数是 3423,2345，那么它将 1\. 在类别表中插入一行，3423 作为 id 2\. 在 product_models 表中插入一行，3423 作为 category_id和 2345 作为 id 3\. 在 product_models 表中插入一行，其中 3423 作为 category_id，2345 作为 product_model_id

您可以根据需要调整插入查询。

# php - 如何连接到新的汇编密钥？

> ID：14723855
> 
> 赞同：1
> 
> 时间：2013-02-06T07:36:56.997
> 
> 标签：php, rest, curl, assembla

新的 assembla api 通过 REST-access 提供了新的身份验证。我想连接 PHP 和 curl，但我不确定如何包含`api-x-key`and`api-x-secret`作为选项：

**在终端中使用 curl 调用**：

```
curl -H "X-Api-Key: XXX" -H "X-Api-Secret: XXX" https://api.assembla.com/v1/spaces/XXX/tickets.json 
```

**在 PHP 中（我的问题）**：

```
$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_URL => ' https://api.assembla.com/v1/spaces/XXX/tickets.json',
    CURLOPT_POSTFIELDS => ???maybe???
));
$response = curl_exec($ch);

print_r($response); 
```

这是我的第一次尝试，不包括 api-key/api-secret 中的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:50:21.457

将这些键作为标题发送。尝试这个：

```
$headers    = array('X-Api-Key: YOUR_KEY',
        'X-Api-Secret: YOUR_SECRET'
    );

$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_URL => ' https://api.assembla.com/v1/spaces/XXX/tickets.json',
    CURLOPT_HTTPHEADER => $headers
));
$response = curl_exec($ch);

print_r($response); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:12:09.870

**PHP 中的汇编 API：**

```
$headers    = array('X-Api-Key: YOUR_KEY',
    'X-Api-Secret: YOUR_SECRET'
);

$ch = curl_init();
    curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_URL => ' https://api.assembla.com/v1/spaces/XXX/tickets.json',
    CURLOPT_HTTPHEADER => $headers
));
$response = curl_exec($ch);

print_r($response); 
```

此代码打印一个空白页。请不要回复帮助

# python - mySQLdb 选择格式？

> ID：14723861
> 
> 赞同：0
> 
> 时间：2013-02-06T07:37:26.053
> 
> 标签：python, string-formatting, mysql-python

```
c.execute("select a, c, d from table")
for row in c:
    print(row) 
```

每当我这样做时，输出总是：

```
('text field 1', 'text field 2', 'text field 3', 'text field 4') 
```

我一直在谷歌搜索，找不到答案，有没有办法让它像

```
text field 1, text field 2, text field 3, text field 4 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:39:53.513

您打印了整行，这是一个元组。要使用一些格式打印它，您可以使用[`''.join()`](http://docs.python.org/2/library/stdtypes.html#str.join)：

```
', '.join(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:27:29.957

或者你可以使用这个

`from itertools import imap`

```
",".join(imap(str, row)) 
```

# spring - 优雅地停止具有 receiveTimeout = -1 的 DefaultMessageListenerContainer

> ID：14723864
> 
> 赞同：1
> 
> 时间：2013-02-06T07:37:40.257
> 
> 标签：spring, jms, activemq, spring-jms

有人可以指出一种方法来优雅地停止 Spring 中用 a 定义的 DefaultMessageListenerContainer `receiveTimeout = -1`（即，它正在使用 javax.jms.MessageConsumer#receive 的阻塞版本）？

实际上，我已经尝试了 DMLC 的 stop() 和 shutdown() 方法，但是消费者线程卡在了 receive() 调用上。

```
"heartBeatContainer-1" prio=6 tid=0x0304d800 nid=0x1d20 in Object.wait() [0x037ef000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x22c48ab0> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.activemq.SimplePriorityMessageDispatchChannel.dequeue(SimplePriorityMessageDispatchChannel.java:87)
    - locked <0x22c48ab0> (a java.lang.Object)
    at org.apache.activemq.ActiveMQMessageConsumer.dequeue(ActiveMQMessageConsumer.java:452)
    at org.apache.activemq.ActiveMQMessageConsumer.receive(ActiveMQMessageConsumer.java:504)
    at org.springframework.jms.connection.CachedMessageConsumer.receive(CachedMessageConsumer.java:70)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveMessage(AbstractPollingMessageListenerContainer.java:430)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:310)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:263)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1069)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1061)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:958)
    at java.lang.Thread.run(Thread.java:662) 
```

我无法关闭连接，因为还有其他侦听器应该继续使用消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:04:07.653

这就是重点`receivetimeout`——所以线程可以检查容器是否已关闭。将其设置为 -1 意味着线程将在 JMS 客户端中阻塞，直到出现消息。超时、检查容器状态和进行另一次接收没有太多开销。如果您不喜欢默认值，请将其设置为更高的数字（只要您在关闭容器时可以忍受延迟）。但是，将其设置为 -1 会导致您看到的行为。

# java - java将字符串格式的日期转换为时间戳

> ID：14723872
> 
> 赞同：-4
> 
> 时间：2013-02-06T07:38:15.890
> 
> 标签：java

我正在尝试将这种格式的日期：**“Fri Mar 1, 2013 4:30 PM”** 转换为这种格式的时间戳值： **yyyy-mm-dd hh:mm:ss**。

例子：

`String str = 'Fri Mar 1, 2013 4:30 PM'`应该输出：`"2013-01-14 23:59:59"`

这是我尝试过的：

```
String string = "January 2, 2010";
Date date = new SimpleDateFormat("MMMM d, yyyy", Locale.ENGLISH).parse(string); 
System.out.println(date); 
```

这输出：`Sat Jan 02 00:00:00 GMT+05:30 2010`

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:43:16.270

假设您将日期和时间作为日期。所以，你需要[SimpleDateFormatter](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)`format`的方法。探索 API 中的更多模式。

```
public static void main(String[] args) {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:SS");
        Date currDate = new Date();
        System.out.println("Current Date: " + currDate);
        System.out.println("Formatted Date: " + sdf.format(currDate));
} 
```

输出：

```
Current Date: Wed Feb 06 13:15:19 IST 2013
Formatted Date: 2013-02-06 13:15:750 
```

如果您有字符串格式的日期，则需要先将其**解析**为 Date 格式，然后再进行格式化。

例子：

```
 String str = "Fri Mar 1, 2013 4:30 PM";
   SimpleDateFormat sdf2 = new SimpleDateFormat("E MMM dd, yyyy HH:mm a"); 
   Date parsedDate = sdf2.parse(str);
   System.out.println("Parsed Date: " + parsedDate);

   sdf2 = new SimpleDateFormat("yyyy-MM-dd HH:mm:SS a");
   System.out.println("Formatted Date: " + sdf2.format(parsedDate)); 
```

输出：

```
Parsed Date: Fri Mar 01 04:30:00 IST 2013
Formatted Date: 2013-03-01 04:30:00 AM 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T08:37:44.277

```
String str = "Fri Mar 1, 2013 4:30 PM";          
SimpleDateFormat sdf1 = new SimpleDateFormat("EEE MMM dd, yyyy hh:mm a");
Date date = sdf1.parse(str);
System.out.println("Date Object:" + date);
SimpleDateFormat sdf2 = new SimpleDateFormat("yyyy-MM-dd HH:mm a");
System.out.println("Formatted Date:" + sdf2.format(date)); 
```

输出：

```
日期对象：2013 年 3 月 1 日星期五 16:30:00 EST

格式化日期：2013-03-01 16:30 PM

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T12:42:59.277

前两个答案是 2013 年的好答案。时间在进步，Java 中时间信息的处理也在进步。如果您可以使用 Java 8，请自己使用新`java.time`包中的日期和时间类（也在 ThreeTen Backport 中向后移植到 Java 6 和 7）：

```
 String str = "Fri Mar 1, 2013 4:30 PM";
    LocalDateTime ldt = LocalDateTime.parse(str, 
            DateTimeFormatter.ofPattern("EEE MMM d, uuuu h:mm a", Locale.ENGLISH)); 
```

这会产生一个没有时区的时间`2013-03-01T16:30`。要将其格式化为所需的输出格式：

```
 System.out.println(ldt.format(DateTimeFormatter.ofPattern("uuuu-MM-dd HH:mm:ss"))); 
```

这打印：

```
2013-03-01 16:30:00 
```

如果您想要 UTC 时间戳，您可以像这样从计算机的时区转换：

```
ldt.atZone(ZoneId.systemDefault()).toInstant() 
```

由于我在中欧时区，因此在我的计算机上它会生成一个时间点`2013-03-01T15:30:00Z`（其中`Z`表示 UTC；`Instant`对象始终以 UTC 打印）。

链接：[ThreeTen Backport Home](http://www.threeten.org/threetenbp/)

# google-maps - 在谷歌地图标记上显示自定义数据（类似于 Instagram 照片地图）

> ID：14723873
> 
> 赞同：1
> 
> 时间：2013-02-06T07:38:21.850
> 
> 标签：google-maps, google-maps-api-3

我是 Google Maps API 的新手，一直在寻找自定义标记的方法。提供的 API 只允许我更改图标，但我真正需要的是将 HTML 内容传递给标记。我想将一些数据（例如*数字*）传递给标记，当用户单击标记时，更多详细信息将显示在 infoWindow 中。（类似[这个网站](http://weatherhopper.com/#)）

起初，我认为它类似于 Instagram 照片地图，你有一个区域内的照片摘要。但后来我意识到这更像是一个markerClusterer，它只是计算范围内的标记总数（如果我错了，请纠正我）。

我仍然找不到在标记上显示自定义数据的任何方法。如果没有可用的默认 API，我可以使用任何插件吗？

PS第一次发问题，希望清楚！非常感谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:31:19.293

基本上你在链接地图上看到的不是真实的`google.maps.Markers`，你看到的是[自定义叠加](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)。使用自定义覆盖，您可以在地图上绘制任何 HTML 内容，例如这些标签。

您可以使用内置方法来绘制这些叠加层，也可以使用类似[infobox的库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:16:50.190

您可以使用[styledmarker](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/styledmarker/docs/examples.html)库自定义标记。该库用于创建可以以不同方式设置样式的标记，例如更改颜色或形状，或添加文本标签。下面是如何将此库与 XML 一起使用的示例。

```
for (var i = 0; i < markers.length; i++) {  
      var text = markers[i].getAttribute("text");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
     var styleMaker = new StyledMarker({styleIcon:new StyledIcon(StyledIconTypes.MARKER,{color:"00ff00",text:text}),position:myLatLng,map:map}); 
```

}

我有一个[DEMO](http://daviestrachan.co.uk/test/viewmarkers.html)使用它与使用 XML 的 2 个表状态中心和美国城市的数据库。标记显示州和州内城市的数量。

# linux - 命令日志 Ubuntu

> ID：14723875
> 
> 赞同：-1
> 
> 时间：2013-02-06T07:38:24.627
> 
> 标签：linux, ubuntu, system-administration

无论如何，我可以记录某个用户或用户组在 ubuntu CLI 中运行的所有命令。我需要跟踪某组用户运行的所有命令说

> **UsrGrp1:usr1,usr2,usr3**

因为我正在运行一个机器集群，并且所有机器都由不同的用户控制。我需要通过每台机器的 root 用户来监控这些。

**history**命令给了我所有的命令日志。但它可以由用户自己修改。所以我只需要将日志保存在 root 用户下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:36:11.817

您可以尝试[logkeys](http://code.google.com/p/logkeys/)一个用于 linux 的键盘记录器。另一个选项可能是[脚本](http://linux.die.net/man/1/script)，但是您需要编写一个触发器以在每次用户登录时启动它。

# php - 页面详细说明后的异步作业

> ID：14723877
> 
> 赞同：1
> 
> 时间：2013-02-06T07:38:39.057
> 
> 标签：php, asynchronous, flush

我有一个 php 页面，它更新数据库中的记录并用 json 字符串回答客户端。

在此之后，我需要通过 SMTP 连接发送一些电子邮件，这可能需要一些时间，我不想让客户端等待它。我只想要 json 答案，而不是想要关闭连接、刷新输出然后开始发送邮件。有可能吗？

# delphi - 将所有这些 if 语句写得更干净

> ID：14723890
> 
> 赞同：3
> 
> 时间：2013-02-06T07:40:00.880
> 
> 标签：delphi, delphi-xe2

我有一个问题，当我向 if 语句添加更多“名称”时。我很难看到那里是否都准备好了。因此，有没有更干净的方法来写这个我可以很容易地看到那里读到了哪些名字？

```
 function TfDB.GetW(name: string) :integer;
  begin
     result := 0;
    if (name = 'Destacker') or (name='Router') or (name = 'Turn Table') Then
        result := 57;
    if (name = 'Laser Marker') then
        result := 66;
    if (name = 'SP28')OR(name='Chamber') OR (name = 'CM402') OR (name = 'SP60') then
        result := 65;
    if (name = 'Conveyor') OR (name = 'Slide Gate') OR (name = 'Washer') then
        result := 51;
    if (name = 'BTU') OR (name = 'Furukawa') OR (name = 'Radial') OR (name = 'HDP') or (name = 'MSR') OR (name = 'Koki') Or (name = 'MSF') then
        result := 98;
    if (name = 'Buffer')OR (name = 'Reclaimer') OR (name = 'ECO Roller') then
        result := 49;
    if (name = 'Inverter') or (name = 'CNC') then
        result := 42;
    if (name = '3-D Check Station') or (name='Screw Machine') or (name='VT-Win') or(name='Component Viewer') then
        result := 58;
    if (name = 'AOI Panel') or (name='AirBlow') then
        result := 42;
    if (name='Mag Loader') or (name='Soltec') then
        result := 73;
    if (name='Tester') then
        result := 33;
    if (name='LoadBox') then
        result := 17;
    if (name = 'DeltaWave') then
        result := 89;
    if (name = 'ScrewFeeder') then
        result := 25;
    if (name='Pump') then
        result := 33;

    //if result is 0 show message error.

  end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T07:46:01.380

您可以创建一个字典，`TDictionary<string, Integer>`并将其存储在一个全局变量中。在初始化时使用名称到宽度的映射加载它。然后你的函数就变成了单行。

```
var
  WidthMapping: TDictionary<string, Integer>;
....
function TfDB.GetW(name: string) :integer;   
begin
  if not WidthMapping.TryGetValue(name, Result) then
    ... handle error condition
end;
....
initialization
  WidthMapping := TDictionary<string, Integer>.Create;
  WidthMapping.Add('Destacker', 57);
  WidthMapping.Add('Router', 57);
  ... etc.
....
finalization
  WidthMapping.Free; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T07:46:13.690

是的，不要使用`if`语句，而是使用数组和循环：

```
const
  NAME_RESULT: array [1..2] of record
    Name: string;
    Value: Integer;
  end = (
    (Name: 'whatever'; Value: 57)
  , (Name: 'Something else'; Value: 57)
  );
var
  i: Integer;
begin
  Result := 0; // or whatever you need your default to be
  for i := Low(NAME_RESULT) to High(NAME_RESULT) do
    if SameText(name, NAME_RESULT[i].Name) then
    begin
      Result := NAME_RESULT[i].Value;
      Break;
    end;
end; 
```

附加优势：您不需要将返回相同值的名称保留在一起，但可以按字母顺序对列表进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:14:21.453

Create an array (or dynamic array if you want to further add more names without any concerns of the array dimensions) of strings that contains all the names you want to test for (here I assumed fixed size string array):

```
 var test = array [1..50] of string;
    a[1]:='Destacker';
    a[2]:='Router'; 
```

etc.

In your test routine you may use the *case* keyword like this:

```
 function TfDB.GetW(index: integer) :integer
    begin
     result:=0;
     case index of
      1,2,3: result:=57;
      4: result:=66
     end
    end; 
```

I think it's easier this way

# mysql - 在 Webmatrix 上安装 Wordpress 时出现数据库错误

> ID：14723895
> 
> 赞同：1
> 
> 时间：2013-02-06T07:40:17.993
> 
> 标签：mysql, wordpress, webmatrix-2

我对 CMS 和 Word Press 完全陌生，尽管我听说过很多。我最近下载并安装了 Webmatrix2，在 App Gallery 中，我点击了 Wordpress 来安装 Wordpress。它要求输入一个名称，然后检查我是否安装了 Mysql，我已经安装了。**然后我输入了root**的密码，它给了我以下错误： ![错误](../Images/aa5fbe2e459cc5ef95ee23b0ffe628d6.png)

我正在输入设置 MySQL 时使用的唯一密码。我还尝试使用 MS SQL Server 和 MYSQL Server 安装 Joomla，同样的错误！请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:16:37.633

我曾经也遇到过这个问题，但是我只是卸载了 MySQL 和 WebMatrix，然后安装了 WebMatrix 并进入了应用程序库并安装了 Wordpress（并自动安装了 SQL）我被要求给它一个新密码并解决了问题

# hibernate - Java Web 应用程序的休眠

> ID：14723902
> 
> 赞同：0
> 
> 时间：2013-02-06T07:40:38.327
> 
> 标签：hibernate, jpa

我正在使用带有 c3p0 的 Hibernate（用于连接池）。

我已经使用 persistence.xml 文件设置了我的连接详细信息。这是我的 persistence.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence persistence_2_0.xsd">
<persistence-unit name="LBSV1.0" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>xx.dataobject.CompanyDO</class>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
        <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
        <property name="hibernate.connection.url" value="jdbc:mysql://xx.xx.xx.xx:xxxx/lbs?autoReconnect=true"/>
        <property name="hibernate.connection.username" value="username"/>
        <property name="hibernate.connection.password" value="password"/>
        <property name="hibernate.generate_statistics" value="true"/>
        <property name="hibernate.cache.provider_class" value="org.hibernate.cache.OSCacheProvider"/>
        <property name="hibernate.cache.use_second_level_cache" value="true"/>
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.format_sql" value="true"/>
        <property name="hibernate.c3p0.min_size" value="5"/>
        <property name="hibernate.c3p0.max_size" value="20"/>
        <property name="hibernate.c3p0.timeout" value="1800"/>
        <property name="hibernate.c3p0.max_statements" value="50"/>
        <property name="hibernate.c3p0.idle_test_period" value="300"/>
        <property name="c3p0.preferredTestQuery" value="select * from status"/>
        <property name="c3p0.testConnectionOnCheckout" value="true"/>
        <property name="c3p0.debugUnreturnedConnectionStackTraces" value="true"/>

    </properties>
</persistence-unit> 
```

该应用程序运行良好。应用程序正在获取、插入、删除和更新数据。但是如果应用程序空闲超过 8 小时，那么我们会收到以下错误：

```
05 Feb 2013 19:40:25 49640738 [http-8080-8] ERROR root  - [SubscriberDataManager]****** Enable to get Subscriber Details due to : The last packet successfully received from the server was 49,165,385 milliseconds ago.  The last packet sent successfully to the server was 49,165,386 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem. 
```

在 URL 中添加了建议的“autoReconnect=true”。我还搜索了连接超时问题并在“persistence.xml”文件中添加了所需的属性值，但错误仍然存​​在。

这是 c3p0 的初始化日志条目：

```
06 Feb 2013 12:00:56 149355789 [http-8080-1] INFO  com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource  - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@9263d39c [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@77f9bf08 [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> true, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> z8kfsx8s1cc19kywfwqwq|1bdcbb2, idleConnectionTestPeriod -> 300, initialPoolSize -> 5, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 1800, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 20, maxStatements -> 50, maxStatementsPerConnection -> 0, minPoolSize -> 5, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@7a7a7ef8 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> z8kfsx8s1cc19kywfwqwq|1b8737f, jdbcUrl -> jdbc:mysql://**.**.**.**:****/lbs?autoReconnect=true, properties -> {user=******, password=******, autocommit=true, release_mode=auto} ], preferredTestQuery -> select * from status, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> true, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> z8kfsx8s1cc19kywfwqwq|68097d, numHelperThreads -> 3 ] 
```

谁能告诉我

1.  我在 persistence.xml 文件中的设置有什么问题？

2.  或者 Hibernate 是否与连接设置产生了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T10:10:27.790

就好像连接池有一个连接的引用，但是当它实际尝试使用它时 - 发现连接无效！:-O

所以我认为数据库正在超时连接，而连接池对此一无所知。

您问题中的一段文字可能表明答案：

```
"is longer than the server configured value of 'wait_timeout'" 
```

因此，我认为您需要查看 MySql 中配置的 wait_timeout 设置。请记住，您正在配置连接池大小（例如 hibernate.c3p0.max_size=20），但 MySql 数据库具有相同的设置。所以（好吧，实际上不确定 MySql 中是否有等价物——这里只是原则性地谈论）如果你的 MySql 数据库配置为只允许 10 个连接——那么连接池将永远不会增长到你配置的最大大小。

您可以在您使用的 MySql .cnf 文件中找到“wait_timeout”设置。

在 Linux 下：

```
cat /etc/mysql/my.cnf | grep -i wait 
```

默认值为 28800（8 小时） - 因此您需要增加它。让我们考虑一下。假设有人工作到下午 5 点，第二天早上 8 点又回来工作——那已经是 15 个小时了。因此，这可以为您提供一个关于您需要将其设置为什么值的指南。

除了 - 是的，向应用程序抛出错误真的很糟糕......但是，是的，我认为增加wait_timeout是一种好习惯。即使没有抛出错误：假设你有 100 万人;) 早上 8 点上班......实施很可能真的很难在几分钟内获得一百万个新连接（昂贵的操作）所以在在涉及许多连接的情况下，不能允许连接过期。

当我遇到同样的问题时，我对此做了一些进一步的说明（但与您的设置无关，但可能对其他人有用）

```
Database connections are managed by c3p0\. The database must not prematurely timeout connections managed by c3p0.
    (a) "Check the system configuration on your database. MySQL has a wait_timeout setting which will close the connections idle over a period of time. If your idle_test_period and timeout are greater than MySQL wait_timeout (28800 seconds by default), your unused connections will have chance to be reset by MySQL server before tested or timed out by C3p0."
    (b) "Make sure the value here <property name="hibernate.c3p0.idle_test_period">100</property> which is 100 is less than the wait_timeout set for mysql (by default it is 8 hrs 
```

# c# - 可以在本地主机上访问远程访问的数据库，但不能从服务器访问

> ID：14723911
> 
> 赞同：1
> 
> 时间：2013-02-06T07:41:26.700
> 
> 标签：c#, sql-server, asp.net-mvc-3, hosting, database-connection

我已经在自己的计算机上本地部署了我的 Web 应用程序（ASP.NET MVC 3 C#），然后通过 Godaddy.com 托管服务器上的 FTP 工具上传文件。除了数据库连接之外，该网站就像一个魅力。我已经通过生成我的表的脚本来部署数据库，并在 godaddy 数据库服务器（SQL Server）中创建了一个数据库，并且只需执行脚本以在服务器数据库上创建包含数据的表。我已经根据提供者关于 connectionString 的指南配置了 web.config 连接字符串。

问题：

我在本地计算机上以及主机服务器上的文件上都使用了相同的 web.config，并且具有相同的 connectionString 和所有内容。

*   当我在本地计算机上的本地计算机上运行我的未部署版本的 Web 应用程序时。它可以完美地访问数据库，而在获取数据时没有任何问题。

*   但是当我在互联网上打开我的 Live 网站时，它给了我“找不到资源”错误。

我已经提到了客户服务的问题，他们花了几个小时检查我的托管帐户中的所有内容，但没有发现任何异常或错误。但问题仍然存在。

所以从技术上讲，我正在使用 SAME web.config 尝试连接到 SAME 数据库，但它在本地工作，但不在服务器上。

ASP.NET MVC 建模中是否有我遗漏或不知道的内容？这个问题让人抓狂。任何帮助将不胜感激。

编辑：

```
<connectionStrings>
    <add name="CarContext" connectionString="Data Source=moamzia.db.10412552.hostedresource.com; Initial Catalog=myID; User ID=myId; Password='Mypassword';" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我也刚刚意识到我的链接在互联网上不起作用。可能是我上传文件的方式有误还是什么？因为我的控制器和模型都在应用程序的部署版本中丢失。那么当控制器不在其文件中时，本地主机如何找到控制器？

更新：

谢谢大家的意见。

经过一番研究和调查，我发现问题出在服务器上的 IIS 或编译器或文件目录之类的问题上。我这么说的原因是互联网上的网站根本不编译任何 C# 代码。它只是编译纯 HTML 和 CSS 文件。

几个小时后，现在当我在互联网上打开网站时出现此错误：

```
Server Error in '/' Application.
Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 
```

但是，不幸的是，我对 IIS 或其在网站部署中的作用不太熟悉。我想任何有关这方面的信息都会非常有帮助。

谢谢你。

# javascript - 在iOS中将字符串传递给JavaScript无法获取调用的函数

> ID：14723916
> 
> 赞同：2
> 
> 时间：2013-02-06T07:41:58.520
> 
> 标签：javascript, iphone, ios

花了整个晚上谷歌搜索这个，仍然没有骰子。我只是想将字符串传递给嵌入式 html/javascript 测试文件。我没有收到任何错误，但我也没有得到调用的函数：[

这是我得到的代码明智的：

详细控制器.h

```
#import <UIKit/UIKit.h>

@interface DetailController : UIViewController<UIWebViewDelegate>{
    UIWebView *webView;
}

@property (nonatomic, strong) NSArray *Detailinfo;
@property (nonatomic, strong) IBOutlet UILabel *DetailName;
@property (nonatomic, strong) IBOutlet UILabel *dob;
@property (nonatomic, retain) IBOutlet UIWebView *webView;

@end 
```

详细控制器.m

```
#import "DetailController.h"

@interface DetailController ()

@end

@implementation DetailController
@synthesize webView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    self.navigationItem.hidesBackButton = YES;
    UINavigationItem *topBar;
    topBar.title = self.Detailinfo[0];
    self.DetailName.text = self.Detailinfo[0];
    self.dob.text = self.Detailinfo[1];

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"javascriptTest" ofType:@"html"]];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [self.webView loadRequest:requestObj];
    self.webView.delegate = self;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)webViewDidFinishLoad:(UIWebView *)webView{

    [self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"loadText(%@)", self.Detailinfo[1]]];

}

@end 
```

和 HTML 文件 javascriptTest.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Test JavaScript</title>
<script>
function loadText(txtString)
{
    var divd = document.createElement('div');
    divd.innerHTML = "<p>" + txtString + "</p>";
    document.body.appendChild(divd);
    document.getElementById('info').value = "";
}
</script>
</head>
<body>
    loaded
<!--
<input type="text" id="info" />
<button onclick="loadText(document.getElementById('info').value)"> Load Text </button> 
-->
</body>
</html> 
```

任何帮助深表感谢 ：]

更新正如@ACB所说，只需要在javascript函数中添加''`@"loadText('%@')"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:11:43.983

你需要改变，

```
@"loadText(%@)" 
```

到

```
@"loadText('%@')" 
```

由于您将字符串传递给此 javascript 函数，因此它应该在引号内。

正如法比奥所说，如果字符串中有任何内容，您可能必须转义该字符串`"`。

# css - WYSIHTML5 如何输出内联 CSS？

> ID：14723920
> 
> 赞同：2
> 
> 时间：2013-02-06T07:42:17.307
> 
> 标签：css, wysihtml5

我正在运行 WYSIHTML5 以允许自己输入电子邮件文本并将其格式化以作为 HTML 发送。但是，当我查看格式化文本的 HTML 时，我会得到与颜色元素关联的类。这是预期的行为，但由于我需要在电子邮件中发送输出，因此我希望将这些颜色放在内联 CSS 中，因为我无法在电子邮件中附加 CSS 文件。这里的例子

```
<span class="wysiwyg-color-green">Testing</span> 
```

也就是说，如果我为文本选择绿色：`Testing`. 有什么方法可以修改绿色使其成为 html 本身的一部分，例如

```
<span style="color:green">Testing</span> 
```

我试图搜索这个但找不到，所以我没有先寻找它就不会问。如果有人可以请指出某个地方。即使是指向任何指南的链接，也可以。我不希望你花时间为我写代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T09:07:35.230

你可以用 php 做到这一点：

```
str_replace ( 'class="wysiwyg-color-green"', 'style="color:green"' ,$html) 
```

你可以用 javascript 做同样的事情，尽管在服务器端做所有事情总是更安全。 [http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T01:22:48.160

这是我使用的 javascript 代码，但注意上面的 Jean-Georges 警告可能是个好主意：

```
replaceColorStylesWithInlineCss = function (htmlContents){
    result = htmlContents.replace('class="wysiwyg-color-black"', 'class="wysiwyg-color-black" style="color:black"');
    result = result.replace('class="wysiwyg-color-silver"', 'class="wysiwyg-color-silver" style="color:silver"');
    result = result.replace('class="wysiwyg-color-gray"', 'class="wysiwyg-color-gray" style="color:gray"');
    result = result.replace('class="wysiwyg-color-maroon"', 'class="wysiwyg-color-maroon" style="color:maroon"');
    result = result.replace('class="wysiwyg-color-red"', 'class="wysiwyg-color-red" style="color:red"');
    result = result.replace('class="wysiwyg-color-purple"', 'class="wysiwyg-color-purple" style="color:purple"');
    result = result.replace('class="wysiwyg-color-green"', 'class="wysiwyg-color-green" style="color:green"');
    result = result.replace('class="wysiwyg-color-olive"', 'class="wysiwyg-color-olive" style="color:olive"');
    result = result.replace('class="wysiwyg-color-navy"', 'class="wysiwyg-color-navy" style="color:navy"');
    result = result.replace('class="wysiwyg-color-blue"', 'class="wysiwyg-color-blue" style="color:blue"');
    result = result.replace('class="wysiwyg-color-orange"', 'class="wysiwyg-color-orange" style="color:orange"');
    return result
}; 
```

注意：我在那里保留了所见即所得的样式，因为我正在保存到数据库并希望它在我再次加载时在 wysihtml5 部分中正确显示。如果你聪明，就把它擦干。

# android - AsyncTask 进入等待状态

> ID：14723923
> 
> 赞同：0
> 
> 时间：2013-02-06T07:42:25.357
> 
> 标签：android, android-asynctask

我想在特定条件下取消异步任务。我正在做以下事情：

```
MyService.java

....
if(condition){

 asyncTask.cancel(true); // its return the true as well

}
...

MyAsynTask.java

...

protected Object doInBackground(Object... x) {
    while (/* condition */) {
      // work...
      if (isCancelled()){ // Here task goes in to wait state
 break;
  }
      else{
 //continue to download file

   }

    }
    return null;
 }
... 
```

使用 DDMS 我发现该任务进入等待状态。任何解决此问题的建议将不胜感激。 ![线程](../Images/0030f6bd31439e2a6434d1833bd33911.png)

谢谢，尤维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:06:45.733

AsyncTask 是 PoolExecutor 的一项工作。当您执行第一个任务时，Executor 创建第一个线程并在其上执行您的任务。任务执行完成后，线程不会被删除。它开始等待新任务。

所以看到 AsyncTask 线程处于等待状态是正常的。

PS 长时间操作最好不要使用AsyncTask。使用您自己的执行程序或线程。

PPS AsyncTask 从 4.x 开始使用单线程执行器。当心 ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:34:56.123

显式调用后`asyncTask.cancel(true);`，将调用该`onCancelled()`方法。尝试覆盖以下方法：

```
@Override
protected void onCancelled() {
    //what you want to do when the task was cancelled.
} 
```

# c - 在用户空间应用程序中使用自旋锁

> ID：14723924
> 
> 赞同：3
> 
> 时间：2013-02-06T07:42:27.767
> 
> 标签：c, linux, linux-kernel, locking, linux-device-driver

我正在尝试创建一个具有结构的内核模块，并且我想在用户空间应用程序中使用相同的结构，并且该应用程序与给定的模块一起使用。

主要问题是这个结构包含一个名为`spinlock_t type`. 它在内核中用于锁定，但不知道如何在用户空间应用程序中使用它。

```
struct new_struct
{
  ...some variable...
  spinlock_t u_lock;
}; 
```

有没有办法在用户空间应用程序中使用自旋锁。

或者是否有任何其他可以在内核和用户空间中使用的锁定技术，这样如果用户应用程序持有锁，内核模块应该无法获得它，反之亦然。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-18T05:35:03.787

内核自旋锁不适用于用户空间，因为如果使用 _irqsave/_irqrestore，它将禁用抢占和禁用 IRQ。在用户空间中甚至不可能抢占或禁用 IRQ。

[`pthread_spin_lock()`](https://man7.org/linux/man-pages/man3/pthread_spin_lock.3.html)我认为最好的尝试是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T08:03:54.600

我知道这个结构在内存中，在内核和用户进程之间共享。如果没有，您可以使用`ifdef KERNEL`在内核和用户空间中使用不同的锁定。

但是如果它是共享的，你就不能在上面使用 spinglocks，因为用户空间不能被允许阻塞内核。

处理它的简单方法是拥有内核中的所有信息，并让用户空间代码发出系统调用来访问它。

另一种方法是使用无锁数据结构（环形缓冲区很流行）进行这种通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:18:03.563

spinlooks 是内核结构，不能在用户空间中使用。对于用户空间，诸如 pthread mutex 之类的互斥锁是最好的选择。

如果您希望相同的代码也可以在用户空间和内核模式下工作，则需要使用 ifdefs。这`#ifdef KERNEL`将允许您在使用类型时进行选择。

您应该创建调用适当功能（spinlook 或互斥锁）的包装函数（可以是内联函数）。实际的实现是根据 ifdefs 编译的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T16:02:01.130

最好的方法是创建一个 IOCTL 接口来锁定你的内核资源。我假设您的内核模块向用户空间公开了一个字符驱动程序接口。这个来自用户空间的 IOCTL 调用将在调用时设置和重置内核自旋锁。您还可以使用相同的接口来检查资源是否被内核锁定。

# controller - Emberjs：从 App.ready 中访问应用程序控制器

> ID：14723925
> 
> 赞同：1
> 
> 时间：2013-02-06T07:42:32.163
> 
> 标签：controller, ember.js, loaded

我想从 App.ready 中设置 ApplicationController 的属性。但我看不出如何从这个函数中完成

```
App.ready = function() {
    this.controller.set("isLoaded", true) ;
} 
```

这样的事情可能吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:22:15.437

如果对象没有直接链接（Router > Controller > View），那么直接设置控制器值是不可能的，但我也会质疑为什么你希望从 ready 事件中在 ApplicationController 中设置一些东西。您可以采取两种选择。您可以创建一个新的 Ember 对象并从那里的 ready 事件中设置一个值，并让控制器观察该属性（[此处](http://jsfiddle.net/Deif/nv7y5/3/)为示例。第二个选项是响应 ApplicationView 上的“didInsertElement”事件（[此处](http://jsfiddle.net/Deif/nv7y5/1/)为示例）

选项1：

```
App = Em.Application.create({
    ready: function () {
        App.SomeObject.set('someValue', 'A value');
        alert('ready event fired');
    }
});

App.SomeObject = Em.Object.create({
    someValue: '1'
});

App.ApplicationController = Em.Controller.extend({
    someFunction: function () {
        // do something here (note that the original value of 1 for someValue is never set as the application
        // overwrites it immediately
    }.observes('App.SomeObject.someValue')
});

App.ApplicationView = Em.View.extend({    
    didInsertElement : function () {
        alert('view has been inserted into the dom');
        alert(App.SomeObject.get('someValue'));
    }
}); 
```

选项 2：

```
window.App = Em.Application.create({
    ready: function () {
        alert('app is ready');
    }
});

App.ApplicationController = Em.Controller.extend();

App.ApplicationView = Em.View.extend({    
    didInsertElement : function () {
        alert('view has been inserted into the dom');
    }
}); 
```

编辑：请注意，我很确定选项 1 很混乱，并且会被 Ember 开发人员不赞成（尽管我不能肯定地说）。

# javascript - Linkedin API url 的 XMLHttpRequest 返回 null

> ID：14723930
> 
> 赞同：0
> 
> 时间：2013-02-06T07:43:01.150
> 
> 标签：javascript, oauth, xmlhttprequest, cross-domain, linkedin

在我的 javascript 应用程序中，我想在 Linkedin 上执行人员搜索。由于此搜索必须在用户无需登录 Linkedin 的情况下工作，我使用 javascript OAuth 库和我的 Linkedin api 密钥、密钥、oauth 令牌和 oauth 秘密令牌来生成 api url。此网址如下所示：

[http://api.linkedin.com/v1/people-search:(people:(id,first-name,last-name,picture-url,location))?first-name=John&last-name=Smith&count=4&format= json&oauth_consumer_key=XXX&oauth_token=XXX&oauth_version=1.0&oauth_timestamp=XXX&oauth_nonce=XXX&oauth_signature_method=HMAC-SHA1&oauth_signature=XXX](http://api.linkedin.com/v1/people-search:(people:(id,first-name,last-name,picture-url,location))?first-name=John&last-name=Smith&count=4&format=json&oauth_consumer_key=XXX&oauth_token=XXX&oauth_version=1.0&oauth_timestamp=XXX&oauth_nonce=XXX&oauth_signature_method=HMAC-SHA1&oauth_signature=XXX)

当我直接在浏览器中输入网址时，它会提供我想要的结果。但是，执行此 url 的 javascript XMLHttpRequest 总是返回 null。在我看来，这说明跨域策略肯定有问题。然而，由于我已将我的域添加到我的 Linkedin 应用程序的 javascript api 域，我认为不会发生跨域问题。

谁能告诉我这里有什么问题？

PS：这是 XMLHttpRequest 的 javascript 代码：

```
var xhr=new XMLHttpRequest();
xhr.open("GET",url,true); // url = valid url like the one above
xhr.onreadystatechange=function() {
   if (xhr.readyState===4) {
      alert(xhr.responseText); // returns null
   }
};
xhr.send(null); 
```

# ruby-on-rails-3.2 - 在 Rails3 中，RAILS_ENV、config.assets.debug 和资产管道是如何关联的？

> ID：14723937
> 
> 赞同：0
> 
> 时间：2013-02-06T07:43:31.417
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

我们有 UAT 和生产环境来运行 rails 应用程序。UAT 使用 RAILLS_ENV=uat 和 RAILS_ENV=production 为生产服务器运行应用程序。对于部署，我们在本地机器上编译资产并将所有内容复制到这些服务器上，这样我们就不必在 UAT 和生产服务器上编译资产。

现在，我发现如果我设置 config.assets.debug = true，我必须使用与我在资产编译时指定的 env 相同的 RAILS_ENV 运行 rails 应用程序。否则，我会收到以下错误。

```
ExecJS::RuntimeUnavailable in Welcome#index

    Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes.
    (in /opt/myapp/app/assets/javascripts/ping.js.coffee) 
```

例如，如果我编译如下资产：

```
rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace 
```

并使用 config.assets.debug = true 将编译资产复制到 UAT 服务器（其中 RAILS_ENV 为 uat），它不适用于错误。

如果我设置 config.assets.debug = false 或使用 RAILS_ENV=production 运行应用程序，它工作正常。但是，我不明白为什么在设置 config.assets.debug = true 时不同的 RAILS_ENV 会出现问题。

谁能解释它们之间的关系？

# iphone - iPhone相机覆盖问题

> ID：14723941
> 
> 赞同：1
> 
> 时间：2013-02-06T07:43:41.353
> 
> 标签：iphone, ios, camera, overlay

我在我的 iPhone 应用程序中为相机使用自定义叠加，我已按照[本](http://www.devsrealm.com/objective-c/custom-camera-app-1/)教程进行操作。我的问题是 - 覆盖在快门打开之前出现，这意味着用户可以在快门上看到覆盖项（按钮、图像等）

我尝试使用计时器来延迟快门打开动画时的叠加外观，但这不是正确的方法。

有更好的主意吗？

```
-(void)onShowCam
{
   NSLog(@"sdadas");

    overlay = [[CustomOverlayView alloc]
           initWithFrame:CGRectMake(0, 0, SCREEN_WIDTH, SCREEN_HEIGTH)];

    overlay.delegate = self;

   ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:44:48.547

在 iPad 上不存在这个问题，并且默认情况下覆盖视图在快门动画的后面。但在 iPhone 上，覆盖显示在前面。

我找到了适合我的解决方案。

您必须在此方法中将覆盖视图设置为子视图：

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    if (!viewController)
        return;

    UIView* controllerViewHolder = viewController.view;
    UIView* controllerCameraView = [[controllerViewHolder subviews] objectAtIndex:0];
    UIView* controllerPreview = [[controllerCameraView subviews] objectAtIndex:0];
    [controllerCameraView insertSubview:self.overlayView aboveSubview:controllerPreview];
} 
```

希望能帮助到你

原文来源： [http ://www.alexcurylo.com/blog/2009/06/18/uiimagepickercontroller-in-3-0/](http://www.alexcurylo.com/blog/2009/06/18/uiimagepickercontroller-in-3-0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:07:17.837

尝试使用这个

```
 cameraOverlay=[[ImagePickerController alloc]initWithFrame:CGRectMake(0, 0, SCREEN_WIDTH, SCREEN_HEIGTH)];
         imagePicker.sourceType=UIImagePickerControllerSourceTypeCamera;
         imagePicker.delegate=self;
         imagePicker.showsCameraControls=NO;
         imagePicker.cameraFlashMode=UIImagePickerControllerCameraFlashModeOff;
         [imagePicker setCameraOverlayView:cameraOverlay];

//Show camera
         [self presentModalViewController:imagePicker animated:YES]; 
```

# ruby-on-rails-3 - 设计 ldap 可验证返回 401 错误

> ID：14723942
> 
> 赞同：0
> 
> 时间：2013-02-06T07:43:42.070
> 
> 标签：ruby-on-rails-3, devise, ldap

我正在 Rails 中制作一些应用程序，用户需要先登录才能查看内容。我使用`devise`and`ldap_devise_authenticatable`让用户通过现有的 LDAP 帐户登录。

但是，当我尝试使用我的帐户登录到我的应用程序时，`log-in failure occurs(401 error unauthorized)`即使我已经在 ldap 上拥有帐户。

我正在关注[本教程](http://www.blackfistsecurity.com/2011/12/rails-authentication-using-devise-and_27.html)

以下是我的 ldap 服务器页面的屏幕截图： ![在此处输入图像描述](../Images/997022946bd13bf3878080fd4a3e64a0.png)

我知道问题出在我的 ldap 配置文件中。如何正确配置它，以便我的应用程序将正确的字符串发送到 ldap 服务器，如上面的屏幕截图所示

我的 ldap.yml 的代码如下：

```
authorizations: &AUTHORIZATIONS
  group_base: ou=groups,dc=test,dc=com
  required_groups:
    - cn=admins,ou=groups,dc=test,dc=com
    - cn=users,ou=groups,dc=test,dc=com
    - ["moreMembers", "cn=users,ou=groups,dc=test,dc=com"]
  require_attribute:
    objectClass: inetOrgPerson
    authorizationRole: postsAdmin

## Environment

development:
  host: 172.16.100.6
  port: 389
  attribute: cn
  base: ou=People,dc=iitj,dc=ac,dc=in
  #admin_user: cn=admin,dc=test,dc=com
  #admin_password: admin_password
  ssl: false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:00:40.087

您是否尝试过设置属性：sAMAccountName？您还需要设置 admin_ser 和 admin_password 以匹配您在 LDAP 中拥有的帐户的凭据。

# android - 滚动视图仅在android中的纵向模式下禁用

> ID：14723947
> 
> 赞同：1
> 
> 时间：2013-02-06T07:44:00.803
> 
> 标签：android

我在我的 xml 中有一个滚动视图，但滚动视图应该只在手机的横向模式下工作，而不是在手机的纵向模式下工作。这是可能的吗？如果可能的话，我应该使用 xml 文件或通过编程方式。如果代码需要请问我。谢谢

这是xml文件（纵向模式）：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollview1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#1e90ff"
    tools:context=".HomeActivity"
    android:scrollbars="none"
    >

<LinearLayout
    android:id="@+id/layout01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#a9a9a9"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="1dp"
        android:background="@drawable/my_tauky_button_img" />

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="1dp"
        android:background="@drawable/explore_button_img"
        android:text="" />

    <Button
        android:id="@+id/button3"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="1dp"
        android:background="@drawable/create_tauky_button_img" />

    <Button
        android:id="@+id/button4"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="1dp"
        android:background="@drawable/my_blauky_button_img" />

    <Button
        android:id="@+id/button5"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:background="@drawable/profile_button_img" />
</LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:48:27.137

您最简单的解决方案是检查：

```
getResources().getConfiguration().orientation; 
```

如果方向是. in`onCreate()`并禁用. 请参阅此处的参考：http: [//developer.android.com/reference/android/content/res/Configuration.html#orientation](http://developer.android.com/reference/android/content/res/Configuration.html#orientation)`ScrollView``portrait`

它之所以有效，是因为默认情况下`Activities`会在配置更改（包括方向更改）时重新启动，因此您不必监听此事件。

只需修改您的`onCreate()`：

```
@Override
protected void onCreate(Bundle savedState) {
    super.onCreate(savedState);
    setContentView(R.layout.activity_layout);

    // disable ScrollView in portrait mode
    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
        ScrollView scrollView = (ScrollView)findViewById(R.id.scrollview1);
        scrollView.setEnabled(false);
    }
} 
```

`activity_layout`您的布局文件名在哪里（不带扩展`.xml`名）。而已！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:48:41.740

创建两个不同的 xml 布局。一个用于纵向模式（将其放在默认的“布局”文件夹中），一个用于横向（创建一个“布局土地”文件夹并将其放在那里），并仅在第二个中添加滚动视图.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:49:11.310

尝试这个，

```
 scrollView.setVerticalScrollBarEnabled(false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:50:04.787

试试这个代码:)

```
switch (getResources().getConfiguration().orientation) {
        case Configuration.ORIENTATION_PORTRAIT:
            ScrollView scrollView = (ScrollView)findViewById(R.id.scrollview1);
            scrollView.setEnabled(false);
            break;

} 
```

# c# - 将性能计数器与属性一起使用

> ID：14723952
> 
> 赞同：3
> 
> 时间：2013-02-06T07:44:22.957
> 
> 标签：c#, attributes, enterprise-library, performancecounter

我正在寻找一种方法来简化在我们的应用程序中创建和使用性能计数器，以便运行负载测试并使用计数器获取应用程序特定的信息。使用属性来做这件事会很好。例如，当程序员在方法上放置适当的属性时，就会测量方法的执行时间。所以我正在寻找一个我可以继承的属性，该属性在方法调用之前和之后由 FW 激活。有没有这样的属性？

非常感谢，丹妮

**编辑：**经过一些研究，我`PerformanceCounterCallHandlerAttribute`从 EntLib 中找到了一个。在我看来，这是我需要的，但我想知道它是如何工作的。我无法从我找到的文档中理解它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:17:03.040

检查[这个](https://stackoverflow.com/questions/14683320/net-c-what-is-the-best-practice-for-securing-every-method/14683666#14683666)。不完全是您所要求的，但我相信同样的方法对您有用。这都是关于在错误事件之前、之后和之后处理的。

# java - 代理背后的 Maven

> ID：14723953
> 
> 赞同：4
> 
> 时间：2013-02-06T07:44:38.033
> 
> 标签：java, maven, proxy

以下情况：

> 我们有一个相当大的项目，我正在尝试 mavenize。因此，我们安装了自己的 nexus repo 管理器。到目前为止一切正常，但现在我们面临的情况是每个开发人员都必须将他/她的代理用户名和密码输入`settings.xml`到从外部（即互联网）获取工件的情况。

不幸的是，开发人员需要不时更改他们的代理密码，并且他们需要再次修改 settings.xml。

与我们的关系的连接不是通过代理路由的。是否有可能配置类似 DNS 的方法：

1.  客户 A 向（公司实习生，非代理）询问工件 a.jar 的关系。
2.  它不位于本地存储库中，因此 nexus 然后从 maven Central 检索该工件并将其存储在其本地缓存中。
3.  客户端 A 获取工件 a.jar，就好像它直接来自公司 nexus。
4.  每个人都很高兴:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:53:24.900

我会在您回复我的问题后尽快给您更准确的答案，但无论如何，这是实现您想要的最佳方式。

Nexus、Artifactory 和其他回购管理器（如 smw 指出的）能够充当您的代理。他们将收到您的请求，查看他们自己的数据库以搜索您的作品，如果他们没有找到任何东西，然后访问互联网。

您必须配置 Nexus，告诉它它必须镜像什么 repo，并可选地给它代理凭据：

*   这里是配置 Nexus 以镜像其他 repo 的指南：http: [//www.sonatype.com/books/nexus-book/reference/confignx-sect-manage-repo.html](http://www.sonatype.com/books/nexus-book/reference/confignx-sect-manage-repo.html)
*   并将 Nexus 配置为使用代理访问 Internet： http: [//www.sonatype.com/books/nexus-book/reference/configxn-sect-customizing-server.html](http://www.sonatype.com/books/nexus-book/reference/configxn-sect-customizing-server.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:49:46.810

存储库管理器可以为您做到这一点。在 Maven 网站上有一个简短的[列表](http://maven.apache.org/repository-management.html "Maven 存储库管理器列表")。

# java - 如何解析原始日志文件转储并提取相关信息

> ID：14723954
> 
> 赞同：0
> 
> 时间：2013-02-06T07:44:40.620
> 
> 标签：java, logging

解析原始日志文件转储并提取相关信息。

以下是两个事件的日志文件提取。每个事件由***** ***分隔，如下所示：

```
01/23/13 17:29:25 |-| *****************************************************************
01/23/13 17:29:25 |-| MTCLPrint: processCodesoftPrintRequest() [-WEB--JU-LBCH-Wed Jan 23 17:29:25 CST 2013]...
01/23/13 17:29:25 |-|   ==> CS Label: [JU , LBCH , 70005023489 , JU Filtrete UPC0 3 Up Label , JU Filtrete UPC0 Labels 3 up , JUCHIZ01 , Qty: 1100]
01/23/13 17:29:26 |-| TrkgNbr: [-WEB--JU-LBCH-Wed Jan 23 17:29:25 CST 2013] ,CSPid: 5372
01/23/13 17:29:27 |-| Sending print job to -\\JUFP01\JUCHIZ01 [-WEB--JU-LBCH-Wed Jan 23 17:29:25 CST 2013]...
01/23/13 17:29:29 |-| Cannot delete file in temp dir (mergeAndPrint) - P786406707_67724_818342796.prn
01/23/13 17:29:29 |-| MTCLPrint: processCodesoftPrintRequest() [-WEB--JU-LBCH-Wed Jan 23 17:29:25 CST 2013]...complete.
01/23/13 17:29:29 |-| ~~~~ MTCL Print Web Service is terminated. ~~~~
01/23/13 17:29:56 |-| ~~~~ MTCL Print Web Service is started. ~~~~
01/23/13 17:29:56 |-| *****************************************************************
01/23/13 17:29:56 |-| MTCLPrint: processCodesoftPrintRequest() [-WEB--SDL-P1-Wed Jan 23 17:29:56 CST 2013]...
01/23/13 17:29:56 |-|   ==> CS Label: [SDL , P1 , 70000437403 , SDL GenericShip.CS7Z170 10-2006 REV , Medina HD Two Part Inter. Label , Z170 Packer , Qty: 1]
01/23/13 17:29:56 |-| TrkgNbr: [-WEB--SDL-P1-Wed Jan 23 17:29:56 CST 2013] ,CSPid: 8840
01/23/13 17:29:58 |-| Sending print job to -\\SPPRT10\SDL-PR-Zebra03 [-WEB--SDL-P1-Wed Jan 23 17:29:56 CST 2013]...
01/23/13 17:29:58 |-| Cannot delete file in temp dir (mergeAndPrint) - P1905794774_98669_986327948.prn
01/23/13 17:29:58 |-| MTCLPrint: processCodesoftPrintRequest() [-WEB--SDL-P1-Wed Jan 23 17:29:56 CST 2013]...complete.
01/23/13 17:29:58 |-| ~~~~ MTCL Print Web Service is terminated. ~~~~
01/23/13 17:30:11 |-| ~~~~ MTCL Print Web Service is started. ~~~~ 
```

应用程序日志转储了一系列类似的重复日志。我需要解析这个文件并通过 Java 程序将它输入到 MS Excel 中。

以下是我需要从上面的原始数据转储中获取的相关信息：

```
01/23/13 17:29:25 |-|   ==> CS Label: [JU , LBCH , 70005023489 , JU Filtrete UPC0 3 Up Label , JU Filtrete UPC0 Labels 3 up , JUCHIZ01 , Qty: 1100]

01/23/13 17:29:56 |-|   ==> CS Label: [SDL , P1 , 70000437403 , SDL GenericShip.CS7Z170 10-2006 REV , Medina HD Two Part Inter. Label , Z170 Packer , Qty: 1] 
```

此原始数据始终以“CS 标签：”开头，后跟“[”，然后有 7 个字段，以逗号分隔。我需要将这七个字段提取到 Excel 工作表中的列中。实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:47:39.457

我看到以下算法：

1.  逐行读取文件。
2.  如果行包含`CS Label`字符串，则处理它（否则丢弃）。
3.  提取方括号之间的所有内容（您可以为此使用正则表达式，或者只是简单的`String`方法）。
4.  用逗号分割这个字符串，修剪空格。
5.  将此信息添加到某个结构并发布到 Excel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T06:37:36.477

干得好：

```
public class DateFunctions {
    // Date related Logic
    private Date startDate;
    private Integer delta;

    @SuppressWarnings("resource")
    public DateFunctions() {
        // ApplicationContext ctx = new
        // ClassPathXmlApplicationContext("date-properties.xml");
        ApplicationContext ctx = new FileSystemXmlApplicationContext(
                "c:\\logAnalyzer\\date-properties.xml");
        // Initializing date related data from spring configuration file
        startDate = (Date) ctx.getBean("startDate");
        delta = (Integer) ctx.getBean("delta");
    }

    public boolean isTimeDiffAcceptable(Date logDate) {

        DateTime dt1, dt2;
        Integer minutesDiff;

        dt1 = new DateTime(logDate);
        dt2 = new DateTime(startDate);

        int daysDiff = Days.daysBetween(dt1, dt2).getDays();

        if (daysDiff == 0) {
            minutesDiff = dt1.getMinuteOfDay() - dt2.getMinuteOfDay();
        } else {
            minutesDiff = 0;
        }

        // System.out.println("minutesDiff : " + minutesDiff);
        // System.out.println("delta : " + delta);

        if (minutesDiff < 0 && (-1 * minutesDiff) < delta) {
            return true;
        } else {
            return false;
        }
    }

    public Date getStartDate() {
        return startDate;
    }

    public void setStartDate(Date startDate) {
        this.startDate = startDate;
    }

    public Integer getDelta() {
        return delta;
    }

    public void setDelta(Integer delta) {
        this.delta = delta;
    }

} 
```

然后格式化日志方法将让您将日志放在 Excel 工作表中。

```
public class FormatLog {

    private String searchRequiredString, searchStartString, searchEndString;
    private String regex, line;
    private Integer lengthStartStr, lengthEndStr;

    private File inputFile;

    private Integer rowNum, colNum;
    private HSSFCell cell;

    private String[] ary;

    private Logger log;

    // Initializing data in constructor
    public FormatLog() {
        // initializing the logger for log4j
        log = Logger.getLogger(FormatLog.class);

        @SuppressWarnings("resource")
        ApplicationContext ctx = new ClassPathXmlApplicationContext(
                "spring.xml");

        // Initializing search String related parameters
        searchRequiredString = (String) ctx.getBean("searchRequiredString");
        searchStartString = (String) ctx.getBean("searchStartString");
        searchEndString = (String) ctx.getBean("searchEndString");
        regex = (String) ctx.getBean("regex");

        // Initializing the Log Input File
        inputFile = (File) ctx.getBean("inputFile");

        // Computing some start parameters
        lengthStartStr = searchStartString.length();
        lengthEndStr = searchEndString.length();

        // Row Number initialized to -1
        rowNum = -1;
    }

    /*
     * Input: None Output: Integer rowNum - number of rows processed.
     */
    @SuppressWarnings({ "resource", "deprecation" })
    public Integer stringManipulation() {

        // setting header text
        String[] headerText = { "Date", "Facility Name", "Work Center",
                "ID Nbr", "Preference", "Format", "Printer Name", "Qty" };
        DateFunctions df = new DateFunctions();
        try {
            FileOutputStream fileOut = new FileOutputStream(
                    "c:\\logAnalyzer\\FormattedLogsELC.xls");
            HSSFWorkbook workbook = new HSSFWorkbook();
            HSSFSheet worksheet = workbook.createSheet("ELC Log Worksheet - "
                    + df.getStartDate().toString());

            BufferedReader br = new BufferedReader(new FileReader(inputFile));
            while ((line = br.readLine()) != null) {
                // Create the StringBuilder
                StringBuilder builder = new StringBuilder(line);

                Integer indexRequired = builder.indexOf(searchRequiredString);
                if (indexRequired > 0) {

                    String date = builder.subSequence(1, 17).toString();
                    log.debug(date);
                    Date logDate = new Date(date);
                    if (df.isTimeDiffAcceptable(logDate)) {

                        log.debug(builder.toString());
                        Integer indexStart = builder.indexOf(searchStartString);
                        Integer indexEnd = builder.indexOf(searchEndString);
                        String s = builder.subSequence(
                                indexStart + lengthStartStr,
                                indexEnd - lengthEndStr + 1).toString();
                        // adding date to the string s
                        s = date + "," + s;
                        log.debug(s);
                        ary = s.split(regex);
                        if (ary.length != headerText.length) {
                            log.warn("Review row number : " + rowNum
                                    + ". Unexpected data was found");
                        }

                        // incrementing RowNumber for workbook calculation.
                        rowNum++;
                        if (rowNum == 0) {
                            log.info("Setting Header Text");
                            ary = headerText;
                        }
                        log.info("Row Number: " + rowNum
                                + " extracted for time : " + date);
                        // Create a new wb row.
                        HSSFRow row = worksheet.createRow(rowNum);
                        for (colNum = 0; colNum < ary.length; colNum++) {
                            ary[colNum] = ary[colNum].trim();
                            log.debug(ary[colNum]);
                            cell = row.createCell(colNum);
                            cell.setCellValue(ary[colNum]);
                        }// end for
                    }// end if timeDiff
                }// end if indexRequired
            } // while

            // write to workbook and close it
            workbook.write(fileOut);
            fileOut.flush();
            fileOut.close();

        } catch (FileNotFoundException e) {
            log.error(e);
        } catch (IOException e) {
            log.error(e);
        }

        if (rowNum < 0) {
            log.warn("No rows were written to the excel file.");
            log.warn("Application Logs provided may be out of the Wily alert window if no exception was thrown.");

        } else {
            log.info("Success");
        }

        // Returns the rows processed
        return rowNum;
    }
} 
```

# image - 从 Cutenews 将大量图像（和帖子）导入 Wordpress

> ID：14723955
> 
> 赞同：1
> 
> 时间：2013-02-06T07:44:48.407
> 
> 标签：image, wordpress, import

我有超过 15 万张照片，重约 6GB。他们有来自相机的通用名称，有一些 EXIF 数据，比如照片拍摄日期，所有照片都在嵌套文件夹中（前几年的格式不一致 - 我没有弄得一团糟），结构是大致：

> （学年范围）（季节）（性别）*（运动）（团队1）（团队2*）

例如：

> 2012-2013\2012_Winter_Sports\Boys_Basketball\Carlton_SouthRidge

我编写了一个脚本，用于将来自 Cutenews (1.5) 平面文件的帖子导入 Wordpress（类别也是如此，完成后我会发布脚本）。

一切都很好，但是来自 cutenews 的图像通过 HTML 嵌入到帖子中，例如：

```
<img alt="" width="498" height="332" src="/cutenews/data/upimages/image/2012-2013/Winter_Sports/DSC_2666.jpg" /> 
```

（没有团队名称）

我想从这些旧帖子中将这些图片导入 Wordpress，并让我的用户在 WP 中看到它们，并且让新帖子的结构与旧帖子保持一致（但将旧结构更改为新的 WP 结构）和保持帖子上的格式（因此位置和图像大小相同）。

所以我有几个问题。我如何（在 PHP 中）解析该行：

```
<img alt="" width="498" height="332" src="/cutenews/data/upimages/image/2012-2013/Winter_Sports/DSC_2666.jpg" /> 
```

并在导入到 WP 后用指向图像的 WP 短代码替换它？

现在，让这变得困难的部分是我想将文件夹 `(school year range)\(season)\(gender)_(sport)\(team1)_(team2)` 导入画廊（如nggallery或其他东西），所以我可以替换帖子中指向文件夹\ index.php脚本的链接，该脚本显示目录中的所有图片与画廊的简码？

链接的一个示例是 `<p style="text-align: center"><a href="http://site/gallery/2012-2013/2012_Winter_Sports/Boys_Basketball/(team1)_(team2)"><span style="font-size: medium">For additional photos click here to view our complete photo gallery</span></a></p>` ，如果我也可以将文件夹的名称保留为画廊的数据，那就太棒了。

我无法弄清楚的一件事是如何从上面的代码中取出 href 但保留所有其他内容并从 href 中提取信息以用于将文件夹导入画廊并将 href 替换为导入库的简码。

这更像是一个 PHP 问题而不是 Wordpress 问题，只是一段代码显示如何提取信息并将其替换为使用所述信息生成的新字符串将非常有帮助。

现在我不是要求有人给我写一个脚本，但是一些用于解决这个问题的策略的伪代码会很有帮助。注意我已经在[别处](http://wordpress.org/support/topic/importing-a-huge-amount-of-images-any-good-ideas-very-challenging)交叉发布了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:35:10.300

一些有用的插件/工具：

*   插件[搜索和替换](http://wordpress.org/extend/plugins/search-and-replace/)
    *在数据库中查找字符串并替换字符串的简单搜索。*

*   插件[从服务器添加](http://wordpress.org/extend/plugins/add-from-server/)
    *允许您将媒体和文件从网络服务器文件导入 WordPress 上传管理器*

*   Plugin [CSV Importer](http://wordpress.org/extend/plugins/csv-importer/)
    *将帖子从 CSV 文件导入 WordPress。*

*   操作 XML 导入文件以从自定义 URL 导入图像
    [从本地开发导入媒体到在线 WordPress](https://wordpress.stackexchange.com/a/87407/12615)

也许 XML 操作值得第一次尝试，但我想您实际上必须从头开始构建一个。

*Add from Server*和*Search and Replace*可以一起使用，但是你必须找到一些共同点才能*批量*处理。

*如果您在电子表格中准备好所有内容然后导入这些内容，*CSV Importer可能会很有用。*请记住，这`attachment`是一个帖子类型。*

 **附加资源：* [*根据相机信息创建类别*](https://wordpress.stackexchange.com/a/53588/12615)。*

# python - 如何使用 Python 将 \t 写入文件

> ID：14723964
> 
> 赞同：2
> 
> 时间：2013-02-06T07:45:18.353
> 
> 标签：python

我建立了一个网站，用户可以在表单中输入目录路径。

我的程序将提取路径并写入一个文件。

我的问题是当路径中包含一些特殊的单词如 \t \n 时，程序无法正确写入文件。

例如：C:\abc\test 将变为 C:\abc[TAB]est

如何将字符串更改为其他类型，如原始字符串并正确写入文件？

感谢你的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:49:31.643

输入字符串时使用`r'C:\abc\test'`或`'C:\\abc\\test'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:51:34.167

> ...用户可以在表单中输入目录路径。
> 
> ...
> 
> 我的问题是当路径中包含一些特殊的单词如 \t \n 时，程序无法正确写入文件。

呃，没有。Python 完全能够区分`'\t'`和 ，`'\\t'` *除非您正在做一些事情来混淆它*。

```
>>> raw_input()
<Ctrl-V><Tab>
'\t'
>>> raw_input()
\t
'\\t' 
```

# java - SWT：在复合中重新定位/刷新按钮并根据可见组件设置复合大小

> ID：14723968
> 
> 赞同：1
> 
> 时间：2013-02-06T07:45:43.273
> 
> 标签：java, eclipse, swt, windowbuilder

我想根据它们的可见性属性重绘组合中的按钮。我根据其中存在的按钮进行合成以调整大小，并且我正在使用以下代码来刷新合成。 **问题：下面的代码工作正常，但按钮永远不会在复合中重新定位** 请帮助。代码中是否缺少要重新定位的东西？

```
public void redraw_buttons() {
    int offsetButton = 5;
            int buttonHeight =28*3;

            for (Control kid : compositeButtons.getChildren()) {
                if (kid.getClass() == Button.class) {
                    if(kid.getVisible() == true){       
                        kid.setLocation(0, 0);//layout(true, true);
                        kid.setSize(50,60);
                        kid.redraw();
                        kid.pack();
                        compositeButtons.redraw();
                        kid.setRedraw(true);
                        kid.setBounds(10, offsetButton, 259, buttonHeight);
                        kid.redraw();
                        offsetButton = offsetButton + buttonHeight; 
                    }}
                        }
            compositeButtons.redraw();
        } 
```

同样为了在复合材料上创建按钮，我正在使用以下代码

**// 初始化复合---**

```
compositeButtons = new Composite(shell, SWT.BORDER);
            compositeButtons.setLayout(null);
            FormData fd_compositeButtons = new FormData();
            fd_compositeButtons.top = new FormAttachment(lblUserLoggedinOnServer, 6);
            fd_compositeButtons.bottom = new FormAttachment(textRecentLog, -6);
            fd_compositeButtons.right = new FormAttachment(textRecentLog, 0, SWT.RIGHT);
            fd_compositeButtons.left = new FormAttachment(0, 30);
            compositeButtons.setLayoutData(fd_compositeButtons);

            compositeButtons.layout(true, true);
                    getShell().layout(true, true); 
```

**// 添加按钮到复合 -**

```
int offsetButton = 5;
            int buttonHeight =28*3;

            MakeAppointmentRequestButton = new Button(compositeButtons, SWT.NONE);
            MakeAppointmentRequestButton.setBounds(10, offsetButton, 259, buttonHeight);
            //MakeAppointmentRequestButton.layout(true, true);
            MakeAppointmentRequestButton.setRedraw(true);
            MakeAppointmentRequestButton.setText("Make Appointment");

            offsetButton = offsetButton + buttonHeight; 

            GotoAppointmentRequestButton = new Button(compositeButtons, SWT.NONE);
            GotoAppointmentRequestButton.setBounds(10, offsetButton, 259, buttonHeight);//(10, offsetButton, 259, 28*3);
            GotoAppointmentRequestButton.setRedraw(true);
            GotoAppointmentRequestButton.setText("Goto Appointment");

            offsetButton = offsetButton + buttonHeight; 

            CancelAppointmentRequestButton= new Button(compositeButtons, SWT.NONE);
            CancelAppointmentRequestButton.setBounds(10, offsetButton, 259, buttonHeight);//(10,  28*3+5, 259, 28*3);
            CancelAppointmentRequestButton.setRedraw(true);
            CancelAppointmentRequestButton.setText("Cancel Appointment");

            offsetButton = offsetButton + buttonHeight; 
```

我已经看到各种链接也尝试了 pack()、redraw() 属性。但是**问题：即使在调用自定义函数 redraw_buttons(); 时，按钮也永远不会重新定位。**

请帮忙。代码中是否缺少要重新定位的东西？请建议这样做的方法。我是 SWT 的新手。

谢谢..

******* **编辑 新 更新** ********

错误是由于

1.)`redraw_buttons()`函数未在主线程上调用。

```
_appLoader.display.getDefault().asyncExec(new Runnable() {
    public void run() {
_appLoader.MyObj.redraw_buttons();
}
});
// This gave access to main thread. 
```

2.) 复合框架没有在 redraw_buttons() 中调整大小；

```
// Code: On Which I am still working upon. 
```

![在此处输入图像描述](../Images/8e2a93b18a5057c0a2259c28f9f0af84.png) 我应该调整外壳的大小吗？请建议。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:51:36.797

这里有一些代码应该做你想做的，或者至少告诉你如何实现它：

```
public static void main(String[] args)
{
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(2, true));

    // Stretch first label horizontally
    Label upperLeft = new Label(shell, SWT.NONE);
    upperLeft.setText("Label 1 name");
    upperLeft.setLayoutData(new GridData(SWT.BEGINNING, SWT.BEGINNING, true, false));

    // Stretch second label horizontally but align to the right
    Label upperRight = new Label(shell, SWT.NONE);
    upperRight.setText("time");
    upperRight.setLayoutData(new GridData(SWT.END, SWT.BEGINNING, true, false));

    // Stretch button comp in both directions
    Composite buttonComp = new Composite(shell, SWT.BORDER);
    buttonComp.setLayout(new GridLayout(1, true));
    GridData buttonData = new GridData(SWT.FILL, SWT.FILL, true, true);
    buttonData.horizontalSpan = 2;
    buttonComp.setLayoutData(buttonData);

    Button one = new Button(buttonComp, SWT.PUSH);
    one.setText("Button 1");
    one.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
    Button two = new Button(buttonComp, SWT.PUSH);
    two.setText("Button 2");
    two.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
    Button three = new Button(buttonComp, SWT.PUSH);
    three.setText("Button 3");
    three.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

    // Stretch third label horizontally
    Label lowerLeft = new Label(shell, SWT.NONE);
    lowerLeft.setText("Label 2");
    lowerLeft.setLayoutData(new GridData(SWT.BEGINNING, SWT.BEGINNING, true, false));

    // Stretch fourth label horizontally
    Label lowerRight = new Label(shell, SWT.NONE);
    lowerRight.setText("Label 3");
    lowerRight.setLayoutData(new GridData(SWT.BEGINNING, SWT.BEGINNING, true, false));

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

这是它启动时的样子：

![在此处输入图像描述](../Images/8b27f8d581af467ce73f7c2c707a0b75.png)

调整大小后：

![在此处输入图像描述](../Images/afc7d53004d981a216951cab6170f3e0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:03:57.300

代替

```
(kid.getClass() == Button.class) 
```

总是使用

```
(kid instanceof Button) 
```

# ios - iOS - 等距网格图像问题

> ID：14723969
> 
> 赞同：0
> 
> 时间：2013-02-06T07:45:56.690
> 
> 标签：ios, grid, isometric

我`UIImageViews`在地图上有无数这样的“图块”。它们彼此相邻排列以形成图像网格。每个`layer`的`UIImageView`被添加为 a 的子层`UIView`。

通常，网格图像彼此齐平，但是每当放大或缩小`UIScrollView`包含 的`UIView`时，平铺图像之间的空间就会变得可见，从而显示出我希望不可见的网格图案。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:48:12.630

听起来你正试图从头开始创建一个 CATiledLayer ......？

为什么不直接使用 CATiledLayer？

# jsp - 从 Tomcat 迁移到 Glassfish 网络服务器时需要考虑哪些程序？

> ID：14723971
> 
> 赞同：1
> 
> 时间：2013-02-06T07:46:02.133
> 
> 标签：jsp, tomcat, servlets, glassfish

我正在构建一个在 Tomcat Web 服务器上运行的 Web 应用程序项目。现在我想我们将在我的构建 webapp 中使用 Glassfish 服务器。我只需要将我的jsp项目的servlet.api替换为Glassfish服务器的servlet.api吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:13:00.627

首先，您的 webapp 项目中应该根本没有 servlet API JAR 文件。在您的 webapp 项目中删除**所有特定于容器的 JAR 文件。**这样，您的 web 应用程序就可以在所有容器中完全移植，完全符合 Java EE 规范的意图。

在 webapp 项目中拥有特定于容器的库是一个非常常见的初学者错误，因为他们粗心地尝试“修复”`javax.servlet.*`他们在 Eclipse/Netbeans IDE 中遇到的类的编译错误。这首先应该以不同的方式解决。

### 也可以看看：

*   [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/4076706#4076706)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T14:13:16.587

在将项目从 Tomcat 迁移到 Glassfish 之前，在 Configuration Files 文件夹中创建**web.xml**非常重要。因此，在主包中创建新的 Servlet。Netbeans（在我的例子中）可以生成 web.xml 配置文件文件夹。然后将所有文件从 Tomcat 服务器项目复制到 Glassfish 服务器项目。**然后，在web.xml**中写入所有 servlet 信息。

如果您无法执行此步骤，他们肯定会在执行最终 Web 应用程序后遇到类似**404 Page not found 错误的问题。**

祝你好运！！！！

# php - 使用 Google 翻译在 PHP 中进行文本到语音转换

> ID：14723973
> 
> 赞同：12
> 
> 时间：2013-02-06T07:46:09.587
> 
> 标签：php, html, text-to-speech, speech, google-text-to-speech

我正在尝试将**单词**转换为**语音**..

直到现在我已经尝试过这个：

```
<?php
 $text = "Hello this is a test for voice api of google";

// Name of the MP3 file generated using the MD5 hash
   $file  = md5($text);

// Save the MP3 file in this folder with the .mp3 extension 
   $file = "audio/" . $file .".mp3";
   if($file) {
     echo "created";
   } else {
     echo "not created";
   }

// If the MP3 file exists, do not create a new request
   if (!file_exists($file)) {
     $mp3 = file_get_contents(
        'http://translate.google.com/translate_tts?q=' . $text);
     echo "hello";
     file_put_contents($file, $mp3);
   } else {
     echo "hii";
   }
?> 
```

在我的 html 文件中：

```
<audio controls="controls" autoplay="autoplay">
  <source src="<?php echo $file; ?>" type="audio/mp3" />
</audio> 
```

我正在输出中创建你好和音频播放器。但是没有播放文件，也没有在文件夹中创建文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T00:59:44.283

1.  您尝试访问的网址有问题。它被打破 ！你应该先尝试。我在 FF 控制台上找到的新 URL 是：

    [http://translate.google.com/translate_tts?ie=UTF-8&q=Hello&tl=en&total=1&idx=0&textlen=5&prev=input](http://translate.google.com/translate_tts?ie=UTF-8&q=Hello&tl=en&total=1&idx=0&textlen=5&prev=input)

    对于单个词*Hello*。而且您看到您必须在**textlen**中指定语言和文本的长度，即使它确实适用于我在不更改此变量的情况下尝试的所有句子。

2.  另一个问题是您必须对文本进行 urlencode()，否则您将遇到重音符号和标点符号的错误。所以下载 MP3 的行变成：

    ```
    // Language of the sentence
    $lang = "fr";
    $mp3 = file_get_contents(
    'http://translate.google.com/translate_tts?ie=UTF-8&q='. urlencode($text) .'&tl='. $lang .'&total=1&idx=0&textlen=5&prev=input'); 
    ```

所以完整的代码如下所示：

```
<?php

    $text = "Bonjour, comment allez vous ?";
    // Yes French is a beautiful language.
    $lang = "fr";

    // MP3 filename generated using MD5 hash
    // Added things to prevent bug if you want same sentence in two different languages
    $file = md5($lang."?".urlencode($text));

    // Save MP3 file in folder with .mp3 extension 
    $file = "audio/" . $file . ".mp3";

    // Check folder exists, if not create it, else verify CHMOD
    if (!is_dir("audio/"))
        mkdir("audio/");
    else
        if (substr(sprintf('%o', fileperms('audio/')), -4) != "0777")
            chmod("audio/", 0777);

    // If MP3 file exists do not create new request
    if (!file_exists($file))
    {
        // Download content
        $mp3 = file_get_contents(
        'http://translate.google.com/translate_tts?ie=UTF-8&q='. urlencode($text) .'&tl='. $lang .'&total=1&idx=0&textlen=5&prev=input');
        file_put_contents($file, $mp3);
    }

?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-14T03:43:00.893

我找到了：

```
https://translate.google.com.vn/translate_tts?ie=UTF-8&client=tw-ob&q=ANYTHING_TEXT&tl=YOUR_LANGUAGE_CODE 
```

重要的：`client=tw-ob`

`YOUR_LANGUAGE_CODE`可以是 en、us、uk、vi 等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T08:54:36.170

改进版：

```
// ~~~ Credits to kube ~~~

    $text = "Hello this is a test for voice api of google";
    $text = urlencode($text);
    $lang = urldecode("en");
    $file  = "audio/" . md5($text) .".mp3";
       if (!file_exists($file) || filesize($file) == 0) {
         $mp3 = file_get_contents('http://translate.google.com/translate_tts?ie=UTF-8&q='.$text.'&tl='.$lang.'&total=2&idx=0&textlen='.strlen($text).'&prev=input');
         if(file_put_contents($file, $mp3)){
            echo "Saved<br>";
         }else{
            echo "Wasn't able to save it !<br>";
         }
       } else {
         echo "Already exist<br>";
       } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-10T19:19:26.350

您不能免费使用此服务。

> **有免费配额吗？** 不可以，Google Translate API 仅作为付费服务提供。有关详细信息，请参阅定价和支持。但是，我们确实提供了 Google 网站翻译小工具，它可以免费翻译您的网站。

检查[翻译 API 常见问题](https://developers.google.com/translate/v2/faq)

有关这种非官方使用方式的更多信息，您可以在[Techcrunch上找到](http://techcrunch.com/2009/12/14/the-unofficial-google-text-to-speech-api/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-01T09:51:38.723

您也可以使用下面的简单代码。只需回显代码即可获得结果。在此代码中，无需保存文件或获取权限问题。

```
 echo "<iframe hidden src='http://translate.google.com/translate_tts?ie=UTF-8&q=Welcome%20back%20".$jvm['firstname']."&tl=en&total=2&idx=0&textlen=5&prev=input'></iframe>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T07:58:47.853

您的文件未创建，因为您忘记创建它，请使用以下代码创建文件。

```
$file = "audio/".$file.".mp3";
$ourFileHandle = fopen($file, 'w') or die("can't open file"); 
```

# hadoop - hdfs将数据分布式存储在datanode中

> ID：14723977
> 
> 赞同：1
> 
> 时间：2013-02-06T07:46:32.020
> 
> 标签：hadoop, hdfs

我构建了`HDFS`（2个DataNodes）。我将数据存储在`HDFS`.

我想使用两个数据节点来平衡存储数据。但是当我使用`CLI`( `hadoop fs -put`)时，我只存储了一个数据节点

有没有人有解决方案如何将数据完全存储为两个单独的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:58:46.667

如果您的复制因子设置正确，并且您真的只想平衡使用日期：

`hadoop balancer [-threshold <threshold>]`

[在 Hadoop文档](http://hadoop.apache.org/docs/r1.0.4/hdfs_user_guide.html#Rebalancer)页面上有很多关于再平衡器的信息（PDF 格式） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:09:19.953

听起来您在问如何设置复制因子。如果您有 2 个数据节点，则复制因子为 2 将确保所有文件都存储在两个节点上。您可以在 Hadoop conf 目录中的 hdfs-site.xml 中进行设置。您要设置：

```
<property>
  <name>dfs.replication</name>
  <value>2</value>
</property> 
```

您还可以运行`setrep`命令来更改特定文件或目录的复制因子：

```
hadoop fs -setrep -R 2 <path> 
```

-R 当然使它递归。

# java - 如何了解运行时是否存在 bean？

> ID：14723984
> 
> 赞同：8
> 
> 时间：2013-02-06T07:47:06.750
> 
> 标签：java, spring, javabeans

例如，我有一堂课

```
public class Car{
     private Motor motor;

     public void setMotor(Motor motor){
          this.motor = motor;
     }   
} 
```

我的豆子看起来像

```
<bean id="car" class="Car">
    <property name="motor" ref="${motorProvider.getAvailableMotor()}"/>
</bean> 
```

此方法： `motorProvider.getAvailableMotor()`返回一个 bean 名称（字符串），我应该使用哪个电机。

但是可能存在未创建此类 bean（具有此类名称）的情况。我怎样才能检查它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T08:25:58.880

有几种模式可以做到这一点。这是我经常使用的一个：

```
public class Car{
     private Motor motor;

     @Autowired
     private ApplicationContext applicationContext;

     @PostConstruct
     public void init() {
        try {
            motor = applicationContext.getBean( Motor.class );
        } catch( NoSuchBeanDefinitionException e ) {
            motor = new DefaultMotor();
        }
     }
} 
```

请注意，您也可以调用`applicationContext.containsBeanDefinition(name)`，但这会搜索您的上下文两次（一次在`containsBeanDefinition()`调用时，然后第二次`getBean()`），因此捕获异常通常更快。

由于我们捕获了一个特定的异常，即“bean 不存在”，因此使用`if`/`else`几乎没有优势了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T07:51:07.100

SPEL; 就像是：

```
<property name="motor" value="#(if(${motorProvider} != null) ${motorProvider.getAvailableMotor()})"/> 
```

我认为这里也讨论过：[Spring - set a property only if the value is not null](https://stackoverflow.com/questions/9347929/spring-set-a-property-only-if-the-value-is-not-null)。正如他们之前所说，有关更多信息，请参阅：[http ://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html)

# arrays - 在 COBOL 中使用内部函数时遇到问题

> ID：14723985
> 
> 赞同：1
> 
> 时间：2013-02-06T07:47:09.557
> 
> 标签：arrays, cobol, min

我是 COBOL 编程的新手，我在可能应该是微不足道的事情上遇到困难。我想找到用户输入的最小值和最大值。当用户点击 0 时，应显示最大值、最小值和平均值。平均值很简单，但最小值和最大值让我想知道。如果这是 JAVA 或其他语言，我会做一些比较 MAX INT 值的场景。不幸的是 COBOL 中的 High-Value 和 Low-Value 不是整数值？？？？所以我决定把用户的条目放在一个表中，然后使用内部函数来做我需要的事情。但是，一旦我尝试这样计算：

```
 compute Min-Result = Function Min (Num-Field(ALL)) 
```

我收到一条错误消息，上面写着“语法错误，全部出乎意料”。在这一点上，我完全不知道该怎么做以及为什么会出现此错误。我正在使用 OpenCOBOL 1.1 Mingw。这是我的完整代码。任何帮助将不胜感激。什么都可以。我还确保没有超过 72 行。

```
 identification division.
       program-id.  lab1a.
      * no envionrment division since there are no files needed, etc.
       data division.
       working-storage section.

      * declaring proper variables to store integer values
       01  Max-Result        PIC S9(5).
       01  Min-Result        PIC S9(5).
       01  Count-Val         PIC 9  Value 0.
       01  Running-Tot       PIC S9(10)v99.
       01  First-Zero        PIC 9  Value 1.
       01  Final-Format-Avg       PIC ZZZZZ9.9999.
       01  Avg-Ent              PIC S9(5)v9999.
       01  Calc-Table.
            03  Table-Record  Occurs 1 to 500 times
                              depending on Entered-Num.
                05  Num-Field    PIC S9(5).
       01  Entered-Num       PIC S9(5).

       procedure division.
       000-Main.

           perform with test after until Entered-Num = 0
              display "Enter a 4-digit number (0 to stop): "
                 with no advancing
              accept Entered-Num

              add 1 to Count-Val
              add Entered-Num to Running-Tot

              display Running-Tot
              display Count-Val
              move Entered-Num to Num-Field(Count-Val)

      * this way every time the user enters a non zero number it will be re-assigned
      * to the variable Ending-Num. If they enter zero the if condition is skipped, the
      * loop condition is tested at the top and is ended.

           end-perform.
           subtract 1 from Count-Val
           display Count-Val
           display " "  
           display " "    
      *WATCH FOR TRUNCATION ERROR.....
           Divide Running-Tot By Count-Val Giving Avg-Ent
           move Avg-Ent to Final-Format-Avg

      *******WHY DOES THIS NOT WORK???????*********************** 
           compute Min-Result = Function Min (Num-Field(ALL))
           compute Max-Result = Function Max (Num-Field(ALL))

           if First-Zero = 0
           display "The first number you entered was zero. 
 &                  Next time enter a different one."
           else                
           display "The lowest value entered: " Min-Result             
           display "The highest value entered: " Max-Result
           display "The average value entered: " 
                    Final-Format-Avg
           end-if

           stop run. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:13:04.807

OpenCOBOL 内部函数当前不支持 ALL，这是一个在书籍上用于实现的特性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T09:25:36.997

您将“Entered-Num”作为您的 Occurs取决于字段。Entered-Num 在您使用该功能时为零。它应该是 Count-Val。

那不是问题，但你问了。

查看 2009 OpenCobol Programmer's Guid，我找不到支持 ALL 的确认。

保持“最低值”和“最高值”并根据需要与输入的数字进行比较/替换会更简单/更快。

# php - 如何使用 preg replace 在替换字符串中插入找到的字母

> ID：14723987
> 
> 赞同：0
> 
> 时间：2013-02-06T07:47:13.923
> 
> 标签：php, regex, preg-replace

我想替换下面写的字符串

```
AND ( (wp_usermeta.meta_key = 'first_name' AND CAST(wp_usermeta.meta_value AS CHAR) LIKE '%A%')
AND  (mt1.meta_key = 'wp_capabilities' AND CAST(mt1.meta_value AS CHAR) LIKE '%\"s2member\\_level2\"%') ) 
```

到

```
AND ( (wp_usermeta.meta_key = 'first_name' AND CAST(wp_usermeta.meta_value AS CHAR) LIKE 'A%')
AND  (mt1.meta_key = 'wp_capabilities' AND CAST(mt1.meta_value AS CHAR) LIKE '%\"s2member\\_level2\"%') ) 
```

在上面的 scring 中，我想要实现的是替换`%[a-zA-Z]%`为`[a-zA-Z]%`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:55:06.523

您需要捕获该字母并再次插入替换字符串。

```
%([a-zA-Z])% 
```

由于周围有括号，这将捕获该字母。

并替换为

```
$1% 
```

`$1`是该捕获组的内容

在 php 中它看起来像

```
$SourceString = preg_replace('/%([a-zA-Z])%/', '$1%', $SourceString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:50:44.047

采用`$string = str_replace("%A%", "%A", $string);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:54:07.623

我不确定，但你可以试试这个。

```
$find ="/%A%/"; 
$replace ="A%"; 

echo preg_replace ($find, $replace, "AND ( (wp_usermeta.meta_key = 'first_name' AND CAST(wp_usermeta.meta_value AS CHAR) LIKE '%A%')"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:55:34.003

您可以执行以下操作

```
$data = "AND ( (wp_usermeta.meta_key = 'first_name' AND CAST(wp_usermeta.meta_value AS CHAR) LIKE '%A%')
AND  (mt1.meta_key = 'wp_capabilities' AND CAST(mt1.meta_value AS CHAR) LIKE '%\"s2member\\_level2\"%') )";

$data = str_replace("%A%", "A%", $data); 
```

希望这可以帮助

# c - 带有 %c 格式代码的 printf() 没有打印出我期望的内容

> ID：14723988
> 
> 赞同：-2
> 
> 时间：2013-02-06T07:47:14.153
> 
> 标签：c, printing

```
#include <stdio.h>

int main ( ) {
    int n;
    n = 0;
    printf ("%c\n", n);

    return 0;
} 
```

这就是我的代码，但是当我打印它时，它只会打印一个空格。它不应该打印0吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:48:21.310

将 %c 更改为 %d：

```
printf ("%d\n", n); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:48:48.953

n 是整数类型，所以尝试将其打印为..

```
printf("%d\n",n); 
```

如果你使用 %c 那么它在 ASCII 表中打印第一个字节的相关字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:59:42.453

如果需要在`0`不更改`printf`语句的情况下显示，方法是这样做

```
n = '0'; 
```

或者

```
n = 48; 
```

查看[Ascii Table](http://www.asciitable.com/)，查看 ascii 值为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:54:20.253

`Printf`将 format 指向的 C 字符串写入标准输出 (stdout)。如果 format 包含格式说明符（以 % 开头的子序列），则 format 后面的附加参数将被格式化并插入到结果字符串中，替换它们各自的说明符。

在这里，您使用错误的格式说明符来打印您的值。`%c`用于打印`char`（字符）类型的变量。用于`%d`（`int`整数）。

试试这个[链接](http://www.cplusplus.com/reference/cstdio/printf/)

# windows-phone-8 - 推送通知 Windows phone 8 的体系结构

> ID：14723989
> 
> 赞同：1
> 
> 时间：2013-02-06T07:47:22.113
> 
> 标签：windows-phone-8

我对 windows phone 推送通知服务中的频道名称感到很困惑。

我从这个链接 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558(v=vs.105).aspx读到它](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558(v=vs.105).aspx)

我的问题是-如何选择频道名称？任何指导方针。我也读了这个链接，但这与 Windows 8 有关 [http://msdn.microsoft.com/en-us/library/windows/apps/hh761462.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh761462.aspx)

谁能解释一下windows phone 8推送通知的详细架构

# c# - 创建html下拉列表c#

> ID：14723990
> 
> 赞同：0
> 
> 时间：2013-02-06T07:47:26.263
> 
> 标签：c#, .net

C# 不是我的日常语言，所以对它很陌生

这是我的模特

```
public class SpecialtyListsModels
{
    public Dictionary<int, dynamic> specialties = new Dictionary<int, dynamic>();

    public Dictionary<int, dynamic> SpecialtyLists()
    {
        specialties.Add(1, new {name = "Varun", age = "11"} );
        specialties.Add(2, new {name = "Khushi", age = "12"} );

        return (specialties);
    }
} 
```

这是我的课

```
public class SignupController : Controller
{
    public ActionResult Index()
    {
        PFSignup.Models.SpecialtyListsModels objSpecialtyList = new PFSignup.Models.SpecialtyListsModels();

        Dictionary<int, dynamic> specialtyLists = objSpecialtyList.SpecialtyLists();

        return View();
    }

    [HttpPost]
    public ActionResult Create(SignupModels signup)
    {
        return View(signup);
    }
} 
```

这是我的视图，我想在其中添加所有专业的下拉列表

```
<body>
<div>
    @using (Html.BeginForm("Create", "Signup"))
    {
        <label for="first_name">First Name:</label>
        <input type="text" name="first_name" id="first_name" value="" />

        <br />

        <label for="last_name">Last Name:</label>
        <input type="text" name="last_name" id="last_name" value ="" />

        @Html.DropDownList("specialty_list", new SelectList(SpecialtyListModels, ) 

        <input type="submit" name="submit" value="Submit" />
     }
</div> 
```

有人可以帮我解决下拉列表代码吗，我需要在视图顶部添加列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:59:32.543

您可能希望首先使用此链接获取文档：[http ://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with -aspnet-mvc](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc)

公共类 SpecialtyListsModels { 公共字典专业 = 新字典（）；

```
 public Dictionary<int, dynamic> SpecialtyLists()
    {
        specialties.Add(1, new {name = "Varun", age = "11"} );
        specialties.Add(2, new {name = "Khushi", age = "12"} );

        return (specialties);
    }
} 
```

这是我的课

```
public class SignupController : Controller
{
    public ActionResult Index()
    {
        PFSignup.Models.SpecialtyListsModels objSpecialtyList = new PFSignup.Models.SpecialtyListsModels();

        Dictionary<int, dynamic> specialtyLists = objSpecialtyList.SpecialtyLists();

        return View(specialtyLists);
    }

    [HttpPost]
    public ActionResult Create(SignupModels signup)
    {
        return View(signup);
    }
} 
```

这是我的视图，我想在其中添加所有专业的下拉列表

```
 @model Dictionary<int, dynamic>
    <body>
    <div>
        @using (Html.BeginForm("Create", "Signup"))
        {
            <label for="first_name">First Name:</label>
            <input type="text" name="first_name" id="first_name" value="" />

            <br />

            <label for="last_name">Last Name:</label>
            <input type="text" name="last_name" id="last_name" value ="" />

            @Html.DropDownList("specialty_list", new SelectList(Model) 

            <input type="submit" name="submit" value="Submit" />
         }
    </div>
</body> 
```